(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6248],{50018:function(e){e.exports=(()=>{var e={477:e=>{e.exports=function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},811:(e,t,r)=>{var i=r(470),n=r(751);.exports=a,e.exports.default=e.exports,e.exports.__esModule=!0},723:324:(e,t,r)=>{var i=r(470);e.exports=e.exports.default=e.exports,e.exports.__esModule=!0},743:751:e=>{e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}},e.exports.default=e.exports,e.exports.__esModule=!0},470:480:(e,t,r)=>{"use strict";var i=r(697);e.exports=,424:(e,t,r)=>{"use strict";var i=r(697),n=r(723),a=r(988);l.httpHandler=r(480);var s=function(e){var t={};return e&&e.trim().split(`
`).forEach(,t};nction u(e){if(void 0===e.callback)throw Error("callback argument missing");var t=!1,r=r a=e.xhr||null;a||(a=e.cors||e.useXDR?new l.XDomainRequest:new l.XMLHttpRequest);var o,u,c,d=a.url=e.uri||e.url,h=a.method=e.method||"GET",f=e.body||e.data,p=a.headers=e.headers||{},v=!!e.sync,g=!1,m={body:void 0,headers:{},statusCode:0,method:h,url:d,rawRequest:a};if("json"in e&&!1!==e.json&&(g=!0,p.accept||p.Accept||(p.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(p["content-type"]||p["Content-Type"]||(p["Content-Type"]="application/json"),f=JSON.stringify(!0===e.json?f:e.json))),a.onreadystatechange=a.onload=n,a.onerror=i,a.onprogress=function(){},a.onabort=function(){u=!0},a.ontimeout=i,a.open(h,d,!v,e.username,e.password),v||(a.withCredentials=!!e.withCredentials),!v&&e.timeout>0&&(c=setTimeout(e.timeout)),a.setRequestHeader)for(o in p)p.hasOwnProperty(o)&&a.setRequestHeader(o,p[o]);else if(e.headers&&!e.headers))throw Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(a.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(a),a.send(f||null),a}e.exports=l,e.exports.default=l,l.XMLHttpRequest=i.XMLHttpRequest||function(){},l.XDomainRequest="withCredentials"in new l.XMLHttpRequest?l.XMLHttpRequest:i.XDomainRequest,["get","put","post","patch","head","delete"],},675:697:199:function(e){"undefined"!=typeof window&&(e.exports={"./node_modules/eventemitter3/index.js":function(e,t,r){"use strict";var i=Object.prototype.hasOwnProperty,n="~";function a(){}ct.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1)),u.prototype.eventNames=u.prototype.listeners=u.prototype.listenerCount=u.prototype.emit=u.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},u.prototype.once=u.prototype.removeListener=u.prototype.removeAllListeners=u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u},"./node_modules/url-toolkit/src/url-toolkit.js":function(e,t,r){var i,n,a,s,o;i=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,n=/^([^\/?#]*)([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:parseURL:normalizePath:buildURLFromParts:,e.exports=o},"./node_modules/webworkify-webpack/index.js":function(e,t,r){ar n="[\\.|\\-|\\+|\\w|/|@]+",a="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+n+").*?\\)";.exports=function(e,t){t=t||{};var o={main:r.m},l=t.all?{main:Object.keys(o.main)}:function(e,t){for(var i={main:[t]},o={main:[]},l={main:{}};Object.keys(i).reduce(!1);)for(var u=Object.keys(i),c=0;c<u.length;c++){var d=u[c],h=i[d].pop();if(l[d]=l[d]||{},!(l[d][h]||!e[d][h])){l[d][h]=!0,o[d]=o[d]||[],o[d].push(h);for(var f=function(e,t,i){var o={};o[i]=[];var l=t.toString(),u=l.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return o;for(var c,d=u[1],h=RegExp("(\\\\n|\\W)"+s(d)+a,"g");c=h.exec(l);)"dll-reference"!==c[3]&&o[i].push(c[3]);for(h=RegExp("\\("+s(d)+'\\("(dll-reference\\s('+n+'))"\\)\\)'+a,"g");c=h.exec(l);)e[c[2]]||(o[i].push(c[1]),e[c[2]]=r(c[1]).m),o[c[2]]=o[c[2]]||[],o[c[2]].push(c[4]);for(var f=Object.keys(o),p=0;p<f.length;p++)for(var v=0;v<o[f[p]].length;v++)isNaN(1*o[f[p]][v])||(o[f[p]][v]=1*o[f[p]][v]);return o}(e,e[d][h],d),p=Object.keys(f),v=0;v<p.length;v++)i[p[v]]=i[p[v]]||[],i[p[v]]=i[p[v]].concat(f[p[v]])}}return o}(o,e),u="";Object.keys(l).filter(function(e){return"main"!==e}).forEach(function(e){for(var t=0;l[e][t];)t++;l[e].push(t),o[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",u=u+"var "+e+" = ("+i.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+l[e].map(function(t){return""+JSON.stringify(t)+": "+o[e][t].toString()}).join(",")+`});
`}),u=u+"new (("+i.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+l.main.map(.join(",")+"}))(self);";var c=new window.Blob([u],{type:"text/javascript"});if(t.bare)return c;var d=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(c),h=new window.Worker(d);return h.objectURL=d,h}},"./src/config.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"hlsDefaultConfig",function(){return E}),r.d(t,"mergeConfig",function(){return S}),r.d(t,"enableStreamingMode",function(){return k});var i=r("./src/controller/abr-controller.ts"),n=r("./src/controller/audio-stream-controller.ts"),a=r("./src/controller/audio-track-controller.ts"),s=r("./src/controller/subtitle-stream-controller.ts"),o=r("./src/controller/subtitle-track-controller.ts"),l=r("./src/controller/buffer-controller.ts"),u=r("./src/controller/timeline-controller.ts"),c=r("./src/controller/cap-level-controller.ts"),d=r("./src/controller/fps-controller.ts"),h=r("./src/controller/eme-controller.ts"),f=r("./src/controller/cmcd-controller.ts"),p=r("./src/utils/xhr-loader.ts"),v=r("./src/utils/fetch-loader.ts"),g=r("./src/utils/cues.ts"),m=r("./src/utils/mediakeys-helper.ts"),y=r("./src/utils/logger.ts");function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}r E=b(b({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:p.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:i.default,bufferController:l.default,capLevelController:c.default,fpsController:d.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:m.requestMediaKeySystemAccess,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0},{cueHandler:g.default,enableCEA708Captions:!0,enableWebVTT:!0,enableIMSC1:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:s.SubtitleStreamController,subtitleTrackController:o.default,timelineController:u.TimelineController,audioStreamController:n.default,audioTrackController:a.default,emeController:h.default,cmcdController:f.default});"./src/controller/abr-controller.ts":function(e,t,r){"use strict";r.r(t);var i=r("./src/polyfills/number.ts"),n=r("./src/utils/ewma-bandwidth-estimator.ts"),a=r("./src/events.ts"),s=r("./src/utils/buffer-helper.ts"),o=r("./src/errors.ts"),l=r("./src/types/loader.ts"),u=r("./src/utils/logger.ts");function c(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var d=function(){ar t,r,d=e.prototype;return d.registerListeners=function(){var e=this.hls;e.on(a.Events.FRAG_LOADING,this.onFragLoading,this),e.on(a.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.on(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(a.Events.ERROR,this.onError,this)},d.unregisterListeners=function(){var e=this.hls;e.off(a.Events.FRAG_LOADING,this.onFragLoading,this),e.off(a.Events.FRAG_LOADED,this.onFragLoaded,this),e.off(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.off(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(a.Events.ERROR,this.onError,this)},d.destroy=d.onFragLoading=d.onLevelLoaded=d._abandonRulesCheck=function(){var e=this.fragCurrent,t=this.partCurrent,r=this.hls,n=r.autoLevelEnabled,o=r.config,l=r.media;if(!(!e||!l)){var c=t?t.stats:e.stats,d=t?t.duration:e.duration;if(c.aborted){u.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),this._nextAutoLevel=-1;return}if(!(!n||l.paused||!l.playbackRate||!l.readyState)){var h=performance.now()-c.loading.start,f=Math.abs(l.playbackRate);if(!(h<=500*d/f)){var p=r.levels,v=r.minAutoLevel,g=p[e.level],m=c.total||Math.max(c.loaded,Math.round(d*g.maxBitrate/8)),y=Math.max(1,c.bwEstimate?c.bwEstimate/8:1e3*c.loaded/h),_=(m-c.loaded)/y,T=l.currentTime,b=(s.BufferHelper.bufferInfo(l,T,o.maxBufferHole).end-T)/f;if(!(b>=2*d/f||_<=b)){var E,S=Number.POSITIVE_INFINITY;for(E=e.level-1;E>v&&!((S=d*p[E].maxBitrate/(6.4*y))<b);E--);if(!(S>=_)){var k=this.bwEstimator.getEstimate();u.logger.warn("Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+E+`
      Current BW estimate: `+(Object(i.isFiniteNumber)(k)?(k/1024).toFixed(3):"Unknown")+` Kb/s
      Estimated load time for current fragment: `+_.toFixed(3)+` s
      Estimated load time for the next fragment: `+S.toFixed(3)+` s
      Time to underbuffer: `+b.toFixed(3)+" s"),r.nextLoadLevel=E,this.bwEstimator.sample(h,c.loaded),this.clearTimer(),e.loader&&(this.fragCurrent=this.partCurrent=null,e.loader.abort()),r.trigger(a.Events.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:c})}}}}}},d.onFragLoaded=d.onFragBuffered=function(e,t){var r=t.frag,i=t.part,n=i?i.stats:r.stats;if(!n.aborted&&!(r.type!==l.PlaylistLevelType.MAIN||"initSegment"===r.sn)){var a=n.parsing.end-n.loading.start;this.bwEstimator.sample(a,n.loaded),n.bwEstimate=this.bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}},d.onError=d.clearTimer=d.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,r=this.hls,i=r.maxAutoLevel,n=r.config,a=r.minAutoLevel,o=r.media,l=t?t.duration:e?e.duration:0,c=o?o.currentTime:0,d=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,h=this.bwEstimator?this.bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,f=(s.BufferHelper.bufferInfo(o,c,n.maxBufferHole).end-c)/d,p=this.findBestLevel(h,a,i,f,n.abrBandWidthFactor,n.abrBandWidthUpFactor);if(p>=0)return p;u.logger.trace((f?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var v=l?Math.min(l,n.maxStarvationDelay):n.maxStarvationDelay,g=n.abrBandWidthFactor,m=n.abrBandWidthUpFactor;if(!f){var y=this.bitrateTestDelay;y&&(v=(l?Math.min(l,n.maxLoadingDelay):n.maxLoadingDelay)-y,u.logger.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*v)+" ms"),g=m=1)}return Math.max(p=this.findBestLevel(h,a,i,f+v,g,m),0)},d.findBestLevel=function(e,t,r,i,n,a){for(var s,o=this.fragCurrent,l=this.partCurrent,c=this.lastLoadedFragLevel,d=this.hls.levels,h=d[c],f=!!(null!=h&&null!==(s=h.details)&&void 0!==s&&s.live),p=null==h?void 0:h.codecSet,v=l?l.duration:o?o.duration:0,g=r;g>=t;g--){var m=d[g];if(!(!m||p&&m.codecSet!==p)){var y=m.details,_=(l?null==y?void 0:y.partTarget:null==y?void 0:y.averagetargetduration)||v,T=void 0;T=g<=c?n*e:a*e;var b=d[g].maxBitrate,E=b*_/T;if(u.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+g+"/"+Math.round(T)+"/"+b+"/"+_+"/"+i+"/"+E),T>b&&(!E||f&&!this.bitrateTestDelay||E<i))return g}}return -1},t=[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this.bwEstimator;if(-1!==e&&(!t||!t.canEstimate()))return e;var r=this.getNextABRAutoLevel();return -1!==e&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e}}],c(e.prototype,t),r&&c(e,r),e}();t.default=d},"./src/controller/audio-stream-controller.ts":function(e,t,r){"use strict";r.r(t);var i=r("./src/polyfills/number.ts"),n=r("./src/controller/base-stream-controller.ts"),a=r("./src/events.ts"),s=r("./src/utils/buffer-helper.ts"),o=r("./src/controller/fragment-tracker.ts"),l=r("./src/types/level.ts"),u=r("./src/types/loader.ts"),c=r("./src/loader/fragment.ts"),d=r("./src/demux/chunk-cache.ts"),h=r("./src/demux/transmuxer-interface.ts"),f=r("./src/types/transmuxer.ts"),p=r("./src/controller/fragment-finders.ts"),v=r("./src/utils/discontinuities.ts"),g=r("./src/errors.ts"),m=r("./src/utils/logger.ts");function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){.prototype=Object.create(e.prototype),t.prototype.constructor=t,_(t,e);var r=t.prototype;return r.onHandlerDestroying=function(){this._unregisterListeners(),this.mainDetails=null},r._registerListeners=function(){var e=this.hls;e.on(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(a.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(a.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(a.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(a.Events.ERROR,this.onError,this),e.on(a.Events.BUFFER_RESET,this.onBufferReset,this),e.on(a.Events.BUFFER_CREATED,this.onBufferCreated,this),e.on(a.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(a.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this)},r._unregisterListeners=function(){var e=this.hls;e.off(a.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(a.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(a.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(a.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.off(a.Events.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(a.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(a.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(a.Events.ERROR,this.onError,this),e.off(a.Events.BUFFER_RESET,this.onBufferReset,this),e.off(a.Events.BUFFER_CREATED,this.onBufferCreated,this),e.off(a.Events.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(a.Events.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(a.Events.FRAG_BUFFERED,this.onFragBuffered,this)},r.onInitPtsFound=r.startLoad=function(e){if(!this.levels){this.startPosition=e,this.state=n.State.STOPPED;return}var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=n.State.IDLE):(this.loadedmetadata=!1,this.state=n.State.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()},r.doTick=function(){switch(this.state){case n.State.IDLE:this.doTickIdle();break;case n.State.WAITING_TRACK:var t,r=this.levels,i=this.trackId,a=null==r||null===(t=r[i])||void 0===t?void 0:t.details;if(a){if(this.waitForCdnTuneIn(a))break;this.state=n.State.WAITING_INIT_PTS}break;case n.State.FRAG_LOADING_WAITING_RETRY:var o,l=performance.now(),u=this.retryDate;(!u||l>=u||null!==(o=this.media)&&void 0!==o&&o.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.state=n.State.IDLE);break;case n.State.WAITING_INIT_PTS:var c=this.waitingData;if(c){var d=c.frag,h=c.part,f=c.cache,v=c.complete;if(void 0!==this.initPTS[d.cc]){this.waitingData=null,this.waitingVideoCC=-1,this.state=n.State.FRAG_LOADING;var g={frag:d,part:h,payload:f.flush(),networkDetails:null};this._handleFragmentLoadProgress(g),v&&e.prototype._handleFragmentLoadComplete.call(this,g)}else if(this.videoTrackCC!==this.waitingVideoCC)m.logger.log("Waiting fragment cc ("+d.cc+") cancelled because video is at cc "+this.videoTrackCC),this.clearWaitingFragment();else{var y=this.getLoadPosition(),_=s.BufferHelper.bufferInfo(this.mediaBuffer,y,this.config.maxBufferHole);0>Object(p.fragmentWithinToleranceTest)(_.end,this.config.maxFragLookUpTolerance,d)&&(m.logger.log("Waiting fragment cc ("+d.cc+") @ "+d.start+" cancelled because another fragment at "+_.end+" is needed"),this.clearWaitingFragment())}}else this.state=n.State.IDLE}this.onTickEnd()},r.clearWaitingFragment=r.onTickEnd=function(){var e=this.media;if(!(!e||!e.readyState)){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length&&(this.loadedmetadata=!0),this.lastCurrentTime=e.currentTime}},r.doTickIdle=function(){var e,t,r=this.hls,i=this.levels,s=this.media,o=this.trackId,l=r.config;if(!(!i||!i[o])&&!(!s&&(this.startFragRequested||!l.startFragPrefetch))){var d=i[o].details;if(!d||d.live&&this.levelLastLoaded!==o||this.waitForCdnTuneIn(d)){this.state=n.State.WAITING_TRACK;return}this.bufferFlushed&&(this.bufferFlushed=!1,this.afterBufferFlushed(this.mediaBuffer?this.mediaBuffer:this.media,c.ElementaryStreamTypes.AUDIO,u.PlaylistLevelType.AUDIO));var h=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,u.PlaylistLevelType.AUDIO);if(null!==h){var f=h.len,p=this.getMaxBufferLength(),v=this.audioSwitch;if(!(f>=p&&!v)){if(!v&&this._streamEnded(h,d)){r.trigger(a.Events.BUFFER_EOS,{type:"audio"}),this.state=n.State.ENDED;return}var g=d.fragments[0].start,m=h.end;if(v){var y=this.getLoadPosition();m=y,d.PTSKnown&&y<g&&(h.end>g||h.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),s.currentTime=g+.05)}var _=this.getNextFragment(m,d);if(!_){this.bufferFlushed=!0;return}(null===(e=_.decryptdata)||void 0===e?void 0:e.keyFormat)!=="identity"||null!==(t=_.decryptdata)&&void 0!==t&&t.key?this.loadFragment(_,d,m):this.loadKey(_,d)}}}},r.getMaxBufferLength=r.onMediaDetaching=function(){this.videoBuffer=null,e.prototype.onMediaDetaching.call(this)},r.onAudioTracksUpdated=r.onAudioTrackSwitching=r.onManifestLoading=r.onLevelLoaded=function(e,t){this.mainDetails=t.details},r.onAudioTrackLoaded=function(e,t){var r,i=this.levels,a=t.details,s=t.id;if(!i){this.warn("Audio tracks were reset while loading level "+s);return}this.log("Track "+s+" loaded ["+a.startSN+","+a.endSN+"],duration:"+a.totalduration);var o=i[s],l=0;if(a.live||null!==(r=o.details)&&void 0!==r&&r.live){var u=this.mainDetails;if(a.fragments[0]||(a.deltaUpdateFailed=!0),a.deltaUpdateFailed||!u)return;!o.details&&a.hasProgramDateTime&&u.hasProgramDateTime?(Object(v.alignMediaPlaylistByPDT)(a,u),l=a.fragments[0].start):l=this.alignPlaylists(a,o.details)}o.details=a,this.levelLastLoaded=s,this.startFragRequested||!this.mainDetails&&a.live||this.setStartPosition(o.details,l),this.state!==n.State.WAITING_TRACK||this.waitForCdnTuneIn(a)||(this.state=n.State.IDLE),this.tick()},r._handleFragmentLoadProgress=function(e){var t,r=e.frag,i=e.part,a=e.payload,s=this.config,o=this.trackId,l=this.levels;if(!l){this.warn("Audio tracks were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered");return}var c=l[o];console.assert(c,"Audio track is defined on fragment load progress");var p=c.details;console.assert(p,"Audio track details are defined on fragment load progress");var v=s.defaultAudioCodec||c.audioCodec||"mp4a.40.2",g=this.transmuxer;g||(g=this.transmuxer=new h.default(this.hls,u.PlaylistLevelType.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));var y=this.initPTS[r.cc],_=null===(t=r.initSegment)||void 0===t?void 0:t.data;if(void 0!==y){var T=i?i.index:-1,b=new f.ChunkMetadata(r.level,r.sn,r.stats.chunkCount,a.byteLength,T,-1!==T);g.push(a,_,v,"",r,i,p.totalduration,!1,b,y)}else m.logger.log("Unknown video PTS for cc "+r.cc+", waiting for video PTS before demuxing audio frag "+r.sn+" of ["+p.startSN+" ,"+p.endSN+"],track "+o),(this.waitingData=this.waitingData||{frag:r,part:i,cache:new d.default,complete:!1}).cache.push(new Uint8Array(a)),this.waitingVideoCC=this.videoTrackCC,this.state=n.State.WAITING_INIT_PTS},r._handleFragmentLoadComplete=r.onBufferReset=r.onBufferCreated=r.onFragBuffered=function(e,t){var r=t.frag,i=t.part;if(r.type===u.PlaylistLevelType.AUDIO){if(this.fragContextChanged(r)){this.warn("Fragment "+r.sn+(i?" p: "+i.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state+", audioSwitch: "+this.audioSwitch);return}"initSegment"!==r.sn&&(this.fragPrevious=r,this.audioSwitch&&(this.audioSwitch=!1,this.hls.trigger(a.Events.AUDIO_TRACK_SWITCHED,{id:this.trackId}))),this.fragBufferedComplete(r,i)}},r.onError=r.onBufferFlushed=r._handleTransmuxComplete=function(e){var t,r="audio",i=this.hls,s=e.remuxResult,o=e.chunkMeta,l=this.getCurrentContext(o);if(!l){this.warn("The loading context changed while buffering fragment "+o.sn+" of level "+o.level+". This chunk will not be buffered."),this.resetLiveStartWhenNotLoaded(o.level);return}var u=l.frag,d=l.part,h=s.audio,f=s.text,p=s.id3,v=s.initSegment;if(!this.fragContextChanged(u)){if(this.state=n.State.PARSING,this.audioSwitch&&h&&this.completeAudioSwitch(),null!=v&&v.tracks&&(this._bufferInitSegment(v.tracks,u,o),i.trigger(a.Events.FRAG_PARSING_INIT_SEGMENT,{frag:u,id:r,tracks:v.tracks})),h){var g=h.startPTS,m=h.endPTS,_=h.startDTS,T=h.endDTS;d&&(d.elementaryStreams[c.ElementaryStreamTypes.AUDIO]={startPTS:g,endPTS:m,startDTS:_,endDTS:T}),u.setElementaryStreamInfo(c.ElementaryStreamTypes.AUDIO,g,m,_,T),this.bufferFragmentData(h,u,d,o)}if(null!=p&&null!==(t=p.samples)&&void 0!==t&&t.length){var b=y({frag:u,id:r},p);i.trigger(a.Events.FRAG_PARSING_METADATA,b)}if(f){var E=y({frag:u,id:r},f);i.trigger(a.Events.FRAG_PARSING_USERDATA,E)}}},r._bufferInitSegment=r.loadFragment=r.completeAudioSwitch=t}(n.default);t.default=T},"./src/controller/audio-track-controller.ts":function(e,t,r){"use strict";r.r(t);var i=r("./src/events.ts"),n=r("./src/errors.ts"),a=r("./src/controller/base-playlist-controller.ts"),s=r("./src/types/loader.ts");function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){.prototype=Object.create(e.prototype),t.prototype.constructor=t,l(t,e);var r,a=t.prototype;return a.registerListeners=function(){var e=this.hls;e.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(i.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(i.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(i.Events.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(i.Events.ERROR,this.onError,this)},a.unregisterListeners=a.destroy=a.onManifestLoading=a.onManifestParsed=a.onAudioTrackLoaded=a.onLevelLoading=function(e,t){this.switchLevel(t.level)},a.onLevelSwitching=function(e,t){this.switchLevel(t.level)},a.switchLevel=a.onError=function(t,r){e.prototype.onError.call(this,t,r),r.fatal||!r.context||r.context.type!==s.PlaylistContextType.AUDIO_TRACK||r.context.id!==this.trackId||r.context.groupId!==this.groupId||this.retryLoadingOrFail(r)},a.setAudioTrack=function(e){var t=this.tracksInGroup;if(e<0||e>=t.length){this.warn("Invalid id passed to audio-track controller");return}this.clearTimer();var r=t[this.trackId];this.log("Now switching to audio-track index "+e);var n=t[e],a=n.id,s=n.groupId,o=n.name,l=n.type,u=n.url;if(this.trackId=e,this.trackName=o,this.selectDefaultTrack=!1,this.hls.trigger(i.Events.AUDIO_TRACK_SWITCHING,{id:a,groupId:void 0===s?"":s,name:o,type:l,url:u}),!(n.details&&!n.details.live)){var c=this.switchParams(n.url,null==r?void 0:r.details);this.loadPlaylist(c)}},a.selectInitialTrack=a.findTrackId=function(e){for(var t=this.tracksInGroup,r=0;r<t.length;r++){var i=t[r];if((!this.selectDefaultTrack||i.default)&&(!e||e===i.name))return i.id}return -1},a.loadPlaylist=o(t.prototype,[{key:"audioTracks",get:function(){return this.tracksInGroup}},{key:"audioTrack",get:function(){return this.trackId},set:]),r&&o(t,r),t}(a.default);t.default=u},"./src/controller/base-playlist-controller.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return l});var i=r("./src/polyfills/number.ts"),n=r("./src/types/level.ts"),a=r("./src/controller/level-helper.ts"),s=r("./src/utils/logger.ts"),o=r("./src/errors.ts"),l=function(){ar t=e.prototype;return t.destroy=t.onError=t.clearTimer=t.startLoad=t.stopLoad=t.switchParams=t.loadPlaylist=function(e){},t.shouldLoadTrack=t.playlistLoaded=function(e,t,r){var i=this,n=t.details,s=t.stats,o=s.loading.end?Math.max(0,self.performance.now()-s.loading.end):0;if(n.advancedDateTime=Date.now()-o,n.live||null!=r&&r.live){if(n.reloaded(r),r&&this.log("live playlist "+e+" "+(n.advanced?"REFRESHED "+n.lastPartSn+"-"+n.lastPartIndex:"MISSED")),r&&n.fragments.length>0&&Object(a.mergeDetails)(r,n),!this.canLoad||!n.live)return;var l,u=void 0,c=void 0;if(n.canBlockReload&&n.endSN&&n.advanced){var d=this.hls.config.lowLatencyMode,h=n.lastPartSn,f=n.endSN,p=n.lastPartIndex,v=h===f;-1!==p?(u=v?f+1:h,c=v?d?0:p:p+1):u=f+1;var g=n.age,m=Math.min(g+n.ageHeader-n.partTarget,1.5*n.targetduration);if(m>0){if(r&&m>r.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+r.tuneInGoal+" to: "+m+" with playlist age: "+n.age),m=0;else{var y=Math.floor(m/n.targetduration);u+=y,void 0!==c&&(c+=Math.round(m%n.targetduration/n.partTarget)),this.log("CDN Tune-in age: "+n.ageHeader+"s last advanced "+g.toFixed(2)+"s goal: "+m+" skip sn "+y+" to part "+c)}n.tuneInGoal=m}if(l=this.getDeliveryDirectives(n,t.deliveryDirectives,u,c),d||!v){this.loadPlaylist(l);return}}else l=this.getDeliveryDirectives(n,t.deliveryDirectives,u,c);var _=Object(a.computeReloadInterval)(n,s);void 0!==u&&n.canBlockReload&&(_-=n.partTarget||1),this.log("reload live playlist "+e+" in "+Math.round(_)+" ms"),this.timer=self.setTimeout(function(){return i.loadPlaylist(l)},_)}else this.clearTimer()},t.getDeliveryDirectives=t.retryLoadingOrFail=e}()},"./src/controller/base-stream-controller.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"State",function(){return b}),r.d(t,"default",function(){return E});var i=r("./src/polyfills/number.ts"),n=r("./src/task-loop.ts"),a=r("./src/controller/fragment-tracker.ts"),s=r("./src/utils/buffer-helper.ts"),o=r("./src/utils/logger.ts"),l=r("./src/events.ts"),u=r("./src/errors.ts"),c=r("./src/types/transmuxer.ts"),d=r("./src/utils/mp4-tools.ts"),h=r("./src/utils/discontinuities.ts"),f=r("./src/controller/fragment-finders.ts"),p=r("./src/controller/level-helper.ts"),v=r("./src/loader/fragment-loader.ts"),g=r("./src/crypt/decrypter.ts"),m=r("./src/utils/time-ranges.ts"),y=r("./src/types/loader.ts");function _(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BACKTRACKING:"BACKTRACKING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"},E=function(e){function t(t,r,i){var n;return(n=e.call(this)||this).hls=void 0,n.fragPrevious=null,n.fragCurrent=null,n.fragmentTracker=void 0,n.transmuxer=null,n._state=b.STOPPED,n.media=void 0,n.mediaBuffer=void 0,n.config=void 0,n.bitrateTest=!1,n.lastCurrentTime=0,n.nextLoadPosition=0,n.startPosition=0,n.loadedmetadata=!1,n.fragLoadError=0,n.retryDate=0,n.levels=null,n.fragmentLoader=void 0,n.levelLastLoaded=null,n.startFragRequested=!1,n.decrypter=void 0,n.initPTS=[],n.onvseeking=null,n.onvended=null,n.logPrefix="",n.log=void 0,n.warn=void 0,n.logPrefix=i,n.log=o.logger.log.bind(o.logger,i+":"),n.warn=o.logger.warn.bind(o.logger,i+":"),n.hls=t,n.fragmentLoader=new v.default(t.config),n.fragmentTracker=r,n.config=t.config,n.decrypter=new g.default(t,t.config),t.on(l.Events.KEY_LOADED,n.onKeyLoaded,n)),n}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,T(t,e);var r,n=t.prototype;return n.doTick=function(){this.onTickEnd()},n.onTickEnd=function(){},n.startLoad=function(e){},n.stopLoad=n._streamEnded=n.onMediaAttached=n.onMediaDetaching=n.onMediaSeeking=n.onMediaEnded=n.onKeyLoaded=function(e,t){if(!(this.state!==b.KEY_LOADING||t.frag!==this.fragCurrent||!this.levels)){this.state=b.IDLE;var r=this.levels[t.frag.level].details;r&&this.loadFragment(t.frag,r,t.frag.start)}},n.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},n.onHandlerDestroyed=n.loadKey=n.loadFragment=n._loadFragForPlayback=function(e,t,r){var i=this;this._doFragLoad(e,t,r,.then(function(t){if(t){i.fragLoadError=0;var r=i.state;if(i.fragContextChanged(e)){r!==b.FRAG_LOADING&&r!==b.BACKTRACKING&&(i.fragCurrent||r!==b.PARSING)||(i.fragmentTracker.removeFragment(e),i.state=b.IDLE);return}if("payload"in t&&(i.log("Loaded fragment "+e.sn+" of level "+e.level),i.hls.trigger(l.Events.FRAG_LOADED,t),i.state===b.BACKTRACKING)){i.fragmentTracker.backtrack(e,t),i.resetFragmentLoading(e);return}i._handleFragmentLoadComplete(t)}}).catch(function(t){i.warn(t),i.resetFragmentLoading(e)})},n.flushMainBuffer=n._loadInitSegment=function(e){var t=this;this._doFragLoad(e).then(.then(.then(.catch(},n.fragContextChanged=n.fragBufferedComplete=n._handleFragmentLoadComplete=n._handleFragmentLoadProgress=function(e){},n._doFragLoad=function(e,t,r,n){var a=this;if(void 0===r&&(r=null),!this.levels)throw Error("frag load aborted, missing levels");if(r=Math.max(e.start,r||0),this.config.lowLatencyMode&&t){var s=t.partList;if(s&&n){r>e.end&&t.fragmentHint&&(e=t.fragmentHint);var o=this.getNextPart(s,e,r);if(o>-1){var u=s[o];return this.log("Loading part sn: "+e.sn+" p: "+u.index+" cc: "+e.cc+" of playlist ["+t.startSN+"-"+t.endSN+"] parts [0-"+o+"-"+(s.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(r.toFixed(3))),this.nextLoadPosition=u.start+u.duration,this.state=b.FRAG_LOADING,this.hls.trigger(l.Events.FRAG_LOADING,{frag:e,part:s[o],targetBufferTime:r}),this.doFragPartsLoad(e,s,o,n).catch(function(e){return a.handleFragLoadError(e)})}if(!e.url||this.loadedEndOfParts(s,r))return Promise.resolve(null)}}return this.log("Loading fragment "+e.sn+" cc: "+e.cc+" "+(t?"of ["+t.startSN+"-"+t.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(r.toFixed(3))),Object(i.isFiniteNumber)(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=b.FRAG_LOADING,this.hls.trigger(l.Events.FRAG_LOADING,{frag:e,targetBufferTime:r}),this.fragmentLoader.load(e,n).catch(function(e){return a.handleFragLoadError(e)})},n.doFragPartsLoad=function(e,t,r,i){var n=this;return new Promise(function(a,s){var o=[];((r)})},n.handleFragLoadError=n._handleTransmuxerFlush=function(e){var t=this.getCurrentContext(e);if(!t||this.state!==b.PARSING){this.fragCurrent||(this.state=b.IDLE);return}var r=t.frag,i=t.part,n=t.level,a=self.performance.now();r.stats.parsing.end=a,i&&(i.stats.parsing.end=a),this.updateLevelTiming(r,i,n,e.partial)},n.getCurrentContext=n.bufferFragmentData=function(e,t,r,i){if(!(!e||this.state!==b.PARSING)){var n=e.data1,a=e.data2,s=n;if(n&&a&&(s=Object(d.appendUint8Array)(n,a)),!(!s||!s.length)){var o={type:e.type,frag:t,part:r,chunkMeta:i,parent:t.type,data:s};this.hls.trigger(l.Events.BUFFER_APPENDING,o),e.dropped&&e.independent&&!r&&this.flushBufferGap(t)}}},n.flushBufferGap=n.getFwdBufferInfo=n.getMaxBufferLength=n.reduceMaxBufferLength=n.getNextFragment=n.getNextPart=n.loadedEndOfParts=n.getInitialLiveFragment=n.getFragmentAtPosition=function(e,t,r){var i,n=this.config,s=this.fragPrevious,o=r.fragments,l=r.endSN,u=r.fragmentHint,c=n.maxFragLookUpTolerance,d=!!(n.lowLatencyMode&&r.partList&&u);if(d&&u&&!this.bitrateTest&&(o=o.concat(u),l=u.sn),i=e<t?Object(f.findFragmentByPTS)(s,o,e,e>t-c?0:c):o[o.length-1]){var h=i.sn-r.startSN,p=s&&i.level===s.level,v=o[h+1];if(this.fragmentTracker.getState(i)===a.FragmentState.BACKTRACKED){i=null;for(var g=h;o[g]&&this.fragmentTracker.getState(o[g])===a.FragmentState.BACKTRACKED;)i=s?o[g--]:o[--g];i||(i=v)}else s&&i.sn===s.sn&&!d&&p&&(i.sn<l&&this.fragmentTracker.getState(v)!==a.FragmentState.OK?(this.log("SN "+i.sn+" just loaded, load next one: "+v.sn),i=v):i=null)}return i},n.synchronizeToLiveEdge=n.alignPlaylists=function(e,t){var r=this.levels,n=this.levelLastLoaded,a=this.fragPrevious,s=null!==n?r[n]:null,o=e.fragments.length;if(!o)return this.warn("No fragments in live playlist"),0;var l=e.fragments[0].start,u=e.alignedSliding&&Object(i.isFiniteNumber)(l);if(!t||!u&&!l){Object(h.alignStream)(a,s,e);var c=e.fragments[0].start;return this.log("Live playlist sliding: "+c.toFixed(2)+" start-sn: "+(t?t.startSN:"na")+"->"+e.startSN+" prev-sn: "+(a?a.sn:"na")+" fragments: "+o),c}return l},n.waitForCdnTuneIn=n.setStartPosition=n.getLoadPosition=n.handleFragLoadAborted=n.resetFragmentLoading=n.onFragmentOrKeyLoadError=function(e,t){if(!t.fatal){var r=t.frag;if(!(!r||r.type!==e)){var i=this.fragCurrent;console.assert(i&&r.sn===i.sn&&r.level===i.level&&r.urlId===i.urlId,"Frag load error must match current frag to retry");var n=this.config;if(this.fragLoadError+1<=n.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(r.level))return;var a=Math.min(Math.pow(2,this.fragLoadError)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);this.warn("Fragment "+r.sn+" of "+e+" "+r.level+" failed to load, retrying in "+a+"ms"),this.retryDate=self.performance.now()+a,this.fragLoadError++,this.state=b.FRAG_LOADING_WAITING_RETRY}else t.levelRetry?(e===y.PlaylistLevelType.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=b.IDLE):(o.logger.error(t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.hls.stopLoad(),this.state=b.ERROR)}}},n.afterBufferFlushed=n.resetLoadingState=n.resetLiveStartWhenNotLoaded=n.updateLevelTiming=n.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},_(t.prototype,[{key:"state",get:function(){return this._state},set:]),r&&_(t,r),t}(n.default)},"./src/controller/buffer-controller.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return f});var i=r("./src/polyfills/number.ts"),n=r("./src/events.ts"),a=r("./src/utils/logger.ts"),s=r("./src/errors.ts"),o=r("./src/utils/buffer-helper.ts"),l=r("./src/utils/mediasource-helper.ts"),u=r("./src/loader/fragment.ts"),c=r("./src/controller/buffer-operation-queue.ts"),d=Object(l.getMediaSource)(),h=/([ha]vc.)(?:\.[^.,]+)+/,f=function(){ar t=e.prototype;return t.hasSourceTypes=t.destroy=function(){this.unregisterListeners(),this.details=null},t.registerListeners=function(){var e=this.hls;e.on(n.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(n.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(n.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(n.Events.BUFFER_RESET,this.onBufferReset,this),e.on(n.Events.BUFFER_APPENDING,this.onBufferAppending,this),e.on(n.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.on(n.Events.BUFFER_EOS,this.onBufferEos,this),e.on(n.Events.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(n.Events.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(n.Events.FRAG_PARSED,this.onFragParsed,this),e.on(n.Events.FRAG_CHANGED,this.onFragChanged,this)},t.unregisterListeners=t._initSourceBuffer=t.onManifestParsed=t.onMediaAttaching=t.onMediaDetaching=t.onBufferReset=t.onBufferCodecs=function(e,t){var r=this,i=this.getSourceBufferTypes().length;Object.keys(t).forEach(function(e){if(i){var n=r.tracks[e];if(n&&"function"==typeof n.buffer.changeType){var a=t[e],s=a.codec,o=a.levelCodec,l=a.container;(n.levelCodec||n.codec).replace(h,"$1")!==(o||s).replace(h,"$1")&&r.appendChangeType(e,l+";codecs="+(o||s))}}else r.pendingTracks[e]=t[e]}),!i&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},t.appendChangeType=t.onBufferAppending=function(e,t){var r=this,i=this.hls,l=this.operationQueue,u=this.tracks,c=t.data,d=t.type,h=t.frag,f=t.part,p=t.chunkMeta,v=p.buffering[d],g=self.performance.now();v.start=g;var m=h.stats.buffering,y=f?f.stats.buffering:null;0===m.start&&(m.start=g),y&&0===y.start&&(y.start=g);var _=u.audio,T="audio"===d&&1===p.id&&(null==_?void 0:_.container)==="audio/mpeg";l.append({execute:onStart:function(){},onComplete:onError:,d)},t.onBufferFlushing=t.onFragParsed=t.onFragChanged=t.onBufferEos=function(e,t){var r=this;this.getSourceBufferTypes().reduce(function(e,i){var n=r.sourceBuffer[i];return t.type&&t.type!==i||!n||n.ended||(n.ended=!0,a.logger.log("[buffer-controller]: "+i+" sourceBuffer now EOS")),e&&!!(!n||n.ended)},!0)&&this.blockBuffers(},t.onLevelUpdated=t.flushBackBuffer=function(){var e=this.hls,t=this.details,r=this.media,a=this.sourceBuffer;if(!(!r||null===t)){var s=this.getSourceBufferTypes();if(s.length){var l=t.live&&null!==e.config.liveBackBufferLength?e.config.liveBackBufferLength:e.config.backBufferLength;if(!(!Object(i.isFiniteNumber)(l)||l<0)){var u=r.currentTime,c=t.levelTargetDuration,d=Math.max(l,c),h=Math.floor(u/c)*c-d;s.forEach(}}}},t.updateMediaElementDuration=function(){if(!(!this.details||!this.media||!this.mediaSource||"open"!==this.mediaSource.readyState)){var e=this.details,t=this.hls,r=this.media,n=this.mediaSource,s=e.fragments[0].start+e.totalduration,o=r.duration,l=Object(i.isFiniteNumber)(n.duration)?n.duration:0;e.live&&t.config.liveDurationInfinity?(a.logger.log("[buffer-controller]: Media Source duration is set to Infinity"),n.duration=1/0,this.updateSeekableRange(e)):(s>l&&s>o||!Object(i.isFiniteNumber)(o))&&(a.logger.log("[buffer-controller]: Updating Media Source duration to "+s.toFixed(3)),n.duration=s)}},t.updateSeekableRange=t.checkPendingTracks=t.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");var i=0;for(var o in e)if(!t[o]){var l=e[o];if(!l)throw Error("source buffer exists for track "+o+", however track does not");var u=l.levelCodec||l.codec,c=l.container+";codecs="+u;a.logger.log("[buffer-controller]: creating sourceBuffer("+c+")");try{var d=t[o]=r.addSourceBuffer(c);this.addBufferListener(o,"updatestart",this._onSBUpdateStart),this.addBufferListener(o,"updateend",this._onSBUpdateEnd),this.addBufferListener(o,"error",this._onSBUpdateError),this.tracks[o]={buffer:d,codec:u,container:l.container,levelCodec:l.levelCodec,id:l.id},i++}catch(e){a.logger.error("[buffer-controller]: error while trying to add sourceBuffer: "+e.message),this.hls.trigger(n.Events.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:e,mimeType:c})}}i&&this.hls.trigger(n.Events.BUFFER_CREATED,{tracks:this.tracks})},t._onSBUpdateStart=t._onSBUpdateEnd=t._onSBUpdateError=t.removeExecutor=function(e,t,r){var n=this.media,s=this.mediaSource,o=this.operationQueue,l=this.sourceBuffer[e];if(!n||!s||!l){a.logger.warn("[buffer-controller]: Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),o.shiftAndExecuteNext(e);return}var u=Object(i.isFiniteNumber)(n.duration)?n.duration:1/0,c=Object(i.isFiniteNumber)(s.duration)?s.duration:1/0,d=Math.max(0,t),h=Math.min(r,u,c);h>d?(a.logger.log("[buffer-controller]: Removing ["+d+","+h+"] from the "+e+" SourceBuffer"),console.assert(!l.updating,e+" sourceBuffer must not be updating"),l.remove(d,h)):o.shiftAndExecuteNext(e)},t.appendExecutor=t.blockBuffers=function(e,t){var r=this;if(void 0===t&&(t=this.getSourceBufferTypes()),!t.length){a.logger.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),Promise.resolve(e);return}var i=this.operationQueue;Promise.all(t.map(function(e){return i.appendBlocker(e)})).then(},t.getSourceBufferTypes=t.addBufferListener=t.removeBufferListeners=e}()},"./src/controller/buffer-operation-queue.ts":"./src/controller/cap-level-controller.ts":function(e,t,r){"use strict";r.r(t);var i=r("./src/events.ts");function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){ar t,r,a=e.prototype;return a.setStreamController=function(e){this.streamController=e},a.destroy=a.registerListeners=function(){var e=this.hls;e.on(i.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(i.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},a.unregisterListener=function(){var e=this.hls;e.off(i.Events.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(i.Events.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.off(i.Events.BUFFER_CODECS,this.onBufferCodecs,this),e.off(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this)},a.onFpsDropLevelCapping=a.onMediaAttaching=a.onManifestParsed=a.onBufferCodecs=a.onMediaDetaching=function(){this.stopCapping()},a.detectPlayerSize=a.getMaxLevel=a.startCapping=a.stopCapping=a.getDimensions=e.isLevelAllowed=e.getMaxLevelByMediaSize=t=[{key:"mediaWidth",get:function(){return this.getDimensions().width*e.contentScaleFactor}},{key:"mediaHeight",get:],r=[{key:"contentScaleFactor",get:],t&&n(e.prototype,t),r&&n(e,r),e}();t.default=a},"./src/controller/cmcd-controller.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return h});var i=r("./src/events.ts"),n=r("./src/types/cmcd.ts"),a=r("./src/utils/buffer-helper.ts"),s=r("./src/utils/logger.ts");function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}unction u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0;return throw TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}unction d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}var h=function(){ar t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(i.Events.MEDIA_DETACHED,this.onMediaDetached,this),e.on(i.Events.BUFFER_CREATED,this.onBufferCreated,this)},t.unregisterListeners=t.destroy=t.onMediaAttached=t.onMediaDetached=t.onBufferCreated=t.createData=t.apply=t.getObjectType=t.getTopBandwidth=t.getBufferLength=t.createPlaylistLoader=function(){var e=this.config.pLoader,t=this.applyPlaylistData,r=e||this.config.loader;return function(){function e(e){this.loader=void 0,this.loader=new r(e)}var i=e.prototype;return i.destroy=function(){this.loader.destroy()},i.abort=function(){this.loader.abort()},i.load=function(e,r,i){t(e),this.loader.load(e,r,i)},l(e,[{key:"stats",get:function(){return this.loader.stats}},{key:"context",get:function(){return this.loader.context}}]),e}()},t.createFragmentLoader=e.uuid=e.serialize=function(e){for(var t,r=[],i=function(e){return Math.round(e)},n=a={br:i,d:i,bl:n,dl:n,mtp:n,nor:function(e){return encodeURIComponent(e)},rtp:n,tb:i},s=Object.keys(e||{}).sort(),o=u(s);!(t=o()).done;){var l,c=t.value,d=e[c];if(!Number.isNaN(l=d)&&null!=l&&""!==l&&!1!==l&&!("v"===c&&1===d)&&!("pr"==c&&1===d)){var h=a[c];h&&(d=h(d));var f=typeof d,p=void 0;p="ot"===c||"sf"===c||"st"===c?c+"="+d:"boolean"===f?c:"number"===f?c+"="+d:c+"="+JSON.stringify(d),r.push(p)}}return r.join(",")},e.toHeaders=e.toQuery=e.appendQueryToUri=e}()},"./src/controller/eme-controller.ts":function(e,t,r){"use strict";r.r(t);var i=r("./src/events.ts"),n=r("./src/errors.ts"),a=r("./src/utils/logger.ts"),s=r("./src/utils/mediakeys-helper.ts");function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=u=function(e,t,r,i){if(e===s.KeySystems.WIDEVINE)return l(t,r,i);throw Error("Unknown key-system: "+e)},c=function(){ar t,r=e.prototype;return r.destroy=r._registerListeners=function(){this.hls.on(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(i.Events.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(i.Events.MANIFEST_PARSED,this.onManifestParsed,this)},r._unregisterListeners=r.getLicenseServerUrl=function(e){switch(e){case s.KeySystems.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw Error('no license server URL configured for key-system "'+e+'"')},r._attemptKeySystemAccess=r._onMediaKeySystemAccessObtained=r._onMediaKeysCreated=r._onNewMediaKeySession=r._onKeySessionMessage=r.onMediaEncrypted=function(e){var t=this;if(a.logger.log('Media is encrypted using "'+e.initDataType+'" init data type'),!this.mediaKeysPromise){a.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been requested"),this.hls.trigger(i.Events.ERROR,{type:n.ErrorTypes.KEY_SYSTEM_ERROR,details:n.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});return}var r=this.mediaKeysPromise.then(r).catch(r)},r._attemptSetMediaKeys=function(e){if(!this._media)throw Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var t=this._mediaKeysList[0];if(!t||!t.mediaKeys){a.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),this.hls.trigger(i.Events.ERROR,{type:n.ErrorTypes.KEY_SYSTEM_ERROR,details:n.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});return}a.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(t.mediaKeys),this._hasSetMediaKeys=!0}},r._generateRequestWithPreferredKeySession=function(e,t){var r=this,s=this._mediaKeysList[0];if(!s){a.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),this.hls.trigger(i.Events.ERROR,{type:n.ErrorTypes.KEY_SYSTEM_ERROR,details:n.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}if(s.mediaKeysSessionInitialized){a.logger.warn("Key-Session already initialized but requested again");return}var o=s.mediaKeysSession;if(!o){a.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(i.Events.ERROR,{type:n.ErrorTypes.KEY_SYSTEM_ERROR,details:n.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});return}if(!t){a.logger.warn("Fatal: initData required for generating a key session is null"),this.hls.trigger(i.Events.ERROR,{type:n.ErrorTypes.KEY_SYSTEM_ERROR,details:n.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});return}a.logger.log('Generating key-session request for "'+e+'" init data type'),s.mediaKeysSessionInitialized=!0,o.generateRequest(e,t).then(function(){a.logger.debug("Key-session generation succeeded")}).catch(},r._createLicenseXhr=function(e,t,r){var i=new XMLHttpRequest;i.responseType="arraybuffer",i.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,i,e,t,r);var n=this._licenseXhrSetup;if(n)try{n.call(this.hls,i,e),n=void 0}catch(e){a.logger.error(e)}try{i.readyState||i.open("POST",e,!0),n&&n.call(this.hls,i,e)}catch(e){throw Error("issue setting up KeySystem license XHR "+e)}return i},r._onLicenseRequestReadyStageChange=function(e,t,r,s){if(4===e.readyState){if(200===e.status){this._requestLicenseFailureCount=0,a.logger.log("License request succeeded");var o=e.response,l=this._licenseResponseCallback;if(l)try{o=l.call(this.hls,e,t)}catch(e){a.logger.error(e)}s(o)}else{if(a.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3){this.hls.trigger(i.Events.ERROR,{type:n.ErrorTypes.KEY_SYSTEM_ERROR,details:n.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});return}var u=3-this._requestLicenseFailureCount+1;a.logger.warn("Retrying license request, "+u+" attempts left"),this._requestLicense(r,s)}}},r._generateLicenseRequestChallenge=function(e,t){if(e.mediaKeySystemDomain===s.KeySystems.WIDEVINE)return t;throw Error("unsupported key-system: "+e.mediaKeySystemDomain)},r._requestLicense=function(e,t){a.logger.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r){a.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),this.hls.trigger(i.Events.ERROR,{type:n.ErrorTypes.KEY_SYSTEM_ERROR,details:n.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});return}try{var s=this.getLicenseServerUrl(r.mediaKeySystemDomain),o=this._createLicenseXhr(s,e,t);a.logger.log("Sending license request to URL: "+s);var l=this._generateLicenseRequestChallenge(r,e);o.send(l)}catch(e){a.logger.error("Failure requesting DRM license: "+e),this.hls.trigger(i.Events.ERROR,{type:n.ErrorTypes.KEY_SYSTEM_ERROR,details:n.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},r.onMediaAttached=r.onMediaDetached=r.onManifestParsed=o(e.prototype,[{key:"requestMediaKeySystemAccess",get:]),t&&o(e,t),e}();t.default=c},"./src/controller/fps-controller.ts":function(e,t,r){"use strict";r.r(t);var i=r("./src/events.ts"),n=r("./src/utils/logger.ts"),a=function(){ar t=e.prototype;return t.setStreamController=function(e){this.streamController=e},t.registerListeners=t.unregisterListeners=t.destroy=t.onMediaAttaching=t.checkFPS=t.checkFPSInterval=e}();t.default=a},"./src/controller/fragment-finders.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"findFragmentByPDT",function(){return a}),r.d(t,"findFragmentByPTS",function(){return s}),r.d(t,"fragmentWithinToleranceTest",function(){return o}),r.d(t,"pdtWithinToleranceTest",function(){return l}),r.d(t,"findFragWithCC",function(){return u});var i=r("./src/polyfills/number.ts"),n=r("./src/utils/binary-search.ts");unction s(e,t,r,i){void 0===r&&(r=0),void 0===i&&(i=0);var a=null;return(e?a=t[e.sn-t[0].sn+1]||null:0===r&&0===t[0].start&&(a=t[0]),a&&0===o(r,i,a))?a:n.default.search(t,o.bind(null,r,i))||a}./src/controller/fragment-tracker.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"FragmentState",function(){return n}),r.d(t,"FragmentTracker",function(){return o});var i,n,a=r("./src/events.ts"),s=r("./src/types/loader.ts");(i=n||(n={})).NOT_LOADED="NOT_LOADED",i.BACKTRACKED="BACKTRACKED",i.APPENDING="APPENDING",i.PARTIAL="PARTIAL",i.OK="OK";var o=function(){ar t=e.prototype;return t._registerListeners=function(){var e=this.hls;e.on(a.Events.BUFFER_APPENDED,this.onBufferAppended,this),e.on(a.Events.FRAG_BUFFERED,this.onFragBuffered,this),e.on(a.Events.FRAG_LOADED,this.onFragLoaded,this)},t._unregisterListeners=t.destroy=t.getAppendedFrag=t.getBufferedFrag=t.detectEvictedFragments=function(e,t,r){var i=this;Object.keys(this.fragments).forEach(function(n){var a=i.fragments[n];if(a){if(!a.buffered){a.body.type===r&&i.removeFragment(a.body);return}var s=a.range[e];s&&s.time.some(}})},t.detectPartialFragments=function(e){var t=this,r=this.timeRanges,i=e.frag,n=e.part;if(!(!r||"initSegment"===i.sn)){var a=u(i),s=this.fragments[a];s&&(Object.keys(r).forEach(,s.backtrack=s.loaded=null,Object.keys(s.range).length?s.buffered=!0:this.removeFragment(s.body))}},t.fragBuffered=t.getBufferedTimes=t.getPartialFragment=function(e){var t,r,i,n=null,a=0,s=this.bufferPadding,o=this.fragments;return Object.keys(o).forEach(function(u){var c=o[u];!c||l(c)&&(r=c.body.start-s,i=c.body.end+s,e>=r&&e<=i&&a<=(t=Math.min(e-r,i-e))&&(n=c.body,a=t))}),n},t.getState=t.backtrack=t.getBacktrackData=t.isTimeBuffered=t.onFragLoaded=function(e,t){var r=t.frag,i=t.part;if(!("initSegment"===r.sn||r.bitrateTest||i)){var n=u(r);this.fragments[n]={body:r,loaded:t,backtrack:null,buffered:!1,range:Object.create(null)}}},t.onBufferAppended=function(e,t){var r=this,i=t.frag,n=t.part,a=t.timeRanges;if(i.type===s.PlaylistLevelType.MAIN){if(this.activeFragment=i,n){var o=this.activeParts;o||(this.activeParts=o=[]),o.push(n)}else this.activeParts=null}this.timeRanges=a,Object.keys(a).forEach(},t.onFragBuffered=t.hasFragment=t.removeFragmentsInRange=t.removeFragment=t.removeAllFragments=e}();"./src/controller/gap-controller.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"STALL_MINIMUM_DURATION_MS",function(){return o}),r.d(t,"MAX_START_GAP_JUMP",function(){return l}),r.d(t,"SKIP_BUFFER_HOLE_STEP_SECONDS",function(){return u}),r.d(t,"SKIP_BUFFER_RANGE_START",function(){return c}),r.d(t,"default",function(){return d});var i=r("./src/utils/buffer-helper.ts"),n=r("./src/errors.ts"),a=r("./src/events.ts"),s=r("./src/utils/logger.ts"),o=250,l=2,u=.1,c=.05,d=function(){ar t=e.prototype;return t.destroy=t.poll=function(e){var t=this.config,r=this.media,n=this.stalled,a=r.currentTime,u=r.seeking,c=this.seeking&&!u,d=!this.seeking&&u;if(this.seeking=u,a!==e){if(this.moved=!0,null!==n){if(this.stallReported){var h=self.performance.now()-n;s.logger.warn("playback not stuck anymore @"+a+", after "+Math.round(h)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if((d||c)&&(this.stalled=null),!(r.paused||r.ended||0===r.playbackRate||!i.BufferHelper.getBuffered(r).length)){var f=i.BufferHelper.bufferInfo(r,a,0),p=f.len>0,v=f.nextStart||0;if(!(!p&&!v)){if(u){var g=f.len>l,m=!v||v-a>l&&!this.fragmentTracker.getPartialFragment(a);if(g||m)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var y,_=Math.max(v,f.start||0)-a,T=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,b=(null==T||null===(y=T.details)||void 0===y?void 0:y.live)?2*T.details.targetduration:l;if(_>0&&_<=b){this._trySkipBufferHole(null);return}}var E=self.performance.now();if(null===n){this.stalled=E;return}var S=E-n;!u&&S>=o&&this._reportStall(f.len);var k=i.BufferHelper.bufferInfo(r,a,t.maxBufferHole);this._tryFixBufferStall(k,S)}}},t._tryFixBufferStall=function(e,t){var r=this.config,i=this.fragmentTracker,n=this.media.currentTime,a=i.getPartialFragment(n);!(a&&this._trySkipBufferHole(a))&&e.len>r.maxBufferHole&&t>1e3*r.highBufferWatchdogPeriod&&(s.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=t._trySkipBufferHole=t._tryNudgeBuffer=e}()},"./src/controller/id3-track-controller.ts":"./src/controller/latency-controller.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return o});var i=r("./src/errors.ts"),n=r("./src/events.ts"),a=r("./src/utils/logger.ts");function s(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=function(){ar t,r,o=e.prototype;return o.destroy=o.registerListeners=o.unregisterListeners=o.onMediaAttached=o.onMediaDetaching=o.onManifestLoading=function(){this.levelDetails=null,this._latency=null,this.stallCount=0},o.onLevelUpdated=o.onError=o.timeupdate=function(){var e=this.media,t=this.levelDetails;if(!(!e||!t)){this.currentTime=e.currentTime;var r=this.computeLatency();if(null!==r){this._latency=r;var i=this.config,n=i.lowLatencyMode,a=i.maxLiveSyncPlaybackRate;if(!(!n||1===a)){var s=this.targetLatency;if(null!==s){var o=r-s,l=Math.min(this.maxLatency,s+t.targetduration);if(t.live&&o<l&&o>.05&&this.forwardBufferLength>1){var u=Math.round(2/(1+Math.exp(-.75*o-this.edgeStalled))*20)/20;e.playbackRate=Math.min(Math.min(2,Math.max(1,a)),Math.max(1,u))}else 1!==e.playbackRate&&0!==e.playbackRate&&(e.playbackRate=1)}}}}},o.estimateLiveEdge=o.computeLatency=t=[{key:"latency",get:,{key:"maxLatency",get:,{key:"targetLatency",get:,{key:"liveSyncPosition",get:,{key:"drift",get:,{key:"edgeStalled",get:,{key:"forwardBufferLength",get:],s(e.prototype,t),r&&s(e,r),e}()},"./src/controller/level-controller.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return p});var i=r("./src/types/level.ts"),n=r("./src/events.ts"),a=r("./src/errors.ts"),s=r("./src/utils/codecs.ts"),o=r("./src/controller/level-helper.ts"),l=r("./src/controller/base-playlist-controller.ts"),u=r("./src/types/loader.ts");function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function d(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),p=function(e){.prototype=Object.create(e.prototype),t.prototype.constructor=t,h(t,e);var r,l,p=t.prototype;return p._registerListeners=function(){var e=this.hls;e.on(n.Events.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(n.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(n.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(n.Events.FRAG_LOADED,this.onFragLoaded,this),e.on(n.Events.ERROR,this.onError,this)},p._unregisterListeners=p.destroy=p.startLoad=p.onManifestLoaded=function(e,t){var r,l,u=[],c=[],d=[],h={},p=!1,v=!1,g=!1;if(t.levels.forEach(function(e){var t=e.attrs;p=p||!!(e.width&&e.height),v=v||!!e.videoCodec,g=g||!!e.audioCodec,f&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0);var r=e.bitrate+"-"+e.attrs.RESOLUTION+"-"+e.attrs.CODECS;(l=h[r])?l.url.push(e.url):(l=new i.Level(e),h[r]=l,u.push(l)),t&&(t.AUDIO&&Object(o.addGroupId)(l,"audio",t.AUDIO),t.SUBTITLES&&Object(o.addGroupId)(l,"text",t.SUBTITLES))}),(p||v)&&g&&(u=u.filter(),u=u.filter(,t.audioTracks&&(c=t.audioTracks.filter(,Object(o.assignTrackIdsByGroup)(c)),t.subtitles&&(d=t.subtitles,Object(o.assignTrackIdsByGroup)(d)),u.length>0){r=u[0].bitrate,u.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=u;for(var m=0;m<u.length;m++)if(u[m].bitrate===r){this._firstLevel=m,this.log("manifest loaded, "+u.length+" level(s) found, first bitrate: "+r);break}var y=g&&!v,_={levels:u,audioTracks:c,subtitleTracks:d,firstLevel:this._firstLevel,stats:t.stats,audio:g,video:v,altAudio:!y&&c.some(};this.hls.trigger(n.Events.MANIFEST_PARSED,_),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(n.Events.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,reason:"no level with compatible codecs found in manifest"})},p.onError=function(t,r){if(e.prototype.onError.call(this,t,r),!r.fatal){var i=r.context,n=this._levels[this.currentLevelIndex];if(i&&(i.type===u.PlaylistContextType.AUDIO_TRACK&&n.audioGroupIds&&i.groupId===n.audioGroupIds[n.urlId]||i.type===u.PlaylistContextType.SUBTITLE_TRACK&&n.textGroupIds&&i.groupId===n.textGroupIds[n.urlId])){this.redundantFailover(this.currentLevelIndex);return}var s,o=!1,l=!0;switch(r.details){case a.ErrorDetails.FRAG_LOAD_ERROR:case a.ErrorDetails.FRAG_LOAD_TIMEOUT:case a.ErrorDetails.KEY_LOAD_ERROR:case a.ErrorDetails.KEY_LOAD_TIMEOUT:if(r.frag){var c=this._levels[r.frag.level];c?(c.fragmentError++,c.fragmentError>this.hls.config.fragLoadingMaxRetry&&(s=r.frag.level)):s=r.frag.level}break;case a.ErrorDetails.LEVEL_LOAD_ERROR:case a.ErrorDetails.LEVEL_LOAD_TIMEOUT:i&&(i.deliveryDirectives&&(l=!1),s=i.level),o=!0;break;case a.ErrorDetails.REMUX_ALLOC_ERROR:s=r.level,o=!0}void 0!==s&&this.recoverLevel(r,s,o,l)}},p.recoverLevel=function(e,t,r,i){var n=e.details,a=this._levels[t];if(a.loadError++,r){if(this.retryLoadingOrFail(e))e.levelRetry=!0;else{this.currentLevelIndex=-1;return}}if(i){var s=a.url.length;if(s>1&&a.loadError<s)e.levelRetry=!0,this.redundantFailover(t);else if(-1===this.manualLevelIndex){var o=0===t?this._levels.length-1:t-1;this.currentLevelIndex!==o&&0===this._levels[o].loadError&&(this.warn(n+": switch to "+o),e.levelRetry=!0,this.hls.nextAutoLevel=o)}}},p.redundantFailover=p.onFragLoaded=p.onLevelLoaded=p.onAudioTrackSwitched=p.loadPlaylist=p.removeLevel=r=[{key:"levels",get:,{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t,r=this._levels;if(0!==r.length&&!(this.currentLevelIndex===e&&null!==(t=r[e])&&void 0!==t&&t.details)){if(e<0||e>=r.length){var i=e<0;if(this.hls.trigger(n.Events.ERROR,{type:a.ErrorTypes.OTHER_ERROR,details:a.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:i,reason:"invalid level idx"}),i)return;e=Math.min(e,r.length-1)}this.clearTimer();var s=this.currentLevelIndex,o=r[s],l=r[e];this.log("switching to level "+e+" from "+s),this.currentLevelIndex=e;var u=c({},l,{level:e,maxBitrate:l.maxBitrate,uri:l.uri,urlId:l.urlId});delete u._urlId,this.hls.trigger(n.Events.LEVEL_SWITCHING,u);var d=l.details;if(!d||d.live){var h=this.switchParams(l.uri,null==o?void 0:o.details);this.loadPlaylist(h)}}}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:,{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:set:],d(t.prototype,r),l&&d(t,l),t}(l.default)},"./src/controller/level-helper.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"addGroupId",function(){return a}),r.d(t,"assignTrackIdsByGroup",function(){return s}),r.d(t,"updatePTS",function(){return o}),r.d(t,"updateFragPTSDTS",function(){return u}),r.d(t,"mergeDetails",function(){return c}),r.d(t,"mapPartIntersection",function(){return d}),r.d(t,"mapFragmentIntersection",function(){return h}),r.d(t,"adjustSliding",function(){return f}),r.d(t,"addSliding",function(){return p}),r.d(t,"computeReloadInterval",function(){return v}),r.d(t,"getFragmentWithSN",function(){return g}),r.d(t,"getPartWith",function(){return m});var i=r("./src/polyfills/number.ts"),n=r("./src/utils/logger.ts");tion u(e,t,r,a,s,o){a-r<=0&&(n.logger.warn("Fragment should have a positive duration",t),a=r+t.duration,o=s+t.duration);var u=r,c=a,d=t.startPTS,h=t.endPTS;if(Object(i.isFiniteNumber)(d)){var f=Math.abs(d-r);Object(i.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(f,t.deltaPTS):t.deltaPTS=f,u=Math.max(r,d),r=Math.min(r,d),s=Math.min(s,t.startDTS),c=Math.min(a,h),a=Math.max(a,h),o=Math.max(o,t.endDTS)}t.duration=a-r;var p=r-t.start;t.appendedPTS=a,t.start=t.startPTS=r,t.maxStartPTS=u,t.startDTS=s,t.endPTS=a,t.minEndPTS=c,t.endDTS=o;var v=t.sn;if(!e||v<e.startSN||v>e.endSN)return 0;var g,m=v-e.startSN,y=e.fragments;for(y[m]=t,g=m;g>0;g--)l(y[g],y[g-1]);for(g=m;g<y.length-1;g++)l(y[g],y[g+1]);return e.fragmentHint&&l(y[y.length-1],e.fragmentHint),e.PTSKnown=e.alignedSliding=!0,p}ion v(e,t){var r,i=1e3*e.levelTargetDuration,n=i/2,a=e.age,s=a>0&&a<3*i,o=t.loading.end-t.loading.start,l=e.availabilityDelay;return!1===e.updated?s?(r=Math.max(Math.min(n,2*o),333*e.misses),e.availabilityDelay=(e.availabilityDelay||0)+r):r=n:s?(l=Math.min(l||i/2,a),e.availabilityDelay=l,r=l+i-a):r=i-o,Math.round(r)}"./src/controller/stream-controller.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return y});var i=r("./src/polyfills/number.ts"),n=r("./src/controller/base-stream-controller.ts"),a=r("./src/is-supported.ts"),s=r("./src/events.ts"),o=r("./src/utils/buffer-helper.ts"),l=r("./src/controller/fragment-tracker.ts"),u=r("./src/types/loader.ts"),c=r("./src/loader/fragment.ts"),d=r("./src/demux/transmuxer-interface.ts"),h=r("./src/types/transmuxer.ts"),f=r("./src/controller/gap-controller.ts"),p=r("./src/errors.ts"),v=r("./src/utils/logger.ts");function g(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){.prototype=Object.create(e.prototype),t.prototype.constructor=t,m(t,e);var r,y=t.prototype;return y._registerListeners=y._unregisterListeners=y.onHandlerDestroying=y.startLoad=y.stopLoad=y.doTick=function(){switch(this.state){case n.State.IDLE:this.doTickIdle();break;case n.State.WAITING_LEVEL:var e,t=this.levels,r=this.level,i=null==t||null===(e=t[r])||void 0===e?void 0:e.details;if(i&&(!i.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(i))break;this.state=n.State.IDLE}break;case n.State.FRAG_LOADING_WAITING_RETRY:var a,s=self.performance.now(),o=this.retryDate;(!o||s>=o||null!==(a=this.media)&&void 0!==a&&a.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),this.state=n.State.IDLE)}this.onTickEnd()},y.onTickEnd=y.doTickIdle=function(){var e,t,r=this.hls,i=this.levelLastLoaded,a=this.levels,o=this.media,d=r.config,h=r.nextLoadLevel;if(!(null===i||!o&&(this.startFragRequested||!d.startFragPrefetch))&&!(this.altAudio&&this.audioOnly)&&!(!a||!a[h])){var f=a[h];this.level=r.nextLoadLevel=h;var p=f.details;if(!p||this.state===n.State.WAITING_LEVEL||p.live&&this.levelLastLoaded!==h){this.state=n.State.WAITING_LEVEL;return}var v=this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:o,u.PlaylistLevelType.MAIN);if(null!==v&&!(v.len>=this.getMaxBufferLength(f.maxBitrate))){if(this._streamEnded(v,p)){var g={};this.altAudio&&(g.type="video"),this.hls.trigger(s.Events.BUFFER_EOS,g),this.state=n.State.ENDED;return}var m=v.end,y=this.getNextFragment(m,p);if(this.couldBacktrack&&!this.fragPrevious&&y&&"initSegment"!==y.sn){var _=y.sn-p.startSN;_>1&&(y=p.fragments[_-1],this.fragmentTracker.removeFragment(y))}if(y&&this.fragmentTracker.getState(y)===l.FragmentState.OK&&this.nextLoadPosition>m){var T=this.audioOnly&&!this.altAudio?c.ElementaryStreamTypes.AUDIO:c.ElementaryStreamTypes.VIDEO;this.afterBufferFlushed(o,T,u.PlaylistLevelType.MAIN),y=this.getNextFragment(this.nextLoadPosition,p)}y&&(!y.initSegment||y.initSegment.data||this.bitrateTest||(y=y.initSegment),(null===(e=y.decryptdata)||void 0===e?void 0:e.keyFormat)!=="identity"||null!==(t=y.decryptdata)&&void 0!==t&&t.key?this.loadFragment(y,p,m):this.loadKey(y,p))}}},y.loadFragment=function(t,r,i){var n,a=this.fragmentTracker.getState(t);if(this.fragCurrent=t,a===l.FragmentState.BACKTRACKED){var s=this.fragmentTracker.getBacktrackData(t);if(s){this._handleFragmentLoadProgress(s),this._handleFragmentLoadComplete(s);return}a=l.FragmentState.NOT_LOADED}a===l.FragmentState.NOT_LOADED||a===l.FragmentState.PARTIAL?"initSegment"===t.sn?this._loadInitSegment(t):this.bitrateTest?(t.bitrateTest=!0,this.log("Fragment "+t.sn+" of level "+t.level+" is being downloaded to test bitrate and will not be buffered"),this._loadBitrateTestFrag(t)):(this.startFragRequested=!0,e.prototype.loadFragment.call(this,t,r,i)):a===l.FragmentState.APPENDING?this.reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t):(null===(n=this.media)||void 0===n?void 0:n.buffered.length)===0&&this.fragmentTracker.removeAllFragments()},y.getAppendedFrag=y.getBufferedFrag=y.followingBufferedFrag=y.immediateLevelSwitch=y.nextLevelSwitch=y.abortCurrentFrag=y.flushMainBuffer=y.onMediaAttached=y.onMediaDetaching=y.onMediaPlaying=function(){this.tick()},y.onMediaSeeked=y.onManifestLoading=y.onManifestParsed=y.onLevelLoading=function(e,t){var r=this.levels;if(!(!r||this.state!==n.State.IDLE)){var i=r[t.level];(!i.details||i.details.live&&this.levelLastLoaded!==t.level||this.waitForCdnTuneIn(i.details))&&(this.state=n.State.WAITING_LEVEL)}},y.onLevelLoaded=function(e,t){var r,i=this.levels,a=t.level,o=t.details,l=o.totalduration;if(!i){this.warn("Levels were reset while loading level "+a);return}this.log("Level "+a+" loaded ["+o.startSN+","+o.endSN+"], cc ["+o.startCC+", "+o.endCC+"] duration:"+l);var u=this.fragCurrent;u&&(this.state===n.State.FRAG_LOADING||this.state===n.State.FRAG_LOADING_WAITING_RETRY)&&u.level!==t.level&&u.loader&&(this.state=n.State.IDLE,u.loader.abort());var c=i[a],d=0;if(o.live||null!==(r=c.details)&&void 0!==r&&r.live){if(o.fragments[0]||(o.deltaUpdateFailed=!0),o.deltaUpdateFailed)return;d=this.alignPlaylists(o,c.details)}if(c.details=o,this.levelLastLoaded=a,this.hls.trigger(s.Events.LEVEL_UPDATED,{details:o,level:a}),this.state===n.State.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=n.State.IDLE}this.startFragRequested?o.live&&this.synchronizeToLiveEdge(o):this.setStartPosition(o,d),this.tick()},y._handleFragmentLoadProgress=function(e){var t,r=e.frag,i=e.part,n=e.payload,a=this.levels;if(!a){this.warn("Levels were reset while fragment load was in progress. Fragment "+r.sn+" of level "+r.level+" will not be buffered");return}var s=a[r.level],o=s.details;if(!o){this.warn("Dropping fragment "+r.sn+" of level "+r.level+" after level details were reset");return}var l=s.videoCodec,c=o.PTSKnown||!o.live,f=null===(t=r.initSegment)||void 0===t?void 0:t.data,p=this._getAudioCodec(s),v=this.transmuxer=this.transmuxer||new d.default(this.hls,u.PlaylistLevelType.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),g=i?i.index:-1,m=new h.ChunkMetadata(r.level,r.sn,r.stats.chunkCount,n.byteLength,g,-1!==g),y=this.initPTS[r.cc];v.push(n,f,p,l,r,i,o.totalduration,c,m,y)},y.onAudioTrackSwitching=y.onAudioTrackSwitched=y.onBufferCreated=y.onFragBuffered=function(e,t){var r=t.frag,i=t.part;if(!(r&&r.type!==u.PlaylistLevelType.MAIN)){if(this.fragContextChanged(r)){this.warn("Fragment "+r.sn+(i?" p: "+i.index:"")+" of level "+r.level+" finished buffering, but was aborted. state: "+this.state),this.state===n.State.PARSED&&(this.state=n.State.IDLE);return}var a=i?i.stats:r.stats;this.fragLastKbps=Math.round(8*a.total/(a.buffering.end-a.loading.first)),"initSegment"!==r.sn&&(this.fragPrevious=r),this.fragBufferedComplete(r,i)}},y.onError=function(e,t){switch(t.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:case p.ErrorDetails.KEY_LOAD_ERROR:case p.ErrorDetails.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(u.PlaylistLevelType.MAIN,t);break;case p.ErrorDetails.LEVEL_LOAD_ERROR:case p.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state===n.State.ERROR||(t.fatal?(this.warn(""+t.details),this.state=n.State.ERROR):t.levelRetry||this.state!==n.State.WAITING_LEVEL||(this.state=n.State.IDLE));break;case p.ErrorDetails.BUFFER_FULL_ERROR:if("main"===t.parent&&(this.state===n.State.PARSING||this.state===n.State.PARSED)){var r=!0,i=this.getFwdBufferInfo(this.media,u.PlaylistLevelType.MAIN);i&&i.len>.5&&(r=!this.reduceMaxBufferLength(i.len)),r&&(this.warn("buffer full error also media.currentTime is not buffered, flush main"),this.immediateLevelSwitch()),this.resetLoadingState()}}},y.checkBuffer=function(){var e=this.media,t=this.gapController;if(!(!e||!t||!e.readyState)){var r=o.BufferHelper.getBuffered(e);!this.loadedmetadata&&r.length?(this.loadedmetadata=!0,this.seekToStartPos()):t.poll(this.lastCurrentTime),this.lastCurrentTime=e.currentTime}},y.onFragLoadEmergencyAborted=y.onBufferFlushed=y.onLevelsUpdated=function(e,t){this.levels=t.levels},y.swapAudioCodec=y.seekToStartPos=function(){var e=this.media,t=e.currentTime,r=this.startPosition;if(r>=0&&t<r){if(e.seeking){v.logger.log("could not seek to "+r+", already seeking at "+t);return}var i=o.BufferHelper.getBuffered(e),n=(i.length?i.start(0):0)-r;n>0&&(n<this.config.maxBufferHole||n<this.config.maxFragLookUpTolerance)&&(v.logger.log("adjusting start position by "+n+" to match buffer start"),r+=n,this.startPosition=r),this.log("seek to target start position "+r+" from current time "+t),e.currentTime=r}},y._getAudioCodec=y._loadBitrateTestFrag=function(e){var t=this;this._doFragLoad(e).then(function(r){var i=t.hls;if(!(!r||i.nextLoadLevel||t.fragContextChanged(e))){t.fragLoadError=0,t.state=n.State.IDLE,t.startFragRequested=!1,t.bitrateTest=!1;var a=e.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),i.trigger(s.Events.FRAG_LOADED,r)}})},y._handleTransmuxComplete=function(e){var t,r="main",a=this.hls,o=e.remuxResult,l=e.chunkMeta,u=this.getCurrentContext(l);if(!u){this.warn("The loading context changed while buffering fragment "+l.sn+" of level "+l.level+". This chunk will not be buffered."),this.resetLiveStartWhenNotLoaded(l.level);return}var d=u.frag,h=u.part,f=u.level,p=o.video,v=o.text,g=o.id3,m=o.initSegment,y=this.altAudio?void 0:o.audio;if(!this.fragContextChanged(d)){if(this.state=n.State.PARSING,m){m.tracks&&(this._bufferInitSegment(f,m.tracks,d,l),a.trigger(s.Events.FRAG_PARSING_INIT_SEGMENT,{frag:d,id:r,tracks:m.tracks}));var _=m.initPTS,T=m.timescale;Object(i.isFiniteNumber)(_)&&(this.initPTS[d.cc]=_,a.trigger(s.Events.INIT_PTS_FOUND,{frag:d,id:r,initPTS:_,timescale:T}))}if(p&&!1!==o.independent){if(f.details){var b=p.startPTS,E=p.endPTS,S=p.startDTS,k=p.endDTS;if(h)h.elementaryStreams[p.type]={startPTS:b,endPTS:E,startDTS:S,endDTS:k};else if(p.firstKeyFrame&&p.independent&&(this.couldBacktrack=!0),p.dropped&&p.independent){if(this.getLoadPosition()+this.config.maxBufferHole<b){this.backtrack(d);return}d.setElementaryStreamInfo(p.type,d.start,E,d.start,k,!0)}d.setElementaryStreamInfo(p.type,b,E,S,k),this.bufferFragmentData(p,d,h,l)}}else if(!1===o.independent){this.backtrack(d);return}if(y){var C=y.startPTS,w=y.endPTS,A=y.startDTS,L=y.endDTS;h&&(h.elementaryStreams[c.ElementaryStreamTypes.AUDIO]={startPTS:C,endPTS:w,startDTS:A,endDTS:L}),d.setElementaryStreamInfo(c.ElementaryStreamTypes.AUDIO,C,w,A,L),this.bufferFragmentData(y,d,h,l)}if(null!=g&&null!==(t=g.samples)&&void 0!==t&&t.length){var x={frag:d,id:r,samples:g.samples};a.trigger(s.Events.FRAG_PARSING_METADATA,x)}if(v){var D={frag:d,id:r,samples:v.samples};a.trigger(s.Events.FRAG_PARSING_USERDATA,D)}}},y._bufferInitSegment=y.backtrack=y.checkFragmentChanged=g(t.prototype,[{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"currentLevel",get:,{key:"nextBufferedFrag",get:function(){var e=this.media;if(!e)return null;var t=this.getAppendedFrag(e.currentTime);return this.followingBufferedFrag(t)}},{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),r&&g(t,r),t}(n.default)},"./src/controller/subtitle-stream-controller.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"SubtitleStreamController",function(){return p});var i=r("./src/events.ts"),n=r("./src/utils/buffer-helper.ts"),a=r("./src/controller/fragment-finders.ts"),s=r("./src/utils/discontinuities.ts"),o=r("./src/controller/level-helper.ts"),l=r("./src/controller/fragment-tracker.ts"),u=r("./src/controller/base-stream-controller.ts"),c=r("./src/types/loader.ts"),d=r("./src/types/level.ts");function h(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){.prototype=Object.create(e.prototype),t.prototype.constructor=t,f(t,e);var r,p=t.prototype;return p.onHandlerDestroying=p._registerListeners=function(){var e=this.hls;e.on(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(i.Events.LEVEL_LOADED,this.onLevelLoaded,this),e.on(i.Events.ERROR,this.onError,this),e.on(i.Events.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(i.Events.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(i.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(i.Events.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(i.Events.BUFFER_FLUSHING,this.onBufferFlushing,this)},p._unregisterListeners=p.startLoad=p.onManifestLoading=p.onLevelLoaded=function(e,t){this.mainDetails=t.details},p.onSubtitleFragProcessed=p.onBufferFlushing=p.onError=p.onSubtitleTracksUpdated=p.onSubtitleTrackSwitch=p.onSubtitleTrackLoaded=function(e,t){var r,i=t.details,n=t.id,l=this.currentTrackId,c=this.levels;if(c.length){var d=c[l];if(!(n>=c.length||n!==l||!d)){if(this.mediaBuffer=this.mediaBufferTimeRanges,i.live||null!==(r=d.details)&&void 0!==r&&r.live){var h=this.mainDetails;if(i.deltaUpdateFailed||!h)return;var f=h.fragments[0];d.details?0===this.alignPlaylists(i,d.details)&&f&&Object(o.addSliding)(i,f.start):i.hasProgramDateTime&&h.hasProgramDateTime?Object(s.alignMediaPlaylistByPDT)(i,h):f&&Object(o.addSliding)(i,f.start)}d.details=i,this.levelLastLoaded=n,this.tick(),i.live&&!this.fragCurrent&&this.media&&this.state===u.State.IDLE&&(Object(a.findFragmentByPTS)(null,i.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),d.details=void 0))}}},p._handleFragmentLoadComplete=p.doTick=function(){if(!this.media){this.state=u.State.IDLE;return}if(this.state===u.State.IDLE){var e,t=this.currentTrackId,r=this.levels;if(!r.length||!r[t]||!r[t].details)return;var i=r[t].details,s=i.targetduration,o=this.config,c=this.media,d=n.BufferHelper.bufferedInfo(this.mediaBufferTimeRanges,c.currentTime-s,o.maxBufferHole),h=d.end;if(d.len>this.getMaxBufferLength()+s)return;console.assert(i,"Subtitle track details are defined on idle subtitle stream controller tick");var f,p=i.fragments,v=p.length,g=i.edge,m=this.fragPrevious;if(h<g){var y=o.maxFragLookUpTolerance;(f=Object(a.findFragmentByPTS)(m,p,h,y))||!m||!(m.start<p[0].start)||(f=p[0])}else f=p[v-1];null!==(e=f)&&void 0!==e&&e.encrypted?this.loadKey(f,i):f&&this.fragmentTracker.getState(f)===l.FragmentState.NOT_LOADED&&this.loadFragment(f,i,h)}},p.loadFragment=h(t.prototype,[{key:"mediaBufferTimeRanges",get:]),r&&h(t,r),t}(u.default)},"./src/controller/subtitle-track-controller.ts":function(e,t,r){"use strict";r.r(t);var i=r("./src/events.ts"),n=r("./src/utils/texttrack-utils.ts"),a=r("./src/controller/base-playlist-controller.ts"),s=r("./src/types/loader.ts");function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=function(e){.prototype=Object.create(e.prototype),t.prototype.constructor=t,l(t,e);var r,a=t.prototype;return a.destroy=a.registerListeners=function(){var e=this.hls;e.on(i.Events.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(i.Events.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(i.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(i.Events.MANIFEST_PARSED,this.onManifestParsed,this),e.on(i.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(i.Events.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(i.Events.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(i.Events.ERROR,this.onError,this)},a.unregisterListeners=a.onMediaAttached=a.pollTrackChange=a.onMediaDetaching=a.onManifestLoading=a.onManifestParsed=a.onSubtitleTrackLoaded=a.onLevelLoading=function(e,t){this.switchLevel(t.level)},a.onLevelSwitching=a.switchLevel=a.findTrackId=a.onError=a.loadPlaylist=a.toggleTrackModes=a.setSubtitleTrack=function(e,t){var r,n=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(this.trackId!==e&&this.toggleTrackModes(e),!(this.trackId===e&&(-1===e||null!==(r=n[e])&&void 0!==r&&r.details)||e<-1||e>=n.length)){this.clearTimer();var a=n[e];if(this.log("Switching to subtitle track "+e),this.trackId=e,a){var s=a.id,o=a.groupId,l=a.name,u=a.type,c=a.url;this.hls.trigger(i.Events.SUBTITLE_TRACK_SWITCH,{id:s,groupId:void 0===o?"":o,name:l,type:u,url:c});var d=this.switchParams(a.url,null==t?void 0:t.details);this.loadPlaylist(d)}else this.hls.trigger(i.Events.SUBTITLE_TRACK_SWITCH,{id:e})}},a.onTextTracksChanged=function(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!(!this.media||!this.hls.config.renderTextTracksNatively)){for(var e=-1,t=c(this.media.textTracks),r=0;r<t.length;r++)if("hidden"===t[r].mode)e=r;else if("showing"===t[r].mode){e=r;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}},o(t.prototype,[{key:"subtitleTracks",get:function(){return this.tracksInGroup}},{key:"subtitleTrack",get:function(){return this.trackId},set:]),r&&o(t,r),t}(a.default);.default=u},"./src/controller/timeline-controller.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"TimelineController",function(){return h});var i=r("./src/polyfills/number.ts"),n=r("./src/events.ts"),a=r("./src/utils/cea-608-parser.ts"),s=r("./src/utils/output-filter.ts"),o=r("./src/utils/webvtt-parser.ts"),l=r("./src/utils/texttrack-utils.ts"),u=r("./src/utils/imsc1-ttml-parser.ts"),c=r("./src/types/loader.ts"),d=r("./src/utils/logger.ts"),h=function(){ar t=e.prototype;return t.destroy=t.addCues=t.onInitPtsFound=t.getExistingTrack=t.createCaptionsTrack=t.createNativeTrack=t.createNonNativeTrack=t.createTextTrack=t.onMediaAttaching=t.onMediaDetaching=t.onManifestLoading=t._cleanTracks=t.onSubtitleTracksUpdated=function(e,t){var r=this;this.textTracks=[];var i=t.subtitleTracks||[],a=i.some(;if(this.config.enableWebVTT||a&&this.config.enableIMSC1){var s=this.tracks&&i&&this.tracks.length===i.length;if(this.tracks=i||[],this.config.renderTextTracksNatively){var o=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,t){var i;if(t<o.length){for(var n,a=null,s=0;s<o.length;s++)if((n=o[s])&&n.label===e.name&&!(n.textTrack1||n.textTrack2)){a=o[s];break}a&&(i=a)}i?Object(l.clearCurrentCues)(i):(i=r.createTextTrack("subtitles",e.name,e.lang))&&(i.mode="disabled"),i&&(i.groupId=e.groupId,r.textTracks.push(i))})}else if(!s&&this.tracks&&this.tracks.length){var c=this.tracks.map(;this.hls.trigger(n.Events.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:c})}}},t.onManifestLoaded=t.onFragLoading=function(e,t){var r=this.cea608Parser1,i=this.cea608Parser2,n=this.lastSn,a=this.lastPartIndex;if(!(!this.enabled||!(r&&i))&&t.frag.type===c.PlaylistLevelType.MAIN){var s,o,l=t.frag.sn,u=null!=(s=null==t||null===(o=t.part)||void 0===o?void 0:o.index)?s:-1;l===n+1||l===n&&u===a+1||(r.reset(),i.reset()),this.lastSn=l,this.lastPartIndex=u}},t.onFragLoaded=function(e,t){var r=t.frag,a=t.payload,s=this.initPTS,o=this.unparsedVttFrags;if(r.type===c.PlaylistLevelType.SUBTITLE){if(a.byteLength){if(!Object(i.isFiniteNumber)(s[r.cc])){o.push(t),s.length&&this.hls.trigger(n.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:Error("Missing initial subtitle PTS")});return}var l=r.decryptdata,d="stats"in t;if(null==l||null==l.key||"AES-128"!==l.method||d){var h=this.tracks[r.level],f=this.vttCCs;f[r.cc]||(f[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),h&&h.textCodec===u.IMSC1_CODEC?this._parseIMSC1(r,a):this._parseVTTs(r,a,f)}}else this.hls.trigger(n.Events.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:Error("Empty subtitle payload")})}},t._parseIMSC1=t._parseVTTs=t._fallbackToIMSC1=t._appendCues=t.onFragDecrypted=t.onSubtitleTracksCleared=t.onFragParsingUserdata=function(e,t){var r=this.cea608Parser1,i=this.cea608Parser2;if(!(!this.enabled||!(r&&i)))for(var n=0;n<t.samples.length;n++){var a=t.samples[n].bytes;if(a){var s=this.extractCea608Data(a);r.addData(t.samples[n].pts,s[0]),i.addData(t.samples[n].pts,s[1])}}},t.onBufferFlushing=function(e,t){var r=t.startOffset,i=t.endOffset,n=t.endOffsetSubtitles,a=t.type,s=this.media;if(!(!s||s.currentTime<i)){if(!a||"video"===a){var o=this.captionsTracks;Object.keys(o).forEach(function(e){return Object(l.removeCuesInRange)(o[e],r,i)})}if(this.config.renderTextTracksNatively&&0===r&&void 0!==n){var u=this.textTracks;Object.keys(u).forEach(}}},t.extractCea608Data=function(e){for(var t=31&e[0],r=2,i=[[],[]],n=0;n<t;n++){var a=e[r++],s=127&e[r++],o=127&e[r++],l=(4&a)!=0,u=3&a;0===s&&0===o||l&&(0===u||1===u)&&(i[u].push(s),i[u].push(o))}return i},e}();,"./src/crypt/aes-crypto.ts":"./src/crypt/aes-decryptor.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"removePadding",function(){return n}),r.d(t,"default",function(){return a});var i=r("./src/utils/typed-array.ts");ar a=function(){ar t=e.prototype;return t.uint8ArrayToUint32Array_=t.initTable=t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,i=0;i<t.length&&r;)r=t[i]===this.key[i],i++;if(!r){this.key=t;var n=this.keySize=t.length;if(4!==n&&6!==n&&8!==n)throw Error("Invalid aes key size="+n);var a,s,o,l,u=this.ksRows=(n+6+1)*4,c=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),h=this.sBox,f=this.rcon,p=this.invSubMix,v=p[0],g=p[1],m=p[2],y=p[3];for(a=0;a<u;a++){if(a<n){o=c[a]=t[a];continue}l=o,a%n==0?l=(h[(l=l<<8|l>>>24)>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l])^f[a/n|0]<<24:n>6&&a%n==4&&(l=h[l>>>24]<<24|h[l>>>16&255]<<16|h[l>>>8&255]<<8|h[255&l]),c[a]=o=(c[a-n]^l)>>>0}for(s=0;s<u;s++)a=u-s,l=3&s?c[a]:c[a-4],s<4||a<=4?d[s]=l:d[s]=v[h[l>>>24]]^g[h[l>>>16&255]]^m[h[l>>>8&255]]^y[h[255&l]],d[s]=d[s]>>>0}},t.networkToHostOrderSwap=t.decrypt=e}()},"./src/crypt/decrypter.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return u});var i=r("./src/crypt/aes-crypto.ts"),n=r("./src/crypt/fast-aes-key.ts"),a=r("./src/crypt/aes-decryptor.ts"),s=r("./src/utils/logger.ts"),o=r("./src/utils/mp4-tools.ts"),l=r("./src/utils/typed-array.ts"),u=function(){ar t=e.prototype;return t.destroy=t.isSync=function(){return this.config.enableSoftwareAES},t.flush=function(){var e=this.currentResult;if(!e){this.reset();return}var t=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?Object(a.removePadding)(t):t},t.reset=t.decrypt=t.softwareDecrypt=function(e,t,r){var i=this.currentIV,n=this.currentResult,s=this.remainderData;this.logOnce("JS AES decrypt"),s&&(e=Object(o.appendUint8Array)(s,e),this.remainderData=null);var u=this.getValidChunk(e);if(!u.length)return null;i&&(r=i);var c=this.softwareDecrypter;return c||(c=this.softwareDecrypter=new a.default),c.expandKey(t),this.currentResult=c.decrypt(u.buffer,0,r),this.currentIV=Object(l.sliceUint8)(u,-16).buffer,n||null},t.webCryptoDecrypt=function(e,t,r){var a=this,s=this.subtle;return this.key===t&&this.fastAesKey||(this.key=t,this.fastAesKey=new n.default(s,t)),this.fastAesKey.expandKey().then(function(t){return s?new i.default(s,r).decrypt(e.buffer,t):Promise.reject(Error("web crypto not initialized"))}).catch(},t.onWebCryptoError=t.getValidChunk=t.logOnce=e}()},"./src/crypt/fast-aes-key.ts":"./src/demux/aacdemuxer.ts":function(e,t,r){"use strict";r.r(t);var i=r("./src/demux/base-audio-demuxer.ts"),n=r("./src/demux/adts.ts"),a=r("./src/utils/logger.ts"),s=r("./src/demux/id3.ts");function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e);var r=t.prototype;return r.resetInitSegment=function(t,r,i){e.prototype.resetInitSegment.call(this,t,r,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}},t.probe=function(e){if(!e)return!1;for(var t=s.getID3Data(e,0)||[],r=t.length,i=e.length;r<i;r++)if(n.probe(e,r))return a.logger.log("ADTS sync word found !"),!0;return!1},r.canParse=function(e,t){return n.canParse(e,t)},r.appendFrame=t}(i.default);l.minProbeByteLength=9,t.default=l},"./src/demux/adts.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"getAudioConfig",function(){return s}),r.d(t,"isHeaderPattern",function(){return o}),r.d(t,"getHeaderLength",function(){return l}),r.d(t,"getFullFrameLength",function(){return u}),r.d(t,"canGetFrameLength",function(){return c}),r.d(t,"isHeader",function(){return d}),r.d(t,"canParse",function(){return h}),r.d(t,"probe",function(){return f}),r.d(t,"initTrackConfig",function(){return p}),r.d(t,"getFrameDuration",function(){return v}),r.d(t,"parseFrameHeader",function(){return g}),r.d(t,"appendFrame",function(){return m});var i=r("./src/utils/logger.ts"),n=r("./src/errors.ts"),a=r("./src/events.ts");ion d(e,t){return t+1<e.length&&o(e,t)}rc/demux/base-audio-demuxer.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"initPTSFn",function(){return u});var i=r("./src/polyfills/number.ts"),n=r("./src/demux/id3.ts"),a=r("./src/demux/dummy-demuxed-track.ts"),s=r("./src/utils/mp4-tools.ts"),o=r("./src/utils/typed-array.ts"),l=function(){ar t=e.prototype;return t.resetInitSegment=t.resetTimeStamp=function(){},t.resetContiguity=function(){},t.canParse=t.appendFrame=t.demux=function(e,t){this.cachedData&&(e=Object(s.appendUint8Array)(this.cachedData,e),this.cachedData=null);var r,i,l=n.getID3Data(e,0),c=l?l.length:0,d=this._audioTrack,h=this._id3Track,f=l?n.getTimeStamp(l):void 0,p=e.length;for((0===this.frameIndex||null===this.initPTS)&&(this.initPTS=u(f,t)),l&&l.length>0&&h.samples.push({pts:this.initPTS,dts:this.initPTS,data:l}),i=this.initPTS;c<p;){if(this.canParse(e,c)){var v=this.appendFrame(d,e,c);v?(this.frameIndex++,i=v.sample.pts,c+=v.length,r=c):c=p}else n.canParse(e,c)?(l=n.getID3Data(e,c),h.samples.push({pts:i,dts:i,data:l}),c+=l.length,r=c):c++;if(c===p&&r!==p){var g=Object(o.sliceUint8)(e,r);this.cachedData?this.cachedData=Object(s.appendUint8Array)(this.cachedData,g):this.cachedData=g}}return{audioTrack:d,avcTrack:Object(a.dummyTrack)(),id3Track:h,textTrack:Object(a.dummyTrack)()}},t.demuxSampleAes=t.flush=t.destroy=function(){},e}(),u=t.default=l},"./src/demux/chunk-cache.ts":"./src/demux/dummy-demuxed-track.ts":"./src/demux/exp-golomb.ts":function(e,t,r){"use strict";r.r(t);var i=r("./src/utils/logger.ts"),n=function(){ar t=e.prototype;return t.loadWord=t.skipBits=function(e){var t;this.bitsAvailable>e||(e-=this.bitsAvailable,t=e>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord()),this.word<<=e,this.bitsAvailable-=e},t.readBits=t.skipLZ=t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=t.readUEG=t.readEG=t.readBoolean=t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=t.readSPS=function(){var e,t,r,i=0,n=0,a=0,s=0,o=this.readUByte.bind(this),l=this.readBits.bind(this),u=this.readUEG.bind(this),c=this.readBoolean.bind(this),d=this.skipBits.bind(this),h=this.skipEG.bind(this),f=this.skipUEG.bind(this),p=this.skipScalingList.bind(this);o();var v=o();if(l(5),d(3),o(),f(),100===v||110===v||122===v||244===v||44===v||83===v||86===v||118===v||128===v){var g=u();if(3===g&&d(1),f(),f(),d(1),c())for(t=3!==g?8:12,r=0;r<t;r++)c()&&p(r<6?16:64)}f();var m=u();if(0===m)u();else if(1===m)for(d(1),h(),h(),e=u(),r=0;r<e;r++)h();f(),d(1);var y=u(),_=u(),T=l(1);0===T&&d(1),d(1),c()&&(i=u(),n=u(),a=u(),s=u());var b=[1,1];if(c()&&c())switch(o()){case 1:b=[1,1];break;case 2:b=[12,11];break;case 3:b=[10,11];break;case 4:b=[16,11];break;case 5:b=[40,33];break;case 6:b=[24,11];break;case 7:b=[20,11];break;case 8:b=[32,11];break;case 9:b=[80,33];break;case 10:b=[18,11];break;case 11:b=[15,11];break;case 12:b=[64,33];break;case 13:b=[160,99];break;case 14:b=[4,3];break;case 15:b=[3,2];break;case 16:b=[2,1];break;case 255:b=[o()<<8|o(),o()<<8|o()]}return{width:Math.ceil((y+1)*16-2*i-2*n),height:(2-T)*(_+1)*16-(T?2:4)*(a+s),pixelRatio:b}},t.readSliceType=e}();t.default=n},"./src/demux/id3.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"isHeader",function(){return n}),r.d(t,"isFooter",function(){return a}),r.d(t,"getID3Data",function(){return s}),r.d(t,"canParse",function(){return l}),r.d(t,"getTimeStamp",function(){return u}),r.d(t,"isTimeStampFrame",function(){return c}),r.d(t,"getID3Frames",function(){return h}),r.d(t,"decodeFrame",function(){return f}),r.d(t,"utf8ArrayToStr",function(){return y}),r.d(t,"testables",function(){return _});var i,n=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},a=s=o=l=u=c=d=h=f=p=v=g=m=y=function(e,t){void 0===t&&(t=!1);var r=(i||void 0===self.TextDecoder||(i=new self.TextDecoder("utf-8")),i);if(r){var n=r.decode(e);if(t){var a=n.indexOf("\x00");return -1!==a?n.substring(0,a):n}return n.replace(/\0/g,"")}for(var s,o,l=e.length,u="",c=0;c<l&&(0!==(s=e[c++])||!t);)if(0!==s&&3!==s)switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:u+=String.fromCharCode(s);break;case 12:case 13:u+=String.fromCharCode((31&s)<<6|63&e[c++]);break;case 14:u+=String.fromCharCode((15&s)<<12|(63&e[c++])<<6|(63&e[c++])<<0)}return u},_={decodeTextFrame:v}},"./src/demux/mp3demuxer.ts":function(e,t,r){"use strict";r.r(t);var i=r("./src/demux/base-audio-demuxer.ts"),n=r("./src/demux/id3.ts"),a=r("./src/utils/logger.ts"),s=r("./src/demux/mpegaudio.ts");function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=function(e){function t(){return e.apply(this,arguments)||this}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e);var r=t.prototype;return r.resetInitSegment=t.probe=function(e){if(!e)return!1;for(var t=n.getID3Data(e,0)||[],r=t.length,i=e.length;r<i;r++)if(s.probe(e,r))return a.logger.log("MPEG Audio sync word found !"),!0;return!1},r.canParse=function(e,t){return s.canParse(e,t)},r.appendFrame=t}(i.default);l.minProbeByteLength=4,t.default=l},"./src/demux/mp4demuxer.ts":function(e,t,r){"use strict";r.r(t);var i=r("./src/utils/mp4-tools.ts"),n=r("./src/demux/dummy-demuxed-track.ts"),a=function(){ar t=e.prototype;return t.resetTimeStamp=function(){},t.resetInitSegment=function(){},t.resetContiguity=function(){},e.probe=t.demux=t.flush=t.demuxSampleAes=t.destroy=function(){},e}();a.minProbeByteLength=1024,t.default=a},"./src/demux/mpegaudio.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"appendFrame",function(){return l}),r.d(t,"parseHeader",function(){return u}),r.d(t,"isHeaderPattern",function(){return c}),r.d(t,"isHeader",function(){return d}),r.d(t,"canParse",function(){return h}),r.d(t,"probe",function(){return f});var i=null,n=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],a=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],s=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],o=[0,1,1,4];function l(e,t,r,i,n){if(!(r+24>t.length)){var a=u(t,r);if(a&&r+a.frameLength<=t.length){var s=i+9e4*a.samplesPerFrame/a.sampleRate*n,o={unit:t.subarray(r,r+a.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=a.channelCount,e.samplerate=a.sampleRate,e.samples.push(o),{sample:o,length:a.frameLength,missing:0}}}}src/demux/sample-aes.ts":function(e,t,r){"use strict";r.r(t);var i=r("./src/crypt/decrypter.ts"),n=r("./src/demux/tsdemuxer.ts"),a=function(){ar t=e.prototype;return t.decryptBuffer=t.decryptAacSample=t.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length){r();return}if(!(e[t].unit.length<32)){var i=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,i),!i)return}}},t.getAvcEncryptedData=t.getAvcDecryptedUnit=t.decryptAvcSample=t.decryptAvcSamples=function(e,t,r,i){if(e instanceof Uint8Array)throw Error("Cannot decrypt samples of type Uint8Array");for(;;t++,r=0){if(t>=e.length){i();return}for(var n=e[t].units;!(r>=n.length);r++){var a=n[r];if(!(a.data.length<=48||1!==a.type&&5!==a.type)){var s=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,i,a,s),!s)return}}}},e}();t.default=a},"./src/demux/transmuxer-interface.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return d});var i=r("./node_modules/webworkify-webpack/index.js"),n=(r.n(i),r("./src/events.ts")),a=r("./src/demux/transmuxer.ts"),s=r("./src/utils/logger.ts"),o=r("./src/errors.ts"),l=r("./src/utils/mediasource-helper.ts"),u=r("./node_modules/eventemitter3/index.js"),c=(r.n(u),Object(l.getMediaSource)()||{isTypeSupported:),d=function(){function e(e,t,r,l){var d,h=this;this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.worker=void 0,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.hls=e,this.id=t,this.onTransmuxComplete=r,this.onFlush=l;var f=e.config,p=this.observer=new u.EventEmitter,this.observer.on(n.Events.FRAG_DECRYPTED,p),this.observer.on(n.Events.ERROR,p);var v={mp4:c.isTypeSupported("video/mp4"),mpeg:c.isTypeSupported("audio/mpeg"),mp3:c.isTypeSupported('audio/mp4; codecs="mp3"')},g=navigator.vendor;if(f.enableWorker&&"undefined"!=typeof Worker){s.logger.log("demuxing in webworker");try{d=this.worker=i("./src/demux/transmuxer-worker.ts"),this.onwmsg=this.onWorkerMessage.bind(this),d.addEventListener("message",this.onwmsg),d.onerror=d.postMessage({cmd:"init",typeSupported:v,vendor:g,id:t,config:JSON.stringify(f)})}catch(e){s.logger.warn("Error in worker:",e),s.logger.error("Error while initializing DemuxerWorker, fallback to inline"),d&&self.URL.revokeObjectURL(d.objectURL),this.transmuxer=new a.default(this.observer,v,f,g,t),this.worker=null}}else this.transmuxer=new a.default(this.observer,v,f,g,t)}var t=e.prototype;return t.destroy=t.push=function(e,t,r,i,n,o,l,u,c,d){var h,f,p=this;c.transmuxing.start=self.performance.now();var v=this.transmuxer,g=this.worker,m=o?o.start:n.start,y=n.decryptdata,_=this.frag,T=!(_&&n.cc===_.cc),b=!(_&&c.level===_.level),E=_?c.sn-_.sn:-1,S=this.part?c.part-this.part.index:1,k=!b&&(1===E||0===E&&1===S),C=self.performance.now();(b||E||0===n.stats.parsing.start)&&(n.stats.parsing.start=C),o&&(S||!k)&&(o.stats.parsing.start=C);var w=!(_&&(null===(h=n.initSegment)||void 0===h?void 0:h.url)===(null===(f=_.initSegment)||void 0===f?void 0:f.url)),A=new a.TransmuxState(T,k,u,b,m,w);if(!k||T||w){s.logger.log("[transmuxer-interface, "+n.type+"]: Starting new transmux session for sn: "+c.sn+" p: "+c.part+" level: "+c.level+" id: "+c.id+`
        discontinuity: `+T+`
        trackSwitch: `+b+`
        contiguous: `+k+`
        accurateTimeOffset: `+u+`
        timeOffset: `+m+`
        initSegmentChange: `+w);var L=new a.TransmuxConfig(r,i,t,l,d);this.configureTransmuxer(L)}if(this.frag=n,this.part=o,g)g.postMessage({cmd:"demux",data:e,decryptdata:y,chunkMeta:c,state:A},e instanceof ArrayBuffer?[e]:[]);else if(v){var x=v.push(e,y,c,A);Object(a.isPromise)(x)?x.then(function(e){p.handleTransmuxComplete(e)}):this.handleTransmuxComplete(x)}},t.flush=t.handleFlushResult=t.onWorkerMessage=t.configureTransmuxer=t.handleTransmuxComplete=e}()},"./src/demux/transmuxer-worker.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return o});var i=r("./src/demux/transmuxer.ts"),n=r("./src/events.ts"),a=r("./src/utils/logger.ts"),s=r("./node_modules/eventemitter3/index.js");unction l(e,t){var r;if(!(!(r=t.remuxResult).audio&&!r.video&&!r.text&&!r.id3&&!r.initSegment)){var i=[],n=t.remuxResult,a=n.audio,s=n.video;a&&u(i,a),s&&u(i,s),e.postMessage({event:"transmuxComplete",data:t},i)}}n(s)},"./src/demux/transmuxer.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return y}),r.d(t,"isPromise",function(){return T}),r.d(t,"TransmuxConfig",function(){return b}),r.d(t,"TransmuxState",function(){return E});var i,n=r("./src/events.ts"),a=r("./src/errors.ts"),s=r("./src/crypt/decrypter.ts"),o=r("./src/demux/aacdemuxer.ts"),l=r("./src/demux/mp4demuxer.ts"),u=r("./src/demux/tsdemuxer.ts"),c=r("./src/demux/mp3demuxer.ts"),d=r("./src/remux/mp4-remuxer.ts"),h=r("./src/remux/passthrough-remuxer.ts"),f=r("./src/demux/chunk-cache.ts"),p=r("./src/utils/mp4-tools.ts"),v=r("./src/utils/logger.ts");try{i=self.performance.now.bind(self.performance)}catch(e){v.logger.debug("Unable to use Performance API on this environment"),i=self.Date.now}var g=[{demux:u.default,remux:d.default},{demux:l.default,remux:h.default},{demux:o.default,remux:d.default},{demux:c.default,remux:d.default}],m=1024;g.forEach(;var y=function(){ar t=e.prototype;return t.configure=t.push=function(e,t,r,n){var a,s=this,o=r.transmuxing;o.executeStart=i();var l=new Uint8Array(e),u=this.cache,c=this.config,d=this.currentTransmuxState,h=this.transmuxConfig;n&&(this.currentTransmuxState=n);var f=(a=null,l.byteLength>0&&null!=t&&null!=t.key&&null!==t.iv&&null!=t.method&&(a=t),a);if(f&&"AES-128"===f.method){var v=this.getDecrypter();if(!c.enableSoftwareAES)return this.decryptionPromise=v.webCryptoDecrypt(l,f.key.buffer,f.iv.buffer).then(,this.decryptionPromise;var g=v.softwareDecrypt(l,f.key.buffer,f.iv.buffer);if(!g)return o.executeEnd=i(),_(r);l=new Uint8Array(g)}var m=n||d,y=m.contiguous,T=m.discontinuity,b=m.trackSwitch,E=m.accurateTimeOffset,S=m.timeOffset,k=m.initSegmentChange,C=h.audioCodec,w=h.videoCodec,A=h.defaultInitPts,L=h.duration,x=h.initSegmentData;if((T||b||k)&&this.resetInitSegment(x,C,w,L),(T||k)&&this.resetInitialTimestamp(A),y||this.resetContiguity(),this.needsProbing(l,T,b)){if(u.dataLength){var D=u.flush();l=Object(p.appendUint8Array)(D,l)}this.configureTransmuxer(l,h)}var R=this.transmux(l,f,S,E,r),I=this.currentTransmuxState;return I.contiguous=!0,I.discontinuity=!1,I.trackSwitch=!1,o.executeEnd=i(),R},t.flush=t.flushRemux=t.resetInitialTimestamp=t.resetContiguity=t.resetInitSegment=t.destroy=t.transmux=t.transmuxUnencrypted=t.transmuxSampleAes=t.configureTransmuxer=t.needsProbing=t.getDecrypter=e}(),_=ar b=E=,"./src/demux/tsdemuxer.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"discardEPB",function(){return y});var i=r("./src/demux/adts.ts"),n=r("./src/demux/mpegaudio.ts"),a=r("./src/demux/exp-golomb.ts"),s=r("./src/demux/id3.ts"),o=r("./src/demux/sample-aes.ts"),l=r("./src/events.ts"),u=r("./src/utils/mp4-tools.ts"),c=r("./src/utils/logger.ts"),d=r("./src/errors.ts"),h={video:1,audio:2,id3:3,text:4},f=function(){.probe=e.syncOffset=e.createTrack=var t=e.prototype;return t.resetInitSegment=t.resetTimeStamp=function(){},t.resetContiguity=t.demux=function(t,r,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1),i||(this.sampleAes=null);var a,s=this._avcTrack,o=this._audioTrack,h=this._id3Track,f=s.pid,p=s.pesData,g=o.pid,m=h.pid,y=o.pesData,_=h.pesData,T=!1,b=this.pmtParsed,E=this._pmtId,S=t.length;if(this.remainderData&&(S=(t=Object(u.appendUint8Array)(this.remainderData,t)).length,this.remainderData=null),S<188&&!n)return this.remainderData=t,{audioTrack:o,avcTrack:s,id3Track:h,textTrack:this._txtTrack};var k=Math.max(0,e.syncOffset(t));(S-=(S+k)%188)<t.byteLength&&!n&&(this.remainderData=new Uint8Array(t.buffer,S,t.buffer.byteLength-S));for(var C=0,w=k;w<S;w+=188)if(71===t[w]){var A,L,x=!!(64&t[w+1]),D=((31&t[w+1])<<8)+t[w+2],R=(48&t[w+3])>>4,I=void 0;if(R>1){if((I=w+5+t[w+4])===w+188)continue}else I=w+4;switch(D){case f:x&&(p&&(a=v(p))&&this.parseAVCPES(a,!1),p={data:[],size:0}),p&&(p.data.push(t.subarray(I,w+188)),p.size+=w+188-I);break;case g:x&&(y&&(a=v(y))&&(o.isAAC?this.parseAACPES(a):this.parseMPEGPES(a)),y={data:[],size:0}),y&&(y.data.push(t.subarray(I,w+188)),y.size+=w+188-I);break;case m:x&&(_&&(a=v(_))&&this.parseID3PES(a),_={data:[],size:0}),_&&(_.data.push(t.subarray(I,w+188)),_.size+=w+188-I);break;case 0:x&&(I+=t[I]+1),E=this._pmtId=(31&(A=t)[(L=I)+10])<<8|A[L+11];break;case E:x&&(I+=t[I]+1);var O=function(e,t,r,i){var n={audio:-1,avc:-1,id3:-1,isAAC:!0},a=(15&e[t+1])<<8|e[t+2],s=t+3+a-4,o=(15&e[t+10])<<8|e[t+11];for(t+=12+o;t<s;){var l=(31&e[t+1])<<8|e[t+2];switch(e[t]){case 207:if(!i){c.logger.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===n.audio&&(n.audio=l);break;case 21:-1===n.id3&&(n.id3=l);break;case 219:if(!i){c.logger.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===n.avc&&(n.avc=l);break;case 3:case 4:r?-1===n.audio&&(n.audio=l,n.isAAC=!1):c.logger.log("MPEG audio found, not supported in this browser");break;case 36:c.logger.warn("Unsupported HEVC stream type found")}t+=((15&e[t+3])<<8|e[t+4])+5}return n}(t,I,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,i);(f=O.avc)>0&&(s.pid=f),(g=O.audio)>0&&(o.pid=g,o.isAAC=O.isAAC),(m=O.id3)>0&&(h.pid=m),T&&!b&&(c.logger.log("reparse from beginning"),T=!1,w=k-188),b=this.pmtParsed=!0;break;case 17:case 8191:break;default:T=!0}}else C++;C>0&&this.observer.emit(l.Events.ERROR,l.Events.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"Found "+C+" TS packet/s that do not start with 0x47"}),s.pesData=p,o.pesData=y,h.pesData=_;var P={audioTrack:o,avcTrack:s,id3Track:h,textTrack:this._txtTrack};return n&&this.extractRemainingSamples(P),P},t.flush=t.extractRemainingSamples=t.demuxSampleAes=t.decrypt=t.destroy=t.parseAVCPES=function(e,t){var r,i=this,n=this._avcTrack,o=this.parseAVCNALu(e.data),l=this.avcSample,u=!1;e.data=null,l&&o.length&&!n.audFound&&(g(l,n),l=this.avcSample=p(!1,e.pts,e.dts,"")),o.forEach(function(t){switch(t.type){case 1:r=!0,l||(l=i.avcSample=p(!0,e.pts,e.dts,"")),l.frame=!0;var o=t.data;if(u&&o.length>4){var c=new a.default(o).readSliceType();(2===c||4===c||7===c||9===c)&&(l.key=!0)}break;case 5:r=!0,l||(l=i.avcSample=p(!0,e.pts,e.dts,"")),l.key=!0,l.frame=!0;break;case 6:r=!0;var d=new a.default(y(t.data));d.readUByte();for(var h=0,f=0,v=!1,_=0;!v&&d.bytesAvailable>1;){h=0;do h+=_=d.readUByte();while(255===_);f=0;do f+=_=d.readUByte();while(255===_);if(4===h&&0!==d.bytesAvailable){if(v=!0,181===d.readUByte()&&49===d.readUShort()&&1195456820===d.readUInt()&&3===d.readUByte()){for(var T=d.readUByte(),b=d.readUByte(),E=31&T,S=[T,b],k=0;k<E;k++)S.push(d.readUByte()),S.push(d.readUByte()),S.push(d.readUByte());m(i._txtTrack.samples,{type:3,pts:e.pts,bytes:S})}}else if(5===h&&0!==d.bytesAvailable){if(v=!0,f>16){for(var C=[],w=0;w<16;w++)C.push(d.readUByte().toString(16)),(3===w||5===w||7===w||9===w)&&C.push("-");for(var A=f-16,L=new Uint8Array(A),x=0;x<A;x++)L[x]=d.readUByte();m(i._txtTrack.samples,{pts:e.pts,payloadType:h,uuid:C.join(""),userData:Object(s.utf8ArrayToStr)(L),userDataBytes:L})}}else if(f<d.bytesAvailable)for(var D=0;D<f;D++)d.readUByte()}break;case 7:if(r=!0,u=!0,!n.sps){var R=new a.default(t.data).readSPS();n.width=R.width,n.height=R.height,n.pixelRatio=R.pixelRatio,n.sps=[t.data],n.duration=i._duration;for(var I=t.data.subarray(1,4),O="avc1.",P=0;P<3;P++){var M=I[P].toString(16);M.length<2&&(M="0"+M),O+=M}n.codec=O}break;case 8:r=!0,n.pps||(n.pps=[t.data]);break;case 9:r=!1,n.audFound=!0,l&&g(l,n),l=i.avcSample=p(!1,e.pts,e.dts,"");break;case 12:r=!1;break;default:r=!1,l&&(l.debug+="unknown NAL "+t.type+" ")}l&&r&&l.units.push(t)}),t&&l&&(g(l,n),this.avcSample=null)},t.getLastNalUnit=t.parseAVCNALu=function(e){var t,r,i,n=e.byteLength,a=this._avcTrack,s=a.naluState||0,o=s,l=[],u=0,c=-1,d=0;for(-1===s&&(c=0,d=31&e[0],s=0,u=1);u<n;){if(t=e[u++],!s){s=t?0:1;continue}if(1===s){s=t?0:2;continue}if(t){if(1===t){if(c>=0){var h={data:e.subarray(c,u-s-1),type:d};l.push(h)}else{var f=this.getLastNalUnit();if(f&&(o&&u<=4-o&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-o)),(r=u-s-1)>0)){var p=new Uint8Array(f.data.byteLength+r);p.set(f.data,0),p.set(e.subarray(0,r),f.data.byteLength),f.data=p,f.state=0}}u<n?(i=31&e[u],c=u,d=i,s=0):s=-1}else s=0}else s=3}if(c>=0&&s>=0){var v={data:e.subarray(c,n),type:d,state:s};l.push(v)}if(0===l.length){var g=this.getLastNalUnit();if(g){var m=new Uint8Array(g.data.byteLength+e.byteLength);m.set(g.data,0),m.set(e,g.data.byteLength),g.data=m}}return a.naluState=s,l},t.parseAACPES=function(e){var t,r,n,a,s,o=0,u=this._audioTrack,h=this.aacOverFlow,f=e.data;if(h){this.aacOverFlow=null;var p=h.sample.unit.byteLength,v=Math.min(h.missing,p);h.sample.unit.set(f.subarray(0,v),p-v),u.samples.push(h.sample),o=h.missing}for(t=o,r=f.length;t<r-1&&!i.isHeader(f,t);t++);if(t===o||(t<r-1?(n="AAC PES did not start with ADTS header,offset:"+t,a=!1):(n="no ADTS header found in AAC PES",a=!0),c.logger.warn("parsing error:"+n),this.observer.emit(l.Events.ERROR,l.Events.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.FRAG_PARSING_ERROR,fatal:a,reason:n}),!a)){if(i.initTrackConfig(u,this.observer,f,t,this.audioCodec),void 0!==e.pts)s=e.pts;else if(h){var g=i.getFrameDuration(u.samplerate);s=h.sample.pts+g}else{c.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}for(var m=0;t<r;)if(i.isHeader(f,t)){if(t+5<r){var y=i.appendFrame(u,f,t,s,m);if(y){if(y.missing)this.aacOverFlow=y;else{t+=y.length,m++;continue}}}break}else t++}},t.parseMPEGPES=function(e){var t=e.data,r=t.length,i=0,a=0,s=e.pts;if(void 0===s){c.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<r;)if(n.isHeader(t,a)){var o=n.appendFrame(this._audioTrack,t,a,s,i);if(o)a+=o.length,i++;else break}else a++},t.parseID3PES=function(e){if(void 0===e.pts){c.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}this._id3Track.samples.push(e)},e}();unction v(e){var t,r,i,n,a,s=0,o=e.data;if(!e||0===e.size)return null;for(;o[0].length<19&&o.length>1;){var l=new Uint8Array(o[0].length+o[1].length);l.set(o[0]),l.set(o[1],o[0].length),o[0]=l,o.splice(1,1)}if(1===((t=o[0])[0]<<16)+(t[1]<<8)+t[2]){if((r=(t[4]<<8)+t[5])&&r>e.size-6)return null;var u=t[7];192&u&&(n=(14&t[9])*536870912+(255&t[10])*4194304+(254&t[11])*16384+(255&t[12])*128+(254&t[13])/2,64&u?n-(a=(14&t[14])*536870912+(255&t[15])*4194304+(254&t[16])*16384+(255&t[17])*128+(254&t[18])/2)>60*9e4&&(c.logger.warn(Math.round((n-a)/9e4)+"s delta between PTS and DTS, align them"),n=a):a=n);var d=(i=t[8])+9;if(e.size<=d)return null;e.size-=d;for(var h=new Uint8Array(e.size),f=0,p=o.length;f<p;f++){var v=(t=o[f]).byteLength;if(d){if(d>v){d-=v;continue}t=t.subarray(d),v-=d,d=0}h.set(t,s),s+=v}return r&&(r-=i+3),{data:h,pts:n,dts:a,len:r}}return null}inProbeByteLength=188,t.default=f},"./src/errors.ts":function(e,t,r){"use strict";var i,n,a,s;r.r(t),r.d(t,"ErrorTypes",function(){return i}),r.d(t,"ErrorDetails",function(){return n}),(a=i||(i={})).NETWORK_ERROR="networkError",a.MEDIA_ERROR="mediaError",a.KEY_SYSTEM_ERROR="keySystemError",a.MUX_ERROR="muxError",a.OTHER_ERROR="otherError",(s=n||(n={})).KEY_SYSTEM_NO_KEYS="keySystemNoKeys",s.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",s.KEY_SYSTEM_NO_SESSION="keySystemNoSession",s.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",s.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",s.MANIFEST_LOAD_ERROR="manifestLoadError",s.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",s.MANIFEST_PARSING_ERROR="manifestParsingError",s.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",s.LEVEL_EMPTY_ERROR="levelEmptyError",s.LEVEL_LOAD_ERROR="levelLoadError",s.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",s.LEVEL_SWITCH_ERROR="levelSwitchError",s.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",s.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",s.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",s.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",s.FRAG_LOAD_ERROR="fragLoadError",s.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",s.FRAG_DECRYPT_ERROR="fragDecryptError",s.FRAG_PARSING_ERROR="fragParsingError",s.REMUX_ALLOC_ERROR="remuxAllocError",s.KEY_LOAD_ERROR="keyLoadError",s.KEY_LOAD_TIMEOUT="keyLoadTimeOut",s.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",s.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",s.BUFFER_APPEND_ERROR="bufferAppendError",s.BUFFER_APPENDING_ERROR="bufferAppendingError",s.BUFFER_STALLED_ERROR="bufferStalledError",s.BUFFER_FULL_ERROR="bufferFullError",s.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",s.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",s.INTERNAL_EXCEPTION="internalException",s.INTERNAL_ABORTED="aborted",s.UNKNOWN="unknown"},"./src/events.ts":function(e,t,r){"use strict";var i,n;r.r(t),r.d(t,"Events",function(){return i}),(n=i||(i={})).MEDIA_ATTACHING="hlsMediaAttaching",n.MEDIA_ATTACHED="hlsMediaAttached",n.MEDIA_DETACHING="hlsMediaDetaching",n.MEDIA_DETACHED="hlsMediaDetached",n.BUFFER_RESET="hlsBufferReset",n.BUFFER_CODECS="hlsBufferCodecs",n.BUFFER_CREATED="hlsBufferCreated",n.BUFFER_APPENDING="hlsBufferAppending",n.BUFFER_APPENDED="hlsBufferAppended",n.BUFFER_EOS="hlsBufferEos",n.BUFFER_FLUSHING="hlsBufferFlushing",n.BUFFER_FLUSHED="hlsBufferFlushed",n.MANIFEST_LOADING="hlsManifestLoading",n.MANIFEST_LOADED="hlsManifestLoaded",n.MANIFEST_PARSED="hlsManifestParsed",n.LEVEL_SWITCHING="hlsLevelSwitching",n.LEVEL_SWITCHED="hlsLevelSwitched",n.LEVEL_LOADING="hlsLevelLoading",n.LEVEL_LOADED="hlsLevelLoaded",n.LEVEL_UPDATED="hlsLevelUpdated",n.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",n.LEVELS_UPDATED="hlsLevelsUpdated",n.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",n.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",n.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",n.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",n.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",n.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",n.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",n.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",n.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",n.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",n.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",n.CUES_PARSED="hlsCuesParsed",n.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",n.INIT_PTS_FOUND="hlsInitPtsFound",n.FRAG_LOADING="hlsFragLoading",n.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",n.FRAG_LOADED="hlsFragLoaded",n.FRAG_DECRYPTED="hlsFragDecrypted",n.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",n.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",n.FRAG_PARSING_METADATA="hlsFragParsingMetadata",n.FRAG_PARSED="hlsFragParsed",n.FRAG_BUFFERED="hlsFragBuffered",n.FRAG_CHANGED="hlsFragChanged",n.FPS_DROP="hlsFpsDrop",n.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",n.ERROR="hlsError",n.DESTROYING="hlsDestroying",n.KEY_LOADING="hlsKeyLoading",n.KEY_LOADED="hlsKeyLoaded",n.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",n.BACK_BUFFER_REACHED="hlsBackBufferReached"},"./src/hls.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return y});var i=r("./node_modules/url-toolkit/src/url-toolkit.js"),n=(r.n(i),r("./src/loader/playlist-loader.ts")),a=r("./src/loader/key-loader.ts"),s=r("./src/controller/id3-track-controller.ts"),o=r("./src/controller/latency-controller.ts"),l=r("./src/controller/level-controller.ts"),u=r("./src/controller/fragment-tracker.ts"),c=r("./src/controller/stream-controller.ts"),d=r("./src/is-supported.ts"),h=r("./src/utils/logger.ts"),f=r("./src/config.ts"),p=r("./node_modules/eventemitter3/index.js"),v=(r.n(p),r("./src/events.ts")),g=r("./src/errors.ts");ar y=function(){.isSupported=var t,r,y=e.prototype;return y.createController=y.on=function(e,t,r){void 0===r&&(r=this),this._emitter.on(e,t,r)},y.once=y.removeAllListeners=y.off=y.listeners=function(e){return this._emitter.listeners(e)},y.emit=y.trigger=y.listenerCount=y.destroy=y.attachMedia=y.detachMedia=y.loadSource=y.startLoad=y.stopLoad=y.swapAudioCodec=y.recoverMediaError=y.removeLevel=t=[{key:"levels",get:,{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:,{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:,{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){h.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:set:,{key:"startLevel",get:function(){return this.levelController.startLevel},set:,{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:,{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:,{key:"bandwidthEstimate",get:,{key:"autoLevelEnabled",get:,{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:,{key:"maxAutoLevel",get:,{key:"nextAutoLevel",get:set:,{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"subtitleTracks",get:,{key:"subtitleTrack",get:set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:set:,{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:,{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}],r=[{key:"version",get:,{key:"Events",get:function(){return v.Events}},{key:"ErrorTypes",get:function(){return g.ErrorTypes}},{key:"ErrorDetails",get:function(){return g.ErrorDetails}},{key:"DefaultConfig",get:set:],t&&m(e.prototype,t),r&&m(e,r),e}();y.defaultConfig=void 0},"./src/is-supported.ts":"./src/loader/fragment-loader.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return u}),r.d(t,"LoadError",function(){return d});var i=r("./src/polyfills/number.ts"),n=r("./src/errors.ts");nction o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}ar u=function(){ar t=e.prototype;return t.destroy=t.abort=t.load=function(e,t){var r=this,i=e.url;if(!i)return Promise.reject(new d({type:n.ErrorTypes.NETWORK_ERROR,details:n.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,networkDetails:null},"Fragment does not have a "+(i?"part list":"url")));this.abort();var a=this.config,s=a.fLoader,o=a.loader;return new Promise(function(i,l){r.loader&&r.loader.destroy();var u=r.loader=e.loader=s?new s(a):new o(a),h=c(e),f={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout,highWaterMark:131072};e.stats=u.stats,u.load(h,f,{onSuccess:onError:function(t,i,a){r.resetLoader(e,u),l(new d({type:n.ErrorTypes.NETWORK_ERROR,details:n.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:t,networkDetails:a}))},onAbort:function(t,i,a){r.resetLoader(e,u),l(new d({type:n.ErrorTypes.NETWORK_ERROR,details:n.ErrorDetails.INTERNAL_ABORTED,fatal:!1,frag:e,networkDetails:a}))},onTimeout:onProgress:)})},t.loadPart=t.updateStatsFromPart=t.resetLoader=e}();ar d=a(Error))},"./src/loader/fragment.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"ElementaryStreamTypes",function(){return n}),r.d(t,"BaseSegment",function(){return p}),r.d(t,"Fragment",function(){return v}),r.d(t,"Part",function(){return g});var i,n,a=r("./src/polyfills/number.ts"),s=r("./node_modules/url-toolkit/src/url-toolkit.js"),o=(r.n(s),r("./src/utils/logger.ts")),l=r("./src/loader/level-key.ts"),u=r("./src/loader/load-stats.ts");nction h(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function f(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),e}(i=n||(n={})).AUDIO="audio",i.VIDEO="video",i.AUDIOVIDEO="audiovideo";var p=),v=function(e){(t,e);var r=t.prototype;return r.createInitializationVector=r.setDecryptDataFromLevelKey=function(e,t){var r=e;return(null==e?void 0:e.method)==="AES-128"&&e.uri&&!e.iv&&((r=l.LevelKey.fromURI(e.uri)).method=e.method,r.iv=this.createInitializationVector(t),r.keyFormat="identity"),r},r.setElementaryStreamInfo=r.clearElementaryStreamInfo=f(t,[{key:"decryptdata",get:,{key:"end",get:function(){return this.start+this.duration}},{key:"endProgramDateTime",get:,{key:"encrypted",get:function(){var e;return!!(null!==(e=this.decryptdata)&&void 0!==e&&e.keyFormat&&this.decryptdata.uri)}}]),t}(p),g=p)},"./src/loader/key-loader.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return s});var i=r("./src/events.ts"),n=r("./src/errors.ts"),a=r("./src/utils/logger.ts"),s=function(){ar t=e.prototype;return t._registerListeners=function(){this.hls.on(i.Events.KEY_LOADING,this.onKeyLoading,this)},t._unregisterListeners=function(){this.hls.off(i.Events.KEY_LOADING,this.onKeyLoading)},t.destroy=t.onKeyLoading=function(e,t){var r=t.frag,n=r.type,s=this.loaders[n];if(!r.decryptdata){a.logger.warn("Missing decryption data on fragment in onKeyLoading");return}var o=r.decryptdata.uri;if(o!==this.decrypturl||null===this.decryptkey){var l=this.hls.config;if(s&&(a.logger.warn("abort previous key loader for type:"+n),s.abort()),!o){a.logger.warn("key uri is falsy");return}var u=l.loader,c=r.loader=this.loaders[n]=new u(l);this.decrypturl=o,this.decryptkey=null;var d={timeout:l.fragLoadingTimeOut,maxRetry:0,retryDelay:l.fragLoadingRetryDelay,maxRetryDelay:l.fragLoadingMaxRetryTimeout,highWaterMark:0},h={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};c.load({url:o,frag:r,responseType:"arraybuffer"},d,h)}else this.decryptkey&&(r.decryptdata.key=this.decryptkey,this.hls.trigger(i.Events.KEY_LOADED,{frag:r}))},t.loadsuccess=function(e,t,r){var n=r.frag;if(!n.decryptdata){a.logger.error("after key load, decryptdata unset");return}this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=null,delete this.loaders[n.type],this.hls.trigger(i.Events.KEY_LOADED,{frag:n})},t.loaderror=t.loadtimeout=e}()},"./src/loader/level-details.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"LevelDetails",function(){return a});var i=r("./src/polyfills/number.ts");function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){var e;eturn t.prototype.reloaded=n(t.prototype,[{key:"hasProgramDateTime",get:,{key:"levelTargetDuration",get:,{key:"drift",get:,{key:"edge",get:function(){return this.partEnd||this.fragmentEnd}},{key:"partEnd",get:,{key:"fragmentEnd",get:,{key:"age",get:,{key:"lastPartIndex",get:,{key:"lastPartSn",get:]),e&&n(t,e),t}()},"./src/loader/level-key.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"LevelKey",function(){return a});var i=r("./node_modules/url-toolkit/src/url-toolkit.js");function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}r.n(i);var a=function(){var e;function t(e,t){this._uri=null,this.method=null,this.keyFormat=null,this.keyFormatVersions=null,this.keyID=null,this.key=null,this.iv=null,t?this._uri=Object(i.buildAbsoluteURL)(e,t,{alwaysNormalize:!0}):this._uri=e}return t.fromURL=t.fromURI=n(t.prototype,[{key:"uri",get:function(){return this._uri}}]),e&&n(t,e),t}()},"./src/loader/load-stats.ts":"./src/loader/m3u8-parser.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return g});var i=r("./src/polyfills/number.ts"),n=r("./node_modules/url-toolkit/src/url-toolkit.js"),a=(r.n(n),r("./src/loader/fragment.ts")),s=r("./src/loader/level-details.ts"),o=r("./src/loader/level-key.ts"),l=r("./src/utils/attr-list.ts"),u=r("./src/utils/logger.ts"),c=r("./src/utils/codecs.ts"),d=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,h=/#EXT-X-MEDIA:(.*)/g,f=RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),p=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),v=/\.(mp4|m4s|m4v|m4a)$/i,g=function(){function e(){}return e.findGroup=e.convertAVC1ToAVCOTI=e.resolve=e.parseMasterPlaylist=function(t,r){var i,n=[],a={},s=!1;for(d.lastIndex=0;null!=(i=d.exec(t));)if(i[1]){var o=new l.AttrList(i[1]),u={attrs:o,bitrate:o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),name:o.NAME,url:e.resolve(i[2],r)},h=o.decimalResolution("RESOLUTION");h&&(u.width=h.width,u.height=h.height),function(e,t){["video","audio","text"].forEach(,t.unknownCodecs=e}((o.CODECS||"").split(/[ ,]+/).filter(function(e){return e}),u),u.videoCodec&&-1!==u.videoCodec.indexOf("avc1")&&(u.videoCodec=e.convertAVC1ToAVCOTI(u.videoCodec)),n.push(u)}else if(i[3]){var f=new l.AttrList(i[3]);f["DATA-ID"]&&(s=!0,a[f["DATA-ID"]]=f)}return{levels:n,sessionData:s?a:null}},e.parseMasterPlaylistMedia=e.parseLevelPlaylist=function(e,t,r,c,d){var h,g,m,_=new s.LevelDetails(t),T=_.fragments,b=null,E=0,S=0,k=0,C=0,w=null,A=new a.Fragment(c,t),L=-1,x=!1;for(f.lastIndex=0,_.m3u8=e;null!==(h=f.exec(e));){x&&(x=!1,(A=new a.Fragment(c,t)).start=k,A.sn=E,A.cc=C,A.level=r,b&&(A.initSegment=b,A.rawProgramDateTime=b.rawProgramDateTime));var D=h[1];if(D){A.duration=parseFloat(D);var R=(" "+h[2]).slice(1);A.title=R||null,A.tagList.push(R?["INF",D,R]:["INF",D])}else if(h[3])Object(i.isFiniteNumber)(A.duration)&&(A.start=k,m&&(A.levelkey=m),A.sn=E,A.level=r,A.cc=C,A.urlId=d,T.push(A),A.relurl=(" "+h[3]).slice(1),y(A,w),w=A,k+=A.duration,E++,S=0,x=!0);else if(h[4]){var I=(" "+h[4]).slice(1);w?A.setByteRange(I,w):A.setByteRange(I)}else if(h[5])A.rawProgramDateTime=(" "+h[5]).slice(1),A.tagList.push(["PROGRAM-DATE-TIME",A.rawProgramDateTime]),-1===L&&(L=T.length);else{if(!(h=h[0].match(p))){u.logger.warn("No matches on slow regex match for level playlist!");continue}for(g=1;g<h.length&&void 0===h[g];g++);var O=(" "+h[g]).slice(1),P=(" "+h[g+1]).slice(1),M=h[g+2]?(" "+h[g+2]).slice(1):"";switch(O){case"PLAYLIST-TYPE":_.type=P.toUpperCase();break;case"MEDIA-SEQUENCE":E=_.startSN=parseInt(P);break;case"SKIP":var F=new l.AttrList(P),N=F.decimalInteger("SKIPPED-SEGMENTS");if(Object(i.isFiniteNumber)(N)){_.skippedSegments=N;for(var B=N;B--;)T.unshift(null);E+=N}var j=F.enumeratedString("RECENTLY-REMOVED-DATERANGES");j&&(_.recentlyRemovedDateranges=j.split("	"));break;case"TARGETDURATION":_.targetduration=parseFloat(P);break;case"VERSION":_.version=parseInt(P);break;case"EXTM3U":break;case"ENDLIST":_.live=!1;break;case"#":(P||M)&&A.tagList.push(M?[P,M]:[P]);break;case"DIS":C++;case"GAP":A.tagList.push([O]);break;case"BITRATE":A.tagList.push([O,P]);break;case"DISCONTINUITY-SEQ":C=parseInt(P);break;case"KEY":var U,H=new l.AttrList(P),G=H.enumeratedString("METHOD"),K=H.URI,V=H.hexadecimalInteger("IV"),q=H.enumeratedString("KEYFORMATVERSIONS"),W=H.enumeratedString("KEYID"),z=null!=(U=H.enumeratedString("KEYFORMAT"))?U:"identity";if(["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(z)>-1){u.logger.warn("Keyformat "+z+" is not supported from the manifest");continue}if("identity"!==z)continue;G&&(m=o.LevelKey.fromURL(t,K),K&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(G)>=0&&(m.method=G,m.keyFormat=z,W&&(m.keyID=W),q&&(m.keyFormatVersions=q),m.iv=V));break;case"START":var Y=new l.AttrList(P).decimalFloatingPoint("TIME-OFFSET");Object(i.isFiniteNumber)(Y)&&(_.startTimeOffset=Y);break;case"MAP":var X=new l.AttrList(P);A.relurl=X.URI,X.BYTERANGE&&A.setByteRange(X.BYTERANGE),A.level=r,A.sn="initSegment",m&&(A.levelkey=m),A.initSegment=null,b=A,x=!0;break;case"SERVER-CONTROL":var Q=new l.AttrList(P);_.canBlockReload=Q.bool("CAN-BLOCK-RELOAD"),_.canSkipUntil=Q.optionalFloat("CAN-SKIP-UNTIL",0),_.canSkipDateRanges=_.canSkipUntil>0&&Q.bool("CAN-SKIP-DATERANGES"),_.partHoldBack=Q.optionalFloat("PART-HOLD-BACK",0),_.holdBack=Q.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var J=new l.AttrList(P);_.partTarget=J.decimalFloatingPoint("PART-TARGET");break;case"PART":var $=_.partList;$||($=_.partList=[]);var Z=S>0?$[$.length-1]:void 0,ee=S++,et=new a.Part(new l.AttrList(P),A,t,ee,Z);$.push(et),A.duration+=et.duration;break;case"PRELOAD-HINT":var er=new l.AttrList(P);_.preloadHint=er;break;case"RENDITION-REPORT":var ei=new l.AttrList(P);_.renditionReports=_.renditionReports||[],_.renditionReports.push(ei);break;default:u.logger.warn("line parsed but not handled: "+h)}}}w&&!w.relurl?(T.pop(),k-=w.duration,_.partList&&(_.fragmentHint=w)):_.partList&&(y(A,w),A.cc=C,_.fragmentHint=A);var en=T.length,ea=T[0],es=T[en-1];if((k+=_.skippedSegments*_.targetduration)>0&&en&&es){_.averagetargetduration=k/en;var eo=es.sn;_.endSN="initSegment"!==eo?eo:0,ea&&(_.startCC=ea.cc,ea.initSegment||_.fragments.every(function(e){var t,r,i;return e.relurl&&(t=e.relurl,v.test(null!=(r=null===(i=n.parseURL(t))||void 0===i?void 0:i.path)?r:""))})&&(u.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(A=new a.Fragment(c,t)).relurl=es.relurl,A.level=r,A.sn="initSegment",ea.initSegment=A,_.needSidxRanges=!0))}else _.endSN=0,_.startCC=0;return _.fragmentHint&&(k+=_.fragmentHint.duration),_.totalduration=k,_.endCC=C,L>0&&T,L),_},e}();"./src/loader/playlist-loader.ts":function(e,t,r){"use strict";r.r(t);var i=r("./src/polyfills/number.ts"),n=r("./src/events.ts"),a=r("./src/errors.ts"),s=r("./src/utils/logger.ts"),o=r("./src/utils/mp4-tools.ts"),l=r("./src/loader/m3u8-parser.ts"),u=r("./src/types/loader.ts"),c=r("./src/utils/attr-list.ts");ar h=function(){ar t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(n.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.on(n.Events.LEVEL_LOADING,this.onLevelLoading,this),e.on(n.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(n.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.unregisterListeners=function(){var e=this.hls;e.off(n.Events.MANIFEST_LOADING,this.onManifestLoading,this),e.off(n.Events.LEVEL_LOADING,this.onLevelLoading,this),e.off(n.Events.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(n.Events.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.createInternalLoader=t.getInternalLoader=t.resetInternalLoader=t.destroyInternalLoaders=t.destroy=function(){this.unregisterListeners(),this.destroyInternalLoaders()},t.onManifestLoading=t.onLevelLoading=t.onAudioTrackLoading=function(e,t){var r=t.id,i=t.groupId,n=t.url,a=t.deliveryDirectives;this.load({id:r,groupId:i,level:null,responseType:"text",type:u.PlaylistContextType.AUDIO_TRACK,url:n,deliveryDirectives:a})},t.onSubtitleTrackLoading=t.load=t.loadsuccess=function(e,t,r,i){if(void 0===i&&(i=null),r.isSidxRequest){this.handleSidxRequest(e,r),this.handlePlaylistLoaded(e,t,r,i);return}this.resetInternalLoader(r.type);var n=e.data;if(0!==n.indexOf("#EXTM3U")){this.handleManifestParsingError(e,r,"no EXTM3U delimiter",i);return}t.parsing.start=performance.now(),n.indexOf("#EXTINF:")>0||n.indexOf("#EXT-X-TARGETDURATION:")>0?this.handleTrackOrLevelPlaylist(e,t,r,i):this.handleMasterPlaylist(e,t,r,i)},t.loaderror=t.loadtimeout=t.handleMasterPlaylist=function(e,t,r,i){var a=this.hls,o=e.data,u=d(e,r),h=l.default.parseMasterPlaylist(o,u),f=h.levels,p=h.sessionData;if(!f.length){this.handleManifestParsingError(e,r,"no level found in manifest",i);return}var v=f.map(function(e){return{id:e.attrs.AUDIO,audioCodec:e.audioCodec}}),g=f.map(,m=l.default.parseMasterPlaylistMedia(o,u,"AUDIO",v),y=l.default.parseMasterPlaylistMedia(o,u,"SUBTITLES",g),_=l.default.parseMasterPlaylistMedia(o,u,"CLOSED-CAPTIONS");m.length&&(m.some(function(e){return!e.url})||!f[0].audioCodec||f[0].attrs.AUDIO||(s.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),m.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new c.AttrList({}),bitrate:0,url:""}))),a.trigger(n.Events.MANIFEST_LOADED,{levels:f,audioTracks:m,subtitles:y,captions:_,url:u,stats:t,networkDetails:i,sessionData:p})},t.handleTrackOrLevelPlaylist=function(e,t,r,s){var o=this.hls,h=r.id,f=r.level,p=r.type,v=d(e,r),g=Object(i.isFiniteNumber)(h)?h:0,m=Object(i.isFiniteNumber)(f)?f:g,y=r),_=l.default.parseLevelPlaylist(e.data,v,m,y,g);if(!_.fragments.length){o.trigger(n.Events.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.LEVEL_EMPTY_ERROR,fatal:!1,url:v,reason:"no fragments found in level",level:"number"==typeof r.level?r.level:void 0});return}if(p===u.PlaylistContextType.MANIFEST){var T={attrs:new c.AttrList({}),bitrate:0,details:_,name:"",url:v};o.trigger(n.Events.MANIFEST_LOADED,{levels:[T],audioTracks:[],url:v,stats:t,networkDetails:s,sessionData:null})}if(t.parsing.end=performance.now(),_.needSidxRanges){var b,E=null===(b=_.fragments[0].initSegment)||void 0===b?void 0:b.url;this.load({url:E,isSidxRequest:!0,type:p,level:f,levelDetails:_,id:h,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null});return}r.levelDetails=_,this.handlePlaylistLoaded(e,t,r,s)},t.handleSidxRequest=t.handleManifestParsingError=t.handleNetworkError=t.handlePlaylistLoaded=e}();t.default=h},"./src/polyfills/number.ts":"./src/remux/aac-helper.ts":function(e,t,r){"use strict";r.r(t);var i=function(){function e(){}return e.getSilentFrame=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t||3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}},e}();t.default=i},"./src/remux/mp4-generator.ts":function(e,t,r){"use strict";r.r(t);var i=function(){function e(){}return e.init=e.box=e.hdlr=e.mdat=e.mdhd=e.mdia=e.mfhd=e.minf=e.moof=e.moov=e.mvex=e.mvhd=e.sdtp=e.stbl=e.avc1=e.esds=e.mp4a=e.mp3=e.stsd=e.tkhd=e.traf=e.trak=e.trex=e.trun=e.initSegment=e}();i.types=void 0,i.HDLR_TYPES=void 0,i.STTS=void 0,i.STSC=void 0,i.STCO=void 0,i.STSZ=void 0,i.VMHD=void 0,i.SMHD=void 0,i.STSD=void 0,i.FTYP=void 0,i.DINF=void 0,t.default=i},"./src/remux/mp4-remuxer.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return v}),r.d(t,"normalizePts",function(){return g});var i=r("./src/polyfills/number.ts"),n=r("./src/remux/aac-helper.ts"),a=r("./src/remux/mp4-generator.ts"),s=r("./src/events.ts"),o=r("./src/errors.ts"),l=r("./src/utils/logger.ts"),u=r("./src/types/loader.ts"),c=r("./src/utils/timescale-conversion.ts");function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}var h=null,f=null,p=!1,v=function(){ar t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=t.resetNextTimestamp=t.resetInitSegment=t.getVideoStartPts=t.remux=function(e,t,r,i,n,a,s,o){var c,d,h,f,p,v,m=n,y=n,_=e.pid>-1,T=t.pid>-1,b=t.samples.length,E=e.samples.length>0,S=b>1;if((!_||E)&&(!T||S)||this.ISGenerated||s){this.ISGenerated||(h=this.generateIS(e,t,n));var k=this.isVideoContiguous,C=-1;if(S&&(C=t.samples),!k&&this.config.forceKeyFrameOnDiscontinuity)){if(v=!0,C>0){l.logger.warn("[mp4-remuxer]: Dropped "+C+" out of "+b+" video samples due to a missing keyframe");var w=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(C),t.dropped+=C,y+=(t.samples[0].pts-w)/(t.timescale||9e4)}else -1===C&&(l.logger.warn("[mp4-remuxer]: No keyframe found out of "+b+" video samples"),v=!1)}if(this.ISGenerated){if(E&&S){var A=this.getVideoStartPts(t.samples),L=(g(e.samples[0].pts,A)-A)/t.inputTimeScale;m+=Math.max(0,L),y+=Math.max(0,-L)}if(E){if(e.samplerate||(l.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),h=this.generateIS(e,t,n)),d=this.remuxAudio(e,m,this.isAudioContiguous,a,T||S||o===u.PlaylistLevelType.AUDIO?y:void 0),S){var x=d?d.endPTS-d.startPTS:0;t.inputTimeScale||(l.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),h=this.generateIS(e,t,n)),c=this.remuxVideo(t,y,k,x)}}else S&&(c=this.remuxVideo(t,y,k,0));c&&(c.firstKeyFrame=C,c.independent=-1!==C)}}return this.ISGenerated&&(r.samples.length&&(p=this.remuxID3(r,n)),i.samples.length&&(f=this.remuxText(i,n))),{audio:d,video:c,initSegment:h,independent:v,text:f,id3:p}},t.generateIS=t.remuxVideo=function(e,t,r,i){var n,u,f,v=e.inputTimeScale,y=e.samples,_=[],T=y.length,b=this._initPTS,E=this.nextAvcDts,S=8,k=Number.POSITIVE_INFINITY,C=Number.NEGATIVE_INFINITY,w=0,A=!1;r&&null!==E||(E=t*v-(y[0].pts-g(y[0].dts,y[0].pts)));for(var L=0;L<T;L++){var x=y[L];x.pts=g(x.pts-b,E),x.dts=g(x.dts-b,E),x.dts>x.pts&&(w=Math.max(Math.min(w,x.pts-x.dts),-18e3)),x.dts<y[L>0?L-1:L].dts&&(A=!0)}A&&y.sort(,u=y[0].dts;var D=Math.round(((f=y[y.length-1].dts)-u)/(T-1));if(w<0){if(w<-2*D){l.logger.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+Object(c.toMsFromMpegTsClock)(-D,!0)+" ms");for(var R=w,I=0;I<T;I++)y[I].dts=R=Math.max(R,y[I].pts-D),y[I].pts=Math.max(R,y[I].pts)}else{l.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Object(c.toMsFromMpegTsClock)(w,!0)+" ms to overcome this issue");for(var O=0;O<T;O++)y[O].dts=y[O].dts+w}u=y[0].dts}if(r){var P=u-E,M=P>D,F=P<-1;if(M||F){M?l.logger.warn("AVC: "+Object(c.toMsFromMpegTsClock)(P,!0)+" ms ("+P+"dts) hole between fragments detected, filling it"):l.logger.warn("AVC: "+Object(c.toMsFromMpegTsClock)(-P,!0)+" ms ("+P+"dts) overlapping between fragments detected"),u=E;var N=y[0].pts-P;y[0].dts=u,y[0].pts=N,l.logger.log("Video: First PTS/DTS adjusted: "+Object(c.toMsFromMpegTsClock)(N,!0)+"/"+Object(c.toMsFromMpegTsClock)(u,!0)+", delta: "+Object(c.toMsFromMpegTsClock)(P,!0)+" ms")}}p&&(u=Math.max(0,u));for(var B=0,j=0,U=0;U<T;U++){for(var H=y[U],G=H.units,K=G.length,V=0,q=0;q<K;q++)V+=G[q].data.length;j+=V,B+=K,H.length=V,H.dts=Math.max(H.dts,u),H.pts=Math.max(H.pts,H.dts,0),k=Math.min(H.pts,k),C=Math.max(H.pts,C)}f=y[T-1].dts;var W,z=j+4*B+8;try{W=new Uint8Array(z)}catch(e){this.observer.emit(s.Events.ERROR,s.Events.ERROR,{type:o.ErrorTypes.MUX_ERROR,details:o.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:z,reason:"fail allocating video mdat "+z});return}var Y=new DataView(W.buffer);Y.setUint32(0,z),W.set(a.default.types.mdat,4);for(var X=0;X<T;X++){for(var Q=y[X],J=Q.units,$=0,Z=0,ee=J.length;Z<ee;Z++){var et=J[Z],er=et.data,ei=et.data.byteLength;Y.setUint32(S,ei),S+=4,W.set(er,S),S+=ei,$+=4+ei}if(X<T-1)n=y[X+1].dts-Q.dts;else{var en=this.config,ea=Q.dts-y[X>0?X-1:X].dts;if(en.stretchShortVideoTrack&&null!==this.nextAudioPts){var es=Math.floor(en.maxBufferHole*v),eo=(i?k+i*v:this.nextAudioPts)-Q.pts;eo>es?((n=eo-ea)<0&&(n=ea),l.logger.log("[mp4-remuxer]: It is approximately "+eo/90+" ms to the next segment; using duration "+n/90+" ms for the last video frame.")):n=ea}else n=ea}var el=Math.round(Q.pts-Q.dts);_.push(new m(Q.key,n,$,el))}if(_.length&&h&&h<70){var eu=_[0].flags;eu.dependsOn=2,eu.isNonSync=0}console.assert(void 0!==n,"mp4SampleDuration must be computed"),this.nextAvcDts=E=f+n,this.isVideoContiguous=!0;var ec={data1:a.default.moof(e.sequenceNumber++,u,d({},e,{samples:_})),data2:W,startPTS:k/v,endPTS:(C+n)/v,startDTS:u/v,endDTS:E/v,type:"video",hasAudio:!1,hasVideo:!0,nb:_.length,dropped:e.dropped};return e.samples=[],e.dropped=0,console.assert(W.length,"MDAT length must not be zero"),ec},t.remuxAudio=function(e,t,r,i,u){var c=e.inputTimeScale,h=e.samplerate?e.samplerate:c,f=c/h,p=e.isAAC?1024:1152,v=p*f,y=this._initPTS,_=!e.isAAC&&this.typeSupported.mpeg,T=[],b=e.samples,E=_?0:8,S=this.nextAudioPts||-1,k=t*c;if(this.isAudioContiguous=r=r||b.length&&S>0&&(i&&9e3>Math.abs(k-S)||Math.abs(g(b[0].pts-y,k)-S)<20*v),b.forEach(,!r||S<0){if(!(b=b.filter().length)return;S=0===u?0:i?Math.max(0,k):b[0].pts}if(e.isAAC)for(var C=void 0!==u,w=this.config.maxAudioFramesDrift,A=0,L=S;A<b.length;A++){var x=b[A],D=x.pts,R=D-L,I=Math.abs(1e3*R/c);if(R<=-w*v&&C)0===A&&(l.logger.warn("Audio frame @ "+(D/c).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*R/c)+" ms."),this.nextAudioPts=S=L=D);else if(R>=w*v&&I<1e4&&C){var O=Math.round(R/v);(L=D-O*v)<0&&(O--,L+=v),0===A&&(this.nextAudioPts=S=L),l.logger.warn("[mp4-remuxer]: Injecting "+O+" audio frame @ "+(L/c).toFixed(3)+"s due to "+Math.round(1e3*R/c)+" ms gap.");for(var P=0;P<O;P++){var M=Math.max(L,0),F=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);F||(l.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),F=x.unit.subarray()),b.splice(A,0,{unit:F,pts:M}),L+=v,A++}}x.pts=L,L+=v}for(var N,B=null,j=null,U=0,H=b.length;H--;)U+=b[H].unit.byteLength;for(var G=0,K=b.length;G<K;G++){var V=b[G],q=V.unit,W=V.pts;if(null!==j)T[G-1].duration=Math.round((W-j)/f);else{if(r&&e.isAAC&&(W=S),B=W,!(U>0))return;U+=E;try{N=new Uint8Array(U)}catch(e){this.observer.emit(s.Events.ERROR,s.Events.ERROR,{type:o.ErrorTypes.MUX_ERROR,details:o.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:U,reason:"fail allocating audio mdat "+U});return}_||(new DataView(N.buffer).setUint32(0,U),N.set(a.default.types.mdat,4))}N.set(q,E);var z=q.byteLength;E+=z,T.push(new m(!0,p,z,0)),j=W}var Y=T.length;if(Y){var X=T[T.length-1];this.nextAudioPts=S=j+f*X.duration;var Q=_?new Uint8Array(0):a.default.moof(e.sequenceNumber++,B/f,d({},e,{samples:T}));e.samples=[];var J=B/c,$=S/c,Z={data1:Q,data2:N,startPTS:J,endPTS:$,startDTS:J,endDTS:$,type:"audio",hasAudio:!0,hasVideo:!1,nb:Y};return this.isAudioContiguous=!0,console.assert(N.length,"MDAT length must not be zero"),Z}},t.remuxEmptyAudio=t.remuxID3=t.remuxText=e}();ar m=y=,"./src/remux/passthrough-remuxer.ts":function(e,t,r){"use strict";r.r(t);var i=r("./src/polyfills/number.ts"),n=r("./src/utils/mp4-tools.ts"),a=r("./src/loader/fragment.ts"),s=r("./src/utils/logger.ts"),o=function(){ar t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=t.resetNextTimestamp=function(){this.lastEndDTS=null},t.resetInitSegment=t.generateInitSegment=function(e){var t=this.audioCodec,r=this.videoCodec;if(!e||!e.byteLength){this.initTracks=void 0,this.initData=void 0;return}var i=this.initData=Object(n.parseInitSegment)(e);t||(t=u(i.audio,a.ElementaryStreamTypes.AUDIO)),r||(r=u(i.video,a.ElementaryStreamTypes.VIDEO));var o={};i.audio&&i.video?o.audiovideo={container:"video/mp4",codec:t+","+r,initSegment:e,id:"main"}:i.audio?o.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:i.video?o.video={container:"video/mp4",codec:r,initSegment:e,id:"main"}:s.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=o},t.remux=e}(),l=.default=o},"./src/task-loop.ts":"./src/types/cmcd.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"CMCDVersion",function(){return u}),r.d(t,"CMCDObjectType",function(){return l}),r.d(t,"CMCDStreamingFormat",function(){return s}),r.d(t,"CMCDStreamType",function(){return o});var i,n,a,s,o,l,u=1;(i=l||(l={})).MANIFEST="m",i.AUDIO="a",i.VIDEO="v",i.MUXED="av",i.INIT="i",i.CAPTION="c",i.TIMED_TEXT="tt",i.KEY="k",i.OTHER="o",(n=s||(s={})).DASH="d",n.HLS="h",n.SMOOTH="s",n.OTHER="o",(a=o||(o={})).VOD="v",a.LIVE="l"},"./src/types/level.ts":function(e,t,r){"use strict";function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}.r(t),r.d(t,"HlsSkip",function(){return s}),r.d(t,"getSkipValue",function(){return n}),r.d(t,"HlsUrlParameters",function(){return o}),r.d(t,"Level",function(){return l}),(a=s||(s={})).No="",a.Yes="YES",a.v2="v2";var a,s,o=),l=function(){var e;eturn i(t.prototype,[{key:"maxBitrate",get:,{key:"uri",get:,{key:"urlId",get:function(){return this._urlId},set:]),e&&i(t,e),t}()},"./src/types/loader.ts":function(e,t,r){"use strict";var i,n,a,s;r.r(t),r.d(t,"PlaylistContextType",function(){return i}),r.d(t,"PlaylistLevelType",function(){return n}),(a=i||(i={})).MANIFEST="manifest",a.LEVEL="level",a.AUDIO_TRACK="audioTrack",a.SUBTITLE_TRACK="subtitleTrack",(s=n||(n={})).MAIN="main",s.AUDIO="audio",s.SUBTITLE="subtitle"},"./src/types/transmuxer.ts":"./src/utils/attr-list.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"AttrList",function(){return a});var i=/^(\d+)x(\d+)$/,n=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,a=)},"./src/utils/binary-search.ts":"./src/utils/buffer-helper.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"BufferHelper",function(){return a});var i=r("./src/utils/logger.ts"),n={length:0,start:function(){return 0},end:function(){return 0}},a=function(){function e(){}return e.isBuffered=e.bufferInfo=e.bufferedInfo=e.getBuffered=e}()},"./src/utils/cea-608-parser.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"Row",function(){return m}),r.d(t,"CaptionScreen",function(){return y});var i,n,a=r("./src/utils/logger.ts"),s={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},o=l={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},u={17:2,18:4,21:6,22:8,23:10,19:13,20:15},c={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},d={25:2,26:4,29:6,30:8,31:10,27:13,28:15},h=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];(i=n||(n={}))[i.ERROR=0]="ERROR",i[i.TEXT=1]="TEXT",i[i.WARNING=2]="WARNING",i[i.INFO=2]="INFO",i[i.DEBUG=3]="DEBUG",i[i.DATA=3]="DATA";var f=),p=v=),g=),m=function(){ar t=e.prototype;return t.equals=function(e){for(var t=!0,r=0;r<100;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<100;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<100;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=t.moveCursor=t.backSpace=t.insertChar=function(e){e>=144&&this.backSpace();var t=o(e);if(this.pos>=100){this.logger.log(n.ERROR,"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)},t.clearFromPos=t.clear=t.clearToEndOfRow=t.getTextString=t.setPenStyles=e}(),y=function(){ar t=e.prototype;return t.reset=t.equals=t.copy=t.isEmpty=t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=t.setCursor=t.setPAC=function(e){this.logger.log(n.INFO,"pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<15;r++)this.rows[r].clear();var i=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){var s=a.rows[i].cueStartTime,o=this.logger.time;if(s&&null!==o&&s<o)for(var l=0;l<this.nrRollUpRows;l++)this.rows[t-this.nrRollUpRows+l+1].copy(a.rows[i+l])}}this.currRow=t;var u=this.rows[this.currRow];if(null!==e.indent){var c=e.indent;u.setCursor(e.indent),e.color=u.chars[Math.max(c-1,0)].penState.foreground}var d={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(d)},t.setBkgData=t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){if(null===this.nrRollUpRows){this.logger.log(n.DEBUG,"roll_up but nrRollUpRows not set yet");return}this.logger.log(n.TEXT,this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(n.INFO,"Rolling up")},t.getDisplayText=function(e){e=e||!1;for(var t=[],r="",i=-1,n=0;n<15;n++){var a=this.rows[n].getTextString();a&&(i=n+1,e?t.push("Row "+i+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join(`
`)),r},t.getTextAndFormat=function(){return this.rows},e}(),_=function(){ar t=e.prototype;return t.reset=t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=t.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(n.INFO,r+": "+this.writeScreen.getDisplayText(!0)),("MODE_PAINT-ON"===this.mode||"MODE_ROLL-UP"===this.mode)&&(this.logger.log(n.TEXT,"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function(){this.logger.log(n.INFO,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=t.ccRU=t.ccFON=t.ccRDC=function(){this.logger.log(n.INFO,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){this.logger.log(n.INFO,"TR"),this.setMode("MODE_TEXT")},t.ccRTD=t.ccEDM=function(){this.logger.log(n.INFO,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=t.ccENM=t.ccEOC=t.ccTO=t.ccMIDROW=function(e){var t={flash:!1};(t.underline=e%2==1,t.italics=e>=46,t.italics)?t.foreground="white":t.foreground=["white","green","blue","cyan","red","yellow","magenta"][Math.floor(e/2)-16],this.logger.log(n.INFO,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=t.cueSplitAtTime=e}(),T=function(){ar t=e.prototype;return t.getHandler=t.setHandler=t.addData=function(e,t){var r,i,a,s=!1;this.logger.time=e;for(var o=0;o<t.length;o+=2)if(i=127&t[o],a=127&t[o+1],!(0===i&&0===a)){if(this.logger.log(n.DATA,"["+p([t[o],t[o+1]])+"] -> ("+p([i,a])+")"),(r=this.parseCmd(i,a))||(r=this.parseMidrow(i,a)),r||(r=this.parsePAC(i,a)),r||(r=this.parseBackgroundAttributes(i,a)),!r&&(s=this.parseChars(i,a))){var l=this.currentChannel;l&&l>0?this.channels[l].insertChars(s):this.logger.log(n.WARNING,"No channel found yet. TEXT-MODE?")}r||s||this.logger.log(n.WARNING,"Couldn't parse cleaned data "+p([i,a])+" orig: "+p([t[o],t[o+1]]))}},t.parseCmd=t.parseMidrow=t.parsePAC=t.interpretPAC=t.parseChars=function(e,t){var r,i,a=null,s=null;if((e>=25?(i=2,s=e-8):(i=1,s=e),s>=17&&s<=19)?(r=17===s?t+80:18===s?t+112:t+144,this.logger.log(n.INFO,"Special char '"+o(r)+"' in channel "+i),a=[r]):e>=32&&e<=127&&(a=0===t?[e]:[e,t]),a){var l=p(a);this.logger.log(n.DEBUG,"Char codes =  "+l.join(",")),b(e,t,this.cmdHistory)}return a},t.parseBackgroundAttributes=function(e,t){var r=(16===e||24===e)&&t>=32&&t<=47,i=(23===e||31===e)&&t>=45&&t<=47;if(!(r||i))return!1;var n,a={};16===e||24===e?(n=Math.floor((t-32)/2),a.background=h[n],t%2==1&&(a.background=a.background+"_semi")):45===t?a.background="transparent":(a.foreground="black",47===t&&(a.underline=!0));var s=e<=23?1:2;return this.channels[s].setBkgData(a),b(e,t,this.cmdHistory),!0},t.reset=t.cueSplitAtTime=e}();efault=T},"./src/utils/codecs.ts":"./src/utils/cues.ts":function(e,t,r){"use strict";r.r(t);var i=r("./src/utils/vttparser.ts"),n=r("./src/utils/webvtt-parser.ts"),a=r("./src/utils/texttrack-utils.ts"),s=/\s/;t.default={newCue:function(e,t,r,o){for(var l,u,c,d,h,f=[],p=self.VTTCue||self.TextTrackCue,v=0;v<o.rows.length;v++)if(l=o.rows[v],c=!0,d=0,h="",!l.isEmpty()){for(var g=0;g<l.chars.length;g++)s.test(l.chars[g].uchar)&&c?d++:(h+=l.chars[g].uchar,c=!1);l.cueStartTime=t,t===r&&(r+=1e-4),d>=16?d--:d++;var m=Object(i.fixLineBreaks)(h.trim()),y=Object(n.generateCueId)(t,r,m);e&&e.cues&&e.cues.getCueById(y)||((u=new p(t,r,m)).id=y,u.line=v+1,u.align="left",u.position=10+Math.min(80,10*Math.floor(8*d/32)),f.push(u))}return e&&f.length&&(f.sort(,f.forEach(function(t){return Object(a.addCueToTrack)(e,t)})),f}}},"./src/utils/discontinuities.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"findFirstFragWithCC",function(){return s}),r.d(t,"shouldAlignOnDiscontinuities",function(){return o}),r.d(t,"findDiscontinuousReferenceFrag",function(){return l}),r.d(t,"adjustSlidingStart",function(){return c}),r.d(t,"alignStream",function(){return d}),r.d(t,"alignPDT",function(){return h}),r.d(t,"alignFragmentByPDTDelta",function(){return f}),r.d(t,"alignMediaPlaylistByPDT",function(){return p});var i=r("./src/polyfills/number.ts"),n=r("./src/utils/logger.ts"),a=r("./src/controller/level-helper.ts");nction l(e,t){var r=e.fragments,i=t.fragments;if(!i.length||!r.length){n.logger.log("No fragments to align");return}var a=s(r,i[0].cc);if(!a||a&&!a.startPTS){n.logger.log("No frag in previous level to align on");return}return a}ction h(e,t){if(!(!t.fragments.length||!e.hasProgramDateTime||!t.hasProgramDateTime)){var r=t.fragments[0].programDateTime,a=e.fragments[0].programDateTime,s=(a-r)/1e3+t.fragments[0].start;s&&Object(i.isFiniteNumber)(s)&&(n.logger.log("Adjusting PTS using programDateTime delta "+(a-r)+"ms, sliding:"+s.toFixed(3)+" "+e.url+" "),c(s,e))}}unction p(e,t){if(!(!t.fragments.length||!e.hasProgramDateTime||!t.hasProgramDateTime)){var r=t.fragments[0].programDateTime-1e3*t.fragments[0].start;e.fragments.forEach(function(e){f(e,r)}),e.fragmentHint&&f(e.fragmentHint,r),e.alignedSliding=!0}}},"./src/utils/ewma-bandwidth-estimator.ts":"./src/utils/ewma.ts":"./src/utils/fetch-loader.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"fetchSupported",function(){return d});var i=r("./src/polyfills/number.ts"),n=r("./src/loader/load-stats.ts"),a=r("./src/demux/chunk-cache.ts");function s(e){var t="function"==typeof Map?new Map:void 0;return(s=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return o(e,arguments,u(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),l(r,e)})(e)}function o(e,t,r){return(o=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?function(e,t,r){var i=[null];i.push.apply(i,t);var n=new(Function.bind.apply(e,i));return r&&l(n,r.prototype),n}:Reflect.construct).apply(null,arguments)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}ar h=function(){ar t=e.prototype;return t.destroy=t.abortInternal=t.abort=function(){var e;this.abortInternal(),null!==(e=this.callbacks)&&void 0!==e&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)},t.load=function(e,t,r){var n,a=this,s=this.stats;if(s.loading.start)throw Error("Loader can only be used once.");s.loading.start=self.performance.now();var o=(n={method:"GET",mode:"cors",credentials:"same-origin",signal:this.controller.signal,headers:new self.Headers(c({},e.headers))},e.rangeEnd&&n.headers.set("Range","bytes="+e.rangeStart+"-"+String(e.rangeEnd-1)),n),l=r.onProgress,u="arraybuffer"===e.responseType,d=u?"byteLength":"length";this.context=e,this.config=t,this.callbacks=r,this.request=this.fetchSetup(e,o),self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(t.timeout),self.fetch(this.request).then(function(r){if(a.response=a.loader=r,!r.ok){var n=r.status;throw new p(r.statusText||"fetch, bad network response",n,r)}return s.loading.first=Math.max(self.performance.now(),s.loading.start),s.total=parseInt(r.headers.get("Content-Length")||"0"),l&&Object(i.isFiniteNumber)(t.highWaterMark)?a.loadProgressively(r,s,e,t.highWaterMark,l):u?r.arrayBuffer():r.text()}).then(.catch(},t.getCacheAge=t.loadProgressively=e}();ar p=s(Error));t.default=h},"./src/utils/imsc1-ttml-parser.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"IMSC1_CODEC",function(){return c}),r.d(t,"parseIMSC1",function(){return p});var i=r("./src/utils/mp4-tools.ts"),n=r("./src/utils/vttparser.ts"),a=r("./src/utils/vttcue.ts"),s=r("./src/demux/id3.ts"),o=r("./src/utils/timescale-conversion.ts"),l=r("./src/utils/webvtt-parser.ts");ar c="stpp.ttml.im1t",d=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,h=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,f={left:"start",center:"center",right:"end",start:"start",end:"end"};function p(e,t,r,n,c){var d=Object(i.findBox)(new Uint8Array(e),["mdat"]);if(0===d.length){c(Error("Could not parse IMSC1 mdat"));return}var h=d[0],p=Object(s.utf8ArrayToStr)(new Uint8Array(e,h.start,h.end-h.start)),T=Object(o.toTimescaleFromScale)(t,1,r);try{n(function(e,t){var r=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("tt")[0];if(!r)throw Error("Invalid ttml");var i={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},n=Object.keys(i).reduce({}),s="preserve"!==r.getAttribute("xml:space"),o=g(v(r,"styling","style")),c=g(v(r,"layout","region")),d=v(r,"body","[begin]");return[].map.call(d,function(e){var r,i=function e(t,r){return[].slice.call(t.childNodes).reduce(function(t,i,n){var a;return"br"===i.nodeName&&n?t+`
`:null!==(a=i.childNodes)&&void 0!==a&&a.length?e(i,r):r?t+i.textContent.trim().replace(/\s+/g," "):t+i.textContent},"")}(e,s);if(!i||!e.hasAttribute("begin"))return null;var d=_(e.getAttribute("begin"),n),h=_(e.getAttribute("dur"),n),p=_(e.getAttribute("end"),n);if(null===d)throw y(e);if(null===p){if(null===h)throw y(e);p=d+h}var v=new a.default(d-t,p-t,i);v.id=Object(l.generateCueId)(v.startTime,v.endTime,v.text);var g=c[e.getAttribute("region")],T=o[e.getAttribute("style")];v.position=10,v.size=80;var b=(r="http://www.w3.org/ns/ttml#styling",["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"].reduce({})),E=b.textAlign;if(E){var S=f[E];S&&(v.lineAlign=S),v.align=E}return u(v,b),v}).filter(}(p,T))}catch(e){c(e)}}tion _(e,t){if(!e)return null;var r,i,a=Object(n.parseTimeStamp)(e);return null===a&&(d.test(e)?(i=(0|(r=d.exec(e))[4])+(0|r[5])/t.subFrameRate,a=(0|r[1])*3600+(0|r[2])*60+(0|r[3])+i/t.frameRate):h.test(e)&&(a=e,t))),a}},"./src/utils/logger.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"enableLogs",function(){return s}),r.d(t,"logger",function(){return o});var i=function(){},n={trace:i,debug:i,log:i,warn:i,info:i,error:i},a=n;function s(e){if(self.console&&!0===e||"object"==typeof e){!e,"debug","log","info","warn","error");try{a.log()}catch(e){a=n}}else a=n}var o=a},"./src/utils/mediakeys-helper.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"KeySystems",function(){return n}),r.d(t,"requestMediaKeySystemAccess",function(){return a}),(i=n||(n={})).WIDEVINE="com.widevine.alpha",i.PLAYREADY="com.microsoft.playready";var i,n,a="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null},"./src/utils/mediasource-helper.ts":"./src/utils/mp4-tools.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"bin2str",function(){return s}),r.d(t,"readUint16",function(){return o}),r.d(t,"readUint32",function(){return l}),r.d(t,"writeUint32",function(){return u}),r.d(t,"findBox",function(){return c}),r.d(t,"parseSegmentIndex",function(){return d}),r.d(t,"parseInitSegment",function(){return h}),r.d(t,"getStartDTS",function(){return f}),r.d(t,"getDuration",function(){return p}),r.d(t,"computeRawDurationFromSamples",function(){return v}),r.d(t,"offsetStartDTS",function(){return g}),r.d(t,"segmentValidRange",function(){return m}),r.d(t,"appendUint8Array",function(){return y});var i=r("./src/utils/typed-array.ts"),n=r("./src/loader/fragment.ts"),a=[].push;tion c(e,t){var r,i,n,o=[];if(!t.length)return o;"data"in e?(r=e.data,i=e.start,n=e.end):(i=0,n=(r=e).byteLength);for(var u=i;u<n;){var d=l(r,u),h=s(r.subarray(u+4,u+8)),f=d>1?u+d:n;if(h===t[0]){if(1===t.length)o.push({data:r,start:u+8,end:f});else{var p=c({data:r,start:u+8,end:f},t.slice(1));p.length&&a.apply(o,p)}}u=f}return o}function d(e){var t=c(e,["moov"])[0],r=t?t.end:null,i=c(e,["sidx"]);if(!i||!i[0])return null;var n=[],a=i[0],s=a.data[0],u=0===s?8:16,d=l(a,u);u+=4,0===s?u+=8:u+=16,u+=2;var h=a.end+0,f=o(a,u);u+=2;for(var p=0;p<f;p++){var v=u,g=l(a,v);v+=4;var m=2147483647&g;if(1==(2147483648&g)>>>31)return console.warn("SIDX has hierarchical references (not supported)"),null;var y=l(a,v);v+=4,n.push({referenceSize:m,subsegmentDuration:y,info:{duration:y/d,start:h,end:h+m-1}}),h+=m,v+=4,u=v}return{earliestPresentationTime:0,timescale:d,version:s,referencesCount:f,references:n,moovEndOffset:r}}function h(e){for(var t=[],r=c(e,["moov","trak"]),i=0;i<r.length;i++){var a=r[i],o=c(a,["tkhd"])[0];if(o){var u=o.data[o.start],d=0===u?12:20,h=l(o,d),f=c(a,["mdia","mdhd"])[0];if(f){d=0===(u=f.data[f.start])?12:20;var p=l(f,d),v=c(a,["mdia","hdlr"])[0];if(v){var g=s(v.data.subarray(v.start+8,v.start+12)),m={soun:n.ElementaryStreamTypes.AUDIO,vide:n.ElementaryStreamTypes.VIDEO}[g];if(m){var y=c(a,["mdia","minf","stbl","stsd"])[0],_=void 0;y&&(_=s(y.data.subarray(y.start+12,y.start+16))),t[h]={timescale:p,type:m},t[m]={timescale:p,id:h,codec:_}}}}}}return c(e,["moov","mvex","trex"]).forEach(,t}function f(e,t){return c(t,["moof","traf"]).reduce(function(t,r){var i=c(r,["tfdt"])[0],n=i.data[i.start],a=c(r,["tfhd"]).reduce(null);return null!==a&&isFinite(a)&&(null===t||a<t)?a:t},null)||0}function p(e,t){for(var r=0,i=0,a=0,s=c(e,["moof","traf"]),o=0;o<s.length;o++){var u=s[o],h=c(u,["tfhd"])[0],f=t[l(h,4)];if(f){var p=f.default,g=l(h,0)|(null==p?void 0:p.flags),m=null==p?void 0:p.duration;8&g&&(m=2&g?l(h,12):l(h,8));for(var y=f.timescale||9e4,_=c(u,["trun"]),T=0;T<_.length;T++)(r=v(_[T]))||!m||(r=m*l(_[T],4)),f.type===n.ElementaryStreamTypes.VIDEO?i+=r/y:f.type===n.ElementaryStreamTypes.AUDIO&&(a+=r/y)}}if(0===i&&0===a){var b=d(e);if(null!=b&&b.references)return b.references.reduce(0)}return i||a}unction g(e,t,r){c(t,["moof","traf"]).forEach(function(t){c(t,["tfhd"]).forEach(function(i){var n=e[l(i,4)];if(n){var a=n.timescale||9e4;c(t,["tfdt"]).forEach(function(e){var t=e.data[e.start],i=l(e,4);if(0===t)u(e,4,i-r*a);else{i*=4294967296,i+=l(e,8),i-=r*a;var n=Math.floor((i=Math.max(i,0))/4294967296),s=Math.floor(i%4294967296);u(e,4,n),u(e,8,s)}})}})})}"./src/utils/output-filter.ts":"./src/utils/texttrack-utils.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"sendAddTrackEvent",function(){return n}),r.d(t,"addCueToTrack",function(){return a}),r.d(t,"clearCurrentCues",function(){return s}),r.d(t,"removeCuesInRange",function(){return o}),r.d(t,"getCuesInRange",function(){return l});var i=r("./src/utils/logger.ts");src/utils/time-ranges.ts":"./src/utils/timescale-conversion.ts":function(e,t,r){"use strict";t),r.d(t,"toTimescaleFromBase",function(){return i}),r.d(t,"toTimescaleFromScale",function(){return n}),r.d(t,"toMsFromMpegTsClock",function(){return a}),r.d(t,"toMpegTsClockFromTimescale",function(){return s})},"./src/utils/typed-array.ts":"./src/utils/vttcue.ts":function(e,t,r){"use strict";r.r(t),t.default=)},"./src/utils/vttparser.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"parseTimeStamp",function(){return a}),r.d(t,"fixLineBreaks",function(){return c}),r.d(t,"VTTParser",function(){return d});var i=r("./src/utils/vttcue.ts"),n=);ar s=);function o(e,t,r,i){var n=i?e.split(i):[e];for(var a in n)if("string"==typeof n[a]){var s=n[a].split(r);2===s.length&&t(s[0],s[1])}}var l=new i.default(0,0,""),u="middle"===l.align?"middle":"center";function c(e){return e.replace(/<br(?: \/)?>/gi,`
`)}var d=function(){ar t=e.prototype;return t.parse=function(e){var t=this;function r(){var e=t.buffer,r=0;for(e=c(e);r<e.length&&"\r"!==e[r]&&e[r]!==`
`;)++r;var i=e.substr(0,r);return"\r"===e[r]&&++r,e[r]===`
`&&++r,t.buffer=e.substr(r),i}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var n,d="";if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var h=(d=r()).match(/^()?WEBVTT([ \t].*)?$/);if(!h||!h[0])throw Error("Malformed WebVTT signature.");t.state="HEADER"}for(var f=!1;t.buffer&&/\r\n|\n/.test(t.buffer);)switch(f?f=!1:d=r(),t.state){case"HEADER":/:/.test(d)?(n=d,o{},/:/)):d||(t.state="ID");continue;case"NOTE":d||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(d)){t.state="NOTE";break}if(!d)continue;if(t.cue=new i.default(0,0,""),t.state="CUE",-1===d.indexOf("-->")){t.cue.id=d;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}trd})(d,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var p=-1!==d.indexOf("-->");if(!d||p&&(f=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(null===t.cue)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=d;continue;case"BADCUE":d||(t.state="ID")}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},t.flush=function(){try{if((this.cue||"HEADER"===this.state)&&(this.buffer+=`

`,this.parse()),"INITIAL"===this.state||"BADWEBVTT"===this.state)throw Error("Malformed WebVTT signature.")}catch(e){this.onparsingerror&&this.onparsingerror(e)}return this.onflush&&this.onflush(),this},e}()},"./src/utils/webvtt-parser.ts":function(e,t,r){"use strict";r.r(t),r.d(t,"generateCueId",function(){return h}),r.d(t,"parseWebVTT",function(){return p});var i=r("./src/polyfills/number.ts"),n=r("./src/utils/vttparser.ts"),a=r("./src/demux/id3.ts"),s=r("./src/utils/timescale-conversion.ts"),o=r("./src/remux/mp4-remuxer.ts"),l=/\r\n|\n\r|\n|\r/gt},c=function(e){var t=parseInt(e.substr(-3)),r=parseInt(e.substr(-6,2)),n=parseInt(e.substr(-9,2)),a=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;if(!Object(i.isFiniteNumber)(t)||!Object(i.isFiniteNumber)(r)||!Object(i.isFiniteNumber)(n)||!Object(i.isFiniteNumber)(a))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+(1e3*r+6e4*n+36e5*a)})}varr};function p(e,t,r,i,d,p,v,g){var m,y=new n.VTTParser,_=Object(a.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(l,`
`).split(`
`),T=[],b=Object(s.toMpegTsClockFromTimescale)(t,r),E="00:00.000",S=0,k=0,C=!0,w=!1;y.oncue=function(e){var t=i[d],r=i.ccOffset,n=(S-b)/9e4;if(null!=t&&t.new&&(void 0!==k?r=i.ccOffset=t.start:f(i,d,n)),n&&(r=n-i.presentationOffset),w){var a=e.endTime-e.startTime,s=Object(o.normalizePts)((e.startTime+r-k)*9e4,9e4*p)/9e4;e.startTime=s,e.endTime=s+a}var l=e.text.trim();e.text=decodeURIComponent(encodeURIComponent(l)),e.id||(e.id=h(e.startTime,e.endTime,l)),e.endTime>0&&T.push(e)},y.onparsingerre},y.onflu)},_.forEach(function(e){if(C){if(u(e,"X-TIMESTAMP-MAP=")){C=!1,w=!0,e.substr(16).split(",").forEa)});try{k=c(E)/1e3}catch(e){w=!1,m=e}return}""===e&&(C=!1)}y.parse(e+`
`)}),y.flush()}},"./src/utils/xhr-loader.ts":function(e,t,r){"use strict";r.r(t);var i=r("./src/utils/logger.ts"),n=r("./src/loader/load-stats.ts"),a=/^age:\s*[\d.]+\s*$/m,s=function0}var t=e.prototype;return t.destrl},t.abortIntern)},t.abo)},t.lo)},t.loadIntern}},t.readystatechange=function(){var e=this.context,t=this.loader,r=this.stats;if(!(!e||!t)){var n=t.readyState,a=this.config;if(!r.aborted&&n>=2){if(self.clearTimeout(this.requestTimeout),0===r.loading.first&&(r.loading.first=Math.max(self.performance.now(),r.loading.start)),4===n){t.onreadystatechange=null,t.onprogress=null;var s=t.status;if(s>=200&&s<300){if(r.loading.end=Math.max(self.performance.now(),r.loading.first),l="arraybuffer"===e.responseType?(o=t.response).byteLength:(o=t.responseText).length,r.loaded=r.total=l,!this.callbacks)return;var o,l,u=this.callbacks.onProgress;if(u&&u(r,e,o,t),!this.callbacks)return;var c={url:t.responseURL,data:o};this.callbacks.onSuccess(c,r,e,t)}else r.retry>=a.maxRetry||s>=400&&s<499?(i.logger.error(s+" while loading "+e.url),this.callbacks.onError({code:s,text:t.statusText},e,t)):(i.logger.warn(s+" while loading "+e.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,a.maxRetryDelay),r.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.timeout)}}},t.loadtimeo)},t.loadprogre)},t.getCacheAe},e}();t.default=s}}).default)},9g},642:(e,t))}r.isEventK}};var i=(t=e.exports=r).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},n=t.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(a=97;a<123;a++)i[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)i[a-48]=a;for(a=1;a<13;a++)i["f"+a]=a+111;for(a=0;a<10;a++)i["numpad "+a]=a+96;var s=t.names=t.title={};for(a in i)s[i[a]]=a;for(var o in n)i[ourn[i,r]}},207:(e,t,r)=>{"use strict";/**
 * @license
 * Video.js 7.18.1 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var i,n,a=r(697),s=r(675),o=r(723),l=r(642),u=r(477),c=r(743),d=r(54),h=r(424),f=r(497),p=r(811efault:e}}for(var m,y=g(a),_=g(s),T=g(o),b=g(l),E=g(u),S=g(c),k=g(d),C=g(h),w=g(f),A=g(p),L=g(v),x="7.18(t(r,1),!0)},O={prefixed:!0},P=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],M=P[0],F=0;F<P.length;F++)if(P[F][1]in _.default){m=P[F];break}if(m){for(var N=0;N<m.length;N++)O[M[N]]=m[N];O.prefixed=m[0]!==M[0]}var B=[],j=function e(t){var r,log",i,t)};return r=function(e,r,i){var a=n.levels[r],s=RegExp("^("+a+")$");if("log"!==e&&i.unshift(e.toUpperCase()+":"),i.unshift(t+":"),B){B.push([].concat(i));var o=B.length-1e3;B.splice(0,o>0?o:0)}if(y.default.console){var l=y.default.console[e];l||"debug"!==e||(l=y.default.console.info||y.default.console.log),l&&a&&s.test(e)&&l[Array.isArray(i)?"apply":"call"](y.default.console,i)}},n.crt+": "+r)},n.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:}return i}cat(B):[]},n.histt(t[0])})},n.hislength=0)},n.histo0,B=null)},n.histB&&(B=[])},n.error=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r("error",i,t)},n.warn=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r("warn",i,tbug",i,t)},n}("VIDEOJS"),U=j.createLogger,H=Object.prototype.urn""}var Y=y.default.navigator&&y.default.navigator.userAgent||"",X=/AppleWebKit\/([\d.]+)/i.exec(Y),Q=X?parseFloat(X.pop()):null,J=/iPod/i.test(Y),$=(eV=Y.match(/OS (\d+)_/i))&&eV[1]?eV[1]:null,Z=/Android/i.):t||null}(),et=Z&&ee<5&&Q<537,er=/Firefox/i.test(Y),ei=/Edg/i.test(Y),en=!ei&&(/Chrome/i.test(Y)||/CriOS/i.test(Y)),ea=(eq=Y.match(/(Chrome|CriOS)\/(\d+)/))&&eq[2]?parseFloat(eq[2]):null,es=(!(ez=(eW=/MSIE\s(\d+)\.\d/.exec(Y))&&parseFloat(eW[1]))&&/Trident\/7.0/i.test(Y)&&/rv:11.0/.test(Y)&&(ez=11),ez),eo=/Safari/i.test(Y)&&!en&&!Z&&!ei,el=/Windows/i.test(Y),eu=!!(em()&&("ontouchstart"in y.default||y.default.navigator.maxTouchPoints||y.default.DocumentTouch&&y.default.document instanceof y.default.DocumentTouch)),ec=/iPad/i.test(Y)||eo&&eu&&!/iPhone/i.test(Y),ed=/iPhone/i.test(Y)&&!ec,eh=ed||ec||J,ef=(eo||eh)&&!en,ep=Object.freeze({__proto__:null,IS_IPOD:J,IOS_VERSION:$,IS_ANDROID:Z,ANDROID_VERSION:ee,IS_NATIVE_ANDROID:et,IS_FIREFOX:er,IS_EDGE:ei,IS_CHROME:en,CHROME_VERSION:ea,IE_VERSION:es,IS_SAFARI:eo,IS_WINDOWS:el,TOUCH_ENABLED:eu,IS_IPAD:ec,IS_IPHONE:ed,IS_IOS:eh,IS_ANY_Socument}function ey(e){return q(e)&&1===i[e](t)}}function eb(e,t,r,i){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===r&&(r={});var n=_.default.createElement(e);return Object.getOwnPropertyNames(t).forEach(function(e){var r=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(j.warn(`Setting attributes in the second argument of createEl()
has been deprecated. Use the third argument instead.
`+("createEl(type, properties, attributes). Attempting to set "+e)+" to "+r+"."),n.setAttribute(e,r)):"textContent"===e?eE(n,r):(n[e]!==r||"tabIndex"===e)&&(n[e]=r)}),Object.getOwnPropertyNames(e(e,r[e])}),i&Child(e)}function ek(e,t){return eg(t),e.classList?e.classList.contains(t):RegExp("(^|\\s)"+t+"($|\\s)").test(e.tion eU(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map(function(e){return("function"==typeof e&&(e=e()),ey(e)||eB(e))?e:"string"==typeof e&&/\S/.test(e)?_.default.createTextNode(e):void 0}).filter(function(e){ej(e),t)}function eK(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||!(0!==e.button||1!==e.buttons)}var eV,eq,eW,ez,eY,eX=eT("querySelector"),eQ=eT("querySelectorAll"),eJ=Object.freeze({__proto__:null,isReal:em,isEl:ey,isInFrame:e_,createEl:eb,textContent:eE,prependTo:eS,hasClass:ek,addClass:eC,removeClass:ew,toggleClass:eA,setAttributes:eL,getAttributes:ex,getAttribute:eD,setAttribute:eR,removeAttribute:eI,blockTextSelection:eO,unblockTextSelection:eP,getBoundingClientRect:eM,findPosition:eF,getPointerPosition:eN,isTextNode:eB,emptyEl:ej,normalizeContent:eU,appendContent:eH,insertContent:eG,isSingleLeftClick:eK,$:eX,$$:eQ}),e$=!1,eZ=function(){if(!1!==eY.options.autoSetup){var e=Array.prototype.slice.call(_.default.getElementsByTagName("video")),t=Array.prototype.slice.call(_.default.getElementsByTagName("audio")),r=Array.prototype.slice.call(_.default.getElementsByTagName("video-js")),i=e.concat(t,r);if(i&&i.length>0)for(var n=0,a=i.length;n<a;n++){var s=i[n];if(s&&s.getAttribute)void 0===s.player&&null!==s.getAttribute("data-setup")&&eY(s);else{e0(1);break}}else eoad",e1)}em()&&("complete"===_.default.readyState?e1():y.default.addEventListener("load",esNaContent=t},e3=3;y.default.WeakMap||(e7=s.data={}}var t=e.prototype;rer]=t,tement"this.datas.vdata])},e}());var e5=y.default.WeakMap?new Weakd_=!0,e}vareturn te},tr=["touchstart","t,t,i)}var tl=Object.freeze({__proto__:null,fixEvent:e9,on:ti,off:tn,trigger:ta,one:ts,a:t.ts),r=i)}},td=function(e,t,r,i){void 0===i&&(i=y.defauleout(o,t)};return),n=null},a},th=function(){};th.prototype.allowedEvents_={},th.prototype.on=function(e,t){var r=this.addEventListener;this.addEventListener=function(){},ti(this,e,t),this.addEventListener=r},th.prototype.addEventListener=th.prototype.on,th.prothis,e,t)},th.prototype.removeEventListener=th.prototype.off,th.prototype.one=function(e,t){var r=this.addEventListener;this.addEventListener=function(){},ts(this,e,t),this.addEventListener=r},th.proistener=r},th.prototya(this,e)},th.prototype.dispatchEvent=th.prototype.trigger,th.prototype.qu.set(r,:tyof .pu!e.obj arnct=tue[t](r,pose",c)}},one:function(){for(var e=this,t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var n=tT(this,r,"one"),a=n.isTargetingSelf,s=n.target,o=n.type,l=n.listener;if(a)tb(s,"one",o,l);else{var u=function t(){e.off(s,o,t);for(var r=arguments.length,i=Array(r),n=0;n<r;n++)i[n]=arguments[n];l.apply(null,i)};u.guid=l.guid,tb(s,"one",ny",ose",r))sEl_,e,t)}};function tS(e,t){void 0===t&&(t={});var r=t.eventBusKey;if(r){if(!e[r].nodeName)throw Error('The eventBusKey "'+r+'" does not refer to an element.');e.eventBusEl_=e[r]}else e.eventBusEl_=eb("span",{className:"vjs-event-bus"});return V(e,tE),e.eventedCallbacks&&e.eventedCallbacks.forEach(function(e){e()}),e.on=null},0)}),e}var tk={state:{nhanged),e}var tw=function(e){return"string"!=typeof e?e:e.replace(/./,function(e){return e.toLowerCa,t)})},this)},e}(),tD=y.default.Map?y.default,this)},e}(),tI=y.default.Set?y.default.Set:tR,tO=function(){function e(e,t,r){if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=tL({},this.options_),t=this.options_=tL(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var i=e&&e.id&&e.id()||"no_player";this.id_=i+"_component_"+e3++}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),!1!==t.evented&&(tS(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),tC(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new tI,this.setIntervalIds_=new tI,this.rafIds_=new tI,this.namedRafs_=new tD,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(r),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var t=e.prototype;returner_=null}},t.Disposed_},t.player=function(){return this.player_}.options_},t.el=function(){return this.el_},eb(e,t,r)},e),n})),l},t.handleLanguagechange=function(){},t|this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.geIndex_[e]},Index_[e]},t.get;return i},}return n},t.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),!(!e||!this.children_)){for(var t=!1,r=this.children_.length-1;r>=0;r--)if(this.children_[r]===e){t=!0,this.children_.splice(r,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[tA(e.name())]=null,this.childNameIndex_[tw(e.name())]=null;var i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},t.inr]=a)}})}},t.buildCSSClass=function(){return"out(e,1)}},t.trady")},1)},t.$=function(e,t){return eX(e,t||this.contentEtentEl())},t.hasClass=function(e){return ek(this.el_,e)},t.addClass=function(e){eC(this.el_,e)},t.removeClass=function(e){ew(this.el_,e)},t.toggleClass=function(e,t){eA(this.el_,e,t)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.geis.el_,e)},t.se.el_,e,t)},t.removis.el_,e)},t.width=function(e,t){return this.dimension("width",e,t)ght",e,t)},t.height(t)},t.dimension=function(e,t,r){if(void 0!==t){(null===t||t!=t)&&(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:"auto"===t?this.el_.style[e]="":this.el_.style[e]=t+"px",r||this.trigger("componentresize");return}if(!this.el_)return 0;var i=this.el_.style[e],n=i.indexOf("px");return parseInt(-1!==n?i.slice(0,n):this.el_["offset"+tA(e)],10)},t.curren}return t},t.currentheight")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focusl_.blur()},t.hanyDown(e))},t.handeyDown(e)},t.emi"tap"))})},t.enableTouchActivity=function(){if(!(!this.player()||!this.player().reportUserActivity)){var e,t=tu(this.player(),this.player().reportUserActivity);this.on("touchstart",function(){t(),this.clearInterval(e),e=this.setInterval(t,250)});var r=function(r){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",r),this.on("touchcancel",r)}},t..add(r),r},t.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),y.default.clearTimeout(e)),e},t.s.add(r),r},t.cleval(e)),e},t.requestAnime,1e3/60)},t.requestNamedAnimt(e,i),e}},t.cancelNamedAnimelete(e))},t.cancelAnimimeout(e)},t.clearTimersse_=!1}))},e.registew(t)]=r,r},e.genents_[t]},e}();function tP(e,t,r"+r+").")}(e,i,r.length-1),r[i][t]}function tM(e){var t;return t=void 0===e||0===e.length?{length:0,start:function(){throw Error("This TimeRanges object is ems empty")}}:{length:e.length,start:tP.bind(null,"start",0,e),end:tP.bind(null,"end",1,e)},y.default.Symbol&&y.default.Symbol.iterator&&(t[y.default.Symbol.vae]||"")}tO.prototype.supportsRaf_="function"==typeof y.default.requestAnimationFrame&&"function"==typeof y.default.cancelAnimationFrame,tO.registerComponent("Component",tO),tB.prototype.code=0,tB.prototype.message="",tB.prototype.status=null,tB.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],tB.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var tj=0;tj<tB.errorTypes.length;tj++)tB[tB.errorTypes[tj]]=tj,tB.prototype[tB.errorTypon(e)e.id}})})},tK={textTr.map(tG))},jsonTotTracks()},trackToJson_:tG},tV="vjs-modal-dialog",tq=fentEl_),i}S.default(t,e);var r=t.prototype;return dialog"})}all(this)},r.buiall(this Window")},r.dton."))ened_=!0}s.openedispose()}},rloseablontent())},ld(n.el_alempty")}.content_},r.conditi.focus())},r.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},r.handleKeyDown=function(e){if(e.stopPropagation(),b.default.isEventKey(e,"Escape")&&this.closeable()){e.preventDefault(),this.close();return}if(b.default.isEventKey(e,"Tab")){for(var t,r=this.focusableEls_(),i=this.el_.querySelector(":focus"),n=0;n<r.length;n++)if(i===r[n]){t=n;break}_.default.activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(r[r.length-1].focus(),e.preventDefault()):e.shiftKey||t!==r.length-1||(r[0].focus(),e.preventDefault())}},r.foctable")})},t}(tO);tq.prototype.options_={pauseOnOpen:!0,temporary:!0},tO.registerComponent("ModalDialog",tq);var tW=function(e){function t(t){var r;void 0===t&&(t=[]),(r=e.call(this)||this).tracks_=[],Object.defineProperty(E.default(r),"length",{get:function(){return this.tracks_.length}});for(var i=0;i<t.length;i++)r.addTrack(t[i]);return r}S.default(t,e);var r=t.prototype;return lchange_)},r.ret:this})},r.getTrackById=function(e){for(var t=null,r=0,i=this.length;r<i;r++){var n=this[r];if(n.id===e){t=n;break}}return t},t}(th);for(var tz in tW.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},tW.prototype.allowedEvents_)tW.prototype["on"+tz]=null;var tY=function(e,t){for(var r=0;r<e.length;r++)Object.keys(e[r]).length&&t.id!==e[r].id&&(e[r].enabled=!1)},tX=fing_=!1,r}S.default(t,e);var r=t.prototype;return r.addTrack=function(t){var r=this;t.enabled&&tY(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){r.changing_||(r.changing_=!0,tY(r,t),r.changing_=!1,r.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},r.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)}ected=!1)},tJ=function(e){function t(t){var r;void 0===t&&(t=[]);for(var i=t.length-1;i>=0;i--)if(t[i].selected){tQ(t,t[i]);break}return(r=e.call(this,t)||this).changing_=!1,Object.defineProperty(E.default(r),"selectedIreturn -1},set:function(){}}),r}S.default(t,e);var r=t.prototype;return Change_))},r.rge_=null)},t}(tW),t$=fts)||this}S.default(t,e);var r=t.prototype;return echange_)},r.rchange_))}breakturn t},e}(),t1={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},t2={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},t4={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},t3={disabled:"disabled",hidden:"hidden",showing:"showing"},t5=function(e){function t(t){void 0===t&&(t={}),r=e.call(this)||this;var r,i={id:t.id||"vjs_track_"+e3++,kind:t.kind||"",language:t.language||""},n=t.label||"",a=function(e){Object.defineProperty(E.defaultturn i[e]},set:function(){}})};for(var s in i)a(s);return Object.defineProperty(E.default(r),"label",{get:function(){retchange"))}}),r}return S.default(t,e)n.h}re}reol+t.host},re=Object.freeze({__proto__:null,parseUrl:t6,getAbsoluteURL:t8,getFileExtension:t9,isCrossOrigr.flush()},rr=function(e,t){var r={uri:e},i=t7(e);i&&(r.cors=i);var n="use-credentials"===t.tech_.crossOrigin();n&&(r.withCredentials=n),C.default(r,tu(this,function(e,r,i){if(e)return j.error(e,r);t.loaded_=!0,"function"!=typeof y.default.WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vtn rt(i,t)}):rt(i,t)}))},ri=function(e){function t(t){if(void 0===t&&(t={}),!t.tech)throw Error("A tech was not provided.");var r,i=tL(t,{kind:t4[t.kind]||"subtitles",language:t.language||t.srclang||""}),n=t3[i.mode]||"disabled",a=i.default;("metadata"===i.kind||"chapters"===i.kind)&&(n="hidden"),(r=e.call(this,i)||this).tech_=i.tech,r.cues_=[],r.activeCues_=[],r.preload_=!1!==r.tech_.preloadTextTracks;var s=new t0(r.cues_),o=new t0(r.activeCues_),l=!1,u=tu(E.default(r),function(){!this.tech_.isReady_||this.tech_.isDisposed()||(this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1))});return r.tech_.onepdate",u)}),"disabled"!==n&&r.tech_.on("timeupdate",u),Object.defineProperties(E.default(r),{default:{get:function(){return a},set:function(){}},mode:{get:function(){retchange"))}}d_?s:null},set:function(){}},activeCuenction(){}}}),i.src?(r.src=i.src,r.preload_||(r.loaded_=!0),(r.preload_||"subtitles"!==i.kind&&"captions"!==i.kind)&&rr(r.src,E.default(r))):r.loaded_=!0,r}S.default(t,e);var r=t.prototype;returis.cues_)},r);break}}},t}(t5);ri.prototype.allowedEvents_={cuechange:"cuechange"};var rn=function(e){function t(t){void 0===t&&(t={});var r,i=tL(t,{kind:t2[t.kind]||""});r=e.call(this,i)||this;var n=!1;return Object.defineProperty(E.default(r),"ena{return n},set:function(e){"boolean"!=typeof e||e===n||(n=e,this.trigger("enabledchange"))}}),i.enabled&&(r.enabled=i.enabled),r.loaded_=!0,r}return S.default(t,e),t}(t5),ra=function(e){function t(t){void 0===t&&(t={});var r,i=tL(t,{kind:t1[t.kind]||""});r=e.call(this,i)||this;var n=!1;return Object.defineProperty(E.default(r),"selected",{get:function(){return n},set:function(e){"boolean"!=typeof e||e===n||(n=e,this.trigger("selectedchange"))}}),i.selected&&(r.selected=i.selected),r}return S.default(t,e),t}(t5),rs=function(e){function t(t){void 0===t&&(t={}),r=e.call(this)||this;var r,i,n=new ri(t);return r.kind=n.kind,r.src=n.src,r.srclang=n.language,r.label=n.label,r.default=n.default,Object.defineProperties(E.default(r),{readyState:{get:function(){return i}},track:{get:function(){return n}}}),i=0,n.addEventListener("loadeddata",function(){i=2,r.trigger({type:"load",target:E.default(r)})}),r}return S.default(t,e),t}(th);rs.prototype.allowedEvents_={load:"load"},rs.NONE=0,rs.LOADING=1,rs.LOADED=2,rs.ERROR=3;var ro={audio:{ListClass:tX,TrackClass:rn,capitalName:"Audio"},video:{ListClass:tJ,TrackClass:ra,capitalName:"Video"},text:{ListClass:t$,TrackClass:ri,capitalName:"Text"}};Object.keys(r"Tracks_"});var rl={remoteText:{ListClass:t$,TrackClass:ri,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:tZ,TrackClass:rs,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},ru=T.default({},ro,rl);rl.names=Object.keys(rl),ro.names=Object.keys(ro),ru.names=[].concat(rl.names).concat(ro.names);var rc=function(e){function t(t,r){var i;return void 0===t&&(t={}),void 0===r&&(r=function(){}),t.reportTouchActivity=!1,(i=e.call(this,null,t,r)||this).onDurationChange_=function(e){return i.onDurationChange(e)},i.trackProgress_=function(e){return i.trackProgress(e)},i.trackCurrentTime_=function(e){return i.trackCurrentTime(e)},i.stopTrackingCurrentTime_=function(e){return i.stopTrackingCurrentTime(e)},i.disposeSourceHandler_=function(e){return i.disposeSourceHandler(e)},i.hasStarted_=!1,i.on("playing",function(){this.hasStarted_=!0}),i.on("loadstart",function(){this.hasStarted_=!1}),ru.namterName])}),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Videocks"]=!1)}),!1===t.nativeCaptions||!1===t.nativeTextTracks?i.featuresNativeTextTracks=!1:(!0===t.nativeCaptions||!0===t.nativeTextTracks)&&(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.preloadTextTracks=!1!==t.preloadTextTracks,i.autoRemoteTextTracks_=new ru.text.ListClass,i.initTrackListeners(),t.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}S.default(t,e);var r=t.prototype;return r.triggerceset"})},r.manualrogress_)},r.manualPnChange_)},r.tra()}),500)},r.onDurauration()},n tF(0,0)},r.buffeuration_)},r.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},r.manualTimentTime_)},r.manualTimeentTime_)},r.trackC0})},250)},r.stopTrackingCered:!0})}all(this)},r.cack(n)}})},r.cleanupAutoTrack(r)}},r.reset=function(){},r.crossOrigin=function(){},r.setCrossOrigin=function()is.error_0,0):tF()},r.play=function(){},r.setScrubbing=function(){},r.scrubbing=function(){},r.setCered:!0})},r.initTrack",i)})})},r.addWebVttScript_=function(){var e=this;if(!y.default.WebVTT){if(_.default.body.contains(this.el())){if(!this.options_["vtt.js"]&&W(w.default)&&Object.keys(w.default).length>0){this.trigger("vttjsloaded");return}var t=_.default.createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.onrror=null}),y.default.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)}},r.emulatenge",a)})},r.adrack(a),a},r.createRemotkClass(t)},r.addRemotrack)}),i},r.removeRemoteTrack(e)},r.getVideoPlaybackQuality=function(){return{}},r.requestPictur.reject()},r.disablePictureInPicture=function(){return!0},r.setDisablePictureInPicture=function(){},r.setPoster=function(){},r.playsinline=function(){},r.setPlaysinline=function(){},r.overrideNativeAudioTracks=function(){},r.overrideNativeVideoTracks=function(){},r.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,r){return t.canPlayType(e.type) t||e===t},t.repush(e),r},t.getTech=function(e){if(e){if(t.techs_&&t.techs_[e])return t.techs_[e];if(e=tA(e),y.default&&y.default.videojs&&y.default.videojs[e])return j.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),y.default.videojs[e]}},t}(tO);ru.namateName]}}),rc.prototype.featuresVolumeControl=!0,rc.prototype.featuresMuteControl=!0,rc.prototype.featuresFullscreenResize=!1,rc.prototype.featuresPlaybackRate=!1,rc.prototype.featuresProgressEvents=!1,rc.prototype.featuresSourceset=!1,rc.prototype.featuresTimeupdateEvents=!1,rc.prototype.featuresNativeTextTracks=!1,rc.withSourr_=null)}},tO.registerComponent("Tech",rc),rc.registerTech("Tech",rc),rc.defaultTechOrder_=[];var rd={},r,r,o,s),o}var rv={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},rg={setCurrentTime:1,setMuted:1,setVolume:1},rm={play:[e](t):t}}var r_={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"imagese(urn}return e}var rk=f}return n}return S.default(t,e),t}(tO);tO.registerComponent("MediaLoader",rk);var rC=fnable(),i}S.default(t,e);var r=t.prototype;return xtEl(i),i},r.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},r.createConolTextEl_},r.ctitle",r)},r.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)eyDown_))}KeyDown_)},r.handleLanguagechange=function(){this.controlText(this.controlText_)},r.hrguments)},r.hanl(this,t)},t}(tO);tO.registerComponent("ClickableComponent",rC);var rw=fpdate_),i}S.default(t,e);var r=t.prototype;returnall(this)},ndex:-1})is.hide()ndImage=t},r.h.pause()}},t}(rC);tO.registerComponent("PosterImage",rw);var rA="#222",rL="#ccc",rx={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sa{return}}var rI=function(e){function t(t,r,i){n=e.call(this,t,r,i)||this;var n,a=function(e){return n.updateDisplay(e)};return t.on("loadstart",function(e){return n.toggleDisplay(e)}),t.on("texttrackchange",a),t.on("loadedmetadata",function(e){return n.preselectTrack(e)}),t.ready(tu(E.default(n),function(){if(t.tech_&&t.tech_.featuresNativeTextTracks){this.hide();return}t.on("fullscreenchange",a),t.on("playerresize",a),y.default.addEventListener("orientationchange",a),t.onhange",a)});for(var e=this.options_.playerOptions.tracks||[],r=0;r<e.length;r++)this.player_.addRemoteTextTrack(e[r],!0);this.preselectTrack()})),n}S.default(t,e);var r=t.prototype;return r.presshowing")},r.togis.show()},:"true"})},r.clthis.el_)},r.updTrack(a))},r.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),r=e.activeCues,i=r.length;i--;){var n=r[i];if(n){var a=n.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&rR(a.firstChild,"color",rD(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&rR(a.firstChild,"backgroundColor",rD(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?rR(a,"backgroundColor",rD(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px "+rA+", 2px 2px 4px "+rA+", 2px 2px 5px "+rA:"raised"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px "+rA+", 2px 2px "+rA+", 3px 3px "+rA:"depressed"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px "+rL+", 0 1px "+rL+", -1px -1px "+rA+", 0 -1px "+rA:"uniform"===t.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px "+rA+", 0 0 4px "+rA+", 0 0 4px "+rA+", 0 0 4px "+rA)),t.fontPercent&&1!==t.fontPercent){var s=y.default.parseFloat(a.style.fontSize);a.style.fontSize=s*t.fontPercent+"px",a.style.height="auto",a.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=rx[t.fontFamily])}}},r.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),!("function"!=typeof y.default.WebVTctiveCues}))){for(var t=[],r=0;r<e.length;++r)for(var i=e[r],n=0;n<i.activeCues.length;++n)t.push(i.activeCues[n]);y.default.WebVTT.processCues(y.default,t,this.el_);for(var a=0;a<e.length;++a){for(var s=e[a],o=0;o<s.activeCues.length;++o){var l=s.activeCues[o].displayState;eC(l,"vjs-text-track-cue"),eC(l,"vjs-text-track-cue-"+(s.language?s.language:a)),s.language&&eR(l,"lang",s.language)}this.player_.textTrackSettings&&this.updateDisplayState(s)}}},t}(tO);tO.registerComponent("TextTrackDisplay",rI);var rO=function(e){function t(){return e.apply(this,arguments)||this}return S.default(t,e),t.prototyphild(i),n},t}(tO);tO.registerComponent("LoadingSpinner",rO);var rP=function(e){function t(){return e.apply(this,arguments)||this}S.default(t,e);var r=t.prototype;return xtEl(i),i},this,e,t)isabled")}isabled")},r.handleKeyDown=function(t){if(b.default.isEventKey(t,"Space")||b.default.isEventKey(t,"Enter")){t.stopPropagation();return}e.prototype.handleKeyDown.call(this,t)},t}(rC);tO.registerComponent("Button",rP);var rM=fwn(e)}),i}S.default(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-big-play-button"},r.heout(a,1)},r.hanl(this,t)},r.handleMouseDown=function(e){this.mouseused_=!0},t}(rP);rM.prototype.controlText_="Play Video",tO.registerComponent("BigPlayButton",rM);var rF=flose")),i}S.default(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},r.hbles:!1})},r.hanl(this,t)},t}(rP);tO.registerComponent("CloseButton",rF);var rN=fed(e)}),i}S.default(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},r.h_.pause()},r.halePlay(e)},r.("Pause")},r.ht("Play")},r.heked(e)})},t}(rP);rN.prototype.controlText_="Play",tO.registerComponent("PlayToggle",?"0"+r),rj(e,t)}var rH=fNode_(),i}S.default(t,e);var r=t.prototype;return entEl_),r},r.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},r.updatde_))}}))},r.updateContent=function(e){},t}(tO);rH.prototype.labelText_="Time",rH.prototype.controlText_="Time",tO.registerComponent("TimeDisplay",rH);var rG=function(e){function t(){return e.apply(this,arguments)||this}S.default(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-current-time"},r.updtNode_(t)},t}(rH);rG.prototype.labelText_="Current Time",rG.prototype.controlText_="Current Time",tO.registerComponent("CurrentTimeDisplay",rG);var rK=fata",n),i}S.default(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-duration"},r.updtNode_(t)},t}(rH);rK.prototype.labelText_="Duration",rK.prototype.controlText_="Duration",tO.registerComponent("DurationDisplay",rK);var rV=function(e){function t(){return e.apply(this,arguments)||this}return S.default(t,e),t.prototyphild(r),t},t}(tO);tO.registerComponent("TimeDivider",rV);var rq=function(e){function t(t,r){var i;return(i=e.call(this,t,r)||this).on(t,"durationchange",function(e){return i.updateContent(e)}),i}S.default(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-remaining-time"},entEl_),t},r.updNode_(t)}},t}(rH);rq.prototype.labelText_="Remaining Time",rq.prototype.controlText_="Remaining Time",tO.registerComponent("RemainingTimeDisplay",rq);var rW=fng(e)}),i}S.default(t,e);var r=t.prototype;return entEl_),t},r.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},r.updis.hide()},t}(tO);tO.registerComponent("LiveDisplay",rW);var rz=fdler_)),i}S.default(t,e);var r=t.prototype;return extEl_),t},r.updateLived live"))},r.hiveEdge()}all(this)},t}(rP);rz.prototype.controlText_="Seek to live, currently playing live",tO.registerComponent("SeekToLive",e))?t:e))},rX=fnable(),i}S.default(t,e);var r=t.prototype;return r.enabled=function(){return this.enabled_bled_=!0)}bled_=!1}},is,t,r,i)},r.handlove(e,!0)},r.handleMouseMove=function(e){},r.han.update()},r.update=function(){var e=this;if(!(!this.el_||!this.bar)){var t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slided(2)+"%"})),t}},r.gFixed(4))},r.calcula)?t.y:t.x},r.hanl(this,t)},r.handleClick=function(e){e.stopPropagation(),e.preventDefault()},izontal")},t}(tO);tO.registerComponent("Slider",ed(2)+"%"},rJ=fte(e)}),i}S.default(t,e);var r=t.prototype;return ageEl_),t}all(this).length})},t}(tO);tO.registerComponent("LoadProgressBar",rJ);var r$=function(e){function t(t,r){var i;return(i=e.call(this,t,r)||this).update=tc(tu(E.default(i),i.update),30),i}S.default(t,e);var r=t.prototype;return r.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})write(r)}},r.write=function(e){eE(this.el_,e)},r.,i&&i()})},t}(tO);tO.registerComponent("TimeTooltip",r$);var rZ=function(e){function t(t,r){var i;return(i=e.call(this,t,r)||this).update=tc(tu(E.default(i),i.update),30),i}S.default(t,e);var r=t.prototype;return r.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})e(e,t,i)}},t}(tO);rZ.prototype.options_={children:[]},eh||Z||rZ.prototype.options_.children.push("timeTooltip"),tO.registerComponent("PlayProgressBar",rZ);var r0=function(e){function t(t,r){var i;return(i=e.call(this,t,r)||this).update=tc(tu(E.default(i),i.update),30),i}S.default(t,e);var r=t.prototype;return r.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})*t+"px"})},t}(tO);r0.prototype.options_={children:["timeTooltip"]},tO.registerComponent("MouseTimeDisplay",r0);var r1=flers_(),i}S.default(t,e);var r=t.prototype;return r.setEvenibility_)},r.toggleVupdate())},r.enabldate,30))},r.disablval=null)},s Bar")})},r.update=function(t){var r=this;if("hidden"!==_.default.visibilityState){var i=e.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBogress())}),i}},rntTime(e)},r.getCuentTime()},r.ation(),e},r.handl(this,t))},r.handlSeek_(r)}},r.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()}&t.hide()},r.hanupdate_()},r.sTime()+5)},Time()-5)},r.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},r.handleKeyDown=function(t){var r=this.player_.liveTracker;if(b.default.isEventKey(t,"Space")||b.default.isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(b.default.isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if(b.default.isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),r&&r.isLive()?this.userSeek_(r.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(b.default(t))){t.preventDefault(),t.stopPropagation();var i=(b.default.codes[b.default(t)]-b.default.codes["0"])*10/100;r&&r.isLive()?this.userSeek_(r.seekableStart()+r.liveWindow()*i):this.userSeek_(this.player_.duration()*i)}else b.default.isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):b.default.isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):e.prototype.handleKeyDown.call(this,t)}all(this)},t}(rX);r1.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},eh||Z||r1.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),tO.registerComponent("SeekBar",r1);var r2=function(e){function t(t,r){var i;return(i=e.call(this,t,r)||this).handleMouseMove=tc(tu(E.default(i),i.handleMouseMove),30),i.throttledHandleMouseSeek=tc(tu(E.default(i),i.handleMouseSeek),30),i.handleMouseUpHandler_=function(e){return i.handleMouseUp(e)},i.handleMouseDownHandler_=function(e){return i.handleMouseDown(e)},i.enable(),i}S.default(t,e);var r=t.prototype;return r.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},r.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var r=t.getChild("playProgressBar"),i=t.getChild("mouseTimeDisplay");if(!(!r&&!i)){var n=t.el(),a=eF(n),s=eN(n,e).x;s=rY(s,0,1),i&&i.update(a,s),r&&r.update(a,t.getProgress())}}},r.handlseMove(e)},r.enabled=function(){return this.enabled_}.play())}bled_=!0)},r.removeListenersAddedOnMousedownAndHandler_)},r.handlHandler_)},r.hanchstart()},t}(tO);r2.prototype.options_={children:["seekBar"]},tO.registerComponent("ProgressControl",r2);var r4=fsable(),i}S.default(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-picture-in-picture-control "+e.prototype.buildCSSClass.call(this)},r.handlePictureInPictureEnadisable()},r.handlePictureInPicdChange()},r.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},t}(rP);r4.prototype.controlText_="Picture-in-Picture",tO.registerComponent("PictureInPictureToggle",r4);var r3=fsable(),i}S.default(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},r.handleFullsclscreen")},r.hlscreen()},t}(rP);r3.prototype.controlText_="Fullscreen",tO.registerComponent("FullscreenToggle",r3);var r5=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},r6=function(e){function t(){return e.apply(this,arguments)||this}return S.default(t,e),t.prototypext"})),t},t}(tO);tO.registerComponent("VolumeLevel",r6);var r8=function(e){function t(t,r){var i;return(i=e.call(this,t,r)||this).update=tc(tu(E.default(i),i.update),30),i}S.default(t,e);var r=t.prototype;return :"true"})te(i+"%")},r.write=function(e){eE(this.el_,e)},r.up,n&&n()})},t}(tO);tO.registerComponent("VolumeLevelTooltip",r8);var r9=function(e){function t(t,r){var i;return(i=e.call(this,t,r)||this).update=tc(tu(E.default(i),i.update),30),i}S.default(t,e);var r=t.prototype;return isplay"})*t+"px"})},t}(tO);r9.prototype.options_={children:["volumeLevelTooltip"]},tO.registerComponent("MouseVolumeLevelDisplay",r9);var r7=ftes()}),i}S.default(t,e);var r=t.prototype;return polite"})},r.handll(this,t)},r.handlance(e)))},r.muted(!1)},r..volume()},r.sume()+.1)},ume()-.1)},r.updateARIAt",t+"%")},r.volumeAsPvolume())},r.updateLume_(t)})},t}(rX);r7.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},eh||Z||r7.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),r7.prototype.playerEvent="volumechange",tO.registerComponent("VolumeBar",r7);var ie=function(e){function t(t,r){var i;return void 0===r&&(r={}),r.vertical=r.vertical||!1,(void 0===r.volumeBar||W(r.volumeBar))&&(r.volumeBar=r.volumeBar||{},r.volumeBar.vertical=r.vertical),i=e.call(this,t,r)||this,r5(E.default(i),t),i.throttledHandleMouseMove=tc(tu(E.default(i),i.handleMouseMove),30),i.handleMouseUpHandler_=function(e){return i.handleMouseUp(e)},i.on("mousedown",function(e){return i.handleMouseDown(e)}),i.on("touchstart",function(e){return i.handleMouseDown(e)}),i.on("mousemove",function(e){return i.handleMouseMove(e)}),i.on(i.volumeBar,["focus","slideractive"],function(){i.volumeBar.addClass("vjs-slider-active"),i.addClass("vjs-slider-active"),i.trigger("slideractive")}),i.on(i.volumeBar,["blur","slidernactive")}),i}S.default(t,e);var r=t.prototype;return rol "+t})},r.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},r.hanHandler_)},r.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(tO);ie.prototype.options_={children:["volumeBar"]},tO.registerComponent("VolumeControl",idden")})},ir=function(e){function t(t,r){var i;return i=e.call(this,t,r)||this,it(E.default(i),t),i.on(t,["loadstart","volumechange"],function(e){return i.update(e)}),i}S.default(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},r.h.muted())olText_()},r.u-vol-"+t)},r.updateCoolText(e)},t}(rP);ir.prototype.controlText_="Mute",tO.registerComponent("MuteToggle",ir);var ii=fctive_),i}S.default(t,e);var r=t.prototype;return r.sliderActive_=function(){this.addClass("vjs-slider-active")},r.sliderInactive_=function(){this.removeClass("vjs-slider-active")},r.volumePle-only")},rol "+t})},r.dispose=function(){this.handleMouseOut(),e.prototype.dispose.call(this)},r.handleVolumeCoe.focus()},r.handleMouseOver=function(e){this.addClass("vjs-hover"),ti(_.default,"keyup",this.handleKeyPressHandler_)},r.handleMouseOut=function(e){this.removeClass("vjs-hover"),tn(_.default,"keyup",this.handleKeyPressHandler_)},r.handouseOut()},t}(tO);ii.prototype.options_={children:["muteToggle","volumeControl"]},tO.registerComponent("VolumePanel",ii);var ia=fick(e)},i}S.default(t,e);var r=t.prototype;return r.addEventListenerForItem=function(e){e instanceof tO&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},r.removeEventListepClick_))},r.rl(this,t)}orItem(t)},ion()}),r},r.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,e.prototype.dispose.call(this)},r.Button()}},r.handfocus()}}},r.hanepBack())},r.s.focus(e)},.focus(e.focus())},t}(tO);tO.registerComponent("Menu",ia);var is=function(e){function t(t,r){void 0===r&&(r={}),(i=e.call(this,t,r)||this).menuButton_=new rP(t,r),i.menuButton_.controlText(i.controlText_),i.menuButton_.el_.setAttribute("aria-haspopup","true");var i,n=rP.prototype.buildCSSClass();i.menuButton_.el_.className=i.buildCSSClass()+" "+n,i.menuButton_.removeClass("vjs-control"),i.addChild(i.menuButton_),i.update(),i.enabled_=!0;var a=function(e){return i.handleClick(e)};return i.handleMenuKeyUp_=function(e){return i.handleMenuKeyUp(e)},i.on(i.menuButton_,"tap",a),i.on(i.menuButton_,"click",a),i.on(i.menuButton_,"keydown",function(e){return i.handleKeyDown(e)}),i.on(i.menuButton_,"mnuKeyUp_)}),i.on("mouseleave",function(e){return i.handleMouseLeave(e)}),i.on("keydown",function(e){return i.handleSubmenuKeyDown(e)}),i}S.default(t,e);var r=t.prototype;returis.show()},r.;return e},r.createItems=function(){},ss()},{})},r.buildWrappall(this)},r.buiall(this)},r.cText(e,t)}all(this)},r.hsButton()},r.handlenuKeyUp_)},r.focus=function(){this.menuButton_.focus()},r.blur=function(){this.menuButton_.blur()},r.hanutton()))},r.handls-hover")},r.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},r.handleSubmfocus()))},r.p.focus())},r.unp"false"))}disable().enable()},t}(tO);tO.registerComponent("MenuButton",is);var io=function(e){function t(t,r){var i,n=r.tracks;if((i=e.call(this,t,r)||this).items.length<=1&&i.hide(),!n)return E.default(i);var a=tu(E.default(i),i.update);return n.addEventListener("removetrack",a),n.addEventListener("addtrack",a),n.addEventListener("labelchange",a),i.player_.on("ready",a),i.player_.on("dispose",function(){n.removeEventListener("removetrack",a),n.removeEventListener("addtrack",a),n.removeEventListener("labelchange",a)}),i}return S.default(t,e),t}(is);tO.registerComponent("TrackButton",io);var il=["Tab","Esc","Up","Down","Right","Left"],iu=fuitem"),i}S.default(t,e);var r=t.prototype;return lder")),n},r.hanl(this,t)},r.handleClick=function(e){this.selected(!0)},ted_=!1))},t}(rC);tO.registerComponent("MenuItem",iu);var ic=function(e){function t(t,r){var i,n,a=r.track,s=t.textTracks();r.label=a.label||a.language||"Unknown",r.selected="showing"===a.mode,(n=e.call(this,t,r)||this).track=a,n.kinds=(r.kinds||[r.kind||n.track.kind]).filter(Boolean);var o=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n.handleTracksChange.apply(E.default(n),t)},l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];n.handleSelectedLanguageChange.apply(E.default(n),t)};return t.on(["loadstart","texttrackchange"],o),s.addEventListener("change",o),s.addEventListener("selectedlanguagechange",l),n.onhange",l)}),void 0===s.onchange&&n.on(["taphEvent(i)}),n.handleTracksChange(),n}S.default(t,e);var r=t.prototype;return r.habled"))}},r.handleTrlected(t)},r.handleSelectedLangk.kind})}},r.dispose=function(){this.track=null,e.prototype.dispose.call(this)},t}(iu);tO.registerComponent("TextTrackMenuItem",ic);var id=f,r)||this}S.default(t,e);var r=t.prototype;return r.handleTrlected(r)},r.handleSelectedLangbled:!1})},t}(ic);tO.registerComponent("OffTextTrackMenuItem",id);var ih=function(e){function t(t,r){return void 0===r&&(r={}),r.tracks=t.textTracks(),e.call(this,t,r)||this}return S.default(t,e),t.prototype.c}return e},t}(io);tO.registerComponent("TextTrackButton",ih);var ip=function(e){function t(t,r){var i,n=r.track,a=r.cue,s=t.currentTime();return r.selectable=!0,r.multiSelectable=!1,r.label=a.text,r.selected=a.startTime<=s&&s<a.endTime,(i=e.call(this,t,r)||this).track=n,i.cue=a,n.addEventListener("cuechange",tu(E.default(i),i.update)),i}S.default(t,e);var r=t.prototype;return r.htartTime).endTime)},t}(iu);tO.registerComponent("ChaptersTrackMenuItem",ip);var iv=function(e){function t(t,r,i){return e.call(this,t,r,i)||this}S.default(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)all(this)},ndler_)}}},r.findChareturn r}},r.getMs.kind_))},r.all(this)},r.c}return e},t}(ih);iv.prototype.kind_="chapters",iv.prototype.controlText_="Chapters",tO.registerComponent("ChaptersButton",iv);var ig=function(e){function t(t,r,i){n=e.call(this,t,r,i)||this;var n,a=t.textTracks(),s=tu(E.default(n),n.handleTracksChange);return a.addEventListener("change",s),n.on("dispose",function(){a.removeEventListener("change",s)}),n}S.default(t,e);var r=t.prototype;return r.handleTr.enable()},r.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(ih);ig.prototype.kind_="descriptions",ig.prototype.controlText_="Descriptions",tO.registerComponent("DescriptionsButton",ig);var im=function(e){function t(t,r,i){return e.call(this,t,r,i)||this}S.default(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(ih);im.prototype.kind_="subtitles",im.prototype.controlText_="Subtitles",tO.registerComponent("SubtitlesButton",im);var iy=fialog"),i}return S.default(t,e),t.prototype.h").open()},t}(ic);tO.registerComponent("CaptionSettingsMenuItem",iy);var i_=f,i)||this}S.default(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},r.cl(this,t)},t}(ih);i_.prototype.kind_="captions",i_.prototype.controlText_="Captions",tO.registerComponent("CaptionsButton",i_);var iT=function(e){function t(){return e.apply(this,arguments)||this}return S.default(t,e),t.prototype.createEl=function(t,r,i){var n=e.prototype.createEl.call(this,t,r,i),a=n.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(a.appendChild(eb("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(eb("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),n},t}(ic);tO.registerComponent("SubsCapsMenuItem",iT);var ib=fabel_)),i}S.default(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},r.chis,t,iT)},t}(ih);ib.prototype.kinds_=["captions","subtitles"],ib.prototype.controlText_="Subtitles",tO.registerComponent("SubsCapsButton",ib);var iE=function(e){function t(t,r){var i,n=r.track,a=t.audioTracks();r.label=n.label||n.language||"Unknown",r.selected=n.enabled,(i=e.call(this,t,r)||this).track=n,i.addClass("vjs-"+n.kind+"-menu-item");var s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];i.handleTracksChange.apply(E.default(i),t)};return a.addEventListener("change",s),i.on("dispose",function(){a.removeEventListener("change",s)}),i}S.default(t,e);var r=t.prototype;return s")}))),n},r.hs.track)}},r.handleTr.enabled)},t}(iu);tO.registerComponent("AudioTrackMenuItem",iE);var iS=f,r)||this}S.default(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},r.c}return e},t}(io);iS.prototype.controlText_="Audio Track",tO.registerComponent("AudioTrackButton",iS);var ik=fte(e)}),i}S.default(t,e);var r=t.prototype;return r.hhis.rate)his.rate)},t}(iu);ik.prototype.contentElType="button",tO.registerComponent("PlaybackRateMenuItem",ik);var iC=fge(e)}),i}S.default(t,e);var r=t.prototype;return belEl_),t},r.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},r.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},r.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},r.c;return t},r.updateARIAckRate())},r.hate(r[i])},r.handlePlaybackR.update()},r.plates()||[]},r.playbackRat.length>0},r.update-hidden")},r.ute()+"x")},t}(is);iC.prototype.controlText_="Playback Rate",tO.registerComponent("PlaybackRateMenuButton",iC);var iw=function(e){function t(){return e.apply(this,arguments)||this}S.default(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},is,t,r,i)},t}(tO);tO.registerComponent("Spacer",iw);var iA=function(e){function t(){return e.apply(this,arguments)||this}S.default(t,e);var r=t.prototype;return r.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},:"\xa0"})},t}(iw);tO.registerComponent("CustomControlSpacer",iA);var iL=function(e){function t(){return e.apply(this,arguments)||this}return S.default(t,e),t.prototypr:"ltr"})},t}(tO);iL.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in _.default&&iL.prototype.options_.children.splice(iL.prototype.options_.children.length-1,0,"pictureInPictureToggle"),tO.registerComponent("ControlBar",iL);var ix=fen(e)}),i}S.default(t,e);var r=t.prototype;return r.buiall(this)}ssage):""},t}(tq);ix.prototype.options_=T.default({},tq.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),tO.registerComponent("ErrorDisplay",ix);var iD="vjs-text-track-settings",iR=["#000","Black"],iI=["#00F","Blue"],iO=["#0FF","Cyan"],iP=["#0F0","Green"],iM=["#F0F","Magenta"],iF=["#F00","Red"],iN=["#FFF","White"],iB=["#FF0","Yellow"],ij=["1","Opaque"],iU=["0.5","Semi-Transparent"],iH=["0","Transparent"],iG={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[iR,iN,iF,iP,iI,iB,iM,iO]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[ij,iU,iH]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[iN,iR,iF,iP,iI,iB,iM,iO]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],defaulNumber(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[ij,iU]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[i)return e}iG.windowColor.options=iG.backgroundColor.options;var iV=function(e){function t(t,r){var i;return r.temporary=!1,(i=e.call(this,t,r)||this).updateDisplay=i.updateDisplay.bind(E.default(i)),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=eb("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),void 0===r.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",function(){i.saveSettings(),i.close()}),i.on(i.$(".vjs-default-buttonDisplaeDisplay)}),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}S.default(t,e);var r=t.prototype;returnall(this)},r.creat.join("")},r.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},r.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},r.createE.join("")},r.creatoin("")})},r.creoin("")})},r.createEoin("")})}trols_()]},r.label=function(){return this.localize("Caption Settings Dialog")},r.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},r.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},r],r)},{})},r.setValues=function(e){var t=this;K(iG,funci;break}}})(t.$(r.selector),e[i],r.parser)})},r.sIndex=r})},r.restoValues(e)},r.sawarn(e)}}},r.updDisplay()},r.conditr.focus()},t}(tq);tO.registerComponent("TextTrackSettings",iV);var iq=function(e){function t(t,r){var i,n=r.ResizeObserver||y.default.ResizeObserver;null===r.ResizeObserver&&(n=!1);var a=tL({createEl:!n,reportTouchActivity:!1},r);return(i=e.call(this,t,a)||this).ResizeObserver=r.ResizeObserver||y.default.ResizeObserver,i.loadListener_=null,i.resizeObserver_=null,i.debouncedHHandler()},100,!1,E.default(i)),n?(i.resizeObserver_=new i.ResizeObserver(i.debouncedHandler_),i.resizeObserver_.observe(t.el())):(i.loasize",e)}},i.one("load",i.loadListener_)),i}S.default(t,e);var r=t.prototype;return :"true"})},r.resrresize")}all(this)},t}(tO);tO.registerComponent("ResizeManager",iq);var iW={trackingThreshold:20,liveTolerance:15},iz=fhange_),i}S.default(t,e);var r=t.prototype;return r.handleVisibiacking())},r.trackLive_=function(){var e=this.player_.seekable();if(!(!e||!e.length)){var t=Number(y.default.performance.now().toFixed(4)),r=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+r;var i=this.liveCurrentTime(),n=this.player_.currentTime(),a=this.player_.paused()||this.seekedBehindLive_||Math.abs(i-n)>this.options_.liveTolerance;this.timeupdateSeen_&&i!==1/0||(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}},r.handleDurationchange=function(){this.toggleTracking()},r.toggacking())},r.stapdate_)))},r.handleFirsteSeeked_)},r.hackLive_()},r.iveEdge_)iveEdge_)},r.nextSeekmUser_=!0},r.stchange"))},r.sth-1]:1/0},r.seert()[0]:0},r.leStart()racking()},r.iveEdge()},r.liveCableEnd()},r.ptSeekEnd_},r.behindLiveEdge=function(){return this.behindLiveEdge_},r.Interval_},r.seektTime()))}all(this)},t}(tO);tO.registerComponent("LiveTracker",et(n),!0)},iX=Object.defineProperty({},"innerinneinnerable=!0,r},iJ=function(e){var t=e.el();if(!t.resetSourceWatch_){var r={},i=iQ([e.el(),y.default.HTMLMediaElement.prototype,y.default.Element.prototype,iX],"inn iY(e),s}};["append","appendChild","insertAdjacentHTML=n(r[e]))}),Object.defineProperty(t,"innerHTML",tL(i,{set:n(i.set)})),t.resetSorHTML",i)},e.one("sourceset",t.resetSourceWatch_)}},i$=Object.defineProperty({},src"src",e),e}}),iZ=function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var r=iQ([e.el(),y.default.HTMLMediaElement.prototype,i$],"src"),i=t.setAttribute,n=t.load;Object.defineProperty(t,"src"(t.src),n}})),t.se(t.src),iJ(e)),r},t.currentSrc?e.triggerSourceset(t.currentSrc):iY(e)||iJ(e),t.reseteWatchty(e,t,a)},i1=function(e){function t(t,r){i=e.call(this,t,r)||this;var i,n=t.source,a=!1;if(n&&(i.el_.currentSrc!==n.src||t.tag&&3===t.tag.initNetworkState_)?i.setSource(n):i.handleLateInit_(i.el_),t.enableSourceset&&i.setupSourcesetHandling_(),i.isScrubbing_=!1,i.el_.hasChildNodes()){for(var s=i.el_.childNodes,o=s.length,l=[];o--;){var u=s[o];"track"===u.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(u),i.remoteTextTracks().addTrack(u.track),i.textTracks().addTrack(u.track),!a&&!i.el_.hasAttribute("crossorigin")&&t7(u.src)&&(a=!0)):l.push(u))}for(var c=0;c<l.length;c++)i.el_.removeChild(l[c])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&a&&j.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),i.restoreMetadataTracksInIOSNativePlayer_(),(eu||ed||et)&&!0===t.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}S.default(t,e);var r=t.prototype;returnall(this)},r.setupSourcese{iZ(this)},r.restoreMetadataTracksInIOSNatnge",i)})},r.overrType_(i)}},r.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},r.overrideNativeVVideo",e)},r.proxyNativeTracksForType_=function(e){var t=this,r=ro[e],i=this.el()[r.getterName],n=this[r.getterName]();if(!(!this["featuresNative"+r.capitalName+"Tracks"]||!i||!i.addEventListener)){varrigger(i)},addtrack:function(e){n.addTrack(e.track)},r(e..shift())};this[r.getterName+"Listeners_"]=a,Object.keys(er(e,r)})}),this.on("loadstart",s),this.onstart",s)})}},r.proxyNatype_(t)})},r.createEl=function(){var e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){var r=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(r,e),t.disposeMediaElement(e),e=r}else{e=_.default.createElement("video");var i=tL({},this.options_.tag&&ex(this.options_.tag));eu&&!0===this.options_.nativeControlsForTouch||delete i.controls,eL(e,V(i,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&eR(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);for(var n=["loop","muted","playsinline","autoplay"],a=0;a<n.length;a++){var s=n[a],o=this.options_[s];void 0!==o&&(o?eR(e,s,s):eI(e,s),e[s]=o)}return e},r.handleLateInit_=function(e){if(!(0===e.networkState||3===e.networkState)){if(0===e.readyState){var t=!1,r=function(){t=!0};this.on("loadstartadstart")};this.on("loadedmetadata",i),adstart")});return}var n=["loadstart"];n.push("loadedmetadata"),e.readyState>=2&&n.push("loadeddata"),e.readyState>=3&&n.push("canplay"),e.readyState>=4&&n.push("canplaythrough"),e)},this)})}},r.seubbing_=e},r.scrubbing=function(){return this.isScrubbing_},r.setCeo.js)")}},tion||NaN},r.width=function(){return this.el_.offsetWidth},r.height=function(){return this.el_.offsetHeight},r.proxyWebkitFen",t)})}},r.supports}return!1},r.enterrror",e)}},r.exitlScreen()},r.requestPictureInPicture=function(){return this.el_.requestPictureInPictursetSrc(ethis.el_)},r.urrentSrc},r.strols=!!e},r.adis,t,r,i)},r.createRemot=t.src),r},r.addRemothild(i),i},r.removeRemotild(r[i])},r.getVideoPlaybnStart),e},t}(rc);i0(i1,ild(t),e}}),i1.iPlayType)},i1.cayType(e)},i1.cane(e.type)},i1.canConreturn!1}},i1.canreturn!1}},i1.canControlPlreturn!1}},i1.canOverride}return!0},i1.supportsNativef||eh&&en},i1.supportsNativeVideoTracks=function(){return!!(i1.TEST_VID&&i1.TEST_VID.videoTracks)},i1.supportsNativeAioTracks)},i1.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"r]()},!0)}),i1.prototype.featuresVolumeControl=i1.canControlVolume(),i1.prototype.movingMediaElementInDOM=!eh,i1.prototype.featuresFullscreenResize=!0,i1.prototype.featuresProgressEvents=!0,i1.prototype.featuresTimeupdateEvents=!0,i1.patchCthis,e)})},i1.unpatchCType=n),e},i1.patchCanPlayType(),i1.disposeMe(e){}}()}},i1.resetMe(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinlineibute(e)}}),["muted","defaultMuted","autoplay","loop","playsinlineibute(e)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigins.el_[e]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOriginel_[e]=t}}),["pause","load","playel_[e]()}}),rc.withSourceHandlers(i1),i1.nativeSourceHandler={},i1.nativeSourceHandler.creturn""}},i1.nativeSourceHandler.canHa}return""},i1.nativeSourceHandler.harc(e.src)},i1.nativeSourceHandler.dispose=function(){},i1.registerSourceHandler(i1.nativeSourceHandler),rc.registerTech("Html5",i1);var i2=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],i4={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},i3=["tiny","xsmall","small","medium","large","xlarge","huge"],i5={};ayout-"+t});var i6={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},i8=function(e){function t(r,i,n){if(r.id=r.id||i.id||"vjs_video_"+e3++,(i=V(t.getTagSettings(r),i)).initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language){if("function"==typeof r.closest){var a,s=r.closest("[lang]");s&&s.getAttribute&&(i.language=s.getAttribute("lang"))}else for(var o=r;o&&1===o.nodeType;){if(ex(o).hasOwnProperty("lang")){i.language=o.getAttribute("lang");break}o=o.parentNode}}if((a=e.call(this,null,i,n)||this).boundDocumentFullscreenChange_=function(e){return a.documentFullscreenChange_(e)},a.boundFullWindowOnEscKey_=function(e){return a.fullWindowOnEscKey(e)},a.boundUpdateStyleEl_=function(e){return a.updateStyleEl_(e)},a.boundApplyInitTime_=function(e){return a.applyInitTime_(e)},a.boundUpdateCurrentBreakpoint_=function(e){return a.updateCurrentBreakpoint_(e)},a.boundHandleTechClick_=function(e){return a.handleTechClick_(e)},a.boundHandleTechDoubleClick_=function(e){return a.handleTechDoubleClick_(e)},a.boundHandleTechTouchStart_=function(e){return a.handleTechTouchStart_(e)},a.boundHandleTechTouchMove_=function(e){return a.handleTechTouchMove_(e)},a.boundHandleTechTouchEnd_=function(e){return a.handleTechTouchEnd_(e)},a.boundHandleTechTap_=function(e){return a.handleTechTap_(e)},a.isFullscreen_=!1,a.log=U(a.id_),a.fsApi_=O,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,a.debugEnabled_=!1,!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=r,a.tagAttributes=r&&ex(r),a.language(a.options_.language),i.languages){var l={};Object.getOwnPropertyNames(i.languageguages[e]}),a.languages_=l}else a.languages_=t.prototype.options_.languages;a.resetCache_(),a.poster_=i.poster||"",a.controls_=!!i.controls,r.controls=!1,r.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],r.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),i.plugins&&Object.keys(i.plugint exist')}),a.scrubbing_=!1,a.el_=a.createEl(),tS(E.default(a),{eventBusKey:"el_"}),a.fsApi_.requestFullscreen&&(ti(_.default,a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_),a.on(a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_)),a.fluid_&&a.on(["playerreset","resize"],a.boundUpdateStyleEl_);var u=tL(a.options_);i.plugins&&Object.keys(i.pluginugins[e])}),i.debug&&a.debug(!0),a.options_.playerOptions=u,a.middleware_=[],a.playbackRates(i.playbackRates),a.initChildren(),a.isAudio("audio"===r.nodeName.toLowerCase()),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),eu&&a.addClass("vjs-touch-enabled"),eh||a.addClass("vjs-workinghover"),t.players[a.id_]=E.default(a);var c=x.split(".")[0];return a.addClass("vjs-v"+c),a.userActive(!0),a.reportUserActivity(),a.one("play",function(e){return a.listenForUserActivity_(e)}),a.on("stageclick",function(e){return a.handleStageClick_(e)}),a.on("keydown",function(e){return a.handleKeyDown(e)}),a.on("languagechange",function(e){return a.handleLanguagechange(e)}),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a}S.default(t,e);var r=t.prototype;return r.dispose=function(){var r=this;this.trigger("dispose"),this.off("dispose"),tn(_.default,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),tn(_.default,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),rh[this.id()]=null,ru.nam&&t.off()}),e.prototype.dispose.call(this)},s.el_=t,t},r.crigin",e)},r.width=function(e){return this.dimension("width",e)eight",e)},rtyleEl_(tyleEl_js-fill")},r.atyleEl_()},r.updateStyleEl_=function(){if(!0===y.default.VIDEOJS_NO_DYNAMIC_STYLE){var e,t,r,i="number"==typeof this.width_?this.width_:this.options_.width,n="number"==typeof this.height_?this.height_:this.options_.height,a=this.tech_&&this.tech_.el();a&&(i>=0&&(a.width=i),n>=0&&(a.height=n));return}var s=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),o=s[1]/s[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/o:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*o,r=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(r),e4(this.styleEl_,`
      .`+r+` {
        width: `+e+`px;
        height: `+t+`px;
      }

      .`+r+`.vjs-fluid {
        padding-top: `+100*o+`%;
      }
    `)},rtag=null)},r.umTech_=!1},r.tech=function(e){return void 0===e&&j.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_},r.addTechControlsTechTap_)},r.removeTechControlsleClick_)},r.handleChange_()},r.handleTechtoplay())},r.manualAutoplay_=function(e){var t=this;if(!(!this.tech_||"string"!=typeof ee||""))})};if("any"!==e||this.muted()?r="muted"!==e||this.muted()?this.play():i():tU(r=this.play())&&(r=r.catch(i)),tU(r))return r.then(function(){t.trigger({type:"autoplay-success",autoplay:e})}).catch(function(){t.trigger({type:"autoplay-failure",autoplay:e})})}},r.updateSouhe_.src=t},r.handleTechrceset"})},r.tarted"))},r.handlr("play")},r.handleTechRechange")},r.handleTete",r))})},r.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},r.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},r.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},r.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},r.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},r.handleTechrstplay")},r.handle("pause")},r.handle("ended")},r.handleTechDuratration"))},r.handle.pause())},r.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modae.target)})||(void 0===this.options_||void 0===this.options_.userActions||void 0===this.options_.userActions.doubleClick||!1!==this.options_.userActions.doubleClick)&&(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},r.handActive())},r.handleTechTrActive()},r.handleTechctivity()},r.handleTecDefault()},r.handleStageClick_=function(){this.reportUserActivity()},r.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},r.documentFullscreenChange_=function(e){var t=e.target.player;if(!(t&&t!==this)){var r=this.el(),i=_.default[this.fsApi_.fullscreenElement]===r;!i&&r.matches?i=r.matches(":"+this.fsApi_.fullscreen):!i&&r.msMatchesSelector&&(i=r.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(i)}},r.handleTechFullscrlscreen))},r.handleTechFullscerror",t)},r.togglePictureInPicpicture")},r.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},r.handleTechLeavePicturecture(!1)},r.handle.error(e)},r.handleTectdata",e)},r.getCache=function(){return this.cache_},r.rvolume:1}},r),e}},!0)},r.techGet_=function(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in rv){var t,r;return t=this.middleware_,r=this.tech_,t.reduceRight(ry(e),r[e]())}if(e in rm)return rp(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){throw void 0===this.tech_[e]?j("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t):"TypeError"===t.name?(j("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1):j(t),ts.play_()},r.play_=function(e){var t=this;void 0===e&&(e=tH),this.playCallbacks_.push(e);var r=!!(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!r){this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!r&&(ef||eh)&&this.load();return}var i=this.techGet_("play");null===i?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)},r.runPlayTermin(e){e()})},r.runPlayt){t(e)})},r.pause=function(){this.techCall_("pause")"paused")||tF(0,0)},rrubbing")},r.crrentTime},r.applinitTime)},change"))},r.rementTime()},r.remainingTntTime())},F(0,0)),e},r.bufferation())},r.b&&(r=t),re")))?1:ted")||!1},r.deted")||!1},r.lastVolume},r.supportseen")||!1},r.isllscreen_},r.requestHelper_()},r.requestFullscreenHelper_=function(e){var t,r=this;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){var i=this.el_[this.fsApi_.requestFullscreen](t);return i&&i.then(function(){return r.isFullscreen(!0)},function(){return r.isFullscreen(!1)}),i}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},r.exitHelper_()},r.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var t=_.default[this.fsApi_.exitFullscreen]();return t&creen(!1)})),t}this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},r.enterlWindow")},r.fullWindscreen())},r.exitlWindow")},r.disablePicturchanged")},r.isInPicturnPicture_},r.requestPicturPicture")},r.exitPicturPicture()},r.handleKeyDown=function(e){var t,r,i=this.options_.userActions;!(!i||!i.hotkeys)&&(r=(t=this.el_.ownerDocument.activeElement).tagName.toLowerCase(),(t.isContentEditable?0:"input"===r?-1!==["button","checkbox","hidden","radio","reset","submit"].indexOf(t.type):-1===["textarea"].indexOf(r))&&("function"==typeof i.hotkeys?i.hotkeys.call(this,e):this.handleHotkeys(e)))},r.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},r=t.fullscreenKey,i=void 0===r?function(e){return b.default.isEventKey(e,"f")}:r,n=t.muteKey,a=ey(e,"m")}:n,s=t.playPauseKey,o=,"Space")}:s;if(i.call(this,e)){e.preventDefault(),e.stopPropagation();var l=tO.getComponent("FullscreenToggle");!1!==_.default[this.fsApi_.fullscreenEnabled]&&l.prototype.handleClick.call(this,e)}else a.call(this,e)?(e.preventDefault(),e.stopPropagation(),tO.getComponent("MuteToggle").prototype.handleClick.call(this,e)):o.call(this,e)&&(e.preventDefault(),e.stopPropagation(),tO.getComponent("PlayToggle").prototype.handleClick.call(this,e))},r.c}return""},r.selectSource=function(e){var t=this,r=this.options_.tectTech(e)ch.n!r,tech:i}};return(this.options_.sourceOrn n(t,e)}):i(r,e,n))||!1},r.handleSrc_=function(e,t){var r=this;if(void 0===e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var i=rE(e);if(!i.length){this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0);return}if(this.changingSrc_=!0,t||(this.cache_.sources=i),this.updateSourceCac,r,e)},1)}(this,i[0],function(e,n){if(r.middleware_=n,t||(r.cache_.sources=i),r.updateSourceCaches_(e),r.src_(e))return i.length>1?r.handleSrc_(i.slice(1)):(r.changingSrc_=!1,r.essage)})},0),void r.triggeTech(t)})})(n,r.tech_)}),this.options_.retryOnError&&i.lengtceerror",n)};this.one("error",n),this.one("playing",a),this.resetRetaying",arc_(e,!1)},r.src_=function(e){var t,r,i=this,n=this.selectSource([e]);return!n||((t=n.tech,r=this.techName_,tA(t)===tA(r))?ngSrc_=!1},!0):(this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tngSrc_=!1})),!_("load"set_()}))},erreset")},r.resetConumeBar_()},r.resetPrContent()},r.resetPlaChange_()},r.resetechange")},r.currources||t},r.curource||{}},r.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},r.c.type||""},r.preload=function(e){if(void 0!==e){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")},oplay",t)},r.psinline_("loop")change"))},r.handleTechPoshange"))}},ners_()))},r.usingNatitrols"))error_)})},r.reportUsivity_=!0},r.active")}},r.listenForUse))}},250)},r.plkRate"):1},r.defaultPlkRate"):1}.isAudio_},r.adck(e,t,r)},r.addRemotrack(e,t)},r.removeRemottTrack(t)},r.getVideoPlaybQuality")},r.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},r.vight()||0},change"))},rnguages_)}return e},r.c.open(),i},r.updateCurrentBi;break}}},r.removeCurrentBeClass(e)},r.bkpoints_)},r.e):void 0},r.currenteakpoint_},r.currentBreakint_]||""},r.loadMedia=function(e,t){var r=this;if(!(!e||"object"!=typeof e)){this.reset(),this.cache_.media=tL(e);var i=this.cache_.media,n=i.artwork,a=i.poster,s=i.src,o=i.textTracks;!n&&a&&(this.cache_.media.artwork=[{src:a,type:rT(a)}]),s&&this.src(s),a&&this.poster(a),Array.isArray(o)&ack(e,!1)}),this.ready(t)}},e_.media)},t.getTagSettings=function(e){var t={sources:[],tracks:[]},r=ex(e),i=r["data-setup"];if(ek(e,"vjs-fill")&&(r.fill=!0),ek(e,"vjs-fluid")&&(r.fluid=!0),null!==i){var n=k.default(i||"{}"),a=n[0],s=n[1];a&&j.error(a),V(r,s)}if(V(t,r),e.hasChildNodes())for(var o=e.childNodes,l=0,u=o.length;l<u;l++){var c=o[l],d=c.nodeName.toLowerCase();"source"===d?t.sources.push(ex(c)):"track"===d&&t.tracks.push(ex(c))}return t},r.flexNot e.stylebled_=!1)},r.plachange"))},t}(tO);ru.namteName])}}),i8.prototype.crossorigin=i8.prototype.crossOrigin,i8.players={};var i9=y.default.navigator;i8.prototype.options_={techOrder:rc.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:i9&&(i9.languages&&i9.languages[0]||i9.userLanguage||i9.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyStatehGet_(e)}}),igger(e)}}),tO.registerComponent("Player",i8);var i7="plugin",ne="activePlugins_",nt={},nr=function(e){return nt.hasOwnPropee]:ne]t.n=t[e]}),r},no=function(e,t){return t.prototype.name=e,function(){na(this,{name:e,plugin:t,instance:null},!0);for(var r=arguments.length,i=Array(r),n=0;n<r;n++)i[n]=arguments[n];var a=A.default(t,[this].concat(i));return this[e]=function(){return a},na(this,a.getEventHashON||""},e}();nl.getPlugin=ni,nl.BASE_PLUGIN_NAME=i7,nl.registerPlugin(i7,nl),i8.prototype.uis[ne][e]},i8.prototypern!!nr(lice(1):e};function nc(e,t,r){var i=nc.getPlayer(e);if(i)return t&&j.warn('Player "'+e+'" is already initialised. Options will not be applied.'),r&&i.ready(r),i;var n="string"==typeof e?eX("#"+nu(e)):e;if(!ey(n))throw TypeError("The element or ID supplied is not valid. (videojs)");return n.ownerDocument.defaultView&&n.ownerDocument.body.contains(n)||j.warn("The element supplied is not included in the DOM"),t=t||{},R("beforesetupt=tL(t,r)}),i=new(tO.getComponent("Player"))(n,t,r),R("setup").forEach(function(e){return e(i)}),i}if(nc.hooks_=D,nc.hookst){R(e,t)},nents)}}))},nc.removeHook=I,!0!==y.default.VIDEOJS_NO_DYNAMIC_STYLE&&em()){var nd=eX(".vjs-styles-defaults");if(!nd){nd=e2("vjs-styles-defaults");var nh=eX("head");nh&&nh.insertBefore(nd,nh.firstChild),e4(nd,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid {
        padding-top: 56.25%
      }
    `)}}e0(1,nc),nc.VERSION=x,nc.options=i8.prototype.options_,nc.getPlayers=function(){return i8.players},nc s||r[o]}},nc.get(Boolean)},nc.players=i8.players,nc.getComponent=tO.getComponent,nc.registel(tO,e,t)},nc.getTech=rc.getTech,nc.registerTech=rc.registerT].push(t)},Object.defineProperty(nc,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(nc.middleware,"TERMINATOR",{value:rf,writeable:!1,enumerable:!0}),nc.browser=ep,nc.TOUCH_ENABLED=eu,nc.extend=function(e,t){void 0===t&&(trguments)},i={};for(var n in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(r=t.constructor),i=t):"function"==typeof t&&(r=t),L.default(r,e),e&&(r.super_=e),i)i.hasOwnProperty(n)&&(r.prototype[n]=i[n]);return r},nc.mergeOptions=tL,nc.bind=tu,nc.registerPlugin=nl.registerPlugin,nc.deregisterPlugin=nl.deregisterPluginugin(e,t)},nc.getPlugins=nl.getPlugins,nc.getPlugin=nl.getPlugin,nc.getPluginVersion=nl.getPluginVersion,nc.aguages[e]},nc.log=j,nc.createLogger=U,nc.createTimeRange=nc.createTimeRanges=tF,nc.formatTime=rU,nc.setFormatTime=function(e){rj=e},nc.resetn(){rj=rB},nc.parseUrl=t6,nc.isCrossOrigin=t7,nc.EventTarget=th,nc.on=ti,nc.one=ts,nc.off=tn,nc.trigger=ta,nc.xhr=C.default,nc.TextTrack=ri,nc.AudioTrack=rn,nc.VideoTrack=ra,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContentguments)}}),nc.computedStyle=z,nc.dom=eJ,nc.url=re,nc.defineLazyProperty=i0,nc.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"}),e.exports=nc},288:(e,t,r)=>{var i;"undefined"!=typeof self&&self,e.exports=(i=r(207),function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,i){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,r)t(t.s=16)}([function(e,t,r){(function(t){var r;r="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=r}).call(t,r(6))},fun==t)}var l,u,c,d,h,f=9007199254740991,p="[object Function]",v="[object GeneratorFunction]",g=/^(?:0|[1-9]\d*)$/,m=Object.prototype,y=m.hasOwnProperty,_=m.toString,T=m.propertyIsEnumerable,b=(l=Object.keyn l(u(e))}),E=Math.max,S=!T.call({valueOf:1},"valueOf"),k=Array.ise,}return e},h=E(void 0===h?d.lend,this,n)});e. i(e)[1]}},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.efault:i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=(i=r(0))&&i.__esModule?i:{default:i},a={};a.exists=function(){var e=n.default.performance;return(e&&e.timing)!==void 0},a.domContentLoadedEventEnd=function(){var e=n.default.performance,t=e&&e.timing;return t&&t.domContentLoadedEventEnd},a.navigtionStart},t.ingify:i}},function(e,t,r){"use strict";var i=Object.prototype.hasOwn;return e}(),a=function(e){for(var t;e.length;){var r=e.pop();if(Array.isArray(t=r.obj[r.prop])){for(var i=[],n=0;n<t.length;++n)void 0!==t[n]&&i.push(t[n]);r.obj[r.prop]=i}}return t};t.arr;return ]=s,e},a)[r],e},e)return e}},t.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),r="",i=0;i<t.length;++i){var a=t.charCodeAt(i);45===a||46===a||95===a||126===a||a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122?r+=t.charAt(i):a<128?r+=n[a]:a<2048?r+=n[192|a>>6]+n[128|63&a]:a<55296||a>=57344?r+=n[224|a>>12]+n[128|a>>6&63]+n[128|63&a]:(i+=1,r+=n[240|(a=65536+((1023&a)<<10|1023&t.charCodeAt(i)))>>18]+n[128|a>>12&63]+n[128|a>>6&63]+n[128|63&a])}return r}turn a(t)},g.call(e)},uRFC3986"}},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{;return t}Object.defineProperty(t,"__esModule",{value:!0})ult)(t,r)};var a=i(r(4)),s=i(r(1)),o=n({a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"}),l=n({ad:"ad",ag:"aggregate",ap:"api",al:"application",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",br:"break",bw:"browser",by:"bytes",ca:"cached",cb:"cancel",cd:"code",cg:"category",ch:"changed",cn:"config",co:"count",ce:"counter",cp:"complete",cr:"creative",ct:"content",cu:"current",cx:"connection",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",du:"duration",dv:"device",ec:"encoding",en:"end",eg:"engine",em:"embed",er:"error",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",fi:"first",fm:"family",ft:"format",fq:"frequency",fr:"frame",fs:"fullscreen",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",nm:"name",no:"number",on:"on",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pr:"preload",ps:"position",py:"property",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",se:"session",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",st:"start",su:"startup",sv:"server",sw:"software",ta:"tag",tc:"tech",te:"text",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"wdefault=p},function(e,t,r){var i,n;void 0!==(n="function"==typeof(i=function(){"u,!1)}var s=function(){},o="undefined",l=typeof window!==o&&typeof window.navigator!==o&&/Trident\/|MSIE /.test(window.navigator.userAgent),u=["trace","debug","info","warn","error"],c=new a,d={};cctory)),t};var h=typeof window!==o?window.log:void 0;return c..log=h),c},c.getLoggers=function(){return d},c.default=c,c})?i.call(t,r,t,e):i)&&(e.el(t,r(6))},function(e,t){},function(e,t,r){(function(e,i){var n,a,s,o,l,u;("object"==typeof e&&e&&e.exports,a=function(e){this.message=e}).prototype=Error(),a.prototype.name="InvalidCharact new a(e)},o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=/[\t\n\f\r ]/g)+"==");return a},version:"0.1.0"},void 0!==(n=(function(){return u}).call(t,r,t,e))&&(e.exports=n)}).call(t,r(24)ill=1),e}},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.stopMonitoringHlsJs=t.monitorHlsJs=void 0;var n=i(r(8)),a=i(r(11)uneaders())};t.monitorHlsJs=function(e,t,r){var i=(arguments.length>3&&void 0!==arguments[3]&&arguments[3],arguments[4]),n=e.log;if(!a.default.exists())return void n.warn("performance timing not supported. Not tracking HLS.js.");var u=function(r,i){return e.emitdeo:{}}})};r.on(i.Events.MANIFEST_LOADErs:l(n)})};r.on(i.Events.LEVEL_LOADErs:l(i)})};r.on(i.Events.AUDIO_TRACK_LOADEleted",d)};r.on(i.Events.FRAG_LOADEn.text})}};r.on(i.Events.ERROame)(i)})};r.on(i.Events.FRAG_LOAD_EMERGENCY_ABORTEHLS.js")}};r.on(i.Events.LEVEL_SWITCHED,g),r._stopuxMonitor},r.on(i.Events.DESTROYING,r._stopMuxMonitor)},t.stopMonitoringHlsJs=function(e){e&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMewake"))}},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(r(0)),s=r(41),o=i(r(4)),l=i(r(45)),u=i(r(10)),c=i(r(46)),d=i(r(15)),h=i(r(47)),f=i(r(1)),p=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id"],v=["viewstart","error","ended","verData)()};g.prototype.send=function(e,t){if(e){if(this.respectDoNotTrack&&(0,u.default)())return o.default.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||(void 0===t?"undefined":n(t))!=="object")return o.default.error("A data object was expected in send() but was not provided");var r=this.disableCookies?{}:(0,s.getAndUpdateSessionData)(),i={};(0,f.default)(i,this.pageLevelData),(0,f.default)(i,t),(0,f.default)(i,r),(0,f.default)(i,this.viewerData),i.event=e,i.env_key=this.envKey,i.user_id&&(i.viewer_user_id=i.user_id,delete i.user_id);var a=i.mux_sample_number>=this.sampleRate,l=this._deduplicateBeaconData(e,i),c=(0,d.default)(l);if(this.lastEventTime=this.mux.utils.now(),a)return o.default.info("Not sending event due to sample rate restriction",e,i,c);if(!this.envKey)return o.default.info("Not sending event due to missing environment key",e,i,c);if(!this.rateLimited){if(o.default.info("Sending event",e,i,c),this.rateLimited=!this.eventQueue.queueEvent(e,c),this.mux.WINDOW_UNLOADING&&"viewend"===e)this.eventQueue.destroy(!0);else if(v.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return i.event="eventrateexceeded",c=(0,d.default)(i),this.eventQueue.queueEvent(i.event,c),o.default.error("Beaconing disabled due to rate limit.")}}},g.prototystroy(!1)},g.prototype._deduplicateBeaconData=function(e,t){var r=this,i={},a=t.view_id;if(!a||"viewstart"===e||"viewend"===e||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=6e5)i=(0,f.default)({},t),a&&(this.previousBeaconData=i),a&&"viewend"===e&&(this.previousBeaconData=null);else{var s=0===e.indexOf("request");Object.keys(t).forEach(function(a){var o,l=t[a];(l!==r.previousBeaconData[a]||p.indexOf(a)>-1||(o=r.previousBeaconData[a],!(!s||0!==a.indexOf("request_")||"request_response_headers"!==a&&(void 0===l?"undefined":n(l))==="object"&&(void 0===o?"undefined":n(o))==="object"&&Object.keys(l||{}).length===Object.keys(o||{}).length))||"renditionchange"===e&&0===a.indexOf("video_source_"))&&(i[a]=l,r.previousBeaconData[a]=l)})}return i},t.s:e.sex}}},function(e,t,r){"use strict";var i=r(13),n=r(14),arn e+"[]"["+t+"]"},repeat:function(e){return e}},s=Date.prototype.toISOString,o={delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,serializeDate:function(e){return s.call(e)},skipNulls:!1,strictNullHandling:!1},l=function e(t,r,n,a,s,l,u,c,d,h,f,p){var v,g=t;if("function"==typeof u)g=u(r,g);else if(g instanceof Date)g=h(g);else if(null===g){if(a)return l&&!p?l(r,o.encoder):r;g=""}if("string"==typeof g||"number"==typeof g||"boolean"==typeof g||i.isBuffer(g))return l?[f(p?r:l(r,o.encoder))+"="+f(l(g,o.encoder))]:[f(r)+"="+f(String(g))];var m=[];if(void 0===g)return m;if(Array.isArray(u))v=u;else{var y=Object.keys(g);v=c?y.sort(c):y}for(var _=0;_<v.length;++_){var T=v[_];s&&null===g[T]||(m=Array.isArray(g)?m.concat(e(g[T],n(r,T),n,a,s,l,u,c,d,h,f,p)):m.concat(e(g[T],r+(d?"."+T:"["+T+"]"),n,a,s,l,u,c,d,h,f,p)))}return m};e.exports=function(e,t){var r,s=e,u=t?i.assign({},t):{};if(null!==u.encoder&&void 0!==u.encoder&&"function"!=typeof u.encoder)throw TypeError("Encoder has to be a function.");var c=void 0===u.delimiter?o.delimiter:u.delimiter,d="boolean"==typeof u.strictNullHandling?u.strictNullHandling:o.strictNullHandling,h="boolean"==typeof u.skipNulls?u.skipNulls:o.skipNulls,f="boolean"==typeof u.encode?u.encode:o.encode,p="function"==typeof u.encoder?u.encoder:o.encoder,v="function"==typeof u.sort?u.sort:null,g=void 0!==u.allowDots&&u.allowDots,m="function"==typeof u.serializeDate?u.serializeDate:o.serializeDate,y="boolean"==typeof u.encodeValuesOnly?u.encodeValuesOnly:o.encodeValuesOnly;if(void 0===u.format)u.format=n.default;else if(!Object.prototype.hasOwnProperty.call(n.formatters,u.format))throw TypeError("Unknown format option provided.");var _,T,b=n.formatters[u.format];"function"==typeof u.filter?s=(T=u.filter)("",s):Array.isArray(u.filter)&&(_=T=u.filter);var E=[];if("object"!=typeof s||null===s)return"";r=u.arrayFormat in a?u.arrayFormat:"indices"in u?u.indices?"indices":"repeat":"indices";var S=a[r];_||(_=Object.keys(s)),v&&_.sort(v);for(var k=0;k<_.length;++k){var C=_[k];h&&null===s[C]||(E=E.concat(l(s[C],C,S,d,h,f?p:null,T,v,g,m,b,y)))}var w=E.join(c),A=!0===u.addQueryPrefix?"?":"";return w.length>0?A+w:""}},function(e,t,r){"use strict";var i=r(13),n=Object.prototype.hasOwnProperty,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:i.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHand}r}ro(u,t,r)}};e.exports=function(e,t){var r=t?i.assign({},t):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||i.isRegExp(r.delimiter)?r.delimiter:a.delimiter,r.depth="number"==typeof r.depth?r.depth:a.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:a.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:a.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:a.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:a.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:a.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:a.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:a.strictNullHandling,""===e||null==e)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof e?s(e,r):e,o=r.plainObjects?Object.create(null):{},u=Object.keys(n),c=0;c<u.length;++c){var d=u[c],h=l(d,n[d],r);o=i.merge(o,h,r)}return i.coount=s})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n="function"==typeof Symbol&&"symbol"==typeof Symbo:typeof e},a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{!i&&o.return&&o.return()}finally{if(n)throw a}}return r}(e,t);throw TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(e,t,r){var i=a((0,o.findMediaElement)(t),3),c=i[0],d=i[1],h=i[2],f=e.log,p=e.utils.getComputedStyle,v=e.utils.secondsToMs;if(!c)return f.error("No element was found with the `"+d+"` query selector.");if("video"!==h&&"audio"!==h)return f.error("The element of `"+d+"` was not a media element.");(r=(0,s.default)({automaticErrorTracking:!0},r)).data=(0,s.default)({player_software:"HTML5 Video Element",player_software_version:"No Versions",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:"4.2.0"},r.data),r.getPlrentTime)},r.gedeoWidth}},c.mux=c.mux||{},c.mux.deleted=!1,it(d,t,r)};var g=function(){f.error("The monitor for this video element has already been destroyed.")};c.mdestroy")},c.mux.slector.")},c.mux.addHLSJS=function(t){e.addHLSJS(d,t)},c.mux.addDashJS=function(t){e.addDashJS(d,t)},c.mux.removeHLSJS=function(){e.removeHLSJS(d)},c.mux.removeDashJS=function(){e.removeDashJS(d)},e.init(d,r),e.emit(d,"playerready"),c.paused||(e.emit(d,"play"),c.readyState>2&&e.emit(d,"playing")),c.mux.listeners={}s[t],!1))})};var s=(i=r(1))&&i.__esModule?i:{default:i},o=r(9),l=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],u={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUr(1e3*e)}}])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?ar{return{}},o=!1;e.on("adstart",function(){o=!0}),e.on("adend",function(){o=!1}),e.on("adserror",function(){o=on(e,u)})};i.forEach(function(e){t.on(e,l)})};var i,n=(i=r(0))&&i.__esModule?i:{default:i},a=n.default.utils.secondsToMs},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var n=i(r(3)),a=i(r(0)),s=i(r(4)),o=i(r(6)),l=i(r(7)),u=i(r(8)),c=i(r(9)),d=i(r(10)),h=a.default.log,f=a.default.utils.assign,p=a.default.utils.safeCall,v=a.default.utils.getComputedStyle,g=a.default.utils.secondsToMs,m=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"];(n.default.registerPlugin||n.defauilable.")})("mux",function(e){if(n.default.IS_IE8)return!1;var t=this,r=t.id();(e=f({automaticErrorTracking:!0},e)).data=f({player_software_name:"Video.js",player_software_version:n.default.VERSION||"< 4.11",player_mux_plugin_name:"videojs-mux",player_mux_plugin_version:"4.2.0"},e.data),e.getPlntTime())},e.getStateData=function(){var e=p(t,"videoHeight"),r=p(t,"videoWidth");if(void 0===r||void 0===e){var i=t.el().firstChild;i&&"VIDEO"===i.nodeName.toUpperCase()&&(e=i.videoHeight,r=i.videoWidth)}return{player_is_paused:p(t,"paused"),player_is_fullscreen:p(t,"isFullscreen"),player_autoplay_on:!!p(t,"autoplay"),player_preload_on:p(t,"preload"),player_width:v(t.el(),"width"),player_height:v(t.el(),"height"),player_language_code:p(t,"language"),video_poster_url:p(t,"poster"),video_source_url:p(t,"currentSrc"),video_source_mime_type:p(t,"currentType")&&p(t,"currentType").toLowerCase(),video_source_duration:g(p(t,"duration")||0),video_source_height:e,video_source_width:r}},t.mux=function(){h.error("[videojs-mux] The plugin was initialized more than once.")},it(r,e,t)},t.muLSJS(r,e)},t.mux.log=h,t.mux.utils=a.default.utils,a.default.init(r,e);dy"),i=!eout(d,0)});var y=!1;t.one("play",d),m.forEach(function(r){("error"!==r||e.automaticErrorTracking)&&t.on(r,function(){if(!y){var e={};if("error"===r){var i=p(t,"error");e.player_error_code=i&&i.code,e.player_error_message=i&&i.message}t.mux.emit(r,e)}})});var _=!1;t.on("play",function(){_=!0}),t.on("pause",function(){_=!1}),t.onakstart")}),t.laying"))}),t.ima&&(0,o.default)(t),t.onceux&&(0,c.default)(t),t.ima3&&"function"==typeof t.ima3.ready&&(0,l.default)(t),t.FreeWheelPlugin&&t.FreeWheelPlugin.VERSION&&(0,u.default)(t),t.on("dispose",function(){t.mux.emit("destroy")})}),(0,d.default)(n.default)},function(e,t){e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=functioTagUrl),s},r=void 0,i=void 0,n=void 0,a=void 0,s=void 0,o=void 0;try{var l=window.google.ima.AdEvent.Type;r=l.LOADED,i=l.STARTED,n=l.COMPLETE,a=l.PAUSED,s=l.RESUMED,o=l.SKIPPED}catch(e){r="loaded",i="start",n="complete",a="pause",s="resume",o="skip"}var u=0;e.mux.triggerAdRequest=function(){u++,e.mux.emit("adrequest",t())},e.on(error")})})}},function(e,t,r){"u==r&&i>=3}Object.defineProperty(t,"__esModule",{value:!0}),t.brightcoveImaAdsEventsSupported=i,t.default=functioverUrl),i};if(i(e.ima3.version))se",t()))};e.on("adest",t())}),e.on(lay",t())}),e.on(aderror")}),e.on("ads-play",function(){e.mux.emit("adplay",t())}),e.on("ads-pause",function(){e.mux.emit("adpause",t())}),e.on("ads-ad-ended",function(){e.mux.emit("adended",t())})}e.ima3.ready(function(){e.ima3.adPlayer?(i(e.ima3.version)||(e.ima3.adPlayer.on("play",function(){e.mux.emit("adplay")}),e.ima3.adPlayer.on("pause",function(){e.mux.emit("adpause")}),e.ima3.adPlayer.on("ended",function(){e.mux.emit("adended")})),(0,a.default)(e,e.ima3.adPlayer,["pause","ended","adserror"],["play"],t)):(e.mux.log("Legacy IMA3 plugin found, ad events may not track correctly."),e.on("ads-ad-started",function(){e.mux.emit("adplaying",t())}),e.on(ing",t())}))})};var n,a=(n=r(1))&&n.__esModule?n:{default:n}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})"play")})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){(0,n.default)(e,e,["onceux-linearad-pause","onceux-linearad-skipped","onceux-linearad-complete","adserror"],["adstart","onceux-linearad-resume"]),e.on("adstart",function(){e.mux.emit("adplay")}),e.on("onceux-linealaying"))}),e.on("onceux-linearad-resume",function(){e.mux.emit("adplay")}),e.on("onceux-linearad-pause",function(){e.mux.emit("adpause")}),e.on("onceux-linearad-complete",function(){e.mux.emit("adended")}),e.on("onceux-linearaadended")})};var i,n=(i=r(1))&&i.__esModule?i:{default:i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(e){n=!0,a=e}finally{try{!i&&o.return&&o.return()}finally{if(n)throw a}}return r}(e,t);throw TypeError("Invalid attempt to destructure non-iterable instance")};t.default=function(e){if(!o&&"function"==typeof e.getTech){for(var t=e.getTech("Html5")||{},r=t.sourceHandlers,i=0;i<r.length;i++)!function(t){var i=r[t],o=i.handleSource;i.handleSource=function(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=o(t,r,i);if(l&&"function"==typeof l.xhr)try{var u=e.VERSION.split("."),c=n(u,2),d=c[0],h=c[1];d=parseInt(d),h=parseInt(h);var f=d>=7&&h>=4?l.player().id():l.player_.el_.parentNode.id;(0,a.default)(e(f),l.xhr),(0,s.trackRenditionChanges)(e(f))}catch(e){}return l}}(i);o=!0}};var a=(i=r(11))&&i.__esModule?i:{default:i},s=r(13),o=!1},function(e,t,r){"uefault:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,tch(e){}}};t.beforeRequest=(r=t.befo{return e},function(e){var t,n=r(e);return n.beforeSend=(t=n.beforeSend||fuatch(e){}}),n})};var n=i(r(12)),a=i(r(0))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0nstance")};t.default=function(e,t,r){var i=e.mux.utils.extractHostnameAndDomain,s=e.mux.utils.headersString"unknown"},l=0;return function(){var u=t.readyState;if(u>=2){if(l=l||a.default.utils.now(),4!==u)return;if(t.status>=200&&t.status<300){var c=a.default.utils.now(),d="arraybuffer"===t.responseType?t.response.byteLength:t.responseText.length,h=n(i(t.responseURL),1)[0],f=s(t.getAllResponseHeaders?t.getAllResponseHeaders():""),p=o(f),v={request_start:r,request_response_start:l,request_response_end:c,request_bytes_loaded:d,request_hostname:h,request_response_headers:f,request_type:p};e.mux.emit("requestcompleted",v)}else e.mux.emit("requestfailed")}}};var a=(i=r(0))&&i.__esModule?i:{default:i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:;return r};t.getSegmentMetadataTrack=i,t.trackRendit: "+t)}})|n.shim()},13:(e,t,r)=>{var i=r(675),n=Obje=ts[1])}}a.prototype=n(Error.prototype),a.prototype.constructor=a,a.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},o.protues[luesis.vt);breaknt(t,10))},percent:function(e,t){return!!t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100&&(this.set(e,t),!0)}};var u=i.createElement&&i.createElement("textarea"),c={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},d={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},h={v:"title",lang:"lang"},f={}return i}var v=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];funon _(){}g.prototype.a[r]=e[r])},g.prototype.f==e?0:e+t},m.prototype=n(g.prototype),m.prototype.constructor=m,y.protottom-=t}},y.prototyptom>e.top},y.prototype.o;return!1},y.protot<=e.right},y.prototype.overlapsOpe.bottom}},y.prototype.intersectis.width)},y.prototype.toCSSCois.width}},y.getSimpleBwidth||r}},_.Strent(e))}}},_.convertCue,t):null},_.processCues=function(e,t,r){if(!e||!t||!r)return null;for(;r.firstChild;)r.removeChild(r.firstChild);var i=e.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin="1.5%",r.appen;return!1}(t)){for(var n=0;n<t.length;n++)i.appendChild(t[n].displayState);return}var a=[],s=y.getSimpleBoxPosition(i),o={font:Math.round(5*s.height)/100+"px sans-serif"};(function(){for(var r,n,l=0;l<t.length;l++)r=new m(e,n=t[l],o),i.appendChild(r.div),function(e,t,r,i){var n=new y(t)rn -1*++i}(a),o=[];if(a.snapToLines){switch(a.vertical){case"":o=["+y","-y"],l="height";break;case"rl":o=["+x","-x"],l="width";break;case"lr":o=["-x","+x"],l="width"}var l,u=n.lineHeight,c=u*Math.round(s),d=r[l]+u,h=o[0];Math.abs(c)>d&&(c=Math.ceil(d/u)*u*(c<0?-1:1)),s<0&&(c+=""===a.vertical?r.height:r.width,o=o.reverse()),n.move(h,c)}else{var f=n.lineHeight/r.height*100;switch(a.lineAlign){case"center":s-=f/2;break;case"end":s-=f}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(s,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(s,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(s,"%")})}o=["+y","-x","+x","-y"],n=new turn n||a}(n,o);t.move(p.toCSSCompatValues(r))}(0,r,s,a),n.displayState=r.div,a.push(y.getSimpleBoxPosition(r))})()onList=[]},_.Parser.prototype={reportOre throw e},parse:function(e){var t,r=this;function i(){for(var e=r.buffer,t=0;t<e.length&&"\r"!==e[t]&&e[t]!==`
`;)++t;var i=e.substr(0,t);return"\r"===e[t]&&++t,e[t]===`
`&&++t,r.buffer=e.substr(t),i}e&&(r.buffer+=r.decoder.decode(e,{stream:!0}));try{if("INITIAL"===r.state){if(!/\r\n|\n/.test(r.buffer))return this;var n,u=(t=i()).match(/^WEBVTT([ \t].*)?$/);if(!u||!u[0])throw new a(a.Errors.BadSignature);r.state="HEADER"}for(var c=!1;r.buffer&&/\r\n|\n/.test(r.buffer);)switch(c?c=!1:t=i(),r.state){case"HEADER":/:/.test(t)?(n=t).match(/X-TIMESTAMPOCAL")})}:i})}}(t)},/:/):t||(r.state="ID");continue;case"NOTE":t||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(t)){r.state="NOTE";break}if(!t)continue;r.cue=new(r.vttjs.VTTCue||r.window.VTTCue)(0,0,"");try{r.cue.align="center"}catch(e){r.cue.align="middle"}if(r.state="CUE",-1===t.indexOf("-->")){r.cue.id=t;continue}casegn)}(e,t)})(t,r.cue,r.regionList)}catch(e){r.reportOrThrowError(e),r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":var d=-1!==t.indexOf("-->");if(!t||d&&(c=!0)){r.oncue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}r.cue.text&&(r.cue.text+=`
`),r.cue.text+=t.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":t||(r.state="ID");continue}}catch(e){r.reportOrThrowError(e),"CUETEXT"===r.state&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state="INITIAL"===r.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+=`

`,this.parse()),"INITIAL"===this.state)throw new a(a.Errors.BadSignature)}catch(e){this.reportOrThrowError(e)}return this.onflush&&this.onflush(),this}},e.exports=_},190:e=>{var t={"":1,lr:1,rl:1},r={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"linee=void 0}n.prototype.gehis.text)},e.exports=n},146:e=>{var t={""0&&e<=100):l=).default},393:(e,t,r)=>{"use strict";r.d(t,{default:()=>G});var i=r(207),n=r.n(i),a=r(675),s=r.n(a);/*! @name videojs-contrib-quality-levels @version 2.1.0 @license Apache-2.0 */function o(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var l=function e(t){var r=this;if(n().browser.IS_IE8)for(var i in r=s().createElement("custom"),e.prototype)"constructor"!==i&&(r[i]=e.prototype[i]);return r.id=t.id,r.label=r.id,r.width=t.width,r.height=t.height,r.bitrate=t.bandwidth,r.enabled_=t.enabled,Object.defineProperty(r,"enabled",{get:function(){return r.enabled_()},set:function(e){r.enabled_(e)}}),r},u=function(e){function t(){var r,i=o(o(r=e.call(this)||this));if(n().browser.IS_IE8)for(var a in i=s().createElement("custom"),t.prototype)"constructor"!==a&&(i[a]=t.prototype[a]);return i.levels_=[],i.selectedIndex_=-1,Object.defineProperty(i,"selectedIndex",{get:function(){return i.selectedIndex_}}),Object.defineProperty(i,"les_.length}}),i||o(r)}t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e;var r=t.prototype;return r.addQuevel"}),t},r.removeQuevel"}),t},r.getQualitturn null}.length=0},t}(n().EventTarget);for(var c in u.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"},u.prototype.allowedEvents_)u.prototype["on"+c]=null;var d="2.1.0",h=n().registerPlugin||n().plugin,f=function(e,t){var r=e.qualityLevels,i=new u;return e.onspose",t)}),e.qualityLevels=function(){return i},e.qualityLevels.VERSION=d,i},p=function(e){return f(this,n().mergeOptioreturn e}h("qualityLevels",p),p.VERSION=d;var m=n().getComponent("MenuItem"),y=n().getComponent("Component"),_=function(e){function t(t,r){return r.selectable=!0,r.multiSelectable=!1,e.call(this,t,r)||this}v(t,e);var r=t.prototype;return r.handleClick=function(){var t=this.options_;console.log("Changing quality to:",t.label),e.prototype.handleClick.call(this);for(var r=this.player().qualityLevels(),i=0;i<r.length;i++)t.index==r.length||t.index==i?r[i].enabled=!0:r[i].enabled=!1index==e)},t}(m);y.registerComponent("SourceMenuItem",_);var T=n().getComponent("MenuButton"),b=function(e){function t(t,r){i=e.call(this,t,r)||this,T.apply(g(i),arguments);var i,a=i.player().qualityLevels();if(r&&r.default){if("low"==r.default)for(var s=0;s<a.length;s++)a[s].enabled=0==s;else{r.default="high";for(var s=0;s<a.length;s++)a[s].enabled=s==a.length-1}}return i.player().qualityLevels().on(["change","addqualitylevel"],n().bind(g(i),i.update)),i}v(t,e);var r=t.prototype;return r.createEl=function(){return n().dom.createEl("div",{className:"vjs-http-source-selector vjs-menu-button vjs-menu-button-popup vjs-control vjs-button"})},r.buiicon-cog"all(this)},r.createItems=function(){for(var e=[],t=this.player().qualityLevels(),r=[],i=0;i<t.length;i++){var n=t.length-(i+1),a=n===t.selectedIndex,s=""+n,o=n;t[n].height?(s=t[n].height+"p",o=parseInt(t[n].height,10)):t[n].bitrate&&(s=Math.floor(t[n].bitrate/1e3)+" kbps",o=parseInt(t[n].bitrate,10)),r.indexOf(s)>=0||(r.push(s),e.push(new _(this.player_,{label:s,index:n,selected:a,sortVal:o})))}return t.length>1&&e.push(new _(this.player_,{label:"Auto",index:t.length,selected:!1,sortVal:99999tVal?-1:0}),e},t}(T),E={},S=n().registerPlugin||n().plugin,k=function(e,t){if(e.addClass("vjs-http-source-selector"),console.log("videojs-http-source-selector initialized!"),console.log("player.techName_:"+e.techName_),"Html5"!=e.techName_)return!1;e.on(["loadedmetadata"],function(t){if(e.qualityLevels(),n().log("loadmetadata event"),"undefined"==e.videojs_http_source_selector_initialized||!0==e.videojs_http_source_selector_initialized)console.log("player.videojs_http_source_selector_initialized == true");else{console.log("player.videojs_http_source_selector_initialized == false"),e.videojs_http_source_selector_initialized=!0;var r=e.controlBar,i=r.getChild("fullscreenToggle").el();r.el().insertBefore(r.addChild("SourceMenuButton").el(),i)}})},C=function(e){var t=this;this.ready(function(){k(t,n().mergeOptions(E,e))}),n().registerComponent("SourceMenuButton",b),n().registerComponent("SourceMenuItem",_)};S("httpSourceSelector",C),C.VERSION="1.1.6";var w=r(199),A=r.n(w),L=Object.defineProperty,x=Object.getOwnPropertySymbols,D=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnr};r"":t,r),r);class M{constructor(e,t,r={}){let i=n().getTech("Tech").prototype.error;this.source=e,this.tech=t,this.player=n().getPlayer(this.tech.options().playerId),this._html5TechError=this.tech.error,this.tech.error=i,this.el=t.el(),this.hls=new(A())(O({backBufferLength:30,liveDurationInfinity:!0},r.hls)),this.tech.hlsjs=this.hls,this.player.qualityLevels&&this.setupQualityLevels(),this.setupEventHandlers(),this.setupHls(),this.mediaElErr.el.error)}dispose(){this.el.removeEventListener("error",this.mediaElErrorHandler_),this.tech.error=this._html5TechError,this.hls.destroy(),delete this.tech.hlsjs}setupEventHandlers(){let e={MEDIA_ERR_CUSTOM:0,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_ENCRYPTED:5},t={[A().ErrorTypes.NETWORK_ERROR]:e.MEDIA_ERR_NETWORK,[A().ErrorTypes.MEDIA_ERROR]:e.MEDIA_ERR_DECODE,[A().ErrorTypes.MUX_ERROR]:e.MEDIA_ERR_DECODE,[A().ErrorTypes.KEY_SYSTEM_ERROR]:e.MEDIA_ERR_ENCRYPTED,DEFAULT:e.MEDIA_ERR_CUSTOM};Object.values(A().Events).forEach(e=>{if(e===A().Events.ERROR){this.hls.on(e,(e,r)=>{var i;let{type:n,fatal:a}=r;if(!a)return;let s=null!=(i=t[n])?i:t.DEFAULT;this.tech.error({code:s,hlsError:r})});return}thigger(e,r)})}),this.el.addEventListener("error",this.mediaElErrorHandler_)}setupHls(){A().isSupported()?(this.hls.attachMedia(this.el),this.hls.loadSource(this.source.src)):this.el.canPlayType("application/vnd.apple.mpegurl")?this.el.src=this.source.src:console.log("[videojs-mux-kit] Error: browser does not support MSE nor Hls natively")}setupQualityLevels(){let e;let t=this.player.quality;rs.length-1,n=(e,t)=>{let n=r();i()?this.hls.autoLevelCapping=-1:this.hls.autoLevelCapping=n,t&&this.hls.currentLevel!==e&&(this.hls.currentLevel=e,a())},a=(e,r)=>{let i=this.hls.currentLevel;t.selectedIndex_=i,t.trigger({type:"change",selectedIndex:i})};this.tech.on(A().Events.MANIFEST_LOADED,(r,i)=>{if(e=Array(this.hls.levels.length).fill(!0),-1!==this.hls.autoLevelCapping)for(let t=this.hls.maxAutoLevel;t<this.hls.levels.length;t++)e[t]=!1;this.hls.levels.forEach((r,i)=>{t.addQualityLevel({id:i,width:r.width,height:r.height,bitrate:r.bitra=t,n(i,t)}})}),t.selectedIndex_=this.hls.currentLevel,t.trigger({type:"change",selectedIndex:this.hls.currentLevel})}),this.tech.on(A().Events.LEVEL_SWITCHED,a)}}function F(e){var t;return e.plugins.mux.data.player_software_name="vjs-mux-kit-"+(null==(t=n())?void 0:t.VERSION.split(".")[0])+("function"==typeof A()?"-hlsjs":"-vhs"),e.plugins.mux.data.player_software_version="0.11.1",e}P(M,"hlsTypeRE",/^application\/(x-mpegURL|vnd\.apple\.mpegURL)$/i),P(M,"hlsExtRE",/\.m3u8/i),n().getTech("Html5").registerSourceHandler({canHa"maybe":"",haw M(e,t,r),cobably":""},0),r(288);let N={},B={},j=n().registerPlugin||n().plugin,U=(e,t)=>{e.addClass("vjs-vtt-thumbnails"),e.vttThumbnails=new H(e,t)};class H{constructor(e,t){return this.player=e,this.options=t,this.listenForDurationChange(),this.initializeThumbnails(),this.registeredEvenPlugin()},()=>{})}initializeThumbnails(){if(!this.options.src)return;let e=this.getBaseUrl(),t=this.getFullyQualifiedUrl(this.options.src,e);this.getVttFile(t).then(e=>{this.vttData=this.processVtt(e),this.setupThumbnailE).shift()}getVttFile(e){return new Promise((t,r)=>{let i=new XMLHttpRequest;i.data={resolve:t},i.addEventListener("load",this.vttFileLoaded),i.open("GET",e),i.overrideMimeType("text/plain; charset=utf-8"),onseText)}setupThumbnailElement(e){let t=null;this.options.showTimestamp||(t=this.player.$(".vjs-mouse-display"));let r=document.createElement("div");r.setAttribute("class","vjs-vtt-thumbnail-display"),this.progressBar=this.player.$(".vjs-progress-control"),this.progressBar.appendChild(r),this.thumbnailHolder=r,t&&!this.options.showTimestamp&&t.classList.add("vjs-hidden"),this.registeredEvents.progressBarMouseEnter=()=>this.onBarMouseenter(),this.registeredEvents.progressBaruseleave(),this.progressBar.addEventListener("mouseenter",this.registeredEvents.progressBarMouseEnter),this.progressBar.addEventListener("mouseleave",this.registeredEvents.progressBarMouseLeave)}onBarMouseenter(){this.mouseMosemove(e)},this.registeredEvents.progressBarMouseMove=this.mouseMoveCallback,this.progressBar.addEventListener("mousemove",this.registeredEvents.progressBarMouseMove),this.showThumbnailHolder()}onBaeft||0))}onBarMousemove(e){this.updateThumbnailStyle(n().dom.getPointerPosition(this.progressBar,e).x,this.progressBar.offsetWidth)}getStyleForTime(e){for(let t=0;t<this.vttData.length;++t){let r=this.vttData[t];if(e>=r.start&&e<r.end){if(r.css.url&&!B[r.css.url]){let e=new Image;e.src=r.css.url,B[r.css.url]=e}return r.css}}}showThumbnailHolder(){this.thumbnailHolder.style.oacity="0"}updateThumbnailStyle(e,t){let r=this.player.duration(),i=this.getStyleForTime(e*r);if(!i)return this.hideThumbnailHolder();let n=e*t,a=parseInt(i.width,10),s=a>>1,o=t-(n+s),l=n-s;if(l>0&&o>0?this.thumbnailHolder.style.transform="translateX("+(n-s)+"px)":l<=0?this.thumbnailHolder.style.transform="translateX(0px)":o<=0&&(this.thumbnailHolder.style.transform="translateX("+(t-a)+"px)"),!(this.lastStyle&&this.lastStyle===i))for(let e in this.lastStyle=i,i)i.hasOwnProperty(e)&&(this.thumbnailHolder.style[e]=i[e])}processVtt(e){let t=[];return e.split(/[\r\n][\r\n]/,csimage:r}}getVttCss(e){let t;let r={};if(t=this.options.src.indexOf("//")>=0?this.options.src.split(/([^\/]*)$/gi).shift():this.getBaseUrl()+this.options.src.split(/([^\/]*)$/gi).shift(),!(e=this.getFullyQualifiedUrl(e,t)).match(/#xywh=/i))return r.background='url("'+e+'")',r;let i=this.getPropsFromDef(e);return r.background='url("'+i.image+'") no-repeat -'+i.x+"px -"+i.y+"px",r.width=i.w+"px",r.height=i.h+"px",r.url/1e3,10)}trim(e,t){let r=` 
\r	\f\v\xa0\u2028\u2029`,i=0,n=0;for(e+="",t&&(r=(t+"").replace(/([[\]().?/*{}+$^:])/g,"$1")),i=e.length,n=0;n<i;n++)if(-1===r.indexOf(e.charAt(n))){e=e.substring(n);break}for(n=(i=e.length)-1;n>=0;n--)if(-1===r.indexOf(e.charAt(n))){e=e.substring(0,n+1);break}return -1===r.indexOf(e.charAt(0))?e:""}}j("vttThumbnails",function(e){this.ready(()=>{U(this,n().mergeOptions(N,e))})}),n().hook("beforesetup",function(e,t){return t=function(e,t){var r,i,n,a,s;if(null==(r=null==e?void 0:e.dataset)?void 0:r.setup){let t=e.dataset.setup;(t=JSON.parse(t))&&(null==(n=null==(i=null==t?void 0:t.plugins)?void 0:i.mux)?void 0:n.data)&&(t=JSON.stringify(t=F(t)),e.dataset.setup=t)}return(null==(s=null==(a=null==t?void 0:t.plugins)?void 0:a.mux)?void 0:s.data)&&(t=F(t)),t}(e,t)}),n().hook("setup",function(e){e.timelineHoverPreviews=function(t){let r=(null==t?void 0:t.enabled)||!1,i=(null==t?void 0:t.src)||null;if(r||"function"!=typeof e.vttThumbnails.detach){if("function"==typeof e.vttThumbnails&&null!==i){e.vttThumbnails({src:i}),e.options().timelineHoverPreviewsUrl=i;return}if("function"==typeof e.vttThumbnails.src&&null!==i){e.vttThumbnails.src(i),e.options().timelineHoverPreviewsUrl=i;return}}else{e.vttThumbnails.detach(),e.options().timelineHoverPreviewsUrl=null;return}},e.options().timelineHoverPreviewsUrl&&e.timelineHoverPreviews({enabled:!0,src:e.options().timelineHoverPreviewsUrl})}),n().use("video/mux",e=>({setSource({src:t},r){var i,n;if(e.options().timelineHoverPreviews){let r=`https://image.mux.com/${t.split("?",1)[0]}/storyboard.vtt`;e.timelineHoverPreviews({enabled:!0,src:r})}r(null,{src:`https://stream.mux.com/${t}`,type:"application/x-mpegurl"}),e.mux&&e.mux.addHLSJS&&function(e){var t,r;if(null==(r=null==(t=e.tech_)?void 0:t.sourceHandler_)?void 0:r.hls){let t=e.tech_.sourceHandler_.hls;e.mux.addHLSJS({hlsjs:t,Hls:A()})}}(e),null==(n=null==(i=e.tech_)?void 0:i.sourceHandler_)|efault:r.subtitles[t].default},!1)}}),e.remoteTextTracks().addEventListener("change",t=>{let r=e.remoteTextTracks(),i,n=!1;for(i=0;i<r.length;i++)"showing"===r[i].mode&&(e.tech_.sourceHandler_.hls.subtitleTrack=i,n=!0);!0!==n&&(e.tech_.sourceHandler_.hls.surack=-(a.exportsdefapertject"=t.prototype.hasOwnProperty.call(e,t),r(18)})()}}]);
//# sourceMappingURL=071c3687-a3b17de84c063b66.js.map