/*! For license information please see viewer.nolibs.build.min.js.LICENSE.txt */
(function(){var __webpack_modules__={15063:function(e,t,n){"use strict";n.d(t,{Ai:function(){return g},C$:function(){return S},DZ:function(){return I},FY:function(){return C},Jj:function(){return b},Tb:function(){return x},Y8:function(){return k},_5:function(){return v},cV:function(){return A},ck:function(){return y},lz:function(){return P},oz:function(){return E},tm:function(){return Z},vV:function(){return w},y3:function(){return _}});var i=n(22970),r=n(40180),o=n(37531),a=n(17550),s=n(11569),u=n(55895),c=n(54591),l=n(50084),d=n(17447),h=n(74981),p="v1/useraccounts",f=(0,l.Z)();function m(e){return null!==e.lastPasswordChangeDate&&(e.lastPasswordChangeDate=new Date(e.lastPasswordChangeDate)),e}var g=function(){return h.Z.get(p,"current/profile").then(m)},v=function y(e){return(0,r.isObject)(e)?h.Z.put(p,"current/profile",JSON.stringify(e),{contentType:"application/json",disableRetry:!0}):Promise.reject("data missing")}function _(e){return(0,r.isObject)(e)?h.Z.put(p,"current/address",JSON.stringify(e),{contentType:"application/json",disableRetry:!0}):Promise.reject("data missing")}function b(e){return e?h.Z.put(p,"current/logonName",JSON.stringify({logonName:e}),{contentType:"application/json",disableRetry:!0}):Promise.reject("email required")}function w(e){return e?h.Z.put(p,"current/email",JSON.stringify({email:e}),{contentType:"application/json",disableRetry:!0}):Promise.reject("email required")}function C(e){var t=e.newPassword,n=e.currentPassword;return t?h.Z.put(p,"current/password",JSON.stringify({newPassword:t,currentPassword:n}),{contentType:"application/json",disableRetry:!0}):Promise.reject(new Error("Password required"))}function I(){return h.Z.get(p,"current/notificationsettings")}function P(e){var t=e.enablePromotional,n=void 0!==t&&t,i=e.enableTechnical,r=void 0!==i&&i;return h.Z.put(p,"current/notificationsettings",JSON.stringify({enablePromotional:n,enableTechnical:r}),{contentType:"application/json",disableRetry:!0})}function x(){return h.Z.delete(p,"current/creditcard",null,{disableRetry:!0})}unction T(e){return(0,r.isObject)(e)?h.Z.put(p,"current/creditcard",JSON.stringify(e),{contentType:"application/json",disableRetry:!0}):Promise.reject("data missing")}function k(e){return(0,i.mG)(this,void 0,Promise,(function(){var t,n;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,T(e)];case 1:return"Pending"!==(t=i.sent()).status?[2,t]:(n=window.open(t.challengeUrl))?[3,3]:[4,(0,c.Z)().confirm(d.ZP.val("v7.Client.Dialogs.ConfirmCreditCard"),d.ZP.val("Buttons.Cancel.Text"),d.ZP.val("Buttons.Confirm"))];case 2:i.sent(),n=window.open(t.challengeUrl),i.label=3;case 3:return[4,(r=t.updateId,new Promise((function(e){(0,o.F)(1e3).pipe((0,a.w)((function(){return r)})),(0,s.h)((function(e){return"Pending"!==e.status})),(0,u.q)(1)).subscribe(e)})))];case 4:return t=i.sent(),null==n||n.close(),[2,t]}var r}))}))}function A(e){return h.Z.post(p,"current/profile/nickname/validate",JSON.stringify(e),{contentType:"application/json",disableRetry:!0,cancellableKey:"nickname_".concat(f)})}function E(e){return h.Z.post(p,"current/profile/profilename/validate",JSON.stringify(e),{contentType:"application/json",disableRetry:!0})}function Z(){return h.Z.delete(p,"current",null,{disableRetry:!0})}},67978:function(e,t,n){"use strict";n.d(t,{k:function(){return m}});var i=n(22970),r=n(43541),o=n(40180),a=n(83466),s=n(66294),u=n(95766),c=n(8270),l=n(98008),d=n(63295),h=n(25900),p=n(19153),f=n(90729),m=new(function(){function e(){this.dataElement=function(){return document.getElementById("ecommerce")}}return e.prototype.getStep=function(){var e=this.dataElement();if(e){var t=(0,o.findKey)(l.E,();return l.E[t]}return null},e.prototype.getPromo=function(){var e=new r.Z(window.location.href),t=e.getQueryParamValue("PromoCode"),n=e.getQueryParamValue("PromoProduct");if(t&&n)return{code:t,product:n};var i=document.getElementById("PromoCode"),o=document.getElementById("PromoProduct"),a=document.getElementById("PromoSubTotal"),s=document.getElementById("PromoDiscount"),u=document.getElementById("PromoTotal");return i&&o&&a&&s&&u?{code:i.value,product:o.value,subtotal:parseFloat(a.value),discount:parseFloat(s.value),total:parseFloat(u.value)}:null},e.prototype.handle=function(e,t,n){return(0,i.mG)(this,void 0,void 0,(function(){var o,m,g,v,y;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return e=e||this.getStep(),[4,(0,d.c)(t||new r.Z(window.location.href).getQueryParamValue("SuccessOrderId"))];case 1:switch(o=i.sent(),n=n||this.getPromo(),o.items&&o.items.length>0&&n&&o.items.forEach((function(e){e.id===n.product&&(e.coupon=e.coupon||n.code,e.subTotal=e.subTotal||n.subtotal,e.discount=e.discount||n.discount,e.total=e.total||n.total)})),m=function(){"true"===c.get("isNewUser")&&u.U.send(new s.Gz({system:a.a.Application}))},e){case l.E.SubscriptionPlans:m();break;case l.E.Bundles:m(),u.U.send(new f.o2(o));break;case l.E.PaymentInformation:if(o&&o.items&&o.items.length>0&&!new r.Z(window.location.href).getQueryParamValue("RequestedContent.issueId")&&u.U.send(new f.HS(o)),g=document.getElementsByClassName("validation-summary-errors"))for(v=0;v<g.length;v++)(y=g[v].textContent.trim())&&u.U.send(new h.v(new p.E({description:y,fatal:!1})));break;case l.E.Confirmation:o&&o.items&&o.items.length>0&&u.U.send(new f.O6(o));break;case l.E.Finish:o&&o.items&&o.items.length>0&&u.U.send(new f.q5(o));break;default:throw new Error("Not Implemented")}return[2]}}))}))},e.prototype.init=function(){var e=this;document.addEventListener("DOMContentLoaded",(function(){e.dataElement()&&e.handle(null,null,null)}),{once:!0})},e}())},60723:function(e,t,n){"use strict";n.d(t,{c:function(){return h}});var i=n(22970),r=n(46046),o=n(4169),a=n(6677),s=n(48631),u=n(73e3),c=n(41940),l=n(11011),d=n(69918),h=new(function(){function e(){var e=this;this._enabled=!1;var t=r.Z.getUrlParameters();this._debug=!1,this._loaded=(0,i.mG)(e,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return this.trackers=[],this.trackers.push(d.Z),this.trackers.push(u.o),this.trackers.push(l.Z),this.trackers.push(c._),[4,Promise.all(this.trackers.map((function(e){return e.loaded()})))];case 1:return n.sent(),e.trackers=e.trackers.filter((function(e){return e.enabled()})),e._enabled=e.trackers.length>0,e._debug&&a.Z.log("se2sky.analytics - Trackers Found: ".concat(e.trackers.map((function(e){return e.toString()})).join(", ")||"None")),o.Z.get("Analytics.CustomSourceTrackingEvent",!1)&&(t.source||t.medium)&&(this._debug&&a.Z.log("se2sky.analytics - CustomSourceTracking - source=".concat(t.source,", medium=").concat(t.medium)),this.customSourceTracking(t.source,t.medium)),[2,!0]}}))}))}return e.prototype.toString=function(){return"Analytics"},e.prototype.loaded=function(){return this._loaded},e.prototype.enabled=function(){return this._enabled},e.prototype.pageView=function(e){var t=this;void 0===e&&(e={}),e.context=s.q.merge(e.context),e.title=e.title||(e.context&&e.context.contentName?e.context.contentName:"")||document.title,e.page=e.page||"".concat(window.location.pathname).concat(window.location.search).concat(window.location.hash),this._loaded.then((function(){t.trackers.forEach((function(t){return t.pageView(e)}))}))},e.prototype.event=function(e){var t=this;e.context=s.q.merge(e.context),this._loaded.then((function(){t.trackers.forEach((function(t){return t.event(e)}))}))},e.prototype.transaction=function(e){var t=this;e.context=s.q.merge(e.context),this._loaded.then(()},e.prototype.timing=function(e,t,n,i){var r=this;this._loaded.then((function(){r.trackers.forEach((function(r){return r.timing(e,t,n,i)}))}))},e.prototype.exception=function(e,t){var n=this;this._loaded.then((function(){n.trackers.forEach((function(n){return n.exception(e,t)}))}))},e.prototype.customSourceTracking=function(e,t){var n=this;this._loaded.then((function(){n.trackers.forEach((function(n){return n.customSourceTracking(e,t)}))}))},e}())},48631:function(e,t,n){"use strict";n.d(t,{q:function(){return m}});var i=n(22970),r=n(40180),o=n(78964),a=n(14581),s=n(24458),u=n(91330),c=n(27670),l=n(88477),d=n(83344),h=n(66353),p=n(14347),f=n(2099),m=new(function(){function e(){}return e.prototype.merge=function(e){return e=e||{},this.refresh(),(0,r.merge)({},this,e)},e.prototype.refresh=function(){return(0,i.mG)(this,void 0,void 0,(function(){var e,t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return this.cid=void 0,this.contentName=void 0,this.issueDate=void 0,this.pageNumber=void 0,(0,c.m)()!==s.n3.PagesView&&(0,c.m)()!==s.n3.TextView||(this.cid=f.Z.cid(),this.contentName=f.Z.contentName(),e=f.Z.issue(),(0,a.w3)(e)&&(this.issueDate=(0,a.YL)(e)),this.pageNumber=f.Z.page()),[4,(0,d.X)()];case 1:return t=n.sent(),this.userCountry=t.country,this.currentLanguage=t.language,g(),[2]}}))}))},e}());function g(){var e=u.Z.current.language();m.translatedLanguage=e?e.code():void 0}p.Z.onUserStateChanged((function(){(0,o.Ik)().then((function(e){var t,n,i,r;m.subscriptionPlan=e?(n=(t=e).subscriptionId,i=t.subscriptionName.replace(/\s/g,""),r=function(e){var t=(0,h.un)(e);return String("0000".concat(t)).slice(-4)}(n),"".concat(i,"-").concat(r)):void 0})).catch(l.logError)})),u.Z.bind("currentLanguageChanged",(function(){return g()})),m.refresh()},98008:function(e,t,n){"use strict";var i,r;n.d(t,{$:function(){return r},E:function(){return i}}),function(e){e.SubscriptionPlans="subscriptionPlans",e.Bundles="bundles",e.PaymentInformation="paymentInformation",e.Confirmation="confirmation",e.Finish="finish"}(i||(i={})),function(e){e.AddPaymentInfo="AddPaymentInfo",e.AddToCart="AddToCart",e.BeginCheckout="BeginCheckout",e.CheckoutProgress="CheckoutProgress",e.Purchase="Purchase",e.RemoveFromCart="RemoveFromCart",e.SelectContent="SelectContent",e.SetCheckoutOption="SetCheckoutOption"}(r||(r={}))},63295:function(e,t,n){"use strict";n.d(t,{c:function(){return o}});var i=n(74981),r=n(99411),o=function(e){return i.Z.get("AnalyticsPurchaseInfo","",{successOrderId:e||r.Z})}},73e3:function(e,t,n){"use strict";n.d(t,{o:function(){return l}});var i=n(22970),r=n(4169),o=n(98008),a=n(83433),s=n(39907),u=!1;function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];u&&console.log("googleanalytics - gtag ",arguments),dataLayer.push(arguments)}var l=new(function(){function e(){this._ecommerceEnabled=!1,this._enabled=!1,this._events={enabled:!1},this._loaded=(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,r.Z.loaded()];case 1:return t.sent(),e=r.Z.get("analytics.Google"),this._debug=u=!!e.Debug,this._debug&&console.log("googleanalytics - cfg ",e),e&&e.Enabled?(this._enabled=!0,this._events=e.Events&&e.Events.Enabled?{enabled:!0,categories:e.Events.Categories}:{enabled:!1},this._GA_MEASUREMENT_ID=e.ClientId,window.dataLayer||(n=window,i=document,o="script",a="dataLayer",l=e.ClientId,d=e.CustomVariables,l.split(",").forEach((function(e){n[a]=n[a]||d?[d]:[],n[a].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var t=i.getElementsByTagName(o)[0],r=i.createElement(o);r.async=!0,r.src="https://www.googletagmanager.com/gtag/js?id="+e,t.parentNode.insertBefore(r,t)}))),c("set",{cookie_flags:e.CookieSameSite||"SameSite=None;Secure"}),e.ClientId.split(",").forEach((),e.Ecommerce&&e.Ecommerce.Enabled&&(this._ecommerceEnabled=!0),e.SiteSpeed&&e.SiteSpeed.Enabled&&(this._siteSpeedEnabled=!0),e.UseUserId&&(0,s.H)((function(t){e.ClientId.split(",").forEach(()})),[2,!0]):[2,!1]}var n,i,o,a,l,d}))}))}return e.prototype.toString=e.prototype.loaded=function(){return this._loaded},e.prototype.enabled=function(){return this._enabled},e.prototype.pageView=function(e){void 0===e&&(e={}),this._enabled?this._GA_MEASUREMENT_ID.split(",").forEach((function(){c("event","page_view",{page_title:e.title?e.title:"",page_location:e.page?e.page:"".concat(window.location.pathname).concat(window.location.search).concat(window.location.hash)})})):this._debug&&console.log("NOT ENABLED pageView",e)},e.prototype.event=function(e){var t,n;this._enabled&&this._events.enabled&&((null===(t=this._events.categories[e.category])||void 0===t?void 0:t.Enabled)||(null===(n=this._events.categories["*"])||void 0===n?void 0:n.Enabled))?c("event",e.action,{event_category:e.category,event_label:e.label,event_value:e.value}):this._debug&&console.log("NOT ENABLED event",e)},e.prototype.transaction=function(e){if(this._enabled&&this._ecommerceEnabled&&e){var t,n={};switch(e.data.items&&(t=e.data.items.map(()),e.type){case o.$.AddPaymentInfo:n={currency:e.data.currency,payment_type:e.data.cardType,items:t,value:e.data.value};break;case o.$.AddToCart:case o.$.BeginCheckout:case o.$.RemoveFromCart:n={currency:e.data.currency,items:t,value:e.data.value};break;case o.$.CheckoutProgress:break;case o.$.Purchase:n={affiliation:e.data.affiliation,currency:e.data.currency,items:t,shipping:0,tax:e.data.tax,transaction_id:e.data.transactionId,value:e.data.value};break;case o.$.SelectContent:if(!e.data.promotions)throw new Error("select_content type not supported");n={promotions:e.data.promotions.map((function(e){return{id:e.id,name:e.name}}))};break;case o.$.SetCheckoutOption:n={checkout_step:e.data.checkout_step,checkout_option:e.data.checkout_option,value:e.data.value};break;default:throw new Error("Not Implemented: ".concat(e.type))}c("event",(0,a.r)(e.type),n)}else this._debug&&console.log("NOT ENABLED transaction",e)},e.prototype.timing=function(e,t,n,i){this._enabled&&this._siteSpeedEnabled?c("event","timing_complete",{name:t,value:n,event_category:e,event_label:i}):this._debug&&console.log("NOT ENABLED timing",{category:e,variable:t,timeSpent:n,label:i})},e.prototype.exception=e.prototype.customSourceTracking=function(e,t){this._GA_MEASUREMENT_ID.split(",").forEach(()},e}())},39907:function(e,t,n){"use strict";n.d(t,{H:function(){return a}});var i=n(22970),r=n(8871),o=n(14347);function a(e){var t=this,n=function(){return(0,i.mG)(t,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,r.default.load()];case 1:return t.sent(),e(r.default.enAccountNumber),[2]}}))}))};o.Z.onUserStateChanged(n),n()}},83433:function(e,t,n){"use strict";n.d(t,{r:function(){return r}});var i=n(98008);function r(e){var t,n=((t={})[i.$.AddPaymentInfo]="add_payment_info",t[i.$.AddToCart]="add_to_cart",t[i.$.BeginCheckout]="begin_checkout",t[i.$.CheckoutProgress]="checkout_progress",t[i.$.Purchase]="purchase",t[i.$.RemoveFromCart]="remove_from_cart",t[i.$.SelectContent]="select_content",t[i.$.SetCheckoutOption]="set_checkout_option",t);if(n[e])return n[e];throw new Error("Not Implemented: ".concat(e))}},41940:function(e,t,n){"use strict";n.d(t,{_:function(){return h}});var i=n(22970),r=n(78964),o=n(24458),a=n(32249),s=n(27670),u=n(26783),c=n(4169),l=n(14347),d=n(39907),h=new(function(){function e(){this._debug=!1,this._enabled=!1,this._loaded=(0,i.mG)(this,void 0,void 0,(function(){var e,t,n=this;return(0,i.Jh)(this,(function(o){switch(o.label){case 0:return[4,c.Z.loaded()];case 1:if(o.sent(),e=c.Z.get("analytics.Marfeel"),this._debug=e.Debug,this._debug&&console.log("Marfeel analytics configuration: ",e),!e||!e.Enabled)return[2,!1];if(this._enabled=!0,!window.marfeel)try{!function(e){window.marfeel={config:e.UserConfig,cmd:[]},(0,u.B)("".concat(e.ModuleSdkUrl,"?id=").concat(e.UserConfig.accountId),{type:"module"}),(0,u.B)("".concat(e.NoModuleSdkUrl,"?id=").concat(e.UserConfig.accountId),{type:"text/javascript",noModule:!0})}(e)}catch(e){throw new Error("Marfeel analytics - MarfeelAnalytics ctor - error on initMarfeelAnalytics: ".concat(e.message))}return t=function(){window.marfeel.cmd.push(["compass",function(t){return(0,i.mG)(n,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,(0,r.Ik)()];case 1:return n=i.sent(),t.setUserType(e.UserJourney[null==n?void 0:n.subscriptionName]||(l.Z.isLogin()?e.UserJourney.Registered:e.UserJourney.Anonymous)),[2]}}))}))}])},l.Z.onUserStateChanged(t),t(),e.UseUserId&&(0,d.H)((function(e){window.marfeel.cmd.push(["compass",)})),[2,!0]}}))}))}return e.prototype.toString=function(){var e,t;return"Marfeel Analytics (".concat(null===(t=null===(e=window.marfeel)||void 0===e?void 0:e.config)||void 0===t?void 0:t.accountId,")")},e.prototype.enabled=function(){return this._enabled},e.prototype.event=function(e){return(0,i.mG)(this,void 0,void 0,(function(){var t,n=this;return(0,i.Jh)(this,(function(i){return this._enabled?("article"===e.category.toLowerCase()&&"view"===e.action.toLowerCase()&&(t="".concat(document.location.origin).concat((0,a.bv)(),"/article/").concat(e.value),window.marfeel.cmd.push(["compass",function(e){n._debug&&console.log("Marfeel - Event - Article View - sending URL: ",t),e.trackNewPage(t)}])),[2]):(this._debug&&console.log("Marfeel - Event - Not enabled",e),[2])}))}))},e.prototype.exception=function(e,t){},e.prototype.loaded=function(){return this._loaded},e.prototype.pageView=function(e){var t=this;if(void 0===e&&(e={}),this._enabled){if(s.Z.getActiveViewName()===o.n3.PagesView){var n="".concat(window.location.origin).concat(e.page);window.marfeel.cmd.push(["compass",function(e){t._debug&&console.log("Marfeel - Page View - sending URL: ",n),e.trackNewPage(n)}])}}else this._debug&&console.log("Marfeel - Page View - Not enabled",e)},e.prototype.timing=function(e,t,n,i){},e.prototype.transaction=function(e){},e.prototype.customSourceTracking=function(e,t){},e}())},11011:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=n(22970),r=n(8871),o=n(4169),a=n(14347),s=new(function(){function e(){this._enabled=!1,this._loaded=(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,o.Z.loaded()];case 1:return t.sent(),e=o.Z.get("analytics.Mather"),this._debug=!!e.Debug,this._debug&&console.log("matheranalytics - cfg ",e),e&&e.Enabled?(this._enabled=!0,window._snaq||function(e,t,n){e._snaq=e._snaq||[],e._snaq.push(["setCollectorUrl",n.CollectorUrl]),e._snaq.push(["setAppId",n.AppId]),e._snaq.push(["setCustomerId",n.CustomerId]),e._snaq.push(["setMarket",n.Market]),e._snaq.push(["setCookieDomain",n.CookieDomain]),n.ActivityTracking.Enabled&&e._snaq.push(["enableActivityTracking",n.ActivityTracking.MinimumVisitLength,n.ActivityTracking.HeartBeat]);var i=[].concat.apply([],e._snaq),r=i[i.indexOf("setCustomerId")+1]+"/"+i[i.indexOf("setMarket")+1]+"/sp.js",o=t.createElement("script");o.type="text/javascript",o.async=!0,o.defer=!0,o._mather_tag=t.scripts[t.scripts.length-1],o._mather_sp=o.uniqueID,o.src=("https:"===t.location.protocol?"https":"http")+"://js.matheranalytics.com/s/"+r,t.getElementsByTagName("script")[0].parentNode.insertBefore(o,null)}(window,document,e),[2,!0]):[2,!1]}}))}))}return e.prototype.toString=function(){return"MatherAnalytics"},e.prototype.loaded=function(){return this._loaded},e.prototype.enabled=function(){return this._enabled},e.prototype.pageView=function(e){if(void 0===e&&(e={}),this._enabled){var t={page:e.page?e.page:"".concat(window.location.pathname).concat(window.location.search).concat(window.location.hash)};e.title&&(t.title=e.title),e.page&&(t.page=e.page),a.Z.isLogin()?window._snaq.push(["setUserId",r.default.getProfileId]):window._snaq.push(["setUserId",""]),t.title?window._snaq.push(["trackPageView",t.title]):window._snaq.push(["trackPageView"])}else this._debug&&console.log("NOT ENABLED pageView",e)},e.prototype.event=function(e){},e.prototype.transaction=function(e){},e.prototype.exception=function(e,t){},e.prototype.timing=e.prototype.customSourceTracking=function(e,t){},e}())},69918:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(22970),r=n(4169),o=n(98008),a=n(83433),s=n(39907),u=!1;function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];u&&console.log("tagmanager - gtag ",arguments),dataLayerTagManager.push(arguments)}function l(e){u&&console.log("tagmanager - gtagObj ",e),e=(0,i.pi)({Action:null,Category:null,Context:null,Label:null,PageTitle:null,PageURL:null,Value:null,Var:null},e),dataLayerTagManager.push(e)}var d=new(function(){function e(){this._ecommerceEnabled=!1,this._enabled=!1,this._eventsEnabled=!1,this._triggers={},this._variables={},this._loaded=(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,r.Z.loaded()];case 1:return t.sent(),e=r.Z.get("googletagmanager"),this._debug=u=!!e.Debug,this._debug&&console.log("tagmanager - cfg ",e),e&&e.Enabled?(this._enabled=!0,this._eventsEnabled=e.Events&&e.Events.Enabled,this._ContainerID=e.ContainerID,window.dataLayerTagManager||(n=window,i=document,o="script",a="dataLayerTagManager",d=e.ContainerID,h=e.CustomVariables,d.split(",").forEach((function(e){n[a]=n[a]||h?[h]:[],n[a].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var t=i.getElementsByTagName(o)[0],r=i.createElement(o),s="&l="+a;r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id="+e+s,t.parentNode.insertBefore(r,t);var u=i.createElement("noscript");i.body.insertBefore(u,i.body.firstElementChild);var c=i.createElement("iframe");c.height="0",c.width="0",c.style.display="none",c.style.visibility="hidden",c.src="https://www.googletagmanager.com/ns.html?id="+e+s,u.appendChild(c)})),c("policy","all",(function(e,t,n){if(e!==d)return!0;var i=r.Z.get("googletagmanager"),o=!1;return i&&i.AllowPolicy?o=i.AllowPolicy.indexOf(t)>=0:(console.error('This Google Tag Manager implementation contains custom templates requesting permissions, but the XML backend configuration is missing, make sure you have the AllowPolicy, like:\n\n<addgroup name="GoogleTagManager">\n    <add name="Enabled" value="true" />\n    <add name="ContainerID" value="GTM-XXXX" />\n    <add name="AllowPolicy" value="permission1,permission2" />\n</addgroup>\n\nhttps://developers.google.com/tag-manager/templates/permissions?hl=en\n            '),console.warn('Checking policy for "'.concat(t," = ").concat(o,'", data=').concat(JSON.stringify(n)))),o}))),c("set",{cookie_flags:e.CookieSameSite||"SameSite=None;Secure"}),e.ContainerID.split(",").forEach((function(e){c("config",e,{send_page_view:!1})})),e.Ecommerce&&e.Ecommerce.Enabled&&(this._ecommerceEnabled=!0),this._triggers=e.Triggers,this._variables=e.Variables,e.UseUserId&&(0,s.H)((),[2,!0]):[2,!1]}var n,i,o,a,d,h}))}))}return e.prototype.toString=function(){return"Google TagManager (".concat(this._ContainerID,")")},e.prototype.loaded=function(){return this._loaded},e.prototype.enabled=function(){return this._enabled},e.prototype.pageView=function(e){if(void 0===e&&(e={}),this._enabled){var t={event:this._triggers.Pageview};t[this._variables.PageTitle]=e.title,t[this._variables.PageURL]=e.page,e.context&&(t[this._variables.Context]=e.context),l(t)}else this._debug&&console.log("NOT ENABLED pageView",e)},e.prototype.event=function(e){if(this._enabled&&this._eventsEnabled){var t={event:this._triggers.Event};e.category&&(t[this._variables.Category]=e.category),e.action&&(t[this._variables.Action]=e.action),e.label&&(t[this._variables.Label]=e.label),e.value&&(t[this._variables.Value]=e.value),e.context&&(t[this._variables.Context]=e.context),l(t)}else this._debug&&console.log("NOT ENABLED event",e)},e.prototype.transaction=function(e){if(this._enabled&&this._ecommerceEnabled&&e){var t,n={event:"".concat(this._triggers.Transaction," => ").concat((0,a.r)(e.type)),ecommerce:{}};switch(e.data.items&&(t=e.data.items.map(()),e.type){case o.$.BeginCheckout:n.ecommerce.currencyCode=e.data.currency,n.ecommerce.checkout={actionField:{step:1},products:t};break;case o.$.SelectContent:if(!e.data.promotions)throw new Error("select_content type not supported");n.ecommerce.promoClick={promotions:e.data.promotions.map((function(e){return{id:e.id,name:e.name}}))};break;case o.$.CheckoutProgress:n.ecommerce.currencyCode=e.data.currency,n.ecommerce.checkout={actionField:{step:e.data.checkout_step,option:e.data.checkout_option,value:e.data.value},products:t};break;case o.$.AddToCart:n.ecommerce.currencyCode=e.data.currency,n.ecommerce.add={products:t};break;case o.$.RemoveFromCart:n.ecommerce.currencyCode=e.data.currency,n.ecommerce.remove={products:t};break;case o.$.AddPaymentInfo:n.ecommerce.currencyCode=e.data.currency,n.ecommerce.checkout={actionField:{step:3,option:e.data.payment_type},products:t};break;case o.$.SetCheckoutOption:n.ecommerce.checkout={actionField:{step:e.data.checkout_step,option:e.data.checkout_option},products:t};break;case o.$.Purchase:n.ecommerce.currencyCode=e.data.currency,n.ecommerce.purchase={actionField:{id:e.data.transactionId,affiliation:e.data.affiliation,revenue:e.data.value,tax:e.data.tax,shipping:e.data.shipping},products:t};break;default:throw new Error("Not Implemented: ".concat(e.type))}l(n)}else this._debug&&console.log("NOT ENABLED transaction",e)},e.prototype.timing=function(e,t,n,i){if(this._enabled){var r={event:this._triggers.Timing};r[this._variables.Var]=t,r[this._variables.Category]=e,r[this._variables.Value]=n,r[this._variables.Label]=i,l(r)}else this._debug&&console.log("NOT ENABLED timing",{category:e,variable:t,timeSpent:n,label:i})},e.prototype.exception=function(e,t){c("event","exception",{description:e,fatal:t})},e.prototype.customSourceTracking=function(e,t){c("config",this._ContainerID,{campaign_source:e,campaign_medium:t})},e}())},19204:function(e,t,n){"use strict";n.d(t,{O:function(){return _}});var i,r=n(39752),o=n(14581),a=n(24458),s=n(14886),u=n(34337),c=n(80511),l=new(n(44651).v)(/^\d+$/,"Page doesnt match pattern"),d=n(18840),h=n(6430),p=n(52007),f=n(31258),m=n(15798),g=(0,f.P1)(m.MX,(),v=n(80053),y=((i={})[a.n3.TextView]="textview",i[a.n3.PagesView]="pageview",i[a.n3.ReadingMap]="readingmap",i[a.n3.IssueDetails]="details",i);function _(e,t){var n=this,i=t.viewName,f=t.viewName===a.n3.PagesView?"{viewName}":y[t.viewName],m=t.viewName,_=(0,r.Ys)(g),b=new s.i(t.viewName);e.addRoute({name:"issue_newspaper_date_page_".concat(i),template:"{newspaper}/{issueDate}/page/{page}/".concat(f),defaults:{viewName:m},constraints:{viewName:b,issueDate:u.E,newspaper:c.n,page:l},executeWith:t.executeWith}),t.viewName===a.n3.TextView&&e.addRoute({name:"issue_newspaper_date_article_textview",template:"{newspaper}/{issueDate}/{articleId}/{viewName}?{query}",defaults:{query:""},constraints:{viewName:b,articleId:d.nR,issueDate:u.E,newspaper:c.n},executeWith:t.executeWith}),t.viewName===a.n3.IssueDetails&&e.addRoute({name:"issuedeatails_newspaper",template:"{newspaper}/details",defaults:{viewName:m},constraints:{viewName:b,newspaper:c.n},executeWith:t.executeWith}),e.addRoute({name:"issue_newspaper_date_".concat(i),template:"{newspaper}/{issueDate}/".concat(f,"?{token}&{zoom}"),defaults:{token:null,zoom:null,viewName:m},constraints:{viewName:b,issueDate:u.E,newspaper:c.n},executeWith:t.executeWith}),e.addRoute({name:"issue_newspaper_".concat(i),template:"{newspaper}/".concat(f,"?{token}&{zoom}"),defaults:{token:null,zoom:null,viewName:m},constraints:{viewName:b,newspaper:c.n},executeWith:t.executeWith}),e.addRoute({name:"issue_".concat(i),template:"{issue}/".concat(f),defaults:{viewName:m},constraints:{viewName:b,issue:,executeWith:t.executeWith}),e.addRoute({name:"cid_issue_date_".concat(i),template:"{cid}/{issueDate}/".concat(f),defaults:{viewName:m},constraints:{viewName:b,issueDate:u.E,cid:h.s},executeWith:t.executeWith}),e.addRoute({name:"cid_".concat(i),template:"{cid}/".concat(f),defaults:{viewName:m},constraints:{viewName:b,cid:h.s},executeWith:t.executeWith}),e.addRoute({name:"issue_articleId",template:"article/{articleId}/{viewName}",constraints:{articleId:d.nR,viewName:b},executeWith:t.executeWith}),e.addRoute({name:"bookmark_".concat(i),template:"bookmark/{bookmark}/".concat(f),defaults:{viewName:m},constraints:{viewName:b,bookmark:p.v},executeWith:t.executeWith}),t.viewName===a.n3.PagesView&&(e.addRoute({name:"home",template:"",defaults:{viewName:m,cid:_},constraints:{viewName:b},executeWith:t.executeWith}),e.addRoute({name:"referrer",template:"referrer/{referrer}",defaults:{viewName:m},constraints:{viewName:b},executeWith:function(e){return v.default.reauthorize().then(t.executeWith.bind(n,e))}}),e.addRoute({name:"latest",template:"latest",defaults:{viewName:m},constraints:{viewName:b},executeWith:t.executeWith}))}},9257:function(e,t,n){"use strict";n.d(t,{W:function(){return s}});var i=n(22970),r=n(24458),o=n(19204),a=!1;function s(e,t){a||(a=!0,(0,o.O)(e,(0,i.pi)((0,i.pi)({},t),{viewName:r.n3.PagesView})))}},93979:75132:function(e,t,n){"use strict";var i,r,o=n(83466),a=n(95766),s=n(60723),u=n(31916),c=((i={})[o.a.Application]="/email",i[o.a.Social]="/social",i[o.a.Library]="/library",i),l=((r={})[u.UQ.EmailAlertPromotional]="SettingsPromo",r[u.UQ.EmailAlertTechnical]="SettingsService",r);.U.ofType(u.GM.SignInRequested).subscribe((function(e){s.c.pageView({page:"/reg/signin".concat(d(e.payload.system))})})),a.U.ofType(u.GM.SignInSucceeded).subscribe((function(e){s.c.pageView({page:"/reg/signin/success".concat(d(e.payload.system))})})),a.U.ofType(u.GM.SignInFailed).subscribe((function(e){s.c.pageView({page:"/reg/signin/error".concat(d(e.payload.system))})})),a.U.ofType(u.GM.SignUpRequested).subscribe((function(e){s.c.pageView({page:"/reg/signup".concat(d(e.payload.system))})})),a.U.ofType(u.GM.SignUpSucceeded).subscribe((function(e){s.c.pageView({page:"/reg/signup/success".concat(d(e.payload.system))})})),a.U.ofType(u.GM.SignUpFailed).subscribe((function(e){s.c.pageView({page:"/reg/signup/error".concat(d(e.payload.system))})})),a.U.ofType(u.GM.SignUpEmailAlertSet).subscribe((function(e){var t=l[e.payload.alertKey],n="".concat(e.payload.isDefault?"default-":"").concat(e.payload.value?"on":"off");s.c.event({category:"CASL",action:t,label:n})}))},97458:function(e,t,n){"use strict";n.d(t,{Aq:function(){return a},Gn:function(){return s},U8:function(){return r},XK:function(){return o}});var i=n(17447),r={1:function(){return i.ZP.val("Dialogs.Signin.InvalidLoginOrPass","Invalid user name or password.")},2:function(){return i.ZP.val("Dialogs.Signin.MaxAllowedSimultaneousSessionsExceeded","You have exceeded the number of simultaneous sessions.")},5:function(){return i.ZP.val("Dialogs.Signin.Invactive","Your account is not active.")}},o={InvalidUserNameOrPassword:function(){return i.ZP.val("Errors.SignInFailed2","Invalid user name or password.")},SubscriptionRequired:function(){return i.ZP.val("Errors.SubscriptionRequired","Subscription Required.")},Found:function(){return i.ZP.val("Errors.UserFound","User Found.")},Error:function(){return i.ZP.val("Errors.SignInFailed2","SignIn Failed.")},InvalidToken:function(){return i.ZP.val("Errors.AccessTokenExpired","Invalid Access Token")},UserAlreadyExists:function(){return i.ZP.val("Errors.UserAlreadyExists","User Already Exists")}},a={InvalidUserName:r[1],InvalidPassword:r[1],UnknownError:function(){return i.ZP.val("Errors.ErrorOccurred","Error Occurred")},Found:o.Found,SubscriptionRequired:o.SubscriptionRequired,Unknown:function(){return i.ZP.val("Errors.ErrorOccurred","Error Occurred")},InvalidToken:o.InvalidToken,UserAlreadyExists:o.UserAlreadyExists},s={InvalidUserName:r[1],InvalidPassword:r[1],ExceedMaxSimultaneousSessionsPerUser:r[2],UnknownError:function(){return i.ZP.val("Errors.ErrorOccurred","Error Occurred")},ExceedMaxIncorrectPasswordAttempts:function(){return i.ZP.val("Errors.ErrorOccurred","Error Occurred")}}},31916:function(e,t,n){"use strict";var i,r;n.d(t,{GM:function(){return i},Gz:function(){return c},LA:function(){return s},Qz:function(){return a},SM:function(){return l},UQ:function(){return r},aq:function(){return o},gr:function(){return d},hi:function(){return u}}),i||(i={})),function(e){e.EmailAlertPromotional="EmailAlerts.Promotional",e.EmailAlertTechnical="EmailAlerts.Technical"}(r||(r={}));var o=function(e){this.payload=e,this.type=i.SignInRequested},a=function(e){this.payload=e,this.type=i.SignInSucceeded},s=function(e){this.payload=e,this.type=i.SignInFailed},u=function(e){this.payload=e,this.type=i.SignUpRequested},c=function(e){this.payload=e,this.type=i.SignUpSucceeded},l=function(e){this.payload=e,this.type=i.AccountChanged},d=function(e){this.payload=e,this.type=i.SignUpEmailAlertSet}},92063:function(e,t,n){"use strict";n.d(t,{G1:function(){return L},Ib:function(){return N},Ts:function(){return A},WC:function(){return M},Xh:function(){return E},gu:function(){return Z},nA:function(){return D},py:function(){return R},qb:function(){return k},rp:function(){return T},sX:function(){return P},w7:function(){return S}});var i,r=n(22970),o=n(19237),a=n(11569),s=n(98635),u=n(36296),c=n(77004),l=n(32349),d=n(83466),h=n(95766),p=n(58534),f=n(74164),m=n(88477),g=(n(75132),n(10314)),v=n(14347),y=n(79647),_=n(31916),b=n(97458);!function(e){e.SignIn="signin",e.SignUp="signup"}(i||(i={}));var w=new o.x,C={before:1,after:2};function I(e){w.next(e)}function P(){return c.reset(),c.monitorCookies(),c.authorized()}function x(e){var t=e.signInResult,n=e.enableAutologin,i=e.clientDirectives,r=e.authContext;if(!t)return Promise.reject(new Error("signInResult not specified"));if(0!==t.Status){var o=(b.U8[t.Status]||function(){return"Unknown error"})();return Promise.reject(new Error(o))}return y.Z.siteSignin(t.Token,n).then((function(e){if(void 0===e&&(e={}),"success"!==e.Status)return Promise.reject(new Error("Not authorized"));var n=function(){return(0,l.h)(i)};return c.userKey()!==t.UserKey?(I({event:C.before,authContext:r}),P().then(n).then(()):P().then(n).then(()})).catch(()}function S(e){var t=(void 0===e?{}:e).supressReauthorize;return(0,r.mG)(this,void 0,void 0,(function(){var e,n;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return[4,y.Z.signOut()];case 1:return i.sent(),[4,Promise.all([y.Z.siteSignOut(),(0,g.i)()])];case 2:return e=r.CR.apply(void 0,[i.sent(),2]),"function"==typeof(null==(n=e[1])?void 0:n.signOut)&&n.signOut(),t?[2]:(I({event:C.before}),[4,P()]);case 3:return i.sent(),I({event:C.after}),[2]}}))}))}function T(e){return(0,r.mG)(this,void 0,Promise,(function(){var t;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return[4,y.Z.register(e)];case 1:return[4,x({signInResult:t=n.sent(),enableAutologin:!1,clientDirectives:null,authContext:null})];case 2:return n.sent(),t.SponsorId?[4,(0,s.wW)(e.emailAddress,t.SponsorId)]:[3,4];case 3:n.sent(),n.label=4;case 4:return h.U.send(new _.Gz({system:d.a.Application})),[2,{verificationRequired:!!t.SponsorId}]}}))}))}function k(e){var t=e.userName,n=e.password,r=e.enableAutologin;return y.Z.signin(t,n).then((function(e){return x({signInResult:e,enableAutologin:r,authContext:{method:i.SignIn,system:"email"}})})).then((function(){h.U.send(new _.Qz({system:d.a.Application}))})).catch((function(e){return h.U.send(new _.LA({system:d.a.Application})),Promise.reject(e)}))}function A(e){var t=e.system,n=e.provider,r=e.enableAutologin,o=e.isWindowMode,a=e.returnUrl;return(n?(0,p.I)({provider:n,authtype:u.is.SIGNUP}):(0,f.z)({system:t,context:{isWindowMode:o,returnUrl:a}})).then((function(e){if(!e)return Promise.resolve();var o=e.authResult,a=e.signInResult,s=o&&o.directives;return x({signInResult:a,enableAutologin:!!r,clientDirectives:s,authContext:{system:t||n,method:o&&o.isNewUser?i.SignUp:i.SignIn}}).then((function(){var e=o&&o.isNewUser?new _.Gz({system:d.a.Social}):new _.Qz({system:d.a.Social});h.U.send(e)}))})).catch((function(e){return e&&e.code!==u.on.CANCELLED?(h.U.send(new _.LA({system:d.a.Social})),Promise.reject(e)):Promise.reject()}))}function E(e,t){var n=e.authKey;return y.Z.signinByKey(n).then((function(e){return x({signInResult:e,enableAutologin:!!t,authContext:null})})).then((function(e){return h.U.send(new _.Qz({system:d.a.Library})),e})).catch((function(e){return h.U.send(new _.LA({system:d.a.Library})),Promise.reject(e)}))}unction M(e){var t=e.system,n=e.provider,r=e.profile;if(!t&&!n)throw new Error("Neither system nor provider specified");var o=v.Z.isLogin();return(n?(0,p.I)({provider:n,authtype:u.is.SIGNUP,context:{linkToCurrentAccount:o}}):(0,f.z)({system:t,context:{profile:r,linkToCurrentAccount:o}})).then((function(e){if(!e)return Promise.resolve();var r=e.authResult;return x({signInResult:e.signInResult,enableAutologin:!0,clientDirectives:r&&r.directives,authContext:{system:t||n,method:r&&r.isNewUser?i.SignUp:i.SignIn}})})).catch((function(e){return Promise.reject(e)}))}function D(e){return e?y.Z.getExternalRequestKey().then((function(t){return y.Z.authorizeExternal({Key:t.Key,Data:e}).then((function(e){if(void 0===e&&(e={}),"Success"!==e.Status){var n=(b.XK[e.Status]||function(){return"Unknown error"})();return Promise.reject(new Error(n))}return E({authKey:t.Key},!0)})).catch((function(e){return(0,m.logError)(e),Promise.reject(e)}))})):Promise.reject(new Error("signInResult not specified"))}function L(){return y.Z.getSott().then((function(e){return e.Token})).catch(()}w.pipe((0,a.h)((function(e){return e.event===C.after}))).subscribe(();var N=w.pipe((0,a.h)((function(e){return e.event===C.before}))),R=w.pipe((0,a.h)((function(e){return e.event===C.after})))},80053:function(e,t,n){"use strict";n.r(t),n.d(t,{doRecoverPassword:function(){return _.gu},doSignIn:function(){return _.qb},doSignInExternal:function(){return _.Ts},init:function(){return S}});var i,r=n(22970),o=n(40180),a=n(81268),s=n(51947),u=n(36296),c=n(77004),l=n(83466),d=n(95766),h=n(54591),p=n(18518),f=n(92912),m=(n(75132),n(4169)),g=n(10314),v=n(17447),y=n(79647),_=n(92063),b=n(12159),w=n(81075),C=n(31916),I=null;function P(e){I&&I.unsubscribe(),I=e}function x(e){var t=e.signInResult,n=e.errorHandler,i=void 0===n?null:n;return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:f.ZP.show(),n.label=1;case 1:return n.trys.push([1,4,,6]),[4,(0,_.nA)(t)];case 2:return n.sent(),f.ZP.hide(),[4,Promise.resolve()];case 3:return[2,n.sent()];case 4:return e=n.sent(),f.ZP.hide(),"function"==typeof i&&i(e),[4,Promise.reject(e)];case 5:return[2,n.sent()];case 6:return[2]}}))}))}function S(){return(0,r.mG)(this,void 0,void 0,(function(){var e,t,n=this;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return[4,m.Z.loaded()];case 1:return i.sent(),m.Z.get("Authentication.EnableExternalAuthenticationScreenSet",!1)||m.Z.get("Authentication.EnableExternalAuthenticationLoginPlugin",!1)?[4,Promise.all([c.authorized(),(0,g.i)()])]:[3,3];case 2:e=r.CR.apply(void 0,[i.sent(),2]),(t=e[1])&&P(t.onLoginSuccess.subscribe((function(e){return(0,r.mG)(n,void 0,void 0,(function(){var n,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:n="email",(0,s.t0)({system:n}),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,x({signInResult:e})];case 2:return r.sent(),(0,s.l1)({system:n}),[3,4];case 3:return i=r.sent(),(0,s.RG)({error:i,system:n}),(0,h.Z)().show(i.message),t.signOut(),[3,4];case 4:return[2]}}))}))}))),i.label=3;case 3:return[2]}}))}))}t.default={signIn:(void 0===i&&(i=null),function(e){return void 0===e&&(e=null),m.Z.loaded().then((function(){var t,n,s=m.Z.get("Authentication.ExternalAuthenticationPage","").replace("__CURRENT_PAGE__",encodeURIComponent(window.location.href)),f=m.Z.get("Authentication.EnablePublisherAuthenticationWebService",!1);if(s&&f)return window.location.href=s,Promise.reject(void 0);if(m.Z.get("Authentication.EnableExternalAuthenticationScreenSet",!1))return new Promise((function(t,n){Promise.all([c.authorized(),(0,g.i)()]).then((function(i){var o=(0,r.CR)(i,2),s=(o[0],o[1]);P(s.onLoginSuccess.subscribe((function(e){s.closeModal(),x({signInResult:e,errorHandler:function(e){return(0,h.Z)().show(e.message)}}).then(t).catch(n)}))),s.onModalClosed.pipe((0,a.P)()).subscribe((function(e){(null==e?void 0:e.status)===p.Y.Cancel&&n()})),(null==e?void 0:e.initialState)===b.Z.states.signUp?s.showScreenSet(w.b.register):s.showScreenSet(w.b.signIn),d.U.send(new C.aq({system:l.a.Social}))}))}));var y="",I=!1,S="",T=m.Z.get("Authentication.OAuthProvider");return"object"==typeof T?(y=T.Name,S=(I=(null===(t=T.WindowMode)||void 0===t?void 0:t.Enabled)||!1)?(null===(n=T.WindowMode)||void 0===n?void 0:n.ReturnUrl)||window.location.href:null):y=T,y?(0,_.Ts)({system:y,enableAutologin:!0,isWindowMode:I,returnUrl:S}).then((function(){return Promise.resolve()})).catch((function(e){return e&&e.code!==u.on.CANCELLED?((0,h.Z)().show(e.message||"Unknown error"),Promise.reject(e)):Promise.reject()})):new Promise((function(t,n){b.Z.onHide((function(e,i){return i.status===p.Y.Ok?t(i.context):n({userCancelled:!0})})),b.Z.onShow((function(){m.Z.get("Authentication.EnableExternalAuthenticationLoginPlugin",!1)&&Promise.all([c.authorized(),(0,g.i)()]).then((function(e){var i=(0,r.CR)(e,2),o=(i[0],i[1]);"function"==typeof(null==o?void 0:o.showLoginPlugin)&&(P(o.onLoginSuccess.subscribe((function(e){o.closeModal(),x({signInResult:e,errorHandler:function(e){return(0,h.Z)().show(e.message)}}).then(t).catch(n)}))),o.onloginPluginLoad.subscribe((function(){return b.Z.resize()})),o.onloginPluginButtonClicked.subscribe((function(){return b.Z.hide()})),o.showLoginPlugin())}))}));var a,s=(0,o.assign)({},i,e),l=(a=b.Z,{signIn:function(e){var t=e.userName,n=e.password,i=e.enableAutologin;return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,_.qb)({userName:t,password:n,enableAutologin:i})];case 1:return r.sent(),[2,a.hide(p.Y.Ok)];case 2:return e=r.sent(),[2,a.setSignInError(e.message)];case 3:return[2]}}))}))},signInExternal:function(e){var t=e.system,n=e.provider,i=e.enableAutologin;return(0,_.Ts)({system:t,provider:n,enableAutologin:i}).then((function(){return a.hide(p.Y.Ok)})).catch((function(e){return e&&e.code!==u.on.CANCELLED?(a.setSignInError(e.message||"Unknown error"),Promise.reject(e)):Promise.reject()}))},recoverPassword:function(e){var t=e.logonName;return(0,r.mG)(this,void 0,void 0,(function(){var e,n;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,(0,_.gu)({userName:t})];case 1:return i.sent(),e=v.ZP.val("Accounting.PasswordRecovery.EmailConfirmationIsSent").replace(/\{0\}/g,t),(0,h.Z)().show(e),a.hide(p.Y.Ok),[3,3];case 2:return n=i.sent(),[2,(0,h.Z)().show(n.message)];case 3:return[2]}}))}))}});b.Z.show(s,l)}))}))}),externalSignIn:_.WC,onBeforeAccountChanged:_.Ib,onAfterAccountChanged:_.py,addMethodBeforeAccountWasChanged:function(e){if("function"!=typeof e)throw new TypeError("Method has to be a function");_.Ib.subscribe(e)},addMethodAfterAccountWasChanged:signOut:_.w7,signOutServices:function(){return y.Z.signOut()},signInByKey:_.Xh,showExternalLoginPlugin:function(){return(0,r.mG)(this,void 0,void 0,(function(){var e,t;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return[4,m.Z.loaded()];case 1:return n.sent(),m.Z.get("Authentication.EnableExternalAuthenticationLoginPlugin",!1)?[4,Promise.all([c.authorized(),(0,g.i)()])]:[3,3];case 2:e=r.CR.apply(void 0,[n.sent(),2]),(t=e[1])&&(P(t.onLoginSuccess.subscribe((function(e){return x({signInResult:e}).catch((function(e){(0,h.Z)().show(e.message),t.signOut()}))}))),t.showLoginPlugin()),n.label=3;case 3:return[2]}}))}))},showExternalLoginPage:function(e){return(0,r.mG)(this,void 0,void 0,(function(){var t,n;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return f.ZP.show(),[4,Promise.all([c.authorized(),(0,g.i)()])];case 1:return t=r.CR.apply(void 0,[i.sent(),2]),n=t[1],f.ZP.hide(),n&&n.showInlineScreenSet(w.b.signIn,e),[2]}}))}))},reauthorize:_.sX,init:S}},89767:function(e,t,n){"use strict";n.d(t,{AZ:function(){return g},B0:function(){return v},RH:function(){return f},rM:function(){return y},ve:function(){return m}});var i=n(20384),r=n(40180),o=n(53169),a=n(25881),s=n(46720),u=n(59527),c=n(17447),l=n(14347),d=[],h=!0,p=function(){h=!l.Z.isLogin()},f=function(){return(0,u.dG)("AnonymousContectRestricted").then((function(e){h=!l.Z.isLogin(),d=e.cids,s.Z.bind(l.Z,"onuserstatechanged",p)}))},m=g=function(e,t,n,o,s){i.support.retina&&(n<<=1),(0,r.isDate)(t)&&(t=c.ZP.formatDate(t,"date","yyyyMMdd"));var u=s?"".concat((0,a.U0)(s,n,1,!1)):"".concat((0,a.oY)(e,n),"&date=").concat(t);return o&&(u+="&x=".concat(o)),u},v=function(e,t,n){return{cid:e.cid,slug:e.slug,thumbUrl:g(e.cid,e.latestIssue.issueDate,t,e.latestIssue.expungeVersion,n),name:e.name,anonymousContentRestricted:h&&(i=e.cid,null==d?void 0:d.includes(i)),issueDate:c.ZP.formatDate(e.latestIssue.issueDate,"v7.Client.DateFormat.Issue","d MMM yyyy"),supplements:e.supplements,latestIssue:e.latestIssue};var i},y=function(e){switch(e){case o.lR.ByAlphabet:return{name:o.jl.Name,order:o.As.Ascending};case o.lR.MostRecent:return{name:o.jl.LatestIssueDate,order:o.As.Descending};case o.lR.MostPopular:default:return{name:o.jl.Rank,order:o.As.Descending}}}},92895:function(e,t,n){"use strict";n.d(t,{GM:function(){return i},Jl:function(){return a},ZW:function(){return s},tp:function(){return o},zT:function(){return u}});var i,r=n(22970);!function(e){e.ContextMenu="[ContextMenu] ItemSelected",e.ContextMenuCompleted="[ContextMenu] ItemActivatedCompleted",e.ContextMenuFailed="[ContextMenu] ItemActivatedFailed",e.IssueContextMenu="[ContextMenu] IssueContextMenu"}(i||(i={}));var o=function(e){this.payload=e,this.type=i.ContextMenu},a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.ContextMenuCompleted,t}return(0,r.ZT)(t,e),t}(o),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.ContextMenuFailed,t}return(0,r.ZT)(t,e),t}(o),u=function(e){this.payload=e,this.type=i.IssueContextMenu}},99806:function(e,t,n){"use strict";n.d(t,{z:function(){return i.Z}});var i=n(71357)},25900:function(e,t,n){"use strict";n.d(t,{v:function(){return r}});var i=n(19153),r=function(e){this.payload=e,this.type=i.G.Exception}},19153:function(e,t,n){"use strict";n.d(t,{E:function(){return o},G:function(){return i}});var i,r=n(40180);!function(e){e.Exception="Exception"}(i||(i={}));var o=,92828:function(e,t,n){"use strict";n.d(t,{O:function(){return h}});var i,r=n(22970),o=n(56051),a=n(19237),s=n(18518),u=n(4169),c=n(17447),l=n(81075),d=((i={})[l.b.signIn]="signIn",i),h=function(){function e(){this.loginSuccess=new a.x,this.modalClosed=new a.x,this.resMapping={title:"Dialogs.Signin.Header",signUpTitle:"Dialogs.Signup.Header",signUpTerms:"Dialogs.Signup.TermsOfUse",signUpLabel:"Buttons.SignUp",signUpSubmitLabel:"Buttons.SignUp"}}return e.prototype.load=function(){return(0,r.mG)(this,void 0,Promise,(function(){var e,t,n,i,a,l,d=this;return(0,r.Jh)(this,(function(h){switch(h.label){case 0:return[4,Promise.all([u.Z.loaded(),c.ZP.loaded()])];case 1:if(h.sent(),!(e=u.Z.get("Authentication.Auth0"))||!e.enabled)return[2,Promise.reject()];this._enabled=!0,this._logoutUrl=e.logoutUrl;try{for(t=(0,r.XA)(Object.keys(this.resMapping)),n=t.next();!n.done;n=t.next())i=n.value,this.resMapping[i]=c.ZP.val(this.resMapping[i])||""}catch(e){a={error:e}}finally{try{n&&!n.done&&(l=t.return)&&l.call(t)}finally{if(a)throw a.error}}e.options.languageDictionary=(0,r.pi)((0,r.pi)({},e.options.languageDictionary),this.resMapping);try{this._lock=new o.Auth0Lock(e.clientId,e.domain,e.options),this._lock.on("authenticated",(function(e){d._authenticated=!0,d._lock.hide(),d.loginSuccess.next(e)})),this._lock.on("hide",(function(){return d.modalClosed.next(d._authenticated?s.Y.Ok:s.Y.Cancel)})),this._lock.checkSession({responseType:"token id_token",scope:"openid profile email",timeout:5e3,redirectUri:e.callbackUrl},(function(e,t){!e&&t.accessToken&&d.loginSuccess.next(t)}))}catch(e){return[2,Promise.reject()]}return[2,Promise.resolve()]}}))}))},e.prototype.signIn=function(){this.showScreenSet(l.b.signIn)},e.prototype.signOut=e.prototype.closeModal=function(){this._lock.hide()},e.prototype.showScreenSet=function(e){if(!d[e])throw new Error("screen ".concat(e," is not defined."));if(e!==l.b.signIn)throw new Error("Method not implemented.");this._lock.show()},e.prototype.showInlineScreenSet=function(e,t){throw new Error("Method not implemented.")},Object.defineProperty(e.prototype,"onLoginSuccess",{get:function(){return this.loginSuccess.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onModalClosed",{get:function(){return this.modalClosed.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},enumerable:!1,configurable:!0}),e}()},37824:function(e,t,n){"use strict";n.d(t,{z:function(){return l}});var i=n(22970),r=n(455),o=n(19237),a=n(56371),s=n(4169),u=n(14347),c=n(80053),l=function(){eturn e.prototype.getConfig=function(e){return{enabled:s.Z.get("".concat(e,".Enabled")),clientId:s.Z.get("".concat(e,".ClientId")),domain:s.Z.get("".concat(e,".Domain"))||s.Z.get("".concat(e,".ApiUrl")),scope:s.Z.get("".concat(e,".Scope")),audience:s.Z.get("".concat(e,".Audience")),returnUrl:s.Z.get("".concat(e,".ReturnUrl"))}},e.prototype.isAuth0Authenticated=function(e){var t=this;return new Promise((function(n,i){t.api.checkSession({audience:e.audience,scope:e.scope,responseType:"token",redirectUri:e.returnUrl},(function(e,t){return n(!(e||!t))}))}))},e.prototype.load=function(){return(0,i.mG)(this,void 0,Promise,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return[4,s.Z.loaded()];case 1:return e.sent(),this.auth0Config=this.getConfig("Authentication.Auth0SSO"),this.auth0Config&&this.auth0Config.enabled?(this.api=new r.default.WebAuth({domain:this.auth0Config.domain,clientID:this.auth0Config.clientId}),u.Z.isLogin()?[3,3]:[4,this.isAuth0Authenticated(this.auth0Config)]):[2,Promise.reject()];case 2:e.sent()&&c.default.signIn(),e.label=3;case 3:return[2,Promise.resolve()]}}))}))},Object.defineProperty(e.prototype,"enabled",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onLoginSuccess",{get:function(){return this.loginSuccess.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onModalClosed",{get:function(){return new a.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onLogoutSuccess",{get:function(){return this.logoutSuccess.asObservable()},enumerable:!1,configurable:!0}),e.prototype.signIn=e.prototype.signOut=function(){this.api.logout({returnTo:window.location.href,clientID:this.auth0Config.clientId}),this.logoutSuccess.next()},e.prototype.showScreenSet=e.prototype.showInlineScreenSet=e}()},69358:function(e,t,n){"use strict";n.d(t,{u:function(){return c}});var i,r=n(22970),o=n(4169),a=n(19237),s=n(81075),u=((i={})[s.b.signIn]="signIn",i[s.b.register]="register",i),c=function(){function e(){this.purchaseDialogEnabled=!1,this.enabled=!1,this._screenSetParameters={},this._loginUIParameters={},this.loginSuccess=new a.x,this.modalClosed=new a.x,this.modalReady=new a.x,this.loginPluginLoad=new a.x,this.loginPluginButtonClicked=new a.x,this.screenSetEventHandlers={onAfterScreenLoad:this.onAfterScreenLoad,onHide:this.onHide},this.loginPluginEventHandlers={onLoad:this.onPluginLoad,onButtonClicked:this.onPluginButtonClicked},this.onLoginSuccess=this.loginSuccess.asObservable(),this.onModalClosed=this.modalClosed.asObservable(),this.onloginPluginLoad=this.loginPluginLoad.asObservable(),this.onloginPluginButtonClicked=this.loginPluginButtonClicked.asObservable()}return e.prototype.load=function(){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return[4,o.Z.loaded()];case 1:if(t.sent(),!(e=o.Z.get("Authentication.Gigya"))||!e.enabled)return[2,Promise.reject()];if(this.enabled=!0,this._screenSetParameters=e.screenSets||{},this._loginUIParameters=e.LoginUIParams||{},window.gigya)return[3,5];t.label=2;case 2:return t.trys.push([2,4,,5]),[4,this.loadScript(e)];case 3:return t.sent(),this.initialize(),[3,5];case 4:return t.sent(),[2,Promise.reject()];case 5:return[2,Promise.resolve()]}}))}))},e.prototype.signOut=function(){window.gigya.accounts.logout()},e.prototype.signIn=function(){this.showScreenSet(s.b.signIn)},e.prototype.closeModal=function(){},e.prototype.showScreenSet=function(e){var t=this,n=u[e];if(!n)throw new Error("screen ".concat(e," is not defined."));var i=this._screenSetParameters[n];if(!i||!i.screenSet)throw new Error("screen ".concat(e," is not configured."));Object.keys(this.screenSetEventHandlers).forEach((function(e){return i[e]=t.screenSetEventHandlers[e].bind(t)})),window.gigya.accounts.showScreenSet(i)},e.prototype.showInlineScreenSet=function(e,t){this.showScreenSet(e)},e.prototype.showLoginPlugin=function(){var e=this,t=this._loginUIParameters;t.containerID="LoginPluginComponentDiv",Object.keys(this.loginPluginEventHandlers).forEach((function(n){return t[n]=e.loginPluginEventHandlers[n].bind(e)})),window.gigya.socialize.showLoginUI(t)},e.prototype.loadScript=function(e){return(0,r.mG)(this,void 0,Promise,(function(){return(0,r.Jh)(this,(function(t){return[2,new Promise((function(t,n){var i=document.createElement("script");i.type="text/javascript",i.src="https://cdns.gigya.com/JS/socialize.js?apikey=".concat(e.apiKey),i.text=JSON.stringify(e.Global),i.onload=function(){return t()},i.onerror=n;var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(i,r)}))]}))}))},e.prototype.initialize=function(){return(0,r.mG)(this,void 0,void 0,(function(){var e=this;return(0,r.Jh)(this,(function(t){return window.gigya.socialize.addEventHandlers({onLogin:this.onLogin.bind(this)}),window.gigya.accounts.getAccountInfo({callback:),[2]}))}))},e.prototype.onLogin=function(e){this.loginSuccess.next(e)},e.prototype.onAfterScreenLoad=function(){this.modalReady.next(),document.body.classList.add("gigya-body")},e.prototype.onHide=function(){this.modalClosed.next(),document.body.classList.remove("gigya-body")},e.prototype.onPluginLoad=function(){this.loginPluginLoad.next()},e.prototype.onPluginButtonClicked=function(){this.loginPluginButtonClicked.next()},e}()},40739:function(e,t,n){"use strict";var i=n(66353),r=n(84127),o=function(){function e(){}return e.prototype.create=function(e){if((0,i.hr)(e))throw new TypeError("Provider value is expected to be a non-empty string");switch(e){case"Janrain":return new r.zO;case"Gigya":return new r.u7;case"Piano":return new r.id;case"LoginRadius":return new r.$c;case"Auth0":return new r.On;case"Auth0SSO":return new r.zH;default:throw new TypeError("Provider ".concat(e," is not supported"))}},e}();t.Z=new o},84127:function(e,t,n){"use strict";n.d(t,{$c:function(){return a.$},On:function(){return s.O},id:function(){return o.i},u7:function(){return i.u},zH:function(){return u.z},zO:function(){return r.z}});var i=n(69358),r=n(20345),o=n(67359),a=n(58394),s=n(92828),u=n(37824)},20345:function(e,t,n){"use strict";n.d(t,{z:function(){return f}});var i,r=n(22970),o=n(20384),a=n(4169),s=n(71357),u=n(17447),c=n(55193),l=n(81075),d=n(19237),h=n(43541),p=((i={})[l.b.signIn]="signIn",i[l.b.forgotPassword]="forgotPassword",i[l.b.resetPasswordRequestCode]="resetPasswordRequestCode",i),f=function(){function e(){this.purchaseDialogEnabled=!1,this.enabled=!1,this.loginSuccess=new d.x,this.modalClosed=new d.x,this.modalReady=new d.x,this.janrainEventHandlers={onCaptureEmailVerificationSuccess:this.onCaptureEmailVerificationSuccess,onCaptureLoginSuccess:this.onCaptureLoginSuccess,onCaptureLoginFailed:this.onCaptureLoginFailed,onCaptureSessionFound:this.onCaptureSessionFound,onCaptureAccountReactivateSuccess:this.onCaptureAccountReactivateSuccess,onCaptureRegistrationSuccess:this.onCaptureRegistrationSuccess,onCaptureAccountReactivateFailed:this.onCaptureAccountReactivateFailed,onModalOpen:this.onModalOpen,onModalClose:this.onModalClose,onCaptureScreenShow:this.onCaptureScreenShow,onCaptureModalReady:this.onCaptureModalReady},this.onLoginSuccess=this.loginSuccess.asObservable(),this.onModalClosed=this.modalClosed.asObservable()}return e.prototype.load=function(){return(0,r.mG)(this,void 0,void 0,(function(){var e;return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return[4,Promise.all([a.Z.loaded(),s.Z.loaded(),u.ZP.loaded()])];case 1:if(t.sent(),!(e=a.Z.get("Authentication.Janrain"))||!e.enabled)return[2,Promise.reject()];if(this.enabled=!0,window.janrain)return[3,6];window.janrain=window.janrain||{settings:{}},window.janrain=(0,r.pi)((0,r.pi)({},window.janrain),{settings:(0,r.pi)({},e.settings)}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,this.loadScript(e)];case 3:return t.sent(),[4,this.initialize()];case 4:return t.sent(),this.renderScreenByUrlParams(),[3,6];case 5:return t.sent(),[2,Promise.reject()];case 6:return[2,Promise.resolve()]}}))}))},e.prototype.signOut=e.prototype.signIn=function(){this.showScreenSet(l.b.signIn)},e.prototype.closeModal=e.prototype.showScreenSet=function(e){var t=p[e];if(!t)throw new Error("screen ".concat(e," is not defined."));window.janrain.capture.ui.renderScreen(t)},e.prototype.showInlineScreenSet=function(e,t){this.showScreenSet(e)},e.prototype.loadScript=function(e){return(0,r.mG)(this,void 0,Promise,(function(){return(0,r.Jh)(this,(function(t){return[2,new Promise((function(t,n){var i=document.createElement("script");i.type="text/javascript",i.id="janrainAuthWidget",i.src=e.httpLoadUrl,i.onload=function(){return t()},i.onerror=n;var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(i,r)}))]}))}))},e.prototype.initialize=function(){return(0,r.mG)(this,void 0,void 0,(function(){var e=this;return(0,r.Jh)(this,(function(t){return[2,new Promise((function(t){window.janrain.ready=!0,e.loadScreenSets(),e.modalReady.subscribe(t),window.janrainCaptureWidgetOnLoad=function(){Object.keys(e.janrainEventHandlers).forEach((function(t){return window.janrain.events[t].addHandler(e.janrainEventHandlers[t].bind(e))})),window.janrain.capture.ui.start()}}))]}))}))},e.prototype.loadScreenSets=function(){var e=document.createElement("div");e.setAttribute("data-bind","allowBindings: false");var t=document.createElement("div");t.setAttribute("id","janrainScreensets"),e.appendChild(t),document.body.appendChild(e),s.Z.renderTo("v7.Client.Janrain.Screensets",null,o(t))},e.prototype.renderScreenByUrlParams=function(){var e=new h.Z(window.location.href).getQueryParamValue("screenToRender");e&&void 0!==e&&window.janrain.capture.ui.renderScreen(e)},e.prototype.onCaptureEmailVerificationSuccess=function(){},e.prototype.onCaptureLoginSuccess=function(e){this.loginSuccess.next(e)},e.prototype.onCaptureRegistrationSuccess=function(e){this.loginSuccess.next(e)},e.prototype.onCaptureAccountReactivateSuccess=function(e){"success"===e.status&&window.janrain.capture.ui.renderScreen("reactivateAccountSuccess")},e.prototype.onCaptureSessionFound=function(e){this.loginSuccess.next(e)},e.prototype.onCaptureLoginFailed=function(e){"accountDeactivated"===e.statusMessage&&window.janrain.capture.ui.renderScreen("accountDeactivated")},e.prototype.onCaptureAccountReactivateFailed=function(e){"error"===e.status&&window.janrain.capture.ui.renderScreen("reactivateAccount")},e.prototype.onModalOpen=e.prototype.onModalClose=e.prototype.onCaptureScreenShow=function(e){"emailVerificationNotification"===e.screen?window.janrain.capture.ui.modal.close():c.kb.enableTouchScroll(o("#".concat(e.screen)))},e.prototype.onCaptureModalReady=function(){this.modalReady.next()},e}()},36023:function(e,t,n){"use strict";n.d(t,{J:function(){return f},Z:function(){return i}});var i,r=n(60231),o=n(40180),a=n(19237),s=n(36296),u=n(91574),c=n(18518),l=n(17447),d=n(92063),h=n(39188);!function(e){e[e.Signin=0]="Signin",e[e.Signup=1]="Signup",e[e.ForgotPassword=2]="ForgotPassword",e[e.ResetPassword=3]="ResetPassword"}(i||(i={}));var p=function(){function e(e){var t,n=this;this.state=i,this.resMapping=((t={})[i.Signin]="Dialogs.Signin.Signin",t[i.Signup]="Dialogs.Signup.Email",t[i.ForgotPassword]="Dialogs.Signin.PasswordRecovery",t[i.ResetPassword]="Dialogs.Signin.PasswordRecovery",t),this.dialog=e,this.header=(0,r.observable)(),this.currentState=(0,r.observable)(),this.errorMessage=(0,r.observable)(),this.externalSystems=(0,h.Bu)(),this.showSocialNetwork=ko.computed((function(){return(0,h.b1)()&&n.externalSystems.length>0})),this.signInExternal=(0,o.debounce)((function(e){(0,d.Ts)({system:e,enableAutologin:!0}).then((function(){return n.close()})).catch((function(e){return e&&e.code!==s.on.CANCELLED?(n.errorMessage(e.message||"Unknown error"),setTimeout((function(){return n.resize()}),0),Promise.reject(e)):Promise.reject()}))}),300,{leading:!1,trailing:!0}),this.currentState.subscribe((function(e){n.errorMessage(""),n.header(l.ZP.val(n.resMapping[e])||""),setTimeout((function(){return n.resize()}),0)}))}return e.prototype.back=function(){this.currentState()===i.Signin?this.cancel():this.currentState(i.Signin)},e.prototype.resize=function(){this.dialog.resize()},e.prototype.cancel=function(){this.errorMessage(""),this.dialog.hide(c.Y.Cancel)},e.prototype.close=function(){this.errorMessage(""),this.dialog.hide(c.Y.Close)},e.prototype.setState=e}(),f=function(){function e(){this.dialog=u.Z.createInstance(),this.dialogModel=new p(this.dialog),this.dialogShowed=new a.x,this.dialogClosed=new a.x}return Object.defineProperty(e.prototype,"onShow",{get:function(){return this.dialogShowed.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onClose",{get:function(){return this.dialogClosed.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"errorMessage",{set:function(e){this.dialogModel.errorMessage(e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{set:function(e){this.dialogModel.setState(e)},enumerable:!1,configurable:!0}),e.prototype.close=function(){this.dialog.hide(c.Y.Close)},e.prototype.show=function(){var e=this;this.dialog.show({templateName:"v7.Client.Dialogs.Signin.LoginRadius",model:this.dialogModel}).onShow((function(){return e.dialogShowed.next()})).onHide((function(t,n){return e.dialogClosed.next(n)}))},e.prototype.resize=function(){this.dialog.resize()},e}()},58394:function(e,t,n){"use strict";n.d(t,{$:function(){return P}});var i,r,o,a=n(22970),s=n(19237),u=n(81268),c=n(1753),l=n(54591),d=n(94267),h=n(26783),p=n(4169),f=n(6677),m=n(17447),g=n(71357),v=n(92063),y=n(81075),_=n(36023),b=n(45710),w=n(50719),C=((i={})[y.b.signIn]=_.Z.Signin,i[y.b.register]=_.Z.Signup,i[y.b.resetPasswordRequestCode]=_.Z.ResetPassword,i),I=((r={})[w.ow.LOGIN]=_.Z.Signin,r[w.ow.REGISTRATION]=_.Z.Signup,r[w.ow.RESET_PASSWORD]=_.Z.ResetPassword,r);!function(e){e[e.LINK_ALREADY_USED=974]="LINK_ALREADY_USED",e[e.LINK_EXPIRED=975]="LINK_EXPIRED",e[e.LINK_TOKEN_INVALID=1063]="LINK_TOKEN_INVALID",e[e.NEW_PASSWORD_INVALID=1015]="NEW_PASSWORD_INVALID",e[e.INVAlID_USER_PASSWORD=966]="INVAlID_USER_PASSWORD",e[e.USER_DOES_NOT_EXIST=938]="USER_DOES_NOT_EXIST",e[e.EMAIL_ADDRESS_TAKEN=936]="EMAIL_ADDRESS_TAKEN"}(o||(o={}));var P=function(){function e(){this.enabled=!1,this.loginSuccess=new s.x,this.modalClosed=new s.x,this.logoutSuccess=new s.x,this.onLoginSuccess=this.loginSuccess.asObservable(),this.onModalClosed=this.modalClosed.asObservable(),this.onLogoutSuccess=this.logoutSuccess.asObservable(),this.showScreenSet=this.showScreenSet.bind(this)}return e.prototype.load=function(){return(0,a.mG)(this,void 0,void 0,(function(){var e,t,n,i,r,o,s,u,c=this;return(0,a.Jh)(this,(function(l){switch(l.label){case 0:return[4,Promise.all([p.Z.loaded(),g.Z.loaded(),m.ZP.loaded()])];case 1:if(l.sent(),!(e=p.Z.get("Authentication.LoginRadius"))||!e.enabled)return[2,Promise.reject()];if(this.enabled=!0,window.LoginRadiusV2)return[3,5];this.dialog=new _.J,l.label=2;case 2:return l.trys.push([2,4,,5]),t=e.Options,n=e.Url,i=e.sso,r=e.endPoints,[4,Promise.all([(0,h.B)(n),(0,v.G1)()])];case 3:return o=a.CR.apply(void 0,[l.sent(),2]),s=o[1],this.lrOptions=(0,a.pi)((0,a.pi)({},t),{verificationUrl:t.verificationUrl||window.location,sott:s}),this.endPoints=r||{},this.ssoConfig=i||{},this.initialize(),this.ssoConfig.enabled&&setTimeout((function(){c.initializeSSO()}),1e3),[3,5];case 4:return u=l.sent(),f.Z.error(u),[2,Promise.reject()];case 5:return[2,Promise.resolve()]}}))}))},e.prototype.signIn=function(){this.showModal()},e.prototype.signOut=function(){this.lrObject.init("logout"),this.ssoConfig.enabled&&(0,c.kA)({url:this.ssoConfig.logoutUrl,requestConfig:{accept:"application/json",cache:"no-store"}}),this.logoutSuccess.next()},e.prototype.closeModal=function(){this.dialog.close()},e.prototype.showScreenSet=function(e){var t=C[e];if(void 0===t)throw new Error("screen ".concat(e," is not defined."));this.showModal(t)},e.prototype.showInlineScreenSet=e.prototype.initialize=function(){var e=this;this.lrObject=new window.LoginRadiusV2(this.lrOptions),this.lrObject.$hooks.register("afterFormRender",(function(t){return(0,a.mG)(e,void 0,void 0,(function(){var e;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return e=Object.keys(I).find((function(e){return e.toLowerCase()===t.toLowerCase()})),I[e]===this.initialState&&(this.dialog.state=this.initialState,d.Z.hide()),t!==w.ow.LOGIN?[3,2]:[4,b.p.initDOM(".".concat("identity-form"))];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))})),this.lrObject.$hooks.call("setButtonsName",{forgotpassword:m.ZP.val("Dialogs.Signin.SendEmail"),login:m.ZP.val("Buttons.Login.Text"),registration:m.ZP.val("Buttons.SignUp")}),this.lrObject.$hooks.call("customizeFormLabel",{emailid:m.ZP.val("Accounting.EmailAddress"),password:m.ZP.val("Accounting.Password")}),this.lrObject.$hooks.call("mapErrorMessages",[{code:o.NEW_PASSWORD_INVALID,description:m.ZP.val("Errors.PasswordUnique","Your new password is too similar to your old passwords. Please provide a new password."),message:m.ZP.val("Errors.PasswordUnique","Your new password is too similar to your old passwords. Please provide a new password.")},{code:o.INVAlID_USER_PASSWORD,description:m.ZP.val("Dialogs.Signin.InvalidLoginOrPass","Invalid user name or password."),message:m.ZP.val("Dialogs.Signin.InvalidLoginOrPass","Invalid user name or password.")},{code:o.USER_DOES_NOT_EXIST,description:m.ZP.val("Dialogs.Signin.InvalidLoginOrPass","Invalid user name or password."),message:m.ZP.val("Dialogs.Signin.InvalidLoginOrPass","Invalid user name or password.")},{code:o.EMAIL_ADDRESS_TAKEN,description:m.ZP.val("Errors.LogonEmailUnique","Account with this email already exists"),message:m.ZP.val("Errors.LogonEmailUnique","Account with this email already exists")}]),this.loginWidget=new w.Up("login-container",this.lrObject),this.loginWidget.onSuccess.subscribe((function(t){e.loginSuccess.next(t),e.closeModal()})),this.loginWidget.onError.subscribe(this.onError.bind(this)),this.socialLoginWidget=new w.L$("sociallogin-container",this.lrObject,"sociallogintemplate",".social-login-interface"),this.socialLoginWidget.onSuccess.subscribe((function(t){e.loginSuccess.next(t),e.closeModal()})),this.socialLoginWidget.onError.subscribe(this.onError.bind(this)),this.forgotPasswordWidget=new w.UV("forgotpassword-container",this.lrObject),this.forgotPasswordWidget.onSuccess.subscribe((function(t){var n=m.ZP.val("Accounting.PasswordRecovery.EmailConfirmationIsSent");(0,l.Z)().show(n),e.loginSuccess.next(t),e.closeModal()})),this.forgotPasswordWidget.onError.subscribe(this.onError.bind(this)),this.registrationWidget=new w.t6("registration-container",this.lrObject),this.registrationWidget.onSuccess.subscribe((),this.registrationWidget.onError.subscribe(this.onError.bind(this)),this.resetPasswordWidget=new w.$5("resetpassword-container",this.lrObject),this.resetPasswordWidget.onSuccess.subscribe((function(t){e.closeModal();var n=m.ZP.val("Accounting.PasswordRecovery.PasswordChanged");(0,l.Z)().show(n),(0,l.Z)().onClosed((function(){return e.signIn()}))})),this.resetPasswordWidget.onError.subscribe(this.onError.bind(this));var t=this.lrObject.util.getQueryParameterByName("vtype");t&&"reset"===t&&this.showModal(_.Z.ResetPassword)},e.prototype.showModal=function(e){var t=this;void 0===e&&(e=_.Z.Signin),this.initialState=e,this.dialog.onShow.pipe((0,u.P)()).subscribe((function(){return t.initForms()})),this.dialog.onClose.pipe((0,u.P)()).subscribe((function(e){return t.modalClosed.next(e)})),this.dialog.show()},e.prototype.initForms=function(){return(0,a.mG)(this,void 0,void 0,(function(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,d.Z.show()];case 1:return e.sent(),this.loginWidget.initForm(),this.socialLoginWidget.initForm(),this.forgotPasswordWidget.initForm(),this.registrationWidget.initForm(),this.resetPasswordWidget.initForm(),[2]}}))}))},e.prototype.initializeSSO=function(){return(0,a.mG)(this,void 0,void 0,(function(){var e,t,n,i,r,o,s;return(0,a.Jh)(this,(function(u){switch(u.label){case 0:return[4,(0,c.kA)({url:this.ssoConfig.loginUrl,requestConfig:{withCredentials:!0,accept:"application/json",cache:"no-store"}})];case 1:return(e=u.sent()).isauthenticated?(t=e.token,n=(0,c.kA)({url:"".concat(this.endPoints.token,"?apiKey=").concat(this.lrOptions.apiKey,"&jwtapp=").concat(this.lrOptions.integrationName,"&access_token=").concat(t),requestConfig:{accept:"application/json",cache:"no-store"}}),i=(0,c.kA)({url:"".concat(this.endPoints.account,"?apiKey=").concat(this.lrOptions.apiKey,"&access_token=").concat(t),requestConfig:{accept:"application/json",cache:"no-store"}}),[4,Promise.all([n,i])]):[3,3];case 2:r=a.CR.apply(void 0,[u.sent(),2]),o=r[0],s=r[1],o.signature&&this.loginSuccess.next({jwttoken:o.signature,access_token:t,Profile:s}),u.label=3;case 3:return[2]}}))}))},e.prototype.onError=function(e){this.dialog.errorMessage=e[0].Message,this.dialog.resize()},e}()},45710:function(e,t,n){"use strict";n.d(t,{p:function(){return i.p}});var i=n(97388)},97388:function(e,t,n){"use strict";n.d(t,{p:function(){return a}});var i=n(22970),r=n(6677),o=n(17447),a=function(){function e(){}return e.initDOM=function(t){return(0,i.mG)(this,void 0,void 0,(function(){var n,a,s,u,c;return(0,i.Jh)(this,(function(i){if(n=document.querySelector("".concat(t)),a=n.querySelectorAll("[type=password]"))try{s=document.createElement("span"),u=e.DOM.class,s.setAttribute("aria-hidden","true"),(c=s.classList).add.apply(c,[u.pri,u.priHidden]),a.forEach((function(t){var n,i=document.createElement("a");(n=i.classList).add.apply(n,[u.btnHelp,u.btnIcon]),i.title=o.ZP.val(e.DOM.resources.showPassword),i.appendChild(s),t.after(i),e.addListeners(t,i,s)}))}catch(e){r.Z.error("Unable to load show password button UI")}return[2]}))}))},e.addListeners=function(t,n,i){if(n&&i){var r=e.DOM.class;n.addEventListener("click",(function(){"password"===t.type?(t.type="text",n.title=o.ZP.val(e.DOM.resources.showPassword),i.classList.replace(r.priHidden,r.priVisible)):(t.type="password",n.title=o.ZP.val(e.DOM.resources.hidePassword),i.classList.replace(r.priVisible,r.priHidden)),t.focus()}))}},e.DOM={class:{pri:"pri",priHidden:"pri-hidden",priVisible:"pri-visible",btnIcon:"btn-icon",btnHelp:"btn-help"},resources:{showPassword:"Dialogs.SignIn.ShowPassword",hidePassword:"Dialogs.SignIn.HidePassword"}},e}()},12716:function(e,t,n){"use strict";n.d(t,{Y0:function(){return s},ow:function(){return i}});var i,r,o=n(19237),a=n(6677);!function(e){e.FORGOT_PASSWORD="forgotPassword",e.LOGIN="login",e.SOCIAL_LOGIN="socialLogin",e.REGISTRATION="registration",e.VERIFY_EMAIL="verifyEmail",e.RESET_PASSWORD="resetPassword"}(i||(i={})),function(e){e.SUCCESS="identity-screen-success--active",e.ERROR="identity-screen-error--active",e.FORM="identity-screen-form--active"}(r||(r={}));var s=function(){function e(e){this.successSubject=new o.x,this.errorSubject=new o.x,this.onSuccessInternal=this.onSuccessInternal.bind(this),this.onErrorInternal=this.onErrorInternal.bind(this),this.widgetOptions={container:e,onError:this.onErrorInternal,onSuccess:this.onSuccessInternal}}return e.prototype.initForm=function(){document.querySelector("#".concat(this.widgetOptions.container))&&this.lrObject.init(this.widgetType,this.widgetOptions)},e.prototype.onSuccessInternal=function(e){this.successSubject.next(e)},e.prototype.onErrorInternal=Object.defineProperty(e.prototype,"onSuccess",{get:function(){return this.successSubject.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onError",{get:function(){return this.errorSubject.asObservable()},enumerable:!1,configurable:!0}),e}()},12399:function(e,t,n){"use strict";n.d(t,{U:function(){return o}});var i=n(22970),r=n(12716),o=function(e){function t(t,n){var i=e.call(this,t)||this;return i.widgetType=r.ow.FORGOT_PASSWORD,i.lrObject=n,i}return(0,i.ZT)(t,e),t}(r.Y0)},50719:6850:function(e,t,n){"use strict";n.d(t,{U:function(){return a}});var i=n(22970),r=n(6677),o=n(12716),a=function(e){function t(t,n){var i=e.call(this,t)||this;return i.widgetType=o.ow.LOGIN,i.lrObject=n,r.Z.log("login widget created"),i}return(0,i.ZT)(t,e),t}(o.Y0)},22323:function(e,t,n){"use strict";n.d(t,{t:function(){return o}});var i=n(22970),r=n(12716),o=function(e){function t(t,n){var i=e.call(this,t)||this;return i.widgetType=r.ow.REGISTRATION,i.lrObject=n,i}return(0,i.ZT)(t,e),t}(r.Y0)},23506:function(e,t,n){"use strict";n.d(t,{$:function(){return o}});var i=n(22970),r=n(12716),o=function(e){function t(t,n){var i=e.call(this,t)||this;return i.widgetType=r.ow.RESET_PASSWORD,i.lrObject=n,i}return(0,i.ZT)(t,e),t}(r.Y0)},47570:function(e,t,n){"use strict";n.d(t,{L:function(){return o}});var i=n(22970),r=n(12716),o=function(e){function t(t,n,i,o){var a=e.call(this,t)||this;return a.widgetType=r.ow.SOCIAL_LOGIN,a.lrObject=n,a.widgetOptions.templateName=i,a.customInterface=o,a}return(0,i.ZT)(t,e),t.prototype.initForm=function(){this.lrObject.customInterface(this.customInterface,this.widgetOptions),e.prototype.initForm.call(this),window.social_lrobj=this.lrObject},t}(r.Y0)},67359:function(e,t,n){"use strict";n.d(t,{i:function(){return m}});var i,r=n(22970),o=n(19237),a=n(81268),s=n(26783),u=n(4169),c=n(81075),l=n(40739),d=n(2099),h="offer_params",p="jwt_token",f=((i={})[c.b.signIn]="login",i),m=function(){function e(){var e=this;this._enabled=!1,this._experience=null,this.loginSuccess=new o.x,this.modalClosed=new o.x,this.identityAdapter=null,this.pianoEventHandlers={loggedIn:this.loggedIn.bind(this),closedCallback:this.closedCallback.bind(this)},this.pianoEndpoints={Janrain:{verify:,Gigya:{verify:function(t){return e.pianoCallApi("/anon/gigya/verifyAccountInfo",{uid:t.UID,signature:t.UIDSignature,signature_timestamp:t.signatureTimestamp,url:window.location.href})}},LoginRadius:{verify:function(t){return(0,r.mG)(e,void 0,void 0,(function(){var e,n,i,o;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:localStorage.setItem(p,t.jwttoken),this.setExternalJWT(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.pianoCallApi("/anon/user/get",{uid:t.UID,user_token:t.jwttoken})];case 2:case 3:return r.sent(),[3,4];case 4:return[2,Promise.resolve({access:{user_token:t.jwttoken,user:{uid:null===(e=null==t?void 0:t.Profile)||void 0===e?void 0:e.Uid,email:null===(n=null==t?void 0:t.Profile)||void 0===n?void 0:n.Email[0].Value,firstName:null===(i=null==t?void 0:t.Profile)||void 0===i?void 0:i.FirstName,lastName:null===(o=null==t?void 0:t.Profile)||void 0===o?void 0:o.LastName}}})]}}))}))}}},this.showPurchaseDialog=this.showPurchaseDialog.bind(this),this.signIn=this.signIn.bind(this)}return e.prototype.load=function(){var e;return(0,r.mG)(this,void 0,void 0,(function(){var t,n;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return[4,u.Z.loaded()];case 1:if(i.sent(),!(t=u.Z.get("Authentication.Piano"))||!t.enabled)return[2,Promise.reject()];if(this._enabled=!0,null===(e=window.tp)||void 0===e?void 0:e.pianoId)return[3,11];i.label=2;case 2:return i.trys.push([2,10,,11]),(n=t.experience)&&n.enabled?(this._experience=n,[4,(0,s.B)("".concat(n.url,"?aid=").concat(n.aid))]):[3,4];case 3:return i.sent(),[3,6];case 4:return[4,(0,s.B)(t.url)];case 5:i.sent(),i.label=6;case 6:return[4,this.initialize(t)];case 7:return i.sent(),this.setExternalJWT(),t.identityProvider?[4,this.initializeIdentityProvider(t.identityProvider)]:[3,9];case 8:i.sent(),i.label=9;case 9:return[3,11];case 10:return i.sent(),[2,Promise.reject()];case 11:return[2,Promise.resolve()]}}))}))},Object.defineProperty(e.prototype,"onLoginSuccess",{get:function(){return this.loginSuccess.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onModalClosed",{get:function(){return this.modalClosed.asObservable()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"purchaseDialogEnabled",{get:enumerable:!1,configurable:!0}),e.prototype.signOut=function(){window.tp.pianoId.logout()},e.prototype.signIn=e.prototype.closeModal=function(){},e.prototype.showScreenSet=function(e){var t=f[e];if(!t)throw new Error("screen ".concat(e," is not defined."));window.tp.pianoId.show({screen:t})},e.prototype.showInlineScreenSet=function(e,t){var n=f[e];if(!n)throw new Error("screen ".concat(e," is not defined."));window.tp.pianoId.show({displayMode:"inline",containerSelector:t,screen:n})},e.prototype.showPurchaseDialog=function(){var e=this;return new Promise((function(t,n){e._experience&&e._experience.purchase||n();var i=e._experience.purchase;for(var r in i||{})window.tp.push([r,i[r]]);window.tp.push(["setCustomVariable","cid",d.Z.cid()]),window.tp.push(["addHandler","checkoutClose",function(e){switch(e.state){case"checkoutCompleted":case"alreadyHasAccess":case"voucherRedemptionCompleted":t();break;case"close":n({userCancelled:!0})}}]),window.tp.push(["addHandler","loginRequired",function(t){localStorage.setItem(h,JSON.stringify(t)),e.loginSuccess.pipe((0,a.P)()).subscribe((function(e){var t=localStorage.getItem(h);t&&(localStorage.removeItem(h),t=JSON.parse(t),window.tp.offer.startCheckout(t))})),window.tp.offer.close(),e.signIn()}]),window.tp.experience.execute()}))},e.prototype.initialize=function(e){var t=this,n=e.Global;return new Promise((function(e){for(var i in n||{})"object"!=typeof n[i]&&window.tp.push([i,n[i]]);for(var i in n.Id||{})t.pianoEventHandlers[i]=n.Id[i];window.tp.push(["addHandler","checkoutComplete",function(e){t.loginSuccess.next({token:window.tp.user.getProvider().getToken(),user:{uid:e.uid,email:e.email}})}]),window.tp.push(["init",)}))},e.prototype.initializeIdentityProvider=function(e){var t;return(0,r.mG)(this,void 0,void 0,(function(){var n=this;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return this.identityAdapter=l.Z.create(e),[4,this.identityAdapter.load()];case 1:return i.sent(),this.signIn=this.identityAdapter.signIn.bind(this.identityAdapter),this.signOut=this.identityAdapter.signOut.bind(this.identityAdapter),this.closeModal=this.identityAdapter.closeModal.bind(this.identityAdapter),this.showScreenSet=this.identityAdapter.showScreenSet.bind(this.identityAdapter),this.showInlineScreenSet=this.identityAdapter.showInlineScreenSet.bind(this.identityAdapter),this.identityAdapter.onModalClosed.subscribe((function(e){return n.closedCallback.bind(n,e)()})),this.identityAdapter.onLoginSuccess.subscribe((function(t){return n.verifyAccountInfo(e,t)})),null===(t=this.identityAdapter.onLogoutSuccess)||void 0===t||t.subscribe(this.removeExternalJWT),[2]}}))}))},e.prototype.closedCallback=function(e){this.modalClosed.next(e)},e.prototype.loggedIn=function(e){this.loginSuccess.next(e)},e.prototype.verifyAccountInfo=function(e,t){return(0,r.mG)(this,void 0,void 0,(function(){var n;return(0,r.Jh)(this,(function(i){switch(i.label){case 0:return[4,(0,this.pianoEndpoints[e].verify)(t)];case 1:return(n=i.sent()).access&&this.loginSuccess.next({token:n.access.user_token,user:{uid:n.access.user.uid,email:n.access.user.email,firstName:n.access.user.first_name,lastName:n.access.user.last_name}}),[2]}}))}))},e.prototype.pianoCallApi=function(e,t){return(0,r.mG)(this,void 0,Promise,(function(){return(0,r.Jh)(this,(function(n){return[2,new Promise((function(n,i){try{window.tp.api.callApi(e,t,(function(e){e.code>0?i(new Error("Piano API failure: ".concat(JSON.stringify(e)))):n(e)}))}catch(e){i(e)}}))]}))}))},e.prototype.setExternalJWT=function(){var e=localStorage.getItem(p);e&&window.tp.push(["init",)},e.prototype.removeExternalJWT=function(){localStorage.getItem(p)&&localStorage.removeItem(p),window.tp.push(["setExternalJWT",null])},e}()},81075:function(e,t,n){"use strict";var i;n.d(t,{b:function(){return i}}),function(e){e[e.signIn=0]="signIn",e[e.forgotPassword=1]="forgotPassword",e[e.resetPasswordRequestCode=2]="resetPasswordRequestCode",e[e.register=3]="register"}(i||(i={}))},10314:function(e,t,n){"use strict";n.d(t,{i:function(){return s}});var i,r=n(22970),o=n(4169),a=n(40739);function s(){return i||(i=(0,r.mG)(this,void 0,void 0,(function(){var e,t;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return[4,o.Z.loaded()];case 1:return n.sent(),(e=o.Z.get("Authentication.ExternalAuthenticationProvider",""))?[4,(t=a.Z.create(e)).load()]:[3,3];case 2:return n.sent(),[2,t];case 3:return[2,null]}}))}))),i}},49060:function(e,t,n){"use strict";var i=n(22970),r=n(4169),o=n(54591),a=n(17447),s="print-content",u=function(e){return void 0===e&&(e=""),(0,o.Z)().show(a.ZP.val("Errors.PrintingNotSupportedByBrowser","This browser doesn't support printing, use another browser if you want to use this feature.")+e)},c=function(e,t){return(0,i.mG)(void 0,void 0,void 0,(function(){var n,r,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return function(){for(var e=document.getElementsByClassName(s),t=0;t<e.length;t++)e[t].remove()}(),(n=document.createElement("div")).className=s,"function"!=typeof(null==(r=t(n,(function(){return null})))?void 0:r.then)?[3,2]:[4,r];case 1:i.sent(),i.label=2;case 2:if(o=document.title,document.title=e,document.body.appendChild(n),"function"==typeof window.print)try{window.print()}catch(e){u(" (".concat(e,")"))}else u();return document.title=o,[2,Promise.resolve(!0)]}}))}))};t.Z={getDefaultPaperSize:function(){var e=r.Z.get("location.currentUserCountry");return r.Z.get("onlineprinting.CountryPaperSizes",[])[e]||"A4"},print:c,printElement:function(e,t){c(e,()}}},53318:function(e,t,n){"use strict";var i,r,o,a=n(20384),s=n(91574),u=n(4169),c=n(17447),l=n(49060),d=(n(32579),{main:0,paperSize:1});unction p(){a(i).off("print"),r=o=null}i={show:function(e){(r=s.Z.getInstance()).onHide(p);var t=u.Z.get("onlineprinting.PaperSizes",[]),n=[];for(var f in t)"Thumbnail"!==f&&n.push({name:f,selected:ko.observable(!1),checkPaperSize:function(e){ko.utils.arrayForEach(o.paperSizes,(function(t){t.name===e.name?t.selected(!0):t.selected(!1)})),o.checkedPaperSize(e.name)}});var m=[{id:i.orientation.portrait,name:c.ZP.val("OnlinePrint.Portrait")},{id:i.orientation.landscape,name:c.ZP.val("OnlinePrint.Landscape")}],g=[];ko.utils.arrayForEach(m,(function(e){g.push({id:e.id,name:e.name,selected:ko.observable(!1),checkOrientation:function(e){ko.utils.arrayForEach(o.paperOrientations,(function(t){t.id===e.id?t.selected(!0):t.selected(!1)})),o.checkedOrientationName(e.name),o.checkedOrientation(e.id)}})}));var v=l.Z.getDefaultPaperSize(),y=ko.utils.arrayFirst(n,();e||(e={thumbs:[]});var _={templateName:"v7.Client.Dialogs.Print.Settings",model:o={thumbs:ko.observableArray(e.thumbs),header:ko.observable(c.ZP.val("OnlinePrint.PrintDialogTitle")),currentState:ko.observable(d.main),state:d,paperOrientations:g,checkedOrientationName:ko.observable(g[0].selected(!0).name),checkedOrientation:ko.observable(g[0].id),orientation:i.orientation,paperSizes:n,checkedPaperSize:ko.observable(y.selected(!0).name),scaleToPaperSize:ko.observable(!1),clickPaperSize:function(){o.currentState(d.paperSize),o.header(ko.observable(c.ZP.val("OnlinePrint.PaperSize"))),r.resize()},checkScaleToPaperSize:back:function(){o.currentState(d.main),o.header(ko.observable(c.ZP.val("OnlinePrint.PrintDialogTitle"))),r.resize()},cancel:function(){h(),a(i).trigger("cancel")},print:function(){a(i).trigger("print",{paperSize:this.checkedPaperSize(),scale:this.scaleToPaperSize(),scaleToLandscape:this.checkedOrientation()===i.orientation.landscape}),h()}}};r.show(_)},showWarning:function(){r=s.Z.getInstance();var e={templateName:"v7.Client.Dialogs.Pdf.Download",model:o={thumbs:[],buttonText:c.ZP.val("Menu.PrintIssue"),currentState:ko.observable(d.main),headerText:c.ZP.val("Menu.IssuePrint"),buttonsCancelText:c.ZP.val("Buttons.Cancel.Text"),buttonsDownloadText:c.ZP.val("Buttons.Download.Text"),publisherName:c.ZP.val("BrandName"),state:d,cancel:function(){h(),a(i).trigger("cancel")},download:};r.show(e)},hide:h,orientation:{portrait:"P",landscape:"L"},onPrint:function(e){a(i).one("print",e)},onCancel:function(e){a(i).one("cancel",e)}},t.Z=i},43724:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Z}});var i=n(22970),r=n(20384),o=n(40180),a=n(25881),s=n(40605),u=n(74428),c=n(92912),l=(n(32579),n(49060)),d=n(53318),h=n(17447),p=n(79913),f="print";function m(e,t,n){return(0,p.$k)(f,"GetArticleImages",{articleId:e,paperSize:t,scaleToPaperSize:n})}function g(e,t,n,i,r,o,a,s,u){return(0,p.$k)(f,"GetImageByRegion",{issue:e,page:t,paper:n,top:i,left:r,width:o,height:a,scale:s,scaleToLandscape:u})}function v(e,t,n,i,r){return(0,p.$k)(f,"GetImageByRegion",{issue:e,page:t,paper:n,scale:i,scaleToLandscape:r})}function y(e,t,n,i){return(0,p.$k)(f,"GetImagesForEntireIssue",{issue:e,paper:t,scale:n,scaleToLandscape:i})}function _(e,t){return(0,p.$k)(f,"CheckAccessForPrintingPage",{issue:e,page:t})}var b=n(54591);function w(e){return(0,i.mG)(this,void 0,Promise,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:if(!e.Parameters.message)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(0,b.Z)().show(e.Parameters.message,"",h.ZP.val("Buttons.Ok.Text"),!0)];case 2:case 3:return t.sent(),[3,4];case 4:return[2,JSON.parse(e.Parameters.content)]}}))}))}function C(e,t,n){return(0,i.mG)(this,void 0,void 0,(function(){var r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return r=w,[4,m(e,t,n)];case 1:return[2,r.apply(void 0,[i.sent()])]}}))}))}function I(e,t,n,r,o,a,s,u,c){return(0,i.mG)(this,void 0,void 0,(function(){var l;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return l=w,[4,g(e,t,n,r,o,a,s,u,c)];case 1:return[2,l.apply(void 0,[i.sent()])]}}))}))}function P(e,t,n,r){return(0,i.mG)(this,void 0,void 0,(function(){var o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return o=w,[4,y(e,t,n,r)];case 1:return[2,o.apply(void 0,[i.sent()])]}}))}))}nction T(e,t,n){if(t>0&&e.Width>0){var i=100*t/e.Width;return Math.min(i,n)}return 0}function k(e,t,n){if(t>0&&e.Height>0){var i=100*t/e.Height;return Math.min(i,n)}return 0}function A(e,t){var n;t||(t=event),t.target?n=r(t.target):t.srcElement&&(n=t.srcElement);var i=n.parent();i.width(n.width()),i.height(n.height())}function E(e,t){var n=this;return l.Z.print(t,(function(t){return(0,i.mG)(n,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,,2,3]),[4,Promise.all((0,o.map)(e,(function(e){return function(e,t){return new Promise((function(n,i){var r=new Image(e.W,e.H);r.onload=function(){return n(r)},r.onerror=function(){return i(new Error("Image not found: "+e.Src))},r.src=e.Src,t.appendChild(r);var o=document.createElement("p");o.style.pageBreakAfter="always",t.appendChild(o)}))}(e,t)})))];case 1:return n.sent(),[3,3];case 2:return d.Z.hide(),c.ZP.hide(),[7];case 3:return[2]}}))}))}))}var Z={printArticleImage:function(e){return(0,i.mG)(this,void 0,void 0,(function(){var t,n,r=this;return(0,i.Jh)(this,(function(o){switch(o.label){case 0:return[4,(a=e.ArticleId,(0,p.$k)(f,"CheckAccessForPrintingArticle",{articleId:a}))];case 1:return o.sent(),t=new Promise((function(t,n){d.Z.onPrint((function(n,o){return(0,i.mG)(r,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){switch(n.label){case 0:c.ZP.show(),n.label=1;case 1:return n.trys.push([1,,4,5]),[4,C(e.ArticleId,o.paperSize,o.scale)];case 2:return[4,E(n.sent(),e.Title)];case 3:return n.sent(),[3,5];case 4:return c.ZP.hide(),[7];case 5:return t(),[2]}}))}))})),d.Z.onCancel((function(){n()}))})),[4,C(e.ArticleId,"Thumbnail",!1)];case 2:return n=o.sent(),d.Z.show({thumbs:n.map(()}),[2,t]}var a}))}))},printArticleText:function(e){if(e){var t={Title:S(e.Title),Subtitle:S(e.Subtitle),Source:S(e.Issue?e.Issue.Title:e.Source.CreatorName),Date:e.Issue?e.Issue.DateFormatted:h.ZP.formatDate(new Date(e.Source.Created),"v7.Client.DateFormat.Issue","d MMM yyyy"),PageName:e.Page?e.Page.name:"",Byline:S(e.Byline),Blocks:e.Blocks.map((),firstImage:void 0},n=null;if(e.Images&&e.Images.length>0)for(var i=0;i<e.Images.length;i++){var o=e.Images[i];if(!(o.Width<=10||o.Height<=10||o.Height/o.Width>10||o.Width/o.Height>10)){var a=o.Width/o.Height;if(a>.7&&a<2){var s=T(o,600,400),u=k(o,120,400);if(s<=0||u<=0)continue;if(null==n){n=o;continue}if(o.Width>n.Width||o.Height>n.Height){n=o;continue}}}}return t.firstImage=n,(n?new Promise((function(e,t){var i=new Image;i.onload=e,i.onerror=t,i.src=n.Url})):Promise.resolve()).then((function(){return function(e,t,n){return l.Z.print(n,(function(e){return h.ZP.templates.renderTo("Print.ArticleText",t,r(e))}))}(0,t,e.Title)}))}},printCustomArea:function(e,t,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o=this;return(0,i.Jh)(this,(function(a){switch(a.label){case 0:return t=t||e.Page,[4,_(n=n&&n.issue&&n.issue()||n||e.Issue.Id,t)];case 1:return a.sent(),r=new Promise((function(r,a){u.Z.onPrint((function(s,u){return(0,i.mG)(o,void 0,void 0,(function(){var o,s,l=this;return(0,i.Jh)(this,(function(h){switch(h.label){case 0:d.Z.onPrint((function(o,a){return(0,i.mG)(l,void 0,void 0,(function(){return(0,i.Jh)(this,(function(i){switch(i.label){case 0:c.ZP.show(),i.label=1;case 1:return i.trys.push([1,,4,5]),[4,I(n,t,a.paperSize,u.top,u.left,u.width,u.height,a.scale,a.scaleToLandscape)];case 2:return[4,E([i.sent()],e?e.Title:"")];case 3:return i.sent(),[3,5];case 4:return c.ZP.hide(),[7];case 5:return r(),[2]}}))}))})),d.Z.onCancel((function(){a()})),o=[],c.ZP.show(),h.label=1;case 1:return h.trys.push([1,,3,4]),[4,I(n,t,"Thumbnail",u.top,u.left,u.width,u.height,!1,!1)];case 2:return s=h.sent(),o.push({url:s.Src,imgLoaded:A}),d.Z.show({thumbs:o}),[3,4];case 3:return c.ZP.hide(),[7];case 4:return[2]}}))}))})),u.Z.onCancel((function(){a()}))})),s.ZP.root().topPanel().show(),u.Z.show(t),[2,r]}}))}))},printEntireIssue:function(e,t,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o=this;return(0,i.Jh)(this,(function(a){switch(a.label){case 0:return t=t&&t.issue&&t.issue()||t||e.Issue.Id,n=n||e&&e.Title||"",[4,_(t,2)];case 1:return a.sent(),r=new Promise((function(e,r){d.Z.onPrint((function(r,a){return(0,i.mG)(o,void 0,void 0,(function(){return(0,i.Jh)(this,(function(i){switch(i.label){case 0:c.ZP.show(),i.label=1;case 1:return i.trys.push([1,,4,5]),[4,P(t,a.paperSize,a.scale,a.scaleToLandscape)];case 2:return[4,E(i.sent(),n)];case 3:return i.sent(),[3,5];case 4:return c.ZP.hide(),[7];case 5:return e(),[2]}}))}))})),d.Z.onCancel((function(){r()}))})),d.Z.showWarning(),[2,r]}}))}))},printPage:function(e,t,n,r){return(0,i.mG)(this,void 0,void 0,(function(){var s,u,l,h=this;return(0,i.Jh)(this,(function(p){switch(p.label){case 0:return n=n&&n.issue&&n.issue()||n||e.Issue.Id,r=r||e.Title,s=[],u=(0,o.map)(t,(function(t){return t=t||e.Page&&e.Page.number||e.Page,_(n,t).then((function(){s.push({url:(0,a.x8)(n,180,t),imgLoaded:A})}))})),[4,Promise.all(u)];case 1:return p.sent(),l=new Promise((function(a,s){d.Z.onPrint((function(s,u){return(0,i.mG)(h,void 0,void 0,(function(){var s;return(0,i.Jh)(this,(function(l){switch(l.label){case 0:c.ZP.show(),l.label=1;case 1:return l.trys.push([1,,4,5]),s=(0,o.map)(t,(function(t){return t=t||e.Page&&e.Page.number||e.Page,function(e,t,n,r,o){return(0,i.mG)(this,void 0,void 0,(function(){var a;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return a=w,[4,v(e,t,n,r,o)];case 1:return[2,a.apply(void 0,[i.sent()])]}}))}))}(n,t,u.paperSize,u.scale,u.scaleToLandscape)})),[4,Promise.all(s)];case 2:return[4,E(l.sent(),r)];case 3:return l.sent(),[3,5];case 4:return c.ZP.hide(),[7];case 5:return a(),[2]}}))}))})),d.Z.onCancel((function(){s()}))})),d.Z.show({thumbs:s}),[2,l]}}))}))}}},28641:function(e,t,n){"use strict";n.d(t,{z:function(){return s}});var i=n(22970),r=n(40180),o=n(26783),a=n(4169);function s(){return(0,i.mG)(this,void 0,void 0,(function(){var e,t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,a.Z.loaded()];case 1:return n.sent(),e=a.Z.get("CDNResources")||[],t=(0,r.map)((0,r.filter)(e,(function(e){return e.enabled})),(),[4,Promise.all(t)];case 2:return n.sent(),[2]}}))}))}},95511:function(e,t,n){"use strict";n.d(t,{On:function(){return I}});var i=n(22970),r=n(40180),o=n(68876),a=n(53169),s=n(14581),u=n(24458),c=n(7498),l=n(34336),d=n(55189),h=n(4169),p=n(6677),f=n(2099),m=n(19204),g=n(9257),v=n(93979),y=n(99144);function _(e){return e.latest?function(){return(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,(0,o.Rd)({orderBy:{name:a.jl.LatestIssueDate,order:a.As.Descending},limit:1})];case 1:return[2,(null==(e=t.sent())?void 0:e.items)&&e.items.length>0?{newspaper:e.items[0].slug,cid:e.items[0].cid}:{}]}}))}))}():e.cid?Promise.resolve({cid:e.cid}):e.issue?Promise.resolve({cid:(0,s.$W)(e.issue)}):e.newspaper?(0,c.mm)(e.newspaper):e.articleId?(0,c.hJ)(e.articleId):h.Z.getAsync("catalog.MasterCid").then((function(e){return e?Promise.resolve({cid:e}):Promise.reject()}))}function b(e){if(d.Z.update(e),e.token){var t=l.Z.getState(),n=window.location.href.replace(window.location.search,"");l.Z.replaceState(n,(0,r.extend)({},t.state,e))}return _(e).then((function(t){return e.cid=t.cid,f.Z.show(e),e.commentKey&&e.articleId&&f.Z.layoutLoaded((),Promise.resolve()}))}function w(e,t){return t.newspaper?b(t):function(e,t){return new Promise((function(n,i){var o=t.issue?(0,s.$W)(t.issue):t.cid;_(t).then((function(e){return e.publication?Promise.resolve(e):(0,c.n9)(e.cid)})).then((function(i){if(i.cid!==o){t.cid=i.cid;var a=l.Z.getState(),u=window.location.href.replace(o,i.cid);l.Z.replaceState(u,(0,r.extend)({},a.state,t))}t.newspaper=i.publication,i.cid&&(t.cid=i.cid),i.issueDate?t.issueDate=i.issueDate:t.issue&&(t.issueDate=(0,s.HA)(t.issue)),i.articleId&&(t.articleId=i.articleId),e.generateUrl(t).then((function(e){if(e){var i=l.Z.getState();l.Z.replaceState(e.url,(0,r.extend)({},i.state,t))}n(t)})).catch(()})).catch(i)}))}(e,t).then((function(e){return b(e)}))}var C=!1;function I(e){C||(C=!0,(0,g.W)(e,{executeWith:function(t){return w(e,t)}}),(0,v.W)(e,{executeWith:function(t){return w(e,t)}}),(0,m.O)(e,{viewName:u.n3.ReadingMap,executeWith:function(t){return w(e,t)}}))}},39114:function(e,t,n){"use strict";var i=n(39752),r=n(90913),o=n(24458),a=n(4169);t.Z={goHome:function(){(0,i.WI)((0,r.v7)({viewName:o.n3.TextView,params:{cid:a.Z.get("catalog.MasterCid")}}))}}},76280:function(e,t,n){"use strict";var i,r=n(14581),o=n(95766),a=n(47211),s=n(2099),u=n(60723),c="NewspaperView",l=((i={})[a.GM.ActivePageChanged]="activepagechanged",i[a.GM.PageDoubleClicked]="pagedoubleclick",i[a.GM.PageViewZoomChanging]="zoomChanging",i[a.GM.PageViewPinch]="pinch",i[a.GM.PageViewPan]="pan",i[a.GM.PageViewZoomChanged]="zoom",i[a.GM.PageViewExternalLink]="externallink",i[a.GM.PageView]="pageview",i);o.U.ofType(a.GM.PageView).subscribe((function(e){var t={cid:s.Z.cid(),issueDate:(0,r.YL)(s.Z.issue()),pageNumber:e.payload.pageNumber};u.c.pageView({page:"".concat(window.location.pathname.replace(/(\/\d{8}).*|(\/pageview).*/,""),"/").concat(t.issueDate.replace(/-/g,""),"/page/").concat(t.pageNumber),context:t})})),o.U.ofType(a.GM.ActivePageChanged,a.GM.PageDoubleClicked,a.GM.PageViewZoomChanging,a.GM.PageViewPinch,a.GM.PageViewPan).subscribe((function(e){var t={cid:s.Z.cid(),issueDate:(0,r.YL)(s.Z.issue()),pageNumber:e.payload.pageNumber},n=l[e.type];u.c.event({category:c,action:n,label:"".concat(t.issueDate,"/").concat(e.payload.pageNumber),context:t})})),o.U.ofType(a.GM.PageViewZoomChanged).subscribe((function(e){var t=Number(e.payload.scale);if(t>1){var n={cid:s.Z.cid(),issueDate:(0,r.YL)(s.Z.issue()),pageNumber:e.payload.pageNumber,zoomFactor:t},i=l[e.type];u.c.event({category:c,action:i,context:n})}})),o.U.ofType(a.GM.PageViewExternalLink).subscribe((function(e){return u.c.event({category:c,action:l[e.type],label:e.payload.target})}))},90729:function(e,t,n){"use strict";n.d(t,{C4:function(){return l},GM:function(){return i},HS:function(){return u},O6:function(){return s},Yd:function(){return h},o2:function(){return c},q5:function(){return d}});var i,r=n(22970);!i||(i={}));var o,a=function(e){this.payload=e},s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.AddPaymentInfo,t}return(0,r.ZT)(t,e),t}(a),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.AddToCart,t}return(0,r.ZT)(t,e),t}(a),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.BeginCheckout,t}return(0,r.ZT)(t,e),t}(a),l=(o=a,(0,r.ZT)((function(){var e=null!==o&&o.apply(this,arguments)||this;return e.type=i.CheckoutProgress,e}),o),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.PromoClick,t}return(0,r.ZT)(t,e),t}(a)),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.Purchase,t}return(0,r.ZT)(t,e),t}(a),h=(function(e){(0,r.ZT)((function(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.RemoveFromCart,t}),e)}(a),function(e){(0,r.ZT)((function(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.SetCheckoutOption,t}),e)}(a),function(e){this.payload=e,this.type=i.PurchaseCompleted})},49475:function(e,t,n){"use strict";var i,r,o,a=n(22970),s=n(37531),u=n(17550),c=n(11569),l=n(55895),d=n(17447),h=n(54591),p=n(74981);unction m(e){return new Promise((function(t){(0,s.F)(1e3).pipe((0,u.w)((function(){return function(e){return p.Z.get("purchase","pending-order/".concat(e))}(e)})),(0,c.h)((function(e){return"Pending"!==e.Status})),(0,l.q)(1)).subscribe(t)}))}function g(e){return(0,a.mG)(this,void 0,Promise,(function(){var t,n;return(0,a.Jh)(this,(function(i){switch(i.label){case 0:return"Pending"!==e.Status?[2,e]:(t=window.open(e.ChallengeUrl))?[3,2]:[4,(0,h.Z)().confirm(d.ZP.val("v7.Client.Dialogs.ConfirmCreditCard"),d.ZP.val("Buttons.Cancel.Text"),d.ZP.val("Buttons.Confirm"))];case 1:i.sent(),t=window.open(e.ChallengeUrl),i.label=2;case 2:return[4,m(e.OrderId)];case 3:return n=i.sent(),null==t||t.close(),[2,n]}}))}))}!function(e){e[e.Subscription=0]="Subscription",e[e.Issue=1]="Issue",e[e.Bundle=2]="Bundle"}(i||(i={})),function(e){e[e.Month=0]="Month",e[e.Day=1]="Day"}(r||(r={})),function(e){e[e.None=0]="None",e[e.TrialWasUsed=1]="TrialWasUsed",e[e.CreditCardWasUsed=2]="CreditCardWasUsed"}(o||(o={})),t.ZP={getPurchaseInfo:function(e){return delete(e=(0,a.pi)({},e)).product,p.Z.get("purchase","GetPurchaseInfo",e)},getArchivePurchaseInfo:function(e){return p.Z.get("purchase","GetArchivePurchaseInfo",e)},addProductToBasket:function(e){return p.Z.post("purchase","AddToBasket",e)},getPurchaseContext:function(e){return p.Z.get("purchase","GetPurchaseContext",e)},checkout:f,confirm:function(e){return p.Z.post("purchase","Confirm",e)},checkoutWithConfirmation:function(e){return(0,a.mG)(this,void 0,Promise,(function(){var t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return[4,f(e)];case 1:return[4,g(t=n.sent())];case 2:if("Approved"!==(t=n.sent()).Status)throw new Error(t.Status);return[2,t]}}))}))},getUserPromoEligibility:function(e){return p.Z.get("subscriptions","trial/eligibility",e).then((function(e){return e}),()},awaitPendingOrder:m}},67332:function(e,t,n){"use strict";var i=n(40097);n(6985),n(19117),n(71540),n(53589),n(60129),n(30429),n(17204),n(24228),n(1481),n(51417),n(9184),n(92150),n(51330),i.w0.prototype.dispose=,43541:function(e,t,n){"use strict";var i=n(13695);t.Z=i},50109:function(e,t,n){"use strict";var i=n(75898);t.Z=i},97781:12594:function(e,t,n){"use strict";var i;n.d(t,{G:function(){return i},b:function(){return r}}),function(e){e.SidebarMenu="[ContextMenu] SidebarMenu"}(i||(i={}));var r=function(e){this.payload=e,this.type=i.SidebarMenu}},70737:function(e,t,n){"use strict";var i,r;n.d(t,{V:function(){return i},y:function(){return r}}),i||(i={})),r||(r={}))},63019:function(e,t,n){"use strict";var i;n.d(t,{Fz:function(){return m},GM:function(){return i},HX:function(){return g},I8:function(){return c},I_:function(){return u},Ml:function(){return l},Rv:function(){return a},YE:function(){return r},a4:function(){return p},e8:function(){return h},ii:function(){return s},qp:function(){return f},sQ:function(){return d},u7:function(){return o}}),i||(i={}));var r=function(e){this.payload=e,this.type=i.ArticleExpandRequested},o=function(e){this.payload=e,this.type=i.ArticleExpanded},a=function(e){this.payload=e,this.type=i.ArticleOpened},s=function(e){this.payload=e,this.type=i.ArticleViewed},u=function(e){this.payload=e,this.type=i.PageChanged},c=function(e){this.payload=e,this.type=i.CommonPageChanged},l=function(e){this.payload=e,this.type=i.IssuePageChanged},d=function(e){this.payload=e,this.type=i.SmartFlowAction},h=function(e){this.payload=e,this.type=i.IssueTextViewAction},p=function(){this.type=i.SmartFlowReadMore},f=m=function(e){this.payload=e,this.type=i.TranslateArticle},g=function(e){this.payload=e,this.type=i.TranslateIssue}},23197:function(e,t){"use strict";var n=function(){function e(){}return e.prototype.available=function(){return!0},e.prototype.enabled=function(){return!0},e}();t.Z=n},63151:2563:function(e,t,n){"use strict";n.d(t,{jL:function(){return l},Wh:function(){return p},Yg:function(){return i}});var i={};n.r(i),n.d(i,{addBannerComponent:function(){return a},getBannerComponent:function(){return o},removeBannerComponent:function(){return s}}),n(20015);var r={};function o(e){return r[e]}r u=n(43188),c=n(66204),l=c.memo((function(e){var t,n=null!==(t=e.position)&&void 0!==t?t:"bottom";return(0,u.jsx)("div",{className:"banner banner-".concat(n," ").concat(e.className||""),children:e.children})})),d=n(28007),h=n(47378),p=c.memo((function(){var e=(0,d.v9)(h.$E),t=(0,d.v9)(h.ry);if(!e)return null;if(0===t.length)return null;var n=t[0],i=o(n.bannerType);if(!i)throw new Error("BannerComponent for ".concat(n.bannerType," wasn't registered"));return(0,u.jsx)("div",{id:"snackbar-container",className:"banners-container",children:(0,u.jsx)(i,{data:n.data})})}))},74512:function(e,t,n){"use strict";n.d(t,{u:function(){return i}});var i="app.banners"},20015:function(e,t,n){"use strict";var i,r=n(39752),o=n(1103),a=n(82723),s=(n(47378),n(74512)),u=n(22970),c=n(12286),l=n(72753),d=n(40180),h=n(95430),p={ready:!1,banners:[],history:{}};ar m=(0,c.Lq)(p,((i={})[a.Us.BannersReady]=function(e){return(0,u.pi)((0,u.pi)({},e),{ready:!0})},i["".concat(h.Fs)]=i[a.Us.BannerOpened]=i[a.Us.BannerClosed]=i)),g=(0,l.N)((function(e){return{history:e.history}}),(),v=n(84198);unction _(){return(0,u.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,v.S3)({debounced:y(2e3,a.Us.BannerOpened,a.Us.BannersReady),timeout:(0,v.gw)(5e3)})];case 1:return e.sent(),[4,(0,v.gz)((0,a.r)({}))];case 2:return e.sent(),[2]}}))}.gk.addFeature(s.u,m,(),r.gk.addStoreStorage(o.h.Local,s.u,g)},82723:47378:18218:function(e,t,n){"use strict";n.d(t,{A:function(){return C},L:function(){return w.L}});var i=n(39752),r=n(22970),o=n(84198),a=n(123),s=n(95430),u=n(9830),c=self.console.log,l=n(90913),d=n(13374),h=n(1010),p=n(24458),f=n(85791),m=n(55993),g=n(32249),v=n(25019),y=n(50084),_=n(74203),b=n(63752),w=n(60581),C=tion T(e){var t,n,i,a;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,(0,o.Ys)(l.Yw)];case 1:return t=r.sent(),n=e.payload,i=n.newConfig,a=n.isLegacyRoute,i.cacheKey||(i.cacheKey=(0,y.Z)(),c("routeChanged: navigation config doesn't have cacheKey defined")),window.history&&(window.history.scrollRestoration="auto"),[4,(0,o.gz)((0,l.bh)({isLegacyRoute:a,prevConfig:t,config:i}))];case 2:return r.sent(),a?[4,(0,o.gz)((0,l.Dw)({isLegacyRoute:a,prevConfig:t,config:i}))]:[3,4];case 3:r.sent(),r.label=4;case 4:return[2]}}))}tion M(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,o.gz)((0,l.aF)())];case 1:return e.sent(),[2]}}))}function D(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,o.gz)((0,s.Wi)())];case 1:return e.sent(),[2]}}))}i.gk.addFeature("app.common.navigation",void 0,()},71950:function(e,t,n){"use strict";n.d(t,{Ac:function(){return s},BX:function(){return a},FY:function(){return l},JB:function(){return f},Us:function(){return i},Uw:function(){return o},Xe:function(){return u},ZU:function(){return m},cg:function(){return p},gk:function(){return d},qm:function(){return c},rb:function(){return h}});var i,r=n(12286);!i||(i={}));var o=(0,r.mq)(i.LoadFavorites),a=(0,r.mq)(i.LoadFavoritesCached),s=(0,r.mq)(i.LoadFavoritesBegan),u=(0,r.mq)(i.LoadFavoritesDone),c=(0,r.mq)(i.LoadFavoritesFailed),l=(0,r.x9)(i.ToggleFavorite),d=((0,r.x9)(i.SetFavorites),(0,r.x9)(i.ChangeFavoritesBegan)),h=(0,r.x9)(i.ChangeFavoritesDone),p=(0,r.x9)(i.ChangeFavoritesFailed),f=(0,r.x9)(i.ChangeFavoritesCancelled),m=(0,r.mq)(i.FavoritesChanged)},95510:function(e,t,n){"use strict";n.d(t,{K1:function(){return f},Ud:function(){return p},c1:function(){return h},fi:function(){return d},xr:function(){return m}});var i=n(22970),r=n(84198),o=n(9830),a=n(88954),s=n(55993),u=n(70335),c=null;function l(e){return void 0===e&&(e=!0),(0,i.mG)(this,void 0,void 0,(function(){var t,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,Promise.all([n.e(2181),n.e(6),n.e(6069),n.e(9068),n.e(4040),n.e(8888)]).then(n.bind(n,32690))];case 1:return[4,(t=i.sent()).runInit()];case 2:return i.sent(),[2,t];case 3:if(r=i.sent(),(0,o.v)(r),e)return[2,l(!1)];throw r;case 4:return[2]}}))}))}function d(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(2181),n.e(6),n.e(6069),n.e(9068),n.e(4040),n.e(8888)]).then(n.bind(n,16385))];case 1:return[2,e.sent().default]}}))}))}function h(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(2181),n.e(6),n.e(6069),n.e(9068),n.e(4040),n.e(8888)]).then(n.bind(n,99144))];case 1:return[2,e.sent().default]}}))}))}function p(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(2181),n.e(6),n.e(6069),n.e(9068),n.e(4040),n.e(8888)]).then(n.bind(n,43724))];case 1:return[2,e.sent().default]}}))}))}unction m(){return(0,i.mG)(this,void 0,void 0,(function(){var e,t;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,Promise.all([n.e(2181),n.e(6),n.e(6069),n.e(9068),n.e(4040),n.e(8888)]).then(n.bind(n,19894))];case 1:return[4,(e=i.sent()).resolveCurrentUrl()];case 2:return i.sent(),[2,e];case 3:return t=i.sent(),(0,o.v)(t),[3,4];case 4:return[2]}}))}))}},74203:51469:function(e,t,n){"use strict";n.d(t,{$:function(){return l}});var i=n(22970),r=n(43188),o=n(66204),a=n(24458),s=n(41854),u=n(25385),c=n(33535);(18218),o.lazy((),o.memo((function(){return(0,r.jsxs)(u.j,{viewName:a.n3.Article,children:[(0,r.jsx)(c.b,{}),(0,r.jsx)("div",{className:"screen-loading-container",children:(0,r.jsx)(s.n,{})})]})}))},78391:function(e,t,n){"use strict";n.d(t,{QH:function(){return i.QH},gg:function(){return i.gg}});var i=n(43948)},43948:function(e,t,n){"use strict";n.d(t,{B$:function(){return l},F2:function(){return u},J4:function(){return f},Kd:function(){return a},Py:function(){return r},QH:function(){return y},TB:function(){return _},Vf:function(){return o},_P:function(){return p},_v:function(){return d},gg:function(){return v},hK:function(){return s},oH:function(){return m},ob:function(){return c},r_:function(){return g},xo:function(){return h}});var i=n(53169),r=[i.WD.Favorites,i.WD.RecentlyRead],o=[i.WD.MyBooks,i.WD.Featured,i.WD.Favorites,i.WD.FeaturedHotspot,i.WD.RecentlyRead],a=[i.WD.TopFree,i.WD.TopMagazines,i.WD.TopNewspapers,i.WD.TopPublications,i.WD.RecentlyRead,i.WD.Featured,i.WD.FeaturedHotspot,i.WD.Favorites,i.WD.All],s="app.views.catalog",u="features.catalog.publications.grid.layout.enabled",c="features.catalog.banners.enabled",l="features.catalog.featured.enabled",d="features.catalog.favorites.enabled",h="features.catalog.recentlyread.enabled",p="features.catalog.categories.enabled",f="features.book_support.enabled",m="features.braze_cards.enabled",g="features.catalog.new_sections",v="ui.Catalog.sourceCountEnable",y="features.featured_hotspot.enabled",_="app.views.catalog.books.just_added.enabled"},4955:function(e,t,n){"use strict";n.d(t,{C:function(){return r},V:function(){return o}});var i=n(40605);function r(){i.ZP.nativeScroll||(i.ZP.nativeScroll=!0,document.body.classList.add("pr-nativescroll"),i.ZP.reflow(),i.ZP.freeze(!0),i.ZP.viewPort.setPropertyValue("height","auto"),i.ZP.viewPort.applyViewport(),i.ZP.viewPort.freeze(!0))}function o(){i.ZP.nativeScroll&&(document.body.classList.remove("pr-nativescroll"),i.ZP.viewPort.freeze(!1),i.ZP.freeze(!1),i.ZP.nativeScroll=!1)}},97446:function(e,t,n){"use strict";n.d(t,{S:function(){return F}});var i=n(39752),r=n(99926),o=n(86939),a=n(83204),s=n(22970),u=n(43188),c=n(66204),l=n(28007),d=n(55993),h=n(39660),p=n(13689),f=n(45598),m=n(37675),g=n(34061),v=n(61987),y=n(70335),_=function(e){eturn(0,s.ZT)(t,e),t.prototype.render=function(){return(0,u.jsx)(p.n.Provider,{value:this.contextMenuV2Context,children:(0,u.jsx)(f.G,{menuId:this.props.menuId,parentMenuId:this.props.parentMenuId,context:this.props.context,position:this.props.position,onClose:this.props.onClose,header:this.renderHeader(),body:this.renderBody()})})},t.prototype.renderHeader=function(){return(0,u.jsx)(m.k,{title:(0,d.Rn)("Menu.Fonts"),canGoBack:!!this.props.parentMenuId,onClose:this.close})},t.prototype.renderBody=function(){return(0,u.jsxs)(h.x,{grouped:!0,children:[this.renderFontSize(),this.renderFonts()]})},t.prototype.renderFontSize=function(){return(0,u.jsx)("div",{className:"pop-button l-2x",children:(0,u.jsxs)("ul",{children:[(0,u.jsx)("li",{className:"fontsize-less",children:(0,u.jsx)("a",{onClick:this.decreaseFontScale,children:(0,u.jsx)("em",{children:"A"})})}),(0,u.jsx)("li",{className:"fontsize-more",children:(0,u.jsx)("a",{onClick:this.increaseFontScale,children:(0,u.jsx)("em",{children:"A"})})})]})})},t.prototype.renderFonts=function(){var e=this;if(!1===this.props.context.showFonts)return null;var t=this.props.fonts;return 0===t.length?null:(0,u.jsx)(g.s,{children:t.map((function(t){var n=t.name||(0,d.Rn)("TextView.Fonts.".concat(t.id.substr(0,1).toUpperCase()).concat(t.id.substr(1))),i=t.id===e.props.currentFontId;return(0,u.jsx)(v.z,{text:n,checked:i,className:t.id,onClick:function(n){return e.changeFont(n,t)}},t.id)}))})},t.prototype.decreaseFontScale=function(e){e.preventDefault(),e.stopPropagation(),this.props.decrease()},t.prototype.increaseFontScale=t.prototype.changeFont=t.prototype.close=t}(c.PureComponent),b=(0,l.$j)((,()(_),w=n(40180),C=n(123),I=n(25019),P=n(78662),x=n(51392),S=n(50084),T=c.memo((function(e){var t=(0,l.I0)(),n=(0,l.v9)(C.Ng),i=(0,l.v9)(C.zh),r=(0,s.CR)(c.useState(i),2),o=r[0],a=r[1],p=v=_=(0,w.sortBy)(n,(function(e){return e.title})),b=c.useMemo((function(){return(0,S.Z)()}),[]),T=(0,l.v9)(C.zT)===I.c.Pervasive,k=null;T&&(k=(0,u.jsx)(P.a,{className:"btn toolbar-btn",onClick:function(){return v(o)},children:(0,u.jsx)("span",{className:"title",children:(0,d.Rn)("InterfaceLang.ChangeLang")})}));var A=(0,u.jsx)(m.k,{title:(0,d.Rn)("Menu.InterfaceLanguage"),canGoBack:!!e.parentMenuId,onClose:p,rightControls:k});return(0,u.jsx)(f.G,{menuId:e.menuId,parentMenuId:e.parentMenuId,context:e.context,position:e.position,onClose:e.onClose,header:A,body:(0,u.jsx)(h.x,{grouped:!0,children:(0,u.jsx)(g.s,{children:_.map((function(e){var t=e.title+(e.originalTitle?" (".concat(e.originalTitle,")"):""),n=e.code===o;return(0,u.jsx)("li",{role:"menuitemradio","aria-checked":n,children:(0,u.jsx)(x.E,{groupName:b,checked:n,title:t,onChange:)},e.code)}))})})})})),k=n(84198),A=n(43968),E=n(69548),Z=n(90913),M=n(1010),D=n(51469);function L(){var e,t,i=this;return(0,s.Jh)(this,(function(r){switch(r.label){case 0:return[4,(0,k.Ys)(Z.Yw)];case 1:return e=r.sent(),M.Xe(e.viewName)?[3,3]:[4,(0,k.RE)((function(){return(0,s.mG)(i,void 0,void 0,(function(){return(0,s.Jh)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(2181),n.e(6),n.e(6069),n.e(9068),n.e(4040),n.e(8888)]).then(n.bind(n,26049))];case 1:return[2,e.sent()]}}))}))}))];case 2:(t=r.sent().default)&&t.model&&t.model.showActionMenu(),r.label=3;case 3:return[2]}}))}r V="app.views.common",B=!1;,63752:function(e,t,n){"use strict";n.d(t,{X:function(){return a.Xu}});var i=n(43188),r=n(66204),o=(n(6279),n(28007)),a=(n(4169),n(34336),n(84198),n(18218),n(39903));n(2563);var s=n(40605),u=n(22970),c=n(90913),l=n(24458),d=n(38876),h=n(35022),p=n(33535),f=n(82415),m=n(68291),g=n(72439),v=n(75491),y=r.lazy((function(){return(0,u.mG)(void 0,void 0,void 0,(function(){return(0,u.Jh)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(2181),n.e(6),n.e(6069),n.e(9068),n.e(4040),n.e(8888)]).then(n.bind(n,44040))];case 1:return[2,{default:e.sent().LegacySiteHeaderIssueTitle}]}}))}))})),_=r.lazy((function(){return(0,u.mG)(void 0,void 0,void 0,(function(){return(0,u.Jh)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(2181),n.e(6),n.e(6069),n.e(9068),n.e(4040),n.e(8888)]).then(n.bind(n,4146))];case 1:return[2,{default:e.sent().LegacySiteHeaderGenericTitle}]}}))}))})),b=r.lazy((function(){return(0,u.mG)(void 0,void 0,void 0,(function(){return(0,u.Jh)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(2181),n.e(6),n.e(6069),n.e(9068),n.e(4040),n.e(8888)]).then(n.bind(n,73631))];case 1:return[2,{default:e.sent().LegacySiteHeaderPostBtn}]}}))}))})),w=r.lazy((function(){return(0,u.mG)(void 0,void 0,void 0,(function(){return(0,u.Jh)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(2181),n.e(6),n.e(6069),n.e(9068),n.e(4040),n.e(8888)]).then(n.bind(n,28863))];case 1:return[2,{default:e.sent().LegacySiteHeaderRadioTitle}]}}))}))})),C=r.lazy((function(){return(0,u.mG)(void 0,void 0,void 0,(function(){return(0,u.Jh)(this,(function(e){switch(e.label){case 0:return[4,Promise.all([n.e(2181),n.e(6),n.e(6069),n.e(9068),n.e(4040),n.e(8888)]).then(n.bind(n,57417))];case 1:return[2,{default:e.sent().LegacySiteHeaderRadioTocBtn}]}}))}))})),I=r.lazy((),P=function(e){var t=(0,o.v9)(c.Yw),n=(0,o.v9)(d.Dk);if(e.empty)return(0,i.jsx)(p.b,{left:(0,i.jsx)(i.Fragment,{}),center:function(){return(0,i.jsx)(h.g,{})},right:(0,i.jsx)(i.Fragment,{}),navigation:"none"});if(t){if(t.viewName===l.n3.TextView||t.viewName===l.n3.PagesView)return(0,i.jsx)(p.b,{center:function(e){return(0,i.jsx)(r.Suspense,{fallback:null,children:(0,i.jsx)(y,{width:e})})}});if(t.viewName===l.n3.Account)return(0,i.jsx)(p.b,{center:function(e){return(0,i.jsx)(r.Suspense,{fallback:null,children:(0,i.jsx)(_,{width:e})})},right:(0,i.jsx)(f.L,{})});if(t.viewName===l.n3.HotSpotsHub)return"phone"===n?(0,i.jsx)(p.b,{left:(0,i.jsx)(m.g,{}),center:function(e){return(0,i.jsx)(r.Suspense,{fallback:null,children:(0,i.jsx)(_,{width:e})})},right:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(g.x,{}),(0,i.jsx)(f.L,{})]}),navigation:"none"}):(0,i.jsx)(p.b,{center:function(e){return(0,i.jsx)(r.Suspense,{fallback:null,children:(0,i.jsx)(_,{width:e})})}});if(t.viewName===l.n3.Purchase)return(0,i.jsx)(p.b,{left:(0,i.jsx)(m.g,{}),center:function(e){return(0,i.jsx)(r.Suspense,{fallback:null,children:(0,i.jsx)(_,{width:e})})},right:(0,i.jsx)(f.L,{}),navigation:"none"});if(t.viewName===l.n3.Post)return(0,i.jsx)(p.b,{left:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.g,{}),(0,i.jsx)(r.Suspense,{fallback:null,children:(0,i.jsx)(b,{})})]}),center:function(e){return(0,i.jsx)(r.Suspense,{fallback:null,children:(0,i.jsx)(_,{width:e})})},right:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(f.L,{}),(0,i.jsx)(v.T,{})]}),navigation:"none"});if(t.viewName===l.n3.Radio)return(0,i.jsx)(p.b,{left:(0,i.jsx)(r.Suspense,{fallback:null,children:(0,i.jsx)(I,{})}),center:function(e){return(0,i.jsx)(r.Suspense,{fallback:null,children:(0,i.jsx)(w,{width:e})})},right:(0,i.jsx)(r.Suspense,{fallback:null,children:(0,i.jsx)(C,{})}),navigation:"none"})}return(0,i.jsx)(p.b,{center:)};r.memo((function(e){return r.useEffect((,[e.visible]),r.useEffect((,[]),(0,i.jsxs)("div",{className:"legacy-container ".concat(e.visible?"legacy-shown":""),children:[(0,i.jsx)(P,{empty:!e.visible}),(0,i.jsx)("div",{className:"legacy-root-container",style:{position:"relative"},children:(0,i.jsx)("div",{id:"Panel_root"})})]})})),n(4955)},39903:function(e,t,n){"use strict";n.d(t,{Bv:function(){return s},Xu:function(){return a}});var i=n(31258),r=n(15798),o=n(85475),a=((0,i.P1)(r.MX,(function(e){return e(o.HE,!1)})),(0,i.P1)(r.MX,(function(e){return e("features.app.externalLinks.disabled",!1)}))),s=(0,i.P1)(r.MX,()},37126:87870:22534:83466:function(e,t,n){"use strict";var i;n.d(t,{a:function(){return i}}),function(e){e[e.Application=0]="Application",e[e.Social=1]="Social",e[e.Library=2]="Library"}(i||(i={}))},66294:function(e,t,n){"use strict";var i,r;n.d(t,{Gz:function(){return a},hi:function(){return o}}),function(e){e.SignInRequested="[Authentication] SignIn",e.SignInSucceeded="[Authentication] SignInSucceeded",e.SignInFailed="[Authentication] SignInFailed",e.SignUpRequested="[Authentication] SignUp",e.SignUpSucceeded="[Authentication] SignUpSucceeded",e.SignUpFailed="[Authentication] SignUpFailed",e.AccountChanged="[Authentication] Account Changed",e.SignUpEmailAlertSet="[Authentication] SignUpEmailAlertSet"}(i||(i={})),function(e){e.EmailAlertPromotional="EmailAlerts.Promotional",e.EmailAlertTechnical="EmailAlerts.Technical"}(r||(r={}));var o=function(e){this.payload=e,this.type=i.SignUpRequested},a=function(e){this.payload=e,this.type=i.SignUpSucceeded}},91697:function(e,t,n){"use strict";n.d(t,{WC:function(){return c}});var i,r=n(82597),o=n(36296),a=n(14347),s=(n(95766),n(58534)),u=n(74164);function c(e){var t=e.system,n=e.provider,c=e.profile;if(!t&&!n)throw new Error("Neither system nor provider specified");var l=a.Z.isLogin();return(n?(0,s.I)({provider:n,authtype:o.is.SIGNUP,context:{linkToCurrentAccount:l}}):(0,u.z)({system:t,context:{profile:c,linkToCurrentAccount:l}})).then((function(e){if(!e)return Promise.resolve();var o=e.authResult,a=e.signInResult;return(0,r.mQ)({signInResult:a,enableAutologin:!0,authContext:{system:t||n,method:o&&o.isNewUser?i.SignUp:i.SignIn}})})).catch((function(e){return Promise.reject(e)}))}n(66294),n(83466),function(e){e.SignIn="signin",e.SignUp="signup"}(i||(i={}))},63561:function(e,t,n){"use strict";n.d(t,{A:function(){return s}});var i=n(22970),r=n(40180),o=n(48636).s),a=function(){eturn Object.defineProperty(e.prototype,"isRequested",{get:function(){return this._source.isRequested},enumerable:!1,configurable:!0}),e.prototype.throwIfRequested=function(){this._source.throwIfRequested()},e.prototype.disposeIfRequested=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._source).disposeIfRequested.apply(e,(0,i.ev)([],(0,i.CR)(t),!1))},e}(),s=function(){function e(){var e=this;this.token=new a(this),this._isRequested=!1,this.rejectIfRequested=function(t){return(0,i.mG)(e,void 0,void 0,(function(){return(0,i.Jh)(this,()}))}}return Object.defineProperty(e,"dummy",{get:function(){return u},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRequested",{get:function(){return this._isRequested},enumerable:!1,configurable:!0}),e.prototype.request=function(){this._isRequested=!0},e.prototype.throwIfRequested=e.prototype.disposeIfRequested=function(){for(var e,t,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(!this._isRequested)return!1;try{for(var a=(0,i.XA)(n),s=a.next();!s.done;s=a.next()){var u=s.value;u&&(0,r.isFunction)(u.dispose)&&u.dispose()}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return!0},e}(),u=(new s).token},48636:function(e,t,n){"use strict";n.d(t,{s:function(){return a}});var i=n(22970),r=function(e){function t(t){var n=this.constructor,i=e.call(this,t)||this;return Object.setPrototypeOf(i,n.prototype),i}return(0,i.ZT)(t,e),t}(Error),o=),a="function"!=typeof Object.setPrototypeOf?o:r},2851:function(e,t,n){"use strict";n.d(t,{D:function(){return o},q:function(){return r}});var i=n(22970);function r(e){for(var t,n,r,o,a=[],s=1;s<arguments.length;s++)a[s-1]=arguments[s];try{for(var u=(0,i.XA)(a),c=u.next();!c.done;c=u.next()){var l=c.value;try{for(var d=(r=void 0,(0,i.XA)(Object.getOwnPropertyNames(l))),h=d.next();!h.done;h=d.next()){var p=h.value;Object.defineProperty(e.prototype,p,Object.getOwnPropertyDescriptor(l,p))}}catch(e){r={error:e}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}}function o(e,t,n){e.prototype=Object.create(t.prototype),Object.assign(e.prototype,n),e.prototype.constructor=e}},61915:function(e,t,n){"use strict";n.d(t,{HE:function(){return u},nI:function(){return s}});var i=n(19237),r=n(11569),o=n(22509),a=n(55895),s=),u=)},95766:58534:function(e,t,n){"use strict";n.d(t,{I:function(){return o}});var i=n(36296),r=n(78867);function o(e){var t=e.provider,n=e.authtype,o=void 0===n?i.is.SHARING:n,a=e.context,s=void 0===a?{}:a;if(!t)throw new Error("Provider not specified");return(0,r.V)(t).authorize({provider:t,authtype:o,context:s})}},74164:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var i=n(13475);function r(e){var t=e.system,n=e.context,r=void 0===n?{}:n;if(!t)throw new Error("System not specified");return(0,i.X)(t).signIn({system:t,context:r})}},62918:71151:function(e,t,n){"use strict";n.d(t,{HC:function(){return s},Nm:function(){return r},xL:function(){return u}});var i,r,o=n(22970),a=n(40180);!function(e){e[e.This=0]="This",e[e.Next=1]="Next",e[e.Prev=-1]="Prev"}(i||(i={})),function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(r||(r={}));var s=),u=function(){eturn e.fromJSON=function(t,n){for(var i=n.fromJSON,r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];for(var u=new e,c=0;c<t.length;++c){var l=i.apply(void 0,(0,o.ev)([t[c]],(0,o.CR)(r),!1));c?(s.linkItems(u._tail,l),u._tail=l):u._head=u._tail=l}return u._count=t.length,u},e.prototype.finished=function(e){return arguments.length?(this._finished=e,this):this._finished},Object.defineProperty(e.prototype,"headItem",{get:function(){return this._head},enumerable:!1,configurable:!0}),e.prototype.head=function(e){return arguments.length?(this._count=0,this._head=e,this._tail||(this._tail=e),this):this._head},Object.defineProperty(e.prototype,"tailItem",{get:function(){return this._tail},enumerable:!1,configurable:!0}),e.prototype.tail=e.prototype.count=e.prototype.copy=e.prototype.detach=e.prototype.update4detach=e.prototype.append=function(){if(1===arguments.length){if(c(t=arguments[0]))return this._appendItem(t);if(l(t))return this._appendItems(t)}else if(2===arguments.length){var e=arguments[0];if(c(e)){var t;if(c(t=arguments[1]))return this._appendItem(e,t);if(l(t))return this._appendItems(e,t)}}throw new Error("Invalid arguments")},e.prototype.prepend=e.prototype.isEmpty=function(){return!this._head},e.prototype.each=e.prototype.forEach=e.prototype.forEachRight=e.prototype.empty=e.prototype.replace=e.prototype.toArray=e.prototype.toJSON=e.prototype.swap=e.prototype.item=e.prototype.find=e.prototype._appendItem=e.prototype._appendItems=e.prototype._prependItem=e.prototype._prependItems=e}();function c(e){return e instanceof s||(0,a.isFunction)(e.next)&&(0,a.isFunction)(e.prev)},57136:function(e,t,n){"use strict";n.d(t,{I:function(){return l}});var i=n(40180),r=n(24458),o=n(98392),a=n(34336),s=function(){eturn e.fromDto=function(t){return new e(t&&t.x,t&&t.y)},e}(),u=function(){function e(e,t){void 0===e&&(e=100),this.scale=e,this.translate=t||new s}return e.fromDto=function(t){return new e(t&&t.scale,t&&t.translate&&s.fromDto(t.translate))},e}(),c=function(){function e(e,t,n){void 0===n&&(n=new u(100,new s)),this.imageId=e,this.transformedImageId=t,this.transformations=n}return e.fromDto=function(t){return new e(t&&t.imageId,t&&t.transformedImageId,t&&t.transformations&&u.fromDto(t.transformations)||new u(100,new s))},e}(),l=function(){function e(e,t){if(!e)return null;if(e=(0,o.z)(e),this.profileId=e.profileId||e.profileName,this.enAccountNumber=e.enAccountNumber,this.accountNumber=e.accountNumber,this.email=e.email,this.displayName=e.displayName,this.nickname=e.nickname,this.photoUrl=e.photoUrl,this.location=e.location,this.isCurrentUser=e.isCurrentUser,this.isProfilePrivate=e.isProfilePrivate,this.isDeviceAccount=e.isDeviceAccount,this.isFollowedByCurrentUser=e.followedByCurrentUser,this.backgroundImageSettings=c.fromDto(e.backgroundImageSettings),this.avatarImageId=e.avatarImageId,this.ownedPublications=t,this.enableServiceEmails=e.enableServiceEmails,this.enablePromotionalEmails=e.enablePromotionalEmails,e.publicInfo&&(this.publicInfo=e.publicInfo),this.location){var n=e.locationLatLng;n&&0!==n.lat&&0!==n.lng&&(this.locationLatLng={lat:n.lat,lng:n.lng})}}return e.prototype.equals=function(e){var t=e,n=this.profileId;return t&&n&&(t||"").toUpperCase()===(n||"").toUpperCase()},e.prototype.goToChannelFeed=function(t){return this.ensureProfileName().then((function(n){return e.goToChannelFeed(n,t)}))},e.prototype.goToProfile=e.goToProfile=function(e){return a.Z.goView(r.n3.Profile,{profileId:e})},e.goToChannelFeed=function(e,t){var n=(0,i.extend)({channelfeed:"channelfeed",profileId:e},t);return a.Z.goView(r.n3.Profile,n)},e.ensureProfileName=function(e,t){return new Promise((function(i,r){e||t?e?i(e):Promise.resolve().then(n.bind(n,81867)).then(():r()}))},e.prototype.ensureProfileName=e}()},43388:function(e,t,n){"use strict";n.d(t,{K:function(){return r}});var i=n(22970);function r(e){var t=(0,i.CR)(e.split("-"),2),n=t[0],r=t[1],o=e.indexOf("-")>=0;return{localeString:e,languageCode:n,countryCode:r,isValid:o}}},62106:function(e,t,n){"use strict";n.d(t,{A:function(){return r}});var i=n(14744),r=new(function(){function e(){}return e.prototype.getStats=function(){return i.C.getStats()},e.prototype.get=function(){return i.C.get()},e.prototype.getById=function(e){return i.C.getById(e)},e.prototype.getByIds=function(e){return i.C.getByIds(e)},e.prototype.deleteMonitor=function(e){return i.C.delete(e)},e.prototype.updateMonitor=function(e,t,n){return i.C.saveFrequency(e,t,n)},e}())},61800:function(e,t,n){"use strict";n.d(t,{U:function(){return f}});var i=n(20384),r=n(40180),o=n(1395),a=n(19237),s=n(24458),u=n(32249),c=n(34336),l=n(61519),d=n(74981),h=n(46046),p=n(46524),f=new(function(){function e(){var e=this;this.searchParamsInternal=new o.X(new l.b),this.searchParams=this.searchParamsInternal.asObservable(),this.searchCountersInternal=new o.X(new l.W),this.searchCounters=this.searchCountersInternal.asObservable(),this.resetCounters(),this.currentSearchCounterInternal=new a.x,this.currentSearchCounter=this.currentSearchCounterInternal.asObservable(),this.loadArticles=new a.x,this.loadArticles.subscribe((function(t){(0,r.assign)(e.removedArticleIdsContainer,t),e.announceCounters()})),this.searchCountersInternal.subscribe((function(t){var n;switch(e.getSearchParams().state){case p.po.Custom:n=t.customCount;break;case p.po.CurrentTitle:n=t.titleCount;break;case p.po.CurrentIssue:n=t.issueCount;break;default:n=t.totalCount}e.currentSearchCounterInternal.next(n)}))}return e.prototype.newSearch=function(e){e=e||new l.b,this.goToSearchView((0,r.assign)(e,{isNew:!0}))},e.prototype.subSearch=function(e){this.goToSearchView((0,r.assign)(this.getSearchParams(),e))},e.prototype.reset=function(){this.setSearchParams(new l.b),this.removedArticleIdsContainer={}},e.prototype.setSearchParams=function(e,t){void 0===t&&(t=!0),e=e||new l.b,this.removedArticleIdsContainer={};var n=e.isNew;e.isNew=!1,this.searchParamsInternal.next(e),n&&this.loadCounters(e.type),t&&i(this).trigger("onsearch",this.getSearchParamsByState(e.state))},e.prototype.getSearchParams=function(){var e=this.searchParamsInternal.getValue();return h.Z.isNil(e)?new l.b:e},e.prototype.onArticlesLoaded=function(e){this.loadArticles.next(e)},e.prototype.onSearch=function(e){i(this).on("onsearch",e)},e.prototype.offSearch=function(e){i(this).off("onsearch",e)},e.prototype.toSearchParams=function(e){var t=new l.b({isNew:!!h.Z.isNil(e.isNew)||e.isNew,query:(0,u._d)(e.query),author:(0,u._d)(e.author),categories:(0,u._d)(e.categories),countries:(0,u._d)(e.countries),languages:(0,u._d)(e.languages),newspapers:(0,u._d)(e.newspapers),start:(0,u._d)(e.start),stop:(0,u._d)(e.stop),date:p.vf[e.date],in:p.Ye[e.in],orderBy:p.d$[e.orderBy],groupBy:p.X9[e.groupBy],hideSimilar:"1"===e.hideSimilar?1:0,type:parseInt(e.type,10),state:parseInt(e.state,10),searchFor:p.By[e.searchFor]});return this.ensureSearchType(t),this.ensureSearchState(t),t},e.prototype.toRouteConfig=function(e){e=e||new l.b;var t={};return t.isNew=e.isNew,t.query=e.query,t.author=e.author,t.countries=e.countries,t.categories=e.categories,t.languages=e.languages,t.newspapers=e.newspapers,t.start=e.start,t.stop=e.stop,t.date=e.date,t.in=e.in,t.orderBy=e.orderBy,t.groupBy=e.groupBy,t.hideSimilar=e.hideSimilar?"1":"0",t.type=e.type.toString(10),t.state=e.state.toString(10),t.subview=p.os.Fts,t.searchFor=e.searchFor,t},e.prototype.goToSearchView=function(e){this.ensureSearchType(e),this.ensureSearchState(e),c.Z.goView(s.n3.FTSArticles,this.toRouteConfig(e),!0)},e.prototype.loadCounters=function(e){var t=this;this.resetCounters(),this.getCount(this.getSearchParamsByState(p.po.AllTitles)).then((function(e){t.initialSearchCounters.totalCount=e,t.announceCounters()})),e===p.Sc.Advanced&&this.getCount(this.getSearchParamsByState(p.po.Custom)).then((function(e){t.initialSearchCounters.customCount=e,t.announceCounters()})),e===p.Sc.Issue&&(this.getCount(this.getSearchParamsByState(p.po.CurrentTitle)).then((function(e){t.initialSearchCounters.titleCount=e,t.announceCounters()})),this.getCount(this.getSearchParamsByState(p.po.CurrentIssue)).then(())},e.prototype.announceCounters=e.prototype.resetCounters=function(){this.removedArticleIdsContainer={},this.initialSearchCounters=new l.W({totalCount:null,customCount:null,titleCount:null,issueCount:null}),this.searchCountersInternal.next(this.initialSearchCounters)},e.prototype.getSearchParamsByState=function(e){void 0===e&&(e=null);var t=this.getSearchParams();null===e&&(e=t.state);var n=new l.b({type:t.type,state:e,query:t.query,author:t.author,orderBy:t.orderBy,hideSimilar:t.hideSimilar,date:t.date,start:t.start,stop:t.stop,in:t.in});return e===p.po.AllTitles?(t.type===p.Sc.Quick?(n.languages=t.languages,n.groupBy=p.X9.Language):t.type===p.Sc.Issue&&(n.date=p.vf.Anytime,n.groupBy=p.X9.DateRange),n):(n.newspapers=t.newspapers,e===p.po.CurrentTitle?(n.date=p.vf.Anytime,n.groupBy=p.X9.DateRange,n):e===p.po.Custom?(n.countries=t.countries,n.categories=t.categories,n.languages=t.languages,n):n)},e.prototype.ensureSearchType=e.prototype.ensureSearchState=function(e){(h.Z.isNil(e.state)||isNaN(e.state))&&(e.state=this.getDefaultSearchStateByType(e))},e.prototype.getStateTypeBySearchParams=function(e){return e.newspapers&&4===e.newspapers.length&&e.start&&e.stop?p.Sc.Issue:e.languages&&e.groupBy===p.X9.Language?p.Sc.Quick:p.Sc.Advanced},e.prototype.getDefaultSearchStateByType=function(e){switch(e.type){case p.Sc.Advanced:return e.hasCustomParameters()?p.po.Custom:p.po.AllTitles;case p.Sc.Issue:return p.po.CurrentIssue;default:return p.po.AllTitles}},e.prototype.getCount=function(e){return d.Z.get("fts","GetCount",e.toFtsParams({pageNumber:0,pageSize:1}),{timeout:15e3})},e}())},61519:function(e,t,n){"use strict";n.d(t,{W:function(){return u},b:function(){return s}});var i=n(22970),r=n(46046),o=n(4169),a=n(46524),s=function(){function e(e){void 0===e&&(e={}),this.isNew=e.isNew,this.query=e.query,this.author=e.author,this.countries=e.countries,this.categories=e.categories,this.languages=e.languages,this.newspapers=e.newspapers,this.start=e.start,this.stop=e.stop,this.date=e.date,this.in=e.in,this.orderBy=e.orderBy,this.groupBy=e.groupBy,this.hideSimilar=e.hideSimilar,this.type=e.type,this.state=e.state,this.searchFor=e.searchFor}return e.prototype.hasCustomParameters=e.prototype.toFtsParams=function(t){var n={};return n.searchText=this.query,n.searchAuthor=this.author,n.languages=this.languages,n.newspapers=this.newspapers,n.countries=this.countries,n.categories=this.categories,(!this.start&&!this.stop||this.date)&&(n.range=this.date||e.getDefaultDate()),n.searchIn=this.in||e.DefaultLocation,n.startDate=this.start,n.stopDate=this.stop,n.orderBy=this.orderBy||e.DefaultOrder,n.groupBy=this.groupBy,n.hideSame=this.hideSimilar,n.searchFor=this.searchFor||a.By.All,(0,i.pi)((0,i.pi)({},n),t)},e.getDefaultDate=e.DefaultLocation=a.Ye.All,e.DefaultOrder=a.d$.Relevance,e}(),u=function(){function e(e){void 0===e&&(e={}),this.totalCount=e.totalCount,this.customCount=e.customCount,this.titleCount=e.titleCount,this.issueCount=e.issueCount}return e.prototype.adjust=function(e){r.Z.isNil(this.totalCount)||(this.totalCount=this.totalCount+e),r.Z.isNil(this.customCount)||(this.customCount=this.customCount+e),r.Z.isNil(this.titleCount)||(this.titleCount=this.titleCount+e),r.Z.isNil(this.issueCount)||(this.issueCount=this.issueCount+e)},e.prototype.clone=function(){return new e(this)},e}()},11414:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var i,r=n(40180),o=n(60683),a=n(2099),s=(n(20384),n(74981)),u=function(e){return s.Z.get("issues",e+"/social/sections")},c=n(4169),l=n(57136),d=n(49698),h=n(94711),p=n(16778),f=function(){function e(e,t){void 0===t&&(t={width:28,height:28}),this.opinionId=e.OpinionId,this.enAccountNumber=e.EncryptedAccountNumber,this.nickname=e.Nickname,this.user=new l.I(e),this.joined=new Date(e.JoinedOn).toLocaleString(),this.userLocation=e.UserLocation||"",this.isFollowedByCurrentUser=!!e.FollowedByCurrentUser,this.avatarImageId=e.avatarImageId,this.photoUrl=e.PhotoUrl,this.avatarSize=t}return e.prototype.avatar=function(){return(0,o.b_)({nickname:this.nickname,imageId:this.avatarImageId,size:this.avatarSize,fallbackAvatarUrl:this.photoUrl})},e.prototype.goToProfile=function(){return this.user.goToProfile()},e}(),m=function(e){e&&e.Text&&(this.articleId=e.ArticleId,this.article=e.Subject,this.threadId=e.ThreadId,this.postId=e.PostId,this.publicId=e.CommentKey,this.comment=e.Text,this.postsInArticle=e.PostsInArticle,this.authorId=e.UserAccountNumber,e.Opinion&&e.Opinion.OpinionId&&(this.opinion=new d.Z({opinionId:e.Opinion.OpinionId.toString(),webName:e.Opinion.WebName,text:e.Opinion.Text,numberOfFollowers:e.Opinion.NumberOfFollowers,followedByCurrentUser:e.Opinion.FollowedByCurrentUser})),e.attachments?this.attachments=e.attachments:e.Artifacts&&(this.attachments=(0,r.map)(e.Artifacts,(function(e){return e.VideoMeta?new p.Z({url:e.VideoMeta.VideoUrl,thumbnailImageId:e.ObjectId,thumbnailWidth:e.PreviewUrl.Width,thumbnailHeight:e.PreviewUrl.Height}):new h.Z({imageId:e.ObjectId,width:e.PreviewMeta.Width,height:e.PreviewMeta.Height})}))),this.hasAttachments=!(0,r.isEmpty)(this.attachments),this.userProfile=new f(e.UserProfile,o.wC.huge),this.eventTime=Date.parse(e.PostDate))},g=function(e,t){this.section=t||e.Section||"",this.comments=(0,r.chain)(e.SocialSection&&e.SocialSection.Comments||[]).filter((function(e){return e.Text})).map((function(e){return new m(e)})).value(),this.recentlyJoined=(0,r.map)(e.SocialSection&&e.SocialSection.RecentlyJoined||[],(function(e){return new v(e)}))},v=function(e){e&&!(0,r.isEmpty)(e.Followers)&&(this.userProfile=new f(e.Followers[0],o.wC.huge),this.authorId=e.Followers[0]&&e.Followers[0].AccountNumber,this.opinion=new d.Z({opinionId:e.OpinionId.toString(),webName:e.WebName,text:e.Text,numberOfFollowers:e.NumberOfFollowers,followedByCurrentUser:e.FollowedByCurrentUser}),this.eventTime=Date.parse(e.Followers[0].JoinedOn))};function y(e,t){var n=c.Z.get("ui.textView.enableSocialSection",!1);return!e&&i||!n?Promise.resolve():u(t||a.Z.issue()).then(_)}function _(e){i=(0,r.map)(e,(function(e){return new g(e)}))}var b={getSectionsForIssue:function(e){return y(!0,e).then((function(){return i}))},getDataBySection:function(e){return y(!1).then((function(){for(var t=null,n=e.title||e,r=i&&i.length||0;r--;)if(i[r].section&&!n.localeCompare(i[r].section)){t=i[r];break}return t?Promise.resolve(t):Promise.reject()}))},SectionModel:g}},84672:64156:function(e,t,n){"use strict";n.d(t,{G:function(){return l},p:function(){return c}});var i=n(22970),r=n(40180),o=n(46046),a=n(53169),s=n(96389),u=n(17447);function c(e){if(e.isEmpty())return u.ZP.val("Dialogs.AdvancedSearch.AllTitles");var t=e.getCollections();if(1===t.titles.length&&(0,r.isEmpty)(t.countries)&&(0,r.isEmpty)(t.categories))return t.titles[0].name;if((0,r.isEmpty)(t.titles)&&1===t.countries.length&&(0,r.isEmpty)(t.categories))return t.countries[0].displayName;if((0,r.isEmpty)(t.titles)&&(0,r.isEmpty)(t.countries)&&1===t.categories.length)return t.categories[0].displayName;var n=[];return 1===t.countries.length?n.push(t.countries[0].displayName):t.countries.length>1&&n.push(u.ZP.format("Dialogs.AdvancedSearch.Selection.Countries",t.countries.length)),1===t.categories.length?n.push(t.categories[0].displayName):t.categories.length>1&&n.push(u.ZP.format("Dialogs.AdvancedSearch.Selection.Categories",t.categories.length)),1===t.titles.length?n.push(t.titles[0].displayName):t.titles.length>1&&n.push(u.ZP.format("Dialogs.AdvancedSearch.Selection.Titles",t.titles.length)),n.join(", ")}var l=function(){function e(){this.container={}}return e.prototype.setCategory=function(e,t,n){if(void 0===n&&(n={}),e&&t){var i=this.ensureCategoryExists(e.id);i.category=e,i.groupName=t,i.titles=n}},e.prototype.resetCategory=e.prototype.setTitles=function(e,t){var n=this;void 0===t&&(t=null),(0,r.isEmpty)(e)||e.forEach((function(e){return e.categories.forEach((function(i){var r=n.ensureCategoryExists(i);r.category&&r.category.id===t.id&&(r.category=null),r.titles[e.cid]=e}))}))},e.prototype.getCategorySelection=function(e){return this.container[e]},e.prototype.clear=e.prototype.isEmpty=function(){var e=(0,r.filter)(this.container,();return(0,r.isEmpty)(e)},e.prototype.toSearchParams=function(){var e=this.getCollections();return{newspapers:e.titles.map((function(e){return e.cid})).join(","),countries:e.countries.map((function(e){return e.id})).join(","),categories:e.categories.map((function(e){return e.id})).join(",")}},e.prototype.fromSearchParams=function(e){return this.clear(),Promise.all([this.restoreTitles(e.newspapers),this.restoreCategories(e.countries,a.LQ.Countries,s.ox),this.restoreCategories(e.categories,a.LQ.Categories,s.getCategories)])},e.prototype.fromCollections=function(e){var t=this;this.clear();var n=(0,s.FH)(e.titles),r=(0,s.ox)(),o=e.countries.reduce((function(e,t){return e[t]=!0,e}),{});return Promise.all([n,r]).then((function(e){var n=(0,i.CR)(e,2),r=n[0],s=n[1];return t.setTitles(r),s.forEach((function(e){o[e.id]&&t.setCategory(e,a.LQ.Countries)})),Promise.all([r,s])}))},e.prototype.toFilters=function(){var e=this.getCollections();return{inCategories:e.countries.map((function(e){return e.id})).concat(e.categories.map((function(e){return e.id})))}},e.prototype.getCollections=function(){var e={},t={},n={};return(0,r.forOwn)(this.container,(function(i,o){i.category?i.groupName===a.LQ.Countries&&null!==i.titles?t[o]=i.category:i.groupName===a.LQ.Categories&&null!==i.titles&&(n[o]=i.category):(0,r.isEmpty)(i.titles)||(0,r.forOwn)(i.titles,(function(t,n){e[n]=t}))})),{titles:(0,r.values)(e),countries:(0,r.values)(t),categories:(0,r.values)(n)}},e.prototype.ensureCategoryExists=function(e){return e?(this.container[e]||(this.container[e]={category:null,groupName:null,titles:{}}),this.container[e]):null},e.prototype.restoreTitles=function(e){var t=this;if(!e)return Promise.resolve([]);var n=e.split(",");return((0,r.isEmpty)(n)?Promise.resolve([]):(0,s.FH)(n)).then(()},e.prototype.restoreCategories=function(e,t,n){var i=this;if(!e)return Promise.resolve([]);var a=o.Z.arrayToHashSet(e.split(","));return((0,r.isEmpty)(a)?Promise.resolve([]):n()).then((function(e){return e.forEach((function(e){a[e.id]&&i.setCategory(e,t)})),e}))},e}()},14744:function(e,t,n){"use strict";n.d(t,{C:function(){return p},a:function(){return i}});var i,r=n(40180),o=n(19237),a=n(77004),s=n(60811),u=n(79913),c=n(74981),l=n(33180);unction(e){e.Save="save",e.Delete="delete"}(i||(i={}));var p=new(function(){function e(){var e=this;this.cache=null,this.basePath="topics",this.updatesSubject=new o.x,a.bind("tokenUpdated",(function(){e.cache=null})),this.updates=this.updatesSubject.asObservable()}return e.prototype.get=function(){var e=this;return this.cache?Promise.resolve(this.cache):c.Z.get(this.basePath).then(().catch(()},e.prototype.getById=function(e){return this.get().then(()},e.prototype.getByIds=function(e){return this.get().then((function(t){return t.filter(()}))},e.prototype.save=function(e){var t=this;return this.get().then((function(n){if(function(e,t){var n=t.id,i=t.topicTypeId,o=d(t.searchQuery),a=d(t.searchAuthor),s=d(t.searchIn),u=h(t.newspapers),c=h(t.countries),l=h(t.languages);return e.some((function(e){return n!==e.id&&i===e.topicTypeId&&o===d(e.searchQuery)&&a===d(e.searchAuthor)&&s===d(e.searchIn)&&(0,r.isEqual)(u,h(e.newspapers))&&(0,r.isEqual)(c,h(e.countries))&&(0,r.isEqual)(l,h(e.languages))}))}(n,e))throw new l.Z("The topic with the same filter already exists","Dialogs.AddMonitor.Error.DuplicateMonitor");var i={contentType:"application/json",disableRetry:!0};return e.id?c.Z.put(t.basePath,e.id.toString(),JSON.stringify(e),i):c.Z.post(t.basePath,"",JSON.stringify(e),i)})).then((function(n){s.mc();var i=e.id||n;return t.cache=null,Object.assign({},e,{id:i})})).then((function(e){return t.updatesSubject.next({id:e.id,opType:i.Save}),e}))},e.prototype.saveFrequency=function(e,t,n){var i=this;return(0,u.zf)("monitors","updateMonitor",{monitorId:e,frequency:t,notificationTime:n},{}).then(()},e.prototype.delete=function(e){var t=this;return c.Z.delete(this.basePath,e.toString(),null,{disableRetry:!0}).then((function(){t.cache=null,t.updatesSubject.next({id:e,opType:i.Delete})}))},e.prototype.getStats=function(){return this.get().then((function(e){return{allCount:e.length}}))},e}())},18518:function(e,t,n){"use strict";var i;n.d(t,{Y:function(){return i}}),function(e){e[e.Ok=1]="Ok",e[e.Cancel=2]="Cancel",e[e.Close=3]="Close",e[e.Destroy=4]="Destroy",e[e.Unknown=10]="Unknown"}(i||(i={}))},30322:function(e,t,n){"use strict";n.d(t,{DF:function(){return v},OC:function(){return _},W4:function(){return y},ZR:function(){return b},kx:function(){return g}});var i,r,o=n(22970),a=n(60231),s=n(40180),u=n(17447),c=n(46720),l=n(99806),d=n(96389),h=n(61519),p=n(61800),f=n(46524),m={searchIn:(i={},i[f.Ye.All]="SearchMonitorPanel.ResultLocationAnywhere",i[f.Ye.Headline]="Dialogs.AdvancedSearch.InHeadline",i[f.Ye.Body]="Dialogs.AdvancedSearch.InBody",i),date:(r={},r[f.vf.Today]="Dialogs.AdvancedSearch.Today",r[f.vf.Last3Days]="Dialogs.AdvancedSearch.Last3Days",r[f.vf.ThisWeek]="Dialogs.AdvancedSearch.ThisWeek",r[f.vf.ThisMonth]="Dialogs.AdvancedSearch.ThisMonth",r[f.vf.Anytime]="Dialogs.AdvancedSearch.Anytime",r)};function g(e){return e.length>1?e.length:e[0]}function v(e){var t=m.searchIn[e];return t?(u.ZP.val(t)||t).toLowerCase():""}function y(e){var t=m.date[e];return t?u.ZP.val(t).toLowerCase():""}function _(e,t){return void 0===t&&(t=!0),(0,o.mG)(this,void 0,Promise,(function(){var n,i,r,a,c,l,p,m,_;return(0,o.Jh)(this,(function(b){switch(b.label){case 0:return n=[u.ZP.loaded()],t&&Object.keys(e).forEach((function(t){e[t]&&"string"==typeof e[t]&&(e[t]=(0,s.escape)(e[t]))})),(0,s.isEmpty)(e.newspapers)||(1===(i=e.newspapers.split(",")).length?n.push((0,d.b)(i[0]).then((function(e){return e.displayName}))):n.push(Promise.resolve(i.length.toString(10)))),[4,Promise.all(n)];case 1:return r=o.CR.apply(void 0,[b.sent(),2]),a=r[1],c=[],e.query&&c.push(e.query),e.author&&c.push(u.ZP.format("SearchToolbar.Author","<em>".concat(e.author,"</em>"))),e.type===f.Sc.Quick?c.push(u.ZP.val("SearchToolbar.InAllLanguages")):(0,s.isEmpty)(e.languages)||(l=e.languages.split(","),c.push(u.ZP.format("SearchToolbar.Languages","<em>".concat(g(l),"</em>")))),a&&[f.po.CurrentIssue,f.po.CurrentTitle].indexOf(e.state)>-1&&c.push(u.ZP.format("SearchToolbar.Newspapers","<em>".concat(a,"</em>"))),(0,s.isEmpty)(e.countries)?[3,3]:[4,(0,d.ox)()];case 2:p=b.sent(),m=e.countries.split(",").map((function(e){return parseInt(e,10)})),_=p.filter((function(e){return m.includes(e.id)})).map((function(e){return e.displayName})),c.push(u.ZP.format("SearchToolbar.Countries","<em>".concat(g(_),"</em>"))),b.label=3;case 3:return e.type===f.Sc.Issue?e.state!==f.po.CurrentIssue&&c.push(u.ZP.format("SearchToolbar.Range","<em>".concat(f.vf.Anytime,"</em>"))):e.date===f.vf.Range?c.push(u.ZP.format("SearchToolbar.Range","<em>".concat(e.start," - ").concat(e.stop,"</em>"))):c.push(u.ZP.format("SearchToolbar.Range","<em>".concat(y(e.date||h.b.getDefaultDate()),"</em>"))),c.push(u.ZP.format("SearchToolbar.SearchIn","<em>".concat(v(e.in||h.b.DefaultLocation),"</em>"))),[2,c.join(" ")]}}))}))}var b=function(){function e(e){var t,n=this;this.element=e,this.model=new w,this.isVisible=!1,p.U.searchParams.subscribe((function(e){n.model.searchResult(u.ZP.val("SearchToolbar.Searching")),t=_(e,!1)})),p.U.currentSearchCounter.subscribe((function(e){null!=e&&t.then((function(t){n.model.searchResult(u.ZP.format("ToolbarSearchMonitor",e.toLocaleString(),t))}))}))}return e.prototype.show=function(){var e=this;return this.isVisible||(this.isVisible=!0,l.z.loaded().then(()),this},e.prototype.linkView=function(e){var t=this;this.model.viewportLeft(e.viewport().left),c.Z.bind(e,"viewportChanged",null,(function(e,n){t.model.viewportLeft(n.left)}))},e}(),w=function(){this.searchResult=(0,a.observable)(""),this.viewportLeft=(0,a.observable)()}},25371:function(e,t,n){"use strict";var i;n.d(t,{Z:function(){return r}});var r=)},30070:function(e,t,n){"use strict";n.d(t,{S:function(){return s}});var i,r=["click","touchend"],o="data:audio/mpeg;base64,//uQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAADAAAGhgBVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVWqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr///////////////////////////////////////////8AAAA5TEFNRTMuOThyAc0AAAAAAAAAABSAJAiqQgAAgAAABobxtI73AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA//uQxAACFEII9ACZ/sJZwWEoEb8w/////N//////JcxjHjf+7/v/H2PzCCFAiDtGeyBCIx7bJJ1mmEEMy6g8mm2c8nrGABB4h2Mkmn//4z/73u773R5qHHu/j/w7Kxkzh5lWRWdsifCkNAnY9Zc1HvDAhjhSHdFkHFzLmabt/AQxSg2wwzLhHIJOBnAWwVY4zrhIYhhc2kvhYDfQ4hDi2Gmh5KyFn8EcGIrHAngNgIwVIEMf5bzbAiTRoAD///8z/KVhkkWEle6IX+d/z4fvH3BShK1e5kmjkCMoxVmXhd4ROlTKo3iipasvTilY21q19ta30/v/0/idPX1v8PNxJL6ramnOVsdvMv2akO0iSYIzdJFirtzWXCZicS9vHqvSKyqm5XJBdqBwPxyfJdykhWTZ0G0ZyTZGpLKxsNwwoRhsx3tZfhwmeOBVISm3impAC/IT/8hP/EKEM1KMdVdVKM2rHV4x7HVXZvbVVKN/qq8CiV9VL9jjH/6l6qf7MBCjZmOqsAibjcP+qqqv0oxqpa/NVW286hPo1nz2L/h8+jXt//uSxCmDU2IK/ECN98KKtE5IYzNoCfbw+u9i5r8PoadUMFPKqWL4LK3T/LCraMSHGkW4bpLXR/E6LlHOVQxmslKVJ8IULktMN06N0FKCpHCoYsjC4F+Z0NVqdNFoGSTjSiyjzLdnZ2fNqTi2eHKONONKLMPMKLONKLMPQRJGlFxZRoKcJFAYEeIFiRQkUWUeYfef//Ko04soswso40UJAgMw8wosososy0EalnZyjQUGBRQGIFggOWUacWUeYmuadrZziQKKEgQsQLAhQkUJAgMQDghltLO1onp0cpkNInSFMqlYeSEJ5AHsqFdOwy1DA2sRmRJKxdKRfLhfLw5BzUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUxBTUUzLjk4LjJVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/7ksRRA8AAAaQAAAAgAAA0gAAABFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVU=";function a(){r.forEach((function(e){return window.removeEventListener(e,a)})),document.location.href.match(/radio/)||(i.src=o,i.play().catch((function(e){})))}function s(){!(i=document.getElementById("audio"))&&((i=new Audio).id="audio",document.body.appendChild(i),1)&&r.forEach(()}},5439:function(e,t,n){"use strict";n.d(t,{$:function(){return a}});var i=n(24458),r=n(88077),o=n(30722),a=new(function(){function e(){}return e.prototype.highlightTextInView=function(e,t){e===i.n3.PagesView?this.highlightSearchOnPages(t):e!==i.n3.Home&&e!==i.n3.HotSpotsHub&&e!==i.n3.Radio&&this.highlightSearchInText(t)},e.prototype.highlightSearchInText=e.prototype.highlightSearchOnPages=function(e){o.Z.confirm(e)},e.prototype.highlightTopicInText=function(e){e?(r.Z.highlightTopic(e),r.Z.confirmTopic()):r.Z.resetHighlightTopic()},e.prototype.highlightTopicInSection=e}())},1301:function(e,t,n){"use strict";n.d(t,{I:function(){return r}});var i=n(92741),r={appendTo:function(e){return e.createChild("div").addClass("art-div").css("height","".concat((0,i.Jn)(),"px")).checkpoint((0,i.Jn)()),r},get htmlget height(){return(0,i.Jn)()}}},84241:function(e,t,n){"use strict";n.d(t,{Oh:function(){return g},W2:function(){return d}});var i,r=n(22970),o=n(20384),a=n(40180),s=n(19237),u=n(11569),c=n(22509),l=n(25371),d=(n(16412),function(){function e(e,t,n,i,r){void 0===i&&(i="section-news"),this._innerHeaders=[],this._id=t,this._title=n,this._elm=o('<section class="'.concat(i,'" section-id="').concat(t,'"/>')),e.append(this._elm),r&&this._elm.css(r),n&&(this._outerHeader=o('<div class="'.concat(i,'" section-id="').concat(t,'" style="position:absolute;top:0px;visibility:hidden;"/>')),this._outerHeader.append('<h2 class="subsection" style="position:static;">'.concat(n,"</h2>")),e.parent().append(this._outerHeader),this.addInnerHeader(),this._headerWidth=this._outerHeader.outerWidth(!0),this._outerHeader.optimizeForTransform()),this._context=g()}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),e.prototype.innerHeader=e.prototype.innerHeaders=function(){return this._innerHeaders},e.prototype.addInnerHeader=function(){var e=this._createInnerHeaderElm();return this._innerHeaders.push(e),e},e.prototype.outerHeader=function(){return this._outerHeader},e.prototype.headerWidth=function(){return this._headerWidth},e.prototype.article=function(){var e=o("<article/>");this._elm.append(e);var t=new h(this,e);return this._children?this._children.push(t):this._children=[t],t},e.prototype.div=function(){var e=o("<div/>");this._elm.append(e);var t=new h(this,e);return this._children?this._children.push(t):this._children=[t],t},e.prototype.column=function(){return this.div()},e.prototype.removeChild=function(e){e&&((0,a.isEmpty)(this._children)||((0,a.remove)(this._children,(function(t){return t===e})),this._children.length||this.remove()))},e.prototype.remove=function(){var e,t,n,i;if(this._elm&&(this._elm.remove(),delete this._elm),this._children){var o=this._children;delete this._children;try{for(var a=(0,r.XA)(o),s=a.next();!s.done;s=a.next())s.value.remove()}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}}try{for(var u=(0,r.XA)(this._innerHeaders),c=u.next();!c.done;c=u.next())c.value.fastRemove()}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}this._innerHeaders.length=0,this._outerHeader&&(this._outerHeader.fastRemove(),delete this._outerHeader),delete this._headerWidth,this._context.removeSection(this)},e.prototype.show=function(){return this._elm.show(),this},e.prototype.hide=function(){return this._elm.hide(),this},Object.defineProperty(e.prototype,"hasHeaders",{get:function(){return!!this._title},enumerable:!1,configurable:!0}),e.prototype._createInnerHeaderElm=function(){var e=o('<h2 class="subsection" style="visibility:hidden;">'.concat(this._title,"</h2>")).optimizeForTransform();return this._elm.append(e),e},e}()),h=function(){function e(e,t){this._parent=e,this._elm=t}return e.prototype.elm=function(){return this._elm},e.prototype.detach=function(){if(!this._elm||this._parentNode)return this;var e=this._elm[0];return e?(this._parentNode=e.parentNode,this._parentNode.removeChild(e),this):this},e.prototype.reattach=function(){if(!this._elm||!this._parentNode)return this;var e=this._elm[0];if(!e)return this;this._parentNode.appendChild(e),delete this._parentNode},e.prototype.createChild=function(e){return e?((0,a.isString)(e)?t=new f(this,this._elm.createChild(e)):(t=new f(this,o(e)),e.parentNode&&this._elm[0]===e.parentNode||this._elm[0].appendChild(e)),this._children?this._children.push(t):this._children=[t],t):new f(this,this._elm);var t},e.prototype.remove=function(){this._children&&delete this._children,this._parentNode&&delete this._parentNode,this._elm&&(this._elm.remove(),delete this._elm),this._parent&&(this._parent.removeChild(this),delete this._parent)},e.prototype.removeChildren=function(){var e,t;if(!(0,a.isEmpty)(this._children))try{for(var n=(0,r.XA)(this._children),i=n.next();!i.done;i=n.next())i.value.removeElm()}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return delete this._children,this},e.prototype.removeChild=function(e){return e?((0,a.isEmpty)(this._children)||(0,a.remove)(this._children,(function(t){return t===e})),this):this},e.prototype.css=function(){return 1===arguments.length&&(0,a.isString)(arguments[0])?this._elm.css.apply(this._elm,arguments):(this._elm.css.apply(this._elm,arguments),this)},e.prototype.addClass=function(e){return this._elm.addClass(e),this},e.prototype.removeClass=function(e){return this._elm.removeClass(e),this},e.prototype.height=function(){return(0,a.isEmpty)(this._children)?0:(0,a.sumBy)(this._children,(function(e){return e.height()}))},e.prototype.find=function(e){return this._elm.find(e)},e.prototype.bind=function(){return this._elm.bind.apply(this._elm,arguments),this},e.prototype.attr=function(){return this._elm.attr.apply(this._elm,arguments),this},e.prototype.children=function(e){return this._elm.children(e)},e.prototype.animate=function(e,t){return this._elm.animate.apply(this._elm,arguments),this},e.prototype.show=function(){return this._elm.show(),this},e.prototype.hide=function(){return this._elm.hide(),this},e}();!function(e){e[e.Rendered=0]="Rendered",e[e.AboutToBeRemoved=1]="AboutToBeRemoved"}(i||(i={}));var p=o('<p style="height:0px;overflow:hidden;">a</p>'),f=function(){function e(e,t){this._html=[],this._idx=0,this._height=0,this._changed=!1,this._nodesIdx=0,this._newNodesIdx=0,this._top=0,this._maxHeight=0,this._events=new s.x,this._parent=e,this._elm=t}return e.prototype.checkpoint=function(e){return arguments.length?(this._idx=this._html.length,this._height+=e,this._newNodes&&(this._newNodesIdx<this._idx?(this._newNodes.fastRemove(),this._changed=!0):this._nodesIdx=this._idx,this._newNodes=void 0,this._newNodesIdx=0),this):this.elm().fastAppend(p).height()-this._height-0},e.prototype.rollback=function(){return this._html.splice(this._idx,this._html.length-this._idx),this._newNodes&&(this._newNodes.fastRemove(),this._newNodes=void 0,this._newNodesIdx=0),this},e.prototype.elm=function(){return this._changed&&(this._changed=!1,this._newNodes&&(this._newNodes.fastRemove(),this._newNodes=void 0,this._newNodesIdx=0),this._nodesIdx<this._idx&&(this._elm.fastAppend(this._html.slice(this._nodesIdx,this._idx).join("")),this._nodesIdx=this._idx),this._idx<this._html.length&&(this._newNodes=o.fastHtml(this._html.slice(this._idx).join("")).fastAppendTo(this._elm),this._newNodesIdx=this._html.length)),this._elm},e.prototype.render=function(){var e=this.elm();return this._events.next({type:i.Rendered,data:e}),e},e.prototype.html=e.prototype.append=function(e){return this._changed=!0,this._html.push(e),this},e.prototype.height=function(){return this._idx!==this._html.length?this.elm().fastAppend(p).height()-0:this._height},e.prototype.top=function(e){return arguments.length?(this._top=e,this):this._top},e.prototype.maxHeight=function(e){return arguments.length?(this._maxHeight=e,this):this._maxHeight},e.prototype.remove=function(){return this._events.next({type:i.AboutToBeRemoved,data:this.elm()}),this._events.complete(),delete this._events,delete this._html,this._elm.remove(),delete this._elm,this._newNodes&&this._newNodes.fastRemove(),delete this._newNodes,this._parent.removeChild(this),delete this._parent,this},e.prototype.css=function(){return this._elm.css.apply(this._elm,arguments),this},e.prototype.addClass=function(e){return this._elm.addClass(e),this},e.prototype.attr=function(){return this._elm.attr.apply(this._elm,arguments),this},e.prototype.animate=e.prototype.children=function(){return this.elm().children.apply(this.elm(),arguments)},e.prototype.find=function(){return this.elm().find.apply(this.elm(),arguments)},e.prototype.addOnRenderedListener=function(e){return this._events.pipe((0,u.h)((function(e){return e.type===i.Rendered})),(0,c.U)((function(e){return e.data}))).subscribe(e),this},e.prototype.addOnBeforeRemoveListener=function(e){return this._events.pipe((0,u.h)((function(e){return e.type===i.AboutToBeRemoved})),(0,c.U)((function(e){return e.data}))).subscribe(e),this},e.prototype.show=function(){return this._elm.show(),this},e.prototype.hide=e.prototype.removeElm=function(){this._elm.remove()},e}(),m=function(){eturn e.prototype.section=function(e){return arguments.length&&e?((0,a.isString)(e)?t=n=e:(t=e.id,n=e.title,e.subtitle&&(n+=" - ".concat(e.subtitle)),i=e.className,r=e.styles),t in this._sections?this._sections[t]:this._sections[t]=new d(this._parent,t,n,i,r)):(this._section||(this._section=new d(this._parent)),this._section);var t,n,i,r},e.prototype.sections=function(){var e=[];return(0,a.forIn)(this._sections,(function(t){e.push(t)})),e},e.prototype.reset=function(){this._section&&(this._section.remove(),delete this._section),(0,a.forIn)(this._sections,(function(e){e.remove()})),this._sections={}},e.prototype.parent=function(){return this._parent},e.prototype.removeSection=function(e){this._section===e?this._section=null:e.id in this._sections&&delete this._sections[e.id]},e}();function g(e){if(e)return new m(e);var t=l.Z.current,n="textViewElms";if(n in t)return t[n];var i=t.textViewScroller&&t.textViewScroller.elm;return t[n]=new m(i)}},36235:function(e,t,n){"use strict";n.d(t,{D:function(){return A}});var i=n(22970),r=n(20384),o=n(40180),a=n(43389),s=n(24458),u=n(4169),c=n(17447),l=(n(16412),n(71151)),d=n(88769),h=n(46720),p=n(55193),f=n(98744),m=n(27670),g=n(66327),v=n(20384);function y(e,t){var n=!!a.v.touch;return'<div class="readingnav rn-'.concat(e,'" style="').concat(n?"width:100px":"",'">\n                <div class="rn-in">\n                    <div class="rn-content">\n                        <figure>\n                            <figcaption>\n                                <h1>').concat(t,"</h1>\n                            </figcaption>\n                        </figure>\n                    </div>\n                </div>\n            </div>")}r w=null;function C(e){b(e)||(w&&clearTimeout(w),w=setTimeout((function(){e.css({right:-e.outerWidth()}).show().animate({right:0},300),w=null}),300))}function I(e){b(e)&&e.fadeOut("fast")}function P(e){e.el.css({opacity:"0.01",display:"block"})}function x(e){e.el.css({opacity:"1",display:"block"})}var S=function(){eturn e.prototype.stopContinuousScroll=e}(),T=function(e){function t(t){return e.call(this,t,r(y("left","Prev")))||this}return(0,i.ZT)(t,e),t.prototype.scroll=function(){return this.viewInstance.scrollScreenLeftAlign(d.c8.scrollZone)},t.prototype.startContinuousScroll=function(){this.continuousScrollAnimationStarted||(this.viewInstance.startContinuousScroll(l.Nm.Backward,d.c8.scrollZone),this.continuousScrollAnimationStarted=!0)},t.prototype.canScroll=function(){if(this.viewInstance.isAnimating())return!1;var e=(this.viewInstance.visibleColumns()||[])[0];return!!e&&!e.isFirst()},t}(S),k=function(e){function t(t){return e.call(this,t,r(y("right","Next")))||this}return(0,i.ZT)(t,e),t.prototype.scroll=t.prototype.startContinuousScroll=function(){this.continuousScrollAnimationStarted||(this.viewInstance.startContinuousScroll(l.Nm.Forward,d.c8.scrollZone),this.continuousScrollAnimationStarted=!0)},t.prototype.canScroll=function(){if(this.viewInstance.isAnimating())return!1;var e=this.viewInstance.visibleColumns()||[],t=e[e.length-1];return!!t&&!t.isLast()},t}(S),A=function(){function e(e,t,n){var i=this;this.viewInstance=null,this.left=null,this.right=null,this.newsButton=null,this.moreButton=null,this.tip=!1,this.newsButtonIsVisible=!1,this.moreButtonIsVisible=!1,n&&(this.viewInstance=t,Promise.all([u.Z.loaded(),c.R9.loaded()]).then((function(){u.Z.get(n,!0)&&(i.left=new T(i.viewInstance),i.right=new k(i.viewInstance),i.newsButton=r(_(c.R9.val("TextViewer.TipIntro.Title"))),i.moreButton=r(_(c.R9.val("TextViewer.MoreButton"))),h.Z.bind(t,"currentColumnChanged",null,i.onCurrentColumnChanged.bind(i)),i.render(e))})))}return e.prototype.init=function(){var e=this.viewInstance.visibleColumns()[0];this.showInitBlock(e)},e.prototype.updateLayout=function(){this.canScrollLeft()?x(this.left):this.left.el.css("display","none"),this.right&&(this.canScrollRight()&&!this.tip?x(this.right):P(this.right))},e.prototype.render=function(e){var t=this;if(this.viewInstance){var n=h.Z.bind(this.viewInstance,"positionchanged",this.updateLayout.bind(this));var i=function(e,i){e.canScroll()||t.updateLayout();var a=function(e,t){if(r(e.target()).is(".rn-content figure"))return!1;var n=Object.assign(v.Event("singleTapConfirmed"),{pageX:e.position().x,pageY:e.position().y,changedTouches:e.event().changedTouches});return function(e,t){if((0,o.isFunction)(document.elementFromPoint)){!function(e){e.el.translateLeft("-10000px",!0)}(e);var n=r(document.elementFromPoint(t.pageX,t.pageY));!e),function(e,t){t.target=e[0],e.trigger(t)}(n,t)}}(t,n),n.isPropagationStopped()||n.isImmediatePropagationStopped()||f.Z.event.clickAndTouch.isHandled(n)}(i,e);return a||n((function(){return e.scroll()})),!1},a=function(e,n){return e.canScroll()?e.startContinuousScroll():t.updateLayout(),!1},s=function(e){e.stopContinuousScroll()};p.kb.bind(this.right.el,{singleTapConfirmed:function(e){return i(t.right,e)},longPress:function(e){return a(t.right)},contextMenu:function(){return!1},gesturesEnd:function(){return s(t.right)}}),p.kb.bind(this.left.el,{singleTapConfirmed:longPress:function(e){return a(t.left)},contextMenu:function(){return!1},gesturesEnd:function(){return s(t.left)}}),p.kb.bind(this.newsButton,{singleTapConfirmed:function(){return t.tip?t.viewInstance.scroll(3*-t.viewInstance.columns().width,512):t.viewInstance.controller.scrollToTip(),!1}}),p.kb.bind(this.moreButton,{singleTapConfirmed:function(){t.canScrollRight()?n((function(){return t.viewInstance.scrollScreenRightAlign(d.c8.scrollZone)})):t.updateLayout()}})}e.append(this.left.el),e.append(this.right.el),[this.newsButton,this.moreButton].forEach((function(t){t.css({display:"none",top:"50%","margin-top":-(t.outerHeight()/2+22)}),e.append(t)})),this.rendered=!0},e.prototype.showInitBlock=function(e){if(e&&this.rendered)if(function(e){for(var t=e;t.nextItem&&t.nextItem.isVisible();)t=t.nextItem;return t.state().expanded}(e))I(this.newsButton);else if((0,m.m)()===s.n3.Opinion)!function(e){return e.type()===g.Xp.Opinion&&0===e.columnIdx()}(e)?this.hideMoreButton():this.showMoreButton();else if((0,m.m)()===s.n3.TopNews)if(void 0===this.viewInstance.direction()&&function(e){var t=e.type(),n=e.columnIdx();return t===g.Xp.InitBlock&&0===n}(e))this.showNewsButton(!0);else if(this.viewInstance.direction()===l.Nm.Forward){if(this.viewInstance.articlesToTip()>11)return void this.showNewsButton(!1);if(this.viewInstance.articlesToTip()<=1)return void this.hideNewsButton()}else this.hideNewsButton()},e.prototype.hideNewsButton=function(){this.newsButtonIsVisible&&(I(this.newsButton),x(this.right),this.tip=!1,this.newsButtonIsVisible=!1)},e.prototype.hideMoreButton=function(){this.moreButtonIsVisible&&(I(this.moreButton),x(this.right),this.moreButtonIsVisible=!1)},e.prototype.showNewsButton=function(e){this.tip=e,this.newsButtonIsVisible||(P(this.right),C(this.newsButton),this.newsButtonIsVisible=!0)},e.prototype.showMoreButton=function(){this.moreButtonIsVisible||(P(this.right),C(this.moreButton),this.moreButtonIsVisible=!0)},e.prototype.onCurrentColumnChanged=e.prototype.canScrollLeft=function(){var e=(this.viewInstance.visibleColumns()||[])[0];return!!e&&!e.isFirst()},e.prototype.canScrollRight=function(){var e=this.viewInstance.visibleColumns()||[],t=e[e.length-1];return!!t&&!t.isLast()},e}()},47211:function(e,t,n){"use strict";n.d(t,{GM:function(){return i},OX:function(){return g},Qp:function(){return h},Rj:function(){return l},cF:function(){return u},hn:function(){return m},jI:function(){return d},n7:function(){return f},r0:function(){return p},sY:function(){return s},tN:function(){return c}});var i,r=n(22970),o=n(24458);!function(e){e.ActivePageChanged="[PagesView] ActivePageChanged",e.PageDoubleClicked="[PagesView] PageDoubleClicked",e.PageViewZoomChanging="[PagesView] PageViewZoomChanging",e.PageViewPinch="[PagesView] Pinch",e.PageViewPan="[PagesView] Pan",e.PageViewZoomChanged="[PagesView] PageViewZoomChanged",e.PageViewPagesLoaded="[PagesView] PageViewPagesLoaded",e.PageViewSizeChanged="[PagesView] PageViewSizeChanged",e.PageViewExternalLink="[PagesView] External Link",e.PageView="[PagesView] PageView"}(i||(i={}));var a=s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.ActivePageChanged,t}return(0,r.ZT)(t,e),t}(a),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.PageDoubleClicked,t}return(0,r.ZT)(t,e),t}(a),c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.PageViewZoomChanging,t}return(0,r.ZT)(t,e),t}(a),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.PageViewPinch,t}return(0,r.ZT)(t,e),t}(a),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.PageViewPan,t}return(0,r.ZT)(t,e),t}(a),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.PageViewPagesLoaded,t}return(0,r.ZT)(t,e),t}(a),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.PageViewZoomChanged,t}return(0,r.ZT)(t,e),t}(a),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.PageViewSizeChanged,t}return(0,r.ZT)(t,e),t}(a),m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type=i.PageViewExternalLink,t}return(0,r.ZT)(t,e),t}(a),g=function(e){eturn(0,r.ZT)(t,e),t}(a)},11144:93879:function(e,t,n){"use strict";n.d(t,{M:function(){return w},P:function(){return y}});var i,r=n(20384),o=n(40180),a=n(19237),s=n(11569),u=n(51947),c=n(84672),l=n(22970),d=n(46720),h=n(74981),p=n(32143),f=n(6677);!function(e){e[e.Uploading=1]="Uploading",e[e.Uploaded=2]="Uploaded"}(i||(i={}));var m,g=function(e){function t(t){var n=e.call(this,100)||this;if(n._history=[],!t)throw new Error("Cannot create HistoryUploader instance: invalid dataProvider.");return n._dataProvider=t,n}return(0,l.ZT)(t,e),t.prototype.upload=function(e,t){var n;void 0===t&&(t=!1),(0,o.isEmpty)(e)||((n=this._history).push.apply(n,(0,l.ev)([],(0,l.CR)(e),!1)),t?this._uploadBufferData():this._uploadBufferDataDebounced(),d.Z.global.trigger("uploadingArticlesHistory",[e]))},t.prototype._uploadBufferData=function(){var e=this;if(this._history.length){var t=this._history;if(this._history=[],t.length){var n=t.map((function(e){return e.historyStatus=i.Uploading,{Id:e.Id,Type:e.Type,Data:e.Data,Reason:e.historyReason}}));h.Z.post("TopNewsFeed","AddHistory",JSON.stringify(n),{contentType:"application/json"}).then((function(n){var r=n;if(r){var o=t.filter((function(t){if(t.tokenized())return!1;var n=t.provider();return!(!n||n!==e._dataProvider||(t.historyStatus=i.Uploaded,t.tokenized(!0),0))}));o.length&&e._dataProvider.appendBundle(o,r,r),e._uploadBufferData()}}),(function(e){f.Z.error(new Error("Can't upload history: ".concat(e,".")))}))}}},t}(p.S),v=n(81125),y=50;!function(e){e[e.Enable=0]="Enable",e[e.Disable=1]="Disable",e[e.Purge=2]="Purge"}(m||(m={}));var _=!0,b=new a.x,w=function(){function e(e,t,n){void 0===n&&(n=!1),this.viewName=e,this._reading=[],this._historyItemIds={},this._history=[],c.modal.on("set",this._onModalStateSet.bind(this)),c.modal.on("reset",this._onModalStateReset.bind(this)),this._onPurge.subscribe(this._purge.bind(this)),this._readingStatsUploader=new v._(e),this._enableHistory=n,n&&(this._historyUploader=new g(t))}return e.enable=function(){_||(_=!0,b.next(m.Enable))},e.disable=function(){_&&(_=!1,b.next(m.Disable))},Object.defineProperty(e.prototype,"_onEnabled",{get:function(){return b.pipe((0,s.h)((function(e){return e===m.Enable})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_onDisabled",{get:function(){return b.pipe((0,s.h)((function(e){return e===m.Disable})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_onPurge",{get:function(){return b.pipe((0,s.h)((function(e){return e===m.Purge})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_enabled",{get:function(){return _},enumerable:!1,configurable:!0}),e.prototype._upload=function(e){if(void 0===e&&(e=!1),this._enableHistory&&this._history.length&&(this._historyUploader.upload(this._history,e),this._history=[]),this._reading.length){var t=this._reading.some(()?this._reading:this._reading.filter((function(e){return e.totalTime>=y}));t.length&&this._readingStatsUploader.upload(t,e),this._reading=[]}},e.prototype._purge=e.prototype._onModalStateSet=function(){this._reading.length&&(0,o.last)(this._reading).pause()},e.prototype._onModalStateReset=function(){this._reading.length&&(0,o.last)(this._reading).resume()},e}();u.Ib.subscribe((),u.py.subscribe((function(){w.enable()})),r(window).on("unload",(function(){b.next(m.Purge)}))},62490:function(e,t,n){"use strict";var i=n(22970),r=n(40180),o=n(20384),a=n(10751),s=n(93879),u=n(88769),c=n(46720),l=n(32717),d=n(81125),h=n(66327),p=[u.c8.fling,u.c8.bounce,u.c8.mouseWheel,u.c8.keyPress,u.c8.alignmentCorrection],f=new d._,m=function(e){function t(t,n,i,o){void 0===o&&(o=!1);var a=e.call(this,n,i,o)||this;return a._lastScrollReason=-1,a._currentFrame=null,a._pushHistory=[],a._uploadPushHistoryDebounced=(0,r.debounce)(a._uploadPushHistory.bind(a),10),a._view=t,c.Z.bind(t,"invalidated",null,a._onReadingStarted.bind(a)),c.Z.bind(t,"beforeScroll",null,a._onBeforeScroll.bind(a)),c.Z.bind(t,"hide",null,a._onReadingStopped.bind(a)),a._onEnabled.subscribe(a._onReadingStarted.bind(a)),a._onDisabled.subscribe(a._onReadingStopped.bind(a)),a}return(0,i.ZT)(t,e),t.startSingleArticleReading=function(e){var t=new l.KB(l.Jd.Passive);if(t){var n=t.item(e);n.isExpanded=!0,n.visibilityRate=1}return t},t.stopSingleArticleReading=function(e){e&&(e.freeze(),e.totalTime>=s.P&&f.upload([e]))},t.prototype.pushToHistory=function(e,t){!this._enableHistory||e.tokenized()||e.Id in this._historyItemIds||(this._pushHistory.push(e),e.historyReason=t,this._historyItemIds[e.Id]=1,this._uploadPushHistoryDebounced())},t.prototype._purge=t.prototype._onReadingStarted=function(){this._enabled&&this._view.isUpdateable()&&(this._lastScrollReason||!this._currentFrame?this._setCurrentFrame(this._checkColumns(this._view.viewport(),new l.KB(l.Jd.Passive,this.viewName))):this._updateCurrentFrame(this._view.viewport()),this._lastScrollReason=0)},t.prototype._onReadingStopped=function(){this._reading.length&&(0,r.last)(this._reading).freeze(),this._upload()},t.prototype._onBeforeScroll=function(e,t){var n=t.delta,i=t.reason;if(this._enabled){var o=this._view.viewport(),a=o.left,s=o.right;n<0?s-=n:a-=n,i===u.c8.drag?this._processDrag({left:a,right:s},i):(0,r.includes)(p,i)&&this._processScrollAnimation({left:a,right:s}),this._lastScrollReason=i}},t.prototype._setCurrentFrame=function(e){this._currentFrame&&(this._currentFrame.freeze(),this._upload()),this._currentFrame=e,e&&this._reading.push(e)},t.prototype._updateCurrentFrame=function(e){this._currentFrame&&this._checkColumns(e,this._currentFrame.resetDataItems())},t.prototype._processDrag=function(e,t){this._lastScrollReason===t?this._updateCurrentFrame(e):this._setCurrentFrame(this._checkColumns(e,new l.KB(l.Jd.Active,this.viewName)))},t.prototype._processScrollAnimation=function(e){(0,r.includes)(p,this._lastScrollReason)?this._updateCurrentFrame(e):this._setCurrentFrame(this._checkColumns(e,new l.KB(l.Jd.Animation,this.viewName)))},t.prototype._checkColumns=function(e,t){var n=this;void 0===t&&(t=null);var i=this._view.columns();if(i.isEmpty())return null;var o=!1,s=0;return i.forEach((function(i){var u=i.intersectsWith(e),c=i.intersectsWith(e,!0),l={};if((0,r.chain)(i.layouts()).filter((function(e){return!!e})).map((function(e){return e.dataItem()})).forEach((function(e){if(t&&c)if(e.Type===a.g.article)l[e.Id]=t.item(e).addColumnStats(i);else if((0,r.isFunction)(e.takeReadingStats)){var o=e.takeReadingStats();o.dataItems.forEach((),o.actions.forEach((function(e){return t.action(e)}))}!n._enableHistory||e.tokenized()||e.Id in n._historyItemIds||(n._history.push(e),n._historyItemIds[e.Id]=1)})).commit(),t&&u&&(0,r.chain)(i.cells()).map(().filter(().forEach((function(e){var t=e.size,n=t.width,i=t.height,r=e.contentId,o=n*i;r in l&&(l[r].size+=o),s+=o})).commit(),!u&&o)return!1;switch(u&&(o=!0),i.type()){case h.Xp.ImagesHeadline:case h.Xp.SectionHeader:return n._checkHeadlinesColumns(i),!0;case h.Xp.AdBlock:return n._checkAdBlockColumns(i),!0}return!0})),t&&t.count?(t.size=s,t):null},t.prototype._checkHeadlinesColumns=function(e){var t,n=this;if(this._enableHistory){var a=(0,r.find)(e.cells().map((function(e){var t=null;return e.elm.find("article").each((function(e,n){return!(t=o(n).attr("aid"))})),t})),(function(e){return!!e})),s=this._view.controller.dataFeedManager().getArticleById(a);if(s&&!s.tokenized()&&!(s.Id in this._historyItemIds)){var u=s.group();if(u&&u.raw()&&4!==u.raw().GroupType){var c=u.articles();(t=this._history).push.apply(t,(0,i.ev)([],(0,i.CR)(c),!1)),(0,r.forEach)(c,()}}}},t.prototype._checkAdBlockColumns=function(e){if(this._enableHistory){var t=e.data();!t||t.tokenized()||t.getId()in this._historyItemIds||(this._history.push(t),this._historyItemIds[t.getId()]=1)}},t.prototype._uploadPushHistory=function(){this._enableHistory&&!(0,r.isEmpty)(this._pushHistory)&&(this._historyUploader.upload(this._pushHistory),this._pushHistory=[])},t}(s.M);t.Z=m},32717:function(e,t,n){"use strict";n.d(t,{KB:function(){return d},Jd:function(){return r},pK:function(){return o}});var i,r,o,a=n(24458),s=n(40180),u=n(22970),c=function(){function e(e){this.size=0,this.visibilityRate=0,this.isExpanded=!1,this._reading=null,this._stats=null,this._article=e}return Object.defineProperty(e.prototype,"article",{get:function(){return this._article},enumerable:!1,configurable:!0}),e.prototype.addColumnStats=function(e){var t=this,n=e.state();return n?(this.isExpanded=this.isExpanded||n.expanded,(n=n.rendering)&&(n=n[this._article.Id])&&(n=n.text)?(this._reading||(this._reading={}),(0,s.forIn)(n,(function(e,n){n in t._reading?t._reading[n].lines+=e.lines:t._reading[n]=(0,u.pi)({},e)})),this._stats=null,this):this):this},Object.defineProperty(e.prototype,"startPosition",{get:function(){var e=this.stats;return e?e.start:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endPosition",{get:enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stats",{get:function(){var e=this;if(!this._stats)if(this._reading){var t=!1,n=this._article.textLength(),i=0,r=0,o=0;(0,s.forEach)(this._article.Blocks,(function(a,s){var u="string"==typeof a?a:a.Text;if(s in e._reading){var c=e._reading[s];if(t||(r=(u.length*c.start/c.outof+i)/n,t=!0),c.lines+c.start<c.outof)return o=(u.length*(c.start+c.lines)/c.outof+i)/n,!1}else if(t)return o=i/n,!1;i+=u.length})),o||(o=1),this._stats={start:r,end:o}}else this._stats={start:0,end:0};return this._stats},enumerable:!1,configurable:!0}),e}();!function(e){e[e.Passive=1]="Passive",e[e.Active=2]="Active",e[e.Animation=3]="Animation"}(r||(r={})),function(e){e.TopNews="Topnews",e.Search="Search",e.Bookmarks="Bookmarks",e.Articles="Articles"}(o||(o={}));var l=((i={})[a.n3.TopNews]=o.TopNews,i[a.n3.FTSArticles]=o.Search,i[a.n3.Bookmarks]=o.Bookmarks,i),d=function(){function e(e,t){this.frameType=e,this._stopTime=null,this._pauseTime=null,this._inactiveTime=0,this._dataItems={},this._count=0,this._size=0,this._actions=[],this._startTime=new Date,this._view=l[t]||o.Articles}return e.prototype.freeze=function(){this._stopTime||(this._stopTime=new Date,this._pauseTime&&(this._inactiveTime+=(0,s.now)()-this._pauseTime.getTime()))},e.prototype.pause=function(){return this._pauseTime||(this._pauseTime=new Date),this},e.prototype.resume=function(){return this._pauseTime?(this._inactiveTime+=(0,s.now)()-this._pauseTime.getTime(),this._pauseTime=null,this):this},e.prototype.item=function(e){if(e.Id in this._dataItems)return this._dataItems[e.Id];var t=new c(e);return this._dataItems[e.Id]=t,++this._count,t},e.prototype.action=Object.defineProperty(e.prototype,"totalTime",{get:enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"inactiveTime",{get:function(){return this._inactiveTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"articles",{get:function(){return this._dataItems},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"actions",{get:function(){return this._actions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this._view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"startTime",{get:function(){return this._startTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"endTime",{get:function(){return this._stopTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return"text"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{set:function(e){this._size!==e&&(this._size=e,(0,s.forEach)(this._dataItems,(function(t){t.visibilityRate=e?t.size/e:0})))},enumerable:!1,configurable:!0}),e.prototype.resetDataItems=function(){return this._dataItems={},this._count=0,this._actions=[],this},e}()},32143:47830:81125:function(e,t,n){"use strict";n.d(t,{_:function(){return C}});var i=n(22970),r=n(40180),o=n(74981),a=n(77004),s=function(e){},u=n(32717),c=n(32143),l=n(63151),d=n(78173),h=n(67981),p=n(71043),f=n(65631),m=n(7169),g=n(32249),v=l.f.deviceInfo,y=l.f.osInfo,_=l.f.browserInfo,b=l.f.sessionInfo,w={device:(0,d.V)(v),os:(0,h.Z)(y),application:(0,p.J)(_),session:(0,f.p)(b)},C=function(e){function t(t){void 0===t&&(t=u.pK.Articles);var n=e.call(this)||this;return n._viewName=t,n}return(0,i.ZT)(t,e),t.prototype.upload=function(e,t){var n;if(void 0===t&&(t=!1),!(0,r.isEmpty)(e)){var o=this._processReadingStats(e);this._model?(n=this._model.frames).push.apply(n,(0,i.ev)([],(0,i.CR)(o),!1)):this._model=(0,i.pi)((0,i.pi)({},w),{pageView:{id:null,url:(0,m.x)((0,g.Jz)()),referer:null},userCurrentTime:null,userTimeOffset:null,view:this._viewName,frames:o}),this._model.frames.length>=0||t?this._uploadBufferData():this._uploadBufferDataDebounced()}},t.prototype._uploadBufferData=function(){if(this._model){if(a.online()){var e=new Date;this._model.userCurrentTime=e.toISOString(),this._model.userTimeOffset=e.getTimezoneOffset(),o.Z.post("ReadArticles","Add",JSON.stringify(this._model),{contentType:"application/json"})}else this._storeBufferData();this._model=null}},t.prototype._processReadingStats=function(e){var t=this;if((0,r.isEmpty)(e))return null;var n=(0,r.chain)(e).filter((function(e){return"text"===e.type})).map((function(e){return t._processTextFrame(e)})).value();return n.length?n:null},t.prototype._processTextFrame=function(e){var t={StartTime:e.startTime,Duration:e.totalTime,ReadingDuration:e.totalTime-e.inactiveTime,Actions:e.actions.slice(),Items:[],FrameType:e.frameType};return(0,r.forIn)(e.articles,(function(e){var n={Id:e.article.Id,Type:e.article.Type,VisibleAreaOffset:e.startPosition,VisibleAreaSize:e.endPosition-e.startPosition,VisibilityRate:e.visibilityRate,Expanded:e.isExpanded,ArticleLanguage:e.article.Language,SourceLanguage:e.article.OriginalLanguage,Enriches:e.article.Enriches};e.article.ArticleId&&(n.Id=e.article.ArticleId),t.Items.push(n)})),t},t.prototype._storeBufferData=t}(c.S)},40785:69015:98106:function(e,t,n){"use strict";var i;.d(t,{A:function(){return r},a:function(){return i}}),function(e){e.Ascending="asc",e.Descending="desc"}(i||(i={}))},92912:function(e,t,n){"use strict";n.d(t,{GG:function(){return o}});var i=n(61915);function r(e,t){var n=document.createElement("div");return n.className=e,void 0!==t&&(n.id=t),n}var o='<div class="spinner" role="progressbar">\n <div class="spinner-line line1"></div>\n <div class="spinner-line line2"></div>\n <div class="spinner-line line3"></div>\n <div class="spinner-line line4"></div>\n <div class="spinner-line line5"></div>\n <div class="spinner-line line6"></div>\n <div class="spinner-line line7"></div>\n <div class="spinner-line line8"></div>\n <div class="spinner-line line9"></div>\n <div class="spinner-line line10"></div>\n <div class="spinner-line line11"></div>\n</div>',a=function(){eturn Object.defineProperty(e.prototype,"isVisible",{get:function(){return this._visible},enumerable:!1,configurable:!0}),e.prototype.init=function(e){if(!e)throw new Error("Loading panel must be an HTMLElement");this._panel=e,e.childNodes&&0!==e.childNodes.length||function(e){var t=r("pr-spinner pr-spinner-l","Panel_loadingPanel_spinner");t.innerHTML=o;var n=r("ab-content overthrow");n.appendChild(t);var i=r("alert-body");i.appendChild(n);var a=r("alert alert-wait","Panel_loadingScreenLabel");a.appendChild(i),e.appendChild(a)}(e)},e.prototype.show=function(){if(null===this._panel||this._visible||(this._panel.style.display="block",this._visible=!0),arguments.length){var e=arguments[0];return null==e||e instanceof i.nI?e||this._lock.lock():void 0}},e.prototype.hide=function(e){if(arguments.length){if(!e)return;e instanceof i.nI&&e.release()}this._lock.isLocked||null!==this._panel&&this._visible&&(this._panel.style.display="none",this._visible=!1)},e}(),s=new a;s.init.bind(s),s.show.bind(s),s.hide.bind(s),t.ZP=s},51330:92150:9184:51417:33652:function(e,t,n){"use strict";n.d(t,{f:function(){return r},y:function(){return o}});var i=n(69389),r=i.require,o=i.define,a=window;a.require?(o=a.define,r=a.require):(a.define=o,a.require=r)},11780:function(e,t,n){"use strict";n.d(t,{f:function(){return s},y:function(){return a}});var i=n(22970),r={};function o(e){var t,n,o=[];try{for(var a=(0,i.XA)(e),s=a.next();!s.done;s=a.next()){var u=s.value;if(!r[u])throw new Error("Module '".concat(u,"' wasn't shimmed"));o.push(r[u])}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o}var a=s=,5577:function(e,t,n){"use strict";n.d(t,{p:function(){return d}});var i=n(22970),r=n(40180),o=n(12181),a=n(77004),s=n(1753),u=n(66353),c=n(17447),l={testChunks:!1,minFileSize:1,permanentErrors:[0,400,403,404,413,415,500,501],headers:{}},d=function(){function e(e,t,n){if(this.createFileUrl="",this.finalizeUrl="",this.storage="",this.serverUrl="",(0,u.hr)(e))throw new Error("serverUrl is empty");if((0,u.hr)(t))throw new Error("storage is empty");this.storage=t,this.serverUrl=(0,r.trimEnd)(e,"/"),this.options=(0,i.pi)((0,i.pi)({},l),n)}return e.prototype.upload=function(e){var t=this;return Promise.all([a.authorized(),c.ZP.loaded()]).then((function(e){var n=(0,i.CR)(e,1)[0];t.createFileUrl="".concat(t.serverUrl,"/create/").concat(t.storage),t.options.headers.Authorization="Bearer ".concat(n)})).then((function(){return t.createResumable({uploadInfo:{},onFileAdded:null==e?void 0:e.onFileAdded,onUploadStart:null==e?void 0:e.onUploadStart,onProgress:null==e?void 0:e.onProgress})})).then((function(e){return t.openDialog(e)})).then((function(e){return t.createFile(e)})).then((function(e){return t.startUploading(e)})).then((function(e){return t.finalizeUploading(e)}))},e.prototype.openDialog=function(e){var t=this;return new Promise((function(n){var i=t.createFileInput(t.options.allowedExtensions);i.addEventListener("input",(function(t){e.file=t.target.files[0],n(e)})),i.focus(),i.dispatchEvent(new MouseEvent("click"))}))},e.prototype.createFile=function(e){var t=this;return(0,s.Ko)({url:this.createFileUrl,data:{contentType:e.file.type},requestConfig:{contentType:"application/json"}}).then((function(n){return e.id=n.id,e.fileId="".concat(t.storage,"/").concat(n.id),e.resumable.opts.target="".concat(t.serverUrl,"/append/").concat(t.storage,"/").concat(n.id),t.finalizeUrl="".concat(t.serverUrl,"/finalize/").concat(t.storage,"/").concat(n.id),e}))},e.prototype.createResumable=function(e){var t=this;return new Promise((function(n,i){var a=new o(t.options);a.support||i(new Error("Resumable.js not supported")),(0,r.isFunction)(e.onFileAdded)&&a.on("fileAdded",(),(0,r.isFunction)(e.onUploadStart)&&a.on("uploadStart",(),(0,r.isFunction)(e.onProgress)&&a.on("progress",(function(){e.onProgress(Math.floor(100*a.progress()))})),e.uploadInfo.resumable=a,n(e.uploadInfo)}))},e.prototype.startUploading=function(e){return new Promise((function(t,n){var i=e.resumable;i.on("complete",(function(){t(e)})),i.on("fileError",(function(e,t){n(new Error(t))})),i.on("fileError",(),i.on("fileAdded",(function(){i.upload()})),i.addFile(e.file)}))},e.prototype.finalizeUploading=function(e){return(0,s.e8)({url:this.finalizeUrl})},e.prototype.createFileInput=function(e){var t=document.createElement("input");return t.setAttribute("type","file"),t.style.opacity="0",t.style.display="none",(0,u.hr)(e)&&t.setAttribute("accept",e),t},e}()},66996:function(e,t,n){"use strict";var i=n(4169),r=n(5577),o={maxFiles:1,maxFileSize:1e7,chunkSize:1e6,allowedExtensions:".jpeg,.jpg,.gif,.png",method:"octet",uploadMethod:"PUT"},a=function(){function e(e,t){void 0===t&&(t=o),this.storage=e,this.options=t,this.fileUpload=null}return e.prototype.upload=e.prototype.getFileUpload=function(){var e=this;return null===this.fileUpload?i.Z.getAsync("imageServer.upload.url").then((function(t){return e.fileUpload=new r.p(t,e.storage,e.options),e.fileUpload})):Promise.resolve(this.fileUpload)},e}();t.Z=a},30901:function(e,t,n){"use strict";n.d(t,{S:function(){return i}});var i=)},18525:67687:function(e,t,n){"use strict";n.d(t,{e:function(){return h}});var i=n(22970),r=n(20384),o=n(40180),a=n(25371),s=n(30724),u=n(84241),c=n(6677),l=n(79052),d=[],h=function(){function e(){var e=this;this._tasks=[],this._articleElms={},this._panel=d.length?d.pop():r("<div/>").css({position:"absolute",left:"-100000px",width:"1px",height:"1px",overflow:"hidden",visibility:"hidden"}).addClass("optimizeForTempCalculations"),this._elms=(0,u.Oh)(this._panel),this.getArticleElm=this._getArticleElm.bind(this),this.getSectionElm=function(){return e._elms.section()}}return e.prototype.mutate=function(e){return this._mutate(0,e)},e.prototype.measure=function(e){return this._measure(0,e)},e.prototype.execute=function(){var e,t,n,r,o,s,u=a.Z.current.textViewContainer.elm();try{for(var l=(0,i.XA)(this._tasks),d=l.next();!d.done;d=l.next()){var h=d.value,p=h.mutateTasks,f=h.measureTasks;if(p.length)try{for(var m=(n=void 0,(0,i.XA)(p)),g=m.next();!g.done;g=m.next()){var v=g.value;try{v()}catch(e){c.Z.error(e)}}}catch(e){n={error:e}}finally{try{g&&!g.done&&(r=m.return)&&r.call(m)}finally{if(n)throw n.error}}if(f.length){u.append(this._panel);try{for(var y=(o=void 0,(0,i.XA)(f)),_=y.next();!_.done;_=y.next()){v=_.value;try{v()}catch(e){c.Z.error(e)}}}catch(e){o={error:e}}finally{try{_&&!_.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}this._panel.detach()}}}catch(t){e={error:t}}finally{try{d&&!d.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}this.dispose()},e.prototype.executeAsync=function(){var e=this;return this._tasks.length?new Promise((function(t){var n,r,o,s=a.Z.current.textViewContainer.elm(),u=l.Y;try{for(var c=(0,i.XA)(e._tasks),d=c.next();!d.done;d=c.next()){var h=d.value,p=h.mutateTasks,f=h.measureTasks;p.length&&(u=u.mutate.apply(u,(0,i.ev)([],(0,i.CR)(p),!1))),f.length&&(u=(o=u.mutate(()).measure.apply(o,(0,i.ev)([],(0,i.CR)(f),!1)).mutate((function(){return e._panel.detach()})))}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}u.mutate(()})):Promise.resolve()},e.prototype.dispose=function(){(0,o.forIn)(this._articleElms,(function(e){e.remove()})),this._articleElms=null,this._elms=null,d.push(this._panel),this._tasks=null,this._panel=null},e.prototype._getArticleElm=function(e){if(void 0===e&&(e=0),e in this._articleElms)return this._articleElms[e];var t=this._articleElms[e]=this._elms.section().article().addClass("optimizeForTempCalculations").addClass("art");return e in s.gK?t.addClass(s.gK[e]):e<0&&t.addClass("art-stack"),t},e.prototype._getTasks=function(e){return this._tasks[e]||(this._tasks[e]={mutateTasks:[],measureTasks:[]}),this._tasks[e]},e.prototype._measure=function(e,t){var n=this;return this._getTasks(e).measureTasks.push(t),{mutate:},e.prototype._mutate=function(e,t){var n=this;return this._getTasks(e).mutateTasks.push(t),{measure:function(t){return n._measure(e,t)}}},e}()},69327:function(e,t,n){"use strict";n.d(t,{W:function(){return i},_:function(){return d}});var i,r,o=n(40180),a=n(19237),s=n(11569),u=n(22509),c=n(30724),l=n(25371);!i||(i={})),function(e){e[e.CellRemoved=0]="CellRemoved"}(r||(r={}));var d=function(){function e(){this._blocks=[],this._context=l.Z.current,this._eventsSubject=new a.x;var e=4===arguments.length?{elm:arguments[0],colspan:arguments[1],top:arguments[2],height:arguments[3]}:arguments[0],t=e.elm,n=e.colspan,r=e.top,o=e.height,s=e.nopadding,u=void 0!==s&&s,c=e.smartFlowItemId,d=void 0===c?null:c,h=e.type,p=void 0===h?i.Unknown:h,f=e.layout,m=void 0===f?null:f;this._elm=t.css({top:"".concat(r,"px"),left:"0px"}),this.colspan=n,this.top=r,this.height=o,this.nopadding=u,this.smartFlowItemId=d,this.type=p,this.layout=m}return e.prototype.remove=function(){this._elm&&(this._elm.remove(),this._elm=null,this._blocks=null,this._eventsSubject.next(r.CellRemoved),this._eventsSubject.complete())},e.prototype.onRemoved=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=this._eventsSubject.pipe((0,s.h)((function(e){return e===r.CellRemoved})),(0,u.U)((function(){return e})));if(!t.length)return i;if(1===t.length&&(0,o.isFunction)(t[0])){var a=i.subscribe((function(e){t[0](e),a.unsubscribe()}));return this}throw new Error("Invalid method call.")},e.prototype.visibleSize=function(e){var t=e.left,n=e.right,i=this._left+(this._context.textViewScroller&&this._context.textViewScroller.left||0),r=i+c.G4*this.colspan-c.ez;return i>=n||r<=t?null:(i<t&&(i=t),r>n&&(r=n),{width:r-i,height:this.height||0})},Object.defineProperty(e.prototype,"left",{get:function(){return this._left},set:function(e){this._left!==e&&(this._left=e,this._elm&&this._elm.css("left",e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"elm",{get:function(){return this._elm},enumerable:!1,configurable:!0}),e.prototype.addBlock=function(e){return this._blocks.indexOf(e)<0&&this._blocks.push(e),this},Object.defineProperty(e.prototype,"blocks",{get:function(){return this._blocks},enumerable:!1,configurable:!0}),e.prototype.show=function(){return this._elm&&this._elm.show(),this},e.prototype.hide=e}()},66327:function(e,t,n){"use strict";n.d(t,{d$:function(){return w},Xp:function(){return g},JD:function(){return C}});var i,r=n(22970),o=n(40180),a=n(19237),s=n(11569),u=n(22509),c=n(71151),l=n(25371),d=n(30724),h=n(69327),p=n(92741),f=n(20384);function(e){e[e.Default=0]="Default",e[e.Horizontal=1]="Horizontal"}(i||(i={}));var g,v,y,_=function(){eturn e.prototype.getDivider=function(e,t){if(void 0===e&&(e=i.Default),e===i.Horizontal){var n=m("art-div");return this._panel.append(n),t&&n.width((0,d.FK)(t)),n}if(this._dividers.length)return this._dividers.pop();var r=m("col-div");return this._panel.append(r),r},e.prototype.recycle=function(e){e.hasClass("col-div")&&this._dividers.push(e.css("left",-1e4))},e}();function b(e,t){return e.top-t.top}!g||(g={})),function(e){e[e.Disposed=1]="Disposed",e[e.Disposing=2]="Disposing"}(v||(v={}));var w=function(e){function t(t){var n=e.call(this)||this;return n._context=l.Z.current,n._cells=[],n._events=new a.x,n._left=-1e4,n._colspan=1,n._isVisible=!0,n._layouts=[],n._bundle=null,n._articleIdx=-1,n._columnIdx=-1,n._articleColumnsCount=1,n._articlesCount=1,n._section=null,n._type=g.Content,n._idx=-1,n._isFirst=!1,n._isLast=!1,n._state=null,n._noDividers=!1,n._noHeaderAbove=!1,n._anchors=null,t&&c.HC.linkItems(t,n),n._events=new a.x,n}return(0,r.ZT)(t,e),t.resize=t.prototype.left=function(e){return arguments.length?(this._left!==e&&(this._left=e,this._cells.filter((function(e){return!!e})).forEach((function(t){t.left=e+(t.nopadding?0:d.ap)})),this._divider&&this._divider.css("left",e)),this):this._left},t.prototype.move=t.prototype.isVisible=function(){var e=!1,t=this._left;(0,o.isNumber)(arguments[0])?t=arguments[0]:(0,o.isBoolean)(arguments[0])&&(e=arguments[0]),2===arguments.length&&(0,o.isBoolean)(arguments[1])&&(e=arguments[1]);var n=t+this._context.textViewScroller.left,i=n+(e?this.width():this.colspanWidth());return n>=y.left&&n<y.right||i>y.left&&i<=y.right||n<y.left&&i>y.right},t.prototype.width=function(e){return arguments.length?(this._width=e,this):this._width||d.G4},t.prototype.colspanWidth=function(){for(var e=this.width(),t=this._next,n=1;n<this._colspan;++n)t?(e+=t.width(),t=t._next):e+=d.G4;return e},t.prototype.intersectsWith=function(e,t){void 0===t&&(t=!1);var n=this._left+this._context.textViewScroller.left,i=n+(t?this.width():this.colspanWidth());return n>=e.left&&n<e.right||i>e.left&&i<=e.right||n<e.left&&i>e.right},t.prototype.addCell=function(e){this._cells.push(e),e.column=this,e.left=this._left,this._colspan=Math.max(this._colspan,e.colspan)},t.prototype.removeCell=function(e){for(var t=0;t<this._cells.length;++t)if(this._cells[t]===e){this._cells.splice(t,1),e.remove();break}return e},t.prototype.cell=function(e){return(0,o.find)(this._cells,(function(t){var n=t.top;return n<=e&&n+t.height>e}))},t.prototype.cells=function(){return this._cells},t.prototype.visibleCells=function(e){if(void 0===e&&(e=this._left),!this.isVisible(e)||!this._isVisible)return null;var t=e+this._context.textViewScroller.left;return this._cells.filter((function(e){var n=t+d.G4*e.colspan;return t<=y.right&&n>y.left}))},t.prototype.split=function(e){var t=[[],[]],n=null,i=null;this._cells.forEach((function(r){var o=r.top;o<=e?(t[0].push(r),o+r.height>e&&(i=r.smartFlowItemId,n=r.layout)):t[1].push(r)}));var r=null,o=null,a={cells:[],layout:n},s={};return t[0].forEach((function(e){var t=e.smartFlowItemId;t===i?a.cells.push(e):(r||(r={cells:[],layouts:[]}),r.cells.push(e),t in s||(s[t]=0,r.layouts.push(e.layout)))})),t[1].forEach((function(e){var t=e.smartFlowItemId;t===i?a.cells.push(e):(o||(o={cells:[],layouts:[]}),o.cells.push(e),t in s||(s[t]=0,o.layouts.push(e.layout)))})),r?(this._cells=r.cells,this._layouts=r.layouts):(this._cells=a.cells,this._layouts=[a.layout]),{above:r,below:o,clicked:a}},t.prototype.dispose=function(e){this._events.next(v.Disposing),this._cells&&this._cells.filter((function(e){return!!e})).forEach((function(e){e.remove()})),delete this._cells,delete this._layouts,delete this._bundle,this._divider&&(this._dividers().recycle(this._divider),delete this._divider);var t=this.detach(e);return this._events.next(v.Disposed),this._events.complete(),t},t.prototype.disposed=function(){var e=this;return new Promise((function(t){var n=e.onDisposed().subscribe((function(){t(e),n.unsubscribe()}))}))},t.prototype.onDisposed=function(e){var t=this,n=this._events.pipe((0,s.h)((function(e){return e===v.Disposed})),(0,u.U)((function(){return t})));if(!arguments.length)return n;var i=n.subscribe((function(){e(t),i.unsubscribe()}));return this},t.prototype.onDisposing=function(e){var t=this,n=this._events.pipe((0,s.h)((),(0,u.U)((function(){return t}))).subscribe(();return this},t.prototype.addDivider=function(e,t){if(e===h.W.Figure){var n=this._getCellsPositions(),r=0;if(!(0,o.isEmpty)(n)){var a=n[n.length-1];r=a.top+a.height}this.addCell(new h._(this._dividers().getDivider(i.Horizontal,t),t,r,(0,p.Jn)()))}else this._divider||(this._divider=this._dividers().getDivider());return this},t.prototype.hasDivider=function(){return!!this._divider},t.prototype.divider=function(){return this._divider},t.prototype.removeDivider=function(){return this._divider&&(this._dividers().recycle(this._divider),delete this._divider),this},t.prototype.height=function(){var e=this._getCellsPositions();if((0,o.isEmpty)(e))return 0;var t=e[e.length-1];return t.top+t.height},t.prototype.position=function(){var e=this._getCellsPositions();if((0,o.isEmpty)(e))return null;var t=e[e.length-1],n=e[0].top,i=t.top+t.height;return{top:n,bottom:i,height:i-n}},t.prototype.findAvailablePosition=function(e,t,n,i){var o,a,s=0,u=0;try{for(var c=(0,r.XA)(this._getCellsPositions(i)),l=c.next();!l.done;l=c.next()){var h=l.value,p=h.top-s;if(p>=e)return{top:s,height:p,margin:u};if(u=t,s=h.top+h.height,n){var f=(s+u)%d.Nv;f&&(u+=d.Nv-f)}s+=u}}catch(e){o={error:e}}finally{try{l&&!l.done&&(a=c.return)&&a.call(c)}finally{if(o)throw o.error}}var m=d.$0-s;return m<e?null:{top:s,height:m,margin:u}},t.prototype.articleIdx=function(e){return arguments.length?(this._articleIdx=e,this):this._articleIdx},t.prototype.columnIdx=function(e){return arguments.length?(this._columnIdx=e,this):this._columnIdx},t.prototype.articleColumnsCount=function(e){return arguments.length?(this._articleColumnsCount=e,this):this._articleColumnsCount},t.prototype.articlesCount=function(e){return arguments.length?(this._articlesCount=e,this):this._articlesCount},t.prototype.colspan=function(){return this._colspan},t.prototype.continuousColspan=function(){for(var e=this._colspan,t=1,n=this;e>t;)n=n._next,e=Math.max(e,t+++n._colspan);return e},t.prototype.addLayout=function(e){if(this._layouts){if(this._layouts.indexOf(e)>=0)return this;this._layouts.push(e)}else this._layouts=[e];return this},t.prototype.layouts=function(){return this._layouts},t.prototype.bundle=function(e){return arguments.length?(this._bundle=e,this):this._bundle},t.prototype.section=function(e){return arguments.length?(this._section=e,this):this._section},t.prototype.type=function(e){return arguments.length?(this._type=e,this):this._type},t.prototype.idx=function(e){return arguments.length?(this._idx=e,this):this._idx},t.prototype.isFirst=function(e){return arguments.length?(this._isFirst=e,this):this._isFirst},t.prototype.isLast=function(e){return arguments.length?(this._isLast=e,this):this._isLast},t.prototype.hasItem=function(e){return!(0,o.isEmpty)(this._layouts)&&(0,o.findIndex)(this._layouts,()>=0},t.prototype.data=function(){if((0,o.isEmpty)(this._layouts))return null;var e=this._layouts.filter(().map((function(e){return e.dataItem()}));return e.length?1===e.length?e[0]:e:null},t.prototype.state=t.prototype.show=function(){return this._isVisible||(this._cells.filter((function(e){return!!e})).forEach((function(e){return e.show()})),this._isVisible=!0),this},t.prototype.hide=function(){return this._isVisible?(this._cells.filter((function(e){return!!e})).forEach((function(e){return e.hide()})),this._isVisible=!1,this):this},t.prototype.noDividers=function(e){return arguments.length?(this._noDividers=e,this):this._noDividers},t.prototype.noHeaderAbove=function(e){return arguments.length?(this._noHeaderAbove=e,this):this._noHeaderAbove},t.prototype.anchors=t.prototype.nearestAnchorDelta=function(e,t){var n,i,o=this.width();if(e<0||e>o)return 0;if(!this._anchors)return t?t>0?e:e-o:e<=o-e?e:e-o;var a=0;try{for(var s=(0,r.XA)(this._anchors),u=s.next();!u.done;u=s.next()){var c=u.value,l=a;if(e<=(a=c))return t?t>0?e-l:e-a:e-l<=a-e?e-l:e-a}}catch(e){n={error:e}}finally{try{u&&!u.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return t?t<0?e-a:e-o:e-a<=o-e?e-a:e-o},t.prototype._dividers=function(){var e=this._context.textViewColumnsDividers;return e||(this._context.textViewColumnsDividers=e=new _(this._context.textViewScroller.elm)),e},t.prototype._getCellsPositions=function(e){var t=[];if(!(0,o.isEmpty)(e)){var n=e.map((function(e){return{top:e.top,height:e.height}}));t.push.apply(t,(0,r.ev)([],(0,r.CR)(n),!1))}for(var i=function(e,n){if(e._colspan<n)return"continue";var i=e._cells.filter(().map((function(e){return{top:e.top,height:e.height}}));t.push.apply(t,(0,r.ev)([],(0,r.CR)(i),!1))},a=this,s=1;a;a=a._prev,++s)i(a,s);return t.sort(b)},t}(c.HC),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.ZT)(t,e),t.concat=function(e,n){return e===t.empty&&n===t.empty||!e&&!n?t.empty:e?n?e.copy().append(n):e.copy():n.copy()},t.prototype.copy=t.prototype.dispose=function(e,t){if(arguments.length){if(2===arguments.length){var n=this.detach(e,t);return e.dispose(),n}}else{this.detach();for(var i=this._head;i;i=i.dispose(1));this.empty()}},t.prototype.disposed=function(){var e=[];return this.forEach((),Promise.all(e)},t.prototype.isVisible=function(){var e=!1;return this.forEach((),e},t.prototype.appendColumns=function(){if(1===arguments.length)return!(n=arguments[0])||n.isEmpty()?this:(this._checkDividers(this.tail(),n.head()),this.append(n));if(2===arguments.length&&arguments[0]instanceof w&&arguments[1]instanceof t){var e=arguments[0],n=arguments[1];return this._checkDividers(e,n.head()),this.append(e,n)}return this},t.prototype.prependColumns=function(){if(1===arguments.length)return!(n=arguments[0])||n.isEmpty()?this:(this._checkDividers(n.tail(),this.head()),this.prepend(n));if(2===arguments.length&&arguments[0]instanceof w&&arguments[1]instanceof t){var e=arguments[0],n=arguments[1];return this._checkDividers(n.tail(),e),this.prepend(e,n)}return this},t.prototype.getWidth=function(){var e=0;return this.forEach((),e},t.prototype._checkDividers=function(e,t){e&&t&&(e.noDividers()?t.removeDivider():t.noDividers()||t.addDivider())},t.empty=Object.freeze(new t),t}(c.xL)},76700:function(e,t,n){"use strict";var i,r,o;n.d(t,{Ku:function(){return i},NN:function(){return o},dl:function(){return r}}),i||(i={})),r||(r={})),function(e){e[e.Regular=0]="Regular",e[e.Basic=1]="Basic",e[e.RegularHeadlines=2]="RegularHeadlines",e[e.ImagesHeadlines=3]="ImagesHeadlines",e[e.Category=4]="Category",e[e.SocialCategory=5]="SocialCategory"}(o||(o={}))},79052:function(e,t,n){"use strict";n.d(t,{Y:function(){return u}});var i,r=n(22970),o=n(6677),a=function(){eturn e.create=e.prototype.mutate=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this._mutateTasks).push.apply(e,(0,r.ev)([],(0,r.CR)(t),!1)),this},e.prototype.measure=function(){for(var t,n=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return(t=this._measureTasks).push.apply(t,(0,r.ev)([],(0,r.CR)(i),!1)),{mutate:function(){for(var t,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return n._nextBatch||(n._nextBatch=new e),(t=n._nextBatch).mutate.apply(t,(0,r.ev)([],(0,r.CR)(i),!1))},measure:},e.prototype._scheduleExecution=e.prototype._execute=function(){var e,t,n,a;i=this._nextBatch;var s=this._mutateTasks;this._mutateTasks=null;var u=this._measureTasks;if(this._measureTasks=null,s.length)try{for(var c=(0,r.XA)(s),l=c.next();!l.done;l=c.next()){var d=l.value;try{d()}catch(e){o.Z.error(e)}}}catch(t){e={error:t}}finally{try{l&&!l.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(u.length)try{for(var h=(0,r.XA)(u),p=h.next();!p.done;p=h.next()){d=p.value;try{d()}catch(e){o.Z.error(e)}}}catch(e){n={error:e}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(n)throw n.error}}this._nextBatch&&(this._nextBatch._scheduleExecution(),this._nextBatch=null)},e}();function s(){return i||(i=a.create()),i}var u={mutate:function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=s()).mutate.apply(e,(0,r.ev)([],(0,r.CR)(t),!1))},mutateAsync:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Promise((function(t){var n;(n=s()).mutate.apply(n,(0,r.ev)((0,r.ev)([],(0,r.CR)(e),!1),[t],!1))}))},measure:function(){for(var e,t,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];try{for(var a=(0,r.XA)(n),s=a.next();!s.done;s=a.next()){var c=s.value;try{c()}catch(e){o.Z.error(e)}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return u}}},88241:function(e,t,n){"use strict";n.d(t,{O:function(){return p}});var i=n(40180),r=n(25371),o=(n(16412),400),a=!1,s=null,u=null,c=1,l=0,d=(0,i.debounce)((function(){u&&(s.maxScaleUrl?u.children("img").attr("src",s.maxScaleUrl):u.children("img").attr("src","".concat(s.url).concat(s.url.indexOf("?")>=0?"&":"?","scale=").concat(o)))}),100);function h(e,t,n){d(),n*c<1&&(c=1/n);var i=n*c*s.scale/o;u.css({translateLeft:e-s.x,translateTop:t-s.y,scaleX:i,scaleY:i})}var p={show:function(e){l=Date.now(),u&&u.remove(),c=1,s=e,function(){var e,t=r.Z.current.textViewContainer,n=Math.round((s.x-s.left)*o/s.scale),c=Math.round((s.y-s.top)*o/s.scale),h=s.x-n,p=s.y-c-t.elm().offset().top,f=Math.round(s.width*o/s.scale),m=Math.round(s.height*o/s.scale);u=t.elm().createChild("div").css((e={position:"absolute",left:"".concat(h,"px"),top:"".concat(p,"px"),width:"".concat(f,"px"),height:"".concat(m,"px"),transformOrigin:"".concat(n,"px ").concat(c,"px")},e["z-index"]=100,e)).optimizeForTransform().html('<img src="'.concat(s.src,'" style="width:').concat(f,"px;height:").concat(m,'px;" />')),s.elm.css("visibility","hidden");var g=l,v=new Image;v.onload=function(){a&&l===g&&d()},(0,i.defer)((function(){v.src=s.maxScaleUrl||"".concat(s.url).concat(s.url.indexOf("?")>=0?"&":"?","scale=").concat(o)}))}(),h(e.x,e.y,1),a=!0},update:function(e){if(a){var t=e.center();h(t.x,t.y,e.scale())}},hide:function(){s&&s.elm.css("visibility","visible"),u&&u.hide(),s=null,a=!1,d.cancel()},get isActive(){return a}}},30724:function(e,t,n){"use strict";n.d(t,{$0:function(){return C},$T:function(){return b},Bt:function(){return a},DO:function(){return P},Dc:function(){return L},FK:function(){return Z},FV:function(){return u},Fp:function(){return S},G4:function(){return I},Hy:function(){return E},JR:function(){return M},KW:function(){return k},Nv:function(){return x},Q8:function(){return T},Sd:function(){return c},Sn:function(){return g},YD:function(){return w},aW:function(){return l},ab:function(){return o},ap:function(){return f},bs:function(){return N},cX:function(){return h},dH:function(){return s},ez:function(){return m},gK:function(){return _},iQ:function(){return D},iV:function(){return y},it:function(){return A},mp:function(){return V},xC:function(){return d},xJ:function(){return R},xY:function(){return p},yp:function(){return v}});var i=n(29699),r='<div class="readmore-click-panel" style="width:100px;height:100px;position:fixed;bottom:-25px;right:-16px;text-indent:-998px;cursor:pointer;"></div>',o="a.readmore",a="dis",s='<a href="javascript:void(0)" class="readmore">Continue</a>'+r,u='<a href="javascript:void(0)" class="readmore dis">Continue</a>'+r,c=' <span class="lbl-continued">Continued</span> ',l="no-hghlt",d=300,h=Number.MAX_VALUE,p=3,f=16,m=f+f,g=!1,v=!1,y=!1,_=Object.freeze({0:"",1:"art-t2",2:"art-t3",3:"art-t4",4:"art-t5"});function b(e){_=e}var w=0,C=0,I=0,P=0,x=24,S=0,T=!0,k=!0,A=!0;function E(e){void 0===e&&(e={});var t=e.showIssueInfo,n=void 0!==t&&t,r=e.showContinuedFromLink,o=void 0!==r&&r,a=e.showPageThumbnail;g=n,v=o,y=void 0!==a&&a,T=i.Z.get("features.comments",!0),k=i.Z.get("ui.Bookmarks.enable",!0),A=i.Z.get("ui.Similar.enable",!0),i.Z.get("features.web.textview.tags.enabled",!1)}function Z(e){return void 0===e&&(e=1),I*e-m}function M(e){P=e.articlePreviewColumnsCount,C=e.columnHeight,I=e.columnWidth,x=e.lineHeight,w=e.visibleColumnsCount,S=Math.floor(C/x)}unction L(e){C=e}nction V(e){g=e.showIssueInfo,v=e.showContinuedFromLink,y=e.showPageThumbnail,_=e.articleStyles,w=e.visibleColumnsCount,C=e.columnHeight,I=e.columnWidth,P=e.articlePreviewColumnsCount,x=e.lineHeight,S=Math.floor(C/x),T=e.showComments,k=e.showBookmarks,A=e.enableSimilarArticles}},92741:function(e,t,n){"use strict";n.d(t,{Dp:function(){return m},JB:function(){return g},Jn:function(){return _},K9:function(){return w},T1:function(){return b},dH:function(){return P},ff:function(){return I},kv:function(){return C},lq:function(){return v},mp:function(){return y}});var i=n(20384),r=n(19237),o=n(70335),a=n(50429),s=n(83204),u=n(39752),c=[],l=[],d=new r.x,h="1234567890ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqurstuvwxyz",p=(0,u.Ys)(o.jP);function f(e){e=arguments.length?(0,a.Q)(e):p;var t=c[e-1];if(!t){var n=i('<section class="scale'.concat(e,'"><article class="art"><div id="etalonLine">').concat(h,"</div></article></section>"));i(document.body).append(n);var r=n.find("div#etalonLine");c[e-1]=t={lineHeight:parseFloat(window.getComputedStyle(r[0]).height),fontSize:parseInt(r.css("font-size"),10)},n.remove()}return t}function m(e){return(arguments.length?f(e):f()).lineHeight}function g(e){if(!arguments.length)return f().fontSize;if(e>s.mx||e<s.nB)return f(e).fontSize;var t=Math.floor(e);if(t===e)return f(e).fontSize;var n=f(t).fontSize;return n+(f(t+1).fontSize-n)*(e-t)}function v(){return g(s.mx)}unction _(){var e=l[p-1];if(!e){var t=i('<section class="scale'.concat(p,'"><div class="col"><div id="etalonArtDiv" class="art-div"></div></div></section>'));i(document.body).append(t),e=t.find("#etalonArtDiv").height(),e-=e%m(),l[p-1]=e,t.remove()}return e}function b(e){e=Math.round(e);for(var t=s.nB,n=s.nB+1;n<=s.mx;++n){var i=f(n).fontSize;if(i===e)return n;if(i>e)return t;t=n}return t}function w(e){if(!arguments.length)return p;var t=p!==(0,a.Q)(e);return(0,u.WI)((0,o.B9)({fontScale:e})),t}function C(){return p>4?{min:360,max:480}:{min:240,max:320}}function I(e){return d.subscribe(()}0,u.tC)(o.jP).subscribe((function(e){var t=p;p=e,d.next({oldScale:t,scale:e})}))},63666:function(e,t,n){"use strict";n.d(t,{Ze:function(){return c},ny:function(){return l},tG:function(){return i},tJ:function(){return u}});var i,r=n(40180),o=n(61915),a=n(36024);function s(e,t){return void 0===t&&(t=i.NoReason),e.lastAccessTime=Date.now(),e.locks||(e.locks={}),t in e.locks||(e.locks[t]=new o.HE),e.locks[t]}function u(e){if(e.locks)return!1;var t=!1;return(0,r.forIn)(e.locks,(function(e){if(e.isLocked)return t=!0,!1})),t}function c(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(3===arguments.length){var i=t[0],o=t[1];s(e,i).onUnlockedOnce((function(){return o()}))}else{if(2!==arguments.length)throw new Error("Invalid arguments list.");var u=t[0];if(!e.locks)return void u();var c=[];(0,r.forIn)(e.locks,(function(e){c.push(e.onUnlocked)})),(0,a.D)(c).subscribe((function(){return u()}))}}function l(e,t){return void 0===t&&(t=i.NoReason),s(e,t).lock()}!function(e){e[e.NoReason=0]="NoReason",e[e.Rendered=1]="Rendered",e[e.RenderedInSectonHeader=2]="RenderedInSectonHeader"}(i||(i={}))},37896:function(e,t,n){"use strict";n.d(t,{n:function(){return h}});var i=n(97334),r=n(25371),o=n(92741),a=(n(16412),n(20384)),s=null,u=1,c=!1,l=1;function d(e){var t=function(e){var t={scale:0,elmScale:0};t.elmScale=.5*(1+e*u)*(0,o.JB)()/(0,o.lq)();var n=(0,o.mp)()/(0,o.lq)();if(t.elmScale>1){var i=1*(0,o.lq)()/(0,o.JB)()/.5-1;u=i/e,t.elmScale=1}else if(t.elmScale<n){var r=n*(0,o.lq)()/(0,o.JB)()/.5-1;u=r/e,t.elmScale=n}return t.scale=(0,o.T1)((0,o.lq)()*t.elmScale),t}(e);l=t.scale,s.find("article").css({transformOrigin:"center top",scaleX:t.elmScale,scaleY:t.elmScale}),s.find("li.sel").removeClass("sel"),s.find("li.scale".concat(t.scale)).addClass("sel")}var h={update:d,show:function(e){var t=r.Z.current.textViewContainer;if(!c){c=!0,u=1,s=a(document.body).createChild("div").addClass("fontsizer scale7 ".concat(i.get("TextView.Fontset","fontset1"))).html(function(e){var t=[];t.push('<div class="fontsizer-in">'),t.push("<ul>");for(var n=1;n<=7;++n)t.push('<li class="scale'.concat(n,'">Aa</li>'));return t.push("</ul>"),t.push('<article class="art" style="-webkit-transform-style:preserve-3d"'),e?t.push("<p>".concat(e,"</p>")):t.push("<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>"),t.push("</article>"),t.push("</div>"),t.join("")}(e)).optimizeForTransform().css("opacity",0);var n=s.outerWidth(),o=s.outerHeight(),l=(t.elm().width()-n)/2,h=(t.elm().height()-o)/2+t.elm().offset().top;s.css({left:"".concat(l,"px"),top:"".concat(h,"px")}),s.css({transitionProperty:"opacity",transitionTimingFunction:"ease-out",transitionDuration:"300ms",opacity:1}),d(1)}},apply:hide:function(){s&&s.remove(),s=null,c=!1},get isActive(){return c}}},82627:20809:function(e,t,n){"use strict";n.d(t,{E:function(){return o}});var i=n(60683),r=n(57136),o=function(){function e(e){this.enAccountNumber=e.enAccountNumber,this.nickname=e.nickname,this.profileName=e.profileName,this.userLocation=e.userLocation,this.avatarImageId=e.avatarImageId,this.photoUrl=e.photoUrl,this.avatar=(0,i.b_)({nickname:this.nickname,imageId:e.avatarImageId,size:i.wC.huge,fallbackAvatarUrl:e.photoUrl})}return e.prototype.goToProfile=function(){return r.I.goToProfile(this.profileName)},e}()},60915:function(e,t,n){"use strict";var i=n(24458),r=n(95766),o=n(78600),a=n(2099);r.U.ofType(o.GM.ActiveViewChanged).subscribe((function(e){var t=e.payload.viewName;t!==i.n3.TextView?r.U.send(new o.BW({viewName:t})):r.U.send(new o.d1({viewName:t,cid:a.Z.cid(),issueDate:a.Z.issueDate()}))}))},78600:function(e,t,n){"use strict";var i;n.d(t,{BW:function(){return a},GM:function(){return i},d1:function(){return o},vv:function(){return r}}),function(e){e.ActiveViewChanged="[Viewer] ActiveViewChanged",e.IssueViewChanged="[Viewer] IssueViewChanged",e.CommonViewChanged="[Viewer] CommonViewChanged"}(i||(i={}));var r=function(e){this.payload=e,this.type=i.ActiveViewChanged},o=function(e){this.payload=e,this.type=i.IssueViewChanged},a=function(e){this.payload=e,this.type=i.CommonViewChanged}},61612:function(e,t,n){"use strict";n.d(t,{i:function(){return s}});var i,r=n(22970),o=n(24458),a=((i={})[o.n3.TopNews]="topnews",i[o.n3.PagesView]="pages",i[o.n3.TextView]="text",i[o.n3.FTSArticles]="search",i[o.n3.Bookmarks]="bookmarks",i[o.n3.Bookmark]="bookmark",i[o.n3.ManageBookmarks]="managebookmarks",i[o.n3.EmailAlerts]="emailalerts",i[o.n3.Votes]="votes",i[o.n3.Home]="home",i[o.n3.Radio]="radio",i[o.n3.Monitors]="monitors",i[o.n3.Profile]="profile",i[o.n3.Similar]="similar",i[o.n3.EmptyView]="empty",i[o.n3.Categories]="categories",i[o.n3.External]="external",i[o.n3.Opinion]="opinion",i[o.n3.Post]="post",i[o.n3.StoreHub]="catalog",i[o.n3.Error]="error",i[o.n3.Account]="accounting/account",i[o.n3.Purchase]="purchaseview",i[o.n3.Receipt]="receipt",i[o.n3.Article]="article",i[o.n3.Onboarding]="onboarding",i[o.n3.IssueDetails]="issuedetails",i[o.n3.LatestIssues]="latestissues",i),s=(0,r.pi)((0,r.pi)({},a),{toUrlViewName:fromUrlViewName:function(e){for(var t in e=(e||"").toLowerCase(),a)if(a.hasOwnProperty(t)&&a[t]===e)return t;return o.n3.Error}})},79647:function(e,t,n){"use strict";var i=n(74981),r=n(1753);t.Z={signin:function(e,t){return i.Z.post("auth","Signin",{userName:e,password:t})},signinByKey:function(e){return i.Z.post("auth","SigninByKey",{key:e})},siteSignin:function(e,t){var n={token:e,enableAutologin:t};return(0,r.Ko)({url:"".concat(window.basePath,"Authentication/SignIn"),data:n,requestConfig:{contentType:"application/json"}})},signOut:function(){return i.Z.get("auth","SignOut")},siteSignOut:function(){return(0,r.Ko)({url:"".concat(window.basePath,"Authentication/SignOut"),data:null,requestConfig:{contentType:"application/json"}}).then((function(e){return e&&e.RedirectLocation&&(window.location=e.RedirectLocation),e}))},getExternalRequestKey:function(){return i.Z.get("ExternalAuth","GetRequestKey")},getSott:recoverPassword:function(e){return i.Z.post("auth","RecoverPassword",{logonName:e})},register:function(e){return i.Z.post("auth","Register",e,{disableRetry:!0})},authorizeExternal:function(e){return i.Z.post("externalauth","AuthorizeExtAuth",JSON.stringify(e),{contentType:"application/json"})}}},12159:function(e,t,n){"use strict";var i,r=n(20384),o=n(40180),a=n(60231),s=n(98744),u=n(8270),c=n(94777),l=n(17447),d=n(4169),h=n(91574),p=n(2099),f=n(18518),m=n(39188),g=n(95766),v=n(31916),y=n(83466),_=n(43389),b=h.Z.signin={parentDialog:null,show:null,hide:null,onShow:null,onHide:null,resize:null,states:null},w={},C=[],I="onNavigationRequested",P=new c.Z({expire:9e5});function x(e,t){this.header=l.ZP.val("Dialogs.Signin.PasswordRecovery"),this.state="passwordRecovery",this.emailAddress=a.observable("").extend({required:l.ZP.val("Dialogs.Signin.EmailRequired","Valid email address is required"),email:l.ZP.val("Dialogs.Signin.EmailRequired","Valid email address is required"),trackDirtyState:!0}),this.emailAddressId="PasswordRecoveryEmailAddress",this.recoverPassword=function(){s.Z.validate(this)?t.recoverPassword({logonName:this.emailAddress()}):i.resize()},this.onActivated=function(e){s.Z.resetValidationState(this);var t=e&&e.forgotPasswordEmailAddress;if(t){var n="function"==typeof t?t():t;n&&this.emailAddress(n)}i.focus(this.emailAddressId)}}function S(e,t){var n=e&&e.emailAddress||P.get("emailAddress")||"",r=P.get("password")||"",o=e&&e.firstName||P.get("firstName")||"",u=P.get("lastName")||"",c=this.header=l.ZP.val("Dialogs.Signin.Registration"),this.state="signUp",this.emailAddress=a.observable(n).extend({required:l.ZP.val("Dialogs.Validators.Required"),email:!0}),this.emailAddressId="SignUpEmailAddress",this.enablePromotional=a.observable(!1),this.enableService=a.observable(!1);var d=parseInt(l.ZP.val("v7.Client.Signin.Validators.Password.Minlength"),10),h=l.ZP.val("Dialogs.Validators.Required");this.password=a.observable(r).extend({required:h,minLength:{val:d,message:l.ZP.format("v7.Client.Signin.Validators.Password.Minlength.Message",d)}}),this.firstName=a.observable(o).extend({required:h}),this.lastName=a.observable(u).extend({required:h}),this.signUp=function(){s.Z.validate(this)&&(g.U.send(new v.gr({alertKey:v.UQ.EmailAlertPromotional,value:this.enablePromotional(),isDefault:!0})),g.U.send(new v.gr({alertKey:v.UQ.EmailAlertTechnical,value:this.enableService(),isDefault:!0})),t.signUp({emailAddress:this.emailAddress(),password:this.password(),firstName:this.firstName(),lastName:this.lastName(),enablePromotional:this.enablePromotional(),enableService:this.enableService()}),P.clear())},this.onActivated=function(){this.password(""),s.Z.resetValidationState(this),i.focus(this.emailAddressId),g.U.send(new v.hi({system:y.a.Application})),this.emailAddress.subscribe(i.resize.bind(i)),this.password.subscribe(i.resize.bind(i)),this.firstName.subscribe(i.resize.bind(i)),this.lastName.subscribe(i.resize.bind(i))},this.emailAddress.subscribe(c("emailAddress")),this.password.subscribe(c("password")),this.firstName.subscribe(c("firstName")),this.lastName.subscribe(c("lastName"))}function T(e,t){var n=d.Z.get("ui.SocialSignIn.SocialNetworks");function c(e){this.provider=e.provider,this.css=e.css,this.name=e.name,this.networkName=l.ZP.val(e.resourceName)}this.socialNetworks=o.map(n,(function(e){return new c(e)}));var h=d.Z.get("Registration.RegistrationEnabled",!1),p=d.Z.get("Registration.TrialRegistrationEnabled",!1),f=d.Z.get("Registration.TrialRegistrationForAllEnabled",!1);this.header=r.nd.res.val("Dialogs.Signin.Header"),this.state="signIn",this.templateName=(0,m.Wz)(),this.externalSystems=(0,m.Bu)(),this.emailAddress=a.observable(),this.emailAddressId="SignInEmailAddress",this.password=a.observable(),this.enableAutologin=a.observable(!0),this.signInErrorMessage=a.observable(""),this.showPassword=a.observable(!1),this.forgotPasswordEmailAddress=a.computed((function(){return this.emailAddress()}),this),this.signInExternal=o.debounce((function(e){t.signInExternal({system:e,enableAutologin:this.enableAutologin()})}),300,{leading:!1,trailing:!0}),this.showRegistration=a.computed((function(){return h})),this.socialNetworkSignInAllowed=a.computed((function(){return(0,m.b1)()})),this.signUpText=a.computed((function(){var e="";return f?e=r.nd.res.val("Dialogs.Signin.NewUserTrialRegistration"):p?e=u.get("isTrialUsed",!1)?r.nd.res.val("Dialogs.Signin.NewUser"):r.nd.res.val("Dialogs.Signin.NewUserTrialRegistration"):h&&(e=r.nd.res.val("Dialogs.Signin.NewUser")),e}),this),this.signIn=function(){r(".pop-body-signin:visible :input").change(),r(".pop-body-signin").height("100%"),this.emailAddress()&&this.password()&&(this.signInErrorMessage(""),t.signIn({userName:this.emailAddress(),password:this.password(),enableAutologin:this.enableAutologin()}))},this.onActivated=function(){i.focus(this.emailAddressId),this.password(""),s.Z.resetValidationState(this),g.U.send(new v.aq({system:y.a.Application}))},this.showSocialNetwork=a.computed((function(){return this.socialNetworkSignInAllowed()&&this.externalSystems.length>0}),this),this.toggleShowPassword=function(){this.showPassword(!this.showPassword())}}function k(){this.header=r.nd.res.val("Dialogs.Signin.OpenId"),this.state="signInOpenId",this.openId=a.observable(""),this.signIn=function(){r(b).trigger("signInOpenId",{openId:this.openId()})}}function A(e){this.provider=e,this.className=this.provider,this.text=r.nd.res.val("ExternalAuthentication."+this.provider),this.view="openid"===this.provider?"signInOpenId":"",this.action=function(){this.view?r(this).trigger(I,{viewKey:this.view}):r(b).trigger("signInExternal",{provider:this.provider})}}function E(){this.header=r.nd.res.val("Dialogs.Signin.SocialNetwors"),this.state="signInSocialNetworks";var e=d.Z.get("ui.SignIn.SocialNetworks"),t=[],n=this;if(e){for(var i=0;i<e.length;i++){var o=new A(e[i]);r(o).bind(I,this.onNavigationRequested),t.push(o)}this.signInExternal=this.array=t,this.onNavigationRequested=}function Z(e,t){var n=this,o=e&&e.initialState;function s(e,i){var o=i.key,a=new(0,i.Ctor)(e&&e[o],t);if(r(a).bind(I,n.onNavigationRequested),n[o]=a,n.stateMap||(n.stateMap={}),n.stateMap[a.state])throw new Error("Model "+a.state+" has already been registered.");n.stateMap[a.state]=a}for(var u=0,c=C.length;u<c;u++)s(e,C[u]);this.externalRequestKey=e&&e.externalRequestKey,this.disablePasswordPlaceholder=r.browser.msie&&parseInt(r.browser.version)<10,this.supportsPlaceholder=_.v.input.placeholder,this.currentState=a.observable(this.signIn.state),this.prevState=a.observable(),this.isRTL=a.observable(p.Z.contentIsRtl()),this.setState=function(e){var t=this.currentView();this.prevState(this.currentState()),this.currentState(e);var n=this.currentView();i.resize(),n.onActivated&&n.onActivated.call(n,t)},this.currentView=a.computed((,this),this.routeTo=this.routeFn=this.onNavigationRequested=this.enablePasswordRecovery=a.observable(d.Z.get("ui.SignIn.enablePasswordRecovery",!0)),this.recoverPassword=function(){var e=d.Z.get("Authentication.ExternalForgotPasswordPage");d.Z.get("Authentication.EnablePublisherAuthenticationWebService")&&e?(n.close(),location.assign(e)):n.routeTo("passwordRecovery")},this.goSignUp=function(){var e=d.Z.get("Authentication.ExternalRegistrationPage");e&&d.Z.get("Authentication.EnablePublisherAuthenticationWebService")?(n.close(),window.location.href=e):window.location.href="accounting/signup"},this.close=function(){b.hide(f.Y.Cancel),i.parentDialog&&i.parentDialog.restore({listView:!0})},this.back=function(){var e=this.prevState();e?this.setState(e):this.onHistoryEmptied&&this.onHistoryEmptied()},this.initialState=o||this.signIn.state}!function(){function e(e,t){C.push({key:e,Ctor:t}),w[e]=e}e("passwordRecovery",x),e("signUp",S),e("signIn",T),e("signInOpenId",k),e("signInSocialNetworks",E),b.resize=function(){i.resize()},b.show=function(e,t){var n=e&&e.parentDialog,o=function(e,t){return new Z(e,t)}(e,t);!function(e,t){(i=t?h.Z.createInstance(t):h.Z.getInstance()).visible&&(b.parentDialog=i,(i=h.Z.createInstance()).parentDialog=b.parentDialog,e.onHistoryEmptied=function(){i.hide(),i.parentDialog.restore()},b.parentDialog.suspend()),i.onHide((),i.onShow(();var n={templateName:e.currentView().templateName,model:e};i.show(n),e.setState(e.initialState)}(o,n)},b.hide=function(e){i&&i.hide(e)},b.onHide=function(e){r(b).one("onhide",e)},b.onShow=function(e){r(b).one("onshow",e)},b.states=w,b.setSignInError=function(e){i&&(i.config.model.signIn.signInErrorMessage(e),i.resize())}}(),t.Z=b},41723:function(e,t,n){"use strict";var i=n(22970),r=n(40180),o=n(91574),a=n(18518),s=n(17447),u=n(8871),c=n(48921),l=n(88477),d=n(70263),h=n(24995),p=n(26199),f=n(28873),m=n(27670),g=n(60231),v=n(88769),y=n(24458),_=n(4169);function b(e){var t=e.collection,n=e.isSelected,i=void 0!==n&&n,r=Object.create(t);return r.isSelected=i,r.selected=g.observable(i),r}function w(e){return(0,r.chain)(e).filter((function(e){return e.selected()})).map((function(e){return e.id})).value()}function C(e){var t=e.bookmark;if(!t||!t.pageSet)return Promise.resolve();var n=t.pageSet.id;return(0,h.n5)(n)}function I(e){return e&&e.bookmark||!e.article?Promise.resolve():(0,d.getArticleCollections)(e.article.ArticleId,v.qt.article).then((function(t){t&&!(0,r.isEmpty)(t.collections)&&(t.articleId=e.article.ArticleId,e.bookmark=t)}))}t.Z={show:function(e){var t=void 0===e?{}:e,n=t.parent,P=t.bookmarkContext;return new Promise((function(e,t){Promise.all([s.ZP.loaded(),u.default.load(),(0,c.IG)(),C(P),I(P)]).then((function(C){var I=(0,i.CR)(C,4),x=I[2],S=I[3],T=o.Z.createInstance(n),k=function(e){var t,n=e.dialog,i=e.bookmarkContext,o=e.collections,C=e.pageSet,I=i&&i.bookmark,P=i&&i.article,x=!!I,S=u.default.enAccountNumber,T={collections:g.observableArray((0,r.map)(o,(function(e){var t=!1,n=I&&I.collections;return(0,r.isEmpty)(n)||(t=(0,r.some)(n,(function(t){return t.id===e.id}))),b({collection:e,isSelected:t})}))),rightButton:(t={canBeDeleted:g.observable(!1),isWaiting:g.observable(!1),isDisabled:g.observable(!0)},t.text=g.pureComputed((function(){return t.canBeDeleted()?s.ZP.val("MyBookmarks.Commands.Delete","Delete"):s.ZP.val("Buttons.Save","Save")})),t.css=g.pureComputed((function(){var e=t.canBeDeleted()?"b-delete":"b-action";return t.isWaiting()&&(e="".concat(e," is-waiting")),t.isDisabled()&&(e="".concat(e," is-disabled")),e})),t),dialogTitle:x?s.ZP.val("Dialogs.EditBookmark.Header","Edit Bookmark"):s.ZP.val("v7.Client.Dialogs.NewBookmark.Title","New Bookmark"),postToChannelText:x?s.ZP.val("v7.Client.Dialogs.MyChannel","My Channel"):s.ZP.val("v7.Client.Dialogs.PostToMyChannel","Post to My Channel"),showMyChannel:_.Z.get("pagesView.enableUserInfo",!1),editMode:x,pagesSelector:C&&C.enOwnerId===S?{pageSetId:C.id,issue:C.issue,page:C.pages[0],selectedPages:g.observableArray(C.pages),options:{showMeta:!0,afterRender:function(){return n.resize()}}}:null,shouldSaveToChannel:g.observable(!!I&&(0,r.some)(I.collections,(function(e){return e.id===c.ZT}))),rightButtonClick:function(e){var t=t(!0);var r=w(e.collections())||[];e.shouldSaveToChannel()&&r.push(c.ZT);var o,s,u=Promise.resolve();x&&e.rightButton.canBeDeleted()?(I.articleId?s={contentId:I.articleId,contentType:v.qt.article,articleId:P.Id}:I.pageSet&&(s={contentId:I.pageSet.id,contentType:v.qt.pageSet}),u=(0,p.uC)(s).then((function(){n.hide(a.Y.Ok,{data:{BookmarkId:!1,Collections:null}});var e=m.Z.getActiveView(),t=m.Z.getActiveViewName();e&&e.reset&&t===y.n3.Bookmarks&&e.reset()}))):x?(o={collections:r},I.articleId?(o.contentId=I.articleId,o.contentType=v.qt.article):I.pageSet&&(o.contentId=I.pageSet.id,o.contentType=v.qt.pageSet),u=Promise.all([e.pagesSelector?(0,h.LU)(e.pagesSelector.pageSetId,e.pagesSelector.selectedPages()):Promise.resolve(),(0,d.upsertContentCollections)(o)]).then((function(){var e;n.hide(a.Y.Ok,{data:{BookmarkId:(null===(e=i.article)||void 0===e?void 0:e.BookmarkId)||"bookmarked",Collections:r}})}))):u=(0,p.Rl)({context:i,collections:r}).then((function(){var e;n.hide(a.Y.Ok,{data:{BookmarkId:(null===(e=i.article)||void 0===e?void 0:e.BookmarkId)||"bookmarked",Collections:r}})})),u.catch(l.logAndAlertError).finally((function(){return t(!1)}))},cancel:function(){n.hide(a.Y.Cancel)},selectCollection:function(e){var t=e.selected();e.selected(!t)},toggePostToChannelFlag:function(e){var t=e.shouldSaveToChannel();e.shouldSaveToChannel(!t)},createCollection:function(e){f.Z.show({parent:n}).then((function(t){t.status===a.Y.Ok&&e.collections.unshift(b({collection:t.collection,isSelected:!0}))}))}};T.userCollections=g.pureComputed((function(){return(0,r.filter)(T.collections(),(function(e){return e.type===c.V5.user}))})),T.sharedCollections=g.pureComputed((function(){return(0,r.filter)(T.collections(),()})),T.showSharedCollections=g.pureComputed((function(){return!(0,r.isEmpty)(T.sharedCollections())}));var k=function(){return{selectedCollections:w(T.collections()),shouldSaveToChannel:T.shouldSaveToChannel(),selectedPages:T.pagesSelector&&T.pagesSelector.selectedPages.slice()||[]}},A=k();return g.computed((function(){var e=k(),t=0!==(0,r.xor)(e.selectedCollections,A.selectedCollections).length,n=0!==(0,r.xor)(e.selectedPages,A.selectedPages).length,i=T.showMyChannel&&A.shouldSaveToChannel!==e.shouldSaveToChannel,o=t||n||i;T.rightButton.isDisabled(!o);var a=(0,r.every)(T.collections(),(function(e){return!e.selected()}))&&(!T.showMyChannel||!e.shouldSaveToChannel)&&x;T.rightButton.canBeDeleted(a),a&&T.rightButton.isDisabled(!1)})),x||T.shouldSaveToChannel(T.showMyChannel),T}({dialog:T,bookmarkContext:P,collections:x,pageSet:S}),A={templateName:"v7.Client.Dialogs.EditBookmark",model:k,name:"EditBookmarkDialog"};T.onHide((function(n,i){i.status===a.Y.Ok?(P.article&&(P.article.BookmarkId=i.data.BookmarkId,P.article.Collections=i.data.Collections),e(i.data)):t(i.data)})),T.onRestore((function(){return T.resize()})),T.show(A)}))}))}}},96389:function(e,t,n){"use strict";n.d(t,{AR:function(){return h},FH:function(){return u},IP:function(){return g},Rd:function(){return c},Vb:function(){return f},Vr:function(){return s},b:function(){return a},e0:function(){return p},jk:function(){return d},n3:function(){return l},ox:function(){return m},sd:function(){return o}});var i=n(73309),r=new(n(21511).Z)(new i.Z("catalogs")),o=function(){return r.getMetadata()},a=function(e){return r.getPublication(e)},s=function(e){return r.getCategoryPublications(e)},u=function(e){return r.getPublications(e)},c=function(e){return r.findPublications(e)},l=function(e){return r.getCategory(e)},d=function(e){return r.getCatalogs(e)},h=function(e,t,n){return r.getNavigationGroups(e,t,n)},p=function(e,t){return r.resolveNavigationPath(e,t)},f=function(){return Promise.resolve([])},m=function(){return Promise.resolve([])},g=function(){return r.getLocales()}},73309:function(e,t,n){"use strict";var i=n(74981),r=n(40180),o=n(66353);function a(e,t,n){!0===n?e[t]="1":!1===n&&(e[t]="0")}function s(e){var t={};return(0,o.hr)(e.mainCid)||(t.main=e.mainCid),(0,o.hr)(e.text)||(t.q=e.text),(0,r.isArray)(e.cids)&&(t.cid=e.cids.join(",")),(0,r.isArray)(e.hasCategories)&&(t.has=e.hasCategories.join(",")),(0,r.isArray)(e.inCategories)&&(t.in=e.inCategories.join(",")),a(t,"supplement",e.isSupplement),a(t,"free",e.isFree),t}var u=function(){function e(e){if(!e)throw new Error("basePath parameter required");this._basePath=e}return e.prototype.getMetadata=function(){return i.Z.get(this._basePath,"metadata")},e.prototype.getPublication=function(e){return i.Z.get(this._basePath,"publications/".concat(e))},e.prototype.getIssue=e.prototype.getCategoryPublications=function(e){return i.Z.get(this._basePath,"categorypublications/".concat(e))},e.prototype.findPublications=function(e){var t={offset:e.offset,limit:e.limit||100};return e.orderBy&&(t.orderBy="".concat(e.orderBy.name," ").concat(e.orderBy.order)),(0,r.isObject)(e.filters)&&(0,r.extend)(t,s(e.filters)),i.Z.get(this._basePath,"publications",t)},e.prototype.getCategoryGroup=e.prototype.getNavigationGroups=function(e,t,n){if(!(0,r.isArray)(e))throw new TypeError('"rootGroupNames" parameter required and has to be array of strings');var a={root:e};if(t)if((0,r.isArray)(t))a.path=t;else{if((0,o.hr)(t))throw new TypeError('"path" parameter has to be array of integers or not an empty string');a.pathUri=t}return(0,r.isObject)(n)&&(0,r.extend)(a,s(n)),i.Z.get(this._basePath,"navigationgroups",a)},e.prototype.resolveNavigationPath=e.prototype.getLocales=e.prototype.getCategory=function(e){if((0,o.hr)(e))throw new Error("name required");return i.Z.get(this._basePath,"category",{name:e})},e.prototype.getCatalogs=e}();t.Z=u},21511:function(e,t,n){"use strict";var i,r=n(6677),o=n(17447),a=n(40180),s=n(51828),u=n(53169);function c(e){return r.Z.error(e),Promise.reject(e)}function l(){return void 0!==i?Promise.resolve():o.ZP.loaded().then(()}var d=function(){function e(e){this._provider=e,this._localesCache=null,this._latestMetadata=null,this._publicationCache={},this._groupCache={},this._pathResolutionCache={},this._pendingRequests={},this._checkUpdates()}return e.prototype._deduplicateRequest=e.prototype._normalizeCategory=e.prototype._normalizeCategoryGroup=e.prototype._normalizeIssue=function(e){return null===e?null:Object.freeze((0,a.extend)({},e,{issueDate:(0,s.x)(e.issueDate),firstPage:Object.freeze(e.firstPage)}))},e.prototype._normalizePublication=e.prototype._cachePublication=e.prototype._cachePublications=e.prototype._getCachedPublications=e.prototype._getMetadata=e.prototype.getMetadata=function(){return null!==this._latestMetadata?Promise.resolve(this._latestMetadata):this._getMetadata()},e.prototype.getPublication=e.prototype.getCategoryPublications=function(e){var t=this;return this._provider.getCategoryPublications(e).then((function(e){return{items:e.items.map((function(e){return t._normalizePublication(e)})),meta:e.meta}})).then((function(e){return t._cachePublications(e.items),e})).catch(c)},e.prototype.findPublications=e.prototype.getPublications=function(e){if(!(0,a.isArray)(e))throw new TypeError('"cids" argument has to be array');if(0===e.length)return Promise.resolve([]);var t=this._getCachedPublications(e);return void 0!==t?Promise.resolve(t):this.findPublications({filters:{cids:e},offset:0,limit:e.length}).then((function(e){return e.items}))},e.prototype.getIssue=e.prototype.getCategoryGroup=function(e){var t=this;return void 0!==this._groupCache[e]?Promise.resolve(this._groupCache[e]):this._deduplicateRequest("group:".concat(e),(function(){return Promise.all([t._provider.getCategoryGroup(e),l()]).then((function(e){return e[0]})).then(().catch(c)}))},e.prototype.getNavigationGroups=function(e,t,n){var i=this;return Promise.all([this._provider.getNavigationGroups(e,t,n),l()]).then((function(e){return e[0]})).then(().catch(c)},e.prototype.resolveNavigationPath=function(e){var t=this;return void 0!==this._pathResolutionCache[e]?Promise.resolve(this._pathResolutionCache[e]):this._deduplicateRequest("resolve-path:".concat(e),(function(){return Promise.all([t._provider.resolveNavigationPath(e),l()]).then(().then(()}))},e.prototype.getLanguages=function(){return this.getCategoryGroup(u.LQ.Languages).then((function(e){return e.categories}))},e.prototype.getCountries=e.prototype.getLocales=e.prototype.getCategory=function(e){return this._provider.getCategory(e)},e.prototype.getCatalogs=function(e){return this._provider.getCatalogs(e)},e.prototype.extendCategoriesWithTitlePublication=e.prototype._invalidateCaches=e.prototype._checkUpdates=e.prototype.destroy=e}();t.Z=d},99144:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Y}});var i=n(22970),r=n(40180),o=n(91574),a=n(4169),s=n(60683),u=n(14347),c=n(8871),l=n(20384),d=n(60231),h=n(18518),p=n(43389),f=n(25747),m=n(81867),g=n(97334),v=n(34336),y=n(24458),_=n(57136),b=n(80053),w=function(){function e(e,t,n,i,o,a,s){var u=this;void 0===a&&(a=""),void 0===s&&(s=""),this.articleId=e.articleId,this.editorId="editor-".concat(t),this.commentId=n,this.parentCommentId=i,this.isCompactView=d.observable(!0),this.isVisible=d.observable(!0),this.isEditMode=d.observable(!1),this.textDraft=d.observable(s||a),this.defaultReply=a,this.hasFocus=d.observable(!1),this.opinion=d.observable(null),this.attachments=d.observableArray(),this.hasAttachments=d.pureComputed((function(){return u.attachments().length>0})),this.scrollToAttachment=d.observable(),this.isPostingComment=d.observable(!1),this.isPostDisabled=d.computed((function(){return!u.textDraft()||u.isPostingComment()||(0,r.some)(u.attachments(),(function(e){return e.isLoading()}))})),this._dialogViewModel=e,this._dialog=e._dialog,this._cancelNextBlurEvent=!1,this._onCommentCreate=o}return e.prototype.createComment=function(){var e=this;return this.isPostDisabled()?Promise.reject():(this.isPostingComment(!0),this._onCommentCreate(this).finally((function(){e.isPostingComment(!1)})))},e.prototype.onMouseDown=function(e,t){var n="nd-no-blur-event",i=l(t.target);return(i.attr("".concat(n))||i.parents("[".concat(n,"]")).length)&&(this._cancelNextBlurEvent=!0),!0},e.prototype.cancelCommentEditing=function(e){e.clean(),e.isVisible(!1),e._dialogViewModel.resize()},e.prototype.onFocus=function(e){return(u.Z.isLogin()?Promise.resolve():b.default.signIn()).then((function(){e.isCompactView()&&e.isCompactView(!1),e._dialogViewModel.resize()}))},e.prototype.onBlur=function(e){e._cancelNextBlurEvent?e._cancelNextBlurEvent=!1:setTimeout((,200)},e.prototype.isEmpty=function(){if(this.hasAttachments()||this.opinion())return!1;var e=this.textDraft();return(0,r.startsWith)(e,this.defaultReply)&&(e=e.slice(this.defaultReply.length)),(0,r.isEmpty)(e)},e.prototype.focus=function(){this.hasFocus(!0)},e.prototype.clean=function(){this.textDraft(this.defaultReply),this.opinion(null),this.attachments([]),this.isPostingComment(!1),this.isCompactView(!0),this.hasFocus(!1)},e.prototype.getCommentDto=function(){var e=this.opinion(),t=e&&e.id;return{contentType:f.Z.contentTypes.ARTICLE,articleId:this.articleId,parentId:this.parentCommentId,opinionId:t,attachments:this.attachments()}},e.prototype._updateIsCompactView=function(){var e=0===this._dialogViewModel.totalCount();this.isCompactView(!e&&this.isEmpty()&&!this.hasFocus())},e.prototype._backToEditor=function(){this._dialogViewModel.resize({force:!0}),this.hasFocus(!0)},e}(),C=n(58653),I=n(18187),P=n(70832),x=n(54591),S=n(17447),T=n(27670),k=n(74714),A=n(65557),E=n(26615),Z=function(){eturn e.prototype.onEdit=function(){this._dialog.hide(h.Y.Ok,{action:"edit"})},e.prototype.onDelete=function(){this._dialog.hide(h.Y.Ok,{action:"delete"})},e.prototype.onReportComment=function(){this._dialog.hide(h.Y.Ok,{action:"report"})},e.prototype.onHideComment=function(){this._dialog.hide(h.Y.Ok,{action:"hideComment"})},e.prototype.onBanUser=e.prototype.close=e}(),M=function(){function e(){}return e.prototype.show=function(e){if(!e||!e.position)throw new Error("Config or dialog position is not specified.");return new Promise((function(t){var n=o.Z.createInstance();n.show({templateName:"v7.Client.Dialogs.Comments.MoreOptions",model:new Z(n,e),name:"comments-more-options",getLeft:function(t){return e.position.left-t/2},getTop:function(t){return e.position.top-t/2}}),n.onHide(()}))},e}(),D=Object.freeze({POPULAR:f.Z.contentOrderBy.byRatingDesc,DATE:f.Z.contentOrderBy.byDateDesc,DATEASC:f.Z.contentOrderBy.byDateAsc}),L=Object.freeze({LIST:0,NEW_COMMENT:1,ADD_VIDEO:2});function N(e,t,n,i,o,a,s,u,c){var l={contentType:f.Z.contentTypes.ARTICLE,articleId:e};return t&&(l.parentId=t),n&&(l.opinionId=n),i>-1&&(l.offset=i,l.limit=o,l.orderBy=a),l.attachments=(0,r.map)(s,(function(e){return e.toDto()})),u&&(l.markerCommentId=u),(0,r.isNumber)(c)&&(l.direction=c),l}var R,V=["Spam","Unlawful","Harassment","Indecent","Irrelevant"],B=function(e){var t=(void 0===e?{}:e).parent;return new Promise((function(e,n){var i=t||o.Z.getParent(),r=o.Z.createInstance(i);r.onHide((function(t,i){i.status===h.Y.Ok?e(i.action):n()}));var a=function(){var e={actions:V,currentAction:d.observable(V[0]),select:;return e}();a.cancel=a.report=r.show({templateName:"v7.Client.Dialogs.ReportUser",model:a,name:"report-user"}),r.resize()}))},F=n(88477),O=n(94711),z=n(16778),U={FACEBOOK:"facebook",TWITTER:"twitter",COPY_URL:"copyurl"},H=((R={})[U.FACEBOOK]="shareFacebook",R[U.TWITTER]="shareTwitter",R);function j(e,t){e.likesCount(t.likesCount),e.dislikesCount(t.dislikesCount),e.isVotedByUser(0!==t.currentVote),e.currentVote(t.currentVote)}var W=function(){function e(e,t){(0,r.assign)(this,e),this._dialogViewModel=t,this.author=e.authorNickname,this.parentAuthor=e.parentCommentUserProfile,this.isReply=d.observable(!!e.parentId),this.isExpanded=d.observable(!0),this.fullText=this.viewText(),this.toggleLongComment(),this.replyEditor=d.observable(null),this.editEditor=d.observable(null),this.sharingProviders=U,this.repliesParentId=d.observable(this.id),this.repliesOffset=d.observable(0),this.repliesLimit=20,this.canLoadMoreReplies=d.observable(this.repliesOffset()<this.repliesCount),this.repliesShowTopLoadMore=d.observable(this.canLoadMoreReplies()&&this.repliesCount>2),this.repliesShowBottomLoadMore=d.observable(!1),this.isLoadingReplies=d.observable(!1),this.lastReplyId=d.observable(null),this.isBusy=d.observable(!1),this.showFastShareButtons=d.observable(!1),this.actionTool=null}return e.prototype.openParentUserProfile=function(){v.Z.goView(y.n3.Profile,{profileId:this.parentAuthor.profileName})},e.prototype.openUserProfile=function(){v.Z.goView(y.n3.Profile,{profileId:this.authorProfileName})},e.prototype.toggleLongComment=function(){if(!this.isDeleted())if(this.isExpanded()){var e=0;this.hasAttachments&&this.fullText.length>256&&(e=256),this.fullText.length>512&&(e=512),e>0&&(this.viewText((0,r.truncate)(this.fullText,{length:e,separator:" "})),this.isExpanded(!1))}else this.viewText(this.fullText),this.isExpanded(!0),this._dialogViewModel.resize()},e.prototype.showMoreOptions=function(e,t){var n=this,i={isOwner:this.isOwner,position:{left:t.clientX,top:t.clientY}};(new M).show(i).then((function(e){e&&e.status===h.Y.Ok&&("edit"===e.action?n.showCommentEditor():"delete"===e.action?n.onCommentDelete():"hideComment"===e.action?n.hideComment().catch(F.logAndAlertError):"banUser"===e.action?n.banUser().catch(F.logAndAlertError):"report"===e.action&&B().then((function(e){return f.Z.abuseReportComment({contentType:f.Z.contentTypes.ARTICLE,articleId:n.articleId},n.id,e)})).catch(F.logAndAlertError))}))},e.prototype.hideComment=function(){var e=this;if(this.isBusy())return Promise.resolve();this.isBusy(!0);var t=N(this.articleId);return this._dialogViewModel.hideComment(this.id,t).finally((function(){e.isBusy(!1)}))},e.prototype.banUser=function(){var e=this;if(this.isBusy())return Promise.resolve();this.isBusy(!0);var t=N(this.articleId);return this._dialogViewModel.banUser(this.authorProfileName,t).finally((function(){e.isBusy(!1)}))},e.prototype.onCommentDelete=function(){var e=this;if(!this.isBusy()){this.isBusy(!0);var t=new x.Z,n=S.ZP.val("Dialogs.Comments.DeleteConfirmation"),i=S.ZP.val("Buttons.Delete.Text"),r=S.ZP.val("Buttons.Cancel.Text");t.confirm(n,r,i,!0).then((function(){var t=N(e.articleId);f.Z.deleteComment(t,e.id).then((function(){e.isDeleted(!0),e._dialogViewModel.totalCount(e._dialogViewModel.totalCount()-1)})).then((function(){return e._dialogViewModel.resize({force:!0}),Promise.resolve()})).finally((function(){e.isBusy(!1)}))})).catch((function(){e.isBusy(!1)}))}},e.prototype.showCommentEditor=function(){if(this.isOwner){this.editEditor()||this.editEditor(this._createEditEditor(this.editText)),this.replyEditor()&&this.replyEditor().isVisible(!1);var e=this.editEditor();if(e.textDraft(this.editText),this.hasAttachments){var t=this.attachments.map((function(e){return function(e){if(!e)return null;switch(e.type){case"video":return new z.Z(e);case"image":return new O.Z(e);default:return null}}(e)}));e.attachments(t),Promise.all(t.map((function(e){return(0,P.Jn)(e.imageId||e.thumbnailImageId).then(()})))}e.isVisible(!0),e.focus()}},e.prototype.likeComment=function(){var e=this;this.isBusy()||(this.isBusy(!0),I.Z.voteLike(this.id,I.Z.contentTypes.COMMENT).then((function(t){j(e,t),e.currentVote(1)})).finally((function(){e.isBusy(!1)})))},e.prototype.dislikeComment=function(){var e=this;this.isBusy()||(this.isBusy(!0),I.Z.voteDislike(this.id,I.Z.contentTypes.COMMENT).then((function(t){j(e,t),e.currentVote(-1)})).finally((function(){e.isBusy(!1)})))},e.prototype.showReplyEditor=function(){var e=this;return(u.Z.isLogin()?Promise.resolve():b.default.signIn()).then((function(){e.replyEditor()||e.replyEditor(e._createReplyEditor()),e.replyEditor().isVisible(!0),e.replyEditor().focus(),e._dialogViewModel.scrollToComment(e)}))},e.prototype.followUser=function(){this.isOwner||(this.isAuthorFollowed()?this._dialogViewModel.unFollowUser(this.authorProfileName):this._dialogViewModel.followUser(this.authorProfileName))},e.prototype.shareComment=function(e){return this._getSharingInfo([e]).then(()},e.prototype.showSharingMenu=function(e,t){var n=this;this.actionTool?this.actionTool.click(t):this._getSharingInfo().then((function(e){var i=(0,E.U2)("share");n.actionTool=new A.Z;var r=[null,e];n.actionTool.itemsControllerCTOR(i).additionalItemsControllerParams(r),n.actionTool.click(t)}))},e.prototype.loadReplies=function(){var e=this;this.isLoadingReplies()||(this.isLoadingReplies(!0),this._loadReplies().then((function(t){var n=t&&t.items&&t.items.length||0;if(n){var i;i=0===e.repliesOffset()?e._dialogViewModel._appendPageAfterComment(t,e.id,e.id):e._dialogViewModel._appendPageAfterComment(t,e.lastReplyId());var o=(0,r.last)(i);e.repliesShowTopLoadMore(!1),e.repliesShowBottomLoadMore(!1),e.lastReplyId(o.id),e.repliesOffset(e.repliesOffset()+n),e.canLoadMoreReplies(e.repliesOffset()<t.meta.totalCount),o.repliesParentId(e.repliesParentId()),o.repliesOffset(e.repliesOffset()),o.canLoadMoreReplies(e.canLoadMoreReplies()),o.repliesShowTopLoadMore(!1),o.repliesShowBottomLoadMore(o.canLoadMoreReplies()),o.lastReplyId(e.lastReplyId()),e._dialogViewModel.resize(),e._dialogViewModel.scrollToComment(e)}else e.canLoadMoreReplies(!1)})).finally((function(){e.isLoadingReplies(!1)})))},e.prototype._createReplyEditor=function(){return new w(this._dialogViewModel,"reply-".concat(this.id),null,this.id,this._dialogViewModel.createReply.bind(this._dialogViewModel),"".concat(this.author,": "))},e.prototype._createEditEditor=function(e){var t=new w(this._dialogViewModel,"edit-".concat(this.id),this.id,null,this._dialogViewModel.updateComment.bind(this._dialogViewModel),"",e);return t.isEditMode(!0),t},e.prototype._loadReplies=function(){return f.Z.getCommentsPage({articleId:this._dialogViewModel.articleId,parentId:this.repliesParentId(),offset:this.repliesOffset(),limit:this.repliesLimit,orderBy:this._dialogViewModel.currentOrderBy(),direction:1})},e.prototype._getContentAccessToken=function(){var e=T.Z.getActiveView();return e&&(0,r.isFunction)(e.controller)&&e.controller().contentAccessToken()||null},e.prototype._sharingMessage=function(e){var t=this,n=e===U.TWITTER;return(n?m.default.getProfile(this.authorProfileName):Promise.resolve()).then((function(i){var r=n&&i&&i.publicInfo?i.publicInfo.twitterUsername:t.authorNickname;return t.isOwner?t.editText:n?"".concat(r?"RT @".concat(r,":"):"").concat(t.editText):e===U.FACEBOOK?"".concat(r,': "').concat(t.editText,'"'):"".concat(r,": ").concat(t.editText)}))},e.prototype._getSharingInfo=function(e){var t=this;void 0===e&&(e=[U.TWITTER,U.FACEBOOK]);var n={article:{Id:this._dialogViewModel.articleId,ArticleId:this._dialogViewModel.articleId,Title:this._dialogViewModel.articleTitle()},comment:{commentKey:this.publicId}},i=1===e.length,o=i?e[0]:null,a=this._sharingMessage(o).then((function(e){n.text=e}));return i||(a=a.then(().then((function(t){n._textByActionName=(0,r.zipObject)(e.map((function(e){return H[e]})),t)}))),a.then((function(){return n}))},e.prototype.renderAttachments=function(e,t){t.hasAttachments&&new k.Z(t.attachments,{renderVideoPlayer:!1,showGalleryOnClick:!0}).render(l(e))},e.prototype.dispose=function(){},e}(),q=function(){function e(e,t){var n=this,i=void 0===t?{}:t,r=i.articleId,o=i.articleTitle,a=i.markerCommentId,s=i.state;this._dialog=e,this.id="comments-".concat(r),this.markerCommentId=a,this.articleId=r,this.commentsOffsetPrev=0,this.commentsOffset=0,this.commentsLimit=20,this.states=L,this.orderBy=D,this.canLoadPrev=d.observable(!!a),this.canLoadNext=d.observable(!0),this.isFirstLoadCompleted=d.observable(!1),this.isLoadingNext=d.observable(!1),this.isLoadingPrev=d.observable(!1),this.userName=d.observable(""),this.profileId=d.observable(""),this.avatar=d.observable(""),this.currentState=d.observable(s||L.LIST),this.currentOrderBy=d.observable(D.DATEASC),this.articleTitle=d.observable(o||""),this.articleSubtitle=d.observable(""),this.touch=!!p.v.touch,this.opinions=d.observableArray(),this.totalCount=d.observable(0),this.comments=d.observableArray(),this.canComment=d.observable(!1),this.enableVideoAttachment=d.observable(!1),this.enableImageAttachment=d.observable(!1),this.enableOpinions=d.observable(!1),this.enabledUserActions=d.observableArray(),this.fontset=g.get("TextView.Fontset","fontset1"),this.videoUrl=d.observable(""),this.videoLinkHasError=d.observable(!1),this.isVideoLoading=d.observable(!1),this.isVideoSelected=d.observable(!1),this.hasOpinions=d.pureComputed((),this.editor=new w(this,this.id,null,null,this.createComment.bind(this)),this.hasFocus=d.pureComputed((function(){return!n.editor.hasFocus()&&!n.isVideoSelected()})),this.scrollToComment=d.observable(!1),this.showBottomLoading=d.pureComputed((),this.back=function(){return n.closeDialog()}}return e.prototype.openUserProfile=function(e){v.Z.goView(y.n3.Profile,{profileId:e.profileId()})},e.prototype.closeDialog=function(){var e=this,t=(0,r.some)(this.comments(),(function(e){return e.replyEditor()&&!e.replyEditor().isEmpty()||e.editEditor()&&!e.editEditor().isEmpty()}));if(!this.editor.isEmpty()||t){var n=S.ZP.val("Dialogs.Comments.DiscardConfirmation"),i=S.ZP.val("Buttons.Confirm.Text"),o=S.ZP.val("Buttons.Cancel.Text");(0,x.Z)().confirmSafe(n,o,i,!0).then(().catch(F.logError)}else this.currentState()===L.ADD_VIDEO?this.cancelAddVideoDialog():this._dialog.hide(h.Y.Close)},e.prototype.createComment=function(){var e=this,t=this.editor;if(t.textDraft()){var n=t.getCommentDto();return f.Z.createComment(n,t.textDraft()).then((function(n){if(t.clean(),(0,r.forEach)(e.comments(),(function(e){return e.showFastShareButtons(!1)})),e.totalCount()>e.comments().length)return e.markerCommentId=n.publicId,e.commentsOffset=0,e.commentsOffsetPrev=0,e.loadPrevPage().then((function(t){e.canLoadNext(!1);var i=e._toViewModel(n);return e.comments([i]),e._appendPrevPage(t)})).then((function(){var t=e.comments();return t[(0,r.findIndex)(t,(function(e){return e.id===n.id}))]}));var i=e._toViewModel(n);return e.comments.push(i),e.totalCount(e.totalCount()+1),i})).then(().catch((function(){return(0,F.logAndAlertError)({resourceKey:"Dialogs.Comments.PostCommentFailed"})}))}return Promise.reject()},e.prototype.createReply=function(e){var t=this,n=e.parentCommentId,i=this.comments(),o=(0,r.findIndex)(i,(function(e){return e.id===n})),a=(0,r.findLastIndex)(i,(function(e){return e.parentId===n}));if(o>=0&&e.textDraft()){var s=e.getCommentDto();return f.Z.createComment(s,e.textDraft()).then((function(n){e.clean(),e.isVisible(!1),(0,r.forEach)(t.comments(),(function(e){return e.showFastShareButtons(!1)}));var i=t._toViewModel(n),s=(a>0?a:o)+1;t.comments.splice(s,0,i),t.scrollToComment(i),t.totalCount(t.totalCount()+1),t.resize()})).catch((function(){return(0,F.logAndAlertError)({resourceKey:"Dialogs.Comments.PostCommentFailed"})}))}return Promise.reject()},e.prototype.updateComment=function(e){var t=this;if(e.textDraft()){var n=e.getCommentDto(),i=e.commentId,o=(0,r.find)(this.comments(),(function(e){return e.id===i}));return f.Z.updateComment(n,i,e.textDraft()).then((function(n){e.clean(),e.isVisible(!1),(0,r.forEach)(t.comments(),(function(e){return e.showFastShareButtons(!1)}));var i=t._toViewModel(n);t.comments.replace(o,i)})).then(().catch(()}return Promise.reject()},e.prototype.loadPreviousPage=function(){var e=this;this.canLoadPrev()&&!this.isLoadingPrev()&&(this.isLoadingPrev(!0),this.loadPrevPage().then(().catch(F.logError).finally((function(){e.isLoadingPrev(!1)})))},e.prototype.isUserActionEnabled=e.prototype.hideComment=function(e,t){var n=this,i=new x.Z,r=S.ZP.val("Dialogs.Comments.HideCommentConfirmation"),o=S.ZP.val("Buttons.HideComment.Text"),a=S.ZP.val("Buttons.Cancel.Text");return i.confirm(r,a,o,!0).then((function(){return f.Z.hideComment(e,t)})).then((function(){n.markCommentAsDeleted(e),n.totalCount(n.totalCount()-1),n._dialog.resize()}))},e.prototype.markCommentAsDeleted=function(e){if((0,r.some)(this.comments(),(function(t){return t.parentId===e||!t.isDeleted()}))){var t=(0,r.find)(this.comments(),(function(t){return t.id===e}));t&&t.isDeleted(!0)}else this.comments(this.comments().filter((function(t){return t.id!==e})))},e.prototype.banUser=function(e,t){var n=this,i=new x.Z,o=S.ZP.val("Dialogs.Comments.BanUserConfirmation"),a=S.ZP.val("Buttons.BanUser.Text"),s=S.ZP.val("Buttons.Cancel.Text");return i.confirm(o,s,a,!0).then((function(){return f.Z.banUser(e,t)})).then((function(){var t=n.comments().filter((function(t){return t.authorProfileName===e}));(0,r.forEach)(t,(function(e){return n.markCommentAsDeleted(e.id)})),n.totalCount(n.totalCount()-t.length),n._dialog.resize()}))},e.prototype.resize=function(){this._dialog.resize()},e.prototype.followUser=function(e){var t=this;_.I.ensureProfileName(e).then(m.default.followUser).then((function(n){return t._updateUserFollowStatus(e,n.followedByMe)})).catch(F.logError)},e.prototype.unFollowUser=function(e){var t=this;_.I.ensureProfileName(e).then(m.default.unFollowUser).then(().catch(F.logError)},e.prototype._updateUserFollowStatus=function(e,t){(0,r.forEach)(this.comments(),()},e.prototype._changeState=function(e){e!==this.currentState()&&(this.currentState(e),this._dialog.resize())},e.prototype._toViewModel=e.prototype._appendPrevPage=function(e){var t=this,n=(0,r.map)(e.items,(function(e){return t._toViewModel(e)})),i=(0,r.filter)(e.items,(function(e){return!e.parentId})).length;(0,r.forEachRight)(n,(),this.totalCount(e.meta.totalCount),this.commentsOffsetPrev+=i,this.canLoadPrev(i>=this.commentsLimit)},e.prototype._appendPageAfterComment=function(e,t,n){var i=this,o=(0,r.map)(e.items,(function(e){return i._toViewModel(e)}));if(n){var a=(0,r.filter)(this.comments(),(function(e){return e.parentId===n}));(0,r.forEach)(a,(function(e){return i.comments.remove(e)}))}var s=(0,r.findIndex)(this.comments(),(function(e){return e.id===t}));return s>-1&&(0,r.forEach)(o,(function(e){return i.comments.splice(1+s++,0,e)})),o},e.prototype._appendNextPage=function(e){var t=this,n=(0,r.map)(e.items,(function(e){return t._toViewModel(e)})),i=(0,r.some)(e.items)?(0,r.filter)(e.items,(function(e){return!e.parentId})).length:0;(0,r.forEach)(n,(function(e){return t.comments.push(e)})),this.totalCount(e.meta.totalCount),this.commentsOffset+=i,this.canLoadNext(i>=this.commentsLimit),this.canLoadPrev()&&this.canLoadPrev(this.comments().length<this.totalCount())},e.prototype.loadPrevPage=function(){return f.Z.getCommentsPage({articleId:this.articleId,offset:this.commentsOffsetPrev,limit:this.commentsLimit,orderBy:this.currentOrderBy(),markerCommentId:this.markerCommentId,direction:-1})},e.prototype.loadNextPage=function(){return f.Z.getCommentsPage({articleId:this.articleId,offset:this.commentsOffset,limit:this.commentsLimit,orderBy:this.currentOrderBy(),markerCommentId:this.markerCommentId,direction:1})},e.prototype.onScrolled=function(){var e=this;!this.isLoadingNext()&&this.canLoadNext()&&(this.isLoadingNext(!0),this.loadNextPage().then((function(t){e._appendNextPage(t)})).finally((function(){e.isLoadingNext(!1)})))},e.prototype.onSetOrderBy=function(e){var t=this;return function(){t.currentOrderBy()!==e&&(t.currentOrderBy(e),t.commentsOffsetPrev=0,t.commentsOffset=0,t.markerCommentId=null,t.loadNextPage().then((function(e){t.canLoadPrev(!1),t.comments([]),t._appendNextPage(e),l("#".concat(t.id," [nd-scroll-panel]")).scrollTop(0),t._dialog.resize({force:!0})})))}},e.prototype.dispose=function(){(0,r.forEach)(this.comments(),(function(e){e.dispose()}))},e}(),G=n(94267),X=function(){function e(){}return e.prototype.showPost=function(e){return e.state=L.NEW_COMMENT,this.show(e)},e.prototype.show=function(e){G.Z.show();var t=o.Z.getInstance(),n=new q(t,e);function l(){c.default.getProfileId()?(n.userName(c.default.nickname),n.profileId(c.default.getProfileId()),n.avatar((0,s.b_)({nickname:c.default.nickname,imageId:c.default.avatarImageId,size:s.wC.large,fallbackAvatarUrl:c.default.photoUrl}))):(n.userName(void 0),n.profileId(void 0),n.avatar(void 0))}var d=b.default.onAfterAccountChanged.subscribe(l);t.onHide((function(){n.dispose(),d.unsubscribe()})),n.isLoadingNext(!0);var h=[n.loadNextPage(),a.Z.loaded()];return u.Z.isLogin()&&h.push(c.default.load()),Promise.all(h).then((function(e){var o=(0,i.CR)(e,1)[0];n._appendNextPage(o),n.isLoadingNext(!1),l(),n.canComment(a.Z.get("ui.Comments.enablePost",!0)),n.enableVideoAttachment(a.Z.get("ui.Comments.enablePostVideo",!0)),n.enableImageAttachment(a.Z.get("ui.Comments.enablePostImage",!0)),n.enableOpinions(a.Z.get("ui.Comments.enableOpinions",!0));var s=(0,r.map)(a.Z.get("ui.Comments.toolbarButtons","").split(","),();return a.Z.get("ui.Voting.enable",!1)&&s.push("support","oppose"),n.enabledUserActions(s),(0!==o.meta.totalCount||u.Z.isLogin()?Promise.resolve():b.default.signIn()).then((function(){t.show({templateName:"v7.Client.Dialogs.Comments",model:n,name:"comments",focusElement:".pop-segment-scrollable-in"}),n.isFirstLoadCompleted(!0),n.currentState()!==L.NEW_COMMENT&&0!==n.totalCount()||n.editor.focus(),t.onResize((function(){var e=t.htmlRoot();if(e.find(".pop-fullheight").length){var n=e.find(".pop-body").height()-e.find(".addcombar").height();e.find(".pop-segment-scrollable-in").height(n)}})),t.resize(),t.onRestore((function(){t.resize()}))}))})).finally((function(){G.Z.hide()}))},e}(),Y=new X},78196:function(e,t,n){"use strict";var i=n(22970),r=n(74036),o=n(47070),a=n(85761),s=n(76863),u=n(79375).Z.list,c=r.ZP.view,l=o.Z.base,d=[a.Z,s.Z],h=function(e){eturn(0,i.ZT)(t,e),t.prototype.renderer=function(){var e=this,t=new u(this).title("").headerEnable(!1),n=d.map((function(t){return new t(e)})).map((function(e){return e.available().then(()}));return Promise.all(n).then((function(e){return e.filter((function(e){return null!==e})).map((function(e){return e.item()}))})).then(()},t}(l);t.Z=h},85761:function(e,t,n){"use strict";var i=n(22970),r=n(73267),o=n(4169),a=n(78964),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),t.prototype.item=function(){return this._getItem("manageaccount","Menu.Account.MyAccount","pri pri-account")},t.prototype.available=function(){return Promise.all([o.Z.loaded(),(0,a.Ik)()]).then((function(e){var t=(0,i.CR)(e,2)[1],n=t&&t.maxSessionRequired;return o.Z.get("pagesView.enableMyAccountMenu")&&!n}))},t.prototype.enabled=function(){return Promise.resolve(!0)},t.prototype.activate=function(){var e=this;o.Z.loaded().then((function(){e._parent.hide(),window.location=o.Z.get("Authentication.ExternalMyAccountPage")||"".concat(window.basePath,"accounting/account")}))},t}(r.Z);t.Z=s},76863:function(e,t,n){"use strict";var i=n(22970),r=n(20384),o=n(73267),a=n(80053),s=n(34336),u=n(91330),c=n(27670),l=n(60658),d=n(4169),h=n(14347),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),t.prototype.item=function(){return this._getItem("signout","Viewer.SignOut","pri pri-logout")},t.prototype.available=function(){return Promise.resolve(!0)},t.prototype.enabled=function(){return Promise.resolve(!0)},t.prototype.activate=function(){this._parent.hide();var e,t=c.Z.getActiveView(),n=d.Z.get("Authentication.ExternalLogoutPage"),i=d.Z.get("Authentication.EnablePublisherAuthenticationWebService");e=i&&n?n:h.Z.getRedirectionUrl("AfterSignOut");var o=null===t||""!==e;a.default.signOut({supressReauthorize:o}).then((function(){o?window.location=e||"http://".concat(window.currentHostName).concat(window.basePath):(s.Z.resetState(),u.Z.enableOriginalLanguage(),l.Z.toolbarSetup(r("#toolbarTop")))}))},t}(o.Z);t.Z=p},73267:function(e,t,n){"use strict";var i=n(22970),r=n(83062),o=n(44853),a=n(17447),s=n(95766),u=n(92895),c=r.Z.base,l=o.Z.item,d=function(e){eturn(0,i.ZT)(t,e),t.prototype.available=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!this.action)return Promise.resolve(!1);var n=(0,i.CR)(2===e.length?e:[this._view,this._context],2),r=n[0],o=n[1];return Promise.resolve(this.action.available(r,o))},t.prototype.enabled=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!this.action)return Promise.resolve(!1);var n=(0,i.CR)(2===e.length?e:[this._view,this._context],2),r=n[0],o=n[1];return Promise.resolve(this.action.enabled(r,o))},t.prototype.activate=function(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!this.action)return Promise.resolve();var o=(0,i.CR)(2===n.length?n:[this._view,this._context],2),a=o[0],c=o[1],l=(null===(e=c.preview)||void 0===e?void 0:e.previewType)||"article",d=("page"===l?c.pageNumbers||[c.page]:[null===(t=c.article)||void 0===t?void 0:t.ArticleId]).map((function(e){return{action:n[0]._name,label:l,value:e}}));d.forEach((function(e){return s.U.send(new u.tp(e))})),this._parent&&this._parent.hide&&this._parent.hide();var h=this.action.activate(a,c);return"function"!=typeof(null==h?void 0:h.then)&&(h=Promise.resolve(h)),h.then((function(e){return d.forEach((function(e){return s.U.send(new u.Jl(e))})),e})).catch((function(e){return d.forEach((),e}))},t.prototype.activated=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!this.action)return Promise.resolve(!1);var n=(0,i.CR)(2===e.length?e:[this._view,this._context],2),r=n[0],o=n[1];return this.action.activated(r,o)},t.prototype._getItem=function(e,t,n){return this._item||(this._item=new l(this,a.ZP.val(t)).name(e).css(n).bind(this.activate.bind(this))),this._item},t}(c);t.Z=d},53770:32690:function(e,t,n){"use strict";n.r(t),n.d(t,{runInit:function(){return Sc}}),n(67332);var i=n(20384),r=n(60231),o=n(14347),a=n(2099),s=n(14003),u=n(80053),c=n(17447),l=n(20345).janrain,d=n(69358).gigya,h=n(84438),p=n(8270),f=n(42581),m=n(25438),g=n(4169),v=n(84066),y=n(60723),b=n(33652);(0,b.y)("jquery",(function(){return i})),(0,b.y)("knockout",(function(){return r})),(0,b.y)("nd.user",(function(){return o.Z})),(0,b.y)("nd.authentication",(function(){return u.default})),(0,b.y)("authentication/nd.authentication",(function(){return u.default})),(0,b.y)("nd.res",(function(){return c.ZP})),(0,b.y)("utils/cookies",(function(){return p})),(0,b.y)("nd.viewer.app",(function(){return a.Z})),(0,b.y)("nd.navigation",(function(){return s.Z})),(0,b.y)("nd.janrain",(function(){return l})),(0,b.y)("nd.gigya",(function(){return d})),(0,b.y)("nd.ui",(function(){return h.Z})),(0,b.y)("nd.browser",(function(){return f.X})),(0,b.y)("nd.config",(function(){return g.Z})),(0,b.y)("nd.device",(function(){return m.U})),(0,b.y)("nd.imagesource",(function(){return v.Z})),(0,b.y)("nd.analytics",(function(){return y.c})),n(18410),n(16412);var w=n(88769),C=n(49418),I=n(77004),P=n(64281),x=(n(42758),n(44288),n(60811)),S=n(97334),T=n(20384);o.Z.loader.setLoadFunction(x.ri),T.nd.userSettings={local:S},n(29168);var k=n(40605),A=n(54591),E=(n(66627),n(84672),n(33941),n(993),n(33027),n(98744));r.bindingHandlers["nd-afterRender"]=new function(){this.init=function(e,t,n,r,o){var a=t();i.isFunction(a)&&a(e,r)}},r.bindingHandlers.attrAsync={init:function(e,t){var n=t();Object.keys(n).forEach((function(t){if(!n[t]||"function"!=typeof n[t].then)throw new Error("The function bound to '".concat(t,"' does not return a Promise. Use 'attr' binding instead."));n[t].then((function(n){e[t]=n}))}))}};var Z=n(40180),M=n(68255);r.bindingHandlers.autosize={update:function(e,t){if(!e||"textarea"!==e.tagName.toLowerCase())throw new TypeError("autosize works only with textarea element");M(e);var n=(r.unwrap(t())||{}).onResize;(0,Z.isFunction)(n)&&(e.addEventListener("autosize:resized",n),r.utils.domNodeDisposal.addDisposeCallback(e,(function(){e.removeEventListener("autosize:resized",n)})))}};var D=n(61777);r.bindingHandlers["nd-clamp"]=new function(){this.update=function(e,t,n,o,a){var s=r.unwrap(t());if(s&&s>0){var u="hidden"===i(e).css("visibility");D(e,{clamp:s,useNativeClamp:!u})}}};var L=n(58104);r.bindingHandlers.click={init:function(e,t,n,i,o){var a=L.Z.create(e).subscribe((function(e){var r=o.$data;!0!==t().call(i,r,e)&&(e.preventDefault?e.preventDefault():e.returnValue=!1,!1!==n.get("clickBubble")||(e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()))}));r.utils.domNodeDisposal.addDisposeCallback(e,(function(){a.unsubscribe()}))}};var N=n(55193),R=n(43389);r.bindingHandlers.clickAndTouch={init:function(e,t,n,o,a){var s=i(e),u=R.v.touch?"singleTapConfirmed singleTap":"click",c=function(e){var n=a.$data,i=Z.isFunction(e.lastEvent)?e.lastEvent():e,r=t().call(o,n,i);return E.Z.event.clickAndTouch.handle(e),!(i.isPropagationStopped()||i.isImmediatePropagationStopped()||!r)};R.v.touch&&N.ZP.bind(s,{singleTap:c}),s.on(u,c),r.utils.domNodeDisposal.addDisposeCallback(e,(function(){R.v.touch&&N.ZP.unbind(s),s.off(u)}))}};var V=n(4014),B={init:function(e,t){var n=t(),i=new V(e);(0,Z.isFunction)(n.copyHandler)&&i.on("success",n.copyHandler)}};r.bindingHandlers.clipboard=B;var F={init:update:function(e,t){var n=t();r.unwrap(n)?N.ZP.enableTouchScroll(e):N.ZP.disableTouchScroll(e)}};r.bindingHandlers.enableTouchScroll=F,r.bindingHandlers.oldValue=new function(){this.update=this.init=function(e,t){var n=i(e);n.on("oldValueChanged",(),r.utils.domNodeDisposal.addDisposeCallback(e,(function(){n.off("oldValueChanged"),n=null}))}},r.bindingHandlers["nd-onTransitionEnd"]=new function(){this.update=function(e,t,n){var r=t();i.isFunction(r)&&i(e).bind("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",(function(){r(e)}))}},r.bindingHandlers.resizable=new function(){this.update=function(e,t,n,o,a){var s=t();r.unwrap(s),s.enforce&&i.isFunction(s.resizeHandler)&&s.resizeHandler(e)}},r.bindingHandlers["nd-scrolled-to-bottom-edge"]=new function(){this.update=function(e,t,n){var r=t();if(i.isFunction(r)){var o=i(e),a=n.get("edgeDelta")||150;o.scroll((function(){var e=o.outerHeight(),t=o.prop("scrollHeight");return o.scrollTop()+e+a>t&&r(),!0}))}}},r.bindingHandlers.slideVisible=new function(){this.update=function(e,t,n){var o=t(),a=n(),s=r.unwrap(o),u=a.slideDuration||400;!0===s?i(e).show():(i(e).slideUp(u),i(e).hide())}};var O={init:function(e,t){return{controlsDescendantBindings:!r.unwrap(t())}}};function z(e){return{x:e.clientX,y:e.clientY}}r.bindingHandlers.allowBindings=O,r.bindingHandlers.swipeClick=new function(){this.init=function(e,t,n,o,a){var s,u=i(e),c=t(),l=c.threshold||{x:50,y:50},d=c.handler||c;u.on("mousedown",(),u.on("click",(function(e){if(s){var t=z(e);(function(e,t){return Math.abs(e.x)<t.x&&Math.abs(e.y)<t.y})({x:t.x-s.x,y:t.y-s.y},l)&&d.apply(o,[o].concat(arguments)),s=null}})),r.utils.domNodeDisposal.addDisposeCallback(e,(function(){u.off()}))}},r.bindingHandlers.textWithDefault=new function(){this.update=function(e,t){var n=t();i(e).text(n.value()||n.default)},this.init=function(e,t){var n=i(e);n.on("change",(function(){t().value(n.text()),t().value.notifySubscribers()}))}},r.bindingHandlers.twoWayText=new function(){this.update=function(e,t){i(e).text(t()())},this.init=function(e,t){var n=i(e);n.on("change",(function(){t()(n.text())})),r.utils.domNodeDisposal.addDisposeCallback(e,()}},r.bindingHandlers.uploadFile={init:function(e,t){if(!r.isObservable(t()))throw new Error("Binding requires ko.observable");var n=L.Z.create(e).subscribe((function(){e.value=""})),i=function(){var n=e.files,i=t();r.isObservable(i)&&n.length&&i(n)};e.addEventListener("change",i),r.utils.domNodeDisposal.addDisposeCallback(e,()},update:function(e,t,n){var i=t(),o=r.unwrap(i),a=n.get("filesHandler");o&&(0,Z.isFunction)(a)&&a(o)}};var U,H,j="$validationAttempted";r.bindingHandlers.validate=new function(){this.init=function(e,t,n,i,o){var a=t(),s=o.extend({});return"object"==typeof a?(a.__validationAttempted||(a.__validationAttempted=r.observable(!1)),s[j]=a.__validationAttempted):a&&(i.__validationAttempted||(i.__validationAttempted=r.observable(!1)),s[j]=i.__validationAttempted),r.applyBindingsToDescendants(s,e),{controlsDescendantBindings:!0}}},r.bindingHandlers.validationContainer=(U="validation-msg",H=r.bindingHandlers,{init:function(e,t,n,i,r){var o=t();if(o)if(o.hasErrors){var a=document.createElement("span");a.className=U,a.appendChild(document.createElement("span")),e.insertBefore(a,null)}else console.warn('Init "validationContainer" binding: ignored because it bound to observable that has no validation extension.')},update:function(e,t,n,i,o){var a=t();if(a)if(a.hasErrors){var s=e.getElementsByClassName(U)[0],u=s.lastChild,c=o[j],l=a.validationMessage,d=function(){var e=a.hasErrors(),t=!!c,n=!!a.isDirty,i=!!t&&c(),r=!!n&&a.isDirty();return t||n?e&&(i||r):e},h=d();H.text.update(u,l),H.visible.update(s,d),c&&c.subscribe((function(){H.visible.update(s,d)})),r.utils.toggleDomNodeCssClass(e,"error",h)}else console.warn('Update "validationContainer" binding: ignored because it bound to observable that has no validation extension.')}});var W={update:function(e,t){r.unwrap(t());var n="opacity",o=window.getComputedStyle(e).getPropertyValue(n),a=void 0===o?1:parseFloat(o),s=i(e);s.css(n,a-.01),s.css(n,a)}};r.bindingHandlers.repaint=W;var q=n(22970);r.bindingHandlers.resourceText={init:update:function(e,t){var n,i=r.unwrap(t()),o=i,a=null;Array.isArray(i)&&(o=(n=(0,q.CR)(i,2))[0],a=n[1]),c.ZP.isLoaded()?r.utils.setTextContent(e,c.ZP.val(o,a)):(r.virtualElements.emptyNode(e),c.ZP.valAsync(o,a).then((function(t){r.dataFor(e)&&r.utils.setTextContent(e,t)})))}},r.virtualElements.allowedBindings.resourceText=!0;var G=n(58653),X={init:function(e){if(!G.Z.openWindow)throw new Error('"externalLinks" binding not supported, because the "openWindow" action is not registered');var t=R.v.touch?"singleTapConfirmed singleTap":"click";i(e).find("a[target='_blank']").on(t,(function(e){var t=i(e.currentTarget).attr("href");return G.Z.openWindow.activate({url:t}),e.preventDefault(),!1}))}};r.bindingHandlers.externalLinks=X,r.bindingHandlers.fadeInVisible={init:function(e,t){var n=t();i(e).toggle(r.utils.unwrapObservable(n))},update:function(e,t){var n=t();r.utils.unwrapObservable(n)?i(e).fadeIn():i(e).hide()}};var Y={offset:{},partialVisibility:!1,minTopValue:0,intervalDelay:100,containmentSelector:null},K=function(){function e(e,t){this.el=e,this.containment=document.querySelector(t.containmentSelector),this.options=t,this.state={isVisible:null,visibilityRect:{}},this.interval=null}return e.prototype.startWatching=function(){if(!this.interval){var e=this.options.intervalDelay;this.interval=setInterval(this._check.bind(this),e),this._check()}},e.prototype.stopWatching=e.prototype._check=function(){var e,t=this.options,n=t.offset,i=t.partialVisibility,r=t.onChange,o=this._normalizeRect(this._roundRectDown(this.el.getBoundingClientRect()));if(this.containment){var a=this.containment.getBoundingClientRect();e={top:a.top,left:a.left,bottom:a.bottom,right:a.right}}else e={top:0,left:0,bottom:window.innerHeight||document.documentElement.clientHeight,right:window.innerWidth||document.documentElement.clientWidth};"object"==typeof n&&(e.top+=n.top||0,e.left+=n.left||0,e.bottom-=n.bottom||0,e.right-=n.right||0);var s={top:o.top>=e.top,left:o.left>=e.left,bottom:o.bottom<=e.bottom,right:o.right<=e.right},u=o.height>0&&o.width>0,c=u&&s.top&&s.left&&s.bottom&&s.right;if(u&&i){var l=o.top<=e.bottom&&o.bottom>=e.top&&o.left<=e.right&&o.right>=e.left;"string"==typeof i&&(l=s[i]);var d=this.options.minTopValue;c=d?l&&o.top<=e.bottom-d:l}return this.state.isVisible!==c&&(this.state={isVisible:c,visibilityRect:s},(0,Z.isFunction)(r)&&r(c)),this.state},e.prototype._roundRectDown=e.prototype._normalizeRect=e}();r.bindingHandlers.visibilitySensor={init:function(e,t,n){var i=t(),o=r.unwrap(n.get("visibilitySensorOptions")),a=r.unwrap(r.utils.extend(Y,o));if(!(0,Z.isFunction)(i))throw new Error("Handler should be a function");a.onChange=i;var s=new K(e,a);r.utils.domNodeDisposal.addDisposeCallback(e,(function(){s.stopWatching()})),s.startWatching()}};var J=n(6677),$={init:function(e,t){var n=t(),i=n.domEvents?n.domEvents.split(","):[];i.length?isNaN((null==n?void 0:n.value)||0)?J.Z.log("[analyticsEvent] Invalid value parameter for element ".concat(e)):i.forEach((function(t){J.Z.log("[analyticsEvent] Registering analyticsEvent for DOM event '".concat(t,"' on element ").concat(e)),e.addEventListener(t,(function(i){J.Z.log("[analyticsEvent] Executing DOM event '".concat(t,"' on element ").concat(e," with data ").concat(i)),y.c.event({category:(null==n?void 0:n.category)||"DOM",action:(null==n?void 0:n.action)||t,label:(null==n?void 0:n.label)||"",value:+(null==n?void 0:n.value)||0})}))})):J.Z.log("[analyticsEvent] Not DOM events defined for element ".concat(e))}};r.bindingHandlers.analyticsEvent=$;var Q=n(92912),ee=function(e,t){var n=e.type,r="large"===(void 0===n?"large":n)?"pr-spinner-l":"pr-spinner-s";i(t).children().first().addClass(r)},te={synchronous:!0,viewModel:{createViewModel:,template:'<div class="pr-spinner">'.concat(Q.GG,"</div>")},ne="spinner";r.components.isRegistered(ne)||r.components.register(ne,te),n(82402),n(89512),n(70383),n(74036);var ie=n(44853),re=n(83062),oe=n(88585),ae=n(91330),se=function(){var e={};e.enable=r.observable(!1),e.language=r.observable(null),e.language2=r.computed((function(){return e.enable()?e.language():null})),e.languages=null,e.exceptions=r.observableArray();var t={};function n(){e.enable(i.nd.utils.translation.auto.enable());var n=new s(i.nd.utils.translation.auto.language()||i.nd.utils.translation.language("en"));e.language(n);var r=i.nd.utils.translation.toLanguages().sort((function(e,t){return e.title()>t.title()?1:e.title()<t.title()?-1:0}));e.languages=[];for(var a=0;a<r.length;++a)e.languages.push(new s(r[a]));for(a=0;a<r.length;++a){var c=new u((n=r[a]).code(),n.name(),n.title());t[c.code]=c}var l=i.nd.utils.translation.auto.exceptions();if(l)for(a=0;a<l.length;++a)t[l[a]].checked(!0);return o(),e}function o(){var n=e.language().code;for(var i in e.exceptions.removeAll(),t)i!=n&&e.exceptions.push(t[i]);e.exceptions.sort((function(e,t){return e._title>t._title?1:e._title<t._title?-1:0}))}function a(){for(var t=[],n=e.exceptions().length,r=0;r<n;++r){var o=e.exceptions()[r];o.checked()&&t.push(o.code)}i.nd.utils.translation.auto.exceptions(t.length?t:null)}function s(t){i.nd.ui.menu.items.radio.call(this,e,t.title()),this.code=t.code(),this.name=t.name(),this.checked=r.computed(this._checked,this)}function u(t,n,o){i.nd.ui.menu.items.checkbox.call(this,e,o),this.code=t,this.name=n,this.checked=r.observable(!1)}return e.init=function(){I.online()?n():I.bind("online",n)},e.onEnableClicked=function(){oe.Z.getAsync(oe.Z.restrictionTypes.autoTranslation).then((function(t){var n;t===oe.Z.restrictionResults.ALLOWED&&(n=!e.enable(),e.enable(n),i.nd.utils.translation.auto.enable(n))}))},e.onLanguageClicked=function(n){e.language().code!=n.code&&(t[e.language().code].checked(!1),e.language(n),o(),i.nd.utils.translation.auto.language(n.code),a())},e.toggleException=function(e){e.checked(!e.checked()),a()},e.available=function(){return!0},e.enabled=function(){return!0},i.extend(s.prototype,i.nd.ui.menu.items.language.prototype,{code:null,name:null,_checked:function(){return e.language()&&e.language().code==this.code},onClick:e.onLanguageClicked}),i.extend(u.prototype,i.nd.ui.menu.items.checkbox.prototype,{code:null,name:null,onClick:e.toggleException}),e}();function ue(){i.nd.ui.menu.items.controllers.base.apply(this,arguments)}i.extend(ue.prototype,i.nd.ui.menu.items.controllers.base.prototype,{item:function(){return this._item||(this._item=new i.nd.ui.menu.items.language(this,i.nd.res.val("Menu.AutoTranslate")).css("pri pri-translate").bind(this.activate.bind(this)),this._item.language=se.language2),se.init(),this._item},back:function(){this._parent.back()},available:function(){return oe.Z.getAsync(oe.Z.restrictionTypes.autoTranslation).then((function(e){return e===oe.Z.restrictionResults.ALLOWED}))},enabled:function(){return!!I.online()},activate:function(e){var t=new i.nd.ui.menu.renderers.list(this).title(e.title()),n=t.addGroup();(e=new i.nd.ui.menu.items.checkbox(this,i.nd.res.val("Menu.Items.AutoTranslate")).bind(se.onEnableClicked)).checked=se.enable,n.add(e),(e=new i.nd.ui.menu.items.language(this,i.nd.res.val("Menu.Items.AutoTranslateTo")).bind(this._showLanguages.bind(this))).enableLanguage=se.enable,e.language=se.language,n.add(e),t.addGroup(i.nd.res.val("Menu.SubTitles.DoNotTranslateFrom")).items(se.exceptions),this._parent.showSubmenu(t)},_showLanguages:function(){var e=new i.nd.ui.menu.renderers.list(this).title(i.nd.res.val("Menu.Items.Language"));e.addGroup().items(se.languages),this._parent.showSubmenu(e)},hide:function(){this._parent.hide()}}),i.nd.ui.menu.items.controllers.register("autoTranslate",ue);var ce=n(92741),le=n(81073),de=n(95766),he=n(92895),pe=function(){var e={current:r.observable(),fonts:null,init:function(){e.current(le.Z.current),e.fonts=[];for(var n=le.Z.list,i=0;i<n.length;++i)e.fonts.push(new t(n[i]))},onFontClicked:function(t){le.Z.currentFontId=t.id(),e.current(le.Z.current)},available:function(){return!0},enabled:function(){return!0},decreaseSize:function(){(0,ce.K9)((0,ce.K9)()-1)},increaseSize:function(){(0,ce.K9)((0,ce.K9)()+1)}};function t(t){i.nd.ui.menu.items.custom.call(this,e,t.name(),"v7.Client.Menu.FontItem"),this._id=t.id(),this.checked=r.computed(this._checked,this)}return i.extend(t.prototype,i.nd.ui.menu.items.custom.prototype,{_id:null,id:function(){return this._id},_checked:function(){return e.current()&&e.current().id()==this._id},checked:null,onClick:e.onFontClicked}),e}();function fe(){i.nd.ui.menu.items.controllers.base.apply(this,arguments)}i.extend(fe.prototype,i.nd.ui.menu.items.controllers.base.prototype,{item:function(){return this._item||(this._item=new i.nd.ui.menu.items.item(this,c.ZP.val("Menu.Fonts")).css("pri pri-fonts").bind(this.activate.bind(this))),this._item},back:function(){this._parent.back()},available:function(){return!0},enabled:function(){return!0},activate:function(e){de.U.send(new he.zT({action:"fonts"})),pe.init();var t=new i.nd.ui.menu.renderers.list(this).title(e.title()),n=t.addCustomGroup("v7.Client.Menu.FontSize");n.onLessClicked=pe.decreaseSize,n.onMoreClicked=pe.increaseSize,n=t.addGroup().items(pe.fonts),this._parent.showSubmenu(t)},_showLanguages:function(){var e=new i.nd.ui.menu.renderers.list(this).title(c.ZP.val("Menu.Items.Language"));e.addGroup().items(pe.languages),this._parent.showSubmenu(e)},hide:function(){this._parent.hide()}}),i.nd.ui.menu.items.controllers.register("fonts",fe);var me=n(85475),ge=n(10110),ve=n(79375),ye=p.get("lng");function _e(){ie.Z.translate.apply(this,arguments),this.translateLanguage=ko.computed(this._interfaceLanguage,this)}function be(e,t,n){this.code=t.id;var i="";t.original&&(i="("+t.original+")"),ie.Z.radio.call(this,e,t.title+(i?" "+i:"")),this.checked=ko.observable(n)}function we(){re.Z.base.apply(this,arguments),this._group=null}i.extend(_e.prototype,ie.Z.translate.prototype,{translateLanguageCode:ko.observable(""),_interfaceLanguage:function(){return this.translateLanguageCode().toUpperCase()}}),i.extend(be.prototype,ie.Z.language.prototype,{code:null,onClick:function(e){e&&(this.controller().item().translateLanguageCode(e.code),this.controller().uncheckAll(),this.checked(!0),setTimeout((function(){window.location="ChangeLanguage?lng="+e.code+"&returnUrl="+encodeURIComponent(window.location.pathname+window.location.search)}),30))}}),i.extend(we.prototype,re.Z.base.prototype,{item:function(){return this._item||(this._item=new _e(this,c.ZP.val("Menu.InterfaceLanguage")).css("pri pri-language").bind(this.activate.bind(this))),this._item.translateLanguageCode(ye||"en"),this._item},back:function(){this._parent.back()},available:function(){return g.Z.get(me.HE,!0)},enabled:activate:function(e){de.U.send(new he.zT({action:"interface-language"}));var t=new ve.Z.list(this).title(c.ZP.val("Menu.Items.Language"));this._group=t.addGroup().scrollable(!0);for(var n,i=g.Z.get(me.D3).sort((),r=0;r<i.length;++r)n=i[r],this._group.add(new be(this,n,n.id==ye));this._parent.showSubmenu(t)},uncheckAll:function(){ko.utils.arrayForEach(this._group.items(),()},hide:function(){this._parent.hide()}}),ge.z2("language",we),n(47070),n(38775),n(42821),n(61855);var Ce=n(91574),Ie=n(18518),Pe=(n(8346),n(61519)),xe=n(20384),Se=null;function Te(e){var t={};t[Pe.Location.All]="Dialogs.AdvancedSearch.Anywhere",t[Pe.Location.Headline]="Dialogs.AdvancedSearch.InHeadline",t[Pe.Location.Body]="Dialogs.AdvancedSearch.InBody";var n=t[e];return n?xe.nd.res.val(n):""}var ke=xe.nd.ui.dialog.resultsLocated={show:function(e,t){return Se=xe.nd.ui.dialog.createInstance(t),function(e,t){for(var n=[],i=[Pe.Location.Headline,Pe.Location.Body],r=0;r<i.length;r++){var o=i[r];n.push({id:o,name:Te(o),selected:ko.observable((e||{}).location==Pe.Location.All||o==(e||{}).location)})}var a={back:function(){Se.hide(Ie.Y.Cancel)},save:function(){Se.hide(Ie.Y.Ok,{location:a.searchLocations()})},searchLocations:ko.observable(e.location||Pe.b.DefaultLocation),checkLocation:function(){this.selected()?a.searchLocations()===Pe.Location.All&&(this.selected(!1),a.searchLocations(this.id===Pe.Location.Body?Pe.Location.Headline:Pe.Location.Body)):(this.selected(!0),a.searchLocations(Pe.Location.All))},searchTitle:e.searchTitle,isSearchEnabled:e.isSearchEnabled,search:function(){Se.hide(Ie.Y.Ok,{location:a.searchLocations(),startSearch:this.isSearchEnabled})},locations:n};!a)}(e),ke},onHide:function(e){Se.onHide(()},getLocationLabel:Te},Ae=n(30322),Ee=n(26615),Ze=n(73267),Me=n(59527),De=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,q.ZT)(t,e),t.prototype.available=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=(0,Z.get)(this,"_context.issue._issue")||(0,Z.get)(this,"_context.article.Issue.Id")||(0,Z.get)(this,"_context.issue");return e.prototype.available.apply(this,(0,q.ev)([],(0,q.CR)(t),!1)).then((function(e){return e&&i?(0,Me.yy)("onlineArticlePrinting",null,i):e}))},t.prototype.item=function(){return this._getItem("printArticleText","Menu.PrintArticleText")},t.prototype.items=function(){return this._context},t}(Ze.Z),Le=De,Ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,q.ZT)(t,e),t.prototype.available=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=(0,Z.get)(this,"_context.issue._issue")||(0,Z.get)(this,"_context.article.Issue.Id")||(0,Z.get)(this,"_context.issue");return e.prototype.available.apply(this,(0,q.ev)([],(0,q.CR)(t),!1)).then((function(e){return e&&i?(0,Me.yy)("onlinePagePrinting",null,i):e}))},t.prototype.item=function(){return this._getItem("printArticleImage","Menu.PrintArticleImage")},t.prototype.items=function(){return this._context},t}(Ze.Z),Re=Ne,Ve=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,q.ZT)(t,e),t.prototype.available=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=(0,Z.get)(this,"_context.issue._issue")||(0,Z.get)(this,"_context.article.Issue.Id")||(0,Z.get)(this,"_context.issue");return e.prototype.available.apply(this,(0,q.ev)([],(0,q.CR)(t),!1)).then((function(e){return e&&i?(0,Me.yy)("onlineAreaPrinting",null,i):e}))},t.prototype.item=function(){return this._getItem("printCustomArea","Menu.Item.PrintArea")},t.prototype.items=function(){return this._context},t}(Ze.Z),Be=Ve,Fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,q.ZT)(t,e),t.prototype.available=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=(0,Z.get)(this,"_context.issue._issue")||(0,Z.get)(this,"_context.article.Issue.Id")||(0,Z.get)(this,"_context.issue");return e.prototype.available.apply(this,(0,q.ev)([],(0,q.CR)(t),!1)).then((function(e){return e&&i?(0,Me.yy)("onlinePagePrinting",null,i):e}))},t.prototype.item=function(){return this._getItem("printPage","Menu.PrintPage")},t.prototype.items=function(){return this._context},t}(Ze.Z),Oe=Fe,ze=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,q.ZT)(t,e),t.prototype.available=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.available.apply(this,(0,q.ev)([],(0,q.CR)(t),!1)).then((function(e){return e&&g.Z.get("ui.Print").EnablePrintIssue}))},t.prototype.item=t.prototype.items=function(){return this._context},t}(Ze.Z),Ue=ze,He=ve.Z.list,je=[Le,Re,Be,Oe,Ue],We=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,q.ZT)(t,e),t.prototype.item=function(){return this._getItem("print","Menu.Print","pri pri-print")},t.prototype.available=function(e,t){var n=this;return g.Z.loaded().then((function(){return g.Z.get("ui.Print.available",!0)?n._availableControllersPresent(e,t):Promise.resolve(!1)}))},t.prototype.enabled=function(t,n){var i=this;return g.Z.loaded().then((function(){return g.Z.get("ui.Print.enable",!0)?i.available(t,n).then((function(r){return!!r&&e.prototype.enabled.call(i,t||i._view,n||i._context)})):Promise.resolve(!1)}))},t.prototype.back=function(){this._parent.back()},t.prototype.hide=function(){this._parent.hide()},t.prototype._availableControllersPresent=function(e,t){var n=this;return Promise.all(je.map((function(i){return new i(n,e||n._view,t||n._context).available()}))).then((function(e){return null==e?void 0:e.includes(!0)}))},t.prototype.activate=function(e){var t=this;if(de.U.send(new he.tp({action:this._item._name})),this._context&&(this._context.issue||this._context.article&&this._context.article.Issue)){var n=new He(this).title(e.title()),i=je.map((function(e){return new e(t,t._view,t._context)})).map((function(e){return e.available().then((function(t){return t?e:null}))}));return Promise.all(i).then((function(e){return e.filter((function(e){return null!==e})).map((function(e){return e.item()}))})).then((function(e){t._items=e,n.addGroup().items(t._items).scrollable(!1);var i=t._parent.menu().position();return t._parent.showSubmenu(n,{position:{x:(i.right+i.left)/2,y:(i.bottom+i.top)/2}})}))}return new Le(this,this._view,this._context).activate(this._view,this._context)},t}(Ze.Z),qe=We;ge.z2("print",qe),ge.z2("printArticleText",Le),ge.z2("printArticleImage",Re),ge.z2("printCustomArea",Be),ge.z2("printPage",Oe),ge.z2("printEntireIssue",Ue);var Ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,q.ZT)(t,e),t.prototype.item=function(){return this._getItem("pdfIssue","Menu.Pdf.DownloadIssueInPDF","pri pri-documentpdf")},t.prototype.items=function(){return this._context},t.prototype.available=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Promise.all([e.prototype.available.apply(this,(0,q.ev)([],(0,q.CR)(t),!1)),this.enabled()]).then((function(e){var t=(0,q.CR)(e,2),n=t[0],i=t[1];return n&&i}))},t.prototype.enabled=function(){return g.Z.getAsync("ui.PdfDownload.EnableDirectAcrobatDownload",!1).then((function(e){return e}))},t}(Ze.Z),Xe=Ge,Ye=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,q.ZT)(t,e),t.prototype.item=function(){return this._getItem("pdfPage","Menu.Pdf.DownloadPageInPDF","pri pri-documentpdf")},t.prototype.items=function(){return this._context},t.prototype.available=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Promise.all([e.prototype.available.apply(this,(0,q.ev)([],(0,q.CR)(t),!1)),this.enabled()]).then(()},t.prototype.enabled=function(){return g.Z.getAsync("ui.PdfDownload.EnableDirectAcrobatPageDownload",!1).then((function(e){return e}))},t}(Ze.Z),Ke=Ye,Je=n(58060),$e=ve.Z.list,Qe=[Ke,Xe],et=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,q.ZT)(t,e),t.prototype.item=function(){return this._getItem("pdf","Buttons.Download.Text","pri pri-download")},t.prototype.available=function(e,t){return Promise.all([Je.Z.getCurrent(),g.Z.getAsync("ui.PdfDownload.DefaultDownloadType"),this._availableControllersPresent(e,t)]).then((function(e){var t=(0,q.CR)(e,3),n=t[0],i=t[1],r=t[2];return("SiteDefault"===n.DownloadType||"DirectAcrobatDownload"===n.DownloadType)&&"DirectAcrobatDownload"===i&&r}))},t.prototype.enabled=function(t,n){var i=this;return this.available(t,n).then((function(r){return!!r&&e.prototype.enabled.call(i,t||i._view,n||i._context)}))},t.prototype.back=function(){this._parent.back()},t.prototype.hide=function(){this._parent.hide()},t.prototype._availableControllersPresent=function(e,t){var n=this;return Promise.all(Qe.map((function(i){return new i(n,e||n._view,t||n._context).available()}))).then((function(e){return null==e?void 0:e.includes(!0)}))},t.prototype.activate=function(e){var t=this;if(de.U.send(new he.tp({action:this._item._name})),this._context.issue||this._context.article&&this._context.article.Issue){var n=new $e(this).title(e.title()),i=Qe.map(().map((function(e){return e.available().then((function(t){return t?e:null}))}));return Promise.all(i).then((function(e){return e.filter((function(e){return null!==e})).map((function(e){return e.item()}))})).then((function(e){t._items=e,n.addGroup().items(t._items).scrollable(!1);var i=t._parent.menu().position();return t._parent.showSubmenu(n,{position:{x:(i.right+i.left)/2,y:(i.bottom+i.top)/2}})}))}return new Ke(this,this._view,this._context).activate(this._view,this._context)},t}(Ze.Z),tt=et;ge.z2("pdf",tt),ge.z2("pdfIssue",Xe),ge.z2("pdfPage",Ke);var nt=n(239),it=n(41723),rt=n(39752),ot=n(25881),at=n(12286),st=n(42858),ut=(0,at.mq)("".concat(st.o,"/add_meta_tags")),ct=(0,at.mq)("".concat(st.o,"/remove_meta_tags")),lt=n(46046),dt=n(55993),ht={},pt=null,ft=null;function mt(e){return e?Z.unescape(i.nd.utils.removeInvisibleHyphens(e)):e}function gt(e){for(var t=[],n=e.Blocks||[],i=0;i<n.length;i++){var r=n[i];t.push(mt(r.Text))}return t}function vt(e){if(e&&"function"==typeof e.selectVisible){var t=window.getSelection().toString().length;e.selectVisible(t>0)}}ht.show=function(e){if(e){var t=(0,ot.BF)(e.Images),n={articleTitle:mt(e.Title),articleSubtitle:mt(e.Subtitle),byline:e.Byline?mt(e.Byline):"",articleBlocks:gt(e),hasImage:!!t,imageByline:t?mt(t.Byline):"",imageUrl:t?t.Url:"",imageTitle:t?mt(t.Title):"",imageText:t?mt((t.Text||{}).Text):"",issueTitle:mt(e.Issue?e.Issue.Title:e.Source.CreatorName),shortDateString:e.Issue?e.Issue.ShortDateString:(0,dt.c6)(new Date(e.Source.Created),"d MMM yyyy"),sectionName:e.SectionName?mt(e.SectionName):"",startPage:e.PageName,endPage:e.PageName,close:function(){ht.hide()},selectVisible:ko.observable(!0),selectText:function(e){var t,n,r=document,o=i(e)[0];i.browser.iOS&&(i(e).attr("contenteditable","true"),setTimeout((,1)),window.getSelection?(n=window.getSelection(),(t=document.createRange()).selectNodeContents(o),n.removeAllRanges(),n.addRange(t)):r.body.createTextRange&&((t=document.body.createTextRange()).moveToElementText(o),t.select())}};(0,rt.WI)(ut({type:"article",title:n.articleTitle,authors:n.byline,pages:n.startPage,url:new URL("article/".concat(e.ArticleId),new URL(window.basePath,window.location.origin)),publication:e.Issue.Title,date:n.shortDateString?new Date(n.shortDateString):void 0,language:e.Language,abstract:e.Text})),(pt=i.nd.ui.dialog.getInstance())&&!pt.visible&&(pt.show({templateName:"v7.Client.Dialogs.Copy",model:n,defaultEventFlow:!0}),pt.onHide((),i.browser.android&&(n.selectVisible(!1),ft=setInterval(vt.bind(void 0,n),300)))}},ht.hide=function(){pt.hide(),(0,rt.WI)(ct())};var yt=ht,_t=n(99144),bt=n(43471),wt=n(34336),Ct=n(24458),It=n(53169),Pt=n(98106),xt=n(3284),St=n(96389),Tt=n(75587),kt=n(23431),At=n(72633),Et=n(88477),Zt=function(){function e(e,t,n,i,o,a){var s=this;this._dialog=e,this._statesStack=[],this.states=Object.freeze({publications:0,supplements:1}),this.state=r.observable(this.states.publications),this.categoryGroups=[{name:"countries",displayName:(0,dt.Rn)("Catalog.ByCountry"),categories:o},{name:"languages",displayName:(0,dt.Rn)("Catalog.ByLanguage"),categories:a}],this._allCategory={name:"all",displayName:(0,dt.Rn)("v7.Client.Catalog.all"),publicationsCount:-1},this._syntheticCategories=[{name:"favorites",displayName:(0,dt.Rn)("v7.Client.Catalog.mypublications"),publications:n,publicationsCount:n.length},{name:"recentlyRead",displayName:(0,dt.Rn)("v7.Client.Catalog.recentlyread"),publications:i,publicationsCount:i.length},this._allCategory],this.categories=r.observableArray([]),this.selectedCategoryGroup=r.observable(null),this.categorySwitchEnabled=r.observable(t.get("ui.Catalog.showCountryLanguagesToolbar",!0)),this.publicationsSortByRankEnabled=r.observable(t.get("ui.Catalog.SortToolbar.popularSortEnable",!0)),this.selectedCategory=r.observable(null),this.publications=r.observableArray([]),this.publicationsHeader=r.observable(""),this.sortBy=r.observable(),this.sortOrder=r.observable(),this.publicationsSortEnabled=r.computed((function(){return s.state()===s.states.publications&&s.selectedCategory()&&"recentlyRead"!==s.selectedCategory().name})),this.searchText=r.observable("").extend({rateLimit:{timeout:300,method:"notifyWhenChangesStop"}}),this.searchText.subscribe((function(e){return s._publicationsModel&&s._publicationsModel.search(e)})),this.hasMorePublications=r.computed((),this.onPublicationsScroll=(0,Z.throttle)((function(){return s._publicationsModel&&s._publicationsModel.hasMore()&&s._publicationsModel.getMore()}),500)}return e.prototype._pushState=function(){var e={state:this.state(),publications:this.publications(),publicationsAdapter:this._publicationsModel,publicationsHeader:this.publicationsHeader()};this._statesStack.push(e)},e.prototype._popState=function(){var e=this._statesStack.pop();if(!e)throw new Error("Unexpected use: states stack is empty");this.state(e.state),this.publicationsHeader(e.publicationsHeader),this.publications(e.publications),this._publicationsModel=e.publicationsAdapter},e.prototype.close=function(){this._dialog.hide()},e.prototype.enterSupplementsState=function(e){this._pushState(),this.state(this.states.supplements),this.publicationsHeader(e.title),this._publicationsModel=null;var t=[e].concat(e.supplements);this.publications(t)},e.prototype.exitSupplementsState=function(){this._popState()},e.prototype.selectCategory=function(e){this.state()===this.states.supplements&&this.exitSupplementsState(),this.selectedCategory(e);var t=this.sortBy()?{name:this.sortBy(),order:this.sortOrder()}:void 0;e.publications?this._publicationsModel=new kt.Z({target:this.publications,source:e.publications,pageSize:20,orderBy:t}):this._publicationsModel=new At.Z({provider:St.Rd,ViewModel:Tt.Z,target:this.publications,pageSize:20,filters:{hasCategories:e.id?[e.id]:void 0},orderBy:t}),this._publicationsModel.search(this.searchText())},e.prototype.selectCategoryGroup=function(e){this.state()===this.states.supplements&&this.exitSupplementsState(),this.selectedCategoryGroup(e),this.categories(this._syntheticCategories.concat(e.categories));var t=this.selectedCategory();t&&(0,Z.some)(this.categories(),t)||this.selectCategory(this.categories()[0])},e.prototype.sortPublications=function(e){e===this.sortBy()?this.sortOrder((0,Pt.A)(this.sortOrder())):(this.sortBy(e),this.sortOrder(It.Dm[e])),this._publicationsModel.sort(this.sortBy(),this.sortOrder())},e.prototype.selectPublication=function(e){this.state()===this.states.publications&&e.hasSupplements?this.enterSupplementsState(e):(s.Z.showNewspaper(e.cid),this.close())},e.prototype.init=function(e){var t=(void 0===e?{}:e).searchText;this.selectCategoryGroup(this.categoryGroups[0]),t&&(this.selectCategory(this._allCategory),this.searchText(t))},e}(),Mt=function(e){var t=Ce.Z.createInstance();return Q.ZP.show(),g.Z.loaded().then((function(){var n=g.Z.get("ui.Catalog.Menu.myNewspapersEnable",!0),i=[];return i.push(n?xt.Z.load().then((function(e){return(0,St.FH)(e.cids)})):Promise.resolve([])),i.push(o.Z.getLatestReadIssues().then(()),i.push((0,St.ox)()),i.push((0,St.Vb)()),Promise.all(i).then((function(n){var i=(0,q.CR)(n,4),r=i[0],o=i[1],a=i[2],s=i[3],u=new Zt(t,g.Z,(0,Z.map)(r,(function(e){return new Tt.Z(e)})),(0,Z.map)(o,(function(e){return new Tt.Z(e)})),a,s);return u.init(e),t.show({templateName:"v7.Client.Dialogs.NewCatalog",model:u,height:"100%"}),t}))})).catch(Et.logError).finally((function(){return Q.ZP.hide()}))},Dt=n(2584),Lt=n(25371);G.Z.bookmark=function(){var e={available:function(e,t){return!0},enabled:function(e,t){return!1},activate:function(e,t){return(0,q.mG)(void 0,void 0,void 0,(function(){return(0,q.Jh)(this,(function(e){switch(e.label){case 0:if(!t)throw new Error("Bookmark context undefined");return[4,Dt.Z.checkAccessForCreateBookmark()];case 1:return e.sent(),[2,it.Z.show({bookmarkContext:t})]}}))}))}};return ge.zl("bookmark",e),e}(),G.Z.copy=function(){var e={available:function(e,t){var n;return!!(null===(n=null==t?void 0:t.article)||void 0===n?void 0:n.ArticleId)},enabled:function(e,t){return!1},activate:;return ge.zl("copy",e),e}(),G.Z.comment=function(){var e={available:function(e,t){return(0,Me.yy)("comments",null,t.article&&t.article.Issue&&t.article.Issue.Id||t.issue).then((function(e){return!!g.Z.get("ui.Comments.enable",!0)&&e&&!!t&&!!t.article}))},enabled:function(e,t){return!!g.Z.get("ui.Comments.enable",!0)&&t&&t.article},activate:function(e,t,n){var i=t.article,r={articleId:i.ArticleId,userId:t.Uid,articleTitle:i.Title,articleSubtitle:i.Subtitle,contextProfileName:Lt.Z.profileId};n?_t.default.showPost(r):_t.default.show(r)}};return ge.zl("comment",e),e}(),G.Z.translate=function(){var e={available:function(e,t){return!0},enabled:function(e,t){return!1},activate:function(e,t){}};return ge.zl("translate",e),e}(),G.Z.selectTitle={available:function(e,t){return!0},enabled:function(e,t){return!0},activate:function(){return bt.Z.showDialog().then((function(e){e?Mt():wt.Z.goView(Ct.n3.StoreHub,{catalogView:Ct.N1.Catalog})}))}},G.Z.vote=function(){var e={available:function(e,t){return!0},enabled:function(e,t){return I.online()}};return ge.zl("vote",e),e}();var Nt=n(60078),Rt=n(79913),Vt=n(27670),Bt=n(74403),Ft=n(8871),Ot=n(7498);G.Z.pageView=function(){var e={available:function(e,t){return e!=w.ZP.views.pageView},enabled:function(e,t){return t},activate:function(e,t){if(Vt.Z.getActiveViewName()!==Ct.n3.TextView)return wt.Z.goView(Ct.n3.PagesView,{issue:t.article.Issue.Id,page:t.article.Page,articleId:t.article.ArticleId,bookmark:t.article.AccessBookmarkId});if(!t.article)return Bt.Z.switchToImageView();var n={issue:t.article.Issue.Id,page:t.article.Page.number,articleId:t.article.ArticleId};Bt.Z.switchToImageView(n)}};return ge.zl("pageView",e),e}(),G.Z.textView=function(){var e=function(e,t){var n=null;return t&&(t.article&&t.article.Issue&&t.article.Issue.Id?n=t.article.Issue.Id:t.issue&&t.issue.Id&&(n=t.issue.Id)),n||(n=a.Z.issue()),n},t=function(t,n){var i=e(0,n);return i?(n&&n.issueInfo?n.issueInfo.CouldPotentiallyBeRead:a.Z.coudlIssueBeRead())?Promise.resolve(!1):(0,Me.yy)("smartFlowIfIssueCouldNotBeRead",null,i).then(():Promise.resolve(!1)},n={available:function(e,t){return e===w.ZP.views.pageView&&!a.Z.isIssueRestrictedBy("SmartFlow")},enabled:function(n,i){var r=e(0,i);return r?function(n,i){var r=e(0,i);return r?(i&&i.issueInfo?i.issueInfo.CouldPotentiallyBeRead:a.Z.coudlIssueBeRead())?Promise.resolve(!0):Promise.all([(0,Me.yy)("smartFlow",null,r),t(0,i)]).then((function(e){var t=e[0],n=e[1];return!(!t&&!n)})):Promise.resolve(!1)}(0,i).then((function(e){return!!e&&(!!(i&&i.article&&r)||function(e,t){return e!==a.Z.issue()?(t&&t.issueInfo?Promise.resolve(t.issueInfo):(0,Nt.LB)(e)).then((function(e){return t&&(t.issueInfo=e),e.Layout.ValidForSmartFlow&&e.Newspaper.EnableSmart})):Promise.resolve(a.Z.layoutValidForSmartFlow()&&a.Z.enableSmart())}(r,i))})).then((function(e){return!!e&&function(e,t){return Promise.all([g.Z.loaded(),c.ZP.loaded()]).then((function(){return function(e,t){return e!==a.Z.issue()?(t&&t.issueInfo?Promise.resolve(t.issueInfo):(0,Nt.LB)(e)).then(():ae.Z.currentLanguage()||a.Z.contentLanguage()}(e,t)})).then((function(e){var t=ae.Z.language(e);return!(t&&t.isRtl())}))}(r,i)})):Promise.resolve(!1)},activate:function(n,i,r){return r=void 0===r||r,t(0,i).then((function(t){if(t){var n=e(0,i);return(0,Rt.$k)("IssueInfo","GetPageKeys",{issue:n,pageNumber:2})}})).then((function(){if(r){if(!i.article)return Bt.Z.switchToTextView();var e={issue:i.article.Issue.Id,page:Z.isNumber(i.article.Page.number)?i.article.Page.number:i.article.Page,articleId:i.article.ArticleId};return Bt.Z.switchToTextView(e)}}))}};return ge.zl("textView",n),n}(),G.Z.bookmarksView={available:function(e,t){return!0},enabled:function(e,t){return!0},activate:function(e,t){var n=function(e){var n=Vt.Z.findView(Ct.n3.Bookmarks).createParams(t);wt.Z.goView(Ct.n3.Bookmarks,n,!0)};t&&t.profileId?n(t.profileId):Ft.default.getProfileIdAsync().then(n)}},G.Z.categoryView={available:function(){return!0},enabled:function(){return!0},activate:,G.Z.topicsView={available:function(){return!0},enabled:function(){return!0},activate:function(e){void 0===e.$replaceView&&(e.$replaceView=!0),wt.Z.goView(Ct.n3.Monitors,e,e.$replaceView)}},G.Z.myAccount={available:function(){return!0},enabled:function(){return!0},activate:,G.Z.radio=function(){var e={available:function(e,t){var n,i=e===w.ZP.views.pageView&&a.Z.issue()&&!a.Z.articles().length;return t.issue&&"function"==typeof t.issue.contentLanguage&&(n=t.issue.contentLanguage()),!n&&t.article&&(n=t.article.Language),n||(n=a.Z.contentLanguage()),g.Z.get("ui.Listen.enable",!0)&&e!=w.ZP.views.radioView&&!i&&function(e){var t=g.Z.get("radio");if(t&&t.enable&&t.languages)for(var n=t.languages.length-1;n>=0;--n)if(t.languages[n]==e)return!0;return!1}(n)},enabled:function(e,t){if(!g.Z.get("ui.Listen.enable",!0))return Promise.resolve(!1);if(!I.online())return Promise.resolve(!1);var n=a.Z.issue();return!n&&t.article&&t.article.Issue&&(n=t.article.Issue.Id),!n&&t.issue&&(n=Z.isObject(t.issue)?t.issue.Id:t.issue),t.activeViewName===Ct.n3.PagesView&&n&&!a.Z.articles().length?Promise.resolve(!1):n?(0,Me.yy)("Sound",null,n):(console.warn("cannot determine tts status: issueId is unavailable in the context"),Promise.resolve(!1))},activate:function(e,t){var n,i;if(t.article)n=t.article,i=t.article.Issue;else if(t.issue&&t.issue.articles)n=t.issue.articles()[0],i={Id:t.issue.issue(),Date:t.issue.issueDate()};else if(t.page){var r=Z.filter(a.Z.articles(),{PageNumber:t.page});r.length&&(n=r[0],i={Id:t.issue})}if(n&&i){var o=n.Id,s=i.CID;(0,Ot.n9)(s).then((function(e){wt.Z.goView(Ct.n3.Radio,{articleId:o+"",country:e.country,newspaper:e.publication,issueDate:i.Date||""})}))}}};return ge.zl("listen",e),e}();var zt=n(43724),Ut=n(42777);G.Z.printArticleText=function(){var e={available:function(e,t){return t&&t.article&&t.article.Blocks},enabled:activate:function(e,t){return zt.default.printArticleText(t.article)}};return ge.zl("printArticleText",e),e}(),G.Z.printArticleImage=function(){var e={available:function(e,t){return t&&t.article},enabled:activate:function(e,t){return zt.default.printArticleImage(t.article)}};return ge.zl("printArticleImage",e),e}(),G.Z.printCustomArea=function(){var e={available:function(e,t){return e!=w.ZP.views.radioView},enabled:function(e,t){return t&&(t.article||t.issue)},activate:function(e,t){return Vt.Z.getActiveViewName()===Ct.n3.PagesView||"ArticleDialog"===e?zt.default.printCustomArea(t.article,t.page,t.issue):new Promise((function(e,n){var r=function(){return(0,q.mG)(void 0,void 0,void 0,(function(){return(0,q.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,3,4]),[4,zt.default.printCustomArea(t.article,t.article&&t.article.Page&&t.article.Page.number||t.article&&t.article.Page||t.page,t.issue&&t.issue.issue()||t.article&&t.article.Issue&&(t.article.Issue.id||t.article.Issue.Id))];case 1:return i.sent(),e(),[3,4];case 2:return i.sent(),n(),[3,4];case 3:return Ut.default.layoutUpdated(r,"unsubscribe"),[7];case 4:return[2]}}))}))};i.nd.viewer.pagesView.layoutUpdated(r),Vt.Z.getActiveViewName()!==Ct.n3.TextView?wt.Z.goView(Ct.n3.PagesView,{issue:t.article.Issue.Id,page:t.article.Page}):Bt.Z.switchToImageView({page:t.page||t.article&&t.article.Page&&t.article.Page.number})}))}};return ge.zl("printCustomArea",e),e}(),G.Z.printPage=function(){var e={available:function(e,t){return!0},enabled:function(e,t){return t&&(t.article||t.issue)},activate:function(e,t){return t.pageNumbers||(t.pageNumbers=[t.page]),zt.default.printPage(t.article,t.pageNumbers,t.issue,t.newspaperName)}};return ge.zl("printPage",e),e}(),G.Z.print=function(){var e={available:function(e,t){return t&&(t.article||t.issue)},enabled:function(e,t){return t&&(t.article||t.issue)},activate:function(e,t){}};return ge.zl("print",e),e}(),G.Z.printEntireIssue=function(){var e={available:function(e,t){return!0},enabled:function(e,t){return t&&(t.article||t.issue)},activate:function(e,t){return zt.default.printEntireIssue(t.article,t.issue,t.newspaperName)}};return ge.zl("printEntireIssue",e),e}();var Ht,jt,Wt="pdf",qt=function(e,t){return(0,Rt.$k)(Wt,"DownloadPage",{issue:e,page:t})},Gt=function(e){return(0,Rt.$k)(Wt,"DownloadIssue",{issue:e})},Xt={main:0,preview:1};function Yt(){jt&&jt.hide&&jt.hide()}function Kt(){i(Ht).off("download"),jt=null}var Jt,$t=Ht={show:function(e){(jt=Ce.Z.getInstance()).onHide(Kt);var t={templateName:"v7.Client.Dialogs.Pdf.Download",model:{thumbs:e.thumbs,buttonText:e.text,currentState:ko.observable(e.state||Xt.main),headerText:c.ZP.val("Menu.PdfDownload"),buttonsCancelText:c.ZP.val("Buttons.Cancel.Text"),buttonsDownloadText:c.ZP.val("Buttons.Download.Text"),publisherName:c.ZP.val("BrandName"),state:Xt,cancel:function(){Yt()},download:};jt.show(t)},hide:Yt,onDownload:function(e){i(Ht).on("download",e)}};function Qt(e,t){var n;t||(t=event),t.target?n=i(t.target):t.srcElement&&(n=t.srcElement);var r=n.parent();r.width(n.width()),r.height(n.height())}function en(e){Jt?Jt.attr("src",e):Jt=i("<iframe>",{id:"iFrameDownloadUrl",src:e}).hide().appendTo("body")}var tn=function(e){$t.onDownload((function(){Q.ZP.show(),Gt(e).then((function(e){$t.hide(),f.X.iOS?(Q.ZP.hide(),window.location.href=e):(en(e),Q.ZP.hide())})).catch((function(){Q.ZP.hide()}))})),$t.show({text:c.ZP.val("Menu.Pdf.DownloadIssueInPDF")})},nn=function(e,t){$t.onDownload((function(){Q.ZP.show(),qt(e,t).then((function(e){$t.hide(),f.X.iOS?(Q.ZP.hide(),window.location.href=e):(en(e),Q.ZP.hide())})).catch((function(){Q.ZP.hide()}))}));var n=[];n.push({url:(0,ot.x8)(e,180,t),imgLoaded:Qt}),$t.show({text:c.ZP.val("Menu.Pdf.DownloadIssueInPDF"),state:1,thumbs:n})};G.Z.pdfPage=function(){var e={available:function(){return!0},enabled:function(e,t){return t&&(t.article||t.issue)},activate:function(e,t){return nn(t.issue||t.article.Issue.Id,t.page||t.article.PageNumber||t.article.Page)}};return ge.zl("pdfPage",e),e}(),G.Z.pdfIssue=function(){var e={available:function(){return!0},enabled:function(e,t){return t&&(t.article||t.issue)},activate:function(e,t){return tn(t.issue||t.article.Issue.Id)}};return ge.zl("pdfIssue",e),e}(),G.Z.pdf=function(){var e={available:function(){return!0},enabled:function(){return!0},activate:function(){}};return ge.zl("pdf",e),e}();var rn=n(97226),on=n(18835),an=n(43541),sn=function(e){var t=window.open(e||"","","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600");return Promise.resolve(t)},un=n(79987),cn=w.ZP.shareTypes;function ln(e,t){return(0,q.mG)(this,void 0,void 0,(function(){var n;return(0,q.Jh)(this,(function(i){switch(i.label){case 0:return[4,Dt.Z.checkAccessForShare()];case 1:return i.sent(),[4,rn.Z.createSharingLink(e,t)];case 2:return n=i.sent(),rn.Z.clientShareBy(t,{link:n,wnd:null,text:e.text}),[2]}}))}))}G.Z.shareFacebook=function(){var e={available:function(e,t){return!0},enabled:function(e,t){return!0},activate:function(e,t){return ln(t,cn.facebook)}};return(0,Ee.zl)("shareFacebook",e),e}(),G.Z.shareTwitter=function(){var e={available:function(e,t){return!0},enabled:function(e,t){return!0},activate:;return(0,Ee.zl)("shareTwitter",e),e}(),G.Z.shareeMail=function(){var e=t={available:function(t,n){return e(n)},enabled:function(t,n){return e(n)},activate:function(e,t){return Dt.Z.checkAccessForShare().then((function(){return rn.Z.activateEmailSharing(t)})).catch((function(e){return(0,Et.logError)(e)}))}};return(0,Ee.zl)("shareeMail",t),t}(),G.Z.shareInstapaper=function(){var e={available:function(e,t){return!0},enabled:function(e,t){return!0},activate:function(e,t){return rn.Z.shareResourceUrl(t,cn.instapaper)}};return(0,Ee.zl)("shareInstapaper",e),e}(),G.Z.evernote=function(){var e={available:function(e,t){return!0},enabled:function(e,t){return!0},activate:function(e,t){return rn.Z.shareResourceUrl(t,cn.evernote)}};return(0,Ee.zl)("evernote",e),e}(),G.Z.onenote=function(){var e={available:function(e,t){return!0},enabled:function(e,t){return!0},activate:;return(0,Ee.zl)("onenote",e),e}();var dn=Object.freeze({facebook:"facebook",twitter:"twitter",google:"google"});function hn(e,t){var n,i=!1;return e.link?n=Promise.resolve(e.link):e.gift?(n=on.getGiftDirectLink(e.gift.campaignId).then((function(e){return e.url})),i=!0):n=Promise.reject(new Error("Context is invalid")),n.then((function(e){var n=new an.Z(e);if(!n.host()){var r=new an.Z(window.location.href);n.protocol(r.protocol()),n.host(r.host()),n.port(r.port())}return i&&n.replaceQueryParam("user",Ft.default.getProfileId()).replaceQueryParam("shareHost",t),n.toString()}))}function pn(e,t,n,i){return(0,q.mG)(this,void 0,void 0,(function(){var r,o,a;return(0,q.Jh)(this,(function(s){switch(s.label){case 0:return[4,hn(t,e)];case 1:if(r=s.sent(),t.isUnwantedPopup)return window.location.href=i(r),[2];o=t.wnd?Promise.resolve(t.wnd):sn(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,o];case 3:return(a=s.sent())?a.location.href=n(r):(0,A.Z)().confirm(c.ZP.get("v7.Client.Dialogs.Blocked.Popup","Your browser is blocking pop-ups! Would you like to open the URL in this window instead?")).then((),[3,5];case 4:return s.sent(),(0,Et.logAndAlertError)({resourceKey:"Errors.SharingFailed"}),[3,5];case 5:return[2]}}))}))}G.Z.clientShareFacebook=function(){var e={available:function(e,t){return!0},enabled:function(e,t){return!0},activate:function(e,t){return pn(dn.facebook,t,(function(e){return new an.Z("https://www.facebook.com/sharer/sharer.php").addQueryParam("u",e)}),(function(e){return new an.Z("https://www.facebook.com/dialog/share").addQueryParam("app_id",g.Z.get("Authentication.OAuth.client_facebook.AppId")).addQueryParam("href",e).addQueryParam("redirect_uri",window.location.href)}))}};return(0,Ee.zl)("clientShareFacebook",e),e}(),G.Z.clientShareTwitter=function(){var e={available:function(e,t){return!0},enabled:function(e,t){return!0},activate:function(e,t){return pn(dn.twitter,t,(function(e){return new an.Z("https://twitter.com/share").addQueryParam("text",t.text||"").addQueryParam("url",e)}),(function(e){return new an.Z("https://twitter.com/share").addQueryParam("text",t.text||"").addQueryParam("url",e).addQueryParam("redirect_uri",window.location.href)}))}};return(0,Ee.zl)("clientShareTwitter",e),e}(),G.Z.clientShareGoogle=function(){var e={available:function(e,t){return!0},enabled:function(e,t){return!0},activate:function(e,t){var n=function(e){return new an.Z("https://plus.google.com/share").addQueryParam("url",e)};return pn(dn.google,t,n,n)}};return(0,Ee.zl)("clientShareGoogle",e),e}(),G.Z.copyUrl=function(){var e={available:function(e,t){return!0},enabled:function(e,t){return!0},activate:function(e,t){return rn.Z.copyUrl(t)}};return(0,Ee.zl)("copyUrl",e),e}(),G.Z.share=function(){var e={available:function(e,t){return!!g.Z.get("ui.Sharing.enable",!0)},enabled:function(e,t){return!!g.Z.get("ui.Sharing.enable",!0)},activate:function(e,t){}};return(0,Ee.zl)("share",e),e}(),G.Z.mailTo={available:function(e,t){return!0},enabled:function(e,t){return!0},activate:,G.Z.openInSmartEditor=function(){var e={available:function(e,t){return g.Z.get("smartEditor.editEnabled")||!1},enabled:function(e,t){return!0},activate:function(e,t){var n=t.article.Page,i=Number(n)?n:n&&Number(n.number)&&n.number||1;o.Z.getSmartEditorUrl(t.article.Issue.Id,i).then(().catch(()}};return(0,Ee.zl)("openInSmartEditor",e),e}(),n(42517),n(99469);var fn,mn,gn,vn=n(51828),yn=n(17696),_n=n(74981),bn=n(70263),wn=n(90729),Cn=null,In=null,Pn=null,xn=null,Sn=null;function Tn(){var e=a.Z.issue();return e?function(e){return fn&&fn.issue===e||((fn=_n.Z.get("IssueInfo","GetIssueStatus",{issue:e}).finally((function(){fn.issue===e&&(fn=null)}))).issue=e),fn}(e).then(():Promise.resolve()}function kn(e,t,n,i,r){var s,u={};i?(u.bookmarkId=i,s=(0,Nt.o1)(i)):t?(u.issue=t,s=(0,Nt.LB)(t)):e&&(u.cid=e,u.issueDate=r,s=(0,Nt.GQ)(e,r)),a.Z.issue(null),a.Z.issueRestrictions({}),a.Z.onIssueLoading();var l={data:u};mn&&(0,Z.isEqual)(l,mn)||(mn=l,s.then((function(e){var t;a.Z.cid(e.Issue.CID),a.Z.issue(e.Issue.Issue),a.Z.issueDate(c.ZP.formatDate((0,vn.x)(e.Issue.IssueDate),"v7.Client.DateFormat.Issue")),a.Z.issueEngine(e.Issue.ImagesEngineVersion),o.Z.isLogin()?a.Z.coudlIssueBeRead(null===(t=e.SubscriptionsInfo)||void 0===t?void 0:t.IsFreeContent):a.Z.coudlIssueBeRead(e.CouldPotentiallyBeRead),a.Z.sponsoredBy(e.Sponsor),a.Z.bgcolor(e.Newspaper.ImageBackgroundColor),a.Z.contentName(e.Newspaper.Name),a.Z.contentIsRtl(e.Newspaper.IsRightToLeft),a.Z.contentLanguage(e.Newspaper.ISOLanguage),a.Z.contentCulture(e.Newspaper.Culture),a.Z.newspaperInfo({cid:e.Issue.CID,name:e.Newspaper.Name,mastheads:{whiteImageId:e.Newspaper.Mastheads.WhiteImageId,colorImageId:e.Newspaper.Mastheads.ColorImageId,width:e.Newspaper.Mastheads.Width,height:e.Newspaper.Mastheads.Height}}),a.Z.heights(e.Heights),a.Z.magnifierPageSizes(e.MagnifierPageSizes),a.Z.enableSmart(e.Newspaper.EnableSmart),e.Layout&&(a.Z.layoutAvailable(e.Layout.LayoutAvailable),a.Z.partialLayoutAvailable(e.Layout.PartialLayoutAvailable),a.Z.layoutVersion(e.Layout.LayoutVersion),a.Z.layoutValidForSmartFlow(e.Layout.ValidForSmartFlow)),a.Z.expungeVersion(e.Issue.ExpungeVersion),a.Z.calendarCache(e.EnableCalendarCache),e.Bookmark&&(a.Z.bookmark({bookmarkId:e.Bookmark.BookmarkId,page:e.Bookmark.PageNumber,articleId:e.Bookmark.ArticleId}),a.Z.page(e.Bookmark.PageNumber)),e.SubscriptionsInfo&&a.Z.subscriptionsInfo({singleIssuePrice:e.SubscriptionsInfo.SingleIssuePrice,basicPrice:e.SubscriptionsInfo.BasicPrice,isFreeContent:e.SubscriptionsInfo.IsFreeContent,requiredAuthenticatedUser:e.SubscriptionsInfo.RequiredAuthenticatedUser}),Cn=e.PagesInfo,xn=e.MaxUnrestrictedPageSize,Sn=e.PageSizes,gn=null,gn=En(0,!0),e.Restrictions&&((0,Me.Pu)(e.Issue.Issue,e.Restrictions),a.Z.issueRestrictions(e.Restrictions)),a.Z.onIssueLoaded()})).finally((function(){mn=null})))}function An(e,t){for(var n=t.PageKeys,i=0;i<n.length;i++){var r=n[i],o=e.getPage(r.PageNumber);o&&o.setKeyInfo(r.Key,r.ConfirmationRequired||!1)}a.Z.issueRestrictions((0,q.pi)((0,q.pi)({},a.Z.issueRestrictions()),{ShadowView:0===n.length})),n.length&&a.Z.onPageKeysLoaded()}function En(e,t){if(gn&&0===e&&t){var n=gn;return gn=null,n}gn=null;var i={};return i.issue=a.Z.issue(),i.pageNumber=e,i.preview=t||!1,a.Z.bookmark()&&(i.bookmark=a.Z.bookmark().bookmarkId),(0,Rt.$k)("IssueInfo","GetPageKeys",i)}function Zn(e){return En(0,e).then((function(e){!function(e){for(var t=e.getPages(),n=0;n<t.length;n++)t[n].setKeyInfo(null)}(a.Z.pages),An(a.Z.pages,e)}))}Pn||(Pn=bn.bookmarkDeleteSubscription.subscribe((function(e){var t=e&&e.bookmarkId;if(!Cn||!t)return null;for(var n=0;n<Cn.length;n++)if(Cn[n].Bookmarks&&Cn[n].Bookmarks.length)for(var i=Cn[n].Bookmarks.length;i--;){var r=Cn[n].Bookmarks[i];if(r.BookmarkId&&r.BookmarkId===t)return Cn[n].Bookmarks.splice(i,1),!1}}))),o.Z.onUserStateChanged((function(){var e=a.Z.issue(),t=Vt.Z.getActiveViewName(),n=t===Ct.n3.PagesView||t===Ct.n3.TextView;e&&n&&kn(null,e)}));var Mn={loadIssue:kn,requestPageKeys:Zn,requestPageConfirmation:function(e,t){return En(e.pageNumber(),t).then(()},showPage:function(e){return a.Z},getPageInfo:function(e){var t=function(e){if(!Cn)return null;if(!In||In.pagesInfo!==Cn){In={pagesInfo:Cn,itemsByPageNumber:new Array(Cn.length+1)};for(var t=0;t<Cn.length;t++)In.itemsByPageNumber[Cn[t].PageNumber]=Cn[t]}return In.itemsByPageNumber[+e]||null}(e);return t?(t.Bookmarks||(t.Bookmarks=[]),{maxUnrestrictedScale:t.MaxUnrestrictedScale,ver:t.ExpungeVersion,bookmarks:t.Bookmarks,pageSizes:Sn,maxUnrestrictedPageSize:xn}):null}};a.Z.setProvider(Mn),de.U.ofType(wn.GM.PurchaseCompleted).subscribe((function(){a.Z.issue()&&Promise.all([Zn(),Tn()]).catch(J.Z.error)}));var Dn=n(32263),Ln=(n(88901),n(88812),n(60026),n(1412),n(82641)),Nn=n(10751),Rn=n(61800),Vn=n(20384),Bn=function(){function e(){var e=this;this.loadingItems={},this.count=20,Rn.U.onSearch((function(t,n){e.reset(),e.searchParams=n}))}return e.prototype.onSearch=function(e){Vn(this).on("onsearch",e)},e.prototype.load=function(e,t){var n=this;void 0===e&&(e=0);var i=t&&t<0?e-20:e;if(this.loadingItems[e])return this.loadingItems[e];var r=this.searchParams.toFtsParams({rowNumber:i,pageSize:20,totals:(0,Z.isEmpty)(this.totals)?null:this.totals.join(",")});return this.loadingItems[e]=_n.Z.get("search","GetArticles",r,{timeout:15e3}).then((function(t){return n.processResponse(r,e,i,t)}),(function(e){throw e})),this.loadingItems[e].finally((function(){delete n.loadingItems[e]}))},e.prototype.reset=function(){this.totals=[],this.loadingItems={},this.searchParams=new Pe.b},e.prototype.processResponse=function(e,t,n,i){var r,o,a=[];if(0===n&&Vn(this).trigger("onsearch",{params:e,totalCount:i.TotalFoundArticles}),this.totals=i.Totals,!(0,Z.isEmpty)(i.Items))try{for(var s=(0,q.XA)(i.Items),u=s.next();!u.done;u=s.next()){var c=u.value,l={Type:c.RegionId?Nn.g.article:Nn.g.page,Id:c.RegionId,ProfileId:c.ProfileId,PageN1:c.Page,keepInSmartFlow:!0};a.push(l)}}catch(e){r={error:e}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(r)throw r.error}}return this.minToken=t-this.count,this.maxToken=t+this.count,{items:a,highlights:{text:i.Highlights},leftToken:this.minToken<=0?null:this.minToken,rightToken:(0,Z.isEmpty)(i.Items)||i.Items.length<20?null:this.maxToken}},e}(),Fn=new Bn,On={get:function(e){return"fts"==e?i.nd.data.AggregatedFTSResultsLoader?{ftsarticles:i.nd.data.AggregatedFTSResultsLoader,ftsarticlesitems:i.nd.data.loaders.online.articleitems}:{ftsarticles:Fn,ftsarticlesitems:i.nd.data.loaders.online.articleitems}:"monitors"==e?{monitors:i.nd.data.loaders.online.monitors}:null}};i.nd.data.loadersdispatcher=On;var zn=On,Un=(n(80119),n(42302),n(11144)),Hn=n(47211),jn=n(70839),Wn=n(54215),qn=n(18187),Gn=n(64009),Xn=n(63019),Yn=n(20384);function Kn(e){var t;return(0,q.mG)(this,void 0,void 0,(function(){var n,i,r,o,s,u,c,l,d,h,p,f,m,g=this;return(0,q.Jh)(this,(function(v){switch(v.label){case 0:if(!e)return[2];Q.ZP.show(),v.label=1;case 1:return v.trys.push([1,3,4,5]),[4,Ln.ZP.getArticle(e)];case 2:return n=v.sent(),[3,5];case 3:return i=v.sent(),J.Z.error("Cannot load article.",i),[2];case 4:return Q.ZP.hide(),[7];case 5:if(r=(0,ot.BF)(n.Images),o=Ce.Z.createInstance(),s=!0,!o||o.visible)return[2];u={articleTitle:lt.Z.removeInvisibleHyphens(n.Title),articleSubtitle:lt.Z.removeInvisibleHyphens(n.Subtitle),byline:lt.Z.removeInvisibleHyphens(n.Byline),articleBlocks:(null===(t=n.Blocks)||void 0===t?void 0:t.map((function(e){return lt.Z.removeInvisibleHyphens(e.Text)})))||[],hasImage:!!r,imageByline:lt.Z.removeInvisibleHyphens(null==r?void 0:r.Byline),imageUrl:(null==r?void 0:r.Url)||"",imageTitle:lt.Z.removeInvisibleHyphens(null==r?void 0:r.Title),imageText:lt.Z.removeInvisibleHyphens(((null==r?void 0:r.Text)||{}).Text),issueTitle:lt.Z.removeInvisibleHyphens(n.Issue.Title),shortDateString:n.Issue.ShortDateString,direction:a.Z.contentIsRtl()?"rtl":"ltr",close:function(){null==o||o.hide()}},de.U.ofType(he.GM.ContextMenu).pipe((0,jn.o)((function(){return s}))).subscribe((function(e){switch(e.payload.action){case"printArticleImage":case"printArticleText":case"printEntireIssue":case"printCustomArea":case"printPage":null==o||o.suspend()}})),de.U.ofType(he.GM.ContextMenuCompleted,he.GM.ContextMenuFailed).pipe((0,jn.o)((function(){return s}))).subscribe((function(e){switch(e.payload.action){case"printArticleImage":case"printArticleText":case"printEntireIssue":case"printCustomArea":case"printPage":null==o||o.restore()}}));try{o.onHide((function(){s=!1})),o.show({templateName:"v7.Client.Dialogs.TextView",model:u,defaultEventFlow:!0}),c=Vt.Z.findView("textview"),Lt.Z.current=new Lt.Z,Lt.Z.current.textView=c._view,n=_.assign(n,{voteLike:function(){return qn.Z.voteLike(this.ArticleId,qn.Z.contentTypes.ARTICLE)},voteDislike:function(){return qn.Z.voteDislike(this.ArticleId,qn.Z.contentTypes.ARTICLE)}}),l=Yn("#tools"),d={article:n,view:w.ZP.views.articlePopUpView,page:n.Page},Gn.ZP.isAvailable(n,Gn.ZP.mode.tools_comment)&&((h=new Gn.H(l,d)).render(),h.bindEvents()),Gn.ZP.isAvailable(n,Gn.ZP.mode.full)&&((p=new Gn.Sl(l,d)).render(),p.bindEvents(),(f=new Gn.O6(l,d)).render(),f.bindEvents()),m={controller:this,article:d.article,preview:{previewType:w.ZP.contextPreviewType.article}},document.getElementsByClassName("ati-more")[0].addEventListener("click",(function(e){g._contextMenuController=new nt.Z(d.view,m),g._contextMenuController.show({context:{left:0,top:0,width:100,height:100},position:{x:e.clientX,y:e.clientY,align:{y:Wn.x.Center,x:Wn.x.Center}}}),de.U.send(new Xn.qp)}))}catch(e){J.Z.error("Cannot open text view.",e)}return[2]}}))}))}var Jn=!0,$n=i.browser.msie,Qn={},ei=new Un.B,ti="SmartFlow",ni="Blackout",ii="page-number",ri="SmartFlowIfIssueCouldNotBeRead",oi="layout_keyChangeSubscription";function ai(){var e=this.getPage();if(e){var t=this.getImgContainer(),n=!a.Z.isIssueRestrictedBy(ni)||!e.isPotentiallyRestrictedMode();t.toggle(n),i("#toolbarContent").toggle(n)}}function si(){var e=this.getPage();e.keyChange&&(e[oi]||(e[oi]=e.keyChange(ui.bind(this)))),a.Z.coudlIssueBeReadChange&&a.Z.coudlIssueBeReadChange(ai.bind(this))}function ui(){pi(this)}function ci(){Qn[this.id.toString()]=this,pi(this)}function li(){!function(e){var t=e.getLayersContainer(),n=t[0];if(Ti(e)?t.addClass("zoom"):t.removeClass("zoom"),!Jn)for(var i=e.getWidth(),r=e.getHeight(),o=n.firstChild;o;){var a=o.nextSibling;if(o.isLayoutBlock){var s=o,u=o.block;s.style.left=Math.floor(u.X*i)+"px",s.style.top=Math.floor(u.Y*r)+"px",s.style.width=Math.ceil(u.W*i)+"px",s.style.height=Math.ceil(u.H*r)+"px"}o=a}}(this)}function di(){delete Qn[this.id.toString()],hi(this);var e=this.getPage();e&&!e[oi]&&(e[oi].dispose&&e[oi].dispose(),e[oi]=null)}function hi(e){for(var t=e.getLayersContainer()[0],n=t.firstChild;n;){var r=n.nextSibling;n.isLayoutBlock&&t.removeChild(n),n=r}e.metadata&&e.metadata.cleanup(),e.metadata=new i.nd.viewer.pagesView.metadata}function pi(e){hi(e);var t=e.getPage();t?t.isPotentiallyRestrictedMode()||function(e){return!!Qn[e.id.toString()]}(e)&&function(e,t){var n=e.getPage();if(n){var r=ki(n);if(r){var o=document.createDocumentFragment(),a=e.getWidth(),s=e.getHeight(),u=r.Articles;if(u)for(var c=0,l=u.length;c<l;c++){var d=u[c],h=d.Blocks;if(h)for(var p=0,f=h.length;p<f;p++){(x=h[p]).Article=d;var m="",g=0,v=x.BT;if(t)v===i.nd.viewer.pagesView.blockType.title?(m+=" title",g=1):v===i.nd.viewer.pagesView.blockType.link&&(m+=" link",g=2);else{if(v!==i.nd.viewer.pagesView.blockType.link||!x.LD)continue;m+=" link",g=2}var y=mi(o,x,a,s,g,m+=" contextmenu");y.setAttribute("article-id",d.Id),y.setAttribute(ii,n.pageNumber()),i(y).bind("onContextMenu",fi)}}var _=r.Links;if(_){m="link",g=2;for(var b=0,w=_.length;b<w;b++)for(var C=_[b],I=0,P=C.Rects.length;I<P;I++){var x;(x=C.Rects[I]).Link=C,mi(o,x,a,s,g,m)}}var S=e.getLayersContainer();S.append(o),Ti(e)?S.addClass("zoom"):S.removeClass("zoom"),e.metadata.render(e,r)}}}(e,t,a.Z.isIssueRestrictedBy(ti)):console.log("Page was not initialized.")}function fi(e){e.contextMenu.articleId=i(this).attr("article-id")}function mi(e,t,n,r,o,a){var s="block_"+i.nd.id(),u=document.createElement("div");u.id=s,u.style.position="absolute",u.style.overflow="hidden";var c=Jn?"%":"px";return Jn?(u.style.left=100*t.X+c,u.style.top=100*t.Y+c,u.style.width=t.W?100*t.W+c:"auto",u.style.height=t.H?100*t.H+c:"auto"):(u.style.left=Math.floor(t.X*n)+"px",u.style.top=Math.floor(t.Y*r)+"px",u.style.width=t.W?Math.ceil(t.W*n)+"px":"auto",u.style.height=t.H?Math.ceil(t.H*r)+"px":"auto"),u.style.zIndex=o||0,u.className="block "+(a||""),u.isLayoutBlock=!0,u.block=t,t.elmId=s,e&&e.appendChild(u),u}function gi(e){var t=this.block;if(t){if(t.Article){var n=t.Article,r=t.BT;if(3===r){var o=Ei().issue,a=this.getAttribute(ii),u=[(0,Rt.$k)("IssueInfo","GetPageKeys",{issue:o,pageNumber:a,smartflow:!0}),g.Z.loaded()];return Promise.all(u).then((function(e){var i=g.Z.get("ui.ArticlePopUpView.Enable",!1);void 0!==e[0].PageKeys&&e[0].PageKeys[0].IsExcluded?Ni(ti).then((function(e){e&&(i?Kn(t.Article.Id):s.Z.showArticle(n.Id,o))})):Li()||(i?Kn(t.Article.Id):s.Z.showArticle(n.Id,o))})),!1}if(4===r)return!t.LD||t.LD>0?l=n.ContOnPage:(t.LD||t.LD<0)&&(l=n.ContFromPage),l&&i.nd.viewer.pages.gotoToPage(l,n.RootArticleId||n.Id),!1}else if(t.Link){var c=t.Link;if(0==c.Type){var l;(l=parseInt(c.Target,10))>0&&i.nd.viewer.pages.gotoToPage(l)}else{var d=c.Target;1==c.Type?d.indexOf("://")<0&&(d="http://"+d):2==c.Type?d.indexOf("mailto:")<0&&(d="mailto:"+d):3==c.Type&&d.indexOf("callto:")<0&&(d="callto:"+d),window.open(d,"_blank")?de.U.send(new Hn.hn({target:d})):(0,A.Z)().confirm(ndRes.get("v7.Client.Dialogs.Blocked.Popup","Your browser is blocking pop-ups! Would you like to open the URL in this window instead?")).then((function(){window.location.href=d}))}return!1}return vi.call(this,e)}}function vi(e){var t,n,i,r,o=this.block;if(o&&o.Article&&o.Article.Blocks){var a=e.data;if(a){var s=a.getPageView();if(Ti(a)){var u=e.data;return e.data={regionRect:(t=o,n=t.Article,i=n.Blocks,r=t.PID,Si(i,r))},s.ondoubleclick(e),e.data=u,!1}}}}var yi,_i,bi,wi,Ci="mouseover";function Ii(e){var t=this,n=t.block;n&&n.Article&&(yi&&yi!==n.Article&&bi.find("[article-id="+yi.Id+"]").removeClass(Ci),_i&&(clearTimeout(_i),_i=0,bi=null),yi=n.Article,bi=i(t.parentNode),i(t).hasClass(Ci)||bi.find("[article-id="+yi.Id+"]").addClass(Ci))}function Pi(e){var t=this.block;t&&t.Article&&yi&&(_i||(_i=setTimeout(xi,300)))}function xi(){_i&&(clearTimeout(_i),_i=0),yi&&bi&&bi.find("[article-id="+yi.Id+"]").removeClass(Ci),yi=null,bi=null}function Si(e,t){for(var n=null,i=0,r=e.length;i<r;i++){var o=e[i];t&&t!==o.PID||(n?(n.L=Math.min(n.L,o.X),n.T=Math.min(n.T,o.Y),n.R=Math.max(n.R,o.X+o.W),n.B=Math.max(n.B,o.Y+o.H)):n={L:o.X,T:o.Y,R:o.X+o.W,B:o.Y+o.H})}return n}function Ti(e){return!(!e||!e.getPageView().getZoom().isDefaultZoom)}function ki(e){var t=Ai();if(t)for(var n=e.pageNumber(),i=t.Pages,r=0;r<i.length;++r)if(i[r].PageNumber===n)return i[r];return null}function Ai(){var e=wi;return e&&function(e,t){if(e&&t){var n=!0;return i.each(e,(function(e,i){if(i!==t[e])return n=!1,!1})),n}return!1}(e.context,Ei())?e:null}function Ei(){var e=i.nd.viewer.app;return{issue:e.issue(),version:e.layoutVersion(),expungeVersion:e.expungeVersion()}}function Zi(){i.nd.viewer.views.getActiveViewName()===Ct.n3.PagesView&&function(){if(!Ai()){"pending"!==ei.state()&&(ei=new Un.B);var e=Ei();e.issue&&_n.Z.get("layout",e).then((function(t){t.context=e,wi=t,function(){for(var e in Qn)pi(Qn[e]);Mi()}(),ei.resolve()}))}}()}var Mi=function(){i.nd.viewer.pages.load().then((function(){var e=i.nd.viewer.app.issue(),t=[],n=Qn;for(var r in n)if(n.hasOwnProperty(r)&&n[r].isVisible()){var o=n[r];o.metadata.updateRequired()&&t.push(o.owner.page().pageNumber())}t.length&&Di(e,t).then((function(t){var n=i.nd.viewer.app.issue();if(e===n)for(var r=i.nd.viewer.pagesViewLayout.activePages(),o=0;o<t.length;o++){var a=t[o];if(a.Issue===e){var s=Z.find(r,(function(e){return e.owner.page().pageNumber()===a.PageNumber}));s&&s.metadata.update(a,s.getPage())}else console.log("PageMetadata not corresponds with current issue. PageMeta.Issue="+a.Issue+", currentIssue="+e)}else console.log("Issue has been changed. Target IssueId="+e+", current issueId:"+n)}))}))};function Di(e,t){var n=Di.cache||(Di.cache={}),i=(new Date).getTime()-6e4;function r(t){return e+"_"+t}Z.each(n,(function(e,t){e.created<i&&delete n[t]}));var o=[],a=Z.filter(t,(function(e){var t=n[r(e)];return!t||(o.push(t.metadata),!1)}));return a.length||Promise.resolve(o),_n.Z.get("pagesMetadata",{issue:e,pageNumbers:a.join(",")}).then((function(e){var t=(new Date).getTime();return Z.each(e,(function(e){n[r(e.PageNumber)]={metadata:e,created:t},o.push(e)})),o}))}function Li(){var e=a.Z.isIssueRestrictedBy(ri);return a.Z.isIssueRestrictedBy(ti)||e&&!a.Z.coudlIssueBeRead()}function Ni(e){return!a.Z.isIssueRestrictedBy(e)||!Li()&&(o.Z.isLogin()?Ri(issue):(u.default.signIn().then((function(){return Ri(issue)})),!1))}function Ri(e){return Je.Z.getCurrent(e).then((function(t){return!(null==t||null==t||0==t.Balance&&!t.IsFree&&!t.IsPaid&&(yn.default.purchase({articleId:null,issueId:e}),1))}),()}i.required("$.nd.viewer.pages",(function(e){e.loadedChange(Zi)})),i.required("$.nd.viewer.views",(function(e){e.activeViewChanged(Zi)})),i.required("$.nd.viewer.pagesView",(function(e){e.pageContainerCreated((function(e){!function(e){e.onattached(si),e.onshowed(ci),e.ondettached(di),e.onresized(li),e.onupdated(ai);var t=e.getLayersContainer();t.addClass("layout"),$n&&t.addClass("layout_ie");var n=g.Z.get("ui.LinkArticleHighlighting.enable",!0);!i.support.touch&&n&&(t.on("mouseenter",".block",Ii),t.on("mouseleave",".block",Pi)),t.doubletap({selector:".block",tap:gi,doubleTap:vi,data:e})}(e)})),e.layoutUpdated((function(){})),e.issueLayoutUpdated((function(){var e;e=!Li(),i("#btn_TextMode").toggle(e),i("#btn_ImgMode").toggle(e),wi&&Mi()}))})),i.nd.viewer.app.issueLoading((function(){ei=new Un.B})),i.nd.viewer.pagesViewLayout={context:Ei,activePages:function(){return Qn},findArticleRect:function(e,t){var n=ki(t);if(n){var i=n.Articles;if(i)for(var r=0,o=i.length;r<o;r++){var a=i[r];if(a.Id==e||a.RootArticleId==e){var s=a.Blocks;if(s)return Si(s,a.Id)}}}return null},loaded:function(){return ei.promise()}},i.nd.viewer.pagesViewLayout;var Vi,Bi={unknown:"unknown",video:"video",externalVideo:"externalVideo",audio:"audio",gallery:"gallery",webView:"webView"},Fi={bubble:"bubble",integrated:"integrated"},Oi={unknown:"unknown",mediaContent:"mediaContent",form:"form",videoUrl:"videoUrl"};unction Ui(e,t,n,i){!e);var r,o=this;o._mediaObjectId=e.adgetData.id,o._issueId=t,o._pageNumber=e.adgetData.pageNumber,o._mediaType=(r=e.contentData.mediaType,{1:Bi.video,5:Bi.externalVideo,10:Bi.audio,20:Bi.gallery,30:Bi.webView}[r]||Bi.unknown),o._thumbnailKey=e.contentData.thumbnail?e.contentData.thumbnail.thumbnailKey:e.contentData.id+"_"+e.contentData.version+".thumbnail",o._contentData=e.contentData,o._viewData=e.viewData,o._viewType=zi(e.viewData.viewType),o._articleRegionGuid=e.adgetData.regionGuid,o._usePercent=i,o._ratioRect=function(e,t){return{x:e.x/t.width,y:e.y/t.height,width:e.width/t.width,height:e.height/t.height}}(e.adgetData.rect,n),o._pageActualWidth=n.width,o._pageActualHeight=n.height}Ui.prototype={getMediaObjectId:function(){return this._mediaObjectId},getIssueId:function(){return this._issueId},getPageNumber:function(){return this._pageNumber},getContentData:function(){return this._contentData},getViewData:function(){return this._viewData},getMediaType:function(){return this._mediaType},getViewType:function(){return this._viewType},isForArticle:function(){return!!this._articleRegionGuid},isExternalVideo:getThumbnailKey:function(){return this._thumbnailKey},getRatioRect:function(){return this._ratioRect},toRatioSize:function(e){return{width:e.width/this._pageActualWidth,height:e.height/this._pageActualHeight}},getUsePercent:function(){return this._usePercent}},Vi={mediaType:Bi,viewType:Fi,viewPanelType:Oi,viewPanelTypeRaw:{mediaContent:1,form:2,videoUrl:3},getViewTypeFromNumber:zi,getViewPanelTypeFromNumber:function(e){return{1:Oi.mediaContent,2:Oi.form,3:Oi.videoUrl}[e]||Oi.unknown},create:;var Hi=Vi,ji=null,Wi=null,qi=null,Gi=function(){return Wi},Xi=function(e){return e?e.issueid?(qi&&Z.isEqual(qi.context,e)||(qi&&"pending"===qi.state()&&qi.reject("discarded - different context requested"),(qi=new Un.B).context=e,(ji||(ji=new Un.B,_n.Z.get("richmedia","baseUrl").then(()),ji.promise()).then((function(){_n.Z.get("richmedia","adgets",e).then((,(function(e){404===e.status?qi.resolve({placements:[]}):qi.reject(e.message)}))}))),qi.promise()):Promise.reject("issue is missing"):Promise.reject("context is missing")},Yi=function(e,t,n){return g.Z.loaded().then((function(){var i=(0,C.FH)(),r=I.token();return i+"richmedia/webview?isFullScreen="+(e?"true":"false")+"&issue="+t+"&predefinedUrl="+n+"&accessToken="+encodeURIComponent(r)}))},Ki="adgetThumbnailTapped";function Ji(e,t){var n=this,r=Gi()+t.getThumbnailKey();n._containerElm=e,n._adget=t,n._$elm=null,n._$this=i(this),i("<span />").css({display:"inline-block",height:"100%","vertical-align":"middle"}).appendTo(n._containerElm),n._$elm=i("<img />").attr("src",r).css({"max-height":"100%","max-width":"100%","vertical-align":"top",cursor:"pointer"}).appendTo(n._containerElm),N.ZP.bind(n._$elm,{singleTapConfirmed:n._onSingleTapConfirmed.bind(n)})}Ji.prototype={onTapped:dispose:function(){var e=this;N.ZP.unbind(e._$elm,"singleTapConfirmed"),e._$this.off(Ki),e._$elm.remove()},_onSingleTapConfirmed:function(e){return e.event().preventDefault(),this._$this.triggerHandler(Ki,this._adget),!1}};var $i=function(e,t){return new Ji(e,t)},Qi=function(e,t,n){var r=this;r._issueId=e,r._pageNumber=t,r._mediaObjectId=n,r._linksStat=[],r.resetState(),i(window).on("unload",r.onClosed)};Qi.prototype={onShowed:function(){var e=this;e._isVisible||(e._isVisible=!0,e._lastShowTime=Z.now())},onHidden:function(){var e=this;e._mediaObjectId&&(e.calculate(Z.now(),!1),e._isVisible=!1)},onClosed:function(){this._mediaObjectId&&this.calculate(Z.now(),!0)},onLinkClicked:function(e,t){e?this._linksStat.push({url:e,type:t}):console.error("url not provided.")},calculate:function(e,t){var n=this;e||(e=Z.now()),n._isVisible&&(n._lastShowTime>0&&e-n._lastShowTime>0&&(n._accumulatedShowTime+=e-n._lastShowTime),n._lastShowTime=e,t&&n.sendData())},getDataToSend:function(){var e,t=this;return t._mediaObjectId<=0?null:(e=parseInt(Math.max(0,Math.ceil(t._accumulatedShowTime/1e3)),10),{mediaObjectId:t._mediaObjectId,totalViewTime:e,issueId:t._issueId,pageNumber:t._pageNumber,clickedLinks:t._linksStat})},sendData:function(){var e=this,t=e.getDataToSend();if(!t)throw new Error("No data to send.");_n.Z.post("richmedia","track",t).then(e.resetState.bind(e))},resetState:function(){var e=this;e._isVisible=!1,e._lastShowTime=0,e._accumulatedShowTime=0,e._linksStat.length=0}};var er=Qi,tr=function(e,t,n){er.call(this,e,t,n),this.resetState()};(tr.prototype=Object.create(er.prototype)).constructor=tr,tr.prototype._super=er.prototype,tr.prototype.onMediaPlaying=function(){this.onShowed(!0)},tr.prototype.onMediaStopPlaying=function(){this.calculate(Z.now(),!1),this._isPlaying=!1},tr.prototype.calculate=function(e,t){e||(e=Z.now());var n=this;n._isPlaying&&(n._lastPlayingTime>0&&e-n._lastPlayingTime>0&&(n._accumulatedPlayingTime+=e-n._lastPlayingTime),n._lastPlayingTime=e),n._super.calculate.call(this,e,t)},tr.prototype.onShowed=function(){var e=this,t=Z.now();e._super.onShowed.call(this),e._isPlaying||(e._isPlaying=!0,e._lastPlayingTime=t)},tr.prototype.getDataToSend=function(){var e,t=this._super.getDataToSend.call(this);return t?(e=parseInt(Math.max(0,Math.ceil(this._accumulatedPlayingTime/1e3)),10),t.VideoViewTime=e,t):null},tr.prototype.onHidden=function(){this._super.onHidden.call(this),this._isPlaying=!1},tr.prototype.resetState=function(){var e=this;e._super.resetState.call(this),e._isPlaying=!1,e._lastPlayingTime=0,e._accumulatedPlayingTime=0};var nr,ir=tr,rr=function(e){var t=e.getIssueId(),n=e.getPageNumber(),i=e.getMediaObjectId();return e.getMediaType()===Hi.mediaType.video||e.getMediaType()===Hi.mediaType.externalVideo?new ir(t,n,i):new er(t,n,i)},or="adgetPlaceHolderTapped";function ar(e,t,n,i){e.style.left=Math.floor(t.x*n)+"px",e.style.top=Math.floor(t.y*i)+"px",e.style.width=Math.ceil(t.width*n)+"px",e.style.height=Math.ceil(t.height*i)+"px"}function sr(e,t){var n=this;n._adget=e,n._elm=t,n._$elm=i(t),n._thumbnail=$i(t,e),n._thumbnail.onTapped((),n._tracker=rr(e),n._$elm.data("adgetHolder",n)}sr.prototype={onTapped:getAdget:function(){return this._adget},getElm:function(){return this._elm},get$Elm:function(){return this._$elm},updateElmPxRect:function(e,t){ar(this._elm,this._adget.getRatioRect(),e,t)},onMediaShowed:function(){this._tracker.onShowed()},onMediaClosed:function(){this._tracker.onClosed()},onVideoPlay:function(){this._tracker.onMediaPlaying()},onVideoStop:function(){this._tracker.onMediaStopPlaying()},dispose:function(){var e=this;i(e).off(or),e.onMediaClosed(),e._thumbnail.dispose(),e._$elm.remove()}},nr={create:function(e,t,n){var r,o=e.getViewType();return r=function(e,t,n,r,o){var a="adget_"+i.nd.id(),s=document.createElement("div"),u=e.getRatioRect(),c=e.getUsePercent()?"%":"px";return s.id=a,s.style.position="absolute",s.style.overflow="hidden",s.style.textAlign="center",e.getUsePercent()?(s.style.left=100*u.x+c,s.style.top=100*u.y+c,s.style.width=u.width?100*u.width+c:"auto",s.style.height=u.height?100*u.height+c:"auto"):ar(s,u,t,n),s.className="adget "+(r||""),s.style.zIndex=2,o&&o.appendChild(s),s}(e,t.getWidth(),t.getHeight(),o,n),r.setAttribute("data-adget-id",e.getMediaObjectId()),new sr(e,r)}};var ur=nr;n(25807);var cr,lr,dr,hr,pr,fr=function(e,t){var n=e.attr("id"),r=encodeURIComponent(t.fallbackFile),o={autostart:t.autoStart,file:r,controlbar:t.isVideo?"over":"bottom",provider:t.isVideo?"video":"audio"},a={allowScriptAccess:"always",wmode:"opaque"},s={id:n+"_jwplayer"},u=t.width||"180px",c=t.height||"22px",l=i("<iframe width='100%' height='100%' frameborder='0' />").appendTo(e);l.ready((function(){var e=i("<div />").attr("id",n+"obj"),r=i("<div class='flashplayer'/>").css("text-align","center");l.contents().find("body").css("margin","0").append(r),r.append(e),swfobject.embedSWF(t.jwPlayerUrl||"scripts/player.swf",e[0],u,c,"9.0.115",!1,o,a,s),t.fallbackImage&&function(e,t,n){var r=n||"Unsupported video";i("<img/>").appendTo(e).attr({src:t,title:r})}(e,t.fallbackImage,t.fallbackImageTooltip)}))},mr=n(49815),gr="controls";function vr(e,t){return i("<"+t+"/>").appendTo(e)}function yr(e,t){return!(!e||!t)&&Z.endsWith(e.toLowerCase(),t.toLowerCase())}function _r(e,t){var n=this;n._$this=i(this),n._settings=i.extend({},n._defaultSettings,t),n._$container=e,n._oldContent=e.html(),n._$video=null,n._hideVideoControlsTimeout=null}cr={isSupported:function(e){var t=this.attributes;return R.v.video[t.featureKey]&&(e[t.format]||yr(e.fallback,t.fileExt))},render:function(e,t){var n=this.attributes;vr(e,"source").attr({src:t[n.format],type:n.type})}},lr=i.extend({},cr,{attributes:{featureKey:"h264",format:"mp4",fileExt:".mp4",type:"video/mp4"}}),dr=i.extend({},cr,{attributes:{featureKey:"webm",format:"webm",fileExt:".webm",type:"video/webm"}}),hr=i.extend({},cr,{attributes:{featureKey:"ogg",format:"ogg",fileExt:".ogv",type:"video/ogg"}}),pr={videoSources:[lr,dr,hr],renderSources:function(e,t){var n=0;return Z.each(this.videoSources,(function(i){i.isSupported(t)&&(i.render(e,t),n+=1)})),n}},_r.prototype={playEventName:"play",pauseEventName:"pause",endedEventName:"ended",_defaultSettings:{styleClass:null,autoStart:!0,width:"auto",height:"auto",caption:null,mp4:null,ogg:null,webm:null,fallback:null,fallbackImage:null,fallbackImageTooltip:null},_getFallbackFlashVideoFile:function(){var e=this;return yr(e._settings.fallback,".flv")?e._settings.fallback:e._settings.mp4?e._settings.mp4:e._settings.fallback},_renderVideoSources:function(){var e=this;0===pr.renderSources(e._$video,e._settings)&&e._settings.fallback&&vr(e._$video,"source").attr("src",e._settings.fallback)},_hideVideoControls:function(){var e=this._$video[0];e.hasAttribute(gr)&&e.removeAttribute(gr)},_cancelAutoHideControls:_hideVideoControlsAfterTimeout:function(){var e=this,t=e._$video[0];e._cancelAutoHideControls(t),e._hideVideoControlsTimeout=window.setTimeout((,5e3)},_showVideoControls:function(){var e=this._$video[0];e.setAttribute(gr,gr),this._hideVideoControlsAfterTimeout(e)},_onVideoTouchedOrClicked:function(e){var t=this._$video[0];i.browser.iOS||(function(e){return!e.paused&&!e.ended&&!e.seeking&&e.readyState>=e.HAVE_FUTURE_DATA&&e.currentTime>0}(t)?t.pause():t.play(),e.stopPropagation(),e.preventDefault()),this._showVideoControls()},_onPlay:function(){var e=this;e._hideVideoControlsAfterTimeout(),e._$this.triggerHandler(e.playEventName,e)},_onPause:function(){var e=this;e._$this.triggerHandler(e.pauseEventName,e)},_onEnded:function(){var e=this;e._$this.triggerHandler(e.endedEventName,e)},_onSeeking:function(){this._cancelAutoHideControls()},_renderVideoPlayer:function(){var e,t,n,i=this;R.v.video?(i._$video=vr(i._$container,"video"),mr.ne(i._$video),(e=i._$video[0]).onplay=i._onPlay.bind(i),e.onpause=i._onPause.bind(i),e.onended=i._onEnded.bind(i),e.onseeking=i._onSeeking.bind(i),i._$video.on("touchstart click",i._onVideoTouchedOrClicked.bind(i)),i._$video.height(i._settings.height).width(i._settings.width),i._settings.autoStart&&i._$video.attr({controls:"",autoplay:""}),i._renderVideoSources()):((t=vr(i._$container,"div")).height("100%").width("100%").attr("id",i._$container.attr("id")+"_flashPlayer"),n={isVideo:!0,fallbackFile:i._getFallbackFlashVideoFile(),autoStart:i._settings.autoStart,fallbackImage:i._settings.fallbackImage,fallbackImageTooltip:i._settings.fallbackImageTooltip,width:i._settings.width,height:i._settings.height},fr(t,n))},render:function(){var e=this;e._$container.empty(),e._settings.styleClass&&e._$container.addClass(e._settings.styleClass),e._renderVideoPlayer(),e._settings.caption&&e._$container.append('<div id="video-player-caption">'.concat(e._settings.caption,"</div>"))},destroy:function(){var e=this;e._$video&&e._$video.off("click touchstart"),e._$container.html(e._oldContent)}};var br=_r;function wr(e,t){this._$playerContainer=e,this._settings=t}wr.prototype={render:function(){var e,t,n=this;R.v.audio&&R.v.audio.mp3?(e=i("<audio controls></audio>").appendTo(n._$playerContainer),mr.ne(e),e.width(n._settings.width||"100%").height(n._settings.height||"100%"),i("<source type='audio/mpeg'></source>").appendTo(e).attr("src",n._settings.file)):(t={isVideo:!1,fallbackFile:n._settings.file,autoStart:n._settings.autoStart,fallbackImage:n._settings.fallbackImage,fallbackImageTooltip:n._settings.fallbackImageTooltip,width:n._settings.width,height:n._settings.height},fr(n._$playerContainer,t))}};var Cr=wr,Ir=n(6727),Pr=function(e){var t=this;this.aId=e.ArtifactId,this.height=e.PreviewMeta.Height,this.width=e.PreviewMeta.Width,this.id=function(){return t.aId},this.imageSrc=function(){return Promise.resolve(e.PreviewUrl)},this.type=Ir.i1.image,this.caption=e.Caption},xr=n(5121),Sr=n(26783);function Tr(e,t,n){return{type:e,videoId:t,videoUrl:n}}var kr={youTube:"youTube",vimeo:"vimeo",dailyMotion:"dailyMotion",kaltura:"kaltura",blipTv:"blipTv"},Ar=[{parse:function(e){var t=e.match(/https?:\/\/(?:[0-9A-Z\-]+\.)?(?:youtu\.be\/|youtube(?:-nocookie)?\.com\S*[^\w\s\-])([\w-_]{10,15})(?=[^\w\-]|$)(?![?=&+%\w.\-]*(?:['"][^<>]*>|<\/a>))[?=&+%\w.\-]*/i);return t&&t[1]?Tr(kr.youTube,t[1],e):null}},{parse:function(e){var t=e.match(/^.+vimeo\.com\/(.*\/)?([^#\?]*)/i);return t?Tr(kr.vimeo,t[2]||t[1],e):null}},{parse:function(e){var t=e.match(/^.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/i),n=t?t[4]||t[2]:null;return n?Tr(kr.dailyMotion,n,e):null}},{parse:function(e){var t=e.match(/^.+kaltura\.com\/tiny\/(\w+)/i);return t&&t[1]?Tr(kr.kaltura,t[1],e):null}},{parse:function(e){var t=e.match(/^.+blip.tv\/?(.+-)(\d+)/i);return t&&t[2]?Tr(kr.blipTv,t[2],e):null}}],Er={youTube:{getEmbedHtml:function(e,t,n,i){var r='<iframe title="YouTube video player" class="youtube-player" type="text/html" width="'+t+'" height="'+n+'" src="https://www.youtube.com/embed/'+e.videoId+'" frameborder="0" allowFullScreen></iframe>';return i&&(r+='<div id="video-player-caption">'.concat(i,"</div>")),r}},vimeo:{getEmbedHtml:function(e,t,n,i){var r='<iframe src="https://player.vimeo.com/video/'+e.videoId+'" width="'+t+'" height="'+n+'" frameborder="0"></iframe>';return i&&(r+='<div id="video-player-caption">'.concat(i,"</div>")),r}},dailyMotion:{getEmbedHtml:function(e,t,n,i){var r='<iframe src="https://www.dailymotion.com/embed/video/'+e.videoId+'" width="'+t+'" height="'+n+'" frameborder="0"></iframe>';return i&&(r+='<div id="video-player-caption">'.concat(i,"</div>")),r}},kaltura:{getEmbedHtml:function(e,t,n,i){var r='<iframe title="Kaltura video player" class="kaltura-player" type="text/html" width="'+t+'" height="'+n+'" src="'+e.videoUrl+'" frameborder="0" allowFullScreen></iframe>';return i&&(r+='<div id="video-player-caption">'.concat(i,"</div>")),r}},blipTv:{getEmbedHtml:function(e,t,n,r){var o,a,s,u,c=new Un.B;return function(e,t){var n=new Un.B;return(0,Sr.B)("https://www.google.com/jsapi").then((function(){window.google.load(e,"1",{callback:function(){n.resolve(window.google[e])}})})),n.promise()}("feeds").then((function(l){o="//blip.tv/rss/view/"+e.videoId,(a=new l.Feed(o)).setResultFormat(l.Feed.XML_FORMAT),a.load((function(e){(s=i(e.xmlDocument).find("blip\\:embedLookup").text()||i(e.xmlDocument).find("embedLookup").text())?(u='<iframe src="//blip.tv/play/'+s+'.x?p=1" width="'+t+'" height="'+n+'" frameborder="0" allowfullscreen></iframe>',u+='<embed type="application/x-shockwave-flash" src="//a.blip.tv/api.swf#'+s+'" style="display:none"></embed>',r&&(u+='<div id="video-player-caption">'.concat(r,"</div>"))):u="<p>Unable to extract video key from the RSS feed.</p>",c.resolve(u)}))})),c.promise()}}},Zr=function(e){var t=null;return _.every(Ar,(),t},Mr=function(e,t,n,i){return e?Er[e.type].getEmbedHtml(e,t,n,i):"<p>Video URL is not supported or video URL is invalid.</p>"},Dr="socialVideoEmbedder",Lr={videoUrl:null,width:0,height:0,throwErrorOnUnsupportedUrl:!1,caption:null};function Nr(e,t){var n=this;t=t||{},n.options=i.extend({},Lr,t),n._isActive=!0,n._$element=i(e),n._oldContent=e.innerHTML,n._$element.html("<div style='border:0;'></div>"),n._$videoContainer=n._$element.children(":first"),n._$videoContainer.width("100%").height("100%"),n._embedPlayer()}i.fn[Dr]=function(e){var t=Array.prototype.slice.call(arguments,1),n=void 0;return this.each((function(){var r=i.data(this,"plugin_"+Dr);r?"string"==typeof e&&"_"!==e[0]&&"function"==typeof r[e]&&(n=r[e].apply(r,t)):(r=new Nr(this,e),i.data(this,"plugin_"+Dr,r))})),void 0===n?this:n},i.extend(Nr.prototype,{_embedPlayer:function(){var e=this;if(e._isActive){if(e._videoInfo=Zr(e.options.videoUrl),!e._videoInfo&&e.options.throwErrorOnUnsupportedUrl)throw new Error("Unsupported or invalid video URL");e._videoInfo&&Promise.resolve(Mr(e._videoInfo,e.options.width,e.options.height,e.options.caption)).then(()}},isVideoSupported:isActive:function(){return this._isActive},activate:function(){var e=this;e.isVideoSupported()&&!e._isActive&&(e._isActive=!0,e._$videoContainer.html(e._videoEmbedHtml))},deactivate:function(){var e=this;e.isVideoSupported()&&e._isActive&&(e._isActive=!1,e._$videoContainer.empty())},destroy:function(){var e=this;e._videoEmbedHtml=null,e._videoInfo=null,e._$videoContainer=null,e._$element.html(e._oldContent),e._oldContent=null,e._$element=null}});var Rr,Vr,Br,Fr,Or={};function zr(e){return parseInt(i(e.getElm()).css("zIndex"),10)+1}function Ur(e){var t;return e.empty(),t=e.attr("id")+"_stage",i("<div />").attr("id",t).appendTo(e).height("100%").width("100%")}Rr=function(){function e(e,t,n,r,o){var a,s,u=t.getAdget(),c=u.getContentData(),l={width:n||"100%",height:r||"100%",caption:o,autoStart:!0,fallbackImage:null};if(u.isExternalVideo()){if(e.socialVideoEmbedder({videoUrl:c.url,width:l.width,height:l.height,caption:l.caption}),e.socialVideoEmbedder("isVideoSupported"))return;e.socialVideoEmbedder("destroy"),l.fallback=c.url,l[c.url.split(".").pop().toLowerCase()]=c.url}else(0,Z.each)(["mp4","webm","ogg","flv"],(function(e){var t=c.videoKeys[e];l[e]=t&&Gi()+t})),l.fallback=l.flv;(a=new br(e,l)).render(),(s=i(a)).on(a.playEventName,(function(){t.onVideoPlay()})),s.on(a.pauseEventName,(function(){t.onVideoStop()})),s.on(a.endedEventName,(function(){t.onVideoStop()}))}return{present:function(t){var n,r;t.getAdget().getViewType()===Hi.viewType.integrated?e(n=Ur(t.get$Elm()),t):(r=function(t,n){var r=t.getAdget(),o=r.getContentData(),a=r.toRatioSize({width:o.width,height:o.height}),s=o.width?100*a.width+"%":"90%",u=o.height?100*a.height+"%":"90%";return{adgetHolder:t,onRender:function(n,r){n.id=t.getElm().id+"_stage",e(i(n),r.adgetHolder,s,u,o.caption)},close:}(t,n=i(document.body).createChild("div").addClass("pigal-container")),i.nd.templates.renderTo("v7.Client.Gallery.VideoPlayer",r,n),n.find(".pigal").css({"z-index":zr(t)}))}}}(),Vr={present:function(e){var t=e.getAdget().getContentData(),n=Ur(e.get$Elm()),i={file:Gi()+t.audioKey,autoStart:!0};new Cr(n,i).render()}},Br={present:function(e){var t,n,i=e.getAdget().getContentData(),r=[];(0,Z.forEach)(i.imageKeys,(function(e){t={PreviewUrl:Gi()+e,ArtifactId:e,PreviewMeta:{Height:i.height+"px",Width:i.width+"px"},Caption:i.caption||(0,Z.find)(i.files,{Name:e.split("/")[1]}).Caption},n=new Pr(t),r.push(n)})),(new xr.Z).show(r,i.imageKeys[0]).finally((function(){e.onMediaClosed()}))}},Fr={present:function(e){var t,n,i=e.getAdget(),r=i.getContentData();t=r.url.toLowerCase().indexOf("fullscreen=1")>-1,Yi(t,i.getIssueId(),r.url).then((function(e){n=t?"height="+(screen.height-100)+",width="+(screen.width-100)+",left=0,top=0":"width=600,height=600",window.open(e,"_blank",n)}))}},Or[Hi.mediaType.externalVideo]=Rr,Or[Hi.mediaType.video]=Rr,Or[Hi.mediaType.audio]=Vr,Or[Hi.mediaType.gallery]=Br,Or[Hi.mediaType.webView]=Fr;var Hr,jr={presentAdget:function(e){var t=e.getAdget(),n=Or[t.getMediaType()];if(!n)throw new Error("Unsupported media type: "+t.getMediaType());n.present(e)}},Wr=!0,qr={};function Gr(){return{issueid:a.Z.issue(),layoutVersion:a.Z.layoutVersion()}}function Xr(){return Hr&&(0,Z.isEqual)(Hr.context,Gr())?Hr:null}unction Kr(e){if(e.contentId)return Hr.contents[e.contentId];var t,n=Hr.views[e.id];return n?((t=Yr(n.panels,Hi.viewPanelTypeRaw.mediaContent))||(t=Yr(n.panels,Hi.viewPanelTypeRaw.videoUrl)),t?Hr.contents[t.refId]:null):null}function Jr(e){var t,n=Hr.views[e.id];return n&&function(e){return((0,Z.isString)(e)?e:Hi.getViewTypeFromNumber(e))===Hi.viewType.integrated}(n.viewType)&&(t=Yr(n.panels,Hi.viewPanelTypeRaw.form))?Hr.forms[t.refId]:null}function $r(e){for(var t,n,r=e.getLayersContainer()[0].firstChild;r;)t=r.nextSibling,(n=i(r).data("adgetHolder"))&&n.dispose(),r=t}unction eo(e){var t,n,i,r,o,a,s,u,c,l,d;if($r(e),t=e.getPage()){if(!t.isPotentiallyRestrictedMode()&&(n=function(e){var t=Xr();return t&&t.placements?(0,Z.filter)(t.placements,{pageNumber:e.pageNumber()}):null}(t),n&&0!==n.length)){for(i=document.createDocumentFragment(),l=0,d=n.length;l<d;l+=1)o=Kr(r=n[l]),a=Hr.views[r.id],s=Jr[r],u={width:t.width(),height:t.height()},(c=Hi.create({adgetData:r,contentData:o,viewData:a,formData:s},Gr().issueid,u,Wr)).isForArticle()||ur.create(c,e,i).onTapped(Qr);e.getLayersContainer()[0].appendChild(i)}}else console.error("Page was not initialized.")}function to(){var e;Xr()||Vt.Z.getActiveViewName()===Ct.n3.PagesView&&(e=Gr()).issueid&&Xi(e).then((function(e){Hr=e,)}),()}a.Z.pages.loadedChange(to),Vt.Z.activeViewChanged(to),a.Z.coudlIssueBeReadChange&&a.Z.coudlIssueBeReadChange((function(){(0,Z.each)(qr,(function(e){eo(e)}))})),Ut.default.pageContainerCreated((function(e){e.onshowed((function(){qr[this.id.toString()]=this,eo(this)})),e.ondettached((function(){delete qr[this.id.toString()],$r(this)})),e.onresized((function(){!function(e){if(!Wr)for(var t,n,r=e.getLayersContainer()[0],o=e.getWidth(),a=e.getHeight(),s=r.firstChild;s;)t=s.nextSibling,(n=i(s).data("adget"))&&n.updateElmPxRect(o,a),s=t}(this)}))})),n(30722);var no=n(66353),io="{0}",ro="",oo=[],ao=[{style:{fontSize:"120px",lineHeight:"120px",fontWeight:"bold",opacity:"0.01",left:"0px",top:"0px",userSelect:"none",pointerEvents:"none"}},{style:{fontSize:"120px",lineHeight:"120px",fontWeight:"bold",opacity:"0.01",right:"0px",top:"50%",userSelect:"none",pointerEvents:"none"}},{style:{fontSize:"120px",lineHeight:"120px",fontWeight:"bold",opacity:"0.01",left:"0px",bottom:"0px",userSelect:"none",pointerEvents:"none"}}];function so(e){e.textContent=(0,no.WU)(io,ro)}function uo(e){(e=(e||"").toString())&&"-"===e[0]&&(e="a"+e.substr(1)),ro!==e&&(ro=e,oo.forEach(so))}function co(e){var t=document.createElement("span");return t.style.position="absolute",t.style.maxWidth="100%",t.style.maxHeight="100%",(0,Z.each)(e.style||{},(),t}uo(I.userKey()),I.bind("tokenUpdated",(),Ut.default.pageContainerCreated((function(e){!function(e){(0,q.mG)(this,void 0,void 0,(function(){function t(e){so(e),n.appendChild(e),oo.push(e)}var n,i,r,o;return(0,q.Jh)(this,(function(a){switch(a.label){case 0:return n=e.getLayersContainer()[0],[4,g.Z.loaded().then((function(){return{enabled:g.Z.get("features.pageview.watermark.enabled",!1),format:g.Z.get("features.pageview.watermark.format","{0}")}})).catch((function(e){J.Z.error(e)}))];case 1:return i=a.sent(),r=i.enabled,o=i.format,r&&(io=o,ao.map(co).forEach(t)),[2]}}))}))}(e)}));var lo,ho="tint_keyChangeSubscription";function po(){var e=this.getPage();e.keyChange&&(e[ho]||(e[ho]=e.keyChange(fo.bind(this))))}function fo(){var e=this.getPage();if(e){var t=this.getTintContainer();e.isPotentiallyRestrictedMode()?t.show():t.hide()}}function mo(){this.getTintContainer().hide();var e=this.getPage();e&&e[ho]&&(e[ho].dispose&&e[ho].dispose(),e[ho]=null)}Ut.default.pageContainerCreated((function(e){!function(e){e.onattached(po),e.onshowed(fo),e.onresized(fo),e.onupdated(fo),e.ondettached(mo);var t=e.getTintContainer();t._tintInited||(t.addClass("page-tint subscriber-content").append(function(){if(!lo){var e="PageView.SubscriberContent";lo=i.parseHTML('<div class="pt-in"><h1><em ndres="'+e+'">'+c.ZP.get(e,"")+"</em></h1></div>")[0]}return i(lo.cloneNode(!0))}()),t._tintInited=!0,t.optimizeShowHideForSingleElement(!1),a.Z.coudlIssueBeReadChange&&a.Z.coudlIssueBeReadChange(fo.bind(e)))}(e)})),n(18679);var go=n(78964),vo=n(19237),yo=new vo.x,_o=(yo.asObservable(),a.Z.pages),bo={};function wo(){Promise.all([a.Z.hasRestriction("Blackout"),(0,go.Ik)()]).then((function(e){var t=(0,q.CR)(e,2),n=t[0],i=t[1],r=a.Z.hasVisiblePages(),o=bo[Vt.Z.getActiveViewName()]&&!0===_o.loaded(),s=n&&"Active"!==i.subscriptionStatusName||!r;Bt.Z.enable(o&&!s),Bt.Z.renderViewerPages(),yo.next()})).catch(J.Z.error)}bo[Ct.n3.TextView]=!0,bo[Ct.n3.PagesView]=!0,bo[Ct.n3.External]=!0,Vt.Z.activeViewChanging(wo),Vt.Z.activeViewChanged(wo),a.Z.layoutLoaded(wo),_o.loadedChange(wo),_o.activePagesChange(Bt.Z.onActivePagesChanged),n(78085),n(70464),a.Z.textView=a.Z.textView||{},a.Z.textView.builders={},n(78176),n(63447);var Co=n(46671),Io=n(66781),Po=(n(2175),n(79220),n(6405),n(12159),n(79647),n(83294),n(54024),n(48692),n(98689)),xo={};function So(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=i.ajax.apply(void 0,e);return function(e,t){var n,i;(null==(i=Po(t[0])?t[1]:t[0])?void 0:i.cancellableKey)&&(null===(n=xo[i.cancellableKey])||void 0===n||n.abort(),xo[i.cancellableKey]=e,e.always(())}(n,e),new Promise((function(e,t){n.then(e,t)}))}var To={getDeviceTypes:addExportRequest:function(e){var t="nd_device_export_onstarted";window[t]=function(e){To.onStarted(e)};var n="nd_device_export_add_onerror";window[n]=function(e){To.onError(e)},So({type:"GET",url:g.Z.get("ui.ExportToEReader").AddDownloadRequestUrl,data:{ticket:e,onCreated:t,onError:n},cache:!1,dataType:"jsonp"})},getExportRequestStatus:function(e){var t="nd_device_export_onprogress";window[t]=function(e,t){To.onProgress(e,t)};var n="nd_device_export_oncomplete";window[n]=function(){To.onComplete()};var i="nd_device_export_getstatus_onerror";window[i]=function(e){To.onError(e)},So({type:"GET",url:g.Z.get("ui.ExportToEReader").CheckDownloadStatusUrl,data:{requestGuid:e,onProgress:t,onCompleted:n,onError:i,ts:+new Date},cache:!1,dataType:"jsonp"})}};i.nd.deviceExport.setProvider(To);var Ao=n(98439),Eo={load:;Ao.Z.setProvider(Eo),n(6772),n(77644);var Zo=n(70737),Mo=n(58534);(0,Rt.kK)("ArchivedIssueBuyingRequired",(function(e){var t={};return e.Parameters&&(t.articleId=e.Parameters.articleId,t.issueId=e.Parameters.issueId),(0,yn.purchase)(t)}),!0),(0,Rt.kK)("ConfirmationRequired",(function(e){return(0,q.mG)(this,void 0,void 0,(function(){var t,n,i,r,o,a,s,u;return(0,q.Jh)(this,(function(c){switch(c.label){case 0:return t=(0,A.Z)(),[4,(0,go.Ik)()];case 1:return i=c.sent(),r=i.subscriptionMode,o=i.maxIssues,a=i.balance,s=i.subscriptionExpirationDateFormatted,n=r===Zo.V.Bundle?(0,dt.Rn)("Dialogs.ConfirmIssueReading"):(0,dt.Rn)("Dialogs.ConfirmIssueReading.IssuesRemaining",o,a,s),u={message:n,messageHeader:(0,dt.Rn)("Dialogs.ConfirmIssueReading.Text"),messageType:"html",noButtonTitle:(0,dt.Rn)("Buttons.Cancel"),yesButtonTitle:(0,dt.Rn)("Buttons.Confirm.Text"),noButtonClick:function(){return t.hide(Ie.Y.Cancel)},yesButtonClick:function(){return t.hide(Ie.Y.Ok)}},[2,t.custom(u).then(().then((function(e){return e?Promise.resolve():Promise.reject(new Error("User did not confirm issue reading"))}))]}}))}))}),!0),(0,Rt.kK)("ExternalAuthenticationRequired",(function(e){var t=e.Parameters,n=t.provider,i=t.authtype,r=t.command;return(0,Mo.I)({provider:n,authtype:i,context:{command:r}})}),!0),(0,Rt.kK)("EmailRequired",(function(){return(0,A.Z)().confirm(c.ZP.val("Dialogs.EmailRequired.Text"),c.ZP.val("Buttons.Cancel.Text"),c.ZP.val("Buttons.GoToMyAccount.Text")).then(()}),!0),(0,Rt.kK)("OfflineReaderIsNotInstalled",(function(e){var t=e.Parameters.Text;return(0,A.Z)().alert(t).then((function(){return Promise.reject()}))}),!0);var Do=n(38865);function Lo(e){var t={};return e.Parameters&&(t.articleId=e.Parameters.articleId,t.issueId=e.Parameters.issueId,e.Parameters.subscriptionBehaviour)?Do.Z.show(e.Parameters.subscriptionBehaviour):yn.default.purchase(t)}(0,Rt.kK)("IssueBuyingRequired",Lo,!0),(0,Rt.kK)("SubscriptionRequired",Lo,!0),(0,Rt.kK)("SubscriptionNotValid",Lo,!0),(0,Rt.kK)("AuthenticationRequired",(function(e){var t,n,i,r;return(0,q.mG)(this,void 0,void 0,(function(){var o,a,s,c;return(0,q.Jh)(this,(function(l){switch(l.label){case 0:return o=(null===(t=null==e?void 0:e.Parameters)||void 0===t?void 0:t.message)?(0,A.Z)().show(e.Parameters.message):Promise.resolve(),[4,Promise.all([o,g.Z.loaded()])];case 1:return l.sent(),(null===(n=null==e?void 0:e.Parameters)||void 0===n?void 0:n.redirectUrl)?(window.location.href=e.Parameters.redirectUrl,[2,Promise.reject()]):g.Z.get("features.purchase.prepurchase.enabled",!1)&&(null===(i=null==e?void 0:e.Parameters)||void 0===i?void 0:i.issueId)?(a=e.Parameters.issueId).length>=20?[4,(0,Nt.LB)(a)]:[3,3]:[3,7];case 2:return c=l.sent(),[3,5];case 3:return[4,(0,Nt.gr)(Number(a))];case 4:c=l.sent(),l.label=5;case 5:return(s=c).SubscriptionsInfo.IsFreeContent?[3,7]:[4,yn.default.purchase({issueId:s.Issue.Issue,articleId:null===(r=null==e?void 0:e.Parameters)||void 0===r?void 0:r.articleId})];case 6:return l.sent(),[2];case 7:return[2,u.default.signIn().then((function(){return{skipRetry:!1}}))]}}))}))}),!0),(0,Rt.kK)("ActionProhibitedForAccount",(function(e){return e&&e.Parameters?(e.Parameters.message?(0,A.Z)().show(e.Parameters.message):Promise.resolve()).then({skipRetry:!0}).finally(():Promise.reject()}),!0),n(92672),n(94167),n(53318),n(74428),n(32),(n(20384).nd.layout.provider={}).getArticleRegions=function(e){var t={articleId:e};return _n.Z.get("layout","GetArticleRegions",t)};var No=n(25747),Ro=n(20384);function Vo(){this._pageCont=null,this.showCommentsTimeoutId=null,this.articles=[],this.rendered=new Un.B}var Bo={};function Fo(e,t,n,i,r){return function(e){var t=Bo[e];return t||(Bo[e]=t=Ro.parseHTML("<div><a href='#' class='"+e+"'><em>0</em></a></div>")[0]),Ro(t.cloneNode(!0))}("lbl-comment"+(r?" neg":"")).attr({id:"block_"+Ro.nd.id(),"def-scale":i,"related-article-id":n,comments:"0",class:"block ovl-comment"}).css({position:"absolute",overflow:"visible",width:"auto",height:"auto","z-index":"3",top:100*t.Y+"%",left:100*(t.X+t.W)+"%",display:"none"})}function Oo(e,t){e.bind({"touchstart touchend mousedown mousemove mouseup":function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},touchmove:function(e){return!1}}).click((function(e){return e.stopPropagation(),_t.default.show({articleId:this.article.RootArticleId,articleTitle:this.article.Title,articleSubtitle:this.article.Subtitle}),!1})),No.Z.onCommentsMetaUpdated((function(n,i,r){i.articleId==t.RootArticleId&&(e.find("em").text(r.commentsCount>0?r.commentsCount:""),e.css("display",r.commentsCount>0?"block":"none"))})),qn.Z.onVotesMetaUpdated(qn.Z.contentTypes.ARTICLE,(function(n,i,r){i==t.RootArticleId&&e.toggleClass("neg",r.dislikesCount>r.likesCount)}))}function zo(e,t){e.rendered.then((function(){var n=e._pageCont;n?(n.cont.find(".ovl-comment[related-article-id='"+t.RootArticleId+"']").each((function(){this.article=t;var e=Ro(this);e.attr("comments")!=t.Comments&&(e.find("em").text(t.Comments),e.attr("comments",t.Comments)),t.Comments&&e.is(":hidden")&&e.show()})),Uo(e,t.RootArticleId,t.LikeIt-t.HateIt)):console.log("Can not update comment label. PageCont is not initialized.")})).catch((function(e){console.log("Failed to update comment label. Reason: "+e)}))}function Uo(e,t,n){e.rendered.then((function(){var i=e._pageCont;if(i&&t){var r=i.cont.find(".ovl-comment[related-article-id='"+t+"'] a");n<0&&!r.hasClass("neg")?r.addClass("neg"):n>0&&r.removeClass("neg")}else console.log("Either page or article is null.")})).catch((function(e){console.log("Failed to update vote. Reason: "+e)}))}Vo.prototype={_lastUpdated:new Date(1985,7,31),render:function(e,t){this._pageCont=e;for(var n=t.Articles,i=[],r=0;r<(n||[]).length;r++){var o=n[r];this.articles.push(o);for(var a=o.Blocks||[],s=0;s<a.length;s++){var u=a[s];u.BT==Ro.nd.viewer.pagesView.blockType.title&&i.push({el:e.cont.find(".title[article-id='"+o.Id+"']"),article:o,block:u,scale:e.owner.scale})}}g.Z.get("features.comments",!0)&&g.Z.get("ui.Comments.enableLabels",!0)&&function(e){for(var t=0;t<e.length;t++){var n=e[t],i=n.el,r=n.article,o=r.RootArticleId,a=Fo(0,n.block,o,n.scale,!1);Oo(a,r),i.after(a,n.article)}}(i),this.rendered.resolve()},beforeZoom:function(e,t){},afterZoom:function(e,t){var n;n=function(e,t){var n=[],i=function(e){e&&e._elm.cont.find(".ovl-comment[comments!='0']").each(()};return i(e),i(t),n}(e,t),function(e,t){if(t&&t.length){var n=e.owner.scale,i=Ro(t[0]).attr("def-scale");Ro(t).each((function(){Ro(this).css("font-size",100+75*Math.log(n/i)+"%")}))}}(this._pageCont,n)},findArticle:function(e){if(this.articles)for(var t=this.articles||[],n=0;n<t.length;n++)if(t[n].RootArticleId==e)return t[n];return null},update:function(e){for(var t=e.Articles||[],n=0;n<t.length;n++)zo(this,t[n]);this._lastUpdated=(new Date).getTime()},updateVote:updateRequired:function(){return(new Date).getTime()-this._lastUpdated>1e4},cleanup:function(){this._pageCont&&this._pageCont.cont.find(".ovl-comment").remove()}},Ro.nd.viewer.pagesView.metadata=Vo,n(35466);var Ho=n(20384);Ho.nd.lookup=function(e){var t,n,i,r,o,a=e||[],s={},u={},c="";this.Items=function(){return a},this.SortedItems=function(e,t){return function(e,t,n){var i=e.slice(0);n=!n||n>=0?1:-1;var r=Ho.getPathExp(t);return n>0?i.sort((function(e,t){var n=r(e),i=r(t);return n==i?0:n>i?1:-1})):i.sort((function(e,t){var n=r(e),i=r(t);return n==i?0:n>i?-1:1})),i}(a,e,t)},this.isVisible=function(e){return t=e,this},this.lookUpProperties=function(e){return r=e,this},this.onShowItem=function(e){return n=e,this},this.onHideItem=function(e){return i=e,this},this.onChange=function(e){return o=e,this},this.ignoreSymbols=function(e){e=new String(e||"");for(var t=0;t<e.length;t++)s[e[t].toLowerCase()]="";return this},this.filter=function(){return c};var l=function(e){return e.replace(/.?/g,(function(e,t){return(e||"").toLowerCase()in s?"":e.toLowerCase()}))};this.keyUp=function(e,s){c=(Ho(s.target).val().toLowerCase()||"").trim();for(var d=_.filter(c.replace(new RegExp(/\s+/g)," ").split(" "),(function(e){return l(e)})).join(".*"),h=0;h<a.length;h++){var p=a[h],f=r(p);if("string"==typeof f&&(f=[f]),!(f instanceof Array))return void console.log("Wrong lookUpProperties initialization.");for(var m=!1,g=0;g<f.length;g++){var v=(f[g]||"").toLowerCase();if(v){u[v]||(u[v]=l(v));var y=u[v].match(d,"i");m=m||y&&y.length}}var b=!1,w=t(p);!w&&m&&(n(p),b=!0),w&&!m&&(i(p),b=!0),b&&o&&o()}}};var jo=Ho.nd.lookup;i.nd.streams={commentsCount:"comments-count-stream",votes:"votes-stream",ping:"ping-stream"},i.nd.streams,n(36235);var Wo=null,qo=[],Go={show:function(e,t){return qo=t||[],Wo=i.nd.ui.dialog.createInstance(e),n=St.IP().then((function(e){var t=function(e){var t=Z.reduce(qo,(function(e,t){return e[t.country.toLowerCase()+"-"+t.language.toLowerCase()]=!0,e}),{});return Z.reduce(e,(function(e,n){if(!t[n.code]){var i={iso:n.country.iso,name:n.country.displayName,key:n.country.slug,id:n.country.slug},o={iso:n.language.iso,name:n.language.displayName,key:n.language.slug,id:n.language.slug};e.push({country:i,language:o,visible:r.observable(!0)})}return e}),[])}(e),o=new jo(t).isVisible((function(e){return e.visible()})).lookUpProperties(().onShowItem((function(e){e.visible(!0)})).onHideItem((function(e){e.visible(!1)})).onChange((function(){var e=Wo.htmlRoot().find("[nd-scrollable]:first"),t=e.find("li:visible:first")[0];t&&e.data().scroller.scrollToElement(t)})),a={cancel:function(){Wo.hide(Ie.Y.Cancel,{data:qo,updated:!1})},itemClick:function(){qo.push({country:this.country.iso,language:this.language.iso,checked:!0}),Wo.hide(Ie.Y.Ok,{data:qo,updated:!0})},countries:o.Items(),searchKeyUp:o.keyUp,height:r.computed(()};n(a)})),Wo;var n}};i.nd.ui.dialog.addlocale=Go;var Xo=Ce.Z.addSection={},Yo=Ko=[{name:Yo("Sun"),propertyName:"sunday"},{name:Yo("Mon"),propertyName:"monday"},{name:Yo("Tue"),propertyName:"tuesday"},{name:Yo("Wed"),propertyName:"wednesday"},{name:Yo("Thu"),propertyName:"thursday"},{name:Yo("Fri"),propertyName:"friday"},{name:Yo("Sat"),propertyName:"saturday"}],Jo={show:function(e,t){if(t&&e){var n=Ce.Z.createInstance(t);return function(e,t){return function(e){var t={issue:e.latestIssue.key,cid:e.cid},n=ae.Z.currentLanguage();return n&&(t.lng=n),_n.Z.get("Metadata/GetSectionsMeta",t).then((function(t){var n=Z.map(t,(function(t){for(var n=[],i=[],o=function(e){if(e.length)if(e.length>2)n.push(e[0]+"-"+e[e.length-1]);else for(var t=0;t<e.length;t++)n.push(e[t])},a=0;a<Ko.length;a++){var s=Ko[a];t[s.propertyName]?(i.push(s.name),a+1==Ko.length&&o(i)):(o(i),i=[])}return{title:t.name,cid:e.cid,issueName:e.name,sectionName:t.name,visible:r.observable(!0),meta:n.join(", ")}}));if(function(e){var t;return e&&1==e.length&&!e[0].name&&!((t=e[0]).sunday||t.monday||t.tuesday||t.wednesday||t.thursday||t.friday||t.saturday)}(n)){var i=c.ZP.val("Dialogs.AddSection.EmptySectionTitle");n[0].sectionName=n[0].title=i}return n})).catch((function(){return[]}))}(t).then((function(n){var i=new jo(n).isVisible((function(e){return e.visible()})).ignoreSymbols(g.Z.get("ui.FeedSettings.lookupIgnoreSymbols")||{}).lookUpProperties((function(e){return e.meta?[e.title,e.meta]:[e.title]})).onShowItem((function(e){e.visible(!0)})).onHideItem((function(e){e.visible(!1)})).onChange((function(){var t=e.htmlRoot().find("[nd-scrollable]:first"),n=t.find("li:visible:first")[0];n&&t.data().scroller.scrollToElement(n)})),r={back:itemClick:function(t,n){r.loading||e.hide(Ie.Y.Ok,{section:this})},title:t.shortName,sections:i.Items(),searchKeyUp:i.keyUp};return r}))}(n,e).then((function(e){n.show({templateName:"v7.Client.Dialogs.AddSection.Issue",model:e,focusElement:"input:text",name:"feedsettings-issue",freezeTop:!0})})),n}}},$o=Xo.issue=Jo;function Qo(e){return Z.map(e,(function(e){return{id:e.id,iso:e.iso,name:e.displayName,sources:e.publicationsCount,visible:r.observable(!0)}}))}var ea={show:function(e){if(e){var t=Ce.Z.createInstance(e);return function(e){return Promise.all([g.Z.loaded(),St.ox()]).then((function(t){t[0];var n=t[1],r=lt.Z.createFilter(g.Z.get("ui.FeedSettings.lookupIgnoreSymbols")),o={back:function(){e.hide(Ie.Y.Cancel)},countryClick:function(t){Xo.main.show(e,{mode:w.ZP.addSectionModes.byCountry,categoryId:t.id}).onHide((function(t,n){n&&n.status==Ie.Y.Ok&&e.hide(Ie.Y.Ok,n)}))},countries:Qo(n),searchKeyUp:function(e,t){var n=i(t.target).val();Z.forEach(o.countries,()}};return o}))}(t).then((function(e){t.show({templateName:"v7.Client.Dialogs.AddSection.Countries",model:e,focusElement:"input:text",name:"feedsettings-countries",freezeTop:!0})})),t}}},ta=Xo.countries=ea;var na={show:function(e){if(e){var t=Ce.Z.createInstance(e);return function(e){return St.Vb().then((function(t){t=function(e){return Z.map(e,(function(e){return{id:e.id,iso:e.iso,name:e.displayName,sources:e.publicationsCount,visible:r.observable(!0)}}))}(t);var n=new jo(t).isVisible((function(e){return e.visible()})).lookUpProperties(().ignoreSymbols(g.Z.get("ui.FeedSettings.lookupIgnoreSymbols")||{}).onShowItem((function(e){e.visible(!0)})).onHideItem((function(e){e.visible(!1)}));return{back:function(){e.hide(Ie.Y.Cancel)},langClick:function(t){Xo.main.show(e,{mode:w.ZP.addSectionModes.byLanguage,categoryId:t.id}).onHide((function(t,n){n&&n.status==Ie.Y.Ok&&e.hide(Ie.Y.Ok,n)}))},languages:n.Items(),searchKeyUp:function(e,t){n.keyUp.bind(this)(e,t)}}}))}(t).then((function(e){t.show({templateName:"v7.Client.Dialogs.AddSection.Languages",model:e,focusElement:"input:text",name:"feedsettings-languages",freezeTop:!0})})),t}}},ia=Xo.languages=na,ra=n(42854),oa={show:function(e,t){if(e&&t&&t.mode){var n=Ce.Z.createInstance(e);return function(e,t){return xt.Z.load().then((function(e){return St.FH(e.cids)})).then((function(n){var o=Z.map(n,(function(e){return new Tt.Z(e)})),a=c.ZP.val("Dialogs.AddSection.Header")||"",s={mode:t.mode,pageSize:20,modes:w.ZP.addSectionModes,searchText:r.observable(""),sortBy:r.observable(),sortOrder:r.observable(),title:a.length>13?a.slice(0,10)+"...":a,cancel:function(){e.hide(Ie.Y.Cancel)},categoryClick:function(){var t=i(i.extend({},this)).removeProp("visible")[0];e.hide(Ie.Y.Ok,{section:t})},byCountryClick:function(){ta.show(e).onHide((function(t,n){n&&n.status==Ie.Y.Ok&&e.hide(Ie.Y.Ok,n)}))},byLanguageClick:function(){ia.show(e).onHide((function(t,n){n&&n.status==Ie.Y.Ok&&e.hide(Ie.Y.Ok,n)}))},publications:r.observableArray([]),canLoadMorePublications:r.observable(!0)},u=new i.nd.ObservableCollectionNew([]);u.setPageSize(20);var l=new ra.Z({provider:St.Rd,pageSize:s.pageSize}),d=[];switch(l.stream.subscribe((function(e){if(s.canLoadMorePublications(l.hasMore()),null!==e)Z.forEach(e,();else{var n=t.mode!==w.ZP.addSectionModes.main||""!==s.searchText()||s.sortBy()?[]:o;s.publications(n)}})),s.onScrolled=Z.throttle((function(){l.getMore()}),300),s.searchKeyUp=Z.debounce((function(e,t){var n=i(t.target).val();s.searchText(n),l.filter({searchText:n,hasCategories:d}),u.setFilter(s.searchText(),"text").render()}),300),s.issueClick=function(t,n){if(!s.loading){s.loading=!0;var r=i(n.currentTarget).css("opacity","0.4");$o.show(this,e).onShow(().onHide((function(t,n){n&&n.status==Ie.Y.Ok&&e.hide(Ie.Y.Ok,n)}))}},s.sort=function(e){var t=s.sortBy();t&&t===e?s.sortOrder(Pt.A(s.sortOrder())):(s.sortBy(e),s.sortOrder(It.Dm[e])),l.sort(s.sortBy(),s.sortOrder())},t.mode){case w.ZP.addSectionModes.main:var h=Z.map(t.categories,(function(e){return Z.extend({},e,{visible:r.observable(!0)})}));u.reset().updateSource(h).render(),s.categories=u.items,l.filter({});break;case w.ZP.addSectionModes.byCountry:case w.ZP.addSectionModes.byLanguage:d=[t.categoryId],l.filter({hasCategories:d});break;default:throw new Error("Unexpected mode: "+t.mode)}return s}))}(n,t).then((function(e){n.show({templateName:"v7.Client.Dialogs.AddSection",model:e,focusElement:"input:text",name:"feedsettings-main",height:"100%"})})),n}}},aa=(Xo.main=oa,n(19970)),sa=n(11780),ua=n(81268);function ca(e,t,n){return(0,q.mG)(this,void 0,Promise,(function(){return(0,q.Jh)(this,(function(i){return[2,new Promise((function(i,r){var o=!1,a=null==n?void 0:n.pipe((0,ua.P)()).subscribe((function(e){o=e}));if(e())return null==a||a.unsubscribe(),i();var s=setInterval((function(){return o?(clearInterval(s),null==a||a.unsubscribe(),r()):e()?(clearInterval(s),null==a||a.unsubscribe(),i()):void 0}),t)}))]}))}))}function la(e,t,n){return new Promise((function(i,r){var o=null==n?void 0:n.pipe((0,ua.P)()).subscribe((),a=e;if(e.matches(t))return null==o||o.unsubscribe(),i(a);if(a=e.querySelector(t))return null==o||o.unsubscribe(),i(a);var s=new MutationObserver((function(e){e.find((function(e){for(var n=0;n<e.addedNodes.length;n++){var i=e.addedNodes[n];if(1===i.nodeType&&i.matches(t)){a=i;break}if(1===i.nodeType&&(a=i.querySelector(t)))break}return!!a}))&&(s.disconnect(),null==o||o.unsubscribe(),i(a))}));s.observe(e,{childList:!0,subtree:!0})}))}var da=function(){function e(){}return e.prototype.init=function(){return(0,q.mG)(this,void 0,void 0,(function(){var e;return(0,q.Jh)(this,(function(t){switch(t.label){case 0:return[4,g.Z.loaded()];case 1:return t.sent(),e=g.Z.get("UI.Video.SendToNews"),this._enabled=(null==e?void 0:e.Enabled)||!1,this._enabled?(this._scriptUrl=e.ScriptUrl,this._fk=e.FK,this._cid=e.CID,this._renderDependencies=e.Presentation.RenderDependencies.split(",").map((function(e){return e.trim()})),this._visibilitySelector=e.Presentation.VisibilitySelector,this._staticParentSelector=e.Presentation.StaticParentSelector,this._embeddedWidth=e.Presentation.Embedded.Width,this._floatWidth=e.Presentation.Float.Width,this._float=e.Presentation.Float.Float,[2,this]):[2,this]}}))}))},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"renderDependencies",{get:function(){return this._renderDependencies},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scriptURL",{get:function(){return"".concat(this._scriptUrl,"?fk=").concat(this._fk,"&cid=").concat(this._cid)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"classes",{get:enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"embeddedWidth",{get:function(){return this._embeddedWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"floatWidth",{get:function(){return this._floatWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"float",{get:function(){return this._float},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibilitySelector",{get:function(){return this._visibilitySelector},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"staticParentSelector",{get:function(){return this._staticParentSelector},enumerable:!1,configurable:!0}),e}(),ha=function(){eturn Object.defineProperty(e.prototype,"isFloat",{get:enumerable:!1,configurable:!0}),e.prototype.init=function(){return(0,q.mG)(this,void 0,void 0,(function(){var e;return(0,q.Jh)(this,(function(t){switch(t.label){case 0:return e=this,[4,(new da).init()];case 1:return e.cfg=t.sent(),this.cfg.enabled?[4,Promise.all(this.cfg.renderDependencies.map((function(e){return la(document.body,e)})))]:[2];case 2:return t.sent(),window.addEventListener("resize",this.onResize.bind(this)),Vt.Z.activeViewChanging(this.onActiveViewChanging.bind(this)),Vt.Z.activeViewChanged(this.onActiveViewChanged.bind(this)),[4,this.render()];case 3:return t.sent(),[2]}}))}))},e.prototype.render=function(){return(0,q.mG)(this,void 0,void 0,(function(){var e;return(0,q.Jh)(this,(function(t){switch(t.label){case 0:return this.stnPlayerDiv||(this.stnPlayerDiv=document.createElement("div"),this.stnPlayerDiv.id="stnPlayer",(e=this.stnPlayerDiv.classList).add.apply(e,(0,q.ev)([],(0,q.CR)(this.cfg.classes),!1)),document.body.append(this.stnPlayerDiv)),[4,this.onVisibilityChangeHandler(!1)];case 1:return t.sent(),[4,this.setupCloseButton()];case 2:return t.sent(),[4,this.onResize()];case 3:return t.sent(),this.setupMonitor(),[2]}}))}))},e.prototype.onActiveViewChanging=function(e,t){return(0,q.mG)(this,void 0,void 0,(function(){return(0,q.Jh)(this,(function(e){return t!==Ct.n3.PagesView&&t!==Ct.n3.TextView&&(this.stnPlayerDiv.style.display="none"),[2]}))}))},e.prototype.onActiveViewChanged=function(e,t){return(0,q.mG)(this,void 0,void 0,(function(){return(0,q.Jh)(this,(function(e){return t!==Ct.n3.PagesView&&t!==Ct.n3.TextView||(this.stnPlayerDiv.style.display=null,this.setupMonitor()),[2]}))}))},e.prototype.onResize=function(){return(0,q.mG)(this,void 0,void 0,(function(){var e,t,n,i=this;return(0,q.Jh)(this,(function(r){switch(r.label){case 0:return this.isFloat?(e=function(){return i.cfg.renderDependencies.includes("#Panel_thumbsViewPanel")?document.querySelector("#Panel_thumbsViewPanel").offsetHeight:1},t=function(){if(i.cfg.renderDependencies.includes("#Panel_thumbsViewPanel")){var e=document.querySelector("#Panel_thumbsViewPanel");return+(0,q.CR)(window.getComputedStyle(e).height.match(/\d*/),1)[0]}return 1},(n=function(){var t=window.innerHeight-i.stnPlayerDiv.offsetHeight-e();i.stnPlayerDiv.style.cssText="z-index: 100; position: relative; width: ".concat(i.cfg.floatWidth,"px; top: ").concat(t,"px; float: ").concat(i.cfg.float,";")})(),[4,ca((function(){var n=9*i.cfg.floatWidth/16;return(e()>0||t()>0)&&i.stnPlayerDiv.offsetHeight>.9*n}),500)]):[3,2];case 1:return r.sent(),n(),[3,3];case 2:this.stnPlayerDiv.style.cssText="width: ".concat(this.cfg.embeddedWidth,"px;"),r.label=3;case 3:return[2]}}))}))},e.prototype.setupCloseButton=function(){return(0,q.mG)(this,void 0,void 0,(function(){var e;return(0,q.Jh)(this,(function(t){switch(t.label){case 0:return[4,la(this.stnPlayerDiv,"stn-player")];case 1:return t.sent(),this.stnPlayerDiv.querySelector("#stnCloseButton")||((e=document.createElement("div")).id="stnCloseButton",e.onclick=this.closeButton.bind(this),this.stnPlayerDiv.prepend(e)),[2]}}))}))},e.prototype.setupMonitor=function(){var e;return(0,q.mG)(this,void 0,void 0,(function(){var t,n,i;return(0,q.Jh)(this,(function(r){switch(r.label){case 0:t=(0,q.pi)((0,q.pi)({},Y),{partialVisibility:!0,intervalDelay:500,onChange:this.onVisibilityChangeHandler.bind(this)}),this._cancellationToken.next(!0),null===(e=this.visibilitySensor)||void 0===e||e.stopWatching(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,la(document.body,this.cfg.visibilitySelector,this._cancellationToken)];case 2:return n=r.sent(),this.visibilitySensor=new K(n,t),this.visibilitySensor.startWatching(),[3,4];case 3:return i=r.sent(),J.Z.log("[SendToNews] Error: ".concat(i)),[3,4];case 4:return[2]}}))}))},e.prototype.onVisibilityChangeHandler=function(e){return(0,q.mG)(this,void 0,void 0,(function(){var t,n,i;return(0,q.Jh)(this,(function(r){switch(r.label){case 0:return e?[4,la(document.body,this.cfg.staticParentSelector)]:[3,2];case 1:return t=r.sent(),this.moveStnPlayerDiv(t),[3,3];case 2:if(this.wasDestroyed)return[2];this.moveStnPlayerDiv(document.body),r.label=3;case 3:return(n=this.stnPlayerDiv.querySelector("#stnCloseButton"))&&(n.style.visibility=this.isFloat?"":"hidden"),this.stnScript?[3,5]:(i=this,[4,(0,Sr.B)(this.cfg.scriptURL)]);case 4:i.stnScript=r.sent(),r.label=5;case 5:return[4,this.onResize()];case 6:return r.sent(),[2]}}))}))},e.prototype.closeButton=function(){var e;this._cancellationToken.next(!0),null===(e=this.visibilitySensor)||void 0===e||e.stopWatching(),this.onVisibilityChangeHandler(!0),this.wasDestroyed=!0},e.prototype.moveStnPlayerDiv=function(e){e!==this.stnPlayerDiv.parentElement&&e.appendChild(this.stnPlayerDiv)},e}(),pa=new ha,fa=pa.init.bind(pa),ma=n(30070),ga=n(32249),va=n(60581),ya=n(10426),_a=n(81867),ba=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,q.ZT)(t,e),t.prototype._getProfileOrRedirectIfChanged=function(e){var t=this;return e&&e.profileId?Promise.all([g.Z.loaded(),c.ZP.loaded()]).then(().catch((function(e){return e&&J.Z.error(e),Promise.resolve(null)})).then((function(n){return n?(n.profileId===Ft.default.getProfileId()&&wt.Z.updateState({currentProfile:!0}),n):e.currentProfile?t._redirectIfProfileIdWasChanged(e):Promise.reject(new Error("Cannot load a profile for the specified profileId '".concat(e.profileId,"'")))})):Promise.reject(new Error("config.profileId is not specified"))},t.prototype._redirectIfProfileIdWasChanged=function(e){return Ft.default.load(!0).then((function(){return e.profileId!==Ft.default.getProfileId()})).then((function(t){return t?Promise.reject({redirect:function(){e.profileId=Ft.default.getProfileId(),wt.Z.goView(e.viewName,e,!0,!0,!0)}}):Promise.reject(new Error("Cannot load a profile for the specified profileId '".concat(e.profileId,"'")))}))},t}(ya.Z),wa=ba,Ca=n(53890),Ia=n(13395),Pa=n(48921),xa=n(14886),Sa=n(30724);function Ta(e,t){var n=t[e];return n&&"all"!==n&&"bookmarks"!==n}var ka,Aa,Ea,Za,Ma,Da=function(e){function t(){var t=e.call(this)||this;return t.viewName=Ct.n3.Bookmarks,t._onlineListLoader=Ca.Z,t._itemPreviewSizeFunctionConfig="ui.Views.Bookmarks.itemPreviewSizeFunction",t._topBarConfig={starEnable:!0,backEnable:!0,settingsEnable:!0,actionMenuOptions:[w.gu.lang],showBookmarkName:!0,headerClass:"toolbar-bookmarkstitle",newPostButtonVisible:!1},t}return(0,q.ZT)(t,e),t.prototype.show=function(e){var t=this;Lt.Z.current=this._context,this._context.profileId=e.profileId,(0,Sa.Hy)({showIssueInfo:!0});var n=(0,Z.assign)({showSections:!1,updatePreviewPanel:!1,historyTokenType:w.M4.left},e);e&&e.ignoreDataReset||this._contentProvider.reset();var i=new Promise((function(e,n){t._contentProvider.onLoadOnce(e).onErrorOnce(n)}));return this._builder.reset(),this._controller.enable().show(n),i},t.prototype.reset=t.prototype.getResetParams=t.prototype.getTopBarConfig=function(){return this._topBarConfig},t.prototype.showView=function(e){return this.show(e)},t.prototype.createParams=function(e){return{profileId:e.profileId,collection:e.collection&&encodeURIComponent(e.collection),collectionId:e.collectionId,refViewName:e.refViewName}},t.prototype.registerRoutes=function(t){var n=this,i=function(t){return e.prototype._getProfileOrRedirectIfChanged.call(n,t).then((function(){return function(e){return e.profileId&&e.collection&&!e.collectionId?Pa.vS(e.profileId).then((function(t){var n=(0,Z.find)(t,(function(t){return t.slug===e.collection}));n&&(e.collectionId=n.id)})):Promise.resolve()}(t)})).then((function(){Ca.Z.setSearchParams(t),n.saveViewConfig(t),n._topBarConfig.newPostButtonVisible=g.Z.get("post.enabled")&&t.profileId===Ft.default.getProfileId()}))};t.addRoute({name:"bookmarks2_channel",template:"@{profileId}/collection/{collection}/",defaults:{viewName:Ct.n3.Bookmarks},constraints:{collection:Ta,viewName:new xa.i(Ct.n3.Bookmarks)},executeWith:function(e){return i(e).then((function(){e.collectionId||wt.Z.goView(Ct.n3.Profile,{profileId:e.profileId})}))}}).addRoute({name:"bookmarks4_channel",template:"@{profileId}/bookmarks/{collection}/",defaults:{viewName:Ct.n3.Bookmarks},constraints:{collection:Ta,viewName:new xa.i(Ct.n3.Bookmarks)},executeWith:i}).addRoute({name:"bookmarks1_channel",template:"@{profileId}/collections",defaults:{viewName:Ct.n3.Bookmarks},constraints:{viewName:new xa.i(Ct.n3.Bookmarks)},executeWith:i})},t.prototype._createView=function(){var t=e.prototype._createView.call(this);return Ia.Z.linkView(t),t},t.prototype._onViewStateChanged=function(e,t){if(t.id){var n={itemId:t.id,type:t.type,expanded:t.expanded,articleHistoryToken:t.articleHistoryToken||0,currentArticlePosition:t.articlePosition};wt.Z.updateState(n)}},t}(wa),La=new Da,Na=n(57136),Ra=new(function(e){function t(){var t=e.call(this)||this;return t.viewName=Ct.n3.Bookmark,t._itemPreviewSizeFunctionConfig="ui.Views.Bookmark.itemPreviewSizeFunction",t}return(0,q.ZT)(t,e),t.prototype.getTopBarConfig=t.prototype.registerRoutes=function(e){e.addRoute({name:"bookmarkLink",template:"bookmark/{bookmark}",defaults:{viewName:Ct.n3.Bookmark},constraints:{viewName:new xa.i(Ct.n3.Bookmark)},executeWith:function(e){return bn.getBookmark(e.bookmark).then(().then((function(t){return Promise.reject({redirect:function(){wt.Z.goView(Ct.n3.Profile,{profileId:t,bookmarkId:e.bookmark})}})}))}})},t}(ya.Z)),Va=n(7287),Ba=n(18840),Fa={articleId:"",load:function(){return Promise.resolve({items:[{Data:null,Id:this.articleId,Type:Nn.g.article}],anchorId:this.articleId})}},Oa=function(e){function t(){var t=e.call(this)||this;return t._onlineListLoader=Fa,t._itemPreviewSizeFunctionConfig="ui.Views.Bookmark.itemPreviewSizeFunction",t}return(0,q.ZT)(t,e),t.prototype.show=function(e){var t=this;Lt.Z.current=this._context;var n=(0,Z.assign)({showIssueInfo:!1,showSections:!1,updatePreviewPanel:!1,historyTokenType:w.M4.left},e);e&&e.ignoreDataReset||(this._contentProvider.reset(),this._contentProvider.setRestrictedSectionTypes([Nn.g.leftBar]));var i=new Promise((function(e,n){t._contentProvider.onLoadOnce(e).onErrorOnce(n)}));return this._builder.reset(),e.commentKey&&_t.default.show({articleId:e.articleId,markerCommentId:e.commentKey}),this._controller.enable().show(n),i},t.prototype.reset=function(){e.prototype.reset.call(this),this.resetState({itemId:"0"}),Ia.Z.setInitialPosition(this._view)},t.prototype.getTopBarConfig=t.prototype.controller=function(){return this._controller},t.prototype.registerRoutes=function(e){var t=this;e.addRoute({name:"issue_newspaper_article3",template:"article/{articleId}/{viewName}",defaults:{viewName:Ct.n3.Article},constraints:{articleId:Ba.nR,viewName:new xa.i(Ct.n3.Article)},executeWith:function(e){t.saveViewConfig(e),Fa.articleId=e.articleId}}),e.addRoute({name:"article_comment",template:"article/{articleId}/{commentKey}",defaults:{viewName:Ct.n3.Article},constraints:{articleId:Ba.nR},executeWith:)},t.prototype._createView=function(){var t=e.prototype._createView.call(this);return Ia.Z.linkView(t),t},t.prototype._onViewStateChanged=function(e,t){if(t.id){var n={itemId:t.id,type:t.type,expanded:t.expanded};wt.Z.updateState(n)}},t.prototype._createBuilder=function(){var e=g.Z.get(this._itemPreviewSizeFunctionConfig,this._defaultItemPreviewSizeFunction);return new Va.Z({itemPreviewSizeFunction:e,disableItemsBundling:!0})},t}(ya.Z),za=new Oa,Ua=n(99806),Ha=function(e){var t=this;void 0===e&&(e={});var n=e&&e.SupportCount||0,i=e&&e.OppositCount||0;this.supportCount=r.observable(n),this.oppositCount=r.observable(i),this.totalCount=r.pureComputed((function(){return t.supportCount()+t.oppositCount()})),this.uoid="myVotes"},ja=function(e){var t=e.id;this.count=e.contentCount,this.id=t,this.title=e.name},Wa=function(e){this.allCount=r.observable(0),this.uoid="shared",this.allItems=r.observableArray([]);var t=(0,Z.map)(e,(function(e){return new ja(e)})),n=(0,Z.reduce)(t,(function(e,t){return e+t.count}),0);this.allCount(n),this.allItems(t)},qa=function(e){this.count=r.observable(e&&e.contentCount||0)},Ga=0,Xa=function(){function e(e,t){var n=this,i=t||{};this.id=r.observable(i.id),this.name=r.observable(i.name).extend({required:!0,trackDirtyState:!0,undo:!0}),this.count=r.observable(i.contentCount),this.canDelete=r.pureComputed((function(){return!!n.id()})),this.isNew=r.pureComputed((),this.parent=e,this.uoid="lbl".concat(Ga++)}return e.prototype.saveLabel=function(){var e=this;return r.nd.validate(this)?Pa.Rm(this.id(),{name:this.name()}).then((function(){e.confirmEdit()})):Promise.reject("Validation error")},e.prototype.delete=function(){var e=this,t=Promise.resolve();return this.count>1&&(t=c.ZP.loaded().then((function(){var e=c.ZP.val("EditBookmarkDialog.DeletLabelWarning"),t=c.ZP.val("Buttons.Cancel.Text"),n=c.ZP.val("Buttons.Confirm");return(0,A.Z)().confirm(e,t,n)}))),t.then((function(){Pa.C5(e.id())}))},e.prototype.cancelEdit=function(){this.name.undo(),this.parent.clearSelection()},e.prototype.confirmEdit=function(){this.name.commit(),this.parent.clearSelection()},e}(),Ya=n(28873),Ka=function(){function e(e){var t=this;this.myVotes=new Ha(e);var n=(0,Z.filter)(e,(function(e){return e.type===Pa.V5.sharing}));this.shared=new Wa(n);var i=(0,Z.find)(e,{type:Pa.V5.system,id:Pa.wO});this.readLater=new qa(i);var o=(0,Z.filter)(e,(function(e){return e.type===Pa.V5.user})),a=this.createLabels(o);this.labels=r.observableArray(a),this.currentObjectId=r.observable(-1),this.onLabelChanged=this.onLabelChanged.bind(this),this.collectionChangeSubscription=Pa.xs.subscribe((function(){return t.onLabelChanged()}))}return e.prototype.setCurrentObjectId=e.prototype.clearSelection=function(){this.currentObjectId(-1)},e.prototype.isVisible=function(e){return this.currentObjectId()===e},e.prototype.addLabel=function(){Ya.Z.show()},e.prototype.deleteLabel=function(e){var t=this;return e.delete().then(()},e.prototype.createLabels=function(e){var t=this;return(0,Z.map)(e,(function(e){return new Xa(t,e)}))},e.prototype.onLabelChanged=function(){var t=this;e.loadLabels({needsReload:!1,includeVotes:!0}).then((function(e){var n=(0,Z.filter)(e,(function(e){return e.type===Pa.V5.user})),i=t.createLabels(n);t.labels([]),t.labels(i)}))},e.prototype.destroy=function(){this.collectionChangeSubscription&&this.collectionChangeSubscription.unsubscribe()},e.loadLabels=function(e){return e.needsReload,e.includeVotes,Pa.bG()},e.create=function(){return e.loadLabels({needsReload:!1,includeVotes:!0}).then((function(t){return new e(t)}))},e}(),Ja=function(){function e(e){this.elm=e.elm(),this.elm.css("overflow","scroll")}return e.prototype.show=function(){var t=this;return Promise.resolve().then((function(){Q.ZP.show()})).then((function(){return Ka.create()})).then((function(e){t.viewModel=e})).then((function(){return e.render(t.elm,t.viewModel)})).finally((function(){Q.ZP.hide()}))},e.prototype.destroy=function(){this.viewModel&&this.viewModel.destroy(),r.cleanNode(this.elm[0]),this.elm.empty(),this.elm=null},e.render=function(e,t){return Ua.z.loaded().then(()},e}(),$a=Ja,Qa=function(){function e(){}return e.init=function(e){ka=e},e.showView=function(e){var t=Promise.resolve();return Aa||(Aa=new $a(ka),t=t.then((function(){return Aa.show()}))),t.finally((function(){e&&e.callback&&e.callback()}))},e.hide=function(){Aa&&(Aa.destroy(),Aa=null)},e.getTopBarConfig=function(){return{starEnable:!0,backEnable:!0,header:"TopToolbar.ManageBookmarksTitle",actionMenuEnable:!1,settingsEnable:!0,isTitleDisabled:!0,headerClass:"toolbar-managebookmarkstitle"}},e.registerRoutes=function(e){e.addRoute({name:"managebookmarks",template:"managebookmarks",defaults:{viewName:Ct.n3.ManageBookmarks},constraints:{viewName:new xa.i(Ct.n3.ManageBookmarks)}})},e}(),es=function(){function e(e,t){var n=void 0===t?{}:t,i=n.codeResource,o=n.nameResource,a=n.checked;this.code=r.observable(c.ZP.valAsync(i)).extend({async:!0}),this.name=r.observable(c.ZP.valAsync(o)).extend({async:!0}),this.checked=r.observable(!!a),this.parent=e,this.key=i}return e.prototype.save=e}(),ts=es,ns=new(n(68602).t)(1,null),is=ns.asObservable(),rs=[{key:"enablePromotionalEmails",codeResource:"EmailAlerts.Promotional",nameResource:"EmailAlerts.Promotional.Description",valueProp:"promotionalEmailsEnabled"},{key:"enableTechnicalEmails",codeResource:"EmailAlerts.Technical",nameResource:"EmailAlerts.Technical.Description",valueProp:"technicalEmailsEnabled"}],os=function(){function e(e){var t=this;this.alertInfos=(0,Z.map)(rs,(function(n){return{key:n.key,alert:new ts(t,{codeResource:n.codeResource,nameResource:n.nameResource,checked:e[n.valueProp]})}})),this.alerts=(0,Z.map)(this.alertInfos,"alert")}return e.prototype.save=function(){var e={};return(0,Z.forEach)(this.alertInfos,(function(t){e[t.key]=r.unwrap(t.alert.checked)})),function(e){var t=e.enablePromotionalEmails,n=e.enableTechnicalEmails,i={enablePromotional:t,enableTechnical:n};return _n.Z.post("user","emailsettings",i).then(()}(e)},e}(),as=os,ss=n(62106),us=(new Date).getTimezoneOffset()/60,cs=Math.round(us),ls=function(){function e(e,t,n,i,o){var a,s,u=this,c=o.id,l=o.searchTerm,d=o.frequencyHours,h=void 0===d?0:d,p=o.timeSent,f=void 0===p?1:p;this.id=c,this.enabled=r.observable(i),this.searchTerm=l,this.frequencyHours=r.observable(t[h]).extend({undo:!0}),this.timeSent=r.observable(n[(a=f,void 0===s&&(s=!0),(a-(s?cs:us)+24)%24)]).extend({undo:!0}),this.uoid="monitor-".concat(this.id),this.parent=e,this.subscription=is.subscribe((function(e){return u.onTechEmailStatusChanged(e)})),this.off=r.computed(()}return e.prototype.save=function(){var e=this;if(!r.nd.validate(this))return Promise.reject(new Error("Validation error"));if(!this.canModify())return Promise.reject(new Error("Object modification is prohibited"));var t,n,i=r.unwrap(this.id),o=r.unwrap(this.frequencyHours),a=(t=o.needsTimeAdjustment?r.unwrap(this.timeSent).value:0,void 0===n&&(n=!0),(t+(n?cs:us)+24)%24);return ss.A.updateMonitor(i,o.value,a).then((function(){e.confirmEdit()}))},e.prototype.delete=function(){if(!this.canModify())return Promise.reject(new Error("Object modification is prohibited"));var e=r.unwrap(this.id);return ss.A.deleteMonitor(e)},e.prototype.confirmEdit=function(){this.frequencyHours.commit(),this.timeSent.commit(),this.parent.clearSelection()},e.prototype.cancelEdit=e.prototype.canModify=e.prototype.onTechEmailStatusChanged=e.prototype.destroy=function(){this.subscription.unsubscribe()},e}(),ds=ls,hs=function(){function e(e){var t=this,n=e.CID,i=e.Title,o=e.Alert,a=e.enabled;this.cid=n,this.title=i,this.alertsEnabled=r.observable(o),this.enabled=r.observable(a),this.uoid="issueAlert".concat(this.cid),this.subscription=is.subscribe((function(e){return t.onTechEmailStatusChanged(e)}))}return e.prototype.toggle=function(){var e=r.unwrap(this.alertsEnabled)?"enableAlert":"disableAlert";return xt.Z[e](this.cid),!0},e.prototype.onTechEmailStatusChanged=function(e){var t=e.technicalEmailsEnabled;this.enabled(t),t||this.alertsEnabled(!1)},e.prototype.destroy=function(){this.subscription.unsubscribe()},e}(),ps=hs,fs=n(62154),ms=n(11347),gs=new A.Z,vs=function(e){c.ZP.valAsync(e).then((function(e){gs.show(e)}))},ys=function(){function e(e,t,n,i,o){var a=this;this.availableFrequencyHours=new fs.Z(o),this.availableTimeItems=new ms.Z(e),this.general=new as(t),this.monitors=r.observableArray((0,Z.map)(n,(function(e){return new ds(a,a.availableFrequencyHours,a.availableTimeItems,t.technicalEmailsEnabled,e)}))),this.currentObjectId=r.observable(-1),this.techEmailSubscription=is.subscribe((function(e){return a.onTechEmailStatusChanged(e)})),this.maxMonitoringAlerts=o.MaxMonitoringAlerts||0,this.enabled=t.technicalEmailsEnabled,this.enabledMonitoringAlerts=r.computed((function(){return r.utils.arrayFilter(a.monitors(),(function(e){return!e.off()})).length})),this.showAllMonitors=r.observable(!0),this.displayOptions=r.observableArray([{value:!0,caption:c.ZP.val("EmailAlerts.DisplayOptions.All")},{value:!1,caption:c.ZP.val("EmailAlerts.DisplayOptions.ActiveOnly")}]),this.metaInfo=r.computed((function(){return c.ZP.format("EmailAlerts.UsageDetailsText",a.enabledMonitoringAlerts()>a.maxMonitoringAlerts?0:a.maxMonitoringAlerts-a.enabledMonitoringAlerts(),a.maxMonitoringAlerts)})),this.issueAlerts=r.observable(),this.newspaperAlertsData=r.observable(),this.newspaperAlertsData.subscribe((function(e){a.issueAlerts((0,Z.map)(e,(function(e){return new ps((0,Z.extend)(e,{enabled:a.enabled}))})))})),this.newspaperAlertsData(i),this.configTopicAlertsEnabled=r.observable(g.Z.get("UI.TopicAlerts.enable",!0))}return e.prototype.setCurrentObjectId=function(e){return this.enabled?(this.cancelMonitorsEdit(),this.currentObjectId(e.uoid)):vs("EmailAlerts.ServiceRequired"),this.enabled},e.prototype.cancelMonitorsEdit=e.prototype.clearSelection=e.prototype.isVisible=function(e){return r.unwrap(this.currentObjectId)===e},e.prototype.deleteMonitor=function(e){e.delete(),this.parent.monitors.remove(e),this.parent.clearSelection()},e.prototype.onTechEmailStatusChanged=function(e){var t=e.technicalEmailsEnabled;return(0,q.mG)(this,void 0,void 0,(function(){var e;return(0,q.Jh)(this,(function(n){switch(n.label){case 0:return this.enabled=t,this.enabled?[4,xt.Z.load(!0)]:[3,2];case 1:return e=n.sent(),this.newspaperAlertsData(e.newspapers),[3,3];case 2:this.clearSelection(),n.label=3;case 3:return[2]}}))}))},e.prototype.save=function(e){return this.enabledMonitoringAlerts()>this.maxMonitoringAlerts?(vs("EmailAlerts.Exceeded"),Promise.reject(new Error("Exceeded number of Topic Alerts"))):e.save()},e.prototype.destroy=function(){e.destroyItem([this.availableFrequencyHours,this.availableTimeItems,this.general,this.monitors,this.issueAlerts,this.techEmailSubscription]),this.techEmailSubscription.unsubscribe()},e.destroyItem=function(t){t&&(0,Z.isFunction)(t.destroy)&&t.destroy(),(0,Z.isArray)(t)&&(0,Z.forEach)(t,e.destroyItem)},e.create=function(){return Promise.all([ss.A.get(),Je.Z.getCurrent(),xt.Z.load(!0),_n.Z.get("user","emailsettings").then((function(e){var t={promotionalEmailsEnabled:e.EnablePromotional,technicalEmailsEnabled:e.EnableTechnical};return ns.next({technicalEmailsEnabled:t.technicalEmailsEnabled}),t})),c.ZP.valAsync("SearchMonitorPanel.ShowDeliveryTime","",!0)]).then((function(t){var n=(0,q.CR)(t,5),i=n[0],r=n[1],o=n[2],a=n[3];return new e(n[4],a,i,o.newspapers,r)}))},e}(),_s=ys,bs=function(e){return e.stopPropagation()},ws=function(){function e(e){this.elm=e.elm(),this.elm.css("overflow","scroll")}return e.prototype.show=function(){var t=this;return Promise.resolve().then((function(){Q.ZP.show()})).then((function(){return _s.create()})).then((function(e){t.viewModel=e})).then(().finally((function(){Q.ZP.hide()}))},e.prototype.destroy=function(){this.viewModel&&this.viewModel.destroy(),this.elm.off("touchmove",bs),r.cleanNode(this.elm[0]),this.elm.empty(),this.elm=null},e.render=function(e,t){return Ua.z.loaded().then((function(){Ua.z.appendTo("v7.Client.EmailAlerts",t,e),e.on("touchmove",bs)}))},e}(),Cs=ws,Is=function(){function e(){}return e.init=function(e){Ea=e},e.showView=function(e){var t=Promise.resolve();return Za||(Za=new Cs(Ea),t=t.then((function(){return Za.show()}))),t.finally(()},e.hide=e.getTopBarConfig=e.registerRoutes=function(e){e.addRoute({name:"emailalerts",template:"emailalerts",defaults:{viewName:Ct.n3.EmailAlerts},constraints:{viewName:new xa.i(Ct.n3.EmailAlerts)}})},e}(),Ps=n(53707),xs=((Ma={})[w.rK.attentionMap]="ReadingMap.Title.Attention",Ma[w.rK.readingTime]="ReadingMap.Title.ReadingTime",Ma[w.rK.adValue]="ReadingMap.Title.AdValue",Ma);function Ss(e){var t=e%60,n=Math.floor(e/60);return t&&n?c.R9.format("ReadingMap.Time.MinSec",n,t):n?c.R9.format("ReadingMap.Time.Min",n):c.R9.format("ReadingMap.Time.Sec",t)}var Ts,ks=new(function(e){function t(){var t=e.call(this)||this;return t._loadIssuePromise=new Promise((function(e){a.Z.issueLoaded((function(){t._issue=a.Z.issue(),t._updateModel().catch((function(){})),e()}))})),t}return(0,q.ZT)(t,e),t.prototype.init=function(e){this._elm=e.elm(),e.resize(this._rearrangeColumns.bind(this))},t.prototype.show=function(e){var t=this;if(!this._isVisible){this._isVisible=!0;var n=window.readingMapReportType;(!(0,Z.isNumber)(n)||n<0)&&(n=w.rK.attentionMap),this._model?this._updateModel(n).then((function(){(0,Z.isFunction)(e.callback)&&e.callback(),t._rearrangeColumns()})):this._initModel(n).then((function(){Ua.z.renderTo("v7.Client.ReadingMap",t._model,t._elm),t._elm.attr("nd-scrollable","yes"),(0,Z.isFunction)(e.callback)&&e.callback(),t._rearrangeColumns()}))}},t.prototype.hide=t.prototype.getTopBarConfig=function(){return{backEnable:!0,starEnable:!0,showNewpaperName:!0,headerClass:"toolbar-issuetitle",actionMenuEnable:!1,configMainMenuEnabled:!1}},t.prototype._initModel=function(e){if(!this._model){this._model={issue:"",reportType:r.observable(e||w.rK.attentionMap),medianReadTime:r.observable(),avgReadTime:r.observable(),usersCount:r.observable(),changeReportType:this._changeReportType.bind(this),maxTime:r.observable(),maxAdValue:r.observable(),colors:[],sections:r.observableArray(),spreads:r.observableArray(),showSpread:this._showSpread.bind(this),showSection:this._showSection.bind(this)},this._model.title=r.computed(this._getReportTitle.bind(this));for(var t=0;t<5;++t)this._model.colors[t]=r.computed(this._getColorTitle.bind(this,t))}return this._updateModel(e)},t.prototype._updateModel=function(e){var t=this;return this._isVisible&&this._model?(Q.ZP.show(),this._loadIssuePromise.then(this._loadData.bind(this)).then((function(){void 0!==e&&t._changeReportType(e),Q.ZP.hide()}))):Promise.reject()},t.prototype._loadData=function(){var e=this;if(!this._model||!this._issue)return Promise.reject();if(this._model.issue===this._issue)return Promise.resolve();this._model.issue=this._issue;var t=this._ts=Date.now();return _n.Z.get("ReadingMap","GetIssueReport",{issue:this._issue}).then((function(n){if(t!==e._ts)return Promise.reject();var i={},r=0,o=0;return(0,Z.forEach)(n.Pages,(function(e){i[e.PageNumber]=e,r=Math.max(r,e.AverageReadingTime),o=Math.max(o,e.AdValue)})),e._model.medianReadTime(Ss(n.MedianReadingTime)).avgReadTime(Ss(n.AverageReadingTime)).usersCount(n.UsersCount).maxTime(r).maxAdValue(o),a.L.load().then((function(){return t!==e._ts?Promise.reject():(e._model.sections.removeAll(),e._model.spreads.removeAll(),(0,Z.forEach)(n.Sections,(function(t){var n=e._getSectionModel(t,a.L.getPage(t.PageNumber));e._model.sections.push(n)})),(0,Z.forEach)(a.L.getPages(),(function(t,n){n&&n%2!=1||(r&&e._model.spreads.push(r),r=[]),r.push(e._getPageThumbnailModel(t,i[t.pageNumber()]))})),r&&e._model.spreads.push(r),e._rearrangeColumns(),e._model);var r}))}))},t.prototype._getSectionValue=function(e){switch(this._model.reportType()){case w.rK.attentionMap:return"".concat(Math.round(100*e.usersCount/this._model.usersCount()),"%");case w.rK.readingTime:return Ss(e.avgReadTime);default:return""}},t.prototype._getSectionModel=function(e,t){var n={avgReadTime:e.AverageReadingTime,usersCount:e.UsersCount,title:t.section(),startPageNumber:t.pageNumber(),startPageName:t.pageName()};return n.value=r.computed(this._getSectionValue.bind(this,n),n),n},t.prototype._changeReportType=function(e){e!==this._model.reportType()&&(this._model.reportType(e),window.readingMapReportType=e)},t.prototype._getPageThumbnailModel=function(e,t){void 0===t&&(t={});var n={number:e.pageNumber(),name:e.pageName(),src:e.buildThumbUrl(e.calculateThumbScale(90)),usersCount:t.UsersCount||0,avgReadTime:t.AverageReadingTime||0,adValue:t.AdValue||0};return n.normValue=r.computed(this._getPageNormValue.bind(this,n),n),n.color=r.computed(this._getPageColorIdx.bind(this,n),n),n.title=r.computed(this._getPageTitle.bind(this,n),n),n},t.prototype._getPageNormValue=function(e){switch(this._model.reportType()){case w.rK.attentionMap:var t=this._model.usersCount();return t?e.usersCount/t:0;case w.rK.readingTime:return e.avgReadTime/this._model.maxTime();case w.rK.adValue:return e.adValue/this._model.maxAdValue();default:return 0}},t.prototype._getPageColorIdx=function(e){var t=Math.ceil(5*e.normValue());return t?6-t:0},t.prototype._getPageTitle=function(e){switch(this._model.reportType()){case w.rK.attentionMap:return"".concat(Math.round(100*e.normValue()),"%");case w.rK.readingTime:return c.R9.format("ReadingMap.Time.Sec",e.avgReadTime);case w.rK.adValue:return"".concat(e.adValue,"%");default:return""}},t.prototype._getColorTitle=function(e){var t;switch(this._model.reportType()){case w.rK.attentionMap:t=100;break;case w.rK.readingTime:t=this._model.maxTime();break;case w.rK.adValue:t=this._model.maxAdValue();break;default:t=0}return Math.round(t*(5-e)/5)},t.prototype._getReportTitle=function(){var e=xs[this._model.reportType()]||"";return c.R9.val(e)},t.prototype._rearrangeColumns=function(){var e=this;if(this._isVisible){var t=this._elm.find(".thumb-list ul"),n=t.width(),i=Math.floor(n/200),r=Math.floor(n/i);t.children("li").css("width",r);var o=this._elm.find(".thumb-list img"),a=o.length;o.load((function(){--a<=0&&e._elm.resize()}))}},t.prototype._showSpread=function(e){wt.Z.goView(Ct.n3.PagesView,{issue:this._model.issue,page:e[0].number})},t.prototype._showSection=function(e){wt.Z.goView(Ct.n3.PagesView,{issue:this._model.issue,page:e.startPageNumber})},t}(Ps.Z)),As={init:function(e){Ts=e.elm()},showView:function(e){return e=e||{},Promise.all([wt.Z.getViewUrl(Ct.n3.TopNews),wt.Z.getViewUrl(Ct.n3.Help),Ua.z.loaded(),c.ZP.loaded()]).then((function(t){var n=t[0],i=t[1];e&&e.callback&&e.callback();var o={newsFeedUrl:r.observable(n),helpUrl:r.observable(i),contactUsUrl:r.observable(c.ZP.val("Errors.ContactUsUrl")),openNewsFeed:function(){return wt.Z.goView(Ct.n3.TopNews),!1},selectPublication:function(){return bt.Z.showDialog().then((function(e){e?Mt():wt.Z.goView(Ct.n3.StoreHub,{catalogView:Ct.N1.Catalog})})),!1},openHelp:function(){return wt.Z.goView(Ct.n3.Help),!1}};Ua.z.renderTo("v7.Client.Error",o,Ts)})).catch((function(){return Promise.reject()}))}};As.hide=i.noop,As.registerRoutes=function(e){e.addRoute({name:"error",template:"",constraints:{viewName:new xa.i(Ct.n3.Error)}})},As.reset=function(){this.__viewPanel.show()},As.getTopBarConfig=var Es=As,Zs=n(26049),Ms=function(e){function t(){var t=e.call(this)||this;return t._onlineListLoader=Ln.N5,t._itemPreviewSizeFunctionConfig="ui.Views.TopNews.itemPreviewSizeFunction",t._defaultItemPreviewSizeFunction="topStories",t._topBarConfig={starEnable:!0,backEnable:!0,newPostButtonVisible:!1,header:r.observable(""),settingsEnable:!0,actionMenuOptions:[w.gu.lang,w.gu.listen,w.gu.fonts],generalMenuOptions:[w.gu.interfaceLang,w.gu.autoTranslate],isTitleDisabled:!0,headerClass:"toolbar-profiletitle"},t}return(0,q.ZT)(t,e),t.prototype.showView=function(e){var t=this;Lt.Z.current=this._context;var n=Z.assign({showIssueInfo:!0,showSections:!0,updatePreviewPanel:!1,updateInterval:6e4*g.Z.get("ui.Views.TopNews.updateInterval",60),historyTokenType:w.M4.left},e);e&&e.ignoreDataReset||this._contentProvider.reset(),this._builder.reset(),e.resetState&&this.resetState({itemId:-1});var i=new Promise((function(e,n){t._contentProvider.onLoadOnce((function(n){t._controller.contentAccessToken(n&&n.accessToken||""),e(n)})).onErrorOnce(n)}));if(!e.channelfeed&&e.channelEnabled||this._contentProvider.setRestrictedSectionTypes([Nn.g.profile]),e.claim&&this._contentProvider.on("articlesLoaded",Z.once((function(t){var n=Z.find(t,();n&&Z.isFunction(n.update)&&n.update({performClaim:!0})}))),e.bookmarkId){var r=n.callback;n.callback=function(){Z.isFunction(r)&&r();var e=t;function n(){var t=e._controller.firstAvailableArticle(),n=t&&t.ArticleId,i=t&&t.SocialInfo,r=i&&i.commentKey,o=t&&t.PostsCount;return n&&r&&o&&_t.default.show({articleId:n,markerCommentId:r}),Promise.resolve()}if(t._view.viewport().columns<2){for(var o=t._view.columnByX(0);o;o=o.next())if(!o.type()){Promise.all([t._view.scrollTo(o),i]).then(n);break}}else i.then(n)}}return this._controller.enable().show(n),i},t.prototype.reset=function(){e.prototype.reset.call(this),!this._viewConfig.channelfeed&&this._viewConfig.channelEnabled||this._contentProvider.setRestrictedSectionTypes([Nn.g.profile]),this.resetState({itemId:"0"}),Ia.Z.setInitialPosition(this._view)},t.prototype.getNavigationHistoryConfig=function(){return{profileId:{includeInUrl:!0}}},t.prototype.getTopBarConfig=function(){return this._topBarConfig},t.prototype.controller=function(){return this._controller},t.prototype.registerRoutes=function(e){var t=this,n=function(e){return t.saveViewConfig(e),Ln.N5.setSearchParams(e),e&&e.profileId?(Ln.F1.setParams({profileId:e.profileId,bookmark:e.bookmarkId||"",commentKey:e.commentKey||""}),t._topBarConfig.profileId=e.profileId,Promise.all([g.Z.loaded(),c.ZP.loaded()]).then(_a.default.getProfile.bind(null,e.profileId)).then((function(e){if(!e)return Promise.reject();t._viewConfig.channelEnabled=g.Z.get("pagesView.enableUserInfo",!1);var n=c.ZP.val("TopToolbar.ProfileTitle.Template")||"";t._topBarConfig.header(n.replace("{0}",e.nickname)),t._topBarConfig.newPostButtonVisible=g.Z.get("post.enabled")&&t._topBarConfig.profileId===Ft.default.getProfileId()}))):Promise.reject()},i=new xa.i(Ct.n3.Profile),r=new xa.i("channelfeed");e.addRoute({name:"channel_claim_gift",template:"@{profileId}/{bookmarkId}?{claim}",defaults:{viewName:Ct.n3.Profile,bookmarkId:""},constraints:{viewName:i},executeWith:n}).addRoute({name:"channel_bookmark_comment",template:"@{profileId}/{bookmarkId}/{commentKey}",defaults:{viewName:Ct.n3.Profile,bookmarkId:"",commentKey:""},constraints:{viewName:i},executeWith:n}).addRoute({name:"channel_bookmark",template:"@{profileId}/{bookmarkId}",defaults:{viewName:Ct.n3.Profile,bookmarkId:""},constraints:{viewName:i},executeWith:n}).addRoute({name:"channelfeed",template:"channelfeed/{profileId}",defaults:{viewName:Ct.n3.Profile},constraints:{viewName:i,channelfeed:r},executeWith:n}).addRoute({name:"channel",template:"@{profileId}",defaults:{viewName:Ct.n3.Profile},constraints:{viewName:i},executeWith:n})},t.prototype._createView=function(){var t=e.prototype._createView.call(this);return Ia.Z.linkView(t),t},t.prototype._onViewStateChanged=function(e,t){if(t.id){var n={itemId:t.id,type:t.type,expanded:t.expanded};wt.Z.updateState(n)}},t.prototype._createBuilder=function(){var e=g.Z.get(this._itemPreviewSizeFunctionConfig,this._defaultItemPreviewSizeFunction);return new Va.Z({itemPreviewSizeFunction:e,disableItemsBundling:!0})},t}(ya.Z),Ds=new Ms,Ls=n(28749),Ns=n(1753),Rs=new Un.B;(0,Ns.kA)({url:(window.basePath||"/")+"PlatformResolver/Resolve",data:{screenHeight:window.screen&&window.screen.height||0,screenWidth:window.screen&&window.screen.width||0,hasTouchSupport:R.v.touch},requestConfig:{cache:"no-store"}}).then((function(e){e&&e.RedirectTo?(Rs.reject(),window.location.href=e.RedirectTo):Rs.resolve()}),Rs.resolve);var Vs={resolved:function(){return Rs.promise()}},Bs=n(26763);function Fs(e){return e=e.toLowerCase(),Z.find(g.Z.get("ui.FeedSettings.Categories"),()}function Os(e){if(e.country){var t=Fs(e.category);t&&t.languagesOnly&&(e.country="")}var n=e.lang;e.country&&(n+="-".concat(e.country));var i={country:e.country,lang:e.lang,category:e.category,locale:n,showSame:"1"!==e.hideSimilar,categoriesBarParams:e};Ln.bd.setSearchParams(i)}var zs=function(e){function t(){var t=e.call(this)||this;return t._onlineListLoader=Ln.bd,t._itemPreviewSizeFunctionConfig="ui.Views.TopNews.itemPreviewSizeFunction",t._defaultItemPreviewSizeFunction="topStories",t.topBarConfigOptions={starEnable:!0,backEnable:!0,settingsEnable:!0,actionMenuOptions:[w.gu.lang,w.gu.listen],header:r.observable(),headerClass:"toolbar-sectionstitle"},t}return(0,q.ZT)(t,e),t.prototype.show=function(e){Lt.Z.current=this._context;var t=Z.assign({showIssueInfo:!0,showSections:!0,updatePreviewPanel:!1,ignoreGroupHeader:!0,updateInterval:6e4*g.Z.get("ui.Views.TopNews.updateInterval",60)},e);e&&e.ignoreDataReset||(this._contentProvider.reset(),this._contentProvider.setRestrictedSectionTypes([Nn.g.leftBar])),this._builder.reset(),this._controller.enable().show(t)},t.prototype.reset=function(){e.prototype.reset.call(this),this._contentProvider.setRestrictedSectionTypes([Nn.g.leftBar])},t.prototype.getTopBarConfig=function(){return this.topBarConfigOptions},t.prototype.getNavigationHistoryConfig=function(){return{category:{includeInUrl:!0},country:{includeInUrl:!0},lang:{includeInUrl:!0}}},t.prototype.showView=function(e){var t=this;return o.Z.isLogin()?Promise.all([x.U2("FeedSettings"),c.ZP.loaded()]).then((function(n){var i=(0,q.CR)(n,1)[0];if(!e.lang&&!e.country){var r=i&&i.locales&&i.locales[0];r&&(e.country=r.country,e.lang=r.language)}Os(e),t._setHeader(e.lang,e.country),t.show(e)})):(this.show(e),Promise.resolve())},t.prototype.registerRoutes=function(e){var t=this;e.addRoute({name:"category",template:"category/{category}/{lang}/{country}",defaults:{viewName:Ct.n3.Categories,country:"",lang:""},constraints:{viewName:new xa.i(Ct.n3.Categories)},executeWith:function(e){if(t.topBarConfigOptions.categoryResourceName=function(e,t){var n=Fs(e);return n&&n.resourceName}(e.category),!e.lang&&!e.country){var n=Ln.bd.getSearchParams();n&&(e.country=n.country||"",e.lang=n.lang||"")}t._setHeader(e.lang,e.country),Os(e),t.saveViewConfig(e)}})},t.prototype._createContentProvider=function(){var t=e.prototype._createContentProvider.call(this);return t.setRestrictedSectionTypes([Nn.g.leftBar]),t},t.prototype._createView=function(){var t=e.prototype._createView.call(this);return Ia.Z.linkView(t),t},t.prototype._onViewStateChanged=function(){},t.prototype._setHeader=function(e,t){var n=this;this.topBarConfigOptions.header(""),Promise.all([(0,St.Vb)(),(0,St.ox)(),c.ZP.loaded()]).then((function(i){var r=(0,q.CR)(i,2),o=r[0],a=r[1],s=c.ZP.val(n.topBarConfigOptions.categoryResourceName),u="";if(t){var l=Z.find(a,{iso:t});u=l?l.displayName:""}else if(e){var d=Z.keyBy(o,"iso")[e];u=d?d.name:c.ZP.val("Languages.".concat(e))}u&&(s+=" <em>".concat(u,"</em>")),n.topBarConfigOptions.header(s)}))},t}(ya.Z),Us=new zs,Hs=n(37126),js=(0,zn.get)("fts"),Ws=function(e){function t(){var t=e.call(this)||this;return t.viewName=Ct.n3.FTSArticles,t._onlineListLoader=js.ftsarticles,t._onlineItemsLoader=js.ftsarticlesitems,t._itemPreviewSizeFunctionConfig="ui.Views.FTSArticles.itemPreviewSizeFunction",t._defaultItemPreviewSizeFunction="fullTextSearch",t}return(0,q.ZT)(t,e),t.prototype.show=function(e){this._config=e,Lt.Z.current=this._context,(0,Sa.Hy)({showIssueInfo:!0});var t=Z.assign({showSections:!1,updatePreviewPanel:!1,historyTokenType:w.M4.left},e);e&&e.ignoreDataReset||this.reset(),this._builder.reset(),this._controller.enable().show(t),this._toolbar&&this._toolbar.show()},t.prototype.hide=t.prototype.reset=function(){this._contentProvider.reset()},t.prototype.getNavigationHistoryConfig=function(){return this._navHistoryCfg||(this._navHistoryCfg=Z.reduce(Hs.u,(,{})),this._navHistoryCfg},t.prototype.getTopBarConfig=function(){return{backEnable:!0,header:"TopToolbar.SearchResult",starEnable:!0,actionMenuOptions:[w.gu.lang,w.gu.listen,w.gu.fonts],generalMenuOptions:[w.gu.interfaceLang,w.gu.autoTranslate,w.gu.togglePervasive,w.gu.toggleFacelift,w.gu.toggleFestive,w.gu.toggleHotspot],isTitleDisabled:!0,headerClass:"toolbar-searchtitle"}},t.prototype.getSearchText=t.prototype.registerRoutes=function(e){var t=this;(0,Hs.W)(e,(function(e){Rn.U.setSearchParams(Rn.U.toSearchParams(e)),t.saveViewConfig(e)}),void 0)},Object.defineProperty(t.prototype,"_toolbar",{get:function(){return void 0===this.__toolbar&&(Ae.ZR?(this.__toolbar=new Ae.ZR(this._container.elm()),this.__toolbar.linkView(this._view)):this.__toolbar=null),this.__toolbar},enumerable:!1,configurable:!0}),t.prototype._onViewStateChanged=function(e,t){if(t.id){var n={itemId:t.id,type:t.type,expanded:t.expanded,articleHistoryToken:t.articleHistoryToken||0,currentArticlePosition:t.articlePosition};wt.Z.updateState(n)}},t.prototype._createView=function(){var t=this,n=e.prototype._createView.call(this);return Ia.Z.linkView(n),n.setupNoContentResolverCallback((function(){return t._getNoContentView()})),n},t.prototype._getNoContentView=function(){return Promise.resolve({model:{},view:"v7.Client.NoSearchContent"})},t.prototype._createContentProvider=t}(ya.Z),qs=new Ws,Gs=n(11569),Xs=n(46720),Ys=c.ZP.templates,Ks=function(){function e(e,t){var n=this;this.loader=t,this.element=e,this.model={searchResult:r.observable(),viewportLeft:r.observable()},this.isVisible=!1,t.onSearch((function(e,t){(function(e,t){var n=[c.ZP.loaded()];if(e.newspapers){var i=e.newspapers.split(",");1===i.length?n.push((0,St.b)(i[0]).then((function(e){return e.name}))):n.push(Promise.resolve(i.length))}return Promise.all(n).then((function(n,i){var r=[];if(e.searchText&&r.push(e.searchText),e.searchAuthor&&r.push(c.ZP.format("SearchToolbar.Author",e.searchAuthor)),"language"===e.groupBy)r.push(c.ZP.val("SearchToolbar.InAllLanguages"));else if(!(0,Z.isEmpty)(e.languages)){var o=e.languages.split(",");r.push(c.ZP.format("SearchToolbar.Languages",(0,Ae.kx)(o)))}if(i&&r.push(c.ZP.format("SearchToolbar.Newspapers",i)),e.countries){var a=e.countries.split(",");r.push(c.ZP.format("SearchToolbar.Countries",(0,Ae.kx)(a)))}return r.push(c.ZP.format("SearchToolbar.Range",(0,Ae.W4)(e.date||Pe.b.getDefaultDate()))),r.push(c.ZP.format("SearchToolbar.SearchIn",(0,Ae.DF)(e.in||Pe.b.DefaultLocation))),void 0===t?c.ZP.format("ToolbarSearchWithoutCount",r.join(" ")):c.ZP.format("ToolbarSearchMonitor",t,r.join(" "))}))})(t.params,t.totalCount).then((function(e){n.model.searchResult(e)}))}))}return e.prototype.show=function(){var e=this;return this.isVisible||(this.isVisible=!0,Ys.loaded().then(()),this},e.prototype.linkView=function(e){var t=this;this.model.viewportLeft(e.viewport().left),Xs.Z.bind(e,"viewportChanged",null,()},e}(),Js=Ks,$s=n(88077),Qs=n(14744),eu=n(7390),tu=n(83344),nu=n(39114),iu=zn.get;function ru(e){return e.monitorId&&"0"!==e.monitorId?Promise.resolve():ss.A.get().then((function(t){Z.isEmpty(t)||(e.monitorId=t[0].id,Ln.k7.setSearchParams(e))}))}var ou=function(e){function t(){var t=e.call(this)||this;return t.viewName=Ct.n3.Monitors,t._onlineListLoader=Ln.k7,t._itemPreviewSizeFunctionConfig="ui.Views.TopNews.itemPreviewSizeFunction",t._defaultItemPreviewSizeFunction="topStories",t}return(0,q.ZT)(t,e),t.prototype.init=function(t){var n=this;e.prototype.init.call(this,t),Ln.k7.onSearch((function(e,t){$s.Z.highlightTopic(t.params.searchTokens||t.params.searchText)})),Qs.C.updates.pipe((0,Gs.h)((function(e){return e.opType===Qs.a.Save}))).subscribe((function(e){var t=e.id;n._onTopicChanged(t)})),Qs.C.updates.pipe((0,Gs.h)((function(e){return e.opType===Qs.a.Delete}))).subscribe(()},t.prototype.show=function(e){var t=this;this._currentTopicId=parseInt(e.monitorId,10),Lt.Z.current=this._context,(0,Sa.Hy)({showIssueInfo:!0});var n=Z.assign({showSections:!0,updatePreviewPanel:!1,updateInterval:6e4*g.Z.get("ui.Views.TopNews.updateInterval",60),historyTokenType:w.M4.left},e);e&&e.ignoreDataReset||this._contentProvider.reset();var i=new Promise(();return this._builder.reset(),this._controller.enable().show(n),this._toolbar&&this._toolbar.show(),i},t.prototype.reset=function(e){var t=this;return ru(e).then(()},t.prototype.getResetParams=t.prototype.getTopBarConfig=function(){return{starEnable:!0,backEnable:!0,header:"Menu.Monitors",headerClass:"toolbar-monitorstitle",settingsEnable:!0,showMonitorName:!0,actionMenuOptions:[w.gu.lang,w.gu.listen,w.gu.fonts],generalMenuOptions:[w.gu.interfaceLang,w.gu.autoTranslate,w.gu.togglePervasive,w.gu.toggleFacelift,w.gu.toggleFestive]}},t.prototype.showView=function(e){var t=this;return ru(e).then((function(){return t.show(e)}))},t.prototype.registerRoutes=function(e){var t=this;e.addRoute({name:"topics",template:"topics/{monitorId}",defaults:{viewName:Ct.n3.Monitors,monitorId:"0"},constraints:{viewName:new xa.i(Ct.n3.Monitors)},executeWith:function(e){t._currentTopicId=parseInt(e.monitorId,10),Ln.k7.setSearchParams(e),t.saveViewConfig(e)}})},Object.defineProperty(t.prototype,"_toolbar",{get:function(){return void 0===this.__toolbar&&(Js?(this.__toolbar=new Js(this._container.elm(),iu("monitors").monitors),this.__toolbar.linkView(this._view)):this.__toolbar=null),this.__toolbar},enumerable:!1,configurable:!0}),t.prototype._createView=function(){var t=this,n=e.prototype._createView.call(this);return Ia.Z.linkView(n),n.setupNoContentResolverCallback((function(){return Qs.C.get().then((function(e){return!Z.isEmpty(e)})).then(()})),n},t.prototype._getNoContentView=function(){var e=this,t={editTopicClick:function(){e._currentTopicId?Qs.C.getById(e._currentTopicId).then((function(e){e?eu.editTopicDialog.show({topic:e}):J.Z.error("Topic not found")})).catch(():J.Z.error("Invalid selected topics",e._currentTopicId)}};return Promise.resolve({model:t,view:"v7.Client.NoTopicContent"})},t.prototype._getNoTopicView=function(){var e={createNewTopicClick:function(){(0,tu.X)().then((function(e){eu.editTopicDialog.show({topic:{languages:e.language?[e.language]:[]}}).then((function(e){e.status===Ie.Y.Ok&&G.Z.topicsView.activate({type:"monitor",monitorId:e.topic.id})}))}))}};return Promise.resolve({model:e,view:"v7.Client.NoTopics"})},t.prototype._onTopicChanged=function(e){this._isTopicOpened(e)&&G.Z.topicsView.activate({type:"monitor",monitorId:e})},t.prototype._onTopicDeleted=function(e){this._isTopicOpened(e)&&nu.Z.goHome()},t.prototype._isTopicOpened=function(e){return wt.Z.getState().viewName===Ct.n3.Monitors&&this._currentTopicId===e},t.prototype._onViewStateChanged=function(e,t){if(t.id){var n={itemId:t.id,type:t.type,expanded:t.expanded,articleHistoryToken:t.articleHistoryToken||""};wt.Z.updateState(n)}},t}(ya.Z),au=new ou,su=!1,uu=n(35547),cu=function(e){function t(){var t=e.call(this)||this;return t.viewName=Ct.n3.Similar,t._onlineListLoader=Ln.bz,t._itemPreviewSizeFunctionConfig="ui.Views.TopNews.itemPreviewSizeFunction",t._defaultItemPreviewSizeFunction="topStories",t}return(0,q.ZT)(t,e),t.prototype.show=function(e){Lt.Z.current=this._context,(0,Sa.Hy)({showIssueInfo:!0});var t=Z.assign({showSections:!0,updatePreviewPanel:!1,updateInterval:6e4*g.Z.get("ui.Views.TopNews.updateInterval",60),historyTokenType:w.M4.left},e);e&&e.ignoreDataReset||this.reset(),this._builder.reset(),(0,rt.WI)((0,uu.mh)({viewName:t.viewName,currentPath:(0,ga.Jz)()})),this._controller.enable().show(t)},t.prototype.getTopBarConfig=function(){return{starEnable:!0,backEnable:!0,header:"TopToolbar.SimilarTitle",actionMenuOptions:[w.gu.lang],settingsEnable:!0,isTitleDisabled:!0,headerClass:"toolbar-relatedtitle"}},t.prototype.registerRoutes=function(e){var t=this;!function(e,n,i){if(!su){if(su=!0,n!==Ct.n3.TopNews&&n!==Ct.n3.Similar)throw new Error("viewName '".concat(n,"' should be either TopNews or Similar"));e.addRoute({name:"similar",template:"similar/{similarArticleId}",defaults:{viewName:n},constraints:{viewName:new xa.i(n)},executeWith:)}}(e,Ct.n3.Similar)},t.prototype._createView=function(){var t=e.prototype._createView.call(this);return Ia.Z.linkView(t),t},t.prototype._onViewStateChanged=function(e,t){if(t.id){var n={itemId:t.id,type:t.type,expanded:t.expanded,articleHistoryToken:t.articleHistoryToken||0,currentArticlePosition:t.articlePosition};wt.Z.updateState(n)}},t}(ya.Z),lu=new cu,du=new(function(e){function t(){var t=e.call(this)||this;return t.viewName=Ct.n3.Votes,t._onlineListLoader=Ln.Tn,t._itemPreviewSizeFunctionConfig="ui.Views.Votes.itemPreviewSizeFunction",t}return(0,q.ZT)(t,e),t.prototype.show=function(e){Lt.Z.current=this._context,(0,Sa.Hy)({showIssueInfo:!0});var t=Z.assign({showSections:!1,updatePreviewPanel:!1},e);e&&e.ignoreDataReset||this._contentProvider.reset(),this._builder.reset(),this._controller.enable().show(t)},t.prototype.getNavigationHistoryConfig=function(){return{type:{includeInUrl:!0}}},t.prototype.getTopBarConfig=t}(ya.Z)),hu=n(70516),pu=new(function(){function e(){this._topBarConfig={showSearch:!1,actionMenuEnable:!1,backEnable:!0,isTitleDisabled:!0,header:"Accounting.UserProfile.PaymentHistory.Receipt",headerClass:"toolbar-receipttitle"}}return e.prototype.getTopBarConfig=function(){return this._topBarConfig},e.prototype.init=e.prototype.showView=function(e){return this.render().then((function(){e.callback&&e.callback()}))},e.prototype.render=function(){return Promise.resolve()},e.prototype.hide=function(){r.cleanNode(this.element[0]),this.element.empty()},e.prototype.canLeaveView=function(){return Promise.resolve(!0)},e.prototype.registerRoutes=function(){},e}()),fu="api/v1/accounting/gdpr",mu="gdpr_consent_",gu=new vo.x,vu=(gu.asObservable(),{none:"none",granted:"granted"});function yu(){if(o.Z.isLogin())return _n.Z.get(fu,"consents");var e=p.get("".concat(mu).concat(3),vu.none),t=p.get("".concat(mu).concat(1),vu.none),n=[{consentType:3,isGranted:e===vu.granted},{consentType:1,isGranted:t===vu.granted}];return Promise.resolve(n)}var _u=n(41350),bu=[3,1],wu="GDPR.TermsOfUse.OptionalConsentMessage.Title",Cu="GDPR.TermsOfUse.OptionalConsentMessage",Iu="GDPR.TermsOfUse.IAccept",Pu="gdpr.cookie.consent";var xu=function(){return(0,q.mG)(void 0,void 0,void 0,(function(){var e;return(0,q.Jh)(this,(function(t){switch(t.label){case 0:return[4,Promise.all([c.ZP.loaded(),g.Z.loaded()])];case 1:return t.sent(),g.Z.get("features")[Pu]?[4,yu()]:[2];case 2:return e=t.sent(),(0,Z.filter)((0,Z.map)(bu,(function(t){var n=(0,Z.find)(e,(function(e){return e.consentType===t}));return n&&n.isGranted?null:t}))).length>0&&function(){var e=this,t="\n            <h3>".concat(c.ZP.val(wu),"</h3>\n            ").concat(c.ZP.val(Cu),"\n        "),n=document.createElement("aside");n.classList.add("mdc-snackbar"),n.innerHTML='\n        <div class="mdc-snackbar__surface" role="status" aria-relevant="additions">\n        <div class="mdc-snackbar__label" aria-atomic="false">\n            '.concat(t,'\n        </div>\n        <div class="mdc-snackbar__actions" aria-atomic="true">\n            <button type="button" class="mdc-button mdc-snackbar__action">\n            <div class="mdc-button__ripple"></div>\n            <span class="mdc-button__label"></span>\n            </button>\n        </div>\n        </div>\n    '),document.body.append(n);var i=new _u.G(document.querySelector(".mdc-snackbar"));i.timeoutMs=-1,i.actionButtonText=c.ZP.val(Iu),i.listen("MDCSnackbar:closing",(function(t){return(0,q.mG)(e,void 0,void 0,(function(){var e;return(0,q.Jh)(this,(function(n){switch(n.label){case 0:return"action"!==t.detail.reason?[3,2]:(e=(0,Z.filter)((0,Z.map)(bu,(function(e){return t=e,o.Z.isLogin()?_n.Z.post(fu,"consent",{consentType:t,granted:!0}).then((function(){gu.next()})):(p.set("".concat(mu).concat(t),vu.granted,{expiresInDays:365}),Promise.resolve());var t}))),[4,Promise.all(e)]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))})),i.open()}(),[2]}}))}))},Su=n(70803),Tu=n(71357),ku=function(){function e(){this.cookieKey="overlay",this.cookieExpirationInDays=1e3,this.accountHelpSection=ko.observable(""),this.articleViewHelpSection=ko.observable(""),this.calendarHelpSection=ko.observable(""),this.closeHelpSection=ko.observable(""),this.hamburgerMenuHelpSection=ko.observable(""),this.homepageHelpSection=ko.observable(""),this.mouseHelpSection=ko.observable(""),this.navigateHelpSection=ko.observable(""),this.pageViewHelpSection=ko.observable(""),this.searchHelpSection=ko.observable(""),this.startHelpSection=ko.observable(""),this.swipeHelpSection=ko.observable(""),this.viewHelpSection=ko.observable(""),this.init()}return e.prototype.startBrowsing=function(){this.setCookie(),this.closeOverlay()},e.prototype.alignAccountHelpSection=function(){var e=document.querySelector(".userphoto"),t=document.querySelector(".se2sky-overlay-account");if(e&&t){var n=e.getBoundingClientRect();t.style.display="inherit",t.style.left="".concat(n.left+(n.width-t.offsetWidth)/2,"px")}else t&&(t.style.display="none")},e.prototype.alignCalendarHelpSection=function(){var e=document.getElementsByClassName("toolbar-title")[document.getElementsByClassName("toolbar-title").length-1].parentElement,t=document.querySelector(".se2sky-overlay-calendar");if(e&&t){var n=e.getBoundingClientRect();t.style.display="inherit",t.style.left="".concat(n.left+n.width-t.offsetWidth/2,"px")}else t&&(t.style.display="none")},e.prototype.alignCloseHelpSection=function(){var e=document.querySelector("#overlayToolbar"),t=document.querySelector(".se2sky-overlay-close");if(e&&t){var n=e.getBoundingClientRect();t.style.display="inherit",t.style.left="".concat(n.left+n.width/2-t.offsetWidth,"px")}else t&&(t.style.display="none")},e.prototype.alignHamburgerMenuHelpSection=function(){var e=document.querySelector(".toolbar-button-appmenu"),t=document.querySelector(".se2sky-overlay-humburger");if(e&&t){var n=e.getBoundingClientRect();t.style.display="inherit",t.style.left="".concat(n.left+n.width/2,"px")}else t&&(t.style.display="none")},e.prototype.alignHomepageHelpSection=function(){var e=document.querySelector(".logo"),t=document.querySelector(".se2sky-overlay-homepage");if(e&&t){var n=e.getBoundingClientRect();t.style.display="inherit",t.style.left="".concat(n.left+(n.width-t.offsetWidth)/2,"px")}else t&&(t.style.display="none")},e.prototype.alignNavigateHelpSection=function(){var e=document.querySelector("#overlay-chkbx-container"),t=document.querySelector(".se2sky-overlay-navigate");if(e&&t){var n=e.getBoundingClientRect();t.style.display="inherit",t.style.left="".concat(n.left-t.offsetWidth,"px")}else t&&(t.style.display="none")},e.prototype.alignSearchHelpSection=function(){var e=document.querySelector("#toolbarSearchPanel"),t=document.querySelector(".se2sky-overlay-search");if(e&&t){var n=e.getBoundingClientRect();t.style.display="inherit",t.style.left="".concat(n.left+n.width/2-t.offsetWidth,"px")}else t&&(t.style.display="none")},e.prototype.alignViewHelpSection=function(){var e=document.querySelector(".toolbar-switch"),t=document.querySelector(".se2sky-overlay-view");if(e&&t){var n=e.getBoundingClientRect();t.style.display="inherit",t.style.left="".concat(n.left+n.width/2,"px")}else t&&(t.style.display="none")},e.prototype.arrangeToolbarBottomHelpSection=function(){this.alignViewHelpSection(),this.alignNavigateHelpSection()},e.prototype.arrangeToolbarTopHelpSection=e.prototype.closeOverlay=function(){var e=document.querySelector("#overlay");e.style.transition="0.5s",e.style.opacity="0",e.style.visibility="hidden"},e.prototype.init=function(){var e=this;this.loadHelpSections();var t=document.querySelector("#toolbarTop"),n=document.querySelector("#toolbarBottom"),i=setTimeout(this.arrangeToolbarTopHelpSection.bind(this),500),r=setTimeout(this.arrangeToolbarBottomHelpSection.bind(this),500);t.addEventListener("DOMSubtreeModified",(function(){clearTimeout(i),i=setTimeout(e.arrangeToolbarTopHelpSection.bind(e),500)})),n.addEventListener("DOMSubtreeModified",();for(var o=document.querySelector(".closeOverlay span");o.firstChild;)o.removeChild(o.firstChild)},e.prototype.loadHelpSections=function(){var e=this;c.ZP.loaded().then((function(){e.accountHelpSection(c.ZP.get("Overlay.Help.Account")),e.articleViewHelpSection(c.ZP.get("Overlay.Help.Articleview")),e.calendarHelpSection(c.ZP.get("Overlay.Help.Calendar")),e.closeHelpSection(c.ZP.get("Overlay.Help.Close")),e.hamburgerMenuHelpSection(c.ZP.get("Overlay.Help.Humburger")),e.homepageHelpSection(c.ZP.get("Overlay.Help.Homepage")),e.mouseHelpSection(c.ZP.get("Overlay.Help.Mouse")),e.navigateHelpSection(c.ZP.get("Overlay.Help.Navigate")),e.pageViewHelpSection(c.ZP.get("Overlay.Help.Pageview")),e.searchHelpSection(c.ZP.get("Overlay.Help.Search")),e.startHelpSection(c.ZP.get("Overlay.Help.Start")),e.swipeHelpSection(c.ZP.get("Overlay.Help.Swipe")),e.viewHelpSection(c.ZP.get("Overlay.Help.View"))}))},e.prototype.setCookie=function(){var e=document.querySelector("#overlay-checkbox").checked?{expiresInDays:this.cookieExpirationInDays}:{};p.set(this.cookieKey,(!0).toString(),e)},e}(),Au="overlay",Eu=365;var Zu=n(14715),Mu=n(28641);unction Lu(e){var t=this;this.items=r.observableArray(e),this.selectedItem=r.observable(),this.selectedArticle=r.observable(),this.itemClick=function(e){t.selectedItem(e)},this.content=r.observable(),this.sectionHeader=r.observable(),this.selectedItem.subscribe((function(e){e&&e.getContent().then(()})),this.selectedArticle.subscribe((function(e){var n=t.selectedItem();n&&n.loaded().then((function(){setTimeout((function(){var t;(t=i("[name="+e+"]")[0])&&(0,Z.isFunction)(t.scrollIntoView)&&t.scrollIntoView()}))}))})),this.trySelectItem=function(e){var n=function(e){return t.items().filter((function(t){return e===t.id}))[0]}(e);return!!n&&(t.selectedItem(n),!0)},this.selectDefaultItem=Du.prototype={getContent:function(){if("resolved"!==this._contentLoadedDfd.state()){var e=this;(t=this.id,_n.Z.get("Help","GetContent",{nodeId:t})).then((function(t){e._contentLoadedDfd.resolve(t)})).catch(e._contentLoadedDfd.reject)}var t;return this._contentLoadedDfd.promise()},loaded:function(){return this._contentLoadedDfd.promise()}};var Nu,Ru,Vu,Bu={},Fu=new Un.B;Bu.init=Bu.registerRoutes=function(e){e.addRoute({name:"help",template:"help/{id}/{article}",defaults:{viewName:Ct.n3.Help,id:null,article:null},constraints:{viewName:new xa.i(Ct.n3.Help)},executeWith:function(e){Fu.then((function(){var t=!0;e&&e.id&&Vu.trySelectItem(e.id)&&(t=!1,e.article&&Vu.selectedArticle(e.article)),t&&Vu.selectDefaultItem()}))}})},Bu.showView=function(e){return Nu||Promise.all([_n.Z.get("Help","GetHelp"),c.zd.loaded()]).then((function(e){var t=e[0];Nu=!0;for(var n=[],r=0;r<t.Items.length;r++){var o=t.Items[r],a=new Du(o.Id,o.Title);n.push(a)}Vu=new Lu(n),c.zd.renderTo("v7.Client.Help",Vu,Ru),i.nd.gestures.bindDefault(Ru),Ru.find("[nd-scrollable=yes]"),Fu.resolve()})),e&&e.callback&&e.callback(),Promise.resolve()},Bu.getTopBarConfig=function(){return{backEnable:!0,header:"TopToolbar.Help",actionMenuEnable:!1,configMainMenuEnabled:!1,isTitleDisabled:!0,headerClass:"toolbar-helptitle"}},Bu.hide=function(){},Bu.reset=function(){},Bu.disable=function(){};var Ou=Bu,zu=(n(51228),n(44039)),Uu=n(59197),Hu=(n(86028),n(20384)),ju=n(20384),Wu={};Wu.providerIssueText=function(e){function t(t,n){for(var i=e.nd.data.toc.articles(),r=i.length;r--;)if(i[r].Id==t)return i[r+n];return i[0]}function n(e){return e&&(e.ArticleId=e.Id,e.ContentName=a.Z.contentName(),e.IssueDate=a.Z.issueDate(),e.Issue=a.Z.issue(),e.Culture=a.Z.contentCulture(),e.Language=a.Z.contentLanguage(),e.OriginalLanguage=a.Z.contentLanguage(),e.votesMeta=function(){return qn.Z.getMeta(e.ArticleId,qn.Z.contentTypes.ARTICLE)},e.voteLike=function(){return qn.Z.voteLike(e.ArticleId,qn.Z.contentTypes.ARTICLE)},e.voteDislike=function(){return qn.Z.voteDislike(e.ArticleId,qn.Z.contentTypes.ARTICLE)}),e}var i=null;return{getSections:getCurrentArticle:function(e){return n(t(e,0))},getNextArticle:getPreviousArticle:function(e){return n(t(e,-1))},getArticleFromNextSection:function(t){return n(function(t){for(var n=e.nd.data.toc.articles(),i=!1,r=0;r<n.length;r++)if(n[r].SectionName!=t){if(i)return n[r]}else i=!0}(t))},getArticleFromPreviousSection:function(t){return n(function(t){for(var n=e.nd.data.toc.articles(),i=!1,r=n.length;r--;)if(n[r].SectionName!=t){if(i)return n[r]}else i=!0}(t))},getArticleFromSection:function(t){return n(function(t){for(var n=e.nd.data.toc.articles(),i=n.length;i--;)if(n[i].SectionName==t)return n[i]}(t))},repository:onLoaded:function(e){},offLoaded:function(e){}}}(Hu),Wu.providerArticles=function(e){var t,n=null;function i(){if(!arguments.length)return n||((n=new Uu.Z).onlineListLoader=Ln.ZP.topNewsFeed),n;n=arguments[0]}function r(n){return n&&n.loaded()?((i=n.Id,o={articleId:i},r||(r=e.nd.utils.translation.currentLanguage()),r&&(o.lng=r),e.nd.services.api.get("articles","GetArticleForRadio",o)).then((function(n){n&&e(t).trigger("loaded",{ArticleId:n.Id,PageNumber:n.PageNumber,W:n.Rect.W,Y:n.Rect.Y,X:n.Rect.X,H:n.Rect.H,Text:n.Text,Image:n.Image,Culture:n.Culture})})),e.extend(n,{ArticleId:n.Id,ContentName:n.Issue.Title,IssueDate:n.Issue.ShortDateString,Issue:n.Issue.Id,Uid:n.Uid,SectionName:n.Section,Title:n.Title,votes:)):null;var i,r,o}function o(e){if(e)return s(e,e.next)}unction s(e,t){for(var n=t.call(e);n&&!c(n);)n=t.call(n);if(n&&c(n))return n}function u(e){e&&c(e)&&e.load()}function c(e){return e&&e.Type===Nn.g.article&&e.Id&&e.Issue}return t={getSections:function(){return[]},getCurrentArticle:function(e){var t=i().getArticleById(e);if(t)return u(o(t)),u(a(t)),r(t)},getNextArticle:function(e){var t=o(i().getArticleById(e));if(t)return u(o(t)),r(t)},getPreviousArticle:function(e){var t=a(i().getArticleById(e));if(t)return u(a(t)),r(t)},getArticleFromNextSection:function(e){},getArticleFromPreviousSection:function(e){},getArticleFromSection:function(e){},repository:i,onLoaded:function(n){e(t).on("loaded",n)},offLoaded:}(Hu),ju.nd.viewer.radio.providerIssueText=Wu.providerIssueText,ju.nd.viewer.radio.providerArticles=Wu.providerArticles;var qu,Gu=Wu,Xu=n(52007),Yu=n(93879),Ku=n(32717),Ju=function(e){function t(t,n,i,r){void 0===r&&(r=!1);var o=e.call(this,n,i,r)||this;return Xs.Z.bind(t,"radioplaystarted",null,o._onRadioPlayStarted.bind(o)),Xs.Z.bind(t,"radioplaypaused",null,o._onRadioPlayPaused.bind(o)),Xs.Z.bind(t,"radioplayresumed",null,o._onRadioPlayResumed.bind(o)),Xs.Z.bind(t,"radioplaystopped",null,o._onRadioPlayStopped.bind(o)),o}return(0,q.ZT)(t,e),t.prototype._onRadioPlayStopped=function(){this._reading.length&&(0,Z.last)(this._reading).freeze(),this._upload()},t.prototype._onRadioPlayStarted=function(e,t){this._onRadioPlayStopped();var n=this._getFrame(t.currentArticle,t.returnView);this._reading.push(n)},t.prototype._getFrame=function(e,t){var n=new Ku.KB(Ku.Jd.Passive);return n.item(e),!(0,Z.isFunction)(e.tokenized)||e.tokenized()||e.Id in this._historyItemIds||t!==Ct.n3.TopNews||(this._history.push(e),this._historyItemIds[e.Id]=1),n},t.prototype._onRadioPlayPaused=function(){this._reading.length&&(0,Z.last)(this._reading).pause()},t.prototype._onRadioPlayResumed=function(){this._reading.length&&(0,Z.last)(this._reading).resume()},t}(Yu.M),$u={},Qu=null,ec=new Lt.Z,tc=null;function nc(e){Lt.Z.current=ec,tc||(tc=new Ju(i.nd.viewer.radio,Ct.n3.Radio,e.dataProvider.repository(),e.returnView===Ct.n3.TopNews)),i.nd.viewer.radio.setDataProvider(e.dataProvider),i.nd.viewer.radio.init(Qu,e.returnView,e.isTopNewsFeedRadio),i.nd.viewer.radio.play(e.articleId),Qu.show(),e.callback&&e.callback()}$u.init=function(e){ec.radioViewContainer=Qu=e},$u.disable=function(){},$u.hide=function(){Qu.hide(),i.nd.viewer.radio.dispose()};var ic=function(e){qu=i.nd.viewer.views.getActiveViewName()},rc=new xa.i(Ct.n3.Radio);$u.registerRoutes=function(e){e.addRoute({name:"radio_country_newspaper_date_article",template:"{country}/{newspaper}/{issueDate}/{articleId}/radio",defaults:{viewName:Ct.n3.Radio,noLanding:!0},constraints:{country:Xu.v,newspaper:Xu.v,issueDate:Xu.v,articleId:Xu.v,viewName:rc},executeWith:ic}).addRoute({name:"radio_article",template:"{articleId}/radio",defaults:{viewName:Ct.n3.Radio,noLanding:!0},constraints:{articleId:Xu.v,viewName:rc},executeWith:ic})};var oc=[];a.Z.issueLoaded((),$u.showView=function(e){var t;return null===qu||qu===Ct.n3.EmptyView?e.articleId?function(e){return Gu.providerIssueText.repository().accessItem({ArticleId:e.articleId}).then((function(t){var n;return new Promise((function(i){n=i,oc.push(i);var r=t.Issue?t.Issue.Id:e.issue;a.Z.issue(r),a.Z.loadIssue(null,r),a.Z.contentCulture(t.Language)})).then(()})).then((function(){return new Promise((function(t,n){Dn.Z.articles((function(){e.dataProvider=Gu.providerIssueText,e.returnView=qu,nc(e),t()}),n),Dn.Z.reset()}))}))}(e):function(e){var t=new Un.B,n=Gu.providerArticles.repository();return n.load().then((function(){var i=function(e,t){if(!e||!e.count()||!t)return null;for(var n=e.head();n;){if(t.call(null,n))return n;n=n.next()}return null}(n.articles(),(function(e){return e.Type===Nn.g.article}))||{};e.articleId=i.Id,e.dataProvider=Gu.providerArticles,e.isTopNewsFeedRadio=!0,nc(e),t.resolve()}),t.reject),t.promise()}(e):(qu===Ct.n3.TextView||qu===Ct.n3.PagesView||qu===Ct.n3.IssueDetails||qu===Ct.n3.LatestIssues?t=Gu.providerIssueText:(t=Gu.providerArticles).repository(Lt.Z.current.contentProvider),e.dataProvider=t,e.returnView=qu,nc(e),Promise.resolve())},i.nd||(i.nd={}),i.nd.viewer||(i.nd.viewer={}),i.nd.viewer.radioView=$u;var ac=n(39639),sc={},uc=null,cc=null,lc=null,dc=null,hc=new Lt.Z,pc=null;sc.init=sc.show=function(e){if(Lt.Z.current=hc,!dc){var t=i.nd.config.get("ui.Views.TopNews.itemPreviewSizeFunction","topStories");hc.textViewColumnsBuilder=dc=new Va.Z({itemPreviewSizeFunction:t})}pc||(pc=new zu.Z),(0,Sa.Hy)({showIssueInfo:!0,showPageThumbnail:!0});var n=i.extend({showSections:!0,updatePreviewPanel:!0,updateInterval:6e4*i.nd.config.get("ui.Views.TopNews.updateInterval",60)},e);dc.reset(),lc||(lc=new i.nd.viewer.textView.view(uc)),cc||(cc=new i.nd.viewer.textView.controller(pc,ac.Z,lc)),pc.load().catch((function(){i.nd.navigation.showIssuePage(1,i.nd.viewer.app.issue())})),i.nd.viewer.pages.loaded()?cc.enable().show(n):i.nd.viewer.app.issueLoaded((function(){i.nd.viewer.app.bookmark()&&(n.page=i.nd.viewer.app.bookmark().page,n.articleId=i.nd.viewer.app.bookmark().articleId),cc.enable().show(n)}))},sc.reset=function(){},sc.disable=function(){cc&&cc.disable()},sc.hide=function(){cc.hide()},sc.visibleArticles=function(){return cc.visibleArticles()},sc.jump=function(e){cc.jump(e)},sc.jumpToPage=function(e){cc&&cc.jumpToPage(e)},sc.firstAvailableArticle=function(){return cc.firstAvailableArticle()},sc.firstAvailableArticleToListen=function(){return cc.firstAvailableArticleToListen()},sc.getTopBarConfig=sc.getNavigationHistoryConfig=sc.showView=function(e){return i.nd.data.loaders.online.externalItems.setSearchParams(e),this.show(e),Promise.resolve()},sc.resetState=function(){cc&&cc.resetState()},i.nd||(i.nd={}),i.nd.viewer||(i.nd.viewer={}),i.nd.viewer.external=i.extend({},new Ps.Z,sc),n(69015);var fc=n(1010),mc=n(90913),gc=n(45457),vc=n(97458),yc="TryAuthenticateByKey",_c="".concat(yc,"ResponseId"),bc="".concat(yc,"ResponseIdShown"),wc=null;function Cc(){var e=k.ZP.root({name:"root",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0});!function(e){for(var t=i("<div class='fontpreloader'></div>"),n=1;n<10;n++)t.append(i('<div class="font{0}">Aa</div>'.replace("{0}",n)));e.append(t)}(e.elm());var t=e.createChild({name:"sidebarContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0}),n=e.createChild({name:"topPanel",width:k.ZP.size.fill,height:k.ZP.size.auto,left:0,top:0});n.elm().css("zIndex",3);var r=e.createChild({name:"leftPanelContainer",height:k.ZP.size.fill,left:0,top:k.ZP.pos.auto,absolute:!0});r.elm().addClass("panel-navmenu").css({zIndex:2});var s,l=e.createChild({name:"mainPanel",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:k.ZP.pos.auto}),d=l.createChild({name:"contentPanel",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:k.ZP.pos.auto});d.elm().css("overflow","hidden"),0===(s=i("#Panel_loadingPanel")).length&&(s=d.createChild({name:"loadingPanel",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0}).elm()).addClass("panel panel-loading").css({zIndex:10}),(wc=i.nd.viewer.pagesViewContainer=d.createChild({name:"pagesViewContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0,visible:!1})).elm().css({overflow:"hidden",backgroundColor:"Black"});var h=d.createChild({name:"textViewContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0,visible:!1});h.elm().css({overflow:"hidden",backgroundColor:"white"});var f=d.createChild({name:"ftsArticlesContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0,visible:!1});f.elm().css({overflow:"hidden",backgroundColor:"white"});var v=d.createChild({name:"bookmarksContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0,visible:!1});v.elm().css({overflow:"hidden",backgroundColor:"white"});var y=d.createChild({name:"bookmarkContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0,visible:!1});y.elm().css({overflow:"hidden",backgroundColor:"white"});var _=d.createChild({name:"articleContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0,visible:!1});_.elm().css({overflow:"hidden",backgroundColor:"white"});var b=d.createChild({name:"manageBookmarksContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0,visible:!1});b.elm().css({overflow:"hidden",backgroundColor:"white"});var w=d.createChild({name:"emailAlertsContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0,visible:!1});w.elm().css({overflow:"hidden",backgroundColor:"white"});var C=d.createChild({name:"monitorsContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0,visible:!1});C.elm().css({overflow:"hidden",backgroundColor:"white"});var I=d.createChild({name:"profileContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0,visible:!1});I.elm().css({overflow:"hidden",backgroundColor:"white"});var P=d.createChild({name:"similarContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0,visible:!1});P.elm().css({overflow:"hidden",backgroundColor:"white"});var x=d.createChild({name:"categoriesContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0,visible:!1});x.elm().css({overflow:"hidden",backgroundColor:"white"});var S=d.createChild({name:"externalContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0,visible:!1});S.elm().css({overflow:"hidden",backgroundColor:"white"});var T=d.createChild({name:"votesContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0,visible:!1});T.elm().css({overflow:"hidden",backgroundColor:"white"});var E=e.createChild({name:"radioContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0,visible:!1,visible:!1});E.elm().css({overflow:"hidden"});var Z=d.createChild({name:"homeContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0,visible:!1});Z.elm().css({overflow:"hidden",backgroundColor:"white"});var M=d.createChild({name:"helpContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0,visible:!1});M.elm().css({overflow:"hidden",backgroundColor:"white"});var D,L=d.createChild({name:"errorContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0,visible:!1});L.elm().css({overflow:"hidden",backgroundColor:"white"}),(D=d.createChild({name:"readingMapContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0,visible:!1})).elm().css({overflow:"hidden",backgroundColor:"white"}),(D=d.createChild({name:"readingMapContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0,visible:!1})).elm().css({overflow:"hidden",backgroundColor:"white"});var N=d.createChild({name:"storeHubContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0,visible:!1});N.elm().css({overflow:"hidden",backgroundColor:"black"});var R=d.createChild({name:"emptyViewContainer",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0,absolute:!0,visible:!1});R.elm().addClass("l-emptyview"),h.createChild({name:"textViewMessagesPanel",width:k.ZP.size.fill,height:k.ZP.size.auto,left:0,top:0});var V=h.createChild({name:"textViewPanel",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:k.ZP.pos.auto}),B=(f.createChild({name:"ftsArticlesMessagesPanel",width:k.ZP.size.fill,height:k.ZP.size.auto,left:0,top:0}),f.createChild({name:"ftsArticlesPanel",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:k.ZP.pos.auto})),F=(v.createChild({name:"bookmarksMessagesPanel",width:k.ZP.size.fill,height:k.ZP.size.auto,left:0,top:0}),v.createChild({name:"bookmarksPanel",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:k.ZP.pos.auto})),O=(y.createChild({name:"bookmarkMessagesPanel",width:k.ZP.size.fill,height:k.ZP.size.auto,left:0,top:0}),y.createChild({name:"bookmarkPanel",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:k.ZP.pos.auto})),z=(b.createChild({name:"manageBookmarksMessagesPanel",width:k.ZP.size.fill,height:k.ZP.size.auto,left:0,top:0}),b.createChild({name:"manageBookmarksPanel",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:k.ZP.pos.auto})),U=(C.createChild({name:"monitorsMessagesPanel",width:k.ZP.size.fill,height:k.ZP.size.auto,left:0,top:0}),C.createChild({name:"monitorsPanel",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:k.ZP.pos.auto})),H=(I.createChild({name:"profileMessagesPanel",width:k.ZP.size.fill,height:k.ZP.size.auto,left:0,top:0}),I.createChild({name:"profilePanel",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:k.ZP.pos.auto})),j=(P.createChild({name:"similarMessagesPanel",width:k.ZP.size.fill,height:k.ZP.size.auto,left:0,top:0}),P.createChild({name:"similarPanel",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:k.ZP.pos.auto})),W=(x.createChild({name:"categoriesMessagesPanel",width:k.ZP.size.fill,height:k.ZP.size.auto,left:0,top:0}),x.createChild({name:"categoriesPanel",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:k.ZP.pos.auto})),G=(S.createChild({name:"externalMessagesPanel",width:k.ZP.size.fill,height:k.ZP.size.auto,left:0,top:0}),S.createChild({name:"externalPanel",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:k.ZP.pos.auto})),X=(T.createChild({name:"votesMessagesPanel",width:k.ZP.size.fill,height:k.ZP.size.auto,left:0,top:0}),T.createChild({name:"votesPanel",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:k.ZP.pos.auto})),Y=(_.createChild({name:"articleMessagesPanel",width:k.ZP.size.fill,height:k.ZP.size.auto,left:0,top:0}),_.createChild({name:"articlePanel",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:k.ZP.pos.auto})),K=E.createChild({name:"radioPanel",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:k.ZP.pos.auto}),$=(Z.createChild({name:"homePanel",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:k.ZP.pos.auto}),l.createChild({name:"thumbsViewPanel",width:k.ZP.size.fill,height:k.ZP.size.auto,left:0,top:k.ZP.pos.auto})),ee=(M.createChild({name:"helpMessagesPanel",width:k.ZP.size.fill,height:k.ZP.size.auto,left:0,top:0}),M.createChild({name:"helpPanel",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:k.ZP.pos.auto})),te=L.createChild({name:"errorPanel",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0}),ne=D.createChild({name:"readingMapPanel",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:k.ZP.pos.auto}),ie=N.createChild({name:"storeHubPanel",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:0}),re=R.createChild({name:"emptyViewPanel",width:k.ZP.size.fill,height:k.ZP.size.fill,left:0,top:k.ZP.pos.auto});Q.ZP.init(s[0]),k.ZP.reflow(),Zs.default.show(n),i.nd.viewer.thumbsView2.init($),g.Z.loaded().then((function(){i.nd.viewer.pagesView.init(wc),i.nd.viewer.sidebar.init(t,e),Bs.Z.init(r),qs.init(B),La.init(F),Ra.init(O),za.init(Y),Qa.init(z),Is.init(w),du.init(X),i.nd.viewer.radioView.init(K),hu.Z.init(V),au.init(U),lu.init(j),Ds.init(H),Us.init(W),i.nd.viewer.external.init(G),Ou.init(ee),Es.init(te),ks.init(ne),Ls.Z.init(ie),pu.init(re),Vt.Z.registerView(Ct.n3.Radio,i.nd.viewer.radioView,E),Vt.Z.registerView(Ct.n3.PagesView,i.nd.viewer.pagesView,wc),Vt.Z.registerView(Ct.n3.TextView,hu.Z,h),Vt.Z.registerView(Ct.n3.FTSArticles,qs,f),Vt.Z.registerView(Ct.n3.Bookmarks,La,v),Vt.Z.registerView(Ct.n3.Bookmark,Ra,y),Vt.Z.registerView(Ct.n3.Article,za,_),Vt.Z.registerView(Ct.n3.ManageBookmarks,Qa,b),Vt.Z.registerView(Ct.n3.EmailAlerts,Is,w),Vt.Z.registerView(Ct.n3.Votes,du,T),Vt.Z.registerView(Ct.n3.Monitors,au,C),Vt.Z.registerView(Ct.n3.Similar,lu,P),Vt.Z.registerView(Ct.n3.Profile,Ds,I),Vt.Z.registerView(Ct.n3.Categories,Us,x),Vt.Z.registerView(Ct.n3.External,i.nd.viewer.external,S),Vt.Z.registerView(Ct.n3.Help,Ou,M),Vt.Z.registerView(Ct.n3.ReadingMap,ks,D),Vt.Z.registerView(Ct.n3.StoreHub,Ls.Z,N),Vt.Z.registerView(Ct.n3.Error,Es,L),Vt.Z.registerView(Ct.n3.EmptyView,pu,R),function(){var e=!1;function t(t){var n=(0,ga.Jz)();return va.L.resolvePath(n,t).then((function(e){return fc.Xe(e.viewName)?null:(wt.Z.isLanding=t.viewName===Ct.n3.Error,t.viewName!==e.viewName&&wt.Z.updateState(e),e)})).then((function(e){return e?((0,rt.WI)((0,mc.eJ)({newConfig:e,isLegacyRoute:!0})),Vt.Z.tryChangeActiveView(e)):Vt.Z.tryChangeActiveView({viewName:Ct.n3.EmptyView})})).catch((function(t){if(!t||"function"!=typeof t.redirect){if(t&&J.Z.error(t),-1!==window.location.href.indexOf("@")||e)return e=!0,Vt.Z.showError();e=!0;var n=Ct.n3.PagesView;return wt.Z.goView(n),Vt.Z.tryChangeActiveView({viewName:n})}e=!0,t.redirect()}))}o.Z.isLogin()||wt.Z.resetState(),t(wt.Z.getState()).then((function(){var e,t,n,r;xu(),(0,Mu.z)(),e=wc,g.Z.loaded().then((function(){var t=(0,Vt.m)(),n=p.get(Au,!1),r=m.U.mobile&&(0,Su.A)();g.Z.get("pagesView.enableOverlay",!1)&&(t===Ct.n3.PagesView||t===Ct.n3.PagesView)&&!n&&!r&&function(e){Promise.all([c.ZP.loaded(),Tu.Z.loaded()]).then((function(){var t=e.elm().createChild("div").addClass("overlay").attr({id:"overlay"}),n=i("<button type='button' class='closeOverlay'><span>X</span></button>");n.on("click singleTapConfirmed singleTap",(function(){var e;e=i("#overlay-checkbox").is(":checked")?{expiresInDays:Eu}:{},p.set(Au,"true",e),i("#overlay").animate({opacity:0},400,(function(){i("#overlay").fadeOut(300),i(this).css({display:"none"})}))}));var r=i("<div id='overlayToolbar'></div>");r.append(n);var o=i("<div id='overlayContent'></div>"),a=i("<div id='overlay-chkbx-container'><input type='checkbox' id='overlay-checkbox'> <label for='overlay-checkbox'>"+c.ZP.val("Overlay.DonotShowAgain")+"</label></div>");t.append(r).append(o).append(a);var s=new ku;Tu.Z.renderTo("v7.Client.OverlayPage",s,o),ko.applyBindings(s,o[0]),e.elm().parent().append(t)}))}(e)})),t=p.get(yc),n=vc.Aq[t]||vc.Gn[t],(r=p.get(_c))!==p.get(bc)&&"function"==typeof n&&(p.set(bc,r),(0,A.Z)().alert(n())),function(){(0,q.mG)(this,void 0,void 0,(function(){var e,t,n,i,r,o;return(0,q.Jh)(this,(function(a){switch(a.label){case 0:return[4,g.Z.loaded()];case 1:return a.sent(),e=(0,Vt.m)(),t=m.U.mobile&&(0,Su.A)(),g.Z.get("features.".concat(e,".tour.enabled"),!1)&&!t?(n=g.Z.get("".concat(e,".tour")),i=n.options,r=n.steps,0===(o=Object.values(r).reduce((function(e,t){return t.element&&!document.querySelector(t.element)||e.push({element:t.element,intro:c.ZP.val(t.introResourceKey)}),e}),[])).length||(0,Zu.Z)().setOptions((0,q.pi)((0,q.pi)({},i),{steps:o})).start(),[2]):[2]}}))}))}()})),wt.Z.onNavigate((function(e){t(e)})),a.Z.pages.loadedChange((function(e){e.value&&a.Z&&wt.Z.updateState({currentIssueInfo:{cid:a.Z.cid(),issue:a.Z.issue(),name:a.Z.contentName(),date:a.Z.issueDate()}})})),u.default.onAfterAccountChanged.subscribe((),o.Z.onUserLocalesChanged(Ic)}()})),i(document.documentElement||document.body).ndbind("touchmove",()}function Ic(){var e=Vt.Z.getActiveViewName();e!=Ct.n3.TopNews&&e!=Ct.n3.Categories||Vt.Z.getActiveView().reset({resetFeed:!0})}var Pc,xc=!1;function Sc(){return xc?Promise.resolve():(xc=!0,Promise.all([gc.E8(),Vs.resolved()]).then(())}n(64404),function(e){e.TimingTrack="[Timing] Track"}(Pc||(Pc={}));var Tc,kc=Ac=n(20384);gc.pn()?Tc=(new Date).getTime():gc.E8().then((),y.c.loaded().then((function(){function e(e,t,n){return this.category=e,this.variable=t,this.label=n||void 0,this.startTime,this.endTime,this}function t(e){de.U.send(new kc({category:e.category,variable:e.variable,duration:e.duration,label:e.label}))}e.prototype.startTime=function(e){return this.startTime=e||(new Date).getTime(),this},e.prototype.endTime=function(){return this.endTime=(new Date).getTime(),this},e.prototype.endAndSend=e.prototype.send=function(){return de.U.send(new kc({category:this.category,variable:this.variable,duration:this.endTime-this.startTime,label:this.label})),this},window.NDLoader&&NDLoader._tacks&&(Z.each(NDLoader._tacks,t),NDLoader.addJsonTiming=t);var n=[],i=!0;Ac.nd.event.bind(Vt.Z,"activeViewChanging",(function(){var t=Vt.Z.getActiveViewName();if(i){i=!1;var r=window.performance&&performance.timing&&performance.timing.navigationStart||window.NDLoader&&NDLoader.navigationStart;r&&(new e("FirstViewLoading",t).startTime(r).endAndSend(),n.push(new e("FirstViewLoaded",t).startTime(r)));var o=window.NDLoader&&NDLoader.executionStart;o&&n.push(new e("FirstViewLoaded2",t).startTime(o));var a=Tc;a&&n.push(new e("FirstViewLoaded3",t).startTime(a))}n.push(new e("RenderView",t).startTime())})),Ac.nd.event.bind(Vt.Z,"activeViewChanged",(function(){n&&(Z.invokeMap(n,"endAndSend"),n=[])}))})).catch(Et.logError),g.Z.loaded().then((function(){var e=g.Z.get("ui.AppInstaller",{});if(e&&e.enable&&(t=e.devices||"",m.U&&m.U.current&&_.some(t.toLowerCase().split(","),(function(e){return e.current.toLowerCase()===e})))){var t,n=p.get("AppInstalled"),i=n?parseInt(n,10):e.retries;if(0!==i){var r=function(){Xs.Z.unbind(Vt.Z,"activeViewChanged",r);var e=(0,A.Z)(),t={message:c.ZP.format("Dialogs.AppInstaller.Note",m.U.current),nextRetries:i-1,dontShowAgain:ko.observable(!1),templateName:"v7.Client.Dialogs.AppInstaller",type:"custom",close:function(){e.hide()},confirm:function(){t.nextRetries=0,e.hide();var n=new h.Z.menu.controllers.singleItem;n.itemsControllerCTOR(h.Z.menu.items.controllers.get("issueDownload")).itemsControllerParams([n]),n.show({position:{x:event.pageX||event.touchX||0,y:event.pageY||event.touchY||0}})}};e.onClosed((function(){var e=t.dontShowAgain()?0:t.nextRetries;p.set("AppInstalled",e,{expires:1e4})})),e.show(t)};Xs.Z.bind(Vt.Z,"activeViewChanged",r)}}})),n(65557);var Ec=Date.now(),Zc=864e5,Mc=[""].concat(R.v._domPrefixes),Dc="keypress mousedown mouseup "+["touchstart","touchend","pointerdown","pointerup","visibilitychange"].map((function(e){return Mc.map(().join(" ")})).join(" ");i(document).on(Dc,(),function e(){var t=Date.now()-Ec,n=wt.Z.getState().viewName===Ct.n3.TopNews;if(t>Zc){if(n)return void c.ZP.valAsync("v7.Client.RefreshRequired").then((function(e){(0,A.Z)().alert(e).then((function(){document.location.reload(!0)}))}));Ec=Date.now(),t=0}setTimeout(e,Zc-t)}();var Lc=n(60683),Nc=n(66996),Rc=Lc.wC.ginormous,Vc=new Nc.Z("user-pictures"),Bc=function(){function e(e){var t=this;if(this.isLoading=(0,r.observable)(!1),this.avatarHtml=(0,r.observable)(""),this.size=e.size||Rc,this.size.width<16)throw new Error("Specified width (".concat(e.size.width,") less than allowed ").concat(16));if(this.size.height<16)throw new Error("Specified height (".concat(e.size.height,") less than allowed ").concat(16));this.isAlterable=(0,r.isObservable)(e.alterable)?e.alterable:(0,r.observable)(!!e.alterable),this.nickname=(0,r.isObservable)(e.profile.nickname)?e.profile.nickname:(0,r.observable)(e.profile.nickname),this.photoUrl=(0,r.isObservable)(e.profile.photoUrl)?e.profile.photoUrl:(0,r.observable)(e.profile.photoUrl),this.avatarImageId=(0,r.isObservable)(e.profile.avatarImageId)?e.profile.avatarImageId:(0,r.observable)(e.profile.avatarImageId||""),this.isLoading=(0,r.observable)(!1);var n=function(){t.avatarHtml((0,Lc.b_)({nickname:t.nickname(),imageId:t.avatarImageId(),size:t.size,fallbackAvatarUrl:t.photoUrl()}))};this.nickname.subscribe(n),this.avatarImageId.subscribe(n),this.photoUrl.subscribe(n),this.deleteAvatarAvailable=ko.pureComputed((function(){return t.isAlterable()&&!t.isLoading()&&(""!==t.avatarImageId()||""!==t.photoUrl())})),n()}return e.prototype.changeAvatar=function(){var e=this;if(!this.isAlterable())throw new Error("User photo is not alterable.");return this.isLoading()?Promise.reject(new Error("Alter is not available at the moment.")):this.upload({onUploadStart:function(){e.isLoading(!0)}}).then((function(e){return(0,Lc.n1)(e.fileId)})).then((function(t){return e.avatarImageId(t.imageId),o.Z.userStateChanged(),t.imageId})).catch((function(e){var t=e&&e.message?e.message:c.ZP.val("Errors.ErrorOccurred","An error occurred.");throw(0,A.Z)().alert(t,c.ZP.val("Buttons.Ok.Text","OK"),!0),J.Z.error(t),e})).finally((function(){e.isLoading(!1)}))},e.prototype.deleteAvatar=function(){var e=this;return this.isLoading(!0),(0,Lc._Q)().then(().catch((function(e){throw(0,A.Z)().alert(e.message||c.ZP.val("Errors.ErrorOccurred","An error occurred."),c.ZP.val("Buttons.Ok.Text","OK"),!0),e})).finally((function(){e.isLoading(!1)}))},e.prototype.dispose=e.prototype.upload=e}(),Fc="userphoto",Oc={viewModel:{createViewModel:function(e){return new Bc(e)}},template:{ndTemplate:"v7.Client.UserPhoto.ko.Component"}};r.components.isRegistered(Fc)||r.components.register(Fc,Oc),n(63707),n(85195);var zc=n(91697),Uc=n(23197),Hc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,q.ZT)(t,e),t.prototype.activate=t}(Uc.Z);G.Z.externalSignIn=new Hc;var jc=n(98635),Wc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,q.ZT)(t,e),t.prototype.activate=function(e){var t=e.provider;return(0,jc.LW)(t).catch((function(e){if(!e||"Errors.LastAccountForSignIn"!==e.resourceKey)return Promise.reject(e);var t=(0,A.Z)();return t.show({type:"custom",templateName:"v7.Client.Dialogs.ExternalProfileCannotBeUnlinked",manageAccount:)}))},t}(Uc.Z);G.Z.unlinkExternalProfile=new Wc;var qc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,q.ZT)(t,e),t.prototype.activate=function(e){var t=e.url;void 0!==window.nativeAppBridge?window.nativeAppBridge.openUrlInExternalBrowser(t):window.open(t)},t}(Uc.Z);G.Z.openWindow=new qc;var Gc=n(15267),Xc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,q.ZT)(t,e),t.prototype.activate=function(e){var t=this,n=e.url;if(void 0!==this._currentWindow){try{this._currentWindow.focus()}catch(e){(0,Et.logError)(e)}return Promise.reject("Action in progress...")}return this._currentWindow=window.open(n),(0,Gc.K)(this._currentWindow).catch(Et.logAndAlertError).finally((function(){t._currentWindow=void 0}))},t}(Uc.Z);G.Z.manageExternalSubscription=new Xc;var Yc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,q.ZT)(t,e),t.prototype.activate=function(e){var t=e.provider;return(0,jc.$V)(t).catch(Et.logError)},t}(Uc.Z);G.Z.unlinkExternalSubscription=new Yc;var Kc=function(){function e(e){if(!e.cid)throw new Error("'cid' was not specified.");if(e.maxPreviousIssues<=0)throw new Error("'maxPreviousIssues' must be greater than 0.");if(e.thumbnailWidth<=0)throw new Error("'thumbnailWidth' must be greater than 0.");this.cid=e.cid,this.maxPreviousIssues=e.maxPreviousIssues,this.thumbnailWidth=e.thumbnailWidth,this.previousIssues=r.observableArray([]),this.slug=r.observable(),this.init()}return e.prototype.init=function(){var e=this;Promise.all([(0,St.b)(this.cid),Ao.Z.load(this.cid)]).then((function(t){var n=(0,q.CR)(t,1)[0];e.slug(n.slug);var i=Ao.Z.getIssuesDates().slice(0,e.maxPreviousIssues);(0,Z.forEach)(i,(function(t){var n=(0,ot.vR)(e.cid,t,e.thumbnailWidth),i=parseInt(t.substr(0,4),10),r=parseInt(t.substr(4,2),10)-1,o=parseInt(t.substr(6,2),10),a={issueDateString:t,issueDateStringFormatted:new Date(i,r,o).toDateString(),issueUrl:"/".concat(e.slug(),"/").concat(t),thumbnailUrl:n};e.previousIssues.push(a)}))}))},e}(),Jc={viewModel:Kc,template:'\n<div data-bind="foreach: previousIssues">\n    <a data-bind="attr: { href: $data.issueUrl, title: \'Read now!\' }">\n        <img data-bind="attr: { src: $data.thumbnailUrl }"/>\n    </a>\n    <p data-bind="text: $data.issueDateStringFormatted"></p>\n</div>\n'},$c="previous-issues-thumbnails";r.components.isRegistered($c)||r.components.register($c,Jc);var Qc,el,tl,nl,il=n(14581),rl=n(96147),ol={getData:function(e){return Qc[e]},getIssuesDates:function(){return tl},getIssueInfos:function(e){return nl[e]},load:function(e,t){return void 0===t&&(t=!1),(0,q.mG)(this,void 0,void 0,(function(){var n,i,r,o;return(0,q.Jh)(this,(function(a){switch(a.label){case 0:if(!tl&&!t&&el===e)return[2,tl];a.label=1;case 1:return a.trys.push([1,3,,4]),el=e,[4,Promise.all(e.map((function(e){return(0,rl.w)(e)})))];case 2:for(n=a.sent(),i=function(t){var i,r,o;Qc=(0,q.pi)((0,q.pi)({},Qc),((i={})[e[t]]=n[t],i));var a=[],s=[];Object.keys(n[t].years).forEach((function(e){Object.keys(n[t].years[e]).forEach((function(i){Object.keys(n[t].years[e][i]).forEach((function(r){a.unshift("".concat(e).concat(i.padStart(2,"0")).concat(r.padStart(2,"0"))),s.unshift(n[t].years[e][i][r])}))}))})),tl=(0,q.pi)((0,q.pi)({},tl),((r={})[e[t]]=a,r)),nl=(0,q.pi)((0,q.pi)({},nl),((o={})[e[t]]=s,o))},r=0;r<e.length;r++)i(r);return[3,4];case 3:return o=a.sent(),J.Z.error(o),[3,4];case 4:return[2]}}))}))}},al=function(){function e(e){var t=this;this.validateParameters(e),this.dateRangeDropDownOptions=e.dateRangeDropDownOptions,this.maxIssuesPerRow=e.maxIssuesPerRow,this.maxPreviousIssues=e.maxPreviousIssues,this.publications=e.publications.map((),this.thumbnailWidth=e.thumbnailWidth,this.weekdaysClasses=e.weekdaysClasses,this.dateRangeInDays=r.observable(),this.loadMoreCounter=r.observable(1),this.previousIssues=r.observableArray([]),this.previousIssuesGroupedByDate=r.observableArray([]),this.oldestIssueDate=r.computed((function(){if(isNaN(Number(t.dateRangeInDays())))return new Date(0);var e=new Date;return e.setDate(e.getDate()-t.dateRangeInDays()*t.loadMoreCounter()),e})),this.numberOfPreviousIssuesLoaded=r.computed((function(){var e=(0,Z.filter)(t.previousIssuesGroupedByDate(),(),n=0;return(0,Z.forEach)(e,(function(e){(0,Z.forEach)(e.rows,()})),n})),this.showingResultsText=r.computed((function(){return"Showing 1 - ".concat(t.numberOfPreviousIssuesLoaded()," of ").concat(t.previousIssues().length," results")})),this.isLoadLessButtonVisible=r.computed((),this.isLoadMoreButtonVisible=r.computed((function(){return t.numberOfPreviousIssuesLoaded()<t.previousIssues().length})),this.loadPreviousIssues()}return e.prototype.getDateFormatted=function(e){return"".concat(["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][e.getDay()]," ").concat(["January","February","March","April","May","June","July","August","September","October","November","December"][e.getMonth()]," ").concat(e.getDate()," ").concat(e.getFullYear())},e.prototype.getWeekdayClass=function(e){return this.weekdaysClasses[e.getDay()].class},e.prototype.loadLessIssues=function(){if(this.loadMoreCounter()<1)throw new Error("Cannot load less issues.");this.loadMoreCounter(this.loadMoreCounter()-1)},e.prototype.loadMoreIssues=e.prototype.groupPreviousIssuesByDate=function(){var e=this;this.previousIssuesGroupedByDate([]);var t=(0,Z.groupBy)(this.previousIssues(),(function(e){return e.issueDate}));(0,Z.forEach)(t,(function(t,n){var i=(0,Z.chunk)(t,e.maxIssuesPerRow),r=new Array;(0,Z.forEach)(i,(),e.previousIssuesGroupedByDate.push({date:new Date(n),rows:r})}))},e.prototype.loadPreviousIssues=function(){return(0,q.mG)(this,void 0,Promise,(function(){var e,t=this;return(0,q.Jh)(this,(function(n){return this.previousIssues([]),e=this.publications.map((function(e){return e.cid.toLowerCase()})),Promise.all([(0,St.FH)(e),ol.load(e)]).then((function(e){var n=(0,q.CR)(e,1)[0],i=ol.getIssuesDates();(0,Z.forEach)(n,(function(e){var n=i[e.cid];(0,Z.forEach)(n,(function(n){var i=(0,il.Xn)(n),r=(0,ot.vR)(e.cid,n,t.thumbnailWidth),o=t.publications.find((function(t){return t.cid===e.cid})).editionName,a={cid:e.cid,name:e.name,editionName:o,issueDate:i,issueDateString:n,issueDateStringFormatted:i.toDateString(),issueUrl:"/".concat(e.slug,"/").concat(n),thumbnailUrl:r};t.previousIssues.push(a)}))})),t.groupPreviousIssuesByDate(),t.previousIssuesGroupedByDate().sort((),t.previousIssuesGroupedByDate(t.previousIssuesGroupedByDate())})),[2]}))}))},e.prototype.validateParameters=function(e){if(!e.dateRangeDropDownOptions)throw new Error("'dateRangeDropDownOptions' was not specified.");if(0===e.dateRangeDropDownOptions.length)throw new Error("'dateRangeDropDownOptions' is empty.");if((0,Z.forEach)(e.dateRangeDropDownOptions,(function(e){if("all"!==e.toLowerCase()&&!Number.isInteger(parseFloat(e)))throw new Error("'dateRangeDropDownOptions' is invalid. Value (".concat(e,") must be integer or 'All'."))})),!e.maxIssuesPerRow)throw new Error("'maxIssuesPerRow' was not specified.");if(e.maxIssuesPerRow<1||e.maxIssuesPerRow>4)throw new Error("'maxIssuesPerRow' must be between 1 and 4.");if(!e.maxPreviousIssues)throw new Error("'maxPreviousIssues' was not specified.");if(e.maxPreviousIssues<=0)throw new Error("'maxPreviousIssues' must be greater than 0.");if(!e.publications)throw new Error("'publications' was not specified.");if(0===e.publications.length)throw new Error("'publications' is empty.");if((0,Z.forEach)(e.publications,(),e.thumbnailWidth<=0)throw new Error("'thumbnailWidth' must be greater than 0.");if(!e.weekdaysClasses)throw new Error("'weekdaysClasses' was not specified.");if(0===e.weekdaysClasses.length)throw new Error("'weekdaysClasses' is empty.");(0,Z.forEach)(e.weekdaysClasses,(function(e){if(0!==e.weekday&&!e.weekday||!e.class)throw new Error("'weekdaysClasses.weekday' or 'weekdaysClasses.class' is not defined.")}))},e}(),sl={viewModel:al,template:'\n    <label for="date-range-dropdown">Date range in days </label>\n    <select id="date-range-dropdown" data-bind="options: dateRangeDropDownOptions,\n                                                         value: dateRangeInDays,\n                                                         event: { change: loadPreviousIssues }">\n    </select>\n    <span data-bind="text: showingResultsText"></span>\n\n    <div data-bind="foreach: previousIssuesGroupedByDate">\n        \x3c!-- ko if: $data.date >= $component.oldestIssueDate() --\x3e\n        <section>\n            <div class="album py-5">\n                <div class="container">\n                    <h1 class="jumbotron-heading" data-bind="text: $component.getDateFormatted($data.date)"></h1>\n                    <hr>\n                    <br>\n                    \x3c!-- ko foreach: $data.rows --\x3e\n                    <div class="row">\n                        \x3c!-- ko foreach: $data.previousIssues --\x3e\n                        <div data-bind="attr: { \'class\': $component.getWeekdayClass($parents[1].date) }">\n                            <a data-bind="attr: { href: $data.issueUrl, title: \'Read now!\' }">\n                                <img data-bind="attr: { src: $data.thumbnailUrl }">\n                            </a>\n                            <p class="pre-title" data-bind="text: $data.name"></p>\n                            <h5 class="title" data-bind="text: $data.editionName"></h5>\n                            <a class="read-now" data-bind="attr: { href: $data.issueUrl, title: \'Click here to read\' }">\n                                Read now &nbsp;\n                                <img class="read-now-icon" src="images/chevron.svg">\n                            </a>\n                        </div>\n                        \x3c!-- /ko --\x3e\n                    </div>\n                    \x3c!-- /ko --\x3e\n                </div>\n            </div>\n        </section>\n        \x3c!-- /ko --\x3e\n    </div>\n    <span data-bind="text: showingResultsText"></span>\n    </br>\n    \x3c!-- ko if: isLoadLessButtonVisible --\x3e\n    <button data-bind="click: loadLessIssues">Load less</button>\n    \x3c!-- /ko --\x3e\n    \x3c!-- ko if: isLoadMoreButtonVisible --\x3e\n    <button data-bind="click: loadMoreIssues">Load more</button>\n    \x3c!-- /ko --\x3e\n    '},ul="previous-issues-thumbnails-grouped";r.components.isRegistered(ul)||r.components.register(ul,sl);var cl="Menus";de.U.ofType(he.GM.ContextMenu).subscribe((function(e){y.c.event({category:cl,action:"ninedots",label:e.payload.action})})),de.U.ofType(he.GM.ContextMenuCompleted).subscribe((function(e){y.c.event({category:cl,action:"ninedots-completed",label:e.payload.action})})),de.U.ofType(he.GM.ContextMenuFailed).subscribe((function(e){y.c.event({category:cl,action:"ninedots-failed",label:e.payload.action})})),de.U.ofType(he.GM.IssueContextMenu).subscribe((function(e){y.c.event({category:cl,action:"threedots",label:e.payload.action})}));var ll=n(19153);de.U.ofType(ll.G.Exception).subscribe((),n(76280);var dl,hl=n(98008),pl=((dl={})[wn.GM.AddPaymentInfo]=hl.$.AddPaymentInfo,dl[wn.GM.AddToCart]=hl.$.AddToCart,dl[wn.GM.BeginCheckout]=hl.$.BeginCheckout,dl[wn.GM.CheckoutProgress]=hl.$.CheckoutProgress,dl[wn.GM.PromoClick]=hl.$.SelectContent,dl[wn.GM.Purchase]=hl.$.Purchase,dl[wn.GM.RemoveFromCart]=hl.$.RemoveFromCart,dl[wn.GM.SetCheckoutOption]=hl.$.SetCheckoutOption,dl);de.U.ofType(wn.GM.AddPaymentInfo,wn.GM.AddToCart,wn.GM.BeginCheckout,wn.GM.CheckoutProgress,wn.GM.PromoClick,wn.GM.Purchase,wn.GM.RemoveFromCart,wn.GM.SetCheckoutOption).subscribe((function(e){y.c.transaction({data:e.payload,type:pl[e.type]})}));var fl,ml,gl,vl=n(12594);de.U.ofType(vl.G.SidebarMenu).subscribe((function(e){y.c.event({category:"Menus",action:"mainmenu",label:e.payload.action})})),function(e){e.Played="[Audio] Played",e.Paused="[Audio] Paused",e.Ended="[Audio] Ended"}(fl||(fl={})),function(e){e.Played="[Video] Played",e.Paused="[Video] Paused",e.Ended="[Video] Ended"}(ml||(ml={})),function(e){e.Opened="[ImageGallery] Opened",e.Finished="[ImageGallery] Finished",e.Exited="[ImageGallery] Exited"}(gl||(gl={}));var yl,_l,bl,wl,Cl="Ad",Il="Translation",Pl="Richmedia",xl=((yl={})[Xn.GM.AdvertisementLoading]="adLoading",yl[Xn.GM.AdvertisementLoaded]="adLoaded",yl[Xn.GM.AdvertisementLoadFailed]="adLoadFailed",yl),Sl=((_l={})[Xn.GM.ShowRelatedWithAd]="showRelatedWithAd",_l[Xn.GM.RelatedAdAvailable]="adAvailable",_l),Tl=((bl={})[Xn.GM.TranslateArticle]="translateArticle",bl[Xn.GM.TranslateIssue]="translateIssue",bl),kl=((wl={})[fl.Played]="audioPlayed",wl[fl.Paused]="audioPaused",wl[fl.Ended]="audioEnded",wl[ml.Played]="videoPlayed",wl[ml.Paused]="videoPaused",wl[ml.Ended]="videoEnded",wl[gl.Opened]="imageGalleryOpened",wl[gl.Finished]="imageGalleryFinished",wl[gl.Exited]="imageGalleryExited",wl);de.U.ofType(Xn.GM.ArticleExpandRequested,Xn.GM.ArticleExpanded).subscribe((function(e){y.c.event({category:"Article",action:"open",label:e.payload.title})})),de.U.ofType(Xn.GM.ArticleOpened).subscribe((),de.U.ofType(Xn.GM.ArticleViewed).subscribe((function(e){y.c.event({category:"Article",action:"view",label:e.payload.title,value:e.payload.articleId})})),de.U.ofType(Xn.GM.IssuePageChanged).subscribe((function(e){var t={cid:e.payload.cid,issueDate:e.payload.issueDate};y.c.pageView({title:e.payload.title,context:t})})),de.U.ofType(Xn.GM.CommonPageChanged).subscribe((),de.U.ofType(Xn.GM.SmartFlowAction).subscribe((function(e){y.c.event({category:"SmartFlow",action:e.payload.eventAction,isInteractive:!0})})),de.U.ofType(Xn.GM.IssueTextViewAction).subscribe((function(e){var t={cid:e.payload.cid,issueDate:e.payload.issueDate};y.c.event({category:"TextView",action:e.payload.eventAction,isInteractive:!0,context:t})})),de.U.ofType(Xn.GM.AdvertisementLoading,Xn.GM.AdvertisementLoaded,Xn.GM.AdvertisementLoadFailed).subscribe((function(e){var t=xl[e.type];y.c.event({category:Cl,action:t,isInteractive:!0})})),de.U.ofType(Xn.GM.AdvertisementGeneral).subscribe((function(e){y.c.event({category:Cl,action:e.payload.eventAction,isInteractive:!0})})),de.U.ofType(Xn.GM.AdvertisementImpression).subscribe((function(e){y.c.event({category:Cl,action:e.payload.eventAction,label:e.payload.label,value:+e.payload.value,isInteractive:!0})})),de.U.ofType(Xn.GM.ShowRelatedWithAd,Xn.GM.RelatedAdAvailable).subscribe((function(e){var t=Sl[e.type];y.c.event({category:"Related",action:t,isInteractive:!0})})),de.U.ofType(Xn.GM.TranslateArticle).subscribe((function(e){var t=Tl[e.type];y.c.event({category:Il,action:t,label:e.payload.articleId,value:+e.payload.translation})})),de.U.ofType(Xn.GM.TranslateIssue).subscribe((function(e){var t=Tl[e.type];y.c.event({category:Il,action:t,label:e.payload.cid,value:e.payload.translation})})),de.U.ofType(fl.Played,fl.Paused,fl.Ended).subscribe((function(e){var t=kl[e.type],n={category:Pl,action:t,label:e.payload.audioKey};y.c.event(n)})),de.U.ofType(ml.Played,ml.Paused,ml.Ended).subscribe((function(e){var t=kl[e.type],n={category:Pl,action:t,label:e.payload.videoKey};y.c.event(n)})),de.U.ofType(gl.Opened,gl.Finished,gl.Exited).subscribe((function(e){var t={category:Pl,action:kl[e.type],label:e.payload.caption};y.c.event(t)})),de.U.ofType(Pc.TimingTrack).subscribe((function(e){y.c.timing(e.payload.category,e.payload.variable,e.payload.duration,e.payload.label)}));var Al=n(82627),El=function(){return(0,Vt.m)()===Ct.n3.PagesView||(0,Vt.m)()===Ct.n3.TextView};window.ndGlobal=window.ndGlobal||{cid:function(){return El()?a.Z.cid():void 0},issueDate:function(){return El()?(0,il.YL)(a.Z.issue()):void 0}},(0,sa.y)("nd.viewer.textview.articlelayout.builder.worker",(function(){return aa})),(0,Al.V)(),(0,C.FH)(window.serviceUrl),I.monitorCookies(),Co.Z.view.preload(),n.p=window.scriptBaseUrl,(0,Io.P)(),window.__PR_MOBILE||i((function(){(0,P.S)().then(Sc).then(u.default.init)})),fa(),(0,ma.S)()},26763:function(e,t,n){"use strict";n.d(t,{Z:function(){return We}});var i=n(22970),r=n(11144),o=n(20384),a=n(60231),s=n(40180),u=n(97781),c=n(71357),l=n(46720),d=n(27670),h=n(24458),p=n(88769),f=n(40605),m=n(46046),g=n(76278),v={disabled:!0,movingEnabled:!1,distFactor:.8,showHideTime:500,initialState:g.SB.closed,speed:1},y=function(){function e(){this._loaded=!1,this.disabled=!1,this.config=v}return e.prototype.init=function(e,t){var n=this;return this.$container=e,(0,s.isString)(e)&&(this.$container=o(e)),this._render(this.$container).then((function(){n._leftBorder=null,n.panelState=g.SB.unknown,n._syncHeightToContentPanel(),n._width=n.$container.width(),n._height=n.$container.height(),n.updateConfig(t),n.updatePositionByConfig(),l.Z.bind(window,"resize",null,n._onResize.bind(n)),n._onResize(),n._loaded=!0}))},e.prototype._onResize=function(){var e=this;f.ZP.resize((function(){e._syncHeightToContentPanel(),e._width=e.$container.width(),e._height=e.$container.height(),e.updatePositionByConfig()}))},e.prototype.updateConfig=function(e){this.config=(0,s.assign)({},v,e),this.config.disabled&&(this.config.initialState=g.SB.closed),(null==e?void 0:e.width)&&(this._width=e.width,this.$container.width(e.width))},e.prototype.updatePositionByConfig=function(){return this.disabled||this.config&&this.config.initialState===g.SB.closed||m.Z.isCompactScreen()&&this.config&&!this.config.showInCompactMode?this.hide():this.show()},e.prototype.toggleView=function(){o("#Panel_root").toggleClass("navmenu--open")},e.prototype.hideViewInCompactMode=e.prototype.changePanelPositionByDelta=function(e){var t=e.delta,n=t,i=!1;switch(e.reason){case p.c8.fling:case p.c8.keyPress:n=Math.sign(t)*Number.MAX_VALUE;break;case p.c8.mouseWheel:Math.abs(t)<30?i=!0:n=Math.sign(t)*Number.MAX_VALUE;break;case p.c8.drag:i=!0;break;case p.c8.bounce:case p.c8.alignmentCorrection:case p.c8.scrollZone:default:n=0}var r=this._getExpectedGeometry(n,i);if(r.pos.x!==this._leftBorder){var o=i?0:Math.abs(r.pos.x-this._leftBorder)/this.config.speed;this._setPanelPosition(r.pos.x,o)}return r},e.prototype.hide=function(){return this.$container.hide(),this._setPanelPosition(-this._width),this._getGeometry(-this._width)},e.prototype.show=function(){return this.$container.show(),this._setPanelPosition(0),this._getGeometry(0)},e.prototype._getExpectedGeometry=function(e,t){if(void 0===t&&(t=!1),this.config&&this.config.disabled||0===e)return this._getGeometry();var n=t||Math.abs(e)<10?e:e*this.config.distFactor,i=this._transitionMode?this._expectedPosition:this._getLeftBorderPosition(),r=Math.round(i+n);return r<-this._width&&(r=-this._width),r>0&&(r=0),this._getGeometry(r)},e.prototype._getGeometry=function(e){return{pos:{x:(0,s.isUndefined)(e)?this._leftBorder:e,y:0},size:{width:this._width,height:this._height}}},e.prototype._setPanelPosition=function(e,t){if(void 0===t&&(t=0),this.$container&&(this._transitionMode&&this._onTransitionEnd(),e!==this._leftBorder)){this._expectedPosition=e;var n=this.panelState;this.panelState=e<this._leftBorder?g.SB.closing:g.SB.opening,n===g.SB.closed&&this.panelState===g.SB.opening&&l.Z.global.trigger("leftPanelOpening"),this.$container.css({transitionDuration:"".concat(t,"ms"),transform:"translate3d(".concat(e,"px, 0, 0)")}).bind(o.props.transitionEndEvents,this._onTransitionEnd.bind(this)),this._transitionMode=!0}},e.prototype._onTransitionEnd=function(){this._transitionMode=!1,this.$container.unbind(o.props.transitionEndEvents),this._leftBorder=this._getLeftBorderPosition(),0===this._leftBorder?this.panelState=g.SB.opened:this._leftBorder===-this._width&&(this.panelState=g.SB.closed)},e.prototype._getLeftBorderPosition=function(){return new o.nd.matrix(this.$container.css("transform")).tx},e.prototype._syncHeightToContentPanel=function(){this.$container.height(o("#Panel_contentPanel").height())},e}(),_=y,b=(Object.freeze({forYou:"ForYou",following:"Following",savedSearches:"SavedSearches"}),Object.freeze({collections:"Collections",followings:"Followings",myTopics:"MyTopics",opinions:"Opinions",sections:"Sections",feed:"Feed",home:"Home",opinionFeed:"OpinionFeed",channelFeed:"ChannelFeed",opinionLeaders:"OpinionLeaders",searchByArticles:"SearchByArticles",searchOther:"SearchOther",searchOptions:"SearchOptions",searchActions:"SearchActions",opinionContributors:"OpinionContributors",similar:"Similar",columnists:"Columnists",realtime:"RealTime",addToMyPublications:"AddToMyPublications",viewSelector:"ViewSelector",calendar:"Calendar",tools:"Tools",pressreaderapp:"PressReaderApp",issuename:"IssueName",authors:"Authors",favorites:"Favorites",interests:"Interests",langSelector:"LangSelector",custom:"Custom"})),w=n(58653),C=n(14347),I=n(17447),P=n(18518),x=n(7390),S=n(14744),T=n(94267),k=n(54591),A=n(74981),E=new(function(){function e(){}return e.prototype.getContentMetaData=function(){return A.Z.get("navigationMenu",{timezoneOffset:(new Date).getTimezoneOffset()})},e}()),Z=n(6677),M=n(62106),D=new(n(94777).Z)({expire:1e3}),L=Object.freeze({metaData:"meta",opinions:"opinions",following:"following",similar:"similar"});unction R(e,t){return void 0===t&&(t=0),Object.freeze((0,s.assign)({},e,{count:t}))}var V,B,F=function(){function e(e){this._provider=e}return e.prototype.getContentMetaData=function(){var e=D.get(L.metaData);return e||(e=this._cachedGetMetaDataPromise=this._provider.getContentMetaData().then((function(e){return Object.freeze(e)})).catch(N),D.set(L.metaData,e),e)},e.prototype.getReadArticles=e.prototype.getActivityHistory=e.prototype.getMyTopics=function(){return Promise.all([this._getSectionMetaData(g.bx.topics),M.A.get()]).then((function(e){var t=(0,i.CR)(e,2),n=t[0],r=t[1],o=[];if(n&&n.length>0){var a=(0,s.keyBy)(r,"id");(0,s.map)(n,(function(e){return o.push(R(a[e.id],e.count))}))}else(0,s.map)(r,(function(e){return o.push(R(e,0))}));return o}))},e.prototype.getFollowing=function(){var e=D.get(L.following);return e||(e=Promise.all([this._getSectionMetaData(g.bx.following),this._getUserSettings(g.D7.following)]).then((function(e){var t=(0,i.CR)(e,2),n=t[0],r=t[1],o=[];if(n){var a=(0,s.keyBy)(r,"EnAccountNumber");(0,s.map)(n,(function(e){return o.push(R(a[e.id],e.count))}))}else(0,s.map)(r,(function(e){return o.push(R(e,0))}));return o})),D.set(L.following,e),e)},e.prototype.getOpinions=function(){return Promise.all([this._getSectionMetaData(g.bx.opinions),this._getUserOpinions()]).then((function(e){var t=(0,i.CR)(e,2),n=t[0],r=t[1],o=void 0===r?{}:r,a=[];if(n&&n.length>0){var u=(0,s.keyBy)(o.MyOpinions,"OpinionId");(0,s.map)(n,(function(e){u[e.id]&&a.push(R(u[e.id],e.count))}))}else(0,s.map)(o.MyOpinions,();return a}))},e.prototype.getNumSimilarArticles=function(e){var t=D.get(L.similar);return t||(t=A.Z.get("articles/".concat(e),"similars",{offset:0,limit:0}).then((function(e){return e.Meta.TotalCount})),D.set(L.similar,t),t)},e.prototype._getSectionMetaData=function(e){return this.getContentMetaData().then((function(t){if(!t)return[];var n=(0,s.find)(t.sections,(function(t){return t.type===e}));return n?n.items:[]}),(function(){return Promise.resolve([])}))},e.prototype._getUserSettings=function(e){return A.Z.get("user","settings").then(()},e.prototype._getUserOpinions=function(){var e=D.get(L.opinions);return e||(e=A.Z.get("Opinions","suggested",{text:"",skip:0,take:40}),D.set(L.opinions,e),e)},e}(),O=new F(E),z=n(60811),U=n(91574),H=n(80053),j={sections:[],following:[],monitors:[],opinions:[],locales:[],synchronized:!0},W=function(){function e(){var e=this;this.loaded=!1,this.minNumberItemsInSection=0,this.model={ctx:this,items:a.observableArray([]),isDeleteEnabled:a.pureComputed((function(){return e.model.items().length>e.minNumberItemsInSection})),title:a.observable(),addItemTitle:a.observable(),templateItem:a.observable(),isDraggable:a.observable(),hasRightButton:a.observable(),rightButtonTitle:a.observable(),editMode:a.observable(!1),closeDialog:this.closeSettingsDialog,onItemClick:this.onItemClick,addItemClick:this.addItemClick,changeItemStatusClick:this.changeItemStatusClick,manageItemClick:this.manageItemClick,enableEditMode:function(){return e._editMode(!0)},disableEditMode:function(){return e._editMode(!1)},listClass:a.observable("list-sections"),listScrolled:function(){return e._listScrolled()},loadingMore:a.observable(),updateSettings:resizeDialog:function(){e._resizeDialog()}},this.config={templateName:"v7.Client.ManageSettings",model:this.model}}return e.prototype.init=function(e){var t=this;return(0,s.forEach)(e,(function(e,n){t.model[n]&&(a.isObservable(t.model[n])?t.model[n](e):t.model[n]=e)})),this.reloadFeedSettings()},e.prototype.saveFeedSettings=function(){return z.t8("FeedSettings",B)},e.prototype.reloadFeedSettings=function(){var e=this;return z.U2("FeedSettings").then((function(t){B=(0,s.extend)(j,t),e.loaded=!0}))},Object.defineProperty(e,"settings",{get:function(){return B},enumerable:!1,configurable:!0}),Object.defineProperty(e,"dialog",{get:function(){return V},enumerable:!1,configurable:!0}),e.prototype.show=function(e,t){var n=this;return(V=U.Z.createInstance(t)).onHide((function(e,t){(0,s.isFunction)(n.callOnHide)&&n.callOnHide(t)})),this._updateModel(e),V.show(this.config),V},e.prototype.saveModel=e.prototype.onHide=function(e){return this.callOnHide=e,this},e.prototype.closeSettingsDialog=e.prototype.onItemClick=function(){},e.prototype.addItemClick=function(){},e.prototype.changeItemStatusClick=function(){},e.prototype.manageItemClick=function(){},e.prototype.signIn=function(){return C.Z.isLogin()?Promise.resolve():H.default.signIn({parentDialog:V}).then((function(){V.hide()}))},e.prototype._updateModel=function(e){return void 0===e&&(e=[]),this.model.items(e),Promise.resolve()},e.prototype._editMode=e.prototype._updateSettings=function(){return this.saveFeedSettings().then((function(){B.synchronized=!0}))},e.prototype._listScrolled=function(){},e.prototype._resizeDialog=function(){V.resize()},e}(),q=n(96389),G=function(){function e(e){var t=a.observable();(0,s.assign)(this,{id:e.id,text:a.observable(),unreaded:a.computed({write:function(e){return t(e>0?"+".concat(e):"")},read:t}),author:"",subtext:a.observable(),isPublic:!1,count:e.count}),this.populate(e).catch(Z.Z.error)}return e.prototype.populate=function(e){var t=this;if(this.id!==e.id)throw new Error("Cannot update Monitor VM. IDs are not matching.");return this.author=e.searchAuthor,this.isPublic=1===e.topicTypeId,this.unreaded(e.count),I.ZP.loaded().then((function(){return t._updateText(e),Promise.all([t._getPublicationsText(e),t._getLanguagesText(e)])})).then((function(n){var r=(0,i.CR)(n,2),o=r[0],a=r[1],s=!e.searchQuery&&e.searchAuthor?null:e.searchAuthor;t._updateMeta(s,o,a,t.isPublic)}))},e.prototype._updateText=function(e){var t=e.searchAuthor;!e.searchQuery&&t?this.text("".concat(I.ZP.val("Dialogs.AddMonitor.Author.Label"),": ").concat(t)):this.text(e.searchTerm||"Unnamed")},e.prototype._getPublicationsText=function(e){return e.newspapers&&e.newspapers.length>0?e.newspapers.length>1?Promise.resolve("".concat(e.newspapers.length," ").concat(I.ZP.val("Navigation.Sources"))):(0,q.b)(e.newspapers[0]).then((function(e){return e.name})):Promise.resolve(null)},e.prototype._getLanguagesText=function(e){return(0,s.isEmpty)(e.languages)?Promise.resolve(null):e.languages.length>1?Promise.resolve("".concat(e.languages.length," ").concat(I.ZP.val("Dialogs.AdvancedSearch.Languages"))):(0,q.Vb)().then((function(t){var n=(0,s.find)(t,(function(t){return t.iso===e.languages[0]}));return n?n.displayName:null}))},e.prototype._updateMeta=function(e,t,n,i){var r=[];e&&r.push(e),t&&r.push(t),n&&r.push(n),i&&r.push(I.ZP.val("Topics.TopStories")),this.subtext(r.join(", "))},e}(),X=[],Y=new(function(e){function t(){var t=e.call(this)||this;return t.config.name="ManageMyTopics",t}return(0,i.ZT)(t,e),t.prototype.init=function(){var t=this;return I.ZP.loaded().then((function(){e.prototype.init.call(t,{title:I.ZP.val("Topics.MyTopics"),addItemTitle:I.ZP.val("ManageSettings.MyTopics.Add"),templateItem:"Settings.MyTopicItem",isDraggable:!1,hasRightButton:!0,rightButtonTitle:I.ZP.val("Buttons.Alert")})}))},t.prototype._updateSettings=function(e){W.settings.monitors=[],(0,s.forEach)(e,()},t.prototype.changeItemStatusClick=function(e){var t,n=this,i=(0,s.find)(X,(function(t){return t.id===e.id}));t=!i.searchQuery&&i.searchAuthor?"".concat(I.ZP.val("Dialogs.AddMonitor.Author.Label"),": ").concat(i.searchAuthor):i.searchTerm;var r=I.ZP.get("Topics.DeleteTopicConfirmationMessage").replace("%topic%",t);(0,k.Z)().confirm(r).then((function(){T.Z.show(),S.C.delete(i.id).then((function(){n._updateModel()})).catch((function(){(0,k.Z)().alert(I.ZP.val("Topics.DeleteErrorMessage"))})).finally((function(){return T.Z.hide()}))}))},t.prototype.onItemClick=function(e){w.Z.topicsView.activate({type:"monitor",monitorId:e.id})},t.prototype.manageItemClick=function(e){var t=this,n=(0,s.find)(X,(function(t){return t.id===e.id}));return n&&this.manageTopic(n).then((),!1},t.prototype.manageTopic=t.prototype.addItemClick=function(){this.addNewTopic()},t.prototype.addNewTopic=function(){var e=this;return x.editTopicDialog.show({parentDialog:W.dialog,topic:{}}).then((function(t){return t.status===P.Y.Ok&&e._updateModel().then((function(){return W.dialog&&W.dialog.resize(),!0}))}))},t.prototype.getMyTopics=function(){return O.getMyTopics().then((function(e){return X=e||[]}))},t.prototype._updateModel=function(e){var t=this;return e?(this.model.items(e),Promise.resolve()):this.getMyTopics().then((function(n){e=(0,s.map)(n,(function(e){return new G(e)})),t.model.items(e)}))},t.prototype._editMode=function(t){e.prototype._editMode.call(this,t),this.model.title(I.ZP.val(t?"ManageSettings.MyTopics.Manage":"Topics.MyTopics"))},t}(W));Y.init();var K=Y,J=n(39114),$=null,Q=function(){function e(e){this.name="Unknown",this.minNumberItemsInSection=g.Qs.minNumberItemsInSection,this.addItemsPerMoreStep=g.Qs.addItemsPerMoreStep,this.model={hasMore:a.observable(!1),isAnonymous:a.observable(!0),selectedItem:a.observable(),items:a.observableArray([]),isSectionActive:a.observable()},this.template=e.template||"",this.disabled=!1,this.allItems=null}return e.prototype.init=function(){var e=this;this.model.isAnonymous(!C.Z.isLogin()),this._onUserStateChanged=function(){e.model.isAnonymous(!C.Z.isLogin()),$=null,e.reloadSection(!0)},this._onActiveSectionChanged=l.Z.bind(C.Z,"onuserstatechanged",this._onUserStateChanged),l.Z.global.bind("leftPanelActiveSectionChanged",this._onActiveSectionChanged),l.Z.global.bind("leftPanelOpening",(function(){e.reloadSection()})),this.model.moreClick=this.loaded=!0},e.prototype.dispose=function(){l.Z.global.unbind("leftPanelOpening"),this._onUserStateChanged&&l.Z.unbind(C.Z,"onuserstatechanged",this._onUserStateChanged),this._onActiveSectionChanged&&l.Z.global.unbind("leftPanelActiveSectionChanged",this._onActiveSectionChanged)},e.prototype.getName=function(){return this.name},e.prototype.reloadSection=function(e){return Promise.resolve()},e.prototype.updateActiveItem=e.prototype.hasSelectedItem=e.prototype.applyViewConfig=function(){},e.prototype.contentChangedSendEvent=function(){var e=this;setTimeout((function(){l.Z.trigger("leftPanelContentChanged",e,{})}),0)},e.prototype.markSectionActive=function(){$=this.name,l.Z.global.trigger("leftPanelActiveSectionChanged",this)},e.prototype.getActualViewName=e.prototype.isSectionActive=e.prototype.updateVisibleItems=function(e){var t=(0,s.keyBy)(this.model.items(),"id");(0,s.map)(e,(function(e){t[e.id]&&t[e.id].unreaded(e.count)}))},e.prototype.getInitialItemsForSection=function(t){void 0===t&&(t=!1);var n=this.minNumberItemsInSection,i=this.allItems||[];t&&(i=(0,s.filter)(i,(function(e){return(0,s.isFunction)(e.unreaded)?e.unreaded():e.count})));var r=i.length,o=this.model.selectedItem();if(o>0){var a=(0,s.findIndex)(i,(function(e){return e.id==o})),u=n;a>=u&&(e.moveObjectInArray(i,a,u),n++)}r<=n+1&&(n=r);var c=(0,s.slice)(i,0,n);return this.model.hasMore(c.length<r),c},e.prototype.addMoreItems=function(e,t,n){var i=e().length,r=(0,s.slice)(t,i,i+this.addItemsPerMoreStep);r.length>0&&((0,s.isFunction)(n)&&(r=n(r)),a.utils.arrayPushAll(e,r),this.model.hasMore(e().length<t.length),this.contentChangedSendEvent())},e.prototype.applyConfig=e.prototype.reloadSectionOrGoHome=function(e){var t=this;return this.reloadSection(e).then(()},e.prototype.isSelectedItemExists=function(){var e=this.model.selectedItem();return!!e&&(0,s.some)(this.allItems,(function(t){return t.id==e}))},e.prototype.goHome=e.prototype._applyParameter=function(e,t){(0,s.isUndefined)(this[e])||(this[e]=t[e])},e.prototype._markSectionActiveAndReload=function(){this.reloadSection(),this.markSectionActive()},e.moveObjectInArray=e}(),ee=function(e){function t(){var t=e.call(this,{template:"TextView.LeftPanel.Section.MyTopics"})||this;return t.name=b.myTopics,(0,s.assign)(t.model,{itemClick:function(e){t.markSectionActive(),e.unreaded(0),w.Z.topicsView.activate({type:"monitor",monitorId:e.id})},settingsClick:function(){K.reloadFeedSettings().then((function(){return K.show(t.allItems).onHide(()}))},manageTopicClick:function(e){var n=(0,s.find)(t.allMyOriginTopics,(function(t){return t.id===e.id}));K.manageTopic(n)},addTopic:function(){K.addNewTopic()}}),t}return(0,i.ZT)(t,e),t.prototype.init=function(){var t=this;this._mytopicsSubscription=this.model.items.subscribe((function(){t.contentChangedSendEvent()})),this._topicsUpdatesSubscription=S.C.updates.subscribe((function(){return t._onTopicsUpdates()})),e.prototype.init.call(this)},t.prototype.dispose=t.prototype.applyViewConfig=function(e){var t=e.viewName,n=e.monitorId;t!==h.n3.Monitors?this.model.selectedItem(void 0):(this.model.selectedItem(n),this._markSectionActiveAndReload())},t.prototype.reloadSection=function(e){var t=this;return this.disabled?Promise.resolve():C.Z.isLogin()?K.getMyTopics().then((function(n){t.allMyOriginTopics=n,t.allItems=(0,s.map)(n,(function(e){return new G(e)})),t._refreshSelection(e)})):(this.model.items([]),this.model.hasMore(!1),Promise.resolve())},t.prototype._refreshSelection=function(e){var t,n=this;!this.isSectionActive()||e||0===this.model.items().length?(t=(0,i.ev)([],(0,i.CR)(this.allItems),!1),t=(0,s.orderBy)(t,(function(e){return e.count}),!1).slice(0,g.Qs.minNumberItemsInSection)):t=(0,s.map)(this.model.items(),(function(e){return(0,s.find)(n.allItems,(function(t){return t.id===e.id}))}));var r=Number(this.model.selectedItem());if(r&&!(0,s.find)(t,(function(e){return e.id===r}))){var o=(0,s.find)(this.allItems,(function(e){return e.id===r}));o&&t.unshift(o)}this.model.items(t),this.model.hasMore(t.length<this.allItems.length)},t.prototype._onTopicsUpdates=function(){this.reloadSection(!0)},t}(Q),te=new ee,ne=n(7593),ie=n(48921),re=n(28873),oe=n(88477),ae=n(87079),se=function(e){var t=this,n=e.dialog,i=e.collection,r=e.res;this.collection=new ae.Z(i),this.isValid=a.computed((function(){return t.collection.isValid()})),this.dialogTitle=i.name,this.saveButtonText=r.val("Buttons.Save.Text","Save"),this.save=function(){if(t.isValid()){var e=t.collection.toDto();ie.Rm(e.id,e).then(().catch(oe.logAndAlertError)}},this.cancel=function(){n.hide(P.Y.Cancel)}},ue=function(e){var t=void 0===e?{}:e,n=t.parent,i=t.collection;return new Promise((function(e){I.ZP.loaded().then((function(){var t=U.Z.createInstance(n),r={templateName:"v7.Client.Dialogs.EditSharedCollection",model:new se({dialog:t,collection:i,res:I.ZP}),name:"EditCollectionDialog"};t.onHide((function(t,n){e(n)})),t.show(r)}))}))},ce=function(e){function t(){var t=e.call(this)||this;return t.config.name="ManageCollections",t}return(0,i.ZT)(t,e),t.prototype.init=function(){var t=this;return I.ZP.loaded().then((function(){e.prototype.init.call(t,{title:I.ZP.val("Dialogs.Bookmark.MyBookmarks"),addItemTitle:I.ZP.val("Buttons.CreateCollection"),templateItem:"Settings.MyCollectiontem",changeItemStatusClick:t.deleteItemClick,manageItemClick:t.manageItemClick,isDraggable:!0,hasRightButton:!1})}))},t.prototype.show=function(t,n,i){return this.model.addItemTitle(2===t?I.ZP.val("Buttons.CreateCollection"):void 0),e.prototype.show.call(this,n,i)},t.prototype.deleteItemClick=function(e){var t=this,n=I.ZP.format("v7.Client.Dialogs.Collections.DeleteConfirmationMessage",e.name);(0,k.Z)().confirm(n).then((function(){return t._deleteItem(e)}))},t.prototype._deleteItem=function(e){var t=this;return T.Z.show(),(0,ie.C5)(e.id).then((function(){t.model.items.remove(e),W.dialog.show(t.config),W.dialog.resize()})).catch((function(e){return(0,oe.logError)(e),(0,oe.alertError)({resourceKey:"v7.Client.Dialogs.Collections.DeleteErrorMessage"})})).finally((function(){return T.Z.hide()}))},t.prototype.manageItemClick=function(e){var t=this;return(3===e.type?ue({collection:e,parent:W.dialog}):re.Z.show({collection:e,parent:W.dialog})).then((function(n){var i=n.status;return i===P.Y.Ok&&(0,ie.bG)().then((function(n){t.model.items((0,s.filter)(n,(function(t){return t.type===e.type})))})).catch(oe.logError),i}))},t.prototype.addItemClick=function(){var e=this;re.Z.show({parent:W.dialog}).then((function(t){var n=t.collection;n&&(n.contentCount=0,n.type=2,n.isDeleteDisabled=!1,e.model.items.push(n),W.dialog.show(e.config))}))},t.prototype.getCollections=function(e,t){return e?(0,ie.vS)(e,t):Promise.resolve([])},t}(W),le=new ce;le.init();var de=n(81867),he=n(57136),pe=n(19237),fe=n(92270),me=n(70263),ge=n(24995),ve=function(e){function t(){var t=e.call(this,{template:"TextView.LeftPanel.Section.Collections"})||this;return t.name=b.collections,t._currentCollectionName=null,t._isCollectionActivating=!1,(0,s.assign)(t.model,{topCollections:a.observableArray(),userCollections:a.observableArray(),sharedCollections:a.observableArray(),isMyProfile:a.observable(!1),settingsClick:function(e,n){var i=Number(o(n.target).closest("a").attr("collection-type")),r=2===i?t.model.userCollections():t.model.sharedCollections();le.show(i,r)},selectCollection:function(e){t._isCollectionActivating=!0,w.Z.bookmarksView.activate(null,{profileId:t.profileId,collection:e.slug,collectionId:e.id})},createCollection:manageItemClick:function(e){le.manageItemClick(e).catch(oe.logError)}}),t.subscriptions=[],t.profileId=0,t._changeProfileSubject=new pe.x,t.changeProfileObservable=t._changeProfileSubject.asObservable(),t}return(0,i.ZT)(t,e),t.prototype.init=function(){var t=this,n=function(){return t._reloadSection(!0)};this.subscriptions.push(ie.xs.subscribe(n)),this.subscriptions.push(me.bookmarksChangeSubscription.subscribe(n)),this.subscriptions.push(ge.Cf.subscribe(n)),this.subscriptions.push(this.changeProfileObservable.pipe((0,fe.x)(null,(function(e){return e.profileId}))).subscribe(n)),e.prototype.init.call(this)},t.prototype.applyConfig=function(t){e.prototype.applyConfig.call(this,t);var n=d.Z.getActiveView();"function"==typeof(null==n?void 0:n.resetState)&&n.resetState({itemId:"0"});var i=t?t.profileId:void 0;this.reloadSection(!1,i)},t.prototype.applyViewConfig=function(e){var t=e.viewName,n=e.profileId,i=e.collectionId;if(t!==h.n3.Bookmarks)this.model.selectedItem(void 0),this._currentCollectionName=null;else{this.model.selectedItem(i);var r=(0,s.find)(this.model.userCollections(),(function(e){return e.id===i}));this._currentCollectionName=r&&r.name,this._isCollectionActivating=!1,this.profileId!==n&&this.applyConfig({profileId:n})}},t.prototype.dispose=function(){(0,s.forEach)(this.subscriptions,(function(e){return e.unsubscribe()})),e.prototype.dispose.call(this)},t.prototype.reloadSection=function(e,t){if(!this.disabled){if(t)this.profileId=t;else{var n=d.Z.getActiveView(),i=n&&n.getViewConfig?n.getViewConfig():null;i&&i.profileId&&(this.profileId=i.profileId)}this._changeProfileSubject.next({profileId:this.profileId})}return Promise.resolve()},t.prototype._reloadSection=function(e){var t=this,n=this.profileId;Promise.all([le.getCollections(n,e),de.default.getProfile(n)]).then((function(e){var n=(0,i.CR)(e,2),r=n[0],o=n[1];if(t.profileId.toLowerCase()===o.profileId.toLowerCase()){var a=(0,s.groupBy)(r.filter((function(e){return!1!==(0,ne.m6)("collections")[e.id]})),"type");t.model.topCollections(a[1]||[]),t.model.userCollections(a[2]||[]),t.model.sharedCollections(a[3]||[]),t.model.isMyProfile(o.isCurrentUser),t.contentChangedSendEvent(),t._selectCollectionIfChanged()}})).catch(oe.logError)},t.prototype.isSelectedItemExists=function(){var e=this.model.selectedItem();return(0,s.some)(this.model.userCollections(),(function(t){return t.id===e}))},t.prototype.goHome=function(){return this._currentCollectionName=null,this.model.selectedItem(void 0),he.I.goToProfile(this.profileId)},t.prototype._selectCollectionIfChanged=function(){if(!this._isCollectionActivating&&this.hasSelectedItem())if(this.isSelectedItemExists()){var e=this.model.selectedItem(),t=(0,s.find)(this.model.userCollections(),(function(t){return t.id===e}));t.name!==this._currentCollectionName&&(this._currentCollectionName=t.name,this.model.selectCollection(t))}else this.goHome()},t}(Q),ye=new ve,_e=n(4169),be=n(61800),we=n(61519),Ce=n(39752),Ie=n(86338),Pe=n(40059),xe=new(function(e){function t(){var t=e.call(this,{template:"TextView.LeftPanel.Section.SearchShared"})||this;return t.name=b.searchActions,(0,s.assign)(t.model,{isEmpty:!1,title:null,isItemSelected:function(){return!1}}),t.model.items([{enable:_e.Z.get("ui.MyTopics.enable",!0),title:"LeftBarSearch.AddTopic",cssClass:"item-action item-plain",details:[],action:function(){var e=be.U.getSearchParams(),t={searchQuery:e.query,searchAuthor:e.author,languages:e.languages?e.languages.split(","):[],countries:e.countries?e.countries.split(","):[],newspapers:e.newspapers?e.newspapers.split(","):[],searchIn:e.in||we.b.DefaultLocation};x.editTopicDialog.show({topic:t}).then((function(e){e.status===P.Y.Ok&&w.Z.topicsView.activate({type:"monitor",monitorId:e.topic.id})}))}},{enable:(0,Ce.Ys)(Ie.o),title:"Dialogs.AdvancedSearch.Header",cssClass:"item-action item-plain",details:[],action:function(){return(0,Ce.WI)((0,Pe.a8)({query:window.location.search}))}}]),t}return(0,i.ZT)(t,e),t}(Q)),Se=n(54215),Te=(n(74036),n(44853),n(34336)),ke=(n(47070),n(79375),n(20384));function Ae(e,t,n,i){ke.nd.ui.menu.items.radio.call(this,e,n),this.checked=ko.observable(i),this.value=t}function Ee(e,t){this._menu=new ke.nd.ui.menu.view(this),this._group=[],this._selectedValue=e,this._items=t}ke.extend(Ae.prototype,ke.nd.ui.menu.items.radio.prototype,{onClick:function(e){this.controller().uncheckAll(),this.checked(!0);var t=this;setTimeout((function(){t.controller().hide.call(t.controller()),ke(t.controller()).trigger("onselect",t.value)}),200)}}),ke.extend(Ee.prototype,ke.nd.ui.menu.controllers.base.prototype,{_addItem:function(e,t,n,i){var r=new Ae(this,t,n,i);return this._group.push(r),e.addItem(r),r},renderer:function(){var e=new ke.nd.ui.menu.renderers.list(this).title("").headerEnable(!1),t=this;return ko.utils.arrayForEach(this._items,(function(n){t._addItem(e,n.value,n.title,n.value==t._selectedValue)})),e},available:function(){return!0},enabled:function(){return!0},uncheckAll:function(){ko.utils.arrayForEach(this._group,(function(e){e.checked(!1)}))},onSelect:function(e){return ke(this).one("onselect",e),this}});var Ze,Me,De,Le=Ee,Ne=n(46524),Re=((Ze={})[Ne.d$.Relevance]="Sort.ByRelevance",Ze[Ne.d$.Date]="Sort.ByDate",Ze),Ve=new(function(e){function t(){var t=e.call(this,{template:"TextView.LeftPanel.Section.SearchShared"})||this;return t.name=b.searchOptions,(0,s.assign)(t.model,{hideSimilar:a.observable(!1),sortDirection:a.observable(Ne.d$.Relevance),isEmpty:!1,title:null,isItemSelected:function(){return!1}}),t.model.items([{enable:!0,title:a.pureComputed((function(){return Re[a.unwrap(t.model.sortDirection)]})),cssClass:"item-action item-plain arrow",details:[],action:function(e,n){return t.showOptionMenu([{value:Ne.d$.Relevance,title:I.ZP.val("Sort.ByRelevance")},{value:Ne.d$.Date,title:I.ZP.val("Sort.ByDate")}],t.model.sortDirection(),(function(e){return{orderBy:e}}),o(n.target).closest(".item-action"))}},{enable:!0,title:a.pureComputed((),cssClass:"item-action item-plain arrow",details:[],action:function(e,n){return t.showOptionMenu([{value:!1,title:I.ZP.val("ShowSimilar")},{value:!0,title:I.ZP.val("HideSimilar")}],t.model.hideSimilar(),(function(e){return{hideSimilar:e}}),o(n.target).closest(".item-action"))}}]),t}return(0,i.ZT)(t,e),t.prototype.init=function(){this.reloadSection()},t.prototype.reloadSection=function(){var e=be.U.getSearchParams();return this.model.hideSimilar(e.hideSimilar),this.model.sortDirection(e.orderBy||we.b.DefaultOrder),Promise.resolve()},t.prototype.showOptionMenu=function(e,t,n,i){var r=new Le(t,e);return r.onSelect((),r.show({position:{x:i.offset().left+i.outerWidth(),y:i.offset().top,align:{x:Se.x.Left,y:Se.x.Top}}}).catch(oe)},t}(Q)),Be=new(function(e){function t(){var t=e.call(this,{template:"TextView.LeftPanel.Section.SearchShared"})||this;return t.name=b.searchOptions,t.searchType=a.observable(Ne.Sc.Advanced),t.hasCustomParameters=a.observable(!1),t.totalCount=a.observable(null),t.customCount=a.observable(null),t.titleCount=a.observable(null),t.issueCount=a.observable(null),(0,s.assign)(t.model,{isEmpty:!1,title:"LeftBarSearch.Articles",isItemSelected:),t.model.items(t.getSectionItems()),t}return(0,i.ZT)(t,e),t.prototype.init=function(){var e=this;this.searchParamsSubscription=be.U.searchParams.subscribe((function(t){e.searchType(t.type),e.hasCustomParameters(t.hasCustomParameters())})),this.searchCountersSubscription=be.U.searchCounters.subscribe((function(t){e.totalCount(m.Z.isNil(t.totalCount)?null:t.totalCount.toLocaleString()),e.customCount(m.Z.isNil(t.customCount)?null:t.customCount.toLocaleString()),e.titleCount(m.Z.isNil(t.titleCount)?null:t.titleCount.toLocaleString()),e.issueCount(m.Z.isNil(t.issueCount)?null:t.issueCount.toLocaleString())})),this.reloadSection()},t.prototype.dispose=t.prototype.getSectionItems=function(){var e=this;return[{key:Ne.po.AllTitles,enable:a.pureComputed((function(){return e.searchType()===Ne.Sc.Quick||e.hasCustomParameters()})),title:"LeftBarSearch.AllTitles",cssClass:"",details:[{value:this.totalCount,type:"num",isLoading:a.pureComputed((function(){return null===e.totalCount()||void 0===e.totalCount()}))}],action:function(){return e._switchState(Ne.po.AllTitles)}},{key:Ne.po.Custom,enable:a.pureComputed((function(){return e.searchType()===Ne.Sc.Advanced})),title:"LeftBarSearch.Custom",cssClass:"",details:[{value:this.customCount,type:"num",isLoading:a.pureComputed((function(){return null===e.customCount()||void 0===e.customCount()}))}],action:function(){return e._switchState(Ne.po.Custom)}},{key:Ne.po.CurrentTitle,enable:a.pureComputed((function(){return e.searchType()===Ne.Sc.Issue})),title:"LeftBarSearch.CurrentTitle",cssClass:"",details:[{value:this.titleCount,type:"num",isLoading:a.pureComputed((function(){return null===e.titleCount()||void 0===e.titleCount()}))}],action:function(){return e._switchState(Ne.po.CurrentTitle)}},{key:Ne.po.CurrentIssue,enable:a.pureComputed((function(){return e.searchType()===Ne.Sc.Issue})),title:"LeftBarSearch.CurrentIssue",cssClass:"",details:[{value:this.issueCount,type:"num",isLoading:a.pureComputed((function(){return null===e.issueCount()||void 0===e.issueCount()}))}],action:function(){return e._switchState(Ne.po.CurrentIssue)}}]},t.prototype.reloadSection=function(){return this.model.selectedItem(be.U.getSearchParams().state),Promise.resolve()},t.prototype._switchState=function(e){this.model.selectedItem()!==e&&(this.model.selectedItem(e),be.U.subSearch({state:e}))},t}(Q)),Fe=new(function(e){function t(){var t=e.call(this,{template:"TextView.LeftPanel.Section.Similar"})||this;return t.name=b.similar,t.info=null,(0,s.assign)(t.model,{articleTitle:a.observable(),issueTitle:a.observable(),articleShortDate:a.observable(),similarArticlesCount:a.observable(),issueTitleClick:function(){return Te.Z.goView(h.n3.TextView,{issue:t.info.issueId,articleId:t.info.similarArticleId})}}),t}return(0,i.ZT)(t,e),t.prototype.applyViewConfig=function(e){e.viewName===h.n3.Similar?(this.markSectionActive(),this.info=e,this.model.selectedItem(!0),this.model.articleTitle(e.articleTitle),this.model.issueTitle(e.issueTitle),this.model.articleShortDate(e.articleShortDate),this.model.similarArticlesCount(e.similarArticlesCount)):this.model.selectedItem(!1)},t.prototype.reloadSection=function(){var e,t=this;this.info&&(e=this.info.similarArticleId,O.getNumSimilarArticles(e)).then((function(e){return t.model.similarArticlesCount(e)}))},t}(Q)),Oe=n(34511),ze=new(function(e){function t(){var t=e.call(this,{template:"TextView.LeftPanel.Section.Custom"})||this;return t.name="Custom Section",t.model.showSignInDialog=function(){return Oe.Z.signIn()},t}return(0,i.ZT)(t,e),t}(Q)),Ue=((Me={})[b.collections]=ye,Me[b.myTopics]=te,Me[b.searchActions]=xe,Me[b.searchOptions]=Ve,Me[b.searchByArticles]=Be,Me[b.similar]=Fe,Me[b.custom]=ze,Me),He=((De={})[h.n3.TopNews]="navmenu-homefeed",De[h.n3.Profile]="navmenu-channel",De[h.n3.Similar]="navmenu-similar",De),je=function(e){function t(){var t=e.call(this)||this;return t.model={topSections:a.observableArray([]),sections:a.observableArray([]),css:a.observable()},t._sectionBinding=[],t.throttledUpdateSwiperContainer=(0,s.throttle)((function(){return function(e){if(e.$container.is(":visible")){var t=e.$container.find(".swiper-slide"),n=(0,s.reduce)(t.children(),(,30);t.height(n),e.swiper&&e.swiper.update&&e.swiper.$el&&e.swiper.update(!0)}}(t)}),500,{leading:!0,trailing:!0}),t.throttledApplyViewConfigToSections=(0,s.throttle)((function(e){return t._applyViewConfigToSections(e)}),500,{leading:!1,trailing:!0}),t._loadedDeferred=new r.B,t}return(0,i.ZT)(t,e),t.prototype.init=function(t){var n=this,i=t.elm();return e.prototype.init.call(this,i).then((function(){n._configureForView(d.Z.getActiveView()),n._viewChangingBinding=d.Z.activeViewChanging((function(t,i){e.prototype.hideViewInCompactMode.call(n),n._configureForView(d.Z.findView(i))})),n._onUrlChanged=l.Z.global.bind("viewUrlChanged",n._onUrlChanged),n._loadedDeferred.resolve(n)}))},t.prototype.dispose=function(){this._loaded&&(this._viewChangingBinding.dispose(),l.Z.global.unbind("viewUrlChanged",this._onUrlChanged),this._cleanupSubscriptions())},t.prototype.loaded=function(){return this._loadedDeferred.promise()},t.prototype.applyViewConfig=function(e){var t=d.Z.getActiveView();this._loadPanelConfig(t),this._updateSectionsList(),this.disabled=0===this.model.topSections().length&&0===this.model.sections().length,this.updatePositionByConfig(),this.throttledApplyViewConfigToSections(e)},t.prototype.updateContainer=function(){this.throttledUpdateSwiperContainer()},t.prototype._render=function(e){var t=this;return c.Z.loaded().then((function(){c.Z.renderTo("v7.Client.LeftPanel",t.model,e),t._initSwiper()}))},t.prototype._initSwiper=function(){this.swiper=new u.Z("#".concat(this.$container.attr("id")," ").concat(".leftPanelNavmenuSwiper"),{scrollbar:{el:".leftPanelNavmenuSwiperScrollbar"},direction:"vertical",slidesPerView:"auto",mousewheel:!0,freeMode:!0,touchStartPreventDefault:!1})},t.prototype._configureForView=function(e){var t=e&&e.getViewConfig?e.getViewConfig():null;this.applyViewConfig(t);var n=t?t.refViewName:null,i=e?e.__viewName:null;this.model.css(He[n||i])},t.prototype._loadPanelConfig=function(e){var t=e&&(0,s.isFunction)(e.getLeftPanelConfig)?e.getLeftPanelConfig():void 0;this.updateConfig(t)},t.prototype._updateSectionsList=function(){var e=this,t=this.model.topSections(),n=this.model.sections();if(this._isSectionIdentical(t,this.config.topSections)&&this._isSectionIdentical(n,this.config.sections))return(0,s.forEach)(t,(function(t){return t.applyConfig(e.config)})),void(0,s.forEach)(n,(function(t){return t.applyConfig(e.config)}));this._cleanupSubscriptions(),(0,s.forEach)(t,(function(e){return e.dispose()})),(0,s.forEach)(n,(function(e){return e.dispose()})),this.model.topSections(this._loadAndInitSections(this.config.topSections)),this.model.sections(this._loadAndInitSections(this.config.sections)),this.updateContainer()},t.prototype._loadAndInitSections=function(e){var t=this;return(0,s.reduce)(e,(function(e,n){if((0,s.isObject)(n)&&n.groupName){var i=groupsMap[n.groupName];i&&(i.init({sections:t._loadAndInitSections(n.sections)}),i.applyConfig(t.config),i.reloadSection(),t._sectionBinding.push(l.Z.bind(i,"leftPanelContentChanged",null,(function(){t.updateContainer()}))),e.push(i))}else{var r=Ue[n];r&&(r.init(),r.applyConfig(t.config),r.reloadSection(),t._sectionBinding.push(l.Z.bind(r,"leftPanelContentChanged",null,(function(){t.updateContainer()}))),e.push(r))}return e}),[])},t.prototype._isSectionIdentical=function(e,t){var n=this;return!(!e||!t||e.length!==t.length)&&(0,s.every)(e,(function(e,i){return!!t[i]&&((0,s.isObject)(t[i])?e.name===t[i].groupName&&n._isSectionIdentical(e.model.sections(),t[i].sections):e.name===t[i])}))},t.prototype._applyViewConfigToSections=function(e){e&&((0,s.forEach)(this.model.topSections(),(function(t){t.applyViewConfig(e)})),(0,s.forEach)(this.model.sections(),(function(t){t.applyViewConfig(e)})))},t.prototype._cleanupSubscriptions=function(){(0,s.forEach)(this._sectionBinding,(function(e){return e.dispose()})),this._sectionBinding.length=0},t}(_),We=new je},13395:function(e,t,n){"use strict";var i=n(40180),r=n(26763),o=n(24458),a=n(46720),s=n(76278),u=n(4169),c={initialState:s.SB.closed,showInCompactMode:!1,disabled:!0,topSections:[],sections:[]},l=new(function(){function e(){}return e.prototype.getPanelConfig=function(e){if(!e)return c;var t=this._getConfigKey(e);return(u.Z.get("UI.LeftPanel")?u.Z.get("UI.LeftPanel")[t]:null)||c},e.prototype.linkView=function(e){var t=this;a.Z.bind(e,"beforeScroll",this._getSetViewPortHandler(e)),r.Z.loaded().then((function(){return t.setInitialPosition(e)}))},e.prototype.unlinkView=e.prototype.setInitialPosition=function(e){var t=r.Z.updatePositionByConfig();this._setViewportLeft(e,t.pos.x+t.size.width,!0)},e.prototype._getSetViewPortHandler=function(e){var t=this;return function(n,i){if(r.Z.config.movingEnabled){var o=r.Z.changePanelPositionByDelta(i);t._setViewportLeft(e,o.pos.x+o.size.width)}}},e.prototype._setViewportLeft=function(e,t,n){(0,i.isFunction)(e.setViewportLeft)&&e.setViewportLeft(t,n)},e.prototype._getConfigKey=function(e){var t=e.refViewName||e.viewName||e.__viewName;return t===o.n3.Profile&&e.channelfeed?"".concat(t,".feed"):t},e}());t.Z=l},34511:4169:function(e,t,n){"use strict";var i=n(20384),r=n(53770),o=n(77004),a=n(29699),s=n(11144),u=null,c=i.Callbacks("unique");function l(){return u||(u=new s.B,o.authorized().then((function(e){return r.Z.loadConfig(e)})).then((function(e){a.Z.configData(e),c.fire()})).then(u.resolve)),u}o.bind("tokenUpdated",(function(){u&&"pending"!==u.state()&&(u=null),a.Z.configData()&&l()}));var d=i.nd.config={get:a.Z.get,getAsync:function(e,t){return l().then((function(){return a.Z.get(e,t)}))},getView:function(){return d},loaded:l,setLoaded:extend:function(e){a.Z.extend(e),c.fire()},onConfigUpdated:function(e){c.add(e)},getConfig:a.Z.getConfig};t.Z=d},59527:function(e,t,n){"use strict";n.d(t,{Pu:function(){return d},X:function(){return h},dG:function(){return f},yy:function(){return p}});var i,r=n(40180),o=n(14581),a=n(74981),s=n(4169),u=n(11144),c=(n(16412),{});function l(){return i||(i=new u.B,a.Z.get("contentRestrictions").then((function(e){return(0,r.forEach)(e,(),e})).then(i.resolve,i.reject)),i.promise()}function d(e,t){c[e]||(c[e]=new u.B),c[e].resolve(t)}function h(e,t,n){return e=e.toLowerCase(),n||t?(t||(t=(0,o.$W)(n)),l().then((function(i){var o,s=(0,r.find)(i,{ruleType:e});return!(!s||!(null===(o=s.cids)||void 0===o?void 0:o.includes(t)))||function(e){return e?(c[e]||(c[e]=new u.B,a.Z.get("contentRestrictions","issues",{issues:e}).then((function(e){return(0,r.isArray)(e)&&e.length?e[0].restrictions:e})).then(c[e].resolve,c[e].reject)),c[e].promise()):Promise.reject("issueId is required.")}(n).then((function(t){return!!(0,r.find)(t,()}))})).catch(()):Promise.reject("issueId or cid required.")}function p(e,t,n){return h(e,t,n).then((function(e){return!e}))}function f(e){return l().then((function(t){return e?(0,r.find)(t,{ruleType:e.toLowerCase()}):t})).catch((function(){return!1}))}s.Z.onConfigUpdated((function(){var e="Config data reloaded";i&&i.reject(new Error(e)),(0,r.forEach)(c,(function(t){t.reject(e)})),c={},i=null}))},16412:function(e,t,n){"use strict";var i=n(22970),r=n(60231),o=n(20384),a=n(42581),s=n(25438),u=(n(83181),n(46720),n(39009),n(11144)),c=n(74738),l=n(43389),d=n(20384);window.ko=window.ko||r;var h=window;h.setImmediate||(h.setImmediate=h.clearImmediate=function(e){h.clearTimeout(e)}),),o.returnFalse=function(){return!1},o.returnTrue=function(){return!0};var p=a.X.version;if(o.browser=a.X,o.device=s.U,o.props=o.props||{},o.props.mousewheel="mousewheel",o.props.clip_del=", ",o.support.propagetEventsToFrames=!(a.X.msie||a.X.mozilla),o.support.canvas=!!document.createElement("canvas").getContext,o.features={fTextRendering:{className:"f-text-rendering",enabled:!0}},),a.X.msie){if(a.X.msie_mode<8&&(o.props.clip_del=" "),a.X.msie_mode<9)for(var f="abbr,article,aside,audio,canvas,datalist,details,eventsource,figure,footer,header,hgroup,mark,menu,meter,nav,output,progress,section,time,video".split(","),m=f.length;m--;)document.createElement(f[m]);p>="7.0"?(o.support.imageRendering=!0,o.props.imageRendering="msInterpolationMode",o.props.imageRenderingOptimizeSpeed="nearest-neighbor",o.props.imageRenderingOptimizeQuality="bicubic"):o.support.noGzip=!0}else a.X.mozilla&&(o.props.mousewheel="DOMMouseScroll",p>="1.9.2"&&(o.support.imageRendering=!0,o.props.imageRendering="imageRendering",o.props.imageRenderingOptimizeSpeed="optimizeSpeed",o.props.imageRenderingOptimizeQuality="optimizeQuality"));if(s.U&&s.U.current&&window.devicePixelRatio&&(a.X[s.U.current+"devicePixelRatio"+window.devicePixelRatio]=!0),window.screen&&(s.U.iPhone||s.U.iPad)){var g={iPhone3:[480,320],iPhone4:[960,640],iPhone5:[1136,640],iPhone6:[1334,750],iPhone6plus:[1920,1080],iPad:[1024,768],iPad2:[1024,768]};for(var v in g){var y=g[v],b=y[0]/2,w=y[1]/2,C=window.screen.height,I=window.screen.width;(b==C&&w==I||b==I&&w==C)&&(a.X[v]=!0)}}.fix=function(e){return e},),o.fn.extend({createChild:visible:relativeOffset:function(e){return o.relativeOffset(this[0],e)},relativeOffsetTop:function(e){return o.relativeOffsetTop(this[0],e)},relativeOffsetLeft:beforeUpdateInnerHtml:function(){return this},release:function(){return this},optimizeForTransform:optimizeShowHideForSingleElement:_ndshow:_ndhide:keepEmptyTransformForElm:fastAppend:fastAppendTo:function(e){return e.fastAppend(this),this},fastDetach:fastRemove:fastHtml:fastCss:simpleCssAndCheck:),o.extend({simpleCssAndCheck:fastCss:fastHtml:windowWidth:windowHeight:relativeOffset:relativeOffsetTop:function(e,t){return this.relativeOffset(e,t).top},relativeOffsetLeft:execInTryCatch:);var x,S=o.nd=o.nd||{},T=0;extend(S,{animationEmptyStep:{empty:"100px"},id:makeImageUrl:hostName:scriptsBaseUrl:imagesBaseUrl:isEmpty:makeClip:extendObjectWithEvents:extendObjectWithProperties:extendObjectWithPropertiesExt:proxy:now:function(){return(new Date).getTime()},isParentNodeNull:img_onerror:),o.nd.data={},o.fx.step.empty=o.noop,o.nd.matrix=o.nd.matrix.create=function(e){},o.nd.matrix.toTranslateString=o.nd.matrix.toScaleString=o.nd.matrix.prototype={m11:1,m12:0,m21:0,m22:1,tx:0,ty:0,_scaleX:1,_scaleY:1,_scaleZ:1,_rotate:0,scale:function(e){return 0==arguments.length?{scaleX:this._scaleX,scaleY:this._scaleY,scaleZ:this._scaleZ}:(this._scaleX=e.scaleX||1,this._scaleY=e.scaleY||1,this._scaleZ=e.scaleZ||1,this)},scaleX:function(e){return 0==arguments.length?this._scaleX:(this._scaleX=parseFloat(e)||1,this)},scaleY:translate:translateLeft:function(e){return 0==arguments.length?this.tx:(this.tx=parseInt(e,10)||0,this)},translateTop:toTranslateString:toMatrixString:function(){return this.toString()},toString:isEmpty:,),),),function(){var e,t={minIntervalBetweenEventsToAcceptEventForTrackPad:0,minIntervalBetweenEventsToFireEventForTrackPad:0};.mousewheel=o.fn.mousewheelWhenMouseOver=(),function(){var e={accumulate:!1,accumulateMinInterval:100,accumulateMaxTime:0,handler:null,target:null};fn.wheel=function(r){return function(r,a){return(a=o.extend({},e,a||{})).handler?r.each((function(){i(this,(function(e){var i=0,e,a);return"function"==typeof e.preventDefault&&e.preventDefault(),i}))})):r}(this,r)};var i=window,document)}(),o.nd.fixTouchEvent=o.nd.matchSelector=o.fn.tap=o.fn.doubletap=o.nd.easing=o.nd.easing||{},o.nd.easing.nd1="cubic-bezier(0.33,0.66,0.66,1)",o.easing[o.nd.easing.nd1]=o.nd.easing.nd1_reverse="cubic-bezier(0.33,0.0,0.33,1)",o.easing[o.nd.easing.nd1_reverse]=o.showError=o.noop,o.writeLog=function(){arguments.length&&(o.writeLog.messages=o.writeLog.messages||[],o.writeLog.messages.push(arguments[0]))},o.writeError=o.nd.fixTouchScroll=o.nd.noop=function(){},o.nd.momentum=),x={},o.getPathExp=o.required=o.nd.longBitwiseAnd=o.nd.isExternalArticleId=o.nd.matrix},59197:function(e,t,n){"use strict";n.d(t,{Z:function(){return he}});var i=n(22970),r=n(20384),o=n(40180),a=n(68602),s=n(11569),u=n(55895),c=n(22509),l=n(71151),d=n(10751),h=n(24458),p=n(61612),f=n(27670),m=n(82641),g=n(6677),v=n(91330),y=n(55993),_=n(43388),b=(n(96389),n(4169));function w(e){if(!e)return null;e=I(e);var t=b.Z.get("ui.FeedSettings.Categories");return t&&(0,o.find)(t,(function(t){return t.id===e||t.path===e}))}function C(){for(var e,t,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!n||!n.length)return function(){return!1};var o={};try{for(var a=(0,i.XA)(n),s=a.next();!s.done;s=a.next()){var u=s.value;u&&(o[u.toLowerCase()]=!0)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.some(()}}function I(e){return"topstories"===e&&(e="headlines"),e}function P(){return arguments[0]?(0,o.isString)(arguments[0])?w(arguments[0]):function(e){if(e.Slug)return w(e.Slug);var t;if(e.dto){var n=e.dto,i=n.id,r=n.name,a=n.slug;t=C(i,r,I(a))}else t=C(e.GroupId,e.GroupName);var s=b.Z.get("ui.FeedSettings.Categories");return s&&(0,o.find)(s,()}(arguments[0]):null}var x,S,T=n(76700);function k(e){if(!e)return"";!);var t=(0,_.K)(e.toLowerCase()),n=(0,o.find)(S,{iso:t.countryCode});return n?n.displayName:""}function A(e){var t=P(e);return t&&t.resourceName?(0,y.Rn)(t.resourceName):function(e){return(0,y.J5)("Newsfeed.Groups.".concat(e.GroupName,".Title"),e.GroupName)}(e)}var E=((x={})[T.dl.Headlines]=A,x[T.dl.Interesting]=function(){return(0,y.Rn)("Interesting.Title")},x[T.dl.Users]=function(e){return e.GroupName},x[T.dl.MoreNewsCluster]=function(){return(0,y.Rn)("MoreNews.Title")},x[T.dl.SinceYourLastVisit]=function(){return(0,y.Rn)("SinceLastVisit.Title")},x[T.dl.DirectArticleLink]=function(){return(0,y.Rn)("TopToolbar.SearchResult")},x[T.dl.Unknown]=A,x[T.dl.FollowedChannel]=function(e){return e.GroupName},x);function Z(e){return null===e.GroupType?e.GroupName:(E[e.GroupType]||E[T.dl.Unknown])(e)}var M=n(70263),D=n(2851),L=n(44582),N=n(11144),R=Date.now();function V(e){Object.assign(this,e),this.Id||(this.Id=R),this._loaded=!0}(0,D.D)(V,L.Z,{Id:"initblock",_accessDfd:null,access:function(){return this._accessDfd||(this._accessDfd=new N.B,this._accessDfd.resolve()),this._accessDfd.promise()},dataType:function(){return T.Ku.InitBlock},normalizedRank:function(){return 1}});var B=V;function F(e){Object.assign(this,e),this._loaded=!0}(0,D.D)(F,L.Z,{Id:"homeBlock",_accessDfd:null,access:function(){return this._accessDfd||(this._accessDfd=new N.B,this._accessDfd.resolve()),this._accessDfd.promise()},dataType:function(){return T.Ku.HomeBlock},normalizedRank:function(){return 1}});var O=F;function z(e){Object.assign(this,e),this._loaded=!0}(0,D.D)(z,L.Z,{Id:"replies",_accessDfd:null,access:function(){return this._accessDfd||(this._accessDfd=new N.B,this._accessDfd.resolve()),this._accessDfd.promise()},dataType:function(){return T.Ku.Replies},normalizedRank:function(){return 1}});var U=z;function H(e){Object.assign(this,e),this._loaded=!0}(0,D.D)(H,L.Z,{Id:"myLastTitles",_accessDfd:null,access:function(){return this._accessDfd||(this._accessDfd=new N.B,this._accessDfd.resolve()),this._accessDfd.promise()},dataType:function(){return T.Ku.MyLastTitles},normalizedRank:function(){return 1}});var j=H,W=n(60026),q=n(1412),G=n(35466);function X(e){Object.assign(this,e),this._loaded=!0}(0,D.D)(X,L.Z,{Id:"monitors",_accessDfd:null,access:function(){return this._accessDfd||(this._accessDfd=new N.B,this._accessDfd.resolve()),this._accessDfd.promise()},dataType:function(){return T.Ku.Monitors},normalizedRank:function(){return 1}});var Y=X;function K(e){Object.assign(this,e),this._loaded=!0}(0,D.D)(K,L.Z,{Id:"profile",_accessDfd:null,access:function(){return this._accessDfd||(this._accessDfd=new N.B,this._accessDfd.resolve()),this._accessDfd.promise()},dataType:function(){return T.Ku.Profile},normalizedRank:function(){return 1}});var J=K;function $(e){L.Z.apply(this,arguments);var t=e.data;t&&t.adBlock&&(t=t.adBlock),this.adBlockType=t.adBlockType,this.cid=t.cid,this.issue=t.issue,this.issueDate=new Date(t.issueDate),this.issueId=t.issueId,this.type=t.type}(0,D.D)($,L.Z,{_loaded:!0,dataType:function(){return T.Ku.AdBlock}});var Q=$;0,D.D)(ee,L.Z,{Id:"social",_accessDfd:null,access:function(){return this._accessDfd||(this._accessDfd=new N.B,this._accessDfd.resolve()),this._accessDfd.promise()},dataType:function(){return T.Ku.Social},normalizedRank:function(){return 1}});var te,ne=ee,ie=function(e){function t(t){var n=e.call(this,t)||this;return n._loaded=!0,n.itemId=t.id||t.Id,n}return(0,i.ZT)(t,e),t.prototype.dataType=function(){return d.g.bookmarkPages},t.prototype.id=function(){return this.Id},t}(L.Z),re=n(46720),oe=n(17696),ae=n(63666),se=n(61800),ue=r.Callbacks,ce=((te={})[T.dl.Headlines]=T.NN.ImagesHeadlines,te[T.dl.SinceYourLastVisit]=T.NN.Basic,te[T.dl.Category]=T.NN.Category,te[T.dl.UserSection]=T.NN.Category,te[T.dl.FollowedChannel]=T.NN.Basic,te[T.dl.DirectArticleLink]=T.NN.Basic,te),le=function(){function e(e){this.articles=e}return e.prototype.getLastAccessTime=function(){return(0,o.reduce)(this.articles,(,0)},e}(),de=function(){function e(){var e=this;this._onLoadOnce=[],this._onErrorOnce=[],this.items=new l.xL,this._leftToken=void 0,this._rightToken=void 0,this._on={itemsListChanged:ue(),articlesLoaded:ue(),articlesLoadError:ue(),reset:ue()},this._ts=0,this._bundles=[],this._toLoad={items:{},pages:{}},this._map={},this._removedArticlesCount=0,this._removedArticleIds={},this._loadPromises={},v.Z.bind("currentLanguageChanged",this.reset.bind(this)),re.Z.bind(oe.default,"stateChanged",null,this._onPurchaseStateChanged.bind(this)),M.bookmarkCreateSubscription.pipe((0,s.h)((function(e){return e.data&&e.data.articleId}))).subscribe((function(t){if(e.items){var n=t.data.articleId;e.items.forEach((function(e){e.ArticleId!==n||(e.BookmarkId="bookmarked")}))}})),M.bookmarkDeleteSubscription.pipe((0,s.h)((function(e){return e.data&&e.data.articleId}))).subscribe((function(t){if(e.items){var n=t.data.articleId;e.items.forEach((function(e){e.ArticleId!==n||(e.BookmarkId=void 0)}))}})),this._loadSubject=new a.t,this.itemsToPreload=10}return Object.defineProperty(e.prototype,"onlineListLoader",{set:function(e){this._onlineListLoader=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offlineListLoader",{set:function(e){this._offlineListLoader=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onlineItemsLoader",{set:function(e){this._onlineItemsLoader=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offlineItemsLoader",{set:function(e){this._offlineItemsLoader=e},enumerable:!1,configurable:!0}),e.prototype.onLoadOnce=function(e){return(0,o.isFunction)(e)&&this._onLoadOnce.push(e),this},e.prototype.onErrorOnce=function(e){return(0,o.isFunction)(e)&&this._onErrorOnce.push(e),this},e.prototype.load=function(e,t){var n=this;if(!this.items.isEmpty())return Promise.resolve();if(!this._loadPromise){var i=void 0;return(i=this._loadPromise=e?this._load(e,-1,t):this._load()).then((function(){n._loadSubject.next()})).finally((function(){n._loadPromise=null})),i}return this._loadPromise},Object.defineProperty(e.prototype,"loadPromise",{get:function(){var e=this;return this._loadSubject.pipe((0,u.q)(1),(0,c.U)((function(){return e}))).toPromise()},enumerable:!1,configurable:!0}),e.prototype.loadMore=function(){var e=this;return null===this._rightToken?Promise.resolve():this._load(this._rightToken,1).then((function(){(0,o.defer)(e._on.itemsListChanged.fire)}))},e.prototype.loadHistory=function(){var e=this;return null===this._leftToken&&Promise.resolve(),this._load(this._leftToken,-1).then((function(){(0,o.defer)(e._on.itemsListChanged.fire)}))},e.prototype.reset=function(){this._ts=(new Date).getTime(),this._loadSubject=new a.t;var e=this.items;return this.items=new l.xL,this._bundles=[],(0,o.forIn)(this._toLoad.items,(function(e){e.abortLoading()})),e&&!e.isEmpty()&&e.forEach((function(e){(0,ae.Ze)(e,(function(){return e.dispose()}))})),this._toLoad={items:{},pages:{}},this._loadPromise=null,this._resetTokens(),this._firstItem=null,this._map={},this._accessToken=null,(0,o.defer)(this._on.reset.fire),this._restrictedTypes=null,this._anchorId=null,this},e.prototype.resetREOF=function(){if(null!==this._rightToken)return this;this._resetRightToken();var e=this.items.tail();return e&&e.next(void 0),this},e.prototype.isEmpty=function(){return null===this._leftToken&&null===this._rightToken&&this.items.isEmpty()},e.prototype.loadItem=function(e){if(!this._isFoundToLoad(e)){var t={items:{},pages:{}};this._addToLoad(e,t);for(var n=e.next(),i=e.prev(),r=0;r<this.itemsToPreload&&(n||i);)n&&(n.loaded()||this._isFoundToLoad(n)?n=null:(this._addToLoad(n,t),++r,n=n.next())),i&&(i.loaded()||this._isFoundToLoad(i)?i=null:(this._addToLoad(i,t),++r,i=i.prev()));var o={Articles:this._getArticlesKeys(t.items),Pages:this._getPagesKeys(t.pages)};this._loadDetailed(o).catch(g.Z.error)}},e.prototype._loadDetailed=function(e){var t=this,n=this._ts,i=r=p.i.toUrlViewName((0,f.m)());return this._offlineItemsLoader?this._offlineItemsLoader.load(e,i,null,r,this._accessToken):this._onlineItemsLoader?this._onlineItemsLoader.load(e,null,r,this._accessToken).then(i,():Promise.reject(new Error("Loader is not configured"))},e.prototype.accessItem=function(e){var t=p.i.toUrlViewName((0,f.m)());return(0,m.fq)(e.ArticleId,null,t,e.AccessBookmarkId)},Object.defineProperty(e.prototype,"pushToHistory",{set:enumerable:!1,configurable:!0}),e.prototype.removeArticle=function(e,t){if((0,ae.tJ)(e))throw new Error("The item is being used and cannot be removed.");g.Z.log("Article removed: ".concat(e.Id)),e.loaded(!1).provider(null).group(null),this.items.detach(e),t?delete this._map[e.Id]:this._map[e.Id]=null,e===this._firstItem&&(this._firstItem=this.items.head()),!t&&this._pushToHistory&&this._pushToHistory(e,"removed"),++this._removedArticlesCount,this._removedArticleIds[e.Id]=!0,e.dispose()},e.prototype.on=function(e,t){var n;return e in this._on?n=this._on[e]:this._on[e]=n=ue(),n.add(t),this},e.prototype.getArticleById=function(e){return this._map[e]},e.prototype.getFirstArticle=function(){return this._firstItem},e.prototype.getCurrentLastArticle=e.prototype.getRightToken=function(e){var t=this._getBundle(e);return t?t.rightToken:void 0},e.prototype.getLeftToken=e.prototype.getArticlePosition=function(e){return e&&e in this._map?(0,o.chain)(this._bundles).map(().find(().value():null},e.prototype.appendBundle=function(e,t,n){var i=new le(e);i.leftToken=t,i.rightToken=n,this._bundles.push(i)},e.prototype.removeOldArticles=function(e){var t=this,n=(new Date).getTime()-e,r=[],a=[];(0,o.forEach)(this._bundles,(function(e,s){var u=!1;return(0,o.forEach)(e.articles,(function(e){return!((0,ae.tJ)(e)||e.lastAccessTime>n)||(u=!0,!1)})),u?(a=t._bundles.slice(s),!1):(r.push.apply(r,(0,i.ev)([],(0,i.CR)(e.articles),!1)),!0)}));var s=null;this.items.forEach(-1,(function(e){return s=e,!((0,ae.tJ)(e)||e.lastAccessTime>n||e.tokenized()||(r.push(e),0))})),s&&s.tokenized()&&!(0,ae.tJ)(s)&&s.lastAccessTime<=n&&(0,o.forEachRight)(this._bundles,(function(e,t){var s=!1;return(0,o.forEach)(e.articles,(function(e){return!((0,ae.tJ)(e)||e.lastAccessTime>n)||(s=!0,!1)})),s?(a=a.slice(0,t),!1):(r.push.apply(r,(0,i.ev)([],(0,i.CR)(e.articles),!1)),!0)})),(0,o.forEach)(r,(function(e){t.items.detach(e.loaded(!1).provider(null).group(null)),delete t._map[e.Id]})),this._bundles=a,this._bundles.length?(this._leftToken=this._bundles[0].leftToken,this._rightToken=this.items.tail().tokenized()?(0,o.last)(this._bundles).rightToken:void 0):this._leftToken=this._rightToken=void 0,this._firstItem=this.items.head()},e.prototype.setRestrictedSectionTypes=function(e){this._restrictedTypes=e},e.prototype.getAnchorItem=e.prototype._basicProcessor=function(e,t,n){if(t.Id in this._map)return null;var i=new e(t);return i.getId()in this._map?null:(i.provider(this),n.append(i),this._map[i.getId()]=i,i)},e.prototype._basicProcessorWithGroup=function(e,t,n,i){var r=this._basicProcessor(e,t,n);if(r){var o=Z(t.Data),a=T.NN.Basic,s=(new Date).getTime(),u=r.prev()||(i<0?this.items.head():this.items.tail());u&&u.group()&&u.Data&&u.Data.GroupType===t.Data.GroupType&&(s=u.group().id),r.group(s,o).group().raw(t.Data).renderingType=a}return r},e.prototype._load=function(e,t,n){var r,a=this;if(t<0&&null===this._leftToken||(!t||t>0)&&null===this._rightToken)return Promise.resolve();if(this._offlineListLoader?r=this._offlineListLoader:this._onlineListLoader&&(r=this._onlineListLoader),!r)return Promise.reject(new Error("Cannot load data. Data loader isn't initialized."));var s=0,u=this._ts,c=function(n){var i;if((0,o.defer)((function(){if(a._onLoadOnce.length){var e=a._onLoadOnce;a._onLoadOnce=[],(0,o.forEach)(e,(function(e){return(0,o.defer)(e,n)}))}})),!n)return Promise.reject({status:404});if(u!==a._ts)return Promise.reject(new Error("The response is outdated: the original context has changed."));if(a._accessToken=n.accessToken,(0,o.isEmpty)(n.items))return a._ensureDataLoading(e,t);var h=n.items,p=new l.xL,f=((i={})[d.g.initBlock]=function(e){return a._basicProcessor(B,e,p)},i[d.g.homeBlock]=function(e){return a._basicProcessor(O,e,p)},i[d.g.replies]=function(e){return a._basicProcessorWithGroup(U,e,p,t)},i[d.g.myLastTitles]=function(e){return a._basicProcessorWithGroup(j,e,p,t)},i[d.g.article]=function(e){if(e.Id in a._map)return null;var t=new W.Z(e).provider(a);return t.loaded()&&!t.checkTextLength()?null:(p.append(t),a._map[t.getId()]=t,t)},i[d.g.page]=function(e){return a._basicProcessor(q.Z,e,p)},i[d.g.divider]=i[d.g.monitors]=i[d.g.profile]=function(e){return a._basicProcessor(J,e,p)},i[d.g.adBlock]=function(e){if(e.Id in a._map)return null;var t=new Q(e).provider(a);p.append(t);var n=t.prev();return n&&n.Data&&(t.Data||(t.Data={}),t.Data.GroupId||void 0===n.Data.GroupId||(t.Data.GroupId=n.Data.GroupId),t.Data.GroupType||void 0===n.Data.GroupType||(t.Data.GroupType=n.Data.GroupType),t.Data.GroupName||void 0===n.Data.GroupName||(t.Data.GroupName=n.Data.GroupName)),a._map[t.getId()]=t,t},i[d.g.social]=function(e){return a._basicProcessor(ne,e,p)},i[d.g.bookmarkPages]=function(e){return a._basicProcessor(ie,e,p)},i);(0,o.defer)(a._on.itemsListChanged.fire);var m=(0,o.chain)(h).map((function(e){var t,n=f[e.Type];return a._restrictedTypes&&(null===(t=a._restrictedTypes)||void 0===t?void 0:t.includes(e.Type))||!n?null:n(e)})).filter(().value();if(m.length&&(0,o.defer)(a._on.articlesLoaded.fire,m),(t<0||a.items.isEmpty())&&null!==a._leftToken&&(a._leftToken=n.leftToken),(!t||t>0||a.items.isEmpty())&&null!==a._rightToken&&(a._rightToken=n.rightToken),a._anchorId||(a._anchorId=n.anchorId),p.isEmpty()&&!(0,o.isEmpty)(h))return!(s<3)||e||null===n.rightToken||t&&1!==t?a._ensureDataLoading(e,t):r.load(e,t,++s,void 0,a._getPendingHistory()).then(c,(function(e){throw a._onLoadFailed(u),e}));var g=p.head(),v=p.tail();a._firstItem||(a._firstItem=t<0?v:g);var y=t<0?a.items.head():a.items.tail(),_=y?y.group():null,b=(0,o.chain)(h).filter((function(e){return e.Type===d.g.social})).map((function(e){return e.Data.GroupName})).value();if(p.forEach(t||1,(function(e){if(e.Data&&e.Data.GroupId)if(y&&_&&y.Data&&y.Data.GroupId===e.Data.GroupId&&y.Data.GroupType===e.Data.GroupType)t<0?(_.prepend(e),e.Type===d.g.social&&(_.renderingType=T.NN.SocialCategory)):_.append(e),e.section=_;else{var n=Z(e.Data),i=e.Data.GroupName,r=ce[e.Data.GroupType]||T.NN.RegularHeadlines;(0,o.some)(b,(function(e){return e===i}))&&(r=T.NN.SocialCategory);var a=k(e.Data.Locale),s=e.group(n).group().raw(e.Data).countryName(a);s.subtitle=({locale:e.Data.Locale},null),s.renderingType=r,s.locale=e.Data.Locale,e.Data.Slug&&(s.iconClassName=P(e.Data)&&e.Data.Slug),e.section=s}_=(y=e)?y.group():null})),t<0?a.items.prepend(p):a.items.append(p),null!==a._leftToken||g._prev||g.prev(null),null!==a._rightToken||v._next||v.next(null),n.leftToken||n.rightToken){p.forEach((function(e){(0,o.isFunction)(e.tokenized)&&e.tokenized(!0)}));var w=new le(p.toArray());n.leftToken&&(w.leftToken=n.leftToken),n.rightToken&&(w.rightToken=n.rightToken),t>0?a._bundles.push(w):t<0&&a._bundles.unshift(w)}return Promise.resolve()},h=[e||"",t||1,n||0,this._ts].join("_");if(h in this._loadPromises)return this._loadPromises[h];var p=this._loadPromises[h]=Promise.all([r.load(e,t,s,n,this._getPendingHistory()).catch((function(t){if(t&&400===t.status&&e&&a.items.isEmpty())return r.load(void 0,1,s);throw t}))]).then((,(function(e){throw a._onLoadFailed(u),e}));return p.finally(()},e.prototype._resetTokens=e.prototype._resetRightToken=e.prototype._isFoundToLoad=function(e){switch(e.Type){case d.g.page:return e.getId()in this._toLoad.pages;case d.g.article:return e.getId()in this._toLoad.items;default:return!1}},e.prototype._addToLoad=function(e,t){var n=e.getId();switch(e.Type){case d.g.page:this._toLoad.pages[n]=t.pages[n]=e;break;case d.g.article:this._toLoad.items[n]=t.items[n]=e}},e.prototype._getArticlesKeys=function(e){var t=this,n=[];return(0,o.forIn)(e,(function(i,r){i.loaded()?(delete t._toLoad.items[r],delete e[r]):n.push(r)})),n},e.prototype._getPagesKeys=function(e){var t=this,n=[];return(0,o.forIn)(e,(function(i,r){i.loaded()?(delete t._toLoad.pages[r],delete e[r]):n.push({ProfileId:i.ProfileId,PageN1:i.PageN1,PageN2:i.PageN2})})),n},e.prototype._onItemsLoaded=function(e,t){var n=this;if(this._removedArticleIds={},e!==this._ts||this.items.isEmpty())se.U.onArticlesLoaded(this._removedArticleIds);else{var r=(0,o.chain)(t.Articles||t).map((function(e){delete n._toLoad.items[e.Id];var t=n._map[e.Id];if(!t||t.Type===d.g.page)return null;var i=(0,o.clone)(t);if(t.update(e),!t.checkTextLength()&&!(0,ae.tJ)(t)){if(!0===t.keepInSmartFlow){var r=n._createPageFromArticle(e);if(r){i.Type=d.g.page;var a=new q.Z(i);return a.update(r),a.provider(n).loaded(!0),n._map[a.getId()]=a,n.items.replace(t,a),t.loaded(!1).provider(null).group(null),n._map[e.Id]=null,t.dispose(),a}}return n.removeArticle(t),null}return n._removedArticlesCount=0,t.loaded(!0)})).filter().value();if(this._removedArticlesCount>40)return this._onLoadItemsFailed(),void se.U.onArticlesLoaded(this._removedArticleIds);r.push.apply(r,(0,i.ev)([],(0,i.CR)((0,o.chain)(t.Pages||t).map((function(e){var t=e.PageN1 instanceof Object?e.PageN1.PageN:e.PageN1,i=e.PageN2 instanceof Object?e.PageN2.PageN:e.PageN2,r=n._map[q.Z.getId(e.ProfileId,t,i)];return r&&delete n._toLoad.pages[r.getId()],e.PageN1 instanceof Object?!r||r.loaded()?null:r.update(e.PageN1,e.PageN2).loaded(!0):(n.removeArticle(r),null)})).filter().value()),!1)),se.U.onArticlesLoaded(this._removedArticleIds),(0,o.defer)(this._on.articlesLoaded.fire,r)}},e.prototype._createPageFromArticle=function(e){return e.Issue&&e.Issue.FirstPageSize?{BookmarkId:e.BookmarkId,Issue:e.Issue,Name:e.PageName,PageN:e.Page,H:e.Issue.FirstPageSize.Height,W:e.Issue.FirstPageSize.Width}:null},e.prototype._onLoadItemsFailed=function(){var e=this;this.items.isEmpty()||this.items.forEach((),this._setLEOF(),this._setREOF(),this._removedArticlesCount=0,(0,o.defer)(this._on.articlesLoadError.fire)},e.prototype._getBundle=function(e){return e&&e in this._map?(0,o.find)(this._bundles,(function(t){return(0,o.some)(t.articles,(function(t){return t.getId()===e}))})):null},e.prototype._ensureDataLoading=function(e,t){if(t<0){if(this._setLEOF(),this.items.isEmpty())return this.loadMore(this)}else{if(e&&(0,f.m)()===h.n3.TopNews)return this._resetRightToken(),this.loadMore(this);if(this._setREOF(),!e&&this.items.isEmpty())return this.loadHistory(this)}return Promise.resolve()},e.prototype._getPendingHistory=function(){var e=[];return this.items.forEach((function(t){t.tokenized()||e.push({Id:t.Id,Type:t.Type,Data:t.Data})})),e},e.prototype._onLoadFailed=function(e){var t=this;e===this._ts&&(this._setLEOF(),this._setREOF(),this._on.articlesLoadError.fire(),(0,o.defer)((function(){if(t._onErrorOnce.length){var e=t._onErrorOnce;t._onErrorOnce=[],(0,o.forEach)(e,(function(e){return(0,o.defer)(e)}))}})))},e.prototype._setLEOF=function(){this._leftToken=null,this.items&&this.items.head()&&this.items.head().prev(null)},e.prototype._setREOF=function(){this._rightToken=null,this.items&&this.items.tail()&&this.items.tail().next(null)},e.prototype._refreshAccessRights=function(e){var t=this;if((0,o.isEmpty)(e))return Promise.resolve();var n=(0,o.chain)(e).filter((function(e){return e.loaded()&&!e.PotentiallyAllowedToRead})).filter(().value(),i=(0,o.filter)(n,ae.tJ),r=(0,o.filter)(n,(function(e){return!(0,ae.tJ)(e)}));if((0,o.each)(r,(function(e){return e.loaded(!1)})),i.length>0){(0,o.each)(i,(function(e){return t._addToLoad(e,{items:{}})}));var a={Articles:(0,o.map)(i,(function(e){return e.getId()})),Pages:[]};return this._loadDetailed(a)}return Promise.resolve()},e.prototype._onPurchaseStateChanged=function(){var e=this,t=(0,o.clone)(this._toLoad.items),n=null,i=function(r){var a=(0,o.chain)(r).filter((function(e){return e&&e.Type===d.g.article})).filter((function(e){return t[e.getId()]})).value();(0,o.each)(a,(function(e){return delete t[e.getId()]})),(0,o.isEmpty)(e._toLoad.items)&&(e._on.articlesLoaded.remove(i),e._on.articlesLoadError.remove(n)),e._refreshAccessRights(a).catch(g.Z.error)};n=function(){(0,o.isEmpty)(e._toLoad.items)&&(e._on.articlesLoaded.remove(i),e._on.articlesLoadError.remove(n))},(0,o.isEmpty)(t)||(this._on.articlesLoaded.add(i),this._on.articlesLoadError.add(n));var r=(0,o.chain)(this._map).valuesIn().filter((function(e){return e&&e.Type===d.g.article})).value();this._refreshAccessRights(r).catch(g.Z.error)},e}(),he=de},44039:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var i=n(22970),r=n(40180),o=n(20384),a=n(11569),s=n(60026),u=n(10751),c=n(42995),l=n(71151),d=n(32263),h=n(91330),p=n(77004),f=n(61612),m=n(79913),g=n(2099),v=n(4169),y=function(){function e(e){this._ts=Date.now(),this._requests=[],this._isAwaiting=!1,this._urlViewName=e}return e.prototype.getArticles=function(e,t){var n=this,i=t||h.Z.currentLanguage();return new Promise((function(t,r){n._requests.push({ids:e,language:i,resolve:t,reject:r}),n._sendRequest()}))},e.prototype.getArticle=function(e,t){var n={key:e,viewType:this._urlViewName},i=t||h.Z.currentLanguage();i&&(n.lng=i);var r=g.Z.bookmark();return r&&(n.bookmark=r.bookmarkId),(0,m.$k)("articles","GetArticle",n,{})},e.prototype.reset=function(){this._ts=Date.now();var e=this._requests;this._requests=[];var t=new Error("Request expired.");e.forEach((function(e){return e.reject(t)}))},e.prototype._sendRequest=function(){var e,t,n,o,a=this;if(this._requests.length&&!this._isAwaiting){var s=this._requests[0].language,u=(0,r.remove)(this._requests,(function(e){return e.language===s})),c=[],l={};try{for(var d=(0,i.XA)(u),p=d.next();!p.done;p=d.next()){var f=p.value;try{for(var y=(n=void 0,(0,i.XA)(f.ids)),_=y.next();!_.done;_=y.next()){var b=_.value;b in l||(l[b]=1,c.push(b))}}catch(e){n={error:e}}finally{try{_&&!_.done&&(o=y.return)&&o.call(y)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{p&&!p.done&&(t=d.return)&&t.call(d)}finally{if(e)throw e.error}}var w={comment:"LatestByAll",viewType:this._urlViewName,articles:null};v.Z.get("textview.enableMarkup",!1)&&(w.options=1);var C={};if(s){var I=h.Z.auto.exceptions();(0,r.isEmpty)(I)||(w.lngExceptions=I.join(",")),w.language=s,C.timeout=3e4}var P=g.Z.bookmark();P&&(w.bookmark=P.bookmarkId),this._isAwaiting=!0;var x=this._ts;(function(e,t,n){var r=[],o=0;t.articles=e.slice(o,o+50).join(",");var a=function(s){return r.push.apply(r,(0,i.ev)([],(0,i.CR)(s.Articles),!1)),(o+=50)>=e.length?r:(t.articles=e.slice(o,o+50).join(","),(0,m.$k)("articles","GetItems",t,n).then(a))};return(0,m.$k)("articles","GetItems",t,n).then(a)})(c,w,C).then((function(e){var t,n;if(a._isAwaiting=!1,x===a._ts){e.forEach((function(e){return l[e.id||e.Id]=e}));try{for(var o=(0,i.XA)(u),s=o.next();!s.done;s=o.next()){var d=s.value,h=(0,r.map)(c,(function(e){return l[e]}));d.resolve(h)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}a._sendRequest()}else{var p=new Error("Request expired.");u.forEach((function(e){return e.reject(p)}))}}),(function(e){u.forEach((function(t){return t.reject(e)})),a._isAwaiting=!1,a._sendRequest()}))}},e}(),_=n(27670),b=n(46720),w=n(17696),C=n(70263),I=n(6677),P=n(63666),x=!1;g.Z.issueLoaded((function(){x=!0}));var S=function(){function e(e){var t=this;this.number=e.PageNumber,this.name=e.PageName,e.Articles&&e.Articles.length&&(this.articles=(0,r.map)(e.Articles,(function(e){var n=new s.Z(e);return n.Type=u.g.article,n.Page=t,n})))}return e.prototype.remove=function(e){return this.articles&&(0,r.pull)(this.articles,e),this},e}(),T=function(){function e(e,t,n){this.id=e,this.title=t||"",n&&this.add(n),this._articles=[],this.minrate=1/0,this.maxrate=0,this._map={},this._ready=!1,this._changed=!1}return e.prototype.add=function(e){return e.Section=this,this._articles.push(e),this.maxrate=Math.max(this.maxrate,e.Rate),this.minrate=Math.min(this.minrate,e.Rate),e.loaded()&&(this._map[e.ArticleId]=e),this._ready&&!e.loaded()&&(this._ready=!1),this._changed=!0,this._isReadyPromise=null,this},e.prototype.remove=function(e){return(0,r.pull)(this._articles,e),this._changed=!0,this._isReadyPromise=null,this},e.prototype.article=function(e){return this.ready()?(0,r.isNumber)(e)?e>=this._articles.length?null:this._articles[e].hyphenate():this._map[e.ArticleId]:null},e.prototype.articles=function(e){return e||this.ready()?this._articles.slice(0):null},e.prototype.ready=function(){var e=this;if(!this._changed&&this._ready)return!0;if(this._changed=!1,!this._articles.length)return!1;this._ready=!0;var t=this._articles;if(this.reset(),t.forEach((function(t){return e.add(t)})),this._changed=!1,!this._ready)return!1;var n=this.maxrate-this.minrate;return this._articles.forEach((function(t){n?t.SecNormRate=(t.Rate-e.minrate)/n:e.maxrate?t.SecNormRate=t.Rate/e.maxrate:t.SecNormRate=Math.random()})),!0},Object.defineProperty(e.prototype,"isEmpty",{get:enumerable:!1,configurable:!0}),e.prototype.reset=function(){this._articles=[],this.minrate=1/0,this.maxrate=0,this._map={},this._isReadyPromise=null},e.prototype.isReadyPromise=function(){var e=this;return this._isReadyPromise?this._isReadyPromise:this.ready()?Promise.resolve():(this._isReadyPromise=new Promise((function(t,n){var i=function(){if(e.ready())t();else{var r=[];e._articles.forEach((),r.length||n(new Error("Inconsistency.")),Promise.all(r).then(i)}};i()})),this._isReadyPromise)},e}(),k=null,A=function(){function e(){var e=this;this._onlineLoader=new y(f.i.toUrlViewName(_.Z.getActiveViewName())),this._offlineLoader=null,this._articles=null,this._pages=null,this._sections=null,this._map=null,this._callbacks={},this._ts=0,this._loaded=!1,this._loadPromise=null,this._loadingSections=[],this._loadingArticlesIds={},this._issueLoad={promise:null,resolve:null,reject:null},this._onLoadOnce=[],g.Z.issueLoading((function(){return e._reset()})),g.Z.issueLoaded(this._onIssueLoaded.bind(this)),x&&this._onIssueLoaded(),h.Z.bind("currentLanguageChanged",(function(){return e._onCurrentLanguageChanged()})),b.Z.bind(w.default,"stateChanged",null,(function(){return e._onPurchaseStateChanged()})),this._bookmarkCreateSubscription||(this._bookmarkCreateSubscription=C.bookmarkCreateSubscription.pipe((0,a.h)((function(e){return e.data&&e.data.articleId}))).subscribe((function(t){if(e._articles){var n=t.data.articleId;e._articles.forEach((function(e){e.ArticleId!==n||(e.BookmarkId="bookmarked")}))}}))),this._bookmarkDeleteSubscription||(this._bookmarkDeleteSubscription=C.bookmarkDeleteSubscription.pipe((0,a.h)((function(e){return e.data&&e.data.articleId}))).subscribe((function(t){if(e._articles){var n=t.data.articleId;e._articles.forEach((function(e){e.ArticleId!==n||(e.BookmarkId=void 0)}))}})))}return e.prototype.reset=function(){},e.prototype._reset=function(e){void 0===e&&(e=!1),this._ts=Date.now();var t=this._articles;this._articles=null,t&&!t.isEmpty()&&t.forEach((function(e){(0,P.Ze)(e,(function(){return e.dispose()}))})),this._pages=null,this._sections=null,this._map=null,this._loadingSections=[],this._loaded=!1,e||(this._issueLoad.reject&&this._issueLoad.reject(),this._issueLoad.promise=this._issueLoad.resolve=this._issueLoad.reject=null),this._loadPromise=null,(0,c.m)(),this._onlineLoader.reset(),"reset"in this._callbacks&&(0,r.defer)(this._callbacks.reset.fire)},e.prototype.load=Object.defineProperty(e.prototype,"loadPromise",{get:function(){return this.load()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mandatoryArticleId",{get:function(){return this._mandatoryArticleId},set:function(e){this._mandatoryArticleId=e,this.filterContinuations()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mandatoryArticle",{get:function(){return this._map&&this.mandatoryArticleId?this._map[this._mandatoryArticleId]:null},enumerable:!1,configurable:!0}),e.prototype.filterContinuations=function(){var e=this;this._sections=[],this._articles=new l.xL;var t,n,o=0;d.Z.sections().filter((function(e){return!(0,r.isEmpty)(e.Pages)})).forEach((function(a){var s=a.SectionName||t||a.Pages[0].PageName||a.Pages[0].PageNumber.toString();t!==s&&((0,r.isEmpty)(n)||e._addSection(o++,t,n),t=s,n=[]),n=n.concat.apply(n,(0,i.ev)([],(0,i.CR)((0,r.chain)(a.Pages).map(().compact().map((function(e){return e.articles})).value()),!1))})),(0,r.isEmpty)(n)||this._addSection(o++,t,n),this._articles.head().prev(null),this._articles.tail().next(null)},e.prototype.isEmpty=function(){return this._loaded||this.load(),!!this._articles&&this._articles.isEmpty()},e.prototype.translate=function(e,t,n){this._onlineLoader.getArticles([e.Id],t).then((function(e){n(e)}))},e.prototype.getArticleById=function(e){return this._loaded||this.load(),this._loaded&&this._map?this._map[e]:null},e.prototype.getFirstArticle=function(e){if(void 0===e&&(e=1),this._loaded||this.load(),!this._loaded)return null;for(var t=d.Z.pages().length,n=e;n<=t;++n)if(n in this._pages&&!(0,r.isEmpty)(this._pages[n].articles))return this._pages[n].articles[0];for(n=e-1;n>0;--n)if(n in this._pages&&!(0,r.isEmpty)(this._pages[n].articles))return this._pages[n].articles[0];return I.Z.log('Article for page "'.concat(e,'" was not found')),null},e.prototype.getCurrentLastArticle=function(){if(this._loaded||this.load(),!this._loaded||!this._pages)return null;for(var e=d.Z.pages().length;e>0;--e)if(e in this._pages&&!(0,r.isEmpty)(this._pages[e].articles))return(0,r.last)(this._pages[e].articles);return null},e.prototype.section=function(e){if(this._loaded||this.load(),!this._loaded||!this._sections)return null;var t=this._sections[e];return t?(t.ready()||this._loadSection(t),t):null},e.prototype.removeArticle=function(e){e.loaded(!1).provider(null),e.Page.remove(e),e.Section.remove(e),e.group(null),delete this._map[e.Id],this._articles&&this._articles.detach(e),e.dispose()},Object.defineProperty(e,"offlineLoader",{set:function(e){k=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offlineLoader",{get:set:function(e){this._offlineLoader=e},enumerable:!1,configurable:!0}),e.prototype.bind=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 2===t.length&&(0,r.isString)(t[0])?this._bind(t[0],t[1]):1===t.length&&(0,r.isObject)(t[0])&&(0,r.forIn)(t[0],(function(t,n){return e._bind(n,t)})),this},e.prototype.unbind=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.length?(0,r.isString)(t[0])?this._unbind(t[0],t[1]):(0,r.isObject)(t[0])?(0,r.forIn)(t[0],(function(t,n){return e._unbind(n,t)})):(0,r.isFunction)(t[0])&&(0,r.forIn)(this._callbacks,():(0,r.forIn)(this._callbacks,(function(e){return e.empty()})),this},e.prototype.loadItem=e.prototype.accessItem=e.prototype.on=e.prototype.getAnchorItem=function(){return null},e.prototype._loadPages=function(){var e=this,t=this._ts;return this._issueLoadPromise().then((function(){return new Promise((function(n,i){t===e._ts?d.Z.pages((function(o){if(t===e._ts){e._loaded=!0,e._map={},e._pages={};var a=!0;(0,r.chain)(o).map((function(e){return new S(e)})).filter(().forEach((function(t){e._pages[t.number]=t,t.articles.forEach((function(t){t.provider(e),e._map[t.Id]=t})),a=!1})).commit(),a?i():(e.filterContinuations(),"articlesLoaded"in e._callbacks&&e._callbacks.articlesLoaded.fire(),e._onLoadOnce.length&&e._onLoadOnce.forEach((function(e){return(0,r.defer)(e,o)})),n())}else i()})):i()}))}))},e.prototype._addSection=function(e,t,n){var i=this,o=this.mandatoryArticle,a=new T(e,t),s=(0,c.U)(e,t),u={};this._mandatoryArticleId&&(r.map[this._mandatoryArticleId]=1),n.forEach((function(e){e.loaded()&&e!==o?e.ArticleId in u?e.group(null):(i._articles.append(e),u[e.ArticleId]=1,a.add(e),s.add(e)):(i._articles.append(e),a.add(e),s.add(e))})),a.ready(),this._sections.push(a)},e.prototype._getIssueLoad=function(){var e=this;return this._issueLoad.promise||(this._issueLoad.promise=new Promise(()),this._issueLoad},e.prototype._resolveIssueLoad=function(){var e=this._getIssueLoad();e.resolve&&(e.resolve(),e.resolve=e.reject=null)},e.prototype._issueLoadPromise=e.prototype._onCurrentLanguageChanged=e.prototype._onIssueLoaded=function(){this._resolveIssueLoad()},e.prototype._onDetailedArticlesLoaded=function(e,t){var n=this;if(e===this._ts&&this._loaded){var i=[],o={};t.forEach((function(e){var t=n._map[e.Id];t&&(t.update(e),t.checkTextLength()||(0,P.tJ)(t)?(i.push(t.loaded(!0)),t.Section&&!(t.Section.id in o)&&(o[t.Section.id]=t.Section)):n.removeArticle(t))}));var a=this.mandatoryArticle;(0,r.forIn)(o,(function(e){var t=e.articles(!0);e.reset();var i={};n._mandatoryArticleId&&(i[n._mandatoryArticleId]=1),t.forEach((function(t){t.loaded()&&t!==a?t.ArticleId in i?t.group(null):(i[t.ArticleId]=1,e.add(t)):e.add(t)})),e.isEmpty&&(0,r.pull)(n._sections,e)})),"articlesLoaded"in this._callbacks&&i.length?(0,r.defer)(this._callbacks.articlesLoaded.fire,i):"articlesLoadError"in this._callbacks&&!i.length&&(0,r.defer)(this._callbacks.articlesLoadError.fire)}},e.prototype._loadSection=function(e,t){var n=this;if(!this._loadingSections[e.id]){this._loadingSections[e.id]=e;var o=e.articles(!0);if(o){var a;if(t){var s=(0,r.chain)(o).takeRightWhile((function(e){return e!==t})).filter((function(e){return!e.loaded()})).map((function(e){return e.Id})).reverse().value(),u=(0,r.chain)(o).takeWhile((function(e){return e!==t})).filter((function(e){return!e.loaded()})).map((function(e){return e.Id})).value();a=(0,i.ev)((0,i.ev)([t.Id],(0,i.CR)(s),!1),(0,i.CR)(u),!1)}else a=(0,r.chain)(o).filter(().map((function(e){return e.Id})).value();a=(0,r.map)(a,(function(e){return e.toString()})),this._loadDetailed(o,a).finally(()}}},e.prototype._loadDetailed=function(e,t){var n=this;if(void 0===t&&(t=[]),(0,r.remove)(t,(),0===t.length)return Promise.resolve();t.forEach(();var i=this._ts,o=function(e){e.forEach((function(e){return delete n._loadingArticlesIds[e.Id]})),n._onDetailedArticlesLoaded(i,e)};return!this.offlineLoader||h.Z.currentLanguage()&&p.online()?!this.offlineLoader||p.online()?this._onlineLoader.getArticles(t).then(o,(function(o){if(t.forEach((),i===n._ts)throw e.forEach(n.removeArticle.bind(n)),(0,r.defer)(n._callbacks.articlesLoadError.fire),o})):Promise.reject(new Error("Loader is not configured")):this.offlineLoader.load(t,o)},e.prototype._bind=function(e,t){return e in this._callbacks||(this._callbacks[e]=o.Callbacks("unique")),this._callbacks[e].add(t),this},e.prototype._unbind=function(e,t){e in this._callbacks&&(t?this._callbacks[e].remove(t):this._callbacks[e].empty())},e.prototype.onLoadOnce=function(e){return(0,r.isFunction)(e)&&this._onLoadOnce.push(e),this},e.prototype._refreshAccessRights=function(e){var t=this;if((0,r.isEmpty)(e))return Promise.resolve();var n=e.filter(().filter((function(e){return!t._loadingArticlesIds[e.getId()]})),i=n.filter(P.tJ);n.filter(().forEach((function(e){return e.loaded(!1)}));var o=(0,r.map)(i,(function(e){return e.getId()}));return this._loadDetailed([],o)},e.prototype._onPurchaseStateChanged=function(){var e=this,t=(0,r.clone)(this._loadingArticlesIds),n=null,i=function(o){var a=o.filter(();a.forEach((),(0,r.isEmpty)(e._loadingArticlesIds)&&(e._unbind("articlesLoaded",i),e._unbind("articlesLoadError",n)),e._refreshAccessRights(a).catch(I.Z.error)};n=function(){(0,r.isEmpty)(e._loadingArticlesIds)&&(e._unbind("articlesLoaded",i),e._unbind("articlesLoadError",n))},(0,r.isEmpty)(t)||(this._bind("articlesLoaded",i),this._bind("articlesLoadError",n));var o=(0,r.valuesIn)(this._map);this._refreshAccessRights(o).catch(I.Z.error)},e}(),E=A},82641:function(e,t,n){"use strict";n.d(t,{F1:function(){return C},bd:function(){return S},ZP:function(){return k},fq:function(){return w},k7:function(){return P},N5:function(){return T},bz:function(){return x},Tn:function(){return I}});var i=n(20384),r=n(40180),o=n(24458),a=n(60078),s=n(79913),u=n(10751),c=n(8871),l=n(4169),d=n(11414),h=n(88812),p=n(74981),f=n(32263),m=n(2099),g=n(91330),v=(n(44039),n(62106)),y=(n(88901),n(70263),function(){var e={load:function(e,t,n){var r={RowCount:t,Pattern:e,SearchArea:n};return i.nd.services.api.get("fts","GetHistory",r)},clear:function(e){return i.nd.services.api.get("fts","RemoveHistory",{SearchArea:e})}};i.nd.data.ftshistory.onlineLoader(e)}(),n(51165)),_=(h.Z.onlineLoader({load:function(e,t){var n={RowCount:t,Pattern:e};return y.Z.get("fts","GetRecommendation",n)}}),!1);i.nd.data.loaders={online:{}},function(){var e={};f.Z.onlineLoader(e),e.load=function(e){if(m.Z.issue()){var t={issue:m.Z.issue(),version:m.Z.layoutVersion(),expungeVersion:m.Z.expungeVersion()};m.Z.isExternal()&&i.extend(t,{isExternal:!0});var n=g.Z.currentLanguage();n&&(t.lng=n);var r=(0,a.D3)(t),o=d.Z.getSectionsForIssue(m.Z.issue());Promise.all([r,o]).then(().catch((function(){}))}}}(),i.nd.data.loaders.online.getArticle=function(e,t,n,i){var r={key:e};return t||(t=g.Z.currentLanguage()),t&&(r.lng=t),n&&(r.viewType=n),i&&(r.bookmark=i),(0,s.$k)("articles","GetArticle",r)},i.nd.data.loaders.online.articleitems=function(){var e,t={};function n(e,t,n,i,r){return u(e,n,i,r).then(t)}t.load=function(){return("function"==typeof arguments[1]?n:u).apply(this,arguments)};var a,s=((a=[])[o.n3.Profile]=function(t){t&&i.nd.ui&&i.nd.ui.profile&&(t.CommentsProfileId=c.default.getProfileId(),t.socialProfileId=e&&e.profileId||"",t.comment=null)},a[o.n3.Bookmarks]=function(e){if(e){var t=i.nd.viewer.views.getActiveView(),n=t.getViewConfig();e.socialProfileId=n&&n.profileId||"",t.getCurrentLabelGuidId&&t.getCurrentLabelGuidId().then((function(t){e.labelid=t}))}},a);function u(t,n,a,u){var c={articles:t.Articles.join(","),pages:d(t.Pages).join(","),socialInfoArticles:(t.SocialArticles||[]).join(","),comment:"LatestByAll"};u&&(c.contentAccessToken=u),l.Z.get("textview.enableMarkup",!1)&&(c.options=1);var f={};if(n||(n=g.Z.currentLanguage()),n){var m=g.Z.auto.exceptions();m&&m.length&&(c.lngExceptions=m.join(",")),c.language=n,f.timeout=3e4}if(a){c.viewType=a;var v=s[a.toLowerCase()];v&&v(c)}return e&&e.bookmark&&(c.bookmark=e.bookmark),p.Z.get("articles","GetItems",c,f).then((function(n){var a=r.transform(n.Articles,(,{});return r.forEach(t.Articles,(function(e){e in a||n.Articles.push({Id:e})})),n.Pages=function(e,t){for(var n,i=0;i<t.length;i++)(n=t[i]).PageN1=h(e,n.ProfileId,n.PageN1),n.PageN2>0&&(n.PageN2=h(e,n.ProfileId,n.PageN2));return t}(n.Pages,t.Pages),i.nd.viewer.views.getActiveViewName()==o.n3.Profile&&function(e,t,n){e=e||[];for(var i=0;i<e.length;i++){var r=e[i];r.SocialInfo&&(r.SocialInfo.currentProfileId=t,r.SocialInfo.commentKey=n)}}(n.Articles,e.profileId,e.commentKey),n}),(function(e){throw e}))}function d(e){for(var t,n=[],i=0;i<e.length;i++)t=e[i],n.push(t.ProfileId+"_"+t.PageN1),t.PageN2>0&&n.push(t.ProfileId+"_"+t.PageN2);return n}function h(e,t,n){for(var i=e.length;i--;)if(e[i].ProfileId===t&&e[i].PageN===n)return e[i];return n}return t.setParams=function(t){e=t},t}(),i.nd.data.loaders.online.topNewsFeed=function(){var e={},t=!1,n=null;e.load=function(e,i,o,a,s){return void 0===e&&(void 0===i||i>0)?function(e,i){var o=40*(e||1);if(!e){var a=r.get(o);if(a)return Promise.resolve({items:a})}var s={maxItems:o,cleaned:_,reset:t};i&&i.length&&(s.pendingHistory=i);var u=g.Z.currentLanguage();if(u){var c=g.Z.auto.exceptions();c&&c.length&&(s.lngExceptions=c.join(",")),s.language=u}return n&&(s.injectedArticleId=n,n=null),(s.pendingHistory?p.Z.post("TopNewsFeed","GetFeed",JSON.stringify(s),{contentType:"application/json"}):p.Z.get("TopNewsFeed","GetFeed",s)).then((function(e){return t=!1,_=!0,{items:r.put(e),rightToken:e&&e.length?void 0:null}}),()}(o,s):function(e,t,n){var i=40;return n>40&&(i=n),p.Z.get("TopNewsFeed","GetHistory",{token:e||"",dir:t,maxItems:i,cleaned:_}).then(()}(e,i,a)},e.setResetFlag=function(e){t=e};var r={_items:null,_expired:null,_enable:!1,enable:function(){return this._enable},clear:function(){this._items=null},isExpired:function(){return this._expired<(new Date).getTime()&&(this._items=null,!0)},get:function(e){return this._items&&!this.isExpired()&&this._items.length>e/2?this._items:null},put:function(e,t){if(e&&this._items&&this._items.length){for(var n={},i=0;i<this._items.length;++i)n[this._items[i].Id]=1;var r=this._items.slice(0);for(i=0;i<e.length;++i){var o=e[i];o.Id in n||r.push(o)}e=r}return this._enable||t?(this._items=e,this._expired=(new Date).getTime()+36e5,e):e},onArticlesRead:function(e){if(this._items){for(var t={},n=0;n<e.length;++n)t[e[n].Id]=1;var i,r=this._items,o=0;for(n=r.length-1;n>=0;--n)r[n].Id in t?o++:o>0&&(i=n+1,r.splice(i,o),o=0);o>0?r.splice(0,o):i&&r.splice(0,i)}}};return i.nd.event.global.bind("uploadingArticlesHistory",(),i.nd.user.onUserStateChanged((function(){r.clear()})),i.nd.event.global.bind("textviewCleared",(function(){r.clear()})),e.inject=function(e){r.clear(),r.put(e,!0),g.Z.bind("currentLanguageChanged",()},e.injectArticle=function(e){n=e},e}(),i.nd.data.loaders.online.votes=function(){var e,t,n,i={load:function(i,r){var o=(i=i||0)+(i>-1?1:-1),a={vote:e.vote,startItem:o,pageSize:20};return p.Z.get("social","GetVotedArticles",a).then((function(e){var r=[],o=e.Items;if(o)for(var a=0;a<o.length;a++)r.push({Id:o[a].ArticleN,Type:1});return n=i+20,{items:r,leftToken:(t=i-20)<0?null:t,rightToken:!o||o.length<20?null:n}}))},setSearchParams:function(t){e=t}};return i}(),i.nd.data.loaders.online.monitors=function(){var e,t,n={};function r(r,o,a){return t&&(v.A.get().then((function(t){0==t.length&&i(n).trigger("onsearch",{params:{}});for(var r=0;r<t.length;++r)e.monitorId==t[r].id&&i(n).trigger("onsearch",{params:(o=t[r],{Id:o.id,SearchText:o.searchTerm,searchAuthor:o.author,Languages:o.languages?o.languages.join(","):"",Newspapers:o.newspapers?o.newspapers.join(","):"",Countries:o.countries?o.countries.join(","):"",SearchIn:o.searchIn})});var o})),t=!1),{items:r,leftToken:o,rightToken:a}}return n.load=function(t,n,o){if(!e||"0"===e.monitorId)return Promise.resolve(r([{Id:"monitorsBar",Type:u.g.leftBar,params:{}}],null,null));t=t||e.token||"";var a={monitor:e.monitorId||0,token:t,dir:n||1,showSame:"1"!=e.hideSimilar};return i.nd.services.api.get("TopNewsFeed","GetMonitorArticles",a).then((function(e){var i=e.Articles,o=e.Token,a=void 0===n||n>0,s=!i||i.length<20;return a?r(i,t||null,s?null:o):r(i,s?null:o,t)}))},n.setSearchParams=n.getSearchParams=function(){return e},n.onSearch=function(e){i(n).on("onsearch",e)},n.offSearch=n}(),i.nd.data.loaders.online.similar=function(){var e,t,n,i={load:function(i,r){i=i||0;var o=r&&r<0?i-20:i;o<0&&(o=0);var a={offset:o,limit:20};return p.Z.get("articles/"+e.similarArticleId,"similars",a).then((function(i){var r=i.Items||[];return 0===o&&(e.similarArticlesCount=i.Meta.TotalCount),n=(t=o)+r.length,{items:r,leftToken:t<=0?null:t,rightToken:r?n:null}}))},setSearchParams:function(t){e=t}};return i}(),i.nd.data.loaders.online.categories=function(){var e,t,n,i={load:function(i,r){var o=(i=i||0)+(i<0?-1:0);if(!e.category)return Promise.reject();var a={category:e.category,locale:e.locale,showSame:e.showSame,skip:o,maxItems:40};return p.Z.get("TopNewsFeed","GetCategoryFeed",a).then((function(r){var a=r||[];return 0==o&&a.unshift({Id:"categoriesBar",Type:u.g.leftBar,params:e.categoriesBarParams}),n=i+40,{items:a,leftToken:(t=i-40)<0?null:t,rightToken:!a||a.length<40?null:n}}))},setSearchParams:function(t){e=t},getSearchParams:function(){return e}};return i}(),i.nd.data.loaders.online.externalItems=function(){var e,t={load:function(t,n,i){t=t||"";var r={issueId:e&&e.issueId||0,token:t};return p.Z.get("ExternalArticles","GetArticles",r).then((function(e){var i=e.Articles,o=e.Token,a=void 0===n||n>0,s=!i||i.length<20;return a?{items:i,leftToken:t?void 0:null,rightToken:s?null:o}:{items:i,leftToken:s?null:o,rightToken:r.token}}))},setSearchParams:function(t){e=t}};return t}(),i.nd.data.loaders.online.profile=function(){var e,t={load:function(t,n){var i={direction:n||1,token:t=t||0,pageSize:20};return e.bookmarkId&&(i.bookmarkId=e.bookmarkId),p.Z.get("social","profiles/"+e.profileId+"/feed",i).then((function(n){var r=n.FeedItems||[];0==t&&r.unshift({Id:"profileBlock",Type:u.g.profile,params:e,Data:e.profileId});for(var o=0;o<r.length;o++){var a=r[o];if(a.Type==u.g.page){var s=a.Data;s&&(r[o]={ProfileId:s.ProfileId,PageN1:s.PageN,PageN2:s.PageN2,Type:u.g.page,Data:s})}}return{items:r,leftToken:i.direction<0?r.length?n.Token:null:t,rightToken:i.direction>0?r.length?n.Token:null:t,accessToken:n.AccessToken,anchorId:n.AnchorId}}))},setSearchParams:function(t){e=t}};return t}();var b=i.nd.data.loaders.online,w=b.getArticle,C=b.articleitems,I=(b.topNewsFeed,b.votes),P=b.monitors,x=b.similar,S=b.categories,T=(b.externalItems,b.profile),k=b},55193:function(e,t,n){"use strict";n.d(t,{kb:function(){return g}});var i=n(20384),r=n(40180),o=n(49815),a=n(92912),s=(n(16412),n(43389)),u=function(e){var t,n,i=!1;function r(){t&&(e.apply(n,t),t=null,n=null)}unction a(){n=this,t=arguments,i||(i=!0,window.requestAnimationFrame(o))}return a._flush=function(){r()},a},c={},l={},d={};!function(){var e=function(e){return function(t){if(!a.ZP.isVisible)for(var n in e)"function"==typeof e[n]&&e[n](t)}};i(document).keyup(e(c));var t=e(l),n=e(d);i.browser.msie?(i(document).keydown(t),i(document).keydown(n),i("body").click((function(){var e=i(document.activeElement);e.is(":input")||e.attr("contenteditable")||i(this).focus()}))):(i(document).keypress(t),i(document).keydown(n))}();var h,p=(h={},{add:function(e,t){for(var n=t.changedTouches,i=0;i<n.length;++i){var r=n[i].identifier;if(r in h){var o=h[r];if(e._id in o.map)continue;o.map[e._id]=1,o.instances.push(e)}else(o=h[r]={map:{},instances:[e]}).map[e._id]=1}},remove:function(e){for(var t=e.changedTouches,n=null,i=null,r=0;r<t.length;++r){var o=t[r].identifier;if(o in h){var a=h[o];if(delete h[o],r)for(var s=0;s<a.instances.length;++s){var u=a.instances[s];u._id in n||(n[u._id]=1,i.push(u))}else n=a.map,i=a.instances}}if(!i)return!1;for(r=0;r<i.length;++r)i[r]._manualTouchEnd(e)}});function f(e){return Array.prototype.slice.call(arguments,1).join("."+e._namespace+" ")+"."+e._namespace}var m=0,g=i.nd.gestures=function(e){this._id=++m,this._namespace="gestures"+this._id,this._elm=e,this._longPressTimeoutHandler=this._onLongPressTimeout.bind(this),this._doubleTapTimeoutHandler=this._onDoubleTapTimeout.bind(this),this._bindDomEvents(),this._initRequestAnimationFrame()};function v(e){var t=e.data("ndGestures");return t||(t=new g(e),e.data("ndGestures",t)),t}function y(e){(e=e.originalEvent||e).stopPropagation&&e.stopPropagation(),e.cancelBubble=!0}i.extend(g.prototype,{_id:0,_namespace:null,_elm:null,_touches:null,_touchesCount:0,_pinch:null,_tap:null,_longPressTimeoutID:0,_longPressTimeStamp:0,_doubleTapTimeoutID:0,_doubleTapTimeStamp:0,_scrollListener:null,_keyUpListener:null,_keyPressListener:null,_keyDownListener:null,_singleTapListener:null,_singleTapConfirmedListener:null,_doubleTapListener:null,_flingListener:null,_pinchListener:null,_longPressListener:null,_contextMenuListener:null,_gesturesStartListener:null,_gesturesEndListener:null,_evtTracker:null,_bindDomEvents:function(){window.navigator.pointerEnabled||window.navigator.msPointerEnabled?this._elm.css("touch-action","none").on(f(this,"MSPointerDown","pointerdown"),this._msPointerDown.bind(this)):(this._elm.on(f(this,"touchstart"),this._touchStart.bind(this)).on(f(this,"mousedown"),this._mouseDown.bind(this)),i.browser.msie&&i.browser.msie_mode<9&&this._elm.on(f(this,"dblclick"),this._mouseDoubleClick.bind(this))),this._elm.on(f(this,"contextmenu"),(function(e){return!!i(e.target).data("allow-default")||(e.preventDefault(),!1)})),c[this._id]=this._keyUp.bind(this),l[this._id]=this._keyPress.bind(this),d[this._id]=this._keyDown.bind(this)},_bind:function(e,t){var n="_"+e+"Listener";if(n in this){var i=this[n];i?i.add(t):this[n]=new I(n).add(t)}},_unbind:function(e,t){var n="_"+e+"Listener";if(n in this){var i=this[n];i&&(t?(i.remove(t),i.count||(i.empty(),delete this[n])):(i.empty(),delete this[n]))}},_hasListeners:function(){for(var e=[this._scrollListener,this._keyUpListener,this._keyPressListener,this._keyDownListener,this._singleTapListener,this._singleTapConfirmedListener,this._doubleTapListener,this._flingListener,this._pinchListener,this._gesturesEndListener,this._longPressListener],t=0;t<e.length;t++)if(e[t])return!0;return!1},_start:function(e){if(o.WU(e))return!1;if(this._checkTimeouts(e),p.add(this,e),k.init(e),this._validateTouches(e),this._touches||(this._touches={},this._tap&&this._doubleTapTimeoutID?(clearTimeout(this._doubleTapTimeoutID),this._doubleTapTimeoutID=0):this._onGesturesStart()),this._addTouches(e),1==this._touchesCount)this._setLongPressTimeout(e),this.touches()[0].button()||this._highlight(e.target);else if(this._unhighlight(!0),this._longPressTimeoutID&&(clearTimeout(this._longPressTimeoutID),this._longPressTimeoutID=0),2==this._touchesCount){var t=this.touches();this._pinch=new C(t[0],t[1]),this._onPinch(e)}else this._pinch=null;return!(!i(e.target).data||!i(e.target).data("allow-default"))||(e.preventDefault(),!1)},_initRequestAnimationFrame:function(){var e,t;window.requestAnimationFrame&&(this._onPinch=u(this._onPinch),this._onScroll=u(this._onScroll),this._onFling=u(this._onFling),this._onGesturesEnd=(e=this._onGesturesEnd,t=[this._onPinch,this._onScroll,this._onFling],function(){for(var n=0;n<t.length;n++)t[n]._flush();return e.apply(this,arguments)}))},_touchStart:function(e){this._touches||i(document).on(f(this,"touchmove"),this._touchMove.bind(this)).on(f(this,"touchend"),this._touchEnd.bind(this)),this._start(e)},_touchMove:function(e){if(this._checkTimeouts(e),k.init(e),this._touches){if(this._updateTouches(e),2==this._touchesCount)this._onPinch(e);else if(1==this._touchesCount){var t=this.touches()[0];t.distance()>4&&(this._longPressTimeoutID&&(clearTimeout(this._longPressTimeoutID),this._longPressTimeoutID=0),this._unhighlight(!0)),this._longPressTimeoutID||(this._tap&&(this._onSingleTapConfirmed(),this._tap=null,this._onGesturesEnd(),this._onGesturesStart()),this._onScroll(t))}return!((!i(e.target).data||!i(e.target).data("allow-move-default"))&&("touchend"!==e.type||!i(e.target).data||!i(e.target).data("allow-default"))&&!i.browser.android&&(e.preventDefault(),1))}},_touchEnd:function(e){return p.remove(e),i(e.target).data&&i(e.target).data("allow-default")},_manualTouchEnd:function(e){if(this._touchMove(e),k.init(e),this._touches){this._updateTouches(e);var t=this._touchesCount-e.changedTouches.length;if(this._unhighlight(),2==t){this._removeTouches(e.changedTouches);var n=this.touches();this._pinch=new C(n[0],n[1]),this._onPinch()}else this._pinch&&(this._pinch=null),t?this._removeTouches(e.changedTouches):(i(document).off(f(this,"touchmove","touchend","mousemove","mouseup","MSPointerMove","pointermove","MSPointerUp","pointerup","MSPointerCancel","pointercancel")),this._longPressTimeoutID?(clearTimeout(this._longPressTimeoutID),this._longPressTimeoutID=0,this._onSingleTap(),this._tap?(this._onDoubleTap(),this._unhighlight(!0),this._tap=null):(this._tap=this.touches()[0],this._setDoubleTapTimeout(e))):1==this._touchesCount&&this._onFling(this.touches()[0]),this._touches=null,this._touchesCount=0,this._tap||this._onGesturesEnd());return!(!i(e.target).data||!i(e.target).data("allow-default"))||(e.preventDefault(),!1)}},_keyUp:function(e){this._onKeyUp(e)},_keyPress:function(e){this._onKeyPress(e)},_keyDown:_mouseDown:function(e){i(document).on(f(this,"mousemove"),this._mouseMove.bind(this)).on(f(this,"mouseup"),this._mouseUp.bind(this)),e.touches=e.changedTouches=[{clientX:e.clientX,clientY:e.clientY,screenX:e.screenX,screenY:e.screenY,pageX:e.pageX,pageY:e.pageY,target:e.target,button:e.which-1,identifier:0}],this._start(e)},_mouseMove:function(e){1==e.which?(e.touches=e.changedTouches=[{clientX:e.clientX,clientY:e.clientY,screenX:e.screenX,screenY:e.screenY,pageX:e.pageX,pageY:e.pageY,target:e.target,button:e.which-1,identifier:0}],this._touchMove(e)):this._mouseUp(e)},_mouseUp:function(e){e.touches=e.changedTouches=[{clientX:e.clientX,clientY:e.clientY,screenX:e.screenX,screenY:e.screenY,pageX:e.pageX,pageY:e.pageY,target:e.target,button:e.which-1,identifier:0}],this._touchEnd(e)},_mouseDoubleClick:function(e){k.init(e),e.touches=e.changedTouches=[{clientX:e.clientX,clientY:e.clientY,screenX:e.screenX,screenY:e.screenY,pageX:e.pageX,pageY:e.pageY,target:e.target,button:0,identifier:0}],this._touches?this._updateTouches(e):(this._touches={},this._addTouches(e)),this._tap=this.touches()[0],this._onDoubleTap(),this._tap=null,this._longPressTimeoutID&&(clearTimeout(this._longPressTimeoutID),this._longPressTimeoutID=0),this._doubleTapTimeoutID&&(clearTimeout(this._doubleTapTimeoutID),this._doubleTapTimeoutID=0),this._touches=null,this._touchesCount=0},_msPointerDown:function(e){this._touches||i(document).on(f(this,"MSPointerMove","pointermove"),this._msPointerMove.bind(this)).on(f(this,"MSPointerUp","MSPointerCancel","pointerup","pointercancel"),this._msPointerUp.bind(this)),e.changedTouches=[e.originalEvent],e.originalEvent.identifier=e.originalEvent.pointerId,this._start(e)&&i(e.target).data&&i(e.target).data("ms-pointer-down-allow-default")||e.originalEvent.preventDefault()},_msPointerMove:function(e){e.changedTouches=[e.originalEvent],e.originalEvent.identifier=e.originalEvent.pointerId,this._touchMove(e)||e.originalEvent.preventDefault()},_msPointerUp:function(e){e.changedTouches=[e.originalEvent],e.originalEvent.identifier=e.originalEvent.pointerId,this._touchEnd(e)||e.originalEvent.preventDefault()},_validateTouches:function(e){if(this._touches&&e.touches){for(var t=e.touches,n={},i=0,r=0;r<t.length;++r){var o=t[r].identifier;o in this._touches&&(n[o]=this._touches[o],++i)}i?(this._touches=n,this._touchesCount=i,this._pinch&&2!=i&&(this._pinch=null)):(this._reset(),this._onGesturesEnd())}},_addTouches:function(e){for(var t=e.changedTouches,n=0;n<t.length;++n){var i=t[n];i.identifier in this._touches||this._touchesCount++,this._touches[i.identifier]=new b(this._elm,i,e)}},_updateTouches:function(e){for(var t=e.changedTouches,n=0;n<t.length;++n){var i=t[n],r=this._touches[i.identifier];r&&r.update(e,i)}},_removeTouches:function(e){for(var t=0;t<e.length;++t){var n=e[t];delete this._touches[n.identifier],this._touchesCount--}},_highlightObject:null,_highlight:function(e){this._unhighlight(!0),(e=i(e).closest("*["+P.attr+"]",this._elm[0])).length&&(this._highlightObject=new P(e))},_unhighlight:function(e){this._highlightObject&&(this._highlightObject.unhighlight(e),e&&(this._highlightObject=null))},_checkTimeouts:function(e){var t=e.timeStamp||i.nd.now();this._longPressTimeoutID&&t-this._longPressTimeStamp>=500&&this._onLongPressTimeout(),this._doubleTapTimeoutID&&t-this._doubleTapTimeStamp>=200&&this._onDoubleTapTimeout()},_setLongPressTimeout:function(e){this._longPressTimeoutID&&window.clearTimeout(this._longPressTimeoutID),this._longPressTimeoutID=setTimeout(this._longPressTimeoutHandler,500),this._longPressTimeStamp=e.timeStamp||i.nd.now()},_longPressTimeoutHandler:null,_onLongPressTimeout:function(){this._longPressTimeoutID&&(clearTimeout(this._longPressTimeoutID),this._longPressTimeoutID=0,this._unhighlight(!0),this._tap&&(this._onSingleTapConfirmed(),this._tap=null,this._onGesturesEnd(),this._onGesturesStart()),this._onLongPress())},_setDoubleTapTimeout:function(e){this._doubleTapTimeoutID&&window.clearTimeout(this._doubleTapTimeoutID),this._doubleTapTimeoutID=setTimeout(this._doubleTapTimeoutHandler,200),this._doubleTapTimeStamp=e&&e.timeStamp||(new Date).getTime()},_doubleTapTimeoutHandler:null,_onDoubleTapTimeout:function(){this._doubleTapTimeoutID&&(clearTimeout(this._doubleTapTimeoutID),this._doubleTapTimeoutID=0,this._onSingleTapConfirmed(),this._tap=null,this._onGesturesEnd())},_onGesturesStart:function(){this._gesturesStartListener&&this._gesturesStartListener.fire()},_onKeyUp:function(e){this._keyUpListener&&this._keyUpListener.fire(e)},_onKeyPress:function(e){this._keyPressListener&&this._keyPressListener.fire(e)},_onKeyDown:_onScroll:function(e){this._scrollListener&&(e.button()||this._scrollListener.fire(e._consume()))},_onSingleTap:function(){if(this._singleTapListener){var e=this.touches()[0];e.button()||this._singleTapListener.fire(e)}},_onSingleTapConfirmed:function(){var e=this._tap.button();if(e){if(2==e){if(!this._contextMenuListener)return;this._contextMenuListener.fire(this._tap)}}else{if(!this._singleTapConfirmedListener)return;this._singleTapConfirmedListener.fire(this._tap)}},_onDoubleTap:function(){this._doubleTapListener&&!this._tap.button()&&this._doubleTapListener.fire(this._tap)},_onFling:function(e){this._flingListener&&(e.button()||this._flingListener.fire(e._consume()))},_onPinch:_onLongPress:function(){if(this._longPressListener||this._contextMenuListener){var e=this.touches()[0];e.button()||(this._longPressListener&&this._longPressListener.fire(e),this._contextMenuListener&&this._contextMenuListener.fire(e))}},_onGesturesEnd:function(){this._gesturesEndListener&&this._gesturesEndListener.fire()},_reset:dispose:function(){this._elm.off("."+this._namespace),delete this._elm,i(document).off("."+this._namespace);for(var e=["_scrollListener","_keyUpListener","_keyPressListener","_keyDownListener","_singleTapListener","_singleTapConfirmedListener","_doubleTapListener","_flingListener","_pinchListener","_longPressListener","_gesturesStartListener","_gesturesEndListener"],t=0;t<e.length;t++)this[e[t]]&&(this[e[t]].empty(),delete this[e[t]]);this._longPressTimeoutID&&(clearTimeout(this._longPressTimeoutID),delete this._longPressTimeoutID),this._doubleTapTimeoutID&&(clearTimeout(this._doubleTapTimeoutID),delete this._doubleTapTimeoutID),delete c[this._id],delete l[this._id],delete d[this._id]},touches:),g.bind=function(e){if(3==arguments.length&&"string"==typeof arguments[1]&&"function"==typeof arguments[2]){var t=arguments[1].split(" "),n=arguments[2];e.each((function(){for(var e=v(i(this)),r=0;r<t.length;++r)e._bind(t[r],n)}))}else if(2==arguments.length&&"object"==typeof arguments[1]){var r=arguments[1];e.each((function(){var e=v(i(this));for(var t in r)e._bind(t,r[t])}))}},g.unbind=function(e){if(1==arguments.length)e.each(();else if(2==arguments.length&&"string"==typeof arguments[1]){var t=arguments[1].split(" ");e.each((function(){var e=i(this),n=e.data("ndGestures");if(n){for(var r=0;r<t.length;++r)n._unbind(t[r]);n._hasListeners()||(n.dispose(),e.removeData("ndGestures"))}}))}},g.reset=function(e){e.each(()},g.enableTouchScroll=function(e){s.v.touch&&i(e).on("touchstart touchmove",y)},g.disableTouchScroll=function(e){s.v.touch&&i(e).off("touchstart touchmove",y)},g.bindDefault=function(e){e.on("touchstart touchmove mousedown MSPointerDown pointerdown click",(function(e){(e=e.originalEvent||e).stopPropagation&&e.stopPropagation(),e.cancelBubble=!0}))};var _=function(e){this._startTime=e};_._velocity_history_time_threshold=100,_.prototype={_head:null,_tail:null,_startTime:0,update:function(e,t,n){if(n||(n=i.nd.now()),e||t){var r={time:n,expires:n+_._velocity_history_time_threshold,dx:e,dy:t,next:null,dt:n-(this._tail?this._tail.time:this._startTime)};this._tail?this._tail=this._tail.next=r:this._head=this._tail=r}for(r=this._head;r&&!(r.expires>=n);)this._head=r=r.next},velocity:function(){if(!this._head)return{vx:0,vy:0};for(var e=this._head,t=0,n=0,i=0;e;)t+=e.dx,n+=e.dy,i+=e.dt,e=e.next;return{vx:i?t/i:0,vy:i?n/i:0}}};var b=function(e,t,n){this._elm=e,this._id=this.identifier=t.identifier,this._origin={x:t.pageX,y:t.pageY},this._prevPosition=this._position={x:t.pageX,y:t.pageY},this._event=n,this._events=[n],this._startTime=n&&n.timeStamp?n.timeStamp:i.nd.now(),this._vtracker=new _(this._startTime),this._target=t.target,t.button&&(this._button=t.button)};b.prototype={_id:0,_origin:null,_position:null,_prevPosition:null,_vtracker:null,_startTime:0,_dx:0,_dy:0,_target:null,_event:null,_elm:null,_button:0,identifier:null,clone:_consume:function(){var e=this.clone();return this._prevPosition&&this._prevPosition!==this._position&&(e._dx=this._position.x-this._prevPosition.x,e._dy=this._position.y-this._prevPosition.y),this._prevPosition=this._position,e},update:function(e,t){var n={x:t.pageX,y:t.pageY};this._dx=n.x-this._position.x,this._dy=n.y-this._position.y,this._events.push(e),this._lastEvent=e;var r=e&&e.timeStamp?e.timeStamp:i.nd.now();this._vtracker.update(this._dx,this._dy,r),this._position=n},distance:stop:function(){},dx:function(){return this._dx},dy:function(){return this._dy},totalDx:function(){return this._position.x-this._origin.x},totalDy:position:function(){return{x:this._position.x,y:this._position.y}},origin:function(){return{x:this._origin.x,y:this._origin.y}},velocity:function(){return this._vtracker.velocity()},target:function(){return this._target},event:function(e){return arguments.length?(this._event=e,this):this._event},lastEvent:function(){return this._lastEvent},element:function(){return this._elm},button:function(){return this._button}};var w=function(e){r.assign(this,e)};w.prototype=r.create(b.prototype,{constructor:w});var C=C.prototype={_touch1:null,_touch2:null,_origin:null,_distance:0,origin:center:function(){return{x:(this._touch1._position.x+this._touch2._position.x)/2,y:(this._touch1._position.y+this._touch2._position.y)/2}},scale:distance:function(){var e=this._touch2._position.x-this._touch1._position.x,t=this._touch2._position.y-this._touch1._position.y;return Math.sqrt(e*e+t*t)}};var I=function(e){this._name=e};function P(e){this._elm=e,this._highlightTimeoutID=setTimeout(this._highlight.bind(this),P._highlightThreshold)}I.prototype={_name:null,_list:null,count:function(){return this._list?this._list.length:0},add:function(e){return this._list?this.contains(e)||this._list.push(e):this._list=[e],this},contains:function(e){if(!this._list)return!1;for(var t=this._list.length,n=0;n<t;++n)if(this._list[n]===e)return!0;return!1},remove:function(e){if(!this._list)return this;for(var t=this._list.length,n=0;n<t;++n)if(this._list[n]===e){this._list.splice(n,1);break}return this},empty:fire:function(){if(this._list&&!k.isPropagationStopped(this._name))for(var e=this._list.slice(),t=this._list.length,n=0;n<t;++n)if(!1===e[n].apply(this,arguments))return void k.stopPropagation(this._name)}},P.attr="-nd-tap-highlight-class-name",P._highlightThreshold=150,P._unhighlightThreshold=150,P.prototype={_elm:null,_highlightTimeoutID:0,_unhighlightTimeoutID:0,_flag:!1,_highlight:function(){this._highlightTimeoutID=0,this._elm.addClass(this._elm.attr(P.attr)),this._unhighlightTimeoutID=setTimeout(this._onUnhighlightTimeout.bind(this),P._unhighlightThreshold)},unhighlight:function(e){e?(this._flag=!0,this._highlightTimeoutID?(clearTimeout(this._highlightTimeoutID),this._highlightTimeoutID=0,delete this._elm):(this._unhighlightTimeoutID&&(clearTimeout(this._unhighlightTimeoutID),this._unhighlightTimeoutID=0),this._unhighlight())):(this._flag=!0,this._highlightTimeoutID||this._unhighlightTimeoutID||this._unhighlight())},_onUnhighlightTimeout:_unhighlight:function(){this._elm&&(this._elm.removeClass(this._elm.attr(P.attr)),delete this._elm)}};var x,S,T,k=(S=0,T={},{init:function(e){x=e,e.timeStamp||(e.timeStamp=i.nd.now(),e._brokenTimeStamp=!0),S!=e.timeStamp&&(S=e.timeStamp,T={})},isPropagationStopped:stopPropagation:function(e){T[e]=null,x&&x._brokenTimeStamp&&x.stopPropagation()}});g.enableTouchScroll.bind(g),t.ZP=g},84066:function(e,t,n){"use strict";var i=n(22970),r=n(99469),o=(n(16412),n(96389)),a=n(20384);t.Z=function(){function e(e,t,n){if(t>0&&e.Width>0){var i=100*t/e.Width;return Math.min(i,n)}return 0}function t(e,t,n){if(t>0&&e.Height>0){var i=100*t/e.Height;return Math.min(i,n)}return 0}return a.nd.imageSource={getPictureUrlByIssueForWidth:function(e,t,n,i,r){var o=Math.floor(100*r/i);return this.getPictureUrlByIssueForScale(e,t,n,o)},getPictureUrlByIssueForHeight:getPictureUrlByIssueForSize:getPictureUrlByIssueForScale:getThumbUrlByIssueForWidth:function(e,t,n,i){return e.issue&&(e=e.issue),r.Z.getThumbUrlByIssueForWidth(e,t,n,i)},getFirstPageThumbUrlByIssueForWidth:getThumbUrlByIssueForHeight:getThumbUrlByCidForHeight:function(e,t){return(0,i.mG)(this,void 0,void 0,(function(){var n=this;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return e?[4,(0,o.b)(e).then(()]:[3,2];case 1:return[2,i.sent()];case 2:return[2,null]}}))}))},getThumbUrlForLandingPage:function(e,t){return"".concat(this.getThumbUrlByCidForHeight(e,t),"&timestamp=").concat(+new Date)},getThumbUrlByCidAndDateForHeight:getThumbUrlByCidAndDateForWidth:function(e,t,n,i){return r.Z.getThumbUrlByCidAndDateForWidth(e,t,n,i)},getThumbUrlForScale:function(e,t,n,i){return r.Z.getThumbUrlForScale(e,t,n,i)},getPageImageUrlByPageInfo:getPageImageUrl:getPageImageScale:getThumbUrlByRegionKey:getFirstImage:}()},99469:function(e,t,n){"use strict";var i=n(4169),r=n(40180),o=n(20384),a=(0,r.memoize)(();t.Z={_getThumbUrl:getThumbUrlByRegionKey:getThumbUrlByCidForHeight:getThumbUrlByCidAndDateForHeight:getThumbUrlByCidAndDateForWidth:function(e,t,n,i){var r=this._getThumbUrl();if(!r)return null;if("string"!=typeof t){var o=t.getMonth()+1,a=t.getDate();t=t.getFullYear()+(o<10?"0":"")+o+(a<10?"0":"")+a}return r+"?cid="+e+"&date="+t+"&page="+(i||1)+"&width="+(n||160)},getThumbUrlByIssueForWidth:function(e,t,n,i){var r=this._getThumbUrl();if(!r)return null;var a="";return t=parseInt(t,10)||160,i&&o.support.retina&&(t*=2,a="&retina=2"),r+"?file="+e+"&page="+(n||1)+"&width="+(t=this._adjustPageImageWidth(t))+a},getFirstPageThumbUrlByIssueForWidth:getThumbUrlByIssueForHeight:getThumbUrlForScale:getPictureUrlByIssueForScale:getPageImageUrl:getPageImageScale:_calculateZoom:_adjustPageImageWidth:function(e){var t=e,n=(i.Z.get("pageSizes.pageSizes")||[]).filter((function(e){return e.w>0}));if(!(0,r.isEmpty)(n)){var o=(0,r.find)(n,(function(t){return t.w>e}));t=o?o.w:(0,r.last)(n).w}return t},_adjustFirstPageImageWidth:_adjustPageImageHeight:},98439:function(e,t,n){"use strict";var i,r,o,a,s,u=n(20384),c=n(40180),l=n(80053),d=n(17696),h=n(46720),p=n(2099),f=n(11144),m="calendar-updated",g={};function v(e,t){return i&&(a==e&&!t||"pending"===i.state())||(i=new f.B,a=e,r.load(e).then((function(t){a===e&&(t&&(o=t,s=y(t.Years)),i&&i.resolve(t),h.Z.trigger(m,g,t))})).catch(i.reject)),i.promise()}function y(e,t){var n=[];for(var i in e){if(isNaN(i))return[t];n=y(e[i],(t||"")+(0,c.padStart)(i,2,"0")).concat(n)}return n}l.default.onBeforeAccountChanged.subscribe((),g=u.extend(g,{setProvider:loaded:getData:function(){return o},getIssuesDates:function(){return s},load:v,calendarUpdatedEvent:m}),u.nd.viewer.pages.loadedChange((function(e){e&&e.value&&p.Z&&g.load(p.Z.cid())})),h.Z.bind(d.default,"stateChanged",(function(){v(p.Z.cid(),!0)})),u.nd.issuesCalendar=g,t.Z=g},82402:function(e,t,n){"use strict";n(20384);var i,r=n(60231),o=n(17447),a=n(20384),s={};!function(e,t){t.required=function(e){if("boolean"!=typeof e&&"string"!=typeof e&&!r.isObservable(e))throw new TypeError("true/false or validation message are valid options for required.");return{validate:function(t){if(!("boolean"==typeof e?e:!r.isObservable(e)||e()))return!0;var n=t;return null!=t&&("string"==typeof t&&(n=t.replace(/^\s+|\s+$/g,"")),(n+"").length>0)},message:"string"==typeof e?e:o.ZP.val("Accounting.Validation.Client.RequiredField","This field is required.")}}}(0,s),function(e){e.minLength=function(e){var t,n;if("object"===a.type(e)?(t=e.val,n=e.message):n="A value greater than or equal to "+(t=parseInt(e,10))+" is required.",isNaN(t))throw new TypeError("An integer is required for minLength.");return{validate:function(e){if(null==e)return!1;if("string"!=typeof e)throw new TypeError("A string is required to the minLength validation.");return e.length>=t},message:n}}}(s),function(e){e.email=function(e){if("boolean"!=typeof e&&"string"!=typeof e)throw new TypeError("true/false or validation message are valid options for email validator.");var t=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,n="boolean"!=typeof e||e;return{validate:function(e){return!n||""===e||null==e||t.test(e)},message:"string"==typeof e?e:"A valid Email is required."}}}(s),function(e,t){e.emailList=function(e){if("object"!=typeof e)throw new TypeError("configuration object is only valid option for email list validator.");var n=e.delimiters;if(!n)throw new TypeError("Delimiters option is required for email list validator.");n="["+n.replace(" ","\\s")+"]+";var i=e.message||"Please specify a list of valid EMail addresses separated by space, comma or semicolon.",r=new RegExp(n);return{validate:function(e){if(!e)return!0;for(var n=e.split(r),i=0,o=n.length;i<o;i++){var a=n[i];if(a&&!t.validate(a))return!1}return!0},message:i}}}(s,s.email(!0)),s.hexColor=function(e){"object"!=typeof e&&(e={includeHash:e});var t=!!e.includeHash,n=!!e.allowEmpty,i=e.message||"HEX color required",r=new RegExp("^"+(t?"#":"")+"[\\da-f]{6}$","i");return{validate:function(e){return""===e&&n||r.test(e)},message:i}},i="The value is invalid",s.customValidator=function(e){var t,n;if("function"==typeof e)t=e,n=i;else{if("object"!=typeof e)throw new Error("Invalid validator configuration: object or function expected");t=e.handler,n=e.message||i}return{validate:function(e){return t(e)},message:n}},function(e){e.autocompleted=function(e){var t,n;return"object"==typeof e?(t=e.message,n=e.autocompletedValue):"function"==typeof e&&(t="Please select a value from the list",n=e),{message:t,validate:}}(s),t.Z=s},6677:17447:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{R9:function(){return res},zd:function(){return templates}});var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(20384),jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__),nd_res_static__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8753),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(40180),lodash__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_2__),nd_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(16412),_pressreader_src_nd_baseloader__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(42758),_pressreader_src_promise_deferred__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(11144),_pressreader_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(76367),_pressreader_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(66353),_pressreader_src_nd_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(46046),_loader=jquery__WEBPACK_IMPORTED_MODULE_0__.nd.resLoader=new jquery__WEBPACK_IMPORTED_MODULE_0__.nd.baseLoader,res=jquery__WEBPACK_IMPORTED_MODULE_0__.nd.res=jquery__WEBPACK_IMPORTED_MODULE_0__.res=window.ResourceManager=function(){var e,t,n,i={},r=new _pressreader_src_promise_deferred__WEBPACK_IMPORTED_MODULE_5__.B,o=lodash__WEBPACK_IMPORTED_MODULE_2__.memoize(_pressreader_utils__WEBPACK_IMPORTED_MODULE_7__.cK);function a(){e&&n&&jquery__WEBPACK_IMPORTED_MODULE_0__("[ndres]").each((function(){var e=s(this.getAttribute("ndres"));e&&(this.innerHTML=e)}))}function s(t,n){var i=_pressreader_src_nd_utils__WEBPACK_IMPORTED_MODULE_6__.Z.getUrlParameters().showResourceNames;return _pressreader_src_nd_utils__WEBPACK_IMPORTED_MODULE_6__.Z.convertToBool(i)?t:e&&e[t]||n||""}function u(e,t){return c().then((function(){return s(e,t)}))}function c(n,i){return arguments.length>0&&(jquery__WEBPACK_IMPORTED_MODULE_0__.nd.event.one(t,"loaded",n,i),e&&jquery__WEBPACK_IMPORTED_MODULE_0__.nd.event.trigger("loaded",t,t)),r.promise()}_loader.bind((function(n,i){i&&i.res&&(e=jquery__WEBPACK_IMPORTED_MODULE_0__.extend({},nd_res_static__WEBPACK_IMPORTED_MODULE_1__.Z.getResources(),i.res),jquery__WEBPACK_IMPORTED_MODULE_0__.nd.event.trigger("loaded",t,t),a(),r.resolve(t))})),jquery__WEBPACK_IMPORTED_MODULE_0__(();var l="d MMM yyyy",d={};return t={val:s,valAsync:u,get:s,getVal:s,getSafeRTLString:function(e,n){if(i[e])return i[e];var r=t.getVal(e);return r?(i[e]=t.embedRTL(r),i[e]):n},loaded:c,isLoaded:function(){return!!e},getItems:function(){return e},format:function(){if(0===arguments.length)return"";var e=s(arguments[0]);return _pressreader_utils__WEBPACK_IMPORTED_MODULE_8__.WU.apply(null,[e].concat(Array.prototype.slice.call(arguments,1)))},formatAsync:function(e,t){if(!e)return Promise.reject(new Error("resname is empty"));var n=Array.prototype.slice.call(arguments,2);return u(e,t).then((function(e){return _pressreader_utils__WEBPACK_IMPORTED_MODULE_8__.WU.apply(null,[e].concat(n))}))},format2:function(){var e=arguments;if(e.length>0){var t=this.getVal(e[0]);if(!jquery__WEBPACK_IMPORTED_MODULE_0__.nd.isEmpty(t))for(var n=1;n<e.length;n++){var i=e[n];i&&i.name&&(t=t.replace(new RegExp("(\\{"+i.name+"})","g"),(i.value||"").toString()))}return t||""}return""},formatDate:function(e,t,n){if(!lodash__WEBPACK_IMPORTED_MODULE_2__.isDate(e)||lodash__WEBPACK_IMPORTED_MODULE_2__.isNaN(e.getTime()))return"";var i=t?this.getVal(t,n)||l:n||l;return(i=o(i,d))(e)},formatDateAsync:function(){var e=[].slice.call(arguments);return c().then((function(t){return t.formatDate.apply(t,e)}))},getMonthFullName:function(e){var t=_pressreader_utils__WEBPACK_IMPORTED_MODULE_7__.Y7[e];return this.getSafeRTLString("Calendar."+t,t)},getMonthShortName:function(e){var t=_pressreader_utils__WEBPACK_IMPORTED_MODULE_7__.nm[e];return this.getSafeRTLString("Calendar."+t,t)},getWeekDayFullName:function(e){var t=_pressreader_utils__WEBPACK_IMPORTED_MODULE_7__.jc[e];return this.getSafeRTLString("Calendar."+t,t)},getWeekDayShortName:function(e){var t=_pressreader_utils__WEBPACK_IMPORTED_MODULE_7__._Q[e];return this.getSafeRTLString("Calendar."+t,t)},getWeekDayMinName:function(e){var t=_pressreader_utils__WEBPACK_IMPORTED_MODULE_7__.x5[e];return this.getSafeRTLString("Calendar."+t,t)},embedRTL:_pressreader_utils__WEBPACK_IMPORTED_MODULE_8__.Px},d.MMM=function(e){return t.getMonthShortName(e)},d.MMMM=function(e){return t.getMonthFullName(e)},d.ddd=function(e){return t.getWeekDayShortName(e)},d.dddd=function(e){return t.getWeekDayFullName(e)},t}(),templates=jquery__WEBPACK_IMPORTED_MODULE_0__.nd.templates=jquery__WEBPACK_IMPORTED_MODULE_0__.templates=res.templates=window.JSTemplatesManager=function(res){var _items,_api,_loaded=new _pressreader_src_promise_deferred__WEBPACK_IMPORTED_MODULE_5__.B;function loaded(e,t){return arguments.length>0&&(jquery__WEBPACK_IMPORTED_MODULE_0__.nd.event.one(_api,"loaded",e,t),_items&&jquery__WEBPACK_IMPORTED_MODULE_0__.nd.event.trigger("loaded",_api,_api)),_loaded.promise()}unction getTemplate(e){return _items?_items[e]:null}nction renderTo(e,t,n){var i=getTemplate(e);return i&&i.renderTo(t,n),this}function appendTo(e,t,n){var i=getTemplate(e);return i&&i.appendTo(t,n),this}function prependTo(e,t,n){var i=getTemplate(e);return i&&i.prependTo(t,n),this}_loader.bind((function(e,t){if(t&&t.templates){var n=[],i=t.templates;for(var r in i){var o=i[r];r&&o&&(n[r]=new JSTemplate(r,o))}_items=n,jquery__WEBPACK_IMPORTED_MODULE_0__.nd.event.trigger("loaded",_api,_api),_loaded.resolve(_api)}}));var _stack=[],_buffer,_win;function pushContext(e){_buffer||(_buffer=[]),_stack.push(e)}function popContext(){if(_stack.length){var e=_stack.pop();if(e)for(var t in e)e[t]=null}_stack.length||(_buffer=null,_win=null)}function write(e){_buffer||(_buffer=[]),_buffer.push(e)}unction execTemplate(e,t){var n=getTemplate(e);n&&processImp(n,_win,t,_stack[_stack.length])}function makeFun(name,funBody){try{if(funBody="var write = __w;"+funBody,jquery__WEBPACK_IMPORTED_MODULE_0__.isDebug){var funName="nd_templates_"+name.replace(/\./gi,"_");return funBody=funName+" = function(window,context,__w,__t, __r){"+funBody+"}",eval(funBody)||window[funName]}return new Function("window","context","__w","__t","__r",funBody)}catch(e){jquery__WEBPACK_IMPORTED_MODULE_0__.showError("Unable to parse template '"+name+"'",e)}return null}function processImp(e,t,n,i){var r={result:""};if(!e)return r;if(!e._process&&e._funBody&&(e._process=makeFun(e._name,e._funBody)),!e._process)return r;var o={data:n,template:e,_parent:i,write:write,render:i?i.render:jquery__WEBPACK_IMPORTED_MODULE_0__.nd.delegate(!0)},a=!1;pushContext(o);try{e._process(_win,o,write,execTemplate,writeRes),a=!0}catch(t){if(!jquery__WEBPACK_IMPORTED_MODULE_0__.isDebug)throw t;jquery__WEBPACK_IMPORTED_MODULE_0__.showError("Unable to execute template '"+e._name+"'",t)}return o.onrender&&o.render(o.onrender),a&&!i&&_buffer&&(r.result=_buffer.join(""),r.render=o.render),popContext(),r}function renderToImp(e,t,n){var i=processImp(e,window,t);n.html(i.result||""),i.render&&("undefined"!=typeof ko&&n.length&&ko.safeCleanNode(n[0]),i.render(n))}function appendToImp(e,t,n){var i=processImp(e,window,t);n.append(i.result||""),i.render&&i.render(n)}function prependToImp(e,t,n){var i=processImp(e,window,t);n.prepend(i.result||""),i.render&&i.render(n)}function JSTemplate(e,t){this._name=e,this._funBody=t}return JSTemplate.prototype={name:function(){return this._name},process:function(e,t){return _win=t||window,processImp(this,t,e).result},renderTo:function(e,t){return renderToImp(this,e,t),this},appendTo:function(e,t){return appendToImp(this,e,t),this},prependTo:,_api={loaded:loaded,isLoaded:isLoaded,process:process,renderTo:renderTo,appendTo:appendTo,prependTo:prependTo,getTemplate:getTemplate,getTemplateAsync:getTemplateAsync},_api}(res);_loader.load();var val=res.val.bind(res),get=res.get.bind(res),format=res.format.bind(res);__webpack_exports__.ZP=res},44288:function(e,t,n){"use strict";var i=n(20384),r=n(4169),o=n(74981),a=n(53770),s=(n(17447),i.nd.resLoader.createBaseProvider());s.load=function(){return r.Z.loaded().then((function(){var e=r.Z.get("res",{}),t={};return t.id=e.id,t.locale=e.locale,t.ts=e.ts,t.version=2,a.Z.criticalRequest(o.Z.get("res",t,{useCdn:!0})).then((function(e){s.onload(e)}))}))},i.nd.resLoader.setProvider(s)},8753:function(e,t){"use strict";var n={},i={"Important.Title.aa":"Important ({0})","Important.Title.ab":"Important ({0})","Important.Title.ae":"Important ({0})","Important.Title.af":"Important ({0})","Important.Title.ak":"Important ({0})","Important.Title.am":"Important ({0})","Important.Title.an":"Important ({0})","Important.Title.ar":"Important ({0})","Important.Title.as":"Important ({0})","Important.Title.av":"Important ({0})","Important.Title.ay":"Important ({0})","Important.Title.az":"Important ({0})","Important.Title.ba":"Important ({0})","Important.Title.be":"Important ({0})","Important.Title.bg":"Important ({0})","Important.Title.bh":"Important ({0})","Important.Title.bi":"Important ({0})","Important.Title.bm":"Important ({0})","Important.Title.bn":"Important ({0})","Important.Title.bo":"Important ({0})","Important.Title.br":"Important ({0})","Important.Title.bs":"Important ({0})","Important.Title.ca":"Important ({0})","Important.Title.ce":"Important ({0})","Important.Title.ch":"Important ({0})","Important.Title.co":"Important ({0})","Important.Title.cr":"Important ({0})","Important.Title.cs":"Important ({0})","Important.Title.cu":"Important ({0})","Important.Title.cv":"Important ({0})","Important.Title.cy":"Important ({0})","Important.Title.da":"Important ({0})","Important.Title.de":"Important ({0})","Important.Title.dv":"Important ({0})","Important.Title.dz":"Important ({0})","Important.Title.ee":"Important ({0})","Important.Title.el":"Important ({0})","Important.Title.en":"Important ({0})","Important.Title.eo":"Important ({0})","Important.Title.es":"Important ({0})","Important.Title.et":"Important ({0})","Important.Title.eu":"Important ({0})","Important.Title.fa":"Important ({0})","Important.Title.ff":"Important ({0})","Important.Title.fi":"Important ({0})","Important.Title.fj":"Important ({0})","Important.Title.fo":"Important ({0})","Important.Title.fr":"Important ({0})","Important.Title.fy":"Important ({0})","Important.Title.ga":"Important ({0})","Important.Title.gd":"Important ({0})","Important.Title.gl":"Important ({0})","Important.Title.gn":"Important ({0})","Important.Title.gu":"Important ({0})","Important.Title.gv":"Important ({0})","Important.Title.ha":"Important ({0})","Important.Title.he":"Important ({0})","Important.Title.hi":"Important ({0})","Important.Title.ho":"Important ({0})","Important.Title.hr":"Important ({0})","Important.Title.ht":"Important ({0})","Important.Title.hu":"Important ({0})","Important.Title.hy":"Important ({0})","Important.Title.hz":"Important ({0})","Important.Title.ia":"Important ({0})","Important.Title.id":"Important ({0})","Important.Title.ie":"Important ({0})","Important.Title.ig":"Important ({0})","Important.Title.ii":"Important ({0})","Important.Title.ik":"Important ({0})","Important.Title.io":"Important ({0})","Important.Title.is":"Important ({0})","Important.Title.it":"Important ({0})","Important.Title.iu":"Important ({0})","Important.Title.ja":"Important ({0})","Important.Title.jv":"Important ({0})","Important.Title.jw":"Important ({0})","Important.Title.ka":"Important ({0})","Important.Title.kg":"Important ({0})","Important.Title.ki":"Important ({0})","Important.Title.kj":"Important ({0})","Important.Title.kk":"Important ({0})","Important.Title.kl":"Important ({0})","Important.Title.km":"Important ({0})","Important.Title.kn":"Important ({0})","Important.Title.ko":"Important ({0})","Important.Title.kr":"Important ({0})","Important.Title.ks":"Important ({0})","Important.Title.ku":"Important ({0})","Important.Title.kv":"Important ({0})","Important.Title.kw":"Important ({0})","Important.Title.ky":"Important ({0})","Important.Title.la":"Important ({0})","Important.Title.lb":"Important ({0})","Important.Title.lg":"Important ({0})","Important.Title.li":"Important ({0})","Important.Title.ln":"Important ({0})","Important.Title.lo":"Important ({0})","Important.Title.lt":"Important ({0})","Important.Title.lu":"Important ({0})","Important.Title.lv":"Important ({0})","Important.Title.mg":"Important ({0})","Important.Title.mh":"Important ({0})","Important.Title.mi":"Important ({0})","Important.Title.mk":"Important ({0})","Important.Title.ml":"Important ({0})","Important.Title.mn":"Important ({0})","Important.Title.mo":"Important ({0})","Important.Title.mr":"Important ({0})","Important.Title.ms":"Important ({0})","Important.Title.mt":"Important ({0})","Important.Title.my":"Important ({0})","Important.Title.na":"Important ({0})","Important.Title.nb":"Important ({0})","Important.Title.nd":"Important ({0})","Important.Title.ne":"Important ({0})","Important.Title.ng":"Important ({0})","Important.Title.nl":"Important ({0})","Important.Title.nn":"Important ({0})","Important.Title.no":"Important ({0})","Important.Title.nr":"Important ({0})","Important.Title.nv":"Important ({0})","Important.Title.ny":"Important ({0})","Important.Title.oc":"Important ({0})","Important.Title.oj":"Important ({0})","Important.Title.om":"Important ({0})","Important.Title.or":"Important ({0})","Important.Title.os":"Important ({0})","Important.Title.pa":"Important ({0})","Important.Title.pi":"Important ({0})","Important.Title.pl":"Important ({0})","Important.Title.ps":"Important ({0})","Important.Title.pt":"Important ({0})","Important.Title.qu":"Important ({0})","Important.Title.rm":"Important ({0})","Important.Title.rn":"Important ({0})","Important.Title.ro":"Important ({0})","Important.Title.ru":"Important ({0})","Important.Title.rw":"Important ({0})","Important.Title.ry":"Important ({0})","Important.Title.sa":"Important ({0})","Important.Title.sc":"Important ({0})","Important.Title.sd":"Important ({0})","Important.Title.se":"Important ({0})","Important.Title.sg":"Important ({0})","Important.Title.sh":"Important ({0})","Important.Title.si":"Important ({0})","Important.Title.sk":"Important ({0})","Important.Title.sl":"Important ({0})","Important.Title.sm":"Important ({0})","Important.Title.sn":"Important ({0})","Important.Title.so":"Important ({0})","Important.Title.sq":"Important ({0})","Important.Title.sr":"Important ({0})","Important.Title.ss":"Important ({0})","Important.Title.st":"Important ({0})","Important.Title.su":"Important ({0})","Important.Title.sv":"Important ({0})","Important.Title.sw":"Important ({0})","Important.Title.ta":"Important ({0})","Important.Title.te":"Important ({0})","Important.Title.tg":"Important ({0})","Important.Title.th":"Important ({0})","Important.Title.ti":"Important ({0})","Important.Title.tk":"Important ({0})","Important.Title.tl":"Important ({0})","Important.Title.tn":"Important ({0})","Important.Title.to":"Important ({0})","Important.Title.tr":"Important ({0})","Important.Title.ts":"Important ({0})","Important.Title.tt":"Important ({0})","Important.Title.tw":"Important ({0})","Important.Title.ty":"Important ({0})","Important.Title.ua":"Important ({0})","Important.Title.ug":"Important ({0})","Important.Title.uk":"Important ({0})","Important.Title.ur":"Important ({0})","Important.Title.uz":"Important ({0})","Important.Title.ve":"Important ({0})","Important.Title.vi":"Important ({0})","Important.Title.vo":"Important ({0})","Important.Title.wa":"Important ({0})","Important.Title.wo":"Important ({0})","Important.Title.xh":"Important ({0})","Important.Title.yi":"Important ({0})","Important.Title.yo":"Important ({0})","Important.Title.za":"Important ({0})","Important.Title.zh":"Important ({0})","Important.Title.zu":"Important ({0})","Countries.af-na":"Namibia","Countries.af-za":"South Africa","Countries.ar-_i":"International","Countries.ar-ae":"UAE","Countries.ar-au":"Australia","Countries.ar-bh":"Bahrain","Countries.ar-eg":"Egypt","Countries.ar-gb":"International","Countries.ar-in":"India","Countries.ar-jo":"Jordan","Countries.ar-kw":"Kuwait","Countries.ar-lb":"Lebanon","Countries.ar-om":"Oman","Countries.ar-ps":"Palestine","Countries.ar-qa":"Qatar","Countries.ar-ru":"Russia","Countries.ar-sa":"Saudi Arabia","Countries.ar-sd":"Sudan","Countries.be-by":"Belarus","Countries.bg-bg":"Bulgaria","Countries.bg-ru":"Bulgaria","Countries.bs-ba":"Bosnia and Herzegovina","Countries.ca-es":"Spain","Countries.cs-cz":"Czech Republic","Countries.da-dk":"Denmark","Countries.de-at":"Austria","Countries.de-ch":"Switzerland","Countries.de-de":"Deutschland","Countries.de-es":"Spain","Countries.de-li":"Liechtenstein","Countries.de-lu":"Luxembourg","Countries.de-ru":"Germany","Countries.de-th":"Thailand","Countries.de-us":"USA","Countries.el-cy":"Cyprus","Countries.el-gr":"","Countries.el-ru":"Greece","Countries.en-_i":"Austria","Countries.en-ae":"UAE","Countries.en-at":"Austria","Countries.en-au":"Australia","Countries.en-az":"Azerbaijan","Countries.en-bb":"Barbados","Countries.en-be":"Belgium","Countries.en-bg":"Austria","Countries.en-bh":"Bahrain","Countries.en-br":"Brazil","Countries.en-by":"Belarus","Countries.en-ca":"Canada","Countries.en-ch":"Russia","Countries.en-cn":"China","Countries.en-cy":"Cyprus","Countries.en-cz":"Austria","Countries.en-de":"Australia","Countries.en-dk":"Austria","Countries.en-eg":"Egypt","Countries.en-es":"Spain","Countries.en-fi":"Austria","Countries.en-fr":"Australia","Countries.en-gb":"UK","Countries.en-gr":"Austria","Countries.en-gy":"Guyana","Countries.en-hk":"Australia","Countries.en-hr":"Croatia","Countries.en-hu":"Austria","Countries.en-id":"Austria","Countries.en-ie":"Ireland","Countries.en-il":"Israel","Countries.en-in":"India","Countries.en-iq":"Iraq","Countries.en-is":"Austria","Countries.en-it":"Australia","Countries.en-jm":"Jamaica","Countries.en-jp":"Austria","Countries.en-ke":"Kenya","Countries.en-kh":"Cambodia","Countries.en-kr":"Australia","Countries.en-kw":"Kuwait","Countries.en-ky":"Cayman Islands","Countries.en-kz":"Kazakhstan","Countries.en-lb":"Lebanon","Countries.en-li":"Austria","Countries.en-lk":"Sri Lanka","Countries.en-lu":"Austria","Countries.en-me":"Austria","Countries.en-mk":"Macedonia","Countries.en-mt":"Australia","Countries.en-mu":"Mauritius","Countries.en-my":"Malaysia","Countries.en-ng":"Nigeria","Countries.en-nl":"Netherlands","Countries.en-no":"Austria","Countries.en-np":"Nepal","Countries.en-nz":"New Zealand","Countries.en-om":"Oman","Countries.en-ph":"Philippines","Countries.en-pk":"Pakistan","Countries.en-pl":"Austria","Countries.en-pt":"Austria","Countries.en-qa":"Austria","Countries.en-ro":"Austria","Countries.en-rs":"Austria","Countries.en-ru":"Russia","Countries.en-sa":"Saudi Arabia","Countries.en-se":"Austria","Countries.en-sg":"Austria","Countries.en-sk":"Austria","Countries.en-th":"Thailand","Countries.en-tr":"Turkey","Countries.en-tw":"Taiwan","Countries.en-ua":"Austria","Countries.en-ug":"Uganda","Countries.en-us":"USA","Countries.en-vi":"USA","Countries.en-vn":"Viet Nam","Countries.en-za":"South Africa","Countries.en-zm":"Zambia","Countries.en-zw":"UK","Countries.es-ar":"Argentina","Countries.es-cl":"Chile","Countries.es-co":"Colombia","Countries.es-cr":"Costa Rica","Countries.es-do":"Dominican Republic","Countries.es-ec":"Ecuador","Countries.es-es":"Espaa","Countries.es-gt":"Guatemala","Countries.es-mx":"Mexico","Countries.es-pa":"Panama","Countries.es-pr":"Puerto Rico","Countries.es-py":"Paraguay","Countries.es-ru":"Russia","Countries.es-sv":"El Salvador","Countries.es-us":"USA","Countries.es-ve":"Venezuela","Countries.et-ee":"Estonia","Countries.fa-ir":"Iran","Countries.fi-ee":"Estonia","Countries.fi-fi":"Finland","Countries.fr-be":"Belgium","Countries.fr-ca":"Canada","Countries.fr-ch":"Switzerland","Countries.fr-dz":"Algeria","Countries.fr-eg":"Egypt","Countries.fr-fr":" France","Countries.fr-ht":"Haiti","Countries.fr-il":"Israel","Countries.fr-kh":"Cambodia","Countries.fr-lb":"Lebanon","Countries.fr-lu":"Luxembourg","Countries.fr-mu":"Mauritius","Countries.fr-nc":"New Caledonia","Countries.fr-ru":"Russia","Countries.fr-sn":"Senegal","Countries.fr-us":"Haiti","Countries.fr-vn":"Viet Nam","Countries.ga-ie":"Ireland","Countries.gu-in":"India","Countries.he-il":"Israel","Countries.hi-in":"India","Countries.hi-ru":"India","Countries.hr-ae":"Croatia","Countries.hr-hr":"Croatia","Countries.hu-hu":"Hungary","Countries.hu-ro":"Romania","Countries.hu-sk":"Slovakia","Countries.hy-am":"Armenia","Countries.id-id":"Indonesia","Countries.is-is":"Iceland","Countries.it-ca":"Canada","Countries.it-ch":"Switzerland","Countries.it-it":"Italia","Countries.it-ru":"Italy","Countries.ja-jp":"Japan","Countries.ja-ru":"Japan","Countries.kn-in":"India","Countries.ko-kr":"Korea (South)","Countries.ko-ru":"Korea (South)","Countries.ko-us":"USA","Countries.lt-lt":"Lithuania","Countries.lv-lv":"Latvia","Countries.mk-mk":"Macedonia","Countries.ml-in":"India","Countries.mr-in":"India","Countries.ms-my":"Malaysia","Countries.ne-np":"Nepal","Countries.nl-be":"Belgium","Countries.nl-nl":"Nederland","Countries.nl-sr":"Suriname","Countries.no-no":"Norway","Countries.pa-gb":"UK","Countries.pl-_i":"International","Countries.pl-pl":"Polska","Countries.pt-ao":"Angola","Countries.pt-br":"Brazil","Countries.pt-pt":"Portugal","Countries.pt-ru":"Brazil","Countries.ro-ro":"Romania","Countries.ru-_i":"Germany","Countries.ru-am":"Armenia","Countries.ru-by":"Belarus","Countries.ru-de":"Germany","Countries.ru-ee":"Estonia","Countries.ru-fi":"Finland","Countries.ru-fr":"France","Countries.ru-gb":"Germany","Countries.ru-ru":"","Countries.ru-tj":"Tajikistan","Countries.ru-ua":"Russia","Countries.ru-us":"USA","Countries.ru-uz":"Uzbekistan","Countries.si-lk":"Sri Lanka","Countries.sk-sk":"Slovakia","Countries.sl-si":"Slovenia","Countries.sq-al":"Albania","Countries.sq-ks":"Kosovo","Countries.sr-me":"Montenegro","Countries.sr-rs":"Serbia","Countries.sr-ru":"Russia","Countries.sv-ee":"Estonia","Countries.sv-fi":"Finland","Countries.sv-se":"Sweden","Countries.ta-in":"India","Countries.te-in":"India","Countries.th-th":"Thailand","Countries.tl-ph":"Philippines","Countries.tr-cy":"Northern Cyprus","Countries.tr-tr":"Turkey","Countries.uk-ua":"Ukraine","Countries.vi-vn":"Viet Nam","Countries.yi-us":"USA","Countries.zh-ca":"Canada","Countries.zh-cn":"China","Countries.zh-hk":"China","Countries.zh-my":"Malaysia","Countries.zh-ru":"China","Countries.zh-sg":"Singapore","Countries.zh-tw":"Taiwan","Countries.zh-us":"USA","Countries.zu-za":"South Africa"};n.getResources=function(){return i},t.Z=n},74981:function(e,t,n){"use strict";var i=n(53770),r=n(40785);i.Z.api=r.Z,t.Z=r.Z},97226:function(e,t,n){"use strict";n.d(t,{Z:function(){return H}});var i=n(20384),r=n(40180),o=n(4169),a=n(43541),s=n(26199),u=n(58653),c=n(17447),l=n(54591),d=n(92672),h=n(94167),p=n(22970),f=n(43389),m=n(60231),g=n(88769),v=n(91574),y=n(18518),_={title:["Buttons.ShareComment","Share Gift"],linkText:["Dialogs.Share.LinkToGift","Link To Gift"]},b={title:["Buttons.ShareComment","Share Comment"],linkText:["Dialogs.Share.LinkToComment","Link To Comment"]},w={title:["Buttons.Share","Share"],linkText:["Dialogs.Share.LinkTo","Link To"],articleButtonText:["Dialogs.Share.Article","Article"],pageButtonText:["Dialogs.Share.Page","Page"],issueButtonText:["Dialogs.Share.Issue","Issue"]},C=function(){function e(){}return e.prototype.show=function(e,t){var n=this;return this._dialog&&this._dialog.visible||(this._dialog=v.Z.createInstance(t)),this._model=this._initModel(this._dialog,e),this._dialog.onHide((function(){n._model=void 0})).show({templateName:"v7.Client.Dialogs.CopyUrl",model:this._model})},e.prototype.hide=function(){this._dialog&&this._dialog.visible&&this._dialog.hide(y.Y.Ok,{listView:1})},e.prototype._initModel=function(e,t){var n,i=t.contentType===g.WQ.gift,r=t.contentType===g.WQ.comment;n=i?_:r?b:w;var o={title:m.pureComputed((function(){return c.ZP.valAsync.apply(c.ZP,(0,p.ev)([],(0,p.CR)(n.title),!1))})).extend({async:!0}),linkToText:m.pureComputed((function(){return c.ZP.valAsync.apply(c.ZP,(0,p.ev)([],(0,p.CR)(n.title),!1))})).extend({async:!0}),selectedUrl:m.observable(t.link),isTouchDevice:m.observable(!!f.v.touch),copyContent:function(){var t=o.selectedUrl();return e.hide(y.Y.Close),t},resize:function(){e.resize()},close:function(){e.hide(y.Y.Close)}};return o},e}();v.Z.copyUrl=new C;var I=v.Z.copyUrl,P=n(18835),x=n(48921),S=n(79987),T=n(2584),k=n(88477),A=n(11144),E=function(e,t,n){return o.Z.get("Analytics.CustomSourceTrackingEvent",!1)?new a.Z(e).addQueryParam("source",encodeURIComponent(t)).addQueryParam("medium",encodeURIComponent(n)).toString():e},Z=i.nd.sharing={},M=g.ZP.shareContentTypes;function D(e){if(!e)return null;if(e.contentType)return e;var t={previewInfo:e.previewInfo,parentDialog:e.parentDialog},n=e.preview||{};if(e.article)t.articleId=e.article.Id,t.contentType=M.article,t.subject=e.article.Title,e.controller&&"function"==typeof e.controller.contentAccessToken&&(t.contentAccessToken=e.controller.contentAccessToken()),e.comment&&e.comment.commentKey&&(t.contentType=M.comment,t.commentKey=e.comment.commentKey);else if(e.issue)t.issue=e.issue.issue&&e.issue.issue()||e.issue,t.subject=n.issueName,e.page?(t.page=e.page,t.contentType=M.page):t.contentType=M.issue,t.pageNumbers=e.pageNumbers||[e.page];else if(e.gift)t.contentType=M.gift,t.giftCampaignId=e.gift.campaignId;else if(e.pageSet)t.contentType=M.pageSet,t.pageSetId=e.pageSet.id,t.subject=n.issueName;else{if(!e.comment)return null;t.articleId=e.comment.articleId,t.contentType=M.comment,t.subject=e.comment.text,t.commentKey=e.comment.commentKey}return t}function L(e,t,n){return P.BN(e,t,is empty"))})).catch((function(e){return(0,l.Z)().show(c.ZP.val("Errors.SharingFailed")),Promise.reject(new Error(e))}))}Z.getSharingInfo=D,Z.share=function(e,t){var n=new A.B;return P.I4(e,t).then((function(r){i(d.Z).unbind("submit"),i(d.Z).bind("submit",(function(r,o){e.contentType=o.contentType,"issue"===o.contentType&&(e.page=1),P.BN(e,t,o.userComments).then((function(t){R(o.contentType).then((function(){d.Z.hide(),i.extend(t,e),n.resolve(t)}))})).catch(n.reject)})),P.fG(e).then((function(t){var n=i.extend({},t,e.previewInfo||{});d.Z.show(n,e.parentDialog)}))})).catch(n.reject),n},Z.shareWithoutConfirmation=L,Z.shareWithoutDialog=function(e,t){var n=D(e);return n?L(n,t).then((function(){return tentType),n}))})):Promise.reject(new Error("Sharing context is invalid"))};var N={};function R(e){var t=new A.B,n=c.ZP.val(N[e]);if(n){var i=(0,l.Z)();i.show(n),i.onClosed((function(){t.resolve()}))}else t.resolve();return t.promise()}function V(e){var t=e.preview||{};return t.snippet&&t.snippet.getUrl?t.snippet.getUrl():Promise.resolve(void 0)}function B(e,t){return(0,s.fK)(e).then((function(n){var i=r.map(n&&n.collections||[],(function(e){return e.id}));return(null==i?void 0:i.includes(t))?Promise.resolve():(i.push(t),(0,s.Rl)({context:e,collections:i}))}))}function F(e,t){var n=D(e);return n?T.Z.checkAccessForShare().then((function(){return B(e,t)})).then((function(){return(0,S.yv)(n).then((function(t){var n;return Promise.resolve(E(t,document.location.host,null===(n=e.article)||void 0===n?void 0:n.Title))}tion: "+e))})):Promise.reject(new Error("Sharing context is invalid"))}function O(e){u.Z.clientShareFacebook.available()&&u.Z.clientShareFacebook.activate(null,e)}function z(e){u.Z.clientShareTwitter.available()&&u.Z.clientShareTwitter.activate(null,e)}function U(e){u.Z.clientShareGoogle.available()&&u.Z.clientShareGoogle.activate(null,e)}N[M.article]="Messages.ArticleHasBeenShared",N[M.page]="Messages.PageHasBeenShared",N[M.issue]="Messages.IssueHasBeenShared",N[M.opinion]="Messages.OpinionHasBeenShared",Z.showDoneDialog=R,Z.activateEmailSharing=function(e){var t=D(e);return t?h.Z.show({parent:t.parentDialog,context:e}).then((function(n){return n.status!==y.Y.Ok?Promise.reject(void 0):Promise.all([V(e),F(e,g.ZP.shareTypes.email)]).then((function(e){var i=e[0],r={contentUrl:e[1],snippetUrl:i,userMessage:n.userComments,to:n.to,subject:n.subject};return(0,S.Ut)(t,r)}))})).then((function(){return R(t.contentType)})).catch((function(e){return e?(0,k.logAndAlertError)({resourceKey:"Errors.EmailSharingFailed"}):Promise.reject()})):Promise.reject(new Error("Sharing context is invalid"))},Z.activateShareUsingPersonalEmail=function(e){return F(e,g.ZP.shareTypes.email).then((function(t){var n=encodeURIComponent(t+"\r\n\r\n"+e.userComments),i="mailto:"+e.to+"?body="+n+"&subject="+encodeURIComponent(e.subject);window.location.href=i})).catch((function(){return(0,k.logAndAlertError)({resourceKey:"Errors.EmailSharingFailed"})}))},Z.shareEmail=function(e){var t=new A.B,n=h.Z,r=D(e);return r?(P.z3(r).then((function(o){i(n).unbind("submit"),i(n).bind("submit",(function(e,o){var a=i.extend({},r);a.contentType=o.contentType,"issue"===o.contentType?a.page=0:o.page&&(a.page=o.page),o.issue&&(a.issue=o.issue,delete a.articleId),n.hide();var s={id:g.ZP.shareTypes.email,name:g.ZP.shareTypes.email,type:x.V5.sharing};x.Hc(s).then((function(){return P.xP(a,o.userComments,o.from,o.to,o.suontentType)}))})).catch((function(){t.reject(),(0,l.Z)().show(c.ZP.val("Errors.EmailSharingFailed"))}))})),i(n).unbind("submitViaUserMail"),i(n).bind("submitViaUserMail",(function(t,r){F(e,g.ZP.shareTypes.email).then((function(t){var o,a=encodeURIComponent(t+"\r\n\r\n"+r.userComments);o={to:r.to,subject:r.subject,body:a,link:t,comment:r.userComments},i.extend(e,o),u.Z.mailTo.activate(null,e),n.hide()})).catch((function(){(0,l.Z)().show(c.ZP.val("Errors.EmailSharingFailed"))}))})),P.fG(r).then((function(e){n.show(e)}))})).catch((function(e){t.reject(),e&&e.userCancelled||(0,l.Z)().show(c.ZP.val("Errors.EmailSharingFailed"))})),t.promise()):Promise.reject(new Error("Sharing context is invalid"))},Z.checkAccessForSharing=function(e,t){return P.I4(e,t)},Z.copyUrl=function(e){var t=D(e);return t?(0,S.yv)(t).then((function(n){var i,o={link:E(n,document.location.host,null===(i=e.article)||void 0===i?void 0:i.Title),contentType:t.contentType};return r.assign(o,t.previewInfo),I.show(o,t.parentDialog)})):Promise.reject(new Error("Sharing context is invalid"))},Z.shareResourceUrl=function(e,t){var n=D(e);return n?T.Z.checkAccessForShare().then((function(){return(0,S.yv)(n).then((function(i){var r,o={resourceUrl:E(i,document.location.host,null===(r=e.article)||void 0===r?void 0:r.Title),subject:n.subject};return P.OE(tturn B(e,t)})).then((function(){return R(n.contentType)})).catch((function(){return(0,k.logAndAlertError)({resourceKey:"Errors.SharingFailed"})}))})).catch((function(e){return logError(e)})):Promise.reject(new Error("Sharing context is invalid"))},Z.createSharingLink=F,Z.clientShareFacebook=O,Z.clientShareTwitter=z,Z.clientShareGoogle=U,Z.clientShareBy=function(e,t){switch(String.prototype.toLowerCase.call(e)){case g.ZP.shareTypes.google:U(t);break;case g.ZP.shareTypes.twitter:z(t);break;case g.ZP.shareTypes.facebook:O(t)}};var H=Z},18835:function(e,t,n){"use strict";n.d(t,{BN:function(){return o},I4:function(){return s},OE:function(){return l},SL:function(){return h},bG:function(){return d},fG:function(){return c},xP:function(){return a},z3:function(){return u}});var i=n(79913),r="v1";function o(e,t,n){var r={};return r.articleId=e.articleId,e.issue&&(r.issue=e.issue.issue?e.issue.issue():e.issue),r.page=e.page,r.contentType=e.contentType,r.sharingType=t,r.commentKey=e.commentKey||"",r.commentAuthorId=e.commentAuthorId||"",r.thumbnailUrl=e.thumbnailUrl||"",r.userMessage=n,r.resourceUrl=e.resourceUrl,applyOpinionParams.call(r,e),(0,i.$k)("sharing","Share",r,!1)}function a(e,t,n,r,o){var a={};a.articleId=e.articleId,a.issue=e.issue,a.page=e.page,a.contentType=e.contentType,a.commentKey=e.commentKey||"",a.commentAuthorId=e.commentAuthorId||"",a.userMessage=t,a.from=n,a.to=r,a.subject=o;var s=r instanceof Array?"ShareMultipleEmails":"ShareEmail";return(0,i.zf)("sharing",s,a,!0)}function s(e,t,n){var r={};return e&&(r.articleId=e.articleId,r.issue=e.issue,r.page=e.page,r.contentType=e.contentType,r.commentKey=e.commentKey||"",r.commentAuthorId=e.commentAuthorId||"",r.contentAccessToken=e.contentAccessToken||""),r.sharingType=t,(0,i.$k)("sharing","CheckAccessForSharing",r)}function u(e){var t={};return t.articleId=e.articleId,t.issue=e.issue,t.page=e.page,t.contentType=e.contentType,t.commentKey=e.commentKey||"",t.commentAuthorId=e.commentAuthorId||"",(0,i.$k)("sharing","CheckAccessForEmailSharing",t)}function c(e){var t={};return t.articleId=e.articleId,t.issue=e.issue,t.page=e.page,t.contentType=e.contentType,t.commentKey=e.commentKey||"",t.commentAuthorId=e.commentAuthorId||"",(0,i.$k)("sharing","GetPreviewInfo",t)}function l(e,t){return(0,i.zf)("".concat(r,"/sharing"),e,t,{disableRetry:!0})}function d(e,t){return(0,i.zf)("".concat(r,"/articles"),"".concat(e,"/email"),t,{disableRetry:!0})}function h(e,t){return(0,i.zf)("".concat(r,"/pagesets"),"".concat(e,"/email"),t,{disableRetry:!0})}},64404:function(e,t,n){"use strict";var i=n(74981),r=n(45457),o={},a=0,s=0,u=3e5;function c(e){e&&e.Ts&&(e.Ts<=a||(a=).getTime()}o.reset=function(){a=(e){c(e)}))}),u,10),o.initState=c,P.templates},65557:function(e,t,n){"use strict";var i,r=n(22970),o=n(20384),a=n(4169),s=n(54215),u=n(47070),c=n(66353);t.Z=o.nd.ui.actiontool=(i=function(){this._text="",this._cssClass="",this._config={},this._controllerCTOR=u.Z.singleItem,this._controllerParams=[this._config],this._controller=void 0,this._enabledAsync=Promise.resolve(!0),this._rootClass=""},o.extend(i.prototype,{_initController:function(){var e,t,n;return this._controller=(e=this._controllerCTOR,t=this._controllerParams,n=[null].concat(t),new(e.bind.apply(e,n))),this._controller.itemsControllerCTOR(this._itemsControllerCTOR).itemsControllerParams([this._controller].concat(this._additionalItemsControllerParams)),this},_notAvailableCssClass:"is-hidden",_disabledCssClass:"is-disabled",disabledCssClass:function(e){return e&&(this._disabledCssClass=e),this},template:function(){return(0,c.WU)(["<li class='{0}'>","<a href='javascript:void(0)'>","<span class='{1}' aria-hidden='true'></span>","<span class='ati-title'>{2}</span>","</a>","</li>"].join(""),this._rootClass||"",this._cssClass,this._text)},enabled:function(e){return 0==arguments.length?this._enabledAsync:(this._enabledAsync=Promise.resolve(e).then((function(e){return!!e})),this)},isAvailable:function(){if(!this._itemsControllerCTOR)throw new Error("Private field _itemsControllerCTOR is not initialized.");var e=this._itemsControllerCTOR.prototype;return e.available.apply(e,this._additionalItemsControllerParams)},isAvailableAsync:function(){if(!this._itemsControllerCTOR)return Promise.reject();var e=this._itemsControllerCTOR.prototype,t=e.available.apply(e,this._additionalItemsControllerParams);return Promise.resolve(t)},renderTo:function(e,t){return(0,r.mG)(this,void 0,void 0,(function(){var n,i,a,s;return(0,r.Jh)(this,(function(u){switch(u.label){case 0:return e?((n=this)._rootClass="".concat(n._rootClass," ").concat(n._disabledCssClass," ").concat(n._notAvailableCssClass),n._elm=o(n.template()),n._elm.appendTo(e),[4,Promise.all([this.isAvailableAsync(),this._enabledAsync])]):[2,null];case 1:return i=r.CR.apply(void 0,[u.sent(),2]),a=i[0],s=i[1],n.__disposed?[2]:(a&&n._elm.removeClass(n._notAvailableCssClass),s&&n._elm.removeClass(n._disabledCssClass),t&&n.bindEvents(),[2,n._elm])}}))}))},bindEvents:function(){var e=this;Promise.all([this._enabledAsync,a.Z.loaded()]).then((function(t){if(t[0]&&(e.bindedClick=e.click.bind(e),e._elm)){var n=a.Z.get("ui.ActionTool.eventName",void 0);void 0!==n&&"function"==typeof e._elm[n]?(e._customEvent=n,e._elm[n](e.bindedClick)):e._elm.tap(e.bindedClick)}}))},rootClass:function(e){return e&&(this._rootClass=e),this},cssClass:function(e){return e&&(this._cssClass=e),this},text:function(e){return e&&(this._text=e),this},controller:function(e){return 0==arguments.length?this._controller:(this._controller=e,this)},controllerCTOR:function(e){return e?("function"==typeof e&&(this._controllerCTOR=e),this):this._controllerCTOR},controllerParams:function(e){return e&&e.length&&(this._controllerParams=e),this},itemsControllerCTOR:function(e){return 0==arguments.length?this._itemsControllerCTOR:("function"==typeof e&&(this._itemsControllerCTOR=e),this)},additionalItemsControllerParams:function(e){return e&&e.length&&(this._additionalItemsControllerParams=e),this},click:function(e){var t=this;this.enabled().then((function(n){n&&(t._config.position={x:e.pageX||e.touchX||0,y:e.pageY||e.touchY||0,align:{y:s.x.Bottom}},t._controller||t._initController(),t._controller.show(t._config))}))},dispose:function(){this._controller&&"function"==typeof this._controller.dispose&&this._controller.dispose(),this._elm&&this.click&&void 0!==this._customEvent&&"function"==typeof this._elm[this._customEvent]&&this._elm.off(this._customEvent,this.click),this._enabledAsync=null,this.__disposed=!0,delete this._controller,delete this._elm,delete this._config,delete this._controllerCTOR,delete this._controllerParams}}),i)},1511:function(e,t,n){"use strict";n.d(t,{Y:function(){return P}});var i=n(60231),r=n(20384),o=n(40180),a=n(55193),s=n(57136),u=n(25539),c=n(26371),l=n(74714),d=n(17447),h=n(71357),p=n(34336),f=n(24458),m=n(97226),g=n(60683),v=n(77751),y=n(25747),_=n(99144),b=n(8871),w=n(81867),C=n(25371),I=(n(84438),n(16412),n(43389),n(98392));function P(){var e;function t(e){var t=e[0],n=e[1],i=e[2];t.avatar((0,g.b_)({nickname:t.authorNickname,imageId:i,size:g.wC.large,fallbackAvatarUrl:n}))}function n(e){for(var n=0;n<e.length;n++){var i=e[n];i.isOwnerPost&&i.visible()&&(i.isOwnerFeatured(!0),Promise.all([Promise.resolve(i),w.default.getProfilePhotoUrl(i.authorProfileName),w.default.getAvatarImageId(i.authorProfileName)]).then(t))}}function P(e){return e.publicId=e.CommentKey,new u.Z((0,I.z)(e))}function x(e){if(!e||!e.UserPosts||!e.OwnerProfileId)return!1;var t=decodeURIComponent(e.OwnerProfileId).toUpperCase();return!!o.find(e.UserPosts||[],(function(e){return e.UserProfile&&e.UserProfile.ProfileName&&e.UserProfile.ProfileName.toUpperCase()===t}))}function S(e){e=e||[];for(var t=[],n=0;n<e.length;n++)for(var i=e[n].Labels||[],r=0;r<i.length;r++)t.push(i[r]);return t.length?t:null}function T(e){var t;return{hasOwnPosts:x(e),hasComments:!!(e&&e.UserPosts&&e.UserPosts.length),hasBookmarks:!!(e&&e.Bookmarks&&e.Bookmarks.length),hasLabels:!(!e||!(t=S(e.Bookmarks))),hasVotes:!!(e&&e.Votes&&e.Votes.length&&0!==e.Votes[0].currentUserVote),hasCommentsVotes:!!(e&&e.OtherUserPosts&&e.OtherUserPosts.length),labels:t}}this.render=function(t,u){if(t&&u&&u.data){var d=u.data,w=!!u.canComment;Promise.resolve(b.default.load()).finally((function(){e=function(e,t,a){var u=e.UserPosts&&e.UserPosts.map(P)||[],d=e.OtherUserPosts&&e.OtherUserPosts.map(P)||[],h=e.OpinionId,y=h?null:e.UserPosts&&e.UserPosts[0],w=h?null:y&&P(y)||null,I=h?null:y&&y.UserProfile&&new s.default(y.UserProfile)||null,x=h?null:e.OwnerProfileId,S=h?null:function(e){var t=e&&e.Bookmark||e.Bookmarks&&e.Bookmarks[0];if(t){var n=new s.default(t.UserProfile),i=new Date(t.Date),r=v.N3(i);return{id:t.BookmarkId,date:i,dateAgo:r,comment:t.Comment,webName:t.WebName,userProfile:n,avatar:function(){return n?(0,g.b_)({nickname:n.nickname,imageId:n.avatarImageId,size:g.wC.huge,fallbackAvatarUrl:n.photoUrl}):""}}}return null}(e),T=!!e.Bookmark;e.AccountNumber,u=function(e,t,r){for(var a=0;a<e.length;a++){var s=e[a];s.isOwnerPost=!1,s.isOwnerReply=!1,s.isOwnerFeatured=i.observable(!1),s.isSupportedByOwner=!1,s.attachmentsVisible=i.observable(s.hasAttachments),s.clamp=i.observable(!1),s.visible=i.observable(!0),t?(s.isOwnerPost=s.authorProfileName&&t&&s.authorProfileName.toUpperCase()==decodeURIComponent(t).toUpperCase(),s.isOwnerReply=!!s.parentId&=s.parentId})),s.isOwnerFeatured(!1),s.isSupportedByOwner=s.currentVote()>0):r&&(s.isOwnerPost=s.opinion&&s.opinion()&&s.opinion().id===r,s.isOwnerReply=!1,s.isOwnerFeatured(!1),s.isSupportedByOwner=!1)}return n(e),e}(u=u.concat(d),x,h);var k={canComment:a,articleId:e.ArticleId,profileId:e.currentProfileId,posts:i.observableArray(u),videos:[],hasOwnerPostssOwnerReply})),bookmark:S,bookmarkId:S&&S.id||null,bookmarkLines:i.observable(0),totalPosts:u.length,userPost:w,showSharingButtons:T,userProfile:I,avatar:i.observable((0,g.b_)({nickname:b.default.nickname,imageId:b.default.avatarImageId,size:g.wC.large,fallbackAvatarUrl:b.default.photoUrl})),openBookmarkProfile:function(e,t){var n=S&&S.userProfile;return n&&n.ensureProfileName().then((function(e){p.Z.goView(f.n3.Profile,{type:"profile",profileId:e})})),t.preventDefault(),!1},openProfile:function(e,t){return UserProfile.ensureProfileName(e.authorProfileName,e.enAuthorId).then((function(e){p.Z.goView(f.n3.Profile,{type:"profile",profileId:e})})),t.preventDefault(),!1},newComment:function(){return k.articleId&&_.default.showPost({articleId:k.articleId,contextProfileName:C.Z.profileId}),!1},openThread:function(e){return k.articleId&&_.default.show({articleId:k.articleId,markerCommentId:e.publicId,contextProfileName:C.Z.profileId}),!1},renderAttachments:function(e,t,n){if(t.hasAttachments){var i=n<3?n:3;new l.Z(t.attachments,{renderVideoPlayer:!1,showGalleryOnClick:!1,itemsInLayout:i}).render(r(e))}},shareFacebook:function(){this._share("Facebook")},shareTwitter:function(){this._share("Twitter")},_share:function(e){var t=window.basePath+"bookmark/"+k.bookmarkId,n="clientShare"+e;if(!m.Z[n])throw new Error("Unknown sharing provider: "+e);m.Z[n]({link:t})}]:visible")},_fitItems:function(){var e=r(t),i=[];if(S){var a=[3,5,6,7,8,9,10,11,13,15,20],s=a.length-1,l=a.length;i.push(new c.Z.Block({id:"bookmark",priority:0,getHeight:function(){return e.find(".sharing-comment").outerHeight()+e.find(".bookmark-share").outerHeight()},getContentSize:function(){return l},contentBounds:[0,l],canHide:!1,decrease:function(){s>-1&&(k.bookmarkLines(a[s]),s--),l--}}))}for(var d=function(e){e=e.slice(0);for(var t,n,i,r,a,s,u,c={1:1e3,2:1500,3:2e3,4:3e3,5:4e3,6:5e3,7:6e3,8:7e3,0:5e4},l=[],d=0;d<e.length;d++)t=l,i=void 0,r=void 0,a=void 0,s=void 0,u=void 0,i=(n=e[d]).isOwnerPost,r=n.isOwnerReply,a=n.artifacts&&n.artifacts.length,s=!!n.opinion,u=0,i?s?u=r?3:a?1:2:a?u=r?5:4:r?r&&(u=7):u=6:u=8,t[u]||(t[u]=[]),t[u].push(n);var h={};for(d=0;d<l.length;d++){var p=d;l[p]=o.sortBy(l[p]||[],(function(e){return[-1*e.totalSupport,e.dateTimeStamp]}));for(var f=0;f<l[p].length;f++)h[l[p][f].id]=++c[p]}return h}(u),h=0;h<u.length;h++){var p=function(t){var i=[3,5,6,7,8,9,10,11,13,15,20],r=[0,1,2],o=!(!t.artifacts||!t.artifacts.length),a=r.length-1,s=i.length-1,l=i.length+(o?r.length:0),h=d[t.id];return new c.Z.Block({id:"post-"+t.id,priority:h,getHeight:function(){return n=t.id,k._getElement(e,n).outerHeight(!0)||0;var n},getContentSize:function(){return l},contentBounds:[0,l],canHide:!0,hide:function(){t.visible(!1),t.isOwnerFeatured()&&n(u)},decrease:function(){if(s>-1)t.clamp(i[s]),s--;else if(o){var n=k._getElement(e,t.id).find(".atchd-content").empty();r[a]>0?k.renderAttachments(n,t,r[a]):t.attachmentsVisible(!1),a--}l--}})}(u[h]);i.push(p)}var f=r("#scroller").height()-(e.find(".art-comments").outerHeight(!0)-e.find(".art-comments").height())-(e.find(".comments-extra").outerHeight(!0)-e.find(".comments-extra").height())-(e.find(".art-comments-call").height()||0),m={getHeight:function(){return f}};new c.Z.Manager(m,i).build(c.Z.LayoutStrategy.GUINNESS)}};return k}(d,t,w),h.Z.appendTo("v7.Client.ArticleSocialInfo",e,t),e._fitItems(),a.ZP.bind(t,"singleTapConfirmed",r.returnFalse),e._onCommentUpdatedUnsubscribe||(e._onCommentUpdatedUnsubscribe=y.Z.onCommentUpdated((function(n,i,r,o){i.articleId.toString()===e.articleId.toString()&&e.posts(e.posts().map((function(n){if(n.id.toString()===r.toString()){n.update(o);var i=e._getElement(t,r).find(".atchd-content").empty();e.renderAttachments(i,n)}return n})))}))),e._onCommentDeletedUnsubscribe||(e._onCommentDeletedUnsubscribe=y.Z.onCommentDeleted((function(t,n,i){n.articleId.toString()===e.articleId.toString()&&e.posts(e.posts().map((function(e){return e.id.toString()===i.toString()&&e.delete(),e})))})))}))}},this.getTitle=function(e){var t=T(e),n="";return t.hasOwnPosts?n=d.ZP.get("v7.Client.Profile.Header.Commented"):t.hasBookmarks?n=t.hasLabels?o.map(t.labels,(function(e){return e.Name})).join(", "):d.ZP.get("v7.Client.Profile.Header.Bookmarked"):(t.hasVotes||t.hasCommentsVotes)&&(n=d.ZP.get("v7.Client.Profile.Header.Voted")),n},this.getTitleClass=function(e){var t=T(e);return"textview-section"+((t.hasOwnPosts?" section-comments":t.hasBookmarks&&" section-bookmarks")||t.hasVotes&&" section-bumps"||t.hasCommentsVotes&&" section-bumps"||"")},this.positionChanged=function(e){},this.dispose=function(){!function(){if(e)for(var t=e.videos,n=0;n<t.length;n++){var i=t[n];i&&i.dispose&&i.dispose()}}(),e._onCommentUpdatedUnsubscribe(),e._onCommentDeletedUnsubscribe()}}},73546:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ye}});var i=n(22970),r=n(20384),o=n(60231),a=n(40180),s=n(25881),u=n(24458),c=n(96389),l=n(2175),d=n(32249),h=n(4169),p=n(66353),f=n(17447),m=[],g=[];function v(e){var t=this;a.assign(t,e),a.forEach(m,(function(e){try{e.call(t,t)}catch(e){}}))}function y(e){for(var t in e)this[t]=e[t];this.webName||(this.webName=this.name),this.id||(this.id=this.name);for(var n=0;n<g.length;++n)try{g[n].call(this,this)}catch(e){}}v.prototype={constructor:v},y.prototype={constructor:y,getChildNewspapers:function(e){return e?this.getAllChildNewspapers():this.newspapers},getAllChildNewspapers:function(){if(!this.allNewspapers){for(var e=this.newspapers,t=e.slice(0),n={},i=0,r=e.length;i<r;i++){var o=e[i].sections;if(o&&o.length)for(var a=0;a<o.length;a++){var s=o[a];n[s.cid]||(t.push(s),n[s.cid]=!0)}}this.allNewspat.name?1:-1}))}return this.allNewspapers},getAllChildNewspapersCount:function(){return this.getAllChildNewspapers().length}};var _,b,w=[],C=[],I={},P=[],x=[],S=[],T=[],k=[],A={1:x,2:S,3:T,4:k},E={},Z={},M=[],D=[],L=[],N=[],R=[],V=[],B={countries:["region"]},F={};function O(e){return e&&(_=null),_||(_=h.Z.loaded().then((function(){var e=h.Z.get("catalog.timestamp");return Promise.all([(0,c.jk)(e),l.Z.load()]).then((function(e){return e[0]})).then(z).then((function(){return ne}))}))),_}function z(e){function t(t){var n=e.newspapers[t];return n&&n.issueInfo&&n}function n(e){e.sections_cids||(e.sections=[],e.sectionsCids=e.sections_cids=[],e.hasSections=!0),e.sections.push(this),e.sections_cids.push(this.cid)}w=[],C=[],I={},P=[],x.length=0,S.length=0,T.length=0,k.length=0,E={},b={},V=[],M=[],D=[],L=[],R=[],N=[],F={};var i=w,o=I;a.forEach(e.newspapers,(function(e,t){var n=l.Z.getIssue(e.cid),r=new v(a.extend(e,n));r.index=t,n&&(r.issueInfo=n),o[r.cid]=r,i.push(r),r.free&&L.push(r),1==r.type?(D.push(r),R.push(r.index)):(M.push(r),N.push(r.index)),r.pss&&a.fopush(r.cid)}))})),a.forEach(F,(function(e,t){o[i[t].cid].supplements=e})),C=[];for(var s=0,u=i.length;s<u;s++){var c,d;(A=i[s]).pss?(d=a.map(A.pss,t),d=a.compact(d),c=a.first(d)):A.ps||0===A.ps?d=[c=t(A.ps)]:c=null,c?(A.name=c.name+" - "+A.name,A.main_section=A.mainSection=c,A.main_section_cid=A.mainSectionCid=c.cid,A.mainSections=d,a.forEach(d,n,A),delete A.ps,delete A.pss):C.push(A)}if(e.autoAlphabet){var h=[],p=[];for(s=0,u=i.length;s<u;s++){for(var f,m=(A=i[s]).name,g=q(m)?4:0,y=m.length;g<y;g++)f=m.charAt(g).toUpperCase();if(f){var _=p[f];_||(_={name:f,newspapers:[]},p[f]=_,h.push(_)),_.newspapers.push(A)}}for(s=0,u=h.length;s<u;s++){var A;(A=h[s]).newspapers.sort(K.byName),A.newspapers_cids=[];for(var B=0,O=A.newspapers.length;B<O;B++)A.newspapers_cids.push(A.newspapers[B].cid)}e.categories.push({name:"Alphabet",t:3,cc:h})}a.forEach(e.categories,(function(e){V.push(e.id)})),U(e.categories,i),Z=e.langInCountry,r.nd.event.trigger("loaded",ne,ne)}function U(e,t,n){if(e&&e.length)for(var i,r,o=P,a=0,s=e.length;a<s;a++){var u=e[a]=new y(e[a]);if(r=(0,d.GD)(u.webName),i=b[r]||{},u.id=(u.id||u.name||"").toLowerCase(),u.key=r,B[r]&&(u.subCategories=B[r]),"basecontentcatalog"==u.id&&(u.name=u.webName=f.ZP.get("v7.Client.Catalog.categories")),u.cn){for(var c=u.cn,l=u.newspapers=[],h=u.newspapers_cids=[],p=0,m=c.length;p<m;p++){var g=t[c[p]];g&&g.issueInfo&&(g.main_section||(l.push(g),h.push(g.cid)),i[(0,d.GD)(g.webName)]=g,i[(0,d.GD)(g.uniqueName)]=g)}u.newspaperCount=c.length}if(u.cc){var v=A[u.t];U(u.cc,t,v),u.children=u.cc}n&&n.push(u),o[u.iurn I[e]||E}function j(e,t,n){try{var i=r.nd.user[t];if(i){var o=new y({id:e,name:n});return o.newspapers_cids=i.cids(),o.newspapers=i.newspapers(),o.newspaperCount=o.newspapers.length,i.loaded()&&(P[o.id]=o),o}}catch(e){}return null}function W(e){if(!e)return null;var t=e.toLowerCase(),n=P[t]||P[t+"(newspapersbasecatalog)"];if(n)return n;switch(e){case"MyNewspapers":return j(t,e,r.nd.res.val("Catalog.MySources"));case"LastReadNewspapers":return j(t,e,r.nd.res.val("Catalog.RecentlyRead"));case"all":return function(e,t){for(var n=new y({id:e,name:t}),i=[],r=[],o=w,a=0;a<o.length;a++){var s=o[a];s.main_section||(i.push(s),r.push(s.cid))}return n.newspapers=i,n.newspapers_cids=r,n.newspaperCount=n.newspapers.length,P[n.id]=n,n}(t,r.nd.res.val("Catalog.AllSources"));case"Types":return function(e,t){var n=new y({id:e,name:t});return n.cc=[],n.cc.push({id:"newspapers",webName:"newspapers",name:f.ZP.val("v7.Client.Catalog.newspapers"),cn:R}),n.cc.push({id:"magazines",webName:"magazines",name:f.ZP.val("v7.Client.Catalog.magazines"),cn:N}),P[n.id]=n,n}(t,r.nd.res.val("v7.Client.Catalog.types"))}return null}function q(e){if(e&&e.length>4)try{var t=e.charAt(0);return("t"==t||"T"==t)&&"h"==e.charAt(1)&&"e"==e.charAt(2)&&" "==e.charAt(3)}catch(e){}return!1}function G(e,t){var n=e.slice(0);return t&&n.sort(t),n}var X,Y,K={byActivationDate:function(e,t){return e=e.issueInfo,t=t.issueInfo,e&&t?e.activated_ms<t.activated_ms?1:-1:0},byName:function(e,t){var n=e.name||"",i=t.name||"";return n>i?1:n<i?-1:0},byRank:function(e,t){var n=t.rank||0,i=e.rank||0;return i>n?-1:i<n?1:0}};function J(e){var t=Z[e]||[];return a.map(t,Q)}function $(e){for(var t={},n=0;n<e.length;n++){var i=e[n];i.iso&&(t[i.iso]=i)}return t}function Q(e){return(Y||(Y=$(S)),Y)[e]}function ee(e,t){for(var n=0;n<t.length;n++){var i=t[n];if(e(i))return i;if(i.sections){var r=ee(e,i.sections);if(r)return r}}return null}function te(e,t){return e=e?e.toLowerCase():"",ee((function(t){return e===t.cid}),t)}var ne={newspapers:I,countries:x,languages:S,getLanguageByCode:Q,getLanguageByCountryIsoLangIso:function(e,t){for(var n=J(e),i=0;i<n.length;i++)if(t==n[i].iso)return n[i];return null},alphabets:T,custom_categories:k,categories:P,loaded:function(e){return 0==arguments.length?w.length>0:(O().then(e),this)},load:function(){return O()},reload:function(){return O(!0)},getNewspaper:function(e){return e?(e.cid&&(e=e.cid),e=e.toLocaleLowerCase(),I[e]):null},getCategory:W,getNe).name||""},isNe!H(e).smart},sortByIssueActivationDate:function(e){return G(e,K.byActivationDate)},sortByRank:function(e){return G(e,K.byRank)},sortByName:function(e){return G(e,K.byName)},getNewspapersFromCids:function(e){for(var t=[],n=0;n<e.length;n++){var i=I[e[n]];i&&t.push(i)}return t.sort(K.byName),t},getAllNewspapers:function(){return w},getMareturn C||w},extendNewspapers:function(e,t){for(var n in e)v.prototype[n]=e[n];t&&(a.forEach(w,(function(e){try{t.call(e,e)}catch(e){}})),m.push(t))},extendCategories:function(e,t){for(var n in e)y.prototype[n]=e[n];t&&(a.forEach(P,(function(e){try{t.call(e,e)}catch(e){}})),g.push(t))},findNewspapers:function(e,t){t=t||Number.MAX_VALUE;var n=[],i=ne;if((e=r.trim(e))&&e.length>0){var o=function(e){if(e&&e.length>4)try{return"c"==e.charAt(0)&&"i"==e.charAt(1)&&"d"==e.charAt(2)&&":"==e.charAt(3)}catch(e){}return!1}(e=e.toLowerCase());o&&(e=e.substring(4,e.length));var s=i.newspapers_for_search;s||(s=i.newspapers_for_search=function(e){var t=[],n=I;for(var i in n){var r=n[i];r&&r.cid&&(r._lowerName=r.name.toLowerCase(),r._lowerAccentFoldedName=(0,p.Pm)(r.name.toLowerCase()),r._lowerOriginalName=r.originalName.toLowerCase(),r._alternativeTitles=r.alternativeTitles,r._displayNames=r.displayNames,r._lowerWebName=r.webName.toLowerCase(),r._lowerUniqueName=r.uniqueName?r.uniqueName.toLowerCase():r._lowerWebName,t.push(r))}return a.isFunction(e)&&t.sort(e),t}(K.byRank));for(var u=s.length,c=0,l=0;l<u&&c<t;l++){var d=s[l];if(d){var h=-1;o&&d.cid?h=d.cid.indexOf(e):(d._lowerName&&(h=d._lowerName.indexOf(e)),h<0&&d._lowerWebName&&(h=d._lowerWebName.indexOf(e)),h<0&&d._lowerUniqueName&&(h=d._lowerUniqueName.indexOf(e)),h<0&&d._lowerAccentFoldedName&&(h=d._lowerAccentFoldedName.indexOf((0,p.Pm)(e))),h<0&&d._lowerOriginalName&&(h=d._lowerOriginalName.indexOf(e)),h<0&&d._alternativeTitles.length&&(h=a.findIndex(d._alterndexOf(e)>=0}))),h<0&&(h=a.findIndex(d._ddexOf(e)>=0})))),h>=0&&(n.push(d),c++)}}}return n},resetCustomCategories:function(){P.length=0},resetCategory:function(e){var t=e.toLowerCase();P[t]=null},getCountryLanguages:J,getCountryByIso:function(e){return(X||(X=$(x)),X)[e]},get.id===e}))},getCountryByNewspaperCID:function(e){if(!e||""==e)return null;var t=x,n=this.getCountryByIso("_i");if(n&&te(e,n.newspapers))return n;var i=te(e,w),r=i&&i.publicationCountryCode;if(r)return a.find(t,{iso:r});for(var o=0;o<t.length;o++){var s=t[o];if( e==i.index})))return s}return null},findNewspaper:ee,findCountry:function(e){return a.find(x,e)},getNewspapers:function(){return D},getMagazines:function(){return M},getNewspaperByTitleIndex:function(e){return w[e]},getFreePublications:function(){return L},getTopRankIssue:function(e){var t=a.max(e,(function(e){return w[e].rank}));if(t)return w[t]},getCategoriesList:function(){var e=[];return e.push(W("Countries")),e.push(W("Languages")),e.push(W("BaseContentCatalog")),e.push(W("Types")),e},findNewspaperByCid:function(e){return te(e,w)}};r.nd.newspaper=v,r.nd.category=y;var ie,re=ne,oe=n(94267),ae=n(91574),se=n(14003),ue=n(34336),ce=n(11144),le=n(43471),de=(n(993),n(84066),n(16412),{}),he={titles:0,paperTitle:1,issueDates:2},pe=null,fe={sortObj:new function(){var e,t,n,i,r=this;h.Z.loaded().then((function(){i={all:h.Z.get("ui.Catalog.CategorySortOrder.all"),default:h.Z.get("ui.Catalog.CategorySortOrder.default"),defaultSort:h.Z.get("ui.Catalog.SortToolbar.defaultSort")},n=i.all}));var o={alphabeth:{path:"name",order:1},popular:{path:"rank",order:-1},date:{path:"issueInfo.issueDate",order:-1},catalog:{path:"",order:1}};this.getParams=function(){return{path:e,order:t}},this.getName=function(e){return n=i[e]||i.defaultSort||i.default,this.setSortOrderPath(n),n},this.resetOrder=function(){t=-1},this.setOrder=function(i){var r=o[i];r&&(n=i,e===r.path?t=t>0?-1:1:this.setSortOrderPath(i))},this.setSortOrderPath=function(n){var i=o[n];e=i.path,t=i.order},h.Z.loaded().then((function(){r.setOrder(n)}))},state:he,currentState:o.observable(he.titles),categoryType:o.observable(),category:o.observable(),categories:o.observableArray(),newspapers:new r.nd.ObservableCollectionNew([]),mainSectionCid:o.observable(),selectedTitle:o.observable(),toolbarHeader:o.observable(""),sort:o.observable(),configTitleEnable:o.observable(!1),myNewspapers:o.observableArray(),isNestedTtitles:o.observable(!1),currentCategory:o.observable(),allowSorting:o.observable(!0),isRecentlyReadCategory:o.observable(),categoriesClick:function(){fe.resetFilter();var e=o.dataFor(arguments[1].target);fe.sort(fe.sortObj.getName(e.category.id));var t=fe.sortObj.getParams();fe.newspapers.setSort(t.path,t.order),fe.plugin.setCurrentCategory(e),fe.allowSorting("RecentlyReadIssues"!=fe.currentCategory().id)},newspapersClick:function(){var e=o.dataFor(arguments[1].target);e.pluginIsCombo()?(fe.plugin.setCurrentMainSection(e),fe.isNestedTtitles(!0),fe.prevFilter=fe.filter(),fe.resetFilter()):(fe.plugin.setCurrentMainSection(e),fe.clickOpen())},close:function(){ve.hide()},clickCategoryType:function(e,t){return t||(t=event),fe.resetFilter(),ve.setCurrentCategoryType(r(t.currentTarget).attr("category-type")),!1}rActive(!1)},filter:o.observable(""),filterActive:o.observable(!1),filterNewspapers:(0,a.throttle)(me,100),showCountryLanguagesToolbar:function(){return h.Z.get("ui.Catalog.showCountryLanguagesToolbar",!0)},popularSortEnable:function(){return h.Z.get("ui.Catalog.SortToolbar.popularSortEnable",!0)},clickBack:function(){return fe.currentState()==he.issueDates?fe.currentState(he.paperTitle):(fe.prevFilter&&(fe.filter(fe.prevFilter),fe.prevFilter=null),ve.setCurrentMainSection(null),fe.currentState(he.titles),fe.isNestedTtitles(!1)),!1},clickOpen:function(){return ve.showNewspaper(this.mainSectionCid()),!1},strilength)===t},clickSort:function(e,t){t||(t=event),this.sort(r(t.currentTarget).attr("sort-order")),fe.sortObj.setOrder(this.sort());var n=fe.sortObj.getParams();return this.newspapers.setSort(n.path,n.order).render(),!1},getCategory:function(e){var t=o.utils.arrayFilter(fe.categories(),e);return t&&t.length?t[0].category:null},gety.id===e}))},isNewspaperVisible:function(e){return!0},getNewspaperName:function(e){return!!fe.mainSectionCid()&&e.shortName||e.name}};function me(){var e=!!fe.filter(),t=fe.filterActive()!==t;t&&(fe.filterActive(e),fe.newspapers.reset().updateSource(ve.getNewspapers())),fe.newspapers.setFilter(fe.filter(),"name").render()}function ge(e){this.category=e,this.tempNewspCount=o.observable(e.getAllChildNewspapersCount()),this.topLevelNewspCount=o.observable(e.newspaperCount),this.countOnlyTopLevel=o.observable(!1),this.newspCount=o.coewspCowspCount(e)},deferEvaluation:!0,owner:this}),"mynewspapers"==e.id.toLowerCase()&&this.countOnlyTopLevel(!0)}o.bindingHandlers.titleCalendar={update:function(e,t,n,i,a){var s=t();if(o.utils.unwrapObservable(s)==he.issueDates){var u=i.selectedTitle&&i.selectedTitle();u&&r.nd.issuesCalendar.load(u.cid,!0).then((function(t){var n=t;r.nd.ui.issuesCalendar.show(r(e),n,u.issueId(),u.cid),e=null,r.nd.ui.issuesCalendar.onDone((function(e,t,n){u.issueId(t),u.selectedDate(n.toUTCString()),u.issueThumb(u.getThumbUrlByWidth(400)),i.currentState(he.paperTitle)}))}))}}},fe.newspapersItems=fe.newspapers.items,o.bindingHandlers.fadeVisible={init:function(e,t){var n=t();r(e).toggle(o.utils.unwrapObservable(n))},update:function(e,t){var n=t();r(e).parent().is(":visible")?o.utils.unwrapObservable(n)?r(e).fadeIn():r(e).fadeOut():r(e).hide()}},re.extendCategories({selected:!1dKo(e),this},cegs.selected)})),re.extendNewspapers({formatIssueDate:function(){return this.issueInfo?f.ZP.formatDate(this.issueInfo.issueDate,"someresourcename","ddd, d MMM yyyy"):""},selectedDateFormated:function(){if(this.selectedDate()){var e=new Date(this.selectedDate());return f.ZP.formatDate(e,"someresourcename","ddd, d MMM yyyy")}return""},getSelectedOrLatestIssueId:function(){return this.issueId()?this.issueId():this.issueInfo&&this.issueInfo.issue},getThumbUrlByWidth:function(e){e=e||160;var t=null,n=this.getSelectedOrLatestIssueId();if(n){if(r.support.retina&&this.issueInfo&&this.issueInfo.issue==n&&this.issueInfo.pageWidth){var i=this.issueInfo.calculateThumbScale(2*e);i&&(e=Math.floor(this.issueInfo.calculateWidthForScale(i)/2),t=(0,s.p8)(n,i,1)+"&retina=2&targetWidth="+e)}t||(t=(0,s.x8)(n,e,1,!0))}return t||(t=(0,s.oY)(this.cid,e,1,!0)),t||console.log("Unable to get url for cid: "+this.cid+", issue: "+n),t||""},pluginIsCombo:function(){return this.hasSections&&!fe.mainSectionCid()},clickNewspaper:function(e){return this.pluginIsCombo()?ve.setCurrentMainSection(e):ve.showNewspaper(e),!1},daissueDates)},reissueId("")}},(function(){this.selectedDate=o.observable(""),this.issueId=o.observable(""),this.issueThumb=o.observable(""),this.issueDates=o.observableArray()}));var ve={show:function(e){var t=this;return Promise.all([le.Z.showDialog(),(0,c.sd)()]).then((function(n){var r=(0,i.CR)(n,2),o=r[0];if(r[1].publicationsCount<=1)return ue.Z.goView(u.n3.PagesView,{cid:h.Z.get("catalog.MasterCid"),data:{}});if(o)return t.init().then((function(){return function(e){if(!(pe=ae.Z.getInstance())||pe.visible)return this;fe.newspapers.setPageSize(50),fe.sort(fe.sortObj.getName(ve.getCurrentCategoryId()));var t=fe.sortObj.getParams();return fe.newspapers.setSort(t.path,t.order),ve.setDefaultCategoryType("countries"),fe.resetFilter(),e&&e.filter&&fe.filter(e.filter),fe.plugin=ve,pe.show({templateName:"v7.Client.Dialogs.NewCatalog",model:fe}),this}(e)}));var a=h.Z.get("ui.Catalog.Menu.defaultCategoryId","all");return"all"!==a?(0,c.n3)(a).then((function(e){return ue.Z.goView(u.n3.StoreHub,{catalogView:u.N1.Catalog,filter0:e.slug,addPublicationsMenu:!0},!1,!0)})):ue.Z.goView(u.n3.StoreHub,{catalogView:u.N1.Catalog})}))},init:function(){return ie||(ie=new ce.B,oe.Z.show(),Promise.all([re.load(),l.Z.load()]).then((function(){oe.Z.hide(),ie.resolve()}))),ie.promise()},hide:function(){return pe.hide(),this},prop:function(e,t){return 1==arguments.length?de[e]:(de[e]=t,this)},setDefaultCategoryType:function(e){return this.prop("categoryType$default",e),this.setCurrentCategoryType(this.getCurrentCategoryType()),this},getDefaulte$default")},getCurrentCategoryType:function(){var e=fe.categoryType();return!e&&this.getDefaultCategoryType()&&(e=this.getDefaultCategoryType(),this.setCurrentCategoryType(e)),e},setCurrentCategoryType:function(e){fe.categoryType(e);var t=this;return this.getCategories().then((function(n){fe.categories(n),t.setCurrentCategoryId(t.prop(e+"$categoryId"))})),this},getCurrentCategory:function(e){return re.getCategory(this.getCurrentCategoryId(e))},getCurrentCategoryId:function(e){var t=this.prop("categoryId")||this.prop(this.prop(this.getCurrentCategoryType()+"$categoryId"));return t||e?t:h.Z.get("ui.Catalog.Menu.defaultCategoryId","all")},setCurrentCategory:function(e){this.setCurrentCategoryId(e?e.category.id||e:null)},setCurrentCategoryId:function(e){var t=fe.getCategoryById(this.getCurrentCategoryId());if(t&&t.setSelected(!1),e)t=fe.getCategoryById(e);else{var n=o.utils.arrayFirst(fe.categories(),(function(e){return fe.stringStartsWith(e.category.id.toLowerCase(),"mynewspapers")}));if(n&&n.category&&n.category.newspaperCount)t=n.category;else{e=h.Z.get("ui.Catalog.Menu.defaultCategoryId","all");var i=h.Z.get("ui.Catalog.Menu.allSourcesEnable",!0);t=!e||"all"==e&&!i?fe.categories()[0].category:re.getCategory(e)}}return t&&(t.setSelected(!0),e=t.id),this.prop(this.getCurrentCategoryType()+"$categoryId",e),this.prop("categoryId",e),this.setCurrentMainSection(null),fe.currentState(he.titles),fe.currentCategory(t),fe.isRecentlyReadCategory("RecentlyReadIssues"===e),!1},setCurrentMainSection:function(e){var t=fe.selectedTitle();return t&&t!=e&&t.resetSelection(),fe.mainSectionCid(e?e.cid||e:null),e&&(e.selectedDate(e.issueInfo.issueDate.toUTCString()),e.issueId(e.issueInfo.issue),e.issueThumb(e.getThumbUrlByWidth(400))),fe.selectedTitle(e),fe.toolbarHeader(e?e.name:""),fe.newspapers.reset().updateSource(this.getNewspapers()),fe.selectedTitle()&&r.each(fe.newspapers._source,(function(e,t){t.cid==fe.selectedTitle().cid&&(fe.newspapers._source[e]=fe.selectedTitle())})),fe.filter()?me():fe.newspapers.render(),pe&&pe.resize(),this},getCategories:function(e){var t;e=e||fe.categoryType(),(t="languages"==e?re.languages:"countries"==e?re.countriare(t.name)}));var n=h.Z.get("ui.Catalog.Menu.myNewspapersEnable",!0),i=h.Z.get("ui.Catalog.Menu.allSourcesEnable",!0);t=t.slice(0);var s=new ce.B;if(r.nd.user.getLatestReadIssues().then((function(e){var n;h.Z.get("ui.Catalog.Menu.recentlyReadEnable",!0)&&t.unshift((n=function(e){for(var t=[],n=[],i=0;i<e.length;i++){var o=e[i],a=re.getNewspaper(o.cid);if(a){t.push(o.cid);var s=r.extend(!0,{},a);s.issueInfo=o,s.rank=i,n.push(s)}}return{cids:t,newspapers:n}}(e),function(e,t,n,i){var o=new r.nd.category({id:"RecentlyReadIssues",name:t});return o.newspapers_cids=n.cids,o.newspapers=n.newspapers,o.newspaperCount=o.newspapers.length,r.extend({},o,{hideNewspaperCount:!1})}(0,f.ZP.val("Catalog.RecentlyRead"),n))),s.resolve()})),n){var u=re.getCategory("MyNewspapers");t.unshift(u),fe.myNewspapers(u.newspapers_cids)}for(var c=re.custom_categories.length-1;c>=0;--c)t=(0,a.union)(this.getChildCustomCategories(re.custom_categories[c]),t);return Promise.all([s]).then((function(){return i&&t.unshift(re.getCategory("all")),o.utils.arrayMap(t,(function(e){return new ge(e)}))}))},getChildCustomCategories:function(e){for(var t=[],n=e.children.length-1;n>=0;--n)t=(0,a.union)(this.getChildCustomCategories(e.children[n]),t);return e.newspapers&&t.unshift(e),t},getNewspapers:function(){return this._getNewspapers()},_getNewspapers:function(){var e=this,t=fe.mainSectionCid();if(t)return e.getNewspapersByMainSection(t);var n=e.getCurrentCategoryId(),i=!!fe.filter();return e.getNewspapersByCategory(n,i)},getNewspapersByCategory:function(e,t){var n=fe.getCategoryById(e);return n?t?n.allNewspapers:n.newspapers:[]},getNewspapersByMainSection:function(e){var t=re.getNewspaper(e);if(t&&t.sections){var n=t.sections.slice(0);return n.unshift(t),n}return[]},showNewspaper:function(e){var t=e.cid?e:re.getNewspaper(e),n=t.getSelectedOrLatestIssueId();n?se.Z.showIssue(n):se.Z.showNewspaper(t.cid),this.hide()}};r.nd.catalogDialog=ve;var ye=ve},239:function(e,t,n){"use strict";n.d(t,{Z:function(){return R}});var i=n(22970),r=n(40180),o=n(79375),a=n(74036),s=n(10110),u=n(47070),c=n(60231),l=n(20384),d=n(97781),h=n(60078),p=n(98392),f=n(17447),m=n(91493),g=n(84066),v=n(82418),y=l.support.retina?420:210,_={slidesPerView:"auto",freeMode:!0,keyboard:!0,mousewheel:!0,updateOnImagesReady:!0,setWrapperSize:!0,observer:!0,observeParents:!0,touchStartPreventDefault:!1},b={showMeta:!1},w={viewModel:function(){function e(e){var t=this,n=void 0===e?{}:e,i=n.issue,o=n.page,a=n.selectedPages,s=n.options,u=void 0===s?{}:s;if(!i)throw new Error("issue not specified");this.issue=i,this.page=o||0,this.options=(0,r.assign)({},b,u),c.isObservable(a)?this.selectedPages=a:this.selectedPages=c.observableArray([o]),this.pagesCounter=c.observable(this.selectedPages().length),this.pagesCounterText=c.pureComputed((function(){return t.pagesCounter()>1?f.ZP.format("PagesSelector.PagesSelected",t.pagesCounter()):1===t.pagesCounter()?f.ZP.val("PagesSelector.PageSelected","1 Page Selected"):f.ZP.val("PagesSelector.SelectPage","Select Page")}),this),this.swiper=null,this.issueInfo=c.observable({}),this.spreads=c.observableArray([]),this.init()}return e.prototype.init=function(){var e=this;Promise.all([(0,h.IA)(this.issue),(0,h.D3)({issue:this.issue})]).then((function(t){var n=(0,i.CR)(t,2),o=n[0],a=n[1];e.issueInfo({issueName:o.issueName,displayDate:o.displayDate});var s=(0,r.chain)(a.Pages).map((function(t){return e.createPageModel((0,p.z)(t))})).sortBy("pageNumber").value(),u=(0,r.map)(s,e.pagePreload);Promise.all(u).then((function(){return e.afterRender()}));var c=(0,r.reduce)(s,(function(e,t){return 1===t.pageNumber||t.isLeft?(e[t.pageNumber]||(e[t.pageNumber]=[])).push(t):(e[t.pageNumber-1]||(e[t.pageNumber]=[])).push(t),e}),{});e.spreads((0,r.values)(c))}))},e.prototypeterRender()},e.prototype.createPageModel=function(e){var t=Object.create(e);t.isLeft=e.pageNumber%2==0,t.pageUrl=g.Z.getPageImageUrl(this.issue,e.pageNumber,{width:e.width,height:e.height},{height:y});var n=-1!==(0,r.indexOf)(this.selectedPages(),e.pageNumber);return t.isSelected=c.observable(n),t.loaded=c.observable(!1),t},e.prototype.pagePreload=function(e){return m.MA(e.pageUrl).then((function(){return e.loaded(!0)}))},e.prototype.selectPage=function(e){var t=!e.isSelected();e.isSelected(t),t?this.selectedPages.push(e.pageNumber):this.selectedPages.remove(e.pageNumber),this.pagesCounter(this.selectedPages().length),(0,v.b)({pageNumber:e.pageNumber,isChecked:t,selectedPages:this.selectedPages()})},e.prototype.initSwiper=function(){var e=l("#issue-pages-selector");e.length&&(this.swiper=new d.Z(e.get(0),_),this.slideToSelectedPage())},e.prototype.slideToSelectedPage=function(){if(this.swiper){var e=l(this.swiper.wrapperEl).find("#page_thumb".concat(this.page)).closest(".swiper-slide").index();this.swiper.slideTo(e)}},e}(),template:{ndTemplate:"v7.Client.IssuePagesSelector.ko.Component"},synchronous:!0},C="issue-pages-selector";c.components.isRegistered(C)||c.components.register(C,w);var I=n(88477),P={slidesPerView:"auto",freeMode:!0,keyboard:!0,mousewheel:!0,updateOnImagesReady:!0,setWrapperSize:!0,observer:!0,observeParents:!0,touchStartPreventDefault:!1},x={},S="issue-pages-list",T=function(){function e(e){var t=void 0===e?{}:e,n=t.thumbs,i=t.options,o=void 0===i?{}:i,a=(0,r.map)(c.unwrap(n),(function(e){return{pageUrl:e.url,area:e.area,loaded:c.observable(!1)}}));this.pages=c.observable(a),this.options=(0,r.assign)({},x,o),this.swiper=null}return e.prototype.mount=function(e){var t=this,n=(0,r.map)(this.pages(),this.pagePreload);Promise.all(n).then((function(){return t.afterRender(e)})).catch(I.logError)},e.prototype.afterRender=function(e){this.initSwiper(e),this.options&&this.options.afterRender&&this.options.afterRender()},e.prototype.initSwiper=function(e){var t=l(e).find("#".concat("swiper-container"));t.length&&(this.swiper=new d.Z(t.get(0),P))},e.prototype.pagePreload=function(e){return m.MA(e.pageUrl).then((function(){return e.loaded(!0)}))},e}(),k={viewModel:{createViewModel:function(e,t){var n=new T(e);return n.mount(t.element),n}},template:{ndTemplate:"v7.Client.IssuePagesList.ko.Component"},synchronous:!0};c.components.isRegistered(S)||c.components.register(S,k);var A=n(95766),E=n(92895),Z=u.Z.base,M=a.ZP.view,D=o.Z.list,L=["pageView","textView","comment","bookmark","listen","share","copy","print","pdf","export","translateArticle","translate","openInSmartEditor","vote"],N=function(e){function t(t,n){var i=e.call(this)||this;return i._context=n,i._view=t,i._menu=new M(i),i._itemsControllers=[],i._isItemSelected=!1,i.subscription=A.U.ofType(E.GM.ContextMenu).subscribe((function(){i._isItemSelected=!0})),i}return(0,i.ZT)(t,e),t.prototype.show=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=this._context;return o.article&&o.article.Page1&&(this._context={page:o.article.Page1.PageN,issue:o.article.Page1.Issue.Id}),"page"in o&&!o.page?Promise.reject():(uVisible=!0})),this.togglingCtxMenuVisibility||this.ctxMenuVisible?Promise.reject():(this.togglingCtxMenuVisibility=!0,Promise.resolve(e.prototype.show.apply(this,(0,i.ev)([],(0,i.CR)(n),!1)))))},t.prototype.hide=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return this.ctxMenuVisible=!1,ispose()}))})),this._isItemSelected||A.U.send(new E.tp({action:"close"})),this._isItemSelected=!1,this.subscription.unsubscribe(),e.prototype.hide.apply(this,(0,i.ev)([],(0,i.CR)(n),!1))},t.prototype.context=function(e){return arguments.length?(this._context=e,this.reset(),delete this._renderer,this):this._context},t.prototype.renderer=function(){var e=this;return this._renderer?Promise.resolve(this._renderer):(this._items=[],this._addItemsAsync(L).then((function(){return e._renderer=new D(e,"v7.Client.ContextMenu"),!e._context.article&&e._context.issue&&e._renderer.addGroup().template("pages").data({issue:e._context.issue,page:e._context.page}),e._arrangeItems(),delete e._items,e._renderer})))},t.prototype._addItemsAsync=function(e){var t=this;return(0,Async(n)}))}),Promise.resolve())},t.prototype._addItemAsync=function(e){var t=this,n=s.U2(e);if(!n)return Promise.resolve();var i=new n(this,this._view,this._context);return Promise.resolve(i.available()).then((function(e){e&&(t._itemsControllers.push(i),t._items.push(i.item()))}))},t.prototype._dItem(t)}))},t}(Z),R=N},94167:function(e,t,n){"use strict";n(23193);var i=n(60231),r=n(18518),o=n(40180),a=n(58653),s=n(91574),u=n(17447),c=n(34829),l=/\s*;\s*|\s*,\s*|\s+/;function d(e){return e.article?e.article.Title:e.preview&&e.preview.issueName}function h(e){var t=e.dialog,n=e.context,s={context:n.preview&&n,to:i.observable("").extend({emailList:{delimiters:" ;,",message:u.ZP.val("Dialogs.Validators.EmailList","Please specify a list of valid EMail addresses separated by space, comma or semicolon.")},required:u.ZP.val("Dialogs.Validators.Required","This field is required."),trackDirtyState:!0}),userComments:i.observable(""),subject:i.observable(d(n)),submit:function(e){if((0,c.validate)(e)){var n={to:e.to().split(l),userComments:e.userComments(),subject:e.subject()};t.hide(r.Y.Ok,n)}else e.to.notifySubscribers()},cancel:function(){t.hide(r.Y.Cancel)},shareUsingPersonalEmail:function(e){(0,o.assign)(n,{to:e.to(),subject:e.subject(),userComments:e.userComments()}),function(e){return a.Z.mailTo.available()?a.Z.mailTo.activate(null,e):Promise.reject(new Error("action is not available"))}(n).then((function(){return t.hide(r.Y.Cancel)}))}};return s}t.Z={show:function(e){var t=void 0===e?{}:e,n=t.parent,i=t.context;return new Promise((function(e){var t=s.Z.createInstance(n),r={templateName:"v7.Client.Dialogs.ShareEmail",model:h({dialog:t,context:i}),name:"ShareEmailDialog"};t.onHide((function(t,n){e(n)})),t.show(r)t.Z=new i.Z},61855:function(e,t,n){"use strict";var i,r=n(20384),o=n(60231),a=n(40180),s=n(17447),u=n(74036),c=n(44853),l=n(47070),d=n(79375),h=((i={view:{},sort:{}}).view[r.nd.catalogViewType.list]={title:"Menu.Item.List",available:!1},i.view[r.nd.catalogViewType.small_grid]={title:"Menu.Item.SmallGrid",available:!0},i.view[r.nd.catalogViewType.grid]={title:"Menu.Item.Grid",available:!0},i.view[r.nd.catalogViewType.newsstand]={title:"Menu.Item.Newsstand",available:!0},i.sort[r.nd.catalogSortType.by_alphabet]={title:"Menu.Item.ByAlphabet",available:!0,css:"pri pri-alphabeth"},i.sort[r.nd.catalogSortType.most_popular]={title:"Menu.Item.MostPopular",available:!0,css:"pri pri-popular"},i.sort[r.nd.catalogSortType.most_current]={title:"Menu.Item.MostCurrent",available:!0,css:"pri pri-recent"},i);function p(e){var t=this;t._menu=new u.ZP.view(this),t._viewState=e.view,t._sortState=e.sort,t._isSortMenuAvailable=e.isSortMenuAvailable}r.extend(p.prototype,l.Z.base.prototype,{renderer:function(e){var t=this,n=(e=e||{}).options||[],i=new d.Z.list(this).headerEnable(!1).title(e.title||"").width("320px");if(!a.isFunction(t._isSortMenuAvailable)||t._isSortMenuAvailable()){var r=i.addGroup();a.forEach(n.sort,(function(e){var n=h.sort[e];if(n&&n.available){var i=new c.Z.radio(void 0,s.ZP.val(n.title),n.css);i.value=e,i.checked=o.computed({read:function(){return t._sortState()===e},owner:t}),i.enabled=o.observable(!0),i.onClick=function(e){t._sortState(e.value),t.hide()},r.add(i)}})),i.addGroup("","list-div")}var u=i.addGroup();return a.forEach(n.view,(function(e){var n=h.view[e];if(n&&n.available){var i=new c.Z.radio(void 0,s.ZP.val(n.title),n.css);i.value=e,i.checked=o.coState()===e},owner:t}),i.enabled=o.observable(!0),i.onClick=function(e){t._viewState(e.value),t.hide()},u.add(i)}})),i}}),t.Z=p},38775:function(e,t,n){"use strict";n.d(t,{f:function(){return H}});var i=n(60231),r=n(20384),o=n(40180),a=n(14581),s=n(3284),u=n(2099),c=n(80053),l=n(54591),d=n(59527),h=n(79430),p=n(27670),f=n(24458),m=n(17447),g=n(14003),v=n(34336),y=n(88585),_=n(91330),b=n(83062),w=n(79375),C=n(74036),I=n(74403),P=n(47070),x=(n(18518),n(18679)),S=n(88769),T=n(97226),k=n(95766),A=n(63019),E=n(92895),Z=n(83294),M=n(48692),D=n(4169),L=n(98439),N=n(14347);function R(e,t,n,i,r){return(0,o.reduce)(t,(function(t,o){return t.then((function(){return function(e,t,n,i,r){if(!t)return Promise.resolve();var o=r[t];if("function"==typeof o){var a=new o(i);return Promise.resolve(a.available()).then((function(t){t&&("function"==typeof a.addItems?a.addItems(e,n):e.addItem(a.item(),n))}))}return Promise.resolve()}(e,o,n,i,r)}))}),Promise.resolve())}var V,B=n(39752),F=n(95430),O=((V={})[S.gu.interfaceLang]=b.Z.get("language"),V[S.gu.fonts]=b.Z.get("fonts"),V[S.gu.autoTranslate]=b.Z.get("autoTranslate"),V[S.gu.togglePervasive]=b.Z.get("togglePervasive"),V);function z(){this._menu=new C.ZP.view(this)}Object.assign(z.prototype,P.Z.base.prototype,{renderer:function(e){var t=(e=e||{}).options||[],n=e.generalOptions||[],i=new C.ZP.renderers.list(this).title(e.title||"").width("320px");return Promise.all([R(i,t,void 0,this,O),R(i,n,m.ZP.val("Menu.Item.General","General"),this,O)]).then((function(){return i}))}});var U,H=new z;function j(e,t){var n=t.code(),r=t.title(),o=p.Z.getActiveViewName();o!==f.n3.PagesView&&o!==f.n3.TextView||u.Z.contentLanguage()!==n?this.code=n:r=m.ZP.format("Menu.OriginalLanguage",r),C.ZP.items.radio.call(this,e,r),this.checked=i.computed(this._checked,this)}function W(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];C.ZP.items.translate.apply(this,e),this.translateLanguage=i.computed(this._translateLanguage,this)}function q(e,t,n){C.ZP.items.checkbox.call(this,e,t),this.checked=i.observable(!1),this.activationId=n}function G(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];C.ZP.items.issueDate.apply(this,e),this.issueDateDisplay=i.computed(this._issueDateDisplay,this);var n=u.Z.issue(),r=(0,a.xr)(n);this.issueDate(r)}function X(e,t,n,i){var r=this;C.ZP.items.item.call(this,e,t,n),this._issueDate=t,this._issue=n,this._isFull=i,this._issueId=(0,a.eX)(u.Z.cid(),this._issueDate,this._issue.V),this.css=function(){var e=r._issue.P;return u.Z.issue()===r._issueId?"sel":e?"marked":""},this.issueDate=function(){var e=this._isFull?"v7.Client.DateFormat.Issue":"v7.Client.DateFormat.Issue.Brief";return m.ZP.formatDate(this._issueDate,e,"d MMMM yyyy")},this.dayOfWeek=function(){if(this.showDayOfWeek())return m.ZP.formatDate(this._issueDate,"Calendar.WeekdayFormat","dddd")},this.showDayOfWeek=function(){return this._isFull},this.template("issueDateBrief")}function Y(e,t,n,i){C.ZP.items.item.call(this,e,t,n,i),this.shareType=i}function K(e,t,n){C.ZP.items.radio.call(this,e,t,n),this.checked=i.observable(!1),this.ticket=n}function J(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];b.Z.base.apply(this,e),this.isBrief=!1}function $(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];b.Z.base.apply(this,e),this.loading=!1}function Q(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];b.Z.base.apply(this,e)}function ee(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];b.Z.base.apply(this,e)}function te(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];b.Z.base.apply(this,e),this._group=null}function ne(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];b.Z.base.apply(this,e),this._group=null}function ie(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];b.Z.base.apply(this,e),this._action=o.noop,this.inProgress=!1,this._actionName=""}function re(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];b.Z.base.apply(this,e),U||(U=x.Z);var n=0;if(U.isVisible())switch(U.reportType()){case S.rK.attentionMap:n=1;break;case S.rK.readingTime:n=2;break;case S.rK.adValue:n=3}this._state=i.observable(n)}function oe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];b.Z.base.apply(this,e),this._action=o.noop,this.inProgress=!1,this._actionName=""}Object.assign(j.prototype,C.ZP.items.language.prototype,{code:null,_checked:function(){var e=_.Z.current.language();return e&&e.code()===this.code},onClick:function(e){this.controller().item().translateLanguageCode(e.code),_.Z.current.language(e.code),this.controller()._parent.hide(),H.hide(),k.U.send(new A.HX({id:u.Z.cid(),issueDate:u.Z.issueDate(),translation:e.code})),p.Z.getActiveViewName()===f.n3.PagesView&&I.Z.switchToTextView()}}),Object.assign(W.prototype,C.ZP.items.translate.prototype,{translateLanguageCode:i.observable(),_translateLanguage:function(){return this.translateLanguageCode()?this.translateLanguageCode().toUpperCase():m.ZP.val("OFF")}}),Object.assign(q.prototype,C.ZP.items.checkbox.prototype,{onClick:function(){this.checked(!this.checked())}}),Object.assign(G.prototype,C.ZP.items.issueDate.prototype,{issueDate:i.observable(),_issueDateDisplay:function(){return m.ZP.formatDate(this.issueDate(),"someresourcename","ddd, d MMM yyyy")}}),Object.assign(X.prototype,C.ZP.items.item.prototype,{onClick:function(){u.Z.issue()!==this._issueId&&(g.Z.showIssue(this._issueId),this.controller()._parent.hide())}}),Object.assign(Y.prototype,C.ZP.items.item.prototype,{onClick:function(e){k.U.send(new E.zT({action:e.shareType})),u.Z.articles().length>0&&(H.hide(),"email"===e.shareType?T.Z.shareEmail({articleId:u.Z.articles()[0].Id,contentType:"article"}):T.Z.share({articleId:u.Z.articles()[0].Id,contentType:"article"},e.shareType))}}),Object.assign(K.prototype,C.ZP.items.radio.prototype,{onClick:function(){this.controller().uncheckAll(),this.checked(!0)}}),Object.assign(J.prototype,b.Z.base.prototype,{item:function(){return this._item||(this._item=new G(this,m.ZP.val("Menu.Issue.IssueDate")).css("pri pri-date").bind(this.activate.bind(this))),this._item},hide:function(){this._parent.hide()},back:function(){this._parent.back()},available:function(){return!0},enabled:function(){return!0},done:function(){this._parent.hide();var e=this._parent.menu().position(),t=window.document.documentElement.clientWidth,n={isBrief:!this.isBrief,position:{x:t/2,y:e.top,align:{x:C.ZP.align.center,y:C.ZP.align.top}}},i=new P.Z.singleItem(n);i.itemsControllerCTOR(b.Z.get("issueDate")).itemsControllerParams([i]),i.show(n)},activate:function(){var e=this;k.U.send(new E.zT({action:"issue-date"}));var t=new w.Z.list(this).title(m.ZP.val("Menu.Issue.IssueDate")),n=this._parent._config||{};Promise.all([D.Z.loaded(),L.Z.load(u.Z.cid())]).then((function(){t.title().template("issueDate");var i=L.Z.getData();if(t.title().enableChangeView=i.EnableCalendarView&&i.EnableListView,e.isBrief=i.EnableCalendarView&&i.EnableListView?n.isBrief:i.EnableListView,e.enableCalendarView=i.EnableCalendarView,e.enableListView=i.EnableListView,e.isBrief){var o=t.addGroup().scrollable(!0),a=[];for(var s in i.Years)if(i.Years.hasOwnProperty(s)){var u=i.Years[s];for(var c in u)if(u.hasOwnProperty(c)){var l=u[c];for(var d in l)if(l.hasOwnProperty(d)){var h=new Date(parseInt(s),parseInt(c)-1,parseInt(d));a.push(new X(e,h,i.Years[s][c][d],i.EnableFullDateView))}}}for(var y=a.length;y--;)o.add(a[y]);e._parent.showSubmenu(t)}else{t.title().backTitle(m.ZP.val("Buttons.Cancel.Text")),t.addCustomGroup("v7.Client.Menu.IssueCalendar"),e._parent.showSubmenu(t);var _=r("#issueCalendar").attr("dir",D.Z.get("ui.Calendar.dir","ltr"));r.nd.ui.issuesCalendar.show(_,L.Z.getData()).onChange.subscribe((function(t){e._parent.hide();var n=p.Z.getActiveViewName();switch(n){case f.n3.ReadingMap:case f.n3.PagesView:case f.n3.TextView:v.Z.goView(n,{issue:t});break;default:g.Z.showIssue(t)}}))}}))}}),b.Z.register("issueDate",J),Object.assign($.prototype,b.Z.base.prototype,{item:function(){this._item||(this._item=new W(this,m.ZP.val("Menu.Translate")).css("pri pri-translate").bind(this.activate.bind(this)));var e=_.Z.current.language();return this._item.translateLanguageCode(e?e.code():null),this._item},back:function(){this._parent.back()},hide:function(){this._parent.hide()},available:function(){return y.Z.getAsync(y.Z.restrictionTypes.translation).then((function(e){return e===y.Z.restrictionResults.ALLOWED}),(function(){return!1}))},enabled:function(){return!h.Z.issueIsDisplayed()||(0,d.yy)("Translation",u.Z.cid(),u.Z.issue())},_isContentLanguageCode:function(e){return h.Z.issueIsDisplayed()&&u.Z.contentLanguage()===e},_addLanguages:function(e,t,n){for(var i=0;i<e.length;++i)t.add(new j(this,e[i]));this._parent.showSubmenu(n)},_loadLanguages:function(){var e=this,t=new w.Z.list(this).title(m.ZP.val("Menu.TranslateIssue")),n=t.addGroup().scrollable(!0);return _.Z.getTranslationLanguages().then((function(i){i.length>0?(i=(0,o.filter)(i,(function(t){return e._isContentLanguageCode(t.code())||!t.isRtl()})),e._addLanguages(i,n,t)):(0,l.Z)().show(m.ZP.val("Messages.TheLanguageIsNotSupported"))}))},activate:function(){var e=this;this.loading||(this.loading=!0,k.U.send(new E.zT({action:"translate"})),y.Z.getAsync(y.Z.restrictionTypes.translation).then((function(t){return t===y.Z.restrictionResults.RESTRICTED?(e.hide(),c.default.signIn(),null):e._loadLanguages()})).catch((function(e){ndLogger.error(e)})).finally((function(){e.loading=!1})))}}),b.Z.register("issueTranslate",$),Object.assign(Q.prototype,b.Z.base.prototype,{item:function(){return this._item||(this._item=new C.ZP.items.item(this,m.ZP.val("Buttons.Listen")).css("pri pri-listen").bind(this.activate.bind(this))),this._item},back:function(){this._parent.back()},available:function(){return!!D.Z.get("ui.Listen.enable",!0)&&(p.Z.getActiveViewName()!==f.n3.PagesView||u.Z.issue()&&!(0,o.isEmpty)(u.Z.articles()))},enabled:function(){return!!D.Z.get("ui.Listen.enable",!0)&&(!h.Z.issueIsDisplayed()||(0,d.yy)("Sound",u.Z.cid(),u.Z.issue()))},activate:function(){k.U.send(new E.zT({action:"listen"}));var e=null,t=p.Z.getActiveViewName(),n=p.Z.getActiveView();t!==f.n3.PagesView&&t!==f.n3.TextView?e=(n.firstAvailableArticleToListen()||{}).Id:u.Z.articles().length>0&&(e=u.Z.articles()[0].Id),e&&(this._parent.hide(),v.Z.goView(f.n3.Radio,{articleId:e}))}}),Object.assign(ee.prototype,b.Z.base.prototype,{item:function(){return this._item||(this._item=new C.ZP.items.item(this,m.ZP.val("Menu.Share")).css("pri pri-share").bind(this.activate.bind(this))),this._item},back:function(){this._parent.back()},available:function(){return!0},enabled:function(){return!0},activate:function(){var e=this,t=new w.Z.list(this).title("Share Issue"),n=t.addGroup().scrollable(!0);(0,d.yy)("Blogging",null,u.Z.issue()).then((function(t){t&&(n.add(new Y(e,"Facebook","pri pri-facebook","facebook")),n.add(new Y(e,"Twitter","pri pri-twitter","twitter")),n.add(new Y(e,"Evernote","pri pri-evernote","evernote")),n.add(new Y(e,"OneNote","pri pri-onenote","onenote")),n.add(new Y(e,"Instapaper","pri pri-instapaper","instapaper")))})),(0,d.yy)("EmailSharing",null,u.Z.issue()).then((function(t){t&&n.add(new Y(e,"Email","pri pri-email","email"))})),this._parent.showSubmenu(t)}}),Object.assign(te.prototype,b.Z.base.prototype,{item:function(){return this._item||(this._item=new C.ZP.items.item(this,m.ZP.val("Buttons.DownloadToDevice.Text")).css("pri pri-download").bind(this.activate.bind(this))),this._item},back:function(){this._parent.back()},done:function(){var e=[];i.utils.arrayForEach(this._grtivationId)})),e.length>0&&Z.Z.download(u.Z.issue(),e)},available:function(){return!0},enabled:function(){return!0},hide:function(){this._parent.hide()},activate:function(){var e=this;k.U.send(new E.zT({action:"download"})),Z.Z.onFinished((function(){return e._parent.hide()})),Z.Z.onChooseActivation((function(t,n){if(!(0,o.isEmpty)(n)){var r=new C.ZP.renderers.list(e).title(m.ZP.val("Menu.Item.DirectDownload")).canBeDone(!0);e._group=r.addGroup(m.ZP.val("Menu.Issue.DeliveredTo"),"group").footerText(m.ZP.val("Menu.DownloadIssue.ToHave")).scrollable(!0),i.utils.arrayForEach(n,(function(t){e._group.add(new q(e,t.Name,t.Id))})),e._group.items()&&(r.disableDone=i.computed((function(){return!i.utils.arrayFirst(e._group.items(),(function(e){return e.checked()}))}))),e._parent.showSubmenu(r)}})),Z.Z.download(u.Z.issue())}}),b.Z.register("issueDownload",te),Object.assign(ne.prototype,b.Z.base.prototype,{item:function(){return this._item||(this._item=new C.ZP.items.item(this,m.ZP.val("Menu.Item.Export2EReader")).css("pri pri-exportereader").bind(this.activate.bind(this))),this._item},back:function(){this._parent.back()},done:function(){var e=i.utils.arrayFirst(this._group.items(),(function(e){return e.checked()}));e&&(M.Z.addExportRequest(e.ticket),this._parent.hide())},available:function(){return N.Z.isLogin()&&u.Z.issue()&&u.Z.enableSmart()},enabled:function(){return!0},hide:function(){this._parent.hide()},activate:function(){var e=this;k.U.send(new E.zT({action:"export-ereader"})),M.Z.getDeviceTypes(u.Z.issue()).then((function(t){var n=new C.ZP.renderers.list(e).title(m.ZP.val("Buttons.Export")).canBeDone(!0);e._group=n.addGroup(m.ZP.val("Menu.Issue.SelectDevice"),"group").scrollable(!0),i.utils.arrayForEach(t,(function(t){e._group.add(new K(e,t.Name,t.Ticket))})),e._group.items()&&(n.disableDone=i.computed((function(){return!i.utils.arrayFirst(e._group.items(),(function(e){return e.checked()}))}))),e._parent.showSubmenu(n)})).catch((function(){return e._parent.hide()}))},uncheckAll:function(){i.utils.arrayForEach(this._group.items(),(function(e){return e.checked(!1)}))}}),b.Z.register("export",ne),Object.assign(ie.prototype,b.Z.base.prototype,{item:function(){var e=this;return this._item||(this._item=new C.ZP.items.item(this).bind(this.activate.bind(this)),this._item.template("addToFavorites"),this._item.text=i.observable(""),this._item.cssString=i.observable(""),this._item.rootCss="addtofavor"),s.Z.stream.subscribe((function(t){t.contains(u.Z.cid())?(e._item.text(m.ZP.val("Menu.Item.RemoveFavoriteIssue")),e._item.cssString("pri pri-favoring"),e._actionName="remove-from-favorites"):(e._item.text(m.ZP.val("Menu.Item.AddToFavorites")),e._item.cssString("pri pri-favor"),e._actionName="add-to-favorites")})),this._iteB.Ys)(F.hi)},enabled:function(){return!0},activate:function(){var e=this;this.inProgress||(this.inProgress=!0,k.U.send(new E.zT({action:this._actionName})),s.Z.togglePublication(u.Z.cid()).finally((function(){e.inProgress=!1})))}}),Object.assign(re.prototype,b.Z.base.prototype,{available:function(){return U.isAvailable()},enabled:function(){return U.isEnabled()},addItems:function(e){var t=e.addGroup(m.ZP.val("Menu.Items.ReadingMap","Reading Map")),n=new C.ZP.items.radio(this,m.ZP.val("Menu.Item.Off","Off")).bind(this._setState.bind(this,0));n.checked=i.computed(this._checked.bind(this,0)),t.add(n),(n=new C.ZP.items.radio(this,m.ZP.val("Menu.Item.AttentionMap","Attention Map")).bind(this._setState.bind(this,1))).checked=i.computed(this._checked.bind(this,1)),t.add(n),(n=new C.ZP.items.radio(this,m.ZP.val("Menu.Item.ReadingTimeMap","Reading Time Map")).bind(this._setState.bind(this,2))).checked=i.computed(this._checked.bind(this,2)),t.add(n),t.add(new C.ZP.items.item(this,m.ZP.val("Menu.Item.Thumbnails","Thumbnails")).bind(this._showThumbnailsView.bind(this)))},_state:null,_setState:function(e){switch(this._state(e),e){case 0:U.hide();break;case 1:U.show(S.rK.attentionMap);break;case 2:U.show(S.rK.readingTime);break;case 3:U.show(S.rK.adValuestate()===e},_showThumbnailsView:function(){this._parent.hide(),v.Z.goView(f.n3.ReadingMap,{issue:u.Z.issue()})}}),Object.assign(oe.prototype,b.Z.base.prototype,{item:function(){return this._item||(this._item=new C.ZP.items.item(this,m.ZP.val("Menu.Account.EmailAlerts")).css("pri pri-alerts").bind(this.activate.bind(this))),this._item},available:function(){return N.Z.isLogin()&&D.Z.get("ui.Sidebar.ShowEmailAlerts",!0)},enabled:function(){return N.Z.isLogin()&&D.Z.get("ui.Sidebar.ShowEmailAlerts",!0)},activate:function(){this._parent.hide(),v.Z.goView(f.n3.EmailAlerts)}}),O[S.gu.issueDate]=J,O[S.gu.lang]=$,O[S.gu.listen]=Q,O[S.gu.share]=ee,O[S.gu.download]=te,O[S.gu.export]=ne,O[S.gu.addToFavorites]=ie,O[S.gu.readingMap]=re,O[S.gu.emailAlerts]=oe},14347:function(e,t,n){"use strict";var i=n(20384),r=n(8270),o=n(4169),a=n(46720),s=n(74981),u=(n(42758),n(77004)),c=new i.nchanged",h)}function d(e){if(void 0!==e&&""!==e&&null!==e){var t="",n=window.basePath,r="pagesView.Redirection.";switch(o.Z.get(r+e+".Type")){case"1":t=n;break;case"2":t=decodeURIComponent(i.nd.navHistory.getReturnUrl());break;case"3":t=n+o.Z.get("catalog.MasterCid");break;case"4":t=n+"latest";break;case"5":t=n+o.Z.get(r+e+".Cid");break;case"6":t=o.Z.get(r+e+".Url")}return t}}u.bind("tokenUpdated",l);var h={loader:c,userStateChanged:l,onUserStateChanged:function(e){a.Z.bind(h,"onuserstatechanged",null,e)},userLochanged",h)},onUserLoed",null,e)},isLogin:function(){return r.has("PDAuth")||r.has("PDPAuth")},getSmartEditorUrl:function(e,t){return s.Z.get("smartEditor","getEditUrl",{issueInfoId:e,page:t})},getLatestReadIssues:function(){return s.Z.get("user","GetLatestReadIssues").then((function(e){return function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(new i.nd.issue(r.cid,r.d,r.v,r.w,r.h,null))}return t}(e)}))},getRedirectionUrl:location=t)}};i.nd.user=h,t.Z=h},2099:function(e,t,n){"use strict";n.d(t,{L:function(){return f}});var i=n(20384),r=n(40180),o=n(14581),a=n(24458),s=n(25881),u=n(59527),c=(n(4169),n(84066),n(11144));i.nd.viewer=i.nd.viewer||{};var l=i.nd.viewer.app=function(){var e={loadIssue:function(e,t,n){},requestPageConfirmation:function(e){},showPage:function(e){},getPageInfo:function(e){}},t={};i.nd.extendObjectWithEvents(t,"issueLoading,issueLoaded,pageChanged,pageLoaded,pageKeysLoaded,bgColorChange,layoutLoaded"),i.nd.extendObjectWithProperties(t,"id,cid,issue,issueDate,issueEngine,page,bgcolor,heights,magnifierPageSizes,enableSmart,layoutAvailable,partialLayoutAvailable,layoutVersion,layoutValidForSmartFlow,expungeVersion,isExternal,calendarCache,contentName,bookmark,contentIsRtl,contentLanguage,contentCulture,newspaperInfo",!0,!0),i.nd.extendObjectWithProperties(t,"articles",!0,!0),i.nd.extendObjectWithProperties(t,"coudlIssueBeRead",!0,!0,!0),i.nd.extendObjectWithProperties(t,"sponsoredBy",!0,!0,!0),i.nd.extendObjectWithProperties(t,"subscriptionsInfo",!0,!0),i.nd.extendObjectWithProperties(t,"issueRestrictions",!0,!0),t.init=function(){return this},t.setProvider=function(t){e=t},t.getProvider=function(){return e},t.initAndLoad=function(e){var n=t;i.each(e,(function(e,t){"function"==typeof n[e]?n[e](t):void 0!==n[e]&&(n[e]=t)})),n.onIssueLoading(),n.onIssueLoaded()},t.loadIssue=function(n){var i=t;e.loadIssue(i.cid(),i.issue())},t.show=function(n){return n.viewName&&t.isExternal(n.viewName===a.n3.External),this.page(n.page),n.issue?this.issue()!=n.issue?e.loadIssue(n.cid,n.issue,n.page,n.bookmark):this.showPage(n.page):n.cid?this.cid()!==n.cid||this.issue()&&(0,o.HA)(this.issue())!==n.issueDate?e.loadIssue(n.cid,n.issue,n.page,n.bookmark,n.issueDate):this.showPage(n.page):n.page?this.showPage(n.page):n.bookmark&&e.loadIssue(n.cid,n.issue,n.page,n.bookmark),this},t.requestPageConfirmation=function(t){return e.requestPageConfirmation(t)},t.showPage=function(t){return this.issue()&&e.showPage(parseInt(t)),this},tarseInt(t))},t.getLeftPageNumber=function(e){return 1==(e=e||this.page())?e:e-e%2},t.getRightPageNumber=function(e){return(e=e||this.page())-e%2+1},t.onding(),this},t.onged(),this},t.onPagesLoaded=function(){return this.pageLoaded()},t.onPageKeysLoaded=function(){return this.pageKeysLoaded()},e(e,t),this},t.zooms=function(){return n},t.uiIsRtl=function(){return!0},t.isSingleLayer=function(){return 1===this.issueEngine()}().length>0},t.isIssueRestrictedBy=function(e){return r.get(this.issueRestrictions(),e,!1)},t.hasVisiblePages=function(){return r.some(this.pages.getPages(),(function(e){return!e.isRestrictedMode()}))},t.hasRestriction=function(e){return this.issue()?(0,u.X)(e,null,this.issue()):Promise.resolve(!1)};var n={switchToDefault:function(){return this.current(this.defaultZoom())},switultMZoom())},defaultZoom:function(){return this._defaultZoom},defaultMZoom:function(){return this._defaultMZoom},zooms:function(){return this._zooms},current:function(e){return 0==arguments.length?this._current||this.defaultZoom():(this._current&&(this._current.isCurrent=!1),this._current=e||this.defaultZoom(),this._current&&(this._current.isCurrent=!0),this)},next:function(){return this._current?this._zooms[this._current._idx+1idx-1]:null},_indexOf:function(e,t){for(var n=0;n<t.length;n++)if(t[n].maxHeight==e.maxHeight)return n;return 0},findZoom:function(e,t,n){n=n||this._current;var i=t?this._all_zooms:this._zooms;if(n){var r=n.maxHeight*e,o=e>1?1:-1,a=this._indexOf(n,i)+o,s=i[a];if(s){for(var u=Math.abs(r-s.maxHeight);s;){var c=i[a+=o];if(!c)return s;var l=Math.abs(r-c.maxHeight);if(l>u)return s;s=c,u=l}return s||n}}ret?1:e<t?-1:0},compareZooms:function(e,t){if(e&&t)return e!=t?e.isMZoom?t.isMZoom?this._comp(e.zoomIdx,t.zoomIdx):1:t.isMZoom?-1:this._comp(e.maxHeight,t.maxHeights.length-1]},_updateZooms:function(e,t){var n=l.heights(),i=l.magnifierPageSizes(),r=p.firstPage(),o={isDefaultZoom:!0,maxWidth:e=Math.floor(e),maxHeight:t=Math.floor(t),_idx:0,fitToHeight:!0,disableRestrictedScales:!0},a=[];(_=[]).push(o),a.push(o);var s=r.calculateScale(e,t,!0),u=r.calculateMagnifierScale(0),c=r.calculateMagnifierScale(1)/r.calculateMagnifierScale(0);c=(u-s)/Math.ceil((u-s)/c);for(var d,h=r.height(),f=0;f<n.length;f++){var m=n[f];if(!(m<=t)){var g=100*m/h;if(g>=u)break;var v={maxWidth:0,maxHeight:m,_idx:_.length};a.push(v),g/s>=c&&u/g>=c&&(_.push(v),s=g)}}for(f=0;f<i.length;f++)v={zoomIdx:f,isDefaultMZoom:1===f,isMZoom:!0,_idx:_.length,maxHeight:i[f].H},_.push(v),a.push(v);for(f=0;f<_.length;f++){var y=_[f];y.isDefaultZoom?this._defaultZoom=y:y.isDefaultMZoom&&(this._defaultMZoom=y)}if(this._zooms=_,this._all_zooms=a,this._defaultZoom||(this._defaultZoom=_[0],this._defaultZoom.isDefaultZoom=!0),this._defaultMZoom||(this._defaultMZoom=_[_.length-1],this._defaultMZoom.isDefaultMZoom=!0),this._current){var _=a;if(this._current.isDefaultZoom)d=this._defaultZoom;else if(this._current.isDefaultMZoom)d=this._defaultMZoom;else if(this._current.isMZoom){for(f=_.length-1;f>=0;f--)if(_[f].zoomIdx==this._current.zoomIdx){d=_[f];break}d||(d=this._defaultMZoom)}else{var b;for(f=0;f<_.length;f++){if(_[f].maxHeight>=this._current.maxHeight){d=_[f];break}if(_[f].isMZoom)break;b=_[f]}d||(d=b||this._defaultZoom)}}return this.current(d||this._defaultZoom)}};return t}();function d(e,t){return void 0!==t&&e?e[t]():e}function h(e,t){this._pages=e,this._idx=t,this._views=[],this.isInited(!1)}h.prototype=h.fn={disable:function(){return this.pageInfo(null).isActive(!1).isInited(!1)},setPageType:function(e,t){return this.isSpread(1!=e).isSpreadLeft(2==e).isSpreadRight(3==e),this.pageType(e).isFirst(0==this._idx).isLast(t),this.isLast()&&(this._nextPage=null),this._leftPage=this._rightPage=null,this},pageInfo:function(e,t,n){return 0==arguments.length?this._info:(this._info=e,3==arguments.length&&this.setPageType(t,n),this)},bgcolor:function(){var e=l.bgcolor()||"#fff";return e.length>0&&"#"!=e.charAt(0)&&(e="#"+e),e},isSingleLayer:function(){return l.isSingleLayer()},addView:function(e,t){return t&&(this._views.push(t),e&&(this[e]=function(){return t})),this},leftPageIfSpread:function(e){return d(this._isSpreadRight?this.leftPage():this,e)},rightPageIfSpread:function(e){return d(this._isSpreadLeft?this.rightPage():this,e)},otherSpread:function(e){return d(this._isSpreadLeft?this.nextPage():this._isSpreadRight?this.prevPage():null,e)},nextPage:function(e){var t=this._nextPage;return t||(t=this._nextPage=this._pages.nextPage(this)),d(t,e)},nextSpread:function(e){var t=this.nextPage();return t&&t._isSpreadRight&&(t=t.nextPage()),d(t,e)},prevPage:function(e){var t=this._prevPage;return t||(t=this._prevPage=this._pages.prevPage(this)),d(t,e)},leftPage:function(e){var t=this._leftPage;return t||(t=this._leftPage=this._pages.leftPage(this)),d(t,e)},rightPage:function(e){var t=this._rightPage;return t||(t=this._rightPage=this._pages.rightPage(this)),d(t,e)},calculateZoomScale:function(e,t){return e.isMZoom?this.calculateMagnifierScale(e.zoomIdx):this.calculateScale(e.maxWidth,e.maxHeight,t||!e.disableRestrictedScales)},getZoomInfo:function(e){var t=!1;e.isDefaultZoom&&(this.isPotentiallyRestrictedMode()||this.hasPreviewKey())&&(t=!0);var n=this.calculateZoomScale(e,t),i=this.confirmRequiredForZoom(e,n);if(i&&t&&this.hasPreviewKey()){i=!1;var r=!0}return{zoom:e,scale:n,size:this.calculateSize(n),zoomMode:!0===e.isMZoom,confirmRequired:i,usePreviewKey:r}},calculateScale:function(e,t,n){var i=1e5,r=this;(!e||e<0)&&(e=1e5),(!t||t<0)&&(t=1e5),!r.maxUnrestrictedScale()||r.key()||n||(i=r.maxUnrestrictedScale());for(var o=r.width(),a=r.height(),s=l.heights(),u=s.length-1;u>=0;u--){var c=s[u];if(c<=t){var d=Math.floor(100*c/a);if(d<=i&&(e>=1e5||Math.floor(o*d/100)<=e))return d}}return Math.floor(100*s[0]/a)},calculateThumbScale:function(e,t,n){if(void 0===n&&(n=!1),!e&&!t)return 0;var i,r=this,o=r.width(),a=r.height(),s=r.pageInfo(),u=s.maxUnrestrictedPageSize,c=s.pageSizes;if(!(1!==r.pageNumber()&&n&&u&&(u.W||u.H)&&c&&c.length)){if(e)return Math.floor(100*e/o);if(t)return Math.floor(100*t/a)}return c.forEach((function(n){var r,s;(n.W||n.H)&&(n.W?s=(r=n.W)*a/o:r=(s=n.H)*o/a,u.W&&r>u.W||u.H&&s>u.H||(!i||e&&Math.abs(e-r)<Math.abs(e-i.w)&&r>i.w||t&&Math.abs(t-s)<Math.abs(t-i.h)&&s>i.h)&&(i={w:r,h:s}))})),i?Math.floor(100*i.w/o):0},calculateMagnifierScale:function(e){var t=l.magnifierPageSizes()[e];return t?Math.floor(Math.min(100*t.W/this.width(),100*t.H/this.height())):0},setKeyInfo:function(e,t){t?(this.previewKey(e),this.key(null)):(this.previewKey(null),this.key(e))},hasKey:function(){return"string"==typeof this.key()},hreviewKey()},confirmRequired:function(e){var t=this.maxUnrestrictedScale();return!(t<=0||e<=t||this.hasKey())},confirmRequiredForZoom:function(e,t){return!(e.isDefaultZoom||!this.isPotentiallyRestrictedMode())||this.confirmRequired(t||this.calculateZoomScale(e))},isReeviewKey())},isPotentiallyReictedMode()},calculateSize:function(e){return{width:Math.round(e*this.width()/100),height:Math.round(e*this.height()/100)}},buildUrl:function(e,t,n,r){var o=this.key(),a=this.ver(),s=this.maxUnrestrictedScale();if(r&&r.usePreviewKey&&(o=o||this.previewKey()),n&&i.support.retina&&!this.isPotentiallyRestrictedMode()){var u=this.calculateSize(e),c=this.calculateScale(2.1*u.width,2.1*u.height,!!o);if(c&&c>e){e=c;var d="&retina=2&targetWidth="+u.width}}var h=o&&s>0&&e>s,p=h?i.nd.config.get("imageServers.largePages"):i.nd.config.get("imageServers.pages");return p[this._idx%p.length]+"?file="+l.issue()+"&page="+this.pageNumber()+"&scale="+e+(t?"&layer="+t:"")+(a?"&ver="+a:"")+(h?"&ticket="+encodeURIComponent(o):"")+(d||"")},buildMagnifierUrl:function(e,t,n){var r,o,a,s=this.key(),u=this.ver(),c=this.maxUnrestrictedScale(),d=s&&c>0&&e>c,h=d?i.nd.config.get("imageServers.zoomPages"):i.nd.config.get("imageServers.pages");return t?(r=t.id%h.length,o="&left="+t.l+"&top="+t.t+"&right="+t.r+"&bottom="+t.b,a="fg"):(r=this._idx%h.length,o="",a="bg"),!0===n&&(a=null),h[r]+"?file="+l.issue()+"&page="+this.pageNumber()+"&scale="+e+o+(a?"&layer="+a:"")+(u?"&ver="+u:"")+(d?"&ticket="+encodeURIComponent(s):"")},buildThumbUrl:function(e){return(0,s.p8)(l.issue(),e,this.pageNumber(),this.ver())},buildPictureUrl:function(e,t,n){return(0,s.Uj)(l.issue(),t,n,e,this.ver(ticles:null},layout:function(e){return arguments.length>0?(this._pageLayout=e,this.isInited(!!e),this):this._pageLayout},pageName:function(){return this.layout().PageName},pageNumber:function(){return this.layout().PageNumber},section:function(){return this.layout().SectionName},width:function(){return this.layout().Width},height:function(){return this.layout().He=this._info},areas:function(){for(var e=[],t=this.height(),n=this.width(),i=0;i<t;i+=200)for(var r=Math.min(t,i+200),o=0;o<n;o+=200){var a={l:o,t:i,r:Math.min(n,o+200),b:r,id:e.length};e[a.id]=a}return e}},i.nd.extendObjectWithProperties(h.fn,"isActive,isInited,isCurrent,key,previewKey",!0,!0,!0),i.nd.extendObjectWithProperties(h.fn,"pageType,isSpread,isSpreadLeft,isSpreadRight,isFirst,isLast",!0,!0,!1),i.each("ver,maxUnrestrictedScale".split(","),(function(e,t){h.fn[t]=new Function("return this._info?this._info.field:undefined;".replace(/field/g,t))}));var p=i.nd.viewer.pages=function(e){var t,n,o,a=[],s=[],u=null,l=!1;function d(t){var i=this,r=e.contentIsRtl(),a=i&&i.isActive(),s=n||g.activePages()||[],u=[];u.lastGotoPage=o;for(var c=0;c<s.length;c++){var d=s[c];i?r&&d._idx>i._idx||!r&&d._idx<i._idx?u.push(d):d._idx==i._idx?(a&&u.push(i),i=null):(a&&u.push(i),u.push(d),i=null):u.push(d)}a&&i&&u.push(i),l?n=u:(g.activePagen=null,l=!0}function f(){l=!1,n&&(g.activePages(n),n=null)}function m(){if(e.issue()){t||(t=new c.B);var n=u;i.nd.data.toc.reset(),i.nd.data.toc.pages((function(r){var o=r.length,c=e.getProvider(),l=[];i.each(r,(function(t,n){var r=function(t,n){var r=a,o=t-1,u=r[o];if(!u){var c=e.contentIsRtl(),l=t==n,p=0==o||l&&o%2==1?1:o%2==1?c?3:2:c?2:3;u=new h(g,o,e,t.fun(u))})),u.isActive(!1),u.isActiveChange(d),u.setPageType(p,l),r.push(u)}return u}(n.PageNumber,o);r.layout(n),r.pageInfo(c.getPageInfo(n.PageNumber)),n.Articles&&(l=l.concat(n.Articles))})),e.articles(l),e.layoutLoaded(),g.pagesCount(o),(c.requestPageKeys?c.requestPageKeys(!0):Promise.resolve()).finally((function(){n===u&&(g.loaded(!0),g.loading(!1),t.resolve(),t=null)}))}))}}e.issueLoading((function(){g.pagesCount(0).loaded(!1).activePages([]),g.loading(!0),function(e,t){t=t||[];for(var n=0,i=a.length;n<i;n++){var r=a[n],o=r.disable;o&&o.apply(r,t)}}(),e.articles(null),a.length=0,t&&t.reject(new Error("issueLoading was called while previous load op was in progress. ViewerApp state was reset.")),t=new c.B,u=(new Date).getTime()})),e.issueLoaded((function(){m()}));var g={startActivePageValidation:function(){p()},finishActivePageValidation:function(){f()},setActivePageNumbers:function(e){p();for(var t=this.activePages(),n={},i=e.length-1;i>=0;--i){var r=e[i];(o=this.getPage(r)).isActive(!0),n[r]=!0}for(i=t.length-1;i>=0;--i){var o;n[(o=t[i]).pageNumber()]||o.isActive(!1)}f()},firstPage:function(){return this.pagesCount()>0?a[0]:null},lastPage:function(){return a[this.pagesCount()-1]},nextPage:function(e){return e&&!e.isLast()?a[e._idx+1]:null},prevPage:function(e){return e&&!e.isFirst()?a[e._idx-1]:null},mostLeftPage:function(){return this[e.contentIsRtl()?"lastPage":"firstPage"]().leftPageIfSpread()},mostRightPage:function(){return this[e.contentIsRtl()?"firstPage":"lastPage"]().rightPageIfSpread()},leftPage:function(t){return this[e.contentIsRtl()?"nextPage":"prevPage"](t)},rightPage:function(t){return this[e.contentIsRtl()?"prevPage":"nextPage"](t)},getPageByIdx:function(e){return aturn a[e-eturn a||[]},getViews:function(e){return r.map(this.getPages(),(function(t){return t[e]()}))},getFirstActivePage:function(){var e,t=this.activePages();return t&&(e=t).length>0?e[0]:void 0},getLastActivePage:function(){var e,t=this.activePages();return t&&(e=t).length>0?e[e.length-1]:void 0},resetKeyInfos:functiont.key(null)}))},addViewFactory:function(e,t){return e&&t&&(s.push({name:e,fun:tiew(e,t(i))})),e=t=void 0),this},gotoToPage:function(e,t){var n=i.Event("gotoPageCalled");return n.articleId=t,"number"==typeof e?e=this.getPage(e):"string"==typeof e&&(e=this.getPage(parseInt(e,10))),o=n.page=e,this.fireGotoPageCale.resolve()},loadToc:m};return i.nd.extendObjectWithEvents(g,"gotoPageCalled"),i.nd.extendObjectWithProperties(g,"pagesCount,loaded,loading,activePages",!0,!0,!0),g}(l);l.pages=p;var f=p;t.Z=l},10426:function(e,t,n){"use strict";var i=n(40180),r=n(25371),o=n(59197),a=n(4169),s=n(7287),u=n(46671),c=n(70464),l=n(34336),d=n(13395),h=n(46720),p=n(82641),f=n(62490),m=u.Z.view,g=function(){function e(e){void 0===e&&(e={}),this._context=new r.Z,this._defaultItemPreviewSizeFunction="generalArticle",this._onlineItemsLoader=p.F1,this._enableHistory=!1,this._builderConfig={},this.params=e,this.viewName=null}return e.prcontainer=e},e.prototype.show=function(e){r.Z.current=this._context;var t=(0,i.assign)({},e);e&&e.ignoreDataReset||this._contentProvider.reset(),this._builder.reset(),this._controller.enable().show(t)},e.prototype.reset=function(){this._contentProvider.reset()},e.prototype.applyFilter=function(){this.reset()},e.prototype.disable=function(){this._controller.disable()},e.prototype.hide=function(){this._controller.hide()},e.prototype.visibleArticles=function(){this._controller.visibleArticles()},e.prototype.firstAvailableArticle=function(){return this._controller.firstAvailableArticle()},e.prototype.firstAvailableArticleToListen=function(){return this._controller.firstAvailableArticleToListen()},e.prototypsetState(e)},e.prototype.getLeftPanelConfig=function(){var e=d.Z.getPanelConfig(this._viewConfig);return this.params.issueIntroDisabled=!!e.issueIntroDisabled,e},e.prototype.saveViewConfig=function(e){this._viewConfig=e,h.Z.global.trigger("viewUrlChanged",this._viewConfig)},e.prototype.getViewConfig=function(){return this._viewConfig},e.prototype.showView=function(e){return this.show(e),Promise.resolve()},Object.defineProperty(e.prototype,"_contentProvider",{get:function(){return this.__contentProvider||this._createAll(),this.__contentProvider},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_builder",{get:function(){return this.__builder||this._createAll(),this.__builder},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_view",{get:function(){return this.__view||this._createAll(),this.__view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_controller",{get:function(){return this.__controller||this._createAll(),this.__controller},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_statsMtatsManager},enumerable:!1,configurable:!0}),e.prototype._onViewStateChanged=function(e,t){if(t.id){var n={itemId:t.id,type:t.type,expanded:t.expanded,articleHistoryToken:t.articleHistoryToken||0,currentArticlePosition:t.articlePosition};l.Z.updateState(n)}},e.prototype._createContentProvider=function(){var e=new o.Z;return e.onlineListLoader=this._onlineListLoader,e.onlineItemsLoader=this._onlineItemsLoader,e},e.prototype._createBuilder=function(){var e=this._builderConfig;return e.itemPreviewSizeFunction||(e.itemPreviewSizeFunction=a.Z.get(this._itemPreviewSizeFunctionConfig,this._defaultItemPreviewSizeFunction)),new s.Z(e)},e.prototype._createView=function(){return new m(this._container,this._context)},e.prototype._createController=function(e,t,n,i){return new c.Z(e,t,n,i).on("viewStateChanged",this._onViewStateChanged.bind(this))},e.prototype._createStatsManager=function(e,t){return new f.Z(t,this.viewName,e,this._enableHistory)},e.prototype._createAll=function(){var e=this.__contentProvider=this._context.contentProvider=this._createContentProvider(),t=this.__builder=this._context.textViewColumnsBuilder=this._createBuilder(),n=this.__view=this._createView();this.__controller=this._context.textViewController=this._createController(e,t,n,this.params),this.__statsManager=this._createStatsManager(e,n)},e}();t.Z=g},28749:function(e,t,n){"use strict";n.d(t,{Z:function(){return ot}});var i=n(60231),r=n(40180),o=n(40605),a=n(4169),s=n(92912),u=n(22970),c=n(20384),l=n(46720),d=n(88769),h=n(24458),p=n(17447),f=n(14347),m=n(14003),g=n(34336),v=n(46046),y=n(66353),_=n(97781),b=n(43389);function w(e,t,n){var i,o,a,s,l,d,h=this,p=c(t);function f(e,t){(0,r.forEach)(e,(function(e){var n=e.style;n.webkitTransform=t,n.MsTransform=t,n.msTransform=t,n.MozTransform=t,n.OTransform=t,n.transform=t}))}function m(e){d||(e=0),b.v.csstransforms3d?f(p,"translate3d(".concat(e,"px, 0, 0)")):f(p,"translate(".concat(e,"px,0)"))}function g(e,t){var n=(0,r.isString)(t)?t:"".concat(t,"ms");(0,r.forEach)(e,(function(e){var t=e.style;t.webkitTransitionDuration=n,t.MsTransitionDuration=n,t.msTransitionDuration=n,t.MozTransitionDuration=n,t.OTransitionDuration=n,t.transitionDuration=n}))}h.setPanelVisibility=function(e){var t;if(s&&s.wrapperEl&&p){var n=p.width();e?(m(0),t=n):(m(-n),t=0),s.wrapperEl&&c(s.wrapperEl).css("padding-left","".concat(t,"px"))}},h.enablePanel=function(e){d=e,m(0)},h.panelWidth=function(){return p.width()},h.getSwiper=function(){return s},function(t){var n=(0,u.pi)((0,u.pi)({},t),{on:(0,u.pi)((0,u.pi)({},t.on),{touchStart:function(){l&&!o&&(i=l.position().left,o=!0,g(p,0))},se){o||(a=e)},setTranslate:function(e){if(!o)if(e<0){var t=Math.floor(e-i);if(0!==t&&p&&p.length){var n=p.position().left,r=Math.round(n+t);r>0&&(r=0),r!==n&&(g(p,a),m(r))}}else g(p,0),m(0)},touchEnd:function(){o=!1,l&&(i=l.position().left)},progress:function(){if(p&&0!==p.length&&l){var e=l.position().left,t=Math.floor(e-i);if(0!==t){var n=p.position().left,r=p.width(),o=Math.round(n+.6*t);o<-r&&(o=-r),o>0&&(o=0),o!==n&&(a=0,m(o),i=e)}}},transitionEnd:function(){l&&(i=l.position().left)}})});s=new _.Z(e.containerSelector,n),l=c(s.wrapperEl)}(n)}var C,I,P,x=function(){function e(e){this.options=(0,r.extend)({container:"",cellWidth:i.observable(0),spacer:20,forceNumRows:0},e),this.container=c(this.options.container),this.geometry={}}return e.prototype.minCellHeight=function(){return.9*this.options.cellWidth()},e.prototype.mcellWidth()},e.prototype.updateGeometry=function(e){this.container=c(e?"".concat(e," ").concat(this.options.container):this.options.container);var t=this.container.find(".hub-section-content");return this.geometry.hContent=t.length>0?t.height():0,this.geometry.hContent||(this.geometry.hContent=this.container.height()),this.geometry.numRows=Math.max(Math.floor(this.geometry.hContent/(this.minCellHeight()+this.options.spacer)),Math.floor(this.geometry.hContent/(this.maxCellHeight()+this.options.spacer)))||1,this.options.forceNumRows&&(this.geometry.numRows=Math.min(this.options.forceNumRows,this.options.forceNumRows)),this.geometry.hGrid=this.geometry.numRows>0?Math.floor((this.geometry.hContent+this.options.spacer)/this.geometry.numRows):0,this.geometry.wGrid=this.options.cellWidth()+this.options.spacer,this.container},e.prototype.place=function(e,t,n,i){var o=this;if(this.updateGeometry(),this.geometry.hContent){t=(0,r.isUndefined)(t)?0:t,n=(0,r.isUndefined)(n)?0:n;var a=t;if(this.geometry.numRows>0){var s=this.geometry.hGrid-this.options.spacer,u=this.geometry.wGrid-this.options.spacer;(0,r.forEach)(e,(function(e,i){var r=c(e),a=i-n;if(!(a<0)){var l=Math.floor(a/o.geometry.numRows),d=a%o.geometry.numRows;r.css({top:d*o.geometry.hGrid,left:t+l*o.geometry.wGrid,height:s,width:u}),r.find(".page3-thumb").css("max-height",s),r.find("img")is-hidden")}))}}));var l=Math.ceil((e.length-n)/this.geometry.numRows);a=t+l*this.geometry.wGrid-this.options.spacer}!v.Z.isCompactScreen()&&(0,r.isFunction)(this.panelWidth)&&(a+=this.panelWidth()),i?this.container.find(i).width(a):this.container.width(a),this.geometry.containerWidth=a}},e}(),S=x,T=!1,k=function(e){function t(t){var n=this,o=window.navigator.userAgent.match(/Firefox\/(\d+)/),a=o&&o.length&&o.length>1,s=(0,r.extend)({container:"",keyboardControl:!1,mousewheelControl:!0,slidesPerView:"auto",freeMode:!0,grabCursor:!0,mousewheelSensitivity:a?8:1,cellWidth:(0,r.isFunction)(t.thumbWidth)?t.thumbWidth:i.observable(t.thumbWidth)},t);return(n=e.call(this,s)||this).cfg={frameSize:100},n.ignoreMouseClick=!1,n._busy=!1,n._isRenderingEnabled=i.observable(!0),n.isRenderingEnabled=i.computed({read:n._isRenderingEnabled,owner:n}),c(document).on("keypress",(function(e){n._onKeyPress(e)})),c(document).on("keyup",(function(e){n._onKeyUp(e)})),n.swiper=null,n}return(0,u.ZT)(t,e),t.prototype.onMouseDown=function(e){e&&"mousedown"===e.type&&(C=e.clientX,I=e.clientY,this.ignoreMouseClick=!1),T=!0},t.prototypeouseClick=T},t.prototype.onMouseUp=function(e){T=!1,e&&"mouseup"===e.type&&(this.ignoreMouseClick=Math.abs(C-e.clientX)>3||Math.abs(I-e.clientY)>3)},t.prototype.onResize=function(){},t.prototype.setPanelVisibility=function(e){this._lastVisibility=e},t.prototype.panelWidth=function(){return 320},t.prototype.update=function(e){this.initSwiper()&&this.swiper.update&&(this.swiper.update(e),this.swiper.lazy&&this.swiper.lazy.load())},t.prototype.setMode=function(e){var t=this;this.options.forceNumRows=e===d.ZP.catalogViewType.newsstand?1:0,(0,r.forEach)(thisorceNumRows}))},t.prototype.enableRendering=function(e){var t=this;this._isRenderingEnabled(!!e),this.sections&&(0,r.forEach)(thisgEnabled())}))},t.prototype.initSwiper=function(){var e=this;if(!this.swiper&&c(this.options.container).length>0){this.mover=new w({containerSelector:this.options.container},".store-panel-navmenu",this.options),this.swiper=this.mover.getSwiper(),this.swiper.on("touchStart",this.onMouseDown.bind(this)),this.swiper.on("touchMove",this.onMouseMove.bind(this)),this.swiper.on("touchEnd",this.onMouseUp.bind(this)),this.swiper.on("resize",this.onResize.bind(this)),this.setPanelVisibility=this.mover.setPanelVisibility,this._lastVisibility&&this.setPanelVisibility(this._lastVisibility),delete this._lastVisibility,this.panelWidth=this.mover.panelWidth;var t=c(this.options.container);t.on("mousedown touchstart",this.onMouseDown),t.on("mouseup touchend",this.onMouseUp),t.on("mousemove",this.onMouseMove),tl(e.swiper)}))}return this.swiper},t.prototype._onKeyUp=function(e){if(this.initSwiper(),this.swiper&&c(this.swiper.el).is(":visible")&&!c(".pop").is(":visible")){var t;switch(e.keyCode){case 37:t=-c(this.swiper.el).find("._issue_").width();break;case 39:t=c(this.swiper.el).find("._issue_").width()}t&&this._shiftContainer(t)}},t.prototype._onKeyPress=function(e){if(this.initSwiper(),this.swiper&&c(this.swiper.el).is(":visible")&&!c(".pop").is(":visible")&&" "===String.fromCharCode(e.which)){var t=c(this.swiper.el).find(".nd_swiper_container").width(),n=c(this.swiper.wrapperEl).width();n<t&&(e.shiftKey&&(n=-n),this._shiftContainer(n))}},t.prototype._shiftContainer=function(e){var t=this;if(e&&!this._busy){var n=c(this.swiper.el).find(".nd_swiper_container").width()-c(this.swiper.wrapperEl).width(),i=this.swiper.getTranslate(),r=i-e;if(r>0&&(r=0),-r>n&&(r=-n),r!==i){this._busy=!0;var o=100*Math.abs(Math.ceil(e/c(this.swiper.el).find(".sgi").width()));this.swiper.once("transitionEnd",(function(){t._busy=!1})),this.swiper.setTransition(o),this.swiper.setTranslate(r),setTimeout((function(){t._busy&&(t._busy=!1,t.options.onTransitionEnd&&t.options.onTransitionEnd())}),o)}}},t.prototype.rranslate(0)},t.prototype.init=function(){this.initSwiper(),this.onResize()},t.prototype.getMenuMover=function(){return this.mover},t.prototype.setSortMode=function(){},t}(S),A=k,E=function(e){function t(t){var n=this,o=(0,r.extend)({sections:[],shortcuts:[],searchFilter:!1,preloadImages:!1,lazy:!0},t);return(n=e.call(this,o)||this).sections=i.observableArray(),n.sections.subscribe((function(e){(0,r.forEach)(e,(function(e){e&&e.updateParams({cellWidth:n.options.cellWidth})}))}),n),n.init(),n.updateSections(o.sections),n}return(0,u.ZT)(t,e),t.prototype.updateSections=function(e){var t=this,n=this.sections();(0,r.forEach)(e,(function(e){e.options.cellWidth=t.options.cellWidth,e.reload();var i=e.id();(0,r.find)(n,(function(e){return e.id()===i}))||n.push(e)})),n=(0,r.compact)(n),(0,r.forEach)(n,(function(e){l.Z.unbind(e,"onSectionContentChanged"),l.Z.bind(e,"onSectionContentChanged",null,(function(){c(t.options.container).is(":visible")&&t.refreshView()}))})),this.sections(n),this.refreshView()},t.prototype.onResize()},t.prototype.onResize=function(){var e=this;this._debouncedResize||(this._debouncedResize=(0,r.debounce)((function(){var t=v.Z.isCompactScreen()?0:e.panelWidth();(0,r.forEach)(c("".concat(e.options.container," .nd_swiper_container")).children(),(function(n){var i=c(n),o=i.attr("sid"),a=(0,r.find)(e.sections(),(function(e){return e&&e.id()===o}));a&&(a.updateAvailability(),a.isAvailable()&&(a.update(e.options.container),t+=i.outerWidth()+parseInt(i.css("margin-right"),10)))})),c("".concat(e.options.container," .nd_swiper_container")).width(t),e.update(!0),e.update(!0)}),150,{leading:!0,trailing:!0,maxWait:300})),c(this.options.container).is(":visible")&&this._debouncedResize()},t.prototype.invalidate=function(){(0,r.forEach)(i.utils.unwrapObservable(this.sections),(function(e){e.invalidate()}))},t.prototype.forceUniqueViews=function(){var e=this.sections(),t=[];(0,r.forEach)(c("".concat(this.options.container," section")),(function(n){var i=c(n);if(i.is(":visible")){var o=i.attr("sid"),a=(0,r.find)(e,(function(e){return e.id()===o}));a&&(a.options.checkUniqunes&&a.excludeThumbs(t),t=(0,r.reduce)(i.find(".sgi"),(function(e,t){return(0,r.union)(e,[c(t).attr("cid")])}),t))}}))},t.prototype.applySearchFilter=function(e){this.options.searchFilter&&(0,r.forEach)(this.sections(),(function(t){t.applySearchFilter&&t.applySearchFilter(e)}))},t.prototype.setSortMode=function(e){c(this.options.container).is(":visible")&&(0,r.forEach)(thisSortMode(e)}))},t}(A),Z=E,M=n(96389),D=n(89767),L=".nd_swiper_container",N=function(e){return Math.ceil(window.screen.width/e.wGrid)*e.numRows},R=function(e){function t(t){var n=e.call(this,t)||this;return n.options.onTransitionEnd=function(e){n.updateItemsVisibility(e)},n.options.onReachEnd=function(e){n.updateItemsVisibility(e)},n.options.onReachBeginning=function(e){n.updateItemsVisibility(e)},n.options.onMouseWheel=function(e){n.updateItemsVisibility(e)},P=document.createElement("div"),n._firstIndex=0,n.src=[],n.sections=i.observableArray(),n._catalogFilter=null,n.updateSections(t.sections),n.init(),n}return(0,u.ZT)(t,e),t.prototype.updateSections=function(e){var t=this,n=this.sections();(0,r.forEach)(e,(function(e){e.options.cellWidth=t.options.cellWidth,e.reload();var i=e.id();(0,r.find)(n,(function(e){return e.id()===i}))||n.push(e)})),n=(0,r.compact)(n),this.sections(n)},t.prototype.updateItemsVisibility=function(e){var t=this;function n(e,t){return i.applyBindingsToNode(P,{template:{name:"categoryContentTemplate_noslide",data:e}},t),c(P.innerHTML).addClass("autogen")}var r=this.options.context,o=N(this.geometry);if(this.updateGeometry(),!(this.geometry.numRows<=0)){var a=this.container.find(".issues"),s=a.children(),u=r.categoryDataFrame().length;if(0!==u){var l=(a.width()-e.wrapper.width())/2,d=-e.translate-l,h=Math.floor(d/this.geometry.wGrid)*this.geometry.numRows;if(h>0?this._firstIndex+h+(u-1)>=this.src.length&&(h=Math.max(this.src.length-u-1-this._firstIndex,0)):this._firstIndex+h<0&&(h=-this._firstIndex),0!==h){var p=void 0;if(h>0){var f=this._firstIndex+u;a.children().slice(0,h).remove();for(var m=0;m<h;m++){var g=this.src[f+m];p=a.append(n((0,D.B0)(g,this.options.cellWidth()),r))}}else for(s.slice(u+h).remove(),m=-1;m>=h;m--)g=this.src[this._firstIndex+m],a.prepend(n((0,D.B0)(g,this.options.cellWidth()),r));p&&p.length>0&&i.applyBindingsToNode(p[0],{clickAndTouch:function(e,n){t.ignoreMouseClick||(t.ignoreMouseClick=!0,r.onIssueClick(e,n))}});var v=e.translate+h/this.geometry.numRows*this.geometry.wGrid;e.wrapper.transform("translate3d(".concat(v,"px, 0px, 0px)")),this._firstIndex+=h,this.place(this.container.find(".issues").children(),0,0,L)}this._firstIndex+u+2*o>this.src.length&&this._loadNextCatalogChunk()}}},t.prototype.onResize=function(){var e=this;if(this.isRenderingEnabled()){var t=0;(0,r.forEach)(this.sections(),(function(n){c(n.options.container).is(":visible")&&(n.update(e.options.container),t+=n.container.width()+parseInt(n.container.css("margin-right"),10))})),this.updateGeometry();var n=this.container.find(".issues");this.place(n.children(),t,0,L),this.update(!0)}},t.prototype.").remove()},t.prototype.setCitialView()},t.prototyp.onResize()},t.protoitialView()},t.prototype._loadNextCatalogChunk=function(e){var t=this;if(void 0===e&&(e=0),this._catalogFilter){if(this._totalCount>0&&this.src.length>=this._totalCount)return null;var n={filters:this._catalogFilter,orderBy:(0,D.rM)(this._catalogFilter.sortMode),offset:this.src.length};return e>0&&(n.limit=e),(0,M.Rd)(n).then((function(e){t._totalCount=e.meta.totalCount,t.src=(0,r.slice)(t.src,0,e.meta.offset).concat(e.items)}))}return null},t.prototype._loadInitialView=function(){var e=this;this._firstIndex=0,this._totalCount=0,this.src=[],this.container.find(".issues").children().remove(),this.updateGeometry();var t=10*N(this.geometry);this._loadNextCatalogChunk(t).then((function(){e._updateDataFrame((0,r.slice)(e.src,e._firstIndex,t)),e.onResize()}))},t.prototype._updateDataFrame=function(e){var t=tellWidth())}));this.options.context.categoryDataFrame(n);var i=c(this.options.container);if(i.is(":visible")){var r=e?e.length:0;i.find(".nodata").toggle(0===r)}},t.prototype.applySearchFilter=function(e){this._catalogFilter&&e!==this._catalogFilter.text&&(this._catalogFilter.text=e,this._loadInitialView())},t.prototype.setSortMode=function(e){this._catalogFilter&&e!==this._catalogFilter.sortMode&&(this._catalogFilter.sortMode=e,this._loadInitialView())},t}(A),V=R,B=function(e){function t(t){var n=this,o=(0,r.extend)({id:"",numcolumn:2,name:"Unknown",src:[],showtop:!1,subset:!1,checkUniqunes:!0},t);return o.container="section[sid=".concat(o.id,"]"),(n=e.call(this,o)||this).sortMode=d.ZP.catalogSortType.most_popular,n._uniqSubscriptions=[],n._languages=void 0,n._languagesCatalog=void 0,n._isRenderingEnabled=!0,n.dataChanged=!0,n.prevGeometry={},i.isObservable(n.options.src)&&n.options.sre.length:0)})),n.id=i.computed({read:function(){return n.options.id},owner:n}),n.name=i.computed({read:function(){return n.options.name},owner:n}),n.top=i.observable(),n.data=i.observableArray([]),n.count=i.observable(n.options.src.length),n.isAvailable=i.observable(),n.updateUniqnessSubscriptions(),n.load(),n}return(0,u.ZT)(t,e),t.prototype.updateAvailability=function(){this.isAvailable(this.count()>0)},t.prototype..options,e)},t.prototype.enaEnabled=!!e},t.prototype.applyLais.update()},t.prototype.update=function(e){var t=this;if(this.options&&this.options.src){var n=i.utils.unwrapObservable(this.options.src);if(this.count(n.length),this._isRenderingEnabled&&(this.updateGeometry(),this.geometry.hContent&&(this.prevGeometry.hContent!==this.geometry.hContent||this.dataChanged||e))){this.prevGeometry=c.extend(!0,{},this.geometry),this.dataChanged=!1;var o=this.geometry.numRows,a=this.options.numcolumn>0?(this.options.showtop?1:0)+o*this.options.numcolumn:-1,s=a>0?this.options.randomcount?this.options.randomcount:a:n.length;if(this._languages&&this._languages.length>0&&this._languagesCatalog){var u=[];(0,r.every)(n,(function(e){return(0,r.every)(t._languagesCatalog,(function(n){var i,r;return(null===(i=n.cn)||void 0===i?void 0:i.includes(e.index))&&(null===(r=t._languages)||void 0===r?void 0:r.includes(n.iso))&&u.push(e),u.length<s})),u.length<s})),this.options.randomcoth.random()}))}var l=a>0?n.slice(0,a):n,d=0;if(this.options.showtop&&l.length>0){var h=(0,D.B0)(l[0],600,l[0].latestIssue.key);this.top(h),l=l.slice(1);var p=Math.floor(this.geometry.hContent),f=c(this.container.find("._issue_")[0]),m=Math.floor(p*(h.latestIssue.firstPage.width/h.latestIssue.firstPage.height));f.css({top:0,left:0,height:p,width:m}),f.find(".page3-thumb").css("max-height",p),d=f.width()+this.options.spacer}else this.top(void 0);var g=l.map((function(e){return(0,D.B0)(e,t.options.cellWidth(),e.latestIssue.key)}));this.data(g),this.place(this.container.find("._issue_"),d,this.options.showtop?1:0)}}},t.prototype.setDataSrc=function(e){(0,r.isEqual)(this.options.src,e)||(this.options.src=e,this.count(e.length),this.invalidate(),this.update())},t.prototype.invalidate=function(){this.dataChanged=!0,l.Z.trigger("onSectionContentChanged",this)},t.prototype.load=function(){var e=this;this.options.filter&&(this.options.filter.orderBy=(0,D.rM)(this.sortMode),(0,M.Rd)(this.options.frc(t.items)})))},t.prototype.reload=function(){this.invalidate()},t.prototype.excludeThumbs=function(e){e&&(0,r.remove)(this.options.src,(function(t){return(0,r.find)(e,(function(e){return e===t.cid}))}))},t.prototype.updateUniqnessSubscriptions=function(){var e=this;(0,r.forEach)(this._uniqSubscriptions,(function(e){e.dispose()})),this._uniqSubscriptions=[],(0,r.forEach)(this.option(e.update))}))},t.prototype.setSortMode=function(e){this.sortMode=e,this.load()},t.prototype._getUniqueItems=function(e,t){var n=e.slice(0,t);if(this.options.uniquness){var i=t+1,o=[],a=function(){var t=[];o=[];var a=(0,r.map)(n,"cid");if((0,r.forEach)(s.options.uniquness,(function(e){t=(0,r.uniq)((0,r.merge)(t,(0,r.intersection)(a,(0,r.map)(e.data(),"cid"))))})),t.length>0){o=(0,r.remove)(n,(function(e){return(0,r.indexOf)(t,e.cid)>=0}));var u=i+t.length,c=e.slice(i,u);if(0===c.length)return"break";i=u+1,n=n.concat(c)}},s=this;do{if("break"===a())break}while(o.length>0)}return n},t}(S),F=B,O=n(11144),z=n(51165),U={load:function(){return z.Z.get("featuredtitles","GetFeaturedTitlesCids",{})}},H=n(8270),j=(n(42758),n(77004)),W=(n(2175),new c.ndchanged",G)}j.bind("tokenUpdated",q);var G={loader:W,userStateChanged:q,onUserStateChanged:function(e){return c.nd.event.bind(G,"onuserstatechanged",null,e)},userLochanged",G)},onUserLocalesChanged:function(e){c.nd.event.bind(G,"onuserlocaleschanged",null("PDPAuth")},getLatestReadIssues:function(){return c.nd.services.api.get("user","GetLatestReadIseturn t}(e)}))}};c.nd.user=G;var X,Y=G,K=n(20384),J={},$={setProvider:function(e){return U=e,this},cids:function(){return _cids},loaded:function(){return!(!X||"pending"===X.state())},load:function(e){return(!X||e&&"pending"!==X.state())&&(X=new O.B,U.load().then((function(e){J=e||{},K.nd.event.trigger("loaded",$,$),X.resolve({cids:J})})).catch(X.reject)),X.promise()},update:function(e){J=e||{},K.nd.event.trigger("loaded",$,$)}};K((function(){j.bind("tokenUpdated",(function(){$.load(!0)}))}));var Q,ee,te,ne,ie,re,oe,ae,se,ue=Y.FeaturedTitles=$,ce=function(e){function t(t){var n=this,o=(0,r.extend)({shortcuts:i.observableArray(),swiperContainerSelector:".featuredSwiperContainer",checkUniqunes:!1},t);return(n=e.call(this,o)||this).prevGeometry=[],n.shortcuts=i.observableArray(),n.top=i.observable(),n.items=[],n.options.shortcuts.subscribe(n.getActiveShortcuts,n),n.getActiveShortcuts(),n._loadedDeferred=new O.B,n}return(0,u.ZT)(t,e),t.prototype.update=function(e){var t=this;if(this.updateGeometry(),!(0,r.isEqual)(this.prevGeometry,this.geometry)||this.dataChanged||e){this.prevGeometry=c.extend(!0,{},this.geometry);var n=this.geometry.numRows,i=n*this.options.numcolumn,o=(0,r.map)(this.items.slice(0,i),(function(e){return(0,D.B0)(e,t.options.cellWidth(),e.latestIssue.key)}));this.data(o);var a=this.container.find(".hub-ft-shortcuts").height(),s=this.top(),u=Math.min(this.geometry.hGrid*n-this.options.spacer-a,s.latestIssue.firstPage.height*(s.latestIssue.firstPage.width/600));c(this.options.swiperContainerSelector).height(u);var l=this.container.find(".hub-ft-hero");l.height(u),l.find(".page3-thumb").css("max-height",u);var d=l.width()+this.options.spacer;this.place(this.container.find("._issue_"),d,this.options.showtop?1:0)}},t.prototype.setDataSrc=function(e,t){var n;if(this.count(e.length),this.dataChanged=!0,e.length>0&&(n=(0,r.find)(e,(function(e){return null!==e.latestIssue.firstPage&&e.cid.toLowerCase()===t.toLowerCase()}))),n){var i=(0,D.B0)(n,600,n.latestIssue.key);this.top(i)}this.items=e,this.invalidate()},t.prototype.load=function(){return(0,u.mG)(this,void 0,void 0,(function(){var e,t;return(0,u.Jh)(this,(function(n){switch(n.label){case 0:return[4,ue.load()];case 1:return e=n.sent(),[4,Promise.all([(0,M.FH)(e.cids),a.Z.getAsync("catalog.MasterCid")])];case 2:return t=n.sent(),this.setDataSrc(t[0],t[1]),[4,this._loadedDeferred.resolve(this)];case 3:return n.sent(),[2]}}))}))},t.prototype.loaded=function(){return this._loadedDeferred.promise()},t.prototype.getActiveShortcuts=function(){this.shortcuts(this.options.shortcuts().slice(0,3))},t.prototype.setSortMode=function(){},t}(F),le=ce,de=function(e){function t(t){var n=e.call(this,(0,r.extend)({checkUniqunes:!1},t))||this;return n.items=[],n._loadedDeferred=new O.B,n}return(0,u.ZT)(t,e),t.prototypnvalidate()},t.prototype.load=function(){var e=this;f.Z.getLatestReadIssues().then((function(t){var n=(0,u.ev)([],(0,u.CR)(new Set(t.map((function(e){return e.cid})))),!1);(0,M..resolve(e)}))}))},t.prototype.loaded=function(){return this._loadedDeferred.promise()},t.prototype.setSortMode=function(){},t}(F),he=de,pe=function(e){(0,r.assign)(this,{id:e.id,name:e.name||"Unknown",flag:e.flag||!1,type:e.type,rank:e.rank||1,count:i.observable(),slug:e.path||""})},fe=function(e){function t(t){var n=this,o=(0,r.extend)({numcolumn:1,src:i.observableArray(),checkUniqunes:!1},t);return(n=e.call(this,o)||this).shortcuts=i.observableArray(),n.classes=i.observable(),o.classes&&n.classes(o.classes),n}return(0,u.ZT)(t,e),t.prototype.update=function(e){var t=this,n=this.options.src();if(this.count(n.length),n.length){var i=this.updateGeometry(e);if(this.geometry.hContent){this.shortcuts(n.slice(0,2*this.geometry.numRows*this.options.numcolumn));var o=this.geometry.hGrid/2,a=o-this.options.spacer;(0,r.forEach)(i.find(".hub-shortcut"),(function(e,n){var i=n%2,r=Math.floor(n/2)%t.geometry.numRows;c(e).css({top:r*t.geometry.hGrid+i*o,height:a})}))}}},t}(F),me=fe,ge=function(e){function t(t){var n=(0,r.extend)({name:null},t);return e.call(this,n)||this}return(0,u.ZT)(t,e),t.prototype.load=function(){var e=this;this.options.filter&&(this.options.filter.orderBy=(0,D.rM)(this.sortMode),(0,M.Rd)(this.options.filter).then((function(t){t||(t={items:[]}),!e.options.showtop&&e.options.mainPublication&&t.items.unshift(e.options.mainPublication),e.options.src=void 0,e.setDataSrc(t.items)})))},t.prototype.applySearchFilter=function(e){this.options.filter&&this.options.filter.filters&&this.options.filter.filters.text!==e&&(this.options.filter.filters.text=e,this.load())},t}(F),ve=ge,ye=n(53169),_e={id:"",displayName:"Unknown",categoryItemClass:"accordion-item",scrollBarClass:"swiper-scrollbar",swiperContainerClass:"swiper-container"},be=function(e){switch(e){case"group_".concat(ye.LQ.Countries):return"pop-countries";case"group_".concat(ye.LQ.Languages):return"pop-languages";case"group_".concat(ye.LQ.Categories):return"pop-categories";default:return"pop-publicationtypes"}},we=function(){function e(e,t){this.params=(0,r.merge)(_e,e);var n=lone)(e,!0)}));switch(this.params.id){case"group_".concat(ye.LQ.Countries):var o=(0,r.remove)(n,(function(e){return"international"===e.id}));o&&o.length>0&&n.splice(0,0,o[0]);break;case"group_".concat(ye.LQ.Categories):(0,r.forEach)(n,(function(e){return(0,r.extend)(e,{topThumbUrl:i.observable(),publication:{}})}));var a=(0,r.keyBy)(n,"titlePublicationCid");(0,M.FH)((0,r.map)(n,(function(e){return e.titlePublicationCid}))).then((function(e){(0,r.forEach)(e,(function(e){a[e.cid].publication=e;var t=p.ZP.formatDate(e.latestIssue.issueDate,"date","yyyyMMdd");a[e.cid].topThumbUrl((0,D.AZ)(e.cid,t,80))}))}))}(0,r.assign)(this,{id:this.params.id,displayName:this.params.displayName,src:i.observable(n),css_class:be(this.params.id),template:this.params.template})}return e.prototype.initSwiper=function(){if(this.swiper){if(this.swiper.update)try{this.swiper.update(!0)}catch(e){}}else if(this.id){var e="#".concat(this.id),t="".concat(e," .").concat(this.params.swiperContainerClass);if(c(t).length>0){var n=window.navigator.userAgent.match(/Firefox\/(\d+)/),i=n&&n.length&&n.length>1;this.swiper=new _.Z("".concat(e," .").concat(this.params.swiperContainerClass),{scrollbar:"".concat(e," .").concat(this.params.scrollBarClass),direction:"vertical",slidesPerView:"auto",mousewheelControl:!0,freeMode:!0,mousewheelSensitivity:i?8:1})}}},e}(),Ce=we,Ie=[],Pe=[],xe={animationTime:200,menuBodyClass:"navmenu-body",categoryItemClass:"accordion-item",categoryActiveItemClass:"accordion-active",categoryItemTitleClass:"accordion-header",categoryContentClass:"accordion-content",swiperContainerClass:"swiper-container",categoriesTemplate:"categories_categoryItemTemplate",typesTemplate:"types_categoryItemTemplate"},Se=i.observable(),Te=function(e){switch(e){case"group_".concat(ye.LQ.Countries):return xe.countriesTemplate;case"group_".concat(ye.LQ.Languages):return xe.languagesTemplate;case"group_".concat(ye.LQ.Categories):return xe.categoriesTemplate;default:return xe.typesTemplate}},ke=function(e,t,n){var i=new Ce({id:e,displayName:t,template:Te(e)},n);Ie.push(i)},Ae=function(){function e(){var e=this;Q=(0,r.assign)({},xe),this.data=i.observableArray(),this.isAvailable=i.observable(!0),this.isEnabled=!1,this.selectedCategory=i.computed({write:function(t){var n=Se();n&&t&&n.id===t.id||(Se(t),e.onResize(!0))},read:Se,owner:this}),ne={displayName:p.ZP.val("Catalog.Publications"),publicationsCount:"",slug:"~"}}return e.prototype.hide=function(){this.data([]),this.isAvailable(!1),l.Z.trigger("onCatalogMenuChanged",this,{enabled:this.isAvailable(),sources:[]}),this.onResize(!0)},e.prototype.buildCategoryMenu=function(e,t,n){var i=this;if(void 0===e&&(e=[]),void 0===n&&(n=!1),!(0,r.isArray)(e))throw new TypeError("Array expected");this.isEnabled=!1,ee=t,te=e,(0,M.AR)(e,e,t).then((function(e){Ie=[],(0,r.forEach)(e,(function(e){if(e.categories.length>=1){var t=e.categories.map((function(e){var t=(0,r.cloneDeep)(e);return t.sourceCountEnabled=Q.sourceCountEnabled,t}));n&&ke("group_".concat(e.id),e.displayName,[ne]),ke("group_".concat(e.id),e.displayName,t)}})),i.data(Ie),i.selectedCategory(Ie.length>0?Ie[0]:void 0),i.isAvailable(i.data().length>0),l.Z.trigger("onCatalogMenuChanged",i,{enabled:i.isAvailable(),sources:Ie}),i.onResize(!0),i.isEnabled=!0}))},e.prototype.buildDefaultMenuItems=function(e){var t=e.allPublicationsCount||0,n=e.recentlyReadPublicationsCount||0;t>0&&Pe.push({displayName:p.ZP.val("Catalog.AllSources"),publicationsCount:t,slug:"all"}),n>0&&Pe.unshift({displayName:p.ZP.val("Catalog.RecentlyRead"),publicationsCount:n,slug:"recentlyread"})},e.prototype.applySearchFilter=function(e){e!==ee.text&&(ee.text=e,this.buildCategoryMenu(te,ee))},e.prototypenitSwiper()},e.prototype.onResize=function(e){var t=c(".".concat(Q.menuBodyClass));if(0!==t.length){var n=this.selectedCategory();n&&t.find("li li").each((function(e,t){var n=c(t).find(".num").width();c(t).find("em").css("padding-right","".concat(n,"px"))}));var i=t.height()-t.find(".".concat(Q.categoryItemTitleClass)).outerHeight(!0)*Ie.length;t.find(".".concat(Q.categoryContentClass)).each((function(t,r){var o=c(r),a=o.closest(".".concat(Q.swiperContainerClass)),s=o.closest(".".concat(Q.categoryItemClass));n&&s.attr("id")===n.id?(o.show(),e?a.animate({height:Math.min(c(r).height(),i)},{duration:Q.animationTime,easing:"easeOutQuad",complete:function(){var e=Ie[t];if(e){e.initSwiper();var n=a.find(".".concat(Q.categoryContentClass)).children();if(n.length>1){var i=n.eq(0).get(0),r=n.eq(1).get(0);i&&r&&i.scrollIntoView&&(r.scrollIntoView(),i.scrollIntoView())}}}}):a.height(Math.min(i,a.find(".".concat(Q.categoryContentClass)).height()))):(a.height(0),c(r).hide())})),n&&n.initSwiper()}},e.prototype.seegory(e),!1},e.prototype.selectCategoryByType=function(e){var t=(0,r.find)(Ie,(function(t){return t.id===e}));t&&this.selectCategory(t)},e.prototype.getMenuItemRef=function(e,t){var n;if(e&&t){var i=(0,r.find)(Ie,(function(t){return t.id===e}));i&&(n=(0,r.find)(i.src(),(function(e){return e.id===t})))}return n},e}(),Ee=n(3284),Ze=n(3678),Me=n(26049),De="category",Le="home",Ne="supplements",Re="topmagazines",Ve="topfreepublications",Be="featured",Fe="recentlyread",Oe="all",ze={gridThumbWidth:190,smallGridThumbWidth:160,newstandThumbWidth:{xsmall:300,small:400,medium:400,large:600,xlarge:600},defaultSortMode:d.ZP.catalogSortType.most_popular,subsets:["newspapers","magazines","topnewspapers",Re,Ve,Be,Fe,Oe],rootUrl:"catalog",customSectionPrefix:"publications_"},Ue="#Panel_mainPanel",He=!1,je="",We={},qe={name:ye.jl.Rank,order:ye.As.Descending},Ge=function(e){e.search=je,e.catalogView=h.N1.Catalog,e.pathFilters&&(r.forEach(e.oncat(n)]=t})),delete e.pathFilters),g.Z.goView(h.n3.StoreHub,e,!1,!0)},Xe=function(e,t){var n=t.length-1,i=[];r.forEach(t,(function(e,t){var r=["crumb"];0===t&&r.push("first"),t===n&&r.push("last"),i.push('<span class="'.concat(r.join(" "),'" url="').concat(e.url,'">').concat(e.name,"</span>"))})),ie.topBarHeader(i.join("  "));var o=c(".toolbar-title > .crumb");o.off("click"),o.on("click",(function(e){if(v.Z.isCompactScreen())c(Ue).toggleClass("store-navmenu--open");else if(!c(e.target).hasClass("last")){var t=c(e.target).attr("url"),n=r.slice(t.split("/"),1);Ge({pathFilters:n})}})),Me.default.enableActionMenu(e.actionMenuEnable),Me.default.searchMenuText(e.search)},Ye=function(e,t,n){e.pathFilters.length>0?(0,M.e0)(e.pathFilters.join("/")).then((function(i){r.forEach(r.filter(i,{itemType:"Category"}),(function(e){n+="/".concat(e.item.slug),t.push({name:e.item.displayName,url:n})})),Xe(e,t)})):Xe(e,t)},Ke=function(){function e(e){if(ie)return ie;(ie=this).topBarHeader=e,ie.mysuggestions=i.observableArray();var t=i.observable();ie.viewMode=i.computed({write:function(e){t(e),ie.homeContentViewer.enableRendering(e===Le),ie.categoryContentViewer.enableRendering(e===De),ie.supplementsContentViewer.enableRendering(e===Ne)},read:t,owner:this});var n=i.observable(ze.defaultSortMode);return ie.sortViewMode=i.computed({read:n,write:function(e){e!==n()&&(n(e),ie.setContentSortMode(e))}}),ie.categoryDataFrame=i.observableArray(),ie.shortcuts=i.observableArray(),ie.menushortcuts=i.observableArray(),ie.thumbWidth=i.observable(ze.gridThumbWidth),ie.controller=void 0,ie.menu=new Ae,ie}return e.prototype.init=function(){var e=this;return Promise.all([a.Z.loaded(),p.ZP.loaded(),(0,D.RH)()]).then((function(){re=[new pe({id:ye.WD.Newspapers,name:p.ZP.val("v7.Client.Catalog.newspapers"),type:"group_".concat(ye.WD.PublicationTypes),path:"newspapers"}),new pe({id:ye.WD.Magazines,name:p.ZP.val("v7.Client.Catalog.magazines"),type:"group_".concat(ye.WD.PublicationTypes),path:"magazines"})],ie.shortcuts(re),ie.sectionFeatured=new le({id:Be,name:p.ZP.val("v7.Client.Catalog.featured"),showtop:!0,numcolumn:3,shortcuts:ie.shortcuts}),ie.sectionTopMagazines=new F({id:Re,name:(0,y.WU)(p.ZP.val("v7.Client.Catalog.topmagazines"),""),showtop:!0,randomcount:30,filter:{filters:{hasCategories:[ye.WD.Magazines]},orderBy:qe,limit:40}}),ie.sectionRecentlyRead=new he({id:Fe,name:p.ZP.val("v7.Client.Catalog.recentlyread")}),ie.sectionShortcuts=new me({id:"shortcuts",name:p.ZP.val("v7.Client.Catalog.browsecatalog"),src:ie.shortcuts}),ie.sectionSupplements=new ve({id:"supplements",showtop:!0,numcolumn:-1}),ie.sectionMenuShortcuts=new me({id:"menushortcuts",name:p.ZP.val("v7.Client.Catalog.browsecatalog"),src:ie.menushortcuts,classes:"store-hub-shortcuts-menu"});var t=[ie.sectionTopMagazines,ie.sectionFeatured,ie.sectionRecentlyRead,ie.sectionShortcuts,ie.sectionMenuShortcuts];switch(a.Z.get("catalog.sections.freePublications.enabled",!0)&&(ie.sectionTopFreePublications=new F({id:Ve,name:p.ZP.val("v7.Client.Catalog.topfreepublications"),filter:{filters:{isFree:!0},orderBy:qe,limit:40}}),t.push(ie.sectionTopFreePublications)),ie.homeContentViewer=new Z({container:".panelHomeViewSwiper",thumbWidth:ie.thumbWidth,sections:t}),ie.categoryContentViewer=new V({container:".panelCategoryContentSwiper",context:e,thumbWidth:ie.thumbWidth,sections:[ie.sectionMenuShortcuts]}),ie.supplementsContentViewer=new Z({container:".panelSupplementsSwiper",thumbWidth:ie.thumbWidth,searchFilter:!0,sections:[ie.sectionSupplements,ie.sectionMenuShortcuts]}),ie._menuBinding=l.Z.bind(ie.menu,"onCatalogMenuChanged",null,(function(e,t){ie._setMenuShortcuts(t.sources),r.isUndefined(t.enabled)||(ie.homeContentViewer.setPanelVisibility(t.enabled),ie.categoryContentViewer.setPanelVisibility(t.enabled),ie.supplementsContentViewer.setPanelVisibility(t.enabled)),ie._updateLeftMenu()})),l.Z.bind(f.Z,"onuserstatechanged",ie._userStatusChanged),a.Z.get("ui.Catalog.CategorySortOrder.default")){case"alphabeth":ie.sortViewMode(d.ZP.catalogSortType.by_alphabet);break;case"date":ie.sortViewMode(d.ZP.catalogSortType.most_current)}var n=a.Z.get("ui.TopToolbar.ThumbnailSize");return e.setContentViewMode(parseInt(n,10)),Promise.all([(0,M.sd)(),ie.sectionRecentlyRead.loaded()]).then((function(e){var t=(0,u.CR)(e,1)[0].publicationsCount,n={allPublicationsCount:a.Z.get("ui.Catalog.Menu.allSourcesEnable",!0)?t:0,recentlyReadPublicationsCount:a.Z.get("ui.Catalog.Menu.recentlyReadEnable",!0)?ie.sectionRecentlyRead.items.length:0};ie.menu.buildDefaultMenuItems(n),ie.initialized=!0}))}))},e.prototype.dispose=function(){ie.initialized&&((0,D.ve)(),ie._menuBinding.dispose(),l.Z.unbind(f.Z,"onuserstatechanged",ie._userStatusChanged))},e.prototype.isSortMsubset!==Be},e.prototype._userStatusChanged=function(){ie.loadData(We)},e.prototype.loadData=function(e){ie.selectDataByConfig(e),s.ZP.hide(),e.subview!==Le&&He&&(c("#toolbarSearchPanel").find("input").focus().click(),He=!1,Me.default._model.searchMenuHandler.model.initialView="home")},e.prototype.onResize=function(){c(".l-store").is(":visible")&&(ie._updateLeftMenu(),ie.menu.onResize(),ie._activeViewer().onResize())},e.prototype.resetActiveViewerPosition=function(){ie._activeViewer().resetPosition()},e.prototype.selectDataByConfig=function(e){var t,n;We=e,je=c.trim(We.search),We.pathFilters?(null===(t=We.subsets)||void 0===t?void 0:t.includes(We.pathFilters[0]))&&(We.subset=We.pathFilters[0],We.pathFilters=r.slice(We.pathFilters,1)):We.pathFilters=[],ie.viewMode(We.subview),n=We,p.ZP.loaded().then((function(){var e=[],t=ze.rootUrl;e.push({name:p.ZP.val("TopToolbar.StoreHubTitle"),url:t}),n.subview===Ne?(0,M.e0)(n.issue_name,"Publication").then((function(i){i&&i.length>0&&"Publication"===i[0].itemType&&(t+="/".concat(i[0].item.slug,"/supplements"),e.push({name:i[0].item.name,url:t})),Ye(n,e,t)})):(We.subset&&(t+="/".concat(We.subset),e.push({name:(0,y.WU)(p.ZP.val("v7.Client.Catalog.".concat(We.subset)),""),url:t})),Ye(n,e,t))}));var i=[];We.pathFilters&&We.pathFilters.length>0?(0,M.e0)(We.pathFilters[We.pathFilters.length-1]).then((function(e){i=r.filter(e,{itemType:"Category"}),ie._buildView(i)})):ie._buildView(i)},e.prototype.setConSortMode(e)},e.prototype.setContentViewMode=function(e){switch(e){case d.ZP.catalogViewType.newsstand:ie.thumbWidth((t=c("html")).hasClass("screen-xsmall")?ze.newstandThumbWidth.xsmall:t.hasClass("screen-small")?ze.newstandThumbWidth.small:t.hasClass("screen-medium")?ze.newstandThumbWidth.medium:t.hasClass("screen-large")?ze.newstandThumbWidth.large:ze.newstandThumbWidth.xlarge);break;case d.ZP.catalogViewType.small_grid:ie.thumbWidth(ze.smallGridThumbWidth);break;case d.ZP.catalogViewType.grid:ie.thumbWidth(ze.gridThumbWidth)}var t;ie._activeViewer().setMode(e),ie.onResize()},e.prototype.applySearchFilter=function(e,t){this._debouncedApplySearchFilter||(this._debouncedApplySearchFilter=r.debounce((function(e,t){switch(je=c.trim(e).toLowerCase(),ie.viewMode()){case Le:(0,y.hr)(je)||(He=!0,Ge({subset:Oe,search:je}));break;case De:""===je&&"home"===t?Ge():(ie.categoryContentViewer.applySearchFilter(je),ie.menu.applySearchFilter(je));break;case Ne:ie.supplementsContentViewer.applySearchFilter(je)}return!1}))),this._debouncedApplySearchFilter(e,t)},e.prototype.addFilter=function(e){if(ie.menu.isEnabled){ie.menu.isEnabled=!1;var t=e.slug.split("/");r.forEach(t,(function(e){"~"===e?delete We.pathFilters:".."===e?We.pathFilters.pop():We.pathFilters.push(e)})),Ge(We)}return!1},e.prototype.onIssueClick=function(e,t){if(je="",We.search="",Me.default.resetSearchText(),e)ie._navigateToIssue(e);else{var n=c(t.target).closest(".sgi").attr("cid");(0,M.FHIssue(e[0])}))}return!1},e.prototype.onShortCutClick=function(e){var t=ie.menu.getMenuItemRef(e.type,e.id);t?ie.addFilter(t):(ie.menu.selectCategoryByType(e.type),c(Ue).toggleClass("store-navmenu--open"))},e.prototype.showSection=function(e){var t=e.id(),n={},i=t.split("_");return(n=i.length>1?{category0:e.options.subcategory,filter0:i[1]}:{subset:t}).search=je,Ge(n),!1},e.prototype._activeViewer=function(){switch(ie.viewMode()){case De:return ie.categoryContentViewer;case Ne:return ie.supplementsContentViewer;default:return ie.homeContentViewer}},e.prototyMenuMover()},e.prototype._updateShortcuts=function(){var e=ie.shortcuts();r.forEach(e,(function(e){var t=ie.menu.getMenuItemRef(e.type,e.id);t&&e.count(t.publicationsCount)})),ie.sectionShortcuts.update()},e.prototype._setMenuShortcuts=function(e){var t=[];r.forEach(e,(function(e){var n=new pe({id:e.id,name:e.displayName,type:e.id});t.push(n)})),ie.menushortcuts(t),ie.sectionMenuShortcuts.update(ie._activeViewer().options.container),ie._activeViewer().onResize()},e.prototype._updateUserSpecificData=function(){var e=this;return f.Z.isLogin()?Ee.Z.load().then((function(e){ie.onResize()})):Promise.all([(0,M.AR)([ye.LQ.Countries,ye.LQ.Languages]),Ze.U()]).then((function(t){var n=(0,u.CR)(t,2),i=(0,u.CR)(n[0],2),o=i[0],a=i[1],s=n[1].locales,c=r.keyBy(o.categories,"iso"),l=r.keyBy(a.categories,"iso"),d=[],h=[];r.forEach(s,(function(e){c[e.country]&&d.push(c[e.country]),l[e.language]&&h.push(l[e.language])}));val[e.iso].id})),f=r.map(d,(function(e){return new F({id:ze.customSectionPrefix+e.slug,name:e.name,filter:{filters:{hasCategories:[e.id],inCategories:p},orderBy:"RankDesc",limit:40}})}));e._updateSuggestedSections(f),e._extendShortcutsByCountries(f)}))},e.prototype._updateSuggestedSections=function(e){var t=ie.mysuggestions(),n=t.length===e.length&&r.reduce(t,(function(t,n,i){return t&&n.id()===e[i].id()&&r.isEqual(n.options.filter,e[i].options.filter)}),!0);n||ie.mysuggestions(e),ie.homeContentViewer.updateSections(e)},e.prototype._extendShortcutsByCountries=function(e){var t=r.map(e,(function(e,t){return new pe({id:e.id,name:e.name,type:"group_".concat(ye.WD.Countries),flag:e.iso,rank:t,path:e.slug})})),n=re.concat(t),i=ie.shortcuts();i.length===n.length&d===n[i].id}),!0)||ie.shortcuts(n),ie._updateShortcuts()},e.prototype._upeLeftMenu()},e.prototype._disableLeftMenu=function(){c(Ue).removeClass("store-navmenu--open");var e=ie._getMover();e&&(e.setPanelVisibility(!1),e.enablePanel(!1))},e.prototype._enableLeftMenu=function(){if(ie.menu.isAvailable()){var e=ie._getMover();e&&(e.setPanelVisibility(!0),e.enablePanel(!0))}},e.prototype._navigateToIssue=function(e){ie.viewMode()!==Ne&&e.supplements.length>0?Ge({issue_name:e.slug}):(Me.default.enableActionMenu(!0),g.Z.updateState({search:je}),m.Z.showNewspaper(e.cid))},e.prototype._buildView=function(e){var t=""!==je&&void 0;switch(ie.viewMode()){case Ne:var n=[We.issue_name];ie.sectionSupplements.options.showtop=0===We.pathFilters.length,t=0!==We.pathFilters.length||void 0,Array.prototype.push.apply(n,We.pathFilters),(0,M.e0)(n.join("/"),"Publication").then((function(e){var n=r.filter(e,{itemType:"Publication"}),i=r.first(r.map(n,(function(e){return e.item.cid}))),o=r.map(r.filter(e,{itemType:"Category"}),(function(e){return e.item.id}));if(n.length>0){var a=r.assign({},n[0].item);a.supplements=[],0===r.intersection(a.categories,o).length&&(a=void 0),ie.sectionSupplements.options.mainPublication=a}ie.sectionSupplements.options.filter={filters:{mainCid:i,hasCategories:o,text:je,isSupplement:t},orderBy:qe},ie.sectionSupplements.load(),ie.menu.hide()}));break;case De:ie.categoryContentViewer.clearContent();var i=ie.sortViewMode(),o=r.map(e,(function(e){return e.item.id})),a=r.map(e,(function(e){return e.item.name}));switch(We.subset){case Oe:ie.categoryContentViewer.setCatalogFilter({text:je,isSupplement:t,hasCategories:o,sortMode:i}),ie.menu.hide();break;case Be:ue.load().then((function(t){(0,M.Rd)({filters:{cids:t.cids,hasCategories:o,sortMode:i}}).then((function(e){var t=e.items.map((function(e){return(0,D.B0)(e,ie.thumbWidth())}));ie.categoryContentViewer.setContent(t)})),ie.menu.buildCategoryMenu(e,{cids:t.cids,isSupplement:!1})}));break;case Fe:f.Z.getLatestReadIssues().then((function(e){var t=(0,u.ev)([],(0,u.CR)(new Set(e.map((function(e){return e.cid})))),!1);t.length>0&&(0,M.Rd)({filters:{cids:t,hasCategories:o,sortMode:i}}).then((function(e){var t=umbWidth())}));ie.categoryContentViewer.setContent(t)})),ie.menu.hide()}));break;case Re:var s=[ye.WD.Magazines];Array.prototype.push.apply(s,e),ie.categoryContentViewer.setCatalogFilter({hasCategories:s,text:je,isSupplement:t,sortMode:i}),ie.menu.buildCategoryMenu(e,{hasCategories:[ye.WD.Magazines],text:je,isSupplement:t});break;case Ve:ie.categoryContentViewer.setCatalogFilter({isFree:!0,text:je,isSupplement:t,hasCategories:o,sortMode:i}),ie.menu.buildCategoryMenu(e,{isFree:!0,text:je,isSupplement:t});break;default:ie.categoryContentViewer.setCatalogFilter({hasCategories:o,text:je,isSupplement:!1,sortMode:i}),ie.menu.buildCategoryMenu(a,{text:je,isSupplement:!1},We.addPublicationsMenu||!1)}break;default:ie.menu.buildCategoryMenu([],{isSupplement:!1})}ie._activeViewer().onResize()},e.prototype._getTopCategories=function(e,t){var n=[];return r.forEach(e,(function(e){r.isUndefined(n[e.id])?n[e.id]=1:n[e.id]++})),e=r.uniq(e),r.slice(r.sortBy(e,(function(e){return-n[e.id]})),0,t)},e}(),Je=Ke,$e=n(61855),Qe=n(14886),et=n(20384),tt={},nt="catalog";tt.init=function(e){(oe=e.elm()).addClass("l-store")},tt.showView=function(e){return et("#Panel_mainPanel").addClass("store-navmenu--open"),(se=r.extend({subview:"home",header:"TopToolbar.StoreHubTitle",actionMenuEnable:!0},e)).maxCategoriesInPath=6,Promise.resolve(et.nd.templates.loaded()).then((function(){s.ZP.show(),ae?(ae.resetActiveViewerPosition(),ae.loadData(se)):(ae=new Je(tt.topBarConfigOptions.header)).init().then((function(){ae.controller=tt,et.nd.templates.renderTo("v7.Client.StoreHub",ae,oe),o.ZP.resize(r.throttle((function(){et.nd.viewer.views.getActiveViewName()==h.n3.StoreHub&&ae.onResize()}),100)),ae.loadData(se)}))})),se&&se.callback&&se.callback(),Promise.resolve()},tt.reset=tt.showVie("hideAll")},tt.hide=et.nd.noop,tt.registerRoutes=function(e){function t(e){for(var t=[],n=0;n<6&&e["filter"+n];n++)t.push(e["filter"+n].toLowerCase()),delete e["filter"+n];var i=t.length>0?t[0]:null;"topfreepublications"!==i&&"topmagazines"!==i&&"recentlyread"!==i&&"featured"!==i&&"mypublications"!==i&&"all"!==i||(e.subset=i,t.shift()),e.pathFilters=t}for(var n=[],i=0;i<6;i++)n.push("{filter"+i+"}");var r=new Qe.i(h.n3.StoreHub);for(i=6;i>0;i--){var o=nt+"/{issue_name}/supplements/"+n.slice(0,i).join("/");e.addRoute({name:"catalog_supplements_category_type"+i,template:o,defaults:{viewName:h.n3.StoreHub},constraints:{viewName:r},executeWith:function(e){e.subview="supplements",e.issue_name=decodeURI(e.issue_name),t(e)}})}for(e.addRoute({name:"catalog_supplements",template:nt+"/{issue_name}/supplements",defaults:{viewName:h.n3.StoreHub},constraints:{viewName:r},executeWith:function(e){e.subview="supplements",e.issue_name=decodeURI(e.issue_name),t(e)}}),i=5;i>0;i--)o=nt+"/"+n.slice(0,i).join("/"),e.addRoute({name:"catalog_category_type"+(i+1),template:o,defaults:{viewName:h.n3.StoreHub},constraints:{viewName:r}egory",t(e)}});e.addRoute({name:"catalog",template:nt,defaults:{viewName:h.n3.StoreHub,thumbViewMode:a.Z.get("ui.TopToolbar.ThumbnailSize","2")},constraints:{viewName:r},executeWith:function(e){e.subview=e.subset||e.search?"category":"home",e.search||et.nd.viewer.topBar.resetSearchText()}})};var it=i.observable(d.ZP.catalogSortType.mAvailable()}tt.sortViewMode=i.computed({read:it,write:function(e){ae&&(ae.sortViewMode(e),it(ae.sortViewMode()))}}),tt._thumbViewMode=i.observable(),tt.thumbViewMode=i.computed({read:tt._thumbViewMode,write:function(e){if(e!=tt._thumbViewMode()){var t=et(".panelCategoryContentSwiper .store-grid");switch(t.removeClass("store-grid-grid store-grid-smallgrid store-grid-newsstand"),e){case d.ZP.catalogViewType.small_grid:t.addClass("store-grid-smallgrid");break;case d.ZP.catalogViewType.newsstand:t.addClass("store-grid-newsstand");break;case d.ZP.catalogViewType.grid:default:t.addClass("store-grid-grid")}tt._thumbViewMode(e),ae.setContentViewMode(e)}}Filter(e,t)},ttde():void 0},tt.topBarConfigOptions={},tt.getTopBarConfig=function(){return tt.topBarConfigOptions={backEnable:!0,isTitleDisabled:!0,actionMenuEnable:!0,actionMenuOptions:{sort:[d.ZP.catalogSortType.by_alphabet,d.ZP.catalogSortType.most_popular,d.ZP.catalogSortType.most_current],view:[d.ZP.catalogViewType.list,d.ZP.catalogViewType.small_grid,d.ZP.catalogViewType.grid,d.ZP.catalogViewType.newsstand]},actionMenuController:new $e.Z({sort:tt.sortViewMode,view:tt.thumbViewMode,isSortMenuAvailable:rt}),header:i.observable(""),headerClass:"toolbar-storetitle breadcrumbs"}};var ot=tt},42777:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return re}});var i=n(20384),r=n(40180),o=n(22091),a=n(79913),s=n(4169),u=n(53707),c=n(71078),l=n(62918),d=n(84672),h=n(80119),p=n(2099),f=n(24995),m=n(239),g=n(54215),v=n(88769),y=n(46720),_=n(14347),b=n(13395),w=function(){function e(e){var t=this;this.page=null,this.keyChangeSubscription=null,this.pageCont=e,this.pageCont.onattached((function(){return t.onPageAttached()})),this.pageCont.onshowed((function(){return t.onPageShowed()})),this.pageCont.ondettached((function(){return t.onPageDettached()}))}return e.prototype.onPageAttached=function(){var e=this;this.page=this.pageCont.getPage(),this.keyChangeSubscription=y.Z.bind(this.page,"keyChange",(function(){return e.refresh()}))},e.prototype.onPageDettached=function(){this.keyChangeSubscription&&(this.keyChangeSubscription.dispose(),this.keyChangeSubscription=null),this.hide(),this.page=null},e.prototype.onPageShowed=function(){this.refresh()},e.prototype.refresh=function(){this.page&&(this.page.isPotentiallyRestrictedMode()?this.hide():this.show())},e.prototype.show=function(){this.getOrCreateElm().show()},e.prototype.hide=function(){this.elm&&this.elm.hide()},e.prototype.showBookmark=function(e){this.elm&&(e?this.elm.addClass("bookmarked"):this.elm.removeClass("bookmarked"))},e.prototype.getOrCreateElm=function(){var e=this;if(!this.elm){var t=this.pageCont.getLayersContainer().parent();this.elm=i("<span><span/></span>").css("zIndex",3).addClass("art-options-call").hide().tap((function(t){return e.showContextMenu(t)})).appendTo(t)}return this.elm},e.prototype.showContextMenu=function(e){if(!this.pageCont||!this.page)return!1;var t=p.Z.issue(),n=this.page.pageNumber(),i={previewType:v.BQ.page,issueName:p.Z.contentName(),issueDate:p.Z.issueDate(),getPageInfo:function(e){return p.Z.pages.load().then((function(){var t=p.Z.pages.getPage(e),n=t&&t.layout();if(n)return{height:n.Height,width:n.Width}}))}},r={page:n,issue:t,newspaperName:p.Z.contentName(),preview:i};return new m.Z(v.tk.pageView,r).show({position:{x:e.pageX||e.touchX||0,y:e.pageY||e.touchY||0,align:{y:g.x.Bottom}}}),!1},e.protois.elm=null},e}(),C=n(22970),I=n(25438),P=n(70803),x=n(71357),S=n(95766),T=n(47211),k=n(74981),A=n(70737),E=n(78964),Z=n(34511),M=n(84066),D=n(14003),L=n(17696),N=n(8871),R=function(){function e(){var e=this;this.readyToRender=ko.observable(!0),this.cid=p.Z.cid(),this.isLoggedIn=ko.observable(_.Z.isLogin()),this.userEmail=ko.observable(""),this.userNickname=ko.observable(""),this.userHasActiveSubscription=ko.observable(!1),this.refreshUserInfo(),_.Z.onUserS,[2]}}))}))})),this.issue=p.Z.issue()}return e.prototype.getThumbnailUrl=function(e,t){if(!e)throw new Error("'cid' was not specified.");if(4!==e.length)throw new Error("'cid' must have 4 characters.");if(t<=0)throw new Error("'height' must be greater than 0.");return M.Z.getThumbUrlByCidForHeight(e,t)},e.prototype.showEmailAlerts=function(){this.isLoggedIn()?window.location.href="emailalerts":this.showSignInDialog()},e.prototype.showGigyaSignInDialog=function(){Z.Z.init(),s.Z.loaded().then((function(){var e=s.Z.get("Authentication.Gigya.RegisterScreenSetParams");window.gigya.accounts.showScreenSet(e)}))},e.prototyhowIssue(e)},e.prototype.showSignInDialog=function(){return Z.Z.signIn().catch((function(e){}))},e.prototype.showSignInDialogAndRedirectToUpgradeSubscription=function(){return(0,C.mG)(this,void 0,Promise,(function(){return(0,C.Jh)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),_.Z.isLogin()?[3,3]:[4,this.signin()];case 1:return e.sent(),_.Z.isLogin()?(p.Z.issueLoaded(),[4,p.L.load()]):[2];case 2:e.sent(),e.label=3;case 3:return p.Z.coudlIssueBeRead()||L.default.purchase({articleId:null,issueId:this.issue}),[3,5];case 4:return e.sent(),[3,5];case 5:return[2]}}))}))},e.prototype.signin=function(e){return void 0===e&&(e={}),_.Z.isLogin()?Promise.resolve():Z.Z.signIn(e).catch((function(){}))},e.prototype.purchase=function(e){return void 0===e&&(e=!0),(0,C.mG)(this,void 0,Promise,(function(){return(0,C.Jh)(this,(function(t){switch(t.label){case 0:return e?[4,this.signin()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[4,L.default.purchase({articleId:null,issueId:this.issue})];case 3:return[2,t.sent()]}}))}))},e.prototype.refreshUserInfo=function(){return(0,C.mG)(this,void 0,Promise,(function(){var e,t,n;return(0,C.Jh)(this,(function(i){switch(i.label){case 0:return this.isLoggedIn(_.Z.isLogin()),_.Z.isLogin()?(this.readyToRender(!1),[4,N.default.load()]):[3,7];case 1:return i.sent(),this.userEmail(N.default.email),this.userNickname(N.default.nickname),[4,(0,E.Ik)()];case 2:return(null==(e=i.sent())?void 0:e.subscriptionMode)===A.V.Bundle?[3,3]:[3,5];case 3:return[4,(r=p.Z.cid(),k.Z.get("bundle","getCurrent",{mainCid:r}))];case 4:return t=i.sent()||[],this.userHasActiveSubscription(t.some((function(e){return e.IsActive}))),[3,6];case 5:n=A.y.Valid|A.y.Exceed,this.userHasActiveSubscription(!!(n&(null==e?void 0:e.subscriptionStatus))),i.label=6;case 6:return[3,8];case 7:this.userEmail(""),this.userNickname(""),this.userHasActiveSubscription(!1),i.label=8;case 8:return this.readyToRender(!0),[2]}var r}))}))},e}(),V=n(20384),B=function(){return p.Z.contentIsRtl()},F=function(){return I.U.mobile&&(0,P.A)()},O=function(){function e(e){this._id=e}return e.prototype.id=function(){return this._id},e.prototype.isPage=function(){return!1},e.prototype.isCustom=function(){return!1},e.prototdLeftImpl()},e.prototype.isSpreadLeft=function(){return this.isSpreadLeftImpl()},e.prototype.isSpreadRight=function(){return this.isSpreadRightImpl()},e.prototype.isDistanceExceed=function(e,t){if(!e)return!1;for(var n=this,i=0;n&&n!==e&&i++<=t;)n=n.nextItem();if(n&&n===e)return!1;for(n=this,i=0;n&&n!==e&&i++<=t;)n=n.prevItem();return!n||n!==e},e.prototype.prevItem=function(){return this._prevItem},e.prototype.nextItem=function(){return this._nextItem},e.prototype.insertBefore=function(e){var t=this._prevItem;return e._nextItem=this,this._prevItem=e,t&&(t._nextItem=e,e._prevItem=t),this},e.prototype.insertAfter=function(e){var t=this._nextItem;return e._prevItem=this,this._nextItem=e,t&&(t._prevItem=e,e._nextItem=t),this},e.prototype.leftItem=function(){return B()?this.nextItem():this.prevItem()},e.prototy.nextItem()},e.prototype.spreadOffsetLeft=function(){var e=this;return e.isSpreadRight()&&(e=e.leftItem()),e.offsetLeft()},e.prototype.spreadOffsetRight=function(){var e=this;return e.isSpreadLeft()&&(e=e.rightItem()),e.offsetRight()},e.prototype.setVisibilityForSpread=function(e,t){return this.setVisibility(e,t),this.isSpreadLeft()?this.rightItem().setVisibility(e,t):this.isSpreadRight()&&this.leftItem().setVisibility(e,t),this},e.prototype.getMidX=function(){return this.offsetLeft()+this.width()/2},e.prototype.isSpreadLeftImpl=function(){return!1},e.prototype.isSpreadRightImpl=function(){return!1},e.prototype.isVisible=function(){},e.prototype.offsetLeft=function(){},e.prototype.offsetRight=function(){},e.prototype.width=function(){},e.prototype.height=function(){},e.prototype.setPosition=function(){},e.prototype.setVisibility=function(){},e.prototype.dispose=function(){},e}(),z=function(e){function t(n){var i=e.call(this,t.buildId(n))||this;return i._page=n,i._view=n.PageView(),i}return(0,C.ZT)(t,geNumber())},t.prototype.isPage=function(){return!0},t.prototype.isSpreadLeftImpl=function(){return this._page.isSpreadLeft()},t.prototype.isSpreadRightImpl=function(){return this._page.isSpreadRight()},t.prototype.offsetLeft=function(){return this._view.getLeft()},t.prototype.offsetRight=function(){return this._view.getRight()},t.prototype.width=function(){return this._view.getWidth()},t.prototype.height=function(){return this._view.getHeight()},t.prototype.setPosition=function(e,t){return this._view.setPosition(e,t),this},t.prototype.sy(e,t),this},t.prototype.isVisible=function(){return this._view.isVisible()},t.prototype.isBlockVisible=function(){var e=this._view.getPosition(),t=e.left>=0&&e.right<=(window.innerWidth||document.documentElement.clientWidth);return this._view&&this._view._elm&&this._view._elm.cont&&!this._page.isPotentiallyRestrictedMode()&&t},t.prototype.page=function(){return this._page},t.prototype.pageNumber=function(){return this._page.pageNumber()},t}(O),U=function(e){function t(t,n,i,r,o){void 0===o&&(o={});var a=e.call(this,t)||this;return a._elm=n.createChild("div",{position:"absolute",transformOrigin:"0 0",overflow:"hidden"}).width(o.width||"auto").height(o.height||"auto"),a._root=o.root||V('<div id="'.concat(t,'"></div>')),a._rect=new c.Z(0,0,a._elm.width(),a._elm.height()),a._template=i,a._renderer=r,a._renderBlock(),a}return(0,C.ZT)(t,e),t.prototype.isCustom=function(){return!0},t.prototype.offsetLeft=function(){return this._rect.left},t.prototype.offsetRight=function(){return this._rect.right},t.prototype.width=function(){return this._rect.width},t.prototype.height=function(){return this._rect.height},t.prototype.setPosition=function(e,t){return this._rect.left===e&&this._rect.top===t||(this._rect.locate(e,t),this._elm.css({left:this._rect.left,top:this._rect.top})),this},t.prototype.setVisibility=function(e){return this._visible!==e&&(this._visible=e,e?this._elm.show():this._elm.hide()),this},t.prototype.isVisible=function(){return this._visible},t.prototype.dispose=function(){this._elm.remove()},t.prototype._renderBlock=function(){var e=this;return this.setVisibility(!1),this._renderer(this._template,this._root).finally((function(){e._root.find("a").each((function(e,t){V(t).bindttr("href")}))})),e._elm.append(e._root),e.setVisibility(!0)}))},t}(O),H=function(e){function t(t){var n=s.Z.get("UI.Views.ZeroPage.Width",300);return e.call(this,"zeropage",t,"v7.Client.ZeroPage",(function(e,t){return x.Z.loaded().then((function(){var n=new R;x.Z.renderTo(e,n,t),ko.applyBindings(n,t[0])}))}),{width:n,root:V('<div class="paper-intro"></div>')})||this}return(0,C.ZT)(t,e),t}(U),j=function(e){function t(t,n,i,r){var o=this;return void 0===r&&(r={}),o=e.call(this,t,n,i,(functionemplate:e})}(e).then((function(e){return t.append(e.content)}))}),r)||this,S.U.ofType(T.GM.PageViewSizeChangedoad.height)})),o}return(0,C.ZT)(t,e),t.prototype._setSize=function(e,t){var n=this._rect;n.width==e&&n.height==t||(n.width=e,n.height=t,n.speadHeight=t,this._elm.fastCss("width",e+"px"),this._elm.fastCss("height",t+"px"))},t}(U),W=function(){function e(e){this._container=e,this._blocks=[],this._blocksById={},this._isZeroPageEnabled=F()?s.Z.get("pagesView.enableMobilePage0",!1):s.Z.get("pagesView.enablePage0",!1),this._leftPanelPadding=!this._isZeroPageEnabled&&F()?2:20}return e.prototype.build=function(){var e,t=this;if(this.cleanUp(),this._blocks=[],this._isZeroPageEnabled){var n=new H(this._container);this._blocks.push(n),e=n}for(var i=p.Z.pages.firstPage();i;){var o=new z(i);e&&e.insertAfter(o),this._blocks.push(o),i=i.nextPage(),e=o}if(!p.Z.isIssueRestrictedBy("CustomPages")){var a=s.Z.get("customPages.pages")||[];(0,r.forEach)(a,(function(e){var n=void 0===e.index||e.index>t._blocks.length?t._blocks.length:e.index,i=new j("custom-page-".concat(n),t._container,e.template);i._root.fastCss("width","inherit"),i._root.fastCss("height","inherit"),0===n?t._blocks[n].insertBefore(i):t._blocks[n-1].insertAfter(i),t._blocks.splice(n,0,i)}))}return this._blocksById=(0,r.keyBy)(this._blocks,(function(e){return e.id()})),this},e.prototype.getLeftItemForPage=function(e){return this._getItemForPage(e,!0)},e.prototype.getRightItemForPage=function(e){return this._getItemForPage(e,!1)},e.prototype.gerPage(e,!1)},e.prototype._getItemForPage=function(e,t){if(e&&(!0===t?e=e.leftPageIfSpread():!1===t&&(e=e.rightPageIfSpread()),e)){var n=z.buildId(e);return this._blocksById[n]}return null},e.protoispose()}))},Object.defineProperty(e.prototype,"leftPadding",{get:function(){for(var e=2*this._leftPanelPadding,t=0;this._blocks[t].isCustom();)e+=this._blocks[t++].width()+20;return e},enumerable:!1,configurable:!0}),e}(),q=n(92912),G=(n(76280),n(11144)),X=n(43389),Y=n(62980),K=n(87453),J=5e3,$=!1,Q=!1;s.Z.loaded().then((function(){J=s.Z.get("analytics.PageViewDebounceTimeout",J),$=s.Z.get("ui.Views.PageView.SingleZoom",!1)}));var ee=[],te=[],ne=function(){var e,t,n,u=p.Z.zooms(),f=function(){var o,s,h,f,w,C=!1,I=!1,P=!1,x="PageView",k=null,A=0;function E(e){if(e&&e.PageView){var t=e.leftPageIfSpread().PageView();return t.getZoom().isDefaultZoom||t._rect.left+i(f).position().left>0}return!1}function Z(e){i.nd.event.trigger("beforeScroll",i.nd.viewer.pagesView,{delta:e,reason:v.ZP.scrollReason.drag})}var M={gragStart())},scroll:function(e){if(!N.isActiveOrPending()){var t=e.target(),n={dx:e.dx(),dy:e.dy()},r={touchX:e.position().x,touchY:e.position().y};n.adjustDelta=i.noop,E(o)&&Z(n.dx),D.dragGo(t,r,n)}},onFling:function(e){if(M._onframeArg=null,!N.isActiveOrPending()){var t=e.velocity();if(t.vx||0===t.vx||t.vy||0===t.vy){var n=e.target(),r={dx:t.vx,dy:t.vy},a={touchX:e.position().x,touchY:e.position().y},s=U.findClosestPage(a.touchX,a.touchY);if(!s)return!1;U.changeActivePage(s),r.dX2=r.dx,r.dY2=r.dy,r.dTime2=200,r.dX=e.totalDx(),r.dY=e.totalDy(),E(o)&&Z(r.dX),D.dragStop(n,a,r),o&&o.PageView().zoomMode&&S.U.send(new T.jI({pageNumber:o.pageNumber()}))}i.nd.viewer.pagesView.layoutUpdated(this)}}},D={currentMode:0,pagesMode:1,zoomMode:2,_view1:null,_view2:null,_panelX:0,_panelY:0,bef,t.cancel()},dragStart:function(){if(D.currentMode=0,!t.isActive()&&o){var e=o.PageView();D._view1=e,D._view2=U.getActiveSpreadsSecondPageView();var n=f.offset();D._panelX=n.left,D._panelY=n.top,D.currentMode=e.getHeight()<U._rect.height?D.pagesMode:D.zoomMode}},dragGo:function(e,n,i){if(!t.isActive()&&o){var r=o,a=U._rect;D.currentMode||D.dragStart();var s=i.dx,u=i.dy;if(u&&D.currentMode==D.zoomMode){var c=n.touchX-D._panelX-a.left,l=n.touchY-D._panelY;D._view1.hitTest(c,l)||D._view2&&D._view2.hitTest(c,l)||(u=0)}else u=0;if(a.left+=s,f.translateLeft(a.left),u&&D.currentMode==D.zoomMode){var d=r.PageView();if(d.getHeight()>a.height){var h=d.getTop()+u;h>0?(h=0,i.adjustDelta(null,0)):h+d.getHeight()<a.height&&(h=a.height-d.getHeight(),i.adjustDelta(null,0)),d.setTop(h),U.adjustActiveSpread()}}}},dragStop:function(e,r,a){if(!t.isActive()){var s=o;if(s){U.resetPanelPosition();var u=s.PageView(),c=U.getActiveSpreadsSecondPageView(s)||u,l=U._rect,d=l.width,h=l.height;if(D.currentMode==D.pagesMode){var f=.5,m=!1,g=a.dx||0,v=g&&(g<0?1:-1),y=p.Z.contentIsRtl(),_=Math.abs(g)>f,b=n.getItemForPage(s),w=b.spreadOffsetLeft(),C=b.spreadOffsetRight();if(1===s.pageNumber()&&b.prevItem()){var I=b.prevItem();if(_){if(y){if(1==v&&I.offsetRight()>d)return void U.animateToItem(I);if(-1==v&&w<0)return void U.animateToPage(s)}if(!y){if(-1==v&&I.offsetLeft()<0)return void U.animateToItem(I);if(1==v&&C>d)return void U.animateToPage(s)}}w=Math.min(w,I.spreadOffsetLeft()),C=Math.max(C,I.spreadOffsetRight())}var P=C-w;return(_||w>d||C<0)&&(m=!0),m||(s.isFirst()&&(y?C<.5*P&&(m=!0):C-d>.5*P&&(m=!0)),s.isLast()&&!s.isSpread()&&(y?C-d>.5*P&&(m=!0):C<.5*P&&(m=!0))),void(m&&(v||(v=a.dX&&(a.dX<0?1:-1)),U.animateToNextPage(v)))}if(f=2,m=!1,(a.dX2||a.dY2)&&a.dTime2<300){var x,S;a.dX2>0?x=d:S=d;var T,k,A,E=i.nd.momentum(a.dX2,a.dTime2,x,S,d);a.dY2>0?(T=-u.getTop(),A=0):((k=u.getHeight()+u.getTop()-h)<0&&(k=0),A=h-u.getHeight());var Z=i.nd.momentum(a.dY2,a.dTime2,T,k,h);if(Z.returnValue=A,E.dist&&Z.dist&&(Math.abs(a.dY2)>Math.abs(a.dX2)?E.dist=0:Z.dist=0),E.dist&&(Math.abs(a.dx)>f||Math.min(u.getLeft(),c.getLeft())+E.dist>h||Math.max(u.getRight(),c.getRight())+E.dist<0)&&(m=!0),m)return void U.animateToNextPage(a.dx>0?-1:1);E.dist&&t.play(E),Z.dist&&B.play(Z)}}}}};(e=function(e){this._page=e.page(),this._view=e,this._page.isSpread()&&(this._view2=this._page.isSpreadRight()?this._page.leftPageIfSpread().PageView():this._page.rightPageIfSpread().PageView()),this._transitionEndBinded=this._transitionEnd.bind(this)}).prototype={_active:!1,_page:null,_view:null,_view2:null,_zoom:null,isActive:function(){return this._active||this._view2&&this._view2.zoomAnimation()._active||!1},isActiveOrPending:function(){return this.isActive()||this._checkRightsForZoomDeferred||this._view2&&this._view2.zoomAnimation()._checkRightsForZoomDeferred||!1},abort:function(){if(!this.isActive())return this;var e=this._view,t=(this._view2,e.getElmCont());if(t.stop(!0,!1),this._transitionMode){this._transitionEnd(!0);var n=new i.nd.matrix(t.css("transform")).m11,r={left:translateLeft-this._origin.x*(n-1),top:translateTop-this._origin.y*(n-1)};e._rect.left=Math.floor(r.left),e._rect.top=Math.floor(r.top),e._rect.width=Math.floor(e._rect._width*n),e._rect.height=Math.floor(e._rect._height*n),this.disableTransitionForPages()}return this},startZoomAnimation:function(e,t,n,i){var r=this;if(this.isActiveOrPending()||L.isZoomLocked())return Promise.reject();var o=function(){return S.U.send(new T.tN({pageNumber:r._page.pageNumber()})),U._fire("zoomChanging",{zoom:e,origin:t,origin2:n}),r._prepareAndStartAnimation(e,t,n,i).then((function(){U._fire("zoomChanged",{zoom:u.current(),origin:t,origin2:n})}))},a=this._view.confirmRequiredForZoom(e);return i||!a?o():(this._checkRightsForZoomDeferred=!0,L.isZoomLocked(!0),p.Z.requestPageConfirmation(this._page).then((function(){return r._view.confirmRequiredForZoom(e)?Promise.reject():Promise.resolve()})).then((function(){return o()})).catch((function(){mLocked(!1)})))},_prepareAndStartAnimation:function(e,t,n,i){return e.isDefaultZoom||Z(-u.defaultZoom().maxWidth),this._prepareForAnimation(e,t,n,i),X.v.csstransitions&&X.v.csstransforms?this._startTransitionAnimation(300):X.v.csstransforms?this._startTransformAnimation(300):this._transitionEnd(),Promise.resolve()},_prepareForAnimation:function(e,t,n,i){var r=this._view,o=this._view2,a=r.getElmCont();this._active=!0,this._passiveMode=!0===i,this._activeMode=!!n&&!this._passiveMode,this._enableSyncSpread=!!o&&!this._passiveMode&&!this._activeMode,this._zoom=e,this._origin=t,this._origin2=n;var s=r.getSizeForZoom(e),u=r.getSizeForCurrentZoom();r._rect._width=u.width,r._rect._height=u.height,!this._passiveMode&&n&&o&&o.zoomAnimation()._prepareForAnimation(e,n,null,!0);var c=r.getWidth();return this._initialScale=c/u.width,this._finalScale=s.width/u.width,this._translateLeft=a.translateLeft(),this._translateTop=a.translateTop(),this._zoom.fitToHeight?this._translateTopFinal=U.getTopBaseLine():t.translateTopFinal||0===t.translateTopFinal?this._translateTopFinal=t.translateTopFinal:this._translateTopFinal=this._translateTop,t.translateTopFinalAdjustment&&(this._translateTopFinal+=t.translateTopFinalAdjustment),this._translateTopFinal!=this._translateTop?this._translateTopFinalForScale=this._translateTopFinal-this._origin.y*(1-this._finalScale):this._translateTopFinalForScale=this._translateTopFinal,t.translateLeftFinal||0===t.translateLeftFinal?this._translateLeftFinal=t.translateLeftFinal:this._translateLeftFinal=this._translateLeft,t.translateLeftFinalAdjustment&&(this._translateLeftFinal+=t.translateLeftFinalAdjustment),this._translateLeftFinal!=this._translateLeft?this._translateLeftFinalScale=this._translateLeftFinal-this._origin.x*(1-this._finalScale):this._translateLeftFinalScale=this._translateLeftFinal,this},_getMetadata:function(){var e=this._page.PageView()._elm;return e?e.metadata:null},_startTransitionAnimation:function(e){this._transitionMode=!0;var t=this._view,n=this._view2;if(!this._passiveMode){var i=this._getMetadata();i&&i.beforeZoom(this._view,this._view2);var r=this._finalScale,o=this._translateLeftFinalScale,a=this._translateTopFinalForScale,s={left:o-this._origin.x*(r-1),top:a-this._origin.y*(r-1)};if(t._rect.left=Math.floor(s.left),t._rect.top=Math.floor(s.top),t._rect.width=Math.floor(t._rect._width*r),t._rect.height=Math.floor(t._rect._height*r),!this._passiveMode&&n){r=n.zoomAnimation()._finalScale,n._rect.width=Math.floor(n._rect._width*r),n._rect.height=Math.floor(n._rect._height*r);var u=t.getTop(),c=t.getLeft();this._page.isSpreadRight()?c-=n.getWidth():c+=t.getWidth(),n._rect.left=c,n._rect.top=u}this.enableTransitionForPages(e),U.updatePagePositions(!0)}return!this._passiveMode&&n&&n.zoomAnimation()._startTransitionAnimationImpl(e),this._startTransitionAnimationImpl(e),this},_startTransitionAnimationImpl:function(e){this._transitionMode=!0;var t=this._view.getElmCont();return this._applyOrigin(),this._passiveMode||t.bind(i.props.transitionEndEvents,this._transitionEndBinded),t.css("transform",i.nd.matrix.toTranslateString(this._translateLeftFinalScale,this._translateTopFinalForScale)+" "+i.nd.matrix.toScaleString(this._finalScale)),this},_startTransformAnimation:function(e){this._transitionMode=!1;var t=this._view,n=this._view2,r=t.getElmCont();this._applyOrigin(),n&&n.zoomAnimation()._applyOrigin();var o={duration:e,easing:"linear",complete:this._complete.bind(this),step:this._step.bind(this)};r.animate(i.nd.animationEmptyStep,o)},_applyOrigin:function(){return 1===this._initialScale&&this._view.getElmCont().css("transformOrigin",this._origin.x+"px "+this._origin.y+"px"),this},_step:function(e,t,n){if(this._active){var r=this._page,o=this._view,a=this._view2,s=o.getElmCont(),c=t.pos,l=this._initialScale-(this._initialScale-this._finalScale)*c,d=this._translateLeft,h=this._translateTop;h!==this._translateTopFinalForScale&&(h=Math.floor(h-(h-this._translateTopFinalForScale)*c)),d!==this._translateLeftFinalScale&&(d=Math.floor(d-(d-this._translateLeftFinalScale)*c)),this._transitionMode||s.css("transform",i.nd.matrix.toTranslateString(d,h)+" "+i.nd.matrix.toScaleString(l));var p={left:d-this._origin.x*(l-1),top:h-this._origin.y*(l-1)};if(o._rect.left=Math.floor(p.left),o._rect.top=Math.floor(p.top),o._rect.width=Math.floor(o._rect._width*l),o._rect.height=Math.floor(o._rect._height*l),1===c&&!this._transitionMode||n){if(this._passiveMode)return;s.css("transform",i.nd.matrix.toTranslateString(o._rect.left,o._rect.top)),s.css("transformOrigin","0 0");var f=this._zoom,m=o.getZoom();if(m!=f&&(o.setZoom(f),o.loadImages(U.getVisibleRect(!0))),a){l=a.zoomAnimation()._finalScale,a._rect.width=Math.floor(a._rect._width*l),a._rect.height=Math.floor(a._rect._height*l);var g=o.getTop(),v=o.getLeft();r.isSpreadRight()?v-=a.getWidth():v+=o.getWidth(),a._rect.left=v,a._rect.top=g,a.getElmCont().css("transform",i.nd.matrix.toTranslateString(a._rect.left,a._rect.top)).css("transformOrigin","0 0"),m!=f&&(a.setZoom(f),a.loadImages(U.getVisibleRect(!0)))}this._active=!1;var y=(f.maxHeight/u.current().maxHeight).toFixed(1);S.U.send(new T.r0({scale:y,pageNumber:U.getActivePageOrDefault().pageNumber()})),u.current(f),N.onZoomAnimationComplete(o),this._passiveMode||U.updatePagePositions()}else this._enableSyncSpread?N.syncSpreadWhileAnimation(o,a,l):!this._passiveMode&&a&&a.zoomAnimation()._step(e,t,n),this._passiveMode||U.updatePagePositions(!0)}},_transitionEnd:function(e){var t,n=this._view.getElmCont();if(!0!==e&&(e=!1),e&&(t=n.css("transform")),n.unbind(i.props.transitionEndEvents,this._transitionEndBinded).css("transitionProperty","").css("transitionDuration","").css("transitionTimingFunction",""),e&&n.css("transform",t),this._passiveMode)this._active=!1;else{this._activeMode&&this._view2&&this._view2.zoomAnimation()._transitionEnd(e),this.disableTransitionForPages(),e||this._step(0,{pos:1},!0);var r=this._getMetadata();r&&r.afterZoom(this._view,this._view2)}},_complete:function(e,t){this._passiveMode?this._active=!1:(this._activeMode&&this._view2&&this._view2.zoomAnimation()._complete(),this._step(0,{pos:1}))},enableTransitionForPages:function(e){return y.getAllElmContainers().css({transitionProperty:i.props.cssTransform,transitionTimingFunction:"linear",transitionDuration:e+"ms"}),this},disableTransitionForPages:function(){return y.getAllElmContainers().css({transitionProperty:"",transitionTimingFunction:"",transitionDuration:""}),this},getPositionForZoom:function(e,t,n){var i=this._view,r=i.getElmCont(),o=N.getOrigin(i,t,n),a=i.getSizeForZoom(e),s=i.getSizeForZoom(i.getZoom()),u=a.width/s.width,c=r.translateLeft(),l=r.translateTop(),d={left:c-o.x*(u-1),top:l-o.y*(u-1)};return{left:Math.floor(d.left),top:Math.floor(d.top),currentLeft:c,currentTop:l,width:a.width,height:a.height,scale:u}}};var L={isZoomLocked:function(e){return arguments.length?(this._locked=e,this):this._locked}},N={_active:!1,_pending:!1,_page:null,_view:null,_view2:null,onZoomAnimationComplete:function(e){this._active||this._view!=e||(this._view=null,this._view2=null)},isZoomActive:function(){return!!this._active||!(!this._view||!this._view.zoomAnimation().isActive())},isActiveOrPending:function(){return!!(this._active||this._pending||this._view&&this._view.zoomAnimation().isActiveOrPending())},getOrigin:function(e,t,n){var i=e.getElmOffset();return{x:t-i.left,y:n-i.top}},zoomStart:function(e,t){if(!this.isActiveOrPending()&&!L.isZoomLocked()){var n=this._page=U.findClosestPage(e,t)||o;if(n){U.changeActivePage(n),this._active=!0;var i=this._view=n.PageView(),r=this._view2=null;n.isSpread()&&(r=this._view2=n.isSpreadRight()?n.leftPageIfSpread().PageView():n.rightPageIfSpread().PageView()),this._pageX=e,this._pageY=t,this._origin=this.getOrigin(i,e,t),this._origin2=r?this.getOrigin(r,e,t):null,this._originalZoom=i.getZoom(),this._originalZoom2=r?r.getZoom():null,this._startLeft=i.getLeft(),this._startTop=i.getTop(),i._rect._width=i._rect.width,i._rect._height=i._rect.height,r&&(r._rect._width=r._rect.width,r._rect._height=r._rect.height,this._startLeft2=r.getLeft(),this._startTop2=r.getTop()),i.getElmCont().css("transformOrigin",this._origin.x+"px "+this._origin.y+"px"),r&&r.getElmCont().css("transformOrigin",this._origin2.x+"px "+this._origin2.y+"px")}}},zoomStep:function(e,t,n){if(this._active||(this.zoomStart(t,n),this._active)){var r=this._view,o=this._view2,a=t-this._pageX,s=n-this._pageY,u=this._startLeft+a,c=this._startTop+s;r.getElmCont().css("transform",i.nd.matrix.toTranslateString(u,c)+" "+i.nd.matrix.toScaleString(e));var l={left:u-this._origin.x*(e-1),top:c-this._origin.y*(e-1)};r._rect.top=Math.floor(l.top),r._rect.left=Math.floor(l.left),r._rect.width=Math.floor(r._rect._width*e),r._rect.height=Math.floor(r._rect._height*e),o&&(u=this._startLeft2+a,c=this._startTop2+s,o.getElmCont().css("transform",i.nd.matrix.toTranslateString(u,c)+" "+i.nd.matrix.toScaleString(e)),l={left:u-this._origin2.x*(e-1),top:c-this._origin2.y*(e-1)},o._rect.top=Math.floor(l.top),o._rect.left=Math.floor(l.left),o._rect.width=Math.floor(o._rect._width*e),o._rect.height=Math.floor(o._rect._height*e)),U.updatePagePositions(!0)}},zoomEnd:function(e){if(this._active&&!this._pending){this._active=!1,this._pending=!0;var t=this._view,n=this._originalZoom,i=u.findZoom(e,!0,n),r=this;t.zoomAnimation().startZoomAnimation(i,this._origin,this._origin2).then((function(){return(t.getZoom()._idx===i._idx?Promise.resolve():t.zoomAnimation().startZoomAnimation(i,r._origin,r._origin2)).then((function(){r._pending=!1})).catch((function(){r._pending=!1}))}),(function(){return t.zoomAnimation().startZoomAnimation(n,r._origin,r._origin2).then((function(){r._pending=!1})).catch((function(){r._pending=!1}))}))}},syncSpreadWhileAnimation:function(e,t,n){if(t){var r=e.page();t._rect.width=Math.floor(t._rect._width*n),t._rect.height=Math.floor(t._rect._height*n);var o=e.getTop(),a=e.getLeft();r.isSpreadRight()?a-=t.getWidth():a+=e.getWidth(),t._rect.left=a,t._rect.top=o,t.getElmCont().css("transform",i.nd.matrix.toTranslateString(a,o)+" "+i.nd.matrix.toScaleString(n))}}},R={_scale:null,gesturesStart:function(){R._scale=null},pinch:function(e){var t=R._scale=e.scale(),n=e.center();N.zoomStep(t,n.x,n.y),S.U.send(new T.Rj({pageNumber:U.getActivePageOrDefault().pageNumber(sturesEnd()},gesturesEnd:function(){null!=R._scale&&(N.zoomEnd(R._scale),R._scale=null)}},V={onmousewheel:function(e){if(e.wheelDirVerticale&&e.wheelDirHorizontal&&(Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)?e.wheelDirVerticale=0:e.wheelDirHorizontal=0),e.wheelDirHorizontal){if(t.isActive())return!1;U.animateToNextPage(-1*e.wheelDirHorizontal)}else if(e.wheelDirVerticale){var n=e.pageX,i=e.pageY,r=U.findClosestPage(n,i);if(!r)return!1;U.changeActivePage(r);var o=r.PageView(),a=U.getActiveSpreadsSecondPageView(r);if(o.zoomAnimation().isActive())return!1;var s=N.getOrigin(o,n,i),c=a?N.getOrigin(a,n,i):null;u.current(o.getZoom());var l=e.wheelDirVerticale<0?u.next():u.prev();l&&o.zoomAnimation().startZoomAnimation(l,s,c)}return!1},onwheelHorizontal:function(e){if(e.deltaX&&e.deltaXCount>e.deltaYCount)return!t.isActive()&&!N.isZoomActive()&&(!(!$&&u.current()!==u.defaultZoom())&&(U.animateToNextPage(e.deltaX),e.processed=!0,!1))},onwheelVerticale:function(e){if(e.deltaY&&e.deltaYCount>e.deltaXCount){if(t.isActive()||N.isZoomActive())return!1;var n=e.pageX,i=e.pageY,r=U.findClosestPage(n,i);if(!r)return!1;U.changeActivePage(r);var o=r.PageView(),a=U.getActiveSpreadsSecondPageView(r),s=N.getOrigin(o,n,i),c=a?N.getOrigin(a,n,i):null;u.current(o.getZoom());var l=e.deltaY<0?u.next():u.prev();return l&&(o.zoomAnimation().startZoomAnimation(l,s,c),e.processed=!0),!1}}};t=function(){var e,t,n,r,a,s,u=300,c=!0,l=0;function d(e,t,n,o){U.container().animate({translateLeft:e,leaveTransforms:c},n||u,o||r||i.nd.easing.nd1,(function(){h(t)}))}function h(e){a&&(U.changeActivePage(a,!0),a=null),(e||g)()}function p(o,a,c,l){var p,m=s=new G.B,g=U._rect;if(o.dist){var v=o;u=v.time,o=g.left+v.dist}else u=300;return o=Math.floor(o),g.left!=o?(e=!0,n=o,a&&(p=f,a<0?(t=-g.width,o=g.width):(t=g.width,o=-g.width),n=0),r=i.nd.easing.nd1,d(o,p,c,l)):h(),m.promise()}function f(){var e=U._rect,n=o.PageView(),i=n.getWidth()/2;if(o.isSpread()){var r=o.otherSpread();i+=(o.isSpreadRight()?-1:1)*r.PageView().getWidth()/2}n.setLeft(Math.floor(e.width/2-i)),U.adjustActiveSpread(),U.updatePagePositions(),U.container().css("translateLeft",t),setTimeout(m,1)}function m(){r=i.nd.easing.nd1_reverse,d(n)}function g(){U._rect.left=U.container().translateLeft(),U.moveAnimation_finish(),e=!1,l=i.nd.now(),s&&(s.resolve(),s=null)}function v(t){e&&(U.container().stop(!0,!1,c),t&&U.container().css("translateLeft",n),s&&(s.reject(),s=null),g())}return{play:function(e,t){return a=null,p(e,t)},playAndChangeActivePage:function(e,t,n,i,r){return a=n,p(e,t,i,r)},finish:function(){v(!0)},cancel:function(){v(!1)},isActive:function(){return e},currentAnimationDeferred:function(){return s},finishTime:function(){return l}}}();var B=function(){var e,t,n,r,a,s,u=!0;function c(){e&&a&&a.animate({translateTop:t,leaveTransforms:u},s.returnTime,i.nd.easing.nd1_reverse,l)}function l(){n&&(n._rect.top=n.getElmCont().translateTop()),r&&(r._rect.top=r.getElmCont().translateTop()),n=null,r=null,a=null,e=!1,U.checkPages()}function d(n){e&&a&&(a.stop(!0,!1,u),n&&a.css("translaten h(){d(!0)}return{play:function(d){if(o){h(),n=o.PageView(),r=U.getActiveSpreadsSecondPageView(o);var p=d.dist?n.getTop()+d.dist:d;d.dist?d.top=p:d={top:p,time:300,returnTime:0},s=d,t=p,a=r?i([n.getElmCont()[0],r.getElmCont()[0]]):n.getElmCont(),e=!0;var f=l;d.returnTime&&"number"==typeof d.returnValue&&(f=c,t=d.returnValue),a.animate({translateTop:d.top,leaveTransforms:u},d.time,i.nd.easing.nd1,f)}},finish:h,cancel:function(){d(!1)},isActive:function(){return e}}}(),F=function(){vxtPage(-1)}function a(e){return e&&e.PageView&&!e.PageView().getZoom().isDefaultZoom}function s(e,t){var n=f(e),i=n.left.getPosition(),r=N.getOrigin(n.left,i.left+i.width/2,i.top),o=n.right?N.getOrigin(n.right,i.left+i.width/2,i.top):null;u.current(n.left.getZoom());var a=t(u);a&&n.left.zoomAnimation().startZoomAnimation(a,r,o)}function c(e){return e.isSpreadRight()?e.leftPageIfSpread(x):e.isSpreadLeft()?e.rightPageIfSpread(x):null}function l(e,t,n,i){var r=t.getLeft();if(t.setLeft(r+i),n){var o=e.leftPageIfSpread(x)?t.getWidth():-t.getWidth();n.setLeft(r+o+i)}U.updatePagePositions()}function d(e,t,n,i){e.setTop(n+i),t&&t.setTop(n+i),U.updatePagePositions()}function h(e,t,n){var r=e.getLeft(),o=e.getWidth();if(!(n<0))return r<i.windowWidth()/2;var a=r+o;return t&&(a+=t.getWidth()),a>i.windowWidth()/2}function f(e){if(!e.isSpread())return{left:e.PageView(),right:null};var t=e.isSpreadLeft();return{left:t?e.PageView():c(e),right:t?c(e):e.PageView()}}return n[Y.D.pgDown]=r,n[Y.D.left]=function(t){if(a(t)){var n=f(t);h(n.left,n.right,e)&&l(t,n.left,n.right,e)}else o()},n[Y.D.pgUp]=o,n[Y.D.right]=function(e){if(a(e)){var t=f(e);h(t.left,t.right,-50)&&l(e,t.left,t.right,-50)}else r()},n[Y.D.up]=function(t){if(a(t)){var n=f(t),i=n.left.getTop();if(i<0){var r=i-e<=0?e:Math.abs(i-e);d(n.left,n.right,i,r)}}},n[Y.D.down]=function(t){if(a(t)){var n=f(t),r=n.left.getTop(),o=n.left.getHeight();if(r+o+e>i.windowHeight()){var s=r+o+e>=i.windowHeight()?-50:-Math.abs(r+o-i.windowHeight());d(n.left,n.right,r,s)}}},n[Y.D.home]=function(){U.gotoPage(p.Z.pages.firstPage())lastPage())},n[Y.D.space]=function(e,n){if(!t.isActive()){var i=p.Z.contentIsRtl();n&&n.shiftKey&&(i=!i),(i?o:r)()}},n[Y.D.equalsFirefox]=n[Y.D.numPlus]=n[Y.D.equals]=function(e){s(e,(function(e){return e.next()}))},n[Y.D.minus]=n[Y.D.numMinus]e.prev()}))},n}();function O(){return!(!o||!U.isEnable()||d.modal.isSet||d.busy.isSet)}var z={lastEvent:astEvent=de(e.which)},keyUp:function(e){O()&&z.process(e.keyCode,e)},process:function(e,t){if((K.W1(e)||K._V(e))&&"INPUT"!=document.activeElement.nodeName)i.nd.viewer.topBar.showSearchMenu(),i.nd.viewer.topBar.searchMenuText(z.keyPressed);else{var n=F[e];"function"==typeof n&&n(o,t)}}},U=i.extend({},l.Y.prototype,{_rect:new c.Z,initPanel:function(e){w=e;var r=e.elm().addClass("pageview-container");(f=r.createChild("div","absolute")).width(1).height(1),f.optimizeForTransform(),n=new W(f),function(e){function t(e){return'<div class="readingnav rn-'+(e?"left":"right")+'"><div class="rn-in"><div class="rn-content"><figure><figcaption><h1>'+(e?"Prev":"Next")+"</h1></figcaption></figure></div></div></div>"}e.append(t(!0)+t(!1)),e.tap(".rn-left",(function(){p.Z.contentIsRtl()?U.animateToRightPage(1):U.animateToLeftPage()})).tap(".rn-right",(function(){p.Z.contentIsRtl()?U.animateToLeftPage():U.animateToRightPage(1)})),i.nd.gestures.bind(e.find(".rn-left"),{longPress:function(){return U.gotoFirstPage(v.ZP.scrollReason.scrollZone)},gesturesEnd:function(){return U.stopConinuousAnimation()}}),i.nd.gestures.bind(e.find(".rn-right"scrollZone)},gesturesEnd:function(){return U.stopConinuousAnimation()}})}(r),i.nd.gestures.bind(e.elm(),{gesturesStart:M.gesturesStart,scroll:M.scroll,fling:M.onFling,keyPress:z.keyPress.bind(this),keyDown:z.keyDown.bind(this),keyUp:z.keyUp.bind(this)}),i.nd.gestures.bind(e.elm(),{gesturesStart:R.gesturesStart,pinch:R.pinch,gesturesEnd:R.gesturesEnd,scroll:R.scroll,contextMenu:function(e){var t={position:e.position()};i(e.event().target).trigger(i.Event("onContextMenu",{contextMenu:t}));var n=function(e){var n={position:{x:t.position.x,y:t.position.y,align:{y:i.nd.ui.menu.align.bottom}}},r=new m.Z(i.nd.views.pageView,{controller:this,article:e,page:t.pageNumber,isPageCtxMenu:!0,issue:p.Z.issue(),newspaperName:p.Z.contentName(),pageInfoAccessor:p.Z.getPageInfo,preview:e?{previewType:v.ZP.contextPreviewType.article}:{previewType:v.ZP.contextPreviewType.page,issueName:p.Z.contentName(),issueDate:p.Z.issueDate(),getPageInfo:function(e){return p.Z.pages.load().then((function(){var t=p.Z.pages.getPage(e),n=t&&t.layout();if(n)return{height:n.Height,width:n.Width}}))}}});r.show(n).catch((function(){}))};if(t.articleId)(0,a.$k)("Articles","GetItems",{articles:[t.articleId]}).then((function(e){e.Articles&&e.Articles.length>0&&n(new i.nd.data.article(e.Articles[0]))}));else{if(t.pageNumber){var r=p.Z.pages.getPage(t.pageNumber);if(r&&r.isPotentiallyRestrictedMode())return}n()}}}),e.elm().wheel({accumulate:!0,accumulateMinInterval:60,accumulateMaxTime:300,accumulateMinTimeSinceProcessed:1e3,handler:V.onwheelHorizontal}).wheel({accumulate:!0,accumulateMinInterval:60,accumulateMaxTime:60,accumulateMinTimeSinceProcessed:800,handler:V.onwheelVerticale}),e.resize(U.onresize.bind(U)),p.Z.pageKeysLoaded((function(e){U.isEnable()&&(U.reflow(),q.ZP.hide())})),p.Z.pageLoaded((function(e){U.reflow()})),p.Z.pages.loadedChange((function(e){C=e.value,u.switchToDefault(),U.isEnable()&&(U.renderIssue(),q.ZP.hide(),S.U.send(new T.Qp({cid:p.Z.cid(),date:p.Z.issueDate()})))})),p.Z.pages.gotoPageCalled((function(e){if(U.isEnable()&&(U.animateToPage(e.page),e.articleId)){var n=t.currentAnimationDeferred(.articleId)}))}})),p.Z.pages.addViewFactory(x,(function(e){return new g(e)})),this.onresize()},show:function(e){return e&&e.data&&e.data.resetSearchText&&(i.nd.viewer.topBar.resetSearchText(),i.nd.viewer.pagesViewHighlighter.confirm("")),k=e,I=!0,(C=p.Z.pages.loaded())&&(e.disableAnimation&&(P=!0),u.switchToDefault(),this.renderIssue()),e&&e.callback&&e.callback(),this},hide:function(){return I=!1,this.unloadImages(),n.cleanUp(),this},disable:function(){return I=!1,C=!1,this},isEnable:function(){return I&&C&&p.Z.pages.loaded()},reset:function(){o=null,te=[],b.Z.setInitialPosition(this)},onresize:function(){var e=w.rect();return this._rect.width=e.width,this._rect.height=e.height,f.width(2*e.width).height(2*e.height),this.reflowAsync()},reflowAsync:function(){return this.isEnable()&&requestAnimationFrame(this._onReflowAsync),this},_o&U.reflow()},renderIssue:function(){var e;if(q.ZP.show(),n.build(),p.Z.page()?e=p.Z.page():k&&k.page&&(e=k.page),e&&(h=p.Z.pages.getPage(e)),this.reflow(!0),k){if(k.page&&k.articleId){if(1===o.pageNumber()||o.key()||!o.isPotentiallyRestrictedMode()){var t=this,r=k.articleId;i.nd.viewer.pagesViewLayout.loaded().then((function(){t.zoomToArticle(o,r)}))}}else if(o){var a=k.zoom,s=k.origin,c=parseInt(a,10);isNaN(c)||(a=u.zooms()[c],s={x:0,y:0}),a&&s&&u.compareZooms(a,u.current())>0&&o.PageView().zoomAnimation().startZoomAnimation(a,s,k.origin2)}k=null}return this},getDefaultZoom:function(){return u.defaultZoom()},updateBaseLine:function(){var e,t=u,n=this._rect,i=n.height,r=n.width;return r<400||i<400?(t._updateZooms(r-3,i-3),e=2):r<800&&i>r?(t._updateZooms(r-10,i-10),e=5):(t._updateZooms(.5*(r-20),i-20),e=10),this._topBaseLine=e,this},getBaseLine:function(){return this._topBaseLine},getActivePageOrDefault:function(){var e=o;if(!e){var t=p.Z.pages.activePages();t&&t.length>0&&(e=t[Math.floor(t.length/2)])}return e||(e=p.Z.pages.firstPage()),e},getPendingPage:function(e){var t=h;return e&&(h=null),t},updateClassName:function(){var e=p.Z.contentIsRtl(),t={"contentdir-rtl":e,"contentdir-ltr":!e};retuoveClass(t)})),this},reflow:function(e){if(e&&this.reset(),!this.isEnable())return this;e&&this.updateClassName();var t=this.updateBaseLine().getBaseLine(),n=this._rect.width,i=u,r=i.defaultZoom();$?r=i.current():i.current(r);var a=this.getPendingPage(!0)||this.getActivePageOrDefault(),s=a.leftPageIfSpread(),c=a.rightPageIfSpread(),l=s.PageView(),d=c.PageView();if(a!==o){if(l!=d){l.setZoom(r),d.setZoom(r);var h=l.getWidth()+d.getWidth(),p=Math.floor((n-h)/2);l.setPosition(p,t),d.setPosition(p+l.getWidth(),t)}else l.setZoom(r),h=l.getWidth(),p=Math.floor((n-h)/2),l.setPosition(p,t);U.changeActivePage(a,!0)}else if(!a.PageView().zoomAnimation().isActiveOrPending()){var f=a.PageView().getZoom().fitToHeight;f||(f=i.compareZooms(r,a.PageView().getZoom())>0),f&&(a.PageView().setZoom(r).setTop(t),U.adjustActiveSpread(a))}for(var m=c.rightPage();m;)m.PageView().setZoom(r),m=m.rightPage();for(m=s.leftPage();m;)m.PageView().setZoom(r),m=m.leftPage();return this.updatePagePositions()},zoomToArticle:function(e,t){if(i.nd.viewer.pagesViewLayout){var n=i.nd.viewer.pagesViewLayout.findArticleRect(t,e);if(n){var r=e.PageView(),o=r.getElmOffset(),a={pageX:o.left+r.getWidth()/2,pageY:o.top+r.getHeight()/2,data:{regionRect:n,caller:"zoomToArticle"}};this.onpagedoubleclick(r,a)}}},onpagedoubleclick:function(e,t){var n,i=e.page();S.U.send(new T.cF({pageNumber:i.pageNumber()})),this.changeActivePage(i);var r,o,a=this.getActiveSpreadsSecondPageView(i);this._rect.height>e.getHeight()?(r=u.defaultMZoom(),o=!0):r=u.defaultZoom();var s=N.getOrigin(e,t.pageX,t.pageY),c=a?N.getOrigin(a,t.pageX,t.pageY):null;if(o||$){var l=t.data?t.data.regionRect:null;if(l){"zoomToArticle"===(null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.caller)&&(r=u.current());var d=e.zoomAnimation().getPositionForZoom(r,t.pageX,t.pageY);l.L*=d.width,l.R*=d.width,l.T*=d.height,l.B*=d.height,l.L+=d.left,l.R+=d.left,l.T+=d.top,l.B+=d.top;var h=this._rect,p=h.height,f=h.width,m=null;l.L<0?m=d.left-l.L:l.R>f&&((y=l.R-f)>l.L&&(y=l.L),m=d.left-y);var g=null;if(l.T<0?g=d.top-l.T:l.B>p&&((y=l.B-p)>l.T&&(y=l.T),g=d.top-y),null!=g&&(s.translateTopFinal=g,c&&(c.translateTopFinal=g)),null!=m&&(s.translateLeftFinal=m,c)){var v=a.zoomAnimation().getPositionForZoom(r,t.pageX,t.pageY),y=d.left-m;c.translateLeftFinal=v.left-y}}}e.zoomAnimation().startZoomAnimation(r,s,c)},findClosestPage:function(e,t){if(!o)return null;var n=e-f.offset().left,i=1e9,r=null;for(var a in{nextPage:1,prevPage:2})for(var s=o;s;){var u,c=s.PageView();if(!c.isVisible())break;if(c.getLeft()>n)u=c.getLeft()-n;else{if(!(c.getRight()<n))return s;u=n-c.getRight()}i>u&&(i=u,r=s),s=s[a]()}return r},getActiveSpreadsSecondPageView:function(e){return(e=e||o)?(e.isSpread||(e=e.page()),e.isSpread()?e.isSpreadRight()?e.leftPageIfSpread(x):e.rightPageIfSpread(x):null):null},adjustActiveSpread:function(e){if(!(e=e||o))return this;if(!e.isSpread())return this;var t,n=e.PageView();if(e.isSpreadRight())t=e.leftPageIfSpread(x);else{if(!e.isSpreadLeft())return this;t=e.rightPageIfSpread(x)}t.getZoom()!==n.getZoom()&&t.setZoom(n.getZoom());var i=n.getTop(),r=n.getLeft();e.isSpreadRight()?r-=t.getWidth():r+=n.getWidth(),t.setLeft(r),t.setTop(i);var a=this.getVisibleRect(!0);return n.setVisibility(!0,a),t.setVisibility(!0,a),this},getVisibleRect:function(e){var t=this._rect,n=t.height,i=t.width,r=e?0:i,o=e?0:n/2,a={left:-r,right:i+r,top:-o,bottom:n+o};return a.width=a.right-a.left,a.height=a.bottom-a.top,a},checkPages:function(){var e=n.getLeftItemForPage(o);if(!e)return this;var t=n.getItemForPage(s);s=null;var r=!e.isDistanceExceed(t,3);e.setVisibilityForSpread(!0,this.getVisibleRect(!1));var a=this._rect,u=a.width;if(e.spreadOffsetRight()<0||e.spreadOffsetLeft()>u)var c=!0,l=a.left+a.width/2;for(var d=this.getVisibleRect(!1),h=e.leftItem(),p=0;h;){if((v=h.offsetRight()>d.left)&&c&&h.isPage()){var f=Math.abs(l-h.getMidX());if(!g||f<m)var m=f,g=h}if(!v&&p<1&&(v=!0),r&&!v&&!h.isVisible())break;h.isSpread()?h.isSpreadRight()&&(h.setVisibilityForSpread(v),v&&p++):(h.setVisibility(v),v&&p++),h=h.leftItem()}for(h=e.rightItem(),p=0;h;){var v;if((v=h.offsetLeft()<d.right)&&c&&h.isPage()&&(f=Math.abs(l-h.getMidX()),(!g||f<m)&&(m=f,g=h)),!v&&p<1&&(v=!0),r&&!v&&!h.isVisible())break;h.isSpread()?h.isSpreadLeft()&&(h.setVisibilityForSpread(v),v&&p++):(h.setVisibility(v),v&&p++),h=h.rightItem()}return c&&g&&this.changeActivePage(g.page()),i.nd.viewer.pagesView.issueLayoutUpdated(this),this},changeActivePage:function(e,t){var n=!1;if(o){if(o==e)return this;var i=!1;if(o.isSpread()&&(o.leftPageIfSpread()!=e&&o.rightPageIfSpread()!=e||(i=!0)),!i){var r=o.leftPageIfSpread(x),a=o.rightPageIfSpread(x),u=this.getDefaultZoom();r.getZoom()!=u&&($||(r.setZoom(u),r.loadImages(),a.setZoom(u),a.loadImages()),n=!0),s=o}}return o!=e&&(p.Z.pages.startActivePageValidation(),o&&o.isActive(!1),e.isActive(!0),p.Z.pages.finishActivePageValidation()),o&&S.U.send(new T.sY({pageNumber:e.pageNumber()})),o=e,n&&!t&&this.updatePagePositions(),U._fire("activePageChanged",{page:o}),this},moveAnimation_finish:function(){return this.resetPanelPosition()},resetPanelPosition:function(){var e=o;if(!e)return this;var t=this._rect.left;if(0===t)return this;this._rect.left=0,f.translateLeft(this._rect.left);var n=e.leftPageIfSpread().PageView();if(n.setLeft(n.getLeft()+t),e.isSpread()){var i=e.rightPageIfSpread().PageView();i.setLeft(i.getLeft()+t)}return this.updatePagePositions()},getTopBaseLine:function(){return this._topBaseLine||10},makeSingleZoom:function(){var e=this;if($){var t=u.maxZoom(),i=function(n){n.isPage()&&!n._page.isPotentiallyRestrictedMode()&&(Q||!0===e.checkRightsForZoom(n._page,t)||(Q=!0),n._view.setZoom(u.current()))};i(n.getItemForPage(o));for(var r=n.getRightItemForPage(o).rightItem();r;)i(r),r=r.rightItem();for(r=n.getLeftItemForPage(o).leftItem();r;)i(r),r=r.leftItem()}},updatePagePositions:function(e){if(!n.getItemForPage(o))return this;i.nd.viewer.pagesView.layoutUpdating(this);var t=e||N.isZoomActive(),a=this._rect.width,s=this.getTopBaseLine();this.makeSingleZoom();for(var u=n.getRightItemForPage(o),c=u.spreadOffsetRight()+30,l=u.rightItem();l&&!(e&&c>a&&l.offsetLeft()>a);)l.setPosition(c,s),c+=l.width(),!l.isSpreadRight()&&l.isSpread()||(c+=30),l=l.rightItem();var d=n.getLeftItemForPage(o);for(c=d.spreadOffsetLeft()-30,l=d.leftItem();l&&!(e&&c<0&&l.offsetRight()<0);)c-=l.width(),l.setPosition(c,s),!l.isSpreadLeft()&&l.isSpread()||(c-=30),l=l.leftItem();return i.nd.viewer.pagesView.layoutUpdated(this),function(e){if(e){var t=[];e.isPage()&&e.isBlockVisible()&&t.push(e.pageNumber());for(var n=e.leftItem();n&&n.isPage()&&n.isBlockVisible();)t.push(n.pageNumber()),n=n.leftItem();for(n=e.rightItem();n&&n.isPage()&&n.isBlockVisible();)t.push(n.pageNumber()),n=n.rightItem();"function"==typeof ee&&ee.cancel(),te=te||[],(ee=r.debounce((function(){r.difference(t,te).forEach((function(e){S.U.send(new T.OX({pageNumber:e})),te.push(e)}))}),J))()}}(n.getItemForPage(o)),t?this:this.checkPages()},checkRightsForZoom:function(e,t){return!(e&&t&&e.PageView().confirmRequiredForZoom(t))||p.Z.requestPageConfirmation(e)},unloadImages:function(){r.invokeMap(p.Z.pages.getViews(x),"_disable"),y.unloadImages()},getActiveSpreadWidth:function(){var e=o;if(!e)return 0;var t=e.leftPageIfSpread(x),n=e.rightPageIfSpread(x),i=t.getLeft();return n.getRight()-i},isSinglePageView:function(){return this.getActiveSpreadWidth()>this._rect.width},aage(e,!0,t)},animateToLeftPage:function(){var e=p.Z.contentIsRtl()?-1:1;return this.animateToNextPage(-1*e)},animateToRightPage:function(){var e=p.Z.contentIsRtl()?-1:1;return this.animateToNextPage(1*e)},animateToNextPage:function(e){var t=o;if(!t)return this;var n=this.isSinglePageView();if(e>0){if(n?t.rightPageIfSpread(x).getRight()<this._rect.width&&(t=t.rightPageIfSpread()):t=t.rightPageIfSpread(),!(t=t.rightPage()))return this.animateToPage(p.Z.pages.mostLeftPage(),1)}else if(n?t.leftPageIfSpread(x).getLeft()>0&&(t=t.leftPageIfSpread()):t=t.leftPageIfSpread(),!(t=t.leftPage()))return this.animateToPage(p.Z.pages.mostRightPage(),-1);return this.animateToPage(t)},gotoPage:function(e,n,r){var o;2===arguments.length&&"boolean"!=typeof arguments[1]?(n=(o=arguments[1]).animate,r=o.dir):o={};var a=e.leftPageIfSpread(x),s=e.rightPageIfSpread(x),u=a.getLeft(),c=s.getRight(),l=this._rect.width,d=c-u;P&&(P=!1,n=!1),a.setVisibility(!0),s.setVisibility(!0);var h=Math.floor((l-d)/2);d>l&&(h=e==a.page()||a===s?5:l-a.getWidth()-s.getWidth()-5);var p=u-h;return n?t.playAndChangeActivePage(-p,r,e,o.duration,o.easing):(a.setLeft(h),a!=s&&s.setLeft(h+a.getWidth()),this.changeActivePage(e),this.updatePagePositions()),i.nd.event.trigger("beforeScroll",i.nd.viewer.pagesView,{delta:-p,reason:o.reason||v.ZP.scrollReason.keyPress}),this},animateToItem:function(e){if(e.isPage())return this.animateToPage(e.pageNumber());var t=this._rect.width-e.width(),n=Math.min(10,Math.max(t/2,0)),i=p.Z.contentIsRtl()?this._rect.width-e.offsetRight()-n:-e.offsetLeft()+n;return this.animateToOffsetX(i)},animateToOffsetX:function(e){return t.play(e),this},onPageViewResizing:function(e){e.updateZoomState(this._rect);var t=this.getActiveSpreadsSecondPageView(e);if(t){var n=Math.max(e._rect.height,t._rect.height);e._rect.speadHeight=n,t._rect.speadHeight!=n&&(t._rect.speadHeight=n,t._updateElm())}},container:function(){return f},setN(e)||(A=e)},_isContinuousAnimationActive:!1,gotoFirstPage:function(e){if(!this._isContinuousAnimationActive){for(var t=p.Z.pages.firstPage(),n=t;n&&(n.PageView().loadImages(),n!==o);n=n.nextPage());var i=300*(o.pageNumber()-t.pageNumber());this.gotoPage(t,{animate:!0,duration:i,easing:"linear",reason:e}),this._isContinuousAnimationActive=!0}},gotoLastPage:function(e){if(!this._isContinuousAnimationActive){for(var t=p.Z.pages.lastPage(),n=o;n&&(n.PageView().loadImages(),n!==t);n=n.nextPage());var i=300*(t.pageNumber()-o.pageNumber());this.gotoPage(t,{animate:!0,duration:i,easing:"linear",reason:e}),this._isContinuousAnimationActive=!0}},stopConinunActive=!1)}});return U.on("activePageChanged",(function(e,t){i.nd.navHistory.updateState({page:t.page.pageNumber()}),window.setTimeout((function(){!function(){if(o&&o._isFirst){var e=o.PageView().getLeft();U.animateToOffsetX(A+n.leftPadding-e)}}()}),0)})),U.on("zoomChanging",(function(e,t){i.nd.navHistory.updateState({zoom:t.zoom,origin:t.origin,origin2:t.origin2,articleId:null})})),U.on("zoomChanged",(function(e,t){i.nd.navHistory.updateState({zoom:t.zoom,origin:t.origin,origin2:t.origin2,articleId:null})})),{init:function(e){return U.initPanel(e),this},show:function(e){return U.show(e),this},disable:function(){return U.disable(),this},hide:function(){return U.hide(),this},renderIssue:function(){return U.renderIssue(),this},reflow:function(){return U.reflow(),this},getPageContainer:function(){return f},Elm_GetVisibleWidth:function(){return U._rect.width},getContainerRect:function(){return U._rect},getViewportRect:function(){var e=A,t=U._rect;return{top:t.top,left:Math.max(e,t.left),width:t.width-(e>t.left?e-t.left:0),height:t.height}},Page_ondoubleclick:function(e,t){var n=e._elm.tintCont,i=_.Z.getRedirectionUrl("OnPageLockClicked");n.visible()&&""!==i?window.location=i:U.onpagedoubleclick(e,t)},onPageViewResizing:function(e){return U.onPageViewResizing(e),this},setViewportLeft:U.setViewportLeft}}();function g(e){this._page=e,this._rect=new c.Z,this._disable(),this.bgcolor=e.bgcolor(),this._page.isInitedChange(this,this._page_isInitedChange.bind(this))}g.prototype={_elm:null,_rect:null,_viewport:null,_page:null,scale:0,zoomMode:0,bgcolor:null,_page_is._disable()},_pageInited:function(){return this.bgcolor=this.page().bgcolor(),this},_attachElm:function(){return this._elm||(this._elm=y.attach(this).update()),this},_updateElm:function(){return this._elm&&this._elm.update(),this},_detachElm:function(){return this._elm&&(this._elm=this._elm.detach(),this._onimageschange()),this},_disable:function(){return this.scale=0,this._zoomInfo=null,this._detachElm(),this._onimageschange(),this},updateZoomState:function(e){var t=this._rect.width>e.width||this._rect.height>e.height;this._zoomOn!==t&&(this._zoomOn=t,this._updateElm())},ondoubleclick:function(e){f.Page_ondoubleclick(this,e)},getClassName:function(){var e="page";if(this._page.isSpread()){var t=this._page.isSpreadLeft();p.Z.contentIsRtl()&&(t=!t),e+=t?" page-left":" page-right"}else this._page.isFirst()?e+=" page-cover":this._page.isLast()&&(e+=" page-back");return this._page.isPotentiallyRestrictedMode()||(e+=" page-unlocked"),e+(this._zoomOn?" zoom-on":" zoom-off")},getElmCont:function(){return this._elm.cont},getElmOffset:function(){var e=this.getElmCont().offsetParent().offset();return e.left+=this.getLeft(),e.top+=this.getTop(),e},isVisible:function(){return!!this._elm},setVisibility:function(e,t){return e?this._attachElm()._loadImage(t):(this.page().isActive(!1),this._detachElm())},loadImages:function(e){return this._attachElm()._loadImage(e)},page:function(){return this._page},getSizeForZoom:function(e){return this.page().getZoomInfo(e).size},getfo(e).scale},getSizeFohis.rscale)},moveAnimation:function(){return t},zomAnimation},_areZ=t.zoomMode},setZoom:function(e){this._zoom=e;var t=this.page().getZoomInfo(e);return this._areZoomInfoEqual(t,this._zoomInfo)||(t.confirmRequired?this.scale||(this.scale=this.page().calculateZoomScale(u.defaultZoom())):this.scale=t.scale,this.rscale=t.scale,this.zoomMode=t.zoomMode,this._zoomInfo=t,this._setSize(t.size),this._onimageschange()),this},getZoom:function(){return this._zoom},getSize:function(){return this._rect},getWidth:function(){return this._rect.width},getHeight:function(){return this._rect.height},setPosition:function(e,t){return e=Math.floor(e),t=Math.floor(t),this._rect.left===e&&this._rect.top===t||(this._rect.locate(e,t),this._updateElm()),this},getPosition:function(){return this._rect},getLeft:function(){return this._rect.left},setLeft:function(e){return e=Math.floor(e),this._rect.left!==e&&(this._rect.left=e,this._updateElm()),th_rect.wiect.width/2},getTop:function(){return this._rect.top},setTop:function(e){return e=Math.floor(e),this._rect.top!==e&&(this._rect.top=e,this._updateElm()),this},hitTest:function(e,t){return!((e||0===e)&&(e<this._rect.left||e>this._rect.left+this._rect.width)||(t||0===t)&&(t<this._rect.top||t>this._rect.top+this._rect.height))},confirmRequiredForZoom:function(e){return this.page().confirmRequiredForZoom(e)},confirmRequired:function(e){return this.page().confirmRequired(e||this.rscale)},_onimageschange:function(){return this.img_inited=this.img_loaded=!1,this},_loadImage:function(e){var t=!1;if(this._attachElm(),this._initImages(),this.img_loaded)return this;this.img_loaded=!0;var n=this._elm.img;if(!this.zoomMode)return n.load(t),this;var i=this.scale,r=this.page().areas().length;if(e){var o=e.left,a=e.top;e.isRelative||(o-=this._rect.left,a-=this._rect.top);var s=o+e.width,u=a+e.height;this.img_loaded=n.loadCells({left:o,top:a,right:s,bottom:u},r,t,i)}else this.img_loaded=n.loadCells(null,r,t,i);return this},_initImages:function(){if(this.img_inited)return this;this.img_loaded=!1,this.img_inited=!0;var e=this.page(),t=this.scale,n=this._elm.img;n.setIsZoomMode(this.zoomMode),n.setSingleLayerMode(e.isSingleLayer()),n.setRect(this._rect);var i=!1===n.isLayersEnabled();if(this.zoomMode){i?(n.setBgUrl(null),n.setFgUrl(null)):(n.setBgUrl(e.buildMagnifierUrl(t)),n.setFgUrl(null));for(var r=e.areas(),o=t/100,a=0,u=r.length;a<u;a++){var c=r[a],l=n.getCell(a),d=l.rect()||l.rect({}).rect();d.left=Math.round(c.l*o),d.top=Math.round(c.t*o),d.right=Math.round(c.r*o),d.bottom=Math.round(c.b*o),d.width=d.right-d.left,d.height=d.bottom-d.top,l.setUrl(e.buildMagnifierUrl(t,c,i))}}else{var h=!0;i?(n.setBgUrl(null),n.setFgUrl(e.buildUrl(t,null,h,this._zoomInfo))):(n.setBgUrl(e.buildUrl(t,"bg",h,this._zoomInfo)),n.setFgUrl(e.buildUrl(t,"fg",h,this._zoomInfo)))}return this.page()&&this.page().isPotentiallyRestrictedMode()&&"true"===s.Z.get("ui.Viewer.ShowEmptyBackgroundForLockedPages")&&e.pageNumber()>1&&(n.setBgUrl(null),n.setFgUrl(null)),this},_setSize:function(e,t){null!=e.width&&(t=e.height,e=e.width);var n=this._rect;return n.width==e&&n.height==t||(n.width=e,n.height=t),n.speadHeight=t,f.onPageViewResizing(this),S.U.send(new T.n7({width:e,height:t,pageNumber:this.page().pageNumber()})),this._updateElm(),this}};var y=function(){var e=[],t=0,n=[],a=i([]);function s(e){this.id=t++,this.parent=e,this.baseZindex=0,this.cont=this.parent.createChild("div",{position:"absolute",zIndex:this.baseZindex,transformOrigin:"0 0",overflow:"visible"}).optimizeShowHideForSingleElement(!0),this.imgCont=this.cont.createChild("div",{position:"absolute",zIndex:0,width:0,height:0,overflow:"hidden"}),this.tintCont=this.cont.createChild("div",{position:"absolute",zIndex:1,width:0,height:0,overflow:"hidden",display:"none"}),this.layersCont=this.cont.createChild("div",{position:"absolute",zIndex:2,width:0,height:0,overflow:"visible"}),this.img=h.Z.createImage(this.imgCont.get(0)),this.cont.doubletap({doubleTap:this.ondoubleclick.bind(this),tap:this.ondoubleclick.bind(this)}),n.push(this),a=a.add(this.cont),w.pageContainerCreated(this),this.cont.bind("onContextMenu",this.onContextMenu.bind(this))}return s.prototype={id:null,bgcolor:null,onattached:i.nd.delegate(),ondettached:i.nd.delegate(),onshowed:i.nd.delegate(),onresized:i.nd.delegate(),onmoved:i.nd.delegate(),onupdated:i.nd.delegate(),onContextMenu:function(e){e.contextMenu.pageNumber=this.getPageNumber()},getLayersContainer:function(){return this.layersCont},getTintContainer:function(){return this.tintCont},getImgContainer:function(){return this.imgCont},getPageNumber:function(){return this.owner?this.owner.page().pageNumber():-1},getWidth:function(){return this.width},getHeight:function(){return this.height},ondoubleclick:function(e){this.owner&&this.owner.ondoubleclick(e)},unloadImages:function(){return this.img.reset(),this},getPage:function(){return this.owner?this.owner.page():null},getPageView:function(){return this.owner},getNormalizedVisibleRect:function(){if(!this.owner)return null;var e=this.owner.page(),t=this.getPageBoundingRect(),n=f.getViewportRect(),i=(0,o.i7)(n,t);if(!i)return null;var r=t.left<n.left&&t.left+t.width>n.left?(n.left-t.left)/t.width:0,a=t.top<n.top&&t.top+t.height>n.top?(n.top-t.top)/t.height:0,s=i.height/t.height,u=i.width/t.width;return{left:r.toPrecision(4),top:a.toPrecision(4),height:s.toPrecision(4),width:u.toPrecision(4),visibleAreaSquare:i.width*i.height,visibleAreaToViewport:i.width*i.height/(n.width*n.height),scale:this.owner.scale,pageNumber:e.pageNumber(),pageName:e.pageName(),areaNumber:e.pageNumber(),areaName:e.pageName()}},getPageBoundingRect:function(){var e=f.getContainerRect(),t=this.getPageView()._rect;return{left:e.left+t.left,top:e.top+t.top,width:t.width,height:t.height}},isVisible:function(){var e=this.getNormalizedVisibleRect();return!!e&&parseFloat(e.width)&&parseFloat(e.height)},attach:function(e){return this.owner=e,this.cont[0].pageNumber=this.getPageNumber(),this.onattached(),this},detach:function(){return this.cont.hide(),this.cont.vis=!1,this.img.reset(),e.push(this),this.ondettached(),this.owner=null,this.bgcolor=null,this.className=null,null},update:function(){if(!this.owner)return i.writeError("trying update detached elm"),this;var e=this.owner._rect,t=this.cont[0];this.bgcolor!==this.owner.bgcolor&&(t.style.backgroundColor=this.bgcolor=this.owner.bgcolor),this.className!==this.owner.getClassName()&&(t.className=this.className=this.owner.getClassName());var n=!1;return this.width!==e.width&&(this.width=e.width,this.cont.fastCss("width",this.width+"px"),this.imgCont.fastCss("width",this.width+"px"),this.layersCont.fastCss("width",this.width+"px"),this.tintCont.fastCss("width",this.width+"px"),n=!0),this.height!==e.height&&(this.height=e.height,this.imgCont.fastCss("height",this.height+"px"),this.layersCont.fastCss("height",this.height+"px"),n=!0),this.speadHeight!==e.speadHeight&&(this.speadHeight=e.speadHeight,this.cont.fastCss("height",this.speadHeight+"px"),this.tintCont.fastCss("height",this.speadHeight+"px"),n=!0),this.cont.vis||(this.cont.show(),this.cont.vis=!0,this.onshowed()),n&&this.onresized(),(this.left!==e.left||this.top!==e.top||this.scale!==e.scale)&&(this.top=e.top,this.left=e.left,this.scale=e.scale,this.onmoved(),this._left=e.left,this.scale&&X.v.csstransforms?(this.cont.css("transform",i.nd.matrix.toTranslateString(this.left,this.top)+" "+i.nd.matrix.toScaleString(this.scale)),i.log("!!!TRANSFORM!!!")):this.cont.translate(this.left,this.top,!0)),this.onupdated(),this}},{attach:function(t){return e.length?e.pop().attach(t):new s(f.getPageContainer()).attach(t)},getAllElmContainers:function(){return a},unloadImages:function(){return r.invokeMap(n,"unloadImages"),this}}}(),w={init:function(e){return f.init(e),this},show:function(e){return b.Z.linkView(this),f.show(e),this},disable:function(){return f.disable(),this},hide:function(){return f.hide(),this},getNavigationHistoryConfig:function(){return{issue:{includeInUrl:!0},cid:{includeInUrl:!0},bookmark:{includeInUrl:!0}}},getTopBarConfig:function(){var e=i.nd.issueMenuOptions;return{backEnable:!0,starEnable:!0,showNewpaperName:!0,headerClass:"toolbar-issuetitle",isMainMenuEnabled:!0,actionMenuOptions:[e.issueDate,e.listen,e.lang],generalMenuOptions:[e.emailAlerts,e.interfaceLang,e.fonts]}},pageContainerCreated:i.nd.delegate(!0),layoutUpdating:i.nd.delegate(!0),layoutUpdated:i.nd.delegate(!0),issueLayoutUpdated:i.nd.delegate(!0)};return w}(),ie=i.extend({},new u.Z,ne);!function(e){var t=[];function n(){if(_.Z.isLogin()){var e=(0,isVisible()}));(function(e){var t=p.Z.issue();return(0,f.s3)(t).then((function(t){return(0,r.reduce)(e,(function(e,n){return e[n]=(0,r.some)(t,(function(e){return(0,r.includes)(e.pages,n)})),e}),{})}))})((0,r.map)(e,(function(e){return e.page.pageNumber()}))).then((function(t){e.forEach((function(e){var n=t&&t[e.page.pageNumber()];e.showBookmark(n)}))}))}}e.pageContainerCreated((function(e){return function(e){t.push(new w(e))}(e)})),e.issueLayoutUpdated((function(){return n()}));f.xT.subscribe((function(){return(0,r.delay)((function(){return n()}),1e3)}));b.Z.linkView(e)}(ie),i.nd.viewer.pagesView=ie;var re=ie},86028:function(e,t,n){"use strict";var i,r,o,a,s,u,c,l,d,h,p,f=n(20384),m=n(60231),g=n(24458),v=n(14581),y=n(35547),_=n(123),b=n(87906),w=n(39752),C=n(77004),I=n(7498),P=n(60581),x=n(79913),S=n(25881),T=n(4169),k=n(54591),A=n(17447),E=n(71357),Z=n(34336),M=n(27670),D=n(6677),L=n(18187),N=n(239),R=(n(44853),n(10110),n(57822),n(96389)),V=null,B=!1,F=!1,O=m.observable(null),z=function(){var e={parentSelector:".l-radio",position:{x:r.find(".l-radio").width()-20,y:60,align:{x:f.nd.ui.menu.align.right,y:f.nd.ui.menu.align.top}}};p.show(e)};function U(e){if(e){var t;t={ArticleId:e.Id},c.repository().accessItem(t).then((function(e){var t=e.Issue||{},n=(t.Id||"").substring(0,4);(0,I.n9)(n).then((function(n){P.L.generateUrl({viewName:g.n3.Radio,articleId:e.Id+"",country:n.country,newspaper:n.publication,issueDate:t.Date||""}).then((function(e){Z.Z.replaceState(e.url)}),(function(){console.warn("Radio url for article was not retrieved.",e)}))}))}),(function(){console.warn("Access item failed for",t)})),l=e,V.Section()!==l.SectionName&&(r.find("#TempIDPanelContent-01").show(),setTimeout(Q,3e3)),re(e),V.setData(e),ce(1*r.find("#r_xs_sliderV").width()),setTimeout((function(){ne(".r-xpanel",44)}),400),setTimeout((function(){ne(".r-xtitle")}),400),setTimeout((function(){ne(".r-xsubtitle")}),400),V.Image()||te(),L.Z.getMeta(l.ArticleId,L.Z.contentTypes.ARTICLE).then((function(e){V.updateVotesMeta(e)})),V.IsPlayDisabled(!1);var n=(0,v.$W)(e.Issue),i=(0,v.HA)(e.Issue);(0,R.b)(n).then((function(e){(0,w.WI)((0,y.j4)({pageContext:{viewName:g.n3.Radio,cid:n,title:e.slug,issueDate:i,context:h}}))}))}}function H(){K(),d=l.ArticleId,U(c.getNextArticle(l.ArticleId))}function j(){K(),d=l.ArticleId,U(c.getArticleFromNextSection(l.SectionName))}function W(){K(),d=l.ArticleId,U(c.getPreviousArticle(l.ArticleId))}function q(){K(),d=l.ArticleId,U(c.getArticleFromPreviousSection(l.SectionName))}function G(e){var t=function(){V.IsPaused(!1),d=l.ArticleId};e.then(t).catch((function(e){if("NotAllowedError"===(null==e?void 0:e.name)){V.IsPaused(!0);var n=A.ZP.val("Errors.AutoPlayBlocked",e+"<p>&nbsp;</p>Click OK to manually start playing the audio.");(0,k.Z)().alert(n).finally((function(){a.get(0).play().th.Z.error(e)}))}))}}))}function X(){V.IsPlayDisabled()||(V.AutoPlay(!0),G(a.get(0).play()),d===l.ArticleId&&f.nd.event.trigger("radioplayresumed",i),d=l.ArticleId)}function Y(){a.get(0).pause(),V.IsPaused(!0),f.nd.event.trigger("radioplaypaused",i)}function K(){a.get(0).pause(),V.Source(""),V.IsPlayDisabled(!0),V.IsPaused(!0),d===l.ArticleId&&f.nd.event.trigger("radioplarrentTime=e}function $(){K(),i.afterPlay.fire(),Z.Z.updateStateCallCount()>1&&!Z.Z.isLanding?Z.Z.historyProvider.back():Z.Z.goView(g.n3.PagesView,{issue:l.Issue,page:l.PageNumbe01").hide()}function ee(){var e=r.height(),t=parseInt(r.find("#TempIDPanelContent-03").height())-8,n=parseInt(r.find("#article-picture").height());if((e-n-179)/2>t){var i=(e-n)/2;r.find("#TempIDPanelContent-03").css("top",i-t+8+"px"),r.find("#TempIDPanelContent-04").css("top",i+n+8+"px"),r.find("#TempIDPanelContent-02").css("top",i+"px")}else{r.find("#TempIDPanelContent-02").css("top","0px");var o=2*e/3-(t+parseInt(r.find("#TempIDPanelContent-04").height()))/2;r.find("#TempIDPanelContent-03").css("top",o+"px"),r.find("#TempIDPanelContent-04").css("top",o+t+8+"px")}}function te(){var e=r.height(),t=parseInt(r.find("#TempIDPanelContent-03").height())-8,n=(e-t)/2;r.find("#TempIDPanelContent-03").css("top",n+"px"),r.find("#TempIDPanelContent-04").css("top",n+t+8+"px")}function ne(e,t){if(o){var n=r.find(e);if(arguments.length>1){var i=(o.height()-n.outerHeight())/2;i<t&&(i=t),n.css({position:"absolute",left:(o.width()-n.outerWidth())/2,top:i})}else n.css({position:"absolute",left:(o.width()-n.outerWidth())/2})}}function ie(){V&&(ne(".r-xpanel",44),ne(".r-xtitle"),V.SubTitle()&&ne(".r-xsubtitle"),V.Image()?(ee(),ne("#article-picture")):te(),V.ImageUrl()&&(ne("#r-lightBox-bd",44),ne("#r-lightBox-fd",44)))}function re(e){if(e){var t=Math.floor(parseInt(r.find("#thumbnail").css("height"),10)),n=Math.floor(parseInt(r.find("#thumbnail").css("width"),10)),i=Math.floor(e.W*n),o=Math.floor(e.Y*t),a=Math.floor(e.X*n),s=Math.floor(a+i),u=t*e.H,c="rect("+o+"px, "+s+"px, "+Math.floor(o+u)+"px, "+a+"px)";r.find("#r-lightBox-fd").css("clip",c)}}function oe(e){if(B){e||(e=event);var t=e.pageX-u.offset().left,n=parseInt(t,10)/parseInt(u.width(),10);J(V.Duration()*n)}return!1}function ae(e){e||(e=event),e.preventDefault();var t=e.touches[0].pageX-u.offset().left,n=parseInt(t,10)/parseInt(u.width(),10);J(V.Duration()*n)}function se(e){return B&&(e||(e=window.event),ce(e.pageX-r.find("#r_xs_sliderV").offset().left)),!1}function ue(e){e||(e=event),e.preventDefault(),ce(e.touches[0].pageX-r.find("#r_xs_sliderV").offset().left)}function ce(e){var t,n=Math.max(e,0);n=Math.min(n,r.find("#r_xs_sliderV").width()),r.find("#r_xs_knobV").css("left",n),r.find("#r_xs_rangeV").css("width",n),a.get(0).volume=(t=parseInt(r.find("#r_xs_sliderV").width(),10))>0?parseFloat((parseInt(r.find("#r_xs_knobV").css("left"),10)/t).toFixed(2)):1}function le(e){this._contextMenuController?this._contextMenuController.context({controller:this,article:e}):this._contextMenuController=new N.Z(f.nd.views.radioView,{controller:this,article:e})}function de(){this._contextMenuController.show({position:{x:r.find(".l-radio").width()/2,y:r.find(".l-radio").height()/2}})}function he(){var e={Issue:{Id:l.Issue,Title:l.ContentName,ShortDateString:l.IssueDate},Page:l.PageNumber||l.Page,ArticleId:l.ArticleId,Id:l.Id,Language:l.Language,OriginalLanguage:l.OriginalLanguage,Title:l.Title,Subtitle:l.Subtitle,Byline:l.Byline,Blocks:l.Blocks,Images:l.Images};if(this._contextMenuController&&this._contextMenuController.context().article.ArticleId==e.ArticleId)de.apply(this);else if(e.Subtitle)le.apply(this,[e]),de.apply(this);else{var t=this;(0,x.$k)("Articles","Get",{keys:l.ArticleId}).then((function(n){var i=n[0];e.Subtitle=i.Subtitle,e.Blocks=i.Blocks,le.apply(t,[e]),de.apply(t)}))}}function pe(){f.nd.ui.menu.items.controllers.base.apply(this,arguments)}function fe(){this._menu=new f.nd.ui.menu.view(this)}f.extend(pe.prototype,f.nd.ui.menu.items.controllers.base.prototype,{_sectionName:null,item:function(e){return this._item||(this._sectionIndex=e,this._sectionName=V.Sections()[e].SectionName,this._item=new f.nd.ui.menu.items.custom(this,this._sectionName,"v7.Client.Radio.SectionListItem").bind(this.activate.bind(this)),this._item.selected=m.computed((function(){var e=V.Sections()[this._sectionIndex],t=V.CurrentArticleId();for(var n in e.Articles)if(e.Articles[n].ArticleId==t)return!0;return!1}),this),this._item.sectionDuration=null,this._item.onClick=function(e){var t;t=e.controller()._sectionName,K(),d=l.ArticleId,U(c.getArticleFromSection(t)),p.hide()}),this._item}}),f.extend(fe.prototype,f.nd.ui.menu.controllers.base.prototype,{_renderer:null,renderer:function(){if(!this._renderer){for(var e=[],t=0;t<V.Sections().length;t++)if(V.Sections()[t].Articles.length>0){var n=new pe;e.push(n.item(t))}this._renderer=new f.nd.ui.menu.renderers.list(this).title(V.NewspaperName()),this._renderer.addGroup(V.IssueDate()).items(e)}return this._renderer},resetMenu:function(){this._renderer=null}}),i={beforePlay:f.Callbacks(),afterPlay:f.Callbacks(),play:function(e){return this.beforePlay.fire(),(p=new fe).resetMenu(),U(c.getCurrentArticle(e)),this},init:function(e,t,n){V||(V=function(){var e,t=T.Z.get("radio.baseUrl")||"http://tts.pressdisplay.com/media/pd/";function n(t){if(e.currentTime=t,0===t)s(null),e.PlayedTime("");else if(t){if(e.Duration()&&e.Duration()>0){var n=Math.floor((e.Duration()-t)/60),i=Math.floor((e.Duration()-t)%60);s(n,i>9?i:"0"+i)}var r=Math.floor(t/60),o=Math.floor(t%60);e.PlayedTime(r+":"+(o>9?o:"0"+o))}e.Duration()>0&&a()}function i(t){if(t==1/0&&(t=0),t||0===t){e.Duration(t);var n=e.Duration()%60;0==t?s(""):s(Math.floor(t/60),Math.floor(n>9?n:"0"+n))}t>0&&a()}function a(){var t,n,i=0;e.currentTime>0&&e.Duration()>0&&(i=e.currentTime/e.Duration()),t=i,n=u.width()*t,n=Math.max(n,0),n=Math.min(n,u.width()),r.find("#r_xs_knob").css("left",n),r.find("#r_xs_range").css("width",n)}function s(t,n){var i="";n&&(i="-"+t+":"+n),e.RemainedTime(i)}function l(e,n){return e&&n?t+e+"_"+n+".mp3":""}function d(e,t){var n=400;if(e&&t){var i,a=Math.floor((o.width()-20)/e.Width*100),s=Math.floor((o.height()-20)/e.Height*100);if(a<n&&s<n)if(a>s){var u=f(r).height();i=(0,S.G2)(t,e.Uid,e.Key,e.Height,u-u/4)}else{var c=f(r).width();i=(0,S.bp)(t,e.Uid,e.Key,e.Width,c-c/4)}else i=a>=n&&s>=n?(0,S.Uj)(t,e.Uid,e.Key,n):a>s?(0,S.Uj)(t,e.Uid,e.Key,s):(0,S.Uj)(t,e.Uid,e.Key,a);return f.writeLog("url="+i+"&id=article-picture"),i+"&id=article-picture"}return"images/1x1.gif"}function h(e,t){if(e&&t)return(0,S.x8)(e,400,t)}var p=(0,w.Ys)(_.e3)===b.t.Web,g=T.Z.get("features.app.mobileview.supported",!1)&&T.Z.get("features.app.header.enabled",!1);return(e={AppHeaderEnabled:m.observable(g),CurrentArticleId:m.observable(""),SubTitle:m.observable(""),NewspaperName:m.observable(""),IssueDate:m.observable(""),Section:m.observable(""),Title:m.observable(""),ImageUrl:m.observable(""),Uid:m.observable(""),Culture:m.observable(""),RemainedTime:m.observable(0),PlayedTime:m.observable(0),Duration:m.observable(""),Support:m.observable(0),Oppose:m.observable(0),Vote:m.observable(0),Sections:m.observable(c.getSections()),Image:m.observable(),Issue:m.observable(),PageNumber:m.observable(),Source:m.observable(),Picture:m.observable(),IsPaused:m.observable(!0),AutoPlay:m.observable(p),IsPlayDisabled:m.observable(!1),close:$,showActions:he,timeupdate:n,load:i,setData:function(t){t&&(V.CurrentArticleId(t.ArticleId),e.Image(t.Image),e.Issue(t.Issue),e.PageNumber(t.PageNumber),e.NewspaperName(t.ContentName||""),e.IssueDate(t.IssueDate||""),e.Section(t.SectionName||""),e.Title(t.Title||""),e.SubTitle(t.Text||""),e.Uid(t.Uid),e.Culture(t.Culture),e.Source(l(t.Uid,t.Culture)),e.Picture(d(t.Image,t.Issue)),e.ImageUrl(h(t.Issue,t.PageNumber)),L.Z.getMeta(t.ArticleId,L.Z.contentTypes.ARTICLE).then((function(t){e.updateVotesMeta(t)})),n(0),i(0))},updateDate:function(t){t&&(e.Culture(t.Culture),e.Source(l(e.Uid(),t.Culture)),e.SubTitle(t.Text),e.PageNumber(t.PageNumber),e.Image(t.Image),e.Picture(d(t.Image,e.Issue())),e.ImageUrl(h(e.Issue(),t.PageNumber)))},votingEnabled:T.Z.get("ui.Voting.enable",!0),vote_yes:function(){L.Z.voteLike(e.CurrentArticleId(),L.Z.contentTypes.ARTICLE).then((function(e){V.updateVotesMeta(e)}))},vote_no:function(){L.Z.voteDislike(e.CurrentArticleId(),L.Z.contentTypes.ARTICLE).then((function(e){V.updateVotesMeta(e)}))},next:H,prev:W,play:X,pause:Y,isMp3Supported:function(){var e=new window.Audio,t=!!e.canPlayType&&""!=e.canPlayType("audio/mp4");return t||D.Z.error("This browser does not support audio."),t},updntUserVote)}}).Source.subscribe((function(t){var n=document.getElementById("audio");n&&t?(n.src=t,e.AutoPlay()&&G(n.play())):null==n||n.pause()})),e.Total=m.computed((function(){return e.Support()+e.Oppose()})),e.ValSupportPercent=m.computed((function(){var t=0;return e.Total()>0&&(t=Math.round(100*e.Support()/e.Total())),t})),e.SupportPercentrcent()+"%"})),e}(),O(V)),F||(F=!0,M.Z.activeViewChanged((function(e,t){t===g.n3.Radio&&f("#Panel_radioContainer").css({zIndex:1003})})),o=e,r=e.elm(),h=t,E.Z.renderTo("v7.Client.Dialogs.Radio",V,r),u=r.find("#r_xs_slider"),V.isMp3Supported()&&((a=f("#audio")).on("ended",(function(){f.nd.event.trigger("radioplaystopped",i),f.writeLog("ended"),H()})),a.on("timeupdate",(function(){if(this.currentTime>9223372e6)return f.nd.event.trigger("radioplaystopped",i),void H();V.timeupdate(this.currentTime)})),a.on("loadeddata",(function(){f.writeLog("loadeddata "+this.duration),V.IsPlayDisabled(!1),f.nd.event.trigger("radioplaystarted",i,{currentArticle:l,returnView:h}),V.load(this.duration),this.paused&&V.AutoPlay()&&G(a.get(0).play())}))),r.find("#article-picture"e-picture")})),r.find("#thumbnail").on("load",(function(){ne("#r-lightBox-bd",44)})),r.find("#lightBox"Box-fd",44)})),r.on("click",".b-toc",z),u.on("mousedown",(function(e){return B=!0,oe(e),!1})),u.on("mousemove",oe),u.on("touchstart",ae),u.on("touchmove",ae),r.on("mousedown","#r_!0,se(e),!1})),r.on("mousemove","#r_xs_sliderV",se),r.on("touchstart","#r_xs_sliderV",ue),r.on("touchmove","#r_xs_sliderV",ue),r.on("mouseup"urn B=!1,!1})),r.find("#touchwipeContent").touchwipe({wipeLeft:H,wipeRight:W,wipeUp:q,wipeDown:j,min_move_x:20,min_move_y:20,preventDefaultEvents:!0}),C.bind("offline",(function(){r.find(".r-xvote").addClass("dis")})),C.bilass("dis")})),o.resize(ie),o.oncontentchanged())},close:$,dispose:function(){r&&(r.off(),r.empty(),c.offLoaded(),s&&s.destroyPlayer(),a.get(0).pause(),r=o=a=s=u=V=c=l=d=null,F=B=F=p=!1,O(null))},showTocMenu:z,model:O,setDataProvider:function(e){(c=e).onLoaded((function(e,t){l.ArticleId==t.ArticleId&&(V.updateDate(t),re(t),setTimeout((function(){ne(".r-xsubtitle")}),400),V.Image()||te())}))}},t.Z=f.nd.viewer.radio=i},51228:function(e,t,n){"use strict";var i=n(20384),r=n(60231),o=n(40180),a=n(11144),s=n(4169),u=n(17447),c=n(55193),l=n(14347),d=n(3284),h=n(8871),p=n(80053),f=n(60683),m=n(8270),g=n(62980),v=n(14003),y=n(34336),_=n(48921),b=n(14744),w=n(24458),C=n(27670),I=n(96389),P=n(47070),x=n(83062),S=n(74036),T=n(91574),k=n(71357),A=n(73546),E=n(91330),Z=n(95766),M=n(12594);function D(e){return function(){l.Z.isLogin()?e.apply(this,arguments):p.default.signIn()}}t.Z=function(){function e(e){this._config=i.extend({},this._defaultConfig,e),this._controller=null,this._model={enabled:r.observable(),css:r.observable(),template:r.observable(),title:r.observable()},i.extend(this,this._model),this.init()}function t(e,t){this.config=i.extend({},e),this.container=t}function n(e,t,n){this._config=i.extend({},this._defaultConfig,e),this.container=t,this.height=0,this.items=n||r.observableArray(),this.isAnimated=!1}i.extend(e.prototype,{_defaultConfig:{template:"sidebarSettings_default",authorized:!1,enabled:!0,constructor:P.Z.singleItem,clickWrapper:function(e){e.apply(this,arguments)},position:{x:i.windowWidth()/2,y:i.windowHeight()/2,align:{x:S.ZP.align.center,y:S.ZP.align.center}}},init:function(){for(var e in this._model)this._model.hasOwnProperty(e)&&this._config[e]&&this._model[e](this._config[e])},update:function(){},onClick:function(){this._controller||(this._controller=new this._config.constructor(this._config),this._controller.itemsControllerCTOR(x.Z.get(this._config.itemName)).itemsControllerParams([this._controller]));(e._config)};this._config.authorized&&(t=D(t)),e._config.clickWrappebleFlag(!1)}}),i.extend(t.prototype,{controllers:null,container:null,_template:"v7.Client.Sidebar.Settings",height:0,initModel:function(){this.config.childClickWrapper&&(e.prototype._defaultConfig.clickWrapper=this.config.childClickWrapper),this.controllers=[];var t=new e({title:u.ZP.val("Menu.Fonts"),css:"",itemName:"fonts"});this.controllers.push(t),s.Z.get("ui.Sidebar.ShowEmailAlertsInSettings",!0)&&(t=new e({title:u.ZP.val("Menu.Account.EmailAlerts"),authorized:!0,css:"",itemName:"emailAlerts"}),this.controllers.push(t)),s.Z.get("interfaceLanguage").enabled&&((t=new e({template:"sidebarSettings_translate",title:u.ZP.val("Menu.InterfaceLanguage"),css:"",itemName:"language"})).interfaceLanguage=r.observable(m.get("lng")||"en"),this.controllers.push(t))},render:function(e){this.container=e||this.container||i(document.body),k.Z.renderTo(this._template,this,this.conts.rendee].update()},templateName:function(){return"default"}}),i.extend(n.prototype,{defaultConfig:{,arguments)}},getNewspaperModel:function(e){var t=this;return{name:e.Title,goToNewspaper:function(){if(!t.isAnimated)return t._config.childCaper(e.CID)})).apply(this,arguments);console.info("NewspapersSection click while animated")}}},loadNewspapers:function(){var e=this;return d.Z.load().then((function(t){e.items.length&&this.items.removeAll();var n=t.newspapers.map((function(t){return e.getNewspaperModel(t)}));return e.items(o.sortBy(n,"name")),e.items}))},init:function(){return this.loadNewspapers()},update:function(){return this.init()}});var L=function(){function e(e){return _.IG().then((function(e){return q.favoritesCountAll(e.length),b.C.getStats().then((function(e){q.monitorsCount(e.allCount)}))}))}function o(){var t;q&&(q.isLogin(l.Z.isLogin()),q.isLogin()&&(!0,t=new a.B,h.default.load(true).then((function(){q.nickName(h.default.nickname).photo(h.default.photo),q.avatar((0,f.b_)(h.default.nickname,h.default.photo.url,f.wC.medium)),t.resolve()})),t.promise(),e()),v(!0))}function m(e){return d.Z.load(e).then((function(e){s.Z.loaded().then((function(){var t=s.Z.get("ui.TopToolbar.catalogSimpleViewEnable",!0)||!q.isLogin()||0==e.newspapers.length;q.catalogSimpleView(t),q.catalogSimpleView()&&(q.newspapersCountEnabled(s.Z.get("ui.TopToolbar.sourceCountEnable",!0)),Y.configService=!0,(0,I.sd)().then((function(e){q.newspapersCount(e.publicationsCount)})),X=null,Y.myNewspaperService=!0)})).catch((function(){Y.configService=!1}))})).catch((function(){Y.myNewspaperService=!1}))}function v(e){q&&(s.Z.loaded().then((function(){q.categories(function(){var e=[],t=s.Z.get("ui.Sidebar.Categories");for(var n in t)t.hasOwnProperty(n)&&e.push({name:u.ZP.val(t[n].resourceName)||n,path:t[n].path,order:t[n].order,categoryClick:fury:e.path})}))}});reder-t.order}))}()),q.blogLocation(s.Z.get("ui.Sidebar.BlogLocation","")),q.newsFeedEnabled(s.Z.get("ui.Sidebar.NewsFeedEnabled",!0)),q.catalogEnabled(s.Z.get("ui.Sidebar.CatalogEnabled",!0)),q.blogEnabled(s.Z.get("ui.Sidebar.BlogEnabled",!0)),q.blogLocation(s.Z.get("ui.Sidebar.BlogLocation","")),q.hotzoneMapEnabled(s.Z.get("ui.Sidebar.HotzoneMapEnabled",!0)),q.opinionsEnabled(!1),q.aboutEnabled(s.Z.get("pagesView.ShowCustomItem",!1)),q.aboutLocation(s.Z.get("pagesView.CustomItemURL","")),q.monitorsEnabled(s.Z.get("ui.Sidebar.MonitorsEnabled",!1)&&s.Z.get("ui.MyTopics.enable",!0)),q.accountEnabled(s.Z.get("ui.Sidebar.MyAccount.Display",!1)),q.userInfoEnabled(s.Z.get("pagesView.enableUserInfo",!1)),q.emailAlertEnabled(s.Z.get("ui.Sidebar.ShowEmailAlerts",!0)),q.signInEnabled(s.Z.get("ui.Sidebar.SignInEnabled",!ion(){x(e)}}function x(t){if(!K){K=!0;var n,r=(s=function(){"function"==typeof t&&t(),q.tintEnabled(!q.tintEnabled())},function(){q.tintEnabled()?U&&(U.blur(),i.browser.msie?(document.removeEventListener("keydown",B,!0),document.removeEventListener("keypress",B,!0),document.removeEventListener("keyup",B,!0)):U.unbind("keydown keyup keypress",B)):function(){if(U){if(q&&q.isLogin()&&e(),U.focus(),i.browser.msie)return document.addEventListener("keydown",B,!0),void document.addEventListener("keypress",B,!0);U.bind("keydown keypress",B)}}(),K=!1,s.apply(this,arguments)}),o=U.outerWidth(),a={};n=i.browser.msie&&i.browser.msie_mode<10?O.elm().position():O.elm().translate(),a[F.slideProp]=0==n.left?o:0,a[F.slideProp]||function(){if(G)for(var e=0,t=G.controllers.length;e<t;e++){var n=G.controllers[e];n.hide&&n.hide()}}(),0!=n.left&&(G&&0!=G.container.outerHeight()&&S(),X&&0!=X.container.outerHeight()&&L()),O.elm().animate(a,{duration:F.animationDuration,queue:!1,complete:r})}var s}function S(){if(Z.U.send(new M.b({action:"settings"})),!G){var e=i("#settingsContainer",z.elm());(G=new t({childClickWrapper:P},e)).show()}if(G.height=i("> ul",G.container).outerHeight(),!G.isAnimated){G.isAnimated=!0;var n=G.container.outerHeight();0==n&&G.update(),G.container.parent("li").toggleClass("is-expanded"),G.container.animate({height:0===n?G.height:0},{duration:F.animationDuration,queue:!1,complete:function(){G.isAnimated=!1,N.apply(this,arguments)}})}}function L(){(X?Promise.resolve(X):(X=new n({childClickWrapper:P},i("#myNewspapersContainer",z.elm()),q.myNewspapers)).init().then((function(e){return X.height=i("> ul",X.container).outerHeight(),d.Z.stream.subscribe((function(e){e.length>0?X&&X.update().then((function(){X.height=i("> ul",X.container).outerHeight()})):m()})),X}))).then((function(e){if(!e.isAnimated){e.isAnimated=!0;var t=e.container.outerHeight();e.container.parent("li").toggleClass("is-expanded"),e.container.animate({height:0===t?e.height:0},{duration:F.animationDuration,queue,arguments)}})}}))}function N(){if(z&&j&&H){var e=z.elm().innerHeight()-H.outerHeight();j.css({height:e}),j.trigger("resize")}}function R(e){q&&q.tintEnabled()&&e.which===g.D.esc&&x(),B(e)}function V(e){e.velocity().vx<0&&Math.abs(e.velocity().vx)>Math.abs(e.velocity().vy)&&x()}function B(e){return e||(e=window.event),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1}var F={newsFeedEnabled:!0,catalogEnabled:!0,onDeviceEnabled:!1,favoritesEnabled:!1,monitorsEnabled:!0,peopleEnabled:!1,settingsEnabled:!0,giftCardEnabled:!1,hotzoneMapEnabled:!0,accountEnabled:!0,opinionsEnabled:!1,helpEnabled:!0,aboutEnabled:!0,blogEnabled:!0,slideProp:"translateLeft",animationDuration:350},O=null,z=null,U=null,H=null,j=null,W=null,q=null,G=null,X=null,Y={configService:!0,myNewspaperService:!0,catalogService:!0,loaded:function(){for(var e in this)if(this.hasOwnProperty(e)&&"boolean"==typeof this[e]&&!this[e])return!1;return!0}},K=!1;return{show:function(e){if(q)return v(),void x(e);var t;(t={enabled:r.observable(!1),tintEnabled:r.observable(!1),userInfoEnabled:r.observable(!0),signInEnabled:r.observable(!0),avatar:r.observable((0,f.b_)(h.default.nickname,h.default.photoUrl,f.wC.medium)),profileMenuShow:function(){x(D((function(){y.Z.goView(w.n3.Profile,{type:"profile",profileId:h.default.getProfileId()})})))},isLogin:r.observable(l.Z.isLogin()),nickName:r.observable("..."),photo:r.observable(h.default.photosignIn()}))},newspapersCountEnabled:r.observable(!1),newspapersCount:r.observable(""),myNewspapers:r.observableArray(),newsFeedEnabled:r.observable(F.newsFeedEnabled),catalogEnabled:r.observable(F.catalogEnabled),catalogSimpleView:r.observable(!ult.show()}))},myNewspapersToggle:L,onDeviceEnabled:r.observable(F.onDeviceEnabled),onDeviceShow:function(){console.info("sidebar onDevice")},favoritesEnabled:r.observable(s.Z.get("ui.Bookmarks.enable",!1)),favoritesShow:function(){x((function(){var e=C.Z.findView(w.n3.Bookmarks);y.Z.goView(w.n3.Bookmarks,e.createParams({profileId:h.default.getProfileId()}),!0)}))},favoritesCountAll:r.observable(),monitorsEnabled:r.observable(F.monitorsEnabled),monitorsShowmonitorId:0})}))},monitorsCount:r.observable(),peopleEnabled:r.observable(F.peopleEnabled),peopleShow:function(){console.info("sidebar People")},settingsEnabled:r.observable(F.settingsEnabled),settingsToggle:S,emailAlertEnabled:r.observable(F.emailAlertEnabled),emailAlertShow.EmailAlerts)}))},customizeHomeShow:function(){x(D((function(){T.Z.feedSettings.show()})))},hotzoneMapEnabled:r.observable(F.hotzoneMapEnabled),hotzoneMapShow:function(){x((function(){y.Z.goView(w.n3.HotSpotsHub)}))},accountEnabled:r.observable(F.accountEnabled),accountShow:function(){x((function(){window.location=window.basePath+"accounting/account"}))},opinionsEnabled:r.observable(F.opinionsEnabled),opinionsShow,{reload:!0})}))},helpEnabled:r.observable(F.helpEnabled),helpShow:function(){x((function(){y.Z.goView(w.n3.Help)}))},aboutEnabled:r.observable(F.aboutEnabled),aboutLocation:r.observable(),blogEnabled:r.observable(F.blogEnabled),blogLocation:r.observable(),logout:function(){x((function(){var e,t=C.Z.getActiveView(),n=s.Z.get("Authentication.ExternalLogoutPage"),i=s.Z.get("Authentication.EnablePublisherAuthenticationWebService");e=i&&n?n:l.Z.getRedirectionUrl("AfterSignOut");var r=null===t||""!==e;p.default.signOut({supressReauthorize:r}).then((function(){r?window.location=e||"http://".concat(window.currentHostName).concat(window.basePath):(y.Z.resetState(),E.Z.enableOriginalLanguage())}))}))}}).categories=r.observableArray(),l.Z.onUserStateChanged(o),q=t,o(),v(),k.Z.renderTo("v7.Client.Sidebar",q,z.elm()),q.enabled(!0),(U=i("#sidebarMenu",z.elm())).css({position:"relative","-ms-touch-action":"none"}),i.browser.msie&&i.browser.msie_mode<10&&(F.slideProp="left"),U.css(F.slideProp,-U.outerWidth()),H=i(".appmenu-header",U),j=i(".appmenu-body",U),W=i(".dialog-tint",z.elm()),c.ZP.bind(W,{fling:V,singleTap:function(){x()}}),N(),i(document).keyupesize(null,N)}}}();return i.nd.viewer.sidebar=L}()},64009:function(e,t,n){"use strict";n.d(t,{H:function(){return T},O6:function(){return A},Sl:function(){return k}});var i=n(22970),r=n(20384),o=n(40180),a=n(4169),s=n(25881),u=n(60683),c=n(10110),l=n(8871),d=n(54591),h=n(17447),p=n(58653),f=n(25371),m=n(65557),g=n(25747),v=n(18187),y=n(70263),_=n(65317),b=n(92741),w=n(30724),C=n(27670),I=n(50104),P=n(69327),x=n(11569),S=function(){function e(e,t){void 0===t&&(t={}),this._parent=e||document.body,this._renderedBlock=null,this._context=t,this._available=!0,this._enabled=!0,this._disabledCssClass=""}return e.prototype.available=function(){return this._available&&e.available(this._context)},e.available=function(){return!0},e.prototype.enabled=function(){return this._enabled},e.prototype.disabledCssClass=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?(this._disabledCssClass=e[0],this):this._disabledCssClass},e.prototype.bindEvents=function(){},e.prototype.renderedBlock=function(){return this._renderedBlock},e.prothis._context},e}(),T=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(this,(0,i.ev)([],(0,i.CR)(t),!1))||this;return r._renderedBlock=null,r._disabledCssClass="dis",r._itemsController=c.U2("comment"),r._userInfoChange=l.default.updates.subscribe((function(){return r._refreshUserPhoto(r._renderedBlock)})),r}return(0,i.ZT)(t,e),t.prototype.available=function(){return this._available&&t.available(this._context)},t.available=function(e){var t=e.article.Restrictions&&e.article.Restrictions.CommentsDisabled;return a.Z.get("ui.Comments.enablePost",!0)&&!t},t.prototype.enabled=function(){return this._enabled=this._itemsController.prototype.enabled.apply(this._itemsController.prototype,[this._context.view,this._context]),this._enabled},t.prototype.render=function(e){e||(e=this._parent);var t=r('<div class="art-comments-call '.concat(this.enabled()?"":this.disabledCssClass(),'"></div>'));this.available()||t.css("display","none");var n=r('\n                <a href="javascript:void(0)" class="art-comments-call-input">\n                    <span class="userphoto"></span>\n                    <span class="placeholder">'.concat(h.ZP.val("Comments.WriteComment"),"</span>\n                </a>"));return this._refreshUserPhoto(n),t.append(n),e.append(t),this._renderedBlock=t,this._renderedBlock},t.prototype._refreshUserPhoto=function(e){e&&e.find(".userphoto").html((0,u.b_)({nickname:l.default.nickName,imageId:l.default.avatarImageId,size:u.wC.large,fallbackAvatarUrl:l.default.photoUrl}))},t.prototype.click=function(){this._context&&this._enabled?p.Z.comment.activate(this._context.view,this._context,!0):(0,d.Z)(h.ZP.val("Dialogs.Alert.ActionUnavailable"))},t.prototk.bind(this))},t.prototype.dispose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._userInfoChange.unsubscribe(),e.prototype.dispose.apply(this,(0,i.ev)([],(0,i.CR)(t),!1))},t}(S),k=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(this,(0,i.ev)([],(0,i.CR)(t),!1))||this;return r._tools=[],r}return(0,i.ZT)(t,e),Object.defineProperty(t,"type",{get:function(){return I.Z.tools},enumerable:!1,configurable:!0}),t.prototype.getvailable()}))},t.prototype.available=function(){return this._available&&S.available(this._context)},t.prototype.render=function(e){var t,n,r=this;if(this.available()){e||(e=this._parent);var a=e.createChild("div"),s="art-tools-tiny ".concat(this.enabled()?"":this.disabledCssClass()),u=[["more",{cssClass:"pri pri-actionmenu",rootClass:"ati-more",text:h.ZP.val("Menu.More"),click:function(e){return f.Z.current.textView.onToolsClicked(e),!1}}],["comment",{cssClass:"pri-comment",rootClass:"ati-comment",text:h.ZP.val("Menu.Comment"),postProcess:function(e){if(this.available()){var t=this._context.article.PostsCount||"+",n=this._context.article.ArticleId,i=this._context.article.LikeItVotes-this._context.article.HateItVotes,r="";i>=0?r="pos":i<0&&(r="neg"),o.assign(e,{template:function(){return'\n<li class="'.concat(this._rootClass,'">\n    <a href="javascript:void(0)">\n        <span class="lbl-comment ').concat(r,'">\n            <em>').concat(t,'</em>\n        </span>\n        <span class="ati-title">').concat(h.ZP.val("Menu.Comment"),"</span>\n    </a>\n</li>")},voteCssClass:"",onCommentsCountUpdated:function(t){if(e._elm){var n=t.PostsCount||"+";e._elm.find("span.lbl-comment > em").text(n)}},onCommentsMetaUpdated:function(t){if(e._elm){var n=this._getCommentElement();this._updateCounter(n,t.commentsCount)}},onVotesMetaUpdated:function(t){if(e._elm){var n=this._getCommentElement();this._updateVotes(n,t.dislikesCount>t.likesCount)}},_getCommentElement:function(){return e._elm.find("span.lbl-comment")dClass("pos")},_updateCounter:function(e,t){return e.find("em").text(t||"+")},bindEvents:function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];m.Z.prototype.bindEvents.apply(e,t),e._onCommentsMetaUpdatedUnsubscribe=g.Z.onCommentsMetaUpdated((function(t,i,r){parseInt(i.articleId,10)===parseInt(n,10)&&e.onCommentsMetaUpdated(r)}));var r=v.Z.contentTypes.ARTICLE;e._onVotesMetaUpdatedUnsubscribe=v.Z.onVotesMetaUpdated(r,(function(t,i,r){parseInt(i,10)===parseInt(n,10)&&e.onVotesMetaUpdated(r)}))},dispose:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._onCommentsMetaUpdatedUnsubscribe&&e._onCommentsMetaUpdatedUnsubscribe(),e._onVotesMetaUpdatedUnsubscribe&&e._onVotesMetaUpdatedUnsubscribe(),m.Z.prototype.dispose.apply(e,t)}})}}}],["share",{cssClass:"pri-share",rootClass:"ati-share",text:h.ZP.val("Menu.Share")}],["listen",{cssClass:"pri-listen",rootClass:"ati-listen",text:h.ZP.val("Menu.Listen")}],["bookmark",{context:this._context,cssClass:this._context.article.BookmarkId&&(null===(t=this._context.article.Collections)||void 0===t?void 0:t.length)>0?"pri-bookmarked":"pri-bookmark",rootClass:"ati-bookmark",text:this._context.article.BookmarkId&&(null===(n=this._context.article.Collections)||void 0===n?void 0:n.length)>0?h.ZP.val("SaveToCollection.Saved","Saved"):h.ZP.val("SaveToCollection.Save","Save"),postProcess:function(e){o.assign(e,{dispose:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.bookmarkCreateSubscription&&e.bookmarkCreateSubscription.unsubscribe(),e.bookmarkDeleteSubscription&&e.bookmarkDeleteSubscription.unsubscribe();var r=o.get(e,"constructor.prototype.dispose");o.isFunction(r)&&r.call.apply(r,(0,i.ev)([e],(0,i.CR)(t),!1))},switchOn:function(t){var n=t.articleId;e.articleId===n&&(e.bookmarkId="bookmarked",e._elm&&(e._elm.find(".pri-bookmark").removeClass("pri-bookmark").addClass("pri-bookmarked"),e._elm.find(".ati-title").text(h.ZP.val("SaveToCollection.Saved","Saved"))))},switchOff:function(t){var n=t.articleId;e.articleId===n&&(e.bookmarkId=null,e._elm&&(e._elm.find(".pri-bookmarked").removeClass("pri-bookmarked").addClass("pri-bookmark"),e._elm.find(".ati-title").text(h.ZP.val("SaveToCollection.Save","Save"))))},articleId:this._context.article.ArticleId,bookmarkId:this._context.article.BookmarkId,bookmarkCreateSubscription:null,bookmarkDeleteSubscription:null}),e.bookmarkCreateSubscription=y.bookmarkCreateSubscription.pipe((0,x.h)((function(e){return e.data&&e.data.articleId}))).subscribe((function(t){return e.switchOn(t.data)})),e.bookmarkDeleteSubscription=y.bookmarkDeleteSubscription.pipe((0,x.h)((function(e){return e.data&&e.data.articleId}))).subscribe((function(t){return e.switchOff(t.data)}))}}],["pageView",{cssClass:"pri-pageview",rootClass:"ati-pageview",text:h.ZP.val("Menu.PageView")}],["print",{cssClass:"pri-print",rootClass:"ati-print",text:h.ZP.val("Menu.Print")}]];a.addClass(s);var l=a.createChild("ul"),d=[this._context.view,this._context];return o.forEach(u,(function(e){var t=(0,i.CR)(e,2),n=t[0],o=t[1],a=c.U2(n),s=new m.Z,u=a.prototype;s.cssClass("pri ".concat(o.cssClass)).rootClass(o.rootClass).text(o.text).enabled(Promise.all([u.enabled.apply(u,(0,i.ev)([],(0,i.CR)(d),!1)),u.available.apply(u,(0,i.ev)([],(0,i.CR)(drn e[0]&&e[1]}))).itemsControllerCTOR(a).additionalItemsControllerParams(d),o.click&&(s.click=o.click),o.postProcess&&o.postProcess.call(r,s),r._tools.push(s)}),this),this.getAvailableTools().forEach((function(e){e.renderTo(l)})),this._renderedBlock=a,this._renderedBlock}},t.prototndEvents()}))},t.prototype.dispose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._tools&&(o.forEach(this._tools,(function(e){e.dispose()})),delete this._tools),e.prototype.dispose.apply(this,(0,i.ev)([],(0,i.CR)(t),!1))},t}(S),A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),t.prototype.render=function(e){var t=this;if(this.available()){e||(e=this._parent);var n=e.createChild("div"),r=n.createChild("div"),a=n.createChild("div"),s=a.createChild("div");n.addClass("art-vote"),r.addClass("art-vote-controls"),a.addClass("vote-bar"),s.addClass("vote-bar-level");var u=[{postProcess:function(e){var t=this._context.article,n=h.ZP.val("Menu.Support"),i=f(t.LikeItVotes),r=t.CurrentUserVote>0;o.assign(e,{template:function(){return'\n<a href="javascript:void(0)" class="vote-btn vote-bump '.concat(r?"is-selected":"",'">\n    <span class="pri ').concat(r?"pri-bumped":"pri-bump",'" aria-hidden="true"></span>\n    <span>').concat(n,'</span>\n    <span class="vote-num">').concat(i,"</span>\n</a>")},bindEvents:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];m.Z.prototype.bindEvents.apply(e,t)},dispose:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];m.Z.prototype.dispose.apply(e,t)},click:function(){t.voteLike().then(v)}})}},{postProcess:function(e){var t=this._context.article,n=h.ZP.val("Menu.Oppose"),i=f(t.HateItVotes),r=t.CurrentUserVote<0;o.assign(e,{template:function(){return'\n<a href="javascript:void(0)" class="vote-btn vote-dump '.concat(r?"is-selected":"",'">\n    <span class="pri ').concat(r?"pri-dumped":"pri-dump",'" aria-hidden="true"></span>\n    <span>').concat(n,'</span>\n    <span class="vote-num">').concat(i,"</span>\n</a>")},bindEvents:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];m.Z.prototype.bindEvents.apply(e,t)},dispose:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];m.Z.prototype.dispose.appike().then(v)}})}}],l=c.U2("vote"),d=[this._context.view,this._context];o.forEach(u,(function(e){var n,r=new m.Z;r.enabled((n=l.prototype).enabled.apply(n,(0,i.ev)([],(0,i.CR)(d),!1))).itemsControllerCTOR(l).additionalItemsControllerParams(d),e.postProcess&&e.postProcess.call(t,r),t._tools.push(r)})),this.getAvailableTools().forEach((function(e){e.renderTo(r)}));var p=this._context.article;return g(p.LikeItVotes,p.HateItVotes,p.CurrentUserVote),this._renderedBlock=n,this._renderedBlock}function f(e){return e&&"(".concat(e,")")||""}function g(e,t,i){var o=e+t,a=100;o>0&&(a=parseInt(e/o*100,10)),s.css("left","".concat(a,"%")),i?n.addClass("is-voted is-voted-mine"):n.removeClass("is-voted is-voted-mine");var u=r.find(".vote-bump");u.toggleClass("is-selected",i>0),u.find(".pri").toggleClass("pri-bumped",i>0).toggleClass("pri-bump",i<1),u.find(".vote-num").text(f(e));var c=r.find(".vote-dump");c.toggleClass("is-selected",i<0),c.find(".pri").toggleClass("pri-dumped",i<0).toggleClass("pri-dump",i>-1),c.find(".vote-nurentUserVote)}},t.prototype.available=function(){return this._available&&S.available(this._context)},t}(k),E=function(e){function t(t,n){for(var a=[],s=2;s<arguments.length;s++)a[s-2]=arguments[s];var u=e.apply(this,(0,i.ev)([t,n],(0,i.CR)(a),!1))||this;return u._imgHeight=null,u._imgWidth=null,u._newspaperName=u._context.article.Issue&&u._context.article.Issue.Title||"",u._issueDate=u._context.article.Issue&&u._context.article.Issue.DateFormatted||"",u._pageName=u._context.article.PageName||o.isObject(u._context.article.Page)&&u._context.article.Page.name||r.isNumeric(u._context.article.Page)&&u._context.article.Page||"",u._page=r.isNumeric(u._context.article.Page)?u._context.article.Page:u._context.article.Page.number,u._src="",u._onClick=u._click.bind(u),u._extraHeight=null,u._addByLine=!0,u._action=p.Z.pageView,u}return(0,i.ZT)(t,e),t.protohis._contextrticle.Issue)},t.prototype.render=function(e,t){e||(e=this._parent);var n=e.createChild("div").addClass("art-sourcepage"),i=n.createChild("div").addClass("page"),a=i.createChild("div").addClass("page-thumb"),s=i.createChild("div").addClass("page-meta"),u=r('<img noresize="true">').addClass("page-img");if(u.appendTo(a),this._imgContainerHeight&&(a.css("height","".concat(this._imgContainerHeight,"px")),this._allImgContainerHeights&&a.attr("nd-heights","".concat(o.values(this._allImgContainerHeights)))),this._src&&u.attr("src",this._src),this._imgHeight&&u.attr("height",this._imgHeight),this._imgWidth&&u.attr("width",this._imgWidth),this._addByLine){var c=s.createChild("div").addClass("page-source"),l=s.createChild("div").addClass("page-date");c.text(this._newspaperName),l.text(this._issueDate),this._pageName&&s.createChild("div").addClass("page-num").text(this._pageName)}return t&&i.tap(this._onClick),this._renderedBlock=n,this._renderedBlock},t.prototype.imgContainerHeight=function(e){return e&&(this._imgContainerHeight=e),this},t.prototype.allImgContainerHeights=function(e){return e&&(this._allImgContainerHeights=e),this},t.prototype.imgHeight=function(e){return e&&(this._imgHeight=e),this},t.prototype.imgWidth=function(e){return e&&(this._imgWidth=e),this},t.prototype.addByLine=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?(this._addByLine=e[0],this):this._addByLine},t.prototype.src=function(e){return e&&(this._src=e),this},t.prototype.newspaperName=function(e){return e&&(this._newspaperName=e),this},t.prototype.issueDate=function(e){return e&&(this._issueDate=e),this},t.prototype.page=function(e){return e&&(this._page=e),this},t.prototype._click=function(){this._action.available(this._context.view,this._context)&&this._action.enabled(this._context.view,this._context)&&this._action.activate(this._context.view,this._context)},t.pclick=e),this},t.pimage=e),this},t.prototype.thumbSrc=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?(this._src=e[0],this):this._src},t}(S),Z=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(this,(0,i.ev)([],(0,i.CR)(t),!1))||this;return r.onRemoved=r.onRemovedHandler.bind(r),r.colspan=1,r}return(0,i.ZT)(t,e),t.prototype.height=function(e){return e?(this._height=e,this):this._height},t.prototype.elm=function(){return this._parent.elm()},t.prototype.top=function(){return this._parent.top()},t.prototype.onRemovedHandler=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.prototype.onCellRemoved.apply(this,(0,i.ev)([],(0,i.CR)(t),!1)),this._parent.dispose()},t.prototype.highlight=function(){},t}(_.oy),M={full:0,tools_comment:1,thumbnail:2},D=[T,k,A],L=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(this,(0,i.ev)([],(0,i.CR)(t),!1))||this;return r._thumbHeights={},r._parts=[],r._renderedParts=[],r._height=0,r._width=0,r._minThumbHeight=0,r._maxThumbHeight=1,r._thumbHeightRange=[],r._lineHeight=(0,b.Dp)()||0,r._minHeightFactor=1,r._defaultAspectRatio=1.1,r._addFullSizedThumb=!0,r}return(0,i.ZT)(t,e),t.isAvailable=function(e,t){var n={article:e,view:C.Z.getActiveView()};if(t===M.full||t===M.tools_comment)for(var i=0;i<D.length;++i)if(D[i].available(n))return!0;return t===M.full?S.available(n):t===M.thumbnail&&E.available(n)},Object.defineProperty(t,"type",{get:function(){return I.Z.tools},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"__type",{get:function(){return t.type},enumerable:!1,configurable:!0}),t.proto_config.mode)},Object.defineProperty(t,"mode",{get:function(){return M},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_constantPartsTypes",{get:function(){return D},enumerable:!1,configurable:!0}),t.prototype._adjustThumbHeightRange=function(e,t,n){r.isNumeric(t)||(t=this._width),r.isNumeric(e)||(e=this._defaultAspectRatio),this._maxThumbHeight=Math.round(t*e),this._minThumbHeight=Math.ceil(t*this._minHeightFactor/this._lineHeight)*this._lineHeight,this._thumbHeightRange=[];for(var i=this._minThumbHeight;i<=this._maxThumbHeight;i+=this._lineHeight)this._thumbHeightRange.push(i);n&&this._thumbHeightRange[this._thumbHeightRange.length-1]<this._maxThumbHeight&&this._thumbHeightRange.push(this._maxThumbHeight),this._thumbHeightRange.reverse()},t.prototype._adjustThumbWidth=function(e,t){var n=0,i=1/0,r=(t?a.Z.get("pageSizes.firstPageSizes"):a.Z.get("pageSizes.pageSizes"))||[];return o.forEach(r,(function(t){var r=e-t.w;r>=0&&r<i&&(i=r,n=t.w)})),this._width=n,this._width},t.prototype.uid=function(){},t.prototype.top=function(){return this._top},t.prototype.elm=function(){return this._elm},t.prototype.instance=function(e){return e&&this._instances?o.filter(this._instances,(function(t){return t.id()===e}))[0]:null},t.prototype.height=function(){return this._height},t.prototype.instances=function(e){var t=this,n=e.articleElm().createChild("div").elm().css({position:"absolute",width:"".concat((0,w.FK)(),"px")}).addClass("col");this._instances=[];var i=C.Z.getActiveView(),r=n.createChild("div").attr("style","opacity: 0");if(this._config.mode!==M.full&&this._config.mode!==M.tools_comment||(this._renderedParts=o.map(D,(function(e){var n=new e(r,{article:t._article,view:i});return n.render(),n}))),this._config.mode===M.full||this._config.mode===M.thumbnail){var a=new E(r,{article:this._article,view:i});a.imgHeight(this._maxThumbHeight).imgWidth(n.width()).addByLine(!1);var s=a.render(),u=s.find("img").innerWidth();if(s.remove(),this._adjustThumbWidth(u,!w.iV),w.iV)this._adjustThumbHeightRange(this._defaultAspectRatio);else if(this._article.Issue&&this._article.Issue.FirstPageSize){var c=Math.floor(100*this._width/this._article.Issue.FirstPageSize.Width),l=Math.floor(this._article.Issue.FirstPageSize.Width*c/100),d=this._article.Issue.FirstPageSize.Height/this._article.Issue.FirstPageSize.Width;this._adjustThumbHeightRange(d,l)}else this._adjustThumbHeightRange(this._defaultAspectRatio);if((a=new E(r,{article:this._article,view:i})).imgContainerHeight(0),a.render(),this._addFullSizedThumb){var h=new E(r,{article:this._article,view:i});h.imgHeight(this._maxThumbHeight).imgWidth(u).addByLine(!1);var p=(s=h.render()).outerHeight()-this._maxThumbHeight;this._thumbHeightRange.unshift(this._maxThumbHeight+p),s.remove()}}var f=r.outerHeight(!0);if(n.remove(),this._config.mode===M.tools_comment){var m=new Z(this,"id_0");m.height(f),this._instances.push(m)}return this._config.mode!==M.full&&this._config.mode!==M.thumbnail||o.forEach(this._thumbHeightRange,(function(e){var n=f+e,i="id_".concat(n),r=new Z(t,i);r.height(n),t._instances.push(r),t._thumbHeights[i]=e})),this._instances},t.prototype.render=function(e,t,n,i,a){var u=this;this._parts=this._parts||[];var c=C.Z.getActiveView(),l=this.instance(t),d=a.articleElm().createChild("div").top(n).css({position:"absolute",width:"".concat((0,w.FK)(),"px")}).addClass("col").attr(w.aW),h=new P._({elm:d.elm(),colspan:i,top:n,height:l.height(),smartFlowItemId:this._article.getId(),type:P.W.Column,layout:this._layout});e.addCell(h);var p=h.elm.createChild("div");if(this._top=n,this._parts.length)return o.forEach(this._parts,(function(e){p.append(e.renderedBlock())})),h;if(this._config.mode===M.tools_comment&&(this._renderedParts||(this._renderedParts=[],o.forEach(D,(function(e,t){var n=new e(p,{article:u._article,view:c});n.render(),u._renderedParts[t]=n}))),o.forEach(this._renderedParts,(function(e){e.bindEvents(),u._parts.push(e),p.append(e.renderedBlock())}))),(!r.isNumeric(this._article.Id)||!r.nd.isExternalArticleId(this._article.Id))&&(this._config.mode===M.full||this._config.mode===M.thumbnail)&&this._article.Issue&&this._article.Issue.Id){var f=new E(p,{article:this._article,view:c}),m=r.isNumeric(this._article.Page)?this._article.Page:this._article.Page.number,g=w.iV?m:1;f.src((0,s.x8)(this._article.Issue.Id,this._width,g)).imgContainerHeight(this._thumbHeights[t]).allImgContainerHeights(this._thumbHeights),this._parts.push(f),p.append(f.render(void 0,!0))}return this._elm=p,this._elm.tap((function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1})),this._height=l.height(),h.addBlock(l),h.onRemoved(l.onRemoved),h},t.prototype.dispose=function(){delete this._renderedParts,this._parts&&(o.forEach(this._parts,(function(e){e.dispose()})),delete this._parts)},t}(_.XY);t.ZP=L},7287:function(e,t,n){"use strict";n.d(t,{Z:function(){return In}});var i,r,o=n(22970),a=n(40180),s=n(86913),u=n(78176),c=n(20384),l=n(84241),d=n(66327),h=n(60683),p=n(79913),f=n(25371),m=n(58653),g=n(92741),v=n(77751),y=n(57136),_=n(99144),b=n(17447),w=n(14003),C=n(11144);c.nd.ui.replies=function(){var e,t=0,n=1;function i(e,t,n,i,r){return{issueId:t,articleId:e,title:n,page:i,totalReplies:r,hasLastPost:ko.observable(!0),userLastPost:ko.observableArray(),comments:ko.observableArray([]),showRepliesClick:function(e,t){return _.default.show({articleId:e.articleId,articleTitle:e.title}),!1}}}function r(e){var t=e.LikeItVotes-e.HateItVotes,n=e.UserProfile;return{id:e.PostId,articleId:e.ArticleId,publicId:e.CommentKey,parentId:e.ParentPostId,threadId:e.ThreadId,author:n.Nickname,profileName:n.ProfileName,avatar:(0,h.b_)({nickname:n.Nickname,imageId:n.avatarImageId,fallbackAvatarUrl:n.PhotoUrl}),date:e.PostDate,dateString:v.Dr(new Date(e.PostTimeStamp)),neg:t<0&&0!=t?1:0,pos:t>0&&0!=t?1:0,currentVote:e.CurrentVote,text:e.Text,parents:0,authorVote:e.AuthorVote,showCommentDialog:function(e){_.default.show({articleId:e.articleId,markerCommentId:e.publicId}.profileName)}}}return{render:function(o,a,s,u){if(o&&s){var l=s.Replies.length,d=4*(u||0),h=s.Replies.slice(d,4+d);(e={view:n,showHeader:ko.observable(!1),readMore:ko.observable(0),articles:ko.observableArray([]),columnHeight:0,noMoreRoom:!1,moreReplies:ko.observable(0),expandReplies:function(e,t){f.Z.current.textView.onReadMoreClicked(t)},addContent:function(e,i,r){if(c(e).is("article")){var o=c(e).closest("div.visitupdate-replies"),a=(0,g.Dp)(),s=this.columnHeight-a;if(c(e).is("article.comment")&&c(e).height()>5*a&&c(e).find("div.text").css("overflow","hidden").height(4*a+"px"),this.view==t)if(c(e).is("article.comment")){if(s-o.height()<=a)return void(o=e.parentNode).parentNode.removeChild(o)}else{if(this.noMoreRoom)return void e.parentNode.removeChild(e);if(i&&c(e).before("<div class='art-div'></div>"),s-o.height()<=a)return void(this.noMoreRoom=!0)}else if(this.view==n){if(s-o.height()<=a)return e.parentNode.removeChild(e),void this.moreReplies(this.moreReplies()+1);i&&c(e).before("<div class='art-div'></div>")}}}}).view=l>1?t:n,void 0===u&&l>4+d&&e.readMore(l-4+d),u||e.showHeader(!0),e.columnHeight=o.height();var p=c.map(s.Replies,(function(e){return e.ArticleId}));return Promise.all([c.nd.ui.replies.provider.getArticles(s.Replies),c.nd.ui.replies.provider.getReplies(p,s.Since,s.To)]).then((function(t){var o=t[0],a=t[1];if(o&&a){for(var s=0;s<h.length;s++){var u=h[s];if(o.hasOwnProperty(u.ArticleId)){var c=new i(o[u.ArticleId].Id,o[u.ArticleId].Issue.Id,o[u.ArticleId].Title,o[u.ArticleId].Page,o[u.ArticleId].PostsCount);e.articles.push(c)}}for(s=0;s<e.articles().length;s++)if(c=e.articles()[s],a.hasOwnProperty(c.articleId)&&(c.userLastPost.push(new r(a[c.articleId].UserLastPost)),e.view==n))for(var l=0;l<a[c.articleId].PostReplies.length;l++){var d=a[c.articleId].PostReplies[l];c.comments.push(new r(d))}}})),c.nd.templates.appendTo("v7.Client.Replies",e,o),this}}}},c.nd.ui.replies.provider=(i={},r={},{getReplies:function(e,t,n){var i=new C.B;e||i.reject();for(var o=[],a=0;a<e.length;a++){var s=e[a];r[s]||o.push(s)}return r&&!o.length?setTimeout((function(){i.resolve(r)}),200):(0,p.$k)("articlecomments","GetArticleRepliesForPeriod",{ids:e,sinceDate:t,endDate:n}).then((function(e){for(var t=0;t<e.Replies.length;t++)r[e.Replies[t].ArticleId]={UserLastPost:e.Replies[t].UserLastPost,PostReplies:e.Replies[t].PostReplies};i.resolve(r)})),i.promise()},getArticles:function(e){var t=new C.B;e||t.reject();for(var n=e.length,r=[],o=0;o<n;o++){var a=e[o].ArticleId;i[a]||r.push(a)}return i&&!r.length?t.resolve(i):c.nd.data.loaders.online.articleitems.load({Articles:r,Pages:[]},(function(e){for(var n=0;n<e.Articles.length;n++)i[e.Articles[n].Id]=e.Articles[n];t.resolve(i)})),t.promise()}});var I=n(30724),P=n(69327),x=n(63666);function S(e){this._data=e,this._columnWidth=I.G4-I.ez}S.prototype={_data:null,_columns:null,article:function(){return this._data},sectionElm:function(){return this._data?(0,l.Oh)().section(this._data.group()):null},reset:function(e){e&&(this._data=e)},tasks:function(){return[]},height:a.noop,_createColumn:function(e){var t=(new d.d$).addLayout(this).type(d.Xp.Replies).articleColumnsCount(1).columnIdx(e),n=(0,x.ny)(this._data,x.tG.Rendered);return t.onDisposed((function(){return n.release()})),t},_renderOneColumn:function(){var e={head:null,tail:null,count:0},t=this._createColumn(0);!t.section()&&this._data.group()&&t.section(this._data.group());var n=this.sectionElm().column().addClass("col").css({position:"absolute",top:"0px",width:"".concat(this._columnWidth,"px")});return(new c.nd.ui.replies).render(n.createChild("div").css("height",I.$0).elm(),this._data.Id,this._data.Data),t.addCell(new P._(n.elm(),1,0,I.$0)),e.tail=e.head=t,e.count=1,new d.JD(e.head,e.tail)},_renderColumns:function(e,t){for(var n,i=new d.JD,r=0;r<e;++r){n=t+r;var o=this._createColumn(n);!o.section()&&this._data.group()&&o.section(this._data.group());var a=this.sectionElm().column().addClass("col").css({position:"absolute",top:"0",width:"".concat(this._columnWidth,"px")});(new c.nd.ui.replies).render(a.createChild("div").css("height",I.$0).elm(),this._data.Id,this._data.Data,n),o.addCell(new P._(a.elm(),1,0,I.$0)),i.append(o)}return i},render:function(e,t){if(void 0===e&&(e=1),void 0===t&&(t=0),!this._data||!this._data.Data)return Promise.reject();var n=e>1?this._renderColumns(e,t):this._renderOneColumn();return Promise.resolve(n)},highlight:a.noop,estimatedColumnsCount:function(){return 1},dataItem:function(){return this._data}};var T=S,k=n(51828),A=n(14581),E=n(99806),Z=n(84066),M=n(26371),D=n(84672),L=n(55193),N=(n(16412),function(e,t){this._templateName=e,this._container=t,this._width=this._container.width(),this._bind()});N._animationDuration=150,N._flingThreshold=.5,N.prototype={_templateName:null,_container:null,_currentIdx:0,_count:0,_appendedCount:0,_currentIdxChangedListener:null,_itemClickListener:null,_left:0,_savedLeft:0,_width:0,_isAnimating:!1,_isInGesture:!1,_bind:function(){L.ZP.bind(this._container,{gesturesStart:this._onGesturesStart.bind(this),scroll:this._onScroll.bind(this),fling:this._onFling.bind(this),gesturesEnd:this._onGesturesEnd.bind(this),singleTap:this._onSingleTap.bind(this),singleTapConfirmed:this._onSingleTapConfirmed.bind(this)})},_onPaginationClick:function(e){var t=e.target(),n=t.parentElement,i=c(n.children).index(t),r=0;-1!==i&&(this._currentIdxChangedListener&&this._currentIdxChangedListener(i),i>0&&(i<this._count?r=-this._width:console.error("Invalid index passed.",i)),this._left=r,this._container.find("#scroller").css("left",r+"px"),this._currentIdx=i,this._updateCounterElm())},_onSingleTap:function(e){},_onSingleTapConfirmed:function(e){"li"===e.target().nodeName.toLowerCase()?this._onPaginationClick(e):this._itemClickListener&&this._itemClickListener(this._currentIdx)},_onGesturesStart:function(){this._isAnimating||(D&&D.busy.set(),this._isInGesture=!0,this._savedLeft=this._left)},_onScroll:function(e){if(this._isInGesture){this._left+=e.dx();var t=this._left;return t>0?this._isFirstItem()?t=Math.atan(this._left/1e3)*this._width:this._left=t=0:this._isLastItem()&&this._currentItemLeft()<0?t=-this._width*(1-Math.atan((this._left+this._width)/1e3)):this._isFirstItem()&&t<-this._width?this._left=t=-1*this._width:t<-2*this._width&&(this._left=t=-2*this._width),this._container.find("#scroller").css("left",t+"px"),!1}},_onFling:function(e){if(this._isInGesture){if(this._isFirstItem()&&this._left>0)this._animate(-this._left,N._animationDuration),this._left=0;else if(this._isLastItem()&&this._currentItemLeft()<0)this._animate(-this._currentItemLeft(),N._animationDuration),this._left-=this._currentItemLeft();else if(!this._left||this._left==-2*this._width||this._isLastItem()&&this._left==-this._width)this._updateState();else if(this._left==-this._width)this._updateState();else{var t=-this._left%this._width,n=e.velocity().vx;Math.abs(n)>=N._flingThreshold?(n<0&&(t-=this._width),this._animate(t,N._animationDuration),this._left+=t):t<this._width/2?(this._animate(t,N._animationDuration),this._left+=t):(this._animate(t-this._width,N._animationDuration),this._left+=t-this._width)}return!1}},_onGesturesEnd:function(){this._isInGesture=!1,D&&D.busy.reset()},_animate:function(e,t){D&&D.busy.set(),this._isAnimating=!0,this._container.find("#scroller").css({transitionProperty:"left",transitionTimingFunction:"ease-out",transitionDuration:t+"ms"}).css("left",this._left+e).bind(c.props.transitionEndEvents,this._onTransitionEnd.bind(this))},_onTransitionEnd:function(e,t){return this._isAnimating=!1,this._container.find("#scroller").css({transitionProperty:"",transitionTimingFunction:"",transitionDuration:""}).unbind(c.props.transitionEndEvents),this._updateState(),D&&D.busy.reset(),!1},_updateState:function(){this._left>this._savedLeft?(this._currentIdxChangedListener&&this._currentIdxChangedListener(this._currentIdx-1),this._currentIdx--,this._updateCounterElm()):this._left<this._savedLeft&&(this._currentIdxChangedListener&&this._currentIdxChangedListener(this._currentIdx+1),this._currentIdx++,this._updateCounterElm())},setOnCurrentIdxChangedListener:function(e){this._currentIdxChangedListener=e},setOnItemClickListener:function(e){this._itemClickListener=e},show:function(e){return this._container&&c.nd.templates&&c.nd.templates.isLoaded()?(this._count=e.count,e.type="container",c.nd.templates.renderTo(this._templateName,e,this._container),this._container.find("#scroller").optimizeForTransform(),this._updateCounterElm(),this):this},_updateCounterElm:function(){var e=this._container.children(".pagination-circle");e&&(e.find("li.sel").removeClass("sel"),e.find("li:eq("+this._currentIdx+")").addClass("sel"))},append:function(e){if(!this._container||!c.nd.templates||!c.nd.templates.isLoaded())return this;e.type="item";var t=this._container.find("#scroller");return c.nd.templates.appendTo(this._templateName,e,t),this._appendedCount++,this},prepend:function(e){if(!this._container||!c.nd.templates||!c.nd.templates.isLoaded())return this;e.type="item";var t=this._container.find("#scroller");return this._left-=this._width,t.css("left",this._left+"px"),c.nd.templates.prependTo(this._templateName,e,t),this._appendedCount++,this},removeFirst:function(){var e=this._container.find("#scroller");e.children("li:first").remove(),this._left+=this._width,e.css("left",this._left+"px"),this._appendedCount--},removeLast:function(){this._container.find("#scroller").children("li:last").remove(),this._appendedCount--s._currentIdthis._count-1},_currentItemLeft:function(){return this._isFirstItem()?this._left:this._left+this.,this._init()};R.prototype={_config:null,_provider:null,_view:null,_currentIdx:0,_init:function(){if(c.nd.templates.isLoaded()){this._view.setOnCurrentIdxChangedListener(this._onCurrentIdxChanged.bind(this)),this._view.setOnItemClickListener(this._onCurrentItemClicked.bind(this));var e={};if(this._config)for(var t in this._config)e[t]=this._config[t];e.count=this._provider.count(),this._view.show(e);for(var n=0;n<Math.min(2,this._provider.count());++n)this._view.append(this._provider.item(n))}else setTimeout(this._init.bind(this),100)},_onCurrentIdxChanged:function(e){var t=this._provider,n=t.item.bind(t),i=t.count(),r=this._view,o=this._currentIdx;e>o?(e<i-1&&r.append(n(e+1)),e>1&&r.removeFirst(),e-o>=2&&(r.removeFirst(),r._appendedCount>1&&r.removeFirst(),r.prepend(n(e)),r.prepend(n(e-1)))):e<o&&(e>0&&r.prepend(n(e-1)),e<i-2&&r.removeLast(),o-e>=2&&(r.removeLast(),r._appendedCount>1&&r.removeLast(),r.append(n(e)),r.append(n(e+1)))),this._currentIdx=e},_onCurrentItemClicked:function(e){var t=this._provider.item(e);if(t&&t.itemClick)return t.itemClick()}};var V=n(4169),B=function(){function e(e,t){var n=(0,k.x)(e.IssueDate);this.issue=(0,A.eX)(e.CID,n,e.IssueVersion),this.issueId=e.IssueId,this.page=e.Page||0,this.subtitle=b.ZP.formatDate(n,"someresourcename","ddd, d MMM yyyy"),this.thumbsrc=Z.Z.getPageImageUrl(this.issue,1,{width:e.PageWidth,height:e.PageHeight},{width:t})}return e.prototype.itemClick=function(){m.Z.pageView&&a.isFunction(m.Z.pageView.activate)&&m.Z.pageView.activate(null,{article:{Issue:{Id:this.issue},Page:this.page}})},e}(),F=function(){function e(e,t){this.issues=e||[],this.width=t}return e.prototype.count=function(){return this.issues.length},e.prototype.item=function(e){if(e<0||e>=this.issues.length)throw new Error("Invalid index");var t=this.issues[e];return new B(t,this.width)},e}()ntentSize=0,n}return(0,o.ZT)(t,e),t.prototype.getContentSize=function(){return this.contentSize},t.prototerHeight(!0)},t.prototype.hide=function(){e.prototype.hide.call(this),this.element.hide()},t.lement.show()},t}(M.Z.Block),z=function(e){function t(t){var n=e.call(this,{id:"titles",priority:2,element:t.find("div.hg-titles"),contentBounds:[40,100],canHide:!0})||this;return n.maxHeight=n.element.outerHeight(!0),n.contentSize=100,n.decreaseStep=10,n}return(0,o.ZT)(t,e),t.prototype.decrease=function(){this.contentSize-=this.decreaseStep;var e=Math.floor(this.maxHeight*this.contentSize/100);this.element.height(e)},t}(O),U=function(e){function t(t){var n=this,i=t.find("div.hg-about"),r=c(".hg-about-content",i).children().toArray();return(n=e.call(this,{id:"about",priority:1,element:i,canHide:!0,contentBounds:[0,r.length]})||this).children=r,n.contentSize=r.length,n}return(0,o.ZT)(t,e),t.prototype.decrease=function(){this.contentSize--;var e=this.children.pop();e&&c(e).hide()},t}(O),H=function(e){function t(t){return e.call(this,{id:"bilboard",priority:0,element:t.find("div.hg-bilboard"),canHide:!1})||this}return(0,o.ZT)(t,e),t}(O),j=function(e,t,n){var i={learnMoreHtml:b.ZP.format("Init.LearnMore",V.Z.get("ui.Sidebar.BlogLocation"),V.Z.get("ui.Sidebar.AboutLocation")),signUpHtml:b.ZP.format("Init.NewsletterSignUp.Text",V.Z.get("ui.Sidebar.SignUpLocation")),openInNewWindow:function(){return this.url&&(window.open(this.url)||document.location.assign(this.url)),!1},appLinks:[{name:"iOS",className:"ios",url:"https://itunes.apple.com/app/pressreader/id313904711"},{name:"Android",className:"android",url:"https://play.google.com/store/apps/details?id=com.newspaperdirect.pressreader.android"},{name:"Windows 8",className:"win8",url:"http://apps.microsoft.com/windows/en-US/app/pressreader/16e63b44-220e-4303-a748-30b75dd4c9b9"},{name:"Blackberry",className:"blackberry",url:"http://appworld.blackberry.com/webstore/content/52138"}],socialLinks:[{name:"Facebook",className:"facebook",url:"https://www.facebook.com/PressReader"},{name:"Twitter",className:"twitter",url:"https://twitter.com/pressreader"},{name:"Youtube",className:"youtube",url:"http://www.youtube.com/user/pressdisplay"},{name:"Wordpress",className:"wordpress",url:"http://blog.pressreader.com/"},{name:"Google",className:"google",url:"https://plus.google.com/+pressreader"}]};E.z.renderTo("v7.Client.InitBlock",i,e);var r=[new H(e),new U(e)],o=e.find("div.hg-titles");o&&n&&n.Data&&n.Data.TopIssues&&(function(e){var t=new N(e.templateName,e.container);new R(e.provider,t,{title:e.title})}({templateName:"v7.Client.TopTitles.Thumbnails",container:o,title:b.ZP.val("TopTitles"),provider:new F(n.Data.TopIssues,t)}),r.push(new z(e)));var a={getHeight:function(){return e.height()}};new M.Z.Manager(a,r).build(M.Z.LayoutStrategy.GUINNESS)};function W(e){this._data=e}W.prototype={_data:null,article:function(){return this._data},sectionElm:function(){return(0,l.Oh)().section({id:"section-home",className:"section-home"})},reset:function(e){e&&(this._data=e)},tasks:function(){return[]},height:a.noop,_render:function(){var e=(new d.d$).addLayout(this).type(d.Xp.InitBlock).articleColumnsCount(1).columnIdx(0),t=(0,x.ny)(this._data,x.tG.Rendered);e.onDisposed((function(){t.release()}));var n=I.G4-I.ez,i=this.sectionElm().column().addClass("homegroup1").css({position:"absolute",top:"0px",width:n});return j(i.createChild("div").css("height",I.$0).elm(),n,this._data),e.addCell(new P._(i.elm(),1,0,I.$0)),new d.Jis._render())},highlight:a.noop,estimatedColumnsCount:function(){return 1},dataItem:function(){return this._data}};var q=W,G=n(62106),X=(n(82641),n(24458));function Y(e){this._data=e,this._columnWidth=I.G4-I.ez}c.nd.ui.monitors=function(){var e;function t(e,t,n,i,r){return{id:e,monitorId:t,searchTerm:n,articlesCount:r,articles:i,articlesKo:ko.observableArray(),currentArticleIndex:0,getNextArticle:function(){var e=this.articles.slice(this.currentArticleIndex,this.currentArticleIndex+1);return this.currentArticleIndex=this.currentArticleIndex+1,e},monitorClick:function(e,t){return c.nd.navHistory.goView(X.n3.Monitors,{type:"monitor",monitorId:e.monitorId,articlesCount:e.articlesCount}),!1}}}function n(e,t,n,i){return{issueId:t,articleId:e,title:n,page:i,articleClick:function(n,i,r){return c.nd.navHistory.goView(X.n3.Monitors,{type:"monitor",monitorId:r.monitorId,articlesCount:r.articlesCount,issue:t,articleId:e,token:r.id}),!1}}}return ko.bindingHandlers.fadeInArticle={init:function(t,n,i,r,o){var a=c(t).closest("div.visitupdate-monitors").height();c(t).hide(),c(t).next(".art-div").hide(),a<e.columnHeight-24?(c(t).fadeIn(),c(t).next(".art-div").show()):o.$root.addOneMore(!1)}},{render:function(i,r,o,a){if(i&&o){var s=o.length,u=4*(a||0),l=o.slice(u,4+u);return e=function(e){return{monitors:ko.observableArray(),currentIndex:0,maxSteps:10*e,getNextMonitor:function(){if(!this.addOneMore()||this.maxSteps<=0)return[];var e=this.currentIndex+1,t=this.monitors().length,n=this.monitors.slice(this.currentIndex,e);return e>=t?(this.currentIndex=0,this.maxSteps--):this.currentIndex=e,n},showHeader:ko.observable(!1),readMore:ko.observable(0),columnHeight:0,addOneMore:ko.observable(!0),oreClicked(t)}}}(s),e.columnHeight=i.height(),void 0===a&&s>4+u&&e.readMore(s-4+u),a||e.showHeader(!0),c.nd.ui.monitors.provider.getMonitors(o).then((function(i){for(var a=0;a<l.length;a++){var s=i[l[a].MonitorId];s&&s.monitor&&e.monitors.push(new t(r,l[a].MonitorId.toString(),s.monitor,l[a].ArticleIds,l[a].ArticlesCount))}c.nd.ui.monitors.provider.getArticles(o).then((function(t){!function i(r){var o=e.getNextMonitor()[0],a=0,s=null;o&&setTimeout((function(){for(;(!s||s&&!s.Title)&&(a=o.getNextArticle()[0]);)s=t[a]&&t[a].article;if(s&&s.Title){var u=new n(s.Id,s.Issue&&s.Issue.Id,s.Title,s.Page);o.articlesKo.push(u)}else o.currentArticleIndex=-1;r&&i(e.addOneMore())}),10)}(e.addOneMore())}))})),c.nd.templates.appendTo("v7.Client.Monitors",e,i),this}}}},c.nd.ui.monitors.provider=function(){var e={},t={};return{getMonitors:function(e){var n=new C.B;e||n.reject();for(var i=e.length,r=[],o=0;o<i;o++){var s=e[o];t[s.MonitorId]&&t[s.MonitorId].monitor||(t[s.MonitorId]={articles:s.ArticleIds,monitor:""},r.push(s.MonitorId))}return t&&!r.length?n.resolve(t):G.A.getByIds(r).then((function(ee.searchTerm)})),n.resolve(t)})).catch(n.reject),n.promise()},getArticles:function(t){var n=new C.B;t||n.reject();for(var i=t.length,r=[],o=0;o<i;o++)for(var a=t[o],s=0;s<a.ArticleIds.length;s++){var u=a.ArticleIds[s];e[u]&&e[u].article||(e[u]={article:null},r.push(u))}return e&&!r.length?n.resolve(e):c.nd.data.loaders.online.articleitems.load({Articles:r,Pages:[]},(function(t){for(var i=0;i<t.Articles.length;i++)e[t.Articles[i].Id].article=t.Articles[i];n.resolve(e)})),n.promise()}}}(),Y.prototype={_data:null,article:function(){return this._data},sectionElm:function(){return this._data?(0,l.Oh)().section(this._data.group()):null},reset:function(e){e&&(this._data=e)},tasks:function(){return[]},height:a.noop,_createEmptyColumn:function(e){var t=(new d.d$).addLayout(this).type(d.Xp.Monitors).articleColumnsCount(1).columnIdx(e),n=(0,x.ny)(this._data,x.tG.Rendered);return t.onDisposed((function(){return n.release()})),t},_renderOneColumn:function(e){var t={head:null,tail:null,count:0},n=this._createEmptyColumn(0);!n.section()&&this._data.group()&&n.section(this._data.group());var i=this.sectionElm().column().addClass("col").css({position:"absolute",top:"0px",width:"".concat(this._columnWidth,"px")});return(new c.nd.ui.monitors).render(i.createChild("div").css("height",I.$0).elm(),this._data.Id,e),n.addCell(new P._(i.elm(),1,0,I.$0)),t.tail=t.head=n,t.count=1,new d.JD(t.head,t.tail)},_renderColumns:function(e,t,n){for(var i,r=new d.JD,o=0;o<t;++o){i=n+o;var a=this._createEmptyColumn(i);!a.section()&&this._data.group()&&a.section(this._data.group());var s=this.sectionElm().column().addClass("col").css({position:"absolute",top:"0px",width:"".concat(this._columnWidth,"px")});(new c.nd.ui.monitors).render(s.createChild("div").css("height",I.$0).elm(),this._data.Id,e,i),a.addCell(new P._(s.elm(),1,0,I.$0)),r.append(a)}return r},render:function(e,t){if(void 0===e&&(e=1),void 0===t&&(t=0),!this._data||!this._data.Data)return Promise.reject();var n=this._data.Data.Monitors||this._data.Data,i=e>1?this._renderColumns(n,e,t):this._renderOneColumn(n);return Promise.resolve(i)},highlight:a.noop,estimatedColumnsCount:function(){return 1},dataItem:function(){return this._data}};var K=Y,J=n(60231),$=n(81867),Q=n(71357),ee=n(46046),te=n(91574),ne=n(88769),ie=n(8871),re={},oe={followedByUsers:1,followsUsers:2},ae={1:"{total} Followers",2:"{total} Following"};function se(e){return(e.dataType==oe.followedByUsers?$.default.getUserFollowers:$.default.getUsersFollowed)(e.profileId,e.filter(),e.loadedItems,e.pageSize,e.currentOrder())}function ue(e,t,n){n&&e.users([]),a.forEach(t.items,(function(t){var n={_raw:t,avatar:(0,h.b_)({nickname:t.nickname,imageId:t.avatarImageId,size:h.wC.medium,fallbackAvatarUrl:t.photoUrl}),nickname:t.nickname,isFollowed:J.observable(t.isFollowedByCurrentUser),canFollow:J.observable(!t.equals(ie.default.getProfileId()))};e.users.push(n)}));var i=t.total;e.otherCount(t.otherCount),e.headerTitle(ae[e.dataType].replace("{total}",i)),e.loadedItems=e.users().length,e.canLoadMore(t.total-t.otherCount>e.loadedItems)}function ce(e,t){return se(e).then((function(n){ue(e,n,t)}))}re.dataType=oe,re.show=function(e,t){var n=te.Z.createInstance(),i={filter:J.observable(""),currentOrder:J.observable(ne.ZP.usersSortOrder.recent),orderBy:ne.ZP.usersSortOrder,pageSize:50,profileId:e,dataType:t,users:J.observableArray([]),total:J.observable(0),otherCount:J.observable(0),headerTitle:J.observable(""),loadedItems:0,canLoadMore:J.observable(!0),loadingMore:J.observable(!1),openProfile:function(e){e._raw.goToProfile()},close:function(){n.hide()},followUser:function(e){e._raw.ensureProfileName().then($.default.folsFollowed(!0)}))},unFollowUser:function(e){e._raw.ensureProfileName().then($.default.unFollowUser).then((function(t){t&&!t.followedByMe&&e.isFollowed(!1)}))},cancelFilter:function(){i.filter(""),i.loadedItems=0,ce(i,!0)},changeOrderBy:function(e){return function(){e!=i.currentOrder()&&(i.currentOrder(e),i.loadedItems=0,ce(i,!0))}},_searchTimeout:null,searchKeyUp:function(){i._searchTimeout&&clearTimeout(i._searchTimeout);var e=i._searchTimeout=setTimeout((function(){i.loadedItems=0,se(i).then((function(t){e==i._searchTimeout&&(ue(i,t,!0),i._searchTimeout=null)}))}),400)},listScrolled:function(){!i.loadingMore()&&i.canLoadMore()&&(i.loadingMore(!adingMore(!1)}),(function(){i.loadingMore(!1)})))rs",model:i})}));var r={onHide:function(e){return n.onHide(e),r}};return r};var le,de=te.Z.users=re,he=n(80053),pe=n(54591),fe=n(14347),me=n(43389);function ge(e){var t="";if(e){var n=(e.title&&e.company?"v7.Client.Profile.TitleAndCompanyTemplate":e.title&&"v7.Client.Profile.TitleTemplate")||e.company&&"v7.Client.Profile.CompanyTemplate"||"";t=b.ZP.format2(n,{name:"title",value:e.title},{name:"company",value:e.company})}return t}function ve(e,t){if(t){e.followingUser(t.followedByMe),e.followedByUsersTotal(t.followedByUsersTotal),e.followsUsersTotal(t.followsUsersTotal);var n=function(e){return a.map(e,(function(e){return{profileName:e.getProfileId(),enAccountNumber:e.enAccountNumber(),nickName:e.nickName,avatar:(0,h.b_)({nickname:e.nickname,imageId:e.avatarImageId,size:h.wC.small,fallbackAvatarUrl:e.photoUrl})}}))};e.followedByUsers(n(t.followedByUsers)),e.followsUsers(n(t.followsUsers))}}function ye(e,t){e.avatar($ndAvatar.render(e.nickName(),t.photoUrl,e.photoWidth,e.photoHeight))}c.nd.ui.profile=le={render:function(e,t){var n=function(e){var t=e.getProfileId(),n=(e.enAccountNumber,{uploadElement:null,profileId:t,isOwnProfile:J.observable(e.isCurrentUser),nickName:J.observable(e.nickName),photoUrl:J.observable(e.photoUrl),avatarImageId:J.observable(e.avatarImageId),locationText:J.observable(e.location||""),followingUser:J.observable(!1),followedByUsersTotal:J.observable(0),followsUsersTotal:J.observable(0),followedByUsers:J.observableArray(),followsUsers:J.observableArray(),compactView:J.observable(!1),compactTags:J.observable(!1),jobTitle:J.observable(ge(e.publicInfo)),tel:J.observable(e.publicInfo&&e.publicInfo.tel),website:J.observable(e.publicInfo&&e.publicInfo.website),httpWebsite:J.observable(ee.Z.addUrlScheme(e.publicInfo&&e.publicInfo.website)),email:J.observable(e.publicInfo&&e.publicInfo.email),facebook:J.observable(e.publicInfo&&e.publicInfo.facebook),facebookProfileLink:J.observable(e.publicInfo&&e.publicInfo.facebookProfileLink),twitter:J.observable(e.publicInfo&&e.publicInfo.twitter),twitterProfileLink:J.observable(e.publicInfo&&e.publicInfo.twitterProfileLink),google:J.observable(e.publicInfo&&e.publicInfo.google),googleProfileLink:J.observable(e.publicInfo&&e.publicInfo.googleProfileLink),openInNewWindow:function(e){return function(){return e&&(window.open(e)||document.location.assign(e)),!1}},renderTagsPanel:J.observable(e.trendsWhereUserIsLeader.length&&e.isCurrentUser),renderTagsList:J.observable(e.trendsWhereUserIsLeader.length),renderTagsTitle:J.observable(e.trendsWhereUserIsLeader.length),renderSeeAllTags:J.observable(!1),renderControls:J.observable(e.isCurrentUser),isAccountVerified:J.observable(!1),showWelcomeMsg:J.observable(e.isCurrentUser),renderOpinionsTotal:J.observable(!1),renderOpinions:J.observable(!1),renderSeeAllOpinions:J.observable(!1),MIN_TAGS:3,MAX_TAGS:7,MIN_OPINIONS:3,allOpinions:J.observable(e.opinions),opinions:J.observableArray(),trends:J.observableArray(),isEditAvailable:J.observable(e.isCurrentUser),isMyProfile:J.observable(e.isCurrentUser),coverUrl:J.observable(),loading:J.observable(!1),_followUnfollow:function(e){return n.isOwnProfile()?Promise.reject("Cannot follow/unfollow own channel."):e(n.profileId)},followUser:function(){return n._followUnfollow($.default.followUser)},unFollowUser:function(){return n._followUnfollow($.default.unFollowUser)},files:J.observable(),upload:function(){var e;n.files()&&(e=n.files()[0])&&(n.loading(!0,n),$.default.uploadProfilePhoto(e).then((function(){n.files(null),$.default.getProfile(t).then((function(e){ye(n,e),fe.Z.userStateChanged(),n.loading(!loading(!1,n)}))})).catch((function(){n.files(null),n.loading(!1,n),(0,pe.Z)().show("An error has occurred.")})))},opinionsTotal:J.observable(e.opinionsTotal),trendsTotal:J.observable(e.trendsWhereUserIsLeaderTotal),commentsTotal:J.observable(e.commentsTotal),enableOpinions:false,reloadMainInfo:function(){$.default.getProfileFull(n.profileId,!0).then((function(e){n.opinionsTotal(e.opinionsTotal),n.trendsTotal(e.trendsWhereUserIsLeaderTotal),n.commentsTotal(e.commentsTotal),n.allOpinions(e.opinions),n._fitItems()}))},seeAllWhoUserFollows:function(){n.isMyProfile()&&n.followsUsersTotal()>0&&de.show(t,de.dataType.followsUsers)},seeAllWhoFollowsTheUser:function(){n.isMyProfile()&&n.followedByUsersTotal()>0&&de.show(t,de.dataType.followedByUsers)},settingsClick:function(){m.Z.myAccountChannel.activate()}});return ye(n,e),ve(n,e.followers),n}(t);Q.Z.appendTo("v7.Client.Profile",n,e);var i=he.default.onAfterAccountChanged.subscribe((function(){n.reloadMainInfo()})),r=$.default.followersUpdates.subscribe((function(e){n.profileId===e.profileId&&ve(n,e.followers)}));return n.dispose=function(){i.unsubscribe(),r.unsubscribe()},n._fitItems=function(){var e=c(".pg-user");!function(){var t=e.parent(),i=t.find(".pgu-coverphoto"),r=t.find(".pgu-tags"),o=t.find(".welcomemsg");n.opinions.removeAll(),n.trends.removeAll();var a=function(){return n.compactView()?0:i.outerHeight(!0)},s={getHeight:function(){return t.height()}},u=[new M.Z.Block({id:"cover image",priority:3,getHeight:a,canHide:!0,hide:function(e){n.compactView()||(n.compactView(!0),e.stop())}}),new M.Z.Block({id:"user info",priority:0,getHeight:function(){return e.outerHeight(!0)-r.outerHeight(!0)-a()},canHide:!1})];n.showWelcomeMsg()&&u.push(new M.Z.Block({id:"info message",priority:100,getHeight:function(){return n.showWelcomeMsg()?o.outerHeight(!0):0},canHide:!1,comeMsg()?1:0},contentBounds:[0,1],increase:function(){n.showWelcomeMsg(!0),this.show()},decrease:function(){n.showWelcomeMsg(!1),this.hide()}})),new M.Z.Manager(s,u).build()}(),me.v.touch&&function(e,t){var n=e.find("input:file"),i="channel-upload-element",r=c("#"+i);r.length&&r.attr("content-id")!=t.profileId&&(J.cleanNode(r[0]),r.remove(),r=null),n.length&&(r&&r.length||((r=n.clone()).attr("id",i).attr("content-id",t.profileId).hide(),c("body").append(r),J.applyBindings(t,r[0])),J.cleanNode(n[0]),me.v.touch?c.nd.gestures.bind(n,{singleTap:function(){return r.trigger("click"),!1}})r("click"),!1})))}(e,n)},n._fitItems(),n}};var _e=le,be=n(48921),we=n(27670),Ce=n(34336),Ie=function(){function e(e){var t=this;this.profileId=e.profileId,this.isCompactView=ee.Z.isCompactScreen(),this.allCollections=(0,a.sortBy)(e.collections,"type"),this.collections=J.observableArray(),this.collectionsTotal=J.pureComputed((function(){return t.isCompactView?t.collections().length:0})),this.followingUser=J.observable(!1),this.followedByUsersTotal=J.observable(0),this.followsUsersTotal=J.observable(0),this.followedByUsers=J.observableArray(),this.followsUsers=J.observableArray(),this.visibleFollowedByUsers=J.observableArray(),this.visibleFollowsUsers=J.observableArray(),this.renderFollowingList=J.pureComputed((function(){return!!t.followsUsers().length})),this.renderFollowersList=Jsers().length})),this.setFollowersInfo(e.followers)}return e.prototype.setFollowersInfo=function(){},e.prototype.seeAllCollections=function(){var e=we.Z.findView(X.n3.Bookmarks);Ce.Z.goView(X.n3.Bookmarks,e.createParams({profileId:this.profileId}))},e.prototype.labelClick=function(e){m.Z.bookmarksView.activate(null,{profileId:this.profileId,collection:e.slug,collectionId:e.id})},e.prototype.openProfile=function(e,t){return y.I.ensureProfileName(e.profileName,e.enAccountNumber).then((function(e){return Ce.Z.goView(X.n3.Profile,{type:"profile",profileId:e})})),t.preventDefault(),!1},e.prototype.seeAllWhoUserFollows=function(){de.show(this.profileId,de.dataType.followsUsers)},e.prototype.seeAllWholowedByUsers)},e}(),Pe=M.Z.Manager,xe=M.Z.Block,Se=M.Z.LayoutStrategy,Te=$.default.followersUpdates,ke=function(){function e(e){var t=this;this._model=new Ie(e),this._subscription=Te.subscribe((function(e){e.profileId===t._model.profileId&&(t._model.setFollowersInfo(e.followers),t._container&&t.render(t._container))})),this._container=null}return e.prototype._getBlockHeight=function(e){return this._container.find(e).outerHeight(!0)},e.prototype.render=function(e){var t=this;this._ensureInit(e);var n=[];0!==this._model.allCollections.length&&n.push(new xe({id:"collections",priority:0,getHeight:function(){return t._getBlockHeight(".subgroup-collections")},hide:!1,getContentSize:function(){return t._model.collections().length},contentBounds:[3,this._model.allCollections.length],increase:function(){var e=t._model.allCollections[t._model.collections().length];e&&t._model.collections.push(e)},decrease:function(){return t._model.collections.pop()}})),this._model.renderFollowingList()&&n.push(new xe({id:"following",priority:1,getHeight:function(){return t._getBlockHeight(".subgroup-users.following")},canHide:!1,getContentSize:function(){return t._model.visibleFollowsUsers().length},contentBounds:[3,this._model.followsUsers().length],increase:function(){var e=t._model.followsUsers()[t._model.visibleFollowsUsers().length];e&&t._model.visibleFollowsUsers.push(e)},decrease:function(){return t._model.visibleFollowsUsers.pop()}})),this._model.renderFollowersList()&&n.push(new xe({id:"followers",priority:1,getHeight:function(){return t._getBlockHeight(".subgroup-users.followers")},canHide:!1,sers().length},contentBounds:[3,this._model.followedByUsers().length],increase:function(){var e=t._model.followedByUsers()[t._model.visibleFollowedByUsers().length];e&&t._model.visibleFollowedByUsers.push(e)},decrease:function(){return t._model.visibleFollowedByUsers.pop()}})),new Pe({getHeight:function(){return t._container.height()}},n).build(Se.HOEGAARDEN)},e.prototype._ensureInit=function(e){if(this._container&&this._container!==e)throw new Error("Cannot render into another container");this._container||(this._container=e,E.z.appendTo("v7.Client.Profile.Columns.Collections",this._model,this._container))},e.prounsubscribe()},e}(),Ae="profilegroup2";function Ee(e){this._data=e}Ee.prototype={_data:null,article:function(){return this._data},sectionElm:function(e){return(0,l.Oh)().section({id:0,title:e})},reset:function(e){e&&(this._data=e)},tasks:function(){return[]},height:a.noop,_createEmptyColumn:function(e){var t=(new d.d$).addLayout(this).type(d.Xp.Profile).articleColumnsCount(1).columnIdx(e),n=(0,x.ny)(this._data,x.tG.Rendered);return t.onDisposed((function(){return n.release()})),t},_addMainColumn:function(e,t,n){var i=2*I.G4-I.ez,r=this._section.column().addClass(Ae).css({position:"absolute",top:"0px",width:i});e.addCell(new P._(r.elm(),2,0,I.$0));var o=r.createChild("div").css("height",I.$0).addClass("group-panel pg-cover").elm(),a=_e.render(o,t,n);return this._section.hasHeaders&&this._section.innerHeader().css({visibility:"visible",left:I.ap}),e.onDisposing((function(){a.dispose()})),e},_addCollectionsColumn:function(e,t){var n=I.G4-I.ez,i=this._section.column().addClass(Ae).css({position:"absolute",top:"0px",width:n});e.addCell(new P._(i.elm(),1,0,I.$0));var r=i.createChild("div").css("height",I.$0).addClass("group-panel pg-dashboard").elm();return be.vS(t.profileId).then((function(n){t.collections=(0,a.filter)(n,(function(e){return e.type!==be.V5.system}));var i=new ke(t);i.render(r),e.onDisposing((function(){i.dispose()}))})),e},_render:function(e){var t=this,n=[$.default.getProfileFull(e),b.ZP.loaded()];return fe.Z.isLogin()&&n.push(ie.default.load()),Promise.all(n).then((function(e){var n=(0,o.CR)(e,1)[0],i=new d.JD;if(n){var r=b.ZP.format("Dialogs.Comments.Comments",n.commentsTotal);t._section=t.sectionElm(r);var a=0,s=t._createEmptyColumn(a++);i.append(t._addMainColumn(s,n,ie.default.getProfileId())),i.append(t._createEmptyColumn(a++)),n.collections&&n.collections.length&&ee.Z.isCompactScreen()&&(s=t._createEmptyColumn(a++),i.append(t._addCollectionsColumn(s,n,ie.default.getProfileId())))}return i.di_section=null})),i}),(function(){return(0,pe.Z)().show(b.ZP.val("Errors.ErrorOccurred")),Promise.rejecs._data.Data)},highlight:a.noop,estimatedColumnsCount:function(){return 1},dataItem:function(){return this._data}};var Ze=Ee,Me=n(11414),De=n(74714),Le=n(35953),Ne=n(19237),Re=n(66353),Ve=n(74981),Be="v2/opinions",Fe=function(){function e(){}return e.prototype.load=function(e){return Ve.Z.get(Be,"".concat(e,"/details"))},e.prototype.find=function(e){return Ve.Z.get(Be,"",{webname:e})},e.prototype.getFollowers=function(e,t){return Ve.Z.get(Be,"".concat(e,"/followers"),t)},e.prototype.getLeaders=function(e,t){return Ve.Z.get(Be,"".concat(e,"/leaders"),t)},e.prototype.getContributors=function(e,t){return Ve.Z.get(Be,"".concat(e,"/contributors"),t)},e.prototype.getArticles=function(e,t){var n=void 0===t?{}:t,i=n.continuationToken,r=n.direction,o=n.take,a=void 0===o?20:o;return Ve.Z.get(Be,"".concat(e,"/articles"),{continuationToken:i,direction:r,take:a})},e.prototype.getContributorArticles=function(e,t,n){var i=void 0===n?{}:n,r=i.continuationToken,o=i.take,a=void 0===o?20:o;return Ve.Z.get(Be,"".concat(e,"/contributors/").concat(t,"/articles"),{continuationToken:r,take:a})},e.prototy"/snippets"))},e.prototype.getStaticMapUrl=function(e,t){var n=t.width,i=t.height,r=t.visibleWidth,o="".concat(Ve.Z.baseUrl()).concat(Be,"/").concat(e,"/map?width=").concat(n,"&height=").concat(i);return r&&(o+="&visibleWidth=".concat(r)),o},e.prototype.getMapProperties=function(e,t){var n=t.width,i=t.height,r=t.visibleWidth;return Ve.Z.get(Be,"".concat(e,"/map/properties"),{width:n,height:i,visibleWidth:r})},e.prototype.getGeoOpinions=function(e){var t=void 0===e?{}:e,n=t.bbox,i=t.skip,r=t.take,o=t.orderBy,a=t.opinionFilter,s=t.trendFilter,u=t.opinionId,c=n.northEastLat,l=n.northEastLng,d=n.southWestLat,h=n.southWestLng;return Ve.Z.get("v2/geo","opinions",{northEastLat:c,northEastLng:l,southWestLat:d,southWestLng:h,skip:i,take:r,orderBy:o,opinionFilter:a,trendFilter:s,opinionId:u})},e.prototype.getGeoClusters=function(e){var t=void 0===e?{}:e,n=t.northEastLat,i=t.northEastLng,r=t.southWestLat,o=t.southWestLng,a=t.zoom,s=t.opinionsFilter,u=t.trendsFilter,c=t.opinionId;return Ve.Z.get("v2/geo","clusters",{northEastLat:n,northEastLng:i,southWestLat:r,southWestLng:o,zoom:a,opinionsFilter:s,trendsFilter:u,opinionId:c})},e.prototype.getGeoLeaders=function(e){var t=void 0===e?{}:e,n=t.bbox,i=t.skip,r=t.take,o=t.opinionFilter,a=t.trendFilter,s=t.opinionId,u=n.northEastLat,c=n.northEastLng,l=n.southWestLat,d=n.southWestLng;return Ve.Z.get("v2/geo","leaders",{northEastLat:u,northEastLng:c,southWestLat:l,southWestLng:d,skip:i,take:r,opinionFilter:o,trendFilter:a,opinionId:s})},e.prototype.search=function(e){var t=void 0===e?{}:e,n=t.query,i=t.take,r=t.skip,o=t.continuationToken,a=t.orderBy,s=t.mode;return Ve.Z.get(Be,"suggested",{query:n,take:i,skip:r,continuationToken:o,orderBy:a,mode:s})},e.prototype.follow=function(e,t){var n=void 0===t?{}:t,i=n.leaderEnAccountNumber,r=n.commentId,o=n.articleId;return(0,p.zf)(Be,"".concat(e,"/followers"),{leaderEnAccountNumber:i,commentId:r,articleId:o},{disableRetry:!0})},e.prototype.unFollow=function(e){return(0,p.W7)(Be,"".concat(e,"/followers/current"),{disableRetry:!0})},e.prototype.create=function(e,t){var n=void 0===t?{}:t,i=n.commentId,r=n.articleId;return(0,p.zf)(Be,"",{text:e,commentId:i,articleId:r},{disableRetry:!0})},e.prototype.getUserOpinions=function(e,t){return Ve.Z.get("v2/users","".concat(e,"/opinions"),t)},e.prototype.getLeaderTags=function(e,t){return Ve.Z.get("v2/users","".concat(e,"/tags"),t)},e.prototype.searchTags=function(e){var t=(void 0===e?{}:e).query;return Ve.Z.get("v2/tags","",{query:t})},e.prototype.addSearchToHistory=function(e){return Ve.Z.post("opinions","history",{pattern:e},{disableRetry:!0})},e.prototype.getArticleOpinions=function(e,t){return Ve.Z.get("v2/articles","".concat(e,"/opinions"),t)},e}(),Oe=new Fe,ze=n(94777),Ue=n(49698),He=function(e){function t(t){var n=t.opinionId,i=t.webName,r=t.text,o=t.numberOfFollowers,a=t.numberOfVisibleFollowers,s=t.followedByCurrentUser,u=e.call(this,{opinionId:n,webName:i,text:r,numberOfFollowers:o,followedByCurrentUser:s})||this;return u.supportersVisible=J.observable(a),u}return(0,o.ZT)(t,e),t.prototype.update=function(t){var n=void 0===t?{}:t,i=n.supporting,r=n.supporters,o=n.supportersVisible;e.prototype.update.call(this,{supporting:i,supporters:r}),void 0!==o&&this.supportersVisible(J.unwrap(o))},t}(Ue.Z),je=He,We=n(20809),qe=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.isFollowedByCurrentUser=!!t.isFollowedByCurrentUser,n}return(0,o.ZT)(t,e),t}(We.E),Ge=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.numberOfRecruitedPeople=t.numberOfRecruitedPeople,n.userLocation=t.userLocation,n}return(0,o.ZT)(t,e),Object.defineProperty(t.prototype,"recruited",{get:function(){return this.numberOfRecruitedPeople>0?"+".concat(this.numberOfRecruitedPeople):this.numberOfRecruitedPeople},enumerable:!1,configurable:!0}),t}(We.E),Xe=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.articlesCount=t.articlesCount||0,n}return(0,o.ZT)(t,e),t}(We.E),Ye=function(e){function t(t){void 0===t&&(t={});var n=e.call(this,t)||this;return n.trends=J.observable(t.trends),n}return(0,o.ZT)(t,e),t}(Ge),Ke=function(e,t){var n=void 0===e?{}:e,i=n.items,r=n.skip,o=n.take,s=n.total;this.items=null!=i&&(0,a.isFunction)(t)?(0,a.map)(i,t):i,this.skip=r,this.take=o,this.total=s},Je=function(e){this.id=e.commentId,this.text=e.text,this.date=(0,v.Dr)(new Date(e.commentDate)),this.user=new We.E(e.userProfile),this.avatar=this.user.avatar,this.publicId=e.publicId},$e=function(e){this.articleId=e.articleId,this.articleKey=e.articleKey,this.articleTitle=e.articleTitle,this.articleSubtitle=e.articleSubtitle,this.issue=e.issue,this.issueTitle=e.issueTitle,this.postsCount=e.commentsCount,this.issueDate=b.ZP.formatDate(new Date(e.issueDate),"v7.Client.DateFormat.Issue","d MMM yyyy"),this.comment=new Je(e.post)},Qe=function(e,t){var n=void 0===e?{}:e,i=n.items,r=n.continuationToken,o=n.total;this.items=null!=i&&(0,a.isFunction)(t)?(0,a.map)(i,t):i,this.continuationToken=r,this.total=o},et=function(){function e(){this._cache=new ze.Z({expire:36e5}),this._opinionsUpdates=new Ne.x}return Object.defineProperty(e.prototype,"opinionsUpdates",{get:function(){return this._opinionsUpdates.asObservable()},enumerable:!1,configurable:!0}),e.prototype.load=function(e){if((0,Re.hr)(e))throw new TypeError("Opinion id is expected to be a non empty string");var t=this._cache.get(e);if(t)return t;var n=Oe.load(e).then((function(e){return e.followers&&(e.followers=(0,a.map)(e.followers,(function(e){return new qe(e)}))),e.leaders&&(e.leaders=(0,a.map)(e.leaders,(function(e){return new Ge(e)}))),e.featuredComment&&e.featuredComment.userProfile&&(e.featuredComment.userProfile=new We.E(e.featuredComment.userProfile)),e.recentUpdates&&(e.recentUpdates=(0,a.map)(e.recentUpdates,(function(e){return new $e(e)}))),e}));return this._cache.set(e,n,5e3),n},e.prototype.find=function(e){if((0,Re.hr)(e))throw new TypeError("Opinion webName is expected to be a non empty string");var t=this._cache.get(e);if(t)return t;var n=Oe.find(e).then((function(e){return new Ue.Z(e)}));return this._cache.set(e,n),n},e.prototype.getFollowers=function(e,t){return Oe.getFollowers(e,t).then((function(e){return new Qe(e,(function(e){return new qe(e)}))}))},e.prototype.getLeaders=function(e,t){return Oe.getLeaders(e,t).then((function(e){return new Qe(e,(function(e){return new Ge(e)}))}))},e.prototype.getContributors=function(e,t){return Oe.getContribut new Xe(e)}))}))},e.prototype.getArticles=function(e,t){var n=void 0===t?{}:t,i=n.continuationToken,r=n.direction,o=n.take,a=void 0===o?20:o;if((0,Re.hr)(e))throw new TypeError("Opinion id is expected to be a non empty string");return Oe.getArticles(e,{continuationToken:i,direction:r,take:a})},e.prototype.getContributorArticles=function(e,t,n){var i=void 0===n?{}:n,r=i.continuationToken,o=i.take,a=void 0===o?20:o;if((0,Re.hr)(e))throw new TypeError("Opinion id is expected to be a non empty string");return Oe.getContributorArticles(e,t,{continuationToken:r,take:a})},e.prototype.getSnippets=function(e){if((0,Re.hr)(e))throw new TypeError("Opinion id is expected to be a non empty string");return Oe.getSnippets(e)},e.prototype.getStaticMapUrl=function(e,t){var n=t.width,i=t.height,r=t.visibleWidth;if((0,Re.hr)(e))throw new TypeError("Opinion id is expected to be a non empty string");return Oe.getStaticMapUrl(e,{width:n,height:i,visibleWidth:r})},e.prototype.getMapProperties=function(e,t){var n=t.width,i=t.height,r=t.visibleWidth;if((0,Re.hr)(e))throw new TypeError("Opinion id is expected to be a non empty string");return Oe.getMapProperties(e,{width:n,height:i,visibleWidth:r})},e.prototype.getGeoOpinions=function(e){var t=void 0===e?{}:e,n=t.bbox,i=t.skip,r=t.take,o=t.orderBy,a=t.opinionFilter,s=t.trendFilter,u=t.opinionId;return Oe.getGeoOpinions({bbox:n,skip:i,take:r,orderBy:o,opinionFilter:a,trendFilter:s,opinionId:u}).then((function(e){return new Ke({skip:i,take:r,total:e.total,items:e.items},(function(e){return new je(e)}))}))},e.prototype.getGeoClusters=function(e){var t=void 0===e?{}:e,n=t.northEastLat,i=t.northEastLng,r=t.southWestLat,o=t.southWestLng,a=t.zoom,s=t.opinionsFilter,u=t.trendsFilter,c=t.opinionId;return Oe.getGeoClusters({northEastLat:n,northEastLng:i,southWestLat:r,southWestLng:o,zoom:a,opinionsFilter:s,trendsFilter:u,opinionId:c})},e.prototype.getGeoLeaders=function(e){var t=void 0===e?{}:e,n=t.bbox,i=t.skip,r=t.take,o=t.opinionFilter,a=t.trendFilter,s=t.opinionId;return Oe.getGeoLeaders({bbox:n,skip:i,take:r,opinionFilter:o,trendFilter:a,opinionId:s}).then((function(e){return new Ke({skip:i,take:r,total:e.total,items:e.items},(function(e){return new Ye(e)}))}))},e.prototype.search=function(e){var t=void 0===e?{}:e,n=t.query,i=t.take,r=t.skip,o=t.continuationToken,s=t.orderBy,u=t.mode;return Oe.search({query:n,take:i,skip:r,continuationToken:o,orderBy:s,mode:u}).then((function(e){return e.opinions&&(e.opinions.items=(0,a.map)(e.opinions.items,(function(e){return new Ue.Z(e)}))),e.myOpinions&&(e.myOpinions.items=(0,a.map)(e.myOpinions.items,(function(e){return new Ue.Z(e)}))),e}))},e.prototype.follow=function(e,t){var n=this,i=void 0===t?{}:t,r=i.leaderEnAccountNumber,o=i.commentId,a=i.articleId;if((0,Re.hr)(e))throw new TypeError("Opinion id is expected to be a non empty string");return Oe.follow(e,{leaderEnAccountNumber:r,commentId:o,articleId:a}).then((function(e){return new Ue.Z(e)})).then((function(e){return e.supporting(!0),n._opinionsUpdates.next(e),e}))},e.prototype.unFollow=function(e){var t=this;if((0,Re.hr)(e))throw new TypeError("Opinion id is expected to be a non empty string");return Oe.unFollow(e).then((function(e){return new Ue.Z(e)})).then((function(e){return e.supporting(!1),t._opinionsUpdates.next(e),e}))},e.prototype.create=function(e,t){var n=this,i=void 0===t?{}:t,r=i.commentId,o=i.articleId;if((0,Re.hr)(e))throw new TypeError("Opinion text is expected to be a non empty string");return Oe.create(e,{commentId:r,articleId:o}).then((function(e){return new Ue.Z(e)})).then((function(e){return e.supporting(!0),n._opinionsUpdates.next(e),e}))},e.prototype.getUserOpinions=function(e,t){if((0,Re.hr)(e))throw new TypeError("profileName is expected to be a non empty string");return Oe.getUserOpinions(e,t).then((function(e){return new Qe(e,(function(e){return new Ue.Z(e)}))}))},e.prototype.getLeaderTags=function(e,t){if((0,Re.hr)(e))throw new TypeError("profileName is expected to be a non empty string");return Oe.getLeaderTags(e,t)},e.prototype.searchTags=function(e){var t=(void 0===e?{}:e).query;return(0,Re.hr)(t)?Promise.resolve([]):Oe.searchTags({query:t})},e.prototype.addSearchToHistory=function(e){return(0,Re.hr)(e)?Promise.resolve():Oe.addSearchToHistory(e)},e.prototype.getArticleOpinions=function(e,t){return Oe.getArticleOpinions(e,t).then((function(e){return{items:e&&e.map((function(e){return new Ue.Z(e)}))||[]}}))},e}(),tt=new et;function nt(e,t){return t.Width*t.Height-e.Width*e.Height}function it(e,t){var n=e.Rank||-1;return(t.Rank||-1)-n}var rt=function(e,t){if(this.visible=J.observable(!1),this.itemId=t,e.comment){this.commentVisible=J.observable(!e.opinion),this.hyphComment=Le.Z.hyphenate(e.comment),this.clamp=J.observable(3),this.attachVisible=J.observable(!1);var n=e.postsInArticle>0?" and ".concat(e.postsInArticle," others"):"";this.headerText="".concat(n," commented on ")}else this.headerText=" supported opinion:";c.extend(this,e)},ot=function(e){var t=[];if(e.Images&&e.Images.length>0){for(var n=(0,I.FK)(),i=I.xC,r=e.Images.length,o=0;o<r;o++){var a=e.Images[o],s=Math.round(100*n/a.Width);if(!(s>i)){var u=Math.round(a.Height*s/100);u>n||t.push({image:a,width:n,height:u,scale:s})}}t.sort(nt)}this.articleId=e.ArticleId,this.title=e.HyphenatedTitle||e.Title,this.subtitle=e.Subtitle,this.issueTitle=e.Issue&&e.Issue.Title,this.images=t,this.img=J.observable()},at=function(){function e(e){var t=this,n=e&&e.recentlyJoined||[],i=e&&e.comments||[],r=(0,a.filter)(n,(function(e){return!i.some((function(t){return t.opinion&&e.opinion.id===t.opinion.id&&e.authorId===t.authorId}))})),o=0,s=(0,a.chain)(i.concat(r)).orderBy(["eventTime"],[!1]).slice(0,6).map((function(e){return new rt(e,o++)})).value();this.section=e.section,this.articlesKo=J.observableArray([]),this.socialItemsKo=J.observableArray(s),this.articlesVisible=J.pureComputed((function(){return t.articlesKo().length})),this._opinionsUpdatesSubscription=tt.opinionsUpdates.subscribe((function(e){var n=t.socialItemsKo().find((function(t){return t.opinion&&t.opinion.id===e.id}));n&&n.opinion.update(e)}))}return e.prototype.renderAttachments=function(e,t){t.hasAttachments&&new De.Z(t.attachments,{renderVideoPlayer:!1,showGalleryOnClick:!1,itemsInLayout:1}).render(c(e))},e.prototype.articleClick=function(e){f.Z.current&&f.Z.current.textViewController&&f.Z.current.textViewController.jump(e.articleId)},e.prototype.commentClick=function(e){_.default.show({articleId:e.articleId,markerCommentId:e.publicId})},e.prototy.follow(e.id)},e.prototype.opinionClick=function(e){e.webName&&Ce.Z.goView(X.n3.Opinion,{opinion:e.webName,opinionId:e.opinionId})},e.prototype.profileClick=function(e){e.userProfile.goToProfile()},e.prototype.dispose=function(){this._opinionsUpdatesSubscription&&this._opinionsUpdatesSubscription.unsubscribe()},e}(),st=function(e){function t(t,n,i){var r=this,o={id:"item-".concat(t.itemId),priority:i,getHeight:function(){return c("li[item-id=".concat(t.itemId,"]"),n).outerHeight(!0)||0},canHide:!0,contentBounds:[0,10],getContentSize:function(){return r.contentSize},hide:function(){t.visible(!1)}};return t.comment?(o.increase=function(){++r.contentSize,t.visible()?!t.hasAttachments||t.attachVisible()?t.commentVisible()?t.clamp()<10&&(t.clamp(t.clamp()+1),10===t.clamp()&&(r.contentSize=10)):t.commentVisible(!0):t.attachVisible(!0):t.visible(!0)},o.decrease=function(){--r.contentSize,t.clamp()>3?t.clamp(t.clamp()-1):t.opinion&&t.commentVisible()?t.commentVisible(!1):t.attachVisible()?t.attachVisible(!1):t.visible()&&(t.visible(!1),r.contentSize=0)}):(o.increase=function(){t.visible()||(t.visible(!0),r.contentSize=10)},o.decrease=function(){t.visible()&&(t.visible(!1),r.contentSize=0)}),(r=e.call(this,o)||this).contentSize=0,r}return(0,o.ZT)(t,e),t}(M.Z.Block),ut=function(e){function t(t,n,i){var r=t&&t.length,o=n.find("section.subgroup-featarticles"),a={id:"articles",priority:1e3,contentBounds:[0,r],getHeight:function(){return o.outerHeight(!0)},canHide:!0,getContentSize:function(){return i.articlesKo().length},increase:function(){var e=i.articlesKo()&&i.articlesKo()[i.articlesKo().length-1];if(e&&e.images.length&&!e.img())e.img(e.images[0]);else{var n=t[i.articlesKo().length];n&&i.articlesKo.push(new ot(n))}},decrease:function(){var e=i.articlesKo()&&i.articlesKo()[i.articlesKo().length-1];e&&e.img()?e.img(null):i.articlesKo.pop()}};return e.call(this,a)||this}return(0,o.ZT)(t,e),t}(M.Z.Block),ct=function(){function e(e,t,n){this.container=e,this.social=t,this.articles=(0,a.filter)(n,(function(e){return((0,a.isFunction)(e.isLoaded)?e.isLoaded():e.isLoaded)&&e.canRender()})).sort(it),this.model=new at(t),this.render(),this.buildBlocks()}return e.prototype.buildBlocks=function(){for(var e=this,t={getHeight:function(){return e.container.height()}},n=this.container.find(".subsection-hd"),i=0,r=[new M.Z.Block({id:"sectionHeader",priority:i,getHeight:function(){return n.outerHeight(!0)},canHide:!1})],o=this.container.find("section.subgroup-update"),a=this.model.socialItemsKo(),s=a.length,u=0;u<s;u++)i+=10,r.push(new st(a[u],o,i));r.push(new ut(this.articles,this.container,this.model)),new M.Z.Manager(t,r).build(M.Z.LayoutStrategy.BUDWEISER)},e.prototype.render=function(){E.z.renderTo("v7.Client.SocialSection",this.model,this.container)},e.prototype.dispose=function(){this.model.d.data||e.Data}lt.prototype={_item:null,_data:null,_columns:null,article:function(){return this._item},sectionElm:function(e){return(0,l.Oh)().section({id:0,title:e})},reset:function(e){e&&(this._item=e,this._data=e.data||e.Data)},tasks:function(){return[]},height:a.noop,_createEmptyColumn:function(e){return(new d.d$).addLayout(this).type(d.Xp.Social).articleColumnsCount(1).columnIdx(e).noDividers(!0)},_render:function(){var e=new d.JD,t=0,n=this._item.group(),i=this._createEmptyColumn(t++,n),r=(0,l.Oh)().section(n).column().addClass("col").css({position:"absolute",width:"".concat((0,I.FK)(),"px"),top:"0",bottom:"0"}),o=r.createChild("div").addClass("teaser").css({top:"auto",bottom:"auto"});o.css({top:"-24px",bottom:"-24px"}),i.addCell(new P._(r,1,0,I.$0));var a=new Me.Z.SectionModel(this._data,n.title),s=new ct(o.elm(),a,n.articles()),u=(0,x.ny)(this._item,x.tG.Rendered);return i.onDisposed((function(){s.dispose(),u.release()})),e.append(i),e},render:function(){var e=V.Z.get("ui.textView.enableSocialSection",!1);if(!this._item||!this._data||!e)return Promise.reject();var t=this._render();return Promise.resolve(t)},highlight:a.noop,estimatedColumnsCount:function(){return 1},dataItem:function(){return this._item}};var dt=lt;function ht(e){this._data=e}ht.prototype={_data:null,_columns:null,article:function(){return this._data},sectionElm:function(){return this._data?(0,l.Oh)().section(this._data.group()):null},reset:function(e){e&&(this._data=e)},tasks:function(){return[]},height:a.noop,highlight:a.noop,estimatedColumnsCount:function(){return 1},dataItem:function(){return this._data},createColumn:function(){var e=(new d.d$).addLayout(this).articleColumnsCount(1),t=(0,x.ny)(this._data,x.tG.Rendered);return e.onDisposed((function(){return t.release()})),e},_dispose:a.noop};var pt=ht,ft=n(54215),mt=n(91493),gt=n(239);function vt(e){var t=Object.create(e);return t.isLeft=e.pageNumber%2==0,t}var yt=function(e,t){return ie.default.load().then((function(){return ie.default.enAccountNusolve(void 0)})).then((function(n){return t.currentUserEnNumber=n,function(e,t){return E.z.appendTo("v7.Client.BookmarkBlock",e,t),function(e){var t=[];return(0,a.forEach)(e.spreads,(function(e){(0(e.pageUrl2))}))})),Promise.all(t)}(e)}(function(e){var t=e.pageSetId,n=e.pages,i=e.bookmarkId,r=e.owner,s=void 0===r?{}:r,u=e.isExpanded,c=void 0!==u&&u,l={pageSetId:t,isOwner:e.currentUserEnNumber===(s.EnAccountNumber||s.enAccountNumber),isExpanded:c,isBookmarked:!!i,pagesCount:n.length},d=s.nickname||s.Nickname;l.owner={nickname:d,avatar:(0,h.b_)({nickname:d,imageId:s.avatarImageId||s.AvatarImageId,size:h.wC.normal,fallbackAvatarUrl:s.photoUrl||s.PhotoUrl})};var p=function(e){var t=(0,a.chain)(e).map(vt).sortBy("PageNumber").value(),n=(0,a.reduce)(t,(function(e,t){return 1===t.pageNumber||t.isLeft?(e[t.pageNumber]||(e[t.pageNumber]=[])).push(t):(e[t.pageNumber-1]||(e[t.pageNumber]=[])).push(t),e}),{});return(0,a.values)(n)}(n);return l.blockTemplate=p.length>1?"stackTemplate":"pubTemplate",l.spreads=c?p:[p[0]],l.expand=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,o.CR)(e,2)[1];f.Z.current.textView.onReadMoreClicked(n)},l.pageClick=function(){m.Z.pageView.activate(null,{article:{Issue:{Id:this.issue},Page:this.pageNumber}})},l.optionsClick=function(e,t){var n=(0,a.isEmpty)(e.spread)?{}:e.spread[0],r={previewType:ne.BQ.pageSet,issueName:n.publicationName,issueDate:n.formatDate,issue:n.issue,pageLayout:{number:n.pageNumber,width:n.pageWidth,height:n.pageHeight},pagesCount:this.pagesCount},o={controller:f.Z.current.textView.controller,pageSet:{id:this.pageSetId,bookmarkId:i},preview:r};return new gt.Z(ne.tk.textView,o).show({position:{x:t.pageX||t.touchX||0,y:t.pageY||t.touchY||0,align:{y:ft.x.Bottom}}}),!1},l}(t),e).then((function(){return n=(t=e).find("div.pagegroup"),i=t.find(".stack-item"),r=n.width()+I.ez,o=0,s=[],(0,a.forEach)(i,(function(e){var t=c(e).outerWidth();o+=t,s.push(o)})),{width:r,anchors:s};var t,n,i,r,o,s}))}))};function _t(e){return(0,l.Oh)().section(e.group()).div()}var bt,wt=function(e){var t=Object.create(pt.prototype);pt.apply(t,[e]);var n=e&&e.Data,i=n&&(n.Pages||n.pages);if((0,a.isEmpty)(i))return null;var r=(0,a.map)(i,(function(e){return function(e){var t={cid:e.cid||e.CID,issueDate:e.issueDate||e.IssueDate,issueId:e.issueId||e.IssueId,issueVersion:e.issueVersion||e.IssueVersion||0,page:e.page||e.Page,pageHeight:e.pageHeight||e.PageHeight,pageNumber:e.pageNumber||e.PageNumber,pageWidth:e.pageWidth||e.PageWidth,publicationName:e.publicationName||e.PublicationName,ticket:e.ticket||e.Ticket},n=(0,k.x)(t.issueDate);return t.issue=(0,A.eX)(t.cid,n,t.issueVersion),t.formatDate=b.ZP.formatDate(n,"v7.Client.DateFormat.Issue","dd MMM yyyy"),t.pageUrl=Z.Z.getPageImageUrl(t.issue,t.pageNumber,{width:t.pageWidth,height:t.pageHeight},{height:I.$0}),t.pageUrl2=t.pageUrl,t}(e)})),o={itemId:e.itemId,bookmarkId:n.bookmarkId||n.BookmarkId,pages:r,pageSetId:e.itemId,owner:n.Owner||n.owner||{}};function s(){return Promise.all([b.ZP.loaded(),E.z.loaded()]).then((function(){return function(e,t){var n=_t(t).css({position:"absolute",width:"".concat(100*I.G4,"px"),left:"-10000px",height:"".concat(I.$0,"px")});return yt(n. n.remove(),e}))}(o,e)})).then((function(n){var i=n.width,r={position:"absolute",width:"".concat(i,"px"),top:"0",bottom:"0"},a=_t(e).css(r),s=function(e){var t=e.renderer,n=e.width;return t.createColumn().columnIdx(0).type(d.Xp.BookmarkPages).section(t._data.group()).width(n).noDividers(!0)}({renderer:t,width:i});return s.onDisposed((function(){return a.remove()})),s.anchors(n.anchors),yt(a.elm(),o),s.addCell(new P._(a.elm(),1,0,I.$0)),new d.JD(s,s)}))}rpanded=!0,s()},t.render=s,t},Ct=n(62918),It={default:1.5,xsmall:1},Pt=(function(){function e(){}e.prototype.action=function(e,t){var n=m.Z[e];if(void 0===n)throw new Error("Not supported action '".concat(e,"'"));n.activate(t)},e.prototype.iid 0!==m.Z[e]}}(),function(e){function t(t,n){var i=e.call(this)||this;return i.section=t,i.widthFactor=t.widthFactor||It,i.viewModel=n,i}(0,o.ZT)(t,e),t.prototype.estimatedColumnsCount=function(){return this.getWidthInColumns()},t.prototype.render=function(){return(0,o.mG)(this,void 0,void 0,(function(){var e,t,n,i,r,a,s,u,c=this;return(0,o.Jh)(this,(function(o){return e=this.getWidthInColumns(),t=Math.round(e*I.G4),n=I.$0,i=(0,l.Oh)().section().div().css({position:"absolute",width:"".concat(t,"px"),height:"".concat(n,"px"),left:"-10000px"}),r=i.elm(),E.z.renderTo(this.section.templateId,this.viewModel,r),(a=new d.d$).type(this.GetTextViewColumnType()).width(t).noDividers(!0).noHeaderAbove(!0).anchors([t]),s=(0,x.ny)(this.section,x.tG.Rendered),a.onDisposed((function(){return s.release()})),u=new P._({elm:i,colspan:1,top:0,height:I.$0,nopadding:!0}),a.addCell(u),a.addLayout({dataItem:function(){return c.section}}),i.css({left:null}),[2,new d.JD(a,a)]}))}))},t.prototype.dataItem=function(){return this.section},t.prototype.height=function(){},t.prototype.getWidthInColumns=function(){var e=c("html"),t=(0,a.keys)(this.widthFactor),n=(0,a.findIndex)(t,(function(t){return"default"!==t&&e.hasClass("screen-".concat(t))}));return n>-1?this.widthFactor[t[n]]:this.widthFactor.default},t.prototype.GetTextViewColumnType=function(){return d.Xp.Content}}(Ct.Y),n(76700)),xt=u.Z.renderer,St=((bt={})[Pt.Ku.ArticlePreview]=s.Z.renderer,bt[Pt.Ku.RegularArticle]=s.Z.renderer,bt[Pt.Ku.SocialArticle]=s.Z.renderer,bt[Pt.Kt=!1),xt(e,t)},bt[Pt.Ku.Replies]=function(e){return new T(e)},bt[Pt.Ku.InitBlock]=function(e){return new q(e)},bt[Pt.Ku.Monitors]=function(e){return new K(e)},bt[Pt.Ku.Profile]=function(e){return new Ze(e)},bt[Pt.Ku.Social]=function(e){return new dt(e)},bt[Pt.Ku.BookmarkPages]=function(e){return wt(e)},n(10751)),Tt=n(46720);function kt(e,t){for(var n=[],i=Math.pow(e.length,t),r=i;r<2*i;r++){var o=r.toString(e.length).slice(-t).split("").map((function(t){return e[t]})).reverse();n.push(o)}return n}function At(e,t,n,i,r){var o=i*n,a=t/100*r*(e/100*r);return 100-Math.round(100*o/a)}function Et(e,t,n,i){if(!(e.length<t)){for(var r,o,a,s,u,c,l,d={cells:[],lossRatio:0},h=e.slice(0,t),p=h.reduce((function(e,t){return e+t.image.Width/t.image.Height}),0),f=0,m=0;m<h.length;++m){var g=0;if(m===t-1?g=100-f:(c=h[m].image.Width/h[m].image.Height,l=p,g=Math.round(100*c/l)),g<20)return e.splice(m,1),Et(e,t,n,i);f+=g;var v=(r=n,o=i/100*g,a=h[m].image.Height,void 0,void 0,s=100*o/h[m].image.Width,u=100*r/a,Math.round(Math.max(s,u)));if(!(v<=I.xC))return e.splice(m,1),Et(e,t,n,i);d.cells.push({data:h[m],imageWidth:g,imageScale:v}),d.lossRatio=d.lossRatio+At(h[m].image.Height,h[m].image.Width,n,i/100*g,v)}return e.splice(0,t),d.lossRatio=Math.round(d.lossRatio/t),d}}function Zt(e,t,n,i){for(var r={lossRatio:0,rows:[]},o=0;o<t.length;o++){var a=Et(e,t[o],n,i);if(!a)return;r.rows[o]=a.cells,r.lossRatio=r.lossRatio+a.lossRatio}return r.lossRatio=Math.round(r.lossRatio/t.length),r}function Mt(e,t,n){var i,r='\n        <div class="hdlc-cell" style="width:'.concat(n.imageWidth,'%">\n            <article class="art" aid="').concat(n.data.id,'">\n                <figure class="art-pic">\n                    <a>\n                        <img src="').concat(n.data.image.Url).concat(n.data.image.Url.indexOf("?")>=0?"&":"?","scale=").concat(n.imageScale,'"\n                            onerror="$.nd.img_onerror(this)" nd_scale="').concat(n.imageScale,'" nd_url="').concat(n.data.image.Url,'" />\n                    </a>\n                    ').concat((i=n.data.image.Byline,i?"<em>".concat(i,"</em>"):""),"\n                </figure>\n                <header>\n                    <hgroup><h1>").concat(n.data.hyphenatedTitle||n.data.title,'</h1></hgroup>\n                    <ul class="art-byline">\n                        <li class="art-source">').concat(n.data.issue.Title,'</li>\n                        <li class="art-date">\n                            <time datetime="').concat(n.data.issue.Date,'" pubdate="">').concat(n.data.issue.DateFormatted,"</time>\n                        </li>\n                    </ul>\n                </header>\n            </article>\n        </div>"),o=c(r);o.appendTo(e.elm()),L.kb.bind(o,{singleTapConfirmed:function(){t.aid=n.data.id,Tt.Z.trigger("click",this)},pinch:function(){t.aid=n.data.id,Tt.Z.trigger("pinch",this)}})}function Dt(e,t,n,i){var r,a,s=e.createChild("div").addClass("hdlc-row").css("height","".concat(i,"%"));try{for(var u=(0,o.XA)(n),c=u.next();!c.done;c=u.next())Mt(s,t,c.value)}catch(e){r={error:e}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(r)throw r.error}}return s}function Lt(e,t,n,i){var r="section_header_".concat(t.id);if(e.checkBuiltItemsList(r))return null;var a=(0,I.FK)(3),s=Math.round(f.Z.current.textView.columns().height),u=function(e){for(var t,n,i,r=[],a=e[0],s=0;s<6&&(a=a.prev())&&a.Type!==St.g.article;++s)if(a&&a.Type===St.g.divider&&a.Data&&a.Data.Image){i=a.Data.Image.ArticleId;break}try{for(var u=(0,o.XA)(e),c=u.next();!c.done;c=u.next()){var l=c.value;if(l.ArticleId!==i){if(l.Images&&l.Images.length>0){var d=l.Images.reduce((function(e,t){var n=t.Width*t.Height;return n<=e.area?e:{area:n,image:t}}),{area:0,image:null}).image;r.push({id:l.Id,title:l.Title,hyphenatedTitle:l.HyphenatedTitle,image:d,issue:l.Issue,formFactor:d.Width/d.Height})}if(r.length>8)break}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return r}(i);if(u.length<6)return Ht(e,t,n,i);var c=function(e,t,n,i){for(var r,a,s=null,u=[],c=2;c<=3;c++)u.push(c);for(c=2;c<=4;c++)try{for(var l=(r=void 0,(0,o.XA)(kt(u,c))),d=l.next();!d.done;d=l.next()){var h=d.valt){return e+t}));if(!(p<6||e.length<p)){var f=Zt(e.slice(),h,t/(h.length+1),n);f&&(!s||f.lossRatio<s.lossRatio)&&(s=f)}}}catch(e){r={error:e}}finally{try{d&&!d.done&&(a=l.return)&&a.call(l)}finally{if(r)throw r.error}}return s?s.rows:null}(u,s,a);if(!c||!c.length)return Ht(e,t,n,i);var h=(new d.d$).section(t).type(d.Xp.ImagesHeadline).width(3*I.G4),p=(0,l.Oh)().section(t).column().addClass("headlinescover").css({position:"absolute",top:"0px",width:"".concat((0,I.FK)(3),"px")}),m=Math.round(100/(c.length+1)),g=100-m*c.length,v=s/(c.length+1);return Dt(p,h,c.shift(),m),c.length>1&&Dt(p,h,c.shift(),m),function(e,t,n,i,r){var o=e.createChild("div").addClass("hdlc-row").css("height","".concat(r,"%"));o.append('<header class="hdlc-hd"><hgroup><h1><span class="hdlc-hd-label">').append("".concat(b.R9.val("Important.Title"),"</span>")).append(t?'<span class="hdlc-hd-country">'.concat(t,"</span>"):"").append("</h1></hgroup></header>").checkpoint(o.checkpoint()),o.addOnRenderedListener((function(e){!function(e,t,n,i,r,o){for(var a=e.parent(),s=a.innerHeight(),u=a.innerWidth(),c=parseInt(t.css("font-size"),10),l=parseInt(e.css("font-size"),10);(n<s||c>o||l>o)&&!(c<=r&&l<=r);)c<=r||(c--,i-400<u&&c--),l<=r||l--,t.css("font-size","".concat(c,"px")),e.css("font-size","".concat(l,"px")),s=a.innerHeight()}(e.find(".hdlc-hd-label"),e.find(".hdlc-hd-country"),n-20,i,20,100)})),o.render()}(p,t.subtitle,v,a,g),Dt(p,h,c.shift(),m),c.length>0&&Dt(p,h,c.shift(),m),h.addCell(new P._(p,1,0,f.Z.current.textView.columns().height)),h.onDisposed((function(){return e.removeFromBuiltItemsList(r)})),h.addDivider(),e.addItemToBuiltItemsList(t,r),new d.JD(h,h)}var Nt=n(60078),Rt=n(42995),Vt=n(43388),Bt=n(91330),Ft=n(96389);var Ot=n(1301),zt=1.5;function Ut(e,t,n){var i=(void 0===n?{}:n).showNewspaperName,r=void 0!==i&&i;e.append("<header>").append("<hgroup>").append("<h1>".concat(t.HyphenatedTitle||t.Title,"</h1>")),t.Subtitle&&e.append("<h2>".concat(t.Subtitle,"</h2>")),e.append("</hgroup>"),r&&t.Issue&&(e.append('<ul class="art-byline">'),e.append('<li class="art-source">'.concat(t.Issue.Title,"</li>")),e.append("</ul>")),e.append("</header>")}function Ht(e,t,n,i){var r,a,s,u,c="section_header_".concat(t.id);if(e.checkBuiltItemsList(c))return null;var h,p=(new d.d$).section(t).type(d.Xp.SectionHeader).noDividers(!0).width(Math.round(I.G4*zt)),m=Math.round((0,I.FK)(zt)),v=(0,l.Oh)().section(t).column().addClass("col").css({position:"absolute",width:"".concat(m,"px"),top:"0px",bottom:"0px"}),y=v.createChild("div").addClass("teaser".concat(t.slug?" section-".concat(t.slug):"")).css({top:"auto",bottom:"auto"});if(e.checkCache(c)){var _=e.cache(c);h=_.items,y.append(_.html).checkpoint(_.height).elm()}else{h=[];var b=i[0];i.sort((function(e,t){var n=e===b?-1:e.Rank;return(t===b?-1:t.Rank)-n})),y.append(function(e){if(!e)return"";var t=e.title,n=e.subtitle,i=e.iconClassName?'<div class="section-icon">\n            <span class="pri pri-'.concat(e.iconClassName,'" aria-hidden="true"></span>\n        </div>'):"",r=n?'<div class="subtitle">'.concat(n,"</div>"):"";return'\n        <header class="subsection-hd">\n            <div class="subsection-hd-wrapper">\n                '.concat(i,'\n                <h2 class="title">').concat(t,"</h2>\n                ").concat(r,"\n                ").concat("","\n            </div>\n        </header>")}(t)).checkpoint(y.checkpoint());var w=0;try{for(var C=(0,o.XA)(i),S=C.next();!S.done;S=C.next()){var T=S.value;if(T.isLoaded&&(T.HyphenatedTitle||T.Title)){var k=y.height();w>0&&y.append(Ot.I.html),y.append('<article class="art" aid="'.concat(T.id||T.Id,'">')),Ut(y,T,n),y.append("</article>");var A=y.checkpoint(),E=f.Z.current.textView.columns().height-k-A;if(E<=0)y.rollback();else{if(T.Images&&b!==T){var Z=[];try{for(var M=(s=void 0,(0,o.XA)(T.Images)),D=M.next();!D.done;D=M.next()){var L=D.value,N=Math.round(100*m/L.Width);if(!(N>I.xC)){var R=Math.round(L.Height*N/100);R>m||R>=E||Z.push({image:L,width:m,height:R,scale:N})}}}catch(e){s={error:e}}finally{try{D&&!D.done&&(u=M.return)&&u.call(M)}finally{if(s)throw s.error}}Z.length&&(Z.sort((function(e,t){return t.width*t.height-e.width*e.height})),L=Z[0],y.rollback(),w>0&&y.append(Ot.I.html),y.append('<article class="art" aid="'.concat(T.Id,'">')).append('<figure class="art-pic">').append("<a>").append("<img").append(' src="'.concat(L.image.Url).concat(L.image.Url.indexOf("?")>=0?"&":"?","scale=").concat(L.scale,'"')).append(' onerror="$.nd.img_onerror(this)"').append(' style="width:'.concat(L.width,"px;height:").concat(L.height,'px"')).append(' alt=""').append(' nd_url="'.concat(L.image.Url,'"')).append(' nd_scale="'.concat(L.scale,'"')).append("/>"),L.image.Byline&&y.append("<em>".concat(L.image.Byline,"</em>")),y.append("</a>").append("</figure>"),Ut(y,T,n),y.append("</article>"),A=y.checkpoint())}if(++w,h.push(T),y.checkpoint(A),f.Z.current.textView.columns().height-y.height()<=I.Nv+(0,g.Jn)())break}}}}catch(e){r={error:e}}finally{try{S&&!S.done&&(a=C.return)&&a.call(C)}finally{if(r)throw r.error}}e.cache(c,{html:y.html(),height:y.height(),items:h})}y.css({top:"-24px",bottom:"-24px"}),p.addCell(new P._(v,1,0,f.Z.current.textView.columns().height));var V=h.map((function(e){return(0,x.ny)(e,x.tG.RenderedInSectonHeader)}));return.release()}))})),e.addItemToBuiltItemsList(t,c),new d.JD(p,p)}varTailColumn=!1}return e.prototype.headColumnKey=function(e){return"g".concat(e.id)},e.prototype.b){return null},e.prototype.concat(e.id)},e.prototype.buildTailColumn=function(e,t){return null},e.prototype.build=function(){},e}(),Wt=function(e){function t(){var t=e.call(this)||this;return t.hasHeadColumn=!0,t}return(0,o.ZT)(t,e),t.prototype.buildHeadColumn=function(e,t,n,i){return void 0===i&&(i=t.articles()),Ht(e,t,n,i)},t}(jt),qt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.ZT)(t,e),t.prototype.buildHeadColumn=function(t,n,i,r){void 0===i&&(i={});var o=(0,a.assign)({},i);return o.showNewspaperName=!0,e.prototype.buildHeadColumn.call(this,t,n,o,r)},t}(Wt),Gt=function(e){function t(){var t=e.call(this)||this;return t.hasTailColumn=!0,t}return(0,o.ZT)(t,e),t.prototype.buildTailColumn=function(e,t){return function(e,t){var n="section_footer_".concat(t.id);if(e.checkBuiltItemsList(n))return null;var i=(new d.d$).section(t).type(d.Xp.CategoryTail).addDivider(),r=(0,l.Oh)().section(t).column().addClass("col").css({position:"absolute",width:"".concat((0,I.FK)(),"px"),top:"0px",bottom:"0px"}),a=r.createChild("div").addClass("morearticles");if(e.checkCache(n)){var s=e.cache(n);a.append(s.html).checkpoint(s.height).elm()}else a.append('<div class="morearticles-in">').append('<a nd-ui-type="category-link" group-id="'.concat(t.id,'" href="javascript:void(0)"><h1>')).append(b.R9.format("Buttons.MoreSectionNews","<em>".concat(t.title,"</em>"))).append("</h1></a></div>"),a.checkpoint(a.checkpoint()),e.cache(n,{html:a.html(),height:a.height()});a.css({top:"-24px",bottom:"-24px"}),i.addCell(new P._(r,1,0,f.Z.current.textView.columns().height)),i.onDisposed((function(){return e.removeFromBuiltItemsList(n)})),e.addItemToBuiltItemsList(t,n);var u=(0,l.Oh)().parent();return u.data("readMoreCategoryElmRegistered")||(u.tap('a[nd-ui-type="category-link"]',(function(e){var t=c(e.target).closest('a[nd-ui-type="category-link"]').attr("group-id");if(t){var n,i,r=Rt.U(t);if(r)if(r.slug)!function(e,t){if(!e)return!1;var n=(0,Vt.K)(t),i=n.isValid?{category:e,country:n.countryCode.toLowerCase(),lang:n.languageCode.toLowerCase()}:{category:e};Ce.A.goView(X.n3.Categories,i)}(r.slug,r.locale);else if(r.type===Pt.dl.FollowedChannel&&r.dto){var a={profileId:r.dto.id};Ce.A.goView(X.n3.Profile,a)}else{var s=r,u=s.raw(),l=u.GroupId||u.id;switch("GroupType"in u?u.GroupType:u.type){case Pt.dl.Headlines:s.renderingType===Pt.NN.SocialCategory&&function(e){var t=(0,Vt.K)(e);if(t.isValid){var n={category:"topnews",country:t.countryCode.toLowerCase(),lang:t.languageCode.toLowerCase()};Ce.A.goView(X.n3.Categories,n)}}(l);break;case Pt.dl.Category:n=l,(i=V.Z.get("ui.FeedSettings.Categories")[n])&&Ce.A.goView(X.n3.Categories,{category:i.path});break;case Pt.dl.UserSection:!function(e){var t=(0,o.CR)(e.split("-"),3),n=t[1],i=t[2];(0,Ft.b)(n).then((function(e){var t={issue:e.latestIssue.key},r=Bt.Z.currentLanguage();r&&(t.lng=r),(0,Nt.D3)(t).then((function(e){var r=e.Pages.find((function(e){return e.SectionName===i}));r?w.Z.showIssuePage(r.PageNumber,t.issue):w.Z.showNewspaper(n)}))}))}(l)}}}})),u.data("readMoreCategoryElmRegistered",!0)),new d.JD(i,i)}(e,t)},t}(qt),adColumn=!1,t}return(0,o.ZT)(t,e),t.prototype.buildHeadColumn=function(){return null},t}(Gt),Yt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.ZT)(t,e),t.prototype.bn Lt(e,t,n,i)},t}(qt),Kt={basic:new jt,regular:new Wt,regularHeadlines:new qt,category:new Gt,socialCategory:new Xt,imagesHeadlines:new Yt},Jt=n(6677),$t=null,Qt=[],en=!1;function tn(e,t){if(!t)return e;var n=function(e,t){var n=e.concat(t).sort((function(e,t){return e.start-t.start})),i=n[0],r=[i];return(0,a.forEach)(n,(function(e){e.start>i.end?r.push(i=e):e.end>i.end&&(i.end=e.end)})),r}(e.intervals,t.intervals),i={totalDuration:e.totalDuration+t.totalDuration,count:e.count+t.count,intervals:n,duration:(t.end-t.start}),0)};return(0,a.forIn)(e,(function(e,n){(0,a.includes)(["duration","count","totalDuration","intervals"],n)||(i[n]=n in t?tn(e,t[n]):e)})),n e||(i[n]=t)})),i}var nn,rn,on,an=function(){function e(e,t){this.name=e,this._children=[],t&&(this._parent=t),this._intervals=[],this._startTime=0,this._duration=0}return e.prototype.start=function(){return this._parent&&this._parent.start(),this._startTime||(this._startTime=(new Date).getTime()),this},e.prototype.duration=function(){return this._startTime?this._duration+(new Date).getTime()-this._startTime:this._duration},e.prototype.stop=function(){if((0,a.forEach)(this._children,(function(e){return e.stop()})),this._startTime){var e=(new Date).getTime();this._duration+=e-this._startTime,this._intervals.push({start:this._startTime,end:e}),this._startTime=0}return this},e.prototype.reset=function(){return(0,a.forEach)(this._children,(function(e){return e.reset()})),this._startTime=this._duration=0,this._intervals=[],this},e.prototype.restart=function(){return this.reset(),this.start(),this},e.prototype.add=function(t){var n=new e(t,this);return this._children.push(n),n},e.prototype.values=function(){var e=this.duration();return(0,a.transform)(this._children,(function(e,t){var n=t.values();t.name in e?e[t.name]=tn(e[t.name],n):e[t.name]=n}),{totalDuration:e,count:1,duration:e,intervals:this._intervals})},e.prototype.parent=function(){return this._parent},e.prototype.print=function(){en&&Jt.Z.log(this.values())},e}(),sn={get current(){return $t},init:function(e){return Qt=[],$t=new an(e)},create:function(e){return new an(e)},push:function(e){return $t&&Qt.push($t),$t=(0,a.isString)(e)?$t?$t.add(e):new an(e):e},pop:function(){var e=$t;return $t=Qt.$t=null,Qt=[]},enable:function(){en=!0}},un=n(63447),cn=n(63561)ise.resolve()}return e.prototype.enqueue=function(e){var t=this,n=this._lastPromise.then((function(){return e})),i=this._lastPromise=new Promise((function(e){n.finally(e).catch(a.noop)}));return i.then((function(){i===t._lastPromise&&(t._lastPromise=Promise.resolve())})),n},e.prototype.enqueueTask=function(e){var t=this,n=this._lastPromise.then(e),i=this._lastPromise=new Promise((function(e){n.finally(e).catch(a.noop)}));return i.then((function(){i===t._lastPromise&&(t._lastPromise=Promise.resolve())})),n},e}(),dn=function(){function e(){this._isResolved=!1,this._lastPromise=Promise.resolve(),this._promise=null,this._promiseResolve=null}return Object.defineProperty(e.prototype,"promise",{get:function(){var e=this;return this._isResolved?Promise.resolve():(this._promise||(this._promise=new Promise((function(t){e._promiseResolve=t}))),this._promise)},enumerable:!1,configurable:!0}),e.prototype.enqueue=function(e){var t=this;if(this._isResolved)throw new Error("Can't enqueue another promise: PromiseQueuePromise is already resolved.");var n=this._lastPromise.then((function(){return e})),i=this._lastPromiscatch(a.noop)}));return i.then((function(){i===t._lastPromise&&(t._lastPromise=null,t._isResolved=!0,t._tryResolve())})),n},e.prototype._tryResolve=function(){this._isResolved&&(this._promiseResolve&&this._promiseResolve(),this._promise=null,this._promiseResolve=null)},e}(),hn=u.Z.renderer,pn=Object.freeze({Invalid:0,Reserved:1,ReservedForCombining:2,Built:3,Failed:4}),fn={generalArticle:function(e){var t=e.normalizedRank();return Math.min(I.DO-1,t*t*t*t*t*(I.DO-1))},topStories:function(e){return(0,a.isFunction)(e.isPreview)&&e.isPreview()||I.DO<=1?1:Math.min(I.DO,e.normalizedRate()*I.DO)},fullTextSearch:function(e){var t=e.normalizedRank();return Math.min(I.DO-1,t*t*t*t*t*(I.DO-1))},minimal:function(){return 0},newspaper:function(e){return Math.min(I.DO,Math.ceil(I.DO*Math.sqrt(e.NormRate)))},previewArticle:function(){return I.DO}},mn={combinability:(nn={},nn[Pt.Ku.LastVisit]=null,nn[Pt.Ku.Breakingnews]=null,nn[Pt.Ku.Monitors]=null,nn[Pt.Ku.AdBlock]=null,nn[Pt.Ku.SocialArticle]=null,nn),itemPreviewSizeFunction:"generalArticle",disableSectionFooter:!1},gn=((rn={})[Pt.Ku.ArticlePreview]=s.Z.renderer,rn[Pt.Ku.RegularArticle]=s.Z.renderer,rn[Pt.Ku.SocialArticle]=s.Z.renderer,rn[Pt.Ku.RegularPage]=function(e){return new hn(e)},rn[Pt.Ku.Replies]=function(e){return new T(e)},rn[Pt.Ku.InitBlock]=function(e){return new q(e)},rn[Pt.Ku.Monitors]=function(e){return new K(e)},rn[Pt.Ku.Profile]=function(e){return new Ze(e)},rn[Pt.Ku.Social]=function(e){return new dt(e)},rn[Pt.Ku.BookmarkPages]=function(e){return wt(e)},rn);function vn(e){var t=gn[e.dataType()];return t?t(e):null}var yn=((on={})[Pt.NN.Basic]=Kt.basic,on[Pt.NN.Regular]=Kt.regular,on[Pt.NN.RegularHeadlines]=Kt.regularHeadlines,on[Pt.NN.ImagesHeadlines]=Kt.imagesHeadlines,on[Pt.NN.Category]=Kt.category,on[Pt.NN.SocialCategory]=Kt.socialCategoryingType]:null}function wn(e){var t=e.dataType(),n=t===Pt.Ku.ArticlePreview?Pt.Ku.RegularArticle:t;return"".concat(n,"_").concat(e.getId())}var Cn=function(){function e(e){this._rules=(0,a.assign)({},mn),e&&(0,a.assign)(this._rules,e),this._itemPreviewSize=this._rules.itemPreviewSize||fn[this._rules.itemPreviewSizeFunction]||fn[mn.itemPreviewSizeFunction],this._itemsState={},this._cache={},this._current=null,this._config=null,this._cancellationToken=null,this._wait=null,this._removeFromBuiltItemsListEventHandler=null}return e.key=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return wn.apply(void 0,(0,o.ev)([],(0,o.CR)(e),!1))},e.renderer=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return vn.apply(void 0,(0,o.ev)([],(0,o.CR)(e),!1))},e.prototype.renderer=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return vn.apply(void 0,(0,o.ev)([],(0,o.CR)(e),!1))},e.prototype.abort=function(){this._cancellationToken&&this._cancellationToken.request()},e.prototype.tasks=function(e){if(wn(e)in this._itemsState)return null;var t=vn(e);return t&&(0,a.isFunction)(t.tasks)?t.tasks():null},Object.defineProperty(e.prototype,"pushToHistory",{set:function(e){(0,a.isFunction)(e)&&(this._pushToHistory=e)},enumerable:!1,configurable:!0}),e.prototype._findNextItem=function(e,t,n){if(void 0===n&&(n=!1),!e)return Promise.resolve(e);for(var i=null,r=e;;r=t<0?r.prev():r.next()){if(void 0===r)return(t<0?i.prevDfd():i.nextDfd()).then(this._cancellationToken.rejectIfRequested).then(this._findNextItem.bind(this,i,t,n));if(!(i=r))break;var o=wn(i);if(!(o in this._itemsState)){if(!(o in this._cache)){n&&(this._itemsState[o]=pn.Reserved);break}var a=this._cache[o];if(!a.type)break;if(a.start===i)break}}return Promise.resolve(i)},e.prototype._build=function(e,t,n){var i=this;if(!e)return Promise.reject();var r=sn.current,o=r.add("findNextItem").start();return this._findNextItem(e,t,!0).finally((function(){o.stop()})).then((function(e){if(i._current=e,!e)return{current:e};var o=r.add("loadItem").start();return _n.enqueue(e.load().finally((function(){o.stop()}))).then(i._cancellationToken.rejectIfRequested).then((function(){var r,o=i._itemsState[wn(e)];if(o===pn.Built||o===pn.ReservedForCombining)return Promise.reject();var a=sn.push("buildCurrentItem").start();if(n)r=i._buildCurrent(e,t);else{var s=bn(e.group());r=i._buildCurrent(e,t,s?s.itemPreviewSize:null)}return sn.pop(),r.finally((function(){a.stope,columns:t})}))}))},e.prototype._buildGroupsHeaders=function(e,t){var n=this,i=null;if(e&&!this._rules.disableSectionFooter){var r=bn(e);r&&r.hasTailColumn&&(i=r.buildTailColumn(this,e))}if(t){var o=bn(t);if(o&&o.hasHeadColumn)return t.load(10).then((function(){if(n._cancellationToken.disposeIfRequested(i))return Promise.reject();var e=o.buildHeadColumn(n,t);return i?i.appendColumns(e):i=e,i}))}return Promise.resolve(i)},e.prototype._buildCurrent=function(e,t,n){var i=this,r=wn(e),o=this._itemsState[r];if(o===pn.Built||o===pn.ReservedForCombining)return Promise.reject();if(r in this._cache)return this._buildCacheItem(this._cache[r]);var s=vn(e);if(!s)return Promise.reject();var u=(n||this._itemPreviewSize)(e),c=null===this._rules.combinability[e.dataType()],l=sn.current;return(u>1||c?(0,a.isFunction)(s.estimateColumnsCountAsync)?s.estimateColumnsCountAsync(Math.ceil(u),this._cancellationToken.token):Promise.resolve(s.estimatedColumnsCount(Math.ceil(u))):Promise.resolve(0)).then((function(n){var r=Math.min(n,Math.ceil(u));if(i._rules.disableItemsBundling||r>=1||c||i._config.expandedArticle===e)return i._buildSingleItem(e,r);var o=l.add("combineItems").start();return i._combine(e,t).finally((function(){o.stop()})).then((function(t){if(!t||t.length<2)return i._buildSingleItem(e,1);var n=l.add("buildBundle").start(),r=i._buildBundle(t);return n.stop(),r}))}))},e.prototype._combine=function(e,t,n){if(!e||this._cancellationToken.isRequested)return Promise.reject();var i=[],r=0,o=I.G4/4,s=Math.ceil(I.$0/o),u=Ot.I.height,c=(o=I.$0/s)/I.$0,l=e.group();n=n||this._itemPreviewSize;for(var d=this._combine.bind(this,e,t,n),h=0,p=e;h<10;++h){if(h){var f=t<0?p.prev():p.next();if(void 0===f)return(t<0?p.prevDfd():p.nextDfd()).then(d,d);p=f}if(null===p||p.group()!==l)break;if(!p.loaded())return p===e?p.load().then(d):p.load().then(d,d);if(null!==this._rules.combinability[p.dataType()]){var m=wn(p),g=this._itemsState[m];if(g===pn.ReservedForCombining||g===pn.Built||m in this._cache){if(!h)return Promise.reject()}else{var v=vn(p);if(v){var y=n(p);if(y<c&&(y=c),y>1){if(v.estimatedColumnsCount(Math.ceil(y))>=1)continue;y=1}for(var _=null,b=y*I.$0;b<I.$0;b+=o){var w=Math.floor(b);if(w-=w%I.Nv,_=v.height(w))break}if(!_&&!(_=v.height())){if(i.length)continue;return Promise.resolve(null)}var C=_.height;if(r+(i.length?u:0)+C>I.$0){if(i.length)continue;return Promise.resolve(null)}if(r+=C+(i.length?u:0),(0,a.assign)(_,{item:p,renderer:v}),t<0?i.unshift(_):i.push(_),this._itemsState[m]=pn.ReservedForCombining,I.$0-r-u<o)break}}}}if(!i.length)return Promise.resolve(null);if(r<I.$0){var P=(i.length-1)*u,x=(I.$0-P)/(r-P);for(r=0,h=0;h<i.length;++h){h&&(r+=u);var S=Math.floor(i[h].height*x);i[h].height=S-S%I.Nv,r+=i[h].height}r<I.$0&&(i[i.length-1].height+=I.$0-r)}return Promise.resolve(i)},e.prototype._buildCacheItem=function(e){var t=this;switch(e.type){case 0:var n=e.item;this.addItemToBuiltItemsList(n);var i=vn(n),r=this._config&&this._config.expandedArticle===n?0:e.colspan;return i.render(r,this._cancellationToken.token).then((function(e){return(0,x.Ze)(n,msList(wn(n))})),e}),(function(e){return t.removeFromBuiltItemsList(wn(n)),Promise.reject(e)}));case 1:return this._buildBundle(e.bundle);default:return Promise.reject()}},e.prototype._buildSingleItem=function(e,t){var n=this;t=t>=1?Math.floor(t):1;var i=vn(e),r=wn(e);this._cache[r]={type:0,item:e,colspan:t},this.addItemToBuiltItemsList(e,r);var o=sn.current.add("render").start();return(!this._config||this._config.expandedArticle!==e||e.isPreview&&e.isPreview()?Promise.resolve(i.render(t,this._cancellationToken.token)):i.render(0,this._cancellationToken.token)).then((function(t){return(0,x.Ze)(e,x.tG.Rendered,(function(){return n.removeFromBuiltItemsLise.reject(e)})).finally((function(){o.stop()}))},e.prototype._buildBundle=function(e){for(var t,n=this,i={type:1,bundle:e,start:e[0].item},r=function(r){var a=e[r],s=wn(a.item);s in o._cache||(o._cache[s]=i),t&&t.addDivider(1,1),o.addItemToBuiltItemsList(a.item,s);var u=a.renderer.renderSingleColumnLayout(t,a);u?(t=u,(0,x.Ze)(a.item,t(wn(a.item))}))):Jt.Z.log("Render return null")},o=this,a=0;a<e.length;++a)r(a);return t&&(t.state().isBundle=!0),Promise.resolve(new d.JD(t,t))},e.prototn this._cache},e.prototype.cache=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!t.length)return this._cache[e];var i=t[0];return void 0!==i?this._cache[e]=i:delete this._cache[e],this},e.prototype._findCurrentGroup=function(e,t){for(var n=e;n;){if(this._isBuilt(n))return n.group();n=t<0?n.next():n.prev()}return null},e.prototype._isBuilt=function(e){if(!e)return!1;var t=(0,a.isString)(e)?e:wn(e);return this._itemsState[t]===pn.Built},e.prototype.checkBuiltItemsList=function(e){return this._isBuilt(e)},e.prototype.addItemToBuiltItemsList=function(e,t){return t||(t=wn(e)),this._itemsState[t]=pn.Built,this},e.prototype.reset=function(){this._cancellationToken&&this._cancellationToken.request(),this._cache={},this._current=null,this._itemsState={}},e.prototype.resize=function(){this.reset(),u.Z.resize(),s.Z.resize(),un.Z.reset()},e.prototype.removeFromBuiltItemsListEventHandler=function(){return this._removeFromBuiltItemsListEventHandler||(this._removeFromBuiltItemsListEventHandler=this._removeFromBuiltItemsList.bind(this)),this._removeFromBuiltItemsListEventHandler},e.prototype._removeFromBuiltItemsList=function(e){var t=e.dataItem();t&&this.removeFromBuiltItemsList(wn(t))},e.prototype.removeFromitemsState[e]},e.prototype.rules=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?(this._rules=e[0],this):this._rules},e.prototype.build=function(e,t,n,i){var r=this;if(!t||!e)return Promise.reject();if(this._wait)return this._wait.then(this.build.bind(this,e,t,n,i));un.Z.pause();var o=sn.init("nd.viewer.textview.builder.build").start();this._cancellationToken=new cn.A,i||(i=I.YD),this._config=n;var s=new d.JD,u=this._current=e,c=e.group();this._isBuilt(e)&&(e=null);var l,h,p,f=new dn,m=0,g=0;if(t>0){for(var v=function(o){var d,h=void 0===o?{}:o,p=h.current,y=h.columns;if(r._cancellationToken.disposeIfRequested(y))return Promise.reject();var _=0;if(g+=I.DO,y)if(y.isEmpty()){if(p){var b={Id:p.Id,ArticleId:p.ArticleId,Type:p.Type,Title:p.Title};p.Issue&&(b.Issue=p.Issue.Id),Jt.Z.log("Unable to build article(empty col): ".concat(JSON.stringify(b,"\t"))),(0,a.isFunction)(r._pushToHistory)&&r._pushToHistory(p,"ignored"),r._itemsState[wn(p)]=pn.Failed}}else{var w=p.group();_=y.count(),c!==w&&(d=r._buildGroupsHeaders(c,w),c=w)}else r._current&&(r._current=r._current!==u?u:null);return(d||Promise.resolve()).then((function(o){if(o&&(_+=o.count(),s.appendColumns(o)),m+=_,g-=_,s.appendColumns(y),r._current&&g>0&&m<t&&(l>0||m<i)){--l,g-=I.DO;var a=r._build(r._current,1,r._config.ignoreGroupHeader||!!(!m&&1&n.flag&&e));f.enqueue(f.enqueue(a).then(v,v))}}))},y=l=Math.ceil(t/I.DO),_=0;_<y&&this._current;++_){var b=this._build(this._current,1,this._config.ignoreGroupHeader||!m&&!!(1&n.flag)&&!!e);f.enqueue(f.enqueue(b).then(v,v))}h=f.promise.then((function(){return r._cancellationToken.disposeIfRequested(s)?Promise.reject():s&&s.count()?Promise.all([r._findNextItem(u,1).then((function(e){if(null===e)return r._buildGroupsHeaders(c,null).then((function(e){s.appendColumns(e).tail().isLast(!0)}))})),u.prevDfd().then((function(e){if(null===e)return r._buildGroupsHeaders(null,c).then((function(e){s.prependColumns(e).head().isFirst(!0)}))}))]).then((function(){return s})):void 0}))}else if(t<0){t=-t;var w=function(e){var n=void 0===e?{}:e,o=n.current,a=n.columns;if(r._cancellationToken.disposeIfRequested(a))return Promise.reject();var d=null,h=0;if(g+=I.DO,a)if(a.isEmpty())o&&(r._itemsState[wn(o)]=pn.Failed);else{var p=o.group();h=a.count(),p!==c&&(d=r._buildGroupsHeaders(p,c),c=p)}else!a&&r._current&&(r._current=r._current!==u?u:null);return(d||Promise.resolve()).then((function(e){if(e&&(h+=e.count(),s.prependColumns(e)),m+=h,g-=h,s.prependColumns(a),r._current&&g>0&&m<t&&(l>0||m<i)){--l,g-=I.DO;var n=r._build(r._current,-1,r._config.ignoreGroupHeader);f.enqueue(f.enqueue(n).then(w,w))}}))};for(y=l=Math.ceil(t/I.DO),_=0;_<y&&this._current;++_)b=this._build(this._current,-1,this._config.ignoreGroupHeader),f.enqueue(f.enqueue(b).then(w,w));h=f.promise.then((function(){return r._cancellationToken.disposeIfRequested(s)?Promise.reject():s?r._findNextItem(u,-1).then((function(e){if(null===e)return r._buildGroupsHeaders(null,c).then((function(e){s.prependColumns(e),s.head()&&s.head().isFirst(!0)}))})).then((function(){return s.count()?s:void 0})):void 0}))}return this._wait=new Promise((function(e){p=e})),h.finally((function(){un.Z.resume(),o.stop().print(),r._cancellationToken=null,r._wait=null,p()}))},e}(),In=Cn},39639:function(e,t,n){"use strict";n.d(t,{Z:function(){return ce}});var i=n(40180),r=n(86913),o=n(63561),a=n(66327),s=n(84241),u=n(30724),c=n(22970),l=n(20384),d=n(60231),h=n(25371),p=n(71357),f=n(26371),m=n(99144),g=n(74714),v=n(35953);function y(e,t){return t.Width*t.Height-e.Width*e.Height}function _(e,t){var n=e.Rank||-1;return(t.Rank||-1)-n}var b=function(e,t){if(this.visible=d.observable(!1),this.itemId=t,e.comment){this.commentVisible=d.observable(!e.opinion),this.hyphComment=v.Z.hyphenate(e.comment),this.clamp=d.observable(3),this.attachVisible=d.observable(!1);var n=e.postsInArticle>0?" and ".concat(e.postsInArticle," others"):"";this.headerText="".concat(n," commented on ")}else this.headerText=" supported opinion:";l.extend(this,e)},w=function(e){var t=[];if(e.Images&&e.Images.length>0){for(var n=(0,u.FK)(),i=u.xC,r=e.Images.length,o=0;o<r;o++){var a=e.Images[o],s=Math.round(100*n/a.Width);if(!(s>i)){var c=Math.round(a.Height*s/100);c>n||t.push({image:a,width:n,height:c,scale:s})}}t.sort(y)}this.articleId=e.ArticleId,this.title=e.HyphenatedTitle||e.Title,this.subtitle=e.Subtitle,this.issueTitle=e.Issue&&e.Issue.Title,this.images=t,this.img=d.observable()},C=function(){function e(e){var t=this,n=e&&e.recentlyJoined||[],r=e&&e.comments||[],o=(0,i.filter)(n,(function(e){return!r.some((function(t){return t.opinion&&e.opinion.id===t.opinion.id&&e.authorId===t.authorId}))})),a=0,s=(0,i.chain)(r.concat(o)).orderBy(["eventTime"],[!1]).slice(0,6).map((function(e){return new b(e,a++)})).value();this.section=e.section,this.articlesKo=d.observableArray([]),this.socialItemsKo=d.observableArray(s),this.articlesVisible=d.pureComputed((function(){return t.articlesKo().length}))}return e.prototype.renderAttachments=function(e,t){t.hasAttachments&&new g.Z(t.attachments,{renderVideoPlayer:!1,showGalleryOnClick:!1,itemsInLayout:1}).render(l(e))},e.prototype.articleClick=function(e){h.Z.current&&h.Z.current.textViewController&&h.Z.current.textViewController.jump(e.articleId)},e.prototyp:e.publicId})},e.prototypgoToProfile()},e}(),I=function(e){function t(t,n,i){var r=this,o={id:"item-".concat(t.itemId),priority:i,getHeight:function(){return l("li[item-id=".concat(t.itemId,"]"),n).outerHeight(!0)||0},canHide:!0,contentBounds:[0,10],getContentSize:function(){return r.contentSize},hide:function(){t.visible(!1)}};return t.comment?(o.increase=function(){++r.contentSize,t.visible()?!t.hasAttachments||t.attachVisible()?t.commentVisible()?t.clamp()<10&&(t.clamp(t.clamp()+1),10===t.clamp()&&(r.contentSize=10)):t.commentVisible(!0):t.attachVisible(!0):t.visible(!0)},o.decrease=function(){--r.contentSize,t.clamp()>3?t.clamp(t.clamp()-1):t.opinion&&t.commentVisible()?t.commentVisible(!1):t.attachVisible()?t.attachVisible(!1):t.visible()&&(t.visible(!1),r.contentSize=0)}):(o.increase=function(){t.visible()||(t.visible(!0),r.contentSize=10)},o.decrease=function(){t.visible()&&(t.visible(!1),r.contentSize=0)}),(r=e.call(this,o)||this).contentSize=0,r}return(0,c.ZT)(t,e),t}(f.Z.Block),P=function(e){function t(t,n,i){var r=t&&t.length,o=n.find("section.subgroup-featarticles"),a={id:"articles",priority:1e3,contentBounds:[0,r],getHeight:function(){return o.outerHeight(!0)},canHide:!0,esKo().length},increase:function(){var e=i.articlesKo()&&i.articlesKo()[i.articlesKo().length-1];if(e&&e.images.length&&!e.img())e.img(e.images[0]);else{var n=t[i.articlesKo().length];n&&i.articlesKo.push(new w(n))}},decrease:function(){var e=i.articlesKo()&&i.articlesKo()[i.articlesKo().length-1];e&&e.img()?e.img(null):i.articlesKo.pop()}};return e.call(this,a)||this}return(0,c.ZT)(t,e),t}(f.Z.Block),x=function(){function e(e,t,n){this.container=e,this.social=t,this.articles=(e.canRender()})).sort(_),this.model=new C(t),this.render(),this.buildBlocks()}return e.prototype.buildBlocks=function(){for(var e=this,t={getHeight:function(){return e.container.height()}},n=this.container.find(".subsection-hd"),i=0,r=[new f.Z.Block({id:"sectionHeader",priority:i,getHeight:function(){return n.outerHeight(!0)},canHide:!1})],o=this.container.find("section.subgroup-update"),a=this.model.socialItemsKo(),s=a.length,u=0;u<s;u++)i+=10,r.push(new I(a[u],o,i));r.push(new P(this.articles,this.container,this.model)),new f.Z.Manager(t,r).build(f.Z.LayoutStrategy.BUDWEISER)},e.prototype.render=function(){p.Z.renderTo("v7.Client.SocialSection",this.model,this.container)},e.prototype.dispose=function(){this.model.dispose()},e}(),S=n(1301),T=n(11414),k=n(6677),A=n(78176),E=(n(4169),n(63447)),Z=n(63666),M=n(69327),D=(n(40605),10),L=null,N={},R={},V={},B={},F=null,O=null,z={};function U(e){return"".concat(e.Section.id,"_").concat(e.ArticleId||e.Id)}function H(e){var t=U(e);return t in N||t in R||t turn U(e)in N}function W(e){var t=U(e);t in B||(B[t]=e),t in N?++N[t]:N[t]=1,delete R[t]}function q(e){var t=U(e);t in B||(B[t]=e),t in R?++R[t]:R[t]=1}function G(e){var t=e.dataItem();if(t){var n=U(t);n in N&&--N[n]<=0&&delete N[n]}}function X(e){for(;F;F=e<0?F.prev():F.next())if(!H(F)){if(!(F.Id in V))break;var t=V[F.Id];if(!t.type)break;if(t.start===F)break}}function Y(e){delete N["s".concat(e.section().id)]}function K(e,t){e.append("<header><hgroup><h1>".concat(t.HyphenatedTitle||t.Title,"</h1>")),t.Subtitle&&e.append("<h2>".concat(t.Subtitle,"</h2>")),e.append("</hgroup></header>")}function J(e){return new Promise((function(t){T.Z.getDataBySection(e).then((function(n){return t(function(e,t){var n=new a.JD,i=e.article(0).group(),r=function(e,t){return(new a.d$).section(t).type(a.Xp.SectionHeader).articleColumnsCount(1).columnIdx(0).noDividers(!0)}(0,i),o=(0,s.Oh)().section(i).column().addClass("col").css({position:"absolute",width:"".concat((0,u.FK)(),"px"),top:"0",bottom:"0"}),c=o.createChild("div").addClass("teaser").css({top:"auto",bottom:"auto"});c.css({top:"-24px",bottom:"-24px"}),r.addCell(new M._(o,1,0,u.$0));var l=new x(c.elm(),t,i.articles()),d=l.articles.map((function(e){return(0,Z.ny)(e,Z.tG.RenderedInSectonHeader)}));return r.onDisposed((function(){Y(r),l.dispose(),d.forEach((function(e){return e.release()}))})),n.append(r),N["s".concat(e.id)]=1,n}(e,n))})).catch((function(){return e.isReadyPromise().then((function(){return t(function(e){if(e.isEmpty)return a.JD.empty;var t,n=(new a.d$).section(e.article(0).group()).type(a.Xp.SectionHeader).noDividers(!0),r=(0,s.Oh)().section(e.article(0).group()).column().addClass("col").css({position:"absolute",width:"".concat((0,u.FK)(),"px"),top:"0",bottom:"0"}),o=r.createChild("div").addClass("teaser").css({top:"auto",bottom:"auto"}),c="s".concat(e.id);if(c in V){var l=V[c];t=l.items,o.append(l.html).checkpoint(l.height).elm()}else{t=[];var d=e.article(0),h=e.articles();h.sort((function(e,t){var n=e===d?-1:e.Rank;return(t===d?-1:t.Rank)-n})),o.append('<header class="subsection-hd"><div class="subsection-hd-wrapper"><h2 class="title">'.concat(e.title,"</h2></div></header>")).checkpoint(o.checkpoint());var p=0;h.forEach((function(e){var n=o.height();p>0&&o.append(S.I.html),o.append('<article class="art" aid="'.concat(e.Id,'">')),K(o,e),o.append("</article>");var i=o.checkpoint(),r=u.$0-n-i;if(!(r<=0)){if(e.Images&&d!==e){var a=[],s=(0,u.FK)();if(e.Images.forEach((function(e){var t=Math.round(100*s/e.Width);if(!(t>u.xC)){var n=Math.round(e.Height*t/100);n>s||n>=r||a.push({image:e,width:s,height:n,scale:t})}})),a.length){a.sort((function(e,t){return t.Width*t.Height-e.Width*e.Height}));var c=a[0];o.rollback(),p>0&&o.append(S.I.html),o.append('<article class="art" aid="'.concat(e.Id,'">')).append('<figure class="art-pic">').append("<a>").append('<img src="'.concat(c.image.Url).concat(c.image.Url.indexOf("?")>=0?"&":"?","scale=").concat(c.scale,'"')).append(' style="width:'.concat(c.width,"px;height:").concat(c.height,'px" alt=""')).append(' nd_url="'.concat(c.image.Url,'"')).append(' nd_scale="'.concat(c.scale,'"/>')),c.image.Byline&&o.append("<em>".concat(c.image.Byline,"</em>")),o.append("</a></figure>"),K(o,e),o.append("</article>"),i=o.checkpoint()}}return++p,t.push(e),o.checkpoint(i),!(u.$0-o.height()<=u.Nv+S.I.height)&&void 0}o.rollback()})),V[c]={html:o.html(),height:o.height(),items:t}}o.css({top:"-24px",bottom:"-24px"}),n.addCell(new M._(r,1,0,u.$0));var SectonHeader)}));return n.onDisposed((function(){Y(n),f.forEach((function(e){return e.release()}))})),N["s".concat(e.id)]=1,new a.JD(n,n)}(e))}))}))}))}function $(e,t){var n,i=0,r=0;if(e.maxHeight>u.$0-u.Nv)for(var o=0;o<4;++o){for(var a=o+2,s=Math.pow(a,e.count),c=void 0,l=0;l<s;++l){c=!1;for(var d=l,h=(e.count-1)*S.I.height,p=h,f=[],m=0;m<e.count;m++){var g=d%a;if(m===t&&g){c=!0;break}var v=e.renderers[m].height(g);if((h+=m===t?v.max:v.min)>u.$0)break;p+=v.max,f.push(g),d=Math.floor(d/a)}if(!(c||h>u.$0||p<=r)&&(i=h,n=f,(r=p)>u.$0-u.Nv))break}if(r>=u.$0)break}else for(n=[],i=(e.count-1)*S.I.height,o=0;o<e.count;++o)i+=o===t?e.renderers[o].height(0).max:e.renderers[o].height(0).min,n.push(0);var y=i;return e.renderers.map((function(e,i){var r=e.height(n[i]),o=u.xY;if(i===t||r.min===r.max)o=void 0;else if(u.$0-y>u.Nv)if(r.max-r.min+y<=u.$0)y+=r.max-r.min,o=void 0;else{var a=Math.floor((u.$0-y)/u.Nv);y+=a*u.Nv,o+=a}return{renderer:e,type:n[i],lines:o}}))}function Q(e){var t=null,n={type:2,bundle:e,start:e[0].item};return e.forEach((function(e){var i=e.item.Id;i in V||(V[i]=n),t&&t.addDivider(1,1),W(e.item);var r=e.renderer.renderSingleColumnLayout(t,e);r?(t=r,(0,Z.Ze)(e.item,Z.tG.Rendered,(function(){return G(e.renderer)}))):k.Z.log("Render return null")})),t&&(t.section(e[0].item.group()).state().isBundle=!0),new a.JD(t,t)}function ee(e){if(!e.type){var t=e.renderer,n=t.article();W(n);var i=n===O?0:e.colspan;return t.render(i,L.token).then((function(e){return(0,Z.Ze)(n,Z.tG.Rendered,(function(){return G(t)})),e}),(function(e){return G(t),Promise.reject(e)}))}if(1===e.type){var r,o=e.bundle,s=null,u=e.spread;return u||(e.spread=u=$(o)),s=(new a.d$).articleIdx(o.renderers[0].article().Idx).columnIdx(0).addDivider(),u.forEach((function(e,t){var n=e.renderer,i=n.article();W(i),r||(r=n.columnElm()),t&&S.I.appendTo(r),n.render(e.type,s,r,e.lines),(0,Z.Ze)(i,Z.tG.Rendered,(function(){return G(n)}))})),s.articlesCount(u.length).bundle(o),s.addCell(new M._(r,1,0,r.height())),Promise.resolve(new a.JD(s,s))}return 2===e.type?Promise.resolve(Q(e.bundle)):null}function te(e,t){if(L.isRequested)return Promise.reject();for(var n=e,o=e.Section,a=[],s=0,c=u.G4/4,l=Math.ceil(u.$0/c),d=S.I.height,h=(c=u.$0/l)/u.$0,p=0;p<D&&e&&e.Section===o;++p,e=t<0?e.prev():e.next()){if(!e.loaded()){var f=te.bind(this,n,t);return e===n?e.load().then(f):e.load().then(f,f)}if(j(e)||e.Id in V||!e.isPreview()){if(!p)return Promise.reject()}else{var m=r.Z.renderer(e);if(!(m.estimatedColumnsCount(1)>=1)){for(var g=null,v=h*u.$0;v<u.$0;v+=c){var y=Math.floor(v);if(y-=y%u.Nv,g=m.height(y))break}if(!g&&!(g=m.height())){if(a.length)continue;return Promise.resolve(null)}var _=g.height;if(s+(a.length?d:0)+_>u.$0){if(a.length)continue;return Promise.resolve(null)}if(s+=_+(a.length?d:0),(0,i.assign)(g,{item:e,renderer:m}),t<0?a.unshift(g):a.push(g),q(e),u.$0-s-d<c)break}}}if(!a.length)return Promise.resolve(null);if(s<u.$0&&a.length){var b=(a.length-1)*d,w=(u.$0-b)/(s-b);(s=a.reduce((function(e,t){var n=Math.floor(t.height*w);return t.height=n-n%u.Nv,e+t.height+(e&&d)}),0))<u.$0&&(a[a.length-1].height+=u.$0-s)}return Promise.resolve(a)}function ne(e,t){for(var n=e.Section,i=0,r=0,o=0,a=0,s=[],c=S.I.height,l=0;l<D&&!(u.$0-a<=u.Nv+c)&&(l&&(e=e.next()),e&&e.isLoaded()&&e.Section===n);++l)if(!(j(e)||e.Id in V||e.Id in t||e.isPreview())){var d=A.Z.renderer(e);if(d.estimatedColumnsCount(1)>=1){if(!i)break}else{var h=i?c:0,p=d.height(4).min,f=d.height(0).max,m=Math.max(r+h+p,o+h+f);m>u.$0||(r=m,s.push(d),t[e.Id]=1,o+=h+p,a+=h+f,i++)}}return{count:i,minHeight:o,maxHeight:a,renderers:s}}function ie(e){for(var t=0,n=0,i=0,r=S.I.height,o=0;o<e.length;o++){var a=o?r:0,s=e[o],c=s.height(4).min,l=s.height(0).max;if((t=Math.max(t+a+c,n+a+l))>u.$0)return null;n+=a+c,i+=a+l}return{minHeight:n,maxHeight:i}}function re(e){if(e.length<=1||u.$0-e[e.length-1].maxHeight<u.Nv)return e;var t=e.map((function(e){var t=(0,i.assign)({},e);return t.renderers=e.renderers.slice(0),t})),n=e[e.length-1].count;if(!n)return t;for(var r=e[e.length-1].renderers.slice(0);n>0;){for(var o=[r.shift()],a=t.length-1;a>=0;--a){var s=t[a].renderers.concat(o),c=t[a].count+o.length;o=[];for(var l=ie(s);!l;)c--,o.push(s.shift()),l=ie(s);if(t[a]={count:c,minHeight:l.minHeight,maxHeight:l.maxHeight,renderers:s},!o)break}if(o)return e;n--}return t}function oe(){if(X(),F){var e=F;return q(e),e.load().then((function(){return new Promise((function(e,t){(0,i.defer)((function(){L.isRequested?t():e()}))}))})).then((function(){return j(e)?Promise.reject():(e===z.startItem&&1&z.flag||e.Section.article(0)!==e||"s".concat(e.Section.id)in N?Promise.resolve():J(e.Section)).then((function(t){return(e.Id in V?ee(V[e.Id]):function(e){var t=r.Z.renderer(e),n=Math.ceil(u.DO*Math.sqrt(e.NormRate));n<1&&(n=1);var o=t.estimatedColumnsCount(n);if(o<1){var a=A.Z.renderer(e).estimatedColumnsCount(n);a>=1&&(o=a)}if(o<1){if(e.isPreview())return te(e,1).then((function(n){return void 0===n?Promise.reject():!n||n.length<2?ee(V[e.Id]={type:0,renderer:t,colspan:1}):Q(n)}));for(var s,c=e,l=e.Section,d=[],h={},p=0;p<4;++p){for(var f=!1,m=0;m<D&&(m&&(e=e.next()),e&&e.isLoaded()&&e.Section===l);++m)if(!(H(e)||e.Id in V||e.Id in h||e.isPreview())){f=!0;break}if(!f)break;var g=ne(e,h);if(!g.count)break;if(d.push(g),1===g.count)break}return(d=re(d)).length?(0,i.forEachRight)(d,(function(e){if(e.count>1)s={type:1,bundle:e,spread:null,start:e.renderers[0].article()},e.renderers.forEach((function(e){V[e.article().Id]=s}));else{var t=e.renderers[0].article();V[t.Id]=s={type:0,renderer:r.Z.renderer(t),colspan:1}}})):V[c.Id]=s={type:0,renderer:t,colspan:1},ee(s)}var v=Math.min(Math.floor(o),n);return V[e.Id]={type:0,renderer:t,colspan:v},W(e),t.render(e===O?0:v,L.token).then((function(n){return(0,Z.Ze)(e,Z.tG.Rendered,(function(){return G(t)})),n}),(function(e){return G(t),Promise.reject(e)dColumns(e):e}),(function(e){throw t&&t.dispose(),e}))}))}))}return Promise.reject()}function ae(e,t){for(var n=S.I.height,i=e.Section,r=0,o=0,a=0,s=0,c=[],l=0;l<D&&!(u.$0-s<=u.Nv+n)&&(l&&(e=e.prev()),e&&e.isLoaded()&&e.Section===i);++l)if(!(j(e)||e.Id in V||e.Id in t)){var d=A.Z.renderer(e);if(d.estimatedColumnsCount(1)>=1){if(!r)break}else{var h=r?n:0,p=d.height(4).min,f=d.height(0).max,m=Math.max(o+h+p,a+h+f);m>u.$0||(o=m,c.unshift(d),t[e.Id]=1,a+=h+p,s+=h+f,r++)}}return{count:r,minHeight:a,maxHeight:s,renderers:c}}function se(){if(!F)return Promise.reject(new Error("Cannot prepend columns. The starting SmartFlowItem is invalid."));var e=F;if(X(-1),!F){for(var t=e,n=e.prev();n;n=n.prev())t=n;return t&&!("s".concat(t.Section.id)in N)?J(t.Section):Promise.reject()}var o=F;return q(o),Promise.all([e.load(),o.load()]).then((function(){return new Promise((function(e,tested?t():e()}))}))})).then((function(){return j(o)?Promise.reject():(e.Section===o.Section||"s".concat(e.Section.id)in N?Promise.resolve():J(e.Section)).then((function(e){var t;return t=o.Id in V?ee(V[o.Id]):function(e){var t=r.Z.renderer(e),n=Math.ceil(u.DO*Math.sqrt(e.NormRate));n<1&&(n=1);var i=t.estimatedColumnsCount(n);if(i<1){if(e.isPreview())return te(e,-1).then((function(n){return void 0===n?Promise.reject():!n||n.length<2?ee(V[e.Id]={type:0,renderer:t,colspan:1}):Q(n)}));for(var o,a=[],s=e,c=e.Section,l={},d=0;d<4;++d){for(var h=!1,p=0;p<D&&(p&&(e=e.prev()),e&&e.isLoaded()&&e.Section===c);++p)if(!(j(e)||e.Id in V||e.Id in l)){h=!0;break}if(!h)break;var f=ae(e,l);if(!f.count)break;if(a.unshift(f),1===f.count)break}return(a=re(a)).length?a.forEach((function(e){if(e.count>1)o={type:1,bundle:e,spread:null,start:e.renderers[0].article()},e.renderers.forEach((function(e){V[e.article().Id]=o}));else{var t=e.renderers[0].article();V[t.Id]=o={type:0,renderer:r.Z.renderer(t),colspan:1}}})):V[s.Id]=o={type:0,renderer:t,colspan:1},ee(o)}var m=Math.min(Math.floor(i),n);return V[e.Id]={type:0,renderer:t,colspan:m},W(e),t.render(e===O?0:m,L.token).then((function(n){return(0,Z.Ze)(e,Z.tG.Rendered,(function(){returise.reject(e)}))}(o),t.then((function(t){return e&&t?e.prependColumns(t):e=t,o.Section.article(0)!==o||"s".concat(o.Section.id)in N?e:J(o.dColumns(t):t}))}),(function(t){throw e&&e.dispose(),t}))}))}))}function ue(){N={},R={},V={},B={},F=null&&L.request()},tasks:function(e){if(H(e))return null;var t=r.Z.renderer(e);return t&&(0,i.isFunction)(t.tasks)?t.tasks():null},build:function(e,t,n){if(!t)return Promise.reject();if(L)throw new Error("Can't process multiple build requests simultaneously.");L=new o.A,z=Object.assign({startItem:e},n),F=e,O=n?n.expandedArticle:void 0;var i,r=[],s=0,c=0,l=new a.JD;if(t>0){i=function(n){if(r.shift(),L.disposeIfRequested(n))return r.length?r[0].then(i,i):Promise.reject();if(c+=u.DO,n)if(n.isEmpty())F&&X();else{var o=n.count();l.appendColumns(n),s+=o,c-=o}else F&&(F=F.next());return F&&c>0&&s<t&&(c-=u.DO,r.push(oe())),r.length?r[0].then(i,i):(l.isEmpty()?l=null:(X(),null===F&&l.tail().isLast(!0),null===e.prev()&&l.head().type()===a.Xp.SectionHeader&&l.head().isFirst(!0)),Promise.resolve(l))};for(var d=Math.ceil((t-s)/u.DO),h=0;h<d&&F;++h)r.push(oe())}else if(t<0)for(t=-t,i=function(n){if(r.shift(),L.disposeIfRequested(n))return r.length?r[0].then(i,i):Promise.reject();if(c+=u.DO,n)if(n.isEmpty())F&&X(-1);else{var o=n.count();l.prependColumns(n),s+=o,c-=o}else F&&(F=F!==e?e:null);return F&&c>0&&s<t&&(c-=u.DO,r.push(se())),r.length?r[0].then(i,i):(X(-1),null===F&&(l.isEmpty()||l.head().isFirst(!0)),Promise.resolve(l.isEmpty()?null:l))},d=Math.ceil((t-s)/u.DO),h=0;h<d&&F;++h)r.push(se());var p=r[0].then(i,i);){L=null,R={}}),(function(){L=null,R={},l&&l.dispose()})),p},validateCache:function(){(0,i.forIn)(V,(function(e){e.renderer&&e.renderer._articleElm&&!e.renderer._articleElm._elm&&k.Z.log("$.nd.viewer.textView.builders.sections has invalid items in cache")}))},getArticlesBundleSpread:$,reset:ue,resize:function(){ue(),A.Z.resize(),r.Z.resize(),E.Z.reset()},renderer:r.Z.renderer}},70516:function(e,t,n){"use strict";var i=n(22970),r=n(24458),o=n(40180),a=n(10426),s=n(25371),u=n(44039),c=n(5439),l=n(2099),d=n(14003),h=n(39639),p=n(88769),f=n(34336),m=n(13395),g=n(95511),v=n(30724)n3.TextView,t}return(0,i.ZT)(t,e),t.prototype.show=function(e){var t=this;s.Z.current=this._context,this.saveViewConfig(e),(0,v.Hy)({showContinuedFromLink:!0,showPageThumbnail:!0});var n=o.assign({showSections:!0,updatePreviewPanel:!0},e);return this._builder.reset(),void 0!==e.screensToBuild&&this._controller.screensToBuild(e.screensToBuild),c.$.highlightTopicInText(e.query),l.Z.pages.loaded()||l.Z.issueLoaded((function(){l.Z.bookmark()&&(n.page=l.Z.bookmark().page,n.articleId=l.Z.bookmark().articleId)})),new Promise((function(i){t._contentProvider.load().then(i,(function(){e&&(e.skipAnimation=!0,o.isFunction(e.callback)&&e.callback()),i(),d.Z.showIssuePage(1,l.Z.issble().show(n)}))}))},t.prototype.jump=function(e){this._controller.jump(e)},t.prototype.jumpToPage=function(e){this._controller.jumpToPage(e)},t.prototype.getNavigatioudeInUrl:!0}}},t.prototype.getTopBarConfig=function(){return{starEnable:!0,backEnable:!0,showNewpaperName:!0,headerClass:"toolbar-issuetitle",isMainMenuEnabled:!0,actionMenuOptions:[p.gu.issueDate,p.gu.lang,p.gu.listen],generalMenuOptions:[p.gu.emailAlerts,p.gu.interfaceLang,p.gu.fonts]}},t.prototype.registerRoutes=function(e){(0,g.On)(e)},t.prototype.reset=function(e){this._controller.resetState(e)},t.prototype._onViewStateChanged=function(e,t){if(t&&t.id){var n={itemId:t.id,articleId:null,type:t.type,expanded:t.expanded};f.Z.updateState(n)}},t.prototype._createCeturn new u.Z},t.prototype._createBuilder=function(){return h.Z},t.prototype._createView=function(){var t=e.prototype._createView.call(this);return m.Z.linkView(t),t},t}(a.Z);t.Z=new y},46671:function(e,t,n){"use strict";n.d(t,{Z:function(){return he}});var i=n(22970),r=n(20384),o=n(40180),a=n(88769),s=n(25371),u=n(30724),c=n(4169),l=n(84241),d=n(66327),h=(n(16412),null);function p(e,t){e&&e.fastCss("visibility",t,!0)}function f(e,t){e&&(p(e,"visible"),e.translateLeft(t,!0),h.push({elm:e,leftCssAttr:"translateLeft",left:t}))}var m=function(){function e(e,t,n,i,r){this._reset=!1,this._innerHeaderIdx=0,this._padding=r,this._viewport=i,this._section=e.section(),this._scrollerLeft=t,this._left=n,this._width=e.width()}return e.create=function(t,n,i,r,o){return(a=t)&&a.type()===d.Xp.SectionHeader||t.noHeaderAbove()?null:new e(t,n,i,r,o);var a},e.prototype.addColumn=function(e,t,n){var i=e.section();if(this._section!==i)return!1;if(e.noHeaderAbove())return this._reset||this.setHeaders(!1),this._reset=!0,!0;var r=e.width();return this._reset&&(this._scrollerLeft=t,this._left=n,this._width=0,++this._innerHeaderIdx,this._reset=!1),this._width+=r,!0},e.prototype.setHeaders=function(e){void 0===e&&(e=!0);var t=this._getElm();if(t&&t.hasHeaders){var n=t.innerHeader(this._innerHeaderIdx)||t.addInnerHeader(),i=t.outerHeader(),r=t.headerWidth(),o=this._left+this._width;if(o<=this._viewport.left?(p(i,"hidden"),f(n,this._scrollerLeft+this._width-this._padding-r)):this._left>=this._viewport.left?(this._innerHeaderIdx||p(i,"hidden"),f(n,this._scrollerLeft+this._padding)):(p(n,"hidden"),f(i,o-this._viewport.left<=r+this._padding+this._padding?o-this._padding-r:this._viewport.left+this._padding)),e)for(var a=t.innerHeaders(),s=this._innerHeaderIdx+1;s<a.length;++s)p(a[s],"hidden")}},e.prototype._getElm=function(){if(this._section){if(this._section instanceof l.W2)return this._section;if(this._section.title)return(0,l.Oh)().section(this._section)}},e}(),g=n(84672),v=n(17447),y=n(92912),_=n(97334),b=n(92741),w=n(83204),C=n(81073),I=n(19237)ningDelta=n,i}return(0,i.ZT)(t,e),t}(n(48636).s),x=function(){function e(e){this._isActive=!1,this._onCancelled=new I.x,this._view=e}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),e.prototype.play=function(){if(this._isActive)return Promise.reject(new Error("Cannot start animation: it is already playing."));var e;if(1===arguments.length&&"object"==typeof arguments[0])e=arguments[0];else{if(!(arguments.length>=2&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]))throw new Error("Invalid arguments");e={delta:arguments[0],duration:arguments[1],ignoreSectionHeaders:!!arguments[2]}}return this.playAnimation(e)},e.prototype.stop=function(){this._onCancelled.next()},e.prototype.playAnimation=function(e){return(0,i.mG)(this,void 0,void 0,(function(){var t,n,r,o,a,s;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:if(!(t=Math.round(e.delta)))return[2];this._isActive=!0,n=g.busyStateLock.lock(),r=Math.round(e.duration),this._left=this._view.scroller.left,o=[this._play(t,r,e.easing)],e.ignoreSectionHeaders||o.push(this._playSectionHeaders(t,r,e.easing)),i.label=1;case 1:return i.trys.push([1,3,4,5]),[4,Promise.all(o)];case 2:return i.sent(),[3,5];case 3:throw i.sent(),a=this._view.scroller.elm.translateLeft(),s=this._left+t-a,new P(a,s);case 4:return n.release(),this._isActive=!1,[7];case 5:return[2]}}))}))},e.prototype._play=function(e,t,n){var i,r=this;void 0===n&&(n="easeOutQuad");var o=this._view.scroller;return new Promise((function(a,s){i=r._onCancelled.subscribe(s),o.elm.animate({translateLeft:o.left+=e},{duration:t,complete:a,easing:nunsubscribe()}))},e.prototype._playSectionHeaders=function(e,t,n){var i,r=this;void 0===n&&(n="easeOutQuad");var o=this._view.scroller.container;return new Promise((function(a,s){i=r._onCancelled.subscribe(s),o.animate({empty:"100px"},{duration:t,easing:n,complete:a,step:function(t,n){r._view.correctSections(r._left+Math.floor(n.pos*e))}unsubscribe()}))},e}(),S="left",T="left";function k(e){var t=Math.round(100*(e+1));return t>500?500:t}function A(e,t,n,r){return(0,i.mG)(this,void 0,void 0,(function(){var o,a,s,u;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return o=e.viewport(),a=e.scroller.left+t.left(),s=a+n,a>o.left&&s>o.right?(u=o.right-s,a+u<o.left&&(u=o.left-a),u?[4,e.scrollAnimation().play(u,r||k(-u/e.columns().width),!0)]:[3,2]):[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))}function E(e,t,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,a,s;return(0,i.Jh)(this,(function(u){switch(u.label){case 0:return t?(r=e.left(),a=e.visibleCells(),s=[],(0,o.isEmpty)(a)?e.move(t):s.push.apply(s,(0,i.ev)([],(0,i.CR)(a.map((function(e){return new Promise((function(i){var r;e.elm.animate(((r={})[T]=e.left+t,r),{duration:n,complete:function(){i()},easing:"easeOutQuad"})}))}))),!1)),e.hasDivider()&&s.push(new Promise((function(i){var o,a=((o={})[S]=r+t,o),s={duration:n,complete:i,easing:"easeOutQuad"};e.divider().animate(a,s)}))),s.length?[4,Promise.all(s)]:[3,2]):[2];case 1:u.sent(),u.label=2;case 2:return[2]}}))}))}function Z(e,t,n,r){return(0,i.mG)(this,void 0,void 0,(function(){var o,a,s,u,c,l,d,h,p,f,m;return(0,i.Jh)(this,(function(g){switch(g.label){case 0:if(!r)throw new Error("Invalid argument: visibleTitleHeaders");if(!t||!e)return[2];for(o=[],a=!1,s=e.left(),c=e;c;c=c.next())a?c.move(t):c.isVisible()?o.push(E(c,t,n)):(a=!0,u=c.left(),c.move(t));l=function(e){e.left>=s&&(e.left<u?o.push(new Promise((function(i){var r,o=((r={})[e.leftCssAttr]=e.left+t,r),a={duration:n,complete:i,easing:"easeOutQuad"};e.elm.animate(o,a)}))):e.elm.css(e.leftCssAttr,e.left+t))};try{for(d=(0,i.XA)(r),h=d.next();!h.done;h=d.next())p=h.value,l(p)}catch(e){f={error:e}}finally{try{h&&!h.done&&(m=d.return)&&m.call(d)}finally{if(f)throw f.error}}return[4,Promise.all(o)];case 1:return g.sent(),[2]}}))}))}function M(e,t,n,i){return new Promise((function(aseOutQuad"})}),n)}))}function D(e,t,n){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(i){switch(i.label){case 0:if(!e)throw new Error("Invalid arguments: elm is not an object.");return e.css({scaleX:.5,scaleY:.5,opacity:0}),[4,M(e,{scaleX:1,scaleY:1,opacity:1},t,n)];case 1:return i.sent(),[2]}}))}))}function L(e,t,n){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(i){switch(i.label){case 0:if(!e)throw new Error("Invalid arguments: elm is not an object.");return[4,M(e,{opacity:0},t,n)];case 1:return i.sent(),[2]}}))}))}function N(e,t,n){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(i){switch(i.label){case 0:if(!e)throw new Error("Invalid arguments: elm is not an object.");return e.css("opacity",0),[4,M(e,{opacity:1},t,n)];case 1:return i.sent(),[2]}}))}))}var R=n(63666),V=function(){function e(e){this._view=e,this._isActive=!1}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),e.prototype._getNextColumn=function(e,t){if(!t)return e.next();var n=(new d.d$).articleColumnsCount(1).addDivider(),i=e.section();return i&&n.section(i),n.state().isBundle=!0,this._view.appendColumns(e,new d.JD(n,n)),t.layouts.forEach((function(e){if(e){var t=(0,R.ny)(e.dataItem(),R.tG.Rendered);n.onDisposed((function(){return t.release()})),n.addLayout(e)}})),t.cells.forEach((function(e,t){t||e.layout?n.addCell(e):e.remove()})),n.left(e.left())},e.prototype._replaceColumns=function(e,t,n,r){void 0===r&&(r=200);var o=[],a=0;e.forEach((function(e){var t=e.visibleCells();t&&t.length&&o.push.apply(o,(0,i.ev)([],(0,i.CR)(t.map((function(e){return L(e.elm,a+=10,r)}))),!1))}));var s=n;return t.forEach((function(e){e.left(s),s+=e.width();var t=e.visibleCells();t&&t.length&&o.push.apply(o,(0,i.ev)([],(0,i.CR)(t.map((function(e){return D(e.elm,a+=10,r)}))),!1))})),this._view.scroller.elm.height(),Promise.all(o)},e.prototype.play=function(e,t){var n=this;if(this._isActive)return Promise.reject();this._isActive=!0;var i=e.split(t);return i.clicked.layout.renderer().render().then((function(t){if(t.isEmpty())return Promise.reject();var r=[],o=e.section();t.forEach((function(e){r.push(e.left(-9999)),o&&e.section(o)}));var a,s,u=e.columnIdx(),c=e.columnIdx(-1),l=e.left(),h=n._getNextColumn(e,i.below),p=t.getWidth(),f=n._view.columns().width,m=[A(n._view,e,p+(i.above?f:0),300)],g=l;if(i.above){g+=f;var v=p+(i.below?f:0);m.push(Z(h,v,300,n._view.visibleTitleHeaders()));var y=i.above.cells[i.above.cells.length-1];y&&!y.layout&&e.removeCell(y),a=(new d.d$).articleColumnsCount(1),s=new d.JD(a,a),n._view.appendColumns(e,s);var _=(0,R.ny)(i.clicked.layout.dataItem(),R.tG.Rendered);a.onDisposed((function(){return _.release()})),a.addLayout(i.clicked.layout),i.clicked.cells.forEach((function(e){return a.addCell(e)})),a.left(l),m.push(E(a,f,100))}else v=p-(i.below?0:f),m.push(Z(h,v,300,n._view.visibleTitleHeaders())),a=e,(c=t.head()).isFirst(e.isFirst()),s=new d.JD(a,a);return Promisolumns(s,t,g)})).then((function(){for(n._view.replaceColumns(s,t),t.head().columnIdx(-1);c&&c.columnIdx();)c=c.columnIdx(u++).next();return a.dispose(),n._view.invalidate(),{newnext:h,expanded:r}}))})).finally((function(){n._isActive=!1}))},top()-t.top()}function z(e){var t=e.elm();t&&t.css("opacity",0)}function U(e){var t=e.elm();t&&t.css("opacity",1)}var ._isActive=!1}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),e.prototype.play=function(e,t,n,r,a){var s=this;if(this.isActive)return Promise.reject();this._isActive=!0,g.busy.set();var u=t.head(),c=t.tail(),l=u.left(),d=l,h=this._view.columns().width;r.forEach((function(e){e.left(d),d+=e.width()}));var p=[];p.push(Z(c.next(),r.getWidth()-t.getWidth(),k(r.count()-t.count()),this._view.visibleTitleHeaders())),a||p.push(A(this._view,r.head(),r.count()*h)),u.isFirst()&&r.head().isFirst(!0),c.isLast()&&r.tail().isLast(!0),u.prev()&&u.prev().noDividers()&&r.head().removeDivider();var f=(0,o.map)(e.textBlocks(),(function(e){return Array.isArray(e)?e.slice():null})),m=(0,o.map)(n.slice():null}));e.columns().forEach((function(e,t){var n=f[t]||[];(0,o.forEach)(e.cells(),(function(e){n.push(e.instance)})),n.length&&(n.sort(O),f[t]=n)})),n.columns().forEach((function(e,t){var n=m[t]||[];(0,o.forEach)(e.cells(),(function(e){n.push(e.instance)})),n.length&&(n.sort(O),m[t]=n)}));for(var v=0,y=0,_=Math.max(f.length,m.length),b=0,w=0;w<_;++w){var C=w<f.length?f[w]:null,I=w<m.length?m[w]:null;if(this._view.isVisible(l+w*h)){if(I)if(C||!I)for(v=y=0;v>=0||y>=0;){var P=v>=0?C[v]:null,x=y>=0?I[y]:null;if(P===x)++y>=I.length&&(y=-1),++v>=C.length&&(v=-1);else if(P&&!x)(B=P.elm())&&p.push(L(B,b+=10,F)),++v>=C.length&&(v=-1);else if(!P&&x)(B=x.elm())&&p.push(N(B,b+=10,F)),++y>=I.length&&(y=-1);else{var S=P.top(),T=P.height(),E=P.uid(),M=x.top(),R=x.height(),V=x.uid();if(S===M&&T===R)E===V?(z(P),U(x)):((B=P.elm())&&p.push(L(B,b+=10,F)),(B=x.elm())&&p.push(N(B,b+=10,F))),++v>=C.length&&(v=-1),++y>=I.length&&(y=-1);else if(S>=M+R)(B=x.elm())&&p.push(N(B,b+=10,F)),++y>=I.length&&(y=-1);else if(M>=S+T)(B=P.elm())&&p.push(L(B,b+=10,F)),++v>=C.length&&(v=-1);else{var B;(B=x.elm())&&p.push(N(B,b+=10,F)),++y>=I.length&&(y=-1),(B=P.elm())&&p.push(L(B,b+=10,F)),++v>=C.length&&(v=-1)}}}else p.push.apply(p,(0,i.ev)([],(0,i.CR)((0,o.chain)(I).map((function(e){return e.elm()})).filter().map((function(e){return D(e,b+=10,F)})).value()),!1))}else C&&(0,o.forEach)(C,z),I&&(0,o.forEach)(I,U)}return this._view.scroller.elm.height(),Promise.all(p).then((function(){g.busy.reset(),e.deleteArticleElm(),s._isActive=!1}))},e}(),W=n(55193),q=n(2099),G=n(95766),X=n(63019),Y=n(14581),K=n(24458),J=n(27670),$=((H={})[X.GM.SmartFlowClick]="Click",H[X.GM.SmartFlowDoubleClick]="DoubleClick",H[X.GM.SmartFlowReadMore]="ReadMore",H[X.GM.SmartFlowContextMenuRequested]="ContextMenuRequested",H[X.GM.SmartFlowPinch]="Pinch",H[X.GM.SmartFlowGesturesEnd]="GesturesEnd",H[X.GM.SmartFlowGesturesStart]="GesturesStart",H);G.U.ofType(X.GM.PageChanged).subscribe((function(e){var t=J.Z.getActiveViewName();t!==K.n3.TextView?G.U.send(new X.I8({viewName:t,title:e.payload.title})):G.U.send(new X.Ml({viewName:t,cid:q.Z.cid(),issueDate:(0,Y.YL)(q.Z.issue()),title:e.payload.title}))})),G.U.ofType(X.GM.SmartFlowClick,X.GM.SmartFlowDoubleClick,X.GM.SmartFlowReadMore,X.GM.SmartFlowContextMenuRequested,X.GM.SmartFlowPinch,X.GM.SmartFlowGesturesEnd,X.GM.SmartFlowGesturesStart).subscribe((function(e){var t=J.Z.getActiveViewName(),n=$[e.type];t!==K.n3.TextView?G.U.send(new X.sQ({viewName:t,eventAction:n})):G.U.send(new X.e8({viewName:t,eventAction:n,cid:q.Z.cid(),issueDate:(0,Y.YL)(q.Z.issue())}))}));var Q=n(36235),ee=n(54591),te=n(46720),ne=n(26049),ie=n(6677)this.height=0}return e.prototype.isVisible=function(e,t){return e>=this.left&&e<this.right||e+t>this.left&&e+t<=this.right},e}(),oe=n(69327),ae=n(88241),se=n(37896),ue=n(13395),ce=n(62980),le=n(87453),de=300;!function(){r.nd.viewer.textView||(r.nd.viewer.textView={});var e={container:null,elm:null,left:0,width:0,oldLeft:void 0,oldWidth:void 0},t={shs(":visible")}var l={};function p(n,i){this._context=i||s.Z.current,this._context.textView=this,this._columns=new d.JD,this._columns.width=0,this._columns.height=0,this._columns.preview=0,this._viewport=new re,this._context.textViewScroller=this._scroller=this.scroller=Object.assign({},e),this._config=Object.assign({},t),this._scrollAnimation=new x(this),this._bundleToMultiColumnsAnimation=new B(this),this._expandArticleAnimation=new j(this);var a=this;c.Z.loaded().then((function(){a._config.showBookmarks=!q.Z.isIssueRestrictedBy("Bookmarks"),a._config.showCommentsBubble=c.Z.get("ui.Comments.enable",!0)&&c.Z.get("ui.Comments.enableLabels",!0),a._config.enableSimilarArticles=c.Z.get("ui.Similar.enable",!0)})),this._container=n,this._container.elm().css("overflow","hidden"),this._container.resize(null,this._onResize.bind(this)),this._scroller.container=n.elm().wheel({accumulate:!1,accumulateMaxTime:150,handler:this._onMouseWheel.bind(this)}),this._scroller.elm=this._scroller.container.html('<div id="scroller" style="position: relative; top: 46px;"/>').addClass("scale".concat((0,b.K9)()," textview-container ").concat(_.get("TextView.Fontset",c.Z.get("ui.TextView.Fontset","fontset1")))).children("#scroller").optimizeForTransform(),this._scrollZones=new Q.D(n.elm(),this,"ui.Views.TextView.enableScrollPanels"),(new window.Image).src=r.nd.makeImageUrl("i-more.png"),W.ZP.bind(this._scroller.container,{gesturesStart:this._onGesturesStart.bind(this),scroll:this._onScroll.bind(this),singleTap:this._onSingleTap.bind(this),singleTapConfirmed:this._onSingleTapConfirmed.bind(this),doubleTap:this._onDoubleTap.bind(this),fling:this._onFling.bind(this),pinch:this._onPinch.bind(this),contextMenu:this._onLongPress.bind(this),gesturesEnd:this._onGesturesEnd.bind(this),keyUp:this._onKeyUp.bind(this),keyPress:this._onKeyPress.bind(this)}),_.onSettingsChanged("TextView.Fontset").subscribe(this._onFontsetChanged.bind(this)),(0,b.ff)(this._onScaleChanged.bind(this)),function(e){l[ce.D.left]=e.scrollColumnLeft,l[ce.D.right]=e.scrollColumnRight,l[ce.D.down]=e.scrollToNextArticle,l[ce.D.up]=e.scrollToPrevArticle,l[ce.D.space]=e.scrollScreenRightAlign,l[ce.D.pgDown]=e.scrollScreenRightAlign,l[ce.D.pgUp]=e.scrollScreenLeftAlign}(this),this._toggleLoadingColumnsDebounced=(0,o.debounce)(this._toggleLoadingColumns.bind(this),10)}p.preload=function(){c.Z.loaded().then((function(){for(var e="",t=w.nB;t<=w.mx;++t){e+='<div class="'.concat(C.Z.currentFontId," scale").concat(t,'" style="position:absolute;left:-10000px;top:-10000px;">');for(var n=1;n<=5;++n)e+='<article class="art'.concat(n>1?" art-t".concat(n):"",'">')+'<header><hgroup><h1>English</h1></hgroup></header><div class="col"><p>English</p><p class="art-annotation">English</p></div></article>';e+="</div>"}r(document.body).append(e)}))},p.prototype={_context:null,_container:null,_isVisible:!1,_isDisabled:!1,_columns:null,_viewport:null,_scroller:null,_config:null,_scrollZones:null,_scrollDirection:0,_viewedArticles:[],config:function(e){var n=this;return arguments.length?((0,o.forIn)(e,(function(e,i){i in t&&(n._config[i]=e)})),this):Oisible=!0,this._forceResize(),this},hide:function(){return this.reset(),this._isVisible=!1,te.Z.trigger("hide",this),this},enable:function(){retur(){return this._isDisabled=!0,this},scrollDirection:function(){return this._scrollDirection},_onFontsetChanged:function(e){this._scroller.container.removeClass(this._fontset).addClass(e),this._fontset=e,this._forceResize(100)},_onScaleChanged:function(e,t){e!==t&&(this._scroller.container.removeClass("scale".concat(e)).addClass("scale".concat(t)),this._forceResize(10))},_onResize:function(){this._resize(100)},_restoreView:function(){ie.Z.log("rightColumnsCount: ".concat(this.rightColumnsCount()));var e=this.visibleColumns();if(e&&this._viewport.columnsCount===e.length){var t=e[e.length-1];!t||t._layout||t._layouts||this.scrollColumnLeft()}y.ZP.hide(),(0,ee.Z)().show(v.ZP.val("Errors.SiteDown"))},_resizeTimeoutID:0,_lastWidth:0,_lastHeight:0,_forceResize:function(e){this._lastWidth=this._lastHeight=0,this._resize(e)},_resize:function(e){if(this._resizeTimeoutID&&(clearTimeout(this._resizeTimeoutID),this._resizeTimeoutID=0),"number"!=typeof e){if(this._isVisible)if(this.isUpdateable()&&!g.busyState.isSet){var t=this._container.width(),n=this._container.height()-46-24;if(t!==this._lastWidth||n!==this._lastHeight){(0,b.dH)(),te.Z.trigger("beforeScroll",this,{reason:a.c8.alignmentCorrection}),this._lastWidth=t,this._viewport.width=t-this._viewport.left,this._viewport.right=t,this._viewport.height=this._lastHeight=n,this._scroller.elm.height(n);var i=(0,b.kv)(),r=Math.ceil(t/i.max),s=Math.floor(t/r);s<i.min&&r>1&&(--r,s=Math.floor(t/r));var c=(i.max-i.min)/3;if(this._viewport.columnsCount=r,this._columns.width=1===r?Math.round(7*t/8):s,this._columns.height=n,this._columns.preview=1===r?1:Math.floor(3*r/4),(0,u.JR)({lineHeight:(0,b.Dp)(),columnWidth:this._columns.width,columnHeight:this._columns.height,visibleColumnsCount:this._viewport.columnsCount,articlePreviewColumnsCount:this._columns.preview}),!(0,o.every)((0,u.iQ)()))throw new Error("Invalid text view metrics. No layout can be built.");this._scroller.container.removeClass("col-narrow col-medium col-wide"),this._columns.width<i.min+c?this._scroller.container.addClass("col-narrow"):this._columns.width<i.min+c+c?this._scroller.container.addClass("col-medium"):this._scroller.container.addClass("col-wide"),d.d$.resize(this._columns.width,this._columns.height,this._viewport),te.Z.trigger("resize",this,{columnsWidth:this._columns.width,columnsHeight:this._columns.height,visibleColumnsCount:this._viewport.columnsCount,articlePreviewColumnsCount:this._columns.preview})}}else this._resize(100)}else this._resizeTimeoutID=setTimeout(this._resize.bind(this),e)},_ignoreClick:!1,_isInGesture:!1,_isInScroll:!1,_scrollDistanceForDirection:0,_onGesturesStart:function(){this._columns.isEmpty()||this._isDisabled||(this._ignoreClick=ae.O.isActive||this._scrollAnimation.isActive,ae.O.isActive&&ae.O.hide(),g.busyState.set(),this._expandArticleAnimation.isActive||r.nd.viewer.textView.animations.expandArticleInBundle.isActive()||this._bundleToMultiColumnsAnimation.isActive||(this._scrollAnimation.isActive&&(this._isInScroll=!0,this._scrollAnimation.stop(),te.Z.trigger("scrollInterrupted",r.nd.viewer.textView)),this._isInGesture=!0,this._scrollDirection=this._scrollDistanceForDirection=0,te.Z.trigger("gesturesStart",this)))},_onScroll:function(e){var t;!this._isInGesture||se.n.isActive||ae.O.isActive||this._scroller.width-this._viewport.left<=this._viewport.width||this._isContinuousScrollAnimationActive||(this._isInScroll=!0,this._scrollDistanceForDirection+=e.dx(),t=this._scroller.left>0&&e.dx()>0?Math.round(e.dx()/2*Math.sin(Math.PI/2*(this._viewport.width-this._scroller.left)/this._viewport.width)):this._viewport.width-this._scroller.left>this._scroller.width&&e.dx()<0?Math.round(e.dx()/2*Math.cos(Math.PI/2*(this._viewport.width-this._scroller.left-this._scroller.width)/this._viewport.width)):e.dx(),te.Z.trigger("beforeScroll",this,{delta:t,reason:a.c8.drag}),this._move(t))},_onSingleTap:o.noop,_onSingleTapConfirmed:function(e){if(this._ignoreClick||!this._isInGesture||!this._columns._head)return!1;var t=e.position(),n=this.columnsByX(t.x),i=n.columns,r=n.column,o={x:t.x,y:t.y,columns:i,column:r,event:e,handled:!1};return te.Z.trigger("click",this,o),!o.handled&&void 0},_onDoubleTap:function(e){if(!this._ignoreClick&&this._isInGesture&&this._columns._head){var t=e.position(),n=this.columnsByX(t.x),i=n.columns,r=n.column;te.Z.trigger("doubleclick",this,{x:t.x,y:t.y,columns:i,column:r,event:e,handled:!1})}},_onFling:function(e){if(!(!this._isInGesture||se.n.isActive||ae.O.isActive||this._scroller.width<=this._viewport.width||this._isContinuousScrollAnimationActive)){var t=e.velocity().vx;if(t>8?t=8:t<-8&&(t=-8),this._scroller.left>this._viewport.left)this._scroll({delta:this._viewport.left-this._scroller.left,duration:de,reason:a.c8.bounce}).catch(o.noop);else if(this._viewport.width-this._scroller.left>this._scroller.width)this._scroll({delta:this._viewport.width-this._scroller.left-this._scroller.width,duration:de,reason:a.c8.bounce}).catch(o.noop);else if(Math.abs(t)>.5){var n=Math.log(.15/Math.abs(t))/Math.log(.998);n=n<=0?0:Math.round(n);var i=t*((1-Math.pow(.998,n+1))/(1-.998));this._scrollDistanceForDirection=i,this._scroll({delta:i,duration:n,align:!0,reason:a.c8.fling}).catch(o.noop)}else{var r=this.columnByX(this._viewport.left);r&&(i=r.nearestAnchorDelta(-this._scroller.left-r.left()+this._viewport.left))&&this._scroll({delta:i,duration:de,reason:a.c8.alignmentCorrection}).catch(o.noop)}}},_onPinch:function(e){if(this._isInGesture&&!this._ignoreClick)if(ae.O.isActive)ae.O.update(e);else if(se.n.isActive)se.n.update(e.scale());else{var t=e.center(),n=this.columnsByX(t.x),i=n.column,r=n.columns;te.Z.trigger("pinch",this,{x:t.x,y:t.y,scale:e.scale(),columns:r,column:i})}},_onLongPress:function(e){if(this._isInGesture&&!this.isAnimating()&&!this._ignoreClick){var t=e.position(),n=this.columnsByX(t.x),i=n.column,r=n.columns;te.Z.trigger("contextMenu",this,{x:t.x,y:t.y,columns:r,column:i,container:this._scroller.elm}),this._isInGesture=!1}},_getScrollDeltaForScrollColumnLeft:function(){var e=this.columnByX(this._viewport.left);return e?!(e=e.prev())&&this._scroller.left>=this._viewport.left?0:e&&e.width()||this._viewport.left-this._scroller.left:0},_getScrollDeltaForScrollColumnRight:function(){var e=this.columnByX(this._viewport.left);return e?-e.width():0},_stopContinuousScroll:null,_isContinuousScrollAnimationActive:!1,startContinuousScroll:function(e,t){var n=this;if(!this._scrollAnimation.isActive&&!this._isContinuousScrollAnimationActive){this._isContinuousScrollAnimationActive=!0;var i=g.busyStateLock.lock();ae.O.isActive&&ae.O.hide(),this._direction=this._scrollDirection=e;var r=this._viewport.left,o=e<0?r-this._scroller.left:this._viewport.right-this._scroller.width-this._scroller.left;te.Z.trigger("beforeScroll",this,{delta:o,reason:t}),e<0&&(o+=this._viewport.left-r);var a=Math.round(Math.abs(o)/this._columns.width*de/2);this._toggleLoadingColumns(this._scroller.left+o),this._isInScroll=!0,Promise.all([this._scrollAnimation.play({delta:o,duration:a,easing:"linear"}).then((function(){return n._onScrollComplete(!1)}),(function(i){return n._onScrollCanceled(i),n._alignToNearestColumnAnchor(-e,t)})),new Promise((function(e){n._stopContinuousScroll=function(){n._scrollAnimation.isActive&&n._scrollAnimation.stop(),e(),n._strollAnimationActive=!1,i.release()}))}},stopContinuousScroll:function(){this._stopContinuousScroll&&this._stopContinuousScroll()},scrollScreenLeft:function(e,t){if(!n()&&!this._scrollAnimation.isActive){var i;if(e){i=0;for(var r=this._currentColumn;r;r=r.prev()){var o=r.width();if(i+o>this._viewport.width)break;i+=o}}else if((i=Math.min(this._viewport.width,-this._scroller.left))<=0)return;this.scroll(i,de,!1,t).then(this.positionChanged.bind(this))}},scrollScreenRight:function(e,t){if(!n()&&!this._scrollAnimation.isActive){var i;if(e){i=0;for(var r=this._currentColumn;r;r=r.next()){var o=r.width();if(i+o>this._viewport.width)break;i+=o}}else if((i=Math.min(this._viewport.width,this._scroller.width+this._scroller.left-this._viewport.width))<=0)return;this.scroll(-i,de,!1,t).then(this.positionChanged.bind(this))}},scrollScreenRightAlign:function(e){this.scrollScreeion(e){this.scrollScreenLeft(!0,e)},scrollColumnLeft:function(e){if(!n()){var t=this._getScrollDeltaForScrollColumnLeft();t&&(this.scroll(t,de,!1,e),this.positionChanged())}},scrollColumnRight:function(e){if(!n()){var t=this._getScrollDeltaForScrollColumnRight();t&&(this.scroll(t,de,!1,e),this.positionChanged())}},scrollToNextArticle:function(){this._scrollToSingleArticle(!1,a.c8.keyPress)},scrollToPrevArticle:function(){this._scrollToSingleArticle(!0,a.c8.keyPress)},_scrollToSingleArticle:function(e,t){if(!this._scrollAnimation.isActive){var n=this.columnByX(this._viewport.left);if(n){var i,r=n.data();if(e){var o=i=0;for(n=n.prev();n&&((a=n.data())!==r&&(++o,r=a),2!==o)&&(i+=n.width(),null!==a);n=n.prev());}else for(i=-n.width(),n=n.next();n;n=n.next()){var a;if((a=n.data())!==r||null===a)break;i-=n.width()}i&&thessed=String.fromCharCode(e.which)},_onKeyUp:function(e){var t=this._scroller.container.visible();if(!(g.modalState.isSet||!t||this._scroll.width<this._viewport.width)){var n=e.keyCode;if(e.shiftKey&&e.keyCode===ce.D.space&&(n=ce.D.pgUp),(le.W1(n)||le._V(n))&&"INPUT"!==document.activeElement.nodeName)ne.default.showSearchMenu(),ne.default.searchMenuText(this.keyPressed);else{var i=l[n];(0,o.isFunction)(i)&&i.call(this,a.c8.keyPress),ae.O.isActive&&n===ce.D.esc&&ae.O.hide()}}},_onGesturesEnd:function(){if(se.n.isActive){var e=se.n.apply();se.n.hide(),e||(n=(t=this.columnByX(0)).nearestAnchorDelta(-this._scroller.left-t.left()))&&this._scroll({delta:n,duration:de,reason:a.c8.alignmentCorrection}).catch(o.noop)}else if(this._isInGesture){var t,n;this._isInScroll&&(n=(t=this.columnByX(0))&&t.nearestAnchorDelta(-this._scroller.left-t.left()))&&this._scroll({delta:n,duration:de,reason:a.c8.alignmentCorrection}).catch(o.noop),te.Z.trigger("gesturesEnd",this),this.positionChanged()}this._isInGesture=!1,this._isInScroll&&(this._isInScroll=!1),this._scrollDistanceForDirection<0?this._scrollDirection=1:this._scrollDistanceForDirection>0&&(this._scrollDirection=-1),this._scrollDistanceForDirection=0,g.busyState.reset()},onReadMoreClicked:function(e){if(this.isAnimating())return!1;var t=e.pageX||e.touchX||0,n=e.pageY||e.touchY||0,i=this.columnsByX(t),r=i.columns,o=i.column;te.Z.trigger("readmore",this,{x:t,y:n,columns:r,column:o});var a=this.articleByX(t);return G.U.send(new X.YE({x:t,y:n,columns:r,title:a?a.Title:void 0})),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1},onContinuedFromClicked:function(e){if(!this.isAnimating()){var t=e.pageX||e.touchX||0,n=e.pageY||e.touchY||0,i=this.columnsByX(t),r=i.columns,o=i.column;te.Z.trigger("continuedfrom",this,{x:t,y:n,columns:r,column:o}),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}},onToolsClicked:function(e){var t=e.pageX||e.touchX||0,n=e.pageY||e.touchY||0,i=this.columnsByX(t),r=i.columns,o=i.column;te.Z.trigger("contextMenu",this,{x:t,y:n,columns:r,column:o}),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},_scroll:function(e){var t=this;if(this._scroller.width-this._viewport.left<=this._viewport.width)return Promise.reject();var n=e.delta,i=e.duration,r=e.align,o=e.reason||a.c8.unspecified;if(this._scrollAnimation.isActive)return Promise.reject();n=Math.round(n);var s=this._viewport.left;if(te.Z.trigger("beforeScroll",this,{delta:n,reason:o}),n+=this._viewport.left-s,r){var u=this._scroller.left+n,c=this._viewport.width-u,l=void 0;if(u+this._columns.width>=0)l=-this._scroller.left;else if(c+this._columns.width>=this._scroller.width)l=this._viewport.width-this._scroller.width-this._scroller.left;else{var d=this.columnByX(-n);d&&(n+=d.nearestAnchorDelta(-u-d.left(),n)),(l=this._adjustDelta(n))===n&&(l=this._alignDelta(n))}l!==n&&(i=Math.round(l*i/n),n=l),n+=this._viewport.left}return this._toggleLoadingColumns(this._scroller.left+n),this._isInScroll=!0,this._scrollAnimation.play({delta:n,duration:i,easing:e.easing}).then((function(e){throw t._onScrollCanceled(e),e}))},_adjustDelta:function(e){var t=window.smartFlowBounce||0;return this._scroller.left+e>0?this._columns.width*t-this._scroller.left:e<0&&this._viewport.width-this._scroller.left-e>this._scroller.width?this._viewport.width-this._columns.width*t-this._scroller.left-this._scroller.width:e},_alignDelta:function(e){var t=this._viewport.width/4;if(Math.abs(e)>=t){var n=this.columnByX(-e);if(n&&n.columnIdx()>0){for(var i=0,r=0,o=e,a=n.columnIdx()-1,s=n;a>=0&&s;--a,s=s.prev())i+=s.width();for(a=n.articleColumnsCount()-n.columnIdx()-1,s=n;a>=0&&s;--a,s=s.next())r+=s.width();if(i>r&&r<=t?o-=r:i<=t&&(o+=i),Math.abs(o)>=t)return this._adjustDelta(o)}}return e},_onScrollComplete:function(e){if(!(this._viewport.width>this._scroller.width))if(this._scroller.oldLeft=this._scroller.left=Math.round(this._scroller.left),this._scroller.left>this._viewport.left)this._scroll({delta:this._viewport.left-this._scroller.left,duration:de,reason:a.c8.alignmentCorrection}).catch(o.noop);else if(this._viewport.width-this._scroller.left>this._scroller.width)this._scroll({delta:this._viewport.width-this._scroller.left-this._scroller.width,duration:de,reason:a.c8.alignmentCorrection}).catch(o.noop);else{if(e&&this._scroller.left&&this._viewport.width-this._scroller.left<this._scroller.width){var t=this.columnByX(this._viewport.left);if(t){var n=t.nearestAnchorDelta(-this._scroller.left-t.left()+this._viewport.left);if(n)return void this._scroll({delta:n,duration:de,reason:a.c8.alignmentCorrection}).catch(o.noop)}}this._onCurrentColumnChanged(),te.Z.trigger("invalidated",this),te.Z.trigger("invalidated",r.nd.viewer.textView),te.Z.trigger("scrolled",this)}},_onScrollCanceled:function(e){this._scroller.oldLeft=this._scroller.left=Math.round(e.currentLeft),this._invalidate(),this._onCurrentColumnChanged()},scroll:function(e,t,n,i,r){return ae.O.isActive&&ae.O.hide(),this._direction=this._scrollDirection=e>0?-1:1,this._scroll({delta:e,duration:t,align:n,reason:i,easing:r})},scrollTo:function(e,t){var n=-(e.left()+this._scroller.left),i=128+32*Math.round(Math.abs(n)/this._columns.width);return i>512&&(i=512),this.scroll(n,i,!1,t)},moveTo:function(e){var t=this._viewport.left-(e.left()+this._scroller.left);this._move(t)},columnByX:function(e){if(this._columns.isEmpty())return null;for(var t=this._scroller.left,n=this._columns.head();n;n=n.next())if((t+=n.width())>e)return n;return null},columnsByX:function(e){for(var t=this._columns.head(),n=t,i=0,r=t,o=this._scroller.left+t.width();o<=e;){if(!(r=r.next()))return d.JD.empty;r.columnIdx()?++i:(t=r,i=1),o+=r.width()}switch(r.type()){case d.Xp.SectionHeader:case d.Xp.Header:case d.Xp.ImagesHeadline:t=n=r,i=1;break;default:for(n=r,i=1;;){var a=n.next();if(!a||a.columnIdx()<=0)break;n=a,++i}}var s=new d.JD(t,n,i);return s.column=r,{columns:s,column:r}},articleByX:function(e){var t=this.columnByX(e);if(t&&t.cells().length>=0){var n=t.cells()[0].smartFlowItemId;return this.articleById(n)}return null},articleById:function(e){return s.Z.current.textViewController.dataFeedManager().getArticleById(e)},columnsByArticle:function(e){for(var t=null,n=null,i=this._columns.head();i;i=i.next())if(i.type()!==d.Xp.SectionHeader)if(i.hasItem(e))t?n=i:t=n=i;else if(t)break;return new d.JD(t,n)},_move:function(e){e&&(this._scroller.left+=e,this._direction=e>0?-1:1),this._invalidate()},correctSections:function(e){this._config.showSections?(arguments.length||(e=this._scroller.left),this._visibleHeaders=function(e,t,n,i){var r=0,o=null;h=[];for(var a=i;a;r+=a.width(),a=a.next())o?o.addColumn(a,r,e+r)||(o.setHeaders(),o=m.create(a,r,e+r,t,n)):o=m.create(a,r,e+r,t,n);o&&o.setHeaders();var s=h;return h=null,s}(e,this._viewport,u.ap,this._columns.head())):this._visib(){return this._visibleHeaders||[]},_invalidate:function(e){(e||void 0===this._scroller.oldLeft||this._scroller.oldLeft!==this._scroller.left)&&(this._scroller.elm.translateLeft(this._scroller.left),this._scroller.oldLeft=this._scroller.left,this.correctSections(),this._toggleLoadingColumns()),(e||void 0===this._scroller.oldWidth||this._scroller.oldWidth!==this._scroller.width)&&(this._scroller.elm.width(this._scroller.width),this._scroller.oldWidth=this._scroller.width),te.Z.trigger("invalidated",this),te.Z.trigger("invalidated",r.nd.viewer.textView)},_render:function(){var e=0;return this._columns.forEach((function(t){t.left(e),e+=t.width()})),e},invalidate:function(e){var t=this._render();this._scroller.left>this._viewport.left&&(0,o.defer)(this.scroll.bind(this),this._scroller.left+this._viewport.left,100),this._invalidate(e),this._scroller.width=t,this._onCurrentColumnChanged()},reset:function(){this._scrollAnimation.isActive&&this._scrollAnimation.stop(),ae.O.isActive&&ae.O.hide(),this._columns.dispose(),this._scroller.left=this._viewport.left,this._scroller.width=0,this._scroller.oldLeft=this._scroller.oldWidth=void 0,this._direction=this._scrollDirection=1,ue.Z.setInitialPosition(this)},appendColumns:function(){for(var e,t,n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var a=!1;1===r.length?(t=this._columns.tail(),n=r[0]):(t=r[0]||this._columns.tail(),n=r[1],a=r[2]);var s=n.getWidth();return this._columns.isEmpty()||n.isEmpty()||!(a||t.left()+t.width()+this._scroller.left<this._viewport.left)||(this._scroller.left-=s),(e=this._columns).appendColumns.apply(e,(0,i.ev)([],(0,i.CR)(r.slice(0,2)),!1)),this._scroller.width+=s,this._toggleLoadingColumnsDebounced(),this},prependColumns:function(){for(var e,t,n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];switch(r.length){case 1:t=this._columns.head(),n=r[0];break;case 2:t=r[0]||this._columns.head(),n=r[1];break;default:return this}var a=n.getWidth();return this._columns.isEmpty()||n.isEmpty()||!t.next()||(this._scroller.left-=a),(e=this._columns).prependColumns.apply(e,(0,i.ev)([],(0,i.CR)(r),!1)),this._scroller.width+=a,this._toggleLoadingColumnsDebounced(),this},appendLoadingColumn:function(e){var t=new d.d$;return this._columns.append(t),this._scroller.width+=this._columns.width,this._initLoadingColumn(t,e),t},prependLoadingColumn:function(e){var t=new d.d$;return this._columns.prepend(t),this._scroller.left-=this._columns.width,this._scroller.width+=this._columns.width,this._initLoadingColumn(t,e),t},_loadingElmSize:null,_initLoadingColumn:function(e,t){var n=this._scroller.elm.createChild("div").addClass("pr-spinner pr-spinner-l pr-spinner-sf");n.html(y.GG),this._loadingElmSize||(this._loadingElmSize={width:n.width(),height:n.height()}),n.css("marginLeft","".concat(((0,u.FK)()-this._loadingElmSize.width)/2,"px")),t&&e.prev()&&e.prev().type()!==d.Xp.SectionHeader&&!e.prev().noDividers()&&e.addDivider(),e.type(d.Xp.Misc).addCell(new oe._(n,1,(this._columns.height-this._loadingElmSize.height)/2,this._loadingElmSize.height)),this._toggleLoadingColumnsDebounced()},_endElmHeight:null,appendEndColumn:function(e){var t=new d.d$,n=this._viewport.width;t.width(n),this._columns.append(t),this._scroller.width+=n;var i=this._scroller.elm.createChild("div","absolute").width(n);return this._endElmHeight||(this._endElmHeight=i.height()),v.ZP.templates.renderTo("v7.Client.NoSearchContent",{},i),e&&t.prev()&&t.prev().type()!==d.Xp.SectionHeader&&!t.prev().noDividers()&&t.addDivider(),t.type(d.Xp.Misc).isLast(!0).addCell(new oe._(i,1,(this._columns.height-this._endElmHeight)/2,this._endElmHeight)),this._toggleLoadingColumnsDebounced(),t},setupNoContentResolverCallback:function(e){this._noContentResolverCallback=e},appendNoContentColumn:function(e){var t=this;if(!this._noContentResolverCallback)return this.appendEndColumn(e);var n=this._viewport.width,i=new d.d$;i.width(n),this._scroller.width+=n;var r=this._scroller.elm.createChild("div").addClass("nodata-wrapper").width(n);return this._columns.append(i),this._noContentResolverCallback().then((function(e){v.ZP.templates.renderTo(e.view,e.model,r);var n=r.height();i.addCell(new oe._(r,1,(t._columns.height-n)/2,n))})),e&&i.prev()&&i.prev().type()!==d.Xp.SectionHeader&&!i.prev().noDividers()&&i.addDivider(),i.type(d.Xp.Misc).isLast(!0),this._toggleLoadingColumnsDebounced(),i},_toggleLoadingColumns:function(e){void 0===e&&(e=this._scroller.left);var t=this._columns.head(),n=this._columns.tail();t&&n&&(t.type()===d.Xp.Misc&&(this._viewport.isVisible(e,this._columns.width)?t.show():t.hide()),n.type()===d.Xp.Misc&&(this._viewport.isVisible(e+this._scroller.width-this._columns.width,this._columns.width)?n.show():n.hide()))},removeColumn:function(e,t){var n=e.width(),i=e.left();this._scroller.width-=n,this._scroller.left+i<0&&(this._scroller.left+=n);for(var r=e.next();r;r=r.next())r.left(i),i+=r.width();var o=this._columns.dispose(e,t);return this._columns.isEmpty()&&this.reset(),this._toggleLoadingColumnsDebounced(),o},removeColumns:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this._toggleLoadingColumnsDebounced(),this._columns.isEmpty())return this._columns;if((0,o.isNumber)(e[0])){var n=e[0];if(n>0){for(var i=this._columns.detach(-n).head();i;i=i.dispose(1));if(this._columns.isEmpty())return this.reset(),this._columns}else{var r=0;for(i=this._columns.detach(-n).head();i;i=i.dispose(1))r+=i.width();if(this._columns.isEmpty())return this.reset(),this._columns;this._scroller.left+=r}return this._scroller.width=this._columns.getWidth(),this._columns}var a=e[0],s=a.tail().next(),u=a.head().left(),c=0;for(this._columns.detach(a),i=a.head();i;i=i.dispose(1))c+=i.width();if(this._columns.isEmpty())return this.reset(),this._columns;for(this._scroller.width-=c,this._scroller.left+u<0&&(this._scroller.left+=c,this._scroller.left>0&&(this._scroller.left=0));s;)s.left(u),u+=s.width(),s=s.next();return this._columns},replaceColumns:function(e,t){this._columns.replace(e,t),this._scroller.width=this._columns.getWidth(),this._toggleLoadingColumnsDebounced()},_currentColumn:null,_globalDirection:0,_accumulatedScroll:0,_articleViewDebounced:(0,o.debounce)((function(){var e=this.visibleArticles();(0,o.forEach)((0,o.difference)(e,this._viewedArticles),(function(e){G.U.send(new X.ii({articleId:(null==e?void 0:e.ArticleId)||(null==e?void 0:e.Id),title:(null==e?void 0:e.Title)||""}))})),this._viewedArticles=(0,o.union)(th){return e.ArticleId===t.ArticleId})))}),5e3),_onCurrentColumnChanged:function(){var e=this.columnByX(this._viewport.left);if(e!==this._currentColumn){if(e&&this._currentColumn){var t=this._currentColumn.left(),n=e.left();this._accumulatedScroll+=n-t,this._globalDirection=n>t?1:n<t?-1:0}Math.abs(this._accumulatedScroll)>=this._viewport.width&&(e&&e.section()&&G.U.send(new X.I_({title:e.section().title})),this._accumulatedScroll=0),this._currentColumn=e,te.Z.trigger("currentColumnChanged",this,this._currentColumn),this._articleViewDebounced()}},globalDirection:function(){return this._globalDirection},visibleColumns:function(){for(var e=[],t=this._scroller.left,n=this._columns.head();n&&!(t>=this._viewport.right);n=n.next())(t>=this._viewport.left||t+n.colspanWidth()>this._viewport.left)&&e.push(n),t+=n.width();return e},visibleColumnsForArticles:function(){var e=[],t=this._columns.head();if(t){for(var n=Math.ceil(Math.abs(this._scroller.left/this._columns.width)),i=1;i<=n;i++)if(void 0===(t=t.next()))return e;for(i=1;i<=this._viewport.columnsCount&&(e.push(t),void 0!==(t=t.next()));i++);}return e},visibleArticles:function(){var e=[],t=this.visibleColumnsForArticles();return(0,o.forEach)(t,(function(t){t.type()===d.Xp.Content&&(0,o.forEach)(t.cells(),(function(t){var n=t.smartFlowItemId;n&&-1===(0,o.indexOf)(e,n)&&e.push(n)}))})),(0,o.map)(e,this.articleById.bind(this)).filter((function(e){return!!e}))},articlesToTip:function(){var e=this.visibleColumns()||[],t=e[e.length-1];if(t){for(;t&&!t.layouts();)t=t.prev();if(t){for(var n=t.data(),i=Array.isArray(n)?n[0]:n,r=0;i&&(0,o.isFunction)(i.tokenized)&&i.tokenized();)i=i.next(),r++;return r}}},leftColumnsCount:function(){if(this._columns.isEmpty()||this._scroller.left>=this._viewport.left)return 0;for(var e=this._scroller.left,t=this._columns.head(),n=1;t&&!((e+=t.width())>=this._viewport.left);)++n,t=t.next();return n},rightColumnsCount:function(){if(this._columns.isEmpty()||this._scroller.left+this._scroller.width<=this._viewport.width)return 0;for(var e=this._scroller.left+this._scroller.width,t=this._columns.tail(),n=1;t&&!((e-=t.width())<=this._viewport.width);)++n,t=t.prev();return n},columns:function(){return this._columns},viewport:function(){._isInGesture&&!this.isAnimating()},isAnimating:function(){var e=r.nd.viewer.textView.animations;return this._scrollAnimation.isActive||this._expandArticleAnimation.isActive||e.expandArticleInBundle.isActive()||this._bundleToMultiColumnsAnimation.isActive},container:function(){return this._container},isVisible:function(e,t,n,i){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===i&&(i=0);var r=e+this._scroller.left;if(r>=this._viewport.right)return!1;if(r+n<this._viewport.left)return!1;var o=t;return!(o>=this._viewport.height)&&o+i>=0},_mouseWheelTimeout:0,_lastDirection:0,_disableScrollOnWheelAnimation:!1,_isWheelActive:!1,_onMouseWheel:function(e){if(!g.busyState.isSet||this._isWheelActive){var t=Math.abs(e.deltaX)>Math.abs(e.deltaY)?-e.deltaX:-e.deltaY;if(1===e.deltaMode&&(t*=(0,b.Dp)()),!this._disableScrollOnWheelAnimation&&Math.abs(t)<100&&(this._disableScrollOnWheelAnimation=!0),!(!t||se.n.isActive||ae.O.isActive||this._columns.count()<this._viewport.columnsCount)){var n=this._viewport.left;te.Z.trigger("beforeScroll",this,{delta:t,reason:a.c8.mouseWheel}),t+=this._viewport.left-n,this._scroller.left>=this._viewport.left&&t>0||this._viewport.width-this._scroller.left>=this._scroller.width&&t<0||(this._isWheelActive||(this._isWheelActive=!0,g.busyState.set()),this._disableScrollOnWheelAnimation?this._applyMouseWheelDelta(t,!1,!1):this._applyMouseWheelDelta(t,!0,!0))}}},_applyMouseWheelDelta:function(e,t,n){if(t){var i=this.columnByX(this._viewport.left-e);e=e>0?i?this._viewport.left-i.left()-this._scroller.left:Math.ceil(e/this._columns.width)*this._columns.width:i?this._viewport.left-i.left()-this._scroller.left-i.width():Math.floor(e/this._columns.width)*this._columns.width}this._mouseWheelTimeout?(clearTimeout(this._mouseWheelTimeout),this._mouseWheelTimeout=0):n&&this._scroller.elm.css({transitionProperty:r.support.transform?r.props.cssTransform:"left",transitionTimingFunction:"ease-out",transitionDuration:"".concat(de,"ms")});var o=e>0?1:-1;this._lastDirection=this._scrollDirection=-o,this._direction=o,this._mouseWheelTimeout=setTimeout(this._onMouseWheelTimeout.bind(this),de),e>this._viewport.left-this._scroller.left?e=this._viewport.left-this._scroller.left:this._viewport.width-this._scroller.left-this._scroller.width>e&&(e=this._viewport.width-this._scroller.left-this._scroller.width),this._move(Math.round(e)),this.positionChanged()},positionChanged:function(){te.Z.trigger("positionchanged",this._context.textView,{})},_onMouseWheelTimeout:function(){this._scroller.elm.css({transitionProperty:"",transitionTimingFunction:"",transitionDuration:""}),this._mouseWheelTimeout=this._lastDirection=0,this._onScrollComplete(),this._isWheelActive=!1,g.busyState.reset()},itemPreviewColumnsCount:function(){return this._columns.preview},setViewportLeft:function(e,t,n){if(!(0,o.isFinite)(e))return this;var i=e-this._viewport.left;return t&&(n?this.scroll(i,100,!1,a.c8.alignmentCorrection):this._move(i)),this._viewport.left=e,this._viewport.width-=i,te.Z.trigger("viewportChanged",this,this._viewport),this},scrollAnimation:function(){return this._scrollAnimation},bundleToMultiColumnsAnimation:function(){return this._bundleToMultiColumnsAnimation},expandArticleAnimation:function(){return this._expandArticleAnimation},_alignToNearestColumnAnchor:function(e,t){void 0===t&&(t=a.c8.alignmentCorrection);var n=this.columnByX(this._viewport.left);if(n){var i=n.nearestAnchorDelta(-this._scroller.left-n.left()+this._viewport.left,e);if(i)return this._scroll({delta:i,duration:Math.round(de*(1+Math.abs(i)/this._columns.width)),reason:t}).catch(o.noop)}return Promise.resolve()},direction:function(){return this._direction}},r.nd.viewer.textView.view=p}();var he=r.nd.viewer.textView},78176:function(e,t,n){"use strict";var i=n(22970),r=n(20384),o=n(40180),a=n(25881),s=n(6677),u=n(25371),c=n(99144),l=n(58653),d=n(84241),h=n(66327),p=n(88077),f=n(1511),m=n(46720),g=n(30724),v=n(17447),y=n(1412),_=(n(70263),n(14003),n(43389),n(69327)),b=n(63666),w=n(91330),C=n(2099);function I(e,t){this._renderer=e,t&&(0,o.assign)(this,t)}function P(){var e=u.Z.current;return"textViewRenderersArticleElms"in e||(e.textViewRenderersArticleElms={}),e.textViewRenderersArticleElms}function x(e){e=e||0;var t=P(),n=t[e];return n&&n._elm||(n=(0,d.Oh)().section().article().addClass("art").css({position:"absolute",top:"-10000px",left:"-10000px"}),e>0?n.addClass("art-t".concat(e+1)):e<0&&n.addClass("art-stack"),t[e]=n),n}function S(){var e=u.Z.current;return e.textViewRenderersColumnElm&&e.textViewRenderersColumnElm._elm||(e.textViewRenderersColumnElm=(0,d.Oh)().section().column().addClass("col").css({position:"absolute",top:"-10000px",left:"-10000px"})),e.textViewRenderersColumnElm}function T(e){return u.Z.current.textView.onReadMoreClicked(e.event?e.event():e),!1}function k(e){return u.Z.current.textView.onToolsClicked(e.event?e.event():e),!1}function A(){var e=(0,d.Oh)().parent();e._titleToolButtonRegistered||(e.tap(".art-options-call",k),e._titleToolButtonRegistered=!0)}function E(e){this._context=u.Z.current,this._article=e,this._columnsStates=[],this._stats={},this._heights=[]}I.ndE_renderer.currentLayout(this),this}}),E.prototype={_context:null,_article:null,_columnsStates:null,_columnsCount:-1,_estimatedColumnsCount:-1,_mode:0,_useHyphenatedTitle:!1,_stats:null,_articleElm:null,_elm:null,_image:null,_titleColspan:0,_titleType:0,_heights:null,_marker:null,_isAbstract:!0,isAbstract:function(){return this._isAbstract},article:function(){return this._article},dataItem:function(){return this._article},sectionElm:function(){return this._article?(0,d.Oh)().section(this._article.Section):null},articleElm:function(){return this._articleElm||(this._articleElm=this.sectionElm().article().addClass("art")),this._articleElm},removeArticleElm:function(){return this._articleElm&&(this._articleElm.remove(),delete this._articleElm),this},columnElm:function(e,t,n){if(!arguments.length)return this.sectionElm().column().addClass("col").css({position:"absolute",width:"".concat((0,g.FK)(),"px")});if(this._elm){var i=n?(this._elm.top()+this._elm.height())%g.Nv:0;if(i&&(i=g.Nv-i),void 0!==t&&this._elm.maxHeight()-this._elm.height()<t+i){if(2&this._mode)return null;var r=new _._({elm:this._elm.render(),colspan:1,top:this._elm.top(),height:this._elm.height(),smartFlowItemId:this._article.Id,type:_.W.Column});e.addCell(r),o=e.findAvailablePosition(t,0,n),this._elm=o?this.articleElm().createChild("div").top(o.top).maxHeight(o.height).css({position:"absolute",top:"0px",width:"".concat((0,g.FK)(),"px")}).addClass("col"):null}}else{var o=e.findAvailablePosition(t,0,n);this._elm=o?this.articleElm().createChild("div").top(o.top).maxHeight(o.height).css({position:"absolute",top:"0px",width:"".concat((0,g.FK)(),"px")}).addClass("col"):null}return this._elm},renderSingleColumnTitle:function(e,t){if(e){e.append('<header><hgroup><h1 data-article-title="true" -nd-tap-highlight-class-name="active">').append(this._useHyphenatedTitle?this._article.HyphenatedTitle:this._article.Title).append("</h1>"),1&t&&this._article.Subtitle&&e.append("<h2>").append(this._article.Subtitle).append("</h2>"),e.append("</hgroup>"),2&t&&this.renderByline(e),e.append("</header>"),g.Q8&&this._renderCommentsBubble(e.find("h1")),g.KW&&!C.Z.isIssueRestrictedBy("Bookmarks")&&this._renderBookmarkButton(e.children("header"));var n="t_1_".concat(t),i=this._stats[n];i||(this._stats[n]=i=e.checkpoint()),e.checkpoint(i)}},renderMultipleColumnTitle:function(e,t,n,i){if(e){e.append("<hgroup>").append("<h1>").append(this._useHyphenatedTitle?this._article.HyphenatedTitle:this._article.Title).append("</h1>"),1&i&&!(4&i)&&this.renderSubtitle(e),e.append("</hgroup>"),2&i&&!(4&i)&&this.renderByline(e),g.KW&&!C.Z.isIssueRestrictedBy("Bookmarks")&&this._renderBookmarkButton(e.children("header"));var r="t_2_1_".concat(n,"_").concat(i),o=this._stats[r];if(o||(this._stats[r]=o=e.checkpoint()),e.checkpoint(o),t){var a=t.findAvailablePosition(o,0,!1),s=new _._({elm:e.elm(),colspan:n,top:a.top,height:o,smartFlowItemId:this._article.Id,type:_.W.Header});t.addCell(s),4&i&&this.renderRestOfTheTitle(this.columnElm(t,g.Nv),i)}}},renderRestOfTheTitle:function(e,t){1&t&&this.renderSubtitle(e),2&t&&this.renderByline(e);var n="t_2_2_".concat(t),i=this._stats[n];i||(this._stats[n]=i=e.checkpoint()),e.checkpoint(i)},renderSubtitle:function(e){this._article.Subtitle&&e.append("<h2>").append(this._article.Subtitle).append("</h2>")},renderByline:function(e){(this._article.Byline||g.Sn&&this._article.Issue)&&(e.append('<ul class="art-byline">'),this._article.Issue&&g.Sn&&(e.append('<li class="art-source">').append(this._article.Issue.Title).append("</li>"),e.append('<li class="art-date">').append('<time datetime="'.concat(this._article.Issue.Date,'" pubdate>')).append(this._article.Issue.DateFormatted).append("</time>").append("</li>")),this._article.Byline&&e.append('<li class="art-author">').append(this._article.Byline).append("</li>"),e.append("</ul>"))},_renderBookmarkButton:function(e){var t,n=this._article.BookmarkId&&(null===(t=this._article.Collections)||void 0===t?void 0:t.length)>0;e.append('<a class="art-options-call').append(n?" bookmarked":"").append('" href="javascript:void(0)" articleid="'.concat(this._article.Id,'"><span></span></a>')),A()},_renderCommentsBubble:function(e){var t=this,n='<a class="lbl-comment{0}" href="javascript:void(0)" style="margin-left:10px;{2}"><em>{3}</em></a>';n=(n=(n=n.replace("{0}",this._article.HateItVotes>this._article.LikeItVotes?" neg":"")).replace("{2}",this._article.PostsCount?"":"visibility:hidden;")).replace("{3}",this._article.PostsCount||0),e.append(n),e.children(".lbl-comment").bind({"touchstart touchend mousedown mousemovetopPropagation():e.cancelBubble=!0},"touchmove MSPointerMove":function(){return!1},click:function(){var e=t._article;return e&&c.default.show({articleId:e.ArticleId,articleTitle:e.Title,articleSubtitle:e.Subtitle,contextProfileName:u.Z.profileId}),!1}})},renderTitle:function(e,t,n){if(t>1){void 0===n&&(n=3),this._translationDisclaimer(this.articleElm(),t,e);var i=this.articleElm().createChild("header").css({position:"absolute",width:"".concat((0,g.FK)(t),"px")});this.renderMultipleColumnTitle(i,e,t,n),this._titleColspan=t}else void 0===n&&(n=3),this.renderSingleColumnTitle(this.columnElm(e,g.Nv),n),this._titleColspan=1},titleWidth:function(e,t){var n="t_w_".concat(e,"_").concat(t),i=this._stats[n];if(!i){this._stats[n]=i={max:0,min:0};var r=x(e).createChild("header").css("white-space","nowrap");this.renderMultipleColumnTitle(r,void 0,0,t),i.max=r.elm().width(),r.css({"white-space":"normal",width:"1px","overflow-x":"auto"}),i.min=r.elm()[0].scrollWidth,r.remove()}return{min:i.min,max:i.max}},renderImage1:function(e,t){var n=(0,g.FK)(),i=Math.round(100*n/t.Width),r=Math.round(t.Height*i/100),o=this.columnElm(e,r);if(!o)return!1;var a="i_1_".concat(t.Id),s=this._stats[a];return!(s&&o.height()+s>o.maxHeight()||(o.append('<figure class="art-pic">').append("<a>").append("<img").append(' style="width:'.concat(n,"px;height:").concat(r,'px;"')).append(1&this._mode?"":' src="'.concat(t.Url).concat(t.Url.indexOf("?")>=0?"&":"?","scale=").concat(i,'"')).append(' nd_url="'.concat(t.Url,'"')).append(' nd_scale="'.concat(i,'"')).append(' nd_uid="'.concat(t.Uid,'"')).append("/>"),t.Byline&&o.append("<em>".concat(t.Byline,"</em>")),o.append("</a>"),(t.Title||t.Text)&&(o.append("<figcaption>"),t.Title&&o.append("<strong>".concat(t.Title,"</strong>")),t.Text&&o.append(" ".concat(t.Text)),o.append("</figcaption>")),o.append("</figure>"),s||(this._stats[a]=s=o.checkpoint()),o.height()>o.maxHeight()||o.maxHeight()-o.height()<g.Nv*g.xY?(o.rollback(),1):(o.checkpoint(s),0)))},renderImage2:function(e,t,n,i){var r="i_".concat(i,"_").concat(t.Id),o=this._stats[r];if(o&&!this.isValidImageHeight(o))return!1;var a=(0,g.FK)(i),s=Math.round(100*a/t.Width),u=Math.round(t.Height*s/100),c=this.articleElm().createChild("figure").css({position:"absolute",width:"".concat(a,"px")}).addClass("art-pic").append("<a>").append("<img").append(' style="width:'.concat(a,"px;height:").concat(u,'px;"')).append(1&this._mode?"":' src="'.concat(t.Url).concat(t.Url.indexOf("?")>=0?"&":"?","scale=").concat(s,'"')).append(' nd_url="'.concat(t.Url,'"')).append(' nd_scale="'.concat(s,'"')).append(' nd_uid="'.concat(t.Uid,'"')).append("/>");if(t.Byline&&c.append("<em>").append(t.Byline).append("</em>"),c.append("</a>"),(t.Title||t.Text)&&(c.append("<figcaption>"),t.Title&&c.append("<strong>").append(t.Title).append("</strong>"),t.Text&&c.append(" ").append(t.Text),c.append("</figcaption>")),c.append("</figure>"),!o){var l=(0,d.Oh)().section(0).article().addClass("art");l.elm.createChild("figure").css("width","".concat((0,g.FK)(i),"px")).addClass("art-pic").append(c.html()),this._stats[r]=o=l.elm.height(),l.remove()}var h=Math.round(g.Nv/3);if(!this.isValidImageHeight(o)||!e.findAvailablePosition(o,0,!1,this._elm?[new _._(this._elm.render(),1,this._elm.top(),this._elm.height())]:void 0))return c.remove(),!1;if(c.checkpoint(o),"bottom"===n){var p=g.$0-g.$0%g.Nv-o;c.css("top",p),p-=h,this._elm&&this._elm.top()+this._elm.maxHeight()>p&&this._elm.maxHeight(p-this._elm.top());var f=new _._({elm:c.elm(),colspan:i,top:p,height:o+h,smartFlowItemId:this._article.Id,type:_.W.Figure});e.addCell(f)}else p=e.findAvailablePosition(o,0,!1).top,this._elm&&(p=this._elm.top()+this._elm.height(),this._elm.maxHeight(this._elm.height())),f=new _._({elm:c.elm(),colspan:i,top:p,height:o+h,smartFlowItemId:this._article.Id,type:_.W.Figure}),e.addCell(f);return!0},renderImage:function(e,t,n,i){if(this._article){var r,o;if(e){if(r="top",o=1===e.colspan?this.renderImage1(t,e.image):this.renderImage2(t,e.image,r,e.colspan))return}else r="bottom";var a=g.YD;for(a>n&&(a=n);a;a--){var s=this.getImages(a);if(s&&s.length){if(!i&&a>1&&n>a)return{image:s[0],colspan:a,postponed:!0};for(var u=0;u<s.length;u++){if(e=s[u],1===a&&this.renderImage1(t,e))return{image:e,colspan:a};if(a>1&&this.renderImage2(t,e,r,a))return{image:e,colspan:a};if(!(i||n<=a)){var c=new h.d$;if(o=void 0,(1===a&&this.renderImage1(c,e)||a>1&&this.renderImage2(c,e,r,a))&&(o={image:e,colspan:a,postponed:!0}),c.dispose(),o)return o}}}}}},pclasshtml:function(e,t){var n;return!e&&this._article.Annotation?n="art-annotation":e||this._titleType<3?n=null:(n="art-lead",(!t||t>=3)&&(n+=" dropcap")),n?' class="'.concat(n,'"'):""},addMarker:function(e){if(delete this._marker,!this._columnsStates)return this;var t=this._columnsStates[e];if(!t)return this;var n=t.blockIdx,i=t.lineIdx;if(!i)return this._marker={idx:n-1,block:this._article.Blocks[n-1].Text+g.Sd},this;for(var r=this._article.Blocks[n].Text,o=Math.floor(r.length*i*g.Nv/this.blockHeight(n)),a=x(this._titleType).createChild("div").css({position:"absolute",width:"".concat((0,g.FK)(),"px"),visibility:"hidden"}).addClass("col");o<r.length&&" "!==r[o];)++o;var s=Math.round(a.append("<p".concat(this.pclasshtml(n),">")).append(r.substr(0,o)+g.Sd).append("</p>").checkpoint()/g.Nv);for(a.rollback();s<=i&&!(++o>=r.length);){for(;o<r.length&&" "!==r[o];)++o;s=Math.round(a.append("<p".concat(this.pclasshtml(n),">")).append(r.substr(0,o)+g.Sd).append("</p>").checkpoint()/g.Nv),a.rollback()}for(;s>i&&!(--o<=0);){for(;o>0&&" "!==r[o];)--o;s=Math.round(a.append("<p".concat(this.pclasshtml(n),">")).append(r.substr(0,o)+g.Sd).append("</p>").checkpoint()/g.Nv),a.rollback()}return a.remove(),this._marker={idx:n,block:r.substr(0,o)+g.Sd+r.substr(o)},this},removeMarker:function(){return delete this._markedBlock,this},renderText:function(e,t,n,i,r){if(this._article&&this._article.Blocks&&this._article.Blocks.length){i||(i=Number.MAX_VALUE);for(var o=this._renderingState(e).text,a=t;a<this._article.Blocks.length;a++){for(var s=Math.round(this.blockHeight(a,!1)/g.Nv);n<s;){var u=this.columnElm(e,g.Nv,!0);if(!u)return{blockIdx:a,lineIdx:n};var c=(u.top()+u.height())%g.Nv;c&&(c=g.Nv-c);var l=Math.floor((u.maxHeight()-u.height()-c)/g.Nv);if(l>i&&(l=i),r&&r[a])for(var d=0;d<r[a].length;d++){var h=r[a][d];if(!(n>=h.lidx+h.lines)){l=Math.min(l,h.lines-n+h.lidx);break}}if(!l)return{blockIdx:a,lineIdx:n};c&&u.append('<div style="height:'.concat(c,'px;overflow:hidden;"> </div>')).checkpoint(c);var p=this.renderBlock(u,a,n,l);if(!p)break;if(o[a]={start:n,lines:p,outof:s},n+=p,(i-=p)<=0)return n<s||a+1<this._article.Blocks.length?{blockIdx:a,lineIdx:n}:void 0}n=0}}},_renderingState:function(e){var t=e.state(),n=t.rendering;n||(t.rendering=n={});var i=n[this._article.Id];return i||(n[this._article.Id]=i={text:{}}),i},blockHeight:function(e){var t=this,n=!!this._marker&&this._marker.idx===e,i=function(e){return"tt_".concat(2&t._mode?"1":"0","_").concat(!e&&t._titleType>=3?"".concat(t._titleType,"_"):"").concat(e)},r=this._stats,o=n?void 0:r[i(e)];if(!o){var a,s,u=2&this._mode?S().css("width","".concat((0,g.FK)(),"px")).createChild("article").addClass("art art-stack"):x(this._titleType).createChild("div").css({position:"absolute",width:"".concat((0,g.FK)(),"px"),visibility:"hidden"}).addClass("col"),c=void 0;n?(c=1,a=e):!e&&this._titleType>=3?(c=1,a=0):(a=e-e%(c=10))+c>this._article.Blocks.length&&(c=this._article.Blocks.length-a);for(var l=0;l<c;++l)u.append("<p".concat(this.pclasshtml(l+a),">")),this._marker&&this._marker.idx===l+a?u.append(this._marker.block):u.append(this._article.Blocks[l+a].Text),u.append("</p>");u.append("<p>a</p>"),u.elm().children().each((function(e){var t=this.offsetTop;e&&(n?o=t-s:r[i(e+a-1)]=t-s),s=t})),u.remove(),n||(o=r[i(e)])}return o},_blockHeightTask:function(e,t,n){var r,o,a=[this._mode,this._titleType];r=(0,i.CR)([t,n],2),this._mode=r[0],this._titleType=r[1],this.blockHeight(e),o=(0,i.CR)(a,2),this._mode=o[0],this._titleType=o[1]},renderBlock:function(e,t,n,i){var r=Math.min(i,Math.round(this.blockHeight(t,!1)/g.Nv)-n),o=r*g.Nv;e.append('<div style="overflow:hidden;height:'.concat(o,'px" bidx="').concat(t,'" lidx="').concat(n,'" lines="').concat(r,'"><p'));var a=t?0:this.blockHeight(0)/g.Nv;return e.append(this.pclasshtml(t,a)),n&&e.append(' style="margin-top:-'.concat(n*g.Nv,'px"')),e.append(">"),this._marker&&this._marker.idx===t?e.append(this._marker.block):e.append(p.Z.replace(this._article.Blocks[t].Text,this._article.Data)),e.append("</p></div>").checkpoint(o),A(),r},_translationDisclaimer:function(e,t,n){if(this._article.isOriginal()||w.Z.currentLanguage())return null;var i=e.createChild("div").css({width:(0,g.FK)(t),position:"absolute"}).append('<p class="message"><em>Translated into ').append(w.Z.language(this._article.Language).title()).append('</em><a href="#">Show original</a><a href="#">Disclaimer</a></p>'),r=i.checkpoint();if(i.checkpoint(r),n){var o=n.findAvailablePosition(r,0,!1),a=new _._({elm:i.elm(),colspan:t,top:o.top,height:r,smartFlowItemId:this._article.Id,type:_.W.Header});n.addCell(a)}return i},getImages:function(e){if(!this._article.Images||!this._article.Images.length)return null;for(var t=null,n=0;n<this._article.Images.length;n++){var i=this._article.Images[n],r=(0,g.FK)(e),o=Math.round(100*r/i.Width);if(!(o>g.xC)){var a=Math.round(i.Height*o/100);e>1&&!this.isValidImageHeight(a)||(t? t.Width*t.Height-e.Width*e.Height})),t},isValidImageHeight:function(e){return g.$0-e>5*g.Nv},reset:function(e){e&&(this._article=e),this.removeArticleElm()._columnsStates=[],this._columnsCount=this._estimatedColumnsCount=-1,this._stats={},this._heights=[],delete this._currentLayout},columnsCount:function(){return this.estimatedColumnsCount()},textLines:function(e,t,n){if(!this._article||!this._article.loaded())return 0;var i=0,r=g.Nv,o=this._titleType;this._titleType=e;for(var a=n?0:this._article.StartBlockIdx||0;a<this._article.Blocks.length&&(!t||i<t);++a)i+=this.blockHeight(a)/r;return this._titleType=o,i},currentLayout:function(e){return arguments.length?(this._currentLayout=e,this):this._currentLayout},layout:function(e){if(!this._article||!this._article.loaded())return null;var t="layout_".concat(e),n=this._stats[t];if(n)return n;e||(e=Number.MAX_VALUE);var i=this._mode;this._mode=1;var r=Math.round(2*(Math.tan(Math.PI*((this._article.SecNormRate||this._article.NormRate)-.5)/2)+1));r>0&&this._article.Title.toUpperCase()===this._article.Title&&--r;for(var o=r;o>=0;--o){var a=this.titleWidth(o,0),s=Math.ceil((a.max+g.ez)/g.G4),u=Math.ceil((a.min+g.ez)/g.G4),c=Math.min(Math.min(e,g.YD),s);if(!o||!(1===c||c<u)){this._useHyphenatedTitle=!o&&c<u;var l=null;c>1&&(l=this.layoutByTitleLayout({type:o,colspan:c,split:!1},e,3|o<<3),n=this.pickLayout(n,l),l=this.layoutByTitleLayout({type:o,colspan:c,split:!0},e,7|o<<3),n=this.pickLayout(n,l)),o||(l=this.layoutByTitleLayout({type:o,colspan:1},e,3|o<<3),n=this.pickLayout(n,l))}}return n&&(this._stats[t]=n),this._mode=i,n},pickLayout:function(e,t){if(!e)return t;if(!t)return e;if(e.image&&!t.image)return e;if(!e.image&&t.image)return t;if(e.image&&t.image){if(e.image.image.s>t.image.image.s)return e;if(e.image.image.s<t.image.image.s)return t}return e.totalLines<t.totalLines?e:e.totalLines>t.totalLines?t:Math.random()<.5?e:t},layoutByTitleLayout:function(e,t,n){for(var i=this.titleHeightsByColumns(e.type,e.colspan,n),r=0,o=g.Fp/2,a=0;a<t;++a){i[a]?this._article.StartBlockIdx&&(i[a]+=g.Nv):i[a]=0;var s=g.Fp-Math.ceil(i[a]/g.Nv);if(e.type&&(s<g.xY||a&&s<o))return null;r+=s}var u=new I(this,{title:e,image:null,totalLines:r}),c=this.imageLayout(t,i);if(!c)return u;for(r=0,a=0;a<t;++a){var l=i[a];a>=c.colidx&&a<c.colidx+c.colspan&&(l+=c.image.fullHeight),r+=g.Fp-Math.ceil(l/g.Nv)}return this.pickLayout(u,new I(this,{title:e,image:c,totalLines:r}))},titleHeightsByTitleLayout:function(e){var t=3|e.type<<3;return e.split&&(t|=4),this.titleHeightsByColumns(e.type,e.colspan,t)},titleHeightsByColumns:function(e,t,n){var i="thbc_".concat(e,"_").concat(t,"_").concat(n),r=this._stats[i];if(r)return r.slice(0);r=[];var o=x(e);if(t>1){var a=0;(u=this._translationDisclaimer(o,t))&&(a=u.height(),u.remove()),u=o.createChild("header").css({position:"absolute",width:"".concat((0,g.FK)(t),"px")}),this.renderMultipleColumnTitle(u,void 0,t,n),a+=u.height(),u.remove();for(var s=0;s<t;++s)r.push(a);4&n&&(u=o.createChild("div").css({position:"absolute",width:"".concat((0,g.FK)(),"px")}).addClass("col"),this.renderRestOfTheTitle(u,n),r[0]+=u.height(),u.remove())}else{var u=o.createChild("div").css({position:"absolute",width:"".concat((0,g.FK)(),"px")}).addClass("col");this.renderSingleColumnTitle(u,n),r.push(u.height()),u.remove()}return this._stats[i]=r,r.slice(0)},imageLayout:function(e,t){for(var n=null,i=e;i>0;--i){for(var r=-1,o=0,a=0;a<=e-i;++a){for(var s=-1,u=0;u<i;++u)s=Math.max(s,t[u+a]);(r<0||s<r)&&(o=a,r=s)}if(!(r<0)){var c=this.bestImage(i,(g.Fp-g.xY)*g.Nv-r);c&&(n?c.s>n.image.s&&(n.image=c,n.colidx=o,n.colspan=i):n={image:c,colidx:o,colspan:i})}}return n},image:function(e,t,n){var i=(0,g.FK)(t),r=Math.round(100*i/e.Width);if(r>g.xC)return null;var a=Math.round(e.Height*r/100);if(a>n)return null;var s={};return(0,o.forIn)(e,(function(e,t){s[t.toLowerCase()]=e})),s.width=i,s.height=a,s.url="image.Url".concat(e.Url.indexOf("?")>=0?"&":"?","scale=").concat(r),s.s=i*a,s.baseUrl=e.Url,s.scale=r,s},images:function(e,t){if(!this._article.Images||!this._article.Images.length)return null;for(var n=null,i=0;i<this._article.Images.length;i++){var r=this.image(this._article.Images[i],e,t);r&&(n?n.push(r):n=[r])}return n&&n.sort((function(e,t){return t.s-e.s})),n},renderOutsideImage:function(e,t){var n=t.createChild("figure").css({position:"absolute",width:"".concat(e.width,"px")}).addClass("art-pic").attr("imgid",e.id).append("<a>").append("<img").append(' style="width:'.concat(e.width,"px;height:").concat(e.height,'px;"')).append(1&this._mode?"":' src="'.concat(e.url,'"')).append(' nd_url="'.concat(e.baseUrl,'"')).append(' nd_scale="'.concat(e.scale,'"')).append(' nd_uid="'.concat(e.uid,'"')).append("/>");return e.byline&&n.append('<em css="-webkit-transform-style:preserve-3d;">').append(e.byline).append("</em>"),n.append("</a>"),(e.title||e.text)&&(n.append("<figcaption>"),e.title&&n.append("<strong>").append(e.title).append("</strong>"),e.text&&n.append(" ").append(e.text),n.append("</figcaption>")),n},fullImageHeight:function(e){var t="fih_".concat(e.id,"_").concat(e.width),n=this._stats[t];if(!n){var i=this.renderOutsideImage(e,x(0));this._stats[t]=n=i.height(),i.remove()}return n},bestImage:function(e,t){if(this._article){var n=this.images(e,t);if(!n)return null;for(var i=null,r=0;r<n.length;r++){var o=n[r],a=this.fullImageHeight(o);a>t||(!i||o.s>i.s)&&((i=o).fullHeight=a)}return i}},renderLayout:function(e,t,n,i){n||t.addDivider();var r=(0,b.ny)(this._article,b.tG.Rendered);if(t.onDisposed((function(){return r.release()})),t.addLayout(this),!t.section()&&this._article.group()&&t.section(this._article.group()),!n){this.articleElm().removeClass().addClass("art"),e.title.type&&this.articleElm().addClass("art-t".concat(e.title.type+1)),this._article.StartBlockIdx&&!e.merged&&this.renderContinuedFromElm(e,t);var o=3|e.title.type<<3;e.title.split&&(o|=4),this._titleType=e.title.type,this.renderTitle(t,e.title.colspan,o)}if(e.images)for(var a=0;a<e.images.length;++a)e.images[a].colidx===n&&this.renderImageLayout(t,e.title,e.images[a]);else e.image&&e.image.colidx===n&&this.renderImageLayout(t,e.title,e.image);if(n){var s=this._columnsStates[n-1];if(!s)return;this._columnsStates[n]=this.renderText(t,s.blockIdx,s.lineIdx,0,i)}else this._columnsStates[0]=this.renderText(t,e.merged?0:this._article.StartBlockIdx||0,0,0,i);if(this._elm){var u=new _._({elm:this._elm.render(),colspan:1,top:this._elm.top(),height:this._elm.height(),smartFlowItemId:this._article.Id,type:_.W.Column});t.addCell(u)}if(delete this._elm,this._columnsStates[n])return!0},renderContinuedFromElm:function(e,t){var n=this,i=this._article.ContinuedFromPage===this._article.ContinuedFromPageName?v.ZP.format("TextView.ContinuedFromPage",this._article.ContinuedFromPage):v.ZP.format("TextView.ContinuedFrom",this._article.ContinuedFromPageName);if(e.title.colspan>1){var o=t.findAvailablePosition(g.Nv,0,!1),a=r('<a href="javascript:void(0)" class="continued" style="position:absolute;">'.concat(i,"</a>")).bind({"touchstart touchend mousedown mousemove mouseup MSPointerDown MSPointerUp":function(e){(e=e.originalEvent||e).stopPropagation?e.stopPropagation():e.cancelBubble=!0},"touchmove MSPointerMove":function(){return!1},click:function(e){n._context.textView.onContinuedFromClicked(e)}}).optimizeForTransform();this.articleElm().elm().append(a);var s=new _._({elm:a,colspan:e.title.colspan,top:o.top,height:g.Nv,smartFlowItemId:this._article.Id,type:_.W.Column,layout:e});t.addCell(s)}else this.columnElm(t,g.Nv).append('<a href="javascript:void(0)" class="continued">'.concat(i,"</a>")).checkpoint(g.Nv).addOnRenderedListener((function(e){e.children("a.continued").bind({"touchstart touchend mousedown mousemove mouseup MSPointerDown MSPointerUp":function(e){(e=e.originalEvent||e).stopPropagation?e.stopPropagation():e.cancelBubble=!0},"touchmove MSPointerMove":function(){return!1},click:function(e){n._context.textView.onContinuedFromClicked(e)}})}))},renderImageLayout:function(e,t,n){var i=this.renderOutsideImage(n.image,this.articleElm());if(i.checkpoint(n.image.fullHeight),!n.colidx&&1===n.colspan||n.colidx+n.colspan<=t.colspan&&(!t.split||n.colidx)||n.colidx>=t.colspan){var r=e.findAvailablePosition(n.image.fullHeight,0,!1,this._elm?[new _._(this._elm.render(),1,this._elm.top(),this._elm.height())]:void 0).top;this._elm&&(this._elm.height()?this._elm.maxHeight(this._elm.height()):(this._elm.remove(),delete this._elm));var o=new _._({elm:i.elm(),colspan:n.colspan,top:r,height:n.image.fullHeight,smartFlowItemId:this._article.Id,type:_.W.Figure});e.addCell(o)}else r=g.$0-g.$0%g.Nv-n.image.fullHeight,i.css("top",r),this._elm&&this._elm.top()+this._elm.maxHeight()>r&&this._elm.maxHeight(r-this._elm.top()),o=new _._({elm:i.elm(),colspan:n.colspan,top:r,height:n.image.fullHeight,smartFlowItemId:this._article.Id,type:_.W.Figure}),e.addCell(o)},addEllipsis:function(e){for(var t=e.cells(),n=null,i=t.length-1;i>=0;--i)if(!t[i].type()){n=t[i];break}n&&this._addEllipsis(n.elm)},_addEllipsis:function(){var e=(0,d.Oh)().parent();e._ellipsisElmRegistred||(e.tap(".readmore, .readmore-click-panel",T),e._ellipsisElmRegistred=!0)},estimatedColumnsCount:function(e){if(this._columnsCount>0)return this._columnsCount;var t=0;if(e){if(this._estimatedColumnsCount>=e)return this._estimatedColumnsCount;t=e*g.Fp}else e=Number.MAX_VALUE;var n=this.textLines(0,t,this._article.StartBlockIdx||0)/g.Fp;if(!n)return-1;if(n>e)return this._estimatedColumnsCount=n,n;n=Math.ceil(n);var i=this.layout(n);if(i.totalLines>this.textLines(i.title.type))return this._columnsCount=this._estimatedColumnsCount=n-.5,this._columnsCount;for(;n<e;){if(n+=Math.ceil((this.textLines(i.title.type)-i.totalLines)/g.Fp),(i=this.layout(n)).totalLines>this.textLines(i.title.type))return this._columnsCount=this._estimatedColumnsCount=n-.5,this._columnsCount;if(i.totalLines===this.textLines(i.title.type))return this._columnsCount=this._estimatedColumnsCount=n,this._columnsCount}return this._estimatedColumnsCount=n,this._estimatedColumnsCount},fullLayout:function(e,t){var n=new I(this,e);if(t&&(n.merged=!0),e.full)return n;if(n.full=!0,!this._article.Images||!this._article.Images.length)return n;var i,r=this.textLines(e.title.type,void 0,t),o=(g.Fp-g.xY)*g.Nv;if(e.image){i=[];for(var a=0;a<this._article.Images.length;++a){var s=this._article.Images[a];e.image&&s.Id===e.image.image.id?i.unshift(s):i.push(s)}}else i=this._article.Images;for(var u=this.titleHeightsByTitleLayout(e.title),c=[],l=0;l<u.length;++l){var d=g.Fp-g.xY-Math.ceil(u[l]/g.Nv);this._article.StartBlockIdx&&!t&&--d,c.push(d)}var h,p=null,f=[],m=[];for(a=0;a<i.length;++a){f.push(0);for(var v=g.YD;v>0;--v)if((s=this.image(i[a],v,o))&&!((w=this.fullImageHeight(s))>o)){f[a]=v;break}m[a]=f[a]}for(;;){var y=c.slice(0),_=void 0,b=[];for(a=0;a<i.length;++a)if(_=!1,v=m[a]){var w;if(s=this.image(i[a],v,o),(w=this.fullImageHeight(s))>o)break;s.fullHeight=w;for(var C=Math.ceil(w/g.Nv),P=0;;){var x=Number.MAX_VALUE;for(l=0;l<v&&(l+P>=y.length&&y.push(g.Fp-g.xY),!((x=Math.min(x,y[l+P]))<C));++l);if(x>=C)break;++P}for(b.push({image:s,colspan:v,colidx:P}),l=0;l<v;++l)y[l+P]-=C;_=!0}if(_){var S=-r;for(l=0;l<y.length;++l)S+=g.xY+y[l];if((!p||S<h)&&(p=b,h=S),h<=0)break}var T=!0;for(a=0;a<i.length;++a){if(m[a]>1){if(--m[a],!a&&e.image&&m[a]<e.image.colspan){m[a]=f[a];continue}T=!1;break}1===m[a]&&(m[a]=f[a])}if(T)break}if(p&&h<-g.Fp){var k=Math.floor(-h/g.Fp);for(p.sort((function(e,t){return e.colidx-t.colidx})),a=p.length-1;a>=0&&k>0;--a){var A=p[a],E=0;for(l=a-1;l>=0;--l){var Z=p[l];if(Z.colidx!==A.colidx){Z.colidx+Z.colspan===A.colidx&&(E=1);break}}if(k>E&&n.title.colspan===A.colidx+E&&++E,E>0){for(A.colidx+=E,l=a+1;l<p.length;++l)p[l].colidx+=Essign)(this,e),this._isAbstract=!1},tasks:function(){for(var e=[this._blockHeightTask.bind(this,0,0,0),this._blockHeightTask.bind(this,0,2,0),this._blockHeightTask.bind(this,0,0,3),this._blockHeightTask.bind(this,0,2,3),this.titleWidth.bind(this,4,0),this.titleWidth.bind(this,3,0),this.titleWidth.bind(this,2,0),this.titleWidth.bind(this,1,0),this.titleWidth.bind(this,0,0)],t=0;t<=4;++t)for(var n=1;n<=g.DO;++n)e.push(this.titleHeightsByColumns.bind(this,t,n,3|t<<3)),e.push(this.titleHeightsByColumns.bind(this,t,n,7|t<<3));return e},highlight:o.noop};var Z={title2ImageRel:function(e){var t;if(1!==e){var n="t2ir_".concat(e),r=this._stats[n];if(!r){var o=[this._mode,this._articleElm,this._elm];this._mode=1,delete this._elm,delete this._articleElm;var a=new h.d$;this.renderTitle(a,1);var s=this.renderImage(void 0,a,e,0);if(a.dispose(),delete this._elm,this.removeArticleElm(),!r)if(s)d=Math.min(Math.min(e,g.YD),Math.ceil((this.titleWidth(0,0)+g.ez)/g.G4)),s.postponed&&d>s.colspan||!s.postponed?this._stats[n]=r={title:{type:0,colspan:d},image:s}:this._stats[n]=r={title:{type:0,colspan:1},image:s};else{for(var u=Math.ceil(4*(this._article.SecNormRate||this._article.NormRate));u>1&&!((d=Math.min(Math.min(e,g.YD),Math.ceil((this.titleWidth(u,3)+g.ez)/g.G4)))<2);u--){var c=this.sectionElm().article().addClass("art art-t".concat(u+1)),l=c.createChild("header").css({position:"absolute",width:"".concat((0,g.FK)(d),"px")});if(this.renderMultipleColumnTitle(l,void 0,d,3|u<<3),l.height()<=g.$0/2&&(this._stats[n]=r={title:{type:u,colspan:d},image:s}),c.remove(),r)break}if(!r){var d=Math.min(Math.min(e,g.YD),Math.ceil((this.titleWidth(1,0)+g.ez)/g.G4));this._stats[n]=r={title:{type:d>1?1:0,colspan:d},image:s}}}t=(0,i.CR)(o,3),this._mode=t[0],this._articleElm=t[1],this._elm=t[2]}return r}},render:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={head:null,tail:null,count:0};if((0,o.isNumber)(e[0])){for(var i=e[0],r=this.layout(i).setCurrent(),a=!1,s=function(e){var t=n.tail=new h.d$(n.tail).articleIdx(u._article.Idx).columnIdx(e).articleColumnsCount(i);n.head||(n.head=t),a=u.renderLayout(r,t,e);var o=(0,b.ny)(u._article,b.tG.Rendered);t.onDisposed((function(){return o.release()}))},u=this,c=0;c<i;c++)s(c);n.tail&&(a||this._article.Images&&this._article.Images.length>(r.image?1:0)||this._article.isPreview())?this.addEllipsis(n.tail):r.full=!0,n.count=i}else{var l=e[0],d=e[1];(r=this.currentLayout())||(r=this.layout(1).setCurrent()),r=this.fullLayout(r,d);var p,f=function(e){var t=n.tail=new h.d$(n.tail).articleIdx(m._article.Idx).columnIdx(n.count);n.head||(n.head=t),e=m.renderLayout(r,t,n.count,l);var i=(0,b.ny)(m._article,b.tG.Rendered);t.onDisposed((function(){return i.release()})),p=e},m=this;for(a=!0;a;n.count++)f(a),a=p;for(var g=n.head;g;g=g.next())g.articleColumnsCount(n.count)}return new h.JD(n.head,n.tail)},estimatedColumnsCount2:function(e){var t;if(this._columnsCount>0)return this._columnsCount;if(e&&this._estimatedColumnsCount>=e)return this._estimatedColumnsCount;var n=0;if(this._article.Blocks&&this._article.Blocks.length){for(var r=0,o=0;o<this._article.Blocks.length;o++)if(r+=this.blockHeight(o),e&&(n=r/g.$0)>=e)return this._estimatedColumnsCount=n,n;n=Math.ceil(n||r/g.$0)}else n=1;this._mode=1;for(var a=[this._columnsStates,this._articleElm];;){var s=null;for(this._columnsStates=[],delete this._articleElm,o=0;o<n;o++)s=new h.d$(s),this.render(s,n,o);for(var u=s.height(),c=this._columnsStates[n-1];s;)s=s.dispose(-1);if(this.removeArticleElm(),t=(0,i.CR)(a,2),this._columnsStates=t[0],this._articleElm=t[1],!c)return this._columnsCount=this._estimatedColumnsCount=n-1+u/g.$0,this._mode=0,this._columnsCount<1&&g.$0-u<g.Nv&&(this._columnsCount=1),this._columnsCount;if(e&&n>=e)return this._estimatedColumnsCount=n,this._mode=0,n;n++}},highlight:function(e){for(var t=e.articleColumnsCount(),n=this._article,i=p.Z.replace(this._useHyphenatedTitle?n.HyphenatedTitle:n.Title,n.Data),o=n.Subtitle?p.Z.replace(n.Subtitle,n.Data):null,a=0;a<t;++a){for(var s=e.cells(),u=function(e){var t=s[e],a=t.elm;switch(t.type){case _.W.Column:var u={};a.find("header > hgroup > h1").html(i),o&&a.find("header > hgroup > h2").html(o),a.children("div[bidx]").each((function(){var e,t=r(this),i=parseInt(t.attr("bidx"),10);i in u?e=u[i]:u[i]=e=p.Z.replace(n.Blocks[i],n.Data),t.children("p").html(e)}));break;case _.W.Figure:break;case _.W.Header:a.find("hgroup > h1").html(i),o&&a.find("hgroup > h2").html(o)}},c=0;c<s.length;++c)u(c);e=e.next()}}},M={render:function(e,t,n,i,r){if(this._article){if(n?this._articleElm=this._elm=n.createChild("article").addClass("art art-stack").top(n.height()).maxHeight(g.$0-n.height()).attr({aid:this._article.Id,type:e,lines:i||0}):(this.removeArticleElm(),delete this._elm),t.articleColumnsCount(1),!this._mode){var o=(0,b.ny)(this._article,b.tG.Rendered);t.onDisposed((function(){return o.release()})),t.addLayout(this),!t.section()&&this._article.group()&&t.section(this._article.group())}n&&(this._mode|=2),this._useHyphenatedTitle=this.titleWidth(e,3).min+g.ez>g.G4;var a=!1;switch(e){case 0:this.renderTitle(t,1),this.renderImage(void 0,t,1,0),(s=this.renderText(t,0,0,i))?(arguments.length>4&&this.renderText(t,s.blockIdx,s.lineIdx,r),(arguments.length<=4||this._article.isPreview())&&(a=!0)):this._article.isPreview()&&(a=!0);break;case 1:this.renderTitle(t,1,1),this.renderImage(void 0,t,1,0),(s=this.renderText(t,0,0,i))&&arguments.length>4&&this.renderText(t,s.blockIdx,s.lineIdx,r),a=!0;break;case 2:this.renderTitle(t,1,0),this.renderImage(void 0,t,1,0),(s=this.renderText(t,0,0,i))&&arguments.length>4&&this.renderText(t,s.blockIdx,s.lineIdx,r),a=!0;break;case 3:this.renderTitle(t,1,1),(s=this.renderText(t,0,0,i))&&arguments.length>4&&this.renderText(t,s.blockIdx,s.lineIdx,r),a=!0;break;case 4:var s;this.renderTitle(t,1,0),(s=this.renderText(t,0,0,i))&&arguments.length>4&&this.renderText(t,s.blockIdx,s.lineIdx,r),a=!0}if(this._mode^=2,n)this._elm.render(),delete this._articleElm;else{var u=new _._({elm:this._elm.render(),colspan:1,top:this._elm.top(),height:this._elm.height(),smartFlowItemId:this._article.Id,type:_.W.Column});t.addCell(u)}a&&this._addEllipsis(this._elm),delete this._elm}},height:function(e){var t;if(!this._heights[e]){var n=[this._articleElm,this._elm];delete this._articleElm,delete this._elm,this._mode=1;var r=new h.d$,o=this.sectionElm().column().addClass("col").css({position:"absolute",top:"0px",width:"".concat((0,g.FK)(),"px")});this.render(e,r,o,g.xY);var a=o.height();o.removeChildren(),this.render(e,r,o);var s=o.height();o.remove(),this._heights[e]={min:a,max:s},this._mode=0,r.dispose(),t=(0,i.CR)(n,2),this._articleElm=t[0],this._elm=t[1]}return this._heights[e]},estimatedColumnsCount:function(){return this._columnsCount>0?this._columnsCount:this._estimatedColumnsCount>0?this._estimatedColumnsCount:(this._columnsCount=this._estimatedColumnsCount=this.height(0).max/g.$0,this._columnsCount)},highlight:function(e){var t=this._article,n=e.cells()[0].elm().children("article[aid=".concat(t.Id,"]")),i=n.find("header > hgroup > h1"),o=i.find("a.lbl-comment").detach();i.html(p.Z.replace(this._useHyphenatedTitle?t.HyphenatedTitle:t.Title,t.Data)).append(o),t.Subtitle&&n.find("header > hgroup > h2").html(p.Z.replace(t.Subtitle,t.Data));var a=this,s={};n.children("div[bidx]").each((function(){var e=parseInt(r(this).attr("bidx"),10);e in s?this.parentNode.replaceChild(this,s[e]):s[e]=a.highlightRec(this)}))},highlightRec:function(e){if(!e||"true"===r(e).attr(g.aW))return e;p.Z.flatten(e);for(var t=[].slice.call(e.childNodes,0),n=0;n<t.length;n++){var i=t[n];if(3===i.nodeType){var o=p.Z.replace(i.data,this._article.Data),a=document.createElement("div");a.innerHTML=o,e.replaceChild(a,i),r(a).contents().unwrap()}else 1===i.nodeTyurn e}};function D(e){this._page=e}D.prototminHeight:function(){return 6*g.Nv},article:function(){eset:fpage=e)},tasks:function(){return[]},page:function(){return this._page},renderByline:function(e){if(e&&g.Sn){var t=this._page.Page1.Issue;e.elm().append(r('\n            <a href="javascript:void(0)" class="art-byline">\n                <span class="art-source">'.concat(t.Title,'&nbsp;</span>\n                <span class="art-date">\n                    <time datetime="').concat(t.Date,'" pubdate>').concat(t.ShortDateString,'</time>\n                </span>\n                <span class="art-page">').concat(this._renderPageName(),"</span>\n            </a>")))}},_renderSocialColumn:function(e,t,n){var i=new h.JD(t,t);if(!g.Q8)return i;var r=e&&e.page(),o=r&&r.Page1&&r.Page1.SocialInfo;if(!o||!o.Bookmark)return i;var a=new f.Y,s=a.getTitle(o),c=a.getTitleClass(o),l=(0,d.Oh)().section({id:"social-".concat(o.Bookmark.WebName),title:s,className:c,styles:{width:"".concat(n,"px")}});e.on("unlocked",(function(){l.remove()}));var p=l.column().css({position:"absolute",top:"0px",width:"".concat(n,"px")}),v=(new h.d$).addLayout(e).type(h.Xp.SocialInfo).ar){a.positionChanged(v.isVisible())};m.Z.bind(u.Z.current.textView,"positionchanged",y);var w=(0,b.ny)(r,b.tG.Rendered);v.onDisposed((function(){m.Z.unbind(u.Z.current.textView,"positionchanged",y),a.dispose(),w.release()})),v.addCell(new _._(p.elm(),1,0,g.$0));var C=p.createChild("div").addClass("group-panel pg-cover").elm();a.render(C,{data:o,canComment:!1});var I=(i=i.prepend(v)).count();return i.forEach((function(e,t){e.columnIdx(t).articleColumnsCount(I).section(l).reion(){return this._page.Page1.Name},renderImage:function(e,t,n){if(e){var i="";n&&(i="; height: ".concat(n,"px"));var o,a=this._page.Page1.Issue.Id,s=this._page.PageN1,u=this._page.Page1.BookmarkId||"",c='<span class="art-options-call '.concat(u?"bookmarked":"",'" bookmarkId="').concat(u,'" issueId="').concat(a,'" pageNo="').concat(s,'" data-thumb-bookmark><span></span></span>');e.elm().prepend(r('<a href="javascript:void(0)" class="thumb" style="left: 0px'.concat(i,'"><span>').concat(this._renderImage(t),"</span>").concat(c,"</a>")).bind({"touchstart mousedown MSPointerDown":function(e){e.previon(e){e.preventDefault(),o="move"},"click touchend":function(e){if(!r(e.target).closest("[data-thumb-bookmark]").length)if(o!==e.clientX)e.preventDefault();else{var t={article:{Issue:{Id:a},Page:s}};l.Z&&l.Z.pageView&&l.Z.pageView.enabled(null,t)&&l.Z.pageView.activate(null,t)}}}))}},_imageHeight:function(e){var t=this._page.Page1;if(t){var n=(0,a.My)(t.PageN,{width:t.W,height:t.H},{width:e});return Math.floor(t.H/100)*n}},_renderImage:function(e){var t=this._page.Page1,n=(0,a.x8)(t.Issue.Id,e,t.PageN,r.support.retina),i=(0,a.x8)(t.Issue.Id,960,t.PageN,r.support.retina),o={width:t.W,height:t.H},s=(0,a.My)(t.PageN,o,{width:960});return'<img src="'.concat(n,'" nd_scale="').concat(s,'"  nd_maxScaleUrl="').concat(i,'">')},_getParamFromUrl:function(e,t){var n=RegExp("[?&]".concat(t,"=([^&]*)")).exec(e);return n&&decodeURIComponent(n[1].replace(/\+/g," "))},render:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!this._page||!this._page.Page1)return this._page?s.Z.log("Unable to render page: profileId - ".concat(this._page.ProfileId,", Page - ").concat(this._page.PageN1)):s.Z.log("Unable to render page: page is null"),!arguments.length||(0,o.isNumber)(e[0])?Promise.reject():e[0];var n=g.G4-g.ez,i=(0,b.ny)(this._page,b.tG.Rendered);if(!arguments.length||(0,o.isNumber)(e[0])){var r=new h.d$;r.onDisposed((function(){return i.release()}));var a=this.sectionElm().column().addClass("col").css({position:"absolute",top:"0px",width:"".concat(n,"px")});this._elm=a.createChild("article").addClass("page page-stack").top(a.height()).maxHeight(g.$0-a.height()),r.addDivider(),r.addLayout(this),r.articleColumnsCount(1),this.renderByline(this._elm),this.renderImage(this._elm,n),this._elm.render(),r.addCell(new _._(a.elm(),1,this._elm.top(),this._elm.height()));var u=this._renderSocialColumn(this,r,n);return Promise.resolve(u)}var c=e[0]||(new h.d$).columnIdx(0);c.onDisposed((function(){return i.release()}));var l=e[1];c.addDivider(),c.addLayout(this);var d=this.sectionElm().column().addClass("col").css({position:"absolute",top:"0px",width:"".concat(n,"px")});this._elm=d.createChild("article").addClass("page page-stack fadeout").top(c.height()).maxHeight(g.$0-d.height()),this.renderByline(this._elm),this.renderImage(this._elm,n,l.height-this._elm.elm().height()-g.Nv);var p=c.findAvailablePosition(this._elm.elm().height(),0,!0);if(p){this._elm.render();var f=new _._({elm:d.elm(),colspan:1,top:p.top,height:this._elm.elm().height(),layout:this});c.addCell(f),l.actualHeight=this._elm.elm().height()}else this._elm=null,s.Z.log("Render page: unable find position for elm");return c},renderSingleColumnLayout:function(e,t){return this.render(e,t)},highlight:o.noop,estimatedColumnsCount:function(){return.1},height:function(e){if(!(e<this.minHeight())){var t=g.G4-g.ez,n=this.sectionElm().column().addClass("col").css({position:"absolute",visibility:"hidden",top:"0px",width:"".concat(t,"px")});this._elm=n.createChild("article").addClass("page").top(n.height()).maxHeight(g.$0-n.height()),this._page&&this._page.Page1&&this.renderByline(this._elm),this._elm.render();var i=this._elm.elm().height()+this._imageHeight(t);if(i<e){var r=i%g.Nv;r&&(i+=g.Nv-r)}var o={layout:null,height:i<e?i:e};return n.remove(),this._elm=null,o}},dataItem:function(){return this._page}};var L=function(){var e=null,t=null,n=0;function i(e){return 2===e.Type?y.Z.getId(e.ProfileId,e.PageN1,e.PageN2):e.Language===e.OriginalLanguage?e.Id:e.Id+e.Language}function r(){t&&((0,o.forIn)(t,(function(e){e.reset()})),t=null)}function a(a){if(arguments.length){if(a){if(!e)return;var s=e[i(a)];if(!s)return;s.reset(a)}}else{e&&(t&&r(),t=e,e=null),n=0,"textViewRenderersColumnElm"in(d=u.Z.current)&&(d.textViewRenderersColumnElm.remove(),delete d.textViewRenderersColumnElm);var c=P(),nction(e,t){e.remove(),delete c[t]}))}var d}return{renderer:function(t,r){e||(e={});var o=i(t),a=e[o];return a||(a=2===t.Type?new D(t):new E(t),e[o]=a,n++),2!==t.Type&&!r&&a.isAbstract()&&(a.estimatedColumnsCount(1)<1?a.extend(M):a.extend(Z)),a},remove:function(t){e&&(delete e[i(t)],--n||(e=void 0))},cleanup:r,reset:a,resize:function(){a()},articleElm:x,columnElm:S}}();t.Z=L},74403:function(e,t,n){"use strict";var i,r,o,a,s,u,c=n(20384),l=n(40180),d=n(2099),h=n(3678),p=n(60811),f=n(24458),m=n(58653),g=(n(46720),n(17447)),v=n(66781),y=n(70516),_=n(34336),b=n(6677),w=n(80053),C=(n(40605),n(29168),n(33941),n(14003),n(55193),n(14347)),I=n(4169),P=n(62980),x=d.Z.pages,S=!1,T={};functio{})}function A(e,t){return T[t](e)}var E=function(e,t){return t?e+'="'+t+'"':""},Z={Image:0,Text:1};function M(){var e=c.nd.viewer.views.getActiveViewName();return e===f.n3.PagesView?Z.Image:e===f.n3.TextView||e===f.n3.External?Z.Text:-1}function D(){return c.nd.viewer.views.getActiveViewName()===f.n3.External}function L(e,t){var n=t||{};return!n.page&&x.getFirstActivePage()&&(n.page=x.getFirstActivePage().pageNumber()),n.issue=n.issue||d.Z.issue(),e===Z.Image?(v.Z.resume(),_.Z.goView(f.n3.PagesView,n)):e===Z.Text?(v.Z.pause(),_.Z.goView(f.n3.TextView,n)):void 0}function N(){M()===Z.Text?(c("#btn_TextMode").addClass("sel"),c("#btn_ImgMode").removeClass("sel")):(c("#btn_TextMode").removeClass("sel"),c("#btn_ImgMode"}function R(){N()}function V(){N()}function B(e,t){var n=e;t.fastHtml('<a href="javascript:void(0)">'+(n.fullName||item.section)+"</a>")}function F(e,t){M()==Z.Image?(!I.Z.get("UI.Views.PageView.ManagePageThumbnails",!1)||I.Z.get("UI.Views.PageView.EnablePageThumbnails",!0)&&C.Z.isLogin()&&d.Z.coudlIssueBeRead())&&function(e,t){for(var n=e,i=n.pages,r=[],o=c.support.retina,a=o?550:280,s=o?2:1,u=0;u<i.length;++u){var l=i[u],d=l.calculateThumbScale(null,a),h=l.calculateThumbScale(null,a,!0),p=l.calculateSize(d),f=Math.floor(p.height/s),m=Math.floor(p.width/s),g=f,v=l.otherSpread();if(v){var y=v.calculateThumbScale(null,a),_=Math.floor(v.calculateSize(y).height/s);g=Math.max(f,_)}var b=o?f:"",w=E("height",b),C=E("width",""),P="thumb_"+l.pageNumber();r.push({id:P,pageName:l.pageName(),pageNumber:l.pageNumber(),isSpreadLeft:l.isSpreadLeft(),isSpreadRight:l.isSpreadRight(),imgSrc:l.buildThumbUrl(h)+"&nd_id="+P,imgHeight:b,imgWidth:"",imgHeightAttr:w,imgWidthAttr:C,imgMinHeight:g+"px",imgMinWidth:m+"px",imgMarginBottom:g-f+"",backgroundColor:l.bgcolor()})}var x={sectionName:n.name,pages:r,sectionFollowEnabled:I.Z.get("ui.FeedSettings.allowFollowSectionOnSlider",!1)};t[0].innerHTML=A(x,"SliderPreviewThumbSection"),t.find("header h1").hide().each((function(e,t){var n=t.parentNode;n.style.width=n.offsetWidth+"px"})).show()}(e,t):function(e,t){for(var n=e,i=n.pages,r=[],o=0;o<i.length;++o)for(var a=(x=i[o]).articles()||[],s=0;s<a.length;s++){var u=a[s];u._refToPageObj=x,r.push(u)}var l=[];for(s=0;s<r.length;s++){var d=r[s];d.NRate||(d.NRate=d.Rate,d.TextLength=d.Title.length+(d.Text?d.Text.length:0),d.TextLength<100&&(d.NRate=1)),l.push(d.NRate)}l.sort(),l.reverse();var h=l[Math.floor(.1*l.length)||0],p=l.length>1?l[Math.floor(.3*l.length)||1]:0;function f(e){return!!(e.NRate>=h&&e.Image)&&!(e.Image.Width/e.Image.Height<1.1||Math.floor(30200/e.Image.Width)>400)}function m(e){return!!(e.NRate>=p&&(e.Image||e.TextLength>=100))}var g=[],v=null,y=0;for(s=0;s<r.length;s++){var _=r[s],b=null;if(s+1<r.length&&(b=r[s+1]),0!==y&&3!==y||!b||f(_)||!f(b))if(2===y&&f(_)&&b&&!f(b))r[s]=b,r[s+1]=_,s--;else{var w=_.Image,C=_.PageNumber;v&&3!==y||(y=0,v={articles:[]},g.push(v));var P=1;y<3&&(P=f(_)?3:m(_)?2:1,P=Math.min(3-y,P)),2==P&&0==y&&b&&b.Rate>_.Rate&&(P=1),1!=P||b||(P=Math.min(3-y,2)),y+=P;var x,S="athumb_"+_.Id,T=0x800000000000,k={id:S,title:_.Title,text:_.Text,pageNumber:C,articleId:_.Id,rowSpan:P,isExternal:function(){return c.nd.longBitwiseAnd(this.articleId,T)==T}};if(v.articles.push(k),w&&(x=_._refToPageObj)){var E=60;3==P&&(E=302);var Z=c.support.retina,M=Math.floor(100*(E+2)/w.Width);k.imgWidth=Math.floor(w.Width*M/100),k.imgHeight=Math.floor(w.Height*M/100),k.imgMaxWidth=Math.min(E,k.imgWidth-2),k.imgMaxHeight=k.imgHeight-2,k.imgRetina=Z,k.imgCssWidth="auto",Z&&(M*=2,k.imgCssWidth="".concat(k.imgWidth,"px")),w.Url?k.imgSrc=w.Url+(w.Url.indexOf("?")>=0?"&":"?")+"scale="+M:k.isExternal()?k.imgSrc=w.Key+(w.Key.indexOf("?")>=0?"&":"?")+"scale="+M:k.imgSrc=x.buildPictureUrl(M,w.Uid,w.Key)+"&nd_id="+S}}else r[s]=b,r[s+1]=_,s--}if(0!=g.length){var D={sectionName:n.name,columns:g,sectionFollowEnabled:I.Z.get("ui.FeedSettings.allowFollowSectionOnSlider",!1)};t[0].innerHTML=A(D,"SliderPreviewTextSection"),t.find("header h1").hide().each((function(e,t){var n=t.parentNode;n.style.width=n.offsetWidth+"px"})).show()}else t.width(0)}(e,t)}function O(){if(S){if(Z.Text===M())return void((e=x.activePages()).length>0&&(i=e[0].GetSliderSection())&&i.isSelected(!0));var e;if((e=x.activePages()).length>0){var t=Math.floor(e.length/2),n=e[t],i="function"==typeof n.GetSliderSection?n.GetSliderSection():void 0;if(e.lastGotoPage&&e.lastGotoPage.isActive()&&e.lastGotoPage.GetSliderSection()&&(i=(n=e.lastGotoPage).GetSliderSection()),i||(n=e[t-1])&&n.isActive()&&(i=n.GetSliderSection()),i||(n=e[t+1])&&n.isActive()&&(i=n.GetSliderSection()),i&&!i.isSelected()){var r=n.leftPageIfSpread(),o=n.rightPageIfSpread(),a=!1;r&&r!=n&&r.isActive()&&r.GetSliderSection()&&r.GetSliderSection().isSelected()&&(a=!0),o&&o!=n&&o.isActive()&&o.GetSliderSection()&&o.GetSliderSection().isSelected()&&(a=!0),!1===a&&i.isSelected(!0)}}}}function z(){var e=[],t=D()?c.nd.viewer.external:y.Z;Z.Text===M()?c.each(t.visibleArticles()||[],(function(t,n){var i="athumb_"+n.Id,r=document.getElementById(i);r&&e.push(r)})):c.each(x.activePages(),(function(t,n){var i="thumb_"+n.pageNumber(),r=document.getElementById(i);r&&e.push(r)})),U(),e&&e.length>0&&s.ensureElmsVisibleInPreview(c(e),!0)}function U(){return h.U().then((function(e){var t=c(".pp-slider");t.find(".is-following").removeClass("is-following"),t.find(".btn-follow .pri").removeClass("pri-following").addClass("pri-follow"),l.chain(e.sections||[]).filter({cid:d.Z.cid()}).each((function(e){var t=e.sectionName,n=creturn c(this).data("section")===t}));n.addClass("is-following"),n.find(".pri.pri-follow").removeClass("pri-follow").addClass("pri-following")})).value()}))}function H(e,t){return c.nd.user.isLogin()?h.U().then((function(n){n.sections||(n.sections=[]);var i=l.filter(n.sections,{cid:e,section.sections=l.without(n.sections,e)})):n.sections.push({cid:e,sectionName:t,issueName:d.Z.contentName()}),h.t(n).then(U)})):w.default.signIn(rn this.ThumbsView_Section=e,this}var q=c.nd.delegate(!0),G={previewVisibleChanged:q,previewVisible:function(){return s.sliderPreviewVisible()},hidePreview:function(){s.hidePreview(!0)},init:function(e){u=e;var t,n="toolbarBottom",l="toolbarBottomPreview";c('<div><div class="pp pp-thumb"><div class="pp-in"><div class="pp-slider"></div></div></div></div>').attr("id",l).css({zIndex:2,position:"absolute",width:"100%"}).appendTo(e.elm()),k("SliderBottom",'<div id="<%= data.id %>" class="toolbar toolbar-bottom" style="z-index: 3"><div class="toolbar-in" id="toolbarContent"><div class="toolbar-switch switch-view"><div class="toolbar-switch-in"><button class="sw-page" id="btn_ImgMode" title=""><span>Paper</span></button><button class="sw-text" id="btn_TextMode" title=""><span>Text</span></button></div></div><div class="toolbar-slider-left"><a>Prev</a></div><div class="toolbar-slider"><div class="toolbar-slider-in"><ul></ul><div class="toolbar-slider-leftcrop"></div><div class="toolbar-slider-rightcrop"></div></div></div><div class="toolbar-slider-right"><a>Next</a></div></div></div>',{variable:"data"}),e.elm()[0].innerHTML+=A({id:n},"SliderBottom"),a=c("#"+n,e.elm()),k("SliderPreviewThumbSection",'<header><h1><%= data.sectionName %></h1><% if (data.sectionFollowEnabled) { %><a href="javascript:void(0)" class="btn-icon btn-follow" title="Follow" data-section="<%- data.sectionName %>"><span class="pri pri-follow" aria-hidden="true"></span><span>Follow</span></a><% } %></header><% _.forEach(data.pages, function(page) { %><p id="<%= page.id %>" <% if (page.isSpreadLeft){ print(" class=\'p-left\'"); } %><% if (page.isSpreadRight){ print(" class=\'p-right\'"); } %>><em><%= page.pageName %></em><a page-number="<%= page.pageNumber %>" href="javascript:void(0)"><span style="background-color: <%= page.backgroundColor %>"><span style="display:inline-block;padding:0;margin:0;border:0;overflow:hidden; height:<%= page.imgMinHeight %>; width:<%= page.imgMinWidth %>;"><img nd_uid="<%= page.id %>" src="<%= page.imgSrc %>" <%= page.imgWidthAttr %> <%= page.imgHeightAttr %> style="margin-bottom:<%= page.imgMarginBottom %>px;"/></span></span></a></p><% }) %>',{variable:"data"}),k("SliderPreviewTextSection",'<header><h1><%= data.sectionName %></h1><% if (data.sectionFollowEnabled) { %><a href="javascript:void(0)" class="btn-icon btn-follow" title="Follow" data-section="<%- data.sectionName %>"><span class="pri pri-follow" aria-hidden="true"></span><span>Follow</span></a><% } %></header><% _.forEach(data.columns, function(column) { %><div class="pp-slider-col"><% _.forEach(column.articles, function(article) { %><article class="art-t<%= article.rowSpan %>"><a id="<%= article.id %>" page-number="<%= article.pageNumber %>" article-id="<%= article.articleId %>" href="javascript:void(0)"><% if (article.imgSrc) { %><span style="height:<%= article.imgMaxHeight %>px; width:<%= article.imgMaxWidth %>px;" test-width="<%= article.imgWidth %>"><img nd_uid="<%= article.id %>" src="<%= article.imgSrc %>" style="width:<%= article.imgCssWidth %>;" alt=""/></span><% } %><em><%= article.title %></em><%= article.text %></a></article><% }) %></div><% }) %>',{variable:"data"}),r={id:l,sliderSelector:t="#"+l,innerLayerSelector:t+" .pp-slider",outerLayerSelector:t+" .pp-in",pagesFilter:"p",itemElementName:"section",itemRenderer:F},i={id:n,sliderSelector:t="#"+n,innerLayerSelector:t+" ul",outerLayerSelector:t+" .toolbar-slider-in",itemElementName:"li",itemRenderer:B,leftCropSelector:t+" .toolbar-slider-leftcrop",rightCropSelector:t+" .toolbar-slider-rightcrop"},(s=new c.nd.ui.sliderWithPreview({sliderCfg:i,previewCfg:r})).userSelectItem((function(e){var t=e.value.pages[0];M()==Z.Text?(D()?c.nd.viewer.external:y.Z).jumpToPage(t.pageNumber()):c.nd.navigation.showIssuePage(t.pageNumber())})),s.sliderPreview_OnShowing(z),c(".toolbar-slider-left").click((function(){s.showPrevPage()})),c(".toolbar-slider-right").click((function(){s.showNextPage()})),c("#btn_TextMode").click((function(){L(ode").clickon f(){q(s.sliderPreviewVisible())}return h[P.D.right]=function(){s.showNextPage()},h[P.D.left]=function(){s.showPrevPage()},c(document).on({keyUp:function(e){if(s.sliderPreviewVisible()){var t=h[e.keyCode];"function"==typeof t&&t.call(this)}}}),c(".pp-slider").delegate("a:not(.btn-follow)","click touchend",(function(){if(!c.nd.drag.hasBeenInDrag()){if(Z.Image===M()){var e=parseInt(this.getAttribute("page-number"),10);e&&c.nd.navigation.showIssuePage(e)}else{var t=this.getAttribute("article-id");t&&c.nd.navigation.showArticle(t,d.Z.issue())}s.hidePreview()}})),c(".pp-slider").delegate("a.btn-follow","click touchend",(function(e){if(c.nd.drag.hasBeenInDrag())return!1;var t=!c(e.currentTarget).hasClass("is-following"),n=c(this).data("section");return H(d.Z.cid(),n).then((function(){if(t){var e=g.ZP.get("Messages.SectionHasBeenAddedToNewsFeed").replace("{0}",n);e&&c.nd.alert().show(e)}})),!1})),o=c("#"+l,e.elm()),p.rh.subscribe((function(){U()})),e.resize((function(){s.onContainerResized()})),e.hide(),c.nd.viewer.views.activeViewChanging(R),c.nd.viewer.views.activeViewChanged(V),s.sliderPreview_OnShowing(f),s.sliderPreview_OnHiding(f),s.sliderPreview_OnHided(f),g.ZP.loaded().then((function(){c("#btn_ImgMode").attr("title",g.ZP.get("PR.Web.PageViewToolbarSwitchTooltip","View articles and entire issues exactly as they appear in print")),c("#btn_TextMode").attr("title",g.ZP.get("PR.Web.TextViewToolbarSwitchTooltip","New articles will appear in an easy-to-read horizontal stream"))})),this},enable:function(e){S=e,u&&(e?u.show():(s.hidePreview(!0),u.hide()))},onActivePagesChanged:function(){meout((function(){O._timeout=0,O()}),1))},renderViewerPages:function(){Promise.all([I.Z.loaded(),g.ZP.loaded()]).then((function(){!function(){if(S){for(var e,t=M()===Z.Text&&d.Z.layoutValidForSmartFlow()&&d.Z.enableSmart(),n=new c.nd.ui.sliderItemsCollection,i=x.mostLeftPage();i;i=i.rightPage())if(i.GetSliderSection=j,i.SetSliderSection=W,i.SetSliderSection(null),!t||i.articles()&&i.articles().length){var r,u=i.section(),l=i.pageName()||i.pageNumber();u&&parseInt(u,10)!==i.pageNumber()?(I.Z.get("UI.Views.ThumbnailView.SectionName.Normalized",!0)&&(u=u.replace(new RegExp(/\s*\d\s*/g),"")),r=l+" "+u):r=u="".concat(g.ZP.get("PR.Web.ThumbnailView.Page","Page")," ").concat(l),e&&e.name===u||(e=new c.nd.ui.sliderItem({id:n.getLength().toString(),name:u,fullName:r,pages:[]}),n.add(e)),e.pages.push(i),i.SetSliderSection(e)}n.getLength(),a.find(".toolbar-switch").css("display",d.Z.layoutAvailable()?"":"none"),M()==Z.Text?o.find(".pp").removeClass("pp-thumb").addClass("pp-text"):o.find(".pp").removeClass("pp-text").addClass("pp-thumb"),s.setItems(n),O()}}()}))},renderModesAvailable:function(){m.Z.textView.enabled().then((function(e){var t=a.find(".toolbar-switch");e?t.show("fast"):t.hide("fast")})).catch((function(e){b.Z.error(e)}))},switchToTextView:function(e){return L(Z.Text,e)},switchToImageView:function(e){return L(Z.Image,e)}};c.nd.viewer.thumbsView2=G,t.Z=G},26049:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return At},enableActionMenu:function(){return St},getSearchText:function(){return xt},registerView:function(){return kt},resetSearchText:function(){return Pt},searchMenuText:function(){return It},show:function(){return wt},showSearchMenu:function(){return Ct},update:function(){return Tt}});var i=n(22970),r=n(20384),o=n(60231),a=n(40180),s=n(2099),u=n(48921),c=n(88243),l=n(98439),d={backEnable:!1,homeButtonEnable:!0,opinionButtonEnable:!1,headerClass:"toolbar-hometitle",header:"ToolbarTop.Home",enableFullDateView:!0,isTitleDisabled:!1,titleEnable:!1,userInfoEnable:!0,showSearch:!0,signInEnabled:!0,showPostButton:!1,postAction:null,isPostDisabled:!1,actionMenuEnable:!0,showBookmarkName:!1,showMonitorName:!1,showNewpaperName:!1,actionMenuOptions:[],actionMenuController:null,newPostButtonVisible:!1,hideHotZoneButton:!1,showLogo:!0,clickableLogo:!0,logoUrl:"",openLogoUrlInNewTab:!1,topBarPublicationsDropdown:!1,showLogonName:!1},h=function(){function e(e){this._viewerApp=e.viewerApp,this._viewerPages=e.viewerPages,this._user=e.user,this._userInfo=e.userInfo,this._monitors=e.monitors,this._configManager=e.config,this._searchManager=e.searchManager,this._res=e.res,this._viewerViews=e.viewerViews,this._viewerNames=e.viewerNames,this._monitorsLoader=e.monitorsLoader,this._bookmarksLoader=e.bookmarksLoader,this._eventManager=e.eventManager,this._searchMenu=e.searchMenu,this._searchCatalogMenu=e.searchCatalogMenu,this._viewsConfig=[]}return e.prototype.getSearchParams=function(){return this._searchManager.getSearchParams()},Object.defineProperty(e.prototype,"_globalConfig",{get:function(){return{showLogo:this._configManager.get("ui.TopToolbar.DisplayLogo",!0),clickableLogo:this._configManager.get("ui.TopToolbar.ClickableLogo",!0),logoUrl:this._configManager.get("ui.TopToolbar.LogoUrl",""),openLogoUrlInNewTab:this._configManager.get("ui.TopToolbar.OpenLogoUrlInNewTab",!1),topBarPublicationsDropdown:this._configManager.get("ui.TopToolbar.TopBarPublicationsDropdown",!1),showSearch:this._configManager.get("ui.TopToolbar.SearchEnabled",!0),signInEnabled:this._configManager.get("ui.TopToolbar.SignInEnabled",!0),actionMenuEnable:this._configManager.get("ui.TopToolbar.ConfigActionMenuEnabled",!1),showLogonName:this._configManager.get("ui.TopToolbar.ShowLogonName",!1),showIssueDate:this._configManager.get("ui.TopToolbar.ShowIssueDate",!0)}},enumerable:!1,configurable:!0}),e.prototype._initUser=function(){var e=this;this._eventManager.trigger("userLoginStateChanged",this,this._user.isLogin()),this._user.isLogin()&&this._userInfo.load(!0).then((function(){e._eventManager.trigger("userInfoChanged",e,e._getUserInfo())}))},e.prototype._getUserInfo=function(){return{photo:{url:this._userInfo.photo.url},nickName:this._userInfo.nickName}},e.prototype._setHeader=function(e){var t=this;(0,o.isObservable)(e)&&(e.subscribe((function(n){var i=t._res.val(n)||n;e={title:i,config:t._config},t._eventManager.trigger("headerChanged",t,e)})),e=e()),"string"==typeof e?e={title:e,config:this._config}:e.config=this._config,this._eventManager.trigger("headerChanged",this,e)},e.prototype._hasCustomHeader=function(e){return e===this._viewerNames.TextView||e===this._viewerNames.Home||e===this._viewerNames.PagesView||e===this._viewerNames.Bookmarks||e===this._viewerNames.Monitors||e===this._viewerNames.ReadingMap},e.prototype._getCid=function(){return new Promise((function(e,t){var n=s.Z.cid();n?e(n):s.Z.issueLoaded((function(){(n=s.Z.cid())?e(n):t()}))}))},e.prototype._setConfig=function(e){var t=this;this._config=(0,a.extend)({},d,this._viewsConfig[e]||{}),this._config.showTitle=e!==this._viewerNames.Home,(0,a.forEach)(this._globalConfig,(function(e,n){t._config[n]=t._globalConfig[n]&&e})),this._hasCustomHeader(e)||this._res.loaded().then((function(){t._setHeader(t._res.val(t._config.header)||t._config.header)})),e===this._viewerNames.PagesView&&this._getCid().then((function(e){l.Z.load(e).then((function(){var e=l.Z.getData();t._config.enableFullDateView=e.EnableFullDateView,t._config.isTitleDisabled=!e.EnableCalendarView&&!e.EnableListView})).finally((function(){t._setNewspaperInfo()}))})),this._eventManager.trigger("configChanged",this,this._config)},e.prototype._setTopicHeader=function(e,t){var n=this;t&&t.params&&t.params.id?this._monitors.get().then((function(e){var i=(0,a.find)(e,(function(e){return e.id===t.params.id}));i&&n._setHeader((0,c.N)(i.searcader(n._res.val(n._config.header))}))},e.prototype._setBookmarkHeader=function(){var e=this;return function(t){t.collectionId?(0,u.vS)(t.profileId).then((function(e){var n=(0,a.find)(e,(function(e){return e.id===t.collectionId}));return!n&&t.currentIssueInfo&&t.currentIssueInfo.cid?(0,e){return e.id===t.collectionId}))})):n})).then((function(t){t&&e._setHeader((0,c.N)(t.name))})):e._setHeader(e._res.val("ReadLater"))}},e.prototype._setNewspaperInfo=function(){var e=this._currentViewName,t=e===this._viewerNames.PagesView||e===this._viewerNames.TextView;if(this._viewerApp&&t){var n=this._viewerApp.contentName();this._setHeader({issueDate:this._viewerApp.issueDate(),issueName:n||""})}},e.prototype._setSearchMenu=function(e){var t=this;e&&(e===this._viewerNames.StoreHub?this._res.loaded().then((function(){t._eventManager.trigger("searchMenuChanged",t,{menu:t._searchCatalogMenu,placeholder:t._res.val("TopToolbar.Placeholder.SearchPublications"),query:""})})):this._eventManager.trigger("searchMenuChanged",this,{menu:this._searchMenu,query:this._searchText||""}))},e.prototype._activeViewChangingHandler=function(e,t){this._currentViewName=t,t!==this._viewerNames.Radio&&this._setConfig(t),this._monitorsLoader.offSearch(this._setTopicHeader.bind(this)),t===this._viewerNames.Monitors?this._monitorsLoader.onSearch(this._setTopicHeader.bind(this)):t===this._viewerNames.Bookmarks?this._bookmarksLoader.setTopBarTitleHandler(this._setBookmarkHeader()):t!==this._viewerNames.PagesView&&t!==this._viewerNames.TextView||this._setNewspaperInfo(),this._setSearchMenu(t)},e.prototype._calendarUpdatedHandler=function(e,t){this._currentViewName&&this._setConfig(this._currentViewName)},e.prototype.init=function(){var e=this;this._eventManager.trigger("userInfoChanged",this,this._getUserInfo()),this._viewerPages.loadedChange(this._setNewspaperInfo.bind(this)),this._initUser(),this._user.onUserStateChanged(this._initUser.bind(this)),this._searchManager.onSearch((function(t,n){e._searchText=n.query,e._eventManager.trigger("search",e,n.query)}));var t=this.getSearchParams();(0,a.isEmpty)(t)||(this._searchText=t.query,this._eventManager.trigger("search",this,t.query)),this._viewerViews.activeViewChanging(this._activeViewChangingHandler.bind(this)),this._eventManager.bind(l.Z,l.Z.calendarUpdatedEvent,null,this._calendarUpdatedHandler.bind(this)),tigger("configChanged",e,e._cnction(e,t){this._viewsConfig[e]=t},e.prototype.onUserInfoChanged=function(e){this._eventManager.bind(this,"userInfoChanged",null,e)},e.prototype.onConfigChanged=function(e){this._eventManager.bind(this,"configChanged",null,e)},e.prototype.onHotZoneStateChanged=function(e){this._eventManager.bind(this,"hotZoneStateChanged",null,e)},e.prototype.onSearch=function(e){this._eventManager.bind(this,"search",null,e)},e.prototype.onUserLoginStateChanged=function(e){this._eventManager.bind(this,"userLoginStateChanged",null,e)},e.prototype.onHeaderChanged=function(e){this._eventManager.bind(this,"headerChanged",null,e)},e.prototype.onSearchMenuChanged=function(e){this._eventManager.bind(this,"searchMenuChanged",null,e)},e}(),p=n(74036),f=n(54215);function m(e){r.nd.ui.menu.items.controllers.base.apply(this,arguments),e.model.onHide((functsize((function(){e.menu().resize()}))}function g(e,t){this._menu=new r.nd.ui.menu.view(this),this._templateName=t,this.controller=null,this.model=e}n(79375),n(47070),n(83062),r.extend(m.prototype,r.nd.ui.menu.items.controllers.base.prototype,{available:function(){return!0tion(e){this._parent.model.load(e)},model:function(){return this._parent.model}}),r.extend(g.prototype,r.nd.ui.menu.controllers.base.prototype,{_renderer:null,renderer:function(){return this._renderer||(this.controller=new m(this),this._renderer=new r.nd.ui.menu.renderers.custom(this.controller,this._templateName)),this._renderer},showUpdated:function(e,t){this.show(e),this.controller&&this.controller.load(t)},hide:function(){r.nd.ui.menu.controllers.base.prototype.hide.apply(this,arguments),r(this).trigger("close")}});var v=g,y=n(66897),_=n(62980),b=function(){function e(e){var t=e.getScrollElement,n=e.getItemsElements,i=e.getSelectedElement,r=e.getSelectedActionElement,o=e.selectedClassName,s=e.mouseTrackingSelector;if(!(0,a.isFunction)(t))throw new Error("getScrollElement is not defined");if(!(0,a.isFunction)(n))throw new Error("getItemsElements is not defined");if(!(0,a.isFunction)(i))throw new Error("getSelectedElement is not defined");if(!(0,a.isFunction)(r))throw new Error("getSelectedActionElement is not defined");if(!(0,a.isString)(o))throw new Error("selectedClassName is not defined");this._getScrollElement=t,this._getItemsElements=n,this._getSelectedElement=i,this._getSelectedActionElement=r,this._selectedClassName=o,this._lastMouseSelectionIndex=-1,this._mouseTrackingSelector=s,this._mouseTrackingEnabled=!1,this._keyboardMap=this._buildKeyboardMap()}return e.prototype._buildKeyboardMap=function(){var e,t=this;return(e={})[_.D.up]=function(){return t.selectUp(),!0},e[_.D.down]=function(){retm()&&(t.invokeSelectedAction(),!0)},e},e.prototype._getItems=function(){return this._getItemoveClass(this._selectedClassName)},e.prototype._select=function(e,t){if(void 0===t&&(t=!0),r(e).addClass(this._selectedClassName),t){var n=this._getScrollElement();(0,y.n5)(n[0],r){return this._getItems().index(e)},e.prototype._getSelectedIndex=function(){var e=this.getSelected();if(e.length){if(-1===this._lastMouseSelectionIndex)return this._getItemIndex(e);this.clearSelection()}if(-1!==this._lastMouseSelectionIndex){var t=this._lastMouseSelectionIndex;return this._lastMouseSelectionIndex=-1,t}return-1},e.prototype.getSelected=function(){return this._getSelectedElement(this._getItreturn this.getSelected().length>0},e.prototype.selectUp=function(){var e=this._getItems(),t=this._getSelectedIndex();t>0?(this._unselect(e[t]),this._select(e[t-1])):0===t&&this._unselect(e[t]),this._suspendMouseSelectionTillMouseMove()},e.prototype.selectDown=function(){var e=this._getItems(),t=this._getSelectedIndex();t<e.length-1&&(-1!==t&&this._unselect(e[t]),this._select(e[t+1])),t===e.length-1&&(0,y.Og)(this._getScrollElement()[0]),this._suspendMouseSelectionTillMouseMove()},e.prototype.invokeSelectedAction=function(){var e=this._getItems(),t=this._getSelectedActionElement(e);t.length&&t.trigger("click")},e.prototype.clearSelection=function(){var e=this.getSelected();e.length&&this._unselect(e)},e.prototype.handleKeyboardEvent=function(e,t){return!!this._keyboardMap[t.keyCode]&&this._keyboardMap[t.keyCode](e,t)},e.prototype.trackMouse=function(e){if(e&&!(0,a.isString)(this._mouseTrackingSelector))throw new Error("mouseTrackingSelector is not defined");this._mouseTrackingEnabled!==e&&(this._mouseTrackingEnabled=e,e?this._subscribeTrackMouse():this._unsubscribeTrackMouse())},e.prototype._subscribeTrackMouse=function(){r(document).on("mouseenter",this._mouseTrackingSelector,this,this._onMouseEnterMenuItem),r(document).on("mouseleave",this._mouseTrackingSelector,this,this._onMouseLeaveMenuItem)},e.prototype._unsubscribeTrackMouse=function(){r(document).off("mouseenter",this._mouseTrackingSelector,this._onMouseEnterMenuItem),r(document).off("mouseleave",this._mouseTrackingSelector,this._onMouseLeaveMenuItem)},e.prototype._onMouseEnterMenuItem=function(e){var t=e.data;t.clearSelection();var n=r(e.currentTarget),i=t._getItemIndex(n);-1!==i&&t._select(n,!1),t._lastMouseSelectionIndex=i},e.prototype._onMouseLeaveMenuItem=function(e){var t=e.data;-1!==t._lastMouseSelectionIndex&&t.clearSelection()},e.prototype._suspendMouseSelectionTillMouseMove=function(){var e=this;this._waitingMouseMove||this._mouseTrackingEnabled&&(this._unsubscribeTrackMouse(),this._waitingMouseMrackMouse(),e._waitingMouseMove=!1})))},e}(),w=b,C=n(46720),I=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.navigation=new w({getScrollElement:function(){return r(".pop-body-search")},getItemsElements:function(){var e=r(".pop-body-search .flist.fliion(e){return r(e).css("order")(e){return r(e).find(".fli").get()})));return r(n)},getSelectedElement:function(e){return e.filter(n e.filter(".hover").closest("li")},selectedClassName:"hover",mouseTrackingSelector:".pop-body-search .flist.flist-button .fli"}),r(i).on("onshow",(function(){return i._onShow()})),r(i).on("onhide",(function(){return i._onHide()})),i._resetSearchSubscription=C.Z.bind(t,"resetsearch",null,(function(){C.Z.trigger("resetsearch",i)})),i}return(0,i.ZT)(t,e),t.prototype.showUpdated=function(t,n){this.visible()||n===this.model.searchQuery||this.model._resetData(),e.prototype.showUpdated.call(this,t,n)},t.prototype._onShow=function(){this.navigation.n(){this.navigation.trackMouse(!1)},t.prototype.dispose=function(){e.prototype.dispose.call(this),this._resetSearchSubscription.dispose()},t}(v),P=n(17790),x=n(14581),S=n(22509),T=n(21559),k=n(81273),A=n(11569),E=n(34336),Z=n(27670),M=n(24458),D=n(88901),L=n(14003),N=n(53169),R=n(96389),V=n(98106),B=n(6677),n n._title=decodeURIComponent(t),n}return(0,i.ZT)(t,e),t}(O.Z.item),U=n(25881),H=n(31914),j=(n(84066),function(e){function t(t){var n=t.name,i=t.latestIssue,r=t.cid,o=e.call(this)||this;return o._title=n,o._meta=i?H.Z.formatDate(H.Z.formatTypes.issue,i.issueDate):"",o.cid=r,o.issue=i.key,o.thumbUrl=(0,U.x8)(i.key,100),o}return(0,i.ZT)(t,e),t}(O.Z.item)),W=j,q=n(46524),G=n(61519),X=n(61800),Y=n(4169),K=n(43389),J=n(81638),$=n(34829),Q=n(70383),ee=n(64156),te=n(91574),ne=n(18518),ie=n(94267),re=n(88477),oe=n(17447),Month(),e.getFullYear()).valueOf()}var le={show:function(e,t){var n,i=!1,r=te.Z.createInstance(e);return r.onHide((function(){void 0!==n&&n.dispose(),i=!0})),function(e,t){var n=t||{},i=n.currentDate,r=n.currentMonth,s=n.allowedDates,u=void 0===s?[]:s,c=n.allowedPeriod,l=void 0===c?{}:c,d=l.from,h=void 0===d?ue.P1:d,p=l.to,f=void 0===p?ue.f1:p,m=n.title,g=void 0===m?"":m;return Y.Z.getAsync("ui.Calendar.FirstDayOfWeekIsMonday",!1).then((function(t){var n={starts:t?1:0,date:(0,a.isDate)(i)?i:void 0,current:(0,a.isDate)(r)?r:void 0,onChange:function(t){e.hide(ne.Y.Ok,{date:t})}};if(!(0,a.isEmpty)(u)){var s=u.reduce((function(e,t){return(0,a.isDate)(t)&&(e[ce(t)]=!0),e}),{});n.onRenderDay=function(e){return{disabled:!s[ce(e)]}}}return h===ue.P1&&f===ue.f1||(n.onRenderDay=function(e){return{disabled:e<h||e>f}}),{title:o.isObservable(g)?g:o.observable(g),visible:o.observable(!1),datePicker:n,close:function(){e.hide(ne.Y.Close)}}}))}(r,t).then((function(e){if(!i){r.show({name:"calendar",templateName:"v7.Client.Dialogs.Calendar",model:e});var t=r.htmlRoot().find(".pop-body");(n=neunction(){r.rde(ne.Y.Unknown),Promise.reject(e)})),r}};te.Z.calendar=le;var de,he=le,pe=n(51828),fe=((de={})[q.vf.Last3Days]="Dialogs.AdvancedSearch.Last3Days",de[q.vf.Today]="Dialogs.AdvancedSearch.Today",de[q.vf.ThisWeek]="Dialogs.AdvancedSearch.ThisWeek",de[q.vf.ThisMonth]="Dialogs.AdvancedSearch.ThisMonth",de[q.vf.Anytime]="Dialogs.AdvancedSearch.Anytime",de[q.vf.Range]="Dialogs.AdvancedSearch.Range",de),me="v7.Client.DateFormat.Issue";function ge(e){return oe.ZP.val(fe[e])}var ve=function(e,t,n){this.id=e,this.displayName=t,this.isSelected=(0,o.observable)(n)},ye=function(e){function t(t,n){var i=e.call(this,q.vf.Range,ge(q.vf.Range),n)||this,r=null!=t?t:{},a=r.start,s=r.stop;return i.from=(0,o.observable)(a?(0,pe.x)(t.start):(0,ue.Lg)()),i.to=(0,o.observable)(s?(0,pe.x)(t.stop):(0,ue.Lg)()),i.prettyFrom=ko.pureComputed((function(){var e=i.from();return oe.ZP.formatDate(e,me)})),i.prettyTo=ko.pureComputed((function(){var e=i.to();return oe.ZP.formatDate(e,me)})),i}return(0,i.ZT)(t,e),t}(ve),_e=function(){function e(e){var t=e.dialog,n=e.date,i=e.dateRange;this.SearchRangeType=q.vf,this.dialog=t;var r=n||G.b.getDefaultDate();this.dates=[q.vf.Today,q.vf.Last3Days,q.vf.ThisWeek,q.vf.ThisMonth,q.vf.Anytime,q.vf.Range].map((function(e){return function(e,t,n){return e===q.vf.Range?new ye(t,n):new ve(e,ge(e),n)}(e,i,e===r)}))}return e.prototype.back=function(){var e=(0,a.find)(this.dates,(function(e){return e.isSelected()})),t=function(e){return e.id===q.vf.Range}(e)?{from:(0,ae.p6)(e.from(),"yyyy-MM-dd"),to:(0,ae.p6)(e.to(),"yyyy-MM-dd")}:null;this.dialog.hide(ne.Y.Ok,{date:e?e.id:G.b.getDefaultDate(),dateRange:t})},e.prototype.select=function(e){this.dates.forEach((function(t){t.isSelected(t.id===e.id)})),this.dialog.resize()},e.prototype.pickFromDate=function(e){this.pickDate(e.from,{title:oe.ZP.val("Dialogs.AdvancedSearch.Date.From"),currentDate:e.from(),currentMonth:e.from(),allowedPeriod:{to:e.to()}})},e.prototype.pickToDate=function(e){this.pickDate(e.to,{title:oe.ZP.val("Dialogs.AdvancedSearch.Date.To"),currentDate:e.to(),currentMonth:e.to(),allowedPeriod:{from:e.from()}})},e.prototype.pickDate=function(e,t){he.show(null,t).onHide((function(t,n){n.status===ne.Y.Ok&&e(n.date)}))},e}(),be=function(){function e(){}return e.prototype.show=function(e){var t=void 0===e?{parentDialog:null,date:null,dateRange:null}:e,n=t.parentDialog,i=t.date,r=t.dateRange;return new Promise((function(e){var t=te.Z.createInstance(n),o=new _e({dialog:t,date:i,dateRange:r});t.onHide((function(t,n){o.dialog=null,e(n)})),t.show({templateName:"v7.Client.Dialogs.AdvancedSearch.Date",model:o,preventClosingOnClickOutside:!0})}))},e}(),we=new be,Ce=n(42761),Ie=n(68876),Pe=n(72633),xe=n(75587),Se=function(e){function t(t){var n=void 0===t?{}:t,i=n.publication,r=n.country,a=n.language,s=e.call(this,i)||this;return s.isSelected=o.observable(!1),s.topThumbUrl=s.getThumbUrlByWidth(100),s.country=r,s.language=asplayName&&e.push(t.displayName),e}),[]).join(" / "),s}return(0,i.ZT)(t,e),t}(xe.Z),Te=Se,ke=n(46046);function Ae(e){return oe.ZP.format(1===e?"Dialogs.AdvancedSearch.TitleSelected":"Dialogs.AdvancedSearch.TitlesSelected",e)}var Ee=function(){function e(e){var t=this,n=e.dialog,i=e.category,r=e.groupName,s=e.selection,u=e.languages,c=e.countryDictionary,l=e.languageDictionary,d=e.searchQuery;this.dialog=n,this.category=i,this.groupName=r,this.selection=s,this.languages=u,this.languageIds=(0,a.isEmpty)(u)?[]:u.map((function(e){return e.id})),this.categoryIds=this.category?[this.category.id]:[];var h,p=this.selection.getCategorySelection(this.category.id);this._previousSelectedTitles=p&&p.titles?(0,a.values)(p.titles):[],this._currentSelectedTitles=this._previousSelectedTitles.slice(),this.isSearchMode=o.observable(!1),p&&(h=null!==p.titles&&(0,a.isEmpty)(this._previousSelectedTitles)),this.isSelectedAll=o.observable(h),this.titles=o.observableArray(),this.titles(){return t.dialog.resize()}),200)})),this.displayTitlesCount=Ae(this.category.publicationsC.hasMore()&&t._titleList.getMore()}),300);var f=(0,a.debounce)((function(e){t.isSearchMode(!0),t._currentSelectedTitles=t._getSelectedPublications(),t._titleList.search(e)}),500);this.searchQuery=o.observable(d||""),this.searchQuerySubscription=this.searchQuery.subscribe((function(e){""===(e=e.trim())?(t.isSearchMode(!1),t._titleList.search(e)):f(e)})),this._titleList=new Pe.Z({provider:Ie.Rd,ViewModel:function(e){var t=ke.Z.findFirstKeyEntry(e.categories,c),n=ke.Z.findFirstKeyEntry(e.categories,l);return new Te({publication:e,country:t,language:n})},target:this.titles,filters:{hasCategories:this.categoryIds,inCategories:this.languageIds},pageSize:60,sorting:{name:"byName",order:1}}),this.hasMorePublications=o.computed((function(){return t.titles().length&&t._titleList.hasMore()}))}return e.prototype.selectAll=function(){this.isSelectedAll()?this.isSelectedAll(!1):(this.titles().forEach((function(e){return e.isSelected(!1)})),this.isSelectedAll(!0))},e.prototype.toggleSelection=function(e){e.isSelected(!e.isSelected()),this.isSelectedAll(!this._isAnySelected()),e.isSelected()||(0,a.remove)(this._previousSelectedTitles,(function(t){return t.cid===e.cid}))},e.prototype.back=function(){this._updateSelection(),this.dialog.hide(ne.Y.Ok),this.dialog=null},e.prototype.clearQuery=function(){this._titleList.searcction(){this._titleList.search("")},e.prototype._updateSelection=function(){var e=this.isSelectedAll();if(void 0!==e)if(e)this.selection.setCategory(this.category,this.groupName);else{var t=this._getSelectedPublications();t.length?this.selection.setTitles(t,this.category):this.selection.setCategory(this.category,this.groupName,null)}},e.prototype._restoreSelection=function(){var e=this;this._currentSelectedTitles.forEach((function(t){var n=(0,a.find)(e.titles(),(function(e){return e.cid===t.cid}));n&&n.isSelected(!0)}))},e.prototype._isAnySelected=function(){return this.titles().some((function(e){return e.isSelected()}))||this._previousSelectedTitles.length>0},e.prototype._getSelectedPublications=function(){return this.titles().filter((functiegories,latestIssue:e.latestIssue}}))},e}(),Ze=function(){function e(){}return e.prototype.show=function(e){var t=void 0===e?{}:e,n=t.parentDialog,i=t.category,r=t.groupName,o=t.selection,a=t.languages,s=t.countryDictionary,u=t.languageDictionary;return new Promise((function(e){var t=te.Z.createInstance(n),c=new Ee({dialog:t,category:i,groupName:r,selection:o,languages:a,countryDictionary:s,languageDictionary:u});c.loadPublications(),t.onHide((function(t,n){c.titlesSubscription.dispose(),c.searchQuerySubscription.dispose(),e(n)})),t.show({templateName:"v7.Client.Dialogs.AdvancedSearch.Titles.InCategory",model:c,preventClosingOnClickOutside:!0})}))},e}(),Me=new Ze,De=n(89767),Le=200,Ne=function(){function e(e){var t=this,n=e.dialog,i=e.titleSelection,r=e.languages,s=e.showTabSwitcher,u=e.selectedTab;this.dialog=n,this.publicationsCount=o.observable(0),this.countries=o.observableArray(),this.categories=o.observableArray(),this.titles=o.observableArray(),this.titlesSubscription=this.titles.subscribe((function(){t._restorePublicationsSelection(),setTimeout((function(){return t.dialog.resize()}),Le)})),this._currentSelectedTitles=[],this.languages=r,(0,a.isEmpty)(r)?this.languageIds=null:this.languageIds=r.map((function(e){return e.id})),this.selection=i,this.isSelectedAll=o.observable(this.selection.isEmpty()),this._restoreSelection(),this._countryDictionary={},this._languageDictionary={},this.isTabSwitcherVisible=!!ke.Z.isNil(s)||!!s,u=u||N.LQ.Categories,this.selectedTab=o.observable(u),this.isCountryMode=o.pureComputed((function(){return t.selectedTab()===N.LQ.Countries})), t.selectedTab()===N.LQ.Categories})),this.isSearchMode=o.observable(!1),this.displayTotalCount="";var c=(0,a.debounce)((function(e){t.isSearchMode(!0),t._currentSelectedTitles=t._getSelectedPublications(),t._titleList.search(e)}),500);this.searchQuery=o.observable(""),this.searchQuerySubscription=this.searchQuery.subscribe((function(e){""===(e=e.trim())?(t.isSearchMode(!1),t._currentSelectedTitles=[],t.titles([])):c(e)})),this.onScroll=(0,a.throttle)((function(){return t.isSearchMode()&&t._titleList.hasMore()&&t._titleList.getMore()}),300),this._titleList=new Pe.Z({provider:Ie.Rd,ViewModel:function(e){var n=ke.Z.findFirstKeyEntry(e.categories,t._countryDictionary),i=ke.Z.findFirstKeyEntry(e.categories,t._languageDictionary);return new Te({publication:e,country:n,language:i})},target:this.titles,filters:{hasCategories:this.languageIds},pageSize:60,sorting:{name:"byName",order:1}}),this.hasMorePublications=o.computed((function(){return t.titles().length&&t._titleList.hasMore()}))}return e.prototype.back=function(){this.save()},e.prototype.save=function(){this.isSearchMode()&&this.selection.setTitles(this.titles().filter((function(e){return e.isSelected()}))),this.dialog.hide(ne.Y.Ok),this.dialog=null},e.prototype.clearQuery=function(){this.searchQuery("")},e.prototype.selectAll=function(){this.isSelectedAll()?this.isSelectedAll(!1):(this.selection.cleaturn e.displaySelectionText("")}))})),this.isSelectedAln(e){e.isSelected(!e.isSelected())},e.prototype.selectCountryTab=function(){var e=this;this.selectedTab()!==N.LQ.Countries&&(this.selectedTab(N.LQ.Countries),setTimeout((function(){return e.dialog.resize()}),Le))},e.prototype.selectCategoryTab=function(){var e=this;this.selectedTab()!==N.LQ.Categories&&(this.selectedTab(N.LQ.Categories),setTimeout((function(){return e.dialog.resize()}),Le))},e.prototype.showCategoryTitles=function(e){var t=this;Me.show({parentDialog:this.dialog,category:e,groupName:this.selectedTab(),languages:this.languages,countryDictionary:this._countryDictionary,languageDictionary:this._languageDictionary,selection:this.selection}).then((function(e){e&&e.status===ne.Y.Ok&&(t._restoreSelection(),e.goToRoot&&t.save())}))},e.prototype.loadCatalog=function(){var e=this,t=null,n=Y.Z.get("catalog.root");return(0,Ce.AR)(n).then((function(n){var r=(0,i.CR)([n[0].categories].map((function(e){return e.map((function(e){return(0,a.assign)({displaySelectionText:o.observable("")},e)}))})),1)[0];return e.categories(r),t=(0,a.groupBy)(r,"titlePublicationCid"),(0,R.FH)((0,a.keys)(t))})).then((function(n){return n.forEach((function(n){t[n.cid]&&t[n.cid].forEach((function(e){e.historyItem=n,e.topThumbUrl=(0,De.AZ)(n.cid,oe.ZP.formatDate(n.latestIssue.issueDate,"date","yyyyMMdd"),100)})),e._restoreSelection()}))})).catch(re.logError).finally((function(){ie.Z.hide(),e.dialog.resize()}))},e.prototype.loadPublicationsCount=function(){var e=this,t=(0,a.isEmpty)(this.languages)?(0,R.sd)().then((function(e){return e.publicationsCount})):Promise.resolve(this._getTitlection(t){e.displayTotalCount=Ae(t)})),t},e.prototype._getTitlesCountInLanguages=function(){return(0,a.reduce)(this.languages,(function(e,t){return e+t.publicationsCount}),0)},e.prototype._restoreSelection=function(){var e=this;this.selection&&(this.isSelectedAll(this.selection.isEmpty()),this._getCatalogList().forlaySelectionTextForCategory(t.id))}))})))},enction(e){return e.isSelected()}))},e.prototype._restorePublicationsSelection=function(){var e=this;this._currentSelectedTitles.forEach((function(t){var n=(0,a.find)(e.titles(),(function(e){return e.cid===t.cid}));n&&n.isSelected(his.countries(),this.categories()]},e.prototype._getDisplaySelectionTextForCategory=function(e){if(!this.selection)return"";var t=this.selection.getCategorySelection(e);if(!t||null===t.titles)return"";if(t&&t.category)return oe.ZP.val("Dialogs.AdvancedSearch.AllTitles");var n=(0,a.values)(t.titles);return 1===n.length?n[0].name:n.length>1?"".concat(n.length," ").concat(oe.ZP.val("Dialogs.AdvancedSearch.Selected")):""},e}(),Re=function(){function e(){}return e.prototype.show=function(e){var t=void 0===e?{}:e,n=t.parentDialog,i=t.titleSelection,r=t.languages,o=t.showTabSwitcher,a=void 0!==o&&o,s=t.selectedTab;return new Promise((function(e){ie.Z.show();var t=te.Z.createInstance(n),o=new Ne({dialog:t,titleSelection:i,languages:r,showTabSwitcher:a,selectedTab:s});return Promise.all([o.loadCatalog(),o.loadPublicationsCount()]).then((function(){t.onHide((function(t,n){o.titlesSubscription.dispose(),o.searchQuerySubscription.dispose(),e(n)})),t.show({templateName:"v7.Client.Dialogs.AdvancedSearch.Titles",model:o,preventClosingOnClickOutside:!0}),setTimeout((function(){return t.resize()}),Le)})).catch(re.logError).finally((function(){return ie.Z.hide()}))}))},e}(),Ve=new Re,Be="simpleSearch",Fe="advancedSearch",Oe=function(){function e(e){var t=this,n=e.dialog,i=e.searchQuery;this.dialog=n,this.languages=o.observableArray([]),this.isAuthorFocused=o.observable(!1),this.searchDate=o.observable(q.vf.Last3Days),this.dateRange=o.observable(null),this.searchLocations=o.observable(q.Ye.All),this.searchQuery=o.observable(i).extend({maxLength:Q.Z.searchTextMaxLength}),this.searchAnyWords=o.observable("").extend({maxLength:Q.Z.searchTextMaxLength}),this.searchPhrase=o.observable("").extend({maxLength:Q.Z.searchTextMaxLength}),this.searchExcludeWords=o.observable("").extend({maxLength:Q.Z.searchTextMaxLength}),this.hasQuery=o.pureComputed((function(){return!!(t.searchQuery()||t.searchAnyWords()||t.searchPhrase()||t.searchExcludeWords())})),this.searchAuthor=o.observable("").extend({customValidator:{message:oe.ZP.val("Dialogs.AdvancedSearch.Author.function(e){return t.hasQuery()||e}},trackDirtyState:unction(){return!!t.searchAuthor()})),this.touch=!!K.v.touch,this.titleSelection=new ee.G,this.displayTitles=o.observable((0,ee.p)(this.titleSelection)),this.displayDate=o.computed((function(){if(t.searchDate()===q.vf.Range&&t.dateRange()){var e=t.dateRange(),n=e.start,i=e.stop;return"".concat(n," - ").concat(i)}return ge(t.searchDate())})),this.currentSearchOptions=o.observable(Be),this.toggleOptionsText=o.pureComputed((function(){return t.currentSearchOptions()===Fe?oe.ZP.val("Dialogs.AdvancedSearch.HideOptions","Hide Options"):oe.ZP.val("Dialogs.AdvancedSearch.ShowOptions","Show Options")}))}return e.prototype.cancel=function(){this.dialog.hide(ne.Y.Cancel),this.dialog=null},e.prototype.search=function(){if((0,$.forceValidation)(this),(0,$.validate)(this)){var e=this._buildQuery(),t={type:q.Sc.Advanced,state:q.po.Custom,query:e,author:this.searchAuthor(),in:this.searchLocations(),date:this.searchDate(),hideSimilar:!1};(0,a.isEmpty)(this.languages())||(t.languages=this.languages().map((function(e){return e.iso})).join(",")),this.searchDate()===q.vf.Range&&(0,a.assign)(t,this.dateRange()),(0,a.assign)(t,this.titleSelection.toSearchParams()),X.U.newSearch(t),this.dialog.hide(ne.Y.Ok)}},e.prototype.showLanguages=function(){var e=this;this.dialog.suspend(),(0,J.s)().then((function(t){var n;t.cancelled||e.languages((null===(n=t.data)||void 0===n?void 0:n.selectedLanguages)||[]),e.dialog.resume()}))},e.prototype.showTitles=function(){var e=this;Ve.show({parentDialog:this.dialog,titleSelection:this.titleSelection,languages:this.languages()}).then((function(t){t.status===ne.Y.Ok&&e.displayTitles((0,ee.p)(e.titleSelection))}))},e.prototype.showDates=function(){var e=this;we.show({parentDialog:this.dialog,date:this.searchDate(),dateRange:this.dateRange()}).then((function(t){if(t.status===ne.Y.Ok&&(e.searchDate(t.date),t.date===q.vf.Range)){var n=t.dateRange,i=n.from,r=n.to;e.dateRange({start:i,stop:r})}}))},e.prototype.clearQuery=function(){this.searchQuery("")},e.prototype.restoreSelection=function(){var e=this,t=X.U.getSearchParams();if((0,a.isEmpty)(t))return Promise.resolve(null);this.searchDate(t.date||G.b.getDefaultDate()),this.searchLocations(q.Ye.All),this.searchQuery(t.query||""),this.searchAuthor(t.author||"");var n=t.start,i=t.stop;(n||i)&&this.dateRange({start:n,stop:i});var r=t.languages?t.languages.split(","):[],o=(0,a.isEmpty)(r)?Promise.resolve(null):(0,R.Vb)().then((function(t){if(!(0,a.isEmpty)(t)){var n=(0,a.keyBy)(t,(function(e){return e.iso})),i=[];r.forEach((function(e){i.push(n[e])})),e.languages(i)}})),s=this.titleSelection.fromSearchParams(t).then((function(){e.displayTitles((0,ee.p)(e.titleSelection))}));return Promise.all([o,s])},e.prototype.toggleSearchOptions=function(){this.currentSearchOptions()===Be?this.currentSearchOptions(Fe):this.currentSearchOptions(Be),this.dialog.resize()},e.prototype._buildQuery=function(){var e=this.searchQuery();if(this.currentSearchOptions()===Be)return e;if(this.searchPhrase()&&(e+=' "'.concat(this.searchPhrase().replace(/['"]+/g,""),'"')),this.searchAnyWords()){var t=this.searchAnyWords().split(" ").filter((function(e){return e}));e+=" ".concat(t.join(" OR "))}if(this.searchExcludeWords()){var n=this.searchExcludeWords().split(" ").filter((function(e){return e}));e+=" -".concat(n.join(" -"))}return e},e}(),ze=function(){function e(){}return e.prototype.show=function(e){var t=void 0===e?{}:e,n=t.parentDialog,i=t.searchQuery;return new Promise((function(e){ie.Z.show();var t=te.Z.getInstance(n),r=new Oe({dialog:t,searchQuery:i});t.onHide((function(t,n){e(n)}));var o={templateName:"v7.Client.Dialogs.AdvancedSearch",model:r,focusElement:".search .search-input",preventClosingOnClickOutside:!0};r.restoreSelection().then((function(){t.show(o)})).catch(re.logError).finally((function(){return ie.Z.hide()}))}))},e}(),Ue=new ze,He=function(){function e(){var e=this;Y.Z.loaded().then((function(){e.showAdvancedSearch=Y.Z.get("ui.TopToolbar.AdvancedSearchEnabled",!1)})),this.searchQuery=null,this.historyType=F.ZP.searchArea.Articles,this.historyItems=o.observableArray(),this.sourceItems=o.observableArray(),this._subscriptions=[]}return e.prototype.search=function(e){var t,n,i=Z.Z.getActiveViewName(),r=s.Z.issue(),o=!r||i!==M.n3.PagesView&&i!==M.n3.TextView?q.Sc.Quick:q.Sc.Issue,a=new G.b({type:o,query:e,hideSimilar:o===q.Sc.Issue});o===q.Sc.Quick?a.in=q.Ye.All:o===q.Sc.Issue&&(a.newspapers=s.Z.cid(),a.startDate=a.stopDate=(t=r,n=(0,x.xr)(t),"".concat(n.getFullYear(),"-").concat(n.getMonth()+1,"-").concat(n.getDate()))),X.U.newSearch(a),this.reset()},e.prototype.searchSources=function(){E.Z.goView(M.n3.StoreHub,{catalogView:M.N1.Catalog,search:this.searchQuery}),this.reset()},e.prototype.openSource=function(e){e.issue?L.Z.showIssue(e.issue):L.Z.showNewspaper(e.cid),C.Z.trigger("resetsearch",this),thfunction(e){this.search(e.title())},e.prototype.clearHistory=function(){var e=thioveAll(),C.Z.trigger("onresize",e)}how(this.searchQuery),this.reset()},e.prototype._getSources=function(){return[[this._loadHistoryItems,this._renderHistoryItems],[this._loadSourceItems,this._renderSourceItems]]},e.prototype.load=function(e){var t=this,n=(0,a.trim)(e);if(this.searchQuery!==n){this.searchQuery=n;var r=this._getSources(),o=(0,P.D)(r).pipe((0,S.U)((function(e){var r=(0,i.CR)(e,2),o=r[0],a=r[1],s=Promise.resolve();return o&&a&&(n||o===t._loadHistoryItems)&&(s=o.apply(t,[n])),s.then((function(e){return{result:e,renderer:a}}))})),(0,T.z)((function(e){return(0,P.D)(e)})));o.pipe((0,k.e)(240),(0,A.h)((function(e){return e.length>0}))).subscribe((function(e){t.searchQuery===n&&((0,a.forEach)(e,(function(e){var n=e.result,i=e.renderer;i&&i.apply(t,[n])})),C.Z.trigger("onresize",t))}),B.Z.error)}},e.prototype.onHide=function(e){C.Z.bind(this,"on){C.Z.bind(this,"onresize",null,e)},e.prototype.reset=function(){C.Z.trigger("onhide",this),this._resetData(),this.searchQuery=""},e.prototype._resetData=function(){var e=[this.sourceItems];(0,a.forEach)(e,(function(e){return e.removeAll(urn D.Z.load(e,3,this.historyType)},e.prototype._renderHistoryItems=function(e){this.historyItems((0,a.map)(e,(function(e){return new z(e)})))},e.prototype._loadSourceItems=function(e){return(0,R.Rd)({filters:{text:e},limit:5,orderBy:{name:N.jl.SearchRank,order:V.a.Descending}})},e.prototype._renderSourceItems=function(e){var t=e&&e.items?(0,a.map)(e.items,(function(e){return new W(e)})):[];this.sourceItems(t)},e.prototype.wasShown=function(){},e.prototype.wasHidden=function(){},e}(),je=He,We=new I(new je,"v7.Client.Menu.Search"),qe=n(74981),Ge=n(28749),Xe=new I(new(function(e){function t(){var t=e.call(this)||this;return t.initialView=void 0,t.historyType=F.ZP.searchArea.Catalog,t}return(0,i.ZT)(t,e),t.prototype.search=function(e){this._saveSearch(),Ge.Z.filter(e),C.Z.trigger("onhide",this)},t.prototype.load=function(t){e.prototype.load.call(this,t),t=(0,a.trim)(t),(0,a.isEmpty)(t)&&!this.initialView&&(this.initialView=Ge.Z.currentView()),Ge.Z.filter(t,this.initialView)},t.prototype._saveSearch=function(){(0,a.isEmpty)(this.searchQuery)||qe.Z.post("catalog","history",{pattern:this.scall(this),this.initialView=void 0},t}(je)),"v7.Client.Menu.Search"),Ye=n(62106),Ke=n(53890),Je=n(8871),$e=n(14347),Qe=n(60683),et=n(5439),tt=n(82641),nt=n(71357),it=n(70263),rt=n(42821),ot=n(60658),at=n(51228),st=n(26763),ut=n(80053),ct=n(40605),lt=n(92912),dt=n(23431),ht=function(){function e(e,t,n){var r=this;this.dialog=e,this._statesStack=[],this.hasInitialData=(null==n?void 0:n.length)>0,this._publicationsInternal=(0,i.ev)([],(0,i.CR)(n),!1),this.states=Object.freeze({publications:0,supplements:1}),this.state=o.observable(this.states.publications),this.categories=o.observableArray([]),this.publicationsSortByRankEnabled=o.observable(t.get("ui.Catalog.SortToolbar.popularSortEnable",!0)),this.publications=o.observableArray(n||[]),this.publicationsHeader=o.observable(""),this.sortBy=o.observable(),this.sortOrder=o.observable(),this.searchText=o.observable("").extend({rateLimit:{timeout:300,method:"notifyWhenChangesel&&r._publicationsModel.search(e)})),this.hasMorePublications=o.observable(!0),this.loadMorePublications=(0,a.throttle)((function(){r._publicationsModel&&r._publicationsModel.hasMore()&&r._publicationsModel.getMore(),r.hasMorePublications(r._publicationsModel.hasMore())}),500),this.init()}return e.prototype._pushState=function(){var e={state:this.state(),publications:this._publicationsInternal,publicationsAdapter:this._publicationsModel,publicationsHeader:this.publicationsHeader(),searchText:this.searchText()};this._statesStack.push(e)},e.prototype._popState=function(){var e=this._statesStack.pop();if(!e)throw new Error("Unexpected use: states stack is empty");this.state(e.state),this.publications(e.publications),this.publicationsHeader(e.publicationsHeader),this._publicationsInternal=e.publications,this._publicationsModel=e.publicationsAdapter,this.searchText(e.searchText)},e.prototype.close=function(){this.dialog.hide()},e.prototype.enterSupplementsState=function(e){this._pushState(),this.state(this.states.supplements);var t=(0,i.ev)([e],(0,i.CR)(e.supplements),!1);this.publications(t),this.publicationsHeader(e.name),this._publicationsInternal=t,this.searchText(""),this.init()},e.prototype.exitSupplementsState=function(){this._popState(),this.init()},e.prototype.sortPublications=function(e){e===this.sortBy()?this.sortOrder((0,V.A)(this.sortOrder())):(this.sortBy(e),this.sortOrder(N.Dm[e])),this._publicationsModel.sort(this.sortBy(),this.sortOrder())},e.prototype.selectPublication=function(e){this.state()===this.states.publications&&e.hasSupplements?this.enterSupplementsState(e):(L.Z.showIssue(e.latestIssue.key),this.close())},e.prototype.init=function(){var e=this.sortBy()?{name:this.sortBy(),order:this.sortOrder()}:void 0;this._publicationsModel=new dt.Z({target:this.publications,source:(0,i.ev)([],(0,i.CR)(this._publicationsInternal),!1),pageSize:20,orderBy:e}),this._publicationsModel.search(this.searchText())},e}(),pt={show:function(e){return(0,i.mG)(this,void 0,void 0,(function(){var t,n,r,s;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),lt.ZP.show(),[4,Y.Z.loaded()];case 1:return i.sent(),(t=te.Z.createInstance()).onHide((function(){o.safeCleanNode(t.htmlRoot()[0])})),[4,(0,R.Vr)(e)];case 2:return n=i.sent(),r=new ht(t,Y.Z,(0,a.map)(n.items,(function(e){return new xe.Z(e)}))),t.show({templateName:"v7.Client.Dialogs.Category",model:r,height:"100%"}),[2,t];case 3:return s=i.sent(),(0,re.logError)(s),[3,5];case 4:return lt.ZP.hide(),[7];case 5:return[2]}}))}))}},ft=n(38775),mt="#toolbarSearchPanel input[type=text]",gt=function(e){r vt(e){return e?e.elm().height():0}function yt(e,t){return{x:function(){return r.windowWidth()-t},y:vt(e),align:{y:f.x.ScreenTop,x:f.x.ScreenRight}}}function _t(e){var t=Z.Z.getActiveViewName();et.$.highlightTextInView(t,e)}var bt=function(){var e=new h({viewerApp:s.Z,viewerPages:s.Z.pages,user:$e.Z,userInfo:Je.default,bookmarks:it,monitors:Ye.A,config:Y.Z,res:oe.ZP,searchManager:X.U,textHighlighter:et.$,viewerViews:Z.Z,viewerNames:M.n3,monitorsLoader:tt.ZP.monitors,bookmarksLoader:Ke.Z,eventManager:C.Z,searchMenu:We,searchCatalogMenu:Xe}),t=function(e){var t,n={_topbarProvider:e.provider,container:void 0,newspaperName:o.observable(""),showNewpaperName:o.observable(!1),monitorName:o.observable(""),showMonitorName:o.observable(!1),bookmarkName:o.observable(""),showBookmarkName:o.observable(!1),publicBookmarkName:o.observable(""),showPublicBookmarkName:o.observable(!1),showTitle:o.observable(!0),showLogo:o.observable(!0),clickableLogo:o.observable(!0),topBarPublicationsDropdown:o.observable(!1),logoUrl:o.observable(""),logoUrlTarget:o.observable(""),signInEnabled:o.observable(!0),searchEnabled:o.observable(!1),isTopBarMainMenuEnabled:o.observable(!0),isHomeView:o.observable(!1),issueDate:o.observable(null),isLogin:o.observable($e.Z.isLogin()),nickName:o.observable(Je.default.nickname),email:o.observable(Je.default.email),photo:o.observable(Je.default.photo),avatar:o.observable((0,Qe.b_)({nickname:Je.default.nickname,imageId:Je.default.avatarImageId,size:Qe.wC.normal,fallbackAvatarUrl:Je.default.photo.url})),newspapersCount:o.observable(0),countEnable:o.observable(!1),sourceButtonTitle:o.observable(""),searchText:o.observable("").extend({maxLength:Q.Z.searchTextMaxLength}),searchFocused:o.observable(!1),searchInputZIndex:o.observable("3"),configPublication:o.observable(""),configCalendar:o.observable(""),configHeader:o.observable(""),configHeaderClass:o.observable(""),configBackEnable:o.observable(!0),configUserInfoEnable:o.observable(!0),configActionMenuEnable:o.observable(!1),configTitleEnable:o.observable(!1),configHomeButtonEnable:o.observable(!0),configMainMenu:o.observable(),configMainMenuEnabled:o.observable(!0),actionMenuOptions:o.observable([]),generalMenuOptions:o.observable([]),isTitleDisabled:o.observable(!1),isMainMenuEnabled:o.observable(!0),homeButtonEnable:o.observable(!1),topNewsButtonVisible:o.observable(!0),_hotZoneButtonVisible:o.observable(!1),addOpinionButtonVisible:o.observable(!1),newPostButtonVisible:o.observable(!1),hotZoneButtonClass:o.observable(!1),searchPlaceholder:o.observable(),actionMenuController:o.observable(),showSearch:o.observable(!0),showPostButton:o.observable(!1),hideHotZoneButton:o.observable(!1),postAction:null,isPostDisabled:o.observable(!1),enableFullDateView:o.observable(!0),hotZoneButtonClick:a.noop,addOpinionButtonClick:a.noop,newPostButtonClick:function(){return E.Z.goView(M.n3.Post,null,null,!0)},showSidebar:function(){return at.Z.show()},showTopNews:function(){return E.Z.goView(M.n3.TopNews,null,null,!0)},toolbarSetup:function(e){return ot.Z.toolbarSetup(e)},goHome:function(){return window.location.href=window.basePath},mousedownReset:function(){return!1},signIn:function(){return n(e){return ct.ZP.root().resize(e)},onViewChanged:function(e){re{return E.Z.historyProvider.back()},onResize:function(e){return r(return r(n).on("onfocuschanged",e)},showAccountMenu:function(){return rt.Z.show({position:yt(n.container,50)})}};n.displayNewspapersCount=o.pureComputed((function(){var e=n.sourceButtonTitle();return n.countEnable()&&n.newspapersCount()&&(e="".concat(e," ( ").concat(n.newspapersCount()," )")),e})),n.displayNickName=o.pureComputed((function(){return n.isLogin()?Y.Z.get("ui.TopToolbar.ShowLogonName",!1)?n.email():n.nickName():""})),n.displayHeader=o.pureComputed((function(){return n.configHeader()})),n.displayPublication=o.pureComputed((function(){return n.configPublication()})),n.displayCalendar=o.pureComputed((function(){return nndow.location.href=nction(){return pt.show(s.Z.cid())},n.showMainMenu=function(){var e,t=Z.Z.getActiveViewName();if(t===M.n3.TextView||t===M.n3.PagesView){var i=new p.ZP.controllers.singleItem;i.itemsControllerCTOR(p.ZP.items.controllers.get("issueDate")).itemsControllerParams([i]),i.show({position:(e=n.container,{y:vt(e),align:{y:f.x.ScreenTop,x:f.x.ScreenCenter}})})}st.Z.toggleView()};var i=function(e){n.searchMenuHandler.showUpdanction(){return r.windowWidth()-20},y:function(){return vt(n.container)},align:{x:function(){return f.x.ScreenRight},y:f.x.ScreenTop}}},e)};return n.showSearchMenu=function(e,t){n.searchMenuHandler&&(n.searchMenuHandler.navigation.clearSelection(),r(n.searchMenuHandler).one("close",n.searchInputBlur));try{t&&t.currentTarget&&t.currentTarget.select&&n._selectSearchText&&(t.currentTarget.select(),n._selectSearchText=!1)}catch(e){}i(n.searchText());var o=r(mt).first();if(o.focus(),!n.searchFocused()){var a=n.searchText();o[0].setSelectionRange(a.length,a.length),o.data("allow-default",!0),o.data("allow-move-default",!0),o.data("ms-pointer-down-allow-default",!0)}o.bind("contextmenu",gt),n.searchInputZIndex("2000"),n.searchFocused(!0),r(n).trigger("onfocuschanged")},n.search=function(){t&&(t=clearTimeout(t)),n.searchMenuHandler.hide(),n.searchMenuHandler.model.search(nandler.navigation.clearSelection()},n.searchKeyDown=function(e,i){return!n.searchMenuHandler||!n.searchMenuHandler.navigation.handleKeyboardEvent(e,i)||(t&&(t=clearTimeout(t)),!1)},n.searchKeyUp=function(e,r){t&&(t=clearTimeout(t));var o={};return o[_.D.entet(),n.searchMenuHandler.hide(),!1},o[_.D.up]=o[_.D.down]=function(){return!1},o[r.which]?o[r.which](e,r):(t=setTimeout((function(){n.searchText()?(_t(n.searchText()),i(n.searchText())):n.searchReset()}),500),!0)},n.searchInputBlur=function(){t&&(t=clearTimeout(t),_t(n.searchText())),n._selectSearchText=!0,n.searchInputZIndex("3");var e=r(mt).first();e.blur(),e.data("allow-default",!1),e.data("allow-move-default",!1),e.data("ms-pointer-down-allow-default",!1),e.unbind("contextmenu",gt),n.searchFocused(!1),r(n).trigger("onfocuschanged")},n.searchReset=function(){n.searchText(""),n._topbarProvider._searchText="",_t(""Handler.hide(),n.searchInputBlur()},n.showActionMenu=function(){n.actionMenuController().show({position:yt(n.container,20),options:n.actionMenuOptions(),generalOptions:n.generalMenuOptions(),title:n.showNewpaperName()?n.newspaperName():n.configHeader()})},n.post=function(){return(0,a.isFunction)(n.postAction)&&n.postAction(),!1},n.hnVisible()&&!n.hideHotZoneButton()})),n}({provider:e}),n=function(){t.nickName(Je.default.nickname),t.photo(Je.default.photo),t.email(Je.default.email),t.avatar((0,Qe.b_)({nickname:Je.default.nickname,imageId:Je.default.avatarImageId,size:Qe.wC.normal,fallbackAvatarUrl:Je.default.photo.url})),r(t).trigger("onresize")},u=function(e,n){n&&(t.configHeaderClass(n.headerClass),t.configBackEnable(n.backEnable),t.configUserInfoEnable(n.userInfoEnable),t.configActionMenuEnable(n.actionMenuEnable),t.configTitleEnable(n.titleEnable),t.showLogo(n.showLogo),t.signInEnabled(n.signInEnabled),t.searchEnabled(n.showSearch),t.clickableLogo(n.clickableLogo),t.logoUrl(n.logoUrl),t.logoUrlTarget(n.openLogoUrlInNewTab?"_blank":""),t.topBarPublicationsDropdown(n.topBarPublicationsDropdown),t.configHomeButtonEnable(n.homeButtonEnable),t.configMainMenu(n.mainMenuOptions),t.configMainMenuEnabled(void 0===n.configMainMenuEnabled||n.configMainMenuEnabled),t.showNewpaperName(n.showNewpaperName),t.showMonitorName(n.showMonitorName),t.showBookmarkName(n.showBookmarkName),t.showPublicBookmarkName(n.showPublicBookmarkName),t.showTitle(n.showTitle),t.isHomeView(n.isHomeView),t.actionMenuOptions(n.actionMenuOptions||[]),t.generalMenuOptions(n.generalMenuOptions||[]),t.isTitleDisabled(n.isTitleDisabled),t.isMainMenuEnabled(void 0!==n.isMainMenuEnabled?n.isMainMenuEnabled:ke.Z.isCompactScreen()),t.addOpinionButtonVisible(!1),t.actionMenuController(n.actionMenuController||ft.f),t.showSearch(n.showSearch),t.showPostButton(n.showPostButton),t.hideHotZoneButton(n.hideHotZoneButton),t.isPostDisabled(n.isPostDisabled),t.newPostButtonVisible(n.newPostButtonVisible),t.postAction=n.postAction,r(t).trigger("onfocuschanged",n.actionMenuEnable))},c=function(e,n){if(n.issueName){t.newspaperName(n.issueName),t.enableFullDateView(!!n.config.enableFullDateView);var o=n.issueDate,a=n.issueName,s=n.config.showIssueDate;if(o&&s){if(!1===n.config.enableFullDateView){var u=(0,i.CR)(o.split(" "));u[0],o=u.slice(1).join(" ")}t.configHeader("".concat(a," <em>").concat(o,"</em>"))}else t.configHeader(a);t.configPublication(a),t.configCalendar("<em>".concat(o,"</em>"))}else n.config&&n.config.locationName?(t.configHeader("".concat(n.config.locationName," <em>").concat(n.title,"</em>")),t.configPublication(n.config.locationName)):(t.configHeader(n.title),t.configPublication(n.title));r(t).trigger("onresize")},l=function(e,n){t.searchPlaceholder(n.placeholder),t.searchMenuHandler=n.menu,t.searchText(n.query)},d={model:t,showSearchMenu:function(){return t.searchReset()},searchMenuText:function(e){chText:function(){t.searchText("")},getSearchText:function(){retuEnable(ction(e){(0,a.isFunction)(e)&&e(t)},registerView:function(t,n){return e.registerView(t,n)},show:function(i){t.container=i,Je.default.updates.subscribe(n),e.onConfigChanged(u),e.onSearch((function(e,t){return d.searchMenuText(t)})),e.onUserLoginStateChanged((function(e,n){return t.isLogin(n)})),e.onHeaderChanged(c),e.onSearchMenuChanged(l),e.init(),Promise.all([Y.Z.loaded(),nt.Z.loaded()]).then((function(){Y.Z.get("features.app.mobileview.supported",!1)&&Y.Z.get("features.app.header.enabled",!1)||nt.Z.renderTo("v7.Client.ToolbarTop",t,i.elm())})).finally((function(){i.oncontentchanged&&i.oncontentchanged()}))}},m=function(){d.resetSearchText(),et.$.highlightTextInView(M.n3.PagesView,"")};return C.Z.bind(We,"resetsearch",null,m),C.Z.bind(Xe,"resetsearch",null,m),Z.Z.activeViewChanged((function(e,t){t!==M.n3.FTSArticles&&et.$.highlightTextInView(t,d.getSearchText())})),d}();r.nd.viewer.topBar=bt;var wt=bt.show.bind(bt),Ct=bt.showSearchMenu.bind(bt),It=bt.searchMenuText.bind(bt),Pt=bt.resetSearchText.bind(bt),xt=bt.getSearchText.bind(bt),St=bt.enableActionMenu.bind(bt),Tt=bt.update.bind(bt),kt=bt.registerView.bind(bt),At=bt},17696:function(e,t,n){"use strict";n.r(t),n.d(t,{purchase:function(){return I},purchasearchive:function(){return P}});var i=n(22970),r=n(60231),o=n(40180),a=n(14581),s=n(66353),u=n(78964),c=n(49475),l=n(14003),d=n(4169),h=n(70737),p=n(91574),f=n(18518),m=n(88477),g=n(67978),v=n(98008),y=n(10314),_={subscription:0,issue:1,bundle:2},b=["AU","CA","US"];function w(e){var t=void 0===e?{}:e,n=t.requestedContent,i=void 0===n?{}:n,o=t.purchaseInfo,a=void 0===o?{}:o,s=t.isArchive;return new Promise((function(e,t){var n=p.Z.createInstance(),o=function(e){var t=e.requestedContent,n=e.purchaseInfo,i=e.dialog,o={main:0,confirm:1,allProducts:2},a={states:o,isArchive:e.isArchive,requestedContent:t,currentState:r.observable(),billingInfo:n.BillingInfo,products:r.observableArray(n.Products),selectedProduct:r.observable(),basketInfo:r.observable(null),currentSubscriptionMode:n.CurrentSubscriptionMode,currentSubscriptionBalance:n.CurrentSubscriptionBalance,currentSubscriptionProductId:n.CurrentSubscriptionProductId,issueProducts:r.observableArray(n.Products.filter((function(e){return e.Type===_.issue}))),subscriptionProducts:r.observableArray(n.Products.filter((function(e){return e.Type===_.subscription}))),allSubscriptionProducts:r.observableArray((n.AllProducts||[]).filter((function(e){return e.Type===_.subscription&&e.Price&&e.Price.Value}))),isSubmitting:r.observable(!1),isBillingInfoValid:r.observable(null!=n.BillingInfo),submit:function(e){if(e.billingInfo){var t=e.billingInfo.CountryCode,n=e.billingInfo.RegionCode;if(t&&b.indexOf(t)>=0&&!n)return a.isBillingInfoValid(!1),void(0,m.alertError)({resourceKey:"Dialogs.Purchase.Validation.RegionRequiredErrorMessage"});e.isSubmitting(!0),c.ZP.checkoutWithConfirmation({promoCode:void 0}).then((function(e){g.k.handle(v.E.Finish,e.OrderId),i.hide(f.Y.Ok)})).catch((function(){return(0,m.logAndAlertError)({resourceKey:"Checkout.DeclinedMessage"})})).finally((function(){return e.isSubmitting(!1)}))}},close:function(){i.hide(f.Y.Cancel)},selectProduct:function(e){a.selectedProduct(e),e.id!==a.currentSubscriptionProductId&&c.ZP.addProductToBasket({id:e.Id,type:e.Type,issue:t.issueId,articleId:t.articleId}).then((function(){a.selectedProduct(e),a.currentState(o.confi{a.basketInfo(e.Basket),i.resize()}))}){return a.currentState()!==o.main},back:function(){return a.backIsVisible()?(a.currentState(o.main),i.resize()):a.close()},changeProduct:function(){a.currentState(o.main),i.resize()},changeBillingInfo:function(){var e="";a.requestedContent&&(a.requestedContent.issueId&&(e+="&RequestedContent.issueId=".concat(a.requestedContent.issueId)),a.requestedContent.articelId&&(e+="&RequestedContent.articleId=".concat(a.requestedContent.articelId))),a.selectedProduct()&&(e+="&preselectedproduct.id=".concat(a.selectedProduct().Id),e+="&preselectedproduct.type=".concat(a.selectedProduct().Type)),l.Z.redirect("".concat(window.basePath,"Accounting/Payment/?GoToStep=2").concat(e))},showAllProducts:function(){a.currentState(o.allProducts),i.resize()}};return a.currentState.subscribe((function(e){switch(e){case o.main:g.k.handle(v.E.SubscriptionPlans);break;case o.confirm:g.k.handle(v.E.PaymentInformation);break;default:throw new Error("Current State ".concat(e," Not Implemented"))}})),a.currentState(o.main),a}({dialog:n,requestedContent:i,purchaseInfo:a,isArchive:s}),u={templateName:"v7.Client.Dialogs.Purchase",model:o,name:"PurchaseDialog"};n.onHide((function(n,i){return i.status===f.Y.Ok?e(i.context):t({userCancelled:!0})})),n.show(u)}))}function C(e){return window.location=(0,s.hr)(e)?"".concat(window.basePath,"Accounting/UpgradeSubscription/"):e,Promise.reject("UpgradeSubscription page")}function I(e){var t=d.Z.get("Authentication.EnablePublisherAuthenticationWebService",!1),n=d.Z.get("Authentication.ExternalUpgradeSubscriptionPage",null);return n&&(n=n.replace("__CID__",(0,a.$W)(e.issueId)).replace("__ISSUEDATE__",(0,a.HA)(e.issueId))),t&&n?C(n):function(){return(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,(0,y.i)()];case 1:return[2,(null==(e=t.sent())?void 0:e.purchaseDialogEnabled)?e.showPurchaseDialog:null]}}))}))}().then((function(t){return"function"==typeof t?t():(0,u.Ik)().then((function(t){return t?c.ZP.getPurchaseInfo(e).then((function(i){switch(t.subscriptionMode){case h.V.Bundle:return C(n);case h.V.SingleCopy:return w({requestedContent:e,purchaseInfo:i,isArchive:!1});default:var r=t.isAdditionalIssuesAllowed&&i.Products.length>0;return(0,o.isEmpty)(i.CurrentSubscriptionProductId)||0===t.subscriptionBalance&&!r?C(n):w({requestedContent:e,purchaseInfo:i,isArchive:!1})}})):C(n)}))}))}function P(e){return cnt:e,purchaseInfo:t,isArchive:!0})}))}t.default={purchase:I,purchasearchive:P}},79987:function(e,t,n){"use strict";n.d(t,{Ut:function(){return p},qy:function(){return h},yv:function(){return d}});var i,r=n(22970),o=n(43541),a=n(88769),s=n(24995),u=n(70263),c=n(18835),l=((i={})[a.WQ.article]={getDirectLink:function(e){return(0,u.getArticleDirectLink)(e.articleId)},shareByEmail:function(e,t){return(0,c.bG)(e.articleId,t)}},i[a.WQ.page]={getDirectLink:function(e){return(0,s.KM)({issue:e.issue,pages:e.pageNumbers||[e.page]}).then((function(e){return(0,s.FO)(e.id)}))},shareByEmail:function(e,t){return(0,s.KM)({issue:e.issue,pafunction(e){return(0,c.SL)(e.id,t)}))}},i[a.WQ.pageSet]={getDirectLink:function(e){return(0,s.FO)(e.pageSetId)},shareByEmail:function(e,t){return(0,c.SL)(e.pageSetId,t)}},i[a.WQ.comment]={getDirectLink:function(e){return(0,u.getArticleDirectLink)(e.articleId).then((function(t){return{url:"".concat(t.url,"/").concat(e.commentKey)}}))}},i);function d(e){if(!e)return Promise.reject("context not specified");var t=l[e.contentType];return t?t.getDirectLink(e).then((function(e){return t=e.url,n=new o.Z(t),i=new o.Z(window.location.href),n.path(window.basePath.replace(/\/$/,"")+n.path()),n.protocol(i.protocol()),n.host(i.host()),decodeURIComponent(n.toString());var t,n,i})):Promise.reject("unknown content type")}function h(e){if(!e)return!1;var t=l[e.contentType];return!(!t||!t.shareByEmail)}function p(e,t){if(!e)return Promise.reject(new Error("context not specified"));var n=l[e.contentType];return n&&n.shareByEmail?Promise.all((0,r.ev)([],(0,r.CR)(t.to),!1).map((function(i){var o=(0,r.pi)((0,r.pi)({},t),{to:[i]});return n.shareByEmail(e,o)}))):Promise.reject(new Error("unknown content type"))}},39188:function(e,t,n){"use strict";n.d(t,{Bu:function(){return o},Wz:function(){return a},b1:function(){return s}});var i=nt("ui.SignIn.ExternalSystems")||[]}function a(){var e=i.Z.get("ui.SignIn.customTemplate");reon.SocialNetworkSignInAllowed",!1)}},36111:function(e,t,n){"use strict";var i=n(22970),r=n(60231),o=n(40180),a=n(60683),s=n(17447),u=n(18518),c=n(91574),l=n(92912),d=n(34829),h=n(15063),p=n(88477),f=function(){function e(e){var t=this;this._dialog=e,this.isSubmitting=r.observable(!1),this.isLoading=r.observable(!1);var n=s.ZP.val("Dialogs.Validators.Required");this.profile={nickname:r.observable("").extend({required:n,trackDirtyState:!0}),nicknameHasFocus:r.observable(!1),firstName:r.observable(""),firstNameHasFocus:r.observable(!1),lastName:r.observable(""),lastNameHasFocus:r.observable(!1),email:r.observable("").extend({email:s.ZP.val("Dialogs.Signin.EmailRequired","Valid email address is required"),trackDirtyState:!0}),emailHasFocus:r.observable(!1),avatarImageId:r.observable(),photoUrl:r.observable("")},this.avatar=r.observable("");var i=function(){t.avatar((0,a.b_)({nickname:t.profile.nickname(),imageId:t.profile.avatarImageId(),fallbackAvatarUrl:t.profile.photoUrl()}))};this.profile.nickname.subscribe(i),this.profile.avatarImageId.subscribe(i),i(),this.notifications={enablePromotional:r.observable(!1),enableTechnical:r.observable(!1)},this._shouldBeResized=r.pureComputed((function(){return 1*t.profile.nickname.hasErrors()+2*t.profile.email.hasErrors()})).extend({deferred:!0}),this._shouldBeResizedSubscription=this._shouldBeResized.subscribe((function(){t._dialog.resize()})),this._originalProfile={},this._originalNotificauldBeResizedSubscription.dispose()},e.prototype.load=function(){var e=this;return this.isLoading(!0),Promise.all([(0,h.Ai)(),(0,h.DZ)()]).then((function(t){var n=(0,i.CR)(t,2),r=n[0],o=n[1];e._originalProfile=r,e._originalNotifications=o,e.profile.email(r.email),e.profile.nickname(r.nickname),e.profile.firstName(r.firstName),e.profile.lastName(r.lastName),e.profile.avatarImageId(r.avatarImageId),e.profile.photoUrl(r.photoUrl),e.notifications.enablePromotional(o.enablePromotional),e.notifications.enableTechnical(o.enableTechnical),(0,d.resetValidationState)(e.profile)})).catch(p.logAndAlertError).finally((function(){e.isLoading(!1)}))},e.prototype.close=function(){this._dialog.hide(u.Y.Cancel)},e.prototype.submit=function(){var e=this;if(this.profile.firstName.valueHasMutated(),this.profile.lastName.valueHasMutated(),this._dialog.resize(),(0,d.validate)(this.profile)&&!this.isSubmitting()){this.isSubmitting(!0);var t=[];this.notifications.enablePromotional()===this._originalNotifications.enablePromotional&&this.notifications.enableTechnical()===this._originalNotifications.enableTechnical||t.push((function(){return(0,h.lz)({enablePromotional:e.notifications.enablePromotional(),enableTechnical:e.notifications.enableTechnical()})})),this.profile.nickname()===this._originalProfile.nickname&&this.profile.firstName()===this._originalProfile.firstName&&this.profile.lastName()===this._originalProfile.lastName||t.push((function(){return(0,h.ck)({nickname:e.profile.nickname(),firstName:e.profile.firstName(),lastName:e.profile.lastName()})})),this.profile.email()!==t{return(0,h.vV)(e.profile.email())})),(0,o.reduce)(t,(function(e,t){return e.then(t)}),Promise.resolve()).then((function(){e._dialog.hide(u.Y.Ok)})).catch(p.alertError).finally((function(){e.isSubmitting(!1)}))}},e}();t.Z={show:function(){return new Promise((function(e){var t=c.Z.createInstance(),n=new f(t);t.onHide((function(){n.dispose(),e()})),l.ZP.show(),Promise.all([s.ZP.loaded(),n.load()]).then((function(){t.show({templateName:"v7.Client.Dialogs.PersonalizeAccount",model:n}),window.setTimeout((function(){return t.resize()}),60)})).finally((function(){l.ZP.hide()}))}))}}},32349:function(e,t,n){"use strict";n.d(t,{h:function(){return u}});var i,r=n(40180),o=n(88477),a=n(36111),s=((i={})[1]=function(){return a.Z.show()},i);function u(e){if(null==e)return Promise.resolve();if(!Array.isArray(e))throw new TypeError("Array expected");return 0===e.length?Promise.resolve():(0,r.reduce)(e,(function(e,t){return e.then((function(){var e=s[t];return void 0!==e?e():(0,o.logError)('Unknown directive "'.concat(t,'"'))}))}),Promise.resolve())}},626:function(e,t,n){"use strict";n.d(t,{Y:function(){return u}});var i=n(22970),r=n(40180),o=n(23197),a=n(58653),s=function(e){function t(t,n){var i=e.call(this)||this;return i._action=t,i._predefinedContext=n,i._buildContext=i._buildContext.bind(i),i.available=i.available.bind(i),i.enabled=i.enabled.bind(i),i.activate=i.activate.bind(i),i}return(0,i.ZT)(t,e),t.prototype._buildContext=function(e){return(0,r.assign)({},this._predefinedContext,e)},t.prototype.available=function(e){return this._action.available(this._buildContext(e))},t.prototype.enabled=function(e){return this._action.enabled(this._buion.activate(this._buildContext(e))},t}(o.Z);function u(e,t){var n=a.Z[e];if(void 0===n)throw new Error("action '".concat(e,"' not supported"));if(null==t)return n;if(!(0,r.isObject)(t))throw new Error("unexpected type of action params '".concat(t,"' for action '").concat(e,"'. Object expected."));return new s(n,t)}},26199:function(e,t,n){"use strict";n.d(t,{Rl:function(){return a},fK:function(){return u},uC:function(){return s}});var i=n(70263),r=n(24995),o=n(88769);function a(e){var t=e.context,n=e.collections;if(!t)return Promise.reject("context not specified");var a=Promise.resolve(),s={collections:n};return t.article?(s.contentType=o.qt.article,s.contentId=t.article.ArticleId,s.articleId=t.article.Id,a=(0,i.upsertContentCollections)(s)):t.page?a=(0,r.KM)({issue:t.issue,pages:t.pageNumbers||[t.page]}).then((function(e){return s.contentId=e.id,s.contentType=o.qt.pageSet,(0,i.upsertContentCollections)(s)})):t.pageSet&&(s.contentId=t.pageSet.id,s.contentType=o.qt.pageSet,a=(0,i.upsertContentCollections)(s)),a}function s(e){var t=e.contentId,n=e.contentType,a=e.articleId;return t?n===o.qt.article?(0,i.removeArticleFromCollections)({contentId:t,articleId:a}):n===o.qt.pageSet?(0,r.QC)(t):Promise.reject("unknown contentType"):Promise.reject("contentId not specified")}function u(e){return e?e.article?(0,i.getArticleCollections)(e.article.ArticleId):e.page?(0,r.G)({issue:e.issue,pages:e.pageNumbers||[e.page]}).then((function(e){return e?(0,r.h_)(e.id):[]})):e.pageSet?(0,r.h_)(e.pageSet.id):Promise.reject("unknown context"):Promise.reject("context not specified")}},70263:function(e,t,n){"use strict";n.r(t),n.d(t,{bookmarkCreateSubscription:function(){return f},bookmarkDeleteSubscription:function(){return p},bookmarksChangeSubscription:function(){return h},events:function(){return d},getArticleCollections:function(){return g},getArticleDirectLink:function(){return _},getBookmark:function(){return y},removeArticleFromCollections:function(){return v},upsertContentCollections:function(){return m}});var i=n(79913),r=n(74981),o="v1",a={addBookmarkToArticle:function(e){return(0,i.zf)("bookmarks","article",e,{disaks","pageset",e,{disableRetry:!0})},modifyBookmarkCollections:function(e,t){return r.Z.put("bookmarks","".concat(e,"/collections"),te("bookmarks",e,{disableRetry:!0})},getBookmarkCollections:function(e){return r.Z.get("bookmarks","".concat(e,"/collections"))},assignBookmarkToCollection:function(e,t){return r.Z.put("collections","".concat(t,"/bookmarks"),{bookmarkId:e},{disableRetry:!0})},removeBookmarkFromCollection:function(e,t){return r.Z.delete("collections","".concat(t,"/bookmarks/").concat(e),{dissues","".cn(e){return r.Z.get("bookmarks",e)},upsertArticleCollections:function(e,t){return r.Z.put("".concat(o,"/articles"),"".concat(e,"/collections"),t,{disableRetry:!0})},upsertPageSetCollections:function(e,t){return r.Z.put("".concat(o,"/pagesets"),"".concat(e,"/collections"),t,{disableRetry:!0})},getArticleCollections:function(e){return r.Z.get("".concat(o,"/articles"),"".concat(e,"/collections"))},removeArticleFromCollections:function(e){return r.Z.delete("".concat(o,"/articles"),"".concat(e,"/collections"),{disableRetry:!0})},getArticleDirectLink:function(e){return r.Z.get("".concat(o,"/articles"),"".concat(e,"/directlink"))}},s=n(19237),u=n(11569),c=n(88769),l=n(40180),d={create:1,delete:2},h=new s.x,p=h.pipe((0,u.h)((function(e){return e.event===d.delete}))),f=h.pipe((0,u.h)((function(e){return e.event===d.create})));function m(e){var t=e.contentId,n=e.collections,i=e.contentType,r=e.articleId;if(!t)return Promise.reject("contentId not specified");if((0,l.isEmpty)(n))return Promise.rrn h.next({event:d.create,data:e})},s={l.map)(n,(function(e){return{id:e}})),i===c.qt.article?a.({primaryArticleId:t,articleId:r})})):i===c.qt.pageSet?a.function(){return o({pageSetId:t})})):Promise.reject("unknown contentType")}function g(e){return e?a.getArticleCollections(e):Promise.reject("articleId not specified")}function v(e){var t=e.contentId,n=e.articleId;return t?a.removeArticleFromCollections(t).then((function(){return e={primaryArticleId:t,articleId:n},h.next({event:d.delete,data:e});var e})):Promise.reject("contentId not specified")}function y(e){return e?a.getBookmark(e).then((function(e){return function(e){var t={id:e.bookmarkId,created:e.created,collections:e.collections,ownerId:e.enAccountNumber,bookmarkType:e.bookmarkType};return e.bookmarkType===c.Vg.articles?t.articleId=e.articleId:e.bookmarkType===c.Vg.pages&&(t.pageSet={id:e.pageSetId,issue:e.issue,pages:e.pages}),t}(e)})):Promise.reject("bookmarkId not specified")}function _(e){return e?a.getArticleDirectLink(e):Promise.rejectete this._timeouts[e])},e}();t.Z=o},72633:function(e,t,n){"use strict";var i=n(22970),r=n(40180),o=n(42854),a=function(){function e(e){var t=this,n=e.provider,a=e.ViewModel,s=e.target,u=e.pageSize,c=e.filters,l=void 0===c?{}:c,d=e.orderBy;if(!(0,r.isFunction)(n))throw new TypeError("Publications provider has to be a function.");if(!(0,r.isFunction)(a))throw new TypeError("ViewModel has to be a constructor function.");this._filters=l,this._stream=new o.Z({provider:n,pageSize:u,filters:l,orderBy:d}),this._target=s,this._stream.stream.subscribe((function(e){var n;null!==e?(n=t._target).push.apply(n,(0,i.ev)([],(0,i.CR)((0,r.map)(e,(function(e){return new a(e)}))),!1)):t._target([on(e){(0,r.merge)nction(e,t){this._sthis._stream.filter(this._filters)},e.prototype.hasMore=function(){return this._stream.hasMore()},e.prototype.getMore=function(){this._stream.getMore()},e}();t.Z=a},42854:function(e,t,n){"use strict";var i=n(19237),r=n(40180),o=function(){function e(e){var t=void 0===e?{}:e,n=t.provider,o=t.filters,a=void 0===o?{}:o,s=t.orderBy,u=t.pageSize,c=void 0===u?50:u;if(!(0,r.isFunction)(n))throw new TypeError("Publications provider has to be a function.");this._provider=n,this._subject=new i.x,this._filters=a,this._orderBy=s,this._pageSize=c,this._skip=0,this._hasMore=!0,this._resetScheduled=!1,this._latestResult=void 0,this._getMoreCallCounter=0}return e.prototype._reset=function(){this._skip=0,this._hasMore=!0,this._getMoreCallCounter=0,this._latestResult=void 0,this._resetScheduled=!0},e.prototype._next=function(){var e=this,t=(new Date).getMilliseconds();return this._latestRequestTimestamp=t,this._provider({filters:this._filters,orderBy:this._orderBy,offset:this._skip,limit:this._pageSize}).then((function(n){e._latestRequestTimestamp===t&&(e._skip+=e._pageSize,e._hasMore=n.items.length===e._pageSize,function(e,t){if(void 0===e&&void 0!==t)return!1;if(void 0!==e&&void 0===t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n].cid!==t[n].cid)return!1;return!0}(e._latestResult,n.items)||(e._latestResult=n.items,e._resetScheduled&&(e._subject.next(null),e._resetScheduled=!1),e._subject.next(n.items)))}))},e.prototype._getMore=function(){var e=this;this._next().then((function(){e._getMoreCallCounter>0&&(e._getMoreCallCounter--,e._getMoreCallCounter>0&&e._getMore())}))},Object.defineProperty(e.prototype,"stream",{get:function(){return this._subject},enumerable:!1,configurable:!0}),e.prototype.filter=function(e){var t=e.searchText,n=e.hasCategories;this._filters.text=t,this._filters.hasCategories=n,this._reset(),this.getMore()},e.prototype.sort=function(e,t){this._orderBy={name:e,order:t},this._reset(),this.getMore()},e.prototype.getMore=function(){this._hasMore&&(0===this._getMoreCallCounter?(this._getMoreCallCounter++,this._getMore()):this._getMoreCallCounter++)},e.prototype.hasMore=function(){return this._hasMore},e}();t.Z=o},23431:function(e,t,n){"use strict";var i,r=n(20384),o=n(98106),a={name:"name",rank:"rank",latestIssueDate:"latestIssue.issueDate"},s=((i={})[o.a.Ascending]=1,i[o.a.Descending]=-1,i),u=function(){function e(e){var t=e.target,n=e.source,i=e.pageSize,o=e.orderBy;this._collection=new r.nd.ObservableCollectionNew(n),this._collection.setPageSize(i),this._target=t,o&&this._applySorting(o)}return e.prototype._applySorting=function(e){var t=e.name,n=e.order,i=a[t];if(!i)throw new Error('Unexpected sorting name - "'.concat(t,'"'));this._collection.setSort(i,s[n])},e.prototype.sort=function(e,t){this._applySorting({name:e,order:t}),this._collection.render(),this._target(this._collection.items())},e.prototype.search=function(e){this._collection.setFilter(e,"name").render(),this._target(this._collection.items())},e.prototype.hasMore=function(){return this._collection.canRenderMore()},e.prototype.getMore=function(){this._collection.renderMore(),this._target(this._collection.items())},e}();t.Z=u},75587:function(e,t,n){"use strict";var i=n(40180),r=n(17447),o=n(84066),a=function(){function e(t){(0,i.extend)(this,t),this.hasSupplements=!(0,i.isEmpty)(t.supplements),this.hasSupplements&&(this.supplements=(0,i.map)(t.supplements,(function(t){return new e(t)})))}return e.prototype.formatIssueDate=function(){return r.ZP.formatDate(this.latestIssue.issueDate,"someresourcename","ddd, d MMM yyyy")},e.prototype.getThumbUrlByWidth=function(e){return void 0===e&&(e=160),o.Z.getThumbUrlByIssueForWidth(this.latestIssue.key,e,1,!1)},e}();t.Z=a},28873:function(e,t,n){"use strict";var i=n(91574),r=n(18518),o=n(17447),a=n(48921),s=n(88477),u=n(60231),c=n(87079),l=n(54591),d=n(94267),h=function(){function e(e){var t=this,n=e.dialog,i=e.collection,d=e.res,h=void 0!==i&&void 0!==i.id&&null!==i.id;this.collection=void 0!==i?new c.Z(i):new c.Z({isPublic:!0}),this.isValid=u.computed((function(){return t.collection.isValid()})),this.dialogTitle=h?d.val("v7.Client.Dialogs.EditCollection.Title","Colletion Options"):d.val("v7.Client.Dialogs.CreateCollection.Title","Create collection"),this.saveButtonText=h?d.val("Buttons.Save.Text","Save"):d.val("Buttons.Create.Text","Create"),this.deleteEnabled=h&&!i.isDeleteDisabled,this.save=function(){if(t.isValid()){var e=t.collection.toDto();h?a.Rm(e.id,e).then((function(){return n.hide(r.Y.Ok)})).catcn(e){n.hide(r.Y.Ok,{collection:e})})).catch(s.logAndAlertError)}},this.deleteCollection=function(){var e=t.collection.contentCount()>0?o.ZP.val("v7.Client.Dialogs.Collections.DeleteContentConfirmationMessage"):o.ZP.format("v7.Client.Dialogs.Collections.DeleteConfirmationMessage",t.collection.name());(new l.Z).confirm(e).then((function(){return t._deleteCollection()})).then((function(){n.hide(r.Y.Ok)}))},this.cancel=function(){n.hide(r.Y.Cancel)}}return e.prototype._deleteCollection=function(){return d.Z.show(),a.C5(this.collection.id()).catch((function(e){return(0,s.logError)(e),(0,s.alertError)({resourceKey:"v7.Client.Dialogs.Collections.DeleteErrorMessage"})})).finally((function(){return d.Z.hide()}))},e}();t.Z={show:function(e){var t=void 0===e?{}:e,n=t.parent,r=t.collection;return new Promise((function(e){o.ZP.loaded().then((function(){var t=i.Z.createInstance(n),a=new h({dialog:t,collection:r,res:o.ZP}),s={templateName:"v7.Client.Dialogs.EditCollection",model:a,name:"EditCollectionDialog"};t.onHiction(){a.collection.nameFocus(!0)})),t.show(s)}))}))}}},87079:function(e,t,n){"use strict";var i=n(60231),r=n(34829),o=n(4629),a=function(){function e(e){var t=this;void 0===e&&(e={}),this.id=i.observable(e.id),this.name=i.observable(e.name).extend({required:!0,trackDirtyState:!0}),this.nameFocus=i.observable(!1),this.contentCount=i.observable(e.contentCount),this.type=i.observable(e.type||o.y.User),this.isPublic=i.observable(e.isPublic),this.isValid=i.computed((function(){return(0,r.validate)(t)})),Object.frs.type(),isPublic:this.isPublic()}},e}();t.Z=a},20257:function(e,t,n){"use strict";var i=n(60231);t.Z=function(){this.previewUrl=i.observable(),this.isLoading=i.observable(!1)}},94711:function(e,t,n){"use strict";var i=n(22970),r=function(e){function t(t){var n=void 0===t?{}:t,i=n.imageId,r=n.width,o=n.height,a=e.call(this)||this;return a.imageId=i,a.width=r,a.height=o,a.type="image",a}reheight:this.height,type:this.type}},t}(n(20257).Z);t.Z=r},16778:function(e,t,n){"use strict";var i=n(22970),r=function(e){function t(t){var n=void 0===t?{}:t,i=n.url,r=n.thumbnailImageId,o=n.thumbnailWidth,a=n.thumbnailHeight,s=e.call(this)||this;return s.url=i,s.thumbnailImageId=r,s.thumbnailHeight=a,s.thumbnailWidth=o,s.type="video",s}rehis.thumbnailWidth,type:this.type}},t}(n(20257).Z);t.Z=r},25747:function(e,t,n){"use strict";n.d(t,{Z:function(){return T}});var i,r=n(20384),o=n(25539),a=n(40180),s=n(6677),u=n(79913),c=n(74981),l=n(66996),d={ARTICLE:"Article"},h=new l.Z("comment-imag is required for Article context")}},i);function f(e){return"".concat("v2","/").concat(e)}function m(e){if(!e.contentType)throw new Error("Content type is required");var t=p[e.contentType];if(!t)throw new Error("Unexpected content type: ".concat(e.contentType));t.validate(e)}function g(e,t){var n={articleId:e.articleId,editText:t};return e.parentId&&(n.parentId=e.parentId),e.opinionId&&(n.opinionId=e.opinionId),e.attachments&&e.attachments.length&&(n.attachments=e.attachments),n}var v={contentTypes:Object.freeze(d),contentOrderBy:Object.freeze({byDefault:0,byRatingAsc:1,byRatingDesc:2,byDateAsc:3,byDateDesc:4}),createComment:function(e,t){if(m(e),t.length<1)throw new Error("comment must not be empty");var n=g(e,t);return(0,u.zf)(f("comments"),"",JSON.stringify(n),{contentType:"application/json",disableRetry:!0})},updateComment:function(e,t,n){if(m(e),!t)throw new Error("commentId is mandatory");if(n.length<1)throw new Error("comment must not be empty");var i=g(e,n);return(0,u.bK)(f("comments"),"".concat(t),JSON.stringify(i),{contentType:"application/json",disableRetry:!0})},deleteComment:function(e,t){if(m(e),!t)throw new Error("commentId is mandatory");var n=e.contentType===d.ARTICLE?"articles/".concat(e.articleId,"/comments"):"comments";return(0,u.W7)(f(n),"".concat(t))},getCommentsPage:function(e){!function(e){if(m(e),0!==e.offset&&!e.offset||e.limit<1)throw new Error('Invalid "offset" and "limit" parameters.');if(e.orderBy<0)throw new Error('Invalid "orderBy"')}(e);var t={offset:e.offset,limit:e.limit,direction:e.direction};e.orderBy>-1&&(t.orderBy=e.orderBy),e.markerCommentId&&(t.markerCommentId=e.markerCommentId),e.contextProfileName&&(t.contextProfileName=e.contextProfileName);var n=e.parentId?"".concat(e.articleId,"/comments/").concat(e.parentId,"/replies"):"".concat(e.articleId,"/comments");return c.Z.get(f("articles"),n,t)},getMeta:function(e){return m(e),c.Z.get(f("articles"),"".concat(e.articleId,"/meta"))},uploadVideo:function(e){var t=void 0===e?{}:e,n=t.articleId,i=t.commentId,r=void 0===i?"new":i,o={videoUrl:t.videoUrl,previewUrl:t.previewUrl};return(0,u.zf)(f("articles"),"".concat(n,"/comments/").concat(r,"/artifacts/video"),o)},uploadImage:function(e){var t=void 0===e?{}:e,n=t.onFileAdded,i=t.onProgress;return h.upload({onFileAdded:n,onProgress:i})},abuseReportComment:function(e,t,n){if(!t)throw new Error("commentId is mandatory");m(e);var i={articleId:e.articleId,action:n};return(0,u.zf)(f("comments"),"".concat(t,"/abuses"),i,{disableRetry:!0})},hideComment:function(e,t){return(0,u.zf)(f("hiddencomments"),"",JSON.stringify({contentId:e,commentId:t}),{contentType:"application/json",disableRetry:!0})},banUser:function(e){return(0,u.zf)(f("hiddenusers"),"",JSON.stringify({profileName:e}),{contentType:"application/json",disableRetry:!0})},unBanUser:function(e){return(0,u.W7)(f("h){return c.Z.get(f("hiddenusers"))}},y=n(20809),_="nd.social.comments:CommentsMetaUpdated",b="nd.social.comments:CommentUpdated",w="nd.social.comments:CommentDe.on(e,t),function(){C.unbind(e,t)}}}function P(e,t,n){t&&n?C.trigger(e,[t,n]):s.Z.error("either {context} or {meta} is not specified.")}function x(e,t,n,i){t&&n?C.trigger(e,[t,n,i]):s.Z.error("either {context} or {commentId} is not specified.")}funcMeta(e).then((function(t){P(_,e,t)}))}var T={contentTypes:v.contentTypes,contentOrderBy:v.contentOrderBy,createComment:function(e,t){return v.createComment(e,t).then((function(t){return S(e),new o.Z(t)}))},updateComment:function(e,t,n){return v.updateComment(e,t,n).then((function(n){return x(b,e,t,n),new o.Z(n)}))},deleteComment:function(e,t){return v.deleteComment(e,t).then((function(n){return S(ereturn v.abuseReportComment(e,t,n)},getCommentsPage:function(e){var t=e.articleId,n=e.parentId,i=e.offset,r=e.limit,s=e.orderBy,u=e.markerCommentId,c=e.direction,l=void 0===c?1:c,d=e.contextProfileName,h=v.contentTypes.ARTICLE;return v.getCommentsPage({contentType:h,articleId:t,parentId:n,offset:i,limit:r,orderBy:s,markerCommentId:u,direction:l,contextProfileName:d}).then((function(e){return e.items=(0,a.map)(e.items,(function(e){return new o.Z(e)})),e}))},uploadVideo:function(e){var t=void 0===e?{}:e,n=t.articleId,i=t.commentId,r=t.videoUrl,o=t.previewUrl;return v.uploadVideo({articleId:n,commentId:i,videoUrl:r,previewUrl:o})},uploadImage:function(e){var t=void 0===e?{}:e,n=t.onFileAdded,i=t.onProgress;return v.uploadImage({onFileAdded:n,onProgress:i})},hideComment:function(e,t){return v.hideComment(t.articleId,e).then((function(n){return S(t),x(w,t,e),n}))},banUser:functhen((function(e){return t&&S(t),e}))},unBanUser:function(e){return v.unBanUser(e)},getBannedUsersList:function(){((function(e){return new y.E(e)}))}))},onCommentsMetaUpdated:I(_),onCommentUpdated:I(b),onCommentDeleted:I(w),emitCommentsMetaUpdated:P.bind(null,_)}},73504:function(e,t,n){"use strict";var i=n(17790),r=n(58741),o=n(37531),a=n(42988),s=n(4299),u=n(11569),c=n(55895),l=n(22509),d=n(95901),h=n(88769),p=n(24995),f=n(75154),m=function(){function e(e){this.context=e}return e.prototype.submitSnippetToProcess=function(){var e,t=this,n=((e={})[h.BQ.page]=function(){return(0,p.KM)({issue:t.context.issue,pages:t.context.pageNumbers||[t.context.page]}).then((function(e){returturn(0,f.mv)(t.context.pageSet.id)},e)[(this.context.preview||{}).previewType];return n?Promise.resolve(n()):Promise.resolve(void 0)},e.prototype.createSnippetObservable=function(){return(0,i.D)(this.submitSnippetToProcess()).pipe((0,s.V)((function(e){return e?e.status===h.d6.ready?(0,r.of((function(){return(0,f.Aj)(e.url)})),(0,u.h)((function(e){return e.status===h.d6.ready})),(0,c.q)(1),(0,l.U)((function(e){return e.url})),(0,d.L)(6e4,(0,a._)(new Error("Timeout ".concat(6e4," ms occurred"))))):(0,r.of)(void 0)})))},e.prototype.getUrl=function(){var e=this;return tSnippetObservable().subscribe(t,n)}))),this._data},e}();t.Z=m},23193:function(e,t,n){"use strict";var i=n(60231),r=n(40180),o=n(88769),a=n("PagesSelector.PagesSelected",e)}var h={viewModel:function(){function e(e){var t=(void 0===e?{}:e).context;if(!t||!t.preview)throw new Error("preview context not found");this.preview=i.observable(),this.context=t,this.init()}return e.prototype.init=function(){var e=function(e){var t,n=((t={})[o.BQ.article]=function(){var t=e.article||{},n=t.Issue&&{date:t.Issue.DateFormatted,title:t.Issue.Title},i=[];return(0,r.forEach)(t.Images,(function(e){var t=Math.round(14e3/e.Width),n=Math.round(e.Height*t/100);if(e.Width>=c){var r=e.Url.match(/[\?]/g)?"&":"?",o="".concat(e.Url).concat(r,"scale=").concat(t);i.push({url:o,width:c,height:n})}})),i.sort(l),{snippetTemplate:"article-snip-template",image:i[0],title:t.Title,issue:n,tasks:[]}},t[o.BQ.page]=function(t){var n=e.pageNumbers&&e.pageNumbers.length>1,r=e.pageNumbers&&e.pageNumbers[0]||e.page,o={snippetTemplate:"page-snip-template",title:t.issueName,issueDate:t.issueDate,pageSet:n&&{countText:d(e.pageNumbers.length)},isWaiting:i.observable(!0),pageUrl:i.observable(null),tasks:[]},s=t.getPageInfo(r);return o.tasks.push(s),s&&s.then((function(t){o.pageUrl(a.Z.getPageImageUrl(e.issue,r,{width:t.width,height:t.height},{width:c}))})),o},t[o.BQ.pageSet]=function(e){var t=e.pagesCount>1;return{snippetTemplate:"page-snip-template",title:e.issueName,issueDate:e.issueDate,pageSet:t&&{countText:d(e.pagesCount)},pageUrl:a.Z.getPageImageUrl(e.issue,e.pageLayout.number,{width:e.pageLayout.width,height:e.pageLayout.height},{width:c}),isWaiting:i.observable(!0),tasks:[]}},t),u=e.preview,h=n[u.previewType]&&n[u.previewType](u);if(!h)throw new Error("preview context is unknown");var p=h.tasks||[];return u.snippet&&u.snippet.getUrl&&p.push(u.snippet.getUrl()),Promise.all(p)eturn h.isWaiting&&h.isWaiting(!1)})),h}(this.context);this.preview(e)},e}(),template:{ndTemplate:"v7.Client.ContextPreview.ko.Component"},synchronous:!0},p="context-preview";i.components.isRegistered(p)||i.components.register(p,h)},54836:function(e,t){"use strict";var n={},i=function(){function e(){}return e.prototype.register=function(e,t){n[e]=t},e.prototype.registerAction=function(e,t){var n=this.get(e);n&&(n.prototype.action=t)},e.prototype.get=function(e){return n[e]},e}();t.Z=i},62154:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var i=n(40180),r=n(17447),o=n(60231),a=function(e){var t=void 0===e?{}:e,n=t.id,i=t.resourceName,a=t.needsTimeAdjustment;this.id=n,this.name=(0,o.observable)(r.ZP.val(i)),this.value=n,this.needsTimeAdjustment=a},s=[{id:1024,resourceName:"EmailAlerts.Page.Frequency.Off",needsTimeAdjustment:!1,paidSubscriptionOnly:!1},{id:24,resourceName:"SearchMonitorPanel.HoursOnesDay",needsTimeAdjustment:!0,paidSubscriptionOnly:!1},{id:48,resourceName:"SearchMonitorPanel.HoursEveryOtherDay",needsTimeAdjustment:!0,paidSubscriptionOnly:!1},{id:0,resourceName:"SearchMonitorPanel.HoursAsItHappend",needsTimeAdjustment:!1,paidSubscriptionOnly:!1}],u=function(e){var t=this,n=(void 0===e?{}:e).IsFree,r=(0,i.chain)(s).filter((function(e){return!e.paidSubscriptionOnly||!n})).map((function(e){return new a(e)})).value();(0,i.forEach)(r,(function(e){t[e.id]=e})),this.array=r}},11347:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var i=n(40180),r=function(){function e(){}return e.prototype.format=function(e){var t=e>11?"PM":"AM";return"".concat((e+11)%12+1,":00 ").concat(t)},e}(),o=function(){funcnction(e){return"".concat(e,":00")},e}(),a={12:new r,24:new o},s=function(e,t){this.id=e,this.name=a[t].format(e),this.value=e},u=funct(24,(function(t){re.forEach)(n,(function(e+e)||iprovidw o.Z),(0,i.w)(r.FX.AUTH0,new o.Z)},78867:function(e,t,n){"use strict";n.d(t,{V:function(){return o},w:function(){return a}});var i=n(40180),r={};function o(e){if(!(0,i.isString)(e))throw new TypeError("provider name is not specified");var t=r[e];if(void 0===t)throw new TypeError("".concat(e," provider implementation not registered"));return t}function a(e,t){if(void 0===e)throw new Error("provider is not specified");if(!(0,i.isString)(e))throw new TypeError("provider name has to be a string");if(!(0,i.isObject)(t)||!(0,i.isFunction)(t.authorize))throw new TypeError('provider has to be an object with method "a):Promh.Signp)(r.Hmethod.is.SIGNUP,context:t})},e}();t.Z=o},3284:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var i=n(33608),r=n(68602),o=n(79913),a=n(74981),s="mynewspapers"{return this.cids.iche=void 0,this._stream=new r.t(1)}return Object.definload(),this._stream.asObservable()},enumerable:!1,configurable:!0}),e.prototype.load=function(e){var t=this;return void 0===e&&(e=!1),e&&!(0,i.t)(this._cache)||void 0===this._cache?(this._cache=a.Z.g,t._stream.next(t._cache),t._cache})),this._cache):(0,i.t)(this._cache)?this._cache:Promise.resolve(this._cache)},e.prototype.removePublication=function(e){var t=this;return this.load().then((function(n){return n.contains(e)?function(e){return(0,o.$k)(s,"DeleteMyNewspaper",{cid:e})}(e).then((function(){return t.load(!0)})):n}))},e.prototype.addPublication=function(e){var t=this;return this.load().then((function(n){return n.contains(e)?n:function(e){return(0,o.$k)(s,"AddByCid",{cid:e})}(e).then((function(){return t.load(!0)})lication(e):t.addPublication(e)}))},e.prototype.enableAlert=function(e){return function(e){return(0,o.zf)(s,"EnableAlert",{cid:e})}(e)},e.protot(0,o.zf)(s,"DisableAlert",{cid:e})}(e)},e}());u.bind("tokenUpdated",(function(){return h.load(!0)}));var p=h},6727:function(e,t,n){"use strict";n.d(t,{Nb:function(){return c},hC:function(){return u},i1:function(){return o}});var i=n(20384),r=n(77261),o={video:1,image:2},a='<div class="atchd-item" />',s='<div class="atchd-item">\n        <a href="javascript:void(0)">\n            <img src="'.concat("data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",'" data-allow-default="true" />\n        </a>\n    </div>');function u(e,t,n,r,o){var a=i(s);a.css({width:"".concat(t,"px"),height:"".concat(n,"px"),top:"".concat(r,"px"),left:"".concat(o,"px")});var u=a.find("img").css({width:"".concat(t,"px"),height:"".concat(n,"px")});return e&&u.attr("src",e),a}function c(e,t,n,o,s){var u=r.Z.getPlayerIframe(e,t,n),c=i(u),l=i(a).css({width:"".concat(t,"px"),height:"".concat(n,"px"),top:"".concat(o,"px"),left:"".concat(s,"px")}).append(c);return Promise.resolve(l)}},74714:function(e,t,n){"use strict";var i=n(22970),r=n(40180),o=n(70832),a=n(6727),s=n(5121);function u(e,t,n){void 0===n&&(n=0);var i,o=0,a=n;return e&&e.length?((0,r.forEach)(e,(function(e){e.scaleToHeight(120),o+=e.width()})),i=t-o-2,(0,r.forEach)(e,(function(t,r){var s=t.width()/o;if(t.scaleToWidth(Math.floor(t.width()+s*i)),t.top(n+2),a=t.height()+t.top(),r>0){var u=e[r-1];t.left(u.left()+u.width()+2)}})),a):a}var c=function(){function e(e,t,n){void 0===n&&(n="picture"),this._puzzleItem=e,this._showGalleryOnClick=!!t,this._linkCssClass=n}return e.prototype._showGallery=function(){this._puzzleItem.showGallery()},e.prototype.render=function(){var e=this;return this._puzzleItem.thumbnailSrc().then((function(t){if(t){var n=e._puzzleItem,i=(0,a.hC)(t,n.width(),n.height(),n.top(),n.left());return i.find("a").addClass(e._linkCssClass),e._showGalleryOnClick&&i.click(e._showGallery.bind(e)),i}return null}))},e}(),l=function(e){function t(t,n){return void 0===n&&(n=!1),e.call(this,t,n,"video")||this}return(0,i.ZT)(t,e),t}(c),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),t.prototype.render=function(){var e=this._puzzleItem;return(0,a.Nb)(e.src(),e.width(),e.height(),e.top(),e.left())},t}(l),h=function(){function e(e,t){this._renderer=e,this._moreCounlery&&this.renderer._showGallery()},e.prototype.render=function(){var e=this;r>+'.concat(e._moreCount,"</div>"))}))},e}(),p=function(){function e(e,t,n,i,r,o){void 0===o&&(o=!1),this._puzzle=e,this.type=n,n===a.i1.video?(this._id=t.url,this._imageId=t.thumbnailImageId,this._width=t.thumbnailWidth,this._height=t.thumbnailHeight,this._renderer=i?new d(this):new l(this,!!r),this._src=t.url):(this._id=t.imageId,this._imageId=t.imageId,this._width=t.width,this._height=t.height,this._renderer=new c(this,!!r),this._src=t.imageId),o&&(this._renderer=new h(this._renderer,this._puzzle.moreItemsCount)),this._left=0,this._top=0}return e.prototype.id=function(){return this._id},e.prototype.height=function(){return this._height},e.prototype.width=function(){return this._width},e.prototype.left=function(e){return arguments.length&&(this._ts.length&&(this._top=e),this._top},e.prototype.imageSrc=function(e,t){return this._imageId?Promise.resolve((0,o.Jn)(this._imageId,{width:e,height:t})):Promise.resoageSrc(this.width(),this.height())},e.prototype.src=function(){return this._src},e.prototype.scaleToWidth=function(e){if(e){var t=e/this._width;this._height=Math.floor(this._height*t),this._width=e}},e.prototype.scaleToHeight=function(e){if(e){var t=e/this._height;this._width=Math.floor(this._width*t),this.n(){this._puzzle.showGallery(this)},e.prototype.render=function(){return this._renderer.render()},e}(),f=function(){function e(e,t){var n=this;void 0===e&&(e=[]),this._config=function(e){return(e=e||{}).itemsInLayout=e.itemsInLayout||4,e.renderVideoPlayer=!!e.renderVideoPlayer,e.showGalleryOnClick=!!e.showGalleryOnClick,e}(t);var i=Math.min(this._config.itemsInLayout,e.length);this.moreItemsCount=e.length-this._config.itemsInLayout,this._allAttachments=e.map((function(e,t){var r=n._config.itemsInLayout>1&&n.moreItemsCount>0&&t===i-1;switch(e.type){case"image":return new p(n,e,a.i1.image,n._config.renderVideoPlayer,n._config.showGalleryOnClick,r);case"video":return new p(n,e,a.i1.video,n._config.renderVideoPlayer,n._config.showGalleryOnClick,r);default:return null}})),this._attachments=this._allAttachments.length>this._config.itemsInLayout?this._allAttachments.slice(0,this._config.itemsInLayout):this._allAttachments}return e.prototype._renderContainer=function(e){var t=e.width(),n=function(e,t){var n=e.length;if(1===n){var i=(r=e[0]).height();return r.width()>t&&(r.scaleToWidth(t),r.height(Math.min(i,r.height()))),r.height()}if(2===n)return u(e,t);if(n>2){i=(r=e[0]).height();var r,o=e.slice(1,4);return r.scaleToWidth(t),r.height(Math.min(i,r.height())),u(o,t,r.height())}return 0}(this._attachments,t,this._config.itemsInLayout);e.height(n)},e.prototype._renderItems=function(e){var t=(0,r.map)(this._attachments,(function(e){return e.render()}));return Promise.all(t)ach)(t,(function(t){t&&e.append(t)}))}))},e.prototype.showGallery=function(e){var t,n=new s.Z;e&&(t=e.id()),n.show(this._alrContainer(e),this._renderItems(e)},e}();t.Z=f},5121:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var i=n(20384),r=n(40180),o=n(99806),a=n(21900),s=n(6727),u=n(60231),c=n(97781),l=n(77261),d=n(6677),h=n(22970),p={scale:1,lastScale:1,isPinching:!1,startDistance:0,midpoint:null,onTouchStart:function(e,t){if(i(e.clickedSlide).find("img").removeAttr("style"),i(t.target).is("img")){var n=t.touches;if(n&&2===n.length){t.preventDefault();for(var r=[],o=0;n[o];o++){var a=n[o];r.push(a.pageX,a.pageY)}this.isPinching=!0,this.startDistance=this.getDistance(r),this.midpoint=this.getMidpoint(r)}}},onTouchMove:function(e,t){if(i(t.target).is("img")){var n=i(t.target),r=t.touches;if(r&&2===r.length&&this.isPinching){for(var o=[],a=0;r[a];a++){var s=r[a];o.push(s.pageX,s.pageY)}var u=this.getDistance(o),c=this.getMidpoint(o),l=u/this.startDistance*this.scale,d=c.x-this.midpoint.x,h=c.y-this.midpoint.y;n.attr("style","outline: 1px solid transparent; position: static !important"),n.css({transform:"translate3d(".concat(d,"px, ").concat(h,"px, 0) scale3d(").concat(l,", ").concat(l,", 1)")}),this.lastScale=l}}},onTouchEnd:function(e,t){var n=t.touches;n&&2!==n.length&&this.isPinching&&(this.pinching=!1)},getDistance:function(e){var t=Math.pow(e[0]-e[2],2),n=Math.pow(e[1]-e[3],2);return Math.sqrt(t+n)},getMidpoint:function(e){return{x:(e[0]+e[2])/2,y:(e[1]+e[3])/2}}},f={pagination:{el:".swiper-pagination",clickable:!0},spaceBetween:10,touchStartPreventDefault:!1,keyboard:{enabled:!0},mousewheel:!0,preloadImages:!1,lazy:{loadOnTransitionStart:!0},setWrapperSize:!0,observer:!0,observeParents:!0,noSwiping:!1,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},on:{touchStart:function(e){p.onTouchStart(this,e)},touchMove:functiond:function(e){p.onTouchEnd(this,e)}}},m=n(62980),g=function(){function e(e,t,n){var r=this;this.items=u.observableArray(e),this.$container=n,this.swiper=nul)((0,h.pi)({},f),{initialSlide:e})}(t),this.keyDownHandlerInstance=function(e){return r.keyDownHandler(e)},i("body").on("keydown",this.keyDownHandlerInstance)}return e.prototype.keyDownHandler=function(e){e.keyCode===m.D.esc?(this.close(),e.stopImmediatePropagation()):e.stopImmediatePropagation?e.stopImmediatePropagation():e.cancelBubble=!0},e.prototype.close=function(){return this.swiper&&i.isFunction(this.swiper.destroy)&&this.swiper.destroy(!0,!0),this.$container&&i.isFunction(this.$container.remove)&&this.$container.remove(),i("body").off("keydown",this.keyDownHandlerInstance),!1},e.prototype.initSwiper=function(e){var t=this;i(e).is(".swiper-container")&&(this.swiper=new c.Z(e,this.swiperConfig),this.swiper.on("slideChange",(function(){(0,r.each)(t.players,(function(e){e&&e.isPlaying&&e.pause().catch(d.Z.error)}))})))},e.prototype.render=function(e,t){var n=this,r=i(e);if(t.type===s.i1.video){var o=.9*r.parent().width(),a=.9*r.parent().height();l.Z.getPlayer(t.src,e,{width:o,height:a,pltion(e){return n.players.push(e),e})).catch(d.Z.error)}else r.append('<img data-src="'.concat(t.src,'" class="swiper-lazy" />')),t.caption&&r.append('<div data-bind="{ text: caption }" class="swiper-slide-caption" />')},e}(),v=function(){function e(){}return e.prototype.show=fun)(e,(function(e){return e.id()===t}))||0,u=(0,r.map)(e,(function(e){if(e.type===s.i1.video)return Promise.resolve({type:e.type,src:e.src(),caption:e.caption});if(e.type===spe:e.type,src:t,caption:e.caption}}));throw new Error("Unsupported attachment type ".concat(e.type))}));return Promise.all(u).then((function(e){var t=i(document.body).createChild("div").addClass("pigal-container"),r=new g(e,n,t);o.z.renderTo("v7.Client.Gallery",r,r.$container),r.$container.find(".pigal").css({"zScroll=M,M}(window,document);t.Z=r},82418:function(e,t,n){"use strict";n.d(t,{L:function(){return o},b:function(){return r}});var i=new(unction o(e){return i.subscribe(e)}},6325:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var i=n(40180),r=n(20384),o=n(81128),a=n(60231),s="reset";function u(e){e.bindingHandlers[s]?console.warn("KO binding ".concat(s," already registered")):e.bindingHandlers[s]=function(e){void 0===e&&(e={});var t=e.templateName,n=e.getDescendantContext,r=void 0===n?function(){return{}}:n,s=e.inject,u=void 0===s?function(e,t){return t.appendChild(e)}:s,c=e.dispose,l=void 0===c?i.noop:c;if(void 0===t)throw new Error("Template name is required");return{init:function(e,n,i,s,c){var d=e;(0,o.Ws)(t).then((function(t){a.tasks.schedule((function(){if(d){var o=r(e,n,i,s,c);u(t,d),(0,a.applyBindings)(o,t)}}))})),a.utils.dollback(e,(function(){l(d),d=void 0}))}}}({templateName:"v7.Client.Reset.ko.Binding",getDescendantContext:function(e,t,n,i,r){return{activate:function(et).addClass("has-reset").append(e)}})}},97015:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var i=n(22970),r=n(40180),o=n(60231),a="[ko-component:nd-swich]",s=function(){function e(e){var t=e.value,n=e.label,i=void 0===n?"":n,a=e.selected,s=void 0!==a&&a,u=e.onToggle;this.label=i,this.value=t,this.selected=o.observable(s),(0,r.isFunction)(u)&&this.selected.subscribe((function(e){u(e)}))}return Object.defineProperty(e.prototype,"unwrappedValue",{get:function(){return o.unwrap(this.value)},enumerable:!1,configurable:!0}),e.prototype.toggle=function(e){void 0===e&&(e=!this.selected()),this.selected(e)},e}();function u(e){var t=o.unwrap(e);if(!Array.isArray(t))throw new Error("".concat(a," Invalid configuration: expected array of options"));return t.map((function(e){var t,n=(t=e,!o.isObservable(t)&&(0,r.isObject)(t)?t:{value:t,label:t});return new s(n)}))}var c={viewModel:function(){function e(e){var t=this,n=e.options,i=e.value;if(!o.isObservable(i))throw new Error("".concat(a,' Invalid configuration: expected observable as "value"'));this._switchOptions=u(n),this.options=o.observableArray(this._switchOptions),o.isObservable(n)&&n.subscribe((function(e){t.updateSwitchOptions(e)})),this.selectedOption=o.pureComputed((function(){return i()})).ene=function(e){i(e.unwrappedValue)},i.subscribe((function(e){t.updateSelection(e)})),this.updateSelection(i)}return e.prototype.selectOption=function(e){e&&(e.selecrEach((function(t){t.toggle(t===e)})))},e.prototype.updateSelection=function(e){var t=o.unwrap(e),n=(0,r.find)(this._switchOptions,(function(e){return e.unwrappedValue===t}));this.selectOption(n)},e.prototype.updateSwitchOptions=function(e){var t,n=this.selectedOption(),r=u(e);(t=this._switchOptions).splice.apply(t,(0,i.ev)([0,this._switchOptions.length],(0,i.CR)(r),!1)),this.options.valueHasMutated(),this.updateSelection(n)},e}(),template:{ndTemplate:"v7.Client.Switch.ko.Component"}},l="nd-switch";function d(e){e.components.isRegistered(l)?console.warn('Knockout component "'.concat(l,'" already registered.')):e.components.register(l,c)}},65237:function(e,t,n){"use strict";n(60231).extenders.undo=function(e){var t=e(),n=t;e.subscribe((function(e){t=e})),e.commit=function(){n=t},e.undo=function(){e(n)}}},67168:function(e,t){"use strict";var nled",i={haisHandled:function(e){return!!e[n]}};t.Z={clickAndTouch:i}},74375:function(e,t,n){"use strict";var i=n(22970),r=n(40180)templateData={},this.telateData[e];this.templateData[e]=t},e.prototype.text=function(){if(1===arguments.length)throw new Error("ExternalResourceTemplateSource does't support write operation");return this.template||(this.template=a.z.process(this.templateName,this.templateData)),this.template},e}(),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),t.prototype.makeTemplateSource=function(t,n){try{return e.prototype.makeTemplateSource.call(this,t,n)}catch(e){}if((0,r.isString)(t)&&a.z.getTemplate(t))return new s(t);throw new Error("Unknown template type: ".concat(t))},t}(o.nativeTemplateEngine);t.Z=u},81128:function(e,t,n){"use strict";n.d(t,{Ws:function(){return u}});var i=n(40180),r=n(60231),o=n(99806),a="ndTemplate";function s(e){return o.z.getTemplateAsync(e).then((function(t){if(t){var n=o.z.process(e);return r.utils.parseHtmlFragment(n)}}))}function u(e){return s(e).then((function(t){if(!t||!t.length)throw new Error("Template ".concat(e," was not found"));var n=function(e){return void 0===e&&(e=[]),(0,i.find)(e,(function(e){return e.nodeType===Node.ELEMENT_NODE}))}(t);if(!n)throw new Error("Template ".concat(e," is invalid: no element nodes found"));return n}))}var c={loadTemplate:function(e,t,n){if((0,i.isObject)(t)&&(0,i.endsWith)(t[a],".ko.Component")){var u=t[a],c=function(e){if(o.z.isLoaded()&&o.z.getTemplate(e)){var t=o.z.process(e);return r.utils.parseHtmlFragment(t)}}(u);c?n(c):s(u).then((function(e){n(e)}),(function(){n(null)}))}else n(null)}};t.ZP=c},34829:function(e,t,n){"use strict";n.r(t),n.d(t,{forceValidation:function(){return a},resetValidationState:function(){return u},supportsValidation:function(){return o},validate:function(){return s}});var i=n(60231),r=n(40180);function o(e){return i.isObservable(e)&&(0,r.isFunction)(e.hasErrors)}function a(e){e&&((e=i.utils.unwrapObservable(e)).__validationAttempted&&e.__validationAttempted(!0),(0,r.values)(e).forEach((function(e){o(e)&&(0,r.isFunction)(e.valueHasMutated)&&e.valueHasMutated()})))}function s(e,t){return!e||(Array.isArray(e)?e.map((function(e){return s(e,t)})).reduce((function(e,t){return e&&t}),!0):(e=i.utils.unwrapObservable(e),t&&a(e),e.__validationAttempted&&e.__validationAttempttion(e){return o(e)&&e.hasErrors()}))))}function u(e){e&&(i.isObservable(e)&&(0,r.isFunction)(e.isDirty)&&(e.isDirty(!1),e=i.utils.unwrapObservable(e)),(0,r.forOwn)(e,(function(e){i.isObservable(e)&&(0,r.isFunction)(e.isDirty)&&e.isDirty(!1)})),e.__validationAttempted&&eh=e,this.height=t,this},e}();t.Z=n},76278:function(e,t,n){"use strict";n.d(t,{D7:function(){return o},Qs:function(){return r},SB:function(){return a},bx:function(){return i}});var i=Object.freeze({userSection:"userSection",topics:"topics",following:"following",opinions:"opinions"}),r=Object.freeze({minNumberItemsInSection:3,addItemsPerMoreStep:5}),o=Object.freeze({following:"FollowingUsers"}),a=(Object.freeze({more:"more",share:"share",listen:"listen",bookmark:"bookmark",translate:"issueTranslate",print:"print",download:"issueDownload",export:"export"}),Object.freeze({closed:0,opened:1,closiurn i|s}},i.nd.baseLoader.baseProvider=r},43471:function(e,t,n){"use strict";var i=n(40180),r=n(4169),o=n(42581),a=function(e){return e.toUpperCase().trim()},s=(0,i.mapKeys)(o.X,(function(e,t){return a(t)}));t.Z={showDialog:function(){return r.Z.getAsync("ui.Catalog.showObsoleteDialog").then((function(e){return void 0==t(","),(function(e){return s[a(e)]}))}))}}},48921:function(e,t,n){"use strict";n.d(t,{Hc:function(){return T},ZT:function(){return h},xs:function(){return w},wO:function(){return d},Gv:function(){return E},bG:function(){return P},vS:function(){return S},hq:function(){return Z},IG:function(){return x},C5:function(){return k},V5:function(){return g},Rm:function(){return A}});var i=nreturn r.Z.get("collections","",e)},getCollectionsOf:function(e){return r.Z.get("user","".concat(e,"/cllections","",e,{disableRetry:!0})},removeCollection:function(e){return r.Z.delete("collections",e,{ollections",e,t,{dllections/").concat(then((function(e){return e.items}))}},a=n(40180),s=n(19237),u=n(11569),c=n(17447),l=n(94777),d="all",h="channel",p=["readlater"],f={readlater:1},m=new l.Z({expire:3e5}),g={system:i.y.System,user:i.y.User,sharing:i.y.Sharing},v={facebook:"Menu.Facebook",twitter:"Menu.Twitter",evernote:"Menu.Evernote",instapaper:"Menu.Instapaper",onenote:"Menu.OneNote",email:"Menu.eMail",all:"ReadLater",channel:"Channel",public_all:"ReadLater"},y=Object.e.contentCount,isDeleteDisabled:n}}var b={crrn f[e.id]&&0})).map(_).value()}))}function I(){m.clear()}function P(){return o.getCollections().then((function(e){return C(e.items)}))}function e===g.user||e.type===g.sharing})))}))}function S(e,t){if(!e)throw new Error("profileId not specified");if(!0!==t){var n=m.get(e);if(n)return n}var i=o.getCollectionsOf(e).then((function(e){return C(e.items)}));return m.set(e,i),i}function T(e){if(!e)throw new Error("context not specified");ret,w.next({event:b.create,data:t}),e}))}function k(e){if(!e)throw new Error("collectionId not specified");return o.removeCollection(e).then((function(){I(),w.next({event:b.delete,data:e})}))}function A(e,t){if(!e)throw new Error("collectionId not specified");r(),w.next({event:b.update,data:e})}))}function E(e,t,n){if(!e)throw new Error("profileId not specified");return o.getCollectionFeed(e,t||d,n)}function Z(e){if(!e)return Promise.reject("cid not specified");var t="".concat(y.linkedcollection,"_").concat(e),n=m.get(t);return n?Promise.resolveedCollectionOwner.profileName})}))})).then((function(e){return m.set(t,e),e}))}w.pipe((0,u.h)((function(e){r:function(){return o},getConfig:s}},60026:function(e,t,n){"use strict";var i=n(20384),r=n(10751),o=n(51828),a=n(14581),s=n(2851),u=n(44582),c=n(35953),l=n(17447),d=n(91330),h=n(6677),p=n(18187),f=n(11144),m=n(76700);function g(e){this._raw=e}function v(e){this._raw=e}function y(e){u.Z.apply(this,arguments),this.Enriches=e&&e.enriches}function _(e){for(var t in e)this[t]=e[t];e.Date&&(this.DateFormatted=l.ZP.formatDate((0,o.x)(e.Date),"v7.Client.DateFormat.Issue"))}g.ndExtend({_raw:null,name:function(){return this._raw.Nickname},photoUrl:function(){return this._raw.PhotoUrl},avatarImageId:function(){return this._raw.AvatarImageId},profileUrl:function(){return""}}),v.ndExtend({_raw:null,id:function(){return this._raw.PostId},_author:null,author:function(){return this._author||(this._author=new g(this._raw.UserProfis._raw.PostTimeStamp)),this._date},body:function(){return this._raw.Text}}),y._minTextLength=200,y.byIdx=function(e,t){return e.Idx-t.Idx},y.byPageAscRateDesc=function(e,t){return 100*e.Page-e.Rate-100*t.Page+t.Rate},y.byRate=function(e,t){return t.Rate-e.Rate},(0,s.D)(y,u.Z,{Type:r.g.article,_textLength:0,_hyphenated:!1,Idx:-1,Id:0,Title:null,HyphenatedTitle:null,Subtitle:null,Annotation:null,Page:0,Byline:null,Blocks:null,Images:null,Section:null,Rank:0,Rate:0,NormRate:0,Language:null,OriginalLanguage:null,ArticleId:void 0,StartBlockIdx:void 0,ContinuedFromPage:void 0,ContinuedFromPageName:void 0,CurrentTextLength:void 0,SecNormRate:0,isFiltered:!1,_votes:null,_translations:null,_original:null,_isLoadSupported:!0,ArticleType:0,getDesiredPreviewColumnsCount:function(){return 1},hyphenate:function(){if(!this.loaded()||this._hyphenated)return this;var e=this.Language||"en";if(this.Title&&(this.HyphenatedTitle=c.Z.hyphenate(this.Title,e)),this.Subtitle&&(this.Subtitle=c.Z.hyphenate(this.Subtitle,e)),this.Annotation&&(this.Annotation=c.Z.hyphenate(this.Annotation,e)),this.Byline&&(this.Byline=c.Z.hyphenate(this.Byline,e)),this.Images&&this.Images.length)for(var t=0;t<this.Images.length;t++){var n=this.Images[t];n.Title&&(n.Title=c.Z.hyphenate(n.Title,e)),n.Subtitle&&(n.Subtitle=c.Z.hyphenate(n.Subtitle,e)),n.Byline&&(n.Byline=c.Z.hyphenate(n.Byline,e)),n.Copyright&&(n.Copyright=c.Z.hyphenate(n.Copyright,e)),null!=n.Text&&("object"==typeof n.Text?n.Text.Text=c.Z.hyphenate(n.Text.Text,e):n.Text=c.Z.hyphenate(n.Text,e))}if(this.Blocks&&this.Blocks.length)for(t=0;t<this.Blocks.length;++t)"object"==typeof this.Blocks[t]?this.Blocks[t].Text=c.Z.hyphenate(this.Blocks[t].Text,e):this.Blocks[t]=c.Z.hyphenate(this.Blocks[t],e);return this._hyphenated=!0,this},passTextLengthFilter:function(){return(void 0===this.CurrentTextLength||this.CurrentTextLength>=y._minTextLength||this.CurrentTextLength&&this.Images&&this.Images.length)&&this.checkTextLength()},checkTextLength:function(){return this.isValid()},isValid:function(){var e=!!i.trim(this.Title)&&((!this.Issue||!this.Issue.Id)&&(this.StartBlockIdx||0)<=this.Blocks.length||(this.StartBlockIdx||0)<this.Blocks.length)&&(!this.Issue||!this.Issue.Id||this._textLength);if(e){var t=d.Z.language(this.Language);t&&t.isRtl()&&(h.Z.log("article "+this.Id+" won't be shown because it has RTL language"),e=!1)}return e},_normalizeText:function(){if(this._textLength=0,this.Blocks)for(var e=0;e<this.Blocks.length;){var t="object"==typeof this.Blocks[e],n=i.trim(t?this.Blocks[e].Text:this.Blocks[e]);n?(this._textLength+=n.length,t?this.Blocks[e].Text=n:this.Blocks[e]={Text:n},++e):this.Blocks.splice(e,1)}},textLength:function(){return this._textLength},votesMeta:function(){return p.Z.getMeta(this.ArticleId,p.Z.contentTypes.ARTICLE)},voteLike:function(){return p.Z.voteLike(this.ArticleId,p.Z.contentTypes.ARTICLE)},voteDislike:function(){return p.Z.voteDislike(this.ArticleId,p.Z.contentTypes.ARTICLE)},update:function(e){if(e.Content){var t=e.Content;delete e.Content,this._update(e)._update(t),e.Content=t,this._loaded=!0}else this._update(e);return this._normalizeText(),this.NormRate=this.Rate/20,this._fire("updated"),!this.isPreview()&&this._accessDfd&&this._accessDfd.resolve(),this},_update:function(e){for(var t in this.raw=e,e)"Section"===t&&this.Section||"Page"===t&&this.Page||(this[t]="Issue"===t?b.get(e[t]):e[t]);return e.IsHyphenated&&(this._hyphenated=!0),this},original:function(){return this._original},translation:function(e,t){var n=null;return this._translations&&e in this._translations?n=this._translations[e]:this._provider.translate(this,e,this._onTranslated.bind(this,e,t)),n&&t(n),this},_onTranslated:function(e,t,n){this._translations||(this._translations={});var i=this._translations[e]=new y(n[0]);i._original=this,i.loaded(!0),i.SecNormRate=this.SecNormRate,i.Page=this.Page,i.Section=this.Section,t(i)},isOriginal:function(){return!this.OriginalLanguage||this.Language==this.OriginalLanguage},isTranslation:function(){return this.OriginalLanguage&&this.Languagction(){return 1==this.ArticleType},_accessDfd:null,access:function(){if(!this._accessDfd)if(this._accessDfd=new f.B,this.isPreview()){var e=this;this._provider.accessItem(this).then((function(t){e.update(t)})).catch((function(){e._accessDfd&&(e.isPreview()?(e._accessDfd.reject(),delete e._accessDfd):e._accessDfd.resolve())}))}else this._accessDfd.resolve();return this._accessDfd.promise()},dataType:function(){return this.Data&&[m.dl.FollowedChannel,m.dl.FollowedOpinion].indexOf(this.Data.GroupType)>-1?m.Ku.socialArticle:this.isPreview()?m.Ku.ArticlePreview:m.Ku.RegularArticle},normalizedRate:function(){rRank:function(){returion(){return this.SimilarsCount||0},_comment:null,comment:function(){return!this._comment&&this.Comment&&(this._comment=new v(this.Comment.Posts[0])),this._comment}}),_.prototype={cid:function(){return(0,a.$W)(this.Id)},title:function(){return this.Title}};var b=function(){var e={},t={};return e.get=function(e){return e&&e.Id?e.Id in t?t[e.Id]:t[e.Id]=new _(e):null},e}();t.Z=i.nd.data.article=y},25539:function(e,t,n){"use strict";var i=n(60231),r=n(40180),o=n(60683),a=n(31914),s=n(49698),u=n(6677),c=n(77751),l=n(88769),d=n(94711),h=n(16778),p=n(17447),f=n(4169),m=function(){function e(e,t){var n=this;if(void 0===t&&(t=o.wC.large),!e)throw new Error("dataComment cannot be null.");if(!e.userProfile)throw new Error('{authorProfile} cannot be empty, but it is for [comment.id="'.concat(e.id,'"] :('));var r=e.userProfile;e.parentCommentUserProfile&&(this.parentCommentUserProfile=e.parentCommentUserProfile),this.id=e.id||e.postId,e.parentId&&(this.parentId=e.parentId),this.articleId=e.articleId,this.isDeleted=i.observable(e.isDeleted),this.viewText=i.observable(e.viewText||e.text||""),this.editText=e.editText,this.isOwner=e.isOwner,this.authorNickname=r.nickname,this.authorProfileId=r.profileName||r.profileId,this.authorProfileName=this.authorProfileId,this.authorAvatarImageId=r.avatarImageId,this.authorPhotoUrl=r.photoUrl,this.isAuthorFollowed=i.observable(r.followedByCurrentUser),this.date=function(e){try{var t=new Date(e);return a.Z.formatDate(a.Z.formatTypes.comment,t)}catch(t){u.Z.error("Can not convert date:".concat(e,", error: ").concat(t))}return""}(e.postTimeStamp),this.dateTimeStamp=e.postTimeStamp,this.prettyDate=(0,c.N3)(new Date(this.dateTimeStamp)),this.avatar=i.observable((0,o.b_)({nickname:this.authorNickname,imageId:this.authorAvatarImageId,size:t,fallbackAvatarUrl:this.authorPhotoUrl})),this.likesCount=i.observable(e.likesCount),this.dislikesCount=i.observable(e.dislikesCount),this.isVotedByUser=i.observable(!1),this.currentVote=i.observable(e.currentVote),this.isLiked=i.pureComputed((function(){return n.currentVote()===l.ZP.votes.like})),this.isDisliked=i.pureComputed((function(){return n.currentVote()===l.ZP.votes.dislike})),this.authorVote=i.observable(e.authorVote),this.publicId=e.publicId,this.repliesCount=e.repliesCount,this.opinionsEnabled=f.Z.get("features.opinions",!1),this.opinion=i.observable(this.opinionsEnabled&&e.opinion?new s.Z(e.opinion):null),this._setAttachments(e)}return e.prototype.update=function(e){this.viewText(e.viewText||e.text||""),this.opinion(this.opinionsEnabled&&e.opinion?new s.Z(e.opinion):null),this._setAttachments(e)},e.prototype.delete=function(){this.viewText(p.ZP.get("Dialogs.Comments.DeletedComment")),this.isDeleted(!0)},e.prototype._setAttachments=function(e){e.attachments?this.attachments=e.attachments:e.artifacts&&(this.attachments=(0,r.map)(e.artifacts,(function(e){return e.videoMeta&&e.videoMeta.videoUrl?new h.Z({url:e.videoMeta.videoUrl,thumbnailImageId:e.objectId,thumbnailWidth:e.previewMeta.width,thumbnailHeight:e.previewMeta.height}):new d.Z({imageId:e.objectId,width:e.previewMeta.width,height:e.previewMeta.height})}))),this.hasAttachments=!(0,r.isEmpty)(this.attachments)},e}();t.Z=m},88901:function(e,t,n){"use strict";var i,r=n(20384),o=(n(16412),{});o.onlineLoader=function(e){i=e},o.load=function(e,t,n){return i.load(e,t,n).then((function(e){return e||[]}))},o.clear=function(e){return i.clear(e)},t.Z=r.nd.data.ftshistory=o},88812:function(e,t,n){"use strict";var i,r=n(20384),o=(n(16412),{});o.onlineLoader=function(e){i=e},o.load=funct,t).then((function(e){return e||[]})):Promise.reject()},t.Z=r.nd.data.ftssuggestions=o},2175:function(e,t,n){"use strict";var i,r,o,a=n(45457),s=n(14581),u=n(79220),c=n(20384),l={},d={},h=0;function p(){return h||(h=a.Zi(p,6e5)),u.Z.load(i,r).then(m)}function f(){o||(o=p())}function m(e){try{var t=!i;i=e.timestamp,r=e.ctimestamp;var n=(new Date).getTime(),o=e.issues,a=l,s=d,u=!1;for(var h in o){var p=o[h];p&&((y=a[h])?y.id&&s[y.id]&&delete s[y.id]:a[h]=y=new g(h),y.update(p.d,p.v,p.w,p.h,p.a,n,p.id,p.x),y.id&&(s[y.id]=y),u=!0)}var f=e.comments;for(var m in f){var y,_=f[m];(y=s[m])&&_&&(y.posts=_),u=!0}t&&c.nd.event.trigger("loaded",v,v),u&&c.nd.event.trigger("updated",v,v)}catch(e){}return v}function g(e,t,n,i,r,o,a){this.cid=e,arguments.length>1&&this.update(t,n,i,r,o,a)}g.prototype={posts:0,update:function(e,t,n,i,r,o,a,u){this.id=a?a.toString():null,this.issueDate=new Date(parseInt(e.substr(0,4),10),parseInt(e.substr(4,2),10)-1,parseInt(e.substr(6,3),10)),this.issue=(0,s.eX)(this.cid,this.issueDate,t),this.pageWidth=n,this.pageHeight=i;var c=r;(c||0==c)&&(this.activated_ms=(o||(new Date).getTime())-6e4*(c||0),this.activated=new Date(this.activated_ms)),u&&(this.expungeVersion=u)},calculateThumbScale:function(e){return this.pageWidth?Math.floor(100*e/this.pageWidth):null},calculateWidthForScale:function(e){return this.pageWidth?Math.ceil(e*this.pageWidth/100):null},getMinutesSinceActivation:function(e){return this.activated_ms?Math.ceil(((e||(new Date).getTime())-this.activar v={load:function(){return f(),o},loaded:function(e,t){return 0==arguments.length?(f(),!!i):(c.nd.event.one(v,"loaded",e,t),i&&c.nd.event.trigger("loaded",v,v),f(),this)},updated:function(e,t){return c.nd.event.bind(v,"updated",e,t),f(),this},getIssue:function(e){return l[e]}};c.nd.issue=g,c.nd.data.issues=v,t.Z=v},79220:function(e,t,n){"use strict";n(74981);var i=n(20384);t.Z={load:function(e,t){return i.nd.config.loaded().then((function(){var n={},r=i.nd.config.get("catalog.timestamp");return r&&(n.cts=r),e&&(n.timestamp=e),t&&(n.ctimestamp=t),i.nd.services.api.get("issues",n)}))}}},35466:function(e,t,n){"use strict";var i=n(2851),r=n(44582),o=n(76700);function a(e){Object.assign(this,e),this._loaded=!0}a.getId=function(eId:function(){return a.getId(this)},dataType:function(){return o.Ku.LastVisit},normalizedRank:function(){return 1}}),t.Z=a},53890:function(e,t,n){"use strict";var i=n(48921),r=n(4018s:function(e){o=(0,r.assign)({},e)},getSearchParams:function(){return o},load:function(e,t){var n={limit:20};return t<0?n.endToken=e:n.startToken=e,a&&a(o),i.Gv(o.profileId,o.collectionId,n).then((function(e){var n=(0,r.map)(e.items||[],(function(e){return{Id:e.id,Type:e.type,Data:e.data}})),i=e.items.length,o=e.meta||{},a=n.length?o.firstToken:null,s=n.length?o.lastToken:null;return{items:n,leftToken:t<0&&i<20?null:a,rightToken:i<20?null:s}}))},setTopBarTitleHandler:function(e){(0,r.isFunction)(e)&&(a=e)}}},1412:function(e,t,n){"use strict";var i=n(2851),r=n(44582),o=n(76700);function a(e){Object.assign(this,e),delete this.Id,delete this.id}a.getId=function(e,t,n){return n>0?"".concat(e,"_").concat(t,"_").concat(n):"".concat(e,"_").concat(t)},(0ProfileId,this.PageN1,this.PageN2)},update:function(e,t){return e&&(this.Page1=Object.assign({},e)),t&&(this.Page2=Object.assign({},t)),this},dataType:function(){return o.Ku.RegularPage},getId:function(){return this.Id()},normalizedRank:function(){return 0}}),t.Z=a},56249:function(e,t,n){"use strict";n.d(t,{y:function(){return s}});var i=n(20384),r=n(40180),o=(n(16412),n(35953));function a(e,t){t=o.Z.hyphenate(t),this.id=e,this.title=t}i.extend(a.prototype,{_items:null,id:null,title:null,type:0,renderingType:0,_raw:null,_countryName:null,count:function(){return this._items?this._items.length:0},_append:function(e){return this._items?this._items.push(e):this._items=[e],this},_prepend:function(e){return this._items?this._items.uction(e){return e.group(this),this},addItem:function(e){e.section&&(0,r.isFunction)(e.section._remove)&&e.section._remove(e),this._append(e)},append:function(e){return e._group!==this&&(e._group&&e._group._remove(e),e._group=this,this._items?this._items.push(e):this._items=[e]),this},prepend:function(e){return e._group!==this&&(e._group&&e._group._remove(e),e._group=this,this._items?this._items.unshift(e):this._items=[e]),this},_remove:function(e){for(var t=this._items.length-1;t>=0;--t)if(this._items[t]===e){1==this._items.length?delete this._items:this._items.spctionrn this._items?this._items.slice(0):null},article:function(e){return this.item(e)},articles:function(){return this.items()},raw:function(e){return arguments.length?(this._raw=e,this):this._raw},countryName:function(){return arguments.length?(this._countryName=arguments[0],this):this._countryName},isLoaded:function(e){if(!this._items)return!0;for(var t=!0,n=e?Math.min(e,this._items.length):this._items.length,i=0;i<n;++i)this._items[i].isLoaded()||(t=!1);return t},load:function(e){if(!this._items)return Promise.resolve(this);for(var t=e?Math.min(e,this._items.length):this._items.length,n=0;n<t;++n){var i=this._items[n];if(!i.loaded()){var r=this.load.bind(this,e);return i.load().then(r,r)}}return Promise.resolve(this)}});var s=a},42995:function(e,t,n){"use strict";n.d(t,{U:function(){return a},m:function(){return s}});var i=n(56249),r={},o=Date.now();function a(e,t){if(e in r)return r[e];if(void 0===t){for(;o in r;)++o;return r[o]=ne[e]=new i.y(e,t)}function s(){r={}}},44582:function(e,t,n){"use strict";var i=n(20384),r=n(40180),o=n(2851),a=n(71151),s=n(62918),u=n(56249),c=n(42995),l=n(63666),d=n(11144),h=n(76700);function p(e){this.update(e),this.lastAccessTime=Date.now()}(0,o.q)(p,a.HC.prototype,s.Y.prototype,{Id:0,Type:0,gturn this.constructor+this.getId()},_provider:null,provider:function(e){return arguments.length?(this._provider=e,this):this._provider},normalizedRank:function(){return 0},normalizedRate:function(){return 0},dataType:function(){return h.Ku.Unknown},onREOF:function(){this._provider&&this._provider.loadMore&&this._provider.loadMore()},onLEOF:function(){this._provider&&this._provider.loadHistory&&this._provider.loadHistory()},_nextDfd:null,nextDfd:function(){if(void 0!==this._next)return Promise.resolve(this._next);if(!this._provider||!this._provider.loadMore)return Promise.reject();var e=this._nextDfd;if(!e){e=this._nextDfd=new d.B;var t=this;this._provider.loadMore().finally((function(){void 0===t._next?e.reject():e.resolve(t._next),delete t._nextDfd}))}return e.promise()},_prevDfd:null,prevDfd:function(){if(void 0!==this._prev)return Promise.resolve(this._prev);if(!this._provider||!this._provider.loadHistory)return Promise.reject();var e=this._prevDfd;if(!e){e=this._prevDfd=new d.B;var t=this;this._provider.loadHistory().finally((function(){void 0===t._prev?e.reject():e.resolve(t._prev),delete t._prevDfd}))}return e.promise()},_tokenized:!1,tokenized:function(e){return arguments.length?(this._tokenized=e,this):this._tokenized},_loaded:!1,_isLoadSupported:!1,loaded:function(){if(!arguments.length)return this._loaded;var e=arguments[0];return e||this._isLoadSupported?(this._loaded=e,this._loadedDfd&&(this._loaded?(0,r.defer)(this._loadedDfd.resolve,this):(0,r.defer)(this._loadedDfd.reject)),delete ththis.HyphenatedTitle&&!this.Title)},isLoaded:function(){return!this._loaded&&this._provider&&this._provider.loadItem(this),this._loaded},_loadedDfd:null,load:function(){return this._loaded?Promise.resolve(this):this._isLoadSupported?this._provider?(this._loadedDfd||(this._loadedDfd=new d.B),this._provider.loadItem(this),this._loadedDfd.promise()):Promise.reject():Promise.reject("Load is not supported for this item.")},abortLoading:function(){return this._loadedDfd&&(this._loadedDfd.reject(),delete this._loadedDfd),this},update:function(e){if(e){if(e.Content){var t=e.Content;delete e.Content,Object.assign(this,e,t),e.Content=t,this._loaded=!0}else Object.assign(this,e);this._fire("updated")}return this},_group:null,group:function(){return arguments.length?(arguments[0]!==this._group&&(this._group&&this._group._remove(this),1===arguments.length?null==arguments[0]?delete this._group:arguments[0].constructor==u.y?this._group=arguments[0]._append(this):this._group=c.U(arguments[0])._append(this):this._group=c.U(arguments[0],arguments[1])._append(this)),this):this._group},detach:function(){f.fire(this);var e=a.HC.prototype.detach.apply(this,arguments);return this.abortLoading(),this._nextDfd&&(this._nextDfd.reject(),delete this._nextDfd),this._prevDfd&&(this._prevDfd.rejek:function(e){return new m(this,e)},dispose:function(){if((0,l.tJ)(this))throw new Error("The item is being used and cannot be removed.");return this._fire("dispose",this),this}});var f=i.Callbacks();function m(e,t){this._item=e,t&&(this._direction=t),this._onDetachHandler=this._onDetach.bind(this),f.add(this._onDetachHandler)}Object.assign(m.prototype,{_item:null,_direction:1,_retries:0,_result:null,_name:null,_args:null,deferred:function(e){return this._name=e,this._args=Array.prototype.slice.call(arguments,0),this._result=new d.B,this._exec(),this._result.finally(this.dispose.bind(this))},_onDetachHandler:null,_onDetach:function(e){if(this._item===e)if(++this._retries>=40)this._result.reject();else{var t=this;e[(this._direction<0?"prev":"next")+"Dfd"]().then((function(e){e?(t._item=e,t._exec()):t._result.reject()}),this._result.reject)}},_exec:function(){var e=this._item,t=this;this._item[this._name].apply(this._item,this._args).then((function(){e===t._item&&t._result.resolve.apply(this,arguments)}),(function(){e===t._item&&t._result.rejec(){f.remove(this._onDetachHandler)}}),t.Z=p},32263:function(e,t,n){"use strict";n(2099),n(91330);var i,r,o=n(77004),a=n(20384);t.Z=(i=a,r=function(){var e={},t=!1,n=!1,r=null,a=null,s=null,u=null,c=null,l=null;function d(){l||(l={articles:i.Callbacks("once memory"),pages:i.Callbacks("once memory"),sections:i.Callbacks("once memory")})}function h(e,t){switch(d(),e){case 0:l.articles.add(t);break;case 1:l.pages.add(t);break;case 2:l.sections.add(t)}}e.onlineLoader=function(e){u=e},e.offlineLoader=function(e){c=e},e.articles=function(e){return e&&h(0,e),f(),r},e.pages=function(e){return e&&h(1,e),f(),a},e.sections=function(e){return e&&h(2,e),f(),s};var p=0;function f(){if(!t&&!n){t=!0;var e=p;!c||i.nd.utils.translation.currentLanguage()&&o.online()?(!c||u&&o.online())&&u.load((function(t){m(e,t)})):c.load((function(t){m(e,t)}))}}function m(e,i){if(e==p){if(i){a=i.Pages,r=[],s=[];for(var o=null,u=0;u<a.length;++u){var c=a[u],h=c.Articles||[];r=r.concat(h),o&&(o.SectionName||"").toLowerCase()===(c.SectionName||"").toLowerCase()?(o.Pages.push(c),o.Articles=o.Articles.concat(h)):(o={SectionName:c.SectionName,Articles:h.slice(0),Pages:[c]},s.push(o));for(var f=0;f<h.length;++f){var m=h[f];m.Page=c,m.PageNumber=c.PageNumber,m.Section=o,m.SectionName=o.SectionName}}d(),l.articles.fire(r),l.pages.fire(a),l.sections.fire(s),n=!0}t=!1}}return e.reset=function(){p=(new Date).getTime();var e=n;t=n=!1,r=null,a=null,s=null,l&&(e?l=null:f())},e}(),i.nd.data.toc=r)},31914:function(e,t,n){"use strict";var i=n(17447),r=n(40180),o={formatTypes:{article:"Article",comment:"Comment",issue:"Issue"}};(0,r.forEach)([o.formatTypes.article,o.formatTypes.comment,o.formatTypes.issue],(0,r.bind)((function(e){this["format"+e+"Date"]=function(t){var n="v7.Client.DateFormat."+e;return i.ZP.formatDate(t,n)}}),o)),o.formatDate=function(e,t){return this["format"+e[0].toUpperCase()+e.substr(1)+"Date"](t)},t.Z=o},83294:function(e,t,n){"use strict";var i=n(20384),r=n(54024);n(54591),n(17447),i.nd.devicedownload=function(){var e;return e={download:function(t,n){r.Z.download(t,n).then((function(t){"ChooseActivation"===t.Type?i(e).trigger("chooseactivation",[t.Activations]):"Done"===t.Type&&(i(e).trigger("finished"),t.Activations&&t.Activations.length>0&&i.nd.alert().show({type:"custom",templateName:"v7.Client.Dialogs.DownloadWasCompleted",buttonTitle:i.nd.res.val("Buttons.Close"),activations:t.Activations}))})).catch((function(){i(e).trigger("finished")}))},onChooseActivation:function(t){i(e).one("chooseactivation",t)},onFinished:function(t){i(e).one("finished",t)}}}(),t.Z=i.nd.devicedownload},54024:function(e,t,n){"use strict";var i=n(79913),r={download:function(e,t){var n={};return n.issue=e,t&&(n.downloadTo=t.join(",")),(0,i.$k)("devicedownload","download",n)}};t.Z=r},48692:function(e,t,n){"use strict";var i,r,o,a,s,u,c,l=n(20384);n(54591),n(4169),n(17447),l.nd.deviceExport={setProvider:function(e){(i=e).onStarted=function(e){r=e,s=setTimeout((function(){i.getExportRequestStatus(r)}),1e3)},i.onProgress=function(e,t){u&&(o.message(e),o.percent(t),s=setTimeout((function(){i.getExportRequestStatus(r)}),1e3))},i.onComplete=function(){c.hide();var e=l.nd.config.get("ui.ExportToEReader").DownloadUrl+"?"+a;0==l("#redirectionFrame").length?l("body").append(l('<iframe id="redirectionFrame" src="'+e+'"></iframe')):l("#redirectionFrame").attr("src",e)},i.onError=function(){c.hide()}},getDeviceTypes:function(e){return i.getDeviceTypes(e)},addExportRequest:function(e){a=e,(o={message:ko.observable("Preparing File"),buttonTitle:l.nd.res.val("Buttons.Cancel.Text"),type:"custom",templateName:"v7.Client.Dialogs.LabeledProgressPercent",label:l.nd.res.val("Menu.Item.Export2EReader"),percent:ko.observable(0)}).progressPercent=ko.computed((function(){return o.message()+"... "+o.percent()+"%"})),(c=l.nd.alert()).onClosed((function(){s&&(clearTimeout(s),s=0),u=!1})),u=!0,setTimeout((function(){c.show(o)}),410),i.addExportRequest(a)}},t.Z=l.nd.deviceExport},29168:function(e,t,n){"use strict";var i,r,o=n(20384),a=n(84672),s=(n(16412),!1),u=!1,c=!(){return!1},p=function(){return!s},f=o.nd.now,m=function(){var e=o(document);try{!o.support.propagetEventsToFrames&&window!=window.parent&&window.parent.document&&(e=e.add(window.parent.document))}catch(e){}return e};function g(e){var t=e.data||e._data,n=e.touches||t._prev_touches,r=e.changedTouches||t._prev_changedTouches;t._prev_touches=n,t._prev_changedTouches=r;var o=n;if(o&&o.length>0){var a=o[0];if(e.screenX=a.screenX,e.screenY=a.screenY,e.touchX=a.pageX,e.touchY=a.pageY,c&&o.length>1){var s=o[1];t.touchClientCX=a.clientX-(a.clientX-s.clientX)/2,t.touchClientCY=a.clientY-(a.clientY-s.clientY)/2,t.touchPageCX=a.pageX-(a.pageX-s.pageX)/2,t.touchPageCY=a.pageY-(a.pageY-s.pageY)/2}else t.touchClientCX=i,t.touchClientCY=i,t.touchPageCX=i,t.touchPageCY=i}else t.touchClientCX=i,t.touchClientCY=i,t.touchPageCX=i,t.touchPageCY=i,e.touchX=e.pageX,e.touchY=e.pageY;return e}function v(e){if(x(e,!0),!s&&!c){a.busy.set(),r=!0,e=g(e),s=!0,u=!1,d=!1,l=0;var t=e._data||e.data;t.target=this,t.ondragstart(this,e),e.preventDefault()}}function y(e){c=!0;var t=(e=g(e))._data||e.data,n=t.target;return d=!0,C(e),t.target=n,t.ongesturestart(n,e),!1}function _(e){if(c){var t=(e=g(e))._data||e.data,n=t.target;t.ongesturechange(n,e,t)}}function b(e){if(c){_(e=g(e)),c=!1;var t=e._data||e.data,n=t.target;t.ongestureend(n,e),t.target=null,l=f()}return!1}function w(e){if(e=g(e),!c&&s){var t=e._data||e.data;return t.ondraggo(t.target,e),d&&C(e),!1}}function C(e){if(e=g(e),s)try{s=!1,u=!1;var t=e._data||e.data;t.ondragstop(t.target,e,d),t.target=null,d=!1,t.isMouseMoved&&(l=f())}finally{a.busy.reset()}return!1}function I(e){r||1==o.fix(e).which&&(a.busy.set(),s=!0,u=!1,d=!1,l=0,e.data.target=this,e.data.ondragstart(this,e),m().dragbind("mousemove",e.data,P).dragbind("mouseup",e.data,x),e.preventDefault())}function P(e){if(r)return!1;if(1!=o.fix(e).which)x(e);else{var t=e._data||e.data;t.target&&t.ondraggo(t.target,e),!d&&t.target||x(e)}return!1}function x(e,t){if(r)return!1;if(s)try{if(s=!1,u=!1,m().dragunbind("mousemove",P).dragunbind("mouseup",x),t)return!1;var n=e._data||e.data;n.ondragstop(n.target,e,d),n.target=null,d=!1,n.isMouseMoved&&(l=f())}finally{a.busy.reset()}return!1}o.fn.dragbind=o.fn.ndbind,o.fn.dragunbind=o.fn.ndunbind,document.body.addEventListener("drag",p),document.body.addEventListener("selectstart",p);var S=function(e){var t=this;return t&&t.ondragstart?(e&&o.each(e,(function(e,n){t[e]=n})),t.dragStat=[],t.threshold=t.threshold||1,t.useTransforms=t.useTransforms&&o.support.transform,t):e&&e.ondragstart?e:new S(e)};S.prototype={startX:0,startY:0,newX:0,newY:0,dX:0,dY:0,dx:0,dy:0,_sx:0,_sy:0,isMouseMoved:!1,autoDrag:!1,enableStat:!1,disableX:!1,disableY:!1,useTransforms:!1,beforeDragStart:0,dragStart:0,dragGo:0,dragStop:0,threshold:0,maxScrollX:null,minScrollX:null,maxScrollY:null,minScrollY:null,ongesturestart:function(e,t){this.scale=1,this.gestureStart&&this.gestureStart(e,t,this)},ongesturechange:function(e,t){this.scale=t.scale,this.gestureChange&&this.gestureChange(e,t,this)},ongestureend:function(e,t){this.gestureEnd&&this.gestureEnd(e,t,this)},ondragstart:function(e,t){var n=this;n.beforeDragStart&&n.beforeDragStart(e,t,n),n.isMouseMoved=!1,n.dragStat.length=0,n.dragStat.idx=0,n._sx=n.__sx=t.screenX,n._sy=n.__sy=t.screenY,n.dx=n.dy=n.dX=n.dY=0,n.useTransforms?(n.matrix=new o.nd.matrix(o.css(e,"transform")),n.matrixTx=n.matrix.tx,n.matrixTy=n.matrix.ty,n.startX=n.matrixTx,n.startY=n.matrixTy):(n.startX=e.offsetLeft,n.startY=e.offsetTop),n.newX=n.startX,n.newY=n.startY,n.startX2=n.startX,n.startY2=n.startY,n.starTime=t.timeStamp,n.startTime2=t.timeStamp,n.dTime=0,n.dTime2=0,n.dragStart&&n.dragStart(e,t,this)},ondraggo:function(e,t){if(t.screenX){this._sx||this.ondragstart(e,t);var n=this,i=n.disableX?0:t.screenX-n._sx,r=n.disableY?0:t.screenY-n._sy,a=n.disableX?0:t.screenX-n.__sx,s=n.disableY?0:t.screenY-n.__sy;if(n.__sx=t.screenX,n.__sy=t.screenY,!n.isMouseMoved){if(this.threshold>0){if(Math.abs(i)<this.threshold&&Math.abs(r)<this.threshold)return}else if(0===i&&0===r)return;n.isMouseMoved=!0,u=!0}n.dx=i-n.dX,n.dy=r-n.dY,n.dX=i,n.dY=r;var c=n.newX,l=n.newY;n.newX=n.startX+i,n.newY=n.startY+r,null!==n.maxScrollX&&n.newX<n.maxScrollX?(n.newX=n.bounce?c+a/2.4:n.maxScrollX,n.adjustGDelta(n.newX-n.startX,null)):null!==n.minScrollX&&n.newX>n.minScrollX&&(n.newX=n.bounce?c+a/2.4:n.minScrollX,n.adjustGDelta(n.newX-n.startX,null)),null!==n.maxScrollY&&n.newY<n.maxScrollY?(n.newY=n.bounce?l+s/2.4:n.maxScrollY,n.adjustGDelta(null,n.newY-n.startY)):null!==n.minScrollY&&n.newY>n.minScrollY&&(n.newY=n.bounce?l+s/2.4:n.minScrollY,n.adjustGDelta(null,n.newY-n.startY)),n.dragGo&&n.dragGo(e,t,this),n.autoDrag&&(this.useTransforms?(this.matrix.tx=parseInt(this.matrixTx+n.dX),this.matrix.ty=parseInt(this.matrixTy+n.dY),e.style[o.props.transform]=this.matrix.toTranslateString()):(0!=n.dx&&(e.style.left=parseInt(n.newX)+"px"),0!=n.dy&&(e.style.top=parseInt(n.newY)+"px")));var d=t.timeStamp;if(n.dragStat.length){var h=n.dragStat.idx,p=n.dragStat[h];d-p.time>100?(h=n.dragStat.idx=h>=2?0:h+1)>=n.dragStat.length?n.dragStat[h]={time:d,last:d,dx:n.dx,dy:n.dy,idx:h,startX:n.newX,startY:n.newY}:((p=n.dragStat[h]).last=p.time=d,p.dx=n.dx,p.dy=n.dy,p.startX=n.newX,p.startY=n.newY):(p.dx+=n.dx,p.dy+=n.dy,p.last=d)}else n.dragStat.push({time:d,last:d,dx:n.dx,dy:n.dy,idx:0,startX:n.newX,startY:n.newY});t.timeStamp-n.startTime2>300&&(n.startTime2=t.timeStamp,n.startX2=n.newX,n.startY2=n.newY)}},ondragstop:function(e,t,n){n&&(this.dragStat.length=0,this.dragStat.idx=0);var i=this.dragStat.idx+1;i>=this.dragStat.length&&(i=0);var r=this.dragStat[i];r&&(this.dTime=t.timeStamp-this.starTime,this.dTime2=t.timeStamp-r.time,this.dX2=this.newX-r.startX,this.dY2=this.newY-r.startY),this.dragStop&&this.dragStop(e,t,this)},getStat:function(){if(this.dragStat.length>0){var e=this.dragStat[this.dragStat.idx];if(this.dragStat.length>1){var t=this.dragStat.idx-1,n=this.dragStat[t<0?this.dragStat.length-1:t];e.time-n.time<150&&e.last-e.time<50&&(e=n)}return e}return{dx:0,dy:0}},momentum:function(e,t,n,i,r){var o,a=0,s=6e-4,u=Math.abs(e)/t,c=u*u/.0012,l=0;return e>0&&c>n?(a=800/r*(l=r/(6/(c/u*s)))+100,u=u*(n+=l)/c,c=n):e<0&&c>i&&(a=800/r*(l=r/(6/(c/u*s)))+100,u=u*(i+=l)/c,c=i),c*=e<0?-1:1,o=u/s,{dist:Math.round(c),time:Math.round(o),returnTime:Math.round(a)}},adjustDelta:function(e,t){var n=this;(e||0===e)&&(n.dX-=n.dx-e,n.dx=e,n.newX=n.startX+n.dX),(t||0===t)&&(n.dY-=n.dy-t,n.dy=t,n.newY=n.startY+n.dY)},adjustGDelta:function(e,t){var n=this;(e||0===e)&&(n.dx-=n.dX-e,n.dX=e,n.newX=n.startX+n.dX),(t||0===t)&&(n.dy-=n.dY-t,n.dY=t,n.newY=n.startY+n.dY)}},o.fn.turnOnDrag=function(e){var t=S(e);return this.dragbind("touchstart",t,v).dragbind("touchmove",t,w).dragbind("touchend",t,C),this.dragbind("gesturestart",t,y).dragbind("gesturechange",t,_).dragbind("gestureend",t,b),this.bind("mousedown",t,I).bind("drag selectstart",h)},o.fn.turnOffDrag=function(){return this.dragunbind("touchstart",v).dragunbind("touchmove",w).dragunbind("touchend",C),this.dragunbind("gesturestart",y).dragunbind("gesturechange",_).dragunbind("gestureend",b),this.unbind("mousedown",I).unbind("drag surn this.turnOnDrag({autoDrag:!0})},o.nd.drag={data:S,inDrag:function(){return s},hasBeenInDrag:function(){return u||f()-l<100},cancel:function(){d=!0}}},88769:function(e,t,n){"use strict";n.d(t,{BQ:function(){return f},M4:function(){return s},Vg:function(){return d},WQ:function(){return l},c8:function(){return h},d6:function(){return m},ge:function(){return c},gu:function(){return a},qt:function(){return p},rK:function(){return u},tk:function(){return o}}),n(16412);var i=n(20384),r={},o=r.views=i.nd.views={textView:"$.nd.views.textView",pageView:"$.nd.views.pageView",radioView:"$.nd.views.radioView"},a=r.issueMenuOptions=i.nd.issueMenuOptions={all:0,issueDate:1,lang:2,listen:3,share:4,download:5,export:6,feedSettings:7,addToFavorites:8,readingMap:9,interfaceLang:10,fonts:11,autoTranslate:12,togglePervasive:13,toggleFacelift:14,toggleFestive:15,toggleHotspot:16,emailAlerts:17},s=(r.addSectionModes=i.nd.addSectionModes={notDefined:0,main:1,byCountry:2,byLanguage:3,issue:4},r.historyTokenTypes=i.nd.historyTokenTypes={notDefined:0,left:1,right:2}),u=(r.searchArea=i.nd.searchArea={Articles:1,HotSpots:2,Opinions:3,Catalog:4},r.cellType=i.nd.celltype={unknown:-1,column:0,figure:1,header:2,myTitles:3,imagesHeader:4},r.readingMapReportTypes=i.nd.readingMapReportTypes={attentionMap:0,readingTime:1,adValue:2}),c=(r.opinionSupportersChart=i.nd.opinionSupportersChart={members:0,newMembers:1,mentions:2},r.usersSortOrder={alphabet:0,followDate:1,alphabetDesc:2,recent:3,followersCountAsc:4,followersCountDesc:5},r.columnTypes={content:0,misc:1,sectionHeader:2,header:3,categoryTail:3,imagesHeadline:4,replies:6,initBlock:7,monitors:11,coverBlock:12,opinion:13,homeBlock:14,socialInfo:15,adBlock:16,profile:17,bookmarkPages:18,recommendedOpinions:19,promoSection:20,gift:22,ctaSignUpSection:24,giftVideoAd:25},r.catalogMenuOptions=i.nd.catalogMenuOptions={sortModeSelector:1,viewModeSelector:2},r.catalogViewType=i.nd.catalogViewType={list:0,small_grid:1,grid:2,newsstand:3},r.catalogSortType=i.nd.catalogSortType={by_alphabet:0,most_popular:1,most_current:2},r.articleGroupTypes=i.nd.articleGroupTypes={unknown:-1,headlines:0,interesting:1,users:2,moreNewsCluster:3,readersChoice:4,sinceYourLastVisit:5,category:6,topic:7,userSection:8,followedChannel:9,directArticleLink:10,followedOpinion:11},r.shareTypes=Object.freeze({facebook:"facebook",twitter:"twitter",google:"google",email:"email",instapaper:"instapaper",evernote:"evernote",onenote:"onenote"})),l=r.shareContentTypes=Object.freeze({opinion:"opinion",article:"article",page:"page",pageSet:"pageSet",issue:"issue",gift:"gift",comment:"comment",resource:"resource"}),d=r.bookmarkTypes={articles:1,pages:2,pageSet:3},h=(r.bookmarkUrlPattern={default:"bookmark",channel:"channel"},r.scrollReason={unspecified:0,drag:1,fling:2,bounce:3,mouseWheel:4,keyPress:5,alignmentCorrection:6,scrollZone:7}),p=r.collectionContentTypes={article:1,pageSet:2},f=r.contextPreviewType={article:"article",page:"page",pageSet:"pageSet"},m=r.snippetRenderStatus={inProgress:"inProgress",ready:"ready",byCode:{202:"inProgress",201:"ready",200:"inProgress"}};r.voteo.remo.removeEventListener(n,t)}))}}))}}},88585:function(e,t,n){"use strict";var i,r=n(22970),o=n(40180),a=n(14347),s=n(4169),u=n(53714),c=n(58060),l=n(46046),d=Object.freeze(Object.create(null,{ALLOWED:{value:"ALLOWED"},RESTRICTED:{value:"RESTRICTED"},UNDEFINED:{value:"UNDEFINED"}})),h=Object.freeze(Object.create(null,{ANONYMOUS:{value:"ANONYMOUS"},SPONSORED:{value:"SPONSORED"},REGISTERED_PAYG:{value:"REGISTERED_PAYG"},REGISTERED_PURCHASED:{value:"REGISTERED_PURCHASED"}})),p=Object.freeze(Object.create(null,((i={})[h.ANONYMOUS]={value:"enableForAnonymous"},i[h.SPONSORED]={value:"enableForSponsored"},i[h.REGISTERED_PAYG]={value:"enableForRegistered"},i[h.REGISTERED_PURCHASED]={value:"value"},i))),f=0,m=null,g=null,m&&++f<=100},y=function(e){f=0,m=e};function _(e){return new Promise((function(t,n){Promise.all([new Promise((function(e){var t=!a.Z.isLogin();u.Z.isSponsorshipAvailable()?e(h.SPONSORED):t?e(h.ANONYMOUS):(v()?Promise.resolve(m):(g||(g=c.Z.getCurrent().then((function(e)TERED_PAYG:h.REGISTERED_PURCHASED)}),(function(){return e(h.ANONYMOUS)}))})),s.Z.loaded()]).then((function(n){var i=(0,r.CR)(n,1)[0],o=l.Z.convertToBool(s.Z.get("translation")[e][p[i]]);t(o?d.ALLOWED:d.RESTRICTED)}),n)}))}var b=Object.freeze({translation:function(){return _("enableTextViewTranslation")},autoTranslation:function(){return _("enableAutoTranslation")},singleArticleTranslation:function(){return _("enableSingleArticleTranslation")}}),w=function(){function e(){this.restrictionResults=d,this.restrictionTypes=(0,o.mapValues)(b,(function(e,t){return t}))}return e.prototype.getAsync=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=b[e];return i?i.call.apply(i,(0,r.ev)([b],(0,r.CR)(t),!1)):Promise.resolve(this.restrictionResultarget).data("suppress-gestures"))}},35953:function(e,t,n){"use strict";var i=n(20384),r=n(83409),o=n(8270);n(16412),t.Z=i.nd.hyphenator=function(){var e;function t(t){return arguments.length&&(e=t),e||(e=o.get("lng")||"en"),e}function n(e,n){if(1==arguments.length&&(n=t()),n)try{return r.hyphenate(e,n)||e}catch(e){}return e}return r.config({onerrorhandler:function(){}}),i.nd.hyphenate=n,{hyphenate:n,uiLanguage:t}}()},33027:function(e,t,n){"use strict";var i=n(20384),r=(n(16412),i.nd.makeImageUrl("1x1.gif")),o=[],a=!0===i.browser.webkit;function s(){var e=this._job;e&&(this._job=null,e._onloadHandler())}function u(){var e=this._job;e&&(this._is._callback=t,this._enableRetry=n};c.prototype={_completed:!1,_loaded:!1,_aborted:!1,_src:null,_callback:null,_image:null,_enableRetry:!1,_retryNumber:0,_maxRetryNumbers:3,_finish:function(e){this._completed=!0,this._loaded=e;var t=this._image,n=this._callback;this._image.onload=null,this._image.onabort=null,this._image.onerror=null,this._image=null,this._callback=null,n&&n(e?t:null)},_onloadHandler:function(){this._finish(!0)},_onerrorHandler:function(){if(!this.isAborted()&&this._enableRetry&&this._retryNumber<this._maxRetryNumbers){if(this._retryNumber++,a){var e=new Image;e.onload=this._image.onload,e.onabort=this._image.onabort,e.onerror=this._image.onerror,this._image.onload=null,this._image.onabort=null,this._image.onerror=null,this._image=e}return this._image._job=this,this._image.src=this._src+"&retry="+this._retryNumber,void console.log("image on error: "+this._src)}this._finish(!1)},start:function(){var e;this._image=((e=o.pop())||(e=new Image),e),this._image.onload=s,this._image.onabort=u,this._image.onerror=u,this._image._job=this,this._image.src=this._src},abort:function(){this._callback&&(this._aborted=!0,delete this._callback)},getUrl:function(){return this._src},isCompleted:function(rted&&!this._loaded&&!!this._image},isLoaded:function(){return this._loaded},isAborted:function(){retuunction(e){this._enableRetry=e||!1},i.nd.imageLoader.prototype={loadImage:function(e,t){var n=new c(e,t,this._enableRefunction(e){e&&(e.src=r,o.push(e))}}},89512:function(e,t,n){"use strict";var i=n(60231),r=n(20384),o=n(82402),a=(n(65237),n(11144)),s=[];!function(e,t,nValid:n.isValid,message:n.message}},hasNoErrors:function(){var n=!0;return t.each(e,(function(e,t){if(!t.isValid)return n=!1,!1})),n},getMessages:function(){var n="";return t.each(e,(function(e,t){if(!t.isValid)return n=t.message,!1})),n}};return{append:n.append,hasNoErrors:n.hasNoErrors,getMessages:n.getMessages}}var o=function(t,n){return function(i,o){var a=i(),s=i._validationResults,u=new t(o),c=function(e){var t=u.validate(e);s.append(n,{isValid:t,message:t?"":u.message}),i.hasErrors(!s.hasNoErrors()),i.validationMessage(s.getMessages())};return s||(s=i._validationResults=new r),i.hasErrors=e.observable(!1),i.validationMessage=e.observable(""){n.push({name:e,extender:o(t,e)})}))}(i,r,s,o.Z),function(e,t){t.push({name:"trackDirtyState",extender:function(t,n){if("boolean"!=typeof n)throw new TypeError("true/false are the only valid options for isDirty.");return t.isDirty=e.observable(!1),t.subscribe((function(){t.isDirty(!0)})),t}})}(i,s),function(e,t){t.push({name:"maxLength",extender:function(t,n){var i=parseInt(n);if(isNaN(i)||i<=0)throw new TypeError("an positive integer is required for the Max Length.");var r=e.computed({read:t,write:function(e){var n=t(),r=e?e.substring(0,Math.min(e.length,i)):e;r!==n?t(r):e!==n&&t.notifySubscribers(r)}});return r(t()),r}})}(i,s),function(e,t,n){n.push({name:"async",extender:function(t,n){var i,r=e.observable();return r.inProgress=e.observable(!1),e.computed((function(){i&&i.reject();var e=t.call(n);e&&"function"==typeof e.then?(finProgress(!1),e&&console.error(e)})),e.then(i.resolve,i.reject)):r(e)})),r}})}(i,0,s),function(e,t){for(var n=0,i=t.length;n<i;n++){var r=t[n];if(e.extenders[r.name])throw new Error("Cannot add "+r.name+" to the Knockout extenders set. An extender with the same name already exists.");e.extenders[r.name]=r.extender}}(i,s)},98744:function(e,t,n){"use strict";var i=n(40180),r=n(60231),o=n(34829),a=n(67168),s=n(81128),u=n(74375),c=n(97015),l=n(6325),d=(0,i.merge)({},o,{event:a.Z});r.nd=d,r.components.loaders.unshift(s.ZP),(0,c.Z)(r),(0,l.Z)(r),r.setTemplateEngine(new u.Z),t.Z=d},26371:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var i=n(20384),r=n(22970),o=function(e,t){e>0&&t>0&&e>t?(this.max=e,this.min=t):(this.min="number"==typeof e&&e>=0?e:void 0,this.max="number"==typeof t&&t>=0?t:void 0),Object.freeze(this)},a=n(40180);function s(e,t){if("number"!=typeof e)throw new TypeError("".concat(t," has to be a number"))}var u=function(){function e(e){var t=this;void 0===e&&(e={}),this._visible=!0,this.id=e.id||"",this.priority=0,void 0!==e.priority&&(s(e.priority,"priority"),this.priority=e.priority),void 0!==e.row&&(s(e.row,"row"),this.row=e.row),this.contentBounds=e.contentBounds?new(o.bind.apply(o,(0,r.ev)([void 0],(0,r.CR)(e.contentBounds),!1))):new o,this.heightPxBounds=e.heightPxBounds?new(o.bind.apply(o,(0,r.ev)([void 0],(0,r.CR)(e.heightPxBounds),!1))):new o,this.heightPctBounds=e.heightPctBounds?new(o.bind.apply(o,(0,r.ev)([void 0],(0,r.CR)(e.heightPctBounds),!1))):new o,["getHeight","getContentSize","canHide","increase","decrease"].forEach((function(n){var i=e[n];void 0!==i&&(t[n]=a.isFunction(i)?i:functionunction(n){t._visible=!1,e.hide(n)})}return e.prototype.getHeight=function(){return 0},e.prototype.getContentSize=function(){return 0},e.prototype.canHide=function(){return!1},e.prototype.increase=function(){},e.prototype.decrease=function(){},e.prototype.canIncrease=function(){var e=this.getContentSize(),t=this.contentBounds;return void 0!==t.max&&e<t.max},e.prototype.canDecrease=function(){var e=this.getContentSize();if(e>0){var t=this.contentBounds;return void 0!==t.min&&e>t.min}return!1},e.prototype.hasMinContent=function(){var e=this.getContentSize(),t=this.contentBounds;return void 0===t.min||e>=t.min},e.prototype.fits=function(e){void 0===e&&(e=0);var t=this.getHeight(),n=this.heightPxBounds,i=this.heightPctBounds,r=!0;return void 0!==n.max&&(r=t<=n.max),e&&r&&void 0!==i.max&&(r=t<=i.max*e),r&&(!e||t<e)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},enumerable:!1,configurable:!0}),e.prototype.show=function(){this._visible=!0},e.prototype.hide=function(){this._visible=!1},e}(),c=function(){function e(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._chain=[],t&&t.forEach((function(t){return e.chain(t)})),Object.freeze(this)}return e.prototype.chain=function(e){if(!a.isFunction(e))throw new TypeError("Function expected");return this._chain.length;t<n;t++)this._chain[t](e)},e}(),l=c,d={HOEGAARDEN:0,LEFFE_BLOND:1,BLANCHE_DE_BRUXELLES:2,GUINNESS:3,BUDWEISER:4};function h(e){this.getHeight=e&&i.isFunction(e.getHeight)?e.getHeight:function(){return 0}}function p(e,t){var n=this,i=new h(e),r=function(e){if(void 0===e)return[];if(!Array.isArray(e))throw new TypeError("Array expected");!function(e){for(var t=0,n=0,i=0;i<e.length;i++){var r=e[i];if(!(r instanceof u))throw new TypeError('Unexpected block type "'+typeof r+'". Block should be inherited from "Block"');r.row>=0?n++:t++}if(t>0&&n>0)throw new Error("One of the blocks is missing 'row' property")}(e);for(var t=0,n=0;n<e.length;n++){var i=e[n];0===i.row||i.row||(i.row=t++)}return e}(t),o=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];-1==t.indexOf(i.priority)n t.sort((function(e,t){return e-t}))}(r),a=function(e,t){for(var n=[],i=0;i<t.length;i++){var r=t[i];n[i]=[];for(var o=0;o<e.length;o++){var a=e[o];a.priority==r&&n[i].pus=500;n{return--s},n.stop=function(){s=-1},n.getTotalHeight=function(){for(var e=0,t={},n=0;n<r.length;n++){var i=r[n];i.visible&&(t[i.row]=Math.max(t[i.row]||0,i.getHeight()))}for(var o in t)e+=t[o];return e},n.getContainerHeight=functalHeight()<n.getContainerHeight()},n.getPriorityQueue=function(){return o.slice()},n.getPriorityBlocks=function(e){return(a[o.indexOf(e)]||[]).slice()},n._debugContent=function(){for(var e=[],t=n.getPriorityQueue(),i=0;i<t.length;i++)for(var r=t[i],o=n.getPriorityBlocks(r),a=0;a<o.length;a++){var s=o[a];e.push("{id:"+s.id+", content:"+s.getContentSize()+"}")}return e.join(";")},n._debugVisible=function(){for(var e=[],t=n.getPriorityQueue(),i=0;i<t.length;i++)for(var r=t[i],o=n.getPriorityBlocks(r),a=0;a<o.length;a++){var s=o[a];e.push("{id:"+s.id+", visible: "+s.visible+"}")}return e.join(";")}}var f={Manager:function(e,t){var n=new p(e,t),i={};function r(e){e.fits()||u(e.getPriorityQueue().reverse(),e,(function(t){if(!e.fits()&&t.canHide()&&(t.hide(e),e.fits()))return!0}))}function o(e){if(e.fits())for(var t=!1;!t;){var n=0;u(e.getPriorityQueue(),e,(function(t){t.canIncrease()&&(t.increase(e),e.fits()?n++:t.decrease(e))})),t=!n||e.loops()<1}}function a(e,t){var n=!1;return u(t=t.slice().reverse(),e,(function(t){if(t.visible&&!e.fits()&&t.canDecrease()&&(t.decrease(e),n=!0),n)return!0})),n}function s(e,t){var n=!1;return u(t=t.slice().reverse(),e,(function(t){if(t.visible&&t.canHide()&&(t.hide(e),n=!0),n)return!0})),n}function u(e,t,n){for(var i=!1,r=0;r<e.length&&t.loops()>0&&!i;r++)for(var o=e[r],a=t.getPriorityBlocks(o),s=0;s<a.length&&t.loops()>0&&!i;s++){var u=a[s];u.visible&&(i=n(u))}}function c(e,t){var n=e.indexOf(t);return n>-1?e.slice(n+1):[]}i[d.HOEGAARDEN]=new l((function(e){for(var t=e.getContainerHeight(),n=!e.fits()||e.loops()<1,i=e.getPriorityQueue();!n;){var r=0;u(i,e,(function(n){e.fits()&&n.fits(t)&&n.canIncrease()&&(n.increase(e),e.fits()&&n.fits(t)?r++:n.decrease(e))})),n=!r||e.loops()<1}}),(function(e){var t=e.getPriorityQueue();u(t,e,(function(n){if(n.visible){var i=c(t,n.priority);n.canIncrease()?function(e,t,n){for(var i=t.getContainerHeight(),r=!e.canIncrease()||t.loops()<1||!t.fits(i);!r;)t.fits()?e.canIncrease()&&e.fits(i)&&t.fits()?e.increase(t):e.fits(i)||(e.decrease(t),r=!0):a(t,n)||(e.decrease(t),r=!0),r=r||!e.canIncrease()&&t.fits(i)&&e.fits(i)||t.loops()<1}(n,e,i):e.fits()||a(e,i)}}))}),(function(e){var t=e.getPriorityQueue();u(t,e,(function(n){var i=c(t,n.priority);!function(e,t,n){for(var i=t.getContainerHeight(),r=!e.visible||!e.fits(i)||e.hasMinContent()||!e.canIncrease()||t.loops()<1;!r;)e.fits(i)?t.fits()?!e.hasMinContent()&&e.canIncrease()&&t.fits()&&e.increase(t):s(t,n)||(e.decrease(t),r=!0):(e.decrease(t),r=!0),r=r||e.hasMinContent()&&t.fits(i)&&e.fits(i)||t.loops()<1}(n,e,i)}))}),(function(e){for(var t=e.getContainerHeight(),n=e.loops()<1,i=e.getPriorityQueue();!n;){var r=0;u(i,e,(function(n){e.fits()&&n.fits(t)&&n.canIncrease()&&(n.increase(e),e.fits()&&n.fits(t)?r++:n.decrease(e))})),n=!r||e.loops()<1}})),i[d.LEFFE_BLOND]=new l(r),i[d.BLANCHE_DE_BRUXELLES]=new l((function(e){u(e.getPriorityQueue(),e,(function(t){for(;t.canIncrease()&&e.loops()>0;)t.increase(e)}))}),(function(e){e.fits()||u(e.getPriorityQueue().reverse(),e,(function(t){for(;t.canDecrease()&&e.loops()>0;)if(t.decrease(e),e.fits())return!0}))}),r,o),i[d.GUINNESS]=new l((function(e){e.fits()||u(e.getPriorityQueue().reverse(),e,(function(t){for(var n=e.fits()||e.loops()<1;!n;)t.visible&&(t.canDecrease()?t.decrease(e):t.hide(e)),n=e.loops()<1||e.fits()||!t.visible;if(e.fits())return!0}))})),i[d.BUDWEISER]=new l(o),this.build=function(e){(i[e]||i[d.HOEGAARDEN]).execute(n)}},Contextl=c,i.n a()+e){retn3.Doc(0,u.c8)(e)}});t.Z=a.nd.navHistory},32:function(e,t,n){"use strict";var i,r,o,a,s,u,c,l,d,h,p,f,m,g,v,y=n(20384),_=n(55193);function b(){return y("<div/>")}function w(e){var t=parseselectionWidth,p=e.selectionHeight}i={init:function(e,t){C(t),l=b().css({left:t.selectionX1,top:t.selectionY1}).width(h).height(p).addClass("area-select"),g=e.width(),v=e.height(),_.ZP.bind(l,{gesturesStart:function(e){f=w(l.css("left")),m=w(l.css("top")),h=l.outerWidth(),p=l.outerHeight()},scroll:function(e){var t,n,i,d,y,_,b=e.target();"area-select"==b.className?(t=e.position().x,n=e.position().y,i=e.origin().x,d=e.origin().y,(y=f+t-i)<r&&(y=r),(_=m+n-d)<o&&(_=o),g-y-h<a&&(y=g-a-h),v-_-p<s&&(_=v-s-p),l.css({left:y,top:_})):"handle-nw"==b.className?function(e,t,n,i){var a=f+e-n,s=m+t-i,d=h-e+n,g=p-t+i;a<r&&(d=h+f-(a=r)),s<o&&(g=p+m-(s=o)),a+u>f+h&&(a=f+h-u,d=u),s+c>m+p&&(s=m+p-c,g=c),l.width(d),l.height(g),l.css({left:a,top:s})}(e.position().x,e.position().y,e.origin().x,e.origin().y):"handle-se"==b.className&&function(e,t,n,i){var r=h+e-n,o=p+t-i;g-f-r<a&&(r=g-f-a),v-m-o<s&&(o=v-m-s),g-f-r+u>g-f&&(r=u),v-m-o+c>v-m&&(o=c),l.css({width:r,height:o})}(e.position().x,e.position().y,e.origin().x,e.origin().y)}}),d=b().addClass("handle-nw").add(b().addClass("handle-se")),l.append(d),e.append(l)},change:function(e,t){C(t),g=e.width(),v=e.height(),l.css({left:t.selectionX1,top:t.selectionY1,width:t.selectionWidth,height:t.selectionHeight})},dispose:function(){l.off(),i=r=o=a=s=l=d=h=p=f=m=g=v=null},getTop:functiofunction(){return w(l.css("left"))},getWidth:function(){return l.outerWidth()},getHeight:function(){return l.outerHeight()}},t.Z=i},74428:function(e,t,n){"use strict";n.d(t,{Z:function(){return Ce}});var i=n(20384),r=n(7593),o=n(40180),a=(n(43389),n(2099)),s=n(59527),u=(n(42302),n(27670)),c=n(42777),l=n(11144),d=n(47211),h=n(95766),p=n(55993),f=n(88477),m=n(22970),g=n(82641),v=n(92912),y=n(6677),_=n(84066),b=n(46046),w=n(91574),C=n(24458),I=n(18218),P=!0,x=i.browser.msie,S={},T=new l.B,k=.7,A="layout_keyChangeSubscription";function E(){var e=this.getPage();e.keyChange&&(e[A]bind(this))))}function Z(){R(this)}function M(){S[this.id.toString()]=this,R(this)}function D(){!function(e){var t=e.getLayersContainer(),n=t[0];if(K(e)?t.addClass("zoom"):t.removeClass("zoom"),!P)for(var i=e.getWidth(),r=e.getHeight(),o=n.firstChild;o;){var a=o.nextSibling;if(o.isLayoutBlock){var s=o,u=o.block;s.style.left=Math.floor(u.X*i)+"px",s.style.top=Math.floor(u.Y*r)+"px",s.style.width=Math.ceil(u.W*i)+"px",s.style.height=Math.ceil(u.H*r)+"px"}o=a}}(this)}function L(){delete S[this.id.toString()],N(this);var e=this.getPage();e&&!e[A]&&(e[A].dispose&&e[A].dispose(),e[A]=null)}function N(e){for(var t=e.getLayersContainer()[0],n=t.firstChild;n;){var r=n.nextSibling;n.isLayoutBlock&&t.removeChild(n),n=r}e.metadata&&e.metadata.cleanup(),e.metadata=new i.nd.viewer.pagesView.metadata}function R(e){N(e);var t=e.getPage();if(!t)return console.log("Page was not initialized."),Promise.resolve();if(t.isPotentiallyRestrictedMode())return Promise.resolve();var n=a.Z.issue();return s.yy("smartFlow",null,n).then((function(r){n===a.Z.issue()&&function(e){return!!S[e.id.toString()]}(e)&&(!function(e,t){var n=e.getPage();if(n){var r=J(n);if(r){var o=document.createDocumentFragment(),a=e.getWidth(),s=e.getHeight(),u=r.Articles;if(u)for(var c=0,l=u.length;c<l;c++){var d=u[c],h=d.Blocks;if(h)for(var p=0,f=h.length;p<f;p++){(T=h[p]).Article=d;var m="",g=0,v=T.BT,y=0;if(t)v===i.nd.viewer.pagesView.blockType.title?(m+=" title",g=1,y=k):v===i.nd.viewer.pagesView.blockType.link&&(m+=" link",g=2);else{if(v!==i.nd.viewer.pagesView.blockType.link||!T.LD)continue;m+=" link",g=2}var _=B(o,T,a,s,g,m+=" contextmenu",y);if(_.setAttribute("article-id",d.Id),i(_).bind("onContextMenu",V),t&&v===i.nd.viewer.pagesView.blockType.title){var b=document.createElement("div");b.setAttribute("class","title-anim-top-bottom"),_.appendChild(b),(b=document.createElement("div")).setAttribute("class","title-anim-left-right"),_.appendChild(b)}}}var w=r.Links;if(w){m="link",g=2;for(var C=0,I=w.length;C<I;C++)for(var P=w[C],x=0,S=P.Rects.length;x<S;x++){var T;(T=P.Rects[x]).Link=P,B(o,T,a,s,g,m)}}var A=e.getLayersContainer();A.append(o),K(e)?A.addClass("zoom"):A.removeClass("zoom"),e.metadata.render(e,r)}}}(e,t),e.onupdated(!0))}))}function V(e){e.contextMenu.articleId=i(this).attr("article-id")}function B(e,t,n,r,o,a,s){var u="block_"+i.nd.id(),c=document.createElement("div");c.id=u,c.style.position="absolute",c.style.overflow="hidden",s=s||0;var l=P?"%":"px";if(P)c.style.left=100*t.X-s+l,c.style.top=100*t.Y+l,c.style.width=t.W?100*t.W+2*s+l:"auto",c.style.height=t.H?100*t.H+l:"auto";else{var d=n*s;c.style.left=Math.floor(t.X*n-d)+"px",c.style.top=Math.floor(t.Y*r)+"px",c.style.width=t.W?Math.ceil(t.W*n+2*d)+"px":"auto",c.style.height=t.H?Math.ceil(t.H*r)+"px":"auto"}return c.style.zIndex=o||0,c.className="block "+(a||""),c.isLayoutBlock=!0,c.block=t,t.elmId=u,e&&e.appendChild(c),c}function F(e){var t=this.block;if(t){if(t.Article){var n=t.Article,o=t.BT;if(3===o)return a.Z.contentIsRtl()?function(e){var t;(0,m.mG)(this,void 0,void 0,(function(){var n,i,r,o,s;return(0,m.Jh)(this,(function(u){switch(u.label){case 0:if(!e)return[2];v.ZP.show(),u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,g.ZP.getArticle(e)];case 2:return n=u.sent(),[3,5];case 3:return i=u.sent(),y.Z.error("Cannot load article.",i),[2];case 4:return v.ZP.hide(),[7];case 5:if(r=_.Z.getFirstImage(n.Images),!(o=w.Z.getInstance())||o.visible)return[2];s={articleTitle:b.Z.removeInvisibleHyphens(n.Title),articleSubtitle:b.Z.removeInvisibleHyphens(n.Subtitle),byline:b.Z.removeInvisibleHyphens(n.Byline),articleBlocks:(null===(t=n.Blocks)||void 0===t?void 0:t.map((function(e){return b.Z.removeInvisibleHyphens(e.Text)})))||[],hasImage:!!r,imageByline:b.Z.removeInvisibleHyphens(null==r?void 0:r.Byline),imageUrl:(null==r?void 0:r.Url)||"",imageTitle:b.Z.removeInvisibleHyphens(null==r?void 0:r.Title),imageText:b.Z.removeInvisibleHyphens(((null==r?void 0:r.Text)||{}).Text),issueTitle:b.Z.removeInvisibleHyphens(n.Issue.Title),shortDateString:n.Issue.ShortDateString,direction:a.Z.contentIsRtl()?"rtl":"ltr",close:function(){null==o||o.hide()}};try{o.show({templateName:"v7.Client.Dialogs.TextView",model:s,defaultEventFlow:!0})}catch(e){y.Z.error("Cannot open text view.",e)}return[2]}}))}))}(t.Article.Id):i.nd.navigation.showArticle(n.Id,Q().issue),!1;if(4===o)return!t.LD||t.LD>0?u=n.ContOnPage:(t.LD||t.LD<0)&&(u=n.ContFromPage),u&&i.nd.viewer.pages.gotoToPage(u,n.RootArticleId||n.Id),!1}else if(t.Link){var s=t.Link;if(0==s.Type){var u;(u=parseInt(s.Target,10))>0&&i.nd.viewer.pages.gotoToPage(u)}else{var c=s.Target;if(1==s.Type?c.indexOf("://")<0&&(c="http://"+c):2==s.Type?c.indexOf("mailto:")<0&&(c="mailto:"+c):3==s.Type&&c.indexOf("callto:")<0&&(c="callto:"+c),(0,r.m6)("features.app.externalLinks.disabled",!1)&&!(0,I.A)(c))return!1;var l=function(){return h.U.send(new d.hn({target:c}))};window.open(c,"_blank")?l():i.nd.alert().confirm((0,p.Rn)("v7.Client.Dialogs.Blocked.Popup"(function(){window.location.href=c}),500)}))}return!1}return O.call(this,e)}}function O(e){var t,n,i,r,o=this.block;if(o&&o.Article&&o.Article.Blocks){var a=e.data;if(a){var s=a.getPageView();if(K(a)){var u=e.data;return e.data={regionRect:(t=o,n=t.Article,i=n.Blocks,r=t.PID,Y(i,r))},s.ondoubleclick(e),e.data=u,!1}}}}var z,U,H,j,W="mouseover";function q(e){var t=this,n=t.block;n&&n.Article&&(z&&z!==n.Article&&H.find("[article-id="+z.Id+"]").removeClass(W),U&&(clearTimeout(U),U=0,H=null),z=n.Article,H=i(t.parentNode),i(t).hasClass(W)||H.find("[article-id="+z.Id+"]").addClass(W))}function G(e){var t=this.block;t&&t.Article&&z&&(U||(U=setTimeout(X,300)))}function X(){U&&(clearTimeout(U),U=0),z&&H&&H.find("[article-id="+z.Id+"]").removeClass(W),z=null,H=null}function Y(e,t){for(var n=null,i=0,r=e.length;i<r;i++){var o=e[i];t&&t!==o.PID||(n?(n.L=Math.min(n.L,o.X),n.T=Math.min(n.T,o.Y),n.R=Math.max(n.R,o.X+o.W),n.B=Math.max(n.B,o.Y+o.H)):n={L:o.X,T:o.Y,R:o.X+o.W,B:o.Y+o.H})}return n}function K(e){return!(!e||!e.getPageView().getZoom().isDefaultZoom)}function J(e){var t=$();if(t)for(var n=e.pageNumber(),i=t.Pages,r=0;r<i.length;++r)if(i[r].PageNumber===n)return i[r];return null}function $(){var e=j;return e&&function(e,t)on(e,i){if(i!==t[e])return n=!1,!1})),n}return!1}(e.context,Q())?e:null}function Q(){var e=i.nd.viewer.app;return{issue:e.issue(),version:e.layoutVersion(),expungeVersion:e.expungeVersion()}}function ee(){i.nd.viewer.views.getActiveViewName()===C.n3.PagesView&&function(){if(!$()){"pending"!==T.state()&&(T=new l.B);var e=Q();e.issue&&i.nd.services.api.get("layout",e).then((function(t){t.context=e,j=t,function(){var e=[];for(var t in S)e.push(R(S[t]));Promise.all(e).then((function(){return te()})).catch(f.logError)}(),T.resolve()}))}}()}var te=function(){i.nd.viewer.pages.load().then((function(){var e=i.nd.viewer.app.issue(),t=[],n=S;for(var r in n)if(n.hasOwnProperty(r)&&n[r].isVisible()){var a=n[r];a.metadata&&a.metadata.updateRequired()&&t.push(a.owner.page().pageNumber())}t.length&&ne(e,t).then((function(t){var n=i.nd.viewer.app.issue();if(e===n)for(var r=i.nd.viewer.pagesViewLayout.activePages(),a=0;a<t.length;a++){var s=t[a];if(s.Issue===e){var u=o.find(r,(function(e){return e.owner.page().pageNumber()===s.PageNumber}));u&&u.metadata.update(s)}else console.log("PageMetadata not corresponds with current issue. PageMeta.Issue="+s.Issue+", currentIssue="+e)}else console.log("Issue has been changed. Target IssueId="+e+", current issueId:"+n)}))}))};function ne(e,t){var n=ne.cache||(ne.c)-6e4;function a(t){return e+"_"+t}o.each(n,(function(e,t){e.created<r&&delete n[t]}));var s=[],u=o.filter(t,(function(e){var t=n[a(e)];return!t||(s.push(t.metadata),!1)}));return u.length?i.nd.services.api.get("pagesMetadata",{issue:e,pageNumbers:u.join(",")}).then((function(e){var t=(new Date).getTime();return o.each(e,(function(e){n[a(e.PageNumber)]={metadata:e,created:t},s.push(e)})),s})):Promise.resolve(s)}a.Z.pages.loadedChange(ee),u.Z.activeViewChanged(ee),c.default.pageContainerCreated((function(e){!function(e){e.onattached(E),e.onshowed(M),e.ondettached(L),e.onresized(D);var t=e.getLayersContainer();t.addClass("layout"),document.createElement("div"),x&&t.addClass("layout_ie"),i.support.touch||(t.on("mouseenter",".block",q),t.on("mouseleave",".block",G)),t.doubletap({selector:".block",tap:F,doubleTap:O,data:e})}(e)})),c.default.layoutUpdated((function(eLayoutUpdated((funcissueLoading((function(){T=new l.B})),i.nd.viewer.pagesViewLayout={context:Q,activePages:function(){return S},findArticleRect:function(e,t){var n=J(t);if(n){var i=n.Articles;if(i)for(var r=0,o=i.length;r<o;r++){var a=i[r];if(a.Id==e||a.RootArticleId==e){var s=a.Blocks;if(s)return Y(s,a.Id)}}}return null},loaded:function(){return T.promise()}};var ie,re,oe,ae,se,ue,ce,le,de=i.nd.viewer.pagesViewLayout,he=n(17447),pe=n(40605),fe=n(32),me=n(46720),ge=55,ve=55;function ye(e,t,n,i,r,o,a){var s,u,c,l;return s=t.left<0?0:t.left,u=t.top<0?n:t.top+n,c=Math.round(o-s-t.width*e.width),(l=Math.round(a-u-t.height*e.height))<0&&(l=r?i:0),{maxX1:s,maxY1:u,maxX2:c,maxY2:l}}function _e(e){return Math.round(100*e/ce.scale)}function be(){var e=ae.getPageBoundingRect(),t=ae.getNormalizedVisibleRect(),n=function(e,t){var n,i,r,o,a;return n=ye(t,e,se,ue.height(),ue.visible(),re.width(),re.height()),i=Math.round(n.maxX1-(ce.maxX1-fe.Z.getLeft())*(t.scale/ce.scale)),r=Math.round(n.maxY1-(ce.maxY1-fe.Z.getTop())*(t.scale/ce.scale)),o=Math.round(fe.Z.getWidth()*(t.scale/ce.scale)),a=Math.round(fe.Z.getHeight()*(t.scale/ce.scale)),{maxX1:n.maxX1,maxY1:n.maxY1,maxX2:n.maxX2,maxY2:n.maxY2,minWidth:ge,minHeight:ve,selectionX1:i,selectionY1:r,selectionWidth:o,selectionHeight:a}}(e,t);ce={maxX1:n.maxX1,maxY1:n.maxY1,scale:t.scale,top:ee,n)}function we(){re&&oe.cancel()}var Ce=ie={show:function(e){if(!re){re=i('<div id="printAreaPanel" style="position: absolute; z-index:3; width: 100%; height: 100%; overflow: hidden"></div>'),i("body").append(re),oe={cancel:function(e){void 0===e&&(e=!0),fe.Z.dispose(),re.remove(),ae.onresized(be,"unsubscribe"),ae.onmoved(be,"unsubscribe"),re=oe=ae=ce=se=ue=null,i(ie).off("print"),le.dispose(),e&&i(ie).trigger("cancel")},print:function(){i(ie).trigger("print",{top:_e(fe.Z.getTop()-ce.top-se),left:_e(fe.Z.getLeft()-ce.left),width:_e(fe.Z.getWidth()),height:_e(fe.Z.getHeight())}),this.cancel(!1)}},he.ZP.templates.renderTo("v7.Client.Dialogs.Print.SelectCustomArea",oe,re),se=re.find("#tt-printArea").height(),ue=pe.ZP.root().mainPanel().thumbsViewPanel(),ae=function(e){var t=de.activePages();for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(i.owner.page().pageNumber()==e)return i}}(e),ae.onresized(be),ae.onmoved(be);var t=ae.getPageBoundingRect(),n=ae.getNormalizedVisibleRect(),r=function(e,t){var n,i,r,o,a,s;return r=re.width(),o=re.height(),n=ue.height(),i=ue.visible(),a=ye(t,e,se,n,i,r,o),s=function(e,t,n,i,r,o,a,s,u){var c,l,d,h;return c=t.width*e.width,l=t.height*e.height-n,r&&(l-=i),c/2<s?(d=t.left<0?0:t.left,c*=2):d=o+c/2-c/4,l/2<u?(h=t.top,l*=2):h=a+l/2-l/4,{selectionX1:Math.round(d),selectionY1:Math.round(h),selectionWidth:Math.round(c/2),selectionHeight:Math.round(l/2)}}(t,e,se,n,i,a.maxX1,a.maxY1,ge,ve),s.selectionWidth<ge&&(ge=0),s.selectionHeight<ve&&(ve=0),{maxX1:a.maxX1,maxY1:a.maxY1,maxX2:a.maxX2,maxY2:a.maxY2,minWidth:ge,minHeight:ve,selectionX1:s.selectionX1,selectionY1:s.selectionY1,selectionWidth:s.selectionWidth,selectionHeight:s.selectionHeight}}(t,n);ce={maxX1:r.maxX1,maxY1:r.maxY1,scale:n.scale,top:t.top,left:t.left},fe.Z.init(re,r),le=me.Z.bind(u.Z,"activeViewChanging",we)}},onPrint:function(e){i(ie).on("print",e)},onCancel:function(e){i(ie).one("cancel",e)}}},18410:function(){!function(){if(!(window.history&&window.history.pushState&&window.history.replaceState)){var e=window.basePath||"/";if(window.location.pathname!==e){var t=document.location.protocol+"//"+(document.location.host||document.location.hostname);window.location=t+e+"#"+window.locatiict";t70),r=n(40785);i.Z.api=r.Z,t.Z=r.Z},81867:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return k}});var i=n(19237),r=n(1753),o=n(60811),a=n(79913),s=n(74981),u=n(14347),c=n(57136),l=n(22970),d=n(40180),h=n(49698),p=function(e){e&&(this.followedByMe=e.IsFollowing,this.followedByUsersTotal=e.FollowersTotal,this.followsUsersTotal=e.FollowsTotal,this.followedByUsers=(0,d.map)(e.Followers,(function(e){return new c.I(e)})),this.followsUsers=(0,d.map)(e.Follows,(function(e){return new c.I(e)})))},f=n(4169),m=n(60231),g=function(e){function t(t){var n=e.call(this,t.socialInfo)||this;n.commentsTotal=t.commentsTotal||0,n.opinionsTotal=t.opinionsTotal||0,n.collectionsTotal=t.collectionsTotal||0,n.trendsWhereUserIsLeaderTotal=t.trendsWhereUserIsLeaderTotal||0,n.followers=new p({IsFollowing:t.userFollowers.isFollowing,FollowersTotal:t.userFollowers.followersTotal,FollowsTotal:t.userFollowers.followsTotal,Followers:t.userFollowers.followers,Follows:t.userFollowers.follows});var i,r,o=t.opinions||{};return n.opinions=(0,d.map)(o.items||[],(function(e){return new h.Z({opinionId:e.opinionId.toString(),webName:e.webName,text:e.text,numberOfFollowers:e.numberOfFollowers,followedByCurrentUser:e.followedByCurrentUser})})),n.trendsWhereUserIsLeader=(0,d.map)(t.trendsWhereUserIsLeader||[],(function(e){return new v(e)})),n.colleustomId,name:e.Name,count:e.Count}})),n.collections=n.collections.concat((i=t.sharingTypes,r=f.Z.get("ui.FavoritesMenu.Bookmarks"),i.map((function(e){var t=(0,d.find)(r,(function(t){return e.SharingType===t.id}));return{name:null==t?void 0:t.title,sharingType:e.SharingType,count:e.Count}})))),n}return(0,l.ZT)(t,e),t.toPageSource=function(e){return{skip:e.Skip,take:e.Take,total:e.Total,otherCount:e.OtherCount,items:(0,d.map)(e.Items,(function(e){return new c.I(e)}))}},t}(c.I),v=function(e){this.trendId=e.id,this.text=e.text,this.relatedWeight=m.observable(0)},y=n(88477),_=n(94777),b=new i.x,w=b.asObservable(),C=new _.Z({expire:1e3}),I=Object.freeze({profile:"profile",fullProfile:"fullprofile",profileName:"profilename",profileCurrent:"current"});function P(e){var t="".concat(I.fullProfile,".").concat(e),n=C.get(t);return n||(n=(0,a.$k)("v2/users","".concat(e,"/full")).then((function(e){return new g(e)})),C.set(t,n)),n}function x(e){void 0===e?C.clear():(C.remove("".concat(I.fullProfile,".").concat(e)),C.remove("".concat(I.profile,".").concat(e)))}function S(){if(!u.Z.isLogin())return Promise.reject("Cannot get profile for anonymous user.");var e="".concat(I.profileCurrent),t=C.get(e);return t||(t=(0,a.$k)("social","profiles/current").then((function(e){return new c.I(e)})),C.set(e,t)),t}function T(e,t){return t&&t.ok?S().then((function(n){if(nrofileId:i,followers:e.followers})})).catch(y.logError)}x(e),o.mc();var r=new p(t.info);return b.next({profileId:e,followers:r}),r})):Promie("".concat(I.profileCurrent)),x()}));var k={followersUpdates:w,uploadProfilePhoto:function(e){var t=new window.FormData;return t.append("PhotoFile",e),(0,r.Ko)({requestConfig:{withCredentials:!0},url:"".concat(s.Z.baseUrl(),"social/UploadPhoto"),data:t})},getProfileFull:P,getProfile:function(e){var t="".concat(I.profile,".").concat(e),n=C.get(t);return n||(n=(0,a.$k)("social","p(e.SocialInfo,e.OwnedPublications)})),C.set(t,n)),n},getProfileName:function(e){var t="".concat(I.profileName,".").concat(e),n=C.get(t);return n||(n=(0,a.$k)("social","GetUserProfileName",{enAccountNumber:e}),C.set(t,n)),n},getProfilePhotoUrl:function(e){return(0,a.$k)("social","profiles/".concat(e,"/photo/url"))},getAvatarImageId:function(e){return(0,a.$k)("v2/users","".concat(e,"/avatar"))},getCurrentProfile:S,getUserFollowers:function(e,t,n,i,r){return(0,a.$k)("social","profiles/".concat(e,"/followers"),{filter:t,skip:n,take:i,orderBy:r}).then((function(e){return g.toPageSource(e)}))},getUsersFollowed:function(e,t,n,i,r){return(0,a.$k)("social","profiles/".concat(e,"/follows"),{filter:t,skip:n,take:i,orderBy:r}).then((function(e){return g.toPageSource(e)}))},followUser:function(e){return(0,a.zf)("social","profiles/".concat(e,"/follow")).then((function(t){return T(e,t)}))},unFollowUser:function(e){return(0,a.zf)("social","profiles/".concat(e,"/unfollow")).then((function(t){return T(e,t)}))},getStaticMapUrl:function(e,t,n,i,r){return"".concat(s.Z.baseUrl(),"map?width=").concat(e,"&height=").concat(t,"&zoom=").concat(n,"&centerLat=").concat(i,"&centerLng=").concat(r)},searchUsersChannels:function(e,t,n,i){return e&&e.length<3?Promise.resolve({items:[],meta:{offset:t,limit:n,totalCount:0}}):s.Z.get("channels","search",{offset:t,limit:n,filter:e,orderBy:i})}}},18187:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var i,r=n(20384),o=n(74981),a=n(79913),s={Aeturn"".concat("v2","/").concat(e)}var c=((i={})[s.ARTICLE]={vote:function(e,t){return(0,a.zf)(u("articles"),"".concat(e,"/votes"),{vote:t},{disableRetry:!0})},getMeta:function(e){return o.Z.get(u("articles"),"".concat(e,"/votes/meta"))}},i[s.COMMENT]={vote:function(e,t){return(0,a.zf)(u("comments"),"".concat(e,"/votes"),{vote:t},{disableRetry:!0})},getMeta:function(e){return o.Z.get(u("comments"),"".concat(e,"/votes/meta"))}},i);function l(e){if(!c[e])throw new Error("contentType:".concat(e," is not supported."))}var d={contentTypes:Object.freeze(s),voteLike:function(e,t){return l(t),c[t].vote(e,1)},voteDislike:function(e,t){return l(t),c[t].vote(e,-1)},getMeta:function(e,t){return l(t),c[t].getMeta(e)}},h=n(4169),p=n(6677),f=r({}),m="nd.social.comments:VotesMetaUpdated";function g(e,t){return"".concat(e,"_").concat(t)}function v(e,t,n,i){n&&i?f.trigger(g(e,t),[n,i]):p.Z.error("either {context} or {meta} is not specified.")}var y,_={contentTypes:d.contentTypes,voteLike:function(e,t){return d.voteLike(e,t).then((function(n){return v(m,t,e,n),n}))},voteDislike:function(en((function(n){return v(m,t,e,n),n}))},getMeta:function(e,t){return d.getMeta(e,t)},enabled:function(){return h.Z.get("features.vote",!0)||h.Z.get("ui.Voting.enable",!1)},onVotesMetaUpdated:(y=m,function(e,t){var n=g(y,e);return f.on(n,t),){o()&&r.Z.resume()}};i.nd.stats=a},58060:function(e,t,n){"use strict";var i=n(20384),r=n(6405),o={getCurrent:function(){return r.Z.getCurrent()}};i.nd.subscriptions=o,t.Z=i.nd.subscriptions},6405:function(e,t,n){"use strict";n(.$k)("subscriptions","getCurrent")}};t.Z=r},10110:function(e,t,n){"use strict";n.d(t,{U2:function(){return qe},z2:function(){return Ge},zl:function(){return Xe}});var i=n(20384),r=n(73267),o=n(22970),a=n(44853),s=a.Z.item,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.ZT)(t,e),t.prototype.item=function(){return this._item||(this._item=new s(this).name("empty").bind(this.activate.bind(this))),this._item},t.prototype.available=function(){return Promise.resolve(!0)},t}(r.Z),c=u,l=n(79375),d=l.Z.list,h=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.ZT)(t,e),t.prototype.item=function(){return this._getItem("more","Menu.More","pri pri-more")},t.prototype.items=function(){return this._context},t.prototype.available=function(){return!0},t.prototype.enabled=function(){return!0},t.prototype.activate=function(e){var t=new d(this).title(e.title());t.addGroup().items(this._context).scrollable(!1);var n=this._parent.menu().position();this._parent.showSubmenu(t,{position:{x:(n.right+n.left)/2,y:(n.bottom+n.top)/2}})},t.prototype.back=function(){this._parent.back()},t.prototype.onHide=function(e){return this._parent.onHide&&this._parent.onHide(e)},t.prototype.onShow=function(e){return this._parent.onShow&&this._parent.onShow(e)},t}(r.Z),p=h,f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.ZT)(t,e),t.prototype.item=function(){return this._getItem("pageview","Menu.PageView","pri pri-pageview")},t.prototype.available=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=(0,o.CR)(2===t.length?t:[this._view,this._context],2)[1];return i&&i.article&&i.article.Issue?e.prototype.available.apply(this,(0,o.ev)([],(0,o.CR)(t),!1)):Promise.resolve(!1)},t}(r.Z),m=f,g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.ZT)(t,e),t.prototype.item=function(){return this._getItem("textview","Menu.TextView","pri pri-textview")},t}(r.Z),v=g,y=n(4169),_=function(e){function t(t,n,i){var r=e.call(this,t,n,i)||this;return r._commentsEnabled=y.Z.get("features.comments",!0),r}return(0,o.ZT)(t,e),t.prototype.item=function(){return this._getItem("comment","Menu.Comment","pri pri-comment")},t.prototype.available=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(!this._commentsEnabled)return Promise.resolve(!1);var i=(0,o.CR)(2===t.length?t:[this._view,this._context],2)[1];return i&&i.article?e.prototype.available.apply(this,(0,o.ev)([],(0,o.CR)(t),!1)):Promise.resolve(!1)},t}(r.Z),b=_,w=n(2099),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.ZT)(t,e),t.prototype.item=function(){return this._getItem("copy","Menu.Copy","pri pri-copy")},t.prototype.available=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.enabled()?e.prototype.available.apply(this,(0,o.ev)([],(0,o.CR)(t),!1)):Promirn!w.Z.isIssueRestrictedBy("Copy")},t}(r.Z),I=C,P=n(60231),x=n(17447),S=n(40180),T=n(82418),k=n(70263),A=n(24995),E=n(48921),Z=n(14347),M=function(e){function t(t,n,i){var r=e.call(this,t,n,i)||this;return r.itemModel=r.createItemModel(),r.getBookmarksPromise=r.loadBookmarks(),r.pagesChangeSubscriber=(0,T.L)((function(e){i.issue&&r.getFilteredPageSets(i.issue,e.selectedPages).then((function(e){return r.mapBookmarksToViewModel(e)})).then((function(t){r.itemModel.bookmarks(t),r._context.pageNumbers=e.selectedPages}))})),r}return(0,o.ZT)(t,e),t.prototype.available=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return this.enabled().then((function(i){return i?e.prototype.available.apply(t,(0,o.ev)([],(0,o.CR)(n),!1)):Promise.resolve(!1)}))},t.prototype.enabled=function(){return y.Z.loaded().then((function(){return y.Z.get("ui.Bookmarks.enable",!1)}))},t.prototype.createItemModel=function(){var e=this,t=this._getItem("bookmark","Menu.Bookmark","pri pri-bookmark").template("saveToCollectionItem"),n=Object.create(t);return n.bookmarks=P.observableArray([]),n.displayBookmarks=P.pureComputed((function(){return!(0,S.isEmpty)(n.bookmarks())})),n.displaySaveToCollection=P.pureComputed((function(){var t=e._context||{};return!t.article&&!t.pageSet||!n.displayBookmarks()})),n.bookmarkClick=function(e){var t=this._controller&&this._controller._context;return t&&(t.bookmark=Object.getPrototypeOf(e)),this.onClick()},n},t.prototype.createBookmarkModel=function(e,t){var n=Object.c(e){return new Date(e.createdDate)})),r=(0,S.min)(i),o=x.ZP.formatDate(r,"v7.Client.DateFormat.Issue","dd MMM yyyy");return n.savedText=x.ZP.format("ContextMenu.Bookmark.Saved",o),n.metaText=function(){var n=[];if(!(0,S.isEmpty)(e.pages)){var i=e.pages.length>1?x.ZP.val("ContextMenu.Bookmark.Pages","Pages"):x.ZP.val("ContextMenu.Bookmark.Page","Page");n.push("".concat(e.pages.length," ").concat(i))}if(!(0,S.isEmpty)(e.collections)&&!(0,S.isEmpt(function(e){return e.id===t.id}))})).map((function(e){return e.name})).value(),o=r.join(", ");if(o){var a=r.length>1?x.ZP.val("ContextMenu.Bookmark.Collections","Collections"):x.ZP.val("ContextMenu.Bookmark.Collection","Collection");n.push("".concat(a,": ").concat(o))}}return n.join(", ")}(),n},t.prototype.getFilteredPageSets=function(e,t){return(0,A.s3)(e).then((function(e){return(0,S.filter)(e,(function(e){return 0===(0,S.difference)(t,e.pages).length}))})).then((function(e){var t=(0,S.map)(e,(function(e){return(0,A.h_)(e.id).then((function(t){return t.pageSet=e,t}))}));return Promise.all(t)}))},t.prototype.mapBookmarksToViewModel=function(return(0,S.isEmpty)(e.collections)})),(0,S.isEmpty)(e)?Promise.resolve([]):(0,E.bG)().thenion(e){return e.type!==E.V5.system}));return(0,S.map)(e,(function(e){return t.createBookmarkModel(e,i)}))}))},t.prototype.loadBookmarks=function(){var e=this,t=this._context;if(!Z.Z.isLogin())return Promise.resolve([]);var n=Promise.resolve();return t.article?n=(0,k.getArticleCollections)(t.article.Id).then((function(e){return e.articleId=t.article.Id,[e]})):t.pageSet?n=Promise.all([(0,A.n5)(t.pageSet.id),(0,A.h_)(t.pageSet.id)]).then((function(e){var t=(0,o.CR)(e,2),n=t[0],i=t[1];return i.pageSet=n,[i]})):t.issue&&(n=this.getFilteredPageSets(t.issue,[t.page])),n.then((function(t){return e.mction(){return Promise.resolve([])}))},t.prototype.item=function(){var e=this;renction(t){e.itemModel.bookmarks(t)})),agesChangeSubscriber.unsubscribe()},t}(r.Z),D=M,L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.ZT)(t,e),t.prototype.item=function(){return this._getItem("listen","Menu.Listen","pri pri-listen")},t.prototype.available=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=(0,o.CR)(2===t.length?t:[this._view,this._context],2)[1];return i&&i.article&&i.article.Issue?e.prototype.available.apply(this,(0,o.ev)([],(0,o.CR)(t),!1)):Promise.resolve(!1)},t}(r.Z),N=L,R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.ZT)(t,e),t.prototype.item=function(){return this._getItem("openInSmartEditor","Menu.Issue.OpenSmartEditor","pri pri-smarteditor")},t.prototype.available=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=(0,o.CR)(2===t.length?t:[this._view,this._context],2)[1];return i&&i.article&&i.article.Issue?e.prototype.available.apply(this,(0,o.ev)([],(0,o.CR)(t),!1)):Promise.resolve(!1)},t}(r.Z),V=R,B=n(98439),F=n(6772),O=l.Z.list,z=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.ZT)(t,e),t.prototype.item=function(){return this._getItem("calendar","Menu.Issue.IssueDate","pri pri-calendar")},t.prototype.available=function(){return!0},t.prototype.enabled=function(){return!0},t.prototype.activate=function(){var e=this,t=new O(this).headerEnable(!1).title("");t.addCustomGroup("v7.Client.Menu.IssueCalendar");var n=this._parent._config,r=n.callback,o=n.position;return this._parent.showSubmenu(t,{position:o||{}}),B.Z.loaded().then((function(){var t=F.Z.show(i("#issueCalendar"),B.Z.getData());t.onChange.subscribe((function(t){e._parent.hide(),(0,S.isFunction)(r)&&r(t)})),e._parent.onHide((function(){t.dispose()}))}))},t}(r.Z),U=z,H=n(54591),j=n(59527),W=n(88585),q=n(80053),G=n(91330),X=n(79430),Y=n(58653),K=n(6677),J=n(92912),$=n(27670),Q=n(46046),ee=n(91574),te=n(84066),ne=n(62490);function ie(e){return S.map(e.Blocks||[],(function(e){return Q.Z.removeInvisibleHyphens(e)}))}var re=function(e){var t=ee.Z.getInstance();if(t&&!t.visible){var n=te.Z.getFirstImage(e.Images),i={articleTitle:Q.Z.removeInvisibleHyphens(e.Title),articleSubtitle:Q.Z.removeInvisibleHyphens(e.Subtitle),articleBlocks:ie(e),hasImage:!!n,imageByline:n?Q.Z.removeInvisibleHyphens(n.Byline):"",imageUrl:n?n.Url:"",imageTitle:n?Q.Z.removeInvisibleHyphens(n.Title):"",imageText:n?Q.Z.removeInvisibleHyphens(n.Text):"",issueTitle:Q.Z.removeInvisibleHyphens(e.Issue.Title),shortDateString:e.Issue.ShortDateString,translatedInto:x.ZP.format("Messages.Dialog.Translated",G.Z.language(e.Language).title()),close:t.hide.bind(t),disclaimerTitle:x.ZP.val("TranslationDisclamerTitle","Disclaimer"),disclaimerHandler:function(){return(0,H.Z)().show(x.ZP.val("TranslationDisclamer"))}};t.show({templateName:"v7.Client.Dialogs.Translate",model:i,defaultEventFlow:!0});var r=ne.Z.startSingleArticleReading(e);t.onHide((function(){return ne.Z.stopSingleArticleReading(r)}))}},oe=n(82641),ae=n(34336),se=n(66781),ue=n(95766),ce=n(63019),le=n(24458),de=function(e){function t(t,n){var i=e.call(this,t,n.title())||this;return i.code=n.code(),i}return(0,o.ZT)(t,e),t.prototype.onClick=function(e){if(this._controller.article&&this._controller.article()){this._controller.hide(),J.ZP.show();var t=this._controller.article().Id,n=e.code;return ue.U.send(new ce.Fz({articleId:t,translatihen((function(e){J.ZP.hide(),re(e)}))}if(this._controller.hide(),$.Z.getActiveViewName()===le.n3.PagesView){var i=w.Z.pages.getFirstActivePage(),r={page:i?i.pageNumber():1,issue:w.Z.issue()};return se.Z.pause(),eturn G.Z.current.language(e.code)}))}return G.Z.current.language(e.code),Promise.resolve()},t}(a.Z.item),he=n(92895),pe=l.Z.list,fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.ZT)(t,e),t.prototype.item=function(){return this._getItem("translate","Menu.Translate","pri pri-translate")},t.prototype.available=function(){return W.Z.getAsync(W.Z.e===W.Z.restrictionResults.ALLOWED}),(function(){return!1}))},t.prototype.enabled=function(){return X.Z.issueIsDisplayed()?j.yy("Translation",w.Z.cid(),w.Z.issue()).then((function(e){return e?G.Z.getTranslationLanguages():[]})).then((function(e){return!(0,S.isEmpty)(en K.Z.error(e),Promise.resolve(!1)})):Promise.resolve(!0)},t.prototype._addLanguages=function(e,(function(e){t.add(new de(i,e))})),this._parent.showSubmenu(n),this.loading=!1},t.prototype.activate=function(){var e=this;return this.loading?Promise.resolve():(this.loading=!0,W.Z.getAsync(W.Z.restrictionTypes.translation).then((function(t){if(t!==W.Z.restrictionResults.ALLOWED)return e.hide(),void q.default.signIn();ue.U.send(new he.tp({action:e._item._name}));var n=new pe(e).title(x.ZP.val("Menu.TranslateIssue")),i=n.addGroup().scrollable(!0);G.Z.getTranslationLanguages().then((function(t){t&&t.length>0?e._addLanguages(t,i,n):(0,H.Z)().show(x.ZP.val("Messages.TheLanguageIsNotSupported"))}))})).finally((function(){e.loading=!1})))},t.prototype.back=function(){this._parent.back()},t.prototype.hide=function(){this._parent.hide()},t}(r.Z),me=fe,ge=n(79913),ve=a.Z.item,ye=l.Z.list,_e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.ZT)(t,e),t.prototype.item=function(){return this._item||(this._item=new ve(this,x.ZP.val("Menu.TranslateArticle")).name("translate").css("pri pri-translate").bind(this.activate.bind(this))),this._item},t.prototype.available=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var r=this.article();return r&&r.Issue&&r.Language?r.OriginalLanguage&&r.Language!==r.OriginalLanguage?Promise.resolve(!1):G.Z.language(r.Language)?this.enabled().then((function(i){return i?e.prototype.available.apply(t,(0,o.ev)([],(0,o.CR)(n),!1)):Promise.resolve(!1)})):Promise.resolve(!1):Promise.resolve(!1)},t.prototype.enabled=function(){var e=this._context,t=!!e.article;return Promise.all([y.Z.getAsync("ui.Translate.enable",!0),W.Z.getAsync(t?W.Z.restrictionTypes.singleArticleTranslation:W.Z.restrictionTypes.translation)]).then((function(n){var i,r=(0,o.CR)(n,2),a=r[0],s=r[1];return!(!a||s!==W.Z.restrictionResults.ALLOWED)&&(!i&&e&&e.article&&e.article.Issue&&(i=e.article.Issue.Id),!i&&e&&e.issue&&(i=e.issue.Id),i||(i=w.Z.issue()),i?t?j.yy("Translation",null,i):Promise.all([j.yy("Translation",null,]).then((function(e,t){return e&&t})):Promise.resolve(!1))}))},t.prototype._addLanguages=function(e,t,n){var i=this,r=this.article();e.forEach((function(e){r&&r.Language===e.code()||t.add(new de(i,e))})),this._parent.showSubmenu(n),this.loading=!1},t.prototype.activate=function(){var e=this;return this.loading?Promise.resolve():(this.loading=!0,W.Z.getAsync(W.Z.restrictionTypes.singleArticleTranslation).then((function(t){if(t!==W.Z.restrictionResults.ALLOWED)return e.hide(),void q.default.signIn();ue.U.send(new he.tp({action:e._item._name}));var n=new ye(e).title(x.ZP.val("Menu.Items.Language")),i=n.addGroup().scrollable(!0),r=e.article();if(r||$.Z.getActiveViewName()!==le.n3.PagesView&&$.Z.getActiveViewName()!==le.n3.TextView){var o,a,s=G.Z.language(r&&r.Language);e._addLanguages(s&&s.pairs(!0)||[],i,n)}else{var u=w.Z.articles(),c=e._context.page||1,l=(o=u,aturn(0,S.includes)(a,e.PageNumber)})).head().value()||{}),d=l.ArticleId||l.Id;d&&(0,ge.$k)("Articles","Get",{keys:d}).then((function(t){var r=(0,S.head)(t)||{},o=G.Z.language(r.Language);e._addLanguages(o&&o.pairs(!0)||[],i,n)}))}})).finally((function(){e.loading=!1})))},t.prototype.back=function(){this._parent.back()},t.prototype.hide=function(){this._parent.hide()},t.prototype.article=function(){return this._context.article},t}(r.Z),be=_e,we=n(54836),Ce=n(8871),Ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.ZT)(t,e),t.prototype.available=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=(0,o.CR)(2===e.length?e:[this._view,this._context],2)[1];return n&&n.article&&n.article.Source&&n.article.Source.ChannelId?new Promise((function(e){Promise.all([Ce.default.load(),y.Z.loaded()]).then((function(){var t=y.Z.get("post.enabled")&&n.article.Source.ChannelId===Ce.default.getProfileId();e(t)})).catch((function(){e(!1)}))})):Promise.resolve(!1)},t}(r.Z),Pe=Ie,xe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.ZT)(t,e),t.prototype.item=function(){return this._getItem("editpost","Menu.Edit","pri pri-edit")},t.prototype.available=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.available.apply(this,(0,o.ev)([],(0,o.CR)(t),!1))},t}(Pe),Se=xe,Te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.ZT)(t,e),t.prototype.item=function(){return this._getItem("deletepost","Menu.Delete","pri pri-delete")},t.prototype.available=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.available.apply(this,(0,o.ev)([],(0,o.CR)(t),!1))},t}(Pe),ke=Te,Ae=n(18187),Ee=function(){function e(e,t,n){var i=this,r=void 0===n?{}:n,o=r.likesCount,a=void 0===o?0:o,s=r.dislikesCount,u=void 0===s?0:s,c=r.currentUserVote,l=void 0===c?0:c;this.article=e,this.support=P.observable(a),this.oppose=P.observable(u),this.vote=P.observable(l),this._eon(){return i.support()+i.oppose()})),this.percent=P.pureComputed((function(){if(0===i.total())return"";var e=Math.round(100*i.support()/i.total());return"".concat(e,"%")}))}return e.prototype.load=function(e){var t=void 0===e?{}:e,n=t.likesCount,i=void 0===n?0:n,r=t.dislikesCount,o=void 0===r?0:r,a=t.currentUserVote,s=void 0===a?0:a;this.support(i),this.oppose(o),this.vote(s)},e.prototype.onSupportClicked=function(){var e=this;return ue.U.send(new he.tp({action:"upvote"})),Ae.Z.voteLike(this.article.Id,Ae.Z.contentTypes.ARTICLE).then((function(t){e.load(t)}))},e.prototype.onOpposeClicked=function(){var e=this;return ue.U.send(new he.tp({action:"downvote"})),Ae.Z.voteDislike(this.article.Id,Ae.Z.contentTypes.ARTICLE).then((function(t){e.load(t)}))},e.prototype.enabled=function(){return this._enabled},e}(),Ze=n(88769),Me=n(77004),De=a.Z.custom,Le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.ZT)(t,e),t.prototype.item=function(){var e=this;if(!this._item){var t=Me.online();this._item=new De(this).template("vote"),this._item.data=new Ee(this._context.article,t),Ae.Z.getMeta(this._context.article.((function(t){e._item.data.load(t)}))}return this._item},t.prototype.available=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!Ae.Z.enabled())return!1;var n=(0,o.CR)(2===e.length?e:[this._view,this._context],2),i=n[0],r=n[1];return Promise.resolve(i!==Ze.ZP.views.radioView&&r&&r.article&&2!==r.article.Type)},t}(r.Z),Ne=Le,Re=n(83294),Ve=l.Z.list,Be=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r.checked=P.observable(!1),r.activationId=i,r}retuon(){this.checked(!this.checked(,n,i)||this;return r._group=null,r}return(0,o.ZT)(t,e),t.prototype.item=function(){return this._getItem("issueDownload","Buttons.Download.Text","pri pri-download")},t.prototype.done=function(){var e=(0,S.reduce)(this._group.items(),(function(e,t){return t.checked()&&e.push(t.activationId),e}),[]);e.length>0&&Re.Z.download(w.Z.issue(),e)},t.prototype.available=function(){return!0},t.prototype.enabled=function(){return!0},t.prototype.activate=function(){var e=this;Re.Z.onFinished((function(){return e.hide()})),Re.Z.onChooseActivation((function(t,n){if(n&&0!==n.length){var i=new Ve(e).title(x.ZP.val("Menu.Item.DirectDownload")).canBeDone(!0);e._group=i.addGroup(x.ZP.val("Menu.Issue.DeliveredTo"),"group").footerText(x.ZP.val("Menu.DownloadIssue.ToHave")).scrollable(!0),(0,S.forEach)(n,(function(t){e._group.add(new Be(e,t.Name,t.Id))})),e._group.items()&&(i.disableDone=P.computed((function(){return!(0,S.find)(e._group.items(),(function(e){return e.checked()}))}))),e._parent.showSubmenu(i)}})),Re.Z.download(w.Z.issue())},t.prototype.back=function(){this._parent.back()},t.prototype.hide=function(){this._parent.hide()},t}(r.Z),Oe=n(48692),ze=l.Z.list,Ue=function(e){function t(t,n,i){var r=e.call(this,t,n)||this;return r._group=null,r.checked=P.observable(!1),r.ticket=i,r}return(0,o.ZT)(t,e),t.prototype.onClick=function(){this.controller().uncheckAll(),this.checked(!0)},t}(a.Z.radio),He=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,o.ZT)(t,e),t.prototype.item=function(){return this._getItem("export","Buttons.Export","pri pri-exportereader")},t.prototype.available=function(){return y.Z.loaded().then((function(){return y.Z.get("ui.Export.available",!1)}))},t.prototype.enabled=furn y.Z.get("ui.Export.enable",!1)}))},t.prototype.activate=function(){var e=this;Oe.Z.getDeviceTypes(w.Z.issue()).then((function(t){var n=new ze(e).title(x.ZP.val("Buttons.Export")).canBeDone(!0);e._group=n.addGroup(x.ZP.val("Menu.Issue.SelectDevice"),"group").scrollable(!0),(0,S.forEach)(t,(function(t){e._group.add(new Ue(e,t.Name,t.Ticket))})),e._group.items()&&(n.disableDone=P.computed((function(){return!(0,S.find)(e._group.items(),(function(e){return e.checked()}))}))),e._parent.showSubmenu(n)}))},t.prototype.done=function(){var e=(0,S.find)(this._group.items(),(function(e){return e.checked()}));e&&(ue.U.send(new he.tp({action:this._item._name,label:e.title()})),Oe.Z.addExportRequest(e.ticket),this.hide())},t.prototype.back=function(){this._parent.back()},t.prototype.hide=function(){this._parent.hide()},t.prototype.uncheckAll=function(),(function(e){return e.checked(!1)}))},t}(r.Z),je=He,We=new we.Z;We.register("base",r.Z),We.register("empty",c),We.register("more",p),We.register("pageView",m),We.register("textView",v),We.register("copy",I),We.register("bookmark",D),We.register("listen",N),We.register("comment",b),We.register("openInSmartEditor",V),We.register("calendar",U),We.register("issueTranslate",me),We.register("translate",be),We.register("editpost",Se),We.register("deletepost",ke),We.register("vote",Ne),We.register("issueDownload",Fe),We.register("export",je),i.nd.ui.contextMenu||(i.nd.ui.contextMenu={}),i.nd.ui.contextMenu.items={controllers:We};var qe=We.get.bind(We),Ge=We.register.bind(We),Xe=We.registerAction.bind(We)},26615:function(e,t,n){"use strict";n.d(t,{U2:function(){return H},zl:function(){return j}});var i=n(54836),r=n(22970),o=n(40180),a=n(73267),s=n(4169),u=n(79375),c=n(10110),l=n(2584),d=(n(23193),n(73504)),h=n(88477),p=n(2099),f=n(95766),m=n(92895),g=(n(88769),n(14347)),v=u.Z.list,y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.ZT)(t,e),t.prototype.items=function(){return this._context},t.prototype.activate=function(e){return(0,r.mG)(this,void 0,void 0,(function(){var t,n,i=this;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return{return i.hide(),(0,h.logError)(e)}))];case 1:return r.sent(),g.Z.isLogin()&&(0,o.isEmpty)(this.pendingTasks)?(f.U.send(new m.tp({action:this._item._name})),t=new v(this).title(e.title()),this._context&&this._context.preview&&(this._context.preview.snippet=new d.Z(this._context),t.addGroup().template("preview").data(this._context)),n=s.Z.get("ui.SharingMenu")||[],this.pendingTasks=n.filter((function(e){return e.enabled})).map((function(e){return i._addItem(e.id)})),[2,Promise.all(this.pendingTasks).then((function(e){t.addGroup().items(e.filter((function(e){return e}))).scrollable(!1);var n=i._parent.menu().position(),r=0===p.Z.pages.pagesCount()?1e3:0;setTimeout((function(){i._parent.showSubmenu(t,{position:{x:(n.right+n.left)/2,y:(n.bottom+n.top)/2}}),i.pendingTasks=[]}),r)}))]):[2,Promise.resolve()]}}))}))},t.prototype.back=function(){this._parent.back()},t.prototype.hide=function(){this._parent.hide()},t.prototype.onHideshareOnHide=function(e){return this._parent.onHide&&this._parent.onHident.onShow&&this._parent.onShow(e)},t.prototype._addItem=function(e){var t=(0,c.U2)(e);if(t){var n=new t(this,this._view,this._context);return Pnction(e){return e?n.item():void 0}))}return Promise.resolve(void 0)},t.prototype._canAddItem=function(e){var t=(0,c.U2)(e);if(t){var n=new t(this,this._view,this._context);return Promise.resolve(n.available())}return Promise.resolve(!1)},t.prototype.item=function(){return this._getItem("share","Menu.Share","pri pri-share")},t.prototype.available=function(){var e=this,t=(s.Z.get("ui.SharingMenu")||[]).filter((function(e){return e.enabled})).map((function(t){return e._canAddItem(t.id)}));return Promise.all(t).th.some)(e,(function(e){return!0===e}))}))},t}(a.Z),_=y,b=n(14581),w=n(59527),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.ZT)(t,e),Object.defineProperty(t.prototype,"restrictionKey",{get:function(){return"Blogging"},enumerable:!1,configurable:!0}),Object.defineProperty(|!this._context.article.ArticleId)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isIssueArticleContext",{get:function(){var e=this._context.article&&this._context.article.ArticleId;return!!e&&b.Sg.parse(e).type===b.ss.Issue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isPageSetContext",{get:function(){return!!this._context.pageSet},enumerable:!1,configurable:!0}),t.prototype.available=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=function(e){var t;return e&&e.article&&e.article.Issue&&(t=e.article&&e.article.Issue.Id),!t&&e&&e.issue&&(t=e.issue&&e.issue.Id),t||(t=p.Z.issue()),t}((0,r.CR)(2===n.length?n:[this._view,this._context],2)[1]);return o?w.yy(this.restrictionKey,null,o).then((function(i){return i?e.prototype.available.apply(t,(0,r.ev)([],(0,r.CR)(n),!1)):Promise.resolve(!1)})):e.prototype.available.apply(this,(0,r.ev)([],(0,r.CR)(n),!1))},t.prototype.enabled=function(){for(var t=this,n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=(0,r.CR)(2===n.length?n:[this._view,this._context],2)[1].preview||{};return o.snippet&&o.snippet.getUrl?o.snippet.getUrl().then((function(){return e.prototype.enabled.apply(t,(0,r.ev)([],(0,r.CR)(n),!1))})).catch(h.logError):e.prototype.enabled.apply(this,(0,r.ev)([],(0,r.CR)(n),!1))},t}(a.Z),I=C,P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.ZT)(t,e),t.prototype.item=function(){return this._getItem("evernote","Menu.Evernote","pri pri-evernote")},t}(I),x=P,S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.ZT)(t,e),t.prototype.item=function(){return this._getItem("onenote","Menu.OneNote","pri pri-onenote")},t}(I),T=S,k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.ZT)(t,e),t.prototype.item=function(){return this._getItem("shareTwitter","Menu.Twitter","pri pri-twitter")},t.prototype.items=function(){return this._context},t}(I),A=k,E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.ZT)(t,e),t.prototype.item=function(){return this._getItem("shareFacebook","Menu.Facebook","pri pri-facebook")},t.prototype.items=function(){return this._context},t}(I),Z=E,M=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.ZT)(t,e),t.prototype.item=function(){return this._getItem("clientShareTwitter","Menu.Twitter","pri pri-twitter")},t.prototype.items=function(){return this._context},t}(I),D=M,L=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.ZT)(t,e),t.prototype.item=function(){return this._getItem("clientShareFacebook","Menu.Facebook","pri pri-facebook")},t.prototype.items=function(){return this._context},t}(I),N=L,R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.ZT)(t,e),t.prototype.item=function(){return this._getItem("shareeMail","Menu.eMail","pri pri-email")},t.prototype.items=function(){return this._context},Object.defineProperty(t.prototype,"restrictionKey",{get:function(){return"EmailSharing"},enumerable:!1,configurable:!0}),t}(I),V=R,B=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.ZT)(t,e),t.prototype.item=function(){return this._getItem("shareInstapaper","Menu.Instapaper","pri pri-instapaper")},t.prototype.items=function(){return this._context},t}(I),F=B,O=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}r,"Menu.CopyUrl","pri pri-copyurl")},t.prototype.available=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.available.apply(this,(0,r.ev)([],(0,r.CR)(t),!1))},t.prototype.items=function(){return this._context},t.prototype.enabled=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.enabled.apply(this,(0,r.ev)([],(0,r.CR)(t),!1))},t}(I),z=O,U=new i.Z;U.register("share",_),U.register("evernote",x),U.register("onenote",T),U.register("shareTwitter",A),U.register("clientShareTwitter",D),U.register("shareFacebook",Z),U.register("clientShareFacebook",N),U.register("shareeMail",V),U.register("shareInstapaper",F),U.register("copyUrl",z);var H=U.get.bind(U),j=(U.register.bind(U),U.registerAction.bind(U))},77644:function(e,t,n){"use strict";var i=n(20384),r=n(60231),o=n(17447),a=n(99806);function s(e){var t={date:new Date,current:new Date,starts:1,onRenderDay:RenderMonth:function(e,t){return{}},onRenderYear:fnRenderHen{}},onChange:function(e){return!0}};this.options=i.extend({},t,e||{})}function u(e){return{nextMonthAvailable:function(t){var n=new Date(t.getTime());return n.setMonth(n.getMonth()+1),!e.onRenderMonth(n.getFullYear(),n.getMonth()+1).disabled},prevMonthAvailable:function(t){var n=new Date(t.getTime());return n.setMonth(n.getMonth()-1),!e.onRenderMonth(n.getFullYear(),n.getMonth()+1).disabled},nextYearAvailable:function(t){var n=new Date(t.getTime());return n.setFullYear(n.getFullYear()+1),!e.onRenderYear(n.getFullYear()).disabled},prevYearAvailable:function(t){var n=new Date(t.getTime());return n.setFullYear(n.getFullYear()-1),!e.onRenderYear(n.getFullYear()).disabled},nextYearSameDayAvailable:function(t){var n=new Date(t.getTime());return n.setFullYear(n.getFullYear()+1),!e.onRenderMonth(n.getFullYear(),n.getMonth()+1).disabled},prevYearSameDayAvailable:function(t){var n=new Date(t.getTime());return n.setFullYear(n.getFullYear()-1),!e.onRenderMonth(n.getFullYear(),n.getMonth()+1).disabled},nextPeriodAvailable:function(e,t,n){var i={};return i[c.months]=n>0?this.nextMonthAvailable:this.prevMonthAvailable,i[c.years]=n>0?this.nextYearAvailable:this.prevYearAvailable,i[t](e)},nextPeriodSameDayAvailable:function(e,t,n){var i={};return i[c.months]=n>0?this.nextMonthAvailable:this.prevMonthAvailable,i[c.years]=n>0?this.nextYearSameDayAvailable:this.prevYearSameDayAvailable,i[t](e)},addMonths:function(e,t){var n=new Date(e.getTime()),i=n.getDate();return n.setDate(1),n.setMonth(n.getMonth()+t),n.setDate(Math.min(i,this.getMaxDays(n))),n},addYears:function(e,t){var n=new Date(e.getTime()),i=n.getDate();return n.setDate(1),n.setFullYear(n.getFullYear()+t),n.setDate(Math.mi;return n.setDate(n.getDate()+t),n},getMaxDays:function(e){for(var t=new Date(e),n=28,i=t.getMonth();t.getMonth()==i;)n++,t.setDate(n);return n-1},getWeekNumber:function(e){var t=new Date(e);t.setDate(t.getDate()-(t.getDay()+6)%7+3);var n=t.valueOf();return t.setMonth(0),t.setDate(4),Math.round((n-t.valueOf())/6048e5)+1},add:function(e,t,n){switch(t){case c.months:return this.addMonths(e,n);case c.years:return this.addYears(e,n);default:throw new Error("Unsupported state type - "+t)}}}}n(55193),n(84438),s.prototype=function(){function e(e){i.each(e.find(".datepickerViewDays td, .datepickerViewMonths td, .datepickerViewYears td"),(function(e,t){var n=i(t)[0].clientHeight;n&&(i(t).css("height",n),i(t).find("a").css({height:n+"px",lineHeight:n+"px"}))}))}var t,n;return{show:function(s){return l=this.options,t=function(e){var t={options:e,currentState:r.observable(e.state||c.days),states:c},n=new u(e);function a(e,i){var r={};r[c.days]=c.months,r[c.months]=c.years,r[c.years]=c.years;var o=r[t.currentState()];t.currentState()==c.years&&(e*=12),(!i||i&&n.nextPeriodAvailable(t.options.current,o,e))&&(t.options.current=n.add(t.options.current,o,e),s())}function s(){t.header(p()),t.years(h()),t.months(d()),t.weeks(l()),i.nd.event.trigger("onlayoutchanged",t)}function l(){var e,i,r,o,a,s,u=0,c=[];(o=new Date(t.options.current)).setDate(1),a=o.getMonth(),s=(o.getDay()-t.options.starts)%7,o=n.addDays(o,-(s+(s<0?7:0)));var l=new Date;for(e=-1;u<42;){r=u%7,c[i=parseInt(u/7,10)]||(e=n.getWeekNumber(o),c[i]={week:e,days:[]}),c[i].days[r]={text:o.getDate(),classname:[]},a!=o.getMonth()&&c[i].days[r].classname.push("datepickerNotInMonth"),0==o.getDay()&&c[i].days[r].classname.push("datepickerSunday"),6==o.getDay()&&c[i].days[r].classname.push("datepickerSaturday"),o.getDate()==l.getDate()&&o.getMonth()==l.getMonth()&&o.getFullYear()==l.getFullYear()&&c[i].days[r].classname.push("datepickerToday");var d=t.options.onRenderDay(o);t.options.date.valueOf()==o.valueOf()&&c[i].days[r].classname.push("datepickerSelected"),d.disabled&&c[i].days[r].classname.push("datepickerDisabled"),d.className&&c[i].days[r].classname.push(d.className),c[i].days[r].classname=c[i].days[r].classname.join(" "),u++,o=n.addDays(o,1)}return c}function d(){for(var e=new Date(t.options.current).getFullYear(),n=[],i=[],r=new Date(t.options.date),a=new Date,s=0;s<12;s++){var u=[],c=t.options.onRenderMonth(e,s+1);e==a.getFullYear()&&s==a.getMonth()&&u.push("datepickerToday"),e==r.getFullYear()&&s==r.getMonth()&&u.push("datepickerSelected"),c.disabled&&u.push("datepickerDisabled"),c.className&&u.push(c.className);var l={text:o.ZP.getMonthShortName(s),classname:u.join(" ")};s%4==0?(i=[l],n.push(i)):i.push(l)}return n}function h(){for(var e=[],n=[],i=new Date(t.options.current),r=new Date(t.options.date),o=new Date,a=0;a<12;a++){var s=i.getFullYear()-6+a,u=[],c=t.options.onRenderYear(s);s==o.getFullYear()&&u.push("datepickerToday"),s==r.getFullYear()&&u.push("datepickerSelected"),c.disabled&&u.push("datepickerDisabled"),c.className&&u.push(c.className);var l={text:s,classname:u.join(" ")};a%4==0?(n=[l],e.push(n)):n.push(l)}return e}function p(){var e={},n={},i=new Date(t.options.current),r=i.getFullYear();switch(t.currentState()){case c.days:e.text=o.ZP.formatDate(i,"Calendar.MonthFormat","MMMM, yyyy");var a=i.getMonth(),s=0==a?r-1:r,u=0==a?11:a-1,l=11==a?r+1:r,d=11==a?0:a+1;n=t.options.onRenderHeader({prevYear:s,prevMonth:u+1,nextYear:l,nextMonth:d+1});break;case c.months:e.text=r,n=t.options.onRenderHeader({prevYear:r-1,nextYear:r+1});break;case c.years:e.text=r-6+" - "+(r+5),n=t.options.onRenderHeader({prevYear:r-7,nextYear:r+6})}return n.disabledPrev&&(e.disabledPrev=n.disabledPrev),n.disabledNext&&(e.disabledNext=n.disabledNext),e}i.extend(t,{header:r.observable(p()),daysOfweek:function(){for(var e=[],n=t.options.starts,i=0;i<7;i++)e.push(o.ZP.getWeekDayMinName((i+n)%7));return e}(),weeks:r.observableArray(l()),months:r.observableArray(d()),years:r.observableArray(h()),goPrevNext:a,changeView:function(){if(!t.options.disableChangeView){switch(t.currentState()){case c.days:t.currentState(c.months);break;case c.months:t.currentState(c.years);break;case c.years:t.currentState(c.days)}s()}},clickDate:function(e,r){if(r||(r=event),r.target&&i(r.target).is(":visible")){var o=i(r.target);if(o.is("span")&&(o=o.parent()),o.is("a")){var a=o.parent();if(a.is("td")&&!a.hasClass("datepickerDisabled")){switch(t.currentState()){case c.days:var u=new Date(t.options.current),l=parseInt(o.text(),10);a.hasClass("datepickerNotInMonth")&&(u=n.addMonths(u,l>15?-1:1)),u.setDate(l),t.options.date=u.valueOf(),t.options.onChange.apply(t,[new Date(t.options.date)]);break;case c.months:var d=a.parent().parent().parent(),h=d.find("tbody.datepickerMonths td").index(a),p=parseInt(d.find("thead th.datepickerMonth span").text(),10);t.options.current.setMonth(h),t.options.current.setFullYear(p),t.options.disableChangeView?(t.options.current.setDate(1),t.options.date=t.options.current.valueOf(),t.options.onChange.apply(t,[t.options.current])):t.currentState(c.days);break;case c.years:p=parseInt(o.text(),10),t.options.current.setFullYear(p),t.options.disableChangeView?(t.options.current.setMonth(0),t.options.current.setDate(1),t.options.date=t.options.current.valueOf(),t.options.onChange.apply(t,[t.options.current])):t.currentState(c.months)}s()}}}},refresh:function(){s()}}),t.classForCurrentState=r.computed((function(){switch(t.currentState()){case c.days:return"datepickerViewDays";case c.months:return"datepickerViewMonths";case c.years:return"datepickerViewYears";default:return""}}));var f=!1,m=!1,g=0;function v(e){g=e}return t._onScroll=function(e){if(f){var t=e.dx(),n=e.dy();v(180*Math.atan2(n,t)/Math.PI),m=!0}},t._onGesturesStart=function(e){f=!0,m=!1,v(0)},t._onGesturesEnd=function(e){var i,r,o,u,l,d;f=!1,m&&(i=g,l=Math.abs(i),d=i-180<=10||i<=10,Math.abs(l-90)<=10?(r=-1*((u=i)&&u/Math.abs(u)),o=c.years,t.currentState()==c.years&&(r*=12),n.nextPeriodSameDayAvailable(t.options.current,o,r)&&(t.options.current=n.,o,r),s())):d&&function(e){a(e,!0)}(i>90?1:-1)),m=!1},t._onSingleTapConfirmed=function(e){var t=e.event();this.clickDate(t.data,t)},t}(l),n=s,Promise.all([a.z.loaded(),o.ZP.loaded()]).then((function(){a.z.renderTo("v7.Client.Calendar",t,n),i.nd.gestures.bind(n,{gesturesStart:t._onGesturesStart.bind(t),scroll:t._onScroll.bind(t),gesturesEnd:t._onGesturesEnd.bind(t),singleTapConfirmed:t._onSingleTapConfirmed.bind(t)}),e(n),i.nd.event.bind(t,"onlayoutchanged",null,(function(t,i){e(n)}))}));var l},refresh:function(){t.refresh()},dispose:function(){i.nd.gestures.unbind(n),i.nd.event.unbind(t,"onlayoutchanged")}}}();var c={days:0,months:1,yearsonResume(n),t}},t.Z=r.nd.ui.dialog},92672:function(e,t,n){"use strict";var i=n(20384),r=n(60231),o=n(91574),a=n(18518),s=o.Z.share={},u=null,c=null;s.show=function(e,t){!function(e,t){c=o.Z.createInstance(t),e.Article&&(e.Article.ThumbnailUrl=e.Article.ArticleThumbnailUrl?e.Article.ArticleThumbnailUrl:e.Article.PageThumbnailUrl),u={selectedContentType:r.observable(e.Article?"article":"page"),userComments:r.observable(e.userComments||""),submit:function(){i(s).trigger("submit",{contentType:this.selectedContentType(),userComments:th.selecclose:function(){c.hide(a.Y.Close)},resize:function(){c.resize()},previewInfo:r.observable(e)}}(e,t),function(){if(!c.visible){var e={templateName:"v7.Client.Dialogs.Shtion(){c.hide(a.Y.Ok,{listView:1})},t.Z=s},6772:function(e,t,n){"use strict";var i=n(20384),r=n(19237),o=n(14581),a=n(98439),s=n(46720),u=n(2099);n(84438),i.nd.ui.issuesCalendar={show:function(e,t,n,c){var l,d,h;d=t,h=c;var p=n||ion g(e){var t=v(e);return!!t&&t.P}function v(e){var t=e.getFullYear(),n=e.getMonth()+1,i=e.getDate();if(d.Years.hasOwnProperty(t)&&d.Years[t].hasOwnProperty(n)&&d.Years[t][n].hasOwnProperty(i))return d.Years[t][n][i]}function y(e){var t=d.Years[e];for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];for(var r in i)if(i.hasOwnProperty(r)&&i[r].P)return!0}return!1}function _(e,t){if(d.Years.hasOwnProperty(e)&&d.Years[e].hasOwnProperty(t)){var n=d.Years[e][t];for(var i in n)if(n.hasOwnProperty(i)&&n[i].P)return!0}return!1}function b(e,t){var n=d.Years;for(var i in n)if(n.hasOwnProperty(i)&&i<e)return!0;if(!t&&n.hasOwnProperty(e))return!0;var r=n[e];if(r)for(var i in r)if(r.hasOwnProperty(i)&&i<=t)return!0;return!1}function w(e,t){var n=d.Years;for(var i in n)if(n.hasOwnProperty(i)&&i>e)return!0;if(!t&&n.hasOwnProperty(e))return!0;var r=n[e];if(r)for(var i in r)if(r.hasOwnProperty(i)&&i>=t)return!0;return!1}var C,I=new i.nd.ui.datepicker({date:new Date(f.valueOf()),current:new Date(f.valueOf()),starts:i.nd.config.get("ui.Calendar.FirstDayOfWeekIsMonday",!1)?1:0,onRenderDay:function(e){return{disabled:!v(e),className:!!g(e)&&"datepickerPurchased"}},onRenderMonth:function(e,t){return{disabled:!(d.Years.hasOwnProperty(e)&&d.Years[e].hasOwnProperty(t)),className:!!_(e,t)&&"datepickerPurchased"}},onRenderYear:function(e){return{disabled:!d.Years.hasOwnProperty(e),className:!!y(e)&&"datepickerPurchased"}},onRenderHeader:function(e){return{disabledPrev:!b(e.prevYear,e.prevMonth),disabledNext:!w(e.nextYear,e.nextMonth)}},onChange:function(e){var t,n=l;l=e,n&&n.valueOf()===e.valueOf()||m.next((t=v(l).V,(0,o.eX)(h||u.Z.cid(),l,t)))}}),P=I.show(e).then((function(){C=s.Zent,(function(e,t){d=t,I.refresh()}))}));return{onChange:m.asObservable(),loaded:P,dispose:function(){I.dispose(),C&&C.dispose(),m.complete()}}}croll}return this}}}(),t.Z=i.nd.ui},47070:function(e,t,n){"use strict";var i=n(20384),r=n(84672),o=n(79375),a=(n(83062),n(66627),n(95766)),s=n(92895);function u(){}var c=!1;function l(){this._menu=new i.nd.ui.menu.view(this),this.controller=null}function d(e){this._menu=new i.nd.ui.menu.view(this),this._config={},i.extend(this._config,this._defaultConfig,e)}a.U.ofTypxtMenu).subscribe((function(){c=!0})),u.prototype={_menu:null,_visible:!1,_history:null,show:function(e){return this._visible?Promise.resolve():(r.busy.set(),r.modal.set(),Promise.resolve(this.renderer(e)).then(function(t){return this._show(e,t),this._visible=!0,this}.bind(this)))},showSubmenu:function(e,t){t||(t=this._history[0].config),e.canGoBack(!0),this._show(t,e)},_show:function(e,t){var n={config:e,renderer:t};return this._history?this._history.push(n):this._history=[n],this._menu.show(n.config,n.renderer),i.nd.stats.pauseStats(),i(this).trigger("onshow"),this},back:function(){if(!this._history||this._history.length<=1)return this;this._history.pop();var e=this._history.pop();return this._show(e.config,e.renderer),this},hide:function(){if(this._visible)return c||a.U.send(new s.zT({action:"close"})),c=!1,i(this).trigger("onhide"),this._menu.hide(),this.reset(),this._visible=!1,r.busy.reset(),r.modal.reset(),i.nd.stats.resumeStats(),this},onHide:functionunction(e){i(this).one("onshow",e)},visible:fun.empty(),delete this._history,this},menu:function(){return this._menu},renderer:function(){}},i.extend(l.prototype,u.prototype,{_renderer:null,renderer:function(){if(!this._renderer){var e=i.nd.ui.menu.items.controllers.get("bookmarks");e&&(this.controller=new e(this),this.controller.available()&&(this._renderer=new o.Z.custom(this.controller,"v7.Client.Dialogs.Menu.Bookmarks")))}return this._renderer},showMenu:function(e){this.show(e),this.controller&&this.controller.show(e.profileId)}}),i.extend(d.prototype,u.prototype,{_defaultConfig:{},_renderer:null,itemsControllerParams:function(e){return e&&e.length&&(this._itemsControllerParams=e),this},itemsControllerCTOR:function(e){return 0==arguments.length?this._itemsControllerCTOR:(i.isFunction(e)&&(this._itemsControllerCTOR=e),this)},initItem:function(){if(this._itemsControllerCTOR){var e=(t=this._itemsControllerCTOR,n=this._itemsControllerParams,i=[null].concat(n),new(t.bind.apply(t,i)));e.available()&&(this.item=e.item())}var t,n,i;return this},renderer:function(){return!this._renderer&&this.item&&(this._renderer=new o.Z.list(this).title(""),this._renderer.render=function(){}),this._renderer},show:function(e){if(this.item||this.initItem(),!this._visible&&this.item)return r.busy.set(),r.modal.set(),this._show(e,this.renderer(e)),this.item.controller().activate(this.item),i(this).trigger("onshow"),this},_show:function(e,t){return this._history||(this._history=[]),this._history.push({config:e,renderer:t}),t.canGoBack(this._history.length>2),this._menu.show(e,t),this._visible=!0,i.nd.stats.pauseStats(),this},toggleVisibleFlag:function(e){this._visible=e},showSubmenu:function(e,t){t||(t=this._history[0].config),this._show(t,e)},dispose:function(){this._menu.dispose(),delete this._menu,delete this._config,this.item&&delete this.item}}),i.nd.ui.menu.controllers={base:u,bookmarks:new l,singleItem:d},t.Z=i.nd.ui.menu.controllers},83062:function(e,t,n){"use strict";var i=n(20384),r=(n(44853),n(34336),n(24458)),o=function(){var e={register:function(t,n){for(var i=t.split("."),r=e,o=0;o<i.length-1;++o){var a=i[o];r=a in r?r[a]:r[a]={}}r[i[i.length-1]]=n},have:function(t){for(var n=t.split("."),i=e,r=0;r<n.length;++r){var o=n[r];if(!(o in i))return!1;i=i[o]}return!0},get:function(t){for(var n=t.split("."),i=e,r=0;r<n.length;++r){var o=n[r];if(!(o in i))return null;i=i[o]}return i}};return e}();function a(e){this._parent=e}function s(){a.apply(this,arguments)}function u(){a.apply(this,arguments)}function c(){a.apply(this,arguments)}fnction d(){a.apply(this,arguments)}a.prototype={_parent:null,_item:null,item:function(){return this._item||(this._item=new i.nd.ui.menu.items.item(this).bind(this.activate.bind(this))),this._item},available:function(){return!1},enabled:function(){return!1},activate:function(e){}},o.register("base",a),i.extend(s.prototype,a.prototype,{}),o.register("language",s),i.extend(u.prototype,a.prototype,{}),o.register("feedback",u),i.extend(c.prototype,a.prototype,{}),o.register("about",c),i.extend(l.prototype,a.prototype,{}),o.register("help",l),i.extend(d.prototype,a.prototype,{item:function(){return this._item||(this._item=new i.nd.ui.menu.items.item(this,i.nd.res.val("Menu.Account.EmailAlerts")).bind(this.activate.bind(this))),this._item},available:function(){return!0},enabled:function(){return!0},activate:function(){this._parent.hide(),i.nd.navHistory.goView(r.n3.EmailAlerts,{},!0)}}),o.register("emailAlerts",d),t.Z=i.nd.ui.menu.items.controllers=o},44853:function(e,t,n){"use strict";var i=n(20384),r=n(60231),o=n(74036);n(40180),o.ZP.items=function(){var e={types:{generic:0,language:1,translate:2,checkbox:3,radio:4,issueDate:5,custom:6}},t="default",n="waiting";function o(e,t,n){this._controller=e,this._title=t,this._css=n,this.enabled=r.computed(this._enabled,this).extend({async:!0})}function a(e){e&&(o.apply(this,[e.controller,e.title]),this.state=r.observable(t),this.settinfunction(){return this.state()===n}),this),this.cssClass=r.pureComputed((function(){return this.settings&&this.settings.css?this.settings.css[this.state()]||this.settings.css[t]:this._css}),this)),this._template="default_spinner"}function s(){o.apply(this,arguments),this._type=e.language,this._template="language"}function u(){o.apply(this,arguments),this._type=e.translate,this._template="translate"}function c(){o.apply(this,arguments),this._type=e.issueDate,this._template="issueDate"}function l(){o.apply(this,arguments),this._type=e.types.checkbox,this._template="checkbox"}function d(){o.apply(this,arguments),this._type=e.types.radio,this._template="radio"}function h(t,n,i){o.call(this,t,n),this._type=e.types.custom,this._jsTemplate=i}function p(){o.apply(this,arguments),this._type=e.translate,this._template="togglePervasive",this._subtitle=null}function f(){o.apply(this,arguments),this._type=e.translate,this._template="toggleFacelift",this._faceliftEnabled=!1,this._subtitle=null}function m(){o.apply(this,arguments),this._type=e.translate,this._template="toggleFestive",this._festiveEnabled=!1,this._subtitle=null}function g(){o.apply(this,arguments),this._type=e.translate,this._template="toggleHotspot",this._hotspotEnabled=!1,this._subtitle=null}return o.prototype={_name:null,_css:null,_type:e.types.generic,_controller:null,_template:"default",_title:null,_meta:null,_click:null,name:function(e){return arguments.length?(this._name=e,this):this._name},css:function(e){return arguments.length?(this._css=e,this):this._css},bind:function(e){return this._click||(this._click=i.Callbacks()),this._click.add(e),this},type:tle:function(e){return this._title},meta:function(){return this._meta},controller:function(){return this._controller},_enabled:function(){return this._controller?Promise.all([this._controller.available()n(e){var t=e[0],n=e[1];return t&&n})):Promise.resolve(!1)},activated:function(){var e=this._controller;return e&&e.activated()||!1},onClick:function(){if(this.controller&&this._clicn((function(t){t&&e._click.fire(e)}))}},template:function(e){return arguments.length?(this._template=e,this):this._template}},e.item=o,i.extend(a.prototype,o.prototype,{onClick:function(e){var i=e.settings&&e.settings.activate;i&&(e.state(n),Promise.resolve(i()).then((function(){e.state("selected")})).catch((function(){e.state(t)})))}}),e.ItemWithSpinner=a,i.extend(s.prototype,o.prototype,{enableLanguage:null,language:null}),e.language=s,i.extend(u.prototype,o.prototype,{}),e.translate=u,i.extend(c.prototype,o.prototype,{}),e.issueDate=c,i.extend(l.prototype,o.prototype,{checked:null}),e.checkbox=l,i.extend(d.prototype,o.prototype,{checked:null}),e.radio=d,i.extend(h.prototype,o.prototype,{_jsTemplate:null,jsTemplate:function(){return this._jsTemplate}}),e.custom=h,i.extend(p.prototype,o.prototype,{setSubtitle:function(e){this._subtitle=e},subtitle:function(){return this._subtitle}}),e.togglePervasive=p,i.extend(f.prototype,o.prototype,{setSubtitle:function(e){this._subtitle=e},subtitle:function(){return this._subtitle},setFaceliftEnabled:function(e){this._faceliftEnabled=e},faceliftEnabled:function(){return this._faceliftEnabled}}),e.toggleFacelift=f,i.extend(m.prototype,o.prototype,{setSubtitle:function(e){this._subtitle=e},subtitle:function(){return this._subtitle},setFestiveEnabled:function(e){this._festiveEnabled=e},festiveEnabled:function(){return this._festiveEnabled}}),e.toggleFestive=m,i.extend(g.prototype,o.prototype,{setSubtitle:function(e){this._subtitle=e},subtitle:function(){return this._subtitle},setHotspotEnabled:function(e){this._hotspotEnabled=e},hotspotEnabled:function(){return this._hotspotEnabled}}),e.toggleHotspot=g,e}(),t.Z=o.ZP.items},74036:function(e,t,n){"use strict";var i=n(20384),r=n(54215),o=n(84438),a=n(40605),s=n(55193),u=n(21900),c=(n(89512),nr e=0;e<t.length;++e)t[e].resize()}return a.ZP.resize(n),e.add=function(e){t.push(e)},e.remove=function(e){for(var n=0;n<t.length;++n)if(t[n]=ar e=0;e<t.length;++e)t[e]._hide()},e.resize=n,e}();function d(e){this._controller=e}d.prototype={_controller:null,_tintPanel:null,_menuPanel:null,_shieldPanel:null,_config:null,_position:null,_elm:null,empty:function(){return delete this._config,this},show:function(e,t){l.add(this),this._config=e,e.context&&this._showTintPanel(e.context);var n=this._getShieldPanel();n.parent().bind("contextmenu",!1),n.show(),this._showMenuPanel(e,t)},hide:function(){l.remove(this),this._hideMenuPanel();var e=this._getShieldPanel();e.parent().unbind("contextmenu",!1),e.hide(),this._hideTintPanel(),c.Z.isPageVerticallyScrollable()||window.scrollTo(0,0)},_hide:function(){this._controller.hide()},dispose:function(){this._elm&&s.ZP.unbind(this._elm),this.empty(),this._menuPanel&&this._menuPanel.remove(),this._tintPanel&&this._tintPanel.remove(),delete this._controller,delete this._menuPanel,delete this._tintPanel,delete this._config},_showTintPanel:function(e){var t=e.left,n=e.width,r=i.windowWidth();t<0&&(n+=t,t=0),t+n>r&&(n=r-t),this._getTintPanel().css({left:t+"px",top:e.top+"px",width:n+"px",height:e.htion(){this._getTintPanel().hide()},_getTintPanel:function(){if(!this._tintPanel){var e=this._config.parentSelector?i(this._config.parentSelector):i(document.body);this._tintPanel=e.createChild("div").css("z-index",(0,u.jk)()).addClass("dialog-tint").hide()}return this._tintPanel},_showMenuPanel:function(e,t){this._elm=this._getMenuPanel().show(),t.render(this._elm),this._elm=this._elm.children().css("opacity",0).bind("touchstart mousedown PointerDown MSPointerDown",(function(e){(e=e.originalEvent||e).stopPropagation&&e.stopPropagation(),e.cancelBubble=!0})),this._adjust(this._elm,e),this._elm.css({transitionProperty:"opacity",transitionTimingFunction:"ease-out",transitionDuration:"300ms",opacity:1})},_hideMenuPanel:function(){this._getMenuPanel().css({transitionProperty:"",transitionTimingFunction:"",transitionDuration:""}).hide().empty()},_getShieldPanel:function(){if(!this._shieldPanel){var e=this._config.parentSelector?i(this._config.parentSelector):i(document.body);this._shieldPanel=e.createChild("div").addClass("dialog-tint").hide().css({position:"fixed",top:0,left:0,"z-index":(0,u.jk)()})}return this._shieldPanel.width("100%").height("100%"),this._shieldPanel},_getMenuPanel:function(){if(!this._menuPanel){var e=this._config.parentSelector?i(this._config.parentSelector):i(document.body),t=this;this._menuPanel=e.createChild("div").hide().css({position:"fixed",top:0,left:0,overflow:"hidden","z-index":(0,u.Zm)()}),s.ZP.enableTouchScroll(this._menuPtarget==t._menuPanel[0]&&t._hide()}))}return this._menuPanel.width("100%").height("100%"),this._menuPanel},position:function(){return this._position},resize:function(){if(this._config){this._getShieldPanel();var e=this._getMenuPanel().children();e.height("auto").resize(),this._adjust(e,this._config)}},_adjust:function(e,t){var n=e.find(".pop-body"),o=i.windowHeight(),a=i.windowWidth(),s=r.x.Center,u=r.x.Center,c=0,l=0;n.height("auto"),e.height("auto");var d=e.outerHeight()||0,h=e.outerWidth()||0,p=20;if(t.position){if(t.position.align){var f=t.position.align;void 0!==f.x&&(s=(i.isFunction(f.x)?f.x():f.x)||0),void 0!==f.y&&(u=(i.isFunction(f.y)?f.y():f.y)||0)}var m=t.position.y;void 0!==m&&(l=(i.isFunction(m)?m():m)||0);var g=t.position.x;void 0!==g&&(c=(i.isFunction(g)?g():g)||0)}if(u===r.x.Top||u===r.x.ScreenTop||(u===r.x.Center?o-(l=l-d/2-p)<d&&(l=o-d-p):u===r.x.Bottom?l-=d:u===r.x.ScreenCenter?l=o/2-d/2:u===r.x.ScreenBottom&&(l=o-d)),l<p&&(l=p),s===r.x.Left||s===r.x.ScreenLeft||(s===r.x.Center?c-=h/2:s===r.x.Right?c-=h:s===r.x.ScreenCenter?c=a/2-h/2:s===r.x.ScreenRight&&(c-=h)),c<p?c=p:c+h+p>a&&(c=a-h-p),o-d-l-p<=0){var v=e.find(".toolbar"),y=o-l-p;y>d&&(y=d);var _=y-(v.length?v.outerHeight():0);n.height(_+"px"),e.height(y+"px")}this._position={left:c,top:l,right:c+h,bottom:l+d},e.css({top:l+"px",left:c+"px"})},elm:function(){return this._elm}};var h={view:d,align:r.x,manager:l};t.ZP=o.Z.menu=h},79375:function(e,t,n){"use strict";var i=n(20384),r=n(40180),o=n(60658),a=n(62980),s={generic:0,custom:1};function u(e,t){e&&(this._title=e),t&&(this._className=t)}function c(e,t){u.call(this,t),this._type=s.custom,this._jsTemplate=e}function l(e){e&&(this._jsTemplate=e,this._type=1)}function d(e){e||(e=window.event);var t=this;return e.which===a.D.esc&&t._controller._canHandleKeyUp&&(t.canGoBack()?(t._controller.back(),t._controller._parent&&(t._controller._parent._canHandleKeyUp=!0)):t.hide()),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1}function h(e){var t=e,n=t._controller,r=n._parent;if(t._keyUpHUandler=d.bind(t),!n.onShow||!n.onHide)return n._canHandleKeyUp=!0,void i(document).one("keyup",t._keyUpHUandler);n.onShow((function(){n._canHandleKeyUp=!0,i(document).on("keyup",t._keyUpHUandler),r&&delete r._canHandleKeyUp})),n.onHide((function(){delete n._canHandleKeyUp,i(document).off("keyup",t._keyUpHUandler),r&&(r._canHandleKeyUp=!0)}))}function p(e,t){this._controller=e,h(this),t&&(this._template=t)}function f(e,t){this._controller=e,t&&(this._template=t)}u.prototype={_type:s.generic,_items:null,_title:null,_footerText:null,_scrollable:!1,_defaultClassName:"list",_template:"default",_date:null,typitems.push(e):this._items=[e],this},title:funct._className:this._defaultClassName},footerText:function(e){return arguments.length?(this._footerText=e,this):this._footerText},items:function(e){return arguments.length?(this._items=e,this._scrollable=!0,this):this._items},data:function(e){return arguments.length?(this._date=e,this):this._date},scrollable:function(e){return arguments.length?(this._scrollable=e,this):this._scrollable},template:function(e){if(!arguments.length){var t=this._template;return this._scrollable&&(t+="_scrollable"),t+"_group"}return this._template=e,this},itemTemplate:function(e){return e.template()}},i.extend(c.prototype,u.prototype,{_jsTemplate:null,jsTemplate:function(){return this._jsTemplate}}),l.prototype={_type:0,_title:null,_backTitle:"Back",_template:"default",_jsTemplate:null,type:function(){return this._type},title:function(e){return arguments.length?(this._title=e,this):this._title},backTitle:function(e){return arguments.length?(this._backTitle=e,this):this._backTitle},template:function(e){return arguments.length?(this._template=e,this):this._template+"_title"},jsTemplate:function(){return this._jsTemplate}},p.groups={},p.groups.types=s,p.prototype={_controller:null,_title:null,_template:"v7.Client.Menu.List",_defaultGroup:null,_groups:null,_canGoBack:!1,_canBeDone:!1,_headerEnable:!0,addGroup:function(e,t){var n=new u(e,t);return this._groups?this._groups.push(n):this._groups=[n],n},addGroupIfnotExist:function(e,t){var n;return this._groups?(n=r.find(this._groups,(function(t){return!t._title&&!e||!!t._title&&t._title===e})))||(n=new u(e,t),this._groups.push(n)):(n=new u(e,t),this._groups=[n]),this._defaultGroup||e||(this._defaultGroup=n),n},addCustomGroup:function(e,t){var n=new c(e,t);return this._groups?this._groups.push(n):this._groups=[n],n},addItem:function(e,t){return t?this.addGroupIfnotExist(t).add(e):(this._defaultGroup||(this._defaultGroup=this.addGroup()),this._defaultGroup.add(e)),this},title:function(e){return arguments.length?("string"==typeof e?this._title?this._title.title(e):this._title=(new l).title(e):"object"==typeof e&&(thistle},width:function(e){return this},groups:function(){return this._groups},back:function(){this._controller.back()},done:functller.hide&&this._controller.hide()},render:function(e){i.nd.templates.renderTo(this._template,this,e),o.Z.toolbarSetup(e)},canGoBack:function(e){return arguments.length?(this._canGoBack=e,this):this._canGoBack},canBeDone:function(e){return arguments.length?(this._canBeDone=e,this):this._canBeDone},headerEnable:function(e){return arguments.length?(this._headerEnable=e,this):this._headerEnable},template:function(e){return e.template()},jsTemplates:function(){var e=(new Date).getTime(),t={},n={},r=0;function o(i){var o=i.jsTemplate(),a=t[o];a||(t[o]=a=e+"_"+r++),i.template(a),n[i.template()]=o}1==this._title.type()&&o(this._title);for(var a=this._groups||[],u=0;u<a.length;++u){var c=a[u];c.type()==s.custom&&o(c);var l=c.items();if(l)for(var d=0;d<l.length;++d){var h=l[d];h.type()==i.nd.ui.menu.items.types.custom&&o(h)}}return n}},f.prototype={_controller:null,hide:function(){this._controller.hide()},render:function(e){i.nd.templates.renderTo(this._template,this,e)},model:function(){return this._controller.model()}},i.nd||(i.nd={}),i.nd.ui||(i.nd.ui={}),i.nd.ui.menu||(i.nd.ui.menu={}),i.nd.ui.menu.renderers={list:p,title:l,custom:f},t.Z=i.nd.ui.menu.renderers},94267:function(e,t,n){"use strict";var i=n(20384),r=(n(40180),n(84672)),o=n(17447),a=n(99806),s=n(40605),u=n(34336),c=null,l=null,d=!1,h=null,p=null;function f(){(p=i(".dialog-tint:visible")).hide(),l||(l=i(document.body).createChild("div").addClass("dialog-tint").css({"z-index":1007})),c||(c=i(document.body).createChild("div").addClass("alert-wrapper").css({position:"fixed",top:0,left:0,"z-index":1007,visibility:"hidden"}),s.ZP.resize(m),u.Z.oneNavigate(v)),a.z.renderTo("v7.Client.WaitingPopup",null,c),ko.applyBindings(null,c[0]);var e=c.children().css({opacity:0,margin:0});d=!0,g(),e.css({transitionProperty:"opacity",transitionTimingFunction:"ease-out",transitionDuration:"300ms",opacity:1,vlearTimeout(h),h=setTimeout(g,200)}function g(){if(c&&d){var e=0,t=0,n=0,r=0,o=0i(this).addClass("alert-textleft")})),c.find(".alert-label").length>0&&(c.find(".alert-label").show(),c.addClass("alert-labeled")),c.find("header:visible").each((function(){n=i(this).outerHeight(!0)})nction(){r=i(this).outerHeight(!0)}));var l=i.windowWidth(),h=i.windowHeight();c.find(".alert-body").each((function(){i(this).css("height","auto"),o=i(this).outerHeight(),e=i(this).parent(".alert").height(),t=i(this).parent(".alert").outerHeight()-e,i(this).parent(".alert").outerHeight()>h?e=h-t:i(this).parent(".alert").css("height","auto"),a=e-n-r,i(this).height(a),a<o?i(this).parent(".alert").addClass("alert-scaled"):i(this).parent(".alert").removeClass("alert-scaled")})),function(e,t){var n=c.children();n.css({left:e-n.width()>>1,top:t-n.height()>>1})}(l,h),c.find("[nd-scrollable]").each((function(){var e=$data("scroller");e&&i.isFunction(e.refresh)&&e.refresh()}))}}function v(){d&&(r.modal.reset(),l.remove(),l=null,c.remove(),c=null,d=!1,p.show())}t.Z={show:function(){return Promise.all([o.ZP.loaded(),a.z.loaded()]).then(f)},hide:v}},33941:function(e,t,n){"use strict";var i=n(20384),r=(n(84438),!0);i.nd.ui.slider=function(e,t){this.sliderId=e,this._dataSource=t},i.nd.ui.slider.prototype={sliderId:0,left:0,width:0,wrapperWidth:0,enableBordersStateChangeNotifications:!1,beforeRender:i.nd.delegate(),afterRender:i.nd.delegate(),dragstart:i.nd.delegate(),dragging:i.nd.delegate(),dragged:i.nd.delegate(),itemClick:i.nd.delegate(),showing:i.nd.delegate(),hiding:i.nd.delegate(),hided:i.nd.delegate(),animationStarting:i.nd.delegate(),animationFinished:i.nd.delegate(),animationCanceled:i.nd.delegate(),selectedItemChanging:i.nd.delegate(),selectedItemChanged:i.nd.delegate(),bordersStateChanged:i.nd.delegate(),getDataSource:function(){return this._dataSource},normLeft:function(e){return e/(this.width-this.wrapperWidth)},denormLeft:function(e){return e*(this.width-this.wrapperWidth)},getNormedLeft:function(){return this.noreturn this.left-this.denormLeft(e)},getRightMargin:function(){return this.width-this.getLeftMarginMargin:function this.setLeft(this.denormLeft(e))},setLeft:function(e){return this.left=parseInt(e,10),this.rendSeletion(){ret(){return!this.elm().is(":hidden")},render_ensureRendered:function(){},render_applyPosition:function(){},render_adjustPosition:function(){},render_playAnimation:function(){},render_cancelAnimation:function(){},render_updateSelectedItem:function(){},render_navigateToItem:function(e,t){},render_navigateToElms:function(e,t){},render_showNextPage:function(){},render_showPrevPage:function(){}};var o=i.nd.ui.BordersStates={Default:0,BehindLeftBorder:1,BehindRightBorder:2,IntersectsLeftBorder:3,Intersecion(e){for(var t in e)this[t]=e[t]},i.nd.ui.sliderItem.prototype=stroy:function(){i.data(this,null)}},i.nd.extendObjectWithPropertiesExt({obj:i.nd.ui.sliderItem.prototype,names:"isSelected",enableGet:!0,enableSet:!0,enableChangedEventollection=function(){this.items=[]},i.nd.ui.sliderItemsCollection.prototype={items:null,_sliderItem_finder:function(e){return e.isSelected()},_sliderItem_isSelectedChanged:function(){var e=this,t=e.__coll;t._selecting||e.isSelected()&&t.selectedItem(e)},add:function(e){return void 0===e.isSelected&&(e=new i.nd.ui.sliderItem(e)),e.idx=this.items.length,e.__coll=this,e.isSelectedChanged(this._sliderItem_isSelectedChanged),this.items.push(e),this},selectedItem:function(e){if(0===arguments.length)return this.find(this._sliderItem_finder);this._selecting=!0;var t=this.find(this._sliderItem_finder,e);return t&&t.isSelected(!1),e&&e.isSelected(!0),this.fireSelectedItemChanged({value:e,oldValue:t}),this._selecting=!1,this},get:function(e){return this.items[parseInt(e,10)]},getLength:function(){return this.items.length},findById:function(e){return this.find((functio((funh:function(e){i.each(this.items,e)},find:function(e,t){var n;return i.each(this.items,(function(i,r){if(e(r)&&r!==t)return n=r,!1})),n},destroy:function(){i.each(this.items,(function(e,t){t.destroy()})),i.data(this,null)}},i.nd.extendObjectWithEvents(i.nd.ui.sliderItemsCollection.prototype,"selectedItemChanged"),i.nd.ui.sliderDataSource=function(e,t){this.items=t,this.renderFunction=e},i.nd.ui.sliderDataSource.prototype={setSliderItems:function(e){this.items=e},getSliderItems:function(){Function&&this.renderFunction(e,t)}},i.nd.ui.sliderSimpleImp=function(e,t){var n=this,a=e.sliderId,s=e.getDataSource(),u=t.sliderSelector,c=(i(u),i(t.innerLayerSelector)),l=i(t.outerLayerSelector),d=t.itemElementName,h=i(t.prevButtonSelector),p=i(t.nextButtonSelector);if(i.support.transform){var f=c.css("top");c.css("top",0),c.translateTop(f)}c.optimizeForTransform();var m,g=/^(inline)(.*)/.test(c.css("display")),v=i.nd.easing.nd1,y=i.nd.easing.nd1_reverse,_=!1,b=!1,w=!1,C=[];function I(e){return i("#"+a+"_"+e.id)}function P(t){if(t=t||200,e.left>0)e.width>e.wrapperWidth&&A({dx:-e.left,easing:y,duration:t},!0);else{var n=e.width-(e.wrapperWidth-e.left);n<0&&A({dx:0-n,easing:y,duration:t},!0)}k()}function x(t){if(t>0)e.width>e.wrapperWidth&&(t=0);else{var n=e.width-(e.wrapperWidth-t);n<0&&(t-=n)}e.left=t,e.render_applyPosition()}function S(){if(e.enableBordersStateChangeNotifications){var t=e.items.selectedItem();if(t){var n=C[t.idx];if(n){var i=-1*e.left,r=i+e.wrapperWidth;return void(i>n.right?T(o.BehindLeftBorder):r<n.left?T(o.BehindRightBorder):i>n.left?T(o.IntersectsLeftBorder):r<n.right?T(o.IntersectsRightBorder):T(o.Default))}}T(o.Default)}}function T(t,n){var i=m;t!=i&&(m=t,e.bordersStateChanged(t,i))}function k(){h.removeClass("is-disabled"),p.removeClass("is-disabled"),e.left>=0&&h.addClass("is-disabled"),e.left-e.wrapperWidth<=-e.width&&p.addClass("is-disabled")}function A(t,n){if(!_){E(!1);var o=t.dx;if(0!=o){n&&e.animationStarting(i.extend({},t));var a={local:n,def:t};o=parseInt(o,10),t.finalLeft=e.left+o,b=!0,Math.abs(o)>5&&c.optimizeForTransform(),c.animate({translateLeft:"+="+o+"px",leaveTransforms:r},t.duration,t.easing,(function(){a.finished||(a.finished=!0,e.render_adjustPosition(),b&&e.left!=t.finalLeft&&(c.css("translateLeft",t.finalLeft),e.render_adjustPosition()),b=!1,setTimeout((function(){!function(t){e.left=c.css("translateLeft"),e.animationFinished(),t.local&&P(t.def.returnTime),S()}(a)}),1))}))}}}function E(t){b&&(b=!1,c.stop(!0,!1,r),e.render_adjustPosition(),t&&e.animationCanceled())}c.delegate(d,"click touchend",(function(){w?w=!1:i.nd.drag.hasBeenInDrag()||e.itemClick(e.items.get(this.getAttribute("item-idx")))})),n.onContainerResized=function(){var t=e.isVisible();if(t||e.elm().show(),e.wrapperWidth=l.width(),e.wrapperWidth>e.width){_=!0;var n=(e.wrapperWidth-e.width)/2;c.translateLeft(n+"px"),h.hide(),p.hide()}else _&&(_=!1,c.translateLeft(this.left+"px")),h.show(),p.show();k(),t||e.elm().hide()},n.renderAsync=function(){e.isVisible()?n.render():(n._pendingRendion(){n._pendingRender&&n.render()},n.render=function(){n._pendingRender=!1,e.items=e.segmets=s.getSliderItems(),e.setLeft(0),e.beforeRender();var t=e.isVisible();t||e.elm().show();var r=[];e.items.each((function(e,t){var n=a+"_"+t.id;r.push("<"+d+' id="'+n+'" item-id="'+t.id+'" item-idx="'+t.idx+'"></'+d+">")})),g&&c.width("auto"),c.fastHtml(r.join(""));var o=0;C=[],c.find(d).each((function(t,n){var r=i(n),a=e.items.get(n.getAttribute("item-idx"));s.renderSliderItem(a,r);var u=r.position().left,c=r.outerWidth(!0);C[a.idx]={left:u,right:u+c,item:a},o+=c})),e.width=g?c.width():o,n.onContainerResized(),e.render_updateSelectedItem(e.items.selectedItem(),null),t||e.elm().hide(),e.afterRender(),S()},e.render_navigateToItem=function(t,n){return function(t,n){E(!1);var i=I(t);if(i.length>0){var r,o=i.position().left,a=i.width(),s=o+a,u=e.wrapperWidth,c=-e.left,l=c+u,d=u/10;if(o>c&&s<l)return;if(a<u){var h=o-Math.floor(c+a/10),p=o-Math.floor(l-a/10-a);r=Math.abs(h)<Math.abs(p)?c+h:c+p}else r=o-u/10;if(r<0?r=0:r+u>e.width&&(r=e.width-u),c<r-d||c>r-d){if(n)return void x(-r);A({dx:c-r,easing:v,duration:1e3},!0)}}}(t,n),this},e.render_navigateToElms=function(t,n){return function(t,n){var r=0,o=0,a=e.isVisible();a||e.elm().show(),t.each((function(e,t){var n=i(t),a=i.relativeOffsetLeft(t,c),s=a+n.width();(0===r||a<r)&&(r=a),(0===o||s>o)&&(o=s)})),a||e.elm().hide();var s=o-r;if(!(s<=0)){E(!1);var u=e.wrapperWidth,l=-e.left,d=l+u,h=u/10;if(!(r>l&&o<d)){var p;if(s<u){var f=r-Math.floor(l+s/10),m=r-Math.floor(d-s/10-s);p=Math.abs(f)<Math.abs(m)?l+f:l+m}else p=r-u/10;if(p<0?p=0:p+u>e.width&&(p=e.width-u),l<p-h||l>p-h){if(!0===n)return void x(-p);A({dx:l-p,easing:v,duration:1e3},!0)}}}}n(){return n.ensureRendered(),this},e.render_adjustPosition=function(){return this.left=c.css("translateLeft"),k(),this},e.render_applyPosition=function(){return _||(c.css("translateLeft",this.left+"px"),S()),this},e.render_playAnimation=function(e){return A(e,!1),this},e.render_cancelAnimation=function(){return E(!1),this},e.render_updateSelectedItem=function(e,t){return t&&I(t).removeClass("sel"),e&&I(e).addClass("sel"),S(),this},e.render_showNextPage=function(){return E(!1),e.left-e.wrapperWidth>-e.width&&A({dx:-Math.min(e.wrapperWidth,e.width+e.left-e.wrapperWidth),easing:v,duration:1e3},!0),this},e.render_showPrevPage=function(){return E(!0),e.left<0&&A({dx:Math.min(e.wrapperWidth,-e.left),easing:v,duration:1e3},!0),this};var Z={autoDrag:!0,disableY:!0,enableStat:!0,beforeDragStart:function(t,n,i){i.bounce=!0,i.minScrollX=0,i.maxScrollX=-(e.width-e.wrapperWidth),b&&(w=!0),E(!0),e.dragstart(),c.optimizeForTransform()},dragGo:function(t,n,i){if(_)i.adjustDelta(0,0);else{var r=parseInt(i.newX,10),o=r-e.left;0!=o&&(e.dragging(o,0),e.left=r,e.dragged(o,0),S())}},dragStop:function(t,n,i){var r=parseInt(i.newX,10),o=r-e.left;if(0!=o&&(e.dragging(o,0),e.left=r,e.dragged(o,0),S()),i.dX2&&i.dTime2<300){var a,s,u=e.wrapperWidth;i.dX2>0?a=-e.left:(s=e.width+e.left-u)<0&&(s=0);var c=i.momentum(i.dX2,i.dTime2,a,s,u);if(0!=c.dist){var l=e.left+c.dist;if((e.left>i.minScrollX&&l>i.minScrollX||e.left<i.maxScrollX&&l<i.maxScrollX)&&(c.dist=0),c.dist)return void A({dx:c.dist,easing:v,duration:c.time,returnTime:c.returnTime},!0)}}return P()},threshold:2,useTransforms:!0};c.turnOnDrag(Z)},i.nd.ui.sliderSimpleImp.prototype={render:function(){},onContainerResized:function(){}},i.nd.ui.sliderSimpleController=function(e,t){var n,o=this;o.userSelectItem=i.nd.delegate();var a=!0;function s(){return e.render_adjustPosition(),t.isVisible(),c(!1)}function u(){return c(!0)}function c(n){return n&&a||(a=3>Math.abs(e.getNon(),t.render_cancelAnimation(),s()}e.dragstart(l).dragging(u).dragged((function(n,i){if(t.impl_ensureVisible(),a)t.setNormedLeft(this.getNormedLeft());else{var r=0;n<0?0!=e.getRightMargin()&&(r=t.getRightMargin()/e.getRightMargin()):0!=e.getLeftMargin()&&(r=t.getLeftMargin()/e.getLeftMargin()),t.setLeft(t.left+n*Math.abs(r))}})),t.dragstart(l).dragging(u).dragged((function(n,i){if(a)e.setNormedLeft(this.getNormedLeft());else{var r=0;n<0?0!=t.getRightMargin()&&(r=e.getRightMargin()/t.getRightMargin()):0!=t.getLeftMargin()&&(r=e.getLeftMargin()/t.getLeftMargin()),e.setLeft(e.left+n*Math.abs(r))}})),e.animationStarting((function(n){if(t.isVisible()){var i=n.dx,r=t.denormLeft(e.normLeft(i));if(t.render_adjustPosition(),s())n.dx=r,t.render_playAnimation(n);else{var o=e.left+i,a=t.denormLeft(e.normLeft(o)),u=(t.left,0);i<0?(0!=e.getRightMargin()&&(u=t.getRightMargin()/e.getRightMargin()),n.dx=i*Math.abs(u),a>t.left+n.dx&&(n.dx=a-t.left)):(0!=e.getLeftMargin()&&(u=t.getLeftMargin()/e.getLeftMargin()),n.dx=i*Math.abs(u),a<t.left+n.dx&&(n.dx=a-t.left)),0!=n.dx&&t.render_playAnimation(n)}}})).animationCanceled((function(){t.render_cancelAnimation(),s()})).animationFinished(s),t.animationStarting((function(n){if(!d){var i=n.dx,r=e.denormLeft(t.normLeft(i));if(e.render_adjustPosition(),s())n.dx=r,e.render_playAnimation(n);else{var o=t.left+i,a=e.denormLeft(t.normLeft(o)),u=(e.left,0);i<0?(0!=t.getRightMargin()&&(u=e.getRightMargin()/t.getRightMargin()),n.dx=i*Math.abs(u),a>e.left+n.dx&&(n.dx=a-e.left)):(0!=t.getLeftMargin()&&(u=e.getLeftMargin()/t.getLeftMargin()),n.dx=i*Math.abs(u),a<e.left+n.dx&&(n.dx=a-e.left)),0!=n.dx&&e.render_playAn(){s(),e.render_cancelAnimation()})).this.isVisible()&&this.impl_show()}));var d,h=t.render_navigateToElms;function p(n){if(!d){var i=n.value,r=n.oldValue;e.selectItem(i,r),t.selectItem(i,r),e.render_navigateToItem(i),t.isVisible()&&t.render_navigateToItem(i)}}t.render_navigateToElms=function(){t.isVisible()&&(d=!0,h.apply(t,arguments),d=!1)},e.itemClick((function(e){if(e.isSelected())!1===t.isVisible()?t.impl_show():t.impl_hide();else{if(o.userSelectItem({value:e}),!1===t.isVisible())return t.impl_show(),void t.render_navigateToItem(e,!0);t.render_navigateToItem(e,!1)}})),this.setItemsCollection=function(e){(n=e).selectedItemChanged(p),n.selectedItem()&&p({value:e.selisVisible()&&this.impl_show(),this},t.impl_hide=function(e){if(this.isVisible()){if(t.hiding(),e)return t.elm().hide(),void t.hided();if(this.isVisible()){var n=t.elm(),i=n.find(".pp"),o=n.height();i.stop(!0,!1,r),i.optimizeForTransform().animate({translateTop:"+="+o+"punction(){t.elm().hide(),t.hided()}))}else t.hided()}},t.impl_show=function(){var n=e.elm().position(),i=t.elm();i.show(),t.render_ensureRendered();var o=i.find(".pp"),a=i.height(),s=i.outerHeight();t._showAnimationActive=!0,i.css("top",n.top-s+"px").show(),t.showing(),o.stop(!0,!1,r),o.optimizeForTransform().css("translateTop",a+"px").animate({translateTop:"-="+a+"px",leaveTransforms:r},300,"linear",(function(){t._showAnimationActive=!1}))},i(document).bind("mousedown touchstart mspointerdown",(function(n){if(t.isVisible()){var r=n.target;if(i(r).has("slider-ignore"))return;for(var o=e.elm()[0],a=t.elm()[0];r&&r!==document.body&&r!==document;){if(r===o||r===a)return;r=r.parentNode}t.impl_hide()}}))},i.nd.ui.sliderWithPreview=function(e){var t,n=e.sliderCfg,r=e.previewCfg,a=new i.nd.ui.sliderDataSource(n.itemRenderer),s=new i.nd.ui.sliderDataSource(r.itemRenderer),u=new i.nd.ui.slider(n.id,a),c=new i.nd.ui.sliderSimpleImp(u,n);u.enableBordersStateChangeNotifications=!0,u.bordersStateChanged((function(e,t){i(n.leftCropSelector).hide(),i(n.rightCropSelector).hide(),e==o.IntersectsLeftBorder?i(n.leftCropSelector).show():e==o.IntersectsRightBorder&&i(n.rightCropSelector).show()}));var l=new i.nd.ui.slider(r.id,s),d=new i.nd.ui.sliderSimpleImp(l,r);l.elm().hide(),function(e){var t=(parseInt(e.elm().css("zIndex"),"10")||1)-1,n=i("<div></div>").css({zIndex:t,position:"absolute",width:"100%",height:"100%"}).hide().appendTo(e.elm().parent());i.browser.msie&&n.css({opacity:0}),n.bind("mfunction(){return e.impl_hide(),!1})),e.showing((function(){n.css("height",i.windowHeight()+"px").css("bottom","0").show()})),e.hiding((functioss("height",i.windowHeight()+"px")}))}(l);var h=new i.nd.ui.sliderSimpleController(u,l);this.userSelectItem=i.nd.delegateProxy(h,h.userSelectItem),this.sliderPreview_OnShowing=i.nd.delegateProxy(l,l.showing),this.sliderPreview_OnHiding=i.nd.delegateProxy(l,l.hiding),this.sliderPreview_OnHided=i.nd.delegateProxy(l,l.hided),this.sliderPreviewVisible=function(){return l.ierResized(),d.onContainerResized()},this.showNextPage=function(){u.render_showNextPage()},this.showPrevPage=function(){u.render_showPrevPage()},this.ensureElmsVisibleInPreview=function(e,t){l.render_navigateToElms(e,t)},this.hidePreview=function(e){l.impl_hide(e)},this.setItems=function(e){return null!=t&&(t.destroy(),t=null),t=e,a.setSliderItems(e),s.setSliderItems(e),c.render(),d.renderAsync(),h.=i.nd.ui||{},i.nd.ui.utils=r,t.Z=r},8871:function(e,t,n){"use strict";n.r(t);var i=n(68602),r=n(81867),o=n(14347),a=n(88477),s=function(){function e(){var e=this;this._reset(),this._loaded=!1,this._loadingPromise=void 0,this._updates=new i.t(1),this._updatesObservable=this._updates.asObservable(),o.Z.onUserStateChanged((function(){return e.load(!0)}))}return Object.defineProperty(e.prototype,"displayName",{get:function(){return this._displayName},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nickname",{get:function(){return this._nickname},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"photo",{get:function(){return this._photo},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"photoUrl",{get:function(){return this._photo.url},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enAccountNumber",{get:function(){return this._enAccountNumber},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"avatarImageId",{get:function(){return this._avatarImageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"email",{get:function(){return this._email},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableServiceEmails",{get:function(){return this._enableServiceEmails},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enablePromotionalEmails",{get:function(){return this._enablePromotionalEmails},enumerable:!1,configurable:!0}),e.prototype.getProfileId=function(){return this._profiction(){return e.getProfileId()}))},Object.defineProperty(e.prototype,"loaded",{get:function(){return this._loaded},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updates",{get:function(){return this._updatesObservable},enumerable:!1,configurable:!0}),e.prototype._reset=function(){this._nickname="",this._photo={url:null},this._enAccountNumber="",this._profileId=null,this._avatarImageId="",this._email="",this._enableServiceEmails=!1,this._enablePromotionalEmails=!1},e.prototype.load=function(e){var t=this;if(void 0===e&&(e=!1),e&&(this._loaded=!1),this._loaded)return Promise.resolve();if(!o.Z.isLogin())return this._reset(),this._loaded=!0,this._updates.next(),Promise.resolve();var n=this._loadingPromise;return void 0===n&&(this._loadingPromise=r.default.getCurrentProfile().then((function(e){e?(t._displayName=e.displayName||e.nickname||"",t._nickname=e.nickname||"",t._photo={url:e.photoUrl||""},t._avatarImageId=e.avatarImageId||"",t._enAccountNumber=e.enAccountNumber||"",t._profileId=e.profileId,t._email=e.email,t._enableServiceEmails=e.enableServiceEmails,t._enablePromotionalEmails=e.enablePromotionalEmails):t._reset(),t._loaded=!0,t._updates.next()})).catch(a.logError),(n=this._loadingPromise).finally((function(){t._loadingPromise=void 0}))),n},e.prototype.isPrivate=function(e){var t=this;return o.Z.isLogin()?this.load().then((function(){return t._profileId&&e&&t._profileId.toUpperCase()===e.toUpperCase()}),(function(){return Promise.resolve(!1)})):Promise.resoli.nd.utils.convertToBool,t.Z=i.nd.utils},91330:function(e,t,n){"use strict";var i=n(40180),r=n(24458),o=n(11835),a=n(77004),s=n(97334),u=n(3678),c=n(4169),l=n(17447),d=n(2099),h=n(27670),p=n(14347),f=n(46046),m=(n(6677),n(20384)),g=function(){var e={},t=s.get("Translation.Auto",{enable:!1,language:"en",exceptions:null});return e.auto=t,e.current={enable:!1,language:null},e.save=function(){s.set("Translation.Auto",t)},e}(),v=function(e,t,n){this._code=e,t&&(this._name=t),this._pai()>t.title()?1:e.title()<t.title()?-1:0},v.prototype={_code:null,_name:null,_pairs:null,_rtl:!1,code:function(){return this._code},name:function(){return this._name},title:function(){return l.ZP.val("Languages."+this._code,this._name)},pairs:function(e){return e?this._pairs.slice(0).sort(v.byTitle):this._pairs},isRtl:s._pairs[t]._code===e)return!0;return!1},clone:function(){for(var e=this._pairs?this._pairs.slice(0):null,t=0;t<e.length;++t)e[t]=e[t].clone();return new v(this._code,this._name,e)}};var y=function(){var e={},t=[],n=[],i={},r=!1;function o(){t=[],n=[],i={};var e=c.Z.get("translation");for(var o in e.languages){var a=e.languages[o];a=new v(o,a.name,a.pairs.slice(0)),t.push(a),i[o]=a}for(var s={},u=0;u<t.length;++u)for(var l=t[u].pairs(),d=0;d<l.length;++d){var h=l[d];(a=i[h])||(a=i[h]=new v(h)),l[d]=a,h in s||(s[h]=a)}for(var h in s)n.push(s[h]);r=!0}return c.Z.loaded().then(o),c.Z.onConfigUpdated(o),e.language=function(e){return i[e]},e.fromLanguages=function(){return t},e.toLanguages=function(){return n},e.{var n=i[e];return!!n&&n.isValidPair(t)},e}(),_=function(){var e,t={},n=null,o=null,s=!1;function l(){g.current.language&&(g.current.language=null,s=!1,o&&o.fire())}d.Z.issueLoading(l),h.Z.activeViewChanging((function(t,n){(function(t){return e==r.n3.PagesView&&t==r.n3.TextView||e(t){return e==r.n3.Radio||t==r.n3.Radio}(n)||l(),e=n})),a.bind("online",(function(){c.Z.loaded().then((function(){p.Z.isLogin()||c.Z.get("translation").enableAutoTranslationForAnonymous||g.auto.enable&&(g.auto.function(){return a.online()&&y.ready()},v=(t.available=function(){c.Z.get("translation").enable},t.toLanguages=function(e){if(e){var t=y.language(e);return t?t.pairs():null}return y.toLanguages()},t.fromLanguages=function(){return y.fromLanguages()},t.language=function(e){return y.language(e)});function _(e){var t,n=g.auto;if(n.enable&&n.language){if((t=h.Z.getActiveViewName())==r.n3.TextView||t==r.n3.PagesView){if(n.language==e)return null;if(!y.isValidPair(e,n.language))return null;if(!n.exceptions)return n.language;for(var i=0;i<n.exceptions.length;++i)if(e==n.exceptions[i])return null}return n.language}return null}t.currentLanguage=function(){return function(){if(!f())return null;if(s)return null;var e=g.current.language;return e||_(I())}()},t.isAutoTranslated=function(){return!s&&!!_(I())},t.isTranslated=function(){return!s&&!!g.current.language};var b=t.auto={enable:function(e){return arguments.length?(g.auto.enable!=e&&(g.auto.enable=e,g.save(),e&&(g.current.language=null,s=!1),C()),b):g.auto.enable},language:function(e){return arguments.length?(g.auto.language!=e&&(g.auto.language=e,g.save(),g.auto.enable&&(g.current.language=null,s=!1,C())),b):v(g.auto.language)},exceptions:function(e){if(!arguments.length)return g.auto.exceptions;var t=g.auto.exceptions;t&&(t=t.sort().join(","));var n=e;return n&&(n=n.sort().join(",")),t!=n&&(g.auto.exceptions=e,g.save(),g.auto.enable&&C()),b}},w=t.current={language:function(e){return arguments.length?(g.current.language=e,ction I(){return d.Z.contentLanguage()}return t.bind=function(e,i){return"currentLanguageChanged"===e?(o||(o=m.Callbacks("unique")),o.add(i)):(n||(n=m.Callbacks("unique")),n.add(i)),t},t.unbind=function(e,i){if("currentLanguageChanged"===e){if(!o)return t;i?o.remove(i):o.empty()}else{if(!n)return t;arguments.length?n.remove(i):n.empty()}return t},t.enableOriginalLanguage=function(){return s=!0,w.language(null),t},t.getTranslationLanguages=function(){if(e!==r.n3.PagesView&&e!==r.n3.TextView)return u.U().then((function(e){return function(e){for(var n=[],r=[],o=0;o<e.length;++o){var a=t.language(e[o].language);if(a){var s=a.pairs(!1);n=n.concat(i.filter(s,(function(e){if(!r[e.code()])return r[e.code()]=1,e})))}}return i.sortBy(n,(function(e){return e.title()}))}(e&&e.locales||[])}));var n=t.language(d.Z.contentLanguage());if(n){var o=n.pairs(!0),a=0===o.length?[]:[n].concat(o);return Promise.resolve(a)}return Promise.resolve([])},t}();_.bind("currentLanguageChanged",m.nd.viewer.pages.loadToc),t.Z=f.Z.translation=_},53707:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=n(13395),r=n(55189),o=n(95511),a=n(97446),s=function(){function e(){this.issueIntroDisabled=!1,(0,a.S)()}return e.prototype.saveViewConfig=function(e){r.Z.update(e)},e.prototype.getViewConfig=function(){return r.Z.current},e.prototype.getLeftPanelConfig=function(){var e=i.Z.getPanelConfig(this.getViewConfig());return this.issueIntroDisabled=!!e.issueInt.registerRoutes=function(e){(0,o.On)(e)},e.prototyp){return this.show(e),Promise.resolve()},e}()},55189:function(e,t,n){"use strictunction(){function e(){this._context={}}return e.prototype.update=function(e){this._context=(0,i.assign)({},e),r.Z.global.trigger("viewUrlChanged",e)},Object.defineProperty(e.prototype,"current",{get:function(){return this._context},enumerable:!1,configurable:!0}),e}();t.Z=new o},42302:function(e,t,n){"use strict";n(42777),n(20384).nd.viewer.pagesView.blockType={title:3,link:4}},30722:function(e,t,n){"use strict";var i=n(40180),r=n(20384),o=n(42777),a=n(2099),s=(n(83409),n(74981)),u={confirm:function(e){return d&&clearTimeout(d),d=setTimeout((function(){var t;d=0,l=t=e,t?(0,i.each)(c,(function(e,t){g(a.Z.issue(),l,e.getPage().pageNumber(),t).then(f)})):(0,i.each)(c,m)}),500),this}},c={},l="",d=0;function h(){if(c[this.id.toString()]=this,l){var e=this.getPage();e&&g(a.Z.issue(),l,e.pageNumber(),this.id).then(f)}}function p(){delete c[this.id.toString()],m(this)}function f(e){!function(e,t){if(t){m(t);var n=t.getPage();if(n){for(var i=n.pageNumber(),r=document.createDocumentFragment(),o=0,a=e.rect.length;o<a;o++){var s=e.rect[o];parseInt(s.page,10)===i&&v(r,s)}var u=t.getLayersContainer();u[0].appendChild(r),u.addClass("highlight")}}}(e.json,c[e.item])}function m(e){for(var t=e.getLayersContainer()[0],n=t.firstChild;n;){var i=n.nextSibling;n.isLayoutHighlight&&t.removeChild(n),n=i}}function g(e,t,n,i){var r={issue:e,query:t,page:n},o={cancellableKey:"GetHighlightWords-".concat(e,"-").concat(n)};return s.Z.get("Highlight","GetHighlightWords",r,o).then((function(e){return{json:e,item:i}}))}function v(e,t){var n="highlight_"+r.nd.id(),i=document.createElement("div");i.id=n,i.style.position="absolute",i.style.overflow="hidden",i.style.display="block";var o="%";return i.style.left=100*t.x+o,i.style.top=100*t.y+o,i.style.width=100*t.w+o,i.style.height=100*t.h+o,i.style.zIndex=0,i.className="hi",i.isLayoutHighlight=!0,e.appendChild(i),i}o.dection(e){e.onshowed(h),e.ondettached(p)}(e)})),r.nd.viewer.pagesViewHighlighter=u,t.Z=u},80119:function(e,t,n){"use strict";n(16412),n(33027);var i=n(20384),r=i.support.transform,o=new i.nd.imageLoader(!0),a=i.nd.makeImageUrl("1x1.gif"),s=i.windowWidth()*i.windowHeight(),u=!1;function c(e,t){var n=c.cache||(c.cache={}),i=n[t];i||(i=new RegExp("[\\?&]"+t+"=([^&#]*)"),n[t]=i);var r=i.exec(e);return null==r?"":decodeURIComponent(r[1])}function l(){}function d(e){this.constructor.ndBaseCostructor(this),this._img=document.createElement("img"),this._img.style.position="absolute",this._img.style.display="none",this._img.style.left=0,this._img.style.top=0,this._active=!1,i(this._img).keepEmptyTransformForElm(!1).css("transformOrigin","0 0"),e.appendChild(this._img)}function h(e){this.constructor.ndBaseCostructor(this),this._img=document.createElement("img"),this._img.style.position="absolute",this._img.style.left=0,this._img.style.top=0,this._img2=document.createElement("img"),this._img2.style.position="absolute",this._img2.style.left=0,this._img2.style.top=0,i([this._img,this._img2]).keepEmptyTransformForElm(!1).css("transformOrigin","0 0"),this._img._owner=this,this._img2._owner=this,this._active=!0,this.reset(),e.appendChild(this._img),e.appendChild(this._img2)}function p(){}function f(e){this.constructor.ndBaseCostru(e).reset()}function m(){this._cells=[]}function g(e){this.constructor.ndBaseCostructor(this),this._parentNode=e,this._bg_render=new d(e).reset(),this._fg_render=new d(e).reset()}i.browser.iOS&&!i.support.retina&&((i.execInTryCatch((function(){return/(os )([\w.]+)/.exec(navigator.userAgent.toLowerCase())[2]}))||"0")>"4_3"||(u=!0)),l.ndExtend({_url:null,drawImage:function(e,t){var n=c(e,"retina");if(n){var i=c(e=e.replace("&retina="+n,""),"targetWidth");i&&(e=e.replace("&targetWidth="+i,"")),n={targetWidth:i}}this._url=e;var r=this;return this._job&&this._job.abort(),this._job=o.loadImage(e,(function(e){e&&r._job&&(r._url=e.src,r.drawImageImpl(e,t,n),awImag(this._job.abort(),this._job=null),this},setSize:function(){return this},setRect:function(){},isActive:function(){return!1},getUrl:function(){return this._url}}),d.ndInheritFrom(l).ndExtend({drawImageImpl:function(e,t,n){if(e){if(this._active||(this._active=!0,this._img.style.display="inline"),this._img.src=e.src,n){var i=n.targetWidth||Math.floor(e.width/2);this._setWidth(i,!1)}else this._setWidth(e.width,!1);return t?this._setPos(t.left,t.top):this._setPos(0,0),void o.reuseImage(e)}},setSize:function(e){return this._requestedWidth===e.width?this:this._setWidth(e.width,!0)},setRect:function(e){this.isActive()&&(this._setWidth(e.width,!0),this._setPos(e.left,e.top))},reset:function(){return this.__ndCallBaseByName("reset"),this._img.src=a,this._requestedWidth=0,this._active=!1,this._img.style.display="none",this._setWidth(0,!1),this},isActive:function(){return this._active},_applyTransform:function(){var e="";return(this._translateX||this._translateY)&&(e.length>0&&(e+=" "),e+=i.nd.matrix.toTranslateString(this._translateX,this._translateY,null)),this._scale&&1!==this._scale&&(e.length>0&&(e+=" "),e+=i.nd.matrix.toScaleString(this._scale||1,this._scale||1,1)),i.style(this._img,i.props.transform,e||"none"),this},_setPos:function(e,t){return 0===this._left&&0===this._top||(this._left=e,this._top=t,r?(this._translateX=e,this._translateY=t,this._applyTransform()):(this._img.style.left=e+"px",this._img.style.top=t+"px")),this},_setWidth:function(e,t){this._requestedWidth||(this._requestedWidth=e),this._width||(this._width=e),t?this._requestedWidth=e:this._width=e;var n=this._requestedWidth;return Math.abs(this._requestedWidth-this._width)<2&&(n=this._width),r&&0!==this._scale&&(this._scale=0,this._applyTransform()),this._img.width=n,this}}),h.ndInheritFrom(l).ndExtend({drawImage:function(e,t){this._url=e,this._active=!0;var n=this._img2;this._resetImage(n),n._loading=!0,n._rect=t,n.onload=this._image_onload,n.onerror=this._image_onerror,n.src=e},_image_onload:function(){this._owner._image_onload_impl(this)},_image_onerror:function(){var e=this;if(e._retryNumber<5){var t=e._owner._url;e._retryNumber++,e.src=t+"&retry="+e._retryNumber}},_image_onload_impl:function(e){e!==this._img&&(this._img2=this._img,this._img=e),this._resetImage(this._img2),e.onload=null,e.onerror=null;var t=e._rect;t?(e.style.left=t.left+"px",e.style.top=t.top+"px"):(e.style.left="0",e.style.top="0"),e.style.width="auto",e.style.height="auto",e.style.zIndex=1,this._realWidth=this._width=e.width,this._realHeight=this._height=e.height,e._visible=!0},drawImageImpl:function(e,t){},setSize:function(e){return this._width===e.width&&this._height===e.height?this:this._img._visible?this._setSize(e.width,e.height,!0):this},setRect:function(e){var t=this._img;return t._visible&&(this._setSize(e.width,e.height,!0),t.style.left=e.left+"px",t.style.top=e.top+"px"),this},reset:function(){return this._active&&(this.__ndCallBaseByName("reset"),this._resetImage(this._img),this._resetImage(this._img2),this._realWidth=0,this._realHeight=0,this._scaleX=0,this._scaleY=0,this._width=0,this._height=0,this._unction(){return!0===this._img._visible},_setSize:function(e,t,n){return r&&n&&0!==e&&0!==t&&0!==this._realWidth&&0!==this._realHeight?(this._scaleX=e/this._realWidth,this._scaleY=t/this._realHeight,this._applyTransform()):(!r||0===this._scaleX&&0===this._scaleY||(this._scaleX=0,this._scaleY=0,this._applyTransform()),this._img.style.width=e+"px",this._img.style.height=t+"px",this._realWidth=e,this._realHeight=t),this._width=e,this._height=t,this},_optimize:function(e){},_applyTransform:function(){return i.style(this._img,i.props.transform,i.nd.matrix.toScaleString(this._scaleX||1,this._scaleY||1)),this},_resetImage:function(e){e._visible=!1,e._loading=!1,e._retryNumber=0,e.onload=null,e.onerror=null,e.style.zIndex=0,e.style.left="-10000px",e.style.width="0",e.style.height="0",r&&i.style(e,i.props.transform,i.nd.matrix.toScaleString(1,1)),this._optimize(e),e.src=a}}),u&&(d=h),p.ndExtend({_scale:0,_lowurl:null,_url:null,_stateChangedSinceLoad:!0,reset:function(){this.__ndCallBaseByName("reset"),this._scale=0,this._lowurl=null,this._url=null,this._stateChangedSinceLoad=!0},load:function(e){return e||this.isLoaded(this._url)||(this.__loadImage(this._url,this._lowurl),this._stateChangedSinceLoad=!1),this},__loadImage:function(e){},isLoaded:fs._url=e,this._stateChangedSinceLoad=!0},_applyRectTo:function(e,t){},applyRectTo:funreturn e?(this._rect=e,this):this._rect}}),f.ndInheritFrom(p).ndExtend({reset:function(){this.__ndCallBaseByName("reset"),this._render.reset(),this._job&&(this._job.abort(),this._job=null)},__loadImage:function(e){this._job&&this._job.abort(),this._job=this._reion(){thi{return!1===this._stateChangedSinceLoad}}),m.ndExtend({_zoomMode:!1,_fgUrl:null,_bgUrl:null,_rect:null,_singleLayerMode:!1,_cells:null,setIsZoomMode:function(e){retde:function(){return!0===this._zoomMode},setFgUrl:function(e){return this._fgUrl=e,this.onScaleChanged(),this},getFgUrlhis._bgUrl=e,this.onScaleChanged(),this},getBgUrl:function(){return this._bgUrl},setRect:function(e){return this._rect=e,this},getRect:function(){return this._rect},setSingleLayerMode:function(e){this._singleLayerMode=e},getCell:function(e){var t=this._cells[e];return t||(t=thilBaseByName("reset"),this._resetCells()},_resetCells:function(){for(var e=this._cells.length-1;e>=0;--e){var t=this._cells[e];t&&t.reset()}},isLayersEnabled:function(){},_createCell:f:function(e){},loadCells:function(e,t){},onScaleChanged:function(){return this}}),g.ndInheritFrom(m).ndExtend({isLayersEnabled:function(){return!1===this._singleLayerMode&&(e=this.getRect().width,t=this.getRect().height,!(this.getIsZoomMode()&&u||s<=819200||i.browser.iOS&&e*t>2e6));var e,t},_createCell:function(){return new f(this._parentNode)},reset:function(){this.__ndCallBaseByName("reset"),this._bg_render.reset()},onScaleChanged:function(){return this},load:function(e){if(e)return this;this._resetCells();var t=this.getRect();if(this.isLayersEnabled()){var n=this.getBgUrl();this._bg_render.setSize(t),this._bg_render.isActive()&&this._bg_render.getUrl()==n||this._bg_render.drawImage(n)}else this._bg_render.reset();var i=this.getFgUrl();return this._fg_render.setSize(t),this._fg_render.isActive()&&this._fg_render.getUrl()==i||this._fg_render.drawImage(i),this},loadCells:function(e,t,n,i){if(n)return!1;var r=!0;if(this._cells_scale!=i){for(var o=0;o<t;o++)this._cells[o].applyRect();this._cells_scale=i}if(e)for(o=0;o<t;o++){var a=this._cells[o];if(!a.isLoaded()){var s=a.rect();if(s.top>=e.bottom){r=!1;break}if(s.left>=e.right||s.right<=e.left||s.bottom<=e.top){r=!1;continue}a.load()}}else for(o=0;o<t;o++)this._cells[o].load();if(this.isLayersEnabled()){var u=this.getBgUrl();this._bg_render.setSize(this.getRect()),this._bg_render.isActive()&&this._bg_render.getUrl()==u||this._bg_render.drawImage(u),this._fg_render.reset()}else this._bg_render.isActive()?this._bg_render.setSize(this.getRect()):this._bg_render.reset(),this._fg_render.isActive()?this._fg_render.setSize(this.getRect()):this._fg_rencreateImage:function(e){return new g(e)}}},18679:function(e,t,n){"use strict";n.d(t,{Z:function(){return I}});var i,r,o,a,s=n(20384),u=n(74981),c=n(2099),l=n(42777),d=(n(88769),s.nd.readingMapReportTypes,r=null,o=0,a={},{load:function(e,t,n){if(r===e&&o===n||(r=e,o=n,i={}),t<=0)return Promise.resolve(null);if(t in i)return Promise.resolve(i[t]);var s,c=t%10?t-t%10+1:t-9,l=c+9,d=e+n+c;return d in a?s=a[d]:a[d]=s=u.Z.get("ReadingMap","GetPageMapReports",{issue:e,reportType:n,fromPage:c,toPage:l}).then((function(t){if(e!==r||n!==o)return Promise.reject();for(var a=0;a<t.length;++a){v]=s}})).finally((function(){delete a[d]})),s.then((function(){return i[t]}))}});function h(e,t,n){this._issue=e,this._pageNumber=t,this.type=n}s.extend(h.prototype,{type:-1,_issue:null,_pageNumber:0,_dfd:null,_map:null,_normMap:null,load:function(){if(!this._dfd){var e=this;this._dfd=Promise.all([d.load(this._issue,this._pageNumber,this.type),d.load(this._issue,this._pageNumber%2?this._pageNumber-1:this._pageNumber+1,this.type)]).then((function(t){var n=t[0],i=t[1];if(!n.Map)return Promise.reject();for(var r=e._map=n.Map,o=i&&i.Map?i.Map:r,a=e._normMap=[],s=0,u=Number.MAX_VALUE,c=0;c<r.length;++c)for(var l=0;l<r[c].length;++l)s=Math.max(s,r[c][l],o[c][l]),u=Math.min(u,r[c][l],o[c][l]);for(c=0;c<r.length;++c)for(a[c]=[],l=0;l<r[c].length;++l)a[c][l]=s?r[c][l]/s:0;return e}))}return this._dfd},map:function(){return this._map},normMap:r p=function(e,t,n){return new h(e,t,n)},f=n(51947),m=!1,g=!1,v=-1,y=[],_=0;function b(){var e=_=(new Date).getTime();u.Z.get("ReadingMap","IsAvailable").then((function(t){e===_&&(m=t,v=-1,C())}))}function w(e){this._pageViewElm=e,e.onattached(this._onattached.bind(this)),e.ondettached(this._ondetached.bind(this)),e.onshowed(this.show.bind(this)),e.onresized(this.onresized.bind(this)),this._width=e.width,this._height=e.height}function C(){if(g){for(var e=0;e<y.length;++e)y[e].hide();g=!1}}s.extend(w.prototype,{_visible:!1,_pageViewElm:null,_container:null,_data:null,_width:0,_height:0,_getData:function(){return p(c.Z.issue(),this._pagd:function(),_ondetached:function(){this._data=null},show:function(){m&&g&&(this._container?(this._container[0].width=this._width,this._container[0].height=this._height,this._container.show()):(this._container=this._pageViewElm.cont.createChild("canvas",{left:0,position:"absolute"}),this._width=this._container[0].width=this._pageViewElm.width,this._height=this._container[0].height=this._pageViewElm.height),this._visible=!0,this._render())},onresized:function(){this._width==this._pageViewElm.width&&this._height==this._pageViewElm.height||(this._width=this._pageViewElm.width,this._height=this._pageViewElm.height,this._visible&&this._container&&(this._container[0].width=this._width,this._container[0].height=this._height),this._render())},_render:function(){if(m&&this._visible&&this._data){var e=this,t=this._data;t.load().then((function(){if(e._data===t&&e._visible){for(var n=e._container[0].getContext("2d"),i=n.createImageData(e._width,e._height),r=e._data.normMap(),o=r.length,a=0;a<e._height;++a)for(var s=Math.floor(a*o/e._height),u=r[s].length,c=0;c<e._width;++c){var l=Math.floor(c*u/e._width),d=r[s][l];d=1-Math.round(5*d)/5;var h=4*(a*e._width+c);i.data[h]=255,i.data[h+1]=Math.round(255*(1-(d-1)*(d-1))),i.data[h+2]=Math.round(255*d*d*d*d),i.data[h+3]=180}n.putImageData(i,0,0)}}))}},hide:function(){m&&this._visible&&(this._container&&this._container.hide(),this._visible=!1)},reset:function(){this._data&&(this._data=this._getData(),this._visible&&this._renderCreated((function(e){y.push(new w(e))})),f.py.subscribe(b),b();var I=l.default.readingmap={show:function(e){if(!g||v!==e){if(v!==e){v=e;for(var t=0;t<y.length;++t)y[t].reset()}if(!g)for(g=!0,t=0;t<y.length;++t)y[t].show()}},hide:C,reportType:function(){return v},isAvailable:function(){return m},isEnabled:function(){return true("unload",(function(){h(!0)}))}))}t.Z=o},78085:function(e,t,n){"use strict";n.d(t,{vL:function(){return C},_L:function(){return v},kD:function(){return b},xU:function(){return _},Zb:function(){return w}});var i=n(20384),r=n(25371),o=n(66327),a=n[t]=function(e){return e<.5?t(2*e)/2:1-t(-2*e+2)/2}}));var u=n(30724),c=n(69327),l=n(63666),d=n(1301),h="left";i.nd.viewer.textView.animations={};var p=function(){var e=null,t=0,n=null,r=0,o=null,s=null,u=null;function c(t,n){return new Promise((function(i){e.elm.animate({translateLeft:e.left+=t},{duration:n,complete:i,easing:"easeOutQuad"})}))}function l(e,i){n.correctSections(t+Math.floor(i.pos*r))}function d(t,n){return new Promise((function(t){e.container.animate(i.nd.animationEmptyStep,{duration:n,easing:"easeOutQuad",complete:t,step:l})}))}function h(){if(o){e.elm.stop(!0),e.container.stop(!0);var t=s;o=s=u=e=n=null,t(),a.busy.reset()}}return{play:function(i,l,p){if(!o){if(!(l=Math.round(l))();o=new Promise((function(e,t){s=e,u=t})),a.busy.set(),p=Math.round(p),n=i,e=i.scroller,t=e.left,r=l,Promise.all([c(l,p),d(0,p)]).then(h)}return o},stop:function(){if(o){e.elm.stop(!0),e.container.stop(!0);var i=u,c=e.elm.translateLeft();o=s=u=e=n=nreset()}},isActive:function(){return!!o}}}(),f=function(){function e(){this.counter<=0||--this.counter||(this.column.move(this.delta),this.resolve())}return{play:function(t,n,i){if(!n)return Promise.resolve();var r={counter:0,column:t,delta:n},o=new Promise((function(e){r.resolve=e})),a=t.visibleCells();if(a){var s={duration:i,complete:e.bind(r),easing:"easeOutQuad"};if(r.counter=a.length,t.hasDivider()){++r.counter;var u={};u.left=t.left()+n,t.divider().animate(u,s)}a.forEach((function(e){var i={};i[h]=t.left()+n,e.elm.animate(i,s)}))}else t.move(n),r.resolve();return o}}}(),m=function(){function e(){this.counter<=0||--this.counter||this.resolve()}return{play:function(t,n,i){if(!n||!t)return Promise.resolve();for(var r={counter:0},o=new Promise((function(e){r.resolve=e})),a=e.bind(r);t;t=t.next())++r.counter,f.play(t,n,i).then(a);return o}}}(),g=function(){function e(){this.counter<=0||--this.counter||this.resolve()}return{play:function,o=new Promise((function(e){r.resolve=e})),a=(n.count()*u.G4-u.ez)/(t.count()*u.G4-u.ez),s=-1,c=-1,l=0,d=0;t.forEach((function(e){var t=e.position();t.height>l&&(l=t.height),(s<0||t.top<s)&&(s=t.top)})),n.forEach((function(e){var t=e.position();t.height>d&&(d=t.height),(c<0||t.top<c)&&(c=t.top)}));var p=d/l,f=n.head().left(),m=s-c;n.forEach((function(e,t){var n=f+t*u.G4/a;e.cells().forEach((function(e){var t=e.colspan*u.G4-u.ez,i={top:Math.floor(e.top/p+m-e.height*(1-1/p)/2),scaleX:1/a,scaleY:1/p,opacity:0};i[h]=n+u.ap-t*(1-1/a)/2,e.elm.css(i)}))}));var g={duration:i,complete:e.bind(r),easing:"easeOutQuad"};return n.forEach((function(e,t){var n=f+t*u.G4+u.ap;e.cells().forEach((function(e){var t={top:e.top,scaleX:1,scaleY:1,opacity:1};t[h]=n,e.elm.animate(t,g),++r.counter}))})),t.forEach((function(e,t){var n=f+t*a;e.cells().forEach((function(e){var t=e.colspan*u.G4-u.ez,i={top:c+(e.top-s)*p-e.height*(1-p)/2,scaleX:a,scaleY:p,opacity:0};i[h]=Math.floor(n+u.ap-t*(1-a)/2),e.elm.animate(i,g),++r.counter}))})),o}}}(),v=i.nd.viewer.textView.animations.expandArticleInBundl[50,200],s=null;function l(){return t>0}function h(e){var t={dividers:[],articles:[]};return e.children("div").each((function(){var e=i(this);t.dividers.push({elm:e,top:e.offset().top})})),e.children("article").each((function(){var e=i(this),n={text:[]},r=e.find("h1");r.length&&(n.title={elm:r,top:r.offset().top}),(r=e.find("h2")).length&&(n.subtitle={elm:r,top:r.offset().top}),(r=e.find("ul")).length&&(n.byline={elm:r,top:r.offset().top}),(r=e.children("figure")).length&&(n.image={elm:r,top:r.offset().top}),e.children("div[bidx]").each((function(){var e={elm:r=i(this),top:r.offset().top},t=parseInt(r.attr("bidx"),10);n.text.length<=t?n.text.push([e]):n.text[t].push(e)})),t.articles.push(n)})),t}function p(e,t,n){if(e)(i=e.top-t.top)&&t.elm.css("translateTop",i);else if(t&&(t.elm.css("opacity","0"),n)){var i=n.top-t.top;t.elm.css({translateTop:i,scaleX:.5,scaleY:.5})}}function f(){t>0&&(--t||(e.dispose(),e=void 0,s.invalidate(),a.busy.reset()))}function m(e,i,r){if(i)if(e&&!r){var o=e.top-i.top;i.elm.animate({opacity:0,translateTop:o,scaleX:.5,scaleY:.5},150,"easeOutQuad",f),++t}else if(e&&r){if(r.top!==e.top){var a=r.top-i.top;setTimeout((function(){i.elm.animate({translateTop:a},250,"easeOutQuad",f)}),n[0]),++t}}else if(!e&&r){var s=r.top-i.top;setTimeout((function(){i.elm.animate({translateTop:s,scaleX:1,scaleY:1,opacity:1},150,"easeOutQuad",f)}),n[1]),++t}}return{play:function(i,f,g){if(!l()){s=r.Z.current.textView,a.busy.set();for(var v,y=f.prev(),_=f.detach(1),b=0;b<g.length;b++)if(g[b].id===i.Id){v=b;break}var w=r.Z.current.textViewColumnsBuilder.getArticlesBundleSpread(f.bundle(),v),C=h(f.cells()[0].elm()),I=(new o.d$).articleIdx(f.articleIdx()).columnIdx(0).articlesCount(w.length).bundle(f.bundle());y.type()!==o.Xp.SectionHeader&&I.addDivider(),_?_.prev(I):y&&y.next(I);for(var P=null,x=0;x<w.length;++x){var S=w[x];P||(P=S.renderer.columnElm()),x&&d.I.appendTo(P),S.renderer.render(S.type,I,P,S.lines)}I.addCell(new c._(P,1,0,P.height())),I.left(-1e5);var T=h(P);e=(new o.d$).articleIdx(f.articleIdx()).columnIdx(0).articlesCount(w.length).bundle(f.bundle()),y.type()!==o.Xp.SectionHeader&&e.addDivider(),P=void 0;var k=u.$0;(0,u.Dc)(Number.MAX_VALUE);var A=0;for(b=0;b<w.length;++b){S=w[b],P||(P=S.renderer.columnElm()),b&&d.I.appendTo(P);var E=g[b].lines;A||(A=0);var Z=S.lines||0;if(g[b].type===S.type&&E===Z)S.renderer.render(S.type,e,P,S.lines);else if(E||Z)if(E)if(Z){A=Math.min(g[b].lines,w[b].lines);var M=Math.abs(g[b].lines-w[b].lines);A!==M?S.renderer.render(0,e,P,A,M):S.renderer.render(0,e,P,A)}else S.renderer.render(0,e,P,g[b].lines,void 0);else S.renderer.render(0,e,P,w[b].lines,void 0);else S.renderer.render(0,e,P)}(0,u.Dc)(k),e.addCell(new c._(P,1,0,P.height())),e.left(f.left());var D=h(P);for(b=0;b<g.length;++b){var L=C.articles[b],N=D.articles[b],R=T.articles[b];for(p(L.title,N.title,R.title),p(L.subtitle,N.subtitle,R.subtitle),p(L.byline,N.byline,R.byline),p(L.image,N.image,R.image),x=0;x<N.text.length;x++){var V=L.text[x],B=N.text[x],F=R.text[x];p(V?V[0]:void 0,B[0],F?F[0]:void 0),B.length>1&&(V[0].elm.height()>F[0].elm.height()?p({top:V[0].top+B[1].top-B[0].top},B[1],void 0):p(void 0,B[1],{top:F[0].top+B[1].top-B[0].top}))}}for(b=0;b<D.dividers.length;++b){var O=C.dividers[b].top-D.dividers[b].top;O&&D.dividers[b].elm.css("translateTop",O)}for(P.elm().height(),t=0,b=0;b<g.length;++b)for(L=C.articles[b],R=T.articles[b],N=D.articles[b],m(L.title,N.title,R.title),m(L.subtitle,N.subtitle,R.subtitle),m(L.byline,N.byline,R.byline),m(L.image,N.image,R.image),x=0;x<N.text.length;++x)V=L.text[x],B=N.text[x],F=R.text[x],m(V?V[0]:void 0,B[0],F?F[0]:void 0),B.length>1&&(V[0].elm.height()>F[0].elm.height()?m({top:V[0].top+B[1].top-B[0].top},B[1],void 0):m(void 0,B[1],{top:F[0].top+B[1].top-B[0].top}));var z=function(e){var t=T.dividers[e].top-D.dividers[e].top;if(t||C.dividers[e].top!==T.dividers[e].top){var i=D.dividers[e].elm;setTimeout((function(){i.animate({translateTop:t},250,"easeOutQuad")}),n[0])}};for(b=0;b<D.dividers.length;++b)z(b);return f.dispose(),I}},isActive:l}}();i.nd.viewer.textView.animations.expandArticleInBundle2=function(){var e=!1;function t(){return e}return{isActive:t,play:function(n,i){if(t())return Promise.reject();e=!0;var a=r.Z.current.textView,s=r.Z.current.textViewScroller.elm,c=n.split(i),d=null,h=null,v=null;return c.clicked.layout.renderer().render().then((function(t){var i=[],r=n.columnIdx(),y=n.columnIdx(-1),_=t.count(),b=n.section(),w=n.left();if(t.forEach((function(e){i.push(e.left(-9999)),b&&e.section(b)})),c.below){d=(new o.d$).articleColumnsCount(1).addDivider(),b&&d.section(b),d.state().isBundle=!0,a.appendColumns(n,new o.JD(d,d));for(var C=function(e){var t=c.below.layouts[e];if(t){var n=(0,l.ny)(t.dataItem(),l.tG.Rendered);d.onDisposed((function(){return n.release()})),d.addLayout(t)}},I=0;I<c.below.layouts.length;++I)C(I);for(I=0;I<c.below.cells.length;++I){var P=c.below.cells[I];I||P.layout?d.addCell(P):P.remove()}d.left(w),s.height()}else d=n.next();var x=[],S=function(e,t,n){var i=e.viewport(),r=e.scroller.left+t.left(),o=r+n*e.columns().width;if(r>i.left&&o>i.right){var a=i.right-o;if(r+a<i.left&&(a=i.left-r),a)return p.play(e,a,function(e){var t=100+100*e;return t>500?500:t}(-a/e.columns().width))}return Promise.resolve()}(a,n,_+(c.above?1:0));if(c.above){for(x.push(m.play(d,(_+(c.below?1:0))*u.G4,300)),x.push(S),(P=c.above.cells[c.above.cells.length-1])&&!P.layout&&n.removeCell(P),h=(new o.d$).articleColumnsCount(1),v=new o.JD(h,h),a.appendColumns(n,new o.JD(h,h)),h.addLayout(c.clicked.layout),c.clicked.layout.unlock(n),I=0;I<c.clicked.cells.length;++I)h.addCell(c.clicked.cells[I]);h.left(w),s.height(),x.push(f.play(h,u.G4,100).then((function(){return t.forEach((function(e,t){e.left(w+u.G4+t*u.G4)})),g.play(v,t,300)})))}else x.push(m.play(d,(_-(c.below?0:1))*u.G4,300)),x.push(S),h=n,y=t.head(),v=new o.JD(h,h),t.forEach((function(e,t){e.left(w+t*u.G4)})),x.push(g.play(v,t,300));return Promise.all(x).then((function(){for(a.replaceColumns(v,t),t.head().columnIdx(-1);y&&y.columnIdx();)y=y.columnIdx(r++).next();return h.dispose(),a.invalidate(),e=!1,a.scroll(0,0),{newnext:d,expanded:i}}))}))}}}();var y,_=i.nd.viewer.textView.animations.expandMyTitles=function(){var e=!1;function t(){return e}return{isActive:t,play:function(n){t()&&Promise.reject(),e=!0;var i,a=r.Z.current.textView,s=n,c=[],l=n.columnIdx(),d=n.layouts()[0]._data.Data.pageArticles.length,h=5;return h>d?h=d:l&&(h=h+l>d?d-l:h),i=new o.JD(s,s),n.layouts()[0].render(h,l).then((function(t){return m.play(s.next(),(h-1)*u.G4,300).then((function(){return a.replaceColumns(i,t),s.dispose(),a.invalidate(),e=!1,{newnext:t,expanded:c}}))}))}}}(),b=i.nd.viewer.textView.animations.expandMonitors=function(){var e=!1;function t(){return e}return{isActive:t,play:function(n){t()&&Promise.resolve(),e=!0,a.busy.set();var i=r.Z.current.textView,s=n,c=[],l=n.columnIdx(),d=n.layouts()[0]._data.Data.Monitors.length||0,h=Math.ceil(d/4),p=5;p>h?p=h:l&&(p=p+l>h?h-l:p);var f=new o.JD(s,s),g=n.layouts()[0].render(p,l);return g.then((function(t){m.play(s.next(),(p-1)*u.G4,300).then((function(){return i.replaceColumns(f,t),s.dispose(),i.invalidate(),e=!1,{newnext:g,expanded:c}}))}))}}}(),w=i.nd.viewer.textView.animations.expandReplies=function(){var e=!1;function t(){return e}return{isActive:t,play:function(n){if(t())return Promise.resolve();e=!0,a.busy.set();var i=r.Z.current.textView,s=n,c=[],l=n.columnIdx(),d=n.layouts()[0]._data.Data.Replies.length||0,h=Math.ceil(d/4),p=5;p>h?p=h:l&&(p=p+l>h?h-l:p);var f=new o.JD(s,s);return n.layouts()[0].render(p,l).then((function(t){m.play(s.next(),(p-1)*u.G4,300).then((function(){return i.replaceColumns(f,t),s.dispose(),i.invalidate(),e=!1,{newnext:t,expanded:c}}))}))}}}(),C=i.nd.viewer.textView.animations.bookmarksBlockExpander=(y=!1,{play:function(e){if(!this.isActive()){a.busy.set();var t=e.layouts()[0],n=new o.JD(e,e),i=r.Z.current.textView;return t.expand().then((function(t){return t.head().isFirst(e.isFirst()),t.tail().isLast(e.isLast()),m.play(e.next(),t.head().width()-u.G4,300).then((function(){return i.replaceColumns(n,t),e.dispose(),i.invalidate(),y=!1,a.busy.reset(),t}))}))}},isActive:function(){return y}})},65317:function(e,t,n){"use strict";n.d(t,{XY:function(){return u},al:function(){return c},oy:function(){return s}});var i=n(40180),r=n(50104),o=n(67687),a=n(30724),s=function(){function e(e,t){void 0===t&&(t=""),this._parent=e,this._id=t,this.colspan=0,this._align=!1,this._idx=0}return e.prototype.copy=function(){var e=new this.constructor(this._parent,this._id);return e._layout=this._layout,e.colspan=this.colspan,e._align=this._align,e},e.prototype.id=fun=function(){return this.__type+this._id},e.prototype.article=function(){return this._parent.article()},e.prototype.config=function(){return this._parent.config()},e.prototype.articleType=function(){return 0},e.prototype.width=function(){var e=this._parent.width(this._id);return(0,i.isNumber)(e)?{min:e,max:e}:e},e.prototype.layout=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?(this._layout=e[0],this):this._layout},e.prototype.align=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?(this._align=e[0],this):this._align},e.prototype.height=function(e){return this._parent.height(this._id,e||this.ply(this._id,this.colspan,this._layout)},e.prototype.render=function(e,t){return this._cell=this._parent.render(e,this._id,t,this.colspan,this._layout).onRemoved(this.onCellRemoved.bind(this)),this._cell},e.prototype.alignTop=function(e){return this._parenellRemoved=function(){delete this._cell},e.prototype.expand=function(){return null},e.prototype.left=function(){return this._cellreturn this._cel){return this._cell?this._cell.elm:null},e.prototype.type=function()turn this._parent.measure(this._id,e,t)},e.prototype.toJSON=function(e){return{type:this.__type,config:this._parent.config(),colspan:e,height:this.height(e),align:this._align,layoutConfig:{},idx:this._idx,isJSON:!0,blockType:this.blockType}},e.prototype.idx=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?(this._idx=e[0],this):this._idx},Object.deft:function(){return this._parent.type()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),e}(),u=function(){function e(e,t,n){this._article=e,t&&(this._config=t),n?this.__type in n?this._cache=n[this.__type]:n[this.__type]=this._cache={}:this._cache={}}return Object.defineProperty(e,"type",{get:function(){return r.Z.base},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"__type",{get:function(){return e.type},enumerable:!1,configurable:!0}),e.prototype.article=function(){return this._article},e.prototype.config=function(){return this._config},e.prototype.available=function(e){return!1},e.prototype.alignTop=function(e){var t=e%a.Nv;return t?e+a.Nv-t:e},e.prototype.instance=function(e){var t=new s(this,e);return t.__type=this.__type,t},e.prototype.instances=function(e){return[new s(this)]},e.prototype.width=function(e){},e.prototype.height=function(e,t){var n=this._getHeightCacheKey(e,t);if(n in this._cache)return this._cache[n];var i=new o.e;return this.measure(e,t,i),i.execute(),this._cache[n]||0},e.prototype.ape.prototype.render=function(e,t,n,i,r){},e.prototype.highlight=function(e){},e.prototype.type=function()e},e.prototype.measure=functionestimateLinesCount=function(e){tHeightCacheKey=fuop=i,this._cellRemovedSubscription=null}return Object.defineProperty(e,"type",{get:function(){return r.Z.text},enumerable:!1,configurable:!0}),e.prototype.left=function(){},e.prototype.top=functioeight=function()at(this.lineIdx,"_").concat(this.lines)},e.prototype.elm=function(){return this._cell?this._cell.elm.children("div[bidx=".concat(this.blockIdx,"]")):null},e.prototype.cell=function(e){var t=this;return arguments.length?(this._cellRemovedSubscription&&this._cellRemovedSubscription.unsubscribe(),this._cell=e,this._cellRemovedSubscription=e.onRemoved().subscribe((function(){return t.onCellRemoved()})),thicell=this._cellRemovedSubscription=null},e}()},43944:function(e,t,n){"use strict";_metaInfo=r||[],this._instanceMap=o||[]){return{addBlockI=t)returreturn this.eturn thiw i((e.blocicienength>0}goWide(eak}r||t.impe=this.pick(o,r[a]);return o}return null}}),t.Z=r},19970:function(e,t,n){"use strict";n.r(t),n.d(t,{buildLayout:function(){return c}});var i=n(43944),r=n(38166),o=n(253eturn{valid:e.isValid()||1===e.colspan}}),(function(){return!1}),r.Z.pick);function c(e,t,n,i){o.Z.current||(o.Z.current=new o.Z),(0,s.mp)(i);var c=new r.Z(n.colspan).applyConfig(n).textBlocksHeights(a.S.fromJSON(n.textBlocksHeights));delete c.config().textBlocksHeights;var l=u.buildLayout(e,t,c);return l?l.toJSON():l}},38166:function(e,t,n){"use strict";var i=n(22970),r=n(40180),o=n(71151),a=n(50104),s=n(63561),u=n(30724);function c(e){var t=e%u.Nv;return t?e+u.Nv-t:e}var l={title:function(e,t,n){return n.height<=u.$0/2?t:null},annotation:function(e,t,n){var i=n.height;return t&&u.$0-c(t.top+i)>=3*u.Nv?t:null},image:function(e,t,n){var i=n.colspan,o=n.height,a=n.idx,s=n.type;if(!t)return t;for(var l=e.next();l;l=l.next()){var d=(0,r.find)(l.positions(),(function(e){return e.instance.type===s}));if(d){if(d.instance.idx<a)return null;break}}var h=t.top+t.height,p=!t.top,f=u.$0-h<u.Nv;if(p&&f){var m=c(o);return u.$0-m<3*u.Nv?null:(t.height=o,t)}if(!p&&!f)return t.height<2*o?null:(t.top+=Math.round((t.height-o)/2),t.height=o,t);var g=nul(e){if(!(e.top<t.top))return v=e,!1;g=e})),g||v){if(g&&!v){if(t.top-g.top-g.height<u.Nv&&g.currentColspan>=i){var y=c(t.top+o);return u.$0-y<3*u.Nv&&u.$0-y>=u.Nv?null:(t.height=o,t)}return(_=h-o)-(m=c(t.top))<3*u.Nv&&_-m>=u.Nv?null:(t.top=_,t.height=o,t)}if(v&&!g)return v.top-t.top-t.height<u.Nv&&v.currentColspan>=i?(_=t.height-o)<3*u.Nv&&_>=u.Nv?null:(t.top=_,t.height=o,t):(m=c(o),t.height-m<3*u.Nv&&t.height-m>=u.Nv?null:(t.height=o,t))}else{var _;if(p)return h-(m=c(t.top+o))<3*u.Nv&&h-m>=u.Nv?null:(t.height=o,t);if(f)return(_=h-o)-(m=c(t.top))<3*u.Nv&&_-m>=u.Nv?nuld 0===i;u=u.prev())s(u);return i?t:null},alignTopOrBottom:function(e,t,n){var i=n.height;if(!t)return null;var r=t.top+t.height,o=!t.top,a=u.$0-r<u.Nv;return .copy)?e.copy():(0,r.assign)({},e):null}function h(e,t,n){rancehis.currentColsp._cells=[],n._map={},n._positi,(function(e){returions,(function(e)tions,(function(e){return e.copy()})),n},t.prototype.index=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?(this._idx=e[0],this):this._idx},t.prototype.findPosition=function(e,t){var n=this;t=t||u.$0;var i=e.config,o=e.colspan,a=e.height,s=e.align;if(i.alignTop)return this._checkPosition(0,o,a,t)?[{top:0,height:void 0}]:[];if(i.alignBottom){var c=u.$0-a;if(i.align){var l=u.$0%u.Nv;l&&(c-=l)}return this._checkPosition(c,o,a,t)?[{top:c,height:a}]:[]}var d=this.findAllPositions(0,o,a,s,t);if(d!i.arbitrary)return h=[r],!1;h.push(r)}})),h}return this._applyRestrictions(e,this.findFirstPosition(0,o,a,s(t in l&&!(i=l[t](n,i,e)))retue)})}else u={top:e,height:o-e};return u},t.prototype.findAllPositions=function(e,t,n,i,o){if(o=o||u.$0,i&&(e=c(e)),e+n>o)return[];var a=this.next();if(t>1&&!a)return[];var s=1===t,l=[],d=Number.MAXi&&(e=c(e)),s=1===t,d=Number.MAX_VALUE}})),e>=0&&e+n<=o)if(t>1){var h=a.findFirstPosition(e,t-1,n,i,o);h&&(e=h.top,l.push({top:e,height:Math.min(h.height,o-e)}))}else l.push({top:e,height:o-e});return l},t.prototype._checkPosition=function(e,t,n,i){i=i||u.$0;var o=e+n;if(o>i)return!1;var a=this.next();if(t>1&&!a)return!1;var s.top<o&&t.top+t.height>e)return s=!1,!1})),s&&(!(t>1)||a._),this._addPosition(t,e.crn t>1&&a&&a._addPosition(e,t-1,n),this},t.prototype.positions=function(){return this._positions},t.prototype.layout=function()(this._positions);return e.top+e.height},t.prototype.cells=function(){return this._cells},t}(o.HC),g=0,v=function(){function e(e,t){if(this._id=++g,e){this._colspan=e,this._columns=new o.xL;for(var n=0;n<e;++n)this._columns.append(new m(this).index(n))}this._config={},t&&(this._renderer=t),this._totalTextLinesCount={},this._totalLinesCount=-1,this._rate=0}return e.choose=function(e,t){var n;return n=e?t?null:e:t,function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];if(2===r.length&&!n){var a=(0,i.CR)(r,2),s=a[0],u=ag().titleType)||(Math.random()>=.5?t:n)},e.fromJSON=function(t,n){var i=new e;return n&&(i._renderer=n,i._textBlocksHeights=n.textBlocksHeights(),i._article=n.article()),i._colspan=t._colspan,i._config=t._config,i._blockInstances=t._blockInstances,i._columns=o.xL.fromJStances,_columns:this._columns.toJSON()}},e.prototype.id=function(){return this._id},e.prototype.copy=function(){var t=new e;return t._renderer=this._renderer,t._article=this._article,t._colspan=this._colspan,t.unction(e){t._columns.append(e.copy(t))})),(0,r.assign)(t._config,this._config),t._textBlocksHeights=this._textBlocksHeights,this._blockInstances&&(t._blockInstances=(0,r.map)(this._blockInstances,(function(e){return d(e)}))),t._totalTextLinesCount=this._totalTextLinesCount,t._totalLinesCount=this._totalLinesCount,t._map=this._map,t._rate=this._rate,t.toolsColumnAdded=this.toderer.newArticleElm()),this._.remove(),delete this.nderer?this._renderer.columnElm(e):null},e.prototype.columns=function(){return this._columns},Object.defineProperty(e.prototype,"colspan",{get:function(){return this._colspan},enumerable:!1,configurable:!0}),e.prototype.addBlockInstance=function(e,t){var n=this,o=void 0===t?{}:t,a=o.expand,s=o.columnsCountToPreserve,u=void 0===s?0:s;if(!e.height)return[];var c,l=e.colspan,d=e.config;if(this._colspan<l&&!a)return[];if(d.alignRight){for(var p=this._columns.tail(),f=this._columns.count()-1,g=l-1;g>0&&p;--g,--f,p=p.prev());if(!p||f<u)return[];var v=p.findPositiontop,instance:e,columnsCount:n._colspan}}))}else{a&&this.expandForText(h(0,e.height,e.colspan));var y=this._columns.copy();if(c=[],y.forEach((function(t,o){if(!(o<u)){if(o+l>y.count()&&!c.length&&a)for(var s=y.count(),h=o+l-y.count();h>0;--h,++s)y.append(new m(n).index(s));var p=t.findPosition(e);return!(p.length&&(c.push.apply(c,(0,i.ev)([],(0,i.CR)((0,r.map)(p,(function(n){return{colidx:o,column:t,top:n.top,instance:e,columnsCount:y.count()}}))),!1)),!d.arbitrary))&&!d.alignLeft&&void 0}})),!c.length&&a){for(var _=this._colspan,b=(g=y.count(),l-y.count()+this._colspan);b>0;--b,++g)y.append(new m(this).index(g));var w=this._columns.tail.top,instance:e,columnsCount:y.count()}}))}y.count()>this._colspan&&y.detach(thiCount-n._colspan),t._applyPosi(t,e.top),this._totalLinesCount=-1,this},e.prototype._addBlockInstance=function(e){return this._blockInstances?this._blockInstances.push(e):this._blockInstances=[e],this._rate+=(e.isJSON?e.height:e.height())*e.colspan*((0,r.includes)([a.Z.image,a.Z.video],e.blockType)?1.1:1),this._gaps=null,(0,r.assign)(this._config,e.layoutConf.add(e,n),this._totalLinelumns.append(new m(thin--,this._columns.detach(-ndex(t++));return this._colspan+=e,this},e.prototype.config=function(){return e&&(0,r.assign,"video"],e.type)?1.1:elowAvgRate)||(Math.rgRate:n.length?a/n.length:0},this._gaps},e.prototype.blockInstances=function(){return this._blockInstances},e.prototype.renderer=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?(this._renderer=e[0],tthis._renderer.article()),._config&&this._config.sthis._textBlocks[e]=n=[]),n.push(t),this},e.prototype.dispose=function(){this.derer)return this._renderer.highlight(e)},e.prototype.addToolsBlock=function(e,t,n){var i=this;if(void 0===n&&(n=null),!t)return null;var o=null;return n?(o=(0,r.find)(e.instances(this),(function(e){return e.height()<=u.$0})))&&(this.appendColumn(),this.toolsColumnAdded=!0,o.layout(this),o.render(n,0),this._applyPosition({instance:o,colidx:t.count(),top:0})):(0,r.fe:o,colidx:n.columnIndex,top:n.top}),!1})),o},e.prototype.availableTailPosition=function(){var e=(0,r.map)(this._columns.tail().positions(),(function(e){return{top:e.top,height:e.height}}));this._textBlocks.length>=this._colspan&&(0,r.fore.push({top:t.top(),height:t.height()})})),e.sort((function(e,t){return e.top-t.top})).push({top:u.$0,height:0});var t={top:0,height:0,colIndex:thi&&(t.top=n,t.height=i),n=e.top+e.height})),t},e.prototype.bottomPositionsAfterText=function(){for(var e=[],t=(0,r.last)((0,r.last)(this._textBlocks)),n=this._textBlocks.length-1,i=this._columns.item(n);n<this._columns.count();++n,i=i.next()){var o,a=(0,r.last)(i.positions())||{top:0,height:0};o=t&&t.top()>=a.top?t.top()+t.height():a.top+a.height,t=null;var s=u.$0-o;s>0&&e.push({columnIndex:n,top:o,height:s})}return e},e.prototype.textBlocksHeights=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?(this._textBlocksHeights=e[0],this):thisis.textDistribution().emptyLinesCount<3},e.prototype.textDistribution=function(){var e=this;if(!this._textDistribution){var t=0,n=this.startBlockIdx(),i=Math.floor(this._textBlocksHeights.get(n,this._config.titleType)/u.Nv),o=0,a=0;this._columns.forEach((function(s){var c=(0,r.sum)(s.findAllPositions(0,1,2*u.Nv,!0),(function(e){return Math.floor(e.height/u.Nv)}));if(t+=c,n>=0)for(;c;){if(c<i){i-=c,c=0;break}if(c-=i,++n>=e._articleTextBlocksCount()){n=-1;break}i=Math.floor(e._textBlocksHeights.get(n,e._config.titleType)/u.Nv)}else++o;c&&(a+=c)})),this._textDistribution={emptyColumnsCount:o,availableLines:t,emptyLinesCount:a}}return this._textDistributcks.length:this._cobution=null,this._gaps=null}return this},e.prototype.expandForText=function(e){void 0===e&&(e=0);var t=0;this._columns.forEach((function(e){t+=(0,rion(e){return Math.floor(e.height/u.Nv)}))}));var n=this.totalTextLinesCount()+e-t;if(n<=0)return this;var i=Math.ceil(n/u.Fp);return this.expand(i)},e.prototype.totalTextLinesCount=function(){var e="".concat(this._config.titleType,"_").concat(this.startBlockIdx());if(e in this._totalTextLinesCount)return this._totalTextLinesCount[e];var t=this.article();if(t){for(var n=this._textBlocksHeights.getAll(this._config.titleType),i=0,r=this.startBlockIdx();r<t.Blocks.length;++r)i+=Math.floor(n[r]/u.Nv);return this._totalTextLinesCount[e]=iTextLinesCount()),t?this._renderer.renderLayout(this):null},e.prototype.renderAsync=function(e){return void 0===e&&(e=s.A.dummy),this._renderer?this._renderer.renderLayoutAsync(this,e):Promise.reject(new Error("There is no renederer associated with this layout."))},e.prototype.textBlocks=function(){returtaItem=function(){return this.article()},e.prototype.map=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?(this._map=e[0],this):this._map},e.prototype.hasMoreToShow=function(){if(this.isExpanded)return!1;var e=this.article();if(e.isPreview())return!0;var t=(0,r.isEmpty)(e.Images)?0:e.Images.length,n=(0,r.isEmpty)(e.Videos)?0:ansform)(t,(function(e,t){e[t]=0}),{}))}(this._blockInstances,a.Z.image,a.Z.video),o=i[a.Z.image],s=i[a.Z.video];return o<t||s<n},e}();t.Z=v},86913:function(e,t,n){"use strict";n.d(t,{Z:function(){return cn}});var i=n(22970),r=n(20384),o=n(40180),a=n(10751),s=n(62918),u=n(25371),c=n(4169),l=n(29699),d=n(11144),h={READY:"__ready__",ERROR:"__error__",SUCCESS:"__success__",PROGRESS:"__progress__"},p={LOAD_MODULE:"loadModule",EXEC_METHOD:"execMethod",RESET_ND_CONFIG:"resetNdConfig"},f=!0,m={},g={},v=0,y=0,_=[],b=null,w=0;function C(){var e=null;try{e=new Worker(function(){if(!b)try{var e=window.version||(new Date).getTime().toString();b=(window.workerBasePath||window.basePath||"./")+"scripts/worker.build.min.js?v="+e}catch(e){console.error("Cannot build worker script url",e),b="scripts/worker.build.min.js"}return b}())}catch(e){return console.error("Cannot create worker",e),null}var t={id:++w,worker:e,task:null,loadedModules:{},queue:[]};return e.onmessage=A.bind(t),e.onerror=E.bind(t),t}var I=0;function P(){var e=l.Z.version();if(e!==I){I=e;var t=l.Z.configData();for(var n in g)g[n].worker.postMessage({command:p.RESET_ND_CONFIG,data:t})}}function x(e,t){if(e in m)return m[e].promise();var n=m[e]=new d.B,i=0;for(var r in g)S(T(p.LOAD_MODULE,{mode).catch((function(){++i>=v&&n.reject()}));return n.promise()}function S(e,t){return t||(t=function(e){for(var t in g){var n=g[t];if(!n.task&&e in n.loadedModules)return n}return null}(e.data.moduleName)),t?t.task?t.queue.push(e):(t.task=e,t.worker.postMessage({context:{requestId:e.id},command:e.command,data:e.data})):_.push(e),e.dfd.promise()}function T(e,t){return{id:++y,dfd:new d.B,command:e,data:t}}function k(e){var t=null;if(e.queue.length)t=e.queue.shift();else if(_.length)for(var n=0;n<_.length;++n)if(_[n].data.moduleName in e.loadedModules){t=_[n],_.splice(n,1);break}t?(e.task=t,e.worker.postMessage({context:{requestId:t.id},command:t.command,data:t.data})):e.task=null}function A(e){var t=this.task;switch(e.data.command){case p.LOAD_MODULE:switch(e.data.status){case h.READY:this.loadedModules[t.data.moduleName]=1,k(this),t.dfd.resolve();break;case h.ERROR:k(this),t.dfd.reject(e.data.error)}break;case p.EXEC_METHOD:switch(e.data.status){case h.PROGRESS:t.dfd.notify(e.data.result);break;case h.SUCCESS:k(this),t.dfd.resolve(e.data.result);break;case h.ERROR:k(this),t.dfd.reject(e.data.error)}}}function E(e){k(this),this.task&&this.task.dfd.reject(e)}!function(){if(f="undefined"!=typeof Worker){for(var e=4;e>0;--e){var t=C();if(!t)break;g[t.id]=t,++v}(f=!!v)&&(c.Z.onConfigUpdated(P),c.Z.loaded().then(P))}}();var Z={support:function(){return f},loadModule:x,exec:function(e,t,n){return x(t).then((function(){return S(T("execMethod",{moduleName:t,methodName:e,params:n}))}))}},M=(n(19970),n(11780));function D(){}o.extend(D.prototype,{emulated:!0,support:function(){return!0},loadModule:function(e,t){var n=new d.B;try{(0,M.f)([e],(function(e){n.resolve()}),(function(e){n.reject(e)}))}catch(e){n.reject(e)}return n.promise()},exec:function(e,t,n){var i=new d.B;try{(0,M.f)([t],(function(r){var o=r[e];if("function"==typeof o){var a=o.apply(void 0,n);i.resolve(a)}else i.reject(new Error("Moduleod "+e+"."))}),(function(e){i.reject(e)}))}catch(e){i.reject(e)}return i.promise()}});var L=!0===Z.support()?Z:new D;function N(e,t,n){this._moduleName=t,this._loadDfd=e.loadModule(t,n),this._pool=e,this.poolEmulated=!!e.emulated}o.extend(N.prototype,{exec:function(e,t){var n=this;return this._loadDfd.then((function(){return n._pome,t||[])})).catch((function(e){throw e}))}});var R,V=n(38166),B=n(65317),F=n(43944),O=n(30724),z=n(50104),U=((R={})[z.Z.image]={restrictions:{0:"image"}},R.baseTitle={mandatory:!0,alignLeft:!0,types:O.gK},R[z.Z.title]="baseTitle",R[z.Z.fullTitle]="baseTitle",R),H=[{name:"generic",blocks:[{type:z.Z.translationBar,alignLeft:!0},{type:z.Z.continuedFromLink,mandatory:!0,alignLeft:!0},{type:"choose",mandatory:!0,items:[{type:z.Z.fullTitle,restrictions:{0:"title"}},{type:"group",items:[{type:z.Z.title,restrictions:{0:"title"}},{type:z.Z.subtitle,mandatory:!0,alignLeft:!0}]}]},{type:z.Z.annotation,mandatory:!0,align:!0,restrictions:{0:"annotation"}},{type:z.Z.image,arbitrary:!0},{type:z.Z.video,arbitrary:!0},{type:z.Z.relatedAd,maxPreviewInstances:0,arbitrary:!0,restrictions:{0:"image",1:"alignTopOrBottom"}},{type:z.Z.comments,alignRight:!0,alignBottom:!0}]},{name:"compact",blocks:[{type:z.Z.translationBar,alignLeft:!0},{type:z.Z.fullTitle},{type:z.Z.annotation,align:!0,restrictions:{0:"annotation"}},{type:z.Z.image}]},{name:"minimized",blocks:[{type:z.Z.title}]}];function j(e){(0,o.forEach)(e,(function(e){e.type in U&&(0,o.assign)(e,U[e.type]),"items"in e&&j(e.items)}))}H.loaded=c.Z.getAsync("textview",null).then((function(e){return e&&e.layout&&e.layunction(e,t){return(0,o.assign)(U[t],e)})),(0,o.forIn)(U,(function(e,t){(0,o.isStringEach)(H,(function(e){return j(e.blocks)})),(0,O.$T)(U.baseTitle.types),H}));var W=H,q=n(84241),G=n(66327),X=n(6677),Y=n(1511),K=n(46720),J=n(88077),$=n(17447),Q=n(69327),ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),Object.defineProperty(t,"type",{get:function(){return z.Z.annotation},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"__type",{get:function(){return t.type},enumerable:!1tion(){return!!this._article.Annotation},t.prototype.width=function(){return(0,O.FK)()},t.prototype.measure=function(e,t,n){var i,r=this,o=this._getHeightCacheKey();o in this._cache||n.mutate((function(){i=n.getArticleElm(0).createChild("div"),r._render(i),i.elm()})).measure((function())).mutate((function(){i.remove(),i=null}))},t.prototype.render=function(e,t,n,i,r){var o=r.articleElm().createChild("div");this._render(o);var a=new Q._({elm:o.elm(),colspan:1,top:n,height:this.height(),smartFlowItemId:this._article.getId(),type:Q.W.Column,layout:r});return a.addBlock(this),e.addCell(a),a},t.prototype._render=function(e){e.addClass("col").css({position:"absolute",width:"".concat((0,O.FK)(),"px")}).append('<p class="art-annotation">').append(J.Z.replace(this._article.Annotation,this._article.Data)).append("</p>")},t.prototype.highlight=function(e){return e.elm.find("p.art-annotation").html(J.Z.replace(this._article.Annotation,this._article.Data)),this},t}(B.XY),te=ee,ne=n(60683),ie=n(77751),re=n(55193),oe=n(99144),ae=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(this,(0,i.ev)([],(0,i.CR)(t),!1))||this;return r._comment=r._article.comment(),r}return(0,i.ZT)(t,e),Object.defineProperty(t,"type",{get:function(){return z.Z.comments},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"__type",{get:function(){return t.type},enumerable:!1ilable=function(){return!!this._comment},t.prototype.width=function(){return(0,O.FK)()},t.prototype.measure=function(e,t,n){var i=this,r=this._getHeightCacheKey();if(!(r in this._cache)){var o,a=n.getSectionElm().div(),s=!1;n.mutate((function(){a.addClass("art-comments").css({position:"absolute",width:"".concat((0,O.FK)(),"px")}),o=i._render(a,!0)})).measure((function(){(s=o.find("div.text").height()>3*O.Nv)||(i._cache[r]=a.elm().outerHeight())})).mutate((function(){s?o.find("div.text").css({overflow:"hidden",height:"".concat(3*O.Nv,"px")}):(o.remove(),o=a=null)})).measure((function(){s&&(i._cache[r]=a.elm().outerHeight())})).mutate((function(){o&&(o.remove(),o=a=n(){return"h".concat(this._comment.id())},t.prototype._render=function(e,t){void 0===t&&(t=!1);var n=e.createChild("article").addClass("comment feat");n.append('<div class="meta">').append('<a href="javascript:void(0)">');var i=this._comment.author(),r=(0,ne.b_)({nickname:i.name(),imageId:i.avatarImageId(),size:ne.wC.normal,fallbackAvatarUrl:i.photoUrl(),style:"display:inline-block;max-height:100%;max-width:100%"});n.append('<span class="userphoto">').append(r).append("</span>"),n.append(" ").append('<span class="username">'.concat(this._comment.author().name(),"</span>")).append("</a>").append(" ").append('<time pubdate datetime="'.concat(this._comment.date().toISOString(),'">').concat(this._timespanString(),"</time>")).append("</div>").append('<div class="text"><p>'.concat(this._comment.body(),"</p></div>"));var o=n.render().find("div.text");return o.height()>3*O.Nv&&!t&&o.css({overflow:"hidden",height:"".concat(3*O.N(){return ie.Dr(this._comment.date(),1)},t.prototype.render=function(e,t,n,i,r){var o=this._container();this._render(o);var a=o.elm();re.ZP.bind(a,"singleTapConfirmed",this._onTap.bind(this));var s,u="h".concat(this._comment.id());s=u in this._cache?this._cache[u]:o.elm().outerHeight();var c=new Q._({elm:o,colspan:1,top:n,height:s,smartFlowItemId:this._article.getId(),type:Q.W.Column,layout:r});return c.onRemoved((function(){a&&(re.ZP.unbind(a,"singleTapConfirmed"),a=null)})),e.addCell(c),c},t.prototype._onTap=function(){var e=this._article;return oe.default.show({articleId:e.ArticleId,articleTitle:e.Title,articleSubtitle:e.Subtitle,contextProfileName:u.Z.profileId}),!1},t.prototype._container=function(){return(0,q.Oh)().section(this._article.group()).div().addClass("art-comments").css({position:"absolute",width:"".concat((0,O.FK)(),"px"),left:"-10000px",top:"-10000px"})},t}(B.XY),se=ae,ue=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),Object.defineProperty(t,"type",{get:function(){return z.Z.continuedFromLink},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"__type",{get:function(){return t.type},enumerable:!1,configurable:!0}),t.prototype.available=function(e){return!e.fromStart&&!!O.yp&&!!this._article.StartBlockIdx},t.prototype.width=function(){return(0,O.FK)()},t.prototype.height=function(){return O.Nv},t.prototype.render=function(e,t,n,i,a){var s;s=this._article.ContinuedFromPage===this._article.ContinuedFromPageName?$.ZP.format("TextView.ContinuedFromPage",this._article.ContinuedFromPage):$.ZP.format("TextView.ContinuedFrom",this._article.ContinuedFromPageName);var c=r('<a href="javascript:void(0)" class="continued" style="position:absolute;">'.concat(s,"</a>")).tap((function(e){return u.Z.current.textView.onContinuedFromClicked(o.isFunction(e.event)?e.event():e),!1})).optimizeForTransform();a.articleElm().elm().append(c);var l=new Q._({elm:c,colspan:1,top:n,height:O.Nv,smartFlowItemId:this._article.getId(),type:Q.W.Column,layout:a});return e.(e,t){return"h".concat(e,"_").concat(t)}function he(e,t,n){var i,r="string"==typeof t.Text?t.Text:null===(i=t.Text)||void 0===i?void 0:i.Text,o="";return(t.Title||r)&&(o+="<figcaption>",t.Title&&(o+="<strong>".concat(n?t.Title:J.Z.replace(t.Title,e.Data),"</strong>")),r&&(o+=" ".concat(n?r:J.Z.replace(r,e.Data))),o+="</figcaption>"),o}function pe(e){var t=e.image,n=e.width,i=e.elm,r=e.preview,o=e.forMeasure,a=e.article,s=e.cache,u=n/t.Width*100,c=Math.ceil(u),l=Math.floor(t.Width*c/100),d=Math.floor(t.Height*c/100),h=window.devicePixelRatio>1?Math.min(Math.round(c*window.devicePixelRatio),O.xC):c,p="".concat(t.Url+(t.Url.indexOf("?")>=0?"&":"?"),"scale=").concat(h);if(i.css({position:"absolute",width:"".concat(n,"px"),overflow:"hidden"}).addClass("art-pic").attr("imgid",t.Id).append("<a>").append('<img style="width:'.concat(l,"px;height:").concat(d,'px;"')),r||o||i.append(' src="'.concat(p,'" onerror="$.nd.img_onerror(this)"')),i.append(' nd_url="'.concat(t.Url,'" nd_scale="').concat(u,'" nd_uid="').concat(t.Uid||"",'"/>')),t.Byline&&i.append("<em>").append(r?t.Byline:J.Z.replace(t.Byline,a.Data)).append("</em>"),i.append("</a>").append(he(a,t,r)),!o){if(s){var f=de(t.Id,n),m=void 0;return f in s?m=s[f]:s[f]=m=i.height(),m}return i.height()}}function fe(e){var t,n=e.image,i=e.column,r=e.top,o=e.colspan,a=e.layout,s=e.article,u=e.cache,c=null!==(t=e.width)&&void 0!==t?t:(0,O.FK)(o),l=a.articleElm().createChild("figure"),d=pe({article:s,image:n,width:c,elm:l,cache:u}),h=new Q._({elm:l.elm(),colspan:o,top:r,height:d,smartFlowItemId:s.getId(),type:Q.W.Figure,layout:a});return i.addCell(h),h}function me(e){return!(e>O.$0)&&(O.$0-e>=3*O.Nv||O.$0-e<O.Nv)}var ge,ve=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(this,(0,i.ev)([],(0,i.CR)(t),!1))||this;return r.__type="imageInstance",r}return(0,i.ZT)(t,e),t.prototype.copy=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.prototype.copy.apply(this,(0,i.ev)([],(0,i.CR)(t),!1));return r._image=this._image,r},t.prototype.image=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?(this._image=e[0],this):this._image},t.prototype.expand=function(){return this._parent.instances(this._id)},t.prototype.toJSON=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.prototype.toJSON.apply(this,(0,i.ev)([],(0,i.CR)(t),!1));return r.layoutConfig.imageId=this._id,r},t}(B.oy),ye=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(this,(0,i.ev)([],(0,i.CR)(t),!1))||this;return r._article&&!(0,o.isEmpty)(r._article.Images)&&(r._images=(0,o.filter)(r._article.Images,(function(e){return!(0,o.isEmpty)(e.Url)&&e.Height>0&&e.Width>0}))),r}return(0,i.ZT)(t,e),Object.defineProperty(t,"type",{get:function(){return z.Z.image},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"__type",{get:function(){return t.type},enumerable:!1on(){return!(0,o.isEmpty)(this._images)},t.prototype.instances=function(e){var t=this;if((0,o.isEmpty)(this._images))return null;var n=[],i={};return this._imagesById||(this._imagesById={}),this._widths||(this._widths={}),(0,o.forEach)(this._images,(function(r,o){if(r.Id in t._imagesById||(t._imagesById[r.Id]=r),r.Id!==e){for(var a=0,s=0,u=1;u<=O.YD;++u){var c=i[u];c||(i[u]=c=(0,O.FK)(u));var l=Math.round(100*c/r.Width);if(l>O.xC)break;if(!me(Math.round(r.Height*l/100)))break;a?s=c:a=s=c}a&&(t._widths[r.Id]={min:a,max:s},n.push(new ve(t,r.Id).image(r).idx(o)))}})),n.length?((0,o.includes)(this._config.restrictions,"preserveOrder")||e||n.sort((function(e,t){var n=e.image(),i=t.image();return i.Width*i.Height-n.Width*n.Height})),n):null},t.prototype.width=function(e){return this._widths[e]},t.prototype.measure=function(e,t,n){for(var r=this,o=[],a=1;a<=t;++a){var s=(0,O.FK)(a),u=this._widths[e];if(s>=u.min&&s<=u.max){var c=this._getHeightCacheKey(e,a);if(c in this._cache)continue;o.push({colspan:a,key:c})}}if(o.length){var l=[];n.mutate((function(){var t,a,s=n.getArticleElm(0),u=r._imagesById[e];try{for(var c=(0,i.XA)(o),d=c.next();!d.done;d=c.next()){var h=d.value,p=h.colspan,f=h.key,m=s.createChild("figure");pe({article:r._article,image:u,width:(0,O.FK)(p),elm:m,cache:r._cache,preview:!0,forMeasure:!0}),m.elm(),l.push({elm:m,key:f})}}catch(e){t={error:e}}finally{try{d&&!d.done&&(a=c.return)&&a.call(c)}finally{if(t)throw t.error}}})).measure((function(){var e,t;try{for(var n=(0,i.XA)(l),o=n.next();!o.done;o=n.next()){var a=o.value,s=a.elm,u=a.key;r._cache[u]=s.height()}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}})).mutate((function(){var e,t;try{for(var n=(0,i.XA)(l),r=n.next();!r.done;r=n.next())r.value.elm.remove()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}l=null}))}},t.prototype._getHeightCacheKey=function(e,t){return de(e,(0,O.FK)(t))},t.prototype.highlight=function(e){var t=e.elm,n=this._imagesById[t.attr("imgid")];t.find("figcaption").replaceWith(he(this._article,n))},t.prototype.render=function(e,t,n,i,r){var o=fe({article:this._article,image:this._imagesById[t],column:e,top:n,colspan:i,layout:r,cache:this._cache});return o.addBlock(this),o},t.prototype.apply=function(e,t,n){return n.config().imageId=e,this},t.prototype.estimateLinesCount=function(e){return(0,o.isEmpty)(this._images)?0:(0,o.chain)(this._images).map((function(t){for(var n={w:0,h:0,s:0},i=[],r=1;r<=e;++r)i[r]=(0,O.FK)(r);for(r=e;r>0;--r){var o=i[r],a=Math.round(100*o/t.Width);if(!(a>O.xC)){var s=Math.round(t.Height*a/100);if(me(s)){var u=o*s;u>n.s&&(n={w:o,h:s,s:u})}}}return Math.ceil(n.h/O.Nv)*Math.round(n.w/O.G4)})).max().value()},t}(B.XY),_e=ye,be=n(82653),we=n(77261),Ce=n(40605),Ie=n(43389),Pe=n(43245),xe=n(37531),Se=n(55895),Te=n(31628),ke=n(50109),Ae="isVideoSupported",Ee=function(e){void 0===e&&(e=null);var t=ke.Z.get(Ae);return void 0!==t?Promise.resolve(t):Ie.v.video?(e?Promise.resolve(e):c.Z.getAsync("video.emptyMp4")).then((function(e){return function(e){var t=document.createElement("video"),n=t.style;n.position="absolute",n.height=0,n.width=0,t.setAttribute("autoplay",""),t.style.cssText="display:none";try{if(!Ie.v.video.h264)return null;var i=document.createElement("source");i.type="video/mp4",i.src=e,t.appendChild(i)}catch(e){return null}return t}(e)})).then((function(e){return null===e?(ke.Z.set(Ae,!1),Promise.resolve(!1)):(t=e,new Promise((function(e,n){document.documentElement.appendChild(t),setTimeout((function(){var scribe((function(){i=!0,o.unsubscribe()})),a=(0,xe.F)(1e3).pipe((0,Se.q)(1),(0,Te.R)(r)).subscribe(void 0,n,(function(){var n=i||t.currentTime>0;ke.Z.set(Ae,n),(function(){t.parentNode.removeChild(t)})));var t})):(ke.Z.set(Ae,!1),Promise.resolve(!1))};function Zee&&(ge=!1,Ee().then((function(e){ge=!!e}))),ge}var Me,De="currentColumnChanged",Le=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(this,(0,i.ev)([],(0,i.CR)(t),!1))||this;return r.__type="videoInstance",r}return(0,i.ZT)(t,e),t.prototype.copy=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.prototype.copy.apply(this,(0,i.ev)([],(0,i.CR)(t),!1));return rgth?(this._video=e[return this._parent.instances(this._id)},t.prototype.toJSON=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.prototype.toJSON.apply(this,(0,i.ev)([],(0,i.CR)(t),!1));return r.layoutConfig.vidnull!==e&&e.apply(this,arguments)||this}return(0,i.ZT)("type",{get:function(){return z.Z.video},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"__type",{get:function(){return t.type},enumerable:!1urn!(0,o.isEmpty)(this._article.Videos)},t.prototype.instances=function(e){var t=this;if((0,o.isEmpty)(this._article.Videos))return null;var n=[],i={};return this._videos||(this._videos={}),this._widths||(this._widths={}),(0,o.forEach)(this._article.Videos,(function(r,o){if(r.Id="".concat(t._article.Id,"_").concat(o),r.Id in t._videos||(t._videos[r.Id]=r),r.Id!==e){for(var a=0,s=0,u=1;u<=O.YD;++u){var c=i[u];c||(i[u]=c=(0,O.FK)(u));var l=Math.round(100*c/r.Width);if(l>O.cX)break;var d=Math.round(r.Height*l/100);if(u>1&&!t._isValidVideoHeight(d))break;a?s=c:a=s=c}a&&(t._widths[r.Id]={min:a,max:s},n.push(new Le(t,r.Id).video(r).idx(o)))}})),n.length?((0,o.includes)(this._config.restrictions,"preserveOrder")||n.sort((function(e,t){var n=e.video(),i=t.video();return i.Width*i.Height-n.Widtidth=function(e){return this._widths[e]},t.prototype._isValidVideoHeight=function(e){return O.$0-e>=3*O.Nv||O.$0-e<O.Nv},t.prototype.measure=function(e,t,n){for(var r=this,o=this._widths[e],a=[],s=1;s<=t;++s){var u=(0,O.FK)(s);if(u>=o.min&&u<=o.max){var c=this._getHeightCacheKey(e,s);if(c in this._cache)continue;a.push({key:c,colspan:s})}}if(a.length){var l=[];n.mutate((function(){var t,o,s=r._videos[e],u=n.getArticleElm(0);try{for(var c=(0,i.XA)(a),d=c.next();!d.done;d=c.next()){var h=d.value,p=h.key,f=h.colspan,m=u.createChild("figure");r._render(s,f,m,!0,!0),m.elm(),l.push({key:p,elm:m})}}catch(e){t={error:e}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(t)throw t.error}}})).measure((function(){var e,t;try{for(var n=(0,i.XA)(l),o=n.next();!o.done;o=n.next()){var a=o.value,s=a.key,u=a.elm;r._cache[s]=u.height()}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}})).mutate((function(){var e,t;try{for(var n=(0,i.XA)(l),r=n.next();!r.done;r=n.next())r.value.elm.remove()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}l=(e,t){return"h".concat(e,"_").concat(t)},t.prototype._render=function(e,t,n,i,r,o){var a=100*(0,O.FK)(t)/e.Width,s=Math.round(e.Width*a/100),c=Math.ceil(a),l=Math.floor(e.Width*c/100),d=Math.floor(e.Height*c/100);if(n.css({position:"absolute",width:"".concat(s,"px"),overflow:"hidden"}).addClass("art-video").attr("video-id",e.Id).attr("data-name","art-vid").append('<div id="'.concat(e.Id,"_").concat(o,'_player" style="width:').concat(l,"px;height:").concat(d,'px"></div>')).append('<div id="'.concat(e.Id,"_").concat(o,'_wrapper" style="height:').concat(d,'px;" class="art-video-scrollfix"></div>')).append(this._captionHtml(e,i)),!r){var h=n.elm();this._textView=u.Z.current.textView,this._addPlayer(e,h,l,d,o).catch(X.Z.error),this._cache["".concat(e.Id,"_").concat(o,"_fulunction(){return Ce.ZP.freeze(e)}),150)}));var p="h".concat(e.Id,"_").concat(o,"_").concat(t),f=void 0;return p in this._cache?f=this._cache[p]:this._cache[p]=f=n.height(),f}},t.prototype._addPlayer=function(e,t,n,i,r){var o=this,a=t.find("#".concat(e.Id,"_").concat(r,"_player")),s=t.find("#".concat(e.Id,"_").concat(r,"_wrapper"));return we.Z.getPlayer(e.Url,a.get(0),{width:n,height:i,playerVars:{rel:0,showinfo:0}}).then((function(t){return o._cache["".concat(e.Id,"_").concat(r,"_player")]=t,o._addPlayerEvents(t,e,s,i,r),t}))},t.prototype._addPlayerEvents=function(e,t,n,i,o){var a=this;e.on("play",(function(){Me&&Me.pause().catuse stop",(function(){Me===e&&(Me=null)})),n.tap((function(){e.isPlaying?e.pause().catch(X.Z.error):Ze()?e.play().then((function(){return n.css({height:"".concat(i-50,"px")})})).catch(X.Z.error):a._openPopup(t.Url).catch(X.Z.error)})),Ze()&&(this._cache["".concat(t.Id,"_").concat(o,"_pauseOnScroll")]=function(){if(e.isPlaying){var n=r("#".concat(t.Id,"_").concat(o,"_player"))[0].getBoundingClientRect(),i=window.innerWidth||document.documentElement.clientWidth;(n.left<0||n.left>i)&&e.pause().catch(X.Z.error)}},K.Z.bind(this._textView,De,null,this._cache["".concat(t.Id,"_").concat(o,"_pauseOnScroll")]))},t.prototype._openPopup=function(e){var t=r('<div class="pigal" style="z-index:3"><div class="pigal-topbar">'+'<a href="javascript:void(0)" class="pigal-btn b-close"><span>'.concat($.ZP.get("Buttons.Close"),"</span></a>")+'</div><div class="player" /></div>').appendTo(document.body),n=r(window);return we.Z.getPlayer(e,t.find(".player").get(0),{width:n.width(),height:n.height(),playerVars:{rel:0,showinfo:0}}).then((function(e){var n=".pigal-btn.b-close",i=functionunction(){t.off("click",n,i),t.remove()}))};return t.on("click",n,i),t}))},t.prototype._captionHtml=function(e,t){if(!e)return"";var n=null!==e.Text&&(0,o.isObject)(e.Text)?e.Text.Text:e.Text,i="";return(e.Title||n)&&(i+="<figcaption>",e.Title&&(i+="<strong>".concat(t?e.Title:J.Z.replace(e.Title,this._article.Data),"</strong>")),n&&(i+=" ".concat(t?n:J.Z.replace(n,this._article.Data))),i+="</figcaption>"),i},t.prototype.highlight=function(e){var t=e.elm,n=this._videos[t.attr("video-id")];t.find("figcaption").replaceWith(this._captionHtml(n))},t.prototype.render=function(e,t,n,i,r){var o=(new Date).getTime(),a=r.articleElm().createChild("figure"),s=this._videos[t],u=this._render(s,i,a,!1,!1,o),c=new Q._({elm:a.elm(),colspan:i,top:n,height:u,smartFlowItemId:this._article.getId(),type:Q.W.Figure,layout:r});return c.addBlock(this),c.onRemoved(this.dispose.bind(this,o)),e.addCell(c),c},t.prototype.dispose=function(e){var t=this;(0,o.forIn)(this._videos,(function(n){t._cache["".concat(n.Id,"_").concat(e,"_fullscreen")]&&(t._cache["".concat(n.Id,"_").concat(e,"_fullscreen")].unsubscribe(),delete t._cache["".concat(n.Id,"_").concat(e,"_fullscreen")]),t._cache["".concat(n.Id,"_").concat(e,"_pauseOnScroll")]&&(K.Z.unbind(t._textView,De,t._cache["".concat(n.Id,"_").concat(e,"_pauseOnScroll")]),delete t._cache["".concat(n.Id,"_").concat(e,"_pauseOnScroll")]);var i=t._cache["".concat(n.Id,"_").concat(e,"_player")];i&&(Me===i&&(Me=null),i.destroy().catch(X.Z.error),delete t._cache["".concat(n.Id,"_").concat(e,"_player")])}))},t.prototype.apply=function(e,t,n){return n.config().videoId=e,this},t.prototype.estimateLinesCount=function(e){var t=this,n=(0,o.filter)(this._article.Videos,(function(e){return e.Width}));return(0,o.isEmpty)(n)?0:(0,o.chain)(n).map((function(n){for(var i={w:0,h:0,s:0},r=[],o=1;o<=e;++o)r[o]=(0,O.FK)(o);for(o=e;o>0;--o){var a=r[o],s=Math.round(100*a/n.Width);if(!(s>O.cX)){var u=Math.round(n.Height*s/100);if(t._isValidVideoHeight(u)){var c=a*u;c>i.s&&(i={w:a,h:u,s:c})}}}return Math.ceil(i.h/O.Nv)*Math.round(i.w/O.G4)})).max().value()},t.canRender=function(e){return we.Z.playerExists(e)},t}(B.XY),Re=Ne,Ve=n(11569),Be=n(34336),Fe=n(24458),Oe=n(70263),ze=n(41723),Ue=n(88769),He=n(25747),je=n(18187),We=n(67687),qe=n(2099),Ge={};function Xe(e){return u.Z.current.textView.onReadMoreClicked((0,o.isFunction)(e.event)?e.event():e),!1}function Ye(e){return t=e.target,n=function(e){for(;e;){var t=(0,o.isFunction)(e.getAttribute)&&e.getAttribute("aid");if(t)return t;e=e.parentNode}return null}(t),n?u.Z.current.textView.controller.dataFeedManager().getArticleById(n):null;var t,n}function Ke(e){var t=Ye(e);return t&&oe.default.show({articleId:t.ArticleId,articleTitle:t.Title,contextProfileName:u.Z.profileId}),!1}function Je(e){var t=Ye(e);return t&&Be.Z.goView(Fe.n3.Similar,{type:"similar",similarArticleId:t.ArticleId,issueId:t.Issue.Id,articleTitle:t.Title,issueTitle:t.Issue.title(),articleDate:t.Issue.Date,articleShortDate:t.Issue.ShortDateString,similarArticlesCount:t.similarArticlesCount()}),!1}function $e(e){var t=Ye(e);return t&&Be.Z.goView(Fe.n3.PagesView,{issue:t.Issue.Id,page:t.Page}),!1}function Qe(e){var t=Ye(e);return t&&Be.Z.goView(Fe.n3.Profile,{profileId:t.Source.ChannelId}),!1}function et(e){return u.Z.current.textView.onToolsClicked((0,o.isFunction)(e.event)?e.event():e),!1}function tt(e){var t=r(e.target).closest("[data-thumb-bookmark]"),n=t.attr("issueId"),i=t.attr("bookmarkId"),o=t.attr("pageNo"),a=t.attr("bookmarkButtonLocked");if(e.preventDefault(),e.stopPropagation(),n&&!a){var s={bookmarkType:Ue.Vg.pages,pageNumbers:[o||1],issue:n,bookmarkId:i};ze.Z.show({bookmarkContext:s})}return!1}function nt(){var e=(0,q.Oh)().parent();e._commentsElmRegistred||(e.tap("a.lbl-comment",Ke),e._commentsElmRegistred=!0),e._titleElmRegistred||(e.tap('hgroup>h1[data-article-title="true"]',Xe),e._titleElmRegistred=!0),e._sourceElmRegistred||(e.tap("li.art-source>a, li.art-date>a",$e),e._sourceElmRegistred=!0),e._similarElmRegistred||(e.tap("li.art-similar>a",Je),e._similarElmRegistred=!0),e._userElmRegistred||(e.tap("a.art-user",Qe),e._userElmRegistred=!0),e._titleToolButtonRegistered||(e.tap(".art-options-call",et),e.tap("span[data-thumb-bookmark]",tt),Oe.bookmarkCreateSubscription.pipe((0,Ve.h)((function(e){return e.data&&e.data.articleId}))).subscribe((function(e){return function(e){var t=e.articleId,n=(0,q.Oh)().parent();if(n&&t){var i=n.find(".art-options-call[articleId=".concat(t,"]"));i.length<1||i.addClass("bookmarked").attr("bookmarkId","bookmarked")}}(e.data)})),Oe.btion(e){return e.data&&e.data.articleId}))).subscribe((function(e){return function(e){var t=e.articleId;if(t){var n=(0,q.Oh)().parent().find(".art-options-call[articleId=".concat(t,"]"));n.length<1||n.removeClass("bookmarked").removeAttr("bookmarkId")}}(e.data)})),e._titleToolButtonRegistered=!0)}var it,rt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),t.prototype.render=function(t,n){for(var r=this,o=[],a=2;a<arguments.length;a++)o[a-2]=arguments[a];var s=e.prototype.render.apply(this,(0,i.ev)([t,n],(0,i.CR)(o),!1)),u=this.article();return this.ensureCommentsCountInited(u.PostsCount),this._onCommentsMetaUpdatedUnsubscribe=He.Z.onCommentsMetaUpdated((function(e,t,n){parseInt(t.articleId,10)===parseInt(r.article().Id,10)&&r.onCommentMetaUpdatedHandler(n)})),this._onVotesMetaUpdatedUnsubscribe=je.Z.onVotesMetaUpdated(je.Z.contentTypes.ARTICLE,(function(e,t,n){parseInt(t,10)===parseInt(r.article().Id,10)&&r.onVoteMetaUpdatedHandler(n)})),tInited=function(){this._cell.elm&&nt()},t.prototype.onVoteUpdatedHandler=function(e){if(this._cell){var t=this._cell.elm;if(t){var n=t.find("a.lbl-comment");e.Likes-e.Dislikes<0&&!n.hasClass("neg")?n.addClass("neg"):n.removeClass("neg")}}},t.prototype.onCommentMetaUpdatedHandler=function(e){var t=this.elm().find(".lbl-comment");t.length&&((this.article()||{}).PostsCount=e.commentsCount,t.find("em").text(e.commentsCount>0?e.commentsCount:""),t.css("visibility",e.commentsCount>0?"visible":"hidden"))},t.prototype.onVoteMetaUpdatedHandler=function(e){var t=this.elm().find(".lbl-comment");if(t.length){var n=this.article()||{};t.toggleClass("neg",e.dislikesCount>e.likesCount),n.LikeItVotes=e.likesCount,n.HateItVotes=e.dislikesCount}},t.prototype.onCellRemoved=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e.prototype.onCellRemoved.apply(this,(0,i.ev)([],(0,i.CR)(t),!1)),this._onCommentsMetaUpdatedUnsubscribe(),this._onVotesMetaUpdatedUnsubscribe()},t.prototype.articleType=function(){return this._id.type()},t.prototype.toJSON=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.prototype.toJSON.apply(this,(0,i.ev)([],(0,i.CR)(t),!1));return r.layoutConfig.titleType=this._id.type(),r},t}(B.oy),ot=function(){function e(e){this.value=e?Number(e):0}return e.prototype._do=function(e,t){return void 0===t?!!(this.value&e):(t?this.value|=e:this.value&=~e,this)},e.prototype.enableSubtitle=function(e){return this._do(1,e)},e.prototype.enableByline=function(e){return this._do(2,e)},e.prototype.titleOnly=function(e){return this._do(4,e)},e.prototype.hyphenateTitle=function(e){return this._do(8,e)},e.prototype.forceCommentsCount=function(e){return this._do(16,e)},e.prototype.ignoreHeight=function(e){return this._do(32,e)},e.prototype.disableHighlight=function(e){return this._do(64,e)},e.prototype.type=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?(this.value|=e[0]<<8,this):this.value>>8},e.prototype.copy=function(){return new e(this.value)},e.prototype.toString=function(){return String(this.value)},e}(),at=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),t.prototype.width=function(e){var t="w".concat(e);if(t in this._cache)return this._cache[t];throw new Error("Cannot get width before measuring.")},t.prototype._elmsForWidth=function(e,t){var n=t.createChild("header");this._render(n,0,e.copy().hyphenateTitle(!0).forceCommentsCount(!0).ignoreHeight(!0).disableHighlight(!0).titleOnly(!0),!0),n.elm();var i=t.createChild("header");this._render(i,0,e.copy().hyphenateTitle(!1).forceCommentsCount(!0).ignoreHeight(!0).disableHighlight(!0).titleOnly(!0),!0);var r=t.createChild(i.elm()[0].cloneNode(!0));return n.css({width:"1px","overflow-x":"auto"}),i.css({width:"1px","overflow-x":"auto"}),r.css("white-space","nowrap"),[n,i,r]},t.prototype._elmForHeight=function(e,t,n){var i=e.createChild("header");return this._render(i,n,t.copy().forceCommentsCount(!0).ignoreHeight(!0).disableHighlight(!0),!0),i.append('<p style="height:0px;overflow:hidden;">a</p>').elm(),i},t.prototype.measure=function(e,t,n){var r,o,a=this,s=e.type(),u=n,c="w".concat(e);c in this._cache?r=this._cache[c]:(u=u.mutate((function(){o=a._elmsForWidth(e,n.getArticleElm(s))})).measure((function(){r=a._cache[c]={min:o[0].elm()[0].scrollWidth,mid:o[1].elm()[0].scrollWidth,max:o[2].elm().width()},s in Ge||(Ge[s]=o[2].elm().find("a.lbl-comment").width())}))).mutate((function(){var e,t;try{for(var n=(0,i.XA)(o),r=n.next();!r.done;r=n.next())r.value.remove()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}o=null}));var l=[];if(s<0)(h="h".concat(e,"_1"))in this._cache||l.push({key:h,colspan:1});else for(var d=1;d<=t;++d)if(d>1||!s){var h;if((h="h".concat(e,"_").concat(d))in this._cache)continue;l.push({key:h,colspan:d})}l.length&&u.mutate((function(){var t,r,o=n.getArticleElm(s);try{for(var u=(0,i.XA)(l),c=u.next();!c.done;c=u.next()){var d=c.value,h=d.colspan,p=d.elm=a._elmForHeight(o,e,h),f=a._adjustedTitleWidth(e,h);f&&p.elm().find("h1").css("width","".concat(f,"px"))}}catch(e){t={error:e}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}})).measure((function(){var t,n,o=e.hyphenateTitle()?r.min:r.mid;try{for(var s=(0,i.XA)(l),u=s.next();!u.done;u=s.next()){var c=u.value,d=c.key,h=c.elm,p=c.colspan;a._cache[d]=o>(0,O.FK)(p)?void 0:h.elm().height()}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}})).mutate((function(){var e,t;try{for(var n=(0,i.XA)(l),r=n.next();!r.done;r=n.next())r.value.elm.remove()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}l=null}))},t.prototype._render=function(e,t,n,i){if(e){e.css("position","absolute").attr("flag",n),t&&e.css("width","".concat((0,O.FK)(t),"px"));var r=n.hyphenateTitle()?this._article.HyphenatedTitle:this._article.Title;e.append("<hgroup>").append('<h1 data-article-title="true" -nd-tap-highlight-class-name="active"');var o=this._adjustedTitleWidth(n,t);if(o&&e.append(' style="width:'.concat(o,'px;"')),e.append(">").append(n.disableHighlight()?r:J.Z.replace(r,this._article.Data)),O.Q8&&this._renderCommentsBubble(e,n),e.append("</h1>"),i||nt(),n.enableSubtitle()&&!n.titleOnly()&&this._renderSubtitle(e,n),e.append("</hgroup>"),n.enableByline()&&!n.titleOnly()&&this._renderByline(e,n),O.KW&&!qe.Z.isIssueRestrictedBy("Bookmarks")&&this._renderBookmarkButton(e,i),n.ignoreHeight())return null;var a,s="h".concat(n,"_").concat(t);return s in this._cache?a=this._cache[s]:this._cache[s]=a=e.checkpoint(),e.checkpoint(a),a}},t.prototype._renderCommentsBubble=function(e,t){var n=this._article.HateItVotes>this._article.LikeItVotes?" neg":"",i=this._article.PostsCount?"":"visibility:hidden;",r=this._article.PostsCount?this._article.PostsCount:t.forceCommentsCount()?"0":"";return e.append('<a class="lbl-comment'.concat(n,'"\n                       href="javascript:void(0)"\n                       style="margin-left:10px;').concat(i,'"><em>').concat(r,"</em></a>"))},t.prototype._adjustedTitleWidth=function(e,t){if(!e.ignoreHeight()){var n=e.type(),i="w".concat(e);if(n in Ge&&i in this._cache){var r=(0,O.FK)(t),o=Ge[n],a=this._cache[i].max;if(r>=a&&r-a<=2*o)return r-2*o}}},t.prototype._renderSubtitle=function(e,t){this._article.Subtitle&&e.append("<h2>").append(t.disableHighlight()?this._article.Subtitle:J.Z.replace(this._article.Subtitle,this._article.Data)).append("</h2>")},t.prototype._renderByline=function(e,t){if(this._article.Source){var n=(0,ne.b_)({nickname:this._article.Source.CreatorName,size:ne.wC.large,fallbackAvatarUrl:this._article.Source.IconUrl}),i=$.ZP.formatDate(new Date(this._article.Source.Created),"date","d MMM yyyy");e.append('<a href="javascript:void(0)" class="user featuser art-user">').append('<div class="user-media">').append('<div class="user-item-in">').append('<span class="userphoto">').append(n).append("</span>").append("</div>").append("</div>").append('<div class="user-meta">').append('<div class="user-item-in">').append('<span class="username">'.concat(this._article.Source.CreatorName,"</span>")).append('<span class="meta">'.concat(i,"</span>")).append("</div>").append("</div>").append("</a>")}else{var r=this._article.similarArticlesCount();(this._article.Byline||O.Sn||O.it&&r)&&(e.append('<ul class="art-byline">'),this._article.Issue&&O.Sn&&e.append('<li class="art-source">').append('<a href="javascript:void(0)">').append(t.disableHighlight()?this._article.Issue.title():J.Z.replace(this._article.Issue.title(),this._article.Data)).append("</a>").append("</li>").append('<li class="art-date">').append('<a href="javascript:void(0)">').append('<time datetime="'.concat(this._article.Issue.Date,'" pubdate>')).append(this._article.Issue.DateFormatted).append("</time>").append("</a>").append("</li>"),O.it&&r&&e.append('<li class="art-similar">').append('<a href="javascript:void(0)">').append('<span title="'.concat($.ZP.format("TextView.SimilarArticlesCountTooltip",r),'">')).append($.ZP.format("TextView.SimilarArticlesCount",r)).append("</span>").append("</a>").append("</li>"),this._article.Byline&&e.append('<li class="art-author">').append(t.disableHighlight()?this._article.Byline:J.Z.replace(this._article.Byline,this._article.Data)).append("</li>"),nt(),e.append("</ul>"))}},t.prototype._renderBookmarkButton=function(e,t){var n,i=this._article.BookmarkId&&(null===(n=this._article.Collections)||void 0===n?void 0:n.length)>0;e.append('<a class="art-options-call'.concat(i?" bookmarked":"",'"')),t||(e.append(' href="javascript:void(0)" articleId="'.concat(this._article.Id,'"')),i&&e.append(' bookmarkId="'.concat(this._article.BookmarkId,'"'))),e.append("><span></span></a>"),nt()},t.prototype.height=function(e,t){var n=this._getHeightCacheKey(e,t),i=e;if(n in this._cache)return this._cache[n];if(i.type()>0&&1===t)return this._cache[n]=void 0;var r=new We.e;return this.measure(e,t,r),r.execute(),this._cache[n]||0},t.prototype.apply=function(e,t,n){var i=e.type();return n.config().titleType=i,this},t.prototype.render=function(e,t,n,i,r){var o=r.articleElm().removeClass("art-t2 art-t3 art-t4 art-t5 art-stack"),a=t.copy(),s=a.type(),u=this._config.types[s];u&&o.addClass(u),(s<0||r.config().titleType<0)&&o.addClass("art-stack");var c=o.createChild("header");r.config().titleType<0&&a.type(-1);var l=this._render(c,i,a),d=new Q._({elm:c.render(),colspan:i,top:n,height:l,smartFlowItemId:this._article.getId(),type:Q.W.Header,layout:r});return d.addBlock(this),e.addCell(d),d},t.prototype.highlight=function(e){var t=e.elm,n=new ot(t.attr("flag")),i=t.find("hgroup > h1");if(i.length){var r=i.find("a.lbl-comment").detach();i.html(J.Z.replace(n.hyphenateTitle()?this._article.HyphenatedTitle:this._article.Title,this._article.Data)).append(r)}if(this._article.Subtitle){var o=t.find("h2");o.length&&o.html(J.Z.replace(this._article.Subtitle,this._article.Data))}if(this._article.Issue&&O.Sn){var a=t.find("li.art-source>a");a.length&&a.html(J.Z.replace(this._article.Issue.title(),this._article.Data))}if(this._article.Byline){var s=t.find("li.art-author");s.length&&s.html(J.Z.replace(this._article.Byline,this._article.Data))}},t.prototype._getHeightCacheKey=function(e,t){return"h".concat(e,"_").concat(t)},t}(B.XY),st={getMaxType:function(e){if(!("_maxType"in e)){var t=Math.round(2*(Math.tan(Math.PI*((e.SecNormRate||e.NormRate)-.5)/2)+1));t>0&&this.isUpperCase(e.Title)&&--t,e._maxType=t}return e._maxType},isUpperCase:function(e){if(!e||!e.length)return!1;var t=!0;return(0,o.forEach)(e,(function(e){if(e!==e.toUpperCase())return t=!1,!1})),t},isTitleHyphenated:function(e){return"_isTitleHyphenated"in e||(e._isTitleHyphenated=e.HyphenatedTitle&&e.HyphenatedTitle!==e.Title),e._isTitleHyphenated}},ut=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),Object.defineProperty(t,"type",{get:function(){return z.Z.fullTitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"__type",{get:function(){return t.type},enumerable:!1,configurable:!0}),t.prototype.available=function(){return!!this._article.Title},t.prototype.instances=function(){var e=this,t=st.getMaxType(this._article),n=[],i=this._config.types;return(0,o.forIn)(i,(function(i,r){r>t||n.push(new rt(e,(new ot).type(r).enableSubtitle(!0).enableByline(!0)))})),0 in i||n.push(new rt(this,(new ot).enableSubtitle(!0).enableByline(!0))),st.isTitleHyphenated(this._article)&&n.push(new rt(this,(new ot).enableSubtitle(!0).enableByline(!0).hyphenateTitle(!0))),n.push(new rt(this,(new ot).type(-1).enableSubtitle(!0).enableByline(!0))),st.isTitleHyphenated(this._article)&&n.push(new rt(this,(new ot).type(-1).enableSubtitle(!0).enableByline(!0).hyphenateTitle(!0))),n},t}(at),ct=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),Object.defineProperty(t,"type",{get:function(){return z.Z.title},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"__type",{get:function(){return t.type},enumerable:!1,configurable:!0}),t.prototype.available=function(){return!!this._article.Title},t.prototype.instances=function(){var e=this,t=st.getMaxType(this._article);this._article.Subtitle&&t>3&&(t=3);var n=[],i=this._config.types;return(0,o.forIn)(i,(function(i,r){r>t||n.push(new rt(e,(new ot).type(r).titleOnly(!0)))})),0 in i||n.push(new rt(this,(new ot).titleOnly(!0))),st.isTitleHyphenated(this._article)&&n.push(new rt(this,(new ot).titleOnly(!0).hyphenateTitle(!0))),n.push(new rt(this,(new ot).type(-1).titleOnly(!0))),st.isTitleHyphenated(this._article)&&n.push(new rt(this,(new ot).type(-1).titleOnly(!0).hyphenateTitle(!0))),n},t}(at),lt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),Object.defineProperty(t,"type",{get:function(){return z.Z.subtitle},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"__type",{get:function(){return t.type},enumerable:!1,configurable:!0}),t.prototype.available=function(){return!!this._article.Source||!!this._article.Subtitle||!!this._article.Byline||O.Sn&&!!this._article.Issue},t.prototype.measure=function(e,t,n){var i,r=this,o=this._getHeightCacheKey();o in this._cache||n.mutate((function(){i=n.getArticleElm(0).createChild("div"),r._render(i,new ot,!0),i.elm()})).measure((function(){r._cache[o]=i.elm().height()})).mutate((function(){i.remove(),i=null}))},t.prototype.width=function(){return(0,O.FK)()},t.prototype.apply=function(){return this},t.prototype._render=function(e,t,n){if(e.addClass("col").css({position:"absolute",width:"".concat((0,O.FK)(),"px")}),this._renderSubtitle(e,t),this._renderByline(e,t,n),!n){var i=void 0;return"h"in this._cache?i=this._cache.h:this._cache.h=i=e.checkpoint(),e.checkpoint(i),i}},t.prototype.render=function(e,t,n,i,r){var o=r.articleElm().createChild("div"),a=this._render(o,(new ot).type(r.config().titleType)),s=new Q._({elm:o.render(),colspan:1,top:n,height:a,smartFlowItemId:this._article.getId(),type:Q.W.Header,layout:r});return s.addBlock(this),e.addCell(s),s},t.prototype._getHeightCacheKey=function(){return"h"},t}(at),dt=n(64009),ht=n(14581),pt="height",ft=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),Object.defineProperty(t,"type",{get:function(){return z.Z.related},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"__type",{get:function(){return t.type},enumerable:!1Related&&this._article.Related.length>0},t.prototype.width=function(){return(0,O.FK)(2)},t.prototype.measure=function(e,t,n){var i,r=this;pt in this._cache||n.mutate((function(){i=n.getArticleElm(0).createChild("div"),r._render(i,!0),i.elm()})).measure((function(){r._cache[pt]=i.elm().height()+r.padding})).mutate((function(){i.remove(),i=null}))},t.prototype.render=function(e,t,n,i,r){var o=r.articleElm().createChild("div"),a=this._render(o),s=new Q._({elm:o.elm(),colspan:2,top:n,height:a,smartFlowItemId:this._article.getId(),type:Q.W.Column,layout:r});return s.addBlock(this),s.onRemoved(this.dispose.bind(this)),e.addCell(s),s},t.prototype._getHeightCacheKey=function(){return pt},t.prototype._render=function(e,t){var n=this._article.Related.map((function(e){var t=(0,ht.xr)(e.IssueKey),n=$.ZP.formatDate(t,"v7.Client.DateFormat.Issue","d MMM yyyy");return'<li class="relstory">\n                <article class="art" data-issuekey="'.concat(e.IssueKey,'" data-articleid="').concat(e.Id,'" data-country="').concat(e.Country,'"\n                    data-newspaper="').concat(e.NewspaperWebName,'" data-issuedate="').concat(e.IssueDate,'">\n                    <h1>').concat(e.Title,'</h1>\n                    <ul class="art-byline">\n                        <li class="art-source">').concat(e.NewspaperName,'</li>\n                        <li class="art-date">').concat(n,"</li>\n                    </ul>\n                </article>\n            </li>")})).join("");if(e.css({position:"absolute",width:"".concat(this.width(),"px"),overflow:"hidden"}).append('<div class="art-relstories is-display is-list">\n                    <header>\n                        <h1>'.concat($.ZP.val("RelatedStoriesBlock.Title"),"</h1>\n                    </header>\n                    <ul>\n                        ").concat(n,"\n                    </ul>\n            </div>")),!t){this._cache.element=e.elm(),re.ZP.bind(this._cache.element.find(".relstory .art-byline"),"singleTapConfirmed",this._issueTap),re.ZP.bind(this._cache.element.find(".relstory h1"),"singleTapConfirmed",this._articleTap);var i=void 0;return pt in this._cache?i=this._cache[pt]:this._cache[pt]=i=e.checkpoint()+this.padding,e.checkpoint(i),i}return null},Object.defineProperty(t.prototype,"padding",{get:function(){return 24},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._cache.element&&(re.ZP.unbind(this._cache.element.find(".relstory .art-byline"),"singleTapConfirmed"),re.ZP.unbind(this._cache.element.find(".relstory h1"),"singleTapConfirmed"),delete this._cache.element),delete this._cache[pt]},t.prototype._issueTap=function(e){var t=e.element().closest(".art").data("issuekey");Be.Z.goView(Fe.n3.TextView,{issue:t})},t.prototype._articleTap=function(e){var t=e.element().closest(".art"),n=t.data("country"),i=t.data("newspaper"),r=t.data("issuedate"),o=t.data("articleid"),a=t.data("issuekey");Be.Z.goView(Fe.n3.TextView,{country:n,newspaper:i,issueDate:r,articleId:o,itemId:o,issue:a,viewName:Fe.n3.TextView,expanded:!0})},t}(B.XY),mt=ft,gt=n(48604),vt="adHeight",yt="olumnChangeHandler",_t="currentColumnChanged",bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,i.ZT)(t,e),Object.defineProperty(t,"type",{get:function(){return z.Z.ad},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"__type",{get:function(){return t.type},enumerable:!1,configurable:!0}),t.prototype.available=function(){return c.Z.get("ad.enabled")},t.prototype.width=function(){return(0,O.FK)(2)},t.prototype.measure=function(e,t,n){var i,r,o=this;vt in this._cache||n.mutate((function(){i=n.getArticleElm(0).createChild("div"),r=o._render(null,i,!0),i.elm()})).measure((function(){o._headerHeight=i.elm().find(".sfu-ad-header").height(),o._cache[vt]=o._headerHeight+r})).mutate((function(){i.remove(),i=null}))},t.prototype.render=function(e,t,n,i,r){var o=r.articleElm().createChild("div"),a=this._render(e,o),s=new Q._({elm:o.elm(),colspan:2,top:n,height:a,smartFlowItemId:this._article.getId(),type:Q.W.Column,layout:r});return s.addBlock(this),s.onRemoved(this.dispose.bind(this)),e.addCell(s),s},t.prototype._getHeightCacheKey=function(){return vt},t.prototype._render=function(e,t,n){var r=this,o=(0,i.CR)((c.Z.get("ad.size")||"16:9").split(":").map((function(e){return parseInt(e,10)})),2),a=o[0],s=o[1],l=Math.ceil(100*this.width()/a),d=Math.floor(a*l/100),h=Math.floor(s*l/100),p=c.Z.get("ad.emptyFileUrl");t.css({position:"absolute",width:"".concat(this.width(),"px"),overflow:"hidden"}).append('<div id="'.concat(this._blockId,'" class="sfu-ad video" style="width:').concat(d,'px;visibility:hidden;">\n                <div class="sfu-ad-header">\n                    <div class="sfu-ad-title">').concat($.ZP.val("Ad.Advertisement.Title"),'</div>\n                    <div class="sfu-ad-tools">\n                        <a class="sfu-ad-tools-item sfu-ad-tools-close" href="javascript:void(0)">\n                            <span class="pri pri-delete" aria-hidden="true"></span><em>').concat($.ZP.val("Ad.Button.Close"),'</em>\n                        </a>\n                    </div>\n                </div>\n                <div class="adcontainer" style="width:').concat(d,"px;height:").concat(h,'px">\n                    <div id="').concat(this._blockId,'_ad">\n                        <video id="').concat(this._blockId,'_video" style="width:').concat(d,"px;height:").concat(h,'px">\n                            <source src="').concat(p,'" type="video/mp4">\n                        </video>\n                    </div>\n                </div>\n            </div>'));var f=t.elm();if(this._textView=u.Z.current.textView,this.$block=f.find("#".concat(this._blockId)),n)return h+this.padding;var m=this._headerHeight||f.find(".sfu-ad-header").height();if(this.$block.css({height:h+m}),!n&&e){var g=this._textView,v=function(){K.Z.unbind(g,_t,v),r._textView&&r._createPlayer(r.$block.find("#".concat(r._blockId,"_ad"))[0],r.$block.find("#".cn(e){retreturn r._isBlockVisible()?e.play():null})).catch(X.Z.error)};K.Z.bind(g,_t,null,v)}return h+m+this.padding},t.prototype.dispose=function(){var .catch((function(e){throw X.Z.error(e),e})).finally((function(){e.$block&&e.$block.remove(),e._cache["".concat(e._playerId,"promise")]&&delete e._cache["".concat(e._playerId,"promise")],e._cache[yt]&&(K.Z.unbind(e._textView,_t,e._cache[yt]),delete e._cache[yt]),e._cache["".concat(yt,"fullscreen")]&&(e._cache["".concat(yt,"fullscreen")].unsubscribe(),delete e._cache["".concat(yt,"fullscreen")]),delete e._cache[e._textViewCacheKey]}))},Object.defineProperty(t.prototype,"padding",{get:function(){return 24},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_blockId",{get:function(){return"ablock_".concat(this._article.Id)},enumerable:!1,configurable:!0}),Object.dereturn"player_".concat(this._article.Id)},enumerable:!1,configurable:!0}),Object.deturne){this._cache[this._textViewCacheKey]=e},enumerable:!1,configurable:!0}),Object.defineProp){return"textview".concat(this._blockId)},enumerable:!1,configurable:!0}),t.prototype._createPlayer=function(e,t,n,i){var r=this,o="".concat(this._playerId,"promise");if(this._cache[o])return this._cache[o];var a=c.Z.loaded().then((function(){var e=gt.Z.create({player:"spotx",element:t});tion(o){r((function(){return Promise.reject(e)}))}));return this._cache[o]=a,a},t.prototype._setupPlayer=function(e,t,n,i,r){var o=this,a={channel_id:c.Z.get("ad.provider.parameters.channelId"),slot:i,video_slot:r,autoplay:!0,hide_skin:!1,content_width:t,content_height:n,ad_mute:!0,ados:{query_params:"ad_mute=true"}};return e.setup(a).then((function(){return o._InternalChange||(e.wasManuallyStoped=!0)})),e.on("play",(function(){e.wasManuallyStoped=!1})),e.on("AdError",(function(){o.dispose().catch(X.Z.error)})),e.on("complete",(function(){o.dispose().catch(X.Z.error)})),e}))},t.prototype._setupEventHandlers=function(e,t){var n=this;this._cache[yt]||(this._cache["".concat(yt,"fullscreen")]=(0,be.gj)(t.video).subscribe((function(e){setTimeout((function(){return Ce.ZP.freeze(e)}),1(function(){n.dispose().catch(X.Z.error)})),this._cache[yt]=function(){n._isBlockVisible()?t.wasManuallyStoped||t.play().catch(X.Z.error):(t._isInternalChange=!0,t.pause().catch(X.Z.error).finally((function(){t._isInternalChange=!1})))},K.Z.bind(this._textView,_t,null,this._cache[yt]),e.tap((function(e){return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1})))},t.prototype._isBlockVisible=function(){var e=this.$block[0].getBoundingClientRect(),t=window.innerWidth||document.documentElement.clientWidth;return e.left>=0&&e.left<=t},t.prototype._removePlayer=function(){var e=this,t=this._cache[this._playerId];return t?t.stop().then((on(){return delete e._cache[e._playerId]})):Promise.resolve()},t.prototype._addScrollingSupport=function(e){for(var t=this,n=function(n){try{var o,a,s=r(e.frames[n]);s.on("wheel mousewheel",(function(e){var n=e.wheelDeltaY>0?1:-1;t._textView.scroll(n*t._textView._viewport.width/3,300),e.preventDefault()})),s.on("touchstart",(function(e){o=e.changedTouches[0],a=parseInt(o.clientX,10)})),s.on("touchmove",(function(e){o=e.changedTouches[0];var n=parseInt(o.clientX,10)-a>0?1:-1;t._textView.scroll(n*t._textView._viewport.width/3,300),e.preventDefault()})),i._addScrollingSupport(e.frames[n])}catch(e){}},i=this,o=0;o<e.frames.length;o++)n(o)},t}(B.XY),wt=bt,Ct=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(this,(0,i.ev)([],(0,i.CR)(t),!1))||this;return r._related=new(mt.bind.apply(mt,(0,i.ev)([void 0],(0,i.CR)(t),!1))),r._ad=new(wt.bind.apply(wt,(0,i.ev)([void 0],(0,i.CR)(t),!1))),r}return(0,i.ZT)(t,e),Object.defineProperty(t,"type",{get:function(){return z.Z.relatedAd},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"__type",{get:function(){return t.type},enumerable:!1,configurable:!0}),t.prototype.available=function(){return this._related.available()},t.prototype.width=function(){return this._related.width()},t.prototype.height=function(){var e=this._related.height();return this._isAdAvailable?this._ad.height():e},t.prototype.measure=function(e,t,n){this._related.measure(e,t,n),this._isAdAvailable&&this._ad.measure(e,t,n)},t.prototype.render=function(e,t,n,i,r){var o=r.articleElm().createChild("div"),a=this.height(),s=n+a;if(O.$0-s<O.Nv&&(n+=this._ad.padding),o.css({height:"".concat(a,"px")}),this._related._render(o),this._isAdAvailable){this._ad._render(e,o);var u=o.elm();this._updateRelatedBlock(u)}var c=new Q._({elm:o.elm(),colspan:2,top:n,height:a,smartFlowItemId:this._article.getId(),type:Q.W.Column,layout:r});return c.addBlock(this),c.onRemoved(this.dispose.bind(tis._ad.dispose(),this._related.dispose()},Object.defineProperty(t.prototype,"_isAdAvailable",{get:function(){return this._ad.available()&&this._article.Related&&this._article.Related.length>=3},enumerable:!1,configurable:!0}),t.prototype._updateRelatedBlock=function(e){var t=this._ad.height()-this._ad.padding;if(this._related.height()>t)for(var n=e.find(".art-relstories ul li.relstory"),i=e.find(".art-relstories"),r=0;i.outerHeight()>t&&r<=n.length;)n[n.length-1-r].style.display="none",r++;e.find(".art-relstories").css({height:"".concat(t,"px")})},t}(B.XY),It=Ct,Pt=((it={})[z.Z.text]=B.al,it[z.Z.annotation]=te,it[z.Z.comments]=se,it[z.Z.continuedFromLink]=ce,it[z.Z.image]=_e,it[z.Z.video]=Re,it[z.Z.fullTitle]=ut,it[z.Z.title]=ct,it[z.Z.subtitle]=lt,it[z.Z.tools]=dt.ZP,it[z.Z.related]=mt,it[z.Z.ad]=wt,it[z.Z.relatedAd]=It,it),xt=n(30901),St=n(88243),Tt={annotation:{className:"art-annotation"},paratitle:{className:"art-paratitle"},dropcap:{className:"dropcap"}},kt=[];function At(e){if(kt.length){var t=kt.pop();return t.innerHTML=e,t}var n=document.createElement("div");return n.style.position="absolute",n.style.left="-10000px",n.style.top="-10000px",n.className="col",n.innerHTML=e,n.style.width="".con||this;return t._textBlockInnerHtml=[],t}return(0,i.ZT)(t,e),t.pclasshtml=function(e,t,n,i,r){var o=[],a=!!Tt[n];return a&&o.push(Tt[n].className),!e&&c.Z.get("textview.enableFirstBlockFormatting",!0)&&(a||t>=3&&(r&&r.disableArtLeadFormatting||o.push("art-lead"),(!i||i>=3)&&o.push("dropcap")),o.push("first-block")),o.length>0?' class="'.concat(o.join(" "),'"'):""},t.prototype.get=function(e,t,n){void 0===t&&(t=0);var i=xt.S.textBlockCacheKey(e,t,n);return i in this._cache?this._cache[i]:this._article?(this._createMeasuringToolForGet(e,t,n).execute(),this._cache[i]):void 0},t.prototype.getAsync=function(e,t,n){return void 0===t&&(t=0),(0,i.mG)(this,void 0,void 0,(function(){var r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:if((r=xt.S.textBlockCacheKey(e,t,n))in this._cache)return[2,this._cache[r]];if(!this._article)throw new Error("There is no article.");return[4,this._createMeasuringToolForGet(e,t,n).executeAsync()];case 1:return i.sent(),[2,this._cache[r]]}}))}))},t.prototype.measureFirstBlock=function(e,t){var n=this;if(this._article)for(var i=function(e){if(xt.S.textBlockCacheKey(0,e)in r._cache)return"continue";var i=void 0;e>=3?i=1:0+(i=10)>r._article.Blocks.length&&(i=r._article.Blocks.length-0);for(var o=[],a=[],s=0;s<i;++s){var u=s+0;xt.S.textBlockCacheKey(u,e)in r._cache||(o.push(r._textBlockHtml(u,e)),a.push(u))}var c=t.getArticleElm(e).elm()[0],l=Asure((function(){n._measureBlocks(l,a,e)})).mutate((function(){kt.push(c.removeChild(l)),c=l=null}))},r=this,o=0;o<=e;++o)i(o)},t.prototype.getAll=function(e,t){void 0===e&&(e=0);var n="all_".concat(e);if(n in this._cache)return this._cache[n];if(this._article){this._createMeasuringToolForGetAll(e,t).execute();for(var i=this._cache[n]=[],r=this._article.Blocks.length,o=0;o<r;++o){var a=xt.S.textBlockCacheKey(o,e,t);i.push(this._cache[a])}return i}},t.prototype.getAllAsync=function(e,t){return void 0===e&&(e=0),(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,a,s,u;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:if((n="all_".concat(e))in this._cache)return[2,this._cache[n]];if(!this._article)throw new Error("There is no article.");for(r=this._article.Blocks.length,o=[],a=0;a<r&&(u=xt.S.textBlockCacheKey(a,e,t))in this._cache;++a)o.push(this._cache[u]);return a===r?(this._cache[n]=o,[2,o]):[4,this._createMeasuringToolForGetAll(e,t).executeAsync()];case 1:for(i.sent(),s=a;s<r;++s)u=xt.S.textBlockCacheKey(s,e,t),o.push(this._cache[u]);return this._cache[n]=o,[2,o]}}))}))},t.prototype.textBlockInnerHtml=function(e){var t=this._textBlockInnerHtml[e];if(void 0===t){var n=this._article.Blocks[e];this._textBlockInnerHtml[e]=t=n?(0,St.a)((this),this._textBlockInnerHtml.length=0},t.prototype._createMeasuringToolForGet=function(e,t,n){var i,r,o=this;!e&&t>=3?(i=1,r=0):(r=e-e%(i=10))+i>this._article.Blocks.length&&(i=this._article.Blocks.length-r);for(var a=[],s=[],u=0;u<i;++u){var c=u+r;xt.S.textBlockCacheKey(c,t,n)in this._cache||(a.push(this._textBlockHtml(c,t,n)),s.push(c))}var l=new We.e,d=l.getArticleElm(t).elm()[0],h=At(a.join(""));return d.appendChild(h),l.measure((function(){o._measureBlocks(h,s,t,n)})).mutate((function(){kt.push(d.removeChild(h)),d=h=null})),l},t.prototype._createMeasuringToolForGetAll=function(e,t){for(var n=this,i=[],r=[],o=this._article.Blocks.length,a=0;a<o;++a)xt.S.textBlockCacheKey(a,e,t)in this._cache||(i.push(this._textBlockHtml(a,e,t)),r.push(a));var s=new We.e,u=s.getArticleElm(e).elm()[0],c=At(i.joire((function(){n._measureBlocks(c,r,e,t)})).mutate((function(){kt.push(u.removeChild(c)),u=c=null})),s},t.prototype._textBlockHtml=function(e,n,i){var r=this._article.Blocks[e];return r&&r.Text?"<p".concat(t.pclasshtml(e,n,r.Role,0,i),">").concat(this.textBlockInnerHtml(e),"</p>"):""},t.prototype._measureBlocks=function(e,t,n,i){var r=this;(0,o.forEach)(e.childNodes,(function(e,o){var a=t[o],s=window.getComputedStyle(e),u=xt.S.textBlockCacheKey(a,n,i);if(r._cache[u]=parseFloat(s.height),e.className.length>0){var c=parseInt(s.getPropertyValue("margin-top"),10);0!==c&&(r._textBlockOffsetMap[u]=c)}}))},t}(xt.S),Zt=n(81867),Mt=n(57136),Dt=n(8871),Lt=n(63666),Nt="is-following",Rt="pri-following",Vt="pri-follow",Bt={misc:0,miscAtTop:0,title:0,author:0},Ft={id:0,data:{Nickname:"A A",FollowersCount:0}},Ot={};function zt(e,t,n){if(void 0===t&&(t=!1),(0,o.isEmpty)(e))return"";var i='<div class="art-relauthors'.concat(t?" first-block":"",'">');return n&&(i+='\n<div class="art-relauthors-header">\n    <div class="title">'.concat(n,"</div>\n</div>\n        ")),i+='<div class="inner">',(0,o.forEach)(e,(function(e){var t=e.id,n=e.data,r=n.FollowersCount?$.ZP.format("v7.Client.Profile.NFollowers",n.FollowersCount):"",o=n.FollowedByCurrentUser?" ".concat(Nt):"",a=n.FollowedByCurrentUser?Rt:Vt,s=n.FollowedByCurrentUser?$.ZP.val("v7.Client.Profile.Following"):$.ZP.val("v7.Client.Profile.Follow"),u=(0,ne.b_)({nickname:n.Nickname,imageId:n.avatarImageId,size:ne.wC.large,fallbackAvatarUrl:n.PhotoUrl}),c=n.EnAccountNumber===Dt.default.enAccountNumber;i+='\n<a href="javascript:void(0)" class="user featuser" author-id="'.concat(t,'">\n    <div class="user-media">\n        <div class="user-item-in">\n            <span class="userphoto">').concat(u,'</span>\n        </div>\n    </div>\n    <div class="user-meta">\n        <div class="user-item-in">\n            <span class="username">').concat(n.Nickname,'</span>\n            <span class="meta">').concat(r,'</span>\n        </div>\n    </div>\n    <div class="user-action"').concat(c?'style="display:none;"':"",'>\n        <div class="user-item-in">\n            <div class="btn-icon btn-follow').concat(o,'" role="button" tabindex="0" title="').concat(s,'">\n                <span class="pri ').concat(a,'" aria-hidden="true"></span><span>').concat(s,"</span>\n            </div>\n        </div>\n    </div>\n</a>")})),"".concat(i,"</div></div>")}function Ut(e){if(!Bt.author){var t,n,i=e.getArticleElm();e.mutate((function(){(t=i.createChild("div").css({position:"absolute",width:"".concat((0,O.FK)(),"px")}).addClass("col")).append(zt([Ft],!0)).append(zt([Ft])).append(zt([Ft,Ft])).append(zt([Ft],!1,"Follow Reporters")),n=t.elm().children("div.art-relauthors")})).measure),(function(e){return r(e).outerHeight()})),t=Bt.author=e[2]-e[1];Bt.misc=e[1]-t,Bt.miscAtTop=e[0]-t,Bt.title=e[3]-t})).mutate((function(){t.remove(),i=t=n=null}))}}function Ht(e){var t=r(e.target).parents("a.user.featuser[author-id]"),n=t.attr("author-id");if(!n||!(n in Ot))return!1;var i=Ot[n];return(i.FollowedByCurrentUser?Zt.default.unFollowUser(i.ProfileName):Zt.default.followUser(i.ProfileName)).then((function(e){var n=i.FollowedByCurrentUser=e.followedByMe,r=i.FollowersCount=e.followedByUsersTotal;!function(e,t,n){var i=e.find("div.btn-icon.btn-follow");i.removeClass(Nt);var r=i.find("span.pri");r.removeClass(Vt).removeClass(Rt),t?(i.addClass(Nt),r.addClass(Rt),i.attr("title",$.ZP.val("v7.Client.Profile.Following"))):(i.attr("title",$.ZP.val("v7.Client.Profile.Follow")),r.addClass(Vt)),e.children("div.user-meta").find("span.meta").text(n?$.ZP.format("v7.Client.Profile.NFollowers",n):"")}(t,n,r)})),!1}function jt(e){var t=r(e.target).parents("a.user.featuser[author-id]").attr("author-id");if(!t||!(t in Ot))return!1;var n=Ot[t];return Mt.I.goToProfile(n.ProfileName),!1}var Wt=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=e.apply(this,(0,i.ev)([],(0,i.CR)(t),!1))||this;return r.colspan=1,r}return(0,i.ZT)(t,e),t.prototype.height=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?(this._height=e[0],this):this._height||0},t}(B.oy),qt=0,Gt=function(e){function t(t){var n=e.call(this,t)||this;return n._article=t,(0,o.isEmpty)(n._article.Ahors,(function(e){return{id:++qt,data:e}}))),n}return(0,i.ZT)(t,e),t.isAvailable=function(e){return!(0,o.isEmpty)(e.Authors)},Object.defineProperty(t.prototype,"isAvailable",{get:function(){return!!this._authors},enumerable:!1,configurable:!0}),t.prototype.render=function(e,t,n,r,o){var a=(0,i.CR)(t.split("_"),2),s=a[0],u=a[1];return this._render(this._authors.slice(s,u),o,e,n)},t.prototype.renderAll=function(e,t){if(this.isAvailable){var n;(n=(0,q.Oh)().parent())._articleLayoutAuthorElmRegistered||(n.tap("div.btn-icon.btn-follow",Ht),n.tap("a.user.featuser[author-id]",jt),n._articleLayoutAuthorElmRegistered=!0);var i=t.count(),r=this._fitAndRender(0,t,e);if(r<this._authors.length){e.appendColumn();var o=(new G.d$).columnIdx(i).addLayout(e).type(G.Xp.Content).section(t.tail().section()),a=(0,Lt.ny)(this._article,Lt.tG.Rendered);o.onDisposed((function(){return a.release()})),this._fitAndRender(r,t,e,o),t.append(o),++i,t.forEach((function(e){e.article.prototype.measure=function(e,t,n){Ut(n)},t.prototype._render=function(e,t,n,i){if((0,o.isEmpty)(e))return null;var r=this._getElm(e,t.articleElm(),i);return this._getCell(r,e,t,n,i)},t.prototype._getElm=function(e,t,n){var i,r=t.createChild("div").css({position:"absolute",width:"".concat((0,O.FK)(),"px")}).addClass("col");return e[0]===this._authors[0]&&(i=this._authors.length>1?$.ZP.val("v7.Client.Authors.Title"):$.ZP.val("v7.Client.Author.Title")),r.append(zt(e,!n,i)),r},t.prototype._getCell=function(e,t,n,i,a){var s=e.height(),u=new Q._({elm:e.render(),colspan:1,top:a,height:s,smartFlowItemId:this._article.getId(),type:Q.W.Column,layout:n});u.add(function(e){var t=e.id,n=e.data;Ot[t]=n}));var c=Dt.default.updates.subscribe((function(){var t=e.find("a.user.featuser[author-id]").toArray();(0,o.forEach)(t,(function(e){var t=r(e),n=t.attr("author-id");if(n&&n in Ot){var i=Ot[n],o=t.find("div.user-action");Dt.default.enAccountNumber===i.EnAccountNumber?o.hide():o.show()}}))}));return i.onDisposed((fu)(t,(function(e){var t=e.id;delete Ot[t]}))})),u},t.prototype._fitAndRender=function(e,t,n,i){var r=this;if(i)return this._fitIntoPositionAndRender(e,i,n,{top:0,height:O.$0,columnIndex:t.count()});var a=0;return(0,o.forEach)(n.bottomPositionsAfterText(),(function(i){var o=r._fitIntoPositionAndRender(e,t.item(i.columnIndex),n,i);if(a+=o,(e+=o)>=r._authors.length)return!1})),a},t.prototype._fitIntoPositionAndRender=function(e,t,n,i){var r=function(){if(!Bt.author){var e=new We.e;Ut(e),e.execute()}return Bt}(),a=i.top?r.misc:r.miscAtTop;e||(a+=r.title);var s=(0,o.chain)(this._authors).slice(e).takeWhile((function(){return(a+=r.author)<=i.height})).value();if(!s.length)return 0;for(var u=n.articleElm(),c=this._getElm(s,u,i.top);c&&c.height()>i.height;){if(c.remove(),s.pop(),!s.length)return 0;c=this._getElm(s,u,i.top)}if(!c)return 0;var l=this._getCell(c,s,n,t,i.top),d=new Wt(this,"".concat(e,"_").concat(s.length));return d.height(l.height),n.applyBlockInstance(or=0,Bt.misc=0,Bt.miscAtTop=0,Bt.title=0},t}(B.XY),Xt=Gt,Yt=n(79052),Kt=n(61915),Jt=n(63561),$t=window.layoutStats={};function Qt(e){return u.Z.current.textView.onReadMoreClicked((0,o.isFunction)(e.event)?e.event():e),!1}function en(){var e=(0,q.Oh)().parent();e._ellipsisElmRegistred||(e.tap(".readmore, .readmore-click-panel",Qt),e._ellipsisElmRegistred=!0),e._textLinksRegistered||(e.tap("p>a",(function(e){var t=e&&e.originalEvent&&e.originalEvent.target&&e.originalEvent.target.href;t&&(window.location=t)})),e._textLinksRegistered=!0)}var tn={},nn=null;function rn(e){return e.Language===e.OriginalLanguage?e.Id:e.Id+e.Language}function on(){nn&&((0,o.forIn)(nn,(function(e){e.dispose()})),nn=null)}function an(e){if(void 0===e&&(e=null),e){var t=rn(e);t in tn&&(tn[t].dispose(),delete tn[t])}else nn&&on(),nn=tn,tn={}}function sn(e,t){if(!e)return t;if(!t)return e;var n=e.textDistribution(),i=t.textDistribution();return n.emptyColumnsCount>i.emptyColumnsCount?t:n.emptyColumnsCount<i.emptyColumnsCount?e:e.compareTo(t)}var un=function(e){function t(t){var n=e.call(this)||this;return n._article=t,n._cache={},n._textBlocksHeights=new Et(t),n._instances={},n._onArticleUpdatedHandler=n._onArticleUpdated.bind(n),t.on("updated",n._onArticleUpdatedHandler),n._state=0,n._gInstanceId=0,n._lock=new Kt.HE,n}return(0,i.ZT)(t,e),t.prototype.layout=function(e,t,n,i,r,o){return this._layout({maxColumns:e,template:t,strict:n,maxHeight:i,articleType:r,fromStart:o})},t.prototype.layoutSync=function(e,t,n,i,r,a){var s=this;if(!this._article||!this._article.loaded())return null;var u=this._layoutCacheKey(e,t,n,i,r,a);e||(e=Number.MAX_VALUE);var c=new Date,l=null;this._article.Id in $t?l=$t[this._article.Id]:$t[this._article.Id]=l={measure:0,total:0,calls:0},l.calls++;var d=Math.min(e,O.YD),h={articleType:r,fromStart:!!a,colspan:e},p=this._buildLayoutMap(t,h),f=new We.e;this._measure(d,p,f),f.execute(),l.measure+=new Date-c,p.instances=(0,o.mapValues)(p.instances,(function(e){return s._instances2JSON(e,d)}));var m=new F.Z(V.Z,(function(e){return{valid:e.isValid()||1===e.colspan}}),(function(){return!1}),V.Z.pick),g=this._cache[u]=m.buildLayout(p.nodes,p.instances,new V.Z(e,this).applyConfig(h).textBlocksHeights(this._textBlocksHeights));return g&&(g.map(p),this._restoreInstances(g)),l.total+=new Date-c,g},t.prototype._layout=function(e){var t=this,n=e.maxColumns,i=e.template,r=e.strict,a=e.maxHeight,s=e.articleType,u=e.fromStart,c=e.cancellationToken,l=void 0===c?Jt.A.dummy:c;if(!this._article)return Promise.reject();var d=this._layoutCacheKey(n,i,r,a,s,u);if(d in this._cache)return Promise.resolve(this._cache[d]);var h=this._lock.lock();return this._article.load().then(l.rejectIfRequested).then((function(){n||(n=Number.MAX_VALUE);var e=Math.min(n,O.YD),r={articleType:s,fromStart:!!u,startBlockIdx:u?0:t._article.StartBlockIdx||0,textBlocksCount:t._article.Blocks.length,colspan:n},a=t._buildLayoutMap(i,r),c=new We.e;return t._measure(e,a,c),t._textBlocksHeights.measureFirstBlock(5,c),c.executeAsync().then(l.rejectIfRequested).then((function(){return a.instances=(0,o.mapValues)(a.instances,(function(n){return t._instances2JSON(n,e)})),r.textBlocksHeights=t._textBlocksHeights.toJSON(),(n="nd.viewer.textview.articlelayout.builder.worker",s=L,!0===(i=i||{}).emulatePool&&(s=new D),new N(s,n,i)).exec("buildLayout",[a.nodes,a.instances,r,(0,O.xJ)()]).then(l.rejectIfRequested).then((function(e){if(!e)return null;var n=t._cache[d]=V.Z.fromJSON(e,t).map(a);return t._restoreInstances(n)}));var n,i,s}))})).finally((function(){return h.release()}))},t.prototype._layoutCacheKey=function(e,t,n,i,r,a){var s="layout_".concat(e,"_").concat(t.name);return n&&(s+="_strict"),(0,o.isNumber)(i)&&(s+="_".concat(i)),r&&(s+="_articleType".concat(r)),a&&(s+="_fromStart"),s},t.prototype._instances2JSON=function(e,t){var n=this;if(!e)return e;t||(t=Number.MAX_VALUE);var i=[];return(0,o.forEach)(e,(function(e){var r=e.width(),o=Math.ceil((r.min+O.ez)/O.G4);if(!(o>t)){var a=Math.min(t,Math.ceil((r.max+O.ez)/O.G4));if(!(a<o))for(var s=a;s>=o;--s){var u=e.copy();u.colspan=s,n._instances[++n._gInstanceId]=u;var c=e.toJSON(s);c.gInstanceId=n._gInstanceId,i.push(c)}}})),i},t.prototype._restoreInstances=function(e){var t=this;return e?((0,o.forEach)(e.blockInstances(),(function(e,n,i){e.gInstanceId in t._instances&&(i[n]=t._instances[e.gInstanceId])})),e.columns().forEach((function(e){(0,o.forEach)(e.cells(),(function(e){e.instance.gInstanceId in t._instances&&(e.instance=t._instances[e.instance.gInstanceId])}))})),e):e},t.prototype.textBlocksHeights=function(){return this._textBlocksHeights},t.prototype.tasks=function(){var e=this,t=new Jt.A;return this._article.on("dispose",(function(){t.request()})),[function(){if(!t.isRequested)return Promise.all([e.estimateColumnsCountAsync(O.DO,t),W.loaded]).then(t.rejectIfRequested).then((function(t){var n=(0,i.CR)(t,2),r=n[0],o=n[1],a=e._buildLayoutMap(o[0],{}),s=new We.e;return e._measure(r||O.DO,a,s),s.executeAsync()}))}]},t.prototype._measure=function(e,t,n){var r="measure_".concat(t.templateName);r in this._cache||(this._cache[r]=1,(0,o.forIn)(t.instances,(function(t){var r,o;try{for(var a=(0,i.XA)(t),s=a.next();!s.done;s=a.next())s.value.measure(e,n)}catch(e){r={error:e}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(r)throw r.error}}})))},t.prototype._buildLayoutMap=function(e,t){var n=this,r=[],a={},s={},u=null;return(0,o.forEach)(e.blocks,(function(e){var c=n._blockMetaInfo(e,t);if(c){if(!r.length)if(c.roots.length>1){var l={type:"dummy",root:!0};r.push(l),u=[l],a.dummy=[]}else c.roots[0]&&(c.roots[0].root=!0);u&&(0,o.forEach)(u,(function(e){e.children=c.roots})),u=c.leaves,r.push.apply(r,(0,i.ev)([],(0,i.CR)(c.nodes),!1)),(0,o.assign)(a,c.instances),(0,o.assign)(s,c.blocks)}})),{templateName:e.name,blocks:s,nodes:r,instances:a}},t.prototype._blockMetaInfo=function(e,t){var n,r,a=this,s=null;switch(e.type){case"choose":s=(0,o.transform)(e.items,(function(e,n){var r,s,u,c=a._blockMetaInfo(n,t);c&&(e.isEmpty=!1,(r=e.nodes).push.apply(r,(0,i.ev)([],(0,i.CR)(c.nodes),!1)),(s=e.roots).push.apply(s,(0,i.ev)([],(0,i.CR)(c.roots),!1)),(u=e.leaves).push.apply(u,(0,i.ev)([],(0,i.CR)(c.leaves),!1)),(0,o.assign)(e.instances,c.instances),(0,o.assign)(e.blocks,c.blocks))}),{isEmpty:!0,nodes:[],roots:[],leaves:[],instances:{},blocks:{}});break;case"group":s=(0,o.transform)(e.items,(function(e,n){var r,s=a._blockMetaInfo(n,t);s&&(e.isEmpty=!1,(r=e.nodes).push.apply(r,(0,i.ev)([],(0,i.CR)(s.nodes),!1)),e.roots?e.leaves&&(0,o.forEach)(e.leaves,(function(e){e.children=s.roots})):e.roots=s.roots,e.leaves=s.leaves,(0,o.assign)(e.instances,s.instances),(0,o.assign)(e.blocks,s.blocks))}),{isEmpty:!0,nodes:[],instances:{},blocks:{}});break;default:var u=null,l=function(e){var t=e.article,n=e.config,i=e.cache;if(n.type===z.Z.video){var r=(0,o.head)(t.Videos);if(r&&!Re.canRender(r.Url)){var a={Height:r.Height,Id:r.Id||1,Title:r.Title,Url:r.ThumbnailUrl,Width:r.Width};return t.Images?t.Images.unshift(a):t.Images=[a],t.Videos=null,new _e(t,n,i)}}if(n.type===z.Z.comments&&!c.Z.get("features.comments",!0))return null;var s=Pt[n.type];return s?new s(t,n,i):null}({article:this._article,config:e,cache:this._cache});if(l&&l.available(t))if(0===e.maxPreviewInstances)u=[];else{var d=l.instances();d&&(u=(0,o.filter)(d,(function(e){if((0,o.isFunction)(e.articleType)){var n=e.articleType();if(void 0!==t.articleType&&t.articleType!==n||void 0===t.articleType&&n<0)return!1}return!0})))}if(u){var h=[{type:e.type}];e.mandatory&&(h[0].imperative=!0),s={blocks:(n={},n[e.type]=l,n),nodes:h,roots:h,leaves:h,instances:(r={},r[e.type]=u,r)}}}return s&&!s.isEmpty?s:null},t.prototype.article=function(){return this._article},t.prototype.newArticleElm=function(){return(0,q.Oh)().section(this._article.group()).article().addClass("art").attr("aid",this._article.Id)},t.prototype._appendColumn=function(e,t){var n=e.colspan;if(n!==t.count())throw new Error("Columns counts are inconsistent.");var i=e.colspan;e.appendColumn();var r=(new G.d$).columnIdx(i).addLayout(e),o=(0,Lt.ny)(this._article,Lt.tG.Rendered);if(r.onDisposed((function(){return o.release()})),!r.section()){var a=this._article.group();a&&r.section(a)}t.append(r),t.forEach((function(e){e.articleColumnsCount(n)}))},t.prototype._renderBlocks=function(e){for(var t=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];if(!n.length){var r=new G.JD;return e.columns().forEach((function(n,i){var a=(new G.d$).columnIdx(i).articleColumnsCount(e.colspan).addLayout(e),s=(0,Lt.ny)(t._article,Lt.tG.Rendered);if(a.onDisposed((function(){return s.release()})),i||a.addDivider(),!a.section()){var u=t._article.group();u&&a.section(u)}r.append(a),(0,o.forEach)(n.cells(),(function(t){t.instance.layout(e).render(a,t.top)}))})),r}if(1===e.colspan){var a=n[0]||(new G.d$).columnIdx(0).articleColumnsCount(e.colspan).addDivider(),s=(0,Lt.ny)(this._article,Lt.tG.Rendered);a.onDisposed((function(){return s.release()})),a.addLayout(e);var u=a.height();if(!a.section()){var c=this._article.group();c&&a.section(c)}return(0,o.forEach)(e.columns().head().cells(),(function(t){t.instance.layout(e).render(a,t.top+u)})),a}},t.prototype.estimatedColumnsCount=function(e){var t="ecc",n=null;if(t in this._cache){if((n=this._cache[t]).max>=e||n.count>=e)return n.count;n.max=e}else this._cache[t]=n={max:e,count:.5};var i={fromStart:!0,startBlockIdx:0,textBlocksCount:this._article.Blocks.length,colspan:e},r=this._buildLayoutMap(W[0],i),a=(0,o.find)(r.nodes,(function(e){return e.root})),s=this._estimateLinesCount(r,a,e),u=e?e*O.Fp:Number.MAX_VALUE,c=(s+this._textLines(u,this._article.StartBlockIdx||0))/O.Fp;return(c>1||Xt.isAvailable(this._article)||dt.ZP.isAvailable(this._article,dt.ZP.mode.tools_comment)||dt.ZP.isAvailable(this._article,dt.ZP.mode.thumbnail))&&(c=Math.ceil(c)),n.count=c,c},t.prototype.estimateColumnsCountAsync=function(e,t){var n=this,i="ecc",r=null;if(i in this._cache){if((r=this._cache[i]).max>=e||r.count>=e)return Promise.resolve(r.count);r.max=e}else this._cache[i]=r={max:e,count:.5};var a={fromStart:!0,startBlockIdx:0,textBlocksCount:this._article.Blocks.length,colspan:e},s=this._buildLayoutMap(W[0],a),u=(0,o.find)(s.nodes,(function(e){return e.root})),c=this._estimateLinesCount(s,u,e),l=e?e*O.Fp:Number.MAX_VALUE,d=this._lock.lock();return this._textLinesAsync(l,this._article.StartBlockIdx||0,t).then(t.rejectIfRequested).then((function(e){var t=(c+e)/O.Fp;return(t>1||Xt.isAvailable(n._article)||dt.ZP.isAvailable(n._article,dt.ZP.mode.tools_comment)||dt.ZP.isAvailable(n._article,dt.ZP.mode.thumbnail))&&(t=Math.ceil(t)),r.count=t,t})).finally((function(){return d.release()}))},t.prototype._estimateLinesCount=function(e,t,n){var i=this;if(!t)return 0;var r=0;return t.type in e.blocks&&(r+=e.blocks[t.type].estimateLinesCount(n)),(0,o.isEmpty)(t.chn(t){return i._estimateLinesCount(e,t,n)})).max().value()),r},t.prototype.height=function(e){var t,n=this;if(e){var i=e-3*O.Nv;if(i<=0)return;t=this.layoutSync(1,W[1],!1,i,-1)}else e=O.$0,t=this.layoutSync(1,W[1],!1,0,-1);if(t){var r=t.columns().head(),a=r.height();if(!(a>=e)){var s=r.findAllPositions(0,1,2*O.Nv,!0,e);if(s&&s.length){var u=0,c=Math.round(this._textBlocksHeights.get(u,-1)/O.Nv),l=this._article.Blocks.length;return(0,o.forEach)(s,(function(t){if(a>=e)return!1;var i=t.top,r=t.height;if(i+r>e&&(r=e-i)<=0)return!1;for(var o=Math.floor(r/O.Nv);o>0;){var s=Math.min(c,o);if(i+=s*O.Nv,a+=s*O.Nv,(c-=s)<=0){if(++u>=l)break;c=Math.round(n._textBlocksHeights.get(u,-1)/O.Nv)}o-=s}return!(u>=l)&&void 0})),t.applyConfig({titleType:-1}),{layout:t,height:a}}}}},t.prototype._textLines=function(e,t){if(!this._article||!this._article.loaded())return 0;for(var n=0,i=t?0:this._article.StartBlockIdx||0;i<this._article.Blocks.length&&(!e||n<e);++i)n+=Math.round(this._textBlocksHeights.get(i,1)/O.Nv);return n},t.prototype._textLinesAsync=function(e,t,n){var i=this;if(!this._article||!this._article.loaded())return Promise.resolve(0);var r=0,o=t,a=function(t){return(r+=Math.round(t/O.Nv))<e&&o<i._article.Blocks.length?i._textBlocksHeights.getAsync(o++,1).then(n.rejectIfRequested).then(a):r};return this._textBlocksHeights.getAsync(o++,1).then(n.rejectIfRequested).then(a)},t.prototype.currentLayout=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.length?(this._currentLayout=e[0],this):this._currentLayout},t.prototype.render=function(e,t){var n=this;void 0===t&&(t=Jt.A.dummy);var i=!e,r=!!e;e||(e=Math.min(O.YD,Math.ceil(this.estimatedColumnsCount(O.YD))));var o=e,a=this._lock.lock();return W.loaded.then(t.rejectIfRequested).then((function(a){var s=function(u){return n._currentLayout=u,u?(i&&(u=n.expand(u)),n.renderLayoutAsync(u,t)):--e>0?n._layout({maxColumns:e,template:a[0],strict:r,cancellationToken:t}).then(s):e>=-1?n._layout({maxColumns:1-e,template:a[0],cancellationToken:t}).then(s):n._article.Annotation&&n._article.Blocks?(n._article.Blocks.unshift({Role:"annotation",Text:n._article.Annotation}),n._article.Annotation=null,n._textBlocksHeights.reset(),e=o,n._layout({maxColumns:e,template:a[0],strict:r,cancellationToken:t}).then(s)):G.JD.empty};return n._layout({maxColumns:e,template:a[0],strict:r,cancellationToken:t}).then(s)})).finally((function(){return a.release()}))},t.prototype.renderSingleColumnLayout=function(e,t){var n=t.layout,i=t.height,r=0;n.renderer(this).config().titleType=-1,this._currentLayout=n,e?(r=e.height(),this._renderBlocks(n,e)):e=this._renderBlocks(n).head();var a=r%O.Nv;a&&(r+=O.Nv-a);var s=e.findAvailablePosition(O.Nv,0,!0);if(!s)return X.Z.log("render article: no position for line"),e;var u=s.top-r,c=0,l=Math.round(this._textBlocksHeights.get(c,-1)/O.Nv),d=this._renderingState(e).text,h=(0,O.FK)(),p=this._article.getId(),f=0,m=n.articleElm().createChild("div").css({position:"absolute",width:"".concat(h,"px")}).addClass("col"),g=Math.floor(Math.min(s.height,i-u)/O.Nv)*O.Nv,v=0,y=s.top,_=[];for(delete this._lastRenderedTextBlock;g>=O.Nv;){var b=this._renderBlock(m,c,f,g,-1),w=b.lines,C=b.height;d[c]={start:f,lines:w,outof:l};var I=new B.al(c,f,w,y,m);if(n.addTextBlock(0,I),_.push(I),y+=C,u+=C,v+=C,(l-=w)<=0){if(++c>=this._article.Blocks.length)break;f=0,l=Math.round(this._textBlocksHeights.get(c,-1)/O.Nv)}else f+=w;g-=C}(c<this._article.Blocks.length||n.hasMoreToShow())&&this._addEllipsis(m.elm()),en();var P=new Q._({elm:m.elm(),colspan:1,top:s.top,height:v,smartFlowItemId:p,type:Q.W.Column,layout:n});return e.addCell(P),(0,o.forEach)(_,(function(e){e.cell(P)})),(0,Lt.Ze)(this._article,Lt.tG.Rendered,(function(){return n.deleteArayout=function(e){return this._render(e)},t.prototype._render=function(e){var t,n;this._currentLayout=e;for(var r=e.articleElm().detach(),a=this._renderBlocks(e),s=e.config().titleType,u=e.startBlockIdx(),c=Math.round(this._textBlocksHeights.get(u,s)/O.Nv),l=0,d=(0,O.FK)(),h=this._article.getId(),p=null,f=null,m=this._article.Blocks.length,g=-1,v=e.columns().head(),y=a.head();u<m;){if(++g){if(!v.next()){if(!e.isExpanded)break;this._appendColumn(e,a)}v=v.next(),y=y.next()}var _=v.findAllPositions(0,1,2*O.Nv,!0);if(!(0,o.isEmpty)(_)){var b=this._renderingState(y).text,w=function(t){var n=p=r.createChild("div").top(t.top).css({position:"absolute",width:"".concat(d,"px")}).addClass("col"),i=t.height,a=0,v=t.top,_=[];for(delete C._lastRenderedTextBlock,c>Math.round(i/O.Nv)&&!u&&!l&&(f={disableArtLeadFormatting:!0},c=Math.round(C._textBlocksHeights.get(u,s,f)/O.Nv));i>=O.Nv;){var w=C._renderBlock(n,u,l,i,s,f),I=w.lines,P=w.height;b[u]={start:l,lines:I,outof:c};var x=new B.al(u,l,I,v,n);if(e.addTextBlock(g,x),_.push(x),v+=P,a+=P,(c-=I)<=0){if(++u>=m)break;f=null,l=0,c=Math.round(C._textBlocksHeights.get(u,s)/O.Nv)}else l+=I;i-=P}var S=new Q._({elm:n.elm(),colspan:1,top:t.top,height:a,smartFlowItemId:h,type:Q.W.Column,layout:e});if(y.addCell(S),(0,o.forEach)(_,(function(e){e.cell(S)})),u>=m)return"break"},C=this;try{for(var I=(t=void 0,(0,i.XA)(_)),P=I.next();!P.done&&"break"!==w(P.value);P=I.next());}catch(e){t={error:e}}finally{try{P&&!P.done&&(n=I.return)&&n.call(I)}finally{if(t)throw t.error}}}}return r.reattach(),u<this._article.Blocks.length||e.hasMoreToShow()?p&&this._addEllipsis(p.elm()):(a=this._renderAuthors(e,a),this._renderTools(e,a,1===a.count()&&!e.isExpanded)?a.forEach((function(e){e.state().expanded=!0})):p&&this._addEllipsis(p.elm())),a=this._renderSocialInfo(e,a),en(),(0,Lt.Ze)(this._article,Lt.tG.Rendered,(function(){return e.deleteArticleElm()})),a},t.prototype.renderLayoutAsync=function(e,t){var n=this;this._currentLayout=e;var r,a=e.articleElm(),s=Yt.Y.mutateAsync((function(){a.detach()})).then((function(){if(t.isRequested)return Yt.Y.mutateAsync((function(){a.reattach()})).then(t.rejectIfRequested)})),u=[],c=0;if(e.columns().forEach((function(e){var t=e.findAllPositions(0,1,2*O.Nv,!0);u.push(t),t.length&&(c+=(0,o.sum)(t,(function(e){var t=e.height;return Math.round(t/O.Nv)})),r=r||t[0])})),!c){e.appendColumn();var l=e.columns().tail().findAllPositions(0,1,2*O.Nv,!0);u.push(l),l.length&&(c+=(0,o.sum)(l,(function(e){var t=e.height;return Math.round(t/O.Nv)})),r=r||l[0])}var d=e.config().titleType,h=e.startBlockIdx(),p=this._article.Blocks.length,f=this._textBlocksHeights.getAsync(h,d).then(t.rejectIfRequested).then((function(e){var t={idx:h,height:e};return e>r.height&&!h?(t.cfg={disableArtLeadFormatting:!0},n._textBlocksHeights.getAsync(h,d,t.cfg).then((function(e){return t.height=e,t}))):t})).then(t.rejectIfRequested).then((function(i){return e.isExpanded?n._textBlocksHeights.getAllAsync(d).then(t.rejectIfRequested).then((function(e){for(var t=[i],n=h+1;n<p;++n)t.push({idx:n,height:e[n]});return t})):new Promise((function(e,r){var o=[],a=0,s=function(i){if(t.isRequested)r();else{o.push(i),a+=Math.round(i.height/O.Nv);var u=i.idx+1;a>=c||u>=p?e(o):n._textBlocksHeights.getAsync(u,d).then((function(e){return{idx:u,height:e}})).then(s)}};s(i)}))})),m=this._lock.lock();return Promise.all([f,s]).then((function(t){for(var r,o,s,c,l,h=(0,i.CR)(t,1)[0],f=n._renderBlocks(e),m=(0,O.FK)(),g=0,v=h[g],y=h.length,_=Math.round(v.height/O.Nv),b=0,w=n._article.getId(),C=-1,I=f.head();g<y;){if(++C){if(!I.next()){if(!e.isExpanded)break;n._appendColumn(e,f),u.push([{top:0,height:O.$0}])}I=I.next()}var P=u[C];if(P.length){var x=n._renderingState(I).text;try{for(var S=(r=void 0,(0,i.XA)(P)),T=S.next();!T.done;T=S.next()){var k=T.value,A=l=a.createChild("div").top(k.top).css({position:"absolute",width:"".concat(m,"px")}).addClass("col"),E=k.height,Z=0,M=k.top,D=[];for(delete n._lastRenderedTextBlock;E>=O.Nv;){var L=n._renderBlock(A,v.idx,b,E,d,v.cfg),N=L.lines,R=L.height;x[v.idx]={start:b,lines:N,outof:_};var V=new B.al(v.idx,b,N,M,A);if(e.addTextBlock(C,V),D.push(V),M+=R,Z+=R,(_-=N)<=0){if(++g>=y)break;v=h[g],b=0,_=Math.round(v.height/O.Nv)}else b+=N;E-=R}var F=new Q._({elm:A.elm(),colspan:1,top:k.top,height:Z,smartFlowItemId:w,type:Q.W.Column,layout:e});I.addCell(F);try{for(var z=(s=void 0,(0,i.XA)(D)),U=z.next();!U.done;U=z.next())(V=U.value).cell(F)}catch(e){s={error:e}}finally{try{U&&!U.done&&(c=z.return)&&c.call(z)}finally{if(s)throw s.error}}if(g>=y)break}}catch(e){r={error:e}}finally{try{T&&!T.done&&(o=S.return)&&o.call(S)}finally{if(r)throw r.error}}}}return Yt.Y.mutateAsync((function(){a.reattach(),v.idx<p-1||_>0||e.hasMoreToShow()?l&&n._addEllipsis(l.elm()):(f=n._renderAuthors(e,f),n._renderTools(e,f,rEach((function(e){e.state().expanded=!0})),f=function(e,t,n,r){var o;if(!n.headItem.state().expanded)return n;var a=function(e,t){var n,i;if(!(null===(n=null==e?void 0:e.Images)||void 0===n?void 0:n.length))return[];var r={};return null===(i=t.blockInstances())||void 0===i||i.forEach((function(e){e.parent.type()===le.L.Image&&(r[e.id()]=!0)})),e.Images.filter((function(e){return!r[e.Id]&&!(!e.Url||e.Height<=0||e.Width<=0)}))}(e,t).filter((function(e){return O.$0/e.Height*100<=O.xC}));if(!a.length)return n;var s=[],u=0;n.forEach((function(e){1===(u=Math.max(u-1,e.colspan()))&&s.push(e)})),s.length>1&&--s.length;for(var c=a.length/s.length,l=s.map((function(){return Math.floor(c)})),d=s.map((function(e,t){return t})),h=a.length%s.length,p=d.length;h>0;--h,--p){var f=d[Math.floor(Math.random()*p)];l[f]++,o=(0,i.CR)([d[p-1],d[f]],2),d[f]=o[0],d[p-1]=o[1]}var m=0,g=n.headItem.section();for(h=0;h<s.length;++h)for(p=0;p<l[h];++p){for(var v=a[m++],y=O.$0,_=void 0,b=0;b<3;++b){var w=y/v.Height,C=Math.floor(v.Width*w);null==_||_.dispose(),(_=(new G.d$).addLayout(t).section(g).width(C+O.ez)).state().expanded=!0;var I=fe({article:e,image:v,column:_,top:0,width:C,colspan:1,layout:t,cache:r[le.L.Image]}).height;if(I-O.$0<O.Nv)break;var P=I-y,x=(0,O.bs)((O.$0-Math.sqrt(O.$0*O.$0-4*O.$0*P))/2);y=O.$0-x}n.append(t){e.columnIdx(t).articleColumnsCount(S)})),n}(n._article,e,f,n._cache)):l&&n._addEllipsis(l.elm())),f=n._renderSocialInfo(e,f),en()})).then((function(){return(0,Lt.Ze)(n._article,Lt.tG.Rendered,(function(){return e.deleteArticleElm()})),f}))})).finally((function(){return m.release()}))},t.prototype._renderToolsBlock=function(e,t,n,i){void 0===i&&(i=!1);var r=e.addToolsBlock(n,t);if(r)return!0;if(i)return!1;var o=(new G.d$).columnIdx(t.count()).type(G.Xp.Content);if(r=e.addToolsBlock(n,t,o)){var a=(0,Lt.ny)(this._article,Lt.tG.Rendered);if(o.onDisposed((function(){return a.release()})),o.addLayout(e),!o.section()){var s=e._article.group();s&&o.section(s)}var u=e.colspan;return t.append(o).forEach((function(e){e.articleColumnsCount(u)})),!0}return o.dispose(),!1},t.prototype._renderSocialInfo=function(e,t){if(!O.Q8)return t;var n=e&&e.dataItem(),i=n&&n.SocialInfo;if(!i)return t;var r=n.group(),s=r&&r.title,c=new Y.Y,l=[a.g.profile,a.g.opinion],d=s||c.getTitle(i),h=s&&c.getTitleClass(null)||c.getTitleClass(i),p=n.prev(),f=p&&p.dataType(),m=(0,o.includes)(l,f),g=!(!i.UserPosts||!i.UserPosts.length),v=!(!i.OtherUserPosts||!i.OtherUserPosts.length),y=!(!i.Bookmark||!m),_=!(g||y||!(0,o.find)(i.Bookmarks,(function(e){return e&&e.Comment}))),b=(t.count()+(g?1:0))*(0,O.FK)();n.Source&&!d&&(d=$.ZP.get("v7.Client.Profile.Header.Posted"),h="textview-section section-posts");var w=(0,q.Oh)().section({id:"social-".concat(n.getId()),title:d,className:h,styles:{width:"".concat(b,"px")}});if(g||v||y||_){var C=(0,O.FK)(),I=w.column().css({position:"absolute",top:"0px",width:C}),P=(new G.d$).addLayout(e).type(G.Xp.SocialInfo).articleColumnsCount(1).columnIdx(0),x=function(){c.positionChanged(P.isVisible())},S=u.Z.current.textView;K.Z.bind(S,"positionchanged",x);var T=(0,Lt.ny)(n,Lt.tG.Rendered);P.onDisposed((function(){K.Z.unbind(S,"positionchanged",x),c.dispose(),T.release()})),P.addCell(new Q._(I.elm(),1,0,O.$0));var k=I.createChild("div").addClass("group-panel pg-cover").elm();c.render(k,{data:i,canComment:!0}),t.prepend(P);var A=t.count();t.forEach((function(e,t){e.columnIdx(t).articleColumnsCount(A).removeDivider()}))}return(0,Lt.Ze)(n,Lt.tG.Rendered,(function(){return w.remove()})),t.forEach((function(e){e.section(w)})),t},t.prototype._renderTools=function(e,t,n){if(void 0===n&&(n=!1),e.toolsAdded)return t;if(!e.toolsCommentAdded&&dt.ZP.isAvailable(this._article,dt.ZP.mode.tools_comment)){var i=new dt.ZP(this._article,{width:(0,O.FK)(),mode:dt.ZP.mode.tools_comment});if(!this._renderToolsBlock(e,t,i,n))return!1;e.toolsCommentAdded=!0}if(!e.toolsThumbnailAdded&&dt.ZP.isAvailable(this._article,dt.ZP.mode.thumbnail)){if(i=new dt.ZP(this._article,{width:(0,O.FK)(),mode:dt.ZP.mode.thumbnail}),!this._renderToolsBlock(e,t,i,n))return!1;e.toolsThumbnailAdded=!0}return e.toolsAdded=!0,t},t.prototype._renderAuthors=function(e,t){return e.authorsAdded||!Xt.isAvailable(this._article)||(new Xt(this._article).renderAll(e,t),e.authorsAdded=!0),t},t.prototype._renderBlock=function(e,t,n,i,r,o){var a,s,u,c=this._textBlocksHeights.get(t,r,o)-n*O.Nv;c>=i?u=a=(s=Math.floor(i/O.Nv))*O.Nv:(s=Math.round(c/O.Nv),u=i-(a=Math.min((s+1)*O.Nv,i))<O.Nv||t===this._article.Blocks.length-1?c:a);var l=null;if(this._lastRenderedTextBlock&&this._lastRenderedTextBlock.idx===t?l=this._lastRenderedTextBlock.classNames:(l=Et.pclasshtml(t,r,this._article.Blocks[t]&&this._article.Blocks[t].Role,s,o),this._lastRenderedTextBlock={idx:t,classNames:l}),e.append('<div style="overflow:hidden;height:'.concat(u,'px" bidx="').concat(t,'" lidx="').concat(n,'" lines="').concat(s,'"><p').concat(l)),n){var d=this._textBlocksHeights.getInitialOffset(t,r,o)||0;e.append(' style="margin-top:-'.concat(n*O.Nv-d,'px"'))}return e.append(">"),this._marker&&this._marker.idx===t?e.append(this._marker.block):e.append(J.Z.replace(this._textBlocksHeights.textBlockInnerHtml(t),this._article.Data)),e.append("</p></div>").checkpoint(a),e.render(),{lines:s,height:a}},t.prototype._addEllipsis=function(e){e.children("div[bidx]:last").css("position","relative").fastAppend(this._article.PotentiallyAllowedToRead?O.d&&this._article&&this._refreshReadmore()},t.prototype._refreshReadmore=function(){var e=this._currentLayout.articleElm().find(O.ab);e.length&&(this._article.PotentiallyAllowedToRead?e.removeClass(O.Bt):e.addClass(O.Bt))},t.prototype._renderingState=function(e){var t=e.state(),n=t.rendering;n||(t.rendering=n={});var i=n[this._article.Id];return i||(n[this._article.Id]=i={text:{}}),i},t.prototype._onArticleUpdated=function(){this._cache={},this._textBlocksHeights.reset(),this._refreshRenderedView()},t.prototype.dispose=function(){var e=this;this._lock.onUnlockedOnce((function(){delete e._cache,delete e._textBlocksHeights,e._currentLayout&&(e._currentLayout.dispose(),delete e._currentLayout),e._article.off("updated",e._onArticleUpdatedHandler),delete e._onArticleUpdatedHandler,e._article.off("dispose",an),delete e._article}))},t.prototype.expand=function(e,t){if(e||(e=this._currentLayout),!e)return null;if(t){var n=e.colspan;e.toolsColumnAdded&&--n;var i=Math.min(n,O.YD);e=this.layoutSync(i,W[0],!1,void 0,void 0,!0)}for(var r,o,a=e.colspan,s=e.copy().expandForText(),u=this._expand(s,sn,a),c=u.totalTextLinesCount()-u.textDistribution().availableLines;c>0;)s=s.expand(Math.ceil(c/O.Fp)),c=(u=this._expand(s,sn,a)).totalTextLinesCount()-u.textDistribution().availableLines;return o=u,(r=e)&&o&&(o.toolsCommentAdded=r.toolsCommentAdded,o.toolsThumbnailAdded=r.toolsThumbnailAdded,o.toolsAdded=r.toolsAdded),u},t.prototype._expand=function(e,t,n){var r,a,s,u,c=this,l=e.blockInstances();if((0,o.isEmpty)(l))return null;var d={};(0,o.forEach)(l,(function(e){d[e.blockType]=e}));for(var h=e.map(),p=(0,o.find)(h.nodes,(function(e){return e.root})),f=[],m=new We.e;p;){if(p.type in d){var g=d[p.type].expand();if(!(0,o.isEmpty)(g)){try{for(var v=(r=void 0,(0,i.XA)(g)),y=v.next();!y.done;y=v.next())y.value.measure(O.YD,m)}catch(e){r={error:e}}finally{try{y&&!y.done&&(a=v.return)&&a.call(v)}finally{if(r)throw r.error}}f.push.apply(f,(0,i.ev)([],(0,i.CR)(g),!1))}}else{var _=h.blocks[p.type];if(_&&(0,o.isFunction)(_.instances)&&(g=_.instances(),!(0,o.isEmpty)(g))){try{for(var b=(s=void 0,(0,i.XA)(g)),w=b.next();!w.done;w=b.next())w.value.measure(O.YD,m)}catch(e){s={error:e}}finally{try{w&&!w.done&&(u=b.return)&&u.call(b)}finally{if(s)throw s.error}}f.push.apply(f,(0,i.ev)([],(0,i.CR)(g),!1))}}var C=p.children;.find)(C,(function(e){return e.type in d}))||C[0]}m.execute();var I=this._restoreInstances(this._procunction(e){return c._instances2JSON([e])})),t,n));return I.isExpanded=!0,I},t.prototype._processQueueWithTimeConstraint=function(e,t,n,i){var r=(0,o.now)(),a={},s=new Array(t.length),u=new Array(t.length),c=1;(0,o.forEach)(t,(function(e,t){u[t]=0,s[t]=e[0],c*=e.length})),a[u.join(".")]=1;var l=(0,o.reduce)(this._addInstances(e,s,i),n,null);if(l&&!l.textDistribution().emptyColumnsCount)return l;(0,o.forEach)(t,(function(e,t){var n=e.length-1;u[t]=n,s[t]=e[n]})),a[u.join(".")]=1;var d=(0,o.reduce)(this._addInstances(e,s,i,!1),n,l);if(2===c||!d||d===l)return d;l=d;for(var h=2;(0,o.now)()-r<1e3;){(0,o.forEach)(t,(function(e,t){var n=Math.floor(Math.random()*e.length);u[t]=n,s[t]=e[n]}));var p=u.join(".");if(!(p in a)&&(a[p]=1,(l=(0,o.reduce)(this._addInstances(e,s,i),n,l))&&l!==d||++h>=c))return l}return l},t.prototype._addInstances=function(e,t,n,i){void 0===i&&(i=!0);var r=e;if(i){var a=(0,o.sum)(t,(function(e){return Math.ceil(e.height/O.Nv)*e.colspan}));r=e.copy().expandForText(a)}return(0,o.transform)(t,(function(e,t){var r=e.layouts;r.length>50&&(r=r.sort((function(e,t){return e.compareTo(t)===t?1:-1})).slice(0,50));var a=(0,o.chain)(r).map((function(e){return e.copy().addBlockInstance(t,{expand:!i,columnsCountToPreserve:n})})).flatten().value();if((0,o.isEmpty)(a)){if(i)return e.layouts=[],!1}else e.layouts=a;return!0}),{layouts:[r]}).layouts},t.prototype._processQueue=function(e,t,n,i,r,a){var s=this;if(n>=t.length)return e;var u=(0,o.chain)(t[n]).map((function(t){if(r){var n=Math.ceil(t.height/O.Nv)*t.colspan;return e.copy().expandForText(n).addBlockInstance(t,{expand:r,columnsCountToPreserve:a})}return e.copy().addBlockInstance(t)})).flatten().value().sort((function(e,t){return e.compareTo(t)===t?1:-1}));if(!u.length)return this._processQueue(e,t,n+1,i,r,a);var c=null;return(0,o.forEach)(u,(function(e){var o=e.totalTextLinesCount()-e.textDistribution().availableLines;o>0&&e.expand(Math.ceil(o/O.Fp));var u=s._processQueue(e,t,n+1,i,r,a);if(!u.textDistribution().emptyColumnsCount)return c=u,!1;c=i(c,u)})),c},t.prototype.dataItem=function(){return this._article},t.prototype.highlight=function(e){for(var t=this,n=e.articleColumnsCount(),i=this._article,a=0;a<n&&((0,o.forEach)(e.cells(),(function(e){var n=e.elm;if(e.smartFlowItemId&&i&&e.smartFlowItemId===i.Id){var a=e.blocks;if(a)(0,o.forEach)(a,(function(t){t.highlight(e)}));else if(e.type===Q.W.Column){var s={};n.children("div[bidx]").each((function(e,n){var i=parseInt(r(n).attr("bidx"),10);i in s?n.parentNode.replaceChild(n,s[i]):s[i]=t.highlightRec(n)}))}}})),e=e.next());++a);},t.prototype.highlightRec=function(e){var t=this;return e&&"true"!==r(e).attr(O.aW)?(J.Z.flatten(e),(0,o.forEach)((0,o.slice)(e.childNodes),(function(n){if(3===n.nodeType){var i=J.Z.replace(n.data,t._article.Data),o=document.createElement("div");o.innerHTML=i,e.replaceChild(o,n),r(o).contents().unwrap()}else 1===n.nodeType&&t.highlightRec(n)})),e):e},t}(s.Y),cn={renderer:function(e){var t=rn(e);return t in tn?tn[t]:tn[t]=new un(e.on("dispose",an))},resize:function(){Xt.resize(),an()},reset:an,cleanup:on}},70464:function(e,t,n){"use strict";var i=n(22970),r=n(24458),o=n(20384),a=n(40180),s=n(10751),u=n(25371),c=n(84241),l=n(86913),d=n(66327),h=n(62918),p=n(84672),f=n(63447),m=n(88769),g=n(92912),v=n(78085),y=n(239),_=n(88077),b=n(95766),w=n(63019),C=n(54591),I=n(17447),P=(n(16412),n(78176)),x=n(30724),S=n(46720),T=n(46671),k=n(63666),A=n(6677),E=n(88241),Z=n(37896);function M(e){this._mgr=e}M.ndExtend(h.Y.prototype).ndExtend({_mgr:null,_id:0,_expandedArticleId:0,_type:1,_jump:!1,id:function(e){return arguments.length?(this._id=e,this._onChanged(),this):this._id},page:function(e){var t=this;if(!arguments.length){var n=this.article();return n?n.Page:1}return this._id=0,this._mgr.load(this._currentArticleHistoryToken,this._minCount).then((function(){var n=t._mgr.getFirstArticle(e);n&&(t._id=n.getId()),t._onChanged()})),this},article:function(e){return arguments.length?(this._id=e.getId(),this._onChanged(),this):this._id?this._mgr.getArticleById(this._id):null},expandedArticleId:function(e){return arguments.length?(this._expandedArticleId=e,this):this._expandedArticleId},expandedArticle:function(e){return arguments.length?(this._expandedArticleId=e?e.getId():0,this):this._expandedArticleId?this._mgr.getArticleById(this._expandedArticleId):null},jump:function(e){return arguments.length?(this._jump=e,this):this._jump},type:function(e){return arguments.length?(this._type=e,this):this._type},getHistoryRightToken:function(){if(this.article()){var e=this.article().getId();return this._mgr.getRightToken(e)}},getHistoryLeftToken:function(){if(this.article()){var e=this.article().getId();return this._mgr.getLeftToken(e)}},getArticlePosition:function(){if(this.article()){var e=this.article().getId();return this._mgr.getArticlePosition(e)}},_onChangedTimeoutID:0,_onChanged:function(){this._onChangedTimeoutID&&(clearTimeout(this._onChangedTimeoutID),this._onChangedTimeoutID=0),this._onChangedTimeoutID=setTimeout(this._fire.bind(this,"changed",this),10)}});var D=function(){function e(e){if(!e)throw new Error("Invalid parameter.");this._promise=e,this._aborted=!1}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"aborted",{get:function(){return this._aborted},enumerable:!1,configurable:!0}),e.prototype.abort=function(){this._aborted=!0},e}(),L=!0,N=o.nd.viewer.textView.controller=function(e,t,n,i){o.browser.iPad&&!o.support.retina&&(f.Z.disable(),L=!1,this._screensToBuild=2),this._articlesFeedManager=e,this._builder=t,this._view=n,this._config=i||{},this._currentViewState=new M(e).on("changed",this._onCurrentViewStateChanged.bind(this)),S.Z.bind(n,"currentColumnChanged",null,this._onCurrentColumnChanged.bind(this)),S.Z.bind(n,"scrolled",null,this._onViewScrolled.bind(this)),e.on("articlesLoaded",this._onArticlesLoaded.bind(this)).on("articlesLoadError",this._onArticlesLoadError.bind(this)).on("reset",this._onDataReset.bind(this)).on("itemsListChanged",this._correctColumnsCount.bind(this,10)),S.Z.bind(n,"resize",null,this._onResize.bind(this)),S.Z.bind(n,"click",null,this._onClick.bind(this)),S.Z.bind(n,"doubleclick",null,this._onDoubleClick.bind(this)),S.Z.bind(n,"readmore",null,this._onReadMore.bind(this)),S.Z.bind(n,"continuedfrom",null,this._onContinuedFrom.bind(this)),S.Z.bind(n,"contextMenu",null,this._onContextMenuRequested.bind(this)),S.Z.bind(n,"pinch",null,this._onPinch.bind(this)),S.Z.bind(n,"gesturesEnd",null,this._onGesturesEnd.bind(this)),S.Z.bind(n,"gesturesStart",null,this._onGesturesStart.bind(this)),this._view.controller=this};N.ndExtend(h.Y.prototype).ndExtend({appendEndColumn:function(){this._articlesFeedManager.isEmpty()?this._view.appendNoContentColumn(!0).state().controller=this:this._view.appendEndColumn(!0).state().controller=this},_articlesFeedManager:null,_builder:null,_view:null,_currentViewState:null,_caller:null,_contextMenuController:null,_createRenderersTasksTimeoutID:0,_isVisible:!1,_disabled:!0,_updatePreviewPanel:!1,_currentArticleHistoryToken:null,_currentHistoryTokenType:o.nd.historyTokenTypes.notDefined,_minCount:null,_allowResetREOF:!1,_ignoreGroupHeader:!1,_gesturesStartTime:new Date,_preventExpandAnimation:void 0,_ndLoadingHandle:null,enable:function(){return this._disabled&&(this._disabled=!1),P.Z.reset(),f.Z.reset(),this},disable:function(){return this._disabled||(this._disabled=!0),this._abortColumnsBuilding(),f.Z.reset(),P.Z.reset(),this},_onCurrentColumnChanged:function(e,t){!this._disabled&&t&&t.state().controller===this&&(this._updateCurrentViewState(t),this._ensureItems())},_onViewScrolled:function(){if(this._view.scrollDirection()>0&&!this._view.rightColumnsCount()){var e=this._view.columns().tail();if(e&&e.type()===d.Xp.Misc){var t=e.prev();if(t&&t.isLast()&&!this._allowResetREOF)return}}this._correctColumnsCount(10)},_ensureItems:function(){var e=this._currentViewState.article();if(e){var t=this._view.globalDirection();if(t<0)for(var n=0,i=e;n<32&&i;++n,i=i.prev())i.isLoaded();else if(t>0){var r=!0;for(n=0,i=e;n<32&&i;++n){if(i.isLoaded(),!i.tokenized()){var o=i.group();if(o){var a=o.raw();a&&4!==a.GroupType&&(r=!1)}}if(!i.hasNext()&&!r)break;i=i.next()}}}},_showCallback:null,_isShowing:!1,_updateInterval:null,resetState:function(e){S.Z.global.trigger("textviewCleared"),this._currentArticleHistoryToken=null,e&&(e.itemId&&(this._currentViewState.id(e.itemId).type(0),e.expanded&&(this._currentViewState.expandedArticleId(e.itemId),b.U.send(new w.Rv({articleId:e.itemId})))),e.currentArticlePosition&&this._setMinCount(e.currentArticlePosition),this._currentArticleHistoryToken=e.articleHistoryToken)},show:function(e){var t=this;this._isVisible||this._disabled||(this._isVisible=!0,e&&(this._updatePreviewPanel=e.updatePreviewPanel,e.historyTokenType&&(this._currentHistoryTokenType=e.historyTokenType),this._currentArticleHistoryToken=e.articleHistoryToken,this._setMinCount(e.currentArticlePosition?e.currentArticlePosition:0),this._allowResetREOF=e.allowResetREOF,this._ignoreGroupHeader=e.ignoreGroupHeader,this._is,a.isFunction)(e.callback)&&e.callback()})),this._updateInterval=e.updateInterval,I.ZP.loaded().then(this._toggleTranslationMessage.bind(this)),this._view.config(e),this._config.highlightPattern=e.query,this._articlesFeedManager.loadPromise.then((function(){var n=t._articlesFeedManager.getAnchorItem();if(!n&&e.bookmarkt.Data&&t.Data.BookmarkId===e.bookmarkId}))),n){var i={itemId:n.getId(),type:0};n.Type===s.g.article&&(i.expanded=!0),t._setCurrentViewState(i)}else t._setCurrentViewState(e)})),this._view.show()))},_setCurrentViewState:function(e){e.articleId&&e.viewName===r.n3.TopNews&&e.expanded?(this._currentViewState.expandedArticleId(e.articleId),b.U.send(new w.Rv({articleId:e.itemId}))):e.articleId&&e.viewName===r.n3.TextView?(this._articlesFeedManager.mandatoryArticleId=e.articleId,this._currentViewState.id(e.articleId).jump(!0).type(0).expandedArticleId(e.articleId),b.U.send(new w.Rv({articleId:e.itemId}))):e.page?this._currentViewState.page(e.page).type(2):e.itemId&&(this._currentViewState.id(e.itemId).type(e.type),e.expanded&&(this._currentViewState.expandedArticleId(e.itemId),b.U.send(new w.u7({articleId:e.itemId}))))},_onDataResetPromise:null,_onDataReset:function(){var e=this;!this._disabled&&this._isVisible&&(void 0!==this._preventExpandAnimation&&(this._preventExpandAnimation=!0),this._onDataResetPromise||(this._onDataResetPromise=p.busy.resetPromise,this._onDataResetPromise.then((function(){e._ndLoadingHandle=g.ZP.show(e._ndLoadingHandle),P.Z.reset(),l.Z.reset(),f.Z.reset(),e._builder.reset(),e._view.reset(),(0,c.Oh)().reset(),e._toggleTranslationMessage(),e._abortColumnsBuilding(),e._articlesFeedManager.onLoadOnce((function(e){e.highlights&&e.highlights.text&&(_.Z.highlight(e.highlights.text),_.Z.confirm())})),e._articlesFeedManager.load(e._currentArticleHistoryToken,e._minCount).finally(e._correctColumnsCount.bind(e,10)),e._onDataResetPromise=null}))))},hide:function(){return this._isVisible?(this._abortColumnsBuilding(),this._isVisible=!1,P.Z.cleanup(),this._view.hide(),this._ndLoadingHandle=g.ZP.hide(this._ndLoadingHandle),this):this},_onArticlesLoaded:function(e){if(!this._disabled){if(e&&e.length)for(var t=0;t<e.length;++t){var n=e[t];if(n.Data&&(7===n.Data.GroupType&&_.Z.highlightSection(n.Data.GroupName,n.Data.GroupName),10===n.Data.GroupType&&this._config.highlightPattern&&_.Z.highlightSection(n.Data.GroupName,this._config.highlightPattern)),L){var i=this._builder.tasks(n);if(!i||!i.length)continue;f.Z.add(i)}}this._correctColumnsCount(10),this._ensureItems()}},_onArticlesLoadError:function(){this._articlesFeedManager.isEmpty()?this._ndLoadingHandle=g.ZP.hide(this._ndLoadingHandle):this._correctColumnsCount(10)},_toggleTranslationMessage:function(){var e=o.nd.utils.translation.currentLanguage(),t=this._view.container().elm().parent().children("#Panel_textViewMessagesPanel, #Panel_bookmarksMessagesPanel, #Panel_votesMessagesPanel, #Panel_topNewsMessagesPanel, #Panel_profileMessagesPanel, #Panel_ftsArticlesMessagesPanel, #Panel_monitorsMessagesPanel, #Panel_categoriesMessagesPanel, #Panel_externalMessagesPanel, #Panel_opinionMessagesPanel, #Panel_bookmarkMessagesPanel");o.nd.utils.translation.isAutoTranslated()||o.nd.utils.translation.isTranslated()&&e?(o.nd.utils.translation.isTranslated()?t.html(I.ZP.format("Messages.Translated",o.nd.utils.translation.language(e).title())):t.html(I.ZP.format("Messages.Autotranslated",o.nd.utils.translation.language(e).title())),t.show().bind({"touchstart touchend mousedown mousemove mouseup":function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},touchmove:function(){return!1}}),t.find("#toolbar-translation-show-original").click(o.nd.utils.translation.enableOriginalLanguage),t.find("#toolbar-translation-disclaimer").click((function(){(0,C.Z)().show(I.ZP.val("TranslationDisclamer"))}))):t.hide(),o.nd.layout.reflow()},_onResize:function(e,t){this._disabled||(this._view.disable(),this._contextMenuController&&this._contextMenuController.hide(),this._builder.resize(t),this._createRenderersTasksTimeoutID&&clearTimeout(this._createRenderersTasksTimeoutID),this._createRenderersTasksTimeoutID=setTimeout(this._createRenderersTasks.bind(this),100),this._rebuild())tviewCleared"),this._clearRightColumns()},_clearRightColumns:function(){var e=this;p.busy.resetPromise.then((function(){var t=null,n=null;if(e._view.columns().forEach(-1,(function(i){if(i.isVisible()||e._columnHasTokenizedArticle(i))return!1;n||(n=i),i.columnIdx()<=0&&(t=i)})),t){var i=!!t.prev()&&t.prev().type()!==d.Xp.Misc;e._view.removeColumns(new d.JD(t,n)),i&&(e._view.appendLoadingColumn(!0).state().controller=e),e._appendColumnsTask&&e._appendColumnsTask.abort(),e._view.invalidate()}e._articlesFeedManager.items.forEach(-1,(function(t){if((0,k.tJ)(t)||t.tokenized())return!1;e._articlesFeedManager.removeArticle(t,!0)})),e._ensureItems()}))},_onClick:function(e,t){if(!this._disabled&&t.columns&&!t.columns.isEmpty()&&t.columns.column.state().controller===this&&!t.event.ndScrollerZoneActive){var n=t.columns.column.type();if(n===d.Xp.SectionHeader||n===d.Xp.ImagesHeadline||n===d.Xp.CoverBlock||n===d.Xp.Content){if(n===d.Xp.ImagesHeadline||n===d.Xp.CoverBlock){for(var i=t.columns.column;i&&!i.cells().length;)i=i.prev();t.columns.column=i}var r=this._imageContext(t.x,t.y,t.columns);if(r&&!r.type){var o=u.Z.current.textViewContainer.rect(),a=u.Z.current.textViewContainer.elm().offset(),s=o.left+a.left,c=s+o.width,l=o.top+a.top,h=l+o.height,p=Math.ceil(r.scale*o.width/r.width),f=Math.ceil(r.scale*o.height/r.height),m=Math.min(p,f),g=r.left+r.width/2,v=r.top+r.height/2;return r.width=Math.round(m*r.width/r.scale),r.height=Math.round(m*r.height/r.scale),r.scale=m,r.left=Math.round(g-r.width/2),r.left<s?r.left=s:r.left+r.width>c&&(r.left=c-r.width),r.top=Math.round(v-r.height/2),r.top<l?r.top=l:r.top+r.height>h&&(r.top=h-r.height),void E.O.show(r)}if(n&&(r=this._articleContext(t.x,t.y,t.columns)))return this._jump(r.article),t.handled=!0,!1}}},_onDoubleClick:function(e,t){if(!this._disabled&&t.columns&&!t.columns.isEmpty()&&t.columns.column.state().controller===this){switch(t.columns.column.type()){case d.Xp.SectionHeader:case d.Xp.Header:case d.Xp.CategoryTail:case d.Xp.Monitors:case d.Xp.AdBlock:case d.Xp.RecommendedOpinions:case d.Xp.Replies:return}return this._readMore(t.x,t.y,t.columns),t.handled=!0,!1}},_onReadMore:function(e,t){this._disabled||t.columns.head().state().controller!==this||(b.U.send(new w.a4),this._readMore(t.x,t.y,t.columns))},_readMore:function(e,t,n){var i=this;if(!this._disabled&&!n.column.state().expanded&&n.column.layouts()){var r=n.head();if(n.column.layouts().length>1||n.column.state().isBundle){var a=this._view.scroller.elm.offset().top;t-=a;var s=n.column,u=s.cell(t);if(!u)return;var c=u.layout;if(c){var l=c.dataItem();this._currentViewState.article(l).type(0),this._currentViewState.expandedArticle(l),this._preventExpandAnimation=!1,l.access().then((function(){i._preventExpandAnimation?i._preventExpandAnimation=void 0:i._view.bundleToMultiColumnsAnimation().play(s,t).then((function(e){for(var t=0;t<e.expanded.length;++t){var n=e.expanded[t].state();n.controller=i,n.expanded=!0}e.newnext&&(e.newnext.state().controller=i)}))})).catch((function(){i._preventExpandAnimation=void 0}))}else{for(var h,p=r.cells(),f=[],m=0;m<p.length;++m)p[m].elm.find("article").each((function(){var e=o(this),n={id:e.attr("aid"),type:parseInt(e.attr("type"),10),lines:parseInt(e.attr("lines"),10)};f.push(n);var i=e.offset().top-a;t<i||t>i+e.height()||(h=n.id)}));if(!h||r.state().expandedArticleId===h)return;var g=this._articlesFeedManager.getArticleById(h);this._currentViewState.article(g).type(0),this._currentViewState.expandedArticle(g),this._preventExpandAnimation=!1,g.access().then((function(){if(i._preventExpandAnimation)i._preventExpandAnimation=void 0;else{var e=v._L.play(g,n.column,f);if(e){var t=e.state();t.controller=i,t.expandedArticleId=h}}})).catch((function(){i._preventExpandAnimation=void 0,A.Z.log("_readMore -> failed to load article ".concat(h))}))}}else r.type()===d.Xp.Header?(t-=this._view.scroller.elm.offset().top,v.xU.play(r,t).then((function(e){if(e&&e.newnext&&e.newnext.count())for(var t=e.newnext.head(),n=0;n<e.newnext.count()&&(t.state().controller=i,t=t.next());++n);}))):r.type()===d.Xp.Monitors?(t-=this._view.scroller.elm.offset().top,v.kD.play(r,t).then((function(e){if(e&&e.newnext&&e.newnext.count())for(var t=e.newnext.head(),n=0;n<e.newnext.count()&&(t.state().controller=i,t=t.next());++n);}))):r.type()===d.Xp.Replies?(t-=this._view.scroller.elm.offset().top,v.Zb.play(r,t).then((function(e){if(e&&e.newnext&&e.newnext.count())for(var t=e.newnext.head(),n=0;n<e.newnext.count()&&(t.state().controller=i,t=t.next());++n);}))):r.type()===d.Xp.BookmarkPages?v.vL.play(r):r.type()&&r.type()!==d.Xp.SocialInfo||this._expandMultipleColumnArticle(n)}},expandFirstArticle:function(e){var t=this.firstAvailableArticle(),n=t&&this._view.columnsByArticle(t);return n&&n.count()&&this._expandMultipleColumnArticle(n,e)||Promise.reject()},_expandMultipleColumnArticle:function(e,t){var n=this;if(e.head().state().expanded)return this._view.scrollTo(e.head()),Promise.resolve();var i,r,o=e.head().layouts()[0],a=o.dataItem();return this._currentViewState.article(a).type(0).expandedArticle(a),this._preventExpandAnimation=!1,a.access().then((function(){return n._preventExpandAnimation?(n._preventExpandAnimation=void 0,Promise.reject(new Error("Animation was cancelled."))):p.busy.resetPromise}),(function(e){return n._preventExpandAnimation=void 0,A.Z.log("_readMore -> failed to load article ".concat(a.Id)),Promise.reject(e)})).then((function(){return n._view.expandArticleAnimation().isActive?Promise.reject(new Error("Another animation is in progress.")):(i=o.expand()).renderAsync()})).then((function(s){return(r=s).forEach((function(e){var t=e.state();t.controller=n,t.expanded=!0})),n._currentViewState.expandedArticle(a),n._view.expandArticleAnimation().play(o,e,i,r,t)})).then((function(){u.Z.current.textView.replaceColumns(e,r),e.dispose(),n._view.invalidate(!0)}))},_onContinuedFrom:function(e,t){var n=this,i=t.columns,r=i.head();if(!this._disabled&&r.state().controller===this){var o=r.layouts()[0];if(!o.config().fromStart)if(r.articlesCount()>1);else{var a=o.dataItem();this._currentViewState.article(a).type(0).expandedArticle(a),this._preventExpandAnimation=!1,a.access().then((function(){if(n._preventExpandAnimation)n._preventExpandAnimation=void 0;else{var e=o.expand(!0),t=e.render().forEach((function(e){var t=e.state();t.controller=n,t.expanded=!0}));n._currentViewState.expandedArticle(a),n._view.expandArticleAnimation().play(o,i,e,t).then((function(){u.Z.current.textView.replaceColumns(i,t),i.dispose(),n._view.invalidate()}))}})).catch((function(){n._preventExpandAnimation=void 0,A.Z.log("_readMore -> failed to load article")}))}}},_onContextMenuRequested:function(e,t){if(!this._disabled&&t.columns.head().state().controller===this)switch(t.columns.column.type()){case d.Xp.SectionHeader:case d.Xp.Header:case d.Xp.ImagesHeadline:case d.Xp.Monitors:case d.Xp.Opinion:case d.Xp.Profile:case d.Xp.SocialInfo:case d.Xp.AdBlock:case d.Xp.Social:case d.Xp.BookmarkPages:case d.Xp.RecommendedOpinions:case d.Xp.InitBlock:case d.Xp.Replies:case d.Xp.PromoSection:return;default:var n=this._articleContext(t.x,t.y,t.columns);if(!n)return;var i={controller:this,article:n.article,preview:{previewType:m.ZP.contextPreviewType.article}};this._contextMenuController?this._contextMenuController.context(i):this._contextMenuController=new y.Z(T.Z,i),this._contextMenuController.show({context:{left:n.left+this._view.scroller.left,top:n.top,width:n.width,height:n.height},position:{x:t.x,y:t.y,align:{y:o.nd.ui.menu.align.center,x:o.nd.ui.menu.align.center}}}),b.U.send(new w.qp)}},_onPinch:function(e,t){if(!this._disabled){var n=this._imageContext(t.x,t.y,t.columns);if(n)E.O.show(n);else if(n=this._articleContext(t.x,t.y,t.columns)){for(var i=0,r=[],o=0;o<n.article.Blocks.length;++o){var a=n.article.Blocks[o].Text;if(r.push("<p>".concat(a,"</p>")),(i+=a.length)>1024)break}Z.n.show(r.join(""))}}},_onGesturesEnd:function(){this._disabled||this._textSizeManager&&(this._textSizeManager.dispose(),delete this._textSizeManager)},_onGesturesStart:function(){if(!this._disabled){var e=new Date(this._gesturesStartTime.getTime()+this._updateInterval);(new Date).getTime()>e.getTime()&&this._clearData(),this._gesturesStartTime=new Date}},_columnHasTokenizedArticle:function(e){var t=e.layouts();if(!t)return!1;for(var n=t.length-1;n>=0;--n)if(t[n].dataItem().tokenized())return!0;return!1},_articleContext:function(e,t,n){var i=n.column;if(i.type()===d.Xp.InitBlock)return null;if(i.type()===d.Xp.SectionHeader||i.type()===d.Xp.CoverBlock){for(var r=0,s=0,u=i.cells(),c=null,l=0;l<u.length&&(u[l].elm.find("article").each((function(){var e=o(this);if(r=e.offset().top,s=e.height(),!(t<r||t>r+s))return c=e.attr("aid"),!1})),!c);l++);return c?{x:e,y:t,left:i.left(),top:r,width:x.G4,height:s,article:this._articlesFeedManager.getArticleById(c)}:null}if(i.type()===d.Xp.ImagesHeadline)return i.aid?{x:e,y:t,left:i.left(),top:0,width:x.G4,height:x.$0,article:this._articlesFeedManager.getArticleById(i.aid)}:null;var h=0,p=x.$0,f=null;if(i.articlesCount()>1){u=i.cells();var m=function(e){var n=null;return u[e].elm.find("article").each((function(){var e=o(this);if(h=e.offset().top,p=e.height(),!(t<h||t>h+p))return n=e.attr("aid"),!1})),n?(f=g._articlesFeedManager.getArticleById(n))?"break":void 0:"continue"},g=this;for(l=0;l<u.length&&"break"!==m(l);++l);}else if(i.layouts()&&i.layouts().length>1){t-=this._view.scroller.elm.offset().top;var v=i.cell(t);if(!v)return!1;var y=v.layout;if(!y)return!1;2===(f=y.dataItem()).Type?(p=v.height,h=v.top+this._view.scroller.elm.offset().top):(p=y._articleElm.height(),h=y.articleElm().find("header").offset().top)}else{if(i.layouts()&&0===i.layouts().length)return!1;for(f=i.layouts()[0].dataItem(),h=this._view.scroller.elm.offset().top;i;){var _=i.prev();if(!_)break;var b=_.layouts();if((0,a.isEmpty)(b)||b[0].dataItem()!==f)break;i=_}}return{x:e,y:t,left:i.left(),top:h,width:i.articleColumnsCount()*x.G4,height:p,article:f}},_imageContext:function(e,t,n){var i=null,r=n.head(),a=this._view.scroller.left;if(n.column.type()===d.Xp.ImagesHeadline){for(var s=n.column;s&&!s.cells().length;)s=s.prev();r=s}for(;r;){for(var u=r.cells(),c=function(n){var s=u[n],c=s.left+a;return c+s.colspan*x.G4<e?"continue":(r.type()===d.Xp.ImagesHeadline?s.elm.find("article[aid=".concat(r.aid,"] img")).not('img[noresize="true"]').each((function(){var n=o(this),a=n.offset().top,s=n.height();if(c=n.offset().left,!(t<a||t>a+s)){var u=n.width();return i={x:e,y:t,elm:n,left:c,top:a,width:u,height:s,src:n.attr("src"),url:n.attr("nd_url"),scale:parseInt(n.attr("nd_scale"),10),maxScaleUrl:n.attr("nd_maxScaleUrl"),type:r.type()},!1}})):s.elm.find("img").not('[noresize="true"]').each((function(){var n=o(this),a=n.offset().top,s=n.height();if(!(t<a||t>a+s)){var u=n.width();return i={x:e,y:t,elm:n,left:c,top:a,width:u,height:s,src:n.attr("src"),url:n.attr("nd_url"),scale:parseInt(n.attr("nd_scale"),10),maxScaleUrl:n.attr("nd_maxScaleUrl"),type:r.type()},!1}})),i?"break":void 0)},l=u.length-1;l>=0&&"break"!==c(l);--l);if(i||r===n.column)break;r=r.next()}return i},_rebuild:function(){var e=this;this._isVisible&&(this._ndLoadingHandle=g.ZP.show(tcorrectColumnsCount(10),e._view.enable()})))},_resetPromise:null,_reset:function(){var e=this;if(this._resetPromise)return this._resetPromise;var t=this._resetPromise=new Promise((function(t){var n=function(){e._view.isUpdateable()?(e._view.reset(),(0,c.Oh)().reset(),e._builder.reset(),e._appendColumnsTask&&e._appendColumnsTask.abort(),e._prependColumnsTask&&e._prependColumnsTask.abort(),t() t.then((function(){e._resetPromise=null})),t},_screensToBuild:8,screensToBuild:function(e){return arguments.length?(this._screensToBuild=e,this):this._screensToBuild},_initialScreensToBuild:1,initialScreensToBuild:function(e){return arguments.length?(this._initialScreensToBuild=e,this):this._initialScreensToBuild},_correctColumnsCountTimeoutID:0,_direction:0,_correctColumnsCountHandler:null,_appendColumnsTask:null,_prependColumnsTask:null,_correctColumnsCount:function(e){var t=this;if(this._isVisible&&!this._disabled){if(this._correctColumnsCountTimeoutID&&(clearTimeout(this._correctColumnsCountTimeoutID),this._correctColumnsCountTimeoutID=0),(0,a.isNumber)(e))return this._correctColumnsCountHandler||(this._correctColumnsCountHandler=this._correctColumnsCount.bind(this)),void(this._correctColumnsCountTimeoutID=setTimeout(this._correctColumnsCountHandler,e));if(x.YD)if(!this._view.isUpdateable()||!I.ZP.isLoaded()||this._appendColumnsTask||this._prependColumnsTask||p.busy.isSet)this._correctColumnsCount(100);else{this._updatePagesPanel(10);var n,i,r,o=x.YD*this._screensToBuild,s=1===x.YD?3:x.YD,u=this._view.columns(),c=u.count(),l=u.head(),h=u.tail();if(l&&l.type()===d.Xp.Misc&&(l=l.next(),--c),h&&h.type()===d.Xp.Misc&&(h=h.prev(),--c),!u.isEmpty()&&l&&h){if(n=this._view.leftColumnsCount(),i=this._view.rightColumnsCount(),this._isShowing)this._direction=0;else if(i<=0){if(h.isLast()&&c>x.YD)return;this._direction=1}else if(n<=0){if(l.isFirst()&&c>x.YD)return;this._direction=-1}}else n=i=this._direction=0;if((i<=0&&n>0||L&&this._view.scrollDirection()>0&&n>s)&&!this._isShowing&&c>(r=c-n+s)){for(var f=l,m=l,v=null;f&&c>r;){var y=f.next();(!y||y.columnIdx()<=0)&&(v=f),f=y,--c}v&&(l=v.next(),this._prependColumnsTask&&this._prependColumnsTask.abort(),this._view.removeColumns(new d.JD(m,v)))}if((n<=0&&i>0||L&&this._view.scrollDirection()<0&&i>s)&&!this._isShowing&&c>(r=c-i+s)){for(f=h,m=null,v=h;f&&c>r;)f.columnIdx()<=0&&(m=f),f=f.prev(),--c;m&&(h=m.prev(),this._appendColumnsTask&&this._appendColumnsTask.abort(),this._view.removeColumns(new d.JD(m,v)))}if(this._config.enableExpiredDataItemsRemoval&&this._articlesFeedManager.removeOldArticles(this._config.dataItemExpirationDuration||36e5),this._isShowing?(r=x.YD*this._initialScreensToBuild+1,n>0&&(r+=n)):c>x.YD?r=n<=0||i<=0?x.YD+s+o:L&&c<x.YD+s+o?c+1:c:(r=x.YD,n>0&&(r+=n),i>0&&(r+=i)),this._articlesFeedManager.isEmpty())this._view.columns().isEmpty()&&(this.appendEndColumn(),this._view.invalidate()),this._ndLoadingHandle=g.ZP.hide(this._ndLoadingHandle),this._showCallback();else{var _=!1,b=[];if(this._allowResetREOF&&h&&h.isLast()&&(h.isLast(!1),this._articlesFeedManager.resetREOF()),this._view.scrollDirection()>=0&&c<r&&(!h||!h.isLast())){var w=(new Date).getTime(),C=this._appendColumnsTask=new D(this.columns4append(h,r-c));C.promise.then((function(e){if(e)C.aborted?e.dispose():(t._appendColumns(e),t._correctColumnsCount(Math.max(100,Math.round(1.5*((new Date).getTime()-w)))));else{var n=t._articlesFeedManager.getCurrentLastArticle();n&&null===n.next()&&(h||(h=u.tail()),h&&!h.isLast()&&(h.isLast(!0),t._checkViewAfterUpdate()))}}),a.noop).finally((function(){C.aborted&&(_=!0),t._appendColumnsTask=null})),b.push(C.promise.catch(a.noop))}if(this._view.scrollDirection()<0&&c<r||h&&h.isLast()&&c<x.YD||void 0===window.TextViewAPI&&this._isShowing){var P=this._isShowing&&!n?1:r-c;if(P>0){var S=(new Date).getTime(),T=this._prependColumnsTask=new D(this.columns4prepend(l,P));T.promise.then((function(e){e&&(T.aborted?e.dispose():(t._prependColumns(e),t._correctColumnsCount(Math.max(100,Math.round(1.5*((new Date).getTime()-S))))))}),a.noop).finally((function(){T.aborted&&(_=!0),t._prependColumnsTask=null})),b.push(T.promise.catch(a.noop))}}Promise.all(b).finally((function(){_||(t._view.columns().isEmpty()?(t.appendEndColumn(),t._view.invalidate(),t._ndLoadingHandle=g.ZP.hide(t._ndLoadingHandle),t._showCallback()):t._checkViewAfterUpdate())}))}this._checkViewAfterUpdate()}}},_appendColumns:function(e){if(this._view.isUpdateable()){var t=this._view.columns().tail(),n=!!t&&t.type()===d.Xp.Misc;e?e.count()&&(n?this._view.prependColumns(t,e):this._view.appendColumns(e)):null===e&&(n&&this._view.removeColumns(1),(t=this._view.columns().tail())&&t.isLast(!0)),this._checkViewAfterUpdate()}else setTimeout(this._appendColumns.bind(this,e),100)},_prependColumns:function(e){if(this._view.isUpdateable()){var t=this._view.columns().head(),n=!!t&&t.type()===d.Xp.Misc;e?e.count()&&(n?this._view.appendColumns(t,e,!0):this._view.prependColumns(e)):(n&&this._view.removeColumns(-1),(t=this._view.columns().head())&&t.isFirst(!0)),this._checkViewAfterUpdate()}else setTimeout(this._prependColumns.bind(this,e),100)},_checkViewAfterUpdate:function(){var e=this._view.columns(),t=e.head(),n=e.tail();if(t){if(t.type()===d.Xp.Misc){var i=t.next();if(!i)return;i.isFirst()&&this._view.removeColumns(-1),t=i}else t.isFirst()||(this._view.prependLoadingColumn().state().controller=this);if(n.type()===d.Xp.Misc){var r=n.prev();r.isLast()&&!n.isLast()?(this._view.removeColumns(1),this.appendEndColumn()):!r.isLast()&&n.isLast()&&(this._view.removeColumns(1),this._view.appendLoadingColumn(!0).state().controller=this),n=r}else n.isLast()?this.appendEndColumn():this._view.appendLoadingColumn(!0).state().controller=this;if(this._view.invalidate(),n&&n.isLast()){var o=this._view.scroller,s=this._view.viewport(),u=o.left,c=u-s.left,l=o.width+u-s.left-s.width;if(l<0&&c<0){var h=Math.max(l,c),p=this._view.columnByX(h+s.left);p?(this._view.moveTo(p),p.type()===d.Xp.Misc&&this._correctColumnsCount(10)):this._view.scroll(-h,100)}}var f=0;(0,a.forEach)(this._view.visibleColumns(),(function(e){f+=e.width()})),(f>=this._view.viewport().width||t&&n&&t.isFirst()&&n.isLast())&&(this._ndLoadingHandle=g.ZP.hide(this._ndLoadingHandle),this._showCallback())}},columns4append:function(e,t){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,u,c,l,d,h,p,f,m,g,v=this;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:if(!t||this._disabled)throw new Error("Invalid parameters or disabled.");return n={flag:0,ignoreGroupHeader:this._ignoreGroupHeader,issueIntroDisabled:this._config.issueIntroDisabled},[4,this._articlesFeedManager.loadPromise];case 1:if(i.sent(),this._appendColumnsTask.aborted)throw new Error("Aborted");if(r=null,e)for(o=e;o;o=o.prev())if((u=o.layouts())&&u.length){r=u[0].dataItem();break}if(c=this._currentViewState.article(),r||(r=c),r?(this._currentViewState.type()||(n.flag|=1),(this._currentViewState.jump()||r===this._currentViewState.expandedArticle())&&(this._currentViewState.type()||(n.expandedArticle=r),this._currentViewState.jump(!1))):(l=this._articlesFeedManager.getFirstArticle(),(d=this._currentViewState.expandedArticleId())&&!n.expandedArticle&&(l&&(0,a.isFunction)(l.dataType)&&l.dataType()===s.g.initBlock&&(0,a.isFunction)(l.tokenized)&&l.tokenized(!0),n.expandedArticle=this._articlesFeedManager.getArticleById(d)),r=l),!r)throw new Error("Not sure what article to start building from.");for(h=[r],p=r.nextItem;p;p=p.nextItem)h.push(p);m=0,i.label=2;case 2:if(!(m<h.length))return[3,7];r=h[m],i.label=3;case 3:return i.trys.push([3,5,,6]),[4,r.load()];case 4:return f=i.sent(),[3,7];case 5:if(i.sent(),this._appendColumnsTask.aborted)throw new Error("Aborted");return[3,6];case 6:return++m,[3,2];case 7:if(this._appendColumnsTask.aborted)throw new Error("Aborted");return n.expandedArticle&&n.expandedArticle.isPreview()&&delete n.expandedArticle,[4,this._builder.build(f,t,n)];case 8:if(g=i.sent(),this._appendColumnsTask.aborted)throw g&&g.dispose(),new Error("Aborted");return g&&g.forEach((function(e){e.state().controller=v})),[2,g]}}))}))},columns4prepend:function(e,t){var n=this;if(!t||!e||this._disabled)return Promise.reject();for(var i=null,r=e;r;r=r.next()){var o=r.layouts();if(o&&o.length){i=o[0].dataItem();break}}if(!i)return Promise.reject(new Error("Not sure what article to start building from."));var a=this._currentViewState.article(),s={flag:0,ignoreGroupHeader:this._ignoreGroupHeader,issueIntroDisabled:this._config.issueIntroDisabled};return(this._currentViewState.jump()||a&&a===this._currentViewState.expandedArticle())&&(this._currentViewState.type()||(s.expandedArticle=a),this._currentViewState.jump(!1)),s.expandedArticle&&s.expandedArticle.isPreview()&&delete s.expandedArticle,this._builder.build(i,-t,s).then((function(e){if(n._prependColumnsTask.aborted)throw e&&e.dispose(),Each((function(e){e.state().controller=n})),e}))},_setMinCount:function(e){this._minCount=(e||0)+10},_updateCurrentViewState:function(e){for(;e&&e.type()===d.Xp.Misc;e=e.next());if(e)if(e.type()!==d.Xp.SectionHeader){var t=e.layouts();t&&t.length&&this._currentViewState.article(t[0].dataItem()).type(0)}else this._currentViewState.article(e.section().article(0)).type(1)},_onCurrentViewStateChanged:function(){var e;this._currentHistoryTokenType!==o.nd.historyTokenTypes.notDefined&&(this._currentArticleHistoryToken=this._currentHistoryTokenType===o.nd.historyTokenTypes.left?this._currentViewState.getHistoryLeftToken():this._currentViewState.getHistoryRightToken(),e=this._currentViewState.getArticlePosition(),this._setMinCount(e)),this._fire("viewStateChanged",{id:this._currentViewState.id(),type:this._currentViewState.type(),expanded:this._currentViewState.expandedArticleId()===this._currentViewState.id(),articleHistoryToken:this._currentArticleHistoryToken,articlePosition:e})},jumpToPage:function(e){var t=this;this._disabled||this._articlesFeedManager.load(this._currentArticleHistoryToken,this._minCount).then((function(){t._jump(t._articlesFeedManager.getFirstArticle(e),!0)}))},jump:function(e,t){var n=this;this._disabled||this._articlesFeedManager.load(this._currentArticleHistoryToken,this._minCount).then((function(){var i=n._articlesFeedMa&&i.load().then((function(){n._jump(i,t)}))}))},_jumpTimeoutID:0,_jump:function(e,t){if(this._jumpTimeoutID&&(clearTimeout(this._jumpTimeoutID),this._jumpTimeoutID=0),this._view.isUpdateable())return t||this._currentViewState.expandedArticle(e),!!this._shortJump(e,t)||this._longJump(e,t);this._jumpTimeoutID=setTimeout(this._jump.bind(this,e,t),100)},_shortJump:function(e,t){var n=this,i=this._view.columnsByArticle(e);if(i.isEmpty())return!1;var r=i.head();if(t)return this._view.scrollTo(r),!0;if(r.articlesCount()>1){for(var s=r.cells(),u=[],c=0;c<s.length&&(s[c].elm.find("article").each((function(){var t=o(this),n={id:t.attr("aid"),type:parseInt(t.attr("type"),10),lines:parseInt(t.attr("lines"),10)};if(u.push(n),n.id===e.Id)return n.type||n.lines?void 0:(u=void 0,!1)})),u);++c);u?(this._view.scrollTo(r),v._L.play(e,r,u).state().controller=this):this._view.scrollTo(r)}else if(r.state().isBundle){var l=(0,a.find)(r.cells(),(function(t){return t.smartFlowItemId===e.Id}));if(!l)return!1;if(!l.layout)return!1;this._currentViewState.article(e).type(0),this._preventExpandAnimation=!1,Promise.all([e.access(),this._view.scrollTo(r)]).then((function(){n._preventExpandAnimation?n._preventExpandAnimation=void 0:n._view.bundleToMultiColumnsAnimation().play(r,l.top+l.height/2).then((function(t){n._currentViewState.expandedArticle(e);for(var i=0;i<t.expanded.length;++i){var r=t.expanded[i].state();r.controller=n,r.expanded=!0}t.newnexction(){n._preventExpandAnimation=void 0}))}else r.type()||this._expandMultipleColumnArticle(i);return!0},_mediumJump:function(e,t){if(!this._caller)return!1;var n=this._view.columns();if(!n||!n.count())return!1;var i=n.head();if(i.type()===d.Xp.Misc&&(i=i.next()),i.state().controller===this&&i.section()===e.Section&&this._caller.prepend&&i.idx()){var r=this._sectionsManager.section(e.Section).build(0,-i.idx(),t?void 0:e),o=null;for(i=r.head();i;)!o&&i.hasItem(e)&&(o=i),i.state().controller=this,i=i.next();if(o)return this._caller.prepend(r),this._view.scrollTo(o),!0;for(i=r.head();i;i=i.dispose(1));}if((i=n.tail()).type()===d.Xp.Misc&&(i=i.prev()),i.state().controller===this&&i.section()===e.Section&&this._caller.append){for(r=this._sectionsManager.section(e.Section).build(i.idx()+1,0,t?void 0:e),o=null,i=r.head();i;)!o&&i.hasItem(e)&&(o=i),i.state().controller=this,i=i.next();if(!o){for(i=r.head();i;i=i.dispose(1));return!1}return this._caller.append(r),this._view.scrollTo(o),!0}return!1},_longJump:function(e,t){this._currentViewState.article(e).type(0).jump(!t),this._view.reset(),this._ndLoadingHandle=g.ZP.show(this._ndLoadingHandle),this._correctColumnsCount()},visibleArticles:function(){if(this._disabled)return null;var e=this._view.visibleColumns();if(!e)return null;for(var t=[],n={},i=0;i<e.length;++i)if(!e[i].type()&&!e[i].columnIdx()){var r=e[i].layouts();if(r)for(var o=r.length-1;o>=0;--o)if(r[o]){var a=r[o].dataItem();n[a.Idx]||(n[a.Idx]=!0,t.push(a))}}return t.length?t:null},_findFirstArticle:function(){if(this._disabled)return null;var e=this._view.visibleColumns();if(!e)return null;for(var t=0;t<e.length;++t){var n=e[t].layouts();if(n)for(var i=n.length-1;i>=0;--i){var r=n[i].dataItem();if(r)return r}}return null},firstAvailableArticle:function(){return this._firstArticleByPredicate((function(e){return e&&e.Type===s.g.article&&e.Id}))},firstAvailableArticleToListen:function(){return this._firstArticleByPredicate((function(e){return e&&e.Type===s.g.article&&e.Id&&e.Issue}))},_firstArticleByPredicate:function(e){if(this._disabled)return null;var t=this._findFirstArticle();if(!t)return null;for(var n=t;n;n=n.next())if(e(n))return n;return null},_lastVisiblePages:null,_updatePagesPanelTimeoutID:0,_updatePagesPanel:function(e){if(this._updatePreviewPanel)if(this._updatePagesPanelTimeoutID&&(clearTimeout(this._updatePagesPanelTimeoutID),this._updatePagesPanelTimeoutID=0),(0,a.isNumber)(e))this._updatePagesPanelTimeoutID=setTimeout(this._updatePagesPanel.bind(this),e);else if(this._view.isUpdateable()){var t=this.visibleArticles();if(t){for(var n=null,i={},r=t.length-1;r>=0;--r){var s=t[r];i[s.Page.number]||(i[s.Page.number]=1,n?n.push(s.Page.number):n=[s.Page.number])}n&&(n.sort(),!o.nd.viewer.pages||this._lastVisiblePages&&n.join(",")===this._lastVisiblePages||(o.nd.viewer.pages.startActivePageValidation(),o.nd.viewer.pages.setActivePageNumbers(n),o.nd.viewer.pages.finishActivePageValidation())),this._lastVisiblePages=n?n.join(","):null}}else this._updatePagesPanel(100)},translate:function(e,t){this._disabled||e.translation(t.code(),this._onArticleTranslated.bind(this))},_onArticleTranslated:a.noop,scrollToTip:function(){for(var e=(this._articlesFeedManager.items||{}).tail();e&&!e.tokenized();){var t=e.prev();if(!t||t.tokenized())break;e=t}e&&this.jump(e.Id,!0)},contentAccessToken:function(e){return arguments.length?(this._contentAccessToken=e,e):this._contentAccessToken},dataFeedManager:function(){return this._articlesFeedManager},removeArticle:function(e){var t=this,n=this._articlesFeedManager.getArticleById(e);if(n){var i=this._view.visibleColumns();if(i&&i.length>0){var r=n.next();i[0].hasItem(n)&&r&&this._currentViewState.article(r).type(0)}}this._ndLoadingHandle=g.ZP.show(this._ndLoadingHandle),this._reset().then((function(){n&&t._articlesFeedManager.removeArticle(n),t._correctColumnsTask.abort(),this._builder.abort()}}),t.Z=N},81073:function(e,t,n){"use strict";var i=n(22970),r=n(39752),o=n(97334),a=n(123),s=n(87906),u=n(17447),c={},l=function(){function e(e,t){this._id=e,c[e]=this,t&&(this._name=t)}return e.prototype.id=function(){return this._id},e.prototype.name=function(){return this._name||u.ZP.val("TextView.Fonts.".concat(this._id.substr(0,1).toUpperCase()).concat(this._id.substr(1)))},e}(),d=null,h=null;function p(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e;n.length||(n=(0,r.Ys)(a.e3)===s.t.Android?[["fontset1"],["fontset2","Sans Serif"],["fontset3","Palatino"],["fontset4","Times"]]:[["fontset1"],["fontset2","Palatino"],["fontset3","Times New Roman"],["fontset4","Helvetica"],["fontset5","Verdana"],["fontset6","Georgia"]]),d=n.map((function(e){var t=(0,i.CR)(e,2),n=t[0],r=t[1];return new l(n,r)}))}t.Z={get currentFontId(){return h||(h=o.get("TextView.Fontset","fontset1")),h},set currentFontId(e){h!==e&&(h=e,o.set("TextView.Fontset",e))},get current(){return e=this.currentFontId,d||p(),c[e];var e},set current(e){var t=e.id();h!==t&&(Fontset",t))},get list(){return d||p(),d},initList:p}},88077:function(e,t,n){"use strict";n.d(t,{Z:function(){return _}});var i=n(24458),r=n(40180),o=n(66353),a=n(25371),s=n(20384);function u(e){this._strings=null,this._regexps={},this._pending=null,this._confirmed=!1,this._toid=0,this._hyphen=String.fromCharCode(173),this._re=new RegExp(this._hyphen,"g"),this._replacement=e,this.enabled=!1}u.prototype=function(){function e(e){var t=e.layouts();if(t&&t.length)if(t.length>1)for(var n=0;n<t.length;++n){var i=t[n];i&&i.highlight&&i.highlight(e)}else t[0].highlight&&t[0].highlight(e)h}function n(e,t){return e.index-t.index}function i(){this._strings=this._pending=null,this._regexps={};var e=a.Z.current;e&&e.textView&&(e.textView.container().elm().removeClass("highlight"),this.enabled=!1)}function u(){if(this._toid=0,this._pending&&this._pending.length){if(a.Z.current&&(a.Z.current.textView.container().elm().addClass("highlight"),this.acceptStrings(this._pending)))if(this._pending=null,this._confirmed)!function(){for(var t=a.Z.current.textView.columns().head();t;)t.type()?t=t.next():(e(t),t=t.next(t.articleColumnsCount()))}();else{var t=a.Z.current.textView.visibleColumns();if(t)for(var n=t[0];n&&n.isVisible();)n.type()?n=n.next():(e(n),n=n.next(n.articleColumnsCount()));this.enabled=!1}}else i.apply(this)}return{highlight:function(e){return this._pending=e,this._confirmed=!1,this._toid&&clearTimeout(this._toid),this._toid=setTimeout(s.proxy(u,this),500),this},confirm:function(){return this._confirmed=!0,this.enabled=!0,this._toid&&(this._toid=clearTimeout(this._toid)),u.apply(this),this},replace:function(e,t){var i=this;if(!this.enabled||!e||!this._strings)return e;var a=this._strings;t&&t.length>0&&(a(function(t){return-1!==t.indexOf(e.raw)}))})));var s=r.map(a,(function(e){return i._regexps[e]||(i._regexps[e]=function(e){return e=(e=(e=(0,o.Pm)(e)).replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")).replace(/\s+/g,"\\s+"),new RegExp("\\b".concat(e,"\\b"),"ig")}(e)),i._regexps[e]})),u=function(e,t,i){var o=e.replace(i,""),a=null,s=function(e,t){var n={index:t,length:e.length};return a?a.push(n):a=[n],r.repeaunction(e){return r.repeat(" ",e.length)}));for(var u=0;u<t.length;++u)o=o.replace(t[u],s);return a&&a.sort(n),a}((0,o.Pm)(e),s,this._re);if(!u)return e;for(var c="",l=0,d=0,h=0;h<u.length;++h){for(var p=u[h],f=l;d<p.index;)e[++l]!=this._hyphen&&++d;c+=e.substr(f,l-f),f=l;for(var m=0;m<p.length;)e[++l]!=this._hyphen&&(++d,++m);c+=this._replacement.replace("{0}",e.substr(f,l-f))}return c+e.substr(l)},getStrings:function(){return this._strings},acceptStrings:function(e){return!(r.isEmpty(e)||(e.sort(t),e=r.reduce(e,(function(e,t){if(!(0,o.hr)(t)){e.push(t);var n=r.escape(t);n!==t&&e.push(n)}return e}),[]),this._strings&&this._strings.join("")==e.join("")||(this._strings=e,this._regexps={},this.enabled=!0,0)))}}}();var c,l,d=u,h=n(27670),p=n(20384),f={},m={search:'<span class="hi" no-hghlt="true">{0}</span>',topic:'<span class="hi-s" no-hghlt="true">{0}</span>'},g=null,v=/"([^"]+)"|'([^']+)'|([^\s]+)/g;function y(e){return Array.isArr.map((func).filter((function(e){return e&&e.length}))}var _={highlight:function(e){return c||(c=new d(m.search)),c.highlight(y(e))},confirm:function(){return c.confirm()},highlightTopic:function(e){l||(l=new d(m.topic));var t=y(e);return l.acceptStrings(t),l},confirmTopic:function()},resetHighlightTopic:function(){l=null},highlightSection:function(e,t){if(e&&t){var n=f[e];return n||(f[e]=n=new d(m.topic))n:function(e){if(e)return f[e].confirm()},replace:function(e,t){var n=e,o=[];c&&(n=c.replace(n),o=r.map(c.getStrings(),(function(e){return e.toLowerCase()})));var a=h.Z.getActiveViewName();return a===i.n3.Monitors||a===i.n3.TextView?l&&(n=l.replace(n,o)):a===i.n3.TopNews&&t&&f[t.GroupName]&&(n=f[t.GroupName].replace(n,o)),n},flatten:function(e){if(g||(g=function(){var e,t=[];for(var n in m)m.hasOwnProperty(n)&&(e=(m[n].match(/<\w.+?>/i)||[])[0])&&t.push(e);return t}()),g.length){for(var t=[].slice.call(e.children,0),n=!1,i=0;i<t.length;i++)for(var r=t[i],o=0;o<g.length;o++)0==r.outerHTML.search(g[o])&&(p(p(r).contents()).unwrap(),n=!0);n&&e.normalize()}}}},63447:function(e,t,n){"use strict";var i=n(84672),r=n(40180),o=100,a=500,s=setTimeout(p,o),u=!0,c=!0,l=[];function d(){u&&(u=!1,clearTimeout(s),s=0)}function h(){!u&&c&&(u=!0,s=setTimeout(p,a))}function p(){if(u&&c)if(s&&clearTimeout(s),l.length){var e=l.shift(),t=(new Date).getTime(),n=e();if(n&&(0,r.isFunction)(n.then))n.then((function(){var e=(new Date).getTime()-t;s=setTimeout(p,Math.max(o,Math.round(1.5*e)))}),(function(){var e=(new Date).getTime()-t;s=setTimeout(p,Math.max(o,Math.round(1.5*e)))}));else{var i=(new Date).getTime()-t;s=setTimeout(p,Math.max(o,Math.round(1.5*i)))}}else s=setTimeout(p,a)}i&&i.busy.bind({set:d,reset:h}),t.Z={add:function(e){c&&Array.prototyp},pause(){l=[]}0,h())},disable:function(){c&&(c=!1,d())}}},79430:function(e,t,n){"use strict";var i=n(24458),r=n(2099),o=n(27670);t.Z={issueIsDisplayed:function(){var e=o.Z.getActiveViewName();return e===i.n3.PagesView||r.Z.issue()&&e===i.n3.TextView}}},27670:function(e,t,n){"use strict";n.d(t,{m:function(){return T}});var i=n(20384),r=n(60581),o=n(4169),a=n(92912),s=n(95766),u=n(78600),c=(n(60915),n(11144)),l=n(24458),d=n(13374);i.nd.viewer||(i.nd.viewer={});var h,p,f,v.getActiveViewName();return e?m[e]:null},getActiveViewNamectiveView:function(e,t){return _(m[e],t)},registerView:function(e,t,n){return t.getNavigationHistoryConfig&&i.nd.navHistory.registerView(e,t.getNavigationHistoryConfig()),t.getTopBarConfig&&i.nd.viewer.topBar&&i.nd.viewer.topBar.registerView(e,t.getTopBarConfig()),t.registerRoutes&&t.registerRoutes(r.L),m[e]=t,t.__viewName=e,n&&(t.__viewPanel=n),this},activeViewChanging:function(e,t){i.nd.event.bind(v,"activeViewChanging",e,t)},activeViewChanged:function(e,t){i.nd.event.bind(v,"activeViewChanged",e,t)},findView:function(e){return m[e]},tryChangeActiveView:function(e){var t=e&&e.viewName&&m[e.viewName.toLowerCase()];if(t)return _(t,e).catch((function(n){throw b(t),n||new Error("Cannot render view "+e.viewName)}));var n=e&&e.viewName?"Not supported view "+e.viewName:"View is not specified";return Promise.reject(new Error(n))},showError:function(e){return v.tryChangeActivefunction y(e){return e?e.__viewName:null}function _(e,t){var n=new c.B;return t=t||{},g.finally((function(){if(e)if(h===e){var r;i.isFunction(e.reset)&&(r=e.reset(t)),(r||Promise.resolve()).then((function(){I(h,e).then(n.resolve).catch(n.reject)})).catch(n.reject)}else(function(e,t){var n=new c.B;b(h);return h=s,n.then(i.noop,(function(){h=r})),i.nd.event.trigger("activeViewChanging",v,y(s)),r?(r.__viewPanel.visible(!1),a.ZP.show(),function(e,t,n){var r=new c.B;n.callback=function(){return((p=p||(p=o.Z.get("ui.Views.noChangeViewAnimation")))||n.skipAnimation?C:w)(e,t).then(r.resolve).catch(r.reject)};var a=S(n.viewName);return i(t.__viewPanel.elm()).addClass(a),t.__viewPanel.show().elm().translateTop("-10000px"),Promise.all([t.showView(n),r.promise()])}(r,s,u).then(n.resolve).catch(n.reject)):(s.__viewPanel.show().elm().keepEmptyTransformForEl){I(r,s).then(n.resolve).catch(n.reject)})).catch(n.reject)),n.promise()})(e,t).then(n.resolve).catch(n.reject);else a.ZP.hide(),n.reject()})),g=n.promise()}function b(e){e&&i.isFunction(e.disable)&&e.disable()}function w(e,t){var n=new c.B;a.ZP.hide();var r,o=e.__viewPanel,s=t.__viewPanel,u=o.height();e!==t?(u*=-1,s.elm().translateTop(-u).css("zIndex",1),r=s):(o.elm().css("zIndex",1),s.elm().translateTop(0).css("zIndex",0),r=o);var l=i.nd.easing.nd1,d=!1;return r.elm().animate({translateTop:"+="+u+"px"},500,l,(function(){d||(d=!0,C(e,t).then(n.resolve).catch(n.reject))})),n.promise()}function C(e,t){var n=e.__viewPanel,i=t.__viewPanel;return e.hide(),n.visible(!1),i.elm().keepEmptyTransformForElm(!1).translateTop(0).css("zIndex",1),n.elm().keepEmptyTransformForElm(!1).translateTop(0).css("zIndex",0),I(e,t)}function I(e,t){if(function(e){var t=S(e);if(t!==f){var n=i(document.documentElement||document.body);f&&n.removeClass(f),n.addClass(t),f=t}}(y(t)),a.ZP.hide(),e!==t){var n=y(t);i.nd.event.trigger("activeViewChanged",v,n),n!==l.n3.EmptyView&&s.U.send(new u.vv({viewName:n}))}return Promise.resolve()}var P,x=((P={})[l.n3.TopNews]="l-textview",P[l.n3.PagesView]="l-pageview",P[l.n3.TextView]="l-textview",P[l.n3.FTSArticles]="l-textview",P[l.n3.Bookmarks]="l-textview",P[l.n3.ManageBookmarks]="l-serv",P[l.n3.EmailAlerts]="l-serv",P[l.n3.Radio]="l-radio",P[l.n3.Monitors]="l-textview",P[l.n3.Similar]="l-textview",P[l.n3.External]="l-textview",P[l.n3.Help]="l-help",P[l.n3.HotSpotsHub]="l-hotspots l-hotspots-home",P[l.n3.OpinionsHub]="l-opinions l-opinions-home",P[l.n3.StoreHub]="l-store",P[l.n3.Post]="l-post has-js",P[l.n3.Purchase]="l-purchase",P[l.n3.IssueDetails]="l-store",P);function S(e){return x[e]||""}i.nd.viewer.views=v;var T=vrolled"),u=null),t=null}))}}))}(n)}))}()},49698:function(e,t,n){"use strict";var i=n(60231),r=function(){function e(e){var t=e.opinionId,n=e.webName,r=e.text,o=e.numberOfFollowers,a=e.followedByCurrentUser;this.id=t.toString(),this.opinion=r,this.webName=n,this.supporting=i.observable(a),this.supporters=i.observable(o)}return e.prototype.update=function(e){var t=void 0===e?{}:e,n=t.supporting,r=t.supporters;void 0!==n&&this.supporting(i.unwrap(n)),void 0!==r&&this.supporters(i.unwrap(r))},e}();t.Z=r},75154:function(e,t,n){"use strict";n.d(t,{Aj:function(){return _},FO:function(){return g},LU:function(){return h},QC:function(){return m},h_:function(){return p},mv:function(){return y},n5:function(){return l},s3:function(){return f},sx:function(){return d}});var i=n(74981),r=n(88769),o=n(4169),a="v1",s="http://pruse-snippets-staging.azurewebsites.net/v1",u=XMLHttpReturn i.Z.get("".concat(a,"/pagesets"),e)}function d(e){return i.Z.post("".concat(a,"/pagesets"),"",e,{disableRetry:!0})}function h(e,t){return i.Z.put("".concat(a,"/pagesets"),e,t,{disableRetry:!0})}function p(e){return i.Z.get("".concat(a,"/pagesets"),"".concat(e,"/collections"))}function f(e){return i.Z.get("".concat(a,"/issues"),"".concat(e,"/pagesets"))}function m(e){return i.Z.delete("".concat(a,"/pagesets"),"".concat(e,"/collections"),{disableRetry:!0})}function g(e){return i.Z.get("".concat(a,"/pagesets"),"".concat(e,"/directlink"))}function v(e,t){return e?t?new Promise((function(n,i){var r=new u;r.open(e,t,!0),r.onreadystatechange=function(){try{if(r.readyState===u.HEADERS_RECEIVED){var e=r.getResponseHeader("Location");n({status:r.status,location:e})}}catch(e){i(e)}},r.send()})):Promise.reject(new Error("Url not specified")):Promise.reject(new Error("Method not specified"))}function y(e){return e?o.Z.getAsync("snippetRenderer.apiUrl",s).then((function(t){return v("POST","".concat(t,"/pagesets/").concat(e,"/snippet"))})).then((function(e){var t=e.status,n=e.location;return t===c.accepted||t===c.created?{status:r.d6.byCode[t],url:n}:Promise.reject(new Error("Response with unknown status. Code - ".concat(t)))})):Promise.reject(new Error("pageSetId not specified"))}function _(e){return v("GET",e).then((function(e){var t=e.status,n=e.location;return t===c.ok||t===c.created?{status:r.d6.byCode[t],url:n}:Promise.reject(new Error("Response with unknown status. Code - ".concat(t)))}))}},24995:function(e,t,n){"use strict";n.d(t,{Cf:function(){return u},FO:function(){return _},G:function(){return b},KM:function(){return w},LU:function(){return m},QC:function(){return v},h_:function(){return y},n5:function(){return p},s3:function(){return g},sx:function(){return f},xT:function(){return c}});var i=n(75154),r=n(19237),o=n(40180),a=n(94777),s={create:1,update:2,delete:3},u=new r.x,cs:e.pages,enOwnerId:e.encryptedOwnerId}}function p(e){return e?i.n5(e).then((function(e){return h(e)})):Promise.reject("id not specified")}function f(e){var t=e.issue,n=e.pages;if(!t)return Promise.reject("issue not specified");if((0,o.isEmpty)(n))return Promise.reject("pages array is empty");var r={issue:t,pages:n};return i.sx(r).then((function(e){return u.next({event:s.create,data:r}),d(),e}))}function m(e,t){return e?(0,o.isEmpty)(t)?Promise.reject("pages array is empty"):i.LU(e,{pages:t}).then((function(n){return u.next({event:s.update,data:{pageSetId:e,pages:t}}),d(),n})):Promise.reject("pageSetId not specified")}function g(e,t){if(void 0===t&&(t=!0),!e)return Promise.reject("issue not specified");if(t){var n=l.get(e);if(n)return Promise.resolve(n)}return i.s3(e).then((function(t){var n=(0,o.map)(t.pageSets,h);return l.set(e,n),n}))}function v(e){return e?i.QC(e).then((function(){var t;d(),t={pageSetId:e},u.next({event:s.delete,data:t})})):Promise.reject("contentId not specified")}function y(e){return e?i.h_(e):romise.reject("pageSetId not specified")}function b(e){var t=e.issue,n=e.pages;return g){return 0===(0,o.xor)(e.pages,n).length}))}))}function w(e){var t=e.issue,n=e.pages;return b({issue:t,pages:n}).then((function(e){return e||f({issue:t,pages:n})}))}},2584:function(e,t,n){"use strict";var i=n(79913);t.Z={checkAccessForCreateBookmark:function(e){return(0,i.$k)("".concat("v1","/permissions"),"addtocollections",e,{disableRetry:!0})},checkAccessForShare:function(e){return(0,i.$k)("".concat("v1","/permission),h=l(return=i,o}return(0,i.ZT)(t,e),t}(Error);t.Z=o},53714:function(e,t,n){"use strict";n.d(t,{Z:function(){return R}});var i=n(40180),r=n(40,o.$k)(a,"get",{},{ignion(){return this._data.radiantPeriod},e}(),d=n(39752),h=n(24458),p=n(26229),f=n(55993),m=n(66353),g=n(70832),v=n(25881),y=n(7593),_=n(35547),b=n(17447),w=n(54591),C=n(14003),I=(n(42517),n(34336)).StoreHub,{catalogView:h.N1.Catalog})},e}(),A=n(77004),E=n(123),Z=n(25019),M=n(85081),D=(n(95766),n(66294),"sponsorshipstatus"),L="sponsorshipStateChanged",N=function(){function e(){this._status=void 0,this._sponsor=void 0,this._commands=void 0,this._isInIntermediateState=!1,u.has(D)?this.changeSponsorState(!1):this.ihis._status&&this.changeSponsorState(!0)},e.prototype.getStatus=function(){return this._s=function(){return this._status===c.Q.On},e.prototype.getHotzoneStatus=function(){return(0,o.$k)(a,"GetHotzoneStatus").then((function(e){return e.Enabled}))},e.proted:e}),{contentType:"application/json"})}(nged=function(e){r.Z.bir=function(){return new l(this._spo!0,!0):this.execCommands(this._commands)},e.prototype.off=function(){var e=!!this._status;this._status=null,this._commands=null,u.remove(D),e&&r.Z.trigge)}),250)):this.changeSponsorState(!0,e)},e.prototype.changeSponsorState=function(e,t){var n=this;if(!this._isInIntermediateState){this._isInIntermediateState=!0;var o=void 0===this._status;s().then((function(a){n._isInIntermediateState=!1;var s=n._status!==(null==a?void 0:a.Status);a?(o||s||t)&&(n._status=a.Status,u.set(D,n._status),n._commands=a.Commands,n._sponsor={name:a.SponsorName,id:a.SponsorId,tags:(0,i.map)(a.SponsorTags,(function(e){return e.Name.toLowerCase()})),isInternal:a.IsInternal,industry:a.Industry,hideRadiantPeriodTimer:a.HideRadiantPeriodTimer,notifications:a.Notifications?{broughtBy:a.Notifications.BroughtBy,complimentaryAccess:a.Notifications.ComplimentaryAccess}:null,radiantPeriod:a.RadiantPeriod?{startDate:new Date(a.RadiantPeriod.StartDate),endDate:new Date(a.RadiantPeriod.EndDate)}:null},e&&(t||n._status!==c.Q.Off)&&a.IsNotificationEnabled&&n.execCommands(n._commands)):(n.off(!0),nthen((function(){return r.Z.trigger(L,n)}))}),(function(){n._isInIntermediateState=!1}))}},e.prototype.initSpoimer:t.HideRadiantPeriodTimer}:e.off(!0)}))},e.prototype.execCommands=function(e){var t=this;(0,d.Ys)(E.zT)!==Z.c.Pervasive&&((0,d.Ys)(M.P7).length||(0,i.forEach)(ee.Data.Data&&(0,w.Z)().show(e.Data.Data)}(e);break;case"HtmlDialog":!function(e,t,n){(n.Params.FeaturedTitles?(0,x.FH)(n.Params.Fd((function(){return r()})),s.show(u)}))}))}(t,t._sponsor,e)}})))},e}(),R=new N},38865:function(e,t,n){"use strict";var i=n(22970),r=n(93048),o=n(23636),a=n(69458),s=n(40180),u=n(91574),c=n(18518),l=function(e){function t(t){var n=t.dialog,i=t.behaviourCase,r=e.call(this,{properties:i.properties,actions:i.actions.filter((function(e){return!(0,s.startsWith)(e.name,"$")}))})||this;return r.$actions=(0,s.reduce)(i.actions,(function(e,t){return(0,s.startsWith)(t.name,"$")&&(e[t.name.substr(1)]=new a.Z(t)),e}),{}),r._dialog=n,r}return(0,i.ZT)(t,e),t.prototype.$action=function(e){var t=this.$actions[e];if(void 0===t)throw new Error("action ".concat(e," is not deffunction(){this._dialog.hide(c.Y.Cancel)},t.prototype.action=function(e){var function(rn t._dialog.hide(c.Y.Unknown,{error:e})}))},t}(o.Z);t.Z={show:function(e){return new Promise((function(t,n){(0,r.d)(e,r.G.SUBSCRIPTION_NOT_VALID).then((function(i){null==i&&n(new Error("".concat(r.G.SUBSCRIPTION_NOT_VALID," case not configured for ").concat(e))),null==i.templateId&&n(new Error("template not configured for ".concat(r.G.SUBSCRIPTION_NOT_VALID," of ").concat(e," profile")));var o=u.Z.getParent(),a=u.Z.createInstance(o),s=new l({dialog:a,behaviourCase:i}),d={templateName:i.templateId,model:s,name:"InvalidSubscriptionDialog"};a.onHide((function(e,i){i&&i.status===c.Y.Ok?t(!0):n(i.onRestore((function(){return a.resize()})),a.show(d)})).catch(n)}))}}},93048:function(e,t,n){"use strict";n.d(t,{G:function(){return s},d:function(){return u}});var i=n(66353),r=n(74981),o="subscriptions/behaviourprofiles",a={},s=Object.freeze({SUBSCRIPTION_NOT_VALID:"SubscriptionNotValid",MANAGE_SUBSCRIPTION:"ManageSubscription"});function u(e,t){if((0,i.hr)(e))throw new Error("profileName required");if((0,i.hr)(t))throw new Error("behaviourCase required");var n="".concat(e,"-").concat(t);return void 0!==a[n]?Promise.resolve(a[n]):r.Z.get(at(t)).then((function(e){return a[n]=e,e}))}},69458:function(e,t,n){"use strict";var i=n(626),r=function(){function e(e){var t=e.name,n=e.title,r=e.decoration,o=e.clientAction,a=e.params;this.name=t,this.title=n,this.decoration=r,this._actioction(e){return this._action.activate(e)},e}();t.Z=r},23636:function(e,t,n){"use strict";var i=n(60231),r=n(40180),o=n(69458);t.Z=function(e){var t=e.properties,n=e.actions;this.properties=(0,r.assign)({},t),th,r.map)(n,(function(e){return new o.Z(e)})))}},50104:function(e,t,n){"use strict";var i=n(18525);t.Z=Object.freeze({base:i.L.Base,ad:i.L.Ad,annotation:i.L.Annotation,comments:i.L.Comments,continuedFromLink:i.L.ContinuedFromLink,image:i.L.Image,relatedAd:i.L.RelatedAd,related:i.L.Related,fullTitle:i.L.FullTitle,title:i.L.Title,subtitle:i.L.Subtitle,tools:i.L.Tools,video:i.L.Video,text:i.L.Text,translationBar:i.L.TranslationBar})},7390:function(e,t,n){"use strict";n.r(t),n.d(t,{editTopicDialog:function(){return M}});var i,r=n(81638),o=n(60231),a=n(34829),s=n(14744),u=n(96389),c=n(17447),l=n(18518),d=n(91574),h=n(61519),p=n(46524),f=((i={})[p.Ye.All]="Dialogs.AdvancedSearch.Anywhere",i[p.Ye.Headline]="Dialogs.AdvancedSearch.InHeadline",i[p.Ye",i);function m(e){return c.ZP.val(f[e])}var g,v,y=function(e,t,n){this.id=e,this.displayName=t,this.isSelected=(0,o.observable)(n)},_=function(){function e(e){var t=e.dialog,n=e.location;this.dialog=t,n=n||h.b.DefaultLocation,this.locations=[p.Ye.Headline,p.Ye.Body].map((function(e){return new y(e,m(e),n===p. e.prototype.back=function(){this.save()},e.prototype.save=function(){var e=this.locations.filter((function(e){return e.isSelected()}));this.dialog.hide(l.Y.Ok,{location:e.length===this.locations.length?p.Ye.All:e.filter((function(e){return e.isSelected()}))[0].id}),this.dialog=null},e.prototype.toggleSelection=function(e){var t=e.isSelected();t?this.locations.filter((function(t){return t.id!==e.id&&t.isSelected()})).length>0&&e.isSelected(!t):e.isSelected(!t)},e}(),b=function(){function e(){}return e.prototype.show=function(e){var t=void 0===e?{parentDialog:null,location:null}:e,n=t.parentDialog,i=t.location;return new Promise((function(e){var t=d.Z.createInstance(n),r=new _({dialog:t,location:i});t.onHide((function(t,n){e(n)})),t.show({templateName:"v7.Client.Dialogs.ResultsLocated",model:r,preventClosingOnClickOutside:!0})}))},e}(),w=new b,C=n(40180);var I=function(){function e(e){var t=this;void 0===e&&(e={}),this.id=o.observable(e.id),this.topicTypeId=o.observable(e.topicTypeId||1),this.searchQuery=o.observable(e.searchQuery),this.searchAuthor=o.observable(e.searchAuthor),this.searchIn=o.observable(e.searchIn||"ALL"),this.languages=o.observableArray(e.languages),this.countries=o.observableArray(e.countries),this.newspapers=o.observableArray(e.newspapers),this.contentCount=o.observable(e.contentCount),this.searchQueryFocus=o.observable(!0),this.searchAuthorFocus=o.observable(!0),this.searchTerm=o.pureComputed((function(){var e=t.searchQuery(),n=t.searchAuthor();return e?Promise.resolve(e):n?c.ZP.valAsync(nction(e){return e.replace("%author%",n)})):c.ZP.valAsync("NotAvailable","N/A")})).extend({async:!turn t.searchQuery()?t.searchAuthor():""})),this.searchInText=o.pureComputed((function(){var e=t.searchIn();return"ALL"===e?"":mputed((function(){return m(t.searchIn())})),this.languageText=o.pureComputed((function(){var e,n=t.languages();return 0===n.length?Promise.resolve(""):1===n.length?(e=n[0],(g?Promise.resolve(g):(0,u.Vb)().then((function(e){return g=(0,C.reduce)(e,(function(e,t){return e[t.iso]=t.displayName,e}),{})}))).then((function(t){return t[e]}))):c.Z{return"".concat(n.length," ").concat(e)}))})).extend({async:!0}),this.newspaperText=o.pureComputed((function(){return new Promise((function(e){var n,i,r=t.countries(),o=t.newspapers();0===r.length&&0===o.length?e(""):1===r.length&&0===o.length?(i=r[0],(v?Promise.resolve(v):(0,u.ox)().ton(e,t){return e[t.name]=t.displayName,e}),{})}))).then((function(e){return e[i]}))).then(e):0===r.length&&1===o.length&&(n=o[0],(0,u.b)(n).then((function(e){return e.name}))).then(e);var a=[];r.length&&a.push("".concat(r.length," ").concat(c.ZP.val("MyTopicsBar.Countries"))),o.length&&a.push("".concat(o.length," ").concat(c.ZP.val("MyTopicsBar.Titles"))),e(a.join(", "))}))})).extend({async:!functirite:function(e){this.topicTypeId(e?1:2)},owner:this}),this.showSimilarText=o.computed((function(){return t.showSimilar()?c.ZP.val("Topics.TopStories"):"return t.searchQuery()||t.searchAuthor()})).extend({required:!0,trackDirtyState:!0}),this.isValid=this.searchTermValid}return e.prototype.resetSearchQuery=function(){this.searchQuery("")},e.prototype.resetSearchAuthor=function(){this.searchAuthor("")},e.prototype.toDto=function(){return{id:this.id(),topicTypeId:this.topicTypeId(),searchQuery:this.searchQuery(),searchAuthor:this.searchAuthor(),searchTerm:this.searchTerm(),searchIn:this.searchIn(),languages:this.languages(),countries:this.countries(),newspapers:this.newspapers()}},e}(),P=n(54591),x=n(94267),S=n(64156),T=n(88477),k=n(61320),A=n(94908),E=function(){function e(e){var t=e.dialog,n=e.topic,i=void 0===n?{}:n;this.dialog=t,this.dialogTitle=c.ZP.val(i.id?"Topics.EditTopic":"Topics.AddTopic"),this.topic=new I(i),this.isValid=this.topic.isValid,this.inputFocus=o.observable(!0),this.titleSelection=new S.G,this.titleSelection.fromCollections({titles:this.topic.newspapers(),countries:this.topic.countries()})}return e.prototype.cancel=function(){this.dialog.hide(l.Y.Cancel),this.dialog=null},e.prototype.save=function(){var e=this;if((0,a.validate)(this.topic)){var t=this.tction(t){e.dialog.hide(l.Y.Ok,{topic:t})})).catch(T.logAndAlertError).finally((function(){return x.Z.hide()}))}},e.prototype.showTitles=function(){var e=this;this.dialog.suspend();var t={},n=this.titleSelection.getCollections();n.titles.forEach((function(e,n){t[n]=(0,A.q)(e,void 0,void 0)}));var i={newspapers:Object.values(t),countries:n.countries};(0,k.f)({initialSelections:i,useTabSwitcher:!1}).then((function(t){t.cancelled||(e.topic.countries(t.data.countries.map((function(e){return e.id}))),e.topic.newspapers(t.data.newspapers.map((function(e){return e.cid}))),e.titleSelection.fromCollections({titles:e.topic.newspapers(),countries:e.topic.countries()})),e.dialog.resume()}))},e.prototype.showLanguages=function(){var e=this;this.dialog.suspend();var t=this.topic.languages();(0,r.s)({initialSelections:t}).then((function(t){var n;t.cancelled||e.topic.languages(((null===(n=t.data)||void 0===n?void 0:n.selectedLanguages)||[]).map((function(e){return e.iso}))),e.dialog.resume()}))},e.prototype.showSearchLocations=function(){var e=this;w.show({parentDialog:this.dialog,location:this.topic.searchIn()}).then((function(t){t.status===l.Y.Ok&&e.topic.searchIn(t.location)}))},e.prototype.confirmDelete=function(){var e=this,t=c.ZP.get("Topics.DeleteTopicConfirmationMessage").replace("%topic%",this.topic.searchTerm());(0,P.Z)().confirm(t).then((function(){).then((function(){e.dialog.hide(l.Y.Ok)})).catch((function(){(0,P.Z)().alert(c.ZP.val()).finally((function(){return x.Z.hide()}))}))},e}(),Z=function(){function e(){}return e.prototype.show=function(e){var t=void 0===e?{}:e,n=t.parentDialog,i=t.topic;return new Promise((function(e){var t=d.Z.createInstancet,topic:i});t.onHide((function(t,n){e(n)})),t.show({templateName:"v7.Client.Dialogs.EditTopic",model:r,name:"EditTopicDialog"}),t.htmlRoot().find(".textbox input").first().focus()}))},e}(),M=new Z},83344:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var i=n(22970),r=n(4169);function o(){return r.Z.getAsync("res").then((function(e){if(e.locale){var t=(0,i.CR)(e.locale.split("-"),2);return{language:t[0],country:t[1]}}return{lath.abs(t-e);return Math.floor(n/864e5)}},88243:function(e,t,n){"use strict";n.d(t,{N:function(){return p},a:function(){return l}});var i=n(40180),r=n(66353),o=/\b(mailto:)?(<?)([a-z\d]([\w~\-_#]*\.\xAD)*[\w~\-_#\xAD]+@([\w~\-_#\xAD]+\.)*[?=\w.~\-_#]+)(>?)\b/gi,a=/\b((?:https?:\/\/)|(?:ftp:\/\/))?((?:[a-z][-\w\xAD]{1,25}\.)+([a-z]{2,3}))(([/\\][.\-\w@~%?(&(amp;)?)#='"\xAD]*)*)\b/gi,s=(0,i.transform)(["com","org","net","int","edu","gov","mil","law","ac","ad","ae","af","ag","ai","al","am","an","ao","aq","ar","as","at","au","aw","ax","az","ba","bb","bd","be","bf","bg","bh","bi","bj","bl","bm","bn","bo","bq","br","bs","bt","bv","bw","by","bz","ca","cc","cd","cf","cg","ch","ci","ck","cl","cm","cn","co","cr","cu","cv","cw","cx","cy","cz","de","dj","dk","dm","do","dz","ec","ee","eg","eh","er","es","et","eu","fi","fj","fk","fm","fo","fr","ga","gb","gd","ge","gf","gg","gh","gi","gl","gm","gn","gp","gq","gr","gs","gt","gu","gw","gy","hk","hm","hn","hr","ht","hu","id","ie","il","im","in","io","iq","ir","is","it","je","jm","jo","jp","ke","kg","kh","ki","km","kn","kp","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","mc","md","me","mf","mg","mh","mk","ml","mm","mn","mo","mp","mq","mr","ms","mt","mu","mv","mw","mx","my","mz","na","nc","ne","nf","ng","ni","nl","no","np","nr","nu","nz","om","pa","pe","pf","pg","ph","pk","pl","pm","pn","pr","ps","pt","pw","py","qa","re","ro","rs","ru","rw","sa","sb","sc","sd","se","sg","sh","si","sj","sk","sl","sm","sn","so","sr","ss","st","su","sv","sx","sy","sz","tc","td","tf","tg","th","tj","tk","tl","tm","tn","to","tp","tr","tt","tv","tw","tz","ua","ug","uk","um","us","uy","uz","va","vc","ve","vg","vi","vn","vu","wf","ws","ye","yt","za","zm","zw"],(function(e,t){e[t]=1}),{});function u(e,t){return'<a href= href="'.concat(t,'">').concat(e,"</a>")}function l(e,t,n){if(void 0===t&&(t=u),void 0===n&&(n=c),(0,r.hr)(e))return e;var i=[],l=0,d=e.replace(o,(function(e){return i.push(e),"\0".concat(l++,"\0")})).replace(a,(function(e,t,i,r,o){if(r in s){t=t||"http://",i=i.replace(/\xAD/g,""),o=o.replace(/&amp;/gi,"&").replace(/\xAD/g,"");var a="".concat(t).concat(i).concat(o);return n(e,a)}return e}));return l?d.replace(/\0(\d+)\0/g,(function(e,n){return t(i[n],i[n].replace(/\xAD/g,""))})):d}var d=/["&'<>`/]/g,h={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;","`":"&#x60;","/":"&#x2F;"};function p(e){if(null==e)return"";if(!(0,i.isString)(e))throw new TypeError("String expected");return e.replace(d,(function(e){return h[e]}))}},91493:function(e,t,n){"use strict";n.d(t,{MA:function(){return r}});var i=n(66353);function r(e){return(0,i.hr)(e)?Promise.reject(new Error("url is expectedction(){return t(e.isObj==o.width}}}),window.__scrollbar=o,t.Z=o},77261:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var i=n(40180),r=n(66353),o=n(20384),a=n(4169),s=function(e){var t=void 0===e?{}:e,n=t.title,i=t.width,r=t.height,o=t.thumbnails,a=void 0===o?{}:o;this.title=n,this.width=i,this.height=r,this.thumbnails={small:a.small,medium:a.medium,large:a.large}},u=n(48604),c=/(youtube.com|youtu.be)/,l=/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,d=function(){function e(){}return Object.defineProperty(e.prototype,"videoType",{get:function(){return"YouTube"},enumerable:!1,configurable:!0}),e.prototype.isValid=function(e){return!(0,r.hr)(e)&&c.test(e)&&null!==this.parseId(e)},e.prototype.parseId=function(e){var t=e.match(l);return t&&11===t[2].length?t[2]:null},e.prototype.getVideoInfoAsync=function(e){var t=this.parseId(e);return a.Z.getAsync("ui.youtube").then((function(e){return o.getJSON("https://www.googleapis.com/youtube/v3/videos",{part:"snippet",id:t,key:e.key})})).then((function(e){var t=(void 0===e?{}:e).items,n=void 0===t?[]:t;if(0===n.length||!n[0].snippet)return Promise.reject("Error parsing youtube video");var i=n[0].snippet,r=i.title,o=i.thumbnails;return new s({title:r,width:640,height:360,thumbnails:{small:o.default.url,medium:o.medium.url,large:(o.maxres||o.high).url}})}))},e.prototype.getPlayerIframe=function(e,t,n,i){var o=void 0===i?{}:i,a=o.allowfullscreen,s=o.controls,u=o.showinfo,c=o.related;if((0,r.hr)(e))return null;var l=this.parseId(e);if((0,r.hr)(l))return null;var d="".concat("//www.youtube.com/embed","/").concat(l),h=a?"allowFullscreen":"",p=s?"1":"0",f=u?"1":"0",m=c?"1":"0";return'<iframe width="'.concat(t,'" height="').concat(n,'"')+'src="'.concat(d,"?rel=").concat(m,"&controls=").concat(p,"&showinfo=").concat(f,'"')+'frameborder="0" '.concat(h,"></iframe>")},e.prototype.getPlayer=function(e,t,n){var i=(0,r.hr)(e)?null:this.parseId(e);return(0,r.hr)(i)?Promise.reject(new Error("couldn't extract videoId from url '".concat(e,"'"))):(n.videoId=i,u.Z.create({player:"youtube",element:t}).setup(n))},e}(),h=/(player.)?vimeo\.com/,p=/(http(s)?:\/\/)?(www\.|player\.)?vimeo.com\/(\w*\/)*(\d+)(\/)?(#.*)?/,f=function(){function e(){}return Object.defineProperty(e.prototype,"videoType",{get:function(){return"Vimeo"},enumerable:!1,configurable:!0}),e.prototype.isValid=function(e){return!(0,r.hr)(e)&&h.test(e)&&nuction(e){var t=e.match(p);return t&&t[5]},e.prototype.getVideoInfoAsync=function(e){var t=this.parseId(e),n=o.getJSON((0,r.WU)("https://vimeo.com/api/v2/video/{0}.json",t),{format:"json"}).then((function(e){return new s({title:e[0].title,width:e[0].width,height:e[0].height,thumbnails:{small:e[0].thumbnail_small,medium:e[0].thumbnail_medium,large:e[0].thumbnail_large}})}));return new Promise((function(e,t){return n.then(e,t)}))},e.prototype.getPlayerIframe=function(e,t,n,i){var o=(void 0===i?{}:i).allowfullscreen;if((0,r.hr)(e))return null;var a=this.parseId(e);if((0,r.hr)(a))return null;var s="".concat("https://player.vimeo.com/video","/").concat(a),u=o?"allowFullscreen":"";return'<iframe width="'.concat(t,'" height="').concat(n,'" src="').concat(s,'" frameborder="0" ').concat(u,"></iframe>")},e.prototype.getPlayer=function(e,t,n){var i=(0,r.hr)(e)?null:this.parseId(e);return(0,r.hr)(i)?Promise.reject(new Error("couldn't extract videoId from url '".concat(e,"'"))):(n.id=i,u.Z.create({player:"vimeo",element:t}).setup(n))},e}(),m=n(49418),g=/(facebook.com)/,v=/^.*facebook\.com\/(.*\/videos\/|video\.php.*[?&]v=)(\w*)/,y=function(){function e(){}return Object.defineProperty(e.prototype,"videoType",{get:function(){return"Facebook"},enumerable:!1,configurable:!0}),e.prototype.isValid=function(e){return!(0,r.hr)(e)&&g.test(e)&&nun(e){var t=e.match(v);return t?t[2]:null},e.prototype.getVideoInfoAsync=function(e){var t=this.parseId(e);return a.Z.getAsync("socialMedia.facebook.videoMetaUrl").then((function(e){return(0,m.LK)({url:(0,r.WU)(e,t)})})).then((function(e){return new s({title:e.Title,width:e.Width,height:e.Height,thumbnails:{small:e.Thumbnail.Url,medium:e.Thumbnail.Url,large:e.Thumbnail.Url}})}))},e.prototype.getPlayerIframe=function(e,t,n,i){var o=void 0===i?{}:i,a=o.allowfullscreen,s=o.showinfo;if((0,r.hr)(e))return null;var u=this.parseId(e);return(0,r.hr)(u)?null:'<div id="'.concat(u,'" class="fb-video" data-href="').concat(e,'" \n            data-allowfullscreen="').concat(!!a,'" data-show-text="').concat(!!s,'" data-show-captions="').concat(!!s,'"\n            data-width="').concat(t,'"></div>')},e.prototype.getPlayer=function(e,t,n){var i=(0,r.hr)(e)?null:this.parseId(e);return(0,r.hr)(i)?Promise.reject(new Error("couldn't extract videoId from url '".concat(e,"'"))):(n.videoId=i,t.innerHTML=this.getPlayerIframe(e,n.width,n.height,n.playerVars),u.Z.create({player:"facebook",element:t}).setup(n))},e}(),_=new(function(){function e(){this.embeders=[new d,new f,new y]}return e.prototype.get=function(e){return(0,r.hr)(e)?null:(0,i.find)(this.embeders,(function(t){rsome((function(t){return t.isValid(e)}))},e}()),b={getVideoInfo:function(e){var t=_.get(e);return t?t.getVideoInfoAsync(e):Promise.reject("Vvar t=_.getar t=_.get(e);return t?t.parseId(e):null},getPlayer:function(e,t,n){void 0===n&&(n={});var i=_.get(e);return i?i.getPlayer(e,t,n):Promise.reject(new Error("not found video player for source '".concat(e,"'")))},getPlayerIframe:function(e,t,n,i){void 0===i&&(i={});var r=_.get(e);return r?r.getPlayerIframe(e,t,n,i):null},playerExists:function(e){return _.exists(e)}}},48604:function(e,t,n){"use strict";n.d(t,{Z:function(){return N}});var i,r=n(66353),o=n(22970),a=n(40180),s=function(){function e(t){if(!(0,a.isElement)(t))throw new TypeError("Element value is expected to be a DOM element");if(this.constructor===e)throw new TypeError("Cannot construct Player instances directly"function(e){return Promise.resolve(this)},e.prototype.play=function(){return Promise.resolve()},e.prototype.pause=function(){return Promise.resolve()},e.prototype.stop=function(){return Promise.resolve()},e.prototype.mute=function(){return Promise.resolve()},e.prototype.unmute=function(){return me=function(e){return Promise.resolve(0)},e.prototype.getVolume=function(){retue=function(e,t){return Promise.resolve()},e.prototype.on=function(e,t){if((0,r.hr)(e))throw new TypeError("event is expected to be a non-empty string");if(!(0,a.isFunction)(t))throw new TypeError("handler is expecteturn this.element=null,Promise.resolve()},Object.defineProperty(e.prototype,"isFullScreen",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"video",{get:function(){return null},enumerable:!1,configurable:!0}),e}(),u=n(4169),c=n(6677),l=n(33652),d=0;function h(){return i||(i=u.Z.getAsync("ad.spotxDirectSdkScript").then((function(e){return(0,r.hr)(e)?Promise.reject('Can\'t find "ad.spotxDirectSdkScript" parameter in confiion(e){void 0===e&&(e=window.SpotX),t(e)}),(function(e){c.Z.error(e),++d<5&t)||this;return n._playerInstance=null,n}return(0,o.ZT)(t,e),t.prototype.setup=function(t){var n=this;return e.prototype.setup.call(this,t),h().then((function(e){return n._playerInstance=new e.DirectAdOS(t),n.on("AdPaused AdStopped",(function(){n._isPlaying=!1})),n.on("AdStarted",(function(){n._isPlaying=!0})),n._playerInstance.loadAd()})).then((function(){return n}))},t.prototype.play=function(){var e=this;return this._checkInstance().then((function(){e._playerInstance.loaded()&&!e._isPlaying&&(e._playerInstance.playAd(),e._isPlaying=!0)}))},t.prototype.stop=function(){var e=this;return this._checkInstance().then((function(){e._playerInstance.loaded()&&!e._isPlaying&&(e._playerInstance.stopAd(),e._isPlaying=!1)}))},t.prototype.pause=function(){var e=this;return this._checkInstance().then((function(){e._playerInstance.loaded()&&e._isPlaying&&(e._playerInstance.pauseAd(),e._isPlaying=!1)}))},t.prototype.on=function(t,n){var i=this;return this._checkInstance().then((function(){return e.prototype.on.call(i,t,n),h().then((function(e){t.split(" ").map((function(t){return i._getEventName(e,t)})).forEach((function(e){i._playerInstance.subscribe(n,e)}))}))}))},t.prototype.mute=function(){var e=this;this._checkInstance().then((function(){e._playerInstance.videoSlot().muted=!0}))},t.prototype.unmute=function(){var e=this;this._checkInstance().then((function(){e._playerInstance.videoSlot().muted=!1}))},t.prototype.setVolume=function(e){var t=this;this._checkInstance().then((function(){return t._playerInstance.setAdVolume(e/100),t.getVolume()}))},t.prototype.getVolume=functionturn 100*e._playerInstance.getAdVolume()}))},t.prototype.resize=function(e,function(){n._playerInstance.resize(e,t)}))},Object.defineProperty(t.prototype,"isFullScreen",{get:function(){return!1},enumerable:!1,configurable:!0}),Objec;return this._playerInstance.videoSlot()},enumerable:!1,configurable:!0}),t.prototype._getEventName=function(e,t){switch(t){case"play":return e.DirectAdOS.Events.AD_RESUMED;case"pause":return e.DirectAdOS.Events.AD_PAUSED;case"complete":return e.DirectAdOS.Events.AD_AFTER_STOPPED;case"error":return e.DirectAdOS.Events.AD_ERROR;default:return t}},t.prototype._checkInstance=function(){var e=this;return new Promise((function(t,n){e._playerInstance?t(e._playerInstance):n(new Error("Use .setup() to initialize the player"))}))},t}(s),g=n(68602),v=n(11569),y=n(26783),_=n(33608),b=((p={})[1]="play",p[2]="pause",p[0]="complete",p[-2]="error",p),w=function(e){return new Promise((function(t,n){try{var i=e();(0,_.t)(i)?i.then(t):t(i)}catch(e){n(e)}}))},C=function(e){function t(t){var n=e.call(this,t)||this;return n._playerInstance=null,n._events=new g.t(1),n._subscriptions=[],n}return(0,o.ZT)(t,e),t.prototype.setup=function(t){var n=this;return e.prototype.setup.call(this,t).then((function(){return new Promise((function(e){(0,y.B)("https://www.youtube.com/iframe_api").then((function(){return f||(f=new Promise((function(e){var t=window.onYouTubeIfraeAPIReady=function(){t&&t(),e(window.YT)}}))),f})).then((function(i){t.events={onStateChange:function(e){unction(:function(){n._events.next("ready"),e(n)}},n._playerInstance=new i.Player(n.element,t)}))}))}))},t.prototype.play=function(){var e=this;return w((function(){return e._playerInstance.playVideo()}))},t.prototype.stop=function(){var e=this;return w((function(){return e._playerInstance.stopVideo()}))},t.prototype.pause=function(){var e=this;return w((function(){return e._playerInstance.pauseVideo()}))},t.prototype.mute=function(){var e=this;return w((function(){return e._playerInstance.mute()}))},t.prototype.unmute=function(){var e=this;return w((function(){return e._playerInstance.unMute()})).then((function(){return e.getVolume()}))},t.prototype.on=function(t,n){var i=this;e.prototype.on.call(this,t,n),t.split(" ").forEach((s.pipe((0,v.h)((function(t){return t===e}))).subscribe(n);i._subscriptions.push(t)}))},t.prototype.setVolume=function(e){var t=this;return w((function(){return t._playerInstance.setVolume(e)}))},t.prototype.getVolume=function(){var e=this;return w((function(){return e._playerInstance.getVolume()}))},Object.de===this._playerInstance.getPlayerState()},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){var t=this;return w((function(){return t._subscriptions.forEach((function(e){e.unsubscribe()})),t._subscriptions=null,t._playerInstance.destroy(),e.prototype.destroy.call(t)}))},t.prototype._onPlayerStateChange=function(e){if(e){var t=e.data;this._events.next(b[t])}(function(t,n){reeBeforeMute=100,n._playerInstance=null,n}return(0,o.ZT)(t,e),t.prototype.setup=function(t){var i=this;return e.prototype.setup.call(this,t).then((function(){return new Promise((function(e,t){Promise.all([n.e(8633),n.e(3731)]).then(function(t){var i=n(63973).VimeoPlayerBase;e(i)}.bind(null,n)).catch((function(e){return t(e)}))}))})).then((function(e){return i._playerInstance=new e(i.element,t),i._playerInstance.on("play",(function(){i._isPlaying=!0})),i._playerInstance.on("pause",(function(){i._isPlaying=!1})),i._playerInstance.on("ended",(function(){i._isPlaying=!1})),I(i._playerInstance.ready())})).then((function(){return i}))},t.prototype.play=function(){return I(this._playerInstance.play())},t.prototype.stop=function(){return I(this._p){return I(this._playerInstance.pause())},t.prototype.mute=function()_playerVolumeBeforeMut.setVolume(this._playerVolumeBeforeMute)},t.prototype.on=function(t,n){var i=this;e.prototype.on.call(this,t,n),t.split(" ").forEach((function(e){i._playerInstance.on(e,n)}))},t.prototype.setVolume=function(e){return e/=100,I(this._playerInstance.setVolume(e)).then((function(e){return 100*e}))},t.prototype.getVolume=function(){return Volume()).then((function(e){return 100*e}))},Object.defineProperty(t.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){var t=this;return I(this._playerInstance.unload()).then((function(){return t._playerInstance.off("play"),t._playerInstance.off("pause"),t._playerInstance.off("ended"),e.prototype.destroy.call(t)}))},t}(s).call(this,n)||this;return r._player=i,r}return(0,o.ZT)(t,e),Object.defineProperty(t.prototype,"player",{get:function(){return this._ps._id},enumerabl._initPromise=null,this._subject=new x.x}return e.prototype.destroy=function(){this._subject.unsubscribe()},e.prototype._load=function(){var e=this;return this._initPromise||(this._initPromise=new Promise((function(t,n){return Promise.all([u.Z.getAsync("Authentication.OAuth.client_facebook.AppId"),u.Z.getAsync("socialMedia.facebook.apiVersion")]).then((function(n){var i=(0,o.CR)(n,2),r=i[0],a=i[1];window.fbAsyncInit=function(){window.FB.init({appId:r,xfbml:!1,version:"v".concat(a)}),window.FB.Event.subscribe("xfbml.ready",(function(t){"video"===t.type&&e._subject.next(new T({id:t.id,playeps://connect.facebook.net/en_US/sdk.js")})).catch((function(e){return n(new Error("Couldn't initialize Facebook SDK (".concat(e,").")))}))}))),this._initPromise},e.prototype._getSubscription=function(e){var t=e.type,n=e.id,i=e.eventHandler,r=e.errorHandler,o=void 0===r?null:r;if(t===S)return this._subject.pipe((0,v.h)((function(e){return e instanceof T&&(null==n||e.id===n)}))).subscribe(i,o);throw new Error("Unsupport subscription for type '".concat(t,"'."))},e.prototype.onceEvent=function(e){var t=this,n=e.type,i=e.id;return new Promise((function(e,r){var o=t._Handler:function(t){o.unsubscribe(),e(t)},errorHandler:function(e){return r(e)}})}))},e.prototype.renderSocialPluginTag=function(e){var t=this;return n.XFBML.parse(e,(function(){return n()}))})).catch(i)}))},e}(),A=new k,E=n(88477),Z={play:"startedPlaying",pause:"paused",stop:"finishedPlaying"},M=function(e){function t(t){var n=e.call(this,t)||this;return n._playerInstance=null,n._playerVolumeBeforeMute=100,n._isPlaying=!1,n._eventHandlers=[],n}return(0,o.ZT)(t,e),t.prototype.setup=function(t){var n=this;e.prototype.setup.call(this,t);var i,r,o=(i=t.videoId,A.onceEvent({type:S,id:i})).then((function(e){var t=e.player;n._playerInstance=t,n._eventHandlers.push(t.subscribe("startedPlaying",(function(){n._isPlaying=!0})),t.subscribe("paused",(function(){n._isPlaying=!1})),t.subscribe("finishedPlaying",(function(){n._isPlaying=!1})),t.subscribe("error",(function(e){n._isPlaying=!1,(0,E.logError)(e)})))})).catch(E.logError);return Promise.all([o,(r=this.element,A.renderSocialPluginTag(r))]).then(his._playerInstance.play(),this.unmute()},t.prototype.stop=functionplayerInstance.pause(),Promise.resolve()},t.prototype.mute=function()umeBeforeMute=t,e._playerInstance.mute()}))},t.prototype.unmute=function(){return this._playerInstance.unmute(),this.setVolume(this._playerVolumeBeforeMute)},t.prototype.on=function(t,n){var i=this;e.prototype.on.call(this,t,n),t.split(" ").forEach((function(e){var t=Z[e];t&&i._eventHandlers.push(i._playerInstance.subscribe(t,n))}))},t.prototype.setVolume=function(e){return this._playerInstance.setVolume(e/100),ve(100*this._playerInstance.getVolume())},Object.defineProperty(t.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!1,configurable:!0}),t.prototype.destroy=function(){return this._eventHandlers.forEach((function(e){return e.release()})),this._eventHandlers.length=0,this._playerInstance=null,e.prototype.destroy.call(this)},t}(s),D=M,L=function(){function e(){}return e.prototype.create=function(e){var t=void 0===e?{}:e,n=t.player,i=t.element;if((0,r.hr)(n))throw new TypeError("Player value is expected to be a non-empty string");switch(n){case"spotx":return new m(i);case"youtube":return new C(i);case"vimeo":return new P(i);case"facebook":return new D(i);default:throw new TypeError("Player ".concat(n," is not supported"))}},e}(),N=new L},58653:function(e,t,n){"use strict";var i=n(20384);n(16412elf,self,self.document);self.Modernizr=i},53260:function(){},60683:function(e,t,n){"use strict";n.d(t,{E$:function(){return v},GA:function(){return g},JP:function(){return p},_Q:function(){return m},b_:function(){return h},n1:function(){return f},wC:function(){return d}});var i=n(22970),r=n(43541),o=n(70832),a=n(1753),s=n(66353),u="v1/accounts/current/avatar",c="crop",l=80,d={small:{width:20,height:20},normal:{width:22,height:22},medium:{width:28,height:28},large:{width:44,height:44},huge:{width:48,height:48},giant:{width:120,heigrn t?"<i>".concat((0,s.NG)(t),"</i>"):""}function p(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,a.kA)(u)]]}}))}))}function m(){return(0,a.P3)(u)}function g(e,t){if(!e)return e;"http"!==e.substring(0,4)&&(e=window.basePath+e);var n=new r.Z(e);return(null==t?void 0:t.width)&&t.width>0&&n.addQueryParam("width",t.width),(null==t?void 0:t.height)&&t.height>0&&n.addQueryParam("height",t.height),n.addQueryParam("fitMode",c),{},nullcedsea.mq)("nced.optionsEnabled"))||void 0===t||t}))},72459:function(e,t,n){"use strict";n.d(t,{o:function(){return i}});var i="@pressreader/analytics_core"},35547:function(e,t,n){"use strict";n.d(t,{bx:function(){return c},j4:function(){return s},mh:function(){return a},tI:function(){return l},z4:function(){return u}});var i=n(12286),r=n(72459),o="".concat(r.o,"/common/"),a=((0,i.mq)("".concat(o,"analytics_auth_requested")),(0,i.mq)("".concat(o,"analytics_user_changed")),(0,i.mq)("".concat(o,"analytics_page_navigated"))),s=(0,i.mq)("".concat(o,"analytics_page_navigated_legacy")),u=(0,i.mq)("".concat(o,"analytics_replicaview_interacted")),c=(0,i.mq)("".concat(o,"analytics_payment")),l=((0,i.mq)("".concat(o,"analytics_call_to_action_invoked")),(0,i.mq)("".concat(o,"analytics_universal_content_clicked")));(0,i.mq)(),c=(0,i.mq)("".concat(o,"transaction"))},57948:function(e,t,n){"use strict";n.d(t,{Rz:function(){return a}});var i=n(12286),r=n(72459),o="".concat(r.o,"/reading/"),a=(0,i.mq)("".concat(o,"set_active_reading_frame"));(0,i.mq)("".concat(o,"active_reading_frame_changed")),(0,i.mq)("".concat(o,"active_reading_frame_updated")),(0,i.mq)("".e.cookion(){ion(){eferrow.location.origin).concat((0,i.Xr)(e))}},98065:function(e,t,n){"use strict";var i;n.d(t,{_:function(){return i}}),function(e){e[e.Article=0]="Article",e[e.Page=1]="Pae[e.Animation=3]="Animation"}(r||(r={}))},26229:function(e,t,n){"use strict";var i;n.d(t,{s:function(){return i}}),function(e){e[e.Catalog=0]="Catalog",e[e.WelcomeMessage=1]="WelcomeMessage"}(i||(i={}))},19852:function(e,t,n){"use strict";n.d(t,{K:function(){return a}});var i=n(50084),r="analytics:sessionid",o="analytics:sessionid:time";var a=function(){var e;if(window.sessionStorage){var t=sessionStorage.getItem(o),n=t?new Date(Number(t)):new Date;(new Date).getTime()-n.getTime()>12e5?e=(0,i.Z)():(e=y{sessionStorage.setItem(r,e)}catch(e){}}(e),function(){try{sessionStorage.setItem(o,(new Date).getTime().toString())}catch(e){}}()}else e=(0,i.Z)();return e}},76814:function(e,t,n){"use strict";n.d(t,{i:function(){return ;case 2:return[2,t.sent().config]}}))}))}},36031:function(e,t,n){"use strict";n.d(t,{j:function(){return s}});var i=n(22970),r=n(7593),o=n(1753),a=n(50068);function s(e){return(0,i.mG)(this,void 0,void 0,(function(){var t,n,s,u,c,l;return(0,i.Jh)(this,(function(d){switch(d.label){case 0:return[4,(0,r.Mr)("res")];case 1:if(!(t=d.sent()))throw new Error("Resources and templates are not found.");return n=t.id,s=t.locale,u=t.ts,c={id:n,locale:s,ts:u,version:2},(null==e?void 0:e.resourceNames)&&(c.resourceNames=null==e?void 0:e.resourceNames),(null==e?void 0:e.templateNames)&&(c.templateNames=null==e?void 0:e.templateNames),(null==e?void 0:e.locale)&&(c.locale=null==e?void 0:e.locale),[4,(0,o.kA)("res",c)];case 2:return l=d.sent(),[2,{resources:!1===(null==e?void 0:e.includeStatic)?l.res:(0,i.pi)((0,i.pi)({},a.N),l.res),templates:l.templates}]}}))}))}},50068:function(e,t,n){"use strict";n.d(t,{N:function(){return i}});var i={"Important.Title.aa":"Important ({0})","Important.Title.ab":"Important ({0})","Important.Title.ae":"Important ({0})","Important.Title.af":"Important ({0})","Important.Title.ak":"Important ({0})","Important.Title.am":"Important ({0})","Important.Title.an":"Important ({0})","Important.Title.ar":"Important ({0})","Important.Title.as":"Important ({0})","Important.Title.av":"Important ({0})","Important.Title.ay":"Important ({0})","Important.Title.az":"Important ({0})","Important.Title.ba":"Important ({0})","Important.Title.be":"Important ({0})","Important.Title.bg":"Important ({0})","Important.Title.bh":"Important ({0})","Important.Title.bi":"Important ({0})","Important.Title.bm":"Important ({0})","Important.Title.bn":"Important ({0})","Important.Title.bo":"Important ({0})","Important.Title.br":"Important ({0})","Important.Title.bs":"Important ({0})","Important.Title.ca":"Important ({0})","Important.Title.ce":"Important ({0})","Important.Title.ch":"Important ({0})","Important.Title.co":"Important ({0})","Important.Title.cr":"Important ({0})","Important.Title.cs":"Important ({0})","Important.Title.cu":"Important ({0})","Important.Title.cv":"Important ({0})","Important.Title.cy":"Important ({0})","Important.Title.da":"Important ({0})","Important.Title.de":"Important ({0})","Important.Title.dv":"Important ({0})","Important.Title.dz":"Important ({0})","Important.Title.ee":"Important ({0})","Important.Title.el":"Important ({0})","Important.Title.en":"Important ({0})","Important.Title.eo":"Important ({0})","Important.Title.es":"Important ({0})","Important.Title.et":"Important ({0})","Important.Title.eu":"Important ({0})","Important.Title.fa":"Important ({0})","Important.Title.ff":"Important ({0})","Important.Title.fi":"Important ({0})","Important.Title.fj":"Important ({0})","Important.Title.fo":"Important ({0})","Important.Title.fr":"Important ({0})","Important.Title.fy":"Important ({0})","Important.Title.ga":"Important ({0})","Important.Title.gd":"Important ({0})","Important.Title.gl":"Important ({0})","Important.Title.gn":"Important ({0})","Important.Title.gu":"Important ({0})","Important.Title.gv":"Important ({0})","Important.Title.ha":"Important ({0})","Important.Title.he":"Important ({0})","Important.Title.hi":"Important ({0})","Important.Title.ho":"Important ({0})","Important.Title.hr":"Important ({0})","Important.Title.ht":"Important ({0})","Important.Title.hu":"Important ({0})","Important.Title.hy":"Important ({0})","Important.Title.hz":"Important ({0})","Important.Title.ia":"Important ({0})","Important.Title.id":"Important ({0})","Important.Title.ie":"Important ({0})","Important.Title.ig":"Important ({0})","Important.Title.ii":"Important ({0})","Important.Title.ik":"Important ({0})","Important.Title.io":"Important ({0})","Important.Title.is":"Important ({0})","Important.Title.it":"Important ({0})","Important.Title.iu":"Important ({0})","Important.Title.ja":"Important ({0})","Important.Title.jv":"Important ({0})","Important.Title.jw":"Important ({0})","Important.Title.ka":"Important ({0})","Important.Title.kg":"Important ({0})","Important.Title.ki":"Important ({0})","Important.Title.kj":"Important ({0})","Important.Title.kk":"Important ({0})","Important.Title.kl":"Important ({0})","Important.Title.km":"Important ({0})","Important.Title.kn":"Important ({0})","Important.Title.ko":"Important ({0})","Important.Title.kr":"Important ({0})","Important.Title.ks":"Important ({0})","Important.Title.ku":"Important ({0})","Important.Title.kv":"Important ({0})","Important.Title.kw":"Important ({0})","Important.Title.ky":"Important ({0})","Important.Title.la":"Important ({0})","Important.Title.lb":"Important ({0})","Important.Title.lg":"Important ({0})","Important.Title.li":"Important ({0})","Important.Title.ln":"Important ({0})","Important.Title.lo":"Important ({0})","Important.Title.lt":"Important ({0})","Important.Title.lu":"Important ({0})","Important.Title.lv":"Important ({0})","Important.Title.mg":"Important ({0})","Important.Title.mh":"Important ({0})","Important.Title.mi":"Important ({0})","Important.Title.mk":"Important ({0})","Important.Title.ml":"Important ({0})","Important.Title.mn":"Important ({0})","Important.Title.mo":"Important ({0})","Important.Title.mr":"Important ({0})","Important.Title.ms":"Important ({0})","Important.Title.mt":"Important ({0})","Important.Title.my":"Important ({0})","Important.Title.na":"Important ({0})","Important.Title.nb":"Important ({0})","Important.Title.nd":"Important ({0})","Important.Title.ne":"Important ({0})","Important.Title.ng":"Important ({0})","Important.Title.nl":"Important ({0})","Important.Title.nn":"Important ({0})","Important.Title.no":"Important ({0})","Important.Title.nr":"Important ({0})","Important.Title.nv":"Important ({0})","Important.Title.ny":"Important ({0})","Important.Title.oc":"Important ({0})","Important.Title.oj":"Important ({0})","Important.Title.om":"Important ({0})","Important.Title.or":"Important ({0})","Important.Title.os":"Important ({0})","Important.Title.pa":"Important ({0})","Important.Title.pi":"Important ({0})","Important.Title.pl":"Important ({0})","Important.Title.ps":"Important ({0})","Important.Title.pt":"Important ({0})","Important.Title.qu":"Important ({0})","Important.Title.rm":"Important ({0})","Important.Title.rn":"Important ({0})","Important.Title.ro":"Important ({0})","Important.Title.ru":"Important ({0})","Important.Title.rw":"Important ({0})","Important.Title.ry":"Important ({0})","Important.Title.sa":"Important ({0})","Important.Title.sc":"Important ({0})","Important.Title.sd":"Important ({0})","Important.Title.se":"Important ({0})","Important.Title.sg":"Important ({0})","Important.Title.sh":"Important ({0})","Important.Title.si":"Important ({0})","Important.Title.sk":"Important ({0})","Important.Title.sl":"Important ({0})","Important.Title.sm":"Important ({0})","Important.Title.sn":"Important ({0})","Important.Title.so":"Important ({0})","Important.Title.sq":"Important ({0})","Important.Title.sr":"Important ({0})","Important.Title.ss":"Important ({0})","Important.Title.st":"Important ({0})","Important.Title.su":"Important ({0})","Important.Title.sv":"Important ({0})","Important.Title.sw":"Important ({0})","Important.Title.ta":"Important ({0})","Important.Title.te":"Important ({0})","Important.Title.tg":"Important ({0})","Important.Title.th":"Important ({0})","Important.Title.ti":"Important ({0})","Important.Title.tk":"Important ({0})","Important.Title.tl":"Important ({0})","Important.Title.tn":"Important ({0})","Important.Title.to":"Important ({0})","Important.Title.tr":"Important ({0})","Important.Title.ts":"Important ({0})","Important.Title.tt":"Important ({0})","Important.Title.tw":"Important ({0})","Important.Title.ty":"Important ({0})","Important.Title.ua":"Important ({0})","Important.Title.ug":"Important ({0})","Important.Title.uk":"Important ({0})","Important.Title.ur":"Important ({0})","Important.Title.uz":"Important ({0})","Important.Title.ve":"Important ({0})","Important.Title.vi":"Important ({0})","Important.Title.vo":"Important ({0})","Important.Title.wa":"Important ({0})","Important.Title.wo":"Important ({0})","Important.Title.xh":"Important ({0})","Important.Title.yi":"Important ({0})","Important.Title.yo":"Important ({0})","Important.Title.za":"Important ({0})","Important.Title.zh":"Important ({0})","Important.Title.zu":"Important ({0})","Countries.af-na":"Namibia","Countries.af-za":"South Africa","Countries.ar-_i":"International","Countries.ar-ae":"UAE","Countries.ar-au":"Australia","Countries.ar-bh":"Bahrain","Countries.ar-eg":"Egypt","Countries.ar-gb":"International","Countries.ar-in":"India","Countries.ar-jo":"Jordan","Countries.ar-kw":"Kuwait","Countries.ar-lb":"Lebanon","Countries.ar-om":"Oman","Countries.ar-ps":"Palestine","Countries.ar-qa":"Qatar","Countries.ar-ru":"Russia","Countries.ar-sa":"Saudi Arabia","Countries.ar-sd":"Sudan","Countries.be-by":"Belarus","Countries.bg-bg":"Bulgaria","Countries.bg-ru":"Bulgaria","Countries.bs-ba":"Bosnia and Herzegovina","Countries.ca-es":"Spain","Countries.cs-cz":"Czech Republic","Countries.da-dk":"Denmark","Countries.de-at":"Austria","Countries.de-ch":"Switzerland","Countries.de-de":"Deutschland","Countries.de-es":"Spain","Countries.de-li":"Liechtenstein","Countries.de-lu":"Luxembourg","Countries.de-ru":"Germany","Countries.de-th":"Thailand","Countries.de-us":"USA","Countries.el-cy":"Cyprus","Countries.el-gr":"","Countries.el-ru":"Greece","Countries.en-_i":"Austria","Countries.en-ae":"UAE","Countries.en-at":"Austria","Countries.en-au":"Australia","Countries.en-az":"Azerbaijan","Countries.en-bb":"Barbados","Countries.en-be":"Belgium","Countries.en-bg":"Austria","Countries.en-bh":"Bahrain","Countries.en-br":"Brazil","Countries.en-by":"Belarus","Countries.en-ca":"Canada","Countries.en-ch":"Russia","Countries.en-cn":"China","Countries.en-cy":"Cyprus","Countries.en-cz":"Austria","Countries.en-de":"Australia","Countries.en-dk":"Austria","Countries.en-eg":"Egypt","Countries.en-es":"Spain","Countries.en-fi":"Austria","Countries.en-fr":"Australia","Countries.en-gb":"UK","Countries.en-gr":"Austria","Countries.en-gy":"Guyana","Countries.en-hk":"Australia","Countries.en-hr":"Croatia","Countries.en-hu":"Austria","Countries.en-id":"Austria","Countries.en-ie":"Ireland","Countries.en-il":"Israel","Countries.en-in":"India","Countries.en-iq":"Iraq","Countries.en-is":"Austria","Countries.en-it":"Australia","Countries.en-jm":"Jamaica","Countries.en-jp":"Austria","Countries.en-ke":"Kenya","Countries.en-kh":"Cambodia","Countries.en-kr":"Australia","Countries.en-kw":"Kuwait","Countries.en-ky":"Cayman Islands","Countries.en-kz":"Kazakhstan","Countries.en-lb":"Lebanon","Countries.en-li":"Austria","Countries.en-lk":"Sri Lanka","Countries.en-lu":"Austria","Countries.en-me":"Austria","Countries.en-mk":"Macedonia","Countries.en-mt":"Australia","Countries.en-mu":"Mauritius","Countries.en-my":"Malaysia","Countries.en-ng":"Nigeria","Countries.en-nl":"Netherlands","Countries.en-no":"Austria","Countries.en-np":"Nepal","Countries.en-nz":"New Zealand","Countries.en-om":"Oman","Countries.en-ph":"Philippines","Countries.en-pk":"Pakistan","Countries.en-pl":"Austria","Countries.en-pt":"Austria","Countries.en-qa":"Austria","Countries.en-ro":"Austria","Countries.en-rs":"Austria","Countries.en-ru":"Russia","Countries.en-sa":"Saudi Arabia","Countries.en-se":"Austria","Countries.en-sg":"Austria","Countries.en-sk":"Austria","Countries.en-th":"Thailand","Countries.en-tr":"Turkey","Countries.en-tw":"Taiwan","Countries.en-ua":"Austria","Countries.en-ug":"Uganda","Countries.en-us":"USA","Countries.en-vi":"USA","Countries.en-vn":"Viet Nam","Countries.en-za":"South Africa","Countries.en-zm":"Zambia","Countries.en-zw":"UK","Countries.es-ar":"Argentina","Countries.es-cl":"Chile","Countries.es-co":"Colombia","Countries.es-cr":"Costa Rica","Countries.es-do":"Dominican Republic","Countries.es-ec":"Ecuador","Countries.es-es":"Espaa","Countries.es-gt":"Guatemala","Countries.es-mx":"Mexico","Countries.es-pa":"Panama","Countries.es-pr":"Puerto Rico","Countries.es-py":"Paraguay","Countries.es-ru":"Russia","Countries.es-sv":"El Salvador","Countries.es-us":"USA","Countries.es-ve":"Venezuela","Countries.et-ee":"Estonia","Countries.fa-ir":"Iran","Countries.fi-ee":"Estonia","Countries.fi-fi":"Finland","Countries.fr-be":"Belgium","Countries.fr-ca":"Canada","Countries.fr-ch":"Switzerland","Countries.fr-dz":"Algeria","Countries.fr-eg":"Egypt","Countries.fr-fr":" France","Countries.fr-ht":"Haiti","Countries.fr-il":"Israel","Countries.fr-kh":"Cambodia","Countries.fr-lb":"Lebanon","Countries.fr-lu":"Luxembourg","Countries.fr-mu":"Mauritius","Countries.fr-nc":"New Caledonia","Countries.fr-ru":"Russia","Countries.fr-sn":"Senegal","Countries.fr-us":"Haiti","Countries.fr-vn":"Viet Nam","Countries.ga-ie":"Ireland","Countries.gu-in":"India","Countries.he-il":"Israel","Countries.hi-in":"India","Countries.hi-ru":"India","Countries.hr-ae":"Croatia","Countries.hr-hr":"Croatia","Countries.hu-hu":"Hungary","Countries.hu-ro":"Romania","Countries.hu-sk":"Slovakia","Countries.hy-am":"Armenia","Countries.id-id":"Indonesia","Countries.is-is":"Iceland","Countries.it-ca":"Canada","Countries.it-ch":"Switzerland","Countries.it-it":"Italia","Countries.it-ru":"Italy","Countries.ja-jp":"Japan","Countries.ja-ru":"Japan","Countries.kn-in":"India","Countries.ko-kr":"Korea (South)","Countries.ko-ru":"Korea (South)","Countries.ko-us":"USA","Countries.lt-lt":"Lithuania","Countries.lv-lv":"Latvia","Countries.mk-mk":"Macedonia","Countries.ml-in":"India","Countries.mr-in":"India","Countries.ms-my":"Malaysia","Countries.ne-np":"Nepal","Countries.nl-be":"Belgium","Countries.nl-nl":"Nederland","Countries.nl-sr":"Suriname","Countries.no-no":"Norway","Countries.pa-gb":"UK","Countries.pl-_i":"International","Countries.pl-pl":"Polska","Countries.pt-ao":"Angola","Countries.pt-br":"Brazil","Countries.pt-pt":"Portugal","Countries.pt-ru":"Brazil","Countries.ro-ro":"Romania","Countries.ru-_i":"Germany","Countries.ru-am":"Armenia","Countries.ru-by":"Belarus","Countries.ru-de":"Germany","Countries.ru-ee":"Estonia","Countries.ru-fi":"Finland","Countries.ru-fr":"France","Countries.ru-gb":"Germany","Countries.ru-ru":"","Countries.ru-tj":"Tajikistan","Countries.ru-ua":"Russia","Countries.ru-us":"USA","Countries.ru-uz":"Uzbekistan","Countries.si-lk":"Sri Lanka","Countries.sk-sk":"Slovakia","Countries.sl-si":"Slovenia","Countries.sq-al":"Albania","Countries.sq-ks":"Kosovo","Countries.sr-me":"Montenegro","Countries.sr-rs":"Serbia","Countries.sr-ru":"Russia","Countries.sv-ee":"Estonia","Countries.sv-fi":"Finland","Countries.sv-se":"Sweden","Countries.ta-in":"India","Countries.te-in":"India","Countries.th-th":"Thailand","Countries.tl-ph":"Philippines","Countries.tr-cy":"Northern Cyprus","Countries.tr-tr":"Turkey","Countries.uk-ua":"Ukraine","Countries.vi-vn":"Viet Nam","Countries.yi-us":"USA","Countries.zh-ca":"Canada","Countries.zh-cn":"China","Countries.zh-hk":"China","Countries.zh-my":"Malaysia","Countries.zh-ru":"China","Countries.zh-sg":"Singapore","Countries.zh-tw":"Taiwan","Countries/appcore",r="targetPlatform",o=365,a="facelift",s=365},64281:function(e,t,n){"use strict";n.d(t,{S:function(){return m}});var i=n(22970),r=n(39752),o=n(15798),a=n(55479),s=n(9097),u=n(61438),c=n(77004),l=n(76814),d=n(36031),h=n(123),p=n(92722),f=!1;function m(){return(0,i.mG)(this,void 0,void 0,(function(){var e,t,n,m;return(0,i.Jh)(this,(function(i){switch.bind("tokenUpdated",(function(){(0,r.WI)((0,o.uU)())})),f=!0,(0,a.g)(l.i),(0,s.L)(d.j),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,(0,r.wu)((0,o.uU)(),o.pB,o.E$)];case 2:return i.sent(),[3,4];case 3:return e=i.sent(),self.console.error("Cannot load config.",e),[2];case 4:return i.trys.push([4,6,,7]),[4,(0,r.wu)((0,u.sz)(),u.sG,u.My)];case 5:return i.sent(),[3,7];case 6:return t=i.sent(),self.console.error("Cannot load resources.",t),[2];case 7:return(0,p.fl)(),n=(0,p.V2)(),m=(0,p.Gi)(),(0,r.WI)((0,h.vS)({targetPlatform:n,faceliftEnabled:m})),[2]}}))}))}},123:function(e,t,n){"use strict";n.d(t,{Bl:function(){return p},_j:function(){return f},vS:function(){return d},$l:function(){return E},ms:function(){return Z},s4:function(){return M},zh:function(){return H},Ng:function(){return U},i6:function(){return z},Rd:function(){return K},e3:function(){return L},hW:function(){return D},AZ:function(){return W},vt:function(){return A},zT:function(){return k},fi:function(){return G},Md:function(){return h},Ix:function(){return m}});var i,r=n(39752),o=n(63871),a=n(22970),s=n(12286),u=n(25019),c=n(87906),l="@pressreader/appcore/",d=(0,s.mq)("".concat(l,"core_module_load_done")),h=(0,s.mq)("".concat(l,"start_app")),p=(0,s.mq)("".concat(l,"app_started")),f=(0,s.mq)("".concat(l,"change_target_platform")),m=(0,s.mq)("".concat(l,"toggle_facelift_ui")),g=(0,s.mq)("".concat(l,";egacy_platform_changed")),v={targetPlatform:u.c.Web,faceliftEnabled:!1,legacyPlatform:c.t.Web},y=(0,s.Lq)(v,(0,s.gX)(d,(function(e,t){return(0,a.pi)((0,a.pi)({},e),{targetPlatform:t.payload.targetPlatform,faceliftEnabled:t.payload.faceliftEnabled})})),(0,s.gX)(g,(function(e,t){var n=t.payload;return(0,a.pi)((0,a.pi)({},e),{legacyPlatform:n.platform})}))),_=n(84198),b=n(32249),w=n(8270),C=n(31258),I=n(15798);!function(e){e.Pressreader="pr",e.ContentRepository="crepo"}(i||(i={}));var P=[i.Pressreader,i.ContentRepository],x=n(92n(e){return e("features.app.target.platform",u.c.Web)})),k=(0,C.P1)(S,(funrn(0,x.Sz)(e)}));rection(e){return e("features.app.facelift.allowed",!1)})),Z=(0,C.P1)(S,(funcOf(e)<0&&t("features.{return t("features.app.purchase.flow.enabled",!1)||e})),L=((0,C.P1)(I.MX,(function(e){var t=e("features.app.group.type",i.Pressreader);return-1===P.indexOf(t)&&window.console.error("Invalid app group type ".concat(t)),t})),(0,C.P1)(S,(function(e){return e.legacyPlatform})));function N(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,_.gz)(p())];case 1:return e.sent(),[2]}}))}function R(e){var t,n,i,r;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return t=e.payload,n=t.newTargetPlatform,i=t.keepLocation,[4,(0,_.Ys)(T)];case 1:return r=a.sent(),[4,(0,_.Ys)(A)];case 2:return a.sent().indexOf(n)<0||(n===r?w.set(o.p4,"",{path:(0,b.bv)(),expiresInDays:-1}):w.set(o.p4,n,{path:(0,b.bv)(),expiresInDays:o.v_}),i?window.location.assign((0,b.Jz)()):window.location.assign((0,b.Xr)(""))),[2]}}))}function V(e){var t;return(0,a.Jh)(this,(function(n){switch(n.label){case 0:return t=e.payload.enable,[4,(0,_.Ys)(Z)];case 1:return n.sent()===t||(t?w.set(o.XY,"true",{path:(0,b.bv)(),expiresInDays:o.SG}):w.set(o.XY,"",{path:(0,b.bv)(),expiresInDays:-1}),window.location.le,slug:e.slug,locals}}var z=(0,C.P1)(IU=(0,C.P1)(I.MX,(fu)})),H=(0,C.P1)(I.Mn")})),j=(0,C.P1e){var t;return nult[n]=e.languages(function(e){return!!e}));return(0,a.ev)([n],r,!0)}))})es.".concat(t),null!==(n=r.name)&&void 0!==n?n:""):""}));r.gk.addFeature(o.KC,y,(function(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,_.ib)(h,N)];case 1:return e.sent(),[4,(0,_.ib)(f,R)];case 2:return e.sent(),[4,(0,_.ib)(m,V)];case 3:return e.sent(),[2]}}))}))},87906:function(e,t,n){"use strict";var i;n.d(t,{t:function(){return i}}),function(e){e[e.Web=0]="Web",e[e.iOS=1]="iOS",e[e.Android=2]="Android",e[e.app.facelift.allowed",!1)&&"true"===a.get(s.XY,null)}},39752:function(e,t,n){"use strict";n.d(t,{BG:function(){return y},lN:function(){return v},WI:function(){return h},tC:function(){return f},wu:function(){return m},Ys:function(){return p},h:function(){return d},gk:function(){return l},Ld:function(){return g}});var i=n(22970),r=n(84198),o=n(h.Session].persist(e,this._storages[,i){var r;return null!==(r=i[e])&&void 0!==r?r:t}}},43751:function(e,t,n){"use strict";var i;n.d(t,{o:function(){return i}}),function(e){e[e.None=0]="None",e[e.Queued=1]="Queued",e[e.Pending=2]="Pending",e[e.Doo.Noneion(e)ct";n.urn n=.d(t,arse(iid 0!=(0,i.P1)(r.zT,(function(e){return e!==a.c.Voyager}))},43968:function(e,t,n){"use strict";n.d(t,{kG:function(){return q},wX:function(){return W},Yo:function(){return Je},VB:function(){return Ke},$C:function(){return $e},wc:function(){return Ye},BQ:function(){return g},nl:function(){return m},oo:function(){return oe},h2:function(){return rt},u8:function(){return ie},XR:function(){return ne},p5:function(){return Le},wU:function(){return Ie},Le:function(){return Re},iY:function(){return Q},lK:function(){return ee},IP:function(){return S},uW:function(){return J},pK:function(){return X},_q:function(){return Y},y8:function(){return K},bL:function(){return j},oN:function(){return P},Vi:function(){return Xe},WT:function(){return te},eo:function(){return x},mG:function(){return I},x_:function(){return be},Uv:function(){return we},KO:function(){return ye},J4:function(){return _e},Rw:function(){return pt},vP:function(){return Ze},ye:function(){return T},CY:function(){return re},sh:function(){return ot}});var i=n(39752),r="@pressreader/article",o=n(1335),a=n(22970),s=n(15608),u=n(43751),c=n(12286),l=n(95430),d="".concat(r,"/articles/"),h=(0,c.mq)("".concat(d,"load-article-began")),p=(0,c.mq)("".concat(d,"load-article-done")),f=(0,c.mq)("".concat(d,"load-article-failed")),m=(0,c.mq)("".concat(d,"article!==n?n:{article:null,loading:u.o.None,loadingTags:[]}}var y=(0,c.Lq)({articles:{}},(0,c.gX)(l.Fs,(function(e){retur{},v(e,r)),{lo[r]={article:i{},v(e,i)),{lo)({},s),{articror}}return d?(0,a.pi)((0,a.pi)({},e),{articles:l}):e}))),_="".concat(r,"/share/"),b=(0,c.mq)("".concat(_,"load-bookmarks-for-article-began")),w=(0,c.mq)("".concat(_,"load-bookmarks-for-article-done")),C=(0,c.mq)("".concat(_,"load-bookmarks-for-article-failed")),I=(0,c.mq)("".concat(_,"save-to-collection-request")),P=(0,c.mq)("".concat(_,"open-article-share-menu")),x=(0,c.mq)("".concat(_,"reset-bookmarks")),S=(0,c.mq)("".concat(_,"load-share-info-for-articokmarks?e.bookmarks[t]:{status:u.o.None,bookmarks:[]}}var A=(0,c.Lq)({bookmarks:{},providers:{},previews:{}},(0,c.gX)(b,(function(e,t){var n,i=t.payload,r=(0,a.pi)((0,a.pi)({},k(e,i.articleId)),{status:u.o.Pending});return(0,a.pi)((0,a.pi)({},e),{bookmarks:(0,a.pi)((0,a.pi)({},e.(0,a.pi)({},e.(0,a.pi)({},e.bookmarks),(n={},n[i.articleId]=r,n))})})),(0,c.gX)(l.Fs,(function(e){return(0,a.pi)((0,{},i[o]={suppotion(e){return(0,a.pi)((0,a.pi)({},e),{bookmarks:{}})}))),E=(0,o.UY)({articles:y,share:A}),Z=function(e){return e[r]},M=n(84198),D=n(12874),L=n(62976),N=n(72920),R=n(90913),V=n(24458),B=n(76568),F=n(54215),O=n(52399),z=n(3063),U=n(61041),H="".concat(r,"/menu/"),j=(0,c.mq)("".concat(H,"open-article-menu")),W=(0,c.mq)("".concat(H,"article-menu-opened")),q=(0,c.mq)("".concat(H,"article-menu-closed")),G="".concat(r,"/navigation/"),X=(0,c.mq)("".concat(G,"navigate-to-listen")),Y=(0,c.mq)("".concat(G,"navigate-to-page")),K=(0,c.mq)("".concat(G,"navigate-to-text")),J=(0,c.mq)("".concat(G,"navigate-to-article")),$="".concat(r,"/common/"),Q=(0,c.mq)("".concat($,"load-legacy-article-module-action")),ee=(0,c.mq)("".concat($,"load-legacy-article-module-done")),te=(0,c.mq)("".concat($,"open-translation-menu")),ne=(0,c.mq)("".concat($,"edit-article")),ie=(0,c.mq)("".concat($,"delete-article")),re=(0,c.mq)("".concat($,"translate-article")),oe=(0,c.mq)("".concat($,"cancel-article-translation")),ae=n(81786),se=n(90853),ue=n(94138),ce=n(5362),le=n(64193),de=n(91748),he=n(9830),pe=n(38876),fe=n(31258),me=(0,fe.P1)(Z,(function(e){return e.articles})),ge=(0,fe.P1)(me,(function(e){return e.articles})),ve=(0,i.lN)("articleId"),ye=(0,fe.P1)(ve,gge,(function(e){returnn(null===(n=t[e])||(n 9:return w.sent(),[3,10];case 10:returne(e)];case 1:return t=n.sent(),[2,(0,xe.I)(t)]}}))}))}var Ae=(0,fe.P1)(Z,(function(e){return e.share})),Ee=(0,fe.P1)((e){return function(ion(e){return function(t){return e.previews[t]||nul({articleId:n}))];case 8:return e.sent(),[2]}}))}function Fe(e){var t=e.payload;return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,M.gz)((0,R.c8)({viewName:V.n3.Post,paraeCode:n,replace:o}))];case 2:return e.sent(),[2]}}))}function Ue(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,D.i)(j,Be)];case 1:return e.sent(),[4,(0,D.i)(ne,Fe)];case 2:return e.sent(),[4,(0,D.i)(te,Oe)];case 3:return e.sent(),[4,(0,D.i(null===(n=e[t])||void 0===n?void 0:n.supported)||[]}}));var He=n(14581);function je(e){var t,n,i,r,o,s=e.payload;return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return t=s.articleId,[5,(0,a.XA)(Ie(t,{requiredFields:L.c.Issue|L.c.Publication}))];case 1:return(null==(n=e.sent())?void 0:n.issue)?(i=n.issue,r=i.issueKey,o={contextKey:s.viewContextKey,issueKey:r,cid:(0,He.$W)(r),issueDate:(0,He.HA)(r),country:i.slugs.country,newspaper:i.slugs.newspaper,page:i.page.number.toString()},[4,(0,M.gz)((0,R.c8)({viewName:V.n3.PagesView,params:o,replace:!!s.t(),[4,(0,D.i)(K,We)];case 2:return e.sent(),[2]}}))}var Ge="".concat(r,"/print/"),Xe=(0,c.mq)("".concat(Ge,"open-print-menu")),Ye=(0,c.mq)("".concat(Ge,"article-print-text")),Ke=(0,c.mq)("".concat(Ge,"article-print-image")),Je=(0,c.mq)("".concat(Ge,"article-print-aurn o=e.sent(),(0,he.v)(o),[3,6];case 6:return[2]}}))}function et(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,D.i)(Xe,Qe)];case 1:return e.sent(),[2]}}))}var tt=n(65310),nt=n(47984),it="".concat(r,"/social/"),rt=(0,c.mq)("".concat(it,"comment-reicleId:r.articleId}))];case 4:return e.sent(),[2]}}))}function st(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,D.i)(rt,at)];case 1:return e.sent(),[2]}}))}var ut=n(2520),ct=n(31228),lt=nedPayG:i.enableForRegisteredlineArticlePrinting}else o.translation=!0;return o}))}));i.gk.addFeature(r,E,(function(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,M.rM)(Ue)];case 1:return e.sent(),[4,(0,M.rM)(st)];case 2:return e.sent(),[4,(0,M.rM)(et)];case 3:return e.sent(),[4,leTocCClick:R,onReadIssueClick:V,onPurchaseArticleClick:B}}},63366:function(e,t,n){"use strict";n.d(t,{MO:function(){return r},Xr:function(){return o},oF:function(){returnerTitl{f||(r")),y=onfig)}function h(e){return(0,r.D)(e.payload.config)}},97613:function(e,t,n){"use strict";n.d(t,{ib:function(){return We},uO:function(){return je},qL:function(){return x.qL},Mg:function(){return $e},pn:function(){return S.pn},ks:function(){return le},GI:function(){return S.GI},QS:function(){return S.QS},G5:function(){return S.G5},fz:function(){return S.fz},yQ:function(){return S.yQ},Nf:function(){return x.Nf},LQ:function(){return x.LQ},w1:function(){return x.w1},OD:function(){return x.OD},aM:function(){return x.aM},y5:function(){return Oe},Ow:function(){return S.Ow},GA:function(){return S.GA},r0:function(){return S.r0},z_:function(){return S.z_},J8:function(){return A},n6:function(){return S.n6},OF:function(){return oe.OF},Zy:function(){return oe.Zy},SN:function(){return oe.SN},vi:function(){return oe.vi},HR:function(){return oe.HR},U_:function(){return oe.U_},lq:function(){return oe.lq},Bp:function(){return oe.Bp},_w:function(){return oe._w},ah:function(){return oe.ah},YD:function(){return oe.YD},MN:function(){return oe.MN},yw:function(){return S.yw},Yt:function(){return Ge},Ht:function(){return Xe}});var i=n(39752),r=n(63366),o=n(88869),a=n(22970),s=n(84198),u=n(50449),c=n(35547),l=n(77095),d=n(57948),h=n(98065),p=n(36603),f=n(12874),m=n(50653),g=n(43968),v=n(95430),y=n(22091),_=n(90913),b=n(62545),w=n(38876),C=n(50084),I=n(52399),P=n(27176),x=n(68837),S=n(34122),T=n(12286),k=r.oF+"/analytics/",A=(0,T.mq)("".concacontextmenu"}))]:[2];case 2:return e.sent(),[2]}}))}function N(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,s.gz)((0,l.Eu)({category:Z,action:"purchase"}))];case 1:return e.sent(),[2]}}))}function R(e){var t=e.payload;return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,s.gz)((0,l.Eu)({category:Z,action:"vote",value:t.type}))];case 1:return e.sent(),[2]}}))}function V(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,s.gz)((0,l.Eu)({category:Z,el:t.shareProvider}))];case 1:return e.sent(),[2]}}))}function F(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,s.gz)((0,l.Eu)({category:Z,action:"print-menu"}))];case 1:return e.sent(),[2]}}))}function O(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,s.gz)((0,l.Eu)({category:Z,action:"print-text"}))];case 1:return e.sent(),[2]}}))}function z(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,s.gz)((0,l.Eu)({category:Z,action:"print-image"}))];case 1:return e.sent(),[2]}}))}function U(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,s.gz)((0,l.Eu)({category:Z,action:"print-page"}))];case 1:return e.sent(),[2]}}))}function H(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,s.gz)((0,l.Eu)({category:Z,action:"print-area"}))];case 1:return e.sent(),[2]}}))}function j(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,s.gz)((0,l.Eu)({category:Z,action:"translation-menu"}))];case 1:return e.sent(),[2]}}))}function W(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,s.gz)((0,l.Eu)({category:Z,action:"translate"}))];case 1:return e.sent(),[2]}}))}function q(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,s.gz)((0,l.Eu)({category:Z,action:"swipe"}))];case 1:return e.sent(),[2]}}))}function G(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,s.gz)((0,l.Eu)({categorytiveFrame:P}))])):[2];case 3:return e.sent(),[2]}}))}function K(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,f.i)(v.Fs,M)];case 1:return e.sent(),[4,(0,f.i)(_.Dw,D)];case 2:return e.sent(),[4,(0,f.i)(g.bL,L)];case 3:return e.sent(),[4,(0,f.i)(S.Ow,N)];case 4:return e.sent(),[4,(0,f.i)(g.sh,R)];case 5:return e.sent(),[4,(0,f.i)(g.oN,V)];case 6:return e.sent(),[4,(0,f.i)(g.ye,B)];case 7:return e.sent(),[4,(0,f.i)(g.Vi,F)];case 8:return e.sent(),[4,(0,f.i)(g.wc,O)];case 9:return e.sent(),[4,(0,f.i)(g.$C,U)];case 10:return e.sent(),[4,(0,f.i)(g.VB,z)];case 11:return e.sent(),[4,(0,f.i)(g.Yo,H)];case 12:return e.sent(),[4,(0,f.i)(g.WT,j)];case 13:return e.sent(),[4,(0,f.i)(g.CY,W)];case 14:return e.sent(),[4,(0,f.i)(x.LQ,q)];case 15:return e.sent(),[4,(0,f.i)(g.h2,G)];case 16:return e.sent(),[4,(0,f.i)(i)];case 4:return r.sent(),[3,2];case 5:return[2]}}))})))];case 18:return e.sent(),[2]}var t,n}))}var J=n(81786),$=n(14581),Q=n(68474),ee=n(72920),te=n(24458),ne=n(88954),ie=n(6448,3];case 2:t.sent(),t.label=3;case 3:return[2]}}))}function he(e){var t,n,i,r,o;return(0,a.Jh)(this,(function(u){switch(u.label){case 0:return(0,x.qL)(e)?(t=e.payload.config.feedCursor,n=void 0,(null==t?void 0:t.cursorType)!==ee.B.Article?[3,2]:[4,(0,s.Ys)(Q.bd,{sourceKey:t.sourceKey})]):[2];case 1:u.sent()&&(n=t),u.label=2;case 2:return i=(0,a.pi)((0,a.pi)({},e.payload.config),{firstArticleVisit:!1}),r=(0,a.pi)({},null===(o=e(i)&&function(e){return e&&e.viewName===te.n3.TopNews}(c=r)&&"articleId"in c&&i.articleId===(null==r?void 0:r.articleId)&&(i=(0,a.pi)((0,a.pi)({},i),{firstArticleVisit:!0})),[4,(0,s.gz)((0,_.Dw)({prevConfig:e.payload.prevConfig,config:i,cursor:n,articleId:e.payload.co,a.XA)(be())];case 10:return e.sent(),[2]}}))}var Ce=,f.i)(x.w1,De)];case 6:return e.sent(),[2]}}))}var Ne=n(61041),Re=n(9830),Ve=n(76568),Be=n(54215),Fe=r.oF+"/urn[4,(0,f.i)(Oe,ze)];case 1:return e.sent(),[2]}}))}var He=r.oF+"/share/",je=(0,T.mq)("".concat(He,"article_share_menu_opened")),We=(0,T.mq)("".concat(He,"article_share_menu_closed")),qe=((0,T.mq)("".concat(He,"copy_url_request")),r.oF+"/social/"),Ge=(0,T.mq)("".concat(qe,"vote_for_article_done")),Xe=(0,T.mq)("".concat(qe,"social_vote_for_article_failed")),Ye=n(16011),Ke=n(96378),Je=["copyUrl","shareFacebook","shareTwitterview:n,supported:i}))];caent(),[4,,v=(0,l;var n=e.issue.issueKey;return n?(0,u.Sk)(n):null}))},25207:function(e,t,n){"use strict";var i,r;n.d(t,{b:function(){return r},w:function(){return i}}),function(e){e[e.Mobile=0]="Mobile",e[e.Facelift=1]="Facelift",e[e.Desktop=2]="Desktop"}(i||(i={})),function(e){e[e.Default=0]="Default",e[e.Tabbar=1]="Tabbar"}(r||(r={}))},96378:function(e,t,n){"use strict";n.d(t,{c:function(){return s},w:function(){return c}});var i=n(22970),r=n(43541),o=n(55993),a=140;function s(e){var t=new r.Z(e);if(!t.host()){var n=new r.Z(window.location.href);t.protocol(n.protocol())itle:y("logOutBegan"),k=d("logOutDone"),A=d("logOutFailed")},82597:function(e,t,n){"use strict";n.d(t,{mQ:function(){return T},M4:function(){return Z},zB:function(){return k},w7:function(){return E},y1:function(){return A}});var i,r,o=n(22970),a=n(65489),s=n(9830)execute(e)]:[2,""];case 2:return[2,t.sent()]}}))}))}!function(e){e[e.v2=2]="vCaptchaVersion:n,reCaptchaToken:i},{disableRetry:!0})}function _(e,t){var n={token:e,enableAutologin:t};return(0,v.Ko)({url:"".concat(window.basePath,"Authentication/SignIn"),data:n,requestConfig:{contentType:"application/json"}})}function b(){return(0,o.mG)(this,void 0,void 0,(function(){var e;return(0,o.Jh)(this,(function(t){switch(t.label){case 0:return[4,(0,v.Ko)({url:"".concat(window.basePath,"Authentication/SignOut")})];case 1:return(null==(e=t.sent())?void 0:e.RedirectLocation)&&(window.location.href=e.RedirectLocation),[2]}}))}))}var w,C,I=n(51947),P=n(98635);!function(e){e[e.Success=0]="Success",e[e.InvalidUserNameOrPassword=1]="InvalidUserNameOrPassword",e[e.ExceedMaxSimultaneousSessionsPerUser=2]="ExceedMaxSimultaneousSessionsPerUser",e[e.UnknownError=3]="UnknownError",e[e.ExceedMaxIncorrectPasswordAttempts=4]="ExceedMaxIncorrectPasswordAttempts",e[e.CaptchaFailed=5]="CaptchaFailed"}(w||(w={}));var x=((C={})[w.InvalidUserNameOrPassword]="Dialogs.Signin.InvalidLoginOrPass",C[w.ExceedMaxSimultaneousSessionsPerUser]="Dialogs.Signin.MaxAllowedSimultaneousSessionsExceeded",C[w.CaptchaFailed]="ReCaptcha.Verification.ErrorMessage",C[w.UnknownError]="Errors.UnknownError",C[w.ExceedMaxIncorrectPasswordAttempt(){return c.reset(),c.monitorCookies(),c.authorized()}function T(e){var t=e.signInResult,n=e.enableAutologin,i=e.authContext;return(0,o.mG)(this,void 0,void 0,(function(){var e,r;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:if(!t)throw new Error("signInResult not specified");if(t.Status!==w.Success)throw e=(0,u.Rn)(x[t.Status],"Unknown Error"),new l.s(e);return[4,_(t.Token,n)];case 1:if("success"!==(null==(r=o.sent())?void 0:r.Status))throw new Error("Not authorized");return c.userKey()!==t.UserKey&&(0,I.LY)("before",i),[4,S()];case 2:return o.sent(),(0,I.LY)("after",i),[2]}}))}))}function k(e){var t=e.userName,n=e.password,i=e.enableAutologin,a=e.analyticsContext;return(0,o.mG)(this,void 0,void 0,(function(){var e,s;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),(0,I.t0)({system:"email"}),[4,m("signin")];case 1:return e=o.sent(),[4,y(t,n,r.v3,e)];case 2:return[4,T({signInResult:o.sent(),enableAutologin:i,authContext:{method:"signin",system:"email",analytics:a}})];case 3:return o.sent(),(0,I.l1)({system:"email"}),[3,5];case 4:throw s=o.sent(),(0,I.RG)({error:{message:(0,g.e)(s)},system:"email"}),s;case 5:return[2]}}))}))}function A(e,t){return(0,o.mG)(this,void 0,void 0,(function(){var n,i,s,u;return(0,o.Jh)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,6,,7]),(0,I.Ge)({system:"email"}),e.reCaptchaVersion=r.v3,n=e,[4,m("signup")];case 1:return n.reCaptchaToken=c.sent(),t=(0,o.pi)((0,o.pi)({},t),{consentToMarketingEmails:e.enablePromotional||e.enableService}),[4,(l=e,(0,v.Ko)("auth","Register",JSON.stringify(l),{contentType:"application/json",disableRetry:!0}))];case 2:return i=c.sent(),t.verificationRequired=!!i.SponsorId,s={method:"signup",system:e.libraryUser?"library":"email",analytics:t},[4,T({signInResult:i,authContext:s,enableAutologin:!1})];case 3:return c.sent(),i.SponsorId?[4,(0,P.wW)(e.emailAddress,i.SponsorId)]:[3,5];case 4:c.sent(),c.label=5;case 5:return(0,I.LD)({system:"email",sponsorId:i.SponsorId,analyticsCtx:t}),[2,{sponsorId:i.SponsorId}];case 6:throw u=c.sent(),(0,I.JX)({error:{message:(0,g.e)(u),system:a.e.Email}}),u;case 7:return[2]}var l}))}))}function E(e){var t=(void 0===e?{}:e).supressReauthorize;return(0,o.mG)(this,void 0,void 0,(function(){var e;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),(0,I.NZ)(),[4,(0,v.kA)("auth","SignOut")];case 1:return n.sent(),[4,b()];case 2:return n.sent(),t?[2]:((0,I.LY)("before"),[4,S()]);case 3:return n.sent(),(0,I.LY)("after"),(0,I.qS)(),[3,5];case 4:throw e=n.sent(),(0,I.xe)({error:{message:(0,g.e)(e),system:a.e.Email}}),e;case 5:return[2]}}))}))}function Z(e){var t=e.userName;return(0,o.mG)(this,void 0,void 0,(function(){var e;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,(i=t,(0,v.Ko)("v1/account","recoverpassword",JSON.stringify({logonName:i}),{contentType:"application/json",disableRetry:!0}))];case 1:return n.sent(),[3,3];case 2:throw e=n.sent(),(0,s.v)(e),e;case 3:return[2]}var i}))}))}},98635:function(e,t,n){"use strict";n.d(t,{$V:function(){return a},LW:function(){return o},wW:function()(r,"ef Error?Promise.reject(n):Promise.resolve(n)]}}))}))}},95430:function(e,t,n){"use strict";n.d(t,{fL:function(){return c},eT:function(){return de},Kz:function(){return he},rL:function(){return le},I2:function(){return g},pt:function(){return f},y:function(){return l},DZ:function(){return h},bH:function(){return p},Wi:function(){return C},hi:function(){return Ce},gq:function(){return ye},Ac:function(){return me},dy:function(){return ge},OP:function(){return ve},xT:function(){return y},Fw:function(){return b},eE:function(){return w},zE:function(){return E},eB:function(){return I},Fs:function(){return P}});var i,r=n(39752),o="@pressreader/authentication-core",a=n(22970),s=n(12286),u="".concat(o,"/common/");!function(e){e[e.Unknown=0]="Unknown",e[e.Login=1]="Login",e[e.Logout=2]="Logout",e[e.SignUp=3]="SignUp"}(i||(i={}));var c=(0,s.mq)("".concat(u,"initialized")),l=(0,s.mq)("".concat(u,"login")),d=(0,s.mq)("".concat(u,"login_began")),h=(0,s.mq)("".concat(u,"login_done")),p=(0,s.mq)("".concat(u,"login_failed")),f=(0,s.mq)("".concat(u,"logout_request")),m=(0,s.mq)("".concat(u,"logout_began")),g=(0,s.mq)("".concat(u,"logout_done")),v=(0,s.mq)("".concat(u,"logout_failed")),y=(0,s.mq)("".concat(u,"signup")),_=(0,s.mq)("".concat(u,"signup_began")),b=(0,s.mq)("".concat(u,"signup_done")),w=(0,s.mq)("".concat(u,"signup_failed")),C=(0,s.mq)("".concat(u,"reset_auth_state")),I=(0,s.mq)("".concat(u,"user_change_began")),P=(0,s.mq)("".concat(u,"user_change_done")),x=(0,s.mq)("".concat(u,"user_change_failed")),S=(0,s.mq)("".concat(u,"recover_pwd")),T=(0,s.mq)("".concat(u,"pwd_recovery_began")),k=(0,s.mq)("".concat(u,"pwd_recovery_done")),A=(0,s.mq)("".concat(u,"pwd_recovery_failed")),E=(0,s.mq)("".concat(u,"user_avatar_changed")),Z=(0,s.Lq)({initialized:!1,authInProgress:!1,lastAuthError:null,lastRecoveryEmailSentTo:null,user:{id:"anon_user_id",enAccountNumber:"",userKey:"anon_user_key",name:"anon_user",avatarImageId:"",photo:{url:null},email:"",isAuthenticated:!1,enableServiceEmails:!1,enablePromotionalEmails:!1},userSettings:{feedSettings:{:t.payload.user,userSettings:t.payload.userSettings})})),(0,s.gX)(h,(function(e,t){return(0,a.pi)((0,a.pi)({},e),{user:t.payload.user,userSettings:t.payload.userSettings})})),(0,s.gX)(b,(function(e,t){return(0,a.pi)((0,a.pi)({},e),{user:t.payload.user,userSettings:t.payload.userSettings})})),(0,s.gX)(g,(function(e){return(0,a.pi)((0,a.pi)({},e),{user:{id:"anon_user_id",enAccountNumber:"",userKey:"anon_user_key",name:"anon_user",avatarImageId:"",photo:{url:null},email:"",isAuthenticated:!1,enableServiceEmails:!1,enablePromotionalEmails:!1},userSettings:{feedSettings:{locales:[],following:[]},shareEmail:null}})})),(0,s.gX)(I,(function(e){return(0,a.pi)((0,a.pi)({},e),0,a.pi)({},e),e){return(0,a.pi)((0,a.pi)({},e),{authInProgress:!1})})),(0,s.gX)(p,(function(e,t){return(0,a.pi)((0,a.pi)({},e),{lastAuthError:t.payload.error})})),(0,s.gX)(v,(function(e,t){return(0,a.pi)((0,a.pi)({},e),{lastAuthError:t.payload.error})})),(0,s.gX)(w,(function(e,t){return(0,a.pi)((0,a.pi)({},e),{lastAuthError:t.payload.error})})),(0,s.gX)(T,(function(e){return(0,a.phError:null,la.pi)({},e),{lae),{lastAuthEra.pi)({},e.user),{avatarImageId:t.payload.imfunction R(){return N.has("PDAuth")||N.has("PDPAuth")}var V=n(1753),B=n(98392);function F(){return(0,a.mG)(this,void 0,void 0,(function(){var e;return(0,a.Jh)(this,(function(t){switch(t.label){case 0:if(!R())throw new Error("Cannot get profile for anonymous user.");return[4,(0,V.kA)("social","profiles/current")];case 1:return e=t.sent(),[2,(0,B.z)(e)]}}))}))}var O,z=n(82597),U=n(51947),H=n(65489);!function(e){e[e.Unknown=0]="Unknown",e[e.Login=1]="Login",e[e.Logout=2]="Logout",e[e.SignUp=3]="SignUp"}(O||(O={}));var j=n(15798),W=n(9830),q=n(77004),G=n(25019),X=n(60811),Y=n(3678),K=n(73152);function J(){return(0,a.mG)(this,void 0,void 0,(function(){var e,t,n,i,r,o;return(0,a.Jh)(this,(function(s){switch(s.label){case 0:return e=R()?X.U2("shareEmail",null):Promise.resolve(null),t=Y.U(),[4,Promise.all([e,t])];case 1:return n=a.CR.apply(void 0,[s.sent(),2]),i=n[0],r=n[1],o=r.following,[2,{feedSettings:{locales:r.locales,following:o},shareEmail:i}]}}))}))}function $(){var e;return(0,a.mG)(this,void 0,void 0,(function(){var t,n,i,r;return(0,a.Jh)(this,(function(o){switch(o.label){case 0:return R()?[4,Promise.all([F(),J()])]:[2,{user:{id:"anon_user_id",enAccountNumber:"",userKey:"anon_user_key",name:"anon_user",avatarImageId:"",photo:{url:null},email:"",isAuthenticated:!1,enableServiceEmails:!1,enablePromotionalEmails:!1},userSettings:{feedSettings:{locales:[],following:[]},shareEmail:null}}];case 1:return t=a.CR.apply(void 0,[o.sent(),2]),n=t[0],i=t[1],0===(r=n.nickname).indexOf("nickname")&&(r=n.displayName||n.nickname),[2,{user:{id:n.profileId||n.profileName,enAccountNumber:n.enAccountNumber,userKey:q.userKey(),name:r,displayName:n.displayName,avatarImageId:n.avatarImageId,photo:{url:null!==(e=n.photoUrl)&&void 0!==e?e:""},email:n.email,isAuthenticated:!0,enableServiceEmails:n.enableServiceEmails,enablePromotionalEmails:n.enablePromotionarn n=i.sent(),(0,W.v)(n),[3,4];case 4:return[2]}}))}function ne(e){var t,n;return(0,a.Jh)(this,(function(i){switch(i.label){case 0:t=e.payload.email,i.label=1;case 1:return i.trys.push([1,5,,7]),[4,(0,M.gz)(T({email:t}))];case 2:return i.sent(),[4,(0,M.RE)(z.M4,{userName:t})];case 3:return i.sent(),[4,(0,M.gz)(k({email:t}))];case 4:return i.sent(),[3,7];case 5:return n=i.sent(),[4,(0,M.gz)(A({email:t,error:(0,K.e)(n)}))];case 6:return i.sent(),[3,7];case 7:return[2]}}))}function ie(e){return e.login?O.Login:e.logout?O.Logout:e.signup?O.SignUp:O.Unknown}function re(){var e,t,n;return(0,a.Jh)(this,(function(i){switch(i.label){case 0:return[4,(0,M.S3)({login:(0,M.qn)(d),logout:(0,M.qn)(m),signup:(0,M.qn)(_)})];case 1:return e=i.sent(),[4,(0,M.gz)(I({reason:ie(e)}))];case 2:return i.sent(),[4,(0,M.S3)({done:(0,M.S3)({login:(0,M.qn)(h),logout:(0,M.qn)(g),signup:(0,M.qn)(b)}),failed:(0,M.S3)({login:(0,M.qn)(p),logout:(0,M.qn)(v),signup:(0,M.qn)(w)})})];case 3:return(t=i.sent()).done?[4,(0,M.RE)(j.e_)]:[3,6];case 4:return i.sent(),[4,(0,M.gz)(P({reason:ie(t.done)}))];case 5:i.sent(),i.label=6;case 6:return t.failed?(n=t.failed.login||t.failed.logout||t.failed.signup,[4,(0,M.gz)(x({reason:ie(t.failed),error:n.payload.error}))]):[3,8];case 7:i.sent(),i.label=8;case 8:return[3,0];case 9:return[2]}}))}function oe(){var e,t,n,i,r;return(0,a.Jh)(this,(function(o){switch(o.label){case 0:return[4,(0,M.Ys)(D.zT)];case 1:return o.sent()!==G.c.Voyager?[3,3]:(e={id:"anon_user_id",enAccountNumber:"",userKey:"anon_user_key",name:"anon_user",avatarImageId:"",photo:{url:null},email:"",isAuthenticated:!1,enableServiceEmails:!1,enablePromotionalEmails:!1},t={feedSettings:{locales:[],following:[]},shareEmail:null},[4,(0,M.gz)(c({user:e,userSettings:t}))]);case 2:case 5:return o.sent(),[2];case 3:return[4,(0,M.RE)($)];case 4:return n=o.sent(),i=n.user,r=n.userSettings,[4,(0,M.gz)(c({user:i,userSettings:r}))]}}))}function ae(e){var t,n,i,r=e.payload,o=r.system,s=r.provider;return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,M.RE)($)];case 1:return t=e.sent(),n=t.user,i=t.userSettings,[4,(0,M.gz)(h({user:n,userSettings:i,system:o,provider:s}))];case 2:return e.sent(),[2]}}))}function se(e){var t,n,i,r=e.payload,o=r.sponsorId,s=r.analyticsCtx;return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,M.RE)($)];case 1:return t=e.sent(),n=t.user,i=t.userSettings,[4,(0,M.gz)(b({user:n,userSettings:i,emailValidationRequired:!!o,analyticsCtx:s}))];case 2:return e.sent(),[2]}}))}function ue(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,M.ib)((0,L.I)(U.Ms),(function(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,M.gz)(d({}))];case 1:return e.sent(),[2]}}))}))];case 1:return e.sent(),[4,(0,M.ib)((0,L.I)(U.dY),ae)];case 2:return e.sent(),[4,(0,M.ib)((0,L.I)(U.Er),(function(e){var t=e.payload,n=t.error,i=t.system;return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,M.gz)(p({error:n,system:i}))];case 1:return e.sent(),[2]}}))}))];case 3:return e.sent(),[4,(0,M.ib)((0,L.I)(U.sP),(function(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,M.gz)(_({}))];case 1:return e.sent(),[2]}}))}))];case 4:return e.sent(),[4,(0,M.ib)((0,L.I)(U.xP),se)];case 5:return e.sent(),[4,(0,M.ib)((0,L.I)(U.iB),(function(e){var t=e.payload.error;return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,M.gz)(w({error:t}))];case 1:return e.sent(),[2]}}))}))];case 6:return e.sent(),[4,(0,M.ib)((0,L.I)(U.S3),(function(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,M.gz)(m())];case 1:return e.sent(),[2]}}))}))];case 7:return e.sent(),[4,(0,M.ib)((0,L.I)(U.WJ),(function(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,M.gz)(g())];case 1:return e.sent(),[2]}}))}))];case 8:return e.sent(),[4,(0,M.ib)((0,L.I)(U.Gd),(function(e){var t=e.payload.error;return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,M.gz)(v({error:t}))];case 1:return e.sent(),[2]}}))}))];case 9:return e.sent(),[2]}}))}var ce="".concat(o,"/login/"),le=(0,s.mq)("".concat(ce,"authentication_request")),de=(0,s.mq)("".concat(ce,"authentication_done")),he=(0,s.mq)("".concat(ce,"authentication_error")),pe=n(31258),fe=function(e){return e[o]},me=(0,pe.P1)(fe,(function(e){return e.initialized})),ge=(0,pe.P1)(fe,(function(e){return e.user})),ve=(0,pe.P1)(fe,({return e&&e.feedSettings&&e.feedSettings.locales||[]}))Id:t.TitleResourceId,ctaResourceId:t.CtaResourceId}}(0,pe.P1)(fe,(function(e){return e.lastAuthError})),(0,pe.P1)(fe,(function(e){return e.lastRecoveryEmailSentTo})),(0,pe.P1)(j.MX,(function(e){return(e("ui.SignIn.ExternalSystems")||[]).map(_e)})),(0,pe.P1)(j.MX,(function(e){var t=e("features.app.auth.featuredSystem"),n=e("ui.SignIn.ExternalSystemsV2")||{},i=[];for(var r in n){var o=n[r];if("true"===o.enabled){var a=r===t;i.push(be(r,o,a))}}return i})),(0,pe.P1)(j.MX,(function(e){var t=e("features.app.auth.featuredsystem"),n=e("ui.SignIn.ExternalSystemsV3")||{},i=[];for(var r in n){var o=n[r],a=r===t;i.push(we(r,o,a))}return i})),(0,pe.P1)(j.MX,(function(e){return e("features.signup.allowpromotionalnotifications",!1)})),(0,pe.P1)(j.MX,(function(e){return e("features.signup.allowservicenotifications",!1)}));var Ce=(0,pe.P1)(j.MX,(function(e){return e("features.authentication.disabled",!1)}));r.gk.addFeature(o,Z,(function(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[5,(0,a.XA)(ue())];case 1:return e.sent(),[4,(0,M.rM)(re)];case 2:return e.sent(),[4,(0,M.ib)(D.Bl,oe)];case 3:return e.sent(),[4,(0,M.A7)(l,Q)];case 4:return e.sent(),[4,(0,M.A7)(f,ee)];case 5:return e.sent(),[4,(0,M.A7)(y,te)];case 6:return e.sent(),[4,(0ernote="evernote",e.RBDigital="rbdigital"}(i||(i={}))},36296:function(e,t,n){"use strict";n.d(t,{FX:function(){return o},Hr:function(){return u},is:function(){retcf",e.SIERRA="sierra",e.APPLE="apple",e.AUTH0="auth0"}(o||(o={}));var s,u=Object.freeze({FACEBOOK:"facebook",TWITTER:"twitter",GOOGLE:"google",INSTAPAPER:"instapaper",ONENOTE:"onenote",EVERNOTE:"evernote",LIBRARY:"library",BELL:"bell",PIANO:"piano",RBDIGITAL:"rbdigital",APPLE:"apple",AUTH0:"auth0"}),c=((i={})[o.SIP]=0,i[o.RBDIGITAL]=1,i[o.ADFS]=2,i[o.OPENATHENS]=3,i[o.EMAIL]=4,i[o.BARCODE]=5,i[o.VIDM]=6,i[o.OPENIDCONNECT]=7,i[o.SPYDUS]=8,i[o.FINNA]=9,i[o.AXIELL]=11,i[o.CAPITA]=12,i[o.SAML]=13,i[o.LCF]=14,i[o.SIERRA]=15,i.byValue={0:o.SIP,2:o.ADFS,3:o.OPENATHENS,4:o.EMAIL,5:o.BARCODE,6:o.VIDM,7:o.OPENIDCONNECT,8:o.SPYDUS,9:o.FINNA,11:o.AXIELL,12:o.CAPITA,13:o.SAML,14:o.LCF,15:o.SIERRA},Object.freeze(((r={})[o.FACEBOOK]=u.FACEBOOK,r[o.TWITTER]=u.TWITTER,r[o.GOOGLE]=u.GOOGLE,r[o.INSTAPAPER]=u.INSTAPAPER,r[o.ONENOTE]=u.ONENOTE,r[o.EVERNOTE]=u.EVERNOTE,r[o.BELL]=u.BELL,r[o.PIANO]=u.PIANO,r[o.AUTH0]=u.AUTH0,r[o.SIP]=u.LIBRARY,r[o.ADFS]=u.LIBRARY,r[o.VIDM]=u.LIBRARY,r[o.OPENIDCONNECT]=u.LIBRARY,r[o.OPENATHENS]=u.LIBRARY,r[o.CAPITA]=u.LIBRARY,r[o.AXIELL]=u.LIBRARY,r[o.FINNA]=u.LIBRARY,r[o.SPYDUS]=u.LIBRARY,r[o.LCF]=u.LIBRARY,r[o.SIERRA]=u.LIBRARY,r[o.RBDIGITAL]=u.RBDIGITAL,r[o.SAML]=u.LIBRARY,r[o.APPLE]=u.APPLE,r)));Object.freeze(a(c)),function(e){e.SIGNUP="signup",e.SHARING="sharing"}(s||(s={}));var l=Object.freeze({CANCELLED:"Cancelled",AUTHORIZATION_DENIED:"AuthorizationDenied",ACCESSTOKEN_EXPIRED:"TokenExpired",SIGNIN_ACCOUNT_EXISTS:"SignInAccountExists",LAST_SIGNIN_ACCOUNT:"LastAccountForSignIn",USERNAME_IN_USE:"UserNameInUse",EXTERNAL_USERID_MISMATCH:"AccessTokenFromDiffAccount",LINKED_TO_ANOTHER_ACCOUNT:"LinkedToAnotherAccount",UNEXPECTED_ERROR:"UnexpectedError"})},65310:function(e,t,n){"use strict";n.d(t,{n2:function(){return u}});var i,r=n(22970),o=n(84198),a=n(95430);!function(e){e[e.V1=0]="V1",e[e.V2=1]="V2"}(i||(i={}));var s={login:!0,signUp:!1};function u(e,t){var n,u;return void 0===e&&(e=se 3:retur(s,"cre",e.cre),r(s,"availability",e.available),s):s}},13843:function(e,t,n){"use strict";n.d(t,{ES:function(){return a},wC:function(i.pi)((0,i.pi)({},n),{items:o,iso:r(e),parentId:t})}},42761:function(e,t,n){"use strict";n.d(t,{AR:function(){return l},Mf:function(){return p},ce:function(){return m},m2:function(){return d},mM:function(){return h},q9:function(){return f}});var i=n(22970),r=n(7070d===t.groupId}));C.splice(o,1,r)}})),[2,C]}}))}))}function m(e){return(0,u.kA)("catalog/v1","navigationtree",{root:e})}},68876:function(e,t,n){"use strict";n.d(t,{LD:function(){return u},Rd:function(){return s}});var i=n(22970),r=n(48229),o=n(1753),a=100;function s(e){var t=function(e){var t=e.offset,n=e.limit,o=void 0===n?a:n,s=e.orderBy,u=e.filters,c={offset:t,limit:o};s&&(c.orderBy="".concat(s.name," ").concat(s.order));var l=(0,r.C)(u);return(0,i.pi)((0,i.pi)({,t)}function u(){return(0,o.kA)("catalog","metadata")}},53169:function(e,t,n){"use strict";var i,r,o,a,s;n.d(t,{As:function(){return a},Dm:function(){return l},LQ:function(){return r},Lm:function(){return d},WD:function(){return o},jl:function(){return s},lR:function(){return c}}),function(e){e.Countries="Countries",e.Languages="Languages",e.PublicationTypes="PublicationTypes",e.Categories="BaseContentCatalog"}(r||(r={})),function(e){e.Undefined="",e.Favorites="mypublications",e.TopMagazines="topmagazines",e.MagazinesSlug="magazines",e.TopNewspapers="topnewspapers",e.NewspapersSlug="newspapers",e.TopPublications="toppublications",e.TopFree="topfreepublications",e.Featured="featured",e.RecentlyRead="recentlyread",e.All="all",e.Shortcuts="shortcuts",e.Supplements="supplements",e.Trial="trial",e.FeaturedHotspot="featuredhotspot",e.Books="books",e.Genres="genres",e.Authors="authors",e.Series="series",e.BaseContent="basecontent",e.Publications="publications",e.MyBooks="library",e[e.Countries=656]="Countries",e[e.Languages=1032]="Languages",e[e.Categories=584]="Categories",e[e.PublicationTypes=8388608]="PublicationTypes",e[e.Magazines=150994944]="Magazines",e[e.Newspapers=142606336]="Newspapers",e[e.International=938]="International",e[e.News=1124]="News"}(o||(o={})),function(e){e.Ascending="asc",e.Descending="desc"}(a||(a={})),function(e){e.Name="name",e.Rank="rank",e.LatestIssueDate="latestIssueDate",e.SearchRank="searchrank"}(s||(s={}));var u,c,l=((i={})[s.Name]=a.Ascending,i[s.Rank]=a.Descending,i[s.LatestIssueDate]=a.Descending,i),d=[r.PublicationTypes,r.Countries,r.Languages,r.Categories];!function(e){e[e.List=0]="List",e[e.SmallGrid=1]="SmallGrid",e[e.Grid=2]="Grid",e[e.Newsstand=3]="Newsstand"}(u||(u={})),function(e){e[e.ByAlphabet=0]="ByAlphabet",e[e.MostPopular=1]="MostPopular",e[e.MostRecent=2]="MostRecent"}(c||(c={}))},25864:function(e,t,n){"use strict";n.d(t,{Hk:function(){return a},IV:function(){return s},oF:function(){return i},uk:function(){return o},zm:function(){return r}});var i="@pressreader/comments-popups",r="comments.dialog",o.sent(-done"urn e?});var i=n(22970);function r(e){return(0,i.pi)({},e)}},78964:function(e,t,n){"use strict";n.d(t,{Ik:function(){return o},UC:function(){return a},V7:funbscriptions";function o(){return(0,i.kA)(r,"current")}function a(e){return(0,i.e8)(r,"current/autorenew",JSON.stringif(t),{contentType:"application/json",disableRetry:!0})}},31136:function(e,t,n){"use strict";var i;function r(e){return"SingleIssue"===e.type}function o(e){return"RegularSubscription"===e.type}function a(e){return"PublicationSubscription"===e.type}n.d(t,{B:function(){return o},TP:function(){return a},Wz:function(){return r}}),function(e){e[e.Unknown=0]="Unknown",e[e.Agency=1]="Agency",e[e.Wholesale=2]="Wholesale",e[e.Free=3]="Free",e[e.Consignment=4]="Consignment",e[e.License=5]="License"}(i||(i={}))},31228:function(e,t,n){"use strict";n.d(t,{q:function(){return v}});var i=n(39752),r="@pressreader/commerce-core",o=n(22970),a=n(12286),s=n(95430),u="".concat(r,"/"),c=(0,a.mq)("".concat(u,"load_subscription_doneturn(0,o.pi)((0,o.pi)({},e),{currentSubscription:n})})),(0,a.gX)(s.I2,(function(e){return(0,o.pi)((0,o.pi)({},e),{currentSubscription:null})}))),d=n(84198),h=n(78964),p=n(23586),f=n(9830),m=n(64484);function g(){var e,t;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),[4,(0,d.Ys)(s.dy)];case 1:return n.sent().isAuthenticated?[4,(0,d.RE)(h.Ik)]:[2];case 2:return e=n.sent(),[4,(0,d.gz)(c({currentSubscription:(0,p.F)(e)}))];case 3:return n.sent(),[3,5];case 4:return t=n.sent(),(0,f.v)(t),[3,5];case 5:return[2]}}))}var v=(0,n(31258).P1)((function(e){return e[r]}),(function(e){return e.currentSubscription}).ib)([s.fL,m.m5,s.Fs],g)];case 1:return e.sent(),[2]}}))}))},55479:function(e,t,n){"use strict";var i;function r(e){i=e}n.d(t,{g:function(){return r},i:function(){return i}})},15798:function(e,t,n){"use strict";n.d(t,{u3:function(){return h},pB:function(){return m},E$:function(){return g},e_:function(){return M},uU:function(){return p},AW:function(){return A},MX:function(){return k},mW:function(){return T}});var i=n(39752),r="@pressreader/config",o=n(22970),a=n(43751),s=n(12286),u=r+"/",c=(0,s.mq)("".concat(u,"extend_config")),l=(0,s.mq)("".concat(u,"config_extended")),d=(0,s.mq)("".concat(u,"force_config_load_done")),h=(0,s.mq)("".concat(u,"config_changed")),p=(0,s.mq)("".concat(u,"load_config")),f=(0,s.mq)("".concat(u,"config_load_began")),m=(0,s.mq)("".concat(u,"config_load_done")),g=(0,s.mq)("".concat(u,"config_load_failed")),v={config:{},status:a.o.None},y=(0,s.Lq)(v,(0,s.gX)(f,(function(e){return(0,o.p.pi)({},e),{config:t.payload.config,status:a.o.Done})})),(0,s.gX)(g,(function(e){return(0,urn(0,o.pi)((0,o.pi)({},e),{config:t.payload.config})}))),_=n(84198),b=n(55479),w=n=i(o))in e)return x(e[o],t.substring(r+1),n)}return n}var S=(0,w.P1)(P,(function(e){return e.config})),T=(0,t){return JSON.stringify({path:e,defaultVP,n){return n}),(function(e,t,n){return x(e.config,t,n)}));function E(){var e,t;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return[4,(0,_.Ys)(T)];case 1:return n.sent()===a.o.Pending?[2]:[4,(0,_.gz)(f())];case 2:return n.sent(),b.i?[3,4]:[4,(0,_.gz)(g())];case 3:return n.sent(),[2];case 4:return n.trys.push([4,11,,13]),[4,(0,_.S3)({config:(0,_.RE)(b.i),cancel:(0,_.qn)(d)})];case 5:return e=n.sent(),t=e.config,e.cancel?[4,(0,_.gz)(m({config:{}}))]:[3,7];case 6:return n.sent(),[3,9];case 7:return[4,(0,_.gz)(m({config:t}))];case 8:n.sent(),n.label=9;case 9:return[4,(0,_.gz)(h())];case 10:return n.sent(),[3,13];case 11:return n.sent(),[4,(0,_.gz)(g())];case 12:return n.sent(),[3,13];case 13:return[2]}}))}function Z(e){var t,n,i,r,a,s,u;return(0,o.Jh)(this,(function(c){switch(c.label){case 0:return[4,(0,_.Ys)(S)];case 1:for(t=c.sent(),n=(0,o.pi)({},t),i=0,r=Object.keys(e.payload.values);i<r.length;i++)a=r[i],s=e.payload.values[a],u=t[a],n[a]=null==u||"object"!=typeof u||"object"!=typeof s?s:(0,o.pi)((0,o.pi)({},u),s);return[4,(0,_.gz)(l({config:n}))];case 2:return c.sent(),[4,(0,_.gz)(h())];case 3:return c.sent(),[2]}}))}function M(){var e;return(0,o.Jh)(this,(function(t){switch(t.label){case 0:return[4,(0,_.Ys)(T)];case 1:return(e=t.sent())===a.o.Done||e===a.o.Failed?[2]:[4,(0,_.qn)([m,g])];case 2:return t.sent(),[2]}}))}i.gk.addFeature(r,y,(function(){return(0,o.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,_.ib)(p,E)];case 1:return e.sent(),[4,turn[4,s()];case 1:return n.sent(),[2,u(e,t)]}}))}))}},94138:function(e,t,n){"use strict";n.d(t,{fq:function(){return a},Lj:function(){return u},Zz:functise 3:return i.sent(),[2,null];case 4:return[2]}}))}))},s=function(e){var t={ids:e.articleIds.join(","),articleFields:e.fields};return e.lang&&(t.lang=e.lang),(0,r.kA)("v1/articles","",t)},u=function(e){return(0,r.kA)("v1/articles","".concat(e,"/directlink"))}},5362:function(e,t,n){"use strict";n.d(t,{m5:function(){return w},Z3:function(){return C}});var i,r,o,a,s=n(22970),u=n(62976),c=n(14581),l=n(51828),d=void 0,h=n(48157),p=n(70832);!function(e){e[e.None=0]="None",e[e.Bold=1]="Bold",e[e.Italic=2]="Italic",e[e.Link=3]="Link",e[e.Quote=4]="Quote",e[e.Uppercase=5]="Uppercase",e[e.Lowercase=6]="Lowercase"}(i||(i={})),function(e){e[e.None=0]="None",e[e.Title=1]="Title",e[e.Subtitle=2]="Subtitle",e[e.SubtitleEmphasis=3]="SubtitleEmphasis"}(r||(r={}));var f=((o={})[i.Bold]=h.D.Bold,o[i.Italic]=h.D.Italic,o[i.Link]=h.D.Link,o[i.Lowercase]=h.D.Lowercase,o[i.None]=h.D.None,o[i.Quote]=h.D.Quote,o[i.Uppercase]=h.D.Uppercase,o),m=((a={})[r.None]=h.V.None,a[r.Subtitle]=h.V.Subtitle,a[r.Subtitlee.classification}}function b(e,t){return(e&t)===t}function w(e,t,nProfin n.forEach((function(n){b(t,n)&&!b(e,n)&&(i|=n)})),i}(o,n),s=function(e,t){if(!e.imagesSupported)return[];var n=t.images||[],i=(t.paragraphs||[]).filter(v);return n.map((function(n){var r,o=i.find((function(e){return e.imageId===n.id})),a="";return t.issue?a="".concat(e.imageServers.thumbs,"?regionKey="):t.publication&&(a="".concat(e.imageServers.imageDownload)),{id:n.id,url:null!==(r=null==d?void 0:d(n.id))&&void 0!==r?r:a+n.id,size:n.size,caption:null==o?void 0:o.caption}}))}(e,t),l=!t.paragraphs;return{id:"".concat(t.id),articleId:"".concat(t.id),access:t.access,author:t.author,date:new Date(t.date),coverImage:r?(0,c.ux)(s,e.screenInfo):null,bestImage:r?(0,c.wP)(s):null,images:s,issue:y(t.issue),publication:(i=t.publication,i&&i.author?{date:new Date(i.date),author:{profileId:i.author.profileId,name:i.author.name,imageId:i.author.imageId}}:null),language:t.language,originalLanguage:t.originalLanguage||t.language,rank:t.rank,rate:t.rate,related:(t.related||[]).map(_),similars:t.similars?{count:t.similars.count}:null,shortContent:t.shortContent,subtitle:t.subtitle,title:t.title,availableTextLength:l?(t.shortContent||"").length:t.textLength,textType ".concat(t.type," is not supported."))}(e,n,t,s)})).filter((function(e){return e})),comments:t.comments,votes:t.votes,analyticProfiles:t.analyticProfiles,classification:ortContn&&(n=!1);var i=e.toLowerCase();i in s&&!n||(s[i]=t)}},96147:function(e,t,n){"use strict";n.d(t,{w:function(){return a}});var i=n(22970),r=n(12110),o=n(10317);function a(e){return(0,i.mG)(this,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,(0,o.w)(e)];case 1:return t=n.sent(),[2,(0,r.w)(t)]}}))}))}},60078:function(e,t,n){"use strict";n.d(t,{D3:function(){return a},GQ:function(){return l},IA:function(){return m},LB:function(){return c},Lh:function(){return s},XQ:function(){return p},gr:function(){return u},n$:function(){return h},o1:function(){return d},rE:function(){return f}});var i=n(22970),r=n(1753),o=n(79913);function a(e){return(0,r.kA)("toc",e)}function s(e){return(0,r.kA)("layout",e)}function u(e){return(0,o.$k)("IssueInfo","GetIssueInfoById",{issueId:e})}function c(e("IssueInfo","GetIssueInfoByCid",{cid:e,issueDate:t})}function d(e){return(0,o.$kageKeys",{issue:e,pageNumber:t,bookmark:n,preview:i})}function p(e){return(0,o.$k)("IssueInfo","GetIssueRuledPrice",{issueId:e})}function f(e){return(0,o.zf)("issues","Confirm",{issueId:e})}function m(e){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,c(e)];case 1:return[2,(n=t.sent(),{issue:n.Issue.Issue,cid:n.Issue.CID,profileId:n.Issue.ProfileId,displayDate:n.Issue.IssueDateDisplayName,issueName:n.Newspaper.Name,isRightToLeft:n.Newspaper.IbroughtBy:e.Sponsor.BroughtBy||e.Sponsor.Name}:null}}},12110:function(e,t,n){"use strict";function i(e){return{highlightPaidIssues:e.EnableHighlihtPaidIssues,enableCalendarView:e.EnableCalendarView,enableFullDateView:e.EnableFullDateView,enableLis.Years).maP,issueDate:e,version:t.V}}(a,r[o]),e}),{}),e}),{}),t}),{})}}n.d(t,{w:function(){return i}})},10317:function(e,t,n){"use753);fu[e.Pure[e.Cl[e.SubcurrentPageNumber:s,onSelected:u}),className:"toc"})}},14581:function(e,t,n){"use strict";n.d(t,{$W:function(){return r.$W},Gj:function(){return a.Gj},HA:function(){return r.HA},Hb:function(){return a.Hb},PX:function(){return r.PX},Sg:function(){return a.Sg},Sk:function(){return r.Sk},Xn:function(){return r.Xn},YL:function(){return r.YL},_b:function(){return r._b},eX:function(){return r.eX},ly:function(){return o.l},ss:function(){return a.ss},ux:function(){return i.u},w3:function(){return r.w3},wP:function(){return i.w},xr:function(){return r.xr}}functir.s}}) t(n.Issue(t);re t(n.enction=o.sizretururn i.w3},xr:function(){return i.xr}});var i=n(10079)},10079:function(e,t,n){"use strict";n.d(t,{$W:function(){return y},HA:function(){return g},PX:function(){return b},Sk:function(){return m},Xn:function(){return w},YL:function(){return C},_b:function(){return _},eX:function(){return h},w3:function(){return p},xr:function(){return v}});var i=n(59995),r=n(76009),o=n(98689)key"))}function m(e){return f(e),e.substring(0,12)}functie()),2,"0");return"".concat(t).concat(n).concat(i)}function w(e){if(!e||8!==e.length)throw new Error("".concat(e," is not valid issue date string"));var t=parseInt(e.substring(0,4),10),n=parseInt(e.substring(4,6),10),i=parseInt(e.substring(6,8),10);return new Date(t,n-1,i)}function C(e){var t=g(e);return"".concat(t.substring(0,4),"-").concict";nedSizei.width||0)>t.width||i.height>t.height?n:a(e,i)}),0)}},81786:function(e,t,n){"use strict";n.d(t,{jL:function(){return Ue},YA:function(){return ie},lV:function(){return ve},I7:function(){return _},qB:function(){return Me},CI:function(){return De},I:function(){return y},Xk:function(){return ze},XW:function(){return he},oM:function(){return J},Xl:function(){return j},pR:function(){return Y},X4:function(){return de},JC:function(){return le}});var i=n(39752),r="@pressreader/content",o=r+"/issues",a=n(1335),s=n(22970),-").concat(o):a}throw new Error("Invalid arguments.")}var f="".concat(r,"/issues/issueinfo/"),m=(0,c.mq)("".concat(f,"load-issue-info-began")),g=(0,c.mq)("".concat(f,"load-issue-info-done")),v=(0,c.mq)("".concat(f,"load-issue-info-failed")),y=(0,c.mq)("".concat(f,"load-issue-page-keys-done")),_=(0,c.mq)("".concat(f,"load-issue-calendar-info")),b=(0,c.mq)("".concat(f,"load-issue-calendar-info-began")),w=(0,c.mq)("".concat(f,"load-issue-calendar-info-done")),C=(0,c.mq)("".concat(f,"load-issue-calendar-info-failed"));function I(e,t){retlendar?e.calendar[t]:{calendar:null,loading:u.o.None}}var x=(0,c.Lq)({info:{},calendar:{}},(0,c.gX)(l.Fs,(function(e){return(0,s.pi)(({return(0,s.pi)((0,s.pi)({},e),{info:{},calendar:{}})})),(0,c.gX)(m,(function(e,t){var n,i=t.payload,r=p({cid:i.cid,issueDate:i.issueDate,languageCode:i.languageCode}),o=(0,s.pi)((0,s.pi)({},I(e,r)),{loading:u.o.Pending});return(0,s.pi)((0,s.pi)({},e),{info:(0,s.pi)((0,s.pi)({},e.info),(n={},n[r]=o,n))})})),(0,c.gX)(g,(function(e,t){var n=t.payload,i=n.latest,r=n.issueInfo,o=n.languageCode,a=(0,s.pi)({},e.info);return i&&delete a[p({cid:r.newspaper.cid,languageCode:o})],a[p(r.issueCidDateKey,o)]={info:r,loading:u.o.Done},(0,s.pi)((0,s.pi)({},e),{info:a})})),(0,c.gX)(v,(function(e,t){var n,i=t.payload,r=p({cid:i.cid,issueDate:i.issueDate,languageCode:i.languageCode}),o=(0,s.pi)((0,s.pi)({},I(e,r)),{loading:u.o.Failed});return(0,s.pi)((0,s.pi)({},e),{info:(0,s.pi){info:(0,s.pi)((0,s.pi)({},e.info),(n={},n[r]=a,n))})})),(0,c.gX)(b,(function(e,t){var n,i=t.payload.cid,r=(0,s.pi)((0,s.pi)({},P(e,i)),{loading:u.o.Pending});return(0,s.pi)((0,s.pi)({},e),{calendar:(0,s.pi)((0,endar),(n={},nr:(0,s.pi)((0,s.pi)({},e.calendar),(n={},n[i]=r,n))})}))),S=Object.freeze({anonymousContentRestricted:!1,blogging:!1,comments:!1,emailSharing:!1,readItLater:!1,smartFlow:!1,sound:!1,translation:!1}),T=Object.freeze({blackout:!1,blogging:!1,comments:!1,emailSharing:!1,onlineAreaPrinting:!1,onlineArticlePrinting:!1,onlinePagePrinting:!1,readItLater:!1,smartFlow:!1,smartFlowIfIssueCouldNotBeRead:!1,sound:!1,translation:!1}),k=r+"/issues/restrictions/",A=(0,c.mq)("".concat(k,"load_global_restrictions_began")),E=(0,c.mq)("".concat(k,"load_global_restrictions_done")),Z=(0,c.mq)("".concat(k,"load_global_restrictions_failed")),M=(0,c.mq)("".concat(k,"load_issue_restrictions_began")),D=(0,c.mq)("".concat(k,"load_issue_restrictions_done")),L=(0,c.mq)("".concat(k,"load_issue_restrictions_failed")),N={publications:{status:u.o.None,restrictions:{}},issues:{}};function R(e,t){return e.issues[t]?e.issues[t]:{status:u.o.None,restrictions:(0,s.pi)({},T)}}var V=(0,c.Lq)(N,(0,c.gX)(l.Fs,(function(e){return(0,s.pi)((0,s.pi)({},e),{publications:{status:ucations:{status:u.o.None,restrictions:{}},issues:{}})})),(0,c.gX)(A,(function(e){return(0,s.pi)((0,s.pi)({},e),{publications:(0,s.pi)((0,s.pi)({},ons),{status:u.o.Done,restrictions:n.restrictions})})})),(0,c.gX)(Z,(function(e){return(0,s.pi)((0,s.pi)({},e),{publications:(0,s.pi)((0,s.pi)({},e.publications),{status:u.o.Failed})})})),(0,c.gX)(M,(function(e,t){var n,i=t.payload,r=(0,s.pi)({},R(e,i.cidDateKey));return r.status=u.o.Pending,(0,s.pi)((0,s.pi)({},e),{issues:(0,s.pi)((0,s.pi)({},)((0,s.pi)({},)((0,s.pi)({},e.issues),(n={},n[i.cidDateKey]=r,n))})}))),B=(0,a.UY)({issueInfo:x,restrictions:V}),F=function(e){return e[o]},O=n(31258),z=(0,O.P1)(F,(function(e){return e.issueInfo})),U=(0,O.P1)(z,(function(e){return e.info})),H=(0,i.lN)("cidDateKey"),j=(0,O.P1)(H,U,(function(e,t){return t[e]||null})),W=(0,i.lN)("cid"),q=(0,i.BG)("issueDate"),G=(0,i.BG)("languageCode"),X=(0,O.P1)(W,q,G,U,(function(e,t,n,i){return i[p({cid:e,issueDate:t,languageCode:n})]})),Y=(0,O.P1)(H,G,U,(function(e,t,n){return n[p(e,t)]||null})),K=(0,O.Par})),J=(0,O.P1)(W,K,(function(e,t){return t[e]||null})),$eRead))&&e.smartFlow.enabled&&e.smartFlow.layoutValid}var re=(0,O.P1)(F,(("ui.Comments.enable",!0)&&e("features.comments",!1)}})),ae=(0,O.P1)(re,(function(e){return e.publications})),se=(0,O.P1)(ae,(function(e){return function(t){return e.status===u.o.Done&&e.restrictions[t]?e.restrictions[t]:S}})),ue=(0,O.P1)(re,(function(e){return e.issues})),ce=(0,i.lN)("cidDateKey"),le=(0,O.P1)(oe,se,ue,(function(e,t,n){return $((function(i){var r=(0,h.$W)(i),o=t(r),a=(0,s.pi)({},T);return n[i]&&n[i].status===u.o.Done&&(a=n[i].restrictions),(0,te.M)(o,(function(e,t){e&&((0,ne.n)(a,t)?a[t]=o[t]:(0,ee.v)("There is issue restrictions which is not supported. key=".concat(t)))})),e.comments||(a.comments=!0),a}))})),de=(0,O.P1)(oe,se,ue,ce,(function(e,t,n,i){if(!i)return null;var r=t((0,h.$W)(i)),o=(0,s.pi)({},T);return n[i]&&n[iestrictions which is not supported. key=".concat(t)))on(e,t){return!!(null==e?void 0:e.info)&&ie(e.info,t)})),pe=n(84198),fe=n(96147),me=n(90853);function ge(e){var t;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return[4,(0,pe.Ys)(J,{cid:e})];case 1:return(t=n.sent())&&t.loading!==u.o.None?t.loading===u.o.Done?[2,t.calendar]:t.loading===u.o.Failed?[2,null]:[4,(0,pe.S3)({done:(0,me.K)(w,(function(t){return t.payload.cid===e})),failed:(0,me.K)(C,(function(t){return t.payload.cid===e}))})]:[3,4];case 2:return n.sent(),[4,ge(e)];case 3:return[2,n.sent()];case 4:return[2,null]}}))}function ve(e){var t,n,i;return(0,s.Jh)(this,(function(r){switch(r.label){case 0:return[4,ge(e)];case 1:return(t=r.sent())?[2,t]:[4,(0,pe.gz)(b({cid:e}))];case 2:r.sent(),r.label=3;case 3:return r.trys.push([3,6,,8]),[4,(0,pe.RE)(fe.w,e)];case 4:return n=r.sent(),[4,(0,pe.gz)(w({cid:e,calendar:n}))];case 5:return r.sent(),[2,n];case 6:return i=r.sent(),(0,ee.v)(i),[4,(0,pe.gz)(C({cid:e}))];case 7:return r.sent(),[3,8];case 8:return[2,null]}}))}var ye=n(123),_e=n(sueInfo=(0,be.ds)(n),i.label=2;case 2:return[2,e]}}))}function xe(e){var t,n,i,r;return(0,s.Jh)(this,(function(o){s==(t=e.publ 0:t.length)})),n=t.map((function(e){return e.cids[0]})),n.length?[4,(0,pe.RE)(_e.Rd,{filters:{cids:n},offset:0,limit:n.length})]:[3,2];case 1:i=rn t.cid===e.cids[0]}));t&&e.publicationsInfo.push(t)})),o.label=2;case 2:return[2,e]}}))}var Se=n(1753),Te="v1/purchase",ke=n(64185),Ae=n(55993),Ee=n(25019);function Ze(e,t,n){var i,r,o;return(0,s.Jh)(this,(function(a){switch(a.label){case 0:return i=p({cid:e,issueDate:t,languageCode:n}),[4,(0,pe.Ys)(X,{cid:e,issueDate:t,languageCode:n})];case 1:return r=a.sent(),o=!t,r&&r.loading!==u.o.None?r.loading===u.o.Done?[2,r.info]:r.loading===u.o.Failed?[2,null]:[4,(0,pe.S3)({done:(0,me.K)(g,(function(t){var r=t.payload.issueInfo;return o&&t.payload.latest?e===r.newspaper.cid:p(r.issueCidDateKey,n)===i})),failed:(0,me.K)(v,(function(e){return p({cid:e.payload.cid,issueDate:e.payload.issueDate,languageCode:n})===i}))})]:[3,4];case 2:return a.sent(),[4,Ze(e,t,n)];case 3:return[2,a.sent()];case 4:return[2,null]}}))}function Me(e,t,n,i){var r,o,a,u,c,l,d,h,p,f,y;return(0,s.Jh)(this,(function(_){switch(_.label){case 0:return[4,Ze(e,t,n)];case 1:return(r=_.sent())&&!i?[2,r]:[4,(0,pe.Ys)(ye.zT)];case 2:return o=_.sent(),a=!t,[4,(0,pe.gz)(m({cid:e,issueDate:t,languageCode:n}))];case 3:_.sent(),_.label=4;case 4:return _.trys.push([4,9,,11]),u=t?(0,Ae.p6)(t,"yyyyMMdd"):void 0,[4,(0,pe.RE)(Ce.GQ,e,u)];case 5:return c=_.sent(),l=!(null===(y=c.SubscriptionsInfo)||void 0===y?void 0:y.IsFreeContent)&&o!==Ee.c.Voyager,[4,(0,pe.$6)([(0,pe.RE)(Ce.D3,{issue:c.Issue.Issue,version:c.Layout.LayoutVersion,expungeVersion:c.Issue.ExpungeVersion,lng:n}),(0,pe.RE)((function(){return l?(e={issueKey:c.Issue.Issue},(0,Se.kA)(Te,"products",e)):[];var e}))])];case 6:return d=s.CR.apply(void 0,[_.sent(),2]),h=d[0],p=d[1],r=(0,ke.HE)(c,h,p),[4,(0,pe.$6)([r.purchaseInfo.singleIssueProduct&&Pe([r.purchaseInfo.singleIssueProduct]),r.purchaseInfo.singleTitleProduct&&xe([r.purchaseInfo.singleTitleProduct])])];case 7:return _.sent(),[4,(0,pe.gz)(g({latest:a,issueInfo:r,languageCode:n}))];case 8:return _.sent(),[2,r];case 9:return f=_.sent(),(0,ee.v)(f),[4,(0,pe.gz)(v({cid:e,issueDate:t,languageCode:n}))];cas.xr)(e),[4,Me(i(0,Se.kA)("contentRestrictions","issues",{issues:e})}function Ve(){var e;return(0,s.Jh)(this,(function(t){switch(t.label){case 0:return[4,(0,pe.Ys)(ae)];case 1:return(e=t.sent())&&e.status!==u.o.None?e.status===u.o.Done?[2,e.restrictions]:e.status===u.o.Failed?[2,null]:[4,(0,pe.S3)({done:(0,pe.qn)(E),failed:(0,pe.qn)(Z)})]:[3,4];case 2:return t.sent(),[4,Ve()];case 3:return[2,t.sent()];case 4:return[2,null]}}))}function Be(){var e,t,n,i,r,o,a,u,c,l,d,h,p;return(0,s.Jh)(this,(function(f){switch(f.label){case 0:return f.trys.push([0,5,,7]),[4,Ve()];case 1:return(e=f.sent())?[2,e]:(e={},[4,(0,pe.gz)(A())]);case 2:return f.sent(),[4,(0,pe.RE)(Ne)];case 3:t=f.sent();try{for(n=(0,s.XA)(t),i=n.next();!i.done;i=n.next()){r=i.value;try{for(h=void 0,o=(0,s.XA)(r.cids),a=o.next();!a.done;a=o.next())u=a.value,e[u]||(e[u]={anonymousContentRestricted:!1,blogging:!1,comments:!1,emailSharing:!1,readItLater:!1,smartFlow:!1,sound:!1,translation:!1}),e[u][Le(r.ruleType)]=!0}catch(e){h={error:e}}finally{try{a&&!a.done&&(p=o.return)&&p.call(o)}finally{if(h)throw h.error}}}}catch(e){l={error:e}}finally{try{i&&!i.done&&(d=n.return)&&d.call(n)}finally{if(l)throw l.error}}return[4,(0,pe.gz)(E({restrictions:e}))];case 4:return f.sent(),[2,e];case 5:return c=f.sent(),(0,ee.v)(c),[4,(0,pe.gz)(Z({error:c}))];case 6:return f.sent(),[3,7];case 7:return[2,null]}}))}function Fe(e){var t,n;return(0,s.Jh)(this,(function(i){switch(i.label){case 0:return[4,(0,pe.Ys)(ue)];case 1:return t=i.sent(),(n=t[e])&&n.status!==u.o.None?n.status===u.o.Done?[2,n.restrictions]:n.status===u.o.Failed?[2,null]:[4,(0,pe.S3)({done:(0,me.K)(D,(function(t),me.K)(L,(function(t){return t.payload.cidDateKey===e}))})]:[3,4];case 2:return i.sent(),[4,Fe(e)];case 3:return[2,i.sent()];case 4:return[2,null]}}))}function Oe(e){var t,n,i,r;return(0,s.Jh)(this,(function(o){switch(o.label){case 0:t=(0,h.Sk)(e),o.label=1;case 1:return o.trys.push([1,6,,8]),[4,Fe(t)];case 2:return(n=o.sent())?[2,n]:[4,(0,pe.gz)(M({cidDateKey:t}))];case 3:return o.sent(),[4,(0,pe.RE)(Re,e)];case 4:return i=o.sent(),n=Array.isArray(i)?i[0].restrictions:i,[4,(0,pe.gz)(D({cidDateKey:t,restrictions:n}))];case 5:return o.sent(),[2,n];case 6:return r=o.sent(),(0,ee.v)(r),[4,(0,pe.gz)(L({cidDateKey:t,error:r}))];case 7:return o.sent(),[3,8];case 8:return[2,null]}}))}function ze(e){var t;return(0,s.Jh)(this,(function(n){switch(n.label){case 0:return t=(0,h.Sk)(e),[4,Be()];case 1:return n.sent(),[4,Oe(e)];case 2:return n.sent(),[4,(0,pe.Ys)(de,{cidDateKey:t})];case 3:return[2,n.sent()]}}))}function Ue(e){return(0,s.Jh)(this,(function(t){switch(t.label){case 0:return[4,De(e)];case 1:return t.sent(),[4,ze(e)];case 2:return t.sent(),[4,(0,pe.Ys)(he,{cidDateKey:(0,h.Sk)(e)})];casction(e){e[e.Translation=0]="Translation"}(i||(i={}))},92966:function(e,t,n){"use strict";var i;n.d(t,{p:function(){return i}}),function(e){e[e.OneLine=0]="OneLine",e[e.ThreeLine=1]="ThreeLine"}(i||(i={}))},10751:function(e,tctaOnboarding=26]=ion=0]c;var wn",e[n,sou.an.Arx)("sre:e.rn",{clht:Ma):nulls)||vo)]})}text,w0:i.caTopicClick:function(){},onChannelClick:function(){}})},67737:function(e,t,n){"use strict";n.d(t,{Gy:function(){return y},L8:function(){return v},Pw:function(){return f}});var i,r=n(43188),o=n(66204),a=n(6279),s=n(28007),u=n(72408),c=n(39752),l=n(7050),d=new Map;function h(e){var t=(0,l.E)();return(0,r.jsx)("div",{className:t,children:(0,r.jsx)("div",{className:"app-panel",children:(0,r.jsx)("div",{className:"app-panel-content",children:(0,r.jsx)("div",{className:"measurer-hub",children:(0,r.jsx)("div",{className:"measurer-panel-content",children:(0,r.jsx)("div",{className:"measurer-panel",children:e.children})})})})}ldren:(0,turn =t.widte",d)})})})})}));c.displayName="TopicSectionFeedItem"},68474:function(e,t,n){"use strict";n.d(t,{jt:function(){return H},iu:function(){return y},YU:function(){return E},aj:function(){return j},d1:function(){return Z},D3:function(){return q},GO:function(){return G},Y0:function(){return W},LK:function(){return mi},Bq:function(){return C},Aw:function(){return I},Bs:function(){return _},xE:function(){return b},v:function(){return v},Kk:function(){return ei},wm:function(){return xe},bd:function(){return ve},$G:function(){return ye},Ol:function(){return _e},$x:function(){return Se},DL:function(){return Ve},Ee:function(){return Me},$z:function(){return Ce},uY:function(){return z},Fu:function(){return ii},_5:function(){return Jn}});var i=n(39752),r=n(1103),o="@pressreader/feed",a=n(1335),s=n(72753),u=n(22970),c=n(40180),l=n(43751),d=n(12286),h=n(95430),p=n(94239),f=n(62545),m="@pressreader/feed/common/",g=(0,d.mq)("".concat(m,"feed_module_load_done")),v=(0,d.mq)("".concat(m,"reset_data")),y=(0,d.mq)("".concat(m,"configure_feed")),_=(0,d.mq)("".concat(m,"load_feed_queued")),b=(0,d.mq)("".concat(m,"load_feed_request")),w=(0,d.mq)("".concat(m,"load_feed_began")),C=(0,d.mq)("".concat(m,"load_feed_done")),I=(0,d.mq)("".concat(m,"load_feed_failed")),P=(0,d.mq)("".concat(m,"commit_feed_items")),x=(0,d.mq)("".concat(m,"feed_render_viewport_changed")),S=(0,d.mq)("".concat(m,"rebuild_request")),T=(0,d.mq)("".concat(m,"rebuild_began")),k=(0,d.mq)("".concat(m,"rebuild_done")),A=(0,d.mq)("".concat(m,"rebuild_failed")),E=(0,d.mq)("".concat(m,"create_finite_feed")),Z=(0,d.mq)("".concat(m,"feed_items_visibility_cn(0,u.pi)((0,u.pi)({},i),{currentViewport:n})}))}var F=(0,.pi)((0,u.pi)(.pi)((0,u.pi)({},e),{context:s})})),a&&(e=B(e,i,a)),e})),(0,d.gX)(_,(function(e,t){var n=t.payload,i=n.sourceKey,r=n.direction;return e=N(e,i,(function(e){var t;return(0,u.pi)((0,u.pi)({},e),{directions:(0,u.pi)((0,u.pi)({},e.directions),(t={},t[r]=(0,u.pi)((0,u.pi)({},e.directi:(0,u.pi)((0,u.range?Math.ma)({},e.directi:(0,u.pi)((0,u.pi)({},e.rendering),(i={},i[o]=y,i))})})),(0,d.gX)(T,(function(e,t){var n,i=t.payload;return(0,u.pi)((0,u.pi)({},e),{rebuild:(0,u.pi)((0,u.pi)({},ed:(0,u.pi)((0,u.pi)({},e.rebuild),(n={},n[r]=!1,n))})})),(0,d.gX)(A,(function(e,t){var n,i=t.payload;return(0,u.pi)((0,u.pi)({},e),{rebuild:(0,u.pi)((0,u.pi)({},ection(e){returs:[],range:{frtViewport:c.cuge),{to:e.range.to-1}),total:e.total&&e.total-1})})))}))),O="@pressreader/feed/history/",z=(0,d.mq)("".concat(O,"set_active_cursor")),U=(0,d.mq)("".concat(O,"active_cursor_changed")),H=(0,d.mq)("".concat(O,"clear_cursor")),j=(0,d.mq)("".concat(O,"feed_history_source_ref_changed")),W=(0,d.mq)("".concat(O,"feed_restore_position_changed")),q=(0,d.mq)("".concat(O,"feed_position_restore_began")),G=(0,d.mq)("".concat(O,"feed_position_restore_done")),X={restore:{},scrollPositi),{restore:{},rs:(0,u.pi)((0,u.pi)({},e.cursors),(n={},n[r]=i,n))})})),(0,d.gX)(H,(function(e,t){var n=t.payload,i=(0,u.pi)({},e.cursors);return delete i[n.sourceKe{refs:(0,u.pi)ete o[i],(0,u.((0,u.pi)({},e,u.pi)({},e),{,u.pi)({},e),{cursors:s,restore:c,scrollPositions:l})})),(0,d.gX)(E,(function(e,t){var n=t.payload,i=(0,u.pi)({},e.cursors);return delete i[n.sourceKee i[n.sourceKers,(function(e){e&&e.refs&&(X.refs=(0,u.pi)({},e.refs))})),J=(0,a.UY)({common:F,history:Y}),$=(0,s.w)({history:K}),Q=function(e){return e[o]},ee=n(84198),te=n(123),ne=n(72920)-){var d;(d=r[l])&&d.rendering&&(s(d,u),u++)}return i}var ce=n(31258),le=n(15798),de=n(46725),he=n(25019),pe=(0,ce.P1)(Q,(function(e){return e.common})),fe=(0,ce.P1)(pe,(function(e){return e.feed})),me=(0,i.lN)("sourceKey"),ge=(0,i.lN)("feedItemUniqKey"),ve=(0,ce.P1e.P1)(fe,(function(e){tems.find((function(t){retn)&&i.call(o)}finally{if(n)throw n.error}}return null})),(0,ce.P1)(pe,)),we=((0,ce.P1)(me,be,(function(e,t){return t[e]||!1})),(0,ce.P1)(pe,(function(e){return e.rendering}))),nction Ie(e){return{width:e.w||numbs",[null])[0]},imagt){var n=t[e]||null;return n&&n.currentViewport||null})),Te=(0,ce.P1)(Q,(function(e){return e.history})),ke=(0,ce.P1)(Te,(function(e){return e.cursors})),Ae=(0,i.lN)("sourceKey"),Ee=(0,ce.P1)(Ae,ke,(function(e,t){return t[e]})),Ze=(0,ce.P1)(Te,(function(e){return e.refs})),Me=(0,ce.P1)(Ae,Ze,(function(e,t){return t[e]})),De=(0,ce.P1)(Te,(function(e){return e.restore})),Le=(0,ce.P1)(Te,(function(e){return e.scrollPositions})),Ne=(0,ce.P1)(Ae,Le,(fune.P1)(Ae,Le,ke,(function(e,tturn{beginsAt:r?r.position:null,cursor:o}}return null})),Be=n(60567),Fe=n(90853),Oe=n(43968),ze=n(9830),Ue=n(38876),He=n(53155),je=n(70335),We=n(83795);!function(e){e[e.Small=0]="Small",e[e.Medium=800]="Medium",e[e.Large=1300]="Large",e[e.XLrn!1;if(o>2*a.text.lineHeight)return!1}}return!0}}var Qe=n(70711),et=n(1730),tt={title:"Lorem ipsum dolor sit amet, consectetur adipiscing elit.",shortContent:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam sem sem, elementum posuere maximus eu, elementum vitae turpis. Phasellus in ex sed ante facilisis consectetur sit amet ut felis. Morbi tortor dolor, pulvinar nec dolor ut, vestibulum egestas lectus. Sed nec aliquet lacus. Etiam quis nunc tortor. Cras euismod ut magna vel rhoncus. Nunc porttitor eros nunc, sit amet luctus nisi tincidunt quis. Suspendisse nec est volutpat, gravida dolor nec, varius mi.",classification:{tags:[{id:1,displayName:"foo"}]},issue:{newspaper:{name:"fake name"}}},nt={title:"A",shortContenton(e){return e.originalItem}))}}]}}))}))}};return d}function atall",orientation:"horizontal",maxWordsLines:3}}))}})}var ct=n(59874),lt={id:(0,re.Z)(),description:"t.type)===de.an.SectionTopic?{rate:0,avgOffset:0}:null},build:function(e,t){return(0,u.mG)(this,void 0,void 0,(function(){var n,i,r;return(0,u.Jh)(this,(function(o){switch(o.label){case 0:return n=t[0],i=t.slice(1),r=n.feedItem,[4,(0,ct.z1)(e,n.feedItem)];case 1:return r.layout=o.sent(),[2,{items:i,result:n}]}}))}))}},dt=Pe.XLarge;function ht(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Je.apply(void 0,(0,u.ev)([5],(0,u.CR)(e),!1))}var pt=at({description:"five small articles w/ images",restrictions:{viewport:{minWidth:dt},minItemsCount:5,validate:ht(1,1,1,1,1)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-5",articles:[{width:null,height:null,tags:"col-1",size:"small",orientation:"vertical",cover:!0,maxWordsLines:4},{width:null,height:null,tags:"col-1",size:"small",orientation:"vertical",cover:!0,maxWordsLines:4},{width:null,height:null,tags:"col-1",size:"small",orientation:"vertical",cover:!0,maxWordsLines:4},{width:null,height:null,tags:"col-1",size:"small",orientation:"vertical",cover:!0,maxWordsLines:4},{width:null,height:null,tags:"col-1",size:"small",orientation:"vertical",cover:!0,maxWordsLines:4}]}}),ft=at({description:"five big vertical articles",restrictions:{viewport:{minWidth:dt},minItemsCount:5,validate:ht(1,1,1,1,1)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-5",articles:[{width:null,height:null,tags:"col-1",size:"large",orientation:"vertical",cover:!0,maxWordsLines:5},{width:null,height:null,tags:"col-1",size:"large",orientation:"vertical",cover:!0,maxWordsLines:5},{width:null,height:null,tags:"col-1",size:"large",orientation:"vertical",cover:!0,maxWordsLines:5},{width:null,height:null,tags:"col-1",size:"large",orientation:"vertical",cover:!0,maxWordsLines:5},{width:null,height:null,tags:"col-1",size:"large",orientation:"vertical",cover:!0,maxWordsLines:5}]}}),mt=at({dummyArticle:nt,description:"one big horizontal article right img and two vertical",restrictions:{viewport:{minWidth:dt},minItemsCount:3,validate:ht(2,1,1),validateMeasured:$e(0,1,2)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-5",articles:[{width:null,height:null,tags:"coverstory article-cols article-cols-m2-t1 pic-left col-3",size:"large",orientation:"horizontal",cover:!0,maxWordsLines:"dynamic"},{width:null,height:null,tags:"col-1",size:"large",orientation:"vertical",cover:!0,maxWordsLines:"dynamic"},{width:null,height:null,tags:"col-1",size:"large",orientation:"vertical",cover:!0,maxWordsLines:"dynamic"}]}}),gt=at({dummyArticle:nt,description:"one big horizontal article right img and two vertical",restrictions:{viewport:{minWidth:dt},minItemsCount:3,validate:ht(1,2,1),validateMeasured:$e(0,1,2)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-5",articles:[{width:null,height:null,tags:"col-1",size:"large",orientation:"vertical",cover:!0,maxWordsLines:"dynamic"},{width:null,height:null,tags:"coverstory article-cols article-cols-m2-t1 pic-left col-3",size:"large",orientation:"horizontal",cover:!0,maxWordsLines:"dynamic"},{width:null,height:null,tags:"col-1",size:"large",orientation:"vertical",cover:!0,maxWordsLines:"dynamic"}]}}),vt=at({dummyArticle:nt,description:"one big horizontal article right img and two vertical",restrictions:{viewport:{minWidth:dt},minItemsCount:3,validate:ht(1,1,2),validateMeasured:$e(0,1,2)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-5",articles:[{width:null,height:null,tags:"col-1",size:"large",orientation:"vertical",cover:!0,maxWordsLines:"dynamic"},{width:null,height:null,tags:"col-1",size:"large",orientation:"vertical",cover:!0,maxWordsLines:"dynamic"},{width:null,height:null,tags:"coverstory article-cols article-cols-m2-t1 pic-left col-3",size:"large",orientation:"horizontal",cover:!0,maxWordsLines:"dynamic"}]}}),yt=at({dummyArticle:nt,description:"four big vertical articles",restrictions:{viewport:{minWidth:dt},minItemsCount:3,validate:ht(1,1,0),validateMeasured:$e(0,1,2)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-4",articles:[{width:null,height:null,tags:"pic-left col-2",size:"large",orientation:"horizontal",cover:!0,maxWordsLines:"dynamic"},{width:null,height:null,tags:"pic-left col-2",size:"large",orientation:"horizontal",cover:!0,maxWordsLines:"dynamic"},{width:null,height:null,tags:"col-1",size:"small",orientation:"horizontal",cover:!1,maxWordsLines:"dynamic"}]}}),_t=at({dummyArticle:nt,description:"four big vertical articles",restrictions:{viewport:{minWidth:dt},minItemsCount:3,validate:ht(0,1,1),validateMeasured:$e(0,1,2)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-4",articles:[{width:null,height:null,tags:"col-1",size:"small",orientation:"horizontal",cover:!1,maxWordsLines:"dynamic"},{width:null,height:null,tags:"pic-right col-2",size:"large",orientation:"horizontal",cover:!0,maxWordsLines:"dynamic"},{width:null,height:null,tags:"pic-right col-2",size:"large",orientation:"horizontal",cover:!0,maxWordsLines:"dynamic"}]}}),bt=at({dummyArticle:nt,description:"four big vertical articles",restrictions:{viewport:{minWidth:dt},minItemsCount:3,validate:ht(1,0,1),validateMeasured:$e(0,1,2)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-4",articles:[{width:null,height:null,tags:"pic-left col-2",size:"large",orientation:"horizontal",cover:!0,maxWordsLines:"dynamic"},{width:null,height:null,tags:"col-1",size:"small",orientation:"horizontal",cover:!1,maxWordsLines:"dynamic"},{width:null,height:null,tags:"pic-right col-2",size:"large",orientation:"horizontal",cover:!0,maxWordsLines:"dynamic"}]}}),wt=at({description:"horizontal 1 article colspan-2 and 1 small",restrictions:{viewport:{minWidth:dt},minItemsCount:3,validateMeasured:$e(0,1,2)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-5",articles:[{width:null,height:null,tags:"pic-left col-2",size:"small",orientation:"horizontal",cover:!0,maxWordsLines:5},{width:null,height:null,tags:"col-1",size:"small",orientation:"horizontal",cover:!1,maxWordsLines:5},{width:null,height:null,tags:"col-1",size:"small",orientation:"horizontal",maxWordsLines:5}]}}),Ct=at({description:"horizontal 1 article colspan-2 and 1 small",restrictions:{viewport:{minWidth:dt},minItemsCount:3,validateMeasured:$e(0,1,2)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-5",articles:[{width:null,height:null,tags:"col-2",size:"small",orientation:"horizontal",cover:!0,maxWordsLines:5},{width:null,height:null,tags:"col-1",size:"small",orientation:"horizontal",cover:!0,maxWordsLines:5},{width:null,height:null,tags:"col-1",size:"small",orientation:"horizontal",cover:!0,maxWordsLines:5}]}}),It=at({description:"horizontal 1 article colspan-2 and 1 small",restrictions:{viewport:{minWidth:dt},minItemsCount:3,validateMeasured:$e(0,1,2)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-5",articles:[{width:null,height:null,tags:"col-1",size:"small",orientation:"horizontal",cover:!1,maxWordsLines:5},{width:null,height:null,tags:"col-1",size:"small",orientation:"horizontal",maxWordsLines:5},{width:null,height:null,tags:"col-2",size:"small",orientation:"horizontal",cover:!0,maxWordsLines:5}]}}),Pt=at({description:"horizontal 1 article colspan-2 and 1 small",restrictions:{viewport:{minWidth:dt},minItemsCount:2,validateMeasured:$e(0,1)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-5",articles:[{width:null,height:null,tags:"col-2",size:"small",orientation:"horizontal",cover:!0,maxWordsLines:5},{width:null,height:null,tags:"col-2",size:"small",orientation:"horizontal",cover:!0,maxWordsLines:5}]}}),xt=at({description:"one horizontal article Left img and one small no image",restrictions:{viewport:{minWidth:dt},minItemsCount:2,validateMeasured:$e(0,1)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-5",articles:[{width:null,height:null,tags:"pic-left col-2",size:"small",orientation:"horizontal",cover:!0,maxWordsLines:5},{width:null,height:null,tags:"col-1",size:"small",orientation:"horizontal",cover:!1,maxWordsLines:5}]}}),St=at({description:"one horizontal article Left img and one small no image",restrictions:{viewport:{minWidth:dt+100},minItemsCount:2,validateMeasured:$e(0,1)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-5",articles:[{width:null,height:null,tags:"col-2",size:"small",orientation:"horizontal",cover:!0,maxWordsLines:5},{width:null,height:null,tags:"col-1",size:"small",orientation:"horizontal",cover:!0,maxWordsLines:5}]}}),Tt=at({description:"one horizontal article Left img and one small no image",restrictions:{viewport:{minWidth:dt},minItemsCount:2,validateMeasured:$e(0,1)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-5",articles:[{width:null,height:null,tags:"col-1",size:"small",orientation:"horizontal",cover:!1,maxWordsLines:5},{width:null,height:null,tags:"col-2",size:"small",orientation:"horizontal",cover:!0,maxWordsLines:5}]}}),kt=ut(1,dt,5),Areturn e.every((function(e){return e.data.featured}))}var Lt=at({description:"featured one big vertical article",restrictions:{viewport:{maxWidth:600},minItemsCount:1,validate:Dt},layout:{template:qe.p.OneLine,width:null,height:null,tags:"featured",featured:!0,articles:[{width:null,height:null,size:"large",orientation:"vertical",maxTextLines:4}]}}),Nt=at({description:"featured one big vertical article no image",restrictions:{viewport:{minWidth:600},minItemsCount:1,validate:Dt},layout:{template:qe.p.OneLine,width:null,height:null,tags:"featured",featured:!0,articles:[{width:null,height:null,size:"large",orientation:"vertical",cover:!1,maxTextLines:4}]}}),Rt=at({dummyArticle:nt,description:"featured one big horizontal article left img",restrictions:{viewport:{minWidth:600},minItemsCount:1,validate:Dt},layout:{template:qe.p.OneLine,width:null,height:null,tags:"featured",featured:!0,articles:[{width:null,height:null,tags:"pic-left",size:"large",orientatrientation:"horizontal",cover:!0,maxWordsLines:5}]}})}function Bt(e,t){if(t<3)throw new Error("Invalid argument: columnsCount must be >= 3.");return at({description:"one small article colspan 2",restrictions:{viewport:{minWidth:e},minItemsCount:2,validateMeasured:$e(0,1)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-".concat(t),articles:[{width:null,height:null,tags:"pic-left col-2",size:"small",orientation:"horizontal",cover:!0,maxWordsLines:5},{width:null,height:null,tags:"col-1",size:"small",ientation:"horizontal",cover:!0,maxWordsLines:5}]}})}var zt={id:(0,re.Z)(),description:"channel section",feedItemType:de.an.SectionChannel,validate:function(e,t){if(t.length<1)return null;var n=t[0];return n.feedItem&&n.feedItem.type===de.an.SectionChannel?{rate:0,avgOffset:0}:null},build:function(e,t){return(0,u.mG)(this,void 0,void 0,(function(){var n,i,r;return(0,u.Jh)(this,(function(o){switch(o.label){case 0:return n=t[0],i=t.slice(1),r=n.feedItem,[4,(0,ct.z1)(e,n.feedItem)];case 1:return r.layout=o.sent(),[2,{items:i,result:n}]}}))}))}},Ut={id:(0,re.Z)(),description:"cta strategy",feedItemType:de.an.Cta,validate:function(e,t){if(t.length<1)return null;var n=t[0];return n.feedItem&&n.feedItem.type===de.an.Cta?{rate:0,avgOffset:0}:null},build:function(e,t){return(0,u.mG)(this,void 0,void 0,(function(){var n,i,r;return(0,u.Jh)(this,(function(o){switch(o.label){case 0:return n=t[0],i=t.slice(1),r=n.feedItem,[4,(0,ct.z1)(e,n.feedItem)];case 1:return r.layout=o.sent(),[2,{items:i,result:n}]}}))}))}},Ht={id:(0,re.Z)(),description:"action strategy",feedItemType:de.an.Action,validate:function(e,t){if(t.length<1)return null;var n=t[0];return n.feedItem&&n.feedItem.type===de.an.Action?{rate:0,avgOffset:0}:null},build:function(e,t){return(0,u.mG)(this,void 0,void 0,(function(){var n,i,r;return(0,u.Jh)(this,(function(o){switch(o.label){case 0:return n=t[0],i=t.slice(1),r=n.feedItem,[4,(0,ct.z1)(e,n.feedItem)];case 1:return r.layout=o.sent(),[2,{items:i,result:n}]}}))}))}},jt={id:(0,re.Z)(),description:"now on pr strategy",feedItemType:de.an.Now,validate:function(e,t){if(t.length<1)return null;var n=t[0];return n.feedItem&&n.feedItem.type===de.an.Now?{rate:0,avgOffset:0}:null},build:function(e,t){return(0,u.mG)(this,void 0,void 0,(function(){var n,i,r;return(0,u.Jh)(this,(function(o){switch(o.label){case 0:return n=t[0],i=t.slice(1),r=n.feedItem,[4,(0,ct.z1)(e,n.feedItem)];case 1:return r.layout=o.sent(),[2,{items:i,result:n}]}}))}))}},Wt={id:(0,re.Z)(),description:"onboarding strategy",feedItemType:de.an.Onboarding,validate:function(e,t){if(t.length<1)return null;var n=t[0];return n.feedItem&&n.feedItem.type===de.an.Onboarding?{rate:0,avgOffset:0}:null},build:function(e,t){return(0,u.mG)(this,void 0,void 0,(function(){var n,i,r;return(0,u.Jh)(this,(function(o){switch(o.label){case 0:return n=t[0],i=t.slice(1),r=n.feedItem,[4,(0,ct.z1)(e,n.feedItem)];case 1:return r.layout=o.sent(),[2,{items:i,result:n}]}}))}))}},qt={id:(0,re.Z)(),descri.feedIeturn r.layout=o.sent(),[2,{items:i,result:n}]}}))}))}},Gt=Pe.Large;function Xt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Je.apply(void 0,(0,u.ev)([4],(0,u.CR)(e),!1))}var Yt=at({dummyArticle:nt,description:"one big horizontal article right img and two vertical",restrictions:{viewport:{minWidth:Gt},minItemsCount:2,validate:Xt(2,1),validateMeasured:$e(0,1)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-4",articles:[{width:null,height:null,tags:"coverstory article-cols article-cols-m2-t1 pic-left col-3",size:"large",orientation:"horizontal",cover:!0,maxWordsLines:"dynamic"},{width:null,height:null,tags:"col-1",size:"large",orientation:"vertical",cover:!0,maxWordsLines:"dynamic"}]}}),Kt=at({dummyArticle:nt,description:"one big horizontal article right img and two vertical",restrictions:{viewport:{minWidth:Gt},minItemsCount:2,validate:Xt(1,2),validateMeasured:$e(0,1)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-4",articles:[{width:null,height:null,tags:"col-1",size:"large",orientation:"vertical",cover:!0,maxWordsLines:"dynamic"},{width:null,height:null,tags:"coverstory article-cols article-cols-m2-t1 pic-right col-3",size:"large",orientation:"horizontal",cover:!0,maxWordsLines:"dynamic"}]}}),Jt=at({description:"four small articles w/ images",restrictions:{viewport:{minWidth:Gt},minItemsCount:4,validate:Xt(1,1,1,1)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row",articles:[{width:null,height:null,size:"small",orientation:"vertical",cover:!0,maxWordsLines:4},{width:null,height:null,size:"small",orientation:"vertical",cover:!0,maxWordsLines:4},{width:null,height:null,size:"small",orientation:"vertical",cover:!0,maxWordsLines:4},{width:null,height:null,size:"small",orientation:"vertical",cover:!0,maxWordsLines:4}]}}),$t=st({description:"3 inline and 2 vertical",restrictions:{viewport:{minWidth:Gt},minItemsCount:5,validate:Xt(1,1,1,0,0)},layout:{template:qe.p.ThreeLine,width:null,height:null,tags:"row row-cols-4",articles:[{width:null,height:null,tags:"col-1",size:"small",orientation:"vertical",cover:!0,maxWordsLines:5},{width:null,height:null,tags:"col-1",size:"small",orientation:"vertical",cover:!0,maxWordsLines:5},{width:null,height:null,tags:"col-1",size:"small",orientation:"vertical",cover:!0,maxWordsLines:5}],groups:{tags:"col-1",group1:{orientation:"horizontal",articles:[{width:null,height:null,size:"small",orientation:"horizontal",cover:!1,maxWordsLines:5}]},group2:{orientation:"horizontal",articles:[{width:null,height:null,size:"small",orientation:"horizontal",cover:!1,maxWordsLines:5}]}}}}),Qt=at({description:"four big vertical articles",restrictions:{viewport:{minWidth:Gt},minItemsCount:4,validate:Xt(1,1,1,1)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row",articles:[{width:null,height:null,size:"large",orientation:"vertical",cover:!0,maxWordsLines:5},{width:null,height:null,size:"large",orientation:"vertical",cover:!0,maxWordsLines:5},{width:null,height:null,size:"large",orientation:"vertical",cover:!0,maxWordsLines:5},{width:null,height:null,size:"large",orientation:"vertical",cover:!0,maxWordsLines:5}]}}),en=at({dummyArticle:nt,description:"four big vertical articles",restrictions:{viewport:{minWidth:Gt},minItemsCount:2,validate:Xt(1,1),validateMeasured:$e(0,1)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-4",articles:[{width:null,height:null,tags:"pic-right col-2",size:"large",orientation:"horizontal",cover:!0,maxWordsLines:"dynamic"},{width:null,height:null,tags:"pic-right col-2",size:"large",orientation:"horizontal",cover:!0,maxWordsLines:"dynamic"}]}}),tn=at({dummyArticle:nt,description:"four big vertical articles",restrictions:{viewport:{minWidth:Gt},minItemsCount:3,validate:Xt(1,0,0),validateMeasured:$e(0,1,2)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-4",articles:[{width:null,height:null,tags:"pic-left col-2",size:"large",orientation:"horizontal",cover:!0,maxWordsLines:"dynamic"},{width:null,height:null,tags:"col-1",size:"small",orientation:"horizontal",cover:!1,maxWordsLines:"dynamic"},{width:null,height:null,tags:"col-1",size:"small",orientation:"horizontal",cover:!1,maxWordsLines:"dynamic"}]}}),nn=at({dummyArticle:nt,description:"four big vertical articles",restrictions:{viewport:{minWidth:Gt},minItemsCount:3,validate:Xt(0,0,1),validateMeasured:$e(0,1,2)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-4",articles:[{width:null,height:null,tags:"col-1",size:"small",orientation:"horizontal",cover:!1,maxWordsLines:"dynamic"},{width:null,height:null,tags:"col-1",size:"small",orientation:"horizontal",cover:!1,maxWordsLines:"dynamic"},{width:null,height:null,tags:"pic-right col-2",size:"large",orientation:"horizontal",rientation:"horizontal",cover:!0,maxWordsLines:5}]}})}(Gt),an=function(e,t){return at({description:"horizontal 1 article colspan-2 and 1 small",restrictions:{viewport:{minWidth:e},minItemsCount:3,validateMeasured:$e(0,1,2)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-".concat(4),articles:[{width:null,height:null,tags:"pic-left col-2",size:"small",orientation:"horizontal",cover:!0,maxWordsLines:5},{width:null,height:null,tags:"col-1",size:"small",orientation:"horizontal",cover:!1,maxWordsLines:5},{width:null,height:null,tags:"col-1",size:"small"rientatrientat"small"rientation:"horizontal",cover:!0,maxWordsLines:5}]}})}(Gt),dn=Bt(Gt,4),hn=Ft(Gt,4),pn=Ot(Gt,4),fn=Vt(Gt,4),mn=ut(1,Gt,4),gn=ut(2,Gt,4),vn=ut(3,Gt,4),yn=at({description:"one big vertical article",restrictions:{viewport:{maxWidth:600},minItemsCount:1},layout:{template:qe.p.OneLine,width:null,height:null,articles:[{width:null,height:null,size:"large",orientation:"vertical",maxTextLines:4}]}}),_n=at({description:"two big vertical articles",restrictions:{viewport:{minWidth:600},minItemsCount:2},layout:{template:qe.p.OneLine,width:null,height:null,articles:[{width:null,height:null,size:"large",orientation:"vertical",cover:!0,maxWordsLines:5},{width:null,height:null,size:"large",orientation:"vertical",cover:!0,maxWordsLines:5}]}}),bn=at({dummyArticle:nt,description:"one big horizontal article right img",restrictions:{viewport:{minWidth:600},minItemsCount:1},layout:{template:qe.p.OneLine,width:null,height:null,articles:[{width:null,height:null,tags:"pic-right",size:"large",orientation:"horizontal",cover:!0,maxWordsLines:"dynamic"}]}}),wn=at({dummyArticle:nt,description:"one big horizontal article left img",restrictions:{viewport:{minWidth:600},minItemsCount:1},layout:{template:qe.p.OneLine,width:null,height:null,articles:[{width:null,height:null,tags:"pic-left",size:"large",orientation:"horizontal",cover:!0,maxWordsLines:"dynamic"}]}}),Cn=at({description:"two small articles",restrictions:{viewport:{maxWidth:600},minItemsCount:2},layout:{template:qe.p.OneLine,width:null,height:null,articles:[{width:null,height:null,size:"small",orientation:"vertical",cover:!0,maxWordsLines:4},{width:null,height:null,size:"small",orientation:"vertical",cover:!0,maxWordsLines:4}]}}),In=at({description:"three small articles",restrictions:{viewport:{minWidth:600},minItemsCount:3},layout:{template:qe.p.OneLine,width:null,height:null,articles:[{width:null,height:null,size:"small",orientation:"vertical",cover:!0,maxWordsLines:4},{width:null,height:null,size:"small",orientation:"vertical",cover:!0,maxWordsLines:4},{width:null,height:null,size:"small",orientation:"vertical",cover:!0,maxWordsLines:4}]}}),Pn=at({description:"one small horizontal article",restrictions:{viewport:{maxWidth:600},minItemsCount:1},layout:{template:qe.p.OneLine,width:null,height:null,articles:[{width:null,height:null,size:"small",orientation:"horizontal",maxWordsLines:3}]}}),xn=at({description:"two small horizontal articles",restrictions:{viewport:{minWidth:600},minItemsCount:1},layout:{template:qe.p.OneLine,width:null,height:null,articles:[{width:null,height:null,size:"small",orientation:"horizontal",maxWordsLines:3},{width:null,height:null,size:"small",orientation:"horizontal",maxWordsLines:3}]}}),Sn=st({description:"set of 4 articles with large vertical and two small pairs of vertical and horizontal",restrictions:{viewport:{minWidth:700},minItemsCount:4},layout:{template:qe.p.ThreeLine,width:null,height:null,articles:[{width:null,height:null,size:"large",orientation:"vertical",cover:!0,maxWordsLines:5}],groups:{group1:{orientation:"horizontal",articles:[{width:null,height:null,size:"small",orientation:"vertical",cover:!0,maxWordsLines:4},{width:null,height:null,size:"small",orientation:"vertical",cover:!0,maxWordsLines:4}]},group2:{orientation:"vertical",articles:[{width:null,height:null,size:"small",orientation:"horizontal",cover:!0,maxWordsLines:3}]}}}}),Tn={uniqKey:(0,re.Z)(),id:"id",type:de.an.Page,sourceRef:null,data:{sectionId:"sectionId",page:{issueKey:"issueKey",title:"dummy",date:new Date,pageName:"page N",pageNumber:1,url:"",size:{width:-1,height:-1}},ava=u.sent(),[2,{items:o,result:{feedItem:a}}]}}))}))}}}var En=An({viewport:{maxWidth:600},maxItemsCount:1}),Zn=An({viewport:{minWidth:600},maxItemsCount:2}),Mn=An({viewport:{minWidth:900},maxItemsCount:3}),Dn=An({v;return Je.apply(void 0,(0,u.ev)([3],(0,u.CR)(e),!1))}var Rn=at({description:"three small articles w/ images",restrictions:{viewport:{minWidth:Ln},minItemsCount:3,validate:Nn(1,1,1)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row",articles:[{width:null,height:null,size:"small",orientation:"vertical",cover:!0,maxWordsLines:4},{width:null,height:null,size:"small",orientation:"vertical",cover:!0,maxWordsLines:4},{width:null,height:null,size:"small",orientation:"vertical",cover:!0,maxWordsLines:4}]}}),Vn=st({description:"2 inline and 2 vertical",restrictions:{viewport:{minWidth:Ln},minItemsCount:4,validate:Nn(1,1,0,0)},layout:{template:qe.p.ThreeLine,width:null,height:null,tags:"row row-cols-3",articles:[{width:null,height:null,tags:"col-1",size:"small",orientation:"vertical",cover:!0,maxWordsLines:5},{width:null,height:null,tags:"col-1",size:"small",orientation:"vertical",cover:!0,maxWordsLines:5}],groups:{tags:"col-1",group1:{orientation:"horizontal",articles:[{width:null,height:null,size:"small",orientation:"horizontal",cover:!1,maxWordsLines:5}]},group2:{orientation:"horizontal",articles:[{width:null,height:null,size:"small",orientation:"horizontal",cover:!1,maxWordsLines:5}]}}}}),Bn=at({description:"three big vertical articles",restrictions:{viewport:{minWidth:Ln},minItemsCount:3,validate:Nn(1,1,1)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row",articles:[{width:null,height:null,size:"large",orientation:"vertical",cover:!0,maxWordsLines:5},{width:null,height:null,size:"large",orientation:"vertical",cover:!0,maxWordsLines:5},{width:null,height:null,size:"large",orientation:"vertical",cover:!0,maxWordsLines:5}]}}),Fn=at({dummyArticle:nt,description:"featured one big horizontal article 2 columns left img and 1 column text",restrictions:{viewport:{minWidth:Ln},minItemsCount:1,validate:Nn(2)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row",articles:[{width:null,height:null,tags:"coverstory article-cols article-cols-m2-t1 pic-left",size:"large",orientation:"horizontal",cover:!0,maxWordsLines:"dynamic"}]}}),On=at({dummyArticle:nt,description:"three big vertical articles",restrictions:{viewport:{minWidth:Ln},minItemsCount:2,validate:Nn(1,0),validateMeasured:$e(0,1)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-3",articles:[{width:null,height:null,tags:"col-2 pic-left",size:"large",orientation:"horizontal",cover:!0,maxWordsLines:"dynamic"},{width:null,height:null,tags:"col-1",size:"small",orientation:"horizontal",cover:!1,maxWordsLines:"dynamic"}]}}),zn=at({dummyArticle:nt,description:"three big vertical articles",restrictions:{viewport:{minWidth:Ln},minItemsCount:2,validate:Nn(0,1),validateMeasured:$e(0,1)},layout:{template:qe.p.OneLine,width:null,height:null,tags:"row row-cols-3",articles:[{width:null,height:null,tags:"col-1",size:"small",orientation:"horizontal",cover:!1,maxWordsLines:"dynamic"},{width:null,height:null,tags:"col-2 pic-right",size:"large",orientation:"horizontal",cover:!0,maxWordsLines:"dynamic"}]}}),Un=ut(3,Ln,3),Hn=Bt(Ln,3),jn=Ft(Ln,3),Wn=Ot(Ln,3),t(xt,0),it(St,t(dn,0),it(hn,0,.9),it(zn,.9):.6},{strategy:Mn,rating:.7},{strategy:Dn,rating:.7}]},[]]];function Kn(e,t){var n,i,r,o,a;return(0,u.Jh)(this,(function(s){switch(s.label){case 0:n=[],i=(0,c.cloneDeep)(e.stats),t=tturn)&&n.call(o)}finally{if(t)throw t.error}}return[]}(e),a=function(){var a,s,c,l,d,h,p,m,g;return(0,u.Jh)inRate&&n.rate<t.minRate?null:{variant:t,datiant.strategy.id===t})),1),[3,4];case 4:return[2]}}))},v.label=1;case 1:return c||!s.length?[3,3]:[5,h()];case 2:return v.sent(),[3,1];case 3:return c&&d?(c.result.feedItem.rendering={variantId:d.strategyId,probability:d.probability},function(e,t){var n=e.result.feedItem;if((0,ie.Vi)(n))return t.total=0,void(t.variants={});if(n.rendering){var i=n.rendering.variantId;t.total++,t.variants[i]||(t.variants[i]={renderedTimes:0,lastRenderedAt:-1}),t.variants[i].renderedTimes++,t.variants[i].lastRenderedAt=t.total-1}}(c,i),t=c.items,n.push(c.result),[2]):(p=a[0],m=p.feedItem,g=p.originalItem,(m||g)&&n.push({feedItem:m,originalItem:g?[g]:null}),t=t.slice(1,t.length),[2,"continue"])}}))},s.label=1;case 1:return t.length>0?[5,a()]:[3,3];case 2:return s.sent(),[3,1];case 3:return[2,n]}}))}function Jn(e,t){return(0,u.Jh)(this,(function(n){switch(n.label){case 0:return[4,(0,ee.S3)({done:(0,Fe.K)("".concat(C),(function(n){return n.payload.sourceKey===e&&n.turn n.payload.sourceKey===e&&n.payload.direction===t})),timeout:(0,ee.gw)(15e3)})];case 1:return n.sent(),[2]}}))}function $n(e){var t,n,i,r;return(0,u.Jh)(this,(function(o){switch(o.label){case 0:return[4,(0,ee.Ys)(Ce,{sourceKey:e})];case 1:return(t=o.sent())&&t.currentViewport?[2,t.currentViewport]:[4,(0,ee.Ys)(Ue.xY)];case 2:return n=o.sent(),[4,(0,ee.Ys)(je.Qj)];case 3:return i=o.sent(),[4,(0,ee.Ys)(je.jP)];case 4:return r=o.sent(),[2,(0,We.g)(n.viewport,i||"",r)]}}))}function Qn(e,t,n,i){var r,o,a,s,c,l,d,h,f,m,g,v,y;return(0,u.Jh)(this,(function(_){switch(_.label){case 0:return[4,(0,ee.Ys)(ve,{sourceKey:e})];case 1:return(r=_.sent())?[4,(0,ee.Ys)(Ce,{sourceKey:e})]:[2,0];case 2:return o=_.sent(),[5,(0,u.XA)(n.getContext(e,{renderingContext:null==o?void 0:o.context}))];case 3:return a=_.sent(),s=n.parse(a,t,r.items,i),[4,(0,ee.Ys)(te.zT)];case 4:return c=_.sent(),[5,(0,u.XA)($n(e))];case 5:return l=_.sent(),d=(null===(v=null==o?void 0:o.context)||void 0===v?void 0:v.normalizedRendering)?ue(t,{items:r.items,total:i.total}):ue(t,{items:[],total:i.total}),h={platform:c,viewName:null===(y=null==o?void 0:o.context)||void 0===y?void 0:y.viewName,direction:t,stats:d,viewport:l},f=t===p.N.Backward?(0,u.ev)([],(0,u.CR)(s.items),!1).reverse():s.items,[5,(0,u.XA)(Kn(h,f))];case 6:return m=_.sent(),[4,(0,ee.gz)(P({sourceKey:e,direction:t,viewport:h.viewport,data:m}))];case 7:return _.sent(),(g=Be(m.map((function(e){return e.feedItem})).filter(ie.g2).map(ie.uG))).length?[4,(0,ee.gz)((0,Oe.nl)({articles:g}))]:[3,9];case 8:_.sent(),_.label=9;case 9:return[2,m.length]}}))}function ei(e){var t,n,i,r,o;return(0,u.Jh)(this,(function(a){switch(a.label){case 0:return[4,(0,ee.Ys)(Ne,{sourceKey:e})];case 1:return(t=a.sent())?[4,(0,ee.Ys)(Ue.xY)]:[3,6];case 2:return n=a.sent(),[4,(0,ee.Ys)(je.Qj)];case 3:return i=a.sent(),[4,(0,ee.Ys)(je.jP)];case 4:return r=a.sent(),o=(0,He.tF)(n.viewport,i,r),t.viewportHashCode===o?[3,6]:[4,(0,ee.gz)(W({sourceKey:e,scrollPosition:null}))];case 5:a.sent(),a.label=6;case 6:return[4,(0,ee.Ys)(Re,{sourceKey:e})];case 7:return a.sent()?[4,(0,ee.gz)(q({sourceKey:e}))]:[3,9];case 8:a.sent(),a.label=9;case 9:return[2]}}))}function ti(e,t){var n,i;return(0,u.Jh)(this,(function(r){switch(r.label){case 0:return[4,(0,ee.Ys)(ve,{sourceKey:e})];case 1:return r.sent()?[4,(0,ee.Ys)(Ce,{sourceKey:e})]:[2];case 2:return n=r.sent(),i=n?n.currentViewport:null,JSON.stringify(i)===JSON.stringify(t)?[3,4]:[4,(0,ee.gz)(x({sourceKey:e,viewport:t}))];case 3:r.sent(),r.label=4;case 4:return[2]}}))}function ni(e){var t,n,i,r,o,a;return(0,u.Jh)(this,(function(s){switch(s.label){case 0:t=e.sourceKey,n=e.parserUniqId,i=e.viewport,s.label=1;case 1:return s.trys.push([1,4,,5]),(0,oe.wp)(n)?[4,(0,ee.Ys)(ve,{sourceKey:t})]:((0,ze.v)("Cannot find parser with id ".concat(n)),[2,!1]);case 2:return s.sent()?[4,(0,ee.Ys)(Ce,{sourceKey:t})]:[2,!1];case 3:return(r=s.sent())&&(o=r.currentViewport)&&o.hashCode===i.hashCode?[2,!1]:[2,!0];case 4:return a=s.sent(),(0,ze.v)(a),[3,5];case 5:return[2,!1]}}))}function ii(e){var t,n;return(0,u.Jh)(this,(function(i){switch(i.label){case 0:return t=e.sourceKey,n=e.viewport,[5,(0,u.XA)(ni(e))];case 1:return i.sent()?[3,3]:[5,(0,u.XA)(ti(t,n))];case 2:return i.sent(),[2,!1];case 3:return[4,(0,ee.gz)(S({sourceKey:t,parserUniqId:e.parserUniqId,viewport:n}))];case 4:return i.sent(),[4,(0,ee.S3)({done:(0,Fe.K)(k,(function(e){return e.payload.sourceKey===t})),failed:(0,Fe.K)(A,(function(e){return e.payload.sourceKey===t}))})];case 5:return i.sent(),[2,!0]}}))}function ri(e,t){var n,i,r,o;return(0,u.Jh)(this,(function(a){switch(a.label){case 0:return[4,(0,ee.Ys)(ve,{sourceKey:e})];case 1:return(n=a.sent())?(i=n.directions[t],r=i.eof,o=i.status,r?[2]:o!==l.o.Pending&&o!==l.o.Queued?[3,3]:[4,(0,ee.S3)({done:(0,Fe.K)("".concat(C),(function(n){var i=n.payload;return i.sourceKeyr i=n.payload;return i.sourceKey===e&&i.direction===t}))})]):[2];case 2:a.sent(),a.label=3;case 3:return[2]}}))}function oi(){return(0,u.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,ee.gz)(g())];case 1:return e.sent(),[2]}}))}function ai(e,t){var n,i;return(0,u.Jh)(this,(function(r){switch(r.label){case 0:return[4,(0,ee.Ys)(Ee,{sourceKey:e})];case 1:if(!(n=r.sent()))retur=t.find((function(e){return!!(0,ie.jR)(e,n.articleId)})))return[2,{cursorUniqKey:(0,re.Z)(),cursorType:ne.B.Article,feedItemUniqKey:i.uniqKey,sourceKey:e,articleId:n.articturn!(!(0,ie.Vi)(e)||e.data.section.id!==n.sectionId)}))))return[2,{cursorUniqKey:(0,re.Z)(),cursorType:ne.B.Section,feedItemUniqKey:i.uniqKey,sourceKey:e,sectionId:n.sectionId}];return[2,null]}}))}function si(e,t,n,i){var r,o,a,s,c,l,d;return(0,u.Jh)(this,(function(u){switch(u.label){case 0:return[4,(0,ee.Ys)(Ne,{sourceKey:e})];case 1:if(!(r=u.sent()))return[2,null];if(r.viewportHashCode===t.hashCode)return[2,r.position];if(!(o=n.find((function(e){return e.uniqKey===r.position.itemKey}))))return[2,null];if((0,ie.g2)(e)||e.data.sectionId!==a||!(0,ie.jR)(e,s.articleId))})))return[2,{itemViewportOffsetY:0,itemKey:d.uniqKey}]}else if((0,rn(0,ie.Vi)(e)&&e.data.section.id===c&&e.position===l}))))return[2,{itemViewportOffsetY:0,itemKey:d.uniqKey}];return[2,null]}}))}function ui(e){var t,n,i,r,o,a,s,c,d;return(0,u.Jh)(this,(function(h){switch(h.label){case 0:t=!0,h.label=1;case 1:return t?[4,(0,ee.Ys)(ve,{sourceKey:e})]:[3,11];case 2:if(!(n=h.sent()))return[2];t=!1,h.label=3;case 3:h.trys.push([3,8,9,10]),c=void 0,i=(0,u.XA)([p.N.Forward,p.N.Backward]),r=i.next(),h.label=4;case 4:return r.done?[3,7]:(o=r.value,(a=n.directions[o].status)!==l.o.Pending&&a!==l.o.Queued?[3,6]:[4,ri(e,o)]);case 5:return h.sent(),t=!0,[3,7];case 6:return r=i.next(),[3,4];case 7:return[3,10];case 8:return s=h.sent(),c={error:s},[3,10];case 9:try{r&&!r.done&&(d=i.return)&&d.call(i)}finally{if(c)throw c.error}return[7];case 10:return[3,1];case 11:return[2]}}))}function ci(e){var t,n,i,r,o,a,s,c,l,d,h,m,g,v,y,_,b,w,C,I=e.payload;return(0,u.Jh)(this,(function(e){switch(e.label){case 0:return t=I.sourceKey,n=I.parserUniqId,i=I.viewport,[4,ni({sourceKey:t,parserUniqId:n,viewport:i})];case 1:if(!e.sent())return[2];e.label=2;case 2:return e.trys.push([2,17,19,23]),[4,(0,ee.gz)(T({sourceKey:t}))];case 3:return e.sent(),[4,ui(t)];case 4:return e.sent(),r=(0,oe.wp)(n),[4,(0,ee.Ys)(ve,{sourceKey:t})];case 5:if(!(o=e.sent()))throw new Error("Invalid source key: feed data was not found.");return[4,(0,ee.Ys)(Ce,{sourceKey:t})];case 6:return(a=e.sent())&&(s=a.cache[i.hashCode])?[4,ai(t,s.items)]:[3,10];case 7:return c=e.sent(),[4,si(t,i,o.items,s.items)];case 8:return l=e.sent(),[4,(0,ee.gz)(k({sourceKey:t,viewport:i,items:s.items,cursor:c,scrollPosition:l}))];case 9:return e.sent(),[2];case 10:return d=p.N.Forward,h=(0,u.ev)([],(0,u.CR)(o.originalItems),!1),m=o.directions[p.N.Forward],[4,r.getContext(t,{renderingContext:a&&a.context})];case 11:return g=e.sent(),v=r.parse(g,d,[],{items:h,range:o.range&&(0,u.pi)({},o.range),total:o.total,eof:m.eof}),[4,(0,ee.Ys)(te.zT)];case 12:return[4,Kn({platform:e.sent(),viewName:null===(C=null==a?void 0:a.context)||void 0===C?void 0:C.viewName,direction:d,stats:ue(d,{items:[],total:o.total}),viewport:i},v.items)];case 13:return y=e.sent(),_=y.map((function(e){return e.feedItem})).filter(f.C_),[4,ai(t,_)];case 14:return b=e.sent(),[4,si(t,i,o.items,_)];case 15:return w=e.sent(),[4,(0,ee.gz)(k({sourceKey:t,viewport:i,items:_,cursor:b,scrollPosition:w}))];case 16:return e.sent(),[3,23];case 17:return e.sent(),[4,(0,ee.gz)(A({sourceKey:t}))];case 18:return e.sent(),[3,23];case 19:return[4,(0,ee.By)()];case 20:return e.sent()?[4,(0,ee.gz)(A({sourceKey:t}))]:[3,22];case 21:e.sent(),e.label=22;case 22:return[7];case 23:return[2]}}))}function li(){var e,t;return(0,u.Jh)(this,(function(n){switch(n.label){case 0:return[4,(0,ee.qn)(S)];case 1:e=n.sent(),n.label=2;case 2:return[4,(0,ee.rM)(ci,e)];case 3:return t=n.sent(),[4,(0,ee.qn)(S)];case 4:return e=n.sent(),[4,(0,ee.al)turn e.sent(),[4,oi()];case 2:return e.sent(),[2]}}))}function hi(e){var t,n,i=e.payload;return(0,u.Jh)(this,(function(e){switch(e.label){case 0:return t=i.cursor,n=t.sourceKey,[4,(0,ee.Ys)(ve,{sourceKey:n})];case 1:return e.sent()?[4,(0,ee.gz)(U({cursor:t}))]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}}))}function pi(){return(0,u.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,ee.ib)(z,hi)];case 1:return e.sent(),[2]}}))}var fi=200;function mi(e){var t,n,i,r,o,a,s,c,l,d,h,f,m,g,v,y,_,b;return(0,u.Jh)(this,(function(P){switch(P.label){case 0:t=e.sourceKey,n=e.direction,i=e.loadData,r=e.parser,P.label=1;case 1:return P.trys.push([1,11,13,17]),[5,(0,u.XA)($n(t))];case 2:return o=P.sent(),[4,(0,ee.gz)(w({sourceKey:t,direction:n,viewport:o}))];case 3:return P.sent(),[4,(0,ee.Ys)(ve,{sourceKey:t})];case 4:a=P.sent(),s=n===p.N.Forward,c=e.minItemsToLoad,0!==(l=Math.max(e.offset||0,0))&&a&&a.range&&(l>=a.range.from&&l<=a.range.to&&(l=s?a.range.to:a.range.from),!s&&l<a.range.from?c=a.range.from-l:s&&a.range.to>0&&l>a.range.to&&(c=l-a.range.to,l=a.range.to)),0===(d=l||0)&&a&&a.range&&(d=s?a.range.to:a.range.from),h=a&&a.range?(0,u.pi)({},a.range):{from:null,to:null},f=!1,m=null,s||(d=Math.max(d-c,0),null!==h.from&&d+c>h.from&&(c=h.from-d)),g=void 0,P.label=5;case 5:return P.trys.push([5,7,,8]),[5,(0,u.XA)(i({direction:n,offset:d,take:c}))];case 6:return g=P.sent(),[3,8];case 7:return v=P.sent(),(0,ze.v)(v),g={items:[],meta:{offset:d,total:d}},[3,8];case 8:return y={from:g.meta.offset,to:g.meta.offset+g.items.length-1},h={from:null!==h.from?Math.min(h.from,y.from):y.from,to:Math.max(h.to||0,y.to+1)},(f=0===g.items.length)||(f=s?g.meta.total===h.to:0===h.from),m=f&&s||null===g.meta.total?h.to:null!==(b=g.meta.total)&&void 0!==b?b:Math.max(h.to,fi),[5,(0,u.XA)(Qn(t,n,r,{items:g.items,range:y,total:m,eof:f}))];case 9:return P.sent(),[4,(0,ee.gz)(C({sourceKey:t,direction:n,range:h,total:m,eof:f}))];case 10:return P.sent(),[3,17];case 11:return _=P.sent(),(0,ze.v)(_),[4,(0,ee.gz)(I({sourceKey:t,direction:n,error:_}))];case 12:return P.sent(),[3,17];case 13:return[4,(0,ee.By)()];case 14:return P.sent()?[4,(0,ee.gz)(I({sourceKey:t,direction:n,error:"cancelled"}))]:[3,16];case 15:P.sent(),P.label=16;case 1nt(),[4,(0,ee.rM)(pi)];case 2:return e.sent(),[n r(e).call(t,n)}} i},ox:function(){return l},xo:function(){return o}})},70832:function(e,t,n){"use strict";n.dn(0,r.S)((0,i.m6)("imageServer.download.url",""),e,t)}},25881:function(e,t,n){"use strict";n.d(t,{BF:function(){return v},Bt:function(){return y},G2:function(){return c},My:function(){return g},U0:function(){return h},Uj:function(){return l},bp:function(){return u},oY:function(){return p},p8:function(){return m},vR:function(){return f},x8:function(){return d}});var i=n(22970),r=n(59285),o=(0,i.pi)({},r);function a(e,t,n){if(t>0&&e.widt0){var i=100*t/e.height;return Math.min(i,n)}return 0}fun,t,n,i):o.getThumbUrlByIssueForWidth(e.issue,t,n,i)}function h(e,t,n,i){return"string"==typeof e?o.getFirstPageThumbUrlByIssueForWidth(e,t,n,iidth||r.Height>t.Height){t=r;continue}}}}return t}function y(e,t,n){var i=h(function(t){return t.w>e}));t=i?i.w:r(n).w}return t}},42858:function(e,t,n){"use strict";n.d(t,{b:function(){return r},o:function(){return i}});var i="integrations-zotero",r=500},9830:function(e,t,n){"use strict";n.d(t,{v:function(){return r}});var i=new(n(19237).x);i.asObservable();var r=function(){for(var e,t=[],n=0;n<arguments.length;nnsole).error.apply(e,d(t,{Z:function(){return i}});var i=self.console.warn},90202:function(e,t,n){"use strict";n.d(t,{k$:function(){return b},$i:function(){return g},G1:function(){return v},dA:function(){return m},qA:function(){return d},lO:function(){return p},xS:function(){return f},FF:function(){return lete t[e]:"object"==typeof t[e]&&(t[e]=a(t[e]))})),t}var s,u=(s=[],{get lengthe:fun{s.forEach((function(t){retR)(I(r),2),a=o[0],s=o[1];c.replaceState(a,"",s),w(ion f(e,t){void 0===t&&(t={}),h(e,t,"REPLACE_RELOAD")}function m(e){c.go(e)}function g(){c.bon w(e){var t=b();l=e,u.call({action:l,location:t})}function C(e,t){void 0===t&&(t={});var n=window.location,r=n.pathname,a=n.href;return(0,i.pi)((0,i.pi)({pe.slice(i),e=e.slice(0,i)),e&&(t.pathname=e)}return t}(e):e),{state:t,key:o()})}function I(e){return[{state:a(e.state),key:e.key},(c=e,"string"==typeof c?c:(t=c,n=t.pathname,i=void 0===n?"/":n,r=t.search,o=void 0===r?"":r,s=t.hash,u=void 0===s?"":s,o&&"?"!==o&&(i+="?"===o.charAt(0)?o:"?"+o),u&&"#"!==u&&(i+="#"===u.charAt(0)?u:"#"+u),i))];vndow.addEventListener("popstate",(function(){w(on(e):t,component:n,fallback:r}}function o(e){return i[e]}},90913:function(e,t,n){"use strict";n.d(t,{aF:function(){return k},v7:function(){return E},kw:function(){return f},at:function(){return m},bh:function(){return b},Dw:function(){return w},QS:function(){return y},c8:function(){return g},Zi:function(){return v},tN:function(){return x},wL:function(){return Z},tR:function(){return d},eJ:function(){return h},j1:function(){return Y},Yw:function(){return Q},YM:function(){return K},rC:function(){return ne},l9:function(){return $},Ob:function(){return J},XV:function(){return I},dl:function(){return p},YP:function(){return M},fQ:function(){return _}});var i,r=n(39752),o="@pressreader/navigation-core",a=n(22970),s=n(123),u=n(12286),c=n(90202),l="@pressreader/navigation-core/",d=(0,u.mq)("".concat(l,"route_change_began")),h=(0,u.mq)("".concat(l,"route_change_done")),p=(0,u.mq)("".concat(l,"update_nav_config")),f=(0,u.mq)("".concat(l,"nav_config_updated")),m=(0,u.mq)("".concat(l,"navigate_back")),g=(0,u.mq)("".concat(l,"navigate_to")),v=(0,u.mq)("".concat(l,"navigate_to_link")),y=(0,u.mq)("".concat(l,"navigate_home")),_=(0,u.mq)("".concat(l,"will_navigate")),b=(0,u.uK)("".concat(l,"navigate_began")),w=(0,u.uK)("".concat(l,"navigate_done")),C=(0,u.uK)("".concat(l,"navigate_failed")),I=(0,u.mq)("".concat(l,"location_update")),P=(0,u.mq)("".concat(l,"history_push")),x=(0,u.mq)("".concat(l,"history_replace")),S=(0,u.mq)("".concat(l,"history_replace_reload")),T=(0,u.mq)("".concat(l,"history_go")),k=(0,u.mq)("".concat(l,"history_back")),A=(0,u.mq)("".concat(l,"history_forward")),E=(0,u.mq)("".concat(l,"history_go_view")),Z=(0,u.mq)("".concat(l,"history_reset_state")),M=(0,u.mq)("".concat(l,"history_update_state")),D={handleRouting:!1,viewName:null,prevNavConfig:null,navConfigg:null===(n=t.payload.handleRouting)||void 0===n||n})})),(0,u.gX)(b,(function(e,t){return(0,a.pi)((0,a.pi)({},eed?i:(0,a.pi)(((0,a.pi)({},e),{viewName:t.payload.config.viewName})})),(0,u.gX)(f,(function(e,t){return(0,a.pi)((0,a.pi)({},e),{navConfig:(0,a.pi)({},t.payload.newNavConfig)})})),(0,u.gX)(I,(function(e,t){return(0,a.pi)((0,a.pi)({},e),{location:(0,a.pi)({},t.payload.location)})}))),N=n(50653),R=n(84198),V=n(12874),B=n(9830),F=n(13374);!function(e){e[e.Off=0]="Off",e[e.On=1]="Ourn[4,(0,R.RE)(U,e,t)];case 5:return r.sent(),[2]}}))}function U(e,t){var n,r,o;return(0,a.Jh)(this,(function(a){switch(a.label){case 0:return[4,(0,R.RE)(O.L.generateUrl,e)];case 1:return n=a.sent(),r=!1,n?(o=e.viewName,t===i.ForceOn&&(r=!0),t===i.On&&(r=o===(null===F.wX||void 0===F.wX?void 0:F.wX.getActiveViewName())),[4,(0,R.RE)(H,o,e,r,n.url)]):[2];case 2:return a.sent(),[2]}}))}function H(e,t,n,i){var r,o;return(0,a.Jh)(this,(function(s){switch(s.label){case 0:return r=(0,F.Qf)(e,t),o=(0,a.pi)({},r.stateParams),n?[4,(0,R.gz)(S({to:i,state:o}))]:[3,2];case 1:return s.sent(),[3,4];case 2:return[4,(0,R.gz)(P({to:i,state:o}))];case 3:s.sent(),s.label=4;case 4:return[2]}}))}var j=n(31258),W=n(15798),q=n(24458),G=n(25019),X=function(e){return e[o]},Y=(0,j.P1)(X,(functull),homeViewName:i}:{landingUrl:null,homeViewName:i}})),J=(0,j.P1)(X,(function(e){return e.viewName})),$=(0,j.P1)(X,(function(e){return e.prevNavConfig})),Q=(0,j.P1)(X,(function(e){return e.navConfig})),ee=(0,j.P1)(X,(function(e){return e.location})),te=(0,j.P{s(function(t){e(t)})),function(){return(0,c.ne)(e)}}))}function re(){var e,t,n;return(0,a.Jh)(this,(function(i){switch(i.label){case 0:return[4,(0,R.RE)(ie)];case 1:e=i.sent(),i.label=2;case 2:i.label=3;case 3:return i.trys.push([3,6,,7]),[4,(0,R.qn)(e)];case 4:return t=i.sent(),[4,(0,R.gz)(I(t))];case 5:return i.sent(),[3,7];case 6:return n=i.sent(),(0,B.v)(n),[3,7];case 7:return[3,2];case 8:return[2]}}))}function oe(e){var t,n,r,o,s,u,c,l=e.payload;return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return t=l.viewName,n=l.replace,r=l.isForceReplace,o=l.ignoreIssueInfo,s=(0,a.pi)((0,a.pi)({},l.params),{viewName:t}),o?[3,2]:[4,(0,R.Ys)(ne)];case 1:"currentIssueInfo"in(u=e.sent().state)&&(s.currentIssueInfo=u.currentIssueInfo),e.label=2;case 2:return[4,(0,R.gz)(Z())];case 3:return e.sent(),c=n?r?i.ForceOn:i.On:i.Off,[4,(0,R.RE)(z,s,c)];case 4:return e.sent(),[2]}}))}function ae(e){var t,n,i,r,o,s,u,c,l,d,h,p,f=e.payload;return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return t=f.params,n=f.url,i=f.reload,r=void 0!==i&&i,[4,(0,R.Ys)(ee)];case 1:return o=e.sent(),[4,(0,R.Ys)(ne)];case 2:return s=e.sent(),u=s.state,c=s.viewName,l=n||o.href,d=(null===F.wX||void 0===F.wX?void 0:F.wX.getActiveViewName())||c,h=d?(0,F.Qf)(d,t):{stateParams:{}},p=(0,a.pi)((0,a.pi)({},u),h.stateParams),r?[4,(0,R.gz)(S({to:l,state:p}))]:[3,4];case 3:return e.sent(),[3,6];case 4:return[4,(0,R.gz)(x({to:l,state:p}))];case 5:e.sent(),e.label=6;case 6:return[2]}}))}function se(){var e,t,n,i,r;return(0,a.Jh)(this,(function(o){switch(o.label){case 0:return(e=null===F.wX||void 0===F.wX?void 0:F.wX.getActiveView())?[3,2]:[4,(0,R.Ys)(ne)];case 1:t=o.sent().viewName,e=null===F.wX||void 0===F.wX?void 0:F.wX.findView(t),o.label=2;case 2:return e?(null===(i=e.resetState)||void 0===i||i.call(e),(n=null===(r=e.getResetParams)||void 0===r?void 0:r.call(e))?[4,(0,R.gz)(M({params:n}))]:[3,4]):[3,4];case 3:o.sent(),o.label=4;case 4:return[2]}}))}function ue(e){var t,n,i;return(0,a.Jh)(this,(function(r){switch(r.label){case 0:return t=e.payload,n=t.to,i=t.state,[4,(0,R.RE)(c.qA,n,i)];case 1:return r.sent(),[2]}}))}function ce(e){var t,n,i;return(0,a.Jh)(this,(function(r){switch(r.label){case 0:return t=e.payload,n=t.to,i=t.state,[4,(0,R.RE)(c.dA,t)];case 1:return n.sent(),[2]}}))}function he(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:rturn[4,(0,R.RE)(c.G1)];case 1:return e.sent(),[2]}}))}r.gk.addFeature(o,L,(function(){return(0,a.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,R.rM)(re)];case 1:return e.sent(),[4,(0,V.i)(E,oe)];case 2:return e.sent(),[4,(0,V.i)(Z,se)];case 3:return e.sent(),[4,(0,V.i)(M,ae)];case 4:return e.sent(),[4,(0,V.i)(P,ue)];case 5:return e.sent(),[4,(0,V.i)(x,ce)];case 6:return e.sent(),[4,(0,V.i)(S,le)];case 7:return e.sent(),[4,(0,V.i)(T,de)];case 8:return e.sent(),[4,(0,V.i)(k,he)];case 9:return e.sent(),[4,(0pers="ata),[t(),[",o="p))];case 1:return(0,e.sent().init)(),r=!0,[2]}}))}))}},85081:function(e,t,n){"use strict";n.d(t,{yy:function(){return l},Mw:function(){return S},bk:function(){return u},rf:function(){return b},P7:function(){return g},J:function(){return T}});var i=n(39752),r="@pressreader/popups-core",o=n(22970),a=n(12286),s=r+"/",u=(0,a.mq)("".concat(s,"popup_opened")),c=(0,a.mq)("".concat(s,"popup_options_changed")),l=(0,a.mq)("".concat(s,"close_popup")),d=(0,a.mq)("".concat(s,"popup_closed")),h=(0,a.Lq)({popups:[]},(0,a.gX)(u,(function(e,t){var n=t.payload;return(0,o.pi)((0,o.pi)({},e),{popups:(0,o.ev)((0,o.ev)([],e.popups,!0),[n.popup],!1)})})),(0,a.gX)(d,(function(e,t){var n=t.payload;return(0,o.pi)((0,o.pi)({},e),{popups:e.popups.filt!0);return r[i]=n,(0,o.pi)((0,o.pi)({},e),{popups:r})}))),p=n(31258),f=n(23546),m=function(e){return e[r]},g=(0,p.P1)(m,(function({return e.popups.find((function(e){return e.id===t}))})),_=(0,i.lN)("popupType"),b=((0,p.P1)(g,_,(function(e,t){return e.ft}))})),(0,p.P1)(g,(function(e){return e.filter(f.EZ)}))),w=n(84198),C=n(90853),I=n(9830),P=n(50084);function x(e){var t,n,i,r,a,s;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return t=e.payload,n=t.id,i=t.result,r=t.isBack,a=t.isCancelled,[4,(0,w.Ys)(y,{id:n})];case 1:return s=o.sent(),[4,(0,w.gz)(d({id:n,isCancelled:a,result:i}))];case 2:return o.sent(),!(null==s?void 0:s.parentId)||r?[3,4]:[4,(0,w.gz)(l({id:s.parentId,result:i,isCancelled:a}))];case 3:o.sent(),o.label=4;case 4:return[2]}}))}function S(e,t){var n,i,r,a,s,c,d;return(0,o.Jh)(this,(function(h){switch(h.label){case 0:return n=(0,P.Z)(),[4,(0,w.gz)(u({popup:(0,o.pi)((0,o.pi)({},e),{id:n})}))];case 1:if(h.sent(),!(null==t?void 0:t.onOpened))return[3,5];h.label=2;case 2:return h.trys.push([2,4,,5]),[4,(0,w.rM)(t.onOpened,n)];case 3:return i=h.sent(),[3,5];case 4:return r=h.sent(),(0,I.v)("Error running onOpened saga for ".concat(e.name,"."),r),[3,5];case 5:return[4,(0,C.K)(l,(function(e){return e.payload.id===n}))];case 6:if(s=h.sent(),a={popupId:n,cancelled:!0===s.payload.isCancelled,data:s.payload.result},c=!0,!(null==t?void 0:t.onClosing))return[3,10];h.label=7;case 7:return h.trys.push([7,9,,10]),[4,t.onClosing(a)];case 8:return c=!1!==h.sent(),[3,10];case 9:return d=h.sent(),(0,I.v)("Error running onClosing saga for ".concat(e.name),d),c=!1,[3,10];case 10:return c?[4,x(s)]:[3,12];case 11:return h.sent(),[3,13];case 12:return[3,5];case 13:return i?[4,(0,w.al)(i)]:[3,15];case 14:h.sent(),h.label=15;case 15:return[2,a]}}))}function T(e,t){var n;return(0,o.Jh)(this,(function(i){switch(i.label){case 0:return[4,(0,w.Ys)(y,{id:e})];case 1:return(n=i.sent())?[4,(0,w.gz)(c({popup:(0,o.pi)((0,o.pi)({},n),t)}))]:[2];case i},lP:function(){return r},ww:function(){return o}})},76568:function(e,t,n){"use strict";n.d(t,{Zy:function(){return P},Ts:function(){return h},gk:function(){return T},ob:function(){return c},vq:function(){return I},G3:function(){return S},rf:function(){return _},P7:function(){return v},CQ:function(){return x}});var i=n(39752),r="@pressreader/popups-legacy",o=n(22970),a=n(12286),s="@pressreader/popups-legacy/",u=(0,a.mq)("".concat(s,"open_dialog")),c=(0,a.mq)("".concat(s,"close_dialog_request")),l=(0,a.mq)("".concat(s,"dialog_close_done")),d=(0,a.mq)("".concat(s,"open_contextmenu")),h=(0,a.mq)("".concat(s,"close_contextmenu_request")),p=(0,a.mq)("".concat(s,"contextmenu_close_done")),f=(0,a.Lq)({popups:[]},(0,a.gX)(d,(function(e,t){var n=t.payload;return(0,o.pi)((0,o.pi)({},e),{popups:(0,o.ev)((0,o.ev)([],e.popups,!0),[n.menu],!1)})})),(0,a.gX)(p,(function(e,t){var n=t.payload;return(0,o.pi)((0,o.pi)({},e),{popups:e.popups.filtps:(0,o.ev)((0:e.popups.filter((function(e){return e.id!==n.id}))})}))),m=n(31258),g=n(6401),v=(0,m.P1)((function(e){returtuon(e,t){return en e.filter((function(e){return e.type===g.k.Dialog}))})),b=n(84198),w=n(90853),C=n(50084);function I(e){var t;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return t=(0,C.Z)(),[4,(0,b.gz)(d({menu:{type:g.k.ContextMenu,id:t,parentId:e.parentMenuId,name:e.name,context:e.context,position:e.position}}))];case 1:return n.sent(),[2,t]}}))}function P(e,t){var n;return(0,o.Jh)(this,(function(i){switch(i.label){case 0:return[4,(0,b.Ys)(y,e)];case 1:return(null==(n=i.sent())?void 0:n.type)!==g.k.ContextMenu?[2]:[4,(0,b.gz)(p({id:e,back:t.back}))];case 2:return i.sent(),t.back?[3,4]:n.parentId?[4,(0,b.gz)(h({id:n.parentId,cancelled:!0}))]:[3,4];case 3:i.sent(),i.label=4;case 4:return[2]}}))}function x(e){return(0,o.Jh)(this,(function(t){switch(t.label){case 0:return[4,(0,w.K)("".concat(h),(function(t){return t.payload.id===e}))];case 1:return[2,t.sent()]}}))}function S(e,t,n){var i;return void 0===n&&(n=!0),(0,o.Jh)(this,(function(r){switch(r.label){case 0:return i=(0,C.Z)(),[4,(0,b.gz)(u({dialog:{type:g.k.Dialog,id:i,name:e,context:t,supportNativeScroll:n}}))];case 1:return r.sent(),[2,i]}}))}function T(e){return(0,o.Jh)(this,(function(t){switch(t.label){case 0:return[4,(0,b.gz)(l({id:e}))];case 1:return t.sent(),[2]}}))}i.gk.addFeature(r,f)},6401:function(e,t,n){"use strict";var i;n.d(t,{k:function(){return i}}),function(e){e[e.ContextMenu=0]="nTop",e[e.ScreenBottom=14]="ScreenBottom"}(i||(i={}))},64484:function(e,t,n){"use strict";n.d(t,{SR:function(){return s},Iy:function(){return a},m5:function(){return o}});var i=n(12286),r="@pressreader/purchase/",o=(0,i.mq)("".concat(r,"purchase_done")),a=(0,i.mq)("".concat(r,"issue_purchase_request_done")),s=(0,i.mq)("".concat(r,"issue_purchase_request"))},88994:function(e,t,n){"use strict";n.d(t,{g:function(){return I}});var i=n(43188),r=n(66204),o=n(28007),a=n(86338),s=n(40059),u=nndex:-1,className:t.join(" "),children:e.children})})}));h.displayName="FormComboBoxItem";var p=n(62954),f=n(31258),m=n(65441),g=(0,f.P1)((function(e){return e[m.o]}),(function(e){return e.results})),v=(0,r.createContext)(null),y=n(61275),_=n(97186),b=(0,r.createContext)({result:null}),w=function(e){var t=(0rn(0,r.useEffect)((function(){null==t||t.reposition()}),[t,n]),Object.keys(n).map((function(e){var t=n[e],o=(0,_.jD)(e);if(!o||!(null==t?void 0:t.data))return null;var a=o.component;return(0,i.jsx)(b.Provider,{value:{result:t},children:(0,i.jsx)(r.Suspense,{fall)("div",{className:"title",children:e.title})})})})})},I=function(e){var t=e.onCv9)(a.o),l=(0,r.useCallbackt]),d=(0,r.useCallback)((funcion(){n((0,s.a8)({query:window.location.search})),l()}),[n,l]),m=(0,o.v9)(g),y=(0,r.useMemo)((function(){return{close:d,itemAs:h}}),[d]);return(0,i.jsxs)(v.Provider,{value:y,children:[(0,i.jsx)(w,{results:m}),!1,c&&(0,i.jsx)(C,{onClick:f,title:ader/qarch")),g=(0,i.mq)("".concat(o,"navigate_to_search"))},97186:function(e,t,n){"use strict";n.d(t,{Ec:fon(t){outEffect)((function(){t.current?e():t.current=!0}))}},63257:function(e,t,n){"use strict";n.d(t,{P:function(){return s}});var i=n(66204),r=n(88736),o=n(15608),a=n(62545);function s(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var s=(0,i.useRef)(null),u=(0,i.useRef)(),c=(0,i.useRef)(null),l=(t.length?t.map((function(e){return e.current})):[s.current]).filter(a.C_);if((0,i.useEffect)((function(){var t;o(l,c.current)||(c.current=l,l.length?u.current?u.current.updateContainerElements(l):(u.current=(0,r.v)(l,e)).activate():(null===(t=u.current)||void 0===t|urrent)||void 0===e||e.deactivate(),u.current=vot:_,ton(e){r r(e,tmoveEvunction(e){return e+1})))}),[a,n]);return[a.value,s]}},51466:function(e,t,n){"use strict";n.d(t,{Nf:function(){return b},Z:function(){return f},Zv:function(){return P},gm:function(){return m},qB:function(){return w},sw:function(){return C},uE:function(){return y},vc:function(){return I},xi:function(){return g},zt:function(){return v}});var i=n(22970),r=n(59995),o=n(2520),a=n(19237),s=n(66353),u=n(76367),c="v7.Client.DateFormat.Issue",l="v7.Client.DateFor?s.WUo=ion(e,n)r;var o=e[n];return o?(r=(0,s.Px)(o),t.set(n,r),r):i}}));function b(e){var t=_(e);return function(e){var n=u.nm[e];return t("Calendar.".concat(n),n)}}function w(e){var t=_(e);return function(e){var n=u.Y7[e];return t("Calendar.".concat(n),n)}}function C(e){var t=_(e);return function(e){var n=u.jc[e];return t("Calendar.".concat(n),n)}}function I(e){var t=_(e);return functin(e){vafunctiizedD.d(t,{L:function(){return r},j:function(){return i}})},61438:function(e,t,n){"use strict";n.d(t,{sz:function(){return c},sG:function(){return d},My:function(){return h},pF:function(){return _.pF},mW:function(){return _.mW}});var i=n(39752),r=n(17645),o=n(22970),a=n(43751),s=n(12286),u="@pressreader/resources/",c=(0,s.mq)("".concat(u,"load_resources")),l=(0,s.mq)("".concat(u,"resources_load_began")),d=(0,s.mq)("".concat(u,"resources_load_done")),h=(0,s.mq)("".concat(u,"resources_load_failed")),p=(0,s.mq)("".concat(u,"resources_changed")),f={resources:{},templates:{},status:a.o.None},m=(0,s.Lq)(f,(0,s.gX)(l,(function(e){return(0,o.purces,templatee){return(0,o.pi)((0,o.pi)({},e),{status:a.o.Failed})}))),g=n(84198),v=n(72001),y=n(9097),_=n(296);function b(){var e,t,n,i,r;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return[4,(0,g.Ys)(_.mW)];case 1:return o.sent()===a.o.Pending?[2]:[4,(0,g.gz)(l())];case 2:return o.sent(),y.j?[3,4]:[4,(0,g.gz)(h())];case 3:return o.sent(),[2];case 4:return o.trys.push([4,8,,10]),[4,(0,g.RE)(y.j),v.M)(e.resources,(function(e,n){t[n.toLowerCase()]=e})),n={},e.templates)r=e.templates[i],i&&r&&(n[i]={name:i,fnBody:r});return[4,(0,g.gz)(d({resources:t,templates:n}))];case 6:return o.sent(),[4,(0,g.gz)(p())];case 7:case 9:return o.sent(),[3,10];case 8:return o.sent(),[4,(0,g.eturn[4,(0,g.ib)(c,b)];case 1:return e.sent(),[2]}}))}))},296:function(e,t,n){"use strict";n.d(t,{mW:function(){return c},pF:function(){return l},sQ:function(){retur58),o=n(66353),a=n(17645);function s(e){return e[a.H]}var u=(0,r.P1)(s,(function(e){return e.resources})),c=((0,r.P1)(s,(function(e){return e.templates})),(0,th?o.WU.apply(void 0,(0,i.ev)([a],n,!1)):null!=a?a:t}}))},55993:function(e,t,n){"use strict";n.d(t,{CL:function(){return w},Cr:function(){return f},Fp:function(){return b},J5:function(){return m},Rn:function(){return p},VX:function(){return v},c6:function(){return g},p6:function(){return y},rO:function(){return _}});var i=n(22970),r=n(2520),o=n(39752),a=n(43751),s=n(76367),u=n(296),c=n(51466),l=n(61438),d={MMM:_,MMMM:function(e){var t=(0,o.Ys)(u.sQ);return(0,c.qB)(t)(e)},ddd:function(e){var t=(0,o.Ys)(u.sQ);return(0,c.vc)(t)(e)},dddd:function(e){var t=(0,o.Ys)(u.sQ);retursQ);return(0,c.Z)(r).apply(void 0,(0,i.ev)([e],t,!1))}function f(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var a=(0,o.Ys)(u.sQ;return(0,c.xi)(a).apply(void 0,(0,i.ev)([e,t],n,!1))}functeturn(0,c.uE)(n)(e,t)}function y(e,t){return h(t)(e)}ft(new nabled.isValid),c=(new s(r.Gj.isValid),new s(r.Sg.isValid))},6430:function(e,t,n){"use strict";n.d(t,{s:function(){return a}});var i=n(22970),r=/^\w{4}$/,o=n(7498),a=new(function(e){function tr n=t[e];return function(e){return null!=e&&r.test(e)}(n)?(0,o.n9)(n):Promise.reject("CID doesnt match pattern")}),"CID cant be resolncat(t4651).v)(/^\d{8}$/,"Issue date doesnt match pattern")},80511:function(e,t,n){"use strict";n.d(t,{n:function(){return s}});var i=n(22970)eject(a):(0,r expect(n[e])}),n)||this}return(0,i.ZT)(t,e),t}(n(24225).M)},7498:function(e,t,n){"use strict";n.d(t,{hJ:function(){return w},n9:function(){return y},M$:function(){return _},mm:function(){return b}});var i=n(22970),r=n(9830),o=n(16842),a=n(66353),s=n(1753),u="catalog/v1/routes"tion h(e,t,n){return{.v)(l),l;case 3:return[2,Promise.reject(null)]}}))}))}function y(e){var t=p[e];if(void 0!==t)return(0,o.y)(t)?t:Promise.resolve(h.apply(void 0,(0,ieturne)&&"function"==typeof t.matchAsync?e:new o(e);var t}},60581:function(e,t,n){"use strict";n.d(t,{L:function(){return P}});var i=n(22970),r=n(14484),o=n(5152),a=n(32249),s=n(98689),u=n(11217),c=n(96368),l=n(82856),d=n(97994),h=n(3234),p=n(86231),f=n(29495),m=n(242conc)||!c'")); '".concat(e,"'"));return y.test(e)?new b(e):new w(e)},I=function(){function e(e,t,n,r,o,l){var d=this;if(void 0===n&&(n={}),void 0===r&&(r={}),void 0===o&&(o=a.B9),void 0===l&&(l=!1),!s(t))throw new Error("Route template must be a string");var p=(0,i.CR)((0,a.Bw)(t,a.vi),2),g=p[0],v=p[1];if(this.otherDefaults=(0,a.Ny)(n,!0),this.params=function(e,t){var n=[];if(c(e)||e===a.XV)return n;var i,r,o=(i=e,r=a.XV,(0,a.IW)(i,r).split(r));return o.pop(),o.reduce((function(e,n){var i=e.parsed,r=e.hasOptional,o=C(n);if(o.defaultValue=(0,a.wU)(t,o.name),r&&!o.optional)throw new Error("Optional parameter cannot be followed by required parameter");return r=r||o.optional,i.push(o),{parsed:i,hasOptional:r}}),{parsed:n,hasOptional:!1}),n}(g,this.otherDefaults),this.query=function(e,t){if(u(e,a.aH))throw new Error("Route template '".concat(e,"' is malformed: invalid query"));return c(e)?[]:e.split(a.aH).map((function(e){var n=C(e);if(n.fragmentary)throw new Error("Suffixes or prefixes are not allowed in query string parameters. Parsing ".concat(e));return n.defaultValue=(0,a.wU)(t,n.name),n}))}(v,this.othturn f(d.query,(function(t){return t.name===e.name}))})))throw new Error("Route template '".concat(t,"' turn c(t)&&(t="/?"),new RegExp("^".concat(t,"$"),"i")}(this.params),this.constraints=h(r,m.q),this.execCallback=o,this.name=e}reotype,"hasQuery",{get:function(){return!c(this.query)},enum1:return b.sent(),[2,{rocatch(e){return[2,Prction(e){return Promise.resol,n){return t.matchAsync(n,e)}));return Promise.all(t)},e}(),P=function(){var e=this,t=[],n=function(e){var i=void 0===e?{}:e,r=i.name,o=i.template,a=i.looseQuery,s=i.defaults,u=i.constraints,c=i.executeWith;ret,[4,l.execute(h)];case 2:return[2,p.sent()||h]}}))}))};returJh)(this,(fu:throw c=i.sent(),(0,a.bM)(c);case 3:return[2]}}))}))}}}()},32249:function(e,t,n){"use strict";n.d(t,{B9:function(){return v},Bw:function(){return w},GD:function(){return L},Gp:function(){return R},IW:function(){return b},Jz:function(){return Z},Ny:function(){return _},XV:function(){return p},Xg:function(){return V},Xr:function(){return A},_d:function(){return S},aH:function(){return m},bM:function(){return y},bv:function(){return k},cM:function(){return T},co:function(){return P},mB:function(){return C},tB:function(){return N},ts:function(){return E},uW:function(){return M},vi:function(){return f},wU:function(){return h}});var i=n(22970),r=n(11217),o=n(21663),a=n(98689t){void 0===e&&(e={});var nit(g,2),2),r=n[0],o=n[1];returneplace(I,(function(e){recument.location.pathname.replace(k(),"").length}vce),e}function(){return i}});var i="@pressreader.search.core",r=110,o=30},94908:function(e,t,n){"use strict";n.d(t,{f:function(){return h},q:funct;return t?(t.endsWith("/")||(t+="||"",c.Wc))&&void 0!==r?r:"",subtitle:(0,l.Lj)(t,n,e.categories)}}function h(e){var t={};return e&&e.items.forEach((function(n){t[n.id]=function(e,t){var n;return e===r.WD.Countries?n=s("flags/32/".concat(t.iso,".png")):e===r.WD.Categories&&(n=(0,o.oY)(t.titlePublicationCid,c.Wc)),{id:t.id,iso:t.iso,imageUrl:null!=n?n:vedSearntries=d);var h=n.get("categories");return h&&(i.categories=h),i}},76238:function(e,t,n){"use strict";n.d(t,{g:function(){return r},o:function(){return i}});var i="@pressreader.pportNtion_changed")),c=(0,i.mq)("".concat(o,"set_initial_selections"))},1483:function(e,t,n){"use strict";n.d(t,{V:function(){return r},o:function(){return i}});var i="@pressreader.searchitcherchanged")),g=(0,i.mq)("".concat(o,"reset_all_selections_action"))},77004:function(e,t,n){"use strict";n.r(t),n.d(t,{authorized:function(){return D},bearerToken:function(){return R},bind:function(){return V},monitorCookies:function(){return T},offline:function(){return Z},online:function(){return k},reset:function(){return M},token:function(){return L},unbind:function(){return B},updateToken:function(){return H},userKey:function(){return N}});va(e){try{return JSON.parse(atob(e.split(".")[1]))}catch(e){return}}var l,d=n(49418),h={},p=null,f=null,m=null,g=null,v=new o.x,y=!1,_=null,b="",w=!1,C="",I={get value(){return wpreload=e}},P=(0,a.z)(v),x=!0;function S(){x||(x=!0,P=(0,a.z)(v))}function T(){U(),l||(l=s.Zi(U,6e4))}function k(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!arguments.length)return y;v),(0,d.LP)(n,u.get("lng")).then(E,A)}function A(e){S(),v.error(e)}function E(e){var t=c(e.BearerToken);delete t.ab,delete t.exp;var n=r(t),i=p!==e.Token||f!==e.UserKey||m!==e.BearerToken;p=e.Token,f=e.UserKey,m=e.BearerToken,S(),y||(y=!0,F("online")),i&&(function(e,t){var n;g&&window.clearTimeout(g);var i=1e3*(null!==(n=c(e))&&void 0!==n?n:{exp:Math.round(Date.now()/1e3)+t}).exp-Date.now()-6e4;g=window.setTimeout(H,i)}(e.BearerToken,e.ExpiresIn),C!==n&&(C=n,F("tokenUpdated")!1,M()),F("offline"),window}function M(){p=null,_=null,b=null,S()}function D(){return P(t).unsubscribe;n.subscriptions.push({callback:t,unsubscribe:i})}}function B(e,t){var n=h[e];if(n){var i=n.subscriptions.findIndex((function(e){return e.callback===t}));i<ptions.splice(i,1))}}function F(e){var t=h[e];t&&t.subject.next()}function O(){var e;return(0,i.mG)(this,void 0,void 0,(function(){var t,n;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return t=!0,(w||z(!0).length||(null===(e=I.value)||void 0===e?void 0:e.confirmed))&&(t=!1),w=!0,t?[4,(0,d.LK)({url:"".concat(window.basePath,"Authentication/ConfirmCookies"),cache:"no-store"})]:[3,2];case 1:return(null==(n=i.sent())?void 0:n.BearerToken)?[2,(0,d.LK)({url:"".concat(window.serviceUrl,"preload"),headers:{Authorization:"Bearer ".concat(n.BearerToken)},cache:"no-store"})]:[2,null];case 2:return[2,void 0]}}))}))}function z(e){void 0===e&&(e=!1);var t=[];return u.has("PDAuth")&&t.push(u.get("PDAuth")),u.has("PDPAuth")&&t.push(u.get("PDPAuth")),u.has("Profile")&&t.push(u.get("Profile")),!e&&u.has("AProfile")&&t.push(u.get("AProfile")),t}function U(){return(0,i.mG)(this,void 0,void 0,(function(){var e,t,n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:if(e=document.cookie,b===e)return[2];if(t=z(),(n=t.join(";"))===_)return b=e,[2];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,O()];case 2:return r=i.sent(),[3,4];case 3:return i.sent(),[3,4];case 4:return e=document.cookie,t=z(),(n=t.join(";"))===_?(b=e,[2]):(t.length?k(t,r):Z(),_=n,b=e,[2])}}))}))}function H(){return(0,i.mG)(this,void 0,void 0,(function(){var e,t;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:e=p,S(),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(0,d.jM)(e)];case 2:return E(n.sent()),[3,4];case 3:throw t=n.sent(),M(),t;case 4:return[2]}}))}))}onseTnew(n(sent(t]=arg)}func Date(e.createdDate),id:e.id}}))}}n.d(t,{I:function(){return i}})},4629:function(e,t,n){"use strict";var i;n.d(t,{y:function(){return i}}),function(e){e[e.System=1]="Syst"NoVoteturn r.sent(),[3,8];case 8:return[2,[]]}}))}i.gk.addFeature(r,g)},10955:function(e,t,n){"use strict";n.d(t,{bX:function(){return I},Ok:function(){return C},HG:function(){return x},lh:function(){return S},fi:function(){return P},Sb:function(){return m},AY:function(){return c},W5:function(){return l},Dz:function(){return p},xx:function(){return f},t0:function(){return h},XS:function(){return g},C3:function(){return d}});var i=n(39752),r="@pressreader/sponsorship-core",o=n(22970),a=n(43751),s=n(12286),u=n(95430),c=(0,s.mq)("".concat(r,"/load_hotspot_info")),l=(0,s.mq)("".concat(r,"/load_hotspot_info_cancelled")),d=(0,s.mq)("".concat(r,"/toggle_hotspot")),h=(0,s.mq)("".concat(r,"/open_hotspot")),p=(0,s.mq)("".concat(r,"/load_hotspot_info_done")),f=(0,s.mq)("".concat(r,"/load_hotspot_info_failed")),m=(0,s.mq)("".concat(r,"/hotspot_info_changed")),g=(0,s.mq)("".concat(r,"/sponsorship_changed")),v={loading:a.o.None,statue),{loading:a.o.None,status:null,sponsor:null,hotspotEnabled:!1})})),(0,s.gX)(p,(function(e,t){var n=t.payload,i=n.enabled,r=n.status,s=n.sponsor;return(0,o.pi)((0,o.pi)({},e),{loading:a.o.Done,status:r,sponsor:s,hotspotEnabled:i})})),(0,s.gX)(f,(function(e){pi)({},e),{loaurn(0,o.pi)((0,o.pi)({},e),{status:a,sponsor:r,hotspotEnabled:i})}))),_=n(31258),b=n(50908),w=function(e){return e[r]},C=(0,_.P1)(w,(function(e){return e.loading})),I=(0,_.P1)(w,(function(e){return e.hotspotEnabled})),P=(0,_.P1)(w,(function(e){return e.status}onsor})),S=(0,_.P1)([P,x],(fun=2]="OF="appz"},{pect.se{e[e.Fthis;r r=(0,turn e=3]="Cd,chilsx)("abutton",(0,i.pi)({ref:t},a))})));a.displayName="AccessibleButton"},26053:function(e,t,n){"use strict";n.d(t,{g:function(){return f}});var i=n(43188),r=n(66204),o=n(9802),a=n(37278),s=n(41833);function u(e){return e.type=e){var t=e.toString();return"0".repeat(4-t.length)+t})).join("")}function h(e,t,n){for(var i=null,r=0,o=e;r<o.length;r++){var a=o[r];if(!c(a))if(l(a)){if(!a.ref.current||t&&a.tag!==t)continue;var s=d(a.ref.current);if(n&&s<n)continue;if(i&&i[1]<s)continue;i=[a,s]}else if(u(at=e.tabIndex;(nult,n]);return(0,i.jsx)(o.B.Provider,{value:u["ariat")&&(ffect{addItem:r,removeItem:r,goNext:r,skip:r},a=(0,i.createContext)(o)},37278:function(e,t,n){"use strict";var i;n.d(t,{q:function(){return i}}),function(e){e[e.SkipLink=0]="SkipLink",e[e.SkipLinkTarget=1]="SkipLinkTargeuslySetInnerHTML:e.dangerouslySetInnerHTML,children:e.children})}},8596:function(e,t,n){"use strict";n.d(t,{A:function(){return r},o:function(){return i}});var i="@pressreader/ui-common",r=.7},38876:function(e,t,n){"use strict";n.d(t,{O$:function(){return d},Ko:function(){return u},R3:function(){return k},Dk:function(){return P},k1:function(){return T},xY:function(){return I},rO:function(){return S},vd:function(){return x},nf:function(){return l}});var i=n(39752),r=n(22970),o=n(12286),a=n(53155),s="ui/common/",u=(0,o.mq)("".concat(s,"screen_resized")),c=(0,o.mq)("".concat(s,"screen_changed")),l=(0,o.mq)("".concat(s,"topbar_height_changed")),d=(0,o.mq)("".concat(s,"notify_screen_reader")),h=(0,o.mq)("".concat(s,"screen_reader_notified")rn(0,r.pi)((0,tion)||void 0===n?void 0:n.id)||0)+1,message:t.payload.message}})}))),m=n(84198),g=n(15608),v=n(31258),y=n(25438),_=n(4371),b=n(8596),w=n(15798),C=function(e){return urn y.U.mobile?e.screenType<=_.W.Small?"phone":"tablet":"desktop"})),x=(0,v.P1)(I,(function(e){return e.screenType})),S=(0,v.P1)(I,(function(e){return e.orientation})),T(fght-n};return(0,r.pi)((0,r.pi)({},i),{headerHeight:n,viewport:o})}function E(e,t){return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return g(e,t)?[3,2]:[4,(0,m.gz)(c({prevScreen:e,screen:t}))];case 1:n.sent(),n.label=2;case 2:return[2]}}))}function Z(){var e,t;return(0,r.Jh)(this,(function(n){switch(n.label){case 0:return[4,(0,m.Ys)(I)];case 1:return e=n.sent(),t=A(e),[4,E(e,t)];case 2:return n.sent(),[2]}}))}function M(e){var t,n,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return t=e.payload.topbarHeight,[4,(0,m.Ys)(I)];case 1:return n=r.sent(),i=A(n,{newHeaderHeight:t}),[4,E(n,i)];case 2:return r.sent(),[2]}}))}function D(e){return(0,r.Jh)(this,(function(t){switch(t.label){case 0:return[4,(0,m.gz)(h({message:e.payload.message}))];case 1:return t.sent(),[2]}}))}i.gk.addFeature(b.o,f,(function(){return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,m.ib)(u,Z)];case 1:return e.sent(),[4,(0,m.ib)(l,M)];case 2:return ="Medium",e[e.Large=3]="Large",e[e.XLarge=4]="XLarge"}(r||(r={}))},53155:function(e,t,n){"use strict";n.d(t,{Pb:function(){return d},Wd:function(){return s},fq:function(){return l},hu:function(){return c},tF:function(){return u},wr:funn=r i=function(e){return e.stopPropagation(),e.preventDefault(),!1}},82653:function(e,t,n){"use strict";n.d(t,{Pr:function(){return g},gj:function(){return v},rB:function(){return f},sy:function(){return m}});var i=n(22970),r=n(43245),o=n(28924),a=n(22509),s=n(79542),u=n(40180),c=50,l=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChaFullscreenElement||p.mozFullScreenElement||p.msFullscreenElement)}function m(e){var t,n,r,o;return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(i){if(!e)throw new TypeError("`element` is expected to be a DOM element");return[2,(null===(t=e.requestFullscreen)||void 0===t?void 0:t.call(e))||(null===(n=e.msRequestFullscreen)||void 0===n?void 0:n.call(e))||(null===(r=e.webkitRequestFullscreen)||void 0===r?void 0:r.call(e))||(null===(o=e.mozRequestFullScreen)||void 0===o?void 0:o.call(e))]}))}))}function g(){var e,t,n,r;return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(i){return[2,(null===(e=p.exitFullscreen)||void 0===e?void 0:e.call(p))||(null===(t=p.msExitFullscreen)||void 0===t?void 0:t.call(p))||(null===(n=p.mozCancelFullScreen)||void 0===n?void 0:n.call(p))||(null===(r=p.webkitExitFullscreen)||void 0===r?void 0:r.call(p))]}))}))}function v(e(e){return(0,r.R)(document,e).pipe((0,a.U)((function(){return f()})))}));return(0,u.isElement)(e)&&(t.push((0,r.R)(e,d).pipe((0,a.U)((function(){return!0})))),t.push((0,r.R)(e,h).pipe((0,a.U)((func.lengtn.d(t,v",{clsx)("se:T,ch.d(t,{ar-rig-labelsName:ldren:registered.'));i[e]=t},unregister:function(e){i[e]&&delete i[e]}}},38800:function(e,t,n){"use strict";var i;n.d(t,{m:function(){return i}}),function(e){e[e.Auto=0]="Auto",e[e.Left=1]="Left",e[e.Right=2]="Right"}(i||(i={}))},12098:function(e,t,n){"use strict";n.d(t,{Ox:function(){return l},hP:function(){return d},lo:function(){return c}});var i=n(22970),r=n(43188),o=npddate;return(0,s.g)(t),(0,r.jsx)(r.Fragment,{children:e.children})};function d(){var e=(0,o.useContext)(u).onUpdate;(0,s.g)(e)}},94766:function(e,t,n){"use strict";n.d(t,{j:function(){return c}});var i=n(43188),r=n(66204),o=n(43541),a=n(97489),s={};function u(e){var t=new o.Z(e);if(!t.hasQueryParam("scale"))return{path:e,scale:null};var n=Number.parseInt(t.getQueryParamValue("scale"),10);reg",{srco.j,{s:u,onMe,chilck:e.oecked,Pervas-conteine10"dren:elledbturn"tputDirfunctin:[n,(childrdren:(jsx)(m(n))}};return(0,r.jsx)(s.Provider,{value:c,children:e.children})}},85297:function(e,t,n){"use strict";n.d(t,{c:function(){return I}});var i=n(22970),r=n(43188),o=n(66204),a=n(96368),s=n(15608),u=n(93331),c=n(19237),l=n(17790),d=n(92085),h=n(92270),p=n(17550),f=n(49989),m=n(81268),g=n(50084),v=n(98689),y=n(55993),_=/^((([a-z]|\d|[!#$%&'*+\-/=?^_`{|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#$%&'*+\-/=?^_`{|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,b=n(94516),w={};var C=n(95493),I=function(e){function t(t){var n=e.call(this,t)||this;n.valueSubject=new c.x,n.validatorsSubject=new c.x,n.id=(0,g.Z)(),n.state={isValid:null,validationMessage:null};var i=n.valueSubject.pipe((0,d.M)(n.validatorsSubject),(0,h.x)(),(0,p.w)f.b)((functe(t,n.props.fieldLabel))})),(0,m.P)((function(e){returnsage||n.setState({isValid:e.isValid,validationMessage:ototype.componentDidMount=functconcat(this.id),this.state.isValiontext.unregister(this.props.fieldName||"field-".concat(this.id))},t.prototype.render=function(){if(this.canShowMessage()){var e=this.props.children;if(e){if(u(e))return e({isValid:this.state.isValid,validationMessage:this.state.validationMessage});if(!this.state.isValid)return e}if(!a(this.state.validationMessage))return(0,r.jsx)("span",{className:this.props.className||"validation-msg",children:this.state.validationMessage})}return null},t.prototype.refreshValidation=function(e){if(!e||!s(e.validators,this.props.validators)){var t=(this.props.validators||[]).map((function(e){return u(e)?e:function(e){if(v(e)&&(e={name:e}),"required"===e.name){var t=e.name+(e.message||"");return w[t,y.Rn)("Dialogs.Validators.Required.WithField",t):n}:{isValid:!0}}))}var n;return"email"===e.name?(t=e.name+(e.message||""),w[t]||(w[t]=function(e){return e=e||(0,y.Rn)("Dialogs.Validators.EmailList","Please specify a list of valid EMail addresses separated by space, comma or semicolon."),function(t){if(!t)return null;var n=!0;return t.split(/[\s;,]+/).forEach((function(e){n=n&&_.test(e.trim())})),{isValid:n,message:e}}}(e.message))):"minid:!1,message:t}:n.length>=e?{isValid:!0}:{isValid:!1,message:t}}}(e.minLength,e.message))):"equalTo"===e.name?(0,b.Z)(e.requiredValue,e.messa=n||""===n.trim()||e.test(n)?{isValid:!0}:{isValid:!1,message:t}}}(e.regex,e.message))):void 0}(e)}));this.validatorsSubject.next(t)}thon(){return this.props.showMessageAlways||thiValideturn[2,t]}}))}))}function a(e){return(0,r.t8)("FeedSettings",e)}},60811:function(e,t,n){"use strict";n.d(t,{U2:function(){return y},Tc:function(){return _},ri:function(){return m},rh:function(){return f},mc:function(){return g},t8:function(){return v}});var i,r=n(22970)Jhttings/merge",JSON.stringify(e),{contentType:"application/json"})},p=new o.x,f=p.asObservablen i||(i=d()).then((function(){p.next()}),u),i}function g(){i=null}function v(e,t){return(0,r.mG)(this,void 0,void 0,(function(){var n,i;return(0,r.Jh)(this,(function(r){switch(r.label){case 0:return[4,m()];case 1:return(n=r.sent())?n.UserSettings||(n.UserSettings={}):n={DefaultLocales:null,FollowingUsers:[],MyNewspapers:[],UserSettings:{}},n.UserSettings[e]!==t&&s(n.UserSettings[e],t)?[2]:(n.UserSettings[e]=t,(i={})[e]=t,[4,h(i)]);case 2:rurn e=n.sent(),t=null==e?void 0:e.DefaultLocales,[2,a(t)]}}))}))}c.bind("tokenUpdated",g)},97334:function(e,t,n){"use strict";n.r(t),n.d(t,{get:function(){return c},onSettingsChanged:function(){return l},set:function(){return u}});var i=n(15608),r=n(70709),o=n(19237),a=n(50109),s={};function u(e,t){var n,o=a.Z.get(e);return i(o,t)||(a.Z.set(e,t),null===(n=s[e])||void 0===n||n.next(t)),r(t)}n:t}fun(var tfunction(e){return e})).join(" ")}n.d(t,{f:function(){return i}})},8270:function(e,t,n){"use strict";n.r(t),n.d(t,{DefaultCookieOptions:function(){return l},SameSiteOptions:function(){return i},get:function(){return a},has:function(){return c},remove:funct s(e,"",{expiresInDays:-1}),t}function c(e){return null!==a(e)}!function(e){e.Lax="Lax",e.Strict="Strict",e.None="None"}(i||(i={}));var l={secure:/parseI date"layBootanceor r=i[.call(t,e)}n.d(t,{k:function(){return r},n:function(){return i}})},97033:function(e,t,n){"use strict";n.d(t,{S:function(){return o}});var i=n(43541),r=n(72001);function o(e,t,n){var o=new i.cat(t)),n&&(0,r.M)(n,(function(e,t){null!=e&&o.addQueryParam(t,e)})),o.toString()}},87453:function(e,t,n){"use strict";n.d(t,{BG:function(){return s},Jj:function(){return c},QU:function(){return u},W1:function(){return a},_V:function(){return o},vl:function(){return l}});var i=n(62980),r=n(37911),o=function(e){return e>=i.D[0]&&e<=i.D[9]||e>=i.D.num0&&e<=i.D.num9},a=function(e){return e>64&&e<91||e>96&&e<123},s=function(e){return e<=i.D.delete&&e!==i.D.space},u=,i.D.v].indexOf(e)>=0},c=function(e){return e>=i.D.f1&&e<=i.D.f12};function l(e,t){return e===i.D.delete?r.a.Delete:e===i.D.backspace?r.a.Backspace:e===i.D..Cut=3cket:2n){"us","ks","ku","ps","ur","yi"];function r(e){return i.indexOf(e)>=0}},26783:function(e,t,n){"use strict";n.d(t,{B:function(){return o}});var i=n(22970),r={};function o(e,t){try{(null==e?void 0:e.startsWith("//"))&&(e="".concat(document.location.protocol).concat(e)),new URL(e)}catch(e){return Promise.reject(e)}var n=(0,i.pi)({async:!0},t);return r[e]||(r[e]=new Prom=document.createElement("script");r.onload=function(){return t(r)},r.onerror=function(t){return i(new URIError("The script ".concat(ly. ").concat(t)))},Object.keys(n).forEach((function(e){r[e]=n[e]})),document.body.appendChild(r),r.src=e}))),r[e]}},70803:function(e,t,n){"use strictclientWidth||document.body.clientWidth,height:window.innerH)returh<=t)rt];l[io(e[n]));return t}return e}},45457:function(e,t,n){"use strict";n.d(t,{E8:function(){return p},Zi:function(){return f},pn:function(){return l}});var i=n(19237),r=n(99239),o=n(28924),a=n(17790),s=n(74738),u=function(){for(var e="",t=0,n=s.p;t<n.length;t++){var i=n[t].fun;if((e=i?i+"Hidden":"hidden")in document)return e}return null}();function cfunction l(){return!c()}var d=new i.x;if(u){var h=en/,""),"visibilitychange");document.addEventListener(h,(function(){c()||d.next()}))}function p(){return c()&&u?(0,r.z)(d):Promise.resolve()}function f(e,t,n){void 0===n&&(n=0);var r=Date.now();n&&(r-=t-n);var s=Math.min(t,100),u=new i.x,l=0;function h(e){l&&clearTimeout(l),l=window.setTimeout((function()in(i,t);var i=n(43188),r=n(28007),o=n(38876),a=n(22970),s=n(66204),u=n(15798),c=n(98848),l=n(23820),d=n(85475),h=n(32249),p=function(e){var t,n,p,f;t=(0,r.v9)(u.MX),n=t(d.HE,!1),p=t(d.D3,[]),f=t(d.LU,"").split(","),(0,s.useEffect)((function(){if(n){var e=(0,h.Jz)().split(h.XV).filter((function(e){return""!==e}));if(e.length>0){var t=e[0].toLowerCase();p.find((function(e){return e.id===t}))&&e.shift()}var i=e.length>0?e[0]:"/";if(!(f.indexOf(i)<0))return p.forEach((function(t){var n;if((null===(n=t.hrefLangs)||void 0===n?void 0:n.length)>0){var i=(0,a.ev)([],e,!0);t.slug&&i.unshift(t.slug);var r="".concat(window.location.origin).concat((0,h.bv)()).concat(i.join(h.XV));t.hrefLangs.forEach((function(e){var t=document.createElement("link");t.rel="alternate",t.href=r,t.hreflang=e,document.head.appendChild(t)}))}})),function(){var e=document.head.getElementsByTagName("link");c(l(e,(function(e){return"alternate"===e.rel})),(function(e){return document.head.removeChild(e)}))}}}),[p,n,f]);var m=(0,r.v9)(o.xY).availHeight,g=["app-paneName&&g.push(e.className),(0,i.jsx)("div",{className:g.join(" "),style:{minHeight:m},children:e.children})}},7050:function(e,t,,e.SignInLibrary="signin-library",e.SignUpEmail="signup-email",e.ForgotPwd="forgot-pwd"}(i||(i={}));var l=n(90913),d=n(24458),h=n(50239),p=n(69896),f=n(25019),m=n(78662),g=n(91228),v=n(96425),y=n(24852),_=n(52316),b=function(){var e=(0,a.I0)(),t=(0,p.Y)().localizedString,n=(0,a.v9)(c.dy),i=(0,a.v9)(u.zT)===f.c.Pervasive;return(0,r.jsxs)(r.Fragment,{children:[!i&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.Z,{icon:"pri pri-compose",text:t("ToolbarTop.NewPost"),onClick:function(){e((0,l.c8)({viewName:d.n3.Post}))}}),(0,r.jsx)(y.Z,{icon:function(){return(0,r.jsx)(_.c,{user:n,size:s.wC.medium})},text:t("Menu.Account.MyProfile"),onClick:function(){e((0,l.c8)({viewName:d.n3.Profile,params:{profileId:n.id}}))}}),(0,r.jsx)(y.Z,{icon:"pri pri-account",text:t("Menu.Account.MyAccount"),onClick:function(){e((0,l.c8)({viewName:d.n3.Account,params:{anchor:"account"}}))}})]}),(0,r.jsx)(y.Z,{icon:"pri pri-logout",text:t("Sidebar.LogOut"),onClick:function(){e((0,c.pt)())}})]})},w=function(){var e=(0,a.I0)(),t=(0,p.Y)().localizedString,n=(0,o.useContext)(v.f),y=(0,a.v9)(c.dy),w=(0,a.v9)(u.zT),C=(0,a.v9)(c.hi);return(0,h.l)((function(){n.realign()}),[n.realign,y.isAuthenticated,w]),w===f.c.Voyager?null:y.isAuthenticated?(0,r.jsx)(g.x,{className:"btn-account",button:(0,r.jsxs)(m.a,{classN":"myProfileButton","aria-label":t("Header.Menu.User"),children:[(0,r.jsx)(_.c,{user:y,size:s.wC.normal}),(0,r.jsx)("span",{className:"btn-title",children:t("Header.Menu.Use,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.a,{"data-testid":"loginButton",className:"btn btn-s.Signicon btn-back",title:t("Buttons.Back.Text"),onClick:function(){return e((0,o.at)())},children:[(0,i.jsx)("span",{className:"pri pri-back","aria-hidden":"true"}),(0,i.jsx)("span",{className:"btn-title",children:t("Buttons.Back.Text")})]}r i=n(43188),r=n(28007),o=n(69896),a=n(78662),s=n(91228),u=n(70335),c=function(e){var t=(0,r.I0)(),n=(0,o.Y)().localizedString;return e.children?(0,i.jsx)(s.x,{className:"btn-options",button:(0,i.jsxs)(a.a,{className:"btn-icon",children:[(0,i.jsx)("span",{className:"pri pri-action","aria-hidden":"true"}),(0,i.jsx)("span",{className:"btn-title",children:n("Buttons.Options")})]}),children:e.children}):(0,i.jsxs)(a.a,{className:"btn-icon btn-options",onClick:function(e,n){return t((0,u.UL)({center:n.center}))},children:[(0,i.jsx)("span",{className:"pri pri-action","aria-hidden":"true"}),(0,i.jsx)("span",{className:"btn-title",children:n("Buttons.Options")})]})}},20598:function(e,t,n){"use strict";n.d(t,{I:function(){return T}});var i,r=n(43188),o=n(28007),a=n(123),s=n(25019),u=n(66204),c=n(90913),l=n(24458),d=n(50239),h=n(69896),p=n(76919),f=n(38876),m=n(4371),g=n(91228),v=n(24852),y=n(96425)i={}));var _=function(){var e=(0,o.I0)(),t","aria-hidden":"true"})})});return(0,r.jsxs)(g.x,{className:"btn-giftcards",button:w,children:[(0,r.jsx)(v.Z,{text:t("ToolbarTop.BuyGiftCard"),icon:"pri pri-gift",onClick:function(){return e((0,c.c8)({viewName:l.n3.GiftCard,params:{subview:i.Billing}}))}}),(0,r.jsx)(v.Z,{text:t("ToolbarTop.RedeemGiftCard"),icon:"pri pri-giftredeem",onClick:function(){return e((0,c.Zi)({link:"giftedaccess/campaign/giftcard-redeem"}))}})]})},b=n(10955),w=n(50908),C=n(78662),I=functContext)(y.f),i=(0,o.v9)(b.fi);if((0,d.sy&&i!==w.Q.BusyLimitExceeded||(a="wait"),(0,r.jsxs)(C.a,{className:"btn-icon btnButtons.Hotzone.Text")})]})},P=n(82415),x=n(75491),S=n(72439),T=function(e){var t=(0,o.v9)(a.zT);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_,{}),t!==s.c.Pervasive&&(0,r.jsx)(I,{}),!1!==e.search&&(0,r.jsx)(S.x,{}),(0,r.jsx)(P.L,{}),t!==s.c.Voyager&&(0,r.jsx)(x.T,{children:e="502),C=n(70335),I=function(e){var t=(0,s.I0)();return(0,o.jsx)(b.f,{icon:"pri pri-home",title:e.title,selected:e.selected,onClick:function(){return t((0,g.c8)({viewName:v.n3.Homtring;return(0,o.jsx)(b.f,{icon:"pri pri-magazine",title:n("v7.Client.Catalog.magazines"),selected:e.selected,onClick:function(){return t((0,g.c8)({viewName:v.n3.StoreHub,params:{catalogView:v.N1.Magazines}}))}})},S=function(e){var t=(0,s.I0)(),n=(0,P.Y){var t=(0,s.I0)(),n=(0,P.Y)().localizedString;return(0,o.jsx)(b.f,{icon:"pri pri-myprofile",title:n("Catalog.MyFavorites"),selected:e.selected,onClick:function(){return t((0,g.c8)({viewName:v.n3.MyProfile}))}})},k=function(e){var t=e.selected,n=e.hrefSEO,i=(0,s.I0)(),r=(0,P.Y)().localizedString;return(0,o.jsx)(b.f,{icon:"pri pri-sources",title:r("Navigation.Catalog"),selected:t,onClick:function(){return i((0,g.c8)({viewName:v.n3.StoreHub,params:{catalogView:v.N1.Catalog}}))},hrefSEO:n})},A=function(e){var t=(0,s.I0)(),n=(0,P.Y)().localizedString;return(0,o.jsx)(b.f,{icon:"pri pri-newsfeed",title:n("Navigation.ForYou"),selected:e.selected,onClick:function(){return t((0,g.c8)({viewName:v.n3.TopNews}))},hrefSEO:e.hrefSEO})},E=function(e){var t=(0,s.I0)(),n=(0,P.Y)().localizedString;return(0,o.jsx)(b.f,{icon:"pri pri-hotspotmap",title:n("Sidebar.HotzoneMap"),selected:e.selected,onClick:function(){return t((0,g.c8)({viewName:v.n3.HotSpotsHub}))},hrefSEO:e.hrefSEO})},Z=(0,_.bv)(),M=function(e){var t,n=(0,s.I0)(),i=(0,s.v9)(u.zT),r=(0,s.v9)(C.QB),a=(0,s.v9)(g.Yw),l=null!==(t=null==a?void 0:a.currentPath)&&void 0!==t?t:"none",d=(0,s.v9)(m),h=[],p=[];if(i===c.c.Pervasive&&(h.push((0,o.jsx)(I,{title:(0,y.Rn)("Navigation.Home"),selected:""===l||(null==a?void 0:a.viewName)===v.n3.Home},"pervasive_home")),h.push((0,o.jsx)(x,{selected:l.startsWith("catalog/magazines")},"pervasive_magazines")),h.push((0,o.jsx)(S,{selected:l.startsWith("catalog/newspapers")},"pervasive_newspapers")),d.enabled&&h.push((0,o.jsx)(T,{selected:l.staetails")||l.endsWith("latest");h.push((0,o.jsx)(k,{selected:f,hrefSEO:"".concat(Z,"catalog")},"web_catalog")),h.push((0,o.jsx)(A,{selected:(null==a?void 0:a.viewName)===v.n3.TopNews,hrefSEO:"".concat(Z,"foryou")},"web_topnews")),r.hotspotMap.enabled&&p.push((0,o.jsx)(E,{selected:l.startsWith("hotspot"),hrefSEO:"".concat(Z,"hotspot/map")},"web_hotspot")),r.about.enabled&&p.push((0,o.jsx)(b.f,{title:(0,y.Rn)("Sidebar.About"),selected:!1,onClick:function(){r.about.location&&n((0,g.Zi)({link:r.about.location,openNewWindow:!0}))},hrefSEO:"//about.pressreader.com/"},"web_about")),r.blog.enabled&&p.push((0,o.jsx)(b.f,{title:(0,y.Rn)("Sidebar.Blog"),selected:!1,onClick:function(){r.blog.location&&n((0,g.Zi)({link:r.blog.location,openNewWindow:!0}))},hrefSEO:"//blog.pressreader.com/"},"web_blog")),r.help.enabled&&p.push((0,o.jsx)(b.f,{title:(0,y.Rn)("Sidebar.HelpC(){r.help.location&&n((0,g.Zi)({link:r.help.location,openNewWindow:!0}))},hrefSEO:"//care.pressreader.com/hc"},"web_help"))}return i===c.c.Voyager&&(h.push((0,o.jsx)(I,{title:(0,y.Rn)("Navigation.Home"),selected:""===l||(null==a?void 0:a.viewName)===v.n3.Home},"voyager_home")),h.push((0,o.jsx)(x,{selected:l.startsWith("catalog/magazines")},"voyager_magazines")),h.push((0,o.jsx)(S,{selected:l.startsWith("catalog/newspapers")},"voyager_newspapers"))),(0,o.jsx)(w.w,{mode:e.mode,items:h,menuItems:p})},D=n(61266),L=n(17205),N=function(e){var t=(0,s.v9)(u.zT),n=(0,s.v9)(l.Dk),i=(0,a.useContext)(L.Q),r=[],f=null;"none"!==e.navigation&&(f=t===c.c.Pervasive?"phone"===n?"tabbar":"navbar":"compact"===e.navigation?"inline-compact":"inline");var m=(0,o.jsxs)(o.Fragment,{children:[t===c.c.Perva-compact"===f)&&(0,o.jsx)(M,{mode:f})]}),g=e.ive||g||(g=function(){return(0,o.jsx)(d.g,{})});var v="inline"===f?"sides-flex":g?"center-flex":"none",y=e.right||(0,o.js);var i=n(43188),r=n(66204),o=n(28007),a=n(90913),s=n(62954),u=n(50239),c=n(24782),l=n(88994),d={hasProminentReset:!0},h=function(e){e.onChange,p=e.onSearch,f=e.o.v9)(a.l9);(0,u.l)((function(){(null==g?void 0:g.id)!==(null==v?void 0:v.id)&&(null==f||f())}),[null==g?void 0:g.id,null==v?void 0:v.id,f]);var y=(0,r.useCallback)((function(e,t){h(e),t&&m((0,s.aj)({query:e}))}),[h,m]),_=(0,r.useCallback)((function(){m((0,s.R5)()),null==f||f()}),[m,f]),b=(0,r.useCallback)((function(){""===t?null==_||_():(h(""),m((0,s.aj)({query:""})))}),[m,h,t,_]),w=(0,r.useCallback)((function(){return m((0,s.aj)({query:t}))}),[m,t]),C=(0,r.us)})},p=n(17205),f=function(){var e=(0,o.I0)(),),b=n(70967),w=function(e){var t,n=""===e.query,o=function(t){return e.onSearch(t)},a=(0,r.useCallback)((function(){return e.onChange("")}),[e]),s=null===(t=e.showSearchBtn)||void 0===t||t;return(0,i.jsx)("div",{className:"topbar-search",children:(0,i.jsx)("div",{className:"ui-search",children:(0,i.jsx)("div",{role:"search","aria-label":(0,_.Rn)("Site.Search.Header.Aria"),chcontainer",children:[(0,i.jsx)(b.U,{value:e.query,"aria-label":(0,_.Rn)("Site.Search.Header.Placeholder"),placeholder:(0,_.Rn)("Site.Search.Header.Placeholder"),onChange:function(t,n){return e.onChange(n)},onSubmionReset:a}),s&&(0,i.jsxs)(m.a,{type:"submit",className:"btn btn-action btn-search",onClick:n?y.noop:function(){return o(e.query)},children:[(0,i.jsx)("span",{className:"pri pri-search","aria-hidden":"true"}),(0,i.jsx)("span",{className:"title",children:(0,_.Rn)("Buttons.Search.Text")})]})]})})})})},C=function(e){var t=e.onSearch,n=(0,o.v9)(v.Yw),a=(0,r.useS,(0,i.jsx)(w,{query:s,onChange:u,onSearch:t})},I=function(){var e=(0,chInpuon(){return s}});var i=n(43188),r=n(60683),o=n(70832),a=n(66353),s=function(e){var t=e.user,n=e.size;return t.isAuthenticated?(0,i.jsx)("span",{className:"userphoto",children:function(){var e,s,u=t.avatarImageId&&(0,o.Jn)(t.avatarImageId)||t.photo&&t.photo.url&&(0,r.GA)(t.photo.url);return u?(0,i.jsx)("img",{src:u,width:null!==(e=null==n?void 0:n.width)&&void 0!==e?e:0,height:null!==(s=null==n?void 0:n.height)&&void 0!==s?s:0,alt:""}):(0,i.jsx)("span",{className:"userphoto-title",children:(0,a.NG)(t.name)})}()}):(0,i.jsx)("span",{className:"userphoto"})}},83204:function(e,t,n){"use strict";n.d(t,{Ou:function(){return a},hB:function(){return o},i3:function(){return r},ic:function(){return s},mx:function(){return c},nB:function(){return l},oF:function(){return i},wi:function(){return u}});var i="@pressreader/views-common",r="contextmenu.views.common.interfacelang",o="contextmenu.views.common.fonts",a="TextView.Scale",s="TextView.Fontset",u="multilanguage",c=7,l=1},70309:function(e,t,n){"use strict";n.d(t,{B9:function(){return l},G_:function(){return y},HG:function(){return h},Ou:function(){return a},TV:function(){return m},UL:function(){return g},WM:function(){return u},Zs:function(){return c},_K:function(){return p},c7:function(){return f},eH:function(){return v},l3:function(){return s},wO:function(){return d},xz:function(){return _}});var i=n(12286),r=n(83204),o="".concat(r.oF,"/"),a=(0,i.mq)("".concat(o,"change_interface_language")),s=(0,i.mq)("".concat(o,"change_font")),u=(0,i.mq)("".concat(o,"change_font_done")),c=(0,i.mq)("".concat(o,"available_fonts_changed")),l=(0,i.mq)("".concat(o,"change_font_scale")),d=(0,i.mq)("".concat(o,"increase_font_scale")),h=(0,i.mq)("".concat(o,"decrease_font_scale")),p=(0,i.mq)("".concat(o,"font_scale_changed")),f=(0,i.mq)("".concat(o,"open_change_interface_language_menu")),m=(0,i.mq)("".concat(o,"open_fonts_menu")),g=(0,i.mq)("".concat(o,"open_legacy_options_menu")),v=(0,i.mq)("".concat(o,"legacy_app_load_began")),y=(0,i.mq)("".concat(o,"legacy_app_load_done")),_=(0,i.mq)("".concat(o,"legacy_app_load_failed"))},70335:function(e,t,n){"use strict";n.d(t,{l3:function(){return c.l3},WM:function(){return c.WM},B9:function(){return c.B9},Ou:function(){return c.Ou},HG:function(){return c.HG},_K:function(){return c._K},wO:function(){return c.wO},eH:function(){return c.eH},G_:function(){return c.G_},xz:function(){return c.xz},c7:function(){return c.c7},TV:function(){return c.TV},UL:function(){return c.UL},ER:function(){return M},Qj:function(){return D},jP:function(){return L},i5:function(){return O},QB:function(){return Z},eq:function(){return R},Jn:function(){return B},uC:function(){return V},Rw:function(){return F}});var i=n(39752),r=n(83204),o=n(22970),a=n(4370,o.pi)({},e),{currentFontScale:n.fontScale})})),(0,s.gX)(c.eH,(function(e){return(0,o.pi)((0,o.pi)({},e),{legacyAppStatus:a.o.Pending})})),(0,s.gX)(c.G_,(function(e){r),{legacyAppSt(c.xz,(function(e){return(0,o.pi)((0,o.pi)({},e),{legacyAppStatus:a.o.Failed})}))),h_=n(54215),b=n(32249)0),x=n(15798),S=n(85081)ws.common.nav_menu"ed,location:t.about.location}ion}}:{hotspotMap:{enabled:!1},about:{enabled:!1,location:null},blog:{enabled:!1,location:null},help:{enabled:!1,location:null}}})),M=(0,I.P1)(E,(function(e){return e.fonts})),D=(0,I.P1)(E,(function(e){return e.currentFontId})),L=(0,I.P1)(E,(function(e){return e.currentFontScale})),N=((0,I.P1)(L,(function(e){return e<r.mx})),(0,I.P1)(L,(function(e){return e>r.nB})),(0,I.P1)(E,(function(e){return e.legacyAppStatus}))),R=(0,I.P1)(v.Ob,N,y.rf,S.rf,(function(e,t,n,i){var r=!e&&!n.length&&!i.length;return t!==a.o.Done&&r})),V=(0,I.P1)(P.gq,N,(function(e,t){return e||t===a.o.Pending})),B=(0,I.P1)(y.rf,S.rf,(function(e,t){return!(e.length&&e[e.length-1].supportNativeScroll||t.length&&t[t.length-1].supportNativeScroll)})),F=(0,I.P1)(x.MX,(function(e){return e("app.common.rootPanelClassName","").split(" ").filter((function(e){return e}))})),O=(0,I.P1)(f.zT,k.Dk,k.xY,(function(e,t,n){return{showFooterLinks:e!==T.c.Voyager,mobileView:"phone"===t||n.screenType<=A.W.Medium}}));function z(e){var t,n,i,a,s,u;return(0,o.Jh)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,6,,7]),t={center:e.payload.center,align:{y:_.x.ScreenCenter,x:_.x.ScreenCenter}},[4,(0,y.vq)({parentMenuId:e.payload.parentMenuId,name:r.i3,context:null,position:t})];case 1:return n=o.sent(),[4,(0,y.CQ)(n)];case 2:return i=o.sent().payload,[4,(0,y.Zy)(n,{back:i.back})];case 3:return o.sent(),[4,(0,h.Ys)(f.zh)];case 4:return a=o.sent(),[4,(0,h.Ys)(f.AZ)];case 5:return s=o.sent(),w.set(r.wi,JSON.stringify({interfaceLangCode:a,preferredLanguageCode:s,result:!1}),{path:(0,b.bv)()}),[3,7];case 6:return u=o.sent(),(0,g.v)(u),[3,7];case 7:return[2]}}))}function U(e){var t=e.payload.languageCode,n=(0,b.tB)(window.location.pathname+window.location.search,t),i=(0,b.Xr)("ChangeLanguage?lng=".cnent(n)));turn[2]}}))}function j(){var e,t;return(0,o.Jh)(this,(function(n){switch(n.label){case 0:return[4,(0,h.Ys)(D)];case 1:return e=n.sent(),t=u.get(r.ic,"fontset1"),e===t?[3,3]:[4,(0,h.gz)((0,c.WM)({fontId:t}))];case 2:n.sent(),n.label=3;case 3:return u.onSettingsChanged(r.ic).subscribe((function(e){(0,i.WI)((0,c.WM)({fontId:e}))})),[2]}}))}function W(e){var t,n,i,a,s,u=e.payload;return(0,o.Jh)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,4,,5]),t=u.center?{center:u.center,align:{y:_.x.Center,x:_.x.Center}}:{center:{x:0,y:0},align:{y:_.x.ScreenCenter,x:_.x.ScreenCenter}},[4,(0,y.vq)({parentMenuId:u.parentMenuId,name:r.hB,context:{showFonts:u.showFonts},position:t})];case 1:return n=e.sent(),[4,(0,h.S3)({close:(0,y.CQ)(n),navigateBegan:(0,h.qn)(v.bh)})];case 2:return i=e.sent(),[4,(0,y.Zy)(n,{back:(null===(s=i.close)||void 0===s?void 0:s.payload.back)||!1})];case 3:return e.sent(),[3,5];case 4:return a=e.sent(),(0,g.v)(a),[3,5];case 5:return[2]}}))}function q(e){var t=e.payload;return(0,o.Jh)(this,(function(e){switch(e.label){case 0:return[4,(0,h.Ys)(D)];case 1:return e.sent()!==t.fontId&&u.set(r.ic,t.fontId),[2]}}))}function G(e){var t,n,i,a=e.payload;return(0,o.Jh)(this,(function(e){switch(e.label){case 0:return t=a.fontScale,n=(0,C.Q)(t),[4,(0,h.Ys)(L)];case 1:return itch(t.label){case 0:return[4,(0,h.Ys)(L)];case 1:return e=t.sent(),[4,(0,h.gz)((0,c.B9)({fontScale:e+1}))];case 2:return t.sent(),[2]}}))}freturn{return i}});var i="@pressreader/views-common",r="tag-"},96137:function(e,t,n){"use strict"itch(e.label){case 0:return t=s.tagId,n=s.locale,i=r.U+t,n?[4,(0,a.gz)((0,u.c8)({viewName:c.n3.Categorir(e){return(null==e?vofunction __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]=i));if(o){deferred.spferred[u]=[t,n,i]},__webpack_require__.n=functigetPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},__webpack_require__.t=function(e,t){if(1&t&&(e=this(e)),8&t)return e;if("object"==typeof e&&e){if(4&t&&e.__esModule)return e;if(16&t&&"furoto(getProto)];for(var r=ion(e,t){for(var n in t.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require_unction(e,t){return Obr r,o;if(void 0!==n)for(.parentNode.removeChild(r),i&&i.forEach((function(e){return e(n)})ack_require__.g.location+"");var t=__webpack_require__.g.dock_require__.p=e}(),function(){var e={1625:0,9068:0,4040:0};__webpack_require__.f.j=function(t,n){var i=__webpack_require__.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var r=neh(i[2]=r);var o=__webpack_require__.p+__webpack_require__.u(t),a=new Error;__webpack_require__.l(o,(function(n){if(__webpack_require__.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var r=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+r+": "+o+")",a.name="ChunkLoadError",a.type=r,a.request=o,i[1](a)}}),"chunk-"+t,t)}},__webpack_require__.O.j=function(t){return 0===e[t]};var t=function(t,n){var i,r,o=n[0],a=n[1],s=n[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(i in a)__webpack_require__.o(a,i)&&(__webpack_require__.m[i]=a[i]);if(s)var c=s(__webpack_require__)}for(t&&t(n);u<o.length;u++)r=o[u],__webpack_require__.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return __webpack_require__.O(c)},n=self.webpackChunkbeclient=self.webpackChunkbeclient||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var __webpack_exports__=__webpack_require__.O(void 0,[5066],(function(){return __webpack_require__(32690)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();