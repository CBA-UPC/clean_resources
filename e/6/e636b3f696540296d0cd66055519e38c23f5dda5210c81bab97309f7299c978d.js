import{aA as z,as as D,ai as oe,cw as ae,cx as se,aB as le,ab as re,aC as ce,aV as de,cN as O,cO as ue,j as ve,i as me,cB as pe,cP as K,cQ as ge,aD as V,aZ as he,cR as fe,l as Y,K as Q,cu as ye,bs as _e,a1 as ke,aX as X,aW as G}from"./itinerary-entities.5f897bcd.js";import{l as S,G as i,P as l,X as $e,Y as n,H as k,I as F,a7 as P,a6 as d,Q as _,x as u,R as N,S as A,r as W,q as Z,N as H,z as t,O as j,F as T,$ as x,c as r,an as E,ao as U,W as Ce,w as be,_ as Te}from"./graphql.5cf3693b.js";import{b as B,q as Ie,L as J,l as L}from"./entry.a7cea746.js";import{L as Be}from"./RouteView.94d5f105.js";const we=S({__name:"FooterButtons",props:{proceedButtonName:{default:"ادامه"},proceedButtonDisabled:{type:Boolean},proceedButtonRightIcon:{},hasCancel:{type:Boolean},cancelButtonName:{default:"بازگشت"},fillDesktop:{type:Boolean},fixed:{type:Boolean},mobileOnly:{type:Boolean},desktopButtonMaxWidth:{default:"220px"},inner:{type:Boolean},proceedButtonLoading:{type:Boolean}},emits:["click:proceed","click:cancel"],setup(e,{emit:v}){return(o,c)=>(i(),l("div",{class:N(["footer-container-root",{fixed:o.fixed,"just-in-mobile":o.mobileOnly,inner:o.inner}]),style:A({"--desktop-button-max-width":o.desktopButtonMaxWidth})},[$e(o.$slots,"prepend",{},void 0,!0),n("div",{class:N(["actions",{fill:o.fillDesktop,cancel:o.hasCancel}])},[o.hasCancel?(i(),k(z,{key:0,"full-width":"",type:"bordered",class:"action",onClick:c[0]||(c[0]=m=>v("click:cancel"))},{default:F(()=>[P(d(o.cancelButtonName),1)]),_:1})):_("",!0),u(z,{class:"action","full-width":"",disabled:o.proceedButtonDisabled,loading:o.proceedButtonLoading,"right-icon":o.proceedButtonRightIcon,onClick:c[1]||(c[1]=m=>v("click:proceed"))},{default:F(()=>[P(d(o.proceedButtonName),1)]),_:1},8,["disabled","loading","right-icon"])],2)],6))}});const Ft=D(we,[["__scopeId","data-v-a5642567"]]),De={class:"images-container"},Se=["src"],Me=S({__name:"VehicleImageModal",props:{imageList:{},selectedImageIndex:{}},emits:["close"],setup(e,{expose:v,emit:o}){const c=W(0),m=()=>{o("close")},I=()=>{c.value<e.imageList.length-1&&c.value++},C=()=>{c.value>0&&c.value--};Z(()=>{c.value=e.selectedImageIndex}),v({close:m});const p=oe();return(b,g)=>(i(),k(le,{title:t(p).t("Card.vehicleImage"),onClose:g[0]||(g[0]=y=>o("close"))},{default:F(()=>[n("div",De,[b.imageList.length>1?H((i(),k(z,{key:0,class:"arrow right",size:"small","icon-button":{icon:t(ae),color:"white"},onClick:C},null,8,["icon-button"])),[[j,t(c)!==0]]):_("",!0),(i(!0),l(T,null,x(b.imageList,(y,a)=>(i(),l("img",{key:a,src:y,class:N(["image",{show:a===t(c)}]),alt:"vehicle-image"},null,10,Se))),128)),b.imageList.length>1?H((i(),k(z,{key:1,class:"arrow left",size:"small","icon-button":{icon:t(se),color:"white"},onClick:I},null,8,["icon-button"])),[[j,t(c)!==b.imageList.length-1]]):_("",!0)])]),_:1},8,["title"]))}});const xe=D(Me,[["__scopeId","data-v-a260234a"]]),Ne={class:"images-container"},Le=S({__name:"VehicleImages",props:{originCode:{default:""},destinationCode:{default:""},corporation:{default:""},vehicle:{default:""},type:{default:""},corporationCode:{default:""},vehicleCode:{default:""},vehicleTitle:{default:""}},setup(e){const v=re(),o=W([]),{open:c}=ce({component:xe,attrs:{imageList:o.value.map(C=>C.urls.original),selectedImageIndex:0}}),m=W(!0),I=async()=>{try{o.value=await v.getVehicleImages({origin:e.originCode,destination:e.destinationCode,corporation:e.corporation,vehicle:e.vehicle,type:e.type,vehicleCode:e.vehicleCode,corporationCode:e.corporationCode})}catch{}finally{m.value=!1}};return Z(()=>{I()}),(C,p)=>(i(),l("div",Ne,[t(m)?(i(),k(de,{key:0,color:"var(--blue-400)"})):_("",!0),t(o).length?(i(),l("div",{key:1,onClick:p[0]||(p[0]=()=>t(c)())}," تصاویر "+d(C.vehicleTitle),1)):_("",!0)]))}});const Ve=D(Le,[["__scopeId","data-v-ba59d482"]]),ee=e=>(E("data-v-fdffb009"),e=e(),U(),e),ze={class:"trip-view-container"},Fe={class:"time"},Pe={key:0,class:"time duration"},We={class:"time"},Re={class:"time-line-section"},Oe={key:1,class:"circle-icon"},He=ee(()=>n("span",{class:"circle-icon"},null,-1)),je=ee(()=>n("span",{class:"circle-icon"},null,-1)),Ae={class:"info-section"},Ee={class:"title orig"},Ue={class:"trip-info"},qe={class:"info-title"},Qe={class:"info-title"},Xe=S({__name:"TripView",props:{trip:{},isFirst:{type:Boolean},compact:{type:Boolean},hasFinalDestination:{type:Boolean}},setup(e){const v=r(()=>{switch(e.trip.vehicleType){case O.Plane:return{icon:pe,rotation:"90"};case O.Train:return{icon:me};case O.Bus:return{icon:ve};case O.Taxi:return{icon:ue};default:return{icon:void 0}}}),o=r(()=>e.trip.departureTime),c=r(()=>K(e.trip.duration)),m=r(()=>e.trip.arrivalTime),I=r(()=>e.trip.originCityName.includes(e.trip.originTerminal)?e.trip.originCityName:`${e.trip.originCityName}، ${e.trip.originTerminal}`),C=r(()=>e.trip.destinationCityName.includes(e.trip.destinationTerminal)||e.hasFinalDestination?e.trip.destinationCityName:`${e.trip.destinationCityName}، ${e.trip.destinationTerminal}`),p=r(()=>e.trip.corporationInfo),b=r(()=>e.trip.tripMidStops),g=r(()=>!!b.value.length),y=r(()=>e.trip.tripExtraInfo);return(a,$)=>(i(),l("div",ze,[n("div",{class:N(["times-section",{compact:a.compact}])},[n("div",Fe,d(t(o)),1),a.compact?_("",!0):(i(),l("div",Pe,[P(d(t(c))+" ",1),u(V,{icon:t(ge),color:"var(--cool-gray-600)"},null,8,["icon"])])),n("div",We,[n("span",null,d(t(m)),1),H(u(V,{icon:t(he)},null,8,["icon"]),[[j,a.trip.destinationHasWarning]])])],2),n("div",Re,[a.isFirst&&t(v).icon?(i(),k(V,{key:0,size:"small",icon:t(v).icon,rotation:t(v).rotation,color:"var(--cool-gray-400)"},null,8,["icon","rotation"])):(i(),l("span",Oe)),u(B,{vertical:"",class:"divider"}),(i(!0),l(T,null,x(t(b).length,M=>(i(),l(T,{key:`mid-circle-${M-1}`},[He,u(B,{vertical:"",class:"mid-divider",size:"10px"})],64))),128)),je]),n("div",Ae,[n("div",Ee,d(t(I)),1),n("div",Ue,[u(Be,{url:t(p).logoUrl,"url-fallback":t(p).logoFallbackUrl,"desktop-small":""},null,8,["url","url-fallback"]),n("div",qe,d(t(p).title)+" "+d(t(p).subTitle||""),1),t(y)?(i(!0),l(T,{key:0},x(t(y),(M,R)=>(i(),l(T,{key:`divider-${R}`},[u(B,{vertical:"",size:"12px",margin:"12px",color:"var(--cool-gray-400)"}),n("div",Qe,d(M),1)],64))),128)):_("",!0),a.compact?_("",!0):(i(),k(Ve,{key:1,"origin-code":a.trip.originCode,"destination-code":a.trip.destinationCode,vehicle:a.trip.vehicleInfo.type,type:a.trip.vehicleType,corporation:t(p).title,"corporation-code":t(p).code,"vehicle-code":a.trip.vehicleInfo.code,"vehicle-title":a.trip.vehicleInfo.title},null,8,["origin-code","destination-code","vehicle","type","corporation","corporation-code","vehicle-code","vehicle-title"]))]),(i(!0),l(T,null,x(t(b),M=>(i(),l("div",{key:M,class:"title mid"},d(M),1))),128)),n("div",{class:N(["title dest",{"with-mid":t(g)}])},d(t(C)),3)])]))}});const Ge=D(Xe,[["__scopeId","data-v-fdffb009"]]),Je={class:"station-waiting-container"},Ke={class:"time-duration"},Ye={class:"title"},Ze=S({__name:"StationWaiting",props:{arrivalTrip:{},departureTrip:{}},setup(e){const{day:v}=Y(),o=r(()=>K(v.gregory(e.departureTrip.departureDateTime).diff(e.arrivalTrip.arrivalDateTime,"second"))),c=r(()=>`توقف در فرودگاه ${e.arrivalTrip.destinationTerminal}`);return(m,I)=>(i(),l("div",Je,[n("div",Ke,[P(d(t(o))+" ",1),u(V,{icon:t(fe),color:"var(--cool-gray-500)"},null,8,["icon"])]),u(B,{vertical:"",class:"divider","border-style":"dashed",margin:20,color:"var(--cool-gray-400)"}),n("div",Ye,d(t(c)),1)]))}});const et=D(Ze,[["__scopeId","data-v-eac52e4d"]]),te=e=>(E("data-v-838a197e"),e=e(),U(),e),tt={class:"final-destination-container"},it=te(()=>n("div",{class:"title"},null,-1)),nt={class:"sep"},ot=te(()=>n("div",{class:"circle"},null,-1)),at={class:"title"},st=S({__name:"FinalDestination",props:{destination:{}},setup(e){return(v,o)=>(i(),l("div",tt,[it,n("div",nt,[u(B,{vertical:"",class:"divider","border-style":"dashed",margin:20,size:"10px",color:"var(--cool-gray-400)"}),ot]),n("div",at,d(v.destination),1)]))}});const lt=D(st,[["__scopeId","data-v-838a197e"]]),rt={class:"segment-info-container"},ct={class:"segment-date"},dt={class:"option-container"},ut={class:"title"},vt={class:"content-container"},mt=S({__name:"SegmentInfo",props:{segment:{},toggleable:{type:Boolean},compact:{type:Boolean}},setup(e){const{day:v}=Y(),o=W(!0),c=r(()=>`${e.segment.firstTrip.originCityName} به ${e.segment.lastTrip.destinationCityName}`),m=r(()=>{var a,$;const g=v.js((a=e.segment.firstTrip)==null?void 0:a.departureDateTime).format(Q({format:"long",includeWeekday:!0})),y=v.js(($=e.segment.lastTrip)==null?void 0:$.arrivalDateTime).format(Q({format:"long",includeWeekday:!0}));return g!==y?`${g} ← ${y}`:g}),I=r(()=>e.compact?e.segment.compactOptions:e.segment.options),C=r(()=>e.segment.trips),p=r(()=>{var g,y,a,$;return(g=e.segment.lastTrip)!=null&&g.finalDestination&&!((a=e.segment.lastTrip)!=null&&a.destination.includes((y=e.segment.lastTrip)==null?void 0:y.finalDestination))?($=e.segment.lastTrip)==null?void 0:$.finalDestination:null}),b=()=>{e.toggleable&&(o.value=!o.value)};return(g,y)=>(i(),l("div",rt,[n("header",{class:"details-header",onClick:b},[g.toggleable?(i(),k(Ie,{key:0,"is-active":t(o),class:"segment-button",type:"transparent",title:t(c),"only-button":"",onToggle:b},null,8,["is-active","title"])):_("",!0),n("div",ct,d(t(m)),1),(i(!0),l(T,null,x(t(I),(a,$)=>(i(),l(T,{key:`divider-${$}`},[u(B,{vertical:"",size:"20px",color:"var(--blue-200)",margin:12,thickness:1}),n("div",dt,[a.icon?(i(),k(V,{key:0,icon:a.icon,class:"option-icon"},null,8,["icon"])):_("",!0),n("div",ut,d(a.title),1)])],64))),128))]),u(Ce,null,{default:F(()=>[H(n("div",vt,[(i(!0),l(T,null,x(t(C),(a,$)=>(i(),l(T,{key:$},[$>0?(i(),k(et,{key:0,"arrival-trip":t(C)[$-1],"departure-trip":a},null,8,["arrival-trip","departure-trip"])):_("",!0),u(Ge,{trip:a,"is-first":$===0,compact:g.compact,"has-final-destination":!!t(p)},null,8,["trip","is-first","compact","has-final-destination"])],64))),128)),t(p)?(i(),k(lt,{key:"final-destination",destination:t(p)},null,8,["destination"])):_("",!0)],512),[[j,t(o)]])]),_:1})]))}});const Pt=D(mt,[["__scopeId","data-v-9c052d7b"]]),pt={class:"title-container"},gt={class:"title"},ht={class:"description"},ft=S({__name:"CardDescriptionView",props:{info:{}},setup(e){const v=r(()=>e.info.color||ye[e.info.backgroundColor]||"var(--gray-900)");return(o,c)=>(i(),l("div",{class:"package-info-description-container",style:A({backgroundColor:o.info.backgroundColor,"--color":t(v)})},[n("div",pt,[o.info.icon?(i(),k(V,{key:0,class:"icon",icon:o.info.icon,color:t(v),size:"x-small"},null,8,["icon","color"])):_("",!0),n("div",gt,d(o.info.title),1)]),n("p",ht,d(o.info.description),1)],4))}});const Wt=D(ft,[["__scopeId","data-v-b4c86ad9"]]),ie=e=>(E("data-v-8d737bb6"),e=e(),U(),e),yt={class:"mr-bill-root"},_t={class:"desktop-header"},kt={class:"header-title"},$t={class:"mobile-header"},Ct={key:0,class:"loading-container"},bt={class:"padding-box"},Tt={class:"item desktop"},It=ie(()=>n("span",{class:"item-title"},"مجموع",-1)),Bt={key:0,class:"loading-container"},wt={class:"item"},Dt=ie(()=>n("span",{class:"item-title"},"اعتبار موجود",-1)),St={class:"item"},Mt={class:"item-title red"},xt=S({__name:"MrBill",props:{title:{default:"صورت‌حساب سفر"},items:{default:()=>[]},discounts:{default:()=>[]},initialState:{default:"opened"},hideCredit:{type:Boolean},loading:{type:Boolean}},setup(e,{expose:v}){const o=_e(),c=ke(),m=W(!1),I=r(()=>c.credit||0),C=r(()=>o.isAutoReserve?"شارژ آنلاین مورد نیاز":"مبلغ قابل پرداخت"),p=r(()=>c.credit!==null&&!e.hideCredit&&!e.loading),b=r(()=>Math.max(a.value-I.value,0)),g=r(()=>e.loading?[]:e.items.length>1?e.items.reduce((h,f)=>[...h,{title:f.title??"",count:1,unitPrice:f.items.reduce((s,w)=>s+w.unitPrice*w.count,0),divider:!0},...f.items],[]):e.items.length?e.items[0].items:[]),y=r(()=>{var f,s,w;if(e.loading)return[];const h=(f=e.discounts)==null?void 0:f.reduce((ne,q)=>ne+q.unitPrice*q.count,0);return((s=e.discounts)==null?void 0:s.length)>1||((w=e.items)==null?void 0:w.length)>1?[{title:"تخفیف‌ها",unitPrice:h,count:1,divider:!0},...e.discounts]:e.discounts}),a=r(()=>{var h;return g.value.reduce((f,s)=>f+(s.divider?0:s.count)*s.unitPrice,0)-((h=e.discounts)==null?void 0:h.reduce((f,s)=>f+s.count*s.unitPrice,0))}),$=r(()=>{var h,f;return 40*(((h=g.value)==null?void 0:h.length)+1)+9+(p.value?40*2+9:0)+((f=y.value)!=null&&f.length?40*y.value.length:0)}),M=r(()=>{var h,f;return 40*((h=g.value)==null?void 0:h.length)+(p.value?40*2+9:0)+((f=y.value)!=null&&f.length?40*y.value.length:0)}),R=()=>{m.value=!m.value};return be(()=>e.initialState,h=>{m.value=h==="opened"},{immediate:!0}),v({toggle:R}),(h,f)=>(i(),l("div",yt,[n("div",_t,[n("span",kt,d(h.title),1),u(z,{size:"small",type:"transparent","icon-button":t(m)?t(X):t(G),onClick:Te(R,["stop"])},null,8,["icon-button","onClick"])]),n("div",$t,[u(z,{size:"medium",type:"transparent","left-icon":t(m)?t(G):t(X),onClick:f[0]||(f[0]=s=>m.value=!t(m))},{default:F(()=>[P(" مجموع قیمت ")]),_:1},8,["left-icon"]),h.loading?(i(),l("div",Ct,[u(J,{scale:2})])):(i(),k(L,{key:1,price:t(a),type:"small"},null,8,["price"]))]),n("div",{class:"body",style:A({"--max":t(m)?`${t($)}px`:0,"--mobile-max":t(m)?`${t(M)}px`:0})},[n("div",bt,[(i(!0),l(T,null,x(t(g),(s,w)=>(i(),l("div",{key:`item-${w}`,class:"item"},[n("span",{class:N(["item-title",{heading:s.divider}])},d(s.divider?"":s.count)+" "+d(s.title),3),s.divider?(i(),k(B,{key:0,margin:"0",thickness:"1px"})):_("",!0),u(L,{price:s.unitPrice,type:"small",prefix:s.count>1?`x${s.count}`:void 0,free:""},null,8,["price","prefix"])]))),128)),h.discounts.length?(i(!0),l(T,{key:0},x(t(y),(s,w)=>(i(),l("div",{key:`discount-${w}`,class:"item"},[n("span",{class:N(["item-title",{heading:s.divider}])},d(s.divider||s.count<=1?"":s.count)+" "+d(s.title),3),s.divider?(i(),k(B,{key:0,margin:"0",thickness:"1px"})):_("",!0),u(L,{price:s.unitPrice,type:"small",prefix:s.count>1?`x${s.count}`:void 0,free:""},null,8,["price","prefix"])]))),128)):_("",!0),u(B,{class:"desktop",thickness:"1px",margin:"0"}),n("div",Tt,[It,h.loading?(i(),l("div",Bt,[u(J,{scale:2})])):(i(),k(L,{key:1,price:t(a)},null,8,["price"]))]),t(p)?(i(),l(T,{key:1},[u(B,{thickness:"1px",margin:"0"}),n("div",wt,[Dt,u(L,{price:t(I),type:"small"},null,8,["price"])]),n("div",St,[n("span",Mt,d(t(C)),1),u(L,{price:t(b),type:"small"},null,8,["price"])])],64)):_("",!0)])],4)]))}});const Rt=D(xt,[["__scopeId","data-v-8d737bb6"]]);export{Wt as C,Ft as F,Rt as M,Pt as S};
