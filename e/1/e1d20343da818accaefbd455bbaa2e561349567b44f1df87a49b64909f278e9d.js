"use strict";(self.webpackChunkarena_web=self.webpackChunkarena_web||[]).push([[648],{98352:function(e,t,n){var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.banAndDeleteMessage=function(e,t,n){return function(){var r=(0,i.default)(a.default.mark((function r(u){return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u({type:"BAN_AND_DELETE_MESSAGE_PENDING"}),r.prev=1,r.next=4,u(Oe(e));case 4:return r.next=6,u(Pe(e,t,n));case 6:u({type:"BAN_AND_DELETE_MESSAGE_FULFILLED"}),r.next=13;break;case 9:throw r.prev=9,r.t0=r.catch(1),u({type:"BAN_AND_DELETE_MESSAGE_REJECTED",error:r.t0}),r.t0;case 13:case"end":return r.stop()}}),r,null,[[1,9]])})));return function(e){return r.apply(this,arguments)}}()},t.banUser=Oe,t.blockPrivateUser=function(e,t,r){return function(){var u=(0,i.default)(a.default.mark((function u(i,s){var o,c,l,d;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=s().publisherReducer.publisher.slug,a.next=3,le(o);case 3:return c=a.sent,a.next=6,c.blockPrivateUser(e._id);case 6:return l=a.sent,a.next=9,Promise.resolve().then(n.bind(n,91812));case 9:return(d=a.sent).default.set(d.DONT_ASK_AGAIN_BLOCK_PRIVATE_USER,t),i({type:"BLOCK_PRIVATE_USER_FULFILLED",userId:e._id,chatSlug:r}),a.abrupt("return",l);case 13:case"end":return a.stop()}}),u)})));return function(e,t){return u.apply(this,arguments)}}()},t.chatBootstrap=L,t.chatLeave=t.cleanBannedUsers=function(){return ,t.cleanChatMembers=function(e){return function(t){t({type:"CLEAN_CHAT_MEMBERS_FULFILLED",chatSlug:e,members:[]})}},t.cleanInputGIFs=function(){return ,t.closeDeletePollModalSuccess=function(e){return function(t){return t({type:"SHOW_DELETE_POLL_MODAL_SUCCESS",value:e})}},t.createPoll=function(e,t,n){return function(){var r=(0,i.default)(a.default.mark((function r(u,i){var s,o,c,l;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u({type:"SET_POLLS_PENDING",isPollsPending:!0}),s=i().publisherReducer.publisher.slug,o=i().loginReducer.userData,c={draft:!1,options:e.options,question:e.question,showVotes:e.showVotes,duration:e.duration},r.next=6,xe(s,t,o._id,n);case 6:return l=r.sent,r.next=9,l.createPoll(c);case 9:u({type:"SET_POLLS_PENDING",isPollsPending:!1}),u(ce(!1));case 11:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},t.createPrivateChannel=Ce,t.deleteMessage=Pe,t.deletePoll=function(e,t,n){return function(){var r=(0,i.default)(a.default.mark((function r(u,i){var s,o,c;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u({type:"SET_POLLS_PENDING",isPollsPending:!0}),s=i().publisherReducer.publisher.slug,o=i().loginReducer.userData,r.next=5,xe(s,t,o._id,n);case 5:return c=r.sent,r.next=8,c.deletePoll(e);case 8:u({type:"SET_POLLS_PENDING",isPollsPending:!1}),u({type:"SHOW_DELETE_POLL_MODAL",value:{}}),u({type:"SHOW_DELETE_POLL_MODAL_SUCCESS",showDeletePollModalSuccess:!0});case 11:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},t.deletePrivateMessage=function(e,t){return function(){var n=(0,i.default)(a.default.mark((function n(r,u){var i,s,o;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=u().publisherReducer.publisher.slug,n.next=3,le(i);case 3:return s=n.sent,n.next=6,s.getPrivateChannel(e._id);case 6:return o=n.sent,n.next=9,o.deleteMessage(t.key);case 9:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},t.fetchChatChannels=function(e){return function(){var t=(0,i.default)(a.default.mark((function t(n,r){var u,i,s;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=r().publisherReducer.publisher.slug,t.next=3,ye(u,e);case 3:return i=t.sent,t.next=6,i.getChannels();case 6:return s=t.sent,n({type:"FETCH_CHAT_CHANNELS_FULFILLED",channels:s,chatSlug:e}),t.abrupt("return",s);case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},t.fetchChatInfo=function(e,t,r){return function(){var u=(0,i.default)(a.default.mark((function u(i,o){var c,l,d;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Promise.all([n.e(894),n.e(5312),n.e(4287)]).then(n.bind(n,49517));case 2:return c=a.sent,l=(0,s.default)(o(),"publisherReducer.publisher"),i({type:"FETCH_CHAT_INFO_PENDING"}),a.prev=5,a.next=8,c.fetchItemByPathKey("chat-rooms/".concat(e));case 8:if((d=a.sent).mainChannel){a.next=13;break}return a.next=12,H(l.slug,d.slug);case 12:d.mainChannel=a.sent;case 13:t(null,{chatRoom:d,channel:d.mainChannel}),i(L(l,d,!0,t,r)),i({type:"FETCH_CHAT_INFO_FULFILLED",chatRoom:d}),a.next=21;break;case 18:a.prev=18,a.t0=a.catch(5),i({type:"FETCH_CHAT_INFO_REJECTED"});case 21:case"end":return a.stop()}}),u,null,[[5,18]])})));return function(e,t){return u.apply(this,arguments)}}()},t.fetchChatMembers=function(e,t,n){return function(){var r=(0,i.default)(a.default.mark((function r(u){var i;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Ee(n,e,t);case 2:i=r.sent,u({type:"FETCH_CHAT_MEMBERS_FULFILLED",chatSlug:e,members:i});case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},t.fetchChatPolls=function(e,t,n){return function(){var r=(0,i.default)(a.default.mark((function r(u,i){var s,o,c,l,d;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u({type:"FETCH_CHAT_POLLS_PENDING",chatSlug:e}),s=i().publisherReducer.publisher.slug,(o=i().loginReducer.anonymousUser)&&(c=o.uid),Re(),r.next=7,xe(s,e,c,n);case 7:return(l=r.sent).watchPollErrors((),r.next=11,l.loadPolls(t);case 11:return d=r.sent,u({type:"FETCH_CHAT_POLLS_FULFILLED",chatSlug:e,polls:d}),l.onPollModified((function(t){u({type:"RECEIVED_POLL_MODIFIED",poll:t,chatSlug:e})})),l.onPollReceived((function(t){u({type:"RECEIVED_POLL",poll:t,chatSlug:e})})),l.onPollDeleted((function(t){u({type:"RECEIVED_POLL_DELETED",poll:t,chatSlug:e})})),r.abrupt("return",d);case 17:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},t.fetchGIFs=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.query,r=void 0===t?"":t,u=e.page,s=void 0===u?1:u,o=e.type,c=void 0===o?"trending":o,l=e.limit,d=void 0===l?9:l;return function(){var e=(0,i.default)(a.default.mark((function e(t){var u,i,o,l,f;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_GIFS_PENDING",newFetch:1===s}),e.prev=1,u=[],e.next=5,n.e(9759).then(n.bind(n,19759));case 5:if(i=e.sent,"trending"!==c){e.next=13;break}return e.next=9,i.trending({page:s,pageSize:d});case 9:o=e.sent,u=o.data,e.next=17;break;case 13:return e.next=15,i.search(r,{page:s,pageSize:d});case 15:l=e.sent,u=l.data;case 17:return f=ie(u),t({type:"FETCH_GIFS_FULFILLED",gifs:f,page:s,hasMoreGIFs:u.length===d,gifType:c}),e.abrupt("return",f);case 22:throw e.prev=22,e.t0=e.catch(1),t({type:"FETCH_GIFS_REJECTED",error:e.t0}),e.t0;case 26:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(t){return e.apply(this,arguments)}}()},t.fetchGroupChannels=fe,t.fetchPinnedMesage=Ae,t.fetchPreviousMessages=function(e,t,r){return function(){var u=(0,i.default)(a.default.mark((function u(i,s){var o,c,l,d,f;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=s().publisherReducer.publisher.slug,i({type:"FETCH_PREVIOUS_CHAT_MESSAGES_PENDING",chatListHeight:r,chatSlug:t}),a.next=4,me(o,t,e._id);case 4:return c=a.sent,a.next=7,c.loadPreviousMessages(10);case 7:return l=a.sent,i({type:"FETCH_PREVIOUS_CHAT_MESSAGES_FULFILLED",messages:l,chatSlug:t}),P+=10,a.next=12,n.e(7660).then(n.bind(n,57660));case 12:d=a.sent,f=d.ADDITIONAL_POSTS_LOADED,(0,d.track)(f,{widgetId:s().appReducer["widgetId_".concat(t)],widgetType:s().appReducer["widgetType_".concat(t)]||null,currentDisplaying:P-10,pagination:10});case 16:case"end":return a.stop()}}),u)})));return function(e,t){return u.apply(this,arguments)}}()},t.fetchPrivatePreviousMessages=function(e){return function(){var t=(0,i.default)(a.default.mark((function t(n,r){var u,i,s;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=r().publisherReducer.publisher.slug,t.next=3,pe(u,e._id);case 3:return i=t.sent,t.next=6,i.loadPreviousMessages(10);case 6:s=t.sent,n({type:"SET_USER_GROUP_CHANNLE_PREVIOUS_MESSAGES",messages:s,channelId:e._id});case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},t.fetchReactions=function(e,t,n){return function(){var r=(0,i.default)(a.default.mark((function r(u,i){var s,o,c,l,d;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=i().publisherReducer.publisher.slug,r.next=3,le(s);case 3:return o=r.sent,r.next=6,o.getLiveChat(n);case 6:return c=r.sent,r.next=9,c.getChannel(e);case 9:return l=r.sent,r.next=12,l.fetchReactions(t);case 12:return d=r.sent,r.abrupt("return",d);case 14:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},t.fetchUserProfile=function(e){return function(){var t=(0,i.default)(a.default.mark((function t(n,r){var u,i,s;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=r().publisherReducer.publisher.slug,t.next=3,le(u);case 3:return i=t.sent,t.next=6,i.getUserProfile(e);case 6:return s=t.sent,t.abrupt("return",s);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},t.fetchUserReminderSubscription=ke,t.getArenaSDK=le,t.getChannelInstance=me,t.getChatRoomMembers=Ee,t.getLiveChatChannel=N,t.getMessageReport=function(e,t){var n,r=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=return{s:a,n:e:f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,i=!0,s=!1;return{s:n:e:f:}(e);try{for(r.s();!(n=r.n()).done;){var a=n.value;if(a.message.key===t)return a}}catch(u){r.e(u)}finally{r.f()}return null},t.getSendChatUser=function(){return X.apply(this,arguments)},t.listenToPrivateChannel=function(e){return function(){var t=(0,i.default)(a.default.mark((function t(n,r){var u,i,s;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=r().publisherReducer.publisher.slug,t.prev=1,t.next=4,pe(u,e);case 4:return i=t.sent,n(ve(i)),t.next=8,i.loadRecentMessages(10);case 8:return s=t.sent,n({type:"SET_USER_GROUP_CHANNEL_MESSAGES",messages:s,channelId:e}),i.onMessageReceived((function(t){n({type:"RECEIVED_USER_GROUP_CHANNEL_MESSAGE",message:t,channelId:e})})),i.onMessageModified((function(t){n({type:"RECEIVED_USER_GROUP_CHANNEL_MESSAGE_MODIFIED",message:t,channelId:e})})),i.onMessageDeleted((function(t){n({type:"RECEIVED_USER_GROUP_CHANNEL_MESSAGE_DELETED",message:t,channelId:e})})),t.abrupt("return",i);case 16:t.prev=16,t.t0=t.catch(1),console.log(t.t0);case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e,n){return t.apply(this,arguments)}}()},t.listenToPrivateChannelUnreadCount=function(){return function(){var e=(0,i.default)(a.default.mark((function e(t,n){var r,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().publisherReducer.publisher.slug,e.next=3,le(r);case 3:(u=e.sent).offUnreadMessagesCountChanged(),u.onUnreadPrivateMessagesCountChanged((function(e){t({type:"RECEIVE_PRIVATE_CHANNEL_UNREAD_COUNT",total:e}),t(fe())}));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},t.presence=t.payloadUserToSetPresence=void 0,t.reactLove=function(e,t,r,u,o,c){return function(){var l=(0,i.default)(a.default.mark((function i(l,d){var f,p,h,v,_,y,g,m,b,E,S,w,x,I;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(f=d().publisherReducer.publisher.slug,p=(0,s.default)(d(),"loginReducer.userData"),h=(0,s.default)(d(),"publisherReducer.publisher"),v=(0,s.default)(d(),"chatRoomReducer.chatRoom.".concat(e.slug,".useNewReactionAPI")),_=!1,!p){a.next=9;break}y=p._id,a.next=16;break;case 9:return _=!0,g=(0,s.default)(d(),"loginReducer.anonymousUser"),a.next=13,Promise.all([n.e(894),n.e(749),n.e(4322),n.e(4222)]).then(n.bind(n,64222));case 13:m=a.sent,b=m.generatePushID,y=g&&g.uid?g.uid:b();case 16:return E="love",S=v?e.id:t,w={itemType:"chatMessage",reaction:E,publisherId:h?h.uid:null,itemId:r.key,chatRoomId:S,userId:y},l({type:"REACT_LOVE_PENDING",reaction:w,chatSlug:e.slug}),a.next=22,me(f,e.slug,t);case 22:return a.sent.sendReaction({messageID:r.key,type:E},_?y:void 0,!1).then((),a.next=26,n.e(385).then(n.bind(n,90385));case 26:x=a.sent,(I=x.getJSONItem("reactions-chat-".concat(t)))||(I={}),I[r.key]=w,x.setJSONItem("reactions-chat-".concat(t),I);case 31:case"end":return a.stop()}}),i)})));return function(e,t){return l.apply(this,arguments)}}()},t.receiveAllMessage=z,t.receiveAllMessageWithDebounce=function(e,t){return(0,o.default)((function(n){e({type:"CHAT_ALL_MESSAGES_RECEIVED",allMessages:n,pagination:P,chatSlug:t})}),1e3)},t.removeAllMessages=function(e,t){return function(){var r=(0,i.default)(a.default.mark((function r(u,i){var s,o,c,l;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=i().publisherReducer.publisher.slug,r.next=3,le(s);case 3:return o=r.sent,r.next=6,o.getPrivateChannel(e._id);case 6:return c=r.sent,r.next=9,Promise.resolve().then(n.bind(n,91812));case 9:return(l=r.sent).default.set(l.DONT_ASK_AGAIN_REMOVE_PRIVATE_MESSAGES,t),u({type:"REMOVE_ALL_MESSAGES_FULFILLED",channelId:e._id}),r.abrupt("return",c.removeAllMessages());case 13:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},t.reportChatMessage=function(e){var t=e.message,n=e.channelId,r=e.chatSlug;return function(){var e=(0,i.default)(a.default.mark((function e(u,i){var o,c,l,d,f;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i().publisherReducer.publisher.slug,c=(0,s.default)(i(),"loginReducer.anonymousUser"),l=(null===c||void 0===c?void 0:c.uid)||(null===c||void 0===c?void 0:c.userId),u({type:"REPORT_CHAT_MESSAGE_PENDING",channelId:n,message:t}),e.prev=4,e.next=7,me(o,r,n);case 7:return d=e.sent,e.next=10,d.reportMessage(t,l);case 10:return f=e.sent,u({type:"REPORT_CHAT_MESSAGE_FULFILLED",channelId:n,message:t}),e.abrupt("return",f);case 15:e.prev=15,e.t0=e.catch(4),u({type:"REPORT_CHAT_MESSAGE_REJECTED",channelId:n,message:t,error:e.t0});case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t,n){return e.apply(this,arguments)}}()},t.requestModeration=function(e){return function(){var t=(0,i.default)(a.default.mark((function t(r,u){var i,o,c;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then(n.bind(n,38719));case 2:return i=t.sent,o=i.fetchV2,c=(0,s.default)(u(),"publisherReducer.publisher"),r({type:"REQUEST_MODERATION_PENDING"}),t.prev=6,t.next=9,o.post("/data/moderation/request-mod-status",{siteId:c.uid,chatRoomId:e._id});case 9:r({type:"REQUEST_MODERATION_FULFILLED",chatSlug:e.slug}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(6),r({type:"REQUEST_MODERATION_REJECTED",error:t.t0});case 15:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e,n){return t.apply(this,arguments)}}()},t.sendFakeMessage=function(e,t,n,r){return function(a){var u,i,s,o,c=function(e,t){var n={};e.text&&""!==e.text.trim()&&(n.text=e.text);e.media&&(n.media=e.media);var r={event:t,owner:e.user.id||null,sender:{uid:e.user.id||null,anonymousId:e.user.anonymousId||null,displayName:e.user.name,name:e.user.name,photoURL:e.user.image},message:n,replyMessage:e.replyMessage||null,mentions:e.mentions||null,publisherId:e.publisherId||null,tempId:e.tempId};return r}(t,n);(c.createdAt=+new Date,c.shouldChangeOpacity=!!T.isEnabled()&&r,c.key=t.tempId,!T.isEnabled()&&null!==c&&void 0!==c&&null!==(u=c.message)&&void 0!==u&&null!==(u=u.media)&&void 0!==u&&u.isGif)&&(c.message.media={html:'<img src="'.concat(null===c||void 0===c||null===(i=c.message)||void 0===i||null===(i=i.media)||void 0===i?void 0:i.url,'" />'),providerName:"Image",providerUrl:"Image.com",thumbnailUrl:null===c||void 0===c||null===(s=c.message)||void 0===s||null===(s=s.media)||void 0===s?void 0:s.url,type:"photo",url:null===c||void 0===c||null===(o=c.message)||void 0===o||null===(o=o.media)||void 0===o?void 0:o.url});a({type:"SEND_CHAT_FAKE_MESSAGE",message:c,chatSlug:e})}},t.sendFakePrivateMessage=function(e){var t=e.channel,n=e.message;return function(e,r){var a=r().loginReducer.userData;e({type:"SEND_PRIVATE_CHAT_FAKE_MESSAGE",message:{message:n,createdAt:+new Date,key:"".concat(+new Date),sender:{uid:a._id,anonymousId:null,displayName:a.name,name:a.name,photoURL:(0,s.default)(a,"thumbnails.raw")}},channelId:t._id})}},t.sendMessage=function(e,t,r,u){return function(){var o=(0,i.default)(a.default.mark((function i(o,c){var l,d,f,p,h,v,_,y,g,m,b,E,S,w,x,I,A,R,C;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l=c().publisherReducer.publisher,d=c().loginReducer.userData,f=c().loginReducer.anonymousUser,p=d?{_id:d._id,name:d.name,image:null!==(h=null===(v=d.thumbnails)||void 0===v?void 0:v.raw)&&void 0!==h?h:void 0}:{_id:null!==(_=null===f||void 0===f?void 0:f.uid)&&void 0!==_?_:null===(y=t.user)||void 0===y?void 0:y.anonymousId,name:null!==(g=null===f||void 0===f?void 0:f.nickname)&&void 0!==g?g:null===(m=t.user)||void 0===m?void 0:m.name,image:null!==(b=t.user)&&void 0!==b&&b.image?t.user.image:void 0},E=l.slug,S="active"===(0,s.default)(l,"featureFlags.livechat_slowmode.status"),w={text:t.text,replyTo:t.replyMessage?t.replyMessage.key:void 0,mediaURL:t.media&&t.media.url?t.media.url:void 0,isGif:t.media&&t.media.isGif?t.media.isGif:void 0,tempId:t.tempId||void 0,sender:p,slowMode:S},o({type:"SEND_CHAT_MESSAGE_PENDING"}),x=(0,s.default)(e,"chatPreModerationIsEnabled",!1),a.prev=9,a.next=12,me(E,e.slug,u._id);case 12:return I=a.sent,a.next=15,I.sendMessage(w);case 15:return A=a.sent,o({type:"SEND_CHAT_MESSAGE_FULFILLED",payload:w,moderated:x,shouldRemoveMessageOpacity:"0"===A||"blocked"===A,chatSlug:e.slug}),a.next=19,n.e(7660).then(n.bind(n,57660));case 19:R=a.sent,C=R.CHAT_MESSAGE_PUBLISHED,(0,R.track)(C,{chatRoomId:e._id,isLiveblog:r&&!!r.key,isReply:!!t.replyMessage,position:r&&r.chatPosition,isChannel:!0}),a.next=28;break;case 25:a.prev=25,a.t0=a.catch(9),o({type:"SEND_CHAT_MESSAGE_REJECTED",error:a.t0});case 28:case"end":return a.stop()}}),i,null,[[9,25]])})));return function(e,t){return o.apply(this,arguments)}}()},t.sendMessageSoundNotification=q,t.sendMonetizationMessage=function(e,t,r,u){return function(){var s=(0,i.default)(a.default.mark((function i(s,o){var c,l,d,f,p;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=o().publisherReducer.publisher.slug,l={text:t.text,amount:t.amount,sender:t.sender},s({type:"SEND_CHAT_MESSAGE_PENDING"}),a.prev=3,a.next=6,me(c,e.slug,u._id);case 6:return d=a.sent,a.next=9,d.sendMonetizationMessage(l);case 9:return s({type:"SEND_CHAT_MESSAGE_FULFILLED",payload:l}),a.next=12,n.e(7660).then(n.bind(n,57660));case 12:f=a.sent,p=f.CHAT_MESSAGE_PUBLISHED,(0,f.track)(p,{chatRoomId:e._id,isLiveblog:!!r,isMonetizationMessage:!0}),a.next=21;break;case 18:a.prev=18,a.t0=a.catch(3),s({type:"SEND_CHAT_MESSAGE_REJECTED",error:a.t0});case 21:case"end":return a.stop()}}),i,null,[[3,18]])})));return function(e,t){return s.apply(this,arguments)}}()},t.sendPrivateMessage=function(e,t,r){var u=e.channel,o=e.patternUser,c=e.message,l=e.replyMessage,d=e.tempId;return function(){var e=(0,i.default)(a.default.mark((function e(i,f){var p,h,v,_,y,g,m,b,E;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=f().publisherReducer.publisher.slug,h=f().loginReducer.userData,v={message:c,tempId:d,shouldChangeOpacity:!0,createdAt:+new Date,key:"".concat(+new Date),sender:{uid:h._id,anonymousId:null,displayName:h.name,name:h.name,photoURL:(0,s.default)(h,"thumbnails.raw")}},i({type:"SEND_PRIVATE_CHAT_FAKE_MESSAGE",message:v,channelId:u._id}),e.next=6,le(p);case 6:if(_=e.sent,null!==u._id){e.next=13;break}return e.next=10,_.createUserPrivateChannel(o._id,c);case 10:return y=e.sent,R[y.channelId]=y,e.abrupt("return",y);case 13:return e.next=15,_.getPrivateChannel(u._id);case 15:return g=e.sent,m=l?l.key:void 0,e.next=19,n.e(7660).then(n.bind(n,57660));case 19:return b=e.sent,E=b.CHAT_MESSAGE_PUBLISHED,(0,b.track)(E,{chatRoomId:t._id,isLiveblog:r&&!!r.key,isReply:!!m,position:r&&r.chatPosition,isPrivate:!0}),e.next=25,g.sendMessage(c,m,d);case 25:"blocked"===e.sent&&i({type:"SET_USER_GROUP_CHANNEL_MESSAGE_FULFILLED",payload:v,shouldRemoveMessageOpacity:!0,channelId:u._id});case 27:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},t.setChatAlert=function(e,t){return function(n){return n({type:"SET_CHAT_ALERT",value:e,chatSlug:t})}},t.setChatClosed=function(e,t){return function(){var r=(0,i.default)(a.default.mark((function r(u){var i,s;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.resolve().then(n.bind(n,39732));case 2:i=r.sent,s=i.setChatHidden,u({type:"SET_CHAT_CLOSED",value:t,chatSlug:e}),s(t);case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},t.setChatLanguage=K,t.setChatListPrevUpdated=function(e,t){return function(n){return n({type:"SET_CHAT_LIST_PREV_UPDATED",value:t,chatSlug:e})}},t.setChatPopoutStatus=function(e,t,n){return function(r){!1===e&&r(B(t,P)),r({type:"SET_CHAT_POPOUT_STATUS",status:e,chatSlug:n})}},t.setChatSound=Q,t.setChatTab=oe,t.setChatWrapperContainer=function(e,t){return function(n){return n({type:"SET_CHAT_WRAPPER_CONTAINER",container:e,chatSlug:t})}},t.setFakeChannel=function(e,t){return function(n){return n({type:"SET_FAKE_CHANNEL",channel:t,chatSlug:e})}},t.setField=function(e,t){return function(n){return n({type:"SET_CHAT_FIELD",field:e,value:t})}},t.setHideChatTab=Te,t.setIsCreatePolls=ce,t.setNumNewMessages=function(e,t){return function(n){return n({type:"SET_NUM_NEW_MESSAGES",chatSlug:e,value:t})}},t.setPayloadUserToSetPresence=t.setPlaySoundEffect=function(e,t){return function(n){return n({type:"SET_PLAY_SOUND_EFFECT",chatSlug:e,value:t})}},t.setReplyMessage=function(e,t){return function(n){return n({type:"SET_REPLY_MESSAGE",chatSlug:e,value:t})}},t.setShowNewMessagesBubble=function(e,t){return ,t.showDeletePollModal=t.startPrivateChat=function(e,t){return function(){var n=(0,i.default)(a.default.mark((function n(r,u){var i,o,c,l,d,f;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=u().loginReducer.userData,o=u().loginReducer.arenaToken,c=u().loginReducer.isAuthenticated,i&&(l={_id:i._id,image:(0,s.default)(i,"thumbnails.raw"),isModerator:i.isModerator,name:i.name,status:"ONLINE",modLabel:i.modLabel,isBanned:i.isBanned}),d=[e],l&&d.push(l),f={_id:null,members:d},!(o&&c&&i)){n.next=11;break}return n.next=10,r(Le(f));case 10:f=n.sent;case 11:r(Te(t,!0)),r(oe(t,"private",f));case 13:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},t.subscribeUserToReminder=function(e,t,n){return function(){var r=(0,i.default)(a.default.mark((function r(u,i){var s,o,c,l,d;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t){r.next=2;break}return r.abrupt("return");case 2:return r.prev=2,u({type:"SET_USER_REMINDER_LOADING",chatSlug:e,value:!0}),s=i().publisherReducer.publisher.slug,r.next=7,le(s);case 7:return o=r.sent,r.next=10,null===o||void 0===o?void 0:o.getLiveChat(e);case 10:return c=r.sent,l=document.location.href,r.next=14,c.subscribeUserToReminder(t,l);case 14:d=r.sent,u({type:"SET_USER_REMINDER_FULFILLED",value:d,chatSlug:e}),r.next=21;break;case 18:r.prev=18,r.t0=r.catch(2),u(ke(e,t,n,!0));case 21:case"end":return r.stop()}}),r,null,[[2,18]])})));return function(e,t){return r.apply(this,arguments)}}()},t.switchChatChannel=function(e,t,n,r){return function(){var u=(0,i.default)(a.default.mark((function u(i,s){var o,c,l,d,f,p;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i({type:"SWITCH_CHAT_CHANNEL_PENDING",chatSlug:e,channel:n}),c=s().publisherReducer.publisher.slug,l=s().loginReducer.userData,d=s().loginReducer.anonymousUser,f=null!==(o=null===l||void 0===l?void 0:l._id)&&void 0!==o?o:d.uid,a.next=7,me(c,e,t);case 7:return a.sent.offAllChatConfigListeners(),a.next=11,N(c,e,n._id);case 11:return p=a.sent,i(B(p,e,P=20)),i(U(c,e,n._id,r)),i(Ae(e,p)),i(ue(p._id,f)),i({type:"SWITCH_CHAT_CHANNEL_FULFILLED",chatSlug:e,channel:p}),a.abrupt("return",p);case 19:case"end":return a.stop()}}),u)})));return function(e,t){return u.apply(this,arguments)}}()},t.toggleOpenChatRoom=function(e,t,r){return function(){var u=(0,i.default)(a.default.mark((function u(i,o){var c,l,d;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=!!r,a.next=3,n.e(7660).then(n.bind(n,57660));case 3:l=a.sent,d=l.CHAT_ROOM_OPENED,(0,l.track)(d,{widgetId:(0,s.default)(o(),"appReducer.widgetId",null),isLiveblog:c,position:c?r.chatPosition||"bottom":t,chatRoomId:e});case 7:case"end":return a.stop()}}),u)})));return function(e,t){return u.apply(this,arguments)}}()},t.toggleUserChatSound=function(e,t){return function(){var r=(0,i.default)(a.default.mark((function r(u,i){var s,o;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u(Q(e,t)),r.next=3,n.e(7660).then(n.bind(n,57660));case 3:s=r.sent,o=s.SOUND_ALERT_TOGGLED,(0,s.track)(o,{widgetId:i().appReducer["widgetId_".concat(e)]||null,widgetType:i().appReducer["widgetType_".concat(e)]||null,toggle:t});case 7:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},t.trackContentDetails=function(e){return se.apply(this,arguments)},t.unblockPrivateUser=function(e,t){return function(){var n=(0,i.default)(a.default.mark((function n(r,u){var i,s,o;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=u().publisherReducer.publisher.slug,n.next=3,le(i);case 3:return s=n.sent,n.next=6,s.unblockPrivateUser(e._id);case 6:return o=n.sent,r({type:"UNBLOCK_PRIVATE_USER_FULFILLED",userId:e._id,chatSlug:t}),n.abrupt("return",o);case 9:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},t.unlistenToPolls=Re,t.unlistenToPrivateChannel=ve,t.unlistenToPrivateChannelUnreadCount=function(){return function(){var e=(0,i.default)(a.default.mark((function e(t,n){var r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n().publisherReducer.publisher.slug,e.next=3,le(r);case 3:e.sent.offUnreadMessagesCountChanged();case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},t.unsubscribeUserToReminder=function(e,t){return function(){var n=(0,i.default)(a.default.mark((function n(r,u){var i,s,o,c,l;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:return n.prev=2,r({type:"SET_USER_REMINDER_LOADING",chatSlug:e,value:!0}),i=u().publisherReducer.publisher.slug,n.next=7,le(i);case 7:return s=n.sent,n.next=10,null===s||void 0===s?void 0:s.getLiveChat(e);case 10:return o=n.sent,c=document.location.href,n.next=14,o.unsubscribeUserToReminder(t,c);case 14:l=n.sent,r({type:"SET_USER_REMINDER_FULFILLED",value:!l,chatSlug:e}),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(2),r({type:"SET_USER_REMINDER_LOADING",chatSlug:e,value:!1});case 21:case"end":return n.stop()}}),n,null,[[2,18]])})));return function(e,t){return n.apply(this,arguments)}}()},t.updateUserProfile=function(e){return function(){var t=(0,i.default)(a.default.mark((function t(r,u){var i,s,o;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n(20888);case 2:return t.sent.arenaIdentify(e._id),i=u().publisherReducer.publisher.slug,t.next=7,le(i);case 7:return s=t.sent,t.next=10,s.updateUserProfile(e);case 10:return o=t.sent,r({type:"UPDATE_USER_DATA",user:{name:o.name,thumbnails:{raw:o.image}}}),t.abrupt("return",o);case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},t.votePoll=function(e,t,r,u,s){return function(){var o=(0,i.default)(a.default.mark((function i(o,c){var l,d,f,p,h,v;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return l=c().publisherReducer.publisher.slug,(d=c().loginReducer.anonymousUser)&&(f=d.uid),o({type:"VOTE_POLL_PENDING",chatSlug:e,pollId:t._id,optionIndex:r}),a.next=6,n.e(7660).then(n.bind(n,57660));case 6:return p=a.sent,h=p.POLL_VOTED,(0,p.track)(h,{pollId:t._id,widgetId:s,widgetType:"Livechat",option:t.options[r]}),a.next=12,xe(l,e,f,u);case 12:return v=a.sent,a.next=15,v.pollVote(t._id,r,f);case 15:o({type:"VOTE_POLL_FULFILLED",chatSlug:e,pollId:t._id,optionIndex:r});case 16:case"end":return a.stop()}}),i)})));return function(e,t){return o.apply(this,arguments)}}()};var a=r(n(87757)),u=r(n(59713)),i=r(n(48926)),s=r(n(27361)),o=r(n(23279)),c=r(n(23493)),l=n(51625),d=n(648),f=n(92936),p=n(2313),h=n(53640),v=n(46521),_=n(89123); b,E,S=!1,w=!0,x=[],I=null,A={},R={},C={},T=new f.RealTimeListener;t.presence={};var O=null;t.payloadUserToSetPresence=O;var P=20;function L(e,t,n,r,u){return function(){var o=(0,i.default)(a.default.mark((function i(o){var c,f;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:c=t.mainChannel,C[c._id]=c,o(B(c,t.slug,P)),o((function(e){var t=(0,p.getItem)("anonymousUserNickname");t&&e({type:"SET_CHAT_NICKNAME",chatNickname:t})})),o(W(e.uid)),n||o(K(t.language)),f=function(a){if(x.includes(t._id)){var i,d=null!==(i=null===a||void 0===a?void 0:a._id)&&void 0!==i?i:null===a||void 0===a?void 0:a.uid;o(G(a,t._id)),o(ue(c._id,d));var f=(0,s.default)((0,l.getState)(),"chatRoomReducer.chatRoom['".concat(t.slug,"'].reminderId"));o(ke(t.slug,f,!(null===a||void 0===a||!a.isAuthenticated)))}else x.push(t._id),o(k(e,t,a,n,r,u))},d.Auth.instance.authUserObservable$.subscribe(f);case 8:case"end":return a.stop()}}),i)})));return function(e){return o.apply(this,arguments)}}()}function k(e,t,n,r,u,o){return function(){var c=(0,i.default)(a.default.mark((function i(c){var d,f,p,h;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r){a.next=4;break}return a.next=3,c($({chatRoom:t,publisher:e,payloadUser:n}));case 3:I=a.sent;case 4:c({type:"INITIALIZE_APP_FULFILLED",chatRoom:t,user:n,isAuthenticated:!(null===n||void 0===n||!n.isAuthenticated),isAnonymous:!(null===n||void 0===n||!n.isAnonymous),userCountry:I,arenaToken:(null===n||void 0===n?void 0:n.arenaToken)||null}),c(V(t._id,t.slug,o,r,u)),d=t.mainChannel,c(U(e.slug,t.slug,d._id,u)),c(Ae(t.slug,d)),f=(0,s.default)((0,l.getState)(),"chatRoomReducer.chatRoom['".concat(t.slug,"'].reminderId")),c(ke(t.slug,f,!(null===n||void 0===n||!n.isAuthenticated))),c(j(t.slug,d._id)),t.useNewReactionAPI?c(ae(d._id,t)):(h=null!==(p=null===n||void 0===n?void 0:n._id)&&void 0!==p?p:null===n||void 0===n?void 0:n.uid,c(ue(d._id,h)));case 13:case"end":return a.stop()}}),i)})));return function(e){return c.apply(this,arguments)}}()}function U(e,t,n,r){return function(){var u=(0,i.default)(a.default.mark((function u(i){var s;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,me(e,t,n);case 2:(s=a.sent).watchChatConfigChanges((function(e){"function"===typeof r&&r(null,{channel:e}),T.set(!!e.disableRealtime)}),"ALL_CHAT_CHANGES"),i(D(s,t,n));case 5:case"end":return a.stop()}}),u)})));return function(e){return u.apply(this,arguments)}}()}function D(e,t,n){return function(){var n=(0,i.default)(a.default.mark((function n(r){return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.watchChatConfigChanges((function(e){r({type:"RECEIVED_PIN_MESSAGE",pinnedMessage:(null===e||void 0===e?void 0:e.pinnedMessage)||null,chatSlug:t})}),"PIN_MESSAGES");case 1:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}unction M(){return(M=(0,i.default)(a.default.mark((function e(t,n,r){var u,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=C[r]){e.next=9;break}return e.next=4,ye(t,n);case 4:return i=e.sent,e.next=7,i.getChannelData(r);case 7:u=e.sent,C[r]=u;case 9:return e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}unction F(){return(F=(0,i.default)(a.default.mark((function e(t,n){var r,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(t,n);case 2:return r=e.sent,e.next=5,r.getMainChannel();case 5:return u=e.sent,e.abrupt("return",u.channel);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return function(t){t({type:"INITIALIZE_APP_FULFILLED",user:e,isAuthenticated:!(null===e||void 0===e||!e.isAuthenticated),isAnonymous:!(null===e||void 0===e||!e.isAnonymous),arenaToken:(null===e||void 0===e?void 0:e.arenaToken)||null})}}function j(e){return function(){var t=(0,i.default)(a.default.mark((function t(n,r){var u,s;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=r().publisherReducer.publisher.slug,t.next=3,ye(u,e);case 3:(s=t.sent).watchCurrentUserChanged((0,i.default)(a.default.mark((function t(){var r;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.getUserList();case 2:(r=t.sent).length>1&&n({type:"CHAT_LIST_USERS_CHANGE",participantCount:r.length,participantList:r,newPresence:!0,chatSlug:e});case 4:case"end":return t.stop()}}),t)})))),s.watchOnlineCount((0,c.default)((function(t){n({type:"CHAT_RECEIVE_ONLINE_PARTICIPANTS",participantCount:t,chatSlug:e})}),2e3)),s.watchUserJoined((0,c.default)((function(t){n({type:"CHAT_USER_JOINED",user:t,chatSlug:e})}),2e3)),s.watchUserLeft((0,c.default)((,2e3));case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function V(e,t,r,u,s){return function(){var o=(0,i.default)(a.default.mark((function i(o){var c,d;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return E&&E(),c=(0,l.getState)().publisherReducer.publisher,a.next=4,Promise.all([n.e(894),n.e(5312),n.e(4287)]).then(n.bind(n,49517));case 4:d=a.sent,E=d.listenToChange({path:"chat-rooms/".concat(e),cb:function(e){e&&("boolean"!==typeof e.chatAutoOpen&&(e.chatAutoOpen=!0),"boolean"!==typeof e.reactionsEnabled&&(e.reactionsEnabled=!0),"boolean"!==typeof e.allowSendGifs&&(e.allowSendGifs=!0),"boolean"!==typeof e.showEmojiButton&&(e.showEmojiButton=!0),"boolean"!==typeof e.showOnlineUsersNumber&&(e.showOnlineUsersNumber=!0),"boolean"!==typeof e.chatPreviewEnabled&&(e.chatPreviewEnabled=!0)),s(null,{chatRoom:e});var n,a="/".concat(u?"liveblog":"chatroom","/").concat(c.slug,"/").concat(u?r:t),i=(0,h.getClientCache)(a),l=i;e&&(l=m(m({},i),{},{chatInfo:m(m({},null!==(n=null===i||void 0===i?void 0:i.chatInfo)&&void 0!==n?n:{}),e)}));(0,h.setClientCache)(a,l),o({type:"RECEIVE_CHAT_ROOM_CHANGES",chatRoom:e,chatSlug:t})}});case 6:case"end":return a.stop()}}),i)})));return function(e){return o.apply(this,arguments)}}()}function B(e,t,r){return function(){var u=(0,i.default)(a.default.mark((function u(s,o){var c,l,d,f,p,h,v;return a.default.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return v=function(){return(v=(0,i.default)(a.default.mark((function n(){return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,me(c,t,e._id);case 2:n.sent.offAllListeners();case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)},h=function(){return v.apply(this,arguments)},p=function(){return(p=(0,i.default)(a.default.mark((function n(){var u,i,o,l;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return l=function(e){z(s,t)(e),s(q(t,e,i))},n.next=3,me(c,t,e._id);case 3:return(u=n.sent).offAllListeners(),i=S,n.next=8,u.loadRecentMessages(r);case 8:o=n.sent,l(o),u.onMessageReceived((function(e){s({type:"ON_CHAT_MESSAGE_RECEIVED",message:e,chatSlug:t,pagination:r})})),u.onMessageModified((function(e){s({type:"ON_CHAT_MESSAGE_MODIFIED",message:e,chatSlug:t,pagination:r})})),u.onMessageDeleted(();case 13:case"end":return n.stop()}}),n)})))).apply(this,arguments)},f=c=o().publisherReducer.publisher.slug,u.next=7,n.e(1217).then(n.bind(n,71217));case 7:l=u.sent,d=l.ChatRoomVisibilityListener,setTimeout((,5e3),d.getInstance().registerWakeupListeners(t,(,h),f().then(();case 12:case"end":return u.stop()}}),u)})));return ()}function $(e){var t=e.chatRoom,r=e.publisher,u=e.payloadUser;return function(){var e=(0,i.default)(a.default.mark((function e(i){var s,o,c,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={publisher:r,chatRoom:t},null!==u&&void 0!==u&&u.isAnonymous?s.anonymousId=u._id||u.uid:u?s.userId=u._id||u.uid:s.anonymousId=+new Date,e.next=4,n.e(6955).then(n.bind(n,16955));case 4:return o=e.sent,c=o.fetchUserCountry,e.next=8,c();case 8:return l=e.sent,i({type:"FETCH_USER_COUNTRY_FULFILLED",data:{country:l}}),e.abrupt("return",l);case 11:case"end":return e.stop()}}),e)})));return ()}function K(e){return function(){var t=(0,i.default)(a.default.mark((function t(r){var u,i,s,o,c,l,d;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=6;break}return t.next=3,n.e(6725).then(n.bind(n,76725));case 3:u=t.sent,i=u.getCurrentLanguage,e=i();case 6:return t.next=8,n.e(6397).then(n.bind(n,6397));case 8:return s=t.sent,o=s.loadLanguageByModules,t.next=12,o(e,["CHAT"]);case 12:c=t.sent,l=c.locale,d=c.messages,r({type:"UPDATE_LOCALE",locale:l,messages:d});case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function W(e){return function(){var t=(0,i.default)(a.default.mark((function t(r){var u;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([n.e(894),n.e(5312),n.e(4287)]).then(n.bind(n,49517));case 2:u=t.sent,r({type:"FETCH_BANNED_USERS_PENDING"}),b=u.listenToChange({path:"banned-users",cb:J(r),where:[{arg1:"siteId",operator:"==",arg2:e}]});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function J(e){return function(t){e({type:"FETCH_BANNED_USERS_FULFILLED",bannedUsers:t})}}function z(e,t){return function(n){e({type:"CHAT_ALL_MESSAGES_RECEIVED",allMessages:n,pagination:P,chatSlug:t})}}function q(e,t,r){return function(){var u=(0,i.default)(a.default.mark((function u(i,o){var c,l,d,f,p,h,v,_,y;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c=(0,s.default)(o(),"loginReducer.userData"),l=(0,s.default)(o(),"loginReducer.anonymousUser.userId"),d=c&&c._id||l){a.next=5;break}return a.abrupt("return",!1);case 5:if(!w){a.next=13;break}return w=!1,a.next=9,Promise.all([n.e(9329),n.e(9104)]).then(n.bind(n,89104));case 9:return f=a.sent,p=f.verifyUserReply,i({type:"SET_CHAT_MESSAGES_AUDIO_PLAYED",messages:t.filter(()}),a.abrupt("return");case 13:if(r){a.next=15;break}return a.abrupt("return",!1);case 15:return h=(0,s.default)(o(),"chatRoomReducer.messagesAudioPlayed"),a.next=18,Promise.all([n.e(9329),n.e(9104)]).then(n.bind(n,89104));case 18:v=a.sent,_=v.verifyUserReply,(y=t.find((function(e){var t=_(e,d,c),n=h[e.key];return t&&!n})))&&i({type:"PLAY_CHAT_MESSAGE_REPLY_AUDIO",messageId:y.key,chatSlug:e});case 22:case"end":return a.stop()}}),u)})));return function(e,t){return u.apply(this,arguments)}}()}function Y(){return(Y=(0,i.default)(a.default.mark((function e(t,n,r){var u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me(t,n,r);case 2:null===(u=e.sent)||void 0===u||u.offAllListeners();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e,t){return function(n){return n({type:"SET_CHAT_SOUND",chatSlug:e,value:t})}}function X(){return(X=(0,i.default)(a.default.mark((function e(){var t,r,u,i,o,c,d,f,p,h,v;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,s.default)((0,l.getState)(),"loginReducer.anonymousUser"),r=(0,s.default)((0,l.getState)(),"chatRoomReducer.chatNickname"),u=(0,s.default)((0,l.getState)(),"loginReducer.isAuthenticated"),i=(0,s.default)((0,l.getState)(),"loginReducer.userData"),e.next=6,n.e(5067).then(n.bind(n,35067));case 6:if(o=e.sent,c=o.getUserAPIImage,d={},!u||!i){e.next=15;break}d.id=i._id,d.name=i.name,d.image=c(i),e.next=30;break;case 15:if(t&&(f=t.userId),!(t&&f&&t.nickname)){e.next=20;break}p=t.nickname,e.next=27;break;case 20:if(f){e.next=26;break}return e.next=23,Promise.all([n.e(894),n.e(749),n.e(4322),n.e(4222)]).then(n.bind(n,64222));case 23:h=e.sent,v=h.generatePushID,f=v();case 26:p=r;case 27:d.anonymousId=f,d.name=p,d.image=c(i);case 30:return e.abrupt("return",d);case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e){return ee.apply(this,arguments)}function ee(){return(ee=(0,i.default)(a.default.mark((function e(t){var r,u,i,s,o,c,d,f,p,h;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.message,u=t.reaction,i=t.chatRoom,s=t.chatPosition,o=t.eventSlug,c=t.tabSelected,d=(0,l.getState)().eventReducer["event_".concat(o)]||null,f=!!d,e.next=5,n.e(7660).then(n.bind(n,57660));case 5:p=e.sent,h=p.CHAT_MESSAGE_REACTED,(0,p.track)(h,{chatRoomId:i._id,isLiveblog:f,isReply:!!r.replyMessage,position:f?d.chatPosition||"bottom":s,reaction:u,isChannel:"private"!==c||void 0,isPrivate:"private"===c||void 0});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e,t,n){return ne.apply(this,arguments)}function ne(){return(ne=(0,i.default)(a.default.mark((function e(t,r,u){var i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return u({type:"FETCH_CHAT_USER_REACTIONS_FULFILLED",reactions:t,chatId:r}),e.next=5,n.e(385).then(n.bind(n,90385));case 5:(i=e.sent).removeItem("reactions-chat-".concat(r)),i.setJSONItem("reactions--chat-".concat(r),t);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(e,t,n){e&&n({type:"FETCH_CHAT_CHANNEL_REACTIONS_FULFILLED",reactions:e,chatId:t})}function ae(e,t){return function(){var n=(0,i.default)(a.default.mark((function n(r,u){var i,s;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=u().publisherReducer.publisher.slug,r({type:"FETCH_CHAT_REACTIONS_PENDING"}),n.next=4,me(i,t.slug,e);case 4:(s=n.sent).watchChannelReactions((function(e){re(e,t.id,r)})),s.watchUserReactions((),s.watchReactionsErrors((function(){r({type:"RECEIVE_CHAT_REACTION_ERROR"})}));case 8:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()}function ue(e,t){return function(){var r=(0,i.default)(a.default.mark((function r(u){var s;return a.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all([n.e(894),n.e(5312),n.e(4287)]).then(n.bind(n,49517));case 2:s=r.sent,u({type:"FETCH_CHAT_REACTIONS_PENDING"}),s.fetchAllItems({path:"reactions",where:[{arg1:"userId",operator:"==",arg2:t},{arg1:"openChannelId",operator:"==",arg2:e}]}).then(function(){var t=(0,i.default)(a.default.mark((function t(r){var i,s;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return u({type:"FETCH_CHAT_USER_REACTIONS_FULFILLED",reactions:i=r,chatId:e}),t.next=6,n.e(385).then(n.bind(n,90385));case 6:(s=t.sent).removeItem("reactions-chat-".concat(e)),s.setJSONItem("reactions--chat-".concat(e),i);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch(();case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}function ie(e){return e.filter((function(e){return e&&e.images&&e.images.original&&e.images.fixed_width})).map((function(e){return{id:e.id,thumbnail:e.images.fixed_width.url,orginal:e.images.original.url}}))}function se(){return(se=(0,i.default)(a.default.mark((function e(t){var r,u,i,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.contentId,u=t.contentUrl,e.next=3,n.e(7660).then(n.bind(n,57660));case 3:i=e.sent,s=i.CONTENT_DETAILS_VIEWED,(0,i.track)(s,{contentId:r,contentType:"chat-message",contentUrl:u});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(r){return r({type:"SET_CHAT_TAB",chatSlug:e,value:t,fakeChannel:n})}}unction le(e){return de.apply(this,arguments)}function de(){return(de=(0,i.default)(a.default.mark((function e(t){var r,u,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(749),n.e(7046),n.e(1824),n.e(9890)]).then(n.bind(n,59890));case 2:return r=e.sent,(u=A[t])||(i=r.default,u=new i({apiKey:t,envs:{API_V2_URL:v.API_V2_URL,ARENA_REALTIME_URL:v.ARENA_REALTIME_URL,CACHED_API:v.CACHE_API_URL,ARENA_URL:v.MAIN_URL,DEFAULT_AUTH_TOKEN:v.JWT_TOKEN,FIREBASE_APIKEY:v.FIREBASEV2_APIKEY,FIREBASE_AUTHDOMAIN:v.FIREBASEV2_AUTHDOMAIN,FIREBASE_PROJECT_ID:v.FIREBASEV2_PROJECT_ID,GRAPHQL_ENDPOINT:v.GRAPHQL_ENDPOINT,ENV:v.ENV,DD_SITE:v.DD_SITE,DD_LOGS_SESSION_SAMPLE_RATE:v.DD_LOGS_SESSION_SAMPLE_RATE,DD_RUM_SESSION_SAMPLE_RATE:v.DD_RUM_SESSION_SAMPLE_RATE,DD_RUM_REPLAY_SAMPLE_RATE:v.DD_RUM_REPLAY_SAMPLE_RATE,DD_RUM_TRACK_USER_INTERACTIONS:v.DD_RUM_TRACK_USER_INTERACTIONS,DD_RUM_TRACK_RESOURCES:v.DD_RUM_TRACK_RESOURCES,DD_RUM_TRACK_LONG_TASKS:v.DD_RUM_TRACK_LONG_TASKS,DD_RUM_DEFAULT_PRIVACY_LEVEL:v.DD_RUM_DEFAULT_PRIVACY_LEVEL,DD_LOGS_CLIENT_TOKEN:v.DD_LOGS_CLIENT_TOKEN,DD_RUM_APLICATION_ID:v.DD_RUM_APLICATION_ID,DD_RUM_CLIENT_TOKEN:v.DD_RUM_CLIENT_TOKEN,DD_SERVICE:v.DD_SERVICE,ARENA_CHAT_WS:v.ARENA_CHAT_WS}}),A[t]=u),e.abrupt("return",u);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(){return function(){var e=(0,i.default)(a.default.mark((function e(t,n){var r,u,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_GROUP_CHANNELS_PENDING"}),r=n().publisherReducer.publisher.slug,e.next=4,le(r);case 4:return u=e.sent,e.prev=5,e.next=8,u.getUserPrivateChannels();case 8:return i=e.sent,t({type:"FETCH_GROUP_CHANNELS_FULFILLED",userChannels:i}),e.abrupt("return",i);case 13:return e.prev=13,e.t0=e.catch(5),t({type:"FETCH_GROUP_CHANNELS_REJECTED",userChannels:[]}),e.abrupt("return",[]);case 17:case"end":return e.stop()}}),e,null,[[5,13]])})));return function(t,n){return e.apply(this,arguments)}}()}function pe(e,t){return he.apply(this,arguments)}function he(){return(he=(0,i.default)(a.default.mark((function e(t,n){var r,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=R[n]){e.next=9;break}return e.next=4,le(t);case 4:return u=e.sent,e.next=7,u.getPrivateChannel(n);case 7:r=e.sent,R[n]=r;case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(e){return var _e={};function ye(e,t){return ge.apply(this,arguments)}function ge(){return(ge=(0,i.default)(a.default.mark((function e(t,n){var r,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_e[n]){e.next=8;break}return e.next=4,le(t);case 4:return u=e.sent,e.next=7,u.getLiveChat(n);case 7:r=e.sent;case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e,t,n){return be.apply(this,arguments)}function be(){return(be=(0,i.default)(a.default.mark((function e(t,n,r){var u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye(t,n);case 2:if(u=e.sent,!r){e.next=5;break}return e.abrupt("return",u.getChannel(r));case 5:return e.abrupt("return",u.getMainChannel());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e,t,n){return Se.apply(this,arguments)}function Se(){return(Se=(0,i.default)(a.default.mark((function e(t,n,r){var u,i,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=(0,l.getState)().publisherReducer.publisher.slug,e.next=3,ye(u,n);case 3:return i=e.sent,e.next=6,i.getMembers(r,t);case 6:return s=e.sent,e.abrupt("return",s.sort((0,_.dynamicSort)("name")).sort((0,_.dynamicSort)("-status")));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var we={};unction Ie(){return(Ie=(0,i.default)(a.default.mark((function e(t,n,r,u){var i,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=we[u]){e.next=9;break}return e.next=4,me(t,n,u);case 4:return s=e.sent,e.next=7,s.getPollsInstance(r);case 7:i=e.sent,we[u]=i;case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e,t){return function(){var n=(0,i.default)(a.default.mark((function n(r){var u,i,s,o;return a.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=(0,l.getState)().publisherReducer.publisher.slug,n.next=3,me(u,e,t._id);case 3:return i=n.sent,n.next=6,i.fetchPinMessage();case 6:s=n.sent,o=s.pinnedMessage,r({type:"RECEIVED_PIN_MESSAGE",pinnedMessage:o,chatSlug:e});case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}function Re(){Object.keys(we).forEach((function(e){var t=we[e];t.offPollModified(),t.offPollReceived(),t.offPollDeleted()}))}function Ce(e){return function(){var t=(0,i.default)(a.default.mark((function t(n,r){var u,i,s;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u=r().publisherReducer.publisher.slug,t.next=3,le(u);case 3:return i=t.sent,t.next=6,i.createUserPrivateChannel(e._id);case 6:return s=t.sent,R[s.channelId]=s,t.abrupt("return",s);case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function Te(e,t){return function(n){return n({type:"SET_HIDE_CHAT_TAB",chatSlug:e,value:t})}}function Oe(e){return function(){var t=(0,i.default)(a.default.mark((function t(r,u){var i,o,c;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.resolve().then(n.bind(n,38719));case 2:return i=t.sent,o=i.fetchV2,c=(0,s.default)(u(),"publisherReducer.publisher"),r({type:"BAN_USER_PENDING"}),t.prev=6,t.next=9,o.post("/data/moderation/ban-user",{anonymousId:e.sender.anonymousId,image:e.sender.photoURL,name:e.sender.name,siteId:c.uid,userId:e.sender.uid});case 9:r({type:"BAN_USER_FULFILLED"}),t.next=16;break;case 12:throw t.prev=12,t.t0=t.catch(6),r({type:"BAN_USER_REJECTED",error:t.t0}),t.t0;case 16:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e,n){return t.apply(this,arguments)}}()}function Pe(e,t,r,u){return function(){var s=(0,i.default)(a.default.mark((function i(s){var o,c,d,f;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=(0,l.getState)().publisherReducer.publisher.slug,s({type:"DELETE_MESSAGE_PENDING"}),a.next=4,n.e(7660).then(n.bind(n,57660));case 4:return c=a.sent,d=c.CHAT_MESSAGE_DELETED,(0,c.track)(d,{isLiveblog:u&&!!u.key,isReply:!!e.replyMessage,position:u&&u.chatPosition,isChannel:!0}),a.prev=8,a.next=11,me(o,t.slug,r._id);case 11:return f=a.sent,a.next=14,f.deleteMessage(e);case 14:s({type:"DELETE_MESSAGE_FULFILLED"}),a.next=21;break;case 17:throw a.prev=17,a.t0=a.catch(8),s({type:"DELETE_MESSAGE_REJECTED"}),a.t0;case 21:case"end":return a.stop()}}),i,null,[[8,17]])})));return function(e){return s.apply(this,arguments)}}()}function Le(e){return function(){var t=(0,i.default)(a.default.mark((function t(r,u){var i,s,o,c,l;return a.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.e(3863).then(n.bind(n,13863));case 2:return i=t.sent,s=i.getGroupChannelInfo,o=u().loginReducer.userData,c=s(e,o),t.next=8,r(Ce(c.user));case 8:return l=t.sent,e._id=l.groupChannel._id,t.abrupt("return",e);case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}function ke(e,t,n,r){return function(){var u=(0,i.default)(a.default.mark((function u(i,s){var o,c,l,d,f,p;return a.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t){a.next=2;break}return a.abrupt("return");case 2:if(c=null===(o=s().chatRoomReducer.chatRoom[e])||void 0===o?void 0:o.isReminderLoading,!(r||n&&!c)){a.next=18;break}return i({type:"SET_USER_REMINDER_LOADING",chatSlug:e,value:!0}),l=s().publisherReducer.publisher.slug,a.next=8,le(l);case 8:return d=a.sent,a.next=11,null===d||void 0===d?void 0:d.getLiveChat(e);case 11:return f=a.sent,a.next=14,f.fetchUserReminderSubscription(t);case 14:p=a.sent,i({type:"SET_USER_REMINDER_FULFILLED",value:p,chatSlug:e}),a.next=19;break;case 18:n||i({type:"SET_USER_REMINDER_FULFILLED",value:!1,chatSlug:e});case 19:case"end":return a.stop()}}),u)})));return function(e,t){return u.apply(this,arguments)}}()}},20888:function(e,t,n){var r,a,u;e=n.nmd(e);var i,s=n(95318)(n(50008));i=function(){var e="undefined"!==typeof window?window:{},t=e.ARENA_HUB_CLIENT_ID,r="arena_hub_user_id",a="arena_hub_user_traits",u="arena_hub_arena_user_id",i=new m,s=new y,o=new _,c=null,l=[],d=[],f=[],p=new g;function h(t,n,r){t?n&&function(){var e=document.querySelector("#arena-live"),t=document.querySelector("#arena-chat"),n=document.querySelector(".arena-liveblog"),r=document.querySelector(".arena-chat"),a=document.querySelector(".arena-embed-widget"),u=document.querySelector(".arena-home-app"),i=document.querySelector(".arena-embed-frame");return!!e||!!t||!!n||!!r||!!a||!!u||!!i}()||(r&&r.googleAnalytics&&p.setConfig(r.googleAnalytics),l.indexOf(t)>-1||(l.push(t),c=t,v({type:"page",properties:S()}),n&&s.arenaUserId()&&v({type:"identify",traits:{}}),function(){if(e.arenaHub.execQueue){var t=e.arenaHub.execQueue;try{for(;t.length;){var n=t.shift();R[n.type].apply(null,n.arguments)}}catch(r){console.info("Can't execute user commands")}}}(),e.arenaHub.initCalled=!0)):console.error("Can't get the siteId")}function v(t){var r=s.anonymousId();if(!r)return d.push(t);if(c){var a=t.type,u=t.properties,i=t.event,o=t.traits;u=u||{};var l={userId:s.userId(),anonymousId:r,type:a,context:E(t.context),messageId:I(),timestamp:x(),writeKey:c,sentAt:x(),properties:u,arenaUserId:s.arenaUserId()};i&&(l.event=i),o&&(l.traits=o),u&&(l.properties=u),function(t){if(!new e.XMLHttpRequest)return!1;var r="{{arena_api_v2}}/collect";if(r.indexOf("{{")>=0){var a="https://api.arena.im/v2",u=n(46521);u&&u.API_V2_URL&&(a=u.API_V2_URL),r=r.replace("{{arena_api_v2}}",a)}b(r,t)}(l),p.isSettled()&&l.event&&p.send(l.event)}}ction m(){try{if(e.localStorage)return void(this.store={get:function(t){try{var n,r,a,u;r=null!==e&&void 0!==e&&null!==(n=e.localStorage)&&void 0!==n&&n.getItem?null===e||void 0===e||null===(a=e.localStorage)||void 0===a?void 0:a.getItem(t):null===e||void 0===e||null===(u=e.localStorage)||void 0===u?void 0:u.get(t);try{return r=JSON.parse(r)}catch(i){return r}}catch(i){return null}},set:function(t,n){try{var r;return"string"===typeof n||n instanceof String||(n=JSON.stringify(n)),null===e||void 0===e||null===(r=e.localStorage)||void 0===r?void 0:r.setItem(t,n)}catch(a){return null}},remove:function(t){try{var n;return null===e||void 0===e||null===(n=e.localStorage)||void 0===n?void 0:n.removeItem(t)}catch(r){return null}}});var t=function(){function e(e,t,n){"string"===typeof t||t instanceof String||(t=JSON.stringify(t));var r="";if(n){var a=new Date;a.setTime(a.getTime()+24*n*60*60*1e3),r="; expires="+a.toUTCString()}document.cookie=e+"="+(t||"")+r+"; path=/"}function t(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var a=n[r];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(t)){var u=a.substring(t.length,a.length);try{return u=JSON.parse(u)}catch(i){return u}}}return null}eturn{get:t,set:remove:n}}();this.store=t}catch(n){return console.log("cannot access the browser storage"),{get:function(){},set:function(){},remove:function(){}}}}function b(t,n){var r=new e.XMLHttpRequest;if(!r)return!1;r.open("POST",t),r.setRequestHeader("Content-Type","text/plain"),r.send(JSON.stringify(n))}function E(t){var n={library:{name:"arena-hub.min.js",version:"0.0.7"},page:S(),userAgent:navigator.userAgent,widgetId:o.id,widgetType:o.type,browserLanguage:e.navigator.userLanguage||e.navigator.language};return t&&Object.keys(t).forEach((),n}function S(){return{path:e.location.pathname,referrer:document.referrer,search:e.location.search,title:document.title,url:e.location.href}}function w(e){var t=document.createElement("iframe");t.style.display="none",t.src=e+"/arenahubframe",t.name="arena-hub-frame",document.body.appendChild(t)}unction I(){try{return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,()}catch(n){console.info("The browser doesn't support web cryptography")}var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,()}function A(e){var t=s.anonymousId();return t?(e&&e(t),t):f.push(e)}_.prototype.setId=function(e){return this.id=e,e},_.prototype.setType=y.prototype.identify=function(e,t){t=t||{};var n=s.userId();null!==n&&n!==e||(t=Object.assign({},s.traits()||{},t)),e&&s.userId(e),s.traits(t),v({type:"identify",traits:t})},y.prototype.arenaIdentify=function(e,t){e&&s.arenaUserId(e),t&&s.userId(t),v({type:"identify",traits:{}})},y.prototype.removeArenaIdentify=y.prototype.traits=function(e){return e?(i.set(a,e),e):(e=i.get(a))||null},y.prototype.userId=function(e){return e?(i.set(r,e),e):(e=i.get(r))?e+"":null},y.prototype.arenaUserId=function(e){return"undefined"!==typeof e?null===e?i.remove(u):(i.set(u,e),e):(e=i.get(u))||null},y.prototype.anonymousId=function(e){return"undefined"!==typeof e?null===e?void(this.anonymousIdValue=null):(this.anonymousIdValue=e,e):(e=this.anonymousIdValue)||null},g.prototype.setConfig=function(e){e.trackerName&&(this.trackerName=e.trackerName),e.trackerType&&(this.trackerType=e.trackerType),e.eventCategory&&(this.eventCategory=e.eventCategory),e.eventLabel&&(this.eventLabel=e.eventLabel)},g.prototype.isSettled=function(){return(e.ga||e.gtag||e._trackEvent)&&!!this.trackerType},g.prototype.send=function(t){try{switch(this.trackerType){case"web-tracking-analyticsjs":var n={hitType:"event",eventAction:t};this.eventCategory&&(n.eventCategory=this.eventCategory),this.eventLabel&&(n.eventLabel=this.eventLabel);var r="send";this.trackerName&&(r=this.trackerName+".send"),e.ga(r,n);break;case"web-tracking-gtagjs":var a={};this.eventCategory&&(a.event_category=this.eventCategory),this.eventLabel&&(a.event_label=this.eventLabel),e.gtag("event",t,a);break;case"web-tracking-gajs":e._trackEvent(this.eventCategory,t,this.eventLabel)}}catch(u){console.info("GA tracking method is not available")}},m.prototype.get=m.prototype.set=m.prototype.remove=var R={initialized:!0,initCalled:!1,track:identify:function(e,t){"string"===typeof e||e instanceof String?s.identify(e,t):s.identify(null,e)},init:h,arenaIdentify:removeArenaIdentify:function(){s.removeArenaIdentify()},setWidgetInfo:getAnonymousId:A};return function(){if("undefined"!==typeof window){var t=function(){var e="{{arena_url}}";if(e.indexOf("{{")>=0){var t="https://go.arena.im",r=n(46521);r&&r.MAIN_URL&&(t=r.MAIN_URL),e=e.replace("{{arena_url}}",t)}return e}();e.addEventListener("message",(function(e){if(e.origin===t&&"arena_hub_anonymous_id"===e.data.type){for(s.anonymousId(e.data.value);d.length;)v(d.shift());for(;f.length;)A(f.shift())}}),!1),"complete"!==document.readyState&&"loaded"!==document.readyState&&"interactive"!==document.readyState||w(t),e.addEventListener("DOMContentLoaded",(function(e){w(t)}))}}(),e.arenaHub?(e.arenaHub=Object.assign({},e.arenaHub,R),e.arenaHub.widgetId&&o.setId(e.arenaHub.widgetId),e.arenaHub.widgetType&&o.setType(e.arenaHub.widgetType),t?h(t,!0):e.arenaHub.clientId&&h(e.arenaHub.clientId,!0)):e.arenaHub=R,R},"object"===(0,s.default)(t)&&"object"===(0,s.default)(e)?e.exports=i():(a=[],void 0===(u="function"===typeof(r=i)?r.apply(t,a):r)||(e.exports=u))},648:function(e,t,n){var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.Auth=void 0;var a=r(n(87757)),u=r(n(48926)),i=r(n(34575)),s=r(n(93913)),o=r(n(59713)),c=r(n(27361)),l=n(72872),d=n(68774),f=n(31694),p=n(46521),h=n(98352),v=n(20888),_=function(){function e(){(0,i.default)(this,e),(0,o.default)(this,"currentUser",null),(0,o.default)(this,"authUserObservable$",new l.BehaviorSubject(null)),(0,o.default)(this,"_authProvider",void 0),(0,o.default)(this,"isSSO",!1),(0,o.default)(this,"isAnonymousSSO",!1)}return(0,s.default)(e,[{key:"init",value:function(e,t,n){if(this._publisher=e,this._isSSO(t)){this.isAnonymousSSO="active"===(0,c.default)(e,"featureFlags.arena_sso_anonymous.status");var r=(0,f.createSSOProvider)();this._authProvider=new r(e.slug,this.isAnonymousSSO,n),this.isSSO=!0}else this._authProvider=new d.ArenaProvider(e,n);this._authProvider.providerUserObservable$.subscribe(this._handleProviderUserChange.bind(this)),this._checkLoggedUser()}},{key:"signIn",value:function(){return this._authProvider.signIn()}},{key:"signOut",value:,{key:"hasAccount",value:function(){var e=(0,u.default)(a.default.mark((function e(t){var r,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(n,38719));case 2:return r=e.sent,u=r.fetchV2,e.abrupt("return",u.post("profile/hasaccount",{email:t,provider:"local"}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"providerLogin",value:function(){var e=(0,u.default)(a.default.mark((function e(t){var r,u,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(n,38719));case 2:return r=e.sent,u=r.fetchV2,e.next=6,u.post("profile/providerlogin",t);case 6:return i=e.sent,this._handleProfileResult(i),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchProfile",value:function(){var e=(0,u.default)(a.default.mark((function e(t){var r,u,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(n,38719));case 2:return r=e.sent,u=r.fetchV2,e.next=6,u.post("profile",t);case 6:return i=e.sent,this._handleProfileResult(i),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"authenticate",value:function(){var e=(0,u.default)(a.default.mark((function e(t){var r,u,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(n,38719));case 2:return r=e.sent,u=r.fetchV2,e.next=6,u.post("profile/authenticate",t);case 6:return i=e.sent,this._handleProfileResult(i),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"authenticateV1",value:function(){var e=(0,u.default)(a.default.mark((function e(t){var r,u,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(n,38719));case 2:return r=e.sent,u=r.fetch,e.next=6,u.post("authenticate",t);case 6:return i=e.sent,this._handleProfileResult(i),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isSSO",value:,{key:"_checkLoggedUser",value:function(){var e=(0,u.default)(a.default.mark((function e(){var t,r,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(6646).then(n.bind(n,36646));case 2:t=e.sent,r=t.loadCredentials,(u=r()).idToken&&this._setTokenHeaders(u.idToken);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_handleProfileResult",value:function(e){var t;if(null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&null!==(t=t.data)&&void 0!==t&&t.token){var n=e.data.data,r=n.token,a=n.user;this._setAuthInfo(r,a)}}},{key:"_setAuthInfo",value:function(){var e=(0,u.default)(a.default.mark((function e(t,n){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._saveCredentials(t,n),this._setTokenHeaders(t);case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_unsetAuthInfo",value:function(){var e=(0,u.default)(a.default.mark((function e(){return a.default.wrap((,e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_saveCredentials",value:function(){var e=(0,u.default)(a.default.mark((function e(t,r){var u,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(6646).then(n.bind(n,36646));case 2:u=e.sent,i=u.saveCredentials;try{i(JSON.stringify(r),t)}catch(a){console.info("Can't save user login on localStorage")}case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_removeCredentials",value:function(){var e=(0,u.default)(a.default.mark((function e(){var t,r;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(6646).then(n.bind(n,36646));case 2:t=e.sent,r=t.removeCredentials;try{r()}catch(a){console.info("Can't save user login on localStorage")}case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_handleProviderUserChange",value:function(){var e=(0,u.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentUser=t,null!==t&&void 0!==t&&t._id?(v.arenaIdentify(t._id),this._setTokenHeaders(t.arenaToken),this._saveCredentials(t.arenaToken,t)):(v.removeArenaIdentify(),this._unsetAuthInfo()),e.next=4,this._setArenaSDKUser(t);case 4:this.authUserObservable$.next(t);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setTokenHeaders",value:function(){var e=(0,u.default)(a.default.mark((function e(t){var r,u,i,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(n,38719));case 2:r=e.sent,u=r.setHeaders,i=null,s=p.AUTHORIZATION,"undefined"!==typeof navigator&&(i=(i=navigator.language||"en-us").toLowerCase()),t&&(s="Bearer ".concat(t)),u(s,i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_setArenaSDKUser",value:function(){var e=(0,u.default)(a.default.mark((function e(t){var n,r,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getArenaSDK)(this._publisher.slug);case 2:if(n=e.sent,!t||!t._id){e.next=7;break}return e.abrupt("return",n.setInternalUser({id:t._id,name:t.name,image:null===t||void 0===t||null===(r=t.thumbnails)||void 0===r?void 0:r.raw,email:null===t||void 0===t||null===(u=t.profile)||void 0===u?void 0:u.email,token:t.arenaToken,isModerator:t.isModerator}));case 7:return e.abrupt("return",n.setInternalUser(null));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"instance",get:]),e}();t.Auth=_,(0,o.default)(_,"_authInstance",void 0)},68774:function(e,t,n){var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.ArenaProvider=void 0;var a=r(n(87757)),u=r(n(48926)),i=r(n(34575)),s=r(n(93913)),o=r(n(59713)),c=n(72872),l=n(31095),d=n(86809),f=n(648);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(){function e(t,n){(0,i.default)(this,e),(0,o.default)(this,"providerUserObservable$",new c.Subject),(0,o.default)(this,"_currentUser",null),(0,o.default)(this,"_firstLoad",!0),(0,o.default)(this,"_chatRoomId",void 0),this._publisher=t,this._chatRoomId=n,l.updatedUserObservable$.subscribe(this._handleUpdateUser.bind(this)),l.authenticateUserObservable$.subscribe(this._handleAuthenticateUser.bind(this)),l.receivedSocialLoginObservable$.subscribe(this._handleSocialLogin.bind(this)),this._createUser()}return(0,s.default)(e,[{key:"_handleSocialLogin",value:function(){var e=(0,u.default)(a.default.mark((function e(t){var r,u,i,s,o,c,l;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(n,38719));case 2:return u=e.sent,i=u.fetchV2,e.next=6,i.post("profile/providerlogin",t);case 6:return null!==(s=e.sent)&&void 0!==s&&null!==(r=s.data)&&void 0!==r&&null!==(r=r.data)&&void 0!==r&&r.token&&(o=s.data.data,c=o.token,l=o.user,this._handleAuthenticateUser({user:l,token:c,isSignup:!1})),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_emitUserChange",value:function(e){f.Auth.instance._setArenaSDKUser(e),this._currentUser=e,this.providerUserObservable$.next(e)}},{key:"_handleUpdateUser",value:function(){var e=(0,u.default)(a.default.mark((function e(t){var r,u;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(7660).then(n.bind(n,57660));case 2:r=e.sent,u=r.USER_UPDATED_PROFILE,(0,r.track)(u),this._emitUserChange(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_handleAuthenticateUser",value:function(){var e=(0,u.default)(a.default.mark((function e(t){var r,u,i;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isSignup){e.next=7;break}return e.next=3,n.e(7660).then(n.bind(n,57660));case 3:r=e.sent,u=r.USER_SIGNED_UP,(0,r.track)(u,{provider:t.provider,newUserId:t.newUserId});case 7:i=h(h({},t.user),{},{arenaToken:t.token,isAuthenticated:!0,isAnonymous:!1}),this._emitUserChange(i);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_sendToParent",value:function(e){var t,n=null===(t=this._publisher)||void 0===t?void 0:t.publisherOrigin;if(window.self!==window.top){var r=(window.location!==window.parent.location?document.referrer?document.referrer:n:document.location.href).split("/"),a="".concat(r[0],"//").concat(r[2]);window.parent.postMessage({type:"authenticate",data:e},a),window.parent.postMessage({type:"action",data:"close"},a)}}},{key:"_onUserChange",value:function(){var e=(0,u.default)(a.default.mark((function e(t){var n;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,!t||!t.uid){e.next=7;break}return e.next=4,this._createUser(t);case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,this._createAnonymousUser();case 9:n=e.sent;case 10:this._emitUserChange(n);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_createUser",value:function(){var e=(0,u.default)(a.default.mark((function e(t){var r,u,i,s,o,c,l,d,f,p,v;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(6646).then(n.bind(n,36646));case 2:if(i=e.sent,s=i.loadCredentials,(o=s()).idToken&&(null!==(r=o.arenaProfile)&&void 0!==r&&r.uid||null!==(u=o.arenaProfile)&&void 0!==u&&u._id)){e.next=15;break}return e.next=8,Promise.all([n.e(894),n.e(8065)]).then(n.bind(n,58065));case 8:return e.sent.signOut(),e.next=12,this._createAnonymousUser();case 12:return c=e.sent,this._emitUserChange(c),e.abrupt("return",c);case 15:return e.next=17,Promise.resolve().then(n.bind(n,38719));case 17:return l=e.sent,(0,l.setHeaders)(o.idToken,"en-us"),t=o.arenaProfile,e.prev=21,e.next=24,Promise.resolve().then(n.bind(n,38719));case 24:return d=e.sent,f=d.fetchV2,e.next=28,f.get("profile/".concat(t.uid||t._id,"?siteId=").concat(this._publisher.uid,"&chatRoomId=").concat(this._chatRoomId));case 28:return p=e.sent,v=h(h({},p.data),{},{arenaToken:o.idToken,isAuthenticated:!0,isAnonymous:!1}),this._emitUserChange(v),e.abrupt("return",v);case 34:return e.prev=34,e.t0=e.catch(21),e.next=38,Promise.all([n.e(894),n.e(8065)]).then(n.bind(n,58065));case 38:return e.sent.signOut(),e.abrupt("return",this._createAnonymousUser());case 41:case"end":return e.stop()}}),e,this,[[21,34]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_createAnonymousUser",value:function(){var e=(0,u.default)(a.default.mark((function e(){var t,r,u,i,s,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(n,2313));case 2:if(t=e.sent,r=t.getItem("anonymousUserId"),u=t.getItem("anonymousUserNickname"),r){e.next=12;break}return e.next=8,Promise.all([n.e(894),n.e(749),n.e(4322),n.e(4222)]).then(n.bind(n,64222));case 8:i=e.sent,s=i.generatePushID,r=s(),t.setItem("anonymousUserId",r);case 12:return o={uid:r,name:u||null,isBanned:!1,isAnonymous:!0,isAuthenticated:!1,isModerator:!1},e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"signIn",value:function(){var e=(0,u.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!==(t=this._currentUser)&&void 0!==t&&t.isAnonymous?(0,l.openLoginModal)("default"):(0,l.editCurrentUser)();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=(0,u.default)(a.default.mark((function e(){var t,r,u,i,s;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(6646).then(n.bind(n,36646));case 2:return t=e.sent,r=t.removeCredentials,e.next=6,n.e(1535).then(n.bind(n,31535));case 6:return u=e.sent,i=u.default,(new i).logout(),this._sendSignOutMessage(),r(),e.next=14,this._createAnonymousUser();case 14:s=e.sent,this._emitUserChange(s);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_sendSignOutMessage",value:function(){var e=(0,d.getPublisherURL)();if(e){var t=e.split("/"),n="".concat(t[0],"//").concat(t[2]);window.parent.postMessage({type:"action",data:"sign_out"},n)}}}]),e}();t.ArenaProvider=v},86196:function(e,t,n){var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.GloboIDProvider=void 0;var a=r(n(87757)),u=r(n(68551)),i=r(n(48926)),s=r(n(34575)),o=r(n(93913)),c=r(n(81506)),l=r(n(2205)),d=r(n(78585)),f=r(n(29754)),p=r(n(59713)),h=n(71336),v=n(10276);ar y="globoid",g=function(e){(0,l.default)(n,e);var t=_(n);function n(){var e;return(0,s.default)(this,n),e=t.call(this,y),(0,p.default)((0,c.default)(e),"_currentUser",null),window.cq=window.cq||[],window.cq.push({ready:function(){window.Cadun.Event.subscribe("userInfoAvailable",(function(t){null!==e._currentUser&&t.status===e._currentUser.status||(e._handleNewGloboUser(t),e._currentUser=t)}))}}),(0,h.globoAdsListener)(),e}return(0,o.default)(n,[{key:"_handleNewGloboUser",value:function(){var e=(0,i.default)(a.default.mark((function e(t){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"authorized"===t.status?this._authenticate(t):this._authenticate(null),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getAuthorizedUser",value:function(e){var t=e.name.split(" "),n=(0,u.default)(t),r=n[0],a=n.slice(1);return{provider:y,username:e.email,profile:{urlName:"".concat(Date.now()),email:e.email,username:e.email,displayName:e.name,name:{familyName:a.join(" "),givenName:r},profileImage:e.picture,id:e.globoId}}}},{key:"signOut",value:function(){var e=(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.providerUserObservable$.next(null),window.Cadun.logout((function(){window.location.reload()}));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"signIn",value:function(){var e=(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.Cadun.login(7042,window.location.href,!1,(,(function(){}),{_ga:"valor",glbProduct:"valor"});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),n}(v.SSOProvider);t.GloboIDProvider=g},31694:function(e,t,n){var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.createSSOProvider=t.isSSOProvider=function(e,t){return s()||e||"undefined"===typeof e&&"active"===(0,a.default)(t,"featureFlags.arena_sso.status")};var a=r(n(27361)),u=n(86196),i=n(10276);function s(){var e;return null===(e=window)||void 0===e||null===(e=e.location)||void 0===e||null===(e=e.host)||void 0===e?void 0:e.includes("globo.com")}},10276:function(e,t,n){var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.SSOProvider=void 0;var a=r(n(87757)),u=r(n(68551)),i=r(n(48926)),s=r(n(34575)),o=r(n(93913)),c=r(n(59713)),l=n(72872);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,c.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=n(20888),h=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;(0,s.default)(this,e),(0,c.default)(this,"_isAnonymousSSO",!1),(0,c.default)(this,"_providerId",null),(0,c.default)(this,"_chatRoomId",null),(0,c.default)(this,"_externalSingIn",(function(){})),(0,c.default)(this,"_externalSingOut",(function(){})),(0,c.default)(this,"providerUserObservable$",new l.Subject),this._providerId=t,this._createGlobalObject(),this._initializeUser(),this._isAnonymousSSO=n,this._chatRoomId=r}return(0,o.default)(e,[{key:"_initialize",value:function(e){if("function"!==typeof e.signIn||"function"!==typeof e.signOut)throw new Error("Illegal argument");this._signOutFromFibase(),this._externalSingIn=e.signIn,this._externalSingOut=e.signOut}},{key:"signIn",value:function(){var e=(0,i.default)(a.default.mark(());return function(){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.providerUserObservable$.next(null),this._externalSingOut();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_signOutFromFibase",value:function(){var e=(0,i.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(894),n.e(8065)]).then(n.bind(n,58065));case 2:e.sent.signOut();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_initializeUser",value:function(){var e=(0,i.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._createAnonymousUser();case 2:t=e.sent,this.providerUserObservable$.next(t),this._emitReadyEvent();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_createAnonymousUser",value:function(){var e=(0,i.default)(a.default.mark((function e(){var t,r,u,i,s,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(n.bind(n,2313));case 2:if(t=e.sent,r=t.getItem("anonymousUserId"),u=t.getItem("anonymousUserNickname"),r){e.next=12;break}return e.next=8,Promise.all([n.e(894),n.e(749),n.e(4322),n.e(4222)]).then(n.bind(n,64222));case 8:i=e.sent,s=i.generatePushID,r=s(),t.setItem("anonymousUserId",r);case 12:return o={uid:r,name:u||null,isBanned:!1,isAnonymous:!0,isAuthenticated:!1,isModerator:!1},e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_authenticate",value:function(){var e=(0,i.default)(a.default.mark((function e(t){var r,u,i,s,o,c,l,d;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof t&&null!==t||this.providerUserObservable$.next(null),!this._isAnonymousSSO||t.name){e.next=3;break}throw new Error("Illegal argument");case 3:if(!this._isAnonymousSSO){e.next=11;break}return e.next=6,Promise.all([n.e(894),n.e(749),n.e(4322),n.e(4222)]).then(n.bind(n,64222));case 6:return u=e.sent,i=u.generatePushID,s={uid:null!==(r=t.id)&&void 0!==r?r:i(),name:t.name,isBanned:!1,isModerator:!1,isAuthenticated:!1,isAnonymous:!0,thumbnails:{raw:t.picture}},this.providerUserObservable$.next(s),e.abrupt("return",s);case 11:if(t.id&&t.email&&t.name){e.next=13;break}throw new Error("Illegal argument");case 13:return e.next=15,Promise.resolve().then(n.bind(n,38719));case 15:return o=e.sent,c=o.fetchV2,e.next=19,c.post("/profile/ssoexchange",f(f({},this._getAuthorizedUser(t)),{},{chatRoomId:this._chatRoomId||""}));case 19:return l=e.sent,d=this._getUserPayload(l.data.data,t),this.providerUserObservable$.next(f(f({},d.user),{},{arenaToken:d.arenaToken,isAuthenticated:!0,isAnonymous:!1})),p.arenaIdentify(d._id,d.externalUserId),p.arenaIdentify(d.user._id,d.externalUserId),e.abrupt("return",d.user);case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_signOut",value:,{key:"_getUserPayload",value:function(e,t){return{user:e.user,isAuthenticated:!0,firebaseUser:e.user,isAnonymous:!1,arenaToken:e.token,externalUserId:t.id}}},{key:"_getAuthorizedUser",value:function(e){var t=e.name.split(" "),n=(0,u.default)(t),r=n[0],a=n.slice(1),i={provider:this._providerId,username:e.email,profile:{urlName:"".concat(Date.now()),email:e.email,username:e.email,displayName:e.name,name:{familyName:a.join(" "),givenName:r},profileImage:e.picture,id:e.id,customProps:e.customProps}};return"isModerator"in e&&(i.isModerator=e.isModerator),i}},{key:"_emitReadyEvent",value:function(){var e;"function"===typeof Event?e=new window.Event("arena-im-api-ready"):"undefined"!==typeof document&&(e=document.createEvent("Event")).initEvent("arena-im-api-ready",!1,!1),document.dispatchEvent(e)}},{key:"_createGlobalObject",value:function(){window.arenaSSO={initialize:this._initialize.bind(this),authenticate:this._authenticate.bind(this),signOut:this._signOut.bind(this)}}}]),e}();t.SSOProvider=h},33072:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.setChatInputFocusObserver=function(e){r.next(e)};var r=new(n(72872).Subject);var a=r;t.default=a},31095:function(e,t,n){var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.authenticateUserObservable$=void 0,t.closeLoginModal=function(){l.next()},t.closeLoginModalObservable$=void 0,t.createUser=function(e){v.next(e)},t.createUserObservable$=void 0,t.editCurrentUser=t.editCurrentUserObservable$=void 0,t.openLoginModal=t.sendPublisherToLoginModalObservable$=t.receivedSocialLoginObservable$=t.openLoginModalObservable$=void 0,t.setSocialLogin=g,t.setSocialProfile=_,t.updatedUserObservable$=t.setSocialProfileObservable$=void 0;var a=r(n(87757)),u=r(n(48926)),i=n(72872),s=new i.Subject;t.updatedUserObservable$=s;var o=new i.Subject;t.authenticateUserObservable$=o;var c=new i.Subject;t.openLoginModalObservable$=c;var l=new i.Subject;t.closeLoginModalObservable$=l;var d=new i.Subject;t.sendPublisherToLoginModalObservable$=d;var f=new i.Subject;t.receivedSocialLoginObservable$=f;var p=new i.Subject;t.setSocialProfileObservable$=p;var h=new i.Subject;t.editCurrentUserObservable$=h;var v=new i.Subject;unction y(){return(y=(0,u.default)(a.default.mark((function e(t){var n,r,u,i,c;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("updateUser"===t.data.type)s.next(t.data.user);else if("authenticate"===t.data.type&&"string"!==typeof(null===(n=t.data)||void 0===n?void 0:n.data)){try{u=JSON.parse(t.data.data.authInfo.userStr),r=u._id}catch(a){console.info("Can't get user data")}o.next({newUserId:r,isSignup:"signup"===t.data.data.actionType,provider:t.data.data.provider,token:t.data.data.authInfo.token,user:t.data.data.user})}else"action"===t.data.type&&"close"===t.data.data?l.next():"action"===t.data.type&&"SEND_ME_THE_PUBLISHER"===t.data.data?d.next():"action"===t.data.type&&"register_social_profile"===t.data.data&&t.data.profile&&(_(t.data.profile),i=t.data.profile.provider,c=t.data.profile.profile,g(i,c));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e,t){f.next({provider:e,providerUserId:t.id,email:t.email&&t.email.toLowerCase(),accessToken:t.accessToken||t.token})}t.createUserObservable$=v,"undefined"!==typeof document&&window.addEventListener("message",(function(e){return y.apply(this,arguments)}),!1)},53640:function(e,t,n){var r=n(95318),a=n(50008);Object.defineProperty(t,"__esModule",{value:!0}),t.fetchCachedAPIData=function(e){return c.apply(this,arguments)},t.getClientCache=f,t.setClientCache=p;var u=r(n(87757)),i=r(n(48926)),s=n(2313));unction c(){return c=(0,i.default)(u.default.mark((function e(t){var r,a,i,s,o,c=arguments;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]&&c[1],e.next=3,l(r);case 3:if(a=e.sent,!(i=f(t))){e.next=7;break}return e.abrupt("return",i);case 7:return e.prev=7,e.next=10,Promise.resolve().then(n.bind(n,38719));case 10:return s=e.sent,o=s.fetchCache,e.next=14,o.get(t,a);case 14:i=(i=e.sent)&&i.data?i.data:f(t,!0),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(7),i=f(t,!0);case 21:return p(t,i),e.abrupt("return",i);case 23:case"end":return e.stop()}}),e,null,[[7,18]])}))),c.apply(this,arguments)}unction d(){return(d=(0,i.default)(u.default.mark((function e(t){var r,a;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=8;break}return e.next=3,Promise.resolve().then(n.bind(n,86809));case 3:return r=e.sent,a=r.getIframeOptions,e.abrupt("return",a());case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var n=JSON.parse(s.getItem("arena-cached-api-".concat(e))),r=n.timestamp,a=(new Date).getTime().toString();return!t&&function(e,t){var n=new Date(parseInt(e)),r=new Date(parseInt(t))-n;return Math.floor(r/1e3/60)}(r,a)>=10?null:n.value}catch(u){return null}}function p(e,t){try{var n={timestamp:(new Date).getTime().toString(),value:t};s.setItem("arena-cached-api-".concat(e),JSON.stringify(n))}catch(r){console.log("Cannot set cached-api cache.")}}},71336:function(e,t,n){var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.adsReady=w,t.getGloboVideoSizeExpanded=E,t.getMessageContainerWidth=g,t.globoAdsListener=function(){if(I)return;I=!0,document.addEventListener("adserver-ad-rendered",(function(e){try{var t,n,r,a,u=null===(t=document.getElementById(e.id_elemento))||void 0===t||null===(t=t.closest(".arena--ads-arena--message"))||void 0===t?void 0:t.parentElement;if(!u)return;if(null!==e&&void 0!==e&&null!==(n=e.evento_original)&&void 0!==n&&n.isEmpty)u.style.visibility="hidden",u.style.height="0";else null===u||void 0===u||null===(r=u.style)||void 0===r||delete r.visibility,null===u||void 0===u||null===(a=u.style)||void 0===a||delete a.height}catch(i){console.error("Cannot remove collapse globo ads",{error:i})}}),!1)},t.isMessageMediaWithGloboVideo=t.loadGloboVideoPlayerScript=function(){return y.apply(this,arguments)},t.renderAllGloboVideos=function(){var e=m(!1),t=g(),r=c.viewportWidth<450?t-56:t-150,a=r>500?500:r,u=Math.ceil(.5625*a);if(e.forEach((function(e){var t={width:a,height:u};b(e)&&(t=E(),e.style.margin="0 auto"),e.style.width="".concat(t.width,"px"),e.style.height="".concat(t.height,"px"),e.style.backgroundColor="black",e.style.backgroundImage="url('https://upload.wikimedia.org/wikipedia/commons/b/b9/Youtube_loading_symbol_1_(wobbly).gif')",e.style.backgroundPosition="center",e.style.backgroundSize="40px",e.style.backgroundRepeat="no-repeat"})),!window.WM)return;e.forEach((function(e){var t={width:a,height:u};b(e)&&(t=E()),e.setAttribute("data-rendered","true");var r=e.dataset.id,i=!1,s=new window.WM.Player({videosIDs:r,width:t.width,height:t.height,events:{onResize:function(e){window.screen&&window.screen.width&&window.screen.height&&(window.screen.width===e.width&&window.screen.height===e.height?((0,l.setVideoFullscreen)(!0),i=!0):i&&((0,l.setVideoFullscreen)(!1),i=!1))}}});s.attachTo(e),(0,f.isMobile)()||(0,f.isSmallDevice)()?function(e,t){(0,n(39732).subscribeChatVisibility)((),p.default.subscribe((function(e){!function(e){var t=m(!0),r=null===t||void 0===t?void 0:t[0],a=document.querySelector(".live-chat-room--container"),u=n(39732).chatVisibilityObservable$;r&&a&&(e?(a.style.maxHeight="100%",a.style.zIndex="100000"):T(u.value))}(e)})),document.addEventListener("scroll",(function(){var n=t.querySelector("[data-player]");(0,h.isInViewport)(t)?function(e){e.style.height="100%",e.style.width="100%",e.style.position="unset",e.style.paddingTop="unset",e.style.bottom="unset",e.style.left="unset",e.style.zIndex="unset",e.style.transform="unset",e.style.filter="unset"}(n):e.isPlaying()&&function(e){e.style.position="fixed",e.style.top="0",e.style.paddingTop="56.25%",e.style.height="0px",e.style.zIndex=R,e.style.filter="drop-shadow(0px 10px 25px rgba(0, 0, 0, 0.25))"}(n)}),{passive:!0})}(s,e):function(e,t){var n=function(){var e=document.createElement("div");return e.style.height="calc(100vh - 20px)",e.style.width="calc(100vw - 20px)",e.style.position="fixed",e.style.top="10px",e.style.left="10px",e.style.visibility="hidden",document.body.appendChild(e),e}();document.addEventListener("scroll",(function(){var r=t.querySelector("[data-player]");(0,h.isInViewport)(t)?function(e){A.x=0,A.y=0,e.style.height="100%",e.style.width="100%",e.style.position="unset",e.style.bottom="unset",e.style.left="unset",e.style.zIndex="unset",e.style.transform="unset"}(r):e.isPlaying()&&(!function(e,t){(0,d.default)("[data-player]").draggable({modifiers:[d.default.modifiers.restrictRect({restriction:e,endOnly:!0})],listeners:{move:function(e){e.stopPropagation(),A.x+=e.dx,A.y+=e.dy,C(t,A)}}})}(n,r),0===A.y&&0===A.x&&C(r))}),{passive:!0})}(s,e)}))},t.renderGloboAd=function(e){return x.apply(this,arguments)},t.rendererGloboAds=void 0;var a,u=r(n(87757)),i=r(n(48926)),s=r(n(27361)),o=r(n(90084)),c=n(90233),l=n(88075),d=r(n(68496)),f=n(22223),p=r(n(33072)),h=n(1177),v=n(46521),_=n(65380);function y(){return(y=(0,i.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,_.asyncLoad)(v.GLOBO_VIDEO_API_URL));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){if(a)return a;if("undefined"!==typeof window){var e=document.querySelector(".live-pbp--container"),t=(0,s.default)(e,"offsetWidth",null);return a=null!==t?t:null}}function m(e){return Array.from(document.querySelectorAll('[data-type="globo-videos"]'.concat(e?"":':not([data-rendered="true"])')))}unction E(){var e=c.viewportWidth<852?c.viewportWidth:852;return{width:e,height:Math.ceil(.5625*e)}}var S={};function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.default)((function(){var e=n.g.googletag;return!(!e||!e.pubadsReady)&&{done:!0,value:e}}),e)}function x(){return(x=(0,i.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S[t]){e.next=2;break}return e.abrupt("return");case 2:return S[t]=!0,e.next=5,w();case 5:n.g.bannerLazyLoading(t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}t.rendererGloboAds=S;var I=!1;var A={x:0,y:0};var R="10000";function C(e,t){e.style.height="180px",e.style.width="320px",e.style.position="fixed",e.style.bottom="10px",e.style.left="10px",e.style.transform="translate(".concat(t.x,"px, ").concat(t.y,"px)"),e.style.zIndex=R}function T(e){var t=m(!0),n=null===t||void 0===t?void 0:t[0],r=document.querySelector(".live-chat-room--container");n&&r&&(e?(0,f.isIOS)()?r.style.maxHeight="0px":r.style.maxHeight="40px":(0,h.isInViewport)(n)?r.style.maxHeight="100%":r.style.maxHeight="".concat(window.innerHeight-n.offsetHeight,"px"))}},86809:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.fetchSiteIntegrations=function(e){return(0,r.fetchCachedAPIData)("/sites/".concat(e,"/integrations")).then((function(e){var t=e,n=null;return t&&Array.isArray(t)&&t.forEach((function(e){if(e.enabled&&e.integrationMetadataId&&"Google Analytics"===e.integrationMetadataId.name){var t=e.settings;n={googleAnalytics:{}};var r=!1;t&&t.trackerType&&(n.googleAnalytics=t,r=!0),r||(n=null)}})),n}))},t.getIframeOptions=function(){var e=null;"undefined"!==typeof window&&window&&window.location!==window.parent.location&&(e=document.referrer);var t=null,n=null;if(e)t=encodeURIComponent(e);else{var r=a(document&&document.location&&document.location.href,"token");r?n=encodeURIComponent(r):t="null"}return{params:{referer:t,token:n}}},t.getParameterByName=a,t.getPublisherURL=function(){var e=null;try{"undefined"!==typeof window&&(e=window.location!==window.parent.location?document.referrer:document.location.href)}catch(t){console.error(t)}return e};var r=n(53640);,89123:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.dynamicSort=function(e){var t=1;"-"===e[0]&&(t=-1,e=e.substr(1));return function(n,r){return(n[e].toUpperCase()<r[e].toUpperCase()?-1:n[e].toUpperCase()>r[e].toUpperCase()?1:0)*t}}},1177:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isInViewport=function(e){var t,n=e.getBoundingClientRect(),r=document.querySelector(".glb-topo .floating-bar");return n.bottom>=(null!==(t=null===r||void 0===r?void 0:r.clientHeight)&&void 0!==t?t:0)}},65380:function(e,t,n){var r=n(34155);Object.defineProperty(t,"__esModule",{value:!0}),t.asyncLoad=function(e,t){return new Promise((function(n){var r=document,a="script",u=r.createElement(a),i=r.getElementsByTagName(a)[0];t&&(u.id=t),u.src=e,u.addEventListener("load",(,!1),i.parentNode.insertBefore(u,i)}))},t.getGlobalObject=function(){return u()?n.g:"undefined"!==typeof window?window:a},t.isNodeEnv=u,t.isSupportedProtocol=function(){var e=window.location.protocol+"//"+window.location.host;return/^(http|https):\/\//.test(e)};var a={};,92936:function(e,t,n){var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.RealTimeListener=void 0;var a=r(n(34575)),u=r(n(93913)),i=r(n(59713)),s=n(72872),o=function(){function e(){var t=this;(0,a.default)(this,e),(0,i.default)(this,"_disableRealtimeObeservable$",new s.BehaviorSubject(!1)),(0,i.default)(this,"_isInitialized",!1),(0,i.default)(this,"_listeners",[]),(0,i.default)(this,"_listenerCounter",0),this._disableRealtimeObeservable$.subscribe((function(e){e?t._listeners.forEach((function(e){return e.off()})):t._isInitialized&&t._listeners.forEach((),t._isInitialized=!0}))}return(0,u.default)(e,[{key:"isEnabled",value:,{key:"set",value:function(e){e!==this._disableRealtimeObeservable$.value&&this._disableRealtimeObeservable$.next(e)}},{key:"subscribe",value:function(e,t){this._listeners.length===this._listenerCounter&&this._disableRealtimeObeservable$.value&&(t(),this._listenerCounter=this._listenerCounter+1),this._listeners.push({on:e,off:t})}}]),e}();t.RealTimeListener=o},39732:function(e,t,n){var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.chatVisibilityObservable$=void 0,t.setChatHidden=t.subscribeChatVisibility=var a=r(n(63038)),u=n(72872),i=n(14857),s=r(n(25947)),o=new u.BehaviorSubject(!1);t.chatVisibilityObservable$=o;var c=(0,u.combineLatest)([o.pipe((0,i.startWith)(!1)),s.default]).pipe((0,i.debounceTime)(1e3),(0,i.map)((function(e){var t=(0,a.default)(e,2),n=t[0],r=t[1];return r||!r&&n})),(0,i.distinctUntilChanged)());t.default=c},25947:function(e,t,n){var r=n(95318);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(72872),u=n(14857),i=r(n(92147)),s=r(n(88075)),o=(0,a.combineLatest)([i.default.pipe((0,u.startWith)(!1)),s.default.pipe((0,u.startWith)(!1))]).pipe((0,u.map)((),(0,u.distinctUntilChanged)());t.default=o},88075:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.setVideoFullscreen=function(e){u.next(e)};var r=n(72872),a=n(14857),u=new r.Subject;var i=u=u.pipe((0,a.debounceTime)(1e3),(0,a.distinctUntilChanged)());t.default=i},92147:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(72872),a=n(14857),u=(0,r.fromEvent)(document,"visibilitychange").pipe((0,a.debounce)((),(0,a.map)((),(0,a.distinctUntilChanged)());t.default=u}}]);