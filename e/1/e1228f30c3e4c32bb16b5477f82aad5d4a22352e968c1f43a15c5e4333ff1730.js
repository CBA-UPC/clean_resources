var BundleFactory=function(e){"use strict";st{LOG_LEVEL:r,IS_PRODUCTION:s,TEST_MODE:o,BLINK_PAY_URL:a,BLINK_API_URL:l,PUBLIC_DATA_BASE_URL:c,BUILD_VERSION:u,BUILD_TIMESTAMP:h,WS_API_URL:d,GOOGLE_PAY_ENV:p,LINKEDIN_CLIENT_ID:m,GOOGLE_CLIENT_ID:g,FACEBOOK_CLIENT_ID:b,TWITTER_CLIENT_ID:f,SOUTHERN_THING_ALIAS:y,TNR_ALIAS:C,BAFFLER_ALIAS:S}={BUILD_VERSION:"5b692face3724c8091886e0d5756d112ab80e537",BUILD_TIMESTAMP:1706712289788,GOOGLE_CLIENT_ID:"1008707048613-2vmm9imdllrf8f5q7ui53qd2b4aucvo9.apps.googleusercontent.com",FACEBOOK_CLIENT_ID:"356180435225530",LINKEDIN_CLIENT_ID:"77z180k7pbxg1j",TWITTER_CLIENT_ID:"EV96Fmj64ExUBZZ0jzLAlsNhr",GOOGLE_PAY_ENV:"TEST",LOG_LEVEL:3,TEST_MODE:!1,SOUTHERN_THING_ALIAS:"southernthing.com",TNR_ALIAS:"newrepublic.com",BAFFLER_ALIAS:"thebaffler.com",BLINK_PAY_URL:"https://blink.net",BLINK_API_URL:"https://api.blink.net",WS_API_URL:"wss://ws.blink.net",PUBLIC_DATA_BASE_URL:"https://blink.net/json",IS_PRODUCTION:!0},E={widget:"widget",panel:"panel"},A={auth:"auth",subscribe:"subscribe",giftSubscription:"giftSubscription",payment:"payment",donation:"donation",shop:"shop",custom:"custom",newsletter:"newsletter",dashboard:"dashboard",empty:"empty"},w={cover:"cover",preview:"preview",popup:"popup",popupGate:"popupGate",banner:"banner"},T={none:"none",logo:"logo"},v=250,O=l+"/e/",D="blink-|-",R="facebook",P="google",I="twitter",L="linkedin",N="complete",_={userId:null,alwaysShowBalance:null,showOnboarding:null,subscription:null,activeRecurringDonation:null,latestOneTimeDonation:null,activeNewsletters:[],newsletterIds:[],metadata:{}};function x(){const e=["Android","webOS","iPad","iPhone","iPod","BlackBerry","Windows Phone"];for(let t of e)if(-1!==navigator.userAgent.indexOf(t))return!0;return!1}function M(e){return Math.min(...[...e.touches].map((e=>e.identifier)))}function B(e){const t=M(e);return[...e.touches].find((e=>e.identifier===t))}function k(e,t,i){void 0===i&&(i="client");let n=i+t;return e[n]?e[n]:e.touches?B(e)[n]:e.originalEvent?k(e.originalEvent,t,i):void console.warn("Couldn't find coordinates for event. Maybe wrong reference point? (client/page/screen)")}const U=new Map,H={isTouchDevice:function(){return!!("createTouch"in window.document||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0||"ontouchstart"in window)},isMobileDevice:x,isLandscape:function(){var e,t;if(window.orientation&&(-90===window.orientation||90===window.orientation))return!0;if(!x())return window.innerWidth>window.innerHeight;const i=x()&&(null==(e=window.screen)?void 0:e.width)||window.innerWidth,n=x()&&(null==(t=window.screen)?void 0:t.height)||window.innerHeight;return i>n||n<380},getEventTouchIdentifier:M,getEventTouch:B,getEventCoord:k,getEventX:function(e,t){return void 0===t&&(t="client"),k(e,"X",t)},getEventY:function(e,t){return void 0===t&&(t="client"),k(e,"Y",t)},getBrowser:function(){return window.opr&&opr.addons||window.opera||navigator.userAgent.indexOf(" OPR/")>=0?"Opera":"undefined"!=typeof InstallTrigger?"Firefox":Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0?"Safari":document.documentMode?"Internet Explorer":window.StyleMedia?"Edge":window.chrome&&window.chrome.webstore?"Chrome":"Unknown"},supportsEvent:function(e){if(!U.has(e)){var t=document.createElement("div");let n="on"+e;var i=n in t;i||(t.setAttribute(n,"return;"),i="function"==typeof t[n]),t=null,U.set(e,i)}return U.get(e)}},z="short",F=z,V=450,G=650,W=[5,10,20,50],j="login",Y="login-with-email-code";unction Z(e){if(null!=e&&!1!==e)return e}function q(e){for(;ie(e);)e=e();return Z(e)}function $(e,t){if(void 0===t&&(t=Z),null==e||!1===e)return[];Array.isArray(e)||(e=e[Symbol.iterator]&&!se(e)?Array.from(e):[e]);let i=[];for(const n of e){if(null==n)continue;const e=Array.isArray(n)?n:t(n);if(null!=e)if(Array.isArray(e)){const n=$(e,t);for(const e of n)i.push(e)}else i.push(e)}let n=i.length===e.length;for(let t=0;n&&t<i.length;t+=1)i[t]!==e[t]&&(n=!1);return n?e:i}function X(e,t,i){return void 0===t&&(t=self.location.host),void 0===i&&(i=self.location.origin),!e||(e.startsWith("//")?e.startsWith("//"+t):!new RegExp("^(?:[a-z]+:)?//","i").test(e)||e.startsWith(i))}function J(e,t){return re(e)?e+t:e}function Q(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}function ee(e,t){if(e.length>t){const i=e.substring(0,t)+`...[${e.length} initial chr.]`;i.length<e.length&&(e=i)}return e}ction re(e){return"number"==typeof e||e instanceof Number}unction oe(e){return!(!e||"object"!=typeof e||e.constructor&&e.constructor!=Object)}function ae(e,t){return null!=t}function le(e,t){return null!=t&&""!==t}function ce(e,t){let{skipEmptyString:i=!0,filterFunc:n=null,emptyAsNull:r=!1}=void 0===t?{}:t;const s={};n||(n=i?le:ae);for(const[t,i]of Object.entries(e))n(t,i)&&(s[t]=i);return r&&0===Object.keys(s).length?null:s}function ue(){let e=arguments[0]||{};"object"!=typeof e&&"function"!=typeof e&&(e={});for(let t=1;t<arguments.length;t+=1){let i=arguments[t];if(null!=i)for(let[t,n]of Object.entries(i))if(n&&oe(n)||Array.isArray(n)){let i,r=e[t];i=Array.isArray(n)?r&&Array.isArray(r)?r:[]:r&&oe(r)?r:{},e[t]=ue(i,n)}else e[t]=n}return e}function he(e){let t="";for(let i=0;i<e.length;i++)"A"<=e[i]&&e[i]<="Z"?(i>0&&(t+="-"),t+=e[i].toLowerCase()):t+=e[i];return t==e?e:t}function de(e){let t=(document.cookie||"").split(";");for(let i of t)if(i=i.trim(),i.startsWith(e+"="))return i.substring(e.length+1);return""}function pe(e,t,i,n){void 0===i&&(i=14400);let r=`${e}=${t}; path=/; max-age=${i}; ${"http:"===window.location.protocol?"":"SameSite=None; Secure; "}`;n&&n.trim().length&&(r+=`domain=${n};`),document.cookie=r}function me(){let e=arguments.length<=0?void 0:arguments[0];for(let t=1;t<arguments.length;t+=1)e=e.replaceAll("%"+t,t<0||arguments.length<=t?void 0:arguments[t]);return e}function ge(e,t){let i=String(e);for(;i.length<t;)i="0"+i;return i}function be(e){return e+function(e){let t=["th","st","nd","rd"],i=e%10;return!(Math.floor(e/10)%10==1)&&t[i]||t[0]}(e)}const fe=function ye(){return(-1!==navigator.userAgent.indexOf("Firefox")||-1!==navigator.userAgent.indexOf("FxiOS"))&&-1===navigator.userAgent.indexOf("Chrome")}function Ce(){let e=ye(),t=navigator.userAgent.indexOf("Safari")>-1;return(navigator.userAgent.indexOf("Chrome")>-1||e)&&(t=!1),t}function Se(e,t){let{maxIter:i=32,args:n=null,allowUnresolved:r=!1}=void 0===t?{}:t;for(;i>0&&ie(e);)e=e(...n),i-=1;return r||0!==i||console.error("Failed to resolve value to a non-function"),e}class CallModifier{alloFunction(){return e=>this.wrap(e)}}class CallThrottler extends CallModifier{constructor(e){void 0===e&&(e={}),super(),this.lastCallTime=0,this.pendingCall=null,this.pendingCallArgs=[],this.pendingCallExpectedTime=0,this.numCalls=0,this.totalCallDuration=0,Object.assign(this,e)}ncel(){this.pendingCall&&this.pendingCall.cancel(),this.clearPendingCall()}leanup(){this.cancel()}computeExecutionDelay(e){let t=null;return null!=this.throttle&&(t=Math.max(this.lastCallTime+this.throttle-e,0)),null!=this.debounce&&(t=Math.min(null!=t?t:this.debounce,this.debounce)),t}replacePendingCall(e,t,i){if(this.cancel(),this.isThrottleOnAnimationFrame()){const i=requestAnimationFrame(t);return void(e.cancel=()=>cancelAnimationFrame(i))}const n=Date.now();let r=this.computeExecutionDelay(n);if(this.dropThrottled)return 0==r&&t();const s=setTimeout(t,r);e.cancel=()=>clearTimeout(s),this.pendingCall=e,this.pendingCallArgs=i,this.pendingCallExpectedTime=n+r}updatePendingCall(e){if(this.pendingCallArgs=e,!this.isThrottleOnAnimationFrame()){const e=Date.now();this.pendingCallExpectedTime=e+this.computeExecutionDelay(e)}}wrap(e){var t=this;const i=()=>{const t=Date.now();!this.isThrottleOnAnimationFrame()&&t+1<this.pendingCallExpectedTime?this.replacePendingCall(n,i,this.pendingCallArgs):(this.lastCallTime=t,this.clearPendingCall(),e(...this.pendingCallArgs))},n=function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return t.pendingCall&&e===t.pendingCall.originalFunc?t.updatePendingCall(s):t.replacePendingCall(n,i,s)};return n.originalFunc=e,n.cancel=fe,n.flush=()=>{n===this.pendingCall&&(this.cancel(),n())},n}}CallThrottler.ON_ANIMATION_FRAME=Symbol(),CallThrottler.AUTOMATIC=Symbol();const Ee={};function Ae(e,t){if(typeof e!=typeof t)return!1;if(null==e||null==t)return e===t;if(!oe(e)&&!Array.isArray(e))return e===t;const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!1;for(const n of i)if(!Ae(e[n],t[n]))return!1;return!0}function we(e){return function(e){try{return JSON.parse(e)}catch(t){try{return JSON.parse(decodeURIComponent(e))}catch(t){try{return decodeURIComponent(e)}catch(e){return null}}}}(new URLSearchParams(window.location.search).get(e))}function Te(){var e;return null!=(e=Ee.iFrameState)&&e.screen&&x()?Ee.iFrameState.screen.width:window.screen&&x()?window.screen.width:window.innerWidth}function ve(){var e;return null!=(e=Ee.iFrameState)&&null!=(e=e.screen)&&e.isEmulatorScreen?Ee.iFrameState.screen.width<=V:window.screen&&x()?Te()<=V:Te()<=G}function Oe(e,t){return void 0===e&&(e=""),void 0===t&&(t="_blank"),window.open(e,t,"opener")}function De(e,t){let i=null;return()=>{null!=i&&clearTimeout(i),i=setTimeout((,t)}}let Re=null;unction Ie(e){if(!e)return;let t="",i="";for(;e&&e!==document.body;e=e.parentNode){t=e.className.split(" ").map((e=>e?"."+CSS.escape(e):"")).join("")+(e.id?"#"+CSS.escape(e.id):"")+i+t;let n=e.tagName.toLowerCase();if(1===document.querySelectorAll(n+t).length)return n+t;i=e.parentNode?`>:nth-child(${[...e.parentNode.children].indexOf(e)+1})`:""}return e?e.tagName.toLowerCase()+t:t}class DispatcherHandle{emove(){this.dispatcher?(this.dispatcher.removeListener(this.callback),this.dispatcher=void 0,this.callback=void 0):console.warn("Removing a dispatcher twice")}cleanup(){this.remove()}}class Dispatcher{constructor(e){void 0===e&&(e={}),this.options=e,this.listeners=[]}callbackExists(e){for(let t=0;t<this.listeners.length;t+=1)if(this.listeners[t]===e)return!0;return!1}addListener(e){if("function"==typeof e){if(!this.callbackExists(e))return this.listeners.push(e),new DispatcherHandle(this,e);console.error("Can't re-register for the same callback: ",this," ",e)}else console.error("The listener needs to be a function: ",e)}addListenerOnce(e){let t=this.addListener((function(){e(...arguments),t.remove()}));return t}async awaitOnce(){return new Promise((e=>this.addListenerOnce(()))}removeListener(e){for(let t=0;t<this.listeners.length;t+=1)if(this.listeners[t]===e)return this.listeners.splice(t,1)[0]}ispatch(e){for(let e=0;e<this.listeners.length;){let t=this.listeners[e];t(...arguments),t===this.listeners[e]&&e++}}}const Le=Symbol("Dispatchers");class Dispatchable{etDispatcher(e,t){void 0===t&&(t=!0);let i=this.dispatchers.get(e);return!i&&t&&(i=new Dispatcher,this.dispatchers.set(e,i)),i}dispatch(e,t){let i=this.getDispatcher(e,!1);if(i)if(arguments.length<=2)i.dispatch(t);else{let e=Array.prototype.slice.call(arguments,1);i.dispatch(...e)}}addListenerGeneric(e,t,i){return Array.isArray(t)?new CleanupJobs(t.map((t=>this[e](t,i)))):this.getDispatcher(t)[e](i)}addListener(e,t){return this.addListenerGeneric("addListener",e,t)}emoveListener(e,t){const i=this.getDispatcher(e,!1);null==i||i.removeListener(t)}removeAllListeners(e){const t=this.getDispatcher(e,!1);null==t||t.removeAllListeners()}ddCleanupJob(e){return this.hasOwnProperty("_cleanupJobs")||(this._cleanupJobs=new CleanupJobs),this._cleanupJobs.add(e),e}runCleanupJobs(){this._cleanupJobs&&this._cleanupJobs.cleanup()}detachListener(e){this._cleanupJobs?this._cleanupJobs.remove(e):e.remove()}attachTimeout(e,t){const i=setTimeout(e,t);return this.addCleanupJob((()=>clearTimeout(i))),i}attachInterval(e,t){const i=setInterval(e,t);return this.addCleanupJob((()=>clearInterval(i))),i}attachAnimationFrame(e){const t=requestAnimationFrame(e);return this.addCleanupJob((()=>cancelAnimationFrame(t))),t}addChangeListener(e){return this.addListener("change",e)}dispatchChange(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.dispatch("change",...t,this)}}function Ne(e){let t="add"+e,i="remove"+e;return function(e){let n=Array.prototype.slice.call(arguments,1),r=e[t](...n);return r||(r=,this.addCleanupJob(r),r}}Dispatchable.prototype.attachListener=Ne("Listener"),Dispatchable.prototype.attachEventListener=Ne("EventListener"),Dispatchable.prototype.attachCreateListener=Ne("CreateListener"),Dispatchable.prototype.attachDeleteListener=Ne("DeleteListener"),Dispatchable.prototype.attachChangeListener=Ne("ChangeListener"),Dispatchable.prototype.attachListenerOnce=Ne("ListenerOnce"),Dispatcher.Global=new Dispatchable;class CleanupJobs{constructordd(e){this.jobs.push(e)}cleanup(){for(let e of this.jobs)"function"==typeof e.cleanup?e.cleanup():"function"==typeof e.remove?e.remove():e();this.jobs=[]}remove(e){if(e){const t=this.jobs.indexOf(e);t>=0&&this.jobs.splice(t,1),e.remove()}else this.cleanup()}}class SingleActiveElementDispatcher extends Dispatcher{setActive(e,t,i){(i||e!==this._active)&&(this._active=e,this.dispatch(e),t&&this.addListenerOnce((i=>{i!=e&&t(i)})))}getActive(){return this._active}}const _e={key:"popupPageChange",flush:!0},xe={key:"flowCheckpoint",flush:!0},Me={key:"elementClick",flush:!0},Be={key:"socialLoginButtonClicked",flush:!0},ke={key:"requestEmailAccessCode",flush:!0},Ue={key:"attemptConfirmEmailCode",flush:!0},He={key:"attemptDonate",flush:!0},ze={key:"attemptSubscribe",flush:!0},Fe={key:"subscriptionSelected",flush:!0},Ve={key:"showSubscriptionCoverageCards",flush:!0},Ge={key:"userLogin",flush:!0},We={key:"ajaxRequestFailed",flush:!1},je={key:"ajaxRequestSucceeded",flush:!1},Ye={key:"jsError",flush:!0,now:!0};let Ke=null;class AnalyticsClient extends Dispatchable{constructor(e){super(),this.eventQueue=[],this.environment={},this.identity={},this.preprocessors=[],this.origin=e,this.submitEnqueuedEventsDebounced=De((()=>this.submitEnqueuedEvents()),100),Ke=this}addNodeAnalyticsData(e,t){if(e.dataset)for(const[n,r]of Object.entries(e.dataset))if(n.startsWith("analytics")&&"analytics"!==n){const e=(i=n.slice(9))&&i.charAt(0).toLowerCase()+i.slice(1);t.hasOwnProperty(e)||(t[e]=r)}var i;const n=e.parentElement;n&&this.addNodeAnalyticsData(n,t)}addEventNodeDataToPayload(e,i){var n;let r=e.currentTarget||e.target;if(r===document&&(r=e.target||e.currentTarget),null!=(n=r)&&n.tagName){const n={};this.addNodeAnalyticsData(r,n),i.domEventType=e.type,i.domEventTarget=t({selector:Ie(r),text:ee(r.innerText,200)},n)}}submitEnqueuedEvents(e){if(0===this.eventQueue.length)return;const t=(e=>JSON.stringify({method:"xhr",origin:this.origin,identity:this.identity,events:this.eventQueue}))();this.eventQueue=[];const i=new XMLHttpRequest;i.open("POST",O,!0),i.send(t)}enqueueEvent(e,i){void 0===i&&(i={});const n=self.event;n&&this.addEventNodeDataToPayload(n,i);let r={type:e.key,timestamp:+Date.now()/1e3,localSessionTime:performance.now()/1e3,payload:t({},this.environment,i)};for(const e of this.preprocessors)r=e(r)||r;this.dispatch("event",t({origin:this.origin,identity:t({},this.identity)},r)),this.eventQueue.push(r),this.eventQueue.length>=16?this.submitEnqueuedEvents():e.flush&&(e.now?this.submitEnqueuedEvents(1):this.submitEnqueuedEventsDebounced())}updateEnvironment(e){Object.assign(this.environment,e)}function Ze(e,t){void 0===t&&(t={});try{var i;null==(i=Ke)||i.enqueueEvent(e,t)}catch(e){console.error("Blink analytics caught an error:",e)}}const qe=new Set(["border-radius","border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius","border-bottom-width","border-left-width","border-right-width","border-top-width","border-width","bottom","font-size","font-stretch","height","layer-grid-char","layer-grid-char-spacing","layer-grid-line","left","letter-spacing","line-height","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","max-height","max-width","min-height","min-width","outline-width","padding","padding-bottom","padding-left","padding-right","padding-top","right","size","top","width","word-spacing","gap"]);class DOMAttributesMap{constructor(e,t,i){void 0===t&&(t=[]),void 0===i&&(i=[]),this.allowedAttributesMap=new Map,this.reverseNameMap=new Map,this.fallbackMapping=e;for(let e of t)Array.isArray(e)||(e=[e]),this.setAttribute(e[0],e[1]);this.allowedPrefixes=i}setAttribute(e,t){(t=t||{}).domName=t.domName||e,this.allowedAttributesMap.set(e,t),this.reverseNameMap.set(t.domName,e)}get(e){for(const t of this.allowedPrefixes)if(e.startsWith(t))return{domName:e};let t=this.allowedAttributesMap.get(e);return!t&&this.fallbackMapping&&(t=this.fallbackMapping.get(e)),t}hasetKeyFromDOMNameclass ClassNameSet extends Set{static create(e){return te(new Set(String(e||"").split(" ")),this)}toStringclass NodeAttributes{constructor(e){Object.assign(this,e),this.className instanceof ClassNameSet&&(this.className=ClassNameSet.create(String(this.className))),oe(this.style)&&(this.style=t({},this.style))}setAttribute(e,t,i,n){void 0===n&&(n=this.constructor.defaultAttributesMap),n.has(e)||(this.whitelistedAttributes=this.whitelistedAttributes||{},this.whitelistedAttributes[e]=!0),this[e]=t,i&&this.applyAttribute(e,i,n)}applyStyleToNode(e,t,i){"function"==typeof t&&(t=t()),re(t)&&0!=t&&qe.has(he(e))&&(t+="px"),i&&i.style[e]!==t&&(i.style[e]=t)}ensureNoStringStyle(){se(this.style)&&(this.styleString=this.style,delete this.style)}setStyle(e,t,i){if(t=Se(t),se(e))void 0!==t?(this.ensureNoStringStyle(),this.style=this.style||{},this.style[e]=t,this.applyStyleToNode(e,t,i)):this.removeStyle(e,i);else for(const t of Object.keys(e))this.setStyle(t,e[t],i)}removeStyle(e,t){this.style&&delete this.style[e],t&&t.style[e]&&delete t.style[e]}static getClassArray(e){return e?Array.isArray(e)?e.map(():String(e).trim().split(" "):[]}getClassNameSet(){return this.className instanceof ClassNameSet||(this.className=ClassNameSet.create(this.className||"")),this.className}addClass(e,t){e=this.constructor.getClassArray(e);for(let i of e)this.getClassNameSet().add(i),t&&t.classList.add(i)}removeClass(e,t){e=this.constructor.getClassArray(e);for(let i of e)this.getClassNameSet().delete(i),t&&t.classList.remove(i)}hasClass(e){return this.getClassNameSet().has(se(e)?e:e.className)}applyAttribute(e,t,i){let n=i.get(e);if(!n){if(!this.whitelistedAttributes||!(e in this.whitelistedAttributes))return;n={domName:e}}let r=this[e];"function"==typeof r&&(r=r()),n.noValue&&(r=r?"":void 0),void 0!==r?t.setAttribute(n.domName,r):t.removeAttribute(n.domName)}applyClassName(e){if(this.className){const t=String(this.className);e.className!=t&&(e.className=t)}else e.className&&e.removeAttribute("class")}apply(e,t){let i={};this.whitelistedAttributes;let n=e.attributes;for(let r=n.length-1;r>=0;r--){let s=n[r].name;if("style"===s||"class"===s)continue;let o=t.getKeyFromDOMName(s);if(this.hasOwnProperty(o)){let n=this[o],r=t.get(o);r&&r.noValue&&(n=n?"":void 0),null!=n?(e.setAttribute(s,n),i[o]=!0):e.removeAttribute(s)}else e.removeAttribute(s)}for(let n in this)i[n]||this.applyAttribute(n,e,t);if(this.applyClassName(e),e.removeAttribute("style"),this.ensureNoStringStyle(),this.styleString&&(e.style=this.styleString),this.style)for(const t of Object.keys(this.style))this.applyStyleToNode(t,this.style[t],e)}}function $e(e){self.STEM_DEBUG&&(e.node.stemElement=e)}NodeAttributes.defaultAttributesMap=new DOMAttributesMap(null,[["id"],["action"],["checked",{noValue:!0}],["colspan"],["default"],["disabled",{noValue:!0}],["fixed"],["forAttr",{domName:"for"}],["hidden"],["href"],["rel"],["minHeight"],["minWidth"],["role"],["target"],["domTitle",{domName:"title"}],["type"],["placeholder"],["src"],["alt"],["height"],["width"],["tabIndex"],["data"]],["data-","aria-"]);class ThemeType{constructor(e,t,i){se(i=i||{})&&(i={comment:i}),this.type=e,this.value=t,this.options=i}}function Xe(e){return function(t,i){return void 0===i&&(i={}),new ThemeType(e,t,i)}}const Je=Xe("Color"),Qe=Xe("Size"),et=Xe("Border"),tt=Xe("Text Shadow"),it=Xe("Box Shadow"),nt=Xe("Font Family"),rt=Xe("Font Weight"),st=Xe("Float"),ot=Xe("Boolean"),at=Xe("Generic Object");var lt;class Theme extends Dispatchable{constructor(e,i,n){super(),this.classSet=new Set,this.styleSheetInstances=new Map,this.updateThrottled=new CallThrottler({throttle:50}).wrap((()=>this.updateStyleSheets())),this.name=i,this.baseTheme=e,this.properties=t({theme:this},n),this.propTypes={},this.props=new Proxy(this.properties,{get:(e,t,i)=>{const n=Se(this.getProperty(t),{args:[this.props]});return self.STEM_DEBUG&&void 0===n&&console.warn("Failed to find theme prop",t),n},set:(e,t,i)=>(this.setProperties({[t]:i}),!0)}),this.styleSheetSymbol=Symbol(this.name+"StyleSheet"),window.addEventListener("resize",(()=>this.updateThrottled()))}egister(e,t){e.theme=this,e[this.styleSheetSymbol]=t,this.classSet.add(e)}getStyleSheet(e){var t;return e[this.styleSheetSymbol]||(null==(t=this.baseTheme)?void 0:t.getStyleSheet(e))}getProperty(e){var t;return this.properties.hasOwnProperty(e)?this.properties[e]:null==(t=this.baseTheme)?void 0:t.getProperty(e)}setProperties(e,t){void 0===t&&(t=!0);for(const[t,i]of Object.entries(e))i instanceof ThemeType?(this.properties[t]=i.value,this.propTypes[t]=i):this.properties[t]=i;t&&this.updateThrottled()}getAllStyleSheets(){let e=new Set(this.styleSheetInstances.values());for(const t of this.classSet.values())e.add(this.getStyleSheet(t));return Array.from(e).map(()}getStyleSheetInstance(e){let t=this.styleSheetInstances.get(e);return t||(t=new e({theme:this}),this.styleSheetInstances.set(e,t)),t}updateStyleSheets(){this.dispatch("beforeUpdateStyleSheets");for(const e of this.getAllStyleSheets())e.update();this.dispatch("afterUpdateStyleSheets")}static register(e,t){return this.Global.register(...arguments)}tatic get props(){return this.Global.props}}function ct(e,t){return void 0===t&&(t=Theme.Global),i=>t.register(i,e)}lt=Theme,Theme.Global=new lt(null,"Global");const ut=[],ht=new class OncePerTickRunner{aybeEnqueue(e){const t=this.throttle.get(e);for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return this.throttle.set(e,n),!t&&(queueMicrotask((()=>{const t=this.throttle.get(e);t&&(this.clear(e),this.callback(e,...t))})),!0)}clear(e){this.throttle.delete(e)}}(((e,t)=>e.node&&e.redraw(t))),dt={};lass BaseUIElement extends Dispatchable{canOverwrite(e){return this.constructor===e.constructor&&this.getNodeType()===e.getNodeType()}applyRef(){var e,t;null!=(e=this.options)&&e.ref&&(this.options.ref.parent[null!=(t=this.options.ref.name)?t:this.options.ref.key]=this);this.cancelEnqueuedRedraw()}removeRef(){var e;if(null!=(e=this.options)&&e.ref){let e=this.options.ref.parent,t=this.options.ref.name;e[t]===this&&(e[t]=void 0)}}Mount(){}onUnmount(){}destroyNode(){var e;this.dispatch("unmount",this),this.onUnmount(),this.cleanup(),this.removeRef(),null==(e=this.node)||e.remove(),delete this.node}}dt.TextElement=class UITextElement extends BaseUIElement{constructor(e){var t;void 0===e&&(e=""),super(),e&&e.hasOwnProperty("value")&&oe(e)?(this.value=e.value,this.options=e):this.value=null!=(t=e)?t:""}mount(e,t){this.parent=e,this.node?this.redraw():(this.createNode(),this.applyRef()),e.node.insertBefore(this.node,t),this.onMount()}getNodeType(){return Node.TEXT_NODE}reateNode(){return this.node=document.createTextNode(this.getValue()),$e(this),this.node}setValue(e){this.value=null!=e?e:"",this.node&&this.redraw()}getValue(){return String(this.value)}toString(){return this.getValue()}redraw(){if(this.node){let e=this.getValue();this.node.nodeValue!==e&&(this.node.nodeValue=e)}this.applyRef()}};class UIElement extends BaseUIElement{constructor(e){void 0===e&&(e={}),super(),this.children=[],this.options=e,this.state=this.getDefaultState(),this.setOptions(e)}getDefaultOptions(e){}getCleanedOptions(){let e=t({},this.options);return delete e.ref,delete e.children,delete e.key,delete e.nodeType,e}getDefaultState(){return{}}getPreservedOptions(){}setOptions(e){let t=this.getDefaultOptions(e);t&&(e=Object.assign(t,e)),this.options=e}updateOptions(e){this.setOptions(Object.assign(this.options,e)),this.redraw()}setChildren(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.updateOptions({children:pt(t)})}copyState(e){let t=e.options,i=this.getPreservedOptions();i&&(t=Object.assign({},t,i)),this.setOptions(t),this.addListenersFromOptions()}tatic create(e,t){const i=new this(t);return i.mount(e,null),i.dispatch("mount",i),i}ender(){return this.options.children}createNode(){return this.node=document.createElement(this.getNodeType()),$e(this),this.node}cleanup(){this.runCleanupJobs();for(const e of this.children)e.destroyNode();this.clearNode(),super.cleanup()}etElementKeyMap(e){if(!e||!e.length)return;let t=new Map;for(let i=0;i<e.length;i+=1){let n=e[i].options&&e[i].options.key||"autokey"+i;t.set(n,e[i])}return t}getChildrenToRender(){return this.render()}getExtraContext(){const{theme:e}=this.options;return e?{theme:e}:null}updateContext(e){var i;void 0===e&&(e=null==(i=this.parent)?void 0:i.context);const n=this.getExtraContext();this.context=n?t({},e,n):e}getChildrenForRedraw(){ut.push(this);let e=pt(this.getChildrenToRender());return ut.pop(),e}redraw(){if(!this.node)return console.error("Element not yet mounted. Redraw aborted!",this),!1;this.updateContext();let e=this.getChildrenForRedraw();if(e===this.children){for(const t of e)t.redraw();return this.applyNodeAttributes(),this.applyRef(),!0}let t=this.node,i=this.getElementKeyMap(this.children);for(let r=0;r<e.length;r++){var n;let s=e[r],o=r>0?e[r-1].node:null,a=o?o.nextSibling:t.firstChild;s.getNodeType||(s=s.toUI?s.toUI(this):new dt.TextElement({value:String(s)}),e[r]=s);let l=(null==(n=s.options)?void 0:n.key)||"autokey"+r,c=i&&i.get(l);c&&e[r].canOverwrite(c)?(c!==e[r]&&(e[r]=this.overwriteChild(c,e[r])),e[r].redraw(),e[r].node!==a&&t.insertBefore(e[r].node,a)):s.mount(this,a)}if(this.children.length){let t=new Set(e);for(const e of this.children)t.has(e)||e.destroyNode()}return this.children=e,this.applyNodeAttributes(),this.applyRef(),!0}getOptionsAsNodeAttributes(){return te(this.options,NodeAttributes)}instantiateNodeAttributes(){return new NodeAttributes(this.options)}getNodeAttributes(){var e;const t=this.instantiateNodeAttributes(),i=null==(e=this.styleSheet)?void 0:e.container;return i&&t.addClass(i),t}pplyNodeAttributes(){const e=this.getNodeAttributes();this.extraNodeAttributes(e),e.apply(this.node,this.constructor.domAttributesMap)}setAttribute(e,t){this.getOptionsAsNodeAttributes().setAttribute(e,t,this.node,this.constructor.domAttributesMap)}setStyle(e,t){if("object"!=typeof e)this.getOptionsAsNodeAttributes().setStyle(e,t,this.node);else for(const[t,i]of Array.from(Object.entries(e)))this.setStyle(t,i)}removeStyle(e){this.getOptionsAsNodeAttributes().removeStyle(e,this.node)}addClass(e){this.getOptionsAsNodeAttributes().addClass(e,this.node)}removeClass(e){this.getOptionsAsNodeAttributes().removeClass(e,this.node)}tTheme(){var e;return this.options.theme||(null==(e=this.context)?void 0:e.theme)||Theme.Global}get styleSheet(){var e;let{styleSheet:t}=this.options;const i=this.getTheme();return t||(t=i.getStyleSheet(this.constructor)),null==(e=t)?void 0:e.getInstance(i)}get themeProps(){var e;return(null==(e=this.options.styleSheet)?void 0:e.themeProps)||this.getTheme().props}addListenersFromOptions(){var e=this;for(const t in this.options)if("string"==typeof t&&t.startsWith("on")&&t.length>2){const i=t.substring(2),n="add"+i+"Listener",r="on"+i+"Handler";"function"!=typeof this[n]||this.hasOwnProperty(r)||(this[r]=function(){if(e.options[t]){for(var i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];e.options[t](...n,e)}},this[n](this[r]))}}refLink(e){return{parent:this,name:e}}refLinkArray(e,t){return this[e]||(this[e]=[]),{parent:this[e],name:t}}bindToNode(e,t){return this.node=e,t&&(this.clearNode(),this.redraw()),this}mount(e,t){if(e.node||(e=(new dt.Element).bindToNode(e)),this.parent=e,this.node)return e.insertChildNodeBefore(this,t),void this.dispatch("changeParent",this.parent);this.createNode(),this.redraw(),e.insertChildNodeBefore(this,t),this.addListenersFromOptions(),this.onMount()}appendChild(e){if(this.children!==this.options.children)throw"Can't properly handle appendChild, you need to implement it for "+this.constructor;return this.options.children.push(e),e.mount(this,null),e}insertChild(e,t){if(this.children!==this.options.children)throw"Can't properly handle insertChild, you need to implement it for "+this.constructor;t=t||0,this.options.children.splice(t,0,e);const i=t+1<this.options.children.length?this.children[t+1].node:null;return e.mount(this,i),e}eraseChild(e,t){void 0===t&&(t=!0);let i=this.options.children.indexOf(e);return i<0?null:this.eraseChildAtIndex(i,t)}eraseChildAtIndex(e,t){if(void 0===t&&(t=!0),e<0||e>=this.options.children.length)return void console.error("Erasing child at invalid index ",e,this.options.children.length);if(this.children!==this.options.children)throw"Can't properly handle eraseChild, you need to implement it for "+this.constructor;let i=this.options.children.splice(e,1)[0];return t?i.destroyNode():this.node.removeChild(i.node),i}show(){this.removeClass("hidden")}earNode(){for(;this.node&&this.node.lastChild;)this.node.removeChild(this.node.lastChild)}etWidthOrHeight(e){let t=this.node;return t&&parseFloat("width"===e?t.offsetWidth:t.offsetHeight)||0}getHeight(){return this.getWidthOrHeight("height")}getWidth(){return this.getWidthOrHeight("width")}setHeight(e){this.setStyle("height",J(e,"px")),this.dispatch("resize")}setWidth(e){this.setStyle("width",J(e,"px")),this.dispatch("resize")}addNodeListener(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];this.node.addEventListener(e,t,...n);const s={remove:()=>{this.removeNodeListener(e,t,...n)}};return this.addCleanupJob(s),s}ddClickListener(e){return this.addNodeListener("click",e)}removeClickListener(e){this.removeNodeListener("click",e)}addDoubleClickListener(e){return this.addNodeListener("dblclick",e)}removeDoubleClickListener(e){this.removeNodeListener("dblclick",e)}}dt.createElement=function(e,t){if(e){t=t||{};for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];if(t.children=pt(n),t.ref){if("string"==typeof t.ref){if(!(ut.length>0))throw Error("Failed to automatically link ref, there needs to be an element in the rendering stack");t.ref={parent:ut[ut.length-1],name:t.ref}}t.key&&console.error("Warning! UI Element cannot have both a key and a ref fieldname. Key will be overriden.\nAre you using the options from another object? Shame!",t),t.key="_ref"+t.ref.name}return t.hasOwnProperty("class")&&console.error("Invalid UI Element attribute: class. Did you mean className?"),"string"==typeof e&&(t.nodeType=e,e=UIElement),new e(t)}console.error("Create element needs a valid object tag, did you mistype a class name?")},UIElement.domAttributesMap=NodeAttributes.defaultAttributesMap,dt.Element=UIElement,dt.str=e=>new dt.TextElement(e);let mt=new WeakMap;dt.Primitive=(e,t)=>{t||(t=e,e=dt.Element);let i=mt.get(e);i||(i=new Map,mt.set(e,i));let n=i.get(t);return n||(n=class Primitive extends e{,i.set(t,n),n)};const gt=new class State extends Dispatchable{constructor(){super(...arguments),this.stores=new Map}getStore(e){var t,i;return e=(null==(t=e)?void 0:t.objectType)||(null==(i=e)?void 0:i.toLowerCase()),this.stores.get(e)}getStoreForEvent(e){const t=e.objectType||e.store;return this.getStore(t)}addStore(e){const t=e.objectType;if(this.stores.has(t))throw Error("GlobalState: Adding a store for an existing object type: "+e.objectType);this.stores.set(t,e)}applyEvent(e){if(null==e)return;if(Array.isArray(e)){for(let t of e)this.applyEvent(t);return}if(e.state&&(this.importState(e.state),!this.getStoreForEvent(e)))return;const t=this.getStoreForEvent(e);if(t)return t.applyEvent(e);console.log("GlobalState: Missing store for event: ",e)}get(e,t){const i=this.getStore(e);if(i){let e=Array.prototype.slice.call(arguments,1);return i.get(...e)}return console.error("GlobalState: Can't find store ",e),null}importStateFromTempMap(e,t){const i=t.get(e);if(t.delete(e),null==i)return;const n=this.getStore(e);if(n){for(const e of n.dependencies)this.importStateFromTempMap(e.toLowerCase(),t);n.importState(i)}else console.error("Failed to import state, can't find store ",e)}importState(e){if(Array.isArray(e)){for(const t of e)this.importState(t);return}if(e.state)return void this.load(e);const t=new Map;for(const[i,n]of Object.entries(e))t.set(i.toLowerCase(),n);for(;t.size>0;){const e=t.keys().next().value;this.importStateFromTempMap(e,t)}}load(e,t,i){let{state:n,events:r}=e;n&&!t&&this.importState(n),r&&!i&&this.applyEvent(r)}clear(){for(const e of this.stores.values())e.clear&&e.clear()}toJSON(){const e={};for(const t of this.stores.values())e[t.objectType]=t.toJSON();return e}},bt=Symbol("Store"),ft=Symbol("EventDispatcher");class StoreObject extends Dispatchable{constructor(e,t){super(),Object.assign(this,e)}static makeFieldLoader(e){return e.cacheField=!1,e.rawField=e.rawField||(e=>e+"Id"),(e,t)=>t.getStore(this[bt].objectType).get(e)}setStore(e){this[bt]=e}getStore(e){const t=this[bt];return e?t.getState().getStore(e):t}applyEventdDeleteListener(e){return this.addListener("delete",e)}addEventListener(e,t){if(Array.isArray(e)){const i=e.map((e=>this.addEventListener(e,t)));return new CleanupJobs(i)}return this[ft]||(this[ft]=new Dispatchable,this.addChangeListener((e=>{this[ft].dispatch(e.type,e,this)}))),this[ft].addListener(e,t)}toJSONclass BaseStore extends Dispatchable{constructor(e,i,n){var r;void 0===i&&(i=StoreObject),void 0===n&&(n={}),super(),this.objectType=e.toLowerCase(),this.ObjectClass=i,Object.assign(this,t({state:gt,dependencies:[]},n)),null==(r=this.state)||r.addStore(this)}loadRaw(e){const t=(null==e?void 0:e.state)||e||{};for(const[e,i]of Object.entries(t))if(String(e).toLowerCase()===this.objectType)return i||[];return[]}load(e){return this.loadRaw(e).map((e=>this.get(e.id)))}loadObject(e,t){var i;return void 0===t&&(t=0),null==(i=this.load(e))?void 0:i[t]}getState(){return this.state}}class GenericObjectStore extends BaseStore{constructor(){super(...arguments),this.objects=new Map}get(e){return null==e?null:this.objects.get(String(e))}lear(){this.objects.clear(),this.dispatch("change",null,null)}getObjectIdForEventl(e){let t=this.objects.values();return e||(t=Array.from(t)),t}find(e){return this.all().find(e)}filter(e){return this.all().filter(e)}filterBy(e){const t=Object.entries(e);return this.filter((e=>{for(const[i,n]of t){const t=e[i];if(Array.isArray(n)){if(!n.includes(t))return!1}else if(t!=n)return!1}return!0}))}oJSON(){return this.all().map((e=>e.toJSON()))}applyCreateOrUpdateEvent(e,t){void 0===t&&(t=!0);let i=this.getObjectForEvent(e);return i?i.applyEventAndDispatch(e):(i=new this.ObjectClass(e.data,e,this),i.setStore(this),this.addObject(this.getObjectIdForEvent(e),i),t&&this.dispatch("create",i,e)),t&&this.dispatchChange(i,e),i}applyDeleteEvent(e){const t=this.getObjectForEvent(e);return t&&(this.objects.delete(this.getObjectIdForEvent(e)),t.dispatch("delete",e,t),this.dispatch("delete",t,e),this.dispatch("change",t,e)),t}applyEvent(e){if(e.data=e.data||{},"create"===e.type||"createOrUpdate"===e.type)return this.applyCreateOrUpdateEvent(e);if("delete"===e.type)return this.applyDeleteEvent(e);const t=this.getObjectForEvent(e);return t?(t.applyEventAndDispatch(e),this.dispatch("change",t,e),t):(console.error("Missing object of type ",this.objectType," ",e.objectId),null)}importState(e){void 0===e&&(e=[]);for(const t of e)this.create(t)}makeEventFromObject(e,i){return void 0===i&&(i=null),t({isFake:!0,type:"create",objectType:this.objectType,objectId:e.id,data:e},i)}create(e,t,i){if(void 0===t&&(t=null),void 0===i&&(i=!0),!e)return;const n=this.makeEventFromObject(e,t);return this.applyCreateOrUpdateEvent(n,i)}addCreateListener(e,t){if(t)for(const t of this.objects.values())e(t,this.makeEventFromObject(t));return this.addListener("create",e)}addDeleteListener(e){return this.addListener("delete",e)}}const yt=function(e,t,i){return void 0===i&&(i={}),class Store extends GenericObjectStore{constructor(){super(e,t,i)}}};function Ct(){return new(yt(...arguments))}class TokenFormatter{constructor(e){this.tokenMap=new Map;for(const[t,i]of e)this.tokenMap.set(t,i)}splitToTokens(e){let t=[],i=null,n=!1,r=!1;for(let s=0;s<e.length;s++){let o=e.charCodeAt(s);if(125===o&&n)n=!1,i=null;else if(93===o&&r)r=!1,i=null;else if(n||r)t[t.length-1]+=e[s];else if(123===o)n=!0,t.push("");else if(91===o)r=!0,t.push("");else{let n=65<=o&&o<=90||97<=o&&o<=122;n===i?t[t.length-1]+=e[s]:t.push(e[s]),i=n}}return(n||r)&&console.warn("Unfinished escaped sequence!"),t}evalToken(e,t){let i=this.tokenMap.get(t);return i?i(e):t}format(e,t){let i=this.splitToTokens(t);return i=i.map((),i.join("")}}class TimeUnit{constructor(e,t,i,n){void 0===n&&(n={}),this.name=e,this.pluralName=e+"s",this.baseUnit=t,this.multiplier=i,this.milliseconds=((null==t?void 0:t.getMilliseconds())||1)*i,this.variableMultiplier=n.variableMultiplier||!1,this.variableDuration=this.variableMultiplier||t&&t.isVariable();let r="year"===e?"FullYear":"day"===e?"Date":Q(e);this.getterName="get"+r,this.setterName="set"+r,!Date.prototype[this.getterName]&&Date.prototype[this.getterName+"s"]&&(this.getterName+="s",this.setterName+="s")}static toTimeUnit(e){return e instanceof TimeUnit?e:this.CANONICAL[e]}valueOf(){return this.milliseconds}getName(){return this.name}getPluralName(){return this.pluralName}getFrequencyName(){return"day"===this.name.toLowerCase()?"daily":this.name+"ly"}formatCount(e,t){return 1!=e?e+" "+this.getPluralName():t?this.getName():e+" "+this.getName()}getMilliseconds(){return this.milliseconds}isVariable(){return this.variableDuration}hasVariableMultiplier(){return this.variableMultiplier}getDateValue(e){return e[this.getterName]()}setDateValue(e,t){return e[this.setterName](t)}}TimeUnit.CANONICAL={},TimeUnit.ALL=[],TimeUnit.FIXED_DURATION=[],TimeUnit.VARIABLE_DURATION=[],TimeUnit.MILLISECOND=new TimeUnit("millisecond",null,1),TimeUnit.SECOND=new TimeUnit("second",TimeUnit.MILLISECOND,1e3),TimeUnit.MINUTE=new TimeUnit("minute",TimeUnit.SECOND,60),TimeUnit.HOUR=new TimeUnit("hour",TimeUnit.MINUTE,60),TimeUnit.DAY=new TimeUnit("day",TimeUnit.HOUR,24,{variableMultiplier:!0}),TimeUnit.WEEK=new TimeUnit("week",TimeUnit.DAY,7),TimeUnit.MONTH=new TimeUnit("month",TimeUnit.DAY,30,{variableMultiplier:!0}),TimeUnit.QUARTER=new TimeUnit("quarter",TimeUnit.MONTH,3),TimeUnit.TRIMESTER=new TimeUnit("trimester",TimeUnit.MONTH,4),TimeUnit.SEMESTER=new TimeUnit("semester",TimeUnit.MONTH,6),TimeUnit.YEAR=new TimeUnit("year",TimeUnit.DAY,365,{variableMultiplier:!0}),TimeUnit.DAY.dateMethodSuffix="Date",TimeUnit.MONTH.dateMethodSuffix="Month",TimeUnit.YEAR.dateMethodSuffix="FullYear";class Duration{constructor(e){if(e instanceof Date)throw new Error("Can't automatically transform Date to Duration, use date.getTime() if you really want to");if(re(e))this.milliseconds=e;else if(e instanceof Duration)Object.assign(this,e);else{if(e instanceof TimeUnit)return this.relativeDuration=e.isVariable(),void(this.relativeDuration?this[e.name]=1:this.milliseconds=e.getMilliseconds());if(oe(e)){this.milliseconds=0;for(const t of Object.keys(e)){let i=TimeUnit.CANONICAL[t];if(!i)throw Error("Unknown time unit:",t);i.isVariable()?(this[t]=parseInt(e[t]),this.relativeDuration=!0):this.milliseconds+=parseFloat(e[t])*i.milliseconds}}else{if(arguments.length>0)throw Error("Invalid Duration arguments: ",...arguments);this.milliseconds=0}}}static toDuration(e){return e instanceof Duration?e:new this(e)}static optionally(e){return null!=e?this.toDuration(e):e}increment(e){e=this.constructor.toDuration(e);for(const t in e)t in TimeUnit.CANONICAL&&(this.hasOwnProperty(t)?this[t]+=e[t]:this[t]=e[t]);return this}add(e){return this.clone().increment(e)}subtract(e){return e=this.constructor.toDuration(e).negate(),this.add(e)}sVariable(){return this.relativeDuration}negate(){let e=new Duration(this);for(const t in e)t in TimeUnit.CANONICAL&&(e[t]=-e[t]);return e}abs(){return new Duration(Math.abs(+this))}alueOf(){return this.milliseconds}toNanoseconds(){return Math.floor(1e6*+this)}toMilliseconds(){return Math.floor(+this)}getMilliseconds(){return this.toMilliseconds()%1e3}toSeconds(){return Math.floor(+this/1e3)}getSeconds(){return this.toSeconds()%60}toMinutes(){return Math.floor(+this/6e4)}getMinutes(){return this.toMinutes()%60}toHours(){return Math.floor(+this/36e5)}getHoursoDays(){return Math.floor(+this/864e5)}toMonths(){return Math.floor(+this/2592e6)}toYearsoTimeUnit(e){return Math.floor(+this/e.getMilliseconds())}splitInParts(e,t){let i=this.abs(),n=TimeUnit.YEAR,r=[],s=0;for(;;){const o=i.toTimeUnit(n);if(o&&(i=i.subtract(o*n),r.push({numUnits:o,timeUnit:n})),r.length>0&&(s+=1,s>=e))break;const a=n.baseUnit;if(null==a||t&&a<t)break;n=a}return{parts:r,timeUnit:n,duration:i}}format(e){let{maxEntries:t=2,locale:i=null,separator:n=", ",raw:r=!1}=void 0===e?{}:e;if(se(arguments[0])){const e=String(arguments[0]).toLowerCase();return this.constructor.formatter.format(this,e)}const{parts:s}=this.splitInParts(t);return s.map(().join(n)}function St(e,t){TimeUnit.ALL.push(t),t.isVariable()?TimeUnit.VARIABLE_DURATION.push(t):TimeUnit.FIXED_DURATION.push(t),TimeUnit.CANONICAL[t.name]=t,t.pluralName&&(TimeUnit.CANONICAL[t.pluralName]=t);const i=t.pluralName;Duration[e]=new Duration({[i]:1})}Duration.formatter=new TokenFormatter([["h",e=>e.getHours()],["hh",e=>ge(e.getHours(),2)],["m",e=>e.getMinutes()],["mm",e=>ge(e.getMinutes(),2)],["s",e=>e.getSeconds()],["ss",e=>ge(e.getSeconds(),2)],["ts",e=>Math.floor(e.getMilliseconds()/100)],["hs",e=>ge(Math.floor(e.getMilliseconds()/10),2)],["ms",e=>ge(e.getMilliseconds(),3)]]),function(){for(const e in TimeUnit){const t=TimeUnit[e];t instanceof TimeUnit&&St(e,t)}}();let Et=Math.pow(2,32),At="ISO";const wt=self.Date;class StemDate extends wt{constructor(){super(...arguments),1===arguments.length&&re(arguments.length<=0?void 0:arguments[0])&&this.valueOf()<Et&&this.setTime(1e3*this.valueOf())}tatic optionally(e){return null!=e?this.create(e):e}static toDate(e){return e instanceof StemDate?e:new this(e)}static now(){return new this(wt.now())}oString(){return At?se(At)?this.format(At):At(this):this.toBaseString()}tatic fromUnixSecondstatic unix(e){return this.fromUnixSeconds(e)}static fromHighResTimestamp(e){return this.fromUnixMilliseconds(e+self.performance.timing.navigationStart)}set(e){return e=this.constructor.toDate(e),this.setTime(e.getTime()),this}cloneefore(e){return this.getTime()<StemDate.toDate(e).getTime()}equals(e){return this.getTime()===StemDate.toDate(e).getTime()}get(e){return(e=TimeUnit.toTimeUnit(e)).getDateValue(this)}isSame(e,t){return t?(t=TimeUnit.toTimeUnit(t),e=this.constructor.toDate(e),!(this.diff(e)>=2*t)&&this.get(t)==e.get(t)):this.equals(e)}isAfter(e){return this.getTime()>StemDate.toDate(e).getTime()}isSameOrBefore(e){return this.isBefore(e)||this.equals(e)}sBetweenetWeekDay(){return this.getDay()}addUnit(e,t){if(void 0===t&&(t=1),e=TimeUnit.toTimeUnit(e),t=parseInt(t),!e.isVariable())return this.setTime(this.getTime()+e.getMilliseconds()*t),this;for(;!e.dateMethodSuffix;)t*=e.multiplier,e=e.baseUnit;const i=e.dateMethodSuffix,n=this["get"+i]();return this["set"+i](n+t),this}static min(){let e=this.constructor.toDate(arguments[0]);for(let t=1;t<arguments.length;t++){let i=this.constructor.toDate(arguments[t]);i.isBefore(e)&&(e=i)}return e}static max(){let e=this.constructor.toDate(arguments[0]);for(let t=1;t<arguments.length;t++){let i=this.constructor.toDate(arguments[t]);i.isAfter(e)&&(e=i)}return e}capUp(e){e=this.constructor.toDate(e),this.isAfter(e)&&this.set(e)}capDown(e){e=this.constructor.toDate(e),this.isBefore(e)&&this.set(e)}roundDown(e){for(e=TimeUnit.toTimeUnit(e);e=e.baseUnit;)e.setDateValue(this,0);return this}roundUp(e){const t=this.clone().roundDown(e);return this.equals(t)?this.set(t):(this.addUnit(e),this.roundDown(e))}round(e){let t=this.clone().roundUp(e),i=this.clone().roundDown(e);return this.diff(t)<=this.diff(i)?this.setTime(t.getTime()):this.setTime(i.getTime()),this}add(e){if((e=Duration.toDuration(e)).isAbsolute())return this.setTime(this.getTime()+e.toMilliseconds()),this;for(const t in e){const i=TimeUnit.CANONICAL[t];i&&this.addUnit(i,e[t])}return this}subtract(e){return e=Duration.toDuration(e).negate(),this.add(e)}iff(e,t){void 0===t&&(t=!0);let i=+this-(e=this.constructor.toDate(e));return t&&(i=Math.abs(i)),new Duration(i)}ormat(e){return void 0===e&&(e=At),this.constructor.formatter.format(this,e)}sValid(){return"Invalid Date"!=super.toString()}utc(){return this.constructor.fromUnixMilliseconds(+this+60*this.getTimezoneOffset()*1e3)}isLeapYear(){let e=this.getFullYear();return e%4==0&&(e%100!=0||e%400==0)}daysInMonthetDaysCountPerMonth(e){return[31,28+this.isLeapYear(),31,30,31,30,31,31,30,31,30,31][e]}getDayInYear(){const e=this.getMonth();let t=0;for(let i=0;i<e;i+=1)t+=this.getDaysCountPerMonth(i);return t+this.getDate()-1}getWeekInYear(){return(this.getDayInYear()-this.getWeekDay())/7}getStartOfDayetEndOfDay(){return this.getStartOfDay().add(TimeUnit.DAY).subtract(TimeUnit.MILLISECOND)}getStartOfMonth(){return new StemDate(this.getFullYear(),this.getMonth(),1)}getEndOfMonth(){return this.getStartOfMonth().add(TimeUnit.MONTH).subtract(TimeUnit.MILLISECOND)}getStartOfYear(){return new StemDate(this.getFullYear(),0,1)}getEndOfYear(){return this.getStartOfYear().add(TimeUnit.YEAR).subtract(TimeUnit.MILLISECOND)}}const Tt=["Su","Mo","Tu","We","Th","Fr","Sa"],vt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Ot=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Dt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Rt=["January","February","March","April","May","June","July","August","September","October","November","December"];StemDate.formatter=new TokenFormatter([["ISO",e=>e.toISOString()],["Y",e=>e.getFullYear()],["YY",e=>ge(e.getFullYear()%100,2)],["YYYY",e=>e.getFullYear()],["M",,["MM",e=>ge(e.getMonth()+1,2)],["MMM",e=>Dt[e.getMonth()]],["MMMM",e=>Rt[e.getMonth()]],["D",e=>e.getDate()],["Do",e=>be(e.getDate())],["DD",e=>ge(e.getDate(),2)],["d",e=>e.getWeekDay()],["do",,["dd",e=>Tt[e.getWeekDay()]],["ddd",e=>vt[e.getWeekDay()]],["dddd",,["H",e=>e.getHours()],["HH",e=>ge(e.getHours(),2)],["h",,["hh",e=>ge(e.getHours()%12?e.getHours()%12:12,2)],["m",e=>e.getMinutes()],["mm",e=>ge(e.getMinutes(),2)],["s",e=>e.getSeconds()],["ss",e=>ge(e.getSeconds(),2)],["S",,["SS",e=>ge(Math.floor(e.getMilliseconds()/10),2)],["SSS",e=>ge(e.getMilliseconds(),3)],["ms",,["aa",e=>e.getHours()>12?"pm":"am"],["AA",e=>e.getHours()>12?"PM":"AM"],["LL",]);class FieldDescriptor{etTarget(e,t,i){e.fieldDescriptors||(e.fieldDescriptors=[]),e.fieldDescriptors.push(this),this.targetProto=e,this.key=t,this.rawDescriptor=i}getDefaultValue(e){const{initializer:t}=this.rawDescriptor;return null==t?void 0:t.call(e)}makeDescriptor(){if(se(this.type)){this.rawField=this.rawField||(e=>e+"Id"),this.cacheField=!1;const e="self"===this.type?null:this.type;this.loader=(t,i)=>(i.getStore?i.getStore(e):gt.getStore(e)).get(t)}var e;!this.loader&&this.type.makeFieldLoader&&(this.loader=this.type.makeFieldLoader(this),this.cacheField=null!=(e=this.cacheField)?e:Symbol("cached-"+this.key)),ie(this.rawField)&&(this.rawField=this.rawField(this.key,this)),this.rawField?this.isReadOnly=!0:this.rawField=Symbol("_"+this.key);const{rawField:t,cacheField:i,loader:n,isReadOnly:r,key:s}=this;return{get(){if(i&&this[i])return this[i];const e=this[t];if(null==e||!n)return e;const r=n(e,this);return i&&(this[i]=r),r},set(e){if(r)throw`Not allowed to change field ${s}`;this[t]=e,i&&delete this[i]}}}}function Pt(e,t){return void 0===t&&(t={}),(i,n,r)=>{const s=new FieldDescriptor(e,t);return s.setTarget(i,n,r),s.makeDescriptor()}}Date.makeFieldLoader=const It=new class MerchantStorage{constructor(e){this.getStorage=e}getItem(e){try{let t=this.getStorage().getItem(D+e);return JSON.parse(t)}catch(e){return null}}setItem(e,t){try{t=JSON.stringify(t),this.getStorage().setItem(D+e,t)}catch(e){}}removeItem(e){try{this.getStorage().removeItem(D+e)}catch(e){}}}((),Lt={DEBUG:0,INFO:1,WARN:2,ERROR:3};function Nt(e){if(!e||"number"==typeof e||e instanceof Number)return e;const t=e.toString().toUpperCase();return Lt[t]}const _t=[console.debug,console.info,console.warn,console.error];class Logger{static setLevel(e){const t=Nt(e);t?this.currentLevel=t:console.error("Invalid log level: ",e)}static logMessage(e,t){if(e<this.currentLevel)return void(this.droppedMessages+=1);null===t&&(t=this.defaultLoggerName);for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];const s=t?[t,...n]:n;_t[e](...s)}static log(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logMessage(Lt.INFO,this.defaultLoggerName,...t)}static debug(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logMessage(Lt.DEBUG,this.defaultLoggerName,...t)}static info(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logMessage(Lt.INFO,this.defaultLoggerName,...t)}static warn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logMessage(Lt.WARN,this.defaultLoggerName,...t)}static error(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logMessage(Lt.ERROR,this.defaultLoggerName,...t)}constructor(e,t){this.isDisabled=!1,this.level=null,this.name=e,t&&this.setLevel(t)}isable(){this.isDisabled=!0}ogMessage(e){if(!(this.isDisabled||this.level&&e<this.level)){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];this.constructor.logMessage(e,this.name,...i)}}log(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logMessage(Lt.INFO,...t)}debug(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logMessage(Lt.DEBUG,...t)}info(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logMessage(Lt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logMessage(Lt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.logMessage(Lt.ERROR,...t)}}var xt;Logger.Level=Lt,Logger.defaultLoggerName="[BlinkSDK]",Logger.currentLevel=Nt((null!=(xt=It.getItem("Logger.loggerLevel"))?xt:r)||Lt.DEBUG),Logger.droppedMessages=0;class WebsocketStreamHandler extends Dispatcher{constructor(e,t,i){void 0===i&&(i={}),super(),this._logger=new Logger("WebsocketStreamHandler"),this.websocketSubscriber=e,this.streamName=t,this.options=i,this.bytesReceived=0,this.isIndexed=!1,this.lastMessageIndex=-1,this.messageBuffer=new Map,this.missedPackets=0,this.status=this.constructor.NONE}sendSubscribe(){const e=this.websocketSubscriber;this.clearResubscribeTimeout(),this.status=this.constructor.SUBSCRIBING,this.haveIndex()?e.sendResubscribe(this.streamName,this.getLastIndex()):e.sendSubscribe(this.streamName),this.subscribeTryCount++;const t=e.constructor.STREAM_SUBSCRIBE_TIMEOUT||3e3,i=e.constructor.STREAM_SUBSCRIBE_MAX_TIMEOUT||3e4,n=Math.min(t*this.subscribeTryCount,i);this.resendSubscribeTimeout=setTimeout((()=>{this._logger.debug("stream subscribe timeout for #"+this.streamName+" reached! Trying to resubscribe again!"),this.sendSubscribe()}),n)}etStatusSubscribedetStatus(){return this.status}resetStatus(){this.clearResubscribeTimeout(),this.status=this.constructor.NONE,this.subscribeTryCount=0}processPacket(e){let t,i;if(this.bytesReceived+=e.length,"{"===e[0])t="v",i=e;else{let n=e.indexOf(" ");if(!(n>0))return void this._logger.error("Could not process stream packet: "+e);t=e.substr(0,n).trim(),i=e.substr(n+1).trim()}"i"===t?this.processIndexedPacket(i):"v"===t?this.processVanillaPacket(i):"n"===t?this.processMissedPacket(i):this._logger.error("Invalid packet type "+t)}processIndexedMessage(e,t){if(this.isIndexed=!0,-1===this.lastMessageIndex)this.lastMessageIndex=e,this.processVanillaPacket(t);else if(this.lastMessageIndex+1===e)for(this.lastMessageIndex=e,this.processVanillaPacket(t),++e;this.messageBuffer.has(e);)t=this.messageBuffer.get(e),this.messageBuffer.delete(e),this.lastMessageIndex=e,this.processVanillaPacket(t),++e;else this.messageBuffer.set(e,t)}processMissedPacket(e){this.processIndexedMessage(parseInt(e),WebsocketStreamHandler.MISSING_MESSAGE)}processVanillaPacket(e){if(e===WebsocketStreamHandler.MISSING_MESSAGE&&this.missedPackets++,!this.options.rawMessage)try{e=JSON.parse(e)}catch(t){if(!this.options.parseMayFail)return void this._logger.error("Failed to parse ",e," on stream ",this.streamName," Exception:",t.message)}this.dispatch(e)}processIndexedPacket(e){let t,i,n=e.indexOf(" ");n>0?(i=parseInt(e.substr(0,n).trim()),t=e.substr(n+1).trim(),this.processIndexedMessage(i,t)):this._logger.error("Could not process indexed stream packet: "+e)}haveIndex(){return this.isIndexed}getLastIndex(){return this.lastMessageIndex}}WebsocketStreamHandler.NONE=Symbol(),WebsocketStreamHandler.SUBSCRIBING=Symbol(),WebsocketStreamHandler.SUBSCRIBED=Symbol(),WebsocketStreamHandler.UNSUBSCRIBED=Symbol(),WebsocketStreamHandler.MISSING_MESSAGE="INVALID_MESSAGE_MISSING_FROM_ROLLING_WINDOW";const Mt="token";class AuthToken extends Dispatchable{constructor(){super(...arguments),this.usingMerchantToken=void 0,this.token=void 0,this.expiresAt=void 0}static getUserIdFromToken(e){return e?e.split("_",2)[0]:null}getUserId(){return this.constructor.getUserIdFromToken(this.token)}loadFromStorage(){const e=e=>{let t;try{t=JSON.parse(e())}catch(e){}if(!t)return!1;const i=new StemDate(t.e);return i<StemDate.now()?(this.token=null,this.expiresAt=new StemDate,!1):(this.token=t.t,this.expiresAt=i,!0)};e((()=>de(Mt)))||e((()=>localStorage.getItem(Mt)))||e((()=>sessionStorage.getItem(Mt)))}heckForTokenChangeEvent(e,t){let i=null;!e&&t?i=AuthToken.EventTypes.LOGIN:e&&!t?i=AuthToken.EventTypes.LOGOUT:e&&e!==t&&(i=AuthToken.EventTypes.REFRESH),i&&this.dispatch("change",i,e)}save(){const e=this.token?this.getTokenObjectStringified():null;try{pe(Mt,e,160704e3)}catch(e){}try{localStorage.setItem(Mt,e)}catch(e){}try{sessionStorage.setItem(Mt,e)}catch(e){}}setToken(e,t,i){void 0===i&&(i=!1);const n=this.token;this.token=e,this.expiresAt=new StemDate(t),this.usingMerchantToken=i,i||this.save(),this.checkForTokenChangeEvent(n,this.token)}sAuthenticated(){return this.token&&this.expiresAt>StemDate.now()}valueOf(){return this.token}toString(){return this.token}AuthToken.EventTypes={LOGIN:1,LOGOUT:2,REFRESH:3};class WebsocketSubscriber extends Dispatchable{constructor(){super(),this._logger=new Logger("WebsocketSubscriber"),this.streamHandlers=new Map,this.connectionStatus=WebsocketSubscriber.ConnectionStatus.NONE,this.websocket=null,this.failedReconnectAttempts=0,this.numConnectionAttempts=0}addStreamSubscribeListener(e,t){const i=this.constructor.STREAM_LISTENERS.get(e)||[];i.push(t),this.constructor.STREAM_LISTENERS.set(e,i)}setConnectionStatus(e){this.connectionStatus=e,this.dispatch("connectionStatus",e)}setAuthToken(e){this.authToken=e,e&&(this.authToken.isAuthenticated()&&this.tryReconnect(!0),e.addListener("change",(e=>{e===AuthToken.EventTypes.LOGOUT&&(this.disconnect(),this.streamHandlers.clear()),e!==AuthToken.EventTypes.LOGIN&&e!==AuthToken.EventTypes.REFRESH||this.tryReconnect(!0)})))}getUrl(){if(!this.authToken||this.authToken.usingMerchantToken)return null;const e=this.authToken.toString();return e?d+"/?token="+e:null}onnect(){this.disconnect(),this._logger.debug("Trying to create a websocket connection");const e=this.getUrl();if(e){this.setConnectionStatus(WebsocketSubscriber.ConnectionStatus.CONNECTING);try{this._logger.info("Connecting to "+e),this.websocket=this.newConnection(e),this.websocket.onopen=()=>{this.onWebsocketOpen()},this.websocket.onmessage=e=>{this.onWebsocketMessage(e)},this.websocket.onerror=e=>{this.onWebsocketError(e)},this.websocket.onclose=e=>{this.onWebsocketClose(e)}}catch(t){this.tryReconnect(),this._logger.warn("Failed to connect to ",e,"\nError: ",t.message)}}}disconnect(){this.websocket&&(this.websocket.close(),this.websocket=null,this.connectionStatus=this.constructor.ConnectionStatus.DISCONNECTED),this.reconnectTimeoutID&&(clearTimeout(this.reconnectTimeoutID),this.reconnectTimeoutID=null)}tryReconnect(e){let t=Math.min(this.constructor.CONNECT_RETRY_TIMEOUT*this.failedReconnectAttempts,this.constructor.CONNECT_RETRY_MAX_TIMEOUT);this.failedReconnectAttempts++,e&&(t=0,this.reconnectTimeoutID&&(clearTimeout(this.reconnectTimeoutID),this.reconnectTimeoutID=null)),this.reconnectTimeoutID||(this.reconnectTimeoutID=setTimeout((()=>{this.reconnectTimeoutID=null,this.connect()}),t))}ubscribe(e){if(this._logger.debug("Subscribing to stream ",e),this.streamHandlers.has(e))return void this._logger.debug("Already subscribed to stream ",e);let t=new WebsocketStreamHandler(this,e);return this.streamHandlers.set(e,t),this.isOpen()&&this.sendSubscribe(e),t}isOpenendSubscribe(e){this.isOpen()&&this.send("s "+e)}sendResubscribe(e,t){this.isOpen(e)&&this.send("r "+t+" "+e)}nStreamSubscribe(e){const t=this.constructor.STREAM_LISTENERS.get(e);if(t)for(const e of t)e();const i=this.getStreamHandler(e);i?i.setStatusSubscribed():this._logger.error("Received subscribe success response for unrequested stream #"+e)}onWebsocketOpen(){this.previousFailedReconnectAttempts=this.failedReconnectAttempts,this.failedReconnectAttempts=0,this._logger.log("Websocket connection established!"),this.reset(),this.setConnectionStatus(WebsocketSubscriber.ConnectionStatus.CONNECTED),this.resubscribe()}processStreamPacket(e){let t,i,n=e.indexOf(" ");if(!(n>0))return void this._logger.warn("Could not process stream packet: "+e);t=e.substr(0,n).trim(),i=e.substr(n+1).trim();let r=this.streamHandlers.get(t);r?r.processPacket(i):this._logger.error("No handler for websocket stream ",t)}fatalErrorClose(e){this.failedReconnectAttempts=this.previousFailedReconnectAttempts,this._logger.error("Server fatal error close: ",e),this.onWebsocketError(e)}onWebsocketMessage(e){if(e.data===WebsocketSubscriber.HEARTBEAT_MESSAGE);else{let t,i,n=e.data.indexOf(" ");if(n>0?(t=e.data.substr(0,n).trim(),i=e.data.substr(n+1).trim()):(t=e.data,i=""),"e"===t||"error"===t){if(this._logger.error("Websocket error: ",i),i=i.split(" "),"invalidSubscription"===i[0]){const e=i[1],t=this.getStreamHandler(e);t&&t.clearResubscribeTimeout()}}else"s"===t?(this._logger.debug("Successfully subscribed to stream ",i),this.onStreamSubscribe(i)):"m"===t?this.processStreamPacket(i):"c"===t?this.dispatch("serverCommand",i):"efc"===t?this.fatalErrorClose(i):this._logger.error("Can't process "+e.data)}}reset(){this.setConnectionStatus(WebsocketSubscriber.ConnectionStatus.DISCONNECTED);for(let e of this.streamHandlers.values())e.resetStatus()}onWebsocketError(e){this.dispatch("websocketError"),this.reset(),this.tryReconnect()}onWebsocketClose(e){this._logger.log("Connection closed!"),this.dispatch("websocketClosed"),this.reset(),this.tryReconnect()}send(e){this.websocket.send(e)}ddStreamListener(e,t){let i=this.getStreamHandler(e);i.callbackExists(t)||i.addListener(t)}unction Bt(e,t){return e.url&&(e=e.url),t&&(e+="?"+t),e}WebsocketSubscriber.ConnectionStatus={NONE:0,CONNECTING:1,CONNECTED:2,DISCONNECTED:3},WebsocketSubscriber.STREAM_SUBSCRIBE_TIMEOUT=3e3,WebsocketSubscriber.STREAM_SUBSCRIBE_MAX_TIMEOUT=3e4,WebsocketSubscriber.CONNECT_RETRY_TIMEOUT=3e3,WebsocketSubscriber.CONNECT_RETRY_MAX_TIMEOUT=3e4,WebsocketSubscriber.HEARTBEAT_MESSAGE="-hrtbt-",WebsocketSubscriber.STREAM_LISTENERS=new Map;class XHRPromise{constructor(e,t){void 0===t&&(t={}),e=new Request(e,t);let i=new XMLHttpRequest;this.options=t,this.request=e,this.xhr=i,this.promise=new Promise(((n,r)=>{this.promiseResolve=n,this.promiseReject=r,i.onload=()=>{let e=this.getResponseHeaders(),n=i.response||i.responseText,r={status:i.status,statusText:i.statusText,headers:e,url:i.responseURL||e.get("X-Request-URL")},s=new Response(n,r);"function"==typeof s[t.dataType]?(s=s[t.dataType](),s.then((e=>{this.resolve(e)}),(e=>{this.reject(e)}))):this.resolve(s)},i.onerror=()=>{this.reject(new TypeError("Network error"))},i.ontimeout=i.open(e.method,e.url,!0);const{onUploadProgress:s,onDownloadProgress:o}=this.options;s&&(i.upload.onprogress=s),o&&(i.onprogress=o),"include"===e.credentials&&(i.withCredentials=!0),i.responseType="blob";let a=!1;e.headers.forEach(((e,n)=>{t.body instanceof FormData&&"content-type"===n.toLowerCase()||("application/json"===e&&"content-type"===n.toLowerCase()&&(a=!0),i.setRequestHeader(n,e))})),t.body instanceof FormData?this.send(t.body):a?this.send(JSON.stringify(t.body)):e.blob().then((e=>{const t=e instanceof FormData||e.size?e:null;this.send(t)}))}))}getResponseHeaders(){return function(e){const t=(e.getAllResponseHeaders()||"").split(/\r?\n/);let i=new Headers;for(let e of t){let t=e.split(":"),n=t.shift().trim();if(n){let e=t.join(":").trim();i.append(n,e)}}return i}(this.xhr)}etPostprocessors(){return this.options.postprocessors||kt.defaultPostprocessors}esolve(e){for(const t of this.getPostprocessors())try{e=t(e,this)||e}catch(e){return void this.reject(e)}this.options.onSuccess?this.options.onSuccess(...arguments):this.promiseResolve(...arguments),this.options.onComplete&&this.options.onComplete()}reject(e){for(const t of this.getErrorPostprocessors())e=t(e)||e;this.options.onError?this.options.onError(...arguments):this._chained?this.promiseReject(...arguments):this.options.errorHandler?this.options.errorHandler(...arguments):console.error("Unhandled fetch error",...arguments),this.options.onComplete&&this.options.onComplete()}then(e,t){return this._chained=!0,t=t||this.options.errorHandler,this.getPromise().then(e,t)}catch(){return this._chained=!0,this.getPromise().catch(...arguments)}getXHR(){return this.xhr}getPromise(){return this.promise}getRequest(){return this.request}abort(){this.getXHR().abort()}addXHRListener(e,t){this.getXHR().addEventListener(...arguments)}addProgressListener(e){this.addXHRListener("progress",...arguments)}}function kt(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(oe(e))return kt(e.url,...arguments);let r=Object.assign({},...i);r.headers=new Headers(r.headers||{});const s=r.preprocessors||kt.defaultPreprocessors||[];for(const t of s)r=t(r,e)||r;r.onSuccess=r.onSuccess||r.success,r.onError=r.onError||r.error,r.onComplete=r.onComplete||r.complete,"boolean"==typeof r.cache&&(r.cache=r.cache?"force-cache":"reload"),r.method=r.method||"GET";const o=r.urlParams||r.urlSearchParams;if(o){const t=function(e,t){if(void 0===t&&(t="[]"),!oe(e))return e;let i=new URLSearchParams;for(const n of Object.keys(e)){let r=e[n];if(Array.isArray(r))for(let e of r)i.append(n+t,e);else i.set(n,r)}return i}(o,r.arraySearchParamSuffix);e=e instanceof Request?new Request(Bt(e.url,t),e):new Request(Bt(e,t),{})}return new XHRPromise(e,r)}kt.defaultPreprocessors=[],kt.defaultPostprocessors=[],kt.defaultErrorPostprocessors=[],kt.polyfill=!0;class AjaxHandler{constructor(e,t){void 0===t&&(t=null),null===this.constructor._baseAjax?this.constructor._baseAjax=this:0===arguments.length&&(e=this.constructor._baseAjax),this.parentHandler=e,this.preprocessors=e?[]:Array.from(kt.defaultPreprocessors),this.postprocessors=e?[]:Array.from(kt.defaultPostprocessors),this.errorPostprocessors=e?[]:Array.from(kt.defaultErrorPostprocessors),this.errorHandler=t}fetch(e){if(!e)return void console.error("Missing request for fetch");let t={preprocessors:this.getPreprocessors(),postprocessors:this.getPostprocessors(),errorPostprocessors:this.getErrorPostprocessors(),errorHandler:this.getErrorHandler()};for(const i of Object.keys(t))e[i]&&delete t[i];for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];return kt(e,t,...n)}request(){return this.fetch(...arguments)}get(e,t){return this.fetch(...arguments,{method:"GET"})}getJSON(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return this.get(e,{dataType:"json",data:t},...n)}post(e,t){return this.fetch(...arguments,{method:"POST"})}postJSON(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),r=2;r<i;r++)n[r-2]=arguments[r];return this.post(e,{dataType:"json",data:t},...n)}addPreprocessor(e){this.preprocessors.push(e)}getPreprocessors(){const e=this.parentHandler&&this.parentHandler.getPreprocessors()||[];return[...this.preprocessors,...e]}addPostprocessor(e){this.postprocessors.push(e)}getPostprocessors(){return[...this.parentHandler&&this.parentHandler.getPostprocessors()||[],...this.postprocessors]}addErrorPostprocessor(e){this.errorPostprocessors.push(e)}getErrorPostprocessors(){return[...this.parentHandler&&this.parentHandler.getErrorPostprocessors()||[],...this.errorPostprocessors]}getErrorHandlerfunction Ut(e){if(e.type&&(e.method=e.type.toUpperCase()),e.headers.set("X-Requested-With","XMLHttpRequest"),oe(e.data)){const t=e.method.toUpperCase();"GET"===t||"HEAD"===t?e.urlParams=e.urlParams||e.data:(e.headers.set("Content-Type","application/json"),e.body=e.data)}else e.body=e.body||e.data;return e}AjaxHandler._baseAjax=null,new AjaxHandler;let Ht=null;function zt(e){if(Ht!==e){Ht=e;for(let e of dt.TranslationElements.values())e.redraw()}}dt.TranslationElements=new Set,String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return se(e)&&(e=new RegExp(e,"g")),null!=this&&this.replace?this.replace(e,t):this}),document.startViewTransition||(document.startViewTransition=,dt.TranslationTextElement=class TranslationTextElement extends dt.TextElement{constructor(e){1===arguments.length?super(e):(super(""),this.setValue(...arguments))}setValue(e){this.value=arguments.length>1?Array.from(arguments):e,this.node&&this.redraw()}evaluate(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];if(Array.isArray(e)){arguments.length!==e.length&&console.error("Invalid arguments to evaluate ",Array.from(arguments));let t=e[0];for(let i=1;i<arguments.length;i++)t+=arguments[i],t+=e[i];return t}var r;return me(e=(null==(r=Ht)?void 0:r.get(e))||e,...i)}getValue(){let e=this.value;var t;return e=Array.isArray(this.value)?this.evaluate(...e):null!=(t=Ht&&Ht.get(e))?t:e,e}toString(){return this.getValue()}redraw(){this.node||(this.node=this.createNode()),super.redraw()}onMount(){dt.TranslationElements.add(this)},dt.T=let Ft=null;const Vt={networkError:"Internet connection error",unexpectedErrorWithCode:"Unexpected error: %1",subscribeShareUserName:"We will occasionally recognize members by name on %1. Do we have permission to share your name publicly?",donate:"Donate",editDonation:"Edit donation",editDonationDescription:"%1 - %2 donation.",activeDonationDescription1:"Your next payment will occur on %1.",activeDonationDescription2:"Thank you for supporting <b>%1!</b>",donationDashboardUpdateDescription:"The amount will update at your scheduled payment date.",donationErrorAmountNotChanged:"Donation amount not changed",donationSuccessAmountChanged:"Donation amount changed",cancelDonationTitle:"Confirm donation cancellation",cancelDonationDescription:"Are you sure you want to cancel your donation to %1?",cancelDonationSuccess:"Successfully canceled your recurring donation.",recurringDonor:"Recurring donor  %1",editRecurringDonation:"Edit recurring donation",recurringDonations:"Recurring donations",recurring:"Recurring",pastRecurringDonations:"Past recurring donations",makeAnotherDonation:"Make another donation",recurringDonationPaymentDescription:"Recurring donation to %1",oneTimeDonationPaymentDescription:"Donation to %1",usingCard:"%1 ending in %2",walletFunds:"Blink Wallet Funds",update:"Update",dashboard:"Dashboard",manageAutopay:"Manage Autopay",enableAutopay:"Enable Autopay",disableAutopay:"Disable Autopay",autopayInfo1:"Automatically pay for articles on <i>%1</i> that are at most <b>%2</b>.",autopayInfo2:"You can customize autopay settings in your ",disabledAutopayInfo1:"Your autopay settings are <b>disabled</b>.",disabledAutopayInfo2:"To enable autopay, open your ",blinkDashboard:"Blink Dashboard",autopayDefaultDescription:"Automatically pay for an article when you open it, instead of manually confirming each article purchase. Your autopay default setting applies to all publications, unless individually overridden.",articlePayments:"Purchases",articlePaymentsDescription:"Your list of purchases made through Blink.",emptyArticlePayments:"So far you havent purchased anything through Blink.",change:"Change",changesSaved:"Changes saved",cardAdded:"Card added",cardRemoved:"Card removed",addressRemoved:"Address removed",addNewPaymentMethod:"Add new card",choosePaymentMethod:"Choose a payment method",failedAddFunds:"Failed to add funds",makeDefault:"Make default",readForAmount:"Read for %1",addFundsAmount:"Add %1",back:"Back",subscriptionPaymentDescription:"Subscription to %1",chargeback:"Chargeback",walletTopUp:"Wallet top-up",walletTopUpAutomatic:"Wallet top-up (automatic)",subscriptionPayments:"Subscription payments",walletInsufficientFunds:"<b>Insufficient balance</b>. Add funds to continue reading.",autoReloadWallet:"Your card will be charged %1 when wallet balance drops below %2.",autoReload:"Auto reload",paymentMethods:"Payment methods",addCard:"Add card",removeCard:"Remove card",saveNewCard:"Save new card",personalDetails:"Personal details",confirmEmailChangeModalTitle:"Please confirm your current email",confirmEmailChangeLine1:"We sent a confirmation code to <b>%1</b> to verify it's you requesting this.",confirmEmailChangeLine2:"Once confirmed, your new email address will be <b>%1</b> and we'll send a confirmation to your old email (<b>%2</b>).",emailAddressAlreadyInUse:"Email address is already in use",emailSuccessfullyChanged:"Email successfully changed.",emailChangeUndoSuccessModalTitle:"Email changed back",emailChangeUndoSuccessText:"Your email was changed back to <b>%1</b>",settings:"Settings",alwaysShowBalance:"Always show balance",alwaysShowBalanceDescription:"Control if you want to always see your Blink balance while browsing.",showPaymentAnimation:"Payment animation",showPaymentAnimationDescription:"Show the pulsating animation every time a payment is made.",security:"Security",closeAccountLabel:"Close account",closeAccountText:"Closing your account will delete all your data from our servers and we will refund any outstanding balance to your original payment method. Once initiated, you'll have a 7 days grace period to reconsider, after which we will process the deletion request.",closeAccountReasonModalTitle:"We're sorry to see you leaving",closeAccountReasonModalDescription:"Tell us why you're closing your account, to help improve our service:",closeAccountFeedbackText:"Your feedback is important for us, is there anything else you would like to add?",closeAccountModalTitle:"We sent you a confirmation email",closeAccountConfirmationLine1:"Please enter the code we sent at <b>%1</b> to finish closing your account.",accountClosedModalTitle:"Account suspended and enqueue for deletion",accountClosedModalText:"After this grace period, your account will be processed for deletion. We will delete all your personal data from our servers and we will refund any outstanding balance to your original payment method.",name:"Name",email:"Email",save:"Save",logOut:"Log out",logIn:"Log in",other:"Other",paymentMethod:"Payment method",paymentHistory:"Payment history",paymentHistoryDescription:"A list of your credit card charges. These may differ from the payments you made using your Blink wallet balance.",autoPayAndBelow1:"Automatically pay for articles ",autoPayAndBelow2:" and below.",autopayDisabled:"Automatically paying on access is disabled",controlAutopayPerMerchant:"You can also enable for individual publications:",emailAddress:"Email address",enterEmailAddress:"Enter your email address",total:"Total",cancel:"Cancel",cancelSubscription:"Cancel subscription",cancelSubscriptionTitle:"Confirm subscription cancellation",cancelSubscriptionDescription:"Are you sure you want to cancel your %1 subscription? Your service will be available only until the end of paid period.",cancelSubscriptionSuccess:"Successfully canceled",reactivateSubscriptionDescription:"Are you sure you want to reactivate your %1 subscription?",reactivateSubscriptionTitle:"Confirm subscription reactivation",reactivateSubscriptionSuccess:"Successfully reactivated",updateEntryPaymentMethodSuccess:"Payment method successfully updated",expires:"Expires",reactivate:"Reactivate",resubscribe:"Re-subscribe",canceled:"canceled",publicationName:"Publication",planDetails:"Plan details",lastPayment:"Last payment",nextPayment:"Next payment",yes:"Yes",no:"No",edit:"Edit",manageSubscription:"Manage subscription",activeSubscriptions:"Active subscriptions",pastSubscriptions:"Past subscriptions",nextBillingDate:"Next billing date %1",expiresOnDate:"Expires on %1",walletPage:"Wallet",subscriptionsPage:"Subscriptions",accountPage:"Account",donationsPage:"Donations",articlesPage:"Purchases",autopay:"Autopay",continue:"Continue",or:"or",unexpectedError:"Unexpected error!",continueWithExternalAuth:"Continue with a third-party account",orContinueWithEmailAddress:"Or continue with email",continueWithEmail:"Continue with email",lookUpPrintMagazineTitle:"Look up your account",lookUpPrintMagazineDescription:"Look up your account using your account number or email address and zip code.",lookUpPrintMagazineButton:"Look up your print subscription",lookupPrintMagazineZipCode:"Zip code",createAccount:"Create account",loggingInByEmailKey:"Authenticating....",redirectingToInitialPage:"Redirecting to initial page...",confirm:"Confirm",choose:"Choose",terms:"Terms of Service",policy:"Privacy Policy",termsAndConditions:"By continuing, you agree to our ",refund:"Refund",selectRefundReason:"Select a reason",refundTransactionSuccess:"Successfully refunded",chooseYourMerchant:"Choose your merchant",donations:"Donations",from:"From",to:"To",reports:"Reports",download:"Download",payouts:"Payouts",subscribe:"Subscribe",errorWhileSaving:"Error while saving",chooseAddress:"Choose address",addNewAddress:"Add new address",addressStreet:"Street address",addressCountry:"Country",addressCity:"City",addressState:"State",addressStateRegion:"State/Region",addressZipCode:"Zip code",addressZipCodeInvalid:"Invalid format.",zipCodeDoesNotMatchState:"Zip code does not match state.",invalidStateName:"Invalid state name.",addressStateNotRequired:"Not required",shippingAddress:"Shipping address",wrongEmail:"Use another login?",enterConfirmationCodeShort:"To continue, please enter the 6-digit verification code sent to %1.",enterConfirmationCodeLong:"To continue, please enter the verification code sent to %1.",resendCode:"Resend code",priceIncludingShippingAndTax:"(%1 including shipping and tax)",activeSubscriptionText:"You have an active subscription on this website.",activeSubscription:"Active subscription",canceledSubscription:"You have a canceled subscription on this website.",incorrectConfirmationCode:"Wrong code, try again.",confirmationCodeResent:"New verification code sent.",description:"Description",amount:"amount",date:"date",footerSupportEmailText:"Need help? Email us at ",promptSetCardAsDefault:"Set this card as default?",emptySubscriptionPayments:"You havent made any subscription payments through Blink yet.",emptyActiveSubscriptions:"You dont have any active subscriptions.",emptyRecurringDonations:"You dont have any recurring donations.",donationPayments:"Donation payments",emptyDonationPayments:"You havent made any donation payments through Blink yet.",termsPreMessage:"Blink makes it easy and secure to log in and pay anywhere on the Internet. ",termsAuthenticated:"See our ",termsLandingPage:"By signing up, you agree to our ",default:"Default",pickStartDate:"Pick a <b>start date</b>",pickEndDate:"Pick an <b>end date</b>",reportsPageDescription:"Download the previously generated reports in CSV format here.",discounted:"Discounted",discountInfo:"Discount code %1 (%2). More information can be seen by exporting the data as CSV.",subscribeInlineAuth1:"<b>%1</b> uses <b>Blink</b> to process subscriptions.",merchantUsesBlinkForDonations:"<b>%1</b> uses <b>Blink</b> to accept donations.",authEmailConfirmationTitle:"Please confirm your email address",saveCardDetailsCheckbox:"Securely save my card details for future payments.",addCardNameInput:"Name on card",donationDetails:"Donation details",donorCoversFeesCheckbox:"I'll add %1 to cover the transaction fees so you can keep 100% of my donation.",donateInlineFlowButton:"Donate %1%2",editDonationInlineFlowButton:"Update to %1/%2",donateThankYouTitleRecurring:"Thank you for donating %1!",donateThankYouTitleOneTime:"Thank you for donating %1!",donateThankYouMessageRecurring:"You are now a recurring donor for <b>%1</b>. Weve sent you a confirmation email at <b>%2</b>.",donateThankYouMessageOneTime:"You have successfully donated to <b>%1</b>. Weve sent you a confirmation email at <b>%2</b>.",donateThankYouBottomMessage:"In the future, you have the possibility to:",donateThankYouRecurringGuideline1:"Edit your recurring donation or make another one-time donation from your Blink Wallet.",donateThankYouRecurringGuideline2:"Access your Blink Wallet by clicking on the widget in the lower right corner of the screen.",donateThankYouOneTimeGuideline1:"Make another donation or become a recurring donor from your Blink Wallet.",donateThankYouOneTimeGuideline2:"Access your Blink Wallet by clicking on the widget in the lower right corner of the screen.",ok:"Ok",finalizePayment:"Finalize payment",manageMyAccount:"Manage my account",myAccount:"My Account",close:"Close",supportByDonating:"Please consider making a financial contribution to maintain, expand and improve %1.",paymentFailed:"Sorry, payment failed!",subscribeFailedMessage:" Alternatively, please try a different payment method.",editPaymentDetails:"Edit payment details",retryPayment:"Retry payment",genericCardError:"There was an error while processing this card.",blinkWallet:"Blink Wallet",amountInvalidError:"Enter an amount between %1 and %2",alreadyHaveAnAccount:"Already have an account?",updateAddressSuccess:"Successfully updated shipping address",updateAddressTitle:"Choose shipping address",discountCode:"Discount code",invalidDiscountCode:"Invalid discount code.",removeCardEndingIn:"Are you sure you want to remove %1 ending in %2?",remove:"Remove",cancelDonation:"Cancel donation",updatePaymentMethod:"Update payment method",subscribePaymentFailed:"Your previous payment failed. Change your payment method or retry your current one to not lose your subscription.",donatePaymentFailedRetry:"Your previous payment failed. Change your payment method or retry your current one to continue supporting %1.",entrySuccessfullyPaid:"Successfully paid",updateAndRetryPayment:"Update & retry payment",retry:"Retry",updateShippingAddress:"Update shipping address",updateShippingAddressDescriptionLine1:"All of your shipments for this subscription will go to this address starting from the next billing cycle.",updateShippingAddressDescriptionLine2:"Your new subscription cost will change from <b>%1</b> to <b>%2</b>.",emptyIndexExpandedDescription:"This publication doesn't have the functionality you are looking for enabled. (subscriptions/donations)",functionalityNotEnabledNewsletters:"<b>%1</b> doesn't offer any newsletters at this time",functionalityNotEnabledSubscriptions:"<b>%1</b> doesn't accept subscriptions at this time",functionalityNotEnabledDonations:"<b>%1</b> doesn't accept donations at this time",functionalityNotEnabledShop:"<b>%1</b> doesn't accept individual purchases at this time",functionalityNotEnabled:"<b>%1</b> doesn't have the functionality you are looking for (%2)",unauthorizedUserAccountTitle:"This user account isn't associated with a Blink merchant account.",unauthorizedUserAccountDescriptionLine1:"<b>%1</b> user account isn't associated with a Blink merchant account.",unauthorizedUserAccountDescriptionLine2:"Try logging in with a different email address.",deleteMessage:"Delete",switchAccount:"Switch account",deleteAddressTitle:"Confirm address deletion",deleteAddressDescription:"Are you sure you want to remove <b>%1</b> from your address list?",removeAddress:"Remove address",editAddress:"Edit address",addressInUseError:"This address is currently in use, it cannot be modified.",paymentMethodInUseError:"Cannot remove this payment method. It is being used for an active recurring payment.",changeDetails:"Change details",myAddresses:"My Addresses",emptyAddressListDescription:"You don't have any physical addresses associated with your Blink account",subscribeInlineFlowButton:"Subscribe for %1",discountCodeInputLabel:"Apply discount code",paymentDetails:"Payment details",reviewOrder:"Review order",address:"address",payment:"payment",emptyPaymentMethodsListDescription:"You don't have any cards associated with your Blink account.",continueToPayment:"Continue to payment",returnToHomepage:"Return to %1 homepage",donatePageRecurringDonationMessage:"You are a recurring donor, currently contributing <b>%1</b>. Edit your recurring donation below or cancel it ",here:"here",donatePageCancelDonationTitle:"Cancel recurring donation?",donatePageCancelDonationText1:"Thank you for contributing to <b>%1</b> on a recurring basis. We appreciate all the support weve been getting from all our community members.",donatePageCancelDonationText2:"We are sorry to see you go and hope you will continue using %1.",donatePageCancelDonationButton:"Yes, cancel my donation",donatePageDonationCanceledTitle:"Donation canceled",noPaymentMethodForThisSubscription:"No payment method associated",noPaymentMethodForThisSubscriptionGifted:"Your subscription is a gift. Changing the payment method will grant you full control over the subscription, including upgrading it or preventing a cancellation from the gift buyer.",considerSubscribing:"If you love our content and want to help support us, become a subscriber.",subscribeToNewsletter:"Sign up to newsletter",newslettersEmailDescription:"You will be subscribed to the newsletters using the email address <b>%1</b>.",newsletterEmailDescription:"You will be subscribed to the newsletter using the email address <b>%1</b>.",newsletterDashboardEmailDescription:"You will be subscribed to the newsletter using the email address <b>%1</b>.",newsletterSubscribeSuccessTitle:"Thank you for subscribing to %1 newsletter(s)!",newsletterSuccessMessage:"You can review your newsletter subscriptions in ",chooseCardDescription:"Use one of the payment methods securely saved in your account or add a new one.",creditCardsListHeader:"Your payment methods",donationCanceledText1:"Your donation of <b>%1</b> has been canceled!",donationCanceledText2:"If you change your mind in the future, you have the possibility to:",donationCanceledGuideline1:"Make another donation or become a recurring donor from your Blink Wallet.",donationCanceledGuideline2:"Access your Blink Wallet by clicking on the widget in the lower right corner of the screen.",editDonationSuccessTitle:"Congratulations!",editDonationSuccessText1:"Youve updated your recurring donation to <b>%1</b>!",editDonationSuccessText2:"In the future, you have the possibility to:",editDonationSuccessGuideline1:"Edit your recurring donation or make another one-time donation from your Blink Wallet.",editDonationSuccessGuideline2:"Access your Blink Wallet by clicking on the widget in the lower right corner of the screen.",subscriptionPlan:"Subscription plan",subscriptionPlanDescription:"Your current subscription plan is <b>%1</b> at <b>%2/%3</b>.",discountCodeApplied:"Discount code <b>%1</b> successfully applied.",subscribePaymentDescription:"Your payment method will be automatically charged <b>%1</b> every %2 starting today.",giftSubscriptionPaymentDescription:"Your payment method will be charged <b>%1</b>.",subscribeThankYouTitle:"Congratulations, you are now a subscriber!",subscribeThankYouText:"Your subscription plan is %1. In the future, you have the possibility to:",subscribeThankYouGuideline1:"Edit or cancel your subscription from your Blink Wallet.",subscribeThankYouGuideline2:"Access your Blink Wallet by clicking on the widget in the lower right corner of the screen.",changePlan:"Change plan",currentSubscriptionPlan:"You current subscrption plan is %1, paid every %2.",changePlanButtonLabel:"Change to %1",subscribedButtonLabel:"Subscribed for %1",reviewChange:"Review change",editSubscriptionCancelTitle:"Are you sure you want to cancel?",editSubscriptionCancelText1:"Your current subscriptions plan is <b>%1</b> at <b>%2</b> and will remain active until %3.",editSubscriptionCancelText2:"Your subscription plan won't automatically renew.",editSubscriptionCancelButton:"Yes, cancel my subscription",subscriptionCanceled:"Subscription canceled",updateAtEndCycleCheckbox:"Make the change at the end of the current billing period (%1)",updateAtEndCyclePaymentInfo:"Your payment method will be automatically charged <b>%1</b> every %2 starting on %3.",updateAtEndCycleChangeOffer:" Youll keep your current plans benefits until then.",updateInstantlyPaymentInfo:"You will be charged <b>%1</b> now, then <b>%2</b> every %3 starting on %4.",newsletterDescription:"%1",newsletterSubscribeSingleNewsletterAuthenticatedTitle:"Sign up below",newsletterSubscribeSingleNewsletterUnauthenticatedTitle:"Enter your email address and sign up below",newsletterSubscribeMultipleNewsletterAuthenticatedTitle:"Check the boxes below to sign up for each newsletter",newsletterSubscribeMultipleNewsletterUnauthenticatedTitle:"Enter your email address and check the boxes below to sign up.",inlineUserDashboardSubscription:"Subscription",notSubscribedToMerchant:"You are not currently subscribed to <b>%1</b>.",subscribedCurrentPlan:"Your current subscription plan is <b>%1</b> at <b>%2</b>.",paymentMethodCharge:"Your payment method is automatically charged <b>%1</b> every %2.",inlineAddressSectionTitle:"Address",emptyPayments:"You havent made any payments yet.",recurringDonation:"Recurring Donation",notRecurringDonorToMerchant:"Please consider making a financial contribution to maintain, expand and improve <b>%1</b>.",recurringDonorContributing:"You are a recurring donor, currently contributing <b>%1</b>.",makeAnotherDonationText:"You can still make another one-time donation to show your support.",pastDonations:"Past Donations",subscriptionPlanTitle:"Subscription Plan",paymentMethodTitle:"Payment Method",makeAnotherDonationTitle:"Make Another Donation",signUpForMerchantNewsletter:"Sign up for a %1 newsletter!",newslettersEditDescription:"Check the boxes below to sign up. You will be subscribed to the newsletters using the email address <b>%1</b>.",allowPromotionalEmailsFromMerchant:"Receive promotional emails from <b>%1</b>",newslettersTitle:"Newsletters",personalDetailsTitle:"Personal Details",myAddressesTitle:"My Addresses",paymentMethodsTitle:"Payment Methods",myDashboard:"My Dashboard",dashboardExternalLinkText:"For more control over your account access your ",addNew:"Add new",accountNumber:"Account number",nameAndZip:"Name and zip code",invalidEmailUnsubscribeLink:"Invalid unsubscribe link",manageNewsletterPreferences:"Manage your newsletter preferences for <b>%1</b>.",manageNewsletterPreferencesNewsletter:"You received this email because you are subscribed to newsletter <b>%1</b>. Toggle the checkbox below to unsubscribe.",manageNewsletterPreferencesPromotional:"This is a promotional email. Toggle the last checkbox below to unsubscribe from such emails in the future.",updateSubscriptionPlanDescription:"You will update your subscription plan to <b>%1</b> at <b>%2</b>.",updateSubscriptionPlanAddress:"Your shipping address will be <b>%1</b>.",international:"International",subscriptionPerksList:"This subscription includes:",cardNumberInputPlaceholder:"Card number",cardDateInputPlaceholder:"MM/YY",cardCVCInputPlaceholder:"CVC",bestValue:"BEST VALUE",bestValueBelowPrice:"",merchantUserResourcesAccessLink:"Load %1 from Blink",usingBlinkDefault:"Using Blink default",authenticationPanelTitle:" ",changeSubscription:"Change subscription",tnrSubscribeSuccess:"Your subscription continues at the best rate available until you decide to cancel it. We always send a reminder email, including the rate, prior to the charge.",subscribeAndEditSuccess:"Thank you for supporting <i>%1</i>. Please check your email inbox for important info related to your subscription.",subscribeChangeSuccess:"You have successfully updated your subscription.",finalizeDonation:"Finalize donation",donationExplanationMessage:"",tnrDashboardPlanMessage:"Your subscription continues at the best rate available until you decide to cancel it (if account is set to auto-renew and we have your card details). We always send a reminder email, including the rate, prior to charging your card.",newsletterTitle:"Sign up for a %1 newsletter",tnrContactCustomerSupport:" For assistance, please reach out to <a href='https://newrepublic.com/faq'>customer support</a>.",donation:"Donation",giftSubscriptionButtonLabel:"Gift for %1",giftDetails:"Gift details",giftEmail:"Recipient email address",giftName:"Your name (leave blank for anonymous gifts)",giftMessage:"Gift message",recipientAddress:"Recipient address",giftSubscription:"Gift subscription",giftSubscriptionSuccessTitle:"Congratulations, your gift has been sent!",giftSubscriptionSuccessText:"In the future, you have the possibility to:",giftSubscriptionSuccessGuideline1:"Cancel or edit your gift from your Blink Wallet.",giftSubscriptionSuccessGuideline2:"Access your Blink Wallet by clicking on the widget in the lower right corner of the screen.",giftSubscriptionText:"You have bought a gift subscription for <b>%1</b>. The subscription plan is <b>%2</b> for <b>%3</b>.",shopBuyNow:"Buy Now",mission:"Mission",features:"Features",wallet:"Wallet",missionTitle:"Its more than just convenience though",missionSubtitle:"Our goal is to make the Internet a better place for both readers and publishers.",loginMessage:"Already using Blink?",publisherHeaderTitle:"Shared Identity and Payment Solutions",readerHeaderTitle:"Change the way you use the Internet",publisherHeaderDescription:"Blink is a set of tools built to help publishers and creators of digital content. Choose the services you need. Integrate seamlessly. Become part of an amazing network.",readerHeaderDescription:"Blink offers an easy way to log in to different publications and make digital news purchases. Access the content you love. Support those who create it.",supportJournalistsTitle:"Support serious journalism directly",supportJournalistsDescription1:"The only way the situation can be improved is by paying for quality content directly. We need technology that makes this easy, seamless and fair.",supportJournalistsDescription2:"Lets reward the publishers that are keeping our communities well informed. Their work is vital for a healthy society.",valuePrivacyTitle:"We value your privacy",valuePrivacyDescription1:"We live in a world where big tech companies feed on data, at times often invading our privacy without our explicit consent. Blinks business model aligns with your best interests.",valuePrivacyDescription2:"We want readers to pay with their wallets and not with their data.",clickBaitTitle:"Were drowning in clickbait",clickBaitDescription:"The current model of online advertising is intrusive to your reading experience. It also incentives publications to flood us with clickbait, to grab our attention. We need to change this.",company:"Company",ourCompanyTitle:"Our company",ourCompanyDescription1:"<b>Blink</b> is a technology company founded in 2018 and headquartered in the heart of Silicon Valley, in Palo Alto, CA, with additional offices in London and Bucharest.",ourCompanyDescription2:"Our goal is to create new identity and payments solutions designed for the Internet, from the ground up. We are providing our current suite of tools as the first step towards building software to help readers and publishers alike.",findOutMore:"Find out more",companyHeaderTitle:"What drives us",companyHeaderDescription1:"The Internet has revolutionzed the way we see the world. Global supply and demand combined with access to information have reshaped the established conventions.",companyHeaderDescription2:"But the transition to digital hasn't been perfect. Fundamentally, the Internet provides the best way for transmitting data, but it lacks support for user identification and a native payment mechanism.",companyHeaderDescription3:"The Internet's initial promise of rich content accesibile for everyone is still far away. Content creators are struggling to monetize their work, and users find it difficult to navigate through low quality content. Blink's mission is to build a better Internet - to empower content creators and readers alike.",blinkWalletDescription1:"Create one account and access all partner publications.",blinkWalletDescription2:"You can access the Blink Wallet from the lower right corner of your screen.",identity:"Identity",pay:"Pay",funnel:"Funnel",requestDemo:"Request a demo",headerSubtext:"Schedule a meeting to see how Blink best suits your needs.",ourProducts:"Our products",blinkIdentity:"Blink Identity",blinkPay:"Blink Pay",blinkFunnel:"Blink Funnel",identityShortText:"Get to know your readers with our one-click login.",payShortText:"Remove payment friction and convert your audience to paying readers.",funnelShortText:"Optimize the conversion process and maximize your revenue.",howItWorks:"How it works",identityLongSummary:"<b>Blink Identity</b> helps to reduce anonymous traffic and get readers registered.",identityLongText:"Readers sign up with Blink only once  instead of registering with every publication they visit. They can then use their Blink account to read on other sites, being able to log in with a single click. For subsequent visits, they stay logged-in no matter their device or platform.",payLongSummary:"<b>Blink Pay</b> removes the friction from online payments.",payLongText:"Readers have only to enter their payment information the first time they make an online purchase. For subsequent purchases with any Blink partner, readers can subscribe, donate or purchase other type of content with just one click.",funnelLongSummary:"<b>Blink Funnel</b> helps you optimize the conversion process and maximize your revenue.",funnelLongText:"Our dashboard helps you identify user trends and opportunities for partnership with other publications. We also provide machine learning tools for you to discover new insights, as well as test and refine them with A/B testing.",readerRelationshipTitle:"Reader Relationship",readerRelationshipText:"We don't change your website experience, preserving your reader relationship",networkEffectsTitle:"Network Effects",networkEffectsText:"As more publishers join the network, everyone benefits from the increased user base",frictionlessUXTitle:"Frictionless UX",frictionlessUXText:"Removing login and payment friction increases conversion rates",easyIntegrationTitle:"Easy Integration",easyIntegrationText:"Integrating with Blink requires minimum development efforts on your side",modularityTitle:"Modularity",modularityText:"You can choose the Blink modules that best suit your needs",supportTitle:"Support",supportText:"We'll work with you so you can get the most from our software",valuePropositionTitle:"Why Blink?",readyToGetStartedTitle:"Ready to get started?",readyToGetStartedSubtitlePublisher:"Schedule a meeting to find out more.",readyToGetStartedSubtitleReader:"Create a Blink account now.",companyStats1:"Blink founded",companyStats2:"global offices",companyStats3:"employees",footerCopyright:" %1 Blink Ledger Systems Inc. All rights reserved",navPublisher:"PUBLISHER",navReader:"READER",walletProductTitle1:"Start reading",walletProductDescription1:"Blink integrates directly with publishers, so you don't have to do a thing.",walletProductTitle2:"Works on any device",walletProductDescription2:"It doesnt matter how you access your newssmartphone or laptop, search engine or messaging app.",walletProductTitle3:"Enjoy the experience",walletProductDescription3:"We have designed Blink to save you time, and protect your privacy.",walletTextImageSectionTitle1:"Universal Log in",walletTextImageSectionDescription1a:"Accessing the news is a hassle. The more you want to find out about the world, the more paywalls you hit  Blink fixes this.",walletTextImageSectionDescription1b:"A Blink account works across publishers. So you'll no longer have to ask yourself  do I have an account? Which email did I use? What's the password?",walletTextImageSectionTitle2:"Frictionless Payments",walletTextImageSectionDescription2a:"Paying on the Internet is more cumbersome than it should be.",walletTextImageSectionDescription2b:"We make payments as easy as accessing information. Subscribe, donate, or access a podcast or article with one click, or enable autopay for small, frequent purchases.",walletTextImageSectionDescription2c:"Manage all your subscriptions and your reading history in one place."},Gt=new Map;foslationTextElement{canOverwrite(){return!1}}for(const e of Object.keys(Vt))-1!==Vt[e].indexOf("%1")?Vt[e]=function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return i=i.map((e=>String(e))),new MessageTextElemenfunction(){return new MessageTextElement(e)}});class BaseEnum{constructor(e){this.value=e.value,this.name=e.name||String(this.value),Object.assign(this,e)}getName(){return this.name}getValue(){return this.value}toString(){return this.getName()}valueOf(){return this.value}static defaultName(e){return(e=String(e).repl," ")).toLowerCase().split(" ").map((e=>Q(e))).join(" ")}static init(e,i){const n=se(i)||re(i)||ne(i),r=n&&i||e.toLowerCase();return n&&(i=null),new this(t({name:this.defaultName(e),value:r},i))}static all(){return Array.from(this.allEntries)}static fromValue(e){if(e instanceof this)return e;for(const t of this.all())if(t.value===e)return t;return null}static makeFieldLoader(){return e=>this.fromValue(e)||e}}function Wt(e){const t=[];for(const i in e){const n=i.toUpperCase();i===n&&(e[i]=e.init(i,e[i]),t.push(e[i]))}return e.allEntries=t,Object.freeze(e)}class Currency extends StoreObject{getDecimalDigitsCount(){return this.decimalDigits}getMainUnitSymbol(){return this.symbol}getSubunitSymbol(){return this.subdivisionSymbol}amountToMainUnits(e){return e/10**this.decimalDigits}amountToSubunits(e){return e/10**(this.decimalDigits-this.subdivisionDecimalDigits)}subunitsToAmount(e){return e*10**(this.decimalDigits-this.subdivisionDecimalDigits)}mainUnitsToAmount(e){return e*10**this.decimalDigits}isMainUnitAmount(e){return e>=10**this.decimalDigits}getMainUnitsAmount(e){return Math.floor(this.amountToMainUnits(e))}getDecimalreturn Math.floor(this.amountToSubunits(e))}getIsoCode(){return this.isoCode.toLowerCase()}getFormatter(){return new Intl.NumberFormat("en-US",{style:"currency",currency:this.isoCode.toUpperCase(),maximumFractionDigits:2})}toString(){return this.getIsoCode().toUpperCase()}}class CurrencyStoreClass extends(yt("Currency",Currency)){getByIsoCode(e){return void 0===e&&(e=""),e=String(e).toLowerCase(),this.find((t=>t.getIsoCode()===e))}get(e){return super.get(e)||this.getByIsoCode(e)}}const jt=new CurrencyStoreClass;class Money{constructor(e,t){var i;if(this.defaultDecimalsDisplayed=2,this.amount=e,t||(this.amount=null!=(i=e.amount)?i:e.balance,t=e.currency||e.currencyId||e.getCurrency()),!(t=t instanceof Currency?t:jt.get(t)))throw"Invalid currency provided.";if(this.currency=t,se(this.amount)){const e=parseFloat(this.amount);if(isNaN(e))throw"Invalid amount";this.amount=Math.round(this.currency.mainUnitsToAmount(e))}}static optionally(e,t){return null!=e?new this(e,t):null}static makeFieldLoader(e){const t=e.currencyField||"currency";return(e,i)=>thit){return new Money(e,t).toMainUnitString()}getAmount(){return this.amount}getCurrency(){return this.currency}subtract(e){this.ensureCurrencyMatch(e);const t=this.getAmount()-e.getAmount();return new Money(t,this.getCurrency())}add(e,t){void 0===t&&(t=1),this.ensureCurrencyMatch(e);const i=this.getAmount()+e.getAmount()*t;return new Money(i,this.getCurrency())}multiply(e){return new (1/e)}isZero(){return 0===this.getAmount()}equals(e){return this.ensureCurrencyMatch(e),this.getAmount()===e.getAmount()}greaterThan(e){return this.ensureCurrencyMatch(e),this.getAmount()>e.getAmount()}lessThan(e){return this.ensureCurrencyMatch(e),this.getAmount()>e.getAmount()}toMainUnitString(e){let{decimalsDisplayed:t=this.defaultDecimalsDisplayed,includeSymbol:i=!0}=void 0===e?{}:e;const n=this.getAmount(),r=this.getCurrency();return(i?r.getMainUnitSymbol():"")+r.amountToMainUnits(n).toFixed(t)}toSubunitString(e){void 0===e&&(e=0);const t=this.getAmount(),i=this.getCurrency();return Math.round(i.amountToSubunits(t)).toFixed(e)+i.getSubunitSymbol()}getMainUnitNumericValue(){const e=this.getCurrency(),t=this.getAmount();return e.getDecimalAmount(t)?e.amountToMainUnits(t).toFixed(2):e.amountToMainUnits(t)}toString(){const e=this.getCurrency(),t=this.getAmount();if(this.constructor.useFormatter){const i=e.amountToMainUnits(t);return e.getFormatter().format(i)}return e.isMainUnitAmount(t)?e.getDecimalAmount(t)?this.toMainUnitString():this.toMainUnitString({decimalsDisplayed:0}):this.toSubunitString()}valueOf(){return this.amount}ensureCurrencyMatch(e){if(this.getCurrency(nt:this.amount,currencyId:this.currency.id}}}Money.useFormatter=!1;class MoneyObject extends StoreObject{getCurrency(){return jt.get(this.currencyId)}getAmount(){const e=this.getCurrency();return new Money(this.amount,e)}}function Yt(e){e.headers.delete("X-Requested-With"),"application/json"===e.headers.get("Content-Type")&&(e.headers.set("Content-Type","text/plain"),e.body=JSON.stringify(e.data))}function Kt(e,i){if(void 0===i&&(i={allowNulls:!0}),e instanceof BaseEnum)return e.valueOf();if(e instanceof Money)return e.amount;if(e instanceof Date)return new StemDate(e).unix();if(Array.isArray(e))return e.map((e=>Kt(e,i)));if(oe(e)){e=t({},e);for(const[t,n]of Object.entries(e))null!=n||!0===i.allowNulls||i.allowNulls.has(t)?e[t]=Kt(e[t],i):delete e[t]}return e}class BlinkAjaxHandler extends AjaxHandler{getPreprocessors(){return[...super.getPreprocessors(),Yt]}}const Zt=new class BlinkApiClient extends Dispatchable{constructor(e){super(),this.websocketSubscriber=new WebsocketSubscriber,this.ajaxHandler=new BlinkAjaxHandler(null,null),Array.isArray(e)||(e=[e]),this.httpApiServerAddresses=e,this.ajaxHandler.addPreprocessor(Ut)}initWebsocketConnection(e){this.websocketSubscriber.setAuthToken(e)}dropWebsocketConnection(){this.websocketSubscriber.disconnect()}addWebsocketListener(e,t){this.websocketSubscriber.addStreamListener(e,t)}getAjaxHandler(){return this.ajaxHandler}get(e,t,i){return void 0===i&&(i={}),this.fetch(e,t,"GET","json",i)}post(e,t,i){return void 0===i&&(i={}),this.fetch(e,t,"POST","json",i)}getApiAddress(e){const t=Math.floor(Math.random()*this.httpApiServerAddresses.length);return this.httpApiServerAddresses[t]+e}fetch(e,i,n,r,s){if(void 0===r&&(r="json"),void 0===s&&(s={allowNulls:!1}),e.startsWith("/")||(e="/"+e),i=Kt(i=t({},i),{allowNulls:!0===s.allowNulls||new Set(s.allowNulls)}),"GET"===n)for(const[e,t]of Object.entries(i))oe(t)&&(i[e]=JSON.stringify(t));const o=this.ajaxHandler.fetch(this.getApiAddress(e),t({dataType:r,method:n,data:i,arraySearchParamSuffix:""},s));return new Promise(((e,t)=>o.then((i=>{i.erro>{t(this.getPrettifiedApiRuntimeError(e,o))}))))}getPrettifiedApiRuntimeError(e,t){if(!(e instanceof Error))return e&&(e.isAPIError=!0),e;const i={statusCode:t.getXHR().status,detail:e.message,stacktrace:e.stack,message:"Network error"===e.message?Vt.networkError:Vt.unexpectedErrorWithCode(t.getXHR().status)};return console.error(i),i}getErrorFromResponse(e,i){const n=i.getXHR().status;return e&&e.error?t({},e.error,{statusCode:n}):n>=400?t({},e,{statusCode:n}):null}}(l);var qt,$t,Xt,Jt,Qt,ei,ti,ii;Zt.getAjaxHandler().addPostprocessor(((e,t)=>{const{state:i,events:n,userId:r}=e;r&&(Ee.userId=r),i&&!t.options.disableStateImport&&gt.importState(i),n&&!t.options.disableEventsImport&&gt.applyEvent(n)})),window.apiClient=Zt;let ni=Wt((($t=class EditableObjectStatus extends BaseEnum{}).DRAFT=void 0,$t.ACTIVE=void 0,$t.INACTIVE=void 0,$t.EXPIRED=void 0,qt=$t))||qt,ri=Wt(((Jt=class VisibilityStatus extends BaseEnum{}).PRIVATE=void 0,Jt.HIDDEN=void 0,Jt.PUBLIC=void 0,Xt=Jt))||Xt,si=Wt(((ei=class TaskStatus extends BaseEnum{isDone(){return this===this.constructor.FAILED||this===this.constructor.SUCCEEDED}}).PENDING=void 0,ei.IN_PROGRESS=void 0,ei.FAILED=void 0,ei.SUCCEEDED=void 0,Qt=ei))||Qt,oi=Wt(((ii=class InputFieldRequiredType extends BaseEnum{}).REQUIRED=void 0,ii.OPTIONAL=void 0,ii.NOT_REQUESTED=void 0,ti=ii))||ti;var ai,li,ci,ui,hi,di,pi,mi,gi,bi,fi,yi,Ci,Si,Ei,Ai,wi,Ti,vi,Oi,Di,Ri,Pi,Ii,Li,Ni,_i,xi,Mi,Bi,ki,Ui,Hi,zi,Fi;let Vi=(ai=Pt("Currency"),li=Pt(String),ci=Pt(String),ui=Pt(Date),hi=Pt(String),di=Pt(String),pi=Pt(Boolean),mi=Pt(Boolean),gi=Pt(Boolean),bi=Pt(Boolean),fi=Pt(Boolean),yi=Pt(Boolean),Ci=Pt(Boolean),Si=Pt(Boolean),Ei=Pt("LegalEntity"),Ai=Pt(ni),wi=Pt(Object),Ti=class Merchant extends StoreObject{constructor(){super(...arguments),i(this,"currency",vi,this),i(this,"name",Oi,this),i(this,"alias",Di,this),i(this,"createdAt",Ri,this),i(this,"url",Pi,this),i(this,"wideLogoUrl",Ii,this),i(this,"isFake",Li,this),i(this,"isNonprofit",Ni,this),i(this,"autoPay",_i,this),i(this,"allowEmailing",xi,this),i(this,"allowPurchases",Mi,this),i(this,"allowSubscriptions",Bi,this),i(this,"allowDonations",ki,this),i(this,"allowUnverifiedEmailUsers",Ui,this),i(this,"legalEntity",Hi,this),i(this,"sdkStatus",zi,this),i(this,"userMetadataFields",Fi,this)}getUrl(){return u?this.url:`http://localhost:8077/?clientId=${this.alias}`}getName(){return AutopayCompatible(){return!0===this.autoPay}toString(){return this.name}hasPurchasesEnabled(){return!!this.allowPurchases}hasSubscriptionsEnabled(){return!!this.allowSubscriptions}hasSubscriptionDiscountCodeEnabled(){return!!this.hasSubscriptionDiscountCode}hasDonationsEnabled(){return!!this.allowDonations}},vi=n(Ti.prototype,"currency",[ai],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oi=n(Ti.prototype,"name",[li],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Di=n(Ti.prototype,"alias",[ci],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ri=n(Ti.prototype,"createdAt",[ui],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pi=n(Ti.prototype,"url",[hi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ii=n(Ti.prototype,"wideLogoUrl",[di],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Li=n(Ti.prototype,"isFake",[pi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ni=n(Ti.prototype,"isNonprofit",[mi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_i=n(Ti.prototype,"autoPay",[gi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xi=n(Ti.prototype,"allowEmailing",[bi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mi=n(Ti.prototype,"allowPurchases",[fi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bi=n(Ti.prototype,"allowSubscriptions",[yi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ki=n(Ti.prototype,"allowDonations",[Ci],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ui=n(Ti.prototype,"allowUnverifiedEmailUsers",[Si],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hi=n(Ti.prototype,"legalEntity",[Ei],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zi=n(Ti.prototype,"sdkStatus",[Ai],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fi=n(Ti.prototype,"userMetadataFields",[wi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ti);class MerchantStoreClass extends(yt("Merchant",Vi)){getAutopayCompatibleMerchants(){return this.all().filter((e=>e.isAutopayCompatible()))}getByIdOrAlias(e){return this.get(e)||this.all().find((t=>t.alias===e))}}const Gi=new MerchantStoreClass;var Wi,ji,Yi,Ki,Zi,qi,$i,Xi,Ji,Qi,en,tn,nn,rn,sn,on,an,ln,cn;let un=(Wi=Pt("self"),ji=Pt("Merchant"),Yi=Pt(Date),Ki=Pt(Boolean),Zi=Pt(Boolean),qi=Pt(String),$i=Pt(String),Xi=Pt(String),Ji=Pt(Object),Qi=class MerchantSDKSettings extends StoreObject{constructor(){super(...arguments),i(this,"parentVersion",en,this),i(this,"merchant",tn,this),i(this,"createdAt",nn,this),i(this,"isMaster",rn,this),i(this,"isArchive",sn,this),i(this,"key",on,this),i(this,"name",an,this),i(this,"description",ln,this),i(this,"options",cn,this)}},en=n(Qi.prototype,"parentVersion",[Wi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tn=n(Qi.prototype,"merchant",[ji],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nn=n(Qi.prototype,"createdAt",[Yi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rn=n(Qi.prototype,"isMaster",[Ki],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sn=n(Qi.prototype,"isArchive",[Zi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),on=n(Qi.prototype,"key",[qi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),an=n(Qi.prototype,"name",[$i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ln=n(Qi.prototype,"description",[Xi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cn=n(Qi.prototype,"options",[Ji],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qi);const hn=Ct("MerchantSDKSettings",un,{dependencies:["Merchant"]}),dn=function(){return class PaymestStatusStore extends(yt(...arguments)){importState(e){e=e||[];for(const t of e){const e=this.get(t.id);this.shouldSkipUpdate(e,t)||super.importState([t])}}applyEvent(e){const t=this.getObjectForEvent(e);return this.shouldSkipUpdate(t,e.data)&&(epplyEvent(e)}shouldSkipUpdate(e,t){return!t}}};var pn,mn,gn,bn,fn,yn,Cn,Sn,En,An,wn,Tn,vn,On,Dn,Rn,Pn,In,Ln,Nn,_n;let xn=(pn=Pt("Merchant"),mn=Pt(String),gn=Pt(String),bn=Pt(String),fn=Pt(Date),yn=Pt(Date),Cn=Pt("MerchantSDKSettings"),Sn=Pt("self"),En=Pt(Object),An=Pt(Object),wn=class MerchantSDKResource extends StoreObject{constructor(){super(...arguments),i(this,"merchant",Tn,this),i(this,"alias",vn,this),i(this,"name",On,this),i(this,"description",Dn,this),i(this,"createdAt",Rn,this),i(this,"lastEditedAt",Pn,this),i(this,"settingsVersion",In,this),i(this,"versionParent",Ln,this),i(this,"options",Nn,this),i(this,"dashboardOptions",_n,this)}toString(){return this.name}get parent(){return this.versionParent}get parentId(){return this.versionParentId}allHistoricVersions(e){void 0===e&&(e=10);let t=[],i=this.parent;for(;i&&t.length<e;)t.push(i),i=i.parent;return t}allWithSameVersion(){return this.getStore().filterBy({settingsVersionId:this.settingsVersionId})}getFork(e){return this.getStore().findBy({settingsVersion:e,versionParent:this})}},Tn=n(wn.prototype,"merchant",[pn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vn=n(wn.prototype,"alias",[mn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),On=n(wn.prototype,"name",[gn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dn=n(wn.prototype,"description",[bn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rn=n(wn.prototype,"createdAt",[fn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pn=n(wn.prototype,"lastEditedAt",[yn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),In=n(wn.prototype,"settingsVersion",[Cn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ln=n(wn.prototype,"versionParent",[Sn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nn=n(wn.prototype,"options",[En],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_n=n(wn.prototype,"dashboardOptions",[An],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wn);class MerchantSDKResourceStoreClass extends GenericObjectStore{constructor(e,t,i){void 0===i&&(i=[]),super(e,t,{dependencies:["Merchant","MerchantSDKSettings",...i]})}getByIdOrAlias(e,t){return this.get(e)||(t?this.fil==(i=t.settingsVersion)?void 0:i.isMaster)})))}all(){return super.all().sort(((e,t)=>t.lastEditedAt-e.lastEditedAt))}}const Mn=new MerchantSDKResourceStoreClass("MerchantPanel",class MerchantPanel extends xn{isBasePanel(){return"base"===this.alias||Object.values(A).indexOf(this.al().getByIdOrAlias(this.options.parentPanel)}usesPanel(e){const t=this.getParentPanel();return null!=t&&(t===e||t.usesPanel(e))}}),Bn=new MerchantSDKResourceStoreClass("MerchantUserJn K(null==(e=this.options)?void 0:e.action)}usesPanel(e){for(const t of this.getActions())if(t.panel==e.id||t.panel==e.alias)return!0;return!1}},["Merch new Money(this.balance,this.getCurrency())}getAmount(){return this.getBalance()}}class WalletStoreClass extends(yt("Wallet",Wallet)){getWallet(){return this.all()[0]}}const kn=new WalletStoreClass;function Un(){alize("NFD").replace(/[\u0300-\u036f]/g,"")}function zn(){const{userAgent:e}=navigator;return e.indexOf("FBAN")>-1||e.indexOf("FBAV")>-1}function Fn(){try{window.opener&&window.opener.focus()}finally{window.close()}}function Vn(){try{return window.opener===window?nul Gn(e){return e&&"Network error"===e.detail}function Wn(){return window.innerHeight<400&&document.activeElement!==document.body}var jn,Yn,Kn,Zn,qn,$n,Xn,Jn,Qn,er,tr,ir,nr,rr,sr,or,ar,lr,cr,ur,hr,dr,pr;let mr=Wt(((Yn=class PaymentProcessorType extends BaseEnum{toString(){return this===this.constructor.AMAZON?"Amazon Pay":this===this.constructor.PAYPAL?"PayPal":super.toString()}}).BLINK_CREDIT=void 0,Yn.STRIPE=void 0,Yn.CDS=void 0,Yn.AMAZON=void 0,Yn.PAYPAL=void 0,Yn.CDS_LEGACY=void 0,jn=Yn))||jn,gr=(Kn=Pt(mr),Zn=Pt("Merchant"),qn=Pt("LegalEntity"),$n=Pt(String),Xn=Pt(Object),Jn=Pt(Boolean),Qn=Pt(Boolean),er=Pt(Boolean),tr=Pt(Boolean),ir=Pt(Boolean),nr=class PaymentProcessor extends StoreObject{constructor(){super(...arguments),i(this,"provider",rr,this),i(this,"merchant",sr,this),i(this,"legalEntity",or,this),i(this,"publicKey",ar,this),i(this,"publicConfig",lr,this),i(this,"isPublic",cr,this),i(this,"isActive",ur,this),i(this,"isEditable",hr,this),i(this,"supportsDonations",dr,this),i(this,"supportsRecurring",pr,this)}toString(){return`${this.provider} ${this.isPublic?"public":"private"} ${this.merchant||"Blink"}`}toSDK(){const{provider:e,merchantId:t,legalEntityId:i,publicKey:n,publicConfig:r,isPublic:s,isActive:o,supportsDonations:a,supportsRecurring:l}=this;return{provider:e,merchantId:t,legalEntityId:i,publicKey:n,publicConfig:r,isPublic:s,isActive:o,supportsD==this.merchantId&&null==this.legalEntityId}canServiceMerchant(e){return this.merchantId===(null==e?void 0:e.id)||this.legalEntityId===(null==e?void 0:e.legalEntityId)||!this.merchantId&&!this.legalEntityId}},rr=n(nr.prototype,"provider",[Kn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sr=n(nr.prototype,"merchant",[Zn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),or=n(nr.prototype,"legalEntity",[qn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ar=n(nr.prototype,"publicKey",[$n],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lr=n(nr.prototype,"publicConfig",[Xn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cr=n(nr.prototype,"isPublic",[Jn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ur=n(nr.prototype,"isActive",[Qn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hr=n(nr.prototype,"isEditable",[er],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dr=n(nr.prototype,"supportsDonations",[tr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pr=n(nr.prototype,"supportsRecurring",[ir],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nr);const br=Ct("PaymentProce.merchantId=e,Ee.iFrameMerchantService=this}getMerchant(){return Gi.get(this.merchantId)}isMerchant(e){var t;return(nullDSPaymentMethod(){return this.isMerchant(C)}};var yr,Cr,Sr,Er,Ar,wr,Tr,vr,Or,Dr,Rr,Pr,Ir;let Lr=(yr=Pt("PaymentProcessor"),Cr=Pt(Date),Sr=Pt(Date),Er=Pt(Boolean),Ar=Pt(Object),wr=Pt(String),Tr=class PaymentMethod extends StoreObject{constructor(){super(...arguments),i(this,"paymentProcessor",vr,this),i(this,"createdAt",Or,this),i(this,"deletedAt",Dr,this),i(this,"isPrimary",Rr,this),i(thigits(){const{last4:e}=this.details;return e}getBrand(){let e=this.details.brand||"Card";return"american express"===e.toLowerCase()&&(e="AmEx"),e=Q(e),e}getExpiryDate(){const{expMonth:e,expYear:t}=this.details;return e&&t?new StemDate(e+"/01/"+t).getEndOfMonth():null}isAvailable(e,t){if(void 0===t&&(t=fr.getMerchant()),fr.isCDSPaymentMethod())return!1;if(t){const i=this.paymentProcessor;if(!i.canServiceMerchant(t))return!1;for(const t of e)if(i.provider===t.provider&&i.isBlinkGlobal()&&!t.isBlinkGlobal())return!1}return!this.deletedAt&&this.scope===Nr.Scope.PUBLIC}},vr=n(Tr.prototype,"paymentProcessor",[yr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Or=n(Tr.prototype,"createdAt",[Cr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dr=n(Tr.prototype,"deletedAt",[Sr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rr=n(Tr.prototype,"isPrimary",[Er],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pr=n(Tr.prototype,"details",[Ar],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ir=n(Tr.prototype,"scope",[wr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tr);class PaymentMethodStoreClass extends(yt("PaymentMethod",Lr)){constructor(){super(...arguments),this.Scope={PUBLIC:"public",PRIVATE:"private"}}getPaymentMethodsForRecurringPayment(e){return this.all().filter((t=>!t.deletedAt&&t.scope===Nr.Scope.PRIVATE&&(t.scopeRablePaymentMethods().find((e=>e.isPrimary))}getAvailablePaymentMethods(e){void 0= t=br.filter((t=>!e||t));reture.isPrimary===t.isPrimary?0:e.isPrimary?-1:1))}getDefault(){const e=this.getAvailablePaymentMethods();return e.find((e=>e.isPrimary))||e[0]}applyDeleteEvent(e){const t=this.getObjectForEvent(e);t&&(t.deletedAt||(t.deletedAt=StemDate.now()),t.dispatch("delete",e,t),this.dispatch("delete",t,e))}}const Nr=new PaymentMethodStoreClass;async function _r(e){const t=await Zt.post("/payment_methods/set_primary_payment_method",{paymentMethodId:e});return Nr.loadObject(t)}var xr,Mr,Br,kr,Ur,Hr,zr,Fr,Vr,Gr,Wr,jr,Yr,Kr,Zr;let qr=Wt(((Mr=class TopUpStatus extends BaseEnum{}).NOT_PROCESSED=void 0,Mr.FAILED=void 0,Mr.SUCCEEDED=void 0,Mr.REVERTED=void 0,xr=Mr))||xr,$r=(Br=Pt("Merchant"),kr=Pt("UserProfile"),Ur=Pt("PaymentMethod"),Hr=Pt(Date),zr=Pt(qr),Fr=Pt(Boolean),Vr=class TopUpPayment extends MoneyObject{constructor(){super(...arguments),i(this,"merchant",Gr,this),i(this,"user",Wr,this),i(this,"paymentMethod",jr,this),i(this,"createdAt",Yr,this),i(this,"status",Kr,this),i(this,"isAutomatic",Zr,this)}getPaymentMethod(){return Nr.get(this.paymentMethodId)}},Gr=n(Vr.prototype,"merchant",[Br],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wr=n(Vr.prototype,"user",[kr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jr=n(Vr.prototype,"paymentMethod",[Ur],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yr=n(Vr.prototype,"createdAt",[Hr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kr=n(Vr.prototype,"status",[zr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zr=n(Vr.prototype,"isAutomatic",[Fr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vr);class TopUpPaymHOD:"payment_method",CREDIT:"blink_credit"}}}const Xr=new TopUpPaymentStoreClass;var Jr,Qr,es,ts,is,ns;const rs=Object.freeze({PURCHASE:"purchase",SUBSCRIPTION:"subscription",DONATION:"donation"});Wt(((Jr=class PaymentStatus extends BaseEnum{}).SUCCEEDED=void 0,Jr.REVERTED=void 0,Jr));let ss=(Qr=Pt("Merchant"),es=Pt(Date),ts=class Payment extends MoneyObject{constructor(){super(...arguments),i(this,"merchant",is,this),i(this,"createdAt",ns,this)}getMerchant(){return this.merchant}getResource(){const{resourceType:e,resourceId:t}=this;return e===os.ResourceType.SUBSCRIPTION?this.getStore("Subscription").get(t):e===os.ResourceType.PURCHASE?this.getStore("Purchase").get(t):e===os.ResourceType.DONATION?this.getStore("Donation").get(t):(console.erroturn this.comment&&JSON.parse(this.comment)}getTitle(){var e;return(nulll==(e=this.getComment())?void 0:e.url)||""}getDebitedAmount(){var e;const t=null==(e=kn.getWallet())?void 0:e.getCurrency();return new Money(this.debitedAmount,t)}getType(){return this.resourceType}getCategory(){return this.getType()===rs.DONATION?this.isOneTime?"One-time":"Recurring":null}isRefundable(){return this.isAutomatic&&StemDate.now().diff(this.createdAt)<TimeUnit.DAY}getTopUpPayment(){return Xr.get(this.topUpId)}getPaymentMethod(){const e=this.getTopUpPayment();if(e)return e.getPaymentMethod();if("donation"===this.resourceType||"subscription"===this.resourceType){const e=this.getStore(this.resourceType).get(this.resourceId);if(e&&e.preferredPaymentMethodId)return e.getPaymentMethod()}return null}isRefunded(){return"reverted"===this.status}},is=n(ts.prototype,"merchant",[Qr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ns=n(ts.prototype,"createdAt",[es],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ts);class PaymentStoreClass extends(yt("payment",ss,{dependencies:["TopUpPayment","PaymentMethod","Wallet"]})){constructor(){super(...arguments),this.API_LIST_ENDPOINT="/payments/list_payments",this.ResourceType=rs,this.Status={SUCCEEDED:"succeeded",REVERTED:"reverted"}}}const os=new PaymentStoreClass;class UserPreferences extends StoreObject{getDefaultCurrency(){return jt.get(this.defaultCurrencyId)}shouldShowBalanceInline(){return this.alwaysShowBalance}shouldShowPaymentAnimation(){return this.showPaymentAnimation}}class UserPreferencesStoreClass extends(yt("UserPreferences",UserPreferences)){getPreferences(){return this.all()[0]}}const as=new UserPreferencesStoreClass;async function ls(e){void 0===e&&(e={});const t=await Zt.post("/preferences/update_user_preferences",e);return as.loadObject(t)}var cs,us,hs,ds,ps,ms,gs;let bs=(cs=Pt("Merchant"),us=Pt("MerchantUser"),hs=Pt(Date),ds=class MerchantConversion extends StoreObject{constructor(){super(...arguments),i(this,"merchant",ps,this),i(this,"merchantUser",ms,this),i(this,"createdAt",gs,this)}},ps=n(ds.prototype,"merchant",[cs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ms=n(ds.prototype,"merchantUser",[us],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gs=n(ds.prototype,"createdAt",[hs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ds);var fs,ys,Cs,Ss,Es,As,ws,Ts,vs,Os,Ds,Rs,Ps,Is,Ls,Ns;Ct("MerchantConversion",bs);let _s=Wt(((ys=class CycleUnit extends BaseEnum{getFrequencyName(){var e;return this.frequencyName||Q((null==(e=this.timeUnit)?void 0:e.getFrequencyName())||this.getName())}getAbe(){return this===this.constructor.ONE_TIME}static allRecurring(){return this.all().filter((e=>!e.isOneTime()))}}).ONE_TIME={timeUnit:null},ys.DAY={timeUnit:TimeUnit.DAY},ys.WEEK={timeUnit:TimeUnit.WEEK,abrev:"wk"},ys.MONTH={timeUnit:TimeUnit.MONTH,abrev:"mo"},ys.YEAR={timeUnit:TimeUnit.YEAR,abrev:"yr"},fs=ys))||fs,xs=(Cs=Pt(Date),Ss=Pt("Merchant"),Es=Pt("Currency"),As=Pt("UserAddress"),ws=Pt("UserAddress"),Ts=Pt("MerchantConversion"),Ns=class RecurringPaymentStoreObject extends StoreObject{constructor(){super(...arguments),i(this,"createdAt",Os,this),i(this,"merchant",Ds,this),i(this,"currency",Rs,this),i(this,"deliveryAddress",Ps,this),i(this,"billingAddress",Is,this),i(this,"conversion",Ls,this)}isFinished(){return this.status===RecurringPaymentStoreObject.Status.FINISHED}isCanceled(){return this.status====RecurringPaymentStoreObject.Status.UNPAID}isActive){return this.isActive()&&this.isCanceled()}getPaidUntil(){return StemDate.optionally(this.paidUntil)}getActiveUntil(){return StemDate.optionally(this.activeUntil)}hasGracePeriod(){const e=this.getPaidUntil(),t=this.getActiveUntil();return!e.equals(t)}getNextBillingDate(){return StemDate.optionally(this.nextPaymentAttempt)}getLastPaymentDate(){return StemDate.optionally(this.lastSuccessfureturn new Money(this.amount,this.currency)}getMerchant(){return Gi.get(this.merchantId)}getMerchantTitle(){var e;return null==(e=this.getMerchant())?void 0:e.getName()}getPaymentMethod(){return this.preferredPaymentMethodId?Nr.get(this.preferredPaymentMethodId):Nr.getPrimary()}formatPrice(){return""}getAvailablePaymentMethods(){const e=[...Nr.getPaymentMethodsForRecurringPayment(this),...Nr.ge()];return e.filter(((t,i)=>e.indexOf(t)===i))}getSn this.billingAddress||this.deliveryAddress}},Ns.Status={ACTIVE:"active",CANCELED:"canceled",UNPAID:"unpaid",REVOKED:"revoked",FINISHED:"finished"},Os=n((vs=Ns).prototype,"createdAt",[Cs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ds=n(vs.prototype,"merchant",[Ss],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rs=n(vs.prototype,"currency",[Es],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ps=n(vs.prototype,"deliveryAddress",[As],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Is=n(vs.prototype,"billingAddress",[ws],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ls=n(vs.prototype,"conversion",[Ts],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vs);function Ms(e,t,i){var n;const r=null==(n=Ee.iFrameMerchantService)?void 0:n.merchantId;return r&&(e=ed===r))),t&&(e=t.map((t=>e.find((e=>i(e,t))))).filter(Boolean)),e}var Bs,ks,Us,Hs,zs;function Fs(e,t){if(null==t)return!0;if(Array.isArray(t)){for(const i of t)if(e==i)return!0;return!1}return e===t}let Vs=Wt(((ks=class ShippingPriceType extends BaseEnum{}).SINGLE_COUNTRY=void 0,ks.MULTI_COUNTRY=void 0,ks.WORLDWIDE=void 0,Bs=ks))||Bs,Gs=(Us=Pt("Currency"),zs=n((Hs=class ShippingPriceEntry{constructor(){i(this,"currency",zs,this),this.amount=void 0,this.countryCode=void 0,this.region=void 0,this.postalCode=void isWorldwide(){return"*"===this.countryCode}isMultiCoun!this.isWorldwide()&&!this.isMultiCountry()}matchesAddress(e){return!!this.isWorldwide()||!!Fs(e.countryCode,this.countryCode)&&!!(!this.isSingleCountry()||Fs(e.state,this.region)&&Fs(e.postalCode,this.postalCode))}getPrice(e){const t=this.currency||e;return new Money(this.amount,t)}formatLocation(){if(this.isWorldwide())return"Worldwide";if(this.isMultiCountry())return this.countryCode.join(", ");const e=this.region&&"Region "+(Array.isArray(this.region)?this.region.join(", "):this.region),t=this.postalCode&&"Post code "+(Array.isArray(this.postalCode)?this.postalCode.join(", "):this.postalCode);return $([this.countryCode,e,t]).join("; ")}static loadArray(e,t){if(!Array.isArray(e))return[];for(let i of e)te(i,this),t&&!i.currencyId&&(i.currencyId=t);return e}static clone(e,i){return te(t({},e),this)}}).prototype,"currency",[Us],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hs);function Ws(e,t){var i;for(const i of t)if(i.matchesAddress(e))return i.getPrice();return new Money(0,(null==(i=t[0])?void 0:i.currency)||1)}var js,Ys,Ks,Zs,qs,$s,Xs,Js,Qs,eo,to,io,no,ro,so,oo,ao,lo,co,uo,ho,po,mo,go,bo,fo,yo,Co,So,Eo,Ao,wo,To,vo,Oo,Do,Ro,Po,Io,Lo,No,_o,xo,Mo,Bo,ko,Uo,Ho,zo,Fo;let Vo=(js=Pt("Merchant"),Ys=Pt("Currency"),Ks=Pt(Number),Zs=Pt(Number),qs=Pt(Number),$s=Pt(Number),Xs=Pt(Boolean),Js=Pt(Number),Qs=Pt(_s),eo=Pt(Number),to=Pt(Object),io=Pt(Number),no=Pt(Number),ro=Pt(Boolean),so=Pt(Boolean),oo=Pt(Number),ao=Pt(oi),lo=Pt(ni),co=Pt(Array),uo=class BillingPlan extends StoreObject{constructor(){super(...arguments),i(this,"merchant",ho,this),i(this,"currency",po,this),i(this,"maxPaymentAttemptsCount",mo,this),i(this,"paymentAttemptDelayHours",go,this),i(this,"attemptsBeforeNextCycle",bo,this),i(this,"useCalendarPeriod",fo,this),i(this,"collectAddress",yo,this),i(this,"amount",Co,this),i(this,"cycleUnit",So,this),i(this,"cycleUnitCount",Eo,this),i(this,"shippingPrices",Ao,this),i(this,"minNumberOfCycles",wo,this),i(this,"maxNumberOfCycles",To,this),i(this,"autorenewEditable",vo,this),i(this,"autorenewDefault",Oo,this),i(this,"freeTrialDays",Do,this),i(this,"trialPaymentMethodRequired",Ro,this),i(this,"status",Po,this),i(thiippingPrices)&&this.shippingPrices.length>0}getShippingPrices(){return Gs.loadArray(this.shippingPrices,this.currencyId)}getAbbreviatedCycleDuration(){const e=this.cycleUnit.getAbrev();return this.cycleUnitCount>1?this.cycleUnitCount+" "+e:e}getCycleDuration(e){return void 0===e&&(e=!1),this.cycleUnit.timeUnit.formatCount(this.cycleUnitCount,e)}ge(e){return new Money(e,this.getCurrency())}getrice(){return this.formatPrice(this.amount)}formatBasePrice(){return`${this.gd:s,merchantId:o,shippingPrices:a,status:l}}},ho=n(uo.prototype,"merchant",[js],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),po=n(uo.prototype,"currency",[Ys],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mo=n(uo.prototype,"maxPaymentAttemptsCount",[Ks],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),go=n(uo.prototype,"paymentAttemptDelayHours",[Zs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bo=n(uo.prototype,"attemptsBeforeNextCycle",[qs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fo=n(uo.prototype,"useCalendarPeriod",[$s],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yo=n(uo.prototype,"collectAddress",[Xs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Co=n(uo.prototype,"amount",[Js],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),So=n(uo.prototype,"cycleUnit",[Qs],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Eo=n(uo.prototype,"cycleUnitCount",[eo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ao=n(uo.prototype,"shippingPrices",[to],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wo=n(uo.prototype,"minNumberOfCycles",[io],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),To=n(uo.prototype,"maxNumberOfCycles",[no],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vo=n(uo.prototype,"autorenewEditable",[ro],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oo=n(uo.prototype,"autorenewDefault",[so],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Do=n(uo.prototype,"freeTrialDays",[oo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ro=n(uo.prototype,"trialPaymentMethodRequired",[ao],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Po=n(uo.prototype,"status",[lo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Io=n(uo.prototype,"extraBenefitIds",[co],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uo);Ct("BillingPlan",Vo,{dependencies:["Currency","Merchant"]});let Go=(Lo=Pt("Merchant"),No=Pt("BillingPlan"),_o=Pt("SubscriptionCoverage"),xo=Pt(ri),Mo=Pt(Array),Bo=class SubscriptionOffer extends StoreObject{constructor(){super(...arguments),i(this,"merchant",ko,this),i(this,"billingPlan",Uo,this),i(this,"coverage",Ho,this),i(this,"visibility{this.getName()} ${this.formatBaseverage.requiresAddress||this.collectAddress}getMerchant(){return Gi.get(this.merchantId)}hasShippingPrice(){return this.billingPlan.hasShippingPrice()}getShippingPrices(){return this.billingPlan.getShippingPrices()}getName(){var e;return this.title||(null==(e=this.getCoverage())?void 0:e.getName())}getAbbreviatedCycleDuration(){return this.billingPlan.g(e=!1),this.billingPlan.getCycleDuration(e)}getCurrency(){return this.billingPlan.currency}formatPrice(e){return this.billingPlan.formatPrice(e)}getPrice(){return this.billingPlan.getPrice()}getBasePrice(){return this.billingPlan.getBasePrice()}formatBasePriceetDescription(){return this.description||""}getAllBenefitIds(){const e=new Set([...this.extraBenefitIds,...this.coverage.benefitIds]);return Array.from(e)}isAvailable(){return!this.revoked&&!this.deletedAt&&StemDate.now().getTime()>=new StemDate(this.startDate).getTime()&&(!this.endDate||StemDate.now().getTime()<=new StemDate(this.endDate).getTime())}},ko=n(Bo.prototype,"merchant",[Lo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Uo=n(Bo.prototype,"billingPlan",[No],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ho=n(Bo.prototype,"coverage",[_o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zo=n(Bo.prototype,"visibility",[xo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fo=n(Bo.prototype,"extraBenefitIds",[Mo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bo);const Wo=new class SubscriptionOfferStoreClass extends GenericObjectStore{constructor(){super("SubscriptionOffer",Go,{dependencies:["SubscriptionDiscountCode","SubscriptionCoverage","BillingPlan"]})}allUnfiltered(){return super.all().sort(((e,t)=>new Date(t.startDate).getTime()-new Date(e.startDate).getTime()))}all(){var e;return Ms(this.allUnfiltered(),null==(e=Ee.iFrameState)?void 0:e.subscriptionOffer,((e,t)=>e.id==t||e.alias==t))}},jo=String.fromCharCode(160);var Yo,Ko,Zo,qo,$o,Xo,Jo,Qo,ea,ta,ia,na,ra,sa,oa,aa,la,ca,ua,ha,da,pa,ma,ga,ba,fa,ya,Ca,Sa,Ea,Aa,wa,Ta,va;let Oa=Wt(((Ko=class SubscriptionDiscountScope extends BaseEnum{}).ALL_OFFERS={name:"All subscription"},Ko.TARGETED_COVERAGES={name:"Selected subscription tiers"},Ko.TARGETED_OFFERS={name:"Selected subscription plans"},Yo=Ko))||Yo,Da=Wt(((qo=class SubscriptionDiscountApplyPolicy extends BaseEnum{}).BEFORE_SHIPPING=void 0,qo.AFTER_SHIPPING=void 0,Zo=qo))||Zo;Wt((($o=class SubscriptionDiscountType extends BaseEnum{}).DISCOUNT_PERCENT=void 0,$o.DISCOUNT_AMOUNT=void 0,$o.FIXED_PRICE=void 0,$o));let Ra=(Xo=Pt("Merchant"),Jo=Pt(Date),Qo=Pt(Oa),ea=Pt(Array),ta=Pt(Array),ia=Pt(String),na=Pt(String),ra=Pt(Date),sa=Pt(Date),oa=Pt(Da),aa=Pt(Number),la=Pt(String),ca=Pt(Number),ua=Pt(Number),ha=class SubscriptionDiscount extends StoreObject{constructor(){super(...arguments),i(this,"merchant",da,this),i(this,"deletedAt",pa,this),i(this,"scope",ma,this),i(this,"targetOfferIds",ga,this),i(this,"targetCoverageIds",ba,this),i(this,"name",fa,this),i(this,"code",ya,this),i(this,"startDate",Ca,this),i(this,"expireDate",Sa,this),i(this,"applyPolicy",Ea,this),i(this,"numCyclesDiscounted",Aa,this),i(this,"discountPercent",wa,this),i(this,"discountAmount",Ta,this),i(this,"discountFixedPrice",va,this)}getCode(){return this.code}getDiscountValue(){if(null!=this.discountPercent){return void 0===e&&(e=2),parseFloat(this.discountPercent).toFixed(e)+jo+"% off"}var e;const t=this.merchant.getCurrency();return null!=this.discountAmount?`${new Money(this.discountAmount,t)} off`:`Reduced to ${new Money(this.discountFixedPrice,t)}`}getMerchant(){return this.merchant}getStatus(){var e,t;if(this.deletedAt)return ni.INACTIVE;const i=StemDate.now();return null!=(e=this.startDate)&&e.isAfter(i)?ni.DRAFT:null!=(t=this.ctive(){return this.getStatus()===ni.ACTIVE}},da=n(ha.prototype,"merchant",[Xo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pa=n(ha.prototype,"deletedAt",[Jo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ma=n(ha.prototype,"scope",[Qo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ga=n(ha.prototype,"targetOfferIds",[ea],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ba=n(ha.prototype,"targetCoverageIds",[ta],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fa=n(ha.prototype,"name",[ia],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ya=n(ha.prototype,"code",[na],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ca=n(ha.prototype,"startDate",[ra],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sa=n(ha.prototype,"expireDate",[sa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ea=n(ha.prototype,"applyPolicy",[oa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Aa=n(ha.prototype,"numCyclesDiscounted",[aa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wa=n(ha.prototype,"discountPercent",[la],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ta=n(ha.prototype,"discountAmount",[ca],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),va=n(ha.prototype,"discountFixedPrice",[ua],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ha);const Pa=Ct("SubscriptionDiscount",Ra);var Ia,La,Na,_a,xa,Ma,Ba,ka,Ua,Ha,za,Fa,Va,Ga,Wa,ja,Ya,Ka,Za,qa,$a,Xa,Ja,Qa,el,tl,il,nl,rl,sl,ol,al,ll,cl,ul,hl,dl,pl,ml,gl,bl,fl,yl,Cl,Sl,El,Al,wl,Tl,vl,Ol,Dl,Rl,Pl,Il,Ll,Nl,_l;let xl=(Ia=Pt("Merchant"),La=Pt("UserProfile"),Na=Pt("MerchantConversion"),_a=Pt(Date),xa=Pt(Boolean),Ma=Pt(Boolean),Ba=Pt(Number),ka=Pt(Object),Ua=Pt(Boolean),Ha=Pt(String),za=Pt(String),Fa=Pt(String),Va=Pt(Date),Ga=Pt(Date),Wa=Pt("MerchantUserSession"),ja=Pt(Number),Ya=Pt("Payment"),Ka=Pt(Number),Za=Pt("Donation"),qa=Pt("Donation"),$a=Pt("Donation"),Xa=Pt(Object),Ja=class MerchantUser extends StoreObject{constructor(){super(...arguments),i(this,"merchant",Qa,this),i(this,"user",el,this),i(this,"conversion",tl,this),i(this,"createdAt",il,this),i(this,"autoPayEnabled",nl,this),i(this,"useCustomLimit",rl,this),i(this,"articlePriceLimit",sl,this),i(this,"formResponses",ol,this),i(this,"canReceivePromotionalEmails",al,this),i(this,"email",ll,this),i(this,"name",cl,this),i(this,"emailNewsletterEditKey",ul,this),i(this,"consentDate",hl,this),i(this,"lastAccessDate",dl,this),i(this,"lastAccessSession",pl,this),i(this,"lifetimeRevenue",ml,this),i(this,"latestDonationPayment",gl,this),i(this,"lifetimeDonatedAmount",bl,this),i(this,"latestDonation",fl,this),i(this,"latestOneTimeDonation",yl,this),i(this,"latestRecurringDonation",Cl,this),i(this,"metadata",Sl,this)}static makeFieldLoader(e){reheField=!1,e.rawField=e.rawField||(e=>e+"Id"),(e,t)=>t.getStore(this[bt].objectType).getByUserAndMerchant(e,t.merchantId)}getEmail(){return this.email}getName(){return this.name}getLastLocation(){var e;return null==(e=this.lastAccessSession)?void 0:e.location}getLastDevice(){var e;return null==(e=this.lastAccessSession)?void 0:e.device}getLifetimeRevenue(){return new Money(this.lifetimeRevenue,this.merchant.currency.id)}getLifetimeDonated(){return new Money(this.lifetimeDonatedAmount,this.merchant.currency.id)}getEmailPreferencesLink(){return`${a}/email-preferences?edit-key=${this.emailNewsletterEditKey}`}},Qa=n(Ja.prototype,"merchant",[Ia],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),el=n(Ja.prototype,"user",[La],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tl=n(Ja.prototype,"conversion",[Na],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),il=n(Ja.prototype,"createdAt",[_a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nl=n(Ja.prototype,"autoPayEnabled",[xa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rl=n(Ja.prototype,"useCustomLimit",[Ma],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sl=n(Ja.prototype,"articlePriceLimit",[Ba],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ol=n(Ja.prototype,"formResponses",[ka],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),al=n(Ja.prototype,"canReceivePromotionalEmails",[Ua],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ll=n(Ja.prototype,"email",[Ha],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cl=n(Ja.prototype,"name",[za],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ul=n(Ja.prototype,"emailNewsletterEditKey",[Fa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hl=n(Ja.prototype,"consentDate",[Va],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dl=n(Ja.prototype,"lastAccessDate",[Ga],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pl=n(Ja.prototype,"lastAccessSession",[Wa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ml=n(Ja.prototype,"lifetimeRevenue",[ja],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gl=n(Ja.prototype,"latestDonationPayment",[Ya],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bl=n(Ja.prototype,"lifetimeDonatedAmount",[Ka],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fl=n(Ja.prototype,"latestDonation",[Za],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yl=n(Ja.prototype,"latestOneTimeDonation",[qa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cl=n(Ja.prototype,"latestRecurringDonation",[$a],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sl=n(Ja.prototype,"metadata",[Xa],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ja);class MerchantUserStoreClass extends(yt("MerchantUser",xl,{dependencies:["MerchantUserSession"]})){construcap=new Map}getUMKeythis.getUMKey(e,t);return this.umMap.get(i)}addObject(e,t){super.addObject(e,t);const i=this.getUMKegetByUserAndMerchant(e.userId,e.merchantId)}}const Ml=new MerchantUserStoreClass;let Bl=(El=Pt(String),Al=Pt(Date),wl=Pt(Date),Tl=Pt(Date),vl=Pt(Object),Ol=Pt(Object),Dl=class MerchantUserSession extends StoreObject{constructor(){super(...arguments),i(this,"key",Rl,this),i(this,"createdAt",Pl,this),i(this,"expiresAt",Il,this),i(this,"revokedAt",Ll,this),i(this,"location",Nl,this),i(this,"device",_l,this)}},Rl=n(Dl.prototype,"key",[El],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Pl=n(Dl.prototype,"createdAt",[Al],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Il=n(Dl.prototype,"expiresAt",[wl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ll=n(Dl.prototype,"revokedAt",[Tl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nl=n(Dl.prototype,"location",[vl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_l=n(Dl.prototype,"device",[Ol],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dl);var kl,Ul,Hl,zl,Fl,Vl,Gl;Ct("MerchantUserSession",Bl);let Wl=(kl=Pt(String),Ul=Pt(String),Hl=Pt(String),zl=class SubscriptionBenefit extends StoreObject{constructor(){super(...arguments),i(this,"name",Fl,this),i(this,"description",Vl,this),i(this,cription:this.description,alias:this.alias}}},Fl=n(zl.prototype,"name",[kl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vl=n(zl.prototype,"description",[Ul],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gl=n(zl.prototype,"alias",[Hl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zl);const jl=Ct("SubscriptionBenefit",Wl);var Yl,Kl,Zl,ql,$l,Xl,Jl,Ql,ec,tc,ic,nc,rc,sc,oc,ac,lc,cc,uc,hc,dc,pc,mc,gc,bc,fc,yc;const Cc="instantly",Sc="next_billing_cycle";let Ec=(Yl=Pt("BillingPlan"),Kl=Pt("SubscriptionCoverage"),Zl=Pt("SubscriptionOffer"),ql=Pt("SubscriptionDiscount"),$l=Pt("Subscription"),Xl=Pt("UserProfile"),Jl=Pt("UserProfile"),Ql=Pt(Boolean),ec=Pt(Array),tc=Pt(Array),ic=Pt(Number),nc=Pt(Boolean),rc=Pt(Boolean),sc=class Subscription extends xs{constructor(){super(...arguments),i(this,"billingPlan",oc,this),i(this,"coverage",ac,this),i(this,"recurringOffer",lc,this),i(this,"discount",cc,this),i(this,"fromGroupSubscription",uc,this),i(this,"user",hc,this),i(this,"billedUser",dc,this),i(this,"isGroupSubscription",pc,this),i(this,"groupEmailDomains",mc,this),i(this,"groupIpV4Ranges",gc,this),i(this,"groupNumCustomBeneficiaries",bc,this),i(this,"ownerCanEditIpRanges",fcthis)}async reactivate(){return Dc(this.id)}async updatePaymentMethod(e){return vc({subscritDiscount(){return Pa.get(this.discountId)}getPrice(){var e;return Money.optionally(null==(e=this.lastCyclePrice)?void 0:e.finalPrice,this.getCurrency())}serializeForSDK(){const{id:e,deliveryAddressId:t,blinkSignature:i,nextPaymentAttempt:n,userId:r,amount:s,createdAt:o,canceledAt:a,activeUntil:l,billingPlanId:c}=this;let u={id:e,deliveryAddressId:t,blinkSignature:i,nextPaymentAttempt:n,userId:r,amount:s,createdAt:o,canceledAt:a,activeUntil:l,billingPlanId:c};u.currencyCode=this.getCurrency().getIsoCode(),u.name=this.coverage.getName(),u.billingPlan=this.billingPlan.serializeForSDK();const h=this.recurringOffer.getAllBenefitIds();return u.benefits=h.map((e=>{const t=jl.get(e);return t?t.serializeForSDK():{id:e}})),u}formatPriceShortened(){return`${this.getPrice()}/${this.billingPlan.getAbbreviatedCycleDuration()}`}formatPrice(){return`${this.getPrice()}/${this.billingPlan.getCycleDuration(!0)}`}},oc=n(sc.prototype,"billingPlan",[Yl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ac=n(sc.prototype,"coverage",[Kl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lc=n(sc.prototype,"recurringOffer",[Zl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cc=n(sc.prototype,"discount",[ql],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uc=n(sc.prototype,"fromGroupSubscription",[$l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hc=n(sc.prototype,"user",[Xl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dc=n(sc.prototype,"billedUser",[Jl],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pc=n(sc.prototype,"isGroupSubscription",[Ql],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mc=n(sc.prototype,"groupEmailDomains",[ec],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gc=n(sc.prototype,"groupIpV4Ranges",[tc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bc=n(sc.prototype,"groupNumCustomBeneficiaries",[ic],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fc=n(sc.prototype,"ownerCanEditIpRanges",[nc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yc=n(sc.prototype,"ownerCanEditDomains",[rc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sc);class SubscriptionStoreClass extends(dn("subscription",Ec,{dependencies:["Currency","Merchant","SubscriptionCoverage","SubscriptionOffer","BillingPlan"]})){constructor(){super(...arguments),this.Status=Ec.Status}getActive(){reaid(){return this.filter((e=>e.isUnpaid()))}ghis.filter((e=>e.status===this.Status.ACTIVE))}getPast(){return this.filter((e=>!e.isActive()&&!e.isUnpaid()))}getActiveWithAddress(e){return this.getActive().filter((t=>t.getShippingAddress()===e))}}const Ac=new SubscriptionStoreClass;async function wc(e){const t=await Zt.post("/subscriptions/subscribe",e);return Ac.load(t).find((e=>e.isActive()))}async function Tc(e){const t=await Zt.post("/external_providers/subscribe_with_cds",e);return Ac.load(t).find((e=>e.isActive()))}async function vc(e){const t=await Zt.post("/subscriptions/update_subscription",e);return Ac.load(t).find((e=>!e.isFinished()))}async function Oc(e){return Zt.postbscriptions/reactivate",{subscriptionId:e})}var Rc,Pc,Ic,Lc,Nc,_c,xc,Mc,Bc,kc,Uc,Hc,zc,Fc,Vc,Gc,Wc,jc,Yc,Kc,Zc;let qc=Wt(((Pc=class UserType extends BaseEnum{}).REGULAR=void 0,Pc.MERCHANT=void 0,Pc.ADMIN=void 0,Rc=Pc))||Rc,$c=(Ic=Pt(qc),Lc=Pt(String),Nc=Pt(String),_c=Pt(String),xc=Pt(Boolean),Mc=Pt(Date),Bc=Pt(Date),kc=Pt("Jurisdiction"),Uc=Pt("Merchant"),Hc=class UserProfile extends StoreObject{constructor(){super(...arguments),i(this,"userType",zc,this),i(this,"email",Fc,this),i(this,"firstName",Vc,this),i(this,"lastName",Gc,this),i(this,"isActive",Wc,this),i(this,"createdAt",jc,this),i(this,"lastLogin",Yc,this),i(this,"jurisdiction",Kc,this),i(this,"referralMerchant",Zc,this)}iR}isAdmin(){return this.userType===qc.ADMIN}getEmail(){return this.email}getName(){return[this.firstName,this.lastName].filter((e=>e)).join(" ")}getPreferences(){return as.find((e=>e.userIts(){return kn.filter((e=>e.userId===this.id))}getDefaultWallet(){const e=this.getDefaultCurrency().id;return t this.getPreferences().getDefaultCurrency()}},zc=n(Hc.prototype,"userType",[Ic],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fc=n(Hc.prototype,"email",[Lc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vc=n(Hc.prototype,"firstName",[Nc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gc=n(Hc.prototype,"lastName",[_c],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wc=n(Hc.prototype,"isActive",[xc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jc=n(Hc.prototype,"createdAt",[Mc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yc=n(Hc.prototype,"lastLogin",[Bc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kc=n(Hc.prototype,"jurisdiction",[kc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zc=n(Hc.prototype,"referralMerchant",[Uc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hc);class UserProfileStoreClass extends(yt("UserProfile",$c)){getUserProfile(){return this.get(Ee.userId)||this.all()[0]}}const Xc=new UserProfileStoreClass;var Jc,Qc,eu,tu,iu,nu,ru,su,ou,au,lu,cu,uu,hu,du,pu,mu,gu,bu,fu,yu,Cu,Su;let Eu=(Jc=Pt("UserProfile"),Qc=Pt(Boolean),eu=Pt(Date),tu=Pt(String),iu=Pt(String),nu=Pt(String),ru=Pt(String),su=Pt(String),ou=Pt(String),au=Pt(String),lu=Pt(String),cu=class UserAddress extends StoreObject{constructor(){super(...arguments),i(this,"user",uu,this),i(this,"isDefault",hu,this),i(this,"createAt",du,this),i(this,"recipientName",pu,this),i(this,"streetAddress",mu,this),i(this,"city",gu,this),i(this,"state",bu,this),i(this,"country",fu,this),i(this,"countryCode",yu,this),i(this,"postalCode",Cu,this),i(this,"phoneNumber",Su,this)}getRecipientName(){return this.recipientName}toString(){return this.getAddressLine(this.streetAddress,this.city,this.state,this.postalCode,this.country)}getAddressLine(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.filter((e=>(null==e?void 0:e.trim().length)>0)).join(", ")}},uu=n(cu.prototype,"user",[Jc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hu=n(cu.prototype,"isDefault",[Qc],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),du=n(cu.prototype,"createAt",[eu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pu=n(cu.prototype,"recipientName",[tu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mu=n(cu.prototype,"streetAddress",[iu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gu=n(cu.prototype,"city",[nu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bu=n(cu.prototype,"state",[ru],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fu=n(cu.prototype,"country",[su],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yu=n(cu.prototype,"countryCode",[ou],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cu=n(cu.prototype,"postalCode",[au],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Su=n(cu.prototype,"phoneNumber",[lu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cu);class UserAddressStoreClass extends(yt("UseretTime()-new StemDate(t.createdAt).getTime()))}getDefault(){const e=this.all();return e.find((e=>e.isDefault))||e[0]}}const Au=new UserAddressStoreClass,wu=Ct("CurrencySettings",class CurrencySettings extends StoreObject{});var Tu,vu,Ou,Du,Ru,Pu,Iu,Lu,Nu,_u,xu,Mu,Bu,ku,Uu,Hu,zu,Fu,Vu,Gu,Wu,ju,Yu,Ku,Zu;let qu=(Tu=Pt("Merchant"),vu=Pt("Currency"),Ou=Pt(Number),Du=Pt(Number),Ru=Pt(Number),Pu=Pt(Number),Iu=Pt(Array),Lu=Pt(_s),Nu=Pt(Number),_u=Pt(Number),xu=Pt(Boolean),Mu=Pt(Boolean),Bu=class DonationOffer extends StoreObject{constructor(){super(...arguments),i(this,"merchant",ku,this),i(this,"currency",Uu,this),i(this,"maxPaymentAttemptsCount",Hu,this),i(this,"paymentAttemptDelayHours",zu,this),i(this,"attemptsBeforeNextCycle",Fu,this),i(this,"useCalendarPeriod",Vu,this),i(this,"frequencyOptions",Gu,this),i(this,"defaultFrequency",Wu,this),i(this,"defaultPredefinedAmountIndex",ju,this),i(this,"maxPredefinedAmountsSize",Yu,this),i(this,"allowCustomAmount",Ku,this),i(this,"collectAddress",Zu,this)}shouldCollectAddress(){return this.collectAddress}getCureturn this.getFrequencyOptions().length>1}getFrequencyOptions(){return this.frequencyOptions.map((e=>_s.fromValue(e)))}getName(){return""}computeFeeFromAmount(e){return e?5e5*Math.ceil(2*(this.merchantId,.079*e/1e6+.3)):0}},ku=n(Bu.prototype,"merchant",[Tu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Uu=n(Bu.prototype,"currency",[vu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hu=n(Bu.prototype,"maxPaymentAttemptsCount",[Ou],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zu=n(Bu.prototype,"paymentAttemptDelayHours",[Du],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Fu=n(Bu.prototype,"attemptsBeforeNextCycle",[Ru],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vu=n(Bu.prototype,"useCalendarPeriod",[Pu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Gu=n(Bu.prototype,"frequencyOptions",[Iu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wu=n(Bu.prototype,"defaultFrequency",[Lu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ju=n(Bu.prototype,"defaultPredefinedAmountIndex",[Nu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yu=n(Bu.prototype,"maxPredefinedAmountsSize",[_u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ku=n(Bu.prototype,"allowCustomAmount",[xu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zu=n(Bu.prototype,"collectAddress",[Mu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bu);class DonationOfferStoreClass extends(yt("donationOffer",qu)){getAvailable(){return this.all()}}const $u=new DonationOfferStoreClass;var Xu,Ju,Qu,eh,th;let ih=(Xu=Pt(Boolean),Ju=Pt(_s),Qu=class Donation extends xs{constructor(){super(...arguments),i(this,"covecurring(){return!this.frequency.isOneTime()}serializeForSDK(){const{id:e,blinkSignature:t,userId:i,amount:n,createdAt:r,canceledAt:s,frequency:o,activeUntil:a}=this;let l={id:e,blinkSignature:t,userId:i,amount:n,createdAt:r,canceledAt:s,frequency:o,activeUntil:a};return l.currencyCode=this.geteturn oh(this,{preferredPaymentMethodId:e})}reactivate(){return oh(this,{canceled:!1})}getShortenedFrequency(){return this.frequency.getAbrev()}formatPriceShortened(){return this.isRecurring()?`${this.getPrice()}/${this.getShortenedFrequency()}`:this.getPrice()}formatPrice(){return this.isRecurring()?`${this.getPrice()}/${this.frequency.name.toLowerCase()}`:this.getPrice()}computeAmount(){return this.coversFees?1e6*Math.floor((this.amount-3e5)/(1+(this.getMerchant().id,.079))/1e6):this.amount}isActive(){return super.isActive()&&this.status===xs.Status.ACTIVE}},eh=n(Qu.prototype,"coversFees",[Xu],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),th=n(Qu.prototype,"frequency",[Ju],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qu);class DonationStoreClass extends(dn("donation",ih)){constructor(){super(...arguments),this.Status=ih.Status}getRecurring(){reveRecurring(),...this.getRecurringUnpaid()]}getActiveRecurring(){return tis.getRecurring().filter((e=>e.isUnpaid()))}getPastRecurring(){return this.getRecurringrn this.all().filter((e=>!e.isRecurring()))}computeFeeFromAmount(e,t){return e?5e5*Math.ceil(2*(.079*e/1e6+.3)):0}}const nh=new DonationStoreClass;async function rh(e){const t=await Zt.post("/donations/donate",e);return nh.loadObject(t)}async function sh(e){void 0===e&&(e={});const t=await Zt.post("/external_providers/donate_with_cds",e);return nh.loadObject(t)}async function oh(e,i){return i=ce(i),Zt.postc function ah(e){return oh(e,{canceled:!0})}var lh,ch,uh,hh,dh,ph,mh,gh,bh,fh,yh,Ch,Sh,Eh,Ah,wh,Th,vh,Oh,Dh,Rh,Ph,Ih,Lh,Nh;let _h=(lh=Pt("User"),ch=Pt(Date),uh=Pt(String),hh=Pt(String),dh=Pt("Jurisdiction"),ph=Pt(String),mh=Pt(Boolean),gh=Pt(String),bh=Pt(String),fh=Pt(String),yh=Pt(String),Ch=Pt(String),Sh=class LegalEntity extends StoreObject{constructor(){super(...arguments),i(this,"owner",Eh,this),i(this,"createdAt",Ah,this),i(this,"name",wh,this),i(this,"legalName",Th,this),i(this,"jurisdiction",vh,this),i(this,"legalEntityType",Oh,this),i(this,"isNonProfit",Dh,this),i(this,"taxId",Rh,this),i(this,"streetAddress",Ph,this),i(this,"stateAddress",Ih,this),i(this,"cardStatementName",Lh,this),i(this,"bankAccountLastDigits",Nh,this)}toString(){return this.name}},Eh=n(Sh.prototype,"owner",[lh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ah=n(Sh.prototype,"createdAt",[ch],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wh=n(Sh.prototype,"name",[uh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Th=n(Sh.prototype,"legalName",[hh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vh=n(Sh.prototype,"jurisdiction",[dh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Oh=n(Sh.prototype,"legalEntityType",[ph],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dh=n(Sh.prototype,"isNonProfit",[mh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Rh=n(Sh.prototype,"taxId",[gh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ph=n(Sh.prototype,"streetAddress",[bh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ih=n(Sh.prototype,"stateAddress",[fh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Lh=n(Sh.prototype,"cardStatementName",[yh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nh=n(Sh.prototype,"bankAccountLastDigits",[Ch],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sh);const xh=Ct("LegalEntity",_h);var Mh,Bh,kh,Uh,Hh,zh,Fh,Vh,Gh,Wh,jh,Yh,Kh,Zh,qh,$h,Xh,Jh,Qh,ed,td,id,nd,rd,sd;let od=Wt(((Bh=class CoverageChangeType extends BaseEnum{}).UPGRADE=void 0,Bh.DOWNGRADE=void 0,Bh.EQUIVALENT=void 0,Mh=Bh))||Mh,ad=(kh=Pt("Merchant"),Uh=Pt(String),Hh=Pt(Object),zh=Pt(Boolean),Fh=Pt(Boolean),Vh=Pt(Boolean),Gh=Pt(Boolean),Wh=Pt(String),jh=Pt(String),Yh=Pt("SubscriptionCoverage"),Kh=Pt(Array),Zh=class SubscriptionCoverage extends StoreObject{constructor(){super(...arguments),i(this,"merchant",qh,this),i(this,"name",$h,this),i(this,"description",Xh,this),i(this,"requiresAddress",Jh,this),i(this,"addressRequiresPostalCode",Qh,this),i(this,"addressRequiresPhoneNumber",ed,this),i(this,"billableProRata",td,this),i(this,"blinkCoverage",id,this),i(this,"extraCoverage",nd,this),i(this,"includesCoverage",rd,this),i(this,"benme}getDescription(){return this.description}getAvailableOffers(){return Wo.filter((e=>e.coverageId===this.id&&e.isAvailable()))}isAvailable(){return!this.deletedAt&&this.getAvailableOffers().length}toString(){return this.getName()}},qh=n(Zh.prototype,"merchant",[kh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$h=n(Zh.prototype,"name",[Uh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xh=n(Zh.prototype,"description",[Hh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jh=n(Zh.prototype,"requiresAddress",[zh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qh=n(Zh.prototype,"addressRequiresPostalCode",[Fh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ed=n(Zh.prototype,"addressRequiresPhoneNumber",[Vh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),td=n(Zh.prototype,"billableProRata",[Gh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),id=n(Zh.prototype,"blinkCoverage",[Wh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nd=n(Zh.prototype,"extraCoverage",[jh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rd=n(Zh.prototype,"includesCoverage",[Yh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sd=n(Zh.prototype,"benefitIds",[Kh],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zh);const ld=Ct("subscriptionCoverage",ad);var cd,ud,hd;let dd=(cd=Pt(si),ud=class SubscriptionChange extends StoreObject{constructor(){super(...arguments),i(this,"status",hd,this)}},hd=n(ud.prototype,"status",[cd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ud);var pd,md,gd,bd,fd,yd,Cd,Sd,Ed,Ad,wd,Td,vd,Od,Dd;Ct("subscriptionChange",dd);let Rd=Wt(((md=class SocialAccountProvider extends BaseEnum{}).FACEBOOK=void 0,md.GOOGLE=void 0,md.TWITTER=void 0,md.LINKEDIN=void 0,md.GITHUB=void 0,md.CDS={value:"cds",name:"CDS"},md.FULCO=void 0,pd=md))||pd,Pd=(gd=Pt("UserProfile"),bd=Pt(Rd),fd=Pt(String),yd=Pt(Object),Cd=Pt(Date),Sd=Pt(Date),Ed=class SocialAccount extends StoreObject{constructor(){super(...arguments),i(this,"user",Ad,this),i(this,"provider",wd,this),i(this,"uid",Td,this),i(this,"extraData",vd,this),i(this,"createdAt",Od,this),i(this,"lastModified",Dd,this)}getcountNumber(){return this.uid.split("-")[1]}},Ad=n(Ed.prototype,"user",[gd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wd=n(Ed.prototype,"provider",[bd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Td=n(Ed.prototype,"uid",[fd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vd=n(Ed.prototype,"extraData",[yd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Od=n(Ed.prototype,"createdAt",[Cd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Dd=n(Ed.prototype,"lastModified",[Sd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ed);const Id=Ct("SocialAccount",Pd);var Ld,Nd,_d,xd,Md,Bd,kd,Ud,Hd,zd,Fd,Vd,Gd,Wd,jd,Yd,Kd,Zd,qd,$d,Xd,d=class UserSessionSource extends BaseEnum{}).PASSWORD=void 0,Nd.PASSWORD_RESET=void 0,Nd.SECURE_PASSWORD=void 0,Nd.SOCIAL=void 0,Nd.EMAIL_LINK=void 0,Nd.EMAIL_SHORT_CODE=void 0,Nd.EMAIL_LONG_CODE=void 0,Nd.REGISTRATION=void 0,Nd.CANCEL_CLOSE_ACCOUNT_TOKEN=void 0,Nd.UNDO_CHANGE_EMAIL_TOKEN=void 0,Nd.ADMIN_GENERATED=void 0,Nd.MERCHANT_GENERATED=void 0,Ld=Nd))||Ld,cp=(_d=Pt("UserProfile"),xd=Pt(String),Md=Pt(lp),Bd=Pt(Rd),kd=Pt("SocialAccount"),Ud=Pt(Date),Hd=Pt(Date),zd=Pt(Date),Fd=Pt(String),Vd=Pt(String),Gd=Pt("Jurisdiction"),Wd=Pt(String),jd=Pt("Merchant"),Yd=Pt("Merchant"),Kd=class UserSession extends StoreObject{constructor(){super(...arguments),i(this,"user",Zd,this),i(this,"key",qd,this),i(this,"source",$d,this),i(this,"provider",Xd,this),i(this,"socialAccount",Jd,this),i(this,"createdAt",Qd,this),i(this,"expiresAt",ep,this),i(this,"revokedAt",tp,this),i(this,"ip",ip,this),i(this,"countryCode",np,this),i(this,"jurisdiction",rp,this),i(this,"userAgent",sp,this),i(this,"originMerchant",op,this),i(this,"sharedWithMerchant",ap,this)}},Zd=n(Kd.prototype,"user",[_d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qd=n(Kd.prototype,"key",[xd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$d=n(Kd.prototype,"source",[Md],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xd=n(Kd.prototype,"provider",[Bd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jd=n(Kd.prototype,"socialAccount",[kd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qd=n(Kd.prototype,"createdAt",[Ud],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ep=n(Kd.prototype,"expiresAt",[Hd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tp=n(Kd.prototype,"revokedAt",[zd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ip=n(Kd.prototype,"ip",[Fd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),np=n(Kd.prototype,"countryCode",[Vd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rp=n(Kd.prototype,"jurisdiction",[Gd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sp=n(Kd.prototype,"userAgent",[Wd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),op=n(Kd.prototype,"originMerchant",[jd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ap=n(Kd.prototype,"sharedWithMerchant",[Yd],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kd);Ct("UserSession",cp);const up="blinkPay-",hp={UPDATE_SDK_USER_DATA:"updateSdkUserData",CREATE_IFRAME_APP:"createIframeApp",IFRAME_HTML_LOADED:"iFrameHtmlLoaded",REQUEST_AMAZON_PAY:"requestAmazonPay",ROUTE_CHANGE:"routeChange",TRANSITION_CHANGE:"transitionChange",SHOW_AUTOPAY:"showAutopay",START_FLOW_REQUEST:"startFlowRequest",UPDATE_PANEL_SIZE:"updatePanelSize",REQUEST_UPDATE_PANEL_SIZE:"requestUpdatePanelSize",UPDATE_PANEL_CONTENT:"updatePanelContent",CHECK_FLOW_SUCCESS:"checkFlowDone",SCROLL_IFRAME_TOP:"scrollIframeTop",DESTROY_PANEL:"destroyPanel",USER_TOKEN_UPDATE:"userTokenUpdate",REDIRECT_TO_URL:"redirectToUrl",SET_MERCHANT_TOKEN:"setMerchantToken",UPDATE_MERCHANT_TOKEN:"updateMerchantToken",SESSION_PAYMENT_MADE:"sessionPaymentMade",MAKE_PAYMENT_VIA_SDK:"makePaymentViaSDK",MAKE_NEXT_PAYMENT_MANUALLY:"makeNextPaymentManually",WIDGET_DATA_LOADED:"widgetDataLoaded",UPDATE_GLOBAL_STATE:"updateGlobalState",UPDATE_ANALYTICS_DATA_FROM_SDK:"updateAnalyticsDataFromSDK",AMAZON_PAY_EVENT:"amazonPayEvent",PAYMENT_REQUEST:"paymentRequest",PAYMENT_RESPONSE:"paymentResponse",UPDATE_APP_STATE:"updateAppState",REPOSITION_WIDGET:"repositionWidget",ANALYTICS_EVENT:"analyticsEvent",FLOW_CHECKPOINT:"flowCheckpoint",EDIT_MERCHAntUserMetadata"};function dp(e){return up+e}function pp(e,i,n,r){const s=t({},n,{appType:r,type:dp(i)});e===window&&window.postBlinkMessageSync?window.postBlinkMessageSync(s):e.postMessage(s,"*")}const mp=new class IFrameConnection extends Dispatchable{constructor(){super(),this.appType=null,this.allIframesDispatch=new Dispatchable,window.blinkIframeConnections?window.blinkIframeConnections.push(this):window.blinkIframeConnections=[this],window.postBlinkMessageSync||(window.postBlinkMessageSync=function(e){for(const t of window.blinkIframeConnections)t.processWindowEventData(e)}),this.attachEventListener(window,"message",(e=>{let{data:t}=e;"object"==typeof t&&(e.source===window&&this.appType===t.appType||(t.eventOrigin=e.origin,this.processWindowEventData(t)))}))}processWindowEventData(e){e.eventOrigin||(e.eventOrigin=window.location.origin);const{type:t}=e;("string"==typeof t||t instanceof String)&&t.startsWith(up)&&(this.allIframesDispatch.dispatch(t.substring(up.length),e),e.appType&&this.appType&&this.appType!==e.appType||this.dispatch(t.substring(up.length),e))}setAppType(e){this.appType=e}sendToSDK(e,t){void 0===t&&(t={}),pp(window.parent,e,t,this.appType)}sendToOpener(e,t){void 0===t&&(t={}),pp(window.opener,e,t,this.appType)}sendToIFrames(e,t){void 0===t&&(t={});const{frames:i}=window.parent;for(let n=0;n<i.length;n+=1)try{const r=i[n];r.origin===window.origin&&pp(r,e,t,this.appType)}catch(e){}}addIframesListener(e,t){return this.allIframesDispatch.addListener(e,(function(e){if(e.eventOrigin===window.origin){for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1e:!0,writable:!0,enumerable:!0,value:t}),t}}function bp(e,t,i){const{configurable:n,enumerable:r,initializer:s,value:o}=i;return{configurable:n,enumerable:r,get(){if(this===e)return;const i=s?s.call(this):o;return Object.defineProperty(this,t,{configurable:n,enumerable:r,writable:!0,value:i}),i},set:gp(t)}}function fp(e,t,i,n){let r=t?t.call(e):i;return"function"==typeof r&&(r=r()),Array.isArray(r)&&(r=Object.assign({}_"+e}function Cp(e){return"__keyframes__"+e}const Sp=Symbol("PreferredClassName");function Ep(){let e=Object.assign({},...arguments);e.targetMethodName||console.error('WARNING: targetMethodName not specified in the options (default is "css")');let t=e.targetMethodName||"css";return function(i,n,r){const{initializer:s,value:o}=r;return r.objInitializer=function(){let t=fp(this,s,o);if(e.selector&&(t.selectorName=e.selector),e.inherit){let e=Object.getPrototypeOf(i)[yp(n)];e||console.error("You're trying to inherit a rule that isn't implemented in the parent: "+n),t=ue({},fp(this,e.objInitializer,e.value),t)}return t[Sp]=function(e,t,i){if("container"!==t)return t;let n=e.constructor.name;return n.endsWith("Style")&&(n=n.substr(0,n.length-5)),n=n.replaceAll("$",""),n+"-container"}(i,n),t},i[e.getKey(n)]=Object.assign({},r),r.initializer=function(){let e=r.objInitializer.call(this);return this[t](e)},delete r.value,function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return function(e,t){return function(e){if(!e||!e.hasOwnProperty)return!1;const t=["value","initializer","get","set"];for(let i of t)if(e.hasOwnProperty(i))return!0;return!1}(t[t.length-1])?e(...t,[]):function(){return e(...arguments,t)}}(bp,t)}(i,n,r)}}const Ap=Ep({targetMethodName:"css",getKey:yp,inherit:!1}),wp=Ep({targetMethodName:"css",getKey:yp,inherit:!0});function Tp(e){return Ep(Object.assign({targetMethodName:"css",getKey:yp,inherit:!1},e))}const vp=Ep({targetMethodName:"keyframes",getKey:Cp,inherit:!1});function Op(e){if("object"!=typeof e||null===e)return{};for(const t of Object.keys(e)){let i=e[t];re(i)&&0!==i&&qe.has(he(t))&&(i+="px"),!se(i)&&!re(i)||i.toString().match("!important")?"object"==typeof i&&(e[t]=Op(i)):e[t]=i+" !important"}return e}function Dp(e,t,i){const{value:n,initializer:r}=i;returializer=function(){return Op(r.apply(this))}),Ap(e,t,i)}function Rp(e,t,i){void 0===i&&(i=null);const n=Object.values(t);for(const t of n)if(e===t)return e;return i}function Pp(e){const t=null!=e?e:{};return oe(t)?t:{}}function Ip(e){const t=null!=e?e:[];return Array.isArray(t)?t:[]}function Lp(e){return!(!se((e=Pp(e)).family)||!se(e.src)||null!=e.style&&!se(e.style)||null!=e.weight&&!re(e.weight)&&!se(e.weight)||null!=e.unicodeRange&&!se(e.unicodeRange))}var Np,_p,xp,Mp,Bp,kp,Up,Hp,zp,Fp,Vp,Gp,Wp,jp,Yp,Kp,Zp,qp,$p,Xp,Jp;Ep({targetMethodName:"keyframes",getKey:Cp,inherit:!0});let Qp=(Np=Pt("Merchant"),_p=Pt(ni),xp=Pt(ri),Mp=Pt(String),Bp=Pt(String),kp=Pt(String),Up=Pt(Number),Hp=Pt(Boolean),zp=Pt(Boolean),Fp=Pt(Object),Vp=class Product extends MoneyObject{constructor(){super(...arguments),i(this,"merchant",Gp,this),i(this,"status",Wp,this),i(this,"visibility",jp,this),i(this,"name",Yp,this),i(this,"description",Kp,this),i(this,"image",Zp,this),i(this,"inventorySize",qp,this),i(this,"allowMultiplePurchasesPerUser",$p,this),i(this,"requiresAddress",Xp,this),i(this,"shippingPrices",Jp,this)}getShippingPrices(){return Gs.loadArray(this.shippingPrices,this.currencyId)}get currency(){return this.getCurrency()}},Gp=n(Vp.prototype,"merchant",[Np],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wp=n(Vp.prototype,"status",[_p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jp=n(Vp.prototype,"visibility",[xp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Yp=n(Vp.prototype,"name",[Mp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Kp=n(Vp.prototype,"description",[Bp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zp=n(Vp.prototype,"image",[kp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qp=n(Vp.prototype,"inventorySize",[Up],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$p=n(Vp.prototype,"allowMultiplePurchasesPerUser",[Hp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Xp=n(Vp.prototype,"requiresAddress",[zp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jp=n(Vp.prototype,"shippingPrices",[Fp],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Vp);const em=Ct("Product",Qp),tm=new class IFrameState extends Dispatchable{constructor(){super(...arguments),this.iframeParams={forceHideWallet:!1,gateType:null,screen:null,allowUserToCoverFees:null,merchantPageUrl:"",merchantPageReferrerUrl:"",preferredEmail:null,activePanel:!1}}init(e){this.iframeParams=e,Ee.iFrameState=this,mp.addListener(hp.UPDATE_APP_STATE,(e=>{let{iframeParams:t}=e;this.iframeParams=t,this.dispatchChange(t)})),mp.addListener(hp.UPDATE_PANEL_CONTENT,(e=>{let{contentAST:t}=e;this.iframeParams.contentAST=t,this.dispatch("customPanelContentUpdate")}))}get activePanel(){return this.iframeParams.activePanel}get forceHideWallet(){return this.iframeParams.forceHideWallet}get preferredEmail(){return this.iframeParams.preferredEmail}getPanelToFlowOptions(){const e=["subscriptionOffer","donationOffer","newsletter","messages","subscriptionOfferConfigs"];let i={};for(const t of e)this.iframeParams[t]&&(i[t]=this.iframeParams[t]);return t({},i,{metadata:this.getMetadata(),onFlowCheckpoint:this.iframeParams.onFlowCheckpoint})}getMetadata(){return ce(t({},this.iframeParams.metadata,ce({journeyId:this.iframeParams.journeyId,journeyAlias:this.iframeParams.journeyAlias})))}get panelType(){return Rp(this.iframeParams.type,A)}getg(){return!!this.iframeParams.editRecurring}get frame(){retue(){return Rp(this.iframeParams.gateType,w)}get subscriptionOffer(){const{subscriptionOffer:e}=this.iframeParams;return e?Array.isArray(e)?e:[e]:null}get newsletter(){const{newsletter:e}=this.iframeParams;return e&&K(e)}get authSocialProviders(){return Ip(this.iframeParams.authSocialProviders).map((e=>e.toLowerCase()))}get theme(){return Pp(this.iframeParams.theme)}get messages(){return function(e){const t=Pp(e),i={};for(const e of Object.keys(t))se(e)&&(se(t[e])||re(t[e])||ne(t[e]))&&(i[e]=t[e]);return i}(this.iframeParams.messages)}get title(){return this.iframeParams.title}get textStyle(){return Pp(this.iframeParams.textStyle)}get footerSeparatorStyle(){return Pp(this.iframeParams.footerSeparatorStyle)}get footerTextStyle(){return Pp(this.iframeParams.footerTextStyle)}get allowUserToCoverFees(){rurn Pp(this.iframePatch(e){return!1}return"https:"===t.protocol}(this.iframeParams.logoSrc)?this.iframeParams.logoSrc:null}get logoAlt(){return this.iframeParams.logoAlt}get fonts(){return Ip(this.iframeParams.fonts).filter(Lp)}get merchantPageUrl(){return this.iframeParams.merchantPageUrl}get widgetVisible(){return this.iframeParams.visible}get screen(){return this.iframeParams.screen}get positionBottom(){return this.iframeParams.positionBottom}isInlineDonationFlow(){return this.gateType===w.popup&&this.paype===w.popup&&this.panelType===A.subscribe}handleFlowInline(){return this.gateType===w.popup||this.iframeParams.inlineFlow}},im=new class AuthFormService extends Dispatchable{constructor(){super(),this.isRegistration=!1,this.changeToEmailAddress=null,this.registrationMail=we("registrationMail")||tm.preferredEmail,this.confirmationCodeType=we("confirmationCodeType")||F,this.attachListener(Dispatcher.Global,"collapseIframe",(()=>this.setRegistrationMail(null))),this.attachChangeListener(tm,(()=>{!this.registrationMail&&tm.preferredEmail&&this.registrationMail!==tm.preferredEmail&&this.setRegistrationMail(tm.preferredEmail)}))}setRegistrationMail(e){this.registrationMail=e,this.dispatchChange()}setConfirmationCodeType(e){this.confirmationCodeType=e,this.dispatchChange()}setIsRegistration(e){this.isRegistration=e,this.dispatchChange()}},nm=new class SocialAuthService extends Dispatchable{constructor(){super(),this.merchantId=we("clientId")}setMerchantId(e){this.merchantId=e,this.dispatchChange()}},rm={HORIZONTAL:1,VERTICAL:2},sm="down",om={INFO:"info",PRIMARY:"primary",SECONDARY:"secondary",SUCCESS:"success",WARNING:"warning",DANGER:"error",ERROR:"error"},am={NONE:null,EXTRA_SMALL:"xs",SMALL:"sm",LARGE:"lg",EXTRA_LARGE:"xl"{constructor(e){super(e),this.setOptions(e)}setOptions(e){this.options=e,this.options.attributes=this.options.attributes||{},this.attributes=new Map;for(let e in this.options.attributes)this.attributes.set(e,this.options.attributes[e])}getValue(){let e=this.options.selector+"{";for(let[t,i]of this.attributes){if("function"==typeof i&&(i=i()),null==i)continue;t=he(has(t)&&(i+="px");const n=(e,t)=>e+":"+t+";";if(Array.isArray(i))for(const r of i)e+=n(t,r);else e+=n(t,i)}return ee){this.attributes.delete(e),this.redraw()}}class StyleElement extends(dt.Primitive("style")){getNodeAttributes(){const e=new NodeAttributes({});return this.options.name&&e.setAttribute("name",this.options.name),e}}const lm=new Set([":",">"," ","+","~","[","."]);class DynamicStyleElement extends StyleEvalueOf(){return" "+this.getClassName()+" "}getClassName(){return this.className||(self.styleInstanceCounter=(self.styleInstanceCounter||0)+1,this.className=(this.options.name||"autocls")+"-"+self.styleInstanceCounter),this.className}getSelector(){return this.options.selectorName||"."+this.getClassName()}getStyleInstances(e,t){const i=[],n={};let r=!1;for(const s in t){const o=t[s];if(null!=o)if(se(o)||re(o)||ie(o)||Array.isArray(o))n[s]=o,r=!0;else{const t=String(s).charAt(0);if(!lm.has(t)){console.error(`First character of your selector is invalid. The key is "${s}"`);continue}const n=this.getStyleInstances(e+s,o);i.push(...n)}}return r&&i.unshift(new StyleInstance({selector:e,key:e,attributes:n})),i}render(){let e=this.options.style||{};return"function"==typeof e&&(e=e()),e.selectorName&&(this.options.selectorName=e.selectorName,delete e.selectorName),this.getStyleInstances(this.getSelector(),e)}setStyle(e,t){this.options.subStyle(e,t,i){throw Error("Implement me!")}getStyleObject(){return this.options.style}}class KeyframeElement extends StyleElement{toString(){return this.getKeyframeName()}getKeyframeName(){return this.keyframeName||(self.styleInstanceCounter=(self.styleInstanceCounter||0)+1,this.keyframeName=(this.options.name||"autokeyframe")+"-"+self.styleInstanceCounter),this.keyframeName}getValue(e){let t="{";for(let i in e){let n=e[i];"function"==typeof n&&(n=n()),null!=n&&(t+=he(i)+":"+n+";")}return t+"}"}getKeyframeInstance(e){let t="{";for(let i in e){let n=e[i];t+=i+" "+this.getValue(n)}return t+"}"}render(){return"@keyframes "+this.getKeyframeName()+this.getKeyframeInstance(this.options.keyframe||{})}}class StyleSheet extends Dispatchable{constructor(e){void 0===e&&(e={}),super(),this.options=t({},this.getDefaultOptions(e),e),this.elements=new Set;const{delayedMount:i}=this.options;i||this.ensureMounted(),this.themeProps=this.options.theme.props}getDefaultOptions(e){const t=e.theme||Theme.Global;return{parent:document.head,theme:t,name:e.name||this.constructor.getElementName(t)}}ensureMounted(){if(this.styleElement)return;const e={children:[],name:this.options.name};this.styleElement=StyleElement.create(this.options.parent,e)}static getInstance(e){return void 0===e&&(e=this.theme||Theme.Global),e.getStyleSheetInstance(this)}getInstance(){return this}static initialize(){const e=this.getInstance();for(const t in this.prototype)e[t]||console.log("This is here to prevent a bundling optimization bug")}static getElementName(e){this.elementNameCounter=(this.elementNameCounter||0)+1;let t=this.name;return e!==Theme.Global&&(t+="-"+e.name),t=t.replaceAll("$",""),this.elementNameCounter>1&&(t+="-"+this.elementNameCounter),t}ensureFirstUpdate(){this._firstUpdate||(this._firstUpdate=!0,this.ensureMounted(),this.dispatch("beforeUpdate",this))}css(e){this.ensureFirstUpdate(),arguments.length>1&&(e=Object.assign({},...arguments));let t={style:e};e[Sp]&&(t.name=e[Sp]);let i=new DynamicStyleElement(t);this.elements.add(i);let n=i.render();for(let e of n)this.styleElement.appendChild(e);return i}keyframes(e){this.ensureFirstUpdate(),arguments.length>1&&(e=Object.assign({},...arguments));let t=new KeyframeElement({keyframe:e});return this.elements.add(t),this.styleElement.appendChild(t),t}addBeforeUpdateListener(e){return this.addListener("beforeUpdate",e)}update(){if(!this._firstUpdate)return;this.dispatch("beforeUpdate",this);for(const e of Object.keys(this))if(this[e]instanceof DynamicStyleElement){const t=this["__style__"+e],i=t&&t.objInitializer;i&&(this[e].options.style=i.call(this))}let e=[];for(let t of this.elements)if(t instanceof StyleElement){let i=t.render();e.push(...i)}this.styleElement.options.children=e,this.styleElement.redraw()}}const cm={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:{this.color=this.constructor.parseColor(e)}getColor(){let e=Color.parseColor(this);return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}static parseColor(e){if(e instanceof Color)return e.color;if(e instanceof Array)return 3===e.length&&e.push(1),e;e=e.trim().toLowerCase(),cm.hasOwnProperty(e)&&(e=cm[e]);let t=[],i=e.match(/^#([0-9a-f]{3})$/i);i&&(t=[17*parseInt(i[1].charAt(0),16),17*parseInt(i[1].charAt(1),16),17*parseInt(i[1].charAt(2),16),1]);let n=e.match(/^#([0-9a-f]{6})$/i);n&&(t=[parseInt(n[1].substr(0,2),16),parseInt(n[1].substr(2,2),16),parseInt(n[1].substr(4,2),16),1]);let r=e.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+\.?\d*)\s*\)$/i);r&&(t=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3]),parseFloat(r[4])]);let s=e.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);return s&&(t=[parseInt(s[1]),parseInt(s[2]),parseInt(s[3]),1]),t}static interpolate(e,t,i){void 0===i&&(i=.5);let n=Color.parseColor(e),r=Color.parseColor(t);return Color.convertToRgba([parseInt(n[0]*(1-i)+r[0]*i),parseInt(n[1]*(1-i)+r[1]*i),parseInt(n[2]*(1-i)+r[2]*i),parseFloat(n[3]*(1-i)+r[3]*i)])}static addOpacity(e,t){let i=Color.parseColor(e);return Color.convertToRgba([parseInt(i[0]),parseInt(i[1]),parseInt(i[2]),t])}static convertToRgba(e){return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}static isLight(e){let t=Color.parseColor(e);return.3*t[0]+.59*t[1]+.11*t[2]>188}static isWhite(e){let t=Color.parseColor(e);return 255===t[0]&&255===t[1]&&255===t[2]&&1===t[3]}static isBlack(e){let t=Color.parseColor(e);return 0===t[0]&&0===t[1]&&0===t[2]&&1===t[3]}}function um(e,t){return t>=0?Color.interpolate(e,"#fff",t):hm(e,-t)}function hm(e,t){if(t>=0){let i=Color.parseColor(Color.interpolate(e,"#000",t));for(let e=0;e<3;e+=1){let n=Math.pow(255-i[e],.7);i[e]=parseInt(i[e]-n*t),i[e]<0&&(i[e]=0)}return Color.convertToRgba(i)}return um(e,-t)}const dm=new RegExp(`(#[0-9a-f]{6}|#[0-9a-f]{3}|rgba\\s*\\(\\s*\\d+\\s*,\\s*\\d+\\s*,\\s*\\d+\\s*,\\s*\\d*\\.?\\d*\\s*\\)|rgb\\s*\\(\\s*\\d+\\s*,\\s*\\d+\\s*,\\s*\\d+\\s*\\))|${Object.keys(cm).sort(((e,t)=>t.length-e.length)).join("|")}`,"gi");function pm(e,t,i){return void 0===i&&(i=0),e.replace(dm,(e=>function(e,t,i){let n;return n=Color.isLight(e)?hm(e,t):um(e,t),function(e,t){const i=Color.parseColor(e),n=i.slice(0,3),r=n.findIndex((e=>e===Math.max(...n))),s=n.findIndex(((e,t)=>e===Math.min(...n)&&t!==r)),o=3-s-r,a=(n[r]+n[s])/2/255*255,l=Math.round(Math.min(255-a,a)),c=t>0?1:-1,u=Math.abs(t),h=t>0?Math.min(255-n[r],Math.max(30*t,n[s])):a-n[s],d=Math.min(l*u,h),p=a-n[r],m=a-n[o];let g;return g=0===p?1:m/p,n[s]-=c*d,n[r]+=c*d,n[o]=a+(n[r]-a)*g,Color.convertToRgba([...n.map((e=>Math.min(255,Math.max(0,Math.round(e))))),i[3]])}(n,i)}(e,t,i)))}function mm(e,t){void 0===t&&(t=!0);let i,n=[];i=t?Color.isLight(e)?[.05,0,.05,.1,.15,.3,.8]:[-.3,0,.1,.2,.23,.1,-1]:[.1,0,-.2,-.3,-.35,-.2,-1];for(let t=0;t<i.length;t+=1)n.push(hm(e,i[t]));return n}var gm,bm,fm,ym,Cm,Sm,Em,Am,wm,Tm,vm,Om,Dm;Theme.setProperties({COLOR_BACKGROUND:"#fff",COLOR_BACKGROUND_ALTERNATIVE:"#eee",COLOR_BACKGROUND_BODY:"#f8f8f8",COLOR_FOREGROUND_BODY:"#f2f2f2",COLOR_BACKGROUND_BADGE:"#777",COLOR_PRIMARY:"#337ab7",COLOR_SECONDARY:"#358ba4",COLOR_SUCCESS:"#5cb85c",COLOR_INFO:"#5bc0de",COLOR_WARNING:"#f0ad4e",COLOR_DANGER:"#d9534f",COLOR_LINK:"#337ab7",FONT_SIZE_EXTRA_SMALL:10,FONT_SIZE_SMALL:12,FONT_SIZE_DEFAULT:14,FONT_SIZE_LARGE:17,FONT_SIZE_EXTRA_LARGE:21,FONT_WEIGHT_DEFAULT:400,FONT_WEIGHT_BOLD:700,GENERAL_LINE_HEIGHT:"1.5",BASE_DISABLED_OPACITY:st(.6),DEFAULT_TRANSITION_DURATION_MS:250,DEFAULT_TRANSITION:e=>e.DEFAULT_TRANSITION_DURATION_MS+"ms ease",BASE_BORDER_RADIUS:0,BASE_BOX_SHADOW:"0px 0px 10px rgb(160, 162, 168)",BASE_BORDER_WIDTH:0,BASE_BORDER_STYLE:"solid",BASE_BORDER_COLOR:"#ddd",BUTTON_PADDING:"6px 12px",BUTTON_BORDER_RADIUS:e=>e.BASE_BORDER_RADIUS,BUTTON_COLOR:e=>e.COLOR_BACKGROUND,BUTTON_FONT_WEIGHT:e=>e.FONT_WEIGHT_DEFAULT,TOGGLE_COLOR:"#086472",TOGGLE_BACKGROUND:"#D2E2E5",TOGGLE_PILL_SIZE:20,TOGGLE_DISABLED_BACKGROUND:"#78AAB2",TOGGLE_SHADOW:"0 1px 1px 0 rgba(0,0,0,.14), 0 2px 1px -1px rgba(0,0,0,.12), 0 1px 3px 0 rgba(0,0,0,.2)",CARD_HEADER_BACKGROUND_COLOR:"#ccc",CARD_HEADER_TEXT_COLOR:"#222",CARD_HEADER_HEIGHT:"",CARD_PANEL_HEADER_HEIGHT:30,CARD_PANEL_HEADER_HEIGHT_LARGE:40,CARD_PANEL_HEADING_PADDING:10,CARD_PANEL_HEADING_PADDING_LARGE:20,CARD_PANEL_TEXT_TRANSFORM:"inherit",DARK_BOX_SHADOW:"0px 0px 10px rgba(0, 0, 0, .6)",ROW_LIST_ROW_HEIGHT:30,ROW_LIST_ROW_HEIGHT_LARGE:40,ROW_LIST_ROW_PADDING:10,ROW_LIST_ROW_PADDING_LARGE:20,ROW_LIST_ROW_BORDER_WIDTH:1,FONT_FAMILY_SANS_SERIF:"Lato, 'Segoe UI', 'Lucida Sans Unicode', 'Helvetica Neue', Helvetica, Arial, sans-serif",FONT_FAMILY_SERIF:"serif",FONT_FAMILY_MONOSPACE:"'Source Code Pro', Menlo, Monaco, Consolas, 'Courier New', monospace",FONT_FAMILY_DEFAULT:e=>e.FONT_FAMILY_SANS_SERIF,NAV_MANAGER_NAVBAR_HEIGHT:50,NAV_MANAGER_BOX_SHADOW_NAVBAR:"0px 0px 10px rgb(0, 0, 0)",NAV_MANAGER_BOX_SHADOW_SIDE_PANEL:"0px 0px 10px #202e3e",MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP:0,MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE:0,MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_DESKTOP:0,MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_MOBILE:0,FLAT_TAB_AREA_LINE_HEIGHT:30,FLAT_TAB_AREA_PADDING_SIDES:10,FLAT_TAB_AREA_UNDERLINE_HEIGHT:3,INPUT_BACKGROUND:"#fff",INPUT_BORDER_COLOR:"#E5EAE9",INPUT_BORDER_RADIUS:4},!1);class BasicLevelSizeStyleSheet extends StyleSheet{Level(e){if(!e)return null;if(this[e])return this[e];for(let t of Object.keys(om))if(e==om[t])return this[t]}Size(e){if(!e)return null;for(let t of Object.keys(am))if(e==am[t])return this[t]}}const Rm=e=>{var t,r,s,o,a,l,c,u;return t=class BasicLevelStyleClass extends BasicLevelSizeStyleSheet{constructor(){super(...arguments),i(this,"BASE",r,this),i(this,"PRIMARY",s,this),i(this,"SECONDARY",o,this),i(this,"SUCCESS",a,this),i(this,"INFO",l,this),i(this,"WARNING",c,this),i(this,"DANGER",u,this)}colorStyleRule(t,i){return e(t,i||pm(t,1))}},r=n(t.prototype,"BASE",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.colorStyleRule(this.themeProps.COLOR_BACKGROUND)}}),s=n(t.prototype,"PRIMARY",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.colorStyleRule(this.themeProps.COLOR_PRIMARY)}}),o=n(t.prototype,"SECONDARY",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.colorStyleRule(this.themeProps.COLOR_SECONDARY)}}),a=n(t.prototype,"SUCCESS",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.colorStyleRule(this.themeProps.COLOR_SUCCESS)}}),l=n(t.prototype,"INFO",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.colorStyleRule(this.themeProps.COLOR_INFO)}}),c=n(t.prototype,"WARNING",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.colorStyleRule(this.themeProps.COLOR_WARNING)}}),u=n(t.prototype,"DANGER",[Ap],{configuraolorStyleRule(this.themeProps.COLOR_DANGER)}}),t};let Pm=(gm=class FlexContainerStyle extends StyleSheet{constructor(){super(...arguments),i(this,"HORIZONTAL",bm,this),i(this,"VERTICAL",fm,this)}Orientation(e){for(let t of Object.keys(rm))if(e==rm[t])return this[t]}},bm=n(gm.prototype,"HORIZONTAL",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",">*":{marginLeft:20,flex:"1"},">:first-child":{marginLeft:0}}}}),fm=n(gm.prototype,"VERTICAL",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexDirection:"column",">*":{marginTop:20,flex:"1"},">:first-child":{marginTop:0}}}}),gm),Im=(ym=class ContainerStyle extends StyleSheet{constructor(){super(...arguments),i(this,"EXTRA_SMALL",Cm,this),i(this,"SMALL",Sm,this),i(this,"MEDIUM",Em,this),i(this,"LARGE",Am,this),i(this,"EXTRA_LARGE",wm,this)}getSizeStyle(e,t){return{margin:H.isMobileDevice()?`0 ${e}px`:`0% ${t}%`}}Size(e){for(let t of Object.keys(am))if(e==am[t])return this[t]}},Cm=n(ym.prototype,"EXTRA_SMALL",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.getSizeStyle(6,15)}}),Sm=n(ym.prototype,"SMALL",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.getSizeStyle(4,10)}}),Em=n(ym.prototype,"MEDIUM",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.getSizeStyle(4,6)}}),Am=n(ym.prototype,"LARGE",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.getSizeStyle(2,3)}}),wm=n(ym.prototype,"EXTRA_LARGE",[Ap],{configuraer:function(){return this.getSizeStyle(2,1)}}),ym),Lm=(Tm=class StyleUtils extends StyleSheet{constructor(){super(...arguments),this.extraTop=()=>this.themeProps[H.isMobileDevice()?"MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE":"MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP"],i(this,"fullHeight",vm,this),i(this,"hidden",Om,this),i(this,"fullContainer",Dm,this)}},vm=n(Tm.prototype,"fullHeight",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100%"}}}),Om=n(Tm.prototype,"hidden",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"none"}}}),Dm=n(Tm.prototype,"fullContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",height:()=>"calc(100% + "+this.extraTop()+"px)",marginTop:()=>-this.extraTop()}}}),Tm);const Nm=Lm.getInstance();var _m,xm,Mm,Bm,km,Um,Hm,zm,Fm,Vm,Gm,Wm,jm,Ym;Nm.FlexContainer=Pm.getInstance(),Nm.Container=Im.getInstance(),Nm.Utils=Lm.getInstance();let Km=(e,i)=>e instanceof dt.Element?e:dt.createElement("span",t({className:"fa fa-"+e},i));function Zm(){return Km(...arguments)}let qm=(e,t)=>e instanceof BaseUIElement?e:new dt.TextElement(e);function $m(){return qm(...arguments)}class SimpleStyledElement extends dt.Element{getLevel(){return this.options.level||this.parent&&this.parent.getLevel&&this.parent.getLevel()}setLevel(e){this.updateOptions({level:e})}getSize(){return this.options.size||this.parent&&this.parent.getSize&&this.parent.getSize()}setSize(e){this.updateOptions({size:e})}}class IconableInterface extends SimpleStyledElement{render(){return[this.beforeChildren(),this.getLabel(),super.render()]}getLabel(){return this.options.label}setLabel(e){this.updateOptions({label:e})}setIcon(e){this.updateOptions({icon:e})}getIcon(){const{icon:e}=this.options;return e&&Zm(e)}beforeChildren(){return this.getIcon()}}let Xm=e=>{const t=mm(e);let i={backgroundColor:t[2],color:t[6],textDecoration:"none"},n={backgroundColor:t[1],borderColor:t[5],color:t[6]};return Object.assign({},n,{":hover":i,":hover:disabled":n,":focus":i,":active":i})},Jm=(_m=class LabelStyle extends(Rm(Xm)){constructor(){super(...arguments),i(this,"container",xm,this),i(this,"EXTRA_SMALL",Mm,this),i(this,"SMALL",Bm,this),i(this,"MEDIUM",km,this),i(this,"LARGE",Um,this),i(this,"EXTRA_LARGE",Hm,this)}},xm=n(_m.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({fontSize:12,fontWeight:"bold",border:"0.1em solid transparent",padding:"0.07em 0.4em",borderRadius:"0.3em",textAlign:"center",whiteSpace:"nowrap",verticalAlign:"bottom",lineHeight:4/3+"",display:"inline-block",touchAction:"manipulation",":disabled":{opacity:"0.7",cursor:"not-allowed"}},this.colorStyleRule(this.themeProps.COLOR_BACKGROUND_BADGE))}}),Mm=n(_m.prototype,"EXTRA_SMALL",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:10,padding:"0.05em 0.2em",borderWidth:"0.05em"}}}),Bm=n(_m.prototype,"SMALL",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:10}}}),km=n(_m.prototype,"MEDIUM",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Um=n(_m.prototype,"LARGE",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:14}}}),Hm=n(_m.prototype,"EXTRA_LARGE",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:17,padding:"0.05em 0.2em"}}}),_m);ct(Jm)(class Label extends(dt.Primitive(IconableInterface,"span")){extraNodeAttributes(e){e.addClass(this.styleSheet.Size(this.getSize())),e.addClass(this.styleSheet.Level(this.getLevel()))}});let Qm=e=>{const t=mm(e);return{backgroundColor:t[1],borderColor:t[5],color:t[6]}},eg=(zm=class BadgeStyle extends(Rm(Qm)){constructor(){super(...arguments),i(this,"container",Fm,this),i(this,"EXTRA_SMALL",Vm,this),i(this,"SMALL",Gm,this),i(this,"MEDIUM",Wm,this),i(this,"LARGE",jm,this),i(this,"EXTRA_LARGE",Ym,this)}},Fm=n(zm.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({display:"inline-block",padding:"0.25em 0.55em",fontWeight:"700",lineHeight:"1",color:"#fff",textAlign:"center",whiteSpace:"nowrap",verticalAlign:"middle",backgroundColor:"#777",borderRadius:"0.8em",fontSize:12},this.colorStyleRule(this.themeProps.COLOR_BACKGROUND_BADGE))}}),Vm=n(zm.prototype,"EXTRA_SMALL",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"10px",padding:"0.1em 0.2em"}}}),Gm=n(zm.prototype,"SMALL",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"10px"}}}),Wm=n(zm.prototype,"MEDIUM",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),jm=n(zm.prototype,"LARGE",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"14px"}}}),Ym=n(zm.prototype,"EXTRA_LARGE",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:"17px",padding:"0.1em 0.2em"}}}),zm);var tg,ig,ng,rg,sg,og,ag,lg,cg,ug,hg;ct(eg)(class Badge extends(dt.Primitive(IconableInterface,"span")){extraNodeAttributes(e){e.addClass(this.styleSheet.Size(this.getSize())),e.addClass(this.styleSheet.Level(this.getLevel()))}});const dg=e=>{const i=mm(e),n={backgroundColor:i[2]},r={backgroundColor:i[3]},s={backgroundColor:i[4]},o={backgroundColor:i[1],borderColor:i[5],color:i[6]};return t({},o,{":hover":n,":hover:disabled":t({},o),":focus":n,":active":r,":hover:active":s,":focus:active":s,".active":s})};let pg=(tg=class ButtonStyle extends(Rm(dg)){constructor(){super(...arguments),i(this,"container",ig,this),i(this,"EXTRA_SMALL",ng,this),i(this,"SMALL",rg,this),i(this,"LARGE",sg,this),i(this,"EXTRA_LARGE",og,this)}getLevel(e){return super.getLevel(e)||this.INFO}},ig=n(tg.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({outline:0,border:"1px solid",padding:this.themeProps.BUTTON_PADDING,borderRadius:this.themeProps.BUTTON_BORDER_RADIUS,fontFamily:"inherit",fontSize:this.themeProps.FONT_SIZE_DEFAULT,fontWeight:this.themeProps.BUTTON_FONT_WEIGHT,textAlign:"center",whiteSpace:"nowrap",verticalAlign:"middle",touchAction:"manipulation",userSelect:"none",cursor:"pointer",":disabled":{opacity:.7,cursor:"not-allowed"}},this.colorStyleRule(this.themeProps.BUTTON_COLOR))}}),ng=n(tg.prototype,"EXTRA_SMALL",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:this.themeProps.FONT_SIZE_EXTRA_SMALL,padding:"0.2em 0.4em",borderWidth:"0.05em"}}}),rg=n(tg.prototype,"SMALL",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:this.themeProps.FONT_SIZE_SMALL}}}),sg=n(tg.prototype,"LARGE",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:this.themeProps.FONT_SIZE_LARGE}}}),og=n(tg.prototype,"EXTRA_LARGE",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:this.themeProps.FONT_SIZE_EXTRA_LARGE,padding:"0.2em 0.4em"}}}),tg);var mg;ag=class ButtonGroupStyle extends StyleSheet{constructor(){super(...arguments),i(this,"HORIZONTAL",lg,this),i(this,"VERTICAL",cg,this)}Orientation(e){for(let t of Object.keys(rm))if(e===rm[t])return this[t]}},lg=n(ag.prototype,"HORIZONTAL",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{pointerEvents:"none",">*":{"margin-left":"5px",display:"inline-block",pointerEvents:"initial"},">:first-child":{"margin-left":"0px"}}}}),cg=n(ag.prototype,"VERTICAL",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{pointerEvents:"none",">*":{"margin-top":"5px",display:"block",pointerEvents:"initial"},">:first-child":{"margin-top":"0px"}}}}),ug=class RadioButtonGroupStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",hg,this)}},hg=n(ug.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{pointerEvents:"none",">*":{pointerEvents:"initial",borderRadius:0,margin:0},">:last-child":{borderTopRightRadius:"0.3em",borderBottomRightRadius:"0.3em"},">:first-child":{borderTopLeftRadius:"0.3em",borderBottomLeftRadius:"0.3em"}}}});let gg=ct(pg)(mg=class Button extends(dt.Primitive(IconableInterface,"button")){extraNodeAttributes(e){const{styleSheet:t}=this;e.addClass(t.Size(this.getSize())),e.addClass(t.Level(thisetEnablenabled(e){this.updateOptions({disabled:!this.childMap=new WeakMap,this.numRedraws=0}getPreferredActive(){const{children:e}=this.options;for(const t of e)if(t.options.as(){return{fullHeight:!1,preserveScroll:!0}}extraNodeAttributes(e){this.options.fullHeight&&e.addClass(Nm.Utils.fullHeight)}copyState(e){let t=Object.assign({},e.options,{children:this.overwriteChildren(this.options.children||[],e.options.children||[])});this.setOptions(t),this.activeChild=this.getPreferredActive()}render(){return this.activeChild||this.options.children[0]}overwriteChildren(e,t){let i=this.getElementKeyMap(e)||new Map;for(let e=0;e<t.length;e+=1){let n=t[e],r=n.options&&n.options.key||"autokey"+e,s=i.get(r);if(s===n)continue;const o=s===this.activeChild;s&&n.canOverwrite(s)&&(t[e]=n=this.overwriteChild(s,n)),o&&(n.options.active=!0)}return t}redraw(){if(this.numRedraws+=1,this.applyNodeAttributes(),this.applyRef(),ut.push(this),this.render(),ut.pop(),0==this.options.children.length)return;const e=this.activeChild||this.options.children[0];for(let t of this.options.children)t!==e&&(this.options.lazyRender?(this.getChildProperties(t).isUpToDate=!1,t.applyRef()):this.updateChild(t));this.updateActiveChild(e)}getChildProperties(e){return this.childMap.has(e)||this.childMap.set(e,{isMounted:!!e.node,redrawIndex:-1}),this.childMap.get(e)}updateChild(e){this.getChildProperties(e).redrawIndex<this.numRedraws&&(e.node?e.redraw():e.mount(this),this.getChildProperties(e).redrawIndex=this.numRedraws)}appendChild(e,t){return void 0===t&&(t=!1),this.options.children.push(e),t&&e.mount(this),1==this.options.children.length&&this.setActive(e),e}getActive(){return this.activeChild}insertChildNodeBefore(e,t){let i=this.getChildProperties(e);i.isMounted=!0,i.redrawIndex=this.numRedraws}updateActiveChild(e){if(e&&e.node===this.node.firstChild)return this.updateChild(e),void(this.children[0]=this.activeChild=e);for(;this.node.firstChild;)this.node.removeChild(this.node.firstChild);e?(this.updateChild(e),this.node.appendChild(e.node),this.children[0]=this.activeChild=e):this.activeChild=null}deactivateChild(e){e.dispatch("hide"),e.dispatch("setActive",!1),this.options.preserveScroll&&(this.getChildProperties(e).scrollTop=this.node.scrollTop)}activateChild(e){e.dispatch("setActive",!0),e.dispatch("show"),this.options.preserveScroll&&(this.node.scrollTop=this.getChildProperties(e).scrollTop||0)}setActive(e){this.activeChild!==e&&(this.activeChild&&this.deactivateChild(this.activeChild),this.updateActiveChild(e),this.activeChild&&this.activateChild(this.activeChild))}hasChild(e){return this.childMap.has(e)}onMount(){this.addListener("shouldRedrawChild",(e=>{e.child.isInDocument()?e.child.redraw():this.getChildProperties(e.child).isUpToDate=!1}))}}class PageTitleManager{static getPrefix(){return this.prefix}static setPrefix(e){this.prefix=e,this.updatePageTitle()}static setDefaultTitle(e){this.defaultTitle=e}static getitle(e){this.title=e,this.updatePageTitle()}static getFullPageTitle(){return $([this.getPrefix(),this.geIcon(){throw Error("Not implemented yet!")}}PageTitleManager.title=null,PageTitleManager.defaultTitle="Website",PageTitleManager.prefix=null;class Router extends Switcher{static getHistoricPath(e){e=Math.abs(e);const t=this.localHistory.length-1-e;return t<0?null:this.localHistory[t].split("?")[0].split("#")[0]}static getCurrentPath(){let e="";return e=this.useLocalHistory&&this.localHistory.length?this.getHistoricPath(0):location.pathname,e}static parseURL(e){return void 0===e&&(e=location.pathname),rray(e)||(e=e.split("/")),e.filter((e=>""!=e))}static joinQueryParams(e){rRIComponent(t)}=${encodeURIComponent(e[t])}`)).join("&")}static formatURL(e){return Array.isArray(e)&&(e=e.length?"/"+e.join("/"):"/"),se(e)&&"/"!==e[0]&&(e="/"+e),e}static changeURL(e,t){if(void 0===t&&(t={queryParams:{},state:{},replaceHistory:!1,forceElementUpdate:!1,keepSearchParams:!1}),e=this.formatURL(e),t.queryParams&&Object.keys(t.queryParams).length>0?e=`${e}?${this.joinQueryParams(t.queryParams)}`:t.keepSearchParams&&(e+=location.search),e===window.location.pathname&&!t.forceElementUpdate)return;t.state=t.state||{};const i=[t.state,PageTitleManager.getTitle(),e];this.useLocalHistory?(t.replaceHistory&&this.localHistory.pop(),0!==this.localHistory.length&&this.localHistory[this.localHistory.length-1]==e||this.localHistory.push(e)):t.replaceHistory?window.history.replaceState(...i):window.history.pushState(...i),this.updateURL()}static onPopState(){this.changeURL(this.parseURL(this.getCurrentPath()),{replaceHistory:!0,forceElementUpdate:!0,keepSearchParams:!0}),Dispatcher.Global.dispatch("externalURLChange")}static back(){this.useLocalHistory?(this.localHistory.pop(),this.onPopState()):window.history.back()}static updateURL(){this.Global.setURL(this.parseURL(this.getCurrentPath()))}static setGlobalRouter(e){this.Global=e,window.onpopstate=()=>{this.onPopState()},this.globalSetURL&&(this.Globa}clearCache(){this.getRoutes().clearCache()}getRoutes(){return this.options.routes}getPageNotFound(){const e=dt.createElement("h1",{children:["Can't find url, make sure you typed it correctly"]});return e.pageTitle="Page not found",e}getPageToRender(e){const t=this.getRoutes().getPage(e);return!1===t?this.getPageNotFound():Array.isArray(t)?(this.constructor.changeURL(...t),null):t}deactivateChild(e){super.deactivateChild(e),e.options.doNotCache&&e.destroyNode()}setURL(e){e=$(e);const t=this.getPageToRender(e);if(!t)return;const i=this.getActive();i!==t?(null==i||i.dispatch("urlExit"),this.setActive(t),t.dispatch("urlEnter")):t.dispatch("urlReload"),t.pageTitle&&PageTitleManager.setTitle(t.pageTitle),this.dispatchChange(e,t,i)}onMount(){Router.Global||this.constructor.setGlobalRouter(this)}}Router.localHistory=[],Router.useons(){return{beforeEnter:null,cachePage:!0}}constructor(e,i,n,r){void 0===n&&(n=[]),void 0===r&&(r={}),this.cachedPages=new Map,this.expr=e instanceof Array?e:[e],this.pageGenerator=i,this.subroutes=$(n),"string"==typeof r&&(r={title:r}),this.options=t({},this.getDefaultOptions(),r),this.cachedPages=new Map}clearCache(){this.cachedPages.clear();for(const e of this.subroutes)e.clearCache&&e.clearCache()}matches(e){if(e.length<this.expr.length)return null;let t=[];for(let i=0;i<this.expr.length;i+=1){const n=this.expr[i]===this.constructor.ARG_KEY;if(e[i]!=this.expr[i]&&!n)return null;n&&t.push(e[i])}return{args:t,urlParts:e.slice(this.expr.length)}}getPageTitle(){return this.options.title}getPageGuard(){return this.options.beforeEnter}generatePage(e){if(!e)return null;for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];const r=i.toString();if(!this.cachedPages.has(r)){const t={args:$(i),argsArray:i,doNotCache:this.options.doNotCache},n=e.prototype instanceof dt.Element?new e(t):e(t);if(n&&!n.pageTitle&&this.getPageTitle()&&(n.pageTitle=this.getPageTitle()),this.options.doNotCache)return n;this.cachedPet(r)}matchesOwnNode(e){return 0===e.length}executeGuard(){const e=this.getPageGuard();return e?e(this.getSnapshot()):null}getPage(e,t){let i,n=this.matchesOwnNode(e)?this:null;for(var r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];if(!n)for(const t of this.subroutes)if(i=t.matches(e),i){i.args.length&&s.push(i.args),n=t;break}if(!n)return!1;const a=this.executeGuard();return a?Array.isArray(a)?a:this.generatePage(a,...s):n===this?this.generatePage(this.pageGenerator,...s):n.getPage(i.urlParts,t,...s)}getSnapshot(){return{expr:this.expr,url:window.location.href,path:`${window.location.pathname}${window.location.search}`,params:new URLSearchParams(window.location.search)}}}Route.ARG_KEY="%s";class TerminalRoute extends Route{constructor(e,t,i){void 0==his.timeout=null}matchesOwnNode(e){return!0}getPage(e,t){const i=super.getPage(...arguments);return clearTimeout(this.timeout),this.timeout=setTimeout((()=>{null!=i&&i.setURL&&i.setURL(e)})),i}}const bg=new Set(["width","height","rx","ry","cx","cy","x","y"]);class SVGNodeAttributes extends NodeAttributes{fixMozAttributes(e){if(this.hasOwnProperty("style"))for(let t of bg.values())this.style.hasOwnProperty(t)&&!this.hasOwnProperty(t)&&this.setAttribute(t,this.style[t],e)}setStyle(e,t,i){super.setStyle(e,t,i),bg.has(e)&&this.setAttribute(e,t,i)}applyClassName(e){if(this.className){const t=String(this.className);e.setAttribute("class",t)}else e.removeAttribute("class")}apply(e,t){this.transform=this.transform||this.translate,super.apply(e,t),this.fixMozAttributes(e)}}let fg={};fg.Element=class SVGElement extends dt.Element{createNode(){return this.node=document.createElementNS("http://www.w3.org/2000/svg",this.getNodeType()),$e(this),this.node}getScreenCoordinatedForPoint(e){const t=this.node,i=t.ownerSVGElement||t;if(i.createSVGPoint){let n=i.createSVGPoint();return n.x=e.x,n.y=e.y,n.matrixTransform(t.getScreenCTM().inverse())}const n=this.getBoundingClientRect();return{x:e.x-n.left-t.clientLeft,y:e.y-n.top-t.clientTop}}getMouseCoordinatesForEvent(e){return void 0===e&&(e=window.event),this.getScreenCoordinatedForPoint({x:H.getEventX(e),y:H.getEventY(e)})}saveState(){let e={};retureturn new SVGNodeAttributes(this.options)}translate(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.options.translate="translate("+e+","+t+")"}getBoundingClientRect(){let e=this.node,t=0,i=0;for(;e&&e!==document.body;)t-=e.scrollLeft,i-=e.scrollTop,e=e.offsetParent||e.parentNode;e&&(t-=e.scrollLeft,i-=e.scrollTop);let n=this.node.getBoundingClientRect();return{top:n.top-i,left:n.left-t,width:n.width,bottom:n.bottom-i,height:n.height,right:n.right-t}}getBBox(){return this.node.getBBox()}getHeight(){return this.getBoundingClientRect().width}toFront(){const e=this.node&&this.node.parentElement;e&&(e.removeChild(this.node),e.appendChild(this.node))}toBack(){}setOpacity(e){this.options.opacity=e,this.node&&this.node.setAttribute("opacity",e)}setColor(e){this.options.color=e,this.node&&(this.node.setAttribute("stroke",e),this.node.setAttribute("fill",e))}remove(){}getSvg(){return this.parent.getSvg()}},fg.Element.domAttributesMap=new DOMAttributesMap(dt.Element.domAttributesMap,[["fill"],["height"],["opacity"],["stroke"],["strokeWidth",{domName:"stroke-width"}],["clipPath",{domName:"clip-path"}],["transform"],["width"],["cx"],["cy"],["rx"],["ry"],["x"],["y"],["x1"],["y1"],["x2"],["y2"],["offset"],["stopColor",{domName:"stop-color"}],["strokeDasharray",{domName:"stroke-dasharray"}],["strokeLinecap",{domName:"stroke-linecap"}],["viewBox",{domName:"viewBox"}]]);var yg,Cg,Sg=function(e,t,i){return i=i||{x:0,y:0},(e.x-i.x)*(t.y-i.y)-(e.y-i.y)*(t.x-i.x)},Eg=function(e,t,i){return i=i||{x:0,y:0},{x:t*Math.cos(e)+i.x,y:t*Math.sin(e)+i.y}};fg.SVGRoot=class SVGRoot NodeType(){return"svg"}getSvg(){return this}},fg.RawSVG=class RawSVG extends fg.SVGRoot{redraw(){super.redraw(),this.node.innerHTML=this.options.innerHTML}},fg.Group=class SVGGroup extends fg.Element{getNodeType(){return"g"}setColor(e){for(let t=0;t<this.children.length;t+=1)this.children[t].setColor(e)}},fg.Defs=class SVGDefs extends fg.Element{getNodeType(){return"defs"}},fg.ClipPath=class ClipPath extends fg.Element{getNodeType(){return"clipPath"}},fg.Path=class SVGPath extends fg.Element{getNodeType(){return"path"}getDefaultOptions(){return{d:""}}getNodeAttributes(){let e=super.getNodeAttributes();return e.setAttribute("d",this.getPath()),e}getPath(){return this.options.d}setPath(e){this.options.d=e,this.node.setAttribute("d",this.options.d)}ggth(e){return this.node.getPointAtLength(e)}getPointAtLengthWithAngle(e){let t,i=this.getLength();t=i<=1?i/1e3:Math.min(i/1e3,Math.log(i),1);let n=this.getPointAtLength(e),r=this.getPointAtLength(Math.min(e+t,i)),s=this.getPointAtLength(Math.max(e-t,0));return{x:n.x,y:n.y,alpha:180*Math.atan2(s.y-r.y,s.x-r.x)/Math.PI}}},fg.Circle=class SVGCircle extends fg.Element{gOptions(){return{radius:0,center:{x:0,y:0}}}getNodeAttributes(){let e=super.getNodeAttributes();return e.setAttribute("r",this.options.radius),e.setAttribute("cx",this.options.center.x),e.setAttribute("cy",this.options.center.y),e}gets.options.radius=e,this.setAttribute("r",e)}setCenter(e,t){this.options.center.x=e,this.options.center.y=t,this.setAttribute("cx",e),this.setAttribute("cy",t)}getCenter(){return this.options.center}toPath(){let e=this.options.radius,t="M"+(this.options.center.x-e)+" "+this.options.center.y+"a"+e+" "+e+" 0 0 1 "+e+" "+-e+"a"+e+" "+e+" 0 0 1 "+e+" "+e+"a"+e+" "+e+" 0 0 1 "+-e+" "+e+"a"+e+" "+e+" 0 0 1 "+-e+" "+-e;return new fg.Path({d:t})}},fg.Stop=class SVGStop extends fg.Element{getNodeType(){return"stop"}},fg.RadialGradient=class SVGRadialGradient extends fg.Element{getNodeType(){return"radialGradient"}},fg.LinearGradient=class SVGLinearGradient extends fg.Element{getNodeType(){return"linearGradient"}},fg.Ellipse=class SVGEllipse extends fg.Element{getNodeType(){return"ellipse"}},fg.CircleArc=class SVGCircleArc extends fg.Path{getPath(){let e=this.options.startAngle,t=this.options.endAngle,i=this.options.radius,n=this.options.center;var r,s,o=t-e+(t<e?2*Math.PI:0),a=Eg(e,i,n),l=Eg(t,i,n);return o<=Math.PI?(s=0,r=Sg(a,l,n)<=0?0:1):(s=1,r=Sg(a,l,n)<=0?1:0),"M "+a.x+" "+a.y+" A "+i+" "+i+" 0 "+s+" "+r+" "+l.x+" "+l.y}},fg.Rect=class SVGRect extends fg.Element{getNodeType(){return"rect"}getX(){return this.options.x}setX(e){this.options.x=e,this.node.setAttribute("x",this.options.x)}getY(){return this.options.y}setY(e){this.options.y=e,this.node.setAttribute("y",this.options.y)}getWidth(){return this.options.width}setWidth(e){this.options.width=e,this.node.setAttribute("width",this.options.width)}getHeight(){return this.options.height}setHeight(e){this.options.height=e,this.node.setAttribute("height",this.options.height)}},fg.Line=class SVGLine extends fg.Element{getNodeType(){return"line"}getDefaultOptions(){return{fill:"black",stroke:"black"}}setLine(e,t,i,n){this.options.x1=e,this.options.y1=t,this.options.x2=i,this.options.y2=n,this.setAttribute("x1",e),this.setAttribute("y1",t),this.setAttribute("x2",i),this.setAttribute("y2",n)}},fg.Polygon=class Polygon extends fg.Path{getDefaultOptions(){return{points:[]}}getNodeAttributes(){let e=super.getNodeAttributes();return e.setAttribute("d",this.getPolygonPath()),e}getPolygonPath(){let e="";for(let t=0;t<this.options.points.length;++t)e+=0==t?"M ":"L ",e+=this.options.points[t].x+" "+this.options.points[t].y+" ";return e+="Z",e}setPoints(e){this.options.points=e,this.setPath(this.getPolygons.innerHTML||this.options.__innerHTML||""}redraw(){this.node.innerHTML=this.getInnerHTML(),this.applyNodeAttributes(),this.applyRef()}}let Ag=(yg=class MakeSVGIconStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",Cg,this)}},Cg=n(yg.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",verticalAlign:"baseline",lineHeight:0,fontSize:"inherit"}}}),yg);function wg(e,i){var n;return ct(Ag)(n=class SVGIcon extends RawHTML{getNodeType(){return this.options.nodeType}extraNodeAttributes(e){"100%"===this.options.size&&e.setStyle({height:"100%"})}getDefaultOptions(){return ie(i)&&(i=i()),t({size:24,color:"currentColor",nodeType:"span"},i)}setOptions(e){super.setOptions(e),re(this.options.}getInnerHTML(){return e(this.options,this)}})||n}const Tg=wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M12 20.4375C13.6688 20.4375 15.3001 19.9427 16.6876 19.0155C18.0752 18.0884 19.1566 16.7706 19.7952 15.2289C20.4338 13.6871 20.6009 11.9906 20.2754 10.3539C19.9498 8.71721 19.1462 7.2138 17.9662 6.03379C16.7862 4.85378 15.2828 4.05019 13.6461 3.72463C12.0094 3.39907 10.3129 3.56616 8.77111 4.20477C7.22936 4.84338 5.9116 5.92484 4.98448 7.31238C4.05735 8.69992 3.5625 10.3312 3.5625 12C3.5625 14.2378 4.45145 16.3839 6.03379 17.9662C7.61612 19.5486 9.76224 20.4375 12 20.4375ZM12 6.72375C12.2225 6.72375 12.44 6.78973 12.625 6.91335C12.81 7.03697 12.9542 7.21267 13.0394 7.41824C13.1245 7.6238 13.1468 7.85 13.1034 8.06823C13.06 8.28646 12.9528 8.48692 12.7955 8.64425C12.6382 8.80158 12.4377 8.90873 12.2195 8.95214C12.0012 8.99555 11.775 8.97327 11.5695 8.88812C11.3639 8.80297 11.1882 8.65878 11.0646 8.47377C10.941 8.28876 10.875 8.07126 10.875 7.84875C10.875 7.55039 10.9935 7.26424 11.2045 7.05326C11.4155 6.84228 11.7016 6.72375 12 6.72375ZM10.875 12C10.875 11.7016 10.9935 11.4155 11.2045 11.2045C11.4155 10.9935 11.7016 10.875 12 10.875C12.2984 10.875 12.5845 10.9935 12.7955 11.2045C13.0065 11.4155 13.125 11.7016 13.125 12V16.5C13.125 16.7984 13.0065 17.0845 12.7955 17.2955C12.5845 17.5065 12.2984 17.625 12 17.625C11.7016 17.625 11.4155 17.5065 11.2045 17.2955C10.9935 17.0845 10.875 16.7984 10.875 16.5V12Z"/>\n</svg>`}));wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M20.713 16.8999L13.833 4.98332C13.4504 4.3207 12.7652 3.92505 12 3.92505C11.2348 3.92505 10.5495 4.3207 10.167 4.98332L3.28694 16.8999C2.90433 17.5626 2.90433 18.3538 3.28694 19.0165C3.66954 19.6791 4.35474 20.0747 5.11995 20.0747H18.88C19.6452 20.0747 20.3304 19.6791 20.713 19.0165C21.0957 18.3538 21.0957 17.5626 20.713 16.8999ZM19.7998 18.4892C19.6078 18.8217 19.2639 19.0202 18.88 19.0202H5.11995C4.73597 19.0202 4.39214 18.8217 4.20019 18.4892C4.00824 18.1567 4.00824 17.7597 4.20019 17.4272L11.0803 5.51063C11.2722 5.17812 11.6161 4.97963 12 4.97963C12.3839 4.97963 12.7278 5.17812 12.9197 5.51063L19.7998 17.4272C19.9917 17.7597 19.9917 18.1567 19.7998 18.4892Z"/>\n    <path d="M12.5272 9.1875H11.4726V14.4603H12.5272V9.1875Z"/>\n    <path d="M12 15.5146C11.6123 15.5146 11.2969 15.83 11.2969 16.2177C11.2969 16.6054 11.6123 16.9208 12 16.9208C12.3876 16.9208 12.703 16.6054 12.703 16.2177C12.703 15.83 12.3876 15.5146 12 15.5146Z"/>\n</svg>`}));const vg=wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M12 21C11.7669 21 11.5433 20.9074 11.3785 20.7426C11.2137 20.5777 11.1211 20.3542 11.1211 20.1211V3.87891C11.1211 3.64581 11.2137 3.42225 11.3785 3.25743C11.5433 3.0926 11.7669 3 12 3C12.2331 3 12.4567 3.0926 12.6215 3.25743C12.7863 3.42225 12.8789 3.64581 12.8789 3.87891V20.1211C12.8789 20.3542 12.7863 20.5777 12.6215 20.7426C12.4567 20.9074 12.2331 21 12 21Z"/>\n    <path d="M20.1211 12.8789H3.87891C3.64581 12.8789 3.42225 12.7863 3.25743 12.6215C3.0926 12.4567 3 12.2331 3 12C3 11.7669 3.0926 11.5433 3.25743 11.3785C3.42225 11.2137 3.64581 11.1211 3.87891 11.1211H20.1211C20.3542 11.1211 20.5777 11.2137 20.7426 11.3785C20.9074 11.5433 21 11.7669 21 12C21 12.2331 20.9074 12.4567 20.7426 12.6215C20.5777 12.7863 20.3542 12.8789 20.1211 12.8789Z"/>\n</svg>`})),Og=wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M5.25147 11.25C5.0554 11.2543 4.86881 11.3352 4.73166 11.4753C4.59451 11.6155 4.51772 11.8039 4.51772 12C4.51772 12.1961 4.59451 12.3844 4.73166 12.5246C4.86881 12.6648 5.0554 12.7457 5.25147 12.75H18.7485C18.9446 12.7457 19.1312 12.6648 19.2683 12.5246C19.4055 12.3844 19.4823 12.1961 19.4823 12C19.4823 11.8039 19.4055 11.6155 19.2683 11.4753C19.1312 11.3352 18.9446 11.2543 18.7485 11.25H5.25147Z"/>\n</svg>`})),Dg=wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M20.7364 5.65424C20.3849 5.30275 19.8151 5.30275 19.4636 5.65424L8.68104 16.4369L4.5364 12.2923C4.18494 11.9408 3.61513 11.9408 3.2636 12.2923C2.91211 12.6437 2.91211 13.2135 3.2636 13.565L8.04464 18.346C8.39599 18.6975 8.96623 18.6972 9.31744 18.346L20.7364 6.92704C21.0879 6.57558 21.0879 6.00574 20.7364 5.65424Z"/>\n</svg>`})),Rg=wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M20.4853 5.46097C20.2205 5.19572 19.7909 5.19526 19.5261 5.45985L11.3876 13.5768L8.45133 10.3877C8.1976 10.1122 7.76863 10.0944 7.49276 10.3481C7.2171 10.6018 7.19945 11.031 7.45317 11.3066L10.8678 15.015C10.9928 15.1509 11.1678 15.2298 11.3523 15.2336C11.3573 15.2338 11.3621 15.2338 11.3668 15.2338C11.5462 15.2338 11.7187 15.1626 11.8458 15.036L20.484 6.42042C20.7494 6.15587 20.7499 5.72623 20.4853 5.46097Z"/>\n    <path d="M20.3216 11.3216C19.9469 11.3216 19.6432 11.6253 19.6432 12C19.6432 16.2146 16.2146 19.6432 12 19.6432C7.78561 19.6432 4.35679 16.2146 4.35679 12C4.35679 7.78561 7.78561 4.35679 12 4.35679C12.3747 4.35679 12.6784 4.05311 12.6784 3.67841C12.6784 3.30368 12.3747 3 12 3C7.03734 3 3 7.03734 3 12C3 16.9624 7.03734 21 12 21C16.9624 21 21 16.9624 21 12C21 11.6253 20.6963 11.3216 20.3216 11.3216Z"/>\n</svg>`})),Pg=wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M12 13.9565C10.5412 13.9565 9.1517 14.5744 8.18675 15.6521C8.04275 15.8133 8.05644 16.0602 8.21727 16.2046C8.29162 16.2715 8.38514 16.3044 8.47827 16.3044C8.58549 16.3044 8.6927 16.2605 8.76979 16.1741C9.58644 15.2619 10.7639 14.7392 12 14.7392C13.2365 14.7392 14.414 15.2619 15.2302 16.1741C15.3742 16.3353 15.6219 16.3486 15.7827 16.2046C15.9436 16.0606 15.9573 15.8133 15.8133 15.6521C14.8487 14.5748 13.4592 13.9565 12 13.9565Z"/>\n    <path d="M12 3C7.03709 3 3 7.03748 3 12C3 16.9625 7.03709 21 12 21C16.9629 21 21 16.9625 21 12C21 7.03748 16.9629 3 12 3ZM12 20.2174C7.46909 20.2174 3.78261 16.5313 3.78261 12C3.78261 7.4687 7.46909 3.78261 12 3.78261C16.5309 3.78261 20.2174 7.4687 20.2174 12C20.2174 16.5313 16.5309 20.2174 12 20.2174Z"/>\n    <path d="M16.6956 9.26074C16.4792 9.26074 16.3043 9.43605 16.3043 9.65205C16.3043 10.2993 15.7776 10.826 15.1304 10.826C14.4832 10.826 13.9565 10.2993 13.9565 9.65205C13.9565 9.43605 13.7816 9.26074 13.5652 9.26074C13.3488 9.26074 13.1739 9.43605 13.1739 9.65205C13.1739 10.7309 14.0516 11.6086 15.1304 11.6086C16.2092 11.6086 17.0869 10.7309 17.0869 9.65205C17.0869 9.43605 16.912 9.26074 16.6956 9.26074Z"/>\n    <path d="M10.8261 9.65205C10.8261 9.43605 10.6512 9.26074 10.4348 9.26074C10.2184 9.26074 10.0435 9.43605 10.0435 9.65205C10.0435 10.2993 9.51676 10.826 8.86955 10.826C8.22233 10.826 7.69563 10.2993 7.69563 9.65205C7.69563 9.43605 7.52072 9.26074 7.30433 9.26074C7.08794 9.26074 6.91302 9.43605 6.91302 9.65205C6.91302 10.7309 7.79072 11.6086 8.86955 11.6086C9.94837 11.6086 10.8261 10.7309 10.8261 9.65205Z"/>\n</svg>`})),Ig=wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M15.1305 8.47803C14.4832 8.47803 13.9565 9.00472 13.9565 9.65194C13.9565 10.2992 14.4832 10.8259 15.1305 10.8259C15.7777 10.8259 16.3044 10.2992 16.3044 9.65194C16.3044 9.00472 15.7777 8.47803 15.1305 8.47803ZM15.1305 10.0432C14.9145 10.0432 14.7392 9.86755 14.7392 9.65194C14.7392 9.43633 14.9145 9.26064 15.1305 9.26064C15.3465 9.26064 15.5218 9.43633 15.5218 9.65194C15.5218 9.86755 15.3465 10.0432 15.1305 10.0432Z"/>\n    <path d="M8.86959 10.8259C9.51681 10.8259 10.0435 10.2992 10.0435 9.65194C10.0435 9.00472 9.51681 8.47803 8.86959 8.47803C8.22237 8.47803 7.69568 9.00472 7.69568 9.65194C7.69568 10.2992 8.22237 10.8259 8.86959 10.8259ZM8.86959 9.26064C9.08559 9.26064 9.2609 9.43633 9.2609 9.65194C9.2609 9.86755 9.08559 10.0432 8.86959 10.0432C8.65359 10.0432 8.47829 9.86755 8.47829 9.65194C8.47829 9.43633 8.65359 9.26064 8.86959 9.26064Z"/>\n    <path d="M15.9131 13.1738H8.08698C7.87059 13.1738 7.69568 13.3491 7.69568 13.5651C7.69568 15.9384 9.62677 17.8695 12 17.8695C14.3733 17.8695 16.3044 15.9384 16.3044 13.5651C16.3044 13.3491 16.1295 13.1738 15.9131 13.1738ZM12 17.0869C10.1902 17.0869 8.69546 15.715 8.5002 13.9564H15.4999C15.3046 15.715 13.8098 17.0869 12 17.0869Z"/>\n    <path d="M12 3C7.03709 3 3 7.03748 3 12C3 16.9625 7.03709 21 12 21C16.9629 21 21 16.9625 21 12C21 7.03748 16.9629 3 12 3ZM12 20.2174C7.46909 20.2174 3.78261 16.5313 3.78261 12C3.78261 7.4687 7.46909 3.78261 12 3.78261C16.5309 3.78261 20.2174 7.4687 20.2174 12C20.2174 16.5313 16.5309 20.2174 12 20.2174Z"/>\n</svg>`}));wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M12 3C8.40545 3 5.48108 5.92437 5.48108 9.51888C5.48108 13.9798 11.3149 20.5287 11.5633 20.8053C11.7965 21.0651 12.2039 21.0647 12.4367 20.8053C12.6851 20.5287 18.5189 13.9798 18.5189 9.51888C18.5188 5.92437 15.5945 3 12 3ZM12 12.7987C10.1915 12.7987 8.7202 11.3274 8.7202 9.51888C8.7202 7.71037 10.1915 6.23909 12 6.23909C13.8085 6.23909 15.2798 7.71041 15.2798 9.51892C15.2798 11.3274 13.8085 12.7987 12 12.7987Z"/>\n</svg>`})),wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M17.625 15.375C17.4811 15.375 17.3371 15.3201 17.2273 15.2102L12 9.98291L6.77267 15.2102C6.55287 15.43 6.19695 15.43 5.97729 15.2102C5.75764 14.9904 5.7575 14.6345 5.97729 14.4148L11.6023 8.78985C11.8221 8.57005 12.178 8.57005 12.3977 8.78985L18.0227 14.4148C18.2425 14.6346 18.2425 14.9906 18.0227 15.2102C17.9128 15.3201 17.7688 15.375 17.625 15.375Z"/>\n</svg>`}));const Lg=wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M12 15.375C11.8561 15.375 11.7121 15.3201 11.6023 15.2102L5.97729 9.58522C5.75749 9.36543 5.75749 9.0095 5.97729 8.78985C6.19708 8.57019 6.55301 8.57005 6.77266 8.78985L12 14.0172L17.2273 8.78985C17.4471 8.57005 17.803 8.57005 18.0227 8.78985C18.2423 9.00964 18.2425 9.36557 18.0227 9.58522L12.3977 15.2102C12.2878 15.3201 12.1438 15.375 12 15.375Z"/>\n</svg>`}));wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M14.8125 18.1875C14.6686 18.1875 14.5246 18.1326 14.4148 18.0227L8.78982 12.3977C8.57002 12.1779 8.57002 11.822 8.78982 11.6023L14.4148 5.97735C14.6346 5.75755 14.9905 5.75755 15.2102 5.97735C15.4298 6.19714 15.43 6.55307 15.2102 6.77272L9.98288 12L15.2102 17.2273C15.43 17.4471 15.43 17.8031 15.2102 18.0227C15.1004 18.1326 14.9564 18.1875 14.8125 18.1875Z"/>\n</svg>`})),wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M9.1875 18.1875C9.04364 18.1875 8.89964 18.1325 8.78981 18.0227C8.57001 17.8029 8.57001 17.447 8.78981 17.2273L14.0171 12L8.78981 6.77267C8.57001 6.55287 8.57001 6.19695 8.78981 5.97729C9.00961 5.75764 9.36553 5.7575 9.58518 5.97729L15.2102 11.6023C15.43 11.8221 15.43 12.178 15.2102 12.3977L9.58518 18.0227C9.47536 18.1325 9.33136 18.1875 9.1875 18.1875Z"/>\n</svg>`})),wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M18.1875 11.4376H6.96591L11.2628 7.34489C11.4878 7.13057 11.4966 6.77451 11.2822 6.54951C11.0682 6.32479 10.7122 6.31579 10.4869 6.53011L5.57962 11.2045C5.36728 11.4171 5.25 11.6995 5.25 12.0001C5.25 12.3005 5.36728 12.5832 5.58947 12.8051L10.4872 17.4699C10.596 17.5737 10.7355 17.6251 10.875 17.6251C11.0235 17.6251 11.172 17.5666 11.2825 17.4505C11.4968 17.2255 11.4881 16.8697 11.2631 16.6554L6.94819 12.5626H18.1875C18.498 12.5626 18.75 12.3106 18.75 12.0001C18.75 11.6896 18.498 11.4376 18.1875 11.4376Z"/>\n</svg>`})),wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M13.5128 6.5301C13.2881 6.31607 12.9318 6.32451 12.7177 6.54951C12.5034 6.77451 12.5124 7.13057 12.7372 7.34488L17.0521 11.4373H5.8125C5.502 11.4373 5.25 11.6893 5.25 11.9998C5.25 12.3103 5.502 12.5623 5.8125 12.5623H17.0341L12.7372 16.6551C12.5122 16.8694 12.5034 17.2255 12.7177 17.4505C12.8283 17.5663 12.9765 17.6248 13.125 17.6248C13.2645 17.6248 13.404 17.5734 13.5128 17.4696L18.4204 12.7952C18.633 12.5829 18.75 12.3005 18.75 11.9998C18.75 11.6992 18.633 11.4168 18.4105 11.1949L13.5128 6.5301Z"/>\n</svg>`}));const Ng=wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M12.6629 12L17.8627 6.80023C18.0458 6.61716 18.0458 6.32035 17.8627 6.1373C17.6796 5.95426 17.3828 5.95423 17.1998 6.1373L12 11.3371L6.80023 6.1373C6.61716 5.95423 6.32035 5.95423 6.1373 6.1373C5.95426 6.32037 5.95423 6.61718 6.1373 6.80023L11.3371 12L6.1373 17.1998C5.95423 17.3828 5.95423 17.6797 6.1373 17.8627C6.22883 17.9542 6.3488 18 6.46878 18C6.58875 18 6.70871 17.9542 6.80025 17.8627L12 12.6629L17.1997 17.8627C17.2913 17.9542 17.4112 18 17.5312 18C17.6512 18 17.7712 17.9542 17.8627 17.8627C18.0458 17.6796 18.0458 17.3828 17.8627 17.1998L12.6629 12Z"/>\n</svg>`}));wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M20.4375 6.9375H3.5625C3.41332 6.9375 3.27024 6.87824 3.16475 6.77275C3.05926 6.66726 3 6.52418 3 6.375C3 6.22582 3.05926 6.08274 3.16475 5.97725C3.27024 5.87176 3.41332 5.8125 3.5625 5.8125H20.4375C20.5867 5.8125 20.7298 5.87176 20.8352 5.97725C20.9407 6.08274 21 6.22582 21 6.375C21 6.52418 20.9407 6.66726 20.8352 6.77275C20.7298 6.87824 20.5867 6.9375 20.4375 6.9375Z"/>\n    <path d="M20.4375 12.5625H3.5625C3.41332 12.5625 3.27024 12.5032 3.16475 12.3977C3.05926 12.2923 3 12.1492 3 12C3 11.8508 3.05926 11.7077 3.16475 11.6023C3.27024 11.4968 3.41332 11.4375 3.5625 11.4375H20.4375C20.5867 11.4375 20.7298 11.4968 20.8352 11.6023C20.9407 11.7077 21 11.8508 21 12C21 12.1492 20.9407 12.2923 20.8352 12.3977C20.7298 12.5032 20.5867 12.5625 20.4375 12.5625Z"/>\n    <path d="M20.4375 18.1875H3.5625C3.41332 18.1875 3.27024 18.1282 3.16475 18.0227C3.05926 17.9173 3 17.7742 3 17.625C3 17.4758 3.05926 17.3327 3.16475 17.2273C3.27024 17.1218 3.41332 17.0625 3.5625 17.0625H20.4375C20.5867 17.0625 20.7298 17.1218 20.8352 17.2273C20.9407 17.3327 21 17.4758 21 17.625C21 17.7742 20.9407 17.9173 20.8352 18.0227C20.7298 18.1282 20.5867 18.1875 20.4375 18.1875Z"/>\n</svg>`}));const _g=wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10.3125 12C10.3125 12.9304 11.0696 13.6875 12 13.6875C12.9304 13.6875 13.6875 12.9304 13.6875 12C13.6875 11.0696 12.9304 10.3125 12 10.3125C11.0696 10.3125 10.3125 11.0696 10.3125 12Z"/>\n    <path d="M10.3125 17.625C10.3125 18.5554 11.0696 19.3125 12 19.3125C12.9304 19.3125 13.6875 18.5554 13.6875 17.625C13.6875 16.6946 12.9304 15.9375 12 15.9375C11.0696 15.9375 10.3125 16.6946 10.3125 17.625Z"/>\n    <path d="M10.3125 6.375C10.3125 7.30538 11.0696 8.0625 12 8.0625C12.9304 8.0625 13.6875 7.30538 13.6875 6.375C13.6875 5.44462 12.9304 4.6875 12 4.6875C11.0696 4.6875 10.3125 5.44462 10.3125 6.375Z"/>\n</svg>`})),xg=wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M20.4375 4.125V9.1875C20.4375 9.49842 20.1859 9.75 19.875 9.75C19.5641 9.75 19.3125 9.49842 19.3125 9.1875V5.48287L11.2727 13.5227C11.1629 13.6325 11.0189 13.6875 10.875 13.6875C10.7311 13.6875 10.5871 13.6325 10.4773 13.5227C10.2575 13.3029 10.2575 12.947 10.4773 12.7273L18.5171 4.6875H14.8125C14.5016 4.6875 14.25 4.43592 14.25 4.125C14.25 3.81408 14.5016 3.5625 14.8125 3.5625H19.875C20.1859 3.5625 20.4375 3.81408 20.4375 4.125ZM18.1875 18.75V12C18.1875 11.6891 17.9359 11.4375 17.625 11.4375C17.3141 11.4375 17.0625 11.6891 17.0625 12V18.75C17.0625 19.0604 16.8104 19.3125 16.5 19.3125H5.25C4.93964 19.3125 4.6875 19.0604 4.6875 18.75V7.5C4.6875 7.18964 4.93964 6.9375 5.25 6.9375H12C12.3109 6.9375 12.5625 6.68592 12.5625 6.375C12.5625 6.06408 12.3109 5.8125 12 5.8125H5.25C4.31948 5.8125 3.5625 6.56948 3.5625 7.5V18.75C3.5625 19.6805 4.31948 20.4375 5.25 20.4375H16.5C17.4305 20.4375 18.1875 19.6805 18.1875 18.75Z"/>\n</svg>`}));wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M19.6133 14.2844C19.3657 14.2844 19.165 14.4851 19.165 14.7327V18.7131C19.1641 19.4556 18.5626 20.0573 17.8201 20.058H5.24147C4.49898 20.0573 3.89746 19.4556 3.89659 18.7131V7.03102C3.89746 6.28871 4.49898 5.68701 5.24147 5.68614H9.22182C9.46943 5.68614 9.67011 5.48546 9.67011 5.23784C9.67011 4.99041 9.46943 4.78955 9.22182 4.78955H5.24147C4.00411 4.79095 3.0014 5.79366 3 7.03102V18.7133C3.0014 19.9506 4.00411 20.9533 5.24147 20.9547H17.8201C19.0575 20.9533 20.0602 19.9506 20.0616 18.7133V14.7327C20.0616 14.4851 19.8609 14.2844 19.6133 14.2844Z"/>\n    <path d="M19.884 3.63629C19.0962 2.84845 17.8189 2.84845 17.0311 3.63629L9.03324 11.6341C8.97843 11.6889 8.93886 11.7569 8.91819 11.8315L7.86646 15.6285C7.8232 15.7842 7.86716 15.9509 7.98133 16.0652C8.09568 16.1794 8.26239 16.2233 8.41807 16.1803L12.2151 15.1284C12.2897 15.1077 12.3576 15.0681 12.4124 15.0133L20.4101 7.0153C21.1967 6.22694 21.1967 4.9507 20.4101 4.16233L19.884 3.63629ZM10.01 11.9255L16.5556 5.37973L18.6666 7.49074L12.1209 14.0365L10.01 11.9255ZM9.58836 12.7717L11.2749 14.4584L8.94201 15.1047L9.58836 12.7717ZM19.7762 6.38139L19.3007 6.85682L17.1896 4.74564L17.6652 4.27021C18.1028 3.83259 18.8123 3.83259 19.25 4.27021L19.7762 4.79625C20.2131 5.23439 20.2131 5.94342 19.7762 6.38139Z"/>\n</svg>`})),wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M19.875 16.5V18.75C19.875 19.3704 19.3704 19.875 18.75 19.875H5.25C4.62956 19.875 4.125 19.3704 4.125 18.75V16.5C4.125 16.1895 4.377 15.9375 4.6875 15.9375C4.998 15.9375 5.25 16.1895 5.25 16.5V18.75H18.75V16.5C18.75 16.1895 19.002 15.9375 19.3125 15.9375C19.623 15.9375 19.875 16.1895 19.875 16.5Z"/>\n    <path d="M7.66483 12.3977C7.44489 12.1778 7.44489 11.8222 7.66483 11.6023C7.88477 11.3824 8.24027 11.3824 8.46021 11.6023L11.4375 14.5796V4.6875C11.4375 4.377 11.6895 4.125 12 4.125C12.3105 4.125 12.5625 4.377 12.5625 4.6875V14.5796L15.5398 11.6023C15.7598 11.3824 16.1153 11.3824 16.3352 11.6023C16.5551 11.8222 16.5551 12.1778 16.3352 12.3977L12.3977 16.3352C12.175 16.5585 11.8178 16.5512 11.6018 16.3352L7.66483 12.3977Z"/>\n</svg>`}));const Mg=wg((e=>{let{size:t}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M6.98918 13.8775L6.36263 16.2165L4.07258 16.2649C3.3882 14.9956 3 13.5432 3 11.9999C3 10.5074 3.36295 9.10006 4.00631 7.86084H4.0068L6.04559 8.23462L6.9387 10.2612C6.75177 10.8061 6.64989 11.3911 6.64989 11.9999C6.64996 12.6605 6.76963 13.2935 6.98918 13.8775Z" fill="#FBBB00"/>\n    <path d="M20.8427 10.3188C20.9461 10.8633 21 11.4255 21 12.0002C21 12.6445 20.9323 13.273 20.8032 13.8793C20.3651 15.9424 19.2203 17.7439 17.6344 19.0187L17.6339 19.0182L15.066 18.8872L14.7025 16.6184C15.7548 16.0012 16.5772 15.0354 17.0104 13.8793H12.1979V10.3188H17.0806H20.8427Z" fill="#518EF8"/>\n    <path d="M17.6339 19.0178L17.6344 19.0183C16.0921 20.258 14.1328 20.9998 12 20.9998C8.57259 20.9998 5.59271 19.0841 4.07259 16.2649L6.98918 13.8774C7.74923 15.9059 9.70599 17.3499 12 17.3499C12.986 17.3499 13.9098 17.0833 14.7025 16.618L17.6339 19.0178Z" fill="#28B446"/>\n    <path d="M17.7447 5.07197L14.8291 7.45894C14.0087 6.94615 13.0389 6.64992 12 6.64992C9.65405 6.64992 7.66069 8.16013 6.93872 10.2613L4.00679 7.86099H4.0063C5.50417 4.97308 8.52163 3 12 3C14.1837 3 16.186 3.77787 17.7447 5.07197Z" fill="#F14336"/>\n</svg>`})),Bg=wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M14.8571 5.98875H16.5004V3.12675C16.2169 3.08775 15.2419 3 14.1064 3C11.7371 3 10.1141 4.49025 10.1141 7.22925V9.75H7.49963V12.9495H10.1141V21H13.3196V12.9503H15.8284L16.2266 9.75075H13.3189V7.5465C13.3196 6.62175 13.5686 5.98875 14.8571 5.98875Z"/>\n</svg>`})),kg=wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M20.9955 21.0002V20.9994H21V14.3979C21 11.1684 20.3048 8.68066 16.5293 8.68066C14.7143 8.68066 13.4963 9.67666 12.999 10.6209H12.9465V8.98216H9.36675V20.9994H13.0943V15.0489C13.0943 13.4822 13.3913 11.9672 15.3315 11.9672C17.2433 11.9672 17.2718 13.7552 17.2718 15.1494V21.0002H20.9955Z"/>\n    <path d="M3.29699 8.98291H7.02899V21.0002H3.29699V8.98291Z"/>\n    <path d="M5.16149 3C3.96824 3 2.99999 3.96825 2.99999 5.1615C2.99999 6.35475 3.96824 7.34325 5.16149 7.34325C6.35474 7.34325 7.32299 6.35475 7.32299 5.1615C7.32224 3.96825 6.35399 3 5.16149 3V3Z"/>\n</svg>`})),Ug=wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M19.1505 8.33475C19.8825 7.815 20.4982 7.16625 21 6.41925V6.4185C20.3302 6.71175 19.6178 6.90675 18.8738 7.00125C19.6388 6.5445 20.223 5.82675 20.4975 4.962C19.7843 5.38725 18.9967 5.68725 18.1575 5.85525C17.4802 5.13375 16.515 4.6875 15.462 4.6875C13.419 4.6875 11.7743 6.34575 11.7743 8.37825C11.7743 8.67075 11.799 8.952 11.8597 9.21975C8.79225 9.06975 6.07725 7.59975 4.25325 5.3595C3.93525 5.91225 3.74775 6.5445 3.74775 7.22475C3.74775 8.50275 4.4055 9.63525 5.38725 10.2915C4.794 10.2803 4.21275 10.1077 3.72 9.837V9.8775C3.72 11.6708 4.99875 13.1602 6.6765 13.5037C6.37575 13.5863 6.04875 13.6252 5.709 13.6252C5.47275 13.6252 5.23425 13.6118 5.01075 13.5623C5.4885 15.0233 6.846 16.098 8.4585 16.1332C7.203 17.115 5.6085 17.7067 3.88275 17.7067C3.5805 17.7067 3.29025 17.6932 3 17.6565C4.635 18.7102 6.5715 19.3125 8.661 19.3125C15.1732 19.3125 19.4175 13.8795 19.1505 8.33475Z"/>\n</svg>`}));wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M19.5637 6.54975L21 5.17575V4.875H16.0245L12.4785 13.701L8.44425 4.875H3.22725V5.17575L4.905 7.1955C5.0685 7.34475 5.154 7.563 5.13225 7.78275V15.72C5.184 16.0057 5.091 16.2998 4.89 16.5075L3 18.798V19.095H8.35875V18.7943L6.46875 16.5075C6.264 16.299 6.16725 16.0102 6.2085 15.72V8.8545L10.9125 19.0988H11.4593L15.504 8.8545V17.0153C15.504 17.2305 15.504 17.2748 15.363 17.4158L13.908 18.8235V19.125H20.967V18.8243L19.5645 17.451C19.4415 17.358 19.3778 17.202 19.404 17.0505V6.95025C19.3778 6.798 19.4408 6.642 19.5637 6.54975Z"/>\n</svg>`}));const Hg=wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 80 16" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M4.569,12 L4.569,10.976 L2.777,10.976 L2.777,8.128 L4.809,8.128 C5.833,8.128 6.67566667,7.84266667 7.337,7.272 C7.99833333,6.70133333 8.329,5.872 8.329,4.784 C8.329,3.92 8.049,3.17333333 7.489,2.544 C6.929,1.91466667 6.00366667,1.6 4.713,1.6 L4.713,1.6 L0.297,1.6 L0.297,2.624 L1.609,2.624 L1.609,10.976 L0.297,10.976 L0.297,12 L4.569,12 Z M4.665,7.104 L2.777,7.104 L2.777,2.624 L4.617,2.624 C5.47033333,2.624 6.09433333,2.82133333 6.489,3.216 C6.88366667,3.61066667 7.081,4.144 7.081,4.816 C7.081,6.34133333 6.27566667,7.104 4.665,7.104 L4.665,7.104 Z M12.505,12.16 C13.6036667,12.16 14.473,11.808 15.113,11.104 C15.753,10.4 16.073,9.50933333 16.073,8.432 C16.073,7.41866667 15.7796667,6.54666667 15.193,5.816 C14.6063333,5.08533333 13.7316667,4.72 12.569,4.72 C11.417,4.72 10.5423333,5.09066667 9.945,5.832 C9.34766667,6.57333333 9.049,7.46133333 9.049,8.496 C9.049,9.57333333 9.35566667,10.4533333 9.969,11.136 C10.5823333,11.8186667 11.4276667,12.16 12.505,12.16 Z M12.537,11.2 C11.7796667,11.2 11.2036667,10.9333333 10.809,10.4 C10.4143333,9.86666667 10.217,9.21066667 10.217,8.432 C10.217,7.64266667 10.417,6.98666667 10.817,6.464 C11.217,5.94133333 11.7903333,5.68 12.537,5.68 C13.2836667,5.68 13.8623333,5.93333333 14.273,6.44 C14.6836667,6.94666667 14.889,7.60533333 14.889,8.416 C14.889,9.216 14.6863333,9.88 14.281,10.408 C13.8756667,10.936 13.2943333,11.2 12.537,11.2 Z M20.441,12 L22.569,6.56 L22.649,6.56 L24.825,12 L25.689,12 L27.785,5.792 L28.601,5.792 L28.601,4.88 L25.401,4.88 L25.401,5.792 L26.697,5.792 L25.385,10.288 L25.305,10.288 L23.081,4.88 L22.329,4.88 L20.217,10.288 L20.137,10.288 L18.649,5.792 L20.009,5.792 L20.009,4.88 L16.649,4.88 L16.649,5.792 L17.433,5.792 L19.609,12 L20.441,12 Z M32.553,12.16 C33.4276667,12.16 34.121,11.944 34.633,11.512 C35.145,11.08 35.449,10.56 35.545,9.952 L35.545,9.952 L34.601,9.744 C34.4943333,10.1813333 34.281,10.5333333 33.961,10.8 C33.641,11.0666667 33.1983333,11.2 32.633,11.2 C31.193,11.2 30.441,10.368 30.377,8.704 L30.377,8.704 L35.385,8.704 C35.449,8.416 35.481,8.13333333 35.481,7.856 C35.4703333,7.01333333 35.209,6.28266667 34.697,5.664 C34.185,5.04533333 33.4383333,4.736 32.457,4.736 C31.4543333,4.736 30.6596667,5.09333333 30.073,5.808 C29.4863333,6.52266667 29.193,7.43466667 29.193,8.544 C29.193,9.696 29.5023333,10.5866667 30.121,11.216 C30.7396667,11.8453333 31.5503333,12.16 32.553,12.16 Z M34.297,7.872 L30.393,7.872 C30.4676667,7.27466667 30.6596667,6.75733333 30.969,6.32 C31.2783333,5.88266667 31.7636667,5.664 32.425,5.664 C33.1183333,5.664 33.617,5.89866667 33.921,6.368 C34.225,6.83733333 34.3503333,7.33866667 34.297,7.872 L34.297,7.872 Z M40.601,12 L40.601,11.088 L38.953,11.088 L38.953,7.584 C38.953,7.02933333 39.0916667,6.57866667 39.369,6.232 C39.6463333,5.88533333 39.993,5.712 40.409,5.712 C40.5903333,5.712 40.7716667,5.744 40.953,5.808 L40.953,5.808 L41.225,7.024 L42.137,6.912 L41.865,5.12 C41.5663333,4.87466667 41.161,4.752 40.649,4.752 C40.2436667,4.752 39.8836667,4.888 39.569,5.16 C39.2543333,5.432 39.0276667,5.76533333 38.889,6.16 L38.889,6.16 L38.889,4.88 L36.553,4.88 L36.553,5.792 L37.833,5.792 L37.833,11.088 L36.585,11.088 L36.585,12 L40.601,12 Z M46.793,12.16 C47.6676667,12.16 48.361,11.944 48.873,11.512 C49.385,11.08 49.689,10.56 49.785,9.952 L49.785,9.952 L48.841,9.744 C48.7343333,10.1813333 48.521,10.5333333 48.201,10.8 C47.881,11.0666667 47.4383333,11.2 46.873,11.2 C45.433,11.2 44.681,10.368 44.617,8.704 L44.617,8.704 L49.625,8.704 C49.689,8.416 49.721,8.13333333 49.721,7.856 C49.7103333,7.01333333 49.449,6.28266667 48.937,5.664 C48.425,5.04533333 47.6783333,4.736 46.697,4.736 C45.6943333,4.736 44.8996667,5.09333333 44.313,5.808 C43.7263333,6.52266667 43.433,7.43466667 43.433,8.544 C43.433,9.696 43.7423333,10.5866667 44.361,11.216 C44.9796667,11.8453333 45.7903333,12.16 46.793,12.16 Z M48.537,7.872 L44.633,7.872 C44.7076667,7.27466667 44.8996667,6.75733333 45.209,6.32 C45.5183333,5.88266667 46.0036667,5.664 46.665,5.664 C47.3583333,5.664 47.857,5.89866667 48.161,6.368 C48.465,6.83733333 48.5903333,7.33866667 48.537,7.872 L48.537,7.872 Z M54.009,12.16 C54.6596667,12.16 55.1876667,12 55.593,11.68 C55.9983333,11.36 56.3183333,10.9866667 56.553,10.56 L56.553,10.56 L56.553,12 L58.905,12 L58.905,11.088 L57.673,11.088 L57.673,0.992 L54.825,0.992 L54.825,1.904 L56.553,1.904 L56.553,6.032 C56.073,5.168 55.2783333,4.736 54.169,4.736 C53.0063333,4.736 52.1796667,5.14666667 51.689,5.968 C51.1983333,6.78933333 50.953,7.67466667 50.953,8.624 C50.953,9.73333333 51.233,10.6 51.793,11.224 C52.353,11.848 53.0916667,12.16 54.009,12.16 Z M54.297,11.2 C53.6783333,11.2 53.1636667,10.976 52.753,10.528 C52.3423333,10.08 52.137,9.41866667 52.137,8.544 C52.137,7.79733333 52.321,7.136 52.689,6.56 C53.057,5.984 53.6356667,5.696 54.425,5.696 C54.9903333,5.696 55.481,5.88266667 55.897,6.256 C56.313,6.62933333 56.5316667,7.11466667 56.553,7.712 L56.553,7.712 L56.553,8.848 C56.5316667,9.38133333 56.3103333,9.90666667 55.889,10.424 C55.4676667,10.9413333 54.937,11.2 54.297,11.2 Z M67.529,12.16 C68.2756667,12.16 68.8836667,11.9653333 69.353,11.576 C69.8223333,11.1866667 70.1636667,10.6933333 70.377,10.096 C70.5903333,9.49866667 70.697,8.88533333 70.697,8.256 C70.697,7.12533333 70.409,6.256 69.833,5.648 C69.257,5.04 68.5263333,4.736 67.641,4.736 C66.9583333,4.736 66.417,4.896 66.017,5.216 C65.617,5.536 65.3103333,5.91466667 65.097,6.352 L65.097,6.352 L65.097,0.992 L62.745,0.992 L62.745,1.904 L63.977,1.904 L63.977,9.92 C63.977,10.272 63.9503333,10.6293333 63.897,10.992 C63.8436667,11.3546667 63.7956667,11.6906667 63.753,12 L63.753,12 L64.873,12 L65.033,10.816 C65.5023333,11.712 66.3343333,12.16 67.529,12.16 Z M67.289,11.2 C66.6703333,11.2 66.1503333,10.992 65.729,10.576 C65.3076667,10.16 65.097,9.65333333 65.097,9.056 L65.097,9.056 L65.097,7.984 C65.1183333,7.46133333 65.3316667,6.94933333 65.737,6.448 C66.1423333,5.94666667 66.6863333,5.696 67.369,5.696 C67.9663333,5.696 68.473,5.92 68.889,6.368 C69.305,6.816 69.513,7.48266667 69.513,8.368 C69.513,9.104 69.337,9.76 68.985,10.336 C68.633,10.912 68.0676667,11.2 67.289,11.2 Z M75.961,15.408 L75.961,14.496 L74.745,14.496 L75.705,12 L78.217,5.792 L79.065,5.792 L79.065,4.88 L75.929,4.88 L75.929,5.792 L77.081,5.792 L75.305,10.576 L75.209,10.576 L73.209,5.792 L74.457,5.792 L74.457,4.88 L71.161,4.88 L71.161,5.792 L72.009,5.792 L74.601,11.984 L73.673,14.496 L72.345,14.496 L72.345,15.408 L75.961,15.408 Z"/>\n</svg>`})),zg=wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 53 12" fill="${i}" xmlns="http://www.w3.org/2000/svg">\n    <path d="M6 0C9.31371 0 12 2.68629 12 6C12 9.31371 9.31371 12 6 12C2.68629 12 0 9.31371 0 6C0 2.68629 2.68629 0 6 0ZM7.10769 1.84615L3.69231 6.73304H5.90769L4.98462 10.1538L8.30769 5.16924H6.09231L7.10769 1.84615Z"/>\n    <path d="M24.8713 8.73837C24.8713 9.64535 24.569 10.4157 23.9642 11.0494C23.3595 11.6831 22.4524 12 21.2429 12H16V10.6221H17.3149V2.0407H16V0.662791H21.1763C22.2416 0.662791 23.0516 0.909881 23.6064 1.40407C24.1612 1.89826 24.4386 2.55232 24.4386 3.36628C24.4386 3.97093 24.2666 4.49709 23.9226 4.94477C23.5786 5.39244 23.1237 5.67442 22.5578 5.7907V5.86047C23.3345 5.97674 23.9143 6.30232 24.2971 6.83721C24.6799 7.3721 24.8713 8.00581 24.8713 8.73837ZM22.8241 3.75C22.8241 3.09883 22.6466 2.65116 22.2915 2.40698C21.9364 2.16279 21.4593 2.0407 20.8601 2.0407H18.8295V5.52907H20.7769C22.1417 5.52907 22.8241 4.93605 22.8241 3.75ZM23.2402 8.6686C23.2402 7.42441 22.5745 6.80233 21.2429 6.80233H18.8295V10.6221H20.9267C21.6479 10.6221 22.2138 10.468 22.6244 10.1599C23.0349 9.85174 23.2402 9.35465 23.2402 8.6686ZM29.6482 12H25.7868V10.814H26.9852V1.20349H25.7368V0H28.4498V10.814H29.6482V12ZM31.6455 2.37209V0.575582H33.1601V2.37209H31.6455ZM34.4085 12H30.5304V10.814H31.7454V5.40698H30.4804V4.20349H33.2101V10.814H34.4085V12ZM44.2119 12H40.3504V10.814H41.5488V7.44767C41.5488 6.65697 41.4046 6.09593 41.1161 5.76453C40.8276 5.43314 40.4447 5.26744 39.9676 5.26744C39.3462 5.26744 38.8525 5.48256 38.4863 5.91279C38.1201 6.34303 37.9259 6.84302 37.9037 7.41279V10.814H39.1021V12H35.2407V10.814H36.439V5.40698H35.1907V4.20349H37.9037V5.52907C38.4253 4.54069 39.2685 4.04651 40.4336 4.04651C41.1549 4.04651 41.7652 4.27907 42.2645 4.74419C42.7638 5.2093 43.0135 5.93604 43.0135 6.92442V10.814H44.2119V12ZM53 12H49.3882V10.814H50.3869L48.5726 8.47674H47.3077V10.814H48.2731V12H44.6613V10.814H45.8596V1.20349H44.6113V0H47.3077V7.36047H48.6226L50.1538 5.40698H49.072V4.20349H52.6172V5.40698H51.5853L49.7045 7.77907L52.0679 10.814H53V12Z"/>\n</svg>`})),Fg=wg((e=>{let{size:t,color:i}=e;return`<svg height="${t}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M12 4C7.58172 4 4 7.58172 4 12C4 16.4183 7.58172 20 12 20C16.4183 20 20 16.4183 20 12" stroke="${i}" stroke-width="1.75886"24.6295H12.516L7.67677 41.5667Z"/>\n</svg>`})),Gg=wg((e=>{let{size:t}=e;return`<svg height="${t}" viewBox="0 0 19 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 1C0 0.447715 0.447715 0 1 0H18C18.5523 0 19 0.447715 19 1V11C19 11.5523 18.5523 12 18 12H1C0.447715 12 0 11.5523 0 11V1Z" fill="#085B68"/>\n    <path d="M8.31764 10L11.7059 5.20001H9.44705L10.4823 2L7 6.70589H9.25882L8.31764 10Z" fill="white"/>\n</svg>`})),Wg=wg((e=>{let{size:t}=e;return`<svg height="${t}" viewBox="0 0 19 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M17.9867 0H1.01333C0.453685 0 0 0.45627 0 1.01911V10.9809C0 11.5437 0.453685 12 1.01333 12H17.9867C18.5463 12 19 11.5437 19 10.9809V1.01911C19 0.45627 18.5463 0 17.9867 0Z" fill="#2557D6"/>\n    <path d="M0 5.63536H0.912684L1.11847 5.13829H1.57915L1.78438 5.63536H3.58V5.25536L3.74029 5.63701H4.67245L4.83274 5.2497V5.63538H9.29523L9.29315 4.81943H9.37949C9.43993 4.82155 9.45759 4.82713 9.45759 4.9271V5.63538H11.7656V5.44545C11.9518 5.54532 12.2413 5.63538 12.6224 5.63538H13.5933L13.8011 5.13831H14.2618L14.465 5.63538H16.3361V5.16323L16.6195 5.63538H18.1189V2.51416H16.635V2.88277L16.4272 2.51416H14.9046V2.88277L14.7137 2.51416H12.657C12.3127 2.51416 12.0101 2.56229 11.7656 2.6964V2.51416H10.3463V2.6964C10.1907 2.55816 9.97875 2.51416 9.74305 2.51416H4.55767L4.20974 3.3203L3.85244 2.51416H2.2192V2.88277L2.03976 2.51416H0.646861L0 3.99813V5.63536ZM5.7608 5.18517H5.21322L5.21119 3.43245L4.43668 5.18514H3.96771L3.19119 3.4309V5.18514H2.10479L1.89957 4.68598H0.787436L0.580133 5.18514H0L0.956485 2.94726H1.75008L2.6585 5.06608V2.94726H3.53028L4.2293 4.4654L4.87142 2.94726H5.76072V5.18514H5.7608V5.18517ZM1.71702 4.22152L1.35146 3.32937L0.987924 4.22152H1.71702ZM7.93995 5.18512H6.15564V2.94723H7.93995V3.41324H6.6898V3.81663H7.90998V4.27536H6.68977V4.72229H7.93992V5.18512H7.93995ZM10.4544 3.54996C10.4544 3.90675 10.2167 4.0911 10.0781 4.14644C10.1949 4.19098 10.2948 4.2697 10.3423 4.3349C10.4177 4.44621 10.4307 4.54562 10.4307 4.7455V5.18512H9.89198L9.88995 4.9029C9.88995 4.76825 9.90282 4.57459 9.80564 4.46692C9.72759 4.3882 9.60863 4.37113 9.41632 4.37113H8.84295V5.18514H8.30883V2.94723H9.53737C9.81033 2.94723 10.0115 2.95444 10.1841 3.05441C10.3531 3.15439 10.4544 3.30033 10.4544 3.54996ZM9.77925 3.88224C9.70583 3.92687 9.61904 3.92835 9.51502 3.92835H8.86616V3.43128H9.52386C9.61694 3.43128 9.71407 3.43546 9.77715 3.47164C9.84643 3.50425 9.8893 3.57362 9.8893 3.66947C9.8893 3.76731 9.84851 3.84601 9.77925 3.88224ZM11.3111 5.18512H10.7661V2.94723H11.3111V5.18512ZM17.6378 5.18512H16.8809L15.8684 3.50545V5.18512H14.7806L14.5728 4.68596H13.4632L13.2616 5.18512H12.6365C12.3769 5.18512 12.0482 5.12761 11.862 4.9376C11.6743 4.74759 11.5766 4.49021 11.5766 4.08326C11.5766 3.75136 11.635 3.44794 11.8646 3.20817C12.0373 3.02957 12.3077 2.94723 12.6758 2.94723H13.1929V3.42675H12.6866C12.4917 3.42675 12.3816 3.45579 12.2756 3.55931C12.1845 3.65355 12.1221 3.83166 12.1221 4.06624C12.1221 4.30598 12.1697 4.47887 12.2689 4.59179C12.3511 4.68035 12.5006 4.7072 12.6412 4.7072H12.8811L13.6339 2.94731H14.4342L15.3385 5.06402V2.94733H16.1518L17.0907 4.50591V2.94733H17.6378V5.18514V5.18512ZM14.3911 4.22155L14.0215 3.3294L13.6539 4.22155H14.3911H14.3911ZM18.9989 8.75847C18.8692 8.94848 18.6163 9.04481 18.2741 9.04481H17.2425V8.56481H18.2699C18.3718 8.56481 18.4431 8.55138 18.486 8.5094C18.5266 8.47188 18.5496 8.41885 18.5492 8.36341C18.5492 8.29818 18.5232 8.24641 18.484 8.21538C18.4452 8.18122 18.3888 8.1657 18.2958 8.1657C17.7942 8.14863 17.1686 8.18122 17.1686 7.47286C17.1686 7.1482 17.3744 6.80644 17.9349 6.80644H18.9989V6.36106H18.0103C17.712 6.36106 17.4953 6.43263 17.3418 6.54387V6.36106H15.8797C15.6459 6.36106 15.3714 6.41913 15.2416 6.54387V6.36106H12.6306V6.54387C12.4228 6.39375 12.0722 6.36106 11.9104 6.36106H10.1882V6.54387C10.0237 6.38443 9.65818 6.36106 9.43535 6.36106H7.50786L7.06681 6.8391L6.6537 6.36106H3.77441V9.48443H6.59948L7.05396 8.99882L7.4821 9.48443L9.22348 9.48598V8.75126H9.39466C9.6257 8.75482 9.89824 8.7455 10.1387 8.64145V9.48438H11.575V8.67031H11.6443C11.7327 8.67031 11.7414 8.67396 11.7414 8.76244V9.4843H16.1047C16.3817 9.4843 16.6712 9.41329 16.8316 9.28443V9.4843H18.2156C18.5036 9.4843 18.7849 9.44387 18.9989 9.34033V8.75847ZM10.3475 7.55709C10.3475 8.1789 9.88423 8.30728 9.41734 8.30728H8.75089V9.05808H7.71273L7.05503 8.31706L6.37151 9.05808H4.25575V6.81964H6.40401L7.06118 7.55337L7.7406 6.81964H9.44733C9.87121 6.81964 10.3475 6.93717 10.3475 7.55709ZM6.10098 8.58726H4.78772V8.14188H5.96037V7.68517H4.78772V7.27821H6.12684L6.71108 7.93054L6.10098 8.58726ZM8.21697 8.84356L7.39693 7.93177L8.21697 7.04894V8.84356ZM9.42975 7.84825H8.73949V7.27821H9.43596C9.62879 7.27821 9.76265 7.35694 9.76265 7.55268C9.76265 7.74626 9.63497 7.84825 9.42977 7.84825H9.42975ZM13.0459 6.81964H14.8286V7.28257H13.5779V7.68952H14.7981V8.14621H13.5779V8.59159L14.8286 8.59362V9.05808H13.0459V6.81964H13.0459ZM12.3606 8.01785C12.4795 8.06178 12.5767 8.14055 12.6222 8.20575C12.6976 8.31505 12.7086 8.41704 12.7107 8.61434V9.05808H12.1744V8.77803C12.1744 8.64336 12.1874 8.44397 12.0881 8.33987C12.0101 8.25969 11.8911 8.2405 11.6962 8.2405H11.1254V9.05808H10.5887V6.81964H11.8219C12.0923 6.81964 12.2892 6.83161 12.4646 6.92527C12.6331 7.02728 12.7391 7.167 12.7391 7.42234C12.7391 7.77964 12.5011 7.96196 12.3605 8.01783L12.3606 8.01785ZM12.0587 7.73485C11.9872 7.77732 11.8989 7.78096 11.7949 7.78096H11.1461V7.27821H11.8038C11.8989 7.27821 11.994 7.28025 12.0587 7.31864C12.1279 7.3549 12.1693 7.42422 12.1693 7.51999C12.1693 7.61579 12.1279 7.69294 12.0587 7.73485ZM16.8805 7.87745C16.9845 7.98522 17.0403 8.12132 17.0403 8.35169C17.0403 8.83322 16.7399 9.05801 16.2012 9.05801H15.1609V8.57801H16.197C16.2983 8.57801 16.3702 8.56458 16.4152 8.52259C16.4519 8.48797 16.4783 8.43768 16.4783 8.37661C16.4783 8.31138 16.4498 8.25961 16.4131 8.22858C16.3722 8.19444 16.3159 8.1789 16.2229 8.1789C15.7234 8.16183 15.0978 8.19444 15.0978 7.48608C15.0978 7.1614 15.3015 6.81964 15.8615 6.81964H16.9323V7.29607H15.9525C15.8553 7.29607 15.7922 7.29971 15.7385 7.3365C15.68 7.37273 15.6583 7.42654 15.6583 7.49752C15.6583 7.58198 15.7079 7.63943 15.7751 7.66427C15.8315 7.68389 15.892 7.68965 15.983 7.68965L16.2705 7.69742C16.5605 7.7045 16.7595 7.75472 16.8805 7.87745ZM19 7.27821H18.0265C17.9293 7.27821 17.8648 7.28185 17.8104 7.31864C17.754 7.3549 17.7323 7.40868 17.7323 7.47971C17.7323 7.56415 17.7799 7.6216 17.8491 7.64644C17.9055 7.66606 17.966 7.67182 18.055 7.67182L18.3444 7.67956C18.6366 7.6868 18.8316 7.73709 18.9504 7.85974C18.9721 7.87681 18.9851 7.89597 19 7.91515V7.27821Z" fill="white"/>\n</svg>`})),jg=wg((e=>{let{size:t}=e;return`<svg height="${t}" viewBox="0 0 19 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M17.9867 0H1.01333C0.453685 0 0 0.45627 0 1.01911V10.9809C0 11.5437 0.453685 12 1.01333 12H17.9867C18.5463 12 19 11.5437 19 10.9809V1.01911C19 0.45627 18.5463 0 17.9867 0Z" fill="black"/>\n    <path d="M5.60191 10.7431V10.11C5.60191 9.86719 5.45497 9.70897 5.2138 9.70897C5.08713 9.70897 4.9516 9.75127 4.85711 9.88732C4.78364 9.77114 4.67977 9.70897 4.52144 9.70897C4.40186 9.70378 4.28768 9.75928 4.21744 9.85675V9.72936H4.01807V10.7424H4.21744V10.1627C4.21744 9.98439 4.32232 9.89904 4.46925 9.89904C4.61619 9.89904 4.70004 9.99407 4.70004 10.1627V10.7431H4.89941V10.1627C4.89941 9.98439 5.00429 9.89904 5.15123 9.89904C5.29816 9.89904 5.38201 9.99407 5.38201 10.1627V10.7431H5.60191ZM8.87548 9.74057H8.50815V9.43483H8.30928V9.74057H8.09952V9.91891H8.30928V10.3948C8.30928 10.6269 8.39313 10.7643 8.64495 10.7643C8.74035 10.7623 8.83382 10.7369 8.91728 10.6904L8.8542 10.512C8.7976 10.5476 8.73195 10.5659 8.66521 10.5648C8.56033 10.5648 8.50789 10.5013 8.50789 10.3959V9.91076H8.87523V9.74184L8.87548 9.74057ZM10.7431 9.70897C10.6326 9.7065 10.529 9.76262 10.4702 9.85675V9.72936H10.2708V10.7424H10.4702V10.1734C10.4702 10.0045 10.5541 9.89904 10.6906 9.89904C10.7367 9.90092 10.7824 9.90801 10.8269 9.92019L10.89 9.73012C10.8419 9.71792 10.7926 9.71084 10.7431 9.70897ZM7.92067 9.81445C7.81579 9.74057 7.66885 9.70897 7.51153 9.70897C7.25972 9.70897 7.1024 9.82515 7.1024 10.0257C7.1024 10.1946 7.21792 10.2894 7.43807 10.3212L7.54295 10.3317C7.65847 10.3528 7.73193 10.3951 7.73193 10.4478C7.73193 10.5217 7.64808 10.5752 7.49051 10.5752C7.37019 10.5777 7.25234 10.5407 7.15484 10.4697L7.04996 10.628C7.19689 10.7334 7.37524 10.7553 7.48063 10.7553C7.77449 10.7553 7.93181 10.6183 7.93181 10.4282C7.93181 10.2499 7.80515 10.1645 7.58551 10.1327L7.48063 10.1222C7.38613 10.1118 7.30329 10.0799 7.30329 10.0167C7.30329 9.94286 7.38715 9.88936 7.50267 9.88936C7.62933 9.88936 7.75448 9.9421 7.81756 9.97369L7.92067 9.81445ZM10.9635 10.2366C10.9635 10.5424 11.1628 10.7643 11.4881 10.7643C11.635 10.7643 11.7399 10.7327 11.8448 10.6481L11.7399 10.4899C11.6657 10.5503 11.5733 10.5838 11.4777 10.5849C11.3004 10.5849 11.1628 10.4478 11.1628 10.2473C11.1628 10.0468 11.2986 9.91076 11.4777 9.91076C11.5733 9.91182 11.6657 9.94531 11.7399 10.0058L11.8448 9.84757C11.7399 9.76324 11.635 9.7314 11.4881 9.7314C11.1732 9.71025 10.9635 9.9319 10.9635 10.2379V10.2366ZM9.55745 9.70897C9.26359 9.70897 9.06421 9.91993 9.06421 10.2366C9.06421 10.5533 9.27397 10.7643 9.57823 10.7643C9.72624 10.7674 9.87079 10.719 9.98736 10.6272L9.88248 10.4794C9.79817 10.5451 9.69523 10.5821 9.58861 10.5849C9.45232 10.5849 9.30539 10.5006 9.28461 10.3212H10.0297V10.2369C10.0297 9.92019 9.84068 9.70923 9.55745 9.70923V9.70897ZM9.54707 9.89904C9.694 9.89904 9.79888 9.99407 9.80927 10.1523H9.26384C9.29525 10.0045 9.39051 9.89904 9.54707 9.89904ZM6.82956 10.2366V9.73012H6.63019V9.85751C6.55672 9.76248 6.45285 9.70974 6.30491 9.70974C6.02168 9.70974 5.81167 9.9314 5.81167 10.2374C5.81167 10.5434 6.02143 10.765 6.30491 10.765C6.45184 10.765 6.55672 10.7123 6.63019 10.6173V10.7446H6.82956V10.2366ZM6.02168 10.2366C6.02168 10.0466 6.1372 9.89904 6.33657 9.89904C6.52556 9.89904 6.64057 10.0468 6.64057 10.2366C6.64057 10.4371 6.51391 10.5742 6.33657 10.5742C6.1372 10.5846 6.02168 10.4264 6.02168 10.2366ZM13.7757 9.70897C13.6652 9.7065 13.5616 9.76262 13.5029 9.85675V9.72936H13.3035V10.7424H13.5026V10.1734C13.5026 10.0045 13.5865 9.89904 13.723 9.89904C13.7691 9.90092 13.8148 9.90801 13.8593 9.92019L13.9224 9.73012C13.8743 9.71792 13.825 9.71084 13.7755 9.70897H13.7757ZM12.9992 10.2366V9.73012H12.7999V9.85751C12.7264 9.76248 12.6225 9.70974 12.4746 9.70974C12.1914 9.70974 11.9813 9.9314 11.9813 10.2374C11.9813 10.5434 12.1911 10.765 12.4746 10.765C12.6215 10.765 12.7264 10.7123 12.7999 10.6173V10.7446H12.9992V10.2366ZM12.1914 10.2366C12.1914 10.0466 12.3069 9.89904 12.5063 9.89904C12.6952 9.89904 12.8103 10.0468 12.8103 10.2366C12.8103 10.4371 12.6836 10.5742 12.5063 10.5742C12.3069 10.5846 12.1914 10.4264 12.1914 10.2366ZM15.0244 10.2366V9.3291H14.825V9.85675C14.7515 9.76171 14.6477 9.70897 14.4997 9.70897C14.2165 9.70897 14.0065 9.93063 14.0065 10.2366C14.0065 10.5426 14.2163 10.7643 14.4997 10.7643C14.6467 10.7643 14.7515 10.7115 14.825 10.6165V10.7439H15.0244V10.2366ZM14.2165 10.2366C14.2165 10.0466 14.332 9.89904 14.5314 9.89904C14.7204 9.89904 14.8354 10.0468 14.8354 10.2366C14.8354 10.4371 14.7087 10.5742 14.5314 10.5742C14.3318 10.5849 14.2163 10.4267 14.2163 10.2366H14.2165Z" fill="white"/>\n    <path d="M7.68994 2.0481H11.3308V8.02058H7.68994V2.0481Z" fill="#FF5F00"/>\n    <path d="M8.05721 5.03437C8.05746 3.87036 8.58694 2.77037 9.49462 2.04813C7.94604 0.823649 5.72178 1.00164 4.38521 2.457C3.04868 3.91236 3.04868 6.15636 4.38521 7.61175C5.72178 9.06711 7.94604 9.24513 9.49462 8.02062C8.58694 7.29839 8.05746 6.19839 8.05721 5.03437Z" fill="#EB001B"/>\n    <path d="M15.6119 5.0345C15.613 6.48793 14.7885 7.81427 13.4889 8.44994C12.1892 9.08561 10.6428 8.91894 9.50659 8.02075C10.4145 7.29869 10.944 6.19858 10.944 5.0345C10.944 3.87042 10.4145 2.77032 9.50659 2.04826C10.6428 1.15007 12.1892 0.983369 13.4889 1.61906C14.7885 2.25473 15.613 3.5811 15.6119 5.0345Z" fill="#F79E1B"/>\n</svg>`})),Yg=wg((e=>{let{size:t}=e;return`<svg height="${t}" viewBox="0 0 19 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M17.9867 0H1.01333C0.453685 0 0 0.45627 0 1.01911V10.9809C0 11.5437 0.453685 12 1.01333 12H17.9867C18.5463 12 19 11.5437 19 10.9809V1.01911C19 0.45627 18.5463 0 17.9867 0Z" fill="#0E4595"/>\n    <path d="M7.04761 8.45813L7.89275 3.47054H9.24454L8.39879 8.45813H7.04761ZM13.2824 3.57813C13.0146 3.47709 12.5949 3.36865 12.0709 3.36865C10.7352 3.36865 9.79432 4.04509 9.78634 5.01459C9.77879 5.73128 10.458 6.13107 10.9708 6.36965C11.4969 6.61408 11.6738 6.77 11.6713 6.98832C11.668 7.32261 11.2511 7.47535 10.8626 7.47535C10.3216 7.47535 10.0341 7.39979 9.59021 7.21354L9.41602 7.13428L9.22627 8.25082C9.54203 8.39003 10.1259 8.51064 10.732 8.51688C12.153 8.51688 13.0754 7.84819 13.0859 6.81288C13.091 6.24554 12.7308 5.81375 11.951 5.45777C11.4785 5.22707 11.1892 5.07309 11.1922 4.83948C11.1922 4.63217 11.4371 4.41046 11.9663 4.41046C12.4084 4.40358 12.7286 4.50052 12.978 4.60154L13.0992 4.65912L13.2824 3.5781V3.57813ZM16.7609 3.47054H15.7163C15.3927 3.47054 15.1506 3.55938 15.0085 3.88414L13.0009 8.45495H14.4204C14.4204 8.45495 14.6525 7.84035 14.705 7.70544C14.8601 7.70544 16.239 7.70758 16.4362 7.70758C16.4766 7.88218 16.6006 8.45495 16.6006 8.45495H17.855L16.7609 3.47054ZM15.1036 6.6911C15.2154 6.40374 15.6422 5.29688 15.6422 5.29688C15.6342 5.31018 15.7532 5.00812 15.8214 4.82086L15.9128 5.25089C15.9128 5.25089 16.1716 6.44142 16.2257 6.6911H15.1036Z" fill="white"/>\n    <path d="M1.1623 3.47046L1.14502 3.57426C1.67932 3.70434 2.15658 3.89257 2.57438 4.12677L3.77381 8.4501L5.204 8.44842L7.3321 3.47046H5.90021L4.5768 6.87163L4.43579 6.18045C4.42916 6.1592 4.42221 6.13805 4.41494 6.11701L3.95474 3.89153C3.87291 3.57571 3.63559 3.48147 3.342 3.47046H1.1623Z" fill="white"/>\n</svg>`})),Kg=wg((e=>{let{size:t}=e;return`<svg height="${t}" viewBox="0 0 19 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M1.33955 0C0.599893 0 0 0.589936 0 1.31745V10.6825C0 11.4102 0.599691 12 1.33955 12H17.6604C18.4001 12 19 11.4101 19 10.6825V1.31745C19 0.589809 18.4003 0 17.6604 0H1.33955Z" fill="#4D4D4D"/>\n    <path d="M7.96906 3.87744C8.1843 3.87744 8.36485 3.92159 8.58454 4.02807V4.59079C8.37642 4.39632 8.1959 4.31492 7.95716 4.31492C7.48791 4.31492 7.11888 4.68628 7.11888 5.15708C7.11888 5.65359 7.47648 6.00284 7.98041 6.00284C8.20727 6.00284 8.38448 5.92567 8.58454 5.73431V6.29731C8.35702 6.39973 8.17262 6.44017 7.95716 6.44017C7.19526 6.44017 6.60324 5.88131 6.60324 5.16058C6.60324 4.44761 7.21102 3.87744 7.96906 3.87744ZM5.60346 3.89296C5.88471 3.89296 6.14205 3.98498 6.35723 4.16488L6.09541 4.49252C5.96507 4.35291 5.84182 4.294 5.69193 4.294C5.47626 4.294 5.3192 4.41135 5.3192 4.56577C5.3192 4.69821 5.40736 4.76832 5.70761 4.87451C6.27677 5.07344 6.44542 5.24985 6.44542 5.63938C6.44542 6.1141 6.08064 6.44452 5.5607 6.44452C5.17997 6.44452 4.90317 6.30119 4.67264 5.97777L4.99584 5.68019C5.11108 5.89319 5.30329 6.00725 5.54195 6.00725C5.76517 6.00725 5.93042 5.86001 5.93042 5.66136C5.93042 5.55838 5.88036 5.4701 5.78042 5.40766C5.73008 5.3781 5.63042 5.33403 5.43454 5.26801C4.96461 5.10631 4.80339 4.93344 4.80339 4.59563C4.80339 4.19436 5.14962 3.89296 5.60346 3.89296ZM11.3211 3.93571H11.8676L12.5517 5.58272L13.2446 3.93571H13.787L12.6789 6.45069H12.4096L11.3211 3.93571ZM1.64209 3.93948H2.37653C3.18796 3.93948 3.75362 4.44358 3.75362 5.16725C3.75362 5.52809 3.58057 5.87696 3.28795 6.1085C3.04171 6.30391 2.76114 6.39156 2.37265 6.39156H1.64212V3.93948H1.64209ZM3.98383 3.93948H4.48419V6.39158H3.98385V3.93948H3.98383ZM14.0133 3.93948H15.4322V4.35497H14.5132V4.89922H15.3983V5.31451H14.5132V5.97642H15.4322V6.39158H14.0133V3.93948ZM15.7636 3.93948H16.5055C17.0826 3.93948 17.4133 4.20437 17.4133 4.66345C17.4133 5.03887 17.2059 5.28526 16.829 5.35859L17.6364 6.39158H17.0211L16.3286 5.40651H16.2634V6.39158H15.7636V3.93948ZM16.2634 4.3257V5.06832H16.4096C16.7291 5.06832 16.8984 4.93568 16.8984 4.68921C16.8984 4.45056 16.7291 4.3257 16.4175 4.3257H16.2634ZM2.14207 4.35497V5.97642H2.27634C2.59966 5.97642 2.80385 5.91721 2.96104 5.78157C3.13407 5.63426 3.23819 5.39902 3.23819 5.16373C3.23819 4.92878 3.13407 4.70055 2.96104 4.55326C2.7958 4.41033 2.59966 4.35497 2.27634 4.35497H2.14207Z" fill="white"/>\n    <path d="M10.1122 3.86135C10.8659 3.86135 11.4768 4.42612 11.4768 5.12382V5.12461C11.4768 5.82232 10.8659 6.3879 10.1122 6.3879C9.35852 6.3879 8.74756 5.82232 8.74756 5.12461V5.12385C8.74756 4.42612 9.35852 3.86133 10.1122 3.86133V3.86135ZM18.9996 6.90681C18.3651 7.34586 13.6144 10.4838 5.38892 11.9996H17.6601C18.3997 11.9996 18.9996 11.4097 18.9996 10.6821V6.90681Z" fill="#F47216"/>\n</svg>`})),Zg=wg((e=>{let{size:t}=e;return`<svg height="${t}" viewBox="0 0 19 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M17.9867 0H1.01333C0.453685 0 0 0.45627 0 1.01911V10.9809C0 11.5437 0.453685 12 1.01333 12H17.9867C18.5463 12 19 11.5437 19 10.9809V1.01911C19 0.45627 18.5463 0 17.9867 0Z" fill="#0079BE"/>\n    <path d="M14.8183 6.0621C14.8183 3.52923 12.7161 1.77846 10.4129 1.7793H8.4308C6.10006 1.77846 4.18164 3.52974 4.18164 6.0621C4.18164 8.37879 6.10006 10.2822 8.4308 10.2711H10.4129C12.7161 10.2822 14.8183 8.3783 14.8183 6.0621Z" fill="white"/>\n    <path d="M8.443 2.13818C6.31323 2.13887 4.58742 3.87851 4.58691 6.02557C4.58742 8.17227 6.31323 9.91176 8.443 9.91245C10.5733 9.91176 12.2994 8.17227 12.2997 6.02557C12.2994 3.87851 10.5733 2.13887 8.443 2.13818Z" fill="#0079BE"/>\n    <path d="M6.00562 6.01521C6.00764 4.96604 6.65785 4.07136 7.57476 3.71585V8.31406C6.65785 7.95872 6.00762 7.06453 6.00562 6.01521ZM9.32428 8.31521V3.71582C10.2415 4.07047 10.8928 4.96568 10.8944 6.01536C10.8928 7.06535 10.2415 7.95987 9.32428 8.31521Z" fill="white"/>\n</svg>`})),qg=wg((e=>{let{size:t}=e;return`<svg height="${t}" viewBox="0 0 19 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M17.9867 0H1.01333C0.453685 0 0 0.453685 0 1.01333V10.9187C0 11.4783 0.453685 11.932 1.01333 11.932H17.9867C18.5463 11.932 19 11.4783 19 10.9187V1.01333C19 0.453685 18.5463 0 17.9867 0Z" fill="#0E4C96"/>\n    <path d="M15.6369 8.78488C15.6369 9.83913 14.7825 10.694 13.7278 10.694H3.36328V3.14768C3.36328 2.09315 4.21785 1.23831 5.27253 1.23831L15.6369 1.23828V8.78488Z" fill="white"/>\n    <path d="M12.2577 6.13192C12.5537 6.13833 12.8515 6.11885 13.1463 6.14205C13.4449 6.19779 13.5169 6.64981 13.2516 6.79788C13.0707 6.89542 12.8556 6.83416 12.6594 6.85141H12.2577V6.13192H12.2577ZM13.3175 5.31758C13.3833 5.54976 13.1595 5.75818 12.9358 5.72621H12.2577C12.2624 5.50728 12.2484 5.26968 12.2646 5.06227C12.5363 5.0699 12.8105 5.04667 13.0806 5.07443C13.1966 5.10356 13.2937 5.19897 13.3175 5.31758H13.3175ZM14.9497 1.8747C14.9623 2.31806 14.9515 2.78485 14.9551 3.23721C14.9542 5.07631 14.9569 6.91545 14.9537 8.75455C14.9418 9.4438 14.331 10.0426 13.6465 10.0564C12.9613 10.0592 12.2761 10.0568 11.5909 10.0575V7.27721C12.3375 7.27331 13.0845 7.28499 13.8308 7.27134C14.177 7.24955 14.5561 7.02115 14.5723 6.64016C14.6131 6.25757 14.2523 5.99289 13.9098 5.95107C13.7781 5.94765 13.782 5.91269 13.9098 5.89743C14.2364 5.82683 14.4929 5.48873 14.3968 5.15013C14.3148 4.79399 13.9212 4.65615 13.5938 4.65684C12.9263 4.65228 12.2585 4.65618 11.5909 4.65489C11.5953 4.13583 11.5819 3.61622 11.5981 3.09754C11.651 2.42074 12.2772 1.86262 12.9521 1.8747H14.9497Z" fill="url(#paint0_linear_2443_1223)"/>\n    <path d="M4.04678 3.16774C4.06386 2.47961 4.67731 1.8856 5.36095 1.87557C6.04353 1.87346 6.72619 1.87526 7.40882 1.87465C7.40695 4.17707 7.41257 6.47967 7.40598 8.78199C7.37969 9.46178 6.7729 10.0445 6.09678 10.0564C5.41288 10.0589 4.72891 10.0568 4.04499 10.0575V7.18336C4.7093 7.34027 5.40594 7.4071 6.08363 7.30295C6.48879 7.23772 6.932 7.03888 7.06915 6.6186C7.17013 6.25907 7.11328 5.88074 7.12828 5.51174V4.65486H5.95542C5.95015 5.22157 5.96621 5.78929 5.94694 6.35536C5.91532 6.70329 5.57084 6.92435 5.24267 6.91257C4.83566 6.91685 4.02925 6.61769 4.02925 6.61769C4.02723 5.55579 4.04106 4.22602 4.04678 3.16774Z" fill="url(#paint1_linear_2443_1223)"/>\n    <path d="M7.84625 5.00077C7.78459 5.01387 7.83384 4.79051 7.81803 4.70574C7.82223 4.16994 7.80926 3.63356 7.82522 3.09814C7.87799 2.41847 8.509 1.85893 9.18661 1.87484H11.182C11.1801 4.17724 11.1857 6.47981 11.1792 8.78213C11.1529 9.46192 10.546 10.0446 9.86995 10.0566C9.186 10.0591 8.502 10.057 7.81803 10.0577V6.90883C8.28518 7.29207 8.92003 7.35176 9.50199 7.3528C9.94068 7.35264 10.3768 7.28503 10.8029 7.18382V6.60691C10.3227 6.84623 9.75828 6.99821 9.22603 6.8607C8.85474 6.76823 8.58525 6.40948 8.59128 6.02632C8.54824 5.62787 8.78189 5.20716 9.17346 5.08871C9.65961 4.9365 10.1895 5.05291 10.6452 5.25079C10.7429 5.30191 10.8419 5.36532 10.8029 5.20212V4.74866C10.0407 4.56735 9.22963 4.50059 8.46385 4.69789C8.24224 4.76041 8.02635 4.85521 7.84625 5.00077Z" fill="url(#paint2_linear_2443_1223)"/>\n    <defs>\n        <linearGradient id="paint0_linear_2443_1223" x1="11.5909" y1="5.96614" x2="14.9551" y2="5.96614" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#007B40"/>\n            <stop offset="1" stop-color="#55B330"/>\n        </linearGradient>\n        <linearGradient id="paint1_linear_2443_1223" x1="4.04501" y1="5.9661" x2="7.40882" y2="5.9661" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#1D2970"/>\n            <stop offset="1" stop-color="#006DBA"/>\n        </linearGradient>\n        <linearGradient id="paint2_linear_2443_1223" x1="7.81805" y1="5.96627" x2="11.182" y2="5.96627" gradientUnits="userSpaceOnUse">\n            <stop stop-color="#6E2B2F"/>\n            <stop offset="1" stop-color="#E30138"/>\n        </linearGradient>\n    </defs>\n</svg>`})),$g=wg((e=>{let{size:t}=e;return`<svg height="${t}" viewBox="0 0 19 12" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path d="M3.71401 0H8.44758C9.10834 0 9.51931 0.544248 9.36517 1.21418L7.16136 10.7756C7.00583 11.4432 6.34426 11.9879 5.68303 11.9879H0.949927C0.290087 11.9879 -0.121808 11.4432 0.0323352 10.7756L2.23707 1.21418C2.39122 0.544248 3.05244 0 3.71401 0Z" fill="#E21836"/>\n    <path d="M8.0538 0H13.4973C14.1579 0 13.86 0.544248 13.7046 1.21418L11.5011 10.7756C11.3465 11.4432 11.3948 11.9879 10.7327 11.9879H5.28926C4.62722 11.9879 4.21752 11.4432 4.37305 10.7756L6.5764 1.21418C6.73285 0.544248 7.39269 0 8.0538 0Z" fill="#00447C"/>\n    <path d="M13.2814 0H18.0149C18.6766 0 19.0876 0.544248 18.9322 1.21418L16.7287 10.7756C16.5732 11.4432 15.9111 11.9879 15.2496 11.9879H10.5182C9.85617 11.9879 9.44554 11.4432 9.60061 10.7756L11.8044 1.21418C11.9586 0.544248 12.6193 0 13.2814 0Z" fill="#007B84"/>\n    <path d="M4.95032 3.06425C4.46355 3.06926 4.31979 3.06425 4.27387 3.05329C4.25622 3.13805 3.92774 4.66924 3.92682 4.67052C3.85609 4.98031 3.80463 5.20113 3.62984 5.34372C3.53061 5.42662 3.41477 5.46661 3.28047 5.46661C3.0646 5.46661 2.93884 5.3583 2.91773 5.15286L2.91369 5.08233C2.91369 5.08233 2.97946 4.66738 2.97946 4.66504C2.97946 4.66504 3.3242 3.26968 3.38593 3.08523C3.38916 3.07474 3.39008 3.06926 3.39089 3.06425C2.71986 3.07019 2.6009 3.06425 2.59271 3.05329C2.58821 3.06833 2.5716 3.15484 2.5716 3.15484L2.21958 4.72754L2.18936 4.86092L2.13086 5.2972C2.13086 5.42662 2.15601 5.53225 2.20609 5.62156C2.36646 5.90476 2.82393 5.9472 3.08272 5.9472C3.41616 5.9472 3.72894 5.87561 3.94031 5.74491C4.30721 5.52584 4.40321 5.18341 4.48882 4.87911L4.52851 4.72299C4.52851 4.72299 4.88364 3.27376 4.94398 3.08523C4.94629 3.07474 4.94721 3.06926 4.95032 3.06425ZM6.15863 4.23335C6.07302 4.23335 5.91657 4.25434 5.77604 4.32395C5.72504 4.35041 5.67682 4.38096 5.62594 4.41139L5.67186 4.24385L5.6467 4.21563C5.34869 4.27661 5.282 4.28477 5.00671 4.32395L4.98363 4.33945C4.95167 4.60726 4.92329 4.80862 4.8048 5.33503C4.75969 5.52903 4.71284 5.72491 4.66588 5.91845L4.67858 5.94305C4.96067 5.92801 5.04628 5.92801 5.29146 5.93209L5.3113 5.91029C5.34246 5.74904 5.34649 5.71127 5.41549 5.38469C5.44791 5.22986 5.51552 4.88965 5.54886 4.76851C5.61013 4.73983 5.67059 4.71161 5.72828 4.71161C5.86569 4.71161 5.84896 4.83275 5.84365 4.88102C5.83777 4.96205 5.78769 5.22671 5.73635 5.45395L5.70209 5.60062C5.6782 5.70893 5.65201 5.81422 5.62813 5.9216L5.63851 5.94305C5.91657 5.92801 6.00137 5.92801 6.23882 5.93209L6.26674 5.91029C6.30966 5.65845 6.32224 5.59106 6.39838 5.22438L6.43669 5.05591C6.51111 4.72619 6.54849 4.55899 6.49219 4.42281C6.43265 4.2702 6.28981 4.23335 6.15863 4.23335ZM7.50845 4.57857C7.36065 4.60725 7.26639 4.62637 7.1727 4.63873C7.07982 4.65377 6.98925 4.66741 6.84642 4.68747L6.83511 4.69784L6.82472 4.70612C6.80984 4.81362 6.79946 4.90654 6.77973 5.01579C6.763 5.12876 6.73727 5.25713 6.69539 5.44158C6.66297 5.58277 6.64624 5.63197 6.62778 5.68164C6.60978 5.73131 6.58993 5.77958 6.55347 5.91844L6.56201 5.93126L6.56916 5.94304C6.70266 5.93663 6.79 5.93208 6.87976 5.93126C6.96941 5.928 7.06229 5.93126 7.20605 5.93208L7.21862 5.9217L7.23212 5.91028C7.25289 5.78506 7.256 5.75136 7.26869 5.69027C7.28127 5.62474 7.30296 5.53404 7.35615 5.29176C7.3813 5.17797 7.40934 5.06452 7.43541 4.9484C7.46253 4.83274 7.49091 4.71883 7.51791 4.60504L7.51387 4.59128L7.50845 4.57857ZM7.5116 4.11311C7.3773 4.03301 7.14158 4.05843 6.98294 4.16908C6.82476 4.27751 6.80676 4.43141 6.9406 4.51256C7.07259 4.59044 7.30923 4.56724 7.46649 4.45566C7.62432 4.3449 7.64405 4.1924 7.5116 4.11311ZM8.32379 5.96814C8.59551 5.96814 8.87402 5.89247 9.08366 5.66792C9.24496 5.4858 9.31892 5.21484 9.34453 5.10327C9.42795 4.73344 9.36299 4.56077 9.28142 4.4556C9.15751 4.29529 8.93852 4.24387 8.71134 4.24387C8.57474 4.24387 8.24937 4.25751 7.9952 4.49431C7.81267 4.66511 7.72833 4.8969 7.67745 5.11912C7.62611 5.34554 7.56704 5.75315 7.93797 5.90483C8.05243 5.9545 8.21742 5.96814 8.32379 5.96814ZM8.30256 5.13603C8.36521 4.85597 8.43917 4.62093 8.62793 4.62093C8.77584 4.62093 8.78657 4.79581 8.72081 5.0768C8.70904 5.13918 8.65504 5.37108 8.58201 5.46983C8.53101 5.5427 8.47067 5.58689 8.40398 5.58689C8.38414 5.58689 8.2661 5.58689 8.26426 5.40978C8.26334 5.32234 8.28099 5.23303 8.30256 5.13603ZM10.0238 5.93212L10.045 5.91032C10.0751 5.74908 10.0801 5.71118 10.1467 5.38473C10.1801 5.2299 10.2491 4.88968 10.2815 4.76854C10.3429 4.73975 10.4023 4.71153 10.4618 4.71153C10.5983 4.71153 10.5817 4.83267 10.5763 4.88094C10.5713 4.96208 10.5213 5.22663 10.469 5.45387L10.4366 5.60054C10.4118 5.70897 10.3848 5.81413 10.3609 5.92163L10.3713 5.94308C10.6503 5.92804 10.7318 5.92804 10.9707 5.93212L10.9995 5.91032C11.0414 5.65837 11.0527 5.59098 11.1311 5.22442L11.1685 5.05582C11.2433 4.7261 11.2811 4.55903 11.2258 4.42285C11.1645 4.27023 11.0207 4.23339 10.8914 4.23339C10.8057 4.23339 10.6484 4.25426 10.5087 4.32398C10.4587 4.35045 10.4087 4.38088 10.3595 4.41142L10.4023 4.24388L10.3793 4.21555C10.0814 4.27664 10.0134 4.28481 9.73843 4.32398L9.71732 4.33949C9.68397 4.6073 9.65686 4.80853 9.53837 5.33506C9.49325 5.52907 9.44641 5.72494 9.39957 5.91848L9.41214 5.94308C9.6947 5.92804 9.77904 5.92804 10.0238 5.93212ZM12.0735 5.94303C12.091 5.85652 12.1952 5.34375 12.1961 5.34375C12.1961 5.34375 12.2849 4.96751 12.2903 4.95387C12.2903 4.95387 12.3182 4.91469 12.3461 4.89918H12.3872C12.7747 4.89918 13.2124 4.89918 13.5554 4.6442C13.7888 4.46931 13.9484 4.21106 14.0195 3.8972C14.038 3.82025 14.0516 3.72872 14.0516 3.6372C14.0516 3.51699 14.0277 3.39807 13.9587 3.30515C13.7838 3.05786 13.4355 3.05331 13.0334 3.05144C13.0321 3.05144 12.8352 3.05331 12.8352 3.05331C12.3205 3.05972 12.1141 3.05786 12.0293 3.04736C12.0221 3.08526 12.0086 3.15265 12.0086 3.15265C12.0086 3.15265 11.8243 4.01612 11.8243 4.01752C11.8243 4.01752 11.3831 5.85337 11.3623 5.93988C11.8117 5.9344 11.9959 5.9344 12.0735 5.94303ZM12.4151 4.40915C12.4151 4.40915 12.6111 3.54742 12.6102 3.55069L12.6166 3.5065L12.6193 3.47281L12.6977 3.48097C12.6977 3.48097 13.102 3.51606 13.1114 3.51699C13.271 3.57937 13.3367 3.74015 13.2908 3.95001C13.2489 4.14181 13.1258 4.30305 12.9677 4.38094C12.8374 4.44693 12.6778 4.45241 12.5134 4.45241H12.407L12.4151 4.40915ZM13.6356 5.15199C13.5838 5.37514 13.5243 5.78275 13.8934 5.92802C14.0111 5.97862 14.1165 5.99366 14.2237 5.98818C14.3369 5.982 14.4418 5.92464 14.5389 5.84209C14.5301 5.87602 14.5214 5.90995 14.5126 5.94399L14.5293 5.9658C14.7948 5.95449 14.8772 5.95449 15.1648 5.9567L15.1909 5.93665C15.2329 5.68714 15.2725 5.44487 15.3816 4.96754C15.4348 4.73891 15.4879 4.51249 15.5424 4.28478L15.5339 4.25971C15.2369 4.31533 15.1576 4.32722 14.8719 4.36815L14.8502 4.38598C14.8473 4.40919 14.8443 4.43145 14.8415 4.45372C14.7971 4.3812 14.7327 4.31929 14.6334 4.2807C14.5064 4.23022 14.208 4.29528 13.9515 4.53126C13.7713 4.69973 13.6848 4.93058 13.6356 5.15199ZM14.2593 5.16563C14.3229 4.89059 14.396 4.65787 14.5852 4.65787C14.7048 4.65787 14.7678 4.76945 14.755 4.95973C14.7449 5.00718 14.7339 5.0572 14.7209 5.11375C14.7019 5.19548 14.6814 5.27651 14.6614 5.35766C14.6411 5.41315 14.6175 5.4655 14.5915 5.50036C14.5428 5.57009 14.427 5.61334 14.3603 5.61334C14.3414 5.61334 14.2246 5.61334 14.2206 5.43939C14.2197 5.35276 14.2373 5.26357 14.2593 5.16563ZM17.5165 4.25749L17.4935 4.23102C17.1997 4.29118 17.1465 4.30074 16.8765 4.33759L16.8567 4.35764C16.8557 4.3609 16.8549 4.36592 16.8535 4.37047L16.8526 4.36592C16.6516 4.8345 16.6575 4.73341 16.4939 5.10231C16.493 5.08552 16.493 5.07503 16.4921 5.05719L16.4511 4.25749L16.4254 4.23102C16.1175 4.29118 16.1103 4.30074 15.826 4.33759L15.8038 4.35764C15.8007 4.3672 15.8007 4.37769 15.7989 4.38912L15.8007 4.3932C15.8363 4.57672 15.8277 4.53579 15.8634 4.8254C15.88 4.96753 15.9021 5.11047 15.9188 5.25085C15.9468 5.48578 15.9625 5.60144 15.9967 5.95996C15.8048 6.28012 15.7593 6.40125 15.5745 6.68224L15.5757 6.68504L15.4456 6.89304C15.4307 6.91495 15.4172 6.93 15.3983 6.93641C15.3775 6.94678 15.3505 6.94865 15.313 6.94865H15.2409L15.1337 7.30892L15.5014 7.31533C15.7173 7.3144 15.853 7.21238 15.926 7.07527L16.1572 6.67489H16.1535L16.1779 6.64668C16.3334 6.30833 17.5165 4.25749 17.5165 4.25749ZM13.6356 8.98906H13.4796L14.057 7.05935H14.2485L14.3093 6.86056L14.3152 7.08162C14.308 7.21827 14.4144 7.33941 14.6938 7.31935H15.017L15.1282 6.94778H15.0066C14.9367 6.94778 14.9043 6.92994 14.9083 6.8917L14.9024 6.66679H14.304V6.66796C14.1105 6.67204 13.5327 6.68673 13.4157 6.71821C13.2741 6.75505 13.1249 6.86348 13.1249 6.86348L13.1836 6.66446H12.6238L12.5071 7.05935L11.922 9.01855H11.8085L11.6972 9.38745H12.8122L12.7748 9.51045H13.3242L13.3607 9.38745H13.5148L13.6356 8.98906ZM13.1781 7.45145C13.0885 7.47652 12.9217 7.55253 12.9217 7.55253L13.07 7.05935H13.5148L13.4075 7.41869C13.4075 7.41869 13.2701 7.42685 13.1781 7.45145ZM13.1867 8.15601C13.1867 8.15601 13.047 8.17373 12.955 8.19472C12.8644 8.22247 12.6946 8.30991 12.6946 8.30991L12.8478 7.79668H13.2949L13.1867 8.15601ZM12.9375 8.9936H12.4913L12.6206 8.56047H13.0654L12.9375 8.9936ZM14.0119 7.79668H14.655L14.5626 8.09912H13.911L13.8131 8.42977H14.3833L13.9516 9.04409C13.9213 9.08921 13.8942 9.10518 13.8641 9.11789C13.8339 9.1334 13.7942 9.15159 13.7483 9.15159H13.5901L13.4814 9.51372H13.8952C14.1102 9.51372 14.2372 9.41485 14.3311 9.28508L14.6271 8.87561L14.6907 9.29138C14.7042 9.36926 14.7596 9.41485 14.7971 9.43257C14.8385 9.45356 14.8813 9.48958 14.9417 9.49495C15.0066 9.49774 15.0534 9.49996 15.0846 9.49996H15.2879L15.4099 9.09469H15.3298C15.2837 9.09469 15.2045 9.08688 15.191 9.0723C15.1775 9.05458 15.1775 9.0273 15.1702 8.98579L15.1057 8.56909H14.8416L14.9574 8.42977H15.6078L15.7078 8.09912H15.1057L15.1995 7.79668H15.7998L15.9111 7.4237H14.1214L14.0119 7.79668ZM8.58018 9.07782L8.73029 8.57321H9.34721L9.45993 8.1979H8.84244L8.9367 7.8873H9.54012L9.65192 7.52389H8.1421L8.0326 7.8873H8.37562L8.28413 8.1979H7.94019L7.8262 8.57962H8.1691L7.96903 9.24723C7.94203 9.3356 7.98172 9.3693 8.00688 9.41034C8.0326 9.45033 8.05868 9.47679 8.11729 9.49183C8.17775 9.50548 8.21917 9.51364 8.27547 9.51364H8.97096L9.09488 9.09787L8.78659 9.14066C8.72706 9.14066 8.56219 9.13343 8.58018 9.07782ZM8.65094 6.66218L8.49461 6.94772C8.46115 7.01009 8.43104 7.0488 8.40392 7.06664C8.38004 7.08168 8.33273 7.08798 8.2642 7.08798H8.18263L8.0736 7.45326H8.3445C8.47476 7.45326 8.5748 7.40499 8.62256 7.38085C8.6739 7.35311 8.6874 7.36896 8.72709 7.33025L8.81859 7.25015H9.66453L9.77679 6.86983H9.15756L9.26567 6.66218H8.65094ZM9.89983 9.08515C9.88541 9.06417 9.89579 9.02721 9.91783 8.95026L10.149 8.17691H10.9716C11.0914 8.17516 11.178 8.17376 11.2343 8.16968C11.2947 8.16326 11.3605 8.14146 11.4321 8.10229C11.5061 8.06125 11.544 8.01799 11.5759 7.96832C11.6116 7.91877 11.6688 7.81034 11.7179 7.64315L12.0086 6.66448L11.155 6.6695C11.155 6.6695 10.8922 6.70867 10.7765 6.75193C10.6597 6.80019 10.4929 6.93497 10.4929 6.93497L10.5699 6.6667H10.0427L9.30448 9.14065C9.27829 9.23672 9.26076 9.30644 9.25672 9.3483C9.25533 9.39342 9.31302 9.43807 9.35041 9.47177C9.39459 9.50546 9.4599 9.49998 9.52255 9.50546C9.58843 9.51048 9.68211 9.51362 9.81145 9.51362H10.2167L10.341 9.08923L9.97829 9.12386C9.93952 9.12386 9.91148 9.10287 9.89983 9.08515ZM10.2982 7.65458H11.1622L11.1072 7.82853C11.0995 7.83261 11.0811 7.8199 10.9931 7.8304H10.245L10.2982 7.65458ZM10.4713 7.07115H11.3425L11.2799 7.28067C11.2799 7.28067 10.8692 7.27659 10.8035 7.28883C10.5141 7.33943 10.3451 7.49566 10.3451 7.49566L10.4713 7.07115ZM11.1266 8.41105C11.1194 8.43705 11.1081 8.45291 11.0923 8.4648C11.0748 8.47623 11.0464 8.48031 11.0041 8.48031H10.8809L10.8882 8.26846H10.3762L10.3554 9.30414C10.3546 9.37888 10.3618 9.42214 10.4159 9.45676C10.47 9.50002 10.6367 9.5055 10.8611 9.5055H11.182L11.2978 9.11783L11.0185 9.13334L10.9256 9.13882C10.9129 9.13334 10.9008 9.12833 10.8873 9.11468C10.8755 9.10291 10.8557 9.11014 10.8589 9.0354L10.8611 8.76992L11.154 8.75768C11.3122 8.75768 11.3798 8.70568 11.4375 8.65613C11.4926 8.60868 11.5106 8.55411 11.5313 8.48031L11.5805 8.24526H11.1779L11.1266 8.41105Z" fill="#FEFEFE"/>\n</svg>`})),Xg=wg((e=>{let{size:t}=e;return`<svg height="${t}" viewBox="0 0 94 18" xmlns="http://www.w3.org/2000/svg">\n    <g clip-path="url(#clip0_2405_1154)">\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M37.0238 14.0803C33.5565 16.6392 28.5296 18 24.2006 18C18.134 18 12.6706 15.7574 8.53622 12.0243C8.21198 11.7308 8.50114 11.3306 8.8913 11.5576C13.3516 14.1531 18.868 15.7164 24.5647 15.7164C28.4078 15.7164 32.6326 14.9186 36.5199 13.2697C37.1062 13.0215 37.5979 13.6561 37.0238 14.0803Z" fill="#F79C34"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M38.4669 12.4327C38.0231 11.865 35.5354 12.1637 34.4176 12.2977C34.079 12.3386 34.0263 12.0425 34.3314 11.8283C36.3163 10.4341 39.5688 10.8365 39.9468 11.3037C40.3274 11.7741 39.8463 15.0352 37.9869 16.5911C37.7004 16.8303 37.4283 16.7027 37.5553 16.3869C37.9742 15.3414 38.9108 13.0015 38.4669 12.4327Z" fill="#F79C34"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M34.4962 1.97952V0.625122C34.4973 0.418879 34.6525 0.281738 34.8396 0.28227L40.911 0.281738C41.105 0.281738 41.2613 0.4226 41.2613 0.623527V1.78497C41.2591 1.98005 41.0949 2.23413 40.8041 2.63758L37.6589 7.12815C38.8262 7.10104 40.061 7.27592 41.122 7.87179C41.3612 8.00628 41.4255 8.20561 41.4441 8.40069V9.84598C41.4441 10.0453 41.2262 10.2755 40.9966 10.1559C39.1281 9.17676 36.6484 9.06991 34.5818 10.1676C34.3707 10.2803 34.1501 10.0528 34.1501 9.85342V8.47936C34.1501 8.25983 34.1544 7.88349 34.3761 7.54861L38.0193 2.32131L34.847 2.32078C34.653 2.32078 34.4973 2.18257 34.4962 1.97952Z" fill="#333E47"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M12.3496 10.4403H10.5024C10.3265 10.4292 10.1862 10.2973 10.1718 10.1283L10.1734 0.648055C10.1734 0.458822 10.3329 0.307329 10.5301 0.307329L12.2502 0.306798C12.4299 0.315834 12.5744 0.451912 12.5856 0.625198V1.86266H12.6207C13.0688 0.665596 13.9134 0.106934 15.0515 0.106934C16.2065 0.106934 16.9311 0.665596 17.4483 1.86266C17.8964 0.665596 18.9137 0.106934 19.9997 0.106934C20.7758 0.106934 21.6204 0.426397 22.1376 1.14453C22.7239 1.94292 22.6038 3.09958 22.6038 4.11697L22.6017 10.0996C22.6017 10.2883 22.4427 10.4403 22.2455 10.4403H20.401C20.215 10.4286 20.0693 10.2819 20.0693 10.1001L20.0688 5.0743C20.0688 4.67564 20.1034 3.67844 20.0167 3.29944C19.879 2.66052 19.4655 2.48085 18.9313 2.48085C18.4827 2.48085 18.017 2.78012 17.8272 3.25851C17.6375 3.73798 17.655 4.53531 17.655 5.0743V10.0996C17.655 10.2883 17.4956 10.4403 17.2989 10.4403H15.4539C15.2684 10.4286 15.1222 10.2819 15.1222 10.1001L15.12 5.0743C15.12 4.01704 15.2928 2.46172 13.9825 2.46172C12.6547 2.46172 12.7068 3.97718 12.7068 5.0743L12.7057 10.0996C12.7057 10.2883 12.5463 10.4403 12.3496 10.4403Z" fill="#333E47"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M46.5046 2.04232C45.1427 2.04232 45.0566 3.89691 45.0566 5.0541C45.0566 6.2113 45.0396 8.68515 46.4881 8.68515C47.919 8.68515 47.9881 6.69023 47.9881 5.4735C47.9881 4.67564 47.953 3.71778 47.7117 2.95978C47.5049 2.30119 47.0909 2.04232 46.5046 2.04232ZM46.4881 0.106934C49.2293 0.106934 50.7118 2.46172 50.7118 5.45383C50.7118 8.34548 49.0741 10.6402 46.4881 10.6402C43.7979 10.6402 42.3324 8.28595 42.3324 5.3539C42.3324 2.40112 43.8149 0.106934 46.4881 0.106934Z" fill="#333E47"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M54.2674 10.4403H52.4266C52.2422 10.4286 52.0955 10.2819 52.0955 10.1001L52.0923 0.616694C52.1082 0.442875 52.2613 0.307329 52.4474 0.307329L54.1606 0.306798C54.3222 0.315303 54.455 0.424803 54.4891 0.572043V2.02212H54.5236C55.0413 0.72513 55.7648 0.106934 57.0405 0.106934C57.8681 0.106934 58.6788 0.406198 59.196 1.22426C59.6786 1.98225 59.6786 3.25851 59.6786 4.17651V10.1421C59.6584 10.3101 59.5075 10.4403 59.3246 10.4403H57.4732C57.302 10.4297 57.1644 10.3037 57.1442 10.1421V4.9951C57.1442 3.95751 57.2654 2.44099 55.9891 2.44099C55.541 2.44099 55.1269 2.74025 54.9202 3.19898C54.6613 3.77784 54.6267 4.35617 54.6267 4.9951V10.0996C54.6235 10.2883 54.4641 10.4403 54.2674 10.4403Z" fill="#333E47"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M31.5179 10.4165C31.3962 10.526 31.2203 10.5335 31.0821 10.4596C30.4686 9.94983 30.3586 9.71435 30.0232 9.22851C29.0095 10.2613 28.2914 10.5712 26.9779 10.5712C25.4231 10.5712 24.2133 9.61123 24.2133 7.69232C24.2133 6.19281 25.0261 5.17329 26.1833 4.67363C27.1852 4.2335 28.5848 4.15377 29.6564 4.03364V3.79391C29.6564 3.35325 29.691 2.83445 29.4316 2.45439C29.2067 2.1142 28.7751 1.9744 28.3951 1.9744C27.6902 1.9744 27.0646 2.33533 26.9104 3.08322C26.878 3.2496 26.7568 3.41491 26.5899 3.42342L24.7991 3.2294C24.6481 3.19485 24.4802 3.07365 24.5232 2.84296C24.9299 0.701329 26.8424 0.0336978 28.5806 0.015625H28.7177C29.6075 0.0267876 30.744 0.270771 31.4361 0.934681C32.3349 1.77454 32.2478 2.89399 32.2478 4.1139V6.9912C32.2478 7.8571 32.6076 8.23663 32.9452 8.70281C33.0637 8.87131 33.0897 9.07064 32.9393 9.19396C32.5619 9.51024 31.8916 10.0923 31.5232 10.4208L31.5179 10.4165ZM29.6564 5.91321C29.6564 6.63294 29.6734 7.23253 29.3109 7.87252C29.017 8.39185 28.5503 8.71184 28.032 8.71184C27.324 8.71184 26.9094 8.17232 26.9094 7.37233C26.9094 5.79893 28.3201 5.51295 29.6564 5.51295V5.91321Z" fill="#333E47"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M7.30514 10.4165C7.18288 10.526 7.00641 10.5335 6.86874 10.4596C6.25479 9.94983 6.14476 9.71435 5.80988 9.22851C4.79568 10.2613 4.07808 10.5712 2.76461 10.5712C1.20982 10.5712 0 9.61123 0 7.69232C0 6.19281 0.811682 5.17329 1.96994 4.67363C2.97192 4.2335 4.3715 4.15377 5.44258 4.03364V3.79391C5.44258 3.35325 5.47766 2.83445 5.21826 2.45439C4.99341 2.1142 4.56126 1.9744 4.18173 1.9744C3.47689 1.9744 2.85019 2.33533 2.6971 3.08322C2.66521 3.2496 2.54348 3.41491 2.37604 3.42342L0.585772 3.2294C0.434279 3.19485 0.266308 3.07365 0.309896 2.84296C0.715471 0.701329 2.62853 0.0336978 4.36724 0.015625H4.50439C5.39421 0.0267876 6.53067 0.270771 7.22275 0.934681C8.12108 1.77454 8.03443 2.89399 8.03443 4.1139V6.9912C8.03443 7.8571 8.39429 8.23663 8.73183 8.70281C8.8493 8.87131 8.87641 9.07064 8.72598 9.19396C8.34858 9.51024 7.67776 10.0923 7.30939 10.4208L7.30514 10.4165ZM5.44258 5.91321C5.44258 6.63294 5.46012 7.23253 5.09707 7.87252C4.80365 8.39185 4.33695 8.71184 3.81815 8.71184C3.11012 8.71184 2.69551 8.17232 2.69551 7.37233C2.69551 5.79893 4.10678 5.51295 5.44258 5.51295V5.91321Z" fill="#333E47"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M84.9279 13.8412C84.9279 13.6009 84.9279 13.3851 84.9279 13.1448C84.9279 12.9466 85.0252 12.81 85.232 12.8222C85.6179 12.8769 86.1638 12.9317 86.5513 12.852C87.0573 12.7467 87.4204 12.3879 87.6351 11.8962C87.9376 11.2041 88.138 10.646 88.2645 10.2798L84.4219 0.760705C84.357 0.599113 84.3379 0.299316 84.6606 0.299316H86.0038C86.26 0.299316 86.3642 0.461972 86.4216 0.621438L89.2075 8.35342L91.8668 0.621438C91.9211 0.463035 92.03 0.299316 92.2841 0.299316H93.5508C93.8713 0.299316 93.8533 0.598581 93.7895 0.760705L89.9777 10.5769C89.4844 11.8835 88.8274 13.9645 87.3476 14.326C86.6055 14.52 85.6695 14.4498 85.1198 14.2196C84.9811 14.15 84.9279 13.964 84.9279 13.8412Z" fill="#333E47"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M83.1361 9.86032C83.1361 10.0373 82.991 10.1824 82.8129 10.1824H81.8657C81.661 10.1824 81.5212 10.0347 81.4952 9.86032L81.4 9.21555C80.9647 9.58391 80.4305 9.90763 79.8511 10.133C78.7369 10.5657 77.4527 10.6375 76.3641 9.96876C75.5769 9.48557 75.1591 8.541 75.1591 7.56667C75.1591 6.81292 75.3913 6.06556 75.9064 5.52284C76.5937 4.78133 77.5899 4.41721 78.7928 4.41721C79.5194 4.41721 80.5591 4.50279 81.3155 4.74996V3.45244C81.3155 2.13312 80.76 1.56224 79.2956 1.56224C78.1762 1.56224 77.3198 1.73127 76.1281 2.10176C75.9373 2.10814 75.8256 1.96303 75.8256 1.78602V1.0461C75.8256 0.868559 75.9771 0.696867 76.1414 0.644775C76.9924 0.27375 78.1979 0.0425243 79.4795 0C81.1502 0 83.1361 0.376872 83.1361 2.9464V9.86032ZM81.3155 7.96586V6.00815C80.6798 5.83433 79.6278 5.76204 79.2207 5.76204C78.5775 5.76204 77.8732 5.91407 77.5053 6.31007C77.2305 6.6003 77.1061 7.01704 77.1061 7.41996C77.1061 7.94088 77.2863 8.4634 77.7073 8.72173C78.1964 9.05395 78.9549 9.01355 79.6677 8.81103C80.3529 8.61648 80.996 8.27257 81.3155 7.96586Z" fill="#333E47"/>\n        <path fill-rule="evenodd" clip-rule="evenodd" d="M69.1695 1.59148C71.2712 1.59148 71.8437 3.24408 71.8437 5.13642C71.8554 6.41214 71.621 7.54967 70.9603 8.20082C70.4659 8.68826 69.9136 8.82114 69.0823 8.82114C68.3424 8.82114 67.3691 8.43524 66.6419 7.89784V2.48715C67.3989 1.90563 68.3647 1.59148 69.1695 1.59148ZM66.3198 14.1808H65.051C64.8734 14.1808 64.7283 14.0357 64.7283 13.8587C64.7283 9.4521 64.7283 5.04499 64.7283 0.638408C64.7283 0.461401 64.8734 0.316287 65.051 0.316287H66.0221C66.2262 0.316287 66.366 0.464059 66.3921 0.638408L66.4942 1.33102C67.4036 0.523593 68.5747 0.00585938 69.6904 0.00585938C72.8154 0.00585938 73.8429 2.58071 73.8429 5.25814C73.8429 8.12268 72.2711 10.4243 69.6128 10.4243C68.4933 10.4243 67.4467 10.0113 66.6419 9.2937V13.8587C66.6419 14.0357 66.4968 14.1808 66.3198 14.1808Z" fill="#333E47"/>\n    </g>\n    <defs>\n        <clipPath id="clip0_2405_1154">\n            <rect width="93.8272" height="18"/>\n        </clipPath>\n    </defs>\n</svg>`}));va\n        </clipPath>\n    </defs>\n</svg>`}));let hb=(Jg=class SpinnerAnimation extends StyleSheet{constructor(){super(...arguments),i(this,"dash",Qg,this),i(this,"rotate",eb,this)}},Qg=n(Jg.prototype,"dash",[vp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{"0%":{strokeDasharray:"10, 110",strokeDashoffset:"0"},"50%":{strokeDasharray:"90, 110",strokeDashoffset:"-60"},"100%":{strokeDasharray:"90, 110",strokeDashoffset:"-120"}}}}),eb=n(Jg.prototype,"rotate",[vp],{configurareturn{"100%":{transform:"rotate(360deg)"}}}}),Jg),db=(tb=class SpinnerStyle extends StyleSheet{constructor(){super(...arguments),this.size=46,i(this,"container",ib,this)}},ib=n(tb.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",position:"relative",margin:`-${this.size}px 0 0 -${this.size}px`,width:2*this.size,height:2*this.size,animation:`${hb.getInstance().rotate.toString()} 1.6s linear infinite`," circle":{fill:"none",strokeLinecap:"round",animation:`${hb.getInstance().dash.toString()} 1.6s linear infinite`}}}}),tb),pb=ct(db)(nb=class Spinner extends fg.SVGRoot{getDefaultOptions(){return{strokeWidth:3,strokeColor:Theme.props.SPINNER_COLOR,radius:20,viewBox:"0 0 50 50"}}render(){const{strokeWidth:e,strokeColor:t,radius:i}=this.options;return dt.createElement(fg.Circle,{center:{x:25,y:25},radius:i,strokeWidth:e,stroke:t})}})||nb,mb=(rb=class BlinkLogoSpinnerStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",sb,this)}},sb=n(rb.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"relative",width:"100%",height:70,zIndex:100,">*":{left:"50%",top:"50%",position:"absolute"},">:last-child":{transform:"translate(-50%,-50%)"},">:last-child g":{fill:this.themeProps.LOADING_SPINNER_COLOR}}}}),rb),gb=ct(mb)(ob=class BlinkLogoSpinner extends dt.Element{getDefaultOptions(){return{size:25,strokeWidth:2,strokeColor:Theme.props.LOADING_SPINNER_COLOR,radius:15}}render(){const{size:e,strokeColor:t,strokeWidth:i,radius:n}=this.options;return[dt.createElement(pb,{strokeWidth:i,strokeColor:t,radius:n}),dt.createElement(Vg,{size:e,color:t})]}})||ob,bb=(ab=class LoadingSpinnerStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",lb,this)}},lb=n(ab.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{background:this.themeProps.LOADING_SPINNER_BACKGROUND,position:Un()?"absolute":"fixed",width:"100%",height:"100%",marginTop:0,top:0,left:0,zIndex:11e3,display:"flex",alignItems:"center",justifyContent:"center",">:last-child g":{fill:this.themeProps.LOADING_SPINNER_COLOR},"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","-webkit-transform":"translate3d(0, 0, 0)","-moz-transform":"translate3d(0, 0, 0)"}}}),ab),fb=ct(bb)((ub=class LoadingSpinner extends dt.Element{getDefaultOptions(){return t({},super.getDefaultOptions(),{testId:"loadingSpinner"})}static show(){var e;LoadingSpinner.instance?this.counter+=1:(LoadingSpinner.instance=this.create((null==(e=Router.Global)?void 0:e.node)||document.body),this.counter=1)}static hide(e){var t;void 0===e&&(e=!1),this.counter-=1,(e||this.counter<=0)&&(null==(t=this.instance)||t.destroyNode(),this.instance=null,this.counter=0)}static async call(e){try{return thisement(gb,{size:48,strokeWidth:3,radius:20})}onMount(){super.onMount(),Router.Global&&this.attachListener(Router.Global,"change",(()=>this.constructor.hide()))}},ub.instance=null,ub.counter=0,cb=ub))||cb;function yb(e,t,i){const n=i.value;ret{return fb.call((()=>n.apply(this,arguments)))},i}var Cb,Sb;let Eb=(Sb=class AuthService extends Dispatchable{constructor(){super(),this.token=new AuthToken,this.merchantToken=new AuthToken,this.publicDataState=null,this.appSettings={},this.loginAppName=null,Zt.getAjaxHandler().addPreprocessor((e=>{!e.noAuthToken&&this.isAuthenticated()&&(e.data.auth=this.token.toString())})),Zt.getAjaxHandler().addPostprocessor((e=>{const{appSettings:t}=e;t&&this.setAppSettings(t)})),this.token.addListener("change",(e=>{this.dispatch(e),this.dispatch(AuthService.EventTypes.AUTHENTICATION_CHANGE,e)})),this.addListener(AuthToken.EventTypes.LOGOUT,(()=ad()}setLoginAppName(e){this.loginAppName=e}setPublicData(e){this.publicDataState||(this.publicDataState=e.state,this.setAppSettings(e.appSettings),gt.importState(e.state),this.dispatch(AuthService.EventTypes.PUBLIC_DATA_FETCH))}setAppSettings(e){void 0===e&&(e={}),this.appSettings=e||{},this.dispatch(AuthService.EventTypes.APP_SETTINGS_UPDATE)}isAuthenticated(){return this.token.isAuthenticated()}async loginAtEndpoint(e,i){const n=await Zt.post(e,t({},i,{merchantId:nm.merchantId,appName:this.loginAppName}return null!=e.token||null!=e.merchantToken}setAuthToken(e){e.merchantToken?(this.merchantToken.setToken(e.merchantToken.key,e.merchantToken.expiresAt),this.dispatch(AuthService.EventTypes.SET_MERCHANT_TOKEN,e.merchantToken)):this.merchantToken.setToken(null,null),e.token&&this.token.setToken(e.token.key,e.token.expiresAt)}async requestOAuthToken(e){return Zt.post(e,{appName:id 0===e&&(e={}),Zt.post("/users/logout",e)}({useAuthToken:!1}),this.clearCurrentInfo()}catch(e){console.debug("User logout failed.")}}clearCurrentInfo(){this.token.clear(),this.dispatch(AuthService.EventTypes.CLEAR_CURRENT_INFO);const e=Object.keys(this.publicDataState||{}).map((e=>e.toLowe]of gt.stores)e.find((e=>e===t.toLowerCase()))||i.clear&&i.clear()}async requestLoginCode(e){const i=await Zt.post("/users/request_email_login_code",t({},e,{merchantId:nm.merchantId,appName:this.loginAppName}),{noAuthToken:!0});return this.hasAuthToken(i)?(this.setAuthToken(i),this.dispatch(this.constructor.EventTypes.USER_DATA_AVAILABLE,i)):(im.setIsRegistration(i.registration),im.setRegistrationMail(e.email),im.setConfirmationCodeType(i.type||F)),i}async loginWithEmailCode(e){let{code:t,uuid:i}=e;const n=await Zt.post("/users/login_with_email_code/",{email:im.registrationMail,code:t,uuid:i,termsAgreed:!0,appName:this.loginAppName});return this.setAuthToken(n),n}onAuthentication(e){this.addListener(AuthToken.EventTypes.LOGIN,e),this.isAuthenticated()&&e()}executeWhenAuthenticated(e){this.isAuthenticated()?e():this.aService.EventTypes.AUTHENTICATION_CHANGE,e)}},Sb.EventTypes={CLEAR_CURRENT_INFO:"clearCurrentInfo",AUTHENTICATION_CHANGE:"authenticationChange",PUBLIC_DATA_FETCH:"publicDataFetch",APP_SETTINGS_UPDATE:"appSettingsUpdate",SET_MERCHANT_TOKEN:"setMerchantToken",USER_DATA_AVAILABLE:"userDataAvailable"},n((Cb=Sb).prototype,"loginAtEndpoint",[yb],Object.getOwnPropertyDescriptor(Cb.prototype,"loginAtEndpoint"),Cb.prototype),n(Cb.prototype,"requestLoginCode",[yb],Object.getOwnPropertyDescriptor(Cb.prototype,"requestLoginCode"),Cb.prototype),Cb);const Ab=new Eb;var wb,Tb,vb;function Ob(e,t){const i=e[t];if(!i||!i.includes(":"))return e;const n=()=>{console.error("Invalid URL",i),e[t]="",e.value=e.label=e.alt="[Invalid URL]"};try{const e=new URL(i);-1===["http:","https:","mailto:","tel:"].indexOf(e.protocol)&&n()}catch(e){n()}return e}let Db=(wb=class LinkStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",Tb,this)}},Tb=n(wb.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{cursor:"pointer"}}}),wb),Rb=ct(Db)(vb=class Link extends(dt.Primitive("a")){getDefaultOptions(){return{newTab:!1}}setOptions(e){return e=Ob(e,"href"),super.setOptions(e),this.options.newTab&&(this.options.target="_blank"),e}render(){const{value:e,label:t}=this.options;return e||t||super.render()}changeRouteInternal(){Router.changeURL(function(e,t,i){if(void 0===t&&(t=self.location.host),void 0===i&&(i=self.location.origin),!X(e,t,i))throw Error("Trying to trim non-local url!");return e?e.startsWith("//"+t)?e.slice(("//"+t).length):e.startsWith(i)?e.slice(i.length):e:e}(this.options.href))}onMount(){this.addClickListener((e=>{const{href:t,newTab:i,target:n}=this.options,r=e.shiftKey||e.ctrlKey||e.metaKey,s=!t||!X(t);r||s||i||n&&"_self"!==n||(e.preventDefault(),e.stopPropagation(),this.changeRouteInternal())}))}})||vb;class IFrame extends(dt.Primitive("iframe")){}IFrame.domAttributesMap=new DOMAttributesMap(dt.Element.domAttributesMap,[["allow"],["allowfullscreen",{noValue:!0}],["allowpaymentrequest",{noValue:!0}],["csp"],["loading"],["name"],["referrerpolicy"],["sandbox"],["src"],["srcdoc"],["align"],["frameborder"],["longdesc"],["marginheight"],["marginwidth"],["scrolling"],["mozbrowser"]]);class Image extends(dt.Primitive("img")){setOpter(e){return this.addNodeListener("load",e)}}function Pb(e,t){e.shiftKey||e.ctrlKey||e.metaKey||t.options.newTab||null==t.options.href||t.options.target&&"_self"!==t.options.target||(e.preventDefault(),e.stopPropagation(),mp.sendToSDK(hp.REDIRECT_TO_URL,{url:t.options.href}))}dt.Element;class PanelLink extends Rb{onMount(){this.options.href&&this.addClickListener((e=>{Ze(Me),Pb(e,this)}))}}function Ib(e,i,n){if(void 0===n&&(n=!1),"string"==typeof e)return n?new dt.TextElement(e):new(i.get("Text"))(e);if(!e)r(Array.isArray(e))return e.map((e=>Ib(e,i,n)));const r=t({},e);let s=[];r.children&&(s=Ib(r.children,i,!0),delete r.children),r.class&&(r.className=r.class,delete r.class),r.classname&&(r.className=r.classname,delete r.classname);const o=[...i.entries()].find((t=>{let[i]=t;return i.toUpperCase()===e.tag.toUpperCase()}));if(!o)return null;const a=o[1];return a.prototype instanceof dt.Element?dt.createElement(a,r,...s):a(r,s)}const Lb=new Map([["b",dt.Primitive("b")],["i",dt.Primitive("i")],["a",PanelLink],["Text",dt.TextElement]]);class MessageElement extends dt.Element{getDefaultOptions(){return t({},super.getDefaultOptions(),{message:"",args:[]})}getMessage(){const{message:e,args:t}=this.options;return ie(e)?e(...t):(null==t?void 0:t.length)>0&&-1!==e.indexOf("%1")?me(e,...t):e}ren{return Ib(function(e,i){void 0===i&&(i=e=>e);const n=(new DOMParser).parseFromString(`<body>${e}</body>`,"text/xml"),r=e=>{if(e.nodeType===Node.TEXT_NODE){const t=e.wholeText;let i=t.trim();return i?(i[0]!==t[0]&&(i=" "+i),i[i.length-1]!==t[t.length-1]&&(i+=" "),i):null}if(e.nodeType!==Node.ELEMENT_NODE)return null;leNames().forEach((t=>{n[t]=e.getAttribute(t)})),i(t({tag:e.tagName,children:[...e.childNodes].map(r).filter(Boolean)},n))};return[...n.childNodes[0].childNodes].map(r).filter(Boolean)}(this.getMessage()),Lb)}}var Nb,_b,xb,Mb,Bb,kb,Ub,Hb,zb,Fb,Vb,Gb,Wb,jb,Yb;let Kb=(Nb=class BaseToastStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",_b,this),i(this,"error",xb,this),i(this,"success",Mb,this),i(this,"visible",Bb,this),i(this,"message",kb,this),i(this,"closeIcon",Ub,this)}},_b=n(Nb.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{zIndex:12e3,transition:this.themeProps.DEFAULT_TRANSITION,display:"flex",alignItems:"center",justifyContent:"center",fontSize:this.themeProps.FONT_SIZE_NORMAL,background:this.themeProps.TOAST_BACKGROUND,color:this.themeProps.TOAST_TEXT_COLOR,boxShadow:this.themeProps.TOAST_SHADOW}}}),xb=n(Nb.prototype,"error",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{background:this.themeProps.ERROR_COLOR}}}),Mb=n(Nb.prototype,"success",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{background:this.themeProps.SUCCESS_COLOR}}}),Bb=n(Nb.prototype,"visible",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{opacity:1,transform:"translate(-50%, 0)"}}}),kb=n(Nb.prototype,"message",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",paddingRight:8}}}),Ub=n(Nb.prototype,"closeIcon",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:"auto",display:"inline-block",cursor:"pointer"}}}),Nb),Zb=(Hb=class WebsiteToastStyle extends Kb{constructor(){super(...arguments),i(this,"container",zb,this)}},zb=n(Hb.prototype,"container",[wp],{configurable:!0,enumerable:!0,writable:!0,initializeadding:()=>H.isMobileDevice()?12:"12px 18px",transform:"translate(-50%, 96px)",borderRadius:this.themeProps.BASE_BORDER_RADIUS,bottom:()=>ve()?14:48,margin:"auto",left:"50%",opacity:0,minWidth:"fit-content",width:"fit-content",textAlign:"center"}}}),Hb),qb=(Fb=class PanelToastStyle extends Zb{constructor(){super(...arguments),i(this,"container",Vb,this)}},Vb=n(Fb.prototype,"container",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{bottom:"",top:8,transform:"translate(-50%, -96px)"}}}),Fb),$b=(Gb=class WidgetToastStyle extends Kb{constructor(){super(...arguments),i(this,"container",Wb,this),i(this,"visible",jb,this)}},Wb=n(Gb.prototype,"container",[wp],{configuraidth:360,overflow:"hidden",minWidth:"100%"}}}),jb=n(Gb.prototype,"visible",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{transform:"translateY(0)"}}}),Gb)nts),this.active=null,this.hideTimeout=null}getDefaultOptions(){return{testId:"toast",visibleTimeout:5e3,showClose:!0,level:om.SUCCESS}}static show(e,i){var n,r;"/empty"!==Router.getCurrentPath()&&(null==(n=Toast.active)||n.remove(),Toast.active=this.create((null==(r=Ee.appInstance)?void 0:r.node)||document.body,t({},i,{message:e})))}static showError(e,t){var i,n;e.stack&&console.error("Error: ",e,e.stack),se(e)||(e=(null==(i=e)?void 0:i.message)||(null==(n=e)?void 0:n.toString())),this.show(e||t||"Error in performing action",{level:om.EwSuccess(e){this.show(e,{level:om.SUCCESS})}extraNodeAttributes(e){const{styleSheet:t}=this,{level:i}=this.options;e.addClass(t[i])}render(){const{styleSheet:e}=this,{message:t,showClose:i}=this.options;return[dt.createElement(MessageElement,{message:t,className:e.message}),i&&dt.createElement(Ng,{color:e.themeProps.TOAST_TEXT_COLOR,className:e.closeIcon,onClick:()=>this.constructor.hide(this)})]}static hide(e){return void 0===e&&(e=null),Toast.active&&Toastimeout(this.hideTimeout),this.node.remove()}removeAnimated(){this.removeClass(this.styleSheet.visible),setTimeout((()=>{this.remove()}),this.themeProps.DEFAULT_TRAN((()=>this.addClass(this.styleSheet.visible))),this.options.visibleTimeout){const e=(o?2:1)*(this.options.visibleTimeout+this.themeProps.DEFAULT_TRANSITI=setTimeout((()=>this.constructor.hide(this)),e)}thi,"change",(()=>{this.constructor.hide(this)}))}})||Yb;var Jb;window.Toast=Xb;const Qb=new(n((Jb=class UserService extends Dispatchable{constructor(){super(),this.finishedUserDataRequest=!1,this.initiatedUserDataRequest=!1,this.userData=null,Ab.addListener(Eb.EventTypes.CLEAR_CURRENT_INFO,(()=>this.clearUserInfo())),Ab.addListener(Eb.EventTypes.USER_DATA_AVAILABLE,(e=>{this.setUserDatreturn null==(e=this.getUser())?void 0:e.id}getUserName(){const e=this.getUser();if(!e)return"";const{firstName:t,la(e=this.getUser())?void 0:e.getEmail())||""}isUserFetched(getByUserAndMerchant(this.getUserId(),e.id)}isAutoPayEnabledForMerchant(e){var t,i;const n=this.getMerchantUser(e),r=null==(t=this.getUser())?void 0:t.getPreferences();return!(null==r||!r.autoPayEnabled)&&(null==(i=null==n?void 0:n.autoPayEnabled)||i)}setUserData(e){this.initiatedUserDataRequest=!0,this.userData=e,this.dispatch("userDataFetched",this.userData),this.finishedUserDataRequest=!0,this.dispatch("userDataRequestFinished")}async forceFetchUserData(){this.initiatedUserDataRequest=!0;try{this.userData=await Zt.get("/user_data"),this.dispatch("userDataFetched",this.userData)}catch(e){if(this.userData=null,1003!==e.code&&1004!==e.code)throw e;Ab.clearCurrentInfo()}finally{this.finishedUserDataRequest=!0,this.dispatch("userDataRequestFinished")}}fetchUserData(){(function(e){const t=document.hidden?{hidden:!0,event:"visibilitychange"}:document.msHidden?{hidden:!0,event:"msvisibilitychange"}:document.webkitHidden?{hidden:!0,event:"webkitvisibilitychange"}:{hidden:!1};if(!t.hier=()=>document.removeEventListener(t.event,i);document.addEventListener(t.event,i)})((()=>this.forceFetchUserData())),zn()&&setTimeout((()=>this.forceFetchUserData()),1e3)}onUserDataRequestFinished(e){return this.addListenerOnce("userDataUserFetched()||this.finishedUserDataRequest}ensureUserDataRequested(e){void 0===e&&(e=fe),this.isUserDataRequestFinished()?queueMicrotask(e):(this.onUserDataRequestFinished((()=>queueMicrotask(e))),this.iniRequest=!1,this.initiatedUserDataRequest=!1}async requestUpdateUserData(e,t){if(this.getUserName()!==(e=(e||"").trim())){const[t,...i]=(e||"").split(" ");try{await async function(e){return Zt.post("/users/update_profile",e)}({firstName:t,lastName:i.join(" ")})}catch(e){return Xb.showError(e,Vt.errorWhileSaving),!1}}if(this.getUserEmail()!==(t=(t||"").trim()))try{return await async function(e){return Zt.post("/users/request_email_change",e)}({newEmail:t}),!0}catch(e){Xb.showError(e,Vt.errorWhileSaving)}return!1}}).prototype,"requestUpdateUserData",[yb],Object.getOwnPropertyDescriptor(Jb.prototype,"requestUpdateUserData"),Jb.prototype),Jb);var ef,tf;let nf=(ef=class GlobalContainerStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",tf,this)}},tf=n(ef.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:()=>H.isMobileDevice()?`${window.innerHeight}px`:"100vh",paddingTop:this.themeProps.NAV_MANAGER_NAVBAR_HEIGHT,background:this.themeProps.COLOR_BACKGROUND_BODY,width:"100%",">*":{height:"100%",width:"100%",paddingTop:H.isMobileDevice()?this.themeProps.MAIN_CONTAINER_EXTRA_PADDING_TOP_MOBILE:this.themeProps.MAIN_CONTAINER_EXTRA_PADDING_TOP_DESKTOP,paddingBottom:H.isMobileDevice()?this.themeProps.MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_MOBILE:this.themeProps.MAIN_CONTAINER_EXTRA_PADDING_BOTTOM_DESKTOP,overflow:H.isMobileDevice()?"":"auto"}}}}),ef);var rf;let sf=ct(nf)(rf=class GlobalContainer extends dt.Element{onMount(){H.isTouchDevice()&&H.isMobileDevice()||Object.assign(document.body.style,{overflow:"hidden"}),GlobalContainer.Global=GlobalContainer.Global||this}})||rf;class StemApp extends dt.Element{static init(){return self.GlobalState=gt,self.appInstance=this.create(document.body),self.appInstance}getRoutes(){return this.optuterOptions(){reispatcher.Global.dispatch("closeAllModals")}getRouter(){var e=this;return dt.createElement(Router,t({ref:"router",routes:this.getRoutes(),onChange:function(){return e.handleRouteChange(...arguments)}},this.getRouterOptions()))}getContainer(){return dt.createElement(sf,null,this.getRouter())}getAfterContainer(){return null}render(){return[this.getBeforeContainer(),this.getContainer(),this.getAfterContainer()]}}class ViewportMeta exsiredScale(),initialScale:1,maximumScale:1}}getDesiredScale(){const e=this.options.minDeviceWidth;return e?Math.min(window.screen.availWidth,e)/e:1}getContent(){let e="width=device-width";return e+=",initial-scale="+this.options.scale,e+=",maximum-scale="+this.options.scale,e+=",user-scalable=no",e}extraNodeAttributes(e){e.setAttribute("name","viewport"),e.setAttribute("content",this.getContent())}maybeUpdate(){const e=this.getDesiredScale();e!=this.Listener("resize",(()=>this.maybeUpdate()))}}var of,af,lf,cf,uf,hf,df,pf,mf,gf,bf,ff,yf,Cf,Sf,Ef,Af,wf,Tf,vf,Of,Df,Rf,Pf,If,Lf;let Nf=(of=Tp({selector:"html"}),af=Tp({selector:"body"}),lf=Tp({selector:"input, select, textarea, button"}),cf=Tp({selector:".hidden"}),uf=Tp({selector:"*"}),hf=Tp({selector:"button"}),df=Tp({selector:"a"}),pf=Tp({selector:"hr"}),mf=Tp({selector:"code, pre"}),gf=Tp({selector:"code"}),bf=Tp({selector:"pre"}),ff=Tp({selector:"pre code"}),yf=class GlobalStyleSheet extends StyleSheet{constructor(){super(...arguments),i(this,"default",Cf,this),i(this,"html",Sf,this),i(this,"body",Ef,this),i(this,"allInputs",Af,this),i(this,"hidden",wf,this),i(this,"everything",Tf,this),i(this,"noOutlineOnFirefox",vf,this),i(this,"a",Of,this),i(this,"hr",Df,this),i(this,"codeAndPre",Rf,this),i(this,"code",Pf,this),i(this,"pre",If,this),i(this,"preInCode",Lf,this)}},Cf=n(yf.prototype,"default",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100%"}}}),Sf=n(yf.prototype,"html",[of],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100vw",overflow:()=>H.isMobileDevice()?"auto":"overlay",overflowX:"hidden",marginRight:()=>H.isMobileDevice()?0:"calc(-1 * (100vw - 100%))",touchAction:"auto"}}}),Ef=n(yf.prototype,"body",[af],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({touchAction:"auto",background:this.themeProps.APP_BACKGROUND,margin:0,fontSize:this.themeProps.FONT_SIZE_DEFAULT,fontFamily:this.themeProps.FONT_FAMILY_DEFAULT},H.isMobileDevice()?{cursor:"pointer","-webkit-tap-highlight-color":"transparent"}:{})}}),Af=n(yf.prototype,"allInputs",[lf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontFamily:this.themeProps.FONT_FAMILY_DEFAULT}}}),wf=n(yf.prototype,"hidden",[cf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"none !important"}}}),Tf=n(yf.prototype,"everything",[uf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{boxSizing:"border-box"}}}),vf=n(yf.prototype,"noOutlineOnFirefox",[hf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{"::-moz-focus-inner":{border:0}}}}),Of=n(yf.prototype,"a",[df],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textDecoration:"none",color:"rgba(0, 0, 0, 0.72)",fontWeight:"bold",outline:0,":hover":{outline:0},":active":{outline:0},":focus":{outline:0}}}}),Df=n(yf.prototype,"hr",[pf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:0,marginTop:"20px",marginBottom:"20px",border:0,borderTop:"1px solid #eee",boxSizing:"content-box"}}}),Rf=n(yf.prototype,"codeAndPre",[mf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontFamily:this.themeProps.FONT_FAMILY_MONOSPACE}}}),Pf=n(yf.prototype,"code",[gf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"2px 4px",fontSize:"90%",color:"#345 !important",backgroundColor:"#f8f2f4 !important",borderRadius:this.themeProps.BUTTON_BORDER_RADIUS}}}),If=n(yf.prototype,"pre",[bf],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{overflow:"auto",display:"block",padding:this.themeProps.BUTTON_BORDER_RADIUS,margin:"0 0 10px",fontSize:"13px",lineHeight:"1.42857143",color:"#333",wordBreak:"break-all",wordWrap:"break-word",backgroundColor:"#f5f5f5",border:"1px solid #ccc"}}}),Lf=n(yf.prototype,"preInCode",[ff],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:0,fontSize:"inherit",color:"inherit",whiteSpace:"pre-wrap",backgroundColor:"transparent",borderRadius:0}}}),yf);const _f={};class FlowPlan extends Dispatcher{constructor(e,t){void 0===e&&(e=[]),void 0===t&&(t=()=>_f.activeFlowHandler.finalize()),super(),this.steps=[],this.currentStep=0ntStep}goToNextStep(){this.currentStep+=1}goToPreviousStep(){for(this.currentStep-=1;this.currentStep>=0&&!this.getCurrentStep().shouldPrompt();)this.currentStep-=1}goToStep(e){for(let t=0;t<this.steps.length;t++)if(this.steps[t]===e)return void(this.currentStep=t)}async prompt(e){for(void 0===e&&(e=!1);this.isBeforeFirstStep()||this.currentStep<this.steps.length&&!e&&!this.getCurrentStep().shouldPrompt();)this.currentStep+=1;this.currentStep>=this.steps.length?_f.flowPlan===this&&(await this.finalize(),_f.flowPlan=null,_f.activeFlowHandler=null):(await this.getCurrentStep().prompt(),this.p(){this.goToNextStep(),await this.prompt()}async promptPreviousStep(){this.goToPreviousStep(),this.currentStep>=0?await this.prompt():this.currentStep=-1}}var xf,Mf,Bf,kf,Uf,Hf,zf,Ff,Vf,Gf,Wf;let jf=(xf=class BlinkLinkStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",Mf,this)}},Mf=n(xf.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{cursor:"pointer",color:this.themeProps.LINK_COLOR,fontWeight:this.themeProps.FONT_WEIGHT_REGULAR,fontSize:"inherit",":hover":{color:this.themeProps.LINK_COLOR_HOVER,textDecoration:"underline"}}}}),xf),Yf=(Bf=class LinkButtonStyle extends jf{constructor(){super(...arguments),i(this,"container",kf,this),i(this,"centered",Uf,this),i(this,"disabled",Hf,this),i(this,"invisible",zf,this)}},kf=n(Bf.prototype,"container",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{userSelect:"none",fontSize:this.themeProps.FONT_SIZE_NORMAL,transition:this.themeProps.DEFAULT_TRANSITION,fontWeight:"initial",":hover":{textDecoration:null}}}}),Uf=n(Bf.prototype,"centered",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:"12px auto",width:"fit-content",display:"block"}}}),Hf=n(Bf.prototype,"disabled",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{pointerEvents:"none",cursor:"not-allowed"}}}),zf=n(Bf.prototype,"invisible",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{opacity:0}}}),Bf),Kf=ct(Yf)(Ff=class LinkButton extends Rb{extraNodeAttributes(e){const{styleSheet:t}=this,{disabled:i,invisible:n,centered:r}=this.options;(i||n)&&e.addClass(t.disabled),n&&e.addClass(t.invisible),r&&e.addClass(t.centered)}})||Ff,Zf=(Vf=class BackButtonStyle extends Yf{constructor(){super(...arguments),i(this,"container",Gf,this)}},Gf=n(Vf.prototype,"container",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:18,display:"block",textAlign:"center",color:"inherit",":hover":{color:"inherit"}}}}),Vf),qf=ct(Zf)(Wf=class BackButton extends Kf{getDefaultOptions(e){return t({},super.getDefaultOptions(e),{onClick:()=>_f.back(),label:Vt.back})}})||Wf;const $f={"chevron-down":Lg,minus:Og,checkmark:Dg},Xf=(e,t)=>{if(!e)return null;if(e instanceof dt.Element)return e;if(e.prototype instanceof dt.Element)return new e(t);if("function"==typeof e)return e(t);const i=$f[e];return i?dt.createElement(i,t):(console.warn("Invalid icon:",e),null)};function Jf(e,i){return dt.createElement(MessageElement,t({message:e},i))}function Qf(e){const t=Color.isLight(e)||Color.isBlack(e);return pm(e,t?.03:-.15,t?.1:.2)}const ey={FONT_FAMILY_DEFAULT:nt((e=>e.FONT_FAMILY_SANS_SERIF)),FONT_SIZE_SMALL:Qe(12),FONT_SIZE_NORMAL:Qe(14),FONT_SIZE_LARGE:Qe(16),FONT_SIZE_TITLE:Qe(21),FONT_WEIGHT_LIGHT:rt("lighter"),FONT_WEIGHT_REGULAR:rt("normal"),FONT_WEIGHT_BOLD:rt("bold"),TEXT_PRIMARY_COLOR:Je("#232529"),TEXT_SECONDARY_COLOR:Je("#545F69"),LINK_COLOR:Je("#0080FF"),LINK_COLOR_HOVER:Je((e=>Qf(e.LINK_COLOR))),BUTTON_BASE_STYLE:at({}),BUTTON_PRIMARY_COLOR:Je((e=>e.WHITE)),BUTTON_PRIMARY_BACKGROUND:Je("linear-gradient(180deg, #125C67 0%, #0F4851 100%)"),BUTTON_PRIMARY_BORDER_WIDTH:Qe(1),BUTTON_PRIMARY_BORDER_COLOR:Je("#0F4851"),BUTTON_PRIMARY_TEXT_SHADOW:tt("none"),BUTTON_PRIMARY_SHADOW:it("none"),BUTTON_PRIMARY_HOVER_COLOR:Je((e=>e.BUTTON_PRIMARY_COLOR)),BUTTON_PRIMARY_HOVER_BACKGROUND:Je((e=>Qf(e.BUTTON_PRIMARY_BACKGROUND))),BUTTON_PRIMARY_HOVER_BORDER_COLOR:Je((e=>Qf(e.BUTTON_PRIMARY_BORDER_COLOR))),BUTTON_PRIMARY_HOVER_SHADOW:it("none"),BUTTON_SECONDARY_COLOR:Je("#535558"),BUTTON_SECONDARY_BACKGROUND:Je("transparent"),BUTTON_SECONDARY_BORDER_WIDTH:Qe(1),BUTTON_SECONDARY_BORDER_COLOR:Je((e=>e.BUTTON_SECONDARY_COLOR)),BUTTON_SECONDARY_TEXT_SHADOW:tt("none"),BUTTON_SECONDARY_SHADOW:it("none"),BUTTON_SECONDARY_HOVER_COLOR:Je((e=>e.BUTTON_SECONDARY_COLOR)),BUTTON_SECONDARY_HOVER_BACKGROUND:Je((e=>Qf(e.BUTTON_SECONDARY_BACKGROUNR:Je((e=>Qf(e.BUTTON_SECONDARY_BORDER_COLOR))),BUTTON_SECONDARY_HOVER_SHADOW:it("none"),BASE_BORDER_RADIUS:Qe(6,"The default border radius used in buttons, cards, input, etc."),INPUT_DEFAULT_HEIGHT:Qe(42),INPUT_BACKGROUND:Je("#FDFFFE"),INPUT_BACKGROUND_HOVER:Je(null),INPUT_BORDER_RADIUS:Qe((e=>e.BASE_BORDER_RADIUS)),INPUT_BORDER_COLOR:Je(Color.addOpacity("#545F69",.24).toString()),INPUT_BORDER_ACTIVE_COLOR:Je(Color.addOpacity("#545F69",.5).toString()),INPUT_TEXT_COLOR:Je("#444F59"),INPUT_PLACEHOLDER_COLOR:Je("rgba(102,102,102,.72)"),INPUT_NOT_EDITABLE_LABEL_COLOR:Je((e=>e.MERCHANT_2)),CHECKBOX_SIZE:Qe("1.14em"),CHECKBOX_BORDER_RADIUS:Qe(2),CHECKBOX_BORDER_COLOR:Je((e=>e.WALLET_11)),CHECKBOX_ENABLED_BACKGROUND_COLOR:Je((e=>e.WALLET_11)),CHECKBOX_CHECKMARK_COLOR:Je((e=>e.WHITE)),RADIO_BUTTON_BORDER_RADIUS:Qe(4),RADIO_BUTTON_PADDING:Qe(12),RADIO_BUTTON_FLEX:Qe(1),POPUP_BACKGROUND:Je((e=>e.WHITE)),POPUP_BORDER:et(null),POPUP_SHADOW:it("0 2px 8px 5px rgba(0,0,0,.1), 0 5px 27px -5px rgba(0,0,0,.37)"),POPUP_MAX_WIDTH:Qe(360),POPUP_MAX_HEIGHT:Qe(480),LOADING_SPINNER_BACKGROUND:Je("rgba(255,255,255,.84)"),LOADING_SPINNER_COLOR:Je("#125C67"),SUCCESS_COLOR:Je("#11BA87"),WARNING_COLOR:Je("#F0AD4E"),ERROR_COLOR:Je("#FF4848"),BASE_DISABLED_OPACITY:st(.6),INPUT_USE_PLACEHOLDER_AS_LABEL:ot(!1)};function ty(e){void 0===e&&(e={}),Theme.setProperties({WALLET_0:"#F8FBFB",WALLET_1:"#E8F0F2",WALLET_2:"#D2E2E5",WALLET_3:"#BBD4D8",WALLET_4:"#A5C6CB",WALLET_5:"#8EB8BE",WALLET_6:"#78AAB2",WALLET_7:"#619CA5",WALLET_8:"#4B8E98",WALLET_9:"#34808B",WALLET_10:"#1E727E",WALLET_11:"#086472",WALLET_12:"#085B68",WALLET_13:"#07525E",WALLET_14:"#064953",WALLET_15:"#064049",WALLET_16:"#05373F",WALLET_17:"#042E34",WALLET_18:"#03252A",WALLET_19:"#031C20",WALLET_20:"#021315",WALLET_21:"#010506",MERCHANT_1:"#A0A0A0",MERCHANT_2:"#6C6C6C",MERCHANT_3:"#3F3F3F",MERCHANT_4:"#232323",MERCHANT_5:"#151515",WHITE:"#FFFFFF",SOCIAL_BUTTON_SHADOW:"0 5px 8px 0 rgba(50, 50, 93, 0.11), 0 2px 4px 0 rgba(0, 0, 0, 0.08)",SOCIAL_BUTTON_HOVER_SHADOW:"0 4px 7px 0 rgba(50, 50, 93, 0.22), 0 3px 6px 0 rgba(0, 0, 0, 0.16)",SOCIAL_BUTTON_FACEBOOK_COLOR:e=>e.WHITE,SOCIAL_BUTTON_FACEBOOK_BACKGROUND:"#3B5A9A",SOCIAL_BUTTON_GOOGLE_COLOR:"rgba(0, 0, 0, 0.72)",SOCIAL_BUTTON_GOOGLE_BACKGROUND:e=>e.WHITE,SOCIAL_BUTTON_LINKEDIN_COLOR:e=>e.WHITE,SOCIAL_BUTTON_LINKEDIN_BACKGROUND:"#0077B5",SOCIAL_BUTTON_TWITTER_COLOR:e=>e.WHITE,SOCIAL_BUTTON_TWITTER_BACKGROUND:"#1da1f2",TOGGLE_BACKGROUND:e=>e.WALLET_2,TOGGLE_COLOR:e=>e.WALLET_11,TOGGLE_SHADOW:"0 1px 1px 0 rgba(0,0,0,.14), 0 2px 1px -1px rgba(0,0,0,.12), 0 1px 3px 0 rgba(0,0,0,.2)",TOGGLE_DISABLED_BACKGROUND:e=>e.WALLET_6,TOGGLE_PILL_SIZE:20,DROPDOWN_ITEM_BORDER:"rgba(27,126,140,.24)",DROPDOWN_ITEM_HOVER_BACKGROUND:"rgba(2, 92, 150, 0.06)",RADIO_SIZE:16,RADIO_COLOR:"#545F69",DEFAULT=>e.DEFAULT_TRANSITION_DURATION_MS+"ms ease",APP_BACKGROUND:"#FAFDFD",NAV_MOBILE_COLOR:e=>e.WHITE,NAV_MOBILE_SHADOW:"0 8px 16px -8px rgba(0, 0, 0, 0.15), 0 13px 27px -5px rgba(50, 50, 93, 0.12)",NAVBAR_BOX_SHADOW:"0 12px 12px -6px rgba(0, 0, 0, 0.12)",NAVBAR_BACKGROUND:e=>e.WALLET_11,NAVBAR_CENTER_ITEM_ACTIVE:e=>e.WHITE,NAVBAR_CENTER_ITEM_INACTIVE:e=>e.WALLET_3,MODAL_BACKGROUND:e=>e.WALLET_0,MODAL_SHADOW:"0 0 6px 0 rgba(0,0,0,.12), 0 8px 16px -8px rgba(0,0,0,.15), 0 13px 27px -5px rgba(50,50,93,.12)",MON:e=>`${e.MODAL_TRANSITION_TIME_MS}ms ease`,SPINNER_COLOR:e=>e.WALLET_8,DASHBOARD_SCRIM_BACKGROUND:"rgba(255,255,255,.84)",BASE_CARD_SHADOW:"0 6px 12px -6px rgba(0,0,0,.12), 0 10px 20px -4px rgba(0,0,0,0.12)",BASE_CARD_BACKGROUND:e=>e.WALLET_0,BASE_CARD_TITLE_COLOR:e=>e.WALLET_11,BASE_CARD_WIDTH:480,BASE_CARD_MAX_WIDTH:480,CARD_HEADER_TEXT_COLOR:"#005A64",CARD_HEADER_BACKGROUND_COLOR:"#F3F8F7",LOGO_CARD_SHADOW:"0 6px 10px -6px rgba(0, 0, 0, 0.3), 0 9px 18px -4px rgba(50, 50, 93, 0.25)",LOGO_CARD_CONTENT_BACKGROUND:e=>e.WHITE,DIVIDER_TEXT_COLOR:"rgba(0, 0, 0, 0.48)",DIVIDER_LINE_COLOR:"rgba(84, 95, 105, 0.12)",TOAST_TEXT_COLOR:e=>e.WHITE,TOAST_BACKGROUND:"rgba(0,0,0,.84)",TABLE_HEADER_TEXT_COLOR:e=>e.CARD_HEADER_TEXT_COLOR,TABLE_HEADER_BACKGROUND_COLOR:e=>e.CARD_HEADER_BACKGROUND_COLOR,TABLE_HEADER_BACKGROUND_ALTERNATE:"#F5F5F5",SETTINGS_LABEL_COLOR:e=>e.MERCHANT_4,DASHBOARD_DESCRIPTION_COLOR:e=>e.MERCHANT_2,GENERAL_LINE_HEIGHT:"1.5",WALLET_BALANCE_COLOR:e=>e.WHITE,WALLET_GRADIENT_BACKGROUND:"linear-gradient(60deg, #085B68, #064953)"}),Theme.setProperties(ey),Theme.register(Rb,jf);const i={MERCHANT_INPUT_STYLE:{},MERCHANT_SCRIM_BACKGROUND:"rgba(0,0,0,.5)",MERCHANT_FRAME_BACKGROUND:"#FBFDFD",MERCHANT_FRAME_BORDER:null,MERCHANT_FRAME_HEADER_BACKGROUND:"#F3F7F8",MERCHANT_FRAME_CLOSE_BUTTON_COLOR:"#242424",MERCHANT_FRAME_CLOSE_BUTTON_SIZE:28,MERCHANT_FRAME_BORDER_COLOR:"rgba(84, 95, 105, 0.18)",MERCHANT_FRAME_BORDER_RADIUS:"10px",MERCHANT_FRAME_HEADER_BORDER_COLOR:Color.addOpacity("#545F69",.12).toString(),MERCHANT_CARD_BACKGROUND:e=>e.WHITE,MERCHANT_CARD_BOX_SHADOW:"0 12px 12px 0px rgba(0, 0, 0, 0.12)",MERCHANT_CARD_BORDER_COLOR:"#E3E3E3",MERCHANT_FOOTER_TEXT:"#545F69",MERCHANT_FOOTER_LOGO:"#545F69",MERCHANT_USER_DASHBOARD_TAB_STYLE:{background:"#E0E0E0",textDecoration:"none !importanD_ACTIVE_TAB_STYLE:e=>({background:e.WHITE}),MERCHANT_TITLE_STYLE:{}},n=function(e){const t={MERCHANT_BUTTON_INPUT_TOAST_BORDER_RADIUS:"BASE_BORDER_RADIUS",MERCHANT_USE_INPUT_PLACEHOLDER_INSTEAD_OF_LABEL:"INPUT_USE_PLACEHOLDER_AS_LABEL",MERCHANT_SUCCESS:"SUCCESS_COLOR",MERCHANT_ERROR:"ERROR_COLOR",MERCHANT_FONT_FAMILY:"FONT_FAMILY_DEFAULT",MERCHANT_SPINNER_BACKGROUND:"LOADING_SPINNER_BACKGROUND",MERCHANT_SPINNER_COLOR:"LOADING_SPINNER_COLOR",MERCHANT_BUTTON_PRIMARY_TEXT_COLOR:"MERCHANT_BUTTON_PRIMARY_COLOR",MERCHANT_BUTTON_PRIMARY_TEXT_COLOR_HOVER:"MERCHANT_BUTTON_PRIMARY_HOVER_COLOR",MERCHANT_BUTTON_PRIMARY_BACKGROUND_HOVER:"MERCHANT_BUTTON_PRIMARY_HOVER_BACKGROUND",MERCHANT_BUTTON_PRIMARY_BORDER_COLOR_HOVER:"MERCHANT_BUTTON_PRIMARY_HOVER_BORDER_COLOR",MERCHANT_BUTTON_SECONDARY_TEXT_COLOR:"MERCHANT_BUTTON_SECONDARY_COLOR",MERCHANT_BUTTON_SECONDARY_BACKGROUND_HOVER:"MERCHANT_BUTTON_SECONDARY_HOVER_BACKGROUND",MERCHANT_BUTTON_SECONDARY_BORDER_COLOR_HOVER:"MERCHANT_BUTTON_SECONDARY_HOVER_BORDER_COLOR"},i={};for(const[r,s]of Object.entries(e)){var n;const o=null!=(n=t[r])?n:r;e.hasOwnProperty(o)&&o===t[r]||(i[o]=s)}for(const[t,n]of Object.entries(i))if(t.startsWith("MERCHANT_")){const r=t.substring(9);if(e.hasOwnProperty(r))continue;ey[r]&&(i[r]=n)}return i}(e);Theme.setProperties(t({},i,n)),Km=Xf,qm=Jf}const iy=new class LanguageStoreClass extends GenericObjectStore{gis.locale=e,this.dispatch("localeChange",e)}}("langu{buildTranslation(e){e(this.translationMap)}});iy.importState([{id:1,translationMap:Gt}]),function(e){Ft=e;let t=Ft.getLocale();t&&t.buildTranslation(zt),Ft.addListener("localeChange",(e=>{e.buildTranslation(zt)}))}(iy);class BlinkViewportMeta extends ViewportMeta{getContent(){var e;const{scale:t}=this.options,i=H.isMobileDevice()&&(null==(e=window.screen)?void 0:e.width)||window.innerWidth;return`width=device-width,initial-scale=${i<375?i/375:t},maximum-scale=${t},user-scalable=no`}}class BaseBlinkApp extends StemApp{static init(){return this.initializeTheme(),this.initializeGlobalStyle(),this.initializeViewportMeta(),this.addAjaxProcessors(),a(){BlinkViewportMeta.create(document.head)}static initializeAuthentication(){Ab.setLoginAppName("user_dashboard");const e=()=>{Zt.initWebsocketConnection(Ab.token)};e(),Ab.addListener(AuthToken.EventTypes.REFRESH,e),Ab.addListener(AuthToken.EventTypes.LOGIN,e);let t=!1;Ab.onAuthentication((()=>{t||(this.addWsListener("user-"+Ab.token.getUserId()+"-events"),t=!0)}))OUT,(()=>{Zt.dropWebsocketWsListener(){}static initializeTheme(){ty()}static initializeGlobalStyle(){Nf.initialize()}getContainer(){return this.getRouter()}static addAjaxProcessors(){const e=Zt.getAjaxHandler();e.addPostprocessor((e=>{const{error:t}=e;return!t||1003!==t.code&&1004!==t.code?e:(Ab.clearCurrentInfo(),null)})),e.addPreprocessor((e=>{e.analytics={requestStartTime:performance.now()}})),e.addPostprocessor(((e,t)=>{const{error:i}=e,{options:n,request:r}=t;let s=je;const o={method:r.method,httpStatusCode:t.getXHR().status,endpoint:new URL(r.url).pathname,duration:performance.now()-n.analytics.requestStartTime};i&&(s=We,o.errorCode=i.code,o.errorMessage=i.message),Ze(s,o)}))}onMount(){super.onMount(),document.body.tabIndex=1}}PageTitleManager.setDefaultTitle("Blink"),String.prototype.replaceAll||(String.prototype.replaceAll=function(e,t){return se(e)&&(e=new RegExp(e,"g")),null!=this&&this.replace?this.replace(e,t):this}),"function"!=type(e).catch((e=>setTimeout((()=>{throw e}))))});const ny="functionalityNotEnabled",ry="cta",sy="subscriptionPlan",oy="address",ay="paymentDetails",ly="paymentFailed",cy="donationDonate",uy="paymentAndDonate",hy="donationThankYou",dy="editDonationDonate",py="editDonationThankYou",my="editDonationCancel",gy="donationCanceledConfirmation",by="subscriptionManageInline",fy="subscribeCheckout",yy="subscribeThankYou",Cy="editSubscriptionCancel",Sy="editSubscriptionCancelSuccess",Ey="giftSubscriptionGiftDetails",Ay="giftSubscriptionSuccess",wy="shopProducts",Ty="shopReviewOrder",vy="shopSuccess",Oy="newsletterSubscribe",Dy="newsletterSuccess",Ry="dashboardHome",Py="dashboardRemoveCard",Iy="dashboardRemoveAddress",Ly="dashboardSubscriptionChangeConfirm",Ny="dashboardSubscriptionChangeSuccess",_y="dashboardChangeEmailConfirmationCode";async function xy(){const e=Ab.isAuthenticated(),{key:t,expiresAt:i}=My.merchantToken;Ab.token.setToken(t,i,!0),e&&(Zt.dropWebsocketConnection(),await Qb.forceFetchUserData())}const My=new class IFrameAuthService extends Dispatchable{constructor(){super(...arguments),this.merchantToken=null}setMerchantToken(e){this.merchantToken=e,e&&AuthToken.getUserIdFromToken(e.key)!==Ab.token.getUserId()&&xy()}init(e){Ab.addListener(Eb.EventTypes.SET_MERCHANT_TOKEN,(e=>{this.setMerchantToken(e),mp.sendToSDK(hp.SET_MERCHANT_TOKEN,{token:e})})),mp.addListener(hp.EDIT_MERCHANT_USER_METADATA,(async e=>{let{merchantId:t,metadata:i}=e;await async function(e,t){return Zt.post("/users/edit_merchant_user_metadata",{merchantId:e,metadata:t},{allowNulls:!0})}(t,i)e=>{let{token:t}=e;this.setMerchantToken(t)})),mp.addIframesListener(hp.USER_TOKEN_UPDATE,(e=>{let{token:t,merchantToken:i,userData:n,doNotRebroadcast:r}=e;if(t){const{t:e,e:i}=JSON.parse(t);Ab.token.setToken(e,i)}else Ab.token.clear();if(i&&(i={key:JSON.parse(i).t,expiresAt:JSON.parse(i).e},this.setMerchantToken(i),mp.sendToSDK(hp.SET_MERCHANT_TOKEN,{token:i})),n){const{state:e}=n;e&&gt.importState(e),Qb.setUserData(n)}r||mp.sendToIFrames(hp.USER_TOKEN_UPDATE,{token:t,userData:n,doNotRebroadcast:!0})})),this.setMerchantToken(e)}};var By,ky,Uy,Hy;let zy=(By=class MerchantLogoStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",ky,this),i(this,"logoImage",Uy,this)}},ky=n(By.prototype,"container",[Ap],{configuraflexDirection:"column",height:35,width:225}}}),Uy=n(By.prototype,"logoImage",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}}}),By),Fy=ct(zy)(Hy=class MerchantLogo extends dt.Element{render(){const{styleSheet:e}=this,{logoSrc:t,logoAlt:i}=tm,n=fr.getMerchant();return dt.createElement(Image,{className:e.logoImage,src:t||n.wideLogoUrl,alt:i||n.name})}})||Hy;const Vy={INDEX_COLLAPSED:"empty",INDEX_EXPANDED:"widget-index-expanded",ADD_FUNDS:"widget-add-funds",AUTOPAY:"widget-autopay",ADD_CARD:"widget-add-card",CHOOSE_CARD:"widget-choose-card",INSUFFICIENT_FUNDS:"widget-insufficient-funds"};var Gy,Wy;function jy(e){window.opener&&Vn()===window.origin&&mp.sendToOpener(hp.USER_TOKEN_UPDATE,{merchantToken:Ab.merchantToken.isAuthenticated()?Ab.merchantToken.getTokenObjectStringified():null,token:Ab.token.guserData:e}),Fn()}function Yy(){return zn()}function Ky(){try{const e=+Date.now();return pe("blinkCookieTest",e,1),parseInt(de("blinkCookieTest"),10)===e}catch(e){return!1}}let Zy=((Wy=class AuthHelper{static getMerchantRedirectPage(){if(this.savedRedirectUrl)return this.savedRedirectUrl;try{return sessionStorage.getItem("merchantPageUrl")}catch(e){return null}}static redirectToUrl(e){e?Un()?mp.sendToSDK(hp.REDIRECT_TO_URL,{url:e}):Oe(e,"directToUrl(this.getMerchantRedirectPage())}static saveMerchantPageUrlForRedirect(e){this.savedRedirectUrl=e;try{sessionStorage.setItem("merchantPageUrl",e)}catch(e){console.warn("Failed to set redirect page in session storage")}}static addAuthenticationCallback(e){void 0===e&&(e=fe);const t=Ab.addListener(AuthToken.EventTypess)e.cleanup();this.loginListenerHandlers=[]}static redirectToOAuthLogin(e){!Yy()&&this.oauth2NewTab?this.oauth2NewTab.location.href=e:Un()?(Yy()&&this.saveMerchantPageUrlForRedirect(tm.merchantPageUrl),mp.sendToSDK(hp.REDIRECT_TO_URL,{url:e,newTab:!Yy()})):Oe(e,Yy()?"_self":"_blank")}static oauth2Login(e){Yy()||(this.oauth2NewTab=Oe()),this.redirectToOAuthLogin(e)}static oauth1Login(){Yy()||(this.oauth1NewTab=Oe())}static oauth1TokenReceivedCallback(e){!Yy()&&this.oauth1NewTab?this.oauth1NewTab.location.href=e:this.redirectToOAuthLogin(e)}static oauthHandleLoginRedirect(e,t){let i;i=Vn()===window.origin?jy:e=>this.confirmedAuthenticationAction(e),e.setLoginCallback(i),e.handleLoginResponse(t)}static oauthHandleError(){Yy()?Un()||!this.getMerchantRedirectPage()?Router.changeURL(j):this.redirectToMerchantPage():Fn()}static async ensureTokenSetOnMainWebsiteAfterBackendCall(e){if(await e(),Ky())return;const t=`${a}/set-cookie?token=${Ab.token.usingMerchantToken?"null":encodeURI(Ab.token.getTokenObjectStringified())}`;Yy()?this.redirectToUrl(t+"&merchantRedirectUrl="+encodeURI(tm.merchantPageUrl)):Oe().location.href=t}static async requestLoginCode(e){return null==e&&(e=this.previousLoginCodeRequest),this.previousLoginCodeRequest=e,Ze(ke),await Ab.requestLoginCode(e)}static async loginWithEmailCode(e){return this.endCall((()=>Ab.loginWithEmailCode({code:e})))}static completedLoginByEmailKeyAction(e){void 0===e&&(e=""),e&&e.trim().length>0?Oe(e," redirectAfterLogin(){Router.changeURL("/")}static confirmedAuthenticationAction(){this.getMerchantRedirectPage()?this.redirectToMerchantPage():Un()||this.redirectAfterLogin()}}).loginListenerHandlers=[],Wy.oauth1NewTab=null,Wy.oauth2NewTab=null,n(Gy=Wy,"ensureTokenSetOnMainWebsiteAfterBackendCall",[yb],Object.getOwnPropertyDescriptor(Gy,"ensureTok{mp.sendToSDK(hp.REDIRECT_TO_URL,{url:"/"})}function $y(e,t){void 0===t&&(t=a),zn()&&(mp.sendToSDK(hp.REDIRECT_TO_URL,{url:t}),e.preventDefault(),e.stopPropagation())}function Xy(e){if(void 0===e&&(e=!1),Zy.clearAuthenticationCallbacks(),Ee.appType===E.panel)return mp.sendToSDK(hp.DESTROY_PANEL,{expandWallet:e}),void Dispatcher.Global.dispatch("collapseIframe");Router.changeURL(Vy.INDEX_COLLAPSED),setTimeout((()=>{Dispatcher.Global.dispatch("collapseIframe"),e&&Router.changeURL(Vy.INDEX_EXPANDED)}),v)}function Jy(){const{iframeParams:e}=tm,t=fr.getMerchant(),i=e.urlToRedirectOnSuccess||e.inlineFlow&&t.url;i?mp.sendToSDK(hp.REDIRECT_TO_URL,{url:i}):Xy()}var Qy,eC,tC;let iC=(Qy=class PanelCloseButtonStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",eC,this)}},eC=n(Qy.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"absolute",right:18,top:14,cursor:"pointer",pointerEvents:"initial"}}}),Qy),nC=ct(iC)(tC=class PanelCloseButton extends Ng{getDefaultOptions(){return t({},super.getDefaultOptions(),{color:this.themeProps.MERCHANT_FRAME_CLOSE_BUTTON_COLOR,size:this.themeProps.MERCHANT_FRAME_CLOSE_BUTTON_SIZE})}onMot(),this.addClickListener((()=>{Ze(Me),Xy()}))}})||tC;var rC,sC,oC,aC,lC,cC;let uC=(rC=class ScrollableBodyStyle extends StyleSheet{constructor(){super(...arguments),i(this,"topShadow",sC,this),i(this,"topShadowCover",oC,this),i(this,"bottomShadow",aC,this),i(this,"bottomShadowCover",lC,this)}},sC=n(rC.prototype,"topShadow",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"sticky",top:0,width:"100%",boxShadow:"0px 0px 5px 1px rgba(0,0,0,0.24)",zIndex:1}}}),oC=n(rC.prototype,"topShadowCover",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{background:this.themeProps.MERCHANT_FRAME_BACKGROUND,position:"absolute",width:"100%",height:7,zIndex:2}}}),aC=n(rC.prototype,"bottomShadow",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"sticky",bottom:0,width:"100%",boxShadow:"0px 0px 5px 3px rgba(0,0,0,0.24)",zIndex:1}}}),lC=n(rC.prototype,"bottomShadowCover",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"relative",background:this.themeProps.MERCHANT_FRAME_BACKGROUND,width:"100%",height:8,zIndex:2}}}),rC),hC=ct(uC)(cC=class ScrollableBody extends dt.Element{getDefaultOptions(){return{hasShadow:!0}}shouldDisplayShadow(){return this.options.hasShadow}renderTopShadow(){const{styleSheet:e}=this;return this.shouldDisplayShadow()&&[dt.createElement("div",{className:e.topShadow}),dt.createElement("div",{className:e.topShadowCover})]}renderBottomShadow(){const{styleSheet:e}=this;return this.shouldDisplayShadow()&&[dt.createElement("div",{className:e.bottomShadowCover}),dt.createElement("div",{className:e.bottomShadow})]}getChildrenToRender(){return[this.renderTopShadow(),this.render(),this.renderBottomShadow()]}})||cC;var dC,pC,mC,gC,bC,fC,yC,CC,SC;let EC=(dC=class SingleStepStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",pC,this),i(this,"stepCircle",mC,this),i(this,"label",gC,this),i(this,"line",bC,this)}},pC=n(dC.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",alignItems:"center",position:"relative"}}}),mC=n(dC.prototype,"stepCircle",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",width:28,height:28,border:"1px solid #000",borderRadius:"50%",backgroundColor:this.themeProps.BUTTON_PRIMARY_BACKGROUND,color:this.themeProps.BUTTON_PRIMARY_COLOR,fontSize:12}}}),gC=n(dC.prototype,"label",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"absolute",top:28,left:"50%",transform:"translate(-50%,-50%)",fontSize:14,color:this.themeProps.TEXT_PRIMARY_COLOR}}}),bC=n(dC.prototype,"line",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:1,width:100,backgroundColor:"#000"}}}),dC),AC=ct(EC)(fC=class SingleStep extends dt.Element{getDefaultOptions(){return t({},super.getDefaultOptions(),{activeStepIndex:1,stepIndex:0,islastStep:!1,label:"Label"})}render(){const{styleSheet:e}=this,{activeStepIndex:t,stepIndex:i,isLastStep:n,label:r}=this.options,s=i<t||-1===t?dt.createElement(Dg,{size:10,color:Theme.props.BUTTON_PRIMARY_COLOR}):i+1,o=i>t&&-1!==t?"50%":"100%";return[dt.createElement("div",{className:e.container},dt.createElement("div",{className:e.stepCircle,style:{opacity:o}},s,dt.createElement("p",{className:e.label},r)),!n&&dt.createElement("div",{className:e.line}))]}})||fC,wC=(yC=class StepIndicatorStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",CC,this)}},CC=n(yC.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",paddingBottom:40}}}),yC),TC=ct(wC)(SC=class StepIndicator extends dt.Element{getDefaultOptions(){return t({},super.getDefaultOptions(),{activeStep:"Address",steps:["Account","Address","Payment"]})}extraNodeAttributes(e){e.addClass(this.styleSheet.container)}render(){const{steps:e,activeStep:t}=this.options;return e.map(((i,n)=>dt.createElement(AC,{label:i,stepIndex:n,isLastStep:n===e.length-1,activeStepIndex:e.indexOf(t)})))}})||SC;var vC,OC,DC,RC,PC,IC,LC,NC,_C,xC;let MC=(vC=class BasePanelPageStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",OC,this),i(this,"header",DC,this),i(this,"body",RC,this),i(this,"content",PC,this),i(this,"title",IC,this),i(this,"message",LC,this),i(this,"actionButton",NC,this),i(this,"backButton",_C,this)}},OC=n(vC.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontFamily:this.themeProps.FONT_FAMILY_DEFAULT,color:this.themeProps.TEXT_PRIMARY_COLOR,overflow:"auto",maxWidth:"100%",maxHeight:"100%",position:"relative",display:"flex",flexDirection:"column",padding:ve()?"18px 12px":null}}}),DC=n(vC.prototype,"header",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",position:"sticky",top:0,padding:12,background:this.themeProps.MERCHANT_FRAME_HEADER_BACKGROUND,borderBottom:()=>"0.5px solid "+this.themeProps.MERCHANT_FRAME_HEADER_BORDER_COLOR,zIndex:3}}}),RC=n(vC.prototype,"body",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{background:this.themeProps.MERCHANT_FRAME_BACKGROUND,border:this.themeProps.MERCHANT_FRAME_BORDER,width:"100%",overflow:"auto",position:"relative"}}}),PC=n(vC.prototype,"content",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:440,maxWidth:"100%",padding:ve()?"12px 24px 12px 24px":"18px 36px 18px 36px",overflow:"auto"}}}),IC=n(vC.prototype,"title",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>t({color:this.themeProps.TEXT_PRIMARY_COLOR,fontSize:this.themeProps.FONT_SIZE_TITLE,fontWeight:this.themeProps.FONT_WEIGHT_LIGHT,marginBottom:12},this.themeProps.MERCHANT_TITLE_STYLE)}}),LC=n(vC.prototype,"message",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.TEXT_SECONDARY_COLOR,textAlign:"center",width:"100%",margin:"18px 0px"}}}),NC=n(vC.prototype,"actionButton",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",margin:"auto",marginTop:18,maxWidth:440}}}),_C=n(vC.prototype,"backButton",[Ap],{configuray:"block",":hover":{textDecoration:"none"}}}}),vC);const BC=["Account","Address","Payment"],kC={["/"+j]:"Account",["/"+Y]:"Account",["/"+oy]:"Address",["/"+fy]:"Payment",["/"+ay]:"Payment",["/"+yy]:null};let UC=ct(MC)(xC=class BasePanelPage extends dt.Element{getDefaultOptions(){var e;const{iframeParams:t}=tm;return{hasHeader:!t.inlineFlow,hasCloseButton:!t.disableUserClose,hasStepIndicator:null!=(e=t.hasStepIndicator)?e:t.inlineFlow,hasShadow:!0,shownInIframe:!0}}shouldDisplayHeader(){return this.options.hasHeader}shouldDisplayClostions.hasShadow&&this.shouldDisplayHeader()}shouldDisplayStepIndicator(){return this.options.hasStepIndicator&&Router.getCurrentPath()in kC}renderStepIndicator(){return this.shouldDisplayStepIndicator()&&dt.createElement(TC,{steps:BC,activeStep:kC[Router.getCurrentPath()]})}renderHeader(){const{styleSheet:e}=this;return this.shouldDisplayHeader()&&[dt.createElement("div",{className:e.header},dt.createElement(Fy,null),this.shouldDisplayCloseButton()&&dt.createElement(nC,null))]}getChildrenToRender(){const{styleSheet:e}=this;return[this.renderStepIndicator(),this.renderHeader(),dt.createElement(hC,{className:e.body,hasShadow:this.shouldDisplayShadow()},dt.createElement("div",{className:e.content},this.options.title&&dt.createElement("div",{className:e.title},this.options.title),this.render()))]}getDispatchedHeight(){var e;return null===tm.gateType||tm.gateType===w.banner||tm.iframeParams.inlineFlow?null==(e=this.node)?void 0:e.offsetHeight:"100%"}getDispatchedWidth(){return"100%"}dispatchSizeChange(){const e=this.getDispatchedHeight(),t=this.getDispatchedWidth();e&&t&&(e!==this.lastDispatchedHeight||t!==this.lastDispatchedWidth)&&(this.lastDispatchedHeight=e,this.lastDispatchedWidth=t,mp.sendToSDK(hp.UPDATE_PANEL_SIZE,{height:e,width:t}))}onMount(){this.options.shownInIframe&&setTimeout((()=>{if(!this.node)return;const e=De((()=>this.dispatchSizeChange()),100);self.ResizeObserver&&new ResizeObserver(e).observe(th extends UC{getChildrenToRender(){return[]}}var HC,zC,FC,VC,GC;let WC=(HC=class PoweredByBlinkStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",zC,this),i(this,"link",FC,this),i(this,"logo",VC,this)}},zC=n(HC.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",alignItems:"center",padding:"8px 0"}}}),FC=n(HC.prototype,"link",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{lineHeight:0,fontSize:0}}}),VC=n(HC.prototype,"logo",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{paddingLeft:5}}}),HC),jC=ct(WCColor:this.themeProps.MERCHANT_FOOTER_LOGO}}render(){const{styleSheet:e}=this;return[dt.createElement(Hg,{size:16,color:this.options.poweredByColor}),dt.createElement(Rb,{href:"/",newTab:!0,onClick:$y,className:e.link},dt.createElement(zg,{size:13,color:this.options.blinkLogoColor,className:e.logo}))]}})||GC;function YC(e,i){void 0===i&&(i={}),mp.sendToSDK(hp.START_FLOW_REQUEST,{flowType:e,options:t({type:e},tm.getPanelToFlowOptions(),i)})}function KC(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1),t?YC(null,{type:A.donation,editRecurring:e,skipCTA:!0}):YC(A.donation,{editRecurring:e,skipCTA:!0})}function ZC(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1)e,skipCTA:t})}function qC(){YC(A.dashboard)}var $C,XC,JC,QC,eS;let tS=($C=class BlinkButtonStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",XC,this),i(this,"primaryButton",JC,this),i(this,"secondaryButton",QC,this)}Size(){}Level(){}},XC=n($C.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ue({padding:12,borderStyle:"solid !important",borderRadius:this.themeProps.BASE_BORDER_RADIUS,outline:0,fontSize:this.themeProps.FONT_SIZE_LARGE,cursor:"pointer",transition:this.themeProps.DEFAULT_TRANSITION,userSelect:"none",display:"inline-block",textAlign:"center","[disabled]":{cursor:"not-allowed",opacity:this.themeProps.BASE_DISABLED_OPACITY,pointerEvents:"none"}},this.themeProps.BUTTON_BASE_STYLE)}}),JC=n($C.prototype,"primaryButton",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.BUTTON_PRIMARY_COLOR,background:this.themeProps.BUTTON_PRIMARY_BACKGROUND,borderWidth:this.themeProps.BUTTON_PRIMARY_BORDER_WIDTH,borderColor:this.themeProps.BUTTON_PRIMARY_BORDER_COLOR,boxShadow:this.themeProps.BUTTON_PRIMARY_SHADOW,textShadow:this.themeProps.BUTTON_PRIMARY_TEXT_SHADOW,":hover:not([disabled])":{color:this.themeProps.BUTTON_PRIMARY_HOVER_COLOR,background:this.themeProps.BUTTON_PRIMARY_HOVER_BACKGROUND,borderColor:this.themeProps.BUTTON_PRIMARY_HOVER_BORDER_COLOR,boxShadow:this.themeProps.BUTTON_PRIMARY_HOVER_SHADOW}}}}),QC=n($C.prototype,"secondaryButton",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.BUTTON_SECONDARY_COLOR,background:this.themeProps.BUTTON_SECONDARY_BACKGROUND,borderWidth:this.themeProps.BUTTON_SECONDARY_BORDER_WIDTH,borderColor:this.themeProps.BUTTON_SECONDARY_BORDER_COLOR,boxShadow:this.themeProps.BUTTON_SECONDARY_SHADOW,textShadow:this.themeProps.BUTTON_SECONDARY_TEXT_SHADOW,":hover:not([disabled])":{color:this.themeProps.BUTTON_SECONDARY_HOVER_COLOR,background:this.themeProps.BUTTON_SECONDARY_HOVER_BACKGROUND,boxShadow:this.themeProps.BUTTON_SECONDARY_HOVER_SHADOW,borderColor:this.themeProps.BUTTON_SECONDARY_HOVER_BORDER_COLOR}}}}),$C),iS=ct(tS)(eS=class BlinkButton extends gg{getDefaultOptions(e){return t({},super.getDefaultOptions(e),{type:0})}extraNodeAttributes(e){const{styleSheet:t}=this;0===this.options.type?e.addClass(t.primaryButton):e.addClass(t.secondaryButton)}tempDisable(e){this.disable(),this.attachTimeout((()=>this.enable()),e)}})||eS;var nS,rS,sS;let oS=(nS=class PanelActionButtonStyle extends tS{constructor(){super(...arguments),i(this,"panelActionButtonStyle",rS,this)}},rS=n(nS.prototype,"panelActionButtonStyle",[Dp],{configura:"100%",maxWidth:300},tm.actionButtonStyle)}}),nS),aS=ct(oS)(sS=class PanelActionButton extends(dt.Primitive(iS,"a")){extraNodeAttributes(e){super.extraNodeAttributes(e),e.addClass(this.styleSheet.panelActionButtonStyle)}onMount(){super.onMount(),setTimeout((()=>{this.redraw()})),this.addClickListener((()=>Ze(Me)))}})||sS;function lS(e,t){t.preventDefault(),t.stopPropagation(),t.returnValue=!1;const{gateType:i,inlineFlow:n}=tm,{panelType:r}=e;i===w.popup||n?(tm.iframeParams.skipCTA=!0,_f.updateActiveFlow(r)):YC(r,{skipCTA:!0})}function cS(e,i){return(n,r)=>(n=t({label:tm.iframeParams.buttonText,journeyAlias:tm.iframeParams.journeyAlias,testId:"panelActn<t;n++)i[n]=arguments[n];return lS(e,...i)}),null!=n.href&&(Ob(n,"href"),n.onClick=Pb,n.newTab&&(n.target="_blank")),n.link?dt.createElement(PanelLink,n,r):dt.createElement(aS,n,r))}var uS,hS,dS;let pS=(uS=class LoginFooterStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",hS,this)}},hS=n(uS.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.TEXT_SECONDARY_COLOR,textAlign:"center",width:"100%",margin:"18px 0px",fontSize:this.themeProps.FONT_SIZE_LARGE}}}),uS),mS=ct(pS)(dS=class Logtions(){return{label:"",linkLabel:Vt.logIn}}render(){const{label:e,linkLabel:t}=this.options;return[e||Vt.alreadyHaveAnAccount," "(PanelLink,{value:t,onClick:e=>lS(_f.auth,e)})]}onMount(){super.onMount(),this.attachListener(Ab,Eb.EventTypes.AUTHENTICATION_CHANGE,(()=>this.redraw()))}})||dS;class PromptManageAccountButton extends PanelLink{getDefaultOptions(){return t({},super.getDefaultOptions(),{label:Vt.manageMyAccount,onClick:()=>qC()})}}var gS,bS,fS;let yS=(gS=class PanelTextStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",bS,this)}},bS=n(gS.prototype,"container",[Dp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({color:this.themeProps.TEXT_SECONDARY_COLOR,width:"100%",margin:"18px 0px",fontSize:this.themeProps.FONT_SIZE_LARGE,textAlign:()=>ve()||tm.gateType===w.banner?"left":"center"},tm.textStyle)}}),gS),CS=ct(yS)(fS=class PanelText extends dt.Element{setOptions(e){return Array.isArray(e.children)&&!e.children.length&&(e.children=tm.iframeParams.text||[]),Array.isArray(e.children)&&1===e.children.length&&(e.children=e.children[0]),(se(e.children)||e.children instanceof dt.TextElement)&&(e.children=e.children.toString().split("\n").map((e=>dt.createElement("div",{style:{minHeight:"1em"}},dt.createElement(MessageElement,{message:e}))))),super.setOptions(e)}})||fS;function SS(e,i,n,r){Ze(xe,t({flowType:e,flowCheckpoint:i},n)),mp.sendToSDK(hp.FLOW_CHECKPOINT,{event:t({flowType:e,flowCheckpoint:i},n),extra:r})}class BaseFlowHandler extends Dispatchable{sameAsNewOptions(e){const{skipCTA:t,editRecurring:i}=tm,n=this.skipCTA===t||this.skipCTA;return tskipCTA,this.editRecurring=tm.editRecurring}makeFlowPlan(e){return e||(e=this.getFlowPlan()),new FlowPlan(e,(()=>this.finalize()))}}var ES,AS,wS,TS,vS,OS,DS,RS,PS,IS,LS,NS,_S,xS,MS,BS,kS;let US=(ES=Pt(Date),AS=Pt(Date),wS=Pt(qr),TS=Pt("Merchant"),vS=Pt("User"),OS=Pt("MerchantUser"),DS=Pt("MerchantConversion"),RS=Pt("Payment"),PS=class Purchase extends MoneyObject{constructor(){super(...arguments),i(this,"createdAt",IS,this),i(this,"finalizedAt",LS,this),i(this,"status",NS,this),i(this,"merchant",_S,this),i(this,"user",xS,this),i(this,"merchantUser",MS,this),i(this,"conversiontle(){return this.title||`Order ${this.id}`}isRefundable(){var e;return null==(e=this.payment)?void 0:e.isAutomatic}},IS=n(PS.prototype,"createdAt",[ES],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),LS=n(PS.prototype,"finalizedAt",[AS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),NS=n(PS.prototype,"status",[wS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_S=n(PS.prototype,"merchant",[TS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xS=n(PS.prototype,"user",[vS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),MS=n(PS.prototype,"merchantUser",[OS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),BS=n(PS.prototype,"conversion",[DS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kS=n(PS.prototype,"payment",[RS],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),PS);const HS=Ct("Purchase",US,{dependencies:["MerchantConversion"]});async function zS(e){const t=await Zt.post("/payments/purchase_product",e);return HS.loadObject(t)}const FS=new clashis.lastRequest=null,this.lastResponse=null}init(){mp.addIfet{offerId:t}=e;this.manualPaymentOfferId=t})),mp.addListener(hp.PAYMENT_REQUEST,(e=>{e.offerId===this.manualPaymentOfferId?(this.manualPaymentOfferId=null,this.requestPayment(e,!0).then()):this.requestPayment(e,!1).then()}))}getProduct(e){if(e.productId)return em.get(e.productId);const t=em.filterBy({allowArbitrarySubproducts:!0});if(1!==t.length)throw`Can't automatically fill in product, number of products with arbitrary subproduct: ${t.length}`;return t[0]}normalizeRequest(e){const{amount:t,currencyIsoCode:i,currencyId:n,currency:r,resourceId:s,comment:o}=e,a=fr.getMerchant(),l=jt.get(r||n||i)||a.getCurrency(),c=this.getProduct(e);return{comment:o,resourceId:s,product:c,amount:new Money(t,l)||c.getAmount()}}async makePaymentRequest(e,i){const{amount:n,product:r,resourceId:s,comment:o}=this.normalizeRequest(e),a=t({merchantId:fr.getMerchant().id},n.toJSON(),{useWalletFunds:"yes",isAutomatic:i,products:{entries:[{productId:r.id,subproductId:s}]}},o);return await zS(a)}async requestPayment(e,t){void 0===t&&(t=!1),this.lastRequest=e;try{const i=await this.makePaymentRequest(e,t);this.lastResponse={request:e,response:i}}catch(t){this.lastResponse={request:e,error:t}}mp.sendToSDK(hp.PAYMENT_RESPONSE,this.lastResponse)}remakeLastPaymentAfterFundsAdded(){this.autopayAfterReloadHandler&&this.autopayAfterReloadHandler.remove(),this.autopayAfterReloadHandler=this.attachListenerOnce(Xr,"create",(()=>{this.attachListenerOnce(Dispatcher.Global,"balanceAnimationFinished",(()=>{this.autopayAfterReloadHandler=null,this.requestPayment(this.lastRequest,!1)}))}))}};class PaywallPurchaseFlowHandler extends BaseFlowHandler{constructor(){super(...arguments),this.panelType=A.payment}async enqueueShittyOldPlan(){await _f.auth.promptIfNeeden window.localStorage,!1}catch(e){return!0}})()&&mp.sendToIFrames(hp.MAKE_NEXT_PAYMENT_MANUALLY,{offerId:e.offerId}),mp.sendToSDK(hp.MAKE_PAYMENT_VIA_SDK,{request:e})}getFlowPlan(){return this.enqueueShittyOldPlan().then(),null}static getActionButtonLabel(){const{paymentDetails:e}=tm.iframeParams;if(!e)return"Read article";const{amount:t}=FS.normalizeRequest(e);return Vt.readForAmount(t)}}class PanelImage espatcher.Global.dispatch("iframeSizeChange")))}}var VS,GS,WS,jS;function YS(e){return(i,n)=>Ab.isAuthenticated()?null:dt.createElement(mS,t({},i,{label:e}),n)}let KS=(VS=class CustomContentPanelStyle extends MC{constructor(){super(...arguments),i(this,"container",GS,this),i(this,"content",WS,this)}},GS=n(VS.prototype,"container",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({padding:null,width:"100%"},tm.iframeParams.basePanelStyle)}}),WS=n(VS.prototype,"content",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:null,padding:null}}}),VS),ZS=ct(KS)(jS=class CustomContentPanel extends UC{getDefaultOptions(){return t({},super.getDefaultOptions(),{hasHeader:!1})}render(){const e=new Map([...["div","span","p","i","nav","strong","em","br","b","hr","ul","ol","li","code","var","h1","h2","h3","h4","","parsererror"].map((e=>[e,dt.Primitive(e)])),["If",dt.Primitive("div")],["Style",StyleElement],["PanelLink",PanelLink],["Link",PanelLink],["PanelImage",PanelImage],["Text",CS],["Logo",Fy],["MessageElement",MessageElement],["SubscribeButton",cS(_f.subscribe)],["DonateButton",cS(_f.donation)],["GiftSubscriptionButton",cS(_f.giftSubscription)],["NewsletterButton",cS(_f.newsletter)],["PurchaseButton",cS(_f.payment,{label:()=>PaywallPurchaseFlowHandler.getActionButtonLabel()})],["AuthButton",cS(_f.auth)],["LinkButton",cS(null)],["Close",nC],["CloseButton",cS(null,{onClick:()=>Xy()})],["LoginFooter",YS()],["SubscribeLoginFooter",YS("Already a subscriber?")],["DonateLoginFooter",YS("Already a donor?")],["PurchaseLoginFooter",YS("Already purchased?")],["PromptInlineUserDashboard",PromptManageAccountButton],["PromptManageAccountButton",PromptManageAccountButton],["PoweredByBlink",jC]]);return Ib(tm.iframeParams.contentAST,e)}onMount(){super.onMount(),this.attachListener(tm,"customPanelContentUpdate",(()=>this.redraw()))}})||jS;function qS(){if(ve())return 0;const e=72+tm.positionBottom;return 680+e>document.documentElement.clientHeight?752<=document.documentElement.clientHeight?72:0:e}const $S=e=>{const t=(e,t)=>{const i=["touchstart","touchend","click","mousedown"];for(const n of)};t(document.body,(e=>{e.stopPropagation()})),t(document,(()=>{e===E.panel&&Router.Global.getActive()instanceof ZS&&Router.getCurrentPath()!==A.empty&&tm.iframeParams.scrimClickCollapse&&Xy(),e===E.widget&&(tm.activePanel||Xy())}))},XS=new class WidgetAnimation{constructor(){this.lastHeight=0,this.lastHeightDelta=0,this.collapsed=!0,this.activeElementScrollTimeout=null,this.updateThrottler=new CallThrottler({throttle:50}),this.updateThrottled=this.updateThrottler.wrap((()=>{this.handleAnimation()})),Dispatcher.Global.addListener("widgetAnimationUpdateHeight",(e=>this.updateHeight(e)))}setWidgetStyle(e){Ee.appInstance.animationStyleDispatcher.dispatch(e),mp.sendToSDK(hp.TRANSITION_CHANGE,{transitioning:!0}),setTimeout((()=>{mp.sendToSDK(hp.TRANSITION_CHANGE,{transitioning:!1})}),v)}initListeners(){as.addChangeListener((()=>this.updateThrottled()));let e=ve();window.addEventListener("resize",(()=>{"INPUT"===document.activeElement.tagName&&(clearTimeout(this.activeElementScrollTimeout)tiveElement.scrollIntoView({block:"center"})),200)),ve()!==e&&(e=ve(),this.updateThrottled())})),Ab.onAuthenticationChange((()=>this.handleAnimation()))}computeStyle(e){if(e){const e=as.getPreferences(),t=e&&e.alwaysShowBalance?114:52;return Ab.isAuthenticated()?{width:t+"px",borderRadius:"40px",right:Pe()+"px",transform:"translate(0, 0)"}:{}}return Ab.isAuthenticated()?t({width:"360px",borderRadius:"12px"},ve()?{right:"50%",transform:"translate(180px, 0)"}:{right:Pe()+"px",transform:"translate(0, 0)"}):{}}handleAnimation(e){void 0===e&&(e=null),null==e&&null==this.collapsed||(null==e&&(e=this.collapsed),this.setWidgetStyle(this.computeStyle(e)),this.collapsed=e)}setBodyHeight(e){Ab.isAuthenticated()&&this.setWidgetStyle({height:e+"px"})}repositionWidget(){Ab.isAuthenticated()&&setTimeout((()=>{const e=window.innerHeight,i=this.lastHeight+this.lastHeightDelta,n=(e-i)/2,{positionBottom:r,widgetVisible:s}=tm;let o;o=this.collapsed||Wn()||!ve()?this.collapsed?{maxHeight:i+"px",bottom:s?r+"px":""}:{maxHeight:e+"px",bottom:s?qS()+"px":""}:n>=100?{bottom:"100px"}:n>=12?{bottom:`calc(50% - ${i/2}px)`}:{bottom:"12px"},this.setWidgetStyle(t({},o,{maxHeight:e-24+"px"}))}))}updateHeight(e){if(e===this.lastHeight)return;const t=e+this.lastHeightDelta;this.lastHeight=e,this.setBodyHeight(t),this.repositionWidget()}};class AsyncAggregateDispatcher extends Dispatcher{constructor(e){let{listener:t,changeDispatchers:i}=e;super(),this.cleanupJobs=new CleanupJobs,this.willDispatchEvent=!1;for(const e of i||[])this.attachChangeDispatcher(e);t&&this.addListener(t)}attachChangeDispatcher(e){const t=e.addChangeListener((()=>this.dispatch()));this.cleanupJobs.add(t)}attachDispatcher(e,t){const i=e.addListener(t,(()=>this.dispatch()));this.cleanupJobs.add(i)}dispatch(){this.willDispatchEvent||(this.willDispatchEvent=!0,queueMicrotask((()=>{suveAllListeners(),this.cleanupJobs.cleanup()}}function JS(e){const t=fr.merchantId;return e.filter((e=>e.merchantId===t))}function QS(e){const t=Qb.getUserId();return(e=JS(e).filter((e=>e.userId===t))).length?e.sort(((e,t)=>t.createdAt-e.createdAt))[0]:null}const eE=new class IFrameUserDataService extends Dispatchable{constructor(){super(),this.userAddressTotalCount=null,this.paymentMethodPublicCount=null,this.paymentMethodPrimaryExists=null,this.addCleanupJob(new AsyncAggregateDispatcher({listener:()=>this.dispatchChange(),changeDispatchers:Exists,this.canEditProfile=e.canEditProfile}))}getExtraPaymentMethodCount(){return this.paymentMethodPublicCount?Math.max(this.paymentMethodPublicCount-Nr.getAvailablePaymentMethods().length,0):0}getExtraUserAddressCount(){return this.userAddressTotalCount?Math.max(this.userAddressTotalCount-Au.all().length,0):0}hasPrimaryPaymentMethod(){return this.paymentMethodPrimaryExists}getLatestDonation(){return QS(nh.all())}getLatestOneTimeDonation(){return QS(nh.getOneTime())}getActiveRecurringDonation(){return QS(nh.filter((e=>e.isRecurring()&&e.isActive()&&!e.iiveSubscription(){return QS(Ac.getActive())}getGiftSentActiveSubscriptions(){}getMerchantUser()AutoPayEnabledForMerchant(fr.getMerchant())}};var tE;let iE=(tE=class DonationFlowHandler extends BaseFlowHandler{constructor(){super(...arguments),this.panelType=A.donation,this.previouslyCanceledDonation=null}getPaymentAndDonationSteps(){return _f.paymentMethod.init({continueLabel:Vt.finalizePayment,scope:Nr.Scope.PRIVATE}),[_f.paymentAndDonationDetails]}getFlowPlan(){const{editRecurring:e,skipCTA:t}=tm;if(!t)return Router.changeToCustomPanel(),null;const i=_f.donation.getActiveDonation();return e&&i?(_f.paymentMethod.init({entry:i,savePaymentMethod:!0,selectedValue:i.getPaymentMethod(),continueLabel:Vt.updatePaymentMethod,scope:Nr.Scope.PRIVATE}),_f.donationDetails.updateFromDonation(i),Router.changeURL(dy),null):[_f.auth,...this.getPaymentAndDonationSteps(),_f.address.init({shouldPrompt:()=>this.shouldCollectAd.getDonationOffer().shouldCollectAddress()}async callDonateEndpoint(e){const t=fr.isCDSPaymentMethod()?sh:rh,i=await t(e);return(i.isActive()||i.isFinished())&&SS("donation",N,{donationId:i.id,offerId:i.recurringOfferId,amount:i.getPrice().toMainUnitString({includeSymbol:!1}),currency:i.currency.isoCode,recurring:i.isRecurring(),frequency:i.frequency.toString()}),i}async getPayload(){const e=t({},_f.donationDetails.getPayload(),await _f.paymentMethod.getPayload());return this.shouldCollectAddress()&&(e.userAddressId=_f.address.selectedValue.id),e}async finalize(){const e=await this.getPayload();e.recurringOfferId=_f.donationDetails.getDonationOffer().id,Ze(He,t({},_f.paymentMethod.maskPayload(e),{isCustomAmount:_f.donationDetails.isDonationAmountCustom()}));try{await this.callDonateEndpoint(e)}catch(e){return _f.paymentMethod.update({paymentError:e,retryPayment:()=>this.finalize()}),void Router.changeURL(ly)}Router.changeURL(hy)}async cancelActiveDonation(){const e=this.getActiveDonation();await ah(e),this.previouslyCanceledDonation=e,Router.changeURL(gy)}async updateDonation(){const e=this.getActiveDonation(),t=await this.getPayload();if(fr.isCDSPaymentMethod()){var i,n;if(!t.paymentInfo){await _f.paymentMethod.prompt({scope:Nr.Scope.PRIVATE});const e=await _f.paymentMethod.getPayload();Object.assign(t,e)}Object.assign(t,{userAddressId:(null==(i=e.getShippingAddress())?void 0:i.id)||(null==(n=Au.all()[0])?void 0:n.id),frequency:e.frequency}),await async function(e){void 0===e&&(e={});const t=await Zt.post("/external_providers/edit_donation_with_cds",e);return nh.loadObject(t)}(t)}else await oh(e,t);Router.changeURL(py)}},n(tE.prototype,"finalize",[yb],Object.getOwnPropertyDescriptor(tE.prototype,"finalize"),tE.prototype),n(tE.prototype,"cancelActiveDonation",[yb],Object.getOwnPropertyDescriptor(tE.prototype,"cancelActiveDonation"),tE.prototype),n(tE.prototype,"updateDonation",[yb],Object.getOwnPropertyDescriptor(tE.prototype,"updateDonation"),tE.prototype),tE);var nE,rE,sE;let oE=Wt(((rE=class FlowInputIntent extends BaseEnum{}).CHOOSE_VALUE=void 0,rE.ADD_VALUE=void 0,rE.EDIT_VALUE=void 0,nE=rE))||nE,aE=(n((sE=class BaseFlowStep extends Dispatcher{constructor(e){void 0===e&&(e={}),super(e),this.shouldPrompt=()=>!0,this.selectedValue=null,this.inlineSubflow=!1,this.noHistory=!1,this.inputIntent=oE.CHOOSE_VALUE,this.continueLabel=Vt.continue,this.onSelectSuccess=fe,this.update(e)}update(e,t){return void 0===t&&(t=!0),Odispatch(),this}getDefaultFields(){return{}}getFieldsToReset(){const e=new this.constructor;e.getDefaultFields(),this.selectedValue&&delete e.selectedValue;for(const i of Object.keys(e)){var t;null!=(t=this.initOptions)&&t.hasOwnProperty(i)&&delete e[i]}return e}init(e){return this.initOptions=e||{},this.update(this.getFieldsToReset(),!1),this.update(e,!1),this.flowHandle={}),this.update(e),this.onSelectSuccess()}async prompt(e){return this.flowHandlerWithInit!==_f.activeFlowHandler&&(this.flowHandlerWithInit=_f.activeFlowHandler,this.update(this.getFieldsToReset(),!1)),e&&(this.lastPromptOptions=e,this.update(e)),new Promise((e=>{this.onSelectSuccess=()=>{(this.noHistory||this.inlineSubflow)&&Router.localHistory.pop(),e(this.selectedValue),this.inlineSubflow&&Router.onPopState()},this.beforeShowPanel(),this.showPanel()}))}enterNewValue(){this.inputIntent=oE.ADD_VALUE,this.showPanel()}insideNewValue(){var e;const t=(null==(e=this.lastPromptOptions)?void 0:e.inputIntent)||oE.CHOOSE_VALUE;return this.inpunputIntent=oE.CHOOSE_VALUE,this.showPanel()}async selectValue(e){e&&(this.selectedValue=e,this.insideNewValue()?this.exitNewValue():await this.onSelectSuccess())}canGoBack(){if(this.insideNewValue())return!0;const e=Router.getHistoricPath(-1);return e&&"/empty"!==e&&"empty"!==e}goBack(){this.insideNewValue()?this.exitNewValue():_f.back()}renderBackButton(){return this.canGoBack()?dt.createElement(qf,{onClick:()=>this.goBack()}):null}getContinueButtonLabel(e){return void 0===e&&(e={}),e[this.inputIntent]||this.continueLabel||Vt.continue}haveOptionsAvailable(){return this.selectedValue}getInputComponentClass(e){let{inputIntent:t}=this;return(t===oE.CHOOSE_VALUE&&!this.haveOptionsAvailable()||t===oE.EDIT_VALUE)&&(t=oE.ADD_VALUE),e[t]}beforeShowPanel(){}showPanel(){throw Error("Not Implemented")}}).prototype,"selectValue",[yb],Object.getOwnPropertyDescriptor(sE.prototype,"selectValue"),sE.prototype),sE);var lE;const cE="subscribe",uE="editSubscription",hE="giftSubscription";let dE=(lE=class SubscriptionPlanFlowStep extends aE{constructor(){super(...arguments),this.haveLoadedDefaults=!1,this.subscriptionPlanState=cE,this.discountCode=null,this.applyPolicy=null,this.shareName=!0,this.discountCodeMap=new Map,this.instantChangeDiscountCodeMap=new Map,this.pendingRequests=0}get selectedOffer(){return this.selectedValue}userHasEquivalentSubscriptionToOffer(e){const t=eE.getActiveSubscription();return!!t&&(!e||t.billingPlan===e.billingPlan&&t.coverage===e.coverage)}userHasEquivalentSubscriptionToSelected(){return null==this.selectedValue||this.userHasEquivalentSubscriptionToOffer(this.selectedValue)}async fetchSubscriptionEditPrices(e){this.pendingRequests+=1;try{const{recurringOffers:t}=await async function(e){return void 0===e&&(e={subscriptionId:null,discountCode:null,deliveryAddressId:null}),Zt.get("/subscriptions/calculate_update_subscription_price",e)}({discountCode:this.discountCode,deliveryAddressId:null==e?void 0:e.id,subscriptionId:eE.getActiveSubscription().id});this.instantChangeDiscountCodeMap.clear(),this.discountCodeMap.clear();for(const e of t){const t=null==e.recurringOfferId?null:Wo.get(e.recurringOfferId);"instantly"===e.applyPolicy?this.instantChangeDiscountCodeMap.set(t,e):this.discountCodeMap.set(t,e)}}catch(e){this.update({discountCode:null})}finally{this.pendingRequests-=1,this.pendingRequests||this.dispatch()}}async checkDiscountCode(e){this.pendingRequests+=1,this.discountCodeMap.clear();try{const{recurringOffers:t}=await async function(e){return void 0===e&&(e={discountCode:null,merchantId:null,deliveryAddressId:null}),Zt.get("/subscriptions/calculate_subscription_price",e)}({discountCode:this.discountCode,merchantId:fr.merchantId,deliveryAddressId:null==e?void 0:e.id});for(const e of t)this.discountCodeMap.set(Wo.get(e.recurringOfferId),e)}catch(e){}finally{this.pendingRequests-=1,this.dispatch()}}getDiscountInfo(e){return this.discountCodeMap.get(e)}getSubscriptionOfferPrice(e){const t=this.getDiscountInfo(e);if(t){const{discountedBeforeTaxesPrice:i,discountValue:n}=t;return n?e.formatPrice(i):e.getPrice()}return e.getPrice()}getDiscountInfoOnInstantChangePolicy(e){return this.instantChangeDiscountCodeMap.get(e)}async fetchPrices(e){void 0===e&&(e=_f.address.selectedValue),this.subscriptionPlanState===uE?await this.fetchSubscriptionEditPrices(e):await this.checkDiscountCode(e)}showPanel(){Router.changeURL(sy)}},n(lE.prototype,"fetchPrices",[yb],Object.getOwnPropertyDescriptor(lE.prototype,"fetchPrices"),lE.prototype),lE);var pE,mE;let gE=(mE=class SubscriptionFlowHandler extends BaseFlowHandler{constructor(){super(...arguments),this.panelType=A.subscribe}getFlowPlan(){if(eE.getActiveSubscription())return Router.changeURL(by),null;if(_f.subscriptionPlan.init({subscriptionPlanState:cE,discountCode:tm.iframeParams.selectedDiscountCode}),_f.subscriptionPlan.discountCode&&_f.subscriptionPlan.fetchPrices().then(),tm.iframeParams.selectedSubscriptionOfferId){const e=Wo.get(tm.iframeParams.selectedSubscriptionOfferId);e?(_f.subscriptionPlan.selectedValue=e,_f.subscriptionPlan.shouldPrompt=()=>!1):console.warn("Invalid subscription offerId passed in",tm.iframeParams.selectedSubscriptionOfferId)}return[_f.subscriptionPlan,_f.auth,_f.address.init({shouldPrompt:()=>_f.subscriptionPlan.selectedValue.shouldCollectAddress(),continueLabel:Vt.reviewOrder}),_f.subscriptionReview,_f.paymentMempt:()=>null==_f.paymentMethod.selectedValue,scope:Nr.Scope.PRIVATE})]}async finalize(){const e=await this.getPayload();Ze(ze,{recurringOfferId:e.recurringOfferId});let t=null;try{const i=fr.isCDSPaymentMethod()?Tc:wc;t=await i(e)}catch(e){return _f.paymentMethod.update({paymentError:e}),void Router.changeURL(ly)}SS("subscription",N,{subscriptionId:t.id,offerId:t.recurringOfferId,coverageId:t.coverageId,amount:t.getPrice().toMainUnitString({includeSymbol:!1}),currency:t.currency.isoCode}),Router.changeURL(yy)}async getPayload(){const e=_f.address.selectedValue,{discountCode:i}=_f.subscriptionPlan,n=_f.subscriptionPlan.selectedValue,r=_f.subscriptionPlan.getDiscountInfo(n),s=t({recurringOfferId:n.id,discountCode:null!=r&&r.discountValue?i:null,metadata:{}},await _f.paymentMethod.getPayload());return n.shouldCollectAddress()&&(s.deliveryAddressId=e.id),fr.isMerchant(y)&&(s.metadata.shareName=_f.subscriptionPlan.shareName),s}},mE.subscriptionToCancel=null,n((pE=mE).prototype,"finalize",[yb],Object.getOwnPropertyDescriptor(pE.prototype,"finalize"),pE.prototype),pE);var bE;let fE=(bE=class GiftSubscriptionFlowHandler extends BaseFlowHandler{constructor(){super(...arguments),this.panelType=A.giftSubscription}getFlowPlan(){return[_f.subscriptionPlan.init({subscriptionPlanState:hE}),_f.auth,_f.giftSubscriptionDetails,_f.address.init({shouldPrompt:()=>_f.subscriptionPlan.selectedValue.shouldCollectAddress(),continueLabel:Vt.reviewOrder}),_f.subscriptionReview,_f.paymentMethod.init({savePaymentMethod:!0,scope:Nr.Scope.PRIVATE})]}async finalize(){try{const e=await _f.subscribe.getPayload();Object.assign(e.metadata,{gift:!0,giftFrom:_f.giftSubscriptionDetails.name,giftMessage:_f.giftSubscriptionDetails.message}),await wc(t({},e,{gift:!0,giftBeneficiaryEmailAddress:_f.giftSubscriptionDetails.beneficiaryEmailAddress}))}catch(e){return _f.paymentMethod.update({paymentError:e}),Router.changeURL(ly),!1}return Router.changeURL(Ay),!0}},n(bE.prototype,"finalize",[yb],Object.getOwnPropertyDescriptor(bE.prototype,"finalize"),bE.prototype),bE);var yE;let CE=(yE=class ShopFlowHandler extends BaseFlowHandler{constructor(){super(...arguments),this.panelType=A.shop}getFlowPlan(){return[_f.produ_f.productList.selectedValue.requiresAddress,continueLabel:Vt.reviewOrder}),_f.purchaseReview,_f.paymentMethod.init({savePaymentMethod:!0,scope:Nr.Scope.PRIVATE})]}async finalize(){const e=_f.productList.selectedValue,t={merchantId:fr.getMerchant().id,paymentMethodId:_f.paymentMethod.selectedValue.id,products:{entries:[{productId:e.id}]}},i=_f.address.selectedValue;i&&(t.deliveryAddressId=i.id),t.currencyId=e.currencyId,t.amount=e.amount+Ws(i,e.getShippingPrices()).amount;try{await zS(t)}catch(e){return _f.paymentMethod.update({paymentError:e}),void Router.changeURL(ly)}Router.changeURL(vy)}},n(yE.prototype,"finalize",[yb],Object.getOwnPropertyDescriptor(yE.prototype,"finalize"),yE.prototype),yE);class Batcher extends Dispatchable{constructor(e,t){let{timeout:i=20,maxBatchSize:n=64}=void 0===t?{}:t;super(),this.queue=[],this.timeoutHandler=null,this.processBatch=e,this.timeout=i,this.maxBatchSize=n}async handleBatch(){clearTimeout(this.timeoutHandler),this.timeoutHandler=null;const{queue:e}=this;this.queue=[],await this.processBatch(e)}process(e){this.queue.push(e),this.queue.length===this.maxBatchSize?this.handleBatch().then():this.timeoutHandler=this.timeoutHandler||setTimeout((()=>this.handleBatch()),this.timeout)}}var SE,EE,AE,wE,TE,vE,OE,DE,RE,PE,IE,LE,NE,_E,xE,ME,BE,kE,UE,HE,zE;let FE=Wt(((EE=class AudienceNewsletterFrequency extends BaseEnum{}).DAILY=void 0,EE.WEEKLY=void 0,EE.MONTHLY=void 0,EE.CUSTOM=void 0,SE=EE))||SE,VE=(AE=Pt("Merchant"),wE=Pt(String),TE=Pt(ri),vE=Pt(Boolean),OE=Pt(FE),DE=Pt(Array),RE=Pt(Date),PE=Pt(Boolean),IE=Pt(Array),LE=class MerchantAudience extends StoreObject{constructor(){super(...arguments),i(this,"merchant",NE,this),i(this,"name",_E,this),i(this,"visibility",xE,this),i(this,"isPublic",ME,this),i(this,"defaultFrequency",BE,this),i(this,"defaultFrequencyOffset",kE,this),i(this,"defaultSendTime",UE,this),i(this,"autosubscribeNewUsers",HE,this),i(this,"autosubscribeOnBenefitIds"etSize(){return this.size>=0?this.size:null}},NE=n(LE.prototype,"merchant",[AE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_E=n(LE.prototype,"name",[wE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xE=n(LE.prototype,"visibility",[TE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ME=n(LE.prototype,"isPublic",[vE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),BE=n(LE.prototype,"defaultFrequency",[OE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kE=n(LE.prototype,"defaultFrequencyOffset",[DE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),UE=n(LE.prototype,"defaultSendTime",[RE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),HE=n(LE.prototype,"autosubscribeNewUsers",[PE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zE=n(LE.prototype,"autosubscribeOnBenefitIds",[IE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),LE);const GE=new class MerchantAudienceStoreClass extends GenericObjectStore{constructor(){super("MerchantAudience",VE),this.statsBatcher=new Batcher((async e=>{const t=await async function(e){return Zt.get("/merchant/get_audience_stats",e)}({audienceIds:e.map((e=>e.id))});e.forEach((e=>{Object.assign(e,t[e.id]),e.dispatchChange()}))}))}allUnfiltered(){return super.all()}all(){var e;return Ms(this.allUnfiltered(),null==(e=Ee.iFrameState)?void 0:e.newsletter,((e,t)=>e.id==t||e.name==t))}enqueueLoadStats(e){null==e.size&&(e.size=-1,this.statsBatcher.process(e))}};var WE,jE,YE,KE,ZE,qE,$E,XE,JE,QE,eA,tA,iA,nA,rA,sA,oA,aA,lA;let cA=Wt(((jE=class MerchantAudienceMemberStatus extends BaseEnum{}).SELF_SUBSCRIBED=void 0,jE.MANUALLY_SUBSCRIBED=void 0,jE.AUTO_SUBSCRIBED=void 0,jE.SELF_UNSUBSCRIBED=void 0,jE.MANUALLY_UNSUBSCRIBED=void 0,jE.AUTO_UNSUBSCRIBED=void 0,jE.RULE_SUBSCRIBED=void 0,WE=jE))||WE;const uA=[cA.SELF_SUBSCRIBED,cA.MANUALLY_SUBSCRIBED,cA.AUTO_SUBSCRIBED,cA.RULE_SUBSCRIBED];cA.SELF_UNSUBSCRIBED,cA.MANUALLY_UNSUBSCRIBED,cA.AUTO_UNSUBSCRIBED;let hA=(YE=Pt("Merchant"),KE=Pt("MerchantAudience"),ZE=Pt("UserProfile"),qE=Pt(cA),$E=Pt(Date),XE=Pt(Date),JE=Pt(Date),QE=Pt("MerchantConversion"),eA=class MerchantAudienceMember extends StoreObject{constructor(){super(...arguments),i(this,"merchant",tA,this),i(this,"audience",iA,this),i(this,"user",nA,this),i(this,"status",rA,this),i(this,"unsubscribedAt",sA,this),i(this,"subscribedAt",oA,this),i(this,"createdAt",aA,thscribed(){return uA.indexOf(this.status)>=0}serializeForSDK(){var e;const{audienceId:t,status:i,subscribedAt:n,unsubscribedAt:r,conversionId:s}=this;return{status:i.valueOf(),audienceId:t,subscribedAt:n,unsubscribedAt:r,conversionId:s,name:null==(e=this.audience)?void 0:e.name}}},tA=n(eA.prototype,"merchant",[YE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),iA=n(eA.prototype,"audience",[KE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nA=n(eA.prototype,"user",[ZE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rA=n(eA.prototype,"status",[qE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sA=n(eA.prototype,"unsubscribedAt",[$E],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oA=n(eA.prototype,"subscribedAt",[XE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),aA=n(eA.prototype,"createdAt",[JE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lA=n(eA.prototype,"conversion",[QE],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),eA);const dA=Ct("MerchantAudienceMember",hA),pA="subscribe";async function mA(e,t){void 0===t&&(t=!1);const i=await Zt.post("/users/update_newsletter_subscriptions",e,{noAuthToken:t});return Ab.hasAuthToken(i)&&(Ab.setAuthToken(i),Ab.dispatch(Eb.EventTypes.USER_DATA_AVAILABLE,i)),i}class ScriptResolver extends Dispatchable{constructor(e){super(),this.loaded=!1,this.jobs=[];let t=document.createElement("script");t.async=!0,t.src=e,t.onload=()=>this.onLoad(),document.getElementsByTagName("head")[0].appendChild(t)}onLoad(){this.loaded=!0;for(let e=0;e<this.jobs.lengthve(e){this.loaded?e(this):this.jobs.push(e)}}let gA=new Map;async function bA(e,t){let i=(e=K(e)).map((e=>async function(e){let t=gA.get(e);return t||(t=new),new Promise((function(e,i){t.resolve(e,i)}))}(e)));return Promise.all(i).then((function(){t&&t(...arguments)}))}async function fA(){return bA(["/nacl-fast.min.js"])}function yA(e){const t="0123456789ABCDEF";let i=[];for(const n of e)i.push(t[n>>4]),i.push(t[15&n]);return i.join("")}var CA;let SA=(n((CA=class EditSubscriptionFlowHandler extends BaseFlowHandler{getFlowPlan(){var e;const t=eE.getActiveSubscription();return[_f.subscriptionPlan.init({subscriptionPlanState:uE,selectedValue:t.recurringOffer,applyPolicy:Cc,discountCode:(null==(e=t.getDiscount())?void 0:e.getCionPlan.selectedValue.shouldCollectAddress(),selectedValue:t.getShippingAddress()}),_f.paymentMethod.init({selectedValue:t.getPaymentMethod(),savePaymentMethod:!0,scope:Nr.Scope.PRIVATE}),_f.editSubscriptionConfirmation]}async getPayload(){const e=eE.getActiveSubscription(),t={};if(_f.paymentMethod.selectedValue&&_f.paymentMethod.selectedValue!==e.getPaymentMethod()){const e=await _f.paymentMethod.getPayload();Object.assign(t,e)}return _f.address.selectedValue&&_f.address.selectedValue!==e.deliveryAddress&&(t.deliveryAddressId=_f.address.selectedValue.id),_f.subscriptionPlan.selectedValue&&_f.subscriptionPlan.selectedValue!==e.recurringOfferId&&(t.recurringOfferId=_f.subscriptionPlan.selectedValue.id),0===Object.keys(t).length?null:(t.subscriptionId=e.id,t.applyPolicy=_f.subscriptionPlan.applyPolicy,t)}async finalize(){const e=await this.getPayload();e&&(await vc(e),Router.changeURL(Ny))}}).prototype,"finalize",[yb],Object.getOwnPropertyDescriptor(CA.prototype,"finalize"),CA.prototype),CA);Object.assign(_f,{auth:new class AuthFlowStep extends aE{constructor(){super(...argume,this.shouldPrompt=()=>!Ab.isAuthenticated(),this.noHistory=!0}async promptIfNeeded(e){Qb.getUser()||await this.prompt(e)}showPanel(){if(Ab.isAuthenticated())return this.noHistory=!1,void this.onSelectSuccess();Router.changeURL(j),Zy.addAuthenticalectSuccess()}))}getFlowPlan(){remeAsNewOptions(e){return this.panelType===e}},electedValue||eE.getExtraUserAddressCount()}getDefaultFields(){this.selectedValue=Au.getDefault()}showPanel(){Router.changeURL(oy)}},paymentMethod:new class PaymentMethodFlowStep extends aE{constructor(){super(...arguments),this.continueLabel=Vt.finalizePayment,this.scope=Nr.Scope.PUBLIC,this.cardHolderName="",this.showSaveCardCheckbox=!0,this.entry=null,this.savePaymentMethod=!0,this.retryPayment=null,this.paymentError=null,this.altPayData=null}haveOptionsAvailable(){return!fr.isCDSPaymentMethod()&&(this.selFields(){this.selectedValue=Nr.getDefault()}getFieldsToReset(){const e=super.getFieldsToReset();return this.selectedValue&&delete e.cardHolderName,e}async beforeShowPanel(){fr.isCDSPaymentMethod()&&fA().then()}showPanel(){Router.changeURL(ay)}async extractPaymentInfoForCDS(){const{altPayData:e}=this;if(e)return`${e.provider.value}-${e.orderId}`;const{cardNumber:t,cardExpiry:i,cardCvv:n}=this.selectedValue||{};return async function(e,t){await fA();const i=btoa(JSON.stringify(e)),n=new Uint8Array(i.length);for(let e=0;e<i.length;e++)n[e]=i.charCodeAt(e);const r=nacl.box.keyPair(),s=nacl.randomBytes(nacl.box.nonceLength);return`${yA(nacl.box(n,s,function(e){let t=[];for(let i=0;i+1<e.length;i+=2)t.push((parseInt(e[i],16)<<4)+parseInt(e[i+1],16));return new Uint8Array(t)}(t),r.secretKey))};${yA(s)};${yA(r.publicKey)}`}({card_number:t,card_expiry:i,card_cvv:n},Ab.appSettings.blinkPaymentMethodEncryptionPublicKey)}async getPayload(){var e;return fr.isCDSPaymentMethod()?{paymentInfo:await this.extractPaymentInfoForCDS()}:{preferredPaymentMethodId:null==(e=this.selectedValue)?void 0:e.id}}maskPayload(e){return(e=t({},e)).paymentInfo&&delete e.paymentInfo,e}getPaymentErrorMessage(){var e;return this.paymentError&&9002===this.paymentError.code?"":(null==(e=this.paymentError)?void 0:e.message)||""}setAltPayOrderId(e,t){const i=e&&{provider:e,orderId:t};this.update({altPayData:i})}},subscriptionPlan:new dE,giftSubscriptionDetails:new clasmailAddress="",this.name="",this.message=""}showPanel(){Router.changeURL(Ey)}},subscriptionReview:new class SubscriptionReviewFlowStep extends aE{constructor(){super(...arguments),this.continueLabel=Vt.continueToPayment}async showPanel(){await _f.subscriptionPlan.fetchPrices(_f.address.selectedValue),Router.changeURL(fy)}},editSubscriptionConfirmation:new class EditSubscriptionConfirmationStep extends aE{async showPanel(){await _f.subscriptionPlan.fetchPrices(_f.address.selectedValue),Router.changeURL(Ly)}},donationDetails:new class DonationDetailsFlowStep extends aE{constructor(){super(...arguments),this.frequency=_s.ONE_TIME,this.donationAmount=0,this.donorCoversFees=!1}getDefaultFields(){const e=this.getDonationOffer(),t=eE.getActiveRecurringDonation();if(this.frequency=_s.ONE_TIME,e&&!t&&(e.hasAmountChoice()||(this.donationAmount=e.predefinedAmounts[0]),this.frequency=e.defaultFrequency||e.getFrequencyOptions()[0]),!this.donationAmount){const{predefinedAmounts:t,defaultPredefinedAmountIndex:i}=e;this.donationAmount=t[i]}}updateFromDonation(e){this.donorCoversFees=e.coversFees,this.frequency=e.freunt()}isValid(){return!!this.donationAmount}getDonationOffer(){const{merchantId:e}=fr;return $u.getAvailable().find((t=>t.merchantId===e))}getCurrency(){return this.getDonationOffer().getCurrency()}getOptionsForDonor(){const e=this.getDonationOffer(),{minAmount:t,maxAmount:i,allowCustomAmount:n}=e,r=eE.getActiveRecurringDonation(),s=e.getFrequencyOptions().filter((e=>e.isOneTime()||!r)),{allowUserToCoverFees:o}=tm.iframeParams,a=Array.from(e.predefinedAmounts);return n&&a.push(null),{donationOffer:e,currency:e.getCurrency(),frequencyOptions:s,allowOneTime:s.find((e=>e.isOneTime())),allowRecurring:s.find((e=>!e.isOneTime())),allowUserToCoverFees:o,minAmount:t,maxAmount:i,predefinedAmounts:a}}isDonationAmountCustom(){const{predefinedAmounts:e}=this.getDonationOffer();for(const t of e)if(t===this.donationAmount)return!1;return!0}getDonationFee(){const e=this.getDonationOffer().computeFeeFromAmount(this.donationAmount);return new Money(e,this.getCurrency())}getTotalAmount(){return this.donationAmount+(this.donorCoversFees?this.getDonationFee().amount:0)}formatAmou.frequency,coversFees:this.donorCoversFees}}getDonateComponentButtonLabel(){const e=this.getTotalAmount(),{frequency:t}=this;if(!e||!t)return Vt.donate;const i=this.formatAmount(e),n=t.isOneTime()?"":"/"+t.name.toLowerCase();return Vt.donateInlineFlowButton(i,n)}getEditDonationComponentButtonLabel(){return this.donationAmount?Vt.editDonationInlineFlowButton(this.formatAmount(this.getTotalAmount()),this.frequency.name.toLowerCase()):Vt.update}showPanel(){Router.changeURL(cy)}},paymentAndDonationDetails:new class PaymentAndDonateFlowStep extends aE{init(e){return _f.paymentMethod.init(e.paymentMethod),delete e.paymentMethod,_f.donationDetails.init(e.donationDetails),delete e.donationDetails,super.init(e)}async beforeShowPanel(){await _f.paymentMethod.beforeShowPanel(),await _f.donationDetails.beforeShowPanel()}showPanel(){Router.changeURL(uy)}},productList:new class ProductListFlowStep extends aE{getProducts(){const{products:e}=this.iframeParams,t=em.all();return e?Ms(t,e,((e,t)=>e.id==t||e.alias==t)):t}showPanel(){Router.changeURL(wy)}},purchaseReview:new class PurchaseReviewFlowStep extends aE{showPanel(){Router.changeURL(Ty)}},donation:new iE,subscribe:new gE,giftSubscription:new fE,editSubscription:new SA,payment:new PaywallPurchaseFlowHandler,shop:new CE,dashboard:new class DashboardFlowHandler extends BaseFlowHandler{constructor(){super(...arguments),this.panelType=.entries=null}getFlowPlan(){return[_f.auth]}getDashboardTabTypes(){const{dashboardTabs:e}=tm.iframeParams;if(e)return K(e);const t=fr.getMerchant();return $([t.allowSubscriptions&&A.subscribe,t.allowDonations&&A.doner,A.auth])}finalize(){Router.changeURL(Ry)}},newsletter:new class NewsletterFlowHandler extends BaseFlowHandler{constructor(){super(...arguments),this.panelType=A.newsletter}getNewsletters(){const e=K(tm.iframeParams.newsletter),t=GE.allUnfiltered().filter((e=>e.merter((t=>e.iname))):t.filter((e=>e.visibility===ri.PUBLIC))}isUserSubscribedToAllGivenNewsletters(){const e=this.getNewsletters(),t=dA.all(),i=e=>t.find((t=>t.audience===e&&t.isSubscribed()));for(const t of e)if(!i(t))return!1;return!0}getFlowPlan(){const{skipCTA:e}=tm;return e?Router.changeURL(Oy):this.isUserSubscribedToAllGivenNewsletters()?Router.changeURL(Dy):1===this.getNewsletters().length?Router.changeURL(Oy):Router.changeToCustomPanel(),null}},custom:new class CustomPanelFlowHandler extends BaseFlowHandler{constructor(){super(...a(){return n(e){this.flowPlan=e,this.flowPlan.prompt()},getCurrentStep(){returnowPlan.goToStep(e),this.flowPlan.prompt(!0)},back(){var e;Router.back(),null==(e=this.flowPlan)||e.promptPreviousStep().then((()=>{var e;null!=(e=this.flowPlan)&&e.isBeforeFirstStep()&&(this.activeFlowHandler=null)}))},renderBackButton(){return this.getCurrentStep().renderBackButton()},startPlanFromActiveHandler(){let e=this.activeFlowHandler.getFlowPlan();if(e){e instanceof FlowPlan||(e=new FlowPlan(e));for(const t of e.steps)t.flowHandler!==this.activeFlowHandler&&t.init({});this.startPlan(e)}},clearActiveFlow(){this.activeFlowHandler=null,delete this.flowPlan;for(const[e,t]of Object.entries(this)){if(t===_f.paymentMethod||t===_f.address)continue;if(!t||ie(t))continue;const i=t.constructor;this[e]=new i}},isFlowTypeEnabled(e){const t=fr.getMerchant();return{[A.auth]:!0,[A.custom]:!0,[A.dashboard]:!0,[A.payment]:t.allowPurchases,[A.shop]:t.allowPurchases,[A.donation]:t.allowDonations,[A.subscribe]:t.allowSubscriptions,[A.giftSubscription]:t.allowSubscriptions,[A.newsletter]:t.allowEmailing}[e]},updateActiveFlow(e){var t;void 0===e&&(e=tm.panelType),e===A.empty||null!=(t=this.activeFlowHandler)&&t.sameAsNewOptions(e)||(this.clearActiveFlow(),this.isFlowTypeEnabled(e)?tm.handleFlowInline()?(this.activeFlowHandler=this[e],this.activeFlowHandler instanceof BaseFlowHandler||this.activeFlowHandler===this.auth||(this.activeFlowHandler=this.custom),this.activeFlowHandler.saveInitialOptions(),this.startPlanFromActiveHandler()):Router.changeToCustomPanel():Router.changeURL(ny))}});class KeyEvent{constructor(e){this.event=e}is(e){return this.event.code===e||this.event.key===e}isArrowUp(){return this.is("ArrowUp")}isArrowDown(){return this.is("ArrowDown")}isArrowLeft(){return this.is("ArrowLeft")}isArrowRight(){return this.is("ArrowRight")}isEnter(){return this.is("Enter")}isSpace(){return this.is("Space")}isBackspace(){return this.is("Backspace")}isDelete(){return this.is("Delete")}isEscape(){return this.is("Escape")}isTab(){return this.is("Tab")}isDigit(){return 1===this.eveng(){return this.event.key||this.event.code}}var EA,AA,wA,TA;let vA=(EA=class InputStyle extends StyleSheet{constructor(){super(...arguments),i(this,"inputElement",AA,this),i(this,"checkboxInput",wA,this),i(this,"select",TA,this)}},AA=n(EA.prototype,"inputElement",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{transition:"border-color ease-in-out .15s, box-shadow ease-in-out .15s",padding:"0.4em 0.54em",background:this.themeProps.INPUT_BACKGROUND,border:()=>"1px solid "+this.themeProps.INPUT_BORDER_COLOR,borderRadius:this.themeProps.INPUT_BORDER_RADIUS,height:this.themeProps.INPUT_DEFAULT_HEIGHT,":focus":{outline:"0",borderColor:"#66afe9"}}}}),wA=n(EA.prototype,"checkboxInput",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block"}}}),TA=n(EA.prototype,"select",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),EA);var OA;let DA=ct(vA)(OA=class InputableElement extends dt.Element{extraNodeAttributes(e){super.extraNodeAttributes(e),e.addClass(this.styleSheet.inputElement)}isEqual(e,t){return e===t}setOptions(e){const t=this.options.initialValue;super.setOptions(e);const{initialValue:i}=this.options;null==t&&null==i||this.node&&!this.isEqual(i,t)&&this.setValue(i)}focusalValue:e}=this.options;e&&this.setValue(e)}addChangeListener(e){const t=()=>{e(this.getValue(),this)};return new CleanupJobs([this.addNodeListener("change",t),this.addNodeListener("input",t)])}addInputListener(e){return this.addNodeListener("input",e)}})||OA;class Input extends(dt.Primitive(DA,"input")){extraNodeAttributes(e){super.extraNodeAttributes(e),e.setAttribute("type",this.getInputType()||this.options.type)}getRawValue(){return this.node.value}getValue(){return this.getRawValue().trim()}setValue(e){null!=e?this.node.value=e:this.node.removeAttribute("value")}setOptions(e){const t=this.options.initialValue,i=this.options.value;if(super.setOptions(e),!this.node)return;const{initialValue:n,value:r}=this.options;n&&n!==t&&this.setValue(n),r&&r!==i&&this.setValue(r)}getInputType(){return null}addKeyUpListener(e){this.addNodeListener("keyup",e)}onMount(){this.setValue(this.options.value||this.options.initialValue)}}Input.domAttributesMap=new DOMAttributesMap(dt.Element.domAttributesMap,[["autocomplete"],["autofocus",{noValue:!0}],["formaction"],["maxLength",{domName:"maxlength"}],["minLength",{domName:"minlength"}],["name"],["placeholder"],["readonly"],["required"],["value"],["pattern"],["type"]]),class SubmitInput extends Input{getInputType(){return"submit"}}.domAttributesMap=new DOMAttributesMap(Input.domAttributesMap,[["formenctype"],["formmethod"],["formnovalidate"],["formtarget"]]),class NumberInput extends Input{getInputType(){return"number"}getValue(){const e=super.getValue();return e?parseFloat(e):null}}.domAttributesMap=new DOMAttributesMap(Input.t extends Input{getInputType(){return"tel"}}(class FileInput extends Input{getInputType(){return"file"}getFiles(){return this.node.files}getTotalSize(){let e=0;for(ceturn e}getFile(){return this.getFiles()[0]}getAsFormData(){let e=new FormData;for(let t ofme,t);return e}clear(){this.node.value=null}}).domAttributesMap=new DOMAttributesMap(Input.domAttributesMap,[["multipleFiles",{domName:"multiple",noValue:!0}],["fileTypes",{domName:"accept"}]]);class RawCheckboxInput extends Input{extraNodeAttributes(e){super.extraNodeAttributes(e),e.addClass(this.styleSheet.checkboxInput)}getInputType(){return"checkbox"}getValue(){return this.node.checked}setValue(e,t){this.node.checked=e,null!te=e,this.node&&(this.node.indeterminate=e)}getIndeterminate(){return this.options.indeterminate}render(){var e;super.render(),this.options.noStupid||this.options.value==this.getValue()&&this.getIndeterminate()==(null==(e=this.node)?void 0:e.indeterminate)||this.setValue(this.options.value,this.options.indeterminate)}}RawCheckboxInput.domAttributesMap=new DOMAttributesMap(Input.domAttributesMap,[["checked",{noValue:!0}]]),class RadioInput extends RawCheckboxInput{getInputType(){returode.checked}setValue(e){this.node.checked=e}}.domAttributesMap=new DOMAttributesMap(RawCheckboxInput.domAttributesMap,[["name"]]);class TextArea extends(dt.Primitive(DA,"textarea")){applyNodeAttributes(){super.applyNodeAttributes(),this.node.readOnly=this.options.readOnly||!1}setReadOnly(e){this.options.readOnly=e,this.node.readOnly=e}getValue(){return this.node.value}redraw(){super.redraw(),this.options.hasOwnProperty("valuistener(e){this.addNodeListener("keyup",e)}}var RA,PA,IA,LA,NA,_A,xA,MA,BA,kA;dt.Primitive(DA,"select");let UA=(RA=class BlinkInputStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",PA,this),i(this,"error",IA,this),i(this,"success",LA,this),i(this,"label",NA,this),this.message={position:"absolute",top:0,right:0,transform:"translateY(-100%)",paddingBottom:10,fontSize:this.themeProps.FONT_SIZE_SMALL,color:this.themeProps.SUCCESS_COLOR},i(this,"errorMessage",_A,this),i(this,"successMessage",xA,this),i(this,"inputContainer",MA,this),i(this,"input",BA,this)}},PA=n(RA.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:()=>ve()?16:14,marginTop:18,marginBottom:8,color:this.themeProps.INPUT_TEXT_COLOR}}}),IA=n(RA.prototype,"error",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderColor:this.themeProps.ERROR_COLOR,":hover":{borderColor:this.themeProps.ERROR_COLOR+" !important"}," input":{color:this.themeProps.ERROR_COLOR+" !important"}," input::placeholder":{color:this.themeProps.ERROR_COLOR+" !important"}}}}),LA=n(RA.prototype,"success",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderColor:this.themeProps.SUCCESS_COLOR,":hover":{borderColor:this.themeProps.SUCCESS_COLOR+" !important"}}}}),NA=n(RA.prototype,"label",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textAlign:"left",fontSize:this.themeProps.FONT_SIZE_SMALL,fontWeight:this.themeProps.FONT_WEIGHT_BOLD,color:this.themeProps.TEXT_SECONDARY_COLOR,marginBottom:8}}}),_A=n(RA.prototype,"errorMessage",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.message,{color:()=>this.themeProps.ERROR_COLOR}]}}),xA=n(RA.prototype,"successMessage",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.message,{color:()=>this.themeProps.SUCCESS_COLOR}]}}),MA=n(RA.prototype,"inputContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({width:"100%",position:"relative",fontSize:"inherit",height:this.themeProps.INPUT_DEFAULT_HEIGHT,background:this.themeProps.INPUT_BACKGROUND,borderRadius:this.themeProps.BASE_BORDER_RADIUS,border:()=>"1px solid "+this.themeProps.INPUT_BORDER_COLOR,":focus-within":{borderColor:this.themeProps.INPUT_BORDER_ACTIVE_COLOR},transition:"box-shadow 0.2s ease"},this.themeProps.MERCHANT_INPUT_STYLE)}}),BA=n(RA.prototype,"input",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{caretColor:this.themeProps.INPUT_TEXT_COLOR,overflow:"hidden",padding:".25rem 5px",paddingLeft:18,background:"transparent",border:"none !important",margin:0,fontSize:"inherit",outline:"none",color:()=>this.themeProps.INPUT_TEXT_COLOR+"!important",borderRadius:this.themeProps.BASE_BORDER_RADIUS,height:"100%",width:"100%",boxShadow:"none",backgroundClip:"padding-box !important",":-webkit-autofill":{boxShadow:()=>"0 0 0px 1000px "+this.themeProps.INPUT_BACKGROUND+" inset !important",color:()=>this.themeProps.INPUT_TEXT_COLOR+"!important","-webkit-text-fill-color":()=>this.themeProps.INPUT_TEXT_COLOR+"!important"},"::placeholder":{color:this.themeProps.INPUT_PLACEHOLDER_COLOR}}}}),RA),HA=ct(UA)(kA=class BlinkInput extends dt.Element{constructor(){super(...arguments),this.error=null,this.initialValue=""}getDefaultOptions(){return{onEnter:fe,onBlur:fe,onFocus:fe,onChange:fe,onInvalidInput:fe,onValidInput:fe,InputClass:Input,inputPattern:/\\*/,initialValue:null,inputAttributes:{},validators:[]}}setOptions(e){return e.inputAttributes=t({},this.getDefaultOptions(e).inputAttributes,e.inputAttributes||{}),super.setOptions(e)}getChildrenToRender(){const{styleSheet:e}=this,{success:i,label:n,inputAttributes:r,InputClass:s,initialValue:o}=this.options,a=this.options.error||this.error,l=this.themeProps.INPUT_USE_PLACEHOLDER_AS_LABEL,c={};l&&n&&(c.placeholder=String(n)),o!==this.initialValue&&(this.initialValue=o,c.value=o);let u=e.inputContainer,h=e.label,d=e.input;i&&(u+=e.success),a&&(u+=e.error);const p=!0!==i&&i,m=!0!==a&&a;return[n&&!l&&dt.createElement("div",{className:h},n),dt.createElement("div",{className:u},this.render(),dt.createElement(s,t({ref:"input",className:d},r,c)),dt.createElement("div",{className:e.successMessage},p),dt.createElement("div",{className:e.errorMessage},m))]}getValue(){var e;let t=(null==(e=this.input)?void 0:e.getValue())||"";return se(t)&&(t=t.trim()),t}setValue(e){this.inputturn 0===this.getValidationErrors().length}validate(){this.isValid()||(this.error=this.getValidationErrors()[0]||" ",this.redraw())}getValidationErrors(){return this.options.validators.filter((e=>{const{condition:t}=e;return!("function"==typeof t?t():t)})).map((e=>e.error))}isEmpty(){return 0===this.input.getValue().trim().length}clearError(){this.error=null,ts.selectionEnd=this.input.node.selectionEnd}initFocusListeners(){this.input.addNodeListener("blur",(()=>this.options.onBlur())),this.input.addNodeListener("focus",(e=>{if(this.saveSelection(),this.clearError(),this.options.onFocus(e),H.isMobileDevice()){const e=()=>{this.input.node!==document.activeElement||function(e){const t=e.node||e,{top:i,bottom:n}=t.getBoundingClientRect();for(let e=t;e&&e!==document;e=e.parentNode)if("auto"===window.getComputedStyle(e).overflowY&&e.scrollHeight!==e.offsetHeight){const t=e.getBoundingClientRect();return i>=t.top&&i<=t.bottom&&n>=t.top&&n<=t.bottom}return!0}(this)||this.node.scrollIntoView({behavior:"smooth"})};for(let t=0;t<=1800;t+=300)this.attachTimeout(e,t)}}))}initValidationListeners(){let e=this.getValue();const t=e=>{const{inputAttributes:t,inputPattern:i}=this.options,{min:n,max:r}=t;return!(!e.match(i)||null!=n&&parseFloat(e)<n||null!=r&&parseFloat(e)>r)};this.input.addNodeListener("input",(()=>{const i=this.getValue().toString();if(t(i))this.options.onValidInput(i),e=this.getValue(),this.saveSelection(),this.clearError();else if(!this.options.onInvalidInput(i)){this.setValue(e);try{this.input.node.setSelectionRange(this.selectionStart,thi e=this.getValue();this.options.onChange(e)}initKeyListeners(){this.input.addNodeListener("keydown",(()=>{this.saveSelection()})),this.input.addNodeListener("keyup",(e=>{this.saveSelection(),new KeyEvent(e).isEnter()?this.options.onEnter():this.dispatchChange()})),this.input.addNodeListener("paste",(()=>{tlidationListeners(),this.initKeyListeners()}onMount(){super.onMount(),this.initListeners()}})||kA;class OAuth2Client extends Dispatchable{constructor(e){super(),Object.assign(this,e),this.redirectUri=location.origin+this.redirectUri}setLoginCallback(e){this.onLoginCallback=e}login(){const e=new URLSearchParams;e.set("client_id",this.clientId),e.set("redirect_uri",this.redirectUri),Un()&&e.set("state",JSON.stringify({merchantId:fr.merchantId})),this.responseType&&e.set("response_type",this.responseType),this.scope&&e.set("scope",this.scope);const t=this.authServerUrl+"?"+e.toString();Zy.oauth2Login(t)}async handleLoginResponse(e){const t=e.get("code"),i=await Ab.loginAtEndpoint(this.loginEndpoint,{authCode:t,termsAgreed:!0});this.onLoginCallback(i)}}const zA={[P]:{client:OAuth2Client,clientId:g,redirectUri:"/login-redirect/google/",responseType:"code",scope:"email profile",authServerUrl:"https://accounts.google.com/o/oauth2/v2/auth",loginEndpoint:"/socialauth/google/"},[L]:{client:OAuth2Client,clientId:m,redirectUri:"/login-redirect/linkedin/",responseType:"code",scope:"r_liteprofile r_emailaddress",authServerUrl:"https://www.linkedin.com/oauth/v2/authorization",loginEndpoint:"/socialauth/linkedin/"},[R]:{client:OAuth2Client,clientId:b,redirectUri:"/login-redirect/facebook/",scope:"email",authServerUrl:"https://www.facebook.com/v6.0/dialog/oauth",loginEndpoint:"/socialauth/facebook/"},[I]:{client:class OAuth1Client extends Dispatchable{constructor(e){sginCallback(e){this.onLoginCallback=()=>e()}onRequestTokenCallback(e){const t=new URLSearchParams;t.set("oauth_token",e.oauthToken),Un()&&t.set("state",JSON.stringify({merchantId:fr.merchantId}));const i=this.authServerUrl+"?"+t.toString();Zy.oauth1TokenReceivedCallback(i)}async login(){Zy.oauth1Login();const e=await Ab.requestOAuthToken(this.requestTokenEndpoint);this.onRequestTokenCallback(e)}async handleLoginResponse(e){const t=e.get("oauth_token"),i=e.get("oauth_verifier");await Ab.loginAtEndpoint(this.loginEndpoint,{oauthToken:t,oauthVerifier:i,termsAgreed:!0}),this.onLoginCallback()}},clientId:f,redirectUri:"/login-redirect/twitter/",authServerUrl:"https://api.twitter.com/oauth/authorize",requestTokenEndpoint:"/socialauth/twitter/request_token/",loginEndpoint:"/socialauth/twitter/connect/"}},FA={};var VA,GA,WA,jA,YA,KA,ZA,qA,$A,XA,JA,QA,ew,tw,iw;let nw=(VA=class ExternalAuthButtonStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",GA,this),i(this,"iconContainer",WA,this)}Size(){}Level(){}},GA=n(VA.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{border:0,outline:0,fontSize:20,cursor:"pointer",userSelect:"none",position:"relative",boxShadow:this.themeProps.SOCIAL_BUTTON_SHADOW,display:"flex",alignItems:"center",fontWeight:()=>this.themeProps.FONT_WEIGHT_BOLD+" !important",padding:0,width:44,height:44,borderRadius:2,transition:this.themeProps.DEFAULT_TRANSITION,":hover":{boxShadow:this.themeProps.SOCIAL_BUTTON_HOVER_SHADOW},":disabled":{opacity:this.themeProps.BASE_DISABLED_OPACITY,cursor:"not-allowed",pointerEvents:()=>H.isMobileDevice()?"none":""}}}}),WA=n(VA.prototype,"iconContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",alignItems:"center",margin:"0 auto",">*":{transform:"scale(2)"},">*>*":{display:"flex",alignItems:"center"}}}}),VA),rw=ct(nw)(jA=class ExternalAuthButton extends gg{render(){const{description:e,IconClass:t}=this.options;return[dt.createElement("div",{className:this.styleSheet.iconContainer},dt.createElement(t,{size:16})),e]}startExternalAuth(){const{clientName:e}=this.options;Ze(Be,{provider:e});const t=function(e){if(e=e.toLowerCase(),FA[e])return FA[e];const t=zA[e],i=t.client;return FA[e]=new i(t),FA[e]}(this.options.clientName);t.setLoginCallkListener((()=>{this.startExternalAuth()}))}})||jA,sw=(YA=class FacebookButtonStyle extends nw{constructor(){super(...arguments),i(this,"container",KA,this)}},KA=n(YA.prototype,"container",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.SOCIAL_BUTTON_FACEBOOK_COLOR,backgroundColor:this.themeProps.SOCIAL_BUTTON_FACEBOOK_BACKGROUND}}}),YA),ow=(ZA=class GoogleButtonStyle extends nw{constructor(){super(...arguments),i(this,"container",qA,this)}},qA=n(ZA.prototype,"container",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.SOCIAL_BUTTON_GOOGLE_COLOR,backgroundColor:this.themeProps.SOCIAL_BUTTON_GOOGLE_BACKGROUND}}}),ZA),aw=($A=class LinkedInButtonStyle extends nw{constructor(){super(...arguments),i(this,"container",XA,this)}},XA=n($A.prototype,"container",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.SOCIAL_BUTTON_LINKEDIN_COLOR,backgroundColor:this.themeProps.SOCIAL_BUTTON_LINKEDIN_BACKGROUND,">*":{transform:"translateY(-2px)"}}}}),$A),lw=(JA=class TwitterButtonStyle extends nw{constructor(){super(...arguments),i(this,"container",QA,this)}},QA=n(JA.prototype,"container",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.SOCIAL_BUTTON_TWITTER_COLOR,backgroundColor:this.themeProps.SOCIAL_BUTTON_TWITTER_BACKGROUND}}}),JA);const cw={[P]:{icon:Mg,styleSheet:ow},[R]:{icon:Bg,styleSheet:sw},[I]:{icon:Ug,styleSheet:lw},[L]:{icon:kg,styleSheet:aw}};let uw=(ew=class ExternalAuthButtonsStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",tw,this)}},tw=n(ew.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"space-around",maxWidth:300,margin:"auto"}}}),ew),hw=ct(uw)(iw=tOptions(){return{externalAuthProviders:[]}}render(){let{externalAuthProviders:e}=this.options;p((e=>e.toLowerCase())).filter((e=>"cds"!==e)),e.map((e=>{const{icon:t,styleSheet:i}=cw[e];return dt.createElement(rw,{testId:e+"Button",style:{margin:0},clientName:e,styleSheet:i,IconClass:t})}))}})||iw;var dw,pw,mw,gw;let bw=(dw=class ExternalLinkStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",pw,this),i(this,"icon",mw,this)}},pw=n(dw.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontWeight:"initial"}}}),mw=n(dw.prototype,"icon",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:5,display:"inline-flex"}}}),dw),fw=ct(bw)(gw=class ExternalLink extends Rb{getDefaultOptions(){return t({},super.getDefaultOptions(),{newTab:!0,noIcon:!1,label:""})}getChildrenToRender(){return[this.render(),!this.options.noIcon&&dt.createElement(xg,{className:this.styleSheet.icon})]}})||gw;var yw,Cw,Sw,Ew;let Aw=(yw=class TermsMessageStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",Cw,this),i(this,"termsText",Sw,this)}},Cw=n(yw.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:this.themeProps.FONT_SIZE_SMALL,color:this.themeProps.TEXT_SECONDARY_COLOR}}}),Sw=n(yw.prototype,"termsText",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",maxWidth:480,paddingTop:12,marginTop:4}}}),yw),ww=ct(Aw)(Ew=class TermsMessage extends dt.Element{getDefaultOptions(){return t({},super.getDefaultOptions(),{preMessage:"",postMessage:Vt.termsAndConditions,termsLink:"/terms",policyLink:"/privacy-policy"})}extraNodeAttributes(e){super.extraNodeAttributes(e),this.options.showBorder&&e.setStyle("borderTop","0.5px solid "+this.themeProps.MERCHANT_FRAME_HEADER_BORDER_COLOR)}render(){const{styleSheet:e}=this,{preMessage:t,postMessage:i}=this.options;return[dt.createElement("div",{className:e.termsText,testId:"termsText"},dt.createElement("span",null,[t,i]),dt.createElement(fw,{testId:"signupTermsLink",href:this.options.termsLink,newTab:!0,noIcon:!0,label:Vt.terms})," and ",dt.createElement(fw,{testId:"signupPolicyLink",href:this.options.policyLink,newTab:!0,noIcon:!0,label:Vt.policy}),".")]}})||Ew;var Tw,vw,Ow,Dw,Rw,Pw,Iw,Lw;let Nw=(Tw=class AuthStartPanelStyle extends StyleSheet{constructor(){super(...arguments),i(this,"input",vw,this),i(this,"button",Ow,this),i(this,"headerElement",Dw,this),i(this,"message",Rw,this),i(this,"title",Pw,this),i(this,"footerSection",Iw,this)}},vw=n(Tw.prototype,"input",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginBottom:6}}}),Ow=n(Tw.prototype,"button",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",fontSize:this.themeProps.FONT_SIZE_NORMAL,padding:"12px !important",textAlign:"center",margin:"18px 0"}}}),Dw=n(Tw.prototype,"headerElement",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"0 36px"}}}),Rw=n(Tw.prototype,"message",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.TEXT_SECONDARY_COLOR,textAlign:"center",width:"100%",margin:"12px 0"}}}),Pw=n(Tw.prototype,"title",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:20,textAlign:"center",marginBottom:18}}}),Iw=n(Tw.prototype,"footerSection",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderTop:()=>"0.5px solid "+this.themeProps.MERCHANT_FRAME_HEADER_BORDER_COLOR}}}),Tw),_w=ct(Nw)(Lw=class AuthStartPanel extends dt.Element{constructor(){super(...arguments),this.emailInputError=null}getDefaultOptions(){return{useSecureCode:!1,createUserAutomatically:!0,inputPlaceholder:"",showFooter:!0,externalAuthProviders:tm.authSocialProviders}}render(){return[this.getHeaderSection(),this.getEmailInputSection(),this.getFooterSection()]}getHeaderSection(){const{styleSheet:e}=this,{externalAuthProviders:t}=this.options;return[Vt.authenticationPanelTitle.toString().trim()&&dt.createElement("div",{className:e.title},Vt.authenticationPanelTitle),t.length>0?[dt.createElement("div",{className:e.message},Vt.continueWithExternalAuth),dt.createElement(hw,{className:e.headerElement,externalAuthProviders:t}),dt.createElement("div",{className:e.message},Vt.orContinueWithEmailAddress)]:dt.createElement("div",{className:e.message},Vt.continueWithEmail)]}getEmailInputSection(){const{styleSheet:e,emailInputError:t}=this,{inputPlaceholder:i}=this.options,{registrationMail:n}=im;return[dt.createElement(HA,{ref:"emailInput",className:e.input,label:Vt.emailAddress,initialValue:n,error:t,onFocus:()=>this.clearErrors(),inputAttributes:{type:"email",testId:"authEmail",placeholder:i},onEnter:()=>this.requestEmailCode(),onChange:()=>this.onEmailInputChange()}),dt.createElement(iS,{testId:"continueWithCode",ref:"continueWithCode",label:Vt.continue,className:e.button,disabled:!this.canRequestEmailCode(),onClick:()=>this.requestEmailCode()})]}getFooterSection(){const{styleSheet:e}=this,{showFooter:i}=this.options;if(!i)return null;const n={};return fr.isMerchant(C)&&(n.termsLink="https://newrepublic.com/pages/terms-and-conditions",n.policyLink="https://newrepublic.com/pages/privacy"),[dt.createElement("div",{className:e.footerSection},dt.createElement(ww,t({preMessage:Vt.termutChange(){this.clearErrors(),this.redraw()}getRedirectUrl(){return Un()?tm.merchantPageUrl:window.location.origin}getRequestPayload(){return{firstName:"",lastName:"",email:this.emailInput.getValue().trim(),redirectUrl:this.getRedirectUrl(),withSignup:this.options.createUserAutomatically,secure:this.options.useSecureCode}}canRequestEmailCode(){return this.hasFilledEmail()}async requestEmailCode(){var e;if(this.canRequestEmailCode()){null==(e=this.continueWithCode)||e.node.blur();try{const e=this.getRequestPayload();await Zy.requestLoginCode(e),Ab.isAuthenticated()||this.options.onEmailCodeRequested()}catch(e){console.log(e),th&(this.emailInputError=null,this.redraw())}onMount(){super.onMount(),this.attachChangeListener(im,(()=>{const{registrationMail:e}=im;e&&!this.hasFilledEmail()&&this.emailInput.setValue(e)})),this.emailInput.focus(),this.addListener("urlEnter",(()=>this.emaiRegistrationMail(this.emailInput.getValue())))}})||Lw;class BaseInputElement extends dt.Element{getValue(){return this.value}setValue(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=!0),this.isEqual(this.value,e)||(this.value=e,i&&this.noispatchChange(e))}isEqual(e,t){return e===t}setOptions(e){const t=this.options.initialValue;super.setOptions(e);const{initialValue:i}=this.options;void 0!==this.value&&this.node&&this.isEqual(i,t)||this.setValue(i,!1,!1),this.options.hasOwnProperty("value")&&this.setValue(this.options.value)}focus(){this.node.focus()}blur(){this.node.blur()}}var xw,Mw,Bw,kw,Uw,Hw,zw,Fw,Vw;let Gw=(xw=class RadioButtonStyle extends tS{constructor(){super(...arguments),i(this,"container",Mw,this),i(this,"secondaryButton",Bw,this),i(this,"invalid",kw,this)}},Mw=n(xw.prototype,"container",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderRadius:0,padding:0,marginLeft:()=>-this.themeProps.BUTTON_PRIMARY_BORDER_WIDTH}}}),Bw=n(xw.prototype,"secondaryButton",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{opacity:this.themeProps.BASE_DISABLED_OPACITY,":hover:not([disabled])":{opacity:1,color:null,background:null,boxShadow:null,borderColor:null}}}}),kw=n(xw.prototype,"invalid",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderColor:this.themeProps.ERROR_COLOR,":hover":{borderColor:this.themeProps.ERROR_COLOR}}}}),xw),Ww=ct(Gw)(Uw=class RadioButton extends iS{getDefaultOptions(){return t({},super.getDefaultOptions(),{label:"",active:!1})}})||Uw,jw=(Hw=class RadioButtonsInputStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",zw,this),i(this,"button",Fw,this)}},zw=n(Hw.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",width:"100%",">:first-child":{marginLeft:0,borderRadius:`${this.themeProps.RADIO_BUTTON_BORDER_RADIUS}px 0 0 ${this.themeProps.RADIO_BUTTON_BORDER_RADIUS}px`},">:last-child":{marginRight:0,borderRadius:`0 ${this.themeProps.RADIO_BUTTON_BORDER_RADIUS}px ${this.themeProps.RADIO_BUTTON_BORDER_RADIUS}px 0`}}}}),Fw=n(Hw.prototype,"button",[Ap],{configuraING,flex:this.themeProps.RADIO_BUTTON_FLEX}}}),Hw),Yw=ct(jw)(Vw=class RadioButtonsInput extends BaseInputElement{getDefaultOptions(){return t({},super.getDefaultOptions(),{formatter:e=>e,values:[],initialValue:null,label:null})}render(){const{styleSheet:e}=this,{values:t,formatter:i}=this.options,n=this.getValue();return t.map((t=>dt.createElement(Ww,{label:i(t),active:t===n,type:t===n?0:1,onClick:()=>this.setValue(t),className:e.button})))}getActive(){return this.getValue()}})||Vw;var Kw,Zw,qw,$w,Xw,Jw,Qw,eT;let tT=(Kw=class CDSAccountLookupStyle extends Nw{constructor(){super(...arguments),i(this,"inputContainer",Zw,this),i(this,"nameInput",qw,this),i(this,"zipCodeInput",$w,this),i(this,"cdsLoginMethodTypeInput",Xw,this)}},Zw=n(Kw.prototype,"inputContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex"}}}),qw=n(Kw.prototype,"nameInput",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{flex:.7,marginBottom:0}}}),$w=n(Kw.prototype,"zipCodeInput",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:12,flex:.3,marginBottom:0}}}),Xw=n(Kw.prototype,"cdsLoginMethodTypeInput",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",display:"flex"}}}),Kw),iT=Wt(((Qw=class CDSLoginMethod extends BaseEnum{}).ACCOUNT_NUMBER={name:Vt.accountNumber},Qw.NAME_AND_ZIP={name:Vt.nameAndZip},Jw=Qw))||Jw,nT=ct(tT)(ments),this.activeSection=iT.ACCOUNT_NUMBER}render(){const{styleSheet:e}=this;return[this.getHeaderSection(),dt.createElement("div",{className:e.inputContainer},this.renderInputSection()),dt.createElement(iS,{label:Vt.lookUpPrintMagazineButton,className:e.button,disabled:!this.canSubmit(),onClick:()=>this.handleSubmit()})]}getHeaderSection(){const{styleSheet:e}=this;return dt.createElement(Yw,{className:e.cdsLoginMethodTypeInput,formatter:e=>e.toString(),values:iT.all(),initialValue:this.activeSection,onChange:e=>{this.activeSection=e,this.redraw()}})}renderInputSection(){const{styleSheet:e}=this;return this.activeSection===iT.NAME_AND_ZIP?[dt.createElement(HA,{ref:"nameInput",className:e.nameInput,label:Vt.name,onEnter:()=>this.handleSubmit(),onChange:()=>this.redraw()}),dt.createElement(HA,{ref:"zipCodeInput",className:e.zipCodeInput,label:Vt.lookupPrintMagazineZipCode,onEnter:()=>this.handleSubmit(),onChange:()=>this.redraw()})]:[dt.createElement(HA,{ref:"accountNumberInput",style:{flex:1,marginBottom:0},label:Vt.accountNumber,onEnter:()=>this.handleSubmit(),onChange:()=>this.redraw()})]}canSubmit(){var e,t,i;return this.activeSection===iT.NAME_AND_ZIP?(null==(e=this.nameInput)?void 0:e.getValue())&&(null==(t=this.zipCodeInput)?void 0:t.getValue()):null==(i=this.accountNumberInput)?void 0:i.getValue()}async handleSubmit(){if(!this.canSubmit())return;const e=this.activeSection===iT.NAME_AND_ZIP?{name:this.nameInput.getValue(),zipCode:this.zipCodeInput.getValue()}:{accountNumber:this.accountNumberInput.getValue()};await Ab.loginAtEndpoint("/external_providers/login_with_cds",e)}})||eT;var rT,sT,oT,aT,lT,cT;function uT(e){if(null==e)return e;const t=(e=e.replace("-","")).match(/[0-9]{6}/);return null===t?e:e.substring(t.index,t.index+6)}let hT=(rT=class ShortCodeInputStyle extends StyleSheet{constructor(){super(...arguments),this.transition=".3s ease",i(this,"codeInput",sT,this),i(this,"errorCodeInput",oT,this),i(this,"error",aT,this),i(this,"successInput",lT,this)}},sT=n(rT.prototype,"codeInput",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{opacity:1,transition:this.transition,fontWeight:300,margin:"12px auto 8px",textAlign:"center",fontSize:40,color:this.themeProps.INPUT_TEXT_COLOR,whiteSpace:"nowrap",">*":{padding:"0 !important",display:"inline-block",background:this.themeProps.INPUT_BACKGROUND,border:"1px solid "+this.themeProps.INPUT_BORDER_COLOR,width:()=>ve()?40:44,height:60,borderRadius:0,backgroundClip:"padding-box",textAlign:"center",marginRight:-1,fontWeight:"inherit",fontSize:"inherit",color:this.themeProps.INPUT_TEXT_COLOR,":focus":{outline:"none",borderColor:this.themeProps.INPUT_BORDER_ACTIVE_COLOR,zIndex:2,margin:0}},">:first-child":{borderRadius:"8px 0 0 8px"},">:last-child":{borderRadius:"0 8px 8px 0"},">:nth-child(3)":{marginRight:18},">:nth-child(4)":{marginLeft:18}}}}),oT=n(rT.prototype,"errorCodeInput",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">*":{borderColor:()=>this.themeProps.ERROR_COLOR+"!important",":focus":{borderColor:()=>this.themeProps.ERROR_COLOR+"!important",boxShadow:"none",marginRight:-1},":not(:nth-child(3n+3))":{borderRight:"none"}},">:nth-child(3)":{marginRight:()=>ve()?12:18}}}}),aT=n(rT.prototype,"error",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"absolute",color:this.themeProps.ERROR_COLOR,whiteSpace:"nowrap",left:0,right:0,textAlign:"center"}}}),lT=n(rT.prototype,"successInput",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">*":{pointerEvents:"none",borderColor:()=>this.themeProps.SUCCESS_COLOR+"!important",":focus":{borderColor:()=>this.themeProps.SUCCESS_COLOR+"!important",boxShadow:"none",marginRight:-1},":not(:nth-child(3n+3))":{borderRight:"none"}},">:nth-child(3)":{marginRight:()=>ve()?12:18}}}}),rT),dT=ct(hT)(cT=class ShortCodeInput extends dt.Element{getDefaultOptions(){return t({},super.getDefaultOptions(),{success:null,error:null,onCodeInserted:fe,onEnter:fe,onChange:fe,onClearError:fe})}render(){const{styleSheet:e}=this,{error:i,success:n}=this.options,r={maxLength:1,pattern:"[0-9]",tabIndex:0};return[dt.createElement("div",{className:e.codeInput+(n?e.successInput:i?e.errorCodeInput:"")},dt.createElement(TelInput,t({ref:"code1"},r,{autofocus:!0})),dt.createElement(TelInput,t({ref:"code2"},r)),dt.createElement(TelInput,t({ref:"code3"},r)),"-",dt.createElement(TelInput,t({ref:"code4"},r)),dt.createElement(TelInput,t({ref:"code5"},r)),dt.createElement(TelInput,t({ref:"code6"},r))),i?dt.createElement("div",{className:e.error},i):null]}blur(){for(let e=1;e<=6;e+=1)this["code"+e].blur()}getCode(){let e="";for(let t=1;t<=6;t+=1)e+=this["co(){return this.isValidCode(this.getCode())}onMount(){super.onMount();const{onCodeInsi}=this.options,n=(e,t)=>{e.setValue(t),i()};for(let i=1;i<=6;i+=1){const r=this["code"+(i-1)],s=this["code"+(i+1)],o=this["code"+i];o.setAttribute("contentner("focus",(()=>this.options.onClearError(()=>{e.stopPropagation(),e.preventDefault()},a=new KeyEvent(e);if(a.isEnter())t();else{if(a.isBackspace())return 0===o.getValue().length?r&&(r.node.focus(),r.node.setSelectionRange(1,1)):n(o,""),void i();if(a.isDelete())return n(o,""),void i();if(a.isArrowLeft())return r?(r.node.focus(),r.node.setSelectionRange(o.node.selectionStart,o.node.selectionStart)):o.node.setSelectionRange(0,0),void i();if(a.isArrowRight())return s?(s.node.focus(),s.node.setSelectionRange(o.node.selectionStart,o.node.selectionStart)):o.node.setSelectionRange(1,1),void i();if(a.isTab())return s?s.node.focus():o.node.blur(),void i();a.isDigit()&&(n(o,e.key),s&&(s.node.focus(),s.node.setSelectionRange(0,0)),i()),a.is("v")&&(e.metaKey||e.ctrlKey)||i()}})),o.addNodeListener("keyup",(t=>{const i=new KeyEvent(t);i.isDigit()||(t.preventDefault(),t.stopPropagation(),o.getValue().match(/[0-9]/)||n(o,"")),i.isDigit()&&this.isValidCode(this.getCode())&&e(this.getCode())})),o.addNodeListener("paste",(t=>{const i=uT(t.clipboardData.getData("text"));if(t.preventDefault(),t.stopPropagation(),this.isValidCode(i)){for(let e=1;e<=6;e+=1)n(this["code"+e],i[e-1]);e(this.getCode())}}))}}})||cT;const pT=1502;var mT,gT,bT,fT;let yT=(mT=class DefaultCodeConfirmationFormStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",gT,this),i(this,"button",bT,this)}},gT=n(mT.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexDirection:"column"}}}),bT=n(mT.prototype,"button",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",fontSize:this.themeProps.FONT_SIZE_NORMAL,padding:"12px !important",textAlign:"center",marginTop:30}}}),mT),CT=ct(yT)(fT=class Denull,this.attemptedKeyUpAutoConfirmation=!1}getDefaultOptions(){return t({},super.getDefaultOptions(),{onSubmit:fe})}render(){const{styleSheet:e}=this;return[dt.createElement(dT,{ref:"codeInput",onClearError:()=>{this.error=null,this.redraw()},error:this.error,onChange:()=>this.redraw(),onCodeInserted:()=>this.handleCodeInserted(),onEnter:()=>this.handleEnterKeyPress()}),dt.createElement(iS,{label:Vt.confirm,className:e.button,disabled:!this.canConfirm(),this.attemptedKeyUpAutoConfirmation=!0)}async confirm(){try{this.handleConfirmationSuccess(),await this.options.onSubmit(this.codeInput.getCode())}catch(e){this.node&&this.handssAlreadyInUse:Vt.incorrectConfirmationCode}handleConfirmationError(e){this.codeInput.blur(),this.error=Gn(e)?e.message:this.getErrorMessageByCode(e.code),this.redraw()}handleConfirmationSuccess(){this.error=null,this.codeInput.blur(),this.codeInput.updateOptions({success:!0}),this.redraw()}canConfirmInsertedCode(){return this.codeInput&&this.codeInput.hasValidCode()}onMount(){super.onMount(),this.attachListener(Router.Global,"change",(()=>{this.attemptedKeyUpAutoConfirmation=!1}))}})||fT;class PropertyCache{constructor(e,t){void 0===t&&(t=null),se(e)&&(e=Symbol.for(e)),null==t&&(t=e,e=Symbol()),this.key=e,this.getter=t}get(e,t){void 0===t&&(t=this.getter);const i=this.key;return e.hasOwnProperty(i)?e[i]:e[i]=t(e)}}conopertyCache("autoRedrawHandler",(()=>new Set)utoRedrawListener",(e=>t=>e.enqueueRedraw(t)));function AT(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];const r=()=>new Set([...i]);if(e.autoRedrawImplemented)return void console.error("Can't use autoredraw on a class that inherited another class using autoredraw");e.autoRedrawImplemented=!0;const s=e.prototype.setOptions;e.prototype.setOptions=function(e){s.call(this,e);let t=ST.get(this,r);const i=Object.values(e||{}).filter((e=>e instanceof StoreObject&&!t.has(e)));for(let e of i)this.node&&this.attachChangeListener(e,ET.get(this)),t.add(e)};const o=e.prototype.onMount;return e.prototype.onMount=function(){o.call(this);const e=ST.get(this,r);for(const t of e){const e=ET.get(this);this.attachChangeListener(t,e)}},e}function wT(){for(var e,t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return(null==(e=i[0])?void 0:etanceof BaseUIElement?AT(i[0]):e=>AT(e,...i)}var TT,vT,OT,DT,RT,PT;let IT=(TT=class SpinnerAnimation extends StyleSheet{constructor(){super(...arguments),i(this,"animation",vT,this)}},vT=n(TT.prototype,"animation",[vp],{configuradeg)"},"100%":{transform:"rotate(360deg)"}}}}),TT),LT=(OT=class BlockedCookiesCodeConfirmationFormStyle extends yT{constructor(){super(...arguments),i(this,"button",DT,this),i(this,"buttonSpinner",RT,this)}},DT=n(OT.prototype,"button",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"center",alignItems:"center"}}}),RT=n(OT.prototype,"buttonSpinner",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{animation:`${IT.getInstance().animation.toString()} .6s linear infinite`,marginLeft:4,verticalAlign:"middle",color:"inherit",">:last-child g > path":{stroke:"currentColor"}}}}),OT),NT=wT(im)(PT=ct(LT)(PT=class BlockedCookiesCodeConfirmationForm extends dt.Element{constructor(){super(...arguments),this.verifyCodeTimeout=null,this.lastSentCode=null,this.verifiedCode=!1,this.loading=!1,this.error=null}getDefaultOptions(){return t({},super.getDefaultOptions(),{onSubmit:fe,onCodeAutomaticallyVerified:fe})}extraNodeAttributes(e){super.extraNodeAttributes(e),e.addClass(this.styleSheet.formComponent)}render(){const{styleSheet:e}=this;return[dt.createElement(dT,{ref:"codeInput",success:this.verifiedCode,onChange:()=earError:()=>{this.error=null,this.redraw()},onCodeInserted:()=>this.handleCodeInserted()}),this.verifiedCode?dt.createElement(iS,{className:e.button,onClick:()=>this.handleContinueClick()},Vt.continue):dt.createElement(iS,{className:e.button,disabled:!0,onClick:()=>this.verifyCode()},Vt.confirm,this.loading?dt.createElement(Fg,{className:e.buttonSpinner}):null)]}async veretCode(),t=e=>{this.loading=e,this.redraw()};t(!0);try{await Ab.loginWithEmailCode({code:e}),this.options.onCodeAutomaticallyVerified(),this.codeInput.blur(),this.verifiedCode=!0}catch(e){this.setCodeInputError(e)}t(!1)}async handleContinueClick(){try{this.handleConfirmationSuccess(),await this.options.onSubmit(this.codeInput.getCode())}catch(e){this.node&&this.setCodeInputError(e)}}handleConfirmationSuccess(){this.codeInput.blur(),this.codeInput.updateOptions({success:!0}),this.error=null,this.redraw()}setCodeInputError(e){this.codeInput.blur(),this.error=Gn(e)?e.messagle(){return null!=this.lastSentCode?2e3:300}handleCodeInserted(){const e=this.codeInput.getCode();this.lastSentCode!==e&&(this.verifyCodeTimeout&&clearTimeout(this.verifyCodeTimeout=this.attachTimeout((()=>{this.verifyCode()}),this.getVerifyRequestThrottle()))}})||PT)||PT;const _T=Ky()?CT:NT;var xT;let MT=ct(yT)(xT=class LongCodeEmailConfirmationForm extends dt.Element{constructor(){super(...arguments),this.hasPastedValue=!1}getDefaultOptions(){return t({},super.getDefaultOptirn this.codeIncodeInput&&this.codeInput.getValue().trim()}async confirmCode(){if(this.hasValidInput())try{await this.options.onSubmit(this.getInsertedCode()),this.clearErrors()}catch(e){this.codeInput.updateOptions({error:Gn(e)?e.message:Vt.incorrectConfirmationCode})}}handleInputChange(){this.clearErrors(),this.redraw(),this.hasPastedValue&&(this.confirmCode(),this.hasPastedValue=!1)}render(){const{styleSheet:e}=this;return[dt.createElement(HA,{ref:"codeInput",onFocus:()=>this.clearErrors(),onChange:()=>this.handleInputChange(),onEnter:(rs:[{condition:()=>!this.codeInput.isEmpty()}]}),dt.createElement(iS,{label:Vt.confirm,className:e.button,disabled:!this.hasVathis.codeInput.updateOptions({error:null})}onMoustener("paste",(()=>{this.hasPastedValue=!0}))}})||xT;var BT,kT,UT,HT,zT,FT,VT;let GT=(BT=class LoginWithEmailCodeStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",kT,this),i(this,"message",UT,this),i(this,"text",HT,this),i(this,"resendCodeButton",zT,this)}},kT=n(BT.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:this.themeProps.FONT_SIZE_NORMAL}}}),UT=n(BT.prototype,"message",[Ap],{configuraProps.TEXT_SECONDARY_COLOR,marginBottom:14}}}),HT=n(BT.prototype,"text",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline"}}}),zT=n(BT.prototype,"resendCodeButton",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"space-around",width:"100%",paddingTop:6}}}),BT),WT=wT(im)(FT=ct(GT)((VTguments),this.canDisplayResendCodeOption=!0}getDefaultOptions(){return t({},super.getDefaultOptions(),{onWrongEmailButtonClick:()=>Router.changeURL(j)})}getBeforeInput(){const{styleSheet:e}=this,t=im.confirmationCodeType===z?Vt.enterConfirmationCodeShort:Vt.enterConfirmationCodeLong;return[dt.createElement(MessageElement,{className:e.message,message:t(im.registrationMail)}),dt.createElement(Kf,{onClick:()=>this.handleWrongEmailLinkClick(),label:Veturn"long"===im.confirmationCodeType?MT:_T}render(){const{styleSheet:e}=this,t=this.getEmailConfirmationFormClass();return[dt.createElement("div",{className:e.message},this.getBeforeInput()),dt.createElement(t,{ref:"emailCcanDisplayResendCodeOption=!1,this.redraw()},onSubmit:e=>this.handleSubmit(e)}),this.getAfterInput()]}getAfterInput(){const{canDisplayResendCodeOption:e,styleSheet:t}=this;return e?dt.createElement(Kf,{className:t.resendCodeButton,label:Vt.resorm&&this.options.onWrongEmailButtonClick()}async handleSubmit(e){try{Ze(Ue),await this.confirmEmailCode(e),this.onConfirmSuccess()}finally{this.redraw()}}onConfirmSuccess(){this.options.onSuccess&&this.options.onSuccess(),Zy.confirmedAuthenticationAction()}async confirmEmailCode(e){await Zy.loginWithEmailCode(e),Ze(Ge,{registration:im.isRegistration})}async resendCode(){try{await Zy.requestLoginCode(),Xb.showSuccess(Vt.confirmationCodeResent)}catch(e){Xb.showError(e,Vt.unexpectedError)}}},n(VT.prototype,"handleSubmit",[yb],Object.getOwnPropertyDescriptor(VT.prototype,"handleSubmit"),VT.prototype),FT=VT))||FT)||FT;const jT="enter-login-ultOptions(){return{AuthStartPanelClass:_w}}onEmailCodeRequested(){this.options.onEmailCodeRequested?this.options.onEmailCodeRequested():(this.registrationMail=im.registrationMail,this.confirmationCodeType=im.co{this.options.onAuth&&this.options.onAuth()}getRoutes(){const{AuthStartPanelClass:e}=this.options;return new Route(null,(()=>dt.createElement(e,t({},this.getCleanedOptions(),{onEmailCodeRequested:()=>this.onEmailCodeRequested()}))),[new Route(jT,(()=>dt.createElement(WT,{onWrongEmailButtonClick:()=>this.router.setURL([]),onSuccess:()=>this.onAuthentication()})))])}render(){return dt.createElement(RoRoutes()})}onMount(){this.route Authlement(AuthFlowPanel,this.getFlowOptions())}}var YT,KT,ZT,qT,$T,XT,JT,QT,ev,tv;let iv=(YT=class CDSAuthStartPanelStyle extends Nw{constructor(){super(...arguments),i(this,"authContainer",KT,this),i(this,"authColumn",ZT,this),i(this,"authCDSDescription",qT,this),i(this,"verticalLine",$T,this),i(this,"footerSection",XT,this)}},KT=n(YT.prototype,"authContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexDirection:()=>Te()<=G?"column":"row",marginBottom:-4}}}),ZT=n(YT.prototype,"authColumn",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{flex:1,":first-child":{marginRi:36},":last-child":{marginLeft:()=>ve()?0:36}}}}),qT=n(YT.prototype,"authCDSDescription",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textAlign:"center",marginBottom:32}}}),$T=n(YT.prototype,"verticalLine",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:1,background:"#E3E3E3",marginBottom:14}}}),XT=n(YT.prototype,"footerSection",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textAlign:"center"}}}),YT),nv=ct(iv)(JT=class CDSAuthStartPanel extends _w{render(){const{styleSheet:e}=this;return[dt.createElement("div",{className:e.authContainer},dt.createElement("div",{className:e.authColumn},this.getHeaderSection(),this.getEmailInputSection()),dt.createElement("div",{className:e.verticalLine}),dt.createElement("div",{className:e.authColumn},dt.createElement("div",{className:e.title},Vt.lookUpPrintMagazineTitle),dt.createElement("div",{className:e.authCDSDescription},Vt.lookUpPrintMagazineDescription),dt.createElement(nT,null))),this.getFooterSection()]}})||JT,rv=(QT=class CDSAuthPageStyle extends MC{constructor(){super(...arguments),i(this,"content",ev,this)}},ev=n(QT.prototype,"content",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:null}}}),QT),sv=ct(rv)(tv=class CDSAuthPage extends AuthPanelPage{getFlowOptions(){returnonEmailCodeRequested:()=>Router.changeURL(Y)}}})||tv;class DonationAuthPage extends AuthPanelPage{render(){return[Vt.merchantUsesBlinkForDonations.toString().trim()&&dt.createElement(MessageElement,{message:Vt.merchantUsesBlinkForDonations(fr.getMerchant().name),className:this.styleSheet.message}),super.render()]}}class SubscribeAuthPage extends AuthPanelPage{render(){return[Vt.subscribeInlineAuth1.toString().trim()&&dt.createElement(MessageElement,{message:Vt.subscribeInlineAuth1(fr.getMerchant().name),className:this.styleSheet.message}),super.render()]}}var ov;let av=wT(tm)(ov=class FunctionalityNotEnabledPanel extends UC{getMessage(){switch(tm.panelType){case A.newsletter:return Vt.functionalityNotEnabledNewsletters;case A.giftSubscription:case A.subscribe:return Vt.functionalityNotEnabledSubscriptions;case A.donation:return Vt.functionalityNotEnabledDonations;case A.shop:return Vt.functionalityNotEnabledShop;default:return Vt.functionalityNotEnabled}}render(){const e=this.getMessage(),t=[fr.getMerchant().name,tm.panelType];return UI.createElement(MessageElement,{message:e,args:t})}})||ov;class EmailCodeConfirmationComponent extends WT{getBeforeInput(){return[dt.createElement("div",{className:this.styleSheet.title},Vt.authEmailConfirmationTitle),super.getBeforeInput()]}}class EmailCodeConfirmationPanel extends UC{render(){return dt.createElement(EmailCodeCot,{onWrongEmailButtonClick:()=>Router.back()})}}var lv,cv,uv,hv,dv,pv,mv;let gv=(lv=class CheckboxInputStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",cv,this),i(this,"checkbox",uv,this),i(this,"selected",hv,this),i(this,"label",dv,this),i(this,"disabled",pv,this)}},cv=n(lv.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",cursor:"pointer",userSelect:"none",alignItems:"flex-start",lineHeight:this.themeProps.GENERAL_LINE_HEIGHT}}}),uv=n(lv.prototype,"checkbox",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"relative",flexShrink:0,marginTop:((parseFloat(this.themeProps.GENERAL_LINE_HEIGHT)||1.5)-1)/2+"em",marginRight:12,border:"1px solid "+this.themeProps.CHECKBOX_BORDER_COLOR,borderRadius:this.themeProps.CHECKBOX_BORDER_RADIUS,width:this.themeProps.CHECKBOX_SIZE,height:this.themeProps.CHECKBOX_SIZE,pointerEvents:"none",":hover":{cursor:"pointer"}}}}),hv=n(lv.prototype,"selected",[Ap],{configuraemeProps.CHECKBOX_ENABLED_BACKGROUND_COLOR}}}),dv=n(lv.prototype,"label",[Ap],{configuraSelect:"none","-webkit-user-select":"none"}}}),pv=n(lv.prototype,"disabled",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{opacity:this.themeProps.BASE_DISABLED_OPACITY,pointerEvents:H.isMobileDevice()?"none":"initial",cursor:"not-allowed"}}}),lv),bv=ct(gv)(mv=class CheckboxInput extends BaseInputElement{getDefaultOptions(e){return t({},super.getDefaultOptions(e),{initialValue:!1,label:"Label"})}extraNodeAttributes(e){super.extraNodeAttributes(e),this.options.disabled&&e.addClass(this.styleSheet.disabled)}getIcon(){const e={color:this.themeProps.CHECKBOX_CHECKMARK_COLOR,size:"100%",style:{display:"block"}},t=this.getValue();return null==t?Zm("minus",e):t?Zm("checkmark",e):null}render(){const{styleSheet:e}=this,t=e.checkbox+(!1!==this.getValue()?e.selected:"");return[dt.createElement("div",{className:t},this.getIcon()),dt.createElement("div",{className:e.label},$m(this.options.label))]}onMount(){super.onMount(),this.addClickListener((e=>{e.stopPropagation();const t=!1===this.getValue();this.setValue(t)}))}})||mv;var fv,yv,Cv,Sv,Ev,Av,wv,Tv;let vv=(fv=class NewsletterSubscribePanelStyle extends MC{constructor(){super(...arguments),i(this,"container",yv,this),i(this,"checkbox",Cv,this),i(this,"message",Sv,this),i(this,"separatorLine",Ev,this),i(this,"button",Av,this)}},yv=n(fv.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textAlign:"center"}}}),Cv=n(fv.prototype,"checkbox",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:12,textAlign:"left"}}}),Sv=n(fv.prototype,"message",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({marginTop:16,fontSize:15,lineHeight:22,textAlign:()=>ve()||tm.gateType===w.banner?"left":"center"},tm.textStyle)}}),Ev=n(fv.prototype,"separatorLine",[Ap],{configuraeight:.5,background:"#E5E5E5",marginTop:12}}}),Av=n(fv.prototype,"button",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:20}}}),fv),Ov=ct(vv)((ctor(){super(...arguments),this.fields=null}getDefaultOptions(e){rtle:()=>Vt.newsletterTitle(fr.getMerchant())})}renderNewsletters(){const{styleSheet:e}=this,t=_f.newsletter.getNewsletters();if(!this.fields){this.fields={};for(const e of t)this.fields[e.id]=!0}if(1===t.length){const i=t[0],n=Vt.newsletterDescription(i.name);return n&&dt.createElement("div",{className:e.message},n)}return t.map((t=>{let{name:i,id:n}=t;return dt.createElement(bv,{label:i,initialValue:onChange:e=>{this.fields[n]=e,this.redraw()}})}))}render(){const{styleSheet:e}=this,t=_f.newsletter.getNewsletters(),i=fr.getMerchant().getName(),n=Ml.getByUserAndMerchant(Qb.getUserId(),fr.merchantId),[r,s]=1===t.length?[Vt.newsletterSubscribeSingleNewsletterAuthenticatedTitle,Vt.newsletterSubscribeSingleNewsletterUnauthenticatedTitle]:[Vt.newsletterSubscribeMultipleNewsletterAuthenticatedTitle,Vt.newsletterSubscribeMultipleNewsletterUnauthenticatedTitle];return[dt.createElement("div",{className:e.leftAlign},Ab.isAuthenticated()?r:s),!Ab.isAuthenticated()&&dt.createElement(HA,{ref:"emailInput",inputAttributes:{type:"email"},label:Vis.emailError,onFocus:()=>this.clearErrors()}),this.renderNewsletters(),1!==t.length&&[dt.createElement("div",{className:e.separatorLine}),dt.createElement(bv,{className:e.checkbox,label:Vt.allowPromotionalEmailsFromMerchant(i),initialValue:!n||n.canReceivePromotionalEmails,ref:"promotionalEmailsCheckbox"})],dt.createElement(aS,{label:Vt.subscribeToNewsletter,className:e.button,onClick:()=>{var e,t;return this.subscribeToNewsletter((null==(e=this.emailInput)?void 0:e.getValue())||Qb.getUserEmail(),null==(t=this.promotionalEmailsCheckbox)?void 0:t.getValue())}}),Ab.isAuthenticated()&&dt.createElement(MessageElement,{className:e.message,message:1===t.length?Vt.newsletterEmailDescription(Qb.getUserEmail()):Vt.newslErrors(){this.emailError=null,this.redraw()}async subscribeToNewsletter(e,i){const{merchantId:n}=fr,r=_f.newsletter.getNewsletters(),s=Ml.getByUserAndMerchant(Qb.getUserId(),n),o=!s||i!==s.canReceivePromotionalEmails;.keys(this.fields).filter((e=>this.fields[e])),a=await mA(t({emailAddress:e,merchantId:n,updateType:1===r.length?pA:"replace",newsletterIds:s},o&&null!==i?{canReceivePromotionalEmails:i}:{}));SS("newsletter",N,{newsletterIds:s,canReceivePromotionalEmails:i},{audienceMembers:dA.loadRaw(a)}),Router.changeURL(Dy)}catch(t){1005!==t.code||Ab.isAuthenticated()?Xb.showError(t):(await Ab.requestLoginCode({email:e,secure:!1}),Routticated((()=>this.subscribeToNewsletter(e,i))))}}},n(Tv.prototype,"subscribeToNewsletter",[yb],Object.getOwnPropertyDescriptor(Tv.prototype,"subscribeToNewsletter"),Tv.prototype),wv=Tv))||wv;class NewsletterSubscribeSuccessPanel extends UC{render(){const{styleSheet:e}=this;return[dt.createElement("div",{className:e.title},Vt.newsletterSubscribeSuccessTitle(fr.getMerchant().getName())),dt.createElement("div",{className:e.message,style:{padding:"0 6px"}},Vt.newsletterSuccessMessage,dt.createElement(Kf,{onClick:qC,label:Vt.myAccount}),".")]}}var Dv,Rv,Pv,Iv,Lv,Nv;let _v=(Dv=class MerchantCurrencyInputStyle extends UA{constructor(){super(...arguments),this.invisibleArrows={"-webkit-appearance":"none",margin:0},i(this,"inputContainer",Rv,this),i(this,"input",Pv,this),i(this,"currency",Iv,this),i(this,"errorMessage",Lv,this)}},Rv=n(Dv.prototype,"inputContainer",[wp],{configura{return{display:"flex",alignItems:"center"}}}),Pv=n(Dv.prototype,"input",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{paddingLeft:0,fontSize:this.themeProps.FONT_SIZE_LARGE,"-moz-appearance":"textfield","::-webkit-inner-spin-button":this.invisibleArrows,"::-webkit-outer-spin-button":this.invisibleArrows,":focus":{outline:"none",borderColor:"none",boxShadow:"none"}}}}),Iv=n(Dv.prototype,"currency",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{lineHeight:1}}}),Lv=n(Dv.prototype,"errorMessage",[wp],{configura0,initializer:function(){return{top:"100%"}}}),Dv),xv=ct(_v)(Nv=class MerchantCurrencyInput extends HA{getDefaultOptions(){return t({},super.getDefaultOptions(),{currency:null,inputPattern:/^$|^[1-9][0-9]*$/,inputAttributes:{type:"tel"}})}render(){const{currency:e}=this.options;return[dt.createElement("div",{className:this.styleSheet.currency},e.getMainUnitSymbol())]}})||Nv;var Mv,Bv,kv,Uv,Hv,zv,Fv,Vv,Gv;let Wv=(Mv=class AmountRadioButtonsInputStyle extends StyleSheet{constructor(){super(...arguments),this.GAP_SIZE=10,i(this,"amountContainer",Bv,this),i(this,"button",kv,this),i(this,"errorMessage",Uv,this)}},Bv=n(Mv.prototype,"amountContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",gap:this.GAP_SIZE+"px",width:"100%"}}}),kv=n(Mv.prototype,"button",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{"--buttons-per-row":3,"--gap":this.GAP_SIZE+"px",flex:"0 0 calc((100% / var(--buttons-per-row)) - var(--gap))",minWidth:80}}}),Uv=n(Mv.prototype,"errorMessage",[Ap],{configuraProps.ERROR_COLOR,height:"1em",marginTop:8}}}),Mv),jv=(Hv=class CustomAmountInputStyle extends _v{constructor(){super(...arguments),i(this,"container",zv,this),i(this,"inputContainer",Fv,this),i(this,"input",Vv,this)}},zv=n(Hv.prototype,"container",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:0,marginBottom:0,height:"100%",background:"transparent",color:"inherit",border:null,":focus":null}}}),Fv=n(Hv.prototype,"inputContainer",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100%",border:0,borderBottom:0,color:"inherit",background:"transparent",":focus":null,":hover":null}}}),Vv=n(Hv.prototype,"input",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100%",padding:0,color:"inherit",caretColor:"inherit",background:"transparent",":focus":null}}}),Hv),Yv=ct(Wv)(Gv=class AmountRadioButtonsInput extends BaseInputElement{constructor(){super(...arguments),this.activ{return new Money(e,this.options.currency)}setActiveIndex(e){this.activeIndex=e,this.redraw()}getActiveIndex(){const{activeIndex:e}=this,{amounts:t}=this.options,i=this.getValue();if(e)return e;for(let e=0;e<t.length;e++)if(t[e]===i)return e;for(let e=0;e<t.length;e++)if(null==t[e])return e;return 0}renderErrorMessage(){const{styleSheet:e}=this;return dt.createElement("div",{className:e.errorMessage},this.error)}renderCustomAmountButton(e,t){const{styleSheet:i}=this,{currency:n}=this.options,{minAmount:r,maxAmount:s}=this.options.customAmountOptions;return dt.createElement(iS,{className:i.button,type:e,onClick:()=>{var e;this.setActiveIndex(t);const i=n.mainUnitsToAmount(null==(e=this.customAmountInput)?void 0:e.getValue());i&&!this.error&&this.setValue(i)}},dt.createElement(xv,{styleSheet:jv,ref:"customAmountInput",inputAttributes:{min:n.amountToMainUnits(r),max:n.amountToMainUnits(s)},currency:this.options.currency,onChange:e=>{this.error||(e=n.mainUnitsToAmount(e),this.setValue(e))},onValidInput:()=>{this.error=null,this.redraw()},onInvalidInput:e=>{return this.error=Vt.amountInvalidError(n.amountToMainUnits(r),n.amountToMainUnits(s)),this.redraw(),void 0===i&&(i=!1),!(!se(t=e)||!i&&t.trim()!==t||isNaN(t)||isNaN(parseFloat(t)))&&parseFloat(e)<=n.amountToMainUnits(s);var t,i}}))}renderAmountOptions(){const{styleSheet:e}=this,{amounts:t}=this.options,i=this.getActiveIndex();return t.map(((t,n)=>{const r=n===i?0:1;return null==t?this.renderCustomAmountButton(r,n):dt.createElement(iS,{className:e.butt)=>{this.setValue(t),this.setActiveIndex(n)}})}))}render(){const{styleSheet:e}=this;return[dt.createElement("div",{className:e.amountContainer},this.renderAmountOptions()),this.renderErrorMessage()]}})||Gv;var Kv,Zv,qv,$v,Xv,Jv;let Qv=(Kv=class DonationAmountAndFrequencyStyle extends StyleSheet{constructor(){super(...arguments),i(this,"coverFeesCheckbox",Zv,this)}},Zv=n(Kv.prototype,"coverFeesCheckbox",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:12,marginBottom:12,color:this.themeProps.TEXT_SECONDARY_COLOR+" !important"}}}),Kv),eO=(qv=class FrequenciesRadioButtonInputStyle extends jw{constructor(){super(...arguments),i(this,"container",$v,this),i(this,"button",Xv,this)}},$v=n(qv.prototype,"container",[wp],{configura",">:first-child":null,">:last-child":null}}}),Xv=n(qv.prototype,"button",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderRadius:this.themeProps.RADIO_BUTTON_BORDER_RADIUS}}}),qv),tO=wT(eE)(Jv=ct(Qv)(Jv=class DonationAmountAndFrequtionDetails.update(e),this.dispatchChange()}render(){const{styleSheet:e}=this,t=MC.getInstance(this.getTheme()),{minAmount:i,maxAmount:n,frequencyOptions:r,predefinedAmounts:s,currency:o}=_f.donationDetails.getOptionsForDonor(),a=r.length>1;return[dt.createElement("div",{className:t.title},Vt.donationDetails),dt.createElement(Yv,{currency:o,amounts:s,initialValue:_f.donationDetails.donationAmount,onChange:e=>this.updateDonationDetails({donationAmount:e}),customAmountOptions:{minAmount:i,maxAmount:n}}),tm.allowUserToCoverFees&&dt.createElement(bv,{ref:"payDonationFeeCheckbox",label:Vt.donorCoversFeesCheckbox(_f.donationDetails.getDonationFee()),className:e.coverFeesCheckbox,initialValue:_f.donationDetails.donorCoversFees,onChange:e=>this.updateDonationDetails({donorCoversFees:e})}),dt.createElement(MessageElement,{message:Vt.donationExplanationMessage}),a&&dt.createElement(Yw,{styleSheet:eO,values:r,formatter:e=>e.getFrequencyName(),initiae=>this.updateDonationDetails({frequency:e})})]}})||Jv)||Jv;var iO,nO,rO;let sO=(iO=class DonatePanelStyle extends MC{constructor(){super(...arguments),i(this,"button",nO,this)}},nO=n(iO.prototype,"button",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",marginTop:18}}}),iO),oO=ct(sO)(rO=class DonatePanel extends UC{render(){return[dt.createElement(tO,{ref:"donateComponent",onChange:()=>this.redraw()}),dt.createElement(iS,{label:_f.donationDetails.getDonateComponentButtonLabel(),disabled:!_f.donationDetails.isValid(),onClick:()=>this.on})]}donate(){_f.paymentMethod.showPanel()}})||rO;const aO={MASTERCARD:jg,VISA:Yg,AMEX:Wg,DISCOVER:Kg,DINERS_CLUB:Zg,JCB:qg,UNION_PAY:$g,AMAZON_PAY:Xg,BLINK:Gg};class BrandedCardIcon{static getIconClassByBrand(e){for(const t of Object.keys(this.cardBrands))if(e&&this.cardBrands[t].toUpperCase()===e.toUpperCase()&&aO[t])retatic getDefaultIconClass(){return aO.BLINK}}BrandedCardIcon.cardBrands={MASTERCARD:"mastercard",VISA:"visa",AMEX:"amex",DISCOVER:"discover",DINERS_CLUB:"diners club",JCB:"jcb",UNION_PAY:"unionpay",AMAZON_PAY:"amazonpay"};class PaymentMethodIcon extends dt.Element{getDefaultOptions(){return t({},super.getDefaultOptions(),{brand:"",size:null})}render(){const{brand:e,size:t}=this.options,i=BrandedCardIcon.getIconClassByBrand(e),n={};return t&&(n.size=t),dt.createElement(i,n)}}var lO,cO,uO,hO,dO,pO,mO,gO,bO;function fO(e){if(null==e)return Vt.walletFunds;const t=e.getLastDigits();return t?Vt.usingCard(e.getBrand(),t):e.getBrand()}let yO=(lO=class PaymentMethodDetailsStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",cO,this),i(this,"primaryDetails",uO,this),i(this,"secondaryDetails",hO,this),i(this,"icon",dO,this),i(this,"message",pO,this),i(this,"defaultLabel",mO,this),i(this,"expiryDate",gO,this)}},cO=n(lO.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",alignItems:"center",width:"100%",justifyContent:"space-between"}}}),uO=n(lO.prototype,"primaryDetails",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex"}}}),hO=n(lO.prototype,"secondaryDetails",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex"}}}),dO=n(lO.prototype,"icon",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:8,marginRight:12,display:"flex",alignItems:"center"}}}),pO=n(lO.prototype,"message",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{paddingLeft:2}}}),mO=n(lO.prototype,"defaultLabel",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.SUCCESS_COLOR,paddingLeft:8,paddingRight:8}}}),gO=n(lO.prototype,"expiryDate",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{paddingLeft:8,paddingRight:8}}}),lO),CO=ct(yO)(bO=class PaymentMethodDesod:null,showExpiryDate:!1,showIfDefault:!1}}render(){var e;const{paymentMethod:t,showExpiryDate:i,showIfDefault:n}=this.options,{styleSheet:r}=this,s=null==(e=t.getExpiryDate())?void 0:e.format("MM/YY");return[dt.createElement("div",{className:r.primaryDetails},dt.createElement(PaymentMethodIcon,{brand:t.getBrand(),className:r.icon,size:"1.1em"}),dt.createElement("div",{className:r.message},fO(t))),dt.createElement("div",{className:r.secondaryDetails},n&&t.isPrimary&&dt.createElement("div",{className:r.defaultLabel},Vt.default),i&&s&&dt.createElement("div",{className:r.expiryDate},s))]}})||bO;var SO,EO,AO;let wO=(SO=class PaymentMethodAcceptOrChangeStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",EO,this)}},EO=n(SO.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"space-between"}}}),SO),TO=ct(wO)(AO=class PaymentMethodAcceptOrChange extends dt.Element{isValid(){return!0}getPaymentMethod(){return _f.paymentMethod.selectedValue}render(){return[dt.createElement(CO,{paymentMethod:this.getPaymentMethod()}),dt.createElement(Kf,{label:Vt.change,onClick:()=>_f.paymentMethod.prompt({inlineSubflow:!0,continueLabel:Vt.continue})})]}})||AO;var vO,OO,DO,RO,PO,IO,LO,NO,_O,xO;const MO=e=>({invalid:{color:e.ERROR_COLOR,iconColor:e.ERROR_COLOR},base:{color:e.INPUT_TEXT_COLOR,iconColor:e.INPUT_TEXT_COLOR,fontSize:e.FONT_SIZE_LARGE,fontFamily:e.FONT_FAMILY_DEFAULT,fontWeight:e.FONT_WEIGHT_REGULAR,"::placeholder":{color:e.INPUT_PLACEHOLDER_COLOR,fontWeight:e.FONT_WEIGHT_REGULAR}}});let BO=(vO=class StripeCardInputStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",OO,this),i(this,"inputContainer",DO,this),i(this,"inputContainerFocused",RO,this),i(this,"message",PO,this),i(this,"successMessage",IO,this),i(this,"errorMessage",LO,this),i(this,"error",NO,this)}},OO=n(vO.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:()=>ve()?14:16,color:this.themeProps.INPUT_TEXT_COLOR,position:"relative",overflow:"initial",cursor:"text"}}}),DO=n(vO.prototype,"inputContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({width:"100%",position:"relative",fontSize:"inherit",height:46,background:this.themeProps.INPUT_BACKGROUND,borderRadius:this.themeProps.BASE_BORDER_RADIUS,border:()=>"1px solid "+this.themeProps.INPUT_BORDER_COLOR,transition:"box-shadow 0.2s ease"},this.themeProps.MERCHANT_INPUT_STYLE)}}),RO=n(vO.prototype,"inputContainerFocused",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{border:()=>"1px solid "+this.themeProps.INPUT_BORDER_ACTIVE_COLOR}}}),PO=n(vO.prototype,"message",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{paddingBottom:12,fontSize:14}}}),IO=n(vO.prototype,"successMessage",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.SUCCESS_COLOR}}}),LO=n(vO.prototype,"errorMessage",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.ERROR_COLOR,marginTop:10}}}),NO=n(vO.prototype,"error",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderColor:this.themeProps.ERROR_COLOR,":hover":{borderColor:this.themeProps.ERROR_COLOR+" !important"}," input":{color:this.themeProps.ERROR_COLOR+" !important"}," input::placeholder":{color:this.themeProps.ERROR_COLOR+" !important"}}}}),vO),kO=ct(BO)((xO=class StripeCardInput extends dt.Element{constructor(){super(...arguments),this.focused=!1,this.inputComplete=!1,this.card=null,this.validInputs=!1,this.paymentProcessorSrc="https://js.stripe.com/v3/",this.error=null}getDefaultPaymentProcessor(){let e=br.filtt t=e.filter((e=>e.merchantIe=t.length?t:e.filter((e=>null==e.merchantId)),1!==e.length)throw"Invalid configuration: Define exactly one payment processor";return e[0]}getDefaultOptions(e){return{onChange:fe,label:"addCard",autofocus:!0,fonts:[{family:"Lato",src:`url(${a}/resources/fonts/LatoLatin-Regular.woff)`,weight:"400"}],paymentProcessor:this.getDefaultPaymentProcessor()}}getChildrenToRender(){var e;const{styleSheet:t}=this,{success:i}=this.options,n=t.inputContainer+(i?t.success:this.error?t.error:"")+(this.focused?t.inputContainerFocused:"");let{error:r}=this;return(null==(e=r)?void 0:e.length)>60&&(r=Vt.genericCardError),[dt.createElement("div",{className:n},dt.createElement("div",{style:{display:"flex",flexDirection:"row",padding:".25rem 5px",alignItems:"center",paddingLeft:8,height:"100%"}},dt.createElement("div",{id:"card-element",style:{flex:1}})),dt.createElement("div",{className:t.message+t.successMessage},i)),r&&dt.createElement("div",{testId:"cardInputError",className:t.message+t.errorMessage},r)]}hasValidSecureFields(){return this.validInputs}isLoaded(){return!!this.card}isInputComplete(){return this.inputComplete}async confirmCard(e,t){void 0===e&&(e=_f.paymentMethod.scope),void 0===t&&(t={});const{paymentProcessor:i}=this.options;this.updateOptions({error:null});const n=await this.stripe.createToken(this.card,t);if(n.error)throw this.updateOptions({error:n.error.message}),this.error;this.card.blur();try{return await async function(e,t,i){const n=await Zt.post("/payment_methods/add_payment_method",{tokenId:e.id,scope:t,rawToken:JSON.stringify(e),paymentProcessorId:i.id});return Nr.loadObject(n)}(n.token,e,i)}catch(e){throw this.updateOptions({error:e.message}),e}}getCardElement(){const{themeProps:e}=this,{paymentProcessor:t}=this.options,i={fonts:this.options.fonts},n={style:MO(e)};return this.stripe=Stripe(t.publicKey),this.card=this.stripe.elements(i).create("card",n),this.card.addEventListener("change",(e=>{e.error?(this.validInputs=!1,this.error=e.error.message,this.redraw()):(this.validInputs=!0,this.error=null,this.redraw()),this.inputComplete=e.complete,this.options.onChange()})),this.options.auentListener("ready",(()=>{this.card.focus()})),this.card}async insertPaymentProcessorElement(){await bA(this.paymentProcessorSrc);const e=this.attachInterval((()=>{document.getElementById("card-element")&&(clearInterval(e),this.card=this.getCardElement(),this.card.on("focus",(()=>{this.focused=!0,this.error=null,this.redraw()})),this.card.on("blur",(()=>{this.focused=!1,this.redraw()})),this.card.mount("#card-element"),this.dispatch("loaListener((()=>{this.card&&this.card.focus()})),this.insertPaymentProcessorElement()}},n(xO.prototype,"confirmCard",[yb],Object.getOwnPropertyDescriptor(xO.prototype,"confirmCard"),xO.prototype),_O=xO))[0-9][0-9]|9[01][0-9]|92[0-5])[0-9]{10})$/}}getDefaultOptions(){return t({},super.getDefaultOptions(),{inputAttributes:{placeholder:Vt.cardNumberInputPlaceholder}})}validateInput(){const e=this.getValue();let t=0,i=!1;for(let n=e.length-1;n>=0;n--){let r=parseInt(e.charAt(n),10);i&&(r*=2)>9&&(r-=9),t+=r,i=!i}let n=t%10==0,r=!1;return Object.keys(this.acceptedCreditCards).forEach((t=>{"discover"===t&&fr.isMerchant(C)||this.acceptedCreditCards[t].test(e)&&(r=!0,this.dispatch("cardTypeIdentified",t))})),!(!n||!r)||n&&r}getValue(){return this.input.getValue().split(" ").join("")}setValue(e){let t="";for(const i of[...e])t.length%5==4&&(t+=" "),t+=i;this.input.setValue(t)}initValidationListeners(){const e=new RegExp("^[0-9]{0,16}$");this.input.addNodeListener("keydown",(e=>{const t=new KeyEvent(e),i=this.input.getValue();this.saveSelection();const n=t=>{this.setValue(t.split(" ").join("")),this.input.node.setSelectionRange(this.selectionStart,this.selectionStart),this.saveSelection(),e.preventDefault(),e.stopPropagation()};if(t.isBackspace()&&this.selectionStart%5==0&&this.selectionStart===this.selectionEnd){const e=i.substr(0,this.selectionStart-2)+i.substr(this.selectionStart);this.selectionStart-=2,n(e)}if(t.isDelete()&&this.selectionStart%5==4&&this.selectionStart===this.selectionEnd){const e=i.substr(0,this.selectionStart)+i.substr(this.selectionStart+2);this.selectionStart+=1,n(e)}})),this.input.addNodeListener("input",(()=>{const t=this.getValue();let i=this.input.getValue().length;if(!t.match(e))return this.setValue([...t].filter((e=>e.match(/\d/))).slice(0,16).join("")),17===t.length&&(this.selectionStart%5==4?this.selectionStart+=2:this.selectionStart+=1),void this.input.node.setSelectionRange(this.selectionStart,this.selectionStart);const{selectionStart:n,selectionEnd:r}=this.input.node;this.setValue(t),this.input.getValue().length-i==1&&this.selectionStart===i-1?(this.selectionStart+=2,this.input.node.setSelectionRange(this.selectionStart,this.selectionStart)):this.input.node.setSelectionRange(n,r),this.options.onValidInput(t),this.saveSelection(),this.clearError()}))}}class ExpiryDateInput extends HA{getDefaultOptions(){return t({},super.getDefaultOptions(),{inputAttributes:{placeholder:Vt.cardDateturn this.input.getValue().replace("/","")}validateInput(){if(!this.input.getValue().match(/^(((0[1-9])|(1[0-2]))\/([0-9]{2}))$/))return!1;const e=new StemDate(this.input.getValue().substr(0,2)+"/02/"+this.input.getValue().substr(3,2));return e&&StemDate.now().getStartOfMonth().isBefore(e)}initKeyListeners(){super.initKeyListeners(),this.input.addNodeListener("keyup",(e=>{new KeyEvent(e).isBackspace()&&!this.selectionStart&&queueMicrotask(this.options.onFocusPreviousField)}))}initValidationListeners(){var e=this;let t=this.input.getValue();this.input.addNodeListener("keydown",(e=>{new KeyEvent(e).isBackspace()&&this.selectionStart<=3&&(this.input.setValue(""),e.preventDefault(),e.stopPropagation())})),this.input.addNodeListener("input",(()=>{var i;let n=this.input.getValue();const r=function(i,n){void 0===n&&(n=!0),e.selectionStart=n?i.length:e.input.node.selectionStart,t=i,e.input.setValue(i),e.input.node.setSelectionRange(e.selectionStart,e.selectionStart),e.saveSelection()};if(n.match(/^[0-1]$/))return void r(n);if(n.match(/^0[1-9]$/))return void r(n+"/");if(n.match(/^[2-9]$/))return void r("0"+n+"/");if(n.match(/^1[0-2]$/))return void r(n+"/");if(n.match(/^1\/$/))return void r("0"+n);const s=null==(i=n.match(/^(((0[1-9])|(1[0-2]))\/([0-9]{0,2}))/))?void 0:i[0];s?r(s,!1):(this.input.setValue(t),this.saveSelection(),this.clearError())}))}}class CVCInput extends HA{getDefaultOptions(){return t({},super.getDefaultOptions(),{inputAttributes:{placeholder:Vt.cardCVCInputPlaceholder},onFocusPreviousField:fe,amexCard:!1})}setOptions(e){e.amexCard?e.inputPattern=/^[0-9]{0,4}$/:e.inputPattern=/^[0-9]{0,3}$/,super.setOptions(e)}validateInput(){return this.options.amexCard?this.getValue().match(/^[0-9]{4}$/):this.getValue().match(/^[0-9]{3}$/)}initKeyListeners(){super.initKeyListeners(),this.input.addNodeListener("keyup",(e=>{new KeyEvent(e).isBackspace()&&!this.selectionStart&&queueMicrotask(this.options.onFocusPreviousField)}))}}let HO=ct(BO)(UO=class BlinkCardInput extends dt.Element{constructor(){super(...arguments),this.focused=!1,this.amexCard=!1,this.validInputs=!1}getDefaultOptions(){return t({},super.getDefaultOptions(),{onChange:fe,label:"addCard",autofocus:!0})}async confirmCard(){if(!this.isInputComplete())throw null;const e=this.cardNumberInput.getValue(),t=this.cardExpiryInput.getValue(),i=this.cvvInput.getValue();return new Lr({cardNumber:e,cardExpiry:t,cardCvv:i,isVirtual:!0,details:{brand:this.cardBrand,expMonth:t.substring(0,2),expYear:t.substring(2,4),last4:e.substring(e.length-4)}})}hairyInput.isValid()&&this.cvvInput.isValid()}isLoaded(){return!0}render(){const{styleSheet:e}=this,{success:t}=this.options;return[dt.createElement("div",null,dt.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},dt.createElement(CardNumberInput,{ref:"cardNumberInput",style:{flex:.6,marginTop:0},onBlur:()=>this.cardNumberInput.validate(),onChange:()=>{this.cardNumberInput.isValid()&&this.cardExpiryInput.focus(),this.options.onChange()},validators:[{condition:()=>this.cardNumberInput.validateInput()}]}),dt.createElement(ExpiryDateInput,{ref:"cardExpiryInput",style:{flex:.25,marginTop:0},onBlur:()=>this.cardExpiryInput.validate(),onChange:()=>{this.cardExpiryInput.isValid()&&this.cvvInput.focus(),this.options.onChange()},onFocusPreviousField:()=>this.cardNumberInput.focus(),validators:[{condition:()=>this.cardExpiryInput.validateInput()}]}),dt.createElement(CVCInput,{ref:"cvvInput",amexCard:this.amexCard,style:{flex:.2,marginTop:0},onBlur:()=>this.cvvInput.validate(),onFocusPreviousField:()=>this.cardExpiryInput.focus(),onChange:()=>this.options.onChange(),validators:[{condition:()=>this.cvvInput.validateInput()}]})),dt.createElement("div",{className:e.successMessage},t)),this.error&&dt.createElement("div",{testId:"cardInputError",className:e.errorMessage},this.error)]}onMount(){super.onMount(),this.cardNumberInput.addListener("cardTypeIdentified",(e=>{this.cardBrand=e,this.amexCard="amex"===e,this.redraw()}))}})||UO;const zO=new class SDKMessagingChannelClass extends Dispatchable{constructor(){super(),this.attachEventListener(window,"message",(e=>{if(e.origin!==a||"object"!=typeof e.data)return;const{data:i}=e,{appType:n,type:r}=i;if(!("string"==typeof r||r instanceof String)||!r.startsWith(up))return;const s=[...document.getElementsByTagName("iframe")].find((t=>t.contentWindow===e.source)),o=t({},i,{type:i.type.substring(up.length),origin:e.origin});this.dispatch(o.type,o,s,n)}))}},FO=new class OnceDispatcher extends Dispatcher{dispatch(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.dispatchArgs=t,super.dispatch(...t)}haveDispatched(){return this.dispatchArgs}addListener(e){if(this.haveDispatched())return e(...this.dispatchArgsener((functdListenerOnce(e){return this.addListener(e)}},VO={popup:"true",scope:"profile postal_code payments:widget payments:shipping_address"};let GO=null;class AmazonPayWidget extends dt.Element{constructor(){super(...arguments),this.userData=null}static show(e){const{publicConfig:t}=e.amazonPaymentProcessor;this.isReady?this.insertModal(e):(window.onAmazonLoginReady=()=>{amazon.Login.setClientId(t.clientId),amazon.Login.setSandboxMode(t.sandbox),amazon.Login.setMerchantID(t.merchantId),this.isReady=!0,this.insertModal(e)},bA(t.sandbox?"https://static-na.payments-amazon.com/OffAmazonPayments/us/sandbox/js/Widgets.js":"https://static-na.payments-amazon.com/OffAmazonPayments/us/js/Widgets.js"))}statthorize(VO,(()=>this.create(document.body,e)))}static requestWidgetInSDK(e,t){this.finishCallback=t,e=e.toSDK(),mp.sendToSDK(hp.REQUEST_AMAZON_PAY,{amazonPaymentProcessor:e}),this.addedSDKListeners||(this.addedSDKListeners=!0,mp.addListener(hp.AMAZON_PAY_EVENT,(e=>{this.finishCallback(e.orderReferenceId),this.finishCallback=null})))}extraNodeAttributes(e){e.setStyle({zIndex:99999910,height:"100%",width:"100%",position:"fixed",background:"gray",top:0,left:0,opacity:1,display:"flex",aoptions.amazonPaymentProcessor.publicConfig}getAmazonSellerId(){return this.getAmazonConfig().merchantId}updateRecurringPaymentConsent(e){const t="true"==e.getConsentStatus();this.okButton.updateOptions({disabled:!t})}finishFlow(e){if(e&&this.orderReferenceId){const{iframeElement:e}=this.options,t={orderReferenceId:this.orderReferenceId};!function(e,t){let i=[];const n=()=>{e.getAttributerEach((t=>e.contentWindow.postMessage(t,"*"))),i=[])};if(!e.getAttribute("htmlLoaded")){const i=zO.addListener(hp.IFRAME_HTML_LOADED,((r,s)=>{let{version:o}=r;s===e&&(e.setAttribute("htmlLoaded",!0),t===E.widget&&FO.dispatch(o),n(),i.remove())}))}return function(e,r){void 0===r&&(r={}),r.type=dp(e),r.appType=t,i.push(r),n()}}(e,"panel")(hp.AMAZON_PAY_EVENT,t)}this.destroyNode()}render(){const e={fontFamily:"sans-serif",fontSize:14,height:40,width:120,borderRadius:4,cursor:"pointer",margin:"0px 8px"};return dt.createElement("div",{style:{width:"100%",maxWidth:375,boxSizing:"border-box",background:"white",padding:20}},dt.createElement("div",{id:"walletWidgetDiv",style:{height:228,width:"100%",marginBottom:16}}),dt.createElement("div",{id:"consentWidgetDiv",style:{height:140,width:"100%",margin:"16px 0px"}}),dt.createElement("div",{style:{marginTop:16,textAlign:"center"}},dt.createElement("button",{style:e,onClick:()=>this.finishFlow()},"Cancel"),dt.createElement("button",disablednc onAmazonAuth(e){this.showPaymentWidget()}showAddressWidget(){new OffAmazonPayments.Widgets.AddressBook({sellerId:this.getAmazonSellerId(),agreementType:"BillingAgreement",onReady:e=>{console.warn("Got billing agreement:",e.getAmazonBillingAgreementId(),e,performance.now())},onAddressSelect:e=>{console.warn("Address select:",e,performance.now())},design:{designMode:"responsive"},onError:e=>{console.error("Amazon address widget error:",e.getErrorCode(),e.getErrorMessage())}}).bind("addressBookWidgetDiv")}showPaymentWidget(){new OffAmazonPayments.Widgets.Wallet({sellerId:this.getAmazonSellerId(),design:{designMode:"responsive"},agreementType:"BillingAgreement",onReady:e=>{GO.billingAgreementId=e.getAmazonBillingAgreementId(),console.warn("Billing agreement",GO.billingAgreementId,e)},onOrderReferenceCreate:e=>{GO.orderReferenceId=e.getAmazonOrderReferenceId(),console.log("Order ref",GO.orderReferenceId,e)},onPaymentSelect:e=>{console.warn("Payment selected: ",this.orderReferenceId,e),GO.showRecurringPaymentConsentWidget()},onError:e=>{console.error("Amazon payment widget error:",e.getErrorCode(),e.getErrorMessage())}}).bind("walletWidgetDiv")}showRecurringPaymentConsentWidget(){new OffAmazonPayments.Widgets.Consent({sellerId:this.getAmazonSellerId(),amazonBillingAgreementId:this.orderReferenceId,design:{designMode:"responsive"},onReady:e=>{GOent:e=>{GO.updateRecurringPaymentConsent(e)},onError:e=>{console.error("Amazon payment widget error:",e.getErrorCode(),e.getErrorMessage())}}).bind("consentWidgetDiv")}onMount(){GO=this,this.showPaymentWidget()}}AmazonPayWidget.addedSDKListeners=!1;const WO="paypal-button-container";class PayPalWidget extends dt.Element{render(){return[dt.createElement("div",{id:WO,style:{height:42}})]}insertButtons(){var e;const{paymentProcessor:t}=this.options,i=t.publicKey,{paypal:n}=window;n.Button.render({env:null!=(e=t.publicConfig)&&e.sandbox?"sandbox":"production",client:{sandbox:i,production:i},style:{layout:"horizontal",color:"white",shape:"rect",label:"paypal",size:"large",tagline:!1,height:42,funding:{allowed:["paypal.FUNDING.CARD"],disallowed:["paypal.FUNDING.CREDIT"]}},payment:async(e,i)=>(await Zt.post("/external_providers/create_paypal_billing_agreement",{merchantId:t.merchantId})).tokenId,onApprove:(e,t)=>{const{onApprove:i}=this.options;console.warn("Approve",e,t),i(e)}},"#"+WO)}onMount(){const{paymentProcessor:e}=this.options;e.publicKey,bA("https://www.paypalobjects.com/api/checkout.js",(()=>{this.insertButtons()}))}}var jO,YO,KO,ZO,qO,$O;let XO=(jO=class InlineErrorStripeCardInputStyle extends BO{constructor(){super(...arguments),i(this,"errorMessage",YO,this)}},YO=n(jO.prototype,"errorMessage",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"absolute",top:-6,paddingBottom:0,left:0,transform:"translateY(calc(-100%))",fontWeight:this.themeProps.FONT_WEIGHT_BOLD,fontSize:this.themeProps.FONT_SIZE_SMALL,marginTop:0}}}),jO),JO=(KO=class CardFormStyle extends StyleSheet{constructor(){super(...arguments),i(this,"cardIcons",ZO,this),i(this,"cardIcon",qO,this)}},ZO=n(KO.prototype,"cardIcons",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"flex-end",marginBottom:10}}}),qO=n(KO.prototype,"cardIcon",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:8}}}),KO),QO=ct(JO)($O=class CardForm extends dt.Element{getDefaultOptions(){return{onChange:fe}}updateAltPayData(e,t){_f.paymentMethod.setAltPayOrderId(e,t),this.options.onChange()}getAltPaySection(){const e=[],i={merchantId:fr.merchantId,isActive:!0};_f.activeFlowHandler===_f.donation&&(i.supportsDonations=!0);const n=br.findBy(t({},i,{provider:mr.AMAZON})),r=br.findBy(t({},i,{provider:mr.PAYPAL}));if(n){constK(n,(e=>{this.updateAltPayData(mr.AMAZON,e)}));e.push(dt.createElement(gg,{style:{width:"100%",maxWidth:350,margin:"auto",padding:9,borderRadius:4,borderColor:"black",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},onClick:t},dt.createElement(Xg,{style:{display:"inline-block".updateAltPayData(mr.PAYPAL,e.billingToken)};e.push(dt.createElement(PayPalWidget,{paymentProcessor:r,onApprove:t,style:{width:"100%",maxWidth:368,margin:"auto",paddingTop:8}}))}return 0===e.length?null:dt.createElement("div",null,dt.createElement("div",{style:{textAlign:"center"}},e),dt.createElement("div",{style:{textAlign:"center",paddingTop:12}},"Or enter your card details below"))}render(){const{styleSheet:e}=this,t=fr.isCDSPaymentMethod()?HO:kO;Theme.register(kO,XO);const{altPayData:i}=_f.paymentMethod;return i?dt.createElement("div",null,"You have selected ",i.provider.toString()," for this payment.",dt.createElement(Kf,{style:{marginTop:er"},onClick:()=>this.updateAltPayData(null),label:"Use another payment method?"})):[this.getAltPaySection(),dt.createElement(HA,{ref:"nameInput",inputAttributes:{placeholder:Vt.addCardNameInput.toString(),autofocus:!0},initialValue:_f.paymentMethod.cardHolderName,validators:[{condition:()=>!this.nameInput.isEmpty()}],onBlur:()=>this.nameInput.validate(),onChange:()=>this.options.onChange()}),dt.createElement("div",{className:e.cardIcons},dt.createElement(Yg,{size:12,className:e.cardIcon}),dt.createElement(jg,{size:12,className:e.cardIcon}),dt.createElement(Wg,{size:12,className:e.cardIcon})),dt.createElement(t,{ref:"cardInput",autofocus:!1,onChange:()=>this.options.onChange()})]}isValid(){var e,t;return!!_f.paymentMethod.altPayData||(null==(e=this.cardInput)?void 0:e.isInputComplete())&&(null==(t=this.nameInput)?void 0:t.isValid())}getExtraCardData(){let e={};return this.nameInput&&(e.name=this.nameInput.getValue(),_f.paymentMethod.cardHolderName=e.name),e}async confirmCard(e){return void 0===e&&(e=_f.paymentMethod.scope),this.cardInput?this.cardInput.confirmCard(e,this.getExtraCardData()):{}}})||$O;var eD,tD,iD;let nD=(eD=class AddPaymentMethodComponentStyle extends StyleSheet{constructor(){super(...arguments),i(this,"saveCardCheckbox",tD,this)}},tD=n(eD.prototype,"saveCardCheckbox",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:12,fontSize:this.themeProps.FONT_SIZE_NORMAL+" !important",color:this.themeProps.TEXT_SECONDARY_COLOR+" !important"}}}),eD),rD=ct(nD)(iD=class AddPaymentMethodCturn{onChange:fe,testId:"payWithAddedCard"}}render(){const{styleSheet:e}=this,t=!fr.isCDSPaymentMethod()&&_f.paymentMethod.showSaveCardCheckbox;return[dt.createElement(QO,{ref:"cardForm",onChange:this.options.onChange}),t&&dt.createElement(bv,{ref:"storeCardCheckbox",testId:"storeCardCheckbox",className:e.saveCardCheckbox,initialValue:_f.paymentMethod.savePaymentMeth.paymentMethod.update({savePaymentMethod:e})})]}isValid(){return this.cardForm.isValid()}async getPaymentMethod(){var e;let t=_f.paymentMethod.scope;return null!=(e=this.storeCardCheckbox)&&e.getValue()&&(t=Nr.Scope.PUBLIC),this.cardForm.confirmCard(t)}})||iD;var sD,oD,aD;let lD=(sD=class MerchantUserResourcesAccessLinkStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",oD,this)}},oD=n(sD.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",marginLeft:8,">:last-child":{display:"inline-block",marginLeft:8}}}}),sD),cD=ct(lD)(aD=class MerchantUserResourcesAccessLink extends dt.Element{getDefaultOptions(){return{extraResourcesCount:null}}render(){const{extraResourcesCount:e}=this.options;return[Vt.or,dt.createElement(PanelLink,{href:a+"/login",newTab:!0,rel:"opener"},Vt.merchantUserResourcesAccessLink(e))]}})||aD;function uD(e){return zn()?null:e>0&&dt.createElement(cD,{extraResourcesCount:e})}var hD,dD,pD,mD;let gD=(hD=class AddNewOrLoadCardComponentStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",dD,this),i(this,"addNewCard",pD,this)}},dD=n(hD.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex"}}}),pD=n(hD.prototype,"addNewCard",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{cursor:"pointer",fontWeight:this.themeProps.FONT_WEIGHT_REGULAR,whiteSpace:"nowrap",display:"flex"}}}),hD),bD=ct(gD)(mD=class AddNewOrLoadCardComponent extends dt.Element{isValid(){return!1}async getPaymentMethod(){return this.options.card}render(){const{styleSheet:e}=this,{onAddCard:t}=this.options,i=eE.getExtraPaymentMethodCount();return[dt.createElement(Kf,{className:e.addNewCard,onClick:t},dt.createElement(vg,{size:12.25}),dt.createElement("span",null,Vt.addNewPaymentMethod)),uD(i)]}})||mD;var fD,yD,CD,SD;let ED=(fD=class PaymentAndDonationPanelStyle extends MC{constructor(){super(...arguments),i(this,"paymentDetailsSection",yD,this)}},yD=n(fD.prototype,"paymentDetailsSection",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginBottom:24}}}),fD),AD=ct(ED)((SD=class PaymentAndDonationPanel extends UC{constructor(){super(...arguments),this.forceAddCard=!1,this.allowRedraw=!0}isButtonDisabled(){var e;return!_f.donationDetails.isValid()||!(null!=(e=this.paymentMethodInput)&&e.isValid())}async donate(){this.allowRedraw=!1;const e=await this.paymentMethodInput.getPaymentMethod();_f.paymentMethod.update({selectedValue:e}),await _f.paymentAndDonationDetails.updateAndResolve(),this.allowRedraw=!0,this.redraw()}redraw(){this.allowRedraw&&super.redraw()}renderExistingPaymentMethodInput(){return _f.paymentMethod.selectedValue?dt.createElement(TO,{ref:"paymentMethodInput"}):fr.isCDSPaymentMethod()?null:eE.getExtraPaymentMethodCount()>0&&!this.forceAddCard&&dt.createElement(bD,{onAddCard:()=>{this.forceAddCard=!0,this.redraw()}})}renderPaymentMethodInput(){return this.renderExistingPaymentMethodInput()||dt.createElement(rD,{ref:"paymentMethodInput",onChange:()=>this.redraw()})}render(){const{styleSheet:e}=this;return[dt.createElement("div",{className:e.paymentDetailsSection},dt.createElement("div",{className:e.title},Vt.paymentDetails),this.renderPaymentMethodInput()),dt.createElement(tO,{ref:"donateComponent",onChange:()=>this.redraw()}),dt.createElement(iS,{label:_f.donationDetails.getDonateComponentButtonLabel(),disabled:this.isButtonDisabled(),onClick:()=>this.donate(),className:e.actionButton})]}onMount(){super.onMount(),this.redraw()}},n(SD.prototype,"donate",[yb],Object.getOwnPropertyDescriptor(SD.prototype,"donate"),SD.prototype),CD=SD))||CD;var wD,TD,vD,OD,DD,RD,PD;let ID=(wD=class SubscriptionCoveragePerkStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",TD,this),i(this,"checkIcon",vD,this)}},TD=n(wD.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexDirection:"row",alignItems:"flex-start",color:this.themeProps.TEXT_SECONDARY_COLOR}}}),vD=n(wD.prototype,"checkIcon",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginRight:12,alignSelf:"normal"}}}),wD),LD=ct(ID)(OD=class SubscriptionCoveragePerk extends dt.Element{getDefaultOptions(){return t({},super.getDefaultOptions(),{text:null})}render(){return[dt.createElement(Rg,{className:this.styleSheet.checkIcon}),dt.createElement("div",null,this.options.text)]}})||OD,ND=(DD=class SubscriptionCoverageTitleStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",RD,this)}},RD=n(DD.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:this.themeProps.FONT_SIZE_LARGE,fontWeight:this.themeProps.FONT_WEIGHT_BOLD,margin:"auto",width:"fit-content"}}}),DD),_D=ct(ND)(PD=class SubscriptionCoverageTitle extends dt.Element{getDefaultOptions(){return t({},super.getDefaultOptions(),{coverageId:null})}render(){const{coverageId:e}=this.options,t=ld.get(e);return null==t?void 0:t.getName()}})||PD;var xD,MD,BD,kD,UD;let HD=(xD=class DonationSuccessPanelStyle extends MC{constructor(){super(...arguments),i(this,"title",MD,this),i(this,"icon",BD,this),i(this,"message",kD,this)}},MD=n(xD.prototype,"title",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({textAlign:"center"},this.themeProps.MERCHANT_TITLE_STYLE)}}),BD=n(xD.prototype,"icon",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginBottom:14,textAlign:"center",display:"block"}}}),kD=n(xD.prototype,"message",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.TEXT_SECONDARY_COLOR}}}),xD),zD=ct(HD)(UD=class DonationSuccessPanel extends UC{getMessageTop(){const e=eE.getLatestDonation(),t=fr.getMerchant().getName(),i=Qb.getUserEmail();return e.isRecurring()?Vt.donateThankYouMessageRecurring(t,i):Vt.donateThankYouMessageOneTime(t,i)}getMessageTitle(){const e=eE.getLatestDonation();return e.isRecurring()?Vt.donateThankYouTitleRecurring(e.formatPrice()):Vt.donateThankYouTitleOneTime(e.formatPrice())}getGuidelines(){const e=eE.getLatestDonation();return tm.forceHideWallet?null:e.isRecurring()?[dt.createElement(LD,{text:Vt.donateThankYouRecurringGuideline1}),dt.createElement(LD,{text:Vt.donateThankYouRecurringGuideline2})]:[dt.createElement(LD,{text:Vt.donateThankYouOneTimeGuideline1}),dt.createElement(LD,{text:Vt.donateThankYouOneTimeGuideline2})]}renderCrossSellNudge(){if(!tm.iframeParams.onSuccessCrossSell)return null;const e=eE.getActiveSubscription(),t=Wo.all();if(e||0===t.length)return null;const{styleSheet:i}=this;return[dt.createElement(MessageElement,{className:i.message,style:{fontSize:24,marginTop:16,marginBottom:16},message:"Before you go, we have a special offer just for you."}),dt.createElement(MessageElement,{className:i.message,message:"As a token of our appreciation, we invite you to become a TNR member for 50% off. A discounted membership includes exclusive content and unlimited digital accesswe also have plans that include a print subscription. Will you join our membership program?"}),dt.createElement(iS,{className:i.actionButton,onClick:()=>ZC(!1,!0)},"Yes, I want to learn more!"),dt.createElement(qf,{onClick:Jy,label:"No, thanks"})]}render(){const{styleSheet:e}=this;return[!fr.isMerchant(C)&&dt.createElement(Ig,{size:62,className:e.icon}),dt.createElement(MessageElement,{className:e.title,message:this.getMessageTitle()}),dt.createElement(MessageElement,{className:e.message,message:this.getMessageTop()}),dt.createElement("div",{className:e.message},Vt.donateThankYouBottomMessage),this.renderCrossSellNudge()||[this.getGuidelines(),dt.createElement(iS,{className:e.actionButton,onClick:Jy},Vt.ok)],!fr.isMerchant(C)&&dt.createElement(PromptManageAccountButton,{className:e.backButton})]}})||UD;var FD,VD,GD,WD;let jD=(FD=class EditDonationPanelStyle extends MC{constructor(){super(...arguments),i(this,"description",VD,this),i(this,"body",GD,this)}},VD=n(FD.prototype,"description",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline"}}}),GD=n(FD.prototype,"body",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.TEXT_SECONDARY_COLOR}}}),FD),YD=wT(Nr,nh)(WD=ct(jD)(WD=class EditDonationPanel extends UC{getDefaultOptions(){return t({},super.getDefaultOptions(),{title:Vt.editRecurringDonation})}isButtonDisabled(){if(!_f.donationDetails.isValid())return!0;const e=eE.getActiveRecurringDonation();return _f.donationDetails.getTotalAmount()===e.amount&&e.getPaymentMethod()===_f.paymentMethod.selectedValue}render(){const{styleSheet:e}=this,t=eE.getActiveRecurringDonation();return[dt.createElement("div",null,dt.createElement(MessageElement,{className:e.description,message:Vt.donatePageRecurringDonationMessage(t.formatPrice())}),dt.createElement(Rb,{value:Vt.here,style:{display:"inline-block"},href:my}),"."),!fr.isCDSPaymentMethod()&&dt.createElement(TO,{style:{marginTop:12,marginBottom:12}}),dt.createElement(tO,{ref:"editDonationComponent",onChange:()=>this.redraw()}),dt.createElement(iS,{ref:"button",label:_f.donationDetails.getEditDonationComponentButtonLabel(),disabled:this.isButtonDisabled(),onClick:()=>_f.donation.updateDonation(),className:e.actionButton})]}})||WD)||WD;var KD;let ZD=ct(HD)(KD=class EditDonationSuccessPanel extends UC{getEditDonationMessage(){const e=eE.getActiveRecurringDonation();return Vt.editDonationSuccessText1(e.formatPrice())}getGuidelines(){return tm.forceHideWallet?[]:[dt.createElement(LD,{text:Vt.editDonationSuccessGuideline1}),dt.createElement(LD,{text:Vt.editDonationSuccessGuideline2})]}render(){const{styleSheet:e}=this;return[!fr.isMerchant(C)&&dt.createElement(Ig,{className:e.icon}),dt.createElement("div",{className:e.title},Vt.editDonationSuccessTitle),dt.createElement(MessageElement,{className:e.message,message:this.getEditDonationMessage()}),dt.createElement("div",{className:e.message},Vt.editDonationSuccessText2),this.getGuidelines(),dt.createElement(iS,{className:e.actionButton,onClick:Jy},Vt.ok)]}})||KD;class CancelDonationPanel extends UC{getDefaultOptions(){return t({},super.getDefaultOptions(),{title:Vt.donatePageCancelDonationTitle})}render(){const{styleSheet:e}=this,t=fr.getMerchant().name;return[dt.createElement(MessageElement,{message:Vt.donatePageCancelDonationText1(t)}),dt.createElement(MessageElement,{message:Vt.donatePageCancelDonationText2(t)}),dt.createElement(iS,{label:Vt.donatePageCancelDonationButton,onClick:()=>_f.donation.cancelActiveDonation(),className:e.actionButton}),dt.createElement(qf,null)]}}var qD,$D,XD,JD,QD;let eR=(qD=class PaymentFailedPanelStyle extends MC{constructor(){super(...arguments),i(this,"title",$D,this),i(this,"icon",XD,this),i(this,"message",JD,this)}},$D=n(qD.prototype,"title",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({textAlign:"center"},this.themeProps.MERCHANT_TITLE_STYLE)}}),XD=n(qD.prototype,"icon",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",alignItems:"center",justifyContent:"center"}}}),JD=n(qD.prototype,"message",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.TEXT_SECONDARY_COLOR}}}),qD),tR=ct(eR)(QD=class PaymentFailedPanel extends UC{formatPaymentErrorMessage(e){let t=(e||"").toString().trim();return t.length?("."!==t.slice(-1)&&(t+="."),t+=" ",t):t}render(){const{styleSheet:e,themeProps:t}=this;return[!fr.isMerchant(C)&&dt.createElement(Pg,{className:e.icon,size:72,color:t.TEXT_SECONDARY_COLOR}),dt.createElement("div",{testId:"subscribeFailedTitle",className:e.title},Vt.paymentFailed),dt.createElement("div",{testId:"subscribeFailedMessage",className:e.message},fr.isMerchant(C)?dt.createElement(MessageElement,{message:Vt.tnrContactCustomerSupport}):[this.formatPaymentErrorMessage(_f.paymentMethod.getPaymentErrorMessage()),Vt.subscribeFailedMessage]),dt.createElement(iS,{label:Vt.editPaymentDetails,className:e.actionButton,onClick:()=>_f.back()}),dt.createElement(Kf,{centered:!0,label:Vt.retryPayment,onClick:()=>{(_f.paymentMethod.retryPayment||_f.paymentMethod.onSelectSuccess)()}})]}onMount(){super.onMount(),this.attachListener(_f.paymentMethod,(()=>this.redraw()))}})||QD;var iR;let nR=ct(eR)(iR=class DonationCanceledPanel extends UC{getGuidelines(){if(tm.forceHideWallet)return[];const{styleSheet:e}=this;return[dt.createElement("div",{className:e.message},Vt.donationCanceledText2),dt.createElement(LD,{text:Vt.donationCanceledGuideline1}),dt.createElement(LD,{text:Vt.donationCanceledGuideline2})]}render(){const{styleSheet:e}=this,t=_f.donation.previouslyCanceledDonation,i=fr.getMerchant().name;return[!fr.isMerchant(C)&&dt.createElement(Pg,{className:e.icon,color:this.themeProps.TEXT_SECONDARY_COLOR}),dt.createElement("div",{className:e.title},Vt.donatePageDonationCanceledTitle),dt.createElement(MessageElement,{className:e.message,message:Vt.donationCanceledText1(t.formatPrice())}),this.getGuidelines(),dt.createElement(iS,{onClick:qy,className:e.actionButton},Vt.returnToHomepage(i)),dt.createElement(Kf,{value:Vt.makeAnotherDonation,className:e.backButton,onClick:()=>KC()})]}})||iR;var rR,sR,oR,aR,lR;let cR=(rR=class AddressDescriptionStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",sR,this),i(this,"nameOnAddress",oR,this),i(this,"addressDetails",aR,this)}},sR=n(rR.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.TEXT_SECONDARY_COLOR}}}),oR=n(rR.prototype,"nameOnAddress",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginBottom:4}}}),aR=n(rR.prototype,"addressDetails",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexDirection:"column"}}}),rR),uR=ct(cR)(lR=class AddressDescription extends dt.Element{render(){const{styleSheet:e}=this,{userAddress:t}=this.options;return[dt.createElement("div",{className:e.nameOnAddress},t.getRecipientName()),dt.createElement("div",{className:e.addressDetails},t)]}})||lR;var hR,dR,pR,mR,gR,bR,fR;let yR=(hR=class SubscribeReviewOrderPanelStyle extends MC{constructor(){super(...arguments),i(this,"reviewItem",dR,this),i(this,"reviewItemTitleContainer",pR,this),i(this,"reviewItemDescription",mR,this),i(this,"reviewItemTitle",gR,this),i(this,"lineSeparator",bR,this)}},dR=n(hR.prototype,"reviewItem",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:this.themeProps.FONT_SIZE_NORMAL,marginBottom:14}}}),pR=n(hR.prototype,"reviewItemTitleContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"space-between"}}}),mR=n(hR.prototype,"reviewItemDescription",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.TEXT_SECONDARY_COLOR}}}),gR=n(hR.prototype,"reviewItemTitle",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textTransform:"uppercase",marginBottom:4,fontWeight:this.themeProps.FONT_WEIGHT_BOLD}}}),bR=n(hR.prototype,"lineSeparator",[Ap],{configuNT_FRAME_HEADER_BORDER_COLOR,marginBottom:14}}}),hR),CR=ct(yR)(fR=class SubscribeReviewOrderPanel extends UC{getDefaultOptions(){return t({},super.getDefaultOptions(),{title:Vt.reviewOrder})}render(){const{styleSheet:e}=this,{panelType:t}=tm,i=_f.address.selectedValue,n=_f.subscriptionPlan.selectedValue,{discountCode:r}=_f.subscriptionPlan,s=_f.subscriptionPlan.getDiscountInfo(n),o=s?n.formatPrice(s.finalPrice):"-",a=n.getCycleDuration(!0),l=t===A.giftSubscription?Vt.recipientAddress:Vt.address,c=t===A.giftSubscription?Vt.giftSubscriptionPaymentDescription:Vt.subscribePaymentDescription;return[dt.createElement("div",{className:e.reviewItem,testId:"subscriptionPlanSection"},dt.createElement("div",{className:e.reviewItemTitleContainer},dt.createElement("div",{className:e.reviewItemTitle},Vt.subscriptionPlan),dt.createElement(Kf,{value:Vt.change,testId:"changeSubscriptionPlanButton",onClick:()=>_f.promptAtStep(_f.subscriptionPlan)})),dt.createElement(MessageElement,{className:e.reviewItemDescription,message:Vt.subscriptionPlanDescription,args:[n.coverage.name,o,a]})),r&&[dt.createElement("div",{className:e.lineSeparator}),dt.createElement("div",{className:e.reviewItem,testId:"discountSection"},dt.createElement("div",{className:e.reviewItemTitleContainer},dt.createElement("div",{className:e.reviewItemTitle},Vt.discountCode)),dt.createElement(MessageElement,{className:e.reviewItemDescription,message:Vt.discountCodeApplied(r)}))],n.shouldCollectAddress()&&[dt.createElement("div",{className:e.lineSeparator}),dt.createElement("div",{className:e.reviewItem,testId:"addressSection"},dt.createElement("div",{className:e.reviewItemTitleContainer},dt.createElement("div",{className:e.reviewItemTitle},l),dt.createElement(Kf,{value:lick:()=>_f.address.prompt({inlineSubflow:!0})})),dt.createElement(uR,{userAddress:i}))],dt.createElement("div",{className:e.lineSeparator}),dt.createElement("div",{className:e.reviewItem,testId:"paymentMethodSection"},dt.createElement("div",{className:e.reviewItemTitle},Vt.payment),dt.createElement(MessageElement,{message:c,args:[o,a],className:e.reviewItemDescription}),_f.paymentMethod.selectedValue&&dt.createElement(TO,null)),dt.createElement(iS,{label:_f.paymentMethod.selectedValue?_f.paymentMethod.continueLabel:Vt.continueToPayment,onClick:()=>_f.subscriptionReview.updateAndResolve(),className:e.actionButton}),_f.renderBackButton()]}async onMount(){super.onMount(),this.attachListener(_f.subscriptionPlan,(()=>this.redraw()))}})||fR;var SR,ER,AR,wR,TR;let vR=(SR=class SubscribeSuccessPanelStyle extends MC{constructor(){super(...arguments),i(this,"title",ER,this),i(this,"icon",AR,this),i(this,"message",wR,this)}},ER=n(SR.prototype,"title",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({textAlign:"center"},this.themeProps.MERCHANT_TITLE_STYLE)}}),AR=n(SR.prototype,"icon",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",alignItems:"center",justifyContent:"center"}}}),wR=n(SR.prototype,"message",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.TEXT_SECONDARY_COLOR}}}),SR),OR=ct(vR)(TR=class SubscribeSuccessPanel extends UC{getGuidelines(){return tm.forceHideWallet?[]:[dt.createElement(LD,{text:Vt.subscribeThankYouGuideline1}),dt.createElement(LD,{text:Vt.subscribeThankYouGuideline2})]}renderCrossSellNudge(){if(!tm.iframeParams.onSuccessCrossSell)return null;if(!$u.getAvailable()[0])return null;const e=eE.getLatestDonation();return e&&(Date.now(),new Date(e.createdAt).getTime()),null}render(){const{styleSheet:e}=this,t=_f.subscriptionPlan.selectedValue;let i;return i=fr.isMerchant(C)?[dt.createElement("div",{testId:"subscribeModalThankYouTitle",className:e.title},Vt.subscribeThankYouTitle),dt.createElement(MessageElement,{className:e.message,message:Vt.subscribeThankYouText(t.coverage.name)}),dt.createElement("div",{className:e.message},Vt.tnrSubscribeSuccess),dt.createElement(MessageElement,{className:e.message,message:Vt.subscribeAndEditSuccess(fr.getMerchant().getName())})]:[dt.createElement(Ig,{className:e.icon,size:72,color:e.themeProps.TEXT_SECONDARY_COLOR}),dt.createElement("div",{testId:"subscribeModalThankYouTitle",className:e.title},Vt.subscribeThankYouTitle),dt.createElement("div",{className:e.message},Vt.subscribeThankYouText(t.coverage.name))],[i,this.renderCrossSellNudge()||[this.getGuidelines(),dt.createElement(iS,{onClick:Jy,className:e.actionButton},Vt.ok)],!fr.isMerchant(C)&&dt.createElement(PromptManageAccountButton,{className:e.backButton})]}})||TR;var DR,RR,PR;let IR=(DR=class BlinkTextAreaStyle extends UA{constructor(){super(...arguments),i(this,"inputContainer",RR,this),i(this,"input",PR,this)}},RR=n(DR.prototype,"inputContainer",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:106}}}),PR=n(DR.prototype,"input",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"12px 5px",overflow:"auto",resize:"none"}}}),DR);class GiftSubscriptionDetailsPanel extends UC{getDefaultOptions(){return t({},super.getDefaultOptions(),{title:Vt.giftDetails})}render(){const{styleSheet:e}=this,{beneficiaryEmailAddress:t,name:i,message:n}=_f.giftSubscriptionDetails;return[dt.createElement(HA,{ref:"emailInput",testId:"giftEmailInput",label:Vt.giftEmail,inputAttributes:{type:"email"},onChange:e=>{_f.giftSubscriptionDetails.update({beneficiaryEmailAddress:e}),this.redraw()},initialValue:t}),dt.createElement(HA,{ref:"nameInput",testId:"giftNameInput",label:Vt.giftName,initialValue:i,onChange:()=>this.redraw()}),dt.createElement(HA,{ref:"messageInput",testId:"giftMessageInput",label:Vt.giftMessage,styleSheet:IR,onChange:()=>this.redraw(),initialValue:n,InputClass:TextArea}),dt.createElement(iS,{label:Vt.continue,className:e.actionButton,disabled:this.isButtonDisabled(),onClick:()=>this.continue()}),dt.createElement(qf,null)]}continue(){_f.giftSubscriptionDetails.updateAndResolve({beneficiaryEmailAddress:this.emailInput.getValue(),name:this.nameInput.getValue(),message:ftSubscriptionDetails.beneficiaryEmailAddress}}var LR;let NR=ct(vR)(LR=class GiftSubscriptionSuccessPanel extends UC{getGuidelines(){return[UI.createElement(LD,{text:Vt.giftSubscriptionSuccessGuideline1}),UI.createElement(LD,{text:Vt.giftSubscriptionSuccessGuideline2})]}render(){const{styleSheet:e}=this;return[UI.createElement(Ig,{className:e.icon}),UI.createElement("div",{testId:"subscribeModalThankYouTitle",className:e.title},Vt.giftSubscriptionSuccessTitle),UI.createElement("div",{className:e.message},Vt.giftSubscriptionSuccessText),this.getGuidelines(),UI.createElement(iS,{onClick:Jy,className:e.actionButton},Vt.ok),UI.createElement(PromptManageAccountButton,{className:e.backButton})]}})||LR;var _R,xR,MR,BR,kR,UR,HR;let zR=(_R=class UserDashboardSectionStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",xR,this),i(this,"separator",MR,this),i(this,"header",BR,this),i(this,"title",kR,this),i(this,"headerTitle",UR,this)}},xR=n(_R.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"12px 0"}}}),MR=n(_R.prototype,"separator",[Ap],{configuttom:"0.5px solid #E5E5E5",paddingBottom:24}}}}),BR=n(_R.prototype,"header",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"space-between",marginBottom:8}}}),kR=n(_R.prototype,"title",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:ve()?this.themeProps.FONT_SIZE_LARGE:18,fontWeight:this.themeProps.FONT_WEIGHT_BOLD}}}),UR=n(_R.prototype,"headerTitle",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:ve()?this.themeProps.FONT_SIZE_LARGE:18,fontWeight:this.themeProps.FONT_WEIGHT_BOLD,textTransform:"uppercase",marginBottom:8}}}),_R),FR=ct(zR)(HR=class UserDashboardSection extends dt.Element{getDefaultOptions(e){return t({},super.getDefaultOptions(e),{action:null,secondaryAction:null,titleMessage:"",headerTitle:"",hideSeparator:!1})}extraNodeAttributes(e){super.extraNodeAttributes(e),this.options.hideSeparator||e.addClass(this.styleSheet.separator)}getChildrenToRender(){const{styleSheet:e}=this,{titleMessage:t,headerTitle:i,action:n,secondaryAction:r}=this.options;return[i&&dt.createElement("div",{className:e.headerTitle},i),dt.createElement("div",{className:e.header},t&&dt.createElement("div",{className:e.title},t),dt.createElement("div",{style:{flex:1}}),r&&dt.createElement(Kf,{onClick:r[1],style:{marginRight:12},label:r[0]}),n&&dt.createElement(Kf,{onClick:n[1],label:n[0]})),this.render()]}})||HR;var VR,GR,WR,jR,YR,KR;let ZR=(VR=class UserDashboardTabStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",GR,this),i(this,"button",WR,this),i(this,"textSection",jR,this),i(this,"cancel",YR,this)}},GR=n(VR.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{minHeight:"100%",padding:"12px 24px",fontSize:ve()?this.themeProps.FONT_SIZE_SMALL:this.themeProps.FONT_SIZE_NORMAL}}}),WR=n(VR.prototype,"button",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:191}}}),jR=n(VR.prototype,"textSection",[Ap],{configurgin:"8px 0",":>last-child":{marginBottom:0}}}}),YR=n(VR.prototype,"cancel",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{cursor:"pointer",marginTop:8,color:this.themeProps.ERROR_COLOR,":hover":{color:Qf(thisKR=class UserDashboardTab extends dt.Element{})||KR;class EndpointPaginator extends Dispatchable{constructor(e,t,i,n){void 0===i&&(i={}),void 0===n&&(n={}),super(),this.totalEntriesCount=0,this.lastPageRequested=null,this.lastPageLoaded=null,this.fetchingNow=!1,this.lastResponse=null,this.store=e,this.endpoint=t,this.filters=i,this.storeFilters=n,this.filters.pageSize=this.filters.pageSize||10}isLoading(){return this.fetchingNow}getError(){return this.error}getPageSize(){return this.filters.pageSize}g null==(e=this.lastResponse)?void 0:e.results}getRange(e){void 0===e&&(e=this.lastPageLoaded);const t=this.getPageSize();return[Math.max(0,Math.min(this.getTotalEntries(),(e-1)*t+1)),Math.min(this.getTotalEntries(),e*t)]}async fetchPage(e,i){void 0===e&&(e=this.lastPageRequested),void 0===i&&(i=!0);const n=t({page:e=Math.min(e,this.getNumPages())},this.filters);let r=null;this.error=null,this.fetchingNow=!0,this.lastPageRequested=e,this.dispatch("pageRequested",e,this);try{r=this.lastResponse=await async function(e,t,i){const n=await Zt.get(t,i);return n.results=e.load(n),n}(this.store,this.endpoint,n)}catch(e){if(this.error=e,this.dispatch("pageLoadFailed",e),i)throw e;return}finally{this.fetchingNow=!1}this.lastPageLoaded=e,this.totalEntriesCount=r.count;const s=r.results;return this.loadedLastPage=s.length<this.filters.pageSize||r.count===this.getPageSize()*e,c fetchFirstPage(){return this.fetchPage(1)}async fetchLastPage(){if(this.lastPageRequested!=this.getNumPages())return this.fetchPage(this.getNumPages())}getNumPages(){return Math.max(1,Math.ceil(this.totalEntriesCount/this.getPageSize(etPageSize(e){this.updateFilter({pageSize:e})}updateFilter(e){let t=!1;for(const[i,n]of Object.entries(e||{}))Ae(this.filters[i],n)||(this.filters[i]=n,t=!0);!t&&this.lastPageRequested||th&this.lastPageRequested===this.lastPreturn this.store.filterBy(this.storeFilters)}}var $R,XR,JR,QR,eP,tP,iP,nP,rP,sP,oP,aP;let lP=($R=class BaseCardStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",XR,this),this.cardSectionCommon={width:"100%"},i(this,"cardHeader",JR,this),i(this,"cardContent",QR,this),i(this,"cardFooter",eP,this),i(this,"title",tP,this),i(this,"description",iP,this),i(this,"settingDescription",nP,this)}},XR=n($R.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"relative",display:"flex",flexDirection:"column",margin:()=>ve()?"0 12px 24px":"0 0 36px",boxShadow:this.themeProps.BASE_CARD_SHADOW,padding:()=>ve()?"18px":"24px",background:this.themeProps.BASE_CARD_BACKGROUND,width:this.themeProps.BASE_CARD_WIDTH,maxWidth:()=>ve()?"calc(100vw - 24px)":this.themeProps.BASE_CARD_MAX_WIDTH,borderRadius:12,zIndex:2}}}),JR=n($R.prototype,"cardHeader",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({},this.cardSectionCommon,{display:"flex","> *":{marginBottom:()=>ve()?12:24}})}}),QR=n($R.prototype,"cardContent",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.cardSectionCommon,{height:"fit-content"}]}}),eP=n($R.prototype,"cardFooter",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[this.cardSectionCommon,{"> *":{marginTop:()=>ve()?12:24}}]}}),tP=n($R.prototype,"title",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{flex:1,fontSize:20,color:this.themeProps.BASE_CARD_TITLE_COLOR}}}),iP=n($R.prototype,"description",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:16,color:this.themeProps.DASHBOARD_DESCRIPTION_COLOR,lineHeight:20,marginBottom:24,":last-child":{marginBottom:0}}}}),nP=n($R.prototype,"settingDescription",[Ap],{configus.DASHBOARD_DESCRIPTION_COLOR,marginBottom:8}}}),$R),cP=ct(lP)(rP=class BaseCard extends dt.Element{getDefaultOptions(){return{title:"",description:"",action:null}}getChildrenToRender(){const{styleSheet:e}=this;return[dt.createElement("div",{className:e.cardHeader},this.renderHeader()),dt.createElement("div",{className:e.cardContent},this.renderContent()),dt.createElement("div",{className:e.cardFooter},this.renderFooter())]}renderHeader(){const{styleSheet:e}=this,{title:t,action:i}=this.options;let n=null;return"function"==typeof i&&(n=i()),[t?dt.createElement("div",{className:e.title},t):null,n?dt.createElement("div",{className:e.actionElement},n):null]}renderContent(){const{description:e}=this.options;return[e&&dt.createElement(MessageElement,{className:this.styleSheet.description,message:e}),this.render()]}renderFooter(){}})||rP,uP=(sP=class EditableBaseCardStyle extends lP{constructor(){super(...arguments),i(this,"componentButton",oP,this),i(this,"buttonsContainer",aP,this)}},oP=n(sP.prototype,"componentButton",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{flex:1}}}),aP=n(sP.prototype,"buttonsContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",display:"flex",flexDirection:"row",">:not(:first-child)":{marginLeft:24}}}}this.editing=!1,this.confirmButtonDisabled=!0}getDefaultOptions(){return t({},super.getDefaultOptions(),{cancelButtonLabel:Vt.cancel,confirmButtonLabel:Vt.save,editButtonLabel:Vt.changeDetails})}getFooterButtons(){const{cancelButtonLabel:e,confirmButtonLabel:t,editButtonLabel:i}=this.options,{styleSheet:n}=this;return this.editing?[dt.createElement(iS,{ref:"cancelButton",testId:"cancelButton",className:n.componentButton,type:1,label:e,onClick:()=>this.toggleEditing()}),dt.createElement(iS,{ref:"confirmButton",testId:"confirmButton",className:n.componentButton,label:t,disabled:this.confirmButtonDisabled,onClick:()=>this.handleConfirmButtonClick()})]:dt.createElement(iS,{ref:"editButton",testId:"editButton",className:n.componentButton,label:i,onClick:()=>this.toggleEditing()})}renderFooter(){return dt.createElement("div",{className:this.styleSheet.buttonsContainer},this.getFooterButtons())}handleConfirmButtonClick(){}executeEditToggleActions(){}setConfirmButtonDisabled(e){void 0===e&&(e=!0),this.confthis.redraw(),this.executeEditToggleActions()}isEditingEnabled(){re(e){this.loadingElement=null,this.uiElement=e}getPaginator(){return this.uiElement.paginator}showLoadingElement(){this.loadingElement||(this.loadingElement=gb.create(this.uiElement,{style:{marginTop:24}}))}hideLoadingElement(){this.loadingElement&&this.loadingElement.destroyNode()}async fetchPages(){const e=this.getPaginator();if(e.haveLoadedLastRequestedPage())this.hideLoadingElement();else{this.showLoadingElement();try{await e.fetchNextPage(),this.uiElement.redraw(),await this.fetchPages()}catch(e){this.hideLoadingElement(),Xb.showError(e)}}}attach(){this.uiElement.attachChangeListener(this.getPaginator().store,(()=>this.uiElement.redraw())),this.fetchPages()}}var hP,dP,pP,mP,gP,bP;let fP=(hP=class UserDashboardPaymentsTableStyle extends StyleSheet{constructor(){super(...arguments),i(this,"listItem",dP,this),i(this,"header",pP,this),i(this,"cardIcon",mP,this),i(this,"paymentDetails",gP,this)}},dP=n(hP.prototype,"listItem",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"12px 18px",borderBottom:"1px solid #E5E5E5",display:"flex"}}}),pP=n(hP.prototype,"header",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",padding:"14px 18px",background:this.themeProps.MERCHANT_FRAME_HEADER_BACKGROUND,color:this.themeProps.MERCHANT_FRAME_CLOSE_BUTTON_COLOR}}}),mP=n(hP.prototype,"cardIcon",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginRight:12,display:"inline-block"}}}),gP=n(hP.prototype,"paymentDetails",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",">:first-child":{fontSize:this.themeProps.FONT_SIZE_NORMAL},">:last-child":{fontSize:this.themeProps.FONT_SIZE_SMALL}}}}),hP),yP=ct(fP)(bP=class UserDashboardPaymentsTable extends dt.Element{constructor(){super(...arguments),this.paginator=new EndpointPaginator(os,os.API_LIST_ENDPOINT,{resourceTypes:[this.options.resourceType]},{resourceType:this.options.resourceType}),this.paginationHandler=new UIPaginationManager(this),this.columns=[{headerMessage:Vt.description,elementBuilder:e=>this.renderPaymentDetails(e),textAlign:"left",justifyContent:"",flex:.5},{headerMessage:Vt.amount,elementBuilder:e=>this.renderPaymentAmount(e),textAlign:"left",justifyContent:"",flex:.25},{headerMessage:Vt.date,elementBuilder:e=>this.renderPaymentDate(e),textAlign:"center",justifyContent:"space-around",flex:.25}]}getDefaultOptions(){return t({},super.getDefaultOptions(),{resourceType:""})}renderPaymentDetails(e){const{styleSheet:t}=this,i=null==e?void 0:e.getPaymentMethod(),n=fO(i);let r="";return"subscription"===e.resourceType?r=Ac.get(e.resourceId).coverage.name:"donation"===e.resourceType&&(r=nh.get(e.resourceId).isRecurring()?Vt.recurring:Vt.oneTime),[dt.createElement(PaymentMethodIcon,{className:t.cardIcon,brand:null==i?void 0:i.getBrand(),size:16}),dt.createElement("div",{className:t.paymentDetails},dt.createElement("b",null,r),dt.createElement("div",null,n))]}renderPaymentAmount(e){rnt())}renderPaymentDate(e){return e.createdAt}getPayments(){return this.paginator.all().filter(nt().id)).sort(((e,t)=>t.createdAt-e.createdAt))}render(){const{styleSheet:e}=this,t=this.getPayments();return t.length?[dt.createElement("div",{className:e.header},this.columns.map((e=>{let{headerMessage:t,textAlign:i,flex:n}=e;return dt.createElement("div",{style:{textAlign:i,flex:n,textTransform:"capitalize"}},t)}))),t.map((t=>dt.createElement("div",{className:e.listItem},this.columns.map((e=>{let{elementBuilder:i,textAlign:n,flex:r,justifyContent:s}=e;return dt.createElement("div",{style:{textAlign:n,flex:r,justifyContent:s,display:"flex",alignper.onMount(),this.paginationHandler.attach()}})||bP;var CP,SP,EP,AP;let wP=(CP=class UsingBlinkDefaultPaymentMethodStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",SP,this),i(this,"icon",EP,this)}},SP=n(CP.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",alignItems:"center"}}}),EP=n(CP.prototype,"icon",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",marginRight:14}}}),CP),TP=ct(wP)(AP=class UsingBlinkDefaultPaymentMethod extends dt.Element{render(){const{styleSheet:e}=this;return[dt.createElement(Gg,{className:e.icon}),Vt.usingBlinkDefault]}})||AP;function vP(e){return e.billedUserId&&e.billedUserId!==Ee.userId?Vt.noPaymentMethodForThisSubscriptionGifted:Vt.noPaymentMethodForThisSubscription}var OP;let DP=wT(Nr,Au,Ac)(OP=class UserDashboardSubscriptionTab extends qR{getDefaultOptions(){return t({},super.getDefaultOptions(),{title:Vt.itSubscription,_f.startPlanFromActiveHandler()}async editAddress(){_f.editSubscription.getFlowPlan(),_f.subscriptionPlan.update({applyPolicy:Cc});const e=_f.editSubscriptionowPlan([_f.address.update({shouldPrompt:()=>!0}),_f.editSubscriptionConfirmation]);_f.startPlan(e)}async editPaymentMethod(){_f.editSubscription.getFlowPlan(),await _f.paymentMethod.prompt({continueLabel:Vt.updatePaymentMethod}),await _f.editSubscription.finalize()}cancelSubscription(e){gE.subscriptionToCancel=e,_f.subscriptionPlan.init({subscriptionPlanState:uE,selectedValue:null}),Router.changeURL(Cy)}renderBafflerArchiveLink(e){if(!fr.isMerchant(S))return null;const t=e.getShippingAddress();if(!t)return null;let i="https://www.ezsubscription.com/webreader/#/login/baffler/general";function n(e){return(e=btoa(e)).endsWith("=")&&(e=e.substring(0,e.length-1)),e.endsWith("=")&&(e=e.substring(0,e.length-1)),e}return i+=`?email=${n(Qb.getUserEmail())}`,"United States"===t.country?i+=`&zip=${n(t.postalCode)}`:i+="&country=F",dt.createElement(FR,{titleMessage:"Ebook Library"},"Access the ebook library by logging in with your email and zip code ",dt.createElement(Rb,{newTab:!0,href:i.toString(),label:"here"}),".")}renderSubscription(){const{styleSheet:e}=this,t=eE.getActiveSubscription();if(!t)return[dt.createElement(FR,{titleMessage:Vt.subscriptionPlanTitle,headerTitle:Vt.activeSubscription},dt.createElement(MessageElement,{className:e.textSection,message:Vt.notSubscribedToMerchant,args:[fr.getMerchant().name]}),dt.createElement(iS,{label:Vt.subscribe,className:e.button,onClick:()=>ZC()}))];const i=t.getPaymentMethod(),n=!fr.isCDSPaymentMethod()&&[Vt.change,()=>this.editPlan()],r=!fr.isCDSPaymentMethod()&&[Vt.change,()=>this.editPaymentMethod()];return[dt.createElement(FR,{headerTitle:Vt.activeSubscription,titleMessage:Vt.subscriptionPlanTitle,action:n,hideSeparator:!0},dt.createElement(MessageElement,{message:Vt.subscribedCurrentPlan,args:[t.coverage.name,t.formatPrice()],className:e.textSection}),fr.isMerchant(C)&&dt.createElement(MessageElement,{className:e.textSection,message:Vt.tnrDashboardPlanMessage}),!fr.isMerchant(C)&&this.renderCancelButton(t)),t.getShippingAddress()&&dt.createElement(FR,{titleMessage:Vt.inlineAddressSectionTitle,action:[Vt.change,()=>{tm.iframeParams.hasStepIndicator=!1,this.editAddress()}],hideSeparator:!0},dt.createElement(uR,{userAddress:t.getShippingAddress()})),this.renderBafflerArchiveLink(t),dt.createElement(FR,{titleMessage:Vt.paymentMethodTitle,action:r},i?dt.createElement(CO,{paymentMethod:t.getPaymentMethod()}):eE.hasPrimaryPaymentMethod()&&!fr.isCDSPaymentMethod()?[dt.createElement(TP,null),dt.createElement(MessageElement,{className:e.textSection,message:Vt.paymentMethodCharge,args:[t.getPrice(),t.billingPlan.getCycleDuration(!0)]})]:dt.createElement("div",{className:e.cardDetails},dt.createElement(MessageElement,{message:vP(t)}))),fr.isMerchant(C)?function(e){var t,i;if(!e)return null;const n=e.getCDSAccountNumber(),r=null==(t=e.extraData)||null==(t=t.customer)?void 0:t.zipCode,s=(null==(i=e.extraData)||null==(i=i.cdsProductId)?void 0:i.substr(0,3))||"NUB",o=r?`https://w1.buysub.com/servlet/RemoteLoginGateway?cds_mag_code=${s}&cds_pub_code=N2&cds_page_id=261319&cds_account_number=${n}&cds_zip=${r}&cds_query_type=Z&cds_login_type=S&cds_return_url=https://w1.buysub.com/servlet/FakeClient%3Frc%3D`:`https://w1.buysub.com/pubs/N2/${s}/login.jsp?cds_mag_code=${s}`;return dt.createElement(FR,{titleMessage:"Account Number"},dt.createElement("div",null,"Your customer support account number is ",dt.createElement("strong",null,n),"."),dt.createElement("div",null,"Manage your subscription account ",dt.createElement(Rb,{nt=e.extraData)?void 0:t.handlesSubscriptions)}))):null]}renderPaymentHistory(){return fr.isMerchant(C)?null:dt.createElement(FR,{headerTitle:Vt.paymentHistory},dt.createElement(yP,{resourceType:os.ResourceType.SUBSCRIPTION}))}renderCancelButton(e){return e.isActive()&&!e.isActiveButCanceled()?dt.createElement("div",{className:this.styleSheet.cancel,onClick:()=>this.cancelSubscription(e)},Vt.cancelSubscription):null}renderGiftedSubscriptions(){const{styleSheet:e}=this,i=JS(Ac.getActive()).filter((e=>{var t;return(null==(t=e.metadata)?void 0:t.gift)&&e.billedUserId===Qb.getUserId()}));return i.map(((n,r)=>dt.createElement(FR,t({titleMessage:Vt.subscriptionPlan,hideSeparator:r!==i.length-1},r?{}:{headerTitle:Vt.giftSubscription}),dt.createElement(MessageElement,{className:e.textSection,message:Vt.giftSubscriptionText,args:[n.user.getEmail(),n.coverage.name,n.formatPrice()]}),this.renderCancelButton(n))))}render(){return[this.renderSubscription(),this.renderGiftedSubscriptions(),this.renderPaymentHistory()]}})||OP;class ManageSubscriptionPanel extends UC{render(){return dt.createElement(DP,null)}}var RP;let PP=(n((RP=class EditSubscriptionCancelPanel extends UC{getDefaultOptions(){return t({},super.getDefaultOptions(),{title:Vt.editSubscriptionCancelTitle})}async cancelSubscription(e){await Oc(e.id),Router.changeURL(Sy)}render(){const e=gE.subscriptionToCancel||eE.getActiveSubscription(),{styleSheet:t}=this;return[dt.createElement(MessageElement,{className:t.description,message:Vt.editSubscriptionCancelText1(e.coverage.name,e.formatPrice(),e.getActiveUntil().format("MMMM DD, YYYY"))}),dt.createElement("div",{className:t.description},Vt.editSubscriptionCancelText2),dt.createElement(iS,lButton,onClick:()=>this.cancelSubscription(e),className:t.actionButton}),dt.createElement(qf,null)]}}).prototype,"cancelSubscription",[yb],Object.getOwnPropertyDescriptor(RP.prototype,"cancelSubscription"),RP.prototype),RP);var IP;let LP=ct(eR)(IP=class EditSubscriptionCancelSuccessPanel extends UC{render(){const{styleSheet:e}=this;return[!fr.isMerchant(C)&&dt.createElement(Pg,{className:e.icon,color:e.themeProps.TEXT_SECONDARY_COLOR}),dt.createElement("div",{className:e.title},Vt.subscriptionCanceled),dt.createElement(iS,{className:e.actionButton,onClick:Jy},Vt.ok)]}})||IP;var NP,_P,xP,MP,BP;let kP=(NP=class EditSubscriptionConfirmPanelStyle extends MC{constructor(){super(...arguments),i(this,"checkbox",_P,this),i(this,"lineSeparator",xP,this),i(this,"reviewItemTitle",MP,this)}},_P=n(NP.prototype,"checkbox",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:"inherit",fontSize:"inherit",marginBottom:8}}}),xP=n(NP.prototype,"lineSeparator",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",borderBottom:"1px solid "+this.themeProps.MERCHANT_FRAME_HEADER_BORDER_COLOR}}}),MP=n(NP.prototype,"reviewItemTitle",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textTransform:"uppercase",marginBottom:8,fontWeight:this.themeProps.FONT_WEIGHT_BOLD}}}),NP),UP=ct(kP)(BP=class EditSubscriptionConfirmPanel extends UC{getDefaultOptions(){return t({},super.getDefaultOptions(),{title:Vt.reviewChange})}render(){const{selectedOffer:e,applyPolicy:t}=_f.subscriptionPlan,i=eE.getActiveSubscription(),n=null==e?i.coverage:e.coverage,r=null==e?i.billingPlan:e.billingPlan,s=_f.subscriptionPlan.getDiscountInfoOnInstantChangePolicy(e)||i.nextCyclePrice,o=_f.subscriptionPlan.getDiscountInfo(e)||i.nextCyclePrice,{styleSheet:a}=this,l=i.getPaidUntil(),c=i.getNextBillingDate(),u=[r.formatPrice(o.finalPrice),r.getCycleDuration(!0),c.format("MMM DD, YYYY")],h=t===Sc?[Vt.updateAtEndCyclePaymentInfo(...u),_f.subscriptionPlan.userHasEquivalentSubscriptionToSelected()?"":Vt.updateAtEndCycleChangeOffer].join(""):Vt.updateInstantlyPaymentInfo(r.formatPrice(s.finalPrice),...u);let d=null;return s.finalPrice!==o.finalPrice&&(d=UI.createElement(bv,{label:Vt.updateAtEndCycleCheckbox(l.format("MMM DD, YYYY")),className:a.checkbox,onChange:e=>{_f.subscriptionPlan.applyPolicy=e?Sc:Cc,this.redraw()},initialValue:t===Sc})),[!_f.subscriptionPlan.userHasEquivalentSubscriptionToSelected()&&UI.createElement("div",null,UI.createElement("div",{className:a.reviewItemTitle},Vt.subscriptionPlan),UI.createElement(MessageElement,{message:Vt.updateSubscriptionPlanDescription(n.name,r.formatPrice(o.finalPrice))}),UI.createElement("div",{className:a.lineSeparator})),(n.requiresAddress||null!=e&&e.shouldCollectAddress())&&UI.createElement("div",null,UI.createElement("div",{className:a.reviewItemTitle},Vt.address),UI.createElement(MessageElement,{message:Vt.updateSubscriptionPlanAddress(_f.address.selectedValue.toString())}),UI.createElement("div",{className:a.lineSeparator})),!_f.subscriptionPlan.userHasEquivalentSubscriptionToSelected()&&UI.createElement("div",null,UI.createElement("div",{className:a.reviewItemTitle},Vt.payment),d,UI.createElement(MessageElement,{message:h})),UI.createElement(iS,{label:Vt.changditSubscriptionConfirmation.updateAndResolve()}),UI.createElement(qf,null)]}})||BP;class EditSubscriptionSuccessPanel extends UC{getDefaultOptions(){return t({},super.getDefaultOptions(),{title:Vt.subscribeChangeSuccess})}render(){return[dt.createElement(MessageElement,{message:Vt.subscribeAndEditSuccess(fr.getMerchant().getName())}),dt.createElement(iS,{label:Vt.ok,ctionButton,onClick:()=>{Router.changeURL(Ry)}})]}}var HP,zP,FP,VP,GP,WP,jP,YP,KP,ZP,qP,$P,XP,JP,QP,eI,tI,iI,nI,rI,sI,oI,aI,lI,cI,uI,hI,dI,pI;HP=class HorizontalOverflowStyle extends StyleSheet{constructor(){super(...arguments),this.baseColor=()=>this.themeProps.COLOR_PRIMARY,this.arrowColor=()=>pm(this.baseColor(),.8),this.arrowBackground=()=>this.baseColor(),this.arrowHoverColor=()=>pm(this.baseColor(),1),this.arrowHoverBackground=()=>pm(this.baseColor(),-.3),this.transitionTime=.15,this.arrow={zIndex:"1",alignItems:"center",padding:".3em",fontSize:"150% !important",height:"100%",position:"absolute",cursor:"pointer",top:0,color:()=>this.arrowColor(),backgroundColor:()=>this.arrowBackground(),":hover":{color:()=>this.arrowHoverColor(),backgroundColor:()=>this.arrowHoverBackground()}},i(this,"leftArrow",zP,this),i(this,"rightArrow",FP,this),i(this,"horizontalOverflow",VP,this),i(this,"childrenContainer",GP,this),i(this,"swipeAnimation",WP,this),i(this,"hiddenArrow",jP,this),i(this,"pusherContainer",YP,this)}},zP=n(HP.prototype,"leftArrow",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object.assign({},this.arrow,{left:0,borderRight:()=>"2px solid "+this.arrowHoverBackground()})}}),FP=n(HP.prototype,"rightArrow",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object.assign({},this.arrow,{right:0,borderLeft:()=>"2px solid "+this.arrowHoverBackground()})}}),VP=n(HP.prototype,"horizontalOverflow",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"relative",width:"100%",">:first-child":{display:"flex"},">:last-child":{display:"flex"}}}}),GP=n(HP.prototype,"childrenContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",overflow:H.isMobileDevice()?"auto":"hidden",display:"flex"}}}),WP=n(HP.prototype,"swipeAnimation",[Ap],{configu:"margin-left "+this.transitionTime+"s ease"}}}),jP=n(HP.prototype,"hiddenArrow",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"none !important"}}}),YP=n(HP.prototype,"pusherContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{overflow:H.isMobileDevice()?"auto":"hidden",position:"relative",display:"flex",width:"100%"}}});let mI=(KP=class BaseTabAreaStyle extends StyleSheet{constructor(){super(...arguments),i(this,"tab",ZP,this),i(this,"activeTab",qP,this),i(this,"nav",$P,this),i(this,"switcher",XP,this),i(this,"tabArea",JP,this)}},ZP=n(KP.prototype,"tab",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{userSelect:"none",display:"inline-block",position:"relative"}}}),qP=n(KP.prototype,"activeTab",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),$P=n(KP.prototype,"nav",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{listStyle:"none"}}}),XP=n(KP.prototype,"switcher",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{flex:"1",overflow:"auto"}}}),JP=n(KP.prototype,"tabArea",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexDirection:"column"}}}),KP),gI=(QP=class DefaultTabAreaStyle extends mI{constructor(){super(...arguments),i(this,"tab",eI,this),i(this,"activeTab",tI,this),i(this,"nav",iI,this)}},eI=n(QP.prototype,"tab",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginBottom:"-1px",textDecoration:"none !important",marginRight:"2px",lineHeight:"1.42857143",border:"1px solid transparent",borderRadius:"4px 4px 0 0",padding:"8px",paddingLeft:"10px",paddingRight:"10px",":hover":{cursor:"pointer",backgroundColor:"#eee",color:"#555",border:"1px solid #ddd",borderBottomColor:"transparent"}}}}),tI=n(QP.prototype,"activeTab",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:"#555 !important",cursor:"default !important",backgroundColor:"#fff !important",border:"1px solid #ddd !important",borderBottomColor:"transparent !important"}}}),iI=n(QP.prototype,"nav",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderBottom:"1px solid #ddd",paddingLeft:"0",marginBottom:"0"}}}),QP);var bI;nI=class MinimalistTabAreaStyle extends mI{constructor(){super(...arguments),i(this,"tab",rI,this),i(this,"activeTab",sI,this),i(this,"nav",oI,this)}},rI=n(nI.prototype,"tab",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textDecoration:"none !important",lineHeight:"1.42857143",paddingTop:"6px",paddingLeft:"8px",paddingRight:"8px",paddingBottom:"4px",color:"#666",borderBottom:"2px solid transparent",":hover":{cursor:"pointer",color:"rgba(51,122,183,1)"}}}}),sI=n(nI.prototype,"activeTab",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontWeight:"bold",color:"rgba(51,122,183,1)",cursor:"default !important",borderBottom:"2px solid rgba(51,122,183,1) !important"}}}),oI=n(nI.prototype,"nav",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"relative",borderBottom:"1px solid #aaa"}}}),aI=class FlatTabAreaStyle extends mI{constructor(){super(...arguments),this.transitionTime=.3,i(this,"tab",lI,this),i(this,"activeTab",cI,this),i(this,"nav",uI,this),i(this,"activeBar",hI,this),i(this,"activeBarAnimated",dI,this),i(this,"activeOnRender",pI,this)}},lI=n(aI.prototype,"tab",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({textDecoration:"none !important",padding:()=>this.themeProps.FLAT_TAB_AREA_PADDING_SIDES,paddingBottom:()=>this.themeProps.FLAT_TAB_AREA_PADDING_SIDES-this.themeProps.FLAT_TAB_AREA_UNDERLINE_HEIGHT,borderBottom:()=>this.themeProps.FLAT_TAB_AREA_UNDERLINE_HEIGHT+"px solid rgba(0,0,0,0)",letterSpacing:"0.5px",color:()=>pm(this.themeProps.COLOR_FOREGROUND_BODY,.4)+"!important",fontWeight:"bold",":hover":{cursor:"pointer",color:()=>pm(this.themeProps.COLOR_FOREGROUND_BODY,.6)+"!important"}},this.themeProps.FLAT_TAB_AREA_TAB_STYLE)}}),cI=n(aI.prototype,"activeTab",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:()=>pm(this.themeProps.COLOR_FOREGROUND_BODY,.8)+"!important",cursor:"default !important"}}}),uI=n(aI.prototype,"nav",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{whiteSpace:"nowrap",position:"relative",paddingTop:"4px",backgroundColor:()=>this.themeProps.COLOR_FOREGROUND_BODY}}}),hI=n(aI.prototype,"activeBar",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:()=>this.themeProps.kgroundColor:()=>this.themeProps.COLOR_PRIMARY,position:"absolute",left:0,bottom:0}}}),dI=n(aI.prototype,"activeBarAnimated",[Ap],{configunTime}s width, ${this.transitionTime}s left`}}}),pI=n(aI.prototype,"activeOnRender",[Ap],{configurable:!0,enumerable:!0,writable:this.themeProps.FLAT_TAB_AREA_UNDERLINE_HEIGHT,borderBottom:()=>this.themeProps.FLAT_TAB_AREA_UNDERLINE_HEIGHT+"px solid "+this.themeProps.COLOR_PRIMARY+" !important"}}});class BasicTabTitle extends Rb{extraNodeAttributes(e){e.addClass(this.styleSheet.tab),this.optionsiveTab)}getDefaultOptions(){return{newTab:!1}}canOverwrite(e){return super.canOverwrite(e)&&this.options.panel===e.options.panel}setActive(e){this.options.active=e,this.redraw(),e&&this.options.activeTabDispatcher.setActie(!1)}))}getPanel(){return this.options.panel}getTitle(){if(this.options.title)return this.options.title;let e=this.getPanel();return"function"==ptions.title}render(){return[this.getTitle()]}onMount(){super.onMount(),this.options.active&&this.setActive(!0),this.addClickListener((()=>{this.setActive(!0)})),this.options.panel&&this.options.panel.addListener&&opt0)}))}}class TabTitleArea extends dt.Element{}letutes(e){e.addClass(this.styleSheet.tabArea)}createTabPanel(e){return[dt.createElement(BasicTabTitle,{panel:e,activeTabDispatcher:this.activeTabDispatcher,active:e.options.active,href:e.options.tabHref,styleSheet:this.styleSheet}),e]}appendChild(e,t){let[i,n]=this.createTabPanel(e);this.options.children.push(e),this.titleArea.appendChild(i),this.switcher.appendChild(n,t||!this.options.lazyRender)}getTitleArea(e){let t=this.styleSheet.nav;return this.options.titleAreaClass&&(t+=" "+this.options.titleAreaClass),dt.createElement(TabTitleArea,{ref:"titleArea",className:t},e)}getSwitcher(e){let t=this.styleSheet.switcher;return this.options.panelClass&&(t+=" "+this.options.panelClass),dt.createElement(Switcher,{className:t,ref:"switcher",lazyRender:this.options.lazyRender},e)}getChildrenToRender(){let e,t=[],i=[],n=$(this.render());this.switcher&&this.switcher.overwriteChildren(this.switcher.options.children||[],n);for(const r of n){let[n,s]=this.createTabPanel(r);const o=s.options&&s.options.key,a=this.activePanel&&this.activePanel.options&&this.activePanel.options.key;(this.activePanel===s||null!=o&&o===a)&&(e=n),t.push(n),i.push(s)}if(e)for(let n=0;n<i.length;n+=1){const r=t[n],s=i[n];r.options.active&&(r.options.active=!1),s.options.active&&(s.options.active=!1),e===r&&(s.options.active=!0,r.options.active=!0)}else for(const i of t)i.options.active&&(e=i);return this.options.autoActive&&!e&&t.length>0&&(t[0].options.active=tive(e){this.activeTabDispatcher.setActive(e)}getActivethis.switcher.setActive(e),this.activePanel=e}onMount().activeTabDispatcher,(e=>{thiesize",(()=>{this.switcher.dispatch("resize")}))}})||bI;var yI;let CI=wT(Nr)(yI=class UserDashboardDonationTab extends qR{getDefaultOptions(){return t({},super.getDefaultOptions(),{title:Vt.donations})}renderDonation(){const{styleSheet:e}=this,t=eE.getActiveRecurringDonation();return t?[dt.createElement(FR,{titleMessage:Vt.recurringDonation,action:[Vt.edit,()=>KC(!0)]},dt.createElement(MessageElement,{className:e.textSection,message:Vt.recurringDonorContributing(t.formatPrice())})),_f.donationDetails.getOptionsForDonor().allowOneTime&&dt.createElement(FR,{titleMessage:Vt.makeAnotherDonationTitle},dt.createElement(MessageElement,{className:e.textSection,message:Vt.makeAnotherDonationText}),dt.createElement(iS,{label:Vt.donate,className:e.button,onClick:()=>KC(!1,!0)}))]:[dt.createElement(FR,{titleMessage:Vt.donation},dt.createElement(MessageElement,{className:e.textSection,message:Vt.notRecurringDonorToMerchant(fr.getMerchant().name)}),dt.createElement(iS,{label:Vt.donate,className:e.button,onClick:()=>KC()}))]}renderPaymentHistory(){return dt.createElement(FR,{titleMessage:Vt.pastDonations},dt.createElemenrenderDonation(),this.renderPaymentHistory()]}})||yI;var SI,EI,AI,wI,TI,vI;let OI=(SI=class UserDashboardNewslettersTabStyle extends ZR{constructor(){super(...arguments),i(this,"checkboxesList",EI,this),i(this,"separatorLine",AI,this),i(this,"message",wI,this)}},EI=n(SI.prototype,"checkboxesList",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"16px 0"}}}),AI=n(SI.prototype,"separatorLine",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",height:.5,background:"#E5E5E5"}}}),wI=n(SI.prototype,"message",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:16}}}),SI),DI=wT(dA)(TI=ct(OI)((n((vI=class UserDashboardNewslettersTab extends qR{getDefaultOptions(){return t({},super.getDefaultOptions(),{title:Vt.newslettersTitle})}async update(e,t){void 0===e&&(e=[]),void 0===t&&(t=pA);const i=Qb.getUserEmail(),{merchantId:n}=fr,r=Ml.getByUserAndMerchant(Qb.getUserId(),n),s={emailAddress:i,merchantId:n,newsletterIds:e,updateType:t},o=this.promotionalEmailsCheckbox.getValue();o!==r.canReceivePromotionalEmails&&(s.canReceivePromotionalEmails=o),await mA(s),Xb.showSuccess(Vt.changesSaved)}render(){const{styleSheet:e}=this,t=_f.newsletter.getNewsletters(),i=fr.getMerchant().name,n=Ml.getByUserAndMerchant(Qb.getUserId(),fr.merchantId),r=t.map((t=>dt.createElement(bv,{label:t.name,onChange:e=>this.update([t.id],e?pA:"unsubscribe"),initialValue:null!=dA.find((e=>e.isSubscribed()&&e.audience===t)),className:e.textSection})));return dt.createElement(FR,{titleMessage:dt.createElement(MessageElement,{message:Vt.signUpForMerchantNewsletter,args:[i]})},dt.createElement(MessageElement,{message:Vt.newslettersEditDescription(Qb.getUserEmail())}),dt.createElement("div",{className:e.checkboxesList},r,r.length>0&&dt.createElement("div",{className:e.separatorLine}),dt.createElement(bv,{ref:"promotionalEmailsCheckbox",label:Vt.allowPromotionalEmailsFromMerchant(i),className:e.textSection,onChange:()=>this.update(),initialValue:!n||n.canReceivePromotionalEmails})),dt.createElement(MessageElement,{message:Vt.newsletterDashboardEmailDescription(Qb.getUserEmail()),className:e.message}))}}).prototype,"update",[yb],Object.getOwnPropertyDescriptor(vI.prototype,"update"),vI.prototype),TI=vI))||TI)||TI;var RI,PI,II,LI,NI;let _I=(RI=class AnchoredPopupStyle extends StyleSheet{constructor(){super(...arguments),this.transitionTime=200,i(this,"transition",PI,this),i(this,"popup",II,this),i(this,"hidden",LI,this)}},PI=n(RI.prototype,"transition",[Ap],{configuurn{transition:this.transitionTime+"ms ease"}}}),II=n(RI.prototype,"popup",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.TEXT_PRIMARY_COLOR,background:this.themeProps.POPUP_BACKGROUND,boxShadow:this.themeProps.POPUP_SHADOW,border:this.themeProps.POPUP_BORDER,maxHeight:this.themeProps.POPUP_MAX_HEIGHT,maxWidth:this.themeProps.POPUP_MAX_WIDTH,borderRadius:this.themeProps.CARD_BORDER_RADIUS,zIndex:100005,transformOrigin:"top",position:"fixed",transform:"scale(1) translateY(0)",opacity:1}}}),LI=n(RI.prototype,"hidden",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{pointerEvents:"none",transform:"scale(.9) translateY(-10px)",opacity:0}}}),RI),xI=ct(_I)(NI=class AnchoredPopup extends dt.Element{constructor(){super(...arguments),this.hidden=!0,this.destroyed=!1,this.interval=null,this.maxHeight=null,this.anchorRect=this.options.anchor.node.getBoundingClientRect(),this.bodyRect=document.body.getBoundingClientRect()}static show(e){var t;const{anchor:i,toggleOnSameAnchor:n}=e;return i?(null==(t=this.lastShownModal)||null==(t=t.options)?void 0:t.anchor)!==i||(this.lastShownModal.hide(),n)?(this.lastShownModal=this.create(document.body,e),this.lastShownModal):null:(console.error("An anchor is required for a popup"),null)}getDefaultOptions(e){return t({},super.getDefaultOptions(e),{anchor:null,offset:0,toggleOnSameAnchor:!1,hideOnMouseLeave:!1,direction:sm})}extraNodeAttributes(e){if(super.extraNodeAttributes(e),e.addClass(this.styleSheet.popup),this.hidden?e.addClass(this.styleSheet.hidden):e.addClass(this.styleSheet.transition),!this.getHeight())return void e.setStyle({top:0,left:0});const{offset:t,direction:i}=this.options,{top:n,left:r,width:s,bottom:o}=this.anchorRect,a=Math.max(0,r+this.bodyRect.left+this.getWidth()/2+s/2+window.scrollX-this.bodyRect.right+20);if(i===sm){const i=Math.max(0,o+t+this.getHeight()-this.bodyRect.bottom-window.scrollY+20);e.setStyle({top:Math.round(o+t-this.bodyRect.top-window.scrollY-i),left:Math.round(r-this.bodyRect.left-window.scrollX+s/2-a-this.getWidth()/2)})}if("up"===i){const i=Math.min(0,n-t-this.getHeight()-this.bodyRect.top-window.scrollY-20);e.setStyle({top:Math.round(n-this.getHeight()-t-this.bodyRect.top-window.scrollY-i),left:Math.round(r-this.bodyRect.left-window.scrollX+s/2-a-this.getWidth()/2)})}}hide(){this.constructor.lastShownModal===this&&(this.constructor.lastShownModal=void 0),clearInterval(this.interval),this.hidden=!0,this.redraw(),this.destroyed=!0,setTimeout((()=>this.destroyNode()),this.styleSheet.transitionTime)}addAnchorListeners(){const{anchor:e}=this.options,{top:t,left:i}=this.anchorRect;this.interval=this.attachInterval((()=>{if(!e.node)return void this.hide();const n=e.node.getBoundingClientReen=!1,this.redraw(),this.addAnchorListeners()}render(){let{content:e}=this.options;return e?$([e]):super.render()}onMount(){this.redraw(),this.showPopup(),this.options.hideOnMouseLeave&&this.addCleanupJob(this.options.anchor.addNodeListener("mouseleave",(()=>this.hide()))),this.attachTimeout((()=>{this.destroyed||(this.attachEventListener(document.body,"click",(()=>this.hide())),this.attachEventListener(window,"resize",(()=>this.hide())),this.attachListener(Router.Global,"char((e=>{e.stopPropagation(),e.preventDefault()})))}))}})||NI;var MI,BI,kI,HI,zI;let FI=(MI=class PopupMenuStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",BI,this),i(this,"menuItem",kI,this),i(this,"menuItemDisabled",HI,this)}},BI=n(MI.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{cursor:"pointer"}}}),kI=n(MI.prototype,"menuItem",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"6px 12px",cursor:"pointer",transition:this.themeProps.DEFAULT_TRANSITION,userSelect:"none",":hover":{background:this.themeProps.DROPDOWN_ITEM_HOVER_BACKGROUND}}}}),HI=n(MI.prototype,"menuItemDisabled",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{opacity:this.themeProps.BASE_DISABLED_OPACITY,pointerEvents:"none",cursor:"not-allowed"}}}),MI);class AnchoredMenuPopup extends xI{getDefaultOptions(e){return t({},super.getDefaultOptions(e),{toggleOnSameAnchor:!0,testId:"menuPopup"})}renderMenuItem(e){const t=FI.getInstance(this.getTt("div",{onClick:()=>{this.hide(),e.onClick()},className:t.menuItem+(e.disabled?t.menuItemDisabled:"")},e.cos.options.items.map((e=>this.renderMenuItem(e)))}}let VetDefender(){return dt.createElement(_g,{size:16})}onMount(){this.addClickListener((()=>AnchoredMenuPopup.show({anchor:this,items:this.options.items})))}})||zI;var GI,WI,jI,YI;let KI=(GI=class PaymentMethodInlineMenuStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",WI,this),i(this,"cardDetails",jI,this)}},WI=n(GI.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"relative",padding:"10px 0",fontSize:15,display:"flex",alignItems:"center",color:this.themeProps.MERCHANT_4}}}),jI=n(GI.prototype,"cardDetails",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginRight:6}}}),GI),ZI=ct(KI)(YI=cl{return{paymentMethod:null,handleDelete:null}}removeAction(){const{paymentMethod:e,handleDelete:t}=thetActiveRecurring().filter((e=>!e.isCanceleanceled()].filter((t=>t.getPaymentMethod()===e)).length?Xb.showError(Vt.paymentMethodInUseError):t(e)}async makeDefault(){const{paymentMethod:e}=this.options;await _r(e.id),Xb.show(Vt.changesSaved)}getMenuItems(){const{paymentMethod:e}=this.options;return $([{content:Vt.removeCard,onClick:()=>this.removeAction()},!e.isPrimary&&{content:Vt.makeDefault,onClick:()=>this.makeDefault()}])}render(){const{paymentMethod:e}=this.options;return[dt.createElement(CO,{paymentMethod:e,showIfDefault:!0,showExpiryDate:!0}),dt.createElement(VI,{items:this.getMenuItems()})]}})||YI;var qI,$I,XI,JI;let QI=(qI=class AddressInlineMenuStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",$I,this),i(this,"addressLine",XI,this)}},$I=n(qI.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"space-between",overflow:"initial !important"}}}),XI=n(qI.prototype,"addressLine",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{flex:1,overflow:"hidden",textOverflow:"ellipsis"}}}),qI),eL=ct(QI)dress:null,handleEdit:null,handleDelete:null}}selectAddressForChange(){const{address:e}=this.options;return Ac.getActiveWithAddress(e).length?(Xb.showError(Vt.addressInUseError),null):e}getMenuItems(){const{handleEdit:e,handleDelete:t}=this.options;return $([e&&{content:Vt.edit,onClick:()=>{const t=this.selectAddressForChange();const e=this.selectAddressForChange();e&&t(e)}}])}render(){const{address:e}=this.options;return[dt.createElement("span",{className:this.styleSheet.addressLine},e),dt.createElement(VI,{items:this.getMenuItems()})]}})||JI;var tL,iL,nL,rL,sL,oL,aL;let lL=(tL=class UserDashboardAccountTabStyle extends ZR{constructor(){super(...arguments),i(this,"addNew",iL,this),i(this,"address",nL,this),i(this,"listItem",rL,this),i(this,"label",sL,this),i(this,"logOutLinkContainer",oL,this)}},iL=n(tL.prototype,"addNew",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">*":{display:"inline-block"},">:last-child":{marginLeft:8}}}}),nL=n(tL.prototype,"address",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"12px 0"}}}),rL=n(tL.prototype,"listItem",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{":not(:last-child)":{borderBottom:"1px solid #E5E5E5"}}}}),sL=n(tL.prototype,"label",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:this.themeProps.FONT_SIZE_NORMAL,fontWeight:this.themeProps.FONT_WEIGHT_BOLD}}}),oL=n(tL.prototype,"logOutLinkContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{paddingTop:12,textAlign:"center"}}}),tL),cL=wT(Nr,Au,Xc)(aL=ct(lL)(aL=class UserDashboardAccountTab extends qR{constructor(){super(...arguments),this.accountEditMode=!1}getDefaultOptions(){return t({},super.getDefaultOptions(),{title:Vt.accountPage})}async addPaymentMethodClick(){await _f.paymentMethod.prompt({inputIntent:oE.ADD_VALUE,continueLabel:Vt.addCard,inlineSubflow:!0})}async addAddressClick(){await _f.address.prompt({inputIntent:oE.ADD_VALUE,continueLabel:Vt.addNewAddress,inlineSubflow:!0})}renderNameAndEmailSection(){const{accountEditMode:e,styleSheet:t}=this,i=!Ab.token.usingMerchantToken||eE.canEditProfile;return e?dt.createElement(FR,{titleMessage:Vt.personalDetailsTitle,secondaryAction:[Vt.cancel,()=>{this.accountEditMode=!1,this.redraw()}],action:[Vt.save,()=>this.saveAccountEdit()]},dt.createElement(HA,{ref:"nameInput",testId:"nameInput",label:Vt.name,initialValue:Qb.getUserName(),inputAttributes:{placeholder:Vt.name}}),dt.createElement(HA,{ref:"emailInput",testId:"emailInput",label:Vt.email,initialValue:Qb.getUserEmail()||"",inputAttributes:{placeholder:Vt.email}})):dt.createElement(FR,{titleMessage:Vt.personalDetailsTitle,action:[Vt.edit,()=>{i?(this.accountEditMode=!0,this.redraw(),this.nameInput.focus()):mp.sendToSDK(hp.REDIRECT_TO_URL,{url:a+"/account",newTab:!0})}]},dt.createElement("div",{className:t.label},Vt.name),dt.createElement("div",{className:t.textSection},Qb.getUserName()),dt.createElement("div",{className:t.label},Vt.email),dt.createElement("div",{className:t.textSection},Qb.getUserEmail()))}renderAddressSection(){const{styleSheet:e}=this,t=eE.getExtraUserAddressCount();return dt.createElement(FR,{titleMessage:Vt.myAddressesTitle},dt.createElement("div",null,Au.all().map((t=>dt.createElement(eL,{className:e.listItem+e.address,address:t,handleEdit:()=>_f.address.prompt({selectedValue:t,inputIntent:oE.EDIT_VALUE,noHistory:!0}),handleDelete:!fr.isMerchant(C)&&(()=>{_f.address.init({selectedValue:t}),Router.changeURL(Iy)})})))),dt.createElement(Kf,{className:e.addNew,onClick:()=>this.addAddressClick()},dt.createElement(vg,{size:12.25})," ",Vt.addNew),uD(t))}renderPaymentMethodSection(){const{styleSheet:e}=this,t=eE.getExtraPaymentMethodCount(),i=Nr.getAvailablePaymentMethods();return!fr.isCDSPaymentMethod()&&dt.createElement(FR,{titleMessage:Vt.paymentMethodsTitle},dt.createElement("div",null,i.map((t=>dt.createElement(ZI,{className:e.listItem,paymentMethod:t,handleDelete:e=>{_f.dashboard.card=e,Router.changeURL(Py)}})))),dt.createElement(Kf,{className:e.addNew,onClick:()=>this.addPaymentMethodClick()},dt.createElement(vg,{size:12.25})," ",Vt.addNew),uD(t))}renderBlinkDashboardLink(){return!fr.isMerchant(C)&&dt.createElement(FR,{titleMessage:Vt.myDashboard},dt.createElement("div",{className:this.styleSheet.textSection},Vt.dashboardExternalLinkText,dt.createElement(Rb,{href:"/",newTab:!0,value:Vt.blinkDashboard,onClick:$y}),"."))}render(){const{styleSheet:e}=this;return[this.renderNameAndEmailSection(),this.renderAddressSection(),this.renderPaymentMethodSection(),this.renderBlinkDashboardLink(),dt.createElement("div",{className:e.logOutLinkContainer},dt.createElement(Kf,{label:Vt.logOut,onClick:()=>this.handleLogout()}))]}async saveAccountEdit(){const e=this.emailInput.getValue().trim(),t=await Qb.requestUpdateUserData(this.nameInput.getValue(),e);this.accountEditMode=!1,this.redraw(),t&&(im.changeToEmailAddress=e,Router.changeURL(_y))}async handleLogout(){Xy(),await Ab.logout(),mp.sendToSDK(hp.REDIRECT_TO_URL,{logOut:!0})}})||aL)||aL;var uL,hL,dL,pL,mL,gL,bL,fL,yL,CL,SL,EL,AL;let wL=(uL=class TabAreaStyle extends mI{constructor(){super(...arguments),i(this,"container",hL,this),i(this,"tab",dL,this),i(this,"activeTab",pL,this),i(this,"nav",mL,this),i(this,"tabArea",gL,this)}},hL=n(uL.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{border:"1px solid #E5E5E5"}}}),dL=n(uL.prototype,"tab",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>t({padding:"12px 0",cursor:"pointer",fontSize:ve()?this.themeProps.FONT_SIZE_SMALL:18,fontWeight:this.themeProps.FONT_WEIGHT_REGULAR,flex:1,textAlign:"center",border:"none"},this.themeProps.MERCHANT_USER_DASHBOARD_TAB_STYLE)}}),pL=n(uL.prototype,"activeTab",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({cursor:"default",backgroundColor:""},this.themeProps.MERCHANT_USER_DASHBOARD_ACTIVE_TAB_STYLE)}}),mL=n(uL.prototype,"nav",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex"}}}),gL=n(uL.prototype,"tabArea",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",background:this.themeProps.WHITE,maxWidth:540,margin:ve()?0:"0 auto 12px",display:"flex",flex:1,overflow:"auto",flexDirection:"column"}}}),uL),TL=(bL=class UserDashboardStyle extends MC{constructor(){super(...arguments),i(this,"container",fL,this),i(this,"body",yL,this),i(this,"content",CL,this),i(this,"tabAreaContainer",SL,this),i(this,"poweredByBlink",EL,this)}},fL=n(bL.prototype,"container",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:780,padding:null}}}),yL=n(bL.prototype,"body",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{flex:1,display:"flex",flexDirection:"column"}}}),CL=n(bL.prototype,"content",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:960,maxWidth:"100%",flex:1,padding:ve()?null:"18px 36px 18px 36px"}}}),SL=n(bL.prototype,"tabAreaContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{flex:1,overflow:"auto",display:"flex",flexDirection:"column",height:"100%"}}}),EL=n(bL.prototype,"poweredByBlink",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:ve()?"none":""}}}),bL),vL=ct(TL)(AL=class UserDashboard extends UC{getDefaultOptions(){return t({},super.getDefaultOptions(),{hasShadow:!1})}render(){const{styleSheet:e}=this;if(!this.tabArea){const e={[A.donation]:CI,donate:CI,[A.subscribe]:DP,subscription:DP,[A.newsletter]:DI,[A.auth]:cL,identity:cL,account:cL},t=_f.dashboard.getDashboardTabTypes().map((t=>{const i=e[t];if(!i){const i=Array.from(Object.keys(e));return console.warn(`Invalid dashboard tab type (${t}).\nAllowed types: ${i}`),null}return dt.createElement(i,null)}));this.tabArea=dt.createElement(fI,{styleSheet:wL},t)}return[dt.createElement("div",{className:e.tabAreaContainer},this.tabArea,dt.createElement(jC,{className:e.poweredByBlink}))]}})||AL;var OL;let DL=(n((OL=class UserDashboardRemoveCardPanel extends UC{getDefaultOptions(){return t({},super.getDefaultOptions(),{s/delete_payment_method",{paymentMethodId:e})}(_f.dashboard.card.id),Router.back(),Xb.showSuccess(Vt.cardRemoved)}render(){const{styleSheet:e}=this,{card:t}=_f.dashboard;return[dt.createElement(MessageElement,{message:Vt.removeCardEndingIn(t.getBrand(),t.getLastDigits())}),dt.createElement(iS,{label:Vt.remove,className:e.actionButton,onClick:()=>this.removeCard()}),dt.createElement(qf,{label:Vt.cancel})]}}).prototype,"removeCard",[yb],Object.getOwnPropertyDescriptor(OL.prototype,"removeCard"),OL.prototype),OL);var RL,PL;let IL=wT(Au)((n((PL=class UserDashboardRemoveAddressPanel extends UC{getDefaultOptions(){return t({},super.getDefaultOptions(),{title:Vt.removeAddress})}async removeAddress(){await async function(e){const t=await Zt.post("/user_addresses/delete_address",{userAddressId:e});return Au.loadObject(t)}(_f.address.selectedValue.id),Router.back(),Xb.showSuccess(Vt.addressRemoved)}render(){const{styleSheet:e}=this;return[dt.createElement(MessageElement,{message:Vt.deleteAddressDescription(_f.address.selectedValue.toString())}),dt.createElement(iS,{label:Vt.remove,className:e.actionButton,onClick:()=>this.removeAddress()}),dt.createElement(qf,{label:Vt.cancel})]}}).prototype,"removeAddress",[yb],Object.getOwnPropertyDescriptor(PL.prototype,"removeAddress"),PL.prototype),RL=PL))||RL;var LL;let NL=(LL=class UserDashboardChangeEmailCodeConfirmationComponent extends WT{constructor(){super(...arguments),this.canDisplayResendCodeOption=!1}getEmailConfirmationFormClass(){return CT}getBeforeInput(){return[dt.createElement("div",{className:this.styleSheet.title},Vt.confirmEmailChangeModalTitle),dt.createElement("div",{className:this.styleSheet.text},dt.createElement(MessageElement,{message:Vt.confirmEmailChangeLine1,args:[im.changeToEmailAddress]})),dt.createElement("div",{className:this.styleSheet.text},dt.createElement(MessageElement,{message:Vt.confirmEmailChangeLine2,args:[im.changeToEmailAddress,Qb.getUserEmail()]}))]}async handleSubmit(e){await async function(e){return Zt.post("/users/confirm_email_change",e)}({code:e}),Xb.showSuccess(Vt.emailSuccessfullyChanged),Router.changeURL(Ry)}},n(LL.prototype,"handleSubmit",[yb],Object.getOwnPropertyDescriptor(LL.prototype,"handleSubmit"),LL.prototype),LL);class UserDashboardChangeEmailCodeConfirmPanel extends UC{render(){return dt.createElement(NL,null)}}class ProductPanel extends dt.Element{render(){const{product:e}=this.options;return[dt.createElement("h1",null,e.name),dt.createElement(MessageElement,{message:e.description}),dt.createElement("div",null,"Price: ",e.getAmount()),e.requiresAddress&&dt.createElement("div",null,"Address Required"),dtyNow,onClick:()=>_f.productList.selectValue(e)}),dt.createElement("hr",null)]}}class ShopPanel extends UC{render(){const e=_f.productList.getProducts();return 0===e.length?["No products available"]:e.map((e=>dt.createElement(ProductPanel,{product:e})))}}class ShopReviewOrderPanel extends UC{render(){const{styleSheet:e}=this,t=_f.productList.selectedValue,i=_f.address.selectedValue;return[UI.createElement("div",null,t.name),i&&UI.createElement("div",null,i," - ",Ws(i,t.getShippingPrices())),UI.createElement(iS,{label:Vt.continueToPayment,onClick:()=>_f.purchaseReview.updateAndResolve(),className:e.actionButton}),_f.renderBackButton()]}}class ShopOrderSuccessPanel extends UC{render(){return"OK!"}}var _L,xL,ML,BL,kL,UL,HL,zL,FL,VL;let GL=(_L=class SpinnerAnimation extends StyleSheet{constructor(){super(...arguments),i(this,"rotatingKeyframes",xL,this)}},xL=n(_L.prototype,"rotatingKeyframes",[vp],{configutate(0deg)"},to:{transform:"rotate(360deg)"}}}}),_L),WL=(ML=class DiscountCodeInputStyle extends StyleSheet{constructor(){super(...arguments),this.spinnerSize=24,i(this,"container",BL,this),i(this,"inputContainer",kL,this),i(this,"inputFeedback",UL,this),i(this,"inputLabel",HL,this),i(this,"input",zL,this),i(this,"loadingAnimation",FL,this)}},BL=n(ML.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",width:"100%",maxWidth:418,textAlign:"center",margin:"auto"}}}),kL=n(ML.prototype,"inputContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",flexDirection:"column",position:"relative",justifyContent:"center",flex:1}}}),UL=n(ML.prototype,"inputFeedback",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"absolute",top:"100%",marginTop:4,fontSize:this.themeProps.FONT_SIZE_SMALL,color:this.themeProps.TEXT_SECONDARY_COLOR}}}),HL=n(ML.prototype,"inputLabel",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:this.themeProps.FONT_SIZE_LARGE,marginRight:8,display:"inline-block",whiteSpace:"nowrap",color:this.themeProps.TEXT_SECONDARY_COLOR,alignSelf:"center"}}}),zL=n(ML.prototype,"input",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{border:"1px solid transparent",width:`calc(100% - ${this.spinnerSize}px)`}}}),FL=n(ML.prototype,"loadingAnimation",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{animation:`${GL.getInstance().rotatingKeyframes} .6s linear infinite`,marginLeft:12,position:"absolute",right:0,top:"32%"}}}),ML),jL=ct(WL)(VL=class DiscountCodeInput extends dt.Element{constructor(){super(...arguments),this.lastSentCode=null,this.callThrottler=new CallThrottler({debounce:300})}getDefaultOptions(){return t({},super.getDefaultOptions(),{initialValue:"",discountApplied:null,onCodeInput:fe,label:Vt.discountCodeInputLabel})}render(){const{styleSheet:e}=this,{discountApplied:t,initialValue:i,label:n}=this.options;return[n&&dt.createElement(MessageElement,{className:e.inputLabel,message:n}),dt.createElement("div",{className:e.inputContainer},dt.createElement(HA,{ref:"input",className:e.input,initialValue:i,success:!!t,onChange:()=>this.onInputChange()}),this.loading&&dt.createElement(Fg,{className:e.loadingAnimation}),!(t||this.loading)&&this.lastSentCode&&dt.createElement("div",{className:e.inputFeedback},Vt.invalidDiscountCode))]}async resendCode(){const e=this.input.getValue();this.lastSentCode!==e&&(this.lastSentCode=e,this.loading=!0,this.redraw(),await this.options.onCodeInput(this.lastSentCode),this.lasts.callThrottler.call((()=>this.resendCode()))}})||VL;const YL={ajaxHandler:new,async loadJSON(e){return this.load(e,"json")},async load(e,t){let i=this.cache.get(e);return i||(i=this.ajaxHandler.fetch(e,{dataType:t,data:{},method:"GET"}),this.cache.set(e,i)),i}},KL={Alabama:"AL",Alaska:"AK","American Samoa":"AS",Arizona:"AZ",Arkansas:"AR",California:"CA",Colorado:"CO",Connecticut:"CT",Delaware:"DE","District of Columbia":"DC",Florida:"FL",Georgia:"GA",Guam:"GU",Hawaii:"HI",Idaho:"ID",Illinois:"IL",Indiana:"IN",Iowa:"IA",Kansas:"KS",Kentucky:"KY",Louisiana:"LA",Maine:"ME",Maryland:"MD",Massachusetts:"MA",Michigan:"MI",Minnesota:"MN",Mississippi:"MS",Missouri:"MO",Montana:"MT",Nebraska:"NE",Nevada:"NV","New Hampshire":"NH","New Jersey":"NJ","New Mexico":"NM","New York":"NY","North Carolina":"NC","North Dakota":"ND","Northern Mariana Islands":"MP",Ohio:"OH",Oklahoma:"OK",Oregon:"OR",Pennsylvania:"PA","Puerto Rico":"PR","Rhode Island":"RI","South Carolina":"SC","South Dakota":"SD",Tennessee:"TN",Texas:"TX",Utah:"UT",Vermont:"VT","Virgin Islands":"VI",Virginia:"VA",Washington:"WA","West Virginia":"WV",Wisco){const t=e=>e.toLowerCase().replace(/\s/g,"");for(const[i,n]of Object.entries(KL))if(t(i)===t(e)||t(n)===t(e))return n;return null}const qL=new class CountriesDataService extends Dispatchable{constructor(){super(...arguments),this.countries=[],this.countryByCode=new Map,this.cities=[]}getStatesNames(e){const{states:t}=this.countryByeturn Array.from(this.countryByCode.values())}getCities(){return this.cities}getCountryByCode(e){return this.countryByCode.get(e)}async ensureLoaded(){if(!(this.countries.length>0)){this.countries=await YL.loadJSON("/resources/json/countries.json");for(const e of this.countries){this.countryByCode.set(e.code2,e);for(const t of Object.keys(e.states)){const i=e.states[t].map((i=>({name:`${i}, ${t}, ${e.code2}`,display:i,extra:{city:i,state:t,countryCode:e.code2}})));this.cities.push(...i)}}}}};var $L,XL,JL,QL,eN,tN,iN,nN,rN,sN,oN,aN,lN,cN,uN,hN,dN;let pN=($L=class TNRSubscriptionCoverageCardStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",XL,this),i(this,"bestValueHeader",JL,this),i(this,"bestValueHeaderGuard",QL,this),i(this,"bestValueCard",eN,this),i(this,"title",tN,this),i(this,"cycleDuration",iN,this),i(this,"pricesBreakdown",nN,this),i(this,"bestValueBelowPrice",rN,this),i(this,"afterPricesBreakdown",sN,this),i(this,"pricesBreakdownEntry",oN,this),i(this,"perkText",aN,this),i(this,"perkSubtext",lN,this),i(this,"perk",cN,this),i(this,"button",uN,this),i(this,"subscriptionPerksList",hN,this)}},XL=n($L.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{minHeight:()=>ve()?"":"484px",padding:"18px 24px",position:"relative",display:"flex",flexDirection:"column",background:this.themeProps.WHITE,border:"1px solid #DDDDDD",width:()=>ve()?null:418}}}),JL=n($L.prototype,"bestValueHeader",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({textAlign:"center",width:"100%",padding:10,top:0,left:0,position:"absolute",background:()=>this.themeProps.HERO_CARD_BORDER_COLOR||"#D6D6D6"},tm.iframeParams.bestValueHeader)}}),QL=n($L.prototype,"bestValueHeaderGuard",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:42}}}),eN=n($L.prototype,"bestValueCard",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderColor:this.themeProps.HERO_CARD_BORDER_COLOR||"#D6D6D6",boxShadow:()=>`inset 0 0 0 4px ${this.themeProps.HERO_CARD_BORDER_COLOR||"#D6D6D6"}`}}}),tN=n($L.prototype,"title",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:24,fontWeight:600}}}),iN=n($L.prototype,"cycleDuration",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:20,marginBottom:18}}}),nN=n($L.prototype,"pricesBreakdown",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",padding:"12px 6px 0 0",borderTop:()=>"1px solid #E5E5E5",display:"flex",justifyContent:"space-between",fontSize:18}}}),rN=n($L.prototype,"bestValueBelowPrice",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:14}}}),sN=n($L.prototype,"afterPricesBreakdown",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){ingTop:12,borderBottom:()=>"1px solid #E5E5E5"}}}),oN=n($L.prototype,"pricesBreakdownEntry",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:6,paddingBottom:0,":first-child":{paddingLeft:0},":last-child":{paddingRight:0}}}}),aN=n($L.prototype,"perkText",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:16,marginTop:12}}}),lN=n($L.prototype,"perkSubtext",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginLeft:24}}}),cN=n($L.prototype,"perk",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:8,":last-child":{marginBottom:18}}}}),uN=n($L.prototype,"button",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({width:"100%",bottom:24},tm.iframeParams.buttonStyle)}}),hN=n($L.prototype,"subscriptionPerksList",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:18,marginBottom:-4,fontSize:16}}}),$L),mN=ct(pN)(dN=class TNRSubscriptionCoverageCard extends dt.Element{getDefaultOptions(){return t({},super.getDefaultOptions(),{offer:null,bestValue:!1,onSubscriptionOfferSelected:fe,testId:"subscriptionCoverageCard"})}extraNodeAttributes(e){super.extraNodeAttributes(e),this.options.bestValue&&e.addClass(this.styleSheet.bestValueCard)}getOfferLabel(){return _f.subscriptionPlan.subscriptionPlanState===cE?Vt.subscribe:Vt.changeSubscription}userHasEquivalentSubscription(e){return _f.subscriptionPlan.subscriptionPlanState!==cE&&_f.subscriptionPlan.userHasEquivalentSubscriptionToOffer(e)}getPricesBreakdown(e){return e.shouldCollectAddress()&&e.hasShippingPrice()?e.billingPlan.shippingPrices.map((t=>{var i;let{countryCode:n,amount:r}=t;return[(null==(i=qL.getCountryByCode(n))?void 0:i.name)||Vt.international,e.getPrice().add(new Money(r,e.getCurrency()))]})):[[e.getName(),e.getPrice()]]}renderBestValueCardHeader(){const{styleSheet:e}=this,{bestValue:t}=this.options;return t&&[dt.createElement("div",{className:e.bestValueHeader},Vt.bestValue),dt.createElement("div",{className:e.bestValueHeaderGuard})]}renderNameAndDurationSection(){var e,t;const{styleSheet:i}=this,{offer:n}=this.options,r=n.getCoverage(),{subscriptionOfferConfigs:s}=tm.iframeParams;return null!=s&&null!=(e=s[n.id])&&e.useCycleDurationAsName?dt.createElement("div",{className:i.title},n.billingPlan.getCycleDuration()):null!=s&&null!=(t=s[n.id])&&t.useOfferAsTitle?dt.createElement("div",{className:i.title},n.getName()):[dt.createElement("div",{className:i.title},r.getName()),dt.createElement("div",{className:i.cycleDuration},n.billingPlan.getCycleDuration())]}renderPriceBreakdownSection(){var e,t;const{styleSheet:i}=this,{offer:n,bestValue:r}=this.options,{subscriptionOfferConfigs:s}=tm.iframeParams,o=null==s||null==(e=s[n.id])?void 0:e.pricesBreakdown;return o?dt.createElement("div",{className:i.pricesBreakdown},dt.createElement(MessageElement,{message:o,args:[n.getPrice(),n.billingPlan.getCycleDuration(!0)]})):null!=s&&null!=(t=s[n.id])&&t.useOfferNameAsPriceBreakdown?dt.createElement("div",{className:i.pricesBreakdown},dt.createElement(MessageElement,{message:n.getName()})):[dt.createElement("div",{className:i.pricesBreakdown},this.getPricesBreakdown(n).map(((e,t)=>{let[n,s]=e;return dt.createElement("div",{className:i.pricesBreakdownEntry},dt.createElement("div",null,"Digital"===n?"Worldwide":n),dt.createElement("div",null,0===t&&r?dt.createElement("b",null,s):s))}))),r&&dt.createElement(MessageElement,{className:i.bestValueBelowPrice,message:Vt.bestValueBelowPrice})]}renderSubscriptionPerksSection(){var e;const{styleSheet:t}=this,{offer:i}=this.options,n=i.getCoverage(),r=tm.iframeParams,s=r.subscriptionOfferConfigs?null==(e=r.subscriptionOffe)?void 0:e.perks:null,o=s?s.map((e=>({text:e}))):n.getDescription().items||[];return[dt.createElement("div",{className:t.subscriptionPerksList},Vt.subscriptionPerksList),dt.createElement("div",null,o.map((e=>{let{text:i,subtext:n}=e;return dt.createElement("div",{className:t.perk},dt.createElement("div",{className:t.perkText}," ",dt.createElement(MessageElement,{nodeType:"span",message:i})),n&&dt.createElement(MessageElement,{nodeType:"span",className:t.perkSubtext,message:n}))})))]}renderSubscribeButton(){const{styleSheet:e}=this,{offer:t,onSubscriptionOfferSelected:i}=this.options;return this.userHasEquivalentSubscription(t)?dt.createElement(iS,{onClick:()=>Router.changeURL(Cy),type:1},Vt.cancelSubscription):dt.createElement(iS,{className:e.button,onClick:()=>i(t)},this.getOfferLabel())}render(){const{styleSheet:e}=this;return[this.renderBestValueCardHeader(),this.renderNameAndDurationSection(),this.renderPriceBreakdownSection(),dt.createElement("div",{className:e.afterPricesBreakdown}),this.renderSubscriptionPerksSection(),dt.createElement("div",{style:{flex:1}}),this.renderSubscribeButton()]}async onMount(){super.onMount(),await qL.ensureLoaded(),this.redraw()}})||dN;var gN,bN,fN,yN,CN,SN,EN,AN,wN,TN,vN,ON,DN;let RN=(gN=class SubscriptionOfferPriceStyle extends StyleSheet{constructor(){super(...arguments),i(this,"price",bN,this),i(this,"offerPrice",fN,this),i(this,"oldOfferPrice",yN,this),i(this,"priceAmount",CN,this),i(this,"offerCycle",SN,this),i(this,"finalPriceLine",EN,this)}},bN=n(gN.prototype,"price",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center"}}}),fN=n(gN.prototype,"offerPrice",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexDirection:"row",fontSize:this.themeProps.FONT_SIZE_LARGE}}}),yN=n(gN.prototype,"oldOfferPrice",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:this.themeProps.FONT_SIZE_NORMAL,textDecoration:"line-through",color:this.themeProps.MERCHANT_2,marginLeft:"auto",marginRight:"auto"}}}),CN=n(gN.prototype,"priceAmount",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontWeight:this.themeProps.FONT_WEIGHT_BOLD}}}),SN=n(gN.prototype,"offerCycle",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontWeight:this.themeProps.FONT_WEIGHT_LIGHT}}}),EN=n(gN.prototype,"finalPriceLine",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:this.themeProps.FONT_SIZE_SMALL}}}),gN),PN=ct(RN)(AN=class SubscriptionOfferPrice extends dt.Element{getDefaultOptions(){return t({},super.getDefaultOptions(),{offer:null,displayAfterTaxesPrice:!1,testId:"subscriptionOfferPrice"})}extraNodeAttributes(e){super.extraNodeAttributes(e),e.addClass(this.styleSheet.price)}getDiscountedOfferPrice(){const{offer:e}=this.options;if(_f.subscriptionPlan.getDiscountInfo(e)){const{discountedBeforeTaxesPrice:t,initialOfferPrice:i}=_f.subscriptionPlan.getDiscountInfo(e);return i!==t?t:null}return null}render(){const{offer:e,displayAfterTaxesPrice:t}=this.options,{styleSheet:i}=this,n=this.getDiscountedOfferPrice(),r=e.getPrice(),s=_f.subscriptionPlan.getDiscountInfo(e),o=_f.subscriptionPlan.getSubscriptionOfferPrice(e),a=e.formatPrice(null==s?void 0:s.finalPrice);return[dt.createElement("div",{className:i.offerPrice+(n?i.oldOfferPrice:"")},dt.createElement("div",{className:i.priceAmount},r),dt.createElement("div",{className:i.offerCycle},"/",e.getCycleDuration(!0))),n?dt.createElement("div",{className:i.offerPrice},dt.createElement("div",{className:i.priceAmount},e.formatPrice(n)),dt.createElement("div",{className:i.offerCycle},"/",e.getCycleDuration(!0))):null,t&&e.hasShippingPrice()&&!o.equals(a)?dt.createElement("div",{className:i.offerPrice},dt.createElement("div",{className:i.finalPriceLine},Vt.priceIncludingShippingAndTax(`${a}/${e.getCycleDuration(!0)}`))):null]}})||AN,IN=(wN=class CoveragePricesStyle extends StyleSheet{constructor(){super(...arguments),i(this,"pricesElement",TN,this),i(this,"discountApplied",vN,this),i(this,"separator",ON,this)}},TN=n(wN.prototype,"pricesElement",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexDirection:"row",justifyContent:"center",width:"100%",alignItems:"center",fontSize:this.themeProps.FONT_SIZE_NORMAL,fontWeight:this.themeProps.FONT_WEIGHT_LIGHT}}}),vN=n(wN.prototype,"discountApplied",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{alignItems:"flex-end"}}}),ON=n(wN.prototype,"separator",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:"0px 8px"}}}),wN),LN=ct(IN)(DN=class CoveragePrices extends dt.Element{getDefaultOptions(){return t({},super.getDefaultOptions(),{offers:[],displayAfterTaxesPrice:!1})}extraNodeAttributes(e){super.extraNodeAttributes(e),e.addClass(this.styleSheet.pricesElement),this.isDiscountApplied()&&e.addClass(this.styleSheet.discountApplied)}isDiscountApplied(){ind((e=>!!_f.subscriptionPlan.getDiscountInfo(e)))}render(){var e;return null==(e=this.options.offers)?void 0:e.filter((e=>null!=e)).reduce(((e,t,i)=>[...e,0===i?"":dt.createElement("div",{className:this.styleSheet.separator},"or"),dt.createElement(PN,{offer:t,displayAfterTaxesPrice:this.options.displayAfterTaxesPrice})]),[])}})||DN;var NN,_N,xN,MN,BN,kN;let UN=(NN=class PlusIconStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",_N,this)}},_N=n(NN.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:"auto",padding:"4px 0px"}}}),NN),HN=ct(UN)(xN=class PlusIconElement extends vg{getDefaultOptions(){return t({},super.getDefaultOptions(),{size:14})}})||xN;const zN={perk:LD,coverage:_D,plus:HN};let FN=(MN=class CoverageDescriptionStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",BN,this)}},BN=n(MN.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexDirection:"column",marginBottom:"auto",">:not(:last-child)":{marginBottom:8}}}}),MN),VN=ct(FN)(kN=class CoverageDescription extends dt.Element{getDefaultOptions(){return t({},super.getDefaultOptions(),{items:[]})}render(){return(this.options.items||[]).map((e=>{const t=zN[e.type];return dt.createElement(t,e)}))}})||kN;var GN,WN,jN,YN,KN,ZN;let qN=(GN=class CoveragePreviewStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",WN,this),i(this,"title",jN,this),i(this,"coveragePricesContainer",YN,this),i(this,"description",KN,this)}},WN=n(GN.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",backgroundColor:this.themeProps.MERCHANT_CARD_BACKGROUND}}}),jN=n(GN.prototype,"title",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{textAlign:"center",textTransform:"uppercase",fontSize:this.themeProps.FONT_SIZE_LARGE,fontWeight:this.themeProps.FONT_WEIGHT_BOLD}}}),YN=n(GN.prototype,"coveragePricesContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:54}}}),KN=n(GN.prototype,"description",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"12px 12px 24px"}}}),GN),$N=ct(qN)(ZN=class CoveragePreview extends dt.Element{getDefaultOptions(){return t({},super.getDefaultOptions(),{coverage:null,subscriptionOffers:null,displayAfterTaxesPrice:!1,testId:"coveragePreview"})}render(){const{styleSheet:e}=this,{coverage:t,subscriptionOffers:i,displayAfterTaxesPrice:n}=this.options;return[dt.createElement("div",{className:e.title},t.getName()),dt.createElement(LN,{className:e.coveragePricesContainer,offers:i,displayAfterTaxesPrice:n}),dt.createElement(VN,{className:e.description,items:t.getDescription().items})]}})||ZN;var XN,JN,QN,e_;let t_=(XN=class SubscriptionCoverageCardStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",JN,this),i(this,"buttonsContainer",QN,this)}},JN=n(XN.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexDirection:"column",width:()=>ve()?null:418,minWidth:280,background:this.themeProps.MERCHANT_CARD_BACKGROUND,padding:"18px 24px 24px",border:"1px solid "+this.themeProps.MERCHANT_CARD_BORDER_COLOR,borderRadius:this.themeProps.MERCHANT_FRAME_BORDER_RADIUS,boxShadow:this.themeProps.MERCHANT_CARD_BOX_SHADOW}}}),QN=n(XN.prototype,"buttonsContainer",[Ap],{confiop:"auto",">:not(:first-child)":{marginTop:10}}}}),XN),i_=ct(t_)(e_=class SubscriptionCoverageCard extends dt.Element{getDefaultOptions(){return t({},super.getDefaultOptions(),{coverage:null,onSubscriptionOfferSelected:fe,testId:"subscriptionCoverageCard"})}getFormattedSubscriptionOfferPrice(e){return`${_f.subscriptionPlan.getSubscriptionOfferPrice(e)}/${e.getCycleDuration(!0)}`}getOfferLabel(e){const t=this.getFormattedSubscriptionOfferPrice(e);return _f.subscriptionPlan.subscriptionPlanState===hE?Vt.giftSubscriptionButtonLabel(t):_f.subscriptionPlan.subscriptionPlanState===cE?this.options.coverage.getAvailableOffers().length>1?Vt.subscribeInlineFlowButton(t):Vt.subscribe:this.userHasEquivalentSubscription(e)?Vt.subscribedButtonLabel(t):Vt.changePlanButtonLabel(t)}userHasEquivalentSubscription(e){if(_f.subscriptionPlan.subscriptionPlanState===hE)return!1;if(_f.subscriptionPlan.subscriptionPlanState===cE)return!1;const t=eE.getActiveSubscription();return!!t&&t.billingPlan===e.billingPlan&&t.coverage===e.coverage}render(){const{styleSheet:e}=this,{coverage:t,onSubscriptionOfferSelected:i}=this.options,n=t.getAvailableOffers();return 0===n.length?null:[dt.createElement($N,{coverage:t,subscriptionOffers:n}),dt.createElement("div",{className:e.buttonsContainer},n.map(((e,t)=>dt.createElement(iS,{type:t?1:0,offer:n[0],disabled:this.userHasEquivalentSubscription(e),onClick:()=>i(e),label:this.getOfferLabel(e)}))))]}})||e_;var n_,r_,s_,o_;let a_=(n_=class SubscriptionCardsListStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",r_,this),i(this,"subscriptionCard",s_,this)}},r_=n(n_.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{maxWidth:1600,display:"inline-flex",flexWrap:"wrap",justifyContent:"center",width:"fit-content"}}}),s_=n(n_.prototype,"subscriptionCard",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:ve()?"8px 0px":16}}}),n_),l_=ct(a_)(o_=class SubscriptionCardsList extends dt.Element{constructor(){super(...arguments),this.analyticsDispatched=!1}async handleSubscribeClick(e){if(Ze(Fe,{offerId:e.id}),await _f.auth.promptIfNeeded(),_f.subscriptionPlan.subscriptionPlanState===uE){const t=_f.subscriptionPlan.getDiscountInfoOnInstantChangePolicy(e);_f.subscriptionPlan.update({applyPolicy:(null==t?void 0:t.coverageChangeType)==od.UPGRADE?Cc:Sc})}await _f.subscriptionPlan.selectValue(e)}render(){const{styleSheet:e}=tetCoverage())).filter(((e,t,i)=>i.indexOf(e)===t)).sort(((e,t)=>e.id-t.id)),i=[];if(fr.isMerchant(C))for(const e of Wo.all())i.push({coverage:e.getCoverage(),offers:[e]});else for(const e of t)i.push({coverage:e,offers:[e.getAvailableOffers()]});this.analyticsDispatched||(Ze(Ve,{coverageCards:i.map((e=>{let{coverage:t,offers:i}=e;return{coverageId:t.id,offerIds:i.map((e=>e.id))}}))}),this.analyticsDispatched=!0);const n=fr.isMerchant(C)?mN:i_;return i.map(((t,i)=>{var r,s;let{offers:o,coverage:a}=t;const l=o[0],c=null==(r=tm.iframeParams)||null==(r=r.subscriptionOfferConfigs)?void 0:r[l.id];return dt.createElement(n,{className:e.subscriptionCard,offer:l,coverage:a,bestValue:null!=(s=null==c?void 0:c.bestValue)?s:i===Wo.all().length-1,onSubscriptionOfferSelected:e=>this.handleSubscribeClick(e)})}))}})||o_;var c_,u_,h_,d_,p_,m_,g_,b_,f_,y_,C_;let S_=(c_=class SubscriptionPlanPanelStyle extends MC{constructor(){super(...arguments),i(this,"content",u_,this),i(this,"discountCodeInput",h_,this),i(this,"shareNameCheckbox",d_,this),this.messageObject={color:this.themeProps.TEXT_SECONDARY_COLOR,textAlign:"center",marginBottom:()=>ve()?18:24,width:"100%",":last-child":{marginBottom:0}},i(this,"message",p_,this),i(this,"panelTextStyle",m_,this),i(this,"panelFooterSeparatorStyle",g_,this),i(this,"panelFooterTextStyle",b_,this),i(this,"subscriptionText",f_,this),i(this,"subscribeImageLogo",y_,this)}},u_=n(c_.prototype,"content",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:null}}}),h_=n(c_.prototype,"discountCodeInput",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginBottom:24}}}),d_=n(c_.prototype,"shareNameCheckbox",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:()=>this.themeProps.FONT_SIZE_LARGE+" !important",fontWeight:this.themeProps.FONT_WEIGHT_LIGHT,margin:"0 auto 12px",maxWidth:524,display:"flex"}}}),p_=n(c_.prototype,"message",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({},this.messageObject,{fontSize:this.themeProps.FONT_SIZE_LARGE})}}),m_=n(c_.prototype,"panelTextStyle",[Dp],{confinitializer:function(){return t({},tm.textStyle)}}),g_=n(c_.prototype,"panelFooterSeparatorStyle",[Dp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({marginLeft:"auto",marginRight:"auto"},tm.footerSeparatorStyle)}}),b_=n(c_.prototype,"panelFooterTextStyle",[Dp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({marginLeft:"auto",marginRight:"auto"},tm.footerTextStyle)}}),f_=n(c_.prototype,"subscriptionText",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:"0px auto",maxWidth:700,display:"flex",flexDirection:ve()?"column":"row",justifyContent:"center",alignItems:"flex-start"}}}),y_=n(c_.prototype,"subscribeImageLogo",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:150,marginTop:0}}}),c_),E_=wT(tm)(C_=ct(S_)(C_=class SubscriptionPlanPanel extends UC{renderSubscriptionText(){const{styleSheet:e}=this,t=tm.iframeParams.text,{subscribeImageLogo:i}=tm.iframeParams,n=eE.getActiveSubscription(),{subscriptionPlanState:r}=_f.subscriptionPlan;return r===uE?dt.createElement("div",{className:e.message+e.panelTextStyle},Vt.currentSubscriptionPlan(n.coverage.name,n.billingPlan.getCycleDuration(!0))):dt.createElement("div",{className:e.subscriptionText},i&&dt.createElement(PanelImage,{src:i,className:e.subscribeImageLogo}),t&&dt.createElement(CS,{className:e.panelTextStyle},t))}render(){const{styleSheet:e}=this,t=fr.getMerchant(),{footerText:i,hideDiscountCodeInput:n}=tm.iframeParams;return[this.renderSubscriptionText(),dt.createElement(l_,{style:{marginBottom:24}}),!n&&t.hasSubscriptionDiscountCodeEnabled()&&dt.createElement(jL,{className:e.discountCodeInput,initialValue:_f.subscriptionPlan.discountCode||"",discountApplied:this.isDiscountApplied(),onCodeInput:e=>this.checkDiscountCode(e)}),fr.isMerchant(y)&&_f.subscriptionPlan.subscriptionPlanState===cE&&dt.createElement(bv,{ref:"shareNameCheckbox",testId:"shareNameCheckbox",className:e.shareNameCheckbox,initialValue:_f.subscriptionPlan.shareName,onChange:e=>this.handleShareNameCheckboxToggle(e),label:Vt.subscribeShareUserName(t.getName())}),dt.createElement("div",{className:e.panelFooterSeparatorStyle}),i&&dt.createElement(CS,{className:e.panelFooterTextSlied(){return!!_f.subscriptionPlan.discountCode}async checkDiscountCode(e){_f.subscriptionPlan.update({discountCode:e}),await _f.subscriptionPlan.fetchPrices(_f.address.selectedValue)}handleShareNameCheckboxToggle(e){_f.subscriptionPlan.update({shareName:e}),this.redraw()}async onMount(){super.onMount(),this.attachListener(_f.subscriptionPlan,(()=>this.redraw()))}})||C_)||C_;var A_,w_,T_,v_,O_,D_,R_,P_,I_,L_;let N_=(A_=class RadioListInputStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",w_,this),i(this,"entry",T_,this),i(this,"radioIcon",v_,this),i(this,"selectedRadioIcon",O_,this),i(this,"label",D_,this)}},w_=n(A_.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">:first-child":{borderTop:"1px solid "+this.themeProps.DIVIDER_LINE_COLOR}}}}),T_=n(A_.prototype,"entry",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:this.themeProps.FONT_SIZE_NORMAL,color:this.themeProps.RADIO_COLOR,display:"flex",flexDirection:"row",alignItems:"center",padding:"12px 0",cursor:"pointer",borderBottom:"1px solid "+this.themeProps.DIVIDER_LINE_COLOR}}}),v_=n(A_.prototype,"radioIcon",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{border:()=>"2px solid "+this.themeProps.RADIO_COLOR,borderRadius:"100%",position:"relative",width:this.themeProps.RADIO_SIZE,height:this.themeProps.RADIO_SIZE,marginRight:12,display:"flex",justifyContent:"center",alignItems:"center"}}}),O_=n(A_.prototype,"selectedRadioIcon",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{"::after":{content:'""',height:this.themeProps.RADIO_SIZE/2,width:this.themeProps.RADIO_SIZE/2,background:this.themeProps.RADIO_COLOR,borderRadius:"100%"}}}}),D_=n(A_.prototype,"label",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{userSelect:"none",width:"100%"}}}),A_),__=ct(N_)(R_=class RadioListInput extends BaseInputElement{renderEntry(e){const{styleSheet:t}=this,{formatter:i}=this.options,n=i?i(e):e;return dtry,onClick:()=>{this.setValue(e),this.redraw()}},dt.createElement("div",{className:t.radioIcon+(e===this.getValue()?t.selectedRadioIcon:"")}),dt.createElement("div",{className:t.label},n))}render(){return this.options.entries.map((e=>this.renderEntry(e)))}})||R_,x_=(P_=class DashboardRadioStyle extends N_{constructor(){super(...arguments),i(this,"radioIcon",I_,this),i(this,"disabled",L_,this)}},I_=n(P_.prototype,"radioIcon",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{cursor:"pointer"}}}),L_=n(P_.prototype,"disabled",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{opacity:this.themeProps.DEFAULT_DISABLED_OPACITY,cursor:"default"}}}),P_);var M_,B_,k_,U_,H_,z_,F_;ct(x_)(class DashboardRadio extends dt.Element{extraNodeAttributes(e){const{styleSheet:t}=this;e.addClass(t.radioIcon),this.options.selected&&e.addClass(t.selectedRadioIcon),this.options.disabled&&e.addClass(t.disabled)}});let V_=(M_=class PaymentMethodSelectInputStyle extends StyleSheet{constructor(){super(...arguments),i(this,"addNewCard",B_,this),i(this,"description",k_,this),i(this,"header",U_,this),i(this,"list",H_,this),i(this,"activeCardInfo",z_,this)}},B_=n(M_.prototype,"addNewCard",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{cursor:"pointer",fontWeight:this.themeProps.FONT_WEIGHT_REGULAR,color:this.themeProps.LINK_COLOR,whiteSpace:"nowrap",marginTop:14,display:"inline-block",">*":{display:"inline-block"},">:last-child":{marginLeft:14}}}}),k_=n(M_.prototype,"description",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.TEXT_SECONDARY_COLOR,marginBottom:14}}}),U_=n(M_.prototype,"header",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"space-between",color:this.themeProps.TEXT_SECONDARY_COLOR,paddingBottom:4}}}),H_=n(M_.prototype,"list",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginRight:0,width:"100%"}}}),z_=n(M_.prototype,"activeCardInfo",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginBottom:18}}}),M_),G_=ct(V_)(F_=wT(Nr)(F_=class PaymentMethodSelectInput extends BaseInputElement{getDefaultOptions(){return t({},super.getDefaultOptions(),{initialValue:Nr.getPrimary(),onAddCard:fe,recurringPayment:null,showDescription:!1,showHeader:!1})}getEntries(){return this.options.recurringPayment?this.options.recurringPayment.getAvailablePaymentMethods():Nr.getAvailablePaymentMethods()}renderDescription(){const{styleSheet:e}=this,{showDescription:t}=this.options;return t&&dt.createElement("div",{className:e.description},Vt.chooseCardDescription)}renderHeader(){const{styleSheet:e}=this,{showHeader:t}=this.options;return t&&!!this.getEntries().length&&dt.createElement("div",{className:e.header},dt.createElement("div",null,Vt.creditCardsListHeader),dt.createElement("div",null,Vt.expires))}renderEntries(){return dt.createElement(__,{initialValue:this.getValue(),entries:this.getEntries(),formatter:e=>dt.createElement(CO,{paymentMethod:e,showExpiryDate:!0}),onChange:e=>this.setValue(e)})}renderAddNewEntry(){const{styleSheet:e}=this,{onAddCard:t}=this.options,i=eE.getExtraPaymentMethodCount();return[dt.createElement(Kf,{className:e.addNewCard,onClick:()=>t()},dt.createElement(vg,{size:12}),dt.createElement(",this.renderEntries(),this.renderAddNewEntry()]}})||F_)||F_;var W_;let j_=wT(Nr)(W_=class ChooseCardComponent extends dt.Element{getDefaultOptions(){return{initialValue:null,onAddCard:fe,onChange:fe,testId:"chooseCard",entry:null}}constructor(){super(...arguments),this.value=this.options.initialValue}isValid(){return!0}getActive(){return this.value}async getPaym.value=e,this.redraw(),this.options.onChange(e)}render(){const{onAddCard:e,entry:t}=this.options;return[dt.createElement(G_,{initialValue:this.value,onChange:e=>this.handleCardSelection(e),onAddCard:e,showHeader:!0,recurringPayment:t,showDescription:!0})]}})||W_;var Y_,K_;let Z_=wT(Nr)((n((K_=class PaymentMethodPanel extends UC{getDefaultOptions(e){return t({},super.getDefaultOptions(e),{title:Vt.paymentDetails})}getContinueButtonLabel(){return _f.paymentMethod.getContinueButtonLabel({[oE.EDIT_VALUE]:Vt.editPaymentDetails,[oE.ADD_VALUE]:Vt.addNewPaymentMethod})}isContinueButtonDisabled(){var e;return!(null!=(e=this.paymentMethodInput)&&e.isValid())}async handleContinueButtonClick(){const e=await this.paymentMethodInput.getPaymentMethod();await _f.paymentMethod.selectValue(e)}render(){const{styleSheet:e}=this,t=_f.paymentMethod.getInputComponentClass({[oE.CHOOSE_VALUE]:j_,[oE.ADD_VALUE]:rD});return[dt.createElement(t,{ref:"paymentMethodInput",onChange:()=>this.redraw(),initialValue:_f.paymentMethod.selectedValue,hideActiveCard:!0,onAddCard:()=>_f.paymentMethod.enterNewValue(),entry:_f.paymentMethod.entry}),dt.createElement(iS,{ref:"button",className:e.actionButton,disabled:this.isContinueButtonDisabled(),label:this.getContinueButtonLabel(),onClick:()=>this.handleContinueButtonClick()}),_f.paymentMethod.renderBackButton()]}onMount(){super.onMount(),this.redraw()}}).prototype,"handleContinueButtonClick",[yb],Object.getOwnPropertyDescriptor(K_.prototype,"handleContinueButtonClick"),K_.prototype),Y_=K_))||Y_;var q_,$_,X_;let J_=(q_=class ChooseAddressComponentStyle extends StyleSheet{constructor(){super(...arguments),i(this,"addNewAddress",$_,this)}},$_=n(q_.prototype,"addNewAddress",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.LINK_COLOR,width:"fit-content",cursor:"pointer",fontWeight:this.themeProps.FONT_WEIGHT_REGULAR,whiteSpace:"nowrap",marginTop:"1.55rem",display:"inline-block",">*":{opacity:.8,display:"inline-block"},":hover>*":{opacity:1}," g":{fill:this.themeProps.LINK_COLOR},">:last-child":{marginLeft:12},">:first-child":{transform:"translateY(1px)"}}}}),q_),Q_=ct(J_)(X_=class ChooseAddressComponent extends dt.Element{getDefaultOptions(){return t({},super.getDefaultOptions(),{onChange:fe})}render(){const{styleSheet:e}=this,t=eE.getExtraUserAddressCount();return[dt.createElement(__,{onChange:e=>this.handleListItemSelect(e),entries:Au.all()ormatter:e=>dt.createElement(uR,{userAddress:e})}),dt.createElement(Kf,{className:e.addNewAddress,onClick:()=>_f.address.enterNewValue()},dt.createElement(vg,{size:12.25}),dt.cre)}getAddress(){return _f.address.selectedValue}handleListItemSelect(e){_f.address.update({selectedValue:e}),this.options.onChange()}onMount(){this.attachListener(_f.address,(()=>this.redraw()))}})||X_;var ex,tx,ix;let nx=(ex=class DropdownItemStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",tx,this)}},tx=n(ex.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{cursor:"pointer",transition:this.themeProps.DEFAULT_TRANSITION,":hover":{background:this.themeProps.INPUT_BACKGROUND_HOVER},display:"flex",flexDirection:"row",">:first-child":{flex:1},">:nth-child(2)":{width:40,textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center"},">:nth-child(2)>*":{display:"flex",flex:1,flexDirection:"row",alignItems:"center"}}}}),ex),rx=ct(nx)(ix=class DropdownItem extends dt.Element{getDefaultOptions(){return t({},super.getDefaultOptions(),{active:!1,list:null,item:null})}render(){return[dt.createElement("div",null,super.render()),dt.createElement("div",null,dt.createElement("div",null,this.options.active?dt.createElement(Dg,{sizelist.dispatch("changeActive",this.options.item)}onMount(){super.onMount(),this.addClickListener((()=>this.setActive()))}})||ix;var sx,ox,ax,lx,cx;let ux=(sx=class DropdownListStyle extends _I{constructor(){super(...arguments),i(this,"popup",ox,this),i(this,"item",ax,this),i(this,"hovered",lx,this)}},ox=n(sx.prototype,"popup",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{maxHeight:200,overflow:"auto",width:"100%",minWidth:"fit-content",padding:"6px 0",">:first-child":{borderTop:"none"},">*":{borderTop:()=>"1px solid "+this.themeProps.DROPDOWN_ITEM_BORDER}}}}),ax=n(sx.prototype,"item",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",color:this.themeProps.INPUT_TEXT_COLOR,whiteSpace:"nowrap",fontSize:()=>ve()?this.themeProps.FONT_SIZE_SMALL:this.themeProps.FONT_SIZE_NORMAL,">*":{padding:()=>ve()?7:13}}}}),lx=n(sx.prototype,"hovered",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{background:this.themeProps.DROPDOWN_ITEM_HOVER_BACKGROUND}}}),sx),hx=ct(ux)(cx=class DropdownList extends xI{constructor(){super(...arguments),this.lastKeyUpTimestamp=0,this.currentSelectedElementIndex=-1,this.prefix="",this.maxHeight=200}getDefaultOptions(e){var i;return t({},super.getDefaultOptions(e),{testId:"dropdownList",offset:-(null==e||null==(i=e.anchor)?void 0:i.getHeight())-6})}onKeyUp(e){e.stopPropagation(),e.preventDefault();const t=new KeyEvent(e);if(t.isEnter()||t.isTab())return this.children[this.currentSelectedElementIndex].children[0].setActive(),void this.hide();if(t.isBackspace())return void(this.prefix="");if(t.isEscape())return void this.hide();if(t.isArrowUp())return void this.updateHoverElement(this.currentSelectedElementIndex-1);if(t.isArrowDown())return void this.updateHoverElement(this.currentSelectedElementIndex+1);const i=Date.now();i-this.lastKeyUpTimestamp>1e3&&(this.prefix=""),this.lastKeyUpTimestamp=i,this.prefix+=t.toString(),this.updateCurrentHighlightedOption()}updateCurrentHighlightedOption(){let e=0;for(const t of this.children){if(t.children[0].children[0].node.innerHTML.toLowerCase().startsWith(this.prefix.toLowerCase()))return void this.updateHoverElement(e);e+=1}}updateHoverElement(e){e<0?e=this.children.length-1:e>=this.children.length&&(e=0),this.currentSelectedElementIndex>=0&&this.children[this.currentSelectedElementIndex].removeClass(this.styleSheet.hovered),this.currentSelectedElementIndex=e,this.children[this.currentSelectedElementIndex].addClass(this.styleSheet.hovered),this.children[this.currentSelectedElementIndex].node.scrollIntoView()}render(){const{styleSheet:e}=this,{options:t,active:i,formatter:n}=this.options;return t.map((t=>dt.createElement("div",{className:e.item},dt.createElement(rx,{active:i&&Ae(i,t),list:this,item:t},n(t)))))}static expand(e){return this.create(document.body,t({},e,{style:{width:e.dropdown.getWidth()}}))}hide(){super.hide(),this.options.dropdown.dispatch("collapse")}addAnchorListeners(){super.addAnchorListeners();const{dropdown:e}=this.options;this.addListener("changeActive",(t=>{e.dispatch("changeActive",t),this.updateOptions({active:t.value}),this.hide()}))}scrollToActiveItem(){if(!s.children.find((e=>e.children[0].options.active));e&&e.node.scrollIntoView({is.attachTimeout((()=>{this.hidden&&this.hide()}),1e3);let e=Date.now();this.attachTimeout((()=>t(e)),50);const t=t=>{e===t&&(super.showPopup(),this.scrollToActiveItem())};this.attachEventListener(window,(()=>{e=Date.now(),this.attachTimeout((()=>t(e)),50)}))}onMount(){super.onMount(),this.attachEventListener(document.body,"keyup",(e=>this.onKeyUp(e)))}})||cx;var dx,px,mx;let gx=(dx=class InputLabelStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",px,this)}},px=n(dx.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",marginBottom:8,fontSize:this.themeProps.FONT_SIZE_SMALL,fontWeight:this.themeProps.FONT_WEIGHT_BOLD,color:this.themeProps.TEXT_SECONDARY_COLOR}}}),dx),bx=ct(gx)(mx=class InputLabel extends dt.Element{render(){return this.options.label}})||mx;var fx,yx,Cx,Sx,Ex,Ax;let wx=(fx=class DropdownInputStyle extends StyleSheet{constructor(){super(...arguments),i(this,"dropdown",yx,this),i(this,"placeholder",Cx,this),i(this,"dropdownText",Sx,this),i(this,"chevronDownIcon",Ex,this)}},yx=n(fx.prototype,"dropdown",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({display:"flex",alignItems:"center",transition:this.themeProps.DEFAULT_TRANSITION,border:"1px solid "+this.themeProps.INPUT_BORDER_COLOR,borderRadius:this.themeProps.BASE_BORDER_RADIUS,background:this.themeProps.INPUT_BACKGROUND,cursor:"pointer",fontSize:()=>ve()?this.themeProps.FONT_SIZE_SMALL:this.themeProps.FONT_SIZE_NORMAL,whiteSpace:"nowrap",color:this.themeProps.INPUT_TEXT_COLOR,":hover":{background:this.themeProps.INPUT_BACKGROUND,border:"1px solid "+this.themeProps.INPUT_BORDER_ACTIVE_COLOR}},this.themeProps.MERCHANT_INPUT_STYLE)}}),Cx=n(fx.prototype,"placeholder",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.INPUT_PLACEHOLDER_COLOR}}}),Sx=n(fx.prototype,"dropdownText",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{flex:1,paddingLeft:15}}}),Ex=n(fx.prototype,"chevronDownIcon",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"9px 18px 9px 9px"}}}),fx),Tx=ct(wx)(Ax=class DropdownInput extends BaseInputElement{setOptions(e){const t=this.options.initialValue;super.setOptions(e);const{initialValue:i}=this.options;void 0!==this.value&&this.node&&this.isEqual(i,t)||this.setValue(i),this.expandedList&&this.expandedList.updateOptions(this.getDropdownListOptions())}getDefaultOptions(){return t({},super.getDefaultOptions(),{label:null,options:[],formatter:e=>e,onExpand:fe,onCollapse:fe,testId:"dropdownComponent"})}handleDropdownSelectedClick(e){e.stopPropagation(),e.preventDefault(),document.activeElement&&document.activeElement.blur&&document.activeElement.blur(),this.expand()}render(){const{styleSheet:e}=this,{placeholder:t,label:i,formatter:n}=this.options,r=this.themeProps.INPUT_USE_PLACEHOLDER_AS_LABEL,s=e.dropdown+(this.getValue()?"":e.placeholder),o=(r?t:i)||Vt.choose+"...";return[i&&!r&&dt.createElement(bx,{label:i}),dt.createElement("div",{className:s,ref:"dropdown"},dt.createElement("div",{className:e.dropdownText},this.getValue()?n(this.getValue()):o),dt.createElement(Lg,{className:e.chevronDownIcon}))]}getDropdownListOptions(){return{dropdown:this,anchor:this.dropdown,options:this.options.options,active:this.getValue(),formatter:this.options.formatter}}expand(){var e;null!=(e=this.expandedList)&&e.node||!this.isInDocument()||(this.expandedList=hx.expand(this.getDropdownListOptions()),this.options.onExpand())}destroyNode(){return this.expandedList&&this.expandedList.destroyNode(),super.destroyNode()}onMount(){super.onMount(),this.addListener("changeActive",(e=his.expandedList=null,this.options.onCollapse()})),this.dropdown.addClickListener((e=>this.handleDropdownSelectedClick(e)))}})||Ax;var vx,Ox;let Dx=(vx=ct((e=>{var t,r,s,o;return t=class InputAutocompleteStyleClass extends e{constructor(){super(...arguments),i(this,"container",r,this),i(this,"suggestionContainer",s,this),i(this,"suggestionItem",o,this)}},r=n(t.prototype,"container",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"relative"}}}),s=n(t.prototype,"suggestionContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"absolute",width:"100%",zIndex:"9999",background:this.themeProps.INPUT_BACKGROUND,border:()=>"1px solid "+this.themeProps.INPUT_BORDER_COLOR}}}),o=n(t.prototype,"suggestionItem",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:40,display:"flex",alignItems:"center",paddingLeft:12,fontSize:this.themeProps.FONT_SIZE_NORMAL,cursor:"pointer",":hover":{background:this.themeProps.INPUT_BACKGROUND_HOVER}}}}),t})(UA)),vx(Ox=class InputAutocomplete extends HA{getDefaultOptions(){return t({},super.getDefaultOptions(),{autocompleteList:[],maxSuggestionCount:3,mAutocompleteOptions=!1,this.selectedOption=null}getChildrenToRender(){return[...super.getChildrenToRender(),this.renderAfterInput()]}isAutocompleteOption(e){const t=Hn(e),i=Hn(this.getValue());if(i.length<this.options.minAutocompleteStringLength)return!1;if(t.length<i.length)return!1;for(let e=0;e<i.length;e+=1)if(t[e].toLowerCase()!==i[e].toLowerCase())return!1;return!0}getAutocompleteItemsToShoist.filter((e=>this.isAutocompleteOption(e.name))).slice(0,this.options.maxSuggestionCount)}selectOption(e){e&&(this.setValue(e.display),this.selectedOption=e,this.dispatch("optionSelected",e))}renderAfterInput(){const{styleSheet:e}=this,t=this.getAutocompleteItemsToShow();return[this.shouldShowAutocompleteOptions&&t.length>0&&dt.createElement("div",{className:e.suggestionContainer},t.map((t=>dt.createElement("div",{className:e.suggestionItem,onClick:()=>this.selectOption(t)},t.name))))]}setValue(e){super.setValue(e),this.selectedOption=e.trim().length?this.getExactlyMatchedOption():null}hideAutocompleteOptions(){thi.shouldShowAutocompleteOptions=!0,this.redraw()}getExactlyMatchedOption(){const e=this.getValue().te:i}=t;return e.toLowerCase()===i.toLowerCase()}))}initFocusListeners(){super.initFocusListeners(),this.input.addNodeListener("blur",(()=>{if(!this.selectedOption){const e=this.getExactlyMatchedOption()||this.selectedOption;this.selectOption(e)}this.options.onBlur()})),this.input.addNodeListener("focus",(e=>{this.selectedOption&&this.selectedOption.name===this.getValue().trim()||this.showAutocompleteOptions(),this.options.onFocus(e)})),document.body.addEventListener("click",(e=>{this.input&&e.target!==this.input.node&&this.hideAutocompletonSelected",(e=>{this.options.onOptionSelect(e)}))}initKeyListeners(){super.initKeyListeners(),this.input.addNodeListener("keydown",(e=>{new KeyEvent(e).isTab()&&this.hideAutocompleteOptions()})),this.input.addNodeListener("keyup",(e=>{this.clearError(),this.selectedOption=null,this.showAutocompleteOptions();const t=new KeyEvent(e);t.isEnter()&&this.options.onEnter(),t.isEscape()&&this.hideAutocompleteOptions()}))}onMount(){super.onMount(),this.showAutocompleteOptions()}})||Ox);var Rx,Px,Ix,Lx,Nx,_x,xx;let Mx=(Rx=class AddressFormStyle extends StyleSheet{constructor(){super(...arguments),i(this,"country",Px,this),i(this,"state",Ix,this),i(this,"postalCode",Lx,this),i(this,"street",Nx,this),i(this,"stateZipCodeContainer",_x,this)}},Px=n(Rx.prototype,"country",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",marginBottom:8,marginTop:10}}}),Ix=n(Rx.prototype,"state",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{flex:1}}}),Lx=n(Rx.prototype,"postalCode",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"25%",marginLeft:10,minWidth:90}}}),Nx=n(Rx.prototype,"street",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:18,marginBottom:8}}}),_x=n(Rx.prototype,"stateZipCodeContainer",[Ap],{confifunction(){return{display:"flex",marginTop:-10}}}),Rx),Bx=wT(Xc)(xx=ct(Mx)(xx=class AddressForm extends(dt.Primitive("form")){constructor(){super(...arguments),this.country=null}getDefaultOptions(){return t({address:null},super.getDefaultOptions())}getInsertedValues(){var e,t,i,n,r;return{recipientName:(null==(e=this.nameInput)?void 0:e.getValue())||"",street:(null==(t=this.streetInput)?void 0:t.getValue())||"",city:(null==(i=this.cityInput)?void 0:i.getValue())||"",state:(null==(n=this.stateInput)?void 0:n.getValue())||"",postalCode:(null==(r=this.postalCodeInput)?void 0:r.getValue())||"",country:this.country}}render(){var e;const{address:t}=this.options,{styleSheet:i}=this,n=this.getInsertedValues(),r=n.country?qL.getStatesNames(n.country.code2):[];return[dt.createElement(HA,{ref:"nameInput",testId:"nameInput",label:Vt.name,initialValue:(null==t?void 0:t.getRecipientName())||this.getUserFullName(),inputAttributes:{placeholder:Vt.name},validators:[{condition:()=>!this.nameInput.isEmpty()}]}),dt.createElement(HA,{ref:"streetInput",testId:"streetInput",className:i.street,label:Vt.addressStreet,initialValue:(null==t?void 0:t.streetAddress)||"",inputAttributes:{placeholder:Vt.addressStreet},validators:[{condition:()=>!this.streetInput.isEmpty()}]}),dt.createElement(Dx,{ref:"cityInput",testId:"cityInput",label:Vt.addressCity,initialValue:(null==t?void 0:t.city)||"",autocompleteList:qL.getCities(),inputAttributes:{placeholder:Vt.addressCity},validators:[{condition:()=>!this.cityInput.isEmpty()}],onOptionSelect:e=>{const{state:t,countryCode:i,city:n}=e.extra;this.cityInput.setValue(n),this.stateInput.setValue(t),this.country=qL.getCountryByCode(i),this.redraw()}}),dt.createElement("div",{className:i.stateZipCodeContainer},dt.createElement(HA,{ref:"stateInput",testId:"stateInput",className:this.styleSheet.state,label:Vt.addressStateRegion,initialValue:(null==t?void 0:t.state)||"",inputAttributes:{placeholder:r.length?Vt.addressState:Vt.addressStateNotRequired,disabled:0===r.length},validators:[{condition:()=>r.length>0&&!this.stateInput.isEmpty()},{condition:()=>this.validateUSState(),error:Vt.invalidStateName}],onBlur:()=>this.redraw()}),dt.createElement(HA,{ref:"postalCodeInput",testId:"postalCodeInput",className:i.postalCode,label:Vt.addressZipCode,initialValue:(null==t?void 0:t.postalCode)||"",inputAttributes:{placeholder:Vt.addressZipCode},onEnter:()=>this.postalCodeInput.blur(),validators:[{condition:()=>!this.postalCodeInput.isEmpty()},{condition:()=>this.validZipCodeInserted(),error:Vt.addressZipCodeInvalid},{condition:()=>this.validateUSZipCode(),error:Vt.zipCodeDoesNotMatchState}]})),dt.createElement(Tx,{ref:"countryDropdown",testId:"countryDropdown",className:i.country,label:Vt.addressCoun=>{const t=qL.getCountries().find((t=>t.name===e));t&&t!==n.country&&(-1===!qL.getStatesNames(t.code2).indexOf(this.stateInput.getValue())&&this.stateInput.setValue(t.verified?qL.getStatesNames(t.code2)[0]:""),this.country=t,this.redraw())},options:qL.getCountries().map((e=>e.name)),initialyInput&&this.cityInput.hideAutocompleteOptions()})]}validateUSState(){return"United States"!==this.country.name||!this.stateInput||null!==ZL(this.stateInput.getValue())}validateUSZipCode(){if("United States"!==this.country.name)return!0;if(!this.stateInput||!this.postalCodeInput)return!0;const e=this.stateInput.getValue(),t=this.postalCodeInput.getValue(),i=ZL(e);if(!i)return!0;const n=function(e){let t="";return(e=parseInt(e,10))>=35e3&&e<=36999?t="AL":e>=99500&&e<=99999?t="AK":e>=85e3&&e<=86999?t="AZ":e>=71600&&e<=72999?t="AR":e>=9e4&&e<=96699?t="CA":e>=8e4&&e<=81999?t="CO":e>=6e3&&e<=6389||e>=6391&&e<=6999?t="CT":e>=19700&&e<=19999?t="DE":e>=32e3&&e<=34999?t="FL":e>=3e4&&e<=31999||e>=39800&&e<=39999?t="GA":e>=96700&&e<=96999?t="HI":e>=83200&&e<=83999?t="ID":e>=6e4&&e<=62999?t="IL":e>=46e3&&e<=47999?t="IN":e>=5e4&&e<=52999?t="IA":e>=66e3&&e<=67999?t="KS":e>=4e4&&e<=42999?t="KY":e>=7e4&&e<=71599?t="LA":e>=3900&&e<=4999?t="ME":e>=20600&&e<=21999?t="MD":e>=1e3&&e<=2799||5501===e||5544===e?t="MA":e>=48e3&&e<=49999?t="MI":e>=55e3&&e<=56899?t="MN":e>=38600&&e<=39999?t="MS":e>=63e3&&e<=65999?t="MO":e>=59e3&&e<=59999?t="MT":e>=27e3&&e<=28999?t="NC":e>=58e3&&e<=58999?t="ND":e>=68e3&&e<=69999?t="NE":e>=88900&&e<=89999?t="NV":e>=3e3&&e<=3899?t="NH":e>=7e3&&e<=8999?t="NJ":e>=87e3&&e<=88499?t="NM":e>=1e4&&e<=14999||6390===e||501===e||544===e?t="NY":e>=43e3&&e<=45999?t="OH":e>=73e3&&e<=73199||e>=73400&&e<=74999?t="OK":e>=97e3&&e<=97999?t="OR":e>=15e3&&e<=19699?t="PA":e>=300&&e<=999?t="PR":e>=2800&&e<=2999?t="RI":e>=29e3&&e<=29999?t="SC":e>=57e3&&e<=57999?t="SD":e>=37e3&&e<=38599?t="TN":e>=75e3&&e<=79999||e>=73301&&e<=73399||e>=88500&&e<=88599?t="TX":e>=84e3&&e<=84999?t="UT":e>=5e3&&e<=5999?t="VT":e>=20100&&e<=20199||e>=22e3&&e<=24699||20598===e?t="VA":e>=2e4&&e<=20099||e>=20200&&e<=20599||e>=56900&&e<=56999?t="DC":e>=98e3&&e<=99499?t="WA":e>=24700&&e<=26999?t="WV":e>=53e3&&e<=54999?t="WI":e>=82e3&&e<=83199&&(t="WY"),t}(t);return i===n}validateInputs(){return this.nameInput.validate(),this.streetInput.validate(),this.cityInput.validate(),this.stateInput.validate(),this.postalCodeInput.validate(),this.nameInput.isValid()&&this.streetInput.isValid()&&this.cityInput.isValid()&&this.stateInput.isValid()&&this.postalCodeInput.isValid()}validZipCodeInserted(){const{country:e,postalCode:t}=this.getInsertedValues();return!!e&&(!e.verified||(0===e.postal_code_regex.length||new RegExp(e.postal_code_regex).test(t)))}getValues(){const{recipientName:e,street:t,city:i,state:n,postalCode:r,country:s}=this.getInsertedValues();return{recipientName:e.trim(),streetAddress:t.trim(),city:i.trim(),country:s.name,countryCode:s.code2,state:n,postalCode:r}}displayFieldErrors(e){const t={recipientName:this.nameInput,street_address:this.streetInput,city:this.cityInput,postal_code:this.postalCodeInput,state:this.stateInput,country:this.countryDropdown};if(e&&e.fields)for(let i of e.fields){const e=t[i.field];e&&e.updateOptions({error:i.message})}}getUserFullName(){const{firstName:e,lastName:t}=Xc.getUserProfile();return`${e||""} ${t||""}`.trim()}async onMount(){super.onMount(),await qL.ensureLoaded(),this.country=qL.getCountries().find((e=>{var t;let{name:i}=e;return i===(null==(t=this.options.address)?void 0:t.country)}))||qL.getCountries()[0],this.redraw()}})||xx)||xx;var kx;let Ux=(n((kx=class AddOrEditAddressComponent extends dt.Element{render(){const e=this.getEditingAddress();return dt.createElement(Bx,{ref:"form",address:e})}getEditingAddress(){return _f.address.inputIntef.address.selectedValue:null}isValid(){return!0}async getAddress(){if(!this.form.validateInputs())return null;try{const e=this.form.getValues(),i=this.getEditingAddress();return i?await async function(e){void 0===e&&(e={});const t=await Zt.post("/user_addresses/edit_address",e);return Au.loadObject(t)}(t({},e,{userAddressId:i.id})):await async function(e){void 0===e&&(e={});const t=await Zt.post("/user_addresses/create",e);return Au.loadObject(t)}(e)}catch(e){null!=e&&e.fields&&this.form.displayFieldErrors(e)}return null}}).prototype,"getAddress",[yb],Object.getOwnPropertyDescriptor(kx.prototype,"getAddress"),kx.prototype),kx);var Hx,zx;let Fx=wT(Au)((n((zx=class AddressPanel extends UC{getDefaultOptions(e){return t({},super.getDefaultOptions(e),{title:()=>_f.address.inputIntent===oE.CHOOSE_VALUE?Vt.chooseAddress:Vt.addNewAddress})}getContinueButtonLabel(){return _f.address.getContinueButtonLabel({[oE.EDIT_VALUE]:Vt.editAddress,[oE.ADD_VALUE]:Vt.addNewAddress})}isContinueButtonDisabled(){var e;return!(null!=(e=this.addressComponent)&&e.isValid())}async handleContinueButtonClick(){const e=await this.addressComponent.getAddress();await _f.address.selectValue(e)}render(){const{styleSheet:e}=this,t=_f.address.getInputComponentClass({[oE.CHOOSE_VALUE]:Q_,[oE.ADD_VALUE]:Ux});return[dt.createElement(t,{ref:"addressComponent",onChange:()=>this.redraw()}),dt.createElement(iS,{ref:"button",label:this.getContinueButtonLabel(),disabled:this.isContinueButtonDisabled(),onClick:()=>this.handleContinueButtonClick(),classNametton()]}onMount(){super.onMount(),this.redraw()}}).prototype,"handleContinueButtonClick",[yb],Object.getOwnPropertyDescriptor(zx.prototype,"handleContinueButtonClick"),zx.prototype),Hx=zx))||Hx;var Vx,Gx,Wx,jx,Yx,Kx,Zx,qx,$x;let Xx=(Vx=Tp({selector:"body"}),Gx=Tp({selector:"b"}),Wx=class PanelAppGlobalStyleSheet extends Nf{constructor(){super(...arguments),i(this,"body",jx,this),i(this,"panelApp",Yx,this),i(this,"popupGate",Kx,this),i(this,"a",Zx,this),i(this,"b",qx,this),i(this,"allInputs",$x,this)}},jx=n(Wx.prototype,"body",[Vx],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:0,userSelect:"text",height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",fontFamily:this.themeProps.FONT_FAMILY_DEFAULT," *":{userSelect:()=>ve()?"none":"auto","-webkit-tap-highlight-color":"transparent"},position:"absolute"}}}),Yx=n(Wx.prototype,"panelApp",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{overflow:"hidden !important",fontFamily:this.themeProps.FONT_FAMILY_DEFAULT,borderRadius:this.themeProps.MERCHANT_FRAME_BORDER_RADIUS,background:"transparent",color:this.themeProps.TEXT_PRIMARY_COLOR,fontSize:this.themeProps.FONT_SIZE_NORMAL,lineHeight:this.themeProps.GENERAL_LINE_HEIGHT,maxWidth:"100%",maxHeight:"100%"}}}),Kx=n(Wx.prototype,"popupGate",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{margin:"auto",maxWidth:"90%",maxHeight:"90%"}}}),Zx=n(Wx.prototype,"a",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontWeight:this.themeProps.FONT_WEIGHT_BOLD}}}),qx=n(Wx.prototype,"b",[Gx],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontWeight:this.themeProps.FONT_WEIGHT_BOLD}}}),$x=n(Wx.prototype,"allInputs",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontFamily:this.themeProps.FONT_FAMILY_DEFAULT}}}),Wx);class PanelApp extends BaseBlinkApp{extraNodeAttributes(e){super.extraNodeAttributes(e);const t=Xx.getInstance();e.addClass(t.panelApp),tm.gateType!==w.popup&&tm.gateType!=w.popupGate||e.addClass(t.popupGate),e.setStyle(this.sizeStyle)}applyMerchantTheme(){this.addMerchantFonts(),ty(tm.theme)}applyMerchantMessages(){for(const[e,t]of Object.entries(tm.messages))Gt.set(e,t)}applyMerchantConfig(){this.applyMerchantTheme(),this.applyMerchantMessages(),Theme.Global.updateStyleSheets(),Theme.Global.register(Xb,qb)}constructor(){super(...arguments),this.merchantFonts=[],this.sizeStyle={},Ee.appInstance=this;const e=tm.handleFlowInline()?A.empty:ry;this.initRouter(e),this.applyMerchantConfig()}initRouter(e){Router.useLocalHistory=!0,RoutergeToCustomPanel=function(){Router.changeURL(ry)},Router.globalSetURL=function(e){e=$(e);const t=this.getPageToRender(e);if(!t)return;const i=this.getActive(),n=Ee.appInstance;if(t instanceof PanelCollapsed?n.setStyle("pointerEvents","none"):n.setStyle("pointerEvents","initial"),i!==t){n.applyMerchantConfig(),i&&i.dispatch("urlExit"),this.setActive(t),t.dispatch("urlEnter");const r=e.join("/");"empty"!==r&&(tm.gateType!==w.popup&&tm.gateType!=w.popupGate||Ze(_e,{page:r,flowType:tm.panelType}),mp.sendToSDK(hp.ROUTE_CHANGE,{route:r}))}else t.dispatch("urlReload");null!=t&&t.pageTitle&&PageTitleManager.setTitle(t.pageTitle),this.dispatch("change",e,t,i),tm.iframeParams.inlineFlow&&mp.sendToSDK(hp.SCROLL_IFRAME_TOP,{windowScroll:{top:0}})}}addMerchantFonts(){const e=document.createElement("style");for(tm.fonts)if(!this.merchantFonts.find((e=>Ae(e,t)))){const{family:i,style:n,src:r,weight:s,unicodeRange:o}=t;e.appendChild(document.createTextNode(`\n                @font-face{\n                    font-family: ${i};\n                    src: ${r};\n                    ${n?`font-style: ${n};`:""}\n                    ${s?`font-weight: ${s};`:""}\n                    ${o?`unicode-range: ${o}; `:""}\n                }`)),this.merchantFonts.push(t)}}static initializeGlobalStyle(){Xx.initialize()}static addWsListener(e){Zt.addWebsocketListener(e,(async e=>{"logout"===e.type?My.merchantToken?xy():Ab.clearCurrentInfo():gt.applyEvent(e)}))}getRouterOptions(){return{style:{[w.popup]:{height:"100%",width:"100%",overflow:"auto"},[w.popupGate]:{height:"100%",width:"100%",overflow:"auto"},[w.banner]:{width:"100%"},[w.cover]:{height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},null:{width:"100%",display:"flex",overflow:"auto",justifyContent:"center"}}[tm.gateType]}}getStaticInvisibleElements(){const e=fr.getMerchant();return dt.createElement("div",{style:{opacity:0,pointerEvents:"none",zIndex:-1,position:"absolute",top:-1e4,left:-1e4}},e&&dt.createElement(Image,{src:e.wideLogoUrl}),dt.createElement("div",{style:{fontStyle:"italic"}},"a"),dt.createElement("div",{style:{fontWeight:Theme.props.FONT_WEIGHT_BOLD}},"a"),dt.createElement("div",null,"a"))}getRoutes(){return new Route([],null,function(){const e=function(e,t,i){return void 0===i&&(i={doNotCache:!0}),new Route([e],t,[],i)};return[e(ny,av),e(j,(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return-1!==tm.authSocialProviders.indexOf("cds")?new sv(...t):tm.isInlineDonationFlow()?new DonationAuthPage(...t):tm.isInlineSubscriptionFlow()?new SubscribeAuthPage(...t):new AuthPanelPage(...t)})),e(Y,EmailCodeConfirmationPanel),e(ry,ZS),e(A.empty,PanelCollapsed),e(Oy,Ov),e(Dy,NewsletterSubscribeSuccessPanel),e(cy,oO),e(uy,AD),e(hy,zD),e(dy,YD),e(py,ZD),e(my,CancelDonationPanel),e(gy,nR),e(fy,CR),e(yy,OR),e(Ey,GiftSubscriptionDetailsPanel),e(Ay,NR),e(by,ManageSubscriptionPanel),e(Cy,PP),e(Sy,LP),e(Ly,UP),e(Ny,EditSubscriptionSuccessPanel),e(Ry,vL),e(Py,DL),e(Iy,IL),e(_y,UserDashboardChangeEmailCodeConfirmPanel),e(wy,ShopPanel),e(Ty,ShopReviewOrderPanel),e(vy,ShopOrderSuccessPanel),e(sy,E_),e(ay,Z_),e(ly,tR),e(oy,Fx)]}(),{})}preventScrollPropagation(){const e=document.documentElement;e.setAttribute("tabindex",0);const t=!!function(){if(null==Re)try{window.addEventListener("teefineProperty({},"passive",{get:()=>(Re=!0,null)}))}catch(e){}return Re}()&&{passive:!1};e.addEventListener("wheel",(e=>e.stopPropagation()),t),e.addEventListener("touchmove",(e=>e.stopPropagation()),t)}hideScrim(){this.redraw(),Object.assign(document.documentElement.style,{background:"transparent"})}showScrim(){Object.assign(document.documentElement.style,{background:Xx.getInstance().themeProps.MERCHANT_SCRIM_BACKGROUND})}onMount(){super.onMount(),_f.updateActiveFlow(),tm.addChangeListener((()=>_f.updateActiveFlow())),mp.addListener(hp.ROUTE_CHANGE,(e=>{let{url:t}=e;t===A.empty&&_f.clearActiveFlow()})),$S(E.panel),this.preventScrollPropagation(),this.attachChangeListener(tm,(()=>{this.applyMerchantConfig(),this.redraw()})),tm.gateType===w.popup&&Router.getCurrentPath()!=="/"+A.empty&&this.showScrim(),mp.addListener(hp.ROUTE_CHANGE,(e=>{let{url:t}=e;t&&Router.changeURL(t),t===A.empty?this.hideScrim():tm.gateType===w.popup&&this.showScrim()})),window.PanelDebug={Flow:_f,Router:Router,iFrameState:tm}}}const Jx=new class IFrameBlinkService extends Dispatchable{constructor.addListeners(),this.addConnectionDispatchers()}addListeners(){const e=()=>this.updateSdkUserData();Ac.addChangeListener(e),nh.addChangeListener(e),as.addChangeListener(e),Ml.addChangeListener(e),dA.addChangeListener(e),eE.addChangeListener(e),tm.addChangeListener(e),Ab.onAuthenticationChange(e)}addConnectionDispatchers(){Xr.addCreateListener((e=>this.showPayment>this.showPaymentAnimation(e.getDebitedAmount())))}updateSdkUserData(){const e=this.getSdkUserData();Ae(e,this.lastSdkUserData)||(this.lastSdkUserData=e,mp.sendToSDK(hp.UPDATE_SDK_USER_DATA,{userData:e}))}getSerializedSubscription(){const e=eE.getActiveSubscription();if(e)return e.serializeForSDK();const t=Qb.getUserEmail();if(fr.isMerchant(C)&&se(t)&&t.indexOf("@tnr.com")>=0){const e=Date.now();return{id:"fake-tnr",currencyCode:"usd",deliveryAddressId:null,blinkSignature:null,nextPaymentAttempt:null,userId:Qb.getUserId(),amount:2e7,createdAt:new StemDate(e).format(),canceledAt:null,activeUntil:new StemDate(e).addUnit(TimeUnit.MONTH).format()}}return null}getSdkUserData(){const e=_,t=Qb.getUserId(),i=as.getPreferences(),n=Ml.getByUserAndMerchant(t,fr.merchantId);if(!Ab.isAuthenticated()||!i)return e;const{showOnboarding:r}=i;r&&ls({showOnboarding:!1}).then();const s=eE.getActiveRecurringDonation(),o=eE.getLatestOneTimeDonation(),a=dA.filter((e=>e.isSubscribed()&&e.merchantId===fr.merchantId));return{userId:t,alwaysShowBalance:i.shouldShowBalanceInline(),subscription:this.getSerializedSubscription(),showOnboarding:r,activeRecurringDonation:null==s?void 0:s.serializeForSDK(),latestOneTimeDonation:null==o?voi,activeNewsletters:a.map((e=>e.serializeForSDK())),newsletterIds:a.map((e=>e.audienceId)),metadata:(null==n?void 0:n.metadata)||{}}}showPaymentAnimation(e){const t=as.getPreferences();e.getAmount()>0&&null!=t&&t.showPaymentAnimation&&mp.sendToSDK(hp.SESSION_PAYMENT_MADE)}},Qx=function(e){var t;return void 0===e&&(e=dt.Element),(t=class Element extends e{dispatchHeightChange(){const e=this.computeHeight();Dispatcher.Global.dispatch("widgetAnimationUpdateHeight",e)}computeHeight(){return this.getHeight()}onMount(){this.constructor.instance=this,super.onMount()}}).instance=void 0,t},eM=Qx();var tM,iM,nM,rM,setBalance(){return kn.getWallet().getBalance()}onMount(){super.onMount(),this.attachChangeListener(kn,(()=>this.redraw()))}}let aM=(tM=class AnimatedBalanceStyle extends StyleSheet{constructor(){super(...arguments),this.keepDuration=2e3,this.overlap=!0,i(this,"balance",iM,this),i(this,"updateValue",nM,this),i(this,"transition",rM,this),i(this,"transparent",sM,this),i(this,"keepUpdateValue",oM,this)}},iM=n(tM.prototype,"balance",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{userSelect:"none",position:"relative",">:first-child":{opacity:"1",transition:`opacity ${this.themeProps.DEFAULT_TRANSITION_DURATION_MS}ms ease`}}}}),nM=n(tM.prototype,"updateValue",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"absolute",right:()=>this.overlap?"50%":-8,bottom:"0px",transform:()=>this.overlap?"translate(50%, .7em)":"translateY(0)",transition:`all ease ${this.themeProps.DEFAULT_TRANSITION_DURATION_MS}s`}}}),rM=n(tM.prototype,"transition",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{transform:()=>this.overlap?"translate(50%, 0)":"translateY(-1em)",opacity:"1"}}}),sM=n(tM.prototype,"transparent",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{opacity:()=>this.overlap?".2 !important":"initial"}}}),oM=n(tM.prototype,"keepUpdateValue",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{transform:()=>this.overlap?"tanslateY(-1em)",opacity:()=>this.overlap?"0":"1"}}}),tM);var lM,cM,uM,hM,dM,pM,mM,gM;ct(aM)(class AnimatedBalance extends Balance{constructor(){super(...arguments),this.styleSheet.overlap=this.options.overlap}getDefaultOptions(){return Object.assign({},super.getDefaultOptions(),{overlap:!0,showDelta:!0})}extraNodeAttributes(e){super.extraNodeAttributes(e),e.addClass(this.styleSheet.balance)}render(){if(null==this.balance)return"";const{styleSheet:e}=this;let t=null,i="";return(this.updateValue||this.keepUpdate)&&(t=dt.createElement("div",{className:e.updateValue+" "+(this.addTransition?e.transition:"")+(this.keepUpdate?e.keepUpdateValue:"")},this.updateValue),i=e.transparent),[this.options.overlap?dt.createElement("div",{className:i},this.balance.toMainUnitString()):this.balance.toMainUnitString(),this.options.showDelta?t:null]}redraw(){if(null==this.balance||document.hidden)return this.balance=this.getBalance(),void super.redraw();this.inAnimation||this.balance.getAmount()===this.getBalance().getAmount()?super.redraw():this.animate()}animate(){const e=this.balance,t=this.getBalance(),i=t.substract(e).getAmount(),n=StemDate.now();this.inAnimation=!0,this.keepUpdate=!1,this.addTransition=!1,this.updateValue=new Money(Math.abs(i),e.getCurrency());const r=()=>{const s=StemDate.now()-n;if(s>=this.themeProps.DEFAULT_TRANSITION_DURATION_MS)return this.balance=t,this.redraw(),void setTimeout((()=>{this.inAnimation=!1,this.keepUpdate=!0,this.addTransition=!1,this.redraw(),setTimeout((()=>{this.keepUpdate=!1,this.updateValue=null,this.redraw()}),this.themeProps.DEFAULT_TRANSITION_DURATION_MS)}),this.styleSheet.keepDuration);this.balance=s/this.themeProps.DEFAULT_TRANSITION_DURATION_MS*i+e.getAmount(),this.redraw(),requestAnimationFrame(r),this.addTransition=!0};requestAnimationFrame(r)}});const bM={first:{transform:"translateY(0)",opacity:1},second:{transform:"translateY(100%)",opacity:0},third:{transform:"translateY(200%))",opacity:0}},fM={first:{transform:"translateY(-100%)",opacity:0},second:{transform:"translateY(0)",opacity:1},third:{transform:"translateY(100%)",opacity:0}},yM={first:{transform:"translateY(-200%)",opacity:0},second:{transform:"translateY(-100%)",opacity:0},third:{transform:"translateY(0)",opacity:1}},CM=e=>({"0%":bM[e],"40%":fM[e],"60%":fM[e],"100%":yM[e]});let SM=(lM=class AnimationKeyframes extends StyleSheet{constructor(){super(...arguments),i(this,"oldBalance",cM,this),i(this,"amount",uM,this),i(this,"newBalance",hM,this)}},cM=n(lM.prototype,"oldBalance",[vp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return CM("first")}}),uM=n(lM.prototype,"amount",[vp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return CM("second")}}),hM=n(lM.prototype,"newBalance",[vp],{confile:!0,initializer:function(){return CM("third")}}),lM),EM=(dM=class RollAnimatedBalanceStyle extends StyleSheet{constructor(){super(...arguments),this.transitionDuration=2e3,i(this,"balance",pM,this),this.getTransitionStyle=e=>({animation:SM.getInstance()[e].toString(),animationDuration:this.transitionDuration/1e3+"s",animationFillMode:"forwards",animationTimingFunction:"ease"}),i(this,"animatedBalance",mM,this)}},pM=n(dM.prototype,"balance",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{userSelect:"none",position:"relative",width:"100%",transform:"translateY(-.5em)",">*":{position:"absolute",width:"100%",textAlign:"center"}}}}),mM=n(dM.prototype,"animatedBalance",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">:first-child":this.getTransitionStyle("oldBalance"),">:nth-child(2)":this.getTransitionStyle("amount"),">:nth-child(3)":this.getTransitionStyle("newBalance")}}}),dM),AM=ct(EM)(gM=class RollAnimatedBalance extends Balance{extraNodeAttributes(e){super.extraNodeAttributes(e),e.addClass(this.styleSheet.balance),this.inAnimation&&e.addClass(this.styleSheet.animatedBalance)}render(){return null==this.balance?"":this.inAnimation?[dt.createElement("div",null,this.balance.toMainUnitString()),dt.createElement("div",null,this.updateSign,this.updateValue),dt.createElement("div",null,this.getBalance().toMainUnitString())]:[dt.createElement("div",null,this.getBalance().toMainUnitString())]}redraw(){return null==this.balance||document.hidden?(this.balance=this.getBalance(),super.redraw()):this.inAnimation||this.balance.equals(this.getBalance())?super.redraw():(this.animate(),null)}animate(){const e=this.balance,t=this.getBalance(),i=t.subtract(e).getAmount();this.updateValue=new Money(Math.abs(i),e.getCurrency()),this.inAnimation=!0,this.updateSign=t.greaterThan(e)?"+":"",this.redraw(),this.attachTimeout((()=>{this.updateValue=null,this.updateSign=null,this.balance=t,Dispatcher.Global.dispatch("balanceAnimationFinished"),this.inAnimation=!1,this.redraw()}),this.styleSheet.transitionDuration)}})||gM;var wM,TM,vM,OM,DM,RM,PM,IM;let LM=(wM=class IndexCollapsedStyle extends StyleSheet{constructor(){super(...arguments),i(this,"indexCollapsed",TM,this),i(this,"whiteScreen",vM,this),i(this,"invisible",OM,this),i(this,"unclickable",DM,this),i(this,"inlineBalance",RM,this)}},TM=n(wM.prototype,"indexCollapsed",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{background:this.themeProps.WALLET_13,position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%",top:0,left:0,zIndex:5,opacity:1,transition:this.themeProps.DEFAULT_TRANSITION_DURATION_MS/2+"ms linear",cursor:"pointer"}}}),vM=n(wM.prototype,"whiteScreen",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{background:()=>this.themeProps.WHITE+" !important"}}}),OM=n(wM.prototype,"invisible",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{opacity:"0 !important"}}}),DM=n(wM.prototype,"unclickable",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{pointerEvents:"none"}}}),RM=n(wM.prototype,"inlineBalance",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:18,fontWeight:"initial",width:"58px !important",height:"1em",color:Theme.props.WALLET_BALANCE_COLOR,transform:"translateY(-3px) !important",marginLeft:10}}}),wM),NM=ct(LM)((IM=class IndexCollapsed extends eM{constructor(){super(...arguments),this.expanded=!1}extraNodeAttributes(e){super.extraNodeAttributes(e);const{indexCollapsed:t,unclickable:i,invisible:n}=this.styleSheet;e.addClass(t),e.setAttribute("test-id","widgetIndexCollapsed"),this.expanded&&(e.addClass(i),e.addClass(n))}render(){var e;const t=(null==(e=as.getPreferences())?void 0:e.shouldShowBalanceInline())&&dt.createElement(AM,{className:this.styleSheet.inlineBalance});return[dt.createElement(Vg,{size:t?24:31,color:"white"}),t]}static hide(){const{instance:e}=this;if(e.expanded)return;e.expanded=!0;const{invisible:t,unclickable:i,whiteScreen:n}=e.styleSheet;e.addClass(n),this.invisibleTimeout=e.attachTimeout((()=>{e.expanded&&(e.addClass(t),clearTimeout(this.invisibleTimeout))}),e.themeProps.DEFAULT_TRANSITION_DURATION_MS/3.5),this.unclickableTimeout=e.attachTimeout((()=>{e.expanded&&(e.addClass(i),clearTimeout(this.invisibleTimeout))}),e.themeProps.DEFAULT_TRANSITION_DURATION_MS/2)}static show(){const{instance:e}=this;e.expanded=!1,clearTimeout(this.invisibleTimeout),clearTimeout(this.unclickableTimeout);const{whiteScreen:t,invisible:i,unclickable:n}=e.styleSheet;e.removeClass(n),e.removeClass(i),e.remoispatchHeightChange()}computeHeight(){return 52}istener((()=>Router.changeURL(Vy.INDEX_EXPANDED))),this.attachChangeListener(as,(()=>this.redraw()))}},IM.invisibleTimeout=void 0,IM.unclickableTimeout=void 0,PM=IM))||PM;const _M=Theme.Global.fork("WidgetWallet",{ERROR_COLOR:"#FF8800",LINK_COLOR:"#00C3EB",TEXT_PRIMARY_COLOR:e=>e.WALLET_2,BUTTON_PRIMARY_BACKGROUND:"#1A8289",BUTTON_PRIMARY_HOVER_BACKGROUND:e=>e.WALLET_10,TOGGLE_BACKGROUND:e=>e.WALLET_17,TOGGLE_DISABLED_BACKGROUND:e=>e.WALLET_7,TOGGLE_SHADOW:"0 1px 1px rgba(0,0,0,.14), 0 2px 1px  -1px rgba(0,0,0,.12), 0 1px 3px rgba(0,0,0,.2)",TOGGLE_COLOR:e=>e.WALLET_2,INPUT_BACKGROUND:e=>e.WALLET_15,INPUT_PLACEHOLDER_COLOR:e=>e.WALLALLET_2,POPUP_BORDER:e=>"1px solid "+e.WALLET_16,POPUP_BACKGROUND:e=>e.WALLET_15,POPUP_MAX_WIDTH:256,MERCHANT_FRAME_CLOSE_BUTTON_COLOR:e=>e.WHITE}),xM=Theme.Global.fork("WidgetMerchant",{BUTTON_PRIMARY_BACKGROUND:"#000000",BUTTON_PRIMARY_HOVER_BACKGROUND:"#000000",BUTTON_PRIMARY_SHADOW:"noRY_TEXT_SHADOW:"none",LINK_COLOR:e=>e.MERCHANT_2,LINK_COLOR_HOVER:"#000000"});var MM,BM,kM,UM,HM,zM,FM,VM,GM,WM,jM,YM;let KM=(MM=class WalletCardStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",BM,this),i(this,"title",kM,this),i(this,"content",UM,this),i(this,"buttonContainer",HM,this),i(this,"contentSection",zM,this),i(this,"hidden",FM,this),this.scrollFade={boxShadow:"0 4px 6px rgba(0,0,0,.12)",backgroundColor:"transparent",height:8,zIndex:10,position:"relative",width:"100%"},i(this,"scrollTopFade",VM,this),i(this,"scrollBottomFade",GM,this),i(this,"keyboardExpanded",WM,this),i(this,"noScroll",jM,this)}},BM=n(MM.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{zIndex:1,color:this.themeProps.WALLET_2,width:"100%",padding:"24px 0 18px",display:"flex",flexDirection:"column",height:"fit-content",minHeight:"fit-content",justifyContent:"flex-end",alignSelf:"flex-end",borderRadius:()=>ve()&&!H.isLandscape()?0:"12px 12px 0 0"}}}),kM=n(MM.prototype,"title",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:21,fontWeight:200,margin:"0px 0px 24px 24px",color:this.themeProps.WHITE}}}),UM=n(MM.prototype,"content",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{zIndex:2,padding:"0 24px",overflow:["overlay","auto"]}}}),HM=n(MM.prototype,"buttonContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"0 24px",marginTop:"18px",">:first-child":{width:"100%",textAlign:"center"}}}}),zM=n(MM.prototype,"contentSection",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexDirection:"column",position:"relative",justifyContent:"flex-end"}}}),FM=n(MM.prototype,"hidden",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{visibility:"hidden"}}}),VM=n(MM.prototype,"scrollTopFade",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({},this.scrollFade,{marginTop:-8})}}),GM=n(MM.prototype,"scrollBottomFade",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({},this.scrollFade,{transform:"rotate(180deg)",marginBottom:-8})}}),WM=n(MM.prototype,"keyboardExpanded",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{">:nth-child(3)":{overflow:"initial",height:"fit-content"},overflow:"auto !important",display:"initial"}}}),jM=n(MM.prototype,"noScroll",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{overflow:"hidden"}}}),MM),1,this.scrolledFromBottom=!1,this.hideScroll=!1}getDefaultOptions(){return{theme:_M}}checkForScrollFadeDisplay(){const{hidden:e}=this.styleSheet;if(Wn())return this.scrolledFromBottom=!1,this.scrolledFromTop=!1,this.topFade.addClass(e),void this.bottomFade.addClass(e);const{scrollTop:t,scrollHeight:i,offsetHeight:n}=this.content.node;t&&n?(this.scrolledFromTop=!0,this.topFade.removeClass(e)):(this.scrolledFromTop=!1,this.topFade.addClass(e)),i-n-t>10&&n?(this.scrolledFromBottom=!0,this.bottomFade.removeClass(e)):(this.scrolledFromBottom=!1,this.bottomFade.addClass(e))}getChildrenToRender(){const{styleSheet:e}=this,t=e.contentSection+(Wn()?e.keyboardExpanded:"");return[dt.createElement("div",{ref:"contentSection",className:t},this.renderHeaderSection(),dt.createElement("div",{ref:"topFade",className:e.scrollTopFade+(this.scrolledFromTop?"":e.hidden)}),dt.createElement("div",{ref:"content",className:e.content+(this.hideScroll?e.noScroll:"")},this.renderContent()),dt.createElement("div",{ref:"bottomFade",className:e.scrollBottomFade+(this.scrolledFromBottom?"":e.hidden)}),dt.createElement("div",{className:e.buttonContainer},this.renderPrimaryButton())),this.renderSecondaryButton()]}renderHeaderSection(){let{title:e}=this.options;return e&&dt.createElement("div",{className:this.styleSheet.title},e)}renderContent(){return this.render()}renderPrimaryButton(){}renderSecondaryButton(){return dt.createElement(Kf,{ccancel)}computeHeight(){return this.getHeight()}onMount(){super.onMount(),this.content.addNodeListener("scroll",(()=>this.checkForScrollFadeDisplay())),this.attachTimeout((()=>this.checkForScrollFadeDisplay()),this.themeProps.DEFAULT_TRANSITION_DURATION_MS+2{this.redraw(),this.checkForScrollFadeDisplay()}));const e=()=>{this.content&&(this.hideScroll=!0,this.content.stStyle("overflow","overlay"),this.hideScroll=!1}),this.themeProps.DEFAULT_TRANSITION_DURATION_MS))};this.attachListener(Dispatcher.Global,"preventCardScrollDisplay",e),e()}})||YM;var qM,$M,XM,JM,QM,eB,tB,iB;const nB={fontSize:14,fontWeight:""1em",color:()=>Theme.props.WALLET_BALANCE_COLOR,transform:"translateY(0) !important",marginRight:8};let rB=(qM=class AddFundsMinimisedStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",$M,this),i(this,"addFundsLink",XM,this),i(this,"dashboardLink",JM,this),i(this,"balance",QM,this),i(this,"externalLink",eB,this)}},$M=n(qM.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{transition:this.themeProps.DEFAULT_TRANSITION,bottom:0,zIndex:1,height:39,padding:"12px 24px",position:"absolute",width:"100%",display:"flex",justifyContent:"space-between"}}}),XM=n(qM.prototype,"addFundsLink",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{transition:this.themeProps.DEFAULT_TRANSITION,fontSize:12,fontWeight:"400",color:this.themeProps.WALLET_3,whiteSpace:"nowrap",display:"flex",":hover>:last-child":{color:this.themeProps.WHITE,opacity:1}}}}),JM=n(qM.prototype,"dashboardLink",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.WHITE," path ":{fillOpacity:1}}}}),QM=n(qM.prototype,"balance",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({},nB,{opacity:0})}}),eB=n(qM.prototype,"externalLink",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",marginLeft:6}}}),qM),sB=ct(rB)(((iB=class AddFundsMinimised extends dt.Element{render(){const{styleSheet:e}=this;return[dt.createElement(Kf,{href:Vy.ADD_FUNDS,className:e.addFundsLink},dt.createElement(AM,{ref:"balance",className:e.balance}),dt.createElement("div",null,Vt.blinkWallet)),dt.createElement(Kf,{className:ic getHeight(){return this.instance.getHeight()}onMount(){super.onMount(),this.constructor.instance=this}}).instance=void 0,tB=iB))||tB;var oB,aB,lB,cB;let uB=(oB=class MerchantCardStyle extends KM{constructor(){super(...arguments),i(this,"container",aB,this),i(this,"title",lB,this)}},aB=n(oB.prototype,"container",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{zIndex:2,color:"initial"}}}),lB=n(oB.prototype,"title",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:"#000000"}}}),oB),hB=ct(uB)(cB=class MerchantCard extends ZM{getDefaultOptions(e){return t({},super.getDefaultOptions(e),{theme:xM})}computeHeight(){return super.computeHeight()+sB.getHeight()}})||cB;var dB,pB,mB,gB,bB;let fB=(dB=class SubscriptionOverviewStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",pB,this),i(this,"boldInfo",mB,this),i(this,"priceInfo",gB,this)}},pB=n(dB.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{paddingTop:6,textAlign:"center",whiteSpace:"nowrap"}}}),mB=n(dB.prototype,"boldInfo",[Ap],{confiWeight:"bold",color:this.themeProps.MERCHANT_5}}}),gB=n(dB.prototype,"priceInfo",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.MERCHANT_2,display:"inline-block",marginLeft:5}}}),dB),yB=ct(fB)(bB=class SubscriptionOverview extends dt.Element{render(){const{styleSheet:e}=this,{subscription:t}=this.options,{coverage:i}=t,n=t.getPaidUntil(),r=t.getNextBillingDate();return t.isActiveButCanceled()?[dt.createElement("div",{className:e.boldInfo},Vt.canceledSubscription),dt.createElement("div",null,dt.createElement("span",{className:e.boldInfo},i.name),dt.createElement("span",{className:e.priceInfo},"(",Vt.canceled,")")),n?dt.createElement("div",null,Vt.expiresOnDate(n)):null]:[dt.createElement("div",{className:e.boldInfo},Vt.activeSubscriptionText),dt.createElement("div",null,dt.createElement("span",{className:e.boldInfo},i.name)),r?dt.createElement("div",null,Vt.nextBillingDate(r)):null]}})||bB;var CB,SB,EB,AB,wB;let TB=(CB=class ArticleDetailsStyle extends StyleSheet{constructor(){super(...arguments),i(this,"currentArticle",SB,this),i(this,"title",EB,this),i(this,"articlePriceContainer",AB,this)}},SB=n(CB.prototype,"currentArticle",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"0 24px",display:"flex !important",justifyContent:"center",alignItems:"baseline",opacity:1}}}),EB=n(CB.prototype,"title",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{flex:1,maxWidth:"fit-content",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontSize:14,fontStyle:"italic",color:this.themeProps.MERCHANT_3}}}),AB=n(CB.prototype,"articlePriceContainer",[Ap],{confipaddingLeft:8,color:this.themeProps.MERCHANT_2}}}),CB),vB=ct(TB)(wB=wT(os)(wB=class ArticleDetails extends dt.Element{render(){const{styleSheet:e}=this,{request:t,response:i}=FS.lastResponse||{},n=os.load(i)[0];if(!n)return null;const r=(null==t?void 0:t.comment)||{};return[dt.createElement("div",{className:e.currentArticle},dt.createElement("div",{className:e.title},r.title),dt.createElement("div",{className:e.articlePriceContainer},n.getAmount()))]}})||wB)||wB;var OB,DB,RB,PB,IB,LB;let NB=(OB=class SubscriptionIndexStyle extends StyleSheet{constructor(){super(...arguments),i(this,"title",DB,this),i(this,"button",RB,this),i(this,"supportMerchantMessage",PB,this)}},DB=n(OB.prototype,"title",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontWeight:"lighter",fontSize:20,textAlign:"center"}}}),RB=n(OB.prototype,"button",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:18,width:"100%"}}}),PB=n(OB.prototype,"supportMerchantMessage",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:16,lineHeight:24,textAlign:"center",marginTop:18}}}),OB),_B=ct(NB)(IB=wT(eE,as)((n((LB=class SubscriptionIndex extends dt.Element{async reactivateSubscrerPrimaryButton(),this.renderSecondaryButton()]}renderSubscriptionSection(){const e=eE.getActiveSubscription();return e?dt.createElement(yB,{subscription:e}):[dt.createElement(vB,null),dt.createElement("div",{className:this.styleSheet.supportMerchantMessage},Vt.considerSubscribing)]}renderSecondaryButton(){return fr.getMerchant().allowPurchases&&dt.createElement(Kf,{href:Vy.AUTOPAY,value:Vt.manageAutopay,centered:!0})}renderPrimaryButton(){const{styleSheet:e}=this;return eE.getActiveSubscription()?eE.getActiveSubscription().isActiveButCanceled()?dt.createElement(iS,{label:Vt.reactivate,onClick:()=>this.reactivateSubscription(),className:e.button}):dt.createElement(iS,{label:Vt.manageSubscription,onClick:()=>ZC(!0,!0),className:e.button}):dt.createElement(iS,{label:Vt.subscribe,onClick:()=>ZC(),className:e.button})}}).prototype,"reactivateSubscription",[yb],Object.getOwnPropertyDescriptor(LB.prototype,"reactivateSubscription"),LB.prototype),IB=LB))||IB)||IB;var xB,MB,BB,kB,UB,HB,zB,FB;let VB=(xB=class MerchantDonationStyle extends NB{constructor(){super(...arguments),i(this,"recurringDonor",MB,this),i(this,"amountAndFrequency",BB,this),i(this,"descriptionContainer",kB,this),i(this,"supportMerchantMessage",UB,this),i(this,"manageDonationContainer",HB,this),i(this,"billingDateParagraph",zB,this)}},MB=n(xB.prototype,"recurringDonor",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.MERCHANT_5,fontWeight:"bold",fontSize:14,textAlign:"center"}}}),BB=n(xB.prototype,"amountAndFrequency",[Ap],{confihemeProps.MERCHANT_2,paddingLeft:8,fontSize:14}}}),kB=n(xB.prototype,"descriptionContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:14,color:this.themeProps.MERCHANT_3,marginTop:12}}}),UB=n(xB.prototype,"supportMerchantMessage",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:16,textAlign:"center",marginTop:18}}}),HB=n(xB.prototype,"manageDonationContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{color:this.themeProps.LINK_COLOR,paddingLeft:8,display:"inline-block",fontWeight:"inherit",textDecoration:"none"}}}),zB=n(xB.prototype,"billingDateParagraph",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:12}}}),xB),GB=wT(eE)(FB=ct(VB)(FB=class DonationOverview extends dt.Element{renderPrimaryButton(){const{styleSheet:e}=this;if(eE.getActiveRecurringDonation()){const{allowOneTime:t}=_f.donationDetails.getOptionsFrn t&&dt.createElement(iS,{onClick:()=>KC(!1,!0),className:e.button,label:Vt.makeAnothn})}return dt.createElement(iS,{onClick:()=>KC(),className:e.button,label:Vt.donate})}renderSecondaryButton(){return eE.getActiveRecurringDonation()&&dt.createElement(Kf,{laRecurringDonation,centered:!0,onClick:()=>KC(!0)})}renderActiveDonation(){const{styleSheet:e}=this,t=eE.getActiveRecurringDonation(),i=t.getNextBillingDate();return[dt.createElement("div",{className:e.recurringDonor},Vt.recurringDonor(t.formatPrice())),dt.createElement("div",{className:e.descriptionContainer},i&&dt.createElement("div",{className:e.billingDateParagraph},Vt.activeDonationDescription1(i)),dt.createElement(MessageElement,{className:e.billingDateParagraph,message:Vt.activeDonationDescription2(fr.getMerchant().name)}))]}renderNoDonation(){return dt.createElement("div",{className:this.styleSheet.supportMerchantMessage},Vt.supportByDonating(fr.getMerchant()))}render(){return[eE.getActiveRecurringDonation()?this.renderActiveDonation():this.renderNoDonation(),this.renderPrimaryButton(),this.renderSecondaryButton()]}})||FB)||FB;var WB,jB,YB,ed",YB,this),i(this,"emptyDescription",KB,this)}},jB=n(WB.prototype,"buttonContainer",[Ap],{confi:!0,writable:!0,initializer:function(){return{}}}),YB=n(WB.prototype,"subscriptionBordered",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderBottom:"0.5px solid "+Color.addOpacity("#545f69",.12)}}}),KB=n(WB.prototype,"emptyDescription",[Ap],{confineHeight:24,textAlign:"center",color:"#555555"}}}),eaderSection(){return dt.createElement(Fy,null)}render(){return fr.getMerchant().allowSubscriptions||fr.getMerchant().allowDonations?[this.renderSubscriptionSection(),this.renderDonationSection()]:dt.createElement("div",{className:this.styleSheet.emptyDescription},Vt.emptyIndexExpandedDescription)}renderSubscriptionSection(){return fr.getMerchant().allowSubscriptions?dt.createElement(_B,{className:fr.getMerchant().allowDonations?this.styleSheet.subscriptionBordered:""}):null}renderDonationSection(){return fr.getMerchant,null):null}renderSecondaryButton(){return null}static show(){const{instance:e}=this;e.redraw(),e.attachTimeout((()=>e.checkForScrollFadeDisplay()),this.themeProps.DEFAULT_TRANSITION_DURATION_MS)}computeHeight(){return this.getHeight()+sB.getHeight()}})||ZB;var XB;let JB=(n((XB=class AddFundsButton extends iS{getDefaultOptions(e){return t({},super.getDefaultOptions(e),{amount:0,userWallet:kn.getWallet(),onClick:()=>this.addFunds(),onNoPaymentMethod:null})}render(){const{amount:e,userWallet:t}=this.options,i=new Money(e,t.getCurrency());return Vt.addFundsAmount(i.toMainUnitString({decimalsDisplayed:0}))}async addFunds(){const{amount:e,userWallet:t,onNoPaymentMethod:i}=this.options,n=Nr.getPrimary();if(n){Xb.hide(),this.tempDisable(5e3);try{const i=await async function(e,t,i){const n=await Zt.post("/top_up_payments/top_up",{amount:e,paymentMethodId:t.id,walletId:i.id});return Xr.loadObject(n)}(e,n,t);if(i.status!==qr.SUCCEEDED)throw null}catch(e){Xb.showError(e,Vt.failedAddFunds)}}else i()}}).prototype,"addFunds",[yb],Object.getOwnPropertyDescriptor(XB.prototype,"addFunds"),XB.prototype),XB);var QB,ek,tk,ik,nk;let rk=(QB=class ToggleInputStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",ek,this),i(this,"pill",tk,this),i(this,"toggleOn",ik,this)}},ek=n(QB.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{cursor:"pointer",display:"flex",alignItems:"center",position:"relative",borderRadius:20,width:35,height:15,background:this.themeProps.TOGGLE_BACKGROUND}}}),tk=n(QB.prototype,"pill",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"absolute",left:"0%",transitionProperty:"background, left",transition:this.themeProps.DEFAULT_TRANSITION,borderRadius:"100%",width:this.themeProps.TOGGLE_PILL_SIZE,height:this.themeProps.TOGGLE_PILL_SIZE,background:this.themeProps.TOGGLE_DISABLED_BACKGROUND,boxShadow:this.themeProps.TOGGLE_SHADOW}}}),ik=n(QB.prototype,"toggleOn",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{left:"calc(100% - "+this.themeProps.TOGGLE_PILL_SIZE+"px)",background:this.themeProps.TOGGLE_COLOR}}}),QB),sk=ct(rk)(nk=class ToggleInput extends BaseInputElement{render(){const{styleSheet:e}=this;return dt.createElement("div",{className:e.pill+(this.getValue()&&e.toggleOn)})}onMount(){super.onMount(),this.addClickListener((()=>{const e=!this.getValue();this.setValue(e)}))}})||nk;var ok,ak,lk;let ck=(ok=class DashboardAnchoredPopupStyle extends _I{constructor(){super(...arguments),i(this,"popup",ak,this)}},ak=n(ok.prototype,"popup",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{border:"1px solid rgba(0,0,0,0.1)",boxShadow:"0 0 5px 0 rgba(0,0,0,0.2)",padding:8}}}),ok),uk=ct(ck)(lk=class DashboardAnchoredPopup extends xI{getDefaultOptions(e){return t({},super.getDefaultOptions(e),{offset:10})}})||lk;var hk,dk,pk,mk,gk,bk;let fk=(hk=class InfoElementStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",dk,this)}},dk=n(hk.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"inline-block",cursor:"help",lineHeight:0,fontSize:0,verticalAlign:"text-bottom"}}}),hk),yk=(pk=class InfoPopupStyle extends ck{constructor(){super(...arguments),i(this,"popup",mk,this)}},mk=n(pk.prototype,"popup",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:15,pointerEvents:"none"}}}),pk),Ck=ct(yk)(gk=class InfoContentPopup extends uk{getDefaultOptions(e){return t({},super.getDefaultOptions(e),{toggleOnSameAnchor:!0,hideOnMouseLeave:!0})}})||gk,Sk=ct(fk)(bk=class InfoElement extends(dt.Primitive("span")){render(){return dt.createElement(Tg,{size:21})}showPopup(){const{content:e}=this.options;Ck.show({anchor:this,content:e,theme:this.getTheme()})}onMount(){for(const e of["mouseenter","tap"])this.addNodeListener(e,(()=>this.showPopup()))}static optionally(e){return e?dt.createElement(this,{content:e}):null}})||bk;var Ek,Ak,wk,Tk;let vk=(Ek=class AutoReloadStyle extends StyleSheet{constructor(){super(...arguments),i(this,"flexContainer",Ak,this)}},Ak=n(Ek.prototype,"flexContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"space-between",alignItems:"center"}}}),Ek),Ok=ct(vk)(wk=wT(as,kn)((n((Tk=class AutoReloadToggle extends dt.Element{render(){const{styleSheet:e}=this,t=as.getPreferences(),{autoTopUpEnabled:i}=t,n=kn.getWallet().getCurrency(),r=new Money(t.autoTopUpAmount,n),s=new Money(t.autoTopUpThreshold,n);return[dt.createElement("div",{className:e.flexContainer},dt.createElement("div",null,Vt.autoReload," ",(o=()=>dt.createElement("div",{className:e.message},Vt.autoReloadWallet(r,s,n)),Sk.optionally(o))),dt.createElement(sk,{testId:"walletAutoReloadToggle",ref:"autoReloadToggle",initialValue:i,onChange:e=>this.updateAutoReload(e)}))];var o}async updateAutoReload(e){await ls({autoTopUpEnabled:e})}}).prototype,"updateAutoReload",[yb],Object.getOwnPropertyDescriptor(Tk.prototype,"updateAutoReload"),Tk.prototype),wk=Tk))||wk)||wk;var Dk,Rk,Pk,Ik,Lk,Nk,_k,xk,Mk,Bk;const kk=e=>({fontSize:48,height:"1em",fontWeight:200,display:"block",transform:"none !important",margin:"24px 0 36px",color:e.WALLET_BALANCE_COLOR});let Uk=(Dk=class AddFundsExpandedStyle extends KM{constructor(){super(...arguments),i(this,"container",Rk,this),i(this,"content",Pk,this),i(this,"primaryCardContainer",Ik,this),i(this,"changePrimaryCardLabel",Lk,this),i(this,"line",Nk,this),i(this,"balance",_k,this),i(this,"horizontalPadding",xk,this),i(this,"radioButtonsInput",Mk,this)}},Rk=n(Dk.prototype,"container",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{minHeight:""}}}),Pk=n(Dk.prototype,"content",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{overflow:"hidden"}}}),Ik=n(Dk.prototype,"primaryCardContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",justifyContent:"space-between",alignItems:"flex-end"}}}),Lk=n(Dk.prototype,"changePrimaryCardLabel",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",alignItems:"center"}}}),Nk=n(Dk.prototype,"line",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginTop:18}}}),_k=n(Dk.prototype,"balance",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({},kk(this.themeProps),{opacity:0})}}),xk=n(Dk.prototype,"horizontalPadding",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"0 24px"}}}),Mk=n(Dk.prototype,"radioButtonsInput",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",width:"100%",margin:0}}}),Dk),Hk=ct(Uk)(Br(){super(...arguments),this.activeValue=void 0}getDefaultOptions(){return t({},super.getDefaultOptions(),{testI(){return this.options.userWallet.getCurrency()}renderAdvancedSection(){const{styleSheet:e}=this,t=Nr.getPrimary();return t?[dt.createElement("div",{className:e.line+e.primaryCardContainer},dt.createElement(CO,{testId:"walletPrimaryCardDetails",paymentMethod:t}),dt.createElement(Kf,{testId:"walletChangeCardButton",label:Vt.cpPropagation(),Router.changeURL(Vy.CHOOSE_CARD)}})),dt.createElement(Ok,{className:e.line,style:{marginBottom:4}})]:null}render(){const{styleSheet:e}=this,t=W.map((e=>this.mainUnitsToOption(e)));return this.activeValue=this.activeValue||t[1],[dt.createElement(AM,{ref:"balance",className:e.balance}),dt.createElement("div",{className:e.horizontalPadding},dt.createElement(Yw,{ref:"radioButtons",testId:"addFundsAmountButtons",initialValue:this.activeValue,values:t,onChange:e=>{this.activeValue=e,this.redraw()},className:e.radioButtonsInput}),this.renderAdvancedSection())]}mainUnitsToOption(e){return new Money(this.getCurrency().mainUnitsToAmount(e),this.getCurrency()).toMainUnitString({decimalsDiconst t=W.find((t=>this.mainUnitsToOption(t)===e));return this.getCurrency().mainUnitsToAmount(t)}renderPrimaryButton(){return dt.createElement(JB,{testId:"addFundsButton",amount:this.getAmountByOption(this.activeValue),onNoPaymentMethod:()=>Router.changeURL(Vy.ADD_CARD)})}})||Bk)||Bk;var zk,Fk,Vk,Gk,Wk,jk;let Yk=(zk=class AddFundsStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",Fk,this),i(this,"elementExpanded",Vk,this),i(this,"addFunds",Gk,this),i(this,"animationBalance",Wk,this)}},Fk=n(zk.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{background:this.themeProps.WALLET_GRADIENT_BACKGROUND,height:39,overflow:"hidden",borderRadius:0,bottom:0,transition:this.themeProps.DEFAULT_TRANSITION}}}),Vk=n(zk.prototype,"elementExpanded",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100%",borderRadius:()=>ve()&&!H.isLandscape()?0:"12px 12px 0 0",">:first-child":{opacity:1,zIndex:2},">:nth-child(2)":{opacity:0},">:last-child":t({},kk(this.themeProps),{marginBottom:0,width:"100% !important",left:0,zIndex:3})}}}),Gk=n(zk.prototype,"addFunds",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{visibility:"hidden",transition:this.themeProps.DEFAULT_TRANSITION,position:"absolute",top:0,height:"initial !important",minHeight:"100%"}}}),Wk=n(zk.prototype,"animationBalance",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return t({},nB,{transition:this.themeProps.DEFAULT_TRANSITION,position:"absolute !important",left:24,bottom:13,zIndex:0})}}),zk),Kk=ct(Yk)(jk=wT(Nr)(jk=class AddFunds extends eM{constructor(){super(...arguments),this.shouldCollapseAddFunds=!1,this.expandedAddFunds=!1}extraNodeAttributes(e){super.extraNodeAttributes(e),this.expandedAddFunds&&this.addFunds&&this.addFunds.balance&&(e.addClass(this.styleSheet.elementExpanded),this.addFunds.setStyle("visibility","visible"),this.attachTimeout((()=>{const e=this.addFunds.node.getBoundingClientRect(),t=this.addFunds.balance.node.getBoundingClientRect();this.balance.setStyle("bottom",e.bottom-t.bottom)})))}render(){const{styleSheet:e}=this;return[dt.createElement(Hk,{ref:"addFunds",className:e.addFunds}),dt.createElement(sB,null),dt.createElement(AM,{ref:"balance",className:e.animationBalance})]}static show(e){const{instance:t}=this;t.expandedAddFunds=!0,t.updateOptions(e)}static hide(){const{instance:e}=this;e.expandedAddFunds=!1,e.redraw()}computeHeight(){return this.addFunds.computeHeight()}onMount(){super.onMount(),this.attachChangeListener(Xr,(e=>{e&&e.status===qr.SUCCEEDED&&Dispatcher.Global.addListenerOnce("balanceAnimationFinished",(()=>{this.shouldCollapseAddFunds&&this.expandedAddFunds&&Router.back(),this.shouldCollapseAddFunds=!1}))})),this.attachListener(Dispatcher.Global,"shouldCollapseAddFunds",(()=>{this.shouldCollapseAddFunds=!0}))}})||jk)||jk;var Zk,qk,$k,Xk,Jk,Qk,eU;let tU=(Zk=class IndexExpandedStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",qk,this),i(this,"innerContainer",$k,this),i(this,"hidden",Xk,this),i(this,"homePageContainer",Jk,this),i(this,"walletSection",Qk,this)}},qk=n(Zk.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{cursor:"initial",display:"flex",flexDirection:"column",height:"100%",width:"100%",position:"relative",paddingBottom:39,overflow:"hidden",borderRadius:ve()?0:"12px 12px 0 0"}}}),$k=n(Zk.prototype,"innerContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"relative",overflow:"hidden",background:this.themeProps.WHITE,height:"100%",display:"flex",flexDirection:"column",flex:1,justifyContent:"flex-end"}}}),Xk=n(Zk.prototype,"hidden",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{opacity:0,"-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","-webkit-transform":"translate3d(0, 0, 0)","-moz-transform":"translate3d(0, 0, 0)"}}}),Jk=n(Zk.prototype,"homePageContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:Ce()?"100%":"fit-content",minWidth:360,maxHeight:ye()?"initial !important":"",paddingTop:"12px !important"}}}),Qk=n(Zk.prototype,"walletSection",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:"100%",position:"absolute",zIndex:3,minWidth:360}}}),Zk),iU=wT(eE)(eU=ct(tU)(eU=class IndexExpanded extends eM{constructor(){super(...arguments),this.hiddenHomeSection=!0}extraNodeAttributes(e){super.extraNodeAttributes(e),Ab.isAuthenticated()||e.setStyle("opacity",0)}render(){const{styleSheet:e}=this,t=!(this.hiddenHomeSection||!Ab.isAuthenticated()),i=this.hiddenHomeSection?e.hidden:"";return[dt.createElement("div",{ref:"innerContainer",className:e.innerContainer+i},dt.createElement($B,{ref:"nav",className:e.homePageContainer})),t&&dt.createElement(Kk,{ref:"widgetAddFunds",className:e.walletSection+i}),dt.createElement(NM,null)]}static show(e){Dispatcher.Global.dispatch("preventCardScrollDisplay"),this.instance.hidnce.hiddenHomeSection=!0,this.instance.redraw()}computeHeight(){return this.nav.computeHeight()}})||eU)||eU;var nU,rU,sU,oU;let aU=(nU=class WidgetScrimStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",rU,this),i(this,"visible",sU,this)}},rU=n(nU.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:3,borderRadius:()=>ve()&&!H.isLandscape()?0:12,background:this.themeProps.MERCHANT_SCRIM_BACKGROUND,opacity:0,transition:this.themeProps.DEFAULT_TRANSITION_DURATION_MS}}}),sU=n(nU.prototype,"visible",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{opacity:1}}}),nU),lU=ct(aU)(oU=class WidgetScrim extends dt.Element{hide(e){this.removeClass(this.styleSheet.visible),this.attachTimeout((()=>this.destroyNode()),e)}onMount(){super.onMount(),this.attachTimeout((()=>this.addClass(this.styleSheet.visible)))}})||oU;var cU,uU,hU,dU,pU;let mU=(cU=class WalletPopupStyle extends StyleSheet{constructor(){super(...arguments),i(this,"popup",uU,this),i(this,"visible",hU,this),i(this,"hidden",dU,this),i(this,"card",pU,this)}},uU=n(cU.prototype,"popup",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderRadius:()=>ve()&&!H.isLandscape()?0:12,background:this.themeProps.WALLET_GRADIENT_BACKGROUND,width:"100%",transition:this.themeProps.DEFAULT_TRANSITION,position:"absolute",bottom:0,transformOrigin:"bottom",zIndex:3,opacity:1,minWidth:360,transform:"translateY(100%)",minHeight:"fit-content",display:"flex",flexDirection:"column"}}}),hU=n(cU.prototype,"visible",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100%",transform:"translateY(0)"}}}),dU=n(cU.prototype,"hidden",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{opacity:0}}}),pU=n(cU.prototype,"card",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{minHeight:"fit-content"}}}),cU);function gU(e){var t,i;let n=ct(mU)((i=class Popup extends eM{constructor(){super(...arguments),this.visible=!1}static getParentNode(){return iU.instance.node}extraNodeAttributes(e){super.extraNodeAttributes(e),e.addClass(this.styleSheet.popup),this.visible&&e.addClass(this.styleSheet.visible)}static show(e){this.instancesMap.get(this.name)||this.instancesMap.set(this.name,this.create(this.getParentNode(),e))}static hide(){const e=this.instancesMap.get(this.name);e&&e.hide()}hide(e){void 0===e&&(e=this.themeProps.DEFAULT_TRANSITION_DURATION_MS),this.scrim.hide(e),this.removeClass(this.styleSheet.visible),this.attachTimeout((()=>this.destroyNode()),e),this.scrim=null,this.constructor.instancesMap.set(this.constructor.name,null),this.visible=!1}render(){return this.scrim||(this.scrim=lU.create(this.constructor.getParentNode())),dt.createElement(e,{ref:"card",className:this.styleSheet.card})}computeHeight(){return this.card.computeHeight()}onMount(){super.onMount(),this.attachTimeout((()=>{this.visible=!0,this.redraw()}))}},i.instancesMap=new Map,t=i))||t;return n}var bU,fU,yU;let CU=(bU=class MerchantPopupStyle extends mU{constructor(){super(...arguments),i(this,"popup",fU,this),i(this,"visible",yU,this)}},fU=n(bU.prototype,"popup",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{background:this.themeProps.POPUP_BACKGROUND,boxShadow:this.themeProps.POPUP_SHADOW}}}),yU=n(bU.prototype,"visible",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{borderRadius:"4px 4px 0 0"}}}),bU);var SU,EU,AU,wU;let TU=(SU=class AutopayCardStyle extends uB{constructor(){super(...arguments),i(this,"infoLine",EU,this)}},EU=n(SU.prototype,"infoLine",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{marginBottom:14}}}),SU);const vU=function(e){ntNode(){return iU.instance.innerContainer.node}})||t}(ct(TU)(AU=wT(as,Ml)((n((wU=class AutopayCard extends hB{getDefaultOptions(){return t({},super.getDefaultOptions(),{led(){return!as.getPreferences().autoPayEnabled}render(){const{styleSheet:e}=this,t=new Money(as.getPreferences().articlePriceLimit,kn.getWallet().getCurrency()),i=this.isAutopayDefaultDisabled();return[dt.createElement(MessageElement,{className:e.infoLine,message:i?Vt.disabledAutopayInfo1:Vt.autopayInfo1(fr.getMerchant().getName(),t)}),dt.createElement("div",{className:e.infoLine},i?Vt.disabledAutopayInfo2:Vt.autopayInfo2,dt.createElement(fw,{label:Vt.blinkDashboard,href:"/"}),".")]}renderPrimaryButton(){return dt.createElement(iS,{label:eE.isAutoPayEnabled()?Vt.disableAutopay:Vt.enableAutopay,onClick:()=>this.toggleAutopay(),disabled:this.isAutopayDefaultDisabled()})}async toggleAutopay(){const e=fr.getMerchant();await async function(e){void 0===e&&(e={});const t=await Zt.post("/preferences/update_user_merchant_preferences",e);return Ml.loadObject(t)}({userId:Qb.getUserId(),merchantId:e.id,autoPayEnabled:!eE.isAutoPayEnabled()})}}).prototype,"toggleAutopay",[yb],Object.getOwnPropertyDescriptor(wU.prototype,"toggleAutopay"),wU.prototype),AU=wU))||AU)||AU);var OU,DU,RU,PU,IU;let LU=(OU=class ElementStyle extends KM{constructor(){super(...arguments),i(this,"addCardLabel",DU,this),i(this,"content",RU,this)}},DU=n(OU.prototype,"addCardLabel",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontSize:20,fontWeight:"bold",marginBottom:22}}}),RU=n(OU.prototype,"content",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:167}}}),OU);const NU=gU(ct(LU)((n((IU=class AddCardClass extends ZM{getDefaultOptions(){return t({},super.getDefauldt.createElement(kO,{ref:"cardInput",label:""})}renderPrimaryButton(){return dt.createElement(iS,{disabled:!this.cardInput||!this.cardInput.isLoaded(),onClick:()=>this.addCard()},Vt.saveNewCard)}async addCard(){const e=await this.cardInput.confirmCard();await _r(e.id),this.handleCardSuccessfullyAdded()}handleCardSuccessfullyAdded(){Router.localHistory.slice(-1)[0].slice(1)!==Vy.INDEX_COLLAPSED&&Router.back()}onMount(){super.onMount(),this.cardInput.addListener("load",(()=>this.redraw()))}}).prototype,"addCard",[yb],Object.getOwnPropertyDescriptor(IU.prototype,"addCard"),IU.prototype),PU=IU))||PU);var _U,xU,MU,BU,kU,UU;let HU=(_U=class ElementStyle extends KM{constructor(){super(...arguments),i(this,"container",xU,this),i(this,"content",MU,this),i(this,"chooseCardContainer",BU,this)}},xU=n(_U.prototype,"container",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{padding:"24px 0",minHeight:0}}}),MU=n(_U.prototype,"content",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{display:"flex",flexDirection:"column",height:167,padding:"0 24px"}}}),BU=n(_U.prototype,"chooseCardContainer",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{height:"100%",display:"flex",flexDirection:"column"}}}),_U);const zU=gU(ct(HU)((n((UU=class WidgetChooseCardClass extends ZM{getDefaultOptions(){return t({},super.getDefaultOptions(),{title:Vt.choosePaymentMethod})}render(){const{styleSheet:e}=this;return dt.createElement(G_,{ref:"chooseCard",className:e.chooseCardContainer,onAddCard:()=>this.onAddCardClick(),onChange:()=>this.redraw()})}onAddCardClick(){Router.changeURL(Vy.ADD_CARD)}renderPrimaryButton(){var e;return dt.createElement(iS,{testId:"chooseCardButton",disabled:(null==(e=this.chooseCard)?void 0:e.getValue())===Nr.getPrimary(),onClick:()=>this.onPrimaryButtonClick(),label:Vt.continue})}async onPrimaryButtonClick(){var e;await _r(null==(e=this.chooseCard.getValue())?void 0:e.id),Router.back()}}).prototype,"onPrimaryButtonClick",[yb],Object.getOwnPropertyDescriptor(UU.prototype,"onPrimaryButtonClick"),UU.prototype),kU=UU))|D_CARD:NU,CHOOSE_CARD:zU,INSUFFICIENT_FUNDS:Kk}}static getRouteElement(e){for(const t in Vy)if(Vy[t]===e)return this.RouteElements[t];return null}static initRoutesLogic(){this.initBack(),this.initSetUrl(),Ab.addListener(AuthToken.EventTypes.LOGOUT,(()=>Router.changeURL(Vy.INDEX_COLLAPSED))),mp.addListener(hp.ROUTE_CHANGE,(e=>{let{route:t}=e;Router.changeURL(t),t===Vy.INSUFFICIENT_FUNDS&&(Xb.showError(Vt.walletInsufficientFunds),FS.remakeLastPaymentAfterFundsAdded())}));const e=()=>{const e=this.getRouteElement(Router.localHistory.slice(-1)[0].slice(1));e&&e.instance&&e.instance.dispatchHeightChange&&e.instance.dispatchHeightChange()};new MutationObserver((()=>e())).observe(document.body,{childList:!0,subtree:!0}),Der("updatedMaxHeight",(()=>setTimeout((()=>e()))))}static initSetUrl(){var e=this;Router.prototype.setWidgetURL=function(t){let i;i=t.length?$(t)[0]:Vy.INDEX_COLLAPSED;const n=function(){return e.getRouteElement(...arguments)}(i);if(!n)return;XS.handleAnimation(i===Vy.INDEX_COLLAPSED),i===Vy.INDEX_COLLAPSED?iU.hide():(iU.s,function(){e.dispatchRouteChange(...arguments)}(i);const r=this.getPageToRender(t),s=this.getActive();s&&!s.node&&this.setActive(r),i!==Router.localHistory.slice(-1)[0].slice(1)&&document.activeElement&&document.activeElement.blur&&document.activeElement.blur(),this.dispatch("change",i,n.instance)}}static dispatchRouteChange(e){let t=e;t||(t=Router.localHistory.slice(-1)[0].slice(1)),t&&mp.sendToSDK(hp.ROUTE_CHANGEnction(){return e.getRouteElement(...arguments)};Router.back=function(){const e=this.localHistory.pop().slice(1),i=this.localHistory.slice(-1)[0].slice(1),n=t(e);n&&n.hide();const r=t(i);r&&r.instance&&r.instance.dispatchHeightChange&&(r.instance.dispatchHeightChange(),Dispatcher.Global.dispatch("preventCardScrollDisplay")),this.Global.setURL([i])}}}var FU,VU,GU,WU;let jU=(FU=class WidgetCloseButtonStyle extends StyleSheet{constructor(){super(...arguments),i(this,"container",VU,this),i(this,"visible",GU,this)}},VU=n(FU.prototype,"container",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{position:"absolute",zIndex:999999,right:18,top:14,opacity:0,pointerEvents:"none",color:this.themeProps.MERCHANT_FRAME_CLOSE_BUTTON_COLOR,transition:this.themeProps.DEFAULT_TRANSITION}}}),GU=n(FU.prototype,"visible",[Ap],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{opacity:"1 !important",pointerEvents:"all !important",cursor:"pointer"}}}),FU),YU=ct(jU)(WU=class WidgetCloseButton extends Ng{extraNodeAttributes(e){super.extraNodeAttributes(e),Router.getCurrentPath()!=="/"+Vy.INDEX_COLLAPSED&&e.addClass(this.styleSheet.visible)}onMount(){super.onMount(),this.addClickListener(Xy),this.attachChangeListener(Router.Global,((e,t)=>{const i=null==t?void 0:t.getTheme();this.updateOptions({theme:i})}))}})||WU;var KU,ZU,qU,$U,XU,JU,QU,eH;let tH=(KU=Tp({selector:"body"}),ZU=Tp({selector:"b"}),qU=class WidgetGlobalStylesheet extends Nf{constructor(){super(...arguments),i(this,"body",$U,this),i(this,"html",XU,this),i(this,"a",JU,this),i(this,"b",QU,this),i(this,"allInputs",eH,this)}},$U=n(qU.prototype,"body",[KU],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{userSelect:"text",pointerEvents:"none",">*":{pointerEvents:"all"},height:"100%",width:"100%",margin:0,fontFamily:this.themeProps.FONT_FAMILY_DEFAULT," *":{userSelect:()=>ve()?"none":"auto","-webkit-tap-highlight-color":"transparent"},">div:nth-child(3)":{height:"100%"},">div:nth-child(3)>:first-child":{minHeight:"100% !important",height:"100% !important"},position:"absolute",overflow:"hidden","-webkit-backface-visibility":"hidden","-moz-backface-visibility":"hidden","-webkit-transform":"translate3d(0, 0, 0)","-moz-transform":"translate3d(0, 0, 0)",color:this.themeProps.TEXT_PRIMARY_COLOR,fontSize:this.themeProps.FONT_SIZE_NORMAL,lineHeight:this.themeProps.GENERAL_LINE_HEIGHT}}}),XU=n(qU.prototype,"html",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{userSelect:"none",fontSize:"10px",overflow:"hidden !important",width:"100%",height:"100%",transition:this.themeProps.DEFAULT_TRANSITION}}}),JU=n(qU.prototype,"a",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontWeight:this.themeProps.FONT_WEIGHT_BOLD}}}),QU=n(qU.prototype,"b",[ZU],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontWeight:this.themeProps.FONT_WEIGHT_BOLD}}}),eH=n(qU.prototype,"allInputs",[wp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{fontFamily:this.themeProps.FONT_FAMILY_DEFAULT}}}),qU);class WidgetApp extends BaseBlinkApp{constructor(){super(...arguments),Ee.appInstance=this,this.widgetStyle={},this.animationStyleDispatcher=new Dispatcher,this.attachListener(this.animationStyleDispatcher,(e=>{this.widgetStyle=t({},this.widgetStyle,e),this.node&&e.bottom&&this.setStyle(this.widgetStyle)})),XS.initp.REPOSITION_WIDGET,(()=>{XS.repositionWidget()})),this.sendMerchantActivity(),WidgetRouting.initRoutesLogic(),this.initRouter(Vy.INDEX_COLLAPSED)}extraNodeAttributes(e){super.extraNodeAttributes(e);const{DEFAULT_TRANSITION:i}=this.themeProps;e.setStyle(t({overflow:"hidden",boxShadow:"",background:"transparent",opacity:1,position:"absolute",transition:"width "+i+", height "+i+", bottom "+i},tm.widgetVisible&&!tm.activePanel?t({},XS.collapsed?{bottom:tm.positionBottom,width:"52px",height:"52px"}:{},{display:"initial"}):{display:"none"})),e.setStyle(this.widgetStyle)}sendMerchantActivity(){let e="";const t=()=>{Ab.isAuthenticated()&users/update_merchant_activity",{merchantId:e})}(fr.merchantId),e=Ab.token.toString())};Ab.addListener(AuthToken.EventTypes.LOGIN,t),tm.addChangeListener(t),t()}static initializeTheme(){super.initializeTheme(),Theme.setProperties({BUTTON_PRIMARY_BORDER_WIDTH:0,BUTTON_SECONDARY_COLOR:e=>e.WHITE,BUTTON_SECONDARY_BACKGROUND:"#086472",BUTTON_SECONDARY_BORDER_WIDTH:0,TOAST_SHADOW:"0 2px 4px 0 rgba(63,63,63,.37)",RADIO_COLOR:e=>e.WALLET_2,LINK_COLOR:"rgb(0, 195, 235)",DIVIDER_LINE_COLOR:"#064049"}),Theme.Global.register(Xb,$b)}static initializeGlobalStyle(){tH.initialize()}getRoutes(){return new Route([],null,[new TerminalRoute([],iU,[],"")])}getContainer(){return dt.createElement("div",{style:{height:"100%"}},this.getRouter(),this.getStaticInvisibleElements(),ve()&&dt.createElement(YU,{testId:"modalCloseButton"}))}getStaticInvisibleElements(){const e=fr.getMerchant();return dt.createElement("div",{style:{opacity:"0",pointerEvents:"none",zIndex:-1,position:"absolute",top:-1e4,left:-1e4}},e?dt.createElement(Image,{src:e.wideLogoUrl}):null,dt.createElement("div",{style:{fontStyle:"italic"}},"a"),dt.createElement("div",{style:{fontWeight:"bold"}},"a"),dt.createElement("div",null,"a"))}initRouter(e){INFO,(()=>{Router.changeURL(Vy.INDEX_COLLAPSED)})),Router.useLocalHistory=!0,Router.localHistory=["/"+e],Router.prototype.setActive=function(e){if(this.activeChild===e)return;const t=this.activeChild;e&&this.activateChild(e),t&&this.deactivateChild(t),this.updateActiveChild(e)};let t=!0;Router.globalSetURL=function(e){const i=$(e),n=this.getPageToRender(i),r=this.getActive();if(r||this.setActive(n),r&&r!==n&&r.dispatch("urlExit"),n&&(t&&i[0]===Vy.INDEX_COLLAPSED&&(t=!1),this.setWidgetURL(e),Ab.isAuthenticated())){if(tm.activePanel)return;XS.collapsed?Object.assign(document.documentElement.style,{background:"transparent"}):Object.assign(document.documentElement.style,{background:tH.getInstance().themeProps.MERCHANT_SCRIM_BACKGROUND})}}}onMount(){super.onMount(),$S(E.widget),Jx.init(),FS.init(),mp.sendToSDK(hp.WIDGET_DATA_LOADED);let e=!1;tm.addChangeListener((()=>{tm.widgetVisible&&(!e&&tm.activePanel&&Router.changeURL(Vy.INDEX_COLLAPSED),e=tm.activePanel,this.redraw())})),Ab.onAuthenticationChange((()=>{Ab.isAuthenticated()&&(Qb.ensureUserDataRequested((()=>iU.instance.redraw())),XS.repositionWidget())}))}}const iH=new class IFrameAnalyticsService{init(e){this.client=new AnalyticsClient(e);let i=null;this.client.preprocessors.push((e=>{e.payload=t({},tm.getMetadata(),e.payload,{iFrameSelector:i})})),mp.addListener(hp.UPDATE_ANALYTICS_DATA_FROM_SDK,(e=>{let{environment:t,identity:n,iframeSelector:r}=e;null!=t&&(this.client.environment=t),null!=n&&(this.client.identity=n),null!=r&&(i=r)})),this.client.addListener("event",(e=>{mp.sendToSDK(hp.ANALYTICS_EVENT,{event:e})}))}},nH=["/payment_methods/add_payment_method","/payment_methods/dev_add_payment_method","/payments/purchase_product","/user_addresses/create","/donations/donate","/subscriptions/subscribe","/subscriptions/update_subscription","/payments/purchase_product","/external_providers/login_with_cds","/external_providers/subscribe_with_cds","/external_providers/donate_with_cds","/users/login","/users/update_newsletter_subscriptions","/users/request_email_login_code","/users/login_with_email_code","/users/give_merchant_consent","/users/request_email_change","/users/confirm_email_change","/socialauth/google","/socialauth/facebook","/socialauth/linkedin","/socialauth/github","/socialauth/twitter/connect","/socialauth/confirm_social_signup"];s&&!o||(self.STEM_DEBUG=!0,dt.Element.domAttributesMap.setAttribute("testId",{domName:"test-id"}));const rH=new class AutomationHelperClass{async authenticate(e){void 0===e&&(e={email:"",firstName:"",lastName:""});const i=t({},e,{withSignup:!0,secure:!1}),n=await Zy.requestLoginCode(i);return n.token?n:Zy.loginWithEmailCode("434343")}async addCard(e){const i=t({paymentProcessorId:br.findBy({isPublic:!0}).id},e);return Zt.post("/payment_methods/dev_add_payment_method",i)}async donate(e){const t=$u.all().find((t=>t.id===e.recurringOfferId));if(null!=e.preferredPaymentMethodId&&_f.paymentMethod.update({selectedValue:Nr.get(e.preferredPaymentMethodId)}),!t)throw new Error(`Donation offer with id ${e.recurringOfferId} not found.`);return _f.dont(e)}async cancelDonation(e){r(e){return Zt.post("/user_addresses/create",e)}async logout(){return Ab.logout()}};window.AutomationHelper=rH;const sH=new WeakSet;return window.onerror=function(e,t,i,n,r){var s,o;self.onerror=null,Ke=Ke||new AnalyticsClient("errorHandler"),null==(s=Ke)||s.enqueueEvent(Ye,{message:e,file:t,line:i,col:n,error:{message:null==r?void 0:r.message.slice(0,256),stack:null==r?void 0:r.stack.slice(0,6e3),timestamp:null==(o=self.event)?void 0:o.timestamp}})},window.UI=dt,e.CurrencySettingsStore=wu,e.CurrencyStore=jt,e.DonationOfferStore=$u,e.DonationStore=nh,e.LegalEntityStore=xh,e.MerchantPanelStore=Mn,e.MerchantSDKSettingsStore=hn,e.MerchantStore=Gi,e.MerchantUserJourneyStore=Bn,e.PaymentMethodStore=Nr,e.PaymentStore=os,e.RecurringPaymentStoreObject=xs,e.SubscriptionOfferStore=Wo,e.SubscriptionStore=Ac,e.TopUpPaymentStore=Xr,e.UserAddressStore=Au,e.UserPreferencesStore=as,e.UserProfileStore=Xc,e.WalletStore=kn,e.initIFrameApp=function(e){let{publicData:i,iframeParams:n,merchantId:r,merchantToken:s,appType:a}=e;mp.setAppType(a),Ab.setPublicData(i),tm.init(n),fr.init(r),My.init(s),iH.init(a===E.widget?"wallet":"panel"),Zt.ajaxHandler.addPreprocessor(((e,i)=>{let n=new URL(i instanceof Request?i.url:i).pathname;if(n.endsWith("/")&&"/"!==n&&(n=n.slice(0,-1)),nH.indexOf(n)>=0){var r,s;const i=null!=(r=null==(s=Ke)?void 0:s.environment)?r:{};e.data=e.data||{},e.data.merchantId=fr.merchantId,e.data.metadata=t({},i,tm.getMetadata(),e.data.metadata),delete e.data.metadata.journeys,i.journeys&&(e.data.activeJourneys=i.journeys)}})),o&&!window.Bundle&&a===E.widget&&(window.Bundle={AutomationHelper:rH}),At="DD MMM YYYY";const l=()=>{const e=a===E.panel?PanelApp:WidgetApp;!function(){let e=!1;mp.addIframesListener(hp.UPDATE_GLOBAL_STATE,(t=>{let{event:i,userId:n}=t;Ee.userId=n,sH.add(i),"clear"===i.type?(e=!0,gt.getStore(i.objectType).clear(),e=!1):gt.applyEvent(i)}));for(const t of gt.stores.values())t.addChangeListener(((i,n)=>{if(null==n){if(e)return;n={type:"clear",objectType:t.objectType}}sH.has(n)||mp.sendToIFrames(hp.UPDATE_GLOBAL_STATE,{event:n,userId:Ee.userId})}))}(),e.init()},c=()=>{Ee.appType=a,Ab.isAuthenticated()?Qb.ensureUserDataRequested(l):l()},u=()=>tm.panelType!==A.payment||tm.iframeParams.paymentDetails;if(u())c();else{const e=tm.addChangeListener((()=>{u()&&(e.remove(),c())}))}},e};
//# sourceMappingURL=index-iframe-prod-5b692f.js.map
