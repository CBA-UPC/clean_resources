!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("SmartSearch",[],(function(){return n()})):"object"==typeof exports?exports.SmartSearch=n():t.SmartSearch=n().SmartSearch}(this,(function(){return [function(t,n,e){!function(t){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var n=unction r(){}var i=Array.isArray||function o(t){return t&&t._isObservable}ction c(t,n){for(var e,r=[],i=0;i<n.length;i++)t(e=n[i])&&r.push(e);return r} l=Array.prototype.indexOf?function(t,n){return t.indexOf(n)}:unction d(t,n){for(var e,r=[],i=0;i<n.length;i++)e=n[i],r.push(t(e));return r}nction m(t){return"function"==typeof t?t:function(n){return t}}var g={indexOf:l,indexWhere:head:p,always:negate:empty:function(t){return 0===t.length},tail:y,filter:c,map:d,each:toArray:_,contains:a,id:function(t){return t},last:function(t){return t[t.length-1]},all:u,any:s,without:function(t,n){return c((,n)},remove:function(t,n){var e=l(n,t);if(e>=0)return n.splice(e,1)},fold:h,flatMap:function(t,n){return h(n,[],()},bind:isFunction:v,toFunction:m,toString:function t(n){var e={}.hasOwnProperty;try{if(w++,null==n)return"undefined";if(v(n))return"function";if(i(n))return w>5?"[..]":"["+d(t,n).toString()+"]";if(null!=(null!=n?n.toString:void 0)&&n.toString!==Object.prototype.toString)return n.toString();if("object"==typeof n){if(w>5)return"{..}";var r=[];for(var o in n)if(e.call(n,o)){var u=);r.push(t(o)+":"+t(u))}return"{"+r+"}"}return n}finally{w--}}},w=0,b=void 0,S="<no-more>";function E(t,n){if(!n)throw new Error(t)}function P(t){return E("not a function : "+t,g.isFunction(t))}function I(t){return E("no arguments supported",0===t.length)}var O={scheduler:{setTimeout:function(t,n){return setTimeout(t,n)},setInterval:function(t,n){return setInterval(t,n)},clearInterval:function(t){return clearInterval(t)},clearTimeout:function(t){return clearTimeout(t)},now:},D=void 0,x=[],M={},z=[],A=0,k={},T=!1;function C(t){t<=A||(z[t-1]||(z[t-1]=[[],0]),A=t)}function L(t,n){if(!D&&!T)return n();C(1);for(var e=0;e<A-1&&!j(t,z[e][0]);)e++;z[e][0].push([t,n]),D||q()}function j(t,n){for(var e=0;e<n.length;e++)if(n[e][0].id==t.id)return!0;return!1}function q(){var t=A;if(t){var n=!T;T=!0;try{for(;A>=t;){var e=z[A-1];if(!e)throw new Error("Unexpected stack top: "+e);var r=e[0],i=e[1];if(!(i<r.length)){e[0]=[],e[1]=0;break}var o=r[i][1];e[1]++,C(A+1);var u=!1;try{for(o(),u=!0;A>t&&0==z[A-1][0].length;)A--}finally{u||(z=[],A=0)}}}finally{n&&(T=!1)}}}function B(t,n){if(D){var e=M[t.id];return void 0===e?(e=M[t.id]=[n],x.push(t)):e.push(n)}return n()}function N(t,n){var e=x[t],r=e.id,i=M[r];x.splice(t,1),delete M[r],n&&x.length>0&&function t(n){if(!k[n.id]){for(var e,r=n.internalDeps(),i=0;i<r.length;i++)e=r[i],t(e),M[e.id]&&N(g.indexOf(x,e),!1);k[n.id]=!0}}(e);for(var o=0;o<i.length;o++)(0,i[o])()}var U={toString:function(){return g.toString({rootEvent:D,processingAfters:T,waiterObs:x,waiters:M,aftersStack:z,aftersStackHeight:A,flushed:k})},whenDoneWith:B,hasWaiters:inTransaction:function(t,n,e,r){if(D)return e.apply(n,r);D=t;try{var i=e.apply(n,r);!function(){for(;x.length>0;)N(0,!0);k={}}()}finally{D=void 0,q()}return i},currentEventId:wrappedSubscribe:function(t,n,e){P(e);var r=!1,i=!1,o=u=return o=n((function(n){return L(t,(function(){r||e(n)===S&&u()})),b})),i&&o(),u},afterTransaction:L,soonButNotYet:function(t,n){D?B(t,n):O.scheduler.setTimeout(n,0)},isInTransaction:,R=function(){function t(t,n,e){void 0===e&&(e=[]),this._isDesc=!0,this.context=t,this.method=n,this.args=e}return t.prototype.deps=function(){return this.cachedDeps||(this.cachedDeps=F([this.context].concat(this.args))),this.cachedDeps},t.prototype.toString=function(){var t=g.map(g.toString,this.args);return g.toString(this.context)+"."+g.toString(this.method)+"("+t+")"},t}();function W(t,n){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];var i=t||n;return i&&i._isDesc?t||n:new R(t,n,e)}function F(t){return i(t)?g.flatMap(F,t):o(t)?[t]:(null!=t?t._isSource:void 0)?[t.obs]:[]}var V=function(){return b},K=function(){return b};function H(t,n,e){return e.transform(function(t,n){var e=t;return function(t,r){var i=n(e,t),o=i[0],u=i[1];e=o;for(var s=b,a=0;a<u.length;a++)if((s=r(u[a]))===S)return s;return s}}(t,n),new R(e,"withStateMachine",[t,n]))}var Y=function(){eturn t.prototype.getOrElse=t.prototype.get=function(){return this.value},t.prototype.filter=function(n){return n(this.value)?new t(this.value):Q},t.prototype.map=t.prototype.forEach=t.prototype.toArray=t.prototype.inspect=t.prototype.toString=function(){return this.inspect()},t}(),Q={_isNone:!0,getOrElse:function(t){return t},get:filter:function(){return Q},map:function(){return Q},forEach:function(){},isDefined:!1,toArray:inspect:function(){return"None"},toString:function(){return this.inspect()}};unction G(t){return t&&(t._isSome||t._isNone)?t:new Y(t)}var X=0,$=function(){function t(){this.id=++X,this.isEvent=!0,this._isEvent=!0,this.isEnd=!1,this.isInitial=!1,this.isNext=!1,this.isError=!1,this.hasValue=!1}return t.prototype.filter=function(t){return!0},t.prototype.inspect=function(){return this.toString()},t.prototype.log=function(){return this.toString()},t.prototype.toNext=function(){return this},t}(),Z=function(t){function n(n){var e=t.call(this)||this;if(e.hasValue=!0,n instanceof $)throw new it("Wrapping an event inside other event");return e.value=n,e}return e(n,t),n.prototype.fmap=function(t){return this.apply(t(this.value))},n.prototype.filter=n.prototype.toString=n.prototype.log=function(){return this.value},n}($),tt=function(t){function n(n){var e=t.call(this,n)||this;return e.isNext=!0,e._isNext=!0,e}return e(n,t),n.prototype.apply=function(t){return new n(t)},n}(Z),nt=function(t){eturn e(n,t),n.prototype.apply=function(t){return new n(t)},n.prototype.toNext=n}(Z),et=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.hasValue=!1,n}return e(n,t),n.prototype.fmap=n}($),rt=function(t){eturn e(n,t),n.prototype.toString=function(){return"<end>"},n}(et),it=function(t){function n(n){var e=t.call(this)||this;return e.isError=!0,e.error=n,e}return e(n,t),n.prototype.toString=n}(et);function ot(t){return new nt(t)}nction at(t){return t&&t._isEvent?t:ut(t)}function ct(t){return t&&t._isEvent}unction ht(t){return t.isError}function pt(t){return t.hasValue}nction dt(t,n,e){return n.transform(yt(t),e||new R(n,"take",[t]))}function yt(t){return function(n,e){return n.hasValue?--t>0?e(n):(0===t&&e(n),e(st()),S):e(n)}}function _t(t,n){n.subscribe((function(n){return"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,t.concat([n.log()])),b}))}function mt(t){return function(n,e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log.apply(console,t.concat([n.log()])),e(n)}}function gt(t,n,e){var i,o=n,u=!1;return i=new Wn(new R(t,"scan",[n,e]),(function(n){var s=!1,a=r,c=b,f=function(){return s||(s=u=!0,(c=n(new nt(o)))===S&&(a(),a=r)),c};return a=t.subscribeInternal((function(t){if(pt(t)){if(u&&t.isInitial)return b;t.isInitial||f(),s=u=!0;var r=e(o,t.value);return o=r,n(t.apply(r))}return t.isEnd&&(c=f()),c!==S?n(t):c})),U.whenDoneWith(i,f),a}))}var wt=function(){function t(t){void 0===t&&(t=[]),this.unsubscribed=!1,this.unsubscribe=g.bind(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[];for(var n,e=0;e<t.length;e++)n=t[e],this.add(n)}return t.prototype.add=function(t){var n=this;if(!this.unsubscribed){var e=!1,i=r;this.starting.push(t),i=t(this.unsubscribe,(function(){n.unsubscribed||(e=!0,n.remove(i),g.remove(t,n.starting))})),this.unsubscribed||e?i():this.subscriptions.push(i),g.remove(t,this.starting)}},t.prototype.remove=function(t){if(!this.unsubscribed)return void 0!==g.remove(t,this.subscriptions)?t():void 0},t.prototype.unsubscribe=function(){if(!this.unsubscribed){this.unsubscribed=!0;for(var t=this.subscriptions,n=0;n<t.length;n++)t[n]();this.subscriptions=[],this.starting=[]}},t.prototype.count=function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},t.prototype.empty=t}();function bt(t,n){return function(e){var i=!1,o=!1,u=r,s=b,a=function(){if(!i)return t.forEach((function(t){if(i=!0,(s=e(new nt(t)))===S)return u(),u=r,r}))};return u=n((function(n){return n instanceof Z?n.isInitial&&!o?(t=new Y(n.value),b):(n.isInitial||a(),i=!0,t=new Y(n.value),e(n)):(n.isEnd&&(s=a()),s!==S?e(n):s)})),o=!0,a(),u}}function St(t,n){return P(n),new Wn(t,bt(J(),n))}function Et(t){var n=new Kn(new R("Bacon","once",[t]),(function(e){return U.soonButNotYet(n,(),r}));return n}function Pt(t,n,e){void 0===e&&(e={});var r=n,i=[r],o=[],u=n._isProperty,s=!1,a=(u?St:Yn)(e.desc||new R(n,"flatMap_",[t]),(function(n){var i=new wt,a=[];function c(e){if(u&&e.isInitial){if(s)return b;s=!0}var r=Ot(t(e));return o.push(r),i.add((function(t,e){return r.subscribeInternal((function(i){if(i.isEnd)return g.remove(r,o),),f(e),S;i=i.toNext();var u=n(i);return u===S&&t(),u}))}))}function f(t){return t(),i.empty()?n(st()):b}return i.add((function(t,o){return r.subscribeInternal((function(t){return t.isEnd?f(o):t.isError&&!e.mapError?n(t):e.firstOnly&&i.count()>1?b:i.unsubscribed?S:(e.limit&&i.count()>e.limit?a.push(t):c(t),b)}))})),i.unsubscribe}));return a.internalDeps=function(){return o.length?i.concat(o):i},a}function It(t){return"function"==typeof t?function(n){return pt(n)?t(n.value):n}:function(n){return t}}function Ot(t){return o(t)?t:Et(t)}function Dt(t,n){return Pt(n,t,{mapError:!0,desc:new R(t,"flatMapEvent",[n])})}var xt=function(){eturn t.prototype.subscribe=function(t){return this.obs.subscribeInternal(t)},t.prototype.toString=function(){return this.obs.toString()},t.prototype.markEnded=t.prototype.mayHave=function(t){return!0},t}(),Mt=function(t){eturn e(n,t),n.prototype.consume=function(){return this.value},n.prototype.push=function(t){this.value=t},n.prototype.hasAtLeast=n}(xt),zt=function(t){function n(n,e){var r=t.call(this,n,e)||this;return r.flatten=!1,r.queue=[],r}return e(n,t),n.prototype.consume=function(){return this.queue.shift()},n.prototype.push=n.prototype.mayHave=function(t){return!this.ended||this.queue.length>=t},n.prototype.hasAtLeast=n}(xt),At=function(t){function n(n){var e=t.call(this,n,!0)||this;return e.queue=[],e}return e(n,t),n.prototype.consume=function(){var t=this.queue;return this.queue=[],{value:t}},n.prototype.push=n.prototype.hasAtLeast=function(t){return!0},n}(xt);function kt(t){return null!=t&&(t._isSource?t.sync:t._isEventStream)}function Tt(t){return null!=t&&t._isSource?t:null!=t&&t._isProperty?new Mt(t,!1):new zt(t,!0)}function Ct(){return new Kn(W("Bacon","never"),()}function Lt(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return qt(Hn,t)}function jt(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return qt(St,t)}function qt(t,n){if(0===n.length)return Ct();var e=function(t){for(var n=[],e=[],r=0;r<t.length;r++){for(var i,o=t[r],u=o[0],s={f:o[1],ixs:[]},a=!1,c=0;c<u.length;c++){i=u[c];var f=l(n,i);a||(a=kt(i)),f<0&&(n.push(i),f=n.length-1);for(var h=0;h<s.ixs.length;h++){var p=s.ixs[h];p.index===f&&p.count++}s.ixs.push({index:f,count:1})}if(u.length>0&&!a)throw new Error("At least one EventStream required, none found in "+u);u.length>0&&e.push(s)}return[d(Tt,n),e]}(Rt(n)),r=e[0],i=e[1];if(!r.length)return Ct();var o,f,h=s(r,(function(t){return t.flatten}))&&(o=d((function(t){return t.obs}),r),void 0===f&&(f=[]),s(o,(function t(n){if(a(f,n))return!0;var e=n.internalDeps();return e.length?(f.push(n),s(e,t)):(f.push(n),!1)}))),p=t(new R("Bacon","when",Array.prototype.slice.call(n)),(function(t){var n=[],e=!1;function o(t){for(var n=0;n<t.ixs.length;n++){var e=t.ixs[n];if(!r[e.index].hasAtLeast(e.count))return!1}return!0}function s(t){for(var n=0;n<t.ixs.length;n++){var e=t.ixs[n];if(!r[e.index].mayHave(e.count))return!0}return!1}eturn new wt(d((function(f){return function(l){unction d(){var f=function e(){var u;if(void 0!==(u=n.pop()))for(var s,f=b,h=0;h<i.length;h++)if(o(s=i[h])){for(var p=[],l=0;l<s.ixs.length;l++){var v=r[s.ixs[l].index].consume();if(!v)throw new Error("Event was undefined");p.push(v.value)}var d=s.f.apply(null,p);return f=t(u.e.apply(d)),n.length&&(n=c(a,n)),f===S?f:e()}return b}();e&&(u(r,Wt)||u(i,s))&&(f=S,t(st())),f===S&&l()}return f.subscribe((function(r){var i=b;if(r.isEnd)e=!0,f.markEnded(),v();else if(r.isError)i=t(r);else{var o=r;f.push(o),f.sync&&(n.push({source:f,e:o}),h||U.hasWaiters()?v():d())}return i===S&&l(),i}))}}),r)).unsubscribe}));return p}function Bt(t){for(var n=0,e=t.length,r=[];n<e;){var i=_(t[n++]),o=m(t[n++]);r.push([i,o])}return E("when: expecting arguments in the form (Observable+,function)+",e%2==0),r}function Nt(t){return t instanceof Array&&!o(t[t.length-1])}function Ut(t){return t[0]instanceof Array}function Rt(t){for(var n=[],e=0;e<t.length;e++){var r=t[e];if(!Nt(r))return Bt(t);if(Ut(r))n.push([r[0],m(r[1])]);else{var i=r.slice(0,r.length-1),o=m(r[r.length-1]);n.push([i,o])}}return n}function Wt(t){return!t.sync||t.ended}function Ft(t,n,e){return Lt([new Mt(n.toProperty(),!1),new Mt(t,!0),f(e)]).withDesc(new R(t,"withLatestFrom",[n,e]))}function Vt(t,n,e){return jt([new Mt(n.toProperty(),!1),new Mt(t,!0),f(e)]).withDesc(new R(t,"withLatestFrom",[n,e]))}function Kt(t,n,e){if(t instanceof Wn)return Vt(t,n,e);if(t instanceof Kn)return Ft(t,n,e);throw new Error("Unknown observable: "+t)}function Ht(t,n){return n instanceof Wn?Kt(t,n,(function(t,n){return n})):t.transform(Yt(n),new R(t,"map",[n]))}function Yt(t){var n=g.toFunction(t);return function Qt(t){return new Wn(new R("Bacon","constant",[t]),(function(n){return n(ot(t)),n(st()),r}))}function Jt(t){return t=Array.prototype.slice.call(t),g.flatMap(Gt,t)}function Gt(t){return o(t)?[t]:i(t)?Jt(t):[Qt(t)]}function Xt(t){return g.isFunction(t[0])?[Jt(Array.prototype.slice.call(t,1)),t[0]]:[Jt(Array.prototype.slice.call(t,0,t.length-1)),g.last(t)]}function $t(t,n){return qt((function(t,e){return new Kn(t,e,void 0,n)}),[g.map((function(t){return new At(t)}),t),function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t}]).withDesc(new R("Bacon","groupSimultaneous",t))}function Zt(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if((t=Jt(t)).length){for(var e=[],r=0;r<t.length;r++){var i=o(t[r])?t[r]:Qt(t[r]);e.push(nn(i))}return jt([e,function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t}]).withDesc(new R("Bacon","combineAsArray",t))}return Qt([])}function tn(t,n,e){return jt([[nn(t),nn(n)],e]).withDesc(new R(t,"combine",[n,e]))}unction en(t,n){return Pt(It(n),t,{desc:new R(t,"flatMapConcat",[n]),limit:1})}function rn(t,n){void 0===n&&(n=g.id);var e=new R("Bacon","fromBinder",[t,n]);return new Kn(e,(function(e){var r=!1,o=!1,u=function(){if(!r)return null!=s?(s(),r=!0):o=!0},s=t((function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var o=n.apply(void 0,t),s=i(o)&&ct(g.last(o))?o:[o],a=b,c=0;c<s.length;c++){var f=at(s[c]);if((a=e(f))===S||f.isEnd)return u(),a}return a}));return o&&u(),u}))}function on(t,n){var e=new R("Bacon","fromPoll",[t,n]);return rn((function(n){var e=O.scheduler.setInterval(n,t);return function(){return O.scheduler.clearInterval(e)}}),n).withDesc(e)}function un(t,n){return on(t,(function(){return ut(n)})).withDesc(new R("Bacon","interval",[t,n]))}function sn(t,n,e){return t instanceof Kn?function(t,n,e){return an(t.toProperty(),n,e).withDesc(new R(t,"sampledBy",[n]))}(t,n,e):an(t,n,e)}function an(t,n,e){return Kt(n,t,f(e))).withDesc(new R(t,"sampledBy",[n]))}function cn(t,n){return an(t,un(n,{}),(function(t,n){return t})).withDesc(new R(t,"sample",[n]))}function fn(t,n,e){return new Wn(new R(t,"transform",[n]),(function(e){return t.subscribeInternal((function(t){return n(t,e)}))})).withDesc(e)}function hn(t,n,e){return new Kn(new R(t,"transform",[n]),(function(e){return t.subscribeInternal((function(t){return n(t,e)}))}),void 0,Vn).withDesc(e)}function pn(t,n){var e,r=function(t){return n(t,e)};return function(n,i){return e=i,t(n,r)}}function ln(t,n,e,r){return n instanceof Wn?Kt(t,n,().transform(pn(e((function(t){return t[1]})),Yt((function(t){return t[0]}))),r):t.transform(e(function(t){if("boolean"==typeof t)return g.always(t);if("function"!=typeof t)throw new Error("Not a function: "+t);return t}(n)),r)}function vn(t){return function dn(t){return t.map(().withDesc(new R(t,"not",[]))}function yn(t){return Fn(t)?t:Qt(t)}function _n(t,n){return Pt(It(n),t,{firstOnly:!0,desc:new R(t,"flatMapFirst",[n])})}function mn(t,n,e){return new Kn(new R(t,"concat",[n]),(function(e){var i=r,o=t.dispatcher.subscribe((function(t){return t.isEnd?(i=n.toEventStream().dispatcher.subscribe(e),b):e(t)}));return ),void 0,e)}function gn(t,n,e){return t.scan(n,e).last().withDesc(new R(t,"fold",[n,e]))}var wn={};function bn(t,n){return Pt(It(n),t,{desc:new R(t,"flatMap",[n])})}function Sn(t,n){return Pt((function(t){if(t instanceof it){var e=t.error;return n(e)}return t}),t,{mapError:!0,desc:new R(t,"flatMapError",[n])})}var En=[],Pn=!1;function In(t){if(En.length&&!Pn)try{Pn=!0,En.forEach((function(n){n(t)}))}finally{Pn=!1}}function On(t,n){var e=g.toFunction(n),r=Fn(t)?t.toEventStream(Vn):t,i=bn(r,();return Fn(t)&&(i=i.toProperty()),i.withDesc(new R(t,"flatMapLatest",[e]))}var Dn=function(){function t(t,n,e){this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0,this._subscribe=n,this._handleEvent=e,this.subscribe=g.bind(this.subscribe,this),this.handleEvent=g.bind(this.handleEvent,this),this.subscriptions=[],this.observable=t,this.queue=[]}return t.prototype.hasSubscribers=t.prototype.removeSub=t.prototype.push=function(t){return t.isEnd&&(this.ended=!0),U.inTransaction(t,this,this.pushIt,[t])},t.prototype.pushToSubscriptions=function(t){try{for(var n=this.subscriptions,e=n.length,r=0;r<e;r++){var i=n[r];(i.sink(t)===S||t.isEnd)&&this.removeSub(i)}return!0}catch(t){throw this.pushing=!1,this.queue=[],t}},t.prototype.pushIt=function(t){if(this.pushing)return this.queue.push(t),b;if(t!==this.prevError){for(t.isError&&(this.prevError=t),this.pushing=!0,this.pushToSubscriptions(t),this.pushing=!1;;){var n=this.queue.shift();if(!n)break;this.push(n)}return this.hasSubscribers()?b:(this.unsubscribeFromSource(),S)}},t.prototype.handleEvent=t.prototype.unsubscribeFromSource=t.prototype.subscribe=function(t){var n=this;if(this.ended)return t(st()),r;P(t);var e={sink:t};return this.subscriptions.push(e),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent),P(this.unsubSrc)),function(){if(n.removeSub(e),!n.hasSubscribers())return n.unsubscribeFromSource()}},t.prototype.inspect=function(){return this.observable.toString()},t}(),xn=function(t){function n(n,e,r){var i=t.call(this,n,e,r)||this;return i.current=J(),i.propertyEnded=!1,i.subscribe=g.bind(i.subscribe,i),i}return e(n,t),n.prototype.push=function(n){return n.isEnd&&(this.propertyEnded=!0),n instanceof Z?(this.current=new Y(n),this.currentValueRootId=U.currentEventId()):n.hasValue&&console.error("Unknown event, two Bacons loaded?",n.constructor),t.prototype.push.call(this,n)},n.prototype.maybeSubSource=function(n,e){return e===S?r:this.propertyEnded?(n(st()),r):t.prototype.subscribe.call(this,n)},n.prototype.subscribe=function(t){var n=this,e=b;if(this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)){var r=U.currentEventId(),i=this.currentValueRootId;return!this.propertyEnded&&i&&r&&r!==i?(U.whenDoneWith(this.observable,(function(){if(n.currentValueRootId===i)return t(ot(n.current.get().value))})),this.maybeSubSource(t,e)):(U.inTransaction(void 0,this,(function(){return e=t(ot(n.current.get().value))}),[]),this.maybeSubSource(t,e))}return this.maybeSubSource(t,e)},n.prototype.inspect=n}(Dn);function Mn(t,n,e){return Pt(It(e),t,{desc:new R(t,"flatMapWithConcurrencyLimit",[n,e]),limit:n})}function zn(t,n,e){var i=function(t){if(void 0!==t){if("number"==typeof t){var n=t;return return t}}(n);function o(t){return t.values.length===e?t.flush():void 0!==i?t.schedule(i):void 0}var u=new R(t,"bufferWithTimeOrCount",[n,e]);return function(t,n,e){void 0===n&&(n=r),void 0===e&&(e=r);var i=b,o=new An(e,n);return t.transform((function(t,e){return o.push=e,pt(t)?(o.values.push(t.value),n(o)):ht(t)?i=e(t):lt(t)&&(o.end=t,o.scheduled||o.flush()),i})).withDesc(new R(t,"buffer",[]))}(t,o,o).withDesc(u)}var An=function(){function t(t,n){this.push=function(t){return b},this.scheduled=null,this.end=void 0,this.values=[],this.onFlush=t,this.onInput=n}return t.prototype.flush=function(){if(this.scheduled&&(O.scheduler.clearTimeout(this.scheduled),this.scheduled=null),this.values.length>0){var t=this.values;this.values=[];var n=this.push(ut(t));if(null!=this.end)return this.push(this.end);if(n!==S)return this.onFlush(this)}else if(null!=this.end)return this.push(this.end)},t.prototype.schedule=function(t){var n=this;if(!this.scheduled)return this.scheduled=t((function(){return n.flush()}))},t}();function kn(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=Jt(t);return e.length?new Kn(new R("Bacon","mergeAll",e),(function(t){var n=0,r=d((function(r){return function(i){return r.subscribeInternal((function(r){if(r.isEnd)return++n===e.length?t(st()):b;r=r.toNext();var o=t(r);return o===S&&i(),o}))}}),e);return new wt(r).unsubscribe})):Ct()}function Tn(t,n){return rn((function(e){var r=O.scheduler.setTimeout((,t);return )).withDesc(new R("Bacon","later",[t,n]))}function Cn(t){return function(n,e){return n.filter(t)?e(n):(e(st()),S)}}function Ln(t){var n=!1;return function(e,r){return!n&&pt(e)&&t(e.value)?b:(e.hasValue&&(n=!0),r(e))}}function jn(t,n,e){void 0===e&&(e=g.id);var r={};return t.transform(pn(vn((),Yt((function(i){var o=n(i),u=t.changes().filter((),s=Et(i).concat(u),a=e(s,i).toEventStream().transform((function(t,n){var e=n(t);return t.isEnd&&delete r[o],e}));return r[o]=a,a}))))}var qn={};function Bn(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];var r=Xt(arguments);return n=r[0],t=r[1],Lt([n=g.map((function(t){return t.toEventStream()}),n),t]).withDesc(new R("Bacon","zipWith",[t].concat(n)))}function Nn(t){function n(t,n,e){return(function(t){return t[t.length-1]}(t))[n]=e,e}unction r(t){if(o(t))return!0;if(t&&(t.constructor==Object||t.constructor==Array))for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&r(t[n]))return!0}function u(t,i){o(i)?(c.push(i),a.push(function(t,e){return (t,c.length-1))):r(i)?(a.push(function(t,r){return (t,i)),s(i),a.push(()):a.push(t,i))}ar a=[],c=[];return(r(t)?(s(t),Zt(c).map((function(n){for(var r=e(t),i=[r],o=0;o<a.length;o++)(0,a[o])(i,n);return r}))):Qt(t)).withDesc(new R("Bacon","combineTemplate",[t]))}var Un=0,Rn=function(){function t(t){this.id=++Un,this._isObservable=!0,this.desc=t,this.initialDesc=t}return t.prototype.awaiting=function(t){return function(t,n){return $t([t,n],Vn).map(().toProperty(!1).skipDuplicates().withDesc(new R(t,"awaiting",[n]))}(this,t)},t.prototype.bufferingThrottle=function(t){return function(t,n){var e=new R(t,"bufferingThrottle",[n]);return t.transformChanges(e,(function(t){return t.flatMapConcat((function(t){return Et(t).concat(Tn(n,t).errors())}))}))}(this,t)},t.prototype.combine=function(t,n){return tn(this,t,n)},t.prototype.debounce=function(t){return function(t,n){return t.transformChanges(new R(t,"debounce",[n]),(function(t){return t.flatMapLatest((function(t){return Tn(n,t)}))}))}(this,t)},t.prototype.debounceImmediate=function(t){return function(t,n){return t.transformChanges(new R(t,"debounceImmediate",[n]),(function(t){return t.flatMapFirst((function(t){return Et(t).concat(Tn(n,t).errors())}))}))}(this,t)},t.prototype.decode=function(t){return function(t,n){return t.combine(Nn(n),().withDesc(new R(t,"decode",[n]))}(this,t)},t.prototype.delay=function(t){return function(t,n){return t.transformChanges(new R(t,"delay",[n]),()}(this,t)},t.prototype.deps=function(){return this.desc.deps()},t.prototype.diff=function(t,n){return function(t,n,e){return fn(gt(t,[n,qn],(function(t,n){return[n,e(t[0],n)]})),pn(vn((),Yt(()),new R(t,"diff",[n,e]))}(this,t,n)},t.prototype.doAction=function(t){return this.transform(function(t){return function(n,e){return pt(n)&&t(n.value),e(n)}}(t),new R(this,"doAction",[t]))},t.prototype.doEnd=function(t){return this.transform(function(t){return function(n,e){return lt(n)&&t(),e(n)}}(t),new R(this,"doEnd",[t]))},t.prototype.doError=function(t){return this.transform(function(t){return function(n,e){return ht(n)&&t(n.error),e(n)}}(t),new R(this,"doError",[t]))},t.prototype.doLog=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.transform(mt(t),new R(this,"doLog",t))},t.prototype.endAsValue=function(){return this.transform((function(t,n){return lt(t)?(n(ut({})),n(st()),S):b}))},t.prototype.endOnError=function(t){return void 0===t&&(t=function(t){return!0}),function(t,n){return void 0===n&&(n=function(t){return!0}),t.transform((function(t,e){return ht(t)&&n(t.error)?(e(t),e(st())):e(t)}),new R(t,"endOnError",[]))}(this,t)},t.prototype.errors=function(){return this.filter(().withDesc(new R(this,"errors"))},t.prototype.filter=function(t){return function(t,n){return ln(t,n,vn,new R(t,"filter",[n]))}(this,t)},t.prototype.first=function(){return dt(1,this,new R(this,"first"))},t.prototype.firstToPromise=function(t){return function(t,n){if("function"!=typeof n){if("function"!=typeof Promise)throw new Error("There isn't default Promise, use shim or parameter");n=function(t){return new Promise(t)}}return new n((function(n,e){return t.subscribe((function(t){return pt(t)&&n(t.value),ht(t)&&e(t.error),S}))}))}(this,t)},t.prototype.fold=function(t,n){return gn(this,t,n)},t.prototype.forEach=function(t){return void 0===t&&(t=V),this.onValue(t)},t.prototype.holdWhen=function(t){return function(t,n){var e=!1,r=[],i=!1;return new Kn(new R(t,"holdWhen",[n]),(function(o){var u=new wt,s=!1,a=function(t){return t&&t(),u.empty()&&s?o(st()):b};return u.add((function(t,u){return n.subscribeInternal((function(t){if(pt(t)){e=t.value;var n=b;if(!e){var s=r;r=[];for(var c=0;c<s.length;c++)n=o(ut(s[c]));i&&(o(st()),u(),n=S)}return n}return t.isEnd?a(u):o(t)}))})),u.add((function(n,u){return t.subscribeInternal((function(t){return e&&pt(t)?(r.push(t.value),b):t.isEnd&&r.length?(i=!0,a(u)):o(t)}))})),s=!0,a(),u.unsubscribe}))}(this,t)},t.prototype.inspect=function(){return this.toString()},t.prototype.internalDeps=function(){return this.initialDesc.deps()},t.prototype.last=function(){return(t=this).transform((function(t,e){return lt(t)?(n&&e(n),e(st()),S):pt(t)?(n=t,b):e(t)})).withDesc(new R(t,"last",[]));var t,n},t.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return _t(t,this),this},t.prototype.mapEnd=function(t){return this.transform(function(t){var n=g.toFunction(t);return function(t,e){return lt(t)?(e(ut(n(t))),e(st()),S):e(t)}}(t),new R(this,"mapEnd",[t]))},t.prototype.mapError=function(t){return this.transform(function(t){var n=g.toFunction(t);return function(t,e){return ht(t)?e(ut(n(t.error))):e(t)}}(t),new R(this,"mapError",[t]))},t.prototype.name=function(t){return this._name=t,this},t.prototype.onEnd=function(t){return void 0===t&&(t=K),this.subscribe((function(n){return n.isEnd?t():b}))},t.prototype.onError=function(t){return void 0===t&&(t=V),this.subscribe((function(n){return ht(n)?t(n.error):b}))},t.prototype.onValue=function(t){return void 0===t&&(t=V),this.subscribe(()},t.prototype.onValues=function(t){return this.onValue((function(n){return t.apply(void 0,n)}))},t.prototype.reduce=function(t,n){return gn(this,t,n)},t.prototype.sampledBy=t.prototype.scan=function(t,n){return gt(this,t,n)},t.prototype.skip=function(t){return function(t,n){return t.transform((function(t,e){return t.hasValue&&n>0?(n--,b):e(t)}),new R(t,"skip",[n]))}(this,t)},t.prototype.skipDuplicates=function(t){return function(t,n){void 0===n&&(n=vt);var e=new R(t,"skipDuplicates",[]);return H(J(),(function(t,e){return pt(e)?e.isInitial||null!=(r=t)&&r._isNone||!n(t.get(),e.value)?[new Y(e.value),[e]]:[t,[]]:[t,[e]];var r}),t).withDesc(e)}(this,t)},t.prototype.skipErrors=function(){return(t=this).transform((,new R(t,"skipErrors",[]));var t},t.prototype.skipUntil=function(t){return function(t,n){var e=n.transform(pn(yt(1),Yt(!0))).toProperty().startWith(!1);return t.filter(e).withDesc(new R(t,"skipUntil",[n]))}(this,t)},t.prototype.skipWhile=function(t){return function(t,n){return ln(t,n,Ln,new R(t,"skipWhile",[n]))}(this,t)},t.prototype.slidingWindow=function(t,n){return void 0===n&&(n=0),function(t,n,e){return void 0===e&&(e=0),t.scan([],(function(t,e){return t.concat([e]).slice(-n)})).filter(().withDesc(new R(t,"slidingWindow",[n,e]))}(this,t,n)},t.prototype.subscribe=function(t){var n=this;return void 0===t&&(t=V),U.wrappedSubscribe(this,(function(t){return n.subscribeInternal(t)}),t)},t.prototype.take=t.prototype.takeUntil=function(t){return function(t,n){var e=$t([t.mapEnd(wn),n.skipErrors()],Vn);return t instanceof Wn&&(e=e.toProperty()),e.transform((function(t,n){if(pt(t)){var e=t.value,r=e[0];if(e[1].length)return n(st());for(var i=b,o=0;o<r.length;o++){var u=r[o];if(u===wn)return n(st());i=n(ut(u))}return i}return n(t)}),new R(t,"takeUntil",[n]))}(this,t)},t.prototype.takeWhile=function(t){return function(t,n){return ln(t,n,Cn,new R(t,"takeWhile",[n]))}(this,t)},t.prototype.throttle=function(t){return function(t,n){return t.transformChanges(new R(t,"throttle",[n]),(function(t){return t.bufferWithTime(n).map(()}))}(this,t)},t.prototype.toPromise=function(t){return this,t)},t.prototype.toString=t.prototype.withDesc=t.prototype.withDescription=function(t,n){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];return this.desc=W.apply(void 0,[t,n].concat(e)),this},t.prototype.zip=function(t,n){return function(t,n,e){return Bn(e||Array,t,n).withDesc(new R(t,"zip",[n]))}(this,t,n)},t}(),Wn=function(t){function n(n,e,r){var i=t.call(this,n)||this;return i._isProperty=!0,P(e),i.dispatcher=new xn(i,e,r),In(i),i}return e(n,t),n.prototype.and=function(t){return e=t,(n=this).combine(yn(e),().withDesc(new R(n,"and",[e]));var n,e},n.prototype.changes=function(){var t=this;return new Kn(new R(this,"changes",[]),(function(n){return t.dispatcher.subscribe(()}))},n.prototype.concat=function(t){return this.transformChanges(W(this,"concat",t),(function(n){return n.concat(t)}))},n.prototype.transformChanges=function(t,n){return function(t,n,e){var r,i,o=n(new Kn(W(t,"changes",[]),(function(n){return t.dispatcher.subscribe((function(t){return!r&&ft(t)&&(r=t,U.whenDoneWith(u,(function(){if(!i)throw new Error("Init sequence fail");i(r)}))),t.isInitial?b:n(t)}))}),void 0,Vn)),u=St(e,(function(t){return i=t,o.dispatcher.subscribe((function(n){t(n)}))}));return u}(this,n,t)},n.prototype.flatMap=function(t){return bn(this,t)},n.prototype.flatMapConcat=function(t){return en(this,t)},n.prototype.flatMapError=function(t){return Sn(this,t)},n.prototype.flatMapEvent=function(t){return Dt(this,t)},n.prototype.flatMapFirst=function(t){return _n(this,t)},n.prototype.flatMapLatest=function(t){return On(this,t)},n.prototype.flatMapWithConcurrencyLimit=function(t,n){return Mn(this,t,n)},n.prototype.groupBy=function(t,n){return jn(this,t,n)},n.prototype.map=function(t){return Ht(this,t)},n.prototype.not=function(){return dn(this)},n.prototype.or=function(t){return e=t,(n=this).combine(yn(e),().withDesc(new R(n,"or",[e]));var n,e},n.prototype.sample=function(t){return cn(this,t)},n.prototype.startWith=function(t){return function(t,n){return t.scan(n,().withDesc(new R(t,"startWith",[n]))}(this,t)},n.prototype.subscribeInternal=function(t){return void 0===t&&(t=V),this.dispatcher.subscribe(t)},n.prototype.toEventStream=function(t){var n=this;return new Kn(new R(this,"toEventStream",[]),(function(t){return n.subscribeInternal(()}),void 0,t)},n.prototype.toProperty=n.prototype.transform=function(t,n){return fn(this,t,n)},n.prototype.withLatestFrom=function(t,n){return Vt(this,t,n)},n.prototype.withStateMachine=function(t,n){return H(t,n,this)},n}(Rn);ar Vn={forceAsync:!1},Kn=function(t){function n(n,e,r,i){var o=t.call(this,n)||this;return o._isEventStream=!0,i!==Vn&&(e=function(t,n){var e=!1;return function(r){var i,o=U.isInTransaction();function u(){var t=i||[];i=void 0;for(var n=0;n<t.length;n++){var e=t[n];r(e)}}e=!0;try{return n((function(n){return e||i?(i?i.push(n):(i=[n],o?U.soonButNotYet(t,u):O.scheduler.setTimeout(u,0)),b):r(n)}))}finally{e=!1}}}(o,e)),o.dispatcher=new Dn(o,e,r),In(o),o}return e(n,t),n.prototype.bufferWithTime=function(t){return function(t,n){return zn(t,n,Number.MAX_VALUE).withDesc(new R(t,"bufferWithTime",[n]))}(this,t)},n.prototype.bufferWithCount=function(t){return function(t,n){return zn(t,void 0,n).withDesc(new R(t,"bufferWithCount",[n]))}(this,t)},n.prototype.bufferWithTimeOrCount=function(t,n){return zn(this,t,n)},n.prototype.changes=function(){return this},n.prototype.concat=function(t,n){return mn(this,t,n)},n.prototype.transformChanges=function(t,n){return n(this).withDesc(t)},n.prototype.flatMap=function(t){return bn(this,t)},n.prototype.flatMapConcat=function(t){return en(this,t)},n.prototype.flatMapError=function(t){return Sn(this,t)},n.prototype.flatMapFirst=function(t){return _n(this,t)},n.prototype.flatMapLatest=function(t){return On(this,t)},n.prototype.flatMapWithConcurrencyLimit=function(t,n){return Mn(this,t,n)},n.prototype.flatMapEvent=function(t){return Dt(this,t)},n.prototype.flatScan=function(t,n){return function(t,n,e){var r=n;return t.flatMapConcat((function(t){return Ot(e(r,t)).doAction(()})).toProperty().startWith(n).withDesc(new R(t,"flatScan",[n,e]))}(this,t,n)},n.prototype.groupBy=function(t,n){return jn(this,t,n)},n.prototype.map=n.prototype.merge=function(t){return function(t){if(!(null!=t?t._isEventStream:void 0))throw new Error("not an EventStream : "+t)}(t),kn(this,t).withDesc(new R(this,"merge",[t]))},n.prototype.not=n.prototype.startWith=function(t){return function(t,n){return Et(n).concat(t).withDesc(new R(t,"startWith",[n]))}(this,t)},n.prototype.subscribeInternal=n.prototype.toEventStream=function(){return this},n.prototype.toProperty=function(t){var n=arguments.length?G(t):J(),e=this.dispatcher,r=new R(this,"toProperty",Array.prototype.slice.apply(arguments)),i=e.subscribe;return new Wn(r,bt(n,i))},n.prototype.transform=function(t,n){return hn(this,t,n)},n.prototype.withLatestFrom=function(t,n){return Ft(this,t,n)},n.prototype.withStateMachine=n}(Rn);unction Yn(t,n){return new Kn(t,n,void 0,Vn)}function Qn(t){return"undefined"!=typeof Symbol&&Symbol[t]?Symbol[t]:"undefined"!=typeof Symbol&&"function"==typeof Symbol.for?Symbol[t]=Symbol.for(t):"@@"+t}var Jn=function(){eturn t.prototype.subscribe=function(t,n,e){var r="function"==typeof t?{next:t,error:n,complete:e}:t,i={closed:!1,unsubscribe:,o=this.observable.subscribe((function(t){pt(t)&&r.next?r.next(t.value):ht(t)?(r.error&&r.error(t.error),i.unsubscribe()):t.isEnd&&(i.closed=!0,r.complete&&r.complete())}));return i},t}();function Gn(t){return function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return }Jn.prototype[Qn("observable")]=function(){return this},Rn.prototype.toESObservable=Rn.prototype[Qn("observable")]=Rn.prototype.toESObservable;var Xn=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"],["bind","unbind"]];function $n(t,n,e){var r=function(t){for(var n,e=0;e<Xn.length;e++){var r=[t[(n=Xn[e])[0]],t[n[1]]];if(r[0]&&r[1])return r}for(var i=0;i<Xn.length;i++){var o=t[(n=Xn[i])[0]];if(o)return[o,function(){}]}throw new Error("No suitable event methods in "+t)}(t),i=r[0],o=r[1],u=new R("Bacon","fromEvent",[t,n]);return rn((function(e){return r=n,g.isFunction(r)?(n(i.bind(t),e),:(i.call(t,n,e),function(){return o.call(t,n,e)});var r}),e).withDesc(u)}function Zn(t){var n=0;return rn((function(e){var r=!1,i=b,o=function(){};function u(t){return t.isEnd?(r?s():r=!0,b):i=e(t)}function s(){var s;for(r=!0;r&&i!==S;)s=t(n++),r=!1,s?o=s.subscribeInternal(u):e(st());r=!0}return s(),)).withDesc(new R("Bacon","repeat",[t]))}function te(t){return Tn(t,"").filter(!1).withDesc(new R("Bacon","silence",[t]))}function ne(t){return[at(t),st()]}function ee(t,n){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return t.apply(void 0,n.concat(e))}}var re,ie=(re=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return g.isFunction(t)?n.length?ee(t,n):t:g.always(t)},function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];if("object"==typeof t&&n.length){var r=t,i=n[0];t=n=n.slice(1)}return re.apply(void 0,[t].concat(n))});function oe(t,n){return ie.apply(void 0,[t].concat(n))}var ue=function(t){function n(){var n=t.call(this,new R("Bacon","Bus",[]),(function(t){return n.subscribeAll(t)}))||this;return n.pushing=!1,n.pushQueue=void 0,n.ended=!1,n.subscriptions=[],n.unsubAll=g.bind(n.unsubAll,n),n.subscriptions=[],n.ended=!1,n}return e(n,t),n.prototype.plug=function(t){var n=this;if(function(t){if(!(null!=t?t._isObservable:void 0))throw new Error("not an Observable : "+t)}(t),!this.ended){var e={input:t,unsub:void 0};return this.subscriptions.push(e),void 0!==this.sink&&this.subscribeInput(e),},n.prototype.end=function(){if(this.ended=!0,this.unsubAll(),"function"==typeof this.sink)return this.sink(st())},n.prototype.push=function(t){if(!this.ended&&"function"==typeof this.sink){var n=!this.pushing;if(!n)return this.pushQueue||(this.pushQueue=[]),void this.pushQueue.push(t);this.pushing=!0;try{return this.sink(ut(t))}finally{if(n&&this.pushQueue){for(var e=0;e<this.pushQueue.length;){var r=this.pushQueue[e];this.sink(ut(r)),e++}this.pushQueue=void 0}this.pushing=!1}}},n.prototype.error=function(t){if("function"==typeof this.sink)return this.sink(new it(t))},n.prototype.unsubAll=function(){for(var t,n=this.subscriptions,e=0;e<n.length;e++)"function"==typeof(t=n[e]).unsub&&t.unsub()},n.prototype.subscribeAll=function(t){if(this.ended)t(st());else{this.sink=t;for(var n,e=this.subscriptions.slice(),r=0;r<e.length;r++)n=e[r],this.subscribeInput(n)}return this.unsubAll},n.prototype.guardedSink=function(t){var n=this;return function(e){return e.isEnd?(n.unsubscribeInput(t),S):n.sink?n.sink(e):b}},n.prototype.subscribeInput=function(t){return t.unsub=t.input.subscribeInternal(this.guardedSink(t.input)),t.unsub},n.prototype.unsubscribeInput=function(t){for(var n,e=this.subscriptions,r=0;r<e.length;r++)if((n=e[r]).input===t)return"function"==typeof n.unsub&&n.unsub(),void this.subscriptions.splice(r,1)},n}(Kn),se={asEventStream:function(t,n,e){var r=this;return g.isFunction(n)&&(e=n,n=void 0),rn((function(e){return r.on(t,n,e),),e).withDesc(new R(this.selector||this,"asEventStream",[t]))},init:;t.$=se,t.Bus=ue,t.CompositeUnsubscribe=wt,t.Desc=R,t.End=rt,t.Error=it,t.Event=$,t.EventStream=Kn,t.Initial=nt,t.Next=tt,t.Observable=Rn,t.Property=Wn,t.Value=Z,t._=g,t.combine=tn,t.combineAsArray=Zt,t.combineTemplate=Nn,t.combineWith=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];var r=Xt(arguments),i=(n=r[0],t=r[1],new R("Bacon","combineWith",[t].concat(n)));return Zt(n).map(().withDesc(i)},t.concatAll=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=Jt(t);return(e.length?h(y(e),p(e).toEventStream(),():Ct()).withDesc(new R("Bacon","concatAll",e))},t.constant=Qt,t.fromArray=function(t){if(t),t.length){var n=0,e=new Kn(new R("Bacon","fromArray",[t]),(function(r){var i=!1,o=b,u=!1,s=!1;return U.soonButNotYet(e,(function a(){if(s=!0,!u){if(n===t.length)return r(st()),!1;for(u=!0;s;)if(s=!1,o!==S&&!i){var c=t[n++];(o=r(at(c)))!==S&&(n===t.length?r(st()):U.afterTransaction(e,a))}return u=!1}})),));return e}return Ct().withDesc(new R("Bacon","fromArray",t))},t.fromBinder=rn,t.fromCallback=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return rn((function(e){return oe(t,n)(e),r}),(function(t){return[t,st()]})).withDesc(new R("Bacon","fromCallback",[t].concat(n)))},t.fromESObservable=function(t){var n;n=t[Qn("observable")]?t[Qn("observable")]():t;var e=new R("Bacon","fromESObservable",[n]);return new Kn(e,(function(t){var e=n.subscribe({error:function(n){t(new it(n)),t(new rt)},next:complete:);return e.unsubscribe?e}))},t.fromEvent=$n,t.fromEventTarget=$n,t.fromNodeCallback=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return rn((function(e){return oe(t,n)(e),r}),(function(t,n){return t?[new it(t),st()]:[n,st()]})).withDesc(new R("Bacon","fromNodeCallback",[t].concat(n)))},t.fromPoll=on,t.fromPromise=function(t,n,e){return void 0===e&&(e=ne),rn((function(e){var r=t.then(e,();return r&&"function"==typeof r.done&&r.done(),n?function(){if("function"==typeof t.abort)return t.abort()}:),e).withDesc(new R("Bacon","fromPromise",[t]))},t.getScheduler=t.groupSimultaneous=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return $t(Jt(t))},t.hasValue=pt,t.interval=un,t.isEnd=lt,t.isError=ht,t.isEvent=ct,t.isInitial=ft,t.isNext=function(t){return t.isNext},t.later=Tn,t.mergeAll=kn,t.more=b,t.never=Ct,t.noMore=S,t.nullSink=V,t.nullVoidSink=K,t.onValues=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Zt(t.slice(0,t.length-1)).onValues(t[arguments.length-1])},t.once=Et,t.repeat=Zn,t.repeatedly=function(t,n){var e=0;return on(t,(function(){return n[e++%n.length]})).withDesc(new R("Bacon","repeatedly",[t,n]))},t.retry=function(t){if(!g.isFunction(t.source))throw new Error("'source' option has to be a function");var n=t.source,e=t.retries||0,r=0,i=t.delay||function(){return 0},o=t.isRetryable||u=!1,s=null;return Zn((function(t){function a(){return n(t).endOnError().transform((function(t,n){return ht(t)?o((s=t).error)&&(0===e||r<e)?b:(u=!0,n(t)):(pt(t)&&(s=null,u=!0),n(t))}))}if(!u){if(s){var c={error:s.error,retriesDone:r},f=te(i(c));return r++,f.concat(Et(null).flatMap(a))}return a()}})).withDesc(new R("Bacon","retry",[t]))},t.sequentially=function(t,n){var e=0;return on(t,(function(){var t=n[e++];return e<n.length?t:e===n.length?[at(t),st()]:st()})).withDesc(new R("Bacon","sequentially",[t,n]))},t.setScheduler=t.silence=te,t.spy=function(t){return En.push(t)},t.try=function(t){return function(n){try{return Et(t(n))}catch(t){return Et(new it(t))}}},t.update=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];for(var r=Rt(n),i=0;i<r.length;i++){var o=r[i];o[1]=Gn(o[1])}return Lt.apply(void 0,r).scan(t,().withDesc(new R("Bacon","update",[t].concat(n)))},t.version="3.0.12",t.when=Lt,t.zipAsArray=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=g.map((function(t){return t.toEventStream()}),Jt(t));return Lt([e,).withDesc(new R("Bacon","zipAsArray",t))},t.zipWith=Bn,Object.defineProperty(t,"__esModule",{value:!0})}(n)},function(t,n,e){"use strict";e.r(n);var r=function(){function t(t,n){this.result=t,this.highlights=n[t.id]}return t.prototype.render=t}(),i=o=u=function(){function t(t,n,e){var r=this;this.data=n,this.config=e,this._filterClient=t,this._name=e.baseName,this._type=n.name.split("_").pop(),this._counts=this.data.counts.map(()}return Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"counts",{get:function(){return this._counts},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filterClient",{get:function(){return this._filterClient},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayName",{get:function(){return this._displayName},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedValues",{get:function(){return this._selectedValues},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:enumerable:!0,configurable:!0}),t.prototype.getQueryParam=function(t){var n={};return n[this.getFilterParamName()]='"'+t+'"',n},t.prototype.getFilterParamName=t.prototype.getSelectedParameters=function(){var t,n=this;return(null===(t=this.selectedValues)||void 0===t?void 0:t.map((function(t){return n.getQueryParam(t)})))||[]},t.prototype.isValueAllowed=t.prototype.setSelectedValues=t.prototype.setDisplayName=t.prototype.reset=function(){var t=this.filterClient.parameterList.deleteAll(this.getFilterParamName());return this.filterClient.parameterList=t,this.setSelectedValues.apply(this,[]),this},t.prototype.customFilter=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return i(this,void 0,void 0,(function(){var e,r,i;return o(this,(function(o){switch(o.label){case 0:return this.filterClient.parameterList=(r=this.filterClient.parameterList).addOrUpdate.apply(r,n),[4,this.filter.apply(this,t)];case 1:return e=o.sent(),this.filterClient.parameterList=(i=this.filterClient.parameterList).delete.apply(i,n),[2,e]}}))}))},t.prototype.filter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return i(this,void 0,void 0,(function(){var n,e,r,i=this;return o(this,(function(o){if(!this.config.multiSelect&&t.length>1)throw new Error("This is not a multi value facet. You can only pass one value to filter().");return t.forEach((function(t){if(i.type!==typeof t)throw new Error("The facet "+i.config.baseName+" is of type "+i.type+", but the value that was passed ("+t+") is of type "+typeof t);if(!i.isValueAllowed(t))throw new Error("The passed value "+t+" is not allowed in this facette")})),n=t.map((function(t){return i.getQueryParam(t)})),e=(r=this.filterClient.parameterList.deleteAll(this.getFilterParamName())).add.apply(r,n),this.filterClient.parameterList=e.updateFirst({haupia_start:"0"}).updateFirst({haupia_pageNumber:"0"}),[2,this.search()]}))}))},t.prototype.search=function(){return i(this,void 0,void 0,(function(){var t,n;return o(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,this.filterClient.fetch()];case 1:return t=e.sent(),[2,new ir(this.filterClient,t)];case 2:throw n=e.sent(),new Error(n);case 3:return[2]}}))}))},t}(),s={};(t){return Boolean(t&&t["@@__IMMUTABLE_ITERABLE__@@"])}function g(t){return Boolean(t&&t["@@__IMMUTABLE_KEYED__@@"])}function w(t){return Boolean(t&&t["@@__IMMUTABLE_INDEXED__@@"])}function b(t){return g(t)||w(t)}var S=E=function(t){function n(t){return g(t)?t:F(t)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n}(S),P=S),I=S);S.Keyed=E,S.Indexed=P,S.Set=I;function O(t){return Boolean(t&&t["@@__IMMUTABLE_SEQ__@@"])}function D(t){return Boolean(t&&t["@@__IMMUTABLE_RECORD__@@"])}ar M="@@__IMMUTABLE_ORDERED__@@";ar A="function"==typeof Symbol&&Symbol.iterator,k=A||"@@iterator",T=otype.toString=T.KEYS=0,T.VALUES=1,T.ENTRIES=2,T.prototype.inspect=T.prototype.toSource=T.prototype[k]=function(){return this};var U=Object.prototype.hasOwnProperty;ar W=S),F=W),V=W),K=W);W.isSeq=O,W.Keyed=F,W.Set=K,W.Indexed=V,W.prototype["@@__IMMUTABLE_SEQ__@@"]=!0;var H=V),Y=F);Y.prototype[M]=!0;var Q,J=V);function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:ar ut=Object.prototype.valueOf;r ct=Object.isExtensible,ft=);var ht,pt="function"==typeof WeakMap;pt&&(ht=new WeakMap);var lt=0,vt="__immutablehash__";"function"==typeof Symbol&&(vt=Symbol(vt));var dt=16,yt=255,_t=0,mt={},gt=F);gt.prototype[M]=!0;var wt=V),bt=K),St=F);.length;n--;)t[n]=arguments[n];return fn(this,t)}on dn(t){for(var n=[],e=arguments.length-1;e-- >0;)n[e]=arguments[e+1];return Zt(this,t,Tn(),(function(t){return pn(t,n)}))}ototype.cacheResult=gt.prototype.cacheResult=bt.prototype.cacheResult=St.prototype.cacheResult=Nt;var bn=E);bn.isMap=tt;var Sn=bn.prototype;Sn["@@__IMMUTABLE_MAP__@@"]=!0,Sn.delete=Sn.remove,Sn.removeAll=Sn.deleteAll,Sn.setIn=nn,Sn.removeIn=Sn.deleteIn=rn,Sn.update=un,Sn.updateIn=sn,Sn.merge=Sn.concat=an,Sn.mergeWith=cn,Sn.mergeDeep=ln,Sn.mergeDeepWith=vn,Sn.mergeIn=dn,Sn.mergeDeepIn=yn,Sn.withMutations=_n,Sn.wasAltered=wn,Sn.asImmutable=gn,Sn["@@transducer/init"]=Sn.asMutable=mn,Sn["@@transducer/step"]=Sn["@@transducer/result"]=function(t){return t.asImmutable()};var En=function(t,n){this.ownerID=t,this.entries=n};En.prototype.get=function(t,n,e,r){for(var i=this.entries,o=0,u=i.length;o<u;o++)if(rt(e,i[o][0]))return i[o][1];return r},En.prototype.update=var Pn=function(t,n,e){this.ownerID=t,this.bitmap=n,this.nodes=e};Pn.prototype.get=Pn.prototype.update=var In=function(t,n,e){this.ownerID=t,this.count=n,this.nodes=e};In.prototype.get=In.prototype.update=var On=function(t,n,e){this.ownerID=t,this.keyHash=n,this.entries=e};On.prototype.get=On.prototype.update=var Dn=Dn.prototype.get=Dn.prototype.update=En.prototype.iterate=On.prototype.iterate=Pn.prototype.iterate=In.prototype.iterate=Dn.prototype.iterate=var xn,Mn=T);nction kn(t,n,e,r){var i=Object.create(Sn);return i.size=t,i._root=n,i.__ownerID=e,i.__hash=r,i.__altered=!1,i}function Tn(){return xn||(xn=kn(0))}=8,Rn=16,Wn=8;function Fn(t){return Boolean(t&&t["@@__IMMUTABLE_LIST__@@"])}var Vn=function(t){eturn t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.of=function(){return this(arguments)},n.prototype.toString=function(){return this.__toString("List [","]")},n.prototype.get=n.prototype.set=n.prototype.remove=n.prototype.insert=n.prototype.clear=n.prototype.push=n.prototype.pop=n.prototype.unshift=n.prototype.shift=n.prototype.concat=n.prototype.setSize=n.prototype.map=n.prototype.slice=n.prototype.__iterator=n.prototype.__iterate=n.prototype.__ensureOwner=n}(P);Vn.isList=Fn;var Kn=Vn.prototype;Kn["@@__IMMUTABLE_LIST__@@"]=!0,Kn.delete=Kn.remove,Kn.merge=Kn.concat,Kn.setIn=nn,Kn.deleteIn=Kn.removeIn=rn,Kn.update=un,Kn.updateIn=sn,Kn.mergeIn=dn,Kn.mergeDeepIn=yn,Kn.withMutations=_n,Kn.wasAltered=wn,Kn.asImmutable=gn,Kn["@@transducer/init"]=Kn.asMutable=mn,Kn["@@transducer/step"]=function(t,n){return t.push(n)},Kn["@@transducer/result"]=function(t){return t.asImmutable()};var Hn=Hn.prototype.removeBefore=Hn.prototype.removeAfter=var Yn,Qn={};e=bn);isOrderedMap=nt,ie.prototype[M]=!0,ie.prototype.delete=ie.prototype.remove;function ae(t){return Boolean(t&&t["@@__IMMUTABLE_STACK__@@"])}var ce=P);ce.isStack=ae;var fe,he=ce.prototype;["@@__IMMUTABLE_STACK__@@"]=!0,he.shift=he.pop,he.unshift=he.push,he.unshiftAll=he.pushAll,he.withMutations=_n,he.wasAltered=wn,he.asImmutable=gn,he["@@transducer/init"]=he.asMutable=mn,he["@@transducer/step"]=function(t,n){return t.unshift(n)},he["@@transducer/result"]=function(t){return t.asImmutable()};function ve(t){return Boolean(t&&t["@@__IMMUTABLE_SET__@@"])}function de(t){return ve(t)&&z(t)} ge=I);ge.isSet=ve;var we,be=ge.prototype;unction Ee(t,n){var e=Object.create(be);return e.size=t?t.size:0,e._map=t,e.__ownerID=n,e}function Pe(){return we||(we=Ee(Tn()))}be["@@__IMMUTABLE_SET__@@"]=!0,be.delete=be.remove,be.merge=be.concat=be.union,be.withMutations=_n,be.asImmutable=gn,be["@@transducer/init"]=be.asMutable=mn,be["@@transducer/step"]=function(t,n){return t.add(n)},be["@@transducer/result"]=function(t){return t.asImmutable()},be.__empty=Pe,be.__make=Ee;var Ie,Oe=V);unction xe(t,n){return De(this,t,n)}isIterable=m,S.isKeyed=g,S.isIndexed=w,S.isAssociative=b,S.isOrdered=z,S.Iterator=T,_e(S,{toArray:toIndexedSeq:function(){return new wt(this)},toJS:function(){return me(this)},toKeyedSeq:function(){return new gt(this,!0)},toMap:function(){return bn(this.toKeyedSeq())},toObject:ze,toOrderedMap:toOrderedSet:function(){return We(g(this)?this.valueSeq():this)},toSet:function(){return ge(g(this)?this.valueSeq():this)},toSetSeq:function(){return new bt(this)},toSeq:toStack:function(){return ce(g(this)?this.valueSeq():this)},toList:toString:function(){return"[Collection]"},__toString:concat:includes:function(t){return this.some((function(n){return rt(n,t)}))},entries:function(){return this.__iterator(2)},every:filter:function(t,n){return Lt(this,Ot(this,t,n,!0))},find:forEach:join:keys:function(){return this.__iterator(0)},map:function(t,n){return Lt(this,Pt(this,t,n))},reduce:function(t,n,e){return Ce(this,t,n,e,arguments.length<2,!1)},reduceRight:reverse:function(){return Lt(this,It(this,!0))},slice:function(t,n){return Lt(this,Dt(this,t,n,!0))},some:sort:values:function(){return this.__iterator(1)},butLast:isEmpty:count:countBy:equals:function(t){return ye(this,t)},entrySeq:filterNot:function(t,n){return this.filter(qe(t),n)},findEntry:findKey:findLast:function(t,n,e){return this.toKeyedSeq().reverse().find(t,n,e)},findLastEntry:findLastKey:first:flatMap:flatten:function(t){return Lt(this,zt(this,t,!0))},fromEntrySeq:function(){return new St(this)},get:getIn:xe,groupBy:has:hasIn:function(t){return Me(this,t)},isSubset:isSuperset:keyOf:keySeq:last:function(t){return this.toSeq().reverse().first(t)},lastKeyOf:max:function(t){return kt(this,t)},maxBy:function(t,n){return kt(this,n,t)},min:minBy:rest:function(){return this.slice(1)},skip:skipLast:skipWhile:function(t,n){return Lt(this,xt(this,t,n,!0))},skipUntil:function(t,n){return this.skipWhile(qe(t),n)},sortBy:take:takeLast:takeWhile:takeUntil:update:valueSeq:function(){return this.toIndexedSeq()},hashCode:);var Ae=S.prototype;Ae["@@__IMMUTABLE_ITERABLE__@@"]=!0,Ae[k]=Ae.values,Ae.toJSON=Ae.toArray,Ae.__toStringMapper=Yt,Ae.inspect=Ae.toSource=function(){return this.toString()},Ae.chain=Ae.flatMap,Ae.contains=Ae.includes,_e(E,{flip:mapEntries:mapKeys:);var ke=E.prototype;ke["@@__IMMUTABLE_KEYED__@@"]=!0,ke[k]=Ae.entries,ke.toJSON=ze,ke.__toStringMapper=_e(P,{toKeyedSeq:filter:function(t,n){return Lt(this,Ot(this,t,n,!1))},findIndex:function(t,n){var e=this.findEntry(t,n);return e?e[0]:-1},indexOf:function(t){var n=this.keyOf(t);return void 0===n?-1:n},lastIndexOf:reverse:slice:function(t,n){return Lt(this,Dt(this,t,n,!1))},splice:findLastIndex:first:flatten:get:has:interpose:interleave:keySeq:last:skipWhile:zip:zipAll:zipWith:);var Te=P.prototype;IMMUTABLE_INDEXED__@@"]=!0,Te[M]=!0,_e(I,{get:includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),I.prototype.has=Ae.includes,I.prototype.contains=I.prototype.includes,_e(F,E.prototype),_e(V,P.prototype),_e(K,I.prototype);var We=ge);We.isOrderedSet=de;var Fe,Ve=We.prototype;[M]=!0,Ve.zip=Te.zip,Ve.zipWith=Te.zipWith,Ve.__empty=He,Ve.__make=Ke;var Ye=Ye.prototype.toString=Ye.prototype.equals=Ye.prototype.hashCode=Ye.prototype.has=function(t){return this._indices.hasOwnProperty(t)},Ye.prototype.get=Ye.prototype.set=Ye.prototype.remove=Ye.prototype.clear=Ye.prototype.wasAltered=function(){return this._values.wasAltered()},Ye.prototype.toSeq=function(){return Xe(this)},Ye.prototype.toJS=function(){return me(this)},Ye.prototype.entries=Ye.prototype.__iterator=function(t,n){return Xe(this).__iterator(t,n)},Ye.prototype.__iterate=Ye.prototype.__ensureOwner=Ye.isRecord=D,Ye.getDescriptiveName=Ge;var Qe=Ye.prototype;@@__IMMUTABLE_RECORD__@@"]=!0,Qe.delete=Qe.remove,Qe.deleteIn=Qe.removeIn=rn,Qe.getIn=xe,Qe.hasIn=Ae.hasIn,Qe.merge=an,Qe.mergeWith=cn,Qe.mergeIn=dn,Qe.mergeDeep=ln,Qe.mergeDeepWith=vn,Qe.mergeDeepIn=yn,Qe.setIn=nn,Qe.update=un,Qe.updateIn=sn,Qe.withMutations=_n,Qe.asMutable=mn,Qe.asImmutable=gn,Qe[k]=Qe.entries,Qe.toJSON=Qe.toObject=Ae.toObject,Qe.inspect=Qe.toSource=function(){return this.toString()};var Ze=function(){function t(t){this._list=Vn([]).concat(t||[])}return Object.defineProperty(t.prototype,"list",{get:function(){return this._list},enumerable:!0,configurable:!0}),t.prototype.addOrUpdate=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];for(var r=new t(this.list),i=0,o=n;i<o.length;i++){var u=o[i],s=this.convert(u)[0],a=r.getIndexForKey(s);r=-1!==a?new t(r.list.set(a,u)):r.add(u)}return r},t.prototype.addOrUpdateSearchTerm=function(n){var e=this.list;return n?this.addOrUpdate({query:n}):new t(e)},t.prototype.add=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=this.list.concat(n);return new t(r)},t.prototype.convert=function(t){var n=Object.keys(t)[0];return[n,t[n]]},t.prototype.getOne=function(t){return this.list.find((function(n){return Object.keys(n)[0]===t}))||null},t.prototype.getMany=function(t){var n=this;return this.list.filter((function(e){var r=n.convert(e)[0];return t===r}))},t.prototype.deleteAll=function(n){return new t(this.list.filter((function(t){return Object.keys(t)[0]!==n})))},t.prototype.delete=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var r=new t(this.list);return n.forEach((function(n){var e=r.getIndexForParameter(n);r=new t(r.list.delete(e))})),r},t.prototype.toString=function(){var t=this,n=new URLSearchParams;return this.list.forEach((function(e){var r=t.convert(e)[0];n.append(r,e[r])})),n.toString()},t.prototype.toArray=function(){return this.list.toArray()},t.prototype.updateFirst=function(n){var e=this.list,r=this.convert(n)[0],i=this.getIndexForKey(r);return new t(-1!==i?e.set(i,n):e)},t.prototype.update=function(n,e){var r=this.list,i=this.getIndexForParameter(n);return new t(r.set(i,e))},t.prototype.getIndexForKey=function(t){return this.list.findIndex(()},t.prototype.getIndexForParameter=function(t){var n=this;return this.list.findIndex((function(e){var r=n.convert(e),i=r[0],o=r[1],u=n.convert(t),s=u[0],a=u[1];return i===s&&o===a}))},t}(),tr=nr=function(t,n,e,r){return new(e||(e=Promise))((function(i,o){function u(t){try{a(r.next(t))}catch(t){o(t)}}function s(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var n;t.done?i(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(u,s)}a((r=r.apply(t,n||[])).next())}))},er=function(t,n){var e,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;u;)try{if(e=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=n.call(t,u)}catch(t){o=[6,t],r=0}finally{e=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},rr="Invalid pagination parameters defined. Static pagination parameters are required.",ir=function(){function t(t,n){var e=this;this.responseData=n,this._fetchClient=t,this.responseData=n,this.searchResults=n.results.map((function(t){var n=e.responseData.highlighting;return new r(t,n)})),this.paginationParams=this.extractPaginationParams(this.responseData),this.facets=this.hasFacets(n)?this.extractFacets(n,t):[]}return Object.defineProperty(t.prototype,"numberOfResults",{get:function(){return this.responseData.numRows},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"didYouMean",{get:enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fetchClient",{get:function(){return this._fetchClient},enumerable:!0,configurable:!0}),t.prototype.hasFacets=t.prototype.extractFacets=function(t,n){return t.facets.map((function(e,r){var i=t.facetConfigs[r].baseName,o=Object.keys(t.requestParameters).find((function(t){return t.includes(i)})),s=new u(n,e,t.facetConfigs[r]);if(o){var a=t.requestParameters[o].map(();return s.setSelectedValues.apply(s,a)}return s}))},t.prototype.extractPaginationParams=function(t){var n=t.requestParameters;return this.hasDynamicPaginationParams(n)?this.extractDynamicPaginationParams(n):this.hasStaticPaginationParams(n)?this.extractStaticPaginationParams(n):this.setDefaultStaticPaginationParams(t.rows)},t.prototype.hasDynamicPaginationParams=function(t){var n=Object.prototype.hasOwnProperty.call(t,"haupia_rows"),e=Object.prototype.hasOwnProperty.call(t,"haupia_start");return n&&e},t.prototype.extractDynamicPaginationParams=function(t){var n=Number(t.haupia_rows),e=Number(t.haupia_start);if(isNaN(n)||isNaN(e))throw Error("Invalid pagination parameters.");return{rows:n,start:e}},t.prototype.hasStaticPaginationParams=function(t){var n=Object.prototype.hasOwnProperty.call(t,"haupia_pageNumber"),e=Object.prototype.hasOwnProperty.call(t,"haupia_pageSize");return n&&e},t.prototype.extractStaticPaginationParams=function(t){var n=Number(t.haupia_pageNumber),e=Number(t.haupia_pageSize);if(isNaN(n)||isNaN(e))throw Error("Invalid pagination parameters.");return{pageNumber:n,pageSize:e}},t.prototype.setDefaultStaticPaginationParams=t.prototype.getNumberOfPages=function(){if(!this.isStaticPagination(this.paginationParams))throw Error(rr);return Math.ceil(this.responseData.numRows/this.paginationParams.pageSize)},t.prototype.getFacet=t.prototype.resetFacets=function(t){return nr(this,void 0,void 0,(function(){return er(this,(function(n){return this.facets=this.facets.map((function(n){var e;return t?(null===(e=t)||void 0===e?void 0:e.includes(n.name))?n.reset():n:n.reset()})),this.isDynamicPagination(this.paginationParams)?[2,this.search({start:0,rows:this.paginationParams.rows})]:[2,this.getFirstPage()]}))}))},t.prototype.getFirstPage=function(){if(!this.isStaticPagination(this.paginationParams))throw Error(rr);return this.getPage(0)},t.prototype.getLastPage=function(){var t=this.getNumberOfPages()-1;return this.getPage(t)},t.prototype.getPage=function(t){return nr(this,void 0,void 0,(function(){var n;return er(this,(function(e){if(!this.isStaticPagination(this.paginationParams))throw Error(rr);if((n=this.paginationParams).pageNumber=t,!this.hasPage(t))throw Error("There is no page number: "+t);return[2,this.search(n)]}))}))},t.prototype.hasPage=function(t){var n=this.paginationParams;return Math.ceil(this.responseData.numRows/n.pageSize)>t&&t>=0},t.prototype.hasNext=function(){return!!(this.isDynamicPagination(this.paginationParams)&&this.paginationParams.start+this.paginationParams.rows<this.responseData.numRows)||!!(this.isStaticPagination(this.paginationParams)&&this.paginationParams.pageSize*(this.paginationParams.pageNumber+1)<this.responseData.numRows)},t.prototype.hasPrev=function(){return!!(this.isStaticPagination(this.paginationParams)&&this.paginationParams.pageNumber>0)||!!(this.isDynamicPagination(this.paginationParams)&&this.paginationParams.start>=this.paginationParams.rows)},t.prototype.next=function(){return nr(this,void 0,void 0,(function(){var t;return er(this,(function(n){if(!this.hasNext())throw Error("There is no next page.");return t={},this.isDynamicPagination(this.paginationParams)&&((t=tr({},this.paginationParams)).start+=this.paginationParams.rows),this.isStaticPagination(this.paginationParams)&&(t=this.paginationParams).pageNumber++,[2,this.search(t)]}))}))},t.prototype.prev=function(){return nr(this,void 0,void 0,(function(){var t;return er(this,(function(n){if(!this.hasPrev())throw Error("There is no previous page.");return t={},this.isStaticPagination(this.paginationParams)&&(t=this.paginationParams).pageNumber--,this.isDynamicPagination(this.paginationParams)&&((t=this.paginationParams).start-=t.rows),[2,this.search(t)]}))}))},t.prototype.addOrUpdateFacetParams=function(t){var n=new Ze(t.list);return this.facets.forEach((function(t){var e,r=t.getSelectedParameters();n=(e=n.deleteAll(t.getFilterParamName())).add.apply(e,r)})),n},t.prototype.search=function(n){return nr(this,void 0,void 0,(function(){var e,r,i,o,u;return er(this,(function(s){switch(s.label){case 0:e=this.buildFetchParams(n),r=(u=this.fetchClient.parameterList).addOrUpdate.apply(u,e),this.fetchClient.parameterList=this.addOrUpdateFacetParams(r),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this.fetchClient.fetch()];case 2:return i=s.sent(),[2,new t(this.fetchClient,i)];case 3:throw o=s.sent(),new Error(o);case 4:return[2]}}))}))},t.prototype.buildFetchParams=function(t){var n=[],e=this.transformPaginationParamsToFetchParams(t);return n=n.concat(e)},t.prototype.transformPaginationParamsToFetchParams=function(t){var n=[];return this.isDynamicPagination(t)&&(n=this.buildDynamicPaginationParams(t)),this.isStaticPagination(t)&&(n=this.buildStaticPaginationParams(t)),n},t.prototype.buildDynamicPaginationParams=function(t){var n=[];return n.push({haupia_rows:t.rows.toString()}),n.push({haupia_start:t.start.toString()}),n},t.prototype.buildStaticPaginationParams=function(t){var n=[];return n.push({haupia_pageNumber:t.pageNumber.toString()}),n.push({haupia_pageSize:t.pageSize.toString()}),n},t.prototype.isDynamicPagination=function(t){return void 0!==t.rows},t.prototype.isStaticPagination=t}(),or=e(0),ur=sr=ar=cr=function(t,n,e,r){return new(e||(e=Promise))((function(i,o){function u(t){try{a(r.next(t))}catch(t){o(t)}}function s(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var n;t.done?i(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(u,s)}a((r=r.apply(t,n||[])).next())}))},fr=function(t,n){var e,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;u;)try{if(e=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=n.call(t,u)}catch(t){o=[6,t],r=0}finally{e=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},hr=["Enter","ArrowUp","ArrowDown"],pr=new CustomEvent("smart-search-widget-appeared",{bubbles:!0,cancelable:!0}),lr=new CustomEvent("smart-search-widget-hidden",{bubbles:!0,cancelable:!0}),vr=new CustomEvent("smart-search-input-empty",{bubbles:!0,cancelable:!0}),dr=function(){eturn t.prototype.getAutocompleteList=function(t,n){var e,r;return cr(this,void 0,void 0,(function(){var i,o,u,s,a=this;return fr(this,(function(c){switch(c.label){case 0:n||(n=this.options),c.label=1;case 1:return c.trys.push([1,3,,4]),i=[{prefix:t.toLowerCase()}],(null===(e=n)||void 0===e?void 0:e.language)&&i.push({language:n.language}),this.autocompleteClient.parameterList=(s=this.autocompleteClient.parameterList).addOrUpdate.apply(s,i),[4,this.autocompleteClient.fetch()];case 2:return o=c.sent(),(null===(r=n)||void 0===r?void 0:r.highlight)?[2,o.map(()]:[2,o];case 3:return u=c.sent(),console.error("Error fetching autocomplete suggestions",u),[3,4];case 4:return[2,[""]]}}))}))},t.prototype.highlightPrefix=function(t,n){var e=t.substr(t.indexOf(n.toLowerCase())+n.length);return"<strong>"+n+"</strong>"+e},t.prototype.showBox=function(t){"hidden"===t.style.visibility&&(t.style.visibility="visible",t.dispatchEvent(pr))},t.prototype.hideBox=t.prototype.clearAutocompleteBox=function(t){this.hideBox(t),t.querySelectorAll(".smart-search-autocomplete-item").forEach((function(t){return t.remove()}))},t.prototype.createAutocompleteBox=function(t){var n=document.createElement("div");return n.setAttribute("id",t+" autocomplete-widget"),n.setAttribute("class","smart-search-autocomplete-widget"),n},t.prototype.removeHighlights=function(t){var n=document.createElement("div");return n.innerHTML=t,n.textContent||""},t.prototype.markActiveItem=function(t,n){var e=Array.from(t.querySelectorAll(".smart-search-autocomplete-item")),r=e.filter(().map(().pop();return e.filter(().forEach((),r},t.prototype.renderItem=t.prototype.initializeAndAttach=function(t,n){var e=this,r=this.createAutocompleteBox(t.id);if(n)n.appendChild(r);else{if(!t.parentNode)throw new Error("Given input element has no parent. Please attach it to an element in the DOM tree.");t.parentNode.appendChild(r)}this.hideBox(r),or.fromEvent(t,"keydown").debounce(300).filter(().map(().skipDuplicates().flatMapLatest((function(n){var i;t.addEventListener("smart-search-input-empty",(function(){return e.clearAutocompleteBox(r)}),{once:!0});var o=(null===(i=e.options)||void 0===i?void 0:i.prefixThreshold)||0;if(0===n.length)dispatchEvent(vr);else if(n.length>o)return or.fromPromise(e.getAutocompleteList(n));return[]})).onValue((function(n){e.clearAutocompleteBox(r),n.forEach((function(n){e.showBox(r);var i=e.renderItem(n);i.addEventListener("click",(function(){t.value=e.removeHighlights(n),t.focus(),e.clearAutocompleteBox(r)})),r.appendChild(i)}))}));var i=or.fromEvent(t,"keydown").filter((function(t){return"ArrowUp"===t.key})),o=or.fromEvent(t,"keydown").filter((function(t){return"ArrowDown"===t.key})),u=or.fromEvent(t,"keydown").filter((),s=or.fromEvent(r,"smart-search-widget-appeared");or.update(-1,[o,,[i,function(t){return Math.max(t-1,-1)}],[s,function(){return-1}],[u,).onValue((function(n){var i=e.markActiveItem(r,n);t.addEventListener("keydown",(function(t){var n;"Enter"===t.key&&(null===(n=i)||void 0===n||n.click())}))}))},t}(),yr=function(t,n,e,r){return new(e||(e=Promise))((function(i,o){function u(t){try{a(r.next(t))}catch(t){o(t)}}function s(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var n;t.done?i(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(u,s)}a((r=r.apply(t,n||[])).next())}))},_r=function(t,n){var e,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;u;)try{if(e=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=n.call(t,u)}catch(t){o=[6,t],r=0}finally{e=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},mr={cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},method:"GET",mode:"cors",redirect:"follow",referrerPolicy:"no-referrer"},gr=function(){function t(t,n){var e,r;this.url=t,this._parameterList=new Ze,this._autocomplete=(null===(r=n)||void 0===r?void 0:r.autocomplete)||!1,n&&(this.parameterList=(e=this.parameterList.addOrUpdateSearchTerm(n.searchTerm||"")).add.apply(e,n.customParams||[]))}return Object.defineProperty(t.prototype,"autocomplete",{get:function(){return this._autocomplete},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parameterList",{get:function(){return this._parameterList},set:function(t){this._parameterList=t},enumerable:!0,configurable:!0}),t.prototype.getUrlWithPath=function(t){var n=t;return n.endsWith("/")||(n+="/"),this.autocomplete?n+"autocomplete":n+"execute"},t.prototype.buildRequest=function(t){if(t!==this.url)return new Request(t,mr);var n,e=this.getUrlWithPath(t),r=this.parameterList.toString();try{var i=new URL(e+"/?"+r).toString();n=new Request(i,mr)}catch(t){throw new Error(t.message+": "+e+"/?"+r)}return n},t.prototype.handleStatus=t.prototype.fetch=function(t){return void 0===t&&(t=this.url),yr(this,void 0,void 0,(function(){var n,e,r;return _r(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),n=this.buildRequest(t),[4,fetch(n)];case 1:return e=i.sent(),[4,this.handleStatus(e).json()];case 2:return[2,i.sent()];case 3:throw r=i.sent(),new Error(r);case 4:return[2]}}))}))},t}(),wr=function(){function t(){this.cssClasses=this.initDefaultClasses(),this.renderDidYouMean=ar}return t.prototype.initDefaultClasses=function(){return{wrapper:["smart-search-did-you-mean-wrapper"],element:["smart-search-did-you-mean-element"]}},t}(),br=function(){function t(){this.cssClasses=this.initDefaultClasses(),this.renderNext=ur,this.renderPage=ur,this.renderPrev=ur}return t.prototype.initDefaultClasses=t}(),Sr=function(){function t(){this.cssClasses=this.initDefaultClasses(),this.templateFunction=sr}return t.prototype.initDefaultClasses=t}(),Er=function(){function t(t){this.page=t,this._didYouMeanTemplate=new wr,this._paginationTemplate=new br,this._searchResultTemplate=new Sr}return Object.defineProperty(t.prototype,"didYouMeanTemplate",{get:function(){return this._didYouMeanTemplate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paginationTemplate",{get:function(){return this._paginationTemplate},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"searchResultTemplate",{get:function(){return this._searchResultTemplate},enumerable:!0,configurable:!0}),t.prototype.renderNextButton=function(t){if(void 0===t&&(t="Next"),!this.page.isStaticPagination(this.page.paginationParams))throw Error("Static pagination parameters are expected.");if(this.page.hasNext()){var n=this.page.paginationParams.pageNumber+1;return this.renderPaginationElement(this._paginationTemplate.cssClasses.nextButton,n,this._paginationTemplate.renderNext,t)}},t.prototype.renderNextButtonToHTMLElement=function(t,n){void 0===n&&(n="Next");var e=this.renderNextButton(n);e&&t.append(e)},t.prototype.renderPrevButton=function(t){if(void 0===t&&(t="Prev"),!this.page.isStaticPagination(this.page.paginationParams))throw Error("Static pagination parameters are expected.");if(this.page.hasPrev()){var n=this.page.paginationParams.pageNumber-1;return this.renderPaginationElement(this._paginationTemplate.cssClasses.prevButton,n,this._paginationTemplate.renderPrev,t)}},t.prototype.renderPrevButtonToHTMLElement=function(t,n){void 0===n&&(n="Prev");var e=this.renderPrevButton(n);e&&t.append(e)},t.prototype.renderPageButtons=function(t){if(!this.page.isStaticPagination(this.page.paginationParams))throw Error("Static pagination parameters are expected.");for(var n=this.page.paginationParams,e=Math.ceil(this.page.numberOfResults/n.pageSize),r=this.calculateFirstPageNumber(t,e),i=[],o=0;o<t;o++){var u=r+o,s=this.renderPaginationElement(this._paginationTemplate.cssClasses.pageButton,u,this._paginationTemplate.renderPage);if(i.push(s),r+o+1===e)break}var a=n.pageNumber;return this.highlightCurrentPage(i,a),i},t.prototype.calculateFirstPageNumber=function(t,n){var e=this.page.paginationParams.pageNumber,r=e-Math.floor(t/2);return Math.ceil(t/2)>n-e&&(r-=Math.ceil(t/2)-(n-e)),Math.max(0,r)},t.prototype.highlightCurrentPage=function(t,n){var e=this;t.filter(().forEach((function(t){var n;return(n=t.classList).add.apply(n,e._paginationTemplate.cssClasses.currentPage)}))},t.prototype.renderPageButtonsToHTMLElement=function(t,n){t.append.apply(t,this.renderPageButtons(n))},t.prototype.renderPagination=function(t){var n,e=document.createElement("ul");return this.renderPrevButtonToHTMLElement(e),this.renderPageButtonsToHTMLElement(e,t),this.renderNextButtonToHTMLElement(e),(n=e.classList).add.apply(n,this._paginationTemplate.cssClasses.pagination),e},t.prototype.renderPaginationToHTMLElement=t.prototype.renderPaginationElement=function(t,n,e,r){var i,o=document.createElement("li");return(i=o.classList).add.apply(i,t),o.setAttribute("smart-search-page-value",n.toString()),o.innerHTML=e(r||(n+1).toString()),o},t.prototype.renderSearchResults=function(){var t,n=this,e=this.page.searchResults.map((function(t){var e,r=document.createElement("div");return r.innerHTML=t.render(n._searchResultTemplate.templateFunction),(e=r.classList).add.apply(e,n._searchResultTemplate.cssClasses.element),r})),r=document.createElement("div");return(t=r.classList).add.apply(t,this._searchResultTemplate.cssClasses.wrapper),r.append.apply(r,e),r},t.prototype.renderSearchResultsToHTMLElement=function(t){t.appendChild(this.renderSearchResults())},t.prototype.renderDidYouMean=function(){var t,n=this;if(0===this.page.didYouMean.length)throw Error("There are no search query suggestions.");var e=this.page.didYouMean.map((),r=document.createElement("div");return(t=r.classList).add.apply(t,this._didYouMeanTemplate.cssClasses.wrapper),r.insertAdjacentHTML("afterbegin",e.join("")),Array.from(r.children).forEach((function(t){var e;return(e=t.classList).add.apply(e,n._didYouMeanTemplate.cssClasses.element)})),r},t.prototype.renderDidYouMeanToHTMLElement=t}(),Pr=function(t,n,e,r){return new(e||(e=Promise))((function(i,o){function u(t){try{a(r.next(t))}catch(t){o(t)}}function s(t){try{a(r.throw(t))}catch(t){o(t)}}function a(t){var n;t.done?i(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(u,s)}a((r=r.apply(t,n||[])).next())}))},Ir=function(t,n){var e,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;u;)try{if(e=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(i=u.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=n.call(t,u)}catch(t){o=[6,t],r=0}finally{e=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Or=function(){function t(t,n,e){var r,i,o;this.host=t,this.preparedSearch=n,this.options=e,this.apiEndpoint=(null===(r=e)||void 0===r?void 0:r.apiEndpoint)||"/v1/prepared_search";var u=""+this.host+this.apiEndpoint+"/"+this.preparedSearch+"/",s={};if(null===(i=e)||void 0===i?void 0:i.customParams){if(!Array.isArray(e.customParams))throw new Error("The customParams property must be an Array");s.customParams=e.customParams,this.customParameterList=e.customParams}this._searchClient=new gr(u,s);var a=null===(o=e)||void 0===o?void 0:o.autocompleteOptions,c=s;c.autocomplete=!0;var f=new gr(u,c);this._autocompleteWidget=new dr(f,a)}return Object.defineProperty(t.prototype,"searchClient",{get:function(){return this._searchClient},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autocompleteWidget",{get:function(){return this._autocompleteWidget},enumerable:!0,configurable:!0}),t.version=function(){return"1.4.1"},t.prototype.search=function(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return Pr(this,void 0,void 0,(function(){var e,r,i,o;return Ir(this,(function(u){switch(u.label){case 0:e=(o=this.searchClient.parameterList.addOrUpdateSearchTerm(t)).add.apply(o,n),this.searchClient.parameterList=e,u.label=1;case 1:return u.trys.push([1,3,,4]),[4,this.searchClient.fetch()];case 2:return r=u.sent(),this.searchClient.parameterList=e.delete.apply(e,n),[2,new ir(this.searchClient,r)];case 3:throw i=u.sent(),this.searchClient.parameterList=e.delete.apply(e,n),new Error(i);case 4:return[2]}}))}))},t.prototype.setCustomParams=function(){for(var t,n,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.searchClient.parameterList=(t=(n=this.searchClient.parameterList).delete.apply(n,this.customParameterList||[])).add.apply(t,e),this.customParameterList=e},t.prototype.deleteCustomParams=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=this.searchClient.parameterList.list.filter((function(n){return!t.includes(Object.keys(n)[0])}));this.searchClient.parameterList=new Ze(Vn(e))},t.prototype.mapPages=function(t,n,e){var r=t.groups.find(();if(void 0===r)throw Error("Searched group not found!");var i=new Map,o=this.searchClient.parameterList.addOrUpdateSearchTerm(e);this.searchClient.parameterList=o;for(var u=0,s=r.groups;u<s.length;u++){var a=s[u],c=JSON.parse(JSON.stringify(t));c.results=a.results,c.numRows=a.numRows;var f=new ir(this.searchClient,c);i.set(a.value,f)}return i},t.prototype.searchWithGroup=function(t,n,e){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return Pr(this,void 0,void 0,(function(){var i,o,u,s,a,c;return Ir(this,(function(f){switch(f.label){case 0:i=[{query:t},{grouping:"on"},{groupField:n},{groupLimit:e.toString()}],o=(a=(c=this.searchClient.parameterList).addOrUpdate.apply(c,i)).add.apply(a,r),this.searchClient.parameterList=o,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.searchClient.fetch()];case 2:return u=f.sent(),this.searchClient.parameterList=o.delete.apply(o,r),[2,this.mapPages(u,n,t)];case 3:throw s=f.sent(),this.searchClient.parameterList=o.delete.apply(o,r),new Error(s);case 4:return[2]}}))}))},t.prototype.fetchAutocompleteList=function(t,n){return this.autocompleteWidget.getAutocompleteList(t,n)},t.prototype.attachAutocompleteWidget=t.prototype.getPageRenderer=t}();e.d(n,"SmartSearch",(function(){return Or})),e.d(n,"Page",(function(){return ir})),e.d(n,"Facet",(function(){return u})),e.d(n,"SearchResult",(function(){return r})),e.d(n,"PageRenderer",(function(){return Er}))}])}));