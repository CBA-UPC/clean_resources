
// Copyright 2012 Google Inc. All rights reserved.
 
(function(){

var data = {
"resource": {
  "version":"1",
  
  "macros":[{"function":"__e"},{"vtp_signal":1,"function":"__c","vtp_value":1},{"function":"__c","vtp_value":"google.es"},{"function":"__c","vtp_value":0},{"vtp_signal":1,"function":"__c","vtp_value":1},{"function":"__c","vtp_value":"google.es"},{"function":"__c","vtp_value":0}],
  "tags":[{"function":"__ogt_1p_data_v2","priority":15,"vtp_isAutoEnabled":true,"vtp_autoCollectExclusionSelectors":["list",["map","exclusionSelector",""]],"vtp_isEnabled":true,"vtp_autoEmailEnabled":true,"vtp_autoPhoneEnabled":false,"vtp_autoAddressEnabled":false,"vtp_isAutoCollectPiiEnabledFlag":false,"tag_id":10},{"function":"__ccd_ga_first","priority":14,"vtp_instanceDestinationId":"G-FTD94KXZMD","tag_id":26},{"function":"__set_product_settings","priority":13,"vtp_instanceDestinationId":"G-FTD94KXZMD","vtp_foreignTldMacroResult":["macro",5],"vtp_isChinaVipRegionMacroResult":["macro",6],"tag_id":25},{"function":"__ogt_google_signals","priority":12,"vtp_googleSignals":"ENABLED","vtp_instanceDestinationId":"G-FTD94KXZMD","vtp_serverMacroResult":["macro",4],"tag_id":24},{"function":"__ccd_ga_regscope","priority":11,"vtp_settingsTable":["list",["map","redactFieldGroup","DEVICE_AND_GEO","disallowAllRegions",false,"disallowedRegions",""],["map","redactFieldGroup","GOOGLE_SIGNALS","disallowAllRegions",false,"disallowedRegions",""]],"vtp_instanceDestinationId":"G-FTD94KXZMD","tag_id":23},{"function":"__ccd_em_download","priority":10,"vtp_includeParams":true,"vtp_instanceDestinationId":"G-FTD94KXZMD","tag_id":22},{"function":"__ccd_em_outbound_click","priority":9,"vtp_includeParams":true,"vtp_instanceDestinationId":"G-FTD94KXZMD","tag_id":21},{"function":"__ccd_em_page_view","priority":8,"vtp_historyEvents":true,"vtp_includeParams":true,"vtp_instanceDestinationId":"G-FTD94KXZMD","tag_id":20},{"function":"__ccd_em_scroll","priority":7,"vtp_includeParams":true,"vtp_instanceDestinationId":"G-FTD94KXZMD","tag_id":19},{"function":"__ccd_em_site_search","priority":6,"vtp_searchQueryParams":"q,s,search,query,keyword","vtp_includeParams":true,"vtp_instanceDestinationId":"G-FTD94KXZMD","tag_id":18},{"function":"__ccd_conversion_marking","priority":5,"vtp_conversionRules":["list",["map","matchingRules","{\"type\":5,\"args\":[{\"stringValue\":\"purchase\"},{\"contextValue\":{\"namespaceType\":1,\"keyParts\":[\"eventName\"]}}]}"],["map","matchingRules","{\"type\":5,\"args\":[{\"stringValue\":\"sis_registration\"},{\"contextValue\":{\"namespaceType\":1,\"keyParts\":[\"eventName\"]}}]}"],["map","matchingRules","{\"type\":5,\"args\":[{\"stringValue\":\"eis_registration\"},{\"contextValue\":{\"namespaceType\":1,\"keyParts\":[\"eventName\"]}}]}"],["map","matchingRules","{\"type\":5,\"args\":[{\"stringValue\":\"new_members\"},{\"contextValue\":{\"namespaceType\":1,\"keyParts\":[\"eventName\"]}}]}"]],"vtp_instanceDestinationId":"G-FTD94KXZMD","tag_id":17},{"function":"__ogt_event_create","priority":4,"vtp_eventName":"sis_registration","vtp_isCopy":true,"vtp_instanceDestinationId":"G-FTD94KXZMD","vtp_precompiledRule":["map","new_event_name","sis_registration","merge_source_event_params",true,"event_name_predicate",["map","values",["list",["map","type","event_name"],["map","type","const","const_value","page_view"]],"type","eq"],"conditions",["list",["map","predicates",["list",["map","values",["list",["map","type","event_param","event_param",["map","param_name","page_path"]],["map","type","const","const_value","\/searchinsidersummit\/register\/thankyou\/"]],"type","eqi"]]]],"event_param_ops",["list",["map","edit_param",["map","param_name","value","param_value",["map","type","const","const_value","2400.0"]]],["map","edit_param",["map","param_name","currency","param_value",["map","type","const","const_value","USD"]]]]],"tag_id":16},{"function":"__ogt_event_create","priority":3,"vtp_eventName":"new_members","vtp_isCopy":true,"vtp_instanceDestinationId":"G-FTD94KXZMD","vtp_precompiledRule":["map","new_event_name","new_members","merge_source_event_params",true,"event_name_predicate",["map","values",["list",["map","type","event_name"],["map","type","const","const_value","page_view"]],"type","eq"],"conditions",["list",["map","predicates",["list",["map","values",["list",["map","type","event_param","event_param",["map","param_name","page_path"]],["map","type","const","const_value","\/register\/thankyou\/"]],"type","eqi"]]]],"event_param_ops",["list",["map","edit_param",["map","param_name","value","param_value",["map","type","const","const_value","0.0"]]],["map","edit_param",["map","param_name","currency","param_value",["map","type","const","const_value","USD"]]]]],"tag_id":15},{"function":"__ogt_event_create","priority":2,"vtp_eventName":"eis_registration","vtp_isCopy":true,"vtp_instanceDestinationId":"G-FTD94KXZMD","vtp_precompiledRule":["map","new_event_name","eis_registration","merge_source_event_params",true,"event_name_predicate",["map","values",["list",["map","type","event_name"],["map","type","const","const_value","page_view"]],"type","eq"],"conditions",["list",["map","predicates",["list",["map","values",["list",["map","type","event_param","event_param",["map","param_name","page_path"]],["map","type","const","const_value","\/emailinsidersummit\/register\/thankyou\/"]],"type","eqi"]]]],"event_param_ops",["list",["map","edit_param",["map","param_name","value","param_value",["map","type","const","const_value","2400.0"]]],["map","edit_param",["map","param_name","currency","param_value",["map","type","const","const_value","USD"]]]]],"tag_id":14},{"function":"__ccd_auto_redact","priority":1,"vtp_instanceDestinationId":"G-FTD94KXZMD","tag_id":13},{"function":"__gct","vtp_trackingId":"G-FTD94KXZMD","vtp_sessionDuration":0,"vtp_googleSignals":["macro",1],"vtp_foreignTld":["macro",2],"vtp_restrictDomain":["macro",3],"vtp_eventSettings":["map"],"tag_id":7},{"function":"__ccd_ga_last","priority":0,"vtp_instanceDestinationId":"G-FTD94KXZMD","tag_id":12}],
  "predicates":[{"function":"_eq","arg0":["macro",0],"arg1":"gtm.js"},{"function":"_eq","arg0":["macro",0],"arg1":"gtm.init"}],
  "rules":[[["if",0],["add",15]],[["if",1],["add",0,16,14,13,12,11,10,9,8,7,6,5,4,3,2,1]]]
},
"runtime":[ [50,"__ccd_auto_redact",[46,"a"],[50,"v",[46,"bk"],[36,[2,[15,"bk"],"replace",[7,[15,"u"],"\\$1"]]]],[50,"w",[46,"bk"],[52,"bl",["c",[15,"bk"]]],[52,"bm",[7]],[65,"bn",[2,[15,"bl"],"split",[7,""]],[46,[53,[52,"bo",[7,["v",[15,"bn"]]]],[52,"bp",["d",[15,"bn"]]],[22,[12,[15,"bp"],[45]],[46,[36,["d",["v",[15,"bk"]]]]]],[22,[21,[15,"bp"],[15,"bn"]],[46,[2,[15,"bo"],"push",[7,[15,"bp"]]],[22,[21,[15,"bn"],[2,[15,"bn"],"toLowerCase",[7]]],[46,[2,[15,"bo"],"push",[7,["d",[2,[15,"bn"],"toLowerCase",[7]]]]]],[46,[22,[21,[15,"bn"],[2,[15,"bn"],"toUpperCase",[7]]],[46,[2,[15,"bo"],"push",[7,["d",[2,[15,"bn"],"toUpperCase",[7]]]]]]]]]]],[22,[18,[17,[15,"bo"],"length"],1],[46,[2,[15,"bm"],"push",[7,[0,[0,"(?:",[2,[15,"bo"],"join",[7,"|"]]],")"]]]],[46,[2,[15,"bm"],"push",[7,[16,[15,"bo"],0]]]]]]]],[36,[2,[15,"bm"],"join",[7,""]]]],[50,"x",[46,"bk","bl","bm"],[52,"bn",["z",[15,"bk"],[15,"bm"]]],[22,[28,[15,"bn"]],[46,[36,[15,"bk"]]]],[22,[28,[17,[15,"bn"],"search"]],[46,[36,[15,"bk"]]]],[41,"bo"],[3,"bo",[17,[15,"bn"],"search"]],[65,"bp",[15,"bl"],[46,[53,[52,"bq",[7,["v",[15,"bp"]],["w",[15,"bp"]]]],[65,"br",[15,"bq"],[46,[53,[52,"bs",[30,[16,[15,"t"],[15,"br"]],[43,[15,"t"],[15,"br"],["b",[0,[0,"([?&]",[15,"br"]],"=)([^&]*)"],"gi"]]]],[3,"bo",[2,[15,"bo"],"replace",[7,[15,"bs"],[0,"$1",[15,"r"]]]]]]]]]]],[22,[20,[15,"bo"],[17,[15,"bn"],"search"]],[46,[36,[15,"bk"]]]],[22,[20,[16,[15,"bo"],0],"&"],[46,[3,"bo",[2,[15,"bo"],"substring",[7,1]]]]],[22,[21,[16,[15,"bo"],0],"?"],[46,[3,"bo",[0,"?",[15,"bo"]]]]],[22,[20,[15,"bo"],"?"],[46,[3,"bo",""]]],[43,[15,"bn"],"search",[15,"bo"]],[36,["ba",[15,"bn"],[15,"bm"]]]],[50,"z",[46,"bk","bl"],[22,[20,[15,"bl"],[17,[15,"s"],"PATH"]],[46,[3,"bk",[0,[15,"y"],[15,"bk"]]]]],[36,["g",[15,"bk"]]]],[50,"ba",[46,"bk","bl"],[41,"bm"],[3,"bm",""],[22,[20,[15,"bl"],[17,[15,"s"],"URL"]],[46,[53,[41,"bn"],[3,"bn",""],[22,[30,[17,[15,"bk"],"username"],[17,[15,"bk"],"password"]],[46,[3,"bn",[0,[15,"bn"],[0,[0,[0,[17,[15,"bk"],"username"],[39,[17,[15,"bk"],"password"],":",""]],[17,[15,"bk"],"password"]],"@"]]]]],[3,"bm",[0,[0,[0,[17,[15,"bk"],"protocol"],"//"],[15,"bn"]],[17,[15,"bk"],"host"]]]]]],[36,[0,[0,[0,[15,"bm"],[17,[15,"bk"],"pathname"]],[17,[15,"bk"],"search"]],[17,[15,"bk"],"hash"]]]],[50,"bb",[46,"bk","bl"],[41,"bm"],[3,"bm",[2,[15,"bk"],"replace",[7,[15,"n"],[15,"r"]]]],[22,[30,[20,[15,"bl"],[17,[15,"s"],"URL"]],[20,[15,"bl"],[17,[15,"s"],"PATH"]]],[46,[53,[52,"bn",["z",[15,"bm"],[15,"bl"]]],[22,[20,[15,"bn"],[44]],[46,[36,[15,"bm"]]]],[52,"bo",[17,[15,"bn"],"search"]],[52,"bp",[2,[15,"bo"],"replace",[7,[15,"o"],[15,"r"]]]],[22,[20,[15,"bo"],[15,"bp"]],[46,[36,[15,"bm"]]]],[43,[15,"bn"],"search",[15,"bp"]],[3,"bm",["ba",[15,"bn"],[15,"bl"]]]]]],[36,[15,"bm"]]],[50,"bc",[46,"bk"],[22,[20,[15,"bk"],[15,"q"]],[46,[36,[17,[15,"s"],"PATH"]]],[46,[22,[21,[2,[15,"p"],"indexOf",[7,[15,"bk"]]],[27,1]],[46,[36,[17,[15,"s"],"URL"]]],[46,[36,[17,[15,"s"],"TEXT"]]]]]]],[50,"bd",[46,"bk","bl"],[41,"bm"],[3,"bm",false],[52,"bn",["f",[15,"bk"]]],[38,[15,"bn"],[46,"string","array","object"],[46,[5,[46,[52,"bo",["bb",[15,"bk"],[15,"bl"]]],[22,[21,[15,"bk"],[15,"bo"]],[46,[36,[15,"bo"]]]],[4]]],[5,[46,[53,[41,"bp"],[3,"bp",0],[63,[7,"bp"],[23,[15,"bp"],[17,[15,"bk"],"length"]],[33,[15,"bp"],[3,"bp",[0,[15,"bp"],1]]],[46,[53,[52,"bq",["bd",[16,[15,"bk"],[15,"bp"]],[17,[15,"s"],"TEXT"]]],[22,[21,[15,"bq"],[44]],[46,[43,[15,"bk"],[15,"bp"],[15,"bq"]],[3,"bm",true]]]]]]],[4]]],[5,[46,[54,"bp",[15,"bk"],[46,[53,[52,"bq",["bd",[16,[15,"bk"],[15,"bp"]],[17,[15,"s"],"TEXT"]]],[22,[21,[15,"bq"],[44]],[46,[43,[15,"bk"],[15,"bp"],[15,"bq"]],[3,"bm",true]]]]]],[4]]]]],[36,[39,[15,"bm"],[15,"bk"],[44]]]],[50,"bj",[46,"bk","bl"],[52,"bm",[30,[2,[15,"bk"],"getMetadata",[7,[15,"bi"]]],[7]]],[22,[20,[2,[15,"bm"],"indexOf",[7,[15,"bl"]]],[27,1]],[46,[2,[15,"bm"],"push",[7,[15,"bl"]]]]],[2,[15,"bk"],"setMetadata",[7,[15,"bi"],[15,"bm"]]]],[52,"b",["require","internal.createRegex"]],[52,"c",["require","decodeUriComponent"]],[52,"d",["require","encodeUriComponent"]],[52,"e",[13,[41,"$0"],[3,"$0",["require","internal.getFlags"]],["$0"]]],[52,"f",["require","getType"]],[52,"g",["require","parseUrl"]],[52,"h",["require","internal.registerCcdCallback"]],[52,"i",[17,[15,"a"],"instanceDestinationId"]],[52,"j",[17,[15,"a"],"redactEmail"]],[52,"k",[17,[15,"a"],"redactQueryParams"]],[52,"l",[39,[15,"k"],[2,[15,"k"],"split",[7,","]],[7]]],[52,"m","is_sgtm_prehit"],[22,[1,[28,[17,[15,"l"],"length"]],[28,[15,"j"]]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[52,"n",["b","[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}","gi"]],[52,"o",["b",[0,"([A-Z0-9._-]|%25|%2B)+%40[A-Z0-9.-]","+\\.[A-Z]{2,}"],"gi"]],[52,"p",[7,"page_location","page_referrer","page_path","link_url","video_url","form_destination"]],[52,"q","page_path"],[52,"r","(redacted)"],[52,"s",[8,"TEXT",0,"URL",1,"PATH",2]],[52,"t",[8]],[52,"u",["b","([\\\\^$.|?*+(){}]|\\[|\\[)","g"]],[52,"y","http://."],[52,"be",15],[52,"bf",16],[52,"bg",23],[52,"bh",24],[52,"bi","event_usage"],["h",[15,"i"],[51,"",[7,"bk"],[22,[15,"j"],[46,[53,[52,"bl",[2,[15,"bk"],"getHitKeys",[7]]],[65,"bm",[15,"bl"],[46,[53,[22,[20,[15,"bm"],"_sst_parameters"],[46,[6]]],[52,"bn",[2,[15,"bk"],"getHitData",[7,[15,"bm"]]]],[22,[28,[15,"bn"]],[46,[6]]],[52,"bo",["bc",[15,"bm"]]],[52,"bp",["bd",[15,"bn"],[15,"bo"]]],[22,[21,[15,"bp"],[44]],[46,[2,[15,"bk"],"setHitData",[7,[15,"bm"],[15,"bp"]]],["bj",[15,"bk"],[39,[2,[15,"bk"],"getMetadata",[7,[15,"m"]]],[15,"bg"],[15,"be"]]]]]]]]]]],[22,[17,[15,"l"],"length"],[46,[65,"bl",[15,"p"],[46,[53,[52,"bm",[2,[15,"bk"],"getHitData",[7,[15,"bl"]]]],[22,[28,[15,"bm"]],[46,[6]]],[52,"bn",[39,[20,[15,"bl"],[15,"q"]],[17,[15,"s"],"PATH"],[17,[15,"s"],"URL"]]],[52,"bo",["x",[15,"bm"],[15,"l"],[15,"bn"]]],[22,[21,[15,"bo"],[15,"bm"]],[46,[2,[15,"bk"],"setHitData",[7,[15,"bl"],[15,"bo"]]],["bj",[15,"bk"],[39,[2,[15,"bk"],"getMetadata",[7,[15,"m"]]],[15,"bh"],[15,"bf"]]]]]]]]]]]],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__ccd_conversion_marking",[46,"a"],[22,[30,[28,[17,[15,"a"],"conversionRules"]],[20,[17,[17,[15,"a"],"conversionRules"],"length"],0]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[52,"b",["require","internal.copyPreHit"]],[52,"c",["require","internal.evaluateBooleanExpression"]],[52,"d",["require","internal.registerCcdCallback"]],[52,"e","is_conversion"],[52,"f","is_first_visit"],[52,"g","is_first_visit_conversion"],[52,"h","is_session_start"],[52,"i","is_session_start_conversion"],[52,"j","first_visit"],[52,"k","session_start"],[41,"l"],[41,"m"],["d",[17,[15,"a"],"instanceDestinationId"],[51,"",[7,"n"],[52,"o",[8,"preHit",[15,"n"]]],[65,"p",[17,[15,"a"],"conversionRules"],[46,[22,["c",[17,[15,"p"],"matchingRules"],[15,"o"]],[46,[2,[15,"n"],"setMetadata",[7,[15,"e"],true]],[4]]]]],[22,[2,[15,"n"],"getMetadata",[7,[15,"f"]]],[46,[22,[28,[15,"l"]],[46,[53,[52,"p",["b",[15,"n"],[8,"omitHitData",true,"omitMetadata",true]]],[2,[15,"p"],"setEventName",[7,[15,"j"]]],[3,"l",[8,"preHit",[15,"p"]]]]]],[65,"p",[17,[15,"a"],"conversionRules"],[46,[22,["c",[17,[15,"p"],"matchingRules"],[15,"l"]],[46,[2,[15,"n"],"setMetadata",[7,[15,"g"],true]],[4]]]]]]],[22,[2,[15,"n"],"getMetadata",[7,[15,"h"]]],[46,[22,[28,[15,"m"]],[46,[53,[52,"p",["b",[15,"n"],[8,"omitHitData",true,"omitMetadata",true]]],[2,[15,"p"],"setEventName",[7,[15,"k"]]],[3,"m",[8,"preHit",[15,"p"]]]]]],[65,"p",[17,[15,"a"],"conversionRules"],[46,[22,["c",[17,[15,"p"],"matchingRules"],[15,"m"]],[46,[2,[15,"n"],"setMetadata",[7,[15,"i"],true]],[4]]]]]]]]],[2,[15,"a"],"gtmOnSuccess",[7]],[36]]
 ,[50,"__ccd_em_download",[46,"a"],[50,"r",[46,"x"],[36,[1,[15,"x"],[21,[2,[2,[15,"x"],"toLowerCase",[7]],"match",[7,[15,"q"]]],[45]]]]],[50,"s",[46,"x"],[52,"y",[2,[17,[15,"x"],"pathname"],"split",[7,"."]]],[52,"z",[39,[18,[17,[15,"y"],"length"],1],[16,[15,"y"],[37,[17,[15,"y"],"length"],1]],""]],[36,[16,[2,[15,"z"],"split",[7,"/"]],0]]],[50,"t",[46,"x"],[36,[39,[12,[2,[17,[15,"x"],"pathname"],"substring",[7,0,1]],"/"],[17,[15,"x"],"pathname"],[0,"/",[17,[15,"x"],"pathname"]]]]],[50,"u",[46,"x"],[41,"y"],[3,"y",""],[22,[1,[15,"x"],[17,[15,"x"],"href"]],[46,[53,[41,"z"],[3,"z",[2,[17,[15,"x"],"href"],"indexOf",[7,"#"]]],[3,"y",[39,[23,[15,"z"],0],[17,[15,"x"],"href"],[2,[17,[15,"x"],"href"],"substring",[7,0,[15,"z"]]]]]]]],[36,[15,"y"]]],[50,"w",[46,"x"],[52,"y",[8]],[43,[15,"y"],[15,"j"],true],[43,[15,"y"],[15,"f"],true],[43,[15,"x"],"eventMetadata",[15,"y"]]],[52,"b",[13,[41,"$0"],[3,"$0",["require","internal.getFlags"]],["$0"]]],[52,"c",["require","internal.getProductSettingsParameter"]],[52,"d",["require","templateStorage"]],[52,"e",[15,"__module_ccdEmDownloadActivity"]],[52,"f","speculative"],[52,"g","ae_block_downloads"],[52,"h","file_download"],[52,"i","isRegistered"],[52,"j","em_event"],[52,"k",[17,[15,"a"],"instanceDestinationId"]],[22,["c",[15,"k"],[15,"g"]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[2,[15,"e"],"registerDownloadActivityCallback",[7,[15,"k"],[17,[15,"a"],"includeParams"]]],[22,[2,[15,"d"],"getItem",[7,[15,"i"]]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[52,"l",["require","internal.addDataLayerEventListener"]],[52,"m",["require","internal.enableAutoEventOnLinkClick"]],[52,"n",["require","internal.getDestinationIds"]],[52,"o",["require","parseUrl"]],[52,"p",["require","internal.sendGtagEvent"]],[52,"q",[0,"^(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|","mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)$"]],[52,"v",["m",[8,"checkValidation",true]]],[22,[28,[15,"v"]],[46,[2,[15,"a"],"gtmOnFailure",[7]],[36]]],[2,[15,"d"],"setItem",[7,[15,"i"],true]],["l","gtm.linkClick",[51,"",[7,"x","y"],["y"],[52,"z",[8,"eventId",[16,[15,"x"],"gtm.uniqueEventId"]]],[22,[16,[15,"b"],"enableDeferAllEnhancedMeasurement"],[46,[43,[15,"z"],"deferrable",true]]],[52,"ba",[16,[15,"x"],"gtm.elementUrl"]],[52,"bb",["o",[15,"ba"]]],[22,[28,[15,"bb"]],[46,[36]]],[52,"bc",["s",[15,"bb"]]],[22,[28,["r",[15,"bc"]]],[46,[36]]],[52,"bd",[8,"link_id",[16,[15,"x"],"gtm.elementId"],"link_url",["u",[15,"bb"]],"link_text",[16,[15,"x"],"gtm.elementText"],"file_name",["t",[15,"bb"]],"file_extension",[15,"bc"]]],["w",[15,"z"]],["p",["n"],[15,"h"],[15,"bd"],[15,"z"]]],[15,"v"]],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__ccd_em_outbound_click",[46,"a"],[50,"s",[46,"y"],[22,[28,[15,"y"]],[46,[36,[44]]]],[41,"z"],[3,"z",""],[22,[1,[15,"y"],[17,[15,"y"],"href"]],[46,[53,[41,"ba"],[3,"ba",[2,[17,[15,"y"],"href"],"indexOf",[7,"#"]]],[3,"z",[39,[23,[15,"ba"],0],[17,[15,"y"],"href"],[2,[17,[15,"y"],"href"],"substring",[7,0,[15,"ba"]]]]]]]],[36,[15,"z"]]],[50,"t",[46,"y"],[22,[28,[15,"y"]],[46,[36,[44]]]],[41,"z"],[3,"z",[17,[15,"y"],"hostname"]],[52,"ba",[2,[15,"z"],"match",[7,"^www\\d*\\."]]],[22,[1,[15,"ba"],[16,[15,"ba"],0]],[46,[3,"z",[2,[15,"z"],"substring",[7,[17,[16,[15,"ba"],0],"length"]]]]]],[36,[15,"z"]]],[50,"u",[46,"y"],[22,[28,[15,"y"]],[46,[36,false]]],[52,"z",[2,[17,[15,"y"],"hostname"],"toLowerCase",[7]]],[41,"ba"],[3,"ba",[2,["t",["q",["p"]]],"toLowerCase",[7]]],[41,"bb"],[3,"bb",[37,[17,[15,"z"],"length"],[17,[15,"ba"],"length"]]],[22,[1,[18,[15,"bb"],0],[29,[2,[15,"ba"],"charAt",[7,0]],"."]],[46,[32,[15,"bb"],[3,"bb",[37,[15,"bb"],1]]],[3,"ba",[0,".",[15,"ba"]]]]],[22,[1,[19,[15,"bb"],0],[12,[2,[15,"z"],"indexOf",[7,[15,"ba"],[15,"bb"]]],[15,"bb"]]],[46,[36,false]]],[36,true]],[50,"x",[46,"y"],[52,"z",[8]],[43,[15,"z"],[15,"j"],true],[43,[15,"z"],[15,"f"],true],[43,[15,"y"],"eventMetadata",[15,"z"]]],[52,"b",[13,[41,"$0"],[3,"$0",["require","internal.getFlags"]],["$0"]]],[52,"c",["require","internal.getProductSettingsParameter"]],[52,"d",["require","templateStorage"]],[52,"e",[15,"__module_ccdEmOutboundClickActivity"]],[52,"f","speculative"],[52,"g","ae_block_outbound_click"],[52,"h","click"],[52,"i","isRegistered"],[52,"j","em_event"],[52,"k",[17,[15,"a"],"instanceDestinationId"]],[22,["c",[15,"k"],[15,"g"]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[2,[15,"e"],"registerOutbackClickActivityCallback",[7,[15,"k"],[17,[15,"a"],"includeParams"]]],[22,[2,[15,"d"],"getItem",[7,[15,"i"]]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[52,"l",["require","internal.addDataLayerEventListener"]],[52,"m",["require","internal.enableAutoEventOnLinkClick"]],[52,"n",["require","internal.getDestinationIds"]],[52,"o",["require","internal.getRemoteConfigParameter"]],[52,"p",["require","getUrl"]],[52,"q",["require","parseUrl"]],[52,"r",["require","internal.sendGtagEvent"]],[52,"v",["o",[15,"k"],"cross_domain_conditions"]],[52,"w",["m",[8,"affiliateDomains",[15,"v"],"checkValidation",true,"waitForTags",false]]],[22,[28,[15,"w"]],[46,[2,[15,"a"],"gtmOnFailure",[7]],[36]]],[2,[15,"d"],"setItem",[7,[15,"i"],true]],["l","gtm.linkClick",[51,"",[7,"y","z"],[52,"ba",["q",[16,[15,"y"],"gtm.elementUrl"]]],[22,[28,["u",[15,"ba"]]],[46,["z"],[36]]],[52,"bb",[8,"link_id",[16,[15,"y"],"gtm.elementId"],"link_classes",[16,[15,"y"],"gtm.elementClasses"],"link_url",["s",[15,"ba"]],"link_domain",["t",[15,"ba"]],"outbound",true]],[43,[15,"bb"],"event_callback",[15,"z"]],[52,"bc",[8,"eventId",[16,[15,"y"],"gtm.uniqueEventId"]]],[22,[16,[15,"b"],"enableDeferAllEnhancedMeasurement"],[46,[43,[15,"bc"],"deferrable",true]]],["x",[15,"bc"]],["r",["n"],[15,"h"],[15,"bb"],[15,"bc"]]],[15,"w"]],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__ccd_em_page_view",[46,"a"],[50,"s",[46,"t"],[52,"u",[8]],[43,[15,"u"],[15,"k"],true],[43,[15,"u"],[15,"g"],true],[43,[15,"t"],"eventMetadata",[15,"u"]]],[22,[28,[17,[15,"a"],"historyEvents"]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[52,"b",[13,[41,"$0"],[3,"$0",["require","internal.getFlags"]],["$0"]]],[52,"c",["require","internal.getProductSettingsParameter"]],[52,"d",["require","internal.setRemoteConfigParameter"]],[52,"e",["require","templateStorage"]],[52,"f",[15,"__module_ccdEmPageViewActivity"]],[52,"g","speculative"],[52,"h","ae_block_history"],[52,"i","page_view"],[52,"j","isRegistered"],[52,"k","em_event"],[52,"l",[17,[15,"a"],"instanceDestinationId"]],[22,["c",[15,"l"],[15,"h"]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[2,[15,"f"],"registerPageViewActivityCallback",[7,[15,"l"]]],[22,[2,[15,"e"],"getItem",[7,[15,"j"]]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[52,"m",["require","internal.addDataLayerEventListener"]],[52,"n",["require","internal.enableAutoEventOnHistoryChange"]],[52,"o",["require","internal.getDestinationIds"]],[52,"p",["require","internal.sendGtagEvent"]],[52,"q",[8,"interval",1000]],[22,[16,[15,"b"],"enableV1HistoryEventInApi"],[46,[43,[15,"q"],"useV2EventName",true]]],[52,"r",["n",[15,"q"]]],[22,[28,[15,"r"]],[46,[2,[15,"a"],"gtmOnFailure",[7]],[36]]],[2,[15,"e"],"setItem",[7,[15,"j"],true]],["m","gtm.historyChange-v2",[51,"",[7,"t","u"],["u"],[52,"v",[16,[15,"t"],"gtm.oldUrl"]],[22,[20,[16,[15,"t"],"gtm.newUrl"],[15,"v"]],[46,[36]]],[52,"w",[16,[15,"t"],"gtm.historyChangeSource"]],[22,[1,[1,[21,[15,"w"],"pushState"],[21,[15,"w"],"popstate"]],[21,[15,"w"],"replaceState"]],[46,[36]]],[52,"x",[8]],[22,[17,[15,"a"],"includeParams"],[46,[43,[15,"x"],"page_location",[16,[15,"t"],"gtm.newUrl"]],[43,[15,"x"],"page_referrer",[15,"v"]]]],[52,"y",[8,"eventId",[16,[15,"t"],"gtm.uniqueEventId"]]],[22,[16,[15,"b"],"enableDeferAllEnhancedMeasurement"],[46,[43,[15,"y"],"deferrable",true]]],["s",[15,"y"]],["p",["o"],[15,"i"],[15,"x"],[15,"y"]]],[15,"r"]],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__ccd_em_scroll",[46,"a"],[50,"q",[46,"r"],[52,"s",[8]],[43,[15,"s"],[15,"j"],true],[43,[15,"s"],[15,"f"],true],[43,[15,"r"],"eventMetadata",[15,"s"]]],[52,"b",[13,[41,"$0"],[3,"$0",["require","internal.getFlags"]],["$0"]]],[52,"c",["require","internal.getProductSettingsParameter"]],[52,"d",["require","templateStorage"]],[52,"e",[15,"__module_ccdEmScrollActivity"]],[52,"f","speculative"],[52,"g","ae_block_scroll"],[52,"h","scroll"],[52,"i","isRegistered"],[52,"j","em_event"],[52,"k",[17,[15,"a"],"instanceDestinationId"]],[22,["c",[15,"k"],[15,"g"]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[2,[15,"e"],"registerScrollActivityCallback",[7,[15,"k"],[17,[15,"a"],"includeParams"]]],[22,[2,[15,"d"],"getItem",[7,[15,"i"]]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[52,"l",["require","internal.addDataLayerEventListener"]],[52,"m",["require","internal.enableAutoEventOnScroll"]],[52,"n",["require","internal.getDestinationIds"]],[52,"o",["require","internal.sendGtagEvent"]],[52,"p",["m",[8,"verticalThresholdUnits","PERCENT","verticalThresholds",90]]],[22,[28,[15,"p"]],[46,[2,[15,"a"],"gtmOnFailure",[7]],[36]]],[2,[15,"d"],"setItem",[7,[15,"i"],true]],["l","gtm.scrollDepth",[51,"",[7,"r","s"],["s"],[52,"t",[8,"eventId",[16,[15,"r"],"gtm.uniqueEventId"]]],[22,[16,[15,"b"],"enableDeferAllEnhancedMeasurement"],[46,[43,[15,"t"],"deferrable",true]]],[52,"u",[8,"percent_scrolled",[16,[15,"r"],"gtm.scrollThreshold"]]],["q",[15,"t"]],["o",["n"],[15,"h"],[15,"u"],[15,"t"]]],[15,"p"]],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__ccd_em_site_search",[46,"a"],[52,"b",["require","getQueryParameters"]],[52,"c",["require","internal.sendGtagEvent"]],[52,"d",["require","getContainerVersion"]],[52,"e",[15,"__module_ccdEmSiteSearchActivity"]],[52,"f",[2,[15,"e"],"getSearchTerm",[7,[17,[15,"a"],"searchQueryParams"],[15,"b"]]]],[52,"g",[30,[17,[15,"a"],"instanceDestinationId"],[17,["d"],"containerId"]]],[52,"h",[8,"deferrable",true,"eventId",[17,[15,"a"],"gtmEventId"],"eventMetadata",[8,"em_event",true]]],[22,[15,"f"],[46,[53,[52,"i",[39,[28,[28,[17,[15,"a"],"includeParams"]]],[2,[15,"e"],"buildEventParams",[7,[15,"f"],[17,[15,"a"],"additionalQueryParams"],[15,"b"]]],[8]]],["c",[15,"g"],"view_search_results",[15,"i"],[15,"h"]]]]],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__ccd_ga_first",[46,"a"],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__ccd_ga_last",[46,"a"],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__ccd_ga_regscope",[46,"a"],[52,"b",[15,"__module_ccdGaRegionScopedSettings"]],[2,[15,"b"],"applyRegionScopedSettings",[7,[15,"a"]]],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__ogt_1p_data_v2",[46,"a"],[50,"j",[46,"m","n","o"],[22,[20,[16,[15,"n"],"type"],[15,"o"]],[46,[22,[28,[15,"m"]],[46,[3,"m",[8]]]],[22,[28,[16,[15,"m"],[15,"o"]]],[46,[43,[15,"m"],[15,"o"],[16,[15,"n"],"userData"]]]]]],[36,[15,"m"]]],[50,"k",[46,"m","n"],[52,"o",[16,[15,"a"],[15,"m"]]],[41,"p"],[22,[20,[15,"o"],"CSS_SELECTOR"],[46,[3,"p","css_selector"]],[46,[22,[20,[15,"o"],"JS_VAR"],[46,[3,"p","js_variable"]]]]],[36,[8,"selector_type",[15,"p"],"value",[16,[15,"a"],[15,"n"]]]]],[50,"l",[46,"m","n","o","p"],[22,[28,[16,[15,"a"],[15,"p"]]],[46,[36]]],[43,[15,"m"],[15,"n"],["k",[15,"o"],[15,"p"]]]],[22,[28,[17,[15,"a"],"isEnabled"]],[46,[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[52,"b",[13,[41,"$0"],[3,"$0",["require","internal.getFlags"]],["$0"]]],[52,"c",["require","internal.getDestinationIds"]],[52,"d",["require","internal.getProductSettingsParameter"]],[52,"e",["require","internal.detectUserProvidedData"]],[52,"f",["require","internal.setRemoteConfigParameter"]],[52,"g",["require","internal.registerCcdCallback"]],[52,"h",[30,["c"],[7]]],[52,"i",[8,"enable_code",true]],[22,[17,[15,"a"],"isAutoEnabled"],[46,[53,[52,"m",[7]],[22,[1,[17,[15,"a"],"autoCollectExclusionSelectors"],[17,[17,[15,"a"],"autoCollectExclusionSelectors"],"length"]],[46,[53,[41,"o"],[3,"o",0],[63,[7,"o"],[23,[15,"o"],[17,[17,[15,"a"],"autoCollectExclusionSelectors"],"length"]],[33,[15,"o"],[3,"o",[0,[15,"o"],1]]],[46,[53,[52,"p",[17,[16,[17,[15,"a"],"autoCollectExclusionSelectors"],[15,"o"]],"exclusionSelector"]],[22,[15,"p"],[46,[2,[15,"m"],"push",[7,[15,"p"]]]]]]]]]]],[52,"n",[39,[17,[15,"a"],"isAutoCollectPiiEnabledFlag"],[17,[15,"a"],"autoEmailEnabled"],true]],[43,[15,"i"],"auto_detect",[8,"email",[15,"n"],"phone",[17,[15,"a"],"autoPhoneEnabled"],"address",[17,[15,"a"],"autoAddressEnabled"],"exclude_element_selectors",[15,"m"]]]]]],[22,[17,[15,"a"],"isManualEnabled"],[46,[53,[52,"m",[8]],[22,[17,[15,"a"],"manualEmailEnabled"],[46,["l",[15,"m"],"email","emailType","emailValue"]]],[22,[17,[15,"a"],"manualPhoneEnabled"],[46,["l",[15,"m"],"phone","phoneType","phoneValue"]]],[22,[17,[15,"a"],"manualAddressEnabled"],[46,[53,[52,"n",[8]],["l",[15,"n"],"first_name","firstNameType","firstNameValue"],["l",[15,"n"],"last_name","lastNameType","lastNameValue"],["l",[15,"n"],"street","streetType","streetValue"],["l",[15,"n"],"city","cityType","cityValue"],["l",[15,"n"],"region","regionType","regionValue"],["l",[15,"n"],"country","countryType","countryValue"],["l",[15,"n"],"postal_code","postalCodeType","postalCodeValue"],[43,[15,"m"],"name_and_address",[7,[15,"n"]]]]]],[43,[15,"i"],"selectors",[15,"m"]]]]],[65,"m",[15,"h"],[46,[53,[41,"n"],[3,"n",[15,"i"]],[22,[1,[20,[2,[15,"m"],"indexOf",[7,"G-"]],0],[28,[16,[15,"b"],"enableEuidAutoMode"]]],[46,[53,[52,"q",[8,"enable_code",true,"selectors",[16,[15,"i"],"selectors"]]],[3,"n",[15,"q"]]]]],["f",[15,"m"],"user_data_settings",[15,"n"]],[52,"o",[16,[15,"n"],"auto_detect"]],[22,[28,[15,"o"]],[46,[6]]],[52,"p",[51,"",[7,"q"],[52,"r",[2,[15,"q"],"getMetadata",[7,"user_data_from_automatic"]]],[22,[15,"r"],[46,[36,[15,"r"]]]],[52,"s",["e",[8,"excludeElementSelectors",[16,[15,"o"],"exclude_element_selectors"],"fieldFilters",[8,"email",[16,[15,"o"],"email"],"phone",[16,[15,"o"],"phone"],"address",[16,[15,"o"],"address"]]]]],[52,"t",[1,[15,"s"],[16,[15,"s"],"elements"]]],[52,"u",[8]],[22,[1,[15,"t"],[18,[17,[15,"t"],"length"],0]],[46,[53,[41,"v"],[53,[41,"w"],[3,"w",0],[63,[7,"w"],[23,[15,"w"],[17,[15,"t"],"length"]],[33,[15,"w"],[3,"w",[0,[15,"w"],1]]],[46,[53,[52,"x",[16,[15,"t"],[15,"w"]]],["j",[15,"u"],[15,"x"],"email"],[22,[16,[15,"b"],"enableAutoPiiOnPhoneAndAddress"],[46,["j",[15,"u"],[15,"x"],"phone_number"],[3,"v",["j",[15,"v"],[15,"x"],"first_name"]],[3,"v",["j",[15,"v"],[15,"x"],"last_name"]],[3,"v",["j",[15,"v"],[15,"x"],"country"]],[3,"v",["j",[15,"v"],[15,"x"],"postal_code"]]]]]]]],[22,[1,[15,"v"],[28,[16,[15,"u"],"address"]]],[46,[43,[15,"u"],"address",[15,"v"]]]]]]],[2,[15,"q"],"setMetadata",[7,"user_data_from_automatic",[15,"u"]]],[36,[15,"u"]]]],["g",[15,"m"],[51,"",[7,"q"],[2,[15,"q"],"setMetadata",[7,"user_data_from_automatic_getter",[15,"p"]]]]]]]],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__ogt_event_create",[46,"a"],[50,"r",[46,"s","t"],[22,[28,[2,[15,"c"],"preHitMatchesRule",[7,[15,"s"],[16,[15,"t"],[15,"n"]],[30,[16,[15,"t"],[15,"o"]],[7]]]]],[46,[36,false]]],[52,"u",[16,[15,"t"],[15,"p"]]],[22,[2,[15,"c"],"isEventNameFalsyOrReserved",[7,[15,"u"]]],[46,[36]]],[52,"v",[28,[16,[15,"t"],[15,"q"]]]],[52,"w",[30,[2,[15,"s"],"getMetadata",[7,[15,"j"]]],[7]]],[22,[20,[2,[15,"w"],"indexOf",[7,[15,"k"]]],[27,1]],[46,[2,[15,"w"],"push",[7,[15,"k"]]]]],[2,[15,"s"],"setMetadata",[7,[15,"j"],[15,"w"]]],[52,"x",["b",[15,"s"],[8,"omitHitData",[15,"v"],"omitEventContext",[15,"v"],"omitMetadata",true]]],[2,[15,"c"],"applyParamOperations",[7,[15,"x"],[15,"t"]]],[2,[15,"x"],"setEventName",[7,[15,"u"]]],[2,[15,"x"],"setMetadata",[7,[15,"m"],true]],[2,[15,"x"],"setMetadata",[7,[15,"j"],[7,[15,"l"]]]],["d",[15,"x"]]],[52,"b",["require","internal.copyPreHit"]],[52,"c",[15,"__module_eventEditingAndSynthesis"]],[52,"d",["require","internal.processAsNewEvent"]],[52,"e",["require","internal.registerCcdCallback"]],[52,"f",["require","templateStorage"]],[52,"g",[17,[15,"a"],"instanceDestinationId"]],[41,"h"],[3,"h",[2,[15,"f"],"getItem",[7,[15,"g"]]]],[41,"i"],[3,"i",[28,[28,[15,"h"]]]],[22,[15,"i"],[46,[2,[15,"h"],"push",[7,[17,[15,"a"],"precompiledRule"]]],[2,[15,"a"],"gtmOnSuccess",[7]],[36]]],[2,[15,"f"],"setItem",[7,[15,"g"],[7,[17,[15,"a"],"precompiledRule"]]]],[52,"j","event_usage"],[52,"k",1],[52,"l",11],[52,"m","is_syn"],[52,"n","event_name_predicate"],[52,"o","conditions"],[52,"p","new_event_name"],[52,"q","merge_source_event_params"],["e",[15,"g"],[51,"",[7,"s"],[22,[2,[15,"s"],"getMetadata",[7,[15,"m"]]],[46,[36]]],[52,"t",[2,[15,"f"],"getItem",[7,[15,"g"]]]],[66,"u",[15,"t"],[46,["r",[15,"s"],[15,"u"]]]]]],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__ogt_google_signals",[46,"a"],[52,"b",["require","internal.setProductSettingsParameter"]],[52,"c",["require","getContainerVersion"]],[52,"d",[13,[41,"$0"],[3,"$0",["require","internal.getFlags"]],["$0"]]],[52,"e",[30,[17,[15,"a"],"instanceDestinationId"],[17,["c"],"containerId"]]],["b",[15,"e"],"google_signals",[20,[17,[15,"a"],"serverMacroResult"],1]],["b",[15,"e"],"google_ono",[20,[17,[15,"a"],"serverMacroResult"],2]],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[50,"__set_product_settings",[46,"a"],[2,[15,"a"],"gtmOnSuccess",[7]]]
 ,[52,"__module_eventEditingAndSynthesis",[13,[41,"$0"],[3,"$0",[51,"",[7],[50,"a",[46],[50,"bc",[46,"bp","bq"],[52,"br",[30,[16,[15,"bq"],[15,"i"]],[7]]],[66,"bs",[15,"br"],[46,[22,[16,[15,"bs"],[15,"j"]],[46,[53,[52,"bt",[16,[16,[15,"bs"],[15,"j"]],[15,"l"]]],[52,"bu",["bh",[15,"bp"],[16,[16,[15,"bs"],[15,"j"]],[15,"m"]]]],[2,[15,"bp"],"setHitData",[7,[15,"bt"],["bd",[15,"bu"]]]]]],[46,[22,[16,[15,"bs"],[15,"k"]],[46,[53,[52,"bt",[16,[16,[15,"bs"],[15,"k"]],[15,"l"]]],[2,[15,"bp"],"setHitData",[7,[15,"bt"],[44]]]]]]]]]]],[50,"bd",[46,"bp"],[22,[28,[15,"bp"]],[46,[36,[15,"bp"]]]],[52,"bq",["c",[15,"bp"]]],[52,"br",[21,[15,"bq"],[15,"bq"]]],[22,[15,"br"],[46,[36,[15,"bp"]]]],[36,[15,"bq"]]],[50,"be",[46,"bp","bq","br"],[22,[1,[15,"bq"],[28,["bg",[15,"bp"],[15,"bq"]]]],[46,[36,false]]],[22,[30,[28,[15,"br"]],[20,[17,[15,"br"],"length"],0]],[46,[36,true]]],[53,[41,"bs"],[3,"bs",0],[63,[7,"bs"],[23,[15,"bs"],[17,[15,"br"],"length"]],[33,[15,"bs"],[3,"bs",[0,[15,"bs"],1]]],[46,[53,[52,"bt",[30,[16,[16,[15,"br"],[15,"bs"]],[15,"q"]],[7]]],[22,["bf",[15,"bp"],[15,"bt"]],[46,[36,true]]]]]]],[36,false]],[50,"bf",[46,"bp","bq"],[53,[41,"br"],[3,"br",0],[63,[7,"br"],[23,[15,"br"],[17,[15,"bq"],"length"]],[33,[15,"br"],[3,"br",[0,[15,"br"],1]]],[46,[53,[52,"bs",[16,[15,"bq"],[15,"br"]]],[52,"bt",["bg",[15,"bp"],[15,"bs"],false]],[22,[16,[15,"b"],"enableUrlDecodeEventUsage"],[46,[53,[52,"bu",[16,[30,[16,[15,"bs"],[15,"t"]],[7]],0]],[22,[1,[1,[15,"bu"],[20,[16,[15,"bu"],[15,"u"]],[15,"p"]]],[21,[2,[15,"bb"],"indexOf",[7,[16,[16,[15,"bu"],[15,"p"]],[15,"o"]]]],[27,1]]],[46,[53,[52,"bv",["bg",[15,"bp"],[15,"bs"],true]],[22,[21,[15,"bt"],[15,"bv"]],[46,[53,[52,"bw",[30,[2,[15,"bp"],"getMetadata",[7,[15,"y"]]],[7]]],[2,[15,"bw"],"push",[7,[39,[15,"bt"],[15,"ba"],[15,"z"]]]],[2,[15,"bp"],"setMetadata",[7,[15,"y"],[15,"bw"]]]]]]]]]]]],[22,[28,[15,"bt"]],[46,[36,false]]]]]]],[36,true]],[50,"bg",[46,"bp","bq","br"],[52,"bs",[30,[16,[15,"bq"],[15,"t"]],[7]]],[41,"bt"],[3,"bt",["bh",[15,"bp"],[16,[15,"bs"],0]]],[41,"bu"],[3,"bu",["bh",[15,"bp"],[16,[15,"bs"],1]]],[22,[1,[15,"br"],[15,"bt"]],[46,[3,"bt",[30,["h",[15,"bt"]],[15,"bt"]]]]],[22,[1,[16,[15,"b"],"enableDecodeUri"],[15,"bu"]],[46,[53,[52,"ca",[16,[30,[16,[15,"bq"],[15,"t"]],[7]],0]],[22,[1,[1,[15,"ca"],[20,[16,[15,"ca"],[15,"u"]],[15,"p"]]],[21,[2,[15,"bb"],"indexOf",[7,[16,[16,[15,"ca"],[15,"p"]],[15,"o"]]]],[27,1]]],[46,[53,[52,"cb",[2,[15,"bu"],"indexOf",[7,"?"]]],[22,[20,[15,"cb"],[27,1]],[46,[3,"bu",[30,["h",[15,"bu"]],[15,"bu"]]]],[46,[53,[52,"cc",[2,[15,"bu"],"substring",[7,0,[15,"cb"]]]],[3,"bu",[0,[30,["h",[15,"cc"]],[15,"cc"]],[2,[15,"bu"],"substring",[7,[15,"cb"]]]]]]]]]]]]]],[52,"bv",[16,[15,"bq"],[15,"s"]]],[22,[30,[30,[30,[20,[15,"bv"],"eqi"],[20,[15,"bv"],"swi"]],[20,[15,"bv"],"ewi"]],[20,[15,"bv"],"cni"]],[46,[22,[15,"bt"],[46,[3,"bt",[2,["e",[15,"bt"]],"toLowerCase",[7]]]]],[22,[15,"bu"],[46,[3,"bu",[2,["e",[15,"bu"]],"toLowerCase",[7]]]]]]],[41,"bw"],[3,"bw",false],[38,[15,"bv"],[46,"eq","eqi","sw","swi","ew","ewi","cn","cni","lt","le","gt","ge","re","rei"],[46,[5,[46]],[5,[46,[3,"bw",[20,["e",[15,"bt"]],["e",[15,"bu"]]]],[4]]],[5,[46]],[5,[46,[3,"bw",[20,[2,["e",[15,"bt"]],"indexOf",[7,["e",[15,"bu"]]]],0]],[4]]],[5,[46]],[5,[46,[41,"bx"],[3,"bx",["e",[15,"bt"]]],[41,"by"],[3,"by",["e",[15,"bu"]]],[52,"bz",[37,[17,[15,"bx"],"length"],[17,[15,"by"],"length"]]],[3,"bw",[1,[19,[15,"bz"],0],[20,[2,[15,"bx"],"indexOf",[7,[15,"by"],[15,"bz"]]],[15,"bz"]]]],[4]]],[5,[46]],[5,[46,[3,"bw",[19,[2,["e",[15,"bt"]],"indexOf",[7,["e",[15,"bu"]]]],0]],[4]]],[5,[46,[3,"bw",[23,["c",[15,"bt"]],["c",[15,"bu"]]]],[4]]],[5,[46,[3,"bw",[24,["c",[15,"bt"]],["c",[15,"bu"]]]],[4]]],[5,[46,[3,"bw",[18,["c",[15,"bt"]],["c",[15,"bu"]]]],[4]]],[5,[46,[3,"bw",[19,["c",[15,"bt"]],["c",[15,"bu"]]]],[4]]],[5,[46,[22,[21,[15,"bt"],[44]],[46,[53,[52,"ca",["f",[15,"bu"]]],[22,[15,"ca"],[46,[3,"bw",["g",[15,"ca"],[15,"bt"]]]]]]]],[4]]],[5,[46,[22,[21,[15,"bt"],[44]],[46,[53,[52,"ca",["f",[15,"bu"],"i"]],[22,[15,"ca"],[46,[3,"bw",["g",[15,"ca"],[15,"bt"]]]]]]]],[4]]],[9,[46]]]],[22,[28,[28,[16,[15,"bq"],[15,"r"]]]],[46,[36,[28,[15,"bw"]]]]],[36,[15,"bw"]]],[50,"bh",[46,"bp","bq"],[22,[28,[15,"bq"]],[46,[36,[44]]]],[38,[16,[15,"bq"],[15,"u"]],[46,"event_name","const","event_param"],[46,[5,[46,[36,[2,[15,"bp"],"getEventName",[7]]]]],[5,[46,[36,[16,[15,"bq"],[15,"n"]]]]],[5,[46,[52,"br",[16,[16,[15,"bq"],[15,"p"]],[15,"o"]]],[22,[20,[15,"br"],[15,"w"]],[46,[36,["bk",[15,"bp"]]]]],[22,[20,[15,"br"],[15,"v"]],[46,[36,["bl",[15,"bp"]]]]],[36,[2,[15,"bp"],"getHitData",[7,[15,"br"]]]]]],[9,[46,[36,[44]]]]]]],[50,"bj",[46,"bp"],[22,[28,[15,"bp"]],[46,[36,[15,"bp"]]]],[52,"bq",[2,[15,"bp"],"split",[7,"&"]]],[52,"br",[7]],[43,[15,"bq"],0,[2,[16,[15,"bq"],0],"substring",[7,1]]],[53,[41,"bs"],[3,"bs",0],[63,[7,"bs"],[23,[15,"bs"],[17,[15,"bq"],"length"]],[33,[15,"bs"],[3,"bs",[0,[15,"bs"],1]]],[46,[53,[52,"bt",[16,[15,"bq"],[15,"bs"]]],[52,"bu",[2,[15,"bt"],"indexOf",[7,"="]]],[52,"bv",[39,[19,[15,"bu"],0],[2,[15,"bt"],"substring",[7,0,[15,"bu"]]],[15,"bt"]]],[22,[28,[16,[15,"bi"],[15,"bv"]]],[46,[2,[15,"br"],"push",[7,[16,[15,"bq"],[15,"bs"]]]]]]]]]],[22,[17,[15,"br"],"length"],[46,[36,[0,"?",[2,[15,"br"],"join",[7,"&"]]]]]],[36,""]],[50,"bk",[46,"bp"],[52,"bq",[2,[15,"bp"],"getHitData",[7,[15,"w"]]]],[22,[15,"bq"],[46,[36,[15,"bq"]]]],[52,"br",[2,[15,"bp"],"getHitData",[7,[15,"x"]]]],[22,[21,[40,[15,"br"]],"string"],[46,[36,[44]]]],[52,"bs",["d",[15,"br"]]],[22,[28,[15,"bs"]],[46,[36,[44]]]],[41,"bt"],[3,"bt",[17,[15,"bs"],"pathname"]],[22,[16,[15,"b"],"enableDecodeUri"],[46,[3,"bt",[30,["h",[15,"bt"]],[15,"bt"]]]]],[36,[0,[15,"bt"],["bj",[17,[15,"bs"],"search"]]]]],[50,"bl",[46,"bp"],[52,"bq",[2,[15,"bp"],"getHitData",[7,[15,"v"]]]],[22,[15,"bq"],[46,[36,[15,"bq"]]]],[52,"br",[2,[15,"bp"],"getHitData",[7,[15,"x"]]]],[22,[21,[40,[15,"br"]],"string"],[46,[36,[44]]]],[52,"bs",["d",[15,"br"]]],[22,[28,[15,"bs"]],[46,[36,[44]]]],[36,[17,[15,"bs"],"hostname"]]],[50,"bo",[46,"bp"],[22,[28,[15,"bp"]],[46,[36,true]]],[3,"bp",["e",[15,"bp"]]],[66,"bq",[15,"bn"],[46,[22,[20,[2,[15,"bp"],"indexOf",[7,[15,"bq"]]],0],[46,[36,true]]]]],[22,[18,[2,[15,"bm"],"indexOf",[7,[15,"bp"]]],[27,1]],[46,[36,true]]],[36,false]],[52,"b",[13,[41,"$0"],[3,"$0",["require","internal.getFlags"]],["$0"]]],[52,"c",["require","makeNumber"]],[52,"d",["require","parseUrl"]],[52,"e",["require","makeString"]],[52,"f",["require","internal.createRegex"]],[52,"g",["require","internal.testRegex"]],[52,"h",["require","decodeUriComponent"]],[52,"i","event_param_ops"],[52,"j","edit_param"],[52,"k","delete_param"],[52,"l","param_name"],[52,"m","param_value"],[52,"n","const_value"],[52,"o","param_name"],[52,"p","event_param"],[52,"q","predicates"],[52,"r","negate"],[52,"s","type"],[52,"t","values"],[52,"u","type"],[52,"v","page_hostname"],[52,"w","page_path"],[52,"x","page_location"],[52,"y","event_usage"],[52,"z",20],[52,"ba",21],[52,"bb",[7,[15,"w"],[15,"x"],"page_referrer"]],[52,"bi",[8,"__utma",1,"__utmb",1,"__utmc",1,"__utmk",1,"__utmv",1,"__utmx",1,"__utmz",1,"__ga",1,"_gac",1,"_gl",1,"dclid",1,"gbraid",1,"gclid",1,"gclsrc",1,"utm_campaign",1,"utm_content",1,"utm_expid",1,"utm_id",1,"utm_medium",1,"utm_nooverride",1,"utm_referrer",1,"utm_source",1,"utm_term",1,"wbraid",1]],[52,"bm",[7,"app_remove","app_store_refund","app_store_subscription_cancel","app_store_subscription_convert","app_store_subscription_renew","first_open","first_visit","in_app_purchase","session_start","user_engagement"]],[52,"bn",[7,"_","ga_","google_","gtag.","firebase_"]],[36,[8,"applyParamOperations",[15,"bc"],"preHitMatchesRule",[15,"be"],"resolveValue",[15,"bh"],"isEventNameFalsyOrReserved",[15,"bo"]]]],[36,["a"]]]],["$0"]]]
 ,[52,"__module_activities",[13,[41,"$0"],[3,"$0",[51,"",[7],[50,"a",[46],[50,"b",[46,"c","d"],[36,[39,[15,"d"],["d",[15,"c"]],[15,"c"]]]],[36,[8,"withRequestContext",[15,"b"]]]],[36,["a"]]]],["$0"]]]
 ,[52,"__module_ccdEmDownloadActivity",[13,[41,"$0"],[3,"$0",[51,"",[7],[50,"a",[46],[50,"h",[46,"i","j"],["c",[15,"i"],[51,"",[7,"k"],[22,[30,[21,[2,[15,"k"],"getEventName",[7]],[15,"f"]],[28,[2,[15,"k"],"getMetadata",[7,[15,"g"]]]]],[46,[36]]],[22,["b",[15,"i"],[15,"e"]],[46,[2,[15,"k"],"abort",[7]],[36]]],[2,[15,"k"],"setMetadata",[7,[15,"d"],false]],[22,[28,[15,"j"]],[46,[2,[15,"k"],"setHitData",[7,"link_id",[44]]],[2,[15,"k"],"setHitData",[7,"link_url",[44]]],[2,[15,"k"],"setHitData",[7,"link_text",[44]]],[2,[15,"k"],"setHitData",[7,"file_name",[44]]],[2,[15,"k"],"setHitData",[7,"file_extension",[44]]]]]]]],[52,"b",["require","internal.getProductSettingsParameter"]],[52,"c",["require","internal.registerCcdCallback"]],[52,"d","speculative"],[52,"e","ae_block_downloads"],[52,"f","file_download"],[52,"g","em_event"],[36,[8,"registerDownloadActivityCallback",[15,"h"]]]],[36,["a"]]]],["$0"]]]
 ,[52,"__module_ccdEmOutboundClickActivity",[13,[41,"$0"],[3,"$0",[51,"",[7],[50,"a",[46],[50,"h",[46,"i","j"],["c",[15,"i"],[51,"",[7,"k"],[22,[30,[21,[2,[15,"k"],"getEventName",[7]],[15,"f"]],[28,[2,[15,"k"],"getMetadata",[7,[15,"g"]]]]],[46,[36]]],[22,["b",[15,"i"],[15,"e"]],[46,[2,[15,"k"],"abort",[7]],[36]]],[2,[15,"k"],"setMetadata",[7,[15,"d"],false]],[22,[28,[15,"j"]],[46,[2,[15,"k"],"setHitData",[7,"link_id",[44]]],[2,[15,"k"],"setHitData",[7,"link_classes",[44]]],[2,[15,"k"],"setHitData",[7,"link_url",[44]]],[2,[15,"k"],"setHitData",[7,"link_domain",[44]]],[2,[15,"k"],"setHitData",[7,"outbound",[44]]]]]]]],[52,"b",["require","internal.getProductSettingsParameter"]],[52,"c",["require","internal.registerCcdCallback"]],[52,"d","speculative"],[52,"e","ae_block_outbound_click"],[52,"f","click"],[52,"g","em_event"],[36,[8,"registerOutbackClickActivityCallback",[15,"h"]]]],[36,["a"]]]],["$0"]]]
 ,[52,"__module_ccdEmPageViewActivity",[13,[41,"$0"],[3,"$0",[51,"",[7],[50,"a",[46],[50,"j",[46,"k"],["c",[15,"k"],[51,"",[7,"l"],[22,[30,[21,[2,[15,"l"],"getEventName",[7]],[15,"h"]],[28,[2,[15,"l"],"getMetadata",[7,[15,"i"]]]]],[46,[36]]],[22,["b",[15,"k"],[15,"g"]],[46,[2,[15,"l"],"abort",[7]],[36]]],[22,[28,[2,[15,"l"],"getMetadata",[7,[15,"f"]]]],[46,["d",[15,"k"],"page_referrer",[2,[15,"l"],"getHitData",[7,"page_referrer"]]]]],[2,[15,"l"],"setMetadata",[7,[15,"e"],false]]]]],[52,"b",["require","internal.getProductSettingsParameter"]],[52,"c",["require","internal.registerCcdCallback"]],[52,"d",["require","internal.setRemoteConfigParameter"]],[52,"e","speculative"],[52,"f","is_sgtm_prehit"],[52,"g","ae_block_history"],[52,"h","page_view"],[52,"i","em_event"],[36,[8,"registerPageViewActivityCallback",[15,"j"]]]],[36,["a"]]]],["$0"]]]
 ,[52,"__module_ccdEmSiteSearchActivity",[13,[41,"$0"],[3,"$0",[51,"",[7],[50,"a",[46],[50,"b",[46,"d","e"],[52,"f",[2,[30,[15,"d"],""],"split",[7,","]]],[53,[41,"g"],[3,"g",0],[63,[7,"g"],[23,[15,"g"],[17,[15,"f"],"length"]],[33,[15,"g"],[3,"g",[0,[15,"g"],1]]],[46,[53,[52,"h",["e",[2,[16,[15,"f"],[15,"g"]],"trim",[7]]]],[22,[21,[15,"h"],[44]],[46,[36,[15,"h"]]]]]]]]],[50,"c",[46,"d","e","f"],[52,"g",[8,"search_term",[15,"d"]]],[52,"h",[2,[30,[15,"e"],""],"split",[7,","]]],[53,[41,"i"],[3,"i",0],[63,[7,"i"],[23,[15,"i"],[17,[15,"h"],"length"]],[33,[15,"i"],[3,"i",[0,[15,"i"],1]]],[46,[53,[52,"j",[2,[16,[15,"h"],[15,"i"]],"trim",[7]]],[52,"k",["f",[15,"j"]]],[22,[21,[15,"k"],[44]],[46,[43,[15,"g"],[0,"q_",[15,"j"]],[15,"k"]]]]]]]],[36,[15,"g"]]],[36,[8,"getSearchTerm",[15,"b"],"buildEventParams",[15,"c"]]]],[36,["a"]]]],["$0"]]]
 ,[52,"__module_ccdEmScrollActivity",[13,[41,"$0"],[3,"$0",[51,"",[7],[50,"a",[46],[50,"h",[46,"i","j"],["c",[15,"i"],[51,"",[7,"k"],[22,[30,[21,[2,[15,"k"],"getEventName",[7]],[15,"f"]],[28,[2,[15,"k"],"getMetadata",[7,[15,"g"]]]]],[46,[36]]],[22,["b",[15,"i"],[15,"e"]],[46,[2,[15,"k"],"abort",[7]],[36]]],[2,[15,"k"],"setMetadata",[7,[15,"d"],false]],[22,[28,[15,"j"]],[46,[2,[15,"k"],"setHitData",[7,"percent_scrolled",[44]]]]]]]],[52,"b",["require","internal.getProductSettingsParameter"]],[52,"c",["require","internal.registerCcdCallback"]],[52,"d","speculative"],[52,"e","ae_block_scroll"],[52,"f","scroll"],[52,"g","em_event"],[36,[8,"registerScrollActivityCallback",[15,"h"]]]],[36,["a"]]]],["$0"]]]
 ,[52,"__module_ccdGaRegionScopedSettings",[13,[41,"$0"],[3,"$0",[51,"",[7],[50,"a",[46],[50,"j",[46,"l","m"],[50,"r",[46,"s"],[22,[30,[28,[15,"p"]],[21,[17,[15,"p"],"length"],2]],[46,[36,false]]],[52,"t",["k",[15,"s"]]],[53,[41,"u"],[3,"u",0],[63,[7,"u"],[23,[15,"u"],[17,[15,"t"],"length"]],[33,[15,"u"],[3,"u",[0,[15,"u"],1]]],[46,[53,[52,"v",[16,[15,"t"],[15,"u"]]],[52,"w",[17,[15,"v"],"countryCode"]],[52,"x",[17,[15,"v"],"regionCode"]],[52,"y",[20,[15,"w"],[15,"p"]]],[52,"z",[30,[28,[15,"x"]],[20,[15,"x"],[15,"q"]]]],[22,[1,[15,"y"],[15,"z"]],[46,[36,true]]]]]]],[36,false]],[22,[28,[17,[15,"l"],"settingsTable"]],[46,[36]]],[52,"n",[30,[17,[15,"l"],"instanceDestinationId"],[17,["b"],"containerId"]]],[52,"o",["g",[15,"c"],[15,"m"]]],[52,"p",[13,[41,"$0"],[3,"$0",["g",[15,"d"],[15,"m"]]],["$0"]]],[52,"q",[13,[41,"$0"],[3,"$0",["g",[15,"e"],[15,"m"]]],["$0"]]],[53,[41,"s"],[3,"s",0],[63,[7,"s"],[23,[15,"s"],[17,[17,[15,"l"],"settingsTable"],"length"]],[33,[15,"s"],[3,"s",[0,[15,"s"],1]]],[46,[53,[52,"t",[16,[17,[15,"l"],"settingsTable"],[15,"s"]]],[22,[30,[17,[15,"t"],"disallowAllRegions"],["r",[17,[15,"t"],"disallowedRegions"]]],[46,[53,[52,"u",[16,[15,"i"],[17,[15,"t"],"redactFieldGroup"]]],[22,[28,[15,"u"]],[46,[6]]],[53,[41,"v"],[3,"v",0],[63,[7,"v"],[23,[15,"v"],[17,[15,"u"],"length"]],[33,[15,"v"],[3,"v",[0,[15,"v"],1]]],[46,[53,[52,"w",[16,[15,"u"],[15,"v"]]],["o",[15,"n"],[17,[15,"w"],"name"],[17,[15,"w"],"value"]]]]]]]]]]]]]],[50,"k",[46,"l"],[52,"m",[7]],[22,[28,[15,"l"]],[46,[36,[15,"m"]]]],[52,"n",[2,[15,"l"],"split",[7,","]]],[53,[41,"o"],[3,"o",0],[63,[7,"o"],[23,[15,"o"],[17,[15,"n"],"length"]],[33,[15,"o"],[3,"o",[0,[15,"o"],1]]],[46,[53,[52,"p",[2,[16,[15,"n"],[15,"o"]],"trim",[7]]],[22,[28,[15,"p"]],[46,[6]]],[52,"q",[2,[15,"p"],"split",[7,"-"]]],[52,"r",[16,[15,"q"],0]],[52,"s",[39,[20,[17,[15,"q"],"length"],2],[15,"p"],[44]]],[22,[30,[28,[15,"r"]],[21,[17,[15,"r"],"length"],2]],[46,[6]]],[22,[1,[21,[15,"s"],[44]],[30,[23,[17,[15,"s"],"length"],4],[18,[17,[15,"s"],"length"],6]]],[46,[6]]],[2,[15,"m"],"push",[7,[8,"countryCode",[15,"r"],"regionCode",[15,"s"]]]]]]]],[36,[15,"m"]]],[52,"b",["require","getContainerVersion"]],[52,"c",["require","internal.setRemoteConfigParameter"]],[52,"d",["require","internal.getCountryCode"]],[52,"e",["require","internal.getRegionCode"]],[52,"f",[15,"__module_activities"]],[52,"g",[17,[15,"f"],"withRequestContext"]],[41,"h"],[52,"i",[8,"GOOGLE_SIGNALS",[7,[8,"name","allow_google_signals","value",false]],"DEVICE_AND_GEO",[7,[8,"name","geo_granularity","value",true],[8,"name","redact_device_info","value",true]]]],[36,[8,"applyRegionScopedSettings",[15,"j"]]]],[36,["a"]]]],["$0"]]]
 
]
,"entities":{
"__ccd_auto_redact":{"2":true,"4":true}
,
"__ccd_conversion_marking":{"2":true,"4":true}
,
"__ccd_em_download":{"2":true,"4":true}
,
"__ccd_em_outbound_click":{"2":true,"4":true}
,
"__ccd_em_page_view":{"2":true,"4":true}
,
"__ccd_em_scroll":{"2":true,"4":true}
,
"__ccd_em_site_search":{"2":true,"4":true}
,
"__ccd_ga_first":{"2":true,"4":true}
,
"__ccd_ga_last":{"2":true,"4":true}
,
"__ccd_ga_regscope":{"2":true,"4":true}
,
"__ogt_1p_data_v2":{"2":true}
,
"__ogt_event_create":{"2":true,"4":true}
,
"__ogt_google_signals":{"2":true,"4":true}
,
"__set_product_settings":{"2":true,"4":true}


}
,"permissions":{
"__ccd_auto_redact":{}
,
"__ccd_conversion_marking":{}
,
"__ccd_em_download":{"listen_data_layer":{"accessType":"specific","allowedEvents":["gtm.linkClick"]},"access_template_storage":{},"detect_link_click_events":{"allowWaitForTags":""}}
,
"__ccd_em_outbound_click":{"get_url":{"urlParts":"any","queriesAllowed":"any"},"listen_data_layer":{"accessType":"specific","allowedEvents":["gtm.linkClick"]},"access_template_storage":{},"detect_link_click_events":{"allowWaitForTags":""}}
,
"__ccd_em_page_view":{"listen_data_layer":{"accessType":"specific","allowedEvents":["gtm.historyChange-v2"]},"process_dom_events":{"targets":[{"targetType":"window","eventName":"pushstate"},{"targetType":"window","eventName":"popstate"}]},"access_template_storage":{},"detect_history_change_events":{}}
,
"__ccd_em_scroll":{"listen_data_layer":{"accessType":"specific","allowedEvents":["gtm.scrollDepth"]},"process_dom_events":{"targets":[{"targetType":"window","eventName":"resize"},{"targetType":"window","eventName":"scroll"},{"targetType":"window","eventName":"scrollend"}]},"access_template_storage":{},"detect_scroll_events":{}}
,
"__ccd_em_site_search":{"get_url":{"urlParts":"any","queriesAllowed":"any"},"read_container_data":{}}
,
"__ccd_ga_first":{}
,
"__ccd_ga_last":{}
,
"__ccd_ga_regscope":{"read_container_data":{}}
,
"__ogt_1p_data_v2":{"detect_user_provided_data":{"limitDataSources":true,"allowAutoDataSources":true,"allowManualDataSources":false,"allowCodeDataSources":false}}
,
"__ogt_event_create":{"access_template_storage":{}}
,
"__ogt_google_signals":{"read_container_data":{}}
,
"__set_product_settings":{}


}



,"security_groups":{
"google":[
"__ccd_auto_redact"
,
"__ccd_conversion_marking"
,
"__ccd_em_download"
,
"__ccd_em_outbound_click"
,
"__ccd_em_page_view"
,
"__ccd_em_scroll"
,
"__ccd_em_site_search"
,
"__ccd_ga_first"
,
"__ccd_ga_last"
,
"__ccd_ga_regscope"
,
"__ogt_1p_data_v2"
,
"__ogt_event_create"
,
"__ogt_google_signals"
,
"__set_product_settings"

]


}



};


var aa,ba=function(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}},ca=function(a){return a.raw=a},da=function(a,b){a.raw=b;return a},fa=function(a){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if(b)return b.call(a);if("number"==typeof a.length)return{next:ba(a)};throw Error(String(a)+" is not an iterable or ArrayLike");},ha=function(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c},ja=function(a){return a instanceof Array?a:
ha(fa(a))},ka="function"==typeof Object.create?Object.create:function(a){var b=function(){};b.prototype=a;return new b},ma;if("function"==typeof Object.setPrototypeOf)ma=Object.setPrototypeOf;else{var na;a:{var oa={a:!0},qa={};try{qa.__proto__=oa;na=qa.a;break a}catch(a){}na=!1}ma=na?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}
var ra=ma,sa=function(a,b){a.prototype=ka(b.prototype);a.prototype.constructor=a;if(ra)ra(a,b);else for(var c in b)if("prototype"!=c)if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);d&&Object.defineProperty(a,c,d)}else a[c]=b[c];a.Zn=b.prototype},ta=function(){for(var a=Number(this),b=[],c=a;c<arguments.length;c++)b[c-a]=arguments[c];return b};/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var ua=this||self,va=function(a){return a};var wa=function(a,b){this.h=a;this.s=b};var xa=function(){this.h={};this.C={}};aa=xa.prototype;aa.get=function(a){return this.h["dust."+a]};aa.set=function(a,b){a="dust."+a;this.C.hasOwnProperty(a)||(this.h[a]=b)};aa.Uh=function(a,b){this.set(a,b);this.C["dust."+a]=!0};aa.has=function(a){return this.h.hasOwnProperty("dust."+a)};aa.remove=function(a){a="dust."+a;this.C.hasOwnProperty(a)||delete this.h[a]};var ya=function(){this.quota={}};ya.prototype.reset=function(){this.quota={}};var za=function(a,b){this.X=a;this.M=function(c,d,e){return c.apply(d,e)};this.C=b;this.s=new xa;this.h=this.F=void 0};za.prototype.add=function(a,b){Aa(this,a,b,!1)};var Aa=function(a,b,c,d){d?a.s.Uh(b,c):a.s.set(b,c)};za.prototype.set=function(a,b){!this.s.has(a)&&this.C&&this.C.has(a)?this.C.set(a,b):this.s.set(a,b)};za.prototype.get=function(a){return this.s.has(a)?this.s.get(a):this.C?this.C.get(a):void 0};za.prototype.has=function(a){return!!this.s.has(a)||!(!this.C||!this.C.has(a))};
var Ba=function(a){var b=new za(a.X,a);a.F&&(b.F=a.F);b.M=a.M;b.h=a.h;return b};var Ca=function(){},Fa=function(a){return"function"===typeof a},k=function(a){return"string"===typeof a},Ga=function(a){return"number"===typeof a&&!isNaN(a)},Ha=Array.isArray,Ia=function(a,b){if(a&&Ha(a))for(var c=0;c<a.length;c++)if(a[c]&&b(a[c]))return a[c]},Ja=function(a,b){if(!Ga(a)||!Ga(b)||a>b)a=0,b=2147483647;return Math.floor(Math.random()*(b-a+1)+a)},La=function(a,b){for(var c=new Ka,d=0;d<a.length;d++)c.set(a[d],!0);for(var e=0;e<b.length;e++)if(c.get(b[e]))return!0;return!1},l=function(a,
b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(c,a[c])},Ma=function(a){return!!a&&("[object Arguments]"===Object.prototype.toString.call(a)||Object.prototype.hasOwnProperty.call(a,"callee"))},Na=function(a){return Math.round(Number(a))||0},Oa=function(a){return"false"===String(a).toLowerCase()?!1:!!a},Pa=function(a){var b=[];if(Ha(a))for(var c=0;c<a.length;c++)b.push(String(a[c]));return b},Qa=function(a){return a?a.replace(/^\s+|\s+$/g,""):""},Sa=function(){return new Date(Date.now())},
Ta=function(){return Sa().getTime()},Ka=function(){this.prefix="gtm.";this.values={}};Ka.prototype.set=function(a,b){this.values[this.prefix+a]=b};Ka.prototype.get=function(a){return this.values[this.prefix+a]};
var Ua=function(a,b,c){return a&&a.hasOwnProperty(b)?a[b]:c},Va=function(a){var b=a;return function(){if(b){var c=b;b=void 0;try{c()}catch(d){}}}},Wa=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},Xa=function(a,b){for(var c=[],d=0;d<a.length;d++)c.push(a[d]),c.push.apply(c,b[a[d]]||[]);return c},Ya=function(a,b){return a.substring(0,b.length)===b},Za=function(a,b){var c=z;b=b||[];for(var d=c,e=0;e<a.length-1;e++){if(!d.hasOwnProperty(a[e]))return;d=d[a[e]];if(0<=b.indexOf(d))return}return d},
$a=function(a,b){for(var c={},d=c,e=a.split("."),f=0;f<e.length-1;f++)d=d[e[f]]={};d[e[e.length-1]]=b;return c},ab=/^\w{1,9}$/,bb=function(a,b){a=a||{};b=b||",";var c=[];l(a,function(d,e){ab.test(d)&&e&&c.push(d)});return c.join(b)},cb=function(a,b){function c(){++d===b&&(e(),e=null,c.done=!0)}var d=0,e=a;c.done=!1;return c};function db(a,b){for(var c,d=0;d<b.length&&!(c=eb(a,b[d]),c instanceof wa);d++);return c}function eb(a,b){try{var c=a.get(String(b[0]));if(!c||"function"!==typeof c.invoke)throw Error("Attempting to execute non-function "+b[0]+".");return c.invoke.apply(c,[a].concat(b.slice(1)))}catch(e){var d=a.F;d&&d(e,b.context?{id:b[0],line:b.context.line}:null);throw e;}};var fb=function(){this.C=new ya;this.h=new za(this.C)};fb.prototype.execute=function(a,b){var c=Array.prototype.slice.call(arguments,0);return this.s(c)};fb.prototype.s=function(a){for(var b,c=0;c<arguments.length;c++)b=eb(this.h,arguments[c]);return b};fb.prototype.F=function(a,b){var c=Ba(this.h);c.h=a;for(var d,e=1;e<arguments.length;e++)d=eb(c,arguments[e]);return d};var gb=function(){xa.call(this);this.s=!1};sa(gb,xa);var hb=function(a,b){var c=[],d;for(d in a.h)if(a.h.hasOwnProperty(d))switch(d=d.substr(5),b){case 1:c.push(d);break;case 2:c.push(a.get(d));break;case 3:c.push([d,a.get(d)])}return c};aa=gb.prototype;aa.set=function(a,b){this.s||xa.prototype.set.call(this,a,b)};aa.Uh=function(a,b){this.s||xa.prototype.Uh.call(this,a,b)};aa.remove=function(a){this.s||xa.prototype.remove.call(this,a)};aa.Eb=function(){this.s=!0};aa.Hj=function(){return this.s};/*
 jQuery (c) 2005, 2012 jQuery Foundation, Inc. jquery.org/license. */
var ib=/\[object (Boolean|Number|String|Function|Array|Date|RegExp)\]/,jb=function(a){if(null==a)return String(a);var b=ib.exec(Object.prototype.toString.call(Object(a)));return b?b[1].toLowerCase():"object"},kb=function(a,b){return Object.prototype.hasOwnProperty.call(Object(a),b)},lb=function(a){if(!a||"object"!=jb(a)||a.nodeType||a==a.window)return!1;try{if(a.constructor&&!kb(a,"constructor")&&!kb(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}for(var b in a);return void 0===
b||kb(a,b)},nb=function(a,b){var c=b||("array"==jb(a)?[]:{}),d;for(d in a)if(kb(a,d)){var e=a[d];"array"==jb(e)?("array"!=jb(c[d])&&(c[d]=[]),c[d]=nb(e,c[d])):lb(e)?(lb(c[d])||(c[d]={}),c[d]=nb(e,c[d])):c[d]=e}return c};var ob=function(a){for(var b=[],c=0;c<a.length();c++)a.has(c)&&(b[c]=a.get(c));return b},pb=function(a){if(void 0==a||Ha(a)||lb(a))return!0;switch(typeof a){case "boolean":case "number":case "string":case "function":return!0}return!1},qb=function(a){return"number"===typeof a&&0<=a&&isFinite(a)&&0===a%1||"string"===typeof a&&"-"!==a[0]&&a===""+parseInt(a,10)};var rb=function(a){this.s=new gb;this.h=[];this.C=!1;a=a||[];for(var b in a)a.hasOwnProperty(b)&&(qb(b)?this.h[Number(b)]=a[Number(b)]:this.s.set(b,a[b]))};aa=rb.prototype;aa.toString=function(a){if(a&&0<=a.indexOf(this))return"";for(var b=[],c=0;c<this.h.length;c++){var d=this.h[c];null===d||void 0===d?b.push(""):d instanceof rb?(a=a||[],a.push(this),b.push(d.toString(a)),a.pop()):b.push(String(d))}return b.join(",")};
aa.set=function(a,b){if(!this.C)if("length"===a){if(!qb(b))throw Error("RangeError: Length property must be a valid integer.");this.h.length=Number(b)}else qb(a)?this.h[Number(a)]=b:this.s.set(a,b)};aa.get=function(a){return"length"===a?this.length():qb(a)?this.h[Number(a)]:this.s.get(a)};aa.length=function(){return this.h.length};aa.Tb=function(){for(var a=hb(this.s,1),b=0;b<this.h.length;b++)a.push(b+"");return new rb(a)};aa.remove=function(a){qb(a)?delete this.h[Number(a)]:this.s.remove(a)};
aa.pop=function(){return this.h.pop()};aa.push=function(a){return this.h.push.apply(this.h,Array.prototype.slice.call(arguments))};aa.shift=function(){return this.h.shift()};aa.splice=function(a,b,c){return new rb(this.h.splice.apply(this.h,arguments))};aa.unshift=function(a){return this.h.unshift.apply(this.h,Array.prototype.slice.call(arguments))};aa.has=function(a){return qb(a)&&this.h.hasOwnProperty(a)||this.s.has(a)};aa.Eb=function(){this.C=!0;Object.freeze(this.h);this.s.Eb()};aa.Hj=function(){return this.C};var sb=function(){gb.call(this)};sa(sb,gb);sb.prototype.Tb=function(){return new rb(hb(this,1))};function tb(){for(var a=ub,b={},c=0;c<a.length;++c)b[a[c]]=c;return b}function vb(){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZ";a+=a.toLowerCase()+"0123456789-_";return a+"."}var ub,wb;function xb(a){ub=ub||vb();wb=wb||tb();for(var b=[],c=0;c<a.length;c+=3){var d=c+1<a.length,e=c+2<a.length,f=a.charCodeAt(c),g=d?a.charCodeAt(c+1):0,h=e?a.charCodeAt(c+2):0,m=f>>2,n=(f&3)<<4|g>>4,p=(g&15)<<2|h>>6,q=h&63;e||(q=64,d||(p=64));b.push(ub[m],ub[n],ub[p],ub[q])}return b.join("")}
function yb(a){function b(m){for(;d<a.length;){var n=a.charAt(d++),p=wb[n];if(null!=p)return p;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n);}return m}ub=ub||vb();wb=wb||tb();for(var c="",d=0;;){var e=b(-1),f=b(0),g=b(64),h=b(64);if(64===h&&-1===e)return c;c+=String.fromCharCode(e<<2|f>>4);64!=g&&(c+=String.fromCharCode(f<<4&240|g>>2),64!=h&&(c+=String.fromCharCode(g<<6&192|h)))}};var zb={},Ab=function(a,b){zb[a]=zb[a]||[];zb[a][b]=!0},Bb=function(){delete zb.GA4_EVENT},Cb=function(a){var b=zb[a];if(!b||0===b.length)return"";for(var c=[],d=0,e=0;e<b.length;e++)0===e%8&&0<e&&(c.push(String.fromCharCode(d)),d=0),b[e]&&(d|=1<<e%8);0<d&&c.push(String.fromCharCode(d));return xb(c.join("")).replace(/\.+$/,"")};var Db=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"===typeof a)return"string"!==typeof b||1!=b.length?-1:a.indexOf(b,0);for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1};var Eb,Fb=function(){if(void 0===Eb){var a=null,b=ua.trustedTypes;if(b&&b.createPolicy){try{a=b.createPolicy("goog#html",{createHTML:va,createScript:va,createScriptURL:va})}catch(c){ua.console&&ua.console.error(c.message)}Eb=a}else Eb=a}return Eb};var Gb=function(a){this.h=a};Gb.prototype.toString=function(){return this.h+""};var Hb=function(a){return a instanceof Gb&&a.constructor===Gb?a.h:"type_error:TrustedResourceUrl"},Jb={},Kb=function(a){var b=a,c=Fb(),d=c?c.createScriptURL(b):b;return new Gb(d,Jb)};var Lb=function(a){this.h=a};Lb.prototype.toString=function(){return this.h.toString()};var Mb=function(a){return a instanceof Lb&&a.constructor===Lb?a.h:"type_error:SafeUrl"},Nb={},Ob=new Lb("about:invalid#zClosurez",Nb);var Pb,Qb;a:{for(var Rb=["CLOSURE_FLAGS"],Sb=ua,Tb=0;Tb<Rb.length;Tb++)if(Sb=Sb[Rb[Tb]],null==Sb){Qb=null;break a}Qb=Sb}var Ub=Qb&&Qb[610401301];Pb=null!=Ub?Ub:!1;function Vb(){var a=ua.navigator;if(a){var b=a.userAgent;if(b)return b}return""}var Wb,Xb=ua.navigator;Wb=Xb?Xb.userAgentData||null:null;function Yb(a){return Pb?Wb?Wb.brands.some(function(b){var c=b.brand;return c&&-1!=c.indexOf(a)}):!1:!1}function Zb(a){return-1!=Vb().indexOf(a)};function $b(){return Pb?!!Wb&&0<Wb.brands.length:!1}function ac(){return $b()?!1:Zb("Opera")}function bc(){return Zb("Firefox")||Zb("FxiOS")}function cc(){return $b()?Yb("Chromium"):(Zb("Chrome")||Zb("CriOS"))&&!($b()?0:Zb("Edge"))||Zb("Silk")};var dc={},ec=function(a){this.h=a};ec.prototype.toString=function(){return this.h.toString()};var fc=function(a){return a instanceof ec&&a.constructor===ec?a.h:"type_error:SafeHtml"};/*

 SPDX-License-Identifier: Apache-2.0
*/
var gc=ca([""]),hc=da(["\x00"],["\\0"]),ic=da(["\n"],["\\n"]),jc=da(["\x00"],["\\u0000"]);function kc(a){return-1===a.toString().indexOf("`")}kc(function(a){return a(gc)})||kc(function(a){return a(hc)})||kc(function(a){return a(ic)})||kc(function(a){return a(jc)});var lc=function(a){this.om=a};function mc(a){return new lc(function(b){return b.substr(0,a.length+1).toLowerCase()===a+":"})}var nc=[mc("data"),mc("http"),mc("https"),mc("mailto"),mc("ftp"),new lc(function(a){return/^[^:]*([/?#]|$)/.test(a)})];function oc(a,b){b=void 0===b?nc:b;if(a instanceof Lb)return a;for(var c=0;c<b.length;++c){var d=b[c];if(d instanceof lc&&d.om(a))return new Lb(a,Nb)}}function pc(a){var b;b=void 0===b?nc:b;return oc(a,b)||Ob}var qc="function"===typeof URL;
function rc(a){var b;a:if(qc){var c;try{c=new URL(a)}catch(g){b="https:";break a}b=c.protocol}else{var d;b:{var e=document.createElement("a");try{e.href=a}catch(g){d=void 0;break b}var f=e.protocol;d=":"===f||""===f?"https:":f}b=d}if("javascript:"!==b)return a}var sc=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var tc={};var uc=function(){},wc=function(a){this.h=a};sa(wc,uc);wc.prototype.toString=function(){return this.h};function xc(a,b){var c=[new wc(yc[0].toLowerCase(),tc)];if(0===c.length)throw Error("");var d=c.map(function(f){var g;if(f instanceof wc)g=f.h;else throw Error("");return g}),e=b.toLowerCase();if(d.every(function(f){return 0!==e.indexOf(f)}))throw Error('Attribute "'+b+'" does not match any of the allowed prefixes.');a.setAttribute(b,"true")}function zc(a){var b=a.tagName;if("SCRIPT"===b||"STYLE"===b)throw Error("");};function Ac(a,b){var c=b instanceof Lb?Mb(b):rc(b);void 0!==c&&(a.action=c)};function Bc(a){var b=a=Cc(a),c=Fb(),d=c?c.createHTML(b):b;return new ec(d,dc)}function Cc(a){return null===a?"null":void 0===a?"undefined":a};var z=window,C=document,Dc=navigator,Ec=C.currentScript&&C.currentScript.src,Fc=function(a,b){var c=z[a];z[a]=void 0===c?b:c;return z[a]},Gc=function(a,b){b&&(a.addEventListener?a.onload=b:a.onreadystatechange=function(){a.readyState in{loaded:1,complete:1}&&(a.onreadystatechange=null,b())})},Hc={async:1,nonce:1,onerror:1,onload:1,src:1,type:1},Ic={onload:1,src:1,width:1,height:1,style:1};function Jc(a,b,c){b&&l(b,function(d,e){d=d.toLowerCase();c.hasOwnProperty(d)||a.setAttribute(d,e)})}
var Kc=function(a,b,c,d,e){var f=C.createElement("script");Jc(f,d,Hc);f.type="text/javascript";f.async=d&&!1===d.async?!1:!0;var g;g=Kb(Cc(a));f.src=Hb(g);var h,m,n,p=null==(n=(m=(f.ownerDocument&&f.ownerDocument.defaultView||window).document).querySelector)?void 0:n.call(m,"script[nonce]");(h=p?p.nonce||p.getAttribute("nonce")||"":"")&&f.setAttribute("nonce",h);Gc(f,b);c&&(f.onerror=c);if(e)e.appendChild(f);else{var q=C.getElementsByTagName("script")[0]||C.body||C.head;q.parentNode.insertBefore(f,
q)}return f},Lc=function(){if(Ec){var a=Ec.toLowerCase();if(0===a.indexOf("https://"))return 2;if(0===a.indexOf("http://"))return 3}return 1},Mc=function(a,b,c,d,e){var f;f=void 0===f?!0:f;var g=e,h=!1;g||(g=C.createElement("iframe"),h=!0);Jc(g,c,Ic);d&&l(d,function(n,p){g.dataset[n]=p});f&&(g.height="0",g.width="0",g.style.display="none",g.style.visibility="hidden");if(h){var m=C.body&&C.body.lastChild||C.body||C.head;m.parentNode.insertBefore(g,m)}Gc(g,b);void 0!==a&&(g.src=a);return g},Nc=function(a,
b,c,d){var e=new Image(1,1);Jc(e,d,{});e.onload=function(){e.onload=null;b&&b()};e.onerror=function(){e.onerror=null;c&&c()};e.src=a},Oc=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,!!d):a.attachEvent&&a.attachEvent("on"+b,c)},Pc=function(a,b,c){a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c)},G=function(a){z.setTimeout(a,0)},Qc=function(a,b){return a&&b&&a.attributes&&a.attributes[b]?a.attributes[b].value:null},Rc=function(a){var b=a.innerText||
a.textContent||"";b&&" "!=b&&(b=b.replace(/^[\s\xa0]+|[\s\xa0]+$/g,""));b&&(b=b.replace(/(\xa0+|\s{2,}|\n|\r\t)/g," "));return b},Sc=function(a){var b=C.createElement("div"),c=b,d=Bc("A<div>"+a+"</div>");1===c.nodeType&&zc(c);c.innerHTML=fc(d);b=b.lastChild;for(var e=[];b.firstChild;)e.push(b.removeChild(b.firstChild));return e},Tc=function(a,b,c){c=c||100;for(var d={},e=0;e<b.length;e++)d[b[e]]=!0;for(var f=a,g=0;f&&g<=c;g++){if(d[String(f.tagName).toLowerCase()])return f;f=f.parentElement}return null},
Uc=function(a){var b;try{b=Dc.sendBeacon&&Dc.sendBeacon(a)}catch(c){Ab("TAGGING",15)}b||Nc(a)},Vc=function(a,b){var c=a[b];c&&"string"===typeof c.animVal&&(c=c.animVal);return c},Wc=function(a){var b={headers:{"Attribution-Reporting-Eligible":"trigger"},keepalive:!0,attributionReporting:{eventSourceEligible:!0,triggerEligible:!0}};try{z.fetch(a,b)}catch(c){}},Xc=function(){var a=z.performance;if(a&&Fa(a.now))return a.now()},Yc=function(){return z.performance||void 0};var Zc=function(a,b){return H(this,a)&&H(this,b)},$c=function(a,b){return H(this,a)===H(this,b)},ad=function(a,b){return H(this,a)||H(this,b)},bd=function(a,b){a=H(this,a);b=H(this,b);return-1<String(a).indexOf(String(b))},cd=function(a,b){a=String(H(this,a));b=String(H(this,b));return a.substring(0,b.length)===b},dd=function(a,b){a=H(this,a);b=H(this,b);switch(a){case "pageLocation":var c=z.location.href;b instanceof sb&&b.get("stripProtocol")&&(c=c.replace(/^https?:\/\//,""));return c}};var ed=function(a,b){gb.call(this);this.F=a;this.M=b};sa(ed,gb);ed.prototype.toString=function(){return this.F};ed.prototype.Tb=function(){return new rb(hb(this,1))};ed.prototype.invoke=function(a,b){return this.M.apply(new fd(this,a),Array.prototype.slice.call(arguments,1))};ed.prototype.ab=function(a,b){try{return this.invoke.apply(this,Array.prototype.slice.call(arguments,0))}catch(c){}};var fd=function(a,b){this.s=a;this.h=b},H=function(a,b){var c=a.h;return Ha(b)?eb(c,b):b},I=function(a){return a.s.F};var gd=function(){this.map=new Map};gd.prototype.set=function(a,b){this.map.set(a,b)};gd.prototype.get=function(a){return this.map.get(a)};var hd=function(){this.keys=[];this.values=[]};hd.prototype.set=function(a,b){this.keys.push(a);this.values.push(b)};hd.prototype.get=function(a){var b=this.keys.indexOf(a);if(-1<b)return this.values[b]};function id(){try{return Map?new gd:new hd}catch(a){return new hd}};var jd=function(a){if(a instanceof jd)return a;if(pb(a))throw Error("Type of given value has an equivalent Pixie type.");this.h=a};jd.prototype.toString=function(){return String(this.h)};var ld=function(a){gb.call(this);this.F=a;this.set("then",kd(this));this.set("catch",kd(this,!0));this.set("finally",kd(this,!1,!0))};sa(ld,sb);var kd=function(a,b,c){b=void 0===b?!1:b;c=void 0===c?!1:c;return new ed("",function(d,e){b&&(e=d,d=void 0);c&&(e=d);d instanceof ed||(d=void 0);e instanceof ed||(e=void 0);var f=Ba(this.h),g=function(m){return function(n){return c?(m.invoke(f),a.F):m.invoke(f,n)}},h=a.F.then(d&&g(d),e&&g(e));return new ld(h)})};var nd=function(a,b,c){var d=id(),e=function(g,h){for(var m=hb(g,1),n=0;n<m.length;n++)h[m[n]]=f(g.get(m[n]))},f=function(g){var h=d.get(g);if(h)return h;if(g instanceof rb){var m=[];d.set(g,m);for(var n=g.Tb(),p=0;p<n.length();p++)m[n.get(p)]=f(g.get(n.get(p)));return m}if(g instanceof ld)return g.F;if(g instanceof sb){var q={};d.set(g,q);e(g,q);return q}if(g instanceof ed){var r=function(){for(var u=Array.prototype.slice.call(arguments,0),v=0;v<u.length;v++)u[v]=md(u[v],b,c);var w=new za(b?b.X:
new ya);b&&(w.h=b.h);return f(g.invoke.apply(g,[w].concat(u)))};d.set(g,r);e(g,r);return r}var t=!1;switch(c){case 1:t=!0;break;case 2:t=!1;break;case 3:t=!1;break;default:}if(g instanceof jd&&t)return g.h;switch(typeof g){case "boolean":case "number":case "string":case "undefined":return g;case "object":if(null===g)return null}};return f(a)},md=function(a,b,c){var d=id(),e=function(g,
h){for(var m in g)g.hasOwnProperty(m)&&h.set(m,f(g[m]))},f=function(g){var h=d.get(g);if(h)return h;if(Ha(g)||Ma(g)){var m=new rb([]);d.set(g,m);for(var n in g)g.hasOwnProperty(n)&&m.set(n,f(g[n]));return m}if(lb(g)){var p=new sb;d.set(g,p);e(g,p);return p}if("function"===typeof g){var q=new ed("",function(x){for(var y=Array.prototype.slice.call(arguments,0),A=0;A<y.length;A++)y[A]=nd(H(this,y[A]),b,c);return f((0,this.h.M)(g,g,y))});d.set(g,q);e(g,q);return q}var v=typeof g;if(null===g||"string"===v||"number"===v||"boolean"===v)return g;var w=!1;switch(c){case 1:w=!0;break;case 2:w=!1;break;default:}if(void 0!==g&&w)return new jd(g)};return f(a)};var od=function(){var a=!1;return a};var pd={supportedMethods:"concat every filter forEach hasOwnProperty indexOf join lastIndexOf map pop push reduce reduceRight reverse shift slice some sort splice unshift toString".split(" "),concat:function(a,b){for(var c=[],d=0;d<this.length();d++)c.push(this.get(d));for(var e=1;e<arguments.length;e++)if(arguments[e]instanceof rb)for(var f=arguments[e],g=0;g<f.length();g++)c.push(f.get(g));else c.push(arguments[e]);return new rb(c)},every:function(a,b){for(var c=this.length(),d=0;d<this.length()&&
d<c;d++)if(this.has(d)&&!b.invoke(a,this.get(d),d,this))return!1;return!0},filter:function(a,b){for(var c=this.length(),d=[],e=0;e<this.length()&&e<c;e++)this.has(e)&&b.invoke(a,this.get(e),e,this)&&d.push(this.get(e));return new rb(d)},forEach:function(a,b){for(var c=this.length(),d=0;d<this.length()&&d<c;d++)this.has(d)&&b.invoke(a,this.get(d),d,this)},hasOwnProperty:function(a,b){return this.has(b)},indexOf:function(a,b,c){var d=this.length(),e=void 0===c?0:Number(c);0>e&&(e=Math.max(d+e,0));for(var f=
e;f<d;f++)if(this.has(f)&&this.get(f)===b)return f;return-1},join:function(a,b){for(var c=[],d=0;d<this.length();d++)c.push(this.get(d));return c.join(b)},lastIndexOf:function(a,b,c){var d=this.length(),e=d-1;void 0!==c&&(e=0>c?d+c:Math.min(c,e));for(var f=e;0<=f;f--)if(this.has(f)&&this.get(f)===b)return f;return-1},map:function(a,b){for(var c=this.length(),d=[],e=0;e<this.length()&&e<c;e++)this.has(e)&&(d[e]=b.invoke(a,this.get(e),e,this));return new rb(d)},pop:function(){return this.pop()},push:function(a,
b){return this.push.apply(this,Array.prototype.slice.call(arguments,1))},reduce:function(a,b,c){var d=this.length(),e,f=0;if(void 0!==c)e=c;else{if(0===d)throw Error("TypeError: Reduce on List with no elements.");for(var g=0;g<d;g++)if(this.has(g)){e=this.get(g);f=g+1;break}if(g===d)throw Error("TypeError: Reduce on List with no elements.");}for(var h=f;h<d;h++)this.has(h)&&(e=b.invoke(a,e,this.get(h),h,this));return e},reduceRight:function(a,b,c){var d=this.length(),e,f=d-1;if(void 0!==c)e=c;else{if(0===
d)throw Error("TypeError: ReduceRight on List with no elements.");for(var g=1;g<=d;g++)if(this.has(d-g)){e=this.get(d-g);f=d-(g+1);break}if(g>d)throw Error("TypeError: ReduceRight on List with no elements.");}for(var h=f;0<=h;h--)this.has(h)&&(e=b.invoke(a,e,this.get(h),h,this));return e},reverse:function(){for(var a=ob(this),b=a.length-1,c=0;0<=b;b--,c++)a.hasOwnProperty(b)?this.set(c,a[b]):this.remove(c);return this},shift:function(){return this.shift()},slice:function(a,b,c){var d=this.length();
void 0===b&&(b=0);b=0>b?Math.max(d+b,0):Math.min(b,d);c=void 0===c?d:0>c?Math.max(d+c,0):Math.min(c,d);c=Math.max(b,c);for(var e=[],f=b;f<c;f++)e.push(this.get(f));return new rb(e)},some:function(a,b){for(var c=this.length(),d=0;d<this.length()&&d<c;d++)if(this.has(d)&&b.invoke(a,this.get(d),d,this))return!0;return!1},sort:function(a,b){var c=ob(this);void 0===b?c.sort():c.sort(function(e,f){return Number(b.invoke(a,e,f))});for(var d=0;d<c.length;d++)c.hasOwnProperty(d)?this.set(d,c[d]):this.remove(d);
return this},splice:function(a,b,c,d){return this.splice.apply(this,Array.prototype.splice.call(arguments,1,arguments.length-1))},toString:function(){return this.toString()},unshift:function(a,b){return this.unshift.apply(this,Array.prototype.slice.call(arguments,1))}};var qd=function(a){var b;b=Error.call(this,a);this.message=b.message;"stack"in b&&(this.stack=b.stack)};sa(qd,Error);var rd={charAt:1,concat:1,indexOf:1,lastIndexOf:1,match:1,replace:1,search:1,slice:1,split:1,substring:1,toLowerCase:1,toLocaleLowerCase:1,toString:1,toUpperCase:1,toLocaleUpperCase:1,trim:1},sd=new wa("break"),td=new wa("continue"),ud=function(a,b){return H(this,a)+H(this,b)},vd=function(a,b){return H(this,a)&&H(this,b)},wd=function(a,b,c){a=H(this,a);b=H(this,b);c=H(this,c);if(!(c instanceof rb))throw Error("Error: Non-List argument given to Apply instruction.");if(null===a||void 0===a){var d="TypeError: Can't read property "+
b+" of "+a+".";if(od())throw new qd(d);throw Error(d);}var e="number"===typeof a;if("boolean"===typeof a||e){if("toString"===b){if(e&&c.length()){var f=nd(c.get(0));try{return a.toString(f)}catch(y){}}return a.toString()}var g="TypeError: "+a+"."+b+" is not a function.";if(od())throw new qd(g);throw Error(g);}if("string"===typeof a){if(rd.hasOwnProperty(b)){var h=2;h=1;
var m=nd(c,void 0,h);return md(a[b].apply(a,m),this.h)}var n="TypeError: "+b+" is not a function";if(od())throw new qd(n);throw Error(n);}if(a instanceof rb){if(a.has(b)){var p=a.get(b);if(p instanceof ed){var q=ob(c);q.unshift(this.h);return p.invoke.apply(p,q)}var r="TypeError: "+b+" is not a function";if(od())throw new qd(r);throw Error(r);}if(0<=pd.supportedMethods.indexOf(b)){var t=ob(c);t.unshift(this.h);return pd[b].apply(a,t)}}if(a instanceof ed||a instanceof sb){if(a.has(b)){var u=a.get(b);
if(u instanceof ed){var v=ob(c);v.unshift(this.h);return u.invoke.apply(u,v)}var w="TypeError: "+b+" is not a function";if(od())throw new qd(w);throw Error(w);}if("toString"===b)return a instanceof ed?a.F:a.toString();if("hasOwnProperty"===b)return a.has.apply(a,ob(c))}if(a instanceof jd&&"toString"===b)return a.toString();var x="TypeError: Object has no '"+b+"' property.";if(od())throw new qd(x);throw Error(x);},xd=function(a,b){a=H(this,a);if("string"!==typeof a)throw Error("Invalid key name given for assignment.");
var c=this.h;if(!c.has(a))throw Error("Attempting to assign to undefined value "+b);var d=H(this,b);c.set(a,d);return d},yd=function(a){var b=Ba(this.h),c=db(b,Array.prototype.slice.apply(arguments));if(c instanceof wa)return c},zd=function(){return sd},Ad=function(a){for(var b=H(this,a),c=0;c<b.length;c++){var d=H(this,b[c]);if(d instanceof wa)return d}},Bd=function(a){for(var b=this.h,c=0;c<arguments.length-1;c+=2){var d=arguments[c];if("string"===typeof d){var e=H(this,arguments[c+1]);Aa(b,d,e,
!0)}}},Cd=function(){return td},Dd=function(a,b){return new wa(a,H(this,b))},Ed=function(a,b,c){var d=new rb;b=H(this,b);for(var e=0;e<b.length;e++)d.push(b[e]);var f=[51,a,d].concat(Array.prototype.splice.call(arguments,2,arguments.length-2));this.h.add(a,H(this,f))},Fd=function(a,b){return H(this,a)/H(this,b)},Gd=function(a,b){a=H(this,a);b=H(this,b);var c=a instanceof jd,d=b instanceof jd;return c||d?c&&d?a.h==b.h:!1:a==b},Hd=function(a){for(var b,c=0;c<arguments.length;c++)b=H(this,arguments[c]);
return b};function Id(a,b,c,d){for(var e=0;e<b();e++){var f=a(c(e)),g=db(f,d);if(g instanceof wa){if("break"===g.h)break;if("return"===g.h)return g}}}function Jd(a,b,c){if("string"===typeof b)return Id(a,function(){return b.length},function(f){return f},c);if(b instanceof sb||b instanceof rb||b instanceof ed){var d=b.Tb(),e=d.length();return Id(a,function(){return e},function(f){return d.get(f)},c)}}
var Kd=function(a,b,c){a=H(this,a);b=H(this,b);c=H(this,c);var d=this.h;return Jd(function(e){d.set(a,e);return d},b,c)},Ld=function(a,b,c){a=H(this,a);b=H(this,b);c=H(this,c);var d=this.h;return Jd(function(e){var f=Ba(d);Aa(f,a,e,!0);return f},b,c)},Md=function(a,b,c){a=H(this,a);b=H(this,b);c=H(this,c);var d=this.h;return Jd(function(e){var f=Ba(d);f.add(a,e);return f},b,c)},Od=function(a,b,c){a=H(this,a);b=H(this,b);c=H(this,c);var d=this.h;return Nd(function(e){d.set(a,e);return d},b,c)},Pd=
function(a,b,c){a=H(this,a);b=H(this,b);c=H(this,c);var d=this.h;return Nd(function(e){var f=Ba(d);Aa(f,a,e,!0);return f},b,c)},Qd=function(a,b,c){a=H(this,a);b=H(this,b);c=H(this,c);var d=this.h;return Nd(function(e){var f=Ba(d);f.add(a,e);return f},b,c)};
function Nd(a,b,c){if("string"===typeof b)return Id(a,function(){return b.length},function(d){return b[d]},c);if(b instanceof rb)return Id(a,function(){return b.length()},function(d){return b.get(d)},c);if(od())throw new qd("The value is not iterable.");throw new TypeError("The value is not iterable.");}
var Rd=function(a,b,c,d){function e(p,q){for(var r=0;r<f.length();r++){var t=f.get(r);q.add(t,p.get(t))}}var f=H(this,a);if(!(f instanceof rb))throw Error("TypeError: Non-List argument given to ForLet instruction.");var g=this.h;d=H(this,d);var h=Ba(g);for(e(g,h);eb(h,b);){var m=db(h,d);if(m instanceof wa){if("break"===m.h)break;if("return"===m.h)return m}var n=Ba(g);e(h,n);eb(n,c);h=n}},Sd=function(a,b,c){var d=this.h,e=H(this,b);if(!(e instanceof rb))throw Error("Error: non-List value given for Fn argument names.");
var f=Array.prototype.slice.call(arguments,2);return new ed(a,function(){return function(g){var h=Ba(d);void 0===h.h&&(h.h=this.h.h);for(var m=Array.prototype.slice.call(arguments,0),n=0;n<m.length;n++)if(m[n]=H(this,m[n]),m[n]instanceof wa)return m[n];for(var p=e.get("length"),q=0;q<p;q++)q<m.length?h.add(e.get(q),m[q]):h.add(e.get(q),void 0);h.add("arguments",new rb(m));var r=db(h,f);if(r instanceof wa)return"return"===r.h?r.s:r}}())},Td=function(a){a=H(this,a);var b=this.h,c=!1;if(c&&!b.has(a))throw new ReferenceError(a+" is not defined.");return b.get(a)},Ud=function(a,b){var c;a=H(this,a);b=H(this,b);if(void 0===a||null===a){var d="TypeError: Cannot read properties of "+a+" (reading '"+b+"')";if(od())throw new qd(d);throw Error(d);}if(a instanceof sb||a instanceof rb||a instanceof ed)c=a.get(b);else if("string"===typeof a)"length"===b?c=a.length:qb(b)&&(c=a[b]);else if(a instanceof jd)return;
return c},Vd=function(a,b){return H(this,a)>H(this,b)},Wd=function(a,b){return H(this,a)>=H(this,b)},Xd=function(a,b){a=H(this,a);b=H(this,b);a instanceof jd&&(a=a.h);b instanceof jd&&(b=b.h);return a===b},Yd=function(a,b){return!Xd.call(this,a,b)},Zd=function(a,b,c){var d=[];H(this,a)?d=H(this,b):c&&(d=H(this,c));var e=db(this.h,d);if(e instanceof wa)return e},$d=function(a,b){return H(this,a)<H(this,b)},ae=function(a,b){return H(this,a)<=H(this,b)},be=function(a){for(var b=new rb,c=0;c<arguments.length;c++){var d=
H(this,arguments[c]);b.push(d)}return b},ce=function(a){for(var b=new sb,c=0;c<arguments.length-1;c+=2){var d=H(this,arguments[c])+"",e=H(this,arguments[c+1]);b.set(d,e)}return b},de=function(a,b){return H(this,a)%H(this,b)},ee=function(a,b){return H(this,a)*H(this,b)},fe=function(a){return-H(this,a)},ge=function(a){return!H(this,a)},he=function(a,b){return!Gd.call(this,a,b)},ie=function(){return null},je=function(a,b){return H(this,a)||H(this,b)},ke=function(a,b){var c=H(this,a);H(this,b);return c},
le=function(a){return H(this,a)},me=function(a){return Array.prototype.slice.apply(arguments)},ne=function(a){return new wa("return",H(this,a))},oe=function(a,b,c){a=H(this,a);b=H(this,b);c=H(this,c);if(null===a||void 0===a){var d="TypeError: Can't set property "+b+" of "+a+".";if(od())throw new qd(d);throw Error(d);}(a instanceof ed||a instanceof rb||a instanceof sb)&&a.set(b,c);return c},pe=function(a,b){return H(this,a)-H(this,b)},qe=function(a,b,c){a=H(this,a);var d=H(this,b),e=H(this,c);if(!Ha(d)||
!Ha(e))throw Error("Error: Malformed switch instruction.");for(var f,g=!1,h=0;h<d.length;h++)if(g||a===H(this,d[h]))if(f=H(this,e[h]),f instanceof wa){var m=f.h;if("break"===m)return;if("return"===m||"continue"===m)return f}else g=!0;if(e.length===d.length+1&&(f=H(this,e[e.length-1]),f instanceof wa&&("return"===f.h||"continue"===f.h)))return f},re=function(a,b,c){return H(this,a)?H(this,b):H(this,c)},se=function(a){a=H(this,a);return a instanceof ed?"function":typeof a},te=function(a){for(var b=
this.h,c=0;c<arguments.length;c++){var d=arguments[c];"string"!==typeof d||b.add(d,void 0)}},ue=function(a,b,c,d){var e=H(this,d);if(H(this,c)){var f=db(this.h,e);if(f instanceof wa){if("break"===f.h)return;if("return"===f.h)return f}}for(;H(this,a);){var g=db(this.h,e);if(g instanceof wa){if("break"===g.h)break;if("return"===g.h)return g}H(this,b)}},ve=function(a){return~Number(H(this,a))},we=function(a,b){return Number(H(this,a))<<Number(H(this,b))},xe=function(a,b){return Number(H(this,a))>>Number(H(this,
b))},ye=function(a,b){return Number(H(this,a))>>>Number(H(this,b))},ze=function(a,b){return Number(H(this,a))&Number(H(this,b))},Ae=function(a,b){return Number(H(this,a))^Number(H(this,b))},Be=function(a,b){return Number(H(this,a))|Number(H(this,b))},Ce=function(){},De=function(a,b,c,d,e){var f=!0;try{var g=H(this,c);if(g instanceof wa)return g}catch(r){if(!(r instanceof qd&&a))throw f=r instanceof qd,r;var h=Ba(this.h),m=new jd(r);h.add(b,m);var n=H(this,d),p=db(h,n);if(p instanceof wa)return p}finally{if(f&&
void 0!==e){var q=H(this,e);if(q instanceof wa)return q}}};var Fe=function(){this.h=new fb;Ee(this)};Fe.prototype.execute=function(a){return this.h.s(a)};var Ee=function(a){var b=function(c,d){var e=new ed(String(c),d);e.Eb();a.h.h.set(String(c),e)};b("map",ce);b("and",Zc);b("contains",bd);b("equals",$c);b("or",ad);b("startsWith",cd);b("variable",dd)};var Ie=function(){this.h=new fb;He(this)};Ie.prototype.execute=function(a){return Je(this.h.s(a))};
var Ke=function(a,b,c){return Je(a.h.F(b,c))},He=function(a){var b=function(c,d){var e=String(c),f=new ed(e,d);f.Eb();a.h.h.set(e,f)};b(0,ud);b(1,vd);b(2,wd);b(3,xd);b(56,ze);b(57,we);b(58,ve);b(59,Be);b(60,xe);b(61,ye);b(62,Ae);b(53,yd);b(4,zd);b(5,Ad);b(52,Bd);b(6,Cd);b(49,Dd);b(7,be);b(8,ce);b(9,Ad);b(50,Ed);b(10,Fd);b(12,Gd);b(13,Hd);b(51,Sd);b(47,Kd);b(54,Ld);b(55,Md);b(63,Rd);b(64,Od);b(65,Pd);b(66,Qd);b(15,Td);b(16,Ud);b(17,Ud);b(18,Vd);b(19,Wd);b(20,Xd);b(21,Yd);b(22,Zd);b(23,$d);b(24,ae);
b(25,de);b(26,ee);b(27,fe);b(28,ge);b(29,he);b(45,ie);b(30,je);b(32,ke);b(33,ke);b(34,le);b(35,le);b(46,me);b(36,ne);b(43,oe);b(37,pe);b(38,qe);b(39,re);b(67,De);b(40,se);b(44,Ce);b(41,te);b(42,ue)};function Je(a){if(a instanceof wa||a instanceof ed||a instanceof rb||a instanceof sb||a instanceof jd||null===a||void 0===a||"string"===typeof a||"number"===typeof a||"boolean"===typeof a)return a};function Le(a){switch(a){case 1:return"1";case 2:case 4:return"0";default:return"-"}};var Me=function(){var a=function(b){return{toString:function(){return b}}};return{kk:a("consent"),fi:a("convert_case_to"),gi:a("convert_false_to"),hi:a("convert_null_to"),ii:a("convert_true_to"),ji:a("convert_undefined_to"),un:a("debug_mode_metadata"),ka:a("function"),Tg:a("instance_name"),Sk:a("live_only"),Tk:a("malware_disabled"),Uk:a("metadata"),Xk:a("original_activity_id"),Jn:a("original_vendor_template_id"),In:a("once_on_load"),Wk:a("once_per_event"),ej:a("once_per_load"),Nn:a("priority_override"),
On:a("respected_consent_types"),kj:a("setup_tags"),oe:a("tag_id"),pj:a("teardown_tags")}}();var hf;
var jf=[],kf=[],lf=[],mf=[],nf=[],of={},pf,qf,rf=function(a){qf=qf||a},sf=function(a){},tf,uf=[],vf=function(a,b){var c={};c[Me.ka]="__"+a;for(var d in b)b.hasOwnProperty(d)&&(c["vtp_"+d]=b[d]);return c},wf=function(a,
b){var c=a[Me.ka],d=b&&b.event;if(!c)throw Error("Error: No function name given for function call.");var e=of[c],f=b&&2===b.type&&d.reportMacroDiscrepancy&&e&&-1!==uf.indexOf(c),g={},h={},m;for(m in a)a.hasOwnProperty(m)&&0===m.indexOf("vtp_")&&(e&&(g[m]=a[m]),!e||f)&&(h[m.substr(4)]=a[m]);e&&d&&d.cachedModelValues&&(g.vtp_gtmCachedValues=d.cachedModelValues);if(b){if(null==b.name){var n;a:{var p=b.type,q=b.index;if(null==q)n="";else{var r;switch(p){case 2:r=jf[q];break;case 1:r=mf[q];break;default:n=
"";break a}var t=r&&r[Me.Tg];n=t?String(t):""}}b.name=n}e&&(g.vtp_gtmEntityIndex=b.index,g.vtp_gtmEntityName=b.name)}var u,v;e&&(u=e(g));if(!e||f)v=hf(c,h,b);f&&d&&(pb(u)?typeof u!==typeof v&&d.reportMacroDiscrepancy(d.id,c):u!==v&&d.reportMacroDiscrepancy(d.id,c));return e?u:v},yf=function(a,b,c){c=c||[];var d={},e;for(e in a)a.hasOwnProperty(e)&&(d[e]=xf(a[e],b,c));return d},xf=function(a,b,c){if(Ha(a)){var d;switch(a[0]){case "function_id":return a[1];case "list":d=[];for(var e=1;e<a.length;e++)d.push(xf(a[e],
b,c));return d;case "macro":var f=a[1];if(c[f])return;var g=jf[f];if(!g||b.isBlocked(g))return;c[f]=!0;var h=String(g[Me.Tg]);try{var m=yf(g,b,c);m.vtp_gtmEventId=b.id;b.priorityId&&(m.vtp_gtmPriorityId=b.priorityId);d=wf(m,{event:b,index:f,type:2,name:h});tf&&(d=tf.xl(d,m))}catch(y){b.logMacroError&&b.logMacroError(y,Number(f),h),d=!1}c[f]=!1;return d;case "map":d={};for(var n=1;n<a.length;n+=2)d[xf(a[n],b,c)]=xf(a[n+1],b,c);return d;case "template":d=[];for(var p=!1,q=1;q<a.length;q++){var r=xf(a[q],
b,c);qf&&(p=p||qf.km(r));d.push(r)}return qf&&p?qf.zl(d):d.join("");case "escape":d=xf(a[1],b,c);if(qf&&Ha(a[1])&&"macro"===a[1][0]&&qf.lm(a))return qf.Pm(d);d=String(d);for(var t=2;t<a.length;t++)Ne[a[t]]&&(d=Ne[a[t]](d));return d;case "tag":var u=a[1];if(!mf[u])throw Error("Unable to resolve tag reference "+u+".");return d={Aj:a[2],index:u};case "zb":var v={arg0:a[2],arg1:a[3],ignore_case:a[5]};v[Me.ka]=a[1];var w=zf(v,b,c),x=!!a[4];return x||2!==w?x!==(1===w):null;default:throw Error("Attempting to expand unknown Value type: "+
a[0]+".");}}return a},zf=function(a,b,c){try{return pf(yf(a,b,c))}catch(d){JSON.stringify(a)}return 2},Af=function(a){var b=a[Me.ka];if(!b)throw Error("Error: No function name given for function call.");return!!of[b]};var Bf=function(a,b,c){var d;d=Error.call(this,c);this.message=d.message;"stack"in d&&(this.stack=d.stack);this.h=a};sa(Bf,Error);function Cf(a,b){if(Ha(a)){Object.defineProperty(a,"context",{value:{line:b[0]}});for(var c=1;c<a.length;c++)Cf(a[c],b[c])}};var Df=function(a,b){var c;c=Error.call(this);this.message=c.message;"stack"in c&&(this.stack=c.stack);this.Km=a;this.s=b;this.h=[]};sa(Df,Error);var Ff=function(){return function(a,b){a instanceof Df||(a=new Df(a,Ef));b&&a.h.push(b);throw a;}};function Ef(a){if(!a.length)return a;a.push({id:"main",line:0});for(var b=a.length-1;0<b;b--)Ga(a[b].id)&&a.splice(b++,1);for(var c=a.length-1;0<c;c--)a[c].line=a[c-1].line;a.splice(0,1);return a};var If=function(a){function b(r){for(var t=0;t<r.length;t++)d[r[t]]=!0}for(var c=[],d=[],e=Gf(a),f=0;f<kf.length;f++){var g=kf[f],h=Hf(g,e);if(h){for(var m=g.add||[],n=0;n<m.length;n++)c[m[n]]=!0;b(g.block||[])}else null===h&&b(g.block||[]);}for(var p=[],q=0;q<mf.length;q++)c[q]&&!d[q]&&(p[q]=!0);return p},Hf=function(a,b){for(var c=a["if"]||[],d=0;d<c.length;d++){var e=b(c[d]);if(0===e)return!1;
if(2===e)return null}for(var f=a.unless||[],g=0;g<f.length;g++){var h=b(f[g]);if(2===h)return null;if(1===h)return!1}return!0},Gf=function(a){var b=[];return function(c){void 0===b[c]&&(b[c]=zf(lf[c],a));return b[c]}};var Jf={xl:function(a,b){b[Me.fi]&&"string"===typeof a&&(a=1==b[Me.fi]?a.toLowerCase():a.toUpperCase());b.hasOwnProperty(Me.hi)&&null===a&&(a=b[Me.hi]);b.hasOwnProperty(Me.ji)&&void 0===a&&(a=b[Me.ji]);b.hasOwnProperty(Me.ii)&&!0===a&&(a=b[Me.ii]);b.hasOwnProperty(Me.gi)&&!1===a&&(a=b[Me.gi]);return a}};var Kf=function(){this.h={}},Mf=function(a,b){var c=Lf.s,d;null!=(d=c.h)[a]||(d[a]=[]);c.h[a].push(function(){return b.apply(null,ja(ta.apply(0,arguments)))})};function Nf(a,b,c,d){if(a)for(var e=0;e<a.length;e++){var f=void 0,g="A policy function denied the permission request";try{f=a[e](b,c,d),g+="."}catch(h){g="string"===typeof h?g+(": "+h):h instanceof Error?g+(": "+h.message):g+"."}if(!f)throw new Bf(c,d,g);}}
function Of(a,b,c){return function(){var d=arguments[0];if(d){var e=a.h[d],f=a.h.all;if(e||f){var g=c.apply(void 0,Array.prototype.slice.call(arguments,0));Nf(e,b,d,g);Nf(f,b,d,g)}}}};var Pf=[],Qf=function(a){return void 0==Pf[a]?!1:Pf[a]};var Uf=function(){var a=data.permissions||{},b=Rf.ctid,c=this;this.s=new Kf;this.h={};var d=Qf(15),e={},f={},g=Of(this.s,b,function(){var h=arguments[0];return h&&e[h]?e[h].apply(void 0,Array.prototype.slice.call(arguments,0)):{}});l(a,function(h,m){var n={};l(m,function(q,r){var t=Sf(q,r);n[q]=t.assert;e[q]||(e[q]=t.K);d&&t.sj&&!f[q]&&(f[q]=t.sj)});var p;d&&(p=function(q){var r=ta.apply(1,arguments);if(!n[q])throw Tf(q,{},"The requested additional permission "+q+" is not configured.");g.apply(null,
[q].concat(ja(r)))});c.h[h]=function(q,r){var t=n[q];if(!t)throw Tf(q,{},"The requested permission "+q+" is not configured.");var u=Array.prototype.slice.call(arguments,0);t.apply(void 0,u);g.apply(void 0,u);if(d){var v=f[q];v&&v.apply(null,[p].concat(ja(u.slice(1))))}}})},Vf=function(a){return Lf.h[a]||function(){}};
function Sf(a,b){var c=vf(a,b);c.vtp_permissionName=a;c.vtp_createPermissionError=Tf;try{return wf(c)}catch(d){return{assert:function(e){throw new Bf(e,{},"Permission "+e+" is unknown.");},K:function(){if(Qf(15))throw new Bf(a,{},"Permission "+a+" is unknown.");for(var e={},f=0;f<arguments.length;++f)e["arg"+(f+1)]=arguments[f];return e}}}}function Tf(a,b,c){return new Bf(a,b,c)};var Wf=!1;var Xf={};Xf.qn=Oa('');Xf.Bl=Oa('');var Yf=Wf,Zf=Xf.Bl,$f=Xf.qn;
var dg=function(a){var b={},c=0;l(a,function(e,f){if(null!=f)if(f=(""+f).replace(/~/g,"~~"),ag.hasOwnProperty(e))b[ag[e]]=f;else if(bg.hasOwnProperty(e)){var g=bg[e],h=f;b.hasOwnProperty(g)||(b[g]=h)}else if("category"===e)for(var m=f.split("/",5),n=0;n<m.length;n++){var p=b,q=cg[n],r=m[n];p.hasOwnProperty(q)||(p[q]=r)}else if(27>c){var t=String.fromCharCode(10>c?48+c:65+c-10);b["k"+t]=(""+String(e)).replace(/~/g,"~~");b["v"+t]=f;c++}});var d=[];l(b,function(e,f){d.push(""+e+f)});return d.join("~")},
ag={item_id:"id",item_name:"nm",item_brand:"br",item_category:"ca",item_category2:"c2",item_category3:"c3",item_category4:"c4",item_category5:"c5",item_variant:"va",price:"pr",quantity:"qt",coupon:"cp",item_list_name:"ln",index:"lp",item_list_id:"li",discount:"ds",affiliation:"af",promotion_id:"pi",promotion_name:"pn",creative_name:"cn",creative_slot:"cs",location_id:"lo"},bg={id:"id",name:"nm",brand:"br",variant:"va",list_name:"ln",list_position:"lp",list:"ln",position:"lp",creative:"cn"},cg=["ca",
"c2","c3","c4","c5"];var eg=function(a){var b=[];l(a,function(c,d){null!=d&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(String(d)))});return b.join("&")},fg=function(a,b,c,d){this.ma=a.ma;this.Gc=a.Gc;this.kh=a.kh;this.s=b;this.F=c;this.C=eg(a.ma);this.h=eg(a.kh);this.M=this.h.length;if(d&&16384<this.M)throw Error("EVENT_TOO_LARGE");};
var gg=function(){this.events=[];this.h="";this.ma={};this.s="";this.F=0;this.M=this.C=!1;};gg.prototype.add=function(a){return this.X(a)?(this.events.push(a),this.h=a.C,this.ma=a.ma,this.s=a.s,this.F+=a.M,this.C=a.F,!0):!1};gg.prototype.X=function(a){return this.events.length?20<=this.events.length||16384<=a.M+this.F?!1:this.s===a.s&&this.C===a.F&&this.Oa(a):
!0};gg.prototype.Oa=function(a){var b=this;if(this.M){var c=Object.keys(this.ma);return c.length===Object.keys(a.ma).length&&c.every(function(d){return a.ma.hasOwnProperty(d)&&String(b.ma[d])===String(a.ma[d])})}return this.h===a.C};
var hg=function(a,b){l(a,function(c,d){null!=d&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(d))})},ig=function(a,b){var c=[];a.C&&c.push(a.C);b&&c.push("_s="+b);hg(a.Gc,c);var d=!1;a.h&&(c.push(a.h),d=!0);var e=c.join("&"),f="",g=e.length+a.s.length+1;d&&2048<g&&(f=c.pop(),e=c.join("&"));return{params:e,body:f}},jg=function(a,b){var c=a.events;if(1==c.length)return ig(c[0],b);var d=[];a.h&&d.push(a.h);for(var e={},f=0;f<c.length;f++)l(c[f].Gc,function(t,u){null!=u&&(e[t]=e[t]||{},e[t][String(u)]=
e[t][String(u)]+1||1)});var g={};l(e,function(t,u){var v,w=-1,x=0;l(u,function(y,A){x+=A;var B=(y.length+t.length+2)*(A-1);B>w&&(v=y,w=B)});x==c.length&&(g[t]=v)});hg(g,d);b&&d.push("_s="+b);for(var h=d.join("&"),m=[],n={},p=0;p<c.length;n={Eh:void 0},p++){var q=[];n.Eh={};l(c[p].Gc,function(t){return function(u,v){g[u]!=""+v&&(t.Eh[u]=v)}}(n));c[p].h&&q.push(c[p].h);hg(n.Eh,q);m.push(q.join("&"))}var r=m.join("\r\n");return{params:h,body:r}};var ng=["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"];function og(a,b){a=String(a);b=String(b);var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)===c}var pg=new Ka;function qg(a,b,c){var d=c?"i":void 0;try{var e=String(b)+d,f=pg.get(e);f||(f=new RegExp(b,d),pg.set(e,f));return f.test(a)}catch(g){return!1}}function rg(a,b){return 0<=String(a).indexOf(String(b))}function sg(a,b){return String(a)===String(b)}
function tg(a,b){return Number(a)>=Number(b)}function ug(a,b){return Number(a)<=Number(b)}function vg(a,b){return Number(a)>Number(b)}function wg(a,b){return Number(a)<Number(b)}function xg(a,b){return 0===String(a).indexOf(String(b))};var Eg=/^[1-9a-zA-Z_-][1-9a-c][1-9a-v]\d$/;function Fg(a,b){for(var c="",d=!0;7<a;){var e=a&31;a>>=5;d?d=!1:e|=32;c="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[e]+c}a<<=2;d||(a|=32);return c="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[a|b]+c};var Gg=/^([a-z][a-z0-9]*):(!|\?)(\*|string|boolean|number|Fn|PixieMap|List|OpaqueValue)$/i,Hg={Fn:"function",PixieMap:"Object",List:"Array"},J=function(a,b,c){for(var d=0;d<b.length;d++){var e=Gg.exec(b[d]);if(!e)throw Error("Internal Error in "+a);var f=e[1],g="!"===e[2],h=e[3],m=c[d];if(null==m){if(g)throw Error("Error in "+a+". Required argument "+f+" not supplied.");}else if("*"!==h){var n=typeof m;m instanceof ed?n="Fn":m instanceof rb?n="List":m instanceof sb?n="PixieMap":m instanceof jd&&(n=
"OpaqueValue");if(n!=h)throw Error("Error in "+a+". Argument "+f+" has type "+(Hg[n]||n)+", which does not match required type "+(Hg[h]||h)+".");}}};function Ig(a){return""+a}
function Jg(a,b){var c=[];return c};var Kg=function(a,b){var c=new ed(a,function(){for(var d=Array.prototype.slice.call(arguments,0),e=0;e<d.length;e++)d[e]=H(this,d[e]);try{return b.apply(this,d)}catch(g){if(od())throw new qd(g.message);throw g;}});c.Eb();return c},Lg=function(a,b){var c=new sb,d;for(d in b)if(b.hasOwnProperty(d)){var e=b[d];Fa(e)?c.set(d,Kg(a+"_"+d,e)):lb(e)?c.set(d,Lg(a+"_"+d,
e)):(Ga(e)||k(e)||"boolean"===typeof e)&&c.set(d,e)}c.Eb();return c};var Mg=function(a,b){J(I(this),["apiName:!string","message:?string"],arguments);var c={},d=new sb;return d=Lg("AssertApiSubject",c)};var Ng=function(a,b){J(I(this),["actual:?*","message:?string"],arguments);if(a instanceof ld)throw Error("Argument actual cannot have type Promise. Assertions on asynchronous code aren't supported.");var c={},d=new sb;return d=Lg("AssertThatSubject",c)};function Og(a){return function(){for(var b=[],c=this.h,d=0;d<arguments.length;++d)b.push(nd(arguments[d],c));return md(a.apply(null,b))}}var Qg=function(){for(var a=Math,b=Pg,c={},d=0;d<b.length;d++){var e=b[d];a.hasOwnProperty(e)&&(c[e]=Og(a[e].bind(a)))}return c};var Rg=function(a){var b;return b};var Sg=function(a){var b;J(I(this),["uri:!string"],arguments);try{b=decodeURIComponent(a)}catch(c){}return b};var Tg=function(a){try{return encodeURI(a)}catch(b){}};var Ug=function(a){try{return encodeURIComponent(a)}catch(b){}};function Vg(a,b){var c=!1;J(I(this),["booleanExpression:!string","context:?PixieMap"],arguments);var d=JSON.parse(a);if(!d)throw Error("Invalid boolean expression string was given.");var e=b?nd(b):{};c=Wg(d,e);return c}
var Xg=function(a,b){for(var c=0;c<b.length;c++){if(void 0===a)return;a=a[b[c]]}return a},Yg=function(a,b){var c=b.preHit;if(c){var d=a[0];switch(d){case "hitData":return 2>a.length?void 0:Xg(c.getHitData(a[1]),a.slice(2));case "metadata":return 2>a.length?void 0:Xg(c.getMetadata(a[1]),a.slice(2));case "eventName":return c.getEventName();case "destinationId":return c.getDestinationId();default:throw Error(d+" is not a valid field that can be accessed\n                      from PreHit data.");}}},
Zg=function(a,b){if(a){if(void 0!==a.contextValue){var c;a:{var d=a.contextValue,e=d.keyParts;if(e&&0!==e.length){var f=d.namespaceType;switch(f){case 1:c=Yg(e,b);break a;case 2:var g=b.macro;c=g?g[e[0]]:void 0;break a;default:throw Error("Unknown Namespace Type used: "+f);}}c=void 0}return c}if(void 0!==a.booleanExpressionValue)return Wg(a.booleanExpressionValue,b);if(void 0!==a.booleanValue)return!!a.booleanValue;if(void 0!==a.stringValue)return String(a.stringValue);if(void 0!==a.integerValue)return Number(a.integerValue);
if(void 0!==a.doubleValue)return Number(a.doubleValue);throw Error("Unknown field used for variable of type ExpressionValue:"+a);}},Wg=function(a,b){var c=a.args;if(!Ha(c)||0===c.length)throw Error('Invalid boolean expression format. Expected "args":'+c+" property to\n         be non-empty array.");var d=function(g){return Zg(g,b)};switch(a.type){case 1:for(var e=0;e<c.length;e++)if(d(c[e]))return!0;return!1;case 2:for(var f=0;f<c.length;f++)if(!d(c[f]))return!1;return 0<c.length;case 3:return!d(c[0]);
case 4:return qg(d(c[0]),d(c[1]),!1);case 5:return sg(d(c[0]),d(c[1]));case 6:return xg(d(c[0]),d(c[1]));case 7:return og(d(c[0]),d(c[1]));case 8:return rg(d(c[0]),d(c[1]));case 9:return wg(d(c[0]),d(c[1]));case 10:return ug(d(c[0]),d(c[1]));case 11:return vg(d(c[0]),d(c[1]));case 12:return tg(d(c[0]),d(c[1]));default:throw Error('Invalid boolean expression format. Expected "type" property tobe a positive integer which is less than 13.');}};
Vg.D="internal.evaluateBooleanExpression";var $g=function(a){J(I(this),["message:?string"],arguments);};var ah=function(a,b){J(I(this),["min:!number","max:!number"],arguments);return Ja(a,b)};var bh=function(){return(new Date).getTime()};var ch=function(a){if(null===a)return"null";if(a instanceof rb)return"array";if(a instanceof ed)return"function";if(a instanceof jd){a=a.h;if(void 0===a.constructor||void 0===a.constructor.name){var b=String(a);return b.substring(8,b.length-1)}return String(a.constructor.name)}return typeof a};var dh=function(a){function b(c){return function(d){try{return c(d)}catch(e){(Yf||$f)&&a.call(this,e.message)}}}return{parse:b(function(c){return md(JSON.parse(c))}),stringify:b(function(c){return JSON.stringify(nd(c))})}};var ih=function(a){return Na(nd(a,this.h))};var jh=function(a){return Number(nd(a,this.h))};var kh=function(a){return null===a?"null":void 0===a?"undefined":a.toString()};var lh=function(a,b,c){var d=null,e=!1;return e?d:null};var Pg="floor ceil round max min abs pow sqrt".split(" ");var mh=function(){var a={};return{Ol:function(b){return a.hasOwnProperty(b)?a[b]:void 0},hn:function(b,c){a[b]=c},reset:function(){a={}}}},nh=function(a,b){return function(){var c=Array.prototype.slice.call(arguments,0);c.unshift(b);return ed.prototype.invoke.apply(a,c)}},oh=function(a,b){J(I(this),["apiName:!string","mock:?*"],arguments);};var ph={};
ph.keys=function(a){return new rb};
ph.values=function(a){return new rb};
ph.entries=function(a){return new rb};
ph.freeze=function(a){return a};ph.delete=function(a,b){return!1};var K=function(a,b,c){var d=a.h.h;if(!d)throw Error("Missing program state.");if(d.Wm){try{d.uj.apply(null,Array.prototype.slice.call(arguments,1))}catch(e){throw Ab("TAGGING",21),e;}return}d.uj.apply(null,Array.prototype.slice.call(arguments,1))};var rh=function(){this.h={};this.s={};};rh.prototype.get=function(a,b){var c=this.h.hasOwnProperty(a)?this.h[a]:void 0;return c};
rh.prototype.add=function(a,b,c){if(this.h.hasOwnProperty(a))throw"Attempting to add a function which already exists: "+a+".";if(this.s.hasOwnProperty(a))throw"Attempting to add an API with an existing private API name: "+a+".";this.h[a]=c?void 0:Fa(b)?Kg(a,b):Lg(a,b)};function sh(a,b){var c=void 0;return c};function th(){var a={};
return a};var vh=function(a){return uh?C.querySelectorAll(a):null},wh=function(a,b){if(!uh)return null;if(Element.prototype.closest)try{return a.closest(b)}catch(e){return null}var c=Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector,d=a;if(!C.documentElement.contains(d))return null;do{try{if(c.call(d,b))return d}catch(e){break}d=d.parentElement||d.parentNode}while(null!==d&&1===d.nodeType);
return null},xh=!1;if(C.querySelectorAll)try{var yh=C.querySelectorAll(":root");yh&&1==yh.length&&yh[0]==C.documentElement&&(xh=!0)}catch(a){}var uh=xh;var L=function(a){Ab("GTM",a)};
var zh=function(a){return null==a?"":k(a)?Qa(String(a)):"e0"},Bh=function(a){return a.replace(Ah,"")},Dh=function(a){return Ch(a.replace(/\s/g,""))},Ch=function(a){return Qa(a.replace(Eh,"").toLowerCase())},Gh=function(a){a=a.replace(/[\s-()/.]/g,"");"+"!==a.charAt(0)&&(a="+"+a);return Fh.test(a)?a:"e0"},Ih=function(a){var b=a.toLowerCase().split("@");if(2==b.length){var c=b[0];/^(gmail|googlemail)\./.test(b[1])&&(c=c.replace(/\./g,""));c=c+"@"+b[1];if(Hh.test(c))return c}return"e0"},Lh=function(a){if(""===
a||"e0"===a)return Promise.resolve(a);if(z.crypto&&z.crypto.subtle){if(Jh.test(a))return Promise.resolve(a);try{var b=Kh(a);return z.crypto.subtle.digest("SHA-256",b).then(function(c){var d=Array.from(new Uint8Array(c)).map(function(e){return String.fromCharCode(e)}).join("");return z.btoa(d).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}).catch(function(){return"e2"})}catch(c){return Promise.resolve("e2")}}else return Promise.resolve("e1")},Kh=function(a){var b;if(z.TextEncoder)b=(new TextEncoder("utf-8")).encode(a);
else{for(var c=[],d=0;d<a.length;d++){var e=a.charCodeAt(d);128>e?c.push(e):2048>e?c.push(192|e>>6,128|e&63):55296>e||57344<=e?c.push(224|e>>12,128|e>>6&63,128|e&63):(e=65536+((e&1023)<<10|a.charCodeAt(++d)&1023),c.push(240|e>>18,128|e>>12&63,128|e>>6&63,128|e&63))}b=new Uint8Array(c)}return b},Eh=/[0-9`~!@#$%^&*()_\-+=:;<>,.?|/\\[\]]/g,Hh=/^\S+@\S+\.\S+$/,Fh=/^\+\d{10,15}$/,Ah=/[.~]/g,Mh=/^[0-9A-Za-z_-]{43}$/,Jh=/^[0-9A-Fa-f]{64}$/,Nh={},Oh=(Nh.email="em",Nh.phone_number="pn",Nh.first_name="fn",
Nh.last_name="ln",Nh.street="sa",Nh.city="ct",Nh.region="rg",Nh.country="co",Nh.postal_code="pc",Nh.error_code="ec",Nh),Ph={},Qh=(Ph.email="sha256_email_address",Ph.phone_number="sha256_phone_number",Ph.first_name="sha256_first_name",Ph.last_name="sha256_last_name",Ph.street="sha256_street",Ph),Sh=function(a,b){a.some(function(c){c.value&&Rh.indexOf(c.name)})?b(a):z.Promise?Promise.all(a.map(function(c){return c.value&&-1!==Rh.indexOf(c.name)?Lh(c.value).then(function(d){c.value=d}):Promise.resolve()})).then(function(){b(a)}).catch(function(){b([])}):
b([])},Uh=function(a,b){var c=Th(a);Sh(c,b)},Th=function(a){function b(r,t,u,v){var w=zh(r);""!==w&&(Jh.test(w)?h.push({name:t,value:w,index:v}):h.push({name:t,value:u(w),index:v}))}function c(r,t){var u=r;if(k(u)||Ha(u)){u=Ha(r)?r:[r];for(var v=0;v<u.length;++v){var w=zh(u[v]),x=Jh.test(w);t&&!x&&L(89);!t&&x&&L(88)}}}function d(r,t){var u=r[t];c(u,!1);var v=Qh[t];r.hasOwnProperty(v)&&(r.hasOwnProperty(t)&&L(90),u=r[v],c(u,!0));return u}function e(r,t,u){var v=d(r,t);v=Ha(v)?v:[v];for(var w=0;w<v.length;++w)b(v[w],
t,u)}function f(r,t,u,v){var w=d(r,t);b(w,t,u,v)}function g(r){return function(t){L(64);return r(t)}}var h=[];if("https:"!==z.location.protocol)return h.push({name:"error_code",value:"e3",index:void 0}),h;e(a,"email",Ih);e(a,"phone_number",Gh);e(a,"first_name",g(Dh));e(a,"last_name",g(Dh));var m=a.home_address||{};e(m,"street",g(Ch));e(m,"city",g(Ch));e(m,"postal_code",g(Bh));e(m,"region",g(Ch));e(m,"country",g(Bh));var n=a.address||{};n=Ha(n)?n:[n];for(var p=0;p<n.length;p++){var q=n[p];f(q,"first_name",
Dh,p);f(q,"last_name",Dh,p);f(q,"street",Ch,p);f(q,"city",Ch,p);f(q,"postal_code",Bh,p);f(q,"region",Ch,p);f(q,"country",Bh,p)}return h},Wh=function(a,b){Uh(a,function(c){var d=Vh(c);b(d.Nf,d.Lh)})},Vh=function(a){for(var b=["tv.1"],c=0,d=0;d<a.length;++d){var e=a[d].name,f=a[d].value,g=a[d].index,h=Oh[e];h&&f&&(-1===Rh.indexOf(e)||/^e\d+$/.test(f)||Mh.test(f)||Jh.test(f))&&(void 0!==g&&(h+=g),b.push(h+"."+f),c++)}1===a.length&&"error_code"===a[0].name&&(c=0);return{Nf:encodeURIComponent(b.join("~")),
Lh:c}},Xh=function(a){if(z.Promise)try{return new Promise(function(b){Wh(a,function(c,d){b({Kj:c,Lh:d})})})}catch(b){}},Rh=Object.freeze(["email","phone_number","first_name","last_name","street"]);var N={g:{Ea:"ad_personalization",J:"ad_storage",N:"ad_user_data",R:"analytics_storage",Va:"region",ud:"consent_updated",We:"wait_for_update",pk:"ads",ag:"all",qk:"maps",rk:"playstore",sk:"search",tk:"shopping",uk:"youtube",ki:"app_remove",li:"app_store_refund",mi:"app_store_subscription_cancel",ni:"app_store_subscription_convert",oi:"app_store_subscription_renew",dg:"add_payment_info",eg:"add_shipping_info",ac:"add_to_cart",bc:"remove_from_cart",fg:"view_cart",Hb:"begin_checkout",fc:"select_item",
fb:"view_item_list",sb:"select_promotion",hb:"view_promotion",ra:"purchase",hc:"refund",Fa:"view_item",gg:"add_to_wishlist",wk:"exception",ri:"first_open",si:"first_visit",sa:"gtag.config",Pa:"gtag.get",ui:"in_app_purchase",ic:"page_view",xk:"screen_view",vi:"session_start",yk:"timing_complete",zk:"track_social",xd:"user_engagement",tb:"gclid",wa:"ads_data_redaction",ja:"allow_ad_personalization_signals",Xe:"allow_custom_scripts",Ye:"allow_display_features",yd:"allow_enhanced_conversions",ib:"allow_google_signals",
Ga:"allow_interest_groups",Ak:"app_id",Bk:"app_installer_id",Ck:"app_name",Dk:"app_version",jc:"auid",wi:"auto_detection_enabled",Ib:"aw_remarketing",Ze:"aw_remarketing_only",zd:"discount",Ad:"aw_feed_country",Bd:"aw_feed_language",Z:"items",Cd:"aw_merchant_id",hg:"aw_basket_type",Ic:"campaign_content",Jc:"campaign_id",Kc:"campaign_medium",Lc:"campaign_name",Mc:"campaign",Nc:"campaign_source",Oc:"campaign_term",ub:"client_id",xi:"content_group",yi:"content_type",Qa:"conversion_cookie_prefix",Pc:"conversion_id",
Ha:"conversion_linker",Jb:"conversion_api",af:"cookie_deprecation",Wa:"cookie_domain",Ka:"cookie_expires",Xa:"cookie_flags",kc:"cookie_name",Qc:"cookie_path",Ra:"cookie_prefix",mc:"cookie_update",nc:"country",xa:"currency",Dd:"customer_lifetime_value",Rc:"custom_map",zi:"gcldc",Ai:"debug_mode",ba:"developer_id",Bi:"disable_merchant_reported_purchases",Sc:"dc_custom_params",Ci:"dc_natural_search",ig:"dynamic_event_settings",jg:"affiliation",Ed:"checkout_option",bf:"checkout_step",kg:"coupon",Tc:"item_list_name",
cf:"list_name",Di:"promotions",Uc:"shipping",df:"tax",Fd:"engagement_time_msec",Gd:"enhanced_client_id",Hd:"enhanced_conversions",lg:"enhanced_conversions_automatic_settings",Id:"estimated_delivery_date",ef:"euid_logged_in_state",Vc:"event_callback",Ek:"event_category",vb:"event_developer_id_string",Fk:"event_label",mg:"event",Jd:"event_settings",Kd:"event_timeout",Gk:"description",Hk:"fatal",Ei:"experiments",ff:"firebase_id",Ld:"first_party_collection",Md:"_x_20",kb:"_x_19",ng:"fledge",og:"flight_error_code",
pg:"flight_error_message",Fi:"fl_activity_category",Gi:"fl_activity_group",qg:"fl_advertiser_id",Hi:"fl_ar_dedupe",rg:"match_id",Ii:"fl_random_number",Ji:"tran",Ki:"u",Nd:"gac_gclid",oc:"gac_wbraid",sg:"gac_wbraid_multiple_conversions",ug:"ga_restrict_domain",vg:"ga_temp_client_id",Od:"gdpr_applies",wg:"geo_granularity",wb:"value_callback",lb:"value_key",Ik:"google_ono",Kb:"google_signals",xg:"google_tld",Pd:"groups",yg:"gsa_experiment_id",zg:"iframe_state",Wc:"ignore_referrer",hf:"internal_traffic_results",
Lb:"is_legacy_converted",yb:"is_legacy_loaded",Qd:"is_passthrough",jf:"_lps",La:"language",kf:"legacy_developer_id_string",Ma:"linker",qc:"accept_incoming",zb:"decorate_forms",W:"domains",Mb:"url_position",Ag:"method",Jk:"name",Xc:"new_customer",Bg:"non_interaction",Li:"optimize_id",Mi:"page_hostname",Yc:"page_path",Na:"page_referrer",Ab:"page_title",Cg:"passengers",Dg:"phone_conversion_callback",Ni:"phone_conversion_country_code",Eg:"phone_conversion_css_class",Oi:"phone_conversion_ids",Fg:"phone_conversion_number",
Gg:"phone_conversion_options",Hg:"_protected_audience_enabled",Zc:"quantity",Rd:"redact_device_info",lf:"referral_exclusion_definition",Nb:"restricted_data_processing",Pi:"retoken",Kk:"sample_rate",nf:"screen_name",Bb:"screen_resolution",Qi:"search_term",Sa:"send_page_view",Ob:"send_to",Sd:"server_container_url",ad:"session_duration",Td:"session_engaged",pf:"session_engaged_time",Cb:"session_id",Ud:"session_number",bd:"delivery_postal_code",Lk:"temporary_client_id",qf:"topmost_url",Ri:"tracking_id",
rf:"traffic_type",ya:"transaction_id",Pb:"transport_url",Ig:"trip_type",Qb:"update",Db:"url_passthrough",Wd:"_user_agent_architecture",Xd:"_user_agent_bitness",Yd:"_user_agent_full_version_list",Zd:"_user_agent_mobile",ae:"_user_agent_model",be:"_user_agent_platform",ce:"_user_agent_platform_version",de:"_user_agent_wow64",Ba:"user_data",Jg:"user_data_auto_latency",Kg:"user_data_auto_meta",Lg:"user_data_auto_multi",Mg:"user_data_auto_selectors",Ng:"user_data_auto_status",ee:"user_data_mode",fe:"user_data_settings",
Ta:"user_id",Ya:"user_properties",Si:"_user_region",Og:"us_privacy_string",ia:"value",sc:"wbraid",Pg:"wbraid_multiple_conversions",Yi:"_host_name",Zi:"_in_page_command",aj:"_is_passthrough_cid",fd:"non_personalized_ads",ne:"_sst_parameters",jb:"conversion_label",Aa:"page_location",xb:"global_developer_id_string",Vd:"tc_privacy_string"}},Yh={},Zh=Object.freeze((Yh[N.g.ja]=1,Yh[N.g.Ye]=1,Yh[N.g.yd]=1,Yh[N.g.ib]=1,Yh[N.g.Z]=1,Yh[N.g.Wa]=1,Yh[N.g.Ka]=1,Yh[N.g.Xa]=1,Yh[N.g.kc]=1,Yh[N.g.Qc]=1,Yh[N.g.Ra]=
1,Yh[N.g.mc]=1,Yh[N.g.Rc]=1,Yh[N.g.ba]=1,Yh[N.g.ig]=1,Yh[N.g.Vc]=1,Yh[N.g.Jd]=1,Yh[N.g.Kd]=1,Yh[N.g.Ld]=1,Yh[N.g.ug]=1,Yh[N.g.Kb]=1,Yh[N.g.xg]=1,Yh[N.g.Pd]=1,Yh[N.g.hf]=1,Yh[N.g.Lb]=1,Yh[N.g.yb]=1,Yh[N.g.Ma]=1,Yh[N.g.lf]=1,Yh[N.g.Nb]=1,Yh[N.g.Sa]=1,Yh[N.g.Ob]=1,Yh[N.g.Sd]=1,Yh[N.g.ad]=1,Yh[N.g.pf]=1,Yh[N.g.bd]=1,Yh[N.g.Pb]=1,Yh[N.g.Qb]=1,Yh[N.g.fe]=1,Yh[N.g.Ya]=1,Yh[N.g.ne]=1,Yh));Object.freeze([N.g.Aa,N.g.Na,N.g.Ab,N.g.La,N.g.nf,N.g.Ta,N.g.ff,N.g.xi]);
var $h={},ai=Object.freeze(($h[N.g.ki]=1,$h[N.g.li]=1,$h[N.g.mi]=1,$h[N.g.ni]=1,$h[N.g.oi]=1,$h[N.g.ri]=1,$h[N.g.si]=1,$h[N.g.ui]=1,$h[N.g.vi]=1,$h[N.g.xd]=1,$h)),bi={},ci=Object.freeze((bi[N.g.dg]=1,bi[N.g.eg]=1,bi[N.g.ac]=1,bi[N.g.bc]=1,bi[N.g.fg]=1,bi[N.g.Hb]=1,bi[N.g.fc]=1,bi[N.g.fb]=1,bi[N.g.sb]=1,bi[N.g.hb]=1,bi[N.g.ra]=1,bi[N.g.hc]=1,bi[N.g.Fa]=1,bi[N.g.gg]=1,bi)),di=Object.freeze([N.g.ja,N.g.ib,N.g.mc,N.g.Wc,N.g.Qb]),ei=Object.freeze([].concat(di)),fi=Object.freeze([N.g.Ka,N.g.Kd,N.g.ad,N.g.pf,
N.g.Fd]),gi=Object.freeze([].concat(fi)),hi={},ii=(hi[N.g.J]="1",hi[N.g.R]="2",hi[N.g.N]="3",hi[N.g.Ea]="4",hi),ji={},ki=Object.freeze((ji[N.g.ja]=1,ji[N.g.yd]=1,ji[N.g.Ga]=1,ji[N.g.Ib]=1,ji[N.g.Ze]=1,ji[N.g.zd]=1,ji[N.g.Ad]=1,ji[N.g.Bd]=1,ji[N.g.Z]=1,ji[N.g.Cd]=1,ji[N.g.Qa]=1,ji[N.g.Ha]=1,ji[N.g.Wa]=1,ji[N.g.Ka]=1,ji[N.g.Xa]=1,ji[N.g.Ra]=1,ji[N.g.xa]=1,ji[N.g.Dd]=1,ji[N.g.ba]=1,ji[N.g.Bi]=1,ji[N.g.Hd]=1,ji[N.g.Id]=1,ji[N.g.ff]=1,ji[N.g.Ld]=1,ji[N.g.Lb]=1,ji[N.g.yb]=1,ji[N.g.La]=1,ji[N.g.Xc]=1,ji[N.g.Aa]=
1,ji[N.g.Na]=1,ji[N.g.Dg]=1,ji[N.g.Eg]=1,ji[N.g.Fg]=1,ji[N.g.Gg]=1,ji[N.g.Nb]=1,ji[N.g.Sa]=1,ji[N.g.Ob]=1,ji[N.g.Sd]=1,ji[N.g.bd]=1,ji[N.g.ya]=1,ji[N.g.Pb]=1,ji[N.g.Qb]=1,ji[N.g.Db]=1,ji[N.g.Ba]=1,ji[N.g.Ta]=1,ji[N.g.ia]=1,ji)),li={},mi=Object.freeze((li[N.g.sk]="s",li[N.g.uk]="y",li[N.g.rk]="p",li[N.g.tk]="h",li[N.g.pk]="a",li[N.g.qk]="m",li));Object.freeze(N.g);var ni={},oi=z.google_tag_manager=z.google_tag_manager||{},pi=Math.random();ni.Ug="41h0";ni.me=Number("0")||0;ni.fa="dataLayer";ni.mk="ChEIgOS9rQYQwsyb2Ov7qqL1ARIlAJZ5Pk1h5861qU9bAiHK9h4hPN7C2wHGjtBE72rH4dJqT4l3WRoC8Bo\x3d";var qi={__cl:1,__ecl:1,__ehl:1,__evl:1,__fal:1,__fil:1,__fsl:1,__hl:1,__jel:1,__lcl:1,__sdl:1,__tl:1,__ytl:1},ri={__paused:1,__tg:1},si;for(si in qi)qi.hasOwnProperty(si)&&(ri[si]=1);var ti=Oa(""),ui,vi=!1;vi=!0;
ui=vi;var wi,xi=!1;wi=xi;var yi,zi=!1;yi=zi;var Ai,Bi=!1;Ai=Bi;ni.wd="www.googletagmanager.com";
var Ci=""+ni.wd+(ui?"/gtag/js":"/gtm.js"),Di=null,Ei=null,Fi={},Gi={},Hi=function(){var a=oi.sequence||1;oi.sequence=a+1;return a};ni.lk="true";var Ii="";ni.zf=Ii;var Ji=new function(){this.h="";this.s=!1;this.C=""};var Ki=new Ka,Li={},Mi={},Pi={name:ni.fa,set:function(a,b){nb($a(a,b),Li);Ni()},get:function(a){return Oi(a,2)},reset:function(){Ki=new Ka;Li={};Ni()}},Oi=function(a,b){return 2!=b?Ki.get(a):Qi(a)},Qi=function(a,b){var c=a.split(".");b=b||[];for(var d=Li,e=0;e<c.length;e++){if(null===d)return!1;if(void 0===d)break;d=d[c[e]];if(-1!==b.indexOf(d))return}return d},Ri=function(a,b){Mi.hasOwnProperty(a)||(Ki.set(a,b),nb($a(a,b),Li),Ni())},Si=function(){for(var a=["gtm.allowlist","gtm.blocklist","gtm.whitelist",
"gtm.blacklist","tagTypeBlacklist"],b=0;b<a.length;b++){var c=a[b],d=Oi(c,1);if(Ha(d)||lb(d))d=nb(d);Mi[c]=d}},Ni=function(a){l(Mi,function(b,c){Ki.set(b,c);nb($a(b),Li);nb($a(b,c),Li);a&&delete Mi[b]})},Ti=function(a,b){var c,d=1!==(void 0===b?2:b)?Qi(a):Ki.get(a);"array"===jb(d)||"object"===jb(d)?c=nb(d):c=d;return c};
var Ui=function(a,b,c){if(!c)return!1;var d=c.selector_type,e=String(c.value),f;if("js_variable"===d){e=e.replace(/\["?'?/g,".").replace(/"?'?\]/g,"");for(var g=e.split(","),h=0;h<g.length;h++){var m=g[h].trim();if(m){if(0===m.indexOf("dataLayer."))f=Oi(m.substring(10));else{var n=m.split(".");f=z[n.shift()];for(var p=0;p<n.length;p++)f=f&&f[n[p]]}if(void 0!==f)break}}}else if("css_selector"===d&&uh){var q=vh(e);if(q&&0<q.length){f=[];for(var r=0;r<q.length&&r<("email"===b||"phone_number"===b?5:1);r++)f.push(Rc(q[r])||
Qa(q[r].value));f=1===f.length?f[0]:f}}return f?(a[b]=f,!0):!1},Vi=function(a){if(a){var b={},c=!1;c=Ui(b,"email",a.email)||c;c=Ui(b,"phone_number",a.phone)||c;b.address=[];for(var d=a.name_and_address||[],e=0;e<d.length;e++){var f={};c=Ui(f,"first_name",d[e].first_name)||c;c=Ui(f,"last_name",d[e].last_name)||c;c=Ui(f,"street",d[e].street)||c;c=Ui(f,"city",d[e].city)||c;c=Ui(f,"region",d[e].region)||c;c=Ui(f,"country",d[e].country)||c;c=Ui(f,"postal_code",d[e].postal_code)||c;b.address.push(f)}return c?
b:void 0}},Wi=function(a){return lb(a)?!!a.enable_code:!1};var Xi=[];function Yi(a){switch(a){case 24:return 3;case 45:return 14;case 56:return 11;case 57:return 12;case 61:return 13;case 58:return 15;case 97:return 16;case 100:return 17}}function Q(a){Xi[a]=!0;var b=Yi(a);b&&(Pf[b]=!0)}
Q(5);Q(6);Q(7);Q(9);Q(10);
Q(14);Q(11);
Q(15);Q(18);
Q(19);Q(20);Q(22);
Q(23);Q(28);Q(29);
Q(30);Q(32);Q(33);Q(37);Q(39);Q(42);Q(43);
Q(44);Q(46);Q(47);Q(48);Q(50);Q(51);Q(52);Q(53);

Q(58);Q(60);
Q(63);Q(64);Q(65);

Q(70);
Q(79);Q(82);Q(83);
Q(85);Q(86);
Q(91);
Q(92);
Q(101);
Q(100);
function R(a){return!!Xi[a]}var bj=function(a){Ab("HEALTH",a)};var cj;try{cj=JSON.parse(yb("eyIwIjoiRVMiLCIxIjoiRVMtQ1QiLCIyIjpmYWxzZSwiMyI6Imdvb2dsZS5lcyIsIjQiOiJyZWdpb24xIiwiNSI6ZmFsc2UsIjYiOnRydWUsIjciOiJhZF9zdG9yYWdlfGFuYWx5dGljc19zdG9yYWdlfGFkX3VzZXJfZGF0YXxhZF9wZXJzb25hbGl6YXRpb24ifQ"))}catch(a){L(123),bj(2),cj={}}
var dj=function(){return cj["0"]||""},ej=function(){return cj["1"]||""},fj=function(){var a=!1;a=!!cj["2"];return a},gj=function(){var a="";a=cj["4"]||"";return a},hj=function(){var a=!1;a=!!cj["5"];return a},ij=function(){var a="";a=cj["3"]||"";
return a};var oj=new function(a,b){this.h=a;this.defaultValue=void 0===b?!1:b}(1933);var pj=function(a){pj[" "](a);return a};pj[" "]=function(){};var rj=function(){var a=qj,b="th";if(a.th&&a.hasOwnProperty(b))return a.th;var c=new a;return a.th=c};var qj=function(){var a={};this.h=function(){var b=oj.h,c=oj.defaultValue;return null!=a[b]?a[b]:c};this.s=function(){a[oj.h]=!0}};var sj=!1,tj=!1,uj={},vj={},wj=!1,xj={ad_storage:!1,ad_user_data:!1,ad_personalization:!1};function yj(){var a=Fc("google_tag_data",{});return a.ics=a.ics||new zj}var zj=function(){this.entries={};this.cps={};this.waitPeriodTimedOut=this.wasSetLate=this.accessedAny=this.accessedDefault=this.usedSetCps=this.usedImplicit=this.usedUpdate=this.usedDefault=this.usedDeclare=this.active=!1;this.h=[]};
zj.prototype.default=function(a,b,c,d,e,f){this.usedDefault||this.usedDeclare||!this.accessedDefault&&!this.accessedAny||(this.wasSetLate=!0);this.usedDefault=this.active=!0;Ab("TAGGING",19);void 0==b?Ab("TAGGING",18):Aj(this,a,"granted"===b,c,d,e,f)};zj.prototype.waitForUpdate=function(a,b){for(var c=0;c<a.length;c++)Aj(this,a[c],void 0,void 0,"","",b)};
var Aj=function(a,b,c,d,e,f,g){var h=a.entries,m=h[b]||{},n=m.region,p=d&&k(d)?d.toUpperCase():void 0;e=e.toUpperCase();f=f.toUpperCase();if(Bj(p,n,e,f)){var q=!!(g&&0<g&&void 0===m.update),r={region:p,declare_region:m.declare_region,implicit:m.implicit,default:void 0!==c?c:m.default,declare:m.declare,update:m.update,quiet:q};if(""!==e||!1!==m.default)h[b]=r;q&&z.setTimeout(function(){h[b]===r&&r.quiet&&(Ab("TAGGING",2),a.waitPeriodTimedOut=!0,a.clearTimeout(b,void 0),a.notifyListeners())},g)}};
aa=zj.prototype;aa.clearTimeout=function(a,b){var c=[a],d;for(d in uj)uj.hasOwnProperty(d)&&uj[d]===a&&c.push(d);var e=this.entries[a]||{},f=this.getConsentState(a);if(e.quiet){e.quiet=!1;for(var g=fa(c),h=g.next();!h.done;h=g.next())Cj(this,h.value)}else if(void 0!==b&&f!==b)for(var m=fa(c),n=m.next();!n.done;n=m.next())Cj(this,n.value)};
aa.update=function(a,b){this.usedDefault||this.usedDeclare||this.usedUpdate||!this.accessedAny||(this.wasSetLate=!0);this.usedUpdate=this.active=!0;if(void 0!=b){var c=this.getConsentState(a),d=this.entries;(d[a]=d[a]||{}).update="granted"===b;this.clearTimeout(a,c)}};
aa.declare=function(a,b,c,d,e){this.usedDeclare=this.active=!0;var f=this.entries,g=f[a]||{},h=g.declare_region,m=c&&k(c)?c.toUpperCase():void 0;d=d.toUpperCase();e=e.toUpperCase();if(Bj(m,h,d,e)){var n={region:g.region,declare_region:m,declare:"granted"===b,implicit:g.implicit,default:g.default,update:g.update,quiet:g.quiet};if(""!==d||!1!==g.declare)f[a]=n}};aa.implicit=function(a,b){this.usedImplicit=!0;var c=this.entries,d=c[a]=c[a]||{};!1!==d.implicit&&(d.implicit="granted"===b)};
aa.getConsentState=function(a){var b=this.entries,c=b[a]||{},d=c.update;if(void 0!==d)return d?1:2;d=c.default;if(void 0!==d)return d?1:2;if(uj.hasOwnProperty(a)){var e=b[uj[a]]||{};d=e.update;if(void 0!==d)return d?1:2;d=e.default;if(void 0!==d)return d?1:2}d=c.declare;if(void 0!==d)return d?1:2;if(Qf(3)){d=c.implicit;if(void 0!==d)return d?3:4;if(xj.hasOwnProperty(a))return Ab("TAGGING",22),xj[a]?3:4}return 0};aa.setCps=function(a,b,c,d,e){Dj(this.cps,a,b,c,d,e)&&(this.usedSetCps=!0)};
aa.addListener=function(a,b){this.h.push({consentTypes:a,Gl:b})};var Cj=function(a,b){for(var c=0;c<a.h.length;++c){var d=a.h[c];Ha(d.consentTypes)&&-1!==d.consentTypes.indexOf(b)&&(d.Nj=!0)}};zj.prototype.notifyListeners=function(a,b){for(var c=0;c<this.h.length;++c){var d=this.h[c];if(d.Nj){d.Nj=!1;try{d.Gl({consentEventId:a,consentPriorityId:b})}catch(e){}}}};function Bj(a,b,c,d){return""===c||a===d?!0:a===c?b!==d:!a&&!b}
function Dj(a,b,c,d,e,f){var g=a[b]||{},h=g.region,m=d&&k(d)?d.toUpperCase():void 0;e=e.toUpperCase();f=f.toUpperCase();if(Bj(m,h,e,f)){var n={enabled:"granted"===c,region:m};if(""!==e||!1!==g.enabled)return a[b]=n,!0}return!1}
var Ej=function(a){var b=yj();b.accessedAny=!0;return(k(a)?[a]:a).every(function(c){switch(b.getConsentState(c)){case 1:case 3:return!0;case 2:case 4:return!1;default:return!0}})},Fj=function(a){var b=yj();b.accessedAny=!0;return b.getConsentState(a)},Gj=function(a){var b=yj();b.accessedAny=!0;return!(b.entries[a]||{}).quiet},Hj=function(){if(!rj().h())return!1;var a=yj();a.accessedAny=!0;return a.active},Ij=function(a,b){yj().addListener(a,b)},Jj=function(a,b){yj().notifyListeners(a,b)},Kj=function(a,
b){function c(){for(var e=0;e<b.length;e++)if(!Gj(b[e]))return!0;return!1}if(c()){var d=!1;Ij(b,function(e){d||c()||(d=!0,a(e))})}else a({})},Lj=function(a,b){function c(){for(var h=[],m=0;m<e.length;m++){var n=e[m];Ej(n)&&!f[n]&&h.push(n)}return h}function d(h){for(var m=0;m<h.length;m++)f[h[m]]=!0}var e=k(b)?[b]:b,f={},g=c();g.length!==e.length&&(d(g),Ij(e,function(h){function m(q){0!==q.length&&(d(q),h.consentTypes=q,a(h))}var n=c();if(0!==n.length){var p=Object.keys(f).length;n.length+p>=e.length?
m(n):z.setTimeout(function(){m(c())},500)}}))};function Mj(){}function Nj(){};var Oj=[N.g.J,N.g.R,N.g.N,N.g.Ea],Pj=function(a){for(var b=a[N.g.Va],c=Array.isArray(b)?b:[b],d={Ce:0};d.Ce<c.length;d={Ce:d.Ce},++d.Ce)l(a,function(e){return function(f,g){if(f!==N.g.Va){var h=c[e.Ce],m=dj(),n=ej();tj=!0;sj&&Ab("TAGGING",20);yj().declare(f,g,h,m,n)}}}(d))},Qj=function(a){var b=a[N.g.Va];b&&L(40);var c=a[N.g.We];c&&L(41);for(var d=Ha(b)?b:[b],e={De:0};e.De<d.length;e={De:e.De},++e.De)l(a,function(f){return function(g,h){if(g!==N.g.Va&&g!==N.g.We){var m=d[f.De],n=Number(c),p=dj(),
q=ej();sj=!0;tj&&Ab("TAGGING",20);yj().default(g,h,m,p,q,n)}}}(e))},Rj=function(a,b){l(a,function(c,d){sj=!0;tj&&Ab("TAGGING",20);yj().update(c,d)});Jj(b.eventId,b.priorityId)},Sj=function(a){for(var b=a[N.g.Va],c=Array.isArray(b)?b:[b],d={Ee:0};d.Ee<c.length;d={Ee:d.Ee},++d.Ee)l(a,function(e){return function(f,g){if(f!==N.g.Va){var h=c[e.Ee],m=dj(),n=ej();yj().setCps(f,g,h,m,n)}}}(d))},Tj=function(a){for(var b=a[N.g.Va],c=Array.isArray(b)?b:[b],d={kd:0};d.kd<c.length;d={kd:d.kd},++d.kd)a.hasOwnProperty(N.g.ag)&&
l(mi,function(e){return function(f){Dj(vj,f,a[N.g.ag],c[e.kd],dj(),ej())&&(wj=!0)}}(d)),l(a,function(e){return function(f,g){f!==N.g.Va&&f!==N.g.ag&&Dj(vj,f,g,c[e.kd],dj(),ej())&&(wj=!0)}}(d))},Uj=function(a){Array.isArray(a)||(a=[a]);return a.every(function(b){return Ej(b)})},Vj=function(a,b){Ij(a,b)},Wj=function(a,b){Lj(a,b)},Xj=function(a,b){Kj(a,b)},Yj=function(){var a=[N.g.J,N.g.Ea,N.g.N];yj().waitForUpdate(a,500)},Zj=function(a){for(var b=fa(a),c=b.next();!c.done;c=b.next()){var d=c.value;yj().clearTimeout(d,
void 0)}Jj()};var ak=function(){function a(b){oi.pscdl=b}if(void 0===oi.pscdl)try{"cookieDeprecationLabel"in Dc?(a("pending"),Dc.cookieDeprecationLabel.getValue().then(a)):a("noapi")}catch(b){a("error")}};var bk=/[A-Z]+/,ck=/\s/,dk=function(a,b){if(k(a)){a=Qa(a);var c=a.indexOf("-");if(!(0>c)){var d=a.substring(0,c);if(bk.test(d)){var e=a.substring(c+1),f;if(b){var g=function(n){var p=n.indexOf("/");return 0>p?[n]:[n.substring(0,p),n.substring(p+1)]};f=g(e);if("DC"===d&&2===f.length){var h=g(f[1]);2===h.length&&(f[1]=h[0],f.push(h[1]))}}else{f=e.split("/");for(var m=0;m<f.length;m++)if(!f[m]||ck.test(f[m])&&("AW"!==d||1!==m))return}return{id:a,prefix:d,da:d+"-"+f[0],P:f}}}}},fk=function(a,b){for(var c=
{},d=0;d<a.length;++d){var e=dk(a[d],b);e&&(c[e.id]=e)}ek(c);var f=[];l(c,function(g,h){f.push(h)});return f};function ek(a){var b=[],c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];"AW"===d.prefix&&d.P[1]&&b.push(d.da)}for(var e=0;e<b.length;++e)delete a[b[e]]};var gk=function(a){var b=String(a[Me.ka]||"").replace(/_/g,"");0===b.indexOf("cvt")&&(b="cvt");return b},hk=0<=z.location.search.indexOf("?gtm_latency=")||0<=z.location.search.indexOf("&gtm_latency=");var jk=function(a,b){var c=ik();c.pending||(c.pending=[]);Ia(c.pending,function(d){return d.target.ctid===a.ctid&&d.target.isDestination===a.isDestination})||c.pending.push({target:a,onLoad:b})},kk=function(){this.container={};this.destination={};this.canonical={};this.pending=[];this.siloed=[]},ik=function(){var a=Fc("google_tag_data",{}),b=a.tidr;b||(b=new kk,a.tidr=b);return b};var lk={},mk=!1,Rf={ctid:"G-FTD94KXZMD",Ef:"70837068",Lj:"G-FTD94KXZMD",Mj:"G-FTD94KXZMD"};lk.ie=Oa("");
var pk=function(){var a=nk();return mk?a.map(ok):a},rk=function(){var a=qk();return mk?a.map(ok):a},tk=function(){return sk(Rf.ctid)},uk=function(){return sk(Rf.Ef||"_"+Rf.ctid)},nk=function(){return Rf.Lj?Rf.Lj.split("|"):[Rf.ctid]},qk=function(){return Rf.Mj?Rf.Mj.split("|"):[]},vk=function(a){var b=ik();return a.isDestination?b.destination[a.ctid]:b.container[a.ctid]},sk=function(a){return mk?ok(a):a},ok=function(a){return"siloed_"+a},wk=function(a){a=String(a);return mk&&0===a.indexOf("siloed_")?
a.substring(7):a},xk=function(){var a=!1;if(a){var b=ik();if(b.siloed){for(var c=[],d=nk(),e=qk(),f={},g=0;g<b.siloed.length;f={Ff:void 0},g++)f.Ff=b.siloed[g],!mk&&Ia(f.Ff.isDestination?e:d,function(h){return function(m){return m===h.Ff.ctid}}(f))?mk=!0:c.push(f.Ff);b.siloed=c}}};
function yk(){var a=ik();if(a.pending){for(var b,c=[],d=!1,e=pk(),f=rk(),g={},h=0;h<a.pending.length;g={Oe:void 0},h++)g.Oe=a.pending[h],Ia(g.Oe.target.isDestination?f:e,function(m){return function(n){return n===m.Oe.target.ctid}}(g))?d||(b=g.Oe.onLoad,d=!0):c.push(g.Oe);a.pending=c;if(b)try{b(uk())}catch(m){}}}
var zk=function(){for(var a=ik(),b=pk(),c=0;c<b.length;c++){var d=a.container[b[c]];d?(d.state=2,d.containers=pk(),d.destinations=rk()):a.container[b[c]]={state:2,containers:pk(),destinations:rk()}}for(var e=rk(),f=0;f<e.length;f++){var g=a.destination[e[f]];g&&0===g.state&&L(93);g?(g.state=2,g.containers=pk(),g.destinations=rk()):a.destination[e[f]]={state:2,containers:pk(),destinations:rk()}}a.canonical[uk()]={};yk()},Ak=function(a){return!!ik().container[a]},Bk=function(a){var b=ik().destination[a];
return!!b&&!!b.state},Ck=function(){return{ctid:tk(),isDestination:lk.ie}};function Dk(a){var b=ik();(b.siloed=b.siloed||[]).push(a)}var Ek=function(){var a=ik().container,b;for(b in a)if(a.hasOwnProperty(b)&&1===a[b].state)return!0;return!1},Fk=function(){var a={};l(ik().destination,function(b,c){0===c.state&&(a[b]=c)});return a},Gk=function(a){return!!(a&&a.parent&&a.context&&1===a.context.source&&0!==a.parent.ctid.indexOf("GTM-"))};var Hk={sampleRate:"0.005000",hk:"",gk:Number("5"),ao:Number("")},Ik=[];function Jk(a){Ik.push(a)}var Kk=!1,Lk;if(!(Lk=hk)){var Mk=Math.random(),Nk=Hk.sampleRate;Lk=Mk<Number(Nk)}
var Ok=Lk,Pk="https://www.googletagmanager.com/a?id="+Rf.ctid,Qk=void 0,Rk={},Sk=void 0,Tk=new function(){var a=5;0<Hk.gk&&(a=Hk.gk);this.h=0;this.C=[];this.s=a},Uk=1E3;function Vk(a,b){var c=Qk;if(void 0===c)if(b)c=Hi();else return"";for(var d=[Pk],e=0;e<Ik.length;e++){var f=Ik[e]({eventId:c,Hc:!!a,Vj:function(){Kk=!0}});"&"===f[0]&&d.push(f)}d.push("&z=0");return d.join("")}
function Wk(){Sk&&(z.clearTimeout(Sk),Sk=void 0);if(void 0!==Qk&&Xk){var a;(a=Rk[Qk])||(a=Tk.h<Tk.s?!1:1E3>Ta()-Tk.C[Tk.h%Tk.s]);if(a||0>=Uk--)L(1),Rk[Qk]=!0;else{var b=Tk.h++%Tk.s;Tk.C[b]=Ta();var c=Vk(!0);Nc(c);if(Kk){var d=c.replace("/a?","/td?");Nc(d)}Xk=Kk=!1}}}var Xk=!1;function Yk(a){Rk[a]||(a!==Qk&&(Wk(),Qk=a),Xk=!0,Sk||(Sk=z.setTimeout(Wk,500)),2022<=Vk().length&&Wk())}var Zk=Ja();function $k(){Zk=Ja()}function al(){return["&v=3&t=t","&pid="+Zk].join("")};var bl="",cl=[];function dl(a){var b="";bl&&(b="&dl="+encodeURIComponent(bl));0<cl.length&&(b+="&tdp="+cl.join("."));a.Hc&&(bl="",cl.length=0,b&&a.Vj());return b};var el=[];function fl(a){if(!el.length)return"";var b="&tdc="+el.join("!");a.Hc&&(a.Vj(),el.length=0);return b};var gl=/:[0-9]+$/,hl=/^\d+\.fls\.doubleclick\.net$/,il=function(a,b,c,d){for(var e=[],f=fa(a.split("&")),g=f.next();!g.done;g=f.next()){var h=fa(g.value.split("=")),m=h.next().value,n=ha(h);if(decodeURIComponent(m.replace(/\+/g," "))===b){var p=n.join("=");if(!c)return d?p:decodeURIComponent(p.replace(/\+/g," "));e.push(d?p:decodeURIComponent(p.replace(/\+/g," ")))}}return c?e:void 0},ll=function(a,b,c,d,e){b&&(b=String(b).toLowerCase());if("protocol"===b||"port"===b)a.protocol=jl(a.protocol)||jl(z.location.protocol);
"port"===b?a.port=String(Number(a.hostname?a.port:z.location.port)||("http"===a.protocol?80:"https"===a.protocol?443:"")):"host"===b&&(a.hostname=(a.hostname||z.location.hostname).replace(gl,"").toLowerCase());return kl(a,b,c,d,e)},kl=function(a,b,c,d,e){var f,g=jl(a.protocol);b&&(b=String(b).toLowerCase());switch(b){case "url_no_fragment":f=ml(a);break;case "protocol":f=g;break;case "host":f=a.hostname.replace(gl,"").toLowerCase();if(c){var h=/^www\d*\./.exec(f);h&&h[0]&&(f=f.substr(h[0].length))}break;
case "port":f=String(Number(a.port)||("http"===g?80:"https"===g?443:""));break;case "path":a.pathname||a.hostname||Ab("TAGGING",1);f="/"===a.pathname.substr(0,1)?a.pathname:"/"+a.pathname;var m=f.split("/");0<=(d||[]).indexOf(m[m.length-1])&&(m[m.length-1]="");f=m.join("/");break;case "query":f=a.search.replace("?","");e&&(f=il(f,e,!1));break;case "extension":var n=a.pathname.split(".");f=1<n.length?n[n.length-1]:"";f=f.split("/")[0];break;case "fragment":f=a.hash.replace("#","");break;default:f=
a&&a.href}return f},jl=function(a){return a?a.replace(":","").toLowerCase():""},ml=function(a){var b="";if(a&&a.href){var c=a.href.indexOf("#");b=0>c?a.href:a.href.substr(0,c)}return b},nl={},ol=0,ql=function(a){if(Qf(17)){var b=nl[a];b||(b=pl(a),5>ol&&(nl[a]=b,ol++));return b}return pl(a)},pl=function(a){var b=C.createElement("a");a&&(b.href=a);var c=b.pathname;"/"!==c[0]&&(a||Ab("TAGGING",1),c="/"+c);var d=b.hostname.replace(gl,"");return{href:b.href,protocol:b.protocol,host:b.host,hostname:d,pathname:c,
search:b.search,hash:b.hash,port:b.port}},rl=function(a){function b(n){var p=n.split("=")[0];return 0>d.indexOf(p)?n:p+"=0"}function c(n){return n.split("&").map(b).filter(function(p){return void 0!==p}).join("&")}var d="gclid dclid gbraid wbraid gclaw gcldc gclha gclgf gclgb _gl".split(" "),e=ql(a),f=a.split(/[?#]/)[0],g=e.search,h=e.hash;"?"===g[0]&&(g=g.substring(1));"#"===h[0]&&(h=h.substring(1));g=c(g);h=c(h);""!==g&&(g="?"+g);""!==h&&(h="#"+h);var m=""+f+g+h;"/"===m[m.length-1]&&(m=m.substring(0,
m.length-1));return m},sl=function(a){var b=ql(z.location.href),c=ll(b,"host",!1);if(c&&c.match(hl)){var d=ll(b,"path").split(a+"=");if(1<d.length)return d[1].split(";")[0].split("?")[0]}};var tl={initialized:11,complete:12,interactive:13},ul={},vl=Object.freeze((ul[N.g.Sa]=!0,ul)),wl=0<=C.location.search.indexOf("?gtm_diagnostics=")||0<=C.location.search.indexOf("&gtm_diagnostics="),yl=function(a,b,c){if(Ok&&"config"===a&&!(1<dk(b).P.length)){var d,e=Fc("google_tag_data",{});e.td||(e.td={});d=e.td;var f=nb(c.F);nb(c.h,f);var g=[],h;for(h in d){var m=xl(d[h],f);m.length&&(wl&&console.log(m),g.push(h))}g.length&&(g.length&&Ok&&el.push(b+"*"+g.join(".")),Ab("TAGGING",tl[C.readyState]||
14));d[b]=f}};function zl(a,b){var c={},d;for(d in b)b.hasOwnProperty(d)&&(c[d]=!0);for(var e in a)a.hasOwnProperty(e)&&(c[e]=!0);return c}function xl(a,b,c,d){c=void 0===c?{}:c;d=void 0===d?"":d;if(a===b)return[];var e=function(q,r){var t=r[q];return void 0===t?vl[q]:t},f;for(f in zl(a,b)){var g=(d?d+".":"")+f,h=e(f,a),m=e(f,b),n="object"===jb(h)||"array"===jb(h),p="object"===jb(m)||"array"===jb(m);if(n&&p)xl(h,m,c,g);else if(n||p||h!==m)c[g]=!0}return Object.keys(c)};var Al=function(a,b,c,d,e,f,g,h,m,n,p){this.eventId=a;this.priorityId=b;this.h=c;this.M=d;this.C=e;this.F=f;this.s=g;this.eventMetadata=h;this.onSuccess=m;this.onFailure=n;this.isGtmEvent=p},Bl=function(a,b){var c=[];switch(b){case 3:c.push(a.h);c.push(a.M);c.push(a.C);c.push(a.F);c.push(a.s);break;case 2:c.push(a.h);break;case 1:c.push(a.M);c.push(a.C);c.push(a.F);c.push(a.s);break;case 4:c.push(a.h),c.push(a.M),c.push(a.C),c.push(a.F)}return c},S=function(a,b,c,d){for(var e=fa(Bl(a,void 0===d?3:
d)),f=e.next();!f.done;f=e.next()){var g=f.value;if(void 0!==g[b])return g[b]}return c},Cl=function(a){for(var b={},c=Bl(a,4),d=fa(c),e=d.next();!e.done;e=d.next())for(var f=Object.keys(e.value),g=fa(f),h=g.next();!h.done;h=g.next())b[h.value]=1;return Object.keys(b)},Dl=function(a,b,c){function d(n){lb(n)&&l(n,function(p,q){f=!0;e[p]=q})}var e={},f=!1,g=Bl(a,void 0===c?3:c);g.reverse();for(var h=fa(g),m=h.next();!m.done;m=h.next())d(m.value[b]);return f?e:void 0},El=function(a){for(var b=[N.g.Mc,
N.g.Ic,N.g.Jc,N.g.Kc,N.g.Lc,N.g.Nc,N.g.Oc],c=Bl(a,3),d=fa(c),e=d.next();!e.done;e=d.next()){for(var f=e.value,g={},h=!1,m=fa(b),n=m.next();!n.done;n=m.next()){var p=n.value;void 0!==f[p]&&(g[p]=f[p],h=!0)}var q=h?g:void 0;if(q)return q}return{}},Fl=function(a,b){this.uf=a;this.vf=b;this.C={};this.Sb={};this.h={};this.F={};this.ed={};this.Rb={};this.s={};this.Oa=function(){};this.X=function(){};this.M=!1},Gl=function(a,b){a.C=b;return a},Hl=function(a,b){a.Sb=b;return a},Il=function(a,b){a.h=b;return a},
Jl=function(a,b){a.F=b;return a},Kl=function(a,b){a.ed=b;return a},Ll=function(a,b){a.Rb=b;return a},Ml=function(a,b){a.s=b||{};return a},Nl=function(a,b){a.Oa=b;return a},Ol=function(a,b){a.X=b;return a},Pl=function(a,b){a.M=b;return a},Ql=function(a){return new Al(a.uf,a.vf,a.C,a.Sb,a.h,a.F,a.Rb,a.s,a.Oa,a.X,a.M)};var Rl={};function Sl(a,b,c){Ok&&void 0!==a&&(Rl[a]=Rl[a]||[],Rl[a].push(c+b),Yk(a))}function Tl(a){var b=a.eventId,c=a.Hc,d="",e=Rl[b]||[];e.length&&(d+="&epr="+e.join("."));c&&delete Rl[b];return d};var Vl=function(a,b){var c=dk(sk(a),!0);c&&Ul.register(c,b)},Wl=function(a,b,c,d){var e=dk(c,d.isGtmEvent);e&&Ul.push("event",[b,a],e,d)},Xl=function(a,b,c,d){var e=dk(c,d.isGtmEvent);e&&Ul.push("get",[a,b],e,d)},Zl=function(a){var b=dk(sk(a),!0),c;b?c=Yl(Ul,b).h:c={};return c},$l=function(a,b){var c=dk(sk(a),!0);if(c){var d=Ul,e=nb(b);nb(Yl(d,c).h,e);Yl(d,c).h=e}},am=function(){this.status=1;this.M={};this.h={};this.s={};this.X=null;this.F={};this.C=!1},bm=function(a,b,c,d){var e=Ta();this.type=
a;this.C=e;this.h=b;this.s=c;this.messageContext=d},cm=function(){this.s={};this.C={};this.h=[]},Yl=function(a,b){var c=b.da;return a.s[c]=a.s[c]||new am},dm=function(a,b,c,d){if(d.h){var e=Yl(a,d.h),f=e.X;if(f){var g=nb(c),h=nb(e.M[d.h.id]),m=nb(e.F),n=nb(e.h),p=nb(a.C),q={};if(Ok)try{q=nb(Li)}catch(v){L(72)}var r=d.h.prefix,t=function(v){Sl(d.messageContext.eventId,r,v)},u=Ql(Pl(Ol(Nl(Ml(Kl(Jl(Ll(Il(Hl(Gl(new Fl(d.messageContext.eventId,d.messageContext.priorityId),g),h),m),n),p),q),d.messageContext.eventMetadata),
function(){if(t){var v=t;t=void 0;v("2");if(d.messageContext.onSuccess)d.messageContext.onSuccess()}}),function(){if(t){var v=t;t=void 0;v("3");if(d.messageContext.onFailure)d.messageContext.onFailure()}}),!!d.messageContext.isGtmEvent));try{Sl(d.messageContext.eventId,r,"1"),yl(d.type,d.h.id,u),f(d.h.id,b,d.C,u)}catch(v){Sl(d.messageContext.eventId,r,"4")}}}};cm.prototype.register=function(a,b,c){var d=Yl(this,a);3!==d.status&&(d.X=b,d.status=3,c&&(nb(d.h,c),d.h=c),this.flush())};
cm.prototype.push=function(a,b,c,d){void 0!==c&&(1===Yl(this,c).status&&(Yl(this,c).status=2,this.push("require",[{}],c,{})),Yl(this,c).C&&(d.deferrable=!1));this.h.push(new bm(a,c,b,d));d.deferrable||this.flush()};
cm.prototype.flush=function(a){for(var b=this,c=[],d=!1,e={};this.h.length;e={vc:void 0,lh:void 0}){var f=this.h[0],g=f.h;if(f.messageContext.deferrable)!g||Yl(this,g).C?(f.messageContext.deferrable=!1,this.h.push(f)):c.push(f),this.h.shift();else{switch(f.type){case "require":if(3!==Yl(this,g).status&&!a){this.h.push.apply(this.h,c);return}break;case "set":l(f.s[0],function(r,t){nb($a(r,t),b.C)});break;case "config":var h=Yl(this,g);e.vc={};l(f.s[0],function(r){return function(t,u){nb($a(t,u),r.vc)}}(e));
var m=!!e.vc[N.g.Qb];delete e.vc[N.g.Qb];var n=g.da===g.id;m||(n?h.F={}:h.M[g.id]={});h.C&&m||dm(this,N.g.sa,e.vc,f);h.C=!0;n?nb(e.vc,h.F):(nb(e.vc,h.M[g.id]),L(70));d=!0;break;case "event":e.lh={};l(f.s[0],function(r){return function(t,u){nb($a(t,u),r.lh)}}(e));dm(this,f.s[1],e.lh,f);break;case "get":var p={},q=(p[N.g.lb]=f.s[0],p[N.g.wb]=f.s[1],p);dm(this,N.g.Pa,q,f)}this.h.shift();em(this,f)}}this.h.push.apply(this.h,c);d&&this.flush()};
var em=function(a,b){if("require"!==b.type)if(b.h)for(var c=Yl(a,b.h).s[b.type]||[],d=0;d<c.length;d++)c[d]();else for(var e in a.s)if(a.s.hasOwnProperty(e)){var f=a.s[e];if(f&&f.s)for(var g=f.s[b.type]||[],h=0;h<g.length;h++)g[h]()}},Ul=new cm;function fm(a,b){if(""===a)return b;var c=Number(a);return isNaN(c)?b:c};var gm=function(a,b){var c=function(){};c.prototype=a.prototype;var d=new c;a.apply(d,Array.prototype.slice.call(arguments,1));return d},hm=function(a){var b=a;return function(){if(b){var c=b;b=null;c()}}};var im=function(a,b,c){a.addEventListener&&a.addEventListener(b,c,!1)};function jm(){return Pb?!!Wb&&!!Wb.platform:!1}function km(){return Zb("iPhone")&&!Zb("iPod")&&!Zb("iPad")}function lm(){km()||Zb("iPad")||Zb("iPod")};ac();$b()||Zb("Trident")||Zb("MSIE");Zb("Edge");!Zb("Gecko")||-1!=Vb().toLowerCase().indexOf("webkit")&&!Zb("Edge")||Zb("Trident")||Zb("MSIE")||Zb("Edge");-1!=Vb().toLowerCase().indexOf("webkit")&&!Zb("Edge")&&Zb("Mobile");jm()||Zb("Macintosh");jm()||Zb("Windows");(jm()?"Linux"===Wb.platform:Zb("Linux"))||jm()||Zb("CrOS");jm()||Zb("Android");km();Zb("iPad");Zb("iPod");lm();Vb().toLowerCase().indexOf("kaios");var mm=function(a,b,c,d){for(var e=b,f=c.length;0<=(e=a.indexOf(c,e))&&e<d;){var g=a.charCodeAt(e-1);if(38==g||63==g){var h=a.charCodeAt(e+f);if(!h||61==h||38==h||35==h)return e}e+=f+1}return-1},nm=/#|$/,om=function(a,b){var c=a.search(nm),d=mm(a,0,b,c);if(0>d)return null;var e=a.indexOf("&",d);if(0>e||e>c)e=c;d+=b.length+1;return decodeURIComponent(a.slice(d,-1!==e?e:0).replace(/\+/g," "))},pm=/[?&]($|#)/,qm=function(a,b,c){for(var d,e=a.search(nm),f=0,g,h=[];0<=(g=mm(a,f,b,e));)h.push(a.substring(f,
g)),f=Math.min(a.indexOf("&",g)+1||e,e);h.push(a.slice(f));d=h.join("").replace(pm,"$1");var m,n=null!=c?"="+encodeURIComponent(String(c)):"";var p=b+n;if(p){var q,r=d.indexOf("#");0>r&&(r=d.length);var t=d.indexOf("?"),u;0>t||t>r?(t=r,u=""):u=d.substring(t+1,r);q=[d.slice(0,t),u,d.slice(r)];var v=q[1];q[1]=p?v?v+"&"+p:p:v;m=q[0]+(q[1]?"?"+q[1]:"")+q[2]}else m=d;return m};var rm=function(a){try{var b;if(b=!!a&&null!=a.location.href)a:{try{pj(a.foo);b=!0;break a}catch(c){}b=!1}return b}catch(c){return!1}},sm=function(a,b){if(a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(a[c],c,a)};function tm(a){if(!a||!C.head)return null;var b=um("META");C.head.appendChild(b);b.httpEquiv="origin-trial";b.content=a;return b}
var vm=function(a){if(z.top==z)return 0;if(void 0===a?0:a){var b=z.location.ancestorOrigins;if(b)return b[b.length-1]==z.location.origin?1:2}return rm(z.top)?1:2},um=function(a,b){b=void 0===b?document:b;return b.createElement(String(a).toLowerCase())};function wm(a,b,c,d){d=void 0===d?!1:d;a.google_image_requests||(a.google_image_requests=[]);var e=um("IMG",a.document);if(c){var f=function(){if(c){var g=a.google_image_requests,h=Db(g,e);0<=h&&Array.prototype.splice.call(g,h,1)}e.removeEventListener&&e.removeEventListener("load",f,!1);e.removeEventListener&&e.removeEventListener("error",f,!1)};im(e,"load",f);im(e,"error",f)}d&&(e.attributionSrc="");e.src=b;a.google_image_requests.push(e)}
var ym=function(a){var b;b=void 0===b?!1:b;var c="https://pagead2.googlesyndication.com/pagead/gen_204?id=tcfe";sm(a,function(d,e){if(d||0===d)c+="&"+e+"="+encodeURIComponent(""+d)});xm(c,b)},xm=function(a,b){var c=window,d;b=void 0===b?!1:b;d=void 0===d?!1:d;if(c.fetch){var e={keepalive:!0,credentials:"include",redirect:"follow",method:"get",mode:"no-cors"};d&&(e.mode="cors","setAttributionReporting"in XMLHttpRequest.prototype?e.attributionReporting={eventSourceEligible:"true",triggerEligible:"false"}:
e.headers={"Attribution-Reporting-Eligible":"event-source"});c.fetch(a,e)}else wm(c,a,void 0===b?!1:b,void 0===d?!1:d)};var zm=function(){};var Am=function(a){void 0!==a.addtlConsent&&"string"!==typeof a.addtlConsent&&(a.addtlConsent=void 0);void 0!==a.gdprApplies&&"boolean"!==typeof a.gdprApplies&&(a.gdprApplies=void 0);return void 0!==a.tcString&&"string"!==typeof a.tcString||void 0!==a.listenerId&&"number"!==typeof a.listenerId?2:a.cmpStatus&&"error"!==a.cmpStatus?0:3},Bm=function(a,b){b=void 0===b?{}:b;this.s=a;this.h=null;this.M={};this.Oa=0;var c;this.X=null!=(c=b.mn)?c:500;var d;this.F=null!=(d=b.Un)?d:!1;this.C=null};sa(Bm,zm);
var Dm=function(a){return"function"===typeof a.s.__tcfapi||null!=Cm(a)};
Bm.prototype.addEventListener=function(a){var b=this,c={internalBlockOnErrors:this.F},d=hm(function(){return a(c)}),e=0;-1!==this.X&&(e=setTimeout(function(){c.tcString="tcunavailable";c.internalErrorState=1;d()},this.X));var f=function(g,h){clearTimeout(e);g?(c=g,c.internalErrorState=Am(c),c.internalBlockOnErrors=b.F,h&&0===c.internalErrorState||(c.tcString="tcunavailable",h||(c.internalErrorState=3))):(c.tcString="tcunavailable",c.internalErrorState=3);a(c)};try{Em(this,"addEventListener",f)}catch(g){c.tcString=
"tcunavailable",c.internalErrorState=3,e&&(clearTimeout(e),e=0),d()}};Bm.prototype.removeEventListener=function(a){a&&a.listenerId&&Em(this,"removeEventListener",null,a.listenerId)};
var Gm=function(a,b,c){var d;d=void 0===d?"755":d;var e;a:{if(a.publisher&&a.publisher.restrictions){var f=a.publisher.restrictions[b];if(void 0!==f){e=f[void 0===d?"755":d];break a}}e=void 0}var g=e;if(0===g)return!1;var h=c;2===c?(h=0,2===g&&(h=1)):3===c&&(h=1,1===g&&(h=0));var m;if(0===h)if(a.purpose&&a.vendor){var n=Fm(a.vendor.consents,void 0===d?"755":d);m=n&&"1"===b&&a.purposeOneTreatment&&"CH"===a.publisherCC?!0:n&&Fm(a.purpose.consents,b)}else m=!0;else m=1===h?a.purpose&&a.vendor?Fm(a.purpose.legitimateInterests,
b)&&Fm(a.vendor.legitimateInterests,void 0===d?"755":d):!0:!0;return m},Fm=function(a,b){return!(!a||!a[b])},Em=function(a,b,c,d){c||(c=function(){});if("function"===typeof a.s.__tcfapi){var e=a.s.__tcfapi;e(b,2,c,d)}else if(Cm(a)){Hm(a);var f=++a.Oa;a.M[f]=c;if(a.h){var g={};a.h.postMessage((g.__tcfapiCall={command:b,version:2,callId:f,parameter:d},g),"*")}}else c({},!1)},Cm=function(a){if(a.h)return a.h;var b;a:{for(var c=a.s,d=0;50>d;++d){var e;try{e=!(!c.frames||!c.frames.__tcfapiLocator)}catch(h){e=
!1}if(e){b=c;break a}var f;b:{try{var g=c.parent;if(g&&g!=c){f=g;break b}}catch(h){}f=null}if(!(c=f))break}b=null}a.h=b;return a.h},Hm=function(a){a.C||(a.C=function(b){try{var c;c=("string"===typeof b.data?JSON.parse(b.data):b.data).__tcfapiReturn;a.M[c.callId](c.returnValue,c.success)}catch(d){}},im(a.s,"message",a.C))},Im=function(a){if(!1===a.gdprApplies)return!0;void 0===a.internalErrorState&&(a.internalErrorState=Am(a));return"error"===a.cmpStatus||0!==a.internalErrorState?a.internalBlockOnErrors?
(ym({e:String(a.internalErrorState)}),!1):!0:"loaded"!==a.cmpStatus||"tcloaded"!==a.eventStatus&&"useractioncomplete"!==a.eventStatus?!1:!0};var Jm={1:0,3:0,4:0,7:3,9:3,10:3};function Km(){var a=oi.tcf||{};return oi.tcf=a}
var Lm=function(){return new Bm(z,{mn:-1})},Rm=function(){var a=Km(),b=Lm();Dm(b)&&!Mm()&&!Nm()&&L(124);if(!a.active&&Dm(b)){Mm()&&(a.active=!0,a.Yb={},a.cmpId=0,a.tcfPolicyVersion=0,yj().active=!0,a.tcString="tcunavailable");Yj();try{b.addEventListener(function(c){if(0!==c.internalErrorState)Om(a),Zj([N.g.J,N.g.Ea,N.g.N]),yj().active=!0;else if(a.gdprApplies=c.gdprApplies,a.cmpId=c.cmpId,a.enableAdvertiserConsentMode=c.enableAdvertiserConsentMode,Nm()&&(a.active=!0),!Pm(c)||Mm()||Nm()){a.tcfPolicyVersion=
c.tcfPolicyVersion;var d;if(!1===c.gdprApplies){var e={},f;for(f in Jm)Jm.hasOwnProperty(f)&&(e[f]=!0);d=e;b.removeEventListener(c)}else if(Pm(c)){var g={},h;for(h in Jm)if(Jm.hasOwnProperty(h))if("1"===h){var m,n=c,p={Ll:!0};p=void 0===p?{}:p;m=Im(n)?!1===n.gdprApplies||"tcunavailable"===n.tcString||void 0===n.gdprApplies&&!p.Ll||"string"!==typeof n.tcString||!n.tcString.length?!0:Gm(n,"1",0):!1;g["1"]=m}else g[h]=Gm(c,h,Jm[h]);d=g}if(d){a.tcString=c.tcString||"tcempty";a.Yb=d;var q={},r=(q[N.g.J]=
a.Yb["1"]?"granted":"denied",q);!0!==a.gdprApplies?(Zj([N.g.J,N.g.Ea,N.g.N]),yj().active=!0):(r[N.g.Ea]=a.Yb["3"]&&a.Yb["4"]?"granted":"denied","number"===typeof a.tcfPolicyVersion&&4<=a.tcfPolicyVersion?r[N.g.N]=a.Yb["1"]&&a.Yb["7"]?"granted":"denied":Zj([N.g.N]),Rj(r,{eventId:0},{gdprApplies:a?a.gdprApplies:void 0,tcString:Qm()||""}))}}else Zj([N.g.J,N.g.Ea,N.g.N])})}catch(c){Om(a),Zj([N.g.J,N.g.Ea,N.g.N]),yj().active=!0}}};function Om(a){a.type="e";a.tcString="tcunavailable"}
function Pm(a){return"tcloaded"===a.eventStatus||"useractioncomplete"===a.eventStatus||"cmpuishown"===a.eventStatus}var Mm=function(){return!0===z.gtag_enable_tcf_support};function Nm(){return!0===Km().enableAdvertiserConsentMode}var Qm=function(){var a=Km();if(a.active)return a.tcString},Sm=function(){var a=Km();if(a.active&&void 0!==a.gdprApplies)return a.gdprApplies?"1":"0"},Tm=function(a){if(!Jm.hasOwnProperty(String(a)))return!0;var b=Km();return b.active&&b.Yb?!!b.Yb[String(a)]:!0};var Um=[N.g.J,N.g.R,N.g.N,N.g.Ea],Vm={},Wm=(Vm[N.g.J]=1,Vm[N.g.R]=2,Vm);function Xm(a){if(void 0===a)return 0;switch(S(a,N.g.ja)){case void 0:return 1;case !1:return 3;default:return 2}}
var Ym=function(a){var b=Xm(a);if(3===b)return!1;switch(Fj(N.g.Ea)){case 1:case 3:return!0;case 2:return!1;case 4:return 2===b;case 0:return!0;default:return!1}},Zm=function(){return Hj()||!Ej(N.g.J)||!Ej(N.g.R)},$m=function(){var a={},b;for(b in Wm)Wm.hasOwnProperty(b)&&(a[Wm[b]]=Fj(b));return"G1"+Le(a[1]||0)+Le(a[2]||0)},an={},bn=(an[N.g.J]=0,an[N.g.R]=1,an[N.g.N]=2,an[N.g.Ea]=3,an);function mn(a){switch(a){case void 0:return 1;case !0:return 3;case !1:return 2;default:return 0}}
var nn=function(a){for(var b="1",c=0;c<Um.length;c++){var d=b,e,f=Um[c],g=uj[f];e=void 0===g?0:bn.hasOwnProperty(g)?12|bn[g]:8;var h=yj();h.accessedAny=!0;var m=h.entries[f]||{};e=e<<2|mn(m.implicit);b=d+(""+"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[e]+"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[mn(m.declare)<<4|mn(m.default)<<2|mn(m.update)])}var n=b,p;p=""+(Hj()<<2|Xm(a));return n+p},on=function(){if(!Ej(N.g.N))return"-";var a=yj(),b=wj,c=a.cps,d=
a.usedSetCps,e={};if(b&&d)for(var f in vj)vj.hasOwnProperty(f)&&vj[f].enabled&&c.hasOwnProperty(f)&&c[f].enabled?e[f]={enabled:!0,region:vj[f].region}:e[f]={enabled:!1,region:vj[f].region};else{var g=b?vj:c,h;for(h in g)g.hasOwnProperty(h)&&(e[h]={enabled:g[h].enabled,region:g[h].region})}for(var m={},n=fa(Object.keys(e)),p=n.next();!p.done;p=n.next()){var q=p.value;m[q]=e[q].enabled}for(var r="",t=fa(Object.keys(mi)),u=t.next();!u.done;u=t.next()){var v=u.value;!1!==m[v]&&(r+=mi[v])}return""===r?
"-":r},pn=function(){return cj["6"]||(Mm()||Nm())&&"1"===Sm()?"1":"0"},qn=function(){return(cj["6"]?!0:!(!Mm()&&!Nm())&&"1"===Sm())||yj().usedSetCps||!Ej(N.g.N)},rn=function(){var a="0",b="0",c;var d=Km();c=d.active?d.cmpId:void 0;"number"===typeof c&&0<=c&&4095>=c&&(a="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[c>>6&63],b="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[c&63]);var e="0",f;var g=Km();f=g.active?g.tcfPolicyVersion:void 0;"number"===typeof f&&
0<=f&&63>=f&&(e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[f]);var h=0;cj["6"]&&(h|=1);"1"===Sm()&&(h|=2);Mm()&&(h|=4);var m;var n=Km();m=void 0!==n.enableAdvertiserConsentMode?n.enableAdvertiserConsentMode?"1":"0":void 0;"1"===m&&(h|=8);yj().waitPeriodTimedOut&&(h|=16);return"1"+a+b+e+"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[h]};var sn=function(){var a=!1;return a};var tn={UA:1,AW:2,DC:3,G:4,GF:5,GT:12,GTM:14,HA:6,MC:7},un=function(a,b){var c=Rf.ctid.split("-")[0].toUpperCase(),d={};d.ctid=Rf.ctid;d.Vm=ni.me;d.Xm=ni.Ug;d.Am=lk.ie?2:1;d.uc=Rf.Ef;d.uc!==a&&(d.Tf=a);R(71)?d.Xj=2:R(72)&&(d.Xj=1);ui?(d.Rf=tn[c],d.Rf||(d.Rf=0)):d.Rf=Ai?13:10;yi?d.Ch=1:sn()?d.Ch=2:d.Ch=3;var e;var f=d.Rf,g=d.Ch;void 0===f?e="":(g||(g=0),e=""+Fg(1,1)+"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[f<<2|g]);var h=d.Tn,m=4+e+(h?""+Fg(2,1)+"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[h]:
""),n,p=d.Xm;n=p&&Eg.test(p)?""+Fg(3,2)+p:"";var q,r=d.Vm;q=r?""+Fg(4,1)+"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[r]:"";var t;var u=d.ctid;if(u&&b){var v=u.split("-"),w=v[0].toUpperCase();if("GTM"!==w&&"OPT"!==w)t="";else{var x=v[1];t=""+Fg(5,3)+"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[1+x.length]+(d.Am||0)+x}}else t="";var y=d.Xj,A=d.uc,B=d.Tf,E=d.Yn;return m+n+q+t+(y?""+Fg(6,1)+"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[y]:
"")+(A?""+Fg(7,3)+"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[A.length]+A:"")+(B?""+Fg(8,3)+"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[B.length]+B:"")+(E?""+Fg(9,3)+"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_"[E.length]+E:"")};var vn=function(a){var b=1,c,d,e;if(a)for(b=0,d=a.length-1;0<=d;d--)e=a.charCodeAt(d),b=(b<<6&268435455)+e+(e<<14),c=b&266338304,b=0!==c?b^c>>21:b;return b};var wn=function(a,b,c){for(var d=[],e=b.split(";"),f=0;f<e.length;f++){var g=e[f].split("="),h=g[0].replace(/^\s*|\s*$/g,"");if(h&&h==a){var m=g.slice(1).join("=").replace(/^\s*|\s*$/g,"");m&&c&&(m=decodeURIComponent(m));d.push(m)}}return d};var zn=function(a,b,c,d){return xn(d)?wn(a,String(b||yn()),c):[]},Cn=function(a,b,c,d,e){if(xn(e)){var f=An(a,d,e);if(1===f.length)return f[0].id;if(0!==f.length){f=Bn(f,function(g){return g.Gf},b);if(1===f.length)return f[0].id;f=Bn(f,function(g){return g.Ne},c);return f[0]?f[0].id:void 0}}};function Dn(a,b,c,d){var e=yn(),f=window;"null"!==f.origin&&(f.document.cookie=a);var g=yn();return e!=g||void 0!=c&&0<=zn(b,g,!1,d).indexOf(c)}
var Hn=function(a,b,c,d){function e(w,x,y){if(null==y)return delete h[x],w;h[x]=y;return w+"; "+x+"="+y}function f(w,x){if(null==x)return delete h[x],w;h[x]=!0;return w+"; "+x}if(!xn(c.Gb))return 2;var g;void 0==b?g=a+"=deleted; expires="+(new Date(0)).toUTCString():(c.encode&&(b=encodeURIComponent(b)),b=En(b),g=a+"="+b);var h={};g=e(g,"path",c.path);var m;c.expires instanceof Date?m=c.expires.toUTCString():null!=c.expires&&(m=""+c.expires);g=e(g,"expires",m);g=e(g,"max-age",c.Em);g=e(g,"samesite",
c.Ym);c.bn&&(g=f(g,"secure"));var n=c.domain;if(n&&"auto"===n.toLowerCase()){for(var p=Fn(),q=void 0,r=!1,t=0;t<p.length;++t){var u="none"!==p[t]?p[t]:void 0,v=e(g,"domain",u);v=f(v,c.flags);try{d&&d(a,h)}catch(w){q=w;continue}r=!0;if(!Gn(u,c.path)&&Dn(v,a,b,c.Gb))return 0}if(q&&!r)throw q;return 1}n&&"none"!==n.toLowerCase()&&(g=e(g,"domain",n));g=f(g,c.flags);d&&d(a,h);return Gn(n,c.path)?1:Dn(g,a,b,c.Gb)?0:1},In=function(a,b,c){null==c.path&&(c.path="/");c.domain||(c.domain="auto");return Hn(a,
b,c)};function Bn(a,b,c){for(var d=[],e=[],f,g=0;g<a.length;g++){var h=a[g],m=b(h);m===c?d.push(h):void 0===f||m<f?(e=[h],f=m):m===f&&e.push(h)}return 0<d.length?d:e}function An(a,b,c){for(var d=[],e=zn(a,void 0,void 0,c),f=0;f<e.length;f++){var g=e[f].split("."),h=g.shift();if(!b||-1!==b.indexOf(h)){var m=g.shift();m&&(m=m.split("-"),d.push({id:g.join("."),Gf:1*m[0]||1,Ne:1*m[1]||1}))}}return d}
var En=function(a){a&&1200<a.length&&(a=a.substring(0,1200));return a},Jn=/^(www\.)?google(\.com?)?(\.[a-z]{2})?$/,Kn=/(^|\.)doubleclick\.net$/i,Gn=function(a,b){return Kn.test(window.document.location.hostname)||"/"===b&&Jn.test(a)},yn=function(){return"null"!==window.origin?window.document.cookie:""},Fn=function(){var a=[],b=window.document.location.hostname.split(".");if(4===b.length){var c=b[b.length-1];if(parseInt(c,10).toString()===c)return["none"]}for(var d=b.length-2;0<=d;d--)a.push(b.slice(d).join("."));
var e=window.document.location.hostname;Kn.test(e)||Jn.test(e)||a.push("none");return a},xn=function(a){return a&&rj().h()?(k(a)?[a]:a).every(function(b){return Gj(b)&&Ej(b)}):!0},Ln=function(a){if(!a)return 1;a=0===a.indexOf(".")?a.substr(1):a;return a.split(".").length},Mn=function(a){if(!a||"/"===a)return 1;"/"!==a[0]&&(a="/"+a);"/"!==a[a.length-1]&&(a+="/");return a.split("/").length-1};var Nn=function(a){var b=Math.round(2147483647*Math.random());return a?String(b^vn(a)&2147483647):String(b)},On=function(a){return[Nn(a),Math.round(Ta()/1E3)].join(".")},Pn=function(a,b,c,d,e){var f=Ln(b);return Cn(a,f,Mn(c),d,e)},Qn=function(a,b,c,d){var e=""+Ln(c),f=Mn(d);1<f&&(e+="-"+f);return[b,e,a].join(".")};function Rn(a,b,c,d){var e,f=Number(null!=a.Xb?a.Xb:void 0);0!==f&&(e=new Date((b||Ta())+1E3*(f||7776E3)));return{path:a.path,domain:a.domain,flags:a.flags,encode:!!c,expires:e,Gb:d}};var Sn;var Wn=function(){var a=Tn,b=Un,c=Vn(),d=function(g){a(g.target||g.srcElement||{})},e=function(g){b(g.target||g.srcElement||{})};if(!c.init){Oc(C,"mousedown",d);Oc(C,"keyup",d);Oc(C,"submit",e);var f=HTMLFormElement.prototype.submit;HTMLFormElement.prototype.submit=function(){b(this);f.call(this)};c.init=!0}},Xn=function(a,b,c,d,e){var f={callback:a,domains:b,fragment:2===c,placement:c,forms:d,sameHost:e};Vn().decorators.push(f)},Yn=function(a,b,c){for(var d=Vn().decorators,e={},f=0;f<d.length;++f){var g=
d[f],h;if(h=!c||g.forms)a:{var m=g.domains,n=a,p=!!g.sameHost;if(m&&(p||n!==C.location.hostname))for(var q=0;q<m.length;q++)if(m[q]instanceof RegExp){if(m[q].test(n)){h=!0;break a}}else if(0<=n.indexOf(m[q])||p&&0<=m[q].indexOf(n)){h=!0;break a}h=!1}if(h){var r=g.placement;void 0==r&&(r=g.fragment?2:1);r===b&&Wa(e,g.callback())}}return e};function Vn(){var a=Fc("google_tag_data",{}),b=a.gl;b&&b.decorators||(b={decorators:[]},a.gl=b);return b};var Zn=/(.*?)\*(.*?)\*(.*)/,$n=/^https?:\/\/([^\/]*?)\.?cdn\.ampproject\.org\/?(.*)/,ao=/^(?:www\.|m\.|amp\.)+/,bo=/([^?#]+)(\?[^#]*)?(#.*)?/;function co(a){var b=bo.exec(a);if(b)return{Ih:b[1],query:b[2],fragment:b[3]}}
function eo(a,b){var c=[Dc.userAgent,(new Date).getTimezoneOffset(),Dc.userLanguage||Dc.language,Math.floor(Ta()/60/1E3)-(void 0===b?0:b),a].join("*"),d;if(!(d=Sn)){for(var e=Array(256),f=0;256>f;f++){for(var g=f,h=0;8>h;h++)g=g&1?g>>>1^3988292384:g>>>1;e[f]=g}d=e}Sn=d;for(var m=4294967295,n=0;n<c.length;n++)m=m>>>8^Sn[(m^c.charCodeAt(n))&255];return((m^-1)>>>0).toString(36)}
function fo(){return function(a){var b=ql(z.location.href),c=b.search.replace("?",""),d=il(c,"_gl",!1,!0)||"";a.query=go(d)||{};var e=ll(b,"fragment"),f;var g=-1;if(Ya(e,"_gl="))g=4;else{var h=e.indexOf("&_gl=");0<h&&(g=h+3+2)}if(0>g)f=void 0;else{var m=e.indexOf("&",g);f=0>m?e.substring(g):e.substring(g,m)}a.fragment=go(f||"")||{}}}
var ho=function(a){var b=fo(),c=Vn();c.data||(c.data={query:{},fragment:{}},b(c.data));var d={},e=c.data;e&&(Wa(d,e.query),a&&Wa(d,e.fragment));return d},go=function(a){try{var b=io(a,3);if(void 0!==b){for(var c={},d=b?b.split("*"):[],e=0;e+1<d.length;e+=2){var f=d[e],g=yb(d[e+1]);c[f]=g}Ab("TAGGING",6);return c}}catch(h){Ab("TAGGING",8)}};
function io(a,b){if(a){var c;a:{for(var d=a,e=0;3>e;++e){var f=Zn.exec(d);if(f){c=f;break a}d=decodeURIComponent(d)}c=void 0}var g=c;if(g&&"1"===g[1]){var h=g[3],m;a:{for(var n=g[2],p=0;p<b;++p)if(n===eo(h,p)){m=!0;break a}m=!1}if(m)return h;Ab("TAGGING",7)}}}
function jo(a,b,c,d,e){function f(p){var q=p,r=(new RegExp("(.*?)(^|&)"+a+"=([^&]*)&?(.*)")).exec(q),t=q;if(r){var u=r[2],v=r[4];t=r[1];v&&(t=t+u+v)}p=t;var w=p.charAt(p.length-1);p&&"&"!==w&&(p+="&");return p+n}d=void 0===d?!1:d;e=void 0===e?!1:e;var g=co(c);if(!g)return"";var h=g.query||"",m=g.fragment||"",n=a+"="+b;d?0!==m.substring(1).length&&e||(m="#"+f(m.substring(1))):h="?"+f(h.substring(1));return""+g.Ih+h+m}
function ko(a,b){function c(n,p,q){var r;a:{for(var t in n)if(n.hasOwnProperty(t)){r=!0;break a}r=!1}if(r){var u,v=[],w;for(w in n)if(n.hasOwnProperty(w)){var x=n[w];void 0!==x&&x===x&&null!==x&&"[object Object]"!==x.toString()&&(v.push(w),v.push(xb(String(x))))}var y=v.join("*");u=["1",eo(y),y].join("*");d?(Qf(13)||Qf(11)||!p)&&lo("_gl",u,a,p,q):mo("_gl",u,a,p,q)}}var d="FORM"===(a.tagName||"").toUpperCase(),e=Yn(b,1,d),f=Yn(b,2,d),g=Yn(b,4,d),h=Yn(b,3,d);c(e,!1,!1);c(f,!0,!1);Qf(11)&&c(g,!0,!0);
for(var m in h)h.hasOwnProperty(m)&&no(m,h[m],a)}function no(a,b,c){"a"===c.tagName.toLowerCase()?mo(a,b,c):"form"===c.tagName.toLowerCase()&&lo(a,b,c)}function mo(a,b,c,d,e){d=void 0===d?!1:d;e=void 0===e?!1:e;var f;if(f=c.href){var g;if(!(g=!Qf(16)||d)){var h=z.location.href,m=co(c.href),n=co(h);g=!(m&&n&&m.Ih===n.Ih&&m.query===n.query&&m.fragment)}f=g}if(f){var p=jo(a,b,c.href,d,e);sc.test(p)&&(c.href=p)}}
function lo(a,b,c,d,e){d=void 0===d?!1:d;e=void 0===e?!1:e;if(c&&c.action){var f=(c.method||"").toLowerCase();if("get"!==f||d){if("get"===f||"post"===f){var g=jo(a,b,c.action,d,e);sc.test(g)&&(c.action=g)}}else{for(var h=c.childNodes||[],m=!1,n=0;n<h.length;n++){var p=h[n];if(p.name===a){p.setAttribute("value",b);m=!0;break}}if(!m){var q=C.createElement("input");q.setAttribute("type","hidden");q.setAttribute("name",a);q.setAttribute("value",b);c.appendChild(q)}}}}
function Tn(a){try{var b;a:{for(var c=a,d=100;c&&0<d;){if(c.href&&c.nodeName.match(/^a(?:rea)?$/i)){b=c;break a}c=c.parentNode;d--}b=null}var e=b;if(e){var f=e.protocol;"http:"!==f&&"https:"!==f||ko(e,e.hostname)}}catch(g){}}function Un(a){try{if(a.action){var b=ll(ql(a.action),"host");ko(a,b)}}catch(c){}}
var oo=function(a,b,c,d){Wn();Xn(a,b,"fragment"===c?2:1,!!d,!1)},po=function(a,b){Wn();Xn(a,[kl(z.location,"host",!0)],b,!0,!0)},qo=function(){var a=C.location.hostname,b=$n.exec(C.referrer);if(!b)return!1;var c=b[2],d=b[1],e="";if(c){var f=c.split("/"),g=f[1];e="s"===g?decodeURIComponent(f[2]):decodeURIComponent(g)}else if(d){if(0===d.indexOf("xn--"))return!1;e=d.replace(/-/g,".").replace(/\.\./g,"-")}var h=a.replace(ao,""),m=e.replace(ao,""),n;if(!(n=h===m)){var p="."+m;n=h.substring(h.length-p.length,
h.length)===p}return n},ro=function(a,b){return!1===a?!1:a||b||qo()};var so=["1"],to={},uo={},zo=function(a,b){b=void 0===b?!0:b;var c=vo(a.prefix);if(!to[c])if(wo(c,a.path,a.domain)){var d=uo[vo(a.prefix)];xo(a,d?d.id:void 0,d?d.Bh:void 0)}else{var e=sl("auiddc");if(e)Ab("TAGGING",17),to[c]=e;else if(b){var f=vo(a.prefix),g=On();if(0===yo(f,g,a)){var h=Fc("google_tag_data",{});h._gcl_au||(h._gcl_au=g)}wo(c,a.path,a.domain)}}};
function xo(a,b,c){var d=vo(a.prefix),e=to[d];if(e){var f=e.split(".");if(2===f.length){var g=Number(f[1])||0;if(g){var h=e;b&&(h=e+"."+b+"."+(c?c:Math.floor(Ta()/1E3)));yo(d,h,a,1E3*g)}}}}function yo(a,b,c,d){var e=Qn(b,"1",c.domain,c.path),f=Rn(c,d);f.Gb=Ao();return In(a,e,f)}function wo(a,b,c){var d=Pn(a,b,c,so,Ao());if(!d)return!1;Bo(a,d);return!0}
function Bo(a,b){var c=b.split(".");5===c.length?(to[a]=c.slice(0,2).join("."),uo[a]={id:c.slice(2,4).join("."),Bh:Number(c[4])||0}):3===c.length?uo[a]={id:c.slice(0,2).join("."),Bh:Number(c[2])||0}:to[a]=b}function vo(a){return(a||"_gcl")+"_au"}function Co(a){function b(){Ej(c)&&a()}var c=Ao();Kj(function(){b();Ej(c)||Lj(b,c)},c)}
function Do(a){var b=ho(!0),c=vo(a.prefix);Co(function(){var d=b[c];if(d){Bo(c,d);var e=1E3*Number(to[c].split(".")[1]);if(e){Ab("TAGGING",16);var f=Rn(a,e);f.Gb=Ao();var g=Qn(d,"1",a.domain,a.path);In(c,g,f)}}})}function Eo(a,b,c,d,e){e=e||{};var f=function(){var g={},h=Pn(a,e.path,e.domain,so,Ao());h&&(g[a]=h);return g};Co(function(){oo(f,b,c,d)})}function Ao(){return Qf(14)?["ad_storage","ad_user_data"]:["ad_storage"]};var Fo=function(a){for(var b=[],c=C.cookie.split(";"),d=new RegExp("^\\s*"+(a||"_gac")+"_(UA-\\d+-\\d+)=\\s*(.+?)\\s*$"),e=0;e<c.length;e++){var f=c[e].match(d);f&&b.push({Wh:f[1],value:f[2],timestamp:Number(f[2].split(".")[1])||0})}b.sort(function(g,h){return h.timestamp-g.timestamp});return b};
function Go(a,b){var c=Fo(a),d={};if(!c||!c.length)return d;for(var e=0;e<c.length;e++){var f=c[e].value.split(".");if(!("1"!==f[0]||b&&3>f.length||!b&&3!==f.length)&&Number(f[1])){d[c[e].Wh]||(d[c[e].Wh]=[]);var g={version:f[0],timestamp:1E3*Number(f[1]),aa:f[2]};b&&3<f.length&&(g.labels=f.slice(3));d[c[e].Wh].push(g)}}return d};var Ho=/^\w+$/,Io=/^[\w-]+$/,Jo={aw:"_aw",dc:"_dc",gf:"_gf",ha:"_ha",gp:"_gp",gb:"_gb"};function Ko(){return Qf(14)?["ad_storage","ad_user_data"]:["ad_storage"]}
var Lo=function(a){return!rj().h()||Ej(a)},Mo=function(a){function b(){var d=Lo(c);d&&a();return d}var c=Ko();Kj(function(){b()||Lj(b,c)},c)},Oo=function(a){return No(a).map(function(b){return b.aa})},No=function(a){var b=[],c=zn(a,C.cookie,void 0,Ko());if(!c||0==c.length)return b;for(var d={},e=0;e<c.length;d={aa:void 0},e++){var f=Po(c[e]);if(null!=f){var g=f,h=g.version;d.aa=g.aa;var m=g.timestamp,n=g.labels,p=Ia(b,function(q){return function(r){return r.aa===q.aa}}(d));p?(p.timestamp=Math.max(p.timestamp,
m),p.labels=Qo(p.labels,n||[])):b.push({version:h,aa:d.aa,timestamp:m,labels:n})}}b.sort(function(q,r){return r.timestamp-q.timestamp});return Ro(b)};function Qo(a,b){for(var c={},d=[],e=0;e<a.length;e++)c[a[e]]=!0,d.push(a[e]);for(var f=0;f<b.length;f++)c[b[f]]||d.push(b[f]);return d}function So(a){return a&&"string"==typeof a&&a.match(Ho)?a:"_gcl"}
var Uo=function(){var a=ql(z.location.href),b=ll(a,"query",!1,void 0,"gclid"),c=ll(a,"query",!1,void 0,"gclsrc"),d=ll(a,"query",!1,void 0,"wbraid"),e=ll(a,"query",!1,void 0,"dclid");if(!b||!c||!d){var f=a.hash.replace("#","");b=b||il(f,"gclid",!1);c=c||il(f,"gclsrc",!1);d=d||il(f,"wbraid",!1)}return To(b,c,e,d)},To=function(a,b,c,d){var e={},f=function(g,h){e[h]||(e[h]=[]);e[h].push(g)};e.gclid=a;e.gclsrc=b;e.dclid=c;void 0!==d&&Io.test(d)&&(e.wbraid=d,f(d,"gb"));if(void 0!==a&&a.match(Io))switch(b){case void 0:f(a,
"aw");break;case "aw.ds":f(a,"aw");f(a,"dc");break;case "ds":f(a,"dc");break;case "3p.ds":f(a,"dc");break;case "gf":f(a,"gf");break;case "ha":f(a,"ha")}c&&f(c,"dc");return e},Wo=function(a){var b=Uo();Mo(function(){Vo(b,!1,a)})};
function Vo(a,b,c,d,e){function f(w,x){var y=Xo(w,g);y&&(In(y,x,h),m=!0)}c=c||{};e=e||[];var g=So(c.prefix);d=d||Ta();var h=Rn(c,d,!0);h.Gb=Ko();var m=!1,n=Math.round(d/1E3),p=function(w){var x=["GCL",n,w];0<e.length&&x.push(e.join("."));return x.join(".")};a.aw&&f("aw",p(a.aw[0]));a.dc&&f("dc",p(a.dc[0]));a.gf&&f("gf",p(a.gf[0]));a.ha&&f("ha",p(a.ha[0]));a.gp&&f("gp",p(a.gp[0]));if(!m&&a.gb){var q=a.gb[0],r=Xo("gb",g),t=!1;if(!b)for(var u=No(r),v=0;v<u.length;v++)u[v].aa===q&&u[v].labels&&0<u[v].labels.length&&
(t=!0);t||f("gb",p(q))}}
var Zo=function(a,b){var c=ho(!0);Mo(function(){for(var d=So(b.prefix),e=0;e<a.length;++e){var f=a[e];if(void 0!==Jo[f]){var g=Xo(f,d),h=c[g];if(h){var m=Math.min(Yo(h),Ta()),n;b:{for(var p=m,q=zn(g,C.cookie,void 0,Ko()),r=0;r<q.length;++r)if(Yo(q[r])>p){n=!0;break b}n=!1}if(!n){var t=Rn(b,m,!0);t.Gb=Ko();In(g,h,t)}}}}Vo(To(c.gclid,c.gclsrc),!1,b)})},Xo=function(a,b){var c=Jo[a];if(void 0!==c)return b+c},Yo=function(a){return 0!==$o(a.split(".")).length?1E3*(Number(a.split(".")[1])||0):0};
function Po(a){var b=$o(a.split("."));return 0===b.length?null:{version:b[0],aa:b[2],timestamp:1E3*(Number(b[1])||0),labels:b.slice(3)}}function $o(a){return 3>a.length||"GCL"!==a[0]&&"1"!==a[0]||!/^\d+$/.test(a[1])||!Io.test(a[2])?[]:a}
var ap=function(a,b,c,d,e){if(Ha(b)&&"null"!==z.origin){var f=So(e),g=function(){for(var h={},m=0;m<a.length;++m){var n=Xo(a[m],f);if(n){var p=zn(n,C.cookie,void 0,Ko());p.length&&(h[n]=p.sort()[p.length-1])}}return h};Mo(function(){oo(g,b,c,d)})}},Ro=function(a){return a.filter(function(b){return Io.test(b.aa)})},bp=function(a,b){if("null"!==z.origin){for(var c=So(b.prefix),d={},e=0;e<a.length;e++)Jo[a[e]]&&(d[a[e]]=Jo[a[e]]);Mo(function(){l(d,function(f,g){var h=zn(c+g,C.cookie,void 0,Ko());h.sort(function(t,
u){return Yo(u)-Yo(t)});if(h.length){var m=h[0],n=Yo(m),p=0!==$o(m.split(".")).length?m.split(".").slice(3):[],q={},r;r=0!==$o(m.split(".")).length?m.split(".")[2]:void 0;q[f]=[r];Vo(q,!0,b,n,p)}})})}};function cp(a,b){for(var c=0;c<b.length;++c)if(a[b[c]])return!0;return!1}
var dp=function(a){function b(e,f,g){g&&(e[f]=g)}if(Hj()){var c=Uo();if(cp(c,a)){var d={};b(d,"gclid",c.gclid);b(d,"dclid",c.dclid);b(d,"gclsrc",c.gclsrc);b(d,"wbraid",c.wbraid);po(function(){return d},3);po(function(){var e={};return e._up="1",e},1)}}},ep=function(a){if(!Qf(11))return null;var b=ho(!0).gad_source;if(null!=b)return z.location.hash="",b;if(Qf(12)){var c=ql(z.location.href);b=ll(c,"query",!1,void 0,"gad_source");if(null!=b)return b;var d=Uo();if(cp(d,a))return"0"}return null},fp=function(a){var b=
ep(a);null!=b&&po(function(){var c={};return c.gad_source=b,c},4)},gp=function(a,b,c,d){var e=[];c=c||{};if(!Lo(Ko()))return e;var f=No(a);if(!f.length)return e;for(var g=0;g<f.length;g++)-1===(f[g].labels||[]).indexOf(b)?e.push(0):e.push(1);if(d)return e;if(1!==e[0]){var h=f[0],m=f[0].timestamp,n=[h.version,Math.round(m/1E3),h.aa].concat(h.labels||[],[b]).join("."),p=Rn(c,m,!0);p.Gb=Ko();In(a,n,p)}return e};
function hp(a,b){var c=So(b),d=Xo(a,c);if(!d)return 0;for(var e=No(d),f=0,g=0;g<e.length;g++)f=Math.max(f,e[g].timestamp);return f}function ip(a){var b=0,c;for(c in a)for(var d=a[c],e=0;e<d.length;e++)b=Math.max(b,Number(d[e].timestamp));return b}var jp=function(a){var b=Math.max(hp("aw",a),ip(Lo(Ko())?Go():{}));return Math.max(hp("gb",a),ip(Lo(Ko())?Go("_gac_gb",!0):{}))>b};var zp,Ap=!1;function Bp(){Ap=!0;zp=zp||{}}var Cp=function(a){Ap||Bp();return zp[a]};var Dp=function(a,b,c){this.target=a;this.eventName=b;this.o=c;this.h={};this.metadata=nb(c.eventMetadata||{});this.isAborted=!1};Dp.prototype.copyToHitData=function(a,b,c){var d=S(this.o,a);void 0===d&&(d=b);if(void 0!==d&&void 0!==c&&k(d)&&R(50))try{d=c(d)}catch(e){}void 0!==d&&(this.h[a]=d)};var Ep=function(a){return a.metadata.source_canonical_id},Fp=function(a,b,c){var d=Cp(a.target.da);return d&&d.hasOwnProperty(b)?d[b]:c};function Jp(a){var b=S(a.o,N.g.yb),c=S(a.o,N.g.Lb);b&&!c?(a.eventName!==N.g.sa&&a.eventName!==N.g.xd&&L(131),a.isAborted=!0):!b&&c&&(L(132),a.isAborted=!0)}function Kp(a){var b=Uj(N.g.J)?oi.pscdl:"denied";a.h[N.g.af]=b};var Op=function(){oi.dedupe_gclid||(oi.dedupe_gclid=""+On());return oi.dedupe_gclid};var Up=function(a,b,c,d){var e=Lc(),f;if(1===e)a:{var g=Ci;g=g.toLowerCase();for(var h="https://"+g,m="http://"+g,n=1,p=C.getElementsByTagName("script"),q=0;q<p.length&&100>q;q++){var r=p[q].src;if(r){r=r.toLowerCase();if(0===r.indexOf(m)){f=3;break a}1===n&&0===r.indexOf(h)&&(n=2)}}f=n}else f=e;return(2===f||d||"http:"!=z.location.protocol?a:b)+c};function fq(a){return{getDestinationId:function(){return a.target.da},getEventName:function(){return a.eventName},setEventName:function(b){a.eventName=b},getHitData:function(b){return a.h[b]},setHitData:function(b,c){a.h[b]=c},setHitDataIfNotDefined:function(b,c){void 0===a.h[b]&&(a.h[b]=c)},copyToHitData:function(b,c){a.copyToHitData(b,c)},getMetadata:function(b){return a.metadata[b]},setMetadata:function(b,c){a.metadata[b]=c},isAborted:function(){return a.isAborted},abort:function(){a.isAborted=
!0},getFromEventContext:function(b){return S(a.o,b)},Dj:function(){return a},getHitKeys:function(){return Object.keys(a.h)}}};var hq=function(a){var b=gq[a.target.da];if(!a.isAborted&&b)for(var c=fq(a),d=0;d<b.length;++d){try{b[d](c)}catch(e){a.isAborted=!0}if(a.isAborted)break}},iq=function(a,b){var c=gq[a];c||(c=gq[a]=[]);c.push(b)},gq={};function mq(a,b){if(a){var c=""+a;0!==c.indexOf("http://")&&0!==c.indexOf("https://")&&(c="https://"+c);"/"===c[c.length-1]&&(c=c.substring(0,c.length-1));return ql(""+c+b).href}}function nq(){return!!ni.zf&&"SGTM_TOKEN"!==ni.zf.split("@@").join("")}function oq(a){for(var b=fa([N.g.Sd,N.g.Pb]),c=b.next();!c.done;c=b.next()){var d=S(a,c.value);if(d)return d}};var qq=/^(www\.)?google(\.com?)?(\.[a-z]{2}t?)?$/,rq=/^www.googleadservices.com$/,tq=function(a){a||(a=sq());return a.rn?!1:a.am||a.bm||a.dm||a.rh||a.If||a.Kl||a.Sl?!0:!1},sq=function(){var a={},b=ho(!0);a.rn=!!b._up;var c=Uo();a.am=void 0!==c.aw;a.bm=void 0!==c.dc;a.dm=void 0!==c.wbraid;var d=ql(z.location.href),e=ll(d,"query",!1,void 0,"gad");a.rh=void 0!==e;if(!a.rh){var f=d.hash.replace("#",""),g=il(f,"gad",!1);a.rh=void 0!==g}a.If=void 0;if(R(58)){var h=ll(d,"query",!1,void 0,"gad_source");a.If=
h;if(void 0===a.If){var m=d.hash.replace("#",""),n=il(m,"gad_source",!1);a.If=n}}var p=C.referrer?ll(ql(C.referrer),"host"):"";a.Sl=qq.test(p);a.Kl=rq.test(p);return a};var uq=function(){var a=z.screen;return{width:a?a.width:0,height:a?a.height:0}},vq=function(a){if(C.hidden)return!0;var b=a.getBoundingClientRect();if(b.top==b.bottom||b.left==b.right||!z.getComputedStyle)return!0;var c=z.getComputedStyle(a,null);if("hidden"===c.visibility)return!0;for(var d=a,e=c;d;){if("none"===e.display)return!0;var f=e.opacity,g=e.filter;if(g){var h=g.indexOf("opacity(");0<=h&&(g=g.substring(h+8,g.indexOf(")",h)),"%"==g.charAt(g.length-1)&&(g=g.substring(0,g.length-1)),f=Math.min(g,
f))}if(void 0!==f&&0>=f)return!0;(d=d.parentElement)&&(e=z.getComputedStyle(d,null))}return!1};
var wq=function(){var a=C.body,b=C.documentElement||a&&a.parentElement,c,d;if(C.compatMode&&"BackCompat"!==C.compatMode)c=b?b.clientHeight:0,d=b?b.clientWidth:0;else{var e=function(f,g){return f&&g?Math.min(f,g):Math.max(f,g)};c=e(b?b.clientHeight:0,a?a.clientHeight:0);d=e(b?b.clientWidth:0,a?a.clientWidth:0)}return{width:d,height:c}},xq=function(a){var b=wq(),c=b.height,d=b.width,e=a.getBoundingClientRect(),f=e.bottom-e.top,g=e.right-e.left;return f&&g?(1-Math.min((Math.max(0-e.left,0)+Math.max(e.right-
d,0))/g,1))*(1-Math.min((Math.max(0-e.top,0)+Math.max(e.bottom-c,0))/f,1)):0};
var Fq=function(a,b,c){var d=a.element,e={U:a.U,type:a.na,tagName:d.tagName};b&&(e.querySelector=Eq(d));c&&(e.isVisible=!vq(d));return e},Gq=function(a,b,c){return Fq({element:a.element,U:a.U,na:"1"},b,c)},Hq=function(a){var b=!!a.md+"."+!!a.nd;a&&a.ue&&a.ue.length&&(b+="."+a.ue.join("."));a&&a.ob&&(b+="."+a.ob.email+"."+a.ob.phone+"."+a.ob.address);return b},Kq=function(a){if(0!=a.length){var b;b=Iq(a,function(c){return!Jq.test(c.U)});b=Iq(b,function(c){return"INPUT"===c.element.tagName.toUpperCase()});
b=Iq(b,function(c){return!vq(c.element)});return b[0]}},Lq=function(a,b){if(!b||0===b.length)return a;for(var c=[],d=0;d<a.length;d++){for(var e=!0,f=0;f<b.length;f++){var g=b[f];if(g&&wh(a[d].element,g)){e=!1;break}}e&&c.push(a[d])}return c},Iq=function(a,b){if(1>=a.length)return a;var c=a.filter(b);return 0==c.length?a:c},Eq=function(a){var b;if(a===C.body)b="body";else{var c;if(a.id)c="#"+a.id;else{var d;if(a.parentElement){var e;a:{var f=a.parentElement;if(f){for(var g=0;g<f.childElementCount;g++)if(f.children[g]===
a){e=g+1;break a}e=-1}else e=1}d=Eq(a.parentElement)+">:nth-child("+e+")"}else d="";c=d}b=c}return b},Nq=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=d.textContent;"INPUT"===d.tagName.toUpperCase()&&d.value&&(e=d.value);if(e){var f=e.match(Mq);if(f){var g=f[0],h;if(z.location){var m=kl(z.location,"host",!0);h=0<=g.toLowerCase().indexOf(m)}else h=!1;h||b.push({element:d,U:g})}}}return b},Rq=function(){var a=[],b=C.body;if(!b)return{elements:a,status:"4"};for(var c=b.querySelectorAll("*"),
d=0;d<c.length&&1E4>d;d++){var e=c[d];if(!(0<=Oq.indexOf(e.tagName.toUpperCase()))&&e.children instanceof HTMLCollection){for(var f=!1,g=0;g<e.childElementCount&&1E4>g;g++)if(!(0<=Pq.indexOf(e.children[g].tagName.toUpperCase()))){f=!0;break}(!f||R(27)&&-1!==Qq.indexOf(e.tagName))&&a.push(e)}}return{elements:a,status:1E4<c.length?"2":"1"}},Sq=!1;var Mq=/[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}/i,
Tq=/@(gmail|googlemail)\./i,Jq=/support|noreply/i,Oq="SCRIPT STYLE IMG SVG PATH BR NOSCRIPT TEXTAREA".split(" "),Pq=["BR"],Uq={wn:"1",Ln:"2",An:"3",En:"4",tn:"5",Mn:"6",Hn:"7"},Vq={},Qq=["INPUT","SELECT"];var nr=function(a){a=a||{md:!0,nd:!0};a.ob=a.ob||{email:!0,phone:!1,address:!1};var b=Hq(a),c=Vq[b];if(c&&200>Ta()-c.timestamp)return c.result;var d=Rq(),e=d.status,
f=[],g,h,m=[];if(!R(27)){if(a.ob&&a.ob.email){var n=Nq(d.elements);f=Lq(n,a&&a.ue);g=Kq(f);10<n.length&&(e="3")}!a.Th&&g&&(f=[g]);for(var p=0;p<f.length;p++)m.push(Gq(f[p],a.md,a.nd));m=m.slice(0,10)}else if(a.ob){}g&&(h=Gq(g,a.md,a.nd));var E={elements:m,Mh:h,status:e};Vq[b]={timestamp:Ta(),result:E};return E},or=function(a){return a.tagName+":"+a.isVisible+":"+a.U.length+":"+Tq.test(a.U)};var pr={jl:Number('')||500,Ok:Number('')||5E3,bj:Number('')||10,vk:Number('')||5E3};function qr(a){return a.performance&&a.performance.now()||Date.now()}
var rr=function(a,b){var c;return c};var sr="https://"+ni.wd,tr=sr+"/gtm/static/",ur=Number('')||5,vr=Number('')||50,wr=sr,xr=tr,yr=!1,zr=0,Ar=Ja();function Jr(){var a=!1;return a}
function Kr(a){}
function Mr(a,b,c){}
function Fr(a,b,c,d){}
function Lr(a,b,c,d,e){}
function Nr(a,b,c,d){}
function Or(a,b,c,d){}
function Pr(a){var b={},c=["tv.1"],d=0;
var u=c.join("~");return{U:b,Nf:u}}var Qr=void 0;function Rr(a){var b="";return b};var Sr=function(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);128>e?b[c++]=e:(2048>e?b[c++]=e>>6|192:(55296==(e&64512)&&d+1<a.length&&56320==(a.charCodeAt(d+1)&64512)?(e=65536+((e&1023)<<10)+(a.charCodeAt(++d)&1023),b[c++]=e>>18|240,b[c++]=e>>12&63|128):b[c++]=e>>12|224,b[c++]=e>>6&63|128),b[c++]=e&63|128)}return b};bc();km()||Zb("iPod");Zb("iPad");!Zb("Android")||cc()||bc()||ac()||Zb("Silk");cc();!Zb("Safari")||cc()||($b()?0:Zb("Coast"))||ac()||($b()?0:Zb("Edge"))||($b()?Yb("Microsoft Edge"):Zb("Edg/"))||($b()?Yb("Opera"):Zb("OPR"))||bc()||Zb("Silk")||Zb("Android")||lm();var Tr={},Ur=null,Vr=function(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);255<e&&(b[c++]=e&255,e>>=8);b[c++]=e}var f=4;void 0===f&&(f=0);if(!Ur){Ur={};for(var g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),h=["+/=","+/","-_=","-_.","-_"],m=0;5>m;m++){var n=g.concat(h[m].split(""));Tr[m]=n;for(var p=0;p<n.length;p++){var q=n[p];void 0===Ur[q]&&(Ur[q]=p)}}}for(var r=Tr[f],t=Array(Math.floor(b.length/3)),u=r[64]||"",v=0,w=0;v<b.length-2;v+=3){var x=b[v],
y=b[v+1],A=b[v+2],B=r[x>>2],E=r[(x&3)<<4|y>>4],F=r[(y&15)<<2|A>>6],D=r[A&63];t[w++]=""+B+E+F+D}var M=0,O=u;switch(b.length-v){case 2:M=b[v+1],O=r[(M&15)<<2]||u;case 1:var P=b[v];t[w]=""+r[P>>2]+r[(P&3)<<4|M>>4]+O+u}return t.join("")};Object.freeze(new function(){});Object.freeze(new function(){});var Wr="platform platformVersion architecture model uaFullVersion bitness fullVersionList wow64".split(" ");function Xr(a){var b;return null!=(b=a.google_tag_data)?b:a.google_tag_data={}}function Yr(){var a=z.google_tag_data,b;if(null!=a&&a.uach){var c=a.uach,d=Object.assign({},c);c.fullVersionList&&(d.fullVersionList=c.fullVersionList.slice(0));b=d}else b=null;return b}function Zr(){var a,b;return null!=(b=null==(a=z.google_tag_data)?void 0:a.uach_promise)?b:null}
function $r(a){var b,c;return"function"===typeof(null==(b=a.navigator)?void 0:null==(c=b.userAgentData)?void 0:c.getHighEntropyValues)}function as(){var a=z;if(!$r(a))return null;var b=Xr(a);if(b.uach_promise)return b.uach_promise;var c=a.navigator.userAgentData.getHighEntropyValues(Wr).then(function(d){null!=b.uach||(b.uach=d);return d});return b.uach_promise=c};
var bs,cs=function(){if($r(z)&&(bs=Ta(),!Zr())){var a=as();a&&(a.then(function(){L(95);}),a.catch(function(){L(96)}))}},es=function(a){var b=ds.pn,c=function(g,h){try{a(g,h)}catch(m){}},d=Yr();if(d)c(d);else{var e=Zr();if(e){b=
Math.min(Math.max(isFinite(b)?b:0,0),1E3);var f=z.setTimeout(function(){c.He||(c.He=!0,L(106),c(null,Error("Timeout")))},b);e.then(function(g){c.He||(c.He=!0,L(104),z.clearTimeout(f),c(g))}).catch(function(g){c.He||(c.He=!0,L(105),z.clearTimeout(f),c(null,g))})}else c(null)}},fs=function(a,b){a&&(b.h[N.g.Wd]=a.architecture,b.h[N.g.Xd]=a.bitness,a.fullVersionList&&(b.h[N.g.Yd]=a.fullVersionList.map(function(c){return encodeURIComponent(c.brand||"")+";"+encodeURIComponent(c.version||"")}).join("|")),
b.h[N.g.Zd]=a.mobile?"1":"0",b.h[N.g.ae]=a.model,b.h[N.g.be]=a.platform,b.h[N.g.ce]=a.platformVersion,b.h[N.g.de]=a.wow64?"1":"0")};function gs(){return"attribution-reporting"}function hs(a){var b;b=void 0===b?document:b;var c;return!(null==(c=b.featurePolicy)||!c.allowedFeatures().includes(a))};var is=!1;function js(){if(hs("join-ad-interest-group")&&Fa(Dc.joinAdInterestGroup))return!0;is||(tm('AymqwRC7u88Y4JPvfIF2F37QKylC04248hLCdJAsh8xgOfe/dVJPV3XS3wLFca1ZMVOtnBfVjaCMTVudWM//5g4AAAB7eyJvcmlnaW4iOiJodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbTo0NDMiLCJmZWF0dXJlIjoiUHJpdmFjeVNhbmRib3hBZHNBUElzIiwiZXhwaXJ5IjoxNjk1MTY3OTk5LCJpc1RoaXJkUGFydHkiOnRydWV9'),is=!0);return hs("join-ad-interest-group")&&Fa(Dc.joinAdInterestGroup)}
function ks(a,b){var c=void 0;try{c=C.querySelector('iframe[data-tagging-id="'+b+'"]')}catch(e){}if(c){var d=Number(c.dataset.loadTime);if(d&&6E4>Ta()-d){Ab("TAGGING",9);return}try{c.parentNode.removeChild(c)}catch(e){}c=void 0}else try{if(50<=C.querySelectorAll('iframe[allow="join-ad-interest-group"][data-tagging-id*="-"]').length){Ab("TAGGING",10);return}}catch(e){}Mc(a,void 0,{allow:"join-ad-interest-group"},{taggingId:b,loadTime:Ta()},c)}function ls(){return"https://td.doubleclick.net"};var ms=RegExp("^UA-\\d+-\\d+%3A[\\w-]+(?:%2C[\\w-]+)*(?:%3BUA-\\d+-\\d+%3A[\\w-]+(?:%2C[\\w-]+)*)*$"),ns=/^~?[\w-]+(?:\.~?[\w-]+)*$/,os=/^\d+\.fls\.doubleclick\.net$/,ps=/;gac=([^;?]+)/,qs=/;gacgb=([^;?]+)/,rs=/;gclaw=([^;?]+)/,ss=/;gclgb=([^;?]+)/;
function ts(a,b){if(os.test(C.location.host)){var c=C.location.href.match(b);return c&&2==c.length&&c[1].match(ms)?decodeURIComponent(c[1]):""}var d=[],e;for(e in a){for(var f=[],g=a[e],h=0;h<g.length;h++)f.push(g[h].aa);d.push(e+":"+f.join(","))}return 0<d.length?d.join(";"):""}
var us=function(a,b,c){var d=Lo(Ko())?Go("_gac_gb",!0):{},e=[],f=!1,g;for(g in d){var h=gp("_gac_gb_"+g,a,b,c);f=f||0!==h.length&&h.some(function(m){return 1===m});e.push(g+":"+h.join(","))}return{Jl:f?e.join(";"):"",Il:ts(d,qs)}};function vs(a,b,c){if(os.test(C.location.host)){var d=C.location.href.match(c);if(d&&2==d.length&&d[1].match(ns))return[{aa:d[1]}]}else return No((a||"_gcl")+b);return[]}
var ws=function(a){return vs(a,"_aw",rs).map(function(b){return b.aa}).join(".")},xs=function(a){return vs(a,"_gb",ss).map(function(b){return b.aa}).join(".")},ys=function(a,b){var c=gp((b&&b.prefix||"_gcl")+"_gb",a,b);return 0===c.length||c.every(function(d){return 0===d})?"":c.join(".")};var zs=function(){if(Fa(z.__uspapi)){var a="";try{z.__uspapi("getUSPData",1,function(b,c){if(c&&b){var d=b.uspString;d&&RegExp("^[\\da-zA-Z-]{1,20}$").test(d)&&(a=d)}})}catch(b){}return a}};var nt={H:{Zh:"ads_conversion_hit",vd:"container_execute_start",di:"container_setup_end",Yf:"container_setup_start",ai:"container_blocking_end",bi:"container_execute_end",ei:"container_yield_end",Zf:"container_yield_start",Ui:"event_execute_end",Ti:"event_evaluation_end",Qg:"event_evaluation_start",Vi:"event_setup_end",he:"event_setup_start",Wi:"ga4_conversion_hit",je:"page_load",Kn:"pageview",Ub:"snippet_load",lj:"tag_callback_error",mj:"tag_callback_failure",nj:"tag_callback_success",oj:"tag_execute_end",
gd:"tag_execute_start"}};function ot(){function a(c,d){var e=Cb(d);e&&b.push(c+"="+e)}var b=[];a("&u","GTM");a("&ut","TAGGING");a("&h","HEALTH");return b.join("")};var pt=!1;
var Yt=function(a,b){},Zt=function(a,b){},$t=function(a,b){},au=function(a,b){},bu=function(){var a={};return a},Qt=function(a){a=void 0===a?!0:a;var b={};return b},cu=function(){},du=function(a,b){},
eu=function(a,b,c){},fu=function(){};
var gu=function(a,b){var c=z,d,e=c.GooglebQhCsO;e||(e={},c.GooglebQhCsO=e);d=e;if(d[a])return!1;d[a]=[];d[a][0]=b;return!0};var hu=function(a,b,c){var d=om(a,"fmt");if(b){var e=om(a,"random"),f=om(a,"label")||"";if(!e)return!1;var g=Vr(decodeURIComponent(f.replace(/\+/g," "))+":"+decodeURIComponent(e.replace(/\+/g," ")));if(!gu(g,b))return!1}d&&4!=d&&(a=qm(a,"rfmt",d));var h=qm(a,"fmt",4);Kc(h,function(){z.google_noFurtherRedirects&&b&&b.call&&(z.google_noFurtherRedirects=null,b())},void 0,c,C.getElementsByTagName("script")[0].parentElement||void 0);return!0};var yu=function(){this.h={}},zu=function(a,b,c){null!=c&&(a.h[b]=c)},Au=function(a){return Object.keys(a.h).map(function(b){return encodeURIComponent(b)+"="+encodeURIComponent(a.h[b])}).join("&")},Cu=function(a,b,c,d){};function Eu(a,b){if(data.entities&&data.entities[a])return data.entities[a][b]};var Gu=function(a,b,c){c=void 0===c?!1:c;var d=Fu(a);d.entity.push(b);d._entity||(d._entity={internal:[],external:[]});c?d._entity.external.push(b):d._entity.internal.push(b)},Hu=function(){var a=Fu(uk());if(R(92)){var b,c;return[].concat(ja((null==a?void 0:null==(b=a._entity)?void 0:b.internal)||[]),ja((null==a?void 0:null==(c=a._entity)?void 0:c.external)||[]))}return a.entity},Iu=function(a,b,c){c=void 0===c?!1:c;var d=Fu(a);d.event&&(d.event.push(b),d._event||(d._event={internal:[],external:[]}),
c?d._event.external.push(b):d._event.internal.push(b))},Ju=function(){var a=Fu(uk());if(R(92)){var b,c;return[].concat(ja((null==a?void 0:null==(b=a._event)?void 0:b.internal)||[]),ja((null==a?void 0:null==(c=a._event)?void 0:c.external)||[]))}return a.event||[]};function Fu(a){var b,c=oi.r;c||(c=new Ku,oi.r=c);b=c;var d=b.container[a];d||(d={entity:[],event:[],_entity:{internal:[],external:[]},_event:{internal:[],external:[]}},b.container[a]=d);return d}
var Ku=function(){this.container={};this.h={}},Lu=function(a,b){var c=a.container[b];c||(c={entity:[],event:[],_entity:{internal:[],external:[]},_event:{internal:[],external:[]}},a.container[b]=c);return c};Ku.prototype.addRestriction=function(a,b,c,d){d=void 0===d?!1:d;if(!d||!this.h[b]){var e=Lu(this,b);0===a?d?e._entity.external.push(c):e._entity.internal.push(c):1===a&&(d?e._event.external.push(c):e._event.internal.push(c))}};
Ku.prototype.getRestrictions=function(a,b){var c=Lu(this,b);if(0===a){var d,e;return[].concat(ja((null==c?void 0:null==(d=c._entity)?void 0:d.internal)||[]),ja((null==c?void 0:null==(e=c._entity)?void 0:e.external)||[]))}if(1===a){var f,g;return[].concat(ja((null==c?void 0:null==(f=c._event)?void 0:f.internal)||[]),ja((null==c?void 0:null==(g=c._event)?void 0:g.external)||[]))}return[]};
Ku.prototype.getExternalRestrictions=function(a,b){var c=Lu(this,b),d,e;return 0===a?(null==c?void 0:null==(d=c._entity)?void 0:d.external)||[]:(null==c?void 0:null==(e=c._event)?void 0:e.external)||[]};Ku.prototype.removeExternalRestrictions=function(a){var b=Lu(this,a);b._event&&(b._event.external=[]);b._entity&&(b._entity.external=[]);this.h[a]=!0};var Mu=new RegExp(/^(.*\.)?(google|youtube|blogger|withgoogle)(\.com?)?(\.[a-z]{2})?\.?$/),Nu={cl:["ecl"],customPixels:["nonGooglePixels"],ecl:["cl"],ehl:["hl"],gaawc:["googtag"],hl:["ehl"],html:["customScripts","customPixels","nonGooglePixels","nonGoogleScripts","nonGoogleIframes"],customScripts:["html","customPixels","nonGooglePixels","nonGoogleScripts","nonGoogleIframes"],nonGooglePixels:[],nonGoogleScripts:["nonGooglePixels"],nonGoogleIframes:["nonGooglePixels"]},Ou={cl:["ecl"],customPixels:["customScripts",
"html"],ecl:["cl"],ehl:["hl"],gaawc:["googtag"],hl:["ehl"],html:["customScripts"],customScripts:["html"],nonGooglePixels:["customPixels","customScripts","html","nonGoogleScripts","nonGoogleIframes"],nonGoogleScripts:["customScripts","html"],nonGoogleIframes:["customScripts","html","nonGoogleScripts"]},Pu="google customPixels customScripts html nonGooglePixels nonGoogleScripts nonGoogleIframes".split(" "),Su=function(a){var b=Oi("gtm.allowlist")||Oi("gtm.whitelist");b&&L(9);ui&&(b=["google","gtagfl",
"lcl","zone"]);Qu()&&(ui?L(116):(L(117),Ru&&(b=[],window.console&&window.console.log&&window.console.log("GTM blocked. See go/13687728."))));var c=b&&Xa(Pa(b),Nu),d=Oi("gtm.blocklist")||Oi("gtm.blacklist");d||(d=Oi("tagTypeBlacklist"))&&L(3);d?L(8):d=[];Qu()&&(d=Pa(d),d.push("nonGooglePixels","nonGoogleScripts","sandboxedScripts"));0<=Pa(d).indexOf("google")&&L(2);var e=d&&Xa(Pa(d),Ou),f={};return function(g){var h=g&&g[Me.ka];if(!h||"string"!=typeof h)return!0;h=h.replace(/^_*/,"");if(void 0!==f[h])return f[h];
var m=Gi[h]||[],n=a(h,m);if(!R(89))for(var p=Hu(),q=0;q<p.length;q++)try{n=n&&p[q](h,m)}catch(y){n=!1}if(b){var r;if(r=n)a:{if(0>c.indexOf(h))if(m&&0<m.length)for(var t=0;t<m.length;t++){if(0>c.indexOf(m[t])){L(11);r=!1;break a}}else{r=!1;break a}r=!0}n=r}var u=!1;if(d){var v=0<=e.indexOf(h);if(v)u=v;else{var w=La(e,m||[]);w&&L(10);u=w}}var x=!n||u;x||!(0<=m.indexOf("sandboxedScripts"))||c&&-1!==c.indexOf("sandboxedScripts")||(x=La(e,Pu));return f[h]=x}},Ru=!1;
Ru=!0;var Qu=function(){return Mu.test(z.location&&z.location.hostname)},Tu=function(){if(mk){var a=function(b){var c=vf(b),d;if(Af(c)){var e=c[Me.ka];if(!e)throw"Error: No function name given for function call.";var f=of[e];d=!!f&&!!f.runInSiloedMode}else d=!!Eu(c[Me.ka],4);return d};R(89)?Gu(uk(),function(b){return a(b.entityId)}):Gu(uk(),a)}};var Vu=function(a,b,c,d,e){if(!Uu()&&!Ak(a)){var f="?id="+encodeURIComponent(a)+"&l="+ni.fa,g=0===a.indexOf("GTM-");g||(f+="&cx=c");R(38)&&(f+="&gtm="+un());var h=nq();h&&(f+="&sign="+ni.zf);var m=c?"/gtag/js":"/gtm.js",n=wi||yi?mq(b,m+f):void 0;if(!n){var p=ni.wd+m;h&&Ec&&g&&(p=Ec.replace(/^(?:https?:\/\/)?/i,"").split(/[?#]/)[0]);n=Up("https://","http://",p+f)}var q=a;d.siloed&&(Dk({ctid:q,isDestination:!1}),q=ok(q));var r=q,t=Ck();ik().container[r]={state:1,context:d,parent:t};jk({ctid:r,isDestination:!1},
e);Kc(n)}},Wu=function(a,b,c,d){if(!Uu()&&!Bk(a))if(Ek())ik().destination[a]={state:0,transportUrl:b,context:c,parent:Ck()},jk({ctid:a,isDestination:!0},d),L(91);else{var e="/gtag/destination?id="+encodeURIComponent(a)+"&l="+ni.fa+"&cx=c";R(38)&&(e+="&gtm="+un());nq()&&(e+="&sign="+ni.zf);var f=wi||yi?mq(b,e):void 0;f||(f=Up("https://","http://",ni.wd+e));var g=a;c.siloed&&(Dk({ctid:g,isDestination:!0}),g=ok(g));ik().destination[g]={state:1,context:c,parent:Ck()};jk({ctid:g,isDestination:!0},d);Kc(f)}};
function Uu(){if(sn()){return!0}return!1};var Xu=!1,Yu=0,Zu=[];function $u(a){if(!Xu){var b=C.createEventObject,c="complete"==C.readyState,d="interactive"==C.readyState;if(!a||"readystatechange"!=a.type||c||!b&&d){Xu=!0;for(var e=0;e<Zu.length;e++)G(Zu[e])}Zu.push=function(){for(var f=0;f<arguments.length;f++)G(arguments[f]);return 0}}}function av(){if(!Xu&&140>Yu){Yu++;try{C.documentElement.doScroll("left"),$u()}catch(a){z.setTimeout(av,50)}}}var bv=function(a){Xu?a():Zu.push(a)};var cv=function(){this.F=0;this.h={}};cv.prototype.addListener=function(a,b,c){var d=++this.F;this.h[a]=this.h[a]||{};this.h[a][String(d)]={listener:b,qb:c};return d};cv.prototype.s=function(a,b){var c=this.h[a],d=String(b);if(!c||!c[d])return!1;delete c[d];return!0};cv.prototype.C=function(a,b){var c=[];l(this.h[a],function(d,e){0>c.indexOf(e.listener)&&(void 0===e.qb||0<=b.indexOf(e.qb))&&c.push(e.listener)});return c};var dv=function(a,b,c){return{entityType:a,indexInOriginContainer:b,nameInOriginContainer:c,originContainerId:tk()}};var fv=function(a,b){this.h=!1;this.F=[];this.M={tags:[]};this.X=!1;this.s=this.C=0;ev(this,a,b)},gv=function(a,b,c,d){if(ri.hasOwnProperty(b)||"__zone"===b)return-1;var e={};lb(d)&&(e=nb(d,e));e.id=c;e.status="timeout";return a.M.tags.push(e)-1},hv=function(a,b,c,d){var e=a.M.tags[b];e&&(e.status=c,e.executionTime=d)},iv=function(a){if(!a.h){for(var b=a.F,c=0;c<b.length;c++)b[c]();a.h=!0;a.F.length=0}},ev=function(a,b,c){void 0!==b&&a.Bf(b);c&&z.setTimeout(function(){return iv(a)},Number(c))};
fv.prototype.Bf=function(a){var b=this,c=Va(function(){return G(function(){a(tk(),b.M)})});this.h?c():this.F.push(c)};var jv=function(a){a.C++;return Va(function(){a.s++;a.X&&a.s>=a.C&&iv(a)})},kv=function(a){a.X=!0;a.s>=a.C&&iv(a)};var lv={},nv=function(){return z[mv()]},ov=!1;
function mv(){return z.GoogleAnalyticsObject||"ga"}
var rv=function(a){},sv=function(a,b){return function(){var c=nv(),d=c&&c.getByName&&c.getByName(a);if(d){var e=d.get("sendHitTask");d.set("sendHitTask",function(f){var g=f.get("hitPayload"),h=f.get("hitCallback"),m=0>g.indexOf("&tid="+b);m&&(f.set("hitPayload",g.replace(/&tid=UA-[0-9]+-[0-9]+/,"&tid="+b),!0),f.set("hitCallback",void 0,!0));e(f);m&&(f.set("hitPayload",
g,!0),f.set("hitCallback",h,!0),f.set("_x_19",void 0,!0),e(f))})}}};var xv={},yv={};function zv(a,b){if(Ok){var c;c=b.match(/^(gtm|gtag)\./)?encodeURIComponent(b):"*";xv[a]="&e="+c+"&eid="+a;Yk(a)}}function Av(a){var b=a.eventId,c=a.Hc;if(!xv[b])return"";var d=yv[b]?"":"&es=1";d+=xv[b];c&&(yv[b]=!0);return d};var Bv={};function Cv(a,b){Ok&&(Bv[a]=Bv[a]||{},Bv[a][b]=(Bv[a][b]||0)+1)}function Dv(a){var b=a.eventId,c=a.Hc,d=Bv[b]||{},e=[],f;for(f in d)d.hasOwnProperty(f)&&e.push(""+f+d[f]);c&&delete Bv[b];return e.length?"&md="+e.join("."):""};var Ev={},Fv={};function Gv(a,b,c){if(Ok&&b){var d=gk(b);Ev[a]=Ev[a]||[];Ev[a].push(c+d);var e=(Af(b)?"1":"2")+d;Fv[a]=Fv[a]||[];Fv[a].push(e);Yk(a)}}function Hv(a){var b=a.eventId,c=a.Hc,d="",e=Ev[b]||[];e.length&&(d+="&tr="+e.join("."));var f=Fv[b]||[];f.length&&(d+="&ti="+f.join("."));c&&(delete Ev[b],delete Fv[b]);return d};function Iv(a,b,c,d){var e=mf[a],f=Jv(a,b,c,d);if(!f)return null;var g=xf(e[Me.kj],c,[]);if(g&&g.length){var h=g[0];f=Iv(h.index,{onSuccess:f,onFailure:1===h.Aj?b.terminate:f,terminate:b.terminate},c,d)}return f}
function Jv(a,b,c,d){function e(){if(f[Me.Tk])h();else{var w=yf(f,c,[]),x=w[Me.kk];if(null!=x)for(var y=0;y<x.length;y++)if(!Uj(x[y])){h();return}var A=gv(c.Vb,String(f[Me.ka]),Number(f[Me.oe]),w[Me.Uk]),B=!1;w.vtp_gtmOnSuccess=function(){if(!B){B=!0;var D=Ta()-F;Gv(c.id,mf[a],"5");hv(c.Vb,A,"success",D);R(16)&&eu(c,f,nt.H.nj);g()}};w.vtp_gtmOnFailure=function(){if(!B){B=!0;var D=Ta()-F;Gv(c.id,mf[a],"6");hv(c.Vb,A,"failure",D);R(16)&&eu(c,f,nt.H.mj);h()}};w.vtp_gtmTagId=f.tag_id;w.vtp_gtmEventId=
c.id;c.priorityId&&(w.vtp_gtmPriorityId=c.priorityId);Gv(c.id,f,"1");var E=function(){bj(3);var D=Ta()-F;Gv(c.id,f,"7");hv(c.Vb,A,"exception",D);R(16)&&eu(c,f,nt.H.lj);B||(B=!0,h())};R(16)&&du(c,f);var F=Ta();try{wf(w,{event:c,index:a,type:1})}catch(D){E(D)}R(16)&&eu(c,f,nt.H.oj)}}var f=mf[a],g=b.onSuccess,h=b.onFailure,m=b.terminate;if(c.isBlocked(f))return null;var n=xf(f[Me.pj],c,[]);if(n&&n.length){var p=n[0],q=Iv(p.index,{onSuccess:g,onFailure:h,terminate:m},c,d);if(!q)return null;g=q;h=2===
p.Aj?m:q}if(f[Me.ej]||f[Me.Wk]){var r=f[Me.ej]?nf:c.jn,t=g,u=h;if(!r[a]){e=Va(e);var v=Kv(a,r,e);g=v.onSuccess;h=v.onFailure}return function(){r[a](t,u)}}return e}function Kv(a,b,c){var d=[],e=[];b[a]=Lv(d,e,c);return{onSuccess:function(){b[a]=Mv;for(var f=0;f<d.length;f++)d[f]()},onFailure:function(){b[a]=Nv;for(var f=0;f<e.length;f++)e[f]()}}}function Lv(a,b,c){return function(d,e){a.push(d);b.push(e);c()}}function Mv(a){a()}function Nv(a,b){b()};var Pv=function(a,b){return 1===arguments.length?Ov("set",a):Ov("set",a,b)},Qv=function(a,b){return 1===arguments.length?Ov("config",a):Ov("config",a,b)},Rv=function(a,b,c){c=c||{};c[N.g.Ob]=a;return Ov("event",b,c)};function Ov(a){return arguments}var Sv=function(){this.h=[];this.s=[]};Sv.prototype.enqueue=function(a,b,c){var d=this.h.length+1;a["gtm.uniqueEventId"]=b;a["gtm.priorityId"]=d;c.eventId=b;c.fromContainerExecution=!0;c.priorityId=d;var e={message:a,notBeforeEventId:b,priorityId:d,messageContext:c};this.h.push(e);for(var f=0;f<this.s.length;f++)try{this.s[f](e)}catch(g){}};Sv.prototype.listen=function(a){this.s.push(a)};
Sv.prototype.get=function(){for(var a={},b=0;b<this.h.length;b++){var c=this.h[b],d=a[c.notBeforeEventId];d||(d=[],a[c.notBeforeEventId]=d);d.push(c)}return a};Sv.prototype.prune=function(a){for(var b=[],c=[],d=0;d<this.h.length;d++){var e=this.h[d];e.notBeforeEventId===a?b.push(e):c.push(e)}this.h=c;return b};var Uv=function(a,b,c){c.eventMetadata=c.eventMetadata||{};c.eventMetadata.source_canonical_id=Rf.Ef;Tv().enqueue(a,b,c)},Wv=function(){var a=Vv;Tv().listen(a)};
function Tv(){var a=oi.mb;a||(a=new Sv,oi.mb=a);return a}
var Dw=function(a){var b=oi.zones;return b?b.getIsAllowedFn(pk(),a):function(){return!0}},Ew=function(a){var b=oi.zones;return b?b.isActive(pk(),a):!0},Fw=function(){R(88)?Iu(uk(),function(a){return Ew(a.originalEventData["gtm.uniqueEventId"])}):Iu(uk(),function(a,b){return Ew(b)});R(89)&&R(90)&&Gu(uk(),function(a){var b=a.entityId,c=a.securityGroups;return Dw(a.originalEventData["gtm.uniqueEventId"])(b,c)})};var Iw=function(a,b){for(var c=[],d=0;d<mf.length;d++)if(a[d]){var e=mf[d];var f=jv(b.Vb);try{var g=Iv(d,{onSuccess:f,onFailure:f,terminate:f},b,d);if(g){var h=e[Me.ka];if(!h)throw"Error: No function name given for function call.";var m=of[h];c.push({Yj:d,Oj:(m?m.priorityOverride||0:0)||Eu(e[Me.ka],1)||0,execute:g})}else Gw(d,b),f()}catch(p){f()}}c.sort(Hw);for(var n=0;n<c.length;n++)c[n].execute();return 0<c.length};
var Kw=function(a,b){if(!Jw)return!1;var c=a["gtm.triggers"]&&String(a["gtm.triggers"]),d=Jw.C(a.event,c?String(c).split(","):[]);if(!d.length)return!1;for(var e=0;e<d.length;++e){var f=jv(b);try{d[e](a,f)}catch(g){f()}}return!0};function Hw(a,b){var c,d=b.Oj,e=a.Oj;c=d>e?1:d<e?-1:0;var f;if(0!==c)f=c;else{var g=a.Yj,h=b.Yj;f=g>h?1:g<h?-1:0}return f}
function Gw(a,b){if(Ok){var c=function(d){var e=b.isBlocked(mf[d])?"3":"4",f=xf(mf[d][Me.kj],b,[]);f&&f.length&&c(f[0].index);Gv(b.id,mf[d],e);var g=xf(mf[d][Me.pj],b,[]);g&&g.length&&c(g[0].index)};c(a)}}var Lw=!1,Jw;var Mw=function(){Jw||(Jw=new cv);return Jw};
var Rw=function(a){var b=a["gtm.uniqueEventId"],c=a["gtm.priorityId"],d=a.event;if(R(16)){}if("gtm.js"===d){if(Lw)return!1;Lw=!0}var e,f=!1,g=Ju(),h;if(R(88)){var m=nb(a);h=g.every(function(w){return w({originalEventData:m})})}else h=g.every(function(w){return w(d,b)});if(h)e=Dw(b);else{if("gtm.js"!==d&&"gtm.init"!==d&&"gtm.init_consent"!==
d)return!1;f=!0;e=Dw(Number.MAX_SAFE_INTEGER)}zv(b,d);var n=a.eventCallback,p=a.eventTimeout,q=nb(a),r={id:b,priorityId:c,name:d,isBlocked:Nw(e,q),jn:[],logMacroError:function(){L(6);bj(0)},cachedModelValues:Ow(),Vb:new fv(function(){if(R(16)){}n&&
n.apply(n,[].slice.call(arguments,0))},p),originalEventData:q};R(29)&&(r.reportMacroDiscrepancy=Cv);R(16)&&$t(r.id,r.name);var t=If(r);R(16)&&au(r.id,r.name);f&&(t=Pw(t));if(R(16)){}var u=Iw(t,r),v=!1;
v=Kw(a,r.Vb);kv(r.Vb);"gtm.js"!==d&&"gtm.sync"!==d||rv(tk());return Qw(t,u)||v};function Ow(){var a={};a.event=Ti("event",1);a.ecommerce=Ti("ecommerce",1);a.gtm=Ti("gtm");a.eventModel=Ti("eventModel");return a}
function Nw(a,b){var c=Su(a);return R(89)?function(d){if(c(d))return!0;var e=d&&d[Me.ka];if(!e||"string"!=typeof e)return!0;e=e.replace(/^_*/,"");for(var f=Hu(),g=Gi[e]||[],h=fa(f),m=h.next();!m.done;m=h.next()){var n=m.value;try{if(!n({entityId:e,securityGroups:g,originalEventData:b}))return!0}catch(p){return!0}}return!1}:c}function Pw(a){for(var b=[],c=0;c<a.length;c++)if(a[c]){var d=String(mf[c][Me.ka]);if(qi[d]||void 0!==mf[c][Me.Xk]||Eu(d,2))b[c]=!0}return b}
function Qw(a,b){if(!b)return b;for(var c=0;c<a.length;c++)if(a[c]&&mf[c]&&!ri[String(mf[c][Me.ka])])return!0;return!1}var Lf;var Sw={},Tw={},Uw=function(a,b){for(var c=[],d=[],e={},f=0;f<a.length;e={Kh:void 0,qh:void 0},f++){var g=a[f];if(0<=g.indexOf("-")){if(e.Kh=dk(g,b),e.Kh){var h=rk();Ia(h,function(r){return function(t){return r.Kh.da===t}}(e))?c.push(g):d.push(g)}}else{var m=Sw[g]||[];e.qh={};m.forEach(function(r){return function(t){return r.qh[t]=!0}}(e));for(var n=pk(),p=0;p<n.length;p++)if(e.qh[n[p]]){c=c.concat(rk());break}var q=Tw[g]||[];q.length&&(c=c.concat(q))}}return{Cm:c,Fm:d}},Vw=function(a){l(Sw,function(b,
c){var d=c.indexOf(a);0<=d&&c.splice(d,1)})},Ww=function(a){l(Tw,function(b,c){var d=c.indexOf(a);0<=d&&c.splice(d,1)})};var Xw="HA GF G UA AW DC MC".split(" "),Yw=!1,Zw=!1;function $w(a,b){a.hasOwnProperty("gtm.uniqueEventId")||Object.defineProperty(a,"gtm.uniqueEventId",{value:Hi()});b.eventId=a["gtm.uniqueEventId"];b.priorityId=a["gtm.priorityId"];return{eventId:b.eventId,priorityId:b.priorityId}}var ax=void 0,bx=void 0;function cx(a,b,c){var d=nb(a);d.eventId=void 0;d.inheritParentConfig=void 0;Object.keys(b).some(function(f){return void 0!==b[f]})&&L(136);var e=nb(b);nb(c,e);Uv(Qv(pk()[0],e),a.eventId,d)}
function dx(a){for(var b=fa([N.g.Sd,N.g.Pb]),c=b.next();!c.done;c=b.next()){var d=c.value,e=a&&a[d]||Ul.C[d];if(e)return e}}
var ex={config:function(a,b){var c=R(30),d=$w(a,b);if(!(2>a.length)&&k(a[1])){var e={};if(2<a.length){if(void 0!=a[2]&&!lb(a[2])||3<a.length)return;e=a[2]}var f=dk(a[1],b.isGtmEvent);if(f){var g,h,m;a:{if(!lk.ie){var n=vk(Ck());if(Gk(n)){var p=n.parent,q=p.isDestination;m={Lm:vk(p),Bm:q};break a}}m=void 0}var r=m;r&&(g=r.Lm,h=r.Bm);zv(d.eventId,"gtag.config");var t=f.da,u=f.id!==t;if(u?-1===rk().indexOf(t):-1===pk().indexOf(t)){if(!(c&&b.inheritParentConfig||e[N.g.yb])){var v=dx(e);if(u)Wu(t,v,{source:2,
fromContainerExecution:b.fromContainerExecution});else if(c&&void 0!==g&&-1!==g.containers.indexOf(t)){var w=e;ax?cx(b,w,ax):bx||(bx=nb(w))}else Vu(t,v,!0,{source:2,fromContainerExecution:b.fromContainerExecution})}}else{if(g&&(L(128),h&&L(130),c&&b.inheritParentConfig)){var x;var y=e;bx?(cx(b,bx,y),x=!1):(!y[N.g.Qb]&&ti&&ax||(ax=nb(y)),x=!0);x&&g.containers&&g.containers.join(",");return}if(ti&&!u&&!e[N.g.Qb]){var A=Zw;Zw=!0;if(A)return}Yw||L(43);if(!b.noTargetGroup)if(u){Ww(f.id);var B=f.id,E=e[N.g.Pd]||
"default";E=String(E).split(",");for(var F=0;F<E.length;F++){var D=Tw[E[F]]||[];Tw[E[F]]=D;0>D.indexOf(B)&&D.push(B)}}else{Vw(f.id);var M=f.id,O=e[N.g.Pd]||"default";O=O.toString().split(",");for(var P=0;P<O.length;P++){var T=Sw[O[P]]||[];Sw[O[P]]=T;0>T.indexOf(M)&&T.push(M)}}delete e[N.g.Pd];var Z=b.eventMetadata||{};Z.hasOwnProperty("is_external_event")||(Z.is_external_event=!b.fromContainerExecution);b.eventMetadata=Z;delete e[N.g.Vc];for(var W=u?[f.id]:rk(),X=0;X<W.length;X++){var la=e,ia=W[X],
ea=nb(b),Da=dk(ia,ea.isGtmEvent);Da&&Ul.push("config",[la],Da,ea)}}}}},consent:function(a,b){if(3===a.length){L(39);var c=$w(a,b),d=a[1],e=a[2];b.fromContainerExecution||(e[N.g.N]&&L(139),e[N.g.Ea]&&L(140));"default"===d?Qj(e):"update"===d?Rj(e,c):"declare"===d?b.fromContainerExecution&&Pj(e):R(62)&&"core_platform_services"===d&&Sj(e)}},event:function(a,b){var c=a[1];if(!(2>a.length)&&k(c)){var d;if(2<a.length){if(!lb(a[2])&&void 0!=a[2]||3<a.length)return;d=a[2]}var e=d,f={},g=(f.event=c,f);e&&(g.eventModel=
nb(e),e[N.g.Vc]&&(g.eventCallback=e[N.g.Vc]),e[N.g.Kd]&&(g.eventTimeout=e[N.g.Kd]));var h=$w(a,b),m=h.eventId,n=h.priorityId;g["gtm.uniqueEventId"]=m;n&&(g["gtm.priorityId"]=n);if("optimize.callback"===c)return g.eventModel=g.eventModel||{},g;var p;var q=d,r=q&&q[N.g.Ob];void 0===r&&(r=Oi(N.g.Ob,2),void 0===r&&(r="default"));if(k(r)||Ha(r)){var t;b.isGtmEvent?t=k(r)?[r]:r:t=r.toString().replace(/\s+/g,"").split(",");var u=Uw(t,b.isGtmEvent),v=u.Cm,w=u.Fm;if(w.length)for(var x=dx(q),y=0;y<w.length;y++){var A=
dk(w[y],b.isGtmEvent);A&&Wu(A.da,x,{source:3,fromContainerExecution:b.fromContainerExecution})}p=fk(v,b.isGtmEvent)}else p=void 0;var B=p;if(B){zv(m,c);for(var E=[],F=0;F<B.length;F++){var D=B[F],M=nb(b);if(-1!==Xw.indexOf(wk(D.prefix))){var O=nb(d),P=M.eventMetadata||{};P.hasOwnProperty("is_external_event")||(P.is_external_event=!M.fromContainerExecution);M.eventMetadata=P;delete O[N.g.Vc];Wl(c,O,D.id,M)}E.push(D.id)}g.eventModel=g.eventModel||{};0<B.length?g.eventModel[N.g.Ob]=E.join():delete g.eventModel[N.g.Ob];
Yw||L(43);void 0===b.noGtmEvent&&b.eventMetadata&&b.eventMetadata.syn_or_mod&&(b.noGtmEvent=!0);g.eventModel[N.g.Lb]&&(b.noGtmEvent=!0);return b.noGtmEvent?void 0:g}}},get:function(a,b){L(53);if(4===a.length&&k(a[1])&&k(a[2])&&Fa(a[3])){var c=dk(a[1],b.isGtmEvent),d=String(a[2]),e=a[3];if(c){Yw||L(43);var f=dx();if(!Ia(rk(),function(h){return c.da===h}))Wu(c.da,f,{source:4,fromContainerExecution:b.fromContainerExecution});else if(-1!==Xw.indexOf(wk(c.prefix))){$w(a,b);var g={};Mj(nb((g[N.g.lb]=d,
g[N.g.wb]=e,g)));Xl(d,function(h){G(function(){return e(h)})},c.id,b)}}}},js:function(a,b){if(2==a.length&&a[1].getTime){Yw=!0;var c=$w(a,b),d=c.eventId,e=c.priorityId,f={};return f.event="gtm.js",f["gtm.start"]=a[1].getTime(),f["gtm.uniqueEventId"]=d,f["gtm.priorityId"]=e,f}},policy:function(a){if(3===a.length&&k(a[1])&&Fa(a[2])){Mf(a[1],a[2]);if(L(74),"all"===a[1]){L(75);var b=!1;try{b=a[2](tk(),"unknown",{})}catch(c){}b||L(76)}}else{
L(73);}},set:function(a,b){var c;2==a.length&&lb(a[1])?c=nb(a[1]):3==a.length&&k(a[1])&&(c={},lb(a[2])||Ha(a[2])?c[a[1]]=nb(a[2]):c[a[1]]=a[2]);if(c){var d=$w(a,b),e=d.eventId,f=d.priorityId;nb(c);var g=nb(c);Ul.push("set",[g],void 0,b);c["gtm.uniqueEventId"]=e;f&&(c["gtm.priorityId"]=f);R(9)&&delete c.event;b.overwriteModelFields=!0;return c}}},fx={policy:!0};var gx=function(a){var b=z[ni.fa].hide;if(b&&void 0!==b[a]&&b.end){b[a]=!1;var c=!0,d;for(d in b)if(b.hasOwnProperty(d)&&!0===b[d]){c=!1;break}c&&(b.end(),b.end=null)}},hx=function(a){var b=z[ni.fa],c=b&&b.hide;c&&c.end&&(c[a]=!0)};var ix=!1,jx=[];function kx(){if(!ix){ix=!0;for(var a=0;a<jx.length;a++)G(jx[a])}}var lx=function(a){ix?G(a):jx.push(a)};var Cx=function(a){if(Bx(a))return a;this.h=a};Cx.prototype.getUntrustedMessageValue=function(){return this.h};var Bx=function(a){return!a||"object"!==jb(a)||lb(a)?!1:"getUntrustedMessageValue"in a};Cx.prototype.getUntrustedMessageValue=Cx.prototype.getUntrustedMessageValue;var Dx=0,Ex={},Fx=[],Gx=[],Hx=!1,Ix=!1;function Jx(a,b){return a.messageContext.eventId-b.messageContext.eventId||a.messageContext.priorityId-b.messageContext.priorityId}
var Kx=function(a){return z[ni.fa].push(a)},Lx=function(a,b,c){a.eventCallback=b;c&&(a.eventTimeout=c);return Kx(a)},Mx=function(a,b){if(!Ga(b)||0>b)b=0;var c=oi[ni.fa],d=0,e=!1,f=void 0;f=z.setTimeout(function(){e||(e=!0,a());f=void 0},b);return function(){var g=c?c.subscribers:1;++d===g&&(f&&(z.clearTimeout(f),f=void 0),e||(a(),e=!0))}};
function Nx(a,b){var c=a._clear||b.overwriteModelFields;l(a,function(e,f){"_clear"!==e&&(c&&Ri(e),Ri(e,f))});Di||(Di=a["gtm.start"]);var d=a["gtm.uniqueEventId"];if(!a.event)return!1;"number"!==typeof d&&(d=Hi(),a["gtm.uniqueEventId"]=d,Ri("gtm.uniqueEventId",d));return Rw(a)}
function Ox(a){if(null==a||"object"!==typeof a)return!1;if(a.event)return!0;if(Ma(a)){var b=a[0];if("config"===b||"event"===b||"js"===b||"get"===b)return!0}return!1}
function Px(){var a;if(Gx.length)a=Gx.shift();else if(Fx.length)a=Fx.shift();else return;var b;var c=a;if(Hx||!Ox(c.message))b=c;else{Hx=!0;var d=c.message["gtm.uniqueEventId"];"number"!==typeof d&&(d=c.message["gtm.uniqueEventId"]=Hi());var e={},f={message:(e.event="gtm.init_consent",e["gtm.uniqueEventId"]=d-2,e),messageContext:{eventId:d-2}},g={},h={message:(g.event="gtm.init",g["gtm.uniqueEventId"]=d-1,g),messageContext:{eventId:d-1}};Fx.unshift(h,c);if(Ok){var m=Rf.ctid;if(m){var n,p=vk(Ck());
n=p&&p.context;var q,r=ql(z.location.href);q=r.hostname+r.pathname;var t=n&&n.fromContainerExecution,u=n&&n.source,v=Rf.Ef,w=lk.ie;Ok&&(bl||(bl=q),cl.push(m+";"+v+";"+(t?1:0)+";"+(u||0)+";"+(w?1:0)))}}b=f}return b}
function Qx(){for(var a=!1,b;!Ix&&(b=Px());){Ix=!0;delete Li.eventModel;Ni();var c=b,d=c.message,e=c.messageContext;if(null==d)Ix=!1;else{e.fromContainerExecution&&Si();try{if(Fa(d))try{d.call(Pi)}catch(x){}else if(Ha(d)){var f=d;if(k(f[0])){var g=f[0].split("."),h=g.pop(),m=f.slice(1),n=Oi(g.join("."),2);if(null!=n)try{n[h].apply(n,m)}catch(x){}}}else{var p=void 0,q=!1;if(Ma(d)){a:{if(d.length&&k(d[0])){var r=ex[d[0]];if(r&&(!e.fromContainerExecution||!fx[d[0]])){p=r(d,e);break a}}p=void 0}(q=p&&
"set"===d[0]&&!!p.event)&&L(101)}else p=d;if(p){var t=Nx(p,e);a=t||a;q&&t&&L(113)}}}finally{e.fromContainerExecution&&Ni(!0);var u=d["gtm.uniqueEventId"];if("number"===typeof u){for(var v=Ex[String(u)]||[],w=0;w<v.length;w++)Gx.push(Rx(v[w]));v.length&&Gx.sort(Jx);delete Ex[String(u)];u>Dx&&(Dx=u)}Ix=!1}}}return!a}
function Sx(){if(R(16)){var a=Tx();}var b=Qx();if(R(16)){}try{gx(tk())}catch(c){}return b}
function Vv(a){if(Dx<a.notBeforeEventId){var b=String(a.notBeforeEventId);Ex[b]=Ex[b]||[];Ex[b].push(a)}else Gx.push(Rx(a)),Gx.sort(Jx),G(function(){Ix||Qx()})}function Rx(a){return{message:a.message,messageContext:a.messageContext}}
var Ux=function(){function a(f){var g={};if(Bx(f)){var h=f;f=Bx(h)?h.getUntrustedMessageValue():void 0;g.fromContainerExecution=!0}return{message:f,messageContext:g}}var b=Fc(ni.fa,[]),c=oi[ni.fa]=oi[ni.fa]||{};!0===c.pruned&&L(83);Ex=Tv().get();Wv();bv(function(){if(!c.gtmDom){c.gtmDom=!0;var f={};b.push((f.event="gtm.dom",f))}});lx(function(){if(!c.gtmLoad){c.gtmLoad=!0;var f={};b.push((f.event="gtm.load",f))}});c.subscribers=(c.subscribers||0)+1;var d=b.push;b.push=function(){var f;if(0<oi.SANDBOXED_JS_SEMAPHORE){f=
[];for(var g=0;g<arguments.length;g++)f[g]=new Cx(arguments[g])}else f=[].slice.call(arguments,0);var h=f.map(function(q){return a(q)});Fx.push.apply(Fx,h);var m=d.apply(b,f),n=Math.max(100,Number("1000")||300);if(this.length>n)for(L(4),c.pruned=!0;this.length>n;)this.shift();var p="boolean"!==typeof m||m;return Qx()&&p};var e=b.slice(0).map(function(f){return a(f)});Fx.push.apply(Fx,e);if(Tx()){if(R(16)){}G(Sx)}},Tx=function(){var a=!0;return a};function Vx(a){if(null==a||0===a.length)return!1;var b=Number(a),c=Ta();return b<c+3E5&&b>c-9E5}function Wx(a){return a&&0===a.indexOf("pending:")?Vx(a.substr(8)):!1};

var qy=function(){};var ry=function(){};ry.prototype.toString=function(){return"undefined"};var sy=new ry;
var zy=function(a,b,c){var d={event:b,"gtm.element":a,"gtm.elementClasses":Vc(a,"className"),"gtm.elementId":a["for"]||Qc(a,"id")||"","gtm.elementTarget":a.formTarget||Vc(a,"target")||""};c&&(d["gtm.triggers"]=c.join(","));d["gtm.elementUrl"]=(a.attributes&&a.attributes.formaction?a.formAction:"")||a.action||Vc(a,"href")||a.src||a.code||a.codebase||"";return d},Ay=function(a){oi.hasOwnProperty("autoEventsSettings")||(oi.autoEventsSettings={});var b=oi.autoEventsSettings;b.hasOwnProperty(a)||(b[a]=
{});return b[a]},By=function(a,b,c){Ay(a)[b]=c},Cy=function(a,b,c,d){var e=Ay(a),f=Ua(e,b,d);e[b]=c(f)},Dy=function(a,b,c){var d=Ay(a);return Ua(d,b,c)},Ey=function(a,b){Dy(a,"init",!1)||(By(a,"init",!0),b())},Fy=function(a){return"string"===typeof a?a:String(Hi())};var $y=z.clearTimeout,az=z.setTimeout,bz=function(a,b,c,d){if(sn()){b&&G(b)}else return Kc(a,b,c,d)},cz=function(){return new Date},dz=function(){return z.location.href},ez=function(a){return ll(ql(a),"fragment")},fz=function(a){return ml(ql(a))},gz=function(a,b){return Oi(a,b||2)},hz=function(a,b,c){return b?Lx(a,b,c):Kx(a)},iz=function(a,b){z[a]=b},U=function(a,b,c){b&&(void 0===z[a]||c&&!z[a])&&(z[a]=b);return z[a]},
jz=function(a,b,c){return zn(a,b,void 0===c?!0:!!c)},kz=function(a,b,c){return 0===In(a,b,c)},lz=function(a,b){if(sn()){b&&G(b)}else Mc(a,b)},mz=function(a){return!!Dy(a,"init",!1)},nz=function(a){By(a,"init",!0)};

function Kz(a,b){function c(g){var h=ql(g),m=ll(h,"protocol"),n=ll(h,"host",!0),p=ll(h,"port"),q=ll(h,"path").toLowerCase().replace(/\/$/,"");if(void 0===m||"http"===m&&"80"===p||"https"===m&&"443"===p)m="web",p="default";return[m,n,p,q]}for(var d=c(String(a)),e=c(String(b)),f=0;f<d.length;f++)if(d[f]!==e[f])return!1;return!0}
function Lz(a){return Mz(a)?1:0}
function Mz(a){var b=a.arg0,c=a.arg1;if(a.any_of&&Array.isArray(c)){for(var d=0;d<c.length;d++){var e=nb(a,{});nb({arg1:c[d],any_of:void 0},e);if(Lz(e))return!0}return!1}switch(a["function"]){case "_cn":return rg(b,c);case "_css":var f;a:{if(b)try{for(var g=0;g<ng.length;g++){var h=ng[g];if(b[h]){f=b[h](c);break a}}}catch(m){}f=!1}return f;case "_ew":return og(b,c);case "_eq":return sg(b,c);case "_ge":return tg(b,c);case "_gt":return vg(b,c);case "_lc":return 0<=String(b).split(",").indexOf(String(c));
case "_le":return ug(b,c);case "_lt":return wg(b,c);case "_re":return qg(b,c,a.ignore_case);case "_sw":return xg(b,c);case "_um":return Kz(b,c)}return!1};function Nz(){var a=["&cv=1","&rv="+ni.Ug,"&tc="+mf.filter(function(b){return b}).length];ni.me&&a.push("&x="+ni.me);Ji.h&&a.push("&tag_exp="+Ji.h);return a.join("")};function Oz(){var a=dj();return a.length?"&exp_geo="+a:""}var Pz;function Qz(){try{null!=Pz||(Pz=(new Intl.DateTimeFormat).resolvedOptions().timeZone)}catch(b){}var a;return(null==(a=Pz)?0:a.length)?"&exp_tz="+Pz:""};var Rz=function(){return!1},Sz=function(){var a={};return function(b,c,d){}};function Tz(){var a=Uz;return function(b,c,d){var e=d&&d.event;Vz(c);var f=0===b.indexOf("__cvt_")?void 0:1,g=new sb;l(c,function(r,t){var u=md(t,void 0,f);void 0===u&&void 0!==t&&L(44);g.set(r,u)});a.h.h.F=Ff();var h={uj:Vf(b),eventId:void 0!==e?e.id:void 0,priorityId:void 0!==e?e.priorityId:void 0,Bf:void 0!==e?function(r){return e.Vb.Bf(r)}:void 0,Wb:function(){return b},log:function(){},Fl:{index:d&&d.index,type:d&&d.type,name:d&&d.name},Wm:!!Eu(b,3),originalEventData:null==e?void 0:e.originalEventData};
e&&e.cachedModelValues&&(h.cachedModelValues={gtm:e.cachedModelValues.gtm,ecommerce:e.cachedModelValues.ecommerce});if(Rz()){var m=Sz(),n=void 0,p=void 0;h.eb={Vh:[],pe:{},pb:function(r,t,u){1===t&&(n=r);7===t&&(p=u);m(r,t,u)},Dh:mh()};h.log=function(r,t){if(n){var u=Array.prototype.slice.call(arguments,1);m(n,4,{level:r,source:p,message:u})}}}var q=Ke(a,h,[b,g]);a.h.h.F=void 0;q instanceof wa&&"return"===q.h&&(q=q.s);return nd(q,void 0,f)}}
function Vz(a){var b=a.gtmOnSuccess,c=a.gtmOnFailure;Fa(b)&&(a.gtmOnSuccess=function(){G(b)});Fa(c)&&(a.gtmOnFailure=function(){G(c)})};function Wz(a,b){var c=this;}Wz.O="addConsentListener";var Xz;var Yz=function(a){for(var b=0;b<a.length;++b)if(Xz)try{a[b]()}catch(c){L(77)}else a[b]()};function Zz(a,b,c){var d=this,e;J(I(this),["eventName:!string","callback:!Fn","triggerId:?string"],arguments),Yz([function(){return K(d,"listen_data_layer",a)}]),e=Mw().addListener(a,nd(b),c);return e}Zz.D="internal.addDataLayerEventListener";function $z(a,b,c){}$z.O="addDocumentEventListener";function aA(a,b,c,d){}aA.O="addElementEventListener";function bA(a){}bA.O="addEventCallback";
function fA(a){}fA.D="internal.addFormAbandonmentListener";function gA(a,b,c,d){}gA.D="internal.addFormData";var hA={},iA=[],jA={},kA=0,lA=0;
function sA(a,b){}sA.D="internal.addFormInteractionListener";
function zA(a,b){}zA.D="internal.addFormSubmitListener";
function EA(a){}EA.D="internal.addGaSendListener";function FA(a){if(!a)return{};var b=a.Fl;return dv(b.type,b.index,b.name)}function GA(a){return a?{originatingEntity:FA(a)}:{}};var HA=function(a,b){this.tagId=a;this.uc=b};
function IA(a,b,c){var d=this;}IA.D="internal.loadGoogleTag";function JA(a){return new ed("",function(b){b=H(this,b);if(b instanceof ed)return new ed("",function(){var c=ta.apply(0,arguments),d=this,e=nb(this.h.h);e.eventId=a.eventId;e.priorityId=a.priorityId;e.originalEventData=a.originalEventData;var f=c.map(function(h){return H(d,h)}),g=Ba(this.h);g.h=e;return b.ab.apply(b,[g].concat(ja(f)))})})};function KA(a,b,c){var d=this;}
KA.D="internal.addGoogleTagRestriction";var LA={},MA=[];
var TA=function(a,b){};
TA.D="internal.addHistoryChangeListener";function UA(a,b,c){}UA.O="addWindowEventListener";function VA(a,b){return!0}VA.O="aliasInWindow";function WA(a,b,c){}WA.D="internal.appendRemoteConfigParameter";function XA(){var a=2;return a};function YA(a,b){var c;return c}YA.O="callInWindow";function ZA(a){}ZA.O="callLater";function $A(a){}$A.D="callOnDomReady";function aB(a){}aB.D="callOnWindowLoad";function bB(a,b){var c;return c}bB.D="internal.computeGtmParameter";function cB(a,b){var c;var d=md(c,this.h,XA());void 0===d&&void 0!==c&&L(45);return d}cB.O="copyFromDataLayer";
function dB(a){var b=void 0;return b}dB.D="internal.copyFromDataLayerCache";function eB(a){var b;return b}eB.O="copyFromWindow";function fB(a){var b=void 0;return md(b,this.h,XA())}fB.D="internal.copyKeyFromWindow";function gB(a,b){var c;J(I(this),["preHit:!PixieMap","dustOptions:?PixieMap"],arguments);var d=nd(b)||{},e=nd(a,this.h,1).Dj(),f=e.o;d.omitEventContext&&(f=Ql(new Fl(e.o.eventId,e.o.priorityId)));var g=new Dp(e.target,e.eventName,f);d.omitHitData||nb(e.h,g.h);d.omitMetadata?g.metadata={}:nb(e.metadata,g.metadata);g.isAborted=e.isAborted;c=md(fq(g),this.h,1);return c}gB.D="internal.copyPreHit";function hB(a,b){var c=null,d=XA();return md(c,this.h,d)}hB.O="createArgumentsQueue";function iB(a){var b;return md(b,this.h,1)}iB.D="internal.createGaCommandQueue";function jB(a){var b;return md(b,this.h,
XA())}jB.O="createQueue";function kB(a,b){var c=null;J(I(this),["pattern:!string","flags:?string"],arguments);try{var d=(b||"").split("").filter(function(e){return 0<="ig".indexOf(e)}).join("");c=new jd(new RegExp(a,d))}catch(e){}return c}kB.D="internal.createRegex";function lB(a){}lB.D="internal.declareConsentState";function mB(a){var b="";return b}mB.D="internal.decodeUrlHtmlEntities";function nB(a,b,c){var d;return d}nB.D="internal.decorateUrlWithGaCookies";function oB(a){var b;K(this,"detect_user_provided_data","auto");var c=nd(a)||{},d=nr({md:!!c.includeSelector,nd:!!c.includeVisibility,ue:c.excludeElementSelectors,ob:c.fieldFilters,Th:!!c.selectMultipleElements});b=new sb;var e=new rb;b.set("elements",e);for(var f=d.elements,g=0;g<f.length;g++)e.push(pB(f[g]));void 0!==d.Mh&&b.set("preferredEmailElement",pB(d.Mh));b.set("status",d.status);
return b}
var pB=function(a){var b=new sb;b.set("userData",a.U);b.set("tagName",a.tagName);void 0!==a.querySelector&&b.set("querySelector",a.querySelector);void 0!==a.isVisible&&b.set("isVisible",a.isVisible);if(R(27)){}else switch(a.type){case "1":b.set("type","email")}return b};oB.D="internal.detectUserProvidedData";
function sB(a,b){return b}sB.D="internal.enableAutoEventOnClick";
function xB(a,b){return b}xB.D="internal.enableAutoEventOnElementVisibility";function yB(){}yB.D="internal.enableAutoEventOnError";var zB={},AB=[],BB={},CB=0,DB=0;
function JB(a,b){var c=this;return b}JB.D="internal.enableAutoEventOnFormInteraction";
function OB(a,b){var c=this;return b}OB.D="internal.enableAutoEventOnFormSubmit";
function TB(){var a=this;}TB.D="internal.enableAutoEventOnGaSend";var UB={},VB=[];
var XB=function(a,b){var c=""+b;if(UB[c])UB[c].push(a);else{var d=[a];UB[c]=d;var e=WB("gtm.historyChange-v2"),f=-1;VB.push(function(g){0<=f&&z.clearTimeout(f);b?f=z.setTimeout(function(){e(g,d);f=-1},b):e(g,d)})}},WB=function(a){var b=z.location.href,c={source:null,state:z.history.state||null,url:ml(ql(b)),T:ll(ql(b),"fragment")};return function(d,e){var f=c,g={};g[f.source]=!0;g[d.source]=!0;if(!g.popstate||!g.hashchange||f.T!=d.T){var h={event:a,"gtm.historyChangeSource":d.source,"gtm.oldUrlFragment":c.T,
"gtm.newUrlFragment":d.T,"gtm.oldHistoryState":c.state,"gtm.newHistoryState":d.state,"gtm.oldUrl":c.url,"gtm.newUrl":d.url};e&&(h["gtm.triggers"]=e.join(","));c=d;Kx(h)}}},YB=function(a,b){var c=z.history,d=c[a];if(Fa(d))try{c[a]=function(e,f,g){d.apply(c,[].slice.call(arguments,0));var h=z.location.href;b({source:a,state:e,url:ml(ql(h)),T:ll(ql(h),"fragment")})}}catch(e){}},$B=function(a){z.addEventListener("popstate",function(b){var c=ZB(b);a({source:"popstate",state:b.state,url:ml(ql(c)),T:ll(ql(c),
"fragment")})})},aC=function(a){z.addEventListener("hashchange",function(b){var c=ZB(b);a({source:"hashchange",state:null,url:ml(ql(c)),T:ll(ql(c),"fragment")})})},ZB=function(a){return a.target&&a.target.location&&a.target.location.href?a.target.location.href:z.location.href};
function bC(a,b){var c=this;J(I(this),["options:?PixieMap","triggerId:?*"],arguments);R(76)?Yz([function(){return K(c,"detect_history_change_events")}]):Yz([function(){return K(c,"process_dom_events","window","popstate")},function(){return K(c,"process_dom_events","window","pushstate")}]);var d=!R(74)||a&&a.get("useV2EventName")?"ehl":"hl",e=Number(a&&a.get("interval"));0<e&&isFinite(e)||(e=0);if(!Dy(d,"init",!1)){var f;
"ehl"===d?(f=function(h){for(var m=0;m<VB.length;m++)VB[m](h)},b=Fy(b),XB(b,e),By(d,"reg",XB)):f=WB("gtm.historyChange");aC(f);$B(f);YB("pushState",f);YB("replaceState",f);By(d,"init",!0)}else if("ehl"===d){var g=Dy(d,"reg");g&&(b=Fy(b),g(b,e))}"hl"===d&&(b=void 0);return b}bC.D="internal.enableAutoEventOnHistoryChange";var cC=["http://","https://","javascript:","file://"];
var dC=function(a,b){if(2===a.which||a.ctrlKey||a.shiftKey||a.altKey||a.metaKey)return!1;var c=Vc(b,"href");if(-1!==c.indexOf(":")&&!cC.some(function(h){return 0===c.indexOf(h)}))return!1;var d=c.indexOf("#"),e=Vc(b,"target");if(e&&"_self"!==e&&"_parent"!==e&&"_top"!==e||0===d)return!1;if(0<d){var f=ml(ql(c)),g=ml(ql(z.location.href));return f!==g}return!0},eC=function(a,b){for(var c=ll(ql((b.attributes&&b.attributes.formaction?b.formAction:"")||b.action||Vc(b,"href")||b.src||b.code||b.codebase||
""),"host"),d=0;d<a.length;d++)try{if((new RegExp(a[d])).test(c))return!1}catch(e){}return!0},fC=function(){var a=R(65)?"lcl":"aelc",b=0,c=function(d){var e=d.target;if(e&&3!==d.which&&!(d.uh||d.timeStamp&&d.timeStamp===b)){b=d.timeStamp;e=Tc(e,["a","area"],100);if(!e)return d.returnValue;var f=d.defaultPrevented||!1===d.returnValue,g=Dy(a,f?"nv.mwt":"mwt",0),h;h=f?Dy(a,"nv.ids",[]):Dy(a,"ids",[]);for(var m=[],n=0;n<h.length;n++){var p=h[n],q=Dy(a,"aff.map",{})[p];q&&!eC(q,e)||m.push(p)}if(m.length){var r=
dC(d,e),t=zy(e,"gtm.linkClick",m);t["gtm.elementText"]=Rc(e);t["gtm.willOpenInNewWindow"]=!r;if(r&&!f&&g&&e.href){var u=!!Ia(String(Vc(e,"rel")||"").split(" "),function(y){return"noreferrer"===y.toLowerCase()}),v=z[(Vc(e,"target")||"_self").substring(1)],w=!0,x=Mx(function(){var y;if(y=w&&v){var A;a:if(u){var B;try{B=new MouseEvent(d.type,{bubbles:!0})}catch(E){if(!C.createEvent){A=!1;break a}B=C.createEvent("MouseEvents");B.initEvent(d.type,!0,!0)}B.uh=!0;d.target.dispatchEvent(B);A=!0}else A=!1;
y=!A}y&&(v.location.href=Vc(e,"href"))},g);if(Lx(t,x,g))w=!1;else return d.preventDefault&&d.preventDefault(),d.returnValue=!1}else Lx(t,function(){},g||2E3);return!0}}};Oc(C,"click",c,!1);Oc(C,"auxclick",c,!1)};
function gC(a,b){var c=this;var d=R(65)?"lcl":"aelc";J(I(this),["dustOptions:?PixieMap","triggerId:?*"],arguments);var e=nd(a);Yz([function(){return K(c,"detect_link_click_events",e)}]);var f=e&&!!e.waitForTags,g=e&&!!e.checkValidation,h=e?e.affiliateDomains:void 0;b=Fy(b);if(f){var m=Number(e.waitForTagsTimeout);0<m&&isFinite(m)||(m=2E3);var n=function(q){return Math.max(m,q)};Cy(d,"mwt",n,0);g||Cy(d,"nv.mwt",n,0)}var p=function(q){q.push(b);
return q};Cy(d,"ids",p,[]);g||Cy(d,"nv.ids",p,[]);h&&Cy(d,"aff.map",function(q){q[b]=h;return q},{});Dy(d,"init",!1)||(fC(),By(d,"init",!0));return b}gC.D="internal.enableAutoEventOnLinkClick";var hC,iC;
var jC=function(a){return Dy("sdl",a,{})},kC=function(a,b,c){b&&(Array.isArray(a)||(a=[a]),Cy("sdl",c,function(d){for(var e=0;e<a.length;e++){var f=String(a[e]);d.hasOwnProperty(f)||(d[f]=[]);d[f].push(b)}return d},{}))},nC=function(){var a=function(){lC();mC(a);By("sdl","pending",!0)};return a},oC=function(){var a=250,b=!1;C.scrollingElement&&C.documentElement&&z.addEventListener&&(a=50,b=!0);var c=0,d=!1,e=function(){d?c=z.setTimeout(e,a):(c=0,lC(),mC(f));d=!1},f=function(){b&&hC();c?d=!0:(c=z.setTimeout(e,
a),By("sdl","pending",!0))};return f},mC=function(a){Dy("sdl","init",!1)&&!pC()&&(Pc(z,"scroll",a),Pc(z,"resize",a),By("sdl","init",!1))},lC=function(){var a=hC(),b=a.gh,c=a.hh,d=b/iC.scrollWidth*100,e=c/iC.scrollHeight*100;qC(b,"horiz.pix","PIXELS","horizontal");qC(d,"horiz.pct","PERCENT","horizontal");qC(c,"vert.pix","PIXELS","vertical");qC(e,"vert.pct","PERCENT","vertical");By("sdl","pending",!1)},qC=function(a,b,c,d){var e=jC(b),f={},g;for(g in e)if(f={rd:f.rd},f.rd=g,e.hasOwnProperty(f.rd)){var h=
Number(f.rd);if(!(a<h)){var m={};Kx((m.event="gtm.scrollDepth",m["gtm.scrollThreshold"]=h,m["gtm.scrollUnits"]=c.toLowerCase(),m["gtm.scrollDirection"]=d,m["gtm.triggers"]=e[f.rd].join(","),m));Cy("sdl",b,function(n){return function(p){delete p[n.rd];return p}}(f),{})}}},sC=function(){Cy("sdl","scr",function(a){a||(a=C.scrollingElement||C.body&&C.body.parentNode);return iC=a},!1);Cy("sdl","depth",function(a){a||(a=rC());return hC=a},!1)},rC=function(){var a=0,b=0;return function(){var c=wq(),d=c.height;
a=Math.max(iC.scrollLeft+c.width,a);b=Math.max(iC.scrollTop+d,b);return{gh:a,hh:b}}},pC=function(){return!!(Object.keys(jC("horiz.pix")).length||Object.keys(jC("horiz.pct")).length||Object.keys(jC("vert.pix")).length||Object.keys(jC("vert.pct")).length)};
function tC(a,b){var c=this;J(I(this),["options:!PixieMap","triggerId:?*"],arguments);Yz([function(){return K(c,"detect_scroll_events")}]);sC();if(!iC)return;b=Fy(b);var d=nd(a);switch(d.horizontalThresholdUnits){case "PIXELS":kC(d.horizontalThresholds,b,"horiz.pix");break;case "PERCENT":kC(d.horizontalThresholds,b,"horiz.pct")}switch(d.verticalThresholdUnits){case "PIXELS":kC(d.verticalThresholds,b,"vert.pix");break;case "PERCENT":kC(d.verticalThresholds,
b,"vert.pct")}Dy("sdl","init",!1)?Dy("sdl","pending",!1)||G(function(){return lC()}):(By("sdl","init",!0),By("sdl","pending",!0),G(function(){lC();if(pC()){var e=oC();R(98)&&"onscrollend"in z?Oc(z,"scrollend",nC()):Oc(z,"scroll",e);Oc(z,"resize",e)}else By("sdl","init",!1)}));return b}tC.D="internal.enableAutoEventOnScroll";function uC(a){return function(){if(a.zc&&a.Bc>=a.zc)a.xc&&z.clearInterval(a.xc);else{a.Bc++;var b=Ta();Kx({event:a.eventName,"gtm.timerId":a.xc,"gtm.timerEventNumber":a.Bc,"gtm.timerInterval":a.interval,"gtm.timerLimit":a.zc,"gtm.timerStartTime":a.Se,"gtm.timerCurrentTime":b,"gtm.timerElapsedTime":b-a.Se,"gtm.triggers":a.Xh})}}}
function vC(a,b){
return b}vC.D="internal.enableAutoEventOnTimer";var yc=ca(["data-gtm-yt-inspected-"]),wC=["www.youtube.com","www.youtube-nocookie.com"],xC,yC=!1;
function IC(a,b){var c=this;return b}IC.D="internal.enableAutoEventOnYouTubeActivity";var JC;function KC(a){var b=!1;return b}KC.D="internal.evaluateMatchingRules";var oD=function(){var a=!0;Tm(7)&&Tm(9)&&Tm(10)||(a=!1);return a};function jE(a,b,c,d){}jE.D="internal.executeEventProcessor";function kE(a){var b=void 0;return md(b,this.h,1)}kE.D="internal.executeJavascriptString";var lE=function(a){var b;return b};function mE(){var a=new sb;K(this,"read_container_data"),a.set("containerId",'G-FTD94KXZMD'),a.set("version",'1'),a.set("environmentName",''),a.set("debugMode",Yf),a.set("previewMode",$f),a.set("environmentMode",Zf),a.set("firstPartyServing",wi||yi),a.set("containerUrl",Ec),a.Eb();return a}mE.O="getContainerVersion";function nE(a,b){b=void 0===b?!0:b;var c;return c}nE.O="getCookieValues";function oE(){return dj()}oE.D="internal.getCountryCode";function pE(){var a=[];a=rk();return md(a)}pE.D="internal.getDestinationIds";function qE(a,b){var c="";return c}qE.D="internal.getElementAttribute";function rE(a){var b=null;return b}rE.D="internal.getElementById";function sE(a){var b="";return b}sE.D="internal.getElementInnerText";function tE(a,b){var c=null;return c}tE.D="internal.getElementProperty";function uE(a){var b;return b}uE.D="internal.getElementValue";function vE(a){var b=0;return b}vE.D="internal.getElementVisibilityRatio";function wE(a){var b=null;return b}wE.D="internal.getElementsByCssSelector";
function xE(a){var b=void 0;return b}xE.D="internal.getEventData";var yE={};yE.enableAWFledge=R(6);yE.enableAdsConversionValidation=R(20);yE.enableAutoPiiOnPhoneAndAddress=R(27);yE.enableCachedEcommerceData=R(84);yE.enableCcdPreAutoPiiDetection=R(11);yE.enableCloudRecommentationsErrorLogging=R(69);yE.enableCloudRecommentationsSchemaIngestion=R(68);yE.enableCloudRetailInjectPurchaseMetadata=R(67);yE.enableCloudRetailLogging=R(66);yE.enableCloudRetailPageCategories=R(17);yE.enableConsentDisclosureActivity=R(32);yE.enableDCFledge=R(7);yE.enableDecodeUri=R(50);
yE.enableDeferAllEnhancedMeasurement=R(34);yE.enableDirectTagLoadingInGoogleTag=R(60);yE.enableEuidAutoMode=R(10);yE.enableFormSkipValidation=R(28);yE.enableLoadGoogleTagOptionsObject=R(64);yE.enableUrlDecodeEventUsage=R(44);yE.enableV1HistoryEventInApi=R(74);yE.loadContainerForGtmEventTags=R(31);yE.useEnableAutoEventOnFormApis=R(21);yE.autoPiiEligible=hj();function zE(){return md(yE)}zE.D="internal.getFlags";function AE(){return new jd(sy)}AE.D="internal.getHtmlId";function BE(a,b){var c;J(I(this),["targetId:!string","name:!string"],arguments);var d=Cp(a)||{};c=md(d[b],this.h);return c}BE.D="internal.getProductSettingsParameter";function CE(a,b){var c;J(I(this),["queryKey:!string","retrieveAll:?boolean"],arguments);K(this,"get_url","query",a);var d=ll(ql(z.location.href),"query"),e=il(d,a,b);c=md(e,this.h);return c}CE.O="getQueryParameters";function DE(a,b){var c;return c}DE.O="getReferrerQueryParameters";function EE(a){var b="";return b}EE.O="getReferrerUrl";function FE(){return ej()}FE.D="internal.getRegionCode";function GE(a,b){var c;J(I(this),["targetId:!string","name:!string"],arguments);var d=Zl(a);c=md(d[b],this.h);return c}GE.D="internal.getRemoteConfigParameter";function HE(a){var b="";J(I(this),["component:?string"],arguments),K(this,"get_url",a),b=ll(ql(z.location.href),a);return b}HE.O="getUrl";function IE(){K(this,"get_user_agent");return Dc.userAgent}IE.O="getUserAgent";var JE=function(a){return Fp(a,N.g.Kb,S(a.o,N.g.Kb))||Fp(a,"google_ono",!1)},KE=function(a){if(a.metadata.is_merchant_center||!oq(a.o))return!1;if(!S(a.o,N.g.Sd)){var b=S(a.o,N.g.Ld);return!0===b||"true"===b}return!0},LE=function(a){var b=a.metadata.user_data;if(lb(b))return b},ME=function(a,b){var c=Fp(a,N.g.Jd,a.o.s[N.g.Jd]);if(c&&void 0!==c[b||a.eventName])return c[b||a.eventName]},NE=function(a,b,c){a.h[N.g.ne]||(a.h[N.g.ne]={});a.h[N.g.ne][b]=c};var OE=!1,PE=function(a){var b=a.eventName===N.g.ic&&Hj()&&KE(a),c=a.metadata.is_sgtm_service_worker,d=a.metadata.batch_on_navigation,e=a.metadata.is_conversion,f=a.metadata.is_session_start,g=a.metadata.create_dc_join,h=a.metadata.create_google_join,m=a.metadata.euid_mode_enabled&&!!LE(a);return!(!Dc.sendBeacon||e||m||f||g||h||b||c||!d&&OE)};
var QE=function(a){var b=0,c=0;return{start:function(){b=Ta()},stop:function(){c=this.get()},get:function(){var d=0;a.wh()&&(d=Ta()-b);return d+c}}},RE=function(){this.h=void 0;this.s=0;this.isActive=this.isVisible=this.C=!1;this.M=this.F=void 0};aa=RE.prototype;aa.Pk=function(a){var b=this;if(!this.h){this.C=C.hasFocus();this.isVisible=!C.hidden;this.isActive=!0;var c=function(d,e,f){Oc(d,e,function(g){b.h.stop();f(g);b.wh()&&b.h.start()})};c(z,"focus",function(){b.C=!0});c(z,"blur",function(){b.C=
!1});c(z,"pageshow",function(d){b.isActive=!0;d.persisted&&L(56);b.M&&b.M()});c(z,"pagehide",function(){b.isActive=!1;b.F&&b.F()});c(C,"visibilitychange",function(){b.isVisible=!C.hidden});KE(a)&&-1===(Dc.userAgent||"").indexOf("Firefox")&&-1===(Dc.userAgent||"").indexOf("FxiOS")&&c(z,"beforeunload",function(){OE=!0});this.Qh();this.s=0}};aa.Qh=function(){this.s+=this.Jf();this.h=QE(this);this.wh()&&this.h.start()};aa.nn=function(a){var b=this.Jf();0<b&&(a.h[N.g.Fd]=b)};aa.Zl=function(a){a.h[N.g.Fd]=
void 0;this.Qh();this.s=0};aa.wh=function(){return this.C&&this.isVisible&&this.isActive};aa.Ql=function(){return this.s+this.Jf()};aa.Jf=function(){return this.h&&this.h.get()||0};aa.Um=function(a){this.F=a};aa.Rj=function(a){this.M=a};var SE=function(a){Ab("GA4_EVENT",a)};function TE(){return z.gaGlobal=z.gaGlobal||{}}var UE=function(){var a=TE();a.hid=a.hid||Ja();return a.hid},VE=function(a,b){var c=TE();if(void 0==c.vid||b&&!c.from_cookie)c.vid=a,c.from_cookie=b};
var WE=function(a,b,c){var d=a.metadata.client_id_source;if(void 0===d||c<=d)a.h[N.g.ub]=b,a.metadata.client_id_source=c},ZE=function(a,b){var c;var d=b.metadata.cookie_options,e=d.prefix+"_ga",f=Rn(d,void 0,void 0,N.g.R);if(!1===S(b.o,N.g.mc)&&XE(b)===a)c=!0;else{var g=Qn(a,YE[0],d.domain,d.path);c=1!==In(e,g,f)}return c},XE=function(a){var b=a.metadata.cookie_options,c=b.prefix+"_ga",d=Pn(c,b.domain,b.path,YE,N.g.R);if(!d){var e=String(S(a.o,N.g.kc,""));e&&e!=c&&(d=Pn(e,b.domain,b.path,YE,N.g.R))}return d},
YE=["GA1"],$E=function(a,b){var c=a.h[N.g.ub];if(S(a.o,N.g.yb)&&S(a.o,N.g.Lb)||b&&c===b)return c;if(c){c=""+c;if(!ZE(c,a))return L(31),a.isAborted=!0,"";VE(c,Uj(N.g.R));return c}L(32);a.isAborted=!0;return""};
var cF=function(a,b,c){if(!b)return a;if(!a)return b;var d=aF(a);if(!d)return b;var e,f=Na(null!=(e=S(c.o,N.g.ad))?e:30);if(!(Math.floor(c.metadata.event_start_timestamp_ms/1E3)>d.Ke+60*f))return a;var g=aF(b);if(!g)return a;g.Fc=d.Fc+1;var h;return null!=(h=bF(g.sessionId,g.Fc,g.pd,g.Ke,g.Ah,g.Ac,g.te))?h:b},fF=function(a,b){var c=b.metadata.cookie_options,d=dF(b,c),e=Qn(a,eF[0],c.domain,c.path),f={Gb:N.g.R,domain:c.domain,path:c.path,expires:c.Xb?new Date(Ta()+1E3*c.Xb):void 0,flags:c.flags};In(d,
void 0,f);return 1!==In(d,e,f)},gF=function(a){var b=a.metadata.cookie_options,c=dF(a,b),d=Pn(c,b.domain,b.path,eF,N.g.R);if(!d)return d;var e=zn(c,void 0,void 0,N.g.R);if(d&&1<e.length){L(114);for(var f=void 0,g=void 0,h=0;h<e.length;h++){var m=e[h].split(".");if(!(7>m.length)){var n=Number(m[5]);n&&(!g||n>g)&&(g=n,f=e[h])}}f&&f.substring(f.length-d.length,f.length)!==d&&(L(115),d=f.split(".").slice(2).join("."))}return d},bF=function(a,b,c,d,e,f,g){if(a&&b){var h=[a,b,Na(c),d,e];h.push(f?"1":"0");
h.push(g||"0");return h.join(".")}},eF=["GS1"],dF=function(a,b){return b.prefix+"_ga_"+a.target.P[0]},aF=function(a){if(a){var b=a.split(".");if(!(5>b.length||7<b.length)){7>b.length&&L(67);var c=Number(b[1]),d=Number(b[3]),e=Number(b[4]||0);c||L(118);d||L(119);isNaN(e)&&L(120);if(c&&d&&!isNaN(e))return{sessionId:b[0],Fc:c,pd:!!Number(b[2]),Ke:d,Ah:e,Ac:"1"===b[5],te:"0"!==b[6]?b[6]:void 0}}}},hF=function(a){return bF(a.h[N.g.Cb],a.h[N.g.Ud],a.h[N.g.Td],Math.floor(a.metadata.event_start_timestamp_ms/
1E3),a.metadata.join_timer_sec||0,!!a.metadata[N.g.ef],a.h[N.g.Gd])};
var iF=function(a){var b=S(a.o,N.g.Ma),c=a.o.s[N.g.Ma];if(c===b)return c;var d=nb(b);c&&c[N.g.W]&&(d[N.g.W]=(d[N.g.W]||[]).concat(c[N.g.W]));return d},jF=function(a,b){var c=ho(!0);return"1"!==c._up?{}:{clientId:c[a],Sf:c[b]}},kF=function(a,b,c){var d=ho(!0),e=d[b];e&&(WE(a,e,2),ZE(e,a));var f=d[c];f&&fF(f,a);return{clientId:e,Sf:f}},lF=!1,mF=function(a){var b=iF(a)||{},c=a.metadata.cookie_options,d=c.prefix+"_ga",e=dF(a,c),f={};ro(b[N.g.qc],!!b[N.g.W])&&(f=kF(a,d,e),f.clientId&&f.Sf&&(lF=!0));b[N.g.W]&&
oo(function(){var g={},h=XE(a);h&&(g[d]=h);var m=gF(a);m&&(g[e]=m);var n=zn("FPLC",void 0,void 0,N.g.R);n.length&&(g._fplc=n[0]);return g},b[N.g.W],b[N.g.Mb],!!b[N.g.zb]);return f},oF=function(a){if(!S(a.o,N.g.Db))return{};var b=a.metadata.cookie_options,c=b.prefix+"_ga",d=dF(a,b);po(function(){var e;if(Uj("analytics_storage"))e={};else{var f={};e=(f._up="1",f[c]=a.h[N.g.ub],f[d]=hF(a),f)}return e},1);return!Uj("analytics_storage")&&nF()?jF(c,d):{}},nF=function(){var a=kl(z.location,"host"),b=kl(ql(C.referrer),
"host");return a&&b?a===b||0<=a.indexOf("."+b)||0<=b.indexOf("."+a)?!0:!1:!1};var pF=function(){var a=Ta(),b=a+864E5,c=20,d=5E3;return function(){var e=Ta();e>=b&&(b=e+864E5,d=5E3);if(1>d)return!1;c=Math.min(c+(e-a)/1E3*5,20);a=e;if(1>c)return!1;d--;c--;return!0}};
var qF=function(a,b){Zm()&&(a.gcs=$m(),b.metadata.is_consent_update&&(a.gcu="1"));a.gcd=nn(b.o);Ym(b.o)?R(26)&&(a.npa="0"):a.npa="1"},tF=function(a){if(a.metadata.is_merchant_center)return"https://www.merchant-center-analytics.goog/mc/collect";var b=mq(oq(a.o),"/g/collect");if(b)return b;var c=JE(a),d=S(a.o,N.g.ib);return c&&!fj()&&!1!==d&&oD()&&Uj(N.g.J)&&Uj(N.g.R)?rF():sF()},uF=!1;uF=!0;var vF=
{};vF[N.g.ub]="cid";vF[N.g.ff]="_fid";vF[N.g.wg]="_geo";vF[N.g.xb]="gdid";vF[N.g.Wc]="ir";vF[N.g.La]="ul";vF[N.g.Rd]="_rdi";vF[N.g.Bb]="sr";vF[N.g.Ri]="tid";vF[N.g.rf]="tt";vF[N.g.ee]="ec_mode";vF[N.g.aj]="gtm_up";vF[N.g.Wd]="uaa";vF[N.g.Xd]="uab";vF[N.g.Yd]="uafvl";vF[N.g.Zd]="uamb";vF[N.g.ae]="uam";vF[N.g.be]="uap";vF[N.g.ce]="uapv";vF[N.g.de]="uaw";
vF[N.g.Jb]="are";vF[N.g.Si]="ur";vF[N.g.jf]="lps";vF[N.g.Hg]="pae";var wF={};wF[N.g.Ic]="cc";wF[N.g.Jc]="ci";wF[N.g.Kc]="cm";wF[N.g.Lc]="cn";wF[N.g.Nc]="cs";wF[N.g.Oc]="ck";wF[N.g.xa]="cu";wF[N.g.Aa]="dl";wF[N.g.Na]="dr";wF[N.g.Ab]="dt";wF[N.g.Td]="seg";wF[N.g.Cb]="sid";wF[N.g.Ud]="sct";wF[N.g.Ta]="uid";R(19)&&(wF[N.g.Yc]="dp");var xF={};xF[N.g.Fd]="_et";xF[N.g.vb]="edid";
var yF={};yF[N.g.Ic]="cc";yF[N.g.Jc]="ci";yF[N.g.Kc]="cm";yF[N.g.Lc]="cn";yF[N.g.Nc]="cs";yF[N.g.Oc]="ck";var zF={},AF=Object.freeze((zF[N.g.Ba]=1,zF)),sF=function(){var a="www";uF&&gj()&&(a=gj());return"https://"+a+".google-analytics.com/g/collect"},rF=function(){var a;uF&&""!==gj()&&(a=gj());return"https://"+(a?a+".":"")+"analytics.google.com/g/collect"},BF=function(a,b,c){var d={},e={},f={};d.v="2";d.tid=a.target.da;Fp(a,"google_ono",!1)&&!fj()&&(d._ono=1);d.gtm=un(Ep(a));d._p=R(70)?Di:UE();c&&
(d.em=c);a.metadata.create_google_join&&(d._gaz=1);qF(d,a);qn()&&(d.dma_cps=on());d.dma=pn();Dm(Lm())&&(d.tcfd=rn());Ji.h&&(d.tag_exp=Ji.h);var g=a.h[N.g.xb];g&&(d.gdid=g);e.en=String(a.eventName);a.metadata.is_first_visit&&(e._fv=a.metadata.is_first_visit_conversion?2:1);a.metadata.is_new_to_site&&(e._nsi=1);a.metadata.is_session_start&&(e._ss=a.metadata.is_session_start_conversion?2:1);a.metadata.is_conversion&&(e._c=1);a.metadata.is_external_event&&(e._ee=1);if(a.metadata.is_ecommerce){var h=a.h[N.g.Z]||
S(a.o,N.g.Z);if(Ha(h))for(var m=0;m<h.length&&200>m;m++)e["pr"+(m+1)]=dg(h[m])}var n=a.h[N.g.vb];n&&(e.edid=n);var p=function(t,u){if("object"!==typeof u||!AF[t]){var v="ep."+t,w="epn."+t;t=Ga(u)?w:v;var x=Ga(u)?v:w;e.hasOwnProperty(x)&&delete e[x];e[t]=String(u)}},q=R(59)&&KE(a);l(a.h,function(t,u){if(void 0!==u&&!Zh.hasOwnProperty(t)){null===u&&(u="");var v;t!==N.g.Gd?v=!1:a.metadata.euid_mode_enabled||q?(d.ecid=u,v=!0):v=void 0;if(!v&&t!==N.g.ef){var w=u;!0===u&&(w="1");!1===u&&(w="0");w=String(w);
var x;if(vF[t])x=vF[t],d[x]=w;else if(wF[t])x=wF[t],f[x]=w;else if(xF[t])x=xF[t],e[x]=w;else if("_"===t.charAt(0))d[t]=w;else{var y;yF[t]?y=!0:t!==N.g.Mc?y=!1:("object"!==typeof u&&p(t,u),y=!0);y||p(t,u)}}}});(function(t){KE(a)&&"object"===typeof t&&l(t||{},function(u,v){"object"!==typeof v&&(d["sst."+u]=String(v))})})(a.h[N.g.ne]);var r=a.h[N.g.Ya]||{};R(8)&&!1===S(a.o,N.g.ib,void 0,4)&&(d.ngs="1");l(r,function(t,u){void 0!==u&&((null===u&&(u=""),t!==N.g.Ta||f.uid)?b[t]!==u&&(e[(Ga(u)?"upn.":"up.")+
String(t)]=String(u),b[t]=u):f.uid=String(u))});return fg.call(this,{ma:d,Gc:f,kh:e},tF(a),KE(a))||this};sa(BF,fg);var CF=function(a){this.s=a;this.C="";this.h=this.s},DF=function(a,b){a.h=b;return a};function EF(a){var b=a.search;return a.protocol+"//"+a.hostname+a.pathname+(b?b+"&richsstsse":"?richsstsse")}function FF(a,b,c){if(a){var d=a||[],e=lb(b)?b:{};if(Array.isArray(d))for(var f=0;f<d.length;f++)c(d[f],e)}};
var GF=function(a,b){return a.replace(/\$\{([^\}]+)\}/g,function(c,d){return b[d]||c})},HF=function(a){var b={},c="",d=a.pathname.indexOf("/g/collect");0<=d&&(c=a.pathname.substring(0,d));b.transport_url=a.protocol+"//"+a.hostname+c;return b},IF=function(a,b,c){var d=DF(new CF(function(g,h){var m=GF(g,c),n={};h.attribution_reporting&&(n.attributionsrc="");Nc(m,void 0,void 0,n)}),function(g){var h=GF(g,c);Uc(h)}),e=0,f=new z.XMLHttpRequest;f.withCredentials=!0;f.onprogress=function(g){if(200===f.status){var h=
f.responseText.substring(e);e=g.loaded;var m;m=d.C+h;for(var n=m.indexOf("\n\n");-1!==n;){var p;a:{var q=fa(m.substring(0,n).split("\n")),r=q.next().value,t=q.next().value;if(0===r.indexOf("event: message")&&0===t.indexOf("data: "))try{p=JSON.parse(t.substring(t.indexOf(":")+1));break a}catch(w){}p=void 0}var u=d,v=p;v&&(FF(v.send_pixel,v.options,u.s),FF(v.send_beacon,void 0,u.h));m=m.substring(n+2);n=m.indexOf("\n\n")}d.C=m}};f.open(b?"POST":"GET",a);R(104)&&f.setAttributionReporting&&f.setAttributionReporting({eventSourceEligible:!1,
triggerEligible:!0});f.send(b)},JF=function(a,b){var c=ql(a),d=HF(c),e=EF(c);R(78)&&R(71)?Or(e,b,d,function(){return void IF(e,b,d)}):IF(e,b,d)};
var MF=function(a,b,c,d){var e=R(47)&&d;if(R(46)||e){var f=b,g=Xc();void 0!==g&&(f+="&tfd="+Math.round(g));b=f}var h=a+"?"+b;KF&&(d=!(0===h.indexOf(sF())||0===h.indexOf(rF())));d&&!OE?JF(h,c):LF(a,b,c)},NF=function(a,b){function c(v){q.push(v+"="+encodeURIComponent(""+a.ma[v]))}var d=b.dn,e=b.fn,f=b.Tl,g=b.rl,h=b.ql,m=b.jm,n=b.im,p=b.Sm;if(d||e){var q=[];a.ma._ono&&c("_ono");c("tid");c("cid");c("gtm");q.push("aip=1");a.Gc.uid&&!n&&q.push("uid="+encodeURIComponent(""+a.Gc.uid));var r=function(){c("dma");
null!=a.ma.dma_cps&&c("dma_cps");null!=a.ma.gcs&&c("gcs");c("gcd");null!=a.ma.npa&&c("npa")};r();d&&(LF("https://stats.g.doubleclick.net/g/collect","v=2&"+q.join("&")),Nj("https://stats.g.doubleclick.net/g/collect?v=2&"+q.join("&")));if(e){var t=function(){var v=ls()+"/td/ga/rul?";q=[];c("tid");q.push("gacid="+encodeURIComponent(String(a.ma.cid)));c("gtm");r();R(95)&&c("pscdl");q.push("aip=1");q.push("fledge=1");q.push("z="+Ja());ks(v+q.join("&"),a.ma.tid)};q.push("z="+Ja());if(!m){var u=f&&0===f.indexOf("google.")&&
"google.com"!=f?"https://www.%/ads/ga-audiences?v=1&t=sr&slf_rd=1&_r=4&".replace("%",f):void 0;u&&Nc(u+q.join("&"))}R(8)&&(R(82)?p&&!OE&&t():!OE&&g&&h&&js()&&t())}}},KF=!1;var OF=function(){this.F=1;this.M={};this.h=new gg;this.s=-1};OF.prototype.C=function(a,b){var c=this,d=new BF(a,this.M,b),e=PE(a);e&&this.h.X(d)||this.flush();if(e&&this.h.add(d)){if(0>this.s){var f=
z.setTimeout,g;KE(a)?PF?(PF=!1,g=QF):g=RF:g=5E3;this.s=f.call(z,function(){return c.flush()},g)}}else{var h=ig(d,this.F++);MF(d.s,h.params,h.body,d.F);var m=a.metadata.create_dc_join,n=a.metadata.create_google_join,p=!1!==S(a.o,N.g.Ga),q=Ym(a.o),r={eventId:a.o.eventId,priorityId:a.o.priorityId},t=!1;R(82)&&(t=a.h[N.g.Hg]);var u={dn:m,fn:n,Tl:ij(),rl:p,ql:q,jm:fj(),im:a.metadata.euid_mode_enabled,Wn:r,Sm:t,o:a.o};NF(d,u)}Yt(a.o.eventId,a.eventName)};OF.prototype.add=function(a){a.metadata.euid_mode_enabled&&
!OE?this.X(a):this.C(a)};OF.prototype.flush=function(){if(this.h.events.length){var a=jg(this.h,this.F++);MF(this.h.s,a.params,a.body,this.h.C);this.h=new gg;0<=this.s&&(z.clearTimeout(this.s),this.s=-1)}};OF.prototype.X=function(a){var b=this,c=LE(a);c?Wh(c,function(d){b.C(a,1===d.split("~").length?void 0:d)}):this.C(a)};var LF=function(a,b,c){var d=a+"?"+b;if(c)try{Dc.sendBeacon&&Dc.sendBeacon(d,c)}catch(e){Ab("TAGGING",15)}else Uc(d)},QF=fm('',
500),RF=fm('',5E3),PF=!0;var SF=function(a,b,c){void 0===c&&(c={});if("object"===typeof b)for(var d in b)SF(a+"."+d,b[d],c);else c[a]=b;return c},TF=function(a){if(KE(a)){if(R(59)){var b=Fp(a,"ccd_add_1p_data",!1)?1:0;NE(a,"ude",b)}var c=function(e){var f=SF(N.g.Ba,e);l(f,function(g,h){a.h[g]=h})},d=S(a.o,N.g.Ba);void 0!==d?(c(d),R(54)&&(a.h[N.g.ee]="c")):c(a.metadata.user_data);a.metadata.user_data=void 0}};var UF=window,VF=document,WF=function(a){var b=UF._gaUserPrefs;if(b&&b.ioo&&b.ioo()||VF.documentElement.hasAttribute("data-google-analytics-opt-out")||a&&!0===UF["ga-disable-"+a])return!0;try{var c=UF.external;if(c&&c._gaUserPrefs&&"oo"==c._gaUserPrefs)return!0}catch(f){}for(var d=wn("AMP_TOKEN",String(VF.cookie),!0),e=0;e<d.length;e++)if("$OPT_OUT"==d[e])return!0;return VF.getElementById("__gaOptOutExtension")?!0:!1};
var YF=function(a){return!a||XF.test(a)||ai.hasOwnProperty(a)},ZF=function(a){var b=N.g.Bb,c;c||(c=function(){});void 0!==a.h[b]&&(a.h[b]=c(a.h[b]))},$F=function(a){var b=a.indexOf("?"),c=-1===b?a:a.substring(0,b);try{c=decodeURIComponent(c)}catch(d){}return-1===b?c:""+c+a.substring(b)},aG=function(a,b,c){Uj(c)||Wj(function(){b.metadata.is_consent_update=!0;var d=ii[c||""];d&&NE(b,"gcut",d);a.rj(b)},c)},ds={Dl:"",pn:Number("")},bG={},cG=
(bG[N.g.Ic]=1,bG[N.g.Jc]=1,bG[N.g.Kc]=1,bG[N.g.Lc]=1,bG[N.g.Nc]=1,bG[N.g.Oc]=1,bG),XF=/^(_|ga_|google_|gtag\.|firebase_).*$/,dG=function(a){this.Oa=a;this.Rb=new OF;this.h=void 0;this.F=new RE;this.s=this.C=void 0;this.Sb=this.X=!1;this.ed=0;this.M=!1};aa=dG.prototype;aa.Qm=function(a,b,c){var d=this,e=dk(this.Oa);if(e)if(c.eventMetadata.is_external_event&&"_"===a.charAt(0))c.onFailure();else{a!==N.g.sa&&a!==N.g.Pa&&YF(a)&&L(58);eG(c.h);var f=new Dp(e,a,c);f.metadata.event_start_timestamp_ms=b;var g=
[N.g.R];(Fp(f,N.g.Kb,S(f.o,N.g.Kb))||KE(f))&&g.push(N.g.J);R(41)&&KE(f)&&g.push(N.g.N);es(function(){Xj(function(){d.Rm(f)},g)})}else c.onFailure()};aa.Rm=function(a){this.s=a;try{if(WF(a.target.da))L(28),a.isAborted=!0;else if(R(23)){var b;var c=vk(Ck()),d=c&&c.parent;b=d?vk(d):void 0;if(b&&Ha(b.destinations))for(var e=0;e<b.destinations.length;e++)if(WF(b.destinations[e])){L(125);a.isAborted=!0;break}}if(0<=ds.Dl.replace(/\s+/g,"").split(",").indexOf(a.eventName))a.isAborted=!0;else{var f=ME(a);
f&&f.blacklisted&&(a.isAborted=!0)}var g=C.location.protocol;"http:"!=g&&"https:"!=g&&(L(29),a.isAborted=!0);Dc&&"preview"==Dc.loadPurpose&&(L(30),a.isAborted=!0);R(25)&&(a.isAborted=!0);Jp(a);var h=oi.grl;h||(h=pF(),oi.grl=h);h()||(L(35),a.isAborted=!0);if(a.isAborted){a.o.onFailure();Bb();return}var m={prefix:String(S(a.o,N.g.Ra,"")),path:String(S(a.o,N.g.Qc,"/")),flags:String(S(a.o,N.g.Xa,"")),domain:String(S(a.o,N.g.Wa,"auto")),Xb:Number(S(a.o,N.g.Ka,63072E3))};a.metadata.cookie_options=m;fG(a);
this.Qk(a);this.F.nn(a);a.metadata.is_merchant_center?a.metadata.euid_mode_enabled=!1:Fp(a,"ccd_add_1p_data",!1)&&(a.metadata.euid_mode_enabled=!0);if(a.metadata.euid_mode_enabled&&Fp(a,"ccd_add_1p_data",!1)){var n=a.o.s[N.g.fe];if(Wi(n)){var p=S(a.o,N.g.Ba);null===p?a.metadata.user_data_from_code=null:(n.enable_code&&lb(p)&&(a.metadata.user_data_from_code=p),lb(n.selectors)&&!a.metadata.user_data_from_manual&&(a.metadata.user_data_from_manual=Vi(n.selectors)))}}var q=this.Qj,r;S(a.o,N.g.Db)&&(Uj(N.g.R)||
S(a.o,N.g.ub)||(a.h[N.g.aj]=!0));var t;var u;u=void 0===u?3:u;var v=z.location.href;if(v){var w=ql(v).search.replace("?",""),x=il(w,"_gl",!1,!0)||"";t=x?void 0!==io(x,u):!1}else t=!1;t&&KE(a)&&NE(a,"glv",1);if(a.eventName!==N.g.sa)r={};else{S(a.o,N.g.Db)&&dp(["aw","dc"]);fp(["aw","dc"]);var y=mF(a),A=oF(a);r=Object.keys(y).length?y:A}q.call(this,r);var B=a.eventName===N.g.sa;B&&(this.M=!0);a.eventName==N.g.sa&&(S(a.o,N.g.Sa,!0)?(a.o.h[N.g.ba]&&(a.o.C[N.g.ba]=a.o.h[N.g.ba],a.o.h[N.g.ba]=void 0,a.h[N.g.ba]=
void 0),a.eventName=N.g.ic):a.isAborted=!0);B&&!a.isAborted&&0<this.ed++&&SE(17);var E=bb(Dl(a.o,N.g.ba,1),".");E&&(a.h[N.g.xb]=E);var F=bb(Dl(a.o,N.g.ba,2),".");F&&(a.h[N.g.vb]=F);var D=this.C,M=this.F,O=!this.Sb,P=this.h,T=S(a.o,N.g.ub);if(S(a.o,N.g.yb)&&S(a.o,N.g.Lb))T?WE(a,T,1):(L(127),a.isAborted=!0);else{var Z=T?1:8;a.metadata.is_new_to_site=!1;T||(T=XE(a),Z=3);T||(T=P,Z=5);if(!T){var W=Uj(N.g.R),X=TE();T=!X.from_cookie||W?X.vid:void 0;Z=6}T?T=""+T:(T=On(),Z=7,a.metadata.is_first_visit=a.metadata.is_new_to_site=
!0);WE(a,T,Z)}var la=Math.floor(a.metadata.event_start_timestamp_ms/1E3),ia=void 0;a.metadata.is_new_to_site||(ia=gF(a)||D);var ea=Na(S(a.o,N.g.ad,30));ea=Math.min(475,ea);ea=Math.max(5,ea);var Da=Na(S(a.o,N.g.pf,1E4)),pa=aF(ia);a.metadata.is_first_visit=!1;a.metadata.is_session_start=!1;a.metadata.join_timer_sec=0;pa&&pa.Ah&&(a.metadata.join_timer_sec=Math.max(0,pa.Ah-Math.max(0,la-pa.Ke)));var Ea=!1;pa||(Ea=a.metadata.is_first_visit=!0,pa={sessionId:String(la),Fc:1,pd:!1,Ke:la,Ac:!1,te:void 0});
la>pa.Ke+60*ea&&(Ea=!0,pa.sessionId=String(la),pa.Fc++,pa.pd=!1,pa.te=void 0);if(Ea)a.metadata.is_session_start=!0,M.Zl(a);else if(M.Ql()>Da||a.eventName==N.g.ic)pa.pd=!0;a.metadata.euid_mode_enabled?S(a.o,N.g.Ta)?pa.Ac=!0:(pa.Ac&&(pa.te=void 0),pa.Ac=!1):pa.Ac=!1;var Ra=pa.te,mb=R(59)&&KE(a);if(a.metadata.euid_mode_enabled||mb){var Ib=S(a.o,N.g.Gd),vc=Ib?1:8;Ib||(Ib=Ra,vc=4);Ib||(Ib=Nn(),vc=7);var Ge=Ib.toString(),eh=vc,Zv=a.metadata.enhanced_client_id_source;if(void 0===Zv||eh<=Zv)a.h[N.g.Gd]=Ge,
a.metadata.enhanced_client_id_source=eh}O?(a.copyToHitData(N.g.Cb,pa.sessionId),a.copyToHitData(N.g.Ud,pa.Fc),a.copyToHitData(N.g.Td,pa.pd?1:0)):(a.h[N.g.Cb]=pa.sessionId,a.h[N.g.Ud]=pa.Fc,a.h[N.g.Td]=pa.pd?1:0);a.metadata[N.g.ef]=pa.Ac?1:0;gG(a);if(!S(a.o,N.g.Lb)||!S(a.o,N.g.yb)){var $v="",fh=C.location;if(fh){var jj=fh.pathname||"";"/"!=jj.charAt(0)&&(jj="/"+jj);$v=fh.protocol+"//"+fh.hostname+jj+fh.search}a.copyToHitData(N.g.Aa,$v,$F);var oI=a.copyToHitData,pI=N.g.Na,kj;a:{var aw=zn("_opt_expid",
void 0,void 0,N.g.R)[0];if(aw){var bw=decodeURIComponent(aw).split("$");if(3===bw.length){kj=bw[2];break a}}if(void 0!==oi.ga4_referrer_override)kj=oi.ga4_referrer_override;else{var cw=Oi("gtm.gtagReferrer."+a.target.da),qI=C.referrer;kj=cw?""+cw:qI}}oI.call(a,pI,kj||void 0,$F);a.copyToHitData(N.g.Ab,C.title);a.copyToHitData(N.g.La,(Dc.language||"").toLowerCase());var dw=uq();a.copyToHitData(N.g.Bb,dw.width+"x"+dw.height);R(19)&&a.copyToHitData(N.g.Yc,void 0,$F);R(48)&&tq()&&a.copyToHitData(N.g.jf,
"1")}a.metadata.create_dc_join=!1;a.metadata.create_google_join=!1;if(!(R(33)&&KE(a)||a.metadata.is_merchant_center||!1===S(a.o,N.g.ib))&&oD()&&Uj(N.g.J)){var ew=JE(a);(a.metadata.is_session_start||S(a.o,N.g.vg))&&(a.metadata.create_dc_join=!!ew);var fw;fw=a.metadata.join_timer_sec;ew&&0===(fw||0)&&(a.metadata.join_timer_sec=60,a.metadata.create_google_join=!0)}hG(a);ci.hasOwnProperty(a.eventName)&&(a.metadata.is_ecommerce=!0,a.copyToHitData(N.g.Z),a.copyToHitData(N.g.xa));a.copyToHitData(N.g.rf);
for(var gw=S(a.o,N.g.hf)||[],cn=0;cn<gw.length;cn++){var hw=gw[cn];if(hw.rule_result){a.copyToHitData(N.g.rf,hw.traffic_type);SE(3);break}}if(!a.metadata.is_merchant_center&&oq(a.o)){var iw=iF(a)||{},sI=(ro(iw[N.g.qc],!!iw[N.g.W])?ho(!0)._fplc:void 0)||(0<zn("FPLC",void 0,void 0,N.g.R).length?void 0:"0");a.h._fplc=sI}if(void 0!==S(a.o,N.g.Wc))a.copyToHitData(N.g.Wc);else{var jw=S(a.o,N.g.lf),dn,lj;a:{if(lF){var en=iF(a)||{};if(en&&en[N.g.W])for(var kw=ll(ql(a.h[N.g.Na]),"host",!0),mj=en[N.g.W],gh=
0;gh<mj.length;gh++)if(mj[gh]instanceof RegExp){if(mj[gh].test(kw)){lj=!0;break a}}else if(0<=kw.indexOf(mj[gh])){lj=!0;break a}}lj=!1}if(!(dn=lj)){var nj;if(nj=jw)a:{for(var lw=jw.include_conditions||[],tI=ll(ql(a.h[N.g.Na]),"host",!0),fn=0;fn<lw.length;fn++)if(lw[fn].test(tI)){nj=!0;break a}nj=!1}dn=nj}dn&&(a.h[N.g.Wc]="1",SE(4))}KE(a)&&(NE(a,"uc",dj()),Hj()&&NE(a,"rnd",Op()));
if(R(14)&&KE(a)){Fp(a,N.g.Kb,!1)&&NE(a,"gse",1);!1===S(a.o,N.g.ib,void 0,4)&&NE(a,"ngs",1);fj()&&NE(a,"ga_rd",1);oD()||NE(a,"ngst",1);var mw=ij();mw&&NE(a,"etld",mw)}if(KE(a)){var nw=uF?gj():"";nw&&NE(a,"gcsub",nw)}KE(a)&&(NE(a,"gcd",nn(a.o)),Hj()&&S(a.o,N.g.wa)&&NE(a,"adr",1));if(KE(a)){var ow=zs();ow&&NE(a,"us_privacy",ow);var pw=Sm();pw&&NE(a,"gdpr",pw);var qw=Qm();qw&&NE(a,"gdpr_consent",qw)}R(43)&&KE(a)&&(a.h[N.g.Si]=ej()||dj());if(KE(a)&&R(47)){var rw=Di;rw&&NE(a,"tft",Number(rw))}R(52)&&KE(a)&&
(a.metadata.speculative&&NE(a,"sp",1),a.metadata.is_syn&&NE(a,"syn",1),a.metadata.em_event&&(NE(a,"em_event",1),NE(a,"sp",1)));if(!$r(z))L(87);else if(void 0!==bs){L(85);var sw=Yr();sw?S(a.o,N.g.Rd)&&!KE(a)||fs(sw,a):L(86)}if(R(18)){var gn=hs(gs());gn||iG||(iG=!0,tm('AymqwRC7u88Y4JPvfIF2F37QKylC04248hLCdJAsh8xgOfe/dVJPV3XS3wLFca1ZMVOtnBfVjaCMTVudWM//5g4AAAB7eyJvcmlnaW4iOiJodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbTo0NDMiLCJmZWF0dXJlIjoiUHJpdmFjeVNhbmRib3hBZHNBUElzIiwiZXhwaXJ5IjoxNjk1MTY3OTk5LCJpc1RoaXJkUGFydHkiOnRydWV9'),gn=hs(gs()));gn&&(a.h[N.g.Jb]="1")}if(R(82)&&!1!==S(a.o,N.g.Ga)&&Ym(a.o)){var uI=JE(a),vI=S(a.o,N.g.ib);uI&&!1!==vI&&oD()&&Uj(N.g.J)&&hs("join-ad-interest-group")&&Fa(Dc.joinAdInterestGroup)&&
(a.h[N.g.Hg]=!0)}R(95)&&Kp(a);if(a.eventName==N.g.Pa){var uw=S(a.o,N.g.lb),wI=S(a.o,N.g.wb),vw=void 0;vw=a.h[uw];wI(vw||S(a.o,uw));a.isAborted=!0}a.copyToHitData(N.g.Ta);a.copyToHitData(N.g.Ya);hq(a);TF(a);R(52)&&KE(a)&&(a.metadata.speculative=!1);var ww=S(a.o,N.g.yb);ww&&SE(12);a.metadata.em_event&&SE(14);var hh=vk(Ck());(ww||Gk(hh)||hh&&hh.parent&&hh.context&&5===hh.context.source)&&SE(19);!this.M&&a.metadata.em_event&&SE(18);var hn=a.metadata.event_usage;if(Ha(hn))for(var jn=0;jn<hn.length;jn++)SE(hn[jn]);
var xw=Cb("GA4_EVENT");xw&&(a.h._eu=xw);if(a.metadata.speculative||a.isAborted){a.o.onFailure();Bb();return}var xI=this.Qj,yw,yI=this.h,kn;a:{var ln=hF(a);if(ln){if(fF(ln,a)){kn=ln;break a}L(25);a.isAborted=!0}kn=void 0}var zI=kn;yw={clientId:$E(a,yI),Sf:zI};xI.call(this,yw);this.Sb=!0;this.kn(a);R(73)&&Uj(N.g.R)&&(KE(a)&&R(78)&&(R(71)||R(72))&&(a.metadata.is_sgtm_service_worker=!0),R(71)&&(R(78)&&KE(a)?Kr(mq(oq(a.o),"/_")):R(81)&&(wi||yi||KE(a)||Kr())));if(KE(a)){var AI=a.metadata.is_conversion;
if("page_view"===a.eventName||AI)aG(this,a,N.g.J),R(41)&&aG(this,a,N.g.N)}this.F.Qh();a.copyToHitData(N.g.wg);S(a.o,N.g.Rd)&&(a.h[N.g.Rd]=!0,KE(a)||ZF(a));if(a.isAborted){a.o.onFailure();Bb();return}this.rj(a);a.o.onSuccess()}catch(cJ){a.o.onFailure()}Bb()};aa.rj=function(a){this.Rb.add(a)};aa.Qj=function(a){var b=a.clientId,c=a.Sf;b&&c&&(this.h=b,this.C=c)};aa.flush=function(){this.Rb.flush()};aa.kn=function(a){var b=this;if(!this.X){var c=Uj(N.g.R);Vj([N.g.R],function(){var d=Uj(N.g.R);if(c^d&&
b.s&&b.C&&b.h){var e=b.h;if(d){var f=XE(b.s);if(f){b.h=f;var g=gF(b.s);g&&(b.C=cF(g,b.C,b.s))}else ZE(b.h,b.s),VE(b.h,!0);fF(b.C,b.s);var h={};h[N.g.vg]=e;var m=Rv(b.Oa,N.g.xd,h);Uv(m,a.o.eventId,{})}else b.C=void 0,b.h=void 0,z.gaGlobal={};c=d}});this.X=!0}};aa.Qk=function(a){a.eventName!==N.g.Pa&&this.F.Pk(a)};var fG=function(a){function b(c,d){Zh[c]||void 0===d||(a.h[c]=d)}l(a.o.C,b);l(a.o.h,b)},gG=function(a){var b=El(a.o),c=function(d,e){cG[d]&&(a.h[d]=e)};lb(b[N.g.Mc])?l(b[N.g.Mc],function(d,
e){c((N.g.Mc+"_"+d).toLowerCase(),e)}):l(b,c)},hG=function(a){var b=function(c){return!!c&&c.conversion};a.metadata.is_conversion=b(ME(a));a.metadata.is_first_visit&&(a.metadata.is_first_visit_conversion=b(ME(a,"first_visit")));a.metadata.is_session_start&&(a.metadata.is_session_start_conversion=b(ME(a,"session_start")))},iG=!1;
function eG(a){l(a,function(c){"_"===c.charAt(0)&&delete a[c]});var b=a[N.g.Ya]||{};l(b,function(c){"_"===c.charAt(0)&&delete b[c]})};var jG=function(a){if(R(37)&&"prerendering"in C?C.prerendering:"prerender"===C.visibilityState)return!1;a();return!0},kG=function(a){if(!jG(a)){var b=!1,c=function(){!b&&jG(a)&&(b=!0,Pc(C,"visibilitychange",c),R(37)&&Pc(C,"prerenderingchange",c),L(55))};Oc(C,"visibilitychange",c);R(37)&&Oc(C,"prerenderingchange",c);L(54)}};var mG=function(a,b){kG(function(){var c=dk(a);if(c){var d=lG(c,b);Vl(a,d)}});};function lG(a,b){var c=function(){};var d=new dG(a.id),e="MC"===a.prefix;c=function(f,g,h,m){e&&(m.eventMetadata.is_merchant_center=!0);d.Qm(g,h,m)};mk||nG(a,d,b);return c}
function nG(a,b,c){var d=b.F,e={},f={eventId:c,eventMetadata:(e.batch_on_navigation=!0,e)};R(34)&&(f.deferrable=!0);d.Um(function(){OE=!0;Ul.flush();1E3<=d.Jf()&&Dc.sendBeacon&&Wl(N.g.xd,{},a.id,f);b.flush();d.Rj(function(){OE=!1;d.Rj()})});};var oG=lG;function qG(a,b,c){var d=this;}qG.D="internal.gtagConfig";function rG(){var a={};return a};
function tG(a,b){}tG.O="gtagSet";function uG(a,b){}uG.O="injectHiddenIframe";function vG(a,b,c,d,e){}vG.D="internal.injectHtml";var zG={};
function BG(a,b,c,d){}var CG=Object.freeze({dl:1,id:1}),DG={};
function EG(a,b,c,d){}BG.O="injectScript";EG.D="internal.injectScript";function FG(a){var b=!0;return b}FG.O="isConsentGranted";function GG(a){var b=!1;return b}GG.D="internal.isEntityInfrastructure";var HG=function(){var a=dh(function(b){this.h.h.log("error",b)});a.O="JSON";return a};function IG(a){var b=void 0;return md(b)}IG.D="internal.legacyParseUrl";var JG=function(){return!1},KG={getItem:function(a){var b=null;return b},setItem:function(a,
b){return!1},removeItem:function(a){}};function LG(){}LG.O="logToConsole";function MG(a,b){}MG.D="internal.mergeRemoteConfig";function NG(a,b,c){c=void 0===c?!0:c;var d=[];return d}NG.D="internal.parseCookieValuesFromString";function OG(a){var b=void 0;if("string"!==typeof a)return;a&&0===a.indexOf("//")&&(a=C.location.protocol+a);if("function"===typeof URL){var c;a:{var d;try{d=new URL(a)}catch(w){c=void 0;break a}for(var e={},f=Array.from(d.searchParams),g=0;g<f.length;g++){var h=f[g][0],m=f[g][1];e.hasOwnProperty(h)?"string"===typeof e[h]?e[h]=[e[h],m]:e[h].push(m):e[h]=m}c=md({href:d.href,origin:d.origin,protocol:d.protocol,username:d.username,password:d.password,host:d.host,
hostname:d.hostname,port:d.port,pathname:d.pathname,search:d.search,searchParams:e,hash:d.hash})}return c}var n;try{n=ql(a)}catch(w){return}if(!n.protocol||!n.host)return;var p={};if(n.search)for(var q=n.search.replace("?","").split("&"),r=0;r<q.length;r++){var t=q[r].split("="),u=t[0],v=decodeURIComponent(t.splice(1).join("=")).replace(/\+/g," ");p.hasOwnProperty(u)?"string"===typeof p[u]?p[u]=[p[u],v]:p[u].push(v):p[u]=v}n.searchParams=p;n.origin=n.protocol+"//"+n.host;n.username="";n.password=
"";b=md(n);return b}OG.O="parseUrl";function PG(a){J(I(this),["preHit:!PixieMap"],arguments);var b=nd(a,this.h,1).Dj(),c=nb(b.o.h);nb(b.h,c);var d=nb(b.metadata);d.syn_or_mod=!0;var e={eventMetadata:d},f=b.o.eventId,g=Rv(b.target.da,b.eventName,c);Uv(g,f,e);}PG.D="internal.processAsNewEvent";function QG(a,b,c){var d;return d}QG.D="internal.pushToDataLayer";function RG(a,b){var c=!1;return c}RG.O="queryPermission";function SG(){var a="";return a}SG.O="readCharacterSet";function TG(){return ni.fa}TG.D="internal.readDataLayerName";function UG(){var a="";return a}UG.O="readTitle";function VG(a,b){var c=this;J(I(this),["destinationId:!string","callback:!Fn"],arguments),iq(a,function(d){b.invoke(c.h,md(d,c.h,1))});}VG.D="internal.registerCcdCallback";function WG(a){return!0}WG.D="internal.registerDestination";var XG=Object.freeze(["config","event","get","set"]);function YG(a,b,c){}YG.D="internal.registerGtagCommandListener";function ZG(a,b){var c=!1;return c}ZG.D="internal.removeDataLayerEventListener";function $G(a,b){}
$G.D="internal.removeFormData";function aH(){}aH.O="resetDataLayer";function bH(a,b,c,d){J(I(this),["destinationIds:!*","eventName:!*","eventParameters:?PixieMap","messageContext:?PixieMap"],arguments);var e=c?nd(c):{},f=nd(a);Array.isArray(f)||(f=[f]);b=String(b);var g=d?nd(d):{},h=this.h.h;g.originatingEntity=FA(h);for(var m=0;m<f.length;m++){var n=f[m];if("string"===typeof n){var p=
nb(e),q=nb(g),r=Rv(n,b,p);Uv(r,g.eventId||h.eventId,q)}}}bH.D="internal.sendGtagEvent";function cH(a,b,c){}cH.O="sendPixel";function dH(a,b){}dH.D="internal.setAnchorHref";function eH(a,b,c,d){var e=this;d=void 0===d?!0:d;var f=!1;return f}eH.O="setCookie";function fH(a,b){}fH.D="internal.setCorePlatformServices";function gH(a,b){}gH.D="internal.setDataLayerValue";function hH(a){}hH.O="setDefaultConsentState";function iH(a,b){}iH.D="internal.setDelegatedConsentType";function jH(a,b){}jH.D="internal.setFormAction";function kH(a,b,c){return!1}kH.O="setInWindow";function lH(a,b,c){J(I(this),["targetId:!string","name:!string","value:!*"],arguments);var d=Cp(a)||{};d[b]=nd(c,this.h);var e=a;Ap||Bp();zp[e]=d;}lH.D="internal.setProductSettingsParameter";function mH(a,b,c){J(I(this),["targetId:!string","name:!string","value:!*"],arguments);for(var d=b.split("."),e=Zl(a),f=0;f<d.length-1;f++){if(void 0===e[d[f]])e[d[f]]={};else if(!lb(e[d[f]]))throw Error("setRemoteConfigParameter failed, path contains a non-object type: "+d[f]);e=e[d[f]]}e[d[f]]=nd(c,this.h,1);}mH.D="internal.setRemoteConfigParameter";function nH(a,b){var c=this;}nH.D="internal.setupConversionLinker";function oH(a,b,c,d){var e=this;}oH.O="sha256";function pH(a,b,c){}
pH.D="internal.sortRemoteConfigParameters";var qH={},rH={};qH.O="templateStorage";qH.getItem=function(a){var b=null;K(this,"access_template_storage");var c=this.h.h;if(!c)throw Error("invalid program state");var d=c.Wb();rH[d]&&(b=rH[d].hasOwnProperty("gtm."+a)?rH[d]["gtm."+a]:null);return b};
qH.setItem=function(a,b){K(this,"access_template_storage");var c=this.h.h;if(!c)throw Error("invalid program state");var d=c.Wb();rH[d]=rH[d]||{};rH[d]["gtm."+a]=b;};
qH.removeItem=function(a){K(this,"access_template_storage");var b=this.h.h;if(!b)throw Error("invalid program state");var c=b.Wb();if(!rH[c]||!rH[c].hasOwnProperty("gtm."+a))return;delete rH[c]["gtm."+a];};qH.clear=function(){K(this,"access_template_storage");var a=this.h.h;if(!a)throw Error("invalid program state");delete rH[a.Wb()];};function sH(a,b){var c=!1;J(I(this),["regex:!OpaqueValue","testString:!string"],arguments);if(!(a.h instanceof RegExp))return!1;c=a.h.test(b);return c}sH.D="internal.testRegex";var tH=function(a){var b;return b};function uH(a){var b;return b}uH.D="internal.unsiloId";function vH(a){}vH.O="updateConsentState";var wH;function xH(a,b,c){wH=wH||new rh;wH.add(a,b,c)}function yH(a,b){var c=wH=wH||new rh;if(c.s.hasOwnProperty(a))throw"Attempting to add a private function which already exists: "+a+".";if(c.h.hasOwnProperty(a))throw"Attempting to add a private function with an existing API name: "+a+".";c.s[a]=Fa(b)?Kg(a,b):Lg(a,b)}
function zH(){return function(a){var b;var c=wH;if(c.h.hasOwnProperty(a))b=c.get(a,this);else{var d;if(d=c.s.hasOwnProperty(a)){var e=!1,f=this.h.h;if(f){var g=f.Wb();if(g){0!==g.indexOf("__cvt_")&&(e=!0);}}else e=!0;d=e}if(d){var h=c.s.hasOwnProperty(a)?c.s[a]:void 0;b=h}else throw Error(a+" is not a valid API name.");}return b}};var AH=function(){var a=function(c){return yH(c.D,c)},b=function(c){return xH(c.O,c)};b(Wz);b(bA);b(VA);b(YA);b(ZA);b(cB);b(eB);b(hB);b(HG());b(jB);b(mE);b(nE);b(CE);b(DE);b(EE);b(HE);b(tG);b(uG);b(BG);b(FG);b(LG);b(OG);b(RG);b(SG);b(UG);b(cH);b(eH);b(hH);b(kH);b(oH);b(qH);b(vH);xH("Math",Qg());xH("Object",ph);xH("TestHelper",th());xH("assertApi",Mg);xH("assertThat",Ng);xH("decodeUri",Rg);xH("decodeUriComponent",Sg);xH("encodeUri",Tg);xH("encodeUriComponent",Ug);xH("fail",$g);xH("generateRandom",
ah);xH("getTimestamp",bh);xH("getTimestampMillis",bh);xH("getType",ch);xH("makeInteger",ih);xH("makeNumber",jh);xH("makeString",kh);xH("makeTableMap",lh);xH("mock",oh);xH("fromBase64",lE,!("atob"in z));xH("localStorage",KG,!JG());xH("toBase64",tH,!("btoa"in z));a(Zz);a(gA);a(sA);a(zA);a(EA);a(KA);a(TA);a(WA);a($A);a(aB);a(dB);a(fB);a(gB);a(iB);a(kB);a(lB);a(mB);a(oB);a(sB);a(xB);a(yB);a(JB);a(OB);a(TB);a(bC);a(gC);a(tC);a(vC);a(IC);a(Vg);a(KC);a(jE);a(kE);a(oE);a(pE);a(qE);a(rE);a(sE);a(tE);a(uE);
a(vE);a(wE);a(xE);a(zE);a(AE);a(BE);a(FE);a(GE);a(qG);a(EG);a(IG);a(IA);a(MG);a(NG);a(PG);a(QG);a(TG);a(VG);a(WG);a(YG);a(ZG);a($G);a(bH);a(dH);a(fH);a(iH);a(jH);a(lH);a(mH);a(pH);a(sH);yH("internal.GtagSchema",rG());R(53)&&a(vG);R(79)&&a(nB);R(85)&&a(uH);R(83)&&a(gH);R(96)&&a(nH);R(101)&&a(GG);return zH()};var Uz;function BH(){Uz.h.h.M=function(a,b,c){oi.SANDBOXED_JS_SEMAPHORE=oi.SANDBOXED_JS_SEMAPHORE||0;oi.SANDBOXED_JS_SEMAPHORE++;try{return a.apply(b,c)}finally{oi.SANDBOXED_JS_SEMAPHORE--}}}function CH(a){void 0!==a&&l(a,function(b,c){for(var d=0;d<c.length;d++){var e=c[d].replace(/^_*/,"");Gi[e]=Gi[e]||[];Gi[e].push(b)}})};var DH=encodeURI,V=encodeURIComponent,EH=function(a,b,c){Nc(a,b,c)},FH=function(a,b){if(!a)return!1;var c=ll(ql(a),"host");if(!c)return!1;for(var d=0;b&&d<b.length;d++){var e=b[d]&&b[d].toLowerCase();if(e){var f=c.length-e.length;0<f&&"."!=e.charAt(0)&&(f--,e="."+e);if(0<=f&&c.indexOf(e,f)==f)return!0}}return!1},GH=function(a,b,c){for(var d={},e=!1,f=0;a&&f<a.length;f++)a[f]&&a[f].hasOwnProperty(b)&&
a[f].hasOwnProperty(c)&&(d[a[f][b]]=a[f][c],e=!0);return e?d:null};var Y={securityGroups:{}};
Y.securityGroups.access_template_storage=["google"],function(){(function(a){Y.__access_template_storage=a;Y.__access_template_storage.m="access_template_storage";Y.__access_template_storage.isVendorTemplate=!0;Y.__access_template_storage.priorityOverride=0;Y.__access_template_storage.isInfrastructure=!1;Y.__access_template_storage.runInSiloedMode=!1})(function(){return{assert:function(){},K:function(){return{}}}})}();
Y.securityGroups.c=["google"],function(){(function(a){Y.__c=a;Y.__c.m="c";Y.__c.isVendorTemplate=!0;Y.__c.priorityOverride=0;Y.__c.isInfrastructure=!1;Y.__c.runInSiloedMode=!0})(function(a){return a.vtp_value})}();
Y.securityGroups.e=["google"],function(){(function(a){Y.__e=a;Y.__e.m="e";Y.__e.isVendorTemplate=!0;Y.__e.priorityOverride=0;Y.__e.isInfrastructure=!1;Y.__e.runInSiloedMode=!0})(function(a){return String(a.vtp_gtmCachedValues.event)})}();Y.securityGroups.v=["google"],function(){(function(a){Y.__v=a;Y.__v.m="v";Y.__v.isVendorTemplate=!0;Y.__v.priorityOverride=0;Y.__v.isInfrastructure=!1;Y.__v.runInSiloedMode=!1})(function(a){var b=a.vtp_name;if(!b||!b.replace)return!1;var c=gz(b.replace(/\\\./g,"."),a.vtp_dataLayerVersion||1);return void 0!==c?c:a.vtp_defaultValue})}();




Y.securityGroups.process_dom_events=["google"],function(){function a(b,c,d){return{targetType:c,eventName:d}}(function(b){Y.__process_dom_events=b;Y.__process_dom_events.m="process_dom_events";Y.__process_dom_events.isVendorTemplate=!0;Y.__process_dom_events.priorityOverride=0;Y.__process_dom_events.isInfrastructure=!1;Y.__process_dom_events.runInSiloedMode=!1})(function(b){for(var c=b.vtp_targets||[],d=b.vtp_createPermissionError,e={},f=0;f<c.length;f++){var g=c[f];e[g.targetType]=e[g.targetType]||
[];e[g.targetType].push(g.eventName)}return{assert:function(h,m,n){if(!e[m])throw d(h,{},"Prohibited event target "+m+".");if(-1===e[m].indexOf(n))throw d(h,{},"Prohibited listener registration for DOM event "+n+".");},K:a}})}();





Y.securityGroups.detect_history_change_events=["google"],function(){function a(){return{}}(function(b){Y.__detect_history_change_events=b;Y.__detect_history_change_events.m="detect_history_change_events";Y.__detect_history_change_events.isVendorTemplate=!0;Y.__detect_history_change_events.priorityOverride=0;Y.__detect_history_change_events.isInfrastructure=!1;Y.__detect_history_change_events.runInSiloedMode=!1})(function(){return{assert:function(){},K:a}})}();


Y.securityGroups.detect_link_click_events=["google"],function(){function a(b,c){return{options:c}}(function(b){Y.__detect_link_click_events=b;Y.__detect_link_click_events.m="detect_link_click_events";Y.__detect_link_click_events.isVendorTemplate=!0;Y.__detect_link_click_events.priorityOverride=0;Y.__detect_link_click_events.isInfrastructure=!1;Y.__detect_link_click_events.runInSiloedMode=!1})(function(b){var c=b.vtp_allowWaitForTags,d=b.vtp_createPermissionError;return{assert:function(e,f){if(!c&&
f&&f.waitForTags)throw d(e,{},"Prohibited option waitForTags.");},K:a}})}();Y.securityGroups.read_container_data=["google"],function(){(function(a){Y.__read_container_data=a;Y.__read_container_data.m="read_container_data";Y.__read_container_data.isVendorTemplate=!0;Y.__read_container_data.priorityOverride=0;Y.__read_container_data.isInfrastructure=!1;Y.__read_container_data.runInSiloedMode=!1})(function(){return{assert:function(){},K:function(){return{}}}})}();

Y.securityGroups.listen_data_layer=["google"],function(){function a(b,c){return{eventName:c}}(function(b){Y.__listen_data_layer=b;Y.__listen_data_layer.m="listen_data_layer";Y.__listen_data_layer.isVendorTemplate=!0;Y.__listen_data_layer.priorityOverride=0;Y.__listen_data_layer.isInfrastructure=!1;Y.__listen_data_layer.runInSiloedMode=!1})(function(b){var c=b.vtp_accessType,d=b.vtp_allowedEvents||[],e=b.vtp_createPermissionError;return{assert:function(f,g){if(!k(g))throw e(f,{eventName:g},"Event name must be a string.");
if(!("any"===c||"specific"===c&&0<=d.indexOf(g)))throw e(f,{eventName:g},"Prohibited listen on data layer event.");},K:a}})}();
Y.securityGroups.detect_user_provided_data=["google"],function(){function a(b,c){return{dataSource:c}}(function(b){Y.__detect_user_provided_data=b;Y.__detect_user_provided_data.m="detect_user_provided_data";Y.__detect_user_provided_data.isVendorTemplate=!0;Y.__detect_user_provided_data.priorityOverride=0;Y.__detect_user_provided_data.isInfrastructure=!1;Y.__detect_user_provided_data.runInSiloedMode=!1})(function(b){var c=b.vtp_createPermissionError;return{assert:function(d,e){if("auto"!==e&&"manual"!==
e&&"code"!==e)throw c(d,{},"Unknown user provided data source.");if(b.vtp_limitDataSources)if("auto"!==e||b.vtp_allowAutoDataSources){if("manual"===e&&!b.vtp_allowManualDataSources)throw c(d,{},"Detection of user provided data via manually specified CSS selectors is not allowed.");if("code"===e&&!b.vtp_allowCodeDataSources)throw c(d,{},"Detection of user provided data from an in-page variable is not allowed.");}else throw c(d,{},"Automatic detection of user provided data is not allowed.");},K:a}})}();


Y.securityGroups.get_url=["google"],function(){function a(b,c,d){return{component:c,queryKey:d}}(function(b){Y.__get_url=b;Y.__get_url.m="get_url";Y.__get_url.isVendorTemplate=!0;Y.__get_url.priorityOverride=0;Y.__get_url.isInfrastructure=!1;Y.__get_url.runInSiloedMode=!1})(function(b){var c="any"===b.vtp_urlParts?null:[];c&&(b.vtp_protocol&&c.push("protocol"),b.vtp_host&&c.push("host"),b.vtp_port&&c.push("port"),b.vtp_path&&c.push("path"),b.vtp_extension&&c.push("extension"),b.vtp_query&&c.push("query"),
b.vtp_fragment&&c.push("fragment"));var d=c&&"any"!==b.vtp_queriesAllowed?b.vtp_queryKeys||[]:null,e=b.vtp_createPermissionError;return{assert:function(f,g,h){if(g){if(!k(g))throw e(f,{},"URL component must be a string.");if(c&&0>c.indexOf(g))throw e(f,{},"Prohibited URL component: "+g);if("query"===g&&d){if(!h)throw e(f,{},"Prohibited from getting entire URL query when query keys are specified.");if(!k(h))throw e(f,{},"Query key must be a string.");if(0>d.indexOf(h))throw e(f,{},"Prohibited query key: "+
h);}}else if(c)throw e(f,{},"Prohibited from getting entire URL when components are specified.");},K:a}})}();



Y.securityGroups.gct=["google"],function(){function a(b){for(var c=[],d=0;d<b.length;d++)try{c.push(new RegExp(b[d]))}catch(e){}return c}(function(b){Y.__gct=b;Y.__gct.m="gct";Y.__gct.isVendorTemplate=!0;Y.__gct.priorityOverride=0;Y.__gct.isInfrastructure=!1;Y.__gct.runInSiloedMode=!0})(function(b){var c={},d=b.vtp_sessionDuration;0<d&&(c[N.g.ad]=d);c[N.g.Jd]=b.vtp_eventSettings;c[N.g.ig]=b.vtp_dynamicEventSettings;c[N.g.Kb]=1===b.vtp_googleSignals;c[N.g.xg]=b.vtp_foreignTld;c[N.g.ug]=1===b.vtp_restrictDomain;
c[N.g.hf]=b.vtp_internalTrafficResults;var e=N.g.Ma,f=b.vtp_linker;f&&f[N.g.W]&&(f[N.g.W]=a(f[N.g.W]));c[e]=f;var g=N.g.lf,h=b.vtp_referralExclusionDefinition;h&&h.include_conditions&&(h.include_conditions=a(h.include_conditions));c[g]=h;var m=wk(b.vtp_trackingId);$l(m,c);mG(m,b.vtp_gtmEventId);G(b.vtp_gtmOnSuccess)})}();


Y.securityGroups.get=["google"],function(){(function(a){Y.__get=a;Y.__get.m="get";Y.__get.isVendorTemplate=!0;Y.__get.priorityOverride=0;Y.__get.isInfrastructure=!1;Y.__get.runInSiloedMode=!1})(function(a){var b=a.vtp_settings,c=b.eventParameters||{},d=String(a.vtp_eventName),e={};e.eventId=a.vtp_gtmEventId;e.priorityId=a.vtp_gtmPriorityId;a.vtp_deferrable&&(e.deferrable=!0);var f=Rv(String(b.streamId),d,c);Uv(f,e.eventId,e);a.vtp_gtmOnSuccess()})}();
Y.securityGroups.detect_scroll_events=["google"],function(){function a(){return{}}(function(b){Y.__detect_scroll_events=b;Y.__detect_scroll_events.m="detect_scroll_events";Y.__detect_scroll_events.isVendorTemplate=!0;Y.__detect_scroll_events.priorityOverride=0;Y.__detect_scroll_events.isInfrastructure=!1;Y.__detect_scroll_events.runInSiloedMode=!1})(function(){return{assert:function(){},K:a}})}();




var aJ={};aJ.dataLayer=Pi;aJ.callback=function(a){Fi.hasOwnProperty(a)&&Fa(Fi[a])&&Fi[a]();delete Fi[a]};aJ.bootstrap=0;aJ._spx=!1;
function bJ(){oi[tk()]=oi[tk()]||aJ;zk();Ek()||l(Fk(),function(d,e){Wu(d,e.transportUrl,e.context);L(92)});Wa(Gi,Y.securityGroups);var a=vk(Ck()),b,c=null==a?void 0:null==(b=a.context)?void 0:b.source;2!==c&&4!==c&&3!==c||L(142);tf=Jf}
(function(a){function b(){m=C.documentElement.getAttribute("data-tag-assistant-present");Vx(m)&&(h=g.Mk)}if(!z["__TAGGY_INSTALLED"]){var c=!1;if(C.referrer){var d=ql(C.referrer);c="cct.google"===kl(d,"host")}if(!c){var e=zn("googTaggyReferrer");c=e.length&&e[0].length}c&&(z["__TAGGY_INSTALLED"]=!0,Kc("https://cct.google/taggy/agent.js"))}if(Ai)a();else{var f=function(u){var v="GTM",w="GTM";ui?(v="OGT",w="GTAG"):Ai&&(w=v="OPT");var x=z["google.tagmanager.debugui2.queue"];x||(x=[],
z["google.tagmanager.debugui2.queue"]=x,Kc("https://"+ni.wd+"/debug/bootstrap?id="+Rf.ctid+"&src="+w+"&cond="+u+"&gtm="+un()));var y={messageType:"CONTAINER_STARTING",data:{scriptSource:Ec,containerProduct:v,debug:!1,id:Rf.ctid,targetRef:{ctid:Rf.ctid,isDestination:lk.ie},aliases:nk(),destinations:qk()}};y.data.resume=function(){a()};ni.lk&&(y.data.initialPublish=!0);x.push(y)},g={Bn:1,Nk:2,Zk:3,nk:4,Mk:5},h=void 0,m=void 0,n=ll(z.location,"query",!1,void 0,"gtm_debug");Vx(n)&&(h=g.Nk);if(!h&&C.referrer){var p=ql(C.referrer);
"tagassistant.google.com"===kl(p,"host")&&(h=g.Zk)}if(!h){var q=zn("__TAG_ASSISTANT");q.length&&q[0].length&&(h=g.nk)}h||b();if(!h&&Wx(m)){var r=function(){if(t)return!0;t=!0;b();h&&Ec?f(h):a()},t=!1;Oc(C,"TADebugSignal",function(){r()},!1);z.setTimeout(function(){r()},200)}else h&&Ec?f(h):a()}})(function(){try{xk();if(R(16)){}rj().s();Rm();(R(93)||R(94)||R(95))&&
ak();var a=uk();if(ik().canonical[a]){var b=oi.zones;b&&b.unregisterChild(pk());var c=Fu(uk());c._event&&(c._event.external=[]);c._entity&&(c._entity.external=[]);}else{cs();Ji.h="71847096";Ji.s=Oa("");Ji.C="";Tu();
for(var d=data.resource||{},e=d.macros||[],f=0;f<e.length;f++)jf.push(e[f]);for(var g=d.tags||[],h=0;h<g.length;h++)mf.push(g[h]);for(var m=d.predicates||[],n=0;n<m.length;n++)lf.push(m[n]);for(var p=d.rules||[],q=0;q<p.length;q++){for(var r=p[q],t={},u=0;u<r.length;u++){var v=r[u][0];t[v]=Array.prototype.slice.call(r[u],1);"if"!==v&&"unless"!==v||sf(t[v])}kf.push(t)}of=Y;pf=Lz;Lf=new Uf;var w=data.sandboxed_scripts,x=data.security_groups;a:{var y=data.runtime||[],A=data.runtime_lines;Uz=new Ie;BH();
hf=Tz();var B=Uz,E=AH(),F=new ed("require",E);F.Eb();B.h.h.set("require",F);for(var D=[],M=0;M<y.length;M++){var O=y[M];if(!Ha(O)||3>O.length){if(0===O.length)continue;break a}A&&A[M]&&A[M].length&&Cf(O,A[M]);try{Uz.execute(O),R(29)&&Ok&&50===O[0]&&D.push(O[1])}catch(eh){}}R(29)&&(uf=D)}if(void 0!==w)for(var P=["sandboxedScripts"],T=0;T<w.length;T++){var Z=w[T].replace(/^_*/,"");Gi[Z]=P}CH(x);bJ();if(R(24)&&!Ai){for(var W=cj["7"],X=W?W.split("|"):[],la={},ia=0;ia<X.length;ia++)la[X[ia]]=!0;for(var ea=
0;ea<Oj.length;ea++){var Da=Oj[ea],pa=Da,Ea=la[Da]?"granted":"denied";yj().implicit(pa,Ea)}}Ux();Xu=!1;Yu=0;if("interactive"==C.readyState&&!C.createEventObject||"complete"==C.readyState)$u();else{Oc(C,"DOMContentLoaded",$u);Oc(C,"readystatechange",$u);if(C.createEventObject&&C.documentElement.doScroll){var Ra=!0;try{Ra=!z.frameElement}catch(eh){}Ra&&av()}Oc(z,"load",$u)}ix=!1;"complete"===C.readyState?kx():Oc(z,"load",kx);Ok&&(Jk(al),z.setInterval($k,864E5));Jk(Nz);Jk(Av);Jk(ot);Jk(Tl);Jk(Hv);Jk(fl);Jk(Rr);Jk(dl);R(29)&&Jk(Dv);R(102)&&(Jk(Oz),Jk(Qz));
qy();bj(1);Fw();Ei=Ta();aJ.bootstrap=Ei;if(R(16)){}}}catch(eh){if(bj(4),Ok){var Ge=Vk(!0,!0);Nc(Ge)}}});

})()

),N=n("W8MJ"),D=n.n(N),B=n("7W2i"),z=n.n(B),F=n("a1gu"),U=n.n(F),H=n("Nsbk"),W=n.n(H),q=n("s2os"),V=n("TscS"),G=n("UyiZ"),Y=n("R+TL"),Z=n("uwQJ"),X="".concat(Z.c.dockHeaderHeight.small,"px"),J="".concat(Z.c.dockHeaderHeight.mediumLarge,"px"),K=function(){return Object(m.keyframes)("0%{opacity:1;}50%{opacity:0;}100%{opacity:0;}")},$=function(){return Object(m.keyframes)("0%{opacity:0;}50%{opacity:0;}100%{opacity:1;}")},Q=Object(m.css)("background-color:",Y.a.color.white,";color:",Y.a.color.black,";"),ee=Object(m.css)("background-color:",Y.a.color.gray20,";color:",Y.a.color.white,";"),te=Object(m.css)("display:flex;align-items:center;justify-content:space-between;height:100%;max-width:",Y.a.breakpoint.mediaMaxWidth,"px;margin:auto;padding:0;-webkit-font-smoothing:antialiased !important;outline:aliceblue;strong{font-weight:",Y.a.font.weight.bold,";}",Y.a.breakpoint.medium,"{padding:0 20px;}"),ne=Object(m.styled)("div",{target:"e1ejehf00"})("height:",(function(e){return e.theme.dockHeaderHeight.mobileSmall}),"px;padding-bottom:",(function(e){return e.theme.dockHeaderOffset.mobileSmall}),"px;width:100%;font-family:",Y.a.font.franklinBase,";border-radius:0;transition:background-color 250ms linear,0.15s padding ease-out;",Y.a.breakpoint.mobileLarge,"{height:",(function(e){return e.theme.dockHeaderHeight.mobileLarge}),"px;padding-bottom:",(function(e){return e.theme.dockHeaderOffset.mobileLarge}),"px;}",Y.a.breakpoint.small,"{height:",(function(e){return e.theme.dockHeaderHeight.small}),"px;padding-bottom:",(function(e){return e.theme.dockHeaderOffset.small}),"px;}",Y.a.breakpoint.mediumLarge,"{height:",(function(e){return e.theme.dockHeaderHeight.mediumLarge}),"px;padding-bottom:",(function(e){return e.theme.dockHeaderOffset.mediumLarge}),"px;}"),ie=Object(m.css)("padding-bottom:0;",Y.a.breakpoint.mobileLarge,"{padding-bottom:0;}",Y.a.breakpoint.small,"{padding-bottom:0;}",Y.a.breakpoint.mediumLarge,"{padding-bottom:0;}"),re=Object(m.css)("width:100%;font-family:",Y.a.font.franklinBase,";text-align:left;span{display:inline;}",Y.a.breakpoint.mediumLarge,"{text-align:center;padding-left:190px;}"),ae=Object(m.styled)("div",{target:"e1ejehf01"})("position:absolute;height:",(function(e){return e.theme.dockHeaderHeight.mobileSmall}),"px;top:0;bottom:0;right:0;left:0;margin:0 70px 0 20px;display:flex;flex-direction:column;justify-content:center;",Y.a.breakpoint.mobileLarge,"{height:",(function(e){return e.theme.dockHeaderHeight.mobileLarge}),"px;}",Y.a.breakpoint.small,"{height:",(function(e){return e.theme.dockHeaderHeight.small}),"px;}",Y.a.breakpoint.medium,"{width:",(function(e){return"smallAppDLDockTheme"===e.theme.themeID&&"100%"}),";margin-left:",(function(e){return"smallAppDLDockTheme"===e.theme.themeID&&0}),";text-align:",(function(e){return"smallAppDLDockTheme"===e.theme.themeID&&"center"}),";}",Y.a.breakpoint.mediumLarge,"{height:",(function(e){return e.theme.dockHeaderHeight.mediumLarge}),"px;margin:0;}",Y.a.breakpoint.large,"{margin:0;}"),oe=Object(m.css)("font-size:15px;line-height:17px;opacity:1;span{white-space:nowrap;&::after{content:'  ';white-space:pre-line;}}"),se=Object(m.css)("opacity:0;animation:",K()," 0.5s;"),le=Object(m.css)("opacity:1;animation:",$()," 0.5s;"),ce=Object(m.css)("display:flex;justify-content:flex-end;flex-direction:row;",Y.a.breakpoint.medium,"{min-width:160px;}"),ue=Object(m.css)("display:flex;justify-content:center;align-items:center;background-color:transparent;outline:aliceblue;width:",X,";height:",X,";z-index:1;",Y.a.breakpoint.mediumLarge,"{height:",J,";width:",J,";}svg{height:15px;margin:auto;width:15px;}"),de=Object(m.css)("transition:transform 500ms ease;"),pe=Object(m.css)("transform:rotate(-90deg);"),fe=Object(m.css)("transform:rotate(90deg);"),me=Object(m.css)("margin:0 15px 0 0;display:block;",Y.a.breakpoint.medium,"{display:block;}"),he=Object(m.css)("cursor:pointer;font-size:12px;text-transform:uppercase;font-weight:",Y.a.font.weight.bold,";font-family:",Y.a.font.franklinBase,";letter-spacing:0.24px;height:",X,";line-height:calc(",X," + 3px);white-space:nowrap;margin:0;padding:0;display:none;&.",se,"{animation:",K()," 400ms;}&.",le,"{animation:",$()," 400ms;}",Y.a.breakpoint.mediumLarge,"{display:block;height:",J,";line-height:calc(",J," + 3px);}"),ge=Object(m.css)("cursor:pointer;"),ye=Object(m.css)("outline:none;"),ve=Object(m.css)("border-right:1px solid ",Y.a.color.gray55,";display:block;height:30px;margin:auto 0;",Y.a.breakpoint.medium,"{display:none;}"),be=function(e){var t,n=e.coloredHeading,i=e.dockSize,r=e.dockExpanded;if(!e.isDockDismissible)return u()(V.a,{className:Object(m.cx)(de,(t={},p()(t,pe,"standard"!==i&&!r),p()(t,fe,"standard"!==i&&r),t)),fill:n?E.a.color.white:"#111"});var a=n?E.a.color.white:"#010101";return u()(G.a,{fill:a})};be.displayName="ActionIcon",be.defaultProps={coloredHeading:!1,dockExpanded:!1,isDockDismissible:void 0};var _e,we=be,xe=function(e){var t,n=e.contentID,i=e.coloredHeading,r=e.dockExpanded,a=e.dockSize,o=e.isDockDismissible,s=e.headerExpandedCTA,l=e.headerCollapsedCTA,c=e.headerCTA,d=e.onDockCTAClick,f=e.onDockHeadingClick,h=e.showFocus,g=e.toggleChangedMessages,y="standard"===a,v=!r&&g,b="".concat("standard"===a?"standard":"expanded","-dock-btn-selector"),_=Object(m.cx)(ue,(t={},p()(t,ye,h),p()(t,ge,o),t)),w=function(e){var t,n,i=e.dockExpanded,r=e.isStandard,a=e.shouldFadeIn;return!r&&i?a?Object(m.cx)(he,(n={},p()(n,se,i),p()(n,le,a),n)):Object(m.cx)(he,(t={},p()(t,se,!i),p()(t,le,i),t)):he}({dockExpanded:r,isStandard:y,shouldFadeIn:v}),x=function(e){var t=e.isDockDismissible,n=e.dockExpanded,i=e.isStandard,r=e.shouldFadeIn,a=e.headerCTA,o=e.headerCollapsedCTA,s=e.headerExpandedCTA;return t?"":i?a:!n||r?o:s}({isDockDismissible:o,dockExpanded:r,isStandard:y,shouldFadeIn:v,headerCTA:c,headerCollapsedCTA:l,headerExpandedCTA:s}),k=y&&!o?"Button to subscription page":!y&&r?"Button to collapse the message":y||r?o||"gdpr"===n?"Button to close this message":"":"Button to expand the message";return u()("div",{className:ce},void 0,u()("div",{className:me},void 0,u()("p",{className:w},void 0,x)),_e||(_e=u()("div",{className:ve})),u()("button",{"data-testid":b,type:"button",className:_,onClick:d,onKeyPress:f,"aria-label":k},void 0,u()(we,{dockSize:a,dockExpanded:r,coloredHeading:i,isDockDismissible:o})))};xe.displayName="CallToAction",xe.defaultProps={contentID:"",coloredHeading:!1,dockExpanded:!1,isDockDismissible:void 0,headerExpandedCTA:"",headerCollapsedCTA:"",headerCTA:void 0,onDockCTAClick:function(){},onDockHeadingClick:function(){},showFocus:!1,toggleChangedMessages:!1};var ke=xe,Oe={seeMyOptions:"SEE MY OPTIONS",collapse:"Collapse"};function Ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=W()(e);if(t){var r=W()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return U()(this,n)}}var Te=function(e){z()(n,e);var t=Ee(n);function n(){var e;R()(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={offerVisible:"standard"===e.props.dockSize,meterVisible:"standard"!==e.props.dockSize,toggleChangedMessages:!1,showFocus:!1,coloredHeading:!1},e.onDockHeadingKeyUp=function(t){9===t.keyCode&&e.setState({showFocus:!0})},e.getHeadingStyling=function(){var t,n=e.props,i=n.contentID,r=n.dockExpanded,a=e.state.coloredHeading,o="gdpr"===i,s="unlocked-article-regi"===i,l=(t={},p()(t,ye,!e.state.showFocus),p()(t,ge,!(o||s)),p()(t,ie,r),t);return l[Q]=!a,l[ee]=a,l},e}return D()(n,[{key:"render",value:function(){var e,t,n,i=this.props,r=i.className,a=i.contentID,o=i.dockSize,s=i.isDockDismissible,l=i.dockExpanded,c=i.headerCTA,d=i.header2,f=i.header1,h=i.onDockHeadingClick,g=i.onDockCTAClick,y=i.headerCollapsedCTA,v=i.headerExpandedCTA,b=this.state,_=b.offerVisible,w=b.meterVisible,x=b.toggleChangedMessages;return n="standard"===o?"standard-dock-heading-selector":"expanded-dock-heading-selector",u()(ne,{className:Object(m.cx)(this.getHeadingStyling(),r),onClick:h,onKeyPress:h,onKeyUp:this.onDockHeadingKeyUp,role:"button",tabIndex:0,"data-testid":n},void 0,u()("div",{className:te},void 0,u()("div",{className:re},void 0,u()(ae,{},void 0,u()("div",{className:Object(m.cx)(oe,(e={},p()(e,se,"standard"!==o&&!_),p()(e,le,"standard"!==o&&_),p()(e,q.b,"standard"!==o&&!_&&!x||"standard"!==o&&"app_download"===a),e))},void 0,d)),u()(ae,{},void 0,u()("div",{className:Object(m.cx)(oe,(t={},p()(t,se,!("standard"===o||w||"app_download"===a)),p()(t,le,"standard"!==o&&w&&x),p()(t,q.b,"standard"===o),t))},void 0,f))),u()(ke,{contentID:a,coloredHeading:this.state.coloredHeading,dockExpanded:l,dockSize:o,isDockDismissible:s,headerExpandedCTA:v,headerCollapsedCTA:y,headerCTA:c,onDockCTAClick:g,onDockHeadingClick:h,showFocus:this.state.showFocus,toggleChangedMessages:x})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.dockExpanded,i=t.meterVisible,r=t.offerVisible,a={};return n&&!i&&(a.meterVisible=!0,a.offerVisible=!1,a.toggleChangedMessages=!0),n||r||(a.meterVisible=!1,a.offerVisible=!0,a.toggleChangedMessages=!0),Object.keys(a).length>0?a:null}}]),n}(s.Component);Te.displayName="DockHeading",Te.defaultProps={className:void 0,contentID:"",dockExpanded:!1,headerCTA:void 0,header1:null,header2:null,headerCollapsedCTA:Oe.seeMyOptions,headerExpandedCTA:Oe.collapse,isDockDismissible:void 0,onDockHeadingClick:function(){},onDockCTAClick:function(){}};var Ce=Te,Se=function(e){var t;return null!==(t=e.theme)&&void 0!==t&&t.useMaxHeight?"max-height":"height"},Pe=Object(m.styled)("div",{target:"e2qmvq0"})("position:relative;bottom:0;width:100%;",Se,":",(function(e){return e.theme.dockContentHeight.mobileSmall}),"px;z-index:",Y.a.zIndex.dock,";opacity:1;background-color:",Y.a.color.white,";padding:",(function(e){return"read-in-app-disrupter"===e.contentID?"0":"5px 20px 20px"}),";box-sizing:border-box;overflow:hidden;-webkit-font-smoothing:antialiased;border-top-left-radius:",(function(e){return"read-in-app-disrupter"===e.contentID&&"20px"}),";border-top-right-radius:",(function(e){return"read-in-app-disrupter"===e.contentID&&"20px"}),";",Y.a.breakpoint.mobileLarge,"{",Se,":",(function(e){return e.theme.dockContentHeight.mobileLarge}),"px;}",Y.a.breakpoint.small,"{",Se,":",(function(e){return e.theme.dockContentHeight.small}),"px;}",Y.a.breakpoint.medium,"{width:",(function(e){return"smallAppDLDockTheme"===e.theme.themeID&&"auto"}),";}"),Me=function(e){var t=e.card,n=e.contentID;return u()(Pe,{contentID:n},void 0,t)};Me.displayName="DockContent",Me.defaultProps={card:null};var Ie=Me,Ae=function(e){var t;return null!==(t=e.theme)&&void 0!==t&&t.useMaxHeight?"max-height":"height"},je=Object(m.styled)("div",{target:"efw9frv0"})("position:fixed;",Ae,":",(function(e){return e.theme.dockContentHeight.mobileSmall+e.theme.dockHeaderHeight.mobileSmall+e.theme.dockHeaderOffset.mobileSmall}),"px;z-index:",Y.a.zIndex.dock,";bottom:",(function(e){return 0-(e.theme.dockContentHeight.mobileSmall+e.theme.dockHeaderHeight.mobileSmall+e.theme.dockHeaderOffset.mobileSmall+1)}),"px;width:100%;border-top:1px solid ",Y.a.color.gray20,";border-top-left-radius:",(function(e){return"read-in-app-disrupter"===e.contentID&&"20px"}),";border-top-right-radius:",(function(e){return"read-in-app-disrupter"===e.contentID&&"20px"}),";transition:transform ",(function(e){return e.theme.dockExpandSpeed})," ease-out;background-color:",Y.a.color.white,";will-change:transform;",Y.a.breakpoint.mobileLarge,"{",Ae,":",(function(e){return e.theme.dockContentHeight.mobileLarge+e.theme.dockHeaderHeight.mobileLarge+e.theme.dockHeaderOffset.mobileLarge}),"px;bottom:",(function(e){return 0-(e.theme.dockContentHeight.mobileLarge+e.theme.dockHeaderHeight.mobileLarge+e.theme.dockHeaderOffset.mobileLarge+1)}),"px;}",Y.a.breakpoint.small,"{",Ae,":",(function(e){return e.theme.dockContentHeight.small+e.theme.dockHeaderHeight.small+e.theme.dockHeaderOffset.small}),"px;bottom:",(function(e){return 0-(e.theme.dockContentHeight.small+e.theme.dockHeaderHeight.small+e.theme.dockHeaderOffset.small+1)}),"px;}",Y.a.breakpoint.medium,"{display:",(function(e){return"smallAppDLDockTheme"===e.theme.themeID&&"flex"}),";flex-direction:",(function(e){return"smallAppDLDockTheme"===e.theme.themeID&&"column"}),";align-items:",(function(e){return"smallAppDLDockTheme"===e.theme.themeID&&"center"}),";}",Y.a.breakpoint.mediumLarge,"{",Ae,":",(function(e){return e.theme.dockContentHeight.mediumLarge+e.theme.dockHeaderHeight.mediumLarge+e.theme.dockHeaderOffset.mediumLarge}),"px;bottom:",(function(e){return 0-(e.theme.dockContentHeight.mediumLarge+e.theme.dockHeaderHeight.mediumLarge+e.theme.dockHeaderOffset.mediumLarge+1)}),"px;}@media print{display:none;}.NYTApp &{display:none;}&.shown{transform:translateY( ",(function(e){return 0-e.theme.dockHeaderHeight.mobileSmall-e.theme.dockHeaderOffset.mobileSmall-1}),"px );",Y.a.breakpoint.mobileLarge,"{transform:translateY( ",(function(e){return 0-e.theme.dockHeaderHeight.mobileLarge-e.theme.dockHeaderOffset.mobileLarge-1}),"px );}",Y.a.breakpoint.small,"{transform:translateY( ",(function(e){return 0-e.theme.dockHeaderHeight.small-e.theme.dockHeaderOffset.small-1}),"px );}",Y.a.breakpoint.mediumLarge,"{transform:translateY( ",(function(e){return 0-e.theme.dockHeaderHeight.mediumLarge-e.theme.dockHeaderOffset.mediumLarge-1}),"px );}}&.expanded{transform:translateY( ",(function(e){return 1-(e.theme.dockContentHeight.mobileSmall+e.theme.dockHeaderHeight.mobileSmall)}),"px );",Y.a.breakpoint.mobileLarge,"{transform:translateY( ",(function(e){return 1-(e.theme.dockContentHeight.mobileLarge+e.theme.dockHeaderHeight.mobileLarge)}),"px );}",Y.a.breakpoint.small,"{transform:translateY( ",(function(e){return 1-(e.theme.dockContentHeight.small+e.theme.dockHeaderHeight.small)}),"px );}",Y.a.breakpoint.mediumLarge,"{transform:translateY( ",(function(e){return 1-(e.theme.dockContentHeight.mediumLarge+e.theme.dockHeaderHeight.mediumLarge)}),"px );}}"),Le=Object(m.css)("display:block;position:fixed;top:0;bottom:0;right:0;left:0;background:rgba(0,0,0,0.5);z-index:",E.a.zIndex.dock-1,";transition:background 2s;"),Re=Object(m.css)("overflow:hidden;"),Ne=function(e){var t=e.onClick,n=e.visible;return Object(s.useEffect)((function(){return n?document.body.classList.add(Re):document.body.classList.remove(Re),function(){document.body.classList.remove(Re)}}),[n]),n?u()("div",{className:Le,onClick:t,"aria-hidden":!0}):null};Ne.defaultProps={onClick:function(){},visible:!1};var De=Ne;function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fe=function(e,t){return ze(ze({},e),t)},Ue=function(e,t,n){var i,r;if("function"==typeof(null===(i=window)||void 0===i?void 0:i.dispatchEvent)&&"function"==typeof(null===(r=window)||void 0===r?void 0:r.matchMedia)){var a={dockHeight:0,dockVisible:t,dockExpanded:n},o=e.dockContentHeight,s=e.dockHeaderHeight,l=e.dockHeaderOffset;window.matchMedia(E.a.breakpoint.mobileLarge.replace("@media ","")).matches?a.dockHeight=n?o.mobileLarge+s.mobileLarge-1:l.mobileLarge+s.mobileLarge+1:window.matchMedia(E.a.breakpoint.mediumLarge.replace("@media ","")).matches?a.dockHeight=n?o.mediumLarge+s.mediumLarge-1:l.mediumLarge+s.mediumLarge+1:window.matchMedia(E.a.breakpoint.small.replace("@media ","")).matches&&(a.dockHeight=n?o.small+s.small-1:l.small+s.small+1),window.dispatchEvent(new CustomEvent("dockInfo",{detail:a}))}};function He(e){var t,n=e.card,i=e.className,a=e.headingClassName,o=e.contentID,c=e.dockSize,d=e.dockTheme,p=e.header1,h=e.header2,b=e.headerCollapsedCTA,O=e.headerCTA,E=e.headerExpandedCTA,M=e.headerLink,L=e.headerOpenNewTab,R=e.isDockDismissible,N=e.minimized,D=e.onDockCTAClick,B=e.onDockHeadingClick,z=e.segments,F=e.showDock,U=e.b2bIPSegmentID,H=e.underlayConfig,W=Object(f.useLocation)(),q=Object(v.a)({name:"dock",context:c,label:o,b2bIPSegmentID:U}),V=Object(_.a)(),G=Object(s.useReducer)(Fe,{dismissed:!1}),Y=r()(G,2),Z=Y[0],X=Y[1],J=Object(T.a)(),K=Object(C.a)(),$=V.overlays,Q=$.onetap,ee=$.swg,te=$.truncator,ne=$.dock,ie=V.setVisibility,re=V.setMode,ae=V.registerOverlay,oe=ne.visible&&"expanded"===ne.mode,se=Object(s.useCallback)((function(){var e,t,n=Object(y.parse)(W.search);if(null!==(e=J.internalPreviewConfig)&&void 0!==e&&e.meter)return"dock"===(null===(t=J.internalPreviewConfig)||void 0===t?void 0:t.meter);if(Z.dismissed)return!1;if(ne.visible)return!0;if(!F)return!1;if(te.exists){if(!te.ready)return!1;if(te.visible&&"acm"!==te.mode&&"gdpr"!==o)return!1}if(Object(k.d)(n))return!1;if(K||Object(P.a)(K,W.pathname))return!1;if(Object(S.e)())return!1;if(Q.exists){if(!Q.ready)return!1;if(Q.visible)return!1}if(ee.exists){if(!ee.ready)return!1;if(ee.visible)return!1}return!0}),[o,ne.visible,W.search,Q.exists,Q.ready,Q.visible,F,Z.dismissed,ee.exists,ee.ready,ee.visible,te.exists,te.mode,te.ready,te.visible,null==J||null===(t=J.internalPreviewConfig)||void 0===t?void 0:t.meter,K,W.pathname]),le=Object(s.useCallback)((function(){return!!ne.visible&&"gdpr"===o}),[o,ne.visible]),ce=Object(s.useCallback)((function(e){var t=e?se():le();ne.visible!==t&&(ie("dock",t),Ue(d,t,oe))}),[se,le,ne.visible]),ue=function(){re("dock","expanded"),Ue(d,ne.visible,!0)},de=Object(s.useCallback)((function(){re("dock","standard"),Ue(d,ne.visible,!1)}),[]),pe=g()((function(){q.trackImpression(),z.forEach((function(e){Object(x.b)(e.testName)}))}));Object(s.useEffect)((function(){ae("dock"),ce(!0)}),[]),Object(s.useEffect)((function(){ce(!0),ne.visible&&(N?de():ue(),pe())}),[se,le,F,ne.visible]);var fe=function(){R&&(X({dismissed:!0},ce(!1)),Ue(d,!1,oe))},me=function(e){var t=e.dockSize,n=void 0===t?"standard":t,i=e.contentID,r=void 0===i?"":i;return"gdpr"===r?r:"standard"===n?n:"expanded"}({dockSize:c,contentID:o}),he="".concat(me,"-dock"),ge=Object(w.a)({location:W}),ye=Object(s.useRef)(null),ve=Object(s.useRef)(!1);Object(s.useEffect)((function(){if(!ve.current&&ye.current){var e=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(null==t||null===(e=t.currentTarget)||void 0===e?void 0:e.href)||t.target.href;q.trackInteraction(t,{name:I(o,n)})},t=ye.current.querySelectorAll("a, button");t.length&&(t.forEach((function(t){t.addEventListener("click",e)})),ve.current=!0)}}),[ye,q,o,ve]);var be=null;n&&(be="div"===n.type?l.a.cloneElement(n,{ref:ye}):l.a.cloneElement(n,{closeDock:fe,tracker:q,dockVisible:ne.visible}));var _e=!!H&&oe;return u()(m.ThemeProvider,{theme:d},void 0,u()(je,{className:Object(m.cx)(o,{shown:ne.visible&&!ge,expanded:oe&&!ge,standard:"standard"===c,"expanded-dock":"standard"!==c},i),"data-testid":he,"aria-label":"A message from The Times",contentID:o},void 0,(p||h)&&u()(Ce,{className:a,contentID:o,dockExpanded:oe,dockShown:ne.visible&&!ge,dockSize:c,header1:p,header2:h,headerCollapsedCTA:b,headerCTA:O,headerExpandedCTA:E,isDockDismissible:R,onDockCTAClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentTarget,n="button"===t.tagName.toLowerCase();R&&n&&(e.stopPropagation(),q.trackInteraction(e,{name:"close",label:"Close"}),fe()),D(e)},onDockHeadingClick:B||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentTarget,n=void 0===t?{}:t,i="button"===n.tagName.toLowerCase(),r=R&&i,a="gdpr"===o,s="unlocked-article-regi"===o;if(!(r||a||s)){var l="standard"===c,u=A({contentID:o,isExpanded:oe,isStandard:l,linkHref:M}),d=function(){return j({isStandard:l,headerLink:M,headerOpenNewTab:L})},p=l?M:"",f="";l||(oe?(f="Collapse",de()):(f="Expand",ue())),q.trackInteraction(e,ze(ze({},f&&{label:f}),{},{name:u,url:p}),d)}}}),u()(Ie,{tabIndex:"0",dockExpanded:oe,card:be,contentID:o})),u()(De,{visible:_e,onClick:function(){null!=H&&H.clickable&&de()}}))}He.displayName="Dock",He.defaultProps={card:null,className:void 0,headingClassName:void 0,headerCTA:void 0,header1:null,header2:null,headerCollapsedCTA:Oe.seeMyOptions,headerExpandedCTA:Oe.collapse,headerLink:"https://www.nytimes.com",headerOpenNewTab:!1,minimized:!0,onDockCTAClick:function(){},onDockHeadingClick:null,segments:[],showDock:!1,b2bIPSegmentID:"",underlayConfig:null},He.displayName="Dock";var We=Object(b.a)(He),qe=function(){return u()(We,{contentID:"relogin",dockSize:"standard",dockTheme:Z.c,header1:"",header2:"You have been logged out because your session expired. Log in here.",headerCTA:"Log In",headerLink:Object(S.b)(),isDockDismissible:!1,showDock:!0})};qe.displayName="Relogin";var Ve=qe,Ge=n("PgO9"),Ye=n("HUmG"),Ze=n("ExnP"),Xe=Object(m.css)("font-size:15px;line-height:17px;color:",Y.a.color.gray10,";background-color:",Y.a.color.gray80,";display:flex;flex-flow:row wrap;align-items:center;justify-content:space-between;height:100%;box-sizing:border-box;padding:16px 20px;border-radius:6px;font-family:",Y.a.font.franklinBase,";",Y.a.breakpoint.small,"{font-size:18px;line-height:20px;}",Y.a.breakpoint.medium,"{padding:20px 30px;justify-content:space-around;}",Y.a.breakpoint.mediumLarge,"{font-size:20px;line-height:20px;padding-left:45px;padding-right:50px;justify-content:space-around;}"),Je=Object(m.css)(Y.a.breakpoint.medium,"{max-width:375px;}",Y.a.breakpoint.mediumLarge,"{max-width:none;}"),Ke=Object(m.css)("font-weight:",Y.a.font.weight.bold,";display:inline;",Y.a.breakpoint.small,"{display:block;}"),$e=Object(m.css)("margin:4px 0 7px;display:inline;",Y.a.breakpoint.small,"{margin-bottom:1px;display:block;}",Y.a.breakpoint.mediumLarge,"{line-height:24px;}"),Qe=Object(m.css)("font-size:16px;font-weight:",Y.a.font.weight.bold,";font-family:",Y.a.font.franklinBase,";line-height:16px;text-align:center;display:inline-block;width:100%;padding:13px 17px 11px;color:",Y.a.color.white,";background-color:",Y.a.color.gray10,";border-radius:3px;",Y.a.breakpoint.small,"{max-width:248px;}"),et=function(e){var t=e.tracker,n=l.a.createElement(l.a.Fragment,null,"You have access to this article thanks to someone you know. "),i=l.a.createElement(l.a.Fragment,null,"Keep exploring The Times with a free account. "),r={asset:"unlocked_article",application:"Free_Experience"};return u()("div",{className:Ze.a},void 0,u()("div",{className:Xe},void 0,u()("div",{className:Je},void 0,u()("p",{className:Ke},void 0,n),u()("p",{className:$e},void 0,i)),u()("button",{type:"button",onClick:function(e){t.trackInteraction(e,{name:"goto-login-or-register"},(function(){window.location.href=Object(S.a)(r)}))},className:Qe,"data-testid":"unlocked-artcile-btn-selector"},void 0,"Log in or create account")))};et.displayName="UnlockedArticleCard";var tt,nt=et,it=function(e){var t=e.pageCount,n=Object(Ge.a)().user,i=Object(Ye.e)(n),r=i?"standard":"expanded",a=i?"unlocked-article-regi":"unlocked-article-anon",o=tt||(tt=u()(nt,{})),s="Shared with you by a Times subscriber.";return n?u()(We,{card:o,contentID:a,dockSize:r,dockTheme:Z.c,header1:s,header2:s,headerCollapsedCTA:"Learn More",isDockDismissible:i,minimized:i,pageCount:t,showDock:!0}):null};it.displayName="UnlockedArticleDock",it.defaultProps={pageCount:null};var rt=it,at=n("MR/7"),ot=n("0VxJ"),st=n("iz2t"),lt=n("uAdo"),ct=n("+ClL");function ut(){var e,t,n,i=Object(at.a)(),a=Object(Ge.a)().user,o=Object(s.useState)(!1),c=r()(o,2),d=c[0],p=c[1],f=Object(s.useMemo)((function(){return Object(ot.b)(i,"dock")}),[i]),m=Object(s.useRef)(null);if(Object(s.useEffect)((function(){var e;d||null!=i&&null!==(e=i.content)&&void 0!==e&&e.dock&&(i.content.dock.js?(m.current=Object(ot.a)(i.content.dock.js),Promise.all(Object(ot.a)(i.content.dock.js)).then((function(){return p(!0)})).catch((function(e){Object(ct.a)(new Error("Error loading Magnolia JS scripts: ".concat(e.toString())))}))):p(!0))}),[i,d]),!d||null==i||null===(e=i.content)||void 0===e||!e.dock)return null;var h=i.content.dock,g=h.campaignName,y=h.appendExitUri,v=i.content.dock.fields,b=v.collapsedHeader,_=v.collapsedCta,w=v.expandedHeader,x=v.expandedCta,k=v.locationLink,O=v.size,E=v.initialSize,T=v.cta,C=v.openNewTab,S=v.appendAgentID,P="minimized"===E||"standard"===O,M="mega"===O?Z.b:Z.c,I=Object(Ye.f)(a),A=l.a.isValidElement(w)?w:u()("div",{dangerouslySetInnerHTML:{__html:w}}),j=l.a.isValidElement(b)?b:u()("div",{dangerouslySetInnerHTML:{__html:b}}),L=k;return y&&(L?L=st.a(L):Object(ct.a)(new Error("Received an active Dock with appendExitUri from Magnolia without a locationLink field: ".concat(g)))),S&&(L?L=st.b(L):Object(ct.a)(new Error("Received an active Dock with appendAgentID from Magnolia without a locationLink field: ".concat(g)))),u()(We,{card:function(){var e,t,n,r,a;if(null==i||null===(e=i.content)||void 0===e||null===(t=e.dock)||void 0===t||!t.html)return null;var o=i.content.dock.html;return l.a.isValidElement(o)?o:(null!==(n=i.content.dock)&&void 0!==n&&n.appendExitUri&&(o=lt.b(o)),null!==(r=i.content.dock)&&void 0!==r&&null!==(a=r.fields)&&void 0!==a&&a.openNewTab&&(o=lt.a(o)),u()("div",{dangerouslySetInnerHTML:{__html:o}}))}(),contentID:g,dockSize:O,dockTheme:M,header1:A,header2:j,headerCollapsedCTA:_,headerCTA:T,headerExpandedCTA:x,headerLink:L,headerOpenNewTab:C,isDockDismissible:I,minimized:P,segments:f,showDock:!0,b2bIPSegmentID:null==i||null===(t=i.content)||void 0===t||null===(n=t.dock)||void 0===n?void 0:n.ipSegmentId})}ut.displayName="Magnolia";var dt,pt=ut,ft=n("l2po"),mt=n.n(ft),ht=n("yXPU"),gt=n.n(ht),yt=n("o0o1"),vt=n.n(yt),bt=n("fZdH"),_t=n("NW2b"),wt=n("DH8m"),xt=n("SpBF"),kt=n("MLAy"),Ot=n("oXTd"),Et=n("OjOu"),Tt=n("VkAN"),Ct=n.n(Tt),St=n("eFc+"),Pt=n.n(St),Mt=n("Kxyt");function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var At=Pt()(dt||(dt=Ct()(["\n  query NewsletterTitleCaptionQuery($newsletterId: String) {\n    newsletterProductData(code: $newsletterId) {\n      signupModuleHeadline\n      signupModuleSummary\n      signupPageLink\n    }\n  }\n"])));function jt(e){var t,n=e.skipQuery,i=e.newsletterProductCode,r=Object(Mt.useQuery)(At,{skip:n||!i,variables:{newsletterId:i}}).data;if(null===(null==r||null===(t=r.newsletterProductData)||void 0===t?void 0:t.signupPageLink))return null;var a,o,s,l=null!=(a=r)&&null!==(o=a.newsletterProductData)&&void 0!==o&&o.signupModuleHeadline&&null!=a&&null!==(s=a.newsletterProductData)&&void 0!==s&&s.signupModuleSummary?{title:a.newsletterProductData.signupModuleHeadline,caption:a.newsletterProductData.signupModuleSummary}:null;return i&&l?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({productCode:i},l):null}function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Rt=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({mobileSmallCustom:"@media (min-width: 375px)",largeCustom:"@media (min-width: 1220px)"},E.a.breakpoint),Nt={themeID:"emailSignupDockTheme",useMaxHeight:!0,dockContentHeight:{mobileSmall:200,mobileLarge:200,small:160,mediumLarge:140},dockHeaderHeight:{mobileSmall:0,mobileLarge:0,small:0,mediumLarge:0},dockHeaderOffset:{mobileSmall:0,mobileLarge:0,small:0,mediumLarge:0},dockExpandSpeed:"500ms"},Dt=n("3Rk2"),Bt=n.n(Dt)()([Rt.mobileSmallCustom,Rt.small,Rt.medium,Rt.mediumLarge,Rt.largeCustom,Rt.extraLarge]),zt=Object(m.css)("text-align:center;position:relative;margin:-5px -20px -20px;padding:16px 20px 20px;background-color:",Y.a.color.white,";",Bt({paddingBottom:["28px",null,"20px",null]}),";&.confirmation{",Bt({paddingBottom:["22px","22px","20px",null]}),";}"),Ft=Object(m.css)("display:flex;align-items:center;",Bt({display:["block",null,null,"flex"],justifyContent:[null,null,"space-between",null,"center"]}),";&.variant2{",Bt({justifyContent:[null,null,null,"center"]}),";}"),Ut=Object(m.css)("color:",Y.a.color.black,";font-weight:",Y.a.font.weight.medium,";font-family:",Y.a.font.franklinBase,";line-height:",Y.a.font.size(20),";transition:margin-bottom ","300ms ease-out",";",Bt({fontSize:[Y.a.font.size(15),null,null,null,Y.a.font.size(16),Y.a.font.size(16),Y.a.font.size(16)],textAlign:["left",null,null,"left","right"],marginRight:["0",null,"12px","40px"],margin:["0 0 12px",null,null,"0 40px 0 0"]}),";&.confirmation{margin-bottom:0;}&.expanded-error{",Bt({marginBottom:[null,null,null,"22.4px"]}),"}&.variant2{text-align:left;",Bt({maxWidth:[null,null,null,"635px"]}),"}"),Ht=Object(m.css)("font-weight:",Y.a.font.weight.bold,";"),Wt=Object(m.css)("white-space:nowrap;",Bt({textAlign:["left",null,null,"right"],marginRight:["-20px","20px","0"]}),";"),qt=Object(m.css)("height:38px;font-weight:",Y.a.font.weight.mediumBold,";font-family:",Y.a.font.franklinBase,";font-size:",Y.a.font.size(16),";line-height:",Y.a.font.size(16),";text-align:center;display:inline-block;border-radius:3px;",Y.a.breakpoint.small,"{max-width:248px;}"),Vt=Object(m.css)("width:162px;border:1px solid #1e1e1e;background-color:#1e1e1e;color:",Y.a.color.white,";transition:opacity 0.15s ease-in;&.loading,&:hover.loading{opacity:0.6;}&:hover{opacity:0.9;}&:active{opacity:0.85;}"),Gt=Object(m.css)("width:89px;border:1px solid ",Y.a.color.gray10,";margin-left:16px;background-color:",Y.a.color.white,";color:",Y.a.color.gray10,";transition:background-color 0.15s ease-in;&:hover{background-color:rgba(18,18,18,0.08);}&:active{background-color:rgba(18,18,18,0.12);}"),Yt=Object(m.css)("height:0;justify-content:center;"),Zt=Object(m.css)("width:35px;"),Xt=Object(m.css)("color:#a90111;height:",Y.a.font.size(14.4),";font-weight:",Y.a.font.weight.book,";font-family:",Y.a.font.franklinBase,";line-height:",Y.a.font.size(14.4),";font-size:",Y.a.font.size(12),";text-align:left;padding-top:8px;margin-top:-","22.4px",";transition:margin-top ","300ms ease-out",";will-change:margin-top;&.expanded-error{margin-top:0;}"),Jt=Object(m.css)("max-height:0;overflow:hidden;transition:max-height ","300ms ease-out",",opacity ","300ms ease-out",";opacity:0;will-change:max-height,opacity;&.expanded-error{max-height:","22.4px",";opacity:1;}"),Kt=n("taqW"),$t=function(){return u()(Kt.a,{color:"white",fixed:!1,wrapperClass:Yt,iconClass:Zt})};$t.displayName="StyledSpinner";var Qt=$t,en=function(){return u()("div",{className:"".concat(zt," confirmation")},void 0,u()("div",{className:Ft},void 0,u()("div",{className:"".concat(Ut," confirmation")},void 0,"Thank you for signing up for this newsletter. Weve sent you a confirmation email.")))};en.displayName="Confirmation";var tn=en,nn=function(e){var t=e.title,n=e.caption;return l.a.createElement(l.a.Fragment,null,u()("strong",{className:Ht},void 0,t.replace(/\s*[:.!]\s*$/,""),".")," ",n)};nn.defaultProps={caption:void 0};var rn,an,on=nn,sn=function(e){var t=e.closeDock,n=e.subscribeHandler,i=e.trackCloseDockInteraction,a=e.subLoading,o=e.subError,l=e.subComplete,c=e.newsletterData,d=Object(s.useState)(!1),p=r()(d,2),f=p[0],h=p[1];Object(s.useEffect)((function(){!f&&l&&(h(!0),setTimeout((function(){t()}),Et.a))}),[t,l,f]);return f?rn||(rn=u()(tn,{})):u()("div",{className:zt,"data-testid":"email-signup-dock-simple"},void 0,u()("div",{className:Ft},void 0,u()("div",{className:Object(m.cx)(Ut,{"expanded-error":o})},void 0,u()(on,{title:c.title})),u()("div",{className:Wt},void 0,u()("button",{type:"button",onClick:n,disabled:a,className:Object(m.cx)(qt,Vt,{loading:a})},void 0,a?an||(an=u()(Qt,{})):Et.g),u()("button",{type:"button",onClick:function(){i({productCode:c.productCode,productName:c.title}),t()},className:Object(m.cx)(qt,Gt)},void 0,Et.e),u()("div",{className:Object(m.cx)(Jt,{"expanded-error":o})},void 0,u()("div",{className:Object(m.cx)(Xt,{"expanded-error":o})},void 0,o&&Et.d)))))};sn.displayName="Card",sn.defaultProps={closeDock:function(){}};var ln=sn;function cn(e){var t=e.showDock,n=e.subscribeHandler,i=e.trackCloseDockInteraction,r=e.subLoading,a=e.subError,o=e.subComplete,s=e.newsletterData;return u()(We,{contentID:Et.b,card:u()(ln,{subscribeHandler:n,trackCloseDockInteraction:i,subLoading:r,subError:a,subComplete:o,newsletterData:s}),dockSize:Et.c,dockTheme:Nt,minimized:!1,isDockDismissible:!0,showDock:t})}cn.displayName="Variant1Dock";var un,dn,pn=cn,fn=function(e){var t=e.closeDock,n=e.subscribeHandler,i=e.trackCloseDockInteraction,a=e.subLoading,o=e.subError,l=e.subComplete,c=e.newsletterData,d=Object(s.useState)(!1),p=r()(d,2),f=p[0],h=p[1];Object(s.useEffect)((function(){!f&&l&&(h(!0),setTimeout((function(){t()}),Et.a))}),[t,l,f]);return f?un||(un=u()(tn,{})):u()("div",{className:zt,"data-testid":"email-signup-dock-descriptive"},void 0,u()("div",{className:Object(m.cx)(Ft,{variant2:!0})},void 0,u()("div",{className:Object(m.cx)(Ut,{variant2:!0,"expanded-error":o})},void 0,u()(on,{title:c.title,caption:c.caption})),u()("div",{className:Object(m.cx)(Wt,{variant2:!0})},void 0,u()("button",{type:"button",onClick:n,disabled:a,className:Object(m.cx)(qt,Vt,{loading:a})},void 0,a?dn||(dn=u()(Qt,{})):Et.g),u()("button",{type:"button",onClick:function(){i({productCode:c.productCode,productName:c.title}),t()},className:Object(m.cx)(qt,Gt)},void 0,Et.e),u()("div",{className:Object(m.cx)(Jt,{"expanded-error":o})},void 0,u()("div",{className:Object(m.cx)(Xt,{"expanded-error":o})},void 0,o&&Et.d)))))};fn.displayName="Card",fn.defaultProps={closeDock:function(){}};var mn=fn;function hn(e){var t=e.showDock,n=e.subscribeHandler,i=e.trackCloseDockInteraction,r=e.subLoading,a=e.subError,o=e.subComplete,s=e.newsletterData;return u()(We,{contentID:Et.b,card:u()(mn,{subscribeHandler:n,trackCloseDockInteraction:i,subLoading:r,subError:a,subComplete:o,newsletterData:s}),dockSize:Et.c,dockTheme:Nt,minimized:!1,isDockDismissible:!0,showDock:t})}hn.displayName="Variant2Dock";var gn,yn=hn,vn=n("+eR5"),bn={module:{name:Et.b,label:Et.b}},_n={eventData:{type:"click"},module:{element:{name:"email-signup-button",label:"get it in your inbox"}}},wn={eventData:{type:"click"},module:{element:{name:"dismiss",label:"not now"}}},xn=function(e,t){return function(n){e.trackInteraction(t.eventData,t.module.element,null,{newsletter:n})}},kn=n("pAs1"),On="initial",En="loading",Tn="complete",Cn="error",Sn=(gn={},p()(gn,vn.a.variant1,pn),p()(gn,vn.a.variant2,yn),gn),Pn=function(e){var t=e.article,n=Object(s.useState)(On),i=r()(n,2),a=i[0],o=i[1],l=Object(xt.a)().subToNewsletters,c=Object(bt.a)(),d=Object(kt.e)(Et.f),p=Object(wt.a)({percent:.5}).hasMetThreshold,f=Object(s.useRef)(!1),m=t&&Object(kn.a)(t),h=jt({skipQuery:!Object(vn.e)(c)||!m,newsletterProductCode:m}),g=p&&Object(vn.e)(c)&&!!h,y=Object(v.a)(bn.module),b=xn(y,wn),_=xn(y,_n);if(Object(s.useEffect)((function(){Object(_t.e)(vn.a.name)}),[]),Object(s.useEffect)((function(){p&&d.increment()}),[d,p]),Object(s.useEffect)((function(){g&&!f.current&&(f.current=!0,y.trackImpression())}),[g,y]),!g)return null;var w=function(){var e=gt()(vt.a.mark((function e(){return vt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o(En),_({productCode:h.productCode,productName:h.title}),e.prev=2,e.next=5,l([{productCode:m}],{signupFormVersion:Ot.i.emailSignupDock});case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),o(Cn),e.abrupt("return");case 11:o(Tn);case 12:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(){return e.apply(this,arguments)}}(),x=function(e){var t=Object(vn.b)(e);return Sn[t]}(c);return x?u()(x,{showDock:g,subscribeHandler:w,trackCloseDockInteraction:b,subLoading:a===En,subError:a===Cn,subComplete:a===Tn,newsletterData:h}):null};Pn.defaultProps={article:void 0};var Mn,In,An,jn=Pn,Ln=n("X6oL"),Rn=n("/tu1"),Nn=n("udJG"),Dn=n("PCFz"),Bn=n("g+Cy"),zn=E.a.color,Fn=E.a.font,Un=Object(m.css)("display:flex;flex-direction:column;align-items:center;height:100%;max-width:337px;margin:auto;font-family:",Fn.franklinBase,";font-size:",Fn.size(12),";line-height:",Fn.size(18),";color:",zn.gray10,";"),Hn=Object(m.css)("display:block;text-align:center;"),Wn=Object(m.css)("margin:26px 0 4px 0;font-size:",Fn.size(14),";font-weight:",Fn.weight.bold,";outline:none;"),qn=Object(m.css)("display:flex;flex-direction:row;justify-content:flex-start;align-items:center;height:55px;width:337px;margin:22px 0 14px 0;background-color:",zn.gray90,";font-size:",Fn.size(14),";font-weight:",Fn.weight.bold,";border:1px solid ",zn.gray60,";"),Vn=Object(m.css)("height:30px;width:23px;margin:0 54px 0 17px;"),Gn=Object(m.css)("text-align:center;button{background:none;line-height:",Fn.size(18),";color:",zn.gray20,";text-decoration:underline;}"),Yn=function(e){var t=e.closeDock,n=e.redirectUri,i=e.dockVisible,r=Object(Ln.useTracking)().trackEvent,a=Object(s.useRef)(null),o=Object(s.useRef)(null),c=Object(s.useRef)(!1);Object(s.useEffect)((function(){i&&a.current.focus()}),[i]);var d=o.current?o.current.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type="text"]:not([disabled]), input[type="radio"]:not([disabled]), input[type="checkbox"]:not([disabled]), select:not([disabled])'):[],p=d[0],f=d.length>0?d[d.length-1]:d[0];return i?l.a.createElement("div",{className:Un,"aria-modal":"true",role:"alertdialog","aria-labelledby":"dialog-label","aria-describedby":"dialog-desc",ref:o,onKeyDown:function(e){"Tab"!==e.key&&9!==e.keyCode||(c.current=!0,e.shiftKey?document.activeElement===p&&(f.focus(),e.preventDefault()):document.activeElement===f&&(p.focus(),e.preventDefault()))}},l.a.createElement("h2",{id:"dialog-label",className:Wn,tabIndex:"-1",ref:a},"Continue reading in the app  its better"),Mn||(Mn=u()("div",{id:"dialog-desc"},void 0,u()("p",{className:Hn},void 0,"Stay logged in and get customized notifications."),u()("p",{className:Hn},void 0,"Exploring articles will be easier, too."))),u()("ul",{},void 0,u()("li",{},void 0,u()(Dn.a,{redirectUri:n,className:qn,trackingObject:{event:"moduleInteraction",module:{name:"read-in-app-disrupter",label:"onboarding-read-in-app",context:"standard",version:"onboarding-read-in-app",element:{name:"read-in-app",label:"clicked-read-in-app"}}}},void 0,In||(In=u()(Bn.a,{className:Vn,role:"presentation"})),An||(An=u()("span",{className:"label"},void 0,"Read this article in the app")))),u()("li",{className:Gn},void 0,u()("button",{type:"button",onClick:function(){if(r({event:"moduleInteraction",module:{name:"read-in-app-disrupter",label:"onboarding-read-in-app",context:"standard",version:"onboarding-read-in-app",element:{name:"no-thanks",label:"clicked-no-thanks"}}}),t(),c.current){!function e(t){if(!(t.length<=0)){var n=t.shift();n.focus(),n!==document.activeElement&&e(t)}}(Array.from(document.querySelectorAll("a[href]:not([disabled]), button:not([disabled])"))),window.scrollTo(0,0)}}},void 0,"Not right now")))):null};Yn.defaultProps={closeDock:function(){},redirectUri:"https://www.nytimes.com",dockVisible:!1};var Zn=Yn,Xn=function(e){var t=e.article,n=Object(s.useState)(!1),i=r()(n,2),a=i[0],o=i[1],l=Object(Ln.useTracking)().trackEvent,c=Object(kt.e)(Nn.a),d=Object(Rn.d)(null==t?void 0:t.url),p=u()(Zn,{redirectUri:d});return Object(s.useEffect)((function(){setTimeout((function(){l({event:"impression",eventData:{type:"impression",pageType:"article"},module:{name:"read-in-app-disrupter",label:"onboarding-read-in-app",context:"standard"}}),c.increment(),o(!0)}),7e3)}),[]),u()(We,{card:p,contentID:"read-in-app-disrupter",dockSize:"expanded",dockTheme:Z.a,header1:"",header2:"",headerCTA:"",isDockDismissible:!0,showDock:a,minimized:!1,underlayConfig:{clickable:!1}})};Xn.displayName="Disrupter",Xn.defaultProps={article:{url:"https://www.nytimes.com"}};var Jn=Xn,Kn=n("lCtR"),$n=n("syiw"),Qn=["children"],ei={EmailSignupDock:jn,ReloginDock:Ve,UnlockedArticleDock:rt,MagnoliaDock:pt,OMADock:mt.a,Disrupter:Jn};function ti(e){var t=e.children,n=o()(e,Qn),i=Object(s.useRef)(null),a=Object(s.useState)(!1),c=r()(a,2),u=c[0],d=c[1],p=Object(Kn.a)(n),f=Object(bt.a)(),m=Object($n.useMessageSelection)({config:{name:"dock"}}),h=Object(s.useState)(void 0),g=r()(h,2),y=g[0],v=g[1],b=Object(_.a)(),w=b.setVisibility,x=b.registerOverlay,k=Object(s.useCallback)((function(){var e,t,n,i,r;return"undefined"!=typeof document&&("undefined"!=typeof window&&(!1!==(null==f||null===(e=f.MX_OMA_DOCK_TEST)||void 0===e?void 0:e.allocated)&&((null==m||!m.loading)&&!(!(null!==(t=window)&&void 0!==t&&null!==(n=t.selection)&&void 0!==n&&n.called||null===(i=window)||void 0===i||null===(r=i.selection)||void 0===r)&&r.loading))))}),[m,f]);return Object(s.useEffect)((function(){var e,t;if(void 0===y&&k())if("1_Variant"===(null==f||null===(e=f.MX_OMA_DOCK_TEST)||void 0===e?void 0:e.variant)){var n=null==m||null===(t=m.response)||void 0===t?void 0:t.campaign();v(""!==n)}else v(!1)}),[k,m,f,y]),Object(s.useEffect)((function(){if(!i.current&&void 0!==y){if(y)return i.current=ei.OMADock,d(!0),x("dock"),void w("dock",!0);if(p.ready&&p.type){var e=p.type,t=ei[e];t&&(i.current=t,d(!0))}}}),[p,i,u,d,y,m,x,w]),i.current&&u?l.a.createElement(i.current,n,t):null}ti.defaultProps={adSensitivity:"",article:void 0,children:null},ti.displayName="FullDock";t.a=Object(b.a)(ti)},"9dx5":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.scrollTo=t.noop=t.mapDataToProps=t.makeSurrogateKeyMemoized=t.makeSurrogateKey=t.getSlideData=t.getImageCrops=t.createAnimation=void 0;var r=i(n("uyHG")),a=n("nosR"),o=function(){for(var e="",t=0;t<=10;t+=1)e+=String.fromCharCode(70+Math.floor(8*Math.random()));return e.toLowerCase()};t.makeSurrogateKey=o;var s=(0,r.default)(o);t.makeSurrogateKeyMemoized=s;t.noop=function(){};var l=function(e,t,n,i,r,a){var o=i;o||(o=.75*Math.abs(t-n));var s=null,l=e;return function e(i){s||(s=i);var c,u=s-i;l.scrollLeft=(c=u,(t-n)*Math.sin(c/o*(Math.PI/2))+t),i-s<o?requestAnimationFrame(e):(l.scrollLeft=n,r&&setTimeout((function(){return r(a)}),0))}};t.createAnimation=l;t.scrollTo=function(e,t,n,i,r){var a=t*e.clientWidth,o=e.scrollLeft;if(n)e.scrollLeft=a;else{var s=l(e,o,a,i,r,t);requestAnimationFrame(s)}};var c=function(e){var t=e.find((function(e){return"THREE_BY_TWO"===e.name}))||{},n=e.find((function(e){return"MASTER"===e.name}))||{},i=(0,a.findRenditionOfBestFitUrl)(null==n?void 0:n.renditions,1200)||(0,a.findRenditionOfBestFitUrl)(null==t?void 0:t.renditions,1200),r=e.find((function(e){return"MOBILE_MASTER"===e.name}))||{},o=(null==r?void 0:r.renditions)&&r.renditions[0]&&r.renditions[0].url||(0,a.findRenditionOfBestFitUrl)(null==n?void 0:n.renditions,800);return{desktop:i||o,mobile:o||i}};t.getImageCrops=c;var u=function(e,t){var n,i,r;return{caption:"amp"===t?(null==e?void 0:e.caption)&&(null===(n=e.caption)||void 0===n?void 0:n.text)&&e.caption.text:(null==e?void 0:e.legacyHtmlCaption)&&e.legacyHtmlCaption,credit:(null==e||null===(i=e.image)||void 0===i?void 0:i.credit)&&e.image.credit,images:(null==e?void 0:e.image)&&c(e.image.crops),id:(null==e||null===(r=e.image)||void 0===r?void 0:r.id)&&e.image.id}};t.getSlideData=u;t.mapDataToProps=function(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=null===(t=e.headline)||void 0===t?void 0:t.default,a=null===(n=e.slides)||void 0===n?void 0:n.map((function(e){return u(e,i)}));return{title:r,images:a}}},"9i1U":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i,r=n("VkAN"),a=n.n(r),o=n("eFc+"),s=Object(o.gql)(i||(i=a()(["\n  fragment Connection_pageInfo on RelayConnection {\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n      startCursor\n      endCursor\n    }\n  }\n"])))},"9jcr":function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(i,o,l):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("+rYN")));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}var l=function(e){var t=e.onClick;return a.default.createElement("button",{tabIndex:"100",className:o.dismissButtonClass,type:"button",onClick:t,"aria-label":"close"},a.default.createElement("svg",{width:"60",height:"60",viewBox:"0 0 60 60",fill:"none"},a.default.createElement("circle",{cx:"30",cy:"30",r:"30",fill:"white",fillOpacity:"0.9"}),a.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.4844 20.1006L39.8986 21.5148L21.5138 39.8996L20.0996 38.4854L38.4844 20.1006Z",fill:"black"}),a.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.5156 20.1006L20.1014 21.5148L38.4862 39.8996L39.9004 38.4854L21.5156 20.1006Z",fill:"black"})))};l.displayName="DismissButton",l.defaultProps={onClick:void 0};var c=l;t.default=c},"9qba":function(e,t){e.exports=function(){return"(function () { undefined })();"}},"9ref":function(e,t,n){"use strict";var i,r=n("VkAN"),a=n.n(r),o=n("gcR/"),s=n.n(o),l=n("lSNA"),c=n.n(l),u=n("QILm"),d=n.n(u),p=n("J4zp"),f=n.n(p),m=n("q1tI"),h=n.n(m),g=n("eFc+"),y=n.n(g),v=n("X6oL"),b=n("ZKN5"),_=n("OXmc"),w=n.n(_),x=n("4zjr"),k=n.n(x),O=n("UIP5"),E=n("sOrY"),T=["audioControls"];function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e){var t,n,i,r,a,o=e.media,l=e.playerRef,c=e.playerOptions,u=e.locksmith,p=Object(v.useTracking)(),g=p.trackEvent,y=p.getTrackingData,b=Object(m.useRef)(null),_=Object(m.useReducer)(E.a,{showTranscript:!1,currentTime:0,isPlaying:!1}),x=f()(_,2),C=x[0],P=x[1],M=c||{},I=M.audioControls,A=d()(M,T);if(!o.fileUrl)return null;var j=(null===(t=(y().presentation||{}).pageType)||void 0===t?void 0:t.toLowerCase())||"homepage",L=o.promotionalHeadline||(null===(n=o.headline)||void 0===n?void 0:n.default)||"",R=S({audioControls:S({version:"v2",layout:"desktop",transcript:o.audioTranscript||null,showTranscript:o.audioTranscript&&function(e){e&&"function"==typeof e.stopPropagation&&(e.stopPropagation(),e.preventDefault()),P({showTranscript:!0})}||null},I),duration:1e3*(o.length||0),gtmTrackEvent:g,headline:L,id:o.sourceId,playerRef:function(e){l&&l(e),b.current=e,P({isPlaying:!1}),e.on(e.events.TIME_UPDATE,(function(e){P({currentTime:e})})),e.on(e.events.PLAY,(function(){P({isPlaying:!0})})),e.on(e.events.PAUSE,(function(){P({isPlaying:!1})})),u&&u.lock&&u.unlock&&e.on(e.events.READY,(function(){var t=e.props.instanceId,n=[e.events.PLAYING],i=[e.events.PAUSE,e.events.ENDED,e.events.ERROR];n.forEach((function(n){e.on(n,(function(){u.lock(t)}))})),i.forEach((function(n){e.on(n,(function(){u.unlock(t)}))}))}))},section:o.section||{},series:(null===(i=o.podcastSeries)||void 0===i?void 0:i.name)||"",src:o.fileUrl,type:j},A);return s()("div",{},void 0,o.audioTranscript&&s()(w.a,{hideTranscript:function(){P({showTranscript:!1})},audioDuration:1e3*(o.length||0),currentTime:C.currentTime,isPlaying:C.isPlaying,onPlayPause:function(){b.current&&(C.isPlaying?b.current.pause():b.current.play())},isVisible:C.showTranscript,transcript:o.audioTranscript,headline:(null===(r=o.headline)||void 0===r?void 0:r.default)||"",summary:o.summary||"",credits:o.credit,podcastName:null===(a=o.podcastSeries)||void 0===a?void 0:a.title}),h.a.createElement(O.AudioPlayer,R),s()(k.a,{data:o,platform:"vi",inlineAsset:!0}))}P.displayName="SpanAudio",P.defaultProps={playerOptions:void 0,locksmith:void 0,playerRef:void 0},P.fragments={media:y()(i||(i=a()(["\n    fragment SpanAudio_media on Audio {\n      id\n      credit\n      headline {\n        default\n      }\n      summary\n      audioTranscript: transcript {\n        transcriptFragment {\n          text\n          speaker\n          timecode {\n            start\n            end\n          }\n        }\n      }\n      promotionalHeadline\n      fileUrl\n      length\n      podcastSeries {\n        name\n      }\n      section {\n        id\n        name\n      }\n      sourceId\n    }\n  "])))},t.a=Object(b.a)(P)},"9tMe":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.opinionLogoTypographyFn=t.opinionLogoColorFn=t.OpinionLogo=void 0;var r=n("Jqp9"),a=i(n("3Rk2")),o=i(n("wXC7")),s=n("3sMT"),l=o.default.font.size,c=o.default.breakpoint,u=c.small,d=c.medium,p=(0,a.default)([u,d]),f=(0,r.themeFn)("opinionHeaderRedesign",{none:(0,r.css)("font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.light,";letter-spacing:normal;",p({fontSize:[l(25),l(28)],lineHeight:[l(25),l(28)]}),";"),true:(0,r.css)("font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.bold,";letter-spacing:0.07em;text-transform:uppercase;",p({fontSize:[l(15),l(16)],lineHeight:[l(20),l(24)]}),";")});t.opinionLogoTypographyFn=f;var m=(0,r.themeFn)("opinionHeaderRedesign",{none:(0,r.css)("color:'#a19d9d';"),true:(0,r.css)("color:",s.color.signal.breaking,";")});t.opinionLogoColorFn=m;var h=(0,r.styled)("div",{target:"e1vbbbt70"})("align-self:center;text-decoration:none;",m,";",f,";a:hover &{text-decoration:underline;}");t.OpinionLogo=h},AF3j:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OnsiteBylineTimestamp=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),i(n("/UXH"))),o=(n("EVBM"),n("z5jG")),s=n("hsyQ"),l=function(e){var t=e.bylineData,n=e.timestampBlock,i=e.lastMajorModification,l=e.translations;return r.default.createElement(r.default.Fragment,null,r.default.createElement(o.OnsiteByline,{bylineData:t}),r.default.createElement(s.OnsiteTimestamp,{timestampBlock:n,lastMajorModification:i}),r.default.createElement(a.default,{translations:l||[]}))};t.OnsiteBylineTimestamp=l,l.defaultProps={bylineData:null,timestampBlock:null,lastMajorModification:null,translations:null};var c=l;t.default=c},AKP5:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=function(e){var t;return function(){for(var n=this,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];t&&window.cancelAnimationFrame(t),t=window.requestAnimationFrame((function(){return e.apply(n,r)}))}},t.getItemsWithHeadshots=function(e,t){return e?null==t?void 0:t.map((function(t,n){var i,r,a,s,l,c,u,d,p,f,m=null==e||null===(i=e.anyWorks)||void 0===i||null===(r=i[n])||void 0===r||null===(a=r.bylines)||void 0===a||null===(s=a[0])||void 0===s?void 0:s.creatorSnapshots;return!m||m.length>1?t:o(o({},t),{},{headshot:null===(l=m[0])||void 0===l||null===(c=l.promotionalMedia)||void 0===c||null===(u=c.crops)||void 0===u||null===(d=u[0])||void 0===d||null===(p=d.renditions)||void 0===p||null===(f=p[0])||void 0===f?void 0:f.url})})):[]},t.getScrolledIndex=function(e){var t=Math.round(e.scrollLeft/e.clientWidth);return Math.min(t,e.children.length)},t.times=t.noop=t.handleNavRight=t.handleNavLeft=t.handleButtonPress=void 0;var r=i(n("lSNA"));function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){var n,i=+(null==e?void 0:e.dataset.scrolledIndex)+("left"===t?-1:1),r=null==e||null===(n=e.children)||void 0===n?void 0:n[i];r&&e.scrollTo({left:r.offsetLeft})}t.noop=function(){};t.handleNavLeft=function(e){return s(e,"left")};t.handleNavRight=function(e){return s(e,"right")};t.times=function(e,t){return new Array(e).fill(null).map((function(e,n){return t(n)}))};t.handleButtonPress=function(e,t){"Enter"!==e.key&&"Spacebar"!==e.key&&" "!==e.key||t()}},"ANq+":function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.otherSubsHeaderWrapperStyle=t.otherSubsCtaIconWrapperStyle=t.otherSubsDividerStyle=t.otherSubsCtaActionTextContainerStyle=t.otherSubsCtaContainerStyle=t.otherSubsHeadingClassStyle=t.otherSubsHeadingClassName=t.otherSubsClassName=t.subHeader=t.header=t.headerLogo=t.headerContainer=t.button=t.ctaContainer=t.mainContent=t.headerText=void 0;var r,a,o,s,l,c,u,d,p,f,m,h,g,y,v,b,_=n("Jqp9"),w=n("lVLo");t.headerText=(0,_.css)(r||(r=i(["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  line-height: 100%;\n  text-align: left;\n  @media (min-width: 500px) {\n    text-align: center;\n  }\n  width: 100%;\n"],["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  line-height: 100%;\n  text-align: left;\n  @media (min-width: 500px) {\n    text-align: center;\n  }\n  width: 100%;\n"])),w.fonts.franklin,w.fontWeights.medium),t.mainContent=(0,_.css)(a||(a=i(["\n  display: flex;\n  align-items: center;\n  background-color: ",";\n  font-family: ",";\n  border-radius: 5px;\n  padding: 16px 20px 20px;\n  flex-direction: column;\n  margin: 0 auto 20px;\n  align-self: flex-start;\n  max-width: 240px;\n  text-align: center;\n\n  @media (min-width: ","px) {\n    max-width: unset;\n    width: calc(100% - 80px);\n  }\n\n  @media (min-width: 500px) {\n    flex-direction: row;\n    align-items: center;\n    max-width: 1180px;\n    width: calc(100% - 80px);\n    justify-content: space-between;\n    gap: 24px;\n  }\n\n  @media (min-width: ","px) {\n    width: calc(100% - 104px);\n    padding: 32px;\n  }\n\n  @media (min-width: ","px) {\n    width: calc(100% - 120px);\n    padding: 40px;\n  }\n"],["\n  display: flex;\n  align-items: center;\n  background-color: ",";\n  font-family: ",";\n  border-radius: 5px;\n  padding: 16px 20px 20px;\n  flex-direction: column;\n  margin: 0 auto 20px;\n  align-self: flex-start;\n  max-width: 240px;\n  text-align: center;\n\n  @media (min-width: ","px) {\n    max-width: unset;\n    width: calc(100% - 80px);\n  }\n\n  @media (min-width: 500px) {\n    flex-direction: row;\n    align-items: center;\n    max-width: 1180px;\n    width: calc(100% - 80px);\n    justify-content: space-between;\n    gap: 24px;\n  }\n\n  @media (min-width: ","px) {\n    width: calc(100% - 104px);\n    padding: 32px;\n  }\n\n  @media (min-width: ","px) {\n    width: calc(100% - 120px);\n    padding: 40px;\n  }\n"])),w.colors.veryDarkGrey,w.fonts.franklin,w.widths.verySmall,w.widths.medium,w.widths.mediumLarge),t.ctaContainer=(0,_.css)(o||(o=i(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  align-items: center;\n  min-width: 295px;\n\n  @media (min-width: 500px) {\n    min-width: unset;\n    width: 150px;\n    justify-content: center;\n    align-items: end;\n  =\n  }\n\n  @media (min-width: ","px) {\n    flex: 0;\n    margin-top: 0;\n  }\n"],["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  align-items: center;\n  min-width: 295px;\n\n  @media (min-width: 500px) {\n    min-width: unset;\n    width: 150px;\n    justify-content: center;\n    align-items: end;\n  =\n  }\n\n  @media (min-width: ","px) {\n    flex: 0;\n    margin-top: 0;\n  }\n"])),w.widths.medium),t.button=(0,_.css)(s||(s=i(["\n  text-decoration: none;\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 150%;\n  color: ",";\n  background-color: ",";\n\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  border-radius: 3px;\n  cursor: pointer;\n  width: 220px;\n  height: 44px;\n  padding: 10px;\n  letter-spacing: -0.05px;\n  flex: 0;\n\n  @media (min-width: ","px) {\n    width: calc(100% - 20px);\n  }\n\n  @media (min-width: 500px) {\n    width: 130px;\n  }\n\n  @media (min-width: ","px) {\n    align-self: left;\n    flex: 1;\n  }\n"],["\n  text-decoration: none;\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 150%;\n  color: ",";\n  background-color: ",";\n\n  display: flex;\n  flex-direction: column;\n  text-align: center;\n  border-radius: 3px;\n  cursor: pointer;\n  width: 220px;\n  height: 44px;\n  padding: 10px;\n  letter-spacing: -0.05px;\n  flex: 0;\n\n  @media (min-width: ","px) {\n    width: calc(100% - 20px);\n  }\n\n  @media (min-width: 500px) {\n    width: 130px;\n  }\n\n  @media (min-width: ","px) {\n    align-self: left;\n    flex: 1;\n  }\n"])),w.fontWeights.semiBold,w.colors.veryDarkGrey,w.colors.white,w.widths.verySmall,w.widths.medium),t.headerContainer=(0,_.css)(l||(l=i(["\n  align-self: start;\n  color: ",";\n  margin: 0 auto;\n\n  @media (min-width: ","px) {\n    margin: 0;\n  }\n"],["\n  align-self: start;\n  color: ",";\n  margin: 0 auto;\n\n  @media (min-width: ","px) {\n    margin: 0;\n  }\n"])),w.colors.white,w.widths.medium),t.headerLogo=(0,_.css)(c||(c=i(["\n  display: none;\n\n  @media (min-width: 845px) {\n    display: block;\n    & > svg {\n      width: 154px;\n      height: 20px;\n    }\n  }\n"],["\n  display: none;\n\n  @media (min-width: 845px) {\n    display: block;\n    & > svg {\n      width: 154px;\n      height: 20px;\n    }\n  }\n"]))),t.header=(0,_.css)(u||(u=i(["\n  font-family: ",";\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 131.25%;\n  margin-bottom: 16px;\n  text-align: left;\n  width: 100%;\n\n  @media (min-width: 500px) {\n    margin-bottom: 0px;\n  }\n\n  @media (min-width: 768px) {\n    max-width: 640px;\n  }\n\n  @media (min-width: ","px) {\n    font-size: 21px;\n    line-height: 119%;\n  }\n"],["\n  font-family: ",";\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 131.25%;\n  margin-bottom: 16px;\n  text-align: left;\n  width: 100%;\n\n  @media (min-width: 500px) {\n    margin-bottom: 0px;\n  }\n\n  @media (min-width: 768px) {\n    max-width: 640px;\n  }\n\n  @media (min-width: ","px) {\n    font-size: 21px;\n    line-height: 119%;\n  }\n"])),w.fonts.franklin,w.fontWeights.bold,w.widths.medium),t.subHeader=(0,_.css)(d||(d=i(["\n  display: inline;\n  font-family: ",";\n  font-size: 16px;\n  line-height: 131.25%;\n  font-weight: ",";\n\n  @media (min-width: ","px) {\n    font-size: 21px;\n    line-height: 119%;\n  }\n"],["\n  display: inline;\n  font-family: ",";\n  font-size: 16px;\n  line-height: 131.25%;\n  font-weight: ",";\n\n  @media (min-width: ","px) {\n    font-size: 21px;\n    line-height: 119%;\n  }\n"])),w.fonts.franklin,w.fontWeights.light,w.widths.medium),t.otherSubsClassName=(0,_.css)(p||(p=i(["\n  border-top: 1px solid ",";\n  right: 0px;\n"],["\n  border-top: 1px solid ",";\n  right: 0px;\n"])),w.colors.veryDarkGrey),t.otherSubsHeadingClassName=(0,_.css)(f||(f=i(["\n  width: 100%;\n  font-family: ",";\n  border-radius: 0;\n  transition: background-color 250ms linear, 0.15s padding ease-out;\n"],["\n  width: 100%;\n  font-family: ",";\n  border-radius: 0;\n  transition: background-color 250ms linear, 0.15s padding ease-out;\n"])),w.fonts.franklin),t.otherSubsHeadingClassStyle=(0,_.css)(m||(m=i(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 100%;\n  min-width: 244px;\n  max-width: 1248px;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n\n  margin: 0 20px;\n\n  @media (min-width: ","px) {\n    margin: 0 23px;\n  }\n\n  @media (min-width: 1262px) {\n    margin: 0 auto;\n  }\n"],["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 100%;\n  min-width: 244px;\n  max-width: 1248px;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n\n  margin: 0 20px;\n\n  @media (min-width: ","px) {\n    margin: 0 23px;\n  }\n\n  @media (min-width: 1262px) {\n    margin: 0 auto;\n  }\n"])),w.widths.medium),t.otherSubsCtaContainerStyle=(0,_.css)(h||(h=i(["\n  display: flex;\n  justify-content: space-between;\n  flex-direction: row;\n\n  width: 36px;\n\n  @media (min-width: ","px) {\n    width: 44.5px;\n  }\n\n  @media (min-width: 500px) {\n    width: 16px;\n  }\n"],["\n  display: flex;\n  justify-content: space-between;\n  flex-direction: row;\n\n  width: 36px;\n\n  @media (min-width: ","px) {\n    width: 44.5px;\n  }\n\n  @media (min-width: 500px) {\n    width: 16px;\n  }\n"])),w.widths.verySmall),t.otherSubsCtaActionTextContainerStyle=(0,_.css)(g||(g=i(["\n  display: none;\n"],["\n  display: none;\n"]))),t.otherSubsDividerStyle=(0,_.css)(y||(y=i(["\n  @media (min-width: 500px) {\n    display: none;\n  }\n"],["\n  @media (min-width: 500px) {\n    display: none;\n  }\n"]))),t.otherSubsCtaIconWrapperStyle=(0,_.css)(v||(v=i(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: transparent;\n\n  height: 55px;\n  z-index: 1;\n  border-width: 0px;\n  padding-inline: 0px;\n\n  svg {\n    height: 16px;\n    margin: auto 0px auto auto;\n    width: 16px;\n  }\n"],["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: transparent;\n\n  height: 55px;\n  z-index: 1;\n  border-width: 0px;\n  padding-inline: 0px;\n\n  svg {\n    height: 16px;\n    margin: auto 0px auto auto;\n    width: 16px;\n  }\n"]))),t.otherSubsHeaderWrapperStyle=(0,_.css)(b||(b=i(["\n  width: 100%;\n"],["\n  width: 100%;\n"])))},ARn7:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lwsE")),o=i(n("W8MJ")),s=i(n("7W2i")),l=i(n("a1gu")),c=i(n("Nsbk")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),d=(i(n("17x9")),i(n("FQbI")));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,l.default)(this,n)}}var m=function(e){(0,s.default)(n,e);var t=f(n);function n(){var e;(0,a.default)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return(0,o.default)(n,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?u.default.createElement(d.default,{ratio:this.props.ratio,width:this.props.width,height:this.props.height}):this.props.children}}]),n}(u.Component);t.default=m,m.defaultProps={ratio:"16:9",width:"600px",height:"auto"},m.displayName="ErrorBoundary"},ATQY:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.isAnyWorkLive=c,t.withDerivedLiveStatus=function(e){if(null==e?void 0:e.some((function(e){return(null==e?void 0:e.status)===o.PrimaryAssetStatus.LIVE})))return e;var t=null==e?void 0:e.findIndex((function(e){return c(null==e?void 0:e.asset)&&!(null!=e&&e.status)}));if(-1!==t){var n=(0,a.default)(e);return n[t]=l(l({},e[t]),{},{status:o.PrimaryAssetStatus.LIVE}),n}return e};var r=i(n("lSNA")),a=i(n("RIqP")),o=n("D5MC");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){var t;return Boolean((null==e?void 0:e.live)||(null==e?void 0:e.active)&&(null==e||null===(t=e.url)||void 0===t?void 0:t.includes("/live/")))}},AWLv:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("J4zp")),a=n("q1tI");t.default=function(e){var t=e.root,n=void 0===t?null:t,i=e.rootMargin,o=e.threshold,s=void 0===o?0:o,l=(0,a.useState)({}),c=(0,r.default)(l,2),u=c[0],d=c[1],p=(0,a.useState)(null),f=(0,r.default)(p,2),m=f[0],h=f[1],g="undefined"!=typeof window?(0,a.useRef)(new IntersectionObserver((function(e){var t=(0,r.default)(e,1)[0];return d(t)}),{root:n,rootMargin:i,threshold:s})):null;return(0,a.useEffect)((function(){var e=g.current;return e.disconnect(),m&&e.observe(m),function(){return e.disconnect()}}),[m,g]),[h,u]}},AWWW:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lwsE")),o=i(n("W8MJ")),s=i(n("7W2i")),l=i(n("a1gu")),c=i(n("Nsbk")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),d=(i(n("17x9")),i(n("PxMw"))),p=i(n("0oBV")),f=n("X+xt"),m=n("0gvE");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,l.default)(this,n)}}var y=function(e){(0,s.default)(n,e);var t=g(n);function n(){var e;(0,a.default)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleMessage=function(t){var n=e.props.setAttrs,i=t.data;t.origin===(0,f.getAttributeHost)()&&i&&e.intervalId&&i.postbackId===e.intervalId&&("received"===i.status?clearInterval(e.intervalId):"created"===i.status&&i.slug&&(n({attributeSlug:i.slug}),e.attributeWindow.close()))},e.postToAttribute=function(){e.attributeWindow=(0,f.openAttribute)(),e.intervalId=setInterval((function(){null!==e.attributeWindow.window?e.attributeWindow.postMessage((0,f.getAttributeConfig)(e.intervalId),(0,f.getAttributeHost)()):clearInterval(e.intervalId)}),1e3)},e}return(0,o.default)(n,[{key:"componentDidMount",value:function(){window.addEventListener("message",this.handleMessage)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("message",this.handleMessage)}},{key:"render",value:function(){var e=this.props,t=e.attributeSlug,n=e.children,i=e.isInAMP,r=e.isInHybrid;return i||r?null:u.default.createElement("div",null,u.default.createElement("div",{className:m.askWrapperClass},n),u.default.createElement("div",{className:m.attributeWrapperClass},t?u.default.createElement(u.default.Fragment,null,u.default.createElement("p",null,u.default.createElement("strong",null,"Attribute slug"),":"," ",t),u.default.createElement("p",null,"Change the existing Attribute slug by clicking the button below."),u.default.createElement("div",{className:m.buttonWrapperClass},u.default.createElement(d.default,{theme:"action",onClick:this.postToAttribute},"Update Attribute Slug"))):u.default.createElement(u.default.Fragment,null,u.default.createElement("p",null,u.default.createElement("strong",null,"No Attribute slug yet!")),u.default.createElement("p",null,"To complete the Ask block, click the button below to open Attribute, where youll be prompted to type a slug. Once youve completed that step, the Attribute window will close and Oak will be updated with the slug you created."),u.default.createElement("div",{className:m.buttonWrapperClass},u.default.createElement(d.default,{theme:"action",onClick:this.postToAttribute},"Get Attribute Slug")))))}}]),n}(u.Component);y.defaultProps={attributeSlug:null,isInAMP:!1,isInHybrid:!1},y.displayName="Ask";var v=(0,p.default)(y);t.default=v},Ae6e:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=i(n("J4zp")),s=y(n("q1tI")),l=(i(n("17x9")),n("Jqp9")),c=i(n("aanX")),u=n("3sMT"),d=n("p3S2"),p=i(n("ZHMA")),f=i(n("7GK/")),m=i(n("JwCr")),h=y(n("a/Il"));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function y(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=(0,s.forwardRef)((function(e,t){var n=e.arrowPosition,i=e.onCloseTooltip,r=e.storageKey,g=e.tooltipOpen,y=e.setTooltipOpen,v=e.className,_=e.totalTimesToShow,w=e.frequencyInHours,x=(0,s.useState)(!1),k=(0,o.default)(x,2),O=k[0],E=k[1],T=(0,s.useState)(!1),C=(0,o.default)(T,2),S=C[0],P=C[1],M=r||d.LIVE_ALERT_TOGGLE_DEFAULTS.tooltipStorageKey;(0,s.useEffect)((function(){var e;null!==(e=document)&&void 0!==e&&e.querySelector(".ANDROID")&&E(!0)}),[]);var I=(0,s.useCallback)((function(e){if(null==e||e.stopPropagation(),y(!1),!p.default)return null;var t=p.default.getItem(M),n={};return t&&(n=b(b({},n=JSON.parse(t)),{},{dismissed:!0})),i&&i(),p.default.setItem(M,JSON.stringify(n))}),[M,i,y]),A=(0,s.useCallback)((function(){var e,t={},n=p.default.getItem(M);return n?(t=JSON.parse(n)).seen<_&&(e=t.lastSeen,(0,f.default)().diff(e,"h")>=w)&&!t.dismissed&&(t={seen:t.seen+1,lastSeen:(0,f.default)(),dismissed:t.dismissed},p.default.setItem(M,JSON.stringify(t)),!0):(t={seen:1,dismissed:!1,lastSeen:(0,f.default)()},p.default.setItem(M,JSON.stringify(t)),!0)}),[M,w,_]);return(0,s.useEffect)((function(){S||(A()&&y(!0),P(!0))}),[S,A,y]),(0,s.useImperativeHandle)(t,(function(){return{closeTooltip:I}}),[I]),g&&s.default.createElement("div",{className:(0,l.cx)(h.tooltipClass,(0,a.default)({},h.arrowTopPositionClass,"top"===n),v)},s.default.createElement("div",{className:h.tooltipContentWrapperClass},s.default.createElement("p",{className:h.tooltipContentClass},"Turn on notifications to ",s.default.createElement(m.default,null,"receive alerts as stories develop")," in real-time."," ",O?"":"You can manage alerts in your apps settings."),s.default.createElement("button",{type:"button",className:h.closeIconButtonClass,onClick:I,"aria-label":"close alert toggle tooltip"},s.default.createElement(c.default,{className:h.closeIconClass,stroke:u.color.content.primary,strokeWidth:"1.5"}))))}));_.defaultProps={arrowPosition:"bottom",storageKey:void 0,onCloseTooltip:void 0,className:void 0,frequencyInHours:24,totalTimesToShow:3};var w=_;t.default=w},AeOL:function(e,t,n){"use strict";var i=n("gcR/"),r=n.n(i),a=n("q1tI"),o=n("fZdH"),s=n("boCj"),l=n("7VSS"),c=n("Lkij"),u=function(e){var t,n=e.testName,i=e.holdoutVariant,u=e.className,d=e.children,p=Object(o.a)(),f=Object(l.a)(),m=(null!==(t=null==p?void 0:p[n])&&void 0!==t?t:{}).variant,h=Object(a.useMemo)((function(){return new RegExp(i).test(m)}),[i,m]);if(!f)return r()("div",{className:u},void 0,d);return"function"==typeof d?r()(s.InView,{className:u,triggerOnce:!0},void 0,(function(e){var t=e.ref,n=e.inView;return d({isHoldout:h,ref:t,inView:n})})):r()(s.InView,{onChange:function(e){e&&Object(c.b)(n)},className:u,triggerOnce:!0},void 0,h?null:d)};u.displayName="WithHoldout",u.defaultProps={testName:void 0,className:void 0},t.a=u},AfrD:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("wnaz")).default;t.default=r},AhCu:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.opinionClass=t.newsletterNameContainerClass=t.newsletterNameClass=t.kickerContainerClass=t.headingClass=t.headerContainerClass=t.ampNewsletterNameClass=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=n("3sMT"),s=(0,r.css)("#header-onsite-newsletter-container{margin-top:0;",a.default.breakpoint.medium,"{margin-top:35px;}}");t.headerContainerClass=s;var l=(0,r.css)("font-family:",a.default.font.karnakBase,";font-weight:normal;text-transform:capitalize;font-size:",a.default.font.size(20.8),";line-height:",a.default.font.size(20.8),";margin-bottom:25px;text-align:center;",a.default.breakpoint.small,"{font-size:",a.default.font.size(24),";}");t.newsletterNameClass=l;var c=(0,r.css)("margin-top:0;");t.ampNewsletterNameClass=c;var u=(0,r.css)("border-bottom:1px solid ",o.color.stroke.quaternary,";display:flex;flex-direction:column;margin-bottom:25px;align-items:center;");t.newsletterNameContainerClass=u;var d=(0,r.css)("display:flex;flex-direction:column;align-items:center;margin-bottom:2px;#label-onsite-newsletter{font-family:",a.default.font.franklinBase,";font-size:",a.default.font.size(13),";line-height:",a.default.font.size(24),";",a.default.breakpoint.small,"{line-height:",a.default.font.size(14.4),";}}");t.kickerContainerClass=d;var p=(0,r.css)("& [href*='opinion']{margin-bottom:13px;display:inline-block;}margin-bottom:13px;");t.opinionClass=p;var f=(0,r.css)("#header-onsite-newsletter-headline h1::before{display:none;}");t.headingClass=f},ApQM:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.showNewsStatus=t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),i(n("I0Yx"))),o=["BREAKING","DEVELOPING"],s=function(e){return e&&o.includes(e.toUpperCase())};t.showNewsStatus=s;var l=function(e){var t=e.newsStatus;return s(t)?r.default.createElement(a.default,null,t):null};l.defaultProps={newsStatus:"STANDARD"};var c=l;t.default=c},AtQq:function(e,t,n){"use strict";n.d(t,"a",(function(){return ji})),n.d(t,"c",(function(){return Li})),n.d(t,"b",(function(){return Ri}));var i,r=n("VkAN"),a=n.n(r),o=n("eFc+"),s=n.n(o),l=n("JtDR"),c=n("NVrK"),u=n("C+GW"),d=n("Ymd4"),p=n("EssT"),f=n("4T40"),m=n("gcR/"),h=n.n(m),g=n("q1tI"),y=n.n(g),v=n("7E81"),b=n.n(v),_=function(e){var t=e.data;return t?h()(b.a,{columnsMobile:t.columnsMobile,gutterMobile:t.gutterMobile,columnsDesktop:t.columnsDesktop,gutterDesktop:t.gutterDesktop,size:t.size,caption:t.caption,credit:t.credit,media:t.gridMedia}):null};_.displayName="GridBlock",_.fragments={data:s()(i||(i=a()(['\n    fragment GridBlock_data on GridBlock {\n      columnsMobile\n      gutterMobile\n      columnsDesktop\n      gutterDesktop\n      size\n      caption\n      credit\n      gridMedia: media {\n        id\n        ... on Image {\n          __typename\n          id\n          imageType\n          url\n          uri\n          credit\n          legacyHtmlCaption\n          altText\n          crops(\n            renditionNames: [\n              "articleLarge"\n              "jumbo"\n              "superJumbo"\n              "popup"\n              "square320"\n              "mobileMasterAt3x"\n            ]\n          ) {\n            name\n            renditions {\n              url\n              name\n              width\n              height\n            }\n          }\n          caption {\n            text\n          }\n        }\n      }\n    }\n  '])))};var w,x=_,k=n("WPUH"),O=n("3ywf"),E=n("H1QR"),T=n("IX5K"),C=n("wB9J"),S=n("pVnL"),P=n.n(S),M=n("tA6d"),I=n.n(M),A=n("Kn2l"),j=n("Ogzn"),L=n("369f"),R=n("B2Q+"),N=n("XlcC"),D=n.n(N),B=n("HTd6"),z=function(e,t){if(!Array.isArray(e)||!e.length)return null;var n=Object(N.createMapInlineUnionWithOptions)({internalLinkTrackingParams:t});return e.map(n)},F=function(e){var t,n,i,r=e.data,a=e.className,o=e.linkTrackingParamOverrides,s=e.renderRelated,l=e.isLazy,c=e.showImageCredits;if(!r)return null;var u,d={displayStyle:(null==r||null===(t=r.editableRelatedLinksDisplayStyle)||void 0===t?void 0:t.toLowerCase())||"standard",title:z(null==r||null===(n=r.header)||void 0===n?void 0:n.title),description:z(null==r||null===(i=r.header)||void 0===i?void 0:i.description),related:(u=null==r?void 0:r.writtenThruRelated,Array.isArray(u)?!u.length>0?[]:null==u?void 0:u.map((function(e){var t,n=(null==e?void 0:e.related)||null;if(!n)return null;var i=(null==n?void 0:n.promotionalMedia)||null,r=(null==n?void 0:n.promotionalHeadline)||"",a=(null==n?void 0:n.promotionalSummary)||"",o=(null==n?void 0:n.headline)||{default:"",seo:""},s=(null==n?void 0:n.url)||"",l=(null==n?void 0:n.summary)||"",c=null==n?void 0:n.targetUrl,u=null==n?void 0:n.firstPublished,d=(null==e||null===(t=e.writeThruHeadline)||void 0===t?void 0:t.map((function(e){return e.text})).join(""))||null;return{headline:{default:d||(null==o?void 0:o.default),seo:d||(null==o?void 0:o.seo)},summary:l,promotionalHeadline:r,promotionalSummary:a,targetUrl:c,url:s,firstPublished:u,promotionalMedia:i}})).filter((function(e){return null!==e})):[])},p={className:a,linkTrackingParamOverrides:o,renderRelated:s,isLazy:l,showImageCredits:c,data:d},f=p.data,m=f.displayStyle,g=f.title,v=f.description,b=f.related;if(!b.length>0)return null;var _=b.map((function(e){var t,n,i,r,a,o=(null==e||null===(t=e.promotionalMedia)||void 0===t?void 0:t.credit)||(null==e||null===(n=e.promotionalMedia)||void 0===n||null===(i=n.promotionalMedia)||void 0===i?void 0:i.credit),s=(null==e||null===(r=e.headline)||void 0===r?void 0:r.default)||(null==e?void 0:e.promotionalHeadline),l=null==e?void 0:e.url,c=null==e?void 0:e.firstPublished;return y.a.createElement(j.a,P()({},p,{displayStyle:m,headline:s,summary:null,media:null===(a=Object(j.b)(e))||void 0===a?void 0:a.url,caption:o,url:l,pubDate:c}))}));return h()(L.a,{offset:500,isLazy:!!l&&!Object(R.b)()},void 0,y.a.createElement(I.a,P()({},p,{related:_,displayStyle:m,className:a}),g&&h()(A.RelatedLinksHeadline,{},void 0,g),v&&h()(A.RelatedLinksDescription,{},void 0,v)))};F.displayName="EditableRelatedLinksBlock",F.defaultProps={data:null,className:void 0,linkTrackingParamOverrides:{},renderRelated:void 0,isLazy:!0,showImageCredits:!1},F.fragments={data:s()(w||(w=a()(["\n    fragment EditableRelatedLinksBlock_data on EditableRelatedLinksBlock {\n      linkCount\n      editableRelatedLinksDisplayStyle: displayStyle\n      header {\n        isDisplayed\n        title {\n          ...TextInline_content\n        }\n        description {\n          ...TextInline_content\n        }\n      }\n      writtenThruRelated {\n        kicker\n        related {\n          ...SharedRelatedLinkBlock_data\n        }\n        promotionalProperties {\n          media {\n            __typename\n          }\n        }\n        writeThruHeadline {\n          ...TextInline_content\n        }\n      }\n    }\n    ","\n    ","\n  "])),B.a.fragments.content,j.a.fragments.data)};var U,H=F,W=n("4nBj"),q=n("uoyi"),V=n("Oc+P"),G=n("uc/3"),Y=n("4r6p"),Z=n("Vn11"),X=n("DpJz"),J=n("rNEd"),K=n("yEZI"),$=n.n(K);function Q(e){var t=e.data.legacyTableHtml,n=e.className;return h()($.a,{className:n},void 0,h()("div",{dangerouslySetInnerHTML:{__html:t}}))}Q.displayName="LegacyTableBlock",Q.defaultProps={data:null,className:void 0},Q.fragments={data:s()(U||(U=a()(["\n    fragment LegacyTableBlock_data on LegacyTableBlock {\n      legacyTableHtml: html\n    }\n  "])))};var ee,te=n("5OxE"),ne=n("aVGo"),ie=n.n(ne),re=n("Jqp9"),ae=n("V7ea"),oe={ImageBlock:k.a,VideoBlock:G.a},se=function(e){var t=e.data;if(!t)return null;var n=oe[t.__typename];if(function(e){return"ImageBlock"===e.__typename}(t)){var i=Object(re.cx)(ae.vsMediaClass,ae.vsMediaImageBlockCreditClass);return y.a.createElement(n,{data:t,className:i,imageBlockClass:i,imageClass:i,containerClass:i,showCaption:!1})}return function(e){return"VideoBlock"===e.__typename}(t)?y.a.createElement(n,{data:t,className:ae.vsMediaClass,creditClass:ae.vsMediaViVideoBlockCreditClass,showCaption:!1}):null};se.fragments={data:s()(ee||(ee=a()(["\n    fragment VisualStackBlockMedia_data on VisualStackBlockMedia {\n      __typename\n      ...ImageBlock_data\n      ...VideoBlock_data\n    }\n\n    ","\n    ","\n  "])),k.a.fragments.data,G.a.fragments.data)};var le,ce=se,ue=function(e){var t,n,i=e.data;if(!(i&&i.content&&i.vsMedia))return null;var r=i.heading,a=i.vsLabel,o=i.content,s=i.vsMedia,l=null!=r&&r.content&&r.content.length>0?null===(t=r.content[0])||void 0===t?void 0:t.text:"",c=null!=a&&a.content&&a.content.length>0?null===(n=a.content[0])||void 0===n?void 0:n.text:"";return h()(ie.a,{content:o,heading:l,label:c},void 0,h()(ce,{data:s}))};ue.displayName="VisualStackBlock",ue.fragments={data:s()(le||(le=a()(["\n    fragment VisualStackBlock_data on VisualStackBlock {\n      content {\n        __typename\n        ...ParagraphBlock_data\n      }\n      vsMedia: media {\n        __typename\n        ...VisualStackBlockMedia_data\n      }\n      heading {\n        __typename\n        ...Heading2Block_data\n      }\n      vsLabel: label {\n        __typename\n        ...ParagraphBlock_data\n      }\n    }\n\n    ","\n  "])),ce.fragments.data)};var de,pe,fe=ue,me=n("VUHb"),he=n("zIxd"),ge=n("P3/q"),ye=n("Yh38"),ve=n("lSNA"),be=n.n(ve),_e=n("qf1F"),we=n.n(_e);function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){be()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oe=function(e){var t=e.data,n=e.article,i=e.className,r=n.url,a=n.firstPublished;return y.a.createElement(we.a,ke(ke({className:i},t),{},{claimReviewUrl:r,firstPublished:a,content:t.content.map(D.a),contentMetadata:t.content.map((function(e){return e.text})).join("")}))};Oe.defaultProps={article:null,className:void 0},Oe.fragments={article:s()(de||(de=a()(["\n    fragment ClaimReviewBlock_article on Article {\n      id\n      url\n      firstPublished\n    }\n  "]))),data:s()(pe||(pe=a()(["\n    fragment ClaimReviewBlock_data on ClaimReviewBlock {\n      alternateRating\n      claim\n      claimDate\n      claimReviewUrl\n      claimUrl\n      content {\n        ...TextInline_content\n      }\n      firstPublished\n      hideClaim\n      rating\n      source\n    }\n    ","\n  "])),B.a.fragments.content)};var Ee=Oe,Te=n("J4zp"),Ce=n.n(Te),Se=n("xHA4"),Pe=n("4mEQ"),Me=n("fZdH"),Ie=n("pCca"),Ae=n("boCj"),je=n("6NOd"),Le=n("6Gip"),Re=n("NW2b"),Ne=n("Gs79"),De=n("d3NK");function Be(e){var t=e.dropzone,n=Object(Ne.a)().overlays.truncator,i=Object(Ie.a)().deviceType,r=void 0===i?"smartphone":i,a=Object(je.b)(),o=Object(g.useState)(!1),s=Ce()(o,2),l=s[0],c=s[1],u=Object(g.useState)(!1),d=Ce()(u,2),p=d[0],f=d[1],m=Object(g.useState)(0),y=Ce()(m,2),v=y[0],b=y[1],_=Object(g.useState)(0),w=Ce()(_,2),x=w[0],k=w[1];if(Object(g.useEffect)((function(){window.matchMedia("(min-width: ".concat("730px",")")).matches||!t.adsDesktop||t.adsMobile?(t.adsDesktop||t.adsMobile)&&(t.adsDesktop&&(a.adCounter.desktopAdPosition+=1,k(a.adCounter.desktopAdPosition)),t.adsMobile&&(a.adCounter.mobileAdPosition+=1,b(a.adCounter.mobileAdPosition)),f(!0)):c(!0)}),[a.adCounter,t.adsDesktop,t.adsMobile]),Object(g.useEffect)((function(){return function(){v&&(a.adCounter.mobileAdPosition-=1),x&&(a.adCounter.desktopAdPosition-=1)}}),[x,v,a.adCounter]),l)return null;if(!p)return null;if(null!=n&&n.exists&&(null==n||!n.ready||"acm"===(null==n?void 0:n.mode)&&null!=n&&n.visible))return null;var O="smartphone"===r;if(O&&t.adsMobile||!O&&t.adsDesktop){var E=O?v:x;return h()(De.a,{sequence:E,dropzone:t})}return null}Be.defaultProps={dropzone:{}};var ze,Fe=Be,Ue=Se.storyPageTests.ONE_MODULE_TEST;function He(e){var t,n=e.data,i=e.sequence,r=e.supplementalCount,a=e.dropzoneContents,o=e.article,s=e.welcomeBannerSubsDZComponent,l=e.welcomeBannerRegiDZComponent,c=Object(Me.a)(),u=Object(Ie.a)().deviceType,d=void 0===u?"smartphone":u,p=Object(je.b)(),f=p.setCompanionFlags,m=p.getCompanionFlags,v=p.welcomeBanners,b=Object(g.useState)(!1),_=Ce()(b,2),w=_[0],x=_[1];Object(g.useEffect)((function(){x(!0)}),[]);var k=null==c||null===(t=c[Ue.name])||void 0===t?void 0:t.variant,O=m();if(n.adsDesktop&&null===O.placedFirstAd&&f({placedFirstAd:{position:r,dropzoneIndex:n.index}}),w){var E,T,C,S;if("smartphone"===d&&n.adsMobile||"smartphone"!==d&&n.adsDesktop)null===v.regiDZIndex&&n.index>(null===(E=O.placedFirstAd)||void 0===E?void 0:E.dropzoneIndex)&&(v.regiDZIndex=n.index);if(n.adsMobile||n.adsDesktop)return null!=s&&null!==(T=s.props)&&void 0!==T&&T.showWelcomeBannerSubs&&O.placedFirstAd.dropzoneIndex===n.index?y.a.cloneElement(s,{messageCap:s.props.messageCap,parentUrl:null==o?void 0:o.url,parentUri:null==o?void 0:o.uri,pageType:Le.a}):null!=l&&null!==(C=l.props)&&void 0!==C&&C.showWelcomeBannerRegi&&n.index===v.regiDZIndex?y.a.cloneElement(l,{messageCap:l.props.messageCap,parentUrl:null==o?void 0:o.url,parentUri:null==o?void 0:o.uri,pageType:Le.a}):"podcasts"===(null==o||null===(S=o.section)||void 0===S?void 0:S.name)?null:h()(Fe,{sequence:i,dropzone:n})}var P=a[n.index.toString()];return P?h()(Ae.InView,{onChange:function(e){Boolean(k)&&!Object(Pe.isOpinion)(null==o?void 0:o.section)&&e&&Object(Re.e)(Ue.name)},triggerOnce:!0},void 0,P):null}He.fragments={data:s()(ze||(ze=a()(["\n    fragment Dropzone_data on Dropzone {\n      index\n      bad\n      adsMobile\n      adsDesktop\n    }\n  "])))},He.defaultProps={sequence:null,supplementalCount:9999,dropzoneContents:{},article:{},welcomeBannerSubsDZComponent:null,welcomeBannerRegiDZComponent:null};var We,qe=He,Ve=n("X6oL"),Ge=n("s5tu"),Ye=n("gX7T"),Ze=n.n(Ye),Xe=n("0Rhs"),Je=n("534C"),Ke=n.n(Je),$e=n("Zc/f"),Qe=n.n($e),et=n("z0L9"),tt=n.n(et),nt=n("hU1o"),it=n("xn0n"),rt=n("Kjui"),at=n("OLAn"),ot=n("axlb"),st=n("mGV9"),lt=n("jOYC"),ct=n("XMNT"),ut=n.n(ct),dt=Object(re.themeFn)("languageDirection",{none:Object(re.css)("margin-right:1rem;"),rightToLeft:Object(re.css)("margin-left:1rem;")}),pt=Object(re.styled)(ut.a,{target:"ep4cyha0"})("display:block;margin:0;",(function(e){return e.inHeader?null:"margin-bottom: 1rem;"}),";",dt,";"),ft=function(e){var t=e.data,n=e.className,i=e.lastMajorModification,r=e.inHeader;if(!t)return null;var a=t.align?t.align.toLowerCase():null;return h()(pt,{className:Object(re.cx)(n,lt.b.layout.textAlign[a]||null),lastMajorModification:i,inHeader:r},void 0,t.timestamp)};ft.displayName="TimestampBlock",ft.defaultProps={className:void 0,lastMajorModification:null,inHeader:!1},ft.fragments={data:s()(We||(We=a()(["\n    fragment TimestampBlock_data on TimestampBlock {\n      timestamp\n      align\n      showUpdatedTimestamp\n    }\n  "])))};var mt,ht,gt=ft,yt=n("InUh"),vt=n.n(yt),bt=n("MKiQ"),_t=n.n(bt),wt=n("XMA8"),xt=n("pVYW"),kt=n("8npY"),Ot=n.n(kt),Et=n("ZKN5"),Tt=n("60yG"),Ct=n.n(Tt),St=n("9dx5"),Pt=n("wXC7"),Mt=n.n(Pt),It=n("3sMT"),At=Object(re.css)("margin:30px auto;border-bottom:1px solid ",It.color.stroke.quaternary,";",Mt.a.breakpoint.small,"{border-bottom:1px solid transparent;}"),jt=vt()((function(){return Promise.all([n.e(162),n.e(135)]).then(n.bind(null,"qOx7"))}),{loadableGenerated:{webpack:function(){return["qOx7"]},modules:["./SharedSlideshowInline"]}});function Lt(e){var t=e.data,n=Object(g.useRef)(null),i=Object(Ve.useTracking)({module:{name:"Slideshow"},version:"Inline"}),r=i.Track,a=i.trackEvent,o=function(e){(function(){try{return navigator.userAgent.ua.indexOf("MSIE ")>-1||navigator.userAgent.ua.indexOf("Trident/")>-1}catch(e){return!1}})()||setTimeout((function(){a(e)}),500)},s={slideView:function(e){var n,i=e.onImg,r=e.prevImg,a=e.numOfSlides,s=e.numOfSwipes,l=e.entrySlide;o({event:"moduleInteraction",eventData:{type:"click"},module:{region:"body"},slideshow:{currentSlide:i,previousSlide:r,lengthOfSlide:a,numOfSwipes:s,entrySlide:l,slideShowTitle:null===(n=t.media.headline)||void 0===n?void 0:n.default}})},view:function(){var e;o({event:"impression",module:{region:"body"},slideshow:{slideShowTitle:null===(e=t.media.headline)||void 0===e?void 0:e.default}})}};if(Object(g.useEffect)((function(){var e=Ct()(s.view),t=n.current,i=new IntersectionObserver((function(t){return!!Ce()(t,1)[0].isIntersecting&&e()}),{rootMargin:"0px",threshold:.9});return t&&i.observe(t),function(){t&&i.unobserve(t)}}),[]),!t||!t.media)return null;var l=Object(St.mapDataToProps)(t.media),c=l.title,u=l.images;if(u.length<1)return null;var d=Ot.a[t.size];return h()(r,{},void 0,y.a.createElement("div",{className:Object(re.cx)(xt.f,d),ref:n},h()(jt,{title:c,images:u,track:s})),mt||(mt=h()("div",{className:At})))}Lt.displayName="SlideshowEmbedded",Lt.fragments={data:s()(ht||(ht=a()(["\n    fragment SlideshowEmbedded_data on SlideshowSlide {\n      legacyHtmlCaption\n      image {\n        id\n        credit\n        summary\n        uri\n        crops(cropNames: [MASTER, THREE_BY_TWO, MOBILE_MASTER]) {\n          name\n          renditions {\n            url\n            name\n            width\n            height\n          }\n        }\n      }\n    }\n  "])))};var Rt,Nt=Object(Et.a)(Lt),Dt=Object(re.css)(Mt.a.breakpoint.small,"{border-top:1px solid ",It.dark.colors.stroke.primary.transform(Mt.a.setAlpha(.33)).rgba,";padding-top:24px;}"),Bt=Object(re.css)("position:relative;"),zt=Object(re.styled)(k.a,{target:"ewenx680"})("width:100%;opacity:1;transition:opacity 0.15s;backface-visibility:hidden;z-index:0;margin-bottom:0;margin-top:15px;",Mt.a.breakpoint.small,"{margin:15px auto 0;width:100%;&.sizeMedium{margin:15px auto 0;width:100%;}}"),Ft=Object(re.css)("width:100%;height:100%;max-height:150px;position:absolute;z-index:1;left:0;right:0;bottom:0;background:linear-gradient( transparent,",It.dark.colors.overlay.black.transform(Mt.a.setAlpha(.7)).rgba," );@media (max-width:",Mt.a.breakpoint.width.small,"px){background:linear-gradient( transparent,",It.dark.colors.overlay.black.transform(Mt.a.setAlpha(.7)).rgba," );}"),Ut=Object(re.css)("position:absolute;width:90%;bottom:51px;z-index:2;left:0;right:0;margin:auto;@media (max-width:",Mt.a.breakpoint.width.small,"px){bottom:45px;}"),Ht=Object(re.css)("color:",It.dark.colors.content.primary.hex,";font-family:",Mt.a.font.serifMedium,";font-size:",Mt.a.font.size(22),";line-height:",Mt.a.font.size(24),";font-weight:",Mt.a.font.weight.medium,";margin-bottom:12px;-webkit-font-smoothing:antialiased;",Mt.a.breakpoint.medium,"{font-size:",Mt.a.font.size(24),";line-height:",Mt.a.font.size(28),";margin-bottom:19px;}"),Wt=Object(re.css)("font-family:",Mt.a.font.franklinBase,";font-size:",Mt.a.font.size(13),";line-height:",Mt.a.font.size(13),";color:",It.dark.colors.content.primary.hex,";font-weight:",Mt.a.font.weight.medium,";display:inline-block;padding-right:0.75rem;vertical-align:middle;position:relative;letter-spacing:0.03em;&:first-child{background-image:url('","/vi-assets/static-assets/icon-slideshow-47beff4d2fe2169a60e0c3f92e469bc9.svg","');background-repeat:no-repeat;display:inline-block;width:24px;height:20px;",Mt.a.breakpoint.medium,"{width:30px;height:25px;font-size:",Mt.a.font.size(15),";line-height:",Mt.a.font.size(15),";}}&:last-child{border-left:1px solid ",It.dark.colors.stroke.primary.transform(Mt.a.setAlpha(.33)).rgba,";padding-left:0.75rem;}"),qt=Object(re.css)("font-size:1rem;vertical-align:middle;position:absolute;right:4px;bottom:0;transition:right 0.18s ease-out;"),Vt=Object(re.styled)("div",{target:"ewenx681"})("position:relative;&:hover{",zt,"{opacity:0.8;}.",qt,"{right:0;}}"),Gt=vt()((function(){return Promise.all([n.e(158),n.e(122)]).then(n.bind(null,"RZh6"))}),{loadableGenerated:{webpack:function(){return["RZh6"]},modules:["shared/ProducerNotes"]}}),Yt=Vt,Zt=zt,Xt=xt.a.withComponent("div",{target:"efyb8hk0"}),Jt=function(e){var t,n=e.article,i=e.data,r=e.className,a=e.lazyLoad;if(!(i.size&&i.media&&i.media.slides&&i.media.promotionalMedia))return null;var o=null==n||null===(t=n.section)||void 0===t?void 0:t.name,s=i.media,l=s.displayProperties,c=void 0===l?{}:l,u=s.promotionalMedia;if(!Object(wt.h)(u,"slideshowCrops"))return null;if("Embedded-Only Slideshow"===c.template)return h()("the-weekly"===o?Gt:Nt,{data:i});var d=i.media.slides.length,p=Ot.a[i.size],f=u.credit||"",m=u.slideshowCrops[0].renditions,g=m[m.length-1].url,y=u.slideshowCrops[0].renditions[0],v=y.height>=y.width?"layoutVertical":"layoutHorizontal",b={media:{caption:{text:""},crops:u.slideshowCrops,id:i.id,imageType:"photo",url:g},size:i.size,__typename:i.__typename};return h()(Yt,{className:Object(re.cx)(xt.f,p,v,r)},void 0,h()("a",{href:i.media.url},void 0,h()("div",{className:Ut},void 0,h()("h2",{className:Ht},void 0,i.media.headline.default),h()("div",{className:Dt},void 0,h()("p",{className:Wt}),h()("p",{className:Wt},void 0,"".concat(d," Photos")),h()("p",{className:Wt},void 0,"View Slide Show ",h()("span",{className:qt},void 0,"")))),h()("div",{className:Bt},void 0,h()("div",{className:Ft}),h()(Zt,{data:b,lazyLoad:a,useResponsiveMedia:!0}))),h()(Xt,{},void 0,h()(_t.a,{},void 0,f)))};Jt.displayName="SlideshowBlock",Jt.defaultProps={className:void 0,lazyLoad:!0},Jt.fragments={data:s()(Rt||(Rt=a()(['\n    fragment SlideshowBlock_data on SlideshowBlock {\n      size\n      media {\n        id\n        displayProperties {\n          template\n        }\n        promotionalMedia {\n          ... on Image {\n            id\n            credit\n            url\n            slideshowCrops: crops(renditionNames: ["articleLarge", "jumbo", "superJumbo"]) {\n              renditions {\n                url\n                width\n                height\n              }\n            }\n          }\n        }\n        url\n        headline {\n          default\n        }\n        summary\n        slides {\n          ...SlideshowEmbedded_data\n        }\n      }\n    }\n    ',"\n  "])),Nt.fragments.data)};var Kt,$t,Qt,en=Jt,tn=n("Q3jP");function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(n),!0).forEach((function(t){be()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var an={ImageBlock:k.a,VideoBlock:G.a,SlideshowBlock:en,InteractiveBlock:E.a,CardDeckBlock:te.a};function on(e){var t=e.article,n=e.data,i=e.showDatelessTimestamp,r=Object(Ve.useTracking)({module:{region:"header"}}).Track,a=Object(nt.a)().getReferrer,o=Object(re.useTheme)(),s=Object(Me.a)(),l=tt()({abra:s,reportExposure:Re.e}),c=Ce()(l,2),u=c[0],d=c[1],p=n.ledeMedia&&an[n.ledeMedia.__typename]?an[n.ledeMedia.__typename]:"",f=n.ledeMedia&&"ImageBlock"===n.ledeMedia.__typename,m=t.lastMajorModification,g="";t&&(g=t.newsStatus);var y,v=t&&t.collections,b=h()(Ke.a,{collections:v}),_=h()(rt.b,{share:t,isOpinion:"opinion"===(null==o?void 0:o.section),hasMedia:!(!n.ledeMedia||!an[n.ledeMedia.__typename])||void 0}),w=h()(p,{className:Xe.headerMediaClass,data:n.ledeMedia,autoplayOverride:a&&(y=a(),!y||!Object(Ge.isInternalLink)(y)),lede:!0,useResponsiveMedia:!0,usePhotoViewer:f,imageNumber:f?1:null,lazyLoad:!1,useMobileCrop:f}),x=i?rn(rn({},n.timestampBlock),{},{timestamp:m}):n.timestampBlock;return h()(r,{},void 0,h()(Ze.a,{isOak:!0,article:t,byline:n.byline,headline:n.headline,timestampBlock:x,lastMajorModification:m,summary:n.summary,latestUpdate:n.latestUpdate,shareTools:_,label:n.label,image:n.ledeMedia,media:w,newsStatus:g,timesExclusive:b,translations:t.translations,sponsoredByAd:Kt||(Kt=h()(De.a,{id:"sponsor"})),brandBar:h()(it.a,{asset:t}),associatedNewsletter:t.associatedNewsletter,showReadingTime:d,readingTimeRef:u}),t.reviewItems&&t.reviewItems.length>0&&h()(tn.a,{article:t}),!(null!=o&&o.isShortForm)&&h()(ot.a,{region:Qe.a.ABOVE_MAIN_CONTENT,associatedAssets:t.associatedAssets}))}on.displayName="HeaderBasic",on.fragments={data:s()($t||($t=a()(["\n    fragment HeaderBasicBlock_data on HeaderBasicBlock {\n      label {\n        ...LabelBlock_data\n      }\n      headline {\n        ...Heading1Block_data\n      }\n      summary {\n        ...SummaryBlock_data\n      }\n      ledeMedia {\n        __typename\n        ...ImageBlock_data\n        ...VideoBlock_data\n        ...SlideshowBlock_data\n        ...InteractiveBlock_data\n        ...CardDeckBlock_data\n      }\n      byline {\n        ...BylineBlock_data\n        ... on BylineBlock {\n          bylines {\n            prefix\n          }\n        }\n      }\n      summary {\n        ...SummaryBlock_data\n      }\n      timestampBlock {\n        ...TimestampBlock_data\n        showUpdatedTimestamp\n      }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n  "])),st.a.fragments.data,d.a.fragments.data,q.a.fragments.data,k.a.fragments.data,E.a.fragments.data,te.a.fragments.data,G.a.fragments.data,ye.a.fragments.data,gt.fragments.data,en.fragments.data),article:s()(Qt||(Qt=a()(["\n    fragment HeaderBasic_article on Article {\n      id\n      translations {\n        ...TranslationLinks_translations\n      }\n      collections @filterEmpty {\n        id\n        type\n        slug\n        collectionType\n      }\n      ...ReviewHeader_article\n      ...ShareToolbar_share\n    }\n    ","\n    ","\n    ","\n  "])),rt.b.fragments.share,tn.a.fragments.article,at.a.fragments.translations)},on.defaultProps={article:null,showDatelessTimestamp:!1};var sn,ln,cn,un=on,dn=n("OB6K"),pn=n.n(dn),fn=n("B05M"),mn=n.n(fn),hn=n("JJ2H"),gn=Object(re.css)("margin-bottom:20px;"),yn=Object(re.css)("margin-bottom:0;"),vn=Object(re.css)("max-width:600px;width:calc(100% - 40px);margin:35px 20px 16px;font-family:",Mt.a.font.serifBase,";font-size:",Mt.a.font.size(18),";line-height:",Mt.a.font.size(25),";",Mt.a.breakpoint.small,"{width:100%;margin:50px auto 16px;font-size:",Mt.a.font.size(20),";line-height:",Mt.a.font.size(30),";}"),bn=Object(re.css)("font-style:italic;text-decoration:underline;color:",It.color.signal.editorial,";&:hover{text-decoration:none;}");var _n={ImageBlock:k.a,VideoBlock:G.a,InteractiveBlock:E.a,SlideshowBlock:en};function wn(e){var t,n,i=e.article,r=e.data,a=e.className,o=Object(Ve.useTracking)({module:{region:"header"}}).Track,s=Object(re.useTheme)(),l=Object(nt.a)().getReferrer,c=!(n=l())||!Object(Ge.isInternalLink)(n),u=r.ledeMedia&&_n[r.ledeMedia.__typename]?_n[r.ledeMedia.__typename]:"",p=!!u,f=u&&"ImageBlock"===r.ledeMedia.__typename?r.ledeMedia.size:"",m=p&&"ImageBlock"===r.ledeMedia.__typename,g=s&&s.section||"default",v=!!r.summary,b=i&&i.displayProperties&&i.displayProperties.serveAsNyt4,_=i&&i.url,w=i.lastMajorModification,x=_?"https://archive.nytimes.com/".concat(_.replace(/^https?:\/\//,"")):"",k="";i&&(k=i.newsStatus);var O=i&&i.collections,E=h()(Ke.a,{collections:O}),T=h()(Xe.BylineTimestamp,{"data-testid":"byline-timestamp",className:a},void 0,r.byline&&h()(ye.a,{data:r.byline,article:i,timestamp:r.timestampBlock,headerPresent:"Legacy"}),!r.byline&&r.timestampBlock&&h()(gt,{data:r.timestampBlock,lastMajorModification:w,inHeader:!0}),i.translations&&h()(at.a,{translations:i.translations})),C=i.reviewItems&&i.reviewItems.length>0,S=r.ledeMedia&&p&&h()(u,{data:r.ledeMedia,lazyLoad:!1,className:Object(re.cx)(Xe.headerMediaClass,(t={},be()(t,gn,C),be()(t,Xe.smallMediaClass,"SMALL"===f),be()(t,yn,!C&&"SMALL"===f),t)),lede:!0,autoplayOverride:c,useResponsiveMedia:!0,usePhotoViewer:m,imageNumber:m?1:null}),P=function(e){if(!e.label)return!1;var t,n;try{if(1!==e.byline.bylines[0].creators.length)return!0;t=e.label.content[0].text,n=e.byline.bylines[0].creators[0].displayName}catch(e){return!0}return t!==n}(r);return h()(pn.a,{theme:{opinionHeaderRedesign:!1}},void 0,h()(o,{},void 0,h()(mn.a,{hasSummary:v},void 0,sn||(sn=h()(De.a,{id:"sponsor"})),h()(it.a,{asset:i}),P&&h()(st.a,{data:r.label,className:a,newsStatus:k,timesExclusive:E}),r.headline&&h()(d.a,{data:r.headline,className:a}),r.summary&&h()(q.a,{data:r.summary,className:a}),"SMALL"===f||"opinion"===g?y.a.createElement(y.a.Fragment,null,T,h()(rt.b,{share:i,position:hn.a.HEADER,className:a,isOpinion:!0,hasMedia:r.ledeMedia&&p}),S,C&&h()(tn.a,{article:i})):y.a.createElement(y.a.Fragment,null,h()(rt.b,{share:i,position:hn.a.HEADER,className:a,isOpinion:!0,hasMedia:r.ledeMedia&&p}),S,C&&h()(tn.a,{article:i}),T),b&&h()("div",{className:vn},void 0,h()("a",{className:bn,href:x},void 0,"See how this article appeared when it was originally published on NYTimes.com.")))))}wn.displayName="HeaderLegacy",wn.defaultProps={article:null,data:{},className:void 0},wn.fragments={data:s()(ln||(ln=a()(["\n    fragment HeaderLegacyBlock_data on HeaderLegacyBlock {\n      subhead {\n        ...Heading2Block_data\n      }\n      label {\n        ...LabelBlock_data\n      }\n      headline {\n        ...Heading1Block_data\n      }\n      ledeMedia {\n        __typename\n        ... on ImageBlock {\n          size\n        }\n        ...ImageBlock_data\n        ...VideoBlock_data\n        ...InteractiveBlock_data\n        ...SlideshowBlock_data\n      }\n      byline {\n        ...BylineBlock_data\n        ... on BylineBlock {\n          bylines {\n            prefix\n          }\n        }\n      }\n      timestampBlock {\n        ...TimestampBlock_data\n      }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n  "])),E.a.fragments.data,en.fragments.data,d.a.fragments.data,p.a.fragments.data,st.a.fragments.data,k.a.fragments.data,G.a.fragments.data,ye.a.fragments.data,gt.fragments.data),article:s()(cn||(cn=a()(["\n    fragment HeaderLegacyBlock_article on Article {\n      id\n      url\n      newsStatus\n      displayProperties {\n        serveAsNyt4\n      }\n      ...BylineBlock_article\n      ...ReviewHeader_article\n      ...ShareToolbar_share\n      translations {\n        ...TranslationLinks_translations\n      }\n      ...BrandBar_asset\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n  "])),ye.a.fragments.article,tn.a.fragments.article,rt.b.fragments.share,at.a.fragments.translations,it.a.fragments.asset)};var xn,kn,On,En=wn,Tn=n("o+dK"),Cn=n("i9lO"),Sn=n("shGR"),Pn=(n("7FfI"),n("06b3")),Mn=n("HChe"),In=n("rONy"),An=n("Rb+W"),jn=vt()((function(){return n.e(96).then(n.bind(null,"sdmx"))}),{loadableGenerated:{webpack:function(){return["sdmx"]},modules:["./SharedHeaderLiveBriefing"]}}),Ln=Object(Mn.a)(),Rn=Object(An.f)(Pn.a);function Nn(e){var t=e.article,n=e.data,i=Object(Ve.useTracking)({module:{region:"header"}}).Track;return Object(g.useEffect)((function(){Object(In.a)((function(){window.Iterate("install","5daa046efdd6a200014a9433"),window.Iterate("identify",{agentId:Rn,referrerUrl:document.referrer,referrerPage:document.location,device:Ln})}))}),[]),n?h()(i,{},void 0,h()(jn,{isOak:!0,firstPublished:t.firstPublished,lastModified:t.lastModified,byline:n.byline,headline:n.headline,summary:n.summary,latestUpdate:n.latestUpdate,translations:t.translations,sponsoredByAd:xn||(xn=h()(De.a,{id:"sponsor"}))})):null}Nn.displayName="HeaderLiveBriefing",Nn.fragments={data:s()(kn||(kn=a()(["\n    fragment HeaderLiveBriefingBlock_data on HeaderLiveBriefingBlock {\n      label {\n        ...LabelBlock_data\n      }\n      headline {\n        ...Heading1Block_data\n      }\n      summary {\n        ...SummaryBlock_data\n      }\n      byline {\n        ...BylineBlock_data\n        ... on BylineBlock {\n          bylines {\n            prefix\n          }\n        }\n      }\n      latestUpdate {\n        label\n        content {\n          ...TextInline_content\n        }\n      }\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n  "])),st.a.fragments.data,d.a.fragments.data,q.a.fragments.data,ye.a.fragments.data,B.a.fragments.content),article:s()(On||(On=a()(["\n    fragment HeaderLiveBriefing_article on Article {\n      id\n      lastModified\n      firstPublished\n      translations {\n        ...TranslationLinks_translations\n      }\n    }\n    ","\n  "])),at.a.fragments.translations)},Nn.defaultProps={data:void 0,article:null};var Dn,Bn=Nn,zn=n("QILm"),Fn=n.n(zn),Un=n("/2LF"),Hn=n("4TXN"),Wn=["data"];function qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Vn=function(e){var t=e.data,n=Fn()(e,Wn);return y.a.createElement(Un.a,P()({},n,{data:t,linkTrackingParamOverrides:{pgtype:"Article"},renderRelated:function(e){var t=e.data;return y.a.createElement(j.a,P()({},e,{isOpinion:Object(Hn.c)(t),label:Object(Hn.b)(t)}))}}))};Vn.displayName="RelatedLinksBlock",Vn.defaultProps=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qn(Object(n),!0).forEach((function(t){be()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Un.a.defaultProps),Vn.fragments={data:s()(Dn||(Dn=a()(["\n    fragment StoryRelatedLinksBlock_data on RelatedLinksBlock {\n      ...SharedRelatedLinksBlock_data\n      related @filterEmpty {\n        ... on CreativeWork {\n          __typename\n          section {\n            id\n            displayName\n          }\n        }\n        ... on Article {\n          id\n          bylines {\n            creators {\n              ... on Person {\n                id\n                displayName\n              }\n            }\n          }\n        }\n      }\n    }\n    ","\n  "])),Un.a.fragments.data)};var Gn,Yn,Zn,Xn=Vn,Jn=n("Uc1u"),Kn=n.n(Jn),$n=n("JoI/"),Qn=n.n($n),ei=n("voDd"),ti=function(e){var t=null==e?void 0:e.find((function(e){var t;return null==e||null===(t=e.slug)||void 0===t?void 0:t.startsWith("audio-app-show")}));if(t)return t.name;var n=null==e?void 0:e.find((function(e){var t;return null==e||null===(t=e.slug)||void 0===t?void 0:t.startsWith("audio-app-publisher")}));return n?n.name:""},ni=function(e){var t,n=e.data,i=e.displayStyle,r=e.className;if(!n)return null;var a=n.url,o=n.headline,s=n.summary,l=n.promotionalImage,c=n.promotions,u=n.audio,d=n.collections,p=null==c||null===(t=c.find((function(e){return"audio-app"===e.name})))||void 0===t?void 0:t.promotionalProperties,f=(null==p?void 0:p.media)||(null==l?void 0:l.image),m=u||Object(ei.getAudioFromBody)(n),h=Math.max(6e4,1e3*(null==m?void 0:m.length));return y.a.createElement(Qn.a,{displayStyle:i,headline:(null==p?void 0:p.headline)||o.default,summary:(null==p?void 0:p.summary)||s,url:Object(ei.getAudioDeepLink)(a),media:null==f?void 0:f.crops[0].renditions[0].url,caption:null==f?void 0:f.credit,duration:h,label:ti(d),className:r})},ii=s()(Gn||(Gn=a()(['\n  fragment AudioRelatedLinkImageFields on Image {\n    id\n    credit\n    url\n    crops(renditionNames: ["threeByTwoSmallAt2X"]) {\n      renditions {\n        url\n        name\n        width\n      }\n    }\n  }\n']))),ri=s()(Yn||(Yn=a()(["\n  fragment AudioRelatedLinkAudioFields on Audio {\n    id\n    length\n  }\n"])));ni.fragments={data:s()(Zn||(Zn=a()(["\n    fragment AudioRelatedLinkBlock_data on HasPromotionalProperties {\n      ... on Article {\n        id\n        url\n        headline {\n          default\n        }\n        summary\n        promotionalImage {\n          image {\n            id\n            ...AudioRelatedLinkImageFields\n          }\n        }\n        promotions {\n          name\n          promotionalProperties {\n            headline\n            summary\n            media {\n              ...AudioRelatedLinkImageFields\n            }\n          }\n        }\n        collections {\n          id\n          slug\n          name\n        }\n        body {\n          content {\n            __typename\n            ... on AudioBlock {\n              media {\n                id\n                ...AudioRelatedLinkAudioFields\n              }\n            }\n            ... on HeaderMultimediaBlock {\n              media {\n                ... on AudioBlock {\n                  media {\n                    id\n                    ...AudioRelatedLinkAudioFields\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n      ... on AudioContainer {\n        id\n        url\n        headline {\n          default\n        }\n        summary\n        promotionalImage {\n          image {\n            id\n            ...AudioRelatedLinkImageFields\n          }\n        }\n        collections {\n          id\n          slug\n          name\n        }\n        audio {\n          id\n          ...AudioRelatedLinkAudioFields\n        }\n      }\n    }\n    ","\n    ","\n  "])),ii,ri)},ni.defaultProps={data:null,displayStyle:"standard",className:void 0};var ai,oi=ni,si=function(e){var t,n,i=e.data,r=e.className,a=Object(re.useTheme)().noFollowExternalLinks;if(!i)return null;var o=Object(N.createMapInlineUnionWithOptions)({noFollowExternalLinks:a}),s=null!==(t=i.title)&&void 0!==t&&t.length?i.title.map(o):null,l=null!==(n=i.description)&&void 0!==n&&n.length?i.description.map(o):null,c=i.audioRelatedLinksBlockDisplayStyle||null,u=i.related&&i.related.map((function(e,t){var n={key:t,data:e,displayStyle:c};return y.a.createElement(oi,n)}));return h()(Kn.a,{className:Object(re.cx)(r,"audio-related-links-block"),displayStyle:c,related:u},void 0,s&&h()(Jn.AudioRelatedLinksHeadline,{},void 0,s),l&&h()(Jn.AudioRelatedLinksDescription,{},void 0,l))};si.displayName="AudioRelatedLinksBlock",si.fragments={data:s()(ai||(ai=a()(["\n    fragment AudioRelatedLinksBlock_data on AudioRelatedLinksBlock {\n      audioRelatedLinksBlockDisplayStyle: displayStyle\n      title {\n        ...TextInline_content\n      }\n      description {\n        ...TextInline_content\n      }\n      related @filterEmpty {\n        __typename\n        ...AudioRelatedLinkBlock_data\n      }\n    }\n    ","\n    ","\n  "])),B.a.fragments.content,oi.fragments.data)},si.defaultProps={className:void 0,data:null};var li,ci=si,ui=Object(re.css)("margin:37px auto;",Mt.a.breakpoint.small,"{margin:43px auto;width:",Mt.a.breakpoint.textBodyWidth,"px;}",Mt.a.breakpoint.extraLarge,"{width:",Mt.a.breakpoint.textBodyWidthExtralarge,"px;}"),di=function(e){var t=e.data,n=e.className,i=t.html;return h()("figure",{className:Object(re.cx)(ui,n),dangerouslySetInnerHTML:{__html:i}})};di.displayName="SoundcloudEmbedBlock",di.fragments={data:s()(li||(li=a()(["\n    fragment SoundcloudEmbedBlock_data on SoundcloudEmbedBlock {\n      soundcloudUrl\n      html\n    }\n  "])))},di.defaultProps={className:void 0};var pi,fi,mi=Object(Et.a)(di),hi=n("cDf5"),gi=n.n(hi),yi=n("RIqP"),bi=n.n(yi),_i=n("CKk2"),wi=n("qGEe"),xi=n.n(wi);function ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Oi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ki(Object(n),!0).forEach((function(t){be()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ei=vt()((function(){return n.e(48).then(n.bind(null,"RwY4"))}),{loadableGenerated:{webpack:function(){return["RwY4"]},modules:["../Ask"]}});var Ti=function(e,t){var n={eventData:{type:e}};return"object"===gi()(t)&&(n=Oi(Oi({},n),t)),n},Ci=function(e){var t=e.className,n=e.article,i=e.data,r=i.dataType,a=i.data,o=i.mediaRefs,s=Object(Ve.useTracking)({event:"moduleInteraction",module:{name:"ExperimentalBlock",element:{name:Object(_i.getComponentType)(r)}}});try{var l=Object(_i.getComponentType)(r),c=xi.a[l];if(!c)throw new Error("No component [".concat(l,"] found. Available experimental blocks are: ").concat(Object.keys(xi.a).join(" "),"."));var u={},d=function(e,t){var n=e,i=e.match(/nyt[^,\]"]*/g);return i&&(n=(i=bi()(new Set(i))).reduce((function(e,n){return e.replace(new RegExp('"'.concat(n,'"'),"g"),"".concat(JSON.stringify(t.find((function(e){return(null==e?void 0:e.uri)===n}))||{})))}),e)),JSON.parse(n)}(a,o),p=Oi(Oi({},e),{},{tracking:s,article:n,index:e.elementCount});return Object.assign(u,p),Object.assign(u,d),d.content&&d.content.length>0&&(Object.assign(u,Object(_i.contentToProps)(d.content)),delete u.content),"Ask"===l?y.a.createElement(Ei,u):y.a.createElement(c,Oi(Oi({},u),{},{handleEvent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s.trackEvent(Ti(e,t))},className:t}))}catch(e){return function(e){if("production"!==vi.env.NODE_ENV)throw new Error(e)}(e),null}};Ci.fragments={article:s()(pi||(pi=a()(["\n    fragment UnstructuredBlock_article on Article {\n      id\n      sprinkledBody {\n        content @filterEmpty {\n          __typename\n          ...AudioBlock_data\n          ...BlockquoteBlock_data\n          ...BylineBlock_data\n          ...ClaimReviewBlock_data\n          ...DetailBlock_data\n          ...DiptychBlock_data\n          ...Dropzone_data\n          ...HeaderBasicBlock_data\n          ...HeaderLiveBriefingBlock_data\n          ...Heading1Block_data\n          ...Heading2Block_data\n          ...Heading3Block_data\n          ...ImageBlock_data\n          ...InstagramEmbedBlock_data\n          ...InteractiveBlock_data\n          ...HeaderLegacyBlock_data\n          ...LabelBlock_data\n          ...ListBlock_data\n          ...ParagraphBlock_data\n          ...SlideshowBlock_data\n          ...SoundcloudEmbedBlock_data\n          ...SummaryBlock_data\n          ...RuleBlock_data\n          ...StoryRelatedLinksBlock_data\n          ...TimestampBlock_data\n          ...TwitterEmbedBlock_data\n          ...UnstructuredBlock_data\n          ...VideoBlock_data\n          ...YouTubeEmbedBlock_data\n          ...HeaderFullBleedHorizontalBlock_data\n          ...HeaderMultimediaBlock_data\n          ... on HeaderFullBleedHorizontalBlock {\n            displayOverride\n            byline {\n              ...BylineBlock_data\n              ... on BylineBlock {\n                bylines {\n                  prefix\n                }\n              }\n            }\n            timestampBlock {\n              ...TimestampBlock_data\n            }\n          }\n          ...HeaderFullBleedVerticalBlock_data\n          ... on HeaderFullBleedVerticalBlock {\n            displayOverride\n            alignment\n            byline {\n              ...BylineBlock_data\n              ... on BylineBlock {\n                bylines {\n                  prefix\n                }\n              }\n            }\n            timestampBlock {\n              ...TimestampBlock_data\n            }\n          }\n          ... on Dropzone {\n            adsDesktop\n            adsMobile\n            index\n          }\n          ... on BlockWithFallback {\n            fallback {\n              __typename\n              ...HeaderLegacyBlock_data\n              ...TextOnlyDocumentBlock_data\n            }\n          }\n        }\n      }\n    }\n  "]))),data:s()(fi||(fi=a()(['\n    fragment UnstructuredBlock_data on UnstructuredBlock {\n      dataType # named type of block\n      data # JSON data\n      mediaRefs: media {\n        __typename\n        ... on Published {\n          uri\n        }\n        ... on CreativeWork {\n          headline {\n            default\n          }\n          section {\n            id\n            displayName\n          }\n        }\n        ... on HasPromotionalProperties {\n          promotionalHeadline\n          promotionalSummary\n          ... on Published {\n            url\n            firstPublished\n          }\n          promotionalMedia {\n            ... on Image {\n              id\n              crops(renditionNames: ["threeByTwoSmallAt2X", "videoLarge", "mediumThreeByTwo440"]) {\n                name\n                renditions {\n                  url\n                  name\n                }\n              }\n            }\n            ... on Video {\n              id\n              promotionalMedia {\n                ... on Image {\n                  id\n                  crops(\n                    renditionNames: ["threeByTwoSmallAt2X", "videoLarge", "mediumThreeByTwo440"]\n                  ) {\n                    name\n                    renditions {\n                      url\n                      name\n                    }\n                  }\n                }\n              }\n            }\n            ... on Slideshow {\n              id\n              promotionalMedia {\n                ... on Image {\n                  id\n                  crops(\n                    renditionNames: ["threeByTwoSmallAt2X", "videoLarge", "mediumThreeByTwo440"]\n                  ) {\n                    name\n                    renditions {\n                      url\n                      name\n                    }\n                  }\n                }\n              }\n            }\n            ... on Interactive {\n              id\n              promotionalMedia {\n                ... on Image {\n                  id\n                  crops(\n                    renditionNames: ["threeByTwoSmallAt2X", "videoLarge", "mediumThreeByTwo440"]\n                  ) {\n                    name\n                    renditions {\n                      url\n                      name\n                    }\n                  }\n                }\n              }\n            }\n            ... on EmbeddedInteractive {\n              id\n              promotionalMedia {\n                ... on Image {\n                  id\n                  crops(\n                    renditionNames: ["threeByTwoSmallAt2X", "videoLarge", "mediumThreeByTwo440"]\n                  ) {\n                    name\n                    renditions {\n                      url\n                      name\n                    }\n                  }\n                }\n              }\n            }\n          }\n          ... on Article {\n            id\n            bylines {\n              creators {\n                ... on Person {\n                  id\n                  displayName\n                }\n              }\n            }\n          }\n        }\n        ... on Image {\n          __typename\n          id\n          imageType\n          url\n          uri\n          credit\n          legacyHtmlCaption\n          altText\n          crops(\n            renditionNames: [\n              "articleLarge"\n              "jumbo"\n              "superJumbo"\n              "popup"\n              "square320"\n              "mobileMasterAt3x"\n            ]\n          ) {\n            name\n            renditions {\n              url\n              name\n              width\n              height\n            }\n          }\n          caption {\n            text\n          }\n        }\n        ... on Video {\n          id\n          __typename\n          url\n          uri\n          duration\n          sourceId\n          headline {\n            default\n          }\n          summary\n          renditions {\n            width\n            height\n            bitrate\n            url\n            type\n          }\n        }\n      }\n    }\n  '])))};var Si,Pi=Object(Et.a)(Ci),Mi=function(e){var t=e.data,n=e.styles;return h()("div",{className:n},void 0,t.content.map((function(e,t){return h()(J.a,{data:e},t.toString())})))};Mi.displayName="TextOnlyDocumentBlock",Mi.defaultProps={styles:void 0},Mi.fragments={data:s()(Si||(Si=a()(["\n    fragment TextOnlyDocumentBlock_data on TextOnlyDocumentBlock {\n      content {\n        __typename\n        ...ParagraphBlock_data\n      }\n    }\n    ","\n  "])),J.a.fragments.data)};var Ii,Ai=Mi,ji={AudioBlock:ge.a,BlockquoteBlock:l.a,BylineBlock:ye.a,CardDeckBlock:te.a,ClaimReviewBlock:Ee,DetailBlock:c.a,DiptychBlock:u.a,Dropzone:qe,EmailSignupBlock:C.a,HeaderMultimediaBlock:Cn.a,HeaderFullBleedHorizontalBlock:Tn.a,HeaderFullBleedVerticalBlock:Sn.a,HeaderLegacyBlock:En,HeaderBasicBlock:un,HeaderLiveBriefingBlock:Bn,Heading1Block:d.a,Heading2Block:p.a,Heading3Block:f.a,GridBlock:x,ImageBlock:k.a,InteractiveBlock:E.a,InstagramEmbedBlock:O.a,LabelBlock:st.a,ListBlock:T.a,ParagraphBlock:J.a,LegacyTableBlock:Q,PullquoteBlock:X.a,SlideshowBlock:en,SoundcloudEmbedBlock:mi,SpotifyEmbedBlock:Z.a,SummaryBlock:q.a,RuleBlock:W.a,RelatedLinksBlock:Xn,AudioRelatedLinksBlock:ci,TimestampBlock:gt,TwitterEmbedBlock:V.a,UnstructuredBlock:Pi,VideoBlock:G.a,YouTubeEmbedBlock:Y.a,EditableRelatedLinksBlock:H,VisualStackBlock:fe,ReadersModeGateway:me.a,Optimistic:he.a},Li={SoundcloudEmbedBlock:ji.SoundcloudEmbedBlock,SpotifyEmbedBlock:ji.SpotifyEmbedBlock,TwitterEmbedBlock:ji.TwitterEmbedBlock,YouTubeEmbedBlock:ji.YouTubeEmbedBlock,InstagramEmbedBlock:ji.InstagramEmbedBlock},Ri=s()(Ii||(Ii=a()(["\n  fragment DocumentBlock_data on DocumentBlock {\n    content @filterEmpty {\n      __typename\n      ...AudioBlock_data\n      ...BlockquoteBlock_data\n      ...BylineBlock_data\n      ...CardDeckBlock_data\n      ...ClaimReviewBlock_data\n      ...DetailBlock_data\n      ...DiptychBlock_data\n      ...Dropzone_data\n      ...EmailSignupBlock_data\n      ...EditableRelatedLinksBlock_data\n      ...HeaderBasicBlock_data\n      ...HeaderLiveBriefingBlock_data\n      ...Heading1Block_data\n      ...Heading2Block_data\n      ...Heading3Block_data\n      ...GridBlock_data\n      ...ImageBlock_data\n      ...InstagramEmbedBlock_data\n      ...InteractiveBlock_data\n      ...HeaderLegacyBlock_data\n      ...LabelBlock_data\n      ...ListBlock_data\n      ...ParagraphBlock_data\n      ...LegacyTableBlock_data\n      ...PullquoteBlock_data\n      ...SlideshowBlock_data\n      ...SoundcloudEmbedBlock_data\n      ...SpotifyEmbedBlock_data\n      ...SummaryBlock_data\n      ...RuleBlock_data\n      ...StoryRelatedLinksBlock_data\n      ...AudioRelatedLinksBlock_data\n      ...TimestampBlock_data\n      ...TwitterEmbedBlock_data\n      ...UnstructuredBlock_data\n      ...VideoBlock_data\n      ...YouTubeEmbedBlock_data\n      ...HeaderFullBleedHorizontalBlock_data\n      ...HeaderMultimediaBlock_data\n      ...VisualStackBlock_data\n      ... on HeaderFullBleedHorizontalBlock {\n        displayOverride\n        byline {\n          ...BylineBlock_data\n          ... on BylineBlock {\n            bylines {\n              prefix\n            }\n          }\n        }\n        timestampBlock {\n          ...TimestampBlock_data\n        }\n      }\n      ...HeaderFullBleedVerticalBlock_data\n      ... on HeaderFullBleedVerticalBlock {\n        displayOverride\n        alignment\n        byline @filterEmpty {\n          ...BylineBlock_data\n          ... on BylineBlock {\n            bylines {\n              prefix\n            }\n          }\n        }\n        timestampBlock {\n          ...TimestampBlock_data\n        }\n      }\n      ... on Dropzone {\n        adsDesktop\n        adsMobile\n        index\n      }\n      ... on BlockWithFallback {\n        fallback {\n          __typename\n          ...HeaderLegacyBlock_data\n          ...TextOnlyDocumentBlock_data\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),ji.AudioBlock.fragments.data,ji.BlockquoteBlock.fragments.data,ji.BylineBlock.fragments.data,ji.CardDeckBlock.fragments.data,ji.ClaimReviewBlock.fragments.data,ji.DetailBlock.fragments.data,ji.DiptychBlock.fragments.data,ji.Dropzone.fragments.data,ji.EmailSignupBlock.fragments.data,ji.EditableRelatedLinksBlock.fragments.data,ji.HeaderMultimediaBlock.fragments.data,ji.HeaderFullBleedHorizontalBlock.fragments.data,ji.HeaderFullBleedVerticalBlock.fragments.data,ji.HeaderLegacyBlock.fragments.data,ji.HeaderBasicBlock.fragments.data,ji.HeaderLiveBriefingBlock.fragments.data,ji.Heading1Block.fragments.data,ji.Heading2Block.fragments.data,ji.Heading3Block.fragments.data,ji.GridBlock.fragments.data,ji.ImageBlock.fragments.data,ji.InteractiveBlock.fragments.data,ji.InstagramEmbedBlock.fragments.data,ji.LabelBlock.fragments.data,ji.ListBlock.fragments.data,ji.ParagraphBlock.fragments.data,ji.LegacyTableBlock.fragments.data,ji.PullquoteBlock.fragments.data,ji.SlideshowBlock.fragments.data,ji.SoundcloudEmbedBlock.fragments.data,ji.SpotifyEmbedBlock.fragments.data,ji.SummaryBlock.fragments.data,ji.RuleBlock.fragments.data,Xn.fragments.data,ji.AudioRelatedLinksBlock.fragments.data,ji.TimestampBlock.fragments.data,ji.TwitterEmbedBlock.fragments.data,ji.UnstructuredBlock.fragments.data,ji.VideoBlock.fragments.data,ji.YouTubeEmbedBlock.fragments.data,ji.VisualStackBlock.fragments.data,Cn.a.fragments.data,Ai.fragments.data)},AteQ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.ClaimRating=t.ClaimContent=t.ClaimAttr=t.Claim=void 0;var r=n("3sMT"),a=n("Jqp9"),o=i(n("wXC7")),s=(0,a.styled)("div",{target:"e1yf5guu0"})("font-family:",o.default.font.franklinBase,";padding:0.5rem 0 0.4rem 0;font-weight:",o.default.font.weight.medium,";font-size:0.75rem;line-height:1.3125rem;letter-spacing:0.05em;text-transform:uppercase;color:",r.color.content.quaternary,";a{color:",r.color.content.quaternary,";border-bottom:1px solid ",r.color.stroke.tertiary,";&:visited{color:",r.color.content.quaternary,";}}");t.ClaimAttr=s;var l=(0,a.styled)("div",{target:"e1yf5guu1"})("font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.medium,";font-size:1.35rem;line-height:1.6rem;padding:1rem 0 0;a{text-decoration:none;color:",r.color.content.primary,";&:visited{color:",r.color.content.primary,";}}");t.Claim=l;var c=(0,a.styled)("div",{target:"e1yf5guu2"})("color:",r.color.content.primary,";font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.bold,";font-size:1rem;line-height:1.25rem;padding:0.3rem 0;");t.ClaimRating=c;var u=(0,a.styled)("div",{target:"e1yf5guu3"})("font-family:",o.default.font.franklinBase,";font-size:1rem;color:",r.color.content.quaternary,";line-height:1.4rem;margin-bottom:1.5rem;",(function(e){return e.theme.breakpointMap.small}),"{line-height:1.4rem;}");t.ClaimContent=u},Au1T:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.containerClass=t.bulletClass=t.StyledTableOfContentsItem=t.StyledTableOfContents=void 0;var r=n("Jqp9"),a=i(n("42vy")),o=i(n("wXC7")),s=n("3sMT"),l=(0,r.css)("padding:1.5rem 1rem 1.5rem 2rem;border-top:1px solid ",s.color.stroke.quaternary,";border-bottom:1px solid ",s.color.stroke.quaternary,";margin-bottom:1rem;",o.default.breakpoint.medium,"{padding:1.5rem 2.5rem;margin:0 auto 1.5rem;max-width:600px;border-top:1px solid ",s.color.stroke.quaternary,";}",a.default,"{margin-bottom:1rem;font-weight:",o.default.font.weight.light,";}");t.containerClass=l;var c=(0,r.styled)("div",{target:"eg4oiy60"})("margin-bottom:1rem;width:100%;",o.default.breakpoint.small,"{width:calc(50% - 1rem);margin-right:1rem;}");t.StyledTableOfContentsItem=c;var u=(0,r.styled)("div",{target:"eg4oiy61"})("display:flex;flex-direction:column;flex-wrap:wrap;",o.default.breakpoint.small,"{max-height:350px;}",c,"{margin-bottom:1.25rem;}");t.StyledTableOfContents=u;var d=(0,r.css)("font-family:",o.default.font.franklinBase,";font-size:17px;line-height:24px;margin-left:0;hanging-punctuation:first;a,span{font-size:16px;line-height:18px;color:",s.color.content.primary,";text-decoration:none;font-weight:",o.default.font.weight.bold,";&:hover{text-decoration:underline;}}p,div{font-size:14px;opacity:0.7;font-weight:",o.default.font.weight.medium,";&:hover{text-decoration:none;}}p{margin:0;}");t.bulletClass=d},B05M:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("+gTf")).default;t.default=r},BHcd:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.ticketmaster=t.resy=t.opentable=t.imdb=t.criticsPick=void 0;var r=i(n("wXC7")),a=encodeURIComponent('\n  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">\n  <path\n    fill="'.concat(r.default.color.reviewCritPickGold,'"\n    d="M14.34,8.83,16,8l-1.66-.83,1.38-1.24-1.82-.38,1-1.55-1.74.1h0c.66-.57,1.15-1,2.65-2.18l-2.7-.84c-.48.44-.87.8-1.21,1.14L12,1.07l-1.55,1L10.07.27,8.84,1.65,8,0,7.16,1.65,5.93.27,5.55,2.09,4,1.07l.1,1.85L2.34,2.34,2.92,4.1,1.07,4l1,1.55L.27,5.93,1.66,7.17,0,8l1.66.83L.27,10.07l1.82.38L1.07,12l1.85-.1-.58,1.76,1.76-.58L4,14.93l1.55-1,.38,1.81,1.23-1.38L8,16l.84-1.65,1.23,1.38.38-1.81,1.55,1-.1-1.85,1.76.58-.58-1.76,1.85.1-1-1.55,1.82-.38ZM8,13.14a5.14,5.14,0,1,1,2.67-9.52l-.48.61a27.9,27.9,0,0,0-2.56,4L6.14,6l-1.36.82,3.08,4.52C9,9.42,9.5,8.56,10.07,7.7A18.66,18.66,0,0,1,12.2,5,5.13,5.13,0,0,1,8,13.14Z" />\n  </svg>\n'));t.criticsPick=a;var o=encodeURIComponent('\n  <svg xmlns="http://www.w3.org/2000/svg" height="20" width="42" >\n    <g fill-rule="evenodd" fill="none">\n      <path fill="#010101" d="M2.02 0A2 2 0 0 0 0 2v16a2 2 0 0 0 2.02 2h37.96A2 2 0 0 0 42 18V2c0-1.1-.9-2-2.02-2H2.02z" />\n      <path fill="#fff"\n        d="M6 16h3V4H6v12zM15.78 3.99l-.75 5.6-.46-3.04c-.13-.98-.26-1.84-.39-2.56H10v12h2.83V8.06l1.2 7.93h2.01l1.13-8.1v8.1H20v-12h-4.22zM24.86 6.15c.12.07.2.18.24.34.04.15.05.5.05 1.04v4.65c0 .8-.05 1.29-.16 1.47-.1.18-.38.27-.83.27V6.04c.34 0 .57.04.7.11zM24.83 16c.75 0 1.32-.04 1.7-.12.37-.09.69-.23.94-.44.25-.2.44-.48.54-.85.1-.36.16-1.08.16-2.15V8.22c0-1.14-.05-1.9-.11-2.29a2.12 2.12 0 0 0-.53-1.05 2.39 2.39 0 0 0-1.23-.68c-.53-.14-1.42-.21-2.95-.21H21v12h3.83zM33.11 13.22c0 .58-.03.96-.09 1.11-.06.16-.31.23-.5.23-.2 0-.32-.07-.38-.22s-.1-.49-.1-1.03V10.1c0-.56.03-.9.09-1.04.05-.14.18-.2.36-.2.2 0 .45.08.52.23.07.16.1.5.1 1v3.13zM29 4v12.17h2.84l.2-.78c.26.32.54.55.85.7.31.16.77.24 1.13.24.5 0 .94-.13 1.3-.4.36-.26.6-.57.69-.92.1-.36.14-.9.14-1.63V9.96c0-.73 0-1.21-.04-1.44a1.65 1.65 0 0 0-1-1.23c-.3-.13-.67-.2-1.08-.2-.37 0-.83.07-1.14.22-.31.14-.6.36-.85.65V4H29z" />\n    </g>\n  </svg>\n');t.imdb=o;var s=encodeURIComponent('\n  <svg xmlns="http://www.w3.org/2000/svg" height="133.33" width="576">\n    <path\n      d="M2.67 66.66a15.83 15.83 0 1 1 31.65 0 15.83 15.83 0 0 1-31.65 0M113.8 82.5a15.83 15.83 0 1 1 0-31.66 15.83 15.83 0 0 1 0 31.66zm0-79.17a63.31 63.31 0 0 0-63.3 63.34 63.31 63.31 0 0 0 63.3 63.33 63.31 63.31 0 0 0 63.29-63.33 63.31 63.31 0 0 0-63.3-63.34"\n      fill="#dc273e" />\n    <path\n      d="M566.15 61.77c1 0 1.6-.45 1.6-1.27 0-.73-.41-1.22-1.52-1.22h-1.04v2.49zm-2.48-3.75h2.81c1.56 0 2.9.63 2.9 2.41 0 .89-.56 1.74-1.38 2.04l1.7 3.07H568l-1.3-2.59h-1.51v2.6h-1.52zm8.18 3.85c0-3.48-2.4-5.96-5.51-5.96s-5.48 2.48-5.48 5.96c0 3.52 2.37 5.93 5.48 5.93 3.1 0 5.51-2.4 5.51-5.93zm-12.48 0c0-4.33 3.15-7.3 6.97-7.3 3.85 0 7 2.97 7 7.3 0 4.34-3.15 7.3-7 7.3-3.82 0-6.97-2.96-6.97-7.3zM512.93 91.5c.94 0 1.73-.78 1.73-1.72v-6.36c0-.93-.78-1.72-1.72-1.72h-.28c-.77 0-1.55-.77-1.55-1.54V42.49c0-.86-.86-1.72-1.72-1.72h-6.32c-.86 0-1.72.86-1.72 1.72V84.2l.02 1.09c0 3.1 3.1 6.21 6.21 6.21zM234.48 50.72c8.6 0 15.87 7.3 15.87 15.94 0 8.73-7.12 15.82-15.87 15.82a15.89 15.89 0 0 1 0-31.76zm0-10.05a25.94 25.94 0 0 0-25.83 26 25.57 25.57 0 0 0 25.83 25.85 25.6 25.6 0 0 0 25.91-25.86 25.98 25.98 0 0 0-25.9-25.99zM440.6 81.2c-.47 1.33-3.28 3.83-6.49 3.83-3.35 0-5.23-2.03-5.23-5.08 0-3.2 2.27-5.16 6.4-5.16 2.9 0 5.32 1.1 5.32 1.1zm-4.22-26.65a45.58 45.58 0 0 0-12.34 1.8c-.78.23-1.49.85-1.17 2.18l.78 4.07c.15 1.1.86 1.95 2.03 1.56 2.1-.62 6.87-1.33 10.15-1.33 3.83 0 5.16 2.2 5 6.8 0 0-3.28-1.01-6.95-1.01-9.14 0-14.37 4.92-14.37 11.33 0 7.74 5 12.35 12.18 12.35 5.63 0 9.22-2.5 11.33-4.53v1.94c0 .94.78 1.72 1.72 1.72h.64l.22.01h2.65c.94 0 1.72-.78 1.72-1.72V70.26c0-9.85-2.34-15.71-13.59-15.71zm-65.58 0a14.56 14.56 0 0 0-11.6 5.2v-2.7c0-.94-.8-1.72-1.73-1.72h-4.08c-.86 0-1.72.7-1.72 1.72v32.67c0 .94.86 1.72 1.72 1.72h5.78c1.71 0 2.26-.39 2.26-1.72V69.1c.86-2.5 3.12-5.63 7.81-5.63 4.38 0 6.25 2.89 6.25 7.58v18.68c0 .94.78 1.72 1.72 1.72h6.33c.86 0 1.71-.78 1.71-1.72V71.04c0-8.75-2.96-16.5-14.45-16.5zm-86 28.84c-4.53 0-7.5-2.03-7.5-2.03v-12.9c.78-2.03 3.28-5 7.97-5 5.62 0 8.51 4.92 8.51 10s-3.04 9.93-8.98 9.93zm1.8-28.84a15.58 15.58 0 0 0-11.78 5.38v-2.88c0-.94-.79-1.72-1.72-1.72h-3.84c-.94 0-1.72.78-1.72 1.72v47.37c0 .86.78 1.72 1.72 1.72h6.32c.86 0 1.72-.86 1.72-1.72v-13.6c1.64.62 5.08 1.48 8.67 1.48 10.78 0 17.9-8.28 17.9-18.84 0-10.94-7.43-18.91-17.27-18.91zm257.6 14.3c-.16-3.52-2.97-6.25-6.95-6.25-4.38 0-7.19 2.65-7.66 6.25zm-6.72-14.3c9.37 0 16.56 6.95 16.56 16.72 0 .55-.08 1.8-.16 2.35a1.83 1.83 0 0 1-1.71 1.64h-23.13c.08 4.45 3.75 8.36 8.99 8.36 3.59 0 6.09-1.33 7.73-2.65.86-.71 1.8-.79 2.34 0l3.05 4.06c.62.7.7 1.56-.16 2.34a20.36 20.36 0 0 1-13.43 4.93c-10.78 0-18.28-8.6-18.28-18.92 0-10.16 7.5-18.83 18.2-18.83zm-61.13 28.84c-4.69 0-7.19-2.97-7.97-5v-12.9s2.97-2.03 7.5-2.03c5.94 0 8.98 4.84 8.98 9.92 0 5.09-2.89 10.01-8.51 10.01zm.86-28.84c-3.6 0-7.19.86-8.83 1.56V42.35c0-.86-.78-1.72-1.72-1.72h-6.33c-.86 0-1.71.86-1.71 1.72v47.37c0 .94.85 1.72 1.71 1.72h2.74l.16-.01h.72c.95 0 1.74-.78 1.74-1.72v-2.67l.03-.13s4.14 5.4 12.03 5.4c9.85 0 16.95-8.6 16.95-18.93 0-10.55-6.8-18.83-17.5-18.83zm-55.27-13.92H385.2c-.86 0-1.48.7-1.48 1.49v6.4c0 .79.62 1.5 1.48 1.5h13.25v39.94c0 .78.7 1.48 1.49 1.48h7.26c.78 0 1.49-.7 1.49-1.48V50h13.25c.86 0 1.49-.7 1.49-1.48v-6.41c0-.78-.63-1.49-1.49-1.49zm-87.46 28.22c-.16-3.52-2.97-6.25-6.95-6.25-4.38 0-7.19 2.65-7.66 6.25zm-6.72-14.3c9.38 0 16.56 6.95 16.56 16.72 0 .55-.08 1.8-.15 2.35a1.83 1.83 0 0 1-1.72 1.64h-23.12c.08 4.45 3.75 8.36 8.98 8.36 3.6 0 6.1-1.33 7.73-2.65.86-.71 1.8-.79 2.35 0l3.04 4.06c.63.7.7 1.56-.16 2.34a20.36 20.36 0 0 1-13.43 4.93c-10.78 0-18.28-8.6-18.28-18.92 0-10.16 7.5-18.83 18.2-18.83"\n      fill="#2e2d2d" />\n    </svg>\n');t.opentable=s;var l=encodeURIComponent('\n  <svg xmlns="http://www.w3.org/2000/svg" width="540.7" height="76.7">\n    <path\n      d="M338.3 66.8c10 0 13.2-7 15.3-15.3h-4.7c-6.6 0-17.4 1.1-17.4 9.9 0 3.6 3.4 5.4 6.8 5.4m13.2.7h-.2c-4.6 5.9-9.3 9.2-16.7 9.2-9.4 0-16-5.2-16-14.8 0-17.1 19.1-18.4 31.8-18.4h4.7c.4-1.4.4-3 .4-4.4 0-5.3-5.6-6.8-10.3-6.8-6 0-11.7 1.5-17 4l1.9-10.7c5.7-2 11.5-3.1 17.6-3.1 10.3 0 20 3.8 20 16 0 6.9-5 27.2-6.3 37h-11.3l1.4-8M2.1 23.6H12L14.2 13l14.5-4.8-3.4 15.4h12.1l-2.1 9.9h-12l-5 22.6c-.3 1.2-.6 3-.6 5 0 3.2 2.1 5 5.1 5a18 18 0 0 0 6.6-1.1L27 75.4c-2.4.5-5 1.2-7.3 1.2-9.1 0-15.6-3.6-15.6-13.5C4.2 59 5 55 6 51l3.9-17.5H0l2.1-9.9M47.9 1.3h13.5l-2.9 12.9H45.1l2.8-12.9zm-5 22.3h13.5l-11 51.8H31.9l11-51.8m54.2 11.9a18.2 18.2 0 0 0-9.8-2.6c-10.8 0-16.8 10-16.8 19.8 0 6.7 2.2 13.5 11.4 13.5 3.4 0 7.5-1 11-2.6l-1.5 10.6a29 29 0 0 1-13 2.4c-13.4 0-22-9-22-22.3 0-18 12-31.9 30.6-31.9 5 0 9.8 1 13.4 2l-3.3 11.1M112 0h13.4l-9 42.4h.2l18.8-18.8H153l-24.8 23.7 15.6 28.1h-15.2L115.1 48h-.2l-5.8 27.4H95.9L112 0m89.5 23.6h9.8l2.3-10.6L228 8.2l-3.3 15.4h12l-2 9.9h-12.2L217.7 56c-.3 1.2-.6 3-.6 5 0 3.2 2.1 5 5.1 5a18 18 0 0 0 6.6-1.1l-2.3 10.4c-2.3.5-5 1.2-7.3 1.2-9.1 0-15.6-3.6-15.6-13.5 0-4 .8-8 1.7-12.1l3.9-17.5h-9.8l2.1-9.9"\n      fill="#026CDF"/>\n    <path\n      d="M197 42.1c0-13.1-8.4-19.7-21.2-19.7-17 0-29.5 15.5-29.5 31.6 0 15.4 10 22.6 25 22.6 5.5 0 11.2-1.3 16.5-2.9l1.7-10.6c-5 2.3-10.4 3.7-16 3.7-8.5 0-13.6-3-14.2-11.2l-.1-1.5V53.8c0-3.5.8-7 2.2-10.3 2.6-6.6 6.2-11.1 14.2-11.1 5.6 0 8.5 3.1 8.5 8.6 0 1.2 0 2.3-.3 3.6h-18.4c-1.2 4-1.4 6.7-1.4 9.2h31.7c.8-3.8 1.3-7.6 1.3-11.6m45.6-12.8l1.1-5.8h12.6l-1.2 7h.2c3.6-5.4 9.6-8.2 15.9-8.2 6.1 0 12.5 3.6 13.2 9.9h.2c3.4-6.8 11-9.9 18.2-9.9 7.7 0 14.4 6.4 14.4 14.2 0 4.6-1.2 9.9-2.3 14l-5.5 24.8H296l5.5-25.2c.7-3.1 1.7-8 1.7-11 0-3.9-3-6.3-6.3-6.3-9.4 0-11.7 10.9-13.4 17.9L278 75.4h-13.4l5.4-25.2a60 60 0 0 0 1.7-11c0-3.9-3-6.3-6.3-6.3-9.2 0-11.7 11-13.4 17.9l-5.3 24.6h-13.5l9.4-46m165.2 4.8a21 21 0 0 0-9-2c-4 0-9 1.2-9 5.3 0 6.6 17.5 9 17.5 21.6 0 13.5-11.8 17.5-23.3 17.5a38 38 0 0 1-15.8-3l2.9-10.8c3.8 2 7.6 4 12.9 4 4.5 0 9.2-1.5 9.2-5.8 0-8.3-17.5-9.1-17.5-22 0-12.2 11.8-16.6 22.4-16.6 5 0 10 1 12.6 1.6l-2.9 10.2m8.6-10.6h9.8l2.3-10.6L443 8.2l-3.3 15.4h12l-2 9.9h-12.2L432.6 56c-.3 1.2-.6 3-.6 5 0 3.2 2.1 5 5.2 5a18 18 0 0 0 6.5-1.1l-2.3 10.4c-2.3.5-5 1.2-7.3 1.2-9.1 0-15.6-3.6-15.6-13.5 0-4 .9-8 1.8-12.1l3.8-17.5h-9.8l2.1-9.9m91.4 7.1l1.2-7h13l-1.8 9.8h.2c2.4-5.6 9-11 15.3-11 1.7 0 3.5.1 5 .5L538 36.1c-1.5-.5-3.4-.8-5.2-.8-9.5 0-14.1 8.5-15.8 16.9l-5 23.2h-13.4l9.2-44.8m-9.3 11.5c0-13.1-8.5-19.7-21.3-19.7-17 0-29.4 15.5-29.4 31.6 0 15.4 10 22.6 25 22.6 5.4 0 11.2-1.3 16.4-2.9l1.7-10.6c-5 2.3-10.3 3.7-15.9 3.7-8.6 0-13.6-3-14.3-11.2v-1.8c0-3.5.8-7 2.1-10.3 2.6-6.6 6.3-11.1 14.2-11.1 5.7 0 8.6 3.1 8.6 8.6l-.3 3.6h-18.5c-1.2 4-1.4 6.7-1.4 9.2h31.7c.9-3.8 1.4-7.6 1.4-11.6"\n      fill="#026CDF"/>\n  </svg>\n');t.ticketmaster=l;var c=encodeURIComponent('\n  <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="150" height="66">\n    <defs><path\n      id="a"\n      d="M0 66h150V0H0zm41.6-21c-6.3 0-11.4-4-13.1-9.6H27v9.3h-5.7V19.3H31c1.5 0 2.8.3 4 .7 1 .4 2 1 2.8 1.7.8.7 1.3 1.5 1.7 2.5.4 1 .6 2 .6 3 0 1.7-.4 3.2-1.1 4.4a7.8 7.8 0 0 1-3.2 2.8 6 6 0 0 1-1.6.7 8 8 0 0 0 7.4 4.6zm29-.3H52.4V19.4h17.2v5H58.2v4.9h8.7v4.9h-8.7v5.4h12.3zm16.9-19c0 1 .5 1.6 1.4 2.2 1 .5 2.2 1 3.8 1.3 1 .2 1.9.5 2.8 1 .9.3 1.7.8 2.4 1.5a7.2 7.2 0 0 1 2.4 5.7c0 1.1-.2 2.2-.8 3.2a8 8 0 0 1-2 2.5 12.3 12.3 0 0 1-7 2.2A15.7 15.7 0 0 1 84 44a12.8 12.8 0 0 1-4-3l3.7-4a12.2 12.2 0 0 0 2.7 2.2 8.7 8.7 0 0 0 3.9 1 4.6 4.6 0 0 0 2.5-.7l.9-1c.2-.2.3-.6.3-1 0-1-.5-1.7-1.4-2.3-1-.5-2.4-1-4.4-1.5-1-.2-1.9-.6-2.7-1-.8-.4-1.6-1-2.2-1.6a6.6 6.6 0 0 1-1.9-4.7c0-1 .2-2 .6-3a7 7 0 0 1 1.8-2.5c.7-.7 1.7-1.3 2.9-1.7 1.2-.4 2.5-.6 4.1-.6a13.4 13.4 0 0 1 6 1.3l1.8 1.2 1 .9-3.4 3.6a22.9 22.9 0 0 0-2.2-1.4c-.4-.3-1-.5-1.5-.6-.6-.2-1.1-.2-1.8-.2a4.2 4.2 0 0 0-2.3.7l-.7.7c-.2.3-.3.6-.3 1zm44.6-6.3L123 34v10.7h-5.9V34l-9-14.7h6.6l5.6 9.5 5.4-9.5zM30.8 31c1.1 0 2-.4 2.6-1 .6-.6 1-1.4 1-2.4s-.4-1.8-1-2.4c-.6-.7-1.5-1-2.6-1h-3.5V31z"/>\n      <mask id="b" fill="#fff"><use fill-rule="evenodd" xlink:href="#a"/></mask>\n    </defs>\n    <g fill="none" fill-rule="evenodd"><use xlink:href="#a"/>\n      <g fill="#ff462d" mask="url(#b)"><path d="M0 0h150v66H0z"/></g>\n    </g>\n  </svg>\n');t.resy=c},BIcR:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-five-weeknight-dishes-9a372f22fce6bcf493f7c31a8e3220e7.webp"},BPYT:function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));var i=n("RIqP"),r=n.n(i),a=n("yXPU"),o=n.n(a),s=n("lSNA"),l=n.n(s),c=n("o0o1"),u=n.n(c),d=n("pQqS"),p=n("uj8K"),f=n("NW2b"),m=n("E7dQ"),h=n("2Y8s"),g=n("x04V");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"impression",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.adSlotEventName,r=void 0===i?"":i,a=e.id,o=e.position,s=e.pos,l=e.lineItemId,c=e.sourceAgnosticLineItemId,u=e.creativeId,p=e.sourceAgnosticCreativeId,f=e.timeDefined,y=e.timeCalled,b=e.timeCallSent,_=e.timeRendered,w=e.timeLoaded,x=e.timeViewed,k=e.isEmpty,O=e.slot,E=e.adElementTop,T=e.adElementBottom,C=Object(m.a)(),S=r===d.PUB_EVENTS.AD_CALLED?Object(g.b)(O,Object(h.a)()):{};return{event:t,eventData:v({trigger:"ad",type:t},n),ad:v(v(v(v(v(v(v(v(v(v(v(v(v(v(v(v(v({},{adSlotEventName:r}),{pageType:C}),a&&{slotId:a}),o&&{position:o}),s&&{position:s}),(l||c)&&{lineItemId:"".concat(l||c)}),(u||p)&&{creativeId:"".concat(u||p)}),f&&{timeDefined:f}),y&&{timeCalled:y}),b&&{timeCallSent:b}),_&&{timeRendered:_}),w&&{timeLoaded:w}),x&&{timeViewed:x}),void 0!==E&&{adElementTop:E}),void 0!==T&&{adElementBottom:T}),void 0!==k&&{isEmpty:k}),S)}},_=n("cKmz"),w=n.n(_),x=function(e){try{var t;return!(!e||"undefined"==typeof document||!document.body.contains(e)||"none"===(null===(t=window.getComputedStyle(e))||void 0===t?void 0:t.display))}catch(e){return!1}},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.position,i=e.AdSlotElement,r="undefined"!=typeof window?window:{},a=r.scrollY,o=void 0===a?0:a,s=i,l="function"==typeof(null==s?void 0:s.getBoundingClientRect)?s.getBoundingClientRect():{},c=l.top,u=void 0===c?0:c,d=l.bottom,p=void 0===d?0:d,f=x(s);return{slotId:t,position:n,adElementTop:Math.round(u+o),adElementBottom:Math.round(p+o),isVisible:f}},O=function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)},E=function(e,t){return t.adElementTop>=e.adElementTop},T=function(e,t){return t.adElementTop-e.adElementBottom},C=function(e){return"number"==typeof(null==e?void 0:e.adElementBottom)&&"number"==typeof(null==e?void 0:e.adElementTop)},S=function(e,t){var n={},i=t.find((function(t){return t.slotId===e}));if(null==i||!i.isVisible)return n;var r=t.reduce((function(e,t){return t.slotId!==i.slotId&&t.isVisible&&C(i)&&C(t)&&(E(i,t)&&T(i,t)<O()||!E(i,t)&&T(t,i)<O())?[].concat(e,t.position):e}),[]);return r.length>0&&((n=b({adSlotEventName:"TwoAdsInViewport",id:i.slotId,position:i.position,adElementTop:i.adElementTop,adElementBottom:i.adElementBottom})).ad.sharesViewportWith=r.join(",")),n},P=function(e){return function(t){var n;if(null!=t&&t.id){var i=t.id,r=Object.values(w()()).map(k),a=S(i,r);null!=a&&null!==(n=a.ad)&&void 0!==n&&n.sharesViewportWith&&e(a)}}},M={hover:new RegExp(/1_hover|4_all/)},I=function(e,t){return M.hover.test(t)&&["hover_mouse_enter","hover_mouse_leave"].includes(e)};function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=[d.PUB_EVENTS.AD_SLOT_READY,d.PUB_EVENTS.AD_DEFINED,d.PUB_EVENTS.AD_CALLED,d.PUB_EVENTS.AD_REQUEST_SENT,d.PUB_EVENTS.AD_RENDERED,d.PUB_EVENTS.AD_LOADED,d.PUB_EVENTS.AD_VIEWABLE,d.PUB_EVENTS.AD_EMPTY],R=function(e){return!(!e||"function"!=typeof e)},N=function(e){return L.map((function(t){return Object(p.subscriber)(t,"all",function(e,t){var n;return e===d.PUB_EVENTS.AD_LOADED&&(n=P(t)),function(i){R(t)&&(t(b(j(j({},i),{},{adSlotEventName:e}))),R(n)&&n(j(j({},i),{},{adSlotEventName:e})))}}(t,e))}))},D=function(e){var t,n,i=e.ad,r=i.creativeId,a=i.lineItemId;"number"==typeof r&&(e.ad.creativeId="".concat(r)),"number"==typeof a&&(e.ad.lineItemId="".concat(a)),null===(t=window)||void 0===t||null===(n=t.dataLayer)||void 0===n||n.push(e)},B=function(e,t){D({event:"impression",eventData:{trigger:"ad",action:e,type:"impression"},ad:{slotId:t.id,position:t.position,lineItemId:t.lineItemId,creativeId:t.creativeId}})},z=function(e){return B("time_viewable_start",e)},F=function(e){return B("time_viewable_end",e)},U=function(){var e=o()(u.a.mark((function e(t,n){var i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r=void 0,r=["DFP_EngMetrics"].map((function(e){return new Promise((function(t){Object(f.c)(e).subscribe((function(e){return t(null==e?void 0:e.variant)}))}))})),Promise.all(r).then((function(e){return e.some((function(e){return e}))}));case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return Object(f.e)("DFP_EngMetrics"),e.next=8,new Promise((function(e){Object(f.c)("DFP_EngMetrics").subscribe((function(t){return e(null==t?void 0:t.variant)}))}));case 8:if(i=e.sent,I(t,i)){e.next=12;break}return e.abrupt("return");case 12:D({event:"moduleInteraction",eventData:{type:n.type,trigger:"ad"},ad:{slotId:n.id,position:n.position,creativeId:n.creativeId,lineItemId:n.lineItemId}});case 13:case"end":return e.stop()}var r}),e)})));return function(t,n){return e.apply(this,arguments)}}(),H=function(e){return U("hover_mouse_enter",e)},W=function(e){return U("hover_mouse_leave",e)},q=!1,V=function(e){if("undefined"!=typeof window&&!q){q=!0;var t=N(e);p.addSubscribers.apply(void 0,r()(t).concat([Object(p.subscriber)(d.PUB_EVENTS.AD_ENTERED_VIEWPORT,"all",z),Object(p.subscriber)(d.PUB_EVENTS.AD_LEFT_VIEWPORT,"all",F),Object(p.subscriber)(d.PUB_EVENTS.AD_MOUSE_ENTER,"all",H),Object(p.subscriber)(d.PUB_EVENTS.AD_MOUSE_LEAVE,"all",W)]))}}},Bi8q:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.heading3Selector=t.defaultHeading3Style=t.default=void 0;var r=n("Jqp9"),a=n("3sMT"),o=i(n("wXC7")),s=i(n("WThh")),l=n("6l8D"),c=(0,s.default)(["medium","mediumLarge","small"]),u=(0,r.css)("color:",a.color.content.secondary,";font-weight:",o.default.font.weight.bold,";font-size:",o.default.font.size(18),";line-height:",o.default.font.size(22),";"),d=function(e){return(0,r.css)("color:",a.color.content.secondary,";font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.bold,";",c(e,{fontSize:[18,20],lineHeight:[24,28]}),";")};t.defaultHeading3Style=d;var p=(0,r.themeFn)("treatment",{none:d,magazine:function(e){return(0,r.css)("color:",a.color.content.primary,";font-family:",o.default.font.magazineSansBase,";font-weight:",o.default.font.weight.bold,";",c(e,{fontSize:[15,16],lineHeight:[20,20]}),";")},sponsored:(0,r.css)(u,";font-family:",o.default.font.sponsoredBase,";"),sponsoredSensitive:(0,r.css)(u,";font-family:",o.default.font.sponsoredSensitive,";"),"t-magazine":function(e){return(0,r.css)("color:",a.color.content.secondary,";font-family:",o.default.font.tmagSansBase,";font-weight:",o.default.font.weight.bold,";letter-spacing:0.02em;",c(e,{fontSize:[15,18],lineHeight:[20,28]}),";")},"morning-briefing":function(e){return(0,r.css)("font-size:",o.default.font.size(21),";line-height:",o.default.font.size(31),";font-family:",o.default.font.franklinBase,";margin-top:35px;margin-bottom:25px;border-top:1px solid ",a.color.stroke.quaternary,";padding-top:8px;&:last-child{margin-bottom:0;}",e.theme.breakpointMap.medium,"{margin-bottom:25px;}")},atHome:function(e){return(0,r.css)("font-style:normal;font-family:",o.default.font.imperial,";font-weight:300;letter-spacing:0.2px;color:",a.color.content.secondary,";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;margin:0 20px 50px;font-size:19px;line-height:30px;width:auto;",e.theme.breakpointMap.small,"{width:48%;}",e.theme.breakpointMap.medium,"{padding-right:0;font-size:19px;margin:0 20px 50px;width:48%;}",e.theme.breakpointMap.mediumLarge,"{font-size:21px;margin:0 0 70px;line-height:33px;width:48%;}.",l.linkClass,"{font-weight:bold;border-bottom:2px solid ",a.color.stroke.primary,";color:",a.color.content.primary,";&:hover,&:focus{border-bottom:0;}}strong{color:",a.color.content.primary,";}")},liveSplitLayout:(0,r.css)("color:",a.color.content.secondary,";font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.bold,";font-size:",o.default.font.size(18),";line-height:",o.default.font.size(24),";margin-bottom:",o.default.font.size(12),";")}),f=(0,r.themeFn)("languageDirection",{rightToLeft:(0,r.css)("text-align:right;direction:rtl;unicode-bidi:isolate;")}),m=(0,r.themeFn)("language",{"zh-hans":(0,r.css)("font-family:",o.default.font.cheltenhamSCSerifBase,";font-weight:",o.default.font.weight.bold,";font-style:normal;"),"zh-hant":(0,r.css)("font-family:",o.default.font.cheltenhamTCSerifBase,";font-weight:",o.default.font.weight.bold,";font-style:normal;")}),h=function(e){return(0,r.css)("margin-bottom:",o.default.font.size(12),";",e.theme.breakpointMap.medium,"{margin-bottom:",o.default.font.size(15),";}.",l.linkClass,"{text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:2px;&:hover,&:focus{text-decoration:none;}}")};t.heading3Selector=function(e){return(0,r.css)("h3{",h(e),";",p(e),";}")};var g=(0,r.styled)("h3",{target:"e1gnsphs0"})(h,";",f,";",m,";",p,";");t.default=g},Bk96:function(e,t,n){"use strict";n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return u}));var i=n("Jqp9"),r=n("wXC7"),a=n.n(r),o=Object(i.css)("width:100%;display:flex;flex-direction:column;align-items:center;"),s=Object(i.css)("margin-top:-20px;width:100%;"),l=Object(i.css)("background:linear-gradient(180deg,hsla(0,0%,100%,0),",a.a.color.white,");position:relative;height:110px;margin-top:-126px;width:100%;"),c=Object(i.css)("position:relative;"),u=Object(i.css)("font-family:",a.a.font.franklinBase,";height:40px;width:250px;font-size:15px;font-weight:bold;background:#edf2f5;border:1px solid #93abbc;border-radius:3px;margin:10px auto;color:",a.a.color.blue20,";&:active{background:#bed0dc;border:1px solid #7399b3;}")},BtaY:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("QILm")),a=i(n("W8MJ")),o=i(n("lwsE")),s=i(n("7W2i")),l=i(n("a1gu")),c=i(n("Nsbk")),u=i(n("uf0L")),d=["url","name"];function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,l.default)(this,n)}}var f=function(e){(0,s.default)(n,e);var t=p(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.url,s=i.name,l=(0,r.default)(i,d);return(0,o.default)(this,n),(e=t.call(this,l))["@type"]="Person",e.url=a,e.name=s,e}return(0,a.default)(n)}(u.default);t.default=f},"C+GW":function(e,t,n){"use strict";var i,r=n("VkAN"),a=n.n(r),o=n("gcR/"),s=n.n(o),l=(n("q1tI"),n("eFc+")),c=n.n(l),u=n("4G62"),d=n.n(u),p=n("WPUH"),f=n("Jqp9"),m=n("wXC7"),h=n.n(m),g=Object(f.css)("margin:",h.a.breakpoint.mobileBlockMargins,";",h.a.breakpoint.medium,"{margin:",h.a.breakpoint.desktopMediaMargins,";}"),y=function(e){var t=e.data,n=e.usePhotoViewer;if(!t)return null;if(!t.imageOne)return null;if(!t.imageTwo)return null;var i={media:t.imageOne,size:""},r={media:t.imageTwo,size:""};return s()(d.a,{className:g,size:t.size.toLowerCase()},void 0,s()(p.a,{data:i,useMobileCrop:Boolean(i.media),diptychChild:!0,lazyLoad:!0,mediaType:"Image",usePhotoViewer:n}),s()(p.a,{data:r,useMobileCrop:Boolean(r.media),diptychChild:!0,lazyLoad:!0,mediaType:"Image",usePhotoViewer:n}))};y.displayName="DiptychBlock",y.defaultProps={usePhotoViewer:!0},y.fragments={data:c()(i||(i=a()(['\n    fragment DiptychBlock_data on DiptychBlock {\n      size\n      imageOne {\n        id\n        ... on Image {\n          id\n          imageType\n          url\n          uri\n          credit\n          legacyHtmlCaption\n          altText\n          crops(\n            renditionNames: ["articleLarge", "jumbo", "superJumbo", "popup", "mobileMasterAt3x"]\n          ) {\n            renditions {\n              url\n              name\n              width\n              height\n            }\n          }\n          caption {\n            text\n            content {\n              ... on ParagraphBlock {\n                __typename\n                content {\n                  ... on TextInline {\n                    text\n                    ...TextInline_content\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n      imageTwo {\n        id\n        ... on Image {\n          id\n          imageType\n          url\n          uri\n          credit\n          legacyHtmlCaption\n          altText\n          crops(\n            renditionNames: ["articleLarge", "jumbo", "superJumbo", "popup", "mobileMasterAt3x"]\n          ) {\n            renditions {\n              url\n              name\n              width\n              height\n            }\n          }\n          caption {\n            text\n            content {\n              ... on ParagraphBlock {\n                __typename\n                content {\n                  ... on TextInline {\n                    text\n                    ...TextInline_content\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  '])))};t.a=y},"C/YW":function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=n("Jqp9"),s=i(n("5ugd")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("crgc")),c=i(n("/4sL"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var d=function(e){var t=e.host,n=e.onLogin,i=e.newsletter,r=e.lireParams,u=e.isOpen,d=e.handleClose,p=e.overlayClassName,f=e.modalClassName,m=e.dismissClassName,h=e.closeIconStroke;return a.default.createElement(s.default,{isOpen:u,handleClose:d,overlayClassName:(0,o.cx)(l.overlayClass,p),className:(0,o.cx)(l.modalClass,f),dismissClassName:(0,o.cx)(l.dismissClass,m),contentLabel:"Log in and Registration",role:"dialog",closeIconStroke:h,shouldFocusAfterRender:!0,shouldReturnFocusAfterClose:!0,shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!0},a.default.createElement(c.default,{host:t,onLogin:function(){d(),n()},newsletter:i,lireParams:r}))};d.displayName="LireLoginModal";var p=d;t.default=p},"C/n8":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("aN1B")).default;t.default=r},C2Ll:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseImageData=t.getTwitterCrop=t.getPromotionalMediaCrop=t.getPromoMedia=t.getPromoCropObj=t.getLedeVideoCrops=t.getCropByPriority=t.getCrop=t.get75Crop=t.get150Crop=t.flattenCropArray=t.filterCrops=t.fetchVideoThumb=t.fetchHeadshots=t.defaultPromoCrop=t.defaultCrop=t.collapsePromoMedia=void 0;t.getPromoMedia=function(e){return null!=e&&e.imageExtensions?e.imageExtensions.filteredCrops:null};var i=function(e,t){return e.find((function(e){return e.name===t}))};t.getCrop=i;var r=function(e,t){if(!e)return null;for(var n=0;n<t.length;n+=1){var r=i(e,t[n]);if(null!=r&&r.url)return"images"===r.url.split("/")[0]&&(r.url="https://static01.nyt.com/".concat(r.url)),r}return null};t.getCropByPriority=r;var a="https://static01.nyt.com/images/icons/t_logo_150_black.png";t.defaultCrop=a;var o={width:365,height:60,url:"https://static01.nyt.com/images/icons/t_logo_291_black.png"};t.defaultPromoCrop=o;t.getPromoCropObj=function(e){return r(e,["facebookJumbo","watch308","videoSixteenByNineJumbo1600","articleLarge"])||o};t.getTwitterCrop=function(e){return r(e,["videoSixteenByNineJumbo1600","articleLarge"])||a};var s=function(e){return r(e,["thumbLarge"])||a};t.get150Crop=s;t.get75Crop=function(e){return r(e,["thumbStandard"])||a};var l=function e(t){return t.reduce((function(t,n){return t.concat(Array.isArray(n)?e(n):n)}),[])};t.flattenCropArray=l;t.getPromotionalMediaCrop=function(e){var t;return e?e.promoCrops?e.promoCrops:null!==(t=e.promotionalMedia)&&void 0!==t&&t.promoCrops?e.promotionalMedia.promoCrops:null:null};var c=function(e,t){var n;if(!e||!e.crops||0===e.crops.length)return{};var i=e.crops.map((function(e){return e.renditions})),r=l(i),a=r[0];t&&(a=r.find((function(e){return e.name===t}))||r[0]);var o=a,s=o.height,c=o.width,u=o.url;return{caption:(e.legacyHtmlCaption?e.legacyHtmlCaption:null===(n=e.caption)||void 0===n?void 0:n.text)||null,credit:e.credit||null,url:u,orientation:s>=c?"layoutVertical":"layoutHorizontal",height:s,width:c}};t.parseImageData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"jumbo";return c(e,t)};t.fetchVideoThumb=function(e){return c(e,"videoSixteenByNine600")};t.fetchHeadshots=function(e){var t;try{t=e.creators.map((function(e){var t=e.promotionalMedia,n=e.displayName,i=e.bioUrl;return{crops:(null==t?void 0:t.crops)||[],name:n,bioUrl:i||null}}))}catch(e){return null}return t.map((function(e){var t=e.name,n=e.crops,i=e.bioUrl;return{name:t,renditions:n.map((function(e){return e.renditions})),bioUrl:i}})).map((function(e){var t=e.name,n=e.renditions,i=e.bioUrl;return{name:t,flatCrops:l(n),bioUrl:i}})).map((function(e){var t=e.name,n=e.flatCrops,i=e.bioUrl;return{name:t,crop:s(n),bioUrl:i}}))};t.collapsePromoMedia=function(e){var t,n=[];return null!=e&&null!==(t=e.crops)&&void 0!==t&&t.length&&e.crops.forEach((function(e){var t;null!==(t=e.renditions)&&void 0!==t&&t.length&&e.renditions.forEach((function(e){n.push(e)}))})),n};t.getLedeVideoCrops=function(e){var t;if(null!=e&&null!==(t=e.content)&&void 0!==t&&t.length)for(var n=0;n<e.content.length;n+=1){var i=e.content[n];if("HeaderLegacyBlock"===i.__typename&&i.ledeMedia&&i.ledeMedia.__typename&&"VideoBlock"===i.ledeMedia.__typename&&i.ledeMedia.media&&i.ledeMedia.media.promotionalMedia){var r=i.ledeMedia.media.promotionalMedia;if(!r||!r.crops||0===r.crops.length)break;var a=r.crops.map((function(e){return e.renditions}));return l(a)}}return[]};t.filterCrops=function(e){if(!e)return"";if(!e.promotionalMedia)return"";var t,n=e.promotionalMedia.crops||null;n||null!==(t=e.promotionalMedia.promotionalMedia)&&void 0!==t&&t.crops&&(n=e.promotionalMedia.promotionalMedia.crops);if(!n)return"";var i=n.map((function(e){return e.renditions}));if(!i)return"";var r=l(i);return r||""}},CKk2:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.contentToProps=function(e){var t={};return e.forEach((function(e){var n,i=a(e.type);if((null===(n=e.content)||void 0===n?void 0:n.length)>0&&"text"===e.content[0].type){var o="".concat(i,"Content");t[o]=e.content.map(s).map(r.default)}})),t},t.getComponentType=a,t.mapConstructTextInlineUnion=s,t.typeToTypename=o;var r=i(n("XlcC"));function a(e){var t=e.match(/[^_]+/g);if(null===t)throw new Error("No valid component name found for type: ".concat(e));return t[t.length-1]}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)).concat(t)}function s(e){var t,n=e;return n.__typename="TextInline",(null===(t=e.formats)||void 0===t?void 0:t.length)>0&&(n.formats=n.formats.map((function(e){var t=e;return t.__typename=o(e.type,"Format"),delete t.type,t}))),delete n.type,e}},Cb8S:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lwsE")),a=i(n("W8MJ")),o=i(n("7W2i")),s=i(n("a1gu")),l=i(n("Nsbk")),c=n("q1tI");n("17x9");function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,l.default)(e);if(t){var r=(0,l.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,s.default)(this,n)}}var d=function(e){(0,o.default)(n,e);var t=u(n);function n(){var e;(0,r.default)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={error:!1},e}return(0,a.default)(n,[{key:"componentDidCatch",value:function(e){console.error(e.stack),this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?null:this.props.children}}]),n}(c.Component);d.displayName="ErrorBoundary";var p=d;t.default=p},Cebk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleKeyNavigation=void 0;var i=n("AKP5");t.handleKeyNavigation=function(e){return function(t){39===t.keyCode&&(0,i.handleNavRight)(e),37===t.keyCode&&(0,i.handleNavLeft)(e)}}},CsDw:function(e,t,n){"use strict";n.d(t,"m",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"g",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"i",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"j",(function(){return f})),n.d(t,"k",(function(){return m})),n.d(t,"l",(function(){return h}));var i="typ",r="bt",a="als_test_clientside",o=[i,"pos","ver","prop","plat","vp"],s={AD_REQUEST:"adRequest",AD_NO_FILL:"adFetchNoFill",AD_FETCH_SUCCESS:"adFetchSuccess",AD_FETCH_ERROR:"adFetchError",AD_EMPTY_OTHER:"adEmpty"},l="hasBT",c="hasClientside",u="hasCriticalTargeting",d="has_bt",p="has_als_test_clientside",f="has_critical_kvps",m="is_alice_cache",h="is_bt_empty"},CzSb:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),i(n("yEZI"))),o=n("O9F4"),s=function(e){var t=e.reporterHeadshot,n=e.children;return r.default.createElement("div",{className:o.bodyClass},r.default.createElement("div",{className:o.reporterContainerClass},r.default.createElement("div",{className:o.headshotContainerClass},r.default.createElement("div",{className:o.headshotClass},t)),r.default.createElement("div",{className:o.textClass},r.default.createElement(a.default,{className:o.textClass},n))))};s.displayName="FeaturedReporterBase",s.defaultProps={reporterHeadshot:void 0};var l=s;t.default=l},"D/my":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OnsiteNewsletterName=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),i(n("42vy"))),o=n("Jqp9"),s=n("L1jB"),l=n("AhCu"),c=function(e){var t=e.isInAMP,n=e.newsletterName,i=t?l.ampNewsletterNameClass:"";return r.default.createElement(s.LabelContainer,{className:l.newsletterNameContainerClass},r.default.createElement(a.default,{className:(0,o.cx)(l.newsletterNameClass,i),"data-testid":"newsletter-name-label"},n))};t.OnsiteNewsletterName=c,c.displayName="OnsiteNewsletterName",c.defaultProps={isInAMP:!1};var u=c;t.default=u},D3tI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.storyline,n=e.block;if(!n||!t)return!1;var r=n.type,a=n.version,o=(0,i.deserializeExperimentalJsonBlob)(t);return!!(0,i.getExperimentalAssetBlock)(o,r,a)};var i=n("uJd7")},D4NZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=[],i=0;i<e;i+=1)n.push(t);return n.join("")};t.default=i},D5MC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StorylineTone=t.PrimaryAssetStatusMap=t.PrimaryAssetStatus=void 0;t.StorylineTone={News:"NEWS",Feature:"FEATURE",Opinion:"OPINION",None:"NO_TONE_SET"};t.PrimaryAssetStatusMap={BREAKING:"breaking",UPCOMING:"upcoming",LIVE:"live",NEW:"New",UNSET:""};t.PrimaryAssetStatus={BREAKING:"BREAKING",UPCOMING:"UPCOMING",LIVE:"LIVE",NEW:"NEW",UNSET:"UNSET"}},DH8m:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("J4zp"),r=n.n(i),a=n("q1tI"),o=n("hKI/"),s=n.n(o);function l(e){var t=e.percent,n=Object(a.useState)(!1),i=r()(n,2),o=i[0],l=i[1],c=Object(a.useRef)(!1);return Object(a.useEffect)((function(){var e=s()((function(){var e=document.documentElement.scrollHeight-window.innerHeight,n=window.pageYOffset/e>=t;n&&(c.current=!0),n!==o&&l(n)}),300);return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[o,t]),{hasMetThreshold:c.current,isBelowThreshold:o}}},DNUX:function(e,t,n){"use strict";var i,r,a,o,s,l,c,u,d,p,f,m,h,g,y,v,b,_,w,x=n("gcR/"),k=n.n(x),O=n("J4zp"),E=n.n(O),T=n("q1tI"),C=n("XnIf"),S=n("3sMT"),P=n("Jqp9"),M=n("wXC7"),I=n.n(M),A=Object(P.css)("border-top:1px solid ",S.color.stroke.quaternary,";padding:0 20px;",I.a.breakpoint.medium,"{padding:0 13%;}",I.a.breakpoint.large,"{border-top:0;padding:0 20px;}"),j=Object(P.css)("font-family:",I.a.font.franklinBase,";font-weight:",I.a.font.weight.bold,";font-size:13px;text-transform:uppercase;letter-spacing:0.03em;padding:15px 0;"),L=Object(P.css)("border-top:1px solid ",S.color.stroke.quaternary,";padding-top:15px;"),R=Object(P.css)("font-family:",I.a.font.franklinBase,";font-size:15px;font-weight:",I.a.font.weight.medium,";padding-bottom:15px;width:100%;color:",S.color.content.quaternary,";strong{font-weight:",I.a.font.weight.bold,";}em{font-style:italic;}"),N=Object(P.css)("background-color:",S.color.background.secondary,";border:1px solid ",S.color.stroke.secondary,";border-radius:3px;box-sizing:border-box;display:inline-block;max-width:100%;margin-right:3px;margin-bottom:3px;padding:3px;vertical-align:top;"),D=Object(P.css)("appearance:none;background-color:transparent;background-image:none;border:0;box-shadow:none;box-sizing:border-box;max-width:100%;cursor:pointer;color:",S.color.content.quaternary,";font-family:",I.a.font.franklinBase,";line-height:1;padding:5px 30px 5px 8px;"),B=Object(P.css)("height:8px;margin-left:-20px;margin-top:9px;pointer-events:none;position:absolute;width:13px;"),z=Object(P.css)(I.a.button.action,";display:inline-block;font-size:14px;line-height:14px;margin-bottom:15px;padding:10px 15px 8px;"),F={33614678:"Faceboook",33597998:"Rubicon Project",30252878:"Index Exchange",39318518:"Index Exchange EBDA",32855678:"Yieldmo",21966278:"Google Ad Exchange",32074718:"Amazon",38636678:"AppNexus",33597638:"OpenX",4400775978:"OpenX EBDA"};function U(e){var t,n=e.adData,x=Object(T.useState)("(eg. slow ad, inappropriate ad)"),O=E()(x,2),P=O[0],M=O[1],I=n.deviceType,U=n.page,H=n.position,W=n.sourceAgnosticCreativeId,q=n.sourceAgnosticLineItemId,V=n.googleQueryId,G=n.advertiserId,Y=n.pageUrl,Z=n.clickUrl,X=n.size,J=F[G];t=Array.isArray(X)?0===X[0]?"fluid":X.join("x"):"";var K=encodeURIComponent("Capture Ad / ".concat((new Date).toLocaleDateString("en-US")," / ").concat(q," / ").concat(P," (Experimental Only)")),$=encodeURIComponent("* * * This is currently only a tech test--no action will be taken at this time. * * *\n\nReason: ".concat(P,"\n\nScreenshot: (please attach a screenshot of the ad)\n\n-----------\n\nCreative ID: ").concat(W,"\n\nLine Item ID: ").concat(q,"\n\nQuery ID: ").concat(V,"\n\n").concat(J?"Company Name: ".concat(J,"\n\n"):"","Platform: web\n\nDevice Type: ").concat(I,"\n\nPage Type: ").concat(U,"\n\nAd Position: ").concat(H,"\n\nAd Size: ").concat(t,"\n\nPage URL: ").concat(Y,"\n\nClick-through URL: ").concat(Z));return k()("section",{className:A},void 0,k()("h2",{className:j},void 0,"Debug Info"),k()("ul",{className:L},void 0,k()("li",{},void 0,k()("div",{className:N},void 0,k()("select",{className:D,onChange:function(e){M(e.target.value)}},void 0,i||(i=k()("option",{value:"(eg. slow ad, inappropriate ad)"},void 0,"Select ad behavior...")),r||(r=k()("option",{},void 0,"Content is inappropriate for the specific article")),a||(a=k()("option",{},void 0,"Ad is being targeted or recurs over and over")),o||(o=k()("option",{},void 0,"Ad creative doesnt render properly or appears to be broken")),s||(s=k()("option",{},void 0,"Ad is intrusive or violates posted specs or industry standards")),l||(l=k()("option",{},void 0,"Ad is suspicious or malicious")),c||(c=k()("option",{},void 0,"Ad violates creative quality (offensive content)")),u||(u=k()("option",{},void 0,"Great ad! Right on target!")),d||(d=k()("option",{},void 0,"Other"))),k()(C.a,{fill:S.color.content.quaternary,className:B})),k()("a",{href:"mailto:devtest-AdFrameworks@nytimes.com?subject=".concat(K,"&body=").concat($),target:"_blank",rel:"noopener noreferrer",className:z},void 0,"Submit")),k()("li",{className:R},void 0,p||(p=k()("em",{},void 0,"Note: This is a test and is for data collection purposesaction will not be taken to remove the ad just yet.")))),k()("ul",{className:L},void 0,k()("li",{className:R},void 0,f||(f=k()("strong",{},void 0,"Creative ID: ")),W),k()("li",{className:R},void 0,m||(m=k()("strong",{},void 0,"Line Item ID: ")),q),k()("li",{className:R},void 0,h||(h=k()("strong",{},void 0,"Query ID: ")),V),J&&k()("li",{className:R},void 0,g||(g=k()("strong",{},void 0,"Company Name: ")),J)),k()("ul",{className:L},void 0,k()("li",{className:R},void 0,y||(y=k()("strong",{},void 0,"Platform: ")),"web"),k()("li",{className:R},void 0,v||(v=k()("strong",{},void 0,"Device Type: ")),I),k()("li",{className:R},void 0,b||(b=k()("strong",{},void 0,"Page Type: ")),U),k()("li",{className:R},void 0,_||(_=k()("strong",{},void 0,"Ad Position: ")),H),k()("li",{className:R},void 0,w||(w=k()("strong",{},void 0,"Ad Size: ")),t)))}U.displayName="ReportModal",U.defaultProps={adData:{deviceType:"",page:"",position:"",sourceAgnosticCreativeId:0,sourceAgnosticLineItemId:0,googleQueryId:"",advertiserId:0,pageUrl:"",clickUrl:"",size:[]}};t.a=U},Dl94:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lSNA")),a=i(n("QILm")),o=i(n("W8MJ")),s=i(n("lwsE")),l=i(n("7W2i")),c=i(n("a1gu")),u=i(n("Nsbk")),d=i(n("Nz+N")),p=n("6hsm"),f=["articleBody","url"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.default)(this,n)}}var y=function(e){(0,l.default)(n,e);var t=g(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.articleBody,o=i.url,l=(0,a.default)(i,f);return(0,s.default)(this,n),(e=t.call(this,h(h({},l),{},{url:o})))["@type"]="AdvertiserContentArticle",e.articleBody=r,e.mainEntityOfPage=o,e.publisher=p.PUBLISHER_ID_OBJ,e.copyrightHolder=p.PUBLISHER_ID_OBJ,e.copyrightYear=(new Date).getFullYear(),e}return(0,o.default)(n)}(d.default);t.default=y},DnBa:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getSectionWithLogo=void 0;var r=i(n("lSNA"));function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.getSectionWithLogo=function(e,t){if(e&&e.displayName&&t){var n=t[e.displayName];if(n)return o(o({},e),{},{displayName:e.displayName,Logo:n})}}},DpJz:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var i,r=n("VkAN"),a=n.n(r),o=n("gcR/"),s=n.n(o),l=(n("q1tI"),n("eFc+")),c=n.n(l),u=n("Jqp9"),d=n("MxTu"),p=n.n(d),f=n("XlcC"),m=n("HTd6"),h=n("jOYC"),g=Object(u.css)(h.b.layout.nonInterrupterTextElementBaseClass," margin-top:2.4em;margin-bottom:2.4em;");function y(e){var t,n=e.data,i=e.className,r=Object(u.useTheme)().noFollowExternalLinks,a=Object(f.createMapInlineUnionWithOptions)({noFollowExternalLinks:r});return s()(p.a,{quote:n.quote.map(a),attribution:null===(t=n.attribution)||void 0===t?void 0:t.map(a),className:Object(u.cx)(g,i)})}y.displayName="PullquoteBlock",y.defaultProps={data:null,className:void 0},y.fragments={data:c()(i||(i=a()(["\n    fragment PullquoteBlock_data on PullquoteBlock {\n      quote {\n        ...TextInline_content\n      }\n      attribution {\n        ...TextInline_content\n      }\n    }\n    ","\n  "])),m.a.fragments.content)}},"E+3E":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,n("Jqp9").css)("max-width:100%;");t.default=i},E0i8:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return c}));var i=n("J4zp"),r=n.n(i),a=n("q1tI"),o=n("hKI/"),s=n.n(o);function l(){var e=Object(a.useState)(!1),t=r()(e,2),n=t[0],i=t[1];return Object(a.useEffect)((function(){var e=s()((function(){window.pageYOffset>window.innerHeight&&i(!0),window.pageYOffset<window.innerHeight&&i(!1)}),300);return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]),n}function c(e){return(0,e.children)(l())}},E2S6:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.imageCreditClass=t.containerClass=t.ampContainerClass=t.StyledQuoteContainer=t.StyledAttribution=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=n("3sMT");t.containerClass=function(e){return(0,r.css)("display:flex;flex-direction:column;align-items:center;margin:",a.default.breakpoint.mobileBlockMargins,";figure{margin:0;}img + span{margin-left:20px;}",a.default.breakpoint.small,"{img + span{margin-left:0;}}",a.default.breakpoint.medium,"{flex-direction:",e?"column":"row",";margin:",a.default.breakpoint.desktopMediaMargins,";}",a.default.breakpoint.mediumLarge,"{max-width:945px;}")};var s=(0,r.themeFn)("treatment",{none:(0,r.css)("font-size:",a.default.font.size(16),";font-family:",a.default.font.franklinBase,";font-weight:",a.default.font.weight.bold,";"),feature:(0,r.css)("font-size:",a.default.font.size(16),";font-family:",a.default.font.franklinBase,";font-weight:",a.default.font.weight.bold,";"),magazine:(0,r.css)("font-size:",a.default.font.size(16),";font-family:",a.default.font.magazineSansBase,";font-weight:",a.default.font.weight.book,";")}),l=(0,r.styled)("p",{target:"ebi488z0"})(s,";margin-top:1.5rem;color:",o.color.content.secondary,";",a.default.breakpoint.small,"{margin-top:1rem;}");t.StyledAttribution=l;var c=(0,r.themeFn)("treatment",{none:(0,r.css)("font-family:",a.default.font.serifMedium,";font-weight:",a.default.font.weight.extraLight,";font-size:",a.default.font.size(23),";line-height:1.3;display:flex;justify-content:center;align-items:flex-start;flex-direction:column;margin-top:0.8em;width:",a.default.breakpoint.mobileFullWidth,";max-width:600px;",a.default.breakpoint.small,"{font-size:",a.default.font.size(24),";line-height:1.2;}"),feature:(0,r.css)("font-family:",a.default.font.serifMedium,";font-weight:",a.default.font.weight.extraLight,";font-size:",a.default.font.size(23),";line-height:1.3;display:flex;justify-content:center;align-items:flex-start;flex-direction:column;margin-top:0.8em;width:",a.default.breakpoint.mobileFullWidth,";max-width:600px;",a.default.breakpoint.small,"{font-size:",a.default.font.size(24),";line-height:1.2;}"),magazine:(0,r.css)("font-family:",a.default.font.magazineSansBase,";font-weight:",a.default.font.weight.book,";font-size:",a.default.font.size(24),";line-height:",a.default.font.size(28),";display:flex;color:",o.color.content.primary,";letter-spacing:0.005em;justify-content:center;align-items:flex-start;flex-direction:column;margin-top:0.8em;width:",a.default.breakpoint.mobileFullWidth,";max-width:600px;")}),u=(0,r.styled)("div",{target:"ebi488z1"})(c,";",a.default.breakpoint.small,"{padding:0.8rem 2rem 0.8em;}",a.default.breakpoint.medium,"{margin-top:0;padding:2rem;flex:0 1 50%;}");t.StyledQuoteContainer=u;var d=(0,r.css)("margin:10px 20px 0 20px;",a.default.breakpoint.small,"{margin:10px 20px 0 20px;}",a.default.breakpoint.mediumLarge,"{margin-left:0;}");t.imageCreditClass=d;var p=(0,r.css)("width:100%;");t.ampContainerClass=p},E7dQ:function(e,t,n){"use strict";var i=n("XiaQ"),r=n.n(i),a=n("CsDw");t.a=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(null===(e=t.getTargeting)||void 0===e?void 0:e.call(t,a.m)[0])||r()()[a.m]||"notfound"}},E8RS:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"g",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"i",(function(){return u})),n.d(t,"h",(function(){return d}));var i=/0_.*/,r="646784865e39b00001877935",a="6467843f672d9300018b5c41",o="647769b8784f1b0001fb5c65",s="6466479d7aab50000175c55c",l="64664bdb2c06c40001baad91",c="64664b992c06c40001ba3886",u={name:"STYLN_trust_metering",variant:"1_variant"},d={name:"STYLN_pharmacy_client_side",variant:"1_variant"}},E8oU:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("J4zp")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),s=(i(n("17x9")),n("boCj")),l=n("xHA4"),c=i(n("eRNE")),u=i(n("cc1G")),d=i(n("sWm8")),p=n("YV1h");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function m(e){var t=e.storyline,n=e.trackEvent,i=e.parentUrl,r=e.isPeeking,f=e.trackLinkInteraction,m=e.trackLinkInteractionV2,h=e.internalLinkTrackingParams,g=(0,o.useState)(!1),y=(0,a.default)(g,2),v=y[0],b=y[1];if(t.context)return o.default.createElement(c.default,{parentUrl:i,storyline:t,isPeeking:r,trackLinkInteraction:m,internalLinkTrackingParams:h,trackImpressionEvent:n});var _=(0,l.getExperimentalAssetDataFromStoryline)({storyline:t,block:l.STORYLINE_BLOCKS.context});if(!_)return null;var w=_.items,x=_.title;return o.default.createElement(s.InView,{as:"section",role:"complementary",className:p.contextContainerClass,"aria-label":x,onChange:function(e){e&&!v&&n&&(n({event:"impression"}),b(!0))}},o.default.createElement("div",{className:p.contextHeaderClass},o.default.createElement("h2",{className:p.titleClass},x)),w.length<=2?o.default.createElement(u.default,{items:w,singleCard:!0}):o.default.createElement(d.default,{title:x,items:w,parentUrl:i,trackEvent:n,isPeeking:r,trackLinkInteraction:f}))}m.displayName="StorylineContext",m.defaultProps={isPeeking:!1,trackEvent:null,trackLinkInteraction:function(){},trackLinkInteractionV2:function(){},internalLinkTrackingParams:null};var h=m;t.default=h},EVBM:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.TranslationPropTypes=t.TimestampBlockPropTypes=t.ContentShapePropTypes=t.BylinesPropTypes=void 0;var r=i(n("17x9")),a=r.default.shape({headshots:r.default.arrayOf(r.default.any),bylines:r.default.arrayOf(r.default.shape({creators:r.default.arrayOf(r.default.shape({displayName:r.default.string,bioUrl:r.default.string}).isRequired).isRequired,prefix:r.default.string.isRequired}).isRequired).isRequired,role:r.default.arrayOf(r.default.any)});t.BylinesPropTypes=a;var o=r.default.shape({timestamp:r.default.string,showUpdatedTimestamp:r.default.oneOf([r.default.boolean,null])});t.TimestampBlockPropTypes=o;var s=r.default.shape({language:r.default.shape({code:r.default.string.isRequired}).isRequired,url:r.default.string.isRequired,translatedLinkText:r.default.string.isRequired,linkText:r.default.string.isRequired});t.TranslationPropTypes=s;var l=r.default.shape({content:r.default.arrayOf(r.default.shape({__typename:r.default.string.isRequired,text:r.default.string.isRequired,formats:r.default.arrayOf(r.default.any).isRequired}))});t.ContentShapePropTypes=l},EYBZ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getSectionUrlFromCollections=t.getPrimaryCollection=t.getCollectionType=t.getCollectionData=t.NO_FOLLOW_COLLECTIONS=void 0;var r=i(n("lSNA")),a=i(n("LgWu"));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.getPrimaryCollection=function(e){var t=[{name:"SERIES",priority:1},{name:"NEWS_EVENT",priority:2},{name:"SPOTLIGHT",priority:3},{name:"COLUMN",priority:4},{name:"ISSUE",priority:5}];if(!e)return null;var n=[];return e.forEach((function(e){var i=e.collectionType;t.forEach((function(t){t.name===i&&n.push(s(s({},e),{},{priority:t.priority}))}))})),n.sort((function(e,t){return e.priority-t.priority})),n[0]?n[0]:null};var l=function(e){switch(e.collectionType){case"ISSUE":return"issue";case"NEWS_EVENT":return"news-event";case"SECTION":return"section";case"SERIES":return"series";case"SPOTLIGHT":return"spotlight";default:return""}};t.getCollectionType=l;t.getCollectionData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t={url:"",displayName:"",slug:"",tagline:"",uri:"",type:""};if(e){if(t.url=e.url||"",e.url){var n=a.default.parse(e.url);t.uri=n.pathname||""}t.displayName=e.name||"",t.slug=e.slug||"",t.tagline=e.tagline||"",t.type=l(e)}return t};t.getSectionUrlFromCollections=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch(!0){case e.includes("section/science/earth"):return"/section/climate";case e.includes("section/insider"):return"/section/reader-center";case e.includes("pages/business/international"):return"/section/business";default:return e}};return(e=t&&t.url&&t.url.includes("section/")?t:n&&n.length&&t&&n.find((function(e){return"SECTION"===e.collectionType&&(e.slug===t.name||e.name===t.displayName)&&e.url}))||t)?i(e.url||void 0):""};t.NO_FOLLOW_COLLECTIONS=["nyt://legacycollection/432e557b-f9e9-5fe1-8cff-76c602fb3410","nyt://legacycollection/08c818ad-3f50-5de2-b8a3-c3336f27d578","nyt://legacycollection/e9bc7280-968d-520b-8d9b-0f260ef96863","nyt://legacycollection/a708bb7b-59a6-5552-8eb3-efd0a70b9bda","nyt://legacycollection/e326f118-36dd-548f-bba6-1dce6c6ed110","nyt://legacycollection/be770dc6-1024-58ca-9f33-4a51f12f85a7"]},EhNO:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n("q1tI"));t.default=function(){return r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"23.7 -85.1 300 39.5",role:"img","aria-label":"The New York Times Logo"},r.default.createElement("path",{d:"m46.2-81c0-3.2-3-4.2-5.6-4v.5c1.5 0 2.7.5 2.7 1.6 0 .7-.5 1.6-2 1.6-1.2 0-3.5-.7-5.4-1.3-2.1-.7-4-1.4-5.6-1.4-3.2 0-5.6 2.4-5.6 5.3 0 2.4 1.8 3.2 2.5 3.5l.2-.4c-.5-.3-.9-.7-.9-1.6 0-.7.6-1.8 2.3-1.8 1.5 0 3.4.7 6 1.4 2.2.6 4.7 1.2 6 1.4v5l-2.5 2.1v.2l2.5 2.2v6.9c-1.3.7-2.8.9-4 .9-2.4 0-4.6-.6-6.4-2.6l6.7-3.2v-11.1l-8.2 3.6c.9-2.2 2.6-3.6 4.3-4.7l-.1-.4c-4.9 1.3-9.3 5.8-9.3 11.3 0 6.6 5.4 11.5 11.5 11.5 6.6 0 10.8-5.2 10.7-10.6h-.4c-1 2.1-2.4 4.1-4.2 5.1v-6.8l2.6-2.1v-.2l-2.6-2.1v-5c2.3-.1 4.8-1.8 4.8-4.8zm-14.2 18-2 1c-1.1-1.5-1.9-3.5-1.9-6.2 0-1.1.1-2.5.5-3.5l3.4-1.5zm17.3 3.6-2.2 1.6.3.3 1-.7 3.6 3.3 4.9-3.3-.2-.3-1.3.8-1.6-1.6v-11.2l1.3-1 2.8 2.3v9.9c0 6.2-1.4 7.2-4.2 8.2v.4c4.6.2 8.8-1.4 8.8-9.3v-10.6l1.5-1.2-.2-.2-1.3 1-4-3.5-4.6 3.5v-13.4h-.3l-5.8 3.9v.3c.6.4 1.6.6 1.6 2.5v18.3zm29.8-1.7-4 3.1-4.1-3.3v-1.9l7.7-5.2v-.2l-3.8-5.9-8.5 4.5v10.7l-1.7 1.3.3.3 1.5-1.2 5.5 4 7.4-5.8zm-8.1-2.7v-8l.3-.2 3.6 5.6zm39.3-18.7c0-.5-.1-.9-.3-1.5h-.4c-.5 1.4-1.1 2.1-2.7 2.1-1.4 0-2.5-.9-3.1-1.5l-4.7 5.4.4.4 1.3-1.5c1 .8 1.7 1.5 4 1.6v13.5l-9.5-16.5c-.7-1.2-2-3.1-4.3-3.1-2.6 0-4.9 2.2-4.6 5.9h.5c.1-1 .6-2.1 1.7-2.1.9 0 1.7.9 2.1 1.6v5.3c-3 0-4.9 1.4-4.9 3.8 0 1.2.6 3.3 2.7 3.7v-.4c-.3-.3-.5-.6-.5-1.1 0-.9.7-1.5 1.9-1.5.2 0 .7 0 .9.1v6.9c-3.5 0-6.1 1.9-6.1 5.2 0 3.1 2.7 4.6 5.5 4.4v-.4c-1.7-.2-2.7-1-2.7-2.1 0-1.4 1-2.1 2.3-2.1s2.5.8 3.3 1.7l4.7-5.2-.4-.4-1.2 1.4c-1.8-1.6-2.8-2.2-4.9-2.5v-16.3l13.2 22.9h.9v-22.9c2.5-.1 4.9-2 4.9-4.8zm11.8 21.4-4 3.1-4.2-3.3v-1.9l7.7-5.2v-.2l-3.8-5.9-8.4 4.5v10.7l-1.7 1.3.3.3 1.5-1.2 5.5 4 7.4-5.8zm-8.2-2.7v-8l.3-.2 3.6 5.6zm34.9-8.9-1.2.9-3.1-2.6-3.6 3.3 1.5 1.4v12.3l-4-2.5v-10l1.3-.9-3.8-3.5-3.5 3.3 1.5 1.4v11.7l-.5.3-3.5-2.4v-9.8c0-2.3-1.1-2.9-2.5-3.8-1.2-.7-1.7-1.4-1.7-2.5 0-.9.9-1.5 1.4-1.7v-.4c-1.2 0-4.7 1.3-4.8 4.5 0 1.6.7 2.3 1.6 3.1.8.8 1.6 1.5 1.6 2.9v9.4l-1.7 1.4.3.4 1.6-1.2 4.3 3.4 4.1-2.8 4.5 2.8 8.7-5v-10.9l2.1-1.6zm30.2-9-1.6 1.5-3.6-3.2-5.3 4v-3.7h-.5l.1 26.4c-.5-.1-1.9-.4-3.1-.6l-.1-22.1c0-1.6-1.2-3.9-4.1-3.9-3 0-4.9 2.3-4.9 4.6h.5c.2-1 .7-1.8 1.6-1.8 1 0 1.9.6 1.9 2.8v6.4c-3 .1-4.7 1.8-4.7 3.8 0 1.3.6 3.3 2.7 3.3l.1-.4c-.7-.3-.9-.7-.9-1.1 0-.9.9-1.3 2.1-1.3h.6v10.1c-2.4.8-3.5 2.6-3.5 4.5 0 2.7 2.2 4.8 5.4 4.8 2.3 0 4.2-.4 6.3-.9 1.7-.3 3.7-.7 4.7-.7 1.2 0 1.8.6 1.8 1.5 0 1.1-.5 1.6-1.2 1.7l.1.4c2.7-.5 4.2-2.1 4.2-4.5 0-2.5-2.4-4-5-4-1.4 0-4 .4-6.1.9-2.3.5-4.5.7-5.2.7-1.1 0-2.5-.5-2.5-2.1 0-1.4 1.1-2.4 3.9-2.4 1.5 0 3.2.2 5.1.7 2 .4 3.7 1 5.4 1 2.4 0 4.5-.9 4.5-4.3v-20.1l1.9-1.6zm-6.7 10.1c-.4.5-1.1.9-1.9.9-.9 0-1.6-.5-2-.9v-7.3l1.7-1.1 2.3 2.1v6.3zm0 4.8c-.4-.4-1.1-.8-1.9-.8s-1.6.5-2 .8v-4.3c.3.3 1.1.9 2 .9s1.6-.5 1.9-.9zm0 7.6c0 1.3-.9 2.6-2.6 2.6-.3 0-1 0-1.3-.1v-9.5c.4-.4 1.1-.9 2-.9.8 0 1.5.5 1.9.9zm22.3-11.5-5.3-3.8-7.9 4.5v10.6l-1.6 1.3.2.3 1.3-1 5.2 3.8 8.1-4.9zm-8.6 10.2v-11.6l4.1 3v11.6zm24.2-13.6h-.3c-.4.4-1 .7-1.4.7-.6 0-1.4-.4-1.8-.9h-.3l-2.8 3-2.8-3-4.8 3.3.2.4 1.3-.9 1.7 1.8v10.3l-2.2 1.6.3.3 1-.7 3.9 3.3 5.1-3.4-.2-.3-1.4.9-1.9-1.7v-11.5c.8.9 1.8 1.7 2.9 1.7 2.1 0 3.3-2.4 3.5-4.9zm19.6 15.7-5.6 3.6-7.5-11.4 5.3-8.3h.3c.6.6 1.7 1.3 2.7 1.3 1.1 0 1.9-.6 2.4-1.3h.3c-.2 3.3-2.4 5.2-4.1 5.2s-2.5-.8-3.4-1.3l-.5.7 8.2 12.1 1.6-1zm-17.9-1-2.2 1.6.3.3 1-.7 3.6 3.3 4.9-3.3-.3-.3-1.2.8-1.6-1.6v-25.2h-.3l-5.9 3.9v.3c.6.3 1.7.5 1.7 2.5zm45-21.6c0-3.2-3-4.2-5.6-4v.5c1.5 0 2.7.5 2.7 1.6 0 .7-.5 1.6-2 1.6-1.2 0-3.5-.7-5.4-1.3-2.1-.7-4-1.4-5.6-1.4-3.2 0-5.6 2.4-5.6 5.3 0 2.4 1.8 3.2 2.5 3.5l.2-.4c-.5-.3-.9-.7-.9-1.6 0-.7.6-1.8 2.3-1.8 1.5 0 3.4.7 6 1.4 2.2.6 4.7 1.2 6 1.4v5l-2.5 2.1v.2l2.5 2.2v6.9c-1.3.7-2.8.9-4 .9-2.4 0-4.6-.6-6.4-2.6l6.7-3.2v-11.1l-8.2 3.7c.9-2.2 2.6-3.6 4.3-4.7l-.1-.4c-4.9 1.3-9.3 5.8-9.3 11.3 0 6.6 5.4 11.5 11.5 11.5 6.6 0 10.8-5.2 10.7-10.6h-.4c-1 2.1-2.4 4.1-4.2 5.1v-6.8l2.6-2.1v-.2l-2.6-2.1v-5c2.2-.2 4.8-1.9 4.8-4.9zm-14.2 18-2 1c-1.1-1.5-1.9-3.5-1.9-6.2 0-1.1.1-2.5.5-3.5l3.4-1.5zm19.7-19.5h-.2l-3.3 2.8v.2l2.8 3.1h.3l3.3-2.7v-.2zm5 24.1-1.2.8-1.6-1.6v-11.3l1.6-1.2-.3-.4-1.2.9-2.8-3.4-4.7 3.3.3.4 1.2-.8 1.4 1.8v10.6l-2.1 1.6.2.3 1.1-.8 3.6 3.3 4.9-3.3zm27.2-.2-1.2.8-1.7-1.6v-11.1l1.7-1.2-.3-.4-1.4 1.1-3.7-3.5-4.8 3.4-3.7-3.4-4.7 3.4-2.9-3.4-4.7 3.3.2.4 1.2-.8 1.6 1.7v10.6l-1.3 1.3 3.7 3.1 3.6-3.3-1.5-1.4v-11l1.4-.9 2.5 2.3v9.9l-1.2 1.3 3.8 3.1 3.5-3.3-1.5-1.4v-11.1l1.2-.8 2.7 2.3v9.7l-1.1 1.1 3.8 3.5 5-3.4zm14.2-2.5-4 3.1-4.2-3.3v-1.9l7.7-5.2v-.2l-3.8-5.9-8.4 4.5v11.1l5.6 4.1 7.4-5.8zm-8.2-2.7v-8l.3-.2 3.6 5.6zm23.1-1.5-3.1-2.4c2.1-1.8 2.9-4.3 2.9-5.9 0-.2 0-.7-.1-1h-.4c-.3.9-.9 1.6-2.2 1.6-1.2 0-2.1-.7-2.9-1.6l-7.3 4v5.9l2.7 2.1c-2.8 2.4-3.3 4.2-3.3 5.4 0 1.6.7 2.8 2.1 3.3l.2-.4c-.3-.3-.7-.5-.7-1.2 0-.5.7-1.3 1.9-1.3 1.6 0 2.6 1.1 3.1 1.7l7.1-4.2zm-1.8-4.9c-1.1 1.9-3.6 3.8-5 4.9l-1.8-1.4v-5.8c.7 1.6 2.4 2.9 4.3 2.9 1.1 0 1.7-.2 2.5-.6zm-2.9 13c-.8-1.8-2.7-3.1-4.7-3.1-.5 0-1.8 0-3.1.8.7-1.2 2.9-3.6 5.7-5.2l2 1.6v5.9z",fill:"#fff"}))}},ErmU:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getEmailUrl=t.encodeUrlWithSMID=t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("Jqp9")),o=i(n("p1Mg")),s=i(n("bkJC")),l=i(n("ZYXy")),c=n("dQ+W"),u=function(e,t){if(!e)return e;if(!t)return encodeURIComponent(e);var n=-1===e.indexOf("?")?"?":"&";return encodeURIComponent("".concat(e).concat(n,"smid=").concat(t))};t.encodeUrlWithSMID=u;var d=function(e){if(!e)return e;var t=-1===e.indexOf("?")?"?":"&";return"".concat(e).concat(t,"smid=em-share")};t.getEmailUrl=d;var p=function(e){var t=e.headline,n=e.summary,i=e.url,p=e.className,f=encodeURIComponent(t.default),m=encodeURIComponent("https://www.facebook.com/"),h={subject:encodeURIComponent("NYTimes.com: ".concat(t.default)),body:encodeURIComponent("From The New York Times:\n\n".concat(t.default,"\n\n").concat(n,"\n\n").concat(d(i)))};return r.default.createElement("div",{"data-view":"share-container","data-share-container-id":"sharetools-inline",className:(0,a.cx)("share-container","collapsed","halt","share-container-inline",p)},r.default.createElement("div",{className:"share-list-container"},r.default.createElement("ul",{className:"share-list halt"},r.default.createElement("li",{"data-share":"Facebook","data-view":"fb-link",className:"share-item "},r.default.createElement("a",{href:"https://www.facebook.com/dialog/feed?app_id=9869919170&link=".concat(u(i,"fb-share"),"&name=").concat(f,"&redirect_uri=").concat(m),target:"_blank",rel:"noopener noreferrer",className:(0,a.cx)("halt","share-link")},r.default.createElement(o.default,{fill:"white",className:c.fbIconClass}),r.default.createElement("span",{className:"visually-hidden"},"Share on Facebook"))),r.default.createElement("li",{"data-share":"Twitter",className:"share-item "},r.default.createElement("a",{href:"https://twitter.com/intent/tweet?url=".concat(u(i,"tw-share"),"&text=").concat(f),target:"_blank",className:"halt share-link",rel:"noopener noreferrer"},r.default.createElement(s.default,{fill:"white",className:c.twitterIconClass}),r.default.createElement("span",{className:"visually-hidden"},"Post on Twitter"))),r.default.createElement("li",{"data-share":"Email",className:"share-item hideOnCollapse"},r.default.createElement("a",{href:"mailto:?subject=".concat(h.subject,"&body=").concat(h.body),target:"_blank",className:"halt share-link",rel:"noopener noreferrer"},r.default.createElement(l.default,{fill:"white",className:c.mailIconClass}),r.default.createElement("span",{className:"visually-hidden"},"Mail"))))))};p.displayName="ShareTools",p.defaultProps={headline:{},summary:"",url:"",className:void 0};var f=p;t.default=f},EssT:function(e,t,n){"use strict";var i=n("VkAN"),r=n.n(i),a=n("gcR/"),o=n.n(a),s=n("lSNA"),l=n.n(s),c=n("q1tI"),u=n.n(c),d=n("eFc+"),p=n.n(d),f=n("Jqp9"),m=n("V6Yu"),h=n("42vy"),g=n.n(h),y=n("XlcC"),v=n("jOYC"),b=n("hkPW"),_=n("Rb+W"),w=n("06b3"),x=Object.freeze({name:"live-briefing-post-inview",context:"live-briefing"}),k=function(e){var t=e.children,n={event:"impression",module:{name:e.name,context:e.context,region:e.region,label:e.label},user:{regiId:Object(_.f)(w.a)}},i=Object(b.a)({threshold:.1,data:n}),r=i.isTracked,a=i.ref;return u.a.createElement("div",{ref:r?null:a},t)};k.displayName="Heading2Tracking";var O,E,T=k,C=n("HTd6"),S=n("wXC7"),P=n.n(S),M=n("nxVm"),I=n.n(M),A=Object(f.css)("margin:30px ",v.b.grid.pageMargin," ",P.a.font.size(12),";",P.a.breakpoint.medium,"{margin-top:35px;margin-left:auto;margin-right:auto;margin-bottom:",P.a.font.size(20),";}",I.a,";"),j=Object(f.css)("text-align:right;direction:rtl;unicode-bidi:isolate;"),L=Object(f.css)("position:relative;top:-75px;"),R=Object(f.css)("font-weight:",P.a.font.weight.extraBold,";font-family:",P.a.font.franklinBase,";border-top-style:solid;border-top-width:6px;text-align:left;font-size:1.45rem;line-height:1.2;padding:12px 0 0;",P.a.breakpoint.medium,"{margin-bottom:",P.a.font.size(18),";font-size:1.45rem;line-height:1.2;}"),N=A,D=function(e){var t=e.data,n=e.className,i=e.isOldLiveBriefing,r=e.article,a=e.region,s=Object(f.useTheme)(),c=s.noFollowExternalLinks,d=t.textAlign?t.textAlign.toLowerCase():null,p="rightToLeft"===(null==s?void 0:s.languageDirection)?j:null,h=Object(f.cx)(n,N,v.b.layout.textAlign[d]||v.b.layout.textAlign.left,p,l()({},R,"guide"===s.treatment)),b=Object(m.generateContentLink)(null==t?void 0:t.content),_=Object(y.createMapInlineUnionWithOptions)({noFollowExternalLinks:c});return o()(g.a,{className:h,id:i?"":b},void 0,i&&u.a.createElement(u.a.Fragment,null,o()("div",{className:L,id:b}),o()(T,{name:null==x?void 0:x.name,context:null==x?void 0:x.context,region:a,label:r?"".concat(null==r?void 0:r.url,"#").concat(b):""},void 0,O||(O=o()("span",{height:1})))),t.content.map(_))};D.displayName="Heading2Block",D.defaultProps={className:void 0,isOldLiveBriefing:!1,article:{},region:""},D.fragments={data:p()(E||(E=r()(["\n    fragment Heading2Block_data on Heading2Block {\n      textAlign\n      content {\n        ...TextInline_content\n      }\n    }\n    ","\n  "])),C.a.fragments.content)};t.a=D},F0cd:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("Jqp9")),o=n("7FfI"),s=n("h58Z"),l=n("XMNT"),c=function(e){var t=e.children,n=e.className,i=(0,a.useTheme)();if(!t)return null;var c=(0,o.getTimestampLocale)(null==i?void 0:i.language),u=(0,o.formatDate)(t,l.DATEONLY,c);return r.default.createElement(s.StyledPubDate,{className:n},u)};c.displayName="PubDate",c.defaultProps={children:null,className:void 0};var u=c;t.default=u},F77t:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getSubscriberLockedMessage=t.getSubscribeCallToActionMessage=t.getRegionLockedMessage=t.getCanNowWatchMessage=t.fullEpisodesOf=t.THE_WEEKLY=t.SUBSCRIBER_LOCKED_SECTIONS=t.REGION_LOCKED_SECTIONS=t.REGION_LOCKED_ASSETS=t.NYT_PRESENTS=t.ALLOWED_REGIONS=void 0,t.hasAssetLock=h,t.hasRegionLock=m,t.hasRegionLockClass=void 0,t.hasSubscriberLock=g,t.isAssetLocked=void 0,t.isRegionLocked=function(e){var t,n,i,r,a=m(e).hasRegionLock,o=h(e).hasAssetLock,s=null===(t=e.geolocation)||void 0===t?void 0:t.country,c=null===(n=e.data)||void 0===n||null===(i=n.media)||void 0===i||null===(r=i.media)||void 0===r?void 0:r.sourceId;return{isRegionLocked:Boolean(a&&s&&!l.includes(s)||o&&s&&p(s,c))}},t.isRegionLockedSection=t.isRegionLockedAsset=void 0,t.isSubscriberLocked=function(e,t){return{isSubscriberLocked:g(e).hasSubscriberLock&&!t}},t.regionLockElToShowClass=t.regionLockElToHideClass=t.isSubscriberLockedSection=void 0;var r=i(n("q1tI"));t.THE_WEEKLY="the-weekly";t.NYT_PRESENTS="nyt-presents";var a=Object.freeze(["the-weekly","nyt-presents"]);t.REGION_LOCKED_SECTIONS=a;var o=Object.freeze([{sourceId:"",region:[""]}]);t.REGION_LOCKED_ASSETS=o;var s=a;t.SUBSCRIBER_LOCKED_SECTIONS=s;var l=Object.freeze(["US"]);t.ALLOWED_REGIONS=l;t.regionLockElToShowClass="region-lock-el-to-show";t.regionLockElToHideClass="region-lock-el-to-hide";t.hasRegionLockClass="region-lock-has";var c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.capitalize,i=void 0===n||n,a=t.isOrAre,o=void 0!==a&&a,s=t.onNytimesDotCom,l=void 0!==s&&s;return e?r.default.createElement(r.default.Fragment,null,"".concat(i?"F":"f","ull episodes of ").concat(e),l&&r.default.createElement(r.default.Fragment,null," ","on ",r.default.createElement("a",{href:"https://nytimes.com"},"nytimes.com")),o&&" are"):"".concat(i?"T":"t","his video").concat(o?" is":"")};t.fullEpisodesOf=c;t.getRegionLockedMessage=function(e){return r.default.createElement(r.default.Fragment,null,c(e,{isOrAre:!0,onNytimesDotCom:!0})," not available in your","","region.")};t.getSubscriberLockedMessage=function(e){return r.default.createElement(r.default.Fragment,null,c(e,{isOrAre:!0,onNytimesDotCom:!0})," available to New York Times subscribers.")};t.getCanNowWatchMessage=function(e){return r.default.createElement(r.default.Fragment,null,"You can now watch ",c(e,{capitalize:!1}),".")};t.getSubscribeCallToActionMessage=function(e){return r.default.createElement(r.default.Fragment,null,"Subscribe to watch ",c(e,{capitalize:!1}),".")};var u=function(e){return!!e&&a.includes(e.toLowerCase())};t.isRegionLockedSection=u;var d=function(e){return!!e&&o.some((function(t){return t.sourceId===e}))};t.isRegionLockedAsset=d;var p=function(e,t){var n=o.find((function(e){return e.sourceId===t}));return Boolean(null==n?void 0:n.region.includes(String(e)))};t.isAssetLocked=p;var f=function(e){return!!e&&s.includes(e.toLowerCase())};function m(e){var t,n,i;return{hasRegionLock:u(e.sectionStyle)&&"SERIES"===(null===(t=e.data)||void 0===t||null===(n=t.media)||void 0===n||null===(i=n.media)||void 0===i?void 0:i.productionType)}}function h(e){var t,n,i,r=null===(t=e.data)||void 0===t||null===(n=t.media)||void 0===n||null===(i=n.media)||void 0===i?void 0:i.sourceId;return{hasAssetLock:d(r)}}function g(e){var t,n,i;return{hasSubscriberLock:f(e.sectionStyle)&&"SERIES"===(null==e||null===(t=e.data)||void 0===t||null===(n=t.media)||void 0===n||null===(i=n.media)||void 0===i?void 0:i.productionType)}}t.isSubscriberLockedSection=f},FHjF:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),i(n("AfrD"))),o=i(n("Pmun")),s=i(n("TB7k")),l=n("iPKY");function c(e){var t,n=e.item.content,i=e.trackEvent,c=e.trackingParams,u=e.trackLinkInteraction;if(null==n||null===(t=n.content)||void 0===t||!t.length)return null;switch(n.__typename){case"ParagraphBlock":return r.default.createElement(s.default,{text:n,trackEvent:i,trackLinkInteraction:u,internalLinkTrackingParams:c,className:l.paragraphClass});case"ListBlock":return r.default.createElement(a.default,null,n.content.map((function(e,t){return r.default.createElement(o.default,{key:t.toString(),className:l.listItemClass},e.content.map((function(e,t){return r.default.createElement(s.default,{key:t.toString(),text:e,trackEvent:i,trackLinkInteraction:u,internalLinkTrackingParams:c,className:l.paragraphClass})})))})));default:return null}}c.defaultProps={trackEvent:null,trackingParams:null,trackLinkInteraction:function(){}};var u=c;t.default=u},FKYM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setPosition=t.removePosition=void 0;var i=0;t.setPosition=function(){return i+=1,"".concat("mid").concat(i)};t.removePosition=function(){return i-=1,"".concat("mid").concat(i)}},FQbI:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lSNA")),a=i(n("q1tI")),o=(i(n("17x9")),n("3sMT")),s=n("Jqp9");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=(0,s.css)({backgroundColor:o.color.background.secondary,position:"relative",a:{color:o.color.signal.editorial,textDecoration:"underline"}}),d=function(e,t){return{width:e,height:t}},p=(0,s.css)({WebkitFontSmoothing:"antialiased",color:o.color.content.secondary,fontFamily:"'franklin', 'nyt-franklin', arial, helvetica, sans-serif",fontSize:"13px",fontWeight:"700",lineHeight:"18px",padding:"5px 30px",margin:0,boxSizing:"border-box",textAlign:"center",textRendering:"optimizeLegibility",width:"100%"}),f=function(e){var t=e.className,n=e.width,i=e.height,r=e.message,o=e.style;return a.default.createElement("div",{"data-testid":"error-slate",className:(0,s.cx)(u,t),style:c(c({},d(n,i)),o)},a.default.createElement("p",{className:p},a.default.createElement("span",{style:{fontSize:"25px",position:"relative",top:"5px"}},""),r))};f.displayName="ErrorSlate",f.defaultProps={className:void 0,width:"600px",height:"auto",message:"There was an error loading the player. Please refresh to try again.",style:{}};var m=f;t.default=m},FSO8:function(e,t,n){"use strict";n.d(t,"a",(function(){return $})),n.d(t,"c",(function(){return Q}));var i=n("gcR/"),r=n.n(i),a=n("J4zp"),o=n.n(a),s=n("q1tI"),l=n.n(s),c=n("0G++"),u=n("aFeP"),d=n("C/YW"),p=n.n(d),f=n("Kxyt"),m=n("HUmG"),h=n("5DNu"),g=n("7yT1");var y=function(e){var t,n=e.onSignup,i=e.pageLoading,a=Object(f.useApolloClient)(),l=Object(s.useRef)(n);l.current=n;var c=Object(u.a)(),d=!c,y=function(e){var t=e.user;return null!==t&&!Object(m.d)(t)}({user:{id:null==c||null===(t=c.userInfo)||void 0===t?void 0:t.regiId}}),v=Object(s.useState)(!1),b=o()(v,2),_=b[0],w=b[1],x=Object(s.useRef)({handleSignup:null}),k=Object(s.useState)([]),O=o()(k,2),E=O[0],T=O[1];Object(s.useEffect)((function(){var e,t=Object(g.a)();if(null!=t&&t.length&&!d&&!i){t.forEach((function(e){return Object(h.a)({clientId:"",newsletterName:"",productCode:e,label:"one click"})}));var n=Object(g.d)(t,null==c||null===(e=c.newsletterSubscriptions)||void 0===e?void 0:e.newsletters);null!=n&&n.length&&a.query({query:Object(g.b)(n)}).then(g.c).then((function(e){null!=e&&e.length&&T(e)}))}}),[a,d,i]);var C=Object(s.useRef)(!1);return Object(s.useEffect)((function(){d||null==E||!E.length||C.current||(C.current=!0,y?(x.current={handleSignup:g.f},w(!0)):Object(g.f)({newsletters:E,onSignup:l.current,apolloClient:a,user:c,pageType:Object(g.e)(c)}))}),[y,E,d,a,c]),{loginModal:Object(s.useMemo)((function(){return y&&null!=E&&E[0]?r()(p.a,{isOpen:_,handleClose:function(){return w(!1)},onLogin:function(){window.location.reload()},host:vi.env.AUTH_HOST,newsletter:E[0]}):null}),[y,_,E])}},v=n("X6oL"),b=n("fdyL"),_=n("lSNA"),w=n.n(_);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var O=function(e){return e.sections.reduce((function(e,t){return t.products.forEach((function(n){e[n.newsletterId]=k(k({},n),{},{cardStyle:t.cardStyle})})),e}),{})},E=n("RIqP"),T=n.n(E);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(e,t){var n=t.setSubscriptions,i=t.setSubscriptionMap,r=t.setShowSuccessWithId,a=t.newsletterMap,o=t.subscriptions,s=t.subscriptionMap,l={},c=[],u=e.map((function(e){var t=e.newsletterId,n=e.isFreeTrial,i=e.freeTrialSignupTime;return l[t]={isFreeTrial:n,freeTrialSignupTime:i},c.push(t),a[t]}));n([].concat(T()(o),T()(u))),i(S(S({},s),l)),r(c)},M=n("yXPU"),I=n.n(M),A=n("o0o1"),j=n.n(A),L=n("CQ4Z");function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){w()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D,B=function(){var e=I()(j.a.mark((function e(t,n,i,r){var a,o,s,l,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(L.user)();case 3:s=e.sent,l=s.data,c=(null==l||null===(a=l.user)||void 0===a||null===(o=a.newsletterSubscriptions)||void 0===o?void 0:o.newsletters)||[],t(c.map((function(e){var t=e.productCode;return r[t]}))),n(c.reduce((function(e,t){var n=t.productCode,i=t.isFreeTrial,r=t.freeTrialSignupTime;return N(N({},e),{},w()({},n,{isFreeTrial:i,freeTrialSignupTime:r}))}),{})),i(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),"prd"!==vi.env.ENVIRONMENT&&console.warn("NewsletterProvider: The Newsletter subscription endpoint had an error.",e.t0),i(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n,i,r){return e.apply(this,arguments)}}(),z=n("VkAN"),F=n.n(z),U=n("MlQP"),H=n("T25G"),W=n("eFc+"),q=n.n(W),V=n("PgO9"),G=n("oXTd"),Y=n("+zxi");var Z=q()(D||(D=F()(["\n  query NewsletterAutoSignupQuery($productCode: String) {\n    newsletterConfig(newsletterId: $productCode) {\n      id\n      newsletterId\n      allowedEntitlement\n      isOnsiteFreeTrialEnabled\n      subscriptionPageLink\n    }\n  }\n"]))),X=function(e){var t=e.newsletter,n=e.onSignup;t.signup({signupFormVersion:G.i.newsletterGridIndexPage}).then((function(e){var i=t.getData().subscriptionPageLink;if(e.subscriptionNeeded&&i){var r=Object(Y.a)(i,{ref:G.j.newsletterGridIndexPage});window.location.assign(r)}else e.success&&(null==n||n(e,t))}))},J=function(e){var t=e.onSignup,n=e.pageLoading,i=Object(f.useApolloClient)(),a=Object(s.useRef)(t);a.current=t;var l=Object(V.a)().user,c=!l,u=function(e){var t=e.user;return null!==t&&!Object(m.d)(t)}({user:l}),d=Object(s.useState)(!1),g=o()(d,2),y=g[0],v=g[1],b=Object(s.useRef)({handleSignup:null}),_=Object(s.useState)(null),w=o()(_,2),x=w[0],k=w[1];Object(s.useEffect)((function(){var e=function(){var e,t=new URLSearchParams(window.location.search),n="true"===t.get("newsletter_signup"),i=decodeURIComponent(null!==(e=t.get("product_code"))&&void 0!==e?e:"");return n&&Object(H.isValidNewsletterCode)(i)?i:null}();e&&(Object(h.a)({clientId:"",newsletterName:"",productCode:e,label:"one click"}),i.query({query:Z,variables:{productCode:e}}).then((function(e){var t=e.data,n=null==t?void 0:t.newsletterConfig;n&&k(Object(U.getNewsletterProduct)(n))})))}),[i]);var O=Object(s.useRef)(!1);return Object(s.useEffect)((function(){c||!x||n||O.current||(O.current=!0,u?(b.current={handleSignup:X},v(!0)):X({newsletter:x,onSignup:a.current}))}),[u,x,c,n]),{loginModal:Object(s.useMemo)((function(){return u&&x?r()(p.a,{isOpen:y,handleClose:function(){return v(!1)},onLogin:function(){window.location.reload()},host:vi.env.AUTH_HOST,newsletter:x}):null}),[u,y,x])}},K={newsletterSectionConfigs:null,pageType:null,isLoading:!0,subscriptions:[],subscriptionMap:{},newsletterMap:null,showSuccessWithId:!1,updateSubscription:function(e){return null},turnOffSuccess:function(){return null},user:null},$=l.a.createContext(K),Q=function(){return l.a.useContext($)},ee=function(e){var t=e.pageType,n=e.children,i=Object(c.a)(t),a=Object(s.useState)(!0),l=o()(a,2),d=l[0],p=l[1],f=Object(s.useState)([]),m=o()(f,2),g=m[0],_=m[1],w=Object(s.useState)({}),x=o()(w,2),k=x[0],E=x[1],T=Object(s.useState)(null),C=o()(T,2),S=C[0],M=C[1],I=Object(s.useState)(!1),A=o()(I,2),j=A[0],L=A[1],R=Object(u.a)(),N=Object(v.useTracking)().trackEvent,D=Object(s.useCallback)((function(e){return P(e,{setSubscriptions:_,setSubscriptionMap:E,setShowSuccessWithId:L,newsletterMap:S,subscriptions:g,subscriptionMap:k})}),[_,E,L,S,g,k]),z=function(e){e.forEach((function(e){var t,n=e.newsletterId;N(Object(h.c)({newsletterName:null===(t=S[n])||void 0===t?void 0:t.title,productCode:n,label:"one click"}))}))},F=J({onSignup:function(e,t){var n=t.productCode;z([{newsletterId:n}]),D([{newsletterId:n}]),Object(b.handleRedirectForNewsletter)(t)},pageLoading:!S}).loginModal,U=y({onSignup:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(null!=t&&t.length||null!=t&&t.length()){var n=t.map((function(e){return{newsletterId:e.productCode}}));z(n),D(n)}},pageLoading:!S}).loginModal,H=Object(s.useCallback)((function(){return L(!1)}),[L]);return Object(s.useEffect)((function(){var e;if(null!=i&&null!==(e=i.sections)&&void 0!==e&&e.length&&!S){var t=O(i);M(t)}}),[S,i,M]),Object(s.useEffect)((function(){S&&B(_,E,p,S)}),[_,E,p,S]),r()($.Provider,{value:{newsletterSectionConfigs:i,pageType:t,isLoading:d,subscriptions:g,subscriptionMap:k,newsletterMap:S,showSuccessWithId:j,updateSubscription:D,turnOffSuccess:H,user:R}},void 0,n,F,U)};ee.displayName="NewsletterProvider",ee.defaultProps={pageType:""},ee.displayName="NewsletterProvider";t.b=ee},FZH6:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var i,r=n("VkAN"),a=n.n(r),o=n("gcR/"),s=n.n(o),l=n("q1tI"),c=n("Vg22"),u=n("eFc+"),d=n.n(u),p=n("17x9"),f=n.n(p),m=n("hKNt");function h(e){var t=e.children,n=e.fetchSummary,i=e.article,r=e.clearArticle,a=Object(l.useRef)(null);return Object(l.useEffect)((function(){a.current&&a.current!==i.sourceId&&r(),a.current=i.sourceId,n(i.url)}),[i,i.sourceId,i.url,r,n]),t}h.fragments={creativeWork:d()(i||(i=a()(["\n    fragment CommentContainer_creativeWork on CreativeWork {\n      commentProperties {\n        status\n        approvedCommentsCount\n      }\n      ... on Published {\n        sourceId\n        url\n      }\n    }\n  "])))},h.propTypes={children:f.a.node,article:f.a.shape({sourceId:f.a.string,url:f.a.string,commentProperties:f.a.shape({status:f.a.string,approvedCommentsCount:f.a.number})}).isRequired,clearArticle:f.a.func.isRequired,fetchSummary:f.a.func.isRequired},h.defaultProps={children:null};var g,y=Object(c.connect)((function(){return{}}),(function(e){return{clearArticle:function(){return e(Object(m.a)())},fetchSummary:function(t){return e(Object(m.k)(t))}}}))(h),v=n("xBez"),b=n("8iTF");function _(e){var t=e.article,n=e.children;return Object(b.h)(t.commentProperties.status)?s()(c.Provider,{store:v.b},void 0,s()(y,{article:t},void 0,n)):n}_.fragments={creativeWork:d()(g||(g=a()(["\n    fragment CommentsProvider_creativeWork on CreativeWork {\n      commentProperties {\n        status\n        prompt\n      }\n      ...CommentContainer_creativeWork\n    }\n    ","\n  "])),y.fragments.creativeWork)};var w=_},FZbM:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.translationLinksClass=t.translationLinkClass=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=n("3sMT"),s=(0,r.css)("font-family:",a.default.font.franklinBase,";font-size:",a.default.font.size(14),";line-height:",a.default.font.size(20),";display:block;width:auto;margin:5px auto 0 auto;",a.default.breakpoint.small,"{width:auto;}@media print{display:none;}");t.translationLinksClass=s;var l=(0,r.css)("display:inline-block;color:",o.color.signal.editorial,";text-decoration:none;",a.default.breakpoint.small,"{margin-top:0;}&:hover{color:",o.color.signal.editorial,";}&:visited{color:",o.color.signal.editorial,";}&::after{color:",o.color.stroke.quaternary,";content:'';margin-left:6px;margin-right:7px;font-size:8px;}&:last-child::after{content:none;}");t.translationLinkClass=l},Febw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCollectionBasedSectionWithLogo=void 0;var i=n("DnBa");t.getCollectionBasedSectionWithLogo=function(e){var t=e.collectionBasedSections,n=e.collections,r=e.logos;if(t)for(var a=0;a<t.length;a+=1){var o,s=null==t||null===(o=t[a])||void 0===o?void 0:o.call(t,n),l=(0,i.getSectionWithLogo)(s,r);if(l)return l}}},FfMl:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var r=i(n("lSNA")),a=i(n("q1tI")),o=n("Jqp9"),s=i(n("iSgW")),l=i(n("yQsP")),c=n("rJzx");function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.className,n=e.hideShadow,i=e.audioDeepLink,u=(0,s.default)();return a.default.createElement("div",{className:(0,o.cx)(c.hideOnAndroidClass,c.bannerWrapperClass,(0,r.default)({},c.withBorderClass,n||!u))},a.default.createElement("div",{className:(0,o.cx)(c.audioAppAsBannerClass,c.storylinesMenuShadowClass,(0,r.default)({},c.storylinesMenuApplyShadowClass,!n&&u),t)},a.default.createElement(l.default,{audioDeepLink:i})))}u.displayName="AudioAppBanner"},FfcP:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.revealClass=t.clueClass=t.answerClass=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=n("3sMT"),s=(0,r.css)("margin-bottom:1rem;.show .answer{opacity:1;}.hide .answer{opacity:0;}");t.revealClass=s;var l=(0,r.css)("font-family:",a.default.font.serifBase,";cursor:pointer;margin:0 auto 1rem;text-decoration:underline;color:",o.color.signal.editorial,";&:hover{text-decoration:none;}&:focus{outline:none;}");t.clueClass=l;var c=(0,r.css)("font-family:",a.default.font.serifBase,";transition:opacity 0.2s ease-out;opacity:0;&.show{opacity:1;}");t.answerClass=c},FrTx:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n("q1tI")),l=n("X6oL"),c=o(n("5UIh")),u=a(n("J3mF")),d=n("v5cc"),p=n("syiw"),f=n("HDG5"),m=n("djNW"),h=n("FY2l"),g=n("6gWn");t.default=function(e){var t,n,i,r,a=e.unit,o=(0,s.useState)(!1),y=o[0],v=o[1],b=(0,p.useMessageSelection)({config:{name:"dock"}}),_=(0,f.useUserState)(),w=(0,l.useTracking)(),x="/"===(0,h.getPathName)()?"homepage":"article",k=s.default.createElement("div",{className:u.mainText},"Tell us about yourself. ",s.default.createElement("b",{className:u.boldText},"Take the survey.")),O=function(e,t){w.trackEvent({event:"moduleInteraction",eventData:{pagetype:x,trigger:"module",type:"click"},module:{name:e,label:"ADS_RES_FIRST_PARTY_SURVEY_221",element:{name:m.Action.TakeSurvey,url:t}}})};if(b.loading)return null;if(!y){var E=null===(n=null===(t=null==b?void 0:b.response)||void 0===t?void 0:t.userstate())||void 0===n?void 0:n.messageSelectionMessageCaps,T=null;if(E)if((M=E).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==b?void 0:b.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==b?void 0:b.response)||void 0===n?void 0:n.audience())&&(T=e)})),null!==T){var C=T,S=new Date(null==C?void 0:C.lastSeenOn).getTime(),P=(new Date).getTime();Math.abs(Math.round(P-S)/6e4)>525600?C.viewCount=1:C.viewCount+=1,C.lastSeenOn=(new Date).toISOString(),_.update({messageSelectionMessageCaps:M})}if(!T){var M=[];E&&(M=E),M.push({unit:"dock",campaign:null===(i=null==b?void 0:b.response)||void 0===i?void 0:i.campaign(),audience:null===(r=null==b?void 0:b.response)||void 0===r?void 0:r.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),_.update({messageSelectionMessageCaps:M})}v(!0)}return s.default.createElement(c.default,{testId:"onsite-messaging-unit-".concat(null===g.config||void 0===g.config?void 0:g.config.name),unit:a,contentID:"ADS_RES_FIRST_PARTY_SURVEY_221",dockID:"standard",header:k,headingClassName:u.headerContainer,onDockHeadingClick:function(){var e,t="".concat(null===(e=null==a?void 0:a.content)||void 0===e?void 0:e.url,"&agentid=").concat((0,d.getCookie)("nyt-a"));O("firstPartySurvey",t),O("dock",t),window.open(t,"_blank","noopener,noreferrer")},isDockDismissible:!1,isDockExpandable:!1,minimized:!0,headingClassStyle:u.headingClass,headingInfoContainerStyle:u.headingInfoContainer,headingMessageClassStyle:u.headingMessageClass,ctaIconWrapperStyle:u.ctaIconWrapper,ctaContainerStyle:u.ctaContainer,ctaActionTextClassStyle:u.ctaActionTextClass})}},G03P:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var r=i(n("cDf5")),a=i(n("q1tI")),o=n("6l8D"),s=n("s5tu");function l(e,t){var n,i,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u=e.url,d=(0,s.isInternalLink)(u);if(d||(n="noopener noreferrer",i="_blank"),c.noFollowExternalLinks&&!d&&(void 0===n&&(n=""),n="".concat(n," nofollow").trim()),d&&c.internalLinkTrackingParams&&"object"===(0,r.default)(c.internalLinkTrackingParams)){var p=-1===u.indexOf("?")?"?":"&";u="".concat(u).concat(p).concat((0,s.objectToQueryParams)(c.internalLinkTrackingParams))}if(d&&"object"===(0,r.default)(c.onPageDeeplinks))try{var f=new URL(u).pathname;f&&c.onPageDeeplinks[f]&&(u=c.onPageDeeplinks[f])}catch(e){}return a.default.createElement("a",{className:o.linkClass,href:u,title:e.title,key:l,rel:n,target:i},t)}l.displayName="linkFormatFromOak"},GR2s:function(e,t,n){"use strict";var i,r=n("gcR/"),a=n.n(r),o=n("q1tI"),s=n.n(o),l=n("OwL/"),c=n("FSO8"),u=n("Odck"),d=n("Jqp9"),p=n("wXC7"),f=n.n(p),m="\n  opacity: 1;\n  bottom: 50px;\n\n  ".concat(f.a.breakpoint.small," {\n    bottom: 30px;\n  }\n"),h=Object(d.css)("\n  opacity: 0;\n  bottom: 0;\n"),g=Object(d.css)(m," transition:opacity 300ms,bottom 300ms;transition-delay:500ms;"),y=Object(d.css)(m),v=Object(d.css)("\n  opacity: 0;\n  bottom: 0;\n"," transition:opacity 300ms,bottom 300ms;"),b=Object(d.css)("position:fixed;max-width:95vw;width:max-content;left:50%;padding:16px;background:",f.a.color.black,";text-align:center;color:",f.a.color.white,";font-family:",f.a.font.franklinBase,";font-size:",f.a.font.size(14),";border-radius:4px;line-height:18px;letter-spacing:0.5px;transform:translateX(-50%);box-shadow:0 2px 4px rgba(0,0,0,0.25);z-index:10000;box-sizing:border-box;display:flex;flex-direction:column;align-items:center;"),_=Object(d.css)("display:flex;flex-direction:column;flex-wrap:wrap;justify-content:center;margin-top:-3px;gap:0 ",f.a.font.size(5),";@media (min-width:350px){min-width:284px;}",f.a.breakpoint.medium,"{flex-wrap:nowrap;white-space:nowrap;max-width:100vw;}"),w=Object(d.css)("display:block;font-size:",f.a.font.size(15),";line-height:",f.a.font.size(18),";letter-spacing:",f.a.font.size(.2),";"),x=Object(d.css)("font-family:",f.a.font.karnakBase,";font-size:",f.a.font.size(19),";line-height:",f.a.font.size(22),";letter-spacing:",f.a.font.size(.6),";font-weight:",f.a.font.weight.bold,";margin-bottom:",f.a.font.size(14),";"),k=Object(d.css)("font-family:",f.a.font.franklinBase,";font-size:",f.a.font.size(11),";line-height:",f.a.font.size(11),";letter-spacing:0.09em;font-weight:",f.a.font.weight.medium,";text-transform:uppercase;margin-bottom:",f.a.font.size(14),";"),O=n("oXTd"),E=function(e){var t=e.newsletterSuccesses,n=e.turnOffSuccess;if(!t)return null;var r=function(e){if(e.every((function(e){return e.cardStyle===O.a.alert}))){if(e.length<2)return O.d;if(e.length>1)return O.e}var t=e.length>1?O.g:O.h;return e.some((function(e){return e.isFreeTrial}))?O.f:t}(t),o=function(e){return e.every((function(e){return e.cardStyle===O.a.alert}))?null:(null==e?void 0:e.length)>1?O.c:O.b}(t),l=t.map((function(e){return e.title})),c=l.length<=4?2:3,p=l.slice(0,c).join(", "),f=l.slice(c).join(", ");return a()(u.CSSTransition,{classNames:{enter:h,enterActive:g,enterDone:y,exit:y,exitActive:v},in:!(null==t||!t.length)&&t.every((function(e){return!!e.title})),mountOnEnter:!0,onEntered:function(){setTimeout((function(){return n()}),4500)},unmountOnExit:!0,timeout:{enter:800,exit:200}},void 0,a()("section",{className:b,"data-testid":"newsletter-success-toast"},void 0,a()("span",{className:Object(d.cx)(w,x)},void 0,p,f&&s.a.createElement(s.a.Fragment,null,",",i||(i=a()("br",{}))," ",f)),t.some((function(e){return e.allowedEntitlement}))&&a()("span",{className:Object(d.cx)(w,k),"data-testid":"newsletter-success-toast-kicker"},void 0,"For Times Subscribers"),a()("div",{className:_},void 0,a()("span",{className:w,"data-testid":"newsletter-success-toast-message"},void 0,r),o&&a()("span",{className:w},void 0,o))))};E.displayName="SuccessToast";var T=E,C=function(){var e=Object(c.c)(),t=e.subscriptionMap,n=e.turnOffSuccess,i=e.showSuccessWithId,r=e.newsletterMap,o=r&&i?i.map((function(e){var n,i,a,o;return{title:(null===(n=r[e])||void 0===n?void 0:n.title)||"",isFreeTrial:null==t||null===(i=t[e])||void 0===i?void 0:i.isFreeTrial,allowedEntitlement:null===(a=r[e])||void 0===a?void 0:a.allowedEntitlement,cardStyle:null===(o=r[e])||void 0===o?void 0:o.cardStyle}})):[];return a()(T,{newsletterSuccesses:o,turnOffSuccess:n})};C.displayName="SuccessToastWrapper";t.a=Object(l.a)(C)},Gfev:function(e,t,n){"use strict";n.d(t,"l",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"g",(function(){return f})),n.d(t,"h",(function(){return m})),n.d(t,"i",(function(){return h})),n.d(t,"j",(function(){return g})),n.d(t,"k",(function(){return y})),n.d(t,"b",(function(){return v})),n.d(t,"p",(function(){return b})),n.d(t,"o",(function(){return _})),n.d(t,"n",(function(){return w})),n.d(t,"m",(function(){return x})),n.d(t,"q",(function(){return k})),n.d(t,"r",(function(){return O})),n.d(t,"s",(function(){return E}));var i=n("Jqp9"),r=n("wXC7"),a=n.n(r),o=n("3sMT"),s=Object(i.css)("display:flex;flex-direction:column;"),l=Object(i.css)("display:none;"),c=Object(i.css)("grid-column:span 1;"),u=Object(i.css)("grid-column:span 2;"),d=Object(i.css)("grid-column:span 3;"),p=Object(i.css)("grid-column:span 4;"),f=Object(i.css)("grid-column:span 5;"),m=Object(i.css)("grid-column:span 6;"),h=Object(i.css)("grid-column:span 7;"),g=Object(i.css)("grid-column:span 8;"),y=Object(i.css)("grid-column:span 9;"),v=Object(i.css)("grid-column:span 10;"),b=Object(i.css)("visibility:hidden;"),_=Object(i.css)("color:",o.color.content.tertiary,";font-family:",a.a.font.franklinBase,";font-weight:",a.a.font.weight.medium,";font-size:",a.a.font.size(11),";line-height:",a.a.font.size(20),";margin-bottom:1rem;letter-spacing:0.04em;height:27px;cursor:default;text-transform:uppercase;display:block;"),w=Object(i.css)("display:grid;grid-column-gap:calc(1rem * 2 + 1px);grid-template-columns:repeat(20,1fr);margin:0 auto;max-width:1200px;width:94%;padding:1.5rem 0 2.5rem;border-top:1px solid ",a.a.color.gray70,";color:",o.color.content.primary,";font-family:",a.a.font.franklinBase,";font-weight:",a.a.font.weight.medium,";font-size:",a.a.font.size(13),";line-height:",a.a.font.size(18),";white-space:normal;"),x=Object(i.css)("@media (min-width:","1277px","){left:0;}"),k=Object(i.css)("display:none;position:absolute;background-color:",a.a.color.white,";box-shadow:0 10px 10px rgba(0,0,0,0.1);left:0;top:calc(100% - 4px);width:100vw;z-index:",a.a.zIndex.mastheadButtongroup,";&:first-child{display:block;}@media (min-width:","1277px","){left:calc(-1 * (100vw - 1200px) / 2);}"),O=Object(i.css)("max-width:1200px;width:94%;margin:0 auto;padding-bottom:1.5rem;padding-top:1.5rem;text-align:center;color:",o.color.content.secondary,";border-top:1px solid ",a.a.color.gray70,";font-size:",a.a.font.size(13),";line-height:",a.a.font.size(18),";cursor:default;a{font-weight:",a.a.font.weight.bold,";:hover{color:",o.color.content.tertiary,";}}"),E=Object(i.css)("display:block;")},H0lQ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("Vj0M")),a=function(e,t){return"000".concat(e).slice(-1*t)},o=function(e){var t=(0,r.default)(e),n=t.hours,i=t.minutes,o=t.seconds;return n<1?"".concat(i,":").concat(a(o,2)):"".concat(n,":").concat(a(i,2),":").concat(a(o,2))};t.default=o},H1QR:function(e,t,n){"use strict";var i=n("VkAN"),r=n.n(i),a=n("lSNA"),o=n.n(a),s=n("gcR/"),l=n.n(s),c=(n("q1tI"),n("eFc+")),u=n.n(c),d=n("Jqp9"),p=n("d8k4"),f=n("zsRM"),m=n("XMA8"),h=n("hG4R"),g=n("HNZC"),y=n.n(g),v=n("wXC7"),b=n.n(v),_=n("wRre"),w=Object(d.css)("width:calc(100% - 40px);max-width:",b.a.breakpoint.textBodyWidth,"px;margin:15px auto;"),x=function(e){var t=e.media,n=t.url,i=new URL(n),r=Object(m.h)(Object(_.b)(t.promotionalMedia),"spanImageCrops");return l()(y.a,{className:w,documentData:{assetsHost:i.host,publishPath:i.pathname,fullImgUrl:r},title:t.headline.default,summary:t.summary,displayStyle:"Single Page"})};x.displayName="DocPromoShim";var k,O=x,E=n("3sMT"),T=Object(d.css)(b.a.breakpoint.small,"{margin-left:15px;display:flex;flex-direction:column;justify-content:center;}"),C=Object(d.css)("font-family:",b.a.font.serifBase,";color:",E.color.content.quaternary,";font-size:",b.a.font.size(15),";line-height:",b.a.font.size(20),";margin-bottom:5px;",b.a.breakpoint.medium,"{font-size:",b.a.font.size(15),";line-height:",b.a.font.size(20),";margin-bottom:10px;max-width:440px;}"),S=Object(d.css)("margin-bottom:15px;",b.a.breakpoint.medium,"{min-width:375px;margin-bottom:0;}"),P=Object(d.css)(b.a.breakpoint.small,"{display:flex;flex-direction:row;}"),M=Object(d.css)("display:block;"),I=Object(d.css)("font-family:",b.a.font.serifMedium,";font-weight:",b.a.font.weight.bold,";display:inline-block;color:",E.color.content.primary,";font-size:",b.a.font.size(18),";line-height:",b.a.font.size(22),";margin-bottom:4px;&:hover{color:",E.color.content.quaternary,";}&:focus{text-decoration:none;}",b.a.breakpoint.medium,"{font-size:",b.a.font.size(18),";line-height:",b.a.font.size(22),";}"),A=Object(d.css)("width:calc(100% - 40px);max-width:",b.a.breakpoint.textBodyWidth,"px;box-sizing:border-box;margin:0.5rem auto 1.5rem;padding:15px;border:1px solid ",E.color.stroke.quaternary,";&:hover{.",I,"{color:",E.color.content.quaternary,";}}",b.a.breakpoint.medium,"{padding:20px;}@media print{display:none;}"),j=Object(d.css)("width:calc(100% - 40px);margin:",b.a.breakpoint.mobileBlockMargins,";text-align:center;overflow:hidden;",b.a.breakpoint.medium,"{max-width:",b.a.breakpoint.textBodyWidth,"px;margin:",b.a.breakpoint.desktopBlockMargins,";}&.small{width:calc(100% - 40px);max-width:580px;display:flex;",b.a.breakpoint.small,"{margin-left:auto;margin-right:auto;}",b.a.breakpoint.extraLarge,"{max-width:",b.a.breakpoint.textBodyWidthExtralarge,"px;}}&.medium{max-width:",b.a.breakpoint.textBodyWidth,"px;width:100%;margin-left:0;",b.a.breakpoint.medium,"{max-width:",b.a.breakpoint.textBodyWidth,"px;width:100%;}",b.a.breakpoint.extraLarge,"{max-width:",b.a.breakpoint.textBodyWidthExtralarge,"px;}}&.large{width:calc(100% - 40px);max-width:",b.a.breakpoint.mediaMaxWidth,"px;margin-left:auto;margin-right:auto;",b.a.breakpoint.large,"{width:945px;}",b.a.breakpoint.extraLarge,"{width:",b.a.breakpoint.mediaMaxWidth,"px;}}&.full{width:100%;max-width:100%;margin-left:auto;margin-right:auto;}@media print{display:none;}"),L=Object(d.css)("display:none;"),R=function(e){var t=e.data,n=e.styles,i=e.truncated,r=e.elementCount,a=e.minimumTruncation,s=e.dropzoneCount,c=e.isAboveH1,u=t.media,h={shouldTruncate:i,minimumTruncation:a,elementCounter:r,dropzoneCounter:s},g=Object(f.h)(h)?L:null;if("Interactive"===(null==u?void 0:u.__typename)){if("doc-tools"===(null==u?void 0:u.sourceApplication))return l()(O,{media:u});var y=Object(m.h)(Object(_.b)(u.promotionalMedia),"spanImageCrops");return l()("div",{className:Object(d.cx)(A,g),"data-testid":"interactive-block"},void 0,l()("a",{className:Object(d.cx)(P,o()({},M,Boolean(!y))),href:u.url},void 0,y&&l()("div",{className:S},void 0,l()("img",{alt:"",src:y})),l()("div",{className:T},void 0,l()("h2",{className:I},void 0,u.headline.default),l()("p",{className:C},void 0,u.summary))))}return l()(p.a,{media:u,styles:Object(d.cx)(n,j),inStory:!0,isAboveH1:c,embeddedClass:g})};R.displayName="InteractiveBlock",R.defaultProps={styles:void 0,truncated:!1,elementCount:void 0,dropzoneCount:void 0,minimumTruncation:void 0,isAboveH1:!1},R.fragments={data:u()(k||(k=r()(["\n    fragment InteractiveBlock_data on InteractiveBlock {\n      media {\n        __typename\n        ...EmbeddedInteractive_media\n        ... on EmbeddedInteractive {\n          id\n          displayProperties {\n            maximumWidth\n            minimumWidth\n          }\n        }\n        ... on HasPromotionalProperties {\n          promotionalMedia {\n            __typename\n            ...SpanImage_media\n            ... on HasPromotionalProperties {\n              promotionalMedia {\n                ...SpanImage_media\n              }\n            }\n          }\n        }\n        ... on Interactive {\n          id\n          headline {\n            default\n          }\n          url\n          summary\n          firstPublished\n          sourceApplication\n        }\n      }\n    }\n    ","\n    ","\n  "])),h.a.fragments.media,p.a.fragments.media)};t.a=R},H6qo:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("1gPk")),o=function(e){var t=e.children;return r.default.createElement("span",{className:a.preClass},t)};o.displayName="PreFormatted";var s=o;t.default=s},HChe:function(e,t,n){"use strict";var i=n("E00O"),r=n("B2Q+");t.a=function(){return window.matchMedia("(min-width: ".concat(i.a.BREAKPOINT_ML,"px)")).matches?"desktop":Object(r.a)()}},HMjI:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=i(n("q1tI")),s=n("Jqp9"),l=(i(n("17x9")),i(n("bNs8"))),c=i(n("TTpX")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("6qvD")),d=n("f/4F"),p=i(n("lraK")),f=i(n("XMNT")),m=n("SJcc");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){var t=e.data,n=e.className,i=e.contentAlignment,r=e.Headshot,a=e.section,d=e.wordCount,h=e.showReadingTime,g=e.readingTimeRef;if(!t)return null;var v,b=t.headshots,_=void 0===b?null:b,w=t.bylines,x=void 0===w?null:w,k=t.role,O=void 0===k?null:k,E=t.timestamp,T=void 0===E?{}:E,C=(0,u.getHeadshotCount)(_),S=function(e){try{return e.map((function(e){return y(y({},e),{},{props:y(y({},e.props),{},{opts:y(y({},e.props.opts),{},{blank:!1})})})}))}catch(t){return e}}(O),P=function(e){return null!=e&&e.props?y(y({},e.props),{},{time:e.props.time||e.props.children}):e||{}}(T),M=P.time,I=P.lastMajorModification,A=P.updatedText,j=P.showUpdatedTimestamp,L=P.canShowTime,R="t-magazine"===a||"magazine"===a,N=T&&(v=T,!(0===Object.entries(v).length&&v.constructor===Object))||T&&(null==T?void 0:T.type);return o.default.createElement("div",{className:(0,s.cx)(m.totalBylineContainerClass,n)},o.default.createElement(m.ComposedBylineContainer,{headshotCount:C,contentAlignment:i},_&&o.default.createElement(u.default,{inComposedByline:!0,Headshot:r,headshots:_}),o.default.createElement(m.TextContainer,{headshotCount:C},x&&o.default.createElement(l.default,{bylines:x}),S&&o.default.createElement(c.default,null,S))),N&&o.default.createElement("div",{ref:g,"data-testid":"reading-time-module",className:m.readTimeContainerClass},o.default.createElement(m.SectionContainer,null,N&&o.default.createElement(m.SectionContainerItem,null,"function"==typeof T.type?T:o.default.createElement(f.default,{updatedText:A,canShowTime:L,lastMajorModification:I,className:m.timestampMarginsClass,showUpdatedTimestamp:j},M)),h&&!R&&o.default.createElement(p.default,{wordCount:d,className:m.readTimeClass}))))};v.displayName="ComposedByline",v.defaultProps={contentAlignment:"default",className:void 0,data:null,Headshot:d.StyledHeadshot,section:void 0,wordCount:null,showReadingTime:!1,readingTimeRef:void 0};var b=v;t.default=b},HNQ6:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(t){return o.default.createElement(s.default,null,(function(n){return o.default.createElement(e,(0,a.default)({},n,t))}))};try{var n=e.propTypes,i=(n.VHS,(0,r.default)(n,l),e.defaultProps),u=(i.VHS,(0,r.default)(i,c));t.defaultProps=u}catch(e){}return t.displayName="WithDependencyLoader(".concat(e.displayName,")"),t};var r=i(n("QILm")),a=i(n("pVnL")),o=i(n("q1tI")),s=i(n("11hc")),l=["VHS"],c=["VHS"]},HNZC:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.VALID_DISPLAY_STYLES=t.DISPLAY_STYLE=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("Jqp9")),o=i(n("0oBV")),s=i(n("42vy")),l=i(n("yEZI")),c=i(n("wXC7")),u=i(n("ZwWh")),d={COMPACT:"Compact",SINGLE_PAGE:"Single Page"};t.DISPLAY_STYLE=d;var p=Object.values(d);t.VALID_DISPLAY_STYLES=p;var f=function(e){var t=e.className,n=e.title,i=e.summary,o=e.documentData,p=e.displayStyle,f=e.deeplinkPage,m=e.imageSelection,h=e.setAttrs,g=e.isInAMP,y=o.assetsHost,v=o.publishPath,b=o.name,_=o.description,w=o.pages;!(Object.keys(o||{}).length>0)||n||i||h({title:b,summary:_});var x="".concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.includes(".stg.")?"https://www.stg.nytimes.com":"https://www.nytimes.com"}(y)).concat(v).concat(f?"#page-".concat(f):""),k=w&&Number(w).toLocaleString(),O=r.default.createElement("a",{href:x,className:c.default.button.default},r.default.createElement("strong",null,"Read Document"),w&&(f?" Page ".concat(Number(f).toLocaleString()," of ").concat(k):" ".concat(k," page").concat(w>1?"s":""))),E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1",n=arguments.length>2?arguments[2]:void 0;t||(t="1");var i=e.fullImgUrl,a=e.assetsFolder,o=e.assetsHost,s=e.thumbnailWidth,l=void 0===s?850:s,c=e.thumbnailHeight,u=void 0===c?1100:c,d=i||"https://".concat(o,"/").concat(a).concat(t,"/output-").concat(t,".png"),p="Thumbnail of page ".concat(t);return n?r.default.createElement("amp-img",{src:d,width:l,height:u,layout:"responsive",alt:p}):r.default.createElement("img",{src:d,alt:p})}(o,m,g);return r.default.createElement(u.default,{className:(0,a.cx)(t,"margins-h"),displayStyle:p},p===d.COMPACT&&r.default.createElement(r.default.Fragment,null,r.default.createElement("a",{href:x},r.default.createElement(s.default,null,n)),O),p===d.SINGLE_PAGE&&r.default.createElement(r.default.Fragment,null,r.default.createElement("a",{className:"thumbnail-link",href:x},E),r.default.createElement("div",null,r.default.createElement("a",{href:x},r.default.createElement(s.default,null,n)),r.default.createElement(l.default,null,i),O)))};f.displayName="DocPromo",f.defaultProps={isInAMP:!1,className:void 0,title:void 0,summary:void 0,documentData:{},deeplinkPage:void 0,imageSelection:"1",displayStyle:d.COMPACT,setAttrs:function(){}};var m=(0,o.default)(f);t.default=m},HO7F:function(e,t,n){"use strict";var i,r=n("VkAN"),a=n.n(r),o=n("gcR/"),s=n.n(o),l=n("lSNA"),c=n.n(l),u=(n("q1tI"),n("eFc+")),d=n.n(u),p=n("AtQq");function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){var t,n=e.body,i=e.placement,r=e.componentTypemapExtension,a=e.blockClass,o=m(m({},p.a),r||{}),l=null==n||null===(t=n.content)||void 0===t?void 0:t.map((function(e,t){var n;if(null!=e&&null!==(n=e.__typename)&&void 0!==n&&n.includes("Header"))return null;var r=o[null==e?void 0:e.__typename];return r?s()(r,{className:a,data:e,placement:i},"".concat(null==e?void 0:e.__typename,"-").concat(t.toString())):null}));return null!=l?l:null};h.defaultProps={placement:void 0,componentTypemapExtension:{},blockClass:null},h.fragments={data:d()(i||(i=a()(["\n    fragment Capsule_data on Capsule {\n      body {\n        ...DocumentBlock_data\n      }\n    }\n    ","\n  "])),p.b)},t.a=h},HTGc:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=i(n("q1tI")),a=i(n("JwCr"));function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return r.default.createElement(a.default,{key:n},t)}o.displayName="linkFormatFromOak"},HTd6:function(e,t,n){"use strict";n.d(t,"b",(function(){return X}));var i=n("VkAN"),r=n.n(i),a=n("lSNA"),o=n.n(a),s=n("gcR/"),l=n.n(s),c=n("QILm"),u=n.n(c),d=n("q1tI"),p=n.n(d),f=n("eFc+"),m=n.n(f),h=n("s5tu"),g=n("t0IW"),y=n("Jqp9"),v=n("wXC7"),b=n.n(v),_=Object(y.css)("white-space:pre-wrap;"),w=Object(y.css)("color:",b.a.color.blue20,";text-decoration:underline;&:hover{color:",b.a.color.blue30,";}&:visited{color:",b.a.color.blue20,";}"),x=Object(y.css)("font-style:italic;.bold{font-weight:",b.a.font.weight.bold,";font-style:italic;}"),k=Object(y.css)("font-weight:",b.a.font.weight.bold,";.italic{font-weight:",b.a.font.weight.bold,";font-style:italic;}"),O=Object(y.css)("float:left;width:auto;margin:23px 40px 20px 0;font-size:",b.a.font.size(66),";font-family:",b.a.font.magslab,",",b.a.font.magazineSansBase,";line-height:0.5;color:",b.a.color.black,";"),E=Object(y.css)("vertical-align:super;font-size:smaller;line-height:0;"),T=Object(y.css)("vertical-align:sub;font-size:smaller;line-height:0;"),C=function(e){var t=e.children,n=e.url,i=e.title,r=e.opts;if(Object(h.isInternalLink)(n)){n=Object(g.a)(n,{module:"inline"})}return r.blank?l()("a",{rel:"noopener noreferrer",target:"_blank",href:n,title:i,className:w},void 0,t):l()("a",{rel:"noopener noreferrer",href:n,title:i,className:w},void 0,t)};C.displayName="LinkFormat",C.defaultProps={title:void 0,opts:{}};var S=C,P=function(e){var t=e.children;return l()("strong",{className:k},void 0,t)};P.displayName="BoldFormat";var M=P,I=function(e){var t=e.children;return l()("em",{className:x},void 0,t)};I.displayName="ItalicFormat";var A=I,j=function(e){var t=e.children;return l()("span",{className:O},void 0,t)};j.displayName="DropcapFormat";var L=j,R=function(e){var t=e.children;return l()("sup",{className:E},void 0,t)};R.displayName="SuperscriptFormat";var N=R,D=function(e){var t=e.children;return l()("sub",{className:T},void 0,t)};D.displayName="SubscriptFormat";var B=D,z=function(e){var t=e.children;return l()("span",{className:_},void 0,t)};z.displayName="PreFormatted";var F,U,H=z,W=["__typename"];function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=/(\r|\n|\t|[\s]{2,})/g,Y={LinkFormat:S,BoldFormat:M,ItalicFormat:A,DropcapFormat:L,SuperscriptFormat:N,SubscriptFormat:B},Z=function(e){var t=e.content,n=t.text,i=t.formats,r=t.__typename,a=e.opts;if("LineBreakInline"===r)return F||(F=l()("br",{}));var o=n.split(G).map((function(e){return G.test(e)?l()(H,{},e,e):e}));return(null==i?void 0:i.length)>0&&i.forEach((function(e){o=function(e,t){var n=e.__typename,i=u()(e,W);return Y[n]?p.a.createElement(Y[n],i,t):null}(V(V({},e),{},{opts:a}),o)})),o};Z.fragments={content:m()(U||(U=r()(["\n    fragment TextInline_content on InlineUnion {\n      __typename\n      ... on LineBreakInline {\n        type\n      }\n      ... on TextInline {\n        text\n        formats {\n          __typename\n          ... on BoldFormat {\n            type\n          }\n          ... on ItalicFormat {\n            type\n          }\n          ... on LinkFormat {\n            url\n            title\n            uri\n          }\n        }\n      }\n    }\n  "])))};var X=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===t.blank&&(t.blank=!0),e?e.map((function(e,n){return l()(Z,{content:e,opts:t},n.toString())})):null};t.a=Z},HU5K:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n("QS0n");function r(){var e=Object(i.useParams)(),t=e.year,n=e.month,r=e.day;return!(t&&n&&r)}},HZTh:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=n("3sMT");t.default=function(){return r.default.createElement("svg",{width:"10",height:"11",viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M4.64645 5.26107C4.45118 5.45633 4.45118 5.77292 4.64645 5.96818C4.84171 6.16344 5.15829 6.16344 5.35355 5.96818L4.64645 5.26107ZM9.74264 1.37198C9.74264 1.09584 9.51878 0.871983 9.24264 0.871983L4.74264 0.871983C4.4665 0.871983 4.24264 1.09584 4.24264 1.37198C4.24264 1.64813 4.4665 1.87198 4.74264 1.87198L8.74264 1.87198L8.74264 5.87198C8.74264 6.14813 8.9665 6.37198 9.24264 6.37198C9.51878 6.37198 9.74264 6.14813 9.74264 5.87198L9.74264 1.37198ZM5.35355 5.96818L9.59619 1.72554L8.88909 1.01843L4.64645 5.26107L5.35355 5.96818Z",fill:a.color.content.quaternary}),r.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 2.62802H0.75C0.335787 2.62802 0 2.96381 0 3.37802V9.87802C0 10.2922 0.335786 10.628 0.75 10.628H7.25C7.66421 10.628 8 10.2922 8 9.87802V8.12802H7V9.62802H1V3.62802H3V2.62802Z",fill:a.color.content.quaternary}))}},HoNw:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("RIqP")),a=i(n("lwsE")),o=i(n("W8MJ")),s=i(n("lgII")),l=i(n("65wn")),c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(this,e),this.data=t}return(0,o.default)(e,[{key:"itemList",get:function(){var e,t,n,i=this.data,a=i.highlights,o=void 0===a?{}:a,s=i.stream,l=void 0===s?{}:s,c=i.embedded,u=i.grouping,d=i.lists,p=[];Array.isArray(null==d||null===(e=d.personalizedList)||void 0===e?void 0:e.edges)&&(null==d||null===(t=d.personalizedList)||void 0===t||null===(n=t.edges)||void 0===n?void 0:n.length)>0&&d.personalizedList.edges.forEach((function(e){p.push(e)})),null!=o&&o.edges&&p.push.apply(p,(0,r.default)(o.edges)),Array.isArray(c)&&c.length>0&&c.forEach((function(e){Array.isArray(e)&&e.length>0&&p.push.apply(p,(0,r.default)(e))})),Array.isArray(u)&&u.length>0&&u.forEach((function(e){Array.isArray(e.relations)&&p.push.apply(p,(0,r.default)(e.relations.slice(0,4)))})),null!=l&&l.edges&&p.push.apply(p,(0,r.default)(l.edges));var f=[];return p.filter((function(e){var t=e.node,n=e.asset,i=t||n,r=(null==i?void 0:i.url)||(null==i?void 0:i.targetUrl);return f.indexOf(r)<0&&(f.push(r),!0)}))}},{key:"getStructuredData",value:function(){var e,t=this.data,n=t.url,i=t.name,r=t.longDescription,a=t.tagline,o=t.language,c=t.section,u=n.includes("todayspaper")?"https://www.nytimes.com/section/".concat(c.name):n,d=a||r,p=(null==o?void 0:o.code)||void 0,f=new s.default({url:u,name:i,description:d,inLanguage:p,mainEntity:new l.default({items:this.itemList.slice(0,30)})});return 0===(null===(e=this.itemList)||void 0===e?void 0:e.length)?(delete f.mainEntity,f):f}}]),e}();t.default=c},HvIc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=[{key:"Anonymous Sources",displayLabel:"Anonymous Sources",label:"Understanding The Times",title:"How we use anonymous sources",active:!0,body:"The Times uses anonymous sources for information that we think is newsworthy and credible and that we couldnt report otherwise. At least one editor must know the sources identity, and a high-ranking editor must approve the sourcing. <a href='https://www.nytimes.com/2018/06/14/reader-center/how-the-times-uses-anonymous-sources.html'>Read more.</a>"},{key:"Leaks",displayLabel:"Leaks",label:"Understanding The Times",title:"How we decide when to publish leaked news",active:!0,body:'Providing confidential information to the public without official authorization is something The Times weighs very seriously, balancing the potential news value against the potential costs. <a href="https://www.nytimes.com/2018/06/07/reader-center/how-the-times-decides-when-to-publish-leaked-news.html">Read more</a> about the legality and ethics of the practice.'}]},HvhO:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.mediaOrientationStyles=t.mediaFigureVerticalSizeStyles=t.mediaFigureSmallNoCreditStyles=t.mediaFigureSizeStyles=t.mediaElementClass=t.default=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=n("SbcB"),s=i(n("icfT")),l=i(n("6RhY")),c=(0,r.css)("width:100%;vertical-align:top;");t.mediaElementClass=c;t.mediaFigureSmallNoCreditStyles=function(e){return(0,r.css)("display:block;",s.default,"{margin-left:auto;margin-right:auto;}",l.default,"{margin-left:auto;margin-right:auto;margin-top:10px;",o.Credit,"{margin-left:-8px;}",e.theme.breakpointMap.small,"{",o.Credit,"{margin-left:5px;}}",e.theme.breakpointMap.mediumLarge,"{",o.Credit,"{margin-left:5px;}}",e.theme.breakpointMap.extraLarge,"{",o.Credit,"{margin-left:40px;}}}")};var u=(0,r.themeFn)("mediaSize",{small:(0,r.css)(s.default,"{max-width:240px;}"),medium:function(e){return(0,r.css)(e.theme.breakpointMap.small,"{width:",e.theme.isFullBleed?"100%":"420px",";}",s.default,"{",e.theme.breakpointMap.small,"{}}",l.default,"{",e.theme.breakpointMap.small,"{}",e.theme.breakpointMap.extraLarge,"{}}")},large:function(e){return(0,r.css)(e.theme.breakpointMap.small,"{width:",a.default.breakpoint.textBodyWidth,"px;}",e.theme.breakpointMap.extraLarge,"{width:",a.default.breakpoint.mediumMediaExtralarge,"px;}",l.default,"{",e.theme.breakpointMap.medium,"{margin-left:0;}}")}});t.mediaFigureVerticalSizeStyles=u;var d=(0,r.themeFn)("mediaSize",{small:function(e){return(0,r.css)("width:",a.default.breakpoint.mobileFullWidth,";display:flex;",e.theme.breakpointMap.small,"{max-width:",a.default.breakpoint.textBodyWidth,"px;margin-left:auto;margin-right:auto;}",e.theme.breakpointMap.mediumLarge,"{max-width:",a.default.breakpoint.textBodyWidthExtralarge,"px;width:100%;}",e.theme.breakpointMap.extraLarge,"{max-width:",a.default.breakpoint.textBodyWidthExtralarge,"px;}")},medium:function(e){return(0,r.css)("width:100%;max-width:",a.default.breakpoint.textBodyWidth,"px;",e.theme.breakpointMap.small,"{width:",a.default.breakpoint.mobileFullWidth,";}",e.theme.breakpointMap.medium,"{width:auto;max-width:",a.default.breakpoint.textBodyWidthExtralarge,"px;}")},large:function(e){return(0,r.css)("max-width:",a.default.breakpoint.mediaMaxWidth,"px;margin-left:auto;margin-right:auto;",e.theme.breakpointMap.small,"{width:auto;}",e.theme.breakpointMap.mediumLarge,"{width:945px;}",e.theme.breakpointMap.extraLarge,"{width:",a.default.breakpoint.mediaMaxWidth,"px;}")}});t.mediaFigureSizeStyles=d;var p=(0,r.themeFn)("languageDirection",{rightToLeft:(0,r.css)("text-align:right;direction:rtl;unicode-bidi:isolate;")}),f=(0,r.themeFn)("mediaOrientation",{vertical:u});t.mediaOrientationStyles=f;var m=(0,r.styled)("figure",{target:"e1g7ppur0"})(d,";",f,";",p,";");t.default=m},Hy4T:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n("q1tI")),l=n("Jqp9"),c=n("X6oL"),u=o(n("5UIh")),d=a(n("N2Xg")),p=n("YXtJ"),f=n("TFIS"),m=n("syiw"),h=n("HDG5"),g=n("FY2l"),y=n("djNW"),v=n("6gWn"),b=n("bSj6"),_=o(n("XvvG"));function w(){return s.default.createElement("div",{className:(0,l.cx)(d.dockHeaderWrapper)},s.default.createElement("span",{className:(0,l.cx)(d.dockHeaderUrgencyMessage)},s.default.createElement(f.SaleUrgency,null),"."," "),"Save 50% on your first year of Cooking.")}function x(){return s.default.createElement("div",{className:(0,l.cx)(d.dockContentHed)},"Enjoy easy and delicious recipes ",s.default.createElement("br",null)," for the holidays and every day.")}function k(e){var t,n,i=e.unit;return s.default.createElement(_.default,{currentPriceClassname:d.dockContentPricing,oldPriceClassname:d.dockContentPricingBau,oldPrice:null===(t=i.content)||void 0===t?void 0:t.bauPrice,currentPrice:"".concat(null===(n=i.content)||void 0===n?void 0:n.salesPrice,"/month")})}function O(e){var t,n,i=e.unit,r=e.onClick;return s.default.createElement("div",{className:(0,l.cx)(d.dockContentCtaWrapper)},s.default.createElement(b.Anchor,{className:(0,l.cx)(d.dockContentCta),href:null===(t=i.content)||void 0===t?void 0:t.subscriptionURI,target:b.Target.Blank,onClick:r},"Learn more"),s.default.createElement("div",{className:(0,l.cx)(d.dockContentCtaDek)},"Billed ",null===(n=i.content)||void 0===n?void 0:n.frequency," for the first year"))}function E(e){var t=e.unit,n=e.onCtaClick;return s.default.createElement("div",{className:(0,l.cx)(d.dockContentWrapper)},s.default.createElement("div",{className:(0,l.cx)(d.dockContentContainer)},s.default.createElement(p.FoodArticleSalesDockLogo,null),s.default.createElement(x,null),s.default.createElement("div",null,s.default.createElement(k,{unit:t}),s.default.createElement(O,{unit:t,onClick:n}))))}t.default=function(e){var t,n,i,r,a,o=e.unit,p=(0,s.useState)(!1),f=p[0],b=p[1],_=(0,s.useState)(!0),x=_[0],k=_[1],O=(0,m.useMessageSelection)({config:{name:"dock"}}),T=(0,h.useUserState)(),C=(0,c.useTracking)(),S=null===(t=o.content)||void 0===t?void 0:t.subscriptionURI,P="/"===(0,g.getPathName)()?"homepage":"article",M=function(e){var t;return{event:"moduleInteraction",eventData:{pagetype:P,trigger:"module",type:"click"},module:{name:"dock",context:"expanded",label:null===(t=null==O?void 0:O.response)||void 0===t?void 0:t.campaign(),element:{label:"".concat(e),name:y.Action.Subscribe,url:S}}}},I=function(e){C.trackEvent(M(e.target.textContent))};if(null==O?void 0:O.loading)return null;if(!f){var A=null===(i=null===(n=null==O?void 0:O.response)||void 0===n?void 0:n.userstate())||void 0===i?void 0:i.messageSelectionMessageCaps,j=null;if(A)if((B=A).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==O?void 0:O.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==O?void 0:O.response)||void 0===n?void 0:n.audience())&&(j=e)})),null!==j){var L=j,R=new Date(null==L?void 0:L.lastSeenOn).getTime(),N=(new Date).getTime(),D=Math.abs(Math.round(N-R)/6e4);k(!0),D>2880?(L.viewCount=1,L.lastSeenOn=(new Date).toISOString(),k(!1)):L.viewCount+=1,T.update({messageSelectionMessageCaps:B})}if(!j){var B=[];A&&(B=A),B.push({unit:"dock",campaign:null===(r=null==O?void 0:O.response)||void 0===r?void 0:r.campaign(),audience:null===(a=null==O?void 0:O.response)||void 0===a?void 0:a.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),T.update({messageSelectionMessageCaps:B}),k(!1)}b(!0)}return x?s.default.createElement(u.default,{headingClassName:(0,l.cx)(d.dockHeaderHeadingClassName),testId:"onsite-messaging-unit-".concat(null===v.config||void 0===v.config?void 0:v.config.name),unit:o,contentID:"STANDCON_CONV_SALE_DOCK_ON_FOOD_ARTICLES_TEST_2311",dockID:"standard",header:s.default.createElement(w,null),card:s.default.createElement(E,{unit:o,onCtaClick:I}),onDockHeadingClick:function(){C.trackEvent(M("GET STARTED")),window.open(S,"_blank","noopener,noreferrer")},headerCollapsedCTA:"GET STARTED",isDockDismissible:!1,isDockExpandable:!1,minimized:!0}):s.default.createElement(u.default,{headingClassName:(0,l.cx)(d.dockHeaderHeadingClassName),testId:"onsite-messaging-unit-".concat(null===v.config||void 0===v.config?void 0:v.config.name),unit:o,contentID:"STANDCON_CONV_SALE_DOCK_ON_FOOD_ARTICLES_TEST_2311",dockID:"expand",header:s.default.createElement(w,null),card:s.default.createElement(E,{unit:o,onCtaClick:I}),headerExpandedCTA:"COLLAPSE",headerCollapsedCTA:"EXPAND",isDockDismissible:!1,isDockExpandable:!0,minimized:!1,minimizedTrackingValue:"collapse"})}},Hy5q:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("Jqp9"),a=n("3sMT"),o=i(n("WThh")),s=i(n("wXC7")),l=n("dp42"),c=n("yFJX"),u=n("6l8D"),d=(0,o.default)(["medium"]),p=function(e){return(0,r.css)("color:",a.color.content.secondary,";",d(e,{fontSize:[12,15],lineHeight:[17,19]}),";")},f=(0,r.themeFn)("treatment",{none:function(e){return(0,r.css)("color:",a.color.content.quaternary,";font-family:",s.default.font.serifBase,";",d(e,{fontSize:[14,15],lineHeight:[18,20]}),";")},magazine:function(e){return(0,r.css)("color:",a.color.content.secondary,";font-family:",s.default.font.magazineSansBase,";line-height:",s.default.font.size(18),";",d(e,{fontSize:[14,15]}),";")},sponsored:function(e){return(0,r.css)(p(e),";font-family:",s.default.font.sponsoredBase,";")},sponsoredSensitive:function(e){return(0,r.css)(p(e),";font-family:",s.default.font.sponsoredSensitive,";")},"t-magazine":function(e){return(0,r.css)("color:",a.color.content.secondary,";font-family:",s.default.font.tmagSansBase,";font-weight:",s.default.font.weight.book,";line-height:",s.default.font.size(18),";letter-spacing:0.02em;",d(e,{fontSize:[14,15]}),";")},liveSplitLayout:(0,r.css)("color:",a.color.content.quaternary,";font-family:",s.default.font.serifBase,";line-height:",s.default.font.size(18),";font-size:",s.default.font.size(14),";")}),m=(0,r.themeFn)("languageDirection",{rightToLeft:(0,r.css)("margin-left:7px;margin-right:0;")}),h=(0,r.styled)("span",{target:"e13ogyst0"})("margin-right:7px;",f,";",m,";strong{",c.boldClass,";}em{",l.italicClass,";}a{",u.linkClass,";}");t.default=h},I0Yx:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=n("3sMT"),s=(0,r.styled)("span",{target:"eatfx1z0"})("font-family:",a.default.font.franklinBase,";font-weight:",a.default.font.weight.medium,";letter-spacing:0.05em;font-size:13px;line-height:18px;",(function(e){return e&&"string"==typeof e.children&&"breaking"===e.children.toLowerCase()?"color: ".concat(o.color.signal.breaking):""}),";",(function(e){return e&&"string"==typeof e.children&&"developing"===e.children.toLowerCase()?"color: ".concat(o.color.signal.developing):""}),";",(function(e){return e&&"string"==typeof e.children&&"live"===e.children.toLowerCase()?"color: ".concat(o.color.signal.breaking):""}),";",a.default.breakpoint.medium,"{font-size:14px;line-height:20px;}");t.default=s},I4yQ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),i(n("XSE6")));function o(e){return e.isInEditor?r.default.createElement("div",null,r.default.createElement("h1",{className:a.default}," Advertisement ")):null}o.disableHydration=!0,o.defaultProps={isInEditor:!1};var s=o;t.default=s},I6KV:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Attribution",{enumerable:!0,get:function(){return a.StyledAttribution}}),Object.defineProperty(t,"Quote",{enumerable:!0,get:function(){return a.StyledQuote}}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("JKTc")),o=function(e){var t=e.quote,n=e.attribution,i=e.className,o=e.children;return r.default.createElement("blockquote",{className:i},o||r.default.createElement(r.default.Fragment,null,r.default.createElement(a.StyledQuote,null,t),n.length?r.default.createElement(a.StyledAttribution,null,n):null))};o.displayName="Pullquote",o.defaultProps={attribution:"",className:void 0,children:null};var s=o;t.default=s},I9y1:function(e,t,n){"use strict";t.a={medium:"@media (min-width: 765px)",mediumLarge:"@media (min-width: 1020px)",large:"@media (min-width: 1280px)",padMediumLarge:"@media (min-width: 769px)"}},IBfC:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.propTypes=t.defaultProps=void 0;var r=i(n("17x9")),a={opts:r.default.shape({}),content:r.default.shape({__typename:r.default.string,text:r.default.string,formats:r.default.arrayOf(r.default.shape())}),headline:r.default.shape({content:r.default.arrayOf(r.default.shape({__typename:r.default.string,text:r.default.string,formats:r.default.arrayOf(r.default.shape())}))}),label:r.default.shape({content:r.default.arrayOf(r.default.shape({__typename:r.default.string,text:r.default.string,formats:r.default.arrayOf(r.default.shape())}))}),summary:r.default.shape({content:r.default.arrayOf(r.default.shape({__typename:r.default.string,text:r.default.string,formats:r.default.arrayOf(r.default.shape())}))}),latestUpdate:r.default.shape({content:r.default.arrayOf(r.default.shape({__typename:r.default.string,text:r.default.string,formats:r.default.arrayOf(r.default.shape())})),label:r.default.string}),byline:r.default.shape({textAlign:r.default.string,hideHeadshots:r.default.bool,bylines:r.default.arrayOf(r.default.shape({creators:r.default.arrayOf(r.default.shape({displayName:r.default.string,bioUrl:r.default.string})),prefix:r.default.string}))}),media:r.default.node,timestampBlock:r.default.shape(),lastMajorModification:r.default.string,shareTools:r.default.node,translations:r.default.arrayOf(r.default.shape()),newsStatus:r.default.string,timesExclusive:r.default.node,sponsoredByAd:r.default.node,brandBar:r.default.node,associatedNewsletter:r.default.shape()};t.propTypes=a;t.defaultProps={headline:null,summary:null,latestUpdate:null,byline:null,media:null,timestampBlock:null,lastMajorModification:null,shareTools:null,label:null,translations:null,newsStatus:null,timesExclusive:null,sponsoredByAd:null,brandBar:null,associatedNewsletter:null}},IFOt:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("Jqp9")),o=i(n("oKgi")),s=i(n("139F")),l=n("abzs"),c=n("hMrr"),u=function(e){var t=e.media,n=e.scrollyIndex,i=t.map((function(e){if("photo"===e.imageType){var t=(0,l.getCrop)(e.crops,"MOBILE_MASTER")?(0,l.getCrop)(e.crops,"MOBILE_MASTER"):(0,l.getCrop)(e.crops,"MASTER");return{mobileUrl:t.renditions[0].url,text:e.caption.text,credit:e.credit,height:t.renditions[0].height,width:t.renditions[0].width,__typename:"Image"}}var n,i=e.renditions&&e.renditions.find((function(e){return"video_720p_mp4_mobile"===e.type}));return{mobileUrl:(n=i&&i.url?i:e.renditions&&e.renditions.find((function(e){return"video_480p_mp4"===e.type}))).url,text:e.headline.default,credit:e.summary,__typename:"Video",width:n.width,height:n.height}}));return r.default.createElement("div",{id:"".concat("scrolly-instance","-").concat(n),className:(0,a.cx)(c.ampContainerClass,"".concat("scrolly-container","-amp"))},i.map((function(e){return r.default.createElement("div",{className:c.ampContainerItemClass},r.default.createElement(o.default,{dangerouslySetInnerHTML:{__html:e.text},className:c.summaryClass}),"Image"===e.__typename&&r.default.createElement("amp-img",{src:e.mobileUrl,width:e.width,height:e.height,layout:"responsive"}),"Video"===e.__typename&&r.default.createElement("amp-video",{src:e.mobileUrl,width:e.width,height:e.height,layout:"responsive",autoplay:"",muted:"",loop:""}),r.default.createElement(s.default,{className:c.ampCreditClass},e.credit))})))};u.displayName="AmpScrolly",u.defaultProps={scrollyIndex:void 0};var d=u;t.default=d},IFQa:function(e,t,n){"use strict";n.d(t,"j",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"h",(function(){return g})),n.d(t,"i",(function(){return y})),n.d(t,"a",(function(){return v})),n.d(t,"g",(function(){return b})),n.d(t,"f",(function(){return _}));var i=n("Jqp9"),r=n("wXC7"),a=n.n(r),o=n("3sMT"),s=a.a.breakpoint,l=a.a.font,c=a.a.color,u=Object(i.css)("font-family:",l.serifMedium,";font-weight:",l.weight.medium,";color:",o.color.content.secondary,";font-size:",l.size(17),";line-height:",l.size(21),";text-align:left;flex-grow:1;margin:auto 0;padding-left:10px;display:flex;flex-direction:column-reverse;",s.medium,"{padding:0;font-size:",l.size(16),";}"),d=Object(i.css)("font-family:",l.franklinBase,";font-size:",l.size(12),";line-height:",l.size(15),";font-weight:",l.weight.medium,";text-transform:uppercase;letter-spacing:0.03em;margin-top:5px;color:",c.gray10,";"),p=Object(i.css)("color:",o.color.content.quaternary,";"),f=Object(i.css)("color:",o.color.content.primary,";&:hover{color:",o.color.content.quaternary,";}::after{content:'';position:absolute;top:0;right:0;left:0;bottom:0;}",s.medium,"{font-size:",l.size(16),";line-height:",l.size(20),";padding-right:4px;}"),m=Object(i.css)("display:block;font-family:",l.serifSmall,";"),h=Object(i.css)("figcaption{display:none;section{font-size:",l.size(10),";text-transform:none;}}min-width:75px;img{width:75px;height:75px;}figure{padding-bottom:0;margin:0;width:75px;height:75px;}",s.medium,"{min-width:60px;img{width:60px;height:100%;}figure{width:100%;height:100%;}figcaption{section{padding-bottom:4px;}}}"),g=Object(i.css)("display:flex;flex-direction:row-reverse;position:relative;",s.medium,"{flex-direction:row;}"),y=Object(i.css)("width:100%;padding:0 20px 15px;a::after{content:none;}",s.medium,"{padding:0;}"),v=Object(i.css)("width:100%;padding:0 20px 15px;",s.medium,"{width:50%;padding:0 0 20px;&:nth-child(3){display:none;}.",g,"{border-left:1px solid ",c.gray60,";}}",s.large,"{width:33.3%;&:nth-child(3){display:block;}}"),b=Object(i.css)("width:100%;padding:0 20px 15px;",s.medium,"{max-width:48%;padding:0 0 20px;}",s.large,"{max-width:32%;}.",g,"{width:100%;.",p,",.",f,"{font-size:",l.size(17),";line-height:",l.size(20),";}.",h,"{min-width:75px;img{width:75px;height:75px;}}",s.medium,"{border-left:none;padding-right:0;display:flex;flex-direction:column-reverse;.",f,",.",p,"{font-size:",l.size(18),";line-height:",l.size(22),";}.",h,"{width:100%;height:100%;max-width:inherit;min-width:60px;img{width:100%;height:100%;}figure{padding-bottom:0;}figcaption{",m," section{padding-bottom:4px;}}}}}"),_=Object(i.css)("font-size:",l.size(21),";line-height:",l.size(23),";color:",c.gray10,";font-weight:",l.weight.medium,";")},IHYJ:function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return d}));var i=n("Jqp9"),r=n("3sMT"),a=n("wXC7"),o=n.n(a),s=Object(i.css)("top:0;position:sticky;background-color:",r.color.background.elevated,";z-index:902;",o.a.printHide,";"),l=Object(i.css)(s,";",o.a.breakpoint.mediumLarge,"{margin-top:3px;}"),c=Object(i.css)("&::after{content:'';position:absolute;top:0;left:0;height:100%;width:100%;z-index:-1;box-shadow:0 0 transparent,0 0 transparent,1px 3px 6px #00000026;opacity:0;transition:opacity 200ms ease-out;@media (prefers-color-scheme:dark){.NYTApp &{box-shadow:none;}}}"),u=Object(i.css)("border-bottom:1px solid transparent;&::after{opacity:1;}@media (prefers-color-scheme:dark){.NYTApp &{border-bottom:1px solid ",r.color.stroke.quaternary,";}}"),d=Object(i.css)("border-bottom:1px solid ",r.color.stroke.quaternary,";&::after{box-shadow:none;}")},IHwD:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.GMQ4HOLIDAYGIFTINGDOCKS2312Wirecutter=t.giftingButtonClass=t.wrapHeadline=t.logoClass=t.giftingDockShowMobile768=t.giftingDockShowDesktop768=t.giftingDockShowMobile=t.giftingDockShowDesktop=t.subHeadlineGiftingBF=t.headlineGiftingBF=t.contentDockDesktop=t.wrapRedBoxClassMobile=t.wrapRedBoxClass=t.logosDockDesktop=t.mainContentW=t.mainContent=t.contentTextClass=t.headerTextClass=void 0;var r=n("Jqp9"),a=n("lVLo");t.headerTextClass=(0,r.css)(o||(o=i(["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  margin: auto 0 auto 20px;\n  white-space: pre-wrap;\n  color: ",";\n  .Wirecutter {\n    @media (max-width: ","px) {\n      font-size: 12.5px;\n    }\n  }\n  @media (min-width: ","px) {\n    white-space: unset;\n  }\n"],["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  margin: auto 0 auto 20px;\n  white-space: pre-wrap;\n  color: ",";\n  .Wirecutter {\n    @media (max-width: ","px) {\n      font-size: 12.5px;\n    }\n  }\n  @media (min-width: ","px) {\n    white-space: unset;\n  }\n"])),a.fonts.franklin,a.fontWeights.normal,a.colors.black,a.widths.small,a.widths.small),t.contentTextClass=(0,r.css)(s||(s=i(["\n  font-family: ",";\n  font-size: 18px;\n  font-weight: ",";\n  color: ",";\n  margin: 0 0 18px;\n"],["\n  font-family: ",";\n  font-size: 18px;\n  font-weight: ",";\n  color: ",";\n  margin: 0 0 18px;\n"])),a.fonts.cheltenham,a.fontWeights.light,a.colors.white);var o,s,l,c,u,d,p,f,m,h,g,y,v,b,_,w,x,k,O=20;t.mainContent=(0,r.css)(l||(l=i(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  border-radius: 6px;\n  padding: 0 ","px;\n  height: 140px;\n  margin: 0 ","px ","px;\n  width: calc(100% - (","px + ","px));\n  flex-direction: row;\n  justify-content: space-evenly;\n  @media (max-width: 768px) {\n    width: calc(100% - 40px);\n  }\n  .Wirecutter {\n    display: flex;\n    background-color: #56cb82;\n    flex-direction: row;\n    justify-content: space-evenly;\n    align-items: center;\n    height: 140px;\n    width: 100%;\n    @media (max-width: 480px) {\n      height: 146px;\n    }\n    .logoClass {\n      width: 276px;\n      @media (max-width: 768px) {\n        width: 218px;\n      }\n    }\n    .wrapRedBoxClass {\n      display: none;\n    }\n    .subHeadlineGiftingBF {\n      margin: 0;\n      font-size: 19px;\n      line-height: 21px;\n      color: #000000;\n      font-family: ",";\n      font-weight: ",";\n      letter-spacing: -0.2px;\n      @media (max-width: 768px) {\n        font-size: 17px;\n        line-height: 120%;\n      }\n    }\n    .subHeadlineGiftingBFG {\n      margin: 0;\n      font-size: 19px;\n      line-height: 21px;\n      color: #000000;\n      font-family: ",";\n      font-weight: ",";\n      letter-spacing: -0.2px;\n      @media (max-width: 768px) {\n        font-size: 17px;\n        line-height: 120%;\n      }\n    }\n    .headlineGiftingBF {\n      margin: 0;\n      font-size: 19px;\n      font-family: ",";\n      font-weight: 800;\n      color: #000;\n      padding-bottom: 9px;\n      color: #000000;\n      @media (max-width: 768px) {\n        padding-bottom: 6px;\n        font-size: 17px;\n      }\n    }\n    .wrapRedBoxClassMobile {\n      display: none;\n    }\n    .headlineGiftingBFM {\n      display: none;\n    }\n    .subHeadlineGiftingBFGM {\n      display: none;\n    }\n    .giftingButtonClass{\n      display: flex;\n      align-items: baseline;\n      gap: 5px;\n      letter-spacing: -0.05px;\n      border-radius: 3px;\n      font-family: ",";\n      font-weight: ",";\n      font-size: 12px;\n      text-decoration: none;\n      background-color: ",";\n      color: ",';\n      padding: 10px 20px;\n      @media (max-width: 768px) {\n        margin-top: 10px;\n      }\n    }\n\n  }\n  .Games {\n    display: flex;\n    background-color: #faecd5;\n    flex-direction: row;\n    justify-content: space-evenly;\n    align-items: center;\n    height: 140px;\n    width: 100%;\n    .logoClass {\n      width: 178px;\n      @media (max-width: 1024px) {\n        width: 88px;\n        content:url("https://www.nytimes.com/vi-assets/static-assets/images/MessageComponentLibrary/GH_GamesLogoM.svg");\n      }\n    }\n    .wrapRedBoxClass {\n      width: 137px;\n      img {\n        width: 100%;\n      }\n      @media (max-width: 1024px) {\n        width: 120px;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .subHeadlineGiftingBF {\n      margin: 0;\n      font-size: 17px;\n      line-height: 19px;\n      color: #000000;\n      font-family: ',";\n      font-weight: ",";\n      padding-bottom: 9px;\n      @media (max-width: 768px) {\n        font-size: 15px;\n        line-height: 120%;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .headlineGiftingBF {\n      margin: 0;\n      font-size: 17px;\n      color: #000000;\n      font-family: ",";\n      font-weight: ",";\n      @media (max-width: 1024px) {\n        padding-bottom: 0px;\n        font-size: 15px;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .headlineGiftingBFM {\n      display: none;\n      @media (max-width: 690px) {\n        color: #000000;\n        display: inline;\n        margin: 0;\n        font-size: 17px;\n        line-height: 26px;\n        font-family: ",";\n        font-weight: ",";\n      }\n    }\n    .subHeadlineGiftingBFGM {\n      display: none;\n      @media (max-width: 690px) {\n        white-space: pre-wrap;\n        display: inline;\n        margin: 0;\n        font-size: 12px;\n        line-height: 13px;\n        color: #000000;\n        font-family: ",";\n      }\n    }\n    .subHeadlineGiftingBFG {\n      margin: 0;\n      font-size: 12px;\n      line-height: 15px;\n      color: #000000;\n      font-family: ",";\n      font-weight: ",";\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .wrapHeadline {\n      @media (max-width: 690px) {\n        background-image: url(https://www.nytimes.com/vi-assets/static-assets/images/MessageComponentLibrary/GH_GamesGiftDock.gif);\n        width: 280px;\n        height: 108px;\n        background-repeat: no-repeat;\n        background-size: 42%;\n        background-position-x: 145px;\n        background-position-y: 25px;\n      }\n    }\n    .giftingButtonClass{\n      display: flex;\n      align-items: baseline;\n      gap: 5px;\n      border-radius: 3px;\n      font-family: ",";\n      font-weight: ",";\n      font-size: 12px;\n      text-decoration: none;\n      background-color: ",";\n      color: ",';\n      padding: 10px 20px;\n      @media (max-width: 768px) {\n        margin-top: 10px;\n      }\n    }\n  }\n  .Cooking {\n    display: flex;\n    background-color: #faecd5;\n    flex-direction: row;\n    justify-content: space-evenly;\n    align-items: center;\n    height: 140px;\n    width: 100%;\n    .logoClass {\n      width: 178px;\n      @media (max-width: 1024px) {\n        width: 88px;\n        content:url("https://www.nytimes.com/vi-assets/static-assets/images/MessageComponentLibrary/GH_CookingLogoM.svg");\n      }\n    }\n    .wrapRedBoxClass {\n      width: 137px;\n      img {\n        width: 100%;\n      }\n      @media (max-width: 1024px) {\n        width: 110px;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .subHeadlineGiftingBF {\n      margin: 0;\n      font-size: 17px;\n      line-height: 19px;\n      color: #000000;\n      font-family: ',";\n      font-weight: ",";\n      padding-bottom: 9px;\n      @media (max-width: 1024px) {\n        font-size: 15px;\n        line-height: 120%;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .headlineGiftingBF {\n      margin: 0;\n      font-size: 17px;\n      font-family: ",";\n      font-weight: ",";\n      color: #000000;\n      @media (max-width: 1024px) {\n        padding-bottom: 0px;\n        font-size: 15px;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .headlineGiftingBFM {\n      display: none;\n      @media (max-width: 690px) {\n        display: inline;\n        margin: 0;\n        font-size: 17px;\n        line-height: 26px;\n        color: #000000;\n        font-family: ",";\n        font-weight: ",";\n      }\n    }\n    .subHeadlineGiftingBFGM {\n      display: none;\n      @media (max-width: 690px) {\n        white-space: pre-wrap;\n        display: inline;\n        margin: 0;\n        font-size: 12px;\n        line-height: 13px;\n        color: #000000;\n        font-family: ",";\n      }\n    }\n    .subHeadlineGiftingBFG {\n      margin: 0;\n      font-size: 12px;\n      line-height: 15px;\n      color: #000000;\n      font-family: ",";\n      font-weight: ",";\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .wrapHeadline {\n      @media (max-width: 690px) {\n        background-image: url(https://www.nytimes.com/vi-assets/static-assets/images/MessageComponentLibrary/GH_CookingGiftDock.gif);\n        width: 280px;\n        height: 108px;\n        background-repeat: no-repeat;\n        background-size: 40%;\n        background-position-x: 150px;\n        background-position-y: 25px;\n      }\n    }\n    .giftingButtonClass{\n      display: flex;\n      align-items: baseline;\n      gap: 5px;\n      border-radius: 3px;\n      font-family: ",";\n      font-weight: ",";\n      font-size: 12px;\n      text-decoration: none;\n      background-color: ",";\n      color: ",";\n      padding: 10px 20px;\n      @media (max-width: 768px) {\n        margin-top: 10px;\n      }\n    }\n  }\n  .The_Athletic {\n    display: flex;\n    background-color: #faecd5;\n    flex-direction: row;\n    justify-content: space-evenly;\n    align-items: center;\n    height: 140px;\n    width: 100%;\n    .logoClass {\n      width: 133px;\n      @media (max-width: 1024px) {\n        width: 104px;\n      }\n    }\n    .wrapRedBoxClass {\n      width: 130px;\n\n      img {\n        width: 100%;\n      }\n      @media (max-width: 1024px) {\n        width: 112px;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .subHeadlineGiftingBF {\n      margin: 0;\n      font-size: 17px;\n      line-height: 19px;\n      color: #000000;\n      font-family: ",";\n      font-weight: ",";\n      padding-bottom: 9px;\n      @media (max-width: 1024px) {\n        font-size: 15px;\n        line-height: 120%;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .headlineGiftingBF {\n      margin: 0;\n      font-size: 17px;\n      font-family: ",";\n      font-weight: ",";\n      color: #000000;\n      @media (max-width: 1024px) {\n        padding-bottom: 0px;\n        font-size: 15px;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .headlineGiftingBFM {\n      display: none;\n      @media (max-width: 690px) {\n        color: #000000;\n        display: inline;\n        margin: 0;\n        font-size: 17px;\n        line-height: 26px;\n        font-family: ",";\n        font-weight: ",";\n      }\n    }\n    .subHeadlineGiftingBFGM {\n      display: none;\n      @media (max-width: 690px) {\n        display: inline;\n        margin: 0;\n        font-size: 12px;\n        line-height: 15px;\n        color: #000000;\n        font-family: ",";\n      }\n    }\n    .subHeadlineGiftingBFG {\n      margin: 0;\n      font-size: 12px;\n      line-height: 15px;\n      color: #000000;\n      font-family: ",";\n      font-weight: ",";\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .wrapHeadline {\n      @media (max-width: 690px) {\n        background-image: url(https://www.nytimes.com/vi-assets/static-assets/images/MessageComponentLibrary/GH-TheAthleticGiftDock.png);\n        width: 280px;\n        height: 108px;\n        background-repeat: no-repeat;\n        background-size: 38%;\n        background-position-x: 155px;\n        background-position-y: 35px;\n      }\n    }\n    .giftingButtonClass{\n      display: flex;\n      align-items: baseline;\n      gap: 5px;\n      border-radius: 3px;\n      font-family: ",";\n      font-weight: ",";\n      font-size: 12px;\n      text-decoration: none;\n      background-color: ",";\n      color: ",";\n      padding: 10px 20px;\n      @media (max-width: 768px) {\n        margin-top: 10px;\n      }\n    }\n  }\n  .AllAccess {\n    display: flex;\n    background-color: #faecd5;\n    flex-direction: row;\n    justify-content: space-evenly;\n    align-items: center;\n    height: 140px;\n    width: 100%;\n    .giftingButtonClass{\n      display: flex;\n      align-items: baseline;\n      gap: 5px;\n      border-radius: 3px;\n      font-family: ",";\n      font-weight: ",";\n      font-size: 12px;\n      text-decoration: none;\n      background-color: ",";\n      color: ",";\n      padding: 10px 20px;\n      @media (max-width: 768px) {\n        margin-top: 10px;\n      }\n    }\n    .logoClass {\n      width: 128px;\n      @media (max-width: 1024px) {\n        width: 114px;\n      }\n    }\n    .wrapRedBoxClass {\n      width: 137px;\n      img {\n        width: 100%;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .subHeadlineGiftingBF {\n      margin: 0;\n      font-size: 17px;\n      line-height: 19px;\n      color: #000000;\n      font-family: ",";\n      font-weight: ",";\n      padding-bottom: 9px;\n      @media (max-width: 768px) {\n        font-size: 15px;\n        line-height: 120%;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .headlineGiftingBF {\n      margin: 0;\n      font-size: 17px;\n      font-family: ",";\n      font-weight: ",";\n      color: #000000;\n      @media (max-width: 1024px) {\n        padding-bottom: 0px;\n        font-size: 15px;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .headlineGiftingBFM {\n      display: none;\n      @media (max-width: 690px) {\n        color: #000000;\n        display: inline;\n        margin: 0;\n        font-size: 17px;\n        line-height: 26px;\n        font-family: ",";\n        font-weight: ",";\n      }\n    }\n    .subHeadlineGiftingBFGM {\n      display: none;\n      @media (max-width: 690px) {\n        display: inline;\n        margin: 0;\n        font-size: 12px;\n        line-height: 15px;\n        color: #000000;\n        font-family: ",";\n      }\n    }\n    .subHeadlineGiftingBFG {\n      margin: 0;\n      font-size: 12px;\n      line-height: 15px;\n      color: #000000;\n      font-family: ",";\n      font-weight: ",";\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .wrapHeadline {\n      @media (max-width: 690px) {\n        background-image: url(https://www.nytimes.com/vi-assets/static-assets/images/MessageComponentLibrary/GH_AAGiftDock.gif);\n        width: 280px;\n        height: 108px;\n        background-repeat: no-repeat;\n        background-size: 47%;\n        background-position-x: 136px;\n        background-position-y: 25px;\n      }\n    }\n\n"],["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  border-radius: 6px;\n  padding: 0 ","px;\n  height: 140px;\n  margin: 0 ","px ","px;\n  width: calc(100% - (","px + ","px));\n  flex-direction: row;\n  justify-content: space-evenly;\n  @media (max-width: 768px) {\n    width: calc(100% - 40px);\n  }\n  .Wirecutter {\n    display: flex;\n    background-color: #56cb82;\n    flex-direction: row;\n    justify-content: space-evenly;\n    align-items: center;\n    height: 140px;\n    width: 100%;\n    @media (max-width: 480px) {\n      height: 146px;\n    }\n    .logoClass {\n      width: 276px;\n      @media (max-width: 768px) {\n        width: 218px;\n      }\n    }\n    .wrapRedBoxClass {\n      display: none;\n    }\n    .subHeadlineGiftingBF {\n      margin: 0;\n      font-size: 19px;\n      line-height: 21px;\n      color: #000000;\n      font-family: ",";\n      font-weight: ",";\n      letter-spacing: -0.2px;\n      @media (max-width: 768px) {\n        font-size: 17px;\n        line-height: 120%;\n      }\n    }\n    .subHeadlineGiftingBFG {\n      margin: 0;\n      font-size: 19px;\n      line-height: 21px;\n      color: #000000;\n      font-family: ",";\n      font-weight: ",";\n      letter-spacing: -0.2px;\n      @media (max-width: 768px) {\n        font-size: 17px;\n        line-height: 120%;\n      }\n    }\n    .headlineGiftingBF {\n      margin: 0;\n      font-size: 19px;\n      font-family: ",";\n      font-weight: 800;\n      color: #000;\n      padding-bottom: 9px;\n      color: #000000;\n      @media (max-width: 768px) {\n        padding-bottom: 6px;\n        font-size: 17px;\n      }\n    }\n    .wrapRedBoxClassMobile {\n      display: none;\n    }\n    .headlineGiftingBFM {\n      display: none;\n    }\n    .subHeadlineGiftingBFGM {\n      display: none;\n    }\n    .giftingButtonClass{\n      display: flex;\n      align-items: baseline;\n      gap: 5px;\n      letter-spacing: -0.05px;\n      border-radius: 3px;\n      font-family: ",";\n      font-weight: ",";\n      font-size: 12px;\n      text-decoration: none;\n      background-color: ",";\n      color: ",';\n      padding: 10px 20px;\n      @media (max-width: 768px) {\n        margin-top: 10px;\n      }\n    }\n\n  }\n  .Games {\n    display: flex;\n    background-color: #faecd5;\n    flex-direction: row;\n    justify-content: space-evenly;\n    align-items: center;\n    height: 140px;\n    width: 100%;\n    .logoClass {\n      width: 178px;\n      @media (max-width: 1024px) {\n        width: 88px;\n        content:url("https://www.nytimes.com/vi-assets/static-assets/images/MessageComponentLibrary/GH_GamesLogoM.svg");\n      }\n    }\n    .wrapRedBoxClass {\n      width: 137px;\n      img {\n        width: 100%;\n      }\n      @media (max-width: 1024px) {\n        width: 120px;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .subHeadlineGiftingBF {\n      margin: 0;\n      font-size: 17px;\n      line-height: 19px;\n      color: #000000;\n      font-family: ',";\n      font-weight: ",";\n      padding-bottom: 9px;\n      @media (max-width: 768px) {\n        font-size: 15px;\n        line-height: 120%;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .headlineGiftingBF {\n      margin: 0;\n      font-size: 17px;\n      color: #000000;\n      font-family: ",";\n      font-weight: ",";\n      @media (max-width: 1024px) {\n        padding-bottom: 0px;\n        font-size: 15px;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .headlineGiftingBFM {\n      display: none;\n      @media (max-width: 690px) {\n        color: #000000;\n        display: inline;\n        margin: 0;\n        font-size: 17px;\n        line-height: 26px;\n        font-family: ",";\n        font-weight: ",";\n      }\n    }\n    .subHeadlineGiftingBFGM {\n      display: none;\n      @media (max-width: 690px) {\n        white-space: pre-wrap;\n        display: inline;\n        margin: 0;\n        font-size: 12px;\n        line-height: 13px;\n        color: #000000;\n        font-family: ",";\n      }\n    }\n    .subHeadlineGiftingBFG {\n      margin: 0;\n      font-size: 12px;\n      line-height: 15px;\n      color: #000000;\n      font-family: ",";\n      font-weight: ",";\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .wrapHeadline {\n      @media (max-width: 690px) {\n        background-image: url(https://www.nytimes.com/vi-assets/static-assets/images/MessageComponentLibrary/GH_GamesGiftDock.gif);\n        width: 280px;\n        height: 108px;\n        background-repeat: no-repeat;\n        background-size: 42%;\n        background-position-x: 145px;\n        background-position-y: 25px;\n      }\n    }\n    .giftingButtonClass{\n      display: flex;\n      align-items: baseline;\n      gap: 5px;\n      border-radius: 3px;\n      font-family: ",";\n      font-weight: ",";\n      font-size: 12px;\n      text-decoration: none;\n      background-color: ",";\n      color: ",';\n      padding: 10px 20px;\n      @media (max-width: 768px) {\n        margin-top: 10px;\n      }\n    }\n  }\n  .Cooking {\n    display: flex;\n    background-color: #faecd5;\n    flex-direction: row;\n    justify-content: space-evenly;\n    align-items: center;\n    height: 140px;\n    width: 100%;\n    .logoClass {\n      width: 178px;\n      @media (max-width: 1024px) {\n        width: 88px;\n        content:url("https://www.nytimes.com/vi-assets/static-assets/images/MessageComponentLibrary/GH_CookingLogoM.svg");\n      }\n    }\n    .wrapRedBoxClass {\n      width: 137px;\n      img {\n        width: 100%;\n      }\n      @media (max-width: 1024px) {\n        width: 110px;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .subHeadlineGiftingBF {\n      margin: 0;\n      font-size: 17px;\n      line-height: 19px;\n      color: #000000;\n      font-family: ',";\n      font-weight: ",";\n      padding-bottom: 9px;\n      @media (max-width: 1024px) {\n        font-size: 15px;\n        line-height: 120%;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .headlineGiftingBF {\n      margin: 0;\n      font-size: 17px;\n      font-family: ",";\n      font-weight: ",";\n      color: #000000;\n      @media (max-width: 1024px) {\n        padding-bottom: 0px;\n        font-size: 15px;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .headlineGiftingBFM {\n      display: none;\n      @media (max-width: 690px) {\n        display: inline;\n        margin: 0;\n        font-size: 17px;\n        line-height: 26px;\n        color: #000000;\n        font-family: ",";\n        font-weight: ",";\n      }\n    }\n    .subHeadlineGiftingBFGM {\n      display: none;\n      @media (max-width: 690px) {\n        white-space: pre-wrap;\n        display: inline;\n        margin: 0;\n        font-size: 12px;\n        line-height: 13px;\n        color: #000000;\n        font-family: ",";\n      }\n    }\n    .subHeadlineGiftingBFG {\n      margin: 0;\n      font-size: 12px;\n      line-height: 15px;\n      color: #000000;\n      font-family: ",";\n      font-weight: ",";\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .wrapHeadline {\n      @media (max-width: 690px) {\n        background-image: url(https://www.nytimes.com/vi-assets/static-assets/images/MessageComponentLibrary/GH_CookingGiftDock.gif);\n        width: 280px;\n        height: 108px;\n        background-repeat: no-repeat;\n        background-size: 40%;\n        background-position-x: 150px;\n        background-position-y: 25px;\n      }\n    }\n    .giftingButtonClass{\n      display: flex;\n      align-items: baseline;\n      gap: 5px;\n      border-radius: 3px;\n      font-family: ",";\n      font-weight: ",";\n      font-size: 12px;\n      text-decoration: none;\n      background-color: ",";\n      color: ",";\n      padding: 10px 20px;\n      @media (max-width: 768px) {\n        margin-top: 10px;\n      }\n    }\n  }\n  .The_Athletic {\n    display: flex;\n    background-color: #faecd5;\n    flex-direction: row;\n    justify-content: space-evenly;\n    align-items: center;\n    height: 140px;\n    width: 100%;\n    .logoClass {\n      width: 133px;\n      @media (max-width: 1024px) {\n        width: 104px;\n      }\n    }\n    .wrapRedBoxClass {\n      width: 130px;\n\n      img {\n        width: 100%;\n      }\n      @media (max-width: 1024px) {\n        width: 112px;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .subHeadlineGiftingBF {\n      margin: 0;\n      font-size: 17px;\n      line-height: 19px;\n      color: #000000;\n      font-family: ",";\n      font-weight: ",";\n      padding-bottom: 9px;\n      @media (max-width: 1024px) {\n        font-size: 15px;\n        line-height: 120%;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .headlineGiftingBF {\n      margin: 0;\n      font-size: 17px;\n      font-family: ",";\n      font-weight: ",";\n      color: #000000;\n      @media (max-width: 1024px) {\n        padding-bottom: 0px;\n        font-size: 15px;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .headlineGiftingBFM {\n      display: none;\n      @media (max-width: 690px) {\n        color: #000000;\n        display: inline;\n        margin: 0;\n        font-size: 17px;\n        line-height: 26px;\n        font-family: ",";\n        font-weight: ",";\n      }\n    }\n    .subHeadlineGiftingBFGM {\n      display: none;\n      @media (max-width: 690px) {\n        display: inline;\n        margin: 0;\n        font-size: 12px;\n        line-height: 15px;\n        color: #000000;\n        font-family: ",";\n      }\n    }\n    .subHeadlineGiftingBFG {\n      margin: 0;\n      font-size: 12px;\n      line-height: 15px;\n      color: #000000;\n      font-family: ",";\n      font-weight: ",";\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .wrapHeadline {\n      @media (max-width: 690px) {\n        background-image: url(https://www.nytimes.com/vi-assets/static-assets/images/MessageComponentLibrary/GH-TheAthleticGiftDock.png);\n        width: 280px;\n        height: 108px;\n        background-repeat: no-repeat;\n        background-size: 38%;\n        background-position-x: 155px;\n        background-position-y: 35px;\n      }\n    }\n    .giftingButtonClass{\n      display: flex;\n      align-items: baseline;\n      gap: 5px;\n      border-radius: 3px;\n      font-family: ",";\n      font-weight: ",";\n      font-size: 12px;\n      text-decoration: none;\n      background-color: ",";\n      color: ",";\n      padding: 10px 20px;\n      @media (max-width: 768px) {\n        margin-top: 10px;\n      }\n    }\n  }\n  .AllAccess {\n    display: flex;\n    background-color: #faecd5;\n    flex-direction: row;\n    justify-content: space-evenly;\n    align-items: center;\n    height: 140px;\n    width: 100%;\n    .giftingButtonClass{\n      display: flex;\n      align-items: baseline;\n      gap: 5px;\n      border-radius: 3px;\n      font-family: ",";\n      font-weight: ",";\n      font-size: 12px;\n      text-decoration: none;\n      background-color: ",";\n      color: ",";\n      padding: 10px 20px;\n      @media (max-width: 768px) {\n        margin-top: 10px;\n      }\n    }\n    .logoClass {\n      width: 128px;\n      @media (max-width: 1024px) {\n        width: 114px;\n      }\n    }\n    .wrapRedBoxClass {\n      width: 137px;\n      img {\n        width: 100%;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .subHeadlineGiftingBF {\n      margin: 0;\n      font-size: 17px;\n      line-height: 19px;\n      color: #000000;\n      font-family: ",";\n      font-weight: ",";\n      padding-bottom: 9px;\n      @media (max-width: 768px) {\n        font-size: 15px;\n        line-height: 120%;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .headlineGiftingBF {\n      margin: 0;\n      font-size: 17px;\n      font-family: ",";\n      font-weight: ",";\n      color: #000000;\n      @media (max-width: 1024px) {\n        padding-bottom: 0px;\n        font-size: 15px;\n      }\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .headlineGiftingBFM {\n      display: none;\n      @media (max-width: 690px) {\n        color: #000000;\n        display: inline;\n        margin: 0;\n        font-size: 17px;\n        line-height: 26px;\n        font-family: ",";\n        font-weight: ",";\n      }\n    }\n    .subHeadlineGiftingBFGM {\n      display: none;\n      @media (max-width: 690px) {\n        display: inline;\n        margin: 0;\n        font-size: 12px;\n        line-height: 15px;\n        color: #000000;\n        font-family: ",";\n      }\n    }\n    .subHeadlineGiftingBFG {\n      margin: 0;\n      font-size: 12px;\n      line-height: 15px;\n      color: #000000;\n      font-family: ",";\n      font-weight: ",";\n      @media (max-width: 690px) {\n        display: none;\n      }\n    }\n    .wrapHeadline {\n      @media (max-width: 690px) {\n        background-image: url(https://www.nytimes.com/vi-assets/static-assets/images/MessageComponentLibrary/GH_AAGiftDock.gif);\n        width: 280px;\n        height: 108px;\n        background-repeat: no-repeat;\n        background-size: 47%;\n        background-position-x: 136px;\n        background-position-y: 25px;\n      }\n    }\n\n"])),26,O,O,52,40,a.fonts.franklin,a.fontWeights.normal,a.fonts.franklin,a.fontWeights.normal,a.fonts.franklin,a.fonts.franklin,a.fontWeights.extraBold,a.colors.black,a.colors.white,a.fonts.cheltenham,a.fontWeights.normal,a.fonts.cheltenham,a.fontWeights.normal,a.fonts.cheltenham,a.fontWeights.normal,a.fonts.franklin,a.fonts.franklin,a.fontWeights.normal,a.fonts.franklin,a.fontWeights.semiBold,a.colors.black,a.colors.white,a.fonts.cheltenham,a.fontWeights.normal,a.fonts.cheltenham,a.fontWeights.normal,a.fonts.cheltenham,a.fontWeights.normal,a.fonts.franklin,a.fonts.franklin,a.fontWeights.normal,a.fonts.franklin,a.fontWeights.semiBold,a.colors.black,a.colors.white,a.fonts.cheltenham,a.fontWeights.normal,a.fonts.cheltenham,a.fontWeights.normal,a.fonts.cheltenham,a.fontWeights.normal,a.fonts.franklin,a.fonts.franklin,a.fontWeights.normal,a.fonts.franklin,a.fontWeights.semiBold,a.colors.black,a.colors.white,a.fonts.franklin,a.fontWeights.semiBold,a.colors.black,a.colors.white,a.fonts.cheltenham,a.fontWeights.normal,a.fonts.cheltenham,a.fontWeights.normal,a.fonts.cheltenham,a.fontWeights.normal,a.fonts.franklin,a.fonts.franklin,a.fontWeights.normal),t.mainContentW=(0,r.css)(c||(c=i(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background-color: #56cb82;\n  border-radius: 6px;\n  padding: 0 ","px;\n  height: 140px;\n  margin: 0 ","px ","px;\n  width: calc(100% - (","px + ","px));\n  flex-direction: row;\n  justify-content: space-evenly;\n  .logoClass {\n    width: 276px;\n    @media (max-width: 768px) {\n      width: 218px;\n    }\n  }\n  .wrapRedBoxClass {\n    display: none;\n  }\n  .subHeadlineGiftingBF {\n    margin: 0;\n    font-size: 19px;\n    line-height: 21px;\n    color: #000000;\n    font-family: ",";\n    font-weight: ",";\n    letter-spacing: -0.2px;\n    @media (max-width: 768px) {\n      font-size: 17px;\n      line-height: 120%;\n    }\n  }\n  .subHeadlineGiftingBFG {\n    margin: 0;\n    font-size: 19px;\n    line-height: 21px;\n    color: #000000;\n    font-family: ",";\n    font-weight: ",";\n    letter-spacing: -0.2px;\n    @media (max-width: 768px) {\n      font-size: 17px;\n      line-height: 120%;\n    }\n  }\n  .headlineGiftingBF {\n    margin: 0;\n    font-size: 19px;\n    font-family: ",";\n    padding-bottom: 9px;\n    color: #000000;\n    @media (max-width: 768px) {\n      padding-bottom: 6px;\n      font-size: 17px;\n    }\n  }\n  .wrapRedBoxClassMobile {\n    display: none;\n  }\n"],["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background-color: #56cb82;\n  border-radius: 6px;\n  padding: 0 ","px;\n  height: 140px;\n  margin: 0 ","px ","px;\n  width: calc(100% - (","px + ","px));\n  flex-direction: row;\n  justify-content: space-evenly;\n  .logoClass {\n    width: 276px;\n    @media (max-width: 768px) {\n      width: 218px;\n    }\n  }\n  .wrapRedBoxClass {\n    display: none;\n  }\n  .subHeadlineGiftingBF {\n    margin: 0;\n    font-size: 19px;\n    line-height: 21px;\n    color: #000000;\n    font-family: ",";\n    font-weight: ",";\n    letter-spacing: -0.2px;\n    @media (max-width: 768px) {\n      font-size: 17px;\n      line-height: 120%;\n    }\n  }\n  .subHeadlineGiftingBFG {\n    margin: 0;\n    font-size: 19px;\n    line-height: 21px;\n    color: #000000;\n    font-family: ",";\n    font-weight: ",";\n    letter-spacing: -0.2px;\n    @media (max-width: 768px) {\n      font-size: 17px;\n      line-height: 120%;\n    }\n  }\n  .headlineGiftingBF {\n    margin: 0;\n    font-size: 19px;\n    font-family: ",";\n    padding-bottom: 9px;\n    color: #000000;\n    @media (max-width: 768px) {\n      padding-bottom: 6px;\n      font-size: 17px;\n    }\n  }\n  .wrapRedBoxClassMobile {\n    display: none;\n  }\n"])),26,O,O,52,40,a.fonts.franklin,a.fontWeights.normal,a.fonts.franklin,a.fontWeights.normal,a.fonts.franklin),t.logosDockDesktop=(0,r.css)(u||(u=i(["\n  @media (max-width: 690px) {\n    display: none;\n  }\n"],["\n  @media (max-width: 690px) {\n    display: none;\n  }\n"]))),t.wrapRedBoxClass=(0,r.css)(d||(d=i(["\n  width: 150px;\n  @media (max-width: 1024px) {\n    width: 90px;\n  }\n  @media (max-width: 768px) {\n    width: 80px;\n  }\n  @media (max-width: 690px) {\n    display: none;\n  }\n"],["\n  width: 150px;\n  @media (max-width: 1024px) {\n    width: 90px;\n  }\n  @media (max-width: 768px) {\n    width: 80px;\n  }\n  @media (max-width: 690px) {\n    display: none;\n  }\n"]))),t.wrapRedBoxClassMobile=(0,r.css)(p||(p=i(["\n  display: none;\n  @media (max-width: 690px) {\n    display: inline-flex;\n    width: 100px;\n  }\n"],["\n  display: none;\n  @media (max-width: 690px) {\n    display: inline-flex;\n    width: 100px;\n  }\n"]))),t.contentDockDesktop=(0,r.css)(f||(f=i(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  align-items: stretch;\n  align-items: center;\n  justify-content: center;\n  @media (max-width: 480px) {\n    display: inline;\n    width: 85%;\n  }\n"],["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  align-items: stretch;\n  align-items: center;\n  justify-content: center;\n  @media (max-width: 480px) {\n    display: inline;\n    width: 85%;\n  }\n"]))),t.headlineGiftingBF=(0,r.css)(m||(m=i(["\n  margin: 0;\n  font-size: 20px;\n  font-family: ",";\n  font-weight: ",";\n  padding-bottom: 9px;\n  color: #000000;\n  @media (max-width: 768px) {\n    padding-bottom: 6px;\n    font-size: 17px;\n  }\n"],["\n  margin: 0;\n  font-size: 20px;\n  font-family: ",";\n  font-weight: ",";\n  padding-bottom: 9px;\n  color: #000000;\n  @media (max-width: 768px) {\n    padding-bottom: 6px;\n    font-size: 17px;\n  }\n"])),a.fonts.cheltenham,a.fontWeights.normal),t.subHeadlineGiftingBF=(0,r.css)(h||(h=i(["\n  margin: 0;\n  font-size: 14px;\n  color: #f35850;\n  font-family: ",";\n  font-weight: ",";\n  color: #000000;\n  @media (max-width: 768px) {\n    font-size: 13.5px;\n    line-height: 120%;\n  }\n"],["\n  margin: 0;\n  font-size: 14px;\n  color: #f35850;\n  font-family: ",";\n  font-weight: ",";\n  color: #000000;\n  @media (max-width: 768px) {\n    font-size: 13.5px;\n    line-height: 120%;\n  }\n"])),a.fonts.franklin,a.fontWeights.normal),t.giftingDockShowDesktop=(0,r.css)(g||(g=i(["\n  display: inline;\n  @media (max-width: 690px) {\n    display: none !important;\n  }\n"],["\n  display: inline;\n  @media (max-width: 690px) {\n    display: none !important;\n  }\n"]))),t.giftingDockShowMobile=(0,r.css)(y||(y=i(["\n  display: none !important;\n  @media (max-width: 690px) {\n    display: flex !important;\n  }\n"],["\n  display: none !important;\n  @media (max-width: 690px) {\n    display: flex !important;\n  }\n"]))),t.giftingDockShowDesktop768=(0,r.css)(v||(v=i(["\n  display: inline;\n  @media (max-width: 768px) {\n    display: none !important;\n  }\n"],["\n  display: inline;\n  @media (max-width: 768px) {\n    display: none !important;\n  }\n"]))),t.giftingDockShowMobile768=(0,r.css)(b||(b=i(["\n  display: none !important;\n  @media (max-width: 768px) {\n    display: block;\n  }\n"],["\n  display: none !important;\n  @media (max-width: 768px) {\n    display: block;\n  }\n"]))),t.logoClass=(0,r.css)(_||(_=i(["\n  margin-top: 12px;\n  width: 142px;\n  svg {\n    height: 100%;\n    max-width: 100%;\n  }\n  @media (max-width: 768px) {\n    width: 120px;\n  }\n"],["\n  margin-top: 12px;\n  width: 142px;\n  svg {\n    height: 100%;\n    max-width: 100%;\n  }\n  @media (max-width: 768px) {\n    width: 120px;\n  }\n"]))),t.wrapHeadline=(0,r.css)(w||(w=i(["\n  strong {\n    font-weight: "," !important;\n  }\n"],["\n  strong {\n    font-weight: "," !important;\n  }\n"])),a.fontWeights.bold),t.giftingButtonClass=(0,r.css)(x||(x=i(["\n  display: flex;\n  align-items: baseline;\n  gap: 5px;\n  border-radius: 3px;\n  font-family: ",";\n  font-weight: ",";\n  font-size: 12px;\n  text-decoration: none;\n  background-color: ",";\n  color: ",";\n  padding: 10px 20px;\n  @media (max-width: 768px) {\n    margin-top: 10px;\n  }\n"],["\n  display: flex;\n  align-items: baseline;\n  gap: 5px;\n  border-radius: 3px;\n  font-family: ",";\n  font-weight: ",";\n  font-size: 12px;\n  text-decoration: none;\n  background-color: ",";\n  color: ",";\n  padding: 10px 20px;\n  @media (max-width: 768px) {\n    margin-top: 10px;\n  }\n"])),a.fonts.franklin,a.fontWeights.semiBold,a.colors.black,a.colors.white),t.GMQ4HOLIDAYGIFTINGDOCKS2312Wirecutter=(0,r.css)(k||(k=i(["\n  background-color: #edeae8;\n"],["\n  background-color: #edeae8;\n"])))},IINN:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var i=n("gcR/"),r=n.n(i),a=n("q1tI"),o=Object(a.createContext)(void 0);function s(e){var t=e.timesTags,n=e.children;return r()(o.Provider,{value:t},void 0,n)}s.displayName="TimesTagsProvider";var l=function(){return Object(a.useContext)(o)}},IUHo:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lSNA")),a=i(n("lwsE")),o=i(n("W8MJ")),s=i(n("dc0q")),l=i(n("iO9H"));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(this,e),this.data=t}return(0,o.default)(e,[{key:"slides",get:function(){var e,t,n=[];return(null===(e=this.data)||void 0===e||null===(t=e.media)||void 0===t?void 0:t.slides).forEach((function(e){var t,i=null==e||null===(t=e.caption)||void 0===t?void 0:t.text,r=null==e?void 0:e.image;if(r&&("image"===r.type||"Image"===r.__typename||Array.isArray(null==r?void 0:r.crops))){var a=new s.default(u(u({},r),{},{caption:i}));n.push(a.getStructuredData())}})),n}},{key:"getStructuredData",value:function(){var e,t=null===(e=this.data)||void 0===e?void 0:e.media,n=t.summary,i=t.url,r=t.headline;return new l.default({headline:(null==r?void 0:r.seo)||(null==r?void 0:r.default),alternativeHeadline:null!=r&&r.seo?r.default:void 0,url:i,description:n,associatedMedia:this.slides})}}]),e}();t.default=d},IX5K:function(e,t,n){"use strict";var i,r=n("VkAN"),a=n.n(r),o=n("gcR/"),s=n.n(o),l=(n("q1tI"),n("eFc+")),c=n.n(l),u=n("AfrD"),d=n.n(u),p=n("Pmun"),f=n.n(p),m=n("rNEd"),h=function(e){var t=e.data,n=e.className;return s()(f.a,{className:n},void 0,t.content.map((function(e,t){return s()(m.a,{data:e},t.toString())})))};h.displayName="ListItemBlock",h.defaultProps={className:void 0},h.fragments={data:c()(i||(i=a()(["\n    fragment ListItemBlock_data on ListItemBlock {\n      content {\n        __typename\n        ...ParagraphBlock_data\n      }\n    }\n    ","\n  "])),m.a.fragments.data)};var g,y=h,v=function(e){var t=e.data,n=e.className;return s()(d.a,{className:n},void 0,t.content.map((function(e,t){return s()(y,{data:e},t.toString())})))};v.displayName="ListBlock",v.defaultProps={className:void 0},v.fragments={data:c()(g||(g=a()(["\n    fragment ListBlock_data on ListBlock {\n      style\n      content {\n        __typename\n        ...ListItemBlock_data\n      }\n    }\n    ","\n  "])),y.fragments.data)};t.a=v},IkF8:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("Jqp9"),a=n("3sMT"),o=i(n("WThh")),s=i(n("wXC7")),l=n("6l8D"),c=i(n("qp0C")),u=(0,o.default)(["medium"]),d=(0,r.css)("color:",a.color.content.secondary,";font-weight:",s.default.font.weight.mediumBold,";font-size:",s.default.font.size(13.5),";line-height:",s.default.font.size(23),";letter-spacing:0.05em;"),p=(0,r.themeFn)("treatment",{none:function(e){return(0,r.css)("color:",a.color.content.secondary,";font-family:",s.default.font.franklinBase,";font-weight:",s.default.font.weight.medium,";letter-spacing:0.05em;",u(e,{fontSize:[13,14],lineHeight:[18,20]}),";")},magazine:function(e){return(0,r.css)("color:",a.color.content.primary,";font-family:",s.default.font.magazineSansBase,";font-weight:",s.default.font.weight.bold,";letter-spacing:0.05em;",u(e,{fontSize:[12,14],lineHeight:[20,20]}),";")},sponsored:(0,r.css)(d,";font-family:",s.default.font.sponsoredBase,";"),sponsoredSensitive:(0,r.css)(d,";font-family:",s.default.font.sponsoredSensitive,";"),"t-magazine":(0,r.css)("color:",a.color.content.secondary,";font-family:",s.default.font.tmagSansBase,";font-weight:",s.default.font.weight.book,";font-size:",s.default.font.size(14),";line-height:",s.default.font.size(20),";letter-spacing:0.02em;"),atHome:(0,r.css)("font-style:normal;font-weight:bold;font-size:21px;line-height:34px;font-family:",c.default.franklin,";")}),f=(0,r.themeFn)("languageDirection",{rightToLeft:(0,r.css)("text-align:right;direction:rtl;unicode-bidi:isolate;")}),m=(0,r.styled)("p",{target:"e6idgb70"})("text-transform:uppercase;",p,";.",l.linkClass,"{color:",a.color.content.primary,";border-bottom:2px solid ",a.color.stroke.quaternary,";text-decoration:none;&:hover,&:focus{color:",a.color.content.primary,";border-bottom:2px solid ",a.color.stroke.primary,";}&:visited{color:",a.color.content.primary,";}}",f,";");t.default=m},IkM5:function(e){e.exports=JSON.parse('{"generic":{"title":"To our readers:","body":"Stories like this are possible because of our deep commitment to original reporting, produced by a global staff of over 1,700 journalists who have all dedicated themselves to helping you understand the world. That work is only possible because of the support of our subscribers.","cta":"We hope youll consider becoming one today.","signer":""},"specific":{"title":"To our readers:","body":"Stories like this are possible because of our deep commitment to original reporting, produced by a global staff of over 1,700 journalists who have all dedicated themselves to helping you understand the world. That work is only possible because of the support of our subscribers.","cta":"I hope youll consider becoming one today.","signer":"Marc Lacey, Managing Editor"},"specific-international":{"title":"To our readers:","body":"This story and others like it in our International report are underpinned by a vast network of support invisible to most readers but possible only because they share our commitment to bearing witness and holding the powerful to account. The New York Times has correspondents and editors scattered across the globe, as well as photographers, interpreters, local guides and security consultants. All of them know that we will spend what it takes to get the story, and to keep them safe. The financial burden is big  sometimes extraordinary. And so I cannot tell you how grateful we are that so many of our readers have shown time and again that they want to do their part. Each day, more people are becoming subscribers to The Times. If you are not one of them,","cta":"I hope you will consider changing that right now.","signer":"Michael Slackman, Assistant Managing Editor, International"},"specific-well":{"title":"To our readers:","body":"Was this article of service to you? The journalists on the Well desk of The Times hope so. They are devoted to providing trusted guidance to help people live better, more considered lives. They use their expertise to cut through noise and misinformation to deliver journalism designed to improve your physical and mental health, parenting, nutrition and relationships. That work is only possible because of the support of our subscribers.","cta":"I hope youll consider becoming one today.","signer":"Sam Sifton, Assistant Managing Editor, Culture and Lifestyle"}}')},IuhB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("iolA");t.default=(0,i.withErrorBoundary)((function(){return null}))},Ivf9:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(n("17x9"),function(e){var t=e.item,n=t.content,i=t.contentLink,a=e.boldLocation;return r.default.createElement("li",{style:{fontWeight:a[i]?"700":"400"}},r.default.createElement("a",{href:"#".concat(i)},n[0]))});a.displayName="GuideNavItem";var o=a;t.default=o},J2sf:function(e,t,n){"use strict";n.d(t,"j",(function(){return l})),n.d(t,"k",(function(){return c})),n.d(t,"l",(function(){return u})),n.d(t,"m",(function(){return d})),n.d(t,"n",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return m})),n.d(t,"i",(function(){return h})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return v})),n.d(t,"e",(function(){return b})),n.d(t,"p",(function(){return _})),n.d(t,"q",(function(){return w})),n.d(t,"o",(function(){return x})),n.d(t,"d",(function(){return k})),n.d(t,"h",(function(){return O}));var i=n("Jqp9"),r=n("wXC7"),a=n.n(r),o=n("1q7V"),s="@media (max-width: ".concat(a.a.breakpoint.maxMobileContentWidth,"px)"),l=Object(i.css)("&",o.d,"{font-family:",a.a.font.franklinBase,";font-style:normal;font-weight:",a.a.font.weight.medium,";font-size:",a.a.font.size(16),";line-height:",a.a.font.size(16),";color:",a.a.color.black,";padding:21px 20px 15px 22px;text-align:left;",a.a.breakpoint.large,"{position:static;top:auto;left:auto;overflow-y:hidden;font-size:",a.a.font.size(14),";line-height:",a.a.font.size(14),";padding:14px;}}"),c=Object(i.css)("&",o.d,"{padding:21px 20px 0 22px;",a.a.breakpoint.large,"{padding:14px 14px 0 14px;}}"),u=Object(i.css)(o.d," &{font-size:",a.a.font.size(12),";margin-bottom:4px;}"),d=Object(i.css)(o.d," &{font-weight:",a.a.font.weight.bold,";font-size:",a.a.font.size(18),";margin-bottom:13px;",a.a.breakpoint.large,"{font-size:",a.a.font.size(14),";line-height:",a.a.font.size(16),";margin-bottom:8px;}}"),p=Object(i.css)(o.d," &{direction:ltr;display:block;width:100%;}"),f=Object(i.css)(o.d," &{padding:11px 0;border-bottom:1px ",a.a.color.gray60," solid;text-align:left;a,button{display:flex;align-items:center;text-decoration:none;}&:last-of-type{border:none;}",a.a.breakpoint.large,"{padding:6px 0;}}"),m=Object(i.css)(o.d," &{",a.a.breakpoint.large,"{padding:12px 0;}}"),h=Object(i.css)(o.d," &{max-width:calc(100% - 48px);background:transparent;display:flex;white-space:nowrap;font-family:",a.a.font.franklinBase,";color:",a.a.color.black,";",a.a.breakpoint.large,"{display:flex;align-items:center;justify-content:flex-start;}}"),g=Object(i.css)(o.d," &{color:#417d40;font-weight:bold;max-width:100%;&::after{content:' ';width:15px;height:14px;margin-left:0.2rem;display:inline-block;background-image:url(","/vi-assets/static-assets/icon-round-check-3956dbc1462b6016408ccc84ed47834f.svg",");background-repeat:no-repeat;position:relative;top:-2px;}}"),y=Object(i.css)(o.d," &{background-color:",a.a.color.white,";border:1px ",a.a.color.gray55," solid;border-radius:100%;padding:4px;margin-right:16px;}"),v=Object(i.styled)("i",{target:"e18rsdfd0"})(y,";width:25px;height:25px;box-sizing:border-box;display:inline-block;vertical-align:middle;background-position:center;background-repeat:no-repeat;background-size:15px;padding:0;",(function(e){return e.linkedin&&"background-image: url(".concat("/vi-assets/static-assets/icon-share-linkedin-circle-715d54e585670aa92bdf4f9cf80391c1.svg",");\n      background-size: 13px;")}),";",(function(e){return e.whatsapp&&"background-image: url(".concat("/vi-assets/static-assets/icon-whatsapp-17x17-000-eb3ac0d36c11bd5a497046cb82515de2.svg",")")}),";",(function(e){return e.reddit&&"background-image: url(".concat("/vi-assets/static-assets/icon-share-reddit-6c91e2e5d338258b7625396240941c86.svg",");\n     background-size: 19px;")}),";",(function(e){return e.telegram&&"background-image: url(".concat("/vi-assets/static-assets/icon-share-telegram-17x17-000-9afdb6f69206e132723eda5087310d35.svg",");\n       background-size: 19px;")}),";"),b=Object(i.css)(o.d," &{display:inline-block;height:15px;vertical-align:middle;width:15px;}"),_=Object(i.css)(o.d," &{max-width:calc(100% - 48px);background:transparent;display:inline;color:",a.a.color.white,";margin-top:5px;a{color:",a.a.color.white,";}p{font-family:",a.a.font.franklinBase,";font-size:",a.a.font.size(11),";line-height:",a.a.font.size(14),";&:first-of-type{font-size:",a.a.font.size(14),";line-height:",a.a.font.size(16),";font-weight:",a.a.font.weight.bold,";margin-bottom:4px;}strong{font-weight:",a.a.font.weight.bold,";}}@media (min-width:",a.a.breakpoint.maxMobileContentWidth,"px) and (max-width:",a.a.breakpoint.width.mediumLarge-1,"px){p{margin-bottom:1rem;}}}"),w=Object(i.css)(o.d," &{background-color:",a.a.color.white,";border:1px ",a.a.color.white," solid;margin-right:16px;border-radius:100%;width:23px;height:23px;display:flex;align-items:center;justify-content:center;svg{path{fill:",a.a.color.gray10,";}}}"),x=Object(i.css)(o.d," &{color:",a.a.color.white,";background:",a.a.color.gray10,";margin:0 -14px;padding:10px 15px;border-radius:0 0 4px 4px;",s,"{margin:0 -22px;border-radius:0;}button{align-items:flex-start;display:flex;background:transparent;text-align:left;width:100%;",a.a.breakpoint.large,"{padding:0 16px;}",s,"{padding:0 7px;}}}"),k=Object(i.css)(o.d," &{p{&:first-of-type{font-weight:",a.a.font.weight.medium,";font-size:",a.a.font.size(16),";",a.a.breakpoint.large,"{font-size:",a.a.font.size(14),";margin-bottom:6px;}}}}"),O=Object(i.css)(o.d," &{background:transparent;width:100%;}")},J3mF:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.ctaActionTextClass=t.ctaContainer=t.ctaIconWrapper=t.headingMessageClass=t.headingInfoContainer=t.headingClass=t.textFadingInClass=t.textFadingOutClass=t.boldText=t.mainText=t.headerContainer=void 0;var r,a,o,s,l,c,u,d,p,f,m,h=n("Jqp9"),g=n("lVLo"),y=n("b2Qg");t.headerContainer=(0,h.css)(r||(r=i(["\n  cursor: pointer;\n"],["\n  cursor: pointer;\n"]))),t.mainText=(0,h.css)(a||(a=i(["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  line-height: 17px;\n  padding-left: 20px;\n\n  @media (min-width: ","px) {\n    padding-left: unset;\n  }\n"],["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  line-height: 17px;\n  padding-left: 20px;\n\n  @media (min-width: ","px) {\n    padding-left: unset;\n  }\n"])),g.fonts.franklin,g.fontWeights.medium,g.widths.mediumLarge),t.boldText=(0,h.css)(o||(o=i(["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  line-height: 17px;\n"],["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  line-height: 17px;\n"])),g.fonts.franklin,g.fontWeights.bold),t.textFadingOutClass=(0,h.css)(s||(s=i(["\n  animation: "," 400ms;\n"],["\n  animation: "," 400ms;\n"])),(0,y.fadeTextOut)()),t.textFadingInClass=(0,h.css)(l||(l=i(["\n  animation: "," 400ms;\n"],["\n  animation: "," 400ms;\n"])),(0,y.fadeTextIn)()),t.headingClass=(0,h.css)(c||(c=i(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 100%;\n  max-width: 1200px;\n  margin: auto;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n  outline: ",";\n\n  strong {\n    font-weight: ",";\n  }\n\n  @media (min-width: ","px) {\n    display: unset;\n    align-items: unset;\n    justify-content: unset;\n  }\n"],["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 100%;\n  max-width: 1200px;\n  margin: auto;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n  outline: ",";\n\n  strong {\n    font-weight: ",";\n  }\n\n  @media (min-width: ","px) {\n    display: unset;\n    align-items: unset;\n    justify-content: unset;\n  }\n"])),g.colors.blue,g.fontWeights.bold,g.widths.mediumLarge),t.headingInfoContainer=(0,h.css)(u||(u=i(["\n  width: 100%;\n  font-family: ",";\n  text-align: left;\n\n  span {\n    display: inline;\n  }\n\n  @media (min-width: ","px) {\n    padding-left: unset;\n  }\n"],["\n  width: 100%;\n  font-family: ",";\n  text-align: left;\n\n  span {\n    display: inline;\n  }\n\n  @media (min-width: ","px) {\n    padding-left: unset;\n  }\n"])),g.fonts.franklin,g.widths.mediumLarge),t.headingMessageClass=(0,h.css)(d||(d=i(["\n  font-size: 15px;\n  line-height: 17px;\n  opacity: 1;\n\n  span {\n    white-space: nowrap;\n\n    &::after {\n      content: '  ';\n      white-space: pre-line;\n    }\n  }\n\n  @media (min-width: ","px) {\n    height: 55px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n"],["\n  font-size: 15px;\n  line-height: 17px;\n  opacity: 1;\n\n  span {\n    white-space: nowrap;\n\n    &::after {\n      content: '  ';\n      white-space: pre-line;\n    }\n  }\n\n  @media (min-width: ","px) {\n    height: 55px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n"])),g.widths.mediumLarge),t.ctaIconWrapper=(0,h.css)(p||(p=i(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: transparent;\n  outline: ",";\n  width: ",";\n  height: ",";\n  z-index: 1;\n  border-width: 0px;\n\n  svg {\n    height: 15px;\n    margin: auto;\n    width: 15px;\n  }\n\n  @media (min-width: ","px) {\n    display: unset;\n    justify-content: unset;\n    align-items: unset;\n    position: absolute;\n    top: 0px;\n    right: 0px;\n  }\n"],["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: transparent;\n  outline: ",";\n  width: ",";\n  height: ",";\n  z-index: 1;\n  border-width: 0px;\n\n  svg {\n    height: 15px;\n    margin: auto;\n    width: 15px;\n  }\n\n  @media (min-width: ","px) {\n    display: unset;\n    justify-content: unset;\n    align-items: unset;\n    position: absolute;\n    top: 0px;\n    right: 0px;\n  }\n"])),g.colors.blue,"55px","55px",g.widths.mediumLarge),t.ctaContainer=(0,h.css)(f||(f=i(["\n  @media (max-width: 1023px) {\n    display: flex;\n    justify-content: flex-end;\n    flex-direction: row;\n\n    @media (min-width: ","px) {\n      min-width: 110px;\n    }\n  }\n"],["\n  @media (max-width: 1023px) {\n    display: flex;\n    justify-content: flex-end;\n    flex-direction: row;\n\n    @media (min-width: ","px) {\n      min-width: 110px;\n    }\n  }\n"])),g.widths.medium),t.ctaActionTextClass=(0,h.css)(m||(m=i(["\n  cursor: pointer;\n  font-size: 12px;\n  text-transform: uppercase;\n  font-weight: ",";\n  font-family: ",";\n  letter-spacing: 0.24px;\n  height: ",";\n  line-height: calc("," + 3px);\n  white-space: nowrap;\n  margin: 0;\n  padding: 0;\n  display: none;\n  color: ",";\n\n  &."," {\n    animation: "," 400ms;\n  }\n\n  &."," {\n    animation: "," 400ms;\n  }\n\n  @media (min-width: ","px) {\n    height: unset;\n  }\n"],["\n  cursor: pointer;\n  font-size: 12px;\n  text-transform: uppercase;\n  font-weight: ",";\n  font-family: ",";\n  letter-spacing: 0.24px;\n  height: ",";\n  line-height: calc("," + 3px);\n  white-space: nowrap;\n  margin: 0;\n  padding: 0;\n  display: none;\n  color: ",";\n\n  &."," {\n    animation: "," 400ms;\n  }\n\n  &."," {\n    animation: "," 400ms;\n  }\n\n  @media (min-width: ","px) {\n    height: unset;\n  }\n"])),g.fontWeights.bold,g.fonts.franklin,"55px","55px",g.colors.veryDarkGrey,t.textFadingOutClass,(0,y.fadeTextOut)(),t.textFadingInClass,(0,y.fadeTextIn)(),g.widths.medium)},J4Ca:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lSNA")),a=i(n("lwsE")),o=i(n("W8MJ")),s=n("6hsm"),l=i(n("dc0q")),c=n("Np/z"),u=i(n("aYWg"));function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=function(){return s.DEFAULT_PROMO_IMAGES},m=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;(0,a.default)(this,e),this.data=t,this.meteredContentClass=n,this.environment=i}return(0,o.default)(e,[{key:"authorsStructuredData",get:function(){var e=new u.default(this.data).getStructuredData();return e.length>0?e:s.PUBLISHER_ID_OBJ}},{key:"promotionalImage",get:function(){var e,t,n,i,r,a,o,s,u,d,m,h,g=(null===(e=this.data)||void 0===e||null===(t=e.promotionalMedia)||void 0===t||null===(n=t.promotionalMedia)||void 0===n?void 0:n.promotionalMedia)||(null===(i=this.data)||void 0===i||null===(r=i.promotionalMedia)||void 0===r?void 0:r.promotionalMedia)||(null===(a=this.data)||void 0===a?void 0:a.promotionalMedia),y=(this.data||{}).isAccessibleForFree;return"Image"===(null==g?void 0:g.__typename)?new l.default(p(p({},g),{},{isAccessibleForFree:y})):(0,c.hasCrops)(null===(o=this.data)||void 0===o?void 0:o.promotionalMedia)?new l.default(this.data.promotionalMedia):(0,c.hasCrops)(null===(s=this.data)||void 0===s||null===(u=s.promotionalMedia)||void 0===u?void 0:u.promotionalMedia)?new l.default(this.data.promotionalMedia.promotionalMedia):(0,c.hasCrops)(null===(d=this.data)||void 0===d||null===(m=d.promotionalMedia)||void 0===m||null===(h=m.promotionalMedia)||void 0===h?void 0:h.promotionalMedia)?new l.default(this.data.promotionalMedia.promotionalMedia.promotionalMedia):{getStructuredData:f}}}]),e}();t.default=m},J6ba:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default='\nfragment onCardDeckCardStory on CardStory {\n  __typename\n  data\n  cards {\n    key\n    data\n    text {\n      key\n      content {\n        ... on TextInline {\n          text\n          __typename\n        }\n      }\n    }\n    assets {\n      ... on CreativeWork {\n        ... on Published {\n          uri\n          url\n          sourceId\n          __typename\n        }\n        ... on Image {\n          id\n          uri\n          credit\n          sourceId\n          altText\n          crops(\n            renditionNames: [\n              "videoSixteenByNine1050"\n              "videoSixteenByNine600"\n              "threeByTwoMediumAt2X"\n              "verticalTwoByThree735"\n              "square640"\n              "threeByTwoMediumAt2X"\n            ]\n          ) {\n            name\n            renditions {\n              name\n              url\n              width\n              height\n            }\n          }\n        }\n        ... on Video {\n          id\n          uri\n          advertisingProperties {\n            sensitivity\n          }\n          bylines {\n            renderedRepresentation\n          }\n          transcript\n          duration\n          renditions {\n            aspectRatio\n            type\n            url\n            width\n            height\n          }\n          isCinemagraph\n          promotionalMedia {\n            ... on Image {\n              id\n              credit\n              crops(\n                renditionNames: [\n                  "videoSixteenByNine1050"\n                  "videoSixteenByNine600"\n                  "threeByTwoMediumAt2X"\n                  "verticalTwoByThree735"\n                  "square640"\n                  "threeByTwoMediumAt2X"\n                ]\n              ) {\n                name\n                renditions {\n                  name\n                  url\n                  width\n                  height\n                }\n              }\n            }\n          }\n          summary\n        }\n      }\n    }\n    bylines {\n      key\n      byline {\n        renderedRepresentation\n      }\n    }\n  }\n}\n'},J9J2:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lSNA")),a=i(n("lwsE")),o=i(n("W8MJ")),s=i(n("ScB1"));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(){function e(t,n){var i;(0,a.default)(this,e),this.cardDeckAsset=(null==t||null===(i=t.media)||void 0===i?void 0:i.asset)||{},this.inlineAsset=n}return(0,o.default)(e,[{key:"getCardTitle",value:function(e){var t,n,i={Carousel:"sentence",CardStory:"heading1"}[this.cardDeckAsset.__typename],r=null===(t=e.text)||void 0===t||null===(n=t.find((function(e){return e.key===i})))||void 0===n?void 0:n.content;return null==r?void 0:r.map((function(e){return e.text})).join("")}},{key:"getStructuredData",value:function(){var e=this;return(this.cardDeckAsset.cards||[]).map((function(t){return t.assets.map((function(n){if("Video"!==n.__typename)return null;var i=new s.default(n,"",e.inlineAsset);if(!n.embedded)return i.getStructuredData();var r=n.headline.default||e.getCardTitle(t);if(!r)return null;var a=c(c({},n),{},{url:i.contentUrl,headline:{default:r}});return new s.default(a,"",e.inlineAsset).getStructuredData()}))})).flat().filter(Boolean)}}]),e}();t.default=u},JJ2H:function(e,t,n){"use strict";n.d(t,"b",(function(){return P})),n.d(t,"a",(function(){return w}));var i,r=n("VkAN"),a=n.n(r),o=n("gcR/"),s=n.n(o),l=n("q1tI"),c=n.n(l),u=n("eFc+"),d=n.n(u),p=n("QS0n"),f=n("X6oL"),m=n("rWB7"),h=n("Vg22"),g=n("5dFD"),y=n("zS3r"),v=n("kV2j"),b=n("e0Jg"),_=n("TVGw"),w={HEADER:"header",FOOTER:"footer",INSTORYMASTHEAD:"inStoryMasthead",C_COLUMN:"ccol",BIGBOTTOM:"bigBottom"};function x(e){var t,n,i=e.commentCount,r=e.article,a=e.error,o=e.position,l=e.viewCommentsInNewWindow,c=e.buttonClass,u=Object(f.useTracking)(b.l).trackEvent,d=Object(p.useLocation)(),h=Object(p.useHistory)(),v=Object(m.b)();if(!i&&Number.isInteger(null==r||null===(t=r.commentProperties)||void 0===t?void 0:t.approvedCommentsCount)&&(n=r.commentProperties.approvedCommentsCount),i&&Number.isInteger(i)&&(n=i),a)return null;var x=n>0?n.toString():"+",k=r.__typename,O=r.id,E=r.url,T=r.targetUrl;return l?s()(y.a,{viewCommentsInNewWindow:l,commentCount:n,url:E,position:o,buttonClass:c},void 0,x):v?s()(y.a,{commentCount:n,onClick:function(){var e;o===w.HEADER?e=b.a.HEADER:o===w.INSTORYMASTHEAD?e=b.a.INSTORYMASTHEAD:o===w.FOOTER?e=b.a.FOOTER:o===w.BIGBOTTOM?e=b.a.FOOTER_BOTTOM_BAR:o===w.C_COLUMN&&(e=b.a.C_COLUMN),u(Object(b.i)(e)),v&&(window.NYT_SPEECHBUBBLE="comments-speech-bubble-".concat(o)),Object(_.e)({history:h,location:d})},position:o,buttonClass:c},void 0,x):s()(y.a,{position:o,buttonClass:c},void 0,s()(g.a,{link:{__typename:k,id:O,targetUrl:T,url:E}},void 0,x))}x.displayName="CommentCount",x.fragments={article:d()(i||(i=a()(["\n    fragment CommentCount_article on CreativeWork {\n      ... on Published {\n        sourceId\n        url\n      }\n    }\n  "])))},x.defaultProps={commentCount:null,error:!1,viewCommentsInNewWindow:!1,buttonClass:void 0};var k,O=Object(h.connect)((function(e){var t;return e.article.error?{error:!0}:{commentCount:Object(v.b)(e)||(null===(t=e.article)||void 0===t?void 0:t.approvedCount)}}))(x),E=n("pVnL"),T=n.n(E),C=n("8iTF"),S=function(e){var t=e.article.commentProperties,n=e.viewCommentsInNewWindow,i=e.buttonClass;return Object(C.h)(null==t?void 0:t.status)?c.a.createElement(O,T()({viewCommentsInNewWindow:n,buttonClass:i},e)):null};S.defaultProps={viewCommentsInNewWindow:!1,buttonClass:void 0},S.fragments={article:d()(k||(k=a()(["\n    fragment CommentCountContainer_article on Article {\n      id\n      commentProperties {\n        status\n      }\n      ...CommentCount_article\n    }\n    ","\n  "])),O.fragments.article)};var P=S},JKTc:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.StyledQuote=t.StyledAttribution=void 0;var r=n("3sMT"),a=n("Jqp9"),o=i(n("wXC7")),s=(0,a.themeFn)("treatment",{none:(0,a.css)("color:",r.color.content.primary,";font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.bold,";font-style:italic;font-size:30px;line-height:35px;"),feature:(0,a.css)("color:",r.color.content.primary,";font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.extraLight,";font-style:normal;font-size:30px;line-height:35px;"),magazine:(0,a.css)("color:",r.color.content.primary,";font-family:",o.default.font.magslab,";font-weight:",o.default.font.weight.bold,";font-style:normal;letter-spacing:0.015em;font-size:35px;line-height:40px;text-align:center;padding:20px 10px;border-top:1px solid currentColor;border-bottom:1px solid currentColor;"),"t-magazine":(0,a.css)("color:",r.color.content.primary,";font-family:",o.default.font.tmagSerifDisplayBase,";font-weight:",o.default.font.weight.bold,";font-style:normal;letter-spacing:0.015em;font-size:25px;line-height:30px;")}),l=(0,a.styled)("h2",{target:"e38szfw0"})(s,";");t.StyledQuote=l;var c=(0,a.themeFn)("treatment",{none:(0,a.css)("color:",r.color.content.primary,";font-family:",o.default.font.franklinBase,";margin-top:15px;font-size:15px;line-height:20px;"),feature:(0,a.css)("color:",r.color.content.primary,";font-family:",o.default.font.franklinBase,";margin-top:15px;font-size:15px;line-height:20px;"),magazine:(0,a.css)("color:",r.color.content.primary,";font-family:",o.default.font.magazineSansBase,";margin-top:10px;font-size:15px;line-height:20px;"),"t-magazine":(0,a.css)("color:",r.color.content.primary,";font-family:",o.default.font.tmagSansBase,";margin-top:10px;font-size:15px;line-height:20px;")}),u=(0,a.styled)("p",{target:"e38szfw1"})(c,";");t.StyledAttribution=u},JM9o:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n("q1tI")),l=n("Jqp9"),c=o(n("scmT")),u=o(n("+ldZ")),d=o(n("5U+Q")),p=a(n("h6Ch")),f=n("tHll"),m=n("TQ19"),h=n("wKlc");t.default=function(e){var t,n,i,r=e.unit,a=e.children,o=e.clientProps,g=o.fullWidth,y=void 0===g||g,v=o.fullHeight,b=void 0!==v&&v,_=o.isStatic,w=void 0===_?null===(i=null==r?void 0:r.content)||void 0===i?void 0:i.static:_,x=o.isEmbedded,k=void 0!==x&&x,O=o.className,E=(0,s.useState)(!0),T=E[0],C=E[1],S=(0,s.useState)(!1),P=S[0],M=S[1],I=(0,s.useState)(null),A=I[0],j=I[1],L=(0,f.useUnit)(m.config).unit,R=L.canShow&&T,N=(0,s.useState)(w),D=N[0],B=N[1],z=(0,s.useState)(!1),F=z[0],U=z[1];return(0,s.useEffect)((function(){w||(setTimeout((function(){return B(!0)}),1),setTimeout((function(){return U(!0)}),800))}),[null==r?void 0:r.content,w]),(null==r?void 0:r.canShow)||R?s.default.createElement("div",{"data-testid":"onsite-messaging-unit-".concat(null===h.config||void 0===h.config?void 0:h.config.name)},P&&s.default.createElement(d.default,{containerClassName:p.snackbarContainerClass,showSnackbar:P&&null!==A,success:A,trackingOptions:{impression:{name:"gdpr snackbar message"}},"data-testid":"GDPR-response"}),s.default.createElement("div",{id:"gateway-content","aria-hidden":"true",className:(0,l.cx)(p.gatewayClass,(t={},t[p.showClass]=D,t[p.animationComplete]=F,t[p.fullWidthClass]=y,t[p.fullHeightClass]=b,t[p.embeddedGatewayClass]=k,t),O)},s.default.createElement("div",{className:(0,l.cx)(p.gatewayContainerClass,(n={},n[p.fullWidthClass]=y,n[p.fullHeightClass]=b,n))},s.default.createElement(u.default,{isVisible:T,setVisible:C,unit:L,onClick:function(){M(!0)},onComplete:function(e){var t=e.success;j(t)}}),R?null:s.default.createElement(s.default.Fragment,null,s.default.createElement(c.default,null),a)))):null}},JYoY:function(e,t,n){"use strict";t.a={COMMENT_NOTIFY:"comment_notify",CSRF_TOKEN:"csrf_token",DISPLAY_NAME:"displayname",LOCATION:"location",AVATAR_URL:"picURL"}},Jfsd:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("1gPk")),o=function(e){var t=e.children;return r.default.createElement("strong",{className:a.boldClass},t)};o.displayName="BoldFormat";var s=o;t.default=s},"JoI/":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.selectImageRendition=t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("Jqp9")),o=i(n("KeRS")),s=n("6l8D"),l=n("4mEQ"),c=i(n("Vj0M")),u=i(n("fY8U")),d=n("nxD0"),p=i(n("HZTh")),f=i(n("Svk8")),m=function(e){var t=e.headline,n=e.summary,i=e.url,l=e.media,m=e.className,h=e.label,g=e.caption,y=e.duration,v=(0,a.useTheme)(),b=null;"string"==typeof l?b=r.default.createElement(d.AudioRelatedLinkImage,{src:l}):r.default.isValidElement(l)&&(b=l);var _="compact"===(null==v?void 0:v.displayStyle.toLowerCase()),w=(0,c.default)(y),x=w.hours>=1?"".concat(w.hours," HR ").concat(w.minutes," MIN LISTEN"):"".concat(w.minutes," MIN LISTEN");return r.default.createElement(u.default.Consumer,null,(function(e){return r.default.createElement(d.StyledAudioRelatedLink,{siblings:e,className:m},r.default.createElement(o.default,{to:i,className:s.linkClass},r.default.createElement(d.AudioRelatedLinkMediaWrapper,{siblings:e},(null==v?void 0:v.displayStyle)&&"compact"!==v.displayStyle&&b,r.default.createElement(d.AudioRelatedLinkCaption,null,g)),r.default.createElement(d.AudioRelatedLinkTextWrapper,{siblings:e},h&&!_&&r.default.createElement(d.AudioRelatedLinkLabel,null,h," ",r.default.createElement(d.AudioRelatedLinkAudioTag,null,"Audio")),r.default.createElement(d.AudioRelatedLinkHeadline,null,t),n&&v&&"expanded"===(null==v?void 0:v.displayStyle)&&r.default.createElement(d.AudioRelatedLinkSummary,{siblings:e},n),(null==v?void 0:v.displayStyle)&&"compact"!==v.displayStyle&&r.default.createElement(d.AudioRelatedLinkAudioSignalWrapper,null,r.default.createElement(d.AudioRelatedLinkPlayIconWrapper,null,r.default.createElement(f.default,null)),r.default.createElement(d.AudioRelatedLinkDuration,null,x,r.default.createElement(p.default,null))))))}))};m.displayName="AudioRelatedLink",m.defaultProps={headline:"",summary:"",url:"",caption:"",media:void 0,className:void 0,label:"",duration:void 0};t.selectImageRendition=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=arguments.length>2?arguments[2]:void 0,i=["threeByTwoSmallAt2X","videoLarge","mediumThreeByTwo440"],r=["thumbLarge"];return(0,l.createPrioritySelector)(n?r:i)(e,t)};var h=m;t.default=h},JtDR:function(e,t,n){"use strict";var i,r=n("VkAN"),a=n.n(r),o=n("gcR/"),s=n.n(o),l=(n("q1tI"),n("Jqp9")),c=n("eFc+"),u=n.n(c),d=n("K3mc"),p=n.n(d),f=n("rNEd"),m=n("wXC7"),h=n.n(m),g=n("nxVm"),y=n.n(g),v=Object(l.css)("box-sizing:border-box;width:",h.a.breakpoint.mobileFullWidth,";max-width:",h.a.breakpoint.textBodyWidth,"px;",h.a.breakpoint.medium,"{width:100%;}",y.a,";"),b=Object(l.css)("width:90%;",h.a.breakpoint.small,"{margin:0;}"),_=function(e){var t=e.data,n=e.className;return s()(p.a,{className:Object(l.cx)(v,n)},void 0,t.content.map((function(e,t){return s()(f.a,{data:e,className:b},t.toString())})))};_.displayName="BlockquoteBlock",_.defaultProps={className:void 0},_.fragments={data:u()(i||(i=a()(["\n    fragment BlockquoteBlock_data on BlockquoteBlock {\n      content {\n        ...ParagraphBlock_data\n      }\n    }\n    ","\n  "])),f.a.fragments.data)};t.a=_},JwCr:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("yFJX")).default;t.default=r},K3mc:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("4a6l")).default;t.default=r},K8lX:function(e,t){e.exports=function(){return'var AdSlot4=function(){"use strict";function a(){return window.AdSlot4=window.AdSlot4||{},window.AdSlot4.cmd=window.AdSlot4.cmd||[],window.AdSlot4}function t(){return!("undefined"==typeof window||!window.document||!window.document.createElement)}function n(e){return-1!==document.cookie.indexOf(e)}function i(e){var t={PURR_AcceptableTrackers:0,PURR_AdConfiguration:5,PURR_DataSaleOptOutUI:2,PURR_DataProcessingConsentUI:3,PURR_AcceptableTrackers_v2:4,PURR_AdConfiguration_v2:5,PURR_DataProcessingPreferenceUI:6,PURR_DataSaleOptOutUI_v2:7,PURR_CaliforniaNoticesUI:8,PURR_EmailMarketingOptInUI:9,PURR_DeleteIPAddress:10,PURR_AdConfiguration_v3:11,PURR_LimitSensitivePI:12,PURR_EmailMarketingOptInUI_v2:13,PURR_AdConfiguration_v4:14},n=function(e){e="; ".concat(document.cookie).split("; ".concat(e,"="));return 2===e.length?e.pop().split(";").shift():null}(e),i={};return Object.keys(t).forEach(function(e){i[e]=function(e,t){t=new RegExp("^.{".concat(t,"}(.)")),t=e.match(t);return(null==t?void 0:t[1])||""}(n,t[e])}),d.forEach(function(t){Object.keys(t.valueMapping).forEach(function(e){t.valueMapping[e]===i[t.name]&&(i[t.name]=e)})}),i}function o(){var e;try{return function(){if("undefined"==typeof window)return!1;var e=window.navigator.userAgent||window.navigator.vendor,t=-1!==e.indexOf("nyt_android"),n=-1!==e.indexOf("nytios"),i=-1!==e.indexOf("nyt_xwords_ios"),e=-1!==e.indexOf("Crosswords");return t||n||i||e}()?null!==(e=null===window||void 0===window?void 0:window.config)&&void 0!==e&&e.PurrDirectives?window.config.PurrDirectives:n("override-purr")?i("override-purr"):r({},c):n("nyt-purr")?i("nyt-purr"):r({},c)}catch(e){return console.warn("cant get directives from cookie or config",e),r({},c)}}var r=function(){return(r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},d=[{name:"PURR_AcceptableTrackers",valueMapping:{controllers:"c",processors:"p"}},{name:"PURR_AdConfiguration",valueMapping:{full:"f",npa:"n","adluce-socrates":"s"}},{name:"PURR_DataSaleOptOutUI",valueMapping:{hide:"h",show:"s"}},{name:"PURR_DataProcessingConsentUI",valueMapping:{hide:"h",show:"s"}},{name:"PURR_AcceptableTrackers_v2",valueMapping:{controllers:"c",processors:"p",essentials:"e"}},{name:"PURR_AdConfiguration_v2",valueMapping:{full:"f",rdp:"r",npa:"n",adluce:"a","adluce-socrates":"s"}},{name:"PURR_DataProcessingPreferenceUI",valueMapping:{hide:"h","allow-opt-out":"o","allow-opt-in":"i","allow-opt-in-or-out":"a"}},{name:"PURR_DataSaleOptOutUI_v2",valueMapping:{hide:"h",show:"s","show-opted-out":"o"}},{name:"PURR_CaliforniaNoticesUI",valueMapping:{hide:"h",show:"s"}},{name:"PURR_EmailMarketingOptInUI",valueMapping:{checked:"c",unchecked:"u"}},{name:"PURR_DeleteIPAddress",valueMapping:{delete:"d",keep:"k"}},{name:"PURR_AdConfiguration_v3",valueMapping:{full:"f",rdp:"r",npa:"n",ltd:"l","adluce-socrates":"s"}},{name:"PURR_LimitSensitivePI",valueMapping:{hide:"h",show:"s"}},{name:"PURR_EmailMarketingOptInUI_v2",valueMapping:{checked:"c",unchecked:"u","do-not-display":"d"}},{name:"PURR_AdConfiguration_v4",valueMapping:{full:"f",rdp:"r",npa:"n",ltd:"l","adluce-socrates":"s","no-ads":"a"}}],c={PURR_DataSaleOptOutUI:"hide",PURR_DataSaleOptOutUI_v2:"hide",PURR_CaliforniaNoticesUI:"hide",PURR_DataProcessingConsentUI:"hide",PURR_DataProcessingPreferenceUI:"hide",PURR_AcceptableTrackers_v2:"controllers",PURR_AcceptableTrackers:"controllers",PURR_AdConfiguration_v2:"full",PURR_AdConfiguration:"full",PURR_EmailMarketingOptInUI:"unchecked",PURR_DeleteIPAddress:"delete",PURR_AdConfiguration_v3:"full",PURR_LimitSensitivePI:"hide",PURR_EmailMarketingOptInUI_v2:"unchecked",PURR_AdConfiguration_v4:"full"};function e(){return"full"===(e={},t()&&(e=o().PURR_AdConfiguration_v3||o().PURR_AdConfiguration_v2),e);var e}function u(){return!(!!t()&&null!==window.navigator.userAgent.match(/nyt[-_]?(?:ios|android)/i))&&e()}function l(e,t,n){var i=document.getElementsByTagName("head")[0],o=document.createElement("script");t&&(o.onload=t),n&&(o.onerror=n),o.src=e,o.async=!0,i.appendChild(o)}function s(){a().cmd.push(function(){var e="".concat("GeoEdge"," failed to load");a().events.publish({name:b,value:{message:e}})})}function p(){return!window.grumi&&(l("//rumcdn.geoedge.be/b3960cc6-bfd2-4adc-910c-6e917e8a6a0e/grumi-ip.js",null,s),window.grumi={key:"b3960cc6-bfd2-4adc-910c-6e917e8a6a0e",cfg:{advs:v}})}function m(){var e;window.apstag||(e="".concat(h," not loading properly"),console.warn(e))}function f(){a().cmd.push(function(){var e="".concat(h," failed to load");a().events.publish({name:U,value:{type:h,message:e}})})}function w(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return e.googletag=e.googletag||{},e.googletag.cmd=e.googletag.cmd||[],e.googletag}function g(e){return!(!window.apstag||!window.apstag.fetchBids)&&(window.apstag.fetchBids({slots:e},void(window.apstag&&window.apstag.setDisplayBids&&w().cmd.push(window.apstag.setDisplayBids()))),!0)}var v={32074718:!0,4792640386:!0,21966278:!0,4558311760:!0,4552626466:!0,4400775978:!0,39318518:!0,4874174581:!0,33597638:!0,38636678:!0,38637278:!0,33597998:!0,33613118:!0,30252878:!0,33597758:!0},b="script_loader_error",h="A9",_=[[300,250],[728,90],[970,90],[970,250]],R="large",P="medium",y="small",U="BidderError",A="AdEmpty",O="AdBlockOn",k="AdDefined",I="AdRefreshed";function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function D(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach(function(e){x(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function j(e){return F[e]||F.default}function S(e,t){var n;return(e=[].concat((n=t,[].concat(e).slice().sort(function(e,t){return t[0]-e[0]}).find(function(e){return!Number.isNaN(e[0])&&e[0]<n}))).pop())&&e.length?e:null}function z(o,a){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.sizes,n=void 0===t?[]:t,t=e.truePosition,e=e.id;if(a&&j(o).map(function(e){return e.id}).includes(e))return!1;var i,n=S(n,window.innerWidth),n=(i=n,Array.isArray(i)?_.filter(function(t){return i.some(function(e){return e[0]===t[0]&&e[1]===t[1]})}):(console.warn("filterSizes() did not receive an array"),[]));if(0<n.length){n=[{slotID:t||e,slotName:"".concat(t||e,"_").concat(o,"_web"),sizes:n}];return g(n),!0}return!1}}function M(n,i){return j(i).map(function(e){var t=e.id,e=e.sizes;return{slotID:t,slotName:"".concat(t,"_").concat(i,"_web"),sizes:(e=e)[n]||e[y]}})}function E(t,n){a().cmd.push(function(){var e;t&&g(M(740<(e=window.innerWidth)?R:600<e?P:y,n)),a().events.subscribe({name:k,scope:"all",callback:z(n,t)})})}function T(e,t,n){(function(){var e,n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"apstag",i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window;return i[n]||(e=function(e,t){return i[n]._Q.push([e,t])},i[n]={_Q:[],init:function(){e("i",arguments)},fetchBids:function(){e("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]}}),i[n]})("apstag",window).init({pubID:"3030",deals:!0,adServer:"googletag",params:{si_section:t}}),E(e,n)}function B(e,t){var n;switch(t.includes(J)?J:t){case K:n=e.top;break;case J:n=e.mid;break;case X:n=e.bottom;break;default:n=e.default}return n}function N(e){var t;switch(e){case"livebl":t="hp";break;case"coll":t="sf";break;default:t=e}return t in V||(t="default"),t}var Y=(x(me={},R,[[728,90],[970,90],[970,250]]),x(me,P,[[728,90],[300,250]]),x(me,y,[[300,250]]),me),F={hp:[{id:"dfp-ad-top",sizes:Y}],games:[{id:"ad-top",sizes:Y},{id:"intsl",sizes:Y}],default:[{id:"top",sizes:Y}]},V={art:{id:["top","story-ad-1","story-ad-2","story-ad-3","story-ad-4","story-ad-5","story-ad-6","bottom"],pos:["top","mid1","mid2","mid3","mid4","mid5","mid6","bottom"]},int:{id:["top","mid1","mid2","bottom"],pos:["top","mid1","mid2","bottom"]},hp:{id:["dfp-ad-top","dfp-ad-mid1","dfp-ad-mid2","dfp-ad-mid3","dfp-ad-bottom"],pos:["top","mid1","mid2","mid3","bottom"]},ss:{id:["right-0","right-1","right-2","right-3"],pos:["mid1","mid1","mid1","mid1"],size:{small:[[300,250]],medium:[[300,250]],large:[[300,250]]}},sf:{id:["top","mid1","mid2"],pos:["top","mid1","mid2"],size:{small:[[300,250]],medium:[[300,250]],large:[[300,250]]}},games:{id:["ad-top","ad-mid1","ad-bottom"],pos:["top","mid1","bottom"]},default:{id:["top","mid1","mid2"],pos:["top","mid1","mid2"],size:{small:[[300,250]],medium:[[728,90]],large:[[728,90],[970,90],[970,250]]}}},G={top:2088370,mid:2088372,bottom:2088374,default:2088376},L={top:544112060,mid:544112063,bottom:544112062,default:544112065},q={top:684296214,mid:190706820,bottom:932254072,default:153468583},H={top:"NYTimes_728x90_970_top_PB",mid:"NYTimes_728x90_970_mid_PB",bottom:"NYTimes_728x90_970_bot_PB",default:"NYTimes_728x90_970_mid_PB"},Q={top:"nytimes_top",mid:"nytimes_mid",bottom:"nytimes_bottom",default:"nytimes_catchall"},W={top:"995821",mid:"995822",bottom:"995823",default:"995824"},Z={buckets:[{max:3,increment:.05},{max:10,increment:.01},{max:20,increment:.1},{max:50,increment:.5},{max:101,increment:1}]},K="top",J="mid",X="bottom";function $(o,e,t){var t=2<arguments.length&&void 0!==t?t:{},a=t.sizeConfig,r=t.activeBidders,t=t.positionsToFilter,d=void 0===t?[]:t,c=N(e),s=V[c].size?c:"default";return V[c].pos.reduce(function(e,t,n){if(d.includes(t))return e;var n=V[c].id[n],i=D(D({},V[s].size),null==a||null===(i=a[n])||void 0===i?void 0:i.size),t={code:n,mediaTypes:{banner:{sizeConfig:[{minViewPort:[970,0],sizes:i.large},{minViewPort:[728,0],sizes:i.medium},{minViewPort:[0,0],sizes:i.small}]}},bids:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],e=[{bidder:"appnexus",params:{member:3661,invCode:"nyt_".concat(e,"_").concat(t)}},{bidder:"medianet",params:{cid:"8CU4WQK98",crid:B(q,t)}},{bidder:"rubicon",params:{accountId:12330,siteId:378266,inventory:{invCode:["nyt_".concat(e,"_").concat(t)]},zoneId:B(G,t),position:"top"===t?"atf":"btf"}},{bidder:"openx",params:{unit:B(L,t),delDomain:"nytimes-d.openx.net",customParams:{invCode:"nyt_".concat(e,"_").concat(t)}}},{bidder:"triplelift",params:{inventoryCode:B(H,t)}},{bidder:"pubmatic",params:{publisherId:"163427",adSlot:B(Q,t)}},{bidder:"ix",params:{siteId:B(W,t)}}],t=e.filter(function(e){return!["pubmatic","ix"].includes(e.bidder)});return n.length?e.filter(function(e){return n.includes(e.bidder)}):t}(o,t,r)};return e.push(t),e},[])}function ee(n){window.pbjs=window.pbjs||{},window.pbjs.initAdserverSet||(window.pbjs.initAdserverSet=!0,a().cmd.push(function(){a().events.subscribe({name:k,scope:"all",callback:function(t){w().cmd.push(function(){var e;(e=N(e=n),V[e].id).includes(t.id)&&window.pbjs.setTargetingForGPTAsync([t.id])})}})}))}function te(n,e,t,i){function o(e,t){window.pbjs.initAdserverSet=!1,n.requestBids({bidsBackHandler:function(){ee(e)},timeout:t})}a().cmd.push(function(){n.que.push(function(){n.addAdUnits($(e,t,i)),o(t,1e4),a().events.subscribe({name:I,scope:"all",callback:function(){o(t,800)}})})})}function ne(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},i=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return e.pbjs=e.pbjs||{},e.pbjs.que=e.pbjs.que||[],e.pbjs}(),o=n.priceGranularity;i.setConfig({priceGranularity:o||Z}),te(i,e,t,n)}function ie(){a().cmd.push(function(){var e="".concat("PreBid"," failed to load");a().events.publish({name:U,value:{type:"PreBid",message:e}})})}function oe(e,t,n){return!window.pbjs&&(l("https://www.nytimes.com/ads/prebid8.25.0.js",(i=e,o=t,a=n,function(){window.pbjs||console.log("prebid did not load"),ne(i,o,a)}),ie),!0);var i,o,a}function ae(){try{var e=((t=document.createElement("div")).innerHTML="&nbsp;",t.className="ad adsbox pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad ad-server",t.style="width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;",document.body.prepend(t),document.getElementsByClassName("ad adsbox")[0]),t=!(!(t=e)||0!==t.offsetHeight&&0!==t.clientHeight)||function(e){if(void 0!==window.getComputedStyle){e=window.getComputedStyle(e,null);if(e&&("none"===e.getPropertyValue("display")||"hidden"===e.getPropertyValue("visibility")))return!0}return!1}(e);return e=e,document.body.removeChild(e),t}catch(e){console.error("ad class check failed",e)}var t;return!1}function re(){return!(window&&window.AdSlot&&window.AdSlot.AdSlotReady)||(!(window&&window.googletag&&window.googletag.apiReady)||ae())}function de(){var e=window&&window.nyt_et&&window.nyt_et.get_host&&window.nyt_et.get_host();return e?fetch("".concat(e,"/.status"),{credentials:"include",headers:{accept:"*/*","content-type":"text/plain;charset=UTF-8"},mode:"no-cors"}).then(function(){return{success:!0}}).catch(function(e){return console.error("et track blocked",e),{success:!1}}):Promise.resolve({success:!1})}function ce(e,t,n){var i=(o="nyt-a",(document&&document.cookie&&document.cookie.match&&(o=document.cookie.match(new RegExp("".concat(o,"=([^;]+)"))))?o[1]:"")||null),o=!!(window&&window.matchMedia&&window.matchMedia("(max-width: 739px)").matches);return"".concat("https://a-reporting.nytimes.com/report.jpg","?mobile=").concat(o,"&block=").concat(n,"&aid=").concat(i,"&pvid=").concat(e,"&et=").concat(t)}function se(e,t,n){return!!(window&&window.NYTD&&window.NYTD.Abra&&"1_network_detection"===window.NYTD.Abra("DFP_blockDetect_0221"))&&((new Image).src=ce(e,t,n),!0)}function ue(e,t){t&&a().cmd.push(function(){var e=a();e.events&&e.events.publish({name:A,value:{type:O}})});var n=!1;return de().then(function(){n=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{success:!1}).success}).catch(function(){}).finally(function(){se(e,n,t)})}function le(e){var t;window.addEventListener("load",(t=e,function(){ue(t,re())}))}var pe,me=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(pe)return!1;var t=e.loadAmazon,n=void 0===t||t,i=e.loadPrebid,o=void 0===i||i,a=e.setFastFetch,r=void 0!==a&&a,d=e.loadGeoEdge,c=void 0===d||d,s=e.section,t=void 0===s?"none":s,i=e.pageViewId,a=void 0===i?"":i,d=e.pageType,s=void 0===d?"":d,i=e.prebidOverrides,d=void 0===i?{}:i;return e=document.referrer||"",!(i=/([a-zA-Z0-9_\\-.]+)(@|%40)([a-zA-Z0-9_\\-.]+).([a-zA-Z]{2,5})/).test(e)&&!i.test(window.location.href)&&(u()&&(s=new RegExp(/\bart\b/).test(s)?"art":s,c&&p(),n&&(c=r,n=t,r=s,window.apstag||(l("//c.amazon-adsystem.com/aax2/apstag.js",m,f),T(c,n,r))),o&&oe(t,s,d)),le(a),pe=!0)};return(Y=a()).loadScripts=Y.loadScripts||me,window.AdSlot4=Y}();'}},KG2r:function(e,t,n){"use strict";n.d(t,"c",(function(){return j})),n.d(t,"a",(function(){return L}));var i,r,a,o,s,l,c=n("VkAN"),u=n.n(c),d=n("gcR/"),p=n.n(d),f=n("lSNA"),m=n.n(f),h=n("J4zp"),g=n.n(h),y=n("q1tI"),v=n.n(y),b=n("17x9"),_=n.n(b),w=n("eFc+"),x=n.n(w),k=n("Jqp9"),O=n("X6oL"),E=n("ErmU"),T=n("2PZ4"),C=n("1q7V"),S=n("PgO9"),P=n("HUmG"),M=n("J2sf");function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var A=M.a,j={nyt:"The New York Times",nytdotcom:"NYTimes.com",from:"From",shareArticle:"Share Article",share:"Share options",facebook:"Facebook",telegram:"Telegram",twitter:"Twitter",email:"Email",linkedin:"LinkedIn",whatsapp:"WhatsApp",reddit:"Reddit",copy:"Copy link",copied:"Link Copied",gift:"Share full article",permalink:"Permalink"},L={copy:"Copy Link",email:"Email this article",facebook:"Share on Facebook",twitter:"Share on Twitter",telegram:"Share on Telegram",whatsapp:"Share on Whatsapp",linkedin:"Share on LinkedIn",reddit:"Share on Reddit"},R=(_.a.shape({default:_.a.string.isRequired}),_.a.shape({status:_.a.string.isRequired}),_.a.string,_.a.string.isRequired,_.a.string,function(e){var t,n=e.share,l=e.pageType,c=e.smidParams,u=e.toggleGiftArticleMenu,d={event:"moduleInteraction",eventData:{pagetype:l,trigger:"module",type:"click"},module:{name:"share-tools",region:e.trackingRegion||"default",element:{}}};"sectionfront"===l&&(d.module.element.url=n.url),"Homepage"===l&&n.url&&(d.module.element.url=n.url);var f=Object(S.a)().user,h=Object(P.f)(f)&&Object(P.d)(f),b=Object(O.useTracking)(d).trackEvent,_=Object(y.useRef)(null),w=Object(y.useState)(!1),x=g()(w,2),R=x[0],N=x[1];Object(y.useEffect)((function(){_&&_.current&&_.current.focus()}));var D=n.headline,B=n.summary,z=n.url,F=(D||{}).default,U=Object(y.useRef)(),H=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({twitter:"tw-share",facebook:"fb-share",linkedin:"li-share",email:"em-share",wa:"wa-share",reddit:"re-share",link:"url-share",default:"share",telegram:"tel-share"},c),W="".concat(z,"?smid=").concat(H.link),q=Object(y.useCallback)((function(){b({module:{element:{name:"share-url",label:j.permalink}}})}),[b]),V=encodeURIComponent(F),G=encodeURIComponent("https://www.facebook.com/"),Y=null===(t=Object(E.getEmailUrl)(z))||void 0===t?void 0:t.replace("smid=em-share","smid=".concat(H.email)),Z={subject:encodeURIComponent("".concat(j.nytdotcom,": ").concat(F)),body:encodeURIComponent("".concat(n.text?"".concat(n.text,"\n\n"):"").concat(j.from," ").concat(j.nyt,":\n\n").concat(F,"\n\n").concat(B,"\n\n").concat(Y))};return p()("div",{className:Object(k.cx)(M.j,h?M.k:null),id:C.c},void 0,p()("div",{className:M.m},void 0,j.share),p()("div",{className:M.l},void 0,"Share a link that only New York Times subscribers can access."),p()("ul",{className:M.n},void 0,p()("li",{className:M.f},void 0,v.a.createElement("button",{ref:_,type:"button","aria-label":L.copy,id:"copyUrlId","data-testid":"shareCopyUrlId",onClick:function(){navigator.clipboard.writeText(W).then((function(){q(),N(!0),U.current=setTimeout((function(){return N(!1)}),5e3)}),(function(){console.error("share menu copy link failed")}))},className:M.h},p()(T.c,{className:Object(k.cx)(M.e,M.b)}),p()("div",{className:Object(k.cx)(M.i,m()({},M.c,R)),"aria-live":"polite"},void 0,R?j.copied:j.copy))),p()("li",{className:M.f},void 0,p()("a",{href:"mailto:?subject=".concat(Z.subject,"&body=").concat(Z.body),target:"_blank","aria-label":L.email,rel:"noopener noreferrer",onClick:function(){b({module:{element:{name:"share-email",label:j.email}}})}},void 0,p()(T.f,{className:Object(k.cx)(M.e,M.b)}),p()("div",{className:M.i},void 0,j.email))),p()("li",{className:M.f},void 0,p()("a",{href:"https://www.facebook.com/dialog/feed?app_id=9869919170&link=".concat(Object(E.encodeUrlWithSMID)(z,H.facebook),"&name=").concat(V,"&redirect_uri=").concat(G).concat(n.text?"&quote=".concat(n.text):""),target:"_blank","aria-label":L.facebook,rel:"noopener noreferrer",onClick:function(){b({module:{element:{name:"share-facebook",label:j.facebook}}})}},void 0,p()(T.d,{className:Object(k.cx)(M.e,M.b)}),p()("div",{className:M.i},void 0,j.facebook))),p()("li",{className:M.f},void 0,p()("a",{href:"https://twitter.com/intent/tweet?url=".concat(Object(E.encodeUrlWithSMID)(z,H.twitter),"&text=").concat(n.text?n.text:V),target:"_blank","aria-label":L.twitter,rel:"noopener noreferrer",onClick:function(){b({module:{element:{name:"share-twitter",label:j.twitter}}})}},void 0,p()(T.g,{className:Object(k.cx)(M.e,M.b)}),p()("div",{className:M.i},void 0,j.twitter))),p()("li",{className:M.f},void 0,p()("a",{href:"https://t.me/share/url?url=".concat(Object(E.encodeUrlWithSMID)(z,H.telegram),"&text=").concat(n.text?n.text:V," via @nytimes"),target:"_blank","aria-label":L.telegram,rel:"noopener noreferrer",onClick:function(){b({module:{element:{name:"share-telegram",label:j.telegram}}})}},void 0,i||(i=p()(A,{telegram:!0})),p()("div",{className:M.i},void 0,j.telegram))),p()("li",{className:M.f},void 0,p()("a",{href:"https://www.linkedin.com/shareArticle?mini=true&url=".concat(Object(E.encodeUrlWithSMID)(z,H.linkedin),"&title=").concat(V),target:"_blank","aria-label":L.linkedin,rel:"noopener noreferrer",onClick:function(){b({module:{element:{name:"share-linkedin",label:j.linkedin}}})}},void 0,r||(r=p()(A,{linkedin:!0})),p()("div",{className:M.i},void 0,j.linkedin))),p()("li",{className:M.f},void 0,p()("a",{href:"https://api.whatsapp.com/send?text=".concat(n.text?n.text:V,"%20").concat(Object(E.encodeUrlWithSMID)(z,H.wa)),target:"_blank","aria-label":L.whatsapp,rel:"noopener noreferrer",onClick:function(){b({module:{element:{name:"share-whatsapp",label:j.whatsapp}}})}},void 0,a||(a=p()(A,{whatsapp:!0})),p()("div",{className:M.i},void 0,j.whatsapp))),p()("li",{className:M.f},void 0,p()("a",{href:"http://www.reddit.com/submit?url=".concat(Object(E.encodeUrlWithSMID)(z,H.reddit),"&title=").concat(V),target:"_blank","aria-label":L.reddit,rel:"noopener noreferrer",onClick:function(){b({module:{element:{name:"share-reddit",label:j.reddit}}})}},void 0,o||(o=p()(A,{reddit:!0})),p()("div",{className:M.i},void 0,j.reddit))),h&&p()("li",{className:Object(k.cx)(M.f,M.o,M.g)},void 0,p()("button",{type:"button",onClick:function(){u(!0),b({module:{element:{name:"open-unlocked-menu",label:j.gift}}})}},void 0,p()("span",{className:M.q},void 0,p()(T.e,{className:M.e})),p()("div",{className:Object(k.cx)(M.p,m()({},M.d,!h))},void 0,p()("p",{},void 0,j.gift),h&&(s||(s=p()("p",{},void 0,"Give paywall-free access to this article."))))))))});R.displayName="ShareMenu",R.defaultProps={pageType:void 0,smidParams:{},toggleGiftArticleMenu:function(){},trackingRegion:"default"},R.fragments={share:x()(l||(l=u()(["\n    fragment ShareMenu_share on CreativeWork {\n      headline {\n        default\n      }\n      summary\n      ... on Published {\n        url\n      }\n    }\n  "])))},t.b=R},KQYy:function(e,t,n){"use strict";n.d(t,"b",(function(){return $}));var i,r,a,o=n("pVnL"),s=n.n(o),l=n("gcR/"),c=n.n(l),u=n("lSNA"),d=n.n(u),p=n("lwsE"),f=n.n(p),m=n("W8MJ"),h=n.n(m),g=n("7W2i"),y=n.n(g),v=n("a1gu"),b=n.n(v),_=n("Nsbk"),w=n.n(_),x=n("zT9C"),k=n.n(x),O=n("q1tI"),E=n.n(O),T=n("Jqp9"),C=n("Odck"),S=n("t0IW"),P=n("XMA8"),M=n("ZKN5"),I=n("mczz"),A=n("VkAN"),j=n.n(A),L=n("wXC7"),R=n.n(L),N=n("euCz");function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z={quality:75,auto:"webp",disable:"upscale"};var F,U=function(e){var t=e.mobileRendition;return E.a.createElement(E.a.Fragment,null,c()("source",{media:Object(N.oneLineTrim)(i||(i=j()(["\n          (max-width: ","px) and (min-device-pixel-ratio: 3),\n          (max-width: ","px) and (-webkit-min-device-pixel-ratio: 3),\n          (max-width: ","px) and (min-resolution: 3dppx),\n          (max-width: ","px) and (min-resolution: 288dpi)\n        "])),R.a.breakpoint.width.small-1,R.a.breakpoint.width.small-1,R.a.breakpoint.width.small-1,R.a.breakpoint.width.small-1),srcSet:Object(S.a)(t.url,B(B({},z),{},{width:600}))}),c()("source",{media:Object(N.oneLineTrim)(r||(r=j()(["\n          (max-width: ","px) and (min-device-pixel-ratio: 2),\n          (max-width: ","px) and (-webkit-min-device-pixel-ratio: 2),\n          (max-width: ","px) and (min-resolution: 2dppx),\n          (max-width: ","px) and (min-resolution: 192dpi)\n        "])),R.a.breakpoint.width.small-1,R.a.breakpoint.width.small-1,R.a.breakpoint.width.small-1,R.a.breakpoint.width.small-1),srcSet:Object(S.a)(t.url,B(B({},z),{},{width:1200}))}),c()("source",{media:Object(N.oneLineTrim)(a||(a=j()(["\n          (max-width: ","px) and (min-device-pixel-ratio: 1),\n          (max-width: ","px) and (-webkit-min-device-pixel-ratio: 1),\n          (max-width: ","px) and (min-resolution: 1dppx),\n          (max-width: ","px) and (min-resolution: 96dpi)\n        "])),R.a.breakpoint.width.small-1,R.a.breakpoint.width.small-1,R.a.breakpoint.width.small-1,R.a.breakpoint.width.small-1),srcSet:Object(S.a)(t.url,B(B({},z),{},{width:1800}))}))},H=n("3sMT"),W=Object(T.css)("width:100%;background-color:",H.color.background.tertiary,";"),q=Object(T.css)("animation:",Object(T.keyframes)("from{background-color:",H.color.background.tertiary,";}to{background-color:transparent;}")," ",300,"ms ease-in forwards;"),V=Object(T.css)("transition:opacity ",300,"ms ease-in-out;opacity:0;display:block;width:100%;"),G=Object(T.css)("height:auto;width:100%;"),Y={entering:{opacity:0},entered:{opacity:1}};function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){d()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=w()(e);if(t){var r=w()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return b()(this,n)}}var K={quality:75,auto:"webp",disable:"upscale"};function $(e){var t=new URL(e);return"".concat(t.origin).concat(t.pathname)}var Q=Object(M.a)(F=function(e){y()(n,e);var t=J(n);function n(){var e;f()(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={appearedInViewport:!1,rendition:null,nativeLazinessSupported:null,aspectRatio:1.66,imageLoaded:!1,containerWidth:null},e.el=E.a.createRef(),e.appearedInViewport=!1,e}return h()(n,[{key:"componentDidMount",value:function(){var e;if(null!==(e=this.el)&&void 0!==e&&e.current){var t=this.getActiveRendition(),n={};n.nativeLazinessSupported="loading"in HTMLImageElement.prototype,Object(I.d)(Object(I.c)(),"forceLazy")?(this.appearedInViewport=!0,n.appearedInViewport=!0):!n.nativeLazinessSupported&&this.props.lazy&&this.setupIntersectionObserver(),t&&t.width&&t.height?(n.aspectRatio=t.width/t.height,n.rendition=t):n.aspectRatio=this.props.initialAspectRatio,n.containerWidth=this.el.current.offsetWidth?this.el.current.offsetWidth:null,this.setState(n)}}},{key:"componentWillUnmount",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null)}},{key:"getActiveRendition",value:function(){var e;if(null===(e=this.el)||void 0===e||!e.current)return null;var t=this.props.renditions,n=null;if(Array.isArray(t)){var i=this.el.current.querySelector("img");if(!i||!i.currentSrc)return null;var r=$(i.currentSrc);t.some((function(e){return e.url===r}))&&(n=t.find((function(e){return e.url===r})))}return n}},{key:"setupIntersectionObserver",value:function(){var e=this,t={threshold:0,rootMargin:"".concat(this.props.rootMargin,"px")};this.observer=new IntersectionObserver((function(t){var n;!e.appearedInViewport&&null!=t&&null!==(n=t[0])&&void 0!==n&&n.isIntersecting&&(e.appearedInViewport=!0,e.observer&&e.observer.disconnect(),e.observer=null,e.setState({appearedInViewport:!0}))}),t),this.observer.observe(this.el.current)}},{key:"render",value:function(){var e,t=this,n=this.props,i=n.lazy,r=n.imageProps,a=n.fullBleedImageStyles,o=n.alt,l=n.initialImageWidth,u=n.safeWidths,p=n.imageContainerRef,f=n.useMobileCrop,m=n.renditions,h=this.state,g=h.aspectRatio,y=h.imageLoaded,v=h.containerWidth,b=h.rendition,_=h.appearedInViewport,w=h.nativeLazinessSupported,x=X(X({},k()(r)),{},{decoding:"async"}),O=k()(m),M=Object(P.j)(O);Array.isArray(O)&&Array.isArray(x.srcSet)&&(O=O.filter((function(e){return!Object(P.o)(e)})),x.srcSet=x.srcSet.filter((function(e){return-1===e.indexOf(P.p)})));var I,A,j=v||l;if(!b&&j){var L=(I=1.5*j,(A=u)&&A.find((function(e){return e>=I}))||null),R=L?{width:L}:{},N=X(X({},K),R);x.src=Object(S.a)(x.src,N)}if(b&&(x.src=Object(S.a)(b.url,K),x.srcSet=null),i&&w&&(x.loading="lazy"),!i){if(x.width=x.width||this.props.width,x.height=x.height||this.props.height,x.width&&x.height){var D="string"==typeof x.className;x.className=Object(T.cx)(G,d()({},x.className,D))}return f&&M?c()("picture",{style:a},void 0,c()(U,{mobileRendition:M}),E.a.createElement("img",s()({alt:o,ref:p},x))):E.a.createElement("img",s()({alt:o,ref:p,style:a},x))}x.onLoad=function(){y||t.setState({imageLoaded:!0})};var B=!v&&this.props.initialAspectRatio||g,z="auto";y||(v?z=v/B:l&&(z=l/(1.5*B)));var F=f&&M?function(t){return c()("picture",{className:V,style:X(X({},Y[t]),{},{fullBleedImageStyles:a})},void 0,e||(e=c()(U,{mobileRendition:M})),E.a.createElement("img",s()({alt:o},x)))}:function(e){return E.a.createElement("img",s()({alt:o,className:V,style:X(X({},Y[e]),{},{fullBleedImageStyles:a})},x))};return E.a.createElement("div",{className:Object(T.cx)(W,d()({},q,y)),ref:this.el,"data-testid":"lazy-image"},j&&E.a.createElement("div",{ref:p,"data-testid":"lazyimage-container",style:{height:z}},(_||w)&&c()(C.Transition,{in:!!y,timeout:300},void 0,F)))}}]),n}(O.Component))||F;Q.displayName="LazyImage",Q.defaultProps={lazy:!1,fullBleedImageStyles:null,alt:"",renditions:null,initialAspectRatio:1.66,initialImageWidth:580,safeWidths:null,rootMargin:0,imageContainerRef:null,useMobileCrop:!1,height:null,width:null};t.a=Q},KRMk:function(e,t,n){"use strict";n.r(t),n.d(t,"usData",(function(){return P})),n.d(t,"UsDataProvider",(function(){return M}));var i=n("q1tI"),r=n.n(i),a=n("+fSA"),o=n("wNrk"),s=n("a6hj"),l=n("sdlZ"),c=n("pRWC"),u=n("fQFh"),d=n("jdN1"),p=n("Vcia"),f=n("BIcR"),m=n("+FKv"),h=n("0fzg"),g=n("NeZs"),y=n("/bvS"),v=n("n7ID"),b=n("69/w"),_=n("uTOv"),w=n("0l0s"),x=n("Ycuk"),k=n("urXL"),O=n("tNL+"),E=n("r3VM"),T=n("gVNr"),C=n("3TWG"),S=n("0s5G"),P=[{url:"https://www.nytimes.com/section/us",name:"U.S.",dropdown:[{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"U.S.",link:"https://www.nytimes.com/section/us"},{copy:"Politics",link:"https://www.nytimes.com/section/politics"},{copy:"New York",link:"https://www.nytimes.com/section/nyregion"},{copy:"California",link:"https://www.nytimes.com/column/california-today"},{copy:"Education",link:"https://www.nytimes.com/section/education"},{copy:"Health",link:"https://www.nytimes.com/section/health"},{copy:"Obituaries",link:"https://www.nytimes.com/section/obituaries"},{copy:"Science",link:"https://www.nytimes.com/section/science"}]},{columnWidth:2,hamburgerColumnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"Climate",link:"https://www.nytimes.com/section/climate"},{copy:"Sports",link:"https://www.nytimes.com/section/sports"},{copy:"Business",link:"https://www.nytimes.com/section/business"},{copy:"Tech",link:"https://www.nytimes.com/section/technology"},{copy:"The Upshot",link:"https://www.nytimes.com/section/upshot"},{copy:"The Magazine",link:"https://www.nytimes.com/section/magazine"}]},{columnWidth:4,heading:"U.S. Politics",type:"links",style:{marginLeft:"2rem"},links:[{copy:"2024 Elections",link:"https://www.nytimes.com/news-event/2024-election"},{copy:"Supreme Court",link:"https://www.nytimes.com/topic/organization/us-supreme-court"},{copy:"Congress",link:"https://www.nytimes.com/topic/organization/us-congress"},{copy:"Biden Administration",link:"https://www.nytimes.com/spotlight/joe-biden"}]},{columnWidth:4,heading:"Top Stories",type:"links",links:[{copy:"Trump Investigations",link:"https://www.nytimes.com/news-event/donald-trump-investigations"},{copy:"Immigration",link:"https://www.nytimes.com/news-event/immigration-us"},{copy:"Abortion",link:"https://www.nytimes.com/spotlight/abortion-news"},{copy:"The Eric Adams Administration",link:"https://www.nytimes.com/spotlight/eric-adams-mayor-nyc"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"The Morning",description:"Make sense of the days news and ideas.",link:"https://www.nytimes.com/newsletters/morning-briefing",thumbnailImage:x.a},{title:"The Upshot",description:"Analysis that explains politics, policy and everyday life.",link:"https://www.nytimes.com/newsletters/upshot",thumbnailImage:E.a}]},{type:"hamburgerSpacer",hamburgerColumnWidth:1,columnWidth:0},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"The Daily",description:"The biggest stories of our time, in 20 minutes a day.",link:"https://www.nytimes.com/column/the-daily",thumbnailImage:"https://static01.nyt.com/images/2017/01/29/podcasts/the-daily-album-art/the-daily-album-art-square320-v5.jpg?quality=75&auto=webp&disable=upscale"},{title:"The Run-Up",description:"On the campaign trail with Astead Herndon.",link:"https://www.nytimes.com/column/election-run-up-podcast",thumbnailBorder:!0,thumbnailImage:"https://static01.nyt.com/images/2022/08/29/podcasts/the-run-up-album-art/the-run-up-album-art-thumbLarge.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/section/world",name:"World",dropdown:[{columnWidth:1},{columnWidth:4,hamburgerColumnWidth:5,heading:"Sections",type:"links",innerGridColumnCount:2,columns:[[{copy:"World",link:"https://www.nytimes.com/section/world"},{copy:"Africa",link:"https://www.nytimes.com/section/world/africa"},{copy:"Americas",link:"https://www.nytimes.com/section/world/americas"},{copy:"Asia",link:"https://www.nytimes.com/section/world/asia"},{copy:"Australia",link:"https://www.nytimes.com/section/world/australia"},{copy:"Canada",link:"https://www.nytimes.com/section/world/canada"}],[{copy:"Europe",link:"https://www.nytimes.com/section/world/europe"},{copy:"Middle East",link:"https://www.nytimes.com/section/world/middleeast"},{copy:"Science",link:"https://www.nytimes.com/section/science"},{copy:"Climate",link:"https://www.nytimes.com/section/climate"},{copy:"Health",link:"https://www.nytimes.com/section/health"},{copy:"Obituaries",link:"https://www.nytimes.com/section/obituaries"}]]},{columnWidth:1},{columnWidth:5,heading:"Top Stories",type:"links",links:[{copy:"Israel-Hamas War",link:"https://www.nytimes.com/news-event/israel-hamas-gaza"},{copy:"Russia-Ukraine War",link:"https://www.nytimes.com/news-event/ukraine-russia"}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",items:[{title:"Morning Briefing: Europe",description:"Get what you need to know to start your day.",link:"https://www.nytimes.com/newsletters/morning-briefing-europe",thumbnailImage:p.a},{title:"The Interpreter",description:"Original analysis on the weeks biggest global stories.",link:"https://www.nytimes.com/newsletters/the-interpreter",thumbnailImage:w.a}]},{columnWidth:4,heading:"Newsletters",hideHeading:!0,footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Australia Letter",description:"News, features and opinion for readers in the region.",link:"https://www.nytimes.com/newsletters/australia-letter",thumbnailImage:o.a},{title:"Canada Letter",description:"Backstories and analysis from our Canadian correspondents.",link:"https://www.nytimes.com/newsletters/canada-letter",thumbnailImage:l.a}]}]},{url:"https://www.nytimes.com/section/business",name:"Business",dropdown:[{columnWidth:1},{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"Business",link:"https://www.nytimes.com/section/business"},{copy:"Tech",link:"https://www.nytimes.com/section/technology"},{copy:"Economy",link:"https://www.nytimes.com/section/business/economy"},{copy:"Media",link:"https://www.nytimes.com/section/business/media"},{copy:"Finance and Markets",link:"https://www.nytimes.com/section/markets-overview"}]},{columnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"DealBook",link:"https://www.nytimes.com/section/business/dealbook"},{copy:"Personal Tech",link:"https://www.nytimes.com/section/technology/personaltech"},{copy:"Energy Transition",link:"https://www.nytimes.com/section/business/energy-environment"},{copy:"Your Money",link:"https://www.nytimes.com/section/your-money"}]},{columnWidth:5,heading:"Top Stories",type:"links",links:[{copy:"U.S. Economy",link:"https://www.nytimes.com/news-event/economy-business-us"},{copy:"Stock Market",link:"https://www.nytimes.com/section/markets-overview"},{copy:"Artificial Intelligence",link:"https://www.nytimes.com/spotlight/artificial-intelligence"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"DealBook",description:"The most crucial business and policy news you need to know.",link:"https://www.nytimes.com/newsletters/dealbook",thumbnailImage:d.a}]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Hard Fork",description:"Our tech journalists help you make sense of the rapidly changing tech world.",link:"https://www.nytimes.com/column/hard-fork",thumbnailImage:"https://static01.nyt.com/images/2022/09/28/podcasts/hard-fork-album-art/hard-fork-album-art-square320-v2.png?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/section/arts",name:"Arts",dropdown:[{columnWidth:1},{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"Today's Arts",link:"https://www.nytimes.com/section/arts"},{copy:"Books",link:"https://www.nytimes.com/section/books"},{copy:"Best Sellers",link:"https://www.nytimes.com/books/best-sellers"},{copy:"Dance",link:"https://www.nytimes.com/section/arts/dance"},{copy:"Movies",link:"https://www.nytimes.com/section/movies"},{copy:"Music",link:"https://www.nytimes.com/section/arts/music"}]},{columnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"Television",link:"https://www.nytimes.com/section/arts/television"},{copy:"Theater",link:"https://www.nytimes.com/section/theater"},{copy:"Pop Culture",link:"https://www.nytimes.com/spotlight/pop-culture"},{copy:"T Magazine",link:"https://www.nytimes.com/section/t-magazine"},{copy:"Visual Arts",link:"https://www.nytimes.com/section/arts/design"}]},{columnWidth:5,heading:"Recommendations",type:"links",links:[{copy:"Best of 2023",link:"https://www.nytimes.com/spotlight/best-of"},{copy:"Award Season",link:"https://www.nytimes.com/news-event/awards-season"},{copy:"Critics Picks",link:"https://www.nytimes.com/spotlight/critics-picks"},{copy:"What to Read",link:"https://www.nytimes.com/spotlight/books-to-read"},{copy:"What to Watch",link:"https://www.nytimes.com/spotlight/what-to-watch"},{copy:"What to Listen To",link:"https://www.nytimes.com/column/playlist"},{copy:"5 Minutes to Make You Love Music",link:"https://www.nytimes.com/interactive/2023/10/27/arts/music/music-fivemins-collection.html"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Read Like the Wind",description:"Book recommendations from our critics.",link:"https://www.nytimes.com/newsletters/read-like-the-wind",thumbnailImage:b.a},{title:"Watching",description:"Streaming TV and movie recommendations.",link:"https://www.nytimes.com/newsletters/watching",thumbnailImage:C.a}]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Book Review",description:"The podcast that takes you inside the literary world.",link:"https://www.nytimes.com/column/book-review-podcast",thumbnailImage:"https://static01.nyt.com/images/2018/03/27/books/book-review-album-art-v2/book-review-album-art-v2-thumbLarge-v3.jpg?quality=75&auto=webp&disable=upscale"},{title:"Popcast",description:"Pop music news, new songs and albums, and artists of note.",link:"https://www.nytimes.com/column/popcast-pop-music-podcast",thumbnailImage:"https://static01.nyt.com/images/2011/05/20/multimedia/music-popcast/music-popcast-thumbLarge-v3.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/spotlight/lifestyle",name:"Lifestyle",dropdown:[{columnWidth:1},{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"Lifestyle",link:"https://www.nytimes.com/spotlight/lifestyle"},{copy:"Well",link:"https://www.nytimes.com/section/well"},{copy:"Travel",link:"https://www.nytimes.com/section/travel"},{copy:"Style",link:"https://www.nytimes.com/section/style"},{copy:"Real Estate",link:"https://www.nytimes.com/section/realestate"},{copy:"Food",link:"https://www.nytimes.com/section/food"}]},{columnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"Fashion",link:"https://www.nytimes.com/section/fashion"},{copy:"Love",link:"https://www.nytimes.com/section/fashion/weddings"},{copy:"Your Money",link:"https://www.nytimes.com/section/your-money"},{copy:"Personal Tech",link:"https://www.nytimes.com/section/technology/personaltech"},{copy:"T Magazine",link:"https://www.nytimes.com/section/t-magazine"}]},{columnWidth:3,heading:"Columns",type:"links",links:[{copy:"Modern Love",link:"https://www.nytimes.com/column/modern-love"},{copy:"The Hunt",link:"https://www.nytimes.com/column/the-hunt"},{copy:"Social Qs",link:"https://www.nytimes.com/column/social-qs"},{copy:"The Ethicist",link:"https://www.nytimes.com/column/the-ethicist"}]},{columnWidth:2,heading:"Well",type:"links",links:[{copy:"Eat",link:"https://www.nytimes.com/section/well/eat"},{copy:"Move",link:"https://www.nytimes.com/section/well/move"},{copy:"Mind",link:"https://www.nytimes.com/section/well/mind"},{copy:"Family",link:"https://www.nytimes.com/section/well/family"},{copy:"Live",link:"https://www.nytimes.com/section/well/live"},{copy:"Ask Well",link:"https://www.nytimes.com/column/ask-well"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Open Thread",description:"The latest news on what we wear, by our chief fashion critic.",link:"https://www.nytimes.com/newsletters/open-thread-fashion",thumbnailImage:y.a},{title:"Love Letter",description:"Real stories of relationship highs, lows and woes.",link:"https://www.nytimes.com/newsletters/love-letter",thumbnailImage:g.a}]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Modern Love",description:"The complicated love lives of real people.",link:"https://www.nytimes.com/column/modern-love-podcast",thumbnailImage:"https://static01.nyt.com/images/2020/09/21/podcasts/modernlove-logo/modernlove-logo-thumbLarge-v3.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/section/opinion",name:"Opinion",dropdown:[{columnWidth:1},{columnWidth:2,hamburgerColumnWidth:3,heading:"Sections",type:"links",links:[{copy:"Opinion",link:"https://www.nytimes.com/section/opinion"},{copy:"Guest Essays",link:"https://www.nytimes.com/section/opinion/contributors"},{copy:"Editorials",link:"https://www.nytimes.com/section/opinion/editorials"},{copy:"Op-Docs",link:"https://www.nytimes.com/column/op-docs"},{copy:"Videos",link:"https://www.nytimes.com/spotlight/opinion-video"},{copy:"Letters",link:"https://www.nytimes.com/section/opinion/letters"}]},{columnWidth:2,hamburgerColumnWidth:3,heading:"Topics",type:"links",links:[{copy:"Politics",link:"https://www.nytimes.com/section/opinion/politics"},{copy:"World",link:"https://www.nytimes.com/section/opinion/international-world"},{copy:"Business",link:"https://www.nytimes.com/section/opinion/business-economics"},{copy:"Tech",link:"https://www.nytimes.com/section/opinion/technology"},{copy:"Climate",link:"https://www.nytimes.com/section/opinion/environment"},{copy:"Health",link:"https://www.nytimes.com/section/opinion/health"},{copy:"Culture",link:"https://www.nytimes.com/section/opinion/culture"}]},{columnWidth:1},{columnWidth:9,heading:"Columnists",type:"links",innerGridColumnCount:3,columns:[[{copy:"Charles M. Blow",link:"https://www.nytimes.com/by/charles-m-blow"},{copy:"Jamelle Bouie",link:"https://www.nytimes.com/by/jamelle-bouie"},{copy:"David Brooks",link:"https://www.nytimes.com/by/david-brooks"},{copy:"Gail Collins",link:"https://www.nytimes.com/by/gail-collins"},{copy:"Ross Douthat",link:"https://www.nytimes.com/by/ross-douthat"},{copy:"Maureen Dowd",link:"https://www.nytimes.com/by/maureen-dowd"},{copy:"David French",link:"https://www.nytimes.com/by/david-french"}],[{copy:"Thomas L. Friedman",link:"https://www.nytimes.com/by/thomas-l-friedman"},{copy:"Michelle Goldberg",link:"https://www.nytimes.com/by/michelle-goldberg"},{copy:"Ezra Klein",link:"https://www.nytimes.com/by/ezra-klein"},{copy:"Nicholas Kristof",link:"https://www.nytimes.com/by/nicholas-kristof"},{copy:"Paul Krugman",link:"https://www.nytimes.com/by/paul-krugman"},{copy:"Carlos Lozada",link:"https://www.nytimes.com/by/carlos-lozada"}],[{copy:"Tressie McMillan Cottom",link:"https://www.nytimes.com/by/tressie-mcmillan-cottom"},{copy:"Pamela Paul",link:"https://www.nytimes.com/by/pamela-paul"},{copy:"Lydia Polgreen",link:"https://www.nytimes.com/by/lydia-polgreen"},{copy:"Bret Stephens",link:"https://www.nytimes.com/by/bret-stephens"},{copy:"Zeynep Tufekci",link:"https://www.nytimes.com/by/zeynep-tufekci"}]]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Matter of Opinion",description:"Thoughts, aloud. With Michelle Cottle, Ross Douthat, Carlos Lozada and Lydia Polgreen.",link:"https://www.nytimes.com/column/matter-of-opinion",thumbnailImage:"https://static01.nyt.com/images/2023/05/08/podcasts/matter-of-opinion-album-art/matter-of-opinion-album-art-thumbLarge-v2.jpg?quality=75&auto=webp&disable=upscale"},{title:"The Ezra Klein Show",description:"Discussions of ideas that matter, plus book recommendations.",link:"https://www.nytimes.com/column/ezra-klein-podcast",thumbnailImage:"https://static01.nyt.com/images/2021/01/12/podcasts/ezra-klein-album-art/ezra-klein-album-art-square320-v2.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/spotlight/podcasts",name:"Audio",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Audio",type:"brand",link:"https://www.nytimes.com/spotlight/podcasts",description:"Podcasts and narrated articles covering news, tech, culture and more.",footer:{copy:"Download the Audio app on iOS.",link:"https://www.nytimes.com/audio/app"}},{columnWidth:6,heading:"Listen",type:"links",innerGridColumnCount:2,footer:{copy:"See all audio",link:"https://www.nytimes.com/spotlight/podcasts"},columns:[[{copy:"The Headlines",link:"https://www.nytimes.com/column/the-headlines"},{copy:"The Daily",link:"https://www.nytimes.com/column/the-daily"},{copy:"Hard Fork",link:"https://www.nytimes.com/column/hard-fork"},{copy:"The Ezra Klein Show",link:"https://www.nytimes.com/column/ezra-klein-podcast"},{copy:"Matter of Opinion",link:"https://www.nytimes.com/column/matter-of-opinion"},{copy:"Serial Productions",link:"https://www.nytimes.com/interactive/2022/podcasts/serial-productions.html"}],[{copy:"The Book Review Podcast",link:"https://www.nytimes.com/column/book-review-podcast"},{copy:"Modern Love",link:"https://www.nytimes.com/column/modern-love-podcast"},{copy:"The Run-Up",link:"https://www.nytimes.com/column/election-run-up-podcast"},{copy:"Popcast",link:"https://www.nytimes.com/column/popcast-pop-music-podcast"},{copy:"Reporter Reads",link:"https://www.nytimes.com/spotlight/reporter-reads"},{copy:"The Sunday Read",link:"https://www.nytimes.com/spotlight/the-sunday-read"}]]},{columnWidth:4,heading:"Featured",type:"thumbnailContent",items:[{title:"The Headlines",description:"Your morning listen. Top stories, in 5 minutes.",link:"https://www.nytimes.com/column/the-headlines",thumbnailImage:"https://static01.nyt.com/images/2022/10/12/podcasts/headlines-albumartwork-audioapp-2/headlines-albumartwork-audioapp-2-thumbLarge.png?quality=75&auto=webp&disable=upscale"},{title:"The Kids of Rutherford County",description:"A series about how one county illegally jailed children.",link:"https://www.nytimes.com/2023/10/19/podcasts/serial-kids-rutherford-county.html",thumbnailImage:_.a},{title:"Reporter Reads",description:"Recent articles read by the reporters behind them.",link:"https://www.nytimes.com/spotlight/reporter-reads",thumbnailImage:O.a}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},items:[{title:"Audio",description:"Our editors share their favorite listens from the New York Times Audio app.",link:"https://www.nytimes.com/newsletters/audio",thumbnailImage:a.a}]}]},{url:"https://www.nytimes.com/crosswords",name:"Games",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Games",type:"brand",link:"https://www.nytimes.com/crosswords",description:"Word games, logic puzzles and crosswords, including an extensive archive."},{columnWidth:3,heading:"Play",type:"linksWithIcons",links:[{copy:"Spelling Bee",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/spelling-bee.svg",link:"https://www.nytimes.com/puzzles/spelling-bee"},{copy:"The Mini Crossword",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/mini.svg",link:"https://www.nytimes.com/crosswords/game/mini"},{copy:"Wordle",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/wordle.svg",link:"https://www.nytimes.com/games/wordle/index.html"},{copy:"The Crossword",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/daily.svg",link:"https://www.nytimes.com/crosswords/game/daily/"},{copy:"Vertex",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/vertex.svg",link:"https://www.nytimes.com/puzzles/vertex"}]},{columnWidth:3,heading:"Play",hideHeading:!0,type:"linksWithIcons",links:[{copy:"Connections",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/connections.svg",link:"https://www.nytimes.com/games/connections"},{copy:"Sudoku",icon:"https://www.nytimes.com/games-assets/v2/assets/expansion-games/sudoku-card-icon.svg",link:"https://www.nytimes.com/puzzles/sudoku"},{copy:"Letter Boxed",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/letter-boxed.svg",link:"https://www.nytimes.com/puzzles/letter-boxed"},{copy:"Tiles",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/tiles.svg",link:"https://www.nytimes.com/puzzles/tiles"}]},{columnWidth:4,heading:"Community",type:"links",links:[{copy:"Spelling Bee Forum",link:"https://www.nytimes.com/spotlight/spelling-bee-forum"},{copy:"Wordplay Column",link:"https://www.nytimes.com/spotlight/daily-crossword-column"},{copy:"Wordle Review",link:"https://www.nytimes.com/spotlight/wordle-review"},{copy:"Submit a Crossword",link:"https://www.nytimes.com/article/submit-crossword-puzzles-the-new-york-times.html"},{copy:"Meet Our Crossword Constructors",link:"https://www.nytimes.com/spotlight/puzzle-making"},{copy:"Mini to Maestro",link:"https://www.nytimes.com/2022/09/19/crosswords/mini-to-maestro-part-1.html"},{copy:"Wordlebot",link:"https://www.nytimes.com/interactive/2022/upshot/wordle-bot.html"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Gameplay",description:"Puzzles, brain teasers, solving tips and more.",link:"https://www.nytimes.com/newsletters/gameplay",thumbnailImage:h.a}]}]},{url:"https://cooking.nytimes.com/",name:"Cooking",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Cooking",type:"brand",link:"https://cooking.nytimes.com/",description:"Recipes, advice and inspiration for everyday cooking, special occasions and more."},{columnWidth:3,hamburgerColumnWidth:4,heading:"Recipes",type:"links",innerGridColumnCount:2,columns:[[{copy:"Easy",link:"https://cooking.nytimes.com/topics/easy-recipes"},{copy:"Dinner",link:"https://cooking.nytimes.com/topics/dinner-recipes"},{copy:"Quick",link:"https://cooking.nytimes.com/68861692-nyt-cooking/43843372-quick-recipes"},{copy:"Healthy",link:"https://cooking.nytimes.com/topics/healthy-recipes"},{copy:"Breakfast",link:"https://cooking.nytimes.com/topics/breakfast"}],[{copy:"Vegetarian",link:"https://cooking.nytimes.com/topics/vegetarian"},{copy:"Vegan",link:"https://cooking.nytimes.com/topics/vegan-recipes"},{copy:"Chicken",link:"https://cooking.nytimes.com/topics/our-best-chicken-recipes"},{copy:"Pasta",link:"https://cooking.nytimes.com/topics/our-best-pasta-recipes"},{copy:"Dessert",link:"https://cooking.nytimes.com/topics/desserts"}]]},{columnWidth:3,heading:"Editors' Picks",type:"links",links:[{copy:"Soups and Stews",link:"https://cooking.nytimes.com/68861692-nyt-cooking/638891-best-soup-stew-recipes"},{copy:"Easy Weeknight",link:"https://cooking.nytimes.com/topics/easy-weeknight"},{copy:"Newest Recipes",link:"https://cooking.nytimes.com/68861692-nyt-cooking/32998034-our-newest-recipes"},{copy:"One-Pot Meals",link:"https://cooking.nytimes.com/68861692-nyt-cooking/2370458-one-pot-dinner-recipes"},{copy:"Slow Cooker Recipes",link:"https://cooking.nytimes.com/68861692-nyt-cooking/950138-amazing-slow-cooker-recipes"},{copy:"Comfort Food",link:"https://cooking.nytimes.com/topics/comfort-food"},{copy:"Party Recipes",link:"https://cooking.nytimes.com/topics/entertaining"}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",items:[{title:"The Cooking Newsletter",description:"Culinary inspiration from Sam Sifton and Melissa Clark.",link:"https://www.nytimes.com/newsletters/cooking",thumbnailImage:u.a},{title:"The Veggie",description:"Delicious vegetarian recipes and tips from Tanya Sichynsky.",link:"https://www.nytimes.com/newsletters/the-veggie",thumbnailImage:T.a}]},{columnWidth:4,heading:"Newsletters",hideHeading:!0,type:"thumbnailContent",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},items:[{title:"Five Weeknight Dishes",description:"Dinner ideas for busy people from Emily Weinstein.",link:"https://www.nytimes.com/newsletters/five-weeknight-dishes",thumbnailImage:f.a}]}]},{url:"https://www.nytimes.com/wirecutter/",name:"Wirecutter",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Wirecutter",type:"brand",link:"https://www.nytimes.com/wirecutter",description:"Reviews and recommendations for thousands of products."},{columnWidth:3,heading:"Reviews",type:"links",links:[{copy:"Kitchen",link:"https://www.nytimes.com/wirecutter/kitchen-dining/"},{copy:"Tech",link:"https://www.nytimes.com/wirecutter/electronics/"},{copy:"Sleep",link:"https://www.nytimes.com/wirecutter/sleep/"},{copy:"Appliances",link:"https://www.nytimes.com/wirecutter/appliances/"},{copy:"Home and Garden",link:"https://www.nytimes.com/wirecutter/home-garden/"},{copy:"Moving",link:"https://www.nytimes.com/wirecutter/make-a-plan/moving/"}]},{columnWidth:3,heading:"Reviews",hideHeading:!0,type:"links",links:[{copy:"Travel",link:"https://www.nytimes.com/wirecutter/travel/"},{copy:"Gifts",link:"https://www.nytimes.com/wirecutter/gifts/"},{copy:"Deals",link:"https://www.nytimes.com/wirecutter/deals/"},{copy:"Baby and Kid",link:"https://www.nytimes.com/wirecutter/baby-kid/"},{copy:"Health and Fitness",link:"https://www.nytimes.com/wirecutter/health-fitness/"}]},{columnWidth:4,heading:"The Best...",type:"links",links:[{copy:"Air Purifier",link:"https://www.nytimes.com/wirecutter/reviews/best-air-purifier/"},{copy:"Electric Toothbrush",link:"https://www.nytimes.com/wirecutter/reviews/best-electric-toothbrush/"},{copy:"Pressure Washer",link:"https://www.nytimes.com/wirecutter/reviews/best-pressure-washer/"},{copy:"Cordless Stick Vacuum",link:"https://www.nytimes.com/wirecutter/reviews/best-cordless-stick-vacuum/"},{copy:"Office Chair",link:"https://www.nytimes.com/wirecutter/reviews/best-office-chair/"},{copy:"Robot Vacuum",link:"https://www.nytimes.com/wirecutter/reviews/best-robot-vacuum/"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"The Recommendation",description:"The best independent reviews, expert advice and intensively researched deals.",link:"https://www.nytimes.com/newsletters/the-recommendation",thumbnailImage:k.a},{title:"Clean Everything",description:"Step-by-step advice on how to keep everything in your home squeaky clean.",link:"https://www.nytimes.com/newsletters/clean-everything",thumbnailImage:c.a}]}]},{url:"https://theathletic.com/",name:"The Athletic",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"The Athletic",type:"brand",link:"https://theathletic.com/",description:"Personalized coverage of your sports teams and leagues."},{columnWidth:3,hamburgerColumnWidth:5,heading:"Leagues",type:"links",innerGridColumnCount:2,columns:[[{copy:"NFL",link:"https://theathletic.com/nfl/"},{copy:"MLB",link:"https://theathletic.com/mlb/"},{copy:"NBA",link:"https://theathletic.com/nba/"},{copy:"Premier League",link:"https://theathletic.com/football/premier-league/"},{copy:"NCAAF",link:"https://theathletic.com/college-football/"},{copy:"NCAAM",link:"https://theathletic.com/college-basketball/"},{copy:"NHL",link:"https://theathletic.com/nhl/"}],[{copy:"NCAAW",link:"https://theathletic.com/womens-college-basketball/ "},{copy:"MLS",link:"https://theathletic.com/football/mls/"},{copy:"Formula 1",link:"https://theathletic.com/formula-1/"},{copy:"NWSL",link:"https://theathletic.com/football/nwsl/"},{copy:"Golf",link:"https://theathletic.com/golf/"}]]},{columnWidth:3,heading:"Top Stories",type:"links",links:[{copy:"Must-Read Stories",link:"https://theathletic.com/tag/a1-must-read-stories/"},{copy:"NFL Playoffs",link:"https://theathletic.com/nfl/schedule/"},{copy:"MLB Free Agency",link:"https://theathletic.com/5029170/2023/11/06/free-agents-mlb-list/"}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",items:[{title:"The Pulse",description:"Delivering the top stories in sports, Sunday to Friday.",link:"https://theathletic.com/newsletters/the-pulse",thumbnailImage:v.a},{title:"The Windup",description:"The biggest stories in baseball, by Levi Weaver with Ken Rosenthal.",link:"https://theathletic.com/newsletters/the-windup",thumbnailImage:S.a}]},{columnWidth:4,type:"thumbnailContent",heading:"Newsletters",hideHeading:!0,items:[{title:"The Bounce",description:"Essential NBA news from Zach Harper and Shams Charania.",link:"https://theathletic.com/newsletters/the-bounce",thumbnailImage:s.a},{title:"Full Time",description:"The biggest women's soccer stories, from Emily Olsen, Meg Linehan & Steph Yang",link:"https://theathletic.com/newsletters/full-time",thumbnailImage:m.a}]}]}],M=function(e){var t=e.children;return r.a.Children.only(r.a.cloneElement(t,{data:P}))}},Kjui:function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var i=n("VkAN"),r=n.n(i),a=n("lSNA"),o=n.n(a),s=n("gcR/"),l=n.n(s),c=n("J4zp"),u=n.n(c),d=n("q1tI"),p=n.n(d),f=n("Jqp9"),m=n("eFc+"),h=n.n(m),g=n("rI8Z"),y=(n("KG2r"),n("NQ6n")),v=n("YhMm"),b=n("JJ2H"),_=n("hbBX"),w=n("tOSR"),x=n("8iTF"),k=n("SYzA"),O=n("Tonn"),E=n("udJG"),T=n("fZdH"),C=n("5xNV"),S=n("X6oL"),P=n("9/5/"),M=n.n(P),I=n("PCFz"),A=n("/tu1"),j=n("wXC7"),L=n.n(j),R="@media (max-width: ".concat(L.a.breakpoint.maxMobileContentWidth,"px)"),N=Object(f.css)("background-color:",L.a.color.white,";border:solid 1px #dfdfdf;border-radius:17px;display:none;font-family:",L.a.font.franklinBase,";font-size:12px;height:34px;letter-spacing:0.2px;line-height:1;padding:5px 0 3px;position:relative;top:-1px;width:82px;",R,"{width:76px;}&:hover{border-color:",L.a.color.gray50,";}@media (hover:none) and (pointer:coarse) and (max-width:600px) and (min-width:375px){display:inline-block;}"),D=n("+g8y");function B(e){var t=e.shareItemClass,n=e.url,i=Object(S.useTracking)().trackEvent,r=Object(d.useRef)(null),a=Object(d.useState)(!1),o=u()(a,2),s=o[0],c=o[1];return Object(d.useEffect)((function(){var e=function(){r.current&&r.current.offsetTop<window.pageYOffset+window.innerHeight&&!s&&(i({event:"impression",module:{name:"readinapp-tooltip"}}),c(!0))},t=M()((function(){e(),window.removeEventListener("scroll",t)}),500);return window.addEventListener("scroll",t),function(){window.removeEventListener("scroll",t)}}),[s,i]),l()("li",{className:Object(f.cx)(D.i,t)},void 0,p.a.createElement(I.a,{ref:r,redirectUri:Object(A.d)(n),className:N,trackingObject:{eventData:{type:"click"},module:{name:"readinapp-tooltip",element:{name:"goto-app",label:"Read in app",url:n}}}},"Read in app"))}B.displayName="ReadInApp";var z,F=B,U=n("2PZ4"),H={HEADER:"header",INSTORYMASTHEAD:"inStoryMasthead",FOOTER:"footer"},W="Social Media Share buttons, Save button, and Comments Panel with current comment count";function q(e){var t,n,i=e.share,r=e.className,a=e.pageType,s=e.overrideSharetoolAriaLabel,c=e.modalArrowPosition,m=e.position,h=e.forceArrowPosition,S=e.tooltipAlign,P=e.suppressGiftArticleTooltip,M=e.hasMedia,I=e.isOpinion,A=e.commentsComponent,j=e.disabledButtons,L=e.linkedCommentsArticle,R=Object(d.useRef)(null),N=i.url,B=i.uri,z=Object(d.useState)(!1),q=u()(z,2),V=q[0],G=q[1],Y=Object(d.useState)(!1),Z=u()(Y,2),X=Z[0],J=Z[1],K=Object(f.useTheme)(),$=Object(k.a)(),Q=Object(E.b)({article:i}),ee=Q.readyAppDownloadTarget,te=Q.inAppDownloadTarget,ne=Object(T.a)();Object(C.c)(ne);var ie=Object(d.useCallback)((function(e){!e||V||X||(G(!0),J(!0)),!e&&V&&G(!1),!e&&X&&J(!1)}),[V,X]),re="Article"===(null==i?void 0:i.__typename),ae="header";m===H.INSTORYMASTHEAD?ae="masthead":m===H.FOOTER&&(ae="footer");var oe=L||i,se=void 0!==M||void 0!==I?D.d(M,I,K.opinionHeaderRedesign,K.isShortForm):null,le=Object(x.h)(null==oe||null===(t=oe.commentProperties)||void 0===t?void 0:t.status)&&!j.includes("commennts");if(Object(O.a)($,N))return null;var ce=!j.includes("gift"),ue=function(e){var t="bigBottom"!==e?"actionbar-button":void 0;return void 0===A?l()(b.b,{buttonClass:t,article:oe,position:e||m||"header",viewCommentsInNewWindow:!!L}):!1!==A?p.a.cloneElement(A,{position:e||m,buttonClass:t}):null},de={actionBarTheme:K.actionBarTheme,dropShadow:K.actionBarDropShadow},pe=j.length>=1,fe=s||W;return p.a.createElement("div",{role:"toolbar","data-testid":"share-tools",ref:R,"aria-label":pe?void 0:Object(g.a)(fe),className:D.m(de)},m===H.FOOTER&&l()("div",{className:Object(f.cx)(D.k,D.b,D.a)},void 0,ue("bigBottom")),l()("div",{className:Object(f.cx)(D.k,se,r,(n={},o()(n,D.b,m===H.FOOTER),o()(n,D.f,"rightToLeft"===(null==K?void 0:K.languageDirection)),n))},void 0,l()("ul",{className:m!==H.INSTORYMASTHEAD?D.l:void 0},void 0,ce&&l()("li",{className:Object(f.cx)(D.i,D.j)},void 0,l()(v.a,{pageType:a,share:i,tooltipAlign:S,forceOpen:X,toggleGiftArticleMenu:ie,suppressGiftArticleTooltip:P,trackingRegion:ae})),!j.includes("share")&&l()("li",{className:Object(f.cx)(D.i)},void 0,l()(y.b,{buttonContent:l()(U.b,{className:Object(f.cx)(D.h,D.c)}),pageType:a,share:i,modalArrowPosition:c,forceArrowPosition:h,toggleGiftArticleMenu:ie,forceCloseModal:V,className:Object(f.cx)(D.e,"actionbar-button"),trackingRegion:ae,hasGiftArticleButtonSibling:ce})),!j.includes("save")&&l()("li",{className:Object(f.cx)(D.i,"save-button")},void 0,l()(_.a,{url:i.url,uri:B,moduleName:"share-tools",buttonRegion:ae},void 0,l()(w.a,{svgStyleClass:D.g,buttonClass:"actionbar-button"}))),le&&l()("li",{className:Object(f.cx)(D.i,"commentAdjustClass")},void 0,ue()),m!==H.INSTORYMASTHEAD&&re&&!Object(C.b)(ne)&&ee&&!te&&l()(F,{shareItemClass:Object(f.cx)(D.i),url:N}))))}q.displayName="ActionBar",q.fragments={share:h()(z||(z=r()(["\n    fragment ShareToolbar_share on CreativeWork {\n      headline {\n        default\n      }\n      summary\n      ... on Published {\n        url\n      }\n      commentProperties {\n        status\n      }\n      ...ShareButton_share\n      ...CommentCountContainer_article\n    }\n    ","\n    ","\n  "])),y.b.fragments.share,b.b.fragments.article)},q.defaultProps={pageType:"article",share:void 0,linkedCommentsArticle:void 0,className:void 0,position:void 0,overrideSharetoolAriaLabel:void 0,forceArrowPosition:!1,modalArrowPosition:void 0,data:{},tooltipAlign:void 0,suppressGiftArticleTooltip:!1,hasMedia:void 0,isOpinion:void 0,disabledButtons:[],commentsComponent:void 0};t.b=q},Kn2l:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.RelatedLinks=void 0,Object.defineProperty(t,"RelatedLinksDescription",{enumerable:!0,get:function(){return s.RelatedLinksDescription}}),Object.defineProperty(t,"RelatedLinksHeadline",{enumerable:!0,get:function(){return s.RelatedLinksHeadline}}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),i(n("OB6K"))),o=i(n("Mqhu")),s=n("hFCc"),l=function(e){var t=e.children,n=e.related,i=e.displayStyle,l=e.className,c=r.default.Children.toArray(t).length>0,u=(null==n?void 0:n.length)||0,d=u>0;return r.default.createElement(a.default,{theme:{displayStyle:i.toLowerCase()}},r.default.createElement(s.StyledRelatedLinks,{displayStyle:i.toLowerCase(),className:l,hasChildren:c,hasLinks:d},t,n&&u>0&&r.default.createElement(o.default.Provider,{value:u},r.default.createElement(s.RelatedLinksSeries,{hasHeadlineorDescription:c},n))))};t.RelatedLinks=l,l.displayName="RelatedLinks",l.defaultProps={children:null,related:null,displayStyle:"STANDARD",className:void 0};var c=l;t.default=c},Kpeq:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(t,n){return function(e,t,n){var i=e.text;return(e.formats||[]).forEach((function(e){i=(0,r.default)(e,i,t,n)})),i}(t,n,e)}};var r=i(n("q94/"))},"L+PM":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.roleTreatmentStyles=t.roleContainerClass=t.RoleText=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=i(n("WThh")),s=n("f/4F"),l=n("3sMT"),c=(0,o.default)(["medium"]),u=(0,r.css)("width:100%;");t.roleContainerClass=u;var d=(0,r.themeFn)("opinionHeaderRedesign",{true:(0,r.css)(s.headshotDesktopBreakpoint,"{font-size:",a.default.font.size(15),";line-height:",a.default.font.size(20),";}")}),p=(0,r.themeFn)("treatment",{none:function(e){return(0,r.css)("font-family:",a.default.font.franklinBase,";font-weight:",a.default.font.weight.medium,";letter-spacing:0.01em;margin-bottom:",a.default.font.size(8),";margin-top:",a.default.font.size(2),";",c(e,{fontSize:[14,15],lineHeight:[18,20]}),";")},feature:function(e){return(0,r.css)("font-family:",a.default.font.franklinBase,";font-weight:",a.default.font.weight.medium,";letter-spacing:0.01em;margin-top:",a.default.font.size(2),";margin-bottom:",a.default.font.size(8),";",c(e,{fontSize:[14,15],lineHeight:[18,20]}),";")},opinion:function(e){return(0,r.css)("font-family:",a.default.font.franklinBase,";font-weight:",a.default.font.weight.medium,";font-style:normal;margin-bottom:",a.default.font.size(3),";",c(e,{fontSize:[13,15],lineHeight:[16,20]}),";")},magazine:function(e){return(0,r.css)("font-family:",a.default.font.magazineSansBase,";font-weight:",a.default.font.weight.medium,";margin-bottom:",a.default.font.size(8),";",c(e,{fontSize:[14,15],lineHeight:[18,20]}),";")},"t-magazine":function(e){return(0,r.css)("font-family:",a.default.font.tmagSansBase,";font-weight:",a.default.font.weight.book,";color:",l.color.content.secondary,";margin-bottom:",a.default.font.size(8),";margin-top:",a.default.font.size(2),";",c(e,{fontSize:[14,15],lineHeight:[18,20]}),";")}});t.roleTreatmentStyles=p;var f=(0,r.themeFn)("isShortForm",{true:(0,r.css)("{margin-top:0;margin-bottom:0.25rem;}")}),m=(0,r.styled)("p",{target:"e1wtpvyy0"})("color:",l.color.content.secondary,";",p,";",d,";",f,";",(function(e){return!e.theme.opinionHeaderRedesign&&"margin: 2px 0;"}),";",(function(e){return!e.theme.opinionHeaderRedesign&&"max-width: 483px;"}),";a,a:visited{color:",l.color.content.secondary,";text-decoration:underline;text-decoration-color:",l.color.content.quaternary,";}a:hover,a:focus{color:",l.color.content.secondary,";text-decoration:none;}");t.RoleText=m},L0Nc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return!isNaN(parseFloat(e))&&isFinite(e)};t.default=i},L1jB:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.responsiveCenteringClass=t.readTimeClass=t.getTimestampContainerClass=t.default=t.LabelContainer=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=i(n("WThh")),s=i(n("i+0r")),l=i(n("TvEp")),c=i(n("oKgi")),u=i(n("h58Z")),d=i(n("I0Yx")),p=n("FZbM"),f=n("SJcc"),m=i(n("HvhO")),h=n("0Rhs"),g=n("9tMe"),y=n("f/4F"),v=n("3sMT"),b=(0,o.default)(["medium"]),_=(0,r.css)("margin-left:20px;margin-right:20px;width:calc(100% - 40px);max-width:600px;",a.default.breakpoint.small,"{margin-left:auto;margin-right:auto;}",a.default.breakpoint.medium,"{width:600px;}",a.default.print,";");t.responsiveCenteringClass=_;t.readTimeClass=function(e){return(0,r.css)("margin-left:","opinion"===e.theme.section?"10px":"auto",";min-width:80px;text-align:","opinion"===e.theme.section?"left":"right",";font-size:",a.default.font.size(11),";margin-top:0;")};var w=(0,r.themeFn)("section",{opinion:(0,r.themeFn)("opinionHeaderRedesign",{true:(0,r.css)("justify-content:center;")})});t.getTimestampContainerClass=function(e){return(0,r.css)(_,";display:flex;align-items:flex-end;margin-top:",a.default.font.size(4),";justify-content:space-between;margin-bottom:","opinion"===e.theme.section&&e.theme.opinionHeaderRedesign?a.default.font.size(28):a.default.headerSpacing.bottom,";",a.default.breakpoint.medium,"{margin-bottom:","opinion"===e.theme.section&&e.theme.opinionHeaderRedesign?a.default.font.size(32):a.default.headerSpacing.bottom,";}",w(e),";")};var x=(0,r.themeFn)("section",{opinion:(0,r.themeFn)("opinionHeaderRedesign",{true:(0,r.css)("::before,::after{content:'';display:block;background-color:",v.color.background.tertiary,";width:100%;height:1px;}::before{margin-bottom:",a.default.font.size(8),";}::after{margin-top:",a.default.font.size(8),";}",a.default.breakpoint.mediumLarge,"{::before{margin-bottom:",a.default.font.size(y.headshotSpaceBetween),";}::after{margin-top:",a.default.font.size(y.headshotSpaceBetween),";}}")})}),k=(0,r.styled)("div",{target:"euiyums0"})("align-items:center;display:flex;margin-bottom:",(function(e){return"opinion"===e.theme.section&&e.theme.opinionHeaderRedesign?0:a.default.headerSpacing.bottom}),";",_,";",s.default,"{",a.default.print,";margin-bottom:0;}&:empty{display:none;}");t.LabelContainer=k;var O=function(e){return(null==(t=e)||null===(n=t.theme)||void 0===n||null===(i=n.media)||void 0===i||null===(r=i.props)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.media)||function(e){var t,n,i,r;return(null==e||null===(t=e.theme)||void 0===t||null===(n=t.summary)||void 0===n||null===(i=n.props)||void 0===i||null===(r=i.children)||void 0===r?void 0:r.length)>0}(e)?"margin-bottom: 0.5rem":"margin-bottom: 1.25rem";var t,n,i,r,a},E=(0,r.themeFn)("section",{none:O,opinion:(0,r.themeFn)("opinionHeaderRedesign",{none:O,true:(0,r.css)("margin-bottom:",a.default.font.size(18),";text-align:center;::before{content:'';display:block;margin:",a.default.font.size(12)," auto ",a.default.font.size(28),";background-color:",v.color.background.tertiary,";width:",a.default.font.size(140),";height:1px;}")})}),T=(0,r.themeFn)("isShortForm",{true:(0,r.css)("{font-style:normal;margin-bottom:1rem;}")}),C=(0,r.themeFn)("section",{opinion:(0,r.themeFn)("opinionHeaderRedesign",{none:(0,r.css)("color:",v.color.content.primary,";font-weight:",a.default.font.weight.bold,";line-height:",a.default.font.size(12),";"),true:function(e){return(0,r.css)("margin:0 auto;",(0,g.opinionLogoTypographyFn)(e),";text-align:center;")}})}),S=(0,r.themeFn)("treatment",{none:(0,r.css)("color:",v.color.content.secondary,";"),feature:function(e){return(0,r.css)("color:",v.color.content.secondary,";",b(e,{textAlign:"rightToLeft"===e.theme.languageDirection?["right"]:[void 0,"left"]}),";")}}),P=(0,r.themeFn)("section",{opinion:(0,r.themeFn)("opinionHeaderRedesign",{true:(0,r.css)("text-align:center;")})}),M=(0,r.styled)("header",{target:"euiyums1"})("margin-bottom:",a.default.headerSpacing.bottom,";",a.default.headerSpacing.marginTop,";",h.headerLanguageDirectionFn,";",s.default,"{",h.labelTreatmentFn,";",C,";",a.default.print,";}",l.default,"{",E,";",h.heading1TreatmentFn,";",T,";",h.heading1LanguageDirectionFn,";",_,";margin-top:0;",a.default.breakpoint.medium,"{max-width:none;margin-left:auto;margin-right:auto;position:relative;width:600px;",a.default.print,";}}",c.default,"{",S,";",P,";",h.summaryLanguageDirectionFn," ",_,";",a.default.print,";}",u.default,"{display:inline-block;width:auto;",(function(e){return"opinion"===e.theme.section&&e.theme.opinionHeaderRedesign?(0,r.css)("margin:auto;"):(0,r.css)("margin-left:0;margin-top:0;margin-bottom:0;")}),"}",d.default,"{margin-right:15px;font-weight:",a.default.font.weight.bold,";font-size:14px;line-height:1;}.section-kicker{.opinion-bar{font-size:25px;}}.",f.totalBylineContainerClass,"{",_,";",x,";margin-top:0;margin-bottom:0;",(function(e){return"opinion"===e.theme.section?"margin: 30px auto;":null}),";}",m.default,"{margin-bottom:30px;margin-top:20px;",a.default.breakpoint.medium,"{margin-top:25px;}",a.default.breakpoint.mediumLarge,"{margin-bottom:43px;}}.",p.translationLinksClass,"{",_,";max-width:",a.default.breakpoint.textBodyWidth,"px;",a.default.printHide,";}",h.BylineTimestamp,"{margin-bottom:",a.default.grid.pageMargin,"px;color:",v.color.content.primary,";",a.default.print,";",h.bylineTimestampToneFn,";",h.bylineTimestampSectionFn,";",h.bylineTimestampLanguageDirectionFn,";}");t.default=M},LON6:function(e,t,n){"use strict";n.d(t,"b",(function(){return R}));var i=n("VkAN"),r=n.n(i),a=n("lSNA"),o=n.n(a),s=n("gcR/"),l=n.n(s),c=n("q1tI"),u=n.n(c),d=n("eFc+"),p=n.n(d),f=n("Jqp9"),m=n("Zc/f"),h=n.n(m),g=n("uVKy"),y=n.n(g),v=n("xHA4"),b=n("ZKN5"),_=n("fZdH"),w=n("NW2b"),x=n("YWmT"),k=function(e){var t=e.uri,n=e.name;return l()("span",{style:{position:"relative"},className:"styln-edit-storyline","data-storyline-uri":t,"data-storyline-module-name":n})};k.displayName="InternalOnlyEditStorylineButton";var O=k,E=n("Uri2"),T=n("sn4R"),C=n("J4zp"),S=n.n(C),P=n("hKI/"),M=n.n(P);var I,A=function(){var e=Object(c.useState)(!1),t=S()(e,2),n=t[0],i=t[1];return Object(c.useEffect)((function(){var e=M()((function(){i(Boolean(window.scrollY))}),1e3,{leading:!0});return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]),n},j=n("IHYJ"),L=v.storyPageTests.TRACKING_BEACON_TEST;function R(e){var t,n,i,r,a=null==e||null===(t=e.associatedAssets)||void 0===t||null===(n=t.some)||void 0===n?void 0:n.call(t,(function(e){return(null==e?void 0:e.region)===h.a.TOP_BANNER})),o=Object(g.canStorylineComposeMenu)(null==e||null===(i=e.storylines)||void 0===i||null===(r=i[0])||void 0===r?void 0:r.storyline);return!a&&o}function N(e){var t,n,i=e.storyline,r=e.uriOfActiveMenuLink,a=e.className,s=e.testName,c=e.ruleName,d=e.pageType,p=e.parentUri,m=e.region,h=e.isLiveRoute,g=A(),v=Object(E.a)();return null!==(t=Object(_.a)()[L.name])&&void 0!==t&&t.allocated&&Object(w.e)(L.name),v.components.hideStorytellingNav?null:u.a.createElement(u.a.Fragment,null,l()("style",{dangerouslySetInnerHTML:{__html:"#masthead-section-label, #masthead-bar-one { display: none }"}}),l()(x.a,{componentName:"menu",region:m,parentUri:p,testName:s,ruleName:c,pageType:d},void 0,(function(e){var t=e.trackImpression,s=e.trackInteraction;return l()(y.a,{className:Object(f.cx)(j.c,o()({},j.a,g),a),storyline:i,ruleName:c,uriOfActiveMenuLink:r,trackEvent:t,trackInteraction:s,isLiveRoute:h,HomepageLink:n||(n=l()(T.a,{region:m,parentUri:p,ruleName:c,pageType:d}))},t)})),l()(O,{uri:null==i?void 0:i.uri,name:"menu"}))}N.defaultProps={testName:null,className:void 0,isLiveRoute:!1},N.fragments={creativeWork:p()(I||(I=r()(["\n    fragment StorylineMenuBlock_creativeWork on CreativeWork {\n      storylines {\n        testName\n        ruleName\n        storyline {\n          uri\n          url\n          tone\n          displayName\n          hubAssets {\n            asset {\n              ...Asset_storyline\n            }\n          }\n          primaryAssets {\n            displayName\n            status\n            asset {\n              ...Asset_storyline\n              ... on LegacyCollection {\n                id\n                active\n                lastModified\n              }\n              ... on FeedPublication {\n                id\n                live\n              }\n            }\n          }\n        }\n      }\n      ...Asset_storyline\n    }\n\n    fragment Asset_storyline on CreativeWork {\n      ... on Published {\n        uri\n        url\n      }\n    }\n  "])))};var D=Object(b.a)(N);t.a=D},LOnR:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.textBalancerClass=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=(0,r.css)("display:block;",a.default.breakpoint.mediumLarge,"{display:inline-block;white-space:pre;}");t.textBalancerClass=o},LbdL:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OnsiteHeadline=void 0;var r=i(n("q1tI")),a=i(n("XlcC")),o=i(n("fpec")),s=n("V6Yu"),l=(n("EVBM"),n("AhCu")),c=function(e){var t=e.headline;if(!(0,s.hasContent)(t)||!t)return null;var n=t.content.map(a.default);return r.default.createElement("span",{className:l.headingClass},r.default.createElement("span",{id:"header-onsite-newsletter-headline"},r.default.createElement(o.default,{hangPunctuation:!0,content:t.content},n)))};t.OnsiteHeadline=c,c.displayName="OnsiteHeadline";var u=c;t.default=u},Lk5R:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("dp42")).default;t.default=r},Lkij:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var i=n("NW2b"),r=function(e){var t,n,i,r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=a?"Test: ".concat(a," - "):"";"dev"!==(null===(t=vi)||void 0===t||null===(n=t.env)||void 0===n?void 0:n.ENVIRONMENT)&&"local"!==(null===(i=vi)||void 0===i||null===(r=i.env)||void 0===r?void 0:r.ENVIRONMENT)||console.warn("".concat(o,"The function '").concat(e,"' is deprecated.  Please see src/shared/Abra/README.md for details."))};function a(){var e,t;return Boolean(null===(e=window)||void 0===e||null===(t=e.NYTD)||void 0===t?void 0:t.Abra.getAbraSync)}function o(e,t){var n,i;return r("isInVariant",e),(a()&&(null===(n=window)||void 0===n||null===(i=n.NYTD)||void 0===i?void 0:i.Abra.getAbraSync(e).variant))===t}function s(e){return r("reportExposure",e),!!a()&&(Object(i.e)(e),!0)}},LrP3:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("QILm")),a=i(n("W8MJ")),o=i(n("lwsE")),s=i(n("7W2i")),l=i(n("a1gu")),c=i(n("Nsbk")),u=i(n("6OwD")),d=["uploadDate","transcript","duration"];function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,l.default)(this,n)}}var f=function(e){(0,s.default)(n,e);var t=p(n);function n(e){var i,a=e.uploadDate,s=e.transcript,l=e.duration,c=(0,r.default)(e,d);return(0,o.default)(this,n),(i=t.call(this,c))["@type"]="VideoObject",i.uploadDate=a,i.transcript=s,i.duration=l,i}return(0,a.default)(n)}(u.default);t.default=f},M4W2:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lSNA"));function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,i){var r=function(e){return e.addEventListener("load",(function(){e.dataset.loaded=!0,n(e)})),e.addEventListener("error",(function(t){e.dataset.loaded=!0,e.dataset.error=!0,i(t)})),e},a=document.querySelector('script[src="'.concat(e,'"]'));if(a)return a.dataset.loaded?a.dataset.error?i():n(a):r(a);if(t.readyCode&&window[t.readyCode]&&("function"!=typeof window[t.readyCode]||!1!==window[t.readyCode]()))return n();var s=o({asyncProp:!0,deferProp:!0},t),l=s.asyncProp,c=s.deferProp,u=document.createElement("script");return u.src=e,u.async=l,u.defer=c,document.body.appendChild(u),r(u)}))};t.default=s},M5Mg:function(e,t,n){"use strict";var i,r=n("gcR/"),a=n.n(r),o=n("J4zp"),s=n.n(o),l=n("q1tI"),c=n.n(l),u=n("Jqp9"),d=n("3sMT"),p=n("wXC7"),f=n.n(p),m=Object(u.css)("position:relative;height:0;"),h=Object(u.css)("z-index:10000;position:relative;width:100%;height:0;background-color:",d.dark.colors.background.primary.hex,";overflow:hidden;opacity:1;transition-delay:250ms;&.is-not-loading{opacity:0;}&.is-transition-done{display:none;}"),g=Object(u.css)("filter:blur(10px) brightness(80%);position:absolute;width:100%;height:100%;img,video{object-fit:cover;width:100%;height:100%;transform:scale(1.1);}"),y=Object(u.css)("width:40px;height:40px;top:calc(50% - 20px);left:calc(50% - 20px);position:absolute;border-radius:50%;border:2px solid ",d.dark.colors.stroke.primary.transform(f.a.setAlpha(.2)).rgba,";",f.a.breakpoint.small,"{width:60px;height:60px;top:calc(50% - 30px);left:calc(50% - 30px);}"),v=Object(u.css)("> div{width:40px;height:40px;position:absolute;top:-2px;left:-2px;right:0;bottom:0;border-radius:50%;border:2px solid;border-color:",d.dark.colors.stroke.primary.hex," transparent transparent;animation:",Object(u.keyframes)("0%{transform:rotate(20deg);}100%{transform:rotate(380deg);}")," 1500ms cubic-bezier(0.77,0.1,0.45,0.8) infinite;",f.a.breakpoint.small,"{width:60px;height:60px;}}> div:nth-child(2){animation-delay:80ms;}"),b=Object(u.css)("position:absolute;top:0;width:100%;height:100%;");function _(e){var t=e.isLoading,n=e.aspectRatio,r=e.children,o=e.className,d=e.backgroundMedia,p=Object(l.useRef)(null),f=Object(l.useState)(!1),_=s()(f,2),w=_[0],x=_[1],k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=(2===e.split(":").length&&e.split(":")||["16","9"]).map(Number),n=s()(t,2),i=n[0],r=n[1];return"".concat(String(r/i*100),"%")}(n);return Object(l.useEffect)((function(){p.current&&p.current.addEventListener("transitionend",(function(){x(!0)}))}),[]),a()("div",{className:o},void 0,a()("div",{className:m,style:{paddingBottom:k}},void 0,a()("div",{className:Object(u.cx)(b)},void 0,r),c.a.createElement("div",{className:Object(u.cx)(h,{"is-not-loading":!t,"is-transition-done":w&&!t}),ref:p,style:{paddingBottom:k,transition:"opacity ".concat(300,"ms ease-in-out")}},a()("div",{className:g},void 0,/\.mp4$/.test(d)?a()("video",{src:"".concat(d,"#t=0.01"),preload:"auto"}):a()("img",{src:d,alt:"Video player loading"})),i||(i=a()("div",{className:y},void 0,a()("div",{className:v},void 0,a()("div",{}),a()("div",{})))))))}_.displayName="Spinner",_.defaultProps={isLoading:!1,aspectRatio:"16:9",children:null,className:void 0};t.a=_},M8e9:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=n("7ya4"),c=n("7zGq");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(e){var t=e.ariaControls,n=e.index,i=e.length,r=e.handleNavLeft,u=e.handleNavRight,d=(0,o.useRef)(null),p=(0,o.useRef)(null),f=0===n,m=n===i-1;return(0,o.useEffect)((function(){var e,t,n=document.activeElement;m&&n===(null==p?void 0:p.current)&&(null===(e=d.current)||void 0===e||e.focus());f&&n===(null==d?void 0:d.current)&&(null===(t=p.current)||void 0===t||t.focus())}),[d,p,m,f]),i<2?null:o.default.createElement("nav",{"aria-controls":t,className:l.arrowsNavClass},o.default.createElement("span",{ref:d,className:(0,s.cx)("arrow-left",l.arrowLeftClass,(0,a.default)({},l.disabledClass,0===n)),role:"button","aria-label":"Previous card","aria-disabled":0===n,onClick:r,onKeyUp:function(e){return(0,c.handleButtonPress)(e,r)},tabIndex:f?-1:0}),o.default.createElement("span",{ref:p,className:(0,s.cx)("arrow-right",l.arrowRightClass,(0,a.default)({},l.disabledClass,n===i-1)),role:"button","aria-label":"Next card","aria-disabled":n===i-1,onClick:u,onKeyUp:function(e){return(0,c.handleButtonPress)(e,u)},tabIndex:m?-1:0}))}d.displayName="ArrowNav",d.defaultProps={ariaControls:void 0};var p=d;t.default=p},MH66:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.boldText=t.lineBreak=t.mainText=t.headerContainer=void 0;var r,a,o,s,l=n("Jqp9"),c=n("lVLo");t.headerContainer=(0,l.css)(r||(r=i(["\n  cursor: pointer;\n"],["\n  cursor: pointer;\n"]))),t.mainText=(0,l.css)(a||(a=i(["\n  color: #121212;\n  font-family: ",";\n  font-size: 16px;\n  line-height: 20px;\n  padding-left: 20px;\n  padding-top: 18px;\n  padding-bottom: 18px;\n\n  span {\n    white-space: normal;\n  }\n\n  span::after {\n    display: none;\n  }\n\n  @media (min-width: 739px) {\n    padding-top: 0;\n    padding-bottom: 0;\n  }\n\n  @media (min-width: ","px) {\n    padding-left: unset;\n  }\n"],["\n  color: #121212;\n  font-family: ",";\n  font-size: 16px;\n  line-height: 20px;\n  padding-left: 20px;\n  padding-top: 18px;\n  padding-bottom: 18px;\n\n  span {\n    white-space: normal;\n  }\n\n  span::after {\n    display: none;\n  }\n\n  @media (min-width: 739px) {\n    padding-top: 0;\n    padding-bottom: 0;\n  }\n\n  @media (min-width: ","px) {\n    padding-left: unset;\n  }\n"])),c.fonts.franklin,c.widths.medium),t.lineBreak=(0,l.css)(o||(o=i(["\n  @media (min-width: 739px) {\n    display: none;\n  }\n"],["\n  @media (min-width: 739px) {\n    display: none;\n  }\n"]))),t.boldText=(0,l.css)(s||(s=i(["\n  font-weight: ",";\n  text-decoration: underline;\n"],["\n  font-weight: ",";\n  text-decoration: underline;\n"])),c.fontWeights.bold)},MISA:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return f}));var i,r=n("gcR/"),a=n.n(r),o=(n("q1tI"),n("Jqp9")),s=n("Rb+W"),l=n("06b3"),c=n("HChe"),u={".iterate__container":{borderBottom:"2px solid black !important"},".iterate__container__border":{display:"none !important"},".iterate__button":{border:"1px solid black !important",width:"auto !important",margin:"-5px auto 11px !important",display:"block !important",background:"transparent !important",color:"black !important",padding:"5px 7px !important"},".iterate__closeButton":{top:"2px !important"},".iterate__closeButton path":{fill:"black !important"}},d="657b48ff8d551e0001fa0953",p=Object(c.a)(),f=Object(s.f)(l.a),m=function(){return i||(i=a()(o.Global,{styles:u}))};m.displayName="IterateStyleOverride",t.c=m},MKiQ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("Hy5q")).default;t.default=r},Ma1Z:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lwsE")),a=i(n("W8MJ")),o=i(n("7W2i")),s=i(n("a1gu")),l=i(n("Nsbk")),c=i(n("lSNA")),u=i(n("q1tI")),d=(i(n("17x9")),n("Jqp9")),p=n("5ON2"),f=i(n("N+PJ")),m=i(n("0e36")),h=n("To3l"),g=n("QDH1"),y=n("45t3");function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,c.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,l.default)(e);if(t){var r=(0,l.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,s.default)(this,n)}}var w=function(e){var t=e.article,n=function(e){return p.OakReader.getMatchingBlocks({article:e,test:function(e){return"header_live_briefing"===e.type.name}}).some((function(e){return p.OakReader.getMatchingBlocks({article:e,test:function(e){return"header_latest_update_label"===e.type.name}}).some(Boolean)}))}(t);return p.OakReader.getMatchingBlocks({article:t,test:function(e){return"heading2"===e.type.name}}).map((function(e,t){var i=e.textContent;return u.default.createElement(m.default,{key:t.toString(),isLive:n},u.default.createElement("a",{href:"#"},i))}))},x=function(e){(0,o.default)(n,e);var t=_(n);function n(){var e;(0,r.default)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={newHeadings:[]},e.handleScroll=function(){var t,n,i=window.pageYOffset>=(null===(t=e.ref)||void 0===t||null===(n=t.current)||void 0===n?void 0:n.offsetTop);e.setState({fixPosition:i})},e}return(0,a.default)(n,[{key:"componentDidMount",value:function(){var e,t,n=this.props,i=n.article,r=n.isInEditor,a=n.theme.treatment;if(null===(e=(t=this.props).handleEvent)||void 0===e||e.call(t,"impression",{event:"impression"}),!r&&window.localStorage){this.ref=u.default.createRef(),"guide"===a&&window.addEventListener("scroll",this.handleScroll,{passive:!0});var o=(0,g.getHeadingData)(i),s=localStorage.getItem("nyt-styln-headings"),l={};if(s)try{l=JSON.parse(s)}catch(e){}var d=(0,g.filterExpiredItems)(l),p=b(b({},d),{},(0,c.default)({},i.id,{headings:o.map((function(e){return e.content})),lastModified:Date.now()}));localStorage.setItem("nyt-styln-headings",JSON.stringify(p));var f=d[i.id];if(f){var m;m=Array.isArray(f)?f:f.headings;var h=(0,g.getNewHeadings)(m,o);this.setState({newHeadings:h})}}}},{key:"componentWillUnmount",value:function(){"guide"===this.props.theme.treatment&&window.removeEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,i=t.isInEditor,r=t.article,a=t.ledeText,o=t.minItems,s=t.theme.treatment,l=t.maxItems,d=t.addendum,p=t.handleEvent,v=this.state,_=v.newHeadings,x=v.fixPosition,k=[];if(!n||i){var O=i?w({article:r}):function(e){var t=e.article,n=e.newHeadings,i=e.handleEvent,r=e.treatment,a=(0,g.isArticleLive)(t),o=(0,g.getHeadingData)(t),s="guide"===r;function l(){i&&i("click")}return o.map((function(e,t){var i=e.content,r=e.contentLink;return u.default.createElement(y.BulletBriefLocationContext.Consumer,null,(function(e){var o=e.setboldItems;return u.default.createElement(m.default,{key:t,isLive:a,isNew:n.includes(r)},u.default.createElement("a",{href:"#".concat(r),onClick:s?function(){o((0,c.default)({},r,!0))}:l},i))}))}))}({article:r,newHeadings:_,handleEvent:p,treatment:s});if((k=O.slice(0,+l).map((function(e,t){return b(b({},e),{},{key:t})}))).length<+o){if(!i)return null;k=u.default.createElement("p",null,"When at least ",o," headings are present, they will display here.")}}return u.default.createElement(y.BulletBriefLocationContext.Consumer,null,(function(t){return(0,t.setShowStickyNav)(x),u.default.createElement(h.BulletBriefingContainer,{innerRef:e.ref},!i&&n||u.default.createElement(u.default.Fragment,null,u.default.createElement(f.default,{ledeText:a,listItemsToRender:k}),d))}))}}]),n}(u.default.Component);x.displayName="BulletBriefing",x.defaultProps={children:null,isInEditor:!1,theme:{treatment:null},ledeText:"Heres what you need to know:",maxItems:"7",minItems:"3",addendum:null,handleEvent:null};var k=(0,d.withTheme)(x);t.default=k},MlQP:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NewsletterProduct",{enumerable:!0,get:function(){return a.NewsletterProduct}}),Object.defineProperty(t,"getNewsletterProduct",{enumerable:!0,get:function(){return a.getNewsletterProduct}}),Object.defineProperty(t,"makeEmailSignupComponent",{enumerable:!0,get:function(){return r.default}});var r=i(n("9B9F")),a=n("sYsD")},MmfM:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lSNA")),a=i(n("lwsE")),o=i(n("W8MJ")),s=i(n("7W2i")),l=i(n("a1gu")),c=i(n("Nsbk")),u=i(n("J4zp")),d=i(n("7GK/")),p=n("ZoyY"),f=i(n("D4NZ")),m=i(n("mlav")),h=i(n("BtaY")),g=i(n("p7hx")),y=i(n("OhS4")),v=i(n("XdRu")),b=n("Np/z"),_=i(n("J4Ca"));function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,l.default)(this,n)}}var O=p.textConstants.PRICE_DESCRIPTIONS,E=function(e){(0,s.default)(n,e);var t=k(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"getStructuredData",value:function(){var e=this,t=this.data,n=t.compatibility,i=t.reviewItems,r=void 0===i?[]:i,a=t.url,o=t.summary,s=t.lastMajorModification,l=t.lastModified,c=t.firstPublished,_=t.language,w={url:a,sameAs:a,author:this.authorsStructuredData,description:o,dateModified:s||l,datePublished:c,inLanguage:(null==_?void 0:_.code)||void 0};return n.isDiningReview&&r.length>0?r.map((function(e){if(e.subject)return new m.default(x(x({},w),function(e){if(e){var t,n,i,r,a,o,s,l,c,d,m,h,y=["CLOSED_TEMPORARILY","CLOSED_PERMANENTLY"].indexOf(e.openStatus)>-1,v=e.priceCategory||0,_=parseInt(p.priceMap[v],10),w=(0,f.default)(_,"$"),x=O[_],k=null===(t=e.contactDetails)||void 0===t?void 0:t.addresses,E=(0,u.default)(k,1)[0],T=null===(n=e.contactDetails)||void 0===n||null===(i=n.phoneNumbers)||void 0===i||null===(r=i.find((function(e){return"MAIN"===e.type})))||void 0===r?void 0:r.number,C=(null===(a=e.restaurantImage)||void 0===a||null===(o=a.crops[0])||void 0===o||null===(s=o.renditions[0])||void 0===s?void 0:s.url)||void 0,S=e.coordinates&&e.coordinates.longitude&&e.coordinates.longitude?{"@type":"GeoCoordinates",longitude:e.coordinates.longitude,latitude:e.coordinates.latitude}:void 0,P={"@type":"PostalAddress",addressCountry:(null==E||null===(l=E.address)||void 0===l?void 0:l.country)||"",addressLocality:(null==E||null===(c=E.address)||void 0===c?void 0:c.locality)||"",addressRegion:(null==E||null===(d=E.address)||void 0===d?void 0:d.region)||"",postalCode:(null==E||null===(m=E.address)||void 0===m?void 0:m.postalCode)||"",streetAddress:(null==E||null===(h=E.address)||void 0===h?void 0:h.streetAddress)||""},M=e.rating?{"@type":"Rating",worstRating:0,bestRating:4,ratingValue:e.rating}:void 0,I=e.cuisines&&Array.isArray(e.cuisines)&&e.cuisines[0].indexOf(";")>-1?e.cuisines[0].split(";"):e.cuisines;return{reviewRating:M,itemReviewed:new g.default({name:e.name,sameAs:(0,b.getCleanUrl)(e.website),servesCuisine:I||void 0,priceRange:_?"".concat(w," (").concat(x,")"):void 0,image:C,geo:S,hasMenu:"".concat(e.recommendedDishes," ").concat(e.wineList),openingHours:y?void 0:e.openHours,acceptsReservations:(0,b.getReservations)(e),address:P,telephone:T}).getStructuredData()}}return{}}(e.subject)))})):n.isMovieReview&&r.length>0?r.map((function(t){var n,i,r,o,s,l,c,u,p;if(t&&t.subject){var f=function(e){return e?"http://www.imdb.com/title/".concat(e,"/?ref_=ref_ext_NYT"):null}(null===(n=t.subject)||void 0===n?void 0:n.imdbId),g=(null===(i=t.subject)||void 0===i?void 0:i.ticketUrl)||a,y=(null===(r=t.subject)||void 0===r?void 0:r.runtimeUS)&&parseInt(null===(o=t.subject)||void 0===o?void 0:o.runtimeUS,10),v=y&&d.default.duration(y,"minutes").toISOString(),b=null!==(s=t.subject)&&void 0!==s&&s.releaseDateUS?(0,d.default)(t.subject.releaseDateUS,["MMMM D, YYYY","MMMM YYYY","YYYY"]):void 0,_=b&&b.isValid()?b.toISOString():void 0,k=(null===(l=t.subject)||void 0===l?void 0:l.directors.map((function(e){return new h.default({name:e})})))||void 0;return new m.default(x(x({},w),{},{itemReviewed:{"@type":"Movie",name:null===(c=t.subject)||void 0===c?void 0:c.title,duration:v||void 0,datePublished:_,director:k,url:g,sameAs:f,image:null===(u=e.promotionalImage)||void 0===u?void 0:u.getStructuredData(),genre:null===(p=t.subject)||void 0===p?void 0:p.genres}}))}})):n.isTheaterReview&&r.length>0?r.map((function(t){var n,i,r,a,o,s,l,u,d;if(t&&t.subject)return[new v.default(x(x({},w),{},{itemReviewed:{name:null===(n=t.subject)||void 0===n||null===(i=n.performance)||void 0===i?void 0:i.name,image:null===(r=e.promotionalImage)||void 0===r?void 0:r.getStructuredData()}})),new y.default(x(x({},w),{},{name:null===(a=t.subject)||void 0===a||null===(o=a.performance)||void 0===o?void 0:o.name,startDate:c,endDate:null===(s=t.subject)||void 0===s?void 0:s.stopDate,location:null===(l=t.subject)||void 0===l||null===(u=l.venue)||void 0===u?void 0:u.name,genre:null===(d=t.subject)||void 0===d?void 0:d.genre}))]})):[]}}]),n}(_.default);t.default=E},Mqhu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,n("q1tI").createContext)(0);t.default=i},MxTu:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("I6KV")).default;t.default=r},Mzrn:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.paragraphSelector=t.default=t.Paragraph=void 0;var r=n("3sMT"),a=n("Jqp9"),o=i(n("wXC7")),s=n("6l8D"),l=i(n("WThh")),c=i(n("qp0C")),u=(0,l.default)(["medium","small"]),d=function(e){return(0,a.css)("color:",r.color.content.secondary,";font-weight:",o.default.font.book,";",u(e,{fontSize:[17,19],lineHeight:[25,30]}),";")},p=(0,a.themeFn)("treatment",{none:function(e){return(0,a.css)("font-family:",o.default.font.serifBase,";",u(e,{fontSize:[18,20],lineHeight:[25,30]}),";")},sponsored:function(e){return(0,a.css)(d(e),";font-family:",o.default.font.sponsoredBase,";")},sponsoredSensitive:function(e){return(0,a.css)(d(e),";font-family:",o.default.font.sponsoredSensitive,";")},atHome:function(e){return(0,a.css)("font-style:normal;font-weight:300;font-size:23px;line-height:28px;font-family:",c.default.cheltenham,";",u(e,{padding:["1rem","0"]})," .",s.linkClass,"{border-bottom:2px soild ",r.color.stroke.primary,";color:",r.color.content.primary,";&:hover,&:focus{border-bottom:0;}}")},liveSplitLayout:(0,a.css)("font-family:",o.default.font.serifBase,";font-size:",o.default.font.size(18),";line-height:",o.default.font.size(25),";margin-bottom:",o.default.font.size(12.5),";")}),f=(0,a.themeFn)("languageDirection",{rightToLeft:(0,a.css)("text-align:right;direction:rtl;unicode-bidi:isolate;")}),m=(0,a.themeFn)("language",{"zh-hans":(0,a.css)("font-family:",o.default.font.imperialSCSerifBase,";font-weight:normal;font-style:normal;"),"zh-hant":(0,a.css)("font-family:",o.default.font.imperialTCSerifBase,";font-weight:normal;font-style:normal;")}),h=function(e){return(0,a.css)("margin-bottom:",o.default.font.size(12.5),";margin-top:0;overflow-wrap:break-word;color:",r.color.content.secondary,";",e.theme.breakpointMap.medium,"{margin-bottom:",o.default.font.size(15),";margin-top:0;}.",s.linkClass,"{text-decoration:underline;text-decoration-style:solid;text-decoration-thickness:1px;text-decoration-color:",r.color.signal.editorial,";&:hover,&:focus{text-decoration:none;}}")};t.paragraphSelector=function(e){return(0,a.css)("p{",h(e),";",p(e),";}")};var g=(0,a.styled)("p",{target:"evys1bk0"})(h,";",p,";",f,";",m,";");t.Paragraph=g;var y=g;t.default=y},"N+PJ":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(n("17x9"),i(n("s6ck"))),o=i(n("AfrD")),s=n("wnaz"),l=n("Jqp9"),c=function(e){var t=e.ledeText,n=e.listItemsToRender,i="guide"===(0,l.useTheme)().treatment,c=i&&s.listNavbarClass;return r.default.createElement(r.default.Fragment,null,!i&&r.default.createElement(a.default,null,t),r.default.createElement(o.default,{className:c},n))};t.default=c},"N+PQ":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lwsE")),a=i(n("W8MJ")),o=i(n("7GK/")),s=i(n("i48y")),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,e),t.media?this.data=t.media:this.data=t}return(0,a.default)(e,[{key:"getStructuredData",value:function(){var e,t,n,i,r,a,l,c,u,d,p,f,m=null===(e=this.data)||void 0===e||null===(t=e.transcript)||void 0===t||null===(n=t.transcriptFragment)||void 0===n?void 0:n.map((function(e){return e.text})).join(" "),h=this.data.length>0?o.default.duration(this.data.length).toISOString():void 0;return new s.default({"@id":(null===(i=this.data)||void 0===i?void 0:i.url)||(null===(r=this.data)||void 0===r?void 0:r.fileUrl),transcript:m,uploadDate:null===(a=this.data)||void 0===a?void 0:a.firstPublished,description:null===(l=this.data)||void 0===l?void 0:l.summary,caption:null===(c=this.data)||void 0===c?void 0:c.credit,url:null===(u=this.data)||void 0===u?void 0:u.url,duration:h,contentUrl:null===(d=this.data)||void 0===d?void 0:d.fileUrl,name:null===(p=this.data)||void 0===p||null===(f=p.headline)||void 0===f?void 0:f.default})}}]),e}();t.default=l},"N/T0":function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("lSNA"),r=n.n(i),a=n("cDf5"),o=n.n(a),s=n("q1tI"),l=n("X6oL"),c=n("QS0n"),u=n("cUQY"),d=n("u1H9"),p=n("+ClL"),f=n("qs2k");function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){var t=e.name,n=void 0===t?"":t,i=e.context,r=void 0===i?"":i,a=e.label,m=void 0===a?"":a,g=e.region,y=e.b2bIPSegmentID,v=Object(l.useTracking)(),b=Object(u.a)().pageCount,_="/"===(Object(c.useLocation)()||{}).pathname?"homepage":"article",w=function(e){return e?"".concat(e).replace(/[^0-9a-zA-Z _-]/g,""):""},x={name:w(n),context:w(r),label:w(m),region:w(g)||Object(d.g)(b)};y&&(x.other={ipSegmentId:y});var k=function(e){return"string"!=typeof e?e:e.replace(/(\s|\\n)+/g," ").trim()},O=function(e){var t=e.textContent,n=void 0===t?"":t,i=e.children;if(!(void 0===i?[]:i).length)return k(n);var r=e.innerText;return k(void 0===r?"":r)},E=Object(s.useRef)(!1);return{updateLabel:function(e){x.label=e},trackImpression:function(){if(!E.current){var e,t={event:"impression",module:x},n=null!==f.c&&void 0!==f.c&&null!==(e=f.c.timing)&&void 0!==e&&e.responseStart?f.c.timing.responseStart:null;"number"==typeof n&&(t.eventData={pagetype:"article",trigger:"module",timeRendered:Date.now()-n}),E.current=!0,v.trackEvent(t)}},trackInteraction:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if("object"===o()(e)){var r=e.type,a=void 0===r?"":r,s=e.currentTarget,l=e.target,c=void 0===l?{}:l,u=s||c,d=u.href,f=void 0===d?"":d;v.trackEvent(h(h(h({},i),{},{event:"moduleInteraction"},n&&{eventCallback:n}),{},{eventData:{trigger:"module",type:a,pagetype:_},module:h(h({},x),{},{element:{name:t.name||"",label:t.label||O(s||c),url:t.url||f}})}))}else{var m=new Error("useMUTracker received an unexpected argument type ".concat(o()(e)," in trackInteraction() call for ").concat(x.name,": ").concat(x.label));Object(p.a)(m,{msg:"useMUTracker error",more:"useMUTracker"})}}}}},N2Xg:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.dockContentCtaDek=t.dockContentCta=t.dockContentCtaWrapper=t.dockContentPricingBau=t.dockContentPricing=t.dockContentHed=t.dockContentLogo=t.dockContentContainer=t.dockContentWrapper=t.dockHeaderUrgencyMessage=t.dockHeaderWrapper=t.dockHeaderHeadingClassName=void 0;var r,a,o,s,l,c,u,d,p,f,m,h,g=n("Jqp9"),y=n("lVLo");t.dockHeaderHeadingClassName=(0,g.css)(r||(r=i(["\n  margin: 0 auto;\n  max-width: 984px;\n  width: calc(100vw - 40px);\n\n  @media screen and (min-width: 1440px) {\n    max-width: 1160px;\n    width: calc(100vw - 280px);\n  }\n\n  & > div {\n    @media screen and (min-width: 768px) {\n      max-width: unset;\n      padding: 0;\n    }\n\n    & > div:last-child {\n      margin-right: -15px;\n      @media screen and (min-width: 768px) {\n        margin-right: -10px;\n      }\n    }\n  }\n"],["\n  margin: 0 auto;\n  max-width: 984px;\n  width: calc(100vw - 40px);\n\n  @media screen and (min-width: 1440px) {\n    max-width: 1160px;\n    width: calc(100vw - 280px);\n  }\n\n  & > div {\n    @media screen and (min-width: 768px) {\n      max-width: unset;\n      padding: 0;\n    }\n\n    & > div:last-child {\n      margin-right: -15px;\n      @media screen and (min-width: 768px) {\n        margin-right: -10px;\n      }\n    }\n  }\n"]))),t.dockHeaderWrapper=(0,g.css)(a||(a=i(["\n  font-family: ",";\n  font-size: 16px;\n  color: #121212;\n  padding-left: 10px;\n\n  @media screen and (min-width: 768px) {\n    padding-left: 0px;\n  }\n\n  @media screen and (min-width: 1024px) {\n    padding-left: 0px;\n    margin-left: 10px;\n    width: calc(100vw - 50px);\n    position: absolute;\n    text-align: center;\n    left: 0;\n    top: 18px;\n  }\n  & span {\n    text-wrap: unset;\n  }\n"],["\n  font-family: ",";\n  font-size: 16px;\n  color: #121212;\n  padding-left: 10px;\n\n  @media screen and (min-width: 768px) {\n    padding-left: 0px;\n  }\n\n  @media screen and (min-width: 1024px) {\n    padding-left: 0px;\n    margin-left: 10px;\n    width: calc(100vw - 50px);\n    position: absolute;\n    text-align: center;\n    left: 0;\n    top: 18px;\n  }\n  & span {\n    text-wrap: unset;\n  }\n"])),y.fonts.franklin),t.dockHeaderUrgencyMessage=(0,g.css)(o||(o=i(["\n  font-weight: ",";\n\n  span::after {\n    display: none;\n  }\n"],["\n  font-weight: ",";\n\n  span::after {\n    display: none;\n  }\n"])),y.fontWeights.semiBold),t.dockContentWrapper=(0,g.css)(s||(s=i(["\n  align-self: flex-start;\n  display: flex;\n  margin: 0 auto 20px auto;\n  width: calc(100vw - 40px);\n  max-width: 984px;\n\n  @media screen and (min-width: 1440px) {\n    margin-bottom: 40px;\n    width: calc(100vw - 280px);\n    align-self: center;\n    max-width: 1160px;\n  }\n"],["\n  align-self: flex-start;\n  display: flex;\n  margin: 0 auto 20px auto;\n  width: calc(100vw - 40px);\n  max-width: 984px;\n\n  @media screen and (min-width: 1440px) {\n    margin-bottom: 40px;\n    width: calc(100vw - 280px);\n    align-self: center;\n    max-width: 1160px;\n  }\n"]))),t.dockContentContainer=(0,g.css)(l||(l=i(["\n  background: #f6f6f4;\n  border-radius: 8px;\n  font-family: ",";\n  font-size: 14px;\n  line-height: 130%;\n  max-height: 170px;\n  padding: 20px;\n  text-align: center;\n  width: 100%;\n\n  @media screen and (min-width: 768px) {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n    max-height: 96px;\n    padding: 20px 40px;\n  }\n\n  @media screen and (min-width: 1024px) {\n    max-height: 98px;\n    padding: 40px 120px;\n  }\n"],["\n  background: #f6f6f4;\n  border-radius: 8px;\n  font-family: ",";\n  font-size: 14px;\n  line-height: 130%;\n  max-height: 170px;\n  padding: 20px;\n  text-align: center;\n  width: 100%;\n\n  @media screen and (min-width: 768px) {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: space-between;\n    max-height: 96px;\n    padding: 20px 40px;\n  }\n\n  @media screen and (min-width: 1024px) {\n    max-height: 98px;\n    padding: 40px 120px;\n  }\n"])),y.fonts.franklin),t.dockContentLogo=(0,g.css)(c||(c=i(["\n  @media screen and (min-width: 768px) {\n    width: 132px;\n  }\n  @media screen and (min-width: 1024px) {\n    width: 154px;\n  }\n"],["\n  @media screen and (min-width: 768px) {\n    width: 132px;\n  }\n  @media screen and (min-width: 1024px) {\n    width: 154px;\n  }\n"]))),t.dockContentHed=(0,g.css)(u||(u=i(["\n  font-weight: ",";\n  margin-bottom: 12px;\n\n  @media screen and (min-width: 768px) {\n    text-align: left;\n  }\n\n  @media screen and (min-width: 768px) {\n    font-size: 16px;\n  }\n"],["\n  font-weight: ",";\n  margin-bottom: 12px;\n\n  @media screen and (min-width: 768px) {\n    text-align: left;\n  }\n\n  @media screen and (min-width: 768px) {\n    font-size: 16px;\n  }\n"])),y.fontWeights.medium),t.dockContentPricing=(0,g.css)(d||(d=i(["\n  font-size: 20px;\n  font-weight: ",";\n  line-height: 120%;\n  margin-bottom: 10px;\n"],["\n  font-size: 20px;\n  font-weight: ",";\n  line-height: 120%;\n  margin-bottom: 10px;\n"])),y.fontWeights.semiBold),t.dockContentPricingBau=(0,g.css)(p||(p=i(["\n  color: #8b8b8b;\n  text-decoration: line-through;\n"],["\n  color: #8b8b8b;\n  text-decoration: line-through;\n"]))),t.dockContentCtaWrapper=(0,g.css)(f||(f=i(["\n  margin-bottom: 10px;\n\n  @media screen and (min-width: 768px) {\n    margin-bottom: 0;\n  }\n"],["\n  margin-bottom: 10px;\n\n  @media screen and (min-width: 768px) {\n    margin-bottom: 0;\n  }\n"]))),t.dockContentCta=(0,g.css)(m||(m=i(["\n  background: #e33d26;\n  border-radius: 3px;\n  color: #f8f8f8;\n  display: block;\n  font-weight: ",";\n  margin: 0 auto 10px auto;\n  max-width: 180px;\n  padding: 7px 0;\n  width: 180px;\n\n  @media screen and (min-width: 1024px) {\n    font-size: 16px;\n    padding: 9px 0;\n  }\n\n  &:link,\n  &:visited {\n    color: #f8f8f8;\n    text-decoration: none;\n  }\n"],["\n  background: #e33d26;\n  border-radius: 3px;\n  color: #f8f8f8;\n  display: block;\n  font-weight: ",";\n  margin: 0 auto 10px auto;\n  max-width: 180px;\n  padding: 7px 0;\n  width: 180px;\n\n  @media screen and (min-width: 1024px) {\n    font-size: 16px;\n    padding: 9px 0;\n  }\n\n  &:link,\n  &:visited {\n    color: #f8f8f8;\n    text-decoration: none;\n  }\n"])),y.fontWeights.semiBold),t.dockContentCtaDek=(0,g.css)(h||(h=i(["\n  color: #5a5a5a;\n  font-size: 12px;\n  font-weight: ",";\n\n  @media screen and (min-width: 1024px) {\n    font-size: 14px;\n  }\n"],["\n  color: #5a5a5a;\n  font-size: 12px;\n  font-weight: ",";\n\n  @media screen and (min-width: 1024px) {\n    font-size: 14px;\n  }\n"])),y.fontWeights.medium)},NQ6n:function(e,t,n){"use strict";n.d(t,"a",(function(){return he}));var i={};n.r(i),n.d(i,"buttonContainerClass",(function(){return j})),n.d(i,"dropdownButtonClass",(function(){return L})),n.d(i,"DropDownMenu",(function(){return R})),n.d(i,"activeClass",(function(){return N})),n.d(i,"shareMenuPointerTopLeftClass",(function(){return B})),n.d(i,"shareMenuPointerTopRightClass",(function(){return z})),n.d(i,"shareMenuPointerBottomLeftClass",(function(){return F})),n.d(i,"shareMenuPointerBottomRightClass",(function(){return U})),n.d(i,"shareMenuPointerTopLeftConcealClass",(function(){return H})),n.d(i,"shareMenuPointerTopLeftGiftConcealClass",(function(){return W})),n.d(i,"shareMenuPointerTopRightConcealClass",(function(){return q})),n.d(i,"shareMenuPointerBottomLeftConcealClass",(function(){return V})),n.d(i,"shareMenuPointerBottomLeftGiftConcealClass",(function(){return G})),n.d(i,"shareMenuPointerBottomRightConcealClass",(function(){return Y})),n.d(i,"shareMenuPointerBottomRightNonGiftConcealClass",(function(){return Z})),n.d(i,"shareMenuPointerBottomLeftNonGiftConcealClass",(function(){return X})),n.d(i,"menuTopLeftPositionClass",(function(){return J})),n.d(i,"menuTopLeftGiftPositionClass",(function(){return K})),n.d(i,"menuTopRightPositionClass",(function(){return $})),n.d(i,"menuBottomLeftPositionClass",(function(){return Q})),n.d(i,"menuBottomLeftGiftPositionClass",(function(){return ee})),n.d(i,"menuBottomRightPositionClass",(function(){return te})),n.d(i,"menuTopLeftHomePositionClass",(function(){return ne})),n.d(i,"menuTopRightHomePositionClass",(function(){return ie})),n.d(i,"menuBottomLeftHomePositionClass",(function(){return re})),n.d(i,"menuBottomRightHomePositionClass",(function(){return ae})),n.d(i,"closeButtonClass",(function(){return oe})),n.d(i,"closeIconClass",(function(){return se}));var r=n("VkAN"),a=n.n(r),o=n("pVnL"),s=n.n(o),l=n("lSNA"),c=n.n(l),u=n("gcR/"),d=n.n(u),p=n("J4zp"),f=n.n(p),m=n("QILm"),h=n.n(m),g=n("q1tI"),y=n.n(g),v=n("Jqp9"),b=n("eFc+"),_=n.n(b),w=n("X6oL"),x=n("KG2r"),k=n("rONy"),O=n("TwAE"),E=n("9/5/"),T=n.n(E),C=n("MISA"),S=n("oEA4"),P=n("iEJF"),M=n("wXC7"),I=n.n(M),A="@media (max-width: ".concat(I.a.breakpoint.maxMobileContentWidth,"px)"),j=Object(v.css)("display:inline-flex;"),L=Object(v.css)("position:relative;"),R=Object(v.styled)("div",{target:"e8nir780"})("width:",(function(e){return e.width}),"px;display:none;position:absolute;box-shadow:0 1px 3px rgba(0,0,0,0.15);border-radius:4px;border:1px solid ",I.a.color.gray50,";background-color:",I.a.color.white,";z-index:199;"),N=Object(v.css)("display:inline-block;"),D=Object(v.css)("border:14px inset transparent;display:inline-block;height:0;position:absolute;width:0;"),B=Object(v.css)(D,";border:10px inset transparent;border-bottom:10px solid #b3b3b3;left:15px;top:-20px;"),z=Object(v.css)(D,";border:10px inset transparent;border-bottom:10px solid #b3b3b3;right:15px;top:-20px;"),F=Object(v.css)(D,";transform:rotate(180deg);border:10px inset transparent;border-bottom:10px solid #b3b3b3;left:15px;bottom:-21px;"),U=Object(v.css)(D,";transform:rotate(180deg);border:10px inset transparent;border-bottom:10px solid #b3b3b3;right:15px;bottom:-21px;"),H=Object(v.css)("border:10px inset transparent;display:inline-block;height:0;position:absolute;width:0;border-bottom:11px solid ",I.a.color.white,";left:-10px;top:-9px;"),W=Object(v.css)("border:10px inset transparent;display:inline-block;height:0;position:absolute;width:0;border-bottom:11px solid ",I.a.color.white,";left:-10px;top:-9px;"),q=Object(v.css)("border:10px inset transparent;display:inline-block;height:0;position:absolute;width:0;border-bottom:11px solid ",I.a.color.white,";right:-10px;top:-9px;"),V=Object(v.css)("border:10px inset transparent;display:inline-block;height:0;position:absolute;width:0;border-bottom:10px solid ",I.a.color.black,";left:-10px;top:-9px;"),G=Object(v.css)("border:10px inset transparent;display:inline-block;height:0;position:absolute;width:0;left:-10px;top:-9px;border-bottom:10px solid ",I.a.color.white,";"),Y=Object(v.css)("border:10px inset transparent;display:inline-block;height:0;position:absolute;width:0;border-bottom:10px solid ",I.a.color.black,";right:-10px;top:-9px;"),Z=Object(v.css)("border:10px inset transparent;display:inline-block;height:0;position:absolute;width:0;border-bottom:10px solid ",I.a.color.black,";right:-10px;top:-9px;"),X=G,J=Object(v.css)("top:46px;left:-9px;"),K=Object(v.css)("top:46px;left:-5px;",A,"{left:-8px;}"),$=Object(v.css)("top:45px;right:-9px;"),Q=Object(v.css)("bottom:46px;left:-9px;"),ee=Object(v.css)("bottom:46px;left:-6px;"),te=Object(v.css)("bottom:42px;right:-13px;"),ne=Object(v.css)("top:29px;left:-18px;"),ie=Object(v.css)("top:28px;right:-19px;"),re=Object(v.css)("bottom:31px;left:-19px;"),ae=Object(v.css)("bottom:32px;right:-17px;"),oe=Object(v.css)("position:absolute;opacity:0;right:4px;top:4px;background:",I.a.color.white,";&:focus{opacity:1;}@supports selector(:focus-visible){&:focus{opacity:0;}&:focus-visible{opacity:1;}}"),se=Object(v.css)("display:block;height:14px;width:14px;"),le=y.a.forwardRef((function(e,t){var n=e.modalContent,r=e.buttonContent,a=e.isGiftArticle,o=e.ariaLabel,s=e.ariaDescribedBy,l=e.buttonClassName,u=e.width,p=e.arrowPosition,m=e.handleOpen,h=e.forceArrowPosition,b=e.suppressForcedFocus,_=e.forceClose,w=e.forceOpen,x=e.toggleGiftArticleMenu,k=e.height,O=e.hasGiftArticleButtonSibling,E=e.dataTestid,T=e.isHomeTest,C=Object(g.useReducer)((function(e){return!e}),!1),M=f()(C,2),I=M[0],A=M[1],D=Object(g.useState)("left"),B=f()(D,2),z=B[0],F=B[1],U=Object(g.useState)(p),H=f()(U,2),W=H[0],q=H[1],V=Object(g.useState)(!1),G=f()(V,2),Y=G[0],Z=G[1],X=Object(g.useState)(k),J=f()(X,2),K=J[0],$=J[1],Q=Object(g.useRef)(),ee=null!=t?t:Q,te=Object(g.useRef)();Object(g.useEffect)((function(){k&&k!==K&&$(k)}),[k,K]);var ne=Object(g.useCallback)((function(){if(!I){var e=ee.current.getBoundingClientRect(),t=K>0?K:340;if(!h)if("top"===W){var n=e.top-43<t;window.innerHeight-e.bottom>t||n||q("bottom")}else{e.top-43>t||q("top")}e.right-u>0&&e.left+u>window.innerWidth?"right"!==z&&F("right"):"left"!==z&&F("left")}A(),Y||Z(!0)}),[I,K,z,h,W,u,Y,ee]);Object(g.useEffect)((function(){te.current&&0===K&&$(te.current.offsetHeight);var e=function(e){var t="Escape"===e.key||27===e.keyCode;I&&t&&ne()};return window.addEventListener("keydown",e),function(){return window.removeEventListener("keydown",e)}}),[te,K,I,ne]),Object(g.useEffect)((function(){Y&&(m(I),null!=ee&&ee.current&&!b&&!I&&function(e){for(var t=e.offsetTop,n=e.offsetLeft,i=e.offsetWidth,r=e.offsetHeight;e.offsetParent;)t+=(e=e.offsetParent).offsetTop,n+=e.offsetLeft;return t<window.pageYOffset+window.innerHeight&&n<window.pageXOffset+window.innerWidth&&t+r>window.pageYOffset&&n+i>window.pageXOffset}(ee.current)&&ee.current.focus())}),[I,m,Y,b,ee]),Object(g.useEffect)((function(){_&&I&&(A(),m(!1),x(!1))}),[I,_,m,x]),Object(g.useEffect)((function(){w&&!I&&(A(),m(!0),x(!1))}),[I,w,m,x]);var ie=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"".concat(W.charAt(0).toUpperCase()+W.slice(1)).concat(z.charAt(0).toUpperCase()+z.slice(1)).concat(e&&a?"Gift":"").concat(T&&!t?"Home":"")},re="";return O||a||"bottom"!==W||(re="NonGift"),d()(S.a,{onClickOutside:function(){I&&A()},className:j},void 0,d()("div",{className:L},void 0,y.a.createElement("button",{onClick:ne,type:"button","aria-label":o,"aria-describedby":s,"aria-expanded":I,className:Object(v.cx)(l),ref:ee,"data-testid":E},r),I&&d()(R,{className:Object(v.cx)(i["menu".concat(ie(!0),"PositionClass")],c()({},N,I)),"data-testid":"share-button-menu",width:u},void 0,d()("div",{className:i["shareMenuPointer".concat(ie(!1,!0),"Class")]},void 0,d()("div",{className:i["shareMenuPointer".concat(ie(!0,!0)).concat(re,"ConcealClass")]})),y.a.createElement("div",{ref:te,"aria-modal":"true",role:"dialog"},n,d()("button",{type:"button",className:oe,onClick:ne,"aria-label":"close dialog"},void 0,d()(P.a,{className:se}))))))}));le.defaultProps={modalContent:null,buttonContent:null,ariaLabel:"",ariaDescribedBy:null,buttonClassName:null,arrowPosition:"top",width:204,handleOpen:function(){return null},forceArrowPosition:!1,suppressForcedFocus:!1,forceClose:!1,forceOpen:!1,toggleGiftArticleMenu:function(){return null},height:null,isGiftArticle:!1,hasGiftArticleButtonSibling:!1,dataTestid:null,isHomeTest:!1};var ce=le,ue=function(e){var t=e.className,n=e.title,i=e.stroke,r=e.fill;return d()("svg",{className:t,viewBox:"0 0 20 20"},void 0,n&&d()("title",{},void 0,n),d()("path",{d:"M19.219 8.706l-7.29 6.075v-3.698h-.5c-5.144 0-8.562 1.444-10.617 4.556C1.97 10.496 6.22 6.35 11.43 6.35h.5V2.63l7.29 6.076z",stroke:i,fill:r,fillRule:"evenodd"}))};ue.displayName="ShareIcon",ue.defaultProps={stroke:I.a.color.blue30,fill:"none",className:void 0,title:void 0};var de,pe,fe=ue,me=["share","className","stroke","fill","buttonHoverClass","buttonContent","isGiftArticle","handleOpen","pageType","mediaTitle","modalContent","setAriaLabel","ariaDescribedBy","modalArrowPosition","forceArrowPosition","suppressForcedFocus","toggleGiftArticleMenu","forceCloseModal","forceOpen","giftLinksRemainingCount","forcePopOver","menuDefaultHeight","trackingRegion","hasGiftArticleButtonSibling","dataTestid"],he=Object(v.css)("background:transparent;display:inline-block;height:20px;width:20px;"),ge="More sharing options",ye=y.a.forwardRef((function(e,t){var n,i,r,a,o=e.share,l=e.className,u=e.stroke,p=e.fill,m=e.buttonHoverClass,b=e.buttonContent,_=e.isGiftArticle,E=e.handleOpen,S=e.pageType,P=e.mediaTitle,M=e.modalContent,I=e.setAriaLabel,A=e.ariaDescribedBy,j=e.modalArrowPosition,L=e.forceArrowPosition,R=e.suppressForcedFocus,N=e.toggleGiftArticleMenu,D=e.forceCloseModal,B=e.forceOpen,z=(e.giftLinksRemainingCount,e.forcePopOver),F=e.menuDefaultHeight,U=e.trackingRegion,H=e.hasGiftArticleButtonSibling,W=e.dataTestid,q=h()(e,me),V=Object(w.useTracking)().trackEvent,G=Object(g.useState)(!0),Y=f()(G,2),Z=Y[0],X=Y[1],J=Object(g.useState)(!1),K=f()(J,2),$=K[0],Q=K[1],ee=Object(g.useState)(!1),te=f()(ee,2),ne=te[0],ie=te[1],re="";I&&(re="".concat(ge," ").concat(P,"..."));var ae=function(e){E?E(e):(e&&e!==$&&V({event:"moduleInteraction",eventData:{pagetype:S,trigger:"module",type:"click"},module:{name:"share-tools",region:U,element:{name:"tools-menu",label:"Tools Menu",url:o.url}}}),Q(e)),e&&e!==$&&!ne&&(ie(!0),Object(k.a)((function(){window.Iterate("install",C.a),window.Iterate("identify",{agentId:C.b,referrerUrl:document.referrer,referrerPage:document.location,device:C.d})})))},oe=function(){return window.matchMedia("(min-width: 1150px)").matches},se=T()((function(){var e=oe();e!==Z&&X(e)}),25);Object(g.useEffect)((function(){var e=oe();return e!==Z&&X(e),window.addEventListener("resize",se),function(){return window.removeEventListener("resize",se)}}),[Z,se]);var le,ue;return y.a.createElement(y.a.Fragment,null,ne&&(de||(de=d()(C.c,{}))),Z||z?y.a.createElement(ce,{ref:t,dataTestid:W,isGiftArticle:_,buttonContent:b||n||(n=d()(fe,{stroke:u,fill:p})),modalContent:M||i||(i=d()(x.b,{share:o,pageType:S,toggleGiftArticleMenu:N,trackingRegion:U})),ariaLabel:re,ariaDescribedBy:A,buttonClassName:Object(v.cx)((le={},c()(le,he,!l),c()(le,l,l),c()(le,m,m),le)),arrowPosition:j,handleOpen:ae,forceArrowPosition:L,width:215,suppressForcedFocus:R,forceClose:D,toggleGiftArticleMenu:N,forceOpen:B,height:F,hasGiftArticleButtonSibling:H}):y.a.createElement(O.a,s()({ref:t,dataTestid:W,width:215,ariaLabel:re,ariaDescribedBy:A,className:Object(v.cx)((ue={},c()(ue,he,!l),c()(ue,l,l),ue)),buttonHoverClass:m,buttonContent:b||r||(r=d()(fe,{stroke:u,fill:p})),forceClose:D,forceOpen:B,toggleGiftArticleMenu:N,modalContent:M||a||(a=d()(x.b,{share:o,pageType:S,toggleGiftArticleMenu:N,trackingRegion:U})),handleOpen:ae,arrowPosition:j,isShareToolButton:!0},q)))}));ye.fragments={share:_()(pe||(pe=a()(["\n    fragment ShareButton_share on CreativeWork {\n      ...ShareMenu_share\n    }\n    ","\n  "])),x.b.fragments.share)},ye.defaultProps={buttonHoverClass:"",buttonContent:void 0,modalContent:void 0,className:void 0,stroke:void 0,fill:void 0,handleOpen:void 0,pageType:void 0,tracking:void 0,mediaTitle:"",setAriaLabel:!0,ariaDescribedBy:void 0,modalArrowPosition:void 0,forceArrowPosition:!1,suppressForcedFocus:!1,forceCloseModal:!1,forceOpen:!1,toggleGiftArticleMenu:function(){},giftLinksRemainingCount:void 0,forcePopOver:!1,menuDefaultHeight:void 0,trackingRegion:"default",isGiftArticle:!1,hasGiftArticleButtonSibling:!1,dataTestid:null};t.b=ye},NVP0:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"j",(function(){return o})),n.d(t,"n",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"i",(function(){return d})),n.d(t,"k",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"h",(function(){return m})),n.d(t,"g",(function(){return h})),n.d(t,"d",(function(){return g})),n.d(t,"l",(function(){return y})),n.d(t,"m",(function(){return _}));var i=n("RIqP"),r=n.n(i),a=function(e){return e.advertisingProperties&&e.advertisingProperties.sensitivity?e.advertisingProperties.sensitivity:"SHOW_ADS"},o=function(e){var t,n;return(null==e||null===(t=e[0])||void 0===t||null===(n=t.creators)||void 0===n?void 0:n.length)>0},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{language:""},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"By";return"es"===e.language?"Por":t},l=function(e,t){var n=e.find((function(e){return"supplemental"===e.name}));if(!n)return[];var i=n.containers.find((function(e){return e.name===t}));return i?i.relations.filter((function(e){var t;return["Capsule","EmbeddedInteractive"].includes(null===(t=e.asset)||void 0===t?void 0:t.__typename)})):[]},c=function(e,t){if(null==e||!e.crops)return null;for(var n=[],i=0;i<e.crops.length;i+=1)for(var r=0;r<e.crops[i].renditions.length;r+=1){var a=e.crops[i].renditions[r];if(t.indexOf(a.name)>-1){if(a.name===t[0])return a;n.push(a)}}for(var o=0;o<t.length;o+=1)for(var s=0;s<n.length;s+=1)if(n[s].name===t[o])return n[s];return null},u=function(e){if(e&&!e.match(/([?&]auto=)/g)){var t=e.match(/([?&]quality=[0-9]+$)/g)?"&":"?";return"".concat(e+t,"auto=webp")}return e},d=function(e,t){var n=[];if(!e||!e.crops||!t)return"";for(var i=0;i<e.crops.length;i+=1)for(var r=0;r<e.crops[i].renditions.length;r+=1){var a=e.crops[i].renditions[r];t.indexOf(a.name)>-1&&n.push("".concat(u(a.url)," ").concat(a.width,"w"))}return n.join(", ")},p=function(e){if(!e)return!1;var t=e;if(e.promotionalMedia&&(t=e.promotionalMedia),!t.crops)return!1;var n=c(t,["jumbo"]);return!!n&&n.height>n.width},f=function(e){if(!e||0===e.length)return!1;var t=e[0].creators;if(!t||0===t.length)return!1;var n=t[0];return!(!n||!n.legacyData)&&n.legacyData.htmlBiography},m=function(e){switch(e){case"column":case"news-event":case"issue":case"series":e="column";break;case"topic":e="topic";break;case"section":case"theater":case"dining":case"movies":case"realestate":e="sectionfront";break;case"spotlight":e="spotlight";break;default:e="collection"}return e},h=function(e){var t,n=null==(t=e.groupings)?void 0:t.find((function(e){return"rank"===(null==e?void 0:e.name)}));if(!n)return null;var i=n.containers.find((function(e){return"highlights"===e.name}));return i?i.template:null},g=function(e){var t=document.querySelectorAll('a[href="'.concat(null==e?void 0:e.replace(/^.*\/\/[^/]+/,""),'"]'))[0];t&&t.focus()},y=function(e,t){var n=new Map,i=function(e){e&&e.node&&n.set(e.node.id,e)};return e.forEach(i),t.forEach(i),r()(n.values())},v=["the-daily","nyt-still-processing","the-argument","book-review","music-popcast","caliphate"],b=["el-times"],_=function(e){var t,n=e.slug,i=void 0===n?"":n,r=e.language,a=void 0===r?{}:r,o=e.url,s=void 0===o?"":o;if(null!=a&&null!==(t=a.code)&&void 0!==t&&t.startsWith("es")&&i&&!b.includes(i)){var l="prd"===vi.env.ENVIRONMENT?"prd":"stg";return"".concat("prd"===l?"https://rss.nytimes.com/":"https://rss.stg.nytimes.com/","services/xml/rss/nyt/").concat(i.replace("espanol","es"),".xml")}if(!s)return"";var c=s.split("/"),u=c[c.length-1];return v.includes(u)?"https://rss.art19.com/".concat(u):"https://www.nytimes.com/svc/collections/v1/publish/".concat(s,"/rss.xml")}},NVrK:function(e,t,n){"use strict";var i,r=n("VkAN"),a=n.n(r),o=n("gcR/"),s=n.n(o),l=(n("q1tI"),n("eFc+")),c=n.n(l),u=n("Jqp9"),d=n("7IP+"),p=n.n(d),f=n("XlcC"),m=n("HTd6"),h=Object(u.css)("margin:0 auto 1rem;"),g=function(e){var t=e.data,n=e.className,i=Object(u.useTheme)().noFollowExternalLinks,r=Object(f.createMapInlineUnionWithOptions)({noFollowExternalLinks:i});return s()(p.a,{className:Object(u.cx)(h,n)},void 0,t.content.map(r))};g.displayName="DetailBlock",g.defaultProps={className:void 0},g.fragments={data:c()(i||(i=a()(["\n    fragment DetailBlock_data on DetailBlock {\n      textAlign\n      content {\n        ...TextInline_content\n      }\n    }\n    ","\n  "])),m.a.fragments.content)};t.a=g},NeZs:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-love-letter-fe90fe3ff001ee39f3b90784874c1368.webp"},"Np/z":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasCrops=t.getReservations=t.getCleanUrl=t.default=void 0;var i=n("abzs");t.hasCrops=function(e){var t=e&&(e.crops||e.assetCrops||e.spanImageCrops);return!(!t||!Array.isArray(t))};t.getCleanUrl=function(e){return e?0===e.indexOf("http")?e:"http://".concat(e):null};t.getReservations=function(e){var t="No";return e.takesReservations&&(t="Yes",e.reservationsUrl&&(t=e.reservationsUrl)),t};var r=function e(t,n){var r=[];return n.forEach((function(n){if(Array.isArray(n)){var a=e(t,n);a.length>0&&r.push(a.shift())}var o=(0,i.getCrop)(t,n);o&&r.push(o)})),r};t.default=r},"Nz+N":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("QILm")),a=i(n("W8MJ")),o=i(n("lwsE")),s=i(n("7W2i")),l=i(n("a1gu")),c=i(n("Nsbk")),u=i(n("uf0L")),d=["author","dateModified","datePublished","headline","alternativeHeadline","thumbnailUrl","video","audio","review","mainEntity","publisher","publication","hasPart"];function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,l.default)(this,n)}}var f=function(e){(0,s.default)(n,e);var t=p(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.author,s=i.dateModified,l=i.datePublished,c=i.headline,u=i.alternativeHeadline,p=i.thumbnailUrl,f=i.video,m=i.audio,h=i.review,g=i.mainEntity,y=i.publisher,v=i.publication,b=i.hasPart,_=(0,r.default)(i,d);return(0,o.default)(this,n),(e=t.call(this,_))["@type"]="CreativeWork",e.author=a,e.dateModified=s,e.datePublished=l,e.headline=c,e.alternativeHeadline=u,e.thumbnailUrl=p,e.video=f,e.audio=m,e.review=h,e.mainEntity=g,e.publisher=y,e.publication=v,e.hasPart=b,e}return(0,a.default)(n)}(u.default);t.default=f},O9F4:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.textClass=t.reporterContainerClass=t.headshotContainerClass=t.headshotClass=t.bodyClass=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=n("3sMT"),s=(0,r.css)("display:flex;justify-content:flex-start;padding-top:5px;margin-bottom:20px;",a.default.breakpoint.small,"{padding-left:2px;}");t.reporterContainerClass=s;var l=(0,r.css)("color:",o.color.content.secondary,";width:100%;p{font-family:",a.default.font.franklinBase,";font-size:",a.default.font.size(15.5),";line-height:",a.default.font.size(21),";margin-top:0;margin-bottom:0;}");t.textClass=l;var c=(0,r.css)("width:98px;min-width:98px;height:98px;min-height:98px;border-radius:50%;overflow:hidden;margin-right:20px;background-color:",o.color.background.tertiary,";",a.default.breakpoint.small,"{width:85px;min-width:85px;height:85px;min-height:85px;}");t.headshotContainerClass=c;var u=(0,r.css)("object-fit:cover;height:100%;width:100%;");t.headshotClass=u;var d=(0,r.css)("margin-left:20px;margin-right:20px;",a.default.breakpoint.small,"{max-width:",a.default.breakpoint.textBodyWidth,"px;margin-left:calc((100% - 600px) / 2);margin-right:0;}");t.bodyClass=d},OGvp:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.titleClass=t.listClass=t.leadInClass=t.imageClass=t.headerClass=t.containerClass=void 0;var r=n("Jqp9"),a=i(n("3Rk2")),o=i(n("wXC7")),s=n("3sMT"),l=(0,a.default)([o.default.breakpoint.medium]),c=(0,r.css)("font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.medium,";border:1px solid ",s.color.stroke.quaternary,";color:",s.color.content.secondary,";background-color:",s.color.background.primary,";max-width:600px;box-sizing:border-box;",l({fontSize:[o.default.font.size(16),o.default.font.size(17)],lineHeight:[o.default.font.size(22),o.default.font.size(24)],width:[o.default.breakpoint.mobileFullWidth,"100%"],padding:["15px 15px 20px","25px"],margin:[o.default.breakpoint.mobileBlockMargins,o.default.breakpoint.desktopStorylineMargins]})," ",o.default.printHide," strong{font-weight:",o.default.font.weight.bold,";}em{font-style:italic;}a{color:",s.color.signal.editorial,";text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:1px;&:hover{text-decoration:none;}}");t.containerClass=c;var u=(0,r.css)("border-bottom:1px solid ",s.color.stroke.quaternary,";padding-bottom:12px;margin-bottom:0;");t.headerClass=u;var d=(0,r.css)("font-weight:",o.default.font.weight.bold,";margin-top:0;margin-bottom:0;",l({fontSize:[o.default.font.size(16),o.default.font.size(17)],lineHeight:[o.default.font.size(22),o.default.font.size(24)]}));t.titleClass=d;var p=(0,r.css)("list-style:disc;li{margin-left:0.875rem;:not(:last-child){",l({marginBottom:["10px","15px"]}),"}}",l({marginTop:["0.75rem","1rem"]}));t.listClass=p;var f=(0,r.css)("font-weight:",o.default.font.weight.medium,";font-family:",o.default.font.franklinBase,";",l({fontSize:[o.default.font.size(16),o.default.font.size(17)],lineHeight:[o.default.font.size(22),o.default.font.size(24)]}));t.leadInClass=f;var m=(0,r.css)("height:14px;padding-top:5px;",l({marginBottom:["5px","10px"]}));t.imageClass=m},OLAn:function(e,t,n){"use strict";var i,r,a=n("VkAN"),o=n.n(a),s=n("gcR/"),l=n.n(s),c=(n("q1tI"),n("eFc+")),u=n.n(c),d=n("Jqp9"),p=n("xf5d"),f=function(e){var t=e.translations,n=e.className;return t&&0!==t.length?l()("div",{className:Object(d.cx)(p.b,n)},void 0,t.map((function(e){return l()("a",{className:p.a,href:e.url,"data-version":e.language.code,title:e.linkText},e.url,e.translatedLinkText?e.translatedLinkText:e.linkText)}))):null};f.displayName="TranslationLinks",f.fragments={translations:u()(i||(i=o()(["\n    fragment TranslationLinks_translations on ArticleTranslation {\n      url\n      linkText\n      translatedLinkText\n      language {\n        code\n      }\n    }\n  "]))),interactiveTranslations:u()(r||(r=o()(["\n    fragment TranslationLinks_interactiveTranslation on InteractiveTranslation {\n      url\n      linkText\n      translatedLinkText\n      language {\n        code\n      }\n    }\n  "])))},f.defaultProps={className:void 0},t.a=f},ONNS:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.twitterAtClass=t.socialBlockClass=t.seperatorClass=t.moreAboutClass=t.bioTreatmentStyles=t.bioLinkClass=t.authorNameClass=t.BioVariantA=t.Bio=void 0;var r=n("3sMT"),a=n("Jqp9"),o=i(n("WThh")),s=i(n("wXC7")),l=(0,o.default)(["medium"]),c=(0,a.themeFn)("treatment",{none:function(e){return(0,a.css)("color:",r.color.content.secondary,";font-family:",s.default.font.franklinBase,";font-weight:",s.default.font.weight.medium,";",l(e,{fontSize:[15,16],lineHeight:[20,22]}),";")},magazine:function(e){return(0,a.css)("color:",r.color.content.secondary,";font-family:",s.default.font.magazineSansBase,";font-weight:",s.default.font.weight.medium,";",l(e,{fontSize:[15,16],lineHeight:[20,22]}),";")}});t.bioTreatmentStyles=c;var u=(0,a.css)();t.twitterAtClass=u;var d=(0,a.css)("display:inline-block;line-height:1em;.",u,"{text-decoration:none;display:inline-block;}");t.bioLinkClass=d;var p=(0,a.css)("display:inline-block;padding-left:3px;");t.socialBlockClass=p;var f=(0,a.css)("color:",r.color.content.quaternary,";margin-right:0.5rem;margin-left:0.5rem;font-size:8px;");t.seperatorClass=f;var m=(0,a.css)("font-weight:",s.default.font.weight.medium,";a.authorPageLinkClass.overrideLinkStyles{text-decoration:underline;color:",r.color.content.primary,";text-decoration-thickness:1px;text-underline-offset:2px;}a.authorPageLinkClass.overrideLinkStyles:hover,a.authorPageLinkClass.overrideLinkStyles:focus{text-decoration:none;color:",r.color.content.primary,";}");t.moreAboutClass=m;var h=(0,a.css)("a.authorPageLinkClass.overrideLinkStyles,a.authorPageLinkClass.overrideLinkStyles:visited,a.authorPageLinkClass.overrideLinkStyles:hover a.authorPageLinkClass.overrideLinkStyles:focus{font-weight:",s.default.font.weight.bold,";color:",r.color.content.primary,";}a.authorPageLinkClass.overrideLinkStyles:hover a.authorPageLinkClass.overrideLinkStyles:focus{text-decoration:none;}");t.authorNameClass=h;var g=(0,a.styled)("div",{target:"e1e7j8ap0"})(c,";color:",r.color.content.secondary,";p{margin-bottom:",s.default.font.size(12),";}a,a:visited{color:",r.color.content.primary,";text-decoration:underline;}a:hover,a:focus{color:",r.color.content.primary,";text-decoration:none;}",s.default.print,";");t.Bio=g;var y=(0,a.styled)("div",{target:"e1e7j8ap1"})(c,";color:",r.color.content.secondary,";margin-top:0.75rem;p{margin-bottom:",s.default.font.size(12),";}a,a:visited{color:",r.color.content.primary,";text-decoration:underline;}a:hover,a:focus{color:",r.color.content.primary,";text-decoration:none;}",s.default.print,";");t.BioVariantA=y},OXmc:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("J4zp")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),s=(i(n("17x9")),i(n("WUXL"))),l=i(n("xCAf")),c=i(n("9jcr")),u=n("+rYN");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}var p=function(e){var t=e.isVisible,n=e.hideTranscript,i=e.podcastName,r=e.onPlayPause,d=e.playerRef,p=e.isPlaying,f=e.audioDuration,m=e.currentTime,h=e.headline,g=e.credits,y=e.summary,v=e.date,b=e.transcript,_=e.showControls,w=(0,o.useState)(),x=(0,a.default)(w,2),k=x[0],O=x[1];return(0,o.useEffect)((function(){var e=document.querySelector("body");t?(O(window.scrollY),e.classList.add(u.visibleBodyClass),e.style.top="-".concat(k,"px")):(e.classList.remove(u.visibleBodyClass),e.style.removeProperty("top"),void 0!==k&&window.scroll(0,k))}),[t]),o.default.createElement(u.TranscriptContainer,{isVisible:t},o.default.createElement(c.default,{onClick:n}),o.default.createElement(u.Background,{isVisible:t,onClick:n}),o.default.createElement(u.Document,{isVisible:t},o.default.createElement("div",{"aria-labelledby":"modal-title",role:"region"},o.default.createElement(s.default,{isVisible:t,hideTranscript:n,podcastName:i,onPlayPause:r,playerRef:d,isPlaying:p,audioDuration:f,currentTime:m,showControls:_}),o.default.createElement(l.default,{headline:h,credits:g,summary:y,date:v,transcript:b}))))};p.displayName="Transcript",p.defaultProps={podcastName:void 0,onPlayPause:void 0,playerRef:void 0,hideTranscript:void 0,isPlaying:void 0,audioDuration:void 0,currentTime:void 0,isVisible:void 0,headline:void 0,credits:void 0,summary:void 0,date:void 0,transcript:void 0,showControls:!0};var f=p;t.default=f},"Oc+P":function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i,r=n("VkAN"),a=n.n(r),o=n("gcR/"),s=n.n(o),l=n("lwsE"),c=n.n(l),u=n("W8MJ"),d=n.n(u),p=n("7W2i"),f=n.n(p),m=n("a1gu"),h=n.n(m),g=n("Nsbk"),y=n.n(g),v=n("q1tI"),b=n("eFc+"),_=n.n(b),w=n("M4W2"),x=n.n(w),k=n("Jqp9"),O=n("wXC7"),E=n.n(O),T=Object(k.css)("margin:",E.a.breakpoint.mobileBlockMargins,";width:",E.a.breakpoint.mobileFullWidth,";max-width:",E.a.breakpoint.textBodyWidth,"px;twitter-widget,.twitter-tweet,iframe{margin-left:auto;margin-right:auto;}",E.a.breakpoint.medium,"{margin:",E.a.breakpoint.desktopMediaMargins,";width:100%;}");function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=y()(e);if(t){var r=y()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return h()(this,n)}}var S=function(e){f()(n,e);var t=C(n);function n(){return c()(this,n),t.apply(this,arguments)}return d()(n,[{key:"componentDidMount",value:function(){x()("https://platform.twitter.com/widgets.js").then((function(){var e;null!==(e=window.twttr)&&void 0!==e&&e.widgets&&window.twttr.widgets.load()}))}},{key:"render",value:function(){var e=!0===this.props.data.hideMedia?"hidden":"",t=this.props.data.html,n=t?t.replace(/<blockquote /,'<blockquote data-cards="'.concat(e,'" ')):"";return s()("div",{className:T,dangerouslySetInnerHTML:{__html:n}})}}]),n}(v.Component);S.displayName="TwitterEmbedBlock",S.defaultProps={hideMedia:void 0},S.fragments={data:_()(i||(i=a()(["\n    fragment TwitterEmbedBlock_data on TwitterEmbedBlock {\n      twitterUrl\n      snapshot\n      hideMedia\n      html\n    }\n  "])))}},Ogzn:function(e,t,n){"use strict";n.d(t,"b",(function(){return A}));var i,r,a=n("VkAN"),o=n.n(a),s=n("gcR/"),l=n.n(s),c=n("QILm"),u=n.n(c),d=n("lSNA"),p=n.n(d),f=n("q1tI"),m=n.n(f),h=n("eFc+"),g=n.n(h),y=n("17x9"),v=n.n(y),b=n("YNKw"),_=n.n(b),w=n("tLpV"),x=n("4mEQ"),k=n("DxDJ"),O=n.n(k),E=n("42oi"),T=n("XMA8"),C=["data","displayStyle","linkTrackingParamOverrides","showImageCredits"];function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M={action:"click",module:"RelatedLinks"},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=P(P({},M),t),i=-1===e.indexOf("?")?"?":"&",r=Object.keys(n).map((function(e){return"".concat(e,"=").concat(n[e])})).join("&");return"".concat(e).concat(i).concat(r)},A=function(e,t){var n=null!=e&&e.promotionalMedia?null:Object(E.a)(null==e?void 0:e.collections),i=n?Object(T.c)(n):Object(T.c)(e);return Object(b.selectImageRendition)(i,(function(e){return e.name}),t)||void 0},j=function(e){var t,n,i;return(null===(t=e.promotionalMedia)||void 0===t?void 0:t.credit)||(null===(n=e.promotionalMedia)||void 0===n||null===(i=n.promotionalMedia)||void 0===i?void 0:i.credit)},L=function(e){var t,n,i,r,a,o=e.data,s=e.displayStyle,c=e.linkTrackingParamOverrides,d=e.showImageCredits,p=u()(e,C);if(!o)return null;var f=o.headline,h=void 0===f?{}:f,g=h.default,y=h.seo,v=o.summary,b=o.promotionalHeadline,k=o.promotionalSummary,E=o.targetUrl,T=o.url,S=Object(x.getUrl)(T,E),M="".concat(null===(t=A(o,!0))||void 0===t?void 0:t.url," ").concat(null===(n=A(o,!0))||void 0===n?void 0:n.width,"w, ").concat(null===(i=A(o,!1))||void 0===i?void 0:i.url),L="(max-width:".concat(O.a.width.medium,"px) ").concat(null===(r=A(o,!0))||void 0===r?void 0:r.width,"px"),R=!A(o,!0),N="string"!=typeof s||"standard"!==s.toLowerCase()||R?null===(a=A(o,!1))||void 0===a?void 0:a.url:l()(w.RelatedLinkImage,{srcSet:M,sizes:L});return m.a.createElement(_.a,P({displayStyle:s,headline:Object(x.getHeadline)(g,b),summary:Object(x.getSummary)(v,k),media:N,caption:d&&j(o),url:S?I(S,c):null,pubDate:o.firstPublished,seoHeadline:y,typeOfMaterials:null==o?void 0:o.typeOfMaterials},p))},R=g()(i||(i=o()(['\n  fragment SharedRelatedLinkBlock_promoImage on Image {\n    id\n    credit\n    crops(\n      renditionNames: ["threeByTwoSmallAt2X", "videoLarge", "mediumThreeByTwo440", "thumbLarge"]\n    ) {\n      renditions {\n        url\n        name\n        width\n      }\n    }\n  }\n'])));L.fragments={data:g()(r||(r=o()(["\n    fragment SharedRelatedLinkBlock_data on HasPromotionalProperties {\n      promotionalHeadline\n      promotionalSummary\n      ... on CreativeWork {\n        headline {\n          default\n          seo\n        }\n        summary\n      }\n      ... on Published {\n        url\n        firstPublished\n      }\n      ... on Promo {\n        id\n        targetUrl\n      }\n      ... on Article {\n        id\n        typeOfMaterials\n        collections(type: SPOTLIGHT) @filterEmpty {\n          mobileHeader\n          promotionalMedia {\n            ...SharedRelatedLinkBlock_promoImage\n          }\n        }\n      }\n      promotionalMedia {\n        ...SharedRelatedLinkBlock_promoImage\n        ... on Video {\n          id\n          promotionalMedia {\n            ...SharedRelatedLinkBlock_promoImage\n          }\n        }\n        ... on Audio {\n          id\n          promotionalMedia {\n            ...SharedRelatedLinkBlock_promoImage\n          }\n        }\n        ... on Slideshow {\n          id\n          promotionalMedia {\n            ...SharedRelatedLinkBlock_promoImage\n          }\n        }\n        ... on Interactive {\n          id\n          promotionalMedia {\n            ...SharedRelatedLinkBlock_promoImage\n          }\n        }\n        ... on EmbeddedInteractive {\n          id\n          promotionalMedia {\n            ...SharedRelatedLinkBlock_promoImage\n          }\n        }\n      }\n    }\n    ","\n  "])),R)};v.a.shape({action:v.a.string,module:v.a.string,pgtype:v.a.string});L.defaultProps={data:null,displayStyle:"standard",linkTrackingParamOverrides:{},showImageCredits:!1},t.a=L},OhS4:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lSNA")),a=i(n("QILm")),o=i(n("W8MJ")),s=i(n("lwsE")),l=i(n("7W2i")),c=i(n("a1gu")),u=i(n("Nsbk")),d=i(n("uf0L")),p=["url","runtime","location","startDate","stopDate"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.default)(this,n)}}var g=function(e){(0,l.default)(n,e);var t=h(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.url,o=(i.runtime,i.location),l=i.startDate,c=i.stopDate,u=(0,a.default)(i,p);return(0,s.default)(this,n),(e=t.call(this,m(m({},u),{},{url:r})))["@type"]="TheaterEvent",e.location=o,e.startDate=l,e.endDate=c,e}return(0,o.default)(n)}(d.default);t.default=g},Ol7c:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.titleClass=t.singleCardClass=t.itemClass=t.contextCardClass=void 0;var r=n("Jqp9"),a=i(n("3Rk2")),o=i(n("wXC7")),s=n("3sMT"),l=(0,a.default)([o.default.breakpoint.medium]),c=(0,r.css)("font-weight:",o.default.font.weight.medium,";",l({fontSize:[o.default.font.size(16),o.default.font.size(17)],lineHeight:[o.default.font.size(22),o.default.font.size(24)]})," strong{font-weight:",o.default.font.weight.bold,";}em{font-style:italic;}a{color:",s.color.signal.editorial,";text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:1px;&:hover{text-decoration:none;}}");t.contextCardClass=c;var u=(0,r.css)("font-weight:",o.default.font.weight.bold,";",l({fontSize:[o.default.font.size(16),o.default.font.size(17)],lineHeight:[o.default.font.size(22),o.default.font.size(24)]})," margin:0;");t.titleClass=u;var d=(0,r.css)("&:not(:last-child){padding-bottom:",o.default.font.size(24),";}");t.itemClass=d;var p=(0,r.css)("&:not(:last-child){padding-bottom:0.7rem;}",o.default.breakpoint.small,"{&:not(:last-child){padding-bottom:1rem;}}");t.singleCardClass=p},OmBZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return null==e?void 0:e.some((function(e){return"internal-storyline-inline-no"===(null==e?void 0:e.displayName)}))};t.default=i},Oqnd:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.mediaFigCaptionSizeStyles=t.default=void 0;var r=n("Jqp9"),a=n("3sMT"),o=i(n("wXC7")),s=i(n("MKiQ")),l=(0,r.themeFn)("mediaSize",{small:function(e){return(0,r.css)("display:flex;flex-direction:column;width:calc(50% - 15px);margin:0 0 0 15px;",e.theme.breakpointMap.small,"{width:260px;margin:auto 0 15px 15px;",s.default,"{margin-top:auto;}","rightToLeft"===e.theme.languageDirection?"margin-right:7px":null,";}",e.theme.breakpointMap.medium,"{margin-left:15px;}",e.theme.breakpointMap.extraLarge,"{width:330px;margin-left:15px;}")},medium:function(e){return(0,r.css)(e.theme.breakpointMap.extraLarge,"{max-width:",o.default.breakpoint.textBodyWidthExtraLarge,"px;}")},large:function(e){return(0,r.css)("max-width:none;",e.theme.breakpointMap.small,"{margin-left:",o.default.grid.pageMargin,"px;}",e.theme.breakpointMap.medium,"{margin-left:",o.default.grid.pageMargin,"px;}",e.theme.breakpointMap.mediumLarge,"{max-width:",o.default.breakpoint.mediumMediaExtralarge,"px;margin-left:0;}",e.theme.breakpointMap.extraLarge,"{width:900px;margin-left:0;}")},full:function(e){return(0,r.css)("max-width:",o.default.breakpoint.textBodyWidth,"px;","rightToLeft"===e.theme.languageDirection?"margin-right: ".concat(o.default.grid.pageMargin,"px"):"margin-left: ".concat(o.default.grid.pageMargin,"px"),";",e.theme.breakpointMap.small,"{max-width:900px;","rightToLeft"===e.theme.languageDirection?"margin-right: ".concat(o.default.grid.pageMargin,"px"):"margin-left: ".concat(o.default.grid.pageMargin,"px;"),";}",e.theme.breakpointMap.medium,"{max-width:900px;}",e.theme.breakpointMap.extraLarge,"{max-width:900px;}")}});t.mediaFigCaptionSizeStyles=l;var c=(0,r.themeFn)("languageDirection",{rightToLeft:(0,r.css)("text-align:right;direction:rtl;unicode-bidi:isolate;")}),u=(0,r.styled)("figcaption",{target:"ewdxa0s0"})("font-family:",o.default.font.serifBase,";color:",a.color.content.quaternary,";a{color:",a.color.signal.editorial,";text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:1px;&:hover,&:focus{text-decoration:none;}}margin:10px ",o.default.grid.pageMargin,"px 0 ",o.default.grid.pageMargin,"px;text-align:left;",(function(e){return"\n    ".concat(e.theme.breakpointMap.small," {\n      ").concat("rightToLeft"===e.theme.languageDirection?"margin-left: 20px;margin-right: 0;":"margin-left: 0;margin-right: 20px;","\n    }\n  ")}),";",l,";",c,";");t.default=u},"OwL/":function(e,t,n){"use strict";var i=n("gcR/"),r=n.n(i),a=n("pVnL"),o=n.n(a),s=n("q1tI"),l=n.n(s),c=n("2mql"),u=n.n(c),d=n("FSO8");t.a=function(e){var t=function(t){return r()(d.a.Consumer,{},void 0,(function(n){return l.a.createElement(e,o()({},t,{newsletterContext:n}))}))},n=e.displayName||e.name;return t.displayName="withNewsletters(".concat(n,")"),t.WrappedComponent=e,u()(t,e),t}},"P3/q":function(e,t,n){"use strict";var i=n("VkAN"),r=n.n(i),a=n("lSNA"),o=n.n(a),s=n("q1tI"),l=n.n(s),c=n("eFc+"),u=n.n(c),d=n("9ref"),p=n("WGfQ"),f=n.n(p),m=n("gcR/"),h=n.n(m),g=n("510Z"),y=function(e){var t=e.thumbnail,n=void 0===t?{}:t,i=e.media,r=void 0===i?{}:i;if(!n||!n.url)return null;var a=r.podcastSeries;return h()(g.a,{size:"SMALL",alt:"".concat(a.title," Poster"),defaultCropSrc:n.url})};y.displayName="Thumbnail",y.defaultProps={thumbnail:null,media:null};var v=y,b=n("Jqp9"),_=n("3sMT"),w=n("wXC7"),x=n.n(w),k=Object(b.css)("display:block;padding:1rem 0 0.5rem;background:",_.light.colors.background.primary.hex,";",x.a.printHide,";"),O=function(e){return h()("div",{className:k},void 0,h()(d.a,{media:e.media}),e.children)};O.displayName="Player",O.defaultProps={media:null,children:void 0};var E,T=O;function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(e){return l.a.createElement(f.a,S(S({},e),{},{playerComponent:T,thumbnailComponent:v}))};P.fragments={data:u()(E||(E=r()(["\n    fragment AudioBlock_data on AudioBlock {\n      media {\n        id\n        headline {\n          default\n        }\n        promotionalHeadline\n        length\n        sourceId\n        summary\n        podcastSeries {\n          title\n          summary\n          image {\n            id\n            crops(cropNames: [FLEXIBLE]) {\n              renditions {\n                url\n                name\n                width\n                height\n              }\n            }\n          }\n        }\n        ...SpanAudio_media\n      }\n    }\n    ","\n  "])),d.a.fragments.media)};t.a=P},P8eT:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.swiperNavClass=t.quoteCardClass=void 0;var r=n("Jqp9"),a=n("3sMT"),o=i(n("wXC7")),s=(0,r.css)("display:flex;flex-direction:row;justify-content:center;position:relative;min-height:40px;");t.swiperNavClass=s;var l=(0,r.css)("display:flex;flex-direction:column;justify-content:space-between;height:100%;font-family:",o.default.font.cheltenham,";font-size:",o.default.font.size(21),";line-height:",o.default.font.size(27),";font-weight:",o.default.font.weight.light,";",o.default.breakpoint.small,"{font-size:",o.default.font.size(22),";line-height:",o.default.font.size(28),";}strong{font-weight:",o.default.font.weight.bold,";}em{font-style:italic;}a{color:",a.color.signal.editorial,";text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:1px;&:hover{text-decoration:none;}}");t.quoteCardClass=l},PCFz:function(e,t,n){"use strict";var i,r,a,o,s=n("lSNA"),l=n.n(s),c=n("q1tI"),u=n.n(c),d=n("X6oL"),p=n("Jqp9"),f=n("gcR/"),m=n.n(f),h=n("PgO9"),g=n("HUmG"),y=u.a.forwardRef((function(e,t){var n=e.redirectUri,s=Object(h.a)().user,l=Object(g.d)(s)?"".concat(vi.env.AUTH_HOST,"/oauth/authorize"):n;return u.a.createElement("form",{ref:t,style:{visibility:"hidden"},method:"post",action:l,"data-testid":"MagicLinkForm"},i||(i=m()("input",{value:"web.fwk.vi",name:"client_id",type:"hidden"})),m()("input",{value:n,name:"redirect_uri",type:"hidden"}),r||(r=m()("input",{value:"code",name:"response_type",type:"hidden"})),a||(a=m()("input",{value:"no-state",name:"state",type:"hidden"})),o||(o=m()("input",{value:"default",name:"scope",type:"hidden"})))}));y.displayName="MagicLinkForm";var v=y;function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var _=Object(p.css)("background:none;border-radius:10px;"),w=u.a.forwardRef((function(e,t){var n=e.className,i=e.trackingObject,r=e.children,a=e.redirectUri,o=e.handleClick,s=Object(d.useTracking)().trackEvent,c=u.a.useRef(null);return u.a.createElement(u.a.Fragment,null,u.a.createElement("button",{ref:t,type:"button",onClick:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({eventCallback:function(){o&&o(),c.current&&c.current.submit()},event:"moduleInteraction",eventData:{trigger:"module",type:"ob_click"},module:{element:{url:a}}},i);s(e)},className:Object(p.cx)(_,n),"data-testid":"getstarted-magic-link"},r),u.a.createElement(v,{ref:c,redirectUri:a}))}));w.defaultProps={trackingObject:{},className:void 0,children:"Read in the app",handleClick:null};t.a=w},PNea:function(e,t){e.exports=function(){return'var AdSlot4=function(){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){i(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,o=!1,r=void 0;try{for(var a,d=e[Symbol.iterator]();!(i=(a=d.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){o=!0,r=e}finally{try{i||null==d.return||d.return()}finally{if(o)throw r}}return n}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance. In order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance. In order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var d,l,m=(d={},l={},{publish:function e(t){var n=t.name,i=void 0===n?"":n,n=t.value,o=void 0===n?{}:n,t=t.scope,t=void 0===t?"page":t;"all"!==t&&e({name:i,value:o,scope:"all"}),d[i]||(d[i]={}),d[i][t]||(d[i][t]=[]),d[i][t].push(o),l[i]&&l[i][t]&&l[i][t].forEach(function(e){e(o)})},subscribe:function(e){var t=e.name,n=void 0===t?"":t,t=e.callback,i=void 0===t?function(){}:t,e=e.scope,o=void 0===e?"page":e;l[n]||(l[n]={}),l[n][o]||(l[n][o]=[]);var r=l[n][o].push(i)-1;return d[n]&&d[n][o]&&d[n][o].length&&d[n][o].forEach(function(e){i(e)}),{remove:function(){return l[n][o].splice(r,1)}}},unsubscribeToAll:function(t){Object.keys(l).forEach(function(e){l[e]&&l[e][t]&&delete l[e][t]}),Object.keys(d).forEach(function(e){d[e]&&d[e][t]&&delete d[e][t]})}});function s(e,t,n,i,o,r){var a=1<arguments.length&&void 0!==t?t:0,d=2<arguments.length&&void 0!==n?n:0,l=3<arguments.length&&void 0!==i?i:0,s=4<arguments.length&&void 0!==o?o:0,u=!(5<arguments.length&&void 0!==r)||r;if(!e||1!==e.nodeType)return!1;var c=e.getBoundingClientRect(),t=c.top-a,n=c.left,i=c.bottom,o=c.right,r=0,e=0,a=window.innerHeight,c=window.innerWidth;return u?r+l*s<=i&&e+d*s<=o&&t<=a-l*s&&n<=c-d*s:r<=t&&i<=a}function P(e,t,n){var i="".concat(e,"-").concat(t);try{performance.mark(i),performance.measure(i,n,i);var o=performance.getEntriesByName(i).filter(function(e){return"measure"===e.entryType}),o=o[o.length-1];return o?Math.round(o.duration):0}catch(e){return 0}}function t(e){return-1!==document.cookie.indexOf(e)}function u(e){var t={PURR_AcceptableTrackers:0,PURR_AdConfiguration:5,PURR_DataSaleOptOutUI:2,PURR_DataProcessingConsentUI:3,PURR_AcceptableTrackers_v2:4,PURR_AdConfiguration_v2:5,PURR_DataProcessingPreferenceUI:6,PURR_DataSaleOptOutUI_v2:7,PURR_CaliforniaNoticesUI:8,PURR_EmailMarketingOptInUI:9,PURR_DeleteIPAddress:10,PURR_AdConfiguration_v3:11,PURR_LimitSensitivePI:12,PURR_EmailMarketingOptInUI_v2:13,PURR_AdConfiguration_v4:14},n=function(e){e="; ".concat(document.cookie).split("; ".concat(e,"="));return 2===e.length?e.pop().split(";").shift():null}(e),i={};return Object.keys(t).forEach(function(e){i[e]=function(e,t){t=new RegExp("^.{".concat(t,"}(.)")),t=e.match(t);return(null==t?void 0:t[1])||""}(n,t[e])}),j.forEach(function(t){Object.keys(t.valueMapping).forEach(function(e){t.valueMapping[e]===i[t.name]&&(i[t.name]=e)})}),i}function c(){var e;try{return function(){if("undefined"==typeof window)return!1;var e=window.navigator.userAgent||window.navigator.vendor,t=-1!==e.indexOf("nyt_android"),n=-1!==e.indexOf("nytios"),i=-1!==e.indexOf("nyt_xwords_ios"),e=-1!==e.indexOf("Crosswords");return t||n||i||e}()?null!==(e=null===window||void 0===window?void 0:window.config)&&void 0!==e&&e.PurrDirectives?window.config.PurrDirectives:t("override-purr")?u("override-purr"):V({},N):t("nyt-purr")?u("nyt-purr"):V({},N)}catch(e){return console.warn("cant get directives from cookie or config",e),V({},N)}}function p(e){return e&&"_"!==e?e:null}function v(){var e=(n=c()).PURR_AdConfiguration_v4,t=n.PURR_AdConfiguration_v3,n=n.PURR_AdConfiguration_v2;return function(e){e=e||window.location.search,e=new URLSearchParams(e);return e&&e.get("privacy-override")}()||p(e)||p(t)||p(n)}var h="message",E="visibilitychange",f="mouseenter",A="mouseleave",b="readystatechange",I="unload",D="slotRequested",O="slotResponseReceived",T="slotRenderEnded",S="slotOnload",U="impressionViewable",L={RESPONSE_START:"responseStart",TIME_DEFINED:"timeDefined",TIME_CALLED:"timeCalled",TIME_CALL_SENT:"timeCallSent",TIME_RECEIVED:"timeReceived",TIME_RENDERED:"timeRendered",TIME_LOADED:"timeLoaded",TIME_VIEWED:"timeViewed"},M={AD_EMPTY:"AdEmpty",AD_BLOCK_ON:"AdBlockOn",AD_DEFINED:"AdDefined",AD_CALLED:"AdCalled",AD_REFRESHED:"AdRefreshed",AD_REQUEST_SENT:"AdRequestSent",AD_RESPONSE:"AdResponse",AD_RENDERED:"AdRendered",AD_LOADED:"AdLoaded",AD_SLOT_READY:"AdSlotReady",AD_VIEWABLE:"AdViewable",AD_ENTERED_VIEWPORT:"AdEnteredViewport",AD_LEFT_VIEWPORT:"AdLeftViewport",AD_MOUSE_ENTER:"AdMouseEnter",AD_MOUSE_LEAVE:"AdMouseLeave"},w="AdBlockOn",C="AdsDisabled",R="GptError",k="pos",y="request_time",V=function(){return(V=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},j=[{name:"PURR_AcceptableTrackers",valueMapping:{controllers:"c",processors:"p"}},{name:"PURR_AdConfiguration",valueMapping:{full:"f",npa:"n","adluce-socrates":"s"}},{name:"PURR_DataSaleOptOutUI",valueMapping:{hide:"h",show:"s"}},{name:"PURR_DataProcessingConsentUI",valueMapping:{hide:"h",show:"s"}},{name:"PURR_AcceptableTrackers_v2",valueMapping:{controllers:"c",processors:"p",essentials:"e"}},{name:"PURR_AdConfiguration_v2",valueMapping:{full:"f",rdp:"r",npa:"n",adluce:"a","adluce-socrates":"s"}},{name:"PURR_DataProcessingPreferenceUI",valueMapping:{hide:"h","allow-opt-out":"o","allow-opt-in":"i","allow-opt-in-or-out":"a"}},{name:"PURR_DataSaleOptOutUI_v2",valueMapping:{hide:"h",show:"s","show-opted-out":"o"}},{name:"PURR_CaliforniaNoticesUI",valueMapping:{hide:"h",show:"s"}},{name:"PURR_EmailMarketingOptInUI",valueMapping:{checked:"c",unchecked:"u"}},{name:"PURR_DeleteIPAddress",valueMapping:{delete:"d",keep:"k"}},{name:"PURR_AdConfiguration_v3",valueMapping:{full:"f",rdp:"r",npa:"n",ltd:"l","adluce-socrates":"s"}},{name:"PURR_LimitSensitivePI",valueMapping:{hide:"h",show:"s"}},{name:"PURR_EmailMarketingOptInUI_v2",valueMapping:{checked:"c",unchecked:"u","do-not-display":"d"}},{name:"PURR_AdConfiguration_v4",valueMapping:{full:"f",rdp:"r",npa:"n",ltd:"l","adluce-socrates":"s","no-ads":"a"}}],N={PURR_DataSaleOptOutUI:"hide",PURR_DataSaleOptOutUI_v2:"hide",PURR_CaliforniaNoticesUI:"hide",PURR_DataProcessingConsentUI:"hide",PURR_DataProcessingPreferenceUI:"hide",PURR_AcceptableTrackers_v2:"controllers",PURR_AcceptableTrackers:"controllers",PURR_AdConfiguration_v2:"full",PURR_AdConfiguration:"full",PURR_EmailMarketingOptInUI:"unchecked",PURR_DeleteIPAddress:"delete",PURR_AdConfiguration_v3:"full",PURR_LimitSensitivePI:"hide",PURR_EmailMarketingOptInUI_v2:"unchecked",PURR_AdConfiguration_v4:"full"},z="rdp",x="npa",q="ltd",F="adluce-socrates",Y="no-ads";var W=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:window;return e.googletag=e.googletag||{},e.googletag.cmd=e.googletag.cmd||[],e.googletag};function B(){var e,t,n,i=function(){window.googletag?W().cmd.push(function(){W()._loadStarted_||m.publish({name:M.AD_EMPTY,value:{type:w}})}):m.publish({name:M.AD_EMPTY,value:{type:R}})},o=v()===q?"https://pagead2.googlesyndication.com/tag/js/gpt.js":"https://securepubads.g.doubleclick.net/tag/js/gpt.js";W().apiReady?i():(e=o,t=i,n=function(){m.publish({name:M.AD_EMPTY,value:{type:R}})},o=document.getElementsByTagName("head")[0],i=document.createElement("script"),t&&(i.onload=t),n&&(i.onerror=n),i.src=e,i.async=!0,o.appendChild(i))}var K=function(e,t){m.publish({name:M.AD_CALLED,scope:e.id,value:i({id:e.id,position:e.position,slot:e.slot},L.TIME_CALLED,t)})};function $(i){W().cmd.push(function(){var e=i.id,t=i.slot,n=P(e,L.TIME_CALLED,L.RESPONSE_START);K(i,n),window.apstag&&window.apstag.setDisplayBids&&window.apstag.setDisplayBids(),t.setTargeting(y,n.toString()),W().display(e)})}var H=function(){m.publish({name:M.AD_REFRESHED,scope:"all"})},Z=function(e){var t,n;return null===(t=("undefined"!=typeof window&&window||{}).AdSlot4)||void 0===t||null===(n=t.getAdOnPage)||void 0===n?void 0:n.call(t,e)};function Q(e,t){H(),W().cmd.push(function(){e&&e.forEach(function(e){var t=e.getSlotElementId(),n=P(t,L.TIME_CALLED,L.RESPONSE_START),t=Z(t);K(t,n),e.setTargeting(y,n.toString())}),e&&t?W().pubads().refresh(e,t):e?W().pubads().refresh(e):t?W().pubads().refresh(null,t):W().pubads().refresh()})}function G(e,t){var n=e.displayed,i=e.slot;t.isRefresh&&n?(Q([i],t.changeCorrelator?null:{changeCorrelator:!1}),t.changeCorrelator=!1):($(e),e.displayed=!0)}var J=function(e,t){return!!(e&&t&&t.unobserve&&"function"==typeof t.unobserve)&&(t.unobserve(e),!0)};function X(e,t,n,i){var e=0<arguments.length&&void 0!==e?e:{},o=1<arguments.length?t:void 0,r=2<arguments.length?n:void 0,a=3<arguments.length?i:void 0;if(e.exclusive&&e.div){var d,l=e.div;switch(e.type){case"only-child":!function(e,t){t=1<arguments.length&&void 0!==t?t:{},(e=e&&e.empty||t.unrenderedAds||[]).length&&e.forEach(function(e){J(e.AdSlotElement,e.observer),m.publish({name:M.AD_EMPTY,value:{type:e.id},scope:e.id})}),t.unrenderedAds=[],t.stopAdCalls=!0}({empty:function(t,e){return e=1<arguments.length&&void 0!==e?e:{},Object.values(e).filter(function(e){return t!==e.id})}(l,o)},a);break;case"family-plan":void 0!==(d=o[l]&&o[l].slot&&(o[l].slot.getResponseInformation()||{}).lineItemId)&&r({adv:d,excl:"family"});break;case"blank":m.publish({name:M.AD_EMPTY,value:{type:l},scope:l})}return 1}}function ee(e){return!!(e||(t=document.referrer||"",(e=/([a-zA-Z0-9_\\-.]+)(@|%40)([a-zA-Z0-9_\\-.]+).([a-zA-Z]{2,5})/).test(t)||e.test(window.location.href))||v()===Y||v()===F);var t}function te(t){return W().pubads().getSlots().find(function(e){return e.getSlotElementId()===t})}function ne(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(){},t=new IntersectionObserver(function(e,t){e=e[0];n(e,t)},t);return e&&t.observe(e),t}function ie(o,e,r){return ne(o.AdSlotElement,{root:null,rootMargin:"".concat(e,"px"),threshold:0},function(e,t){return n=t,i=o,t=r,void(e.isIntersecting&&(G(i,t),n.unobserve(i.AdSlotElement)));var n,i})}var e={init:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=e.adsDisabled,n=e.adTargeting,n=void 0===n?{}:n;return(t=t||ee())||(W().cmd.push(function(){!function(){switch(v()){case z:W().pubads().setPrivacySettings({restrictDataProcessing:!0});break;case x:W().pubads().setRequestNonPersonalizedAds(1);break;case q:W().pubads().setPrivacySettings({limitedAds:!0})}}()}),n=g(g({},n),{},{purr:v()})),g(g({},e),{},{adTargeting:n,adsDisabled:t})}};function oe(e,t,n,i){e.displayed||(e.observer=ie(e,i,n),n.unrenderedAds.push(e)),t[e.id]=e}function re(e,t){m.publish({name:t,scope:e.id,value:{id:e.id,position:e.position,creativeId:e.creativeId,lineItemId:e.lineItemId}})}function ae(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};t.potentiallyViewable&&(null!==(e=t.viewabilityTimeout)&&void 0!==e||(t.viewabilityTimeout=setTimeout(function(){return function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};delete e.viewabilityTimeout,delete e.potentiallyViewable,e.viewable=!0,re(e,M.AD_ENTERED_VIEWPORT)}(t)},1e3)))}function de(e,t,n){var i;e.target&&(i=null===n.root,n=242e3<=e.target.clientWidth*e.target.clientHeight?ve:pe,(n=e.intersectionRatio>=n)||(delete t.potentiallyViewable,clearTimeout(t.viewabilityTimeout),delete t.viewabilityTimeout,i?delete t.potentiallyViewableInViewport:delete t.potentiallyViewableInContainer),e.isIntersecting&&0!==e.intersectionRatio?!n||t.potentiallyViewable||t.viewable||(i&&!t.potentiallyViewableInViewport?(t.potentiallyViewableInViewport=!0,t.viewabilityContainer&&!t.potentiallyViewableInContainer||(t.potentiallyViewable=!0,ae(t))):i||t.potentiallyViewableInContainer||(t.potentiallyViewableInContainer=!0,t.potentiallyViewableInViewport&&(t.potentiallyViewable=!0,ae(t)))):t.viewable&&(re(t,M.AD_LEFT_VIEWPORT),delete t.viewable))}function le(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};e.viewabilityTimeout&&(clearTimeout(e.viewabilityTimeout),delete e.viewabilityTimeout),e.viewable&&(delete e.viewable,e.potentiallyViewable=!0,re(e,M.AD_LEFT_VIEWPORT))}function se(e){var t=(e.target.parentNode.id.match(/^google/)?e.target.parentNode:e.target).parentNode.id,n=(i=te(t)).getTargeting(k),i=(o=i.getResponseInformation()).sourceAgnosticCreativeId,o=o.sourceAgnosticLineItemId;m.publish({name:e.type===f?M.AD_MOUSE_ENTER:M.AD_MOUSE_LEAVE,scope:t,value:{type:e.type===f?"hover_mouse_enter":"hover_mouse_leave",id:t,position:n,creativeId:i,lineItemId:o}})}function ue(){return console.warn("::warning:: this function is deprecated")}function ce(){return!("undefined"==typeof window||!window.document||!window.document.createElement)&&window.self!==window.top}var pe=.5,ve=.3,fe=[0,.001,pe,ve];function ge(e,t,n){return W().defineSlot(e,t,n)}function me(t,e){return(e=function(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:[]).filter(function(e){return!Number.isNaN(Number(e[0]))&&1<e.length}).sort(function(e,t){return t[0]-e[0]})}(e).find(function(e){return e[0]<=t}))&&e[1]||[]}function he(e){var t,n=e.observer,i=e.viewabilityObservers,o=e.AdSlotElement;return null!=n&&n.unobserve(o),e.observer=null,delete e.potentiallyViewable,delete e.potentiallyViewableInContainer,delete e.potentiallyViewableInViewport,e.viewabilityObservers=(t=i,(n=null==o?void 0:o.querySelector("iframe"))&&(i=t.viewportObserver,o=t.containerObserver,J(n,i),J(n,o),o=A,n.removeEventListener(f,se),n.removeEventListener(o,se)),t),e}function Ee(e){var n,t,i=null===(r=document)||void 0===r?void 0:r.getElementById(e.id),o=null==i?void 0:i.querySelector("iframe"),r=he(e);return r.AdSlotElement=i,r.viewabilityObservers=(n=r,i=ne(e=o,{root:null,rootMargin:"0px",threshold:fe},function(e,t){return de(e,n,t)}),n.viewabilityContainer&&(t=ne(e,{root:n.viewabilityContainer,rootMargin:"0px",threshold:fe},function(e,t){return de(e,n,t)})),{viewportObserver:i,containerObserver:t}),null!=o&&o.addEventListener(f,se),null!=o&&o.addEventListener(A,se),r}function Ae(e){return e&&null!=e&&e.getSlotElementId&&null!=e&&e.getTargeting?{id:e.getSlotElementId(),position:e.getTargeting(k)[0]||""}:{}}function be(e){var t=(i=Ae(e.slot)).id,n=i.position,i=P(t,L.TIME_CALL_SENT,L.RESPONSE_START);m.publish({name:M.AD_REQUEST_SENT,value:g(g({},e),{},{id:t,position:n,timeCallSent:i}),scope:t})}function we(e){var t=(i=Ae(e.slot)).id,n=i.position,i=P(t,L.TIME_RECEIVED,"".concat(t,"-").concat(L.TIME_CALLED));m.publish({name:M.AD_RESPONSE,value:g(g({},e),{},{id:t,position:n,timeReceived:i}),scope:t})}function Re(e){var t=(o=Ae(e.slot)).id,n=o.position,i=(r=e.slot.getResponseInformation()).sourceAgnosticCreativeId,o=r.sourceAgnosticLineItemId,r=P(t,L.TIME_VIEWED,"".concat(t,"-").concat(L.TIME_CALLED));m.publish({name:M.AD_VIEWABLE,value:g(g({},e),{},{id:t,position:n,creativeId:i,lineItemId:o,timeViewed:r}),scope:t})}function ye(e){var t=window.location.href,e=e.replace(/[[]]/g,"\\$&"),t=new RegExp("[?&]".concat(e,"(=([^&#]*)|&|#|$)")).exec(t);return t&&t[2]?decodeURIComponent(t[2].replace(/\\+/g,"")):""}function _e(e){var t=ye("ad-keywords"),o=g(g({},e),{},{vp:window.matchMedia("(min-width: 970px)").matches?"large":window.matchMedia("(min-width: 728px)").matches?"medium":"small",uap:(e=window.navigator.userAgent).match(/(nyt)[_wd-]*(ios)/i)?"ios":e.match(/(nyt)[_wd-]*(android)/i)?"android":"browser"},t?i({},"adv",t):null);return W().cmd.push(function(){var n,t,i=(n=o,t=W().pubads().getTargetingKeys(),Object.keys(n).filter(function(e){return t.indexOf(e)<0}).reduce(function(e,t){return e[t]=n[t],e},{}));Object.keys(i).forEach(function(e){W().pubads().setTargeting(e,i[e])})}),o}function Pe(e){return function(){Object.values(e()).forEach(function(e){e.viewable&&re(e,M.AD_LEFT_VIEWPORT)})}}function Ie(e){return function(){"visible"===document.visibilityState?Object.values(e()).forEach(ae):Object.values(e()).forEach(le)}}var De={default:[[0,[0,0]]]},Oe=[[0,[3,7]]];return function(){if(window.AdSlot4&&window.AdSlot4.init)return window.AdSlot4;var t={},w=window.AdSlot4||{};w.props={},w.events=m,w.getSlot=te,w.refreshAdsInView=Q,w.getAdsOnPage=function(){return t},w.getAdOnPage=function(e){return t[e]};function p(){return R}var v=[e],R={isRefresh:!1,changeCorrelator:!1,stopAdCalls:!1,unrenderedAds:[]},y=[],n=!0,f=!1;if(w.initializeAd=function(e,t){var n,i;if(!w.isAdSlotReady())return w.events.subscribe({name:M.AD_SLOT_READY,callback:function(){return w.initializeAd(e,t)}}),!1;var o,r,a=w.props,d=a.adUnitPath,l=a.sizeMapping,s=a.hideTopAd,u=a.adsDisabled,c=t.id,p=t.position,v=t.sizeKey,f=t.lazyLoad,g=t.truePosition,a=t.adUnitPath,m=t.adTargeting,h=t.viewabilityContainerId,E=a||d,v=v||p,A=_(document.querySelectorAll("[data-ad-view-id]")).find(function(e){return e.dataset.adViewId===h}),b=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:De,n=ye("unfillAd");return"all"===n||e&&e===n?Oe:e in t?t[e]:t.default}(v,l);return("top"!==p||!s)&&(u?(w.events.publish({name:M.AD_EMPTY,value:{type:C}}),!1):!c||!E||!b||null!=e&&null!==(n=e.classList)&&void 0!==n&&n.contains("placed-ad")||null!=e&&null!==(i=e.parentNode)&&void 0!==i&&null!==(r=i.classList)&&void 0!==r&&r.contains("placed-ad")||y.includes(c)?(!y.includes(c)||(o=w.getAdsOnPage())&&o[c]&&e!==o[c].AdSlotElement&&oe(Ee(o[c]),o,R,w.props.offset),!1):R.stopAdCalls?(w.events.publish({name:M.AD_EMPTY,value:{type:c},scope:c}),!1):(r=y,(o=c)&&r.push(o),W().cmd.push(function(){var e,t,n,e=(e=c,t=E,i=b,ce()?o=ge(t,me(window.outerWidth,i),e):(o=ge(t,["fluid"],e),n=W().sizeMapping(),[].concat(i).forEach(function(e){n.addSize([e[0],0],e[1])}),null!==o&&void 0!==o&&o.defineSizeMapping(n.build())),o),i=g||p;null!=e&&e.setTargeting("div",c),null!=e&&e.setTargeting(k,i),m&&0<Object.keys(m).length&&null!=e&&e.updateTargetingFromMap(m),null!=e&&e.setCollapseEmptyDiv(!0),null!=e&&e.addService(W().pubads());var o=Ee({id:c,slot:e,position:i,sizes:b,viewabilityObservers:null,viewabilityContainer:A});w.events.publish({name:M.AD_DEFINED,value:{id:c,pos:i,sizes:b,truePosition:g,timeDefined:P(c,L.TIME_DEFINED,L.RESPONSE_START),slot:e},scope:c});i=w.getAdsOnPage();f||(i[c]&&i[c].slot?Q([e]):$(o),o.displayed=!0),oe(o,i,R,w.props.offset)}),!0))},w.fillPlacements=function(e){return!!Object.keys(w.props).length&&(!w.props.adsDisabled&&(function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0,n=2<arguments.length?arguments[2]:void 0,i=0;i<e.length;i++){var o=e[i],r=o.id,a=o.dataset,d=a.position,l=a.sizeKey,s=a.lazyLoad,u=void 0===s?"true":s,c=a.slotId,p=a.adUnitPath,s="false"!==u,a=o,u=d,d=c&&c!==r;(r||c)&&u&&(d&&!t||!d)&&(d&&(u=c,(d=document.createElement("div")).id=c,d.setAttribute("style","display: block; text-align: center; height: 100%"),a=d,o.appendChild(d)),n(a,{id:a.id,position:u,sizeKey:l,lazyLoad:s,adUnitPath:p}),o.classList.add("placed-ad"))}}(document.querySelectorAll(".place-ad:not(.placed-ad)"),e,w.initializeAd),!0))},w.updateAdReq=function(t,n){W().cmd.push(function(){var e=te(n);w.props.adTargeting=function(){var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=2<arguments.length?arguments[2]:void 0,r={};return Object.keys(i).forEach(function(e){var t,n="".concat(i[e]);o?null!==(t=o.setTargeting)&&void 0!==t&&t.call(o,e,n):(r[e]=n,W().pubads().setTargeting(e,n))}),g(g({},e),r)}(t,w.getAdReq(),e)})},w.getAdReq=function(){return w.props&&w.props.adTargeting||{}},w.refreshAd=function(e){if(w.props.adsDisabled)return!1;var t=w.getAdOnPage(e);return!(null==t||!t.displayed)&&(w.getAdsOnPage()[e]=he(t),le(t),t.observer=ie(t,w.props.offset,g(g({},R),{},{isRefresh:!0})),!0)},w.refreshAds=function(){var i;w.props.adsDisabled||(R.isRefresh=!0,R.changeCorrelator=!0,R.unrenderedAds=[],n=!1,y=[],i=w.getAdsOnPage(),Object.entries(i).forEach(function(e){var t=r(e,2),n=t[0],e=t[1],t=e.displayed;R.unrenderedAds.push(e),t&&(i[n]=he(e),le(e),e.observer=ie(e,w.props.offset,R))}),setTimeout(function(){n=!0},2e3))},w.removeAdPlacement=function(n){W().cmd.push(function(){var e,t=te(n);W().destroySlots([t]),e=n,e=(t=y).indexOf(e),t.splice(e,1)})},w.init=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(w.isAdSlotReady())return!1;var t,n,i,o=e.plugins,r=(v=o||v).reduce(function(e,t){return t.init&&t.init(e)||e},e),a=r.adTargeting,d=void 0===a?{}:a,l=r.adUnitPath,s=void 0===l?"":l,u=r.offset,c=void 0===u?400:u,o=r.lockdownAds,e=void 0!==o&&o,a=r.hideTopAd,l=void 0!==a&&a,u=r.sizeMapping,o=void 0===u?{}:u,a=r.haltDFP,u=r.adsDisabled,r=/^tragedy$/i.test(s),r=a||u||r;return w.props={adTargeting:d,adUnitPath:s,offset:c,sizeMapping:o,hideTopAd:l,adsDisabled:r},r?w.events.publish({name:M.AD_EMPTY,value:{type:C}}):(_e(d),W().cmd.push(function(){W().enableServices(),w.fillPlacements(!0);function t(){w.fillPlacements()}function n(){return"complete"===document.readyState}var r,a;n()?t():document.addEventListener(b,function e(){n()&&(document.removeEventListener(b,e),t())}),window.addEventListener(I,Pe),window.document.addEventListener(E,Ie),W().pubads().addEventListener(D,be),W().pubads().addEventListener(O,we),W().pubads().addEventListener(T,(r=w.getAdOnPage,function(e){var t=Ae(e.slot),n=t.id,i=t.position,o=P(n,L.TIME_RENDERED,"".concat(n,"-").concat(L.TIME_CALLED)),t=r(n);t&&(t.creativeId=e.sourceAgnosticCreativeId,t.lineItemId=e.sourceAgnosticLineItemId,t.renderedSize=e.size),e.isEmpty?m.publish({name:M.AD_EMPTY,value:g(g({},e),{},{type:n,id:n,position:i,timeRendered:o}),scope:n}):m.publish({name:M.AD_RENDERED,value:g(g({},e),{},{id:n,position:i,timeRendered:o}),scope:n})})),W().pubads().addEventListener(S,(a=w.getAdsOnPage,function(e){var t=Ae(e.slot),n=t.id,i=t.position,o=a(),t=o[n];o[n]=Ee(t);t=P(n,L.TIME_LOADED,"".concat(n,"-").concat(L.TIME_CALLED));m.publish({name:M.AD_LOADED,value:g(g({},e),{},{id:n,position:i,timeLoaded:t}),scope:n})})),W().pubads().addEventListener(U,Re)}),e?W().cmd.push(function(){W().pubads().setForceSafeFrame(!0)}):(t=w.getAdsOnPage,n=w.updateAdReq,i=p,window&&window.addEventListener&&window.addEventListener(h,function(e){!function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return!(!e||!((null===(e=e.location)||void 0===e?void 0:e.origin)===t||null!==(e=t.match)&&void 0!==e&&e.call(t,/(safeframe|tpc).googlesyndication.com$/)))}(window,e.origin)||X(e.data,t(),n,i())},!1)),B()),f=!0,w.events.publish({name:M.AD_SLOT_READY}),f},w.isAdSlotReady=function(){return f},w.cmd)for(;w.cmd.length;)w.cmd.shift()();return w.cmd={length:0,push:function(e){e()}},window.AdSlot4=w,window.AdSlot={placeDynamicAds:w.fillPlacements,getSlot:w.getSlot,setTargeting:function(e,t){var n={};n[e]=t,w.updateAdReq(n)},setSlotTargeting:function(e,t,n){var i={};i[t]=n,w.updateAdReq(i,e.getSlotElementId())},displayAd:$,removeAdPlacement:w.removeAdPlacement,dispatch:ue,destroyAdSlots:function(){W().cmd.push(function(){W().destroySlots()})},checkAdsInViewport:function e(){w.isAdSlotReady()||w.events.subscribe({name:M.AD_SLOT_READY,callback:e}),R.unrenderedAds=R.unrenderedAds.filter(function(e){var t=e.AdSlotElement,t=s(t,n?w.props.offset:0,0,0,0,n);return(e.potentiallyViewable=t)&&G(e,R),!t})},refresh:w.refreshAds,AdSlotReady:!0,adTargeting:w.props&&w.props.adTargeting||{}},w}()}();'}},PWuI:function(e,t,n){"use strict";var i=n("lSNA"),r=n.n(i),a=n("gcR/"),o=n.n(a),s=n("q1tI"),l=n("vftj"),c=n("pQqS"),u=n("SYzA"),d=n("BPYT"),p=n("U6jc"),f=n("CsDw"),m=n("2Y8s"),h=n("E7dQ"),g=n("x04V");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var v,b=function(e,t){var n,i,r=null===(n=window)||void 0===n||null===(i=n.NativeBridge)||void 0===i?void 0:i.sendDataDogLog;r&&r(t,e).catch((function(e){-1===e.message.indexOf("unknownCommand")&&console.log(e)}))},_=function(e){var t=e.id,n=e.position,i=e.slot,a=Object(m.a)(),o=Object(h.a)(a),s=Object(g.a)(i,a);b(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:t,position:n,pageType:o},s),f.d.AD_REQUEST)},w=function(e){var t,n=e.id,i=e.position,r=Object(m.a)(),a=Object(h.a)(r);t=e.sourceAgnosticCreativeId?f.d.AD_FETCH_SUCCESS:f.d.AD_FETCH_ERROR,b({id:n,position:i,pageType:a},t)},x=function(e){var t=e.id,n=e.position,i=e.type,r=e.isEmpty,a=Object(m.a)(),o=Object(h.a)(a);r?b({id:t,position:n,pageType:o},f.d.AD_NO_FILL):b({id:t,type:i,pageType:o},f.d.AD_EMPTY_OTHER)},k=!1,O=n("f6wl"),E=n.n(O),T=n("W61k"),C=n.n(T),S=n("6D+t"),P=n.n(S),M=n("Rb+W"),I=n("tl88"),A=n.n(I),j=n("9qba"),L=n.n(j),R=n("6Hb6"),N=n.n(R),D=n("X6oL"),B=n("fZdH"),z=n("J4zp"),F=n.n(z),U=n("NW2b"),H=n("MzAb"),W=n.n(H),q=n("pfWQ"),V=n.n(q),G=function(e){var t,n,i,r,a,o=e.id;if(!V()().getAdOnPage||!o||!e)return!1;var s,l,c,u=null===(t=V()().getAdOnPage(o))||void 0===t?void 0:t.renderedSize,d=null==u?void 0:u[1],p=null===(n=window)||void 0===n||null===(i=n.document)||void 0===i?void 0:i.getElementById(o),f=null==p?void 0:p.parentElement,m=(null===(r=window)||void 0===r?void 0:r.innerWidth)>970?"large":"medium",h="large"===m?970:728,g=(s=d,{large:[[728,90],[970,90],[970,250]],medium:[[728,90],[300,250]]}[m].filter((function(e){return e[1]===s&&(l=e),l})),l);void 0===(null===(a=V()().getAdOnPage(o))||void 0===a?void 0:a.isAdRefreshed)&&g&&(V()().getAdOnPage(o).isAdRefreshed=!0,e.slot.defineSizeMapping(null===(c=window.googletag)||void 0===c?void 0:c.sizeMapping().addSize([h,0],g).build()),f&&f.style&&(f.style.height=window.getComputedStyle(f).height,f.style.overflow="hidden"));return!!g},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.setTargeting&&e.getTargeting){var t,n=Number(null===(t=e.getTargeting("refresh_ct"))||void 0===t?void 0:t[0])+1||1;return e.setTargeting("refresh_ct",n),n}return NaN},Z=function(e){return function(t){var n,i=function(){if("undefined"==typeof window)return 120;var e=new URLSearchParams(window.location.search),t=Number(e.get("ad-refresh-override")||120);return Number.isNaN(t)?120:t}(),r=(null==t||null===(n=t.slot)||void 0===n?void 0:n.getResponseInformation()).advertiserId,a=t.id;if(a){var o=e.get(a);if(o&&(clearTimeout(o),e.delete(a)),21966278===r){var s=setTimeout(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t,n,i=e.id,r=e.slot;G(e)&&(Y(r),null===(t=(n=V()()).refreshAd)||void 0===t||t.call(n,i))}}(t),1e3*i);e.set(a,s)}}}},X=function(e,t){if(e&&t){var n=Object(s.useState)(!1),i=F()(n,2),r=i[0],a=i[1];Object(s.useEffect)((function(){var t;if(!r&&null!==(t=e.DFP_AdRefresh_0123)&&void 0!==t&&t.variant){var n=e.DFP_AdRefresh_0123.variant;n&&Object(U.e)("DFP_AdRefresh_0123"),"1_AdRefresh"===n&&function(){if("undefined"!=typeof window){var e=new Map,t=Z(e),n=function(t){if(t.id){var n=e.get(t.id);n&&(clearTimeout(n),e.delete(t.id))}};W()((function(){Object(p.handleImpressionViewable)("all",t),Object(p.handleAdRequestSent)("all",n),Object(p.handleSlotEmpty)("all",n)}))}}(),a(!0)}}),[e,r,t])}};function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function K(e){var t,n,i,a=e.section,s=e.route,f=e.adTargeting,m=e.adUnitPath,h=e.options,g=e.aliceOpts,y=e.prebidOpts,b=e.children,O=Object(u.a)(),T=Object(D.useTracking)().trackEvent,S=Object(M.e)(s),I=!["learning"].includes(a),j=["vi-story","vi-homepage"].includes(s),R=null==S?void 0:S.dfp,z=null==f?void 0:f.typ,F=Object(B.a)();X(F,function(e){return["vi-story"].includes(e)}(s));var U={adToggleMap:S,pageType:z,section:a,isSectionHbEligible:I,setFastFetch:j,prebidOverrides:y},H="world"===a;return Object(d.a)(T),"livebl"===f.typ&&O&&("undefined"==typeof window||k||(k=!0,Object(p.handleAdRequestSent)("all",_),Object(p.handleSlotRendered)("all",w),Object(p.handleSlotEmpty)("all",x))),o()(l.Helmet,{prioritizeSeoTags:!0},void 0,o()("script",{},void 0,"\n          ".concat(N()(),"\n          ").concat(L()(R),"\n          ").concat(P()(R),"\n        ")),H&&(v||(v=o()("script",{src:"https://www.nytimes.com/ads/parakeet.min.js"}))),o()("script",{id:"als-svc"},void 0,C()(null==g?void 0:g.canonicalLink,null==g?void 0:g.assetUri,"als_toggle")),H&&o()("script",{},void 0,"Parakeet.SetStorageOrigin(new URL('https://edge.microsoft.com/parakeet/frame.html'));"),o()("script",{id:"adslot-config"},void 0,"(function() {\n            ".concat(Object(c.adScripts)(),"\n            ").concat(A()(U),"\n            ").concat(E()(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({adTargeting:f,adUnitPath:m,dfpToggleName:null==S?void 0:S.dfp,adsDisabled:!(null==m||null===(t=m.toLowerCase)||void 0===t||null===(n=(i=t.call(m)).includes)||void 0===n||!n.call(i,"tragedy"))},h)),"\n          })();\n        ")),b)}K.displayName="AdHelmet",K.defaultProps={section:"",adTargeting:{},options:{},aliceOpts:{},prebidOpts:{},children:null};t.a=K},PcXc:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("1gPk")),o=function(e){var t=e.children;return r.default.createElement("sup",{className:a.superscriptClass},t)};o.displayName="SuperscriptFormat";var s=o;t.default=s},PcbQ:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),o=(i(n("17x9")),n("Jqp9")),s=i(n("Vcud")),l=n("WF6m"),c=n("Cebk"),u=n("AKP5");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}var p=a.default.forwardRef((function(e,t){var n=e.a11yLabel,i=e.children,r=e.id,d=e.onSwipe,p=e.scrolledIndex,f=(0,u.debounce)((function(e){var t=(0,u.getScrolledIndex)(e);d(t)}));return(0,a.useEffect)((function(){var e=null!=t&&t.current?(0,c.handleKeyNavigation)(t.current):u.noop;return document.addEventListener("keyup",e,!0),function(){document.removeEventListener("keyup",e,!0)}}),[t]),a.default.createElement("div",{id:r,"aria-live":"polite","aria-atomic":!0},a.default.createElement(s.default,null,n),a.default.createElement("div",{ref:t,"data-scrolled-index":p,className:(0,o.cx)("swiper",l.swiperClass),onScroll:function(e){return f(e.target)}},a.default.Children.map(i,(function(e,t){return a.default.createElement("div",{className:l.slideClass,"aria-hidden":t!==p},e)}))))}));p.defaultProps={a11yLabel:void 0,id:void 0};var f=p;t.default=f},"Pm+9":function(e,t,n){"use strict";var i,r,a,o,s=n("VkAN"),l=n.n(s),c=n("gcR/"),u=n.n(c),d=n("lSNA"),p=n.n(d),f=n("q1tI"),m=n("eFc+"),h=n.n(m),g=n("boCj"),y=n("XQm6"),v=n.n(y),b=n("ZKN5"),_=n("YWmT"),w=n("2XMp"),x=h()(i||(i=l()(["\n  fragment StorylineTextInline_content on InlineUnion {\n    ... on TextInline {\n      text\n      formats {\n        __typename\n        ... on LinkFormat {\n          url\n          uri\n          title\n        }\n      }\n    }\n  }\n"]))),k=h()(r||(r=l()(["\n  fragment StorylineParagraphBlock_content on ParagraphBlock {\n    content {\n      ...StorylineTextInline_content\n    }\n  }\n  ","\n"])),x),O={textInline:x,paragraphBlock:k,listBlock:h()(a||(a=l()(["\n    fragment StorylineListBlock_content on ListBlock {\n      content {\n        content {\n          ...StorylineParagraphBlock_content\n        }\n      }\n    }\n    ","\n  "])),k)};function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){p()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e){var t=e.storyline,n=e.parentUri,i=e.pageType,r=e.testName,a=e.ruleName,o=e.region,s=Object(f.useMemo)((function(){return{region:o,block:"storyline_flex_guide_recirc",name:a,variant:"show",pgtype:i}}),[i,o,a]),l=Object(f.useMemo)((function(){return T(T({},t),{},{experimentalJsonBlob:Object(w.a)(T(T({},s),{},{html:t.experimentalJsonBlob}))})}),[s,t]);return u()(_.a,{componentName:"flex_guide",region:o,parentUri:n,testName:r,ruleName:a,pageType:i},void 0,(function(e){var t=e.trackImpression,n=e.trackInteraction;return t?u()(g.InView,{onChange:function(e){e&&t({event:"impression"})},triggerOnce:!0},void 0,u()(v.a,{storyline:l,trackEvent:t,trackImpression:t,trackingParams:s,trackLinkInteraction:n})):u()(v.a,{storyline:l,trackEvent:t,trackImpression:t,trackingParams:s,trackLinkInteraction:n})}))}C.displayName="StorylineGuideBlock",C.defaultProps={testName:null},C.fragments={creativeWork:h()(o||(o=l()(["\n    fragment StorylineGuideBlock_creativeWork on CreativeWork {\n      __typename\n      storylines {\n        testName\n        ruleName\n        storyline {\n          experimentalJsonBlob\n          guide {\n            displayName\n            leadIn\n            sections {\n              items {\n                content {\n                  __typename\n                  ...StorylineParagraphBlock_content\n                  ...StorylineListBlock_content\n                }\n              }\n            }\n          }\n        }\n      }\n      ... on Published {\n        uri\n      }\n    }\n    ","\n    ","\n  "])),O.listBlock,O.paragraphBlock)};t.a=Object(b.a)(C)},Pmun:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("dlfA")).default;t.default=r},PvUX:function(e,t,n){"use strict";var i,r,a,o=n("VkAN"),s=n.n(o),l=n("lSNA"),c=n.n(l),u=n("gcR/"),d=n.n(u),p=n("q1tI"),f=n.n(p),m=n("eFc+"),h=n("9i1U"),g=n("Jqp9"),y=n("X6oL"),v=n("RL9q"),b=n("hkPW"),_=n("5dFD"),w=n("4TXN"),x=n("7XMi"),k=n("IFQa"),O=n("SBGf"),E=function(e){var t,n=e.index,i=e.isMobile,r=e.item,a=e.packageArea,o=e.packageLabel,s=e.packageTrackingParams,l=e.region,u=e.trackingName,p=e.trackingParams,m=e.useHeadlineFallback,h=Object(v.a)(),E=Object(O.i)({cardId:null==r?void 0:r.sourceId,cardIndex:n,cardUrl:(null==r?void 0:r.url)||(null==r?void 0:r.targetUrl),cardUri:null==r?void 0:r.uri,impId:h,packageLabel:o,packageTrackingParams:s,trackingName:u,region:l,trackingParams:p,type:"asset"}),T=Object(b.a)({threshold:.5,data:E}),C=T.isTracked,S=T.ref,P=Object(y.useTracking)().trackEvent;if(!r)return null;var M=Object(w.a)(r),I="collection"===a,A="package"===a,j="rightrail"===a,L=i||I?"thumbLarge":"threeByTwoSmallAt2X",R=Object(O.g)(M,j,i,m),N=M.newsStatus&&d()("p",{},void 0,M.newsStatus),D=M.label&&d()("p",{className:k.e},void 0,M.label),B=M.headlinePrefix&&d()("p",{className:Object(g.cx)(k.c,c()({},k.f,null===M.promotionalMedia))},void 0,M.headlinePrefix),z=R&&d()(_.a,{link:r,onClick:function(){P(Object(O.j)({cardId:null==r?void 0:r.sourceId,cardIndex:n,cardUrl:(null==r?void 0:r.url)||(null==r?void 0:r.targetUrl),cardUri:null==r?void 0:r.uri,packageLabel:o,packageTrackingParams:s,trackingName:u,trackingParams:p,type:"asset"}))},className:Object(g.cx)(k.b,c()({},k.f,null===M.promotionalMedia))},void 0,R),F=M.promotionalMedia&&d()(x.a,{media:M.promotionalMedia,preferredCrop:L}),U=!I&&(!j||i);return d()("li",{className:Object(g.cx)((t={},c()(t,k.g,A),c()(t,k.a,I),c()(t,k.i,j),t))},void 0,f.a.createElement("div",{className:k.h,ref:C?null:S,"data-testid":"recirc-item"},d()("div",{className:k.j},void 0,z,U&&N,U&&D,U&&B),null!==M.promotionalMedia&&d()("div",{className:k.d},void 0,F)))};E.displayName="RecirculationItem",E.defaultProps={index:0,isMobile:!1,item:null,packageArea:"package",packageLabel:"",packageTrackingParams:[],region:"footer",trackingName:"",trackingParams:[],useHeadlineFallback:!1},(E.fragments={}).item=Object(m.gql)(i||(i=s()(["\n  fragment RecirculationItem_item on HasPromotionalProperties {\n    newsStatus\n    promotionalMedia {\n      ...ImageWithCredit_media\n      ... on Video {\n        id\n      }\n      ... on Audio {\n        id\n      }\n    }\n    ... on Node {\n      id\n    }\n    ... on CreativeWork {\n      headline {\n        default\n        seo\n      }\n      summary\n      section {\n        id\n        name\n        displayName\n      }\n      tone\n      subsection {\n        id\n        displayName\n      }\n      bylines {\n        creators {\n          ... on Person {\n            id\n            displayName\n            url\n          }\n        }\n      }\n      language {\n        code\n      }\n    }\n    ... on Published {\n      sourceId\n      uri\n      url\n      shortUrl\n      lastMajorModification\n      lastModified\n      firstPublished\n    }\n    ... on Promo {\n      id\n      targetUrl\n      promotionalHeadline\n      promotionalSummary\n    }\n  }\n  ","\n"])),x.a.fragments.media),E.fragments.fallback=Object(m.gql)(r||(r=s()(["\n  fragment RecirculationItem_fallback on LegacyCollection {\n    id\n    url\n    assets: highlights(first: 12) {\n      ...Connection_pageInfo\n      edges {\n        node {\n          ... on Published {\n            sourceId\n            uri\n            url\n            lastMajorModification\n          }\n          ... on Node {\n            id\n          }\n          ... on CreativeWork {\n            headline {\n              default\n            }\n            summary\n            bylines {\n              creators {\n                ... on Person {\n                  id\n                  displayName\n                }\n              }\n            }\n            language {\n              code\n            }\n          }\n          ... on HasPromotionalProperties {\n            newsStatus\n            promotionalMedia {\n              ...ImageWithCredit_media\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"])),x.a.fragments.media,h.a),E.fragments.personalized=Object(m.gql)(a||(a=s()(["\n  fragment RecirculationItem_personalized on PersonalizedItemsConnection {\n    ...Connection_pageInfo\n    edges {\n      ... on PersonalizedItemsEdge {\n        trackingParams {\n          key\n          value\n        }\n      }\n      node {\n        ... on CreativeWork {\n          ...RecirculationItem_item\n        }\n        ... on Promo {\n          id\n          ...RecirculationItem_item\n        }\n      }\n    }\n  }\n  ","\n  ","\n"])),E.fragments.item,h.a),t.a=E},PxMw:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lSNA")),a=i(n("QILm")),o=i(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=i(n("wXC7")),c=["theme","className"],u=["isLink"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var p=o.default.forwardRef((function(e,t){var n=e.theme,i=e.className,p=(0,a.default)(e,c),f=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:(0,s.cx)(i,l.default.button[n]||l.default.button.default),ref:t},p),m=(f.isLink,(0,a.default)(f,u)),h=Object.keys(p).includes("href");return o.default.createElement(h?"a":"button",m)}));p.defaultProps={className:void 0,theme:"default",children:null};var f=p;t.default=f},Q3jP:function(e,t,n){"use strict";var i,r=n("VkAN"),a=n.n(r),o=n("gcR/"),s=n.n(o),l=(n("q1tI"),n("InUh")),c=n.n(l),u=n("eFc+"),d=n.n(u),p=n("X6oL"),f=n("pCca"),m=c()((function(){return Promise.all([n.e(160),n.e(126)]).then(n.bind(null,"wA7L"))}),{loadableGenerated:{webpack:function(){return["wA7L"]},modules:["./SharedReviewHeader"]}});function h(e){var t=e.article,n=Object(p.useTracking)().trackEvent,i=Object(f.a)().deviceType;return s()(m,{article:t,deviceType:i,trackMoreInfo:function(){n({event:"moduleInteraction",eventData:{pagetype:"article",trigger:"module",type:"click"},module:{name:"review",context:"",label:"",region:"review-header",element:{name:"more-information",label:"More Information",url:""}}})},trackClick:function(e){n({event:"moduleInteraction",eventData:{pagetype:"article",trigger:"module",type:"click"},module:{name:"review",context:"",label:"",region:"review-header",element:{name:"restaurant"===e?"reserve-a-table":"find-tickets",label:"restaurant"===e?"Reserve A Table":"Find Tickets",url:""}}})},trackCall:function(){n({event:"moduleInteraction",eventData:{pagetype:"article",trigger:"module",type:"click"},module:{name:"review",context:"",label:"",region:"review-header",element:{name:"call",label:"Call",url:""}}})}})}h.displayName="ReviewHeader",h.fragments={article:d()(i||(i=a()(["\n    fragment ReviewHeader_article on Article {\n      id\n      compatibility {\n        isArtReview\n        isBookReview\n        isDiningReview\n        isMovieReview\n        isTheaterReview\n      }\n      url\n      reviewSummary\n      firstPublished\n      bylines {\n        creators {\n          ... on Person {\n            id\n            displayName\n            url\n            bioUrl\n          }\n        }\n      }\n      reviewItems {\n        overrideLabel\n        isCriticsPick\n        subject {\n          __typename\n          ... on Book {\n            buyLinks {\n              sellerName\n              url\n            }\n          }\n          ... on Restaurant {\n            id\n            name\n            reservationsUrl\n            openStatus\n            rating\n            cuisines\n            priceCategory\n            summary\n            recommendedDishes\n            wineList\n            openHours\n            takesReservations\n            website\n            cuisines\n            rating\n            restaurantImage {\n              id\n              crops(cropNames: [THREE_BY_TWO]) {\n                renditions {\n                  url\n                }\n              }\n            }\n            coordinates {\n              latitude\n              longitude\n            }\n            contactDetails {\n              phoneNumbers {\n                type\n                number\n              }\n              addresses {\n                address {\n                  country\n                  locality\n                  region\n                  postalCode\n                  streetAddress\n                }\n              }\n            }\n          }\n          ... on Movie {\n            title\n            ticketUrl\n            movieRating: rating\n            runtimeUS\n            genres\n            directors\n            releaseDateUS\n            imdbId\n          }\n        }\n      }\n    }\n  "])))},t.a=h},QDH1:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.filterExpiredItems=function(e){return Object.keys(e).reduce((function(t,n){var i=e[n];return Array.isArray(i)?t:Date.now()-(null==i?void 0:i.lastModified)<864e5?u(u({},t),{},(0,a.default)({},n,i)):t}),{})},t.getHeadingData=t.getBoldNavMap=void 0,t.getNewHeadings=function(e,t){var n=e.map((function(e){return e.join("")}));return t.filter((function(e){var t=e.content.join("");return n.every((function(e){return d(e,t)>.5}))})).map((function(e){return e.contentLink}))},t.getNormalizedDistance=d,t.isArticleLive=void 0;var r=i(n("RIqP")),a=i(n("lSNA")),o=n("V6Yu"),s=i(n("XlcC")),l=n("5ON2");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){var n=Math.max(e.length,t.length);return function(e,t){var n=e.toLowerCase().trim(),i=t.toLowerCase().trim();if(0===n.length)return i.length;if(0===i.length)return n.length;for(var r=[],a=0;a<=i.length;a+=1)r[a]=[a];for(var o=0;o<=n.length;o+=1)r[0][o]=o;for(var s=1;s<=i.length;s+=1)for(var l=1;l<=n.length;l+=1)i.charAt(s-1)===n.charAt(l-1)?r[s][l]=r[s-1][l-1]:r[s][l]=Math.min(r[s-1][l-1]+1,r[s][l-1]+1,r[s-1][l]+1);return r[i.length][n.length]}(e,t)/n}t.isArticleLive=function(e){var t,n=l.ArticleReader.getMatchingBlocks({article:e,test:function(e){return"HeaderLiveBriefingBlock"===e.__typename}});return Boolean(null===(t=n[0])||void 0===t?void 0:t.latestUpdate)};t.getHeadingData=function(e){return l.ArticleReader.getMatchingBlocks({article:e,test:function(e){return"Heading2Block"===e.__typename}}).map((function(e){var t;return{content:(t=[]).concat.apply(t,(0,r.default)(e.content.map(s.default))),contentLink:(0,o.generateContentLink)(e.content)}}))};t.getBoldNavMap=function(e,t){return Object.fromEntries(e.map((function(n,i){var r=n.contentLink,a=e[i+1],o=document.getElementById(r).offsetTop,s=a&&document.getElementById(a.contentLink).offsetTop;return[r,t>o&&t<s||t>o&&!a]})))}},QGGS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Febw");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===i[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}}))}));var r=n("ifco");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===r[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}}))}));var a=n("0NOm");Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var o=n("jVmZ");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var s=n("DnBa");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in t&&t[e]===s[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}}))}))},QNzT:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("W8MJ")),a=i(n("lwsE")),o=i(n("7W2i")),s=i(n("a1gu")),l=i(n("Nsbk"));function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,l.default)(e);if(t){var r=(0,l.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,s.default)(this,n)}}var u=function(e){(0,o.default)(n,e);var t=c(n);function n(e){var i;return(0,a.default)(this,n),(i=t.call(this,e))["@type"]="ProfilePage",i}return(0,r.default)(n)}(i(n("R+Gq")).default);t.default=u},QgjT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sectionClass=t.interactiveDivClass=void 0;var i=n("Jqp9"),r=(0,i.css)("box-sizing:border-box;vertical-align:top;");t.interactiveDivClass=r;t.sectionClass=function(e){return(0,i.css)("width:100%;margin:0 auto;height:auto;",e.maxWidth?"max-width: ".concat(e.maxWidth,"px;"):null)}},"R+Gq":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("W8MJ")),a=i(n("lwsE")),o=i(n("7W2i")),s=i(n("a1gu")),l=i(n("Nsbk"));function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,l.default)(e);if(t){var r=(0,l.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,s.default)(this,n)}}var u=function(e){(0,o.default)(n,e);var t=c(n);function n(e){var i;return(0,a.default)(this,n),(i=t.call(this,e))["@type"]="WebPage",i}return(0,r.default)(n)}(i(n("Nz+N")).default);t.default=u},R99I:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("pVnL")),a=i(n("q1tI")),o=i(n("ARn7")),s=i(n("RMtu"));t.default=function(e){return a.default.createElement(o.default,(0,r.default)({},e,{height:"40px",ratio:"0"}),a.default.createElement(s.default,e))}},RG0N:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.cloneScript=y,t.default=void 0,t.replaceChildren=g,t.runScripts=v;var a=i(n("pVnL")),o=i(n("QILm")),s=i(n("lwsE")),l=i(n("W8MJ")),c=i(n("7W2i")),u=i(n("a1gu")),d=i(n("Nsbk")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),f=(i(n("17x9")),["html","id"]);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}function g(e,t){for(;e.firstChild;)e.removeChild(e.firstChild);for(;t.length>0;)e.appendChild(t[0])}function y(e){var t=document.createElement("script");return Array.from(e.attributes).forEach((function(e){t.setAttribute(e.name,e.value)})),t.innerHTML=e.innerHTML,t}function v(e){return new Promise((function(t){var n=Array.from(e);!function e(){if(n.length){var i=n.shift(),r=y(i);document.head.appendChild(r).parentNode.removeChild(r),i.async||i.defer||!i.hasAttribute("src")?e():r.onload=e}else t()}()}))}function b(){return!!window.getInteractiveBridge}var _=function(e){(0,c.default)(n,e);var t=h(n);function n(){var e;(0,s.default)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).setupRef=function(t){e.el=t},e}return(0,l.default)(n,[{key:"componentDidMount",value:function(){if(b()){var e=this.props.id,t=window.getInteractiveBridge(e);t||(console.info("[interactive] run: ".concat(this.props.id)),v(this.el.querySelectorAll("script")),t=window.getInteractiveBridge(e)),t&&t.stashedDomNodes&&(console.info("[interactive] remount: ".concat(this.props.id)),g(this.el,t.stashedDomNodes),t._subs.remount.forEach((function(e){e()})))}}},{key:"componentWillUnmount",value:function(){if(b()){var e=window.getInteractiveBridge(this.props.id);e&&(console.info("[interactive] stash: ".concat(this.props.id)),e.stashedDomNodes=this.el.childNodes)}}},{key:"render",value:function(){var e=this.props,t=e.html,n=e.id,i=(0,o.default)(e,f),r='\n      <script>window.registerInteractive && window.registerInteractive("'.concat(n,'");<\/script>\n    ');return p.default.createElement("div",(0,a.default)({},i,{ref:this.setupRef,"data-sourceid":n,dangerouslySetInnerHTML:{__html:r+t}}))}}]),n}(p.Component);_.displayName="NYTComponent";var w=_;t.default=w},RKHt:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=i(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=i(n("OB6K")),c=i(n("gtCS")),u=i(n("tXdy")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("uW2s"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}var f=function(e){var t,n,i,r,p=e.interactive,f=e.className,m=e.children,h=e.theme,g=e.manageScripts,y=e.enableInteractiveBridge,v=p.leadin,b=p.note,_=p.credit,w=p.dataSource,x=p.headline,k=p.displayProperties,O=k.minimumWidth,E=k.maximumWidth,T=k.displayForPromotionOnly,C=void 0!==T&&T,S=E,P=x&&x.default,M=P&&!C,I=!(null==p||null===(t=p.displayProperties)||void 0===t||null===(n=t.displayOverrides)||void 0===n||!n.includes("REMOVE_PLATFORM_MARGIN"));return(v||M)&&(i=o.default.createElement("header",{id:"interactive-header",className:(0,s.cx)(d.headerClass,"interactive-header",(0,a.default)({},d.fullbleedHeaderFooterContainerClass({maxWidth:E}),I))},M&&o.default.createElement("h2",{id:"interactive-headline",className:(0,s.cx)(d.headlineClass,"interactive-headline")},P),v&&o.default.createElement("p",{"data-testid":"leadin",id:"interactive-leadin",className:(0,s.cx)(d.leadinClass,"interactive-leadin"),dangerouslySetInnerHTML:{__html:v}}))),(b||w||_)&&(r=o.default.createElement(c.default,{interactive:p,footerClass:(0,s.cx)(d.footerClass,(0,a.default)({},d.fullbleedHeaderFooterContainerClass({maxWidth:E}),I)),metaClass:d.metaClass})),o.default.createElement(l.default,{theme:h},o.default.createElement(u.default,{maxWidth:S,minWidth:O,interactive:p,className:(0,s.cx)(f,(0,a.default)({},d.fullbleedClass,I)),manageScripts:g,enableInteractiveBridge:y,Header:i,Footer:r},m))};f.displayName="Embedded",f.defaultProps={interactive:{html:null,displayProperties:{},headline:{default:""}},className:void 0,children:null,theme:{},manageScripts:!1,enableInteractiveBridge:!1};var m=f;t.default=m},RL9q:function(e,t,n){"use strict";var i=n("J4zp"),r=n.n(i),a=n("Ap7T"),o=n("q1tI");t.a=function(){var e=Object(o.useState)(),t=r()(e,2),n=t[0],i=t[1];return Object(o.useEffect)((function(){var e=Object(a.v1)();i(e)}),[]),n}},RMtu:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o,s=i(n("lSNA")),l=i(n("lwsE")),c=i(n("W8MJ")),u=i(n("7W2i")),d=i(n("a1gu")),p=i(n("Nsbk")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),m=(i(n("17x9")),i(n("HNQ6")));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,d.default)(this,n)}}var b={INITIALIZING:"initializing",LOAD_NEW_VIDEO:"load_new_video",READY:"ready",LOAD_START:"loadstart",PLAY:"play",PAUSE:"pause",ENDED:"ended"},_={INITIALIZING:"onInitializing",READY:"onReady",LOAD_START:"onLoadStart",PLAY:"onPlay",PAUSE:"onPause",ENDED:"onEnded"},w=["className","playerClassName","playerRef","VHS","onReady","onLoadStart","onPlay","onPause","onEnded","onErrorLoadingPlayer"],x=(0,m.default)(((o=function(e){(0,u.default)(n,e);var t=v(n);function n(){var e;(0,l.default)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).playerStatus=null,e.state={playerCreated:!1},e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){if(null===this.playerStatus){if(!this.props.VHS){throw console.error("VHS did not load"),"function"==typeof this.props.onErrorLoadingPlayer&&this.props.onErrorLoadingPlayer(),new Error("VHS did not load")}this.initPlayer()}}},{key:"shouldComponentUpdate",value:function(e,t){return null!==this.playerStatus&&e.src!==this.props.src||this.state.playerCreated!==t.playerCreated}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.updatePlayer(e)}},{key:"componentWillUnmount",value:function(){this.destroyPlayer()}},{key:"initPlayer",value:function(){var e=this;this.playerStatus=b.INITIALIZING,this.destroyPlayer((function(){e.player=e.props.VHS.audio(e.playerConfig),e.bindPlayerEvents(),e.setState((function(){return{playerCreated:!0}})),"function"==typeof e.props.playerRef&&e.props.playerRef(e.player)}))}},{key:"propsForConfig",get:function(){var e=this;return Object.keys(this.props).reduce((function(t,n){return-1===w.indexOf(n)?y(y({},t),{},(0,s.default)({},n,e.props[n])):t}),{})}},{key:"playerConfig",get:function(){var e=this.propsForConfig;return e.container=this.playerElement,e}},{key:"bindPlayerEvents",value:function(){var e=this;Object.keys(this.player.events).filter((function(e){return void 0!==b[e]})).forEach((function(t){e.player.on(e.player.events[t],(function(){e.playerStatus=e.player.events[t];var n=_[t],i=e.props[n];"function"==typeof i&&i()}))}))}},{key:"updatePlayer",value:function(e){if(this.player){if("string"==typeof e.src&&e.src!==this.props.src&&this.player.load({src:e.src}),this.props.audioControls.layout!==e.audioControls.layout){var t=this.player.store.getState();t.plugins.audioControls.layout=e.audioControls.layout,this.player.store.setState(t)}if(this.props.forceHover!==e.forceHover){var n=this.player.store.getState();n.plugins.audioControls.forceHover=e.forceHover,this.player.store.setState(n)}}}},{key:"destroyPlayer",value:function(e){this.playerStatus=null,this.player&&"function"==typeof this.player.destroy?this.player.destroy(e):"function"==typeof e&&e()}},{key:"render",value:function(){var e=this,t=this.props,n=t.audioControls,i=t.className,r=t.playerClassName,a=t.width,o=t.forceError,s=t.style;if(o)throw new Error("Forced error for error boundary testing.");var l="react-vhs-container";"string"==typeof i&&(l+=" ".concat(i));var c="react-vhs-player";"string"==typeof r&&(c+=" ".concat(r));var u={width:a};"v2"===n.version&&(u.height="100%",u.width="100%",u.position="relative",u.WebkitTapHighlightColor="transparent"),u=y(y({},u),s);var d={},p=y({height:"40px",padding:"0"},n),m=p.height,h=p.padding;return d.height=m,d.padding=h,f.default.createElement("div",{className:l,style:u},f.default.createElement("div",{ref:function(t){e.playerElement=t},className:c,style:d}))}}]),n}(f.Component)).displayName="AudioPlayer",o.defaultProps={className:void 0,onErrorLoadingPlayer:void 0,playerClassName:void 0,playerRef:void 0,style:{},width:"100%",forceHover:!1,onReady:void 0,onLoadStart:void 0,onPlay:void 0,onPause:void 0,onEnded:void 0,gtmTrackEvent:function(){},env:"production",audioControls:{}},a=o))||a;x.displayName="AudioPlayer";var k=x;t.default=k},RNdQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i,r,a=n("gcR/"),o=n.n(a),s=n("lSNA"),l=n.n(s),c=n("J4zp"),u=n.n(c),d=n("q1tI"),p=n.n(d),f=n("i8i4"),m=n("fZdH"),h=n("X6oL"),g=n("Jqp9"),y=n("Gl8y"),v=n("3sMT"),b=n("wXC7"),_=n.n(b),w=Object(g.css)("padding-bottom:20px;"),x=Object(g.css)("margin:25px 10px 10px 0;justify-content:space-between;"),k=Object(g.css)("font-size:",_.a.font.size(13),";font-weight:300;line-height:",_.a.font.size(18),";display:flex;flex-direction:row;align-items:center;padding-top:5px;font-family:",_.a.font.franklinBase,";p{margin-top:5px;max-width:50%;}a{color:",v.color.signal.editorial,";text-decoration:underline;}"),O=Object(g.css)("display:inherit;margin-top:5px;button{font-weight:500;padding-left:28px;background-color:transparent;color:",v.color.signal.editorial,";&:hover{text-decoration:underline;}}"),E=function(e){var t=e.data,n=t.region,a=t.dataSlug,s=Object(h.useTracking)(),l=Object(d.useState)(!1),c=u()(l,2),f=c[0],m=c[1],v=Object(d.useState)(!1),b=u()(v,2),_=b[0],E=b[1],T=Object(y.a)({threshold:.5}),C=u()(T,2),P=C[0],M=C[1],I=function(e){return m(!0),s.trackEvent({event:"moduleInteraction",eventData:{type:"tap",trigger:"",label:e},module:{name:"trust_inline_explainer",region:n,context:a,label:S}})};Object(d.useEffect)((function(){M.isIntersecting&&!_&&(E(!0),s.trackEvent({event:"impression",module:{context:a,label:"trust_inline_explainer",name:"trust_inline_explainer",region:n}}))}),[M,s,n,a,_]);var A=p.a.createElement(p.a.Fragment,null,f?i||(i=o()("p",{},void 0,"Thank you for your response.")):r||(r=o()("p",{},void 0,"Did you find this information helpful?")),!f&&o()("div",{className:O},void 0,o()("button",{type:"button",onClick:function(){return I("yes")}},void 0,"Yes"),o()("button",{type:"button",onClick:function(){return I("no")}},void 0,"No")));return p.a.createElement("div",{className:Object(g.cx)(k,function(){switch(n){case"body":return x;case"hub":return w;default:return""}}()),ref:P,role:"complementary"},A)};E.displayName="StorylinesSurveyModal";var T=E;function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var S="1_Show";t.b=function(e){var t,n=Object(m.a)(),i=(null==n||null===(t=n.styln_trust)||void 0===t?void 0:t.variant)===S,r=Object(d.useState)(!1),a=u()(r,2),s=a[0],c=a[1],p=Object(d.useState)([]),h=u()(p,2),g=h[0],y=h[1],v=[],b=function(t){var n;if((t.origin||t.originalEvent.origin)===window.location.origin){var i=document.querySelectorAll(".trust-survey-component"),r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);i.length>0&&(Array.prototype.find.call(i,(function(e){v.find((function(t){return t.containerInfo.id===e.id}))||(r.dataSlug=e.getAttribute("data-slug"),v.push(Object(f.createPortal)(n||(n=o()(T,{data:r})),e)))})),y(v),c(!0))}};return Object(d.useEffect)((function(){return window.addEventListener("message",b),function(){window.removeEventListener("message",b)}}),[]),i&&s&&g}},RQdI:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("Au1T")),o=function(e){return r.default.createElement(a.StyledTableOfContentsItem,{className:a.bulletClass},e.children)};o.displayName="TableOfContentsListItem",o.defaultProps={children:null};var s=o;t.default=s},"RRh/":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.MediaWithWriteThroughSummary=t.MediaWithWriteThroughSeries=t.MediaWithWriteThroughMediaWrapper=t.MediaWithWriteThroughHeader=t.MediaWithWriteThrough=void 0;var r=n("Jqp9"),a=n("6l8D"),o=i(n("wXC7")),s=(0,i(n("WThh")).default)(["small","medium"]),l=(0,r.styled)("div",{target:"e14og11s0"})((function(e){return s(e,{flexDirection:["column","row"]})})," display:flex;");t.MediaWithWriteThroughSeries=l;var c=(0,r.styled)("div",{target:"e14og11s1"})("margin-left:4%;flex-basis:31%;.",a.linkClass,"{text-decoration:underline;color:",o.default.color.black,";&:hover,&:focus{text-decoration:none;}&:visited{color:",o.default.color.black,";}}");t.MediaWithWriteThroughSummary=c;var u=(0,r.styled)("div",{target:"e14og11s2"})(".",a.linkClass,"{text-decoration:underline;color:",o.default.color.black,";&:hover,&:focus{text-decoration:none;}&:visited{color:",o.default.color.black,";}}");t.MediaWithWriteThroughHeader=u;var d=(0,r.styled)("div",{target:"e14og11s3"})("margin-bottom:10px;width:50%;",(function(e){return s(e,{width:["100%","50%"]})}));t.MediaWithWriteThroughMediaWrapper=d;var p=(0,r.styled)("div",{target:"e14og11s4"})((function(e){return s(e,{padding:["0 22px","0 0"]})}));t.MediaWithWriteThrough=p},"Rb+W":function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"s",(function(){return b})),n.d(t,"q",(function(){return _})),n.d(t,"j",(function(){return k})),n.d(t,"k",(function(){return O})),n.d(t,"n",(function(){return E})),n.d(t,"l",(function(){return T})),n.d(t,"m",(function(){return C})),n.d(t,"o",(function(){return S})),n.d(t,"h",(function(){return P})),n.d(t,"t",(function(){return j})),n.d(t,"b",(function(){return R})),n.d(t,"c",(function(){return N})),n.d(t,"p",(function(){return D})),n.d(t,"f",(function(){return B})),n.d(t,"i",(function(){return z})),n.d(t,"d",(function(){return F})),n.d(t,"g",(function(){return W})),n.d(t,"r",(function(){return q})),n.d(t,"e",(function(){return V})),n.d(t,"u",(function(){return G}));var i,r,a,o=n("VkAN"),s=n.n(o),l=n("lSNA"),c=n.n(l),u=n("eFc+"),d=n.n(u),p=n("cr+I"),f=n.n(p),m=(n("5pww"),n("TvfT")),h=n("aClD");function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={prop:"nyt",plat:"web",ver:"vi",edn:"us"};return y(y({},e),t)}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={prop:"mnyt",plat:"mweb",ver:"mvi",edn:"us"};return e?y(y({},e),t):{}}function _(e){var t={smartphone:"small",tablet:"medium",desktop:"large"};return e?t[e]:t.desktop}function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e);return t.length&&t.forEach((function(t){if(e[t]instanceof Array){var n=e[t].toString().toLowerCase();n.length>0&&(e[t]=n)}})),e}function x(e){return"string"==typeof e?e.toLowerCase().replace(/\s+|\W/g,"").substring(0,30):null}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={brandsensitive:"false"},i={organization:"org",location:"geo",person:"per",title:"ttl",subject:"des",keyword:"spon"};return e&&e instanceof Array&&e.forEach((function(e){var t=e.vernacular,r=e.displayName,a=e.isAdvertisingBrandSensitive,o=e.__typename,s=r||t,l=o?o.toLowerCase():null,c=s?x(s):null,u=i[l]||l;c&&u&&n[u]?n[u].push(c):c&&u&&(n[u]=[c]),a&&(n.brandsensitive="true")})),n=w(n),Object.assign(t,n)}function O(){return Object(m.a)("pgtype")?Object(m.a)("pgtype"):Object(m.a)("src")?"recpg":Object(m.a)("recp")?"recmod":""}function E(e){if(!e||!e.search){if("production"!==vi.env.NODE_ENV)throw new Error("missing react router location in getRefFromLocation");return""}var t=f.a.parse(e.search);return t.pgtype?t.pgtype:t.src?"recpg":t.recp?"recmod":""}function T(){var e=Object(m.a)("smid");if(e){if("fb-nytimes"===e||"fb-share"===e)return"facebook";if("tw-nytimes"===e||"tw-share"===e)return"twitter"}return""}function C(e){if(!e||!e.search){if("production"!==vi.env.NODE_ENV)throw new Error("missing react router location in getRefFromLocation");return""}var t=f.a.parse(e.search).smid;if(t){if("fb-nytimes"===t||"fb-share"===t)return"facebook";if("tw-nytimes"===t||"tw-share"===t)return"twitter"}return""}function S(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(Object(h.a)(4)+1).toString();return window.sov&&!e||(window.sov=t),window.sov}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return e.forEach((function(e){var t=e.name,i=e.collectionType,r=x(t);"COLUMN"!==i?n.coll?n.coll.push(r):n.coll=[r]:n.col?n.col.push(r):n.col=[r]})),n=w(n),Object.assign(t,n)}function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=t.isOak,r={article:"art",blog:"bl",collection:"coll",guides:"gui","Guide SF":"guisf","home page":"hp",interactive:"int",recipe:"rec",review:"rev","Recommendation Page":"recomm","search results":"ser","section front":"sf",slideshow:"ss","Video Library":"vidlib","topic index":"topf","topic page":"top"},a=[];return r[e]&&a.push(r[e]),(n||[]).forEach((function(e){var t=(e||"").toLowerCase();t&&r[t]&&a.push(r[t])})),i&&a.push("oak"),a.join(",")||null}function I(e){return e<400?"short":e<1400?"medium":e<2200?"long":"xlong"}function A(e){var t;return e&&Array.isArray(e)&&e.forEach((function(e){var n=e.creators;n&&Array.isArray(n)&&n.forEach((function(e){var n=e&&e.displayName&&"string"==typeof e.displayName&&e.displayName.replace(/[.\s]+/g,"").toLowerCase();t=t?"".concat(t,",").concat(n):"".concat(n)}))})),t}function j(e,t,n){return(n=n||{}).vp=n.vp||t,e&&Array.isArray(e)?(e.forEach((function(e){var i=e.key,r=e.value;i&&r&&(n[i]=("prop"===i||"plat"===i)&&"small"===t?"m".concat(r):r)})),n):n}function L(e){return e&&e.length?e:"none"}function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window,t=e.document.documentElement.getAttribute("data-nyt-ab");return t?t.split(" ").reduce((function(e,t){var n=t.split("="),i=n[0].toLowerCase(),r=n[1];return(i.indexOf("dfp")>-1||i.indexOf("redbird")>-1)&&e.push("".concat(i,"_").concat(r)),e}),[]):""}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=t.sourceId,r=t.type,a=t.compatibility,o=t.wordCount,s=t.bylines,l=t.fullBleedDisplayStyle,c=t.typeOfMaterials,u={edn:"us",prop:"small"===n?"mnyt":"nyt",plat:"small"===n?"mweb":"web"};return i&&(u.id=i),r&&a&&(u.typ=M(r,a,c)),o&&(u.artlen=I(o)),s&&(u.auth=A(s)),l&&(u.ledemedsz=L(l)),Object.assign(e,u)}function D(e){return"smartphone"===e?"m".concat("vi"):"vi"}function B(e){var t=e.select(/nyt-a/);return t?t["nyt-a"]:null}function z(e){var t=e.select(/nyt-gdpr/);return t?t["nyt-gdpr"]:null}function F(e){var t=e.select(/NYT-T/);return t?t["NYT-T"]:null}function U(e){return e.match(/(http|https):\/\/((www|googleads|adclick|ade-beta|google-bidout-d)\.(googleadservices|g|media6degrees|openx)\.(|doubleclick\.)(com|net))\/(pagead|pcs|adserv|w)\/(|1.0\/)((aclk|click|view|clktrk|rc)\?[^'">]+)/g)}function H(e){var t=e.contentDocument;if(null!==t){var n=t.querySelectorAll('a[href][target="_blank"]'),i=t.querySelectorAll("iframe");if(n.length>0)for(var r=0;r<n.length;r+=1){var a=U(n[r].href);if(null!==a)return a[0]}else if(i.length>0)for(var o=0;o<i.length;o+=1){var s=H(i[o]);if(""!==s)return s}}else{var l=U(e.outerHTML);if(null!==l)return l[0]}return""}function W(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return new Promise((function(n){if(e.j&&e.j._html_){var i=U(e.j._html_);n(null!==i?i[0]:"")}else{var r=e.getSlotElementId(),a=t.document.getElementById(r).querySelector("iframe");setTimeout((function(){n(H(a))}),3e3)}}))}function q(e){return"/es/"===(null==e?void 0:e.substring(e.length-4))}k.fragments={keywords:d()(i||(i=s()(["\n    fragment getNewsKeywords_keywords on CreativeWork {\n      timesTags @filterEmpty {\n        __typename\n        vernacular\n        isAdvertisingBrandSensitive\n        displayName\n      }\n    }\n  "])))},P.fragments={collections:d()(r||(r=s()(["\n    fragment getCollections_collections on CreativeWork {\n      collections {\n        id\n        name\n        collectionType\n      }\n    }\n  "])))},N.fragments={data:d()(a||(a=s()(["\n    fragment getAdLibraryFallback_data on CreativeWork {\n      ... on Published {\n        sourceId\n        type\n      }\n      ... on Article {\n        id\n        compatibility {\n          isOak\n        }\n        wordCount\n      }\n      bylines {\n        creators {\n          ... on Person {\n            id\n            displayName\n          }\n        }\n      }\n      displayProperties {\n        fullBleedDisplayStyle\n      }\n      typeOfMaterials\n    }\n  "])))};var V=function(e){var t={"vi-story":{amazon:"amazon_story_toggle",medianet:"medianet_story_toggle",dfp:"dfp_story_toggle",geoedge:"geoedge_toggle"},"vi-homepage":{amazon:"amazon_home_toggle",medianet:"medianet_home_toggle",dfp:"dfp_home_toggle",geoedge:"geoedge_toggle"},"vi-collection":{amazon:"amazon_collections_toggle",medianet:"medianet_collections_toggle",dfp:"dfp_collections_toggle",geoedge:"geoedge_toggle"},"vi-interactive":{amazon:"amazon_interactive_toggle",medianet:"medianet_interactive_toggle",dfp:"dfp_interactive_toggle",geoedge:"geoedge_toggle"},default:{amazon:"amazon_toggle",medianet:"medianet_toggle",dfp:"dfp_toggle",geoedge:"geoedge_toggle"}};return e in t?t[e]:t.default},G=function(e){return[].includes(e)}},RemB:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("1gPk")),o=function(e){var t=e.children;return r.default.createElement("em",{className:a.italicClass},t)};o.displayName="ItalicFormat";var s=o;t.default=s},Rpp7:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ctaButtonConvDockDesignTest2311=t.dockContentHeadlineConvDockDesignTest2311Variant2noPriceInCollapsed=t.dockContentHeadlineConvDockDesignTest2311=t.dockContentKickerConvDockDesignTest2311=t.dockWrapperConvDockDesignTest2311=t.dockContentWrapperConvDockDesignTest2311=t.dockHeaderHedConvDockDesignTest2311=t.ctaDek=t.ctaButton=t.ctaHeaderLink=t.ctaHeaderLinkWrapper=t.header=t.dockHeaderWrapperExpanded=t.dockWrapper=t.dockContentLogo=t.dockContentWrapper=t.dockBauContentPrice=t.dockBauPrice=t.dockHeaderSubHed=t.dockHeaderHedWord=t.dockHeaderHed=t.middleContentSubHedCA=t.middleContentSubHed=t.middleContentHed=t.rightContentWrapper=t.middleContentWrapper=t.dockHeaderWrapper=void 0;var a,o,s,l,c,u,d,p,f,m,h,g,y,v,b,_,w,x,k,O,E,T,C,S,P,M,I,A=n("Jqp9"),j=r(n("wXC7")),L=n("lVLo");t.dockHeaderWrapper=(0,A.css)(a||(a=i(["\n  line-height: 140%;\n  text-align: left;\n  padding-left: 25px;\n  font-size: 14px;\n\n  @media screen and (min-width: ","px) {\n    display: flex;\n    font-size: 16px;\n    position: absolute;\n    top: 18px;\n    width: calc(100vw - 50px);\n    justify-content: center;\n    left: 0;\n  }\n\n  & > span {\n    display: none;\n\n    @media screen and (min-width: ","px) {\n      display: unset;\n    }\n  }\n"],["\n  line-height: 140%;\n  text-align: left;\n  padding-left: 25px;\n  font-size: 14px;\n\n  @media screen and (min-width: ","px) {\n    display: flex;\n    font-size: 16px;\n    position: absolute;\n    top: 18px;\n    width: calc(100vw - 50px);\n    justify-content: center;\n    left: 0;\n  }\n\n  & > span {\n    display: none;\n\n    @media screen and (min-width: ","px) {\n      display: unset;\n    }\n  }\n"])),L.widths.medium,L.widths.medium),t.middleContentWrapper=(0,A.css)(o||(o=i(["\n  font-size: 12px;\n  line-height: 130%;\n  text-align: center;\n\n  @media screen and (min-width: ","px) {\n    font-size: 13px;\n  }\n\n  @media screen and (min-width: ","px) {\n    font-size: 15px;\n  }\n"],["\n  font-size: 12px;\n  line-height: 130%;\n  text-align: center;\n\n  @media screen and (min-width: ","px) {\n    font-size: 13px;\n  }\n\n  @media screen and (min-width: ","px) {\n    font-size: 15px;\n  }\n"])),L.widths.medium,L.widths.mediumLarge),t.rightContentWrapper=(0,A.css)(s||(s=i(["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  margin-top: 16px;\n  justify-content: center;\n\n  @media screen and (min-width: ","px) {\n    margin-right: 32px;\n    margin-top: 0;\n  }\n\n  @media screen and (min-width: ","px) {\n    margin-right: 64px;\n  }\n\n  @media screen and (min-width: ","px) {\n    margin-right: 80px;\n  }\n"],["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  margin-top: 16px;\n  justify-content: center;\n\n  @media screen and (min-width: ","px) {\n    margin-right: 32px;\n    margin-top: 0;\n  }\n\n  @media screen and (min-width: ","px) {\n    margin-right: 64px;\n  }\n\n  @media screen and (min-width: ","px) {\n    margin-right: 80px;\n  }\n"])),L.widths.medium,L.widths.mediumLarge,L.widths.xLarge),t.middleContentHed=(0,A.css)(l||(l=i(["\n  font-weight: ",";\n  font-size: 10px;\n  letter-spacing: 0.6px;\n  margin-bottom: 8px;\n\n  @media screen and (min-width: ","px) {\n    font-size: 12px;\n  }\n"],["\n  font-weight: ",";\n  font-size: 10px;\n  letter-spacing: 0.6px;\n  margin-bottom: 8px;\n\n  @media screen and (min-width: ","px) {\n    font-size: 12px;\n  }\n"])),j.default.font.weight.mediumBold,L.widths.medium),t.middleContentSubHed=(0,A.css)(c||(c=i(["\n  font-family: ",";\n  font-size: 16px;\n  line-height: 128%;\n  font-weight: ",";\n  margin: 0 auto;\n  text-align: center;\n\n  @media screen and (min-width: ","px) {\n    font-size: 18px;\n    max-width: unset;\n  }\n\n  @media screen and (min-width: ","px) {\n    font-size: 24px;\n  }\n\n  @media screen and (min-width: ","px) {\n    font-size: 30px;\n  }\n"],["\n  font-family: ",";\n  font-size: 16px;\n  line-height: 128%;\n  font-weight: ",";\n  margin: 0 auto;\n  text-align: center;\n\n  @media screen and (min-width: ","px) {\n    font-size: 18px;\n    max-width: unset;\n  }\n\n  @media screen and (min-width: ","px) {\n    font-size: 24px;\n  }\n\n  @media screen and (min-width: ","px) {\n    font-size: 30px;\n  }\n"])),L.fonts.cheltenham,j.default.font.weight.medium,L.widths.medium,L.widths.mediumLarge,L.widths.xLarge),t.middleContentSubHedCA=(0,A.css)(u||(u=i(["\n  max-width: 55%;\n  @media screen and (min-width: ","px) {\n    max-width: unset;\n  }\n"],["\n  max-width: 55%;\n  @media screen and (min-width: ","px) {\n    max-width: unset;\n  }\n"])),L.widths.medium),t.dockHeaderHed=(0,A.css)(d||(d=i(["\n  font-weight: ",";\n\n  span:first-child {\n    display: none;\n\n    @media screen and (min-width: ","px) {\n      display: unset;\n  }\n"],["\n  font-weight: ",";\n\n  span:first-child {\n    display: none;\n\n    @media screen and (min-width: ","px) {\n      display: unset;\n  }\n"])),j.default.font.weight.mediumBold,L.widths.medium),t.dockHeaderHedWord=(0,A.css)(p||(p=i(["\n  text-transform: none;\n\n  @media screen and (min-width: ","px) {\n    text-transform: lowercase;\n  }\n"],["\n  text-transform: none;\n\n  @media screen and (min-width: ","px) {\n    text-transform: lowercase;\n  }\n"])),L.widths.medium),t.dockHeaderSubHed=(0,A.css)(f||(f=i(["\n  font-weight: ",";\n  font-size: 12px;\n\n  @media screen and (min-width: ","px) {\n    font-size: 16px;\n  }\n\n  span:first-child {\n    @media screen and (min-width: ","px) {\n      display: none;\n    }\n  }\n"],["\n  font-weight: ",";\n  font-size: 12px;\n\n  @media screen and (min-width: ","px) {\n    font-size: 16px;\n  }\n\n  span:first-child {\n    @media screen and (min-width: ","px) {\n      display: none;\n    }\n  }\n"])),j.default.font.weight.light,L.widths.medium,L.widths.medium),t.dockBauPrice=(0,A.css)(m||(m=i(["\n  color: ",";\n  text-decoration: line-through;\n"],["\n  color: ",";\n  text-decoration: line-through;\n"])),L.colors.grayLightContentContentPlaceholder),t.dockBauContentPrice=(0,A.css)(h||(h=i(["\n  color: ",";\n  text-decoration: line-through;\n"],["\n  color: ",";\n  text-decoration: line-through;\n"])),L.colors.grayLightContentContentPlaceholder),t.dockContentWrapper=(0,A.css)(g||(g=i(["\n  align-items: center;\n  background: ",";\n  border-radius: 5px;\n  margin-bottom: 24px;\n  margin-top: 7px;\n  padding: 20px 0;\n  text-align: center;\n  width: calc(100% - 48px);\n\n  @media screen and (min-width: ","px) {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    min-height: 56px;\n    padding: 40px 0;\n  }\n\n  @media screen and (min-width: ","px) {\n    margin-bottom: 32px;\n    width: calc(100% - 40px);\n  }\n\n  @media screen and (min-width: ","px) {\n    width: calc(100% - 288px);\n  }\n"],["\n  align-items: center;\n  background: ",";\n  border-radius: 5px;\n  margin-bottom: 24px;\n  margin-top: 7px;\n  padding: 20px 0;\n  text-align: center;\n  width: calc(100% - 48px);\n\n  @media screen and (min-width: ","px) {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    min-height: 56px;\n    padding: 40px 0;\n  }\n\n  @media screen and (min-width: ","px) {\n    margin-bottom: 32px;\n    width: calc(100% - 40px);\n  }\n\n  @media screen and (min-width: ","px) {\n    width: calc(100% - 288px);\n  }\n"])),L.colors.grayLightBackgroundTertiary,L.widths.medium,L.widths.mediumLarge,L.widths.xLarge),t.dockContentLogo=(0,A.css)(y||(y=i(["\n  display: none;\n\n  @media screen and (min-width: ","px) {\n    display: unset;\n    padding-left: 32px;\n    width: 135px;\n  }\n\n  @media screen and (min-width: ","px) {\n    padding-left: 64px;\n    width: 176px;\n  }\n\n  @media screen and (min-width: ","px) {\n    padding-left: 80px;\n  }\n"],["\n  display: none;\n\n  @media screen and (min-width: ","px) {\n    display: unset;\n    padding-left: 32px;\n    width: 135px;\n  }\n\n  @media screen and (min-width: ","px) {\n    padding-left: 64px;\n    width: 176px;\n  }\n\n  @media screen and (min-width: ","px) {\n    padding-left: 80px;\n  }\n"])),L.widths.medium,L.widths.mediumLarge,L.widths.xLarge),t.dockWrapper=(0,A.css)(v||(v=i(["\n  color: ",";\n  font-family: ",";\n"],["\n  color: ",";\n  font-family: ",";\n"])),L.colors.blackDarkBackgroundPrimary,L.fonts.franklin),t.dockHeaderWrapperExpanded=(0,A.css)(b||(b=i(["\n  // To override default styling about showing copy collapse/expanded copy\n  & > div {\n    > div:last-child {\n      > div:first-child {\n        display: none;\n        @media screen and (min-width: ","px) {\n          display: block;\n        }\n      }\n    }\n  }\n"],["\n  // To override default styling about showing copy collapse/expanded copy\n  & > div {\n    > div:last-child {\n      > div:first-child {\n        display: none;\n        @media screen and (min-width: ","px) {\n          display: block;\n        }\n      }\n    }\n  }\n"])),L.widths.xLarge),t.header=(0,A.css)(_||(_=i([""],[""]))),t.ctaHeaderLinkWrapper=(0,A.css)(w||(w=i(["\n  display: none;\n\n  @media screen and (min-width: ","px) {\n    display: unset;\n  }\n"],["\n  display: none;\n\n  @media screen and (min-width: ","px) {\n    display: unset;\n  }\n"])),L.widths.medium),t.ctaHeaderLink=(0,A.css)(x||(x=i(["\n  font-family: ",";\n  font-size: 12px;\n  font-weight: ",";\n  letter-spacing: 0.1px;\n  line-height: 12px;\n  text-decoration: none;\n\n  &:link,\n  &:visited {\n    text-decoration: none;\n  }\n"],["\n  font-family: ",";\n  font-size: 12px;\n  font-weight: ",";\n  letter-spacing: 0.1px;\n  line-height: 12px;\n  text-decoration: none;\n\n  &:link,\n  &:visited {\n    text-decoration: none;\n  }\n"])),L.fonts.franklin,j.default.font.weight.bold),t.ctaButton=(0,A.css)(k||(k=i(["\n  background: ",";\n  border-radius: 3px;\n  color: ",";\n  display: flex;\n  justify-content: center;\n  font-size: 14px;\n  font-weight: ",";\n  line-height: 130%;\n  padding: 7.5px 12px;\n  text-decoration: none;\n\n  &:link,\n  &:visited {\n    color: ",";\n    font-size: 14px;\n    text-decoration: none;\n  }\n"],["\n  background: ",";\n  border-radius: 3px;\n  color: ",";\n  display: flex;\n  justify-content: center;\n  font-size: 14px;\n  font-weight: ",";\n  line-height: 130%;\n  padding: 7.5px 12px;\n  text-decoration: none;\n\n  &:link,\n  &:visited {\n    color: ",";\n    font-size: 14px;\n    text-decoration: none;\n  }\n"])),L.colors.blackDarkBackgroundPrimary,L.colors.whiteDarkContentPrimary,j.default.font.weight.mediumBold,L.colors.whiteDarkContentPrimary),t.ctaDek=(0,A.css)(O||(O=i(["\n  font-size: 12px;\n  font-weight: ",";\n  line-height: 130%;\n  margin-top: 8px;\n\n  @media screen and (min-width: ","px) {\n    text-align: left;\n  }\n"],["\n  font-size: 12px;\n  font-weight: ",";\n  line-height: 130%;\n  margin-top: 8px;\n\n  @media screen and (min-width: ","px) {\n    text-align: left;\n  }\n"])),j.default.font.weight.medium,L.widths.medium),t.dockHeaderHedConvDockDesignTest2311=(0,A.css)(E||(E=i(["\n  font-weight: ",";\n  font-family: ",";\n  font-size: 14px;\n  line-height: 130%;\n  text-align: center;\n\n  @media screen and (min-width: ","px) {\n    font-size: 16px;\n  }\n\n  @media screen and (min-width: ","px) {\n    font-size: 18px;\n  }\n"],["\n  font-weight: ",";\n  font-family: ",";\n  font-size: 14px;\n  line-height: 130%;\n  text-align: center;\n\n  @media screen and (min-width: ","px) {\n    font-size: 16px;\n  }\n\n  @media screen and (min-width: ","px) {\n    font-size: 18px;\n  }\n"])),j.default.font.weight.mediumBold,L.fonts.franklin,L.widths.verySmall,L.widths.mediumLarge),t.dockContentWrapperConvDockDesignTest2311=(0,A.css)(T||(T=i(["\n  background-color: ",";\n  border-top: 1px "," solid;\n  display: flex;\n  padding: 32px 20px;\n  flex-direction: column;\n  align-items: center;\n  align-self: stretch;\n  gap: 12px;\n\n  @media screen and (min-width: ","px) {\n    padding: 40px 20px;\n  }\n"],["\n  background-color: ",";\n  border-top: 1px "," solid;\n  display: flex;\n  padding: 32px 20px;\n  flex-direction: column;\n  align-items: center;\n  align-self: stretch;\n  gap: 12px;\n\n  @media screen and (min-width: ","px) {\n    padding: 40px 20px;\n  }\n"])),L.colors.white,L.colors.gainsboro,L.widths.mediumLarge),t.dockWrapperConvDockDesignTest2311=(0,A.css)(C||(C=i(["\n  background-color: ",";\n  font-family: ",";\n"],["\n  background-color: ",";\n  font-family: ",";\n"])),L.colors.whiteDarkContentPrimary,L.fonts.franklin),t.dockContentKickerConvDockDesignTest2311=(0,A.css)(S||(S=i(["\n  color: ",";\n  font-family: ",";\n  font-size: 14px;\n  font-style: normal;\n  font-weight: ",";\n  line-height: 120%;\n  letter-spacing: 0.8px;\n  text-transform: uppercase;\n\n  @media screen and (min-width: ","px) {\n    font-size: 16px;\n  }\n"],["\n  color: ",";\n  font-family: ",";\n  font-size: 14px;\n  font-style: normal;\n  font-weight: ",";\n  line-height: 120%;\n  letter-spacing: 0.8px;\n  text-transform: uppercase;\n\n  @media screen and (min-width: ","px) {\n    font-size: 16px;\n  }\n"])),L.colors.veryDarkGrey,L.fonts.franklin,L.fontWeights.semiBold,L.widths.mediumLarge),t.dockContentHeadlineConvDockDesignTest2311=(0,A.css)(P||(P=i(["\n  color: ",";\n  font-family: ",";\n  font-size: 36px;\n  font-style: normal;\n  font-weight: ",";\n  line-height: 120%;\n  text-align: center;\n\n  s {\n    color: #8b8b8b;\n    text-decoration: line-through;\n    text-decoration-color: rgba(139, 139, 139, 0.75);\n  }\n\n  span {\n    white-space: nowrap;\n  }\n\n  @media screen and (min-width: ","px) {\n    font-size: 40px;\n  }\n"],["\n  color: ",";\n  font-family: ",";\n  font-size: 36px;\n  font-style: normal;\n  font-weight: ",";\n  line-height: 120%;\n  text-align: center;\n\n  s {\n    color: #8b8b8b;\n    text-decoration: line-through;\n    text-decoration-color: rgba(139, 139, 139, 0.75);\n  }\n\n  span {\n    white-space: nowrap;\n  }\n\n  @media screen and (min-width: ","px) {\n    font-size: 40px;\n  }\n"])),L.colors.veryDarkGrey,L.fonts.cheltenham,L.fontWeights.light,L.widths.mediumLarge),t.dockContentHeadlineConvDockDesignTest2311Variant2noPriceInCollapsed=(0,A.css)(M||(M=i(["\n  margin-top: -4px;\n  font-size: 40px;\n\n  @media screen and (min-width: ","px) {\n    font-size: 44px;\n  }\n\n  @media screen and (min-width: ","px) {\n    font-size: 48px;\n  }\n"],["\n  margin-top: -4px;\n  font-size: 40px;\n\n  @media screen and (min-width: ","px) {\n    font-size: 44px;\n  }\n\n  @media screen and (min-width: ","px) {\n    font-size: 48px;\n  }\n"])),L.widths.medium,L.widths.mediumLarge),t.ctaButtonConvDockDesignTest2311=(0,A.css)(I||(I=i(["\n  background: ",";\n  border-radius: 3px;\n  color: ",";\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 8px;\n  width: 140px;\n  height: 44px;\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 130%;\n  text-decoration: none;\n\n  &:link,\n  &:visited {\n    color: ",";\n    font-size: 16px;\n    text-decoration: none;\n  }\n"],["\n  background: ",";\n  border-radius: 3px;\n  color: ",";\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 8px;\n  width: 140px;\n  height: 44px;\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 130%;\n  text-decoration: none;\n\n  &:link,\n  &:visited {\n    color: ",";\n    font-size: 16px;\n    text-decoration: none;\n  }\n"])),L.colors.blackDarkBackgroundPrimary,L.colors.whiteDarkContentPrimary,j.default.font.weight.mediumBold,L.colors.whiteDarkContentPrimary)},"Rr+T":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),i(n("yEZI"))),o=n("Jqp9"),s=n("FfcP"),l=function(e){var t=e.on,n=e.onKeyPress,i=e.onClick,l=e.children,c=e.className,u=e.contentEditable;return r.default.createElement("div",{on:t,onClick:i,onKeyPress:n,tabIndex:"0",role:"button"},r.default.createElement(a.default,{className:(0,o.cx)(s.clueClass,c),contentEditable:u},l))};l.displayName="Clue",l.defaultProps={className:void 0,contentEditable:void 0};var c=l;t.default=c},RvkP:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n("yXPU"),r=n.n(i),a=n("lSNA"),o=n.n(a),s=n("o0o1"),l=n.n(s),c=n("wYzE"),u=n("E7dQ");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f,m=[{nameRegex:/gpt\.js/,trackedOnce:!1,label:"timeGPTLoaded"},{nameRegex:/bidexchange\.js/,trackedOnce:!1,label:"bidLibLoaded",secondary:"media.net"},{nameRegex:/apstag\.js/,trackedOnce:!1,label:"bidLibLoaded",secondary:"amazon"},{nameRegex:/als-svc/,trackedOnce:!1,label:"alsService",secondary:"als-response-time"}],h=function(e,t){var n=m.find((function(e){return t.name.match(e.nameRegex)}));return n&&t.responseEnd&&e.push(p(p({},n),{},{responseEnd:t.responseEnd,duration:t.duration})),e};function g(){return y.apply(this,arguments)}function y(){return(y=r()(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==window.performance&&void 0!==window.PerformanceObserver&&void 0!==window.PerformanceResourceTiming&&((t=function(e){e.getEntriesByType("resource").reduce(h,[]).forEach((function(e){var t=p({event:"impression",module:{name:"timing",context:"script-load",label:"".concat(e.label).concat(e.secondary?"-".concat(e.secondary):""),region:Math.round(e.responseEnd).toString()}},"alsService"===e.label&&{eventData:{trigger:"ad",type:"impression"},ad:{adSlotEventName:"AlsResponse",pageType:Object(u.a)(),aliceDuration:Math.round(e.duration)}});Object(c.a)(t,{individualEvents:!0}),e.trackedOnce=!0})),m.every((function(e){return e.trackedOnce}))&&"function"==typeof f.disconnect&&f.disconnect()})(window.performance),(f=new window.PerformanceObserver(t)).observe({entryTypes:["resource"]}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},Rvwq:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("QILm")),a=i(n("W8MJ")),o=i(n("lwsE")),s=i(n("7W2i")),l=i(n("a1gu")),c=i(n("Nsbk")),u=i(n("hWkY")),d=["coverageEndTime","coverageStartTime","liveBlogUpdate","datePublished","dateModified","articleBody"];function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,l.default)(this,n)}}var f=function(e){(0,s.default)(n,e);var t=p(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.coverageEndTime,s=i.coverageStartTime,l=i.liveBlogUpdate,c=i.datePublished,u=i.dateModified,p=i.articleBody,f=(0,r.default)(i,d);return(0,o.default)(this,n),(e=t.call(this,f))["@type"]="LiveBlogPosting",e.articleBody=p,e.coverageEndTime=a,e.coverageStartTime=s,e.liveBlogUpdate=l,e.datePublished=c,e.dateModified=u,e}return(0,a.default)(n)}(u.default);t.default=f},RxXP:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lSNA")),a=i(n("q1tI")),o=(i(n("17x9")),n("Jqp9")),s=n("fRbn"),l=n("7zGq");function c(e){var t=e.index,n=e.isAMP,i=e.length;return a.default.createElement("ul",{className:s.navListClass},(0,l.times)(i,(function(e){return a.default.createElement("li",{key:e,className:(0,o.cx)(s.dotClass,(0,r.default)({},s.activeClass,e===(n?0:t))),"data-active":e===t,"data-amp-bind-class":n?"['".concat(s.dotClass,"', ").concat(e," == +").concat(t," ? '").concat(s.activeClass,"' : null]"):null})})))}c.displayName="DotNav",c.defaultProps={index:0,isAMP:!1};var u=c;t.default=u},"S+vP":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o=i(n("cDf5")),s=i(n("zrfs")),l="object"===("undefined"==typeof window?"undefined":(0,o.default)(window))&&null!==(r=window.vi)&&void 0!==r&&null!==(a=r.env)&&void 0!==a&&a.VHS_BASE_URL?"".concat(window.vi.env.VHS_BASE_URL,"vhs.min.js"):"https://static01.nyt.com/video-static/vhs3/vhs.min.js",c=function(e){var t=window||{},n=null;t.VHS_PLAYER_DEPS_LOADING?n=t.setInterval((function(){t.__VHS__&&(t.VHS_PLAYER_DEPS_LOADING=null,t.clearInterval(n),e())}),100):(t.VHS_PLAYER_DEPS_LOADING=!0,(0,s.default)(l,e))};t.default=c},SBGf:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"d",(function(){return g})),n.d(t,"c",(function(){return y})),n.d(t,"e",(function(){return v})),n.d(t,"k",(function(){return b})),n.d(t,"f",(function(){return w})),n.d(t,"i",(function(){return k})),n.d(t,"j",(function(){return O})),n.d(t,"m",(function(){return E})),n.d(t,"h",(function(){return T})),n.d(t,"l",(function(){return C})),n.d(t,"g",(function(){return S}));var i=n("lSNA"),r=n.n(i),a=n("RIqP"),o=n.n(a),s=n("cr+I"),l=n.n(s),c=n("06b3"),u=n("Rb+W"),d=n("r6lX");function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m="STORY_recirc_algo_show_more",h="PAID_POST",g={tablet:{storiesPerRow:2,maxStoriesToShow:4},desktop:{storiesPerRow:3,maxStoriesToShow:6}},y={tablet:{storiesPerRow:2,maxStoriesToShow:2},desktop:{storiesPerRow:3,maxStoriesToShow:3}},v={tablet:{storiesPerRow:1,maxStoriesToShow:10},desktop:{storiesPerRow:1,maxStoriesToShow:10}};function b(e){switch(e){case"1_show_button_all":return{min:3,max:9};case"2_longer_feed":return{min:6,max:6};default:return{min:3,max:3}}}var _=function(e,t){if(!e||!t)return e;for(var n=o()(e),i=n.length-1;i>=0;i-=1){var r,a;null!==(r=n[i])&&void 0!==r&&null!==(a=r.node)&&void 0!==a&&a.sourceId&&t.includes(n[i].node.sourceId)&&n.splice(i,1)}return n},w=function(e){var t=e||{},n=t.articleId,i=t.collections,r=void 0===i?[]:i,a=t.surfaces,s=void 0===a?[]:a,l=t.recircSectionDisplayName,c=t.recircSectionUrl,u=r.filter((function(e){return e})),d=function(e,t){var n,i={SERIES:1,NEWS_EVENT:2,SPOTLIGHT:3,COLUMN:4,ISSUE:5},r=[],a=[];e.forEach((function(e){var t=e.collectionType;i[t]&&a.push(f(f({},e),{},{priority:i[t]}))})),a.sort((function(e,t){return e.priority-t.priority}));var o=a[0];return null!=o&&null!==(n=o.assets)&&void 0!==n&&n.edges?(o.assets.edges.slice(0,3).forEach((function(e){var t;null!=e&&null!==(t=e.node)&&void 0!==t&&t.sourceId&&r.push(e.node.sourceId)})),{collectionArticles:_(o.assets.edges,[t]),collectionName:o.name,collectionUrl:o.url,collectionTagline:o.tagline,collectionArticleIds:r}):{collectionArticles:null,collectionName:null,collectionUrl:null,collectionTagline:null,collectionArticleIds:[]}}(u,n),p=d.collectionArticles,m=d.collectionName,h=d.collectionUrl,g=d.collectionTagline,y=d.collectionArticleIds;y.push(n);var v=p&&p.length>=3;return{collectionArticles:v?p.slice(0,3):[],collectionName:m,collectionTagline:g,collectionUrl:h,hasAssociatedCollection:v,personalizedPackages:function(e,t,n,i,r){return e.reduce((function(e,a){var s,l=null==a?void 0:a.metadata,c=l.name,u=l.uri,d=l.label,p=l.trackingParams,f="eos-more-in"===c?"".concat(d," ").concat(i):d,m="eos-more-in"===c?r:null,h=(null==a?void 0:a.edges)||[];if("eos-more-in"===c&&h.length<3){var g,y,v=function(e,t){var n,i=null;return null!==(n=i=e.find((function(e){return e.url===t&&"SECTION"===e.collectionType})))&&void 0!==n&&n.assets||(i=e.find((function(e){return"SECTION"===e.collectionType}))),i}(t,r);h=null!==(g=null==v||null===(y=v.assets)||void 0===y?void 0:y.edges)&&void 0!==g?g:[],null!=v&&v.name&&(f="".concat(d," ").concat(v.name)),null!=v&&v.url&&(m=v.url)}return h=(null===(s=_(h,n))||void 0===s?void 0:s.filter((function(e){var t;return null==e||null===(t=e.node)||void 0===t?void 0:t.promotionalMedia})))||[],[].concat(o()(e),[{uri:u,packageLabel:f,packageUrl:m,trackingParams:p,items:h}])}),[]).slice(0,3)}(s,u,y,l,c)}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return null==e?void 0:e.reduce((function(e,t){return e[t.key]=t.value,e}),{})},k=function(e){var t=e.cardId,n=void 0===t?"":t,i=e.cardIndex,r=void 0===i?null:i,a=e.cardUrl,o=void 0===a?"":a,s=e.cardUri,p=void 0===s?"":s,m=e.impId,h=void 0===m?"":m,g=e.listUri,y=void 0===g?"":g,v=e.packageLabel,b=void 0===v?"":v,_=e.packageTrackingParams,w=void 0===_?[]:_,k=e.trackingName,O=void 0===k?"":k,E=e.region,T=void 0===E?"":E,C=e.trackingParams,S=void 0===C?[]:C,P=e.type,M=void 0===P?"":P,I=x(S),A=l.a.stringify(f(f({},I),{},{impression_id:h}));return{event:"impression",block:f({label:b,name:O,template:O,region:T},y?{list:{uri:y}}:{}),card:{url:o?"".concat(o,"?").concat(A):"",uri:p,index:r,id:n,type:M,algos:I},user:{regiId:Object(u.f)(c.a)},package:{algos_meta:Object(d.coerceTrackingParams)(w)}}},O=function(e){var t=e.cardId,n=void 0===t?"":t,i=e.cardIndex,r=void 0===i?null:i,a=e.cardUrl,o=void 0===a?"":a,s=e.cardUri,l=void 0===s?"":s,p=e.packageLabel,f=void 0===p?"":p,m=e.packageTrackingParams,h=void 0===m?[]:m,g=e.region,y=void 0===g?"":g,v=e.trackingName,b=void 0===v?"":v,_=e.trackingParams,w=void 0===_?[]:_,k=e.type,O=void 0===k?"":k,E=x(w);return{event:"moduleInteraction",eventData:{type:"click",pagetype:O},module:{label:f,name:"".concat(O," click"),context:b,region:y,element:{url:o,uri:l,index:r,id:n,type:O,algos:E}},user:{regiId:Object(u.f)(c.a)},package:{algos_meta:Object(d.coerceTrackingParams)(h)}}},E=function(e){return null==e?void 0:e.replace(/([-'.]|\s+)/g,"").toLowerCase()},T=function(e){return e.reduce((function(e,t,n){return t.uri?f(f({},e),{},r()({},n,t.uri)):e}),{})},C=function(e){return new Set(e.map((function(e){return e.node.headline.default}))).size<e.length},S=function(e,t,n,i){return e.headlinePrefix&&t&&!n?"".concat(e.headlinePrefix,": ").concat(e.headline):i?e.seoHeadline||e.summary:e.headline}},SJcc:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.totalBylineContainerClass=t.timestampMarginsClass=t.readTimeContainerClass=t.readTimeClass=t.TextContainer=t.SectionContainerItem=t.SectionContainer=t.ComposedBylineContainer=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=n("f/4F"),s=(0,r.css)("margin:1.25rem 0;");t.totalBylineContainerClass=s;var l=(0,r.css)("flex-wrap:wrap;",o.headshotDesktopBreakpoint,"{flex-wrap:nowrap;margin-bottom:",a.default.font.size(12),";}"),c=(0,r.css)("margin-bottom:",a.default.font.size(12),";"),u=(0,r.css)("flex-wrap:wrap;"),d=function(e){return 1!==e.headshotCount||"opinion"===e.theme.section&&e.theme.opinionHeaderRedesign?2!==e.headshotCount||"opinion"===e.theme.section&&e.theme.opinionHeaderRedesign?e.headshotCount>2?u:null:l:c},p=(0,r.styled)("div",{target:"epjyd6m0"})("display:inline-block;",(function(e){return"opinion"===e.theme.section&&e.theme.opinionHeaderRedesign&&(0,r.css)("display:flex;flex-direction:column;justify-content:center;min-height:",a.default.font.size(o.headshotOpinionHeaderRedesignSize),";",o.headshotDesktopBreakpoint,"{min-height:",0===e.headshotCount?0:a.default.font.size(o.headshotOpinionDesktopSize),";}")}),";");t.TextContainer=p;var f=(0,r.css)("width:100%;");t.readTimeContainerClass=f;var m=(0,r.css)("margin-left:auto;margin-top:0;min-width:80px;text-align:right;overflow:hidden;white-space:nowrap;font-size:",a.default.font.size(11),";");t.readTimeClass=m;var h=(0,r.css)("justify-content:center;text-align:center;"),g=(0,r.css)("margin-bottom:0;margin-top:0;");t.timestampMarginsClass=g;var y=(0,r.css)("align-items:center;"),v=(0,r.themeFn)("section",{none:y,opinion:(0,r.themeFn)("opinionHeaderRedesign",{none:y,true:(0,r.css)("align-items:flex-start;")})}),b=(0,r.themeFn)("languageDirection",{none:(0,r.css)("margin-bottom:0.25rem;"),rightToLeft:(0,r.css)("direction:ltr;margin-bottom:0.5rem;justify-content:flex-end;")}),_=(0,r.themeFn)("treatment",{guide:(0,r.css)("border-top:black;border-top-style:solid;border-top-width:1px;padding-top:20px;")}),w=(0,r.styled)("div",{target:"epjyd6m1"})("display:flex;width:100%;",v,";",b,";",d,";",(function(e){return"center"===e.contentAlignment&&h}),";",_,";> img,a > img,div > img{margin-right:10px;}");t.ComposedBylineContainer=w;var x=(0,r.themeFn)("languageDirection",{none:(0,r.css)("list-style:none;"),rightToLeft:(0,r.css)("list-style:none;padding-right:0;")}),k=(0,r.styled)("li",{target:"epjyd6m2"})("flex-shrink:1;padding-right:1rem;",x,";");t.SectionContainerItem=k;var O=(0,r.themeFn)("languageDirection",{none:(0,r.css)("display:flex;justify-content:space-between;align-items:center;margin:0;flex-wrap:nowrap;"),rightToLeft:(0,r.css)("display:flex;justify-content:space-between;align-items:center;direction:ltr;margin:0;flex-wrap:nowrap;flex-direction:row-reverse;")}),E=(0,r.styled)("ul",{target:"epjyd6m3"})(O,";align-items:flex-end;");t.SectionContainer=E},SbcB:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.creditTreatmentStyles=t.Credit=void 0;var r=n("Jqp9"),a=n("3sMT"),o=i(n("WThh")),s=i(n("wXC7")),l=(0,o.default)(["medium","large"]),c=function(e){return(0,r.css)("color:",a.color.content.quaternary,";letter-spacing:0.01em;",l(e,{fontSize:[10,12],lineHeight:[17,19]}),";")},u=(0,r.themeFn)("treatment",{none:function(e){return(0,r.css)("color:",a.color.content.quaternary,";font-family:",s.default.font.serifBase,";line-height:",s.default.font.size(18),";letter-spacing:0.01em;",l(e,{fontSize:[12,12,13]}),";")},magazine:function(e){return(0,r.css)("color:",a.color.content.quaternary,";font-family:",s.default.font.magazineSansBase,";line-height:",s.default.font.size(18),";letter-spacing:0.01em;",l(e,{fontSize:[12,12,13]}),";")},sponsored:function(e){return(0,r.css)(c(e),";font-family:",s.default.font.sponsoredBase,";")},sponsoredSensitive:function(e){return(0,r.css)(c(e),";font-family:",s.default.font.sponsoredSensitive,";")},"t-magazine":function(e){return(0,r.css)("color:",a.color.content.quaternary,";font-family:",s.default.font.tmagSansBase,";font-weight:",s.default.font.weight.book,";letter-spacing:0.02em;",l(e,{fontSize:[11,12,13],lineHeight:[18,20,18]}),";")},liveSplitLayout:(0,r.css)("color:",a.color.content.quaternary,";font-family:",s.default.font.serifBase,";line-height:",s.default.font.size(18),";font-size:",s.default.font.size(12),";letter-spacing:0.01em;")});t.creditTreatmentStyles=u;var d=(0,r.styled)("span",{target:"e1z0qqy90"})("display:inline;",u,";");t.Credit=d},ScB1:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.WORKABLE_CROPS=void 0;var a=i(n("lwsE")),o=i(n("W8MJ")),s=i(n("7GK/")),l=i(n("dc0q")),c=i(n("LrP3")),u=i(n("7Qdq")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("Np/z")),p=n("6hsm");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}var m=[["videoSixteenByNineJumbo1600","videoSixteenByNine1050","facebookJumbo","videoSixteenByNine600","videoSixteenByNine540","videoSixteenByNine480","videoSixteenByNine225","videoSmall"],["superJumbo","master1050","articleLarge","horizontalMediumAt2X","threeByTwoMediumAt2X","threeByTwoLargeAt2X","threeByTwoSmallAt2X","mediumThreeByTwo440","mediumThreeByTwo252","mediumThreeByTwo210","thumbWide"],["mediumSquareAt3X","square640","square320","filmstrip"]];t.WORKABLE_CROPS=m;var h=["video_240p_mp4","video_360p_mp4","video_480p_mp4"],g=function(){return p.DEFAULT_PROMO_IMAGES},y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>2?arguments[2]:void 0;(0,a.default)(this,e),t.media&&t.media.duration?this.data=t.media:this.data=t,this.inlineAsset=n}return(0,o.default)(e,[{key:"promotionalImage",get:function(){var e,t,n,i,r,a,o=(null===(e=this.data)||void 0===e||null===(t=e.promotionalMedia)||void 0===t?void 0:t.promotionalMedia)||(null===(n=this.data)||void 0===n?void 0:n.promotionalMedia);return"Image"===(null==o?void 0:o.__typename)?new l.default(o):(0,d.hasCrops)(null===(i=this.data)||void 0===i?void 0:i.promotionalMedia)?new l.default(this.data.promotionalMedia):(0,d.hasCrops)(null===(r=this.data)||void 0===r||null===(a=r.promotionalMedia)||void 0===a?void 0:a.promotionalMedia)?new l.default(this.data.promotionalMedia.promotionalMedia):{getStructuredData:g}}},{key:"thumbnailUrl",get:function(){var e,t=null===(e=this.data)||void 0===e?void 0:e.promotionalMedia,n=(null==t?void 0:t.assetCrops)||(null==t?void 0:t.crops)||(null==t?void 0:t.spanImageCrops);if(Array.isArray(n)&&n.length>0){var i=n.reduce((function(e,t){return e.concat(t.renditions)}),[]),r=(0,d.default)(i,m);if(r.length>0)return r.map((function(e){return e.url}))}return p.DEFAULT_PROMO_IMAGES.map((function(e){return e.url}))}},{key:"isReallyLive",get:function(){var e,t;if(null===(e=this.data)||void 0===e||!e.isLive)return!1;var n=this.data.firstPublished,i=new Date;return i.setDate(i.getHours()-24),!(i>new Date(n))&&!!(null!==(t=this.data)&&void 0!==t&&t.liveUrls&&this.data.liveUrls.length>0)}},{key:"publication",get:function(){var e,t,n;if(this.isReallyLive){var i=this.data,r=i.firstPublished,a=i.endDateTime,o=new Date(r);if(a)o=new Date(a);else{o.setTime(o.getTime()+36e5);var s=new Date;s.setTime(s.getTime()+3e5),o<s&&(o=new Date).setTime(o.getTime()+36e5)}return new u.default({isLiveBroadcast:!0,name:null===(e=this.data)||void 0===e||null===(t=e.headline)||void 0===t?void 0:t.default,startDate:null===(n=this.data)||void 0===n?void 0:n.firstPublished,endDate:o})}}},{key:"contentUrl",get:function(){if(this.isReallyLive)return this.data.liveUrls.filter((function(e){return e.indexOf(".m3u8")>-1}));if(Array.isArray(this.data.renditions)&&this.data.renditions.length>0)for(var e=this.data.renditions,t=0;t<e.length;t+=1){var n;if(h.includes(e[t].type)&&null!==(n=e[t])&&void 0!==n&&n.url.startsWith("http"))return e[t].url}}},{key:"getStructuredData",value:function(){var e,t,n,i;if(!this.isReallyLive&&null!==(e=this.data)&&void 0!==e&&null!==(t=e.url)&&void 0!==t&&t.includes("/video/embedded/"))return null;var r=null==this?void 0:this.data,a=r.sourceId,o=r.firstPublished,l=r.summary,u=r.url,d=r.headline,f=r.language,m=r.transcript,h=r.duration,g=a?"https://www.nytimes.com/video/players/offsite/index.html?videoId=".concat(a):void 0,y=m&&"N/A"!==m?m:void 0,v=h&&s.default.duration(h).toISOString()||void 0,b=null==d?void 0:d.default,_=l,w=this.isReallyLive&&(null===(n=this.data)||void 0===n||null===(i=n.url)||void 0===i?void 0:i.includes("/video/embedded/"));return!w||b&&_?new c.default({"@id":w?void 0:u,transcript:y,uploadDate:o,description:_||void 0,url:w?void 0:u,thumbnailUrl:this.thumbnailUrl,duration:v,name:b,inLanguage:(null==f?void 0:f.code)||void 0,embedUrl:g,contentUrl:this.contentUrl,publication:this.publication,publisher:this.inlineAsset?void 0:p.NYT_ORGANIZATION_SIMPLE}):null}}]),e}();t.default=y},SgWa:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("3sMT"),a=n("Jqp9"),o=i(n("WThh")),s=n("6l8D"),l=i(n("wXC7")),c=(0,o.default)(["medium"]),u=function(e){return(0,a.css)("color:",l.default.color.sponsoredTextColor,";font-weight:",l.default.font.weight.book,";",c(e,{fontSize:[13,15],lineHeight:[20,22]}),";")},d=(0,a.themeFn)("treatment",{none:function(e){return(0,a.css)("color:",r.color.content.secondary,";font-family:",l.default.font.franklinBase,";font-weight:",l.default.font.weight.medium,";",c(e,{fontSize:[15,16],lineHeight:[20,22]}),";")},magazine:function(e){return(0,a.css)("color:",r.color.content.secondary,";font-family:",l.default.font.magazineSansBase,";font-weight:",l.default.font.weight.medium,";",c(e,{fontSize:[15,16],lineHeight:[20,22]}),";")},sponsored:function(e){return(0,a.css)(u(e),";font-family:",l.default.font.sponsoredBase,";")},sponsoredSensitive:function(e){return(0,a.css)(u(e),";font-family:",l.default.font.sponsoredSensitive,";")},"t-magazine":function(e){return(0,a.css)("color:",r.color.content.secondary,";font-family:",l.default.font.tmagSansBase,";font-weight:",l.default.font.weight.book,";letter-spacing:0.02em;",c(e,{fontSize:[15,16],lineHeight:[20,22]}),";")}}),p=(0,a.themeFn)("languageDirection",{rightToLeft:(0,a.css)("direction:rtl;text-align:right;unicode-bidi:isolate;")}),f=(0,a.styled)("p",{target:"etfikam0"})("font-style:normal;",d,";",p,";.",s.linkClass,"{text-decoration:underline;&:hover,&:focus{text-decoration:none;}}");t.default=f},SoJ3:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=i(n("q1tI")),a=i(n("C/n8"));function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return r.default.createElement(a.default,{key:n},t)}o.displayName="linkFormatFromOak"},Svk8:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=n("3sMT");t.default=function(){return r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},r.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 13.7683V6L14.5 9.88415L8 13.7683Z",fill:a.color.content.primary}),r.default.createElement("circle",{cx:"10",cy:"10",r:"9.25",stroke:a.color.stroke.quaternary,strokeWidth:"1"}))}},SzGR:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("W8MJ")),a=i(n("lwsE")),o=i(n("7W2i")),s=i(n("a1gu")),l=i(n("Nsbk"));function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,l.default)(e);if(t){var r=(0,l.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,s.default)(this,n)}}var u=function(e){(0,o.default)(n,e);var t=c(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,r.default)(n)}(i(n("J4Ca")).default);t.default=u},"T5+l":function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=n("U6jc"),c=i(n("toO0")),u=n("uj8K"),d=n("FKYM"),p=i(n("Cb8S")),f=n("5OSB"),m=i(n("0RI2"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){var t=e.onAdDefined,n=e.onAdRequested,i=e.onAdRequestSent,r=e.onDFPResponse,a=e.onSlotLoaded,h=e.onImpressionViewable,g=e.onEmpty,v=e.position,b=e.sizeKey,_=e.lazyLoad,w=e.isPrioritized,x=e.id,k=e.userStyle,O=e.adTargeting,E=(0,o.useRef)(),T=v?null:(0,d.setPosition)();return(0,o.useEffect)((function(){var e=w?E.current.lastChild:E.current;return(0,l.handleAdBlockerDetected)(g),(0,c.default)(e,{id:x,position:v,sizeKey:b,lazyLoad:_,truePosition:T,adTargeting:O}),(0,m.default)(O,x),(0,l.handleAdDefined)(x,t),(0,l.handleAdRequested)(x,n),(0,l.handleAdRequestSent)(x,i),(0,l.handleSlotOnload)(x,a),(0,l.handleSlotEmpty)(x,g),(0,l.handleSlotRendered)(x,r),(0,l.handleImpressionViewable)(x,h),function(){(0,d.removePosition)(),(0,u.unsubscribeToAll)(x)}}),[]),o.default.createElement(p.default,null,o.default.createElement("a",{href:"#after-".concat(x),className:f.hiddenA11yAnchorClass},"SKIP ADVERTISEMENT"),w?o.default.createElement("div",{className:(0,s.cx)("ad","".concat(x,"-wrapper"),f.adContainerClass),ref:E,style:y({},k),suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:'<div id="'.concat(x,'" class="place-ad" data-position="').concat(v||x,'" data-size-key="').concat(b||v||"default",'"></div>')}}):o.default.createElement("div",{className:(0,s.cx)("ad","".concat(x,"-wrapper"),f.adContainerClass),id:x,ref:E,style:y({},k)}),o.default.createElement("div",{id:"after-".concat(x)}))};v.displayName="AdSlot",v.defaultProps={onAdDefined:function(){},onAdRequested:function(){},onAdRequestSent:function(){},onDFPResponse:function(){},onSlotLoaded:function(){},onImpressionViewable:function(){},onEmpty:function(){},userStyle:{},isPrioritized:!1,sizeKey:"",lazyLoad:!0,position:null,adTargeting:{}};var b=v;t.default=b},TB7k:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("Jqp9")),o=i(n("JwCr")),s=i(n("Kpeq")),l=n("f9QA");function c(e){var t,n=e.className,i=e.internalLinkTrackingParams,c=e.subtitle,u=e.text,d=e.trackEvent,p=e.trackLinkInteraction;if(null==u||null===(t=u.content)||void 0===t||!t.length)return null;var f=(0,s.default)({internalLinkTrackingParams:i,trackEvent:d,trackLinkInteraction:p});return r.default.createElement("p",{className:(0,a.cx)(l.paragraphClass,n)},c&&r.default.createElement(o.default,null,c,""),u.content.map(f))}c.displayName="StorylineParagraph",c.defaultProps={className:void 0,internalLinkTrackingParams:null,subtitle:null,text:null,trackEvent:function(){},trackLinkInteraction:function(){}};var u=c;t.default=u},TMfO:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("rHUa"));function o(e){var t=e.isInEditor,n=e.aml;return t?r.default.createElement("div",{className:a.oakClass,dangerouslySetInnerHTML:{__html:n&&n.replace(/\n/g,"<br/>")}}):null}o.defaultProps={isInEditor:!1,aml:""};var s=o;t.default=s},TQ19:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0,t.config={name:"complianceGDPR",onlyTrackWhenVisible:!1,campaigns:{DEFAULT:{content:function(){return{static:!0,test:"value"}},tracking:{module:{name:"gdprGateway"}}},MX_COMPLY_GDPR_COMPLIANCE_235:{audiences:{English:{content:function(){return{cookiePolicyUrl:"https://www.nytimes.com/privacy/cookie-policy",static:!0}}},Spanish:{content:function(){return{cookiePolicyUrl:"https://www.nytimes.com/es/privacy/cookie-policy",static:!0}}},ChineseSimplified:{content:function(){return{cookiePolicyUrl:"https://www.nytimes.com/zh-hans/privacy/cookie-policy",static:!0}}},ChineseTraditional:{content:function(){return{cookiePolicyUrl:"https://www.nytimes.com/zh-hant/privacy/cookie-policy",static:!0}}}},tracking:{module:{name:"gdprGateway"}}}}}},TTpX:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("Jqp9")),o=n("L+PM"),s=function(e){var t=e.children,n=e.containerClassName,i=e.textClassName;return t&&r.default.createElement("div",{id:"enhanced-byline",className:(0,a.cx)(o.roleContainerClass,n)},r.default.createElement(o.RoleText,{className:i},t))};s.defaultProps={children:null,containerClassName:void 0,textClassName:void 0};var l=s;t.default=l},TVGw:function(e,t,n){"use strict";n.d(t,"g",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"b",(function(){return m}));var i=n("lSNA"),r=n.n(i),a=n("mczz"),o=n("8iTF"),s=n("zWrI"),l=n("00Pk");n.d(t,"d",(function(){return l.a}));var c=function(e){var t=e.hidden,n=void 0!==t&&t;document.body.style.overflowY=n?"hidden":"initial"},u=function(e){var t=e.history,n=e.location,i=Object(a.f)(n,r()({},s.a.COMMENTS_PANEL,null));t.push(i,n),c({hidden:!0})},d=function(e){var t=e.history,n=e.location,i=Object(a.f)(n,{},[s.a.COMMENTS_PANEL,s.a.PERM_ID]);t.push(i),c({hidden:!1})},p=function(e){return Object(o.j)(Object(a.b)(e,s.a.PERM_ID))},f=function(e,t,n){var i=e.history,l=e.location,c=Object(o.c)(t,n),u=Object(a.f)(l,r()({},s.a.PERM_ID,c));i.push(u)},m=function(e){var t=e.history,n=e.location,i=Object(a.f)(n,r()({},s.a.COMMENTS_PANEL,null),[s.a.PERM_ID]);t.push(i)}},To3l:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.newClass=t.liveClass=t.containerClass=t.bulletClass=t.GuideNavItems=t.GuideNavHeading=t.BulletBriefingContainer=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=n("3sMT"),s=(0,r.css)("padding:1.5rem 1rem 1.5rem 2rem;background-color:",o.color.background.secondary,";border-top:1px solid ",o.color.stroke.quaternary,";border-bottom:1px solid ",o.color.stroke.quaternary,";margin-bottom:1rem;",a.default.breakpoint.small,"{padding:1.5rem 2.5rem;margin:0 auto 1.5rem;background-color:transparent;max-width:600px;border:1px solid ",o.color.stroke.quaternary,";border-radius:4px;}");t.containerClass=s;var l=(0,r.css)("font-family:",a.default.font.franklinBase,";font-size:17px;line-height:25px;margin-left:0;hanging-punctuation:first;a,span{color:",o.color.content.secondary,";text-decoration:none;border-bottom:1px solid ",o.color.stroke.tertiary,";&:hover{text-decoration:none;}}");t.bulletClass=l;var c=(0,r.css)("a,span{border-color:",o.light.colors.signal.breaking.transform(a.default.setAlpha(.4)).rgba,";}");t.liveClass=c;var u=(0,r.css)("::after{content:'New';font-family:",a.default.font.franklinBase,";font-size:",a.default.font.size(14),";color:",o.color.signal.breaking,";margin-left:0.5em;}");t.newClass=u;var d=(0,r.styled)("span",{target:"e9xetbc0"})("display:none;font-family:",a.default.font.franklinBase,";font-weight:",a.default.font.weight.bold,";margin-top:8px;width:30%;border-right:1px solid ",o.color.stroke.quaternary,";white-space:nowrap;text-align:right;padding-right:20px;",a.default.breakpoint.mediumLarge,"{display:block;}");t.GuideNavHeading=d;var p=(0,r.styled)("ul",{target:"e9xetbc1"})("font-family:",a.default.font.franklinBase,";font-size:14px;display:inline-flex;justify-content:space-around;width:100%;margin-top:8px;a:hover{text-decoration:underline;}");t.GuideNavItems=p;var f=(0,r.styled)("div",{target:"e9xetbc2"})((0,r.themeFn)("treatment",{none:s,guide:(0,r.css)("display:flex;padding:1.5rem 1.5rem 1.5rem 1.5rem;max-width:600px;margin:0 auto 1.5rem;display:none;",a.default.breakpoint.medium,"{display:block;}")}));t.BulletBriefingContainer=f},TrUr:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,Object.defineProperty(t,"getItemsWithHeadshots",{enumerable:!0,get:function(){return d.getItemsWithHeadshots}});var a=i(n("J4zp")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),s=(i(n("17x9")),n("boCj")),l=n("Jqp9"),c=i(n("UzHl")),u=n("3+1v"),d=n("AKP5");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e){var t=e.title,n=e.items,i=e.trackEvent,r=e.trackLinkInteraction,d=e.parentUrl,p=(0,o.useState)(!1),f=(0,a.default)(p,2),m=f[0],h=f[1];if(!t||!n)return null;return o.default.createElement(s.InView,{as:"section",role:"complementary",className:(0,l.cx)(u.quoteClass,u.containerClass),"aria-label":t,onChange:function(e){e&&!m&&i&&(i({event:"impression"}),h(!0))}},o.default.createElement("h2",{className:u.titleClass},t),o.default.createElement("hr",null),o.default.createElement(c.default,{title:t,items:n,parentUrl:d,trackEvent:i,trackLinkInteraction:r}))}f.displayName="StorylineQuote",f.defaultProps={trackEvent:null,trackLinkInteraction:function(){}};var m=f;t.default=m},TscS:function(e,t,n){"use strict";var i=n("gcR/"),r=n.n(i);n("q1tI");function a(e){var t,n=e.className,i=e.fill,a=e.direction;return"up"===a&&(t="rotate(-90 3.5 6.5)"),"down"===a&&(t="rotate(90 3.5 6.5)"),r()("svg",{width:"16",height:"16",viewBox:"0 0 9 16",version:"1.1",className:n},void 0,r()("g",{id:"Canvas",transform:"translate(-8250 -1500)"},void 0,r()("g",{id:"Vector"},void 0,r()("use",{xlinkHref:"#path0_stroke",transform:"translate(8251 1501.5)",fill:i}))),r()("defs",{},void 0,r()("path",{id:"path0_stroke",d:"M 6.5 6.5L 7.20711 7.20711L 7.91421 6.5L 7.20711 5.79289L 6.5 6.5ZM -0.707107 0.707107L 5.79289 7.20711L 7.20711 5.79289L 0.707107 -0.707107L -0.707107 0.707107ZM 5.79289 5.79289L -0.707107 12.2929L 0.707107 13.7071L 7.20711 7.20711L 5.79289 5.79289Z",transform:t})))}a.displayName="Caret",a.defaultProps={className:void 0,fill:"#111",direction:"right"},t.a=a},TvEp:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.heading1Selector=t.default=void 0;var r=n("Jqp9"),a=n("3sMT"),o=i(n("wXC7")),s=i(n("WThh")),l=i(n("qp0C")),c=(0,s.default)(["medium","large"]),u=function(e){return(0,r.css)("color:",a.color.content.secondary,";font-style:normal;font-weight:",o.default.font.weight.bold,";",c(e,{fontSize:[29,38],lineHeight:[34,44]}),";")},d=(0,r.themeFn)("treatment",{none:function(e){return(0,r.css)("color:",a.color.content.primary,";font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.bold,";font-style:italic;",c(e,{fontSize:[31,40],lineHeight:[36,46]}),";")},guide:function(e){return(0,r.css)("color:",a.color.content.primary,";font-family:",o.default.font.karnak,";font-weight:",o.default.font.weight.bold,";",c(e,{fontSize:[31,64],lineHeight:[36,48]}),";")},feature:function(e){return(0,r.css)("color:",a.color.content.primary,";font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.extraLight,";font-style:normal;",c(e,{fontSize:[36,44,47],lineHeight:[40,50,55]}),";")},magazine:function(e){return(0,r.css)("color:",a.color.content.primary,";font-family:",o.default.font.magslab,";font-weight:",o.default.font.weight.bold,";font-style:normal;",c(e,{fontSize:[47,54],lineHeight:[49,52]}),";")},opinion:function(e){return(0,r.css)("color:",a.color.content.primary,";font-family:",o.default.font.opinionBase,";font-weight:",o.default.font.weight.bold,";font-style:normal;",c(e,{fontSize:["opinion"===e.theme.section&&e.theme.opinionHeaderRedesign?40:47,57],lineHeight:["opinion"===e.theme.section&&e.theme.opinionHeaderRedesign?44:51,60]}),";")},sponsored:function(e){return(0,r.css)(u(e),";font-family:",o.default.font.sponsoredBase,";")},sponsoredSensitive:function(e){return(0,r.css)(u(e),";font-family:",o.default.font.sponsoredSensitive,";")},"t-magazine":function(e){return(0,r.css)("color:",a.color.content.primary,";font-family:",o.default.font.tmagSerifDisplayBase,";font-weight:",o.default.font.weight.bold,";font-style:normal;",c(e,{fontSize:[38,48],lineHeight:[42,54]}),";")},atHome:function(){return(0,r.css)("font-family:",l.default.cheltenham,";font-style:normal;font-weight:300;font-size:23px;line-height:31px;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;")},liveSplitLayout:(0,r.css)("color:",a.color.content.primary,";font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.bold,";font-size:",o.default.font.size(31),";line-height:",o.default.font.size(36),";")}),p=(0,r.themeFn)("languageDirection",{rightToLeft:(0,r.css)("text-align:right;direction:rtl;unicode-bidi:isolate;")}),f=(0,r.themeFn)("language",{"zh-hans":(0,r.css)("font-family:",o.default.font.cheltenhamSCSerifBase,";font-weight:",o.default.font.weight.bold,";font-style:normal;"),"zh-hant":(0,r.css)("font-family:",o.default.font.cheltenhamTCSerifBase,";font-weight:",o.default.font.weight.bold,";font-style:normal;")});t.heading1Selector=function(e){return(0,r.css)("h1{",d(e),";}")};var m=(0,r.styled)("h1",{target:"e1h9rw200"})(d,";",p,";",f,";");t.default=m},TvfT:function(e,t,n){"use strict";function i(e,t){var n=t||window.location.href||"",i=e.replace(/[\[\]]/g,"\\$&"),r=new RegExp("[?&]".concat(i,"(=([^&#]*)|&|#|$)")).exec(n);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g,"")):"":null}n.d(t,"a",(function(){return i}))},U4cX:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.diptychContainerStyles=t.StyledDiptych=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=n("HvhO"),s=i(n("6RhY")),l=(0,r.themeFn)("mediaSize",{large:function(e){return(0,r.css)(e.theme.breakpointMap.small,"{",s.default,"{margin-left:",a.default.grid.pageMargin,"px;margin-right:",a.default.grid.pageMargin,"px;}}",e.theme.breakpointMap.medium,"{&:last-child{",s.default,"{margin-left:0;}}}",e.theme.breakpointMap.mediumLarge,"{",s.default,"{margin-left:0;margin-right:0;}}")},full:function(e){return(0,r.css)(e.theme.breakpointMap.small,"{",s.default,"{margin-left:",a.default.grid.pageMargin,"px;margin-right:",a.default.grid.pageMargin,"px;}}",e.theme.breakpointMap.medium,"{&:last-child{",s.default,"{margin-left:0;}}}")}}),c=function(e){return(0,r.css)("display:flex;flex-direction:column;",e.theme.breakpointMap.medium,"{flex-direction:row;}> *{",function(e){return(0,r.css)("width:100%;&:first-child{margin-bottom:25px;}",e.theme.breakpointMap.medium,"{width:50%;&:first-child{margin-bottom:0;margin-right:15px;}}")}(e),";",l(e),";}")};t.diptychContainerStyles=c;var u=(0,r.styled)("div",{target:"e73j0it0"})(c,";",o.mediaFigureSizeStyles,";");t.StyledDiptych=u},U7e9:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=n("kTfh"),c=n("AKP5");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(e){var t=e.ariaControls,n=e.index,i=e.length,r=e.handleNavLeft,u=e.handleNavRight,d=(0,o.useRef)(null),p=(0,o.useRef)(null),f=0===n,m=n===i-1;return(0,o.useEffect)((function(){var e,t,n=document.activeElement;m&&n===(null==p?void 0:p.current)&&(null===(e=d.current)||void 0===e||e.focus());f&&n===(null==d?void 0:d.current)&&(null===(t=p.current)||void 0===t||t.focus())}),[d,p,m,f]),i<2?null:o.default.createElement("nav",{"aria-controls":t,className:l.arrowsNavClass},o.default.createElement("span",{ref:d,className:(0,s.cx)("arrow-left",l.arrowLeftClass,(0,a.default)({},l.disabledClass,0===n)),role:"button","aria-label":"Previous card","aria-disabled":0===n,onClick:r,onKeyUp:function(e){return(0,c.handleButtonPress)(e,r)},tabIndex:f?-1:0}),o.default.createElement("span",{ref:p,className:(0,s.cx)("arrow-right",l.arrowRightClass,(0,a.default)({},l.disabledClass,n===i-1)),role:"button","aria-label":"Next card","aria-disabled":n===i-1,onClick:u,onKeyUp:function(e){return(0,c.handleButtonPress)(e,u)},tabIndex:m?-1:0}))}d.displayName="ArrowNav",d.defaultProps={ariaControls:void 0};var p=d;t.default=p},U7vG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){if("string"!=typeof e&&(e="16:9"),e.match(/\d+%/))return e;e.match(/\d+\.\d+/)&&!e.match(/:/)&&(e="".concat(e,":1"));var t=0,n=e.split(":");return 2===n.length&&(t=Math.round(n[1]/n[0]*1e4)/100),t};t.default=i},UAIX:function(e,t,n){"use strict";var i=n("VkAN"),r=n.n(i),a=n("gcR/"),o=n.n(a),s=n("J4zp"),l=n.n(s),c=n("q1tI"),u=n.n(c),d=n("eFc+"),p=n.n(d),f=n("Jqp9"),m=n("+/Tm"),h=n.n(m),g=n("lJVC"),y=n.n(g),v=n("SYzA"),b=n("wXC7"),_=n.n(b),w=n("45t3"),x=n("kz9X"),k=n.n(x),O=n("5dFD"),E=n("Kjui"),T=n("LON6"),C=n("E0i8"),S=n("sOrY"),P=n("Uri2"),M=n("i9j7"),I=n.n(M),A=n("9rMz"),j=n.n(A),L=n("dO+a"),R=n.n(L),N=n("GB3f"),D=function(e){var t=e.className,n=Object(f.useTheme)(),i=Object(c.useState)("/"),r=l()(i,2),a=r[0],s=r[1];return Object(c.useEffect)((function(){s(Object(N.d)(n))}),[n]),"magazine"===n.section?o()("a",{href:"/section/magazine","aria-label":"New York Times Magazine Logo, link to Magazine section"},void 0,o()(j.a,{className:t})):"t-magazine"===n.section?o()("a",{href:"/section/t-magazine","aria-label":"T Magazine Logo, link to T-Magazine section"},void 0,o()(R.a,{className:t})):o()("a",{href:a,"data-testid":"masthead-logo","aria-label":"New York Times homepage"},void 0,o()(I.a,{className:t}))};D.displayName="Logo",D.defaultProps={className:void 0};var B,z=D,F=Object(f.css)("display:none;",_.a.breakpoint.extraSmall,"{display:flex;width:16px;height:31px;}",_.a.breakpoint.medium,"{display:flex;width:16px;height:31px;}",_.a.breakpoint.mediumLarge,"{display:none;}",_.a.printHide),U=Object(f.css)("height:23px;margin-top:6px;"),H=Object(f.css)("width:220px;margin-top:3px;"),W=Object(f.css)("margin-top:10.5px;"),q=Object(f.css)("height:23px;margin-top:6px;"),V=Object(f.css)("display:none;",_.a.breakpoint.mediumLarge,"{display:flex;margin-top:0;}@media print{display:block;}"),G=Object(f.css)("display:flex;"),Y=Object(f.css)("display:none;",_.a.breakpoint.extraSmall,"{position:fixed;display:flex;opacity:0;z-index:1;transition:all 0.2s ease-in-out;width:100%;height:32.063px;background:white;padding:5px 0;top:0;text-align:center;font-family:",_.a.font.serifMedium,";box-shadow:rgba(0,0,0,0.08) 0 0 5px 1px;border-bottom:1px solid ",_.a.color.gray60,";}@media print{position:relative;border:none;display:inline-block;opacity:1 !important;visibility:visible !important;}.NYTApp &{@media (max-width:",_.a.breakpoint.width.medium-1,"px){display:none;}}"),Z=Object(f.css)("margin-left:20px;margin-right:20px;max-width:",_.a.breakpoint.mastheadMaxWidth,"px;display:flex;flex-direction:column;position:relative;width:100%;@media (min-width:1360px){margin-left:20px;margin-right:20px;}@media (min-width:1780px){margin-left:auto;margin-right:auto;}",_.a.print),X=Object(f.css)("display:none;",_.a.breakpoint.medium,"{display:flex;flex-direction:row;max-width:",_.a.breakpoint.mastheadMaxWidth,"px;overflow:hidden;position:absolute;width:45%;margin-left:calc((100% - 45%) / 2);",_.a.breakpoint.mediumLarge,"{width:50%;margin-left:calc((100% - 50%) / 2);}}.NYTApp &{",_.a.breakpoint.medium,"{width:90%;margin-left:calc((100% - 90%) / 2);",_.a.breakpoint.mediumLarge,"{width:63%;margin-left:calc((100% - 63%) / 2);}}}",_.a.printHide),J=Object(f.css)("font-family:",_.a.font.serifSmall,";font-weight:",_.a.font.weight.book,";font-size:13px;letter-spacing:0.015em;margin-top:10.5px;margin-bottom:10.5px;margin-right:auto;white-space:nowrap;text-overflow:ellipsis;"),K=Object(f.css)("font-family:",_.a.font.franklinBase,";font-weight:",_.a.font.weight.bold,";font-size:",_.a.font.size(12),";text-transform:uppercase;letter-spacing:0;margin-top:12.5px;margin-bottom:auto;margin-left:auto;white-space:nowrap;&:hover{text-decoration:underline;}"),$=Object(f.css)("display:inline-block;padding-left:7px;padding-right:7px;font-size:13px;margin-top:10px;margin-bottom:auto;color:",_.a.color.gray50,";"),Q=Object(f.css)("margin-top:-1px;margin-bottom:auto;margin-left:auto;z-index:50;box-shadow:-14px 2px 7px -2px rgba(255,255,255,0.7);"),ee=Object(f.css)("margin-top:1px;",_.a.breakpoint.mediumLarge,"{margin-top:0;}"),te=Object(f.css)(_.a.breakpoint.medium,"{margin-top:2px;}",_.a.breakpoint.mediumLarge,"{margin-top:0;}"),ne=Object(f.css)("margin-left:auto;"),ie=Object(f.css)("margin-bottom:0;"),re=Object(f.css)("font-family:",_.a.font.franklinBase,";color:",_.a.color.gray50," !important;border-left:1px solid ",_.a.color.gray50,";margin-left:10px;padding:10px;display:none;@media print{display:inline-block;}"),ae=function(e){var t=e.sectionName,n=e.sectionUrl;return"guide"!==Object(f.useTheme)().treatment&&t?u.a.createElement(u.a.Fragment,null,o()("span",{className:K},void 0,o()(O.a,{link:{url:n}},void 0,t)),B||(B=o()("span",{className:$},void 0,"|"))):null},oe=n("lSNA"),se=n.n(oe),le=function(e){var t=e.headline,n=e.headlineTopMarginClass,i=e.sectionName,r="guide"!==Object(f.useTheme)().treatment,a=Object(f.cx)(J,se()({},ne,!i),n);return r?o()("span",{className:a},void 0,t):null};le.displayName="ArticleHeadline",le.defaultProps={headlineTopMarginClass:void 0};var ce,ue,de,pe=le;function fe(e){var t=e.article,n=Object(f.useTheme)(),i=Object(P.a)(),r=Object(C.b)(),a=Object(w.useBulletBriefLocationContext)().showStickyNav,s=n&&"guide"===n.treatment,u=Object(T.b)(t),d=!u&&(s?a:r),p=Object(c.useReducer)(S.a,{opacity:"0.000000001",zIndex:"-1",visibility:"hidden"}),m=l()(p,2),g=m[0],b=m[1],x=Object(v.a)();if(Object(c.useEffect)((function(){b(d?{opacity:"1",zIndex:"900",visibility:"visible"}:{opacity:"0.000000001",zIndex:"-1",visibility:"hidden"})}),[d]),u)return null;var M,I,A=n&&"t-magazine"===n.treatment,j=n&&"magazine"===n.treatment,L=ee;A?(M=H,I=W,L=te):M=j?q:U;var R=s&&t,N=o()("div",{className:Q},void 0,o()(E.b,{className:ie,share:t,position:E.a.INSTORYMASTHEAD,suppressGiftArticleTooltip:!0,tooltipAlign:"right"})),D=x?null:N;return i.components.hideStorytellingNav?null:o()("div",{className:Y,style:g,id:"in-story-masthead"},void 0,o()("div",{className:Z},void 0,o()("div",{className:X},void 0,n.sectionDisplayName&&n.sectionUrl&&o()(ae,{sectionName:n.sectionDisplayName,sectionUrl:n.sectionUrl}),o()(pe,{headline:t.headline.default,headlineTopMarginClass:I,sectionName:n.sectionDisplayName}),R&&o()(k.a,{article:t})),o()("div",{className:G},void 0,o()("div",{className:L},void 0,!A&&o()(O.a,{"aria-label":j?"New York Times Magazine homepage":"New York Times homepage",className:F,link:{url:j?"https://www.nytimes.com/section/magazine":"https://www.nytimes.com/"}},void 0,ce||(ce=o()(h.a,{}))),A&&o()(O.a,{"aria-label":"New York Times Style Magazine homepage",className:F,link:{url:"https://www.nytimes.com/section/t-magazine"}},void 0,o()(y.a,{fill:_.a.color.gray10})),o()("span",{className:V},void 0,o()(z,{sectionName:n.treatment,className:M,homepath:n.homepath,language:n.language}))),o()("span",{className:re},void 0,t.shortUrl||t.url),D)))}fe.displayName="InStoryMasthead",fe.fragments={article:p()(ue||(ue=r()(["\n    fragment InStoryMasthead_article on Article {\n      id\n      headline {\n        default\n      }\n      ...ShareToolbar_share\n      ...ContentLink_link\n    }\n    ","\n    ","\n  "])),E.b.fragments.share,O.a.fragments.link),interactive:p()(de||(de=r()(["\n    fragment InStoryMasthead_interactive on Interactive {\n      id\n      headline {\n        default\n      }\n      ...ShareToolbar_share\n      ...ContentLink_link\n    }\n    ","\n    ","\n  "])),E.b.fragments.share,O.a.fragments.link)},fe.defaultProps={article:{}};t.a=fe},UGcZ:function(e,t,n){"use strict";var i=n("Jqp9"),r=n("3Rk2"),a=n.n(r),o=n("wXC7"),s=n.n(o),l=a()([s.a.breakpoint.small]),c=Object(i.styled)("article",{target:"e1lmdhsb0"})("position:relative;",l({margin:["0 auto","0 auto 20px"]}),";");t.a=c},UHqw:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("WQPM")).default;t.default=r},UIP5:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AudioPlayer",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"VideoPlayer",{enumerable:!0,get:function(){return r.default}});var r=i(n("1cNr")),a=i(n("R99I"))},UMeL:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.transcriptHeaderClass=t.playbackControlsClass=t.playPauseClass=t.mobileDurationClass=t.leftArrowClass=t.kickerClass=t.fileControlsClass=t.desktopDurationClass=t.controlsClass=t.backToClass=void 0;var r=n("Jqp9"),a=n("3sMT"),o=i(n("wXC7")),s=(0,r.css)("display:flex;flex-direction:row;justify-content:space-between;align-items:center;position:relative;font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.mediumBold,";color:",a.color.content.secondary,";padding:0 20px;height:50px;*{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;-webkit-touch-callout:none;}",o.default.breakpoint.medium,"{padding:0 50px;height:42px;}",o.default.breakpoint.mediumLarge,"{padding:0 74px 0 112px;}");t.transcriptHeaderClass=s;var l=(0,r.css)("background-color:rgba(0,0,0,0);font-family:",o.default.font.franklinBase,";font-size:14px;font-weight:",o.default.font.weight.medium,";display:flex;align-items:center;transition:opacity 0.2s;height:15px;color:",a.color.content.primary,";&:hover{opacity:0.6;}",o.default.breakpoint.large,"{display:none;}span{margin-top:1px;}");t.backToClass=l;var c=(0,r.css)("display:none;font-size:13px;letter-spacing:0.04em;text-transform:uppercase;font-weight:",o.default.font.weight.bold,";",o.default.breakpoint.large,"{display:block;}");t.kickerClass=c;var u=(0,r.css)("width:9px;height:9px;margin-right:5px;transform:rotate(45deg);border-left:1px solid ",a.color.stroke.primary,";border-bottom:1px solid ",a.color.stroke.primary,";");t.leftArrowClass=u;var d=(0,r.css)("display:flex;flex-direction:row;font-size:12px;align-items:center;");t.controlsClass=d;var p=(0,r.css)("flex-direction:row;align-items:baseline;justify-content:space-between;width:55px;margin-right:40px;display:none;",o.default.breakpoint.large,"{display:flex;}");t.fileControlsClass=p;var f=(0,r.css)("display:flex;flex-direction:row;align-items:center;justify-content:space-between;");t.playbackControlsClass=f;var m=(0,r.css)("display:flex;justify-content:center;align-items:center;background-color:rgba(0,0,0,0);margin-right:10px;transition:opacity 0.2s;width:22px;height:22px;transform:scale(1.3);&:hover{opacity:0.6;}",o.default.breakpoint.medium,"{transform:none;}");t.playPauseClass=m;var h=(0,r.css)("display:none;",o.default.breakpoint.small,"{display:block;}");t.desktopDurationClass=h;var g=(0,r.css)("display:block;",o.default.breakpoint.small,"{display:none;}");t.mobileDurationClass=g},"UN+u":function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n("q1tI")),l=n("X6oL"),c=o(n("5UIh")),u=a(n("MH66")),d=n("syiw"),p=n("HDG5"),f=n("djNW"),m=n("FY2l"),h=n("6gWn");t.default=function(e){var t,n,i,r,a,o,g=e.unit,y=(0,s.useState)(!1),v=y[0],b=y[1],_=(0,d.useMessageSelection)({config:{name:"dock"}}),w=(0,p.useUserState)(),x=(0,l.useTracking)(),k="/"===(0,m.getPathName)()?"homepage":"article",O=s.default.createElement("div",{className:u.mainText},"Thank you for reading The Times. ",s.default.createElement("br",{className:u.lineBreak}),s.default.createElement("span",{className:u.boldText},(null===(t=null==g?void 0:g.content)||void 0===t?void 0:t.boldCopy)||""),s.default.createElement("span",null,(null===(n=null==g?void 0:g.content)||void 0===n?void 0:n.copy)||"")),E=function(e,t){x.trackEvent({event:"moduleInteraction",eventData:{pagetype:k,trigger:"module",type:"click"},module:{name:e,label:"CH_CHURN_CANCEL_THE_CANCEL_2112",element:{name:f.Action.Subscribe,url:t}}})};if(_.loading)return null;if(!v){var T=null===(r=null===(i=null==_?void 0:_.response)||void 0===i?void 0:i.userstate())||void 0===r?void 0:r.messageSelectionMessageCaps,C=null;if(T)if((P=T).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==_?void 0:_.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==_?void 0:_.response)||void 0===n?void 0:n.audience())&&(C=e)})),null!==C){var S=C;S.viewCount+=1,S.lastSeenOn=(new Date).toISOString(),w.update({messageSelectionMessageCaps:P})}if(!C){var P=[];T&&(P=T),P.push({unit:"dock",campaign:null===(a=null==_?void 0:_.response)||void 0===a?void 0:a.campaign(),audience:null===(o=null==_?void 0:_.response)||void 0===o?void 0:o.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),w.update({messageSelectionMessageCaps:P})}b(!0)}return s.default.createElement(c.default,{testId:"onsite-messaging-unit-".concat(null===h.config||void 0===h.config?void 0:h.config.name),unit:g,contentID:"CH_CHURN_CANCEL_THE_CANCEL_2112",dockID:"standard",header:O,hideVerticleRuleInHeader:!0,headingClassName:u.headerContainer,onDockHeadingClick:function(){var e="https://myaccount.nytimes.com/reactivate-digital-subscription";E("chChurnCanceltheCancel2112",e),E("dock",e),window.open(e,"_blank","noopener,noreferrer")},isDockDismissible:!1,isDockExpandable:!1,minimized:!0})}},Uc1u:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.AudioRelatedLinks=void 0,Object.defineProperty(t,"AudioRelatedLinksDescription",{enumerable:!0,get:function(){return s.AudioRelatedLinksDescription}}),Object.defineProperty(t,"AudioRelatedLinksHeadline",{enumerable:!0,get:function(){return s.AudioRelatedLinksHeadline}}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),i(n("OB6K"))),o=i(n("fY8U")),s=n("3P4k"),l=function(e){var t=e.children,n=e.related,i=e.displayStyle,l=e.className,c=r.default.Children.toArray(t).length>0,u=(null==n?void 0:n.length)||0,d=u>0;return r.default.createElement(a.default,{theme:{displayStyle:i.toLowerCase()}},r.default.createElement(s.StyledAudioRelatedLinks,{displayStyle:i.toLowerCase(),className:l,hasChildren:c,hasLinks:d},t,n&&u>0&&r.default.createElement(o.default.Provider,{value:u},r.default.createElement(s.AudioRelatedLinksSeries,{hasHeadlineorDescription:c},n))))};t.AudioRelatedLinks=l,l.displayName="AudioRelatedLinks",l.defaultProps={children:null,related:null,displayStyle:"STANDARD",className:void 0};var c=l;t.default=c},UeuO:function(e,t,n){"use strict";n.d(t,"h",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"d",(function(){return m})),n.d(t,"i",(function(){return h}));var i=n("Jqp9"),r=n("wXC7"),a=n.n(r),o=n("1q7V"),s=Object(i.css)(o.d," &{font-size:",a.a.font.size(18),";font-weight:",a.a.font.weight.bold,";color:",a.a.color.black,";display:flex;justify-content:space-between;margin-bottom:10px;",a.a.breakpoint.large,"{font-size:",a.a.font.size(14),";margin-bottom:7px;}}"),l=Object(i.css)(s," ",o.d," &{margin-left:0;}"),c=Object(i.css)(o.d," &{display:flex;justify-content:space-between;align-items:center;p{font-size:",a.a.font.size(16),";line-height:",a.a.font.size(20),";font-family:",a.a.font.franklinBase,";margin-bottom:12px;max-width:238px;}strong{font-weight:",a.a.font.weight.bold,";}",a.a.breakpoint.large,"{p{font-size:",a.a.font.size(12),";line-height:",a.a.font.size(15),";max-width:100%;}}}"),u=Object(i.css)("font-size:",a.a.font.size(14),";font-family:",a.a.font.franklinBase,";font-weight:",a.a.font.weight.bold,";",a.a.breakpoint.large,"{font-size:",a.a.font.size(12),";}"),d=Object(i.css)(o.d," &{background-color:transparent;width:100%;display:flex;align-items:center;justify-content:flex-start;}"),p=Object(i.css)("display:none;",a.a.breakpoint.large,"{display:inline-block;}"),f=Object(i.css)(o.d," &{display:inline-block;",a.a.breakpoint.large,"{display:none;}}"),m=Object(i.css)(o.d," &{text-decoration:underline;}"),h=Object(i.css)(o.d," &{height:1rem;width:1rem;display:flex;scale:0.4;}")},UqQm:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),i(n("0oBV"))),o=n("O9F4"),s=i(n("CzSb")),l=function(e){var t,n=null==e||null===(t=e.crops)||void 0===t?void 0:t.find((function(e){return"MEDIUM_SQUARE"===e.name})),i=n&&n.renditions&&n.renditions.find((function(e){return"square320"===e.name}));return null==i?void 0:i.url},c=function(e){var t,n;return null==e||null===(t=e.crops)||void 0===t||null===(n=t.square320)||void 0===n?void 0:n.url},u=function(e){var t,n=e.isInAMP,i=e.isInEditor,a=e.isInHybrid,u=e.leadPhoto,d=e.children,p=e.paragraphContent;return t=n?r.default.createElement("div",null,r.default.createElement("amp-img",{src:l(u),layout:"responsive",alt:"",height:"98",width:"98"})):i?r.default.createElement("img",{alt:"",src:c(u)}):a?r.default.createElement("img",{className:o.headshotContainerClass,alt:"",src:l(u)}):r.default.createElement("img",{alt:"",src:l(u)}),r.default.createElement("div",null,r.default.createElement(s.default,{reporterHeadshot:t,isInEditor:i},a?p:d||p))};u.displayName="FeaturedReporter",u.defaultProps={leadPhoto:void 0,isInAMP:!1,isInHybrid:!1,isInEditor:!1,paragraphContent:[],children:null};var d=(0,a.default)(u);d.disableHydration=!0;var p=d;t.default=p},Uxaz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TRACKING_TEST_COMPONENTS=t.TRACKING_BEACON_TEST=t.REPORTER_BIOS_TEST=t.ONE_MODULE_TEST=t.INTERRUPTIONS_HOLDOUT_TEST=void 0;t.INTERRUPTIONS_HOLDOUT_TEST={name:"STYLN_interruptions_holdout",control:"0_control",variant:"1_show"};t.ONE_MODULE_TEST={name:"STYLN_one_module",control:"0_control",variant:"1_module"};t.REPORTER_BIOS_TEST={name:"styln_trust_reporter_bios_0323",control:"0_Control",variantA:"1_link",variantB:"2_more_from",variantC:"3_headshot",template:"storyline_reporter_bio_recirc"};t.TRACKING_BEACON_TEST={name:"STYLN_tracking_beacon",control:"0_control",variant:"1_beacon"};t.TRACKING_TEST_COMPONENTS=["storyline_menu_recirc","storyline_menu_home_logo"]},UyiZ:function(e,t,n){"use strict";var i=n("gcR/"),r=n.n(i);n("q1tI");function a(e){var t=e.className,n=e.fill;return r()("svg",{width:"15",height:"15",className:t,viewBox:"0 0 15 15"},void 0,r()("g",{id:"Canvas",fill:"none"},void 0,r()("g",{id:"close"},void 0,r()("path",{d:"M2 2l11 11",strokeWidth:"2",strokeMiterlimit:"10",strokeLinecap:"square",stroke:n,id:"Vector"}),r()("path",{d:"M13 2L2 13",strokeWidth:"2",strokeMiterlimit:"10",strokeLinecap:"square",stroke:n,id:"Vector_2"}))))}a.displayName="Close",a.defaultProps={className:void 0,fill:"#111"},t.a=a},UzHl:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("J4zp")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),s=(i(n("17x9")),n("boCj")),l=i(n("PcbQ")),c=i(n("4gon")),u=i(n("kJEd")),d=i(n("U7e9")),p=n("P8eT"),f=n("AKP5");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e){var t=e.items,n=e.trackEvent,i=e.trackLinkInteraction,r=e.parentUrl,m=(0,o.useState)(0),h=(0,a.default)(m,2),g=h[0],y=h[1],v=(0,o.useState)(new Set),b=(0,a.default)(v,2),_=b[0],w=b[1],x=(0,o.useRef)(null),k=t.length,O=function(e){e&&!_.has(g)&&n&&(n({event:"impression",module:{label:r},card:{index:g+1},block:{length:k}}),w((function(e){return e.add(g)})))},E=(0,o.useCallback)((function(e){return i(g,e)}),[g,i]);return o.default.createElement(o.default.Fragment,null,o.default.createElement(l.default,{ref:x,id:"storyline-quote-container",a11yLabel:"Card ".concat(g+1," of ").concat(k),onSwipe:y,scrolledIndex:g},t.map((function(e){return o.default.createElement(s.InView,{onChange:O,threshold:1,className:p.quoteCardClass,"data-testid":"quote-card",key:e.text},o.default.createElement(c.default,{item:e,trackLinkInteraction:E}))}))),o.default.createElement("div",{className:p.swiperNavClass},o.default.createElement(u.default,{index:g,length:k}),o.default.createElement(d.default,{ariaControls:"storyline-quote-container",index:g,length:k,handleNavLeft:function(){return(0,f.handleNavLeft)(x.current)},handleNavRight:function(){return(0,f.handleNavRight)(x.current)}})))}h.defaultProps={trackEvent:null};var g=h;t.default=g},"V+uv":function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return l}));var i=n("Jqp9"),r=n("wXC7"),a=n.n(r),o=Object(i.css)(a.a.breakpoint.mediumLarge,"{padding-top:40px;}"),s=Object(i.css)("display:none;"),l=Object(i.css)("width:100%;height:0;overflow:visible;")},V6Yu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.textFromOakContent=t.hasContent=t.generateContentLink=t.generateContentID=t.createHexHash=void 0;var i=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t){return t.text?t.text:t.content?e(t.content):""})).join(" ").replace(/  +/g," ")};t.textFromOakContent=i;t.hasContent=function(e){return!(!e||!Array.isArray(e.content))};var r=function(e){var t,n,i=e.toLowerCase().split(/[^a-z0-9]/).join("");for(t=0;t<i.length;t+=1){n=(n<<5)-n+i.charCodeAt(t),n|=0}return Math.abs(n).toString(16)};t.createHexHash=r;var a=function(e){return"".concat(r(i(e)))};t.generateContentID=a;t.generateContentLink=function(e){return"link-".concat(a(e))}},V7ea:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.vsMediaViVideoBlockCreditClass=t.vsMediaImageBlockCreditClass=t.vsMediaHybridVideoBlockCreditClass=t.vsMediaClass=t.vsLabelClass=t.vsHeaderClass=t.vsContentParagraphBlockClass=t.StyledVisualStack=void 0;var r=n("Jqp9"),a=n("3sMT"),o=i(n("wXC7")),s=n("HvhO"),l=i(n("6RhY")),c="\n  /* ALL */\n  margin: 0 auto;\n\n  /* MOBILE */\n  width: calc(100% - 40px);\n\n  /* DESKTOP */\n  ".concat(o.default.breakpoint.medium," {\n    max-width: 600px;\n  }\n"),u=(0,r.themeFn)("mediaSize",{large:function(e){return(0,r.css)(e.theme.breakpointMap.small,"{",l.default,"{margin-left:",o.default.grid.pageMargin,"px;margin-right:",o.default.grid.pageMargin,"px;}}",e.theme.breakpointMap.medium,"{&:last-child{",l.default,"{margin-left:0;}}}",e.theme.breakpointMap.mediumLarge,"{",l.default,"{margin-left:0;margin-right:0;}}")},full:function(e){return(0,r.css)(e.theme.breakpointMap.small,"{",l.default,"{margin-left:",o.default.grid.pageMargin,"px;margin-right:",o.default.grid.pageMargin,"px;}}",e.theme.breakpointMap.medium,"{&:last-child{",l.default,"{margin-left:0;}}}")}}),d=(0,r.styled)("div",{target:"e1d0cnos0"})("> div{margin-bottom:12px;}div:last-child{margin-bottom:0;p{margin-bottom:0;}}margin-bottom:40px;margin-top:40px;",o.default.breakpoint.medium,"{margin-bottom:60px;margin-top:60px;}",u," ",s.mediaFigureSizeStyles,";");t.StyledVisualStack=d;var p="\ncolor: ".concat(a.color.content.quaternary,";\nmargin-bottom: 0;\nfont-family: ").concat(o.default.font.serifBase,";\nfont-weight: ").concat(o.default.font.weight.medium,";\n"),f=(0,r.css)(c," ",p," ","\nfont-size: 1.25rem;\nline-height: 1.625rem;\n"," ",o.default.breakpoint.medium,"{","\nfont-size: 1.375rem;\nline-height: 1.875rem;\n","}");t.vsContentParagraphBlockClass=f;var m=(0,r.css)("figcaption{display:flex;justify-content:flex-end;text-align:right;margin-top:8px;margin-right:20px;margin-left:20px;",o.default.breakpoint.medium,"{margin-right:0px;margin-left:auto;}}margin-bottom:12px;",o.default.breakpoint.medium,"{margin-bottom:12px;}");t.vsMediaClass=m;var h="\n    font-weight: ".concat(o.default.font.weight.medium,";\n    font-size: 0.625rem;\n    line-height: 0.875rem;\n    font-family: ").concat(o.default.font.franklinBase,";\n"),g=(0,r.css)("span{",h,"}");t.vsMediaImageBlockCreditClass=g;var y=(0,r.css)("figcaption{span > span{",h,"}}");t.vsMediaHybridVideoBlockCreditClass=y;var v=(0,r.css)("span{",h,"}");t.vsMediaViVideoBlockCreditClass=v;var b=(0,r.css)(c);t.vsLabelClass=b;var _=(0,r.css)(c);t.vsHeaderClass=_},VHwt:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),i(n("TB7k")));function o(e){var t=e.item,n=e.internalLinkTrackingParams,i=e.trackLinkInteraction;return t?r.default.createElement("div",{"data-testid":"context-card"},r.default.createElement(a.default,{internalLinkTrackingParams:n,trackLinkInteraction:i,subtitle:t.subtitle,text:t.text})):null}o.displayName="ContextCardV2",o.defaultProps={internalLinkTrackingParams:null,trackLinkInteraction:function(){}};var s=o;t.default=s},VUHb:function(e,t,n){"use strict";var i,r=n("gcR/"),a=n.n(r),o=(n("q1tI"),n("Jqp9")),s=n("wXC7"),l=n.n(s),c=n("cUQY"),u=n("Gs79"),d=Object(o.css)("font-family:",l.a.font.franklinBase,";font-size:",l.a.font.size(16),";font-weight:",l.a.font.weight.book,";line-height:",l.a.font.size(30),";margin-top:",l.a.font.size(16),";",l.a.textAlign.center,";"),p=Object(o.css)("text-decoration:underline;");function f(){var e,t,n=Object(c.a)(),r=n.showGateway,o=n.gatewayIsEmbedded,s=n.meterReady,l=null===(e=Object(u.a)().overlays)||void 0===e||null===(t=e.truncator)||void 0===t?void 0:t.visible;return!r||!s||l||o?null:i||(i=a()("p",{className:d,"aria-live":"polite",role:"note"},void 0,a()("a",{className:p,href:"https://www.nytimes.com/subscription?campaignId=8WXW7"},void 0,"Subscribe to The Times")," ","to read as many articles as you like."))}f.displayName="ReadersModeGateway",t.a=f},VXyk:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.titleClass=t.headshotClass=t.bylineSectionClass=t.bylineContainerClass=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=(0,r.css)("font-weight:",a.default.font.weight.bold,";font-size:",a.default.font.size(19),";line-height:",a.default.font.size(22),";margin:0;");t.titleClass=o;var s=(0,r.css)("font-family:",a.default.font.franklinBase,";font-size:",a.default.font.size(15),";font-weight:",a.default.font.weight.medium,";line-height:",a.default.font.size(20),";",a.default.breakpoint.small,"{font-size:",a.default.font.size(16),";}");t.bylineContainerClass=s;var l=(0,r.css)("margin-right:10px;img{max-width:45px;}");t.headshotClass=l;var c=(0,r.css)("margin-top:20px;display:flex;align-items:center;");t.bylineSectionClass=c},Vcia:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-europe-morning-briefing-41f17eb6dcc335c7516cee80c200a07e.webp"},Vcud:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,n("Jqp9").styled)("span",{target:"e1tej78p0"})("position:absolute;width:1px;height:1px;margin:-1px;padding:0;border:0;clip:rect(0 0 0 0);overflow:hidden;");t.default=i},Vfu1:function(e,t,n){"use strict";var i=n("gcR/"),r=n.n(i),a=n("q1tI"),o=n("pCca"),s=n("Jqp9"),l=n("3Rk2"),c=n.n(l),u=n("wXC7"),d=n.n(u),p=n("I9y1"),f=n("3sMT"),m=Object(s.css)("&:first-child{padding-left:0;}&:last-child{border-right:0 none;padding-right:0;}padding:0 15px 0 0;",p.a.medium,"{box-sizing:content-box;width:100%;display:flex;flex-direction:column;margin-right:20px;flex-wrap:nowrap;-webkit-overflow-scrolling:touch;border-top:0 none;border-right:1px solid ",f.color.stroke.quaternary,";}",p.a.mediumLarge,"{&:first-child{padding-left:0;}&:last-child{padding-right:0;}}"),h=Object(s.themeFn)("treatment",{none:Object(s.css)(),hub:Object(s.css)("padding:0;"),seriesCollection:Object(s.css)("margin:0 0 20px 0;background-color:",d.a.color.white,";")}),g=Object(s.styled)("ol",{target:"e1bmefv20"})(h,";display:flex;flex-wrap:nowrap;list-style:none;"),y=c()([d.a.breakpoint.medium,d.a.breakpoint.mediumLarge,d.a.breakpoint.large]),v=Object(s.themeFn)("treatment",{none:function(e){var t=e.hasThumb;return Object(s.css)("font-weight:",d.a.font.weight.medium,";",y({fontSize:[t?d.a.font.size(20):d.a.font.size(23),t?null:d.a.font.size(23)],lineHeight:[t?d.a.font.size(22):d.a.font.size(24),t?null:d.a.font.size(25)]}),";")},hub:function(e){var t=e.hasThumb;return Object(s.css)(y({fontSize:[t?d.a.font.size(20):d.a.font.size(23),t?d.a.font.size(14):d.a.font.size(17),t?d.a.font.size(16):d.a.font.size(19)],lineHeight:[t?d.a.font.size(23):d.a.font.size(25),t?d.a.font.size(17):d.a.font.size(19),t?d.a.font.size(18):d.a.font.size(20)],fontWeight:[d.a.font.weight.bold,d.a.font.weight.medium,d.a.font.weight.bold]}),";")},seriesCollection:function(e){var t=e.hasThumb;return Object(s.css)(y({fontSize:[t?d.a.font.size(20):d.a.font.size(23),t?d.a.font.size(18):d.a.font.size(22)],lineHeight:[t?d.a.font.size(23):d.a.font.size(26),t?d.a.font.size(21):d.a.font.size(24)]}),";")}}),b=Object(s.styled)("h2",{target:"e1bmefv21"})("font-family:",d.a.font.serifMedium,";font-weight:",d.a.font.weight.bold,";",v," a{color:inherit;}"),_=Object(s.themeFn)("treatment",{none:Object(s.css)(),hub:Object(s.css)("display:none;"),seriesCollection:Object(s.css)("display:none;",p.a.mediumLarge,"{display:block;}")}),w=Object(s.styled)("h2",{target:"e1bmefv22"})(_," font-family:",d.a.font.imperial,";color:",d.a.color.gray20,";font-size:",d.a.font.size(14),";line-height:",d.a.font.size(19),";margin-top:10px;margin-bottom:5px;background-color:",d.a.color.white,";"),x=Object(s.css)("height:min-content;margin-bottom:10px;margin-top:20px;background-color:",f.color.background.primary,";"),k=Object(s.css)("width:100vw;height:100%;overflow:scroll;display:flex;flex-direction:row;position:relative;scroll-snap-type:x mandatory;scrollbar-width:none;@media (hover:none){&::-webkit-scrollbar{display:none;}}"),O=Object(s.css)("font-family:",d.a.font.franklinBase,";font-weight:",d.a.font.weight.medium,";font-size:",d.a.font.size(12),";line-height:",d.a.font.size(20),";letter-spacing:0.3px;color:",f.color.content.quaternary,";margin-top:10px;"),E=Object(s.css)(p.a.medium,"{display:none;}"),T=n("lSNA"),C=n.n(T),S=n("xvFu"),P=n("5dFD"),M=n("dlEz"),I=n("2XMp");function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){C()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=["videoLarge","mediumThreeByTwo440","mediumThreeByTwo225","hpSmall","thumbLarge","square640"],R=function(e){var t=e.asset,n=e.assetTheme,i=e.trackingQueryParams,o=t.headline,l=t.promotionalHeadline,c=t.promotionalMedia,u=t.summary,d=t.lastModified;Object(s.useTheme)().treatment=n;var p=Boolean(t.promotionalMedia),f=Object(a.useMemo)((function(){return j(j({},t),{},{url:Object(I.b)(t.url,i)})}),[i,t]),h=d&&r()("span",{className:O},void 0,r()(M.a,{formatter:"elapsed",iso:d}));return r()("li",{className:m},void 0,c&&r()(S.a,{crops:L,asset:f,creditClass:E}),r()("div",{},void 0,r()(b,{hasThumb:p},void 0,r()(P.a,{link:f},void 0,(null==o?void 0:o.default)||l)),r()(w,{},void 0,r()(P.a,{link:f},void 0,u)),h))};R.displayName="Asset",R.defaultProps={assetTheme:"",promotionalMedia:{},promotionalHeadline:"",summary:"",trackingQueryParams:{}};var N=function(e){var t=e.assetList,n=e.assetTheme,i=e.trackingQueryParams,a=Object(o.a)().deviceType;return t&&0!==t.length?r()(g,{},void 0,"smartphone"===a?r()("section",{className:x},void 0,r()("div",{className:k},void 0,r()("div",{style:{display:"inline-block",height:"100%",minWidth:"25px"}}),t.map((function(e){return(null==e?void 0:e.node)&&r()("div",{className:(t=295,a=20,Object(s.css)("display:inline-block;min-width:",t,"px;width:",t,"px;scroll-snap-align:center;scroll-margin-left:",a/2,"px;margin-right:",a,"px;white-space:pre-line;text-align:left;margin-bottom:5px;@media only screen and (min-device-width:300px) and (max-device-width:350px){min-width:270px;width:270px;}"))},e.node.id,r()(R,{asset:e.node,assetTheme:n,trackingQueryParams:i}));var t,a})),r()("div",{style:{display:"inline-block",height:"100px",minWidth:"".concat(20,"px")}}))):t.map((function(e){return(null==e?void 0:e.node)&&r()(R,{asset:e.node,assetTheme:n,trackingQueryParams:i},e.node.id)}))):null};N.displayName="Band",N.defaultProps={assetTheme:void 0,trackingQueryParams:""};t.a=N},Vgop:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Answer",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"Clue",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"Paragraph",{enumerable:!0,get:function(){return u.default}}),t.default=void 0;var r=i(n("lwsE")),a=i(n("W8MJ")),o=i(n("7W2i")),s=i(n("a1gu")),l=i(n("Nsbk")),c=i(n("q1tI")),u=(i(n("17x9")),i(n("yEZI"))),d=n("Jqp9"),p=i(n("0oBV")),f=i(n("Rr+T")),m=i(n("8VGN")),h=n("FfcP");function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,l.default)(e);if(t){var r=(0,l.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,s.default)(this,n)}}var y=function(e){(0,o.default)(n,e);var t=g(n);function n(){var e;(0,r.default)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={isRevealed:e.props.isInEditor},e.toggleReveal=function(){e.setState((function(e){return{isRevealed:!e.isRevealed}}))},e.handleKeyPress=function(t){"Enter"!==t.key&&" "!==t.key||e.toggleReveal()},e}return(0,a.default)(n,[{key:"render",value:function(){var e,t=this.props,n=t.isInAMP,i=t.isInEditor,r=t.children,a=t.className,o=t.clue,s=t.answer,l=t.paragraphContent,p="reveal-".concat(Math.floor(Math.random()*Math.floor(1e3))),g=this.state.isRevealed?"show":"hide",y=n?"margins-h":"";return i&&(e=!1),c.default.createElement("div",{className:(0,d.cx)(a,h.revealClass,y),"data-testid":"reveal-block"},c.default.createElement(f.default,{on:"tap:".concat(p,"-reveal.toggleClass('class' = 'show')"),onClick:this.toggleReveal,onKeyPress:this.handleKeyPress,tabIndex:"0",role:"button",contentEditable:e},o),c.default.createElement(m.default,{id:"".concat(p,"-reveal"),className:g},c.default.createElement(u.default,null,s),c.default.createElement(u.default,null,r||l)))}}]),n}(c.default.Component);y.displayName="Reveal",y.defaultProps={paragraphContent:[],answer:"",children:null,className:void 0,clue:"",isInEditor:!1,isInAMP:!1};var v=(0,p.default)(y);t.default=v},Vj0M:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){var t=Math.floor(e/1e3)||0;return{hours:Math.floor(t/3600),minutes:Math.floor(t/60)%60,seconds:t%60}};t.default=i},Vn11:function(e,t,n){"use strict";var i,r=n("VkAN"),a=n.n(r),o=n("gcR/"),s=n.n(o),l=(n("q1tI"),n("eFc+")),c=n.n(l),u=n("8YpP"),d=n.n(u),p=n("Jqp9"),f=n("wXC7"),m=n.n(f),h=Object(p.css)("margin:",m.a.breakpoint.mobileBlockMargins,";width:",m.a.breakpoint.mobileFullWidth,";max-width:",m.a.breakpoint.textBodyWidth,"px;text-align:center;",m.a.breakpoint.medium,"{margin:",m.a.breakpoint.desktopMediaMargins,";width:100%;}"),g=function(e){var t=e.data,n=t.spotifyEmbedUrl,i=t.spotifyPlayerStyle;return s()("div",{className:h},void 0,s()(d.a,{spotifyEmbedUrl:n,playerStyle:i}))};g.displayName="SpotifyEmbedBlock",g.fragments={data:c()(i||(i=a()(["\n    fragment SpotifyEmbedBlock_data on SpotifyEmbedBlock {\n      spotifyEmbedUrl\n      spotifyPlayerStyle: playerStyle\n    }\n  "])))};t.a=g},VqV0:function(e,t,n){"use strict";n.r(t),n.d(t,"articleQuery",(function(){return dc})),n.d(t,"getInitialQuery",(function(){return fc}));var i=n("gcR/"),r=n.n(i),a=n("J4zp"),o=n.n(a),s=n("lSNA"),l=n.n(s),c=n("VkAN"),u=n.n(c),d=n("q1tI"),p=n.n(d),f=n("eFc+"),m=n.n(f),h=n("fZdH"),g=n("jt2X"),y=n("DH8m"),v=n("X6oL"),b=n("PgO9"),_=n("06b3"),w=n("rONy");var x=n("E8RS"),k=n("cr+I"),O=n.n(k),E=n("W1TD"),T=n("fnBi"),C=n("rnzX"),S=n("vftj"),P=n("QS0n"),M=n("Jqp9"),I=n("wXC7"),A=n.n(I),j=Object(M.css)("color:",A.a.color.gray30,";font-family:",A.a.font.sansBase,";font-size:13px;margin:0 auto;max-width:",A.a.breakpoint.maxMobileContentWidth,"px;padding:15px;"),L=Object(M.css)("color:",A.a.color.black,";font-family:",A.a.font.franklinBase,";font-size:16px;font-weight:",A.a.font.weight.bold,";margin-bottom:7px;"),R="Page No Longer Available",N="This news-agency article is no longer available on nytimes.com.";function D(){return Object(v.useTracking)({presentation:{pageType:"Expired"}}),r()(P.Route,{render:function(e){var t=e.staticContext;return t&&(t.type="Expired",t.statusCode=410),r()("div",{className:j},void 0,r()(S.Helmet,{},void 0,r()("title",{},void 0,R)),r()("h1",{className:L},void 0,R),N)}})}D.displayName="ExpiredPage";var B=D,z=n("eJDT"),F=n("hU1o"),U=n("pCca"),H=n("bRPg"),W=n("BwWf"),q=n("sOrY");function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y=function(e,t){return function(n){var i=n.ownProps,r=n.data;if(!r[e])return n;var a=G({},r[e]),o=!1;return t.forEach((function(t){a[t]&&Array.isArray(a[t])&&(a[t]=a[t].filter(Boolean),!o&&r[e][t].length>a[t].length&&(o=!0))})),o&&console.warn("Found null in one of: ".concat(t.join(","))),G(G({},i),{},{data:G(G({},r),{},l()({},e,a))})}},Z=n("aRw7"),X=n("RvkP"),J=n("OB6K"),K=n.n(J),$=n("EYBZ"),Q=n("5ZkK"),ee=n("6NOd"),te=n("6Gip"),ne=n("lMaV"),ie=n.n(ne),re=n("cUQY"),ae=n("QILm"),oe=n.n(ae),se=n("ktkx"),le=n("6Zrg"),ce=n("NW2b"),ue=n("RIqP"),de=n.n(ue);function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}new Map;var me,he="STYLN_ad_placement_v3",ge="0_control",ye="1_pattern",ve="2_distance",be=function(e){var t,n,i,r,a={BylineBlock:"1",ClaimReviewBlock:"w",DiptychBlock:"y",Dropzone:"z",EmailSignupBlock:"m",InlineQuoteBlock:"2",InstagramEmbedBlock:"3",InteractiveBlock:"4",LegacyTableBlock:"5",ListBlock:"6",LocationRecommendationBlock:"7",PullquoteBlock:"o",RelatedLinksBlock:"8",SlideshowBlock:"f",SoundcloudEmbedBlock:"j",SpotifyEmbedBlock:"k",TikTokEmbedBlock:"m",TwitterEmbedBlock:"n",YouTubeEmbedBlock:"x",BoldParagraph:"9"},o="ParagraphBlock"===(null==e?void 0:e.__typename)&&"BoldFormat"===(null==e||null===(t=e.content)||void 0===t||null===(n=t[0])||void 0===n||null===(i=n.formats)||void 0===i||null===(r=i[0])||void 0===r?void 0:r.__typename)?a.BoldParagraph:a[null==e?void 0:e.__typename];return null!=o?o:null==e?void 0:e.__typename[0].toLowerCase()},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=["((h|i|r|l|d|9)+(p[d]*){1,5}(?!p|d))"],n=new RegExp(t.join("|"),"g"),i=null==e?void 0:e.map((function(e){return be(e)})).join(""),r=i?de()(i.replaceAll("z","").matchAll(n)):[],a=function(e){return e.includes("h")||e.includes("9")},o=null==r?void 0:r.filter((function(e){return a(e[0])})).map((function(e){return e.index})),s=null==r?void 0:r.filter((function(e){return a(e[0])})).map((function(e){return e.index+(e[0].length-1)})),l=i?de()(i.matchAll(/z/g)).map((function(e){return e.index})):[],c=function(e){var t=e;return null==l||l.forEach((function(e){e<=t&&(t+=1)})),t},u=o.map((function(e){return c(e)})),d=s.map((function(e){return c(e)}));return{superBlockStartList:u,superBlockEndList:d}},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=[],i=_e(e),r=i.superBlockStartList,a=i.superBlockEndList;return r.forEach((function(i,r){var o,s=a[r],l=e.slice(i,s+1),c=l.filter((function(e){return"Dropzone"===e.__typename})),u=l.filter((function(e){return"Dropzone"===e.__typename&&e.adsDesktop})).length>0,d=l[0],p=l[l.length-1],f=l.length-1,m=(null==p||null===(o=p.content)||void 0===o?void 0:o.map((function(e){var t;return null==e||null===(t=e.text)||void 0===t?void 0:t.length}))).reduce((function(e,t){return e+t}),0),h=l.findIndex((function(e){return m<100&&"Dropzone"===e.__typename&&e.adsDesktop}));if(-1!==h){var g=h,y=h-f;Math.abs(g)<Math.abs(y)||Math.abs(g)===Math.abs(y)?l[h].moveAdAbove=!0:l[h].moveAdBelow=!0,l[h].movedAd=!0}var v=l.some((function(e){return e.movedAd})),b=l.some((function(e){return e.moveAdAbove}));if(v&&(b?d.pushAdAbove=!0:p.pushAdBelow=!0),c.forEach((function(e){n.push(e.index)})),u&&!v){var _=c[c.length-1],w=e.find((function(e){return e.index===_.index+1}));w&&!w.bad&&t.push(w.index)}})),{dropzoneOnList:t,dropzoneOffList:n}},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=null==e?void 0:e.slice(),i=null==e?void 0:e.map((function(e,t){if(!0===e.movedAd&&e.moveAdAbove)return t})).filter((function(e){return void 0!==e})),r=null==e?void 0:e.map((function(e,t){if(!0===e.movedAd&&e.moveAdBelow)return t})).filter((function(e){return void 0!==e})),a=null==e?void 0:e.map((function(e,t){if(!0===e.pushAdAbove)return t+1})).filter((function(e){return void 0!==e})),o=null==e?void 0:e.map((function(e,t){if(!0===e.pushAdBelow)return t-1})).filter((function(e){return void 0!==e}));return i.forEach((function(e,i){t.push(n[e].index);var r=n[e],o=a[i]-1;n.splice(e,1),n.splice(o,0,r)})),r.forEach((function(e,i){t.push(n[e].index);var r=n[e],a=o[i]+1;n.splice(e,1),n.splice(a,0,r)})),n},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=we(e),n=t.dropzoneOnList,i=t.dropzoneOffList,r=xe(e,n);return null==r?void 0:r.map((function(e){return n.includes(null==e?void 0:e.index)?fe(fe({},e),{},{adsDesktop:!0}):i.includes(null==e?void 0:e.index)?fe(fe({},e),{},{adsDesktop:!1}):fe({},e)}))},Oe=function(e){return null==e?void 0:e.map((function(t,n){var i,r,a=null===(i=e[n+1])||void 0===i?void 0:i.__typename,o=null===(r=e[n-1])||void 0===r?void 0:r.__typename,s=["VideoBlock","ImageBlock","InteractiveBlock"],l=s.includes(a),c=s.includes(o);return"Dropzone"===(null==t?void 0:t.__typename)&&t.adsDesktop&&(l||c)?fe(fe({},t),{},{adsDesktop:!1}):t}))},Ee=["name"];function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Se(e){var t,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=i.data,a=i.location;if(null==r||null===(t=r.article)||void 0===t||!t.url)return null;var o=r.article,s=Boolean(null==o||null===(n=o.compatibility)||void 0===n?void 0:n.hasVideo).toString(),l=Ce(Ce({},Object(le.b)(a)),{},{template:"article",hasVideo:s});return Ce({},l=Object(se.b)(o,l))}var Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e&&e.map((function(e){if("Dropzone"!==e.__typename)return e;var t=e.adsDesktopHoldout;return Ce(Ce({},e),{},{adsDesktop:t})}))},Me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e&&e.find((function(e){return"desktopHoldout"===e.name}));return t?e.map((function(e){var n=e.name,i=oe()(e,Ee);return"desktop"===n?Ce(Ce({},t),{},{name:n}):Ce({name:n},i)})):e},Ie=function(e,t){var n=Oe(ke(t));return e===ye?ke(t):e===ve?Oe(t):n},Ae=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=n.article,r=arguments.length>2?arguments[2]:void 0;if(!i)return{article:i};var a=(null==i?void 0:i.sprinkledBody)||{},o=null==r||null===(e=r[he])||void 0===e?void 0:e.allocated,s=null==r||null===(t=r[he])||void 0===t?void 0:t.variant;r&&o&&s&&Object(ce.e)(he);var l=a.content,c=Pe(l);if(i&&o&&s!==ge)return{article:Ce(Ce({},i),{},{sprinkledBody:Ce(Ce({},a),{},{content:Ie(s,c)})})};var u=(null==i?void 0:i.sprinkled)||{},d=u.configs;return{article:Ce(Ce({},i),{},{sprinkledBody:Ce(Ce({},a),{},{content:c}),sprinkled:Ce(Ce({},u),{},{configs:Me(d)})})}};Se.fragments={article:m()(me||(me=u()(["\n    fragment storyAdRequirements_article on Article {\n      id\n      url\n      sprinkledBody {\n        content {\n          ... on Dropzone {\n            adsDesktopHoldout\n            adsMobileHoldout\n          }\n        }\n      }\n      compatibility {\n        hasVideo\n      }\n      ...getTargetingParams_data\n    }\n    ","\n  "])),se.b.fragments.data)};var je,Le={AdRequirements:Se,updateAdSprinkles:Ae},Re=n("8iTF"),Ne=n("7FfI");function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ze(e,t){var n={stride:0,threshold:0,capacity:0};if(e.sprinkled&&e.sprinkled.configs){var i="smartphone"===t?"mobile":"desktop",r=e.sprinkled.configs.filter((function(e){return e.name===i}));if(r.length>0){var a=r[0];if(a.stride&&(n.stride=a.stride),a.threshold&&(n.threshold=a.threshold),e.sprinkledBody&&e.sprinkledBody.content){var o=e.sprinkledBody.content.filter((function(e){return"Dropzone"===e.__typename}));n.capacity="mobile"===i?o.filter((function(e){return!0===e.adsMobile})).length:o.filter((function(e){return!0===e.adsDesktop})).length}}}return n}var Fe=function(e){var t=e.data,n=e.deviceType;if(!t||!t.article||!t.article.url)return null;var i=t.article,r={},a="";i&&(a=(a=i.type||"").charAt(0).toUpperCase()+a.slice(1));var o=[];i.bylines&&i.bylines.forEach((function(e){if(null!==e){var t=e.creators.map((function(e){return e.displayName}));o=o.concat(t)}})),o.length>0&&(r.authors=o),r.collectionName=i.collections.map((function(e){return e.name})),r.collectionType=i.collections.map((function(e){return e.collectionType})),r.collectionType=r.collectionType.filter((function(e,t){return r.collectionType.indexOf(e)===t}));var s=/^(https)(:\/\/.+)/;i.timesTags&&i.timesTags.map((function(e){if(e.__typename)switch(e.__typename){case"Subject":return r.desFacets||(r.desFacets=[]),r.desFacets.push(e.displayName);case"Person":return r.perFacets||(r.perFacets=[]),r.perFacets.push(e.displayName);case"Organization":return r.orgFacets||(r.orgFacets=[]),r.orgFacets.push(e.displayName);case"Location":return r.geoFacets||(r.geoFacets=[]),r.geoFacets.push(e.displayName);default:return null}return null})),i.sprinkledBody&&i.sprinkledBody.content&&i.sprinkledBody.content.map((function(e){return"OakHeaderBasic"===e.__typename?(r.storyPatterns||(r.storyPatterns=[]),r.storyPatterns.push(e.__typename)):r.storyPatterns})),r.commentsDisplayed=Object(Re.h)(i.commentProperties.status),r.newsSource=i.source?i.source.displayName:"";var l,c,u="freeform";if(i.sprinkledBody&&i.sprinkledBody.content){var d=i.sprinkledBody.content.some((function(e){return"HeaderLegacyBlock"===e.__typename})),p=i.sprinkledBody.content.some((function(e){return"HeaderLiveBriefingBlock"===e.__typename})),f=i.sprinkledBody.content.some((function(e){return"HeaderBasicBlock"===e.__typename})),m=i.sprinkledBody.content.some((function(e){return"HeaderFullBleedHorizontalBlock"===e.__typename})),h=i.sprinkledBody.content.some((function(e){return"HeaderFullBleedVerticalBlock"===e.__typename}));f?u="default":d?u="legacy":p?u="liveBriefing":m?u="horizontalFullBleed":h&&(u="verticalFullBleed")}return{asset:Be(Be({},r),{},{ad:ze(i,n),contentTone:i.tone,desk:i.desk,headline:i.headline?i.headline.default:"",id:i.sourceId,kicker:i.kicker,lastUpdatedTimestamp:i.lastModified,originalDesk:i.originalDesk,originatingDesk:i.originalDesk,printPage:i.printInformation.page,printSection:i.printInformation.section,publishDatePrint:i.printInformation.publicationDate,publishedDate:Object(Ne.getUnixFromISO)(i.firstPublished),publishedTimeStamp:Object(Ne.getUnixFromISO)(i.firstPublished),section:i.section?i.section.displayName:"",slug:i.slug,source:i.source?i.source.displayName:"nyt_cms",subSection:i.subsection?i.subsection.displayName:"",type:a,typeOfMaterial:i.typeOfMaterials.join(","),url:(l=i.url,c=s.exec(l),c&&c[2]?"http".concat(c[2]):l),wordCount:i.wordCount,language:i.language?i.language.code:"",headerType:u}),presentation:{pageType:a}}};Fe.fragments={article:m()(je||(je=u()(["\n    fragment StoryTrackingMapper_article on Article {\n      id\n      url\n      type\n      tone\n      desk\n      kicker\n      headline {\n        default\n      }\n      commentProperties {\n        status\n      }\n      typeOfMaterials\n      wordCount\n      firstPublished\n      lastModified\n      originalDesk\n      language {\n        code\n      }\n      sourceId\n      source {\n        id\n        displayName\n      }\n      section {\n        id\n        displayName\n      }\n      subsection {\n        id\n        displayName\n      }\n      printInformation {\n        page\n        section\n        publicationDate\n      }\n      sprinkled {\n        configs {\n          name\n          stride\n          threshold\n        }\n      }\n      sprinkledBody {\n        content {\n          __typename\n          ... on Dropzone {\n            adsMobile\n            adsDesktop\n          }\n        }\n      }\n      timesTags @filterEmpty {\n        __typename\n        displayName\n      }\n      collections @filterEmpty {\n        id\n        name\n        collectionType\n      }\n      bylines {\n        creators {\n          ... on Person {\n            id\n            displayName\n          }\n        }\n      }\n    }\n  "])))};var Ue,He,We=Fe,qe=n("cDf5"),Ve=n.n(qe),Ge=n("Kxyt"),Ye=n("InUh"),Ze=n.n(Ye),Xe=n("xHA4"),Je=n("hZ4i"),Ke=n("Zc/f"),$e=n.n(Ke),Qe=n("FfMl"),et=n.n(Qe),tt=n("bqBd"),nt=n("E0i8"),it=n("UGcZ"),rt=n("FZH6"),at=n("369f"),ot=n("9Wdi"),st=n("lwsE"),lt=n.n(st),ct=n("W8MJ"),ut=n.n(ct),dt=n("7W2i"),pt=n.n(dt),ft=n("a1gu"),mt=n.n(ft),ht=n("Nsbk"),gt=n.n(ht),yt=n("u1H9"),vt=n("+ClL"),bt=n("/KYJ");function _t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=gt()(e);if(t){var r=gt()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return mt()(this,n)}}var wt=Object(M.css)("display:grid;grid-row-gap:24px;justify-items:center;margin-left:20px;margin-right:20px;padding:40px 0;"),xt=Object(M.css)("display:grid;grid-row-gap:8px;text-align:center;"),kt=Object(M.css)("color:",A.a.color.gray10,";text-decoration:underline;"),Ot=Object(M.css)("color:#727272;font-size:16px;font-family:",A.a.font.franklinBase,";line-height:20.8px;"),Et=function(e){pt()(n,e);var t=_t(n);function n(){var e;lt()(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={error:!1},e}return ut()(n,[{key:"componentDidCatch",value:function(e,t){Object(vt.a)(e,{msg:"OakErrorBoundary: Failed to load OakBody",componentName:"OakBody",componentStack:t.componentStack}),this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?r()("div",{"data-testid":"oak-body-error",className:wt},void 0,Ue||(Ue=r()(bt.AlertIcon,{"aria-hidden":!0,size:24})),r()("div",{className:xt},void 0,He||(He=r()("p",{className:Ot},void 0,"We are having trouble retrieving the article content.")),r()("p",{className:Ot},void 0,"Please try reloading the page or",r()("a",{"data-testid":"log-in-link",className:kt,href:Object(yt.b)()},void 0,"log in"),"."))):this.props.children}}]),n}(p.a.Component);Et.displayName="OakBodyErrorBoundary";var Tt,Ct=Et,St=n("HU5K"),Pt=n("hkPW");function Mt(e,t){var n,i=Object(Pt.a)({data:{event:"impression",module:{region:"header",label:"1_Show",name:"enhanced_byline",context:"trust_byline",asset_uri:e,author:null!==(n=null==t?void 0:t.map((function(e){var t;return null==e||null===(t=e.creatorSnapshots)||void 0===t?void 0:t.map((function(e){var t;return null!==(t=null==e?void 0:e.uri)&&void 0!==t?t:""})).join(", ")})).join(", "))&&void 0!==n?n:""}}}),r=i.ref,a=i.isTracked;Object(d.useEffect)((function(){var e=document.querySelector("#enhanced-byline");e&&r(a?null:e)}))}Mt.fragments={article:m()(Tt||(Tt=u()(["\n    fragment useTrackEnhancedByline_article on Article {\n      id\n      uri\n      bylines {\n        creatorSnapshots {\n          ... on PersonSnapshot {\n            uri\n          }\n        }\n      }\n    }\n  "])))};var It=Mt,At=n("N/T0"),jt=n("eoAV"),Lt=n("jOYC"),Rt=function(e){var t=e.meter;if(!e.optimisticallyTruncated)return null;var n=t.granted,i=!t.meterReady;return r()("div",{"aria-live":"polite"},void 0,n&&r()("div",{className:A.a.a11y.visuallyHidden},void 0,"You have been granted access, use your keyboard to continue reading."),i&&r()("div",{className:A.a.a11y.visuallyHidden},void 0,"You have a preview view of this article while we are checking your access. When we have confirmed access, the full article content will load."))};Rt.displayName="OptimisticAriaLiveRegion";var Nt,Dt,Bt=n("LON6"),zt=n("D5MC"),Ft=n("ATQY"),Ut=n("Y3E+"),Ht=n.n(Ut),Wt=n("ZB1J"),qt=n("ZKN5"),Vt=n("YWmT"),Gt=Object(M.css)("display:none;.SJ_xpn_storylines_desktop_cwv_0124-1_xpn_in_story &,.SJ_xpn_storylines_desktop_cwv_0124-2_xpn_hamburger &,.SJ_xpn_storylines_desktop_cwv_0124-3_xpn_top_only &{",A.a.breakpoint.mediumLarge,"{display:flex;}}"),Yt=Object(M.css)("display:flex;.SJ_xpn_storylines_desktop_cwv_0124-1_xpn_in_story &{",A.a.breakpoint.mediumLarge,"{display:none;}}"),Zt=Object(M.css)("display:none;.SJ_xpn_storylines_desktop_cwv_0124-1_xpn_in_story &,.SJ_xpn_storylines_desktop_cwv_0124-2_xpn_hamburger &,.SJ_xpn_storylines_desktop_cwv_0124-3_xpn_top_only &{",A.a.breakpoint.mediumLarge,"{display:flex;align-items:center;justify-content:center;min-height:55px;position:relative;margin-top:8px;&:empty{display:none;}}}",A.a.printHide),Xt=Object(M.css)("min-width:620px;overflow-x:auto;.SJ_xpn_storylines_desktop_cwv_0124-2_xpn_hamburger &{margin-left:30px;}"),Jt=Object(M.css)("align-self:center;"),Kt=n("aY2f"),$t=n.n(Kt),Qt=n("dKsL"),en=n.n(Qt),tn=n("/Kb5"),nn=n.n(tn),rn=n("y9tx"),an=function(e){var t=e.displayName,n=e.status,i=e.url,a=e.lastModified,o=e.isActive,s=e.className,c=e.isNew,u=e.trackInteraction,d=e.isLiveRoute,p=e.renderLink;if(!i||!t)return null;var f="live"===(null==n?void 0:n.toLowerCase()),m=a&&Date.now()-Number(new Date(a)),h=!d&&f&&m<=18e5;return r()("span",{className:Object(M.cx)(rn.menuLinkContainerClass,s),"data-testid":"menu-link"},void 0,!o&&r()(en.a,{status:n}),p&&r()("a",{className:Object(M.cx)(rn.menuLinkClass,l()({},rn.underlineClass,o)),role:"menuitem",href:i,onClick:function(e){u(e)}},void 0,r()("span",{className:rn.hoverUnderlineClass},void 0,t),c&&(Nt||(Nt=r()(nn.a,{})))),!p&&r()("span",{className:Object(M.cx)(rn.menuLinkClass,l()({},rn.underlineClass,o))},void 0,r()("span",{className:rn.hoverUnderlineClass},void 0,t),c&&(Dt||(Dt=r()(nn.a,{})))),h&&r()("div",{className:rn.placeholderClass},void 0,r()($t.a,{autoUpdate:!0,showAbsoluteTime:!1,iso:a,formatter:"elapsed",className:rn.timestampClass})))};an.displayName="MenuLink",an.defaultProps={displayName:void 0,className:void 0,status:void 0,url:void 0,lastModified:void 0,isActive:!1,isNew:!1,trackInteraction:void 0,renderLink:!1};var on,sn,ln=an,cn=n("f3Il"),un=n("ed9S"),dn=n.n(un),pn=n("1jzN"),fn=n.n(pn),mn=function(e){var t=e.url,n=e.tone,i=e.text,a=e.className,o=e.isAmp,s=e.trackInteraction,c=e.renderLink,u=e.isElectionStoryline;return i?t&&c?r()("a",{href:t,onClick:function(e){s(e)},className:Object(M.cx)(cn.titleLinkClass,cn.titleClass,a,l()({},cn.featureToneClass,n===zt.StorylineTone.Feature))},void 0,u?on||(on=r()(fn.a,{})):r()(dn.a,{className:Object(M.cx)(cn.titleUnderlineClass,cn.caretClass),text:i,disable:o})):r()("span",{className:Object(M.cx)(cn.titleClass,a,l()({},cn.featureToneClass,n===zt.StorylineTone.Feature))},void 0,u?sn||(sn=r()(fn.a,{})):r()(dn.a,{text:i,disable:o})):null};mn.displayName="MenuTitle",mn.defaultProps={url:null,className:void 0,isAmp:!1,text:null,tone:void 0,trackInteraction:function(e){return e},renderLink:!1,isElectionStoryline:!1};var hn,gn=mn;function yn(e){var t=e.storyline,n=e.uriOfActiveMenuLink,i=e.testName,a=e.ruleName,s=e.pageType,c=e.parentUri,u=e.region,f=e.isLiveRoute,m=e.componentLocation,g="SJ_xpn_storylines_desktop_cwv_0124",y="1_xpn_in_story",v=t.displayName,b=t.tone,_=t.primaryAssets,w=t.hubAssets,x=t.uri,k=Object(h.a)(),O=Object(d.useState)(!1),E=o()(O,2),T=E[0],C=E[1],S=Object(d.useState)(!1),P=o()(S,2),I=P[0],A=P[1];if(Object(d.useEffect)((function(){var e,t,n,i,r,a,o=[y,"2_xpn_hamburger","3_xpn_top_only"];"inline"===m&&k&&null!=k&&null!==(e=k[g])&&void 0!==e&&e.allocated&&null!=k&&null!==(t=k[g])&&void 0!==t&&t.variant&&o.includes(null==k||null===(n=k[g])||void 0===n?void 0:n.variant)&&C(!0),"sticky"===m&&k&&null!=k&&null!==(i=k[g])&&void 0!==i&&i.allocated&&null!=k&&null!==(r=k[g])&&void 0!==r&&r.variant&&o.includes(null==k||null===(a=k[g])||void 0===a?void 0:a.variant)&&C(!0)}),[k,m]),Object(d.useEffect)((function(){var e,t,n,i,r=[y,"2_xpn_hamburger","3_xpn_top_only"];"inline"!==m||!k||null!=k&&k[g]?("inline"===m&&window&&!window.matchMedia("(min-width: 1024px)").matches||"inline"===m&&k&&null!=k&&null!==(e=k[g])&&void 0!==e&&e.variant&&!r.includes(null==k||null===(t=k[g])||void 0===t?void 0:t.variant))&&A(!0):A(!0),"sticky"===m&&k&&null!=k&&null!==(n=k[g])&&void 0!==n&&n.variant&&(null==k||null===(i=k[g])||void 0===i?void 0:i.variant)===y&&A(!0)}),[k,m]),I)return!1;var j="nyt://storyline/894481b3-768d-4cd7-8eba-6fbfb73390d7"===x;return r()(Vt.a,{componentName:"menu",region:u,parentUri:c,testName:i,ruleName:a,pageType:s,className:"sticky"===m?Xt:void 0},void 0,(function(e){var t,i=e.trackImpression,a=e.trackInteraction;return r()("nav",{className:Object(M.cx)(Wt.scrollContainerClass,(t={},l()(t,Gt,"inline"===m),l()(t,Yt,"sticky"===m),t)),"aria-labelledby":"storyline-menu-title",role:"navigation"},void 0,r()(Ht.a,{onVisible:function(){var e,t,n,r,a,o;null!=w&&null!==(e=w[0])&&void 0!==e&&null!==(t=e.asset)&&void 0!==t&&t.url&&(null==i||i({event:"impression",card:{index:0,type:"title",id:null==w||null===(n=w[0])||void 0===n||null===(r=n.asset)||void 0===r?void 0:r.uri,url:null==w||null===(a=w[0])||void 0===a||null===(o=a.asset)||void 0===o?void 0:o.url,label:v}}))}},void 0,(function(e){var t,n,i=e.ref;return p.a.createElement("h3",{id:"storyline-menu-title",ref:i,className:Object(M.cx)(l()({},Jt,j))},r()(gn,{url:null==w||null===(t=w[0])||void 0===t||null===(n=t.asset)||void 0===n?void 0:n.url,text:v,tone:b,className:Object(M.cx)(Wt.preventInteractivesFromTurningLinksBlueClass),renderLink:T,trackInteraction:function(e){var t,n,i,r,o,s;a(e,null==w||null===(t=w[0])||void 0===t||null===(n=t.asset)||void 0===n?void 0:n.url,{eventData:{type:"url-click",trigger:"item"},item:{uri:null==w||null===(i=w[0])||void 0===i||null===(r=i.asset)||void 0===r?void 0:r.uri,url:null==w||null===(o=w[0])||void 0===o||null===(s=o.asset)||void 0===s?void 0:s.url}})},isElectionStoryline:j}))})),r()("ul",{className:Wt.listClass,role:"menu"},void 0,Object(Ft.withDerivedLiveStatus)(_).filter((function(e){return null==e?void 0:e.asset})).map((function(e,t){return r()(Ht.a,{onVisible:function(){var n,r;null==i||i({event:"impression",card:{index:null!=w&&null!==(n=w[0])&&void 0!==n&&null!==(r=n.asset)&&void 0!==r&&r.url?t+1:t,type:(null==e?void 0:e.status)||"UNSET",id:null==e?void 0:e.asset.uri,url:null==e?void 0:e.asset.url,label:null==e?void 0:e.displayName,is_new:null==e?void 0:e.isNew}})}},(null==e?void 0:e.asset.uri)||t,(function(t){var i,o,s,l,c,u=t.ref;return p.a.createElement("li",{ref:u,className:Wt.listSpacingClass},r()(ln,{status:null==e?void 0:e.status,displayName:null==e?void 0:e.displayName,url:null==e?void 0:e.asset.url,isLiveRoute:f,lastModified:null==e||null===(o=e.asset)||void 0===o?void 0:o.lastModified,isActive:null==e||null===(s=e.asset)||void 0===s||null===(l=s.uri)||void 0===l||null===(c=l.includes)||void 0===c?void 0:c.call(l,n),isNew:null==e?void 0:e.isNew,className:Wt.preventInteractivesFromTurningLinksBlueClass,renderLink:T,trackInteraction:function(t){var n,i,r;a(t,null==e||null===(n=e.asset)||void 0===n?void 0:n.url,{eventData:{type:"url-click",trigger:"item"},item:{uri:null==e||null===(i=e.asset)||void 0===i?void 0:i.uri,url:null==e||null===(r=e.asset)||void 0===r?void 0:r.url}})}},null==e||null===(i=e.asset)||void 0===i?void 0:i.uri))}))}))))}))}yn.displayName="XPNStorylinesMenuBlock",yn.defaultProps={testName:null,isLiveRoute:!1},yn.fragments={creativeWork:m()(hn||(hn=u()(["\n    fragment XPNStorylineMenuBlock_creativeWork on CreativeWork {\n      storylines {\n        testName\n        ruleName\n        storyline {\n          uri\n          url\n          tone\n          displayName\n          hubAssets {\n            asset {\n              ...Asset_storyline\n            }\n          }\n          primaryAssets {\n            displayName\n            status\n            asset {\n              ...Asset_storyline\n              ... on LegacyCollection {\n                id\n                active\n                lastModified\n              }\n              ... on FeedPublication {\n                id\n                live\n              }\n            }\n          }\n        }\n      }\n      ...Asset_storyline\n    }\n\n    fragment Asset_storyline on CreativeWork {\n      ... on Published {\n        uri\n        url\n      }\n    }\n  "])))};var vn=Object(qt.a)(yn),bn=n("zsRM"),_n=n("wRre"),wn=n("jFEr"),xn=n("6zwR"),kn=n("iGEk"),On=n("42oi"),En=n("Xwia"),Tn=n.n(En),Cn=n("xn0n"),Sn=n("5rKh"),Pn=n("zl8J"),Mn=n("Y0cC"),In=n("iDRl"),An=n("4mEQ"),jn=n("1a3z"),Ln=n("HUmG"),Rn=n("XMNT"),Nn=n.n(Rn),Dn=n("B2Q+");n("2mql");var Bn,zn=function(){var e,t,n,i,r,a,o=Object(ee.b)(),s=(null==o||null===(e=o.article)||void 0===e||null===(t=e.storylines)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.ruleName)||(null==o||null===(i=o.article)||void 0===i||null===(r=i.associatedAssets)||void 0===r||null===(a=r.find((function(e){var t,n;return null==e||null===(t=e.ruleName)||void 0===t||null===(n=t.toLowerCase())||void 0===n?void 0:n.startsWith("styln")})))||void 0===a?void 0:a.ruleName);return{isInStoryline:Boolean(s),storyline:s}},Fn=zn,Un=n("PvUX"),Hn=Object(M.css)("width:calc(100% - 40px);max-width:600px;margin:auto;border-top:1px solid ",A.a.color.gray60,";border-bottom:1px solid ",A.a.color.gray60,";margin-bottom:30px;margin-top:30px;overflow:hidden;"),Wn=Object(M.css)("font-family:",A.a.font.franklinBase,";font-size:",A.a.font.size(12),";color:",A.a.color.gray40,";white-space:nowrap;"),qn=Object(M.css)("font-family:",A.a.font.franklinBase,";text-transform:uppercase;font-size:",A.a.font.size(13),";color:",A.a.color.gray40,";font-weight:",A.a.font.weight.mediumBold,";margin:0.75em 0 ",A.a.font.size(24)," 0;letter-spacing:0.75px;"),Vn=Object(M.css)("font-family:",A.a.font.serifMedium,";font-size:",A.a.font.size(18),";line-height:",A.a.font.size(23),";color:",A.a.color.gray10,";font-weight:",A.a.font.weight.medium,";margin:0 0 0.25em 0;"),Gn=Object(M.css)("display:flex;overflow-x:scroll;-webkit-overflow-scrolling:touch;scroll-snap-type:x mandatory;margin-left:-20px;"),Yn=Object(M.css)("list-style:none;flex-shrink:0;width:75%;margin:0 0 24px 0;scroll-snap-align:start;:not(:last-child){border-right:1px solid ",A.a.color.gray60,";}"),Zn=Object(M.css)("margin:0 20px;");var Xn=m()(Bn||(Bn=u()(['\n  query InlineEditorsPicksPersonalizedQuery(\n    $listUri: PersonalizedListUri!\n    $referrer: String\n    $originalReferrer: String\n    $deviceType: PersonalizationDeviceType!\n  ) {\n    list: lists {\n      editorsPicksList: personalizedList(\n        first: 10\n        listUri: $listUri\n        personalizedListContext: {\n          referrer: $referrer\n          originalReferrer: $originalReferrer\n          deviceType: $deviceType\n          appType: WEB\n        }\n      ) {\n        ...RecirculationItem_personalized\n      }\n    }\n    # ab\n    legacyCollection(id: "nyt://legacycollection/f2b0cdd1-f2ac-507e-ae85-3b75f325515c") {\n      id\n      assets(first: 10) {\n        edges @filterEmpty {\n          node {\n            ... on Package {\n              id\n              __typename\n              assets {\n                ... on Node {\n                  id\n                  ...RecirculationItem_item\n                }\n              }\n            }\n            ... on Node {\n              id\n              ...RecirculationItem_item\n            }\n          }\n        }\n      }\n    }\n  }\n  ',"\n  ","\n"])),Un.a.fragments.personalized,Un.a.fragments.item),Jn=function(){var e,t=Object(Ge.useQuery)(Xn,{variables:{listUri:"nyt://per/personalized-list/home-featured",referrer:window.location.href||null,originalReferrer:document.referrer||null,deviceType:"desktop"===Object(Dn.a)()?"DESKTOP":"MOBILE"},ssr:!1,fetchPolicy:"cache-first"}),n=t.loading,i=t.data,a=t.error,o=Object(b.a)().user,s=Object(U.a)().deviceType,l=Fn().isInStoryline;if(a){var c=new Error(a);return c.name="Error fetching inline editors picks items",Object(vt.a)(c),null}if("smartphone"!==s||Object(Ln.d)(o)||n||l)return null;var u,d=i.list,p=null==(u=null==d||null===(e=d.editorsPicksList)||void 0===e?void 0:e.edges)?void 0:u.filter((function(e){return null==e?void 0:e.node})).map((function(e){return function(e){var t,n,i,r;if(!e)return null;var a=e.headline,o=e.url,s=e.firstPublished,l=e.promotionalMedia,c=(null==l||null===(t=l.imageWithCreditPromotionalMedia)||void 0===t?void 0:t.spanImageCrops)||(null==l?void 0:l.spanImageCrops),u=null==c||null===(n=c.find((function(e){var t=e.renditions;return null==t?void 0:t.find((function(e){return"threeByTwoSmallAt2X"===(null==e?void 0:e.name)}))})))||void 0===n||null===(i=n.renditions)||void 0===i||null===(r=i[0])||void 0===r?void 0:r.url;return{headline:null==a?void 0:a.default,url:o,firstPublished:s,promotionalMedia:u}}(e.node)})).filter((function(e){return e&&e.headline&&e.url&&e.firstPublished}));return p&&p.length?r()("aside",{"data-testid":"InlineEditorsPicks",className:Hn},void 0,r()("h3",{className:qn},void 0,"Editors Picks"),r()("ul",{className:Gn},void 0,p.map((function(e){var t=e.headline,n=e.firstPublished,i=e.url;return r()("li",{className:Yn},t,r()("div",{className:Zn},void 0,r()("a",{href:i},void 0,r()("h4",{className:Vn},void 0,t),r()(Nn.a,{className:Wn},void 0,n))))})))):null};Jn.displayName="InlineEditorsPicks";var Kn,$n=Object(qt.a)(Jn),Qn=n("axlb"),ei=Ze()((function(){return Promise.resolve().then(n.bind(null,"5rKh"))}),{loadableGenerated:{webpack:function(){return["5rKh"]},modules:["shared/Storylines/LatestUpdatesBlock"]}}),ti=Ze()((function(){return Promise.resolve().then(n.bind(null,"zl8J"))}),{loadableGenerated:{webpack:function(){return["zl8J"]},modules:["shared/Storylines/ContextBlock"]}}),ni=Ze()((function(){return Promise.resolve().then(n.bind(null,"iDRl"))}),{loadableGenerated:{webpack:function(){return["iDRl"]},modules:["shared/Storylines/StorylinesTopLinks"]}}),ii=Ze()((function(){return Promise.resolve().then(n.bind(null,"Y0cC"))}),{loadableGenerated:{webpack:function(){return["Y0cC"]},modules:["shared/Storylines/QuoteBlock"]}}),ri=Object(M.css)("margin-bottom:1em;"),ai=new Map([[Xe.STORYLINE_BLOCKS.toplinks,ni],[Xe.STORYLINE_BLOCKS.context,ti],[Xe.STORYLINE_BLOCKS.quote,ii],[Xe.LATEST_UPDATES_BLOCK,ei]]);function oi(e){var t,n,i,a,o,s,l,c,u=e.article,d=e.composableBlocks,p=u.timesTags,f=!Object(Xe.hideInlineModule)(p),m=[],h=!1;Object(Xe.canPlaceBlock)(d,Xe.STORYLINE_BLOCKS.context,f)?m.push({id:"ContextBlock",minPercent:Ke.inlineRegions[$e.a.MAIN_CONTENT_1].minPercent,maxPercent:Ke.inlineRegions[$e.a.MAIN_CONTENT_1].maxPercent,component:r()(ti,{storyline:u.storylines[0].storyline,parentUri:u.uri,parentUrl:u.url,ruleName:u.storylines[0].ruleName,testName:u.storylines[0].testName,pageType:u.__typename,region:$e.a.MAIN_CONTENT_1,isOpinion:Object(An.isOpinion)(null===(n=u.section)||void 0===n?void 0:n.name)})}):Object(Xe.canPlaceBlock)(d,Xe.STORYLINE_BLOCKS.toplinks,f)?(m.push({id:"TopLinksBlock",minPercent:Ke.inlineRegions[$e.a.MAIN_CONTENT_1].minPercent,maxPercent:Ke.inlineRegions[$e.a.MAIN_CONTENT_1].maxPercent,component:r()(ni,{pageType:u.__typename,parentUri:u.uri,parentUrl:u.url,region:$e.a.MAIN_CONTENT_1,ruleName:u.storylines[0].ruleName,storyline:u.storylines[0].storyline,testName:u.storylines[0].testName})}),h=!0):Object(Qn.b)($e.a.MAIN_CONTENT_1,u)&&m.push({id:"NYT_".concat($e.a.MAIN_CONTENT_1,"_REGION"),minPercent:Ke.inlineRegions[$e.a.MAIN_CONTENT_1].minPercent,maxPercent:Ke.inlineRegions[$e.a.MAIN_CONTENT_1].maxPercent,component:r()(Qn.a,{region:$e.a.MAIN_CONTENT_1,associatedAssets:null==u?void 0:u.associatedAssets,className:ri})});Object(Xe.canPlaceBlock)(d,Xe.LATEST_UPDATES_BLOCK,f)?m.push({id:"STYLN_LATEST_UPDATES",minPercent:Ke.inlineRegions[$e.a.MAIN_CONTENT_2].minPercent,maxPercent:Ke.inlineRegions[$e.a.MAIN_CONTENT_2].maxPercent,component:r()(ei,{storyline:null==u||null===(i=u.storylines)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.storyline,parentUri:null==u?void 0:u.uri,testName:null==u||null===(o=u.storylines)||void 0===o||null===(s=o[0])||void 0===s?void 0:s.testName,ruleName:null==u||null===(l=u.storylines)||void 0===l||null===(c=l[0])||void 0===c?void 0:c.ruleName,pageType:null==u?void 0:u.__typename,region:$e.a.MAIN_CONTENT_2})}):Object(Qn.b)($e.a.MAIN_CONTENT_2,u)&&m.push({id:"NYT_".concat($e.a.MAIN_CONTENT_2,"_REGION"),minPercent:Ke.inlineRegions[$e.a.MAIN_CONTENT_2].minPercent,maxPercent:Ke.inlineRegions[$e.a.MAIN_CONTENT_2].maxPercent,component:r()(Qn.a,{region:$e.a.MAIN_CONTENT_2,associatedAssets:null==u?void 0:u.associatedAssets,className:ri})});return Object(Xe.canPlaceBlock)(d,Xe.STORYLINE_BLOCKS.quote,f,Object(An.isOpinion)(null==u||null===(t=u.section)||void 0===t?void 0:t.name))?m.push({id:"QuoteBlock",minPercent:Ke.inlineRegions[$e.a.MAIN_CONTENT_3].minPercent,maxPercent:Ke.inlineRegions[$e.a.MAIN_CONTENT_3].maxPercent,component:r()(ii,{pageType:u.__typename,parentUri:u.uri,parentUrl:u.url,region:$e.a.MAIN_CONTENT_3,ruleName:u.storylines[0].ruleName,storyline:u.storylines[0].storyline})}):Object(Xe.canPlaceBlock)(d,Xe.STORYLINE_BLOCKS.toplinks,f,!h)?m.push({id:"TopLinksBlock",minPercent:Ke.inlineRegions[$e.a.MAIN_CONTENT_3].minPercent,maxPercent:Ke.inlineRegions[$e.a.MAIN_CONTENT_3].maxPercent,component:r()(ni,{pageType:u.__typename,parentUri:u.uri,parentUrl:u.url,region:$e.a.MAIN_CONTENT_3,ruleName:u.storylines[0].ruleName,storyline:u.storylines[0].storyline,testName:u.storylines[0].testName})}):Object(Qn.b)($e.a.MAIN_CONTENT_3,u)&&m.push({id:"NYT_".concat($e.a.MAIN_CONTENT_3,"_REGION"),minPercent:Ke.inlineRegions[$e.a.MAIN_CONTENT_3].minPercent,maxPercent:Ke.inlineRegions[$e.a.MAIN_CONTENT_3].maxPercent,component:r()(Qn.a,{region:$e.a.MAIN_CONTENT_3,associatedAssets:null==u?void 0:u.associatedAssets,className:ri})}),m}var si=Xe.storyPageTests.ONE_MODULE_TEST,li=[Xe.STORYLINE_BLOCKS.toplinks,Xe.STORYLINE_BLOCKS.context,Xe.STORYLINE_BLOCKS.quote];var ci,ui,di=function(e){var t,n=e.article,i=e.isLivePost,a=Object(h.a)(),s=Object(b.a)().user,l=Object(F.a)().isCrawler,c=Object(d.useState)([]),u=o()(c,2),p=u[0],f=u[1],m=Object(d.useState)(null),g=o()(m,2),y=g[0],v=g[1],_=Object(d.useMemo)((function(){return Object(Xe.getComposableStorylineBlocks)({article:n,inlineBlocks:li,isLivePost:i})}),[n,i]);return Object(d.useEffect)((function(){var e=Math.floor(Math.random()*_.length);v(e)}),[_.length]),Object(d.useEffect)((function(){var e,i=n.wordCount>=550,o={id:"ANON_EDPICKS",minPercent:.3,maxPercent:.7,component:Kn||(Kn=r()($n,{}))};if(!l&&Object(Ln.d)(s)){var c=[],u=a[si.name];if(!u||u.allocated){var d=null==u?void 0:u.variant;[jn.c.middleGenericVariant.name,jn.c.middleSpecificVariant.name].includes(null==a||null===(e=a[jn.c.name])||void 0===e?void 0:e.variant)&&Object(jn.a)(n)&&c.push({id:"editorial_sub_messaging",minPercent:.1,maxPercent:.9,component:t||(t=r()(jn.b,{asset:n}))}),i&&(d===si.variant||Object(An.isOpinion)(n.section)?c.push.apply(c,de()(function(e){var t=e.article,n=e.composableBlocks,i=e.randomNumber,a=t.timesTags,o=!Object(Xe.hideInlineModule)(a),s=[];if(n.length&&o){var l=n[i],c=ai.get(l);s.push({id:"InlineStorylineBlock",minPercent:.2,maxPercent:.8,component:function(e){var n,i=e.region;return r()(c,{isOpinion:Object(An.isOpinion)(null===(n=t.section)||void 0===n?void 0:n.name),pageType:t.__typename,parentUri:t.uri,parentUrl:t.url,region:i,ruleName:t.storylines[0].ruleName,storyline:t.storylines[0].storyline,testName:t.storylines[0].testName})}})}return Object.keys(Ke.inlineRegions).forEach((function(e){Object(Qn.b)(e,t)&&s.push({id:"NYT_".concat(e,"_REGION"),minPercent:Ke.inlineRegions[e].minPercent,maxPercent:Ke.inlineRegions[e].maxPercent,component:r()(Qn.a,{associatedAssets:null==t?void 0:t.associatedAssets,className:ri,region:e})})})),s}({article:n,composableBlocks:_,randomNumber:y}))):c.push.apply(c,de()(oi({article:n,composableBlocks:_})))),c.push(o),f(c)}}else f([].concat(de()(i?oi({article:n,composableBlocks:_}):[]),[o]))}),[a,n,_,l,y,s]),p},pi=n("AtQq"),fi=n("qCfC"),mi=n("i9lO"),hi=n("pVYW"),gi=n("OLAn"),yi=n("JJ2H"),bi=n("d3NK"),_i=n("Kjui"),wi=n("Yh38"),xi=n("Q3jP"),ki=n("3sI7"),Oi=ki.a,Ei=ki.b,Ti=function(e){var t,n,i,a,s=e.HeaderFullBleed,c=e.article,u=e.data,p=e.sectionStyle,f=e.fullBleedCaptionContent,m=e.fullBleedCredit,h=Object(d.useState)(!0),g=o()(h,2),y=g[0],b=g[1],_=Object(v.useTracking)({module:{region:"header"}}).Track,w=c.lastMajorModification,x=c.lastModified,k=null!==(t=null==c||null===(n=c.section)||void 0===n?void 0:n.name)&&void 0!==t?t:"none",O=function(){b(!1)},E=function(){b(!0)};return r()(P.Route,{render:function(e){var t,n,o,d=e.staticContext;return d&&(d.edge=te.a),r()(_,{},void 0,r()("div",{id:"fullBleedHeaderContent"},void 0,r()(s,{data:u,collections:c.collections,lastModified:x}),r()(Ei,{},void 0,r()("p",{className:Object(M.cx)(ki.d,l()({},ki.c,"RIGHT"===u.alignment)),onMouseEnter:O,onMouseLeave:E,"aria-hidden":y},void 0,r()("span",{className:Object(M.cx)(ki.e,p),dangerouslySetInnerHTML:{__html:f}}),r()(hi.b,{},void 0,r()("span",{dangerouslySetInnerHTML:{__html:m||""}})))),ci||(ci=r()(bi.a,{id:"sponsor",sponsorAdFullBleed:!0})),"opinion"!==k&&(i||(i=r()(Cn.a,{asset:c}))),r()(Oi,{},void 0,r()(_i.b,{share:c,position:yi.a.HEADER,className:p,isOpinion:!1,hasMedia:!1}),(null==(t=u.byline)||null===(n=t.bylines[0])||void 0===n||null===(o=n.creators)||void 0===o?void 0:o.length)>0&&r()(wi.a,{article:c,timestamp:u.timestampBlock,lastMajorModification:w,data:u.byline,headerPresent:"FullBleed"}),c.translations&&r()(gi.a,{translations:c.translations})),c.reviewItems&&c.reviewItems.length>0&&(a||(a=r()(xi.a,{article:c})))))}})};Ti.displayName="HeaderFullBleedWrapper",Ti.fragments={article:m()(ui||(ui=u()(["\n    fragment HeaderFullBleedWrapper_article on Article {\n      id\n      ...ReviewHeader_article\n      ...BrandBar_asset\n      ...BylineBlock_article\n      translations {\n        ...TranslationLinks_translations\n      }\n      ...ShareToolbar_share\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n  "])),xi.a.fragments.article,Cn.a.fragments.asset,wi.a.fragments.article,gi.a.fragments.translations,_i.b.fragments.share)},Ti.defaultProps={article:{},fullBleedCredit:"",fullBleedCaptionContent:"",sectionStyle:"",data:{},HeaderFullBleed:null};var Ci,Si=Ti,Pi=n("7GK/"),Mi=n.n(Pi),Ii=n("510Z"),Ai=n("WXMI"),ji=n("3Rk2"),Li=n.n(ji)()([A.a.breakpoint.small,A.a.breakpoint.medium,A.a.breakpoint.large]),Ri=Object(M.css)("border-top:1px solid #e8e8e8;border-bottom:1px solid #e8e8e8;margin-bottom:",A.a.font.size(20),";padding-top:",A.a.font.size(20),";padding-bottom:",A.a.font.size(10),";"),Ni=Object(M.css)("width:262px;",Li({margin:["0 auto ".concat(A.a.font.size(20),";"),"0 auto 0 0"]}),";"),Di=Object(M.css)("align-items:center;justify-content:center;",Li({display:["block","flex"]}),";"),Bi=Object(M.css)("margin-bottom:",A.a.font.size(30),";"),zi=Object(M.css)(Li({display:["block","none"]}),";"),Fi=Object(M.css)("color:",A.a.color.gray20,";font-weight:",A.a.font.weight.medium,";font-family:",A.a.font.franklinBase,";font-size:",A.a.font.size(14),";line-height:",A.a.font.size(20),";text-align:center;margin:0 auto;"),Ui=Object(M.css)("font-weight:",A.a.font.weight.medium,";font-family:",A.a.font.serifBase,";font-size:",A.a.font.size(20),";line-height:",A.a.font.size(30),";margin-bottom:",A.a.font.size(30),";",Li({fontSize:[A.a.font.size(18),A.a.font.size(18),A.a.font.size(20)],lineHeight:[A.a.font.size(25),A.a.font.size(25),A.a.font.size(30)]}),";"),Hi=Object(M.css)("font-size:",A.a.font.size(12),";line-height:",A.a.font.size(12),";font-weight:",A.a.font.weight.bold,";font-family:",A.a.font.franklinBase,";margin-left:",A.a.font.size(3),";display:inline-block;color:",A.a.color.blue20,";text-decoration:none;text-transform:uppercase;&:hover{text-decoration:underline;}"),Wi=Object(M.css)("position:relative;margin:0 ",A.a.font.size(8),";&::after{background:",A.a.color.gray50,";height:80%;content:'';margin:0 ",A.a.font.size(5),";position:absolute;right:",A.a.font.size(-6),";top:0;width:",A.a.font.size(1),";}"),qi=Object(M.css)("color:",A.a.color.blue20,";display:inline-block;&:hover{text-decoration:underline;}"),Vi=Object(M.css)("display:block;margin:0 auto ",A.a.font.size(10),";text-align:center;",Li({maxWidth:[A.a.font.size(270),A.a.font.size(400)]}),";"),Gi=Object(M.css)(A.a.button.action,";display:block;padding:",A.a.font.size(13),";margin-top:",A.a.font.size(20),";"),Yi=Object(M.css)("color:",A.a.color.gray20,";font-weight:",A.a.font.weight.medium,";font-family:",A.a.font.franklinBase,";font-size:",A.a.font.size(12),";line-height:",A.a.font.size(16),";text-align:center;margin:",A.a.font.size(20)," auto;",Li({maxWidth:[A.a.font.size(250),A.a.font.size(500)]}),";"),Zi=Object(M.css)("color:",A.a.color.gray45,";font-weight:",A.a.font.weight.medium,";font-family:",A.a.font.franklinBase,";font-size:",A.a.font.size(12),";line-height:",A.a.font.size(16),";text-align:center;margin:",A.a.font.size(20)," auto;"),Xi=Object(M.css)(Zi,";",Li({maxWidth:[A.a.font.size(200),A.a.font.size(500)]}),";"),Ji=Object(M.css)(Zi,";",Li({maxWidth:[A.a.font.size(250),A.a.font.size(500)]}),";"),Ki=Object(M.css)("color:",A.a.color.gray20,";font-weight:",A.a.font.weight.medium,";font-family:",A.a.font.serifBase,";font-size:",A.a.font.size(17),";line-height:",A.a.font.size(26),";font-style:italic;"),$i=Object(M.css)(Ki,";font-weight:",A.a.font.weight.bold,";margin-top:",A.a.font.size(20),";"),Qi=Object(M.css)(Ki,";margin-bottom:",A.a.font.size(20),";a{color:",A.a.color.blue20,";text-decoration:underline;}"),er=Object(M.css)(".",Xi,"{max-width:",A.a.font.size(200),";}.",Ji,"{max-width:",A.a.font.size(250),";}.",Yi,"{max-width:",A.a.font.size(250),";}.",Vi,"{max-width:",A.a.font.size(270),";}"),tr=function(e){var t=e.asset,n=t.archiveProperties,i=t.printInformation,a=e.hasStoryBody,o=Object(re.a)(),s=o.meterReady,l=o.loggedIn,c=o.granted,u=o.grantReason;if(!n||!i)return null;var d,p,f=(d=i.publicationDate,{isBefore2002:(p=Mi()(d).format("YYYY"))<=2002,isBefore1996:p<=1996}),m=!s||l&&c&&["SUBSCRIBER","IP","REFERRER"].includes(u),h=n&&n.thumbnails&&n.thumbnails.length&&n.thumbnails[1].url,g=+i.page,y=(n||{}).timesMachineUrl,v=(i||{}).publicationDate;return y&&v&&f.isBefore2002?r()("div",{className:Lt.b.layout.feature},void 0,r()("div",{className:Ri},void 0,r()("div",{className:Object(M.cx)(Di,h&&Bi)},void 0,h&&r()("div",{className:Ni},void 0,r()(Ii.a,{alt:i.headline,defaultCropSrc:n.thumbnails[1].url,credit:"The New York Times Archives"})),r()("div",{className:h&&er},void 0,r()("div",{className:Fi},void 0,"See the article in its original context from ",h&&(Ci||(Ci=r()("br",{}))),!h&&r()("br",{className:zi}),Object(Ne.getFullDate)(i.publicationDate),","," ",i.section&&r()("span",{},void 0,"Section ",i.section,",")," Page"," ",g,r()("span",{className:Wi}),r()("a",{className:qi,href:"https://store.nytimes.com/collections/new-york-times-page-reprints?utm_source=nytimes&utm_medium=article-page&utm_campaign=reprints"},void 0,"Buy Reprints")),!m&&r()("div",{className:Yi},void 0,"New York Times subscribers* enjoy full access to TimesMachineview over 150 years of New York Times journalism, as it originally appeared."),m&&r()("div",{className:Vi},void 0,r()("a",{className:Gi,href:y.replace("http://","https://"),type:"button",rel:"noopener noreferrer",target:"_blank"},void 0,"View on timesmachine")),!m&&r()("div",{className:Vi},void 0,r()("a",{className:Gi,href:"https://www.nytimes.com/subscription/multiproduct/lp8HYKU.html?campaignId=4KKHF",type:"button"},void 0,Ai.c)),m&&r()("div",{className:Ji},void 0,"TimesMachine is an exclusive benefit for home delivery and digital subscribers."),!m&&r()("div",{className:Xi},void 0,"*Does not include Crossword-only or Cooking-only subscribers."))),f.isBefore1996&&(a?r()("div",{className:Ki},void 0,r()("div",{className:$i},void 0,"About the Archive"),r()("div",{className:Qi},void 0,"This is a digitized version of an article from The Timess print archive, before the start of online publication in 1996. To preserve these articles as they originally appeared, The Times does not alter, edit or update them."),r()("div",{className:Qi},void 0,"Occasionally the digitization process introduces transcription errors or other problems; we are continuing to work to improve these archived versions.")):r()("div",{className:Qi},void 0,"Full text is unavailable for this digitized archive article. Subscribers may view the full text of this article in its original form through TimesMachine.")))):null};tr.defaultProps={asset:{archiveProperties:{timesMachineUrl:""}},hasStoryBody:!1};var nr=tr,ir=function(e){var t=e.asset.archiveProperties;return t?r()("div",{className:Lt.b.layout.feature},void 0,t.lede&&r()("p",{className:Ui},void 0,t.lede," ",r()("a",{href:t.timesMachineUrl.replace("http://","https://"),className:Hi,target:"_blank",rel:"noopener noreferrer"},void 0,"View Full Article in Timesmachine "))):null};ir.defaultProps={asset:{archiveProperties:{lede:void 0,timesMachineUrl:void 0}}};var rr=ir,ar=n("ziu7"),or=n("zIxd"),sr=n("VUHb"),lr=[],cr=["news","feature"];function ur(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ur(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ur(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pr,fr=function(e){var t=e.asset,n=e.truncated,i=e.dropzoneContents,r=e.theme,a=e.meter,o=e.appContext,s=e.optimisticallyTruncated,l=e.abra,c=t.sprinkledBody.content,u=[],d=[],p=0,f=0,m=0,h=!1,g=0,y="",v=!1,b=0,_=!1,w=!1;if(n&&(w=n),null!=a&&a.showGateway&&"PAYWALL"===(null==a?void 0:a.gatewayType)&&(w=bn.d),null!=a&&a.showGateway&&"REGIWALL"===(null==a?void 0:a.gatewayType)&&(w=bn.d),null!=a&&a.showGateway&&null!=a&&a.gatewayIsEmbedded&&null!=a&&a.gatewayDropzone&&(w={dropzone:a.gatewayDropzone}),s&&(null==a||!a.granted)){var x,k=Object(bn.f)(l);w={dropzone:null!==(x=null==o?void 0:o.optimisticTruncationDropzone)&&void 0!==x?x:k.dropzone}}var O=Object(tt.hideEmailSignupBlock)(t);c.forEach((function(e,n){var o,s,l=Math.floor(.7*(t.sprinkledBody.content.length-m));if("EmailSignupBlock"===e.__typename&&O||"CapsuleBlock"===e.__typename&&Object(ar.e)(e)||"Dropzone"===e.__typename&&null!=r&&r.isShortForm)return m+=1,null;"Dropzone"===e.__typename&&(p+=1);var x="Region"===(null==i||null===(o=i[null==e?void 0:e.index])||void 0===o||null===(s=o.type)||void 0===s?void 0:s.displayName);if(Object(_n.d)(e)||x){if(Object(bn.h)({shouldTruncate:w,minimumTruncation:l,elementCounter:f,dropzoneCounter:p,allowShortTruncate:null==a?void 0:a.gatewayIsEmbedded})&&"InteractiveBlock"!==e.__typename)return _=Object(bn.g)(_,p,w.dropzone),m+=1,null;if(Object(bn.h)({shouldTruncate:w,minimumTruncation:l,elementCounter:f,dropzoneCounter:p,allowShortTruncate:null==a?void 0:a.gatewayIsEmbedded})&&"InteractiveBlock"===e.__typename&&e.media&&e.media.compatibility&&"inline"!==e.media.compatibility.toLowerCase())return _=Object(bn.g)(_,p,w.dropzone),m+=1,null;if("InteractiveBlock"===e.__typename&&e.media&&e.media.slug&&"string"==typeof e.media.slug&&0===e.media.slug.toLowerCase().indexOf("newsletter-signup-"))return m+=1,null;d.length&&u.push(d),u.push({component:pi.a[e.__typename],name:e.__typename,data:dr({},e),key:n,heading1Rendered:h,truncated:w,elementCounter:f,dropzoneCounter:p,minimumTruncation:l}),f+=1,d=[]}else{var k;if(Object(bn.h)({shouldTruncate:w,minimumTruncation:l,elementCounter:f,dropzoneCounter:p,allowShortTruncate:null==a?void 0:a.gatewayIsEmbedded}))return _=Object(bn.g)(_,p,w.dropzone),m+=1,null;var E=pi.a[e.__typename];if(!E||"Dropzone"===e.__typename&&!function(e){return!(!e.adsMobile&&!e.adsDesktop)||(!!lr.includes(e.index)||!(!i||!i[e.index.toString()]))}(e))return null;y=null===(k=c[n-1])||void 0===k?void 0:k.__typename,v=["ParagraphBlock","SummaryBlock"].includes(e.__typename)&&"Heading2Block"===y,"ParagraphBlock"===e.__typename&&(g+=1),null!=r&&r.isShortForm&&"Heading3Block"===e.__typename&&(b+=1),d.push({component:E,name:e.__typename,data:dr({},e),key:n,heading1Rendered:h,isFirstParagraph:1===g,isFirstTextAfterHeading2Block:v,shortFormHeadersCount:b}),f+=1}return"Heading1Block"!==e.__typename&&"HeaderFullBleedHorizontalBlock"!==e.__typename&&"HeaderFullBleedVerticalBlock"!==e.__typename&&"HeaderBasicBlock"!==e.__typename&&"HeaderLegacyBlock"!==e.__typename&&"HeaderLiveBriefingBlock"!==e.__typename||(h=!0),m+=1,null}));var E=(null==a?void 0:a.showGateway)&&!1!==w&&"article"===t.type,T=s&&!(null!=a&&a.meterReady)&&!1!==w&&"article"===t.type;return d.length?(T&&d.push({component:or.a,name:"Optimistic",key:"Optimistic",dropzoneCounter:p,fallbackTruncation:_}),E&&d.push({component:sr.a,name:"ReadersModeGateway",key:"ReadersModeGateway"}),u.push(d),u):(T&&u.push({component:or.a,name:"Optimistic",key:"Optimistic",dropzoneCounter:p,fallbackTruncation:_}),E&&u.push({component:sr.a,name:"ReadersModeGateway",key:"ReadersModeGateway"}),u)};function mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mr(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gr=Ze()((function(){return n.e(103).then(n.bind(null,"xnQu"))}),{loadableGenerated:{webpack:function(){return["xnQu"]},modules:["./LivePostHeader"]}}),yr=Ze()((function(){return n.e(80).then(n.bind(null,"Mz8R"))}),{loadableGenerated:{webpack:function(){return["Mz8R"]},modules:["./ExplainerPostHeader"]}});pi.a.CapsuleBlock=fi.a;var vr=function(e){var t=!0;if(1===e.length){var n=e[0];"Dropzone"!==n.name||n.adsDesktop&&n.adsMobile&&n.placedMidtermPackage&&n.placedPackage||(t=!1)}return t};function br(e){var t,n,i,a,o,s,c,u,f,m,g=e.asset,y=e.truncated,v=e.dismissTruncator,_=e.companionColumnZones,w=e.addZone,x=e.isLivePost,k=e.isExplainerPost,O=e.welcomeBannerSubsDZComponent,E=e.welcomeBannerRegiDZComponent,T=e.optimisticallyTruncated,C=Object(M.useTheme)(),S=Object(St.a)(),P=Object(re.a)(),I=Object(b.a)().user,A=Object(h.a)(),j=Object(F.a)(),L="podcasts"===(null==g||null===(t=g.section)||void 0===t?void 0:t.name),R=Object(d.useMemo)((function(){return L?[]:null==g?void 0:g.storylines}),[null==g?void 0:g.storylines,L]),N=Object(At.a)({name:"postTruncationArticle"});Object(d.useEffect)((function(){var e,t;null!=A&&null!==(e=A[bn.a.test])&&void 0!==e&&e.allocated&&Object(ce.e)(bn.a.test),null!=A&&null!==(t=A[bn.b.test])&&void 0!==t&&t.allocated&&Object(ce.e)(bn.b.test)}),[A]),Object(d.useEffect)((function(){null!=P&&P.granted&&T&&N.trackImpression()}),[P,T,N]),It(g.uri,g.bylines);var D,B="",z=0,U=-1,H=g.tone.toLowerCase(),W=cr.includes(H)?H:"news",q=g.section&&g.section.name||"",V=g.subsection&&g.subsection.name||"",G=Object(ar.c)(q,V),Y=G?G.toLowerCase():"",Z=-1!==["t-magazine","magazine"].indexOf(Y)?Y:W,X=g.sprinkledBody.content||[],J="InteractiveBlock"===(null===(n=X[0])||void 0===n?void 0:n.__typename),K=Object(ar.a)(X),$=Object(ar.b)(K,"legacyHtmlCaption"),Q=Object(ar.b)(K,"credit");if(K&&"VideoBlock"===K.__typename){var ee=Object(ar.b)(K,"bylines");if($=Object(ar.b)(K,"summary"),ee&&ee.length){var te=ee.find((function(e){return e.renderedRepresentation}));Q=te&&te.renderedRepresentation}}var ne=Object(_n.a)(X),ie=ne&&ne.__typename&&["HeaderBasicBlock","HeaderLegacyBlock"].includes(ne.__typename)&&ne.ledeMedia&&"ImageBlock"===ne.ledeMedia.__typename;ie&&(z=1);var ae=g&&g.reviewItems&&g.reviewItems.length>0,oe=di({article:g,isLivePost:x}),se=Tn()({body:g.sprinkledBody,dropzoneConfigsList:oe,reservedIndices:lr}),le=fr({asset:g,truncated:y,dropzoneContents:se,theme:C,meter:P,appContext:j,optimisticallyTruncated:T,abra:A}),ue=le.find((function(e){if(e&&"UnstructuredBlock"===e.name&&e.data){var t=e.data;if("ExperimentalBlock_Ask"===(t=JSON.parse(t.data)).type)return!0}return!1})),de=Object(ar.d)(le[0]),pe=null===(i=g.associatedNewsletter)||void 0===i||null===(a=i.newsletterProduct)||void 0===a?void 0:a.newsletterProductData,fe=ne&&("HeaderFullBleedHorizontalBlock"===ne.__typename||"HeaderFullBleedVerticalBlock"===ne.__typename),me=ne&&fe?Si:pi.a[ne.__typename];!x||k||pe||"HeaderBasicBlock"!==ne.__typename||(me=gr),k&&(me=yr);var he=Object(Bt.b)(hr(hr({},g),{},{storylines:R}))&&!fe&&!k&&!x&&!J,ge={article:g,truncated:y,className:!fe&&Lt.b.layout[Z],HeaderFullBleed:fe&&pi.a[ne.__typename],sectionStyle:G,fullBleedCaptionContent:$,fullBleedCredit:Q,showDatelessTimestamp:S},ye={};ae&&["HeaderLegacyBlock","HeaderFullBleedHorizontalBlock","HeaderFullBleedVerticalBlock","HeaderBasicBlock"].includes(ne.__typename)&&(ye={dismissTruncator:v});var ve=Object(M.cx)("meteredContent",xn.a,l()({},xn.b,de||"guide"===(null==C?void 0:C.treatment)?null:!me)),be=Object(On.d)(g);if(be){var _e=le.findIndex((function(e){var t;return"UnstructuredBlock"===(null==e?void 0:e.name)&&"ExperimentalBlock_BulletBriefing"===(null==e||null===(t=e.data)||void 0===t?void 0:t.dataType)}));_e>-1&&le.splice(_e+1,0,{name:"CoronavirusBriefingAlertSignup"})}var we=!!pe&&!Object(tt.hasEditorPlacedSignupBlock)(g),xe=0;return p.a.createElement(p.a.Fragment,null,r()(Rt,{meter:P,optimisticallyTruncated:T}),he&&r()("div",{className:Zt},void 0,r()(vn,{storyline:null==g||null===(o=g.storylines)||void 0===o||null===(s=o[0])||void 0===s?void 0:s.storyline,uriOfActiveMenuLink:null==g?void 0:g.uri,parentUri:null==g?void 0:g.uri,article:g,pageType:g.__typename,ruleName:null==g||null===(c=g.storylines)||void 0===c||null===(u=c[0])||void 0===u?void 0:u.ruleName,testName:null==g||null===(f=g.storylines)||void 0===f||null===(m=f[0])||void 0===m?void 0:m.testName,region:$e.a.ABOVE_MAIN_CONTENT,componentLocation:"inline"})),!de&&me&&p.a.createElement(me,hr(hr(hr({},ge),ye),{},{data:hr({},le.shift().data)})),r()("section",{name:"articleBody",className:ve},void 0,r()(nr,{asset:g,hasStoryBody:le.length>0}),!le.length&&r()(rr,{asset:g}),!me&&r()(Cn.a,{asset:g}),we&&p.a.createElement(pi.a.EmailSignupBlock,hr(hr({},Object(tt.createFallbackEmailSignupProps)(pe)),{},{isTopOfStory:!0})),le.map((function(e,t){var n,i;D=z>0,"ImageBlock"===e.name&&(z+=1);var a={elementCount:e.elementCounter,dropzoneCount:e.dropzoneCounter,minimumTruncation:e.minimumTruncation,collections:g.collections,isFirstElement:Object(_n.c)(ne,de?t+1:t),lazyLoad:D,user:I,article:g,truncated:null!==(n=e.truncated)&&void 0!==n?n:y,articleId:g.sourceId,askExperimentalBlock:ue,dropzoneContents:se,adSensitivity:null===(i=g.advertisingProperties)||void 0===i?void 0:i.sensitivity,supplementalCount:U,welcomeBannerSubsDZComponent:O,welcomeBannerRegiDZComponent:E,fallbackTruncation:e.fallbackTruncation},o=e.data&&e.data.size;return Array.isArray(e)||o||!Object(_n.d)(e)||(a.className=Object(M.cx)(Lt.b.layout[Z],l()({},Lt.b.layout.largeWidthClass,"CardDeckBlock"===e.name))),Array.isArray(e)&&vr(e)?(U+=1,e.findIndex((function(e){return"Heading2Block"===e.name}))>-1&&(a.region="".concat(xe),xe+=1),r()(kn.a,{defaultOpts:a,supplementalCount:U,addZone:w,metadata:_[U],componentTypeMap:pi.a,embeddedComponentTypeMap:pi.c,isOldLiveBriefing:be},"StoryBodyCompanionColumn-".concat(U),e)):vr(e)?"ClaimReviewBlock"===e.name?(B=pi.a[e.name],p.a.createElement(B,hr(hr({},a),{},{article:g,key:t.toString()}))):("ImageBlock"===e.name?(a.imageNumber=z+ie,a.usePhotoViewer=!0,a.useMobileCrop=!0):"Heading1Block"===e.name?a.replaceHeading1=e.heading1Rendered:"InteractiveBlock"===e.name&&(a.isAboveH1=0===t&&de),(B=pi.a[e.name])?(a.key=e.key,a.data=e.data,e.key>wn.b&&pi.c[e.name]?r()(jt.a,{offset:{bottom:-500},partialVisibility:!0,scrollCheck:!0,scrollThrottle:wn.c,intervalCheck:!0,intervalDelay:wn.a},t.toString(),p.a.createElement(B,a)):r()("div",{},"blocksContianer-".concat(t.toString()),p.a.createElement(B,hr({},a)))):null):r()(d.Fragment,{},t.toString())}))))}br.fragments={article:m()(pr||(pr=u()(["\n    fragment OakBody_article on Article {\n      id\n      slug # STORYLINES PROTOTYPE. REMOVE BY H2/20\n      newsStatus\n      sourcePublisher\n      timesTags @filterEmpty {\n        displayName\n      }\n      sprinkledBody {\n        ...DocumentBlock_data\n        # in addition to the document block, query for capsules.\n        content @filterEmpty {\n          ...CapsuleBlock_data\n        }\n      }\n      ...HeaderMultimediaBlock_article\n      ...HeaderBasic_article\n      ...HeaderLegacyBlock_article\n      ...HeaderFullBleedWrapper_article\n      ...HeaderLiveBriefing_article\n      ...ClaimReviewBlock_article\n      ...UnstructuredBlock_article\n      ...BrandBar_asset\n      ...LatestUpdatesBlock_storyline\n      ...ContextBlock_storyline\n      ...StorylinesTopLinks_storyline\n      ...QuoteBlock_storyline\n      ...useTrackEnhancedByline_article\n      ...EmailSignupBlock_article\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n  "])),pi.a.HeaderBasicBlock.fragments.article,pi.a.HeaderLegacyBlock.fragments.article,pi.a.HeaderLiveBriefingBlock.fragments.article,pi.a.ClaimReviewBlock.fragments.article,pi.a.UnstructuredBlock.fragments.article,pi.a.EmailSignupBlock.fragments.article,mi.a.fragments.article,Si.fragments.article,fi.a.fragments.data,pi.b,Cn.a.fragments.asset,Sn.default.fragments.storyline,Pn.default.fragments.storyline,In.default.fragments.storyline,Mn.default.fragments.storyline,It.fragments.article)},br.defaultProps={truncated:void 0,dismissTruncator:void 0,companionColumnZones:void 0,addZone:void 0,isLivePost:!1,isExplainerPost:!1,welcomeBannerSubsDZComponent:null,welcomeBannerRegiDZComponent:null,optimisticallyTruncated:!1};var _r=br,wr=n("solT"),xr=n("IHYJ"),kr=n("boCj"),Or=n("Vfu1"),Er=Object(M.css)("background-color:",A.a.color.white,";"),Tr=Object(M.css)("display:flex;border-top:1px solid ",A.a.color.black,";justify-content:space-between;"),Cr=Object(M.css)("margin-bottom:12px;"),Sr=Object(M.css)("padding:17px 20px 0;background-color:white;box-sizing:border-box;font-family:",A.a.font.franklinBase,";font-weight:",A.a.font.weight.bold,";font-size:",A.a.font.size(14),";line-height:",A.a.font.size(18),";max-width:851.25px;",A.a.breakpoint.medium,"{padding-right:0;padding-left:0;font-size:",A.a.font.size(16),";line-height:",A.a.font.size(22),";}a::after{content:'';margin-left:5px;}"),Pr=Object(M.css)("display:inline-block;font-size:",A.a.font.size(14),";line-height:",A.a.font.size(18),";max-width:600px;font-weight:",A.a.font.weight.medium,";font-family:",A.a.font.franklinBase,";margin-top:0;padding:0 20px 15px;",A.a.breakpoint.medium,"{padding-left:0;}"),Mr=Object(M.css)("&:hover{text-decoration:underline;}");function Ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ir(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jr="1_elevate_series_collections",Lr=function(e){var t,n,i=e.articles,a=e.collectionUrl,o=e.collectionName,s=e.collectionTagline,c=e.sectionLabel,u=Object(h.a)(),d=null==u||null===(t=u.STYLN_elevate_series_collections)||void 0===t?void 0:t.allocated,p=null==u||null===(n=u.STYLN_elevate_series_collections)||void 0===n?void 0:n.variant,f=Object(v.useTracking)(),m=Object(U.a)().deviceType;if(!d&&!p)return null;var g,y,b,_={pageType:"Article",collectionName:o,region:"footer",module:"seriesCollection_Band",label:o,name:"STYLN_elevate_series_collections",template:""},w={event:"impression",module:{region:"footer",label:jr,name:"STYLN_elevate_series_collections",context:"seriesCollection_Band"}};return r()(kr.InView,{className:Er,onChange:function(e){e&&f.trackEvent(w)},triggerOnce:!0},void 0,r()("section",{className:Object(M.cx)(Tr,l()({},Cr,!s))},void 0,r()("h2",{className:Sr,id:c},void 0,a?r()("a",{href:a},void 0,r()("span",{className:Mr},void 0,o)):r()("span",{className:Mr},void 0,o))),s&&r()("span",{className:Pr,dangerouslySetInnerHTML:{__html:s}}),r()(Or.a,{assetList:(y=i,b="smartphone"===m?null===(g=y)||void 0===g?void 0:g.length:4,(y=y.map((function(e){return function(e){var t,n=(null==e?void 0:e.node).promotionalMedia,i=(null==n?void 0:n.spanImageCrops)||(null==n||null===(t=n.imageWithCreditPromotionalMedia)||void 0===t?void 0:t.spanImageCrops);return e.node.promotionalMedia.__typename="Image",e.node.promotionalMedia.crops||(e.node.promotionalMedia=Ar(Ar({},n),{},{crops:null==i?void 0:i.filter((function(e){return"MEDIUM_SQUARE"===(null==e?void 0:e.name)||"SMALL_SQUARE"===(null==e?void 0:e.name)}))})),e}(e)}))).slice(0,b)),assetTheme:"seriesCollection",trackingQueryParams:_}))};Lr.displayName="StorylinesSeriesCollectionTest",Lr.defaultProps={articles:[],collectionUrl:"",collectionName:"",collectionTagline:"",sectionLabel:""};var Rr=n("uktc"),Nr=n("clX+"),Dr=n("UAIX"),Br=n("PWuI"),zr=n("70M3"),Fr=n("+tSf"),Ur=n("RNdQ"),Hr=n("Pm+9"),Wr=n("+zxi"),qr=n("p1Tn"),Vr=n("MLAy"),Gr=n("l24T"),Yr=n("hKI/"),Zr=n.n(Yr),Xr=n("+8fM"),Jr=n.n(Xr),Kr=n("sn4R"),$r=Object(M.css)("top:0;left:0;width:100%;position:absolute;"),Qr=Object(M.css)("transition:all 0.1s ease-in-out;"),ea=Object(M.css)("opacity:0;z-index:-1;visibility:hidden;"),ta=Object(M.css)("opacity:1;z-index:900;visibility:visible;"),na=Object(M.css)("display:block;.SJ_xpn_storylines_desktop_cwv_0124-1_xpn_in_story &,.SJ_xpn_storylines_desktop_cwv_0124-2_xpn_hamburger &,.SJ_xpn_storylines_desktop_cwv_0124-3_xpn_top_only &{",A.a.breakpoint.mediumLarge,"{display:none;}}");function ia(e){var t,n,i,a,s,c,u,f,m,g=e.article,y=e.renderStorylineMenu,v=e.renderLiveBreakoutMenu,b="SJ_xpn_storylines_desktop_cwv_0124",_=Object(d.useRef)(),w=Object(d.useRef)(),x=Object(Je.getLiveAsset)(g),k=Object(Fr.c)(g),O=Object(h.a)(),E=x||{},T=E.live,C=E.active||T,S=Object(d.useState)(!1),P=o()(S,2),I=P[0],A=P[1],j=Object(d.useState)(ta),L=o()(j,2),R=L[0],N=L[1],D=Object(d.useState)(ea),B=o()(D,2),z=B[0],F=B[1],U=Object(d.useState)(!1),H=o()(U,2),W=H[0],q=H[1];Object(d.useEffect)((function(){var e,t,n,i=["1_xpn_in_story","2_xpn_hamburger","3_xpn_top_only"];O&&window.matchMedia("(min-width: 1024px)").matches&&null!=O&&null!==(e=O[b])&&void 0!==e&&e.allocated&&null!=O&&null!==(t=O[b])&&void 0!==t&&t.variant&&i.includes(null==O||null===(n=O[b])||void 0===n?void 0:n.variant)&&q(!0)}),[O]);var V=v&&!y,G=y&&!(v&&(C||k)),Y=!(G||V);return Object(d.useEffect)((function(){if(Y){var e=Zr()((function(){window.pageYOffset>=200&&!I?(A(!0),N(ea),F(ta)):window.pageYOffset<200&&I&&(A(!1),F(ea),N(ta))}),300,{trailing:!0});return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}}),[v,Y,I]),!W&&r()("div",{},void 0,!V&&p.a.createElement("div",{className:Object(M.cx)(l()({},R,Y),Qr,na),ref:_},r()(Bt.a,{storyline:null==g||null===(t=g.storylines)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.storyline,uriOfActiveMenuLink:null==g?void 0:g.uri,parentUri:null==g?void 0:g.uri,article:g,pageType:g.__typename,region:$e.a.TOP_BANNER,ruleName:null==g||null===(i=g.storylines)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.ruleName,testName:null==g||null===(s=g.storylines)||void 0===s||null===(c=s[0])||void 0===c?void 0:c.testName,showLiveBreakoutMenu:!0})),!G&&p.a.createElement("div",{className:Object(M.cx)((u={},l()(u,$r,Y),l()(u,z,Y),u),Qr),ref:w},r()("style",{dangerouslySetInnerHTML:{__html:"#masthead-section-label, #masthead-bar-one { display: none }"}}),r()(Jr.a,{HomepageLink:r()(Kr.a,{parentUri:null==g?void 0:g.uri,pageType:g.__typename,region:$e.a.TOP_BANNER,ruleName:null==g||null===(f=g.storylines)||void 0===f||null===(m=f[0])||void 0===m?void 0:m.ruleName}),showLiveBreakoutMenu:I,article:g})))}ia.displayName="StorytellingNav",ia.defaultProps={};var ra=ia,aa=n("rI8Z"),oa=n("GB3f"),sa=n("XnIf"),la=n("rWB7"),ca=n("XMyW"),ua=n("kBkf"),da=n("KRMk"),pa=n("gxa1"),fa=n("msCe");function ma(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ha(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ma(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ma(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ga=["1_xpn_in_story","2_xpn_hamburger","3_xpn_top_only"];function ya(){var e=Object(h.a)(),t=Object(la.b)(),n=Object(P.useLocation)(),i=Object(nt.b)(),a=Object(aa.b)(n),s=Object(v.useTracking)({eventData:{pagetype:"story"},module:{context:"standard",region:"masthead"}}),l="CANADA"===a?ca.caData:"INTL"===a?ua.internationalData:da.usData,c=Object(d.useState)(!1),u=o()(c,2),p=u[0],f=u[1],m=Object(d.useState)("masthead"),g=o()(m,2),y=g[0],b=g[1],_=Object(d.useState)(null),w=o()(_,2),x=w[0],k=w[1],O=Object(d.useRef)(null),E=Object(d.useRef)(null),T=Object(d.useRef)(!1),C=Object(d.useRef)({}),S=Object(d.useRef)({});Object(d.useEffect)((function(){var t,n,i;e&&null!=e&&null!==(t=e.SJ_xpn_storylines_desktop_cwv_0124)&&void 0!==t&&t.allocated&&null!=e&&null!==(n=e.SJ_xpn_storylines_desktop_cwv_0124)&&void 0!==n&&n.variant&&ga.includes(null==e||null===(i=e.SJ_xpn_storylines_desktop_cwv_0124)||void 0===i?void 0:i.variant)&&f(!0)}),[e]),Object(d.useEffect)((function(){b(i?"body":"masthead")}),[i]),Object(d.useEffect)((function(){var t,n,i,r=window&&window.matchMedia("(min-width: 1024px)").matches;!T.current&&e&&null!=e&&null!==(t=e.SJ_xpn_storylines_desktop_cwv_0124)&&void 0!==t&&t.allocated&&null!=e&&null!==(n=e.SJ_xpn_storylines_desktop_cwv_0124)&&void 0!==n&&n.variant&&ga.includes(null==e||null===(i=e.SJ_xpn_storylines_desktop_cwv_0124)||void 0===i?void 0:i.variant)&&r&&(T.current=!0,s.trackEvent({event:"impression",module:{name:"nested-navigation",label:"masthead-nested-navigation"}}))}),[e,s]);var I=function(e){return e.toLowerCase().split(" ").join("-")},A={event:"moduleInteraction",eventData:{trigger:"module",type:"click"},module:{name:"nested-navigation",label:"masthead-navigation",region:y}},j=function(e){window.location.assign(e)},L=function(e){O.current&&(clearTimeout(O.current),O.current=null);var t=e.currentTarget.dataset.navid,n=setTimeout((function(){k(t);var e={event:"impression",module:{name:I("".concat(t,"-nested-navigation")),label:I("".concat(t,"-masthead-nested-navigation")),region:y}};i||C.current[t]||(C.current[t]=!0,s.trackEvent(e)),i&&!S.current[t]&&(S.current[t]=!0,s.trackEvent(e))}),200);E.current=n},R=function(e){if("ArrowDown"===e.key||" "===e.key){e.preventDefault(),L(e);var t=e.currentTarget.nextSibling.getElementsByTagName("a")[0];setTimeout((function(){return t.focus()}),200)}else if("Enter"===e.key||"Control"===e.key||"Alt"===e.key||"Shift"===e.key){L(e);var n=e.currentTarget.nextSibling.getElementsByTagName("a")[0];setTimeout((function(){return n.focus()}),200)}};return r()("nav",{"aria-label":"Main"},void 0,r()("ul",{className:Object(M.cx)(pa.d,pa.c)},void 0,l.map((function(e){return r()("li",{className:pa.e,"data-testid":"nav-item-".concat(e.name),"data-navid":e.name,onMouseEnter:function(e){return L(e)},onMouseLeave:function(e){return function(){E.current&&(clearTimeout(E.current),E.current=null);var e=setTimeout((function(){k(null)}),400);O.current=e}()}},e.name,!p&&r()("span",{className:pa.f},void 0,e.name),p&&r()("a",{href:e.url,className:pa.f,"data-navid":e.name,onClick:function(t){return function(e,t,n){e.preventDefault();var i=A;i.module.element={name:I("go-to-".concat(n)),label:I("clicked-".concat(n)),url:t},s.trackEvent(ha(ha({},i),{},{eventCallback:j(t)}))}(t,e.url,e.name)},onKeyDown:function(t){return R(t,e.url,e.name)}},void 0,e.name),r()("button",{type:"button","aria-label":"open ".concat(e.name," submenu"),"data-navid":e.name,className:pa.b,onClick:function(e){return L(e)},onKeyDown:function(e){return R(e)}},void 0,r()(sa.a,{className:pa.a,fill:"#979797"})),t&&l&&r()(fa.a,{dropdownData:e.dropdown,isFloatingNav:!0,item:e,setVisibleNestedNav:k,visibleNestedNav:x,regionForTracking:y,pagetype:"story"}))}))))}ya.displayName="StoryXPNPrimary";var va,ba=Object(qt.a)(ya),_a=n("g+Cy"),wa=n("bFSk"),xa=Object(M.css)("width:25px;height:25px;",A.a.button.transparent," padding:10px;"),ka=Object(M.css)("height:55px;align-items:center;justify-content:center;background:",A.a.color.white,";display:none;",A.a.breakpoint.large,"{display:flex;margin-left:10px;}");function Oa(e){var t=e.pageType,n=e.region,i=e.ruleName,a=e.parentUri,o=e.template,s=Object(oa.d)(),l="https://www.nytimes.com".concat(s),c=Object(wa.a)({name:i,template:o,region:n,parentUri:a,pageType:t}),u=Object(d.useMemo)((function(){return c.trackImpression()}),[c]),p=Object(d.useMemo)((function(){return c.trackInteraction()}),[c]);return r()("span",{className:ka},void 0,r()(kr.InView,{as:"a",onChange:function(e){e&&u({event:"impression",card:{url:l}})},triggerOnce:!0,href:s,"data-testid":"tlogo-home-link","aria-label":"The New York Times Home Page",onClick:function(e){p(e,s,{eventData:{type:"url-click",trigger:"item"},item:{url:l,uri:null}})}},void 0,va||(va=r()(_a.a,{className:xa}))))}Oa.displayName="XPNHomepageLink";var Ea,Ta,Ca=Object(M.css)("top:0;left:0;width:100%;position:absolute;"),Sa=Object(M.css)("transition:all 0.1s ease-in-out;"),Pa=Object(M.css)("display:none;opacity:0;z-index:-1;visibility:hidden;"),Ma=Object(M.css)("opacity:1;z-index:900;visibility:visible;"),Ia=Object(M.css)("display:flex;align-items:center;justify-content:left;min-height:55px;position:relative;",A.a.breakpoint.small,"{justify-content:center;}",A.a.printHide),Aa=Object(M.css)("display:none;.SJ_xpn_storylines_desktop_cwv_0124-1_xpn_in_story &,.SJ_xpn_storylines_desktop_cwv_0124-2_xpn_hamburger &,.SJ_xpn_storylines_desktop_cwv_0124-3_xpn_top_only &{",A.a.breakpoint.mediumLarge,"{display:block;}}"),ja=Object(M.css)("position:absolute;top:0;left:0;display:flex;align-items:center;justify-content:center;height:55px;"),La=Object(M.css)("background:",A.a.color.white,";display:none;padding:10px;.SJ_xpn_storylines_desktop_cwv_0124-2_xpn_hamburger &{display:flex;}&:hover{",A.a.button.transparent," padding:10px;}"),Ra=Ze()((function(){return n.e(93).then(n.bind(null,"1Oh1"))}),{loadableGenerated:{webpack:function(){return["1Oh1"]},modules:["shared/Masthead/HamburgerDrawer"]}}),Na=Ze()((function(){return Promise.resolve().then(n.bind(null,"KRMk")).then((function(e){return e.UsDataProvider}))}),{loadableGenerated:{webpack:function(){return["KRMk"]},modules:["shared/Masthead/NestedNav/Data/us"]}}),Da=Ze()((function(){return Promise.resolve().then(n.bind(null,"XMyW")).then((function(e){return e.CaDataProvider}))}),{loadableGenerated:{webpack:function(){return["XMyW"]},modules:["shared/Masthead/NestedNav/Data/ca"]}}),Ba=Ze()((function(){return Promise.resolve().then(n.bind(null,"kBkf")).then((function(e){return e.IntDataProvider}))}),{loadableGenerated:{webpack:function(){return["kBkf"]},modules:["shared/Masthead/NestedNav/Data/international"]}}),za="SJ_xpn_storylines_desktop_cwv_0124",Fa=["1_xpn_in_story","2_xpn_hamburger","3_xpn_top_only"];function Ua(e){var t,n,i,a,s,l,c,u,f,m=e.article,g=e.hasFullBleedHeader,y=Object(v.useTracking)({eventData:{pageType:"article"},module:{name:"nested-navigation",context:"standard",region:"body"}}).trackEvent,b=Object(d.useRef)(),w=Object(d.useRef)(),x=Object(kr.useInView)({threshold:0}),k=x.ref,O=x.inView,E=Object(P.useLocation)(),T=Object(aa.b)(E),C=Object(d.useState)(!1),S=o()(C,2),I=S[0],A=S[1];f="CANADA"===T||_.a.load("NYT-Edition")===oa.a.CA.value?Da:"INTL"===T||_.a.load("NYT-Edition")===oa.a.INT.value?Ba:Na;var j=Object(d.useState)(Pa),L=o()(j,2),R=L[0],N=L[1],D=Object(d.useState)(Ma),B=o()(D,2),z=B[0],F=B[1],U=Object(h.a)(),H=Object(nt.b)(),W=Object(d.useState)(!1),q=o()(W,2),V=q[0],G=q[1],Y=Object(d.useState)(!1),Z=o()(Y,2),X=Z[0],J=Z[1],K=Object(d.useState)(!1),$=o()(K,2),Q=$[0],ee=$[1];Object(d.useEffect)((function(){var e,t,n,i,r,a,o,s;!U||null!=U&&U[za]||G(!0),(window&&!window.matchMedia("(min-width: 1024px)").matches||U&&null!=U&&null!==(e=U[za])&&void 0!==e&&e.variant&&!Fa.includes(null==U||null===(t=U[za])||void 0===t?void 0:t.variant))&&G(!0),U&&null!=U&&null!==(n=U[za])&&void 0!==n&&n.allocated&&null!=U&&null!==(i=U[za])&&void 0!==i&&i.variant&&("2_xpn_hamburger"===(null==U||null===(r=U[za])||void 0===r?void 0:r.variant)||"3_xpn_top_only"===(null==U||null===(a=U[za])||void 0===a?void 0:a.variant))&&J(!0);var l,c=U&&(null==U||null===(o=U[za])||void 0===o?void 0:o.allocated)&&Fa.includes(null==U||null===(s=U[za])||void 0===s?void 0:s.variant)&&window&&window.matchMedia("(min-width: 1024px)").matches;if(g&&ee(!0),c&&!l&&!g){var u,d,p,f=null===(u=window)||void 0===u||null===(d=u.document)||void 0===d||null===(p=d.querySelector('[data-testid="masthead-container"]'))||void 0===p?void 0:p.offsetHeight,m={rootMargin:"-".concat(f,"px"),threshold:.25};(l=new IntersectionObserver((function(e){e.forEach((function(e){e.intersectionRatio<.25?ee(!0):ee(!1)}))}),m)).observe(b.current)}return function(){l&&l.disconnect()}}),[U,g]),Object(d.useEffect)((function(){var e,t,n,i,r;U&&null!==(e=U[za])&&void 0!==e&&e.allocated&&(null!=U&&null!==(t=U[za])&&void 0!==t&&t.variant&&"1_xpn_in_story"===(null==U||null===(n=U[za])||void 0===n?void 0:n.variant)||"2_xpn_hamburger"!==(null==U||null===(i=U[za])||void 0===i?void 0:i.variant)&&"3_xpn_top_only"!==(null==U||null===(r=U[za])||void 0===r?void 0:r.variant)||(H?(N(Ma),F(Pa)):H||(N(Pa),F(Ma))))}),[U,H]),Object(d.useEffect)((function(){O&&y({event:"impression",module:{label:"hamburger-nested-navigation"}})}),[O,y]);return!V&&p.a.createElement("div",{className:Object(M.cx)(Aa),ref:b},r()("div",{className:Object(M.cx)(Wt.menuContainerClass)},void 0,r()("div",{className:Object(M.cx)(Ca,Sa,Ia,R)},void 0,r()("div",{className:ja},void 0,X&&r()(Oa,{region:$e.a.TOP_BANNER,parentUri:null==m?void 0:m.uri,ruleName:null==m||null===(t=m.storylines)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.ruleName,pageType:m.__typename,template:"storyline_menu_home_logo"}),p.a.createElement("button",{type:"button",className:La,"aria-label":"open navigation menu",onClick:function(){return A(!0),void y({event:"moduleInteraction",eventData:{pageType:"article",trigger:"module",type:"click"},module:{label:"hamburger-nested-navigation",element:{name:"expand-hamburger-navigation",label:"clicked-expand-hamburger-navigation"}}})},ref:k},Ea||(Ea=r()(bt.MenuIcon,{size:24,"aria-label":"Menu"})))),r()(vn,{storyline:null==m||null===(i=m.storylines)||void 0===i||null===(a=i[0])||void 0===a?void 0:a.storyline,uriOfActiveMenuLink:null==m?void 0:m.uri,parentUri:null==m?void 0:m.uri,article:m,pageType:m.__typename,ruleName:null==m||null===(s=m.storylines)||void 0===s||null===(l=s[0])||void 0===l?void 0:l.ruleName,testName:null==m||null===(c=m.storylines)||void 0===c||null===(u=c[0])||void 0===u?void 0:u.testName,componentLocation:"sticky",region:$e.a.TOP_BANNER})),p.a.createElement("div",{className:Object(M.cx)(Ca,z,Sa),ref:w},r()("div",{className:ja},void 0,Q&&r()(Oa,{region:$e.a.TOP_BANNER,parentUri:null==m?void 0:m.uri,ruleName:"nested-navigation-supert",pageType:m.__typename,template:""})),Ta||(Ta=r()(ba,{})))),I&&r()(f,{},void 0,r()(Ra,{onClose:function(){return A(!1)}})))}Ua.displayName="XPNStorytellingNav",Ua.defaultProps={};var Ha=Ua,Wa=(n("ZjMX"),n("wYzE")),qa="0_Control",Va="1_Test",Ga=n("MEHp"),Ya=n("bLpx"),Za=function(e){var t=Object(h.a)(),n=Object(la.b)(),i=Object(Ya.a)("bottomsheet"),r=Object(v.useTracking)().trackEvent,a=Object(d.useRef)(!1),o=function(e){var t,n;return(null==e||null===(t=e.SJ_bottom_sheet_rollout_0626)||void 0===t?void 0:t.allocated)&&(null==e||null===(n=e.SJ_bottom_sheet_rollout_0626)||void 0===n?void 0:n.variant)===qa}(t),s=function(e){var t,n;return(null==e||null===(t=e.SJ_bottom_sheet_rollout_0626)||void 0===t?void 0:t.allocated)&&(null==e||null===(n=e.SJ_bottom_sheet_rollout_0626)||void 0===n?void 0:n.variant)===Va}(t),l=Object(Ga.e)({article:e,isBrowser:n,targeting:i,messageName:"SUBSCRIBER_RECIRCULATION"});return Object(d.useEffect)((function(){l&&Object(ce.e)("SJ_bottom_sheet_rollout_0626")}),[l]),Object(d.useEffect)((function(){var e=i.loading,t=void 0===e||e,n=i.error;t||(void 0===n||n)||!1!==a.current||!s||(r({event:"impression",eventData:{pagetype:"article",trigger:"module"},module:{name:"bottom-sheet",context:"targeting",region:"dock"},asset:JSON.stringify(i)}),a.current=!0)}),[i,r,s]),!!function(e){if(e){var t=O.a.parse(window.location.search);if(t["test-drawer"])return"BottomSheetSub"===t["test-drawer"]}return!1}(n)||l&&!o},Xa=n("gojR"),Ja=n("Gs79"),Ka=n("SYzA"),$a=n("Tonn"),Qa=function(){var e,t,n,i,r=(e=Object(Ka.a)(),t=Object(P.useLocation)(),n=Object(k.parse)(t.search),function(){return Object(z.d)(n)||e||Object($a.a)(e,t.pathname)||Object(yt.e)()}),a=(i=Object(Ja.a)().overlays.dock,function(){return i.exists&&(!i.ready||i.visible)});return function(){var e=r(),t=a();return!e&&!t}},eo=function(){var e=Object(Ja.a)(),t=e.registerOverlay,n=e.setVisibility,i=e.overlays.bottomsheet,r=Qa();return Object(d.useEffect)((function(){t("bottomsheet")}),[]),{visible:null==i?void 0:i.visible,setVisible:function(e){var t=r(),a=!!e&&t;i.visible!==a&&n("bottomsheet",a)}}},to=n("vAfh"),no=Ze()((function(){return Promise.all([n.e(18),n.e(138)]).then(n.bind(null,"ys60"))}),{loadableGenerated:{webpack:function(){return["ys60"]},modules:["shared/BottomSheet/Recirculation"]}}),io=function(e){var t=e.article,n=Object(d.useState)(null),i=o()(n,2),a=i[0],s=i[1],l=Object(d.useState)(!1),c=o()(l,2),u=c[0],p=c[1],f=eo(),m=f.visible,h=f.setVisible,g=Za(t),y=Object(Xa.a)(t),v=y.isInVariant,b=y.isInControl;return Object(d.useEffect)((function(){null===a&&(g&&(s(to.b),h(!0)),v&&(s(to.a),h(!0)))}),[v,g,h,a]),Object(d.useEffect)((function(){if(!u&&(v||b)){var e=b?"0_control":null;(function(e,t){var n,i,r,a,o,s;if("undefined"!=typeof window){var l=(null===(n=window)||void 0===n||null===(i=n.NYTD)||void 0===i||null===(r=i.Abra)||void 0===r?void 0:r.integration)||"",c=(null===(a=window)||void 0===a||null===(o=a.NYTD)||void 0===o||null===(s=o.Abra)||void 0===s?void 0:s.version)||"";Object(Wa.a)({event:"ab-expose",abtest:{test:e,variant:t||"0",config_ver:c,integration:l}},{individualEvents:!0})}})("SJ_regi_bottom_sheet_1223",e=v?"1_bottom":e),p(!0)}}),[u,v,b]),a&&m?r()(no,{article:t,type:a}):null};io.defaultProps={article:void 0};var ro,ao=io,oo=n("FSO8"),so=n("GR2s"),lo=n("qs2k"),co=n("74vb"),uo=n.n(co);function po(e){var t=e.article,n=Object(v.useTracking)().trackEvent,i=Object(U.a)().deviceType;return r()(uo.a,{article:t,deviceType:i,trackClick:function(e){n({event:"moduleInteraction",eventData:{pagetype:"article",trigger:"module",type:"click"},module:{name:"review",context:"",label:"",region:"review-footer",element:{name:"restaurant"===e?"reserve-a-table":"find-tickets",label:"restaurant"===e?"Reserve A Table":"Find Tickets",url:""}}})},trackCall:function(){n({event:"moduleInteraction",eventData:{pagetype:"article",trigger:"module",type:"click"},module:{name:"review",context:"",label:"",region:"review-footer",element:{name:"call",label:"Call",url:""}}})}})}po.displayName="ReviewFooter",po.fragments={article:m()(ro||(ro=u()(["\n    fragment ReviewFooter_article on Article {\n      id\n      compatibility {\n        isDiningReview\n        isMovieReview\n      }\n      reviewItems {\n        overrideLabel\n        isCriticsPick\n        subject {\n          __typename\n          ... on Restaurant {\n            id\n            name\n            contactDetails {\n              addresses {\n                crossStreet\n                neighborhood\n                address {\n                  streetAddress\n                }\n              }\n              phoneNumbers {\n                type\n                number\n              }\n            }\n            accessibilityDescription\n            takesReservations\n            reservationsUrl\n            reservationsNote\n            rating\n            atmosphere\n            openStatus\n            priceCategory\n            wineList\n            recommendedDishes\n            soundLevel\n            alcoholDescription\n            openHours\n            coordinates {\n              latitude\n              longitude\n            }\n            website\n            lastModified\n            singlePlatformId\n          }\n          ... on Movie {\n            title\n            movieRating: rating\n            runtimeUS\n            ticketUrl\n            directors\n            writers\n            genres\n            movieCast: cast {\n              actor\n            }\n            imdbId\n          }\n        }\n      }\n    }\n  "])))};var fo,mo=po,ho=n("icOM"),go=n.n(ho),yo=n("bFGc"),vo=n.n(yo),bo=Object(M.css)("margin-left:20px;margin-right:20px;",A.a.breakpoint.small,"{width:",A.a.breakpoint.mobileFullWidth,";max-width:",A.a.breakpoint.textBodyWidth,"px;margin:1.5rem auto 1em;}",A.a.breakpoint.extraLarge,"{width:",A.a.breakpoint.textBodyWidthExtralarge,"px;max-width:",A.a.breakpoint.textBodyWidthExtralarge,"px;margin:1.5rem auto 1em;}",A.a.print,";"),_o=function(e){var t,n,i,a=e.data,o=a||{},s=o.section,l=o.subsection,c=null==s||null===(t=s.name)||void 0===t?void 0:t.toLowerCase(),u=null==l||null===(n=l.name)||void 0===n?void 0:n.toLowerCase(),d="opinion"===c||"espanol"===c&&"opinion"===u;return(null==a||null===(i=a.bylines)||void 0===i?void 0:i.length)>0&&r()("div",{className:bo},void 0,function(e,t){var n=0;return e.map((function(e){return e&&e.creators&&e.creators.length>0?e.creators.map((function(e){var i=null,a=null;if(e.contactDetails&&e.contactDetails.socialMedia&&e.contactDetails.socialMedia.map((function(e){return"twitter"===e.type?i=e.account:"facebook"===e.type&&(a=e.account),!0})),e.legacyData&&e.legacyData.htmlShortBiography){var o=t?r()(vo.a,{htmlShortBiography:e.legacyData.htmlShortBiography,twitter:i,facebook:a},n):r()(go.a,{bio:e},n);return n+=1,o}return null})):null}))}(a.bylines,d))};_o.fragments={data:m()(fo||(fo=u()(["\n    fragment Bio_data on CreativeWork {\n      bylines {\n        creators {\n          ... on Person {\n            id\n            bioUrl\n            contactDetails {\n              socialMedia {\n                type\n                account\n              }\n            }\n            displayName\n            legacyData {\n              htmlShortBiography\n            }\n          }\n        }\n      }\n      section {\n        id\n        name\n      }\n      subsection {\n        id\n        name\n      }\n    }\n  "])))},_o.defaultProps={data:null};var wo,xo=_o,ko=n("4GNh"),Oo=n("nxVm"),Eo=n.n(Oo),To=Object(M.css)("font-family:",A.a.font.franklinBase,";font-size:",A.a.font.size(14),";line-height:",A.a.font.size(20),";color:",A.a.color.gray20,";margin:2rem auto 1rem;width:",A.a.breakpoint.mobileFullWidth,";max-width:",A.a.breakpoint.textBodyWidth,"px;p{margin-bottom:1rem;}a{text-decoration:underline;text-decoration-color:",A.a.color.gray50,";}a:hover,a:focus{color:",A.a.color.gray30,";text-decoration:none;}em{font-style:italic;}strong{font-weight:bold;}",A.a.breakpoint.medium,"{font-size:",A.a.font.size(15),";line-height:",A.a.font.size(22),";a{text-decoration:none;border-bottom:1px solid ",A.a.color.gray50,";}a:hover,a:focus{color:",A.a.color.gray30,";border-bottom:1px solid ",A.a.color.white,";}}",A.a.breakpoint.extraLarge,"{width:",A.a.breakpoint.textBodyWidthExtralarge,"px;max-width:",A.a.breakpoint.textBodyWidthExtralarge,"px;}",Eo.a,";"),Co=function(e){var t,n=e.data,i=e.suppressInfobox;if(!n||!n.legacy||""===n.legacy.htmlExtendedAuthorOrArticleInformation&&""===n.legacy.htmlInfoBox||i&&""===n.legacy.htmlExtendedAuthorOrArticleInformation||null!==(t=n.compatibility)&&void 0!==t&&t.isOak)return null;var a="".concat(n.legacy.htmlExtendedAuthorOrArticleInformation).concat(i?"":" ".concat(n.legacy.htmlInfoBox));return r()("div",{className:To,dangerouslySetInnerHTML:{__html:a}})};Co.displayName="ExtendedInformation",Co.fragments={data:m()(wo||(wo=u()(["\n    fragment ExtendedInformation_data on Article {\n      id\n      compatibility {\n        isOak\n      }\n      legacy {\n        htmlExtendedAuthorOrArticleInformation\n        htmlInfoBox\n      }\n    }\n  "])))},Co.defaultProps={data:void 0,suppressInfobox:!1};var So,Po=Co,Mo=n("tqOg"),Io=n.n(Mo),Ao=Object(M.css)("width:",A.a.breakpoint.mobileFullWidth,";max-width:",A.a.breakpoint.textBodyWidth,"px;",A.a.breakpoint.extraLarge,"{width:",A.a.breakpoint.textBodyWidthExtralarge,"px;max-width:",A.a.breakpoint.textBodyWidthExtralarge,"px;}",Eo.a,";"),jo=function(e){var t=e.data;if(!t||!t.legacy||!t.legacy.reviewInformation)return null;var n="".concat(t.legacy.reviewInformation);return r()(Io.a,{html:n,className:Ao})};jo.displayName="ReviewInformation",jo.defaultProps={data:void 0},jo.fragments={data:m()(So||(So=u()(["\n    fragment ReviewInformation_data on Article {\n      id\n      legacy {\n        reviewInformation\n      }\n    }\n  "])))};var Lo,Ro=jo,No=n("dlEz"),Do=Object(M.css)("font-family:",A.a.font.franklinBase,";font-size:",A.a.font.size(12),";line-height:",A.a.font.size(16),";width:",A.a.breakpoint.mobileFullWidth,";max-width:",A.a.breakpoint.textBodyWidth,"px;margin:0 auto 1em;color:",A.a.color.gray30,";a{color:",A.a.color.gray30,";text-decoration:underline;}a:hover{text-decoration:none;}",A.a.breakpoint.extraLarge,"{width:",A.a.breakpoint.textBodyWidthExtralarge,"px;max-width:",A.a.breakpoint.textBodyWidthExtralarge,"px;}",Eo.a,";@media print{span{display:none;}}"),Bo=Object(M.css)("font-weight:",A.a.font.weight.medium,";display:inline;"),zo={ofTheSundayMagazine:" of the Sunday Magazine",oftheSundayBookReview:" of the Sunday Book Review",ofTMagazine:" of T Magazine",ofEducationLife:" of Education Life",oftheNewYorkEdition:" of the New York edition",oftheNationaledition:" of the National edition",inTheInternationalNewYorkTimes:" in The New York Times International Edition",inTheInternationalHeraldTribune:" in The International Herald Tribune",aVersionOf:"A version of this article appears in print on ",onPage:", Page ",onSection:", Section ",ofThe:void 0,withTheHeadline:" with the headline: ",links:'. <a href="https://www.parsintl.com/publication/the-new-york-times/">Order Reprints</a> | <a href="https://www.nytimes.com/section/todayspaper">Todays Paper</a> | <a href="https://www.nytimes.com/subscriptions/Multiproduct/lp8HYKU.html?campaignId=48JQY">Subscribe</a>'},Fo=function(e){var t,n=e.data;if(n&&n.printInformation&&n.printInformation.publicationDate&&(n.printInformation.section||n.printInformation.edition)&&"The New York Times on the Web"!==n.printInformation.edition&&n.source&&n.source.displayName){var i=n.source.displayName,a=n.printInformation,o=a.publicationDate,s=a.section,l=a.page,c=a.edition,u=a.headline,d=function(e,t,n){var i="",r=!0,a=!0;switch(e){case"MM":i=zo.ofTheSundayMagazine,r=!1;break;case"BR":i=zo.oftheSundayBookReview,r=!1;break;case"M2":i=zo.ofTMagazine,r=!1;break;case"ED":i=zo.ofEducationLife,r=!1;break;default:switch(i=function(e){return["NewYork","altNewYork","SundayAdvance","LongIsland","Westchester","Connecticut","NewJersey","ManhattanBronx","ZonedLI","ZonedWC","ZonedCN","ZonedNJ","ZonedJN","ZonedJC","ZonedMB","ZonedBC","DTNewYork","The New York Times on the Web"].includes(e)}(t)?zo.oftheNewYorkEdition:zo.oftheNationaledition,n){case"International New York Times":i=zo.inTheInternationalNewYorkTimes,a=!1;break;case"Global":case"International Herald Tribune":i=zo.inTheInternationalHeraldTribune,a=!1}}return{printEdition:i,showSection:r,showHeadline:a}}(s,c,i),p=d.printEdition,f=d.showSection,m=d.showHeadline;return r()("div",{className:Do},void 0,zo.aVersionOf,r()(No.a,{className:Bo,unix:(t=o,new Date(t).getTime()/1e3),formatter:"abbreviated-date"}),l&&f&&zo.onSection,l&&f&&s,l&&zo.onPage,l&&+l,zo.ofThe,p,m&&u&&zo.withTheHeadline,m&&u&&u,Object(aa.a)(zo.links))}return null};Fo.defaultProps={data:void 0},Fo.fragments={data:m()(Lo||(Lo=u()(["\n    fragment PrintInformation_data on Article {\n      id\n      source {\n        id\n        displayName\n      }\n      printInformation {\n        section\n        page\n        publicationDate\n        edition\n        headline @stripHtml\n      }\n    }\n  "])))};var Uo,Ho=Fo;function Wo(e){var t=e.offsetHeight,n=getComputedStyle(e);return t+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10)}function qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Vo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qo(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Go={event:"impression",module:{name:"article_complete",context:"",label:"",region:"article_complete"}};function Yo(e,t){return e.offsetTop+t.offsetTop}function Zo(e){var t=function e(t,n){return(t.tagName||"").toLowerCase()===n?t:t.parentNode?e(t.parentNode,n):void 0}(e,"article")||{},n={top:t.offsetTop,height:Wo(t)},i={top:Yo(t,e),height:Wo(e)},r={scrollTop:Math.round(document.documentElement.scrollTop||document.body.scrollTop||0),height:Math.max(document.documentElement.clientHeight,window.innerHeight||0),width:Math.max(document.documentElement.clientWidth,window.innerWidth||0),documentHeight:Math.max(document.documentElement.scrollHeight||0),article:n,bottomOfArticle:i};return Vo(Vo({},Go),{},{viewport:r})}function Xo(e){var t,n=e.article,i=Object(v.useTracking)({module:{region:"footer"}}),a=i.Track,o=i.trackEvent,s=Object(d.useRef)(null),l=Object(d.useRef)(null),c=Object(d.useRef)(!1),u=function(){l.current=new IntersectionObserver((function(e){var t;!c.current&&e&&e[0]&&e[0].isIntersecting&&(c.current=!0,l.current.disconnect(),l.current=null,t=Zo(s.current),o(t))}),{threshold:0}),l.current.observe(s.current)};if(Object(d.useEffect)((function(){return u(),function(){l.current&&(l.current.disconnect(),l.current=null)}}),[]),n){var f,m,h=function(e){var t=e.article,n=t&&t.reviewItems&&t.reviewItems.length>0;return!!(n&&t&&t.compatibility&&!t.compatibility.isArtReview&&!t.compatibility.isBookReview||n)}({article:n}),g=function(e){var t=e.article,n=t&&t.reviewItems&&t.reviewItems.length>0;return!!(n&&t&&t.compatibility&&(t.compatibility.isTheaterReview||t.compatibility.isDiningReview)||n)}({article:n}),y=n&&(null===(f=n.compatibility)||void 0===f?void 0:f.isOak)&&"es"!==(null===(m=n.language)||void 0===m?void 0:m.code);t=r()(a,{},void 0,r()(Ro,{data:n}),r()(ko.a,{data:n}),h&&r()(mo,{article:n}),y&&r()(xo,{data:n}),r()(Po,{data:n,suppressInfobox:g}),r()(Ho,{data:n}),r()(_i.b,{share:n,position:_i.a.FOOTER,suppressGiftArticleTooltip:!0}))}else t=null;return p.a.createElement("div",{className:"bottom-of-article",ref:s},t)}Xo.displayName="FooterBlock",Xo.defaultProps={article:{}},Xo.fragments={data:m()(Uo||(Uo=u()(["\n    fragment FooterBlock_data on Article {\n      id\n      compatibility {\n        isOak\n        isArtReview\n        isBookReview\n        isTheaterReview\n        isDiningReview\n      }\n      reviewItems {\n        __typename\n      }\n      section {\n        id\n        name\n      }\n      ...ReviewInformation_data\n      ...Addendum_data\n      ...ReviewFooter_article\n      ...Bio_data\n      ...ExtendedInformation_data\n      ...PrintInformation_data\n      ...ShareToolbar_share\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n  "])),Ro.fragments.data,ko.a.fragments.data,mo.fragments.article,xo.fragments.data,Po.fragments.data,Ho.fragments.data,_i.b.fragments.share)};var Jo,Ko=Object(qt.a)(Xo),$o=A.a.color,Qo=$o.black,es=$o.gray60,ts=$o.gray20,ns=$o.gray45,is=A.a.font,rs=is.franklinBase,as=is.size,os=is.weight.medium,ss=Object(M.css)("font-family:",rs,";color:",ts,";max-width:300px;border-left:1px solid ",es,";padding-left:15px;align-self:start;& >:not(:first-child){margin-top:10px;}"),ls=Object(M.css)("font-weight:",os,";line-height:",as(16),";font-size:",as(13),";margin:0;",A.a.breakpoint.large,"{line-height:",as(21),";font-size:",as(15.5),";}"),cs=Object(M.css)("overflow:auto;& >:not(:last-child){margin-right:15px;}"),us=Object(M.css)("display:flex;justify-content:space-between;flex-direction:column;",A.a.breakpoint.large,"{flex-direction:row;}"),ds=Object(M.css)("display:flex;justify-content:center;width:100%;border:1px solid ",ns,";border-radius:3px;padding:8px 0;transition:border 0.2s;:hover{border:1px solid ",Qo,";}:not(:last-child){margin-right:15px;margin-bottom:7px;",A.a.breakpoint.large,"{margin-bottom:unset;}}"),ps=Object(M.css)("max-height:15px;"),fs=function(e){return e.column&&e.column.tagline},ms=function(e){return e.episodeProperties&&e.episodeProperties.linksLeadIn};function hs(e){var t=e.article,n=Object(v.useTracking)({event:"moduleInteraction",eventData:{trigger:"module",type:"click"},module:{name:"c-column"}}).trackEvent,i=fs(t);if(!i)return null;var a=ms(t),o=t.episodeProperties&&t.episodeProperties.links;return r()("div",{className:ss},void 0,r()("div",{className:cs},void 0,i&&r()("h3",{className:ls},void 0,i)),o&&a&&r()("h4",{className:ls},void 0,a),r()("div",{className:us},void 0,o&&o.map((function(e){return r()("a",{className:ds,href:e.linkUrl,alt:e.platformName,target:"_blank",rel:"noopener noreferrer",onClick:function(){n({module:{element:{name:"network-link",label:e.platformName}}})}},e.linkUrl,r()("img",{className:ps,src:(t=e.image,null==t||null===(i=t.crops)||void 0===i||null===(a=i[0])||void 0===a||null===(o=a.renditions)||void 0===o||null===(s=o[0])||void 0===s?void 0:s.url),alt:"".concat(e.platformName," icon")}));var t,i,a,o,s}))))}hs.displayName="EpisodeCompanion",hs.fragments={data:m()(Jo||(Jo=u()(['\n    fragment EpisodeCompanion_article on Article {\n      id\n      episodeProperties {\n        linksLeadIn\n        links {\n          platformName\n          linkUrl\n          callToAction\n          image {\n            id\n            crops(renditionNames: "master180") {\n              name\n              renditions {\n                name\n                url\n              }\n            }\n          }\n        }\n      }\n    }\n  '])))},hs.defaultProps={article:{episodeProperties:{links:[]}}},hs.requirements={position:"first",minHeight:200,lazyLoad:!0,shouldComponentMount:function(e){return e&&fs(e)&&ms(e)}};var gs,ys=Object(qt.a)(hs),vs=n("9i1U"),bs=n("hG4R"),_s=n("RL9q"),ws=n("5dFD"),xs=n("4TXN"),ks=n("SBGf"),Os=Object(M.css)("height:100%;display:flex;flex-direction:row;"),Es=Object(M.css)("font-family:",A.a.font.serifSmall,";font-weight:",A.a.font.weight.bold,";font-size:14px;line-height:17px;width:100%;color:",A.a.color.gray20,";border-bottom:1px solid ",A.a.color.gray60,";padding-bottom:16px;margin-bottom:0;",A.a.breakpoint.large,"{width:100%;font-weight:",A.a.font.weight.medium,";border-bottom:none;padding-bottom:0;margin:auto 0;}"),Ts=Object(M.css)("display:none;",A.a.breakpoint.large,"{display:block;width:75px;margin-left:0;padding-bottom:7px;&:last-of-type{padding-bottom:0;}}"),Cs=Object(M.css)("margin-bottom:15px;&:last-of-type{border-bottom:none;}",A.a.breakpoint.large,"{.",Ts," + .",Es,"{width:calc(100% - 85px);margin:auto 0 auto 10px;}}"),Ss=Object(M.css)("width:100%;display:block;position:relative;.",Cs,":last-child{margin-bottom:0;}.",Cs,":hover{.",Es,"{text-decoration:underline;}}",A.a.breakpoint.mediumLarge,"{max-width:130px;}",A.a.breakpoint.large,"{max-width:210px;#pp_edpick-wrapper{margin-left:-9px;}}"),Ps=Object(M.css)("font-family:",A.a.font.franklinBase,";font-weight:",A.a.font.weight.bold,";color:",A.a.color.black,";border-bottom:1px solid ",A.a.color.gray60,";margin-top:0;margin-bottom:15px;padding-bottom:12px;font-size:14px;line-height:14px;letter-spacing:0.02em;"),Ms=Object(M.css)(Es,";display:block;color:",A.a.color.opinionGray,";"),Is=function(e){var t,n=e.index,i=e.item,a=e.listUri,o=e.trackingParams,s=Object(_s.a)(),l=Object(ks.i)({cardId:null==i?void 0:i.sourceId,cardIndex:n,cardUrl:null==i?void 0:i.url,cardUri:null==i?void 0:i.uri,impId:s,listUri:a,packageLabel:"Editors' Picks",trackingName:"editors_picks_recirc",region:"ccolumn",trackingParams:o,type:"asset"}),c=Object(Pt.a)({threshold:.5,data:l}),u=c.isTracked,d=c.ref,f=Object(v.useTracking)().trackEvent;return p.a.createElement("article",{className:Cs,ref:u?null:d},r()(ws.a,{className:Os,link:i,onClick:function(){f(Object(ks.j)({cardId:null==i?void 0:i.sourceId,cardIndex:n,cardUrl:null==i?void 0:i.url,cardUri:null==i?void 0:i.uri,packageLabel:"Editors' Picks",region:"ccolumn",trackingName:"editors_picks_recirc",trackingParams:o,type:"asset"}))}},void 0,i&&i.__typename&&i.promotionalMedia&&r()("div",{className:Ts},void 0,r()(bs.a,{media:"Image"===i.promotionalMedia.__typename?i.promotionalMedia:i.promotionalMedia.promotionalMedia,preferredCrop:"square640"})),r()("h3",{className:Es},void 0,Object(xs.c)(i)?gs||(gs=r()("span",{className:Ms},void 0,"Opinion")):null,null===(t=i.headline)||void 0===t?void 0:t.default)))};Is.displayName="EditorsPicksItem",Is.defaultProps={index:null,item:{},listUri:"",trackingParams:[]};var As,js,Ls,Rs=Is,Ns=function(e){if(!e)return!1;var t=e.node;if(!t)return!1;var n=t.headline,i=t.url;return!!n&&(!!i&&!!n.default)},Ds=m()(As||(As=u()(["\n  query EditorsPicksCompanionPersonalizedQuery(\n    $listUri: PersonalizedListUri!\n    $numArticles: Int\n    $referrer: String\n    $originalReferrer: String\n    $deviceType: PersonalizationDeviceType!\n  ) {\n    lists {\n      editorsPicksList: personalizedList(\n        first: $numArticles\n        listUri: $listUri\n        personalizedListContext: {\n          referrer: $referrer\n          originalReferrer: $originalReferrer\n          deviceType: $deviceType\n          appType: WEB\n        }\n      ) {\n        ...Connection_pageInfo\n        totalCount\n        edges {\n          ... on PersonalizedItemsEdge {\n            trackingParams {\n              key\n              value\n            }\n            node {\n              __typename\n              ... on CreativeWork {\n                headline {\n                  default\n                }\n              }\n              ... on Published {\n                sourceId\n                url\n                uri\n              }\n              ... on Article {\n                id\n                section {\n                  id\n                  displayName\n                }\n              }\n              ... on Interactive {\n                id\n                section {\n                  id\n                  displayName\n                }\n              }\n              ... on HasPromotionalProperties {\n                promotionalMedia {\n                  __typename\n                  ...SpanImage_media\n                  ... on HasPromotionalProperties {\n                    promotionalMedia {\n                      ...SpanImage_media\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"])),bs.a.fragments.media,vs.a);function Bs(){var e,t=Object(Ge.useQuery)(Ds,{variables:{listUri:"nyt://per/personalized-list/home-featured",numArticles:3,referrer:window.location.href||null,originalReferrer:document.referrer||null,deviceType:"desktop"===Object(Dn.a)()?"DESKTOP":"MOBILE"},ssr:!1,fetchPolicy:"cache-first"}),n=t.loading,i=t.error,a=t.data;if(i){var o=new Error(i);return o.name="Error fetching editors picks companion column items",Object(vt.a)(o),null}if(!a||n)return null;var s=a.lists,l=((null==s||null===(e=s.editorsPicksList)||void 0===e?void 0:e.edges)||[]).filter(Ns);return l&&l.length?r()("div",{id:"c-col-editors-picks",className:Ss},void 0,js||(js=r()("h2",{className:Ps},void 0,"Editors Picks")),l.map((function(e,t){return r()(Rs,{index:t,item:e.node,listUri:"nyt://per/personalized-list/home-featured",trackingParams:e.trackingParams},"editors-pick-article-".concat(t.toString()))})),Ls||(Ls=r()(bi.a,{id:"pp_edpick"}))):null}Bs.displayName="EditorsPicksCompanion",Bs.requirements={position:"first",minHeight:500,lazyLoad:!0,appearAfterFirstAd:!0};var zs,Fs=Object(qt.a)(Bs),Us=[{name:"EpisodeCompanion",component:ys,requirements:ys.requirements},{name:"EditorsPicks",component:Fs,requirements:Fs.requirements}],Hs=n("eCWu"),Ws=function(e){var t=e.language;return!(!t||!t.code||"en-US"===t.code||"en"===t.code)};Ws.fragments={article:m()(zs||(zs=u()(["\n    fragment isInternationalized_article on Article {\n      id\n      language {\n        code\n      }\n    }\n  "])))};var qs,Vs,Gs,Ys,Zs,Xs,Js=Ws,Ks=function(e){if(!e)return"";return"".concat("nytimes://").concat(e.replace(/https?:\/\//,""))};function $s(e){var t=e.article,n=t.headline,i=t.type,a=t.typeOfMaterials,o=t.uri,s=t.url,l=t.language,c=a||[],u=Js(t),d="";return d=Array.from(document.documentElement.classList).join(" "),r()(Hs.a,{asset:t},void 0,r()("html",{lang:(null==l?void 0:l.code)||"en",className:"".concat(d," ").concat("story nytapp-vi-article")}),r()("meta",{name:"PT",content:i}),r()("meta",{name:"PST",content:c.join(",")}),r()("meta",{name:"url",content:s}),qs||(qs=r()("meta",{name:"msapplication-starturl",content:"https://www.nytimes.com"})),!u&&r()("meta",{property:"al:android:url",content:o}),!u&&(Vs||(Vs=r()("meta",{property:"al:android:package",content:"com.nytimes.android"}))),!u&&r()("meta",{property:"al:android:app_name",content:"NYTimes"}),!u&&r()("meta",{name:"twitter:app:name:googleplay",content:"NYTimes"}),!u&&(Gs||(Gs=r()("meta",{name:"twitter:app:id:googleplay",content:"com.nytimes.android"}))),!u&&r()("meta",{name:"twitter:app:url:googleplay",content:o}),!u&&r()("meta",{property:"al:iphone:url",content:Ks(s)}),!u&&(Ys||(Ys=r()("meta",{property:"al:iphone:app_store_id",content:"284862083"}))),!u&&r()("meta",{property:"al:iphone:app_name",content:"NYTimes"}),!u&&r()("meta",{property:"al:ipad:url",content:Ks(s)}),!u&&(Zs||(Zs=r()("meta",{property:"al:ipad:app_store_id",content:"357066198"}))),!u&&r()("meta",{property:"al:ipad:app_name",content:"NYTimes"}),!u&&r()("link",{rel:"alternate",href:o}),r()("link",{rel:"alternate",type:"application/json+oembed",href:"https://www.nytimes.com/svc/oembed/json/?url=".concat(encodeURIComponent(s)),title:n.default}))}$s.displayName="ArticleHelmet",$s.fragments={article:m()(Xs||(Xs=u()(["\n    fragment ArticleHelmet_article on Article {\n      id\n      headline {\n        default\n      }\n      section {\n        id\n        displayName\n      }\n      subsection {\n        id\n        displayName\n      }\n      advertisingProperties {\n        sensitivity\n      }\n      collections @filterEmpty {\n        id\n        name\n        collectionType\n      }\n      desk\n      originalDesk\n      sourceId\n      type\n      typeOfMaterials\n      url\n      ...isInternationalized_article\n      ...AssetHelmet_asset\n      ...getTargetingParams_data\n    }\n    ","\n    ","\n  "])),Js.fragments.article,Hs.a.fragments.asset)};var Qs,el,tl=$s,nl=Object(M.css)(".relatedcoverage + .recirculation{margin-top:20px;}.wrap + .recirculation{margin-top:20px;}");function il(e){var t=e.edge,n=e.hasHeader,i=Object(v.useTracking)({module:{region:"header"}}).Track;return r()(P.Route,{render:function(e){var a=e.staticContext;return a&&(a.edge=t),r()(i,{},void 0,Qs||(Qs=r()(bi.a,{id:"top"})),!n&&(el||(el=r()(bi.a,{id:"sponsor"}))))}})}il.displayName="PageHeaderBlock",il.defaultProps={edge:"",hasHeader:!1};var rl=il,al=n("caSQ"),ol=n("MR/7"),sl=n("huET"),ll=n("Bk96"),cl={"en-US":{showFullArticle:"Show Full Article"},es:{showFullArticle:"Ver el artculo completo"},"zh-hans":{showFullArticle:""},"zh-hant":{showFullArticle:""}},ul=function(e){var t=e.dismissTruncator,n=e.tracker,i=Object(M.useTheme)(),a=Object(aa.c)(null==i?void 0:i.language),o=cl[a]||cl["en-US"];return r()("div",{className:ll.d},void 0,r()("button",{type:"button",className:ll.b,tabIndex:"0",onClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.trackInteraction(e,{name:"do-continue-reading"}),t()}},void 0,o.showFullArticle))};ul.displayName="ACMContent";var dl=ul;function pl(e){var t="SHOW_ADS"===(null==e?void 0:e.adSensitivity);return r()(sl.a,{messageId:"acm",Content:dl,showAds:t,dismissTruncator:null==e?void 0:e.dismissTruncator})}pl.displayName="ACM",pl.threshold={dropzone:3},pl.defaultProps={dismissTruncator:void 0,adSensitivity:void 0};var fl=pl,ml=n("uAdo"),hl=n("0VxJ");var gl=function(e){var t,n,i,r,a=e.dismissTruncator,s=e.tracker,l=Object(ol.a)(),c=Object(d.useRef)(null),u=Object(d.useRef)(null),f=Object(d.useRef)(!1),m=Object(d.useState)(!1),h=o()(m,2),g=h[0],y=h[1],v=(null==l||null===(t=l.content)||void 0===t||null===(n=t.truncator)||void 0===n?void 0:n.campaignName)||"",b=function(){var e;if(null!=l&&null!==(e=l.content)&&void 0!==e&&e.truncator&&!g){var t=Object(hl.c)(l.content.truncator);t.length>0&&Promise.all(Object(hl.a)(t)).then((function(){y(!0)})).catch((function(e){Object(vt.a)(e,{msg:"Magnolia JS script failed to load",more:"MeteredAssets"})}))}};return Object(d.useEffect)((function(){b(),document.addEventListener("trunc-dismiss",a)}),[]),Object(d.useEffect)((function(){null===c.current&&null!==l&&b(),c.current=l}),[l]),Object(d.useEffect)((function(){if(u.current&&!f.current){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.currentTarget||e.target,n=Object(bn.e)(t,v);if(n){var i=t.href,r=void 0===i?"":i,a=t.target,o=void 0===a?"":a;if(r&&"_blank"!==o){e.preventDefault();var l=function(){window.open(r,"_self")};s.trackInteraction(e,{name:n},l)}else s.trackInteraction(e,{name:n})}},t=u.current.querySelectorAll("a, button");t.length&&(t.forEach((function(t){var n;"A"!==(null==t||null===(n=t.parentElement)||void 0===n?void 0:n.tagName)&&t.addEventListener("click",e)})),f.current=!0)}}),[u,s,f,v]),null!=l&&null!==(i=l.content)&&void 0!==i&&null!==(r=i.truncator)&&void 0!==r&&r.html?l.content.truncator.appendExitUri?p.a.createElement("div",{ref:u,className:ll.d,dangerouslySetInnerHTML:{__html:ml.b(l.content.truncator.html)}}):p.a.createElement("div",{ref:u,className:ll.d,dangerouslySetInnerHTML:{__html:l.content.truncator.html}}):null};function yl(e){var t,n,i=Object(ol.a)(),a=e.adSensitivity,o=e.dismissTruncator,s=null==i||null===(t=i.content)||void 0===t||null===(n=t.truncator)||void 0===n?void 0:n.active,l=s&&i.content.truncator.campaignName,c=s&&i.content.truncator.showAds&&"SHOW_ADS"===a;return l?r()(sl.a,{messageId:l,Content:gl,showAds:c,dismissTruncator:o}):null}yl.displayName="Magnolia",yl.threshold={dropzone:1},yl.defaultProps={adSensitivity:void 0};var vl=yl,bl=n("45t3"),_l=n("s5tu"),wl={ACM:fl,Magnolia:vl,Optimistic:or.a};function xl(e){var t=e.render,n=e.optimisticallyTruncated,i=Object(ol.a)(),a=Object(re.a)(),s=a.showGateway,l=a.gatewayType,c=a.meterReady,u=Object(F.a)(),p=u.optimisticTruncationDropzone,f=u.getReferrer,m=Object(d.useRef)(f()),g=Object(P.useLocation)(),y=Object(b.a)(),v=y.user,_=y.subscriptionDetails,w=y.error,x=Object(al.a)(),k=Object(Ja.a)(),E=Object(U.a)(),T=E.deviceType,C=E.supportsTouch,S=Object(h.a)(),M=Object(d.useState)(null),I=o()(M,2),A=I[0],j=I[1],L=Object(d.useCallback)((function(){return null!==v&&null!==_&&null!==x&&null!==C&&!0===c}),[v,_,x,C,c]),R=Object(d.useCallback)((function(){var e,t,n=O.a.parse(g.search),i="nytvr"===n.referrer,r=void 0!==n.scooppreview,a=(null===(e=navigator)||void 0===e||null===(t=e.userAgent)||void 0===t?void 0:t.toLowerCase().indexOf("googlebot"))>-1,o=Object(z.d)(n);return!(i||r||a||o)}),[g.search]),N=Object(d.useCallback)((function(){var e,t,n,r,a,o,c,u,d,p,f=k.setMode,h=Object(_l.isInternalLink)(null==m?void 0:m.current),g="smartphone"===T,y=(null==i||null===(e=i.content)||void 0===e?void 0:e.gateway)&&!(null!=i&&null!==(t=i.content)&&void 0!==t&&null!==(n=t.gateway)&&void 0!==n&&n.active)&&(null==i||null===(r=i.content)||void 0===r||null===(a=r.truncator)||void 0===a?void 0:a.active);return s&&"PAYWALL"===l&&!y||s&&!y?null:Object(Ln.f)(v)||!R()||!g||h||s?null!=i&&null!==(o=i.content)&&void 0!==o&&null!==(c=o.truncator)&&void 0!==c&&c.active?(f("truncator",(null==i||null===(u=i.content)||void 0===u||null===(d=u.truncator)||void 0===d||null===(p=d.fields)||void 0===p?void 0:p.mode)||"magnolia"),"Magnolia"):null:(f("truncator","acm"),"ACM")}),[k,T,i,s,l,v,R]);Object(d.useEffect)((function(){k.registerOverlay("truncator")}),[]),Object(d.useEffect)((function(){var e=k.setVisibility;if(w&&e("truncator",!1),L()&&!A){var t=N();t?(j(t),e("truncator",!0)):e("truncator",!1)}}),[c,i,w,k,L,N,A]);var D=function(){k.setVisibility("truncator",!1)},B=k.overlays.truncator.visible,H=A&&wl[A],W=bn.d;if(H&&H.threshold&&(W=H.threshold),n&&!A){var q=Object(bn.f)(S);return r()(bl.BulletBriefLocationProvider,{},void 0,c?r()("div",{},void 0,t({TruncatorMessage:null,truncated:!1,dismissTruncator:D})):r()("div",{},void 0,t({TruncatorMessage:null,truncated:p?{dropzone:p}:q,dismissTruncator:D})))}return r()(bl.BulletBriefLocationProvider,{},void 0,r()("div",{},void 0,t({TruncatorMessage:H,truncated:B&&W,dismissTruncator:D})))}xl.displayName="Truncator",xl.defaultProps={},xl.displayName="Truncator";var kl,Ol,El,Tl,Cl,Sl,Pl=xl,Ml=n("hP1F"),Il=n("IINN"),Al=n("V+uv");function jl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ll(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jl(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rl=Ze()((function(){return Promise.all([n.e(0),n.e(66)]).then(n.bind(null,"vAfL"))}),{loadableGenerated:{webpack:function(){return["vAfL"]},modules:["shared/Comments/CommentsPanel"]}}),Nl=Ze()((function(){return Promise.all([n.e(24),n.e(104)]).then(n.bind(null,"a0Pm"))}),{loadableGenerated:{webpack:function(){return["a0Pm"]},modules:["shared/OakBody/LiveRecirculation"]}}),Dl=Ze()((function(){return Promise.all([n.e(24),n.e(81)]).then(n.bind(null,"B35i"))}),{loadableGenerated:{webpack:function(){return["B35i"]},modules:["shared/OakBody/ExplainerRecirculation"]}}),Bl=Ze()((function(){return Promise.all([n.e(0),n.e(3),n.e(11),n.e(159),n.e(124)]).then(n.bind(null,"+mHm"))}),{loadableGenerated:{webpack:function(){return["+mHm"]},modules:["shared/Recirculation"]}}),zl=Ze()((function(){return Promise.all([n.e(153),n.e(78)]).then(n.bind(null,"pfIa"))}),{loadableGenerated:{webpack:function(){return["pfIa"]},modules:["../EpisodeFooter"]}}),Fl=Ze()((function(){return n.e(125).then(n.bind(null,"dssk"))}),{loadableGenerated:{webpack:function(){return["dssk"]},modules:["../RelatedCoverage"]}}),Ul=Ze()((function(){return Promise.all([n.e(17),n.e(175)]).then(n.bind(null,"yDXq"))}),{loadableGenerated:{webpack:function(){return["yDXq"]},modules:["shared/WelcomeBanner/WelcomeBannerSubs"]}}),Hl=Ze()((function(){return n.e(174).then(n.bind(null,"Xb6+"))}),{loadableGenerated:{webpack:function(){return["Xb6+"]},modules:["shared/WelcomeBanner/WelcomeBannerRegis"]}}),Wl=Ze()((function(){return Promise.all([n.e(13),n.e(113)]).then(n.bind(null,"tBcc"))}),{loadableGenerated:{webpack:function(){return["tBcc"]},modules:["shared/OakBody/NewsletterRecirculation"]}}),ql=Xe.storyPageTests.INTERRUPTIONS_HOLDOUT_TEST,Vl=m()(kl||(kl=u()(["\n  query trustAssetsQuery($id: String!) {\n    article(id: $id) {\n      trustAssets {\n        region\n        assetName\n        ruleName\n        testName\n        parentTest\n        asset {\n          __typename\n          ... on EmbeddedInteractive {\n            id\n            sourceId\n            html\n            slug\n            compatibility\n            displayProperties {\n              minimumWidth\n              maximumWidth\n              displayOverrides\n              __typename\n            }\n            __typename\n          }\n          ... on Capsule {\n            uri\n          }\n        }\n      }\n    }\n  }\n"])));function Gl(e){var t,n,i,a,s,c,u,f,m,g,y,v,b,_,w,k,O,E,T,C,S,I,A,j,L,R,N,D=e.data,B=D.article,z=Object(P.useLocation)(),U=Object(h.a)(),H=Object(F.a)(),W=H.isCrawler,V=H.isOptimisticallyTruncated,G=Object(re.a)().gatewayIsEmbedded,Y=Object(ee.b)(),Z=Object(nt.b)(),X="InteractiveBlock"===(null===(n=((null==B||null===(t=B.sprinkledBody)||void 0===t?void 0:t.content)||[])[0])||void 0===n?void 0:n.__typename),J=Object(d.useReducer)(q.a,{companionColumnZones:[],isBrowser:!1,initialArticle:B,triggeredTrustCall:!1}),K=o()(J,2),$=K[0],Q=K[1];lo.c.mark("storyRender");var ne=$.initialArticle,ie=(null==U||null===(i=U[x.h.name])||void 0===i?void 0:i.allocated)&&(null==U||null===(a=U[x.h.name])||void 0===a?void 0:a.variant)===x.h.variant,ae=Object(Ge.useLazyQuery)(Vl,{variables:{id:null==ne?void 0:ne.url},ssr:!1,fetchPolicy:"cache-first",onError:function(e){var t=new Error(e);t.name="Error fetching vi trust assets",Object(vt.a)(t)},onCompleted:function(e){var t,n=null==e||null===(t=e.article)||void 0===t?void 0:t.trustAssets;if(n){var i=ne.associatedAssets.map((function(e){return e.ruleName})),r=n.filter((function(e){return!i.includes(e.ruleName)})),a=[].concat(de()(r),de()(ne.associatedAssets));Q({initialArticle:Ll(Ll({},$.initialArticle),{},{associatedAssets:a})})}}}),oe=o()(ae,1)[0];Object(d.useEffect)((function(){ie&&!$.triggeredTrustCall&&(oe(),Q({triggeredTrustCall:!0}))}),[ie,oe,$.triggeredTrustCall]);var se=function(e){Q(function(e,t){var n={height:t,position:e.companionColumnZones.length,companionComponent:null,companionName:null};return e.companionColumnZones.push(n),e}($,e))},le=function(e,t){var n=function(e,t,n,i,r){var a=n.requirements,o=a.shouldComponentMount,s=a.appearAfterFirstAd,c=a.appearsAtMobile,u=a.minHeight,d=!1,p=e.companionColumnZones[i],f=t.getCompanionFlags().placedFirstAd,m="function"!=typeof o||o(r),h=!s||f&&i>f.position,g=function(e,t){var n="placed".concat(t);return e.getCompanionFlags()[n]}(t,n.name),y=null===p.companionComponent,v=p.height>=u||c;return m&&h&&!g&&y&&v&&(p.companionComponent=n.component,p.companionName=n.name,t.setCompanionFlags(l()({},"placed".concat(n.name),!0)),d=!0),{state:e,stateChanged:d}}($,Y,e,t,ne);n.stateChanged&&Q(n.state)},ue=null===(s=U[ql.name])||void 0===s?void 0:s.variant;Object(d.useEffect)((function(){Z&&Boolean(ue)&&Object(ce.e)(ql.name)}),[Z,ue]),Object(d.useEffect)((function(){Q({isBrowser:!0}),Us.forEach((function(e){"last"===e.requirements.position?function(e){for(var t=$.companionColumnZones.length-1;t>-1;t-=1)le(e,t)}(e):function(e){for(var t=0;t<$.companionColumnZones.length;t+=1)le(e,t)}(e)}))}),[]);var pe=$.companionColumnZones,fe=ne.section,me=ne.subsection,he=ne.sprinkledBody.content||[],ge=fe&&fe.name||"",ye=me&&me.name||"",ve=me&&me.url||fe&&fe.url||"",be=me&&me.displayName||fe&&fe.displayName||"",_e=Object(Ml.a)(ne),we=Object(zr.a)({sectionContent:ge,subsectionContent:ye,adSensitivity:_e,taxonomyException:ne.dfpTaxonomyException}),xe="world"===(null==fe?void 0:fe.name);Object(d.useEffect)((function(){var e;xe&&(null===(e=navigator)||void 0===e||e.joinParakeetInterestGroup({origin:"https://ib.adnxs.com",interests:["29622278"],readers:["https://ib.adnxs.com"]},2592e3))}),[xe]);var ke=Se({},{data:D,location:z}),Oe=Object(ar.d)(ne.sprinkledBody.content[0]),Ee="object"===Ve()(Object(_n.a)(he)),Te=Oe||ne.sprinkledBody.content.some((function(e){return"HeaderFullBleedHorizontalBlock"===e.__typename||"HeaderFullBleedVerticalBlock"===e.__typename||Object(wr.b)(e)})),Ce="podcasts"===(null==fe?void 0:fe.name),Pe=ne.column&&(["the-weekly","the-dispatch"].includes(ne.column.slug)||Ce);Y.setCompanionFlags({placedSignatureJournalism:!1}),null!=U&&null!==(c=U.STYLN_elevate_series_collections)&&void 0!==c&&c.allocated&&Object(ce.e)("STYLN_elevate_series_collections");var Me="SJ_AA_OnboardingFlow_CrossPlatform_Exposure_Test";null!=U&&null!==(u=U[Me])&&void 0!==u&&u.allocated&&null!==(null==U||null===(f=U[Me])||void 0===f?void 0:f.variant)&&Object(ce.e)(Me);var Ie=Object(tt.hidePharmacyEmailSignup)(ne),Ae=Object(d.useCallback)((function(e){var t;return!Ie||null==e||null===(t=e.assetName)||void 0===t||!t.includes("email-signup")}),[Ie]),je=Object(d.useMemo)((function(){var e;return null==ne||null===(e=ne.associatedAssets)||void 0===e?void 0:e.filter(Ae)}),[null==ne?void 0:ne.associatedAssets,Ae]),Le=Object(d.useMemo)((function(){return Ce?[]:null==ne?void 0:ne.storylines}),[null==ne?void 0:ne.storylines,Ce]),Ne=Object(On.b)(ne),De=Object(Fr.c)(ne),Be=Object(Je.parseUnstructuredData)(Object(Je.getLiveAsset)(ne)),ze=Object(On.e)(null==Be?void 0:Be.typeOfBlog),Fe=!(null==ne||!ne.associatedNewsletter),Ue=Object(Vr.e)({scope:qr.e,limit:qr.c,frequency:Vr.b}),He=Object(Rr.a)(Ue).showWelcomeBannerSubs,We=Object(Vr.e)({scope:qr.d,limit:qr.b,frequency:Vr.a}),qe=Object(Nr.a)(We).showWelcomeBannerRegi,Ye=r()(Ul,{showWelcomeBannerSubs:He,messageCap:Ue}),Ze=r()(Hl,{showWelcomeBannerRegi:qe,messageCap:We});Object(Gr.b)(U)&&Object(ce.e)(Gr.a.name);var Ke=(null==ne||null===(m=ne.associatedNewsletter)||void 0===m||null===(g=m.newsletterProduct)||void 0===g?void 0:g.newsletterProductData)||{},Qe=Object(Wr.b)(Ke),st=Object(Gr.e)(Ke,U),lt=r()(Qn.a,{region:$e.a.BELOW_MAIN_CONTENT,associatedAssets:null==ne?void 0:ne.associatedAssets}),ct=Object(Bt.b)(Ll(Ll({},ne),{},{storylines:Le}));Object(d.useEffect)((function(){var e,t="SJ_xpn_storylines_desktop_cwv_0124";window&&window.matchMedia("(min-width: 1024px)").matches&&ct&&!Ne&&!De&&U&&null!=U&&null!==(e=U[t])&&void 0!==e&&e.allocated&&Object(ce.e)(t)}),[U,ct,Ne,De]),Object(Xe.canStorylineComposeBlock)({storyline:null==Le||null===(y=Le[0])||void 0===y?void 0:y.storyline,block:Xe.STORYLINE_BLOCKS.guide})&&(lt=r()(Hr.a,{storyline:Le[0].storyline,pageType:ne.__typename,parentUri:ne.uri,region:$e.a.BELOW_MAIN_CONTENT,ruleName:Le[0].ruleName,testName:Le[0].testName})),[jn.c.bottomGenericVariant.name,jn.c.bottomSpecificVariant.name].includes(null==U||null===(v=U[jn.c.name])||void 0===v?void 0:v.variant)&&Object(jn.a)(ne)&&(lt=r()(jn.b,{asset:ne}));var ut=null==ne||null===(b=ne.collections)||void 0===b||null===(_=b.filter((function(e){return["COLUMN","SPOTLIGHT","SERIES"].includes(e.collectionType)})))||void 0===_?void 0:_.map((function(e){return e.uri})),dt=null==ne||null===(w=ne.collections)||void 0===w?void 0:w.map((function(e){return e.uri})),pt=r()(Bl,{associatedNewsletter:null==ne?void 0:ne.associatedNewsletter,assetUri:null==ne?void 0:ne.uri,collectionUris:dt,recircSectionUrl:ve,recircSectionDisplayName:be,articleId:ne.sourceId,url:ne.url,article:ne}),ft=Object(d.useMemo)((function(){return Ll(Ll({},ne),{},{associatedAssets:je,storylines:Le})}),[ne,je,Le]),mt=!G&&V&&(null==ft?void 0:ft.wordCount)>=500;return r()(rt.a,{article:ne},void 0,r()(tl,{article:ne,hasFullBleedHeader:Te}),r()(Br.a,{route:te.a,section:ge,adUnitPath:we,adTargeting:ke}),r()(Pl,{optimisticallyTruncated:mt,render:function(e){var t,n=e.TruncatorMessage,i=e.truncated,a=e.dismissTruncator;return p.a.createElement(p.a.Fragment,null,k||(k=r()(Dr.a,{article:ne})),r()(it.a,{id:"story",className:Object(M.cx)(nl,l()({},Al.a,!Te))},void 0,!Oe&&r()("div",{className:Object(M.cx)(xr.b,(t={},l()(t,Al.b,Te&&!Z),l()(t,Al.c,Te&&Z),t))},void 0,Ce&&(Ol||(Ol=r()(et.a,{}))),ct&&!Ne&&!De&&!X&&(O||(O=r()(Ha,{article:ne,hasFullBleedHeader:Te}))),ct||Ne?E||(E=r()(ra,{renderStorylineMenu:ct,renderLiveBreakoutMenu:Ne,article:ne})):r()(Qn.a,{region:$e.a.TOP_BANNER,associatedAssets:null==ne?void 0:ne.associatedAssets})),!Ce&&!Te&&(T||(T=r()(rl,{edge:te.a,hasHeader:Ee}))),r()(Il.a,{timesTags:ne.timesTags},void 0,r()(Ct,{},void 0,r()(_r,{asset:ft,truncated:i,dismissTruncator:a,companionColumnZones:pe,addZone:se,isLivePost:Ne,isExplainerPost:De,welcomeBannerSubsDZComponent:Ye,welcomeBannerRegiDZComponent:Ze,optimisticallyTruncated:mt}))),!G&&p.a.createElement(p.a.Fragment,null,C||(C=r()(ao,{article:ne})),!i&&(S||(S=r()(Ko,{article:ne}))),i&&null!==n&&r()(n,{dismissTruncator:a,adSensitivity:_e}),r()(at.a,{offset:500,isLazy:!0},void 0,r()(Fl,{data:ne,articleId:ne.url})),De&&(I||(I=r()(at.a,{offset:500},void 0,r()(Dl,{article:ne})))),r()(at.a,{offset:500,isLazy:!W},void 0,Ne&&!De&&!ze&&(A||(A=r()(at.a,{offset:500},void 0,r()(Nl,{article:ne})))),lt),El||(El=r()(Ur.b,{region:"body"})),Pe&&r()(at.a,{offset:500},void 0,r()(zl,{data:ne,articleId:ne.url})),!i&&Fe&&r()(at.a,{offset:500,isLazy:!W},void 0,j||(j=r()(oo.b,{pageType:"test-recirc-optimize"},void 0,r()(Wl,{newsletterConfig:Qe,collectionUris:ut,defaultRecircComponent:pt}),Tl||(Tl=r()(so.a,{}))))),r()("div",{id:"bottom-sheet-sensor"},void 0,ne.collections&&!Pe&&!Ne&&!st&&(L||(L=r()(at.a,{offset:500},void 0,pt)))),Cl||(Cl=r()("div",{},void 0,r()(bi.a,{id:"bottom"}))),Object(Re.i)()&&(R||(R=r()(Rl,{article:ne}))),N||(N=r()(ot.a,{adSensitivity:_e,article:ne})))))}}))}Gl.displayName="AssembledArticlePage",Gl.fragments={article:m()(Sl||(Sl=u()(["\n    fragment AssembledArticlePage_article on Article {\n      __typename\n      id\n      url\n      sourceId\n      section {\n        id\n        name\n        url\n        displayName\n      }\n      subsection {\n        id\n        name\n        url\n        displayName\n      }\n      collections {\n        id\n        uri\n        active\n        slug\n        header\n        tagline\n        mobileHeader\n        lastModified\n        firstPublished\n      }\n      column {\n        id\n        slug\n      }\n      dfpTaxonomyException\n      sprinkledBody {\n        content @take(first: $bodyCount) @filterEmpty {\n          __typename\n        }\n      }\n      associatedNewsletter {\n        newsletterProduct {\n          id\n          newsletterProductData {\n            code\n            name\n            allowedEntitlement\n            subscriptionPageLink\n            isOnsiteFreeTrialEnabled\n            splashSignupCaption\n            signupModuleHeadline\n            signupModuleSummary\n            sampleLink\n            signupTitleImage\n            signupAltText\n            splashThumbImage\n            frequency\n            sampleLink\n          }\n        }\n      }\n      ...getAdSensitivity_article\n      ...CommentsProvider_creativeWork\n      ...ArticleHelmet_article\n      ...OakBody_article\n      ...InStoryMasthead_article\n      ...Region_article\n      ...StorylineMenuBlock_creativeWork\n      ...StorylineGuideBlock_creativeWork\n      ...FooterBlock_data\n    }\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n    ","\n  "])),Ml.a.fragments.article,rt.a.fragments.creativeWork,tl.fragments.article,_r.fragments.article,Dr.a.fragments.article,Qn.a.fragments.article,Bt.a.fragments.creativeWork,Hr.a.fragments.creativeWork,Ko.fragments.data)};var Yl,Zl,Xl,Jl,Kl=Gl;ie.a.fragments={article:m()(Yl||(Yl=u()(["\n    fragment isRTL_article on Article {\n      id\n      language {\n        code\n      }\n    }\n  "])))};var $l=function(e){var t,n=!0;e&&e.compatibility&&(e.compatibility.hasOakConversionError&&(n=!1),null!==(t=e.compatibility)&&void 0!==t&&t.isOak&&(n=!0));return n};$l.fragments={article:m()(Zl||(Zl=u()(["\n    fragment isCompatibleMobile_article on Article {\n      id\n      compatibility {\n        hasOakConversionError\n        isOak\n      }\n    }\n  "])))};var Ql=function(e){var t,n=!0;e&&e.compatibility&&(e.compatibility.hasOakConversionError&&(n=!1),null!==(t=e.compatibility)&&void 0!==t&&t.isOak&&(n=!0));return n};Ql.fragments={article:m()(Xl||(Xl=u()(["\n    fragment isCompatibleDesktop_article on Article {\n      id\n      compatibility {\n        hasOakConversionError\n        isOak\n      }\n    }\n  "])))};var ec=function(e,t,n,i){var r="smartphone"===i||"phone"===i,a=/^http(s)?:\/\/alpha-preview\./.test(t),o=/^http(s)?:\/\/scoop\./.test(t);if(Js(e))return!0;if(o||a){r=!0;var s=n.search,l=O.a.parse(s);l&&l.device&&"desktop"===l.device.toLowerCase()&&(r=!1)}return r?$l(e):Ql(e)};ec.fragments={article:m()(Jl||(Jl=u()(["\n    fragment isCompatible_article on Article {\n      id\n      ...isInternationalized_article\n      ...isCompatibleMobile_article\n      ...isCompatibleDesktop_article\n    }\n    ","\n    ","\n    ","\n  "])),Js.fragments.article,$l.fragments.article,Ql.fragments.article)};var tc,nc,ic,rc,ac,oc,sc=ec;function lc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function cc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lc(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var uc=vi.env.STORY_SURROGATE_CONTROL,dc=m()(tc||(tc=u()(["\n  query ArticleQuery($id: String!, $bodyCount: Int!, $isTheWeekly: Boolean!) {\n    article: workOrLocation(id: $id) {\n      __typename\n      ... on Article {\n        id\n        compatibility {\n          isOak\n          hasInlineEmbeddedInteractives\n        }\n        archiveProperties {\n          timesMachineUrl\n          lede @stripHtml\n          thumbnails {\n            height\n            url\n            width\n          }\n        }\n        collections @filterEmpty {\n          id\n          url\n          slug\n        }\n        tone\n        section {\n          id\n          name\n          displayName\n          url\n          uri\n        }\n        subsection {\n          id\n          name\n          displayName\n          url\n          uri\n        }\n        sprinkledBody {\n          content @filterEmpty {\n            __typename\n          }\n        }\n        storyFormat\n        ...storyAdRequirements_article\n        ...isCompatible_article\n        ...isRTL_article\n        ...StoryTrackingMapper_article\n        ...AssembledArticlePage_article\n      }\n      ... on RelocatedWork {\n        targetUrl\n      }\n      ... on ExpiredWork {\n        id\n        uri\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"])),Le.AdRequirements.fragments.article,sc.fragments.article,ie.a.fragments.article,We.fragments.article,Kl.fragments.article),pc=Y("article",["collections"]);function fc(e){var t=e.match,n=e.location;return cc({query:dc},function(e){var t=e.match.params,n=t.prefix,i=t.year,r=t.month,a=t.day,o=t.splat,s=e.location,l=i&&r&&a,c=n?"/".concat(n):"",u=l?"".concat(c,"/").concat(i,"/").concat(r,"/").concat(a,"/").concat(o,".html"):"".concat(c,"/article/").concat(o,".html"),d=O.a.parse(s.search);Object(z.d)(d)&&(u=Object(z.b)(d));return{variables:{id:u,bodyCount:1e4,isTheWeekly:/^\/\d{4}\/\d{2}\/\d{2}\/the-weekly/.test(s.pathname)}}}({match:t,location:n}))}var mc={ITERATE_STORY_SURVEY_ANON:x.e,ITERATE_STORY_SURVEY_REGI:x.f,ITERATE_STORY_SURVEY_SUB:x.g};function hc(e){var t,n,i,a,s,l=e.location,c=e.match,u=e.staticContext,p=Object(F.a)(),f=Object(g.a)(),m=f.loading,k=f.error,O=f.data,S=Ae(O,null==p?void 0:p.fastlyAbraConfig,Object(h.a)()),P=Object(U.a)(),M=P.initialDeviceType,I=P.deviceType,A=P.breakpoint,j=We({data:S,deviceType:I}),L=Object(v.useTracking)(j).Track,R=Object(re.a)().gatewayIsEmbedded,N=Object(d.useRef)(0),D=Object(y.a)({percent:.6}).hasMetThreshold,z=function(e){var t;return(null==e||null===(t=e.storylines)||void 0===t?void 0:t.length)>0?e.storylines.map((function(e){return e.ruleName})).join(" "):null}(S),V=function(e){var t;return(null==e||null===(t=e.associatedAssets)||void 0===t?void 0:t.length)>0?e.associatedAssets.map((function(e){return e.ruleName})).join(" "):null}(S),G=function(e){var t,n,i,r=null==e||null===(t=e.sprinkledBody)||void 0===t||null===(n=t.content)||void 0===n||null===(i=n.filter((function(e){return"InteractiveBlock"===e.__typename})))||void 0===i?void 0:i.map((function(e){return e.media.url}));return(null==r?void 0:r.length)>0?r.join(" "):null}(S),Y=(null==S||null===(t=S.article)||void 0===t?void 0:t.storyFormat)||"regular",J=null==S||null===(n=S.article)||void 0===n||null===(i=n.section)||void 0===i||null===(a=i.name)||void 0===a?void 0:a.toLowerCase(),ne=(null==S?void 0:S.article)||{},ae=ne.associatedNewsletter,oe=ne.desk,se=ne.slug,le=ne.url,ce=ne.wordCount,ue=!["opinion","espanol","podcasts"].includes(J),de=Object(d.useMemo)((function(){return ce<850||"Short Form"===Y}),[ce,Y]);!function(e,t){var n,i=Object(b.a)().user,r=Object(d.useState)(!1),a=o()(r,2),s=a[0],l=a[1],c=Object(d.useState)(""),u=o()(c,2),p=u[0],f=u[1],m=(n=i)&&null!=n&&n.email?n.subscriptionDetails.length>0?"sub":"regi":"anon",h=Object(d.useMemo)((function(){return Object.keys(e)}),[e]),g=Object(d.useMemo)((function(){return function(e,t){var n=e.filter((function(e){return e.includes(t.toUpperCase())}));return n.length?n:e}(h,m)}),[h,m]),y=t.requireThreshold,v=t.hasMetThreshold,x=Object(d.useCallback)((function(){var e,n,i=null==t?void 0:t.articleType.split(/\s+/).join("-"),r=null===_.a||void 0===_.a?void 0:_.a.load("nyt-a"),a={userType:m,agentId:r,desk:t.desk,section:t.articleSection,pageviewID:null!==(e=window)&&void 0!==e&&e.nyt_et&&null!==(n=window)&&void 0!==n&&n.nyt_et.get_pageview_id?window.nyt_et.get_pageview_id():"",slug:t.slug,referrerPage:t.url,device:t.deviceType,pgtime:t.timeRead,storylines:t.storylines,assocAsset:t.associatedAssets,assocNewsletter:t.associatedNewsletter,interactives:t.interactives,articleType:i};window.Iterate("identify",m,a)}),[t,m]);Object(d.useEffect)((function(){Object(w.a)((function(){if(null!=g&&g.length&&(!y||v)){var t=o()(g,1)[0];f(e[t]),p&&!s&&(window.Iterate("install",p),l(!0),x())}}))}),[i,e,g,t,s,v,y,p,x])}(Object(d.useMemo)((function(){return ue?function(e,t){switch(e){case"Short Form":case!0:return{ITERATE_SHORT_FORM_SURVEY_ANON:x.b,ITERATE_SHORT_FORM_SURVEY_REGI:x.c,ITERATE_SHORT_FORM_SURVEY_SUB:x.d};default:return t}}(de,mc):{}}),[ue,de]),Object(d.useMemo)((function(){return{articleType:Y,articleSection:J,assetsOnPage:V,associatedNewsletter:ae,desk:oe,deviceType:I,hasMetThreshold:D,interactivesOnPage:G,requireThreshold:de,slug:se,storylinesOnPage:z,timeRead:N.current,url:le,wordCount:ce}}),[Y,J,V,ae,oe,I,D,G,de,se,z,le,ce]));var pe=Object(d.useReducer)(q.a,{showMasthead:!0,mouseOverMasthead:!1,skipLink:null}),fe=o()(pe,2),me=fe[0],he=fe[1],ge=Object(d.useRef)(null),ye=Object(d.useRef)({placedSignatureJournalism:!1,placedFirstAd:null}),ve=Object(d.useRef)({desktopAdPosition:null,mobileAdPosition:null}),be=Object(d.useRef)({regiDZIndex:null});if(Object(W.a)({route:"story"}),Object(H.a)("storyRenderTime"),Object(d.useEffect)((function(){var e=Date.now(),t=setInterval((function(){var t=Date.now(),n=Math.floor((t-e)/1e3);N.current=n}),1e3);return function(){return clearInterval(t)}}),[]),Object(d.useEffect)((function(){var e;if(null!=S&&null!==(e=S.article)&&void 0!==e&&e.id){var t;if(S&&S.article&&S.article.compatibility)window.ASSETTYPE=null!==(t=S.article.compatibility)&&void 0!==t&&t.isOak?"oak":"article";Object(X.a)(),ge.current&&ge.current!==S.article.id&&(ve.current={desktopAdPosition:null,mobileAdPosition:null}),ge.current=S.article.id}return function(){window.scrollTo(0,0)}}),[null==S||null===(s=S.article)||void 0===s?void 0:s.id]),m||!S)return null;if(k)return nc||(nc=r()(T.a,{}));var _e=pc({data:S}).data.article;if(!_e)return Object(Ml.f)(l,c)?ic||(ic=r()(C.a,{},void 0,r()(B,{}),";")):rc||(rc=r()(E.a,{}));if(_e.targetUrl)return u&&(u.statusCode=301,u.redirectUrl=_e.targetUrl),null;if("ExpiredWork"===_e.__typename)return ac||(ac=r()(C.a,{},void 0,r()(B,{})));if(!(sc(_e,p.origin,l,M)&&_e.sprinkledBody&&_e.sprinkledBody.content&&Array.isArray(_e.sprinkledBody.content)&&0!==_e.sprinkledBody.content.length))return oc||(oc=r()(T.a,{}));u&&(u.surrogateControl=uc);var we=Object(Ml.d)(_e),xe=Object(Ml.e)(_e,we),ke=xe.treatment,Oe=xe.tone,Ee=_e.collections.some((function(e){return $.NO_FOLLOW_COLLECTIONS.includes(e.uri)})),Te={homepath:Object(Ml.b)(_e),language:_e.language&&_e.language.code||null,languageDirection:ie()(null==_e?void 0:_e.language)?"rightToLeft":null,opinionHeaderRedesign:Z.opinionHeaderRedesign,homepage:!1,noFollowExternalLinks:Ee,isShortForm:"Short Form"===_e.storyFormat,storyFormat:_e.storyFormat},Ce=Object(Ml.c)(_e,A),Se={setCompanionFlags:function(e){ye.current=cc(cc({},ye.current),e)},getCompanionFlags:function(){return ye.current},adCounter:ve.current,handleShowMasthead:function(){he({showMasthead:!0})},handleHideMasthead:function(){he({showMasthead:!1})},showMasthead:me.showMasthead,mouseOverMasthead:me.mouseOverMasthead,article:_e,welcomeBanners:be.current};return Se.mastheadStyleProps=Ce,r()(L,{},void 0,r()(K.a,{theme:Te},void 0,r()(ee.a.Provider,{value:Se},void 0,r()(Q.a,{},void 0,r()(C.a,{mastheadStyleProps:Ce,mastheadOnMouseEnter:function(){he({mouseOverMasthead:!0})},mastheadOnMouseLeave:function(){he({mouseOverMasthead:!1})},sectionData:we,treatment:ke,tone:Oe||"news",showMasthead:me.showMasthead,renderMasthead:!Ce.isVerticalFullBleed,stickyMasthead:!Ce.isFullBleed,hideModalOnScroll:!Ce.isFullBleed,skipToContent:me.skipLink,pageType:te.a,showIndex:!R,showFooter:!R},void 0,r()(Kl,{data:S}))))))}hc.displayName="Story",hc.defaultProps={staticContext:void 0};t.default=hc},"W/c9":function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=i(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=d(n("yQsP")),c=d(n("mAfr"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}var p=function(e){var t=e.thumbnailComponent,n=e.playerComponent;if(!e.data||!e.data.media)return null;var i,r=e.data,u=e.article,d=r.media,p=d.summary,f=d.promotionalHeadline,m=d.headline,h=d.podcastSeries,g=(null==m?void 0:m.default)||f,y=(0,s.cx)("margins-h",c.figureClass);return h&&(i=h.image&&h.image.crops.length&&h.image.crops.reduce((function(e,t){return e||t.renditions.find((function(e){return"articleInline"===e.name}))||null}),null))&&!i.url&&(i=null),o.default.createElement("figure",{className:y},o.default.createElement("figcaption",{className:c.figcaptionClass},o.default.createElement("div",{className:"audioFigureHeading"},i&&t?o.default.createElement("div",{className:c.figureMediaClass},o.default.createElement(t,{thumbnail:i,media:d})):null,o.default.createElement("h3",{className:c.headingClass},g),p?o.default.createElement("span",{className:(0,s.cx)(c.captionSpanClass,(0,a.default)({},c.thumbnailClass,i))},p):null)),o.default.createElement(n,{media:d},(0,l.shouldRenderAudioAppPromoInPlayer)(u)?o.default.createElement("div",{className:c.audioBlockPromoClass},o.default.createElement(l.default,{logoPosition:"right",audioDeepLink:(0,l.getAudioDeepLink)(null==u?void 0:u.url)})):null))};p.displayName="AudioBlock",p.defaultProps={article:{},data:{}};var f=p;t.default=f},W61k:function(e,t){e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return'(function () { var _f=function(e,t,a){var n;if(!(n=a,!!(window&&window.adClientUtils&&window.adClientUtils.hasActiveToggle)&&window.adClientUtils.hasActiveToggle(n)))return;!function(e){window&&window.NYTD&&window.NYTD.Abra&&window.NYTD.Abra.reportExposure(e)}(a);let i=()=>{var e=new Date,t=e.getFullYear();return e.getMonth()<9&&(t+="0"),t+=e.getMonth()+1,e.getDate()<10&&(t+="0"),t+=e.getDate(),e.getHours()<10&&(t+="0"),t+=e.getHours(),e.getMinutes()<10&&(t+="0"),t+=e.getMinutes(),e.getSeconds()<10&&(t+="0"),t+e.getSeconds()};window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[];let o=new URLSearchParams(location.search).get("alice_rules_test");var l,s=new XMLHttpRequest,r=window.vi.env.ALS_URL,d=document.querySelector(\'[name="nyt_uri"]\');if(t)l="uri="+(g=t);else if("/"===location.pathname){var g=encodeURIComponent("https://www.nytimes.com/pages/index.html");l="uri="+g}else if(void 0===d||""===d||null===d){var c=e||location.protocol+"//"+location.hostname+location.pathname;l="url="+encodeURIComponent(c)}else{g=encodeURIComponent(d.content);l="uri="+g}var u=document.querySelector(\'[name="template"]\'),w=document.querySelector(\'[name="prop"]\'),m=document.querySelector(\'[name="plat"]\'),p=null==u||null==u.content?"":u.content,_=null==w||null==w.content?"nyt":w.content,v=null==m||null==m.content?"web":m.content;window.innerWidth<740&&(_="mnyt",v="mweb");var b=window.localStorage.getItem("als_test_clientside"),f=null;window.googletag.cmd.push(function(){var e=b&&0!==b.length?b:"empty_empty_empty_"+i(),t=f||e;googletag.pubads().setTargeting("als_test_clientside",t)});var h=window.localStorage.getItem("mktg"),y=null;window.googletag.cmd.push(function(){var e=y||h;e&&googletag.pubads().setTargeting("mktg",e)});var U,L=window.localStorage.getItem("bt");window.googletag.cmd.push(function(){var e=null!=U?U:L;null!=e&&googletag.pubads().setTargeting("bt",e)});var T=window.localStorage.getItem("sub"),S=null;window.googletag.cmd.push(function(){var e=S||T;e&&googletag.pubads().setTargeting("sub",e)}),l=null==o?l:l+"&alice_rules_test="+o,s.open("GET",r+"/als?"+l+"&typ="+p+"&prop="+_+"&plat="+v,!0),s.withCredentials=!0,s.send(),s.onerror=function(){var e="reqfailed_reqfailed_reqfailed_"+i();f=e,window.googletag.cmd.push(function(){googletag.pubads().setTargeting("als_test_clientside",e)});var t={event:"impression",module:{name:"alice-timing",context:"script-load",label:"alice-error-reqfail-"+l}};(window.dataLayer=window.dataLayer||[]).push(t)},s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status){var e=JSON.parse(s.responseText);f=e.als_test_clientside&&0!==e.als_test_clientside.length?e.als_test_clientside:"bou_bou_bou_"+i(),void 0!==e.User&&(void 0!==e.User.mktg&&(y=e.User.mktg,window.localStorage.setItem("mktg",e.User.mktg)),void 0!==e.User.bt&&(U=e.User.bt,window.localStorage.setItem("bt",e.User.bt)),void 0!==e.User.sub&&(S=e.User.sub,window.localStorage.setItem("sub",e.User.sub))),window.googletag.cmd.push(function(){if(e.als_test_clientside&&0!==e.als_test_clientside.length)googletag.pubads().setTargeting("als_test_clientside",e.als_test_clientside),window.localStorage.setItem("als_test_clientside","ls-"+e.als_test_clientside);else{var t=void 0===e.als_test_clientside?"undefined_undefined_undefined_"+i():"blank_blank_blank_"+i();googletag.pubads().setTargeting("als_test_clientside",t);var a={event:"impression",module:{name:"alice-timing",context:"script-load",label:"alice-error-test-client-undefined"}};(window.dataLayer=window.dataLayer||[]).push(a)}if(void 0!==e.User){if(y)googletag.pubads().setTargeting("mktg",y);else{a={event:"impression",module:{name:"alice-timing",context:"script-load",label:"alice-error-mktg-undefined"}};(window.dataLayer=window.dataLayer||[]).push(a)}if(void 0!==U)googletag.pubads().setTargeting("bt",U);else{a={event:"impression",module:{name:"alice-timing",context:"script-load",label:"alice-error-bt-undefined"}};(window.dataLayer=window.dataLayer||[]).push(a)}if(S)googletag.pubads().setTargeting("sub",S);else{a={event:"impression",module:{name:"alice-timing",context:"script-load",label:"alice-error-sub-undefined"}};(window.dataLayer=window.dataLayer||[]).push(a)}(e.User.lucidC1||e.User.lucidC2||e.User.lucidC3||e.User.lucidC4||e.User.lucidC5)&&dataLayer.push({event:"lucidtest",c1_val:e.User.lucidC1,c2_val:e.User.lucidC2,c3_val:e.User.lucidC3,c4_val:e.User.lucidC4,c5_val:e.User.lucidC5})}else{a={event:"impression",module:{name:"alice-timing",context:"script-load",label:"alice-error-user-undefined"}};(window.dataLayer=window.dataLayer||[]).push(a)}if(void 0!==e.Asset)for(var n in e.Asset){var o=e.Asset[n];if(o)googletag.pubads().setTargeting(n,o);else{a={event:"impression",module:{name:"alice-timing",context:"script-load",label:"alice-error-"+n+"-undefined"}};(window.dataLayer=window.dataLayer||[]).push(a)}}else{a={event:"impression",module:{name:"alice-timing",context:"script-load",label:"alice-error-asset-undefined"}};(window.dataLayer=window.dataLayer||[]).push(a)}})}else{s.responseText.substring(0,40);var t="error_"+s.status+"_error_"+i();window.googletag.cmd.push(function(){googletag.pubads().setTargeting("als_test_clientside",t)});var a={event:"impression",module:{name:"alice-timing",context:"script-load",label:"alice-error-ajaxreq-"+s.status+"-"+l}};(window.dataLayer=window.dataLayer||[]).push(a)}}};;_f.apply(null, '.concat(JSON.stringify(t),"); })();")}},W7lC:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("W8MJ")),a=i(n("lwsE")),o=(0,r.default)((function e(t,n){(0,a.default)(this,e),this["@type"]="Question",this.name=t,this.acceptedAnswer={"@type":"Answer",text:n}}));t.default=o},WF6m:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.swiperClass=t.slideClass=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=(0,r.css)("position:relative;display:flex;flex:none;flex-flow:row nowrap;margin-left:-20px;width:calc(100% + 40px);overflow-y:hidden;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch;scroll-behavior:smooth;z-index:2;scrollbar-width:none;clip-path:inset(0 20px);@media (prefers-reduced-motion:reduce){scroll-behavior:auto;}&::-webkit-scrollbar{display:none;}");t.swiperClass=o;var s=(0,r.css)("position:relative;flex:none;padding:0 20px;width:100%;scroll-snap-align:center;scroll-snap-stop:always;box-sizing:border-box;",a.default.breakpoint.small,"{padding:0 20px 10px;}");t.slideClass=s},WG9L:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("1gPk")),o=function(e){var t=e.children,n=e.url,i=e.title;return e.opts.blank?r.default.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:n,title:i,className:a.linkClass},t):r.default.createElement("a",{rel:"noopener noreferrer",href:n,title:i,className:a.linkClass},t)};o.displayName="LinkFormat",o.defaultProps={title:void 0,opts:void 0};var s=o;t.default=s},WGfQ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("W/c9")).default;t.default=r},WPUH:function(e,t,n){"use strict";var i=n("VkAN"),r=n.n(i),a=n("gcR/"),o=n.n(a),s=n("lSNA"),l=n.n(s),c=n("q1tI"),u=n.n(c),d=n("eFc+"),p=n.n(d),f=n("Jqp9"),m=n("lwsE"),h=n.n(m),g=n("W8MJ"),y=n.n(g),v=n("PJYZ"),b=n.n(v),_=n("7W2i"),w=n.n(_),x=n("a1gu"),k=n.n(x),O=n("Nsbk"),E=n.n(O),T=n("MKiQ"),C=n.n(T),S=n("139F"),P=n.n(S),M=n("KQYy"),I=n("2mql"),A=n.n(I),j=n("pCca");function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N=function(e){var t=e.displayName||e.name||"Component";function n(t){var n=Object(j.a)();return u.a.createElement(e,R(R({},t),n))}return n.displayName="WithDeviceType(".concat(t,")"),A()(n,e),n},D=n("wXC7"),B=n.n(D),z=function(){return o()("svg",{width:"60",height:"60",viewBox:"0 0 60 60",fill:"none"},void 0,o()("circle",{cx:"30",cy:"30",r:"30",fill:B.a.color.black,fillOpacity:"0.5"}),o()("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.9665 37.3668L26.5997 40H20V33.4003L22.6332 36.0335L26.6667 32L28 33.3333L23.9665 37.3668Z",fill:B.a.color.white}),o()("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M36.0335 22.6332L33.4003 20H40V26.5997L37.3668 23.9665L33.3333 28L32 26.6667L36.0335 22.6332Z",fill:B.a.color.white}))};z.displayName="ExpandIcon";var F=z,U=function(){return o()("svg",{width:"60",height:"60",viewBox:"0 0 60 60",fill:"none"},void 0,o()("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M35.9665 25.3668L38.5997 28H32V21.4003L34.6332 24.0335L38.6667 20L40 21.3333L35.9665 25.3668Z",fill:B.a.color.black}),o()("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.0335 34.6332L21.4003 32H28V38.5997L25.3668 35.9665L21.3333 40L20 38.6667L24.0335 34.6332Z",fill:B.a.color.black}))};U.displayName="MinimizeIconArrows";var H=U,W=function(){return o()("svg",{width:"60",height:"60",viewBox:"0 0 60 60",fill:"none"},void 0,o()("circle",{cx:"30",cy:"30",r:"30",fill:B.a.color.white,fillOpacity:"0.9"}))};W.displayName="MinimizeIconBackground";var q=W,V=function(){return o()("svg",{width:"60",height:"60",viewBox:"0 0 60 60",fill:"none"},void 0,o()("circle",{cx:"30",cy:"30",r:"29.5",fill:B.a.color.gray90,fillOpacity:"0.9",stroke:B.a.color.gray70}))};V.displayName="MinimizeIconHover";var G=V,Y=Object(f.styled)("button",{target:"e11si9ry0"})("height:60px;width:60px;position:absolute;bottom:10px;right:10px;opacity:",(function(e){return e.isVisible?"1":"0"}),";transition:",(function(e){return e.isVisible?"opacity 0.15s":"opacity 0.3s"}),";background-color:transparent;pointer-events:none;",(function(e){return e.isExpanded&&"\n      display: none;\n    "}),";@media (max-width:736px){display:none;}"),Z=Object(f.css)("position:relative;"),X=Object(f.css)("position:absolute;left:0;top:0;width:60px;height:60px;"),J=Object(f.css)(X," z-index:1;opacity:0.9;"),K=Object(f.css)(X," z-index:2;transition:opacity 0.3s;opacity:0;"),$=Object(f.css)(X," z-index:3;"),Q=Object(f.css)("z-index:901;position:fixed;top:10px;right:10px;height:60px;width:60px;background-color:transparent;opacity:0;pointer-events:none;&:hover{.",K,"{opacity:1;transition:opacity 0.15s;}}"),ee=Object(f.css)("pointer-events:auto;transition:opacity 0.3s 0.2s;opacity:1;"),te=Object(f.css)("position:fixed;opacity:0;scroll-events:none;top:0;left:0;bottom:0;right:0;transition:opacity 0.2s;background-color:",B.a.color.white,";pointer-events:none;"),ne=Object(f.css)("display:block;opacity:1;z-index:",B.a.zIndex.dock+1,";"),ie=Object(f.styled)("div",{target:"e11si9ry1"})("position:absolute;display:flex;flex-direction:column;justify-content:",(function(e){return e.isBelowImage?"flex-start":"center"}),";padding:15px;z-index:",(function(e){return e.isExpanded?900:1}),";top:",(function(e){return e.top}),";left:",(function(e){return e.left}),";width:",(function(e){return e.width}),";height:",(function(e){return e.height}),";opacity:0;",(function(e){return e.isExpanded&&"\n      transition: opacity 0.3s 0.2s;\n      opacity: 1;\n    "}),";span{display:block;}"),re=Object(f.styled)("div",{target:"e11si9ry2"})("position:absolute;top:0;left:",(function(e){return e.marginLeft}),";height:",(function(e){return e.height}),";width:",(function(e){return e.width}),";pointer-events:",(function(e){return e.isExpanded?"auto":"none"}),";"),ae=Object(f.styled)("div",{target:"e11si9ry3"})("position:absolute;z-index:",(function(e){return e.isExpanded&&B.a.zIndex.dock+1||1}),";top:",(function(e){return e.top}),";bottom:",(function(e){return e.bottom}),";left:",(function(e){return e.left}),";right:",(function(e){return e.right}),";overflow:",(function(e){return e.isExpanded?"visible":"hidden"}),";transition:top ","0.2s"," ","ease",",right ","0.2s"," ","ease",",bottom ","0.2s"," ","ease",",left ","0.2s"," ","ease",";-webkit-tap-highlight-color:rgba(255,255,255,0);"),oe=Object(f.styled)("div",{target:"e11si9ry4"})("position:relative;z-index:",(function(e){return e.isExpanded?900:1}),";width:",(function(e){return e.width}),";height:",(function(e){return e.height}),";margin-top:",(function(e){return e.marginTop}),";margin-left:",(function(e){return e.marginLeft}),";margin-bottom:",(function(e){return e.marginBottom}),";margin-right:",(function(e){return e.marginRight}),";transition:width ","0.2s"," ","ease",",height ","0.2s"," ","ease",",margin ","0.2s"," ","ease",";img{width:100%;height:100%;}"),se=Object(f.styled)("div",{target:"e11si9ry5"})("opacity:",(function(e){return e.isExpanded?"0":"1"}),";transition:",(function(e){return e.isExpanded?"opacity 0s":"opacity 0.3s 0.2s"}),";"),le=n("510Z"),ce=n("abzs"),ue=n("t0IW"),de=n("XMA8"),pe=n("pVYW"),fe=n("8npY"),me=n.n(fe),he=function(e){return"articleLarge"===(null==e?void 0:e.name)||/articleLarge/.test(null==e?void 0:e.url)||"superJumbo"===(null==e?void 0:e.name)||/superJumbo/.test(null==e?void 0:e.url)||"jumbo"===(null==e?void 0:e.name)||/jumbo/.test(null==e?void 0:e.url)},ge=function(e){var t,n,i=e.media;if(!i||!i.crops||0===i.crops.length)return null;var r=i.crops.map((function(e){return e.renditions})),a=Object(de.d)(r).filter(Boolean),o=Object(de.j)(a);if(!a.length||!a[0])return null;var s=a[0],l=s.height,c=s.width,u=s.url;a=a.filter(he),o&&a.push(o);var d=i.legacyHtmlCaption?i.legacyHtmlCaption:null===(t=i.caption)||void 0===t?void 0:t.text,p={quality:75,auto:"webp"},f=a.map((function(e){return"".concat(Object(ue.a)(e.url,p)," ").concat(e.width,"w")})),m=c/l,h=i.altText||d;return{caption:d||null,credit:i.credit||null,richCaption:Object(ce.hasRichCaptions)(i)?null==i||null===(n=i.caption)||void 0===n?void 0:n.content:null,defaultCropSrc:Object(ue.a)(u,p),orientation:l>=c?"layoutVertical":"layoutHorizontal",srcSet:f,height:l,width:c,renditions:a,initialAspectRatio:m,alt:h}},ye={SMALL:"50vw",MEDIUM:"((min-width: 600px) and (max-width: 1004px)) 84vw, (min-width: 1005px) 60vw, 100vw",LARGE:"((min-width: 600px) and (max-width: 1004px)) 84vw, (min-width: 1005px) 80vw, 100vw",FULL:"100vw"},ve=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=Object(de.i)(e,t,n),o=ye[a],s=ge(e);return s?{className:r,src:s.defaultCropSrc,srcSet:s.srcSet,sizes:o,onLoad:i}:{}};function be(e){var t,n,i,r,a=e.typeName,s=e.className,l=e.media,c=e.containerClass,u=e.imageClass,d=e.lazyLoad,p=e.fullBleedImageStyles,m=e.imageLoadedHandler,h=e.isFullBleed,g=e.imageContainerRef,y=e.useMobileCrop,v=e.textOverlay,b=Object(j.a)().deviceType,_={};switch(a){case"Image":return t=Object(de.i)(l,b),h&&(t="FULL"),n=me.a[t],i=ye[t],(_=ge(l))?(r="SMALL"!==t||_.caption?"":"sizeSmallNoCaption",o()(le.a,{figureClass:Object(f.cx)(pe.f,n,r,_.orientation,s),containerClass:Object(f.cx)(pe.d,c),imageClass:u,caption:_.caption,richCaption:_.richCaption,credit:_.credit,defaultCropSrc:_.defaultCropSrc,srcSet:_.srcSet,sizes:i,lazyLoad:d,lazyLoadWidth:_.width,lazyLoadHeight:_.height,fullBleedImageStyles:p,imageLoadedHandler:m,renditions:_.renditions,initialAspectRatio:_.initialAspectRatio,imageContainerRef:g,useMobileCrop:y,textOverlay:v,alt:_.alt})):null;default:return null}}be.defaultProps={className:void 0,typeName:void 0,containerClass:void 0,imageClass:void 0,lazyLoad:!1,fullBleedImageStyles:void 0,imageLoadedHandler:void 0,isFullBleed:void 0,imageContainerRef:void 0,useMobileCrop:!1,textOverlay:null};var _e,we,xe,ke,Oe,Ee=be;function Te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=E()(e);if(t){var r=E()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return k()(this,n)}}var Ce=Y,Se=ie,Pe=re,Me=ae,Ie=oe,Ae=se,je=function(e,t,n){var i,r,a,o,s,l,c=e.width/e.height;if(c<t.width/t.height){var u=Math.min(e.height,t.height)*c,d=(t.width-u)/2;o=Math.max(d,n?230:d),r=(i=Math.min(u,t.width-o))/c,l=Math.max(0,t.width-i-o),s=a=(t.height-r)/2}else{var p=Math.min(e.width,t.width)/c,f=(t.height-p)/2;s=Math.max(f,n?80:f),i=(r=Math.min(p,t.height-s))*c,a=Math.max(0,t.height-r-s),o=l=(t.width-i)/2}return{width:i,height:r,marginTop:a,marginRight:o,marginBottom:s,marginLeft:l}},Le=function(e,t){return e.width/e.height<t.width/t.height?{width:200,height:e.height,top:e.marginTop,left:e.width+e.marginLeft}:{width:e.width-30,height:e.marginBottom-30,top:e.height+e.marginTop,left:e.marginRight}},Re=N(_e=function(e){w()(n,e);var t=Te(n);function n(){var e;h()(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={isExpanded:!1,imageDimensionsExpanded:{},captionDimensions:{}},e.wrapperRef=u.a.createRef(),e.overlayRef=u.a.createRef(),e.imageContainerRef=u.a.createRef(),e.minimizeButtonRef=u.a.createRef(),e.onResize=function(){e.updateDimensions()},e.onKeyDown=function(t){e.state.isExpanded&&"Escape"===t.key&&(t.preventDefault(),e.setState({isExpanded:!1}),document.removeEventListener("keydown",e.onKeyDown))},e.onFocus=function(t){if("Tab"===t.key||9===t.keyCode){var n=e.overlayRef.current.querySelectorAll('button:not(button[class*="ExpandButton"]), [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),i=n[0],r=n[n.length-1];t.shiftKey&&document.activeElement===i&&(r.focus(),t.preventDefault()),t.shiftKey||document.activeElement!==r||(i.focus(),t.preventDefault())}},e.onClick=function(){e.updateDimensions();var t=b()(e);e.state.isExpanded?(t.overlayRef.current.addEventListener("transitionend",(function e(){t.overlayRef.current.removeEventListener("transitionend",e)})),document.removeEventListener("keydown",e.onFocus)):t.overlayRef.current.style.position="absolute",e.state.isExpanded||(window.addEventListener("scroll",(function e(){window.removeEventListener("scroll",e),t.setState({isExpanded:!1})})),document.addEventListener("keydown",e.onKeyDown),document.addEventListener("keydown",e.onFocus)),e.setState({isExpanded:!e.state.isExpanded})},e.getImageId=function(e){if(null==e||!e.url)return null;var t=e.url.split("/"),n=t[t.length-1];return"photo-".concat(n.split(".")[0])},e.focusOnMinimizeButton=function(){e.minimizeButtonRef.current&&e.minimizeButtonRef.current.focus()},e}return y()(n,[{key:"componentDidMount",value:function(){var e=this;if(this.wrapperRef&&this.wrapperRef.current){var t=this.wrapperRef.current.querySelector("figure")||null;this.imageContainerEl=t&&this.imageContainerRef&&this.imageContainerRef.current||null,this.imageContainerEl&&(this.imageContainerEl.addEventListener("click",(function(){e.state.isExpanded||e.onClick()})),this.imageContainerEl.addEventListener("mouseenter",(function(){e.setState({showExpandButton:!0})})),this.imageContainerEl.addEventListener("mouseleave",(function(){e.setState({showExpandButton:!1})})),this.imageContainerEl.style.cursor="pointer")}this.updateDimensions(),window.addEventListener("resize",this.onResize),window.addEventListener("orientationchange",this.onResize)}},{key:"componentDidUpdate",value:function(){this.state.isExpanded&&this.focusOnMinimizeButton()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize),window.removeEventListener("orientationchange",this.onResize),document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keydown",this.onFocus)}},{key:"getActiveRendition",value:function(){var e=(ge(this.props.media)||{}).renditions,t=null;if(this.wrapperRef&&this.wrapperRef.current&&Array.isArray(e)){var n=this.wrapperRef.current.querySelector("img");if(!n||!n.currentSrc)return null;var i=Object(M.b)(n.currentSrc);e.some((function(e){return e.url===i}))&&(t=e.find((function(e){return e.url===i})))}return t}},{key:"getImageContainerDimensions",value:function(){return this.imageContainerEl?this.imageContainerEl.getBoundingClientRect():{}}},{key:"getOverlayPosition",value:function(){if(!this.imageContainerEl)return{top:"0px",right:"0px",bottom:"0px",left:"0px"};var e="0px",t="0px",n="0px",i="0px";if(this.state.isExpanded){var r=this.imageContainerEl.getBoundingClientRect();e="".concat(-1*r.top,"px"),n="".concat(-1*(window.innerHeight-r.bottom),"px"),i="".concat(-1*r.left,"px"),t="".concat(-1*(document.body.clientWidth-r.right),"px")}return{top:e,right:t,bottom:n,left:i}}},{key:"updateDimensions",value:function(){var e=ge(this.props.media)||{},t=this.getActiveRendition(),n={height:e.height||0,width:e.width||0};t&&(n=t);var i={width:document.body.clientWidth,height:window.innerHeight};this.setState({imageDimensionsExpanded:je({height:n.height,width:n.width},i,!0),captionDimensions:Le(je({height:n.height,width:n.width},i,!0),i)})}},{key:"render",value:function(){var e,t,n,i,r,a,s,c,d,p=this;if(this.props.media&&this.props.media.media){var m=this.props.media.media;c=m.caption,d=m.credit;var h=this.props,g=h.deviceType,y=h.useMobileCrop,v=ge(this.props.media),b=ve(this.props.media,g);v&&b.src&&(s=o()(M.a,{lazy:!0,imageProps:b,renditions:v.renditions,initialAspectRatio:v.initialAspectRatio,useMobileCrop:y,alt:v.alt}))}var _=this.getOverlayPosition(),w=this.getImageContainerDimensions();return w.marginLeft=this.imageContainerEl&&this.imageContainerEl.offsetLeft||0,u.a.createElement("div",{className:Z,ref:this.wrapperRef,"data-testid":"photoviewer-wrapper"},o()("div",{className:Object(f.cx)(te,l()({},ne,this.state&&this.state.isExpanded)),"data-testid":this.state&&this.state.isExpanded?"photoviewer-wrapper-visible":"photoviewer-wrapper-hidden"}),o()(Ae,{"data-testid":"photoviewer-children",isExpanded:this.state.isExpanded},void 0,u.a.Children.map(this.props.children,(function(e){return u.a.cloneElement(e,{imageContainerRef:p.imageContainerRef})}))),s&&o()(Pe,{"data-testid":"placeholder",height:"".concat(w.height,"px"),width:"".concat(w.width,"px"),marginLeft:"".concat(w.marginLeft,"px"),isExpanded:this.state.isExpanded,id:this.getImageId(null===(e=this.props.children)||void 0===e||null===(t=e.props)||void 0===t||null===(n=t.media)||void 0===n?void 0:n.media)},void 0,o()(Me,{isExpanded:this.state.isExpanded,innerRef:this.overlayRef,top:_.top,bottom:_.bottom,left:_.left,right:_.right,onClick:function(){p.state.isExpanded&&p.onClick()},"data-testid":this.state.isExpanded?"photoviewer-overlay-expanded":"photoviewer-overlay"},void 0,s&&(c||d)&&o()(Se,{width:"".concat(this.state.captionDimensions.width,"px"),height:"".concat(this.state.captionDimensions.height,"px"),top:"".concat(this.state.captionDimensions.top,"px"),left:"".concat(this.state.captionDimensions.left,"px"),isExpanded:this.state.isExpanded,isBelowImage:this.state.captionDimensions.width>this.state.imageDimensionsExpanded.marginRight,"data-testid":this.state.isExpanded?"photoviewer-captionblock-expanded":"photoviewer-captionblock"},void 0,c&&c.text&&this.state.isExpanded&&o()(C.a,{dangerouslySetInnerHTML:{__html:c.text}}),d&&this.state.isExpanded&&o()(P.a,{dangerouslySetInnerHTML:{__html:d}})),o()(Ie,{isExpanded:this.state.isExpanded,width:this.state.isExpanded&&"".concat(this.state.imageDimensionsExpanded.width,"px")||"".concat(w.width,"px"),height:this.state.isExpanded&&"".concat(this.state.imageDimensionsExpanded.height,"px")||"".concat(w.height,"px"),marginTop:this.state.isExpanded&&"".concat(this.state.imageDimensionsExpanded.marginTop,"px")||"0px",marginLeft:this.state.isExpanded&&"".concat(this.state.imageDimensionsExpanded.marginLeft,"px")||"0px",marginBottom:this.state.isExpanded&&"".concat(this.state.imageDimensionsExpanded.marginBottom,"px")||"0px",marginRight:this.state.isExpanded&&"".concat(this.state.imageDimensionsExpanded.marginRight,"px")||"0px",onClick:function(e){p.state.isExpanded&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),e.preventDefault())}},void 0,o()("div",{style:{visibility:this.state.isExpanded?"visible":"hidden",transition:this.state.isExpanded?"visibility 0s 0s":"visibility 0s 0.5s"}},void 0,s),o()(Ce,{"aria-label":"Expand this image","aria-haspopup":"dialog","aria-expanded":this.state.isExpanded,"aria-controls":this.getImageId(null===(i=this.props.children)||void 0===i||null===(r=i.props)||void 0===r||null===(a=r.media)||void 0===a?void 0:a.media),isExpanded:this.state.isExpanded,isVisible:this.state.showExpandButton||this.state.isExpandButtonFocused,"data-testid":"photoviewer-expand-button",onClick:this.onClick,onFocus:function(){p.setState({isExpandButtonFocused:!0})},onBlur:function(){p.setState({isExpandButtonFocused:!1})}},void 0,we||(we=o()(F,{})))),this.state.isExpanded&&u.a.createElement("button",{type:"button","aria-label":"Minimize this image",className:Object(f.cx)(Q,ee),onClick:this.onClick,"data-testid":"photoviewer-minimize-button",ref:this.minimizeButtonRef},o()("div",{className:J},void 0,xe||(xe=o()(q,{}))),o()("div",{className:K},void 0,ke||(ke=o()(G,{}))),o()("div",{className:$},void 0,Oe||(Oe=o()(H,{})))))))}}]),n}(c.Component))||_e;Re.displayName="PhotoViewer",Re.defaultProps={children:null,media:void 0,deviceType:void 0,useMobileCrop:!1};var Ne=Re,De=n("RIqP"),Be=n.n(De),ze=n("tn1d"),Fe=n.n(ze),Ue=n("XlcC"),He=Object(f.css)("margin:",B.a.breakpoint.mobileBlockMargins,";",B.a.breakpoint.medium,"{margin:",B.a.breakpoint.desktopMediaMargins,";}strong{font-weight:",B.a.font.weight.bold,";}em{font-style:italic;}"),We=Object(f.css)("width:100%;vertical-align:top;"),qe=Object(f.css)("margin:1rem auto;",B.a.breakpoint.small,"{margin-top:",B.a.font.size(30),";}");function Ve(e){var t,n=e.media,i=e.mediaType,r=e.isFirstElement,a=e.className,s=e.lazyLoad,l=e.imageLoadedHandler,c=e.diptychChild,u=e.imageContainerRef,d=e.useMobileCrop,p=e.showCaption,m=Object(j.a)().deviceType,h=Object(f.useTheme)().noFollowExternalLinks,g={};switch(i){case"Image":if(t=Object(de.i)(n,m,c),g=ge(n)){var y,v=g.height>=g.width?"vertical":"horizontal",b=t.toLowerCase(),_=[He],w=g.alt===g.caption;r&&_.push(qe),c&&(_=[]);var x=ve(n,m,c,l,We);x.alt=w?"":g.alt;var k=null!==(y=g)&&void 0!==y&&y.richCaption?g.richCaption.map((function(e){var t,n=Object(Ue.createMapInlineUnionWithOptions)({noFollowExternalLinks:h});return e.content?null==e||null===(t=e.content)||void 0===t?void 0:t.map(n):null})):null,O=o()(M.a,{lazy:s,width:g.width,height:g.height,imageProps:x,renditions:g.renditions,initialAspectRatio:g.initialAspectRatio,imageContainerRef:u,useMobileCrop:d});return o()(Fe.a,{media:O,mediaTypeLabel:i,size:b,orientation:v,className:f.cx.apply(void 0,Be()(_).concat([a,"img-sz-".concat(b)])),itemID:g.defaultCropSrc},void 0,p&&k&&o()(C.a,{},void 0,k),p&&!k&&g.caption&&o()(C.a,{dangerouslySetInnerHTML:{__html:g.caption||""}}),g.credit&&o()(P.a,{"data-testid":"image-credit"},void 0,o()("span",{dangerouslySetInnerHTML:{__html:g.credit||""},"aria-hidden":"false"})))}return null;default:return null}}Ve.defaultProps={media:{},mediaType:"Image",isFirstElement:!1,className:void 0,lazyLoad:!0,imageLoadedHandler:null,diptychChild:!1,imageContainerRef:null,useMobileCrop:!1,showCaption:!0};var Ge,Ye=Ve,Ze=function(e){var t,n=e.data,i=e.className,r=e.isFirstElement,a=e.containerClass,s=e.imageClass,c=e.lazyLoad,u=e.imageOffset,d=e.fullBleedImageStyles,p=e.imageLoadedHandler,m=e.showCaption,h=void 0===m||m,g=e.isFullBleed,y=e.useResponsiveMedia,v=e.usePhotoViewer,b=e.imageNumber,_=e.useMobileCrop,w=void 0===_||_,x=e.textOverlay,k=e.diptychChild,O=e.imageBlockClass;return t=y?o()(Ee,{media:n,className:Object(f.cx)(i,l()({},qe,r)),containerClass:a,imageClass:s,typeName:"Image",lazyLoad:c,imageOffset:u,fullBleedImageStyles:d,imageLoadedHandler:p,showCaption:h,isFullBleed:g,useMobileCrop:w,textOverlay:x}):o()(Ye,{diptychChild:k,media:n,mediaType:"Image",isFirstElement:r,imageLoadedHandler:p,lazyLoad:c,useMobileCrop:w,className:O,showCaption:h}),v?o()(Ne,{imageNumber:b,media:n,useMobileCrop:w},void 0,t):t};Ze.fragments={data:p()(Ge||(Ge=r()(['\n    fragment ImageBlock_data on ImageBlock {\n      size\n      media {\n        id\n        imageType\n        url\n        uri\n        credit\n        legacyHtmlCaption\n        crops(\n          renditionNames: [\n            "articleLarge"\n            "jumbo"\n            "superJumbo"\n            "articleInline"\n            "popup"\n            "mobileMasterAt3x"\n          ]\n        ) {\n          renditions {\n            url\n            name\n            width\n            height\n          }\n        }\n        caption {\n          text\n          content {\n            ... on ParagraphBlock {\n              __typename\n              content {\n                ... on TextInline {\n                  text\n                  ...TextInline_content\n                }\n              }\n            }\n          }\n        }\n        altText\n      }\n    }\n  '])))};t.a=Ze},WQPM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscriptClass=t.default=void 0;var i=n("Jqp9"),r=(0,i.css)("vertical-align:sub;font-size:smaller;line-height:0;");t.subscriptClass=r;var a=(0,i.styled)("sub",{target:"eee5pnf0"})(r,";");t.default=a},WThh:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lSNA")),a=i(n("3Rk2")),o=i(n("wXC7")),s=n("DxDJ");function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var c=["fontSize","lineHeight"];t.default=function(e){return function(t,n){var i=t.theme,u=Object.keys(n).reduce((function(e,t){var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return c.indexOf(t)>-1?i[t]=n[t].map((function(e){return o.default.font.size(e)})):i[t]=n[t],i}),{}),d=i.breakpointMap||s.breakpointMap;return(0,a.default)(e.map((function(e){return d[e]})))(u)}}},WUXL:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("UMeL"))),s=i(n("giFd")),l=i(n("ZssJ"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var u=function(e){var t=e.podcastName,n=e.onPlayPause,i=e.playerRef,r=e.hideTranscript,c=e.isPlaying,u=e.audioDuration,d=e.currentTime,p=e.isVisible,f=e.showControls;return a.default.createElement("header",{className:o.transcriptHeaderClass},a.default.createElement("div",{className:o.kickerClass,id:"modal-title"},"transcript"),a.default.createElement(s.default,{podcastName:t,hideTranscript:r}),f&&a.default.createElement(l.default,{playerRef:i,isPlaying:c,onPlayPause:n,audioDuration:u,currentTime:d,isVisible:p}))};u.displayName="TranscriptHeader",u.defaultProps={podcastName:void 0,onPlayPause:void 0,playerRef:void 0,hideTranscript:void 0,isPlaying:void 0,audioDuration:void 0,currentTime:void 0,isVisible:void 0,showControls:!0};var d=u;t.default=d},Wpbk:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("ZDp4")),a=i(n("W8MJ")),o=i(n("lwsE")),s=i(n("7W2i")),l=i(n("a1gu")),c=i(n("Nsbk"));function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,l.default)(this,n)}}var d=function(e){(0,s.default)(n,e);var t=u(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object.assign({},((0,r.default)(i),i));return(0,o.default)(this,n),(e=t.call(this,a))["@type"]="VideoGallery",e}return(0,a.default)(n)}(i(n("lgII")).default);t.default=d},"WtH/":function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n("q1tI")),a=n("iolA"),o=n("tHll"),s=n("wKlc"),l=i(n("JM9o"));t.default=(0,a.withErrorBoundary)((function(e){var t,n=(0,o.useUnit)(s.config).unit,i=e.isEmbedded;return(null==n?void 0:n.canShow)?(null==n?void 0:n.component)?r.default.createElement(l.default,{unit:n,clientProps:e},r.default.createElement(n.component,{unit:n,isEmbedded:i})):(null===(t=null===s.config||void 0===s.config?void 0:s.config.fallback)||void 0===t?void 0:t.component)?r.default.createElement(l.default,{unit:n,clientProps:e},r.default.createElement(s.config.fallback.component,{unit:n,isEmbedded:i})):null:null}))},Wtq3:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.updateTimeClass=t.liveContainerClass=t.listClass=t.lastModClass=t.innerClass=t.hideOnWebClass=t.headingStyleClass=t.containerClass=t.bulletStyleClass=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=n("3sMT"),s=(0,r.css)("padding:15px;width:",a.default.breakpoint.mobileFullWidth,";margin:",a.default.breakpoint.mobileBlockMargins,";box-sizing:border-box;border:1px solid ",o.color.stroke.quaternary,";background-color:",o.color.background.primary,";a{color:",o.color.content.primary,";text-decoration:none;}",a.default.breakpoint.small,"{padding:20px;width:100%;max-width:600px;}",a.default.breakpoint.medium,"{margin:",a.default.breakpoint.desktopStorylineMargins,";}",a.default.printHide);t.containerClass=s;var l=(0,r.css)("width:100%;");t.innerClass=l;var c=(0,r.css)("font-family:",a.default.font.franklinBase,";font-weight:",a.default.font.weight.bold,";font-size:",a.default.font.size(16),";line-height:",a.default.font.size(22),";color:",o.color.content.secondary,";margin-top:0;margin-bottom:5px;",a.default.breakpoint.small,"{font-size:",a.default.font.size(17),";line-height:",a.default.font.size(24),";}a{color:",o.color.content.secondary,";}a:hover{border-bottom:1px solid ",o.color.stroke.tertiary,";}::after{content:'';margin-left:4px;}");t.headingStyleClass=c;var u=(0,r.css)("font-family:",a.default.font.franklinBase,";font-weight:",a.default.font.weight.medium,";font-size:",a.default.font.size(16),";line-height:",a.default.font.size(22),";margin-left:1em;list-style:disc;margin-bottom:0.75em;",a.default.breakpoint.small,"{font-size:",a.default.font.size(17),";line-height:",a.default.font.size(24),";}a{color:",o.color.content.secondary,";border-bottom:1px solid ",o.color.stroke.tertiary,";}a:hover{border-bottom:1px solid transparent;}");t.bulletStyleClass=u;var d=(0,r.css)("font-family:",a.default.font.franklinBase,";display:flex;align-items:baseline;justify-content:space-between;color:",o.color.signal.breaking,";font-size:",a.default.font.size(16),";",a.default.breakpoint.small,"{font-size:",a.default.font.size(17),";}");t.liveContainerClass=d;var p=(0,r.css)("margin-top:15px;margin-bottom:0;");t.listClass=p;var f=(0,r.css)("font-family:",a.default.font.franklinBase,";font-size:",a.default.font.size(12),";color:",o.color.signal.breaking,";",a.default.breakpoint.medium,"{font-size:",a.default.font.size(13),";}");t.lastModClass=f;var m=(0,r.css)("font-family:",a.default.font.franklinBase,";color:",o.color.signal.breaking,";font-size:",a.default.font.size(14),";max-width:60px;");t.updateTimeClass=m;var h=(0,r.css)("display:none;.NYTApp &{display:block;}");t.hideOnWebClass=h},"X+xt":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.openAttribute=t.getAttributeHost=t.getAttributeConfig=void 0;var r=i(n("lSNA"));function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var o=function(){var e=.6*window.screen.width,t=e*(3/4);return{width:e>800?e:800,height:t>600?t:600}},s=function(){return"scoop.nyt.net"===window.location.hostname?"https://attribute.newsdev.nyt.net":"https://attribute.stg.newsdev.nyt.net"};t.getAttributeHost=s;t.getAttributeConfig=function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},{interactiveConfig:{attribute:[{label:"Question",type:"text",slug:"question_text"},{label:"Email address",type:"text",slug:"email_identity"},{label:"Name (optional)",type:"text",slug:"name_identity"},{label:"Location (optional)",type:"text",slug:"location_text"}]},postbackId:e})};t.openAttribute=function(){var e,t,n,i,r="".concat(s(),"/postmessage"),a=(e=window,t=e.screen,n=e.top,i=o(),{left:n.screenX+(t.width-i.width)/2,top:n.screenY+(t.height-i.height)/2}),l=o(),c=window.open("".concat(r),"attributeWindow","resizable,scrollbars,status,"+"left=".concat(a.left,",top=").concat(a.top,",height=").concat(l.height,",width=").concat(l.width));return function(e){e.opener.addEventListener("unload",(function(){e.close()}))}(c),c}},X4Xf:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("Jqp9")),o=i(n("42vy")),s=n("bNs8"),l=n("V6Yu"),c=i(n("XlcC")),u=i(n("RQdI")),d=n("Au1T"),p=function(e,t){var n,i,a=[];if(null!=e&&null!==(n=e.sprinkledBody)&&void 0!==n&&n.content)i=e.sprinkledBody.content;else{if(null==e||!e.content)return[];i=e.content}var o=i.filter((function(e){return"Dropzone"!==e.__typename}));return o.forEach((function(e,t){if(t<o.length-1&&"Heading2Block"===e.__typename&&"BylineBlock"===o[t+1].__typename){var n={heading2:e,byline:o[t+1]};a.push(n)}})),a.map((function(e){var n,i=e.byline,a=e.heading2,o=a.content.map(c.default),d=(0,l.generateContentLink)(a.content),p=(n=d,function(e){e.preventDefault(),document.getElementById(n).scrollIntoView()}),f=r.default.createElement("p",null,i.bylines[0].prefix," ",(0,s.simpleByline)({authors:i.bylines[0].creators,format:"string"}));return r.default.createElement(u.default,{key:"table-of-contents-item-".concat(o.join(""))},t?r.default.createElement("span",{role:"presentation",onKeyPress:p,onClick:p},o,f):r.default.createElement("a",{href:"#".concat(d),onKeyPress:p,onClick:p},o,f))}))},f=function(e){var t=[];if(!(e||e.content||e.content.content||e.content.content.length))return null;var n=e.content.content;return e.content.content.forEach((function(i,r){if(r<e.content.content.length-1&&"heading2"===i.type.name&&"byline_with_role"===n[r+1].type.name){var a={heading2:i,byline:n[r+1]};t.push(a)}})),t.map((function(e){var t=e.byline,n=e.heading2.textContent;return r.default.createElement(u.default,{key:"table-of-contents-item-".concat(n)},r.default.createElement("a",{href:"#"},n,t.attrs.byline_author_groups.map((function(e,t){var n="".concat(e.prefix," ");return e.authors.forEach((function(t,i){n+=t.titleCaseName,i===e.authors.length-2?n+=" and ":i!==e.authors.length-1&&(n+=", ")})),r.default.createElement("div",{contentEditable:!1,key:"group-".concat(t.toString())},n)}))))}))},m=function(e){var t=e.children,n=e.isInHybrid,i=e.isInEditor,a=e.article,s=e.ledeText,l=e.minItems,c=e.maxItems,u=[];if((!t||i)&&(u=(i?f(a):p(a,n)).slice(0,+c)).length<+l){if(!i)return null;u=r.default.createElement("p",null,"When at least ",l," headings next to a byline are present, they will display here.")}return r.default.createElement("div",{className:d.containerClass},!i&&t||r.default.createElement(r.default.Fragment,null,r.default.createElement(o.default,null,s),r.default.createElement(d.StyledTableOfContents,null,u)))};m.displayName="TableOfContents",m.defaultProps={children:null,isInEditor:!1,isInHybrid:!1,ledeText:"Table of Contents Title Here",maxItems:"10",minItems:"3"};var h=(0,a.withTheme)(m);t.default=h},X7zQ:function(e,t,n){"use strict";t.a={ARICLE_TAXONOMY:"assetTaxonomy",ARTICLE_URL:"url",COMMENT_BODY:"commentBody",COMMENT_NOTIFY:"notifyViaEmailOnApproval",COMMENT_TYPE:"commentType",DISPLAY_NAME:"userDisplayName",EMAIL:"userEmail",LOCATION:"userLocation",PARENT_ID:"parentID",USER_ID:"userID",AVATAR_URL:"avatarUrl",IS_STAFF_COMMENTER:"isStaffCommenter"}},XMA8:function(e,t,n){"use strict";n.d(t,"g",(function(){return r})),n.d(t,"h",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s})),n.d(t,"k",(function(){return l})),n.d(t,"m",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"l",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"p",(function(){return h})),n.d(t,"o",(function(){return g})),n.d(t,"j",(function(){return y})),n.d(t,"n",(function(){return v})),n.d(t,"i",(function(){return b}));var i=function(e,t){return e.find((function(e){return(null==e?void 0:e.name)===t}))},r=function(e,t){if(!e)return null;for(var n=0;n<t.length;n+=1){var r=i(e,t[n]);if(r){var a=r.url;return"images"===a.split("/")[0]&&(r.url="https://static01.nyt.com/".concat(a)),r.url}}return null},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"crops";return e&&e[t]&&0!==e[t].length&&e[t][0].renditions&&0!==e[t][0].renditions.length?e[t][0].renditions[0].url:null},o="https://static01.nyt.com/newsgraphics/images/icons/defaultCrop.png",s="https://static01.nyt.com/newsgraphics/images/icons/defaultPromoCrop.png",l=function(e){return r(e,["facebookJumbo","videoSixteenByNineJumbo1600","articleLarge"])||s},c=function(e){return r(e,["videoSixteenByNine3000","videoSixteenByNineJumbo1600","articleLarge"])||o},u=function(e,t){return r(e,["thumbLarge"])||t||o},d=function(e){return r(e,["thumbStandard"])||o},p=function e(t){return t.reduce((function(t,n){return t.concat(Array.isArray(n)&&n.length>0?e(n):n)}),[])},f=function(e){var t,n,i;return e?e.promoCrops?e.promoCrops:e.assetCrops?e.assetCrops:null!==(t=e.promotionalMedia)&&void 0!==t&&t.assetCrops?e.promotionalMedia.assetCrops:null!==(n=e.promotionalMedia)&&void 0!==n&&null!==(i=n.promotionalMedia)&&void 0!==i&&i.assetCrops?e.promotionalMedia.promotionalMedia.assetCrops:null:null},m=function(e){if(!e)return"";if(!e.promotionalMedia)return"";var t,n=e.promotionalMedia.crops||e.promotionalMedia.spanImageCrops||null;n||null!==(t=e.promotionalMedia.promotionalMedia)&&void 0!==t&&t.crops&&(n=e.promotionalMedia.promotionalMedia.crops);if(!n)return"";var i=n.map((function(e){return e.renditions}));if(!i)return"";var r=p(i);return r||""},h="mobileMasterAt3x",g=function(e){return(null==e?void 0:e.name)===h},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!Array.isArray(e))return null;var t=e.filter(g);return 0===t.length?null:t[0]},v=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!(!Array.isArray(t)||0===t.length)&&(null!==(e=t[0])&&void 0!==e&&e.renditions&&(t=p(t.map((function(e){return e.renditions})))),void 0===t.find((function(e){return(null==e?void 0:e.width)>650}))&&void 0===t.find((function(e){var t;return".gif"===(null==e||null===(t=e.url)||void 0===t?void 0:t.substring(e.url.length-4))})))},b=function(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=p((null==e||null===(n=e.media)||void 0===n||null===(i=n.crops)||void 0===i?void 0:i.map((function(e){return e.renditions})))||[]),o=a.filter((function(e){return(null==e?void 0:e.name)!==h}));return v(o)&&"desktop"===t&&!r?"SMALL":e.size}},XMNT:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.willShowTwoPartStamp=t.getTrans=t.default=t.UPDATED=t.TIME_DISPLAY_EPOCH=t.PUBLISHED=t.HIDE_UPDATED_TS_SECTIONS=t.DATEONLY=void 0;var a=i(n("lSNA")),o=i(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=n("7FfI"),c=n("4mEQ"),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("h58Z"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}t.TIME_DISPLAY_EPOCH="2019-08-20T04:00:04.000Z";var p=["opinion"];t.HIDE_UPDATED_TS_SECTIONS=p;t.DATEONLY="LL";var f={en:"Updated ",es:"Actualizado ","zh-cn":""};t.UPDATED=f;var m={en:"Published ",es:"Publicado ","zh-cn":""};t.PUBLISHED=m;var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en",t=arguments.length>1?arguments[1]:void 0;return Object.prototype.hasOwnProperty.call(t,e)?t[e]:t.en};t.getTrans=h;t.willShowTwoPartStamp=function(e,t){if(!e||!t)return!1;if(!(0,l.isAfterISO)(e,"2019-08-20T04:00:04.000Z"))return!1;if((0,l.isSame)(e,t))return!1;if((0,l.timeDiff)("minutes",15,e,t))return!1;var n=(0,l.isISOToday)(e),i=(0,l.isISOToday)(t),r=(0,l.timeDiff)("days",1,e,t);return!(!n||!i)||!(!n&&!i&&r)&&e!==t};var g=function(e,t){return e.endsWith(t)?o.default.createElement(o.default.Fragment,null,e.replace(t,""),o.default.createElement("span",{className:u.timeChunkClass},t)):e},y=function(e){var t,n=e.children,i=e.className,r=e.updatedText,d=e.lastMajorModification,y=e.canShowTime,v=e.overrideTimeDisplayEpoch,b=e.showUpdatedTimestamp,_=e.useSection,w=e.showReadingTime,x=(0,s.useTheme)();if(!n)return null;var k=(0,l.getTimestampLocale)(null==x?void 0:x.language),O=(0,l.isISOToday)(n),E=p.some((function(e){return(0,c.themeHas)(e,x)}));(0,l.isSame)(n,d)&&(d=void 0),(0,l.timeDiff)("minutes",15,n,d)&&(d=void 0),!1===b&&(d=void 0);var T=y&&O&&!d?"LLLL":"LL",C=(0,l.formatDate)(n,T,k),S=(0,l.formatDate)(n,""),P=h(k,f),M=null===b?((0,l.isAfterISO)(n,"2019-08-20T04:00:04.000Z")||v)&&!E:b;if(d&&!r&&M){var I=(0,l.isISOToday)(d),A=d&&(0,l.timeDiff)("hours",24,n,d)?"llll":"LL",j=h(k,m),L=O?null:j;!O&&I&&(A="LLLL");var R=(0,l.formatDate)(d,A,k),N=O&&I&&(0,l.timeDiff)("hours",3,d,[]),D=(0,l.formatDate)(d,"");if(O||I||!(0,l.timeDiff)("days",1,n,d)||(P=null,R=null,L=null),"LLLL"===T){var B=(0,l.formatDate)(n,"llll",k);C=g(C,B)}if(R&&("LLLL"===A||"llll"===A)){var z=(0,l.formatDate)(d,"llll",k);R=g(R,z)}var F=o.default.createElement(u.PubbedTime,null,L,C),U=P&&R&&o.default.createElement(u.UpdatedTime,{isRecentModification:N},P,R),H=U?D:S;return o.default.createElement(u.StyledTimeStampWithTimeWrap,{dateTime:H,useSection:_,className:i},"rightToLeft"===x.languageDirection&&U,F,"rightToLeft"!==x.languageDirection&&U)}if("LLLL"===T){var W=(0,l.formatDate)(n,"llll",k);C=g(C,W)}return o.default.createElement(u.default,{useSection:_,className:(0,s.cx)(i,(t={},(0,a.default)(t,u.readTimeClass,w),(0,a.default)(t,"reading-time",w),t)),dateTime:S},r&&o.default.createElement(o.default.Fragment,null,o.default.createElement("span",{className:u.liveBriefingDateClass},C),o.default.createElement("span",{className:u.separatorClass},"")),r?o.default.createElement("span",{className:u.updatedClass},P," "):null,r||C)};y.displayName="Timestamp",y.defaultProps={children:null,updatedText:!1,lastMajorModification:void 0,canShowTime:!1,className:void 0,showUpdatedTimestamp:null,overrideTimeDisplayEpoch:!1,useSection:!0,showReadingTime:!1};var v=y;t.default=v},XMyW:function(e,t,n){"use strict";n.r(t),n.d(t,"caData",(function(){return P})),n.d(t,"CaDataProvider",(function(){return M}));var i=n("q1tI"),r=n.n(i),a=n("+fSA"),o=n("wNrk"),s=n("a6hj"),l=n("sdlZ"),c=n("pRWC"),u=n("fQFh"),d=n("jdN1"),p=n("Vcia"),f=n("BIcR"),m=n("+FKv"),h=n("0fzg"),g=n("NeZs"),y=n("/bvS"),v=n("n7ID"),b=n("69/w"),_=n("uTOv"),w=n("0l0s"),x=n("Ycuk"),k=n("urXL"),O=n("tNL+"),E=n("r3VM"),T=n("gVNr"),C=n("3TWG"),S=n("0s5G"),P=[{url:"https://www.nytimes.com/ca/section/us",name:"U.S.",dropdown:[{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"U.S.",link:"https://www.nytimes.com/ca/section/us"},{copy:"Politics",link:"https://www.nytimes.com/ca/section/politics"},{copy:"New York",link:"https://www.nytimes.com/ca/section/nyregion"},{copy:"California",link:"https://www.nytimes.com/column/california-today"},{copy:"Education",link:"https://www.nytimes.com/ca/section/education"},{copy:"Health",link:"https://www.nytimes.com/ca/section/health"},{copy:"Obituaries",link:"https://www.nytimes.com/ca/section/obituaries"},{copy:"Science",link:"https://www.nytimes.com/ca/section/science"}]},{columnWidth:2,hamburgerColumnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"Climate",link:"https://www.nytimes.com/ca/section/climate"},{copy:"Sports",link:"https://www.nytimes.com/ca/section/sports"},{copy:"Business",link:"https://www.nytimes.com/ca/section/business"},{copy:"Tech",link:"https://www.nytimes.com/ca/section/technology"},{copy:"The Upshot",link:"https://www.nytimes.com/ca/section/upshot"},{copy:"The Magazine",link:"https://www.nytimes.com/ca/section/magazine"}]},{columnWidth:4,heading:"U.S. Politics",type:"links",style:{marginLeft:"2rem"},links:[{copy:"2024 Elections",link:"https://www.nytimes.com/news-event/2024-election"},{copy:"Supreme Court",link:"https://www.nytimes.com/topic/organization/us-supreme-court"},{copy:"Congress",link:"https://www.nytimes.com/topic/organization/us-congress"},{copy:"Biden Administration",link:"https://www.nytimes.com/spotlight/joe-biden"}]},{columnWidth:4,heading:"Top Stories",type:"links",links:[{copy:"Trump Investigations",link:"https://www.nytimes.com/news-event/donald-trump-investigations"},{copy:"Immigration",link:"https://www.nytimes.com/news-event/immigration-us"},{copy:"Abortion",link:"https://www.nytimes.com/spotlight/abortion-news"},{copy:"The Eric Adams Administration",link:"https://www.nytimes.com/spotlight/eric-adams-mayor-nyc"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"The Morning",description:"Make sense of the days news and ideas.",link:"https://www.nytimes.com/newsletters/morning-briefing",thumbnailImage:x.a},{title:"The Upshot",description:"Analysis that explains politics, policy and everyday life.",link:"https://www.nytimes.com/newsletters/upshot",thumbnailImage:E.a}]},{type:"hamburgerSpacer",hamburgerColumnWidth:1,columnWidth:0},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"The Daily",description:"The biggest stories of our time, in 20 minutes a day.",link:"https://www.nytimes.com/column/the-daily",thumbnailImage:"https://static01.nyt.com/images/2017/01/29/podcasts/the-daily-album-art/the-daily-album-art-square320-v5.jpg?quality=75&auto=webp&disable=upscale"},{title:"The Run-Up",description:"On the campaign trail with Astead Herndon.",link:"https://www.nytimes.com/column/election-run-up-podcast",thumbnailBorder:!0,thumbnailImage:"https://static01.nyt.com/images/2022/08/29/podcasts/the-run-up-album-art/the-run-up-album-art-thumbLarge.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/ca/section/world",name:"World",dropdown:[{columnWidth:1},{columnWidth:4,hamburgerColumnWidth:5,heading:"Sections",type:"links",innerGridColumnCount:2,columns:[[{copy:"World",link:"https://www.nytimes.com/ca/section/world"},{copy:"Africa",link:"https://www.nytimes.com/ca/section/world/africa"},{copy:"Americas",link:"https://www.nytimes.com/ca/section/world/americas"},{copy:"Asia",link:"https://www.nytimes.com/ca/section/world/asia"},{copy:"Australia",link:"https://www.nytimes.com/ca/section/world/australia"},{copy:"Canada",link:"https://www.nytimes.com/ca/section/world/canada"}],[{copy:"Europe",link:"https://www.nytimes.com/ca/section/world/europe"},{copy:"Middle East",link:"https://www.nytimes.com/ca/section/world/middleeast"},{copy:"Science",link:"https://www.nytimes.com/ca/section/science"},{copy:"Climate",link:"https://www.nytimes.com/ca/section/climate"},{copy:"Health",link:"https://www.nytimes.com/ca/section/health"},{copy:"Obituaries",link:"https://www.nytimes.com/ca/section/obituaries"}]]},{columnWidth:1},{columnWidth:5,heading:"Top Stories",type:"links",links:[{copy:"Israel-Hamas War",link:"https://www.nytimes.com/news-event/israel-hamas-gaza"},{copy:"Russia-Ukraine War",link:"https://www.nytimes.com/news-event/ukraine-russia"}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",items:[{title:"Morning Briefing: Europe",description:"Get what you need to know to start your day.",link:"https://www.nytimes.com/newsletters/morning-briefing-europe",thumbnailImage:p.a},{title:"The Interpreter",description:"Original analysis on the weeks biggest global stories.",link:"https://www.nytimes.com/newsletters/the-interpreter",thumbnailImage:w.a}]},{columnWidth:4,heading:"Newsletters",hideHeading:!0,footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Australia Letter",description:"News, features and opinion for readers in the region.",link:"https://www.nytimes.com/newsletters/australia-letter",thumbnailImage:o.a},{title:"Canada Letter",description:"Backstories and analysis from our Canadian correspondents.",link:"https://www.nytimes.com/newsletters/canada-letter",thumbnailImage:l.a}]}]},{url:"https://www.nytimes.com/ca/section/business",name:"Business",dropdown:[{columnWidth:1},{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"Business",link:"https://www.nytimes.com/ca/section/business"},{copy:"Tech",link:"https://www.nytimes.com/ca/section/technology"},{copy:"Economy",link:"https://www.nytimes.com/ca/section/business/economy"},{copy:"Media",link:"https://www.nytimes.com/ca/section/business/media"},{copy:"Finance and Markets",link:"https://www.nytimes.com/section/markets-overview"}]},{columnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"DealBook",link:"https://www.nytimes.com/ca/section/business/dealbook"},{copy:"Personal Tech",link:"https://www.nytimes.com/ca/section/technology/personaltech"},{copy:"Energy Transition",link:"https://www.nytimes.com/ca/section/business/energy-environment"},{copy:"Your Money",link:"https://www.nytimes.com/ca/section/your-money"}]},{columnWidth:5,heading:"Top Stories",type:"links",links:[{copy:"U.S. Economy",link:"https://www.nytimes.com/news-event/economy-business-us"},{copy:"Stock Market",link:"https://www.nytimes.com/section/markets-overview"},{copy:"Artificial Intelligence",link:"https://www.nytimes.com/spotlight/artificial-intelligence"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"DealBook",description:"The most crucial business and policy news you need to know.",link:"https://www.nytimes.com/newsletters/dealbook",thumbnailImage:d.a}]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Hard Fork",description:"Our tech journalists help you make sense of the rapidly changing tech world.",link:"https://www.nytimes.com/column/hard-fork",thumbnailImage:"https://static01.nyt.com/images/2022/09/28/podcasts/hard-fork-album-art/hard-fork-album-art-square320-v2.png?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/ca/section/arts",name:"Arts",dropdown:[{columnWidth:1},{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"Today's Arts",link:"https://www.nytimes.com/ca/section/arts"},{copy:"Books",link:"https://www.nytimes.com/ca/section/books"},{copy:"Best Sellers",link:"https://www.nytimes.com/books/best-sellers"},{copy:"Dance",link:"https://www.nytimes.com/ca/section/arts/dance"},{copy:"Movies",link:"https://www.nytimes.com/ca/section/movies"},{copy:"Music",link:"https://www.nytimes.com/ca/section/arts/music"}]},{columnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"Television",link:"https://www.nytimes.com/ca/section/arts/television"},{copy:"Theater",link:"https://www.nytimes.com/ca/section/theater"},{copy:"Pop Culture",link:"https://www.nytimes.com/spotlight/pop-culture"},{copy:"T Magazine",link:"https://www.nytimes.com/ca/section/t-magazine"},{copy:"Visual Arts",link:"https://www.nytimes.com/ca/section/arts/design"}]},{columnWidth:5,heading:"Recommendations",type:"links",links:[{copy:"Best of 2023",link:"https://www.nytimes.com/spotlight/best-of"},{copy:"Award Season",link:"https://www.nytimes.com/news-event/awards-season"},{copy:"Critics Picks",link:"https://www.nytimes.com/spotlight/critics-picks"},{copy:"What to Read",link:"https://www.nytimes.com/spotlight/books-to-read"},{copy:"What to Watch",link:"https://www.nytimes.com/spotlight/what-to-watch"},{copy:"What to Listen To",link:"https://www.nytimes.com/column/playlist"},{copy:"5 Minutes to Make You Love Music",link:"https://www.nytimes.com/interactive/2023/10/27/arts/music/music-fivemins-collection.html"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Read Like the Wind",description:"Book recommendations from our critics.",link:"https://www.nytimes.com/newsletters/read-like-the-wind",thumbnailImage:b.a},{title:"Watching",description:"Streaming TV and movie recommendations.",link:"https://www.nytimes.com/newsletters/watching",thumbnailImage:C.a}]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Book Review",description:"The podcast that takes you inside the literary world.",link:"https://www.nytimes.com/column/book-review-podcast",thumbnailImage:"https://static01.nyt.com/images/2018/03/27/books/book-review-album-art-v2/book-review-album-art-v2-thumbLarge-v3.jpg?quality=75&auto=webp&disable=upscale"},{title:"Popcast",description:"Pop music news, new songs and albums, and artists of note.",link:"https://www.nytimes.com/column/popcast-pop-music-podcast",thumbnailImage:"https://static01.nyt.com/images/2011/05/20/multimedia/music-popcast/music-popcast-thumbLarge-v3.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/spotlight/lifestyle",name:"Lifestyle",dropdown:[{columnWidth:1},{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"Lifestyle",link:"https://www.nytimes.com/spotlight/lifestyle"},{copy:"Well",link:"https://www.nytimes.com/ca/section/well"},{copy:"Travel",link:"https://www.nytimes.com/ca/section/travel"},{copy:"Style",link:"https://www.nytimes.com/ca/section/style"},{copy:"Real Estate",link:"https://www.nytimes.com/ca/section/realestate"},{copy:"Food",link:"https://www.nytimes.com/ca/section/food"}]},{columnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"Fashion",link:"https://www.nytimes.com/ca/section/fashion"},{copy:"Love",link:"https://www.nytimes.com/ca/section/fashion/weddings"},{copy:"Your Money",link:"https://www.nytimes.com/ca/section/your-money"},{copy:"Personal Tech",link:"https://www.nytimes.com/ca/section/technology/personaltech"},{copy:"T Magazine",link:"https://www.nytimes.com/ca/section/t-magazine"}]},{columnWidth:3,heading:"Columns",type:"links",links:[{copy:"Modern Love",link:"https://www.nytimes.com/column/modern-love"},{copy:"The Hunt",link:"https://www.nytimes.com/column/the-hunt"},{copy:"Social Qs",link:"https://www.nytimes.com/column/social-qs"},{copy:"The Ethicist",link:"https://www.nytimes.com/column/the-ethicist"}]},{columnWidth:2,heading:"Well",type:"links",links:[{copy:"Eat",link:"https://www.nytimes.com/ca/section/well/eat"},{copy:"Move",link:"https://www.nytimes.com/ca/section/well/move"},{copy:"Mind",link:"https://www.nytimes.com/ca/section/well/mind"},{copy:"Family",link:"https://www.nytimes.com/ca/section/well/family"},{copy:"Live",link:"https://www.nytimes.com/ca/section/well/live"},{copy:"Ask Well",link:"https://www.nytimes.com/column/ask-well"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Open Thread",description:"The latest news on what we wear, by our chief fashion critic.",link:"https://www.nytimes.com/newsletters/open-thread-fashion",thumbnailImage:y.a},{title:"Love Letter",description:"Real stories of relationship highs, lows and woes.",link:"https://www.nytimes.com/newsletters/love-letter",thumbnailImage:g.a}]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Modern Love",description:"The complicated love lives of real people.",link:"https://www.nytimes.com/column/modern-love-podcast",thumbnailImage:"https://static01.nyt.com/images/2020/09/21/podcasts/modernlove-logo/modernlove-logo-thumbLarge-v3.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/ca/section/opinion",name:"Opinion",dropdown:[{columnWidth:1},{columnWidth:2,hamburgerColumnWidth:3,heading:"Sections",type:"links",links:[{copy:"Opinion",link:"https://www.nytimes.com/ca/section/opinion"},{copy:"Guest Essays",link:"https://www.nytimes.com/ca/section/opinion/contributors"},{copy:"Editorials",link:"https://www.nytimes.com/ca/section/opinion/editorials"},{copy:"Op-Docs",link:"https://www.nytimes.com/column/op-docs"},{copy:"Videos",link:"https://www.nytimes.com/spotlight/opinion-video"},{copy:"Letters",link:"https://www.nytimes.com/ca/section/opinion/letters"}]},{columnWidth:2,hamburgerColumnWidth:3,heading:"Topics",type:"links",links:[{copy:"Politics",link:"https://www.nytimes.com/ca/section/opinion/politics"},{copy:"World",link:"https://www.nytimes.com/ca/section/opinion/international-world"},{copy:"Business",link:"https://www.nytimes.com/ca/section/opinion/business-economics"},{copy:"Tech",link:"https://www.nytimes.com/ca/section/opinion/technology"},{copy:"Climate",link:"https://www.nytimes.com/ca/section/opinion/environment"},{copy:"Health",link:"https://www.nytimes.com/ca/section/opinion/health"},{copy:"Culture",link:"https://www.nytimes.com/ca/section/opinion/culture"}]},{columnWidth:1},{columnWidth:9,heading:"Columnists",type:"links",innerGridColumnCount:3,columns:[[{copy:"Charles M. Blow",link:"https://www.nytimes.com/by/charles-m-blow"},{copy:"Jamelle Bouie",link:"https://www.nytimes.com/by/jamelle-bouie"},{copy:"David Brooks",link:"https://www.nytimes.com/by/david-brooks"},{copy:"Gail Collins",link:"https://www.nytimes.com/by/gail-collins"},{copy:"Ross Douthat",link:"https://www.nytimes.com/by/ross-douthat"},{copy:"Maureen Dowd",link:"https://www.nytimes.com/by/maureen-dowd"},{copy:"David French",link:"https://www.nytimes.com/by/david-french"}],[{copy:"Thomas L. Friedman",link:"https://www.nytimes.com/by/thomas-l-friedman"},{copy:"Michelle Goldberg",link:"https://www.nytimes.com/by/michelle-goldberg"},{copy:"Ezra Klein",link:"https://www.nytimes.com/by/ezra-klein"},{copy:"Nicholas Kristof",link:"https://www.nytimes.com/by/nicholas-kristof"},{copy:"Paul Krugman",link:"https://www.nytimes.com/by/paul-krugman"},{copy:"Carlos Lozada",link:"https://www.nytimes.com/by/carlos-lozada"}],[{copy:"Tressie McMillan Cottom",link:"https://www.nytimes.com/by/tressie-mcmillan-cottom"},{copy:"Pamela Paul",link:"https://www.nytimes.com/by/pamela-paul"},{copy:"Lydia Polgreen",link:"https://www.nytimes.com/by/lydia-polgreen"},{copy:"Bret Stephens",link:"https://www.nytimes.com/by/bret-stephens"},{copy:"Zeynep Tufekci",link:"https://www.nytimes.com/by/zeynep-tufekci"}]]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Matter of Opinion",description:"Thoughts, aloud. With Michelle Cottle, Ross Douthat, Carlos Lozada and Lydia Polgreen.",link:"https://www.nytimes.com/column/matter-of-opinion",thumbnailImage:"https://static01.nyt.com/images/2023/05/08/podcasts/matter-of-opinion-album-art/matter-of-opinion-album-art-thumbLarge-v2.jpg?quality=75&auto=webp&disable=upscale"},{title:"The Ezra Klein Show",description:"Discussions of ideas that matter, plus book recommendations.",link:"https://www.nytimes.com/column/ezra-klein-podcast",thumbnailImage:"https://static01.nyt.com/images/2021/01/12/podcasts/ezra-klein-album-art/ezra-klein-album-art-square320-v2.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/spotlight/podcasts",name:"Audio",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Audio",type:"brand",link:"https://www.nytimes.com/spotlight/podcasts",description:"Podcasts and narrated articles covering news, tech, culture and more.",footer:{copy:"Download the Audio app on iOS.",link:"https://www.nytimes.com/audio/app"}},{columnWidth:6,heading:"Listen",type:"links",innerGridColumnCount:2,footer:{copy:"See all audio",link:"https://www.nytimes.com/spotlight/podcasts"},columns:[[{copy:"The Headlines",link:"https://www.nytimes.com/column/the-headlines"},{copy:"The Daily",link:"https://www.nytimes.com/column/the-daily"},{copy:"Hard Fork",link:"https://www.nytimes.com/column/hard-fork"},{copy:"The Ezra Klein Show",link:"https://www.nytimes.com/column/ezra-klein-podcast"},{copy:"Matter of Opinion",link:"https://www.nytimes.com/column/matter-of-opinion"},{copy:"Serial Productions",link:"https://www.nytimes.com/interactive/2022/podcasts/serial-productions.html"}],[{copy:"The Book Review Podcast",link:"https://www.nytimes.com/column/book-review-podcast"},{copy:"Modern Love",link:"https://www.nytimes.com/column/modern-love-podcast"},{copy:"The Run-Up",link:"https://www.nytimes.com/column/election-run-up-podcast"},{copy:"Popcast",link:"https://www.nytimes.com/column/popcast-pop-music-podcast"},{copy:"Reporter Reads",link:"https://www.nytimes.com/spotlight/reporter-reads"},{copy:"The Sunday Read",link:"https://www.nytimes.com/spotlight/the-sunday-read"}]]},{columnWidth:4,heading:"Featured",type:"thumbnailContent",items:[{title:"The Headlines",description:"Your morning listen. Top stories, in 5 minutes.",link:"https://www.nytimes.com/column/the-headlines",thumbnailImage:"https://static01.nyt.com/images/2022/10/12/podcasts/headlines-albumartwork-audioapp-2/headlines-albumartwork-audioapp-2-thumbLarge.png?quality=75&auto=webp&disable=upscale"},{title:"The Kids of Rutherford County",description:"A series about how one county illegally jailed children.",link:"https://www.nytimes.com/2023/10/19/podcasts/serial-kids-rutherford-county.html",thumbnailImage:_.a},{title:"Reporter Reads",description:"Recent articles read by the reporters behind them.",link:"https://www.nytimes.com/spotlight/reporter-reads",thumbnailImage:O.a}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},items:[{title:"Audio",description:"Our editors share their favorite listens from the New York Times Audio app.",link:"https://www.nytimes.com/newsletters/audio",thumbnailImage:a.a}]}]},{url:"https://www.nytimes.com/crosswords",name:"Games",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Games",type:"brand",link:"https://www.nytimes.com/crosswords",description:"Word games, logic puzzles and crosswords, including an extensive archive."},{columnWidth:3,heading:"Play",type:"linksWithIcons",links:[{copy:"Spelling Bee",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/spelling-bee.svg",link:"https://www.nytimes.com/puzzles/spelling-bee"},{copy:"The Mini Crossword",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/mini.svg",link:"https://www.nytimes.com/crosswords/game/mini"},{copy:"Wordle",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/wordle.svg",link:"https://www.nytimes.com/games/wordle/index.html"},{copy:"The Crossword",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/daily.svg",link:"https://www.nytimes.com/crosswords/game/daily/"},{copy:"Vertex",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/vertex.svg",link:"https://www.nytimes.com/puzzles/vertex"}]},{columnWidth:3,heading:"Play",hideHeading:!0,type:"linksWithIcons",links:[{copy:"Connections",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/connections.svg",link:"https://www.nytimes.com/games/connections"},{copy:"Sudoku",icon:"https://www.nytimes.com/games-assets/v2/assets/expansion-games/sudoku-card-icon.svg",link:"https://www.nytimes.com/puzzles/sudoku"},{copy:"Letter Boxed",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/letter-boxed.svg",link:"https://www.nytimes.com/puzzles/letter-boxed"},{copy:"Tiles",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/tiles.svg",link:"https://www.nytimes.com/puzzles/tiles"}]},{columnWidth:4,heading:"Community",type:"links",links:[{copy:"Spelling Bee Forum",link:"https://www.nytimes.com/spotlight/spelling-bee-forum"},{copy:"Wordplay Column",link:"https://www.nytimes.com/spotlight/daily-crossword-column"},{copy:"Wordle Review",link:"https://www.nytimes.com/spotlight/wordle-review"},{copy:"Submit a Crossword",link:"https://www.nytimes.com/article/submit-crossword-puzzles-the-new-york-times.html"},{copy:"Meet Our Crossword Constructors",link:"https://www.nytimes.com/spotlight/puzzle-making"},{copy:"Mini to Maestro",link:"https://www.nytimes.com/2022/09/19/crosswords/mini-to-maestro-part-1.html"},{copy:"Wordlebot",link:"https://www.nytimes.com/interactive/2022/upshot/wordle-bot.html"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Gameplay",description:"Puzzles, brain teasers, solving tips and more.",link:"https://www.nytimes.com/newsletters/gameplay",thumbnailImage:h.a}]}]},{url:"https://cooking.nytimes.com/",name:"Cooking",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Cooking",type:"brand",link:"https://cooking.nytimes.com/",description:"Recipes, advice and inspiration for everyday cooking, special occasions and more."},{columnWidth:3,hamburgerColumnWidth:4,heading:"Recipes",type:"links",innerGridColumnCount:2,columns:[[{copy:"Easy",link:"https://cooking.nytimes.com/topics/easy-recipes"},{copy:"Dinner",link:"https://cooking.nytimes.com/topics/dinner-recipes"},{copy:"Quick",link:"https://cooking.nytimes.com/68861692-nyt-cooking/43843372-quick-recipes"},{copy:"Healthy",link:"https://cooking.nytimes.com/topics/healthy-recipes"},{copy:"Breakfast",link:"https://cooking.nytimes.com/topics/breakfast"}],[{copy:"Vegetarian",link:"https://cooking.nytimes.com/topics/vegetarian"},{copy:"Vegan",link:"https://cooking.nytimes.com/topics/vegan-recipes"},{copy:"Chicken",link:"https://cooking.nytimes.com/topics/our-best-chicken-recipes"},{copy:"Pasta",link:"https://cooking.nytimes.com/topics/our-best-pasta-recipes"},{copy:"Dessert",link:"https://cooking.nytimes.com/topics/desserts"}]]},{columnWidth:3,heading:"Editors' Picks",type:"links",links:[{copy:"Soups and Stews",link:"https://cooking.nytimes.com/68861692-nyt-cooking/638891-best-soup-stew-recipes"},{copy:"Easy Weeknight",link:"https://cooking.nytimes.com/topics/easy-weeknight"},{copy:"Newest Recipes",link:"https://cooking.nytimes.com/68861692-nyt-cooking/32998034-our-newest-recipes"},{copy:"One-Pot Meals",link:"https://cooking.nytimes.com/68861692-nyt-cooking/2370458-one-pot-dinner-recipes"},{copy:"Slow Cooker Recipes",link:"https://cooking.nytimes.com/68861692-nyt-cooking/950138-amazing-slow-cooker-recipes"},{copy:"Comfort Food",link:"https://cooking.nytimes.com/topics/comfort-food"},{copy:"Party Recipes",link:"https://cooking.nytimes.com/topics/entertaining"}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",items:[{title:"The Cooking Newsletter",description:"Culinary inspiration from Sam Sifton and Melissa Clark.",link:"https://www.nytimes.com/newsletters/cooking",thumbnailImage:u.a},{title:"The Veggie",description:"Delicious vegetarian recipes and tips from Tanya Sichynsky.",link:"https://www.nytimes.com/newsletters/the-veggie",thumbnailImage:T.a}]},{columnWidth:4,heading:"Newsletters",hideHeading:!0,type:"thumbnailContent",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},items:[{title:"Five Weeknight Dishes",description:"Dinner ideas for busy people from Emily Weinstein.",link:"https://www.nytimes.com/newsletters/five-weeknight-dishes",thumbnailImage:f.a}]}]},{url:"https://www.nytimes.com/wirecutter/",name:"Wirecutter",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Wirecutter",type:"brand",link:"https://www.nytimes.com/wirecutter",description:"Reviews and recommendations for thousands of products."},{columnWidth:3,heading:"Reviews",type:"links",links:[{copy:"Kitchen",link:"https://www.nytimes.com/wirecutter/kitchen-dining/"},{copy:"Tech",link:"https://www.nytimes.com/wirecutter/electronics/"},{copy:"Sleep",link:"https://www.nytimes.com/wirecutter/sleep/"},{copy:"Appliances",link:"https://www.nytimes.com/wirecutter/appliances/"},{copy:"Home and Garden",link:"https://www.nytimes.com/wirecutter/home-garden/"},{copy:"Moving",link:"https://www.nytimes.com/wirecutter/make-a-plan/moving/"}]},{columnWidth:3,heading:"Reviews",hideHeading:!0,type:"links",links:[{copy:"Travel",link:"https://www.nytimes.com/wirecutter/travel/"},{copy:"Gifts",link:"https://www.nytimes.com/wirecutter/gifts/"},{copy:"Deals",link:"https://www.nytimes.com/wirecutter/deals/"},{copy:"Baby and Kid",link:"https://www.nytimes.com/wirecutter/baby-kid/"},{copy:"Health and Fitness",link:"https://www.nytimes.com/wirecutter/health-fitness/"}]},{columnWidth:4,heading:"The Best...",type:"links",links:[{copy:"Air Purifier",link:"https://www.nytimes.com/wirecutter/reviews/best-air-purifier/"},{copy:"Electric Toothbrush",link:"https://www.nytimes.com/wirecutter/reviews/best-electric-toothbrush/"},{copy:"Pressure Washer",link:"https://www.nytimes.com/wirecutter/reviews/best-pressure-washer/"},{copy:"Cordless Stick Vacuum",link:"https://www.nytimes.com/wirecutter/reviews/best-cordless-stick-vacuum/"},{copy:"Office Chair",link:"https://www.nytimes.com/wirecutter/reviews/best-office-chair/"},{copy:"Robot Vacuum",link:"https://www.nytimes.com/wirecutter/reviews/best-robot-vacuum/"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"The Recommendation",description:"The best independent reviews, expert advice and intensively researched deals.",link:"https://www.nytimes.com/newsletters/the-recommendation",thumbnailImage:k.a},{title:"Clean Everything",description:"Step-by-step advice on how to keep everything in your home squeaky clean.",link:"https://www.nytimes.com/newsletters/clean-everything",thumbnailImage:c.a}]}]},{url:"https://theathletic.com/",name:"The Athletic",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"The Athletic",type:"brand",link:"https://theathletic.com/",description:"Personalized coverage of your sports teams and leagues."},{columnWidth:3,hamburgerColumnWidth:5,heading:"Leagues",type:"links",innerGridColumnCount:2,columns:[[{copy:"NFL",link:"https://theathletic.com/nfl/"},{copy:"MLB",link:"https://theathletic.com/mlb/"},{copy:"NBA",link:"https://theathletic.com/nba/"},{copy:"Premier League",link:"https://theathletic.com/football/premier-league/"},{copy:"NCAAF",link:"https://theathletic.com/college-football/"},{copy:"NCAAM",link:"https://theathletic.com/college-basketball/"},{copy:"NHL",link:"https://theathletic.com/nhl/"}],[{copy:"NCAAW",link:"https://theathletic.com/womens-college-basketball/ "},{copy:"MLS",link:"https://theathletic.com/football/mls/"},{copy:"Formula 1",link:"https://theathletic.com/formula-1/"},{copy:"NWSL",link:"https://theathletic.com/football/nwsl/"},{copy:"Golf",link:"https://theathletic.com/golf/"}]]},{columnWidth:3,heading:"Top Stories",type:"links",links:[{copy:"Must-Read Stories",link:"https://theathletic.com/tag/a1-must-read-stories/"},{copy:"NFL Playoffs",link:"https://theathletic.com/nfl/schedule/"},{copy:"MLB Free Agency",link:"https://theathletic.com/5029170/2023/11/06/free-agents-mlb-list/"}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",items:[{title:"The Pulse",description:"Delivering the top stories in sports, Sunday to Friday.",link:"https://theathletic.com/newsletters/the-pulse",thumbnailImage:v.a},{title:"The Windup",description:"The biggest stories in baseball, by Levi Weaver with Ken Rosenthal.",link:"https://theathletic.com/newsletters/the-windup",thumbnailImage:S.a}]},{columnWidth:4,type:"thumbnailContent",heading:"Newsletters",hideHeading:!0,items:[{title:"The Bounce",description:"Essential NBA news from Zach Harper and Shams Charania.",link:"https://theathletic.com/newsletters/the-bounce",thumbnailImage:s.a},{title:"Full Time",description:"The biggest women's soccer stories, from Emily Olsen, Meg Linehan & Steph Yang",link:"https://theathletic.com/newsletters/full-time",thumbnailImage:m.a}]}]}],M=function(e){var t=e.children;return r.a.Children.only(r.a.cloneElement(t,{data:P}))}},XQm6:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=p(n("q1tI")),o=(i(n("17x9")),i(n("28GZ"))),s=i(n("Zgws")),l=n("xHA4"),c=i(n("0Lib")),u=p(n("n+OA"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}function f(e){var t=e.storyline,n=e.trackEvent,i=e.trackImpression,r=e.trackingParams,d=e.trackLinkInteraction,p=(0,l.getExperimentalAssetDataFromStoryline)({storyline:t,block:l.STORYLINE_BLOCKS.guide}),f=(0,a.useRef)(new Set),m=(0,a.useCallback)((function(e,t){if(e&&n){var i=t.match(/https:\/\/(www|cooking)\.(stg\.)?nytimes\.com[0-9/\w-.]+/g);i&&i.forEach((function(e){f.current.has(e)||(n({event:"impression",card:{url:e,index:f.current.size}}),f.current.add(e))}))}}),[n]),h=(0,a.useCallback)((function(e){i({event:"impression",card:{url:e,index:f.current.size}}),f.current.add(e)}),[i]);if(t.guide)return a.default.createElement(o.default,{storyline:t,trackEvent:h,trackingParams:r,trackLinkInteraction:d});if(null==p||!p.title||!p.sections)return null;var g=p.title,y=p.leadIn,v=p.sections;return a.default.createElement("section",{id:"styln-guide",role:"complementary","aria-labelledby":"styln-guide-title",className:u.guideContainerClass},a.default.createElement(s.default,{className:u.topRuleClass}),a.default.createElement("h2",{id:"styln-guide-title",className:u.titleClass},g),y&&a.default.createElement("h3",{className:u.leadInClass},y),v.filter((function(e){var t=e.section;return Boolean(null==t?void 0:t.length)})).map((function(e,t){var n=e.section;return a.default.createElement(a.Fragment,{key:t.toString()},a.default.createElement(s.default,{className:u.sectionRuleClass}),n.map((function(e,t){return a.default.createElement(c.default,{key:e.type+t.toString(),item:e,handleInView:m})})))})))}f.displayName="StorylineGuide",f.defaultProps={storyline:null,trackEvent:null,trackImpression:null,trackingParams:null,trackLinkInteraction:function(){}};var m=f;t.default=m},XSE6:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=(0,r.css)("background-color:rgb(247,247,247);text-align:center;padding:1.5rem 10px;font-weight:",a.default.font.weight.medium,";color:#c0c0c0;font-size:16px;");t.default=o},XdRu:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lSNA")),a=i(n("QILm")),o=i(n("W8MJ")),s=i(n("lwsE")),l=i(n("7W2i")),c=i(n("a1gu")),u=i(n("Nsbk")),d=i(n("Nz+N")),p=n("6hsm"),f=["url","name","reviewRating","itemReviewed"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.default)(this,n)}}var y=function(e){(0,l.default)(n,e);var t=g(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.url,o=i.name,l=i.reviewRating,c=i.itemReviewed,u=(0,a.default)(i,f);return(0,s.default)(this,n),(e=t.call(this,h(h({},u),{},{url:r})))["@type"]="ReviewNewsArticle",e.mainEntityOfPage=r,e.name=o,e.publisher=p.PUBLISHER_ID_OBJ,e.copyrightHolder=p.PUBLISHER_ID_OBJ,e.sourceOrganization=p.PUBLISHER_ID_OBJ,e.copyrightYear=(new Date).getFullYear(),e.reviewRating=l,e.itemReviewed=c,e}return(0,o.default)(n)}(d.default);t.default=y},XlcC:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.createMapInlineUnionWithOptions=function(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return o.apply(void 0,n.concat([e]))}},t.default=o;var r=i(n("q1tI")),a=i(n("4LIj"));function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};switch(e.__typename){case"TextInline":return(0,a.default)(e,t,n);case"LineBreakInline":return r.default.createElement("br",{key:"br-".concat(t.toString())});default:return console.warn('Unrecognized Inline "'.concat(e.__typename,'"')),null}}},XtfB:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={context:{type:"context",version:1},experiments:{type:"experiments",version:1},guide:{type:"guide",version:1},lede:{type:"lede",version:1},toplinks:{type:"topLinks",version:1},quote:{type:"quote",version:1}};t.default=i},XvvG:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n("q1tI")),a=n("Jqp9"),o=n("0Jb7");t.default=function(e){var t=e.oldPrice,n=e.oldLabel,i=void 0===n?"original price: ":n,s=e.currentPrice,l=e.currentLabel,c=void 0===l?"sale price: ":l,u=e.oldPriceClassname,d=void 0===u?"":u,p=e.currentPriceClassname,f=void 0===p?"":p;return r.default.createElement("span",{className:(0,a.cx)(o.textContainerClass,f)},r.default.createElement(o.Strike,{className:d},r.default.createElement("span",{className:o.visuallyHiddenClass},i,"")," ",t),r.default.createElement("span",{className:o.visuallyHiddenClass},c,"")," ",s)}},Xwia:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lSNA")),a=n("Zc/f");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){var t=!!e.id,n=(e.minPercent||0===e.minPercent)&&e.maxPercent&&e.minPercent<e.maxPercent,i=!!e.component;return t&&n&&i}var c=function(e){var t=e.body,n=e.dropzoneConfigsList,i=void 0===n?[]:n,r=e.reservedIndices,o=void 0===r?[]:r,c=i.filter(l);if(!c)return{};var u=c.map((function(e){return s(s({},e),{},{wasPlaced:!1})})),d=t.content.filter((function(e){return"Dropzone"===e.__typename})),p={};return d.forEach((function(e){if(e.adsMobile||e.adsDesktop||e.bad||o.includes(e.index))return null;var t=e.index/d.length,n=u.filter((function(e){return!e.wasPlaced})).find((function(e){return e.minPercent<=t&&t<=e.maxPercent}));if(n)if(u[u.indexOf(n)]=s(s({},n),{},{wasPlaced:!0}),"function"==typeof n.component){var i="";Object.keys(a.inlineRegions).forEach((function(e){t>=a.inlineRegions[e].minPercent&&(i=e)})),p[e.index.toString()]=n.component({region:i})}else p[e.index.toString()]=n.component;return null})),p};t.default=c},Xx18:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.titleClass=t.contextHeaderClass=t.contextContainerClass=void 0;var r=n("Jqp9"),a=i(n("3Rk2")),o=i(n("wXC7")),s=n("3sMT"),l=(0,a.default)([o.default.breakpoint.small]),c=(0,r.css)("font-family:",o.default.font.franklinBase,";color:",s.color.content.secondary,";background-color:",s.color.background.primary,";box-sizing:border-box;width:100%;",l({overflow:["hidden","unset"],padding:[0,"20px"],maxWidth:[null,"600px"],border:["none","1px solid ".concat(s.color.stroke.quaternary)],margin:[o.default.breakpoint.mobileBlockMargins,o.default.breakpoint.desktopStorylineMargins]})," ",o.default.printHide);t.contextContainerClass=c;var u=(0,r.css)("display:block;margin-right:auto;margin-left:auto;",l({width:["calc(100% - 40px)","100%"]}));t.contextHeaderClass=u;var d=(0,r.css)("font-weight:",o.default.font.weight.bold,";margin-bottom:1rem;",l({borderTop:["1px solid ".concat(s.color.stroke.quaternary),"none"],borderBottom:["none","1px solid ".concat(s.color.stroke.quaternary)],paddingTop:["1rem",0],paddingBottom:[null,"1rem"],fontSize:[o.default.font.size(16),o.default.font.size(17)],lineHeight:[o.default.font.size(22),o.default.font.size(24)]}));t.titleClass=d},Y0cC:function(e,t,n){"use strict";n.r(t),n.d(t,"storylineQuoteBlockQuery",(function(){return w}));var i,r,a=n("gcR/"),o=n.n(a),s=n("lSNA"),l=n.n(s),c=n("VkAN"),u=n.n(c),d=n("q1tI"),p=n("eFc+"),f=n.n(p),m=n("Kxyt"),h=n("TrUr"),g=n.n(h),y=n("xHA4"),v=n("YWmT");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=f()(i||(i=u()(['\n  query StorylineQuoteBlockQuery($ids: [ID!]!) {\n    anyWorks(ids: $ids) {\n      ... on CreativeWork {\n        bylines {\n          creatorSnapshots {\n            ... on PersonSnapshot {\n              promotionalMedia {\n                ... on Image {\n                  id\n                  crops(renditionNames: "thumbLarge") {\n                    renditions {\n                      url\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n'])));function x(e){var t=e.pageType,n=e.parentUri,i=e.parentUrl,r=e.region,a=e.ruleName,s=e.storyline,l=e.testName,c=Object(y.getExperimentalAssetDataFromStoryline)({storyline:s,block:y.STORYLINE_BLOCKS.quote}),u=c.items,p=c.title,f=Object(m.useQuery)(w,{variables:{ids:null==u?void 0:u.map((function(e){return e.url}))},ssr:!1}),b=f.loading,x=f.error,k=f.data,O=Object(d.useMemo)((function(){return Object(h.getItemsWithHeadshots)(k,u)}),[k,u]);return b||x||!k?null:o()(v.a,{componentName:"opinion_quote",region:r,parentUri:n,testName:l,ruleName:a,pageType:t},void 0,(function(e){var t=e.trackImpression,n=e.trackLink;return o()(g.a,{title:p,parentUrl:i,trackEvent:t,items:O.map((function(e){var t;return _(_({},e),{},{url:null!==(t=null==n?void 0:n(e.url))&&void 0!==t?t:e.url})}))})}))}x.displayName="QuoteBlock",x.defaultProps={testName:null},x.fragments={storyline:f()(r||(r=u()(["\n    fragment QuoteBlock_storyline on CreativeWork {\n      ... on Published {\n        __typename\n        uri\n        url\n      }\n      storylines {\n        ruleName\n        testName\n        storyline {\n          experimentalJsonBlob\n        }\n      }\n    }\n  "])))},t.default=x},"Y3E+":function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("J4zp")),o=i(n("lSNA")),s=i(n("lwsE")),l=i(n("W8MJ")),c=i(n("7W2i")),u=i(n("a1gu")),d=i(n("Nsbk")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI"));i(n("17x9"));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var y=function(e){(0,c.default)(n,e);var t=g(n);function n(){var e;(0,s.default)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).ref=p.default.createRef(),e.numOfInvocations=0,e.mountObserver=function(){var t,n,i=h({threshold:1},e.props.intersectionObserverOptions);e.ref.current&&(e.observer=new IntersectionObserver((function(t){var n,i,r=(0,a.default)(t,1)[0],o=e.numOfInvocations>=e.props.invocationLimit;r.isIntersecting&&!o&&(null===(n=(i=e.props).onVisible)||void 0===n||n.call(i),e.numOfInvocations+=1)}),i),null===(t=e.observer)||void 0===t||null===(n=t.observe)||void 0===n||n.call(t,e.ref.current))},e}return(0,l.default)(n,[{key:"componentDidMount",value:function(){setTimeout(this.mountObserver,this.props.delayObservationBy)}},{key:"componentWillUnmount",value:function(){var e,t;null===(e=this.observer)||void 0===e||null===(t=e.disconnect)||void 0===t||t.call(e)}},{key:"render",value:function(){var e=this.ref;return this.props.children({ref:e})}}]),n}(p.Component);y.displayName="VisibilityObserver",y.defaultProps={intersectionObserverOptions:{},invocationLimit:1,delayObservationBy:0,onVisible:function(){},children:null};var v=y;t.default=v},YCta:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,i.keyframes)("0%{transform:translate(0,0) scale(1,0.85) translate(0,0);}33.33%{transform:translate(0,0) scale(1,0.9) translate(0,0);}100%{transform:translate(0,0) scale(1,0.1) translate(0,0);}"),t=(0,i.keyframes)("0%{transform:translate(0,0) translate(0,0) translate(0,15px);}33.33%{transform:translate(0,0) translate(0,0) translate(0,10px);}100%{transform:translate(0,0) translate(0,0) translate(0,30px);}"),n=(0,i.keyframes)("0%{transform:translate(11.329999923706055px,0) scale(1,0.85) translate(-11.329999923706055px,0);}33.33%{transform:translate(11.329999923706055px,0) scale(1,0.9) translate(-11.329999923706055px,0);}100%{transform:translate(11.329999923706055px,0) scale(1,0.1) translate(-11.329999923706055px,0);}"),r=(0,i.keyframes)("0%{transform:translate(11.329999923706055px,0) translate(-11.329999923706055px,0) translate(0,15px);}33.33%{transform:translate(11.329999923706055px,0) translate(-11.329999923706055px,0) translate(0,10px);}100%{transform:translate(11.329999923706055px,0) translate(-11.329999923706055px,0) translate(0,30px);}"),a=(0,i.keyframes)("0%{transform:translate(22.670000076293945px,0) scale(1,0.85) translate(-22.670000076293945px,0);}33.33%{transform:translate(22.670000076293945px,0) scale(1,0.9) translate(-22.670000076293945px,0);}100%{transform:translate(22.670000076293945px,0) scale(1,0.1) translate(-22.670000076293945px,0);}"),o=(0,i.keyframes)("0%{transform:translate(22.670000076293945px,0) translate(-22.670000076293945px,0) translate(0,15px);}33.33%{transform:translate(22.670000076293945px,0) translate(-22.670000076293945px,0) translate(0,10px);}100%{transform:translate(22.670000076293945px,0) translate(-22.670000076293945px,0) translate(0,30px);}"),s=(0,i.keyframes)("0%{transform:translate(34px,0) translate(-34px,0) translate(0,15px);}33.33%{transform:translate(34px,0) translate(-34px,0) translate(0,10px);}100%{transform:translate(34px,0) translate(-34px,0) translate(0,30px);}"),l=(0,i.keyframes)("0%{transform:translate(34px,0) scale(1,0.85) translate(-34px,0);}33.33%{transform:translate(34px,0) scale(1,0.9) translate(-34px,0);}100%{transform:translate(34px,0) scale(1,0.1) translate(-34px,0);}");return{firstBarCollapsedClass:(0,i.css)("animation:",e," 0.8s cubic-bezier(0,0,1,1) forwards;"),firstBarParentCollapsedClass:(0,i.css)("animation:",t," 0.8s cubic-bezier(0,0,1,1) forwards;"),secondBarCollapsedClass:(0,i.css)("animation:",n," 0.8s cubic-bezier(0,0,1,1) forwards;"),secondBarParentCollapsedClass:(0,i.css)("animation:",r," 0.8s cubic-bezier(0,0,1,1) forwards;"),thirdBarCollapsedClass:(0,i.css)("animation:",a," 0.8s cubic-bezier(0,0,1,1) forwards;"),thirdBarParentCollapsedClass:(0,i.css)("animation:",o," 0.8s cubic-bezier(0,0,1,1) forwards;"),fourthBarCollapsedClass:(0,i.css)("animation:",l," 0.8s cubic-bezier(0,0,1,1) forwards;"),fourthBarParentCollapsedClass:(0,i.css)("animation:",s," 0.8s cubic-bezier(0,0,1,1) forwards;")}};var i=n("Jqp9")},YFU0:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"canUseDOM",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"computeAspectRatio",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"isNumeric",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"loadApi",{enumerable:!0,get:function(){return a.default}});var r=i(n("L0Nc")),a=i(n("S+vP")),o=i(n("rCSJ")),s=i(n("U7vG"))},YNKw:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.selectImageRendition=t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("Jqp9")),o=i(n("KeRS")),s=n("6l8D"),l=i(n("F0cd")),c=n("4mEQ"),u=i(n("Mqhu")),d=n("tLpV"),p=function(e){var t=e.headline,n=e.summary,i=e.url,c=e.media,p=e.className,f=e.label,m=e.caption,h=e.isOpinion,g=e.pubDate,y=e.seoHeadline,v=e.typeOfMaterials,b=(0,a.useTheme)(),_=null;"string"==typeof c?_=r.default.createElement(d.RelatedLinkImage,{src:c}):r.default.isValidElement(c)&&(_=c);var w=b&&b.displayStyle&&"string"==typeof b.displayStyle&&"compact"===b.displayStyle.toLowerCase(),x=!(w&&!h),k=i.includes("nytimes.com/article")||i.includes("nytimes.com/interactive");return r.default.createElement(u.default.Consumer,null,(function(e){return r.default.createElement(d.StyledRelatedLink,{siblings:e,className:p},r.default.createElement(o.default,{to:i,className:s.linkClass},r.default.createElement(d.RelatedLinkMediaWrapper,{siblings:e},(null==b?void 0:b.displayStyle)&&"compact"!==b.displayStyle&&_,r.default.createElement(d.RelatedLinkCaption,null,m)),r.default.createElement(d.RelatedLinkTextWrapper,{siblings:e},f&&x&&r.default.createElement(d.RelatedLinkLabel,{isOpinion:h},f),r.default.createElement(d.RelatedLinkHeadline,null,null!=v&&v.includes("Live Blog Post")&&y?y:t),n&&b&&"expanded"===(null==b?void 0:b.displayStyle)&&r.default.createElement(d.RelatedLinkSummary,{siblings:e},n),!k&&!w&&r.default.createElement(l.default,null,g))))}))};p.displayName="RelatedLink",p.defaultProps={headline:"",summary:"",url:"",caption:"",media:void 0,className:void 0,label:"",pubDate:"",isOpinion:!1,seoHeadline:void 0,typeOfMaterials:[]};t.selectImageRendition=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},n=arguments.length>2?arguments[2]:void 0,i=["threeByTwoSmallAt2X","videoLarge","mediumThreeByTwo440"],r=["thumbLarge"];return(0,c.createPrioritySelector)(n?r:i)(e,t)};var f=p;t.default=f},YPF4:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n("q1tI")),l=n("Jqp9"),c=n("X6oL"),u=o(n("5UIh")),d=a(n("ANq+")),p=n("syiw"),f=n("HDG5"),m=n("djNW"),h=o(n("EhNO")),g=n("FY2l"),y=n("6gWn");t.default=function(e){var t,n,i,r,a,o=e.unit,v=(0,s.useState)(!1),b=v[0],_=v[1],w=(0,p.useMessageSelection)({config:{name:"dock"}}),x="News";!function(){var e,t,n,i={NEWS:{hasProduct:!0,displayName:"News"},GAMES:{hasProduct:!1,displayName:"Games"},COOKING:{hasProduct:!1,displayName:"Cooking"},WIRECUTTER:{hasProduct:!1,displayName:"Wirecutter"}};if(null===(e=o.content)||void 0===e?void 0:e.subInfo){null===(n=null===(t=o.content)||void 0===t?void 0:t.subInfo)||void 0===n||n.forEach((function(e){"ACTIVE"===e.status&&e.products.forEach((function(e){i[e]&&(i[e].hasProduct=!0)}))}));var r=Object.values(i).filter((function(e){return e.hasProduct})).map((function(e){return e.displayName}));x=r.join(", ").replace(/, ([^,]*)$/," and $1")}}();var k=(0,f.useUserState)(),O=(0,c.useTracking)(),E="/"===(0,g.getPathName)()?"homepage":"article",T=s.default.createElement("div",{className:d.headerText},"Get the full Times experience."),C=s.default.createElement("div",{className:(0,l.cx)(d.mainContent)},s.default.createElement("div",{className:d.headerLogo},s.default.createElement(h.default,null)),s.default.createElement("div",{className:d.headerContainer},s.default.createElement("div",{className:d.header},"Youre currently a ",x," subscriber."," ",s.default.createElement("span",{className:d.subHeader},"Upgrade for access to puzzles, recipes, product reviews and more."))),s.default.createElement("div",{className:d.ctaContainer},s.default.createElement("a",{className:d.button,href:null===(t=o.content)||void 0===t?void 0:t.clickThroughURI,onClick:function(){var e;O.trackEvent({event:"moduleInteraction",eventData:{pagetype:E,trigger:"module",type:"click"},module:{name:"dock",context:"expanded",audience:"OtherSubs",label:"ACT_CONV_NEWS_SUB_ALL_ACCESS_UPGRADE_2310",region:"",element:{name:m.Action.ProductSwitch,label:"Upgrade now",url:null===(e=o.content)||void 0===e?void 0:e.clickThroughURI}}})}},"Upgrade now")));if(w.loading)return null;if(!b){var S=null===(i=null===(n=null==w?void 0:w.response)||void 0===n?void 0:n.userstate())||void 0===i?void 0:i.messageSelectionMessageCaps,P=null;if(S)if((I=S).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==w?void 0:w.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==w?void 0:w.response)||void 0===n?void 0:n.audience())&&(P=e)})),null!==P){var M=P;M.viewCount+=1,M.lastSeenOn=(new Date).toISOString(),k.update({messageSelectionMessageCaps:I})}if(!P){var I=[];S&&(I=S),I.push({unit:"dock",campaign:null===(r=null==w?void 0:w.response)||void 0===r?void 0:r.campaign(),audience:null===(a=null==w?void 0:w.response)||void 0===a?void 0:a.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),k.update({messageSelectionMessageCaps:I})}_(!0)}return s.default.createElement(u.default,{testId:"onsite-messaging-unit-".concat(null===y.config||void 0===y.config?void 0:y.config.name),className:d.otherSubsClassName,headingClassName:d.otherSubsHeadingClassName,headingClassStyle:d.otherSubsHeadingClassStyle,ctaIconWrapperStyle:d.otherSubsCtaIconWrapperStyle,ctaContainerStyle:d.otherSubsCtaContainerStyle,ctaActionTextContainerStyle:d.otherSubsCtaActionTextContainerStyle,dividerStyle:d.otherSubsDividerStyle,headerWrapperStyle:d.otherSubsHeaderWrapperStyle,unit:o,contentID:"ACT_CONV_NEWS_SUB_ALL_ACCESS_UPGRADE_2310",dockID:"expand",header:T,card:C,isDockDismissible:!0,isDockExpandable:!1,minimized:!1,overrideHeaderWidth:!1,overrideHeaderStyles:!0})}},YV1h:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.titleClass=t.legacyContextClass=t.legacyContainerClass=t.contextHeaderClass=t.contextContainerClass=void 0;var r=n("Jqp9"),a=i(n("3Rk2")),o=i(n("wXC7")),s=n("3sMT"),l=(0,a.default)([o.default.breakpoint.small]),c=(0,r.css)("font-family:",o.default.font.franklinBase,";color:",s.color.content.secondary,";background-color:",s.color.background.primary,";box-sizing:border-box;width:100%;",l({overflow:["hidden","unset"],padding:[0,"20px"],maxWidth:[null,"600px"],border:["none","1px solid ".concat(s.color.stroke.quaternary)],margin:[o.default.breakpoint.mobileBlockMargins,o.default.breakpoint.desktopStorylineMargins]})," ",o.default.printHide);t.contextContainerClass=c;var u=(0,r.css)("display:block;margin-right:auto;margin-left:auto;",l({width:["calc(100% - 40px)","100%"]}));t.contextHeaderClass=u;var d=(0,r.css)("font-weight:",o.default.font.weight.bold,";margin-bottom:1rem;",l({borderTop:["1px solid ".concat(s.color.stroke.quaternary),"none"],borderBottom:["none","1px solid ".concat(s.color.stroke.quaternary)],paddingTop:["1rem",0],paddingBottom:[null,"1rem"],fontSize:[o.default.font.size(16),o.default.font.size(17)],lineHeight:[o.default.font.size(22),o.default.font.size(24)]}));t.titleClass=d;var p=(0,r.css)("font-family:",o.default.font.franklinBase,";color:",s.color.content.secondary,";background-color:",s.color.background.primary,";border:1px solid ",s.color.stroke.quaternary,";box-sizing:border-box;padding:25px 30px;h2{border-bottom:1px solid ",s.color.stroke.quaternary,";border-top:none;margin:0 auto 1rem;padding-bottom:1rem;padding-top:0;}");t.legacyContextClass=p;var f=(0,r.css)("padding:15px;width:calc(100% - 40px);margin:1.25rem auto 1.5rem;",o.default.breakpoint.small,"{padding:20px;width:100%;max-width:600px;}",o.default.printHide);t.legacyContainerClass=f},YWmT:function(e,t,n){"use strict";var i=n("gcR/"),r=n.n(i),a=(n("q1tI"),n("ZKN5")),o=n("fZdH"),s=n("AeOL"),l=n("bFSk"),c=n("7VSS"),u=n("E8RS");function d(e){var t,n,i=e.componentName,a=e.parentUri,d=e.testName,p=e.region,f=e.ruleName,m=e.pageType,h=e.className,g=e.children,y=Object(o.a)(),v=(null==y||null===(t=y[d])||void 0===t?void 0:t.allocated)&&d,b=null==y||null===(n=y[v])||void 0===n?void 0:n.variant,_=b?{label:b}:{},w="storyline_".concat(i,"_recirc"),x=Object(l.a)({name:f,region:p,template:w,parentUri:a,pageType:m}),k=x.trackLink,O=x.trackImpression,E=x.trackInteraction;return Object(c.a)()?r()(s.a,{testName:d,className:h,holdoutVariant:u.a},void 0,g({trackLink:k({variant:b}),trackImpression:O({block:_}),trackInteraction:E({module:_})})):r()("div",{className:h},void 0,g({trackLink:null,trackImpression:null,trackInteraction:null}))}d.displayName="WithStorylineAssetSubTesting",d.defaultProps={testName:null,className:void 0},t.a=Object(a.a)(d)},YXtJ:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.FoodArticleSalesDockLogo=void 0;var s=o(n("q1tI")),l=n("lVLo"),c=function(){return"undefined"==typeof window?{width:121,height:22}:window.innerWidth>=l.widths.mediumLarge?{width:154,height:28}:window.innerWidth>=l.widths.medium?{width:132,height:24}:{width:121,height:22}};t.FoodArticleSalesDockLogo=function(){var e=s.default.useState(c()),t=e[0],n=e[1];return(0,s.useEffect)((function(){window.addEventListener("resize",(function(){n(c())}))}),[]),s.default.createElement("svg",i({},t,{viewBox:"0 0 122 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"}),s.default.createElement("g",{clipPath:"url(#clip0_7854_91185)"},s.default.createElement("path",{d:"M31.7025 12.3261C32.5014 13.1268 33.5634 13.5295 34.5747 13.5295C35.7754 13.5295 36.8606 13.224 38.5322 12.0668V16.5983C36.7174 17.5888 35.0966 17.9221 33.1386 17.9221C30.3818 17.9221 28.1237 17.0241 26.5213 15.4689C24.942 13.9091 24.0508 11.6688 24.0508 8.97954C24.0508 3.83247 27.1817 0.763672 31.1391 0.763672C32.4598 0.763672 33.4711 1.04602 34.3439 1.7542V1.06916H38.6523V7.41968H34.2238C34.0576 5.50804 33.5404 4.5638 32.409 4.5638C31.1391 4.5638 30.2894 5.76725 30.2894 8.53056C30.2894 10.2293 30.8528 11.4836 31.7025 12.3307V12.3261Z",fill:"#E33D26"}),s.default.createElement("path",{d:"M46.2809 6.04492C49.8827 6.04492 53.0875 8.10005 53.0875 11.9927C53.0875 15.8854 49.8135 17.848 46.3039 17.848C42.7944 17.848 39.4511 15.7929 39.4511 11.9696C39.4511 8.14633 42.7252 6.04492 46.2809 6.04492ZM46.2347 9.11372C44.9648 9.11372 44.7755 10.7662 44.7755 11.7104C44.7755 12.6546 44.8909 14.6357 46.2347 14.6357C47.5785 14.6357 47.7632 13.0527 47.7632 12.039C47.7632 11.0254 47.6939 9.11372 46.2347 9.11372Z",fill:"#E33D26"}),s.default.createElement("path",{d:"M60.6699 6.04492C64.2718 6.04492 67.4765 8.10005 67.4765 11.9927C67.4765 15.8854 64.2025 17.848 60.693 17.848C57.1835 17.848 53.8402 15.7929 53.8402 11.9696C53.8402 8.14633 57.1142 6.04492 60.6699 6.04492ZM60.6237 9.11372C59.3538 9.11372 59.1645 10.7662 59.1645 11.7104C59.1645 12.6546 59.2799 14.6357 60.6237 14.6357C61.9675 14.6357 62.1522 13.0527 62.1522 12.039C62.1522 11.0254 62.0829 9.11372 60.6237 9.11372Z",fill:"#E33D26"}),s.default.createElement("path",{d:"M68.7973 14.5431V4.13325H67.8091V1.06445H74.1216V12.0668L77.2524 9.35438H75.5808V6.28558H82.4336V9.35438H81.1868L78.998 11.3864L81.9164 14.5477H82.8123V17.6165H78.2222L74.1262 12.9416V17.6165H67.8137V14.5477H68.8019L68.7973 14.5431Z",fill:"#E33D26"}),s.default.createElement("path",{d:"M84.5993 14.5431V9.34975H83.6572V6.28095H89.919V14.5431H90.9072V17.6119H83.6526V14.5431H84.5946H84.5993ZM89.919 1.06445V5.10064H84.5993V1.06445H89.919Z",fill:"#E33D26"}),s.default.createElement("path",{d:"M92.6989 14.5431V9.34978H91.7568V6.28098H98.0186V7.60478C99.2423 6.75311 100.254 6.04492 101.833 6.04492C104.096 6.04492 105.813 7.53072 105.813 9.48864V14.5385H106.755V17.6073H100.494V10.6227C100.494 9.91448 99.9534 9.34978 99.2931 9.34978C98.4942 9.34978 98.0232 10.0117 98.0232 11.1179V14.5385H98.9421V17.6073H91.7615V14.5385H92.7035L92.6989 14.5431Z",fill:"#E33D26"}),s.default.createElement("path",{d:"M112.832 22.0002C111.396 22.0002 110.173 21.8844 108.312 21.1763V18.1537C109.466 18.6721 110.667 18.9314 111.914 18.9314C113.913 18.9314 115.326 18.0565 115.326 16.2652C114.292 17.066 113.35 17.6122 111.96 17.6122C109.134 17.6122 107.111 15.159 107.111 11.8079C107.111 8.45671 109.138 6.0498 112.172 6.0498C113.465 6.0498 114.246 6.33215 115.326 7.20697V6.28587H121.495V9.35466H120.553V15.9181C120.553 19.8849 117.847 22.0094 112.828 22.0094L112.832 22.0002ZM113.821 9.11398C112.902 9.11398 112.431 10.0119 112.431 11.8032C112.431 13.4557 112.925 14.3999 113.913 14.3999C114.809 14.3999 115.234 13.6223 115.234 11.8264C115.234 10.859 115.164 9.11398 113.821 9.11398Z",fill:"#E33D26"}),s.default.createElement("path",{d:"M19.4514 1.07373H19.0173V17.598H19.4514V1.07373Z",fill:"#E33D26"}),s.default.createElement("path",{d:"M14.5612 11.3078C13.9701 12.8677 12.8849 14.0757 11.3287 14.7145V11.3078L13.1943 9.6276L11.3287 7.97055V5.62845C13.0281 5.51273 14.2056 4.25836 14.2056 2.72165C14.2056 0.712813 12.2938 0 11.2087 0C10.9732 0 10.7146 0 10.3359 0.0925731V0.189775C10.479 0.189775 10.6915 0.166632 10.7607 0.166632C11.5134 0.166632 12.0814 0.523038 12.0814 1.20808C12.0814 1.72649 11.6566 2.24953 10.9039 2.24953C9.0383 2.24953 6.84485 0.735956 4.46207 0.735956C2.3425 0.731328 0.878659 2.31896 0.878659 3.9251C0.878659 5.53124 1.7976 6.03114 2.76734 6.38292L2.79042 6.29034C2.48565 6.10057 2.27323 5.77193 2.27323 5.2489C2.27323 4.54071 2.93358 3.94824 3.76016 3.94824C5.76428 3.94824 8.99674 5.62845 11.0055 5.62845H11.1948V7.99369L9.32922 9.6276L11.1948 11.3078V14.7608C10.4144 15.0431 9.61552 15.1635 8.78894 15.1635C5.67193 15.1635 3.69089 13.2704 3.69089 10.1275C3.69089 9.37303 3.78325 8.63707 3.99567 7.92889L5.55186 7.24385V14.1961L8.71505 12.8029V5.67473L4.06494 7.75763C4.53595 6.38755 5.50569 5.39238 6.66013 4.82306L6.63705 4.75363C3.52004 5.43867 0.5 7.80391 0.5 11.3541C0.5 15.4458 3.94487 18.2832 7.95773 18.2832C12.2061 18.2832 14.612 15.4458 14.6351 11.3078H14.5658H14.5612Z",fill:"#E33D26"})),s.default.createElement("defs",null,s.default.createElement("clipPath",{id:"clip0_7854_91185"},s.default.createElement("rect",{width:"121",height:"22",fill:"white",transform:"translate(0.5)"}))))}},Ybk9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.superscriptClass=t.default=void 0;var i=n("Jqp9"),r=(0,i.css)("vertical-align:super;font-size:smaller;line-height:0;");t.superscriptClass=r;var a=(0,i.styled)("sup",{target:"epm1x5m0"})(r,";");t.default=a},Ycuk:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-the-morning-dd86bff0a93166101faa63110f3830b9.webp"},YgNI:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var r=i(n("q1tI"));function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.className;return r.default.createElement("svg",{className:t,width:"39",height:"39",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("g",null,r.default.createElement("rect",{width:"39",height:"39",rx:"8",fill:"#007585"}),r.default.createElement("path",{d:"M29.6428 22.3655C29.2536 23.4473 28.6346 24.4361 27.8265 25.2666C27.0184 26.0972 26.0397 26.7506 24.9548 27.1839V22.3655L27.6337 19.9858L24.9548 17.6389V14.3218C26.0613 14.3014 27.1162 13.8603 27.8962 13.0919C28.6763 12.3234 29.1201 11.288 29.1339 10.2048C29.1339 7.35313 26.3612 6.35012 24.7874 6.35012C24.3614 6.33817 23.9357 6.38227 23.5216 6.48123V6.6189C23.7226 6.6189 24.0306 6.58612 24.1378 6.58612C25.2294 6.58612 26.0532 7.08435 26.0532 8.06114C26.0441 8.26944 25.9919 8.47376 25.8997 8.66173C25.8076 8.84971 25.6774 9.01742 25.5171 9.15471C25.3569 9.292 25.1698 9.39602 24.9672 9.46046C24.7646 9.5249 24.5508 9.54842 24.3387 9.5296C21.6598 9.5296 18.4586 7.3859 14.9627 7.3859C11.8887 7.3859 9.76568 9.63449 9.76568 11.9093C9.76568 14.1841 11.1051 14.8921 12.4981 15.3969L12.5383 15.2592C12.2871 15.1039 12.0839 14.8845 11.9505 14.6246C11.8172 14.3647 11.7588 14.0742 11.7815 13.7842C11.7976 13.524 11.8664 13.2695 11.9839 13.0355C12.1014 12.8016 12.2653 12.5928 12.466 12.4214C12.6666 12.25 12.9001 12.1193 13.1528 12.037C13.4055 11.9548 13.6724 11.9225 13.938 11.9421C16.8446 11.9421 21.5393 14.3218 24.4458 14.3218H24.7204V17.6717L22.0416 19.9858L24.7204 22.3655V27.256C23.5999 27.6419 22.419 27.8327 21.2312 27.8198C16.7106 27.8198 13.8643 25.1451 13.8643 20.6873C13.8552 19.6337 14.0041 18.5846 14.3064 17.5734L16.5633 16.6031V26.4366L21.1508 24.4699V14.3873L14.4135 17.3374C14.7291 16.4354 15.2242 15.6037 15.8702 14.8903C16.5163 14.1769 17.3004 13.5959 18.1773 13.1811L18.1438 13.0827C13.6299 14.053 9.25 17.4029 9.25 22.4311C9.25 28.2263 14.2461 32.2645 20.0659 32.2645C26.2206 32.2645 29.7165 28.2459 29.75 22.3852L29.6428 22.3655Z",fill:"white"})))}a.displayName="AudioAppLogo"},Yh38:function(e,t,n){"use strict";var i,r,a=n("VkAN"),o=n.n(a),s=n("gcR/"),l=n.n(s),c=n("lSNA"),u=n.n(c),d=n("J4zp"),p=n.n(d),f=(n("q1tI"),n("eFc+")),m=n.n(f),h=n("Jqp9"),g=n("fZdH"),y=n("z0L9"),v=n.n(y),b=n("NW2b"),_=n("6qvD"),w=n("HMjI"),x=n.n(w),k=n("HTd6"),O=n("XMA8"),E=function(e,t){var n;try{n=e.creators.map((function(e){var t=e.promotionalMedia,n=e.displayName,i=e.bioUrl;return{crops:t&&t.crops||[],name:n,bioUrl:i||null}}))}catch(e){return null}return n.map((function(e){var t=e.name,n=e.crops,i=e.bioUrl;return{name:t,renditions:n.map((function(e){return e.renditions})),bioUrl:i}})).map((function(e){var t=e.name,n=e.renditions,i=e.bioUrl;return{name:t,flatCrops:Object(O.d)(n),bioUrl:i}})).map((function(e){var n=e.name,i=e.flatCrops,r=e.bioUrl;return{name:n,crop:Object(O.e)(i,t),bioUrl:r}}))},T=function(e){try{return 0===e.creators.length||e.creators.some((function(e){return e&&!e.promotionalMedia}))}catch(e){return!0}},C=n("wXC7"),S=n.n(C),P=Object(h.css)("margin:40px auto 0 auto;max-width:600px;width:calc(100% - 40px);",S.a.breakpoint.medium,"{width:100%;}",S.a.print),M=n("zT9C"),I=n.n(M);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=function(e){var t,n,i=e.data,r=e.headerPresent,a=e.timestamp,o=e.article,s=Object(h.useTheme)(),c=Object(g.a)(),u=v()({abra:c,reportExposure:b.e}),d=p()(u,2),f=d[0],m=d[1];if(!i)return null;if(!i.bylines)return null;var y,w,O=i.bylines,C=void 0===O?[]:O,S=i.hideHeadshots,M=void 0===S||S,A=i.role,L=i.textAlign,R=function(e){var t,n=e.sourcePublisher,i=e.firstPublished,r=e.bylines,a=new Date(i).getFullYear()<=2006,o="archive-repub"===n;return 1===(null===(t=r[0])||void 0===t?void 0:t.creators.length)&&a&&o}(j(j({},o),{},{bylines:C}))||(null===(y={bylines:C}.bylines[0])||void 0===y||null===(w=y.creators[0])||void 0===w||!w.displayName)?function(e){var t=e.bylines.filter(Boolean);if(null!=t&&t.length){var n,i=I()(t),r=null===(n=i[0])||void 0===n?void 0:n.renderedRepresentation;return i[0].creators.forEach((function(e){e.displayName=null==r?void 0:r.replace(/^By /i,"")})),i}return!1}({bylines:C}):C,N=s.section,D=void 0===N?"news":N,B=0===r.length,z=L&&L.toLowerCase(),F=o&&(null===(t=o.compatibility)||void 0===t?void 0:t.isOak)||"opinion"===D,U=C.map(E),H=function(e){var t=e.hideHeadshots,n=void 0===t||t,i=e.headshotCandidate,r=void 0!==i&&i,a=e.bylines,o=void 0===a?[]:a,s=e.section,l=void 0===s?"":s,c=e.headshotCount,u=void 0===c?0:c;return!1===n&&!0===r&&o.length>0&&!1===o.some(T)&&("opinion"!==l&&u<=6||"opinion"===l&&u<=4)}({hideHeadshots:M,headshotCandidate:F,bylines:C,section:D,headshotCount:Object(_.getHeadshotCount)(U)}),W=o?o.lastMajorModification:null,q={headshots:H?U:null,bylines:R,role:A&&A.length>0?Object(k.b)(A):null,timestamp:a.timestamp||a.updatedText?{time:a.timestamp,updatedText:a.updatedText,lastMajorModification:W,showUpdatedTimestamp:a.showUpdatedTimestamp}:null},V=l()(x.a,{data:q,contentAlignment:z,section:null==o||null===(n=o.section)||void 0===n?void 0:n.name,wordCount:null==o?void 0:o.wordCount,showReadingTime:m,readingTimeRef:f});return B?l()("div",{className:P},void 0,V):V};L.fragments={data:m()(i||(i=o()(['\n    fragment BylineBlock_data on BylineBlock {\n      textAlign\n      hideHeadshots\n      bylines {\n        prefix\n        creators {\n          ... on Person {\n            id\n            displayName\n            bioUrl\n            promotionalMedia {\n              ... on Image {\n                id\n                crops(renditionNames: "thumbLarge") {\n                  renditions {\n                    url\n                    name\n                  }\n                }\n              }\n            }\n          }\n        }\n        renderedRepresentation\n      }\n      role @filterEmpty {\n        ...TextInline_content\n      }\n    }\n    ',"\n  "])),k.a.fragments.content),article:m()(r||(r=o()(["\n    fragment BylineBlock_article on Article {\n      id\n      compatibility {\n        isOak\n      }\n    }\n  "])))},L.defaultProps={article:null,data:null,headerPresent:"",timestamp:{}};t.a=L},YhMm:function(e,t,n){"use strict";var i,r,a=n("lSNA"),o=n.n(a),s=n("gcR/"),l=n.n(s),c=n("J4zp"),u=n.n(c),d=n("q1tI"),p=n.n(d),f=n("Jqp9"),m=n("NQ6n"),h=n("JwCr"),g=n.n(h),y=n("X6oL"),v=n("iEJF"),b=n("J2sf"),_=n("1q7V"),w=n("MLAy"),x=n("sQQE"),k=n("PgO9"),O=n("HUmG"),E=n("u1H9"),T=n("+4HN"),C=n("wXC7"),S=n.n(C),P=n("3sMT"),M="@media (max-width: ".concat(S.a.breakpoint.maxMobileContentWidth,"px)"),I=Object(f.css)("&",_.f,"{display:none;width:215px;position:absolute;text-align:left;background-color:",P.color.overlay.black,";border:1px solid ",P.color.stroke.primary,";box-shadow:0 1px 3px rgba(0,0,0,0.15);border-radius:4px;font-family:",S.a.font.franklinBase,";font-size:",S.a.font.size(12),";line-height:",S.a.font.size(16),";color:",P.color.content.quintary,";box-sizing:border-box;top:38px;left:2px;z-index:199;button{width:10px;position:absolute;right:9px;top:9px;background:transparent;}svg{stroke:",P.color.stroke.quaternary,";}",M,"{left:-9px;}}"),A=Object(f.css)(_.b," &{text-align:left;margin-top:7px;border-top:1px solid ",P.color.stroke.tertiary,";padding:7px 0 5px;font-size:",S.a.font.size(12),";a{border-bottom:solid 1px ",P.color.stroke.tertiary,";text-decoration:none;}li{display:inline;font-weight:700;padding:0 5px;border-right:solid 0.8px black;}li:first-child{padding-left:0;}li:last-child{border-right:none;}}"),j=(_.b,Object(f.css)("&",_.f,"{display:inline-block;}")),L=Object(f.css)(_.f," &{border:9px inset transparent;display:inline-block;height:0;position:absolute;width:0;border-bottom:12px solid ",P.color.stroke.primary,";left:4%;top:-21px;",M,"{left:8%;}}"),R=(_.b,P.color.stroke.quaternary,S.a.breakpoint.large,P.color.stroke.quaternary,Object(f.css)(_.f," &{border:10px inset transparent;display:inline-block;height:0;position:absolute;width:0;border-bottom:14px solid ",P.color.stroke.primary,";bottom:-15px;left:-10px;",S.a.breakpoint.large,"{border-bottom:14px solid ",P.color.stroke.primary,";}}")),N=Object(f.css)(_.b," &,",_.f," &{font-size:",S.a.font.size(12),";line-height:",S.a.font.size(17),";strong{font-weight:",S.a.font.weight.bold,";}}"),D=Object(f.css)(_.b," &,",_.f," &{font-size:",S.a.font.size(14),";margin-bottom:4px;}"),B=Object(f.css)("right:-37px;left:auto;"),z=Object(f.css)("left:auto;right:20%;"),F=Object(f.css)(_.f," &{padding:13px 15px 12px 15px;color:",S.a.color.white,";}"),U=Object(f.css)("&",_.b,"{padding:13px 15px 12px 15px;color:",S.a.color.black,";}"),H=(_.b,Object(f.css)("height:auto;width:auto;border-radius:30px;&:focus{outline:none;box-shadow:0 0 4px 1px rgb(0 95 204);}@supports selector(:focus-visible){&:focus{box-shadow:none;}&:focus-visible{box-shadow:0 0 4px 1px rgb(0 95 204);}}")),W=Object(f.css)(M,"{padding:6px 7px 5px;}border-radius:30px;padding:6px 10px 6px;font-size:",S.a.font.size(12),";font-family:",S.a.font.franklinBase,";line-height:",S.a.font.size(15),";text-align:right;font-weight:500;svg{margin-right:5px;vertical-align:-6px;height:20px;}"),q=Object(f.css)("direction:ltr;display:inline-block;vertical-align:middle;&:hover{.gift-count{background-color:#fafafa;}}"),V="https://help.nytimes.com/hc/en-us/articles/360060848652";function G(){return l()("div",{className:Object(f.cx)(b.j,U),id:_.a},void 0,l()("p",{className:Object(f.cx)(N,D)},void 0,i||(i=l()("strong",{},void 0,"Subscriber benefit: give articles to anyone"))),l()("p",{className:N},void 0,"Times subscribers can give ",r||(r=l()(g.a,{},void 0,"10 gift articles"))," each month. Anyone can read them  even nonsubscribers."),l()("ul",{className:A},void 0,l()("li",{},void 0,l()(T.a,{url:Object(E.b)()},void 0,"Log in")),l()("li",{},void 0,l()("a",{href:V,target:"_blank",rel:"noreferrer"},void 0,"Learn more")),l()("li",{},void 0,l()(T.a,{url:Object(E.d)()},void 0,"Subscribe"))))}G.displayName="NonSubMenu";var Y,Z=G,X=n("yXPU"),J=n.n(X),K=n("VkAN"),$=n.n(K),Q=n("o0o1"),ee=n.n(Q),te=n("eFc+"),ne=n.n(te),ie=n("ErmU"),re=n("Kxyt"),ae=n("KG2r"),oe=n("2PZ4"),se=n("taqW"),le=n("UeuO"),ce=function(e){var t=e.giftArticleLinksRemainingCount,n=e.url,i=e.hideShareOptions,r=Object(d.useState)(n),a=u()(r,2),o=a[0],s=a[1],c=Object(d.useRef)(),p=Y||(Y=l()("span",{className:le.d},void 0,l()("a",{href:"/gift-articles"},void 0,"Learn more")));if(Object(d.useEffect)((function(){return o!==n&&(c.current=setTimeout((function(){return s(n)}),5e3)),function(){return clearTimeout(c.current)}}),[o,n]),!o&&0===t)return l()("p",{style:i?{marginBottom:"0"}:{marginBottom:"12px"}},void 0,"You will receive 10 more gift articles on the 1st of the next month. Remember: You can still share through email, messaging or social media, anytime. ",p,".");if(o)return l()("p",{},void 0,"Youve shared this story before  thanks. Share it again and it wont count toward your gift article limit. ",p,".");if(!o&&t>0){var f=t>1?"articles":"article";return l()("p",{},void 0,"Give paywall-free access to this article. You have"," ",l()("strong",{},void 0,t," gift ",f)," ","left to share this month. ",p,".")}return null};ce.defaultProps={giftArticleLinksRemainingCount:null,url:null,hideShareOptions:!1};var ue,de,pe,fe,me=ce,he=function(e){var t=e.giftArticleLinksRemainingCount,n=e.url,i=Object(d.useState)(n),r=u()(i,2),a=r[0],o=r[1],s=Object(d.useRef)();return Object(d.useEffect)((function(){return a!==n&&(s.current=setTimeout((function(){return o(n)}),5e3)),function(){return clearTimeout(s.current)}}),[a,n]),a||0!==t?a?de||(de=l()("p",{className:le.a},void 0,"Share article again")):10===t?pe||(pe=l()("p",{className:le.a},void 0,"Gift articles")):!a&&t>0&&t<10?fe||(fe=l()("p",{className:le.a},void 0,"Gift articles")):null:ue||(ue=l()("p",{className:le.a},void 0,"10/10 gift articles shared"))};he.defaultProps={giftArticleLinksRemainingCount:null,url:null};var ge,ye,ve,be,_e,we,xe,ke,Oe=he;function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce,Se=b.a,Pe=Te(Te(Te({},ae.c),ae.a),{},{email:"Email",facebook:"Facebook",twitter:"Twitter",telegram:"Telegram",whatsapp:"WhatsApp",reddit:"Reddit",intro:"Explore this gift article from The New York Times. You can read it for free without a subscription.",shareGift:"Send this article"}),Me=ne()(ge||(ge=$()(["\n  query getShareLink($url: NonEmptyString!) {\n    user {\n      shareCode(url: $url) {\n        __typename\n        ... on ShareCodeData {\n          remaining\n          url\n        }\n        ... on ShareCodeError {\n          code\n        }\n      }\n    }\n  }\n"]))),Ie=ne()(ye||(ye=$()(["\n  mutation createShareLink($url: NonEmptyString!, $pageId: ShareCodeOptions) {\n    createShareCode(url: $url, options: $pageId) {\n      __typename\n      ... on ShareCodeData {\n        remaining\n        url\n      }\n      ... on ShareCodeError {\n        code\n      }\n    }\n  }\n"]))),Ae=function(e){var t,n,i,r,a=e.share,s=e.pageType,c=e.trackingRegion,m=e.clickFn,h={event:"moduleInteraction",eventData:{pagetype:s,trigger:"module",type:"click"},module:{name:"share-tools",context:"unlocked-article-menu",region:c||"default",element:{url:a.url,uri:a.uri}}},g=Object(d.useRef)(null),v=Object(y.useTracking)(h).trackEvent;Object(d.useEffect)((function(){g&&g.current&&g.current.focus()}));var w=Object(d.useReducer)((function(e,t){return e[t.type]=t.loading,e}),{email:!1}),x=u()(w,2),k=x[0],O=x[1],E=a.headline,T=a.summary,C=a.url,S=(E||{}).default,P=Object(d.useState)(!1),M=u()(P,2),I=M[0],A=M[1],j=encodeURIComponent(S),L=encodeURIComponent("https://www.facebook.com/"),R=Object(d.useRef)(),N=Object(re.useQuery)(Me,{variables:{url:C},ssr:!1,context:{queryDeduplication:!1},fetchPolicy:"cache-first"}),D=N.loading,B=N.data,z=N.error,F=Object(re.useMutation)(Ie,{update:function(e,t){var n=t.data,i=e.readQuery({query:Me,variables:{url:C}});i.user.shareCode.remaining=n.createShareCode.remaining,i.user.shareCode.url=n.createShareCode.url,e.writeQuery({query:Me,data:i})}}),U=u()(F,1)[0],H=function(){v({module:{element:{name:"share-url",label:Pe.permalink}}})},W=null==B||null===(t=B.user)||void 0===t||null===(n=t.shareCode)||void 0===n?void 0:n.url,q=null==B||null===(i=B.user)||void 0===i||null===(r=i.shareCode)||void 0===r?void 0:r.remaining,V=function(e){var t=-1===(null==e?void 0:e.indexOf("?"))?"?":"&";return"".concat(e).concat(t,"smid=url-share")},G=function(){var e=J()(ee.a.mark((function e(){var t,n,i;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W){e.next=3;break}return m(),e.abrupt("return",Promise.resolve(W));case 3:return n=window&&(null===(t=window.nyt_et)||void 0===t?void 0:t.get_pageview_id()),i={variables:{url:a.url,pageId:{pageViewId:n}}},e.abrupt("return",U(i).then((function(e){var t,n,i,r;return null!=e&&null!==(t=e.data)&&void 0!==t&&null!==(n=t.createShareCode)&&void 0!==n&&n.url&&(null==e||null===(i=e.data)||void 0===i||null===(r=i.createShareCode)||void 0===r?void 0:r.remaining)>=0?(m(),e.data.createShareCode.url):null})).catch((function(e){console.error("Err.",e),m()})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=J()(ee.a.mark((function e(){var t,n;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O({type:"copy",loading:!0}),!("undefined"!=typeof ClipboardItem&&"function"==typeof navigator.clipboard.write)){e.next=7;break}t=function(){var e=J()(ee.a.mark((function e(){var t;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:return t=e.sent,e.abrupt("return",new Blob([V(t)],{type:"text/plain"}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),navigator.clipboard.write([new ClipboardItem({"text/plain":t()})]).then((function(){O({type:"copy",loading:!1}),A(!0),H(),R.current&&clearTimeout(R.current),R.current=setTimeout((function(){return A(!1)}),5e3)})).catch((function(e){console.error("copy err!",e)})),e.next=14;break;case 7:return e.next=9,G();case 9:return n=e.sent,e.next=12,navigator.clipboard.writeText(V(n));case 12:e.sent||(O({type:"copy",loading:!1}),A(!0),H(),R.current&&clearTimeout(R.current),R.current=setTimeout((function(){return A(!1)}),5e3));case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=J()(ee.a.mark((function e(){var t;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",{});case 5:return e.abrupt("return",{subject:encodeURIComponent("".concat(Pe.nytdotcom,": ").concat(S)),body:encodeURIComponent("".concat(Pe.intro,"\n\n").concat(S,"\n\n").concat(T,"\n\n").concat(Object(ie.getEmailUrl)(t)))});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),X=!W&&0===q,K=!W&&0===q,$=function(){return ve||(ve=l()("div",{className:le.i,"data-testid":"gift-spinner"},void 0,l()(se.a,{fixed:!1})))};return D||z||!B?be||(be=l()(se.a,{fixed:!1})):l()("div",{className:b.j,id:_.c},void 0,l()("div",{className:Object(f.cx)(b.m,le.h)},void 0,l()(Oe,{giftArticleLinksRemainingCount:q,url:W}),!K&&l()("span",{className:Object(f.cx)(le.g,le.c)},void 0,q,"/10")),l()("div",{className:le.f},void 0,l()(me,{giftArticleLinksRemainingCount:q,url:W,hideShareOptions:X}),!K&&l()("span",{className:Object(f.cx)(le.g,le.b),"data-testid":"remainingCount"},void 0,q,"/10")),!X&&l()("ul",{className:b.n},void 0,l()("li",{className:b.f},void 0,p.a.createElement("button",{ref:g,type:"button","aria-label":ae.a.copy,onClick:Y,id:"giftcopyUrlId","data-testid":"giftcopyUrlId",className:b.h},l()(oe.c,{className:Object(f.cx)(b.e,b.b)}),l()("div",{className:Object(f.cx)(b.i,o()({},b.c,I)),"aria-live":"polite"},void 0,I?Pe.copied:Pe.copy,k.copy&&$()))),l()("li",{className:b.f},void 0,l()("a",{role:"button",href:"mailto:",target:"_blank",rel:"noopener noreferrer","aria-label":ae.a.email,onClick:function(){var e=J()(ee.a.mark((function e(t){var n,i;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.persist(),"mailto:"!==(n=t.currentTarget).href){e.next=15;break}return t.preventDefault(),O({type:"email",loading:!0}),e.next=7,Z();case 7:if(i=e.sent,O({type:"email",loading:!1}),i.body){e.next=11;break}return e.abrupt("return");case 11:n.href="mailto:?subject=".concat(i.subject,"&body=").concat(i.body),n.click(),O({type:"email",loading:!1}),v({module:{element:{name:"share-email",label:Pe.email}}});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},void 0,l()(oe.f,{className:Object(f.cx)(b.e,b.b)}),l()("div",{className:b.i},void 0,Pe.email),k.email&&$())),l()("li",{className:b.f},void 0,l()("button",{className:le.e,type:"button","aria-label":ae.a.facebook,target:"_blank",rel:"noopener noreferrer",onClick:J()(ee.a.mark((function e(){var t;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O({type:"facebook",loading:!0}),Ce=window.open("","shareWinFB"),e.next=4,G();case 4:if(t=e.sent,O({type:"facebook",loading:!1}),t){e.next=8;break}return e.abrupt("return");case 8:Ce.location.assign("https://www.facebook.com/dialog/share?app_id=9869919170&href=".concat(Object(ie.encodeUrlWithSMID)(t,"fb-share"),"&name=").concat(j,"&redirect_uri=").concat(L,"&quote=").concat(window.encodeURIComponent(Pe.intro))),Ce.focus(),v({module:{element:{name:"share-facebook",label:Pe.facebook}}});case 11:case"end":return e.stop()}}),e)})))},void 0,l()(oe.d,{className:Object(f.cx)(b.e,b.b)}),l()("div",{className:b.i},void 0,Pe.facebook),k.facebook&&$())),l()("li",{className:b.f},void 0,l()("button",{className:le.e,type:"button","aria-label":ae.a.twitter,"data-testid":"giftTwitter",target:"_blank",rel:"noopener noreferrer",onClick:J()(ee.a.mark((function e(){var t;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ce=window.open("","shareWinTW"),e.next=3,G();case 3:if(t=e.sent,O({type:"twitter",loading:!1}),t){e.next=7;break}return e.abrupt("return");case 7:Ce.location.assign("https://twitter.com/intent/tweet?url=".concat(Object(ie.encodeUrlWithSMID)(t,"tw-share"),"&text=").concat(Pe.intro)),v({module:{element:{name:"share-twitter",label:Pe.twitter}}});case 9:case"end":return e.stop()}}),e)})))},void 0,l()(oe.g,{className:Object(f.cx)(b.e,b.b)}),l()("div",{className:b.i},void 0,Pe.twitter),k.twitter&&$())),l()("li",{className:b.f},void 0,l()("button",{className:le.e,type:"button","aria-label":ae.a.telegram,"data-testid":"giftTelegram",target:"_blank",rel:"noopener noreferrer",onClick:J()(ee.a.mark((function e(){var t;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ce=window.open("","shareWinTel"),e.next=3,G();case 3:if(t=e.sent,O({type:"telegram",loading:!1}),t){e.next=7;break}return e.abrupt("return");case 7:Ce.location.assign("https://t.me/share/url?url=".concat(Object(ie.encodeUrlWithSMID)(t,"tel-share"),"&text=").concat(Pe.intro)),v({module:{element:{name:"share-telegram",label:Pe.telegram}}});case 9:case"end":return e.stop()}}),e)})))},void 0,_e||(_e=l()(Se,{telegram:!0})),l()("div",{className:b.i},void 0,Pe.telegram),k.telegram&&$())),l()("li",{className:b.f},void 0,l()("button",{className:le.e,type:"button","aria-label":ae.a.whatsapp,"data-testid":"giftWhatsapp",target:"_blank",rel:"noopener noreferrer",onClick:J()(ee.a.mark((function e(){var t;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ce=window.open("","shareWinWa"),e.next=3,G();case 3:if(t=e.sent,O({type:"whatsapp",loading:!1}),t){e.next=7;break}return e.abrupt("return");case 7:Ce.location.assign("https://api.whatsapp.com/send?text=".concat(j,"%20").concat(Object(ie.encodeUrlWithSMID)(t,"wa-share"))),v({module:{element:{name:"share-whatsapp",label:Pe.whatsapp}}});case 9:case"end":return e.stop()}}),e)})))},void 0,we||(we=l()(Se,{whatsapp:!0})),l()("div",{className:b.i},void 0,Pe.whatsapp),k.whatsapp&&$())),l()("li",{className:b.f},void 0,l()("button",{className:le.e,type:"button","aria-label":ae.a.reddit,"data-testid":"giftReddit",target:"_blank",rel:"noopener noreferrer",onClick:J()(ee.a.mark((function e(){var t;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ce=window.open("","shareWinRed"),e.next=3,G();case 3:if(t=e.sent,O({type:"reddit",loading:!1}),t){e.next=7;break}return e.abrupt("return");case 7:Ce.location.assign("http://www.reddit.com/submit?url=".concat(Object(ie.encodeUrlWithSMID)(t,"re-share"),"&title=").concat(j)),v({module:{element:{name:"share-reddit",label:Pe.reddit}}});case 9:case"end":return e.stop()}}),e)})))},void 0,xe||(xe=l()(Se,{reddit:!0})),l()("div",{className:b.i},void 0,Pe.reddit),k.reddit&&$()))))};Ae.displayName="GiftArticleMenu",Ae.defaultProps={pageType:void 0,trackingRegion:void 0,clickFn:function(){}},Ae.fragments={share:ne()(ke||(ke=$()(["\n    fragment ShareLinkMenu_share on CreativeWork {\n      headline {\n        default\n      }\n      summary\n      ... on Published {\n        url\n      }\n    }\n  "])))};var je,Le,Re,Ne,De,Be=Ae,ze=function(e){var t,n=e.pageType,i=e.share,r=e.className,a=e.tooltipAlign,s=e.forceOpen,c=e.toggleGiftArticleMenu,h=e.suppressGiftArticleTooltip,E=e.trackingRegion,T=e.menuClickFn,C=Object(y.useTracking)(),S=Object(d.useState)(!1),P=u()(S,2),M=P[0],A=P[1],U=Object(d.useState)(!1),V=u()(U,2),G=V[0],Y=V[1],X=Object(d.useState)(!1),J=u()(X,2),K=J[0],$=J[1],Q=Object(d.useState)(!1),ee=u()(Q,2),te=ee[0],ne=ee[1],ie=Object(k.a)().user,re=Object(O.f)(ie)&&Object(O.d)(ie),ae=Object(w.e)({scope:"stickyGiftTestWeb",limit:3,frequency:w.c}),oe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";e.stopPropagation(),C.trackEvent({event:"moduleInteraction",eventData:{trigger:"module",type:"click"},module:{name:"unlockedarticle-tooltip",region:"header",element:{name:"close",label:t}}}),A(!1)};Object(d.useEffect)((function(){h||ae.canShow()&&!1===G&&re&&(A(!0),Y(!0),ae.increment(),C.trackEvent({event:"impression",module:{name:"unlockedarticle-tooltip"}}))}),[C,h,ae,M,G,re]),Object(d.useEffect)((function(){s&&($(!0),c(!1))}),[s,c]);var se=function(e){e.preventDefault(),oe(e,"text"),$(!0)};return p.a.createElement(p.a.Fragment,null,!h&&M&&l()("div",{role:"tooltip",className:Object(f.cx)(I,j,o()({},B,"right"===a)),"aria-hidden":!M,"aria-labelledby":"dialogMessage",onClick:se,onKeyPress:se,tabIndex:"0",id:_.e},void 0,l()("div",{className:Object(f.cx)(b.j,F)},void 0,l()("p",{className:Object(f.cx)(N,D)},void 0,Le||(Le=l()("strong",{},void 0,"Send any friend a story"))),l()("p",{className:N,id:"dialogMessage"},void 0,"As a subscriber, you have ",Re||(Re=l()(g.a,{},void 0,"10 gift articles"))," to give each month. Anyone can read what you share.")),l()("button",{type:"button",onClick:oe,"aria-label":"close sharing tooltip"},void 0,Ne||(Ne=l()(v.a,{strokeWidth:"1.5"}))),l()("div",{className:Object(f.cx)(L,o()({},z,"right"===a))},void 0,l()("div",{className:R}))),l()(m.b,{isGiftArticle:!0,dataTestid:"gift-article-button",buttonContent:l()("span",{className:Object(f.cx)(q,W,r)},void 0,De||(De=l()(x.a,{ariaHidden:!0})),"Share full article"),className:Object(f.cx)(H,"actionbar-button"),setAriaLabel:!1,pageType:n,share:i,arrowPosition:"top",forceOpen:K,handleOpen:function(e){e?(K&&$(!1),M&&A(!1),e&&te!==e&&C.trackEvent({event:"moduleInteraction",eventData:{trigger:"module",type:"click"},module:{name:"share-tools",region:E,context:"unlocked-article-menu",element:{name:"tools-menu",label:"Tools Menu",url:i.url,uri:i.uri}}}),ne(e)):ne(e)},theme:{alignment:"RIGHT",isLoggedIn:!0},modalContent:re?t||(t=l()(Be,{share:i,pageType:n,trackingRegion:E,clickFn:T})):je||(je=l()(Z,{}))}))};ze.defaultProps={className:void 0,tooltipAlign:"left",toggleGiftArticleMenu:function(){return null},forceOpen:!1,suppressGiftArticleTooltip:!1,trackingRegion:"default",menuClickFn:function(){}};t.a=ze},Ymd4:function(e,t,n){"use strict";var i,r=n("VkAN"),a=n.n(r),o=n("gcR/"),s=n.n(o),l=(n("q1tI"),n("eFc+")),c=n.n(l),u=n("Jqp9"),d=n("fpec"),p=n.n(d),f=n("XlcC"),m=n.n(f),h=n("V6Yu"),g=n("jOYC"),y=n("TvEp"),v=n.n(y),b=n("wXC7"),_=n.n(b),w=n("nxVm"),x=n.n(w),k=Object(u.css)("margin:0 ",g.b.grid.pageMargin," 20px;position:relative;",_.a.breakpoint.small,"{margin-left:auto;margin-right:auto;}",x.a,";"),O=v.a.withComponent("h2",{target:"e1lk7jzz0"}),E=Object(u.css)("text-align:right;direction:rtl;unicode-bidi:isolate;"),T=k,C=function(e){var t,n=e.data,i=e.className,r=e.replaceHeading1,a=e.honorAlignment,o=e.customOffset,l=Object(u.useTheme)(),c=a&&(null==n||null===(t=n.textAlign)||void 0===t?void 0:t.toLowerCase())||null,d="rightToLeft"===(null==l?void 0:l.languageDirection)?E:null,f=Object(u.cx)(T,g.b.layout.textAlign[c]||null,i,d),y=(null==n?void 0:n.content)||"",v=Object(h.generateContentLink)(null==n?void 0:n.content);return r?s()(O,{className:f,id:v},void 0,n.content.map(m.a)):s()(p.a,{balanceText:!0,hangPunctuation:!0,textAlign:n.textAlign,className:f,content:y,customOffset:o},void 0,n.content.map(m.a))};C.displayName="Heading1Block",C.defaultProps={className:void 0,replaceHeading1:void 0,honorAlignment:!0,customOffset:""},C.fragments={data:c()(i||(i=a()(["\n    fragment Heading1Block_data on Heading1Block {\n      textAlign\n      content {\n        ... on InlineUnion {\n          __typename\n          ... on LineBreakInline {\n            type\n          }\n          ... on TextInline {\n            text @stripHtml\n            formats {\n              __typename\n              ... on BoldFormat {\n                type\n              }\n              ... on ItalicFormat {\n                type\n              }\n              ... on LinkFormat {\n                url\n                title\n              }\n            }\n          }\n        }\n      }\n    }\n  "])))};t.a=C},Youu:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("o0o1")),o=i(n("lSNA")),s=i(n("yXPU")),l=i(n("J4zp")),c=g(n("q1tI")),u=(i(n("17x9")),n("Jqp9")),d=n("p3S2"),p=n("7zGq"),f=i(n("Ae6e")),m=g(n("aViE"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}var y=function(e){var t,n=e.className,i=e.showTooltip,r=e.ctaText,h=e.ariaLabel,g=e.storageKey,y=e.segment,v=e.onView,b=e.onSubscribe,_=e.onUnsubscribe,w=e.tooltipArrowPosition,x=e.buttonWrapperClassName,k=e.showToggle,O=e.errorAlertClassName,E=e.tooltipOverrideClassName,T=e.alertWrapperClassName,C=e.testingInBrowser,S=(0,u.useTheme)().shouldRender,P=(0,c.useState)(!1),M=(0,l.default)(P,2),I=M[0],A=M[1],j=(0,c.useState)(!1),L=(0,l.default)(j,2),R=L[0],N=L[1],D=(0,c.useState)(!1),B=(0,l.default)(D,2),z=B[0],F=B[1],U=(0,c.useState)(!1),H=(0,l.default)(U,2),W=H[0],q=H[1],V=(0,c.useState)(),G=(0,l.default)(V,2),Y=G[0],Z=G[1],X=(0,c.useRef)(),J=(0,c.useRef)(null),K=(0,p.useOnScreen)(X);(0,c.useEffect)((function(){v&&K&&!W&&(v(),q(!0))}),[v,W,K]),(0,c.useEffect)((function(){window&&window.NativeBridge&&window.NativeBridge.subscriptionStatus&&window.NativeBridge.subscriptionStatus(y).then((function(e){e.success&&("true"===e.values.subscribed&&A(!0),"false"===e.values.subscribed&&A(!1),N(!0))})).catch((function(e){N(!1),console.error(e)}))}),[y]);var $=(0,c.useCallback)(function(){var e=(0,s.default)(a.default.mark((function e(t,n){var i,r,o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o={tag:y,region:n,product:"live"},null===(i=window)||void 0===i||null===(r=i.NativeBridge)||void 0===r||!r.updateSubscription){e.next=13;break}return e.prev=2,e.next=5,window.NativeBridge.updateSubscription(o);case 5:e.sent.success&&A(t),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),Z("Something went wrong. Please try again in a moment."),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,n){return e.apply(this,arguments)}}(),[y]),Q=(0,c.useCallback)((0,s.default)(a.default.mark((function e(){var t;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),z&&(null==J||null===(t=J.current)||void 0===t||t.closeTooltip()),e.prev=2,e.next=5,$(!0,"live-blog");case 5:b&&b(),Y&&Z(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),A(!1),Z("Something went wrong. Please try again in a moment.");case 13:case"end":return e.stop()}}),e,null,[[2,9]])}))),[Y,b,z,$]),ee=(0,c.useCallback)((0,s.default)(a.default.mark((function e(){return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!1),e.prev=1,e.next=4,$(!1,"live-blog");case 4:_&&_(),Y&&Z(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),A(!0),Z("Something went wrong. Please try again in a moment.");case 12:case"end":return e.stop()}}),e,null,[[1,8]])}))),[Y,_,$]);return k&&(R||C)?c.default.createElement("div",{ref:X,className:(0,u.cx)(m.notificationContainerClass,(t={},(0,o.default)(t,m.notificationLiveCoverageClass,null==S?void 0:S.bulletBlock),(0,o.default)(t,m.hasPostDividerClass,null==S?void 0:S.postDivider),t),n)},i&&c.default.createElement(f.default,{tooltipOpen:z,setTooltipOpen:F,arrowPosition:w,storageKey:g,className:E,ref:J}),c.default.createElement("div",{className:(0,u.cx)(m.pushSubWrapperClass,T)},c.default.createElement("p",{className:m.pushSubCtaClass},r||d.LIVE_ALERT_TOGGLE_DEFAULTS.cta),c.default.createElement("div",{className:(0,u.cx)(m.buttonWrapperClass,x)},c.default.createElement("button",{type:"button","aria-label":h||d.LIVE_ALERT_TOGGLE_DEFAULTS.ariaLabel,className:(0,u.cx)(m.buttonStylesBaseClass,I?"on":"off"),onClick:I?ee:Q}))),Y&&c.default.createElement("div",{className:O},c.default.createElement("p",{className:m.errorAlertClass},Y))):c.default.createElement("div",{ref:X})};y.defaultProps={className:void 0,ariaLabel:void 0,ctaText:void 0,showTooltip:!1,storageKey:void 0,tooltipArrowPosition:"bottom",onView:void 0,onSubscribe:void 0,onUnsubscribe:void 0,buttonWrapperClassName:void 0,showToggle:!0,errorAlertClassName:void 0,tooltipOverrideClassName:void 0,alertWrapperClassName:void 0,testingInBrowser:!1};var v=y;t.default=v},Ys1a:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=function(t){var n=t.onAppearedInViewport,i=(0,o.default)(t,c),r=(0,s.useState)(!1),u=(0,a.default)(r,2),d=u[0],p=u[1],f=(0,s.useRef)(n);return(0,s.useEffect)((function(){var e;d&&(null===(e=f.current)||void 0===e||e.call(f))}),[d]),n?s.default.createElement(l.default,{active:!d,onChange:function(e){return e&&p(!0)}},s.default.createElement(e,i)):s.default.createElement(e,i)};return t.displayName="VisibilitySensor(".concat(e.displayName,")"),t};var a=i(n("J4zp")),o=i(n("QILm")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),l=i(n("aqT/")),c=["onAppearedInViewport"];function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}},ZB1J:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.scrollContainerClass=t.preventInteractivesFromTurningLinksBlueClass=t.menuContainerClass=t.listSpacingClass=t.listClass=t.electionTitleClass=t.MENU_LEFT_RIGHT_SPACING=t.MENU_HEIGHT=void 0;var r=i(n("lSNA")),a=i(n("QILm")),o=n("Jqp9"),s=n("3sMT"),l=i(n("wXC7")),c=["alpha"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e){e.alpha;return d(d({},(0,a.default)(e,c)),{},{alpha:0})},f=s.light.colors.background.elevated.transform(p).rgba,m=s.dark.colors.background.elevated.transform(p).rgba;t.MENU_HEIGHT=55;var h=(0,o.css)("display:flex;align-items:center;justify-content:left;background:",s.color.background.elevated,";border-bottom:1px solid ",s.color.stroke.quaternary,";min-height:",55,"px;position:relative;",l.default.breakpoint.small,"{justify-content:center;}",l.default.printHide);t.menuContainerClass=h;var g=(0,o.css)("scrollbar-width:none;::-webkit-scrollbar{display:none;}@media (pointer:coarse){overflow-x:scroll;-webkit-overflow-scrolling:touch;}");t.MENU_LEFT_RIGHT_SPACING=20;var y=(0,o.css)("@media (min-width:",620,"px){min-width:",620,"px;}min-width:unset;padding:0.5px 0 0.5px ",20,"px;display:flex;align-items:center;justify-content:left;overflow-x:auto;white-space:nowrap;",g," ",l.default.breakpoint.mediumLarge,"{align-items:baseline;}::after{@media (max-width:",l.default.breakpoint.width.small-1,"px){content:'';background:linear-gradient(90deg,",f,",",s.color.background.elevated,");height:40px;position:absolute;right:0;width:24px;z-index:2;",l.default.darkColorPreference("background: linear-gradient(90deg, ".concat(m,", ").concat(s.color.background.elevated,")")),";}}");t.scrollContainerClass=y;var v=(0,o.css)("padding:1em 0;margin-right:1.4em;&:last-child{margin-right:",20,"px;}");t.listSpacingClass=v;var b=(0,o.css)("font-family:",l.default.font.franklinBase,";display:flex;width:auto;list-style:none;padding-left:0;flex-shrink:0;justify-content:center;align-items:baseline;");t.listClass=b;var _=(0,o.css)("color:",s.color.content.primary,";");t.preventInteractivesFromTurningLinksBlueClass=_;var w=(0,o.css)("align-self:center;");t.electionTitleClass=w},ZHMA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){try{if("undefined"==typeof navigator||/MSIE\s8\.0/.test(navigator.userAgent)||!window.localStorage)return!1;var e="nyt-test-".concat(Date.now());return window.localStorage.setItem(e,1),window.localStorage.removeItem(e),!0}catch(e){return!1}},r={getItem:function(e){try{return i()&&window.localStorage.getItem(e)}catch(e){return null}},setItem:function(e,t){if(i())try{window.localStorage.setItem(e,t)}catch(e){return null}return null},removeItem:function(e){try{return i()&&window.localStorage.removeItem(e)}catch(e){return null}}};t.default=r},ZR5w:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.loginLink=t.longHorizontalRule=t.topperWrapClass=t.topperClass=void 0;var r,a,o,s,l=n("Jqp9"),c=n("lVLo");t.topperClass=(0,l.css)(r||(r=i(["\n  font-family: ",";\n  font-weight: 500;\n  padding-top: 24px;\n  padding-bottom: 16px;\n  text-align: center;\n  line-height: 1.2;\n  font-size: 14px;\n  color: ",";\n"],["\n  font-family: ",";\n  font-weight: 500;\n  padding-top: 24px;\n  padding-bottom: 16px;\n  text-align: center;\n  line-height: 1.2;\n  font-size: 14px;\n  color: ",";\n"])),c.fonts.franklin,c.colors.black),t.topperWrapClass=(0,l.css)(a||(a=i(["\n  display: block;\n\n  @media (min-width: ","px) {\n    display: inline;\n  }\n"],["\n  display: block;\n\n  @media (min-width: ","px) {\n    display: inline;\n  }\n"])),c.widths.small),t.longHorizontalRule=(0,l.css)(o||(o=i(["\n  border: 0;\n  background-color: ",";\n  height: 1px;\n  width: 100%;\n"],["\n  border: 0;\n  background-color: ",";\n  height: 1px;\n  width: 100%;\n"])),c.colors.lineGrey),t.loginLink=(0,l.css)(s||(s=i(["\n  color: ",";\n  font-weight: 700;\n  text-decoration: none;\n"],["\n  color: ",";\n  font-weight: 700;\n  text-decoration: none;\n"])),c.colors.veryDarkGrey)},ZYXy:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),function(e){var t=e.className,n=e.fill;return r.default.createElement("svg",{viewBox:"0 0 15 9",className:t,width:"15",height:"9",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.906 8.418V0L5.64 4.76.906 8.419zm13 0L9.174 4.761 13.906 0v8.418zM7.407 6.539l-1.13-1.137L.907 9h13l-5.37-3.598-1.13 1.137zM1.297 0h12.22l-6.11 5.095L1.297 0z",fill:n}))});a.displayName="Mail",a.defaultProps={className:void 0,fill:"#000"};var o=a;t.default=o},"Zc/f":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.inlineRegions=t.default=void 0;var r,a=i(n("lSNA")),o={TOP_BANNER:"TOP_BANNER",ABOVE_MAIN_CONTENT:"ABOVE_MAIN_CONTENT",MAIN_CONTENT_1:"MAIN_CONTENT_1",MAIN_CONTENT_2:"MAIN_CONTENT_2",MAIN_CONTENT_3:"MAIN_CONTENT_3",BELOW_MAIN_CONTENT:"BELOW_MAIN_CONTENT"},s=(r={},(0,a.default)(r,o.MAIN_CONTENT_1,{minPercent:.2,maxPercent:.4}),(0,a.default)(r,o.MAIN_CONTENT_2,{minPercent:.4,maxPercent:.6}),(0,a.default)(r,o.MAIN_CONTENT_3,{minPercent:.6,maxPercent:.8}),r);t.inlineRegions=s;var l=o;t.default=l},ZfOj:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("Jqp9")),s=n("ZoyY"),l=i(n("PxMw")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("v466"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var d=s.textConstants.CRITICS_PICK_TEXT,p=s.textConstants.DISCLAIMER_TEXT,f=function(e,t){return 1===t?e:"".concat(e,"s")},m=function(e){var t=e.review,n=e.index,i=e.deviceType,r=e.trackClick,u=t.isCriticsPick,m=t.overrideLabel,h=t.subject,g=void 0===h?{}:h;if(!g)return null;var y=g.directors,v=g.genres,b=g.imdbId,_=g.movieCast,w=g.movieRating,x=g.runtimeUS,k=g.ticketUrl,O=g.title,E=g.writers,T=m||O,C=(0,s.movieRating)(w),S=(_||[]).map((function(e){return null==e?void 0:e.actor})).filter(Boolean),P=(0,s.formatDuration)(x),M=function(e,t){return e?"http://".concat("smartphone"===t?"m":"www",".imdb.com/title/").concat(e,"/?ref_=ref_ext_NYT"):null}(b,i),I=k;return k&&"smartphone"===i&&k.match(/www\.imdb/)&&(I=k.replace("www.","m.")),a.default.createElement("aside",{className:c.wrapperClass,id:"movie-review-".concat(n+1)},a.default.createElement("div",{className:c.reviewClass},a.default.createElement("header",null,a.default.createElement("div",null,T&&a.default.createElement("h4",{dangerouslySetInnerHTML:{__html:T}}),u&&a.default.createElement("div",{className:c.ratingClass},a.default.createElement("span",{className:c.criticsPickClass},a.default.createElement("i",null),a.default.createElement("span",null,d)))),k&&a.default.createElement("div",{className:c.linkWithDisclaimerClass},a.default.createElement(l.default,{theme:"reviews",className:c.reviewButtonClass,href:I,onClick:function(){return r("movie")},target:"_blank",rel:"noopener noreferrer"},"Find Tickets"),a.default.createElement("p",{className:c.disclaimerClass},p.MOVIE))),a.default.createElement("dl",{className:c.metadataClass},y&&!!y.length&&a.default.createElement("div",null,a.default.createElement("dt",null,f("Director",y.length)),a.default.createElement("dd",null,y.reduce((function(e,t,n){return y.length>1&&n>0&&e.push(a.default.createElement("span",{key:"".concat(n.toString(),"-between")},", ")),e.push(a.default.createElement("span",{key:n.toString(),dangerouslySetInnerHTML:{__html:t}})),e}),[]))),E&&!!E.length&&a.default.createElement("div",null,a.default.createElement("dt",null,f("Writer",E.length)),a.default.createElement("dd",null,E.reduce((function(e,t,n){return E.length>1&&n>0&&e.push(a.default.createElement("span",{key:"".concat(n.toString(),"-between")},", ")),e.push(a.default.createElement("span",{key:n.toString(),dangerouslySetInnerHTML:{__html:t}})),e}),[]))),S&&!!S.length&&a.default.createElement("div",null,a.default.createElement("dt",null,f("Star",S.length)),a.default.createElement("dd",null,S.reduce((function(e,t,n){return S.length>1&&n>0&&e.push(a.default.createElement("span",{key:"".concat(n.toString(),"-between")},", ")),e.push(a.default.createElement("span",{key:n.toString(),dangerouslySetInnerHTML:{__html:t}})),e}),[]))),C&&a.default.createElement("div",null,a.default.createElement("dt",null,"Rating"),a.default.createElement("dd",null,C)),P&&a.default.createElement("div",null,a.default.createElement("dt",null,"Running Time"),a.default.createElement("dd",null,P)),v&&!!v.length&&a.default.createElement("div",null,a.default.createElement("dt",null,f("Genre",v.length)),a.default.createElement("dd",null,v.reduce((function(e,t,n){return v.length>1&&n>0&&e.push(a.default.createElement("span",{key:"".concat(n.toString(),"-between")},", ")),e.push(a.default.createElement("span",{key:n.toString(),dangerouslySetInnerHTML:{__html:t}})),e}),[])))),M&&a.default.createElement("div",{className:c.poweredByClass},a.default.createElement("a",{href:M,title:"Visit this movie's page on IMDb",target:"_blank",rel:"noopener noreferrer"},a.default.createElement("div",{className:(0,o.cx)(c.logoClass,"imdb")})),a.default.createElement("p",null,"Movie data powered by IMDb.com"))))};m.displayName="MovieFooter",m.defaultProps={deviceType:""};var h=m;t.default=h},ZgZ1:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.downloadButtonClass=t.logoClass=t.mainContent=t.contentTextClass=t.headerTextClass=void 0;var r=n("Jqp9"),a=n("lVLo");t.headerTextClass=(0,r.css)(o||(o=i(["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  margin: auto 0 auto 20px;\n  white-space: pre-wrap;\n\n  @media (min-width: ","px) {\n    white-space: unset;\n  }\n"],["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  margin: auto 0 auto 20px;\n  white-space: pre-wrap;\n\n  @media (min-width: ","px) {\n    white-space: unset;\n  }\n"])),a.fonts.franklin,a.fontWeights.bold,a.widths.small),t.contentTextClass=(0,r.css)(s||(s=i(["\n  font-family: ",";\n  font-size: 18px;\n  font-weight: ",";\n  color: ",";\n  margin: 0 0 18px;\n"],["\n  font-family: ",";\n  font-size: 18px;\n  font-weight: ",";\n  color: ",";\n  margin: 0 0 18px;\n"])),a.fonts.cheltenham,a.fontWeights.light,a.colors.white);var o,s,l,c,u;t.mainContent=(0,r.css)(l||(l=i(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-image: linear-gradient(to top right, #16243c, #254034);\n  border-radius: 6px;\n  padding: ","px;\n  margin: 0 ","px ","px;\n  width: calc(100% - (","px + ","px));\n  filter: drop-shadow(0px 4px 2px ",");\n"],["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-image: linear-gradient(to top right, #16243c, #254034);\n  border-radius: 6px;\n  padding: ","px;\n  margin: 0 ","px ","px;\n  width: calc(100% - (","px + ","px));\n  filter: drop-shadow(0px 4px 2px ",");\n"])),26,20,20,52,40,a.colors.lighterGrey),t.logoClass=(0,r.css)(c||(c=i(["\n  height: 16px;\n  margin-bottom: 12px;\n\n  svg {\n    height: 100%;\n    max-width: 100%;\n  }\n"],["\n  height: 16px;\n  margin-bottom: 12px;\n\n  svg {\n    height: 100%;\n    max-width: 100%;\n  }\n"]))),t.downloadButtonClass=(0,r.css)(u||(u=i(["\n  display: flex;\n  align-items: baseline;\n  gap: 5px;\n  border-radius: 42px;\n  font-family: ",";\n  font-weight: ",";\n  font-size: 12px;\n  text-decoration: none;\n  background-color: ",";\n  color: ",";\n  padding: 6px 26px;\n"],["\n  display: flex;\n  align-items: baseline;\n  gap: 5px;\n  border-radius: 42px;\n  font-family: ",";\n  font-weight: ",";\n  font-size: 12px;\n  text-decoration: none;\n  background-color: ",";\n  color: ",";\n  padding: 6px 26px;\n"])),a.fonts.franklin,a.fontWeights.semiBold,a.colors.white,a.colors.black)},Zgws:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("dE6V")).default;t.default=r},ZjMX:function(e,t,n){"use strict";var i,r=n("VkAN"),a=n.n(r),o=n("gcR/"),s=n.n(o),l=n("lSNA"),c=n.n(l),u=(n("q1tI"),n("17x9")),d=n.n(u),p=n("eFc+"),f=n.n(p),m=n("Jqp9"),h=n("3Rk2"),g=n.n(h),y=n("wXC7"),v=n.n(y),b=g()([v.a.breakpoint.small,v.a.breakpoint.medium,"@media (min-width: 834px)"]),_=Object(m.css)("display:flex;flex-direction:column;"),w=Object(m.css)("display:flex;justify-content:space-around;@media (min-width:375px){align-items:center;}"),x=Object(m.css)("justify-content:flex-start;"),k=Object(m.css)("text-align:start;@media (max-width:374px){padding-right:10px;}",b({paddingRight:["22px","0px","70px"]}),";"),O=Object(m.css)("margin:0 auto;",b({width:["40%",null,"145px","172px"],height:["40%",null,"145px","172px"]}),";"),E=Object(m.css)("font-family:",v.a.font.serifMedium,";font-weight:",v.a.font.weight.book,";@media (max-width:374px){font-size:",v.a.font.size(15),";line-height:1.25em;}",b({padding:["10px 0",null,"14px 0"],fontSize:[v.a.font.size(16),null,v.a.font.size(22),v.a.font.size(28)],lineHeight:[v.a.font.size(22),null,v.a.font.size(30),v.a.font.size(38)]}),";"),T=Object(m.css)("opacity:0.6;font-family:",v.a.font.franklinBase,";font-weight:",v.a.font.weight.medium,";font-size:",v.a.font.size(14),";line-height:",v.a.font.size(20),";",b({fontSize:[v.a.font.size(14),null,v.a.font.size(19),v.a.font.size(23)],lineHeight:[v.a.font.size(19),null,v.a.font.size(30),v.a.font.size(38)]}),";"),C=Object(m.css)("justify-content:flex-end;"),S=Object(m.css)("position:absolute;width:100%;height:100%;object-fit:cover;top:0;left:0;z-index:1;"),P=Object(m.css)("position:relative;z-index:5;text-align:start;padding:0 15px 4px;"),M=Object(m.css)("font-family:",v.a.font.cheltenham,";font-weight:",v.a.font.weight.medium,";font-size:",v.a.font.size(14),";line-height:",v.a.font.size(18),";color:",v.a.color.white,";letter-spacing:0.2px;margin-bottom:4px;"),I=Object(m.css)("font-family:",v.a.font.franklinBase,";font-weight:",v.a.font.weight.medium,";font-size:",v.a.font.size(12),";line-height:",v.a.font.size(18),";color:",v.a.color.white,";opacity:0.6;");function A(e){var t,n,i,r,a,o,l,u,d,p,f,h=e.article,g=h.bylines,y=h.headline,v=h.promotionalMedia,b=e.isVariant,A=e.className,j=(null==v||null===(t=v.video)||void 0===t||null===(n=t.crops)||void 0===n||null===(i=n[0])||void 0===i||null===(r=i.renditions)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.url)||(null==v||null===(o=v.crops)||void 0===o||null===(l=o[0])||void 0===l||null===(u=l.renditions)||void 0===u||null===(d=u[0])||void 0===d?void 0:d.url)||(null==v?void 0:v.square),L=(null==v||null===(p=v.caption)||void 0===p?void 0:p.text)||"";return s()("div",{className:Object(m.cx)(_,c()({},C,b),A),"data-testid":"ArticlePreview"},void 0,s()("div",{className:Object(m.cx)((f={},c()(f,x,!j),c()(f,w,!b),f))},void 0,s()("div",{className:b?P:k},void 0,s()("h2",{className:b?M:E},void 0,y.default),s()("h3",{className:b?I:T},void 0,g.map((function(e){return e.renderedRepresentation})))),j&&s()("img",{className:b?S:O,src:j,alt:L})))}A.displayName="ArticlePreview";var j=d.a.shape({renditions:d.a.arrayOf(d.a.shape({url:d.a.string}))});d.a.arrayOf(d.a.shape({renderedRepresentation:d.a.string})).isRequired,d.a.shape({default:d.a.string}).isRequired,d.a.shape({crops:d.a.arrayOf(j),video:d.a.shape({crops:d.a.arrayOf(j)})});A.defaultProps={className:void 0,isVariant:!1},A.fragments={article:f()(i||(i=a()(["\n    fragment ArticlePreview_article on Article {\n      id\n      bylines {\n        renderedRepresentation\n      }\n      headline {\n        default\n      }\n      promotionalMedia {\n        ... on Image {\n          id\n          crops(cropNames: [MEDIUM_SQUARE]) {\n            renditions {\n              url\n            }\n          }\n        }\n        ... on Video {\n          id\n          video: promotionalMedia {\n            ... on Image {\n              id\n              crops(cropNames: [MEDIUM_SQUARE]) {\n                renditions {\n                  url\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  "])))};t.a=A},ZoyY:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.textConstants=t.sizeClassNameMap=t.showCategoryMap=t.shouldShowDisclaimer=t.priceMap=t.movieRating=t.isClosed=t.getStartingDateIndex=t.getDisclaimerText=t.formatDuration=void 0;var r=i(n("7GK/"));t.formatDuration=function(e){if(!e||"number"!=typeof e)return null;var t=e%60,n=Math.floor(e/60);return 0===n?"".concat(t," minutes"):0===t?"".concat(n," hours"):"".concat(n,"h ").concat(t,"m")};var a=["G","PG","PG-13","R","NC-17","Not Rated"],o=["NR","Unrated","Unrat","Not R"];t.movieRating=function(e){return e?o.indexOf(e)>=0?"Not Rated":a.indexOf(e)>=0?e:null:null};var s={CRITICS_PICK_TEXT:"NYT Critics Pick",PRICE_DESCRIPTIONS:{1:"inexpensive",2:"moderate",3:"expensive",4:"very expensive"},RATING_DESCRIPTIONS:{.25:"Poor",.5:"Fair",.75:"Satisfactory"},DISCLAIMER_TEXT:{BOOK:"When you purchase an independently reviewed book through our site, we earn an affiliate commission.",MOVIE:"When you purchase a ticket for an independently reviewed film through our site, we earn an affiliate commission.",RESTAURANT:"When you make a reservation at an independently reviewed restaurant through our site, we earn an affiliate commission.",THEATER:"When you purchase a ticket for an independently reviewed play or musical through our site, we earn an affiliate commission."},BUY_BUTTON_CONFIG:{BOOK:!0,MOVIE:!0,RESTAURANT:!0,THEATER:!0}};t.textConstants=s;var l=function(e){if(!e)return!1;var t=(0,r.default)(e,"YYYY-MM-DD");return!!t.isValid()&&(0,r.default)().diff(t,"days",!0)>1};t.isClosed=l;t.shouldShowDisclaimer=function(e){var t=e.article;return t.compatibility.isDiningReview?s.BUY_BUTTON_CONFIG.RESTAURANT&&t.reviewItems.some((function(e){var t,n;return(null===(t=e.subject)||void 0===t?void 0:t.reservationsUrl)&&(n=e.subject,["OPEN","OPENING_SOON"].includes(n.openStatus))})):t.compatibility.isMovieReview?s.BUY_BUTTON_CONFIG.MOVIE&&t.reviewItems.some((function(e){var t;return null===(t=e.subject)||void 0===t?void 0:t.ticketUrl})):!!(t.reviewItems&&t.reviewItems[0]&&t.reviewItems[0].subject&&"TheaterEvent"===t.reviewItems[0].subject.__typename)&&(s.BUY_BUTTON_CONFIG.THEATER&&t.reviewItems.some((function(e){return e.subject&&e.subject.ticketInfo&&e.subject.ticketInfo.website&&!l(e.subject.stopDate)})))};t.getDisclaimerText=function(e){var t=e.article;return t.compatibility.isDiningReview?s.DISCLAIMER_TEXT.RESTAURANT:t.compatibility.isMovieReview?s.DISCLAIMER_TEXT.MOVIE:t.reviewItems&&t.reviewItems[0]&&t.reviewItems[0].subject&&"TheaterEvent"===t.reviewItems[0].subject.__typename?s.DISCLAIMER_TEXT.THEATER:null};t.sizeClassNameMap={SMALL:"sizeSmall",MEDIUM:"sizeMedium",LARGE:"sizeLarge",FULL:"sizeFull"};t.showCategoryMap={BROADWAY:"Broadway",OFFBROADWAY:"Off Broadway",OFFOFFBROADWAY:"Off Off Broadway"};t.priceMap={UNKNOWN:0,INEXPENSIVE:1,MODERATE:2,EXPENSIVE:3,VERY_EXPENSIVE:4};t.getStartingDateIndex=function(e){if(!e)return 0;for(var t=new Date((new Date).toISOString()),n=0;n<e.length;n+=1){var i=new Date(e[n].showDate);if("string"==typeof e[n].showDate&&t<i)return n}return 0}},ZssJ:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("h3Sg"))),s=i(n("hXGK")),l=i(n("49hH")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("UMeL"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var d=function(e){var t=e.playerRef,n=e.isPlaying,i=e.onPlayPause,r=e.audioDuration,u=e.currentTime,d=e.isVisible;return a.default.createElement("div",{className:c.controlsClass,"data-testid":"transcript-playback-controls"},a.default.createElement("div",{className:c.playbackControlsClass},a.default.createElement(o.default,{playerRef:t,isPlaying:n,isVisible:d,onPlayPause:i}),a.default.createElement(l.default,{isPlaying:n,playerRef:t}),a.default.createElement(s.default,{playerRef:t,audioDuration:r,currentTime:u})))};d.displayName="Controls",d.defaultProps={playerRef:void 0,isVisible:void 0,isPlaying:void 0,onPlayPause:void 0,audioDuration:void 0,currentTime:void 0};var p=d;t.default=p},ZwWh:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("Jqp9"),a=i(n("42vy")),o=i(n("yEZI")),s=i(n("wXC7")),l=n("3sMT"),c=(0,r.styled)("div",{target:"e1hjfjg00"})("display:flex;align-items:center;justify-content:",(function(e){return e&&"Compact"===e.displayStyle?"space-between":"start"}),";border:1px solid ",l.color.stroke.quaternary,";border-width:1px 0;padding:20px 0;margin-bottom:20px;a{display:inline-block;text-decoration:none;}.thumbnail-link{margin-right:30px;width:180px;min-width:180px;filter:drop-shadow( 0 0 3px ",l.dark.colors.background.primary.transform(s.default.setAlpha(.15)).rgba," );}div:not(:last-child){margin-right:15px;}",a.default,"{font-size:",s.default.font.size(18),";line-height:",s.default.font.size(22),";margin:10px 0 10px 0;}",o.default,"{font-size:",s.default.font.size(14),";line-height:",s.default.font.size(19),";margin:0 0 10px 0;}strong{font-weight:",s.default.font.weight.bold,";}@media (max-width:",s.default.breakpoint.width.small-1,"px){flex-direction:",(function(e){return e&&"Compact"===e.displayStyle?"column":"row-reverse"}),";justify-content:space-between;align-items:start;.thumbnail-link{margin-left:15px;margin-right:0;width:30%;min-width:30%;}}",s.default.printHide,";");t.default=c},"a/Il":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.tooltipContentWrapperClass=t.tooltipContentClass=t.tooltipClass=t.closeIconClass=t.closeIconButtonClass=t.arrowTopPositionClass=void 0;var r=n("Jqp9"),a=n("3sMT"),o=i(n("wXC7")),s=(0,r.css)("position:absolute;width:104%;right:0%;max-width:339px;background-color:",a.color.background.elevated,";border:0.5px solid ",a.color.stroke.quaternary,";border-radius:4px;font-family:",o.default.font.franklinBase,";font-size:",o.default.font.size(14),";line-height:",o.default.font.size(16),";color:",a.color.content.primary,";box-sizing:border-box;bottom:78px;z-index:199;text-align:left;box-shadow:0 1px 6px rgba(0,0,0,0.2);&::after{position:absolute;width:16px;height:16px;right:5%;bottom:-8px;background:",a.color.background.elevated,";border-left:0.5px solid ",a.color.stroke.quaternary,";border-top:0.5px solid ",a.color.stroke.quaternary,";border-radius:1px;transform:rotate(-135deg);content:' ';}");t.tooltipClass=s;var l=(0,r.css)("font-size:",o.default.font.size(16),";line-height:",o.default.font.size(22),";font-family:",o.default.font.franklinBase,";margin:24px 0 24px 24px;");t.tooltipContentClass=l;var c=(0,r.css)("&::after{top:-8px;transform:rotate(135deg);}");t.arrowTopPositionClass=c;var u=(0,r.css)("display:flex;flex-direction:row;");t.tooltipContentWrapperClass=u;var d=(0,r.css)("width:60px;height:60px;flex:0 0 60px;margin-top:5px;&,&:active{background:transparent;}");t.closeIconButtonClass=d;var p=(0,r.css)("width:12px;height:12px;");t.closeIconClass=p},a6hj:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-athletic-bounce-6b7dccf3bd213cda0ff4e4dcaaff59e9.webp"},a6xQ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.underlineClass=t.timestampClass=t.storylinesMenuShadowClass=t.storylinesMenuApplyShadowClass=t.placeholderClass=t.liveLabelClass=t.linkClass=t.justifyContentClass=t.breakingTimestampClass=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=n("3sMT"),s=(0,r.css)("color:",o.color.signal.breaking,";font-size:",a.default.font.size(12),";margin-right:4px;");t.liveLabelClass=s;var l=(0,r.css)("overflow-y:hidden;justify-content:left;",a.default.breakpoint.mediumLarge,"{justify-content:center;}");t.justifyContentClass=l;var c=(0,r.css)(":hover{text-decoration:none;}text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:1px;");t.underlineClass=c;var u=(0,r.css)("color:",o.color.content.primary,";font-family:",a.default.font.franklinBase,";font-size:",a.default.font.size(14),";margin-top:0;strong{font-weight:",a.default.font.weight.bold,";}");t.linkClass=u;var d=(0,r.css)("color:",o.color.content.quaternary,";font-size:",a.default.font.size(11),";font-family:",a.default.font.franklinBase,";span[data-time='rel']{position:relative;}span[data-time='abs']{display:none;}");t.timestampClass=d;var p=(0,r.css)("color:",o.color.signal.breaking,";");t.breakingTimestampClass=p;var f=(0,r.css)("width:auto;min-width:40px;position:relative;margin:0 10px;display:inline-block;");t.placeholderClass=f;var m=(0,r.css)("&::after{content:'';position:absolute;top:0;left:0;height:100%;width:100%;z-index:-1;box-shadow:0 0 transparent,0 0 transparent,1px 3px 6px #00000026;opacity:0;transition:opacity 200ms ease-out;@media (prefers-color-scheme:dark){.NYTApp &{box-shadow:none;}}}");t.storylinesMenuShadowClass=m;var h=(0,r.css)("border-bottom:1px solid transparent;&::after{opacity:1;}@media (prefers-color-scheme:dark){.NYTApp &{border-bottom:1px solid ",o.color.stroke.quaternary,";}}");t.storylinesMenuApplyShadowClass=h},a9ya:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return p}));var i,r,a=n("lSNA"),o=n.n(a),s=n("f81r"),l={ALL:"ALL",HIGHLIGHTED:"HIGHLIGHTED",RECOMMENDED:"RECOMMENDED",REPORTER_REPLIES:"REPORTER_REPLIES"},c={NEWEST:"NEWEST",OLDEST:"OLDEST"},u=(i={},o()(i,c.NEWEST,s.a.newest),o()(i,c.OLDEST,s.a.oldest),i),d={ALL:"ALL",HIGHLIGHTED:"HIGHLIGHTED",OVERVIEW:"OVERVIEW",RECOMMENDED:"RECOMMENDED",SINGLE_COMMENT:"SINGLE_COMMENT",REPORTER_REPLIES:"REPORTER_REPLIES"},p=(r={},o()(r,d.ALL,s.a.all),o()(r,d.HIGHLIGHTED,s.a.nytPicks),o()(r,d.RECOMMENDED,s.a.readerPicks),o()(r,d.REPORTER_REPLIES,s.a.reporterReplies),r)},aFeP:function(e,t,n){"use strict";var i=n("lSNA"),r=n.n(i),a=n("4LjT"),o=n("Kxyt"),s=n("eFc+"),l=n.n(s);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=function(e){var t=Object(o.useQuery)(l()(a.userGraphql),{ssr:!1,skip:!!e,fetchPolicy:"cache-first"}),n=t.data,i=void 0===n?{user:e}:n,r=t.refetch;return i.user?u(u({},i.user),{},{fetchUserDataForNewsletter:r}):null}},aI5t:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lwsE")),a=i(n("W8MJ")),o=i(n("7W2i")),s=i(n("a1gu")),l=i(n("Nsbk")),c=i(n("HoNw")),u=i(n("BtaY")),d=i(n("QNzT")),p=i(n("65wn")),f=i(n("lgII")),m=i(n("dc0q")),h=n("Np/z");function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,l.default)(e);if(t){var r=(0,l.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,s.default)(this,n)}}var y=["superJumbo","mediumSquareAt3X"],v=function(e){(0,o.default)(n,e);var t=g(n);function n(){return(0,r.default)(this,n),t.apply(this,arguments)}return(0,a.default)(n,[{key:"promotionalImage",get:function(){var e;if((0,h.hasCrops)(null===(e=this.data)||void 0===e?void 0:e.promotionalMedia))return new m.default(this.data.promotionalMedia,y).getStructuredData()}},{key:"getStructuredData",value:function(){var e,t,n=this.data,i=n.url,r=n.displayName,a=n.language,o=n.bioUrl,s=n.legacyData.htmlBiography,l=n.contactDetails.socialMedia,c=(null==a?void 0:a.code)||void 0,m=null==s?void 0:s.replace(/<[^>]*>/g,""),h=this.itemList||[],g=i||o,y=[];l&&l.forEach((function(e){"facebook"===e.type&&y.push("https://www.facebook.com/".concat(e.account)),"twitter"===e.type&&y.push("https://twitter.com/".concat(e.account))}));var v=new u.default({url:g,name:r,description:m,inLanguage:c,image:this.promotionalImage,sameAs:y}),b=new f.default({url:g,name:r,inLanguage:c,author:v,mainEntityOfPage:g,mainEntity:new p.default({items:h.slice(0,20)})});return new d.default({dateModified:(null===(e=h[0])||void 0===e||null===(t=e.node)||void 0===t?void 0:t.firstPublished)||void 0,mainEntity:v,hasPart:b})}}]),n}(c.default);t.default=v},aN1B:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.dropcapClass=t.default=void 0;var r=n("3sMT"),a=n("Jqp9"),o=i(n("wXC7")),s=(0,a.css)("float:left;width:auto;margin:23px 40px 20px 0;font-size:",o.default.font.size(66),";font-family:",o.default.font.magslab,",",o.default.font.magsans,";line-height:0.5;color:",r.color.content.primary,";");t.dropcapClass=s;var l=(0,a.styled)("span",{target:"ethc9we0"})(s,";");t.default=l},aV8g:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n("q1tI"));t.default=function(){return r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"23.7 -85.1 300 39.5",role:"img","aria-label":"The New York Times Logo"},r.default.createElement("path",{d:"m46.2-81c0-3.2-3-4.2-5.6-4v.5c1.5 0 2.7.5 2.7 1.6 0 .7-.5 1.6-2 1.6-1.2 0-3.5-.7-5.4-1.3-2.1-.7-4-1.4-5.6-1.4-3.2 0-5.6 2.4-5.6 5.3 0 2.4 1.8 3.2 2.5 3.5l.2-.4c-.5-.3-.9-.7-.9-1.6 0-.7.6-1.8 2.3-1.8 1.5 0 3.4.7 6 1.4 2.2.6 4.7 1.2 6 1.4v5l-2.5 2.1v.2l2.5 2.2v6.9c-1.3.7-2.8.9-4 .9-2.4 0-4.6-.6-6.4-2.6l6.7-3.2v-11.1l-8.2 3.6c.9-2.2 2.6-3.6 4.3-4.7l-.1-.4c-4.9 1.3-9.3 5.8-9.3 11.3 0 6.6 5.4 11.5 11.5 11.5 6.6 0 10.8-5.2 10.7-10.6h-.4c-1 2.1-2.4 4.1-4.2 5.1v-6.8l2.6-2.1v-.2l-2.6-2.1v-5c2.3-.1 4.8-1.8 4.8-4.8zm-14.2 18-2 1c-1.1-1.5-1.9-3.5-1.9-6.2 0-1.1.1-2.5.5-3.5l3.4-1.5zm17.3 3.6-2.2 1.6.3.3 1-.7 3.6 3.3 4.9-3.3-.2-.3-1.3.8-1.6-1.6v-11.2l1.3-1 2.8 2.3v9.9c0 6.2-1.4 7.2-4.2 8.2v.4c4.6.2 8.8-1.4 8.8-9.3v-10.6l1.5-1.2-.2-.2-1.3 1-4-3.5-4.6 3.5v-13.4h-.3l-5.8 3.9v.3c.6.4 1.6.6 1.6 2.5v18.3zm29.8-1.7-4 3.1-4.1-3.3v-1.9l7.7-5.2v-.2l-3.8-5.9-8.5 4.5v10.7l-1.7 1.3.3.3 1.5-1.2 5.5 4 7.4-5.8zm-8.1-2.7v-8l.3-.2 3.6 5.6zm39.3-18.7c0-.5-.1-.9-.3-1.5h-.4c-.5 1.4-1.1 2.1-2.7 2.1-1.4 0-2.5-.9-3.1-1.5l-4.7 5.4.4.4 1.3-1.5c1 .8 1.7 1.5 4 1.6v13.5l-9.5-16.5c-.7-1.2-2-3.1-4.3-3.1-2.6 0-4.9 2.2-4.6 5.9h.5c.1-1 .6-2.1 1.7-2.1.9 0 1.7.9 2.1 1.6v5.3c-3 0-4.9 1.4-4.9 3.8 0 1.2.6 3.3 2.7 3.7v-.4c-.3-.3-.5-.6-.5-1.1 0-.9.7-1.5 1.9-1.5.2 0 .7 0 .9.1v6.9c-3.5 0-6.1 1.9-6.1 5.2 0 3.1 2.7 4.6 5.5 4.4v-.4c-1.7-.2-2.7-1-2.7-2.1 0-1.4 1-2.1 2.3-2.1s2.5.8 3.3 1.7l4.7-5.2-.4-.4-1.2 1.4c-1.8-1.6-2.8-2.2-4.9-2.5v-16.3l13.2 22.9h.9v-22.9c2.5-.1 4.9-2 4.9-4.8zm11.8 21.4-4 3.1-4.2-3.3v-1.9l7.7-5.2v-.2l-3.8-5.9-8.4 4.5v10.7l-1.7 1.3.3.3 1.5-1.2 5.5 4 7.4-5.8zm-8.2-2.7v-8l.3-.2 3.6 5.6zm34.9-8.9-1.2.9-3.1-2.6-3.6 3.3 1.5 1.4v12.3l-4-2.5v-10l1.3-.9-3.8-3.5-3.5 3.3 1.5 1.4v11.7l-.5.3-3.5-2.4v-9.8c0-2.3-1.1-2.9-2.5-3.8-1.2-.7-1.7-1.4-1.7-2.5 0-.9.9-1.5 1.4-1.7v-.4c-1.2 0-4.7 1.3-4.8 4.5 0 1.6.7 2.3 1.6 3.1.8.8 1.6 1.5 1.6 2.9v9.4l-1.7 1.4.3.4 1.6-1.2 4.3 3.4 4.1-2.8 4.5 2.8 8.7-5v-10.9l2.1-1.6zm30.2-9-1.6 1.5-3.6-3.2-5.3 4v-3.7h-.5l.1 26.4c-.5-.1-1.9-.4-3.1-.6l-.1-22.1c0-1.6-1.2-3.9-4.1-3.9-3 0-4.9 2.3-4.9 4.6h.5c.2-1 .7-1.8 1.6-1.8 1 0 1.9.6 1.9 2.8v6.4c-3 .1-4.7 1.8-4.7 3.8 0 1.3.6 3.3 2.7 3.3l.1-.4c-.7-.3-.9-.7-.9-1.1 0-.9.9-1.3 2.1-1.3h.6v10.1c-2.4.8-3.5 2.6-3.5 4.5 0 2.7 2.2 4.8 5.4 4.8 2.3 0 4.2-.4 6.3-.9 1.7-.3 3.7-.7 4.7-.7 1.2 0 1.8.6 1.8 1.5 0 1.1-.5 1.6-1.2 1.7l.1.4c2.7-.5 4.2-2.1 4.2-4.5 0-2.5-2.4-4-5-4-1.4 0-4 .4-6.1.9-2.3.5-4.5.7-5.2.7-1.1 0-2.5-.5-2.5-2.1 0-1.4 1.1-2.4 3.9-2.4 1.5 0 3.2.2 5.1.7 2 .4 3.7 1 5.4 1 2.4 0 4.5-.9 4.5-4.3v-20.1l1.9-1.6zm-6.7 10.1c-.4.5-1.1.9-1.9.9-.9 0-1.6-.5-2-.9v-7.3l1.7-1.1 2.3 2.1v6.3zm0 4.8c-.4-.4-1.1-.8-1.9-.8s-1.6.5-2 .8v-4.3c.3.3 1.1.9 2 .9s1.6-.5 1.9-.9zm0 7.6c0 1.3-.9 2.6-2.6 2.6-.3 0-1 0-1.3-.1v-9.5c.4-.4 1.1-.9 2-.9.8 0 1.5.5 1.9.9zm22.3-11.5-5.3-3.8-7.9 4.5v10.6l-1.6 1.3.2.3 1.3-1 5.2 3.8 8.1-4.9zm-8.6 10.2v-11.6l4.1 3v11.6zm24.2-13.6h-.3c-.4.4-1 .7-1.4.7-.6 0-1.4-.4-1.8-.9h-.3l-2.8 3-2.8-3-4.8 3.3.2.4 1.3-.9 1.7 1.8v10.3l-2.2 1.6.3.3 1-.7 3.9 3.3 5.1-3.4-.2-.3-1.4.9-1.9-1.7v-11.5c.8.9 1.8 1.7 2.9 1.7 2.1 0 3.3-2.4 3.5-4.9zm19.6 15.7-5.6 3.6-7.5-11.4 5.3-8.3h.3c.6.6 1.7 1.3 2.7 1.3 1.1 0 1.9-.6 2.4-1.3h.3c-.2 3.3-2.4 5.2-4.1 5.2s-2.5-.8-3.4-1.3l-.5.7 8.2 12.1 1.6-1zm-17.9-1-2.2 1.6.3.3 1-.7 3.6 3.3 4.9-3.3-.3-.3-1.2.8-1.6-1.6v-25.2h-.3l-5.9 3.9v.3c.6.3 1.7.5 1.7 2.5zm45-21.6c0-3.2-3-4.2-5.6-4v.5c1.5 0 2.7.5 2.7 1.6 0 .7-.5 1.6-2 1.6-1.2 0-3.5-.7-5.4-1.3-2.1-.7-4-1.4-5.6-1.4-3.2 0-5.6 2.4-5.6 5.3 0 2.4 1.8 3.2 2.5 3.5l.2-.4c-.5-.3-.9-.7-.9-1.6 0-.7.6-1.8 2.3-1.8 1.5 0 3.4.7 6 1.4 2.2.6 4.7 1.2 6 1.4v5l-2.5 2.1v.2l2.5 2.2v6.9c-1.3.7-2.8.9-4 .9-2.4 0-4.6-.6-6.4-2.6l6.7-3.2v-11.1l-8.2 3.7c.9-2.2 2.6-3.6 4.3-4.7l-.1-.4c-4.9 1.3-9.3 5.8-9.3 11.3 0 6.6 5.4 11.5 11.5 11.5 6.6 0 10.8-5.2 10.7-10.6h-.4c-1 2.1-2.4 4.1-4.2 5.1v-6.8l2.6-2.1v-.2l-2.6-2.1v-5c2.2-.2 4.8-1.9 4.8-4.9zm-14.2 18-2 1c-1.1-1.5-1.9-3.5-1.9-6.2 0-1.1.1-2.5.5-3.5l3.4-1.5zm19.7-19.5h-.2l-3.3 2.8v.2l2.8 3.1h.3l3.3-2.7v-.2zm5 24.1-1.2.8-1.6-1.6v-11.3l1.6-1.2-.3-.4-1.2.9-2.8-3.4-4.7 3.3.3.4 1.2-.8 1.4 1.8v10.6l-2.1 1.6.2.3 1.1-.8 3.6 3.3 4.9-3.3zm27.2-.2-1.2.8-1.7-1.6v-11.1l1.7-1.2-.3-.4-1.4 1.1-3.7-3.5-4.8 3.4-3.7-3.4-4.7 3.4-2.9-3.4-4.7 3.3.2.4 1.2-.8 1.6 1.7v10.6l-1.3 1.3 3.7 3.1 3.6-3.3-1.5-1.4v-11l1.4-.9 2.5 2.3v9.9l-1.2 1.3 3.8 3.1 3.5-3.3-1.5-1.4v-11.1l1.2-.8 2.7 2.3v9.7l-1.1 1.1 3.8 3.5 5-3.4zm14.2-2.5-4 3.1-4.2-3.3v-1.9l7.7-5.2v-.2l-3.8-5.9-8.4 4.5v11.1l5.6 4.1 7.4-5.8zm-8.2-2.7v-8l.3-.2 3.6 5.6zm23.1-1.5-3.1-2.4c2.1-1.8 2.9-4.3 2.9-5.9 0-.2 0-.7-.1-1h-.4c-.3.9-.9 1.6-2.2 1.6-1.2 0-2.1-.7-2.9-1.6l-7.3 4v5.9l2.7 2.1c-2.8 2.4-3.3 4.2-3.3 5.4 0 1.6.7 2.8 2.1 3.3l.2-.4c-.3-.3-.7-.5-.7-1.2 0-.5.7-1.3 1.9-1.3 1.6 0 2.6 1.1 3.1 1.7l7.1-4.2zm-1.8-4.9c-1.1 1.9-3.6 3.8-5 4.9l-1.8-1.4v-5.8c.7 1.6 2.4 2.9 4.3 2.9 1.1 0 1.7-.2 2.5-.6zm-2.9 13c-.8-1.8-2.7-3.1-4.7-3.1-.5 0-1.8 0-3.1.8.7-1.2 2.9-3.6 5.7-5.2l2 1.6v5.9z",fill:"#000"}))}},aVGo:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lSNA")),a=i(n("q1tI")),o=n("Ap7T"),s=n("Jqp9"),l=n("Bi8q"),c=i(n("XlcC")),u=n("V7ea"),d=i(n("yEZI")),p=i(n("42vy"));function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){var t=e.children,n=e.labelStyle,i=(0,s.useTheme)(),r=(0,l.defaultHeading3Style)({theme:i});return a.default.createElement(d.default,{className:(0,s.cx)(r,u.vsLabelClass,n)},t)};h.displayName="VisualStackLabel";var g=function(e){var t=e.size,n=e.heading,i=void 0===n?"":n,r=e.label,l=void 0===r?"":r,f=e.children,g=void 0===f?null:f,y=e.content,v=void 0===y?[]:y,b=e.contentStyle,_=void 0===b?"":b,w=e.labelStyle,x=void 0===w?"":w,k=e.headerStyle,O=void 0===k?"":k,E=(0,o.v4)();return a.default.createElement(s.ThemeProvider,{theme:function(e){return m(m({},e),{},{mediaSize:t})}},a.default.createElement(u.StyledVisualStack,null,i&&a.default.createElement(p.default,{className:(0,s.cx)(u.vsHeaderClass,O)},i),g,l&&a.default.createElement(h,{labelStyle:x},l),v.map((function(e,t){return a.default.createElement(d.default,{className:(0,s.cx)(u.vsContentParagraphBlockClass,_),key:"".concat(E,"-").concat(t.toString())},e.content.map(c.default))}))))};g.displayName="VisualStack";var y=g;t.default=y},aViE:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.pushSubWrapperClass=t.pushSubCtaClass=t.notificationLiveCoverageClass=t.notificationContainerClass=t.hasPostDividerClass=t.errorAlertClass=t.buttonWrapperClass=t.buttonStylesBaseClass=void 0;var r=n("Jqp9"),a=n("3sMT"),o=i(n("wXC7")),s=(0,r.css)("position:absolute;top:50%;left:50%;width:50px;height:30px;border-radius:20px;transform:translateX(-50%) translateY(-50%);cursor:pointer;overflow:hidden;&:focus{outline:none;}&:hover{box-shadow:0 0 2px var(--clr-shadow,rgba(0,0,0,0.3));}&::after{content:'';position:absolute;top:2px;width:26px;height:26px;border-radius:20px;transition:left 250ms ease-in-out;background-color:",a.light.colors.background.primary.hsla,";}&.on{background-color:",a.color.signal.editorial,";&::after{left:calc(50% - 3px);}}&.off{background-color:",a.color.background.tertiary,";&::after{left:3px;box-shadow:1px 1px 3px 0 rgba(0,0,0,0.1);}}");t.buttonStylesBaseClass=s;var l=(0,r.css)("position:relative;width:50px;height:30px;");t.buttonWrapperClass=l;var c=(0,r.css)("display:flex;justify-content:space-between;padding-top:22px;align-items:center;");t.pushSubWrapperClass=c;var u=(0,r.css)("color:",a.color.content.secondary,";font-weight:",o.default.font.weight.medium,";font-size:",o.default.font.size(15),";line-height:",o.default.font.size(20),";font-family:",o.default.font.franklinBase,";");t.pushSubCtaClass=u;var d=(0,r.css)("font-weight:",o.default.font.weight.medium,";font-size:",o.default.font.size(12),";font-family:",o.default.font.franklinBase,";color:",a.color.signal.negative,";");t.errorAlertClass=d;var p=(0,r.css)("height:100%;position:relative;border-top:1px solid ",a.color.stroke.quaternary,";");t.notificationContainerClass=p;var f=(0,r.css)("border-top:none;");t.notificationLiveCoverageClass=f;var m=(0,r.css)("border-bottom:none;");t.hasPostDividerClass=m},aY2f:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=i(n("lwsE")),s=i(n("W8MJ")),l=i(n("7W2i")),c=i(n("a1gu")),u=i(n("Nsbk")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),p=(i(n("17x9")),n("Jqp9")),f=n("7FfI"),m=i(n("wXC7")),h=n("v2SN");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.default)(this,n)}}var v={elapsed:"elapsed","elapsed-with-label":"elapsed","elapsed-with-year":"elapsed-year","short-elapsed":"short-elapsed","nyt-date":"LL","full-date":"ll","masthead-date":"LLL","abbreviated-date":"LL","date-with-time":"LLLL"},b=function(e){(0,l.default)(n,e);var t=y(n);function n(e){var i;(0,o.default)(this,n),i=t.call(this,e);var r=e.iso,a=i.toLocale(r,"","date-with-time");return i.state={absoluteTimestamp:a,relativeTimestamp:null,dateTime:r},i}return(0,s.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.formatTime(),this.props.autoUpdate&&!this.updateTimeout&&(this.updateTimeout=setInterval((function(){return e.formatTime()}),6e4))}},{key:"componentWillUnmount",value:function(){this.updateTimeout&&clearInterval(this.updateTimeout)}},{key:"componentDidUpdate",value:function(e){e.iso===this.props.iso&&e.unix===this.props.unix&&e.formatter===this.props.formatter&&e.showAbsoluteTime===this.props.showAbsoluteTime||this.formatTime()}},{key:"formatTime",value:function(){var e=this,t=this.props.iso&&(0,f.getISOFromString)(this.props.iso)||(0,f.getISOFromUnix)(this.props.unix)||(new Date).toISOString(),n=["elapsed-with-year","elapsed"].indexOf(this.props.formatter)>-1?this.toLocale(t,!0):this.state.absoluteTimestamp;return this.setState({relativeTimestamp:this.toLocale(t,["elapsed-with-year","elapsed-with-label"].indexOf(this.props.formatter)>-1)},(function(){return e.props.updateAriaLabel(n)}))}},{key:"toLocale",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props.formatter,i=this.props.theme,r=(0,f.getTimestampLocale)(null==i?void 0:i.language),a="elapsed-with-year"===this.props.formatter;if("function"==typeof n)return n({date:new Date(e),labelText:t,checkDays:a});var o=v[n]?v[n]:"LL";return(0,f.formatDate)(e,o,r,t,a)}},{key:"render",value:function(){var e,t=this.props,n=t.className,i=t.updatedText,r=t.updatedTextClassName,o=t.showAbsoluteTime,s=t.dontRenderAsTimeElement,l=this.state,c=l.absoluteTimestamp,u=l.relativeTimestamp,f=l.dateTime,g=s?"span":"time";return d.default.createElement(d.default.Fragment,null,d.default.createElement(g,{"aria-hidden":!0,className:(0,p.cx)(n,h.timeClass),dateTime:s?void 0:f},i?d.default.createElement("span",{className:r},"Updated"):null,d.default.createElement("div",{className:h.timeContainerClass},d.default.createElement("span",{"data-time":"abs",className:(0,p.cx)(h.absClass,h.sharedTransformClass,(0,a.default)({},h.showClass,o))},c),d.default.createElement("span",{"data-time":"rel",className:(0,p.cx)(h.relClass,h.sharedTransformClass,(e={},(0,a.default)(e,h.showClass,!o),(0,a.default)(e,h.timestampCapitalizeClass,"Just now"===u),e))},u))),d.default.createElement("span",{className:m.default.a11y.visuallyHidden},o?c:u))}}]),n}(d.Component);b.displayName="Timestamp",b.defaultProps={unix:void 0,iso:void 0,className:void 0,updatedText:!1,updatedTextClassName:void 0,theme:void 0,showAbsoluteTime:!0,dontRenderAsTimeElement:!1,updateAriaLabel:function(){},autoUpdate:!1};var _=(0,p.withTheme)(b);t.default=_},aYWg:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lwsE")),a=i(n("W8MJ")),o=i(n("BtaY")),s=function(){function e(){var t,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,e),this.bylines=null===(t=i.bylines)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.creators}return(0,a.default)(e,[{key:"getStructuredData",value:function(){return Array.isArray(this.bylines)?this.bylines.map((function(e){return new o.default({url:(null==e?void 0:e.bioUrl)||e.url,name:null==e?void 0:e.displayName})})):[]}}]),e}();t.default=s},aYbO:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o,s=i(n("lSNA")),l=i(n("lwsE")),c=i(n("W8MJ")),u=i(n("7W2i")),d=i(n("a1gu")),p=i(n("Nsbk")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),m=(i(n("17x9")),i(n("HNQ6"))),h=n("YFU0");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,s.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,d.default)(this,n)}}var _={INITIALIZING:"initializing",LOAD_NEW_VIDEO:"load_new_video",MEDIA_ELEMENT_MOUNTED:"mediaelementmounted",AD_STARTED:"adstarted",AD_COMPLETED:"adcompleted",AD_SKIPPED:"adskipped",READY:"ready",LOAD_START:"loadstart",PLAY:"play",PAUSE:"pause",ENDED:"ended",GO_FULLSCREEN:"gofullscreen",EXIT_FULLSCREEN:"exitfullscreen"},w={INITIALIZING:"onInitializing",LOAD_NEW_VIDEO:"onLoadNewVideo",MEDIA_ELEMENT_MOUNTED:"onMediaElementMounted",AD_STARTED:"onAdStarted",AD_COMPLETED:"onAdCompleted",AD_SKIPPED:"onAdSkipped",READY:"onReady",LOAD_START:"onLoadStart",PLAY:"onPlay",PAUSE:"onPause",ENDED:"onEnded",GO_FULLSCREEN:"onGoFullscreen",EXIT_FULLSCREEN:"onExitFullscreen",IN_VIEWPORT:"inviewport",OUT_VIEWPORT:"outviewport"},x=["className","playerClassName","playerRef","VHS","onInitializing","onLoadNewVideo","onMediaElementMounted","onAdStarted","onAdCompleted","onAdSkipped","onReady","onLoadStart","onPlay","onPause","onEnded","onGoFullscreen","onExitFullscreen","onErrorLoadingPlayer"],k=(0,m.default)(((o=function(e){(0,u.default)(n,e);var t=b(n);function n(){var e;(0,l.default)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).playerStatus=null,e.state={playerCreated:!1},e}return(0,c.default)(n,[{key:"componentDidMount",value:function(){if(null===this.playerStatus){if(!this.props.VHS){throw console.error("VHS did not load"),"function"==typeof this.props.onErrorLoadingPlayer&&this.props.onErrorLoadingPlayer(),new Error("VHS did not load")}this.initPlayer()}}},{key:"shouldComponentUpdate",value:function(e,t){return null!==this.playerStatus&&e.id!==this.props.id||this.state.playerCreated!==t.playerCreated}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.updatePlayer(e)}},{key:"componentWillUnmount",value:function(){this.destroyPlayer()}},{key:"initPlayer",value:function(){var e=this;this.playerStatus=_.INITIALIZING,this.destroyPlayer((function(){e.player=e.props.VHS(e.playerConfig),e.bindPlayerEvents(),e.setState((function(){return{playerCreated:!0}})),"function"==typeof e.props.playerRef&&e.props.playerRef(e.player)}))}},{key:"propsForConfig",get:function(){var e=this;return Object.keys(this.props).reduce((function(t,n){return-1===x.indexOf(n)?v(v({},t),{},(0,s.default)({},n,e.props[n])):t}),{})}},{key:"playerConfig",get:function(){var e=this.propsForConfig;return e.width="100%",e.height="100%",e.container=this.playerElement,e}},{key:"bindPlayerEvents",value:function(){var e=this;Object.keys(this.player.events).filter((function(e){return void 0!==_[e]})).forEach((function(t){e.player.on(e.player.events[t],(function(){e.playerStatus=e.player.events[t];var n=w[t],i=e.props[n];if("function"==typeof i){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];i.apply(void 0,a.concat([e.player]))}}))}))}},{key:"updatePlayer",value:function(e){this.player&&(0,h.isNumeric)(e.id)&&(0,h.isNumeric)(this.props.id)&&e.id!==this.props.id&&this.player.load(e.id)}},{key:"destroyPlayer",value:function(e){this.playerStatus=null,this.player&&"function"==typeof this.player.destroy?this.player.destroy(e):"function"==typeof e&&e()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,i=t.playerClassName,r=t.ratio,a=t.width;if(t.forceError)throw new Error("Forced error for error boundary testing.");var o=(0,h.computeAspectRatio)(r),s="react-vhs-container";"string"==typeof n&&(s+=" ".concat(n));var l="react-vhs-player";"string"==typeof i&&(l+=" ".concat(i));var c={position:"relative",width:a},u={};return"number"==typeof o&&0!==o?(c.height="auto",u.height=0,u.paddingBottom="".concat(o,"%")):c.height="100%",f.default.createElement("div",{className:s,style:c},f.default.createElement("div",{ref:function(t){e.playerElement=t},className:l,style:u}))}}]),n}(f.Component)).displayName="VideoPlayer",o.defaultProps={className:void 0,onErrorLoadingPlayer:void 0,playerClassName:void 0,playerRef:void 0,width:"100%",height:"100%",onInitializing:void 0,onLoadNewVideo:void 0,onMediaElementMounted:void 0,onAdStarted:void 0,onAdCompleted:void 0,onAdSkipped:void 0,onReady:void 0,onLoadStart:void 0,onPlay:void 0,onPause:void 0,onEnded:void 0,onGoFullscreen:void 0,onExitFullscreen:void 0,controls:!0,env:"production",eventTracker:!1},a=o))||a;k.displayName="VideoPlayer";var O=k;t.default=O},aanX:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=i(n("q1tI")),a=(i(n("17x9")),i(n("wXC7")));function o(e){var t=e.className,n=e.stroke,i=e.strokeWidth;return r.default.createElement("svg",{className:t,viewBox:"0 0 12 12",stroke:n,strokeWidth:i,strokeLinecap:"round",style:{opacity:.95}},r.default.createElement("line",{x1:"11",y1:"1",x2:"1",y2:"11"}),r.default.createElement("line",{x1:"1",y1:"1",x2:"11",y2:"11"}))}o.displayName="CloseIcon",o.defaultProps={className:void 0,stroke:a.default.color.black,strokeWidth:"1"}},abzs:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasRichCaptions=t.getTwitterCrop=t.getPromotionalMediaCrop=t.getPromoMedia=t.getPromoCrop=t.getFirstCropUrl=t.getCropByPriority=t.getCrop=t.get75Crop=t.get150Crop=t.flattenCropArray=t.defaultPromoCrop=t.defaultCrop=void 0;t.getPromoMedia=function(e){return null!=e&&e.imageExtensions?e.imageExtensions.filteredCrops:null};var i=function(e,t){return e.find((function(e){return(null==e?void 0:e.name)===t}))};t.getCrop=i;var r=function(e,t){if(!e)return null;for(var n=0;n<t.length;n+=1){var r=i(e,t[n]);if(null!=r&&r.url)return"images"===r.url.split("/")[0]&&(r.url="https://static01.nyt.com/".concat(r.url)),r.url}return null};t.getCropByPriority=r;t.getFirstCropUrl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"crops";return e&&e[t]&&0!==e[t].length&&e[t][0].renditions&&0!==e[t][0].renditions.length?e[t][0].renditions[0].url:null};var a="https://static01.nyt.com/newsgraphics/images/icons/defaultCrop.png";t.defaultCrop=a;var o="https://static01.nyt.com/newsgraphics/images/icons/defaultPromoCrop.png";t.defaultPromoCrop=o;t.getPromoCrop=function(e){return r(e,["facebookJumbo","watch308","videoSixteenByNineJumbo1600","articleLarge"])||o};t.getTwitterCrop=function(e){return r(e,["videoSixteenByNineJumbo1600","articleLarge"])||a};t.get150Crop=function(e,t){return r(e,["thumbLarge"])||t||a};t.get75Crop=function(e){return r(e,["thumbStandard"])||a};t.flattenCropArray=function e(t){return t.reduce((function(t,n){return t.concat(Array.isArray(n)?e(n):n)}),[])};t.getPromotionalMediaCrop=function(e){var t;return e?e.promoCrops?e.promoCrops:e.assetCrops?e.assetCrops:null!==(t=e.promotionalMedia)&&void 0!==t&&t.assetCrops?e.promotionalMedia.assetCrops:null:null};t.hasRichCaptions=function(e){var t,n,i,r,a=null===(t=e.caption)||void 0===t||null===(n=t.content)||void 0===n||null===(i=n[0])||void 0===i?void 0:i.content;return(null==a?void 0:a.length)>1||!(!a||"TextInline"===(null==a||null===(r=a[0])||void 0===r?void 0:r.__typename))}},axlb:function(e,t,n){"use strict";n.d(t,"b",(function(){return J}));var i=n("VkAN"),r=n.n(i),a=n("gcR/"),o=n.n(a),s=n("q1tI"),l=n.n(s),c=n("eFc+"),u=n.n(c),d=(n("Zc/f"),n("ZKN5")),p=n("lSNA"),f=n.n(p),m=n("X6oL"),h=n("E8RS"),g=n("AeOL"),y=n("boCj"),v=n("fZdH"),b=n("pjM+"),_=n("2XMp"),w=n("7VSS"),x=n("rONy"),k=n("06b3"),O=n("Rb+W"),E=n("pVnL"),T=n.n(E),C=n("Jqp9"),S=n("RKHt"),P=n.n(S),M=n("5g7D"),I=n.n(M),A=n("SYzA"),j=function(e){var t,n,i=Object(A.a)();return l.a.createElement(P.a,T()({},e,{className:Object(C.cx)(f()({},I()(null===(t=e.interactive)||void 0===t||null===(n=t.displayProperties)||void 0===n?void 0:n.displayOverrides),i),e.className)}))};j.displayName="RegionEmbeddedInteractive",j.defaultProps={interactive:{html:null,displayProperties:{},headline:{default:""}},className:void 0,children:null,theme:{},manageScripts:!1,enableInteractiveBridge:!1};var L=j,R=n("InUh"),N=n.n(R),D=n("jOYC"),B=n("rWB7"),z=N()((function(){return Promise.all([n.e(0),n.e(3),n.e(8),n.e(15),n.e(63)]).then(n.bind(null,"95JM"))}),{loadableGenerated:{webpack:function(){return["95JM"]},modules:["shared/Capsule/ClientSideCapsule"]}}),F=function(e){var t=e.className,n=e.data;return Object(B.b)()&&n.uri?o()("div",{className:Object(C.cx)(t)},void 0,o()(z,{blockClass:D.b.layout.news,uri:n.uri})):null};F.displayName="NormalizedCapsuleBlock",F.defaultProps={className:void 0};var U={EmbeddedInteractive:L,Capsule:F};function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=function(e){var t,n,i,r,a=e.assetBlock,l=e.className,c=a.assetName,u=a.ruleName,d=a.testName,p=a.parentTest,f=a.region,E=a.asset,T=U[null==E?void 0:E.__typename],C=Object(v.a)(),S=Object(m.useTracking)(),P=Object(w.a)(),M=Object(b.a)(),I=Object(s.useRef)(!1),A=(null==C||null===(t=C[d])||void 0===t?void 0:t.allocated)&&d||(null==C||null===(n=C[p])||void 0===n?void 0:n.allocated)&&p||(null==C||null===(i=C.styln_trust)||void 0===i?void 0:i.allocated)&&"styln_trust",j=null==C||null===(r=C[A])||void 0===r?void 0:r.variant;if(Object(s.useEffect)((function(){if(a&&j){var e=Object(O.f)(k.a);n=j,r=((null==(t=a)||null===(i=t.asset)||void 0===i?void 0:i.html)||"").match(/data-iterate-survey="([0-9a-z]+)"/),o=null==r?void 0:r[1],r&&Object(x.a)((function(){var i,r,a,s=(null===(i=window)||void 0===i||null===(r=i.NYTD)||void 0===r||null===(a=r.PageViewId)||void 0===a?void 0:a.current)||"",l=t.asset.slug||document.location.pathname;window.Iterate("install",o),window.Iterate("identify",{agentId:e},{slug:l,pageviewID:s,testVariant:n})}))}var t,n,i,r,o}),[a,j]),!T||!E||!a)return null;if(!P||M.loading())return o()(T,{data:E,media:E,interactive:E,className:l},"server-render");var L={event:"impression",module:{region:f,label:j,name:u,context:c}},R=W(W({},E),{},{html:Object(_.a)({html:E.html,region:f,name:u,variant:j,context:c})}),N=["email","push"].some((function(e){return c.toLowerCase().startsWith(e)}));return o()(s.Fragment,{},"client-render",o()(g.a,{testName:p,holdoutVariant:h.a},void 0,o()(g.a,{testName:d,holdoutVariant:h.a},void 0,o()(y.InView,{onChange:function(e){return function(){var e,t,n=(null==C||null===(e=C[h.i.name])||void 0===e?void 0:e.allocated)&&(null==C||null===(t=C[h.i.name])||void 0===t?void 0:t.variant)===h.i.variant,i=M.data(),r=a.ruleName.startsWith("trust-");if(!I.current&&!M.loading()&&!M.error()&&i&&n&&r){var o=a.ruleName,s=i.viewedTrustModule||[],l=new Date(Date.now()).toISOString(),c=null==s?void 0:s.find((function(e){return e.trustModule===o}));c?c.lastSeen=l:s.push({trustModule:o,lastSeen:l}),s.forEach((function(e){return delete e.__typename})),M.update({viewedTrustModule:s}),I.current=!0}}(),!N&&e?S.trackEvent(L):{}},triggerOnce:!0},void 0,o()(T,{data:E,media:E,interactive:R,className:l,enableInteractiveBridge:!0})))))};q.displayName="RegionComponent",q.defaultProps={className:void 0};var V,G,Y,Z,X=l.a.memo(q);function J(e,t){var n,i;return null==t||null===(n=t.associatedAssets)||void 0===n||null===(i=n.some)||void 0===i?void 0:i.call(n,(function(t){return(null==t?void 0:t.region)===e}))}var K=function(e){var t=e.children,n=e.region,i=e.associatedAssets,r=e.className,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e.filter((function(e){return e.region===t}));return null==n?void 0:n.filter((function(e){var i;return!(!t||null==e||!e.asset||null!=e&&e.skip)&&("\x3c!--skip--\x3e"!==(null==e||null===(i=e.asset)||void 0===i?void 0:i.html)&&e.ruleName===n[0].ruleName)}))}(i,n);if(!((null==a?void 0:a.length)>0||t))return null;var s=n?"NYT_".concat(n,"_REGION"):null;return o()("div",{id:s,className:r,"data-testid":"region"},s,null==a?void 0:a.map((function(e,t){return o()(X,{assetBlock:e,className:r},"".concat(s).concat(t.toString()))})),t)};K.displayName="Region",K.defaultProps={children:null,className:void 0},K.fragments={article:u()(V||(V=r()(["\n    fragment Region_article on Article {\n      id\n      associatedAssets {\n        region\n        assetName\n        ruleName\n        testName\n        parentTest\n        asset {\n          __typename\n          ... on EmbeddedInteractive {\n            id\n            sourceId\n            html\n            slug\n            compatibility\n            displayProperties {\n              minimumWidth\n              maximumWidth\n              displayOverrides\n            }\n          }\n          ... on Capsule {\n            uri\n          }\n        }\n      }\n    }\n  "]))),interactive:u()(G||(G=r()(["\n    fragment Region_interactive on Interactive {\n      id\n      associatedAssets {\n        region\n        assetName\n        ruleName\n        testName\n        parentTest\n        asset {\n          __typename\n          ... on EmbeddedInteractive {\n            id\n            sourceId\n            html\n            slug\n            compatibility\n            displayProperties {\n              minimumWidth\n              maximumWidth\n              displayOverrides\n            }\n          }\n          ... on Capsule {\n            uri\n          }\n        }\n      }\n    }\n  "]))),legacyCollection:u()(Y||(Y=r()(["\n    fragment Region_legacyCollection on LegacyCollection {\n      id\n      associatedAssets {\n        region\n        assetName\n        ruleName\n        testName\n        parentTest\n        asset {\n          __typename\n          ... on EmbeddedInteractive {\n            id\n            sourceId\n            html\n            slug\n            compatibility\n            displayProperties {\n              minimumWidth\n              maximumWidth\n              displayOverrides\n            }\n          }\n          ... on Capsule {\n            uri\n          }\n        }\n      }\n    }\n  "]))),feedPublication:u()(Z||(Z=r()(["\n    fragment Region_feedPublication on FeedPublication {\n      id\n      feedAssociatedAssets: associatedAssets {\n        region\n        assetName\n        ruleName\n        testName\n        parentTest\n        asset {\n          __typename\n          ... on EmbeddedInteractive {\n            id\n            sourceId\n            html\n            slug\n            compatibility\n            displayProperties {\n              minimumWidth\n              maximumWidth\n              displayOverrides\n            }\n          }\n          ... on Capsule {\n            uri\n          }\n        }\n      }\n    }\n  "])))};t.a=Object(d.a)(K)},bFGc:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("Jqp9")),o=n("ONNS"),s=function(e){var t=e.htmlShortBiography,n=e.twitter,i=e.facebook,s=e.className,l=[' <span class="'.concat(o.socialBlockClass,'">')];n&&l.push('<a href="https://twitter.com/'.concat(n,'" class="').concat(o.bioLinkClass,'" rel="noopener noreferrer" target="_blank"><span class="').concat(o.twitterAtClass,'">@</span>').concat(n,"</a>")),i&&n&&l.push('<span class="'.concat(o.seperatorClass,'"></span>')),i&&l.push('<a href="https://www.facebook.com/'.concat(i,'" class="').concat(o.bioLinkClass,'" rel="noopener noreferrer" target="_blank">Facebook</a>')),l.push("</span>");var c=t;if(c){var u=c.split("</p>");u.splice(u.length-1,0,l.join(" ")),u.push("</p>"),c=u.join("")}return r.default.createElement(o.Bio,{className:(0,a.cx)(s)},r.default.createElement("div",{dangerouslySetInnerHTML:{__html:c}}))};s.displayName="Bio",s.defaultProps={htmlShortBiography:null,facebook:null,twitter:null,className:void 0};var l=s;t.default=l},bFSk:function(e,t,n){"use strict";var i=n("lSNA"),r=n.n(i),a=n("q1tI"),o=n("X6oL"),s=n("xHA4"),l=n("2XMp"),c=n("fZdH");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=s.storyPageTests.TRACKING_BEACON_TEST,f=s.storyPageTests.TRACKING_TEST_COMPONENTS;t.a=function(e){var t,n,i=e.name,r=e.region,s=e.template,u=e.parentUri,m=e.pageType,h=Object(o.useTracking)(),g=Object(c.a)(),y=null===(t=g[p.name])||void 0===t?void 0:t.variant,v=(null===(n=g[p.name])||void 0===n?void 0:n.allocated)&&f.includes(s),b=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return t;var a=d(d({name:i,region:r,block:s,action:"click",pgtype:m},e),n);return Object(l.b)(t,a)}}),[s,m,i,r]);return{trackImpression:Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=d(d(d({},e),t),{},{module:d(d({name:i,context:s,region:r,list:{uri:u}},e.block||{}),t.block||{})});h.trackEvent(n)}}),[h,i,s,r,u]),trackInteraction:Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,n){var a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};y!==p.control&&v||(t.preventDefault(),a=function(){var e=document.createElement("a");e.href=n,e.click()});var l=d(d(d({},e),o),{},{event:"moduleInteraction",module:d(d({name:i,context:s,region:r},e.module||{}),o.module||{}),eventCallback:a});h.trackEvent(l)}}),[h,i,s,r,y,v]),trackLink:b}}},bLcY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.navListClass=t.dotClass=t.activeClass=void 0;var i=n("Jqp9"),r=n("3sMT"),a=(0,i.css)("list-style:none;counter-reset:list-block-counter;display:inline-flex;flex-flow:row nowrap;align-items:center;");t.navListClass=a;var o=(0,i.css)("margin:0 6px 0 0;width:6px;height:6px;border-radius:50%;background-color:",r.color.background.quaternary,";transition:background-color 0.2s ease;");t.dotClass=o;var s=(0,i.css)("background-color:",r.color.background.inversePrimary,";");t.activeClass=s},bNs8:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.simpleByline=u;var a=i(n("lSNA")),o=i(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("oZ2M"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function u(e){var t=e.authors,n=e.format,i=void 0===n?"string":n,r=e.prefix,a=void 0===r?"by":r,c=e.includePrefix,u=void 0!==c&&c,d=[],p="".concat(a.charAt(0).toUpperCase()+a.slice(1)," ");if(u&&("string"===i?d.push(p):d.push(o.default.createElement("span",{key:a,className:"byline-prefix"},p))),!t||0===t.length)return null;for(var f=["Por","Fotografas por"].includes(a)?" y ":" and ",m=0;m<t.length;m+=1){var h=t[m],g=h.bioUrl,y=h.displayName;t.length>1&&m===t.length-1&&d.push(f);var v=m<t.length-2?",":"",b=y;"string"===i?b+=v:(void 0!==g&&""!==g&&(b=o.default.createElement(l.BylineLink,{href:g},b)),b=o.default.createElement("span",{key:m,className:(0,s.cx)(l.spanClass,{"last-byline":m===t.length-1}),itemProp:"name"},b,v)),d.push(b)}return"string"===i?d.join(""):d}var d=function(e){var t=e.bylines,n=e.className,i=e.html,r=e.id,c=e.InlineTimestamp,d=e.children;if(!t)return[];var p="enabled"===i?"array":"string";return t.map((function(e,i){var f=e.creators,m=e.renderedRepresentation,h=e.prefix,g=!(null==f||!f.length);return o.default.createElement(l.default,{id:r,className:(0,s.cx)((0,a.default)({},l.compoundBylineClass,t.length>1),n),key:i.toString(16)},!g&&m&&o.default.createElement("span",{className:(0,s.cx)(l.spanClass,"last-byline")},m),u({authors:f,format:p,prefix:h,includePrefix:g}),c&&c,d)}))};d.defaultProps={bylines:[],className:void 0,html:"enabled",id:void 0,InlineTimestamp:null,children:null};var p=d;t.default=p},bkJC:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),function(e){var t=e.className,n=e.fill;return r.default.createElement("svg",{viewBox:"0 0 13 10",className:t,width:"13",height:"10",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.987 2.772l.025.425-.429-.052c-1.562-.2-2.927-.876-4.086-2.011L.93.571.784.987c-.309.927-.111 1.906.533 2.565.343.364.266.416-.327.2-.206-.07-.386-.122-.403-.096-.06.06.146.85.309 1.161.223.434.678.858 1.176 1.11l.42.199-.497.009c-.481 0-.498.008-.447.19.172.564.85 1.162 1.606 1.422l.532.182-.464.277a4.833 4.833 0 0 1-2.3.641c-.387.009-.704.044-.704.07 0 .086 1.047.572 1.657.762 1.828.564 4 .32 5.631-.641 1.159-.685 2.318-2.045 2.859-3.363.292-.702.583-1.984.583-2.6 0-.398.026-.45.507-.927.283-.277.55-.58.6-.667.087-.165.078-.165-.36-.018-.73.26-.832.226-.472-.164.266-.278.584-.78.584-.928 0-.026-.129.018-.275.096a4.79 4.79 0 0 1-.755.294l-.464.148-.42-.286C9.66.467 9.335.293 9.163.24 8.725.12 8.055.137 7.66.276c-1.074.39-1.752 1.395-1.674 2.496z",fill:n}))});a.displayName="Twitter",a.defaultProps={className:void 0,fill:"#000"};var o=a;t.default=o},bmDE:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return o}));var i=600,r=740,a=1220,o=["cooking"]},bqBd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hidePharmacyEmailSignup=t.hideEmailSignupBlock=t.hasPharmacyPlacedSignupBlock=t.hasEditorPlacedSignupBlock=t.createFallbackEmailSignupProps=void 0;var i=n("T25G"),r=function(e){var t,n;return(null==e||null===(t=e.sprinkledBody)||void 0===t||null===(n=t.content)||void 0===n?void 0:n.some((function(e){return"EmailSignupBlock"===e.__typename})))||!1};t.hasEditorPlacedSignupBlock=r;var a=function(e){var t=!1;return null!=e&&e.collections&&(t=e.collections.some((function(e){var t=e.collectionType,n=e.name;return"SYNDICATED"===t&&"HideEmailSignup"===n}))),t};t.hideEmailSignupBlock=a;t.hasPharmacyPlacedSignupBlock=function(e){var t;return(null==e||null===(t=e.associatedAssets)||void 0===t?void 0:t.some((function(e){var t,n,i;return("Capsule"===(null==e||null===(t=e.asset)||void 0===t?void 0:t.__typename)||"EmbeddedInteractive"===(null==e||null===(n=e.asset)||void 0===n?void 0:n.__typename))&&(null==e||null===(i=e.assetName)||void 0===i?void 0:i.includes("email-signup"))})))||!1};t.hidePharmacyEmailSignup=function(e){var t,n,i,o=a(e),s=r(e),l=!(null===(t=e.associatedNewsletter)||void 0===t||null===(n=t.newsletterProduct)||void 0===n||null===(i=n.newsletterProductData)||void 0===i||!i.code);return o||s||l};t.createFallbackEmailSignupProps=function(e){var t=e||{},n=t.code,r=t.name,a=t.splashSignupCaption,o=t.allowedEntitlement,s=t.isOnsiteFreeTrialEnabled,l=t.subscriptionPageLink;return n&&r?{isOnsiteNewsletter:!0,data:{productCode:n,newsletterHeading:[{text:"Youre reading ".concat((0,i.nameWithArticle)(r),o?" newsletter, for Times subscribers only.":" newsletter.")}],productDefaults:{title:r,caption:a,allowedEntitlement:o,isOnsiteFreeTrialEnabled:s,subscriptionPageLink:l}}}:{}}},c106:function(e,t,n){"use strict";var i=n("VkAN"),r=n.n(i),a=n("gcR/"),o=n.n(a),s=n("lSNA"),l=n.n(s),c=n("J4zp"),u=n.n(c),d=n("q1tI"),p=n.n(d),f=n("eFc+"),m=n.n(f),h=n("X6oL"),g=n("IiD6"),y=n.n(g),v=n("UIP5"),b=n("4zjr"),_=n.n(b),w=n("OXmc"),x=n.n(w),k=n("pCca"),O=n("sOrY"),E=n("ZKN5"),T=n("M5Mg"),C=n("nosR"),S=n("uyHG"),P=n.n(S);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=P()(C.findRenditionOfBestFitUrl),j=P()(C.findRenditionsByRatio);function L(e){var t=e.props,n=e.options,i=t.media,r=t.videoOptions,a=t.adReq,o=t.deviceType,s=i.advertisingProperties;return{options:I(I({},n),{},{adSensitivity:null==s?void 0:s.sensitivity,category:i.contentSeries,controlsOverlay:{mode:"article"},deviceType:o,duration:i.duration,embeddedOnly:i.embedded,id:i.sourceId,is360:i.is360,live:i.isLive,liveUrls:i.liveUrls,section:i.section,series:i.contentSeries,shortUrl:i.shortUrl,subsection:i.subsection,timesTags:i.timesTags,url:i.url,videoCues:i.cues,adReq:a},r),props:t}}function R(e){var t=e.props,n=e.options,i=t.media,r=t.videoOptions;return n.summary="homepage"===r.type&&i.promotionalSummary||i.summary,{options:n,props:t}}function N(e){var t=e.props,n=e.options,i=t.media,r=t.deviceType;if(void 0===i||void 0===i.renditions)return{props:t,options:n};if(!i.renditions)return n.sources=[],{options:n,props:t};if(i.is360&&i.renditions)return n.sources=i.renditions,{options:n,props:t};for(var a,o=null==i?void 0:i.renditions.filter((function(e){var t;return!(null!=e&&null!==(t=e.type)&&void 0!==t&&t.includes("hls"))})),s=0;s<C.commonPrioritizedVideoRenditions[r].length&&!a;s+=1)for(var l=0;l<o.length&&!a;l+=1){var c=C.commonPrioritizedVideoRenditions[r][s],u=o[l];c===u.type&&(a=u)}return n.sources=a?[a]:(null==o?void 0:o.length)>0?o:null==i?void 0:i.renditions,{options:n,props:t}}function D(e){var t,n,i,r,a,o,s=e.props,l=e.options;if(null!==(t=l.sources)&&void 0!==t&&null!==(n=t[0])&&void 0!==n&&null!==(i=n.type)&&void 0!==i&&i.includes("hls"))return{options:l,props:s};var c=null===(r=l.sources)||void 0===r||null===(a=r[0])||void 0===a||null===(o=a.url)||void 0===o?void 0:o.replace(".mp4",".vtt");return{options:I(I({},l),{},{captionsUrl:c}),props:s}}function B(e){var t,n=e.props,i=e.options,r=n.media,a=n.videoOptions;return i.headline=(null===(t=r.headline)||void 0===t?void 0:t.default)||"","homepage"===a.type&&r.promotionalHeadline&&(i.headline=r.promotionalHeadline),{options:i,props:n}}function z(e){var t,n=e.props,i=e.options,r=n.media.promotionalMedia,a=i.ratio;if(r){var o=n.media.promotionalMedia,s=o.renditions,l=o.crops,c=n.breakpoint;if(s){var u=s.filter((function(e){return/\.mp4$/.test(null==e?void 0:e.url)}));t=A(u,c)}else if(l){var d=j(l,a);t=A(d)}}return{options:I(I({},i),{},{posterUrl:t}),props:n}}function F(e){var t,n=e.props,i=e.options;if(!n.media.promotionalMedia)return{props:n,options:i};var r=n.media,a=r.promotionalMedia.renditions,o=r.promotionalMedia,s=i.ratio;if(a){var l,c=null===(l=o.promotionalMedia)||void 0===l?void 0:l.crops;if(c){var u=j(c,s);t=A(u)}}return{options:I(I({},i),{},{posterFallbackUrl:t}),props:n}}function U(e){var t=e.props,n=e.options,i=t.deviceType,r=t.adReq;if(!t.videoOptions.ads||!r)return n.adReq=void 0,{props:t,options:n};var a={amznslots:r.amznslots,edn:r.edn,plat:r.plat,prop:r.prop,Sub:r.Sub,typ:r.typ,vp:r.vp},o=(r.typ||"").split(",");if(o.indexOf("hp")>=0){var s={path:"29390238/nyt/homepage/us",ver:"smartphone"===i?"mvi":"vi"};n.adReq=I(I({},a),s)}else if(o.indexOf("art")>=0){var l="29390238/nyt";r.coll&&(l+="/".concat((r.coll||"").replace(/,/g,"/")));var c={auth:r.auth,col:r.coll,des:r.des,geo:r.geo,id:r.id,org:r.org,path:l,per:r.per,spon:r.spon,ttl:r.ttl,ver:r.ver};r.adv&&(c.adv=r.adv),n.adReq=I(I({},a),c)}return{options:n,props:t}}function H(e){var t=e.props,n=e.options,i=t.videoOptions;return n.ratio=i.ratio||"16:9",{options:n,props:t}}function W(e){var t,n,i,r=e.props,a=e.options,o=null===(t=r.media.playlist)||void 0===t||null===(n=t.videos)||void 0===n||null===(i=n.edges)||void 0===i?void 0:i.map((function(e){var t;if(!e||!e.node)return null;var n=e.node,i=n.url,r=n.headline,a=n.promotionalMedia,o=n.renditions,s=n.duration,l=n.sourceId,c=n.advertisingProperties;return{adSensitivity:null==c?void 0:c.sensitivity,url:i,duration:s,id:l,headline:null==r?void 0:r.default,images:(null==a||null===(t=a.crops)||void 0===t?void 0:t.reduce((function(e,t){return t.renditions?e.concat(t.renditions):e}),[]))||[],renditions:o}})).filter((function(e){return e}));return o&&(a.playlistVideos=o),{options:a,props:r}}function q(e){var t,n=e.options,i=e.props,r=i.media;return null!==(t=r.bylines)&&void 0!==t&&t[0]&&(n.byline=r.bylines[0].renderedRepresentation),{options:n,props:i}}function V(e){var t=e.options,n=e.props,i=n.media;if("smartphone"===n.deviceType)if(i.is360)t.ratio="1:1";else if(t.sources){var r,a;t.ratio=null==t||null===(r=t.sources)||void 0===r||null===(a=r[0])||void 0===a?void 0:a.aspectRatio,t.ratio||(t.ratio="9:16"===i.aspectRatio?"2:3":i.aspectRatio)}return{options:t,props:n}}function G(e){var t=e.props,n=e.options,i=t.media;return i.playlist&&(n.playlistId=i.playlist.sourceId,n.playlistName=i.playlist.promotionalHeadline,n.playlistUrl=i.playlist.url),{options:n,props:t}}function Y(e){var t,n=e.props,i=e.options,r=n.media;return null!=r&&null!==(t=r.related)&&void 0!==t&&t[0]&&(i.related=[{headline:r.related[0].promotionalHeadline,url:r.related[0].url}]),{options:i,props:n}}var Z,X=function(e){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.forEach((function(t){e=t(e)})),e}({options:{},props:e},L,H,N,D,V,z,B,R,F,U,W,G,q,Y)};function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e){var t,n=e.media,i=e.locksmith,r=e.videoOptions,a=y()(),s=Object(d.useRef)(null),l=Object(h.useTracking)().trackEvent,c=Object(k.a)().deviceType,f=Object(d.useReducer)(O.a,{isLoading:!0,isPlaying:!1,currentTime:void 0,showTranscript:!1,endDateTime:new Date(n.firstPublished).getTime()+36e5}),m=u()(f,2),g=m[0],b=m[1],w=(new Date).getTime(),E=Object(d.useState)(!1),C=u()(E,2),S=C[0],P=C[1];Object(d.useEffect)((function(){w>=g.endDateTime&&!1===S&&(P(!0),b({endDateTime:g.endDateTime+36e5}))}),[w,g.endDateTime,S]);var M=function(){b({isLoading:!1})},I=n.isLive?K(K({},n),{},{endDateTime:g.endDateTime}):n,A=X({media:n,videoOptions:r,adReq:a,deviceType:c}).options,j=null==n?void 0:n.transcript;j&&(A.transcript={onShowTranscript:function(e){e&&"function"==typeof e.stopPropagation&&(e.stopPropagation(),e.preventDefault()),b({showTranscript:!0}),s.current&&s.current.pause()}});var L=K(K({},A),{},{gtmTrackEvent:l,playerRef:function(e){s.current=e,null!=r&&r.playerRef&&r.playerRef(e);var t=e.events;e.on(t.TIME_UPDATE,(function(e){b({currentTime:e})})),e.on(t.PLAY,(function(){b({isPlaying:!0})})),e.on(t.PAUSE,(function(){b({isPlaying:!1})})),e.on(t.READY,(function(){if(M(),i&&i.lock&&i.unlock){var n=e.props.instanceId,r=[t.PLAYING,t.AD_STARTED,t.AD_RESUMED],a=[t.PAUSE,t.ENDED,t.ERROR,t.AD_PAUSED,t.AD_COMPLETED,t.AD_SKIPPED,t.AD_STOPPED,t.AD_ERROR];r.forEach((function(t){e.on(t,(function(){i.lock(n)}))})),a.forEach((function(t){e.on(t,(function(){i.unlock(n)}))}))}}))},onErrorLoadingPlayer:function(){M()}});return o()(T.a,{isLoading:g.isLoading,aspectRatio:A.ratio,backgroundMedia:A.posterUrl},void 0,j&&o()(x.a,{hideTranscript:function(){b({showTranscript:!1}),s.current&&s.current.play()},audioDuration:n.duration||0,currentTime:g.currentTime,isPlaying:g.isPlaying,onPlayPause:function(){s.current&&(g.isPlaying?s.current.pause():s.current.play())},isVisible:g.showTranscript,transcript:j,headline:(null===(t=n.headline)||void 0===t?void 0:t.default)||"",summary:n.summary||"",credits:n.credit}),p.a.createElement(v.VideoPlayer,L),o()(_.a,{data:I,platform:"vi",inlineAsset:!0}))}$.displayName="SpanVideo",$.fragments={media:m()(Z||(Z=r()(['\n    fragment SpanVideo_media on Video {\n      id\n      transcript\n      advertisingProperties {\n        sensitivity\n      }\n      aspectRatio\n      bylines {\n        renderedRepresentation\n      }\n      contentSeries\n      cues {\n        name\n        type\n        timeIn\n        timeOut\n      }\n      duration\n      embedded\n      headline {\n        default\n      }\n      is360\n      isLive\n      isCinemagraph\n      liveUrls\n      playlist {\n        videos(first: 4) {\n          edges @filterEmpty {\n            node {\n              advertisingProperties {\n                sensitivity\n                sponsored\n              }\n              id\n              sourceId\n              duration\n              section {\n                id\n                name\n              }\n              headline {\n                default\n              }\n              renditions {\n                url\n                type\n              }\n              url\n              promotionalMedia {\n                ... on Node {\n                  id\n                }\n                ... on Image {\n                  id\n                  # this is the only rendition accepted/used by VHS3 on the recommendation end slate\n                  crops(renditionNames: ["videoSixteenByNine540"]) {\n                    name\n                    renditions {\n                      name\n                      height\n                      width\n                      url\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n        id\n        promotionalHeadline\n        url\n        sourceId\n      }\n      promotionalHeadline\n      promotionalMedia {\n        ...Video_promoImage\n      }\n      promotionalSummary\n      related @filterEmpty {\n        ... on Article {\n          id\n          promotionalHeadline\n          url\n          sourceId\n        }\n      }\n      renditions {\n        width\n        url\n        type\n        height\n        bitrate\n        aspectRatio\n      }\n      section {\n        id\n        name\n        displayName\n      }\n      shortUrl\n      sourceId\n      subsection {\n        id\n        name\n      }\n      summary\n      timesTags @filterEmpty {\n        __typename\n        displayName\n        isAdvertisingBrandSensitive\n        vernacular\n      }\n      url\n      ... on Video {\n        id\n        url\n        duration\n        sourceId\n        promotionalMedia {\n          ...Video_promoVideo\n        }\n        renditions {\n          width\n          height\n          bitrate\n          url\n        }\n      }\n    }\n\n    fragment Video_promoVideo on Video {\n      id\n      renditions {\n        width\n        height\n        bitrate\n        url\n      }\n      promotionalMedia {\n        ... on Node {\n          id\n        }\n        ...Video_promoImage\n      }\n    }\n\n    fragment Video_promoImage on Image {\n      id\n      crops(\n        renditionNames: [\n          # MASTER\n          "articleLarge"\n          "jumbo"\n          "superJumbo"\n          # SIXTEEN_BY_NINE\n          "videoLarge"\n          "videoSixteenByNine1050"\n          "videoSixteenByNine3000"\n          # MEDIUM_SQUARE\n          "square640"\n          # TWO_BY_THREE\n          "verticalTwoByThree735"\n          # THREE_BY_TWO\n          "threeByTwoSmallAt2X"\n          "threeByTwoMediumAt2X"\n          "threeByTwoLargeAt2X"\n        ]\n      ) {\n        name\n        renditions {\n          name\n          width\n          height\n          url\n        }\n      }\n    }\n  '])))},$.defaultProps={videoOptions:{ratio:"16:9",playerRef:void 0},locksmith:void 0};t.a=Object(E.a)($)},c19X:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n("q1tI")),l=n("Jqp9"),c=n("X6oL"),u=n("6gWn"),d=n("syiw"),p=n("HDG5"),f=n("djNW"),m=o(n("5UIh")),h=n("lVLo"),g=o(n("4hs1")),y=n("FY2l"),v=a(n("j1Z1")),b=n("bSj6");t.default=function(e){var t,n,i,r,a,o,_,w=e.unit,x=(0,s.useState)(!1),k=x[0],O=x[1],E=(0,s.useState)(!0),T=E[0],C=E[1],S=(0,s.useState)(!0),P=S[0],M=S[1],I=(0,s.useState)(!0),A=I[0],j=I[1],L=(0,d.useMessageSelection)({config:{name:"dock"}}),R=(0,p.useUserState)(),N=(0,c.useTracking)(),D="/"===(0,y.getPathName)()?"homepage":"article";(0,s.useEffect)((function(){var e=function(){window&&window.innerWidth&&(window.innerWidth<h.widths.medium?j(!0):j(!1))};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[A]);var B=P?s.default.createElement("b",null,"Thank you for reading The Times."):s.default.createElement(s.default.Fragment,null,"Subscribe to ",s.default.createElement("b",null,A?"":"New York Times ","Games")," for full access to Spelling Bee, The Crossword and more.");if(L.loading)return null;if(!k){var z=null===(n=null===(t=null==L?void 0:L.response)||void 0===t?void 0:t.userstate())||void 0===n?void 0:n.messageSelectionMessageCaps,F=null;if(z)if((V=z).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==L?void 0:L.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==L?void 0:L.response)||void 0===n?void 0:n.audience())&&(F=e)})),null!==F){var U=F,H=new Date(null==U?void 0:U.lastSeenOn).getTime(),W=(new Date).getTime(),q=Math.abs(Math.round(W-H)/6e4);C(!0),q>2880?(U.viewCount=1,U.lastSeenOn=(new Date).toISOString(),C(!1)):U.viewCount+=1,R.update({messageSelectionMessageCaps:V})}if(!F){var V=[];z&&(V=z),V.push({unit:"dock",campaign:null===(i=null==L?void 0:L.response)||void 0===i?void 0:i.campaign(),audience:null===(r=null==L?void 0:L.response)||void 0===r?void 0:r.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),R.update({messageSelectionMessageCaps:V}),C(!1)}O(!0)}var G=s.default.createElement("div",{className:v.standardDockHeaderText},"Subscribe to ",s.default.createElement("b",null,A?"":"New York Times ","Games")," for full access to Spelling Bee, The Crossword and more."),Y=s.default.createElement("div",{className:v.headerText},B),Z=s.default.createElement("div",{className:(0,l.cx)(v.mainContent)},s.default.createElement("div",{className:v.headerLogo},s.default.createElement(g.default,null)),s.default.createElement("p",{className:v.header},"Get unlimited access to Spelling Bee, The Mini, over 10,000 crossword puzzles and more."),s.default.createElement("div",{className:v.ctaContainer},(null===(a=w.content)||void 0===a?void 0:a.priceDisplay)?s.default.createElement("p",{className:v.price},w.content.priceDisplay):null,s.default.createElement(b.Anchor,{className:v.button,href:null===(o=w.content)||void 0===o?void 0:o.clickThroughURI,target:b.Target.Blank,onClick:function(){N.trackEvent({event:"moduleInteraction",eventData:{pagetype:D,trigger:"module",type:"click"},module:{name:"dock",label:"SUBCON_CONV_SPELLING_BEE_FORUM_DOCK_BAU_2310",element:{name:f.Action.Subscribe,url:URL}}})}},"Subscribe Now"),(null===(_=w.content)||void 0===_?void 0:_.billingPeriodText)?s.default.createElement("p",{className:v.periodText},w.content.billingPeriodText):null));return T?s.default.createElement(m.default,{testId:"onsite-messaging-unit-".concat(null===u.config||void 0===u.config?void 0:u.config.name),unit:w,contentID:"SUBCON_CONV_SPELLING_BEE_FORUM_DOCK_BAU_2310",dockID:"standard",headerCollapsedCTA:"get started",header:G,onDockHeadingClick:function(){var e,t=null===(e=w.content)||void 0===e?void 0:e.clickThroughURI;N.trackEvent({event:"moduleInteraction",eventData:{pagetype:D,trigger:"module",type:"click"},module:{name:"dock",label:"SUBCON_CONV_SPELLING_BEE_FORUM_DOCK_BAU_2310",element:{name:f.Action.Subscribe,url:t}}}),window.open(t,"_blank","noopener,noreferrer")},headingClassName:v.standardDockHeading,isDockDismissible:!1,isDockExpandable:!1,minimized:!0}):s.default.createElement(m.default,{testId:"onsite-messaging-unit-".concat(null===u.config||void 0===u.config?void 0:u.config.name),unit:w,contentID:"SUBCON_CONV_SPELLING_BEE_FORUM_DOCK_BAU_2310",dockID:"standard",header:Y,headerCollapsedCTA:"expand",headerExpandedCTA:"collapse",onDockHeadingClick:function(){M((function(e){return!e}))},card:Z,isDockDismissible:!1,isDockExpandable:!0,minimized:!1})}},cCFw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canStorylineComposeLatestUpdates=function(e){var t,n=e.parentUri,i=e.storyline;if(!(null==i||null===(t=i.promotedLiveAssets)||void 0===t?void 0:t[0]))return!1;var r=u({storyline:i})||{},a=r.storylineDisplayName,o=r.liveAssetUri,s=r.items;return n!==o&&(!(null==s||!s.length)&&!!a)},t.getNewLiveBriefingProps=s,t.getNewLiveBriefingSubheads=o,t.getOldLiveBriefingProps=l,t.getSubheadsFromAsset=c,t.liveBlogPermalinkToAnchor=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.split("/"),i=n.pop(),r=n.join("/");t&&(r="".concat(r).concat(t));return r="".concat(r,"#").concat(i)},t.mapDataToProps=u;var i=n("t7vg"),r=n("V6Yu"),a=n("hZ4i");function o(e,t){return e.map((function(e){var n,i=e.node,r=i.url,o=i.headline,s=o.default,l=o.sentence,c=i.firstPublished,u=i.uri,d=i.summary;return{url:null===(n=(0,a.rewriteNodePermalinkToAnchor)({url:t},{url:r}))||void 0===n?void 0:n.url,text:l||s,firstPublished:c,uri:u,summary:d}}))}function s(e,t){var n,i,r;if(!(t&&(null!=t&&null!==(n=t.stream)&&void 0!==n&&null!==(i=n.edges)&&void 0!==i&&i.length||null!=e&&e.length)))return null;var a=e||(null==t||null===(r=t.stream)||void 0===r?void 0:r.edges),s=a[0].node.firstPublished;return{url:t.url,items:o(a,null==t?void 0:t.url),lastMajorModification:s}}function l(e){var t,n;if(null==e||null===(t=e.body)||void 0===t||null===(n=t.content)||void 0===n||!n.some((function(e){return"UnstructuredBlock"===(null==e?void 0:e.__typename)})))return null;var a=e.url,o=e.lastMajorModification,s=e.uri,l=e.body.content.filter((function(e){return"Heading2Block"===e.__typename})).map((function(e){var t,n=(0,i.getFormattedText)(e.content),o=null===(t=(0,r.textFromOakContent)(e.content))||void 0===t?void 0:t.trim();return n&&o?{url:"".concat(a,"#").concat((0,r.generateContentLink)(e.content)),text:n,textContent:o,uri:s}:null})).filter(Boolean);return{url:a,items:l,lastMajorModification:o}}function c(e){var t,n;return"LegacyCollection"===(null==e?void 0:e.__typename)?s(null==e||null===(t=e.stream)||void 0===t?void 0:t.edges,e):"FeedPublication"===(null==e?void 0:e.__typename)?s(null==e||null===(n=e.items_beta)||void 0===n?void 0:n.edges,e):"Article"===(null==e?void 0:e.__typename)?l(e):null}function u(e){var t,n,i,r,o,s,l,u=e.storyline,d=null==u?void 0:u.displayName,p=null==u||null===(t=u.hubAssets)||void 0===t||null===(n=t[0])||void 0===n||null===(i=n.asset)||void 0===i?void 0:i.url,f=null==u||null===(r=u.hubAssets)||void 0===r||null===(o=r[0])||void 0===o||null===(s=o.asset)||void 0===s?void 0:s.uri,m=(null==u||null===(l=u.promotedLiveAssets)||void 0===l?void 0:l[0])||{},h=m.displayName,g=m.asset,y=null==g?void 0:g.uri,v=(g||{}).url,b=(0,a.parseUnstructuredData)(g)||{},_=c(g)||{},w=_.items;return{storylineDisplayName:d,storylineUrl:p,storylineLinkUri:f,liveAssetUri:y,displayName:h,url:v,lastMajorModification:_.lastMajorModification,items:null==w?void 0:w.slice(0,3),unstructuredData:b,isActive:null==g?void 0:g.active}}},cFZn:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=null,n=null,i=null,a=[];null!=e&&e.length&&(e.forEach((function(e){var o=e.speaker,s=e.text,l=e.timecode,c=(0,r.default)(s);if(o!==t){n&&a.push(n),t=o;var u=o.match(/^[<|^](.+)[\^|>]$/);n={isArchived:!!u,speaker:u&&u[1].toLowerCase()||o.toLowerCase(),text:[c]}}else if(l&&l.start&&l.start>i)n.text.push(c);else{var d=n.text.length-1;n.text[d]="".concat(n.text[d]," ").concat(c)}l&&l.end&&(i=l.end)})),a.push(n));return a};var r=i(n("pq3b"))},cKmz:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("ALE8")),a=i(n("pfWQ"));t.default=function(){var e,t;return(0,r.default)()&&(null===(e=(t=(0,a.default)()).getAdsOnPage)||void 0===e?void 0:e.call(t))||{}}},cMFZ:function(e,t,n){"use strict";var i=n("gcR/"),r=n.n(i),a=n("lSNA"),o=n.n(a),s=(n("q1tI"),n("Jqp9")),l=n("kPjT"),c=n("Gfev"),u=n("3sMT"),d=Object(s.css)("display:inline-block;a{display:inline-block;}"),p=Object(s.css)("columns:2;margin-right:0;"),f=Object(s.css)("columns:3;margin-right:50px;"),m=Object(s.css)("columns:4;margin-right:30px;"),h=Object(s.css)("display:flex;flex-direction:column;"),g=Object(s.css)("height:fit-content;margin-bottom:0.75rem;display:block;color:",u.color.content.primary,";:hover{color:",u.color.content.tertiary,";}"),y=Object(s.css)("margin-left:0;margin-top:1rem;"),v=function(e){var t,n=e.columnId,i=e.handleNestedLinkClick,a=e.heading,u=e.hideHeading,v=e.columns,b=e.innerColumnCount,_=e.footer,w=e.links,x=e.parentName,k=e.style;return r()("div",{className:h,style:k},void 0,r()("h3",{id:"".concat(n,"-header"),className:Object(s.cx)(c.o,o()({},c.p,!a))},void 0,!u&&a),r()("ul",{"aria-labelledby":"".concat(n,"-header"),className:Object(s.cx)(h,(t={},o()(t,d,b>1),o()(t,p,2===b),o()(t,f,3===b),o()(t,m,4===b),t))},void 0,1===b&&w.map((function(e){return r()("li",{},e.copy,r()("a",{className:g,href:e.link,onClick:function(t){return i(t,e.link,x,a,e.copy)}},e.copy,e.copy))})),b>1&&v.map((function(e){return e.map((function(e){return r()("li",{},e.copy,r()("a",{className:g,href:e.link,onClick:function(t){return i(t,e.link,x,a,e.copy)}},e.copy,e.copy))}))}))),r()(l.a,{className:y,footer:_,handleNestedLinkClick:i,heading:a,parentName:x}))};v.displayName="LinksOnlyColumn",v.defaultProps={hideHeading:!1,columns:[],handleNestedLinkClick:function(){},links:[],footer:{},style:{}};t.a=v},cc1G:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lSNA")),a=i(n("q1tI")),o=(i(n("17x9")),n("Jqp9")),s=n("Ol7c");function l(e){var t=e.items,n=e.singleCard,i=e.trackLink;return a.default.createElement("div",{className:s.contextCardClass,"data-testid":"context-card"},t.map((function(e){return a.default.createElement("p",{key:e.text,className:(0,o.cx)(s.itemClass,(0,r.default)({},s.singleCardClass,n))},e.subtitle&&a.default.createElement("strong",null,e.subtitle," "),a.default.createElement("span",{onClick:i,dangerouslySetInnerHTML:{__html:e.text}}))})))}l.displayName="ContextCard",l.defaultProps={singleCard:!1,trackLink:function(){}};var c=l;t.default=c},"clX+":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("J4zp"),r=n.n(i),a=n("q1tI"),o=n("fZdH"),s=n("SYzA"),l=n("PgO9"),c=n("HUmG"),u=n("p1Tn"),d=n("NW2b");function p(e){var t=Object(a.useState)(null),n=r()(t,2),i=n[0],p=n[1],f=Object(l.a)().user,m=Object(o.a)(),h=e.canShow(),g=Object(s.a)(),y=(null==m?void 0:m[u.i])||{},v=y.allocated,b=void 0!==v&&v,_=y.variant,w=void 0===_?null:_;return Object(a.useEffect)((function(){e&&!e.loading()&&e.canShow()&&!g&&null!==f&&Object(c.e)(f)&&m&&b&&w&&(Object(d.e)(u.i),w!==u.j&&w!==u.k||p(!0))}),[e,h,g,f,m,b,w]),{showWelcomeBannerRegi:i}}},coEv:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o}));var i=n("Jqp9"),r=n("3sMT"),a=Object(i.css)("display:inline-block;font-style:normal;line-height:0;vertical-align:middle;"),o=Object(i.css)("border-left:3px inset transparent;border-right:3px inset transparent;border-bottom:3px inset transparent;border-top:3px solid ",r.color.signal.editorial,";display:inline-block;height:0;margin-left:3px;margin-top:3px;width:0;");r.color.signal.editorial},coi8:function(e,t,n){"use strict";var i=n("gcR/"),r=n.n(i),a=n("lSNA"),o=n.n(a),s=(n("q1tI"),n("Jqp9")),l=n("Gfev"),c=n("3sMT"),u=Object(s.css)("display:flex;flex-direction:column;"),d=Object(s.css)("background-size:contain;background-repeat:no-repeat;display:inline-block;min-height:20px;min-width:20px;margin-right:8px;position:relative;top:5px;vertical-align:top;"),p=Object(s.css)("height:fit-content;margin-bottom:0.5rem;display:block;p{display:inline-block;margin-top:3px;max-width:calc(100% - 30px);}:hover{color:",c.color.content.tertiary,";}"),f=function(e){var t=e.columnId,n=e.handleNestedLinkClick,i=e.heading,a=e.hideHeading,c=e.links,f=e.parentName;return r()("div",{id:t,className:u},void 0,r()("h3",{id:"".concat(t,"-header"),className:Object(s.cx)(l.o,o()({},l.p,!i))},void 0,!a&&i),r()("ul",{"aria-labelledby":"".concat(t,"-header")},void 0,c.map((function(e){return r()("li",{},e.copy,r()("a",{className:p,href:e.link,onClick:function(t){return n(t,e.link,f,i,e.copy)}},void 0,r()("i",{className:d,style:{backgroundImage:"url(".concat(e.icon,")")}}),r()("p",{},void 0,e.copy)))}))))};f.displayName="LinksWithIconsColumn",f.defaultProps={handleNestedLinkClick:function(){},hideHeading:!1};t.a=f},crEN:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("QILm")),a=i(n("W8MJ")),o=i(n("lwsE")),s=i(n("7W2i")),l=i(n("a1gu")),c=i(n("Nsbk")),u=i(n("LgWu")),d=i(n("uf0L")),p=i(n("/Lu6")),f=n("6hsm"),m=["itemListElement","items"];function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,l.default)(this,n)}}var g=function(e){return e.map((function(e,t){return new p.default({item:(n=null==e?void 0:e.url,n?n.includes(f.NYT_ORGANIZATION_SIMPLE.url)?n:u.default.resolve(f.NYT_ORGANIZATION_SIMPLE.url,n):""),name:(null==e?void 0:e.displayName)||(null==e?void 0:e.name),position:t+1});var n}))},y=function(e){(0,s.default)(n,e);var t=h(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(i.itemListElement,i.items),s=(0,r.default)(i,m);return(0,o.default)(this,n),(e=t.call(this,s))["@type"]="BreadcrumbList",e.itemListElement=g(a),e}return(0,a.default)(n)}(d.default);t.default=y},crgc:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.summaryClass=t.overlayClass=t.modalClass=t.dismissClass=void 0;var r=n("3sMT"),a=n("Jqp9"),o=i(n("wXC7")),s=(0,a.css)("display:block;position:fixed;box-sizing:border-box;top:0;right:0;bottom:0;left:0;width:100%;height:100%;z-index:",o.default.zIndex.overlay,";background-color:",r.dark.colors.background.primary.transform(o.default.setAlpha(.5)).rgba,";opacity:1;");t.overlayClass=s;var l=(0,a.css)("text-align:center;position:fixed;top:0;left:0;right:0;bottom:0;overflow:auto;width:unset;padding:32px 20px 40px;box-shadow:none;border-radius:0;background-color:",r.light.colors.background.primary.hex,";font-family:",o.default.font.franklinBase,";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:",r.color.content.primary,";z-index:",o.default.zIndex.interstitialModal,";",o.default.breakpoint.small,"{width:450px;left:50%;top:50%;border-radius:3px;box-shadow:0 0 8px ",r.dark.colors.background.primary.transform(o.default.setAlpha(.2)).rgba,";right:unset;bottom:unset;transform:translate(-50%,-50%);margin:0 auto;overflow:unset;position:absolute;padding:32px 30px 40px 30px;}");t.modalClass=l;var c=(0,a.css)("position:absolute;top:1px;right:0;padding:16px;cursor:pointer;background-color:",r.light.colors.background.primary.hex,";");t.dismissClass=c;var u=(0,a.css)("display:block;font-family:",o.default.font.serifMedium,";font-size:",o.default.font.size(24),";line-height:26px;text-align:center;color:",r.color.black,";font-style:normal;margin-bottom:10px;padding:0 16px;");t.summaryClass=u},d3NK:function(e,t,n){"use strict";var i=n("gcR/"),r=n.n(i),a=n("lSNA"),o=n.n(a),s=n("J4zp"),l=n.n(s),c=n("q1tI"),u=n("T5+l"),d=n.n(u),p=n("IiD6"),f=n.n(p),m=n("Jqp9"),h=n("QS0n"),g=n("cr+I"),y=n.n(g),v=n("pCca"),b=n("sOrY"),_=n("ZKN5"),w=n("TwAE"),x=n("DNUX"),k=n("Rb+W"),O=n("06b3"),E=n("wXC7"),T=n.n(E),C=n("3sMT"),S=Object(m.css)("display:none;@media (min-width:765px){background-color:",T.a.color.gray90,";border-bottom:1px solid ",T.a.color.gray80,";display:block;padding-bottom:15px;padding-top:15px;margin:0;}@media print{display:none;}position:relative;"),P=Object(m.css)("background-color:",T.a.color.gray90,";border-bottom:1px solid ",T.a.color.gray80,";border-top:1px solid ",T.a.color.gray80,";margin:2rem auto;padding-bottom:30px;padding-top:12px;text-align:center;",T.a.breakpoint.medium,"{margin:3rem auto;}@media print{display:none;}position:relative;"),M=Object(m.css)("min-height:280px;"),I=Object(m.css)("margin-top:60px;",T.a.breakpoint.medium,"{margin-bottom:0;margin-top:0;}"),A=Object(m.css)("width:100%;margin:2rem auto;border-top:1px solid ",T.a.color.gray80,";border-bottom:1px solid ",T.a.color.gray80,";",T.a.breakpoint.medium,"{margin:3rem auto;}",T.a.breakpoint.small,"{margin-left:auto;margin-right:auto;}"),j=Object(m.css)("position:relative;"),L=Object(m.css)("margin:0;"),R=Object(m.css)("display:none;"),N=Object(m.css)("border-top:1px solid ",T.a.color.gray70,";display:flex;margin:0 ",T.a.grid.pageMargin," 15px;max-width:",T.a.breakpoint.mediaMaxWidth,"px;padding-top:15px;",T.a.breakpoint.small,"{margin-left:auto;margin-right:auto;width:",T.a.breakpoint.textBodyWidth,"px;}",T.a.breakpoint.extraLarge,"{width:",T.a.breakpoint.textBodyWidthExtralarge,"px;}"),D=Object(m.css)("border-bottom:1px solid ",T.a.color.gray55,";display:flex;margin:15px ",T.a.grid.pageMargin,";max-width:",T.a.breakpoint.textBodyWidth,"px;padding-bottom:15px;",T.a.breakpoint.small,"{margin-left:auto;margin-right:auto;width:",T.a.breakpoint.textBodyWidth,"px;}",T.a.breakpoint.extraLarge,"{width:",T.a.breakpoint.textBodyWidthExtralarge,"px;max-width:",T.a.breakpoint.textBodyWidthExtralarge,"px;}"),B=Object(m.css)("color:",T.a.color.gray50,";display:none;font-family:",T.a.font.franklinBase,";font-size:",T.a.font.size(9),";font-weight:",T.a.font.weight.light,";letter-spacing:0.05rem;line-height:",T.a.font.size(9),";margin-left:auto;text-align:center;text-transform:uppercase;",T.a.breakpoint.small,"{display:inline-block;}p{margin-bottom:auto;margin-right:7px;margin-top:auto;text-transform:none;}"),z=Object(m.css)("color:",T.a.color.gray50,";font-family:",T.a.font.franklinBase,";font-size:",T.a.font.size(9),";font-weight:",T.a.font.weight.light,";letter-spacing:0.05rem;line-height:",T.a.font.size(9),";margin-bottom:9px;text-align:center;text-transform:uppercase;"),F=Object(m.css)("padding-bottom:15px;",T.a.breakpoint.medium,"{padding-bottom:0;}"),U=Object(m.css)("width:100%;"),H=Object(m.css)("background:transparent;border:0;border-radius:3px;color:",C.color.content.quaternary,";display:block;font-family:",T.a.font.franklinBase,";font-size:",T.a.font.size(10),";font-weight:",T.a.font.weight.book,";letter-spacing:0.05rem;line-height:",T.a.font.size(10),";margin:3px auto;padding:8px 9px;text-align:center;"),W=Object(m.css)("background-color:",C.color.background.secondary,";color:",C.color.content.quaternary,";");T.a.color.gray90,T.a.color.gray55,T.a.color.gray55,T.a.color.gray90,T.a.breakpoint.small;function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G="Advertisement",Y="Capture Ad",Z={pp_morein:!0,sponsor:!0,ribbon:!0,pp_edpick:!0};function X(e){var t,n=e.id,i=e.sequence,a=e.dropzone,s=e.adDidNotDisplay,u=e.sponsorAdFullBleed,p=n;void 0===n&&i?(p="story-ad-".concat(i),t="mid".concat(i)):t=p=n;var g=f()().adTargeting,_=void 0===g?{}:g,E=Object(h.useLocation)(),T=Object(m.useTheme)(),C=Object(v.a)().deviceType,q=Object(c.useState)(!1),X=l()(q,2),J=X[0],K=X[1],$=Object(c.useState)(!0),Q=l()($,2),ee=Q[0],te=Q[1],ne=Object(c.useState)(null),ie=l()(ne,2),re=ie[0],ae=ie[1],oe=Object(c.useState)(!1),se=l()(oe,2),le=se[0],ce=se[1],ue=Object(c.useReducer)(b.a,{standardAdHeight:!0,isFlexFrame:!1,sponsorAdIsEmpty:!0,isTopAd:"top"===p,hideAd:function(e){var t=y.a.parse(E.search);return e&&T.chromeless||t&&"true"===t.nojoy}("top"===p)}),de=l()(ue,2),pe=de[0],fe=de[1],me=O.a.load("vi_show_report_btn")||"";Object(c.useEffect)((function(){J&&s&&s()}),[s,J]),Object(c.useEffect)((function(){!J&&le&&te(!1)}),[p,le,J]),Object(c.useEffect)((function(){if(re){var e=re.size,t=re.isEmpty,n=re.advertiserId,i=re.sourceAgnosticCreativeId,r=re.sourceAgnosticLineItemId,a=re.slot;t||me&&(fe({debug:{sourceAgnosticCreativeId:i,sourceAgnosticLineItemId:r,googleQueryId:a.getEscapedQemQueryId(),advertiserId:n,pageUrl:window.location.href,clickUrl:"",size:e}}),Object(k.g)(a).then((function(e){fe((function(t){return{debug:V(V({},t.debug),{},{clickUrl:e})}}))})))}}),[re,me]),Object(c.useEffect)((function(){if(!J&&re){var e=re.size;re.isEmpty||("sponsor"===p&&fe({sponsorAdIsEmpty:!1}),0===e[0]&&0===e[1]?fe({isFlexFrame:!0}):fe({isFlexFrame:!1}),250===e[1]||0===e[1]&&"vi"===_.ver?fe({standardAdHeight:!0}):fe({standardAdHeight:!1}))}}),[_.ver,p,J,re]);var he=pe.isTopAd;if(pe.hideAd||Object(k.u)(p))return null;var ge,ye="".concat(p,"-wrapper"),ve="".concat(p,"-slug"),be=P;if(he?be=S:"ribbon"===p&&(be=j),pe.standardAdHeight&&(ge="smartphone"===C&&he||"smartphone"===C&&"pp_morein"===p||"desktop"===C&&"pp_edpick"===p?{}:"desktop"===C&&he||"bottom"===p?{minHeight:"90px"}:"sponsor"===p?{}:{minHeight:"250px"}),J&&ee&&a.adsDesktop)return r()("div",{className:U});return r()("div",{id:ye,className:function(e){return J&&ee||"sponsor"===p&&!re||J?R:"sponsor"===p&&u?D:"sponsor"===p?N:"pp_morein"===p?F:Z[p]?null:pe.isFlexFrame?Object(m.cx)(A,e,M,o()({},L,[S,j].includes(e))):"bottom"===p?Object(m.cx)(e,(t={},o()(t,I,e===P),o()(t,M,pe.standardAdHeight),t)):"top"===p?Object(m.cx)(e,o()({},M,pe.standardAdHeight)):pe.standardAdHeight?Object(m.cx)(e,o()({},M,e===P)):e;var t}(be)},void 0,r()("div",{id:ve,className:J&&ee?R:"sponsor"===p?B:Z[p]?R:z},void 0,r()("p",{},void 0,"sponsor"===p?"Supported by":G)),r()(d.a,{userStyle:ge,id:p,position:t,onDFPResponse:function(e){ae(e)},onEmpty:function(){K(!0)},isPrioritized:he,onImpressionViewable:function(){ce(!0)}}),me&&r()(w.a,{width:360,className:H,activeClassName:W,buttonContent:Y,modalContent:r()(x.a,{adData:V({page:_.typ,position:t,deviceType:C},pe.debug)})}))}X.displayName="ResponsiveAd",X.displayName="ResponsiveAd",X.defaultProps={id:void 0,sequence:void 0,adDidNotDisplay:void 0,sponsorAdFullBleed:void 0,dropzone:{adsDesktop:!1,adsMobile:!1,index:void 0}};t.a=Object(_.a)(X)},d4gE:function(e,t,n){(function(t){e.exports=function(){"use strict";var e,n,i;function r(t,r){if(e)if(n){var a="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+n+")(sharedChunk); self.onerror = null;",o={};e(o),i=r(o),"undefined"!=typeof window&&window&&window.URL&&window.URL.createObjectURL&&(i.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"})))}else n=r;else e=r}return r(0,(function(e){var n="undefined"!=typeof self?self:{},i="2.15.0";let r;const a={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==r){const e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{r=null!=t.env.API_URL_REGEX?new RegExp(t.env.API_URL_REGEX):e}catch(t){r=e}}return r},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!a.API_URL)return null;try{const e=new URL(a.API_URL);return"api.mapbox.cn"===e.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===e.hostname?"https://events.mapbox.com/events/v2":null}catch(e){return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},o={supported:!1,testSupport:function(e){!c&&l&&(u?d(e):s=e)}};let s,l,c=!1,u=!1;function d(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,l),e.isContextLost())return;o.supported=!0}catch(e){}e.deleteTexture(t),c=!0}n.document&&(l=n.document.createElement("img"),l.onload=function(){s&&d(s),s=null,u=!0},l.onerror=function(){c=!0,s=null},l.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const p="01";function f(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var m=h;function h(e,t,n,i){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(i-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=i}h.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,i=0;i<8;i++){var r=this.sampleCurveX(n)-e;if(Math.abs(r)<t)return n;var a=this.sampleCurveDerivativeX(n);if(Math.abs(a)<1e-6)break;n-=r/a}var o=0,s=1;for(n=e,i=0;i<20&&(r=this.sampleCurveX(n),!(Math.abs(r-e)<t));i++)e>r?o=n:s=n,n=.5*(s-o)+o;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var g=f(m),y=v;function v(e,t){this.x=e,this.y=t}v.prototype={clone:function(){return new v(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),i=Math.sin(e),r=t.y+i*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-i*(this.y-t.y),this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},v.convert=function(e){return e instanceof v?e:Array.isArray(e)?new v(e[0],e[1]):e};var b=f(y);const _=Math.PI/180,w=180/Math.PI;function x(e){return e*_}function k(e){return e*w}const O=[[0,0],[1,0],[1,1],[0,1]];function E(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function T(e,t,n,i){const r=new g(e,t,n,i);return function(e){return r.solve(e)}}const C=T(.25,.1,.25,1);function S(e,t,n){return Math.min(n,Math.max(t,e))}function P(e,t,n){return(n=S((n-e)/(t-e),0,1))*n*(3-2*n)}function M(e,t,n){const i=n-t,r=((e-t)%i+i)%i+t;return r===t?n:r}function I(e,t,n){if(!e.length)return n(null,[]);let i=e.length;const r=new Array(e.length);let a=null;e.forEach((e,o)=>{t(e,(e,t)=>{e&&(a=e),r[o]=t,0==--i&&n(a,r)})})}function A(e){const t=[];for(const n in e)t.push(e[n]);return t}function j(e,...t){for(const n of t)for(const t in n)e[t]=n[t];return e}let L=1;function R(){return L++}function N(){return function e(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function D(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function B(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function z(e,t){e.forEach(e=>{t[e]&&(t[e]=t[e].bind(t))})}function F(e,t){return-1!==e.indexOf(t,e.length-t.length)}function U(e,t,n){const i={};for(const r in e)i[r]=t.call(n||this,e[r],r,e);return i}function H(e,t,n){const i={};for(const r in e)t.call(n||this,e[r],r,e)&&(i[r]=e[r]);return i}function W(e){return Array.isArray(e)?e.map(W):"object"==typeof e&&e?U(e,W):e}const q={};function V(e){q[e]||("undefined"!=typeof console&&console.warn(e),q[e]=!0)}function G(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function Y(e){let t=0;for(let n,i,r=0,a=e.length,o=a-1;r<a;o=r++)n=e[r],i=e[o],t+=(i.x-n.x)*(n.y+i.y);return t}function Z(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function X(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(e,n,i,r)=>{const a=i||r;return t[n]=!a||a.toLowerCase(),""}),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t}let J=null;function K(e){if(null==J){const t=e.navigator?e.navigator.userAgent:null;J=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return J}function $(e){try{const t=n[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}}function Q(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}const ee="mapbox-tiles";let te,ne,ie=500,re=50;function ae(){try{return n.caches}catch(e){}}function oe(){ae()&&!te&&(te=n.caches.open(ee))}function se(e){const t=e.indexOf("?");if(t<0)return e;const n=function(e){const t=e.indexOf("?");return t>0?e.slice(t+1).split("&"):[]}(e).filter(e=>{const t=e.split("=");return"language"===t[0]||"worldview"===t[0]});return n.length?`${e.slice(0,t)}?${n.join("&")}`:e.slice(0,t)}let le=1/0;const ce={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(ce);class ue extends Error{constructor(e,t,n){401===t&&we(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=t,this.url=n}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const de=Z()?()=>self.worker&&self.worker.referrer:()=>("blob:"===n.location.protocol?n.parent:n).location.href,pe=function(e,t){if(!(/^file:/.test(i=e.url)||/^file:/.test(de())&&!/^\w+:/.test(i))){if(n.fetch&&n.Request&&n.AbortController&&n.Request.prototype.hasOwnProperty("signal"))return function(e,t){const i=new n.AbortController,r=new n.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:de(),referrerPolicy:e.referrerPolicy,signal:i.signal});let a=!1,o=!1;const s=(l=r.url).indexOf("sku=")>0&&we(l);var l;"json"===e.type&&r.headers.set("Accept","application/json");const c=(i,a,l)=>{if(o)return;if(i&&"SecurityError"!==i.message&&V(i.toString()),a&&l)return u(a);const c=Date.now();n.fetch(r).then(n=>{if(n.ok){const e=s?n.clone():null;return u(n,e,c)}return t(new ue(n.statusText,n.status,e.url))}).catch(n=>{"AbortError"!==n.name&&t(new Error(`${n.message} ${e.url}`))})},u=(i,s,l)=>{("arrayBuffer"===e.type?i.arrayBuffer():"json"===e.type?i.json():i.text()).then(e=>{o||(s&&l&&function(e,t,i){if(oe(),!te)return;const r={status:t.status,statusText:t.statusText,headers:new n.Headers};t.headers.forEach((e,t)=>r.headers.set(t,e));const a=X(t.headers.get("Cache-Control")||"");if(a["no-store"])return;a["max-age"]&&r.headers.set("Expires",new Date(i+1e3*a["max-age"]).toUTCString());const o=r.headers.get("Expires");o&&(new Date(o).getTime()-i<42e4||function(e,t){if(void 0===ne)try{new Response(new ReadableStream),ne=!0}catch(e){ne=!1}ne?t(e.body):e.blob().then(t)}(t,t=>{const i=new n.Response(t,r);oe(),te&&te.then(t=>t.put(se(e.url),i)).catch(e=>V(e.message))}))}(r,s,l),a=!0,t(null,e,i.headers.get("Cache-Control"),i.headers.get("Expires")))}).catch(e=>{o||t(new Error(e.message))})};return s?function(e,t){if(oe(),!te)return t(null);const n=se(e.url);te.then(e=>{e.match(n).then(i=>{const r=function(e){if(!e)return!1;const t=new Date(e.headers.get("Expires")||0),n=X(e.headers.get("Cache-Control")||"");return t>Date.now()&&!n["no-cache"]}(i);e.delete(n),r&&e.put(n,i.clone()),t(null,i,r)}).catch(t)}).catch(t)}(r,c):c(null,null),{cancel:()=>{o=!0,a||i.abort()}}}(e,t);if(Z()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(e,t){const i=new n.XMLHttpRequest;i.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(i.responseType="arraybuffer");for(const t in e.headers)i.setRequestHeader(t,e.headers[t]);return"json"===e.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===e.credentials,i.onerror=()=>{t(new Error(i.statusText))},i.onload=()=>{if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){let n=i.response;if("json"===e.type)try{n=JSON.parse(i.response)}catch(e){return t(e)}t(null,n,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else t(new ue(i.statusText,i.status,e.url))},i.send(e.body),{cancel:()=>i.abort()}}(e,t)},fe=function(e,t){return pe(j(e,{type:"arrayBuffer"}),t)};function me(e){const t=n.document.createElement("a");return t.href=e,t.protocol===n.document.location.protocol&&t.host===n.document.location.host}const he="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ge,ye;ge=[],ye=0;const ve=function(e,t){if(o.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),ye>=a.MAX_PARALLEL_IMAGE_REQUESTS){const n={requestParameters:e,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return ge.push(n),n}ye++;let i=!1;const r=()=>{if(!i)for(i=!0,ye--;ge.length&&ye<a.MAX_PARALLEL_IMAGE_REQUESTS;){const e=ge.shift(),{requestParameters:t,callback:n,cancelled:i}=e;i||(e.cancel=ve(t,n).cancel)}},s=fe(e,(e,i,a,o)=>{r(),e?t(e):i&&(n.createImageBitmap?function(e,t){const i=new n.Blob([new Uint8Array(e)],{type:"image/png"});n.createImageBitmap(i).then(e=>{t(null,e)}).catch(e=>{t(new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(i,(e,n)=>t(e,n,a,o)):function(e,t){const i=new n.Image,r=n.URL;i.onload=()=>{t(null,i),r.revokeObjectURL(i.src),i.onload=null,n.requestAnimationFrame(()=>{i.src=he})},i.onerror=()=>t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const a=new n.Blob([new Uint8Array(e)],{type:"image/png"});i.src=e.byteLength?r.createObjectURL(a):he}(i,(e,n)=>t(e,n,a,o)))});return{cancel:()=>{s.cancel(),r()}}},be="NO_ACCESS_TOKEN";function _e(e){return 0===e.indexOf("mapbox:")}function we(e){return a.API_URL_REGEX.test(e)}function xe(e){return a.API_CDN_URL_REGEX.test(e)}function ke(e){return a.API_STYLE_REGEX.test(e)&&!Oe(e)}function Oe(e){return a.API_SPRITE_REGEX.test(e)}const Ee=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Te(e){const t=e.match(Ee);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function Ce(e){const t=e.params.length?"?"+e.params.join("&"):"";return`${e.protocol}://${e.authority}${e.path}${t}`}const Se="mapbox.eventData";function Pe(e){if(!e)return null;const t=e.split(".");if(!t||3!==t.length)return null;try{return JSON.parse(decodeURIComponent(n.atob(t[1]).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch(e){return null}}class Me{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const t=Pe(a.ACCESS_TOKEN);let i="";return i=t&&t.u?n.btoa(encodeURIComponent(t.u).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode(Number("0x"+t)))):a.ACCESS_TOKEN||"",e?`${Se}.${e}:${i}`:`${Se}:${i}`}fetchEventData(){const e=$("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{const e=n.localStorage.getItem(t);e&&(this.eventData=JSON.parse(e));const r=n.localStorage.getItem(i);r&&(this.anonId=r)}catch(e){V("Unable to read from LocalStorage")}}saveEventData(){const e=$("localStorage"),t=this.getStorageKey(),i=this.getStorageKey("uuid");if(e)try{n.localStorage.setItem(i,this.anonId),Object.keys(this.eventData).length>=1&&n.localStorage.setItem(t,JSON.stringify(this.eventData))}catch(e){V("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,t,n,i){if(!a.EVENTS_URL)return;const r=Te(a.EVENTS_URL);r.params.push("access_token="+(i||a.ACCESS_TOKEN||""));const o={event:this.type,created:new Date(e).toISOString()},s=t?j(o,t):o,l={url:Ce(r),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=function(e,t){return pe(j(e,{method:"POST"}),t)}(l,e=>{this.pendingRequest=null,n(e),this.saveEventData(),this.processRequests(i)})}queueRequest(e,t){this.queue.push(e),this.processRequests(t)}}const Ie=new class extends Me{constructor(e){super("appUserTurnstile"),this._customAccessToken=e}postTurnstileEvent(e,t){a.EVENTS_URL&&a.ACCESS_TOKEN&&Array.isArray(e)&&e.some(e=>_e(e)||we(e))&&this.queueRequest(Date.now(),t)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=Pe(a.ACCESS_TOKEN),n=t?t.u:a.ACCESS_TOKEN;let r=n!==this.eventData.tokenU;B(this.anonId)||(this.anonId=N(),r=!0);const o=this.queue.shift();if(this.eventData.lastSuccess){const e=new Date(this.eventData.lastSuccess),t=new Date(o),n=(o-this.eventData.lastSuccess)/864e5;r=r||n>=1||n<-1||e.getDate()!==t.getDate()}else r=!0;r?this.postEvent(o,{sdkIdentifier:"mapbox-gl-js",sdkVersion:i,skuId:p,"enabled.telemetry":!1,userId:this.anonId},e=>{e||(this.eventData.lastSuccess=o,this.eventData.tokenU=n)},e):this.processRequests()}},Ae=Ie.postTurnstileEvent.bind(Ie),je=new class extends Me{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(e,t,n,i){this.skuToken=t,this.errorCb=i,a.EVENTS_URL&&(n||a.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(be)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:n}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),B(this.anonId)||(this.anonId=N()),this.postEvent(n,{sdkIdentifier:"mapbox-gl-js",sdkVersion:i,skuId:p,skuToken:this.skuToken,userId:this.anonId},e=>{e?this.errorCb(e):t&&(this.success[t]=!0)},e))}},Le=je.postMapLoadEvent.bind(je),Re=new class extends Me{constructor(){super("gljs.performance")}postPerformanceEvent(e,t){a.EVENTS_URL&&(e||a.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:t},e)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:t,performanceData:r}=this.queue.shift(),a=function(e){const t=n.performance.getEntriesByType("resource"),r=n.performance.getEntriesByType("mark"),a=function(e){const t={};if(e)for(const n in e)if("other"!==n)for(const i of e[n]){const e=n+"ResolveRangeMin",r=n+"ResolveRangeMax",a=n+"RequestCount",o=n+"RequestCachedCount";t[e]=Math.min(t[e]||1/0,i.startTime),t[r]=Math.max(t[r]||-1/0,i.responseEnd);const s=e=>{void 0===t[e]&&(t[e]=0),++t[e]};void 0!==i.transferSize&&0===i.transferSize&&s(o),s(a)}return t}(function(e,t){const n={};if(e)for(const i of e){const e=t(i);void 0===n[e]&&(n[e]=[]),n[e].push(i)}return n}(t,He)),o=n.devicePixelRatio,s=n.navigator.connection||n.navigator.mozConnection||n.navigator.webkitConnection,l={counters:[],metadata:[],attributes:[]},c=(e,t,n)=>{null!=n&&e.push({name:t,value:n.toString()})};for(const e in a)c(l.counters,e,a[e]);if(e.interactionRange[0]!==1/0&&e.interactionRange[1]!==-1/0&&(c(l.counters,"interactionRangeMin",e.interactionRange[0]),c(l.counters,"interactionRangeMax",e.interactionRange[1])),r)for(const e of Object.keys(Fe)){const t=Fe[e],n=r.find(e=>e.name===t);n&&c(l.counters,t,n.startTime)}return c(l.counters,"visibilityHidden",e.visibilityHidden),c(l.attributes,"style",function(e){if(e)for(const t of e){const e=t.name.split("?")[0];if(ke(e)){const t=e.split("/").slice(-2);if(2===t.length)return`mapbox://styles/${t[0]}/${t[1]}`}}}(t)),c(l.attributes,"terrainEnabled",e.terrainEnabled?"true":"false"),c(l.attributes,"fogEnabled",e.fogEnabled?"true":"false"),c(l.attributes,"projection",e.projection),c(l.attributes,"zoom",e.zoom),c(l.metadata,"devicePixelRatio",o),c(l.metadata,"connectionEffectiveType",s?s.effectiveType:void 0),c(l.metadata,"navigatorUserAgent",n.navigator.userAgent),c(l.metadata,"screenWidth",n.screen.width),c(l.metadata,"screenHeight",n.screen.height),c(l.metadata,"windowWidth",n.innerWidth),c(l.metadata,"windowHeight",n.innerHeight),c(l.metadata,"mapWidth",e.width/o),c(l.metadata,"mapHeight",e.height/o),c(l.metadata,"webglRenderer",e.renderer),c(l.metadata,"webglVendor",e.vendor),c(l.metadata,"sdkVersion",i),c(l.metadata,"sdkIdentifier","mapbox-gl-js"),l}(r);for(const e of a.metadata);for(const e of a.counters);for(const e of a.attributes);this.postEvent(t,a,()=>{},e)}},Ne=Re.postPerformanceEvent.bind(Re),De=new class extends Me{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(e,t,n,i){if(!a.API_URL||!a.SESSION_PATH)return;const r=Te(a.API_URL+a.SESSION_PATH);r.params.push("sku="+(t||"")),r.params.push("access_token="+(i||a.ACCESS_TOKEN||""));const o={url:Ce(r),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(e,t){return pe(j(e,{method:"GET"}),t)}(o,e=>{this.pendingRequest=null,n(e),this.saveEventData(),this.processRequests(i)})}getSessionAPI(e,t,n,i){this.skuToken=t,this.errorCb=i,a.SESSION_PATH&&a.API_URL&&(n||a.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(be)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:n}=this.queue.shift();t&&this.success[t]||this.getSession(n,this.skuToken,e=>{e?this.errorCb(e):t&&(this.success[t]=!0)},e)}},Be=De.getSessionAPI.bind(De),ze=new Set,Fe={create:"create",load:"load",fullLoad:"fullLoad"},Ue={mark(e){n.performance.mark(e)},measure(e,t,i){n.performance.measure(e,t,i)}};function He(e){const t=e.name.split("?")[0];return xe(t)&&t.includes("mapbox-gl.js")?"javascript":xe(t)&&t.includes("mapbox-gl.css")?"css":function(e){return a.API_FONTS_REGEX.test(e)}(t)?"fontRange":Oe(t)?"sprite":ke(t)?"style":function(e){return a.API_TILEJSON_REGEX.test(e)}(t)?"tilejson":"other"}const We=n.performance;function qe(e){const t=e?e.url.toString():void 0;return We.getEntriesByName(t)}let Ve,Ge,Ye,Ze;const Xe={now:()=>void 0!==Ye?Ye:n.performance.now(),setNow(e){Ye=e},restoreNow(){Ye=void 0},frame(e){const t=n.requestAnimationFrame(e);return{cancel:()=>n.cancelAnimationFrame(t)}},getImageData(e,t=0){const{width:i,height:r}=e;Ze||(Ze=n.document.createElement("canvas"));const a=Ze.getContext("2d",{willReadFrequently:!0});if(!a)throw new Error("failed to create canvas 2d context");return(i>Ze.width||r>Ze.height)&&(Ze.width=i,Ze.height=r),a.clearRect(-t,-t,i+2*t,r+2*t),a.drawImage(e,0,0,i,r),a.getImageData(-t,-t,i+2*t,r+2*t)},resolveURL:e=>(Ve||(Ve=n.document.createElement("a")),Ve.href=e,Ve.href),get devicePixelRatio(){return n.devicePixelRatio},get prefersReducedMotion(){return!!n.matchMedia&&(null==Ge&&(Ge=n.matchMedia("(prefers-reduced-motion: reduce)")),Ge.matches)}};function Je(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function Ke(e,t,n){if(n&&n[e]){const i=n[e].indexOf(t);-1!==i&&n[e].splice(i,1)}}class $e{constructor(e,t={}){j(this,t),this.type=e}}class Qe extends $e{constructor(e,t={}){super("error",j({error:e},t))}}class et{on(e,t){return this._listeners=this._listeners||{},Je(e,t,this._listeners),this}off(e,t){return Ke(e,t,this._listeners),Ke(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},Je(e,t,this._oneTimeListeners),this):new Promise(t=>this.once(e,t))}fire(e,t){"string"==typeof e&&(e=new $e(e,t||{}));const n=e.type;if(this.listens(n)){e.target=this;const t=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of t)n.call(this,e);const i=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const t of i)Ke(n,t,this._oneTimeListeners),t.call(this,e);const r=this._eventedParent;r&&(j(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),r.fire(e))}else e instanceof Qe&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var tt=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"requires":["fill-extrusion-edge-radius"],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function nt(e,...t){for(const n of t)for(const t in n)e[t]=n[t];return e}function it(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function rt(e){if(Array.isArray(e))return e.map(rt);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const n in e)t[n]=rt(e[n]);return t}return it(e)}class at extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var ot=at;class st{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[e,n]of t)this.bindings[e]=n}concat(e){return new st(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var lt=st;const ct={kind:"null"},ut={kind:"number"},dt={kind:"string"},pt={kind:"boolean"},ft={kind:"color"},mt={kind:"object"},ht={kind:"value"},gt={kind:"collator"},yt={kind:"formatted"},vt={kind:"resolvedImage"};function bt(e,t){return{kind:"array",itemType:e,N:t}}function _t(e){if("array"===e.kind){const t=_t(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const wt=[ct,ut,dt,pt,ft,yt,mt,bt(ht),vt];function xt(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!xt(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of wt)if(!xt(e,t))return null}return`Expected ${_t(e)} but found ${_t(t)} instead.`}function kt(e,t){return t.some(t=>t.kind===e.kind)}function Ot(e,t){return t.some(t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e)}var Et,Tt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ct(e){return(e=Math.round(e))<0?0:e>255?255:e}function St(e){return Ct("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function Pt(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function Mt(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{Et={}.parseCSSColor=function(e){var t,n=e.replace(/ /g,"").toLowerCase();if(n in Tt)return Tt[n].slice();if("#"===n[0])return 4===n.length?(t=parseInt(n.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===n.length&&(t=parseInt(n.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var i=n.indexOf("("),r=n.indexOf(")");if(-1!==i&&r+1===n.length){var a=n.substr(0,i),o=n.substr(i+1,r-(i+1)).split(","),s=1;switch(a){case"rgba":if(4!==o.length)return null;s=Pt(o.pop());case"rgb":return 3!==o.length?null:[St(o[0]),St(o[1]),St(o[2]),s];case"hsla":if(4!==o.length)return null;s=Pt(o.pop());case"hsl":if(3!==o.length)return null;var l=(parseFloat(o[0])%360+360)%360/360,c=Pt(o[1]),u=Pt(o[2]),d=u<=.5?u*(c+1):u+c-u*c,p=2*u-d;return[Ct(255*Mt(p,d,l+1/3)),Ct(255*Mt(p,d,l)),Ct(255*Mt(p,d,l-1/3)),s];default:return null}}return null}}catch(e){}class It{constructor(e,t,n,i=1){this.r=e,this.g=t,this.b=n,this.a=i}static parse(e){if(!e)return;if(e instanceof It)return e;if("string"!=typeof e)return;const t=Et(e);return t?new It(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]):void 0}toString(){const[e,t,n,i]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(n)},${i})`}toArray(){const{r:e,g:t,b:n,a:i}=this;return 0===i?[0,0,0,0]:[255*e/i,255*t/i,255*n/i,i]}toArray01(){const{r:e,g:t,b:n,a:i}=this;return 0===i?[0,0,0,0]:[e/i,t/i,n/i,i]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:n,a:i}=this;return[e,t,n,i]}}It.black=new It(0,0,0,1),It.white=new It(1,1,1,1),It.transparent=new It(0,0,0,0),It.red=new It(1,0,0,1),It.blue=new It(0,0,1,1);var At=It;class jt{constructor(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Lt{constructor(e,t,n,i,r){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=n,this.fontStack=i,this.textColor=r}}class Rt{constructor(e){this.sections=e}static fromString(e){return new Rt([new Lt(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||e.image&&0!==e.image.name.length)}static factory(e){return e instanceof Rt?e:Rt.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const n={};t.fontStack&&(n["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(n["font-scale"]=t.scale),t.textColor&&(n["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(n)}return e}}class Nt{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Nt({name:e,available:!1}):null}serialize(){return["image",this.name]}}function Dt(e,t,n,i){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===i||"number"==typeof i&&i>=0&&i<=1?null:`Invalid rgba value [${[e,t,n,i].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof i?[e,t,n,i]:[e,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Bt(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof At)return!0;if(e instanceof jt)return!0;if(e instanceof Rt)return!0;if(e instanceof Nt)return!0;if(Array.isArray(e)){for(const t of e)if(!Bt(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!Bt(e[t]))return!1;return!0}return!1}function zt(e){if(null===e)return ct;if("string"==typeof e)return dt;if("boolean"==typeof e)return pt;if("number"==typeof e)return ut;if(e instanceof At)return ft;if(e instanceof jt)return gt;if(e instanceof Rt)return yt;if(e instanceof Nt)return vt;if(Array.isArray(e)){const t=e.length;let n;for(const t of e){const e=zt(t);if(n){if(n===e)continue;n=ht;break}n=e}return bt(n||ht,t)}return mt}function Ft(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof At||e instanceof Rt||e instanceof Nt?e.toString():JSON.stringify(e)}class Ut{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Bt(e[1]))return t.error("invalid value");const n=e[1];let i=zt(n);const r=t.expectedType;return"array"!==i.kind||0!==i.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(i=r),new Ut(i,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof At?["rgba"].concat(this.value.toArray()):this.value instanceof Rt?this.value.serialize():this.value}}var Ht=Ut,Wt=class{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}};const qt={string:dt,number:ut,boolean:pt,object:mt};class Vt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n,i=1;const r=e[0];if("array"===r){let r,a;if(e.length>2){const n=e[1];if("string"!=typeof n||!(n in qt)||"object"===n)return t.error('The item type argument of "array" must be one of string, number, boolean',1);r=qt[n],i++}else r=ht;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);a=e[2],i++}n=bt(r,a)}else n=qt[r];const a=[];for(;i<e.length;i++){const n=t.parse(e[i],i,ht);if(!n)return null;a.push(n)}return new Vt(n,a)}evaluate(e){for(let t=0;t<this.args.length;t++){const n=this.args[t].evaluate(e);if(!xt(this.type,zt(n)))return n;if(t===this.args.length-1)throw new Wt(`Expected value to be of type ${_t(this.type)}, but found ${_t(zt(n))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,t=[e.kind];if("array"===e.kind){const n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);const i=e.N;("number"==typeof i||this.args.length>1)&&t.push(i)}}return t.concat(this.args.map(e=>e.serialize()))}}var Gt=Vt;class Yt{constructor(e){this.type=yt,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&"object"==typeof n)return t.error("First argument must be an image or text section.");const i=[];let r=!1;for(let n=1;n<=e.length-1;++n){const a=e[n];if(r&&"object"==typeof a&&!Array.isArray(a)){r=!1;let e=null;if(a["font-scale"]&&(e=t.parse(a["font-scale"],1,ut),!e))return null;let n=null;if(a["text-font"]&&(n=t.parse(a["text-font"],1,bt(dt)),!n))return null;let o=null;if(a["text-color"]&&(o=t.parse(a["text-color"],1,ft),!o))return null;const s=i[i.length-1];s.scale=e,s.font=n,s.textColor=o}else{const a=t.parse(e[n],1,ht);if(!a)return null;const o=a.type.kind;if("string"!==o&&"value"!==o&&"null"!==o&&"resolvedImage"!==o)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,i.push({content:a,scale:null,font:null,textColor:null})}}return new Yt(i)}evaluate(e){return new Rt(this.sections.map(t=>{const n=t.content.evaluate(e);return zt(n)===vt?new Lt("",n,null,null,null):new Lt(Ft(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const n={};t.scale&&(n["font-scale"]=t.scale.serialize()),t.font&&(n["text-font"]=t.font.serialize()),t.textColor&&(n["text-color"]=t.textColor.serialize()),e.push(n)}return e}}class Zt{constructor(e){this.type=vt,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,dt);return n?new Zt(n):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),n=Nt.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Xt={"to-boolean":pt,"to-color":ft,"to-number":ut,"to-string":dt};class Jt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[0];if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");const i=Xt[n],r=[];for(let n=1;n<e.length;n++){const i=t.parse(e[n],n,ht);if(!i)return null;r.push(i)}return new Jt(i,r)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let t,n;for(const i of this.args){if(t=i.evaluate(e),n=null,t instanceof At)return t;if("string"==typeof t){const n=e.parseColor(t);if(n)return n}else if(Array.isArray(t)&&(n=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:Dt(t[0],t[1],t[2],t[3]),!n))return new At(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Wt(n||`Could not parse color from value '${"string"==typeof t?t:String(JSON.stringify(t))}'`)}if("number"===this.type.kind){let t=null;for(const n of this.args){if(t=n.evaluate(e),null===t)return 0;const i=Number(t);if(!isNaN(i))return i}throw new Wt(`Could not convert ${JSON.stringify(t)} to number.`)}return"formatted"===this.type.kind?Rt.fromString(Ft(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Nt.fromString(Ft(this.args[0].evaluate(e))):Ft(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if("formatted"===this.type.kind)return new Yt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Zt(this.args[0]).serialize();const e=["to-"+this.type.kind];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Kt=Jt;const $t=["Unknown","Point","LineString","Polygon"];var Qt=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?$t[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:n,y:i}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(n*t-e[0])+this.featureDistanceData.bearing[1]*(i*t-e[1])}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=At.parse(e)),t}};class en{constructor(e,t,n,i){this.name=e,this.type=t,this._evaluate=n,this.args=i}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,t){const n=e[0],i=en.definitions[n];if(!i)return t.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const r=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,o=a.filter(([t])=>!Array.isArray(t)||t.length===e.length-1);let s=null;for(const[i,a]of o){s=new Sn(t.registry,t.path,null,t.scope);const o=[];let l=!1;for(let t=1;t<e.length;t++){const n=e[t],r=Array.isArray(i)?i[t-1]:i.type,a=s.parse(n,1+o.length,r);if(!a){l=!0;break}o.push(a)}if(!l)if(Array.isArray(i)&&i.length!==o.length)s.error(`Expected ${i.length} arguments, but found ${o.length} instead.`);else{for(let e=0;e<o.length;e++){const t=Array.isArray(i)?i[e]:i.type,n=o[e];s.concat(e+1).checkSubtype(t,n.type)}if(0===s.errors.length)return new en(n,r,a,o)}}if(1===o.length)t.errors.push(...s.errors);else{const n=(o.length?o:a).map(([e])=>{return t=e,Array.isArray(t)?`(${t.map(_t).join(", ")})`:`(${_t(t.type)}...)`;var t}).join(" | "),i=[];for(let n=1;n<e.length;n++){const r=t.parse(e[n],1+i.length);if(!r)return null;i.push(_t(r.type))}t.error(`Expected arguments of type ${n}, but found (${i.join(", ")}) instead.`)}return null}static register(e,t){en.definitions=t;for(const n in t)e[n]=en}}var tn=en;class nn{constructor(e,t,n){this.type=gt,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");const i=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,pt);if(!i)return null;const r=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,pt);if(!r)return null;let a=null;return n.locale&&(a=t.parse(n.locale,1,dt),!a)?null:new nn(i,r,a)}evaluate(e){return new jt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const rn=8192;function an(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function on(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function sn(e,t){const n=(180+e[0])/360,i=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,r=Math.pow(2,t.z);return[Math.round(n*r*rn),Math.round(i*r*rn)]}function ln(e,t,n){const i=e[0]-t[0],r=e[1]-t[1],a=e[0]-n[0],o=e[1]-n[1];return i*o-a*r==0&&i*a<=0&&r*o<=0}function cn(e,t){let n=!1;for(let o=0,s=t.length;o<s;o++){const s=t[o];for(let t=0,o=s.length;t<o-1;t++){if(ln(e,s[t],s[t+1]))return!1;(r=s[t])[1]>(i=e)[1]!=(a=s[t+1])[1]>i[1]&&i[0]<(a[0]-r[0])*(i[1]-r[1])/(a[1]-r[1])+r[0]&&(n=!n)}}var i,r,a;return n}function un(e,t){for(let n=0;n<t.length;n++)if(cn(e,t[n]))return!0;return!1}function dn(e,t,n,i){const r=i[0]-n[0],a=i[1]-n[1],o=(e[0]-n[0])*a-r*(e[1]-n[1]),s=(t[0]-n[0])*a-r*(t[1]-n[1]);return o>0&&s<0||o<0&&s>0}function pn(e,t,n){for(const c of n)for(let n=0;n<c.length-1;++n)if(0!=(s=[(o=c[n+1])[0]-(a=c[n])[0],o[1]-a[1]])[0]*(l=[(r=t)[0]-(i=e)[0],r[1]-i[1]])[1]-s[1]*l[0]&&dn(i,r,a,o)&&dn(a,o,i,r))return!0;var i,r,a,o,s,l;return!1}function fn(e,t){for(let n=0;n<e.length;++n)if(!cn(e[n],t))return!1;for(let n=0;n<e.length-1;++n)if(pn(e[n],e[n+1],t))return!1;return!0}function mn(e,t){for(let n=0;n<t.length;n++)if(fn(e,t[n]))return!0;return!1}function hn(e,t,n){const i=[];for(let r=0;r<e.length;r++){const a=[];for(let i=0;i<e[r].length;i++){const o=sn(e[r][i],n);an(t,o),a.push(o)}i.push(a)}return i}function gn(e,t,n){const i=[];for(let r=0;r<e.length;r++){const a=hn(e[r],t,n);i.push(a)}return i}function yn(e,t,n,i){if(e[0]<n[0]||e[0]>n[2]){const t=.5*i;let r=e[0]-n[0]>t?-i:n[0]-e[0]>t?i:0;0===r&&(r=e[0]-n[2]>t?-i:n[2]-e[0]>t?i:0),e[0]+=r}an(t,e)}function vn(e,t,n,i){const r=Math.pow(2,i.z)*rn,a=[i.x*rn,i.y*rn],o=[];if(!e)return o;for(const i of e)for(const e of i){const i=[e.x+a[0],e.y+a[1]];yn(i,t,n,r),o.push(i)}return o}function bn(e,t,n,i){const r=Math.pow(2,i.z)*rn,a=[i.x*rn,i.y*rn],o=[];if(!e)return o;for(const n of e){const e=[];for(const i of n){const n=[i.x+a[0],i.y+a[1]];an(t,n),e.push(n)}o.push(e)}if(t[2]-t[0]<=r/2){(s=t)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const e of o)for(const i of e)yn(i,t,n,r)}var s;return o}class _n{constructor(e,t){this.type=pt,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Bt(e[1])){const t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const n=t.features[e].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new _n(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new _n(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new _n(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=e.canonicalID();if(!r)return!1;if("Polygon"===t.type){const a=hn(t.coordinates,i,r),o=vn(e.geometry(),n,i,r);if(!on(n,i))return!1;for(const e of o)if(!cn(e,a))return!1}if("MultiPolygon"===t.type){const a=gn(t.coordinates,i,r),o=vn(e.geometry(),n,i,r);if(!on(n,i))return!1;for(const e of o)if(!un(e,a))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=e.canonicalID();if(!r)return!1;if("Polygon"===t.type){const a=hn(t.coordinates,i,r),o=bn(e.geometry(),n,i,r);if(!on(n,i))return!1;for(const e of o)if(!fn(e,a))return!1}if("MultiPolygon"===t.type){const a=gn(t.coordinates,i,r),o=bn(e.geometry(),n,i,r);if(!on(n,i))return!1;for(const e of o)if(!mn(e,a))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var wn=_n;function xn(e){if(e instanceof tn){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof wn)return!1;let t=!0;return e.eachChild(e=>{t&&!xn(e)&&(t=!1)}),t}function kn(e){if(e instanceof tn&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild(e=>{t&&!kn(e)&&(t=!1)}),t}function On(e,t){if(e instanceof tn&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild(e=>{n&&!On(e,t)&&(n=!1)}),n}class En{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const n=e[1];return t.scope.has(n)?new En(n,t.scope.get(n)):t.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Tn=En;class Cn{constructor(e,t=[],n,i=new lt,r=[]){this.registry=e,this.path=t,this.key=t.map(e=>`[${e}]`).join(""),this.scope=i,this.errors=r,this.expectedType=n}parse(e,t,n,i,r={}){return t?this.concat(t,n,i)._parse(e,r):this._parse(e,r)}_parse(e,t){function n(e,t,n){return"assert"===n?new Gt(t,[e]):"coerce"===n?new Kt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=e[0];if("string"!=typeof i)return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const r=this.registry[i];if(r){let i=r.parse(e,this);if(!i)return null;if(this.expectedType){const e=this.expectedType,r=i.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==r.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==r.kind&&"string"!==r.kind){if(this.checkSubtype(e,r))return null}else i=n(i,e,t.typeAnnotation||"coerce");else i=n(i,e,t.typeAnnotation||"assert")}if(!(i instanceof Ht)&&"resolvedImage"!==i.type.kind&&function e(t){if(t instanceof Tn)return e(t.boundExpression);if(t instanceof tn&&"error"===t.name)return!1;if(t instanceof nn)return!1;if(t instanceof wn)return!1;const n=t instanceof Kt||t instanceof Gt;let i=!0;return t.eachChild(t=>{i=n?i&&e(t):i&&t instanceof Ht}),!!i&&xn(t)&&On(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}(i)){const t=new Qt;try{i=new Ht(i.type,i.evaluate(t))}catch(e){return this.error(e.message),null}}return i}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,t,n){const i="number"==typeof e?this.path.concat(e):this.path,r=n?this.scope.concat(n):this.scope;return new Cn(this.registry,i,t||null,r,this.errors)}error(e,...t){const n=`${this.key}${t.map(e=>`[${e}]`).join("")}`;this.errors.push(new ot(n,e))}checkSubtype(e,t){const n=xt(e,t);return n&&this.error(n),n}}var Sn=Cn;function Pn(e,t){const n=e.length-1;let i,r,a=0,o=n,s=0;for(;a<=o;)if(s=Math.floor((a+o)/2),i=e[s],r=e[s+1],i<=t){if(s===n||t<r)return s;a=s+1}else{if(!(i>t))throw new Wt("Input is not a number.");o=s-1}return 0}class Mn{constructor(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[e,t]of n)this.labels.push(e),this.outputs.push(t)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const n=t.parse(e[1],1,ut);if(!n)return null;const i=[];let r=null;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(let n=1;n<e.length;n+=2){const a=1===n?-1/0:e[n],o=e[n+1],s=n,l=n+1;if("number"!=typeof a)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(i.length&&i[i.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=t.parse(o,l,r);if(!c)return null;r=r||c.type,i.push([a,c])}return new Mn(r,n,i)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return n[0].evaluate(e);const r=t.length;return i>=t[r-1]?n[r-1].evaluate(e):n[Pn(t,i)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var In=Mn;function An(e,t,n){return e*(1-n)+t*n}var jn=Object.freeze({__proto__:null,array:function(e,t,n){return e.map((e,i)=>An(e,t[i],n))},color:function(e,t,n){return new At(An(e.r,t.r,n),An(e.g,t.g,n),An(e.b,t.b,n),An(e.a,t.a,n))},number:An});const Ln=6/29,Rn=3*Ln*Ln,Nn=Math.PI/180,Dn=180/Math.PI;function Bn(e){return e>.008856451679035631?Math.pow(e,1/3):e/Rn+4/29}function zn(e){return e>Ln?e*e*e:Rn*(e-4/29)}function Fn(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Un(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Hn(e){const t=Un(e.r),n=Un(e.g),i=Un(e.b),r=Bn((.4124564*t+.3575761*n+.1804375*i)/.95047),a=Bn((.2126729*t+.7151522*n+.072175*i)/1);return{l:116*a-16,a:500*(r-a),b:200*(a-Bn((.0193339*t+.119192*n+.9503041*i)/1.08883)),alpha:e.a}}function Wn(e){let t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,i=isNaN(e.b)?t:t-e.b/200;return t=1*zn(t),n=.95047*zn(n),i=1.08883*zn(i),new At(Fn(3.2404542*n-1.5371385*t-.4985314*i),Fn(-.969266*n+1.8760108*t+.041556*i),Fn(.0556434*n-.2040259*t+1.0572252*i),e.alpha)}function qn(e,t,n){const i=t-e;return e+n*(i>180||i<-180?i-360*Math.round(i/360):i)}const Vn={forward:Hn,reverse:Wn,interpolate:function(e,t,n){return{l:An(e.l,t.l,n),a:An(e.a,t.a,n),b:An(e.b,t.b,n),alpha:An(e.alpha,t.alpha,n)}}},Gn={forward:function(e){const{l:t,a:n,b:i}=Hn(e),r=Math.atan2(i,n)*Dn;return{h:r<0?r+360:r,c:Math.sqrt(n*n+i*i),l:t,alpha:e.a}},reverse:function(e){const t=e.h*Nn,n=e.c;return Wn({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:qn(e.h,t.h,n),c:An(e.c,t.c,n),l:An(e.l,t.l,n),alpha:An(e.alpha,t.alpha,n)}}};var Yn=Object.freeze({__proto__:null,hcl:Gn,lab:Vn});class Zn{constructor(e,t,n,i,r){this.type=e,this.operator=t,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(const[e,t]of r)this.labels.push(e),this.outputs.push(t)}static interpolationFactor(e,t,n,i){let r=0;if("exponential"===e.name)r=Xn(t,e.base,n,i);else if("linear"===e.name)r=Xn(t,1,n,i);else if("cubic-bezier"===e.name){const a=e.controlPoints;r=new g(a[0],a[1],a[2],a[3]).solve(Xn(t,1,n,i))}return r}static parse(e,t){let[n,i,r,...a]=e;if(!Array.isArray(i)||0===i.length)return t.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){const e=i[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:e}}else{if("cubic-bezier"!==i[0])return t.error("Unknown interpolation type "+String(i[0]),1,0);{const e=i.slice(1);if(4!==e.length||e.some(e=>"number"!=typeof e||e<0||e>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(r=t.parse(r,2,ut),!r)return null;const o=[];let s=null;"interpolate-hcl"===n||"interpolate-lab"===n?s=ft:t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let e=0;e<a.length;e+=2){const n=a[e],i=a[e+1],r=e+3,l=e+4;if("number"!=typeof n)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(o.length&&o[o.length-1][0]>=n)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const c=t.parse(i,l,s);if(!c)return null;s=s||c.type,o.push([n,c])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new Zn(s,n,i,r,o):t.error(`Type ${_t(s)} is not interpolatable.`)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const i=this.input.evaluate(e);if(i<=t[0])return n[0].evaluate(e);const r=t.length;if(i>=t[r-1])return n[r-1].evaluate(e);const a=Pn(t,i),o=Zn.interpolationFactor(this.interpolation,i,t[a],t[a+1]),s=n[a].evaluate(e),l=n[a+1].evaluate(e);return"interpolate"===this.operator?jn[this.type.kind.toLowerCase()](s,l,o):"interpolate-hcl"===this.operator?Gn.reverse(Gn.interpolate(Gn.forward(s),Gn.forward(l),o)):Vn.reverse(Vn.interpolate(Vn.forward(s),Vn.forward(l),o))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let e=0;e<this.labels.length;e++)t.push(this.labels[e],this.outputs[e].serialize());return t}}function Xn(e,t,n,i){const r=i-n,a=e-n;return 0===r?0:1===t?a/r:(Math.pow(t,a)-1)/(Math.pow(t,r)-1)}var Jn=Zn;class Kn{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let n=null;const i=t.expectedType;i&&"value"!==i.kind&&(n=i);const r=[];for(const i of e.slice(1)){const e=t.parse(i,1+r.length,n,void 0,{typeAnnotation:"omit"});if(!e)return null;n=n||e.type,r.push(e)}const a=i&&r.some(e=>xt(i,e.type));return new Kn(a?ht:n,r)}evaluate(e){let t,n=null,i=0;for(const r of this.args){if(i++,n=r.evaluate(e),n&&n instanceof Nt&&!n.available&&(t||(t=n),n=null,i===this.args.length))return t;if(null!==n)break}return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var $n=Kn;class Qn{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const n=[];for(let i=1;i<e.length-1;i+=2){const r=e[i];if("string"!=typeof r)return t.error(`Expected string, but found ${typeof r} instead.`,i);if(/[^a-zA-Z0-9_]/.test(r))return t.error("Variable names must contain only alphanumeric characters or '_'.",i);const a=t.parse(e[i+1],i+1);if(!a)return null;n.push([r,a])}const i=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return i?new Qn(n,i):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,n]of this.bindings)e.push(t,n.serialize());return e.push(this.result.serialize()),e}}var ei=Qn;class ti{constructor(e,t,n){this.type=e,this.index=t,this.input=n}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,ut),i=t.parse(e[2],2,bt(t.expectedType||ht));return n&&i?new ti(i.type.itemType,n,i):null}evaluate(e){const t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new Wt(`Array index out of bounds: ${t} < 0.`);if(t>=n.length)throw new Wt(`Array index out of bounds: ${t} > ${n.length-1}.`);if(t!==Math.floor(t))throw new Wt(`Array index must be an integer, but found ${t} instead.`);return n[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var ni=ti;class ii{constructor(e,t){this.type=pt,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,ht),i=t.parse(e[2],2,ht);return n&&i?kt(n.type,[pt,dt,ut,ct,ht])?new ii(n,i):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${_t(n.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(null==n)return!1;if(!Ot(t,["boolean","string","number","null"]))throw new Wt(`Expected first argument to be of type boolean, string, number or null, but found ${_t(zt(t))} instead.`);if(!Ot(n,["string","array"]))throw new Wt(`Expected second argument to be of type array or string, but found ${_t(zt(n))} instead.`);return n.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var ri=ii;class ai{constructor(e,t,n){this.type=ut,this.needle=e,this.haystack=t,this.fromIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,ht),i=t.parse(e[2],2,ht);if(!n||!i)return null;if(!kt(n.type,[pt,dt,ut,ct,ht]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${_t(n.type)} instead`);if(4===e.length){const r=t.parse(e[3],3,ut);return r?new ai(n,i,r):null}return new ai(n,i)}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!Ot(t,["boolean","string","number","null"]))throw new Wt(`Expected first argument to be of type boolean, string, number or null, but found ${_t(zt(t))} instead.`);if(!Ot(n,["string","array"]))throw new Wt(`Expected second argument to be of type array or string, but found ${_t(zt(n))} instead.`);if(this.fromIndex){const i=this.fromIndex.evaluate(e);return n.indexOf(t,i)}return n.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var oi=ai;class si{constructor(e,t,n,i,r,a){this.inputType=e,this.type=t,this.input=n,this.cases=i,this.outputs=r,this.otherwise=a}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let n,i;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);const r={},a=[];for(let o=2;o<e.length-1;o+=2){let s=e[o];const l=e[o+1];Array.isArray(s)||(s=[s]);const c=t.concat(o);if(0===s.length)return c.error("Expected at least one branch label.");for(const e of s){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,zt(e)))return null}else n=zt(e);if(void 0!==r[String(e)])return c.error("Branch labels must be unique.");r[String(e)]=a.length}const u=t.parse(l,o,i);if(!u)return null;i=i||u.type,a.push(u)}const o=t.parse(e[1],1,ht);if(!o)return null;const s=t.parse(e[e.length-1],e.length-1,i);return s?"value"!==o.type.kind&&t.concat(1).checkSubtype(n,o.type)?null:new si(n,i,o,r,a,s):null}evaluate(e){const t=this.input.evaluate(e);return(zt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),n=[],i={};for(const e of t){const t=i[this.cases[e]];void 0===t?(i[this.cases[e]]=n.length,n.push([this.cases[e],[e]])):n[t][1].push(e)}const r=e=>"number"===this.inputType.kind?Number(e):e;for(const[t,i]of n)e.push(1===i.length?r(i[0]):i.map(r)),e.push(this.outputs[t].serialize());return e.push(this.otherwise.serialize()),e}}var li=si;class ci{constructor(e,t,n){this.type=e,this.branches=t,this.otherwise=n}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const i=[];for(let r=1;r<e.length-1;r+=2){const a=t.parse(e[r],r,pt);if(!a)return null;const o=t.parse(e[r+1],r+1,n);if(!o)return null;i.push([a,o]),n=n||o.type}const r=t.parse(e[e.length-1],e.length-1,n);return r?new ci(n,i,r):null}evaluate(e){for(const[t,n]of this.branches)if(t.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,n]of this.branches)e(t),e(n);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var ui=ci;class di{constructor(e,t,n,i){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,ht),i=t.parse(e[2],2,ut);if(!n||!i)return null;if(!kt(n.type,[bt(ht),dt,ht]))return t.error(`Expected first argument to be of type array or string, but found ${_t(n.type)} instead`);if(4===e.length){const r=t.parse(e[3],3,ut);return r?new di(n.type,n,i,r):null}return new di(n.type,n,i)}evaluate(e){const t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!Ot(t,["string","array"]))throw new Wt(`Expected first argument to be of type array or string, but found ${_t(zt(t))} instead.`);if(this.endIndex){const i=this.endIndex.evaluate(e);return t.slice(n,i)}return t.slice(n)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var pi=di;function fi(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function mi(e,t,n,i){return 0===i.compare(t,n)}function hi(e,t,n){const i="=="!==e&&"!="!==e;return class r{constructor(e,t,n){this.type=pt,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const n=e[0];let a=t.parse(e[1],1,ht);if(!a)return null;if(!fi(n,a.type))return t.concat(1).error(`"${n}" comparisons are not supported for type '${_t(a.type)}'.`);let o=t.parse(e[2],2,ht);if(!o)return null;if(!fi(n,o.type))return t.concat(2).error(`"${n}" comparisons are not supported for type '${_t(o.type)}'.`);if(a.type.kind!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error(`Cannot compare types '${_t(a.type)}' and '${_t(o.type)}'.`);i&&("value"===a.type.kind&&"value"!==o.type.kind?a=new Gt(o.type,[a]):"value"!==a.type.kind&&"value"===o.type.kind&&(o=new Gt(a.type,[o])));let s=null;if(4===e.length){if("string"!==a.type.kind&&"string"!==o.type.kind&&"value"!==a.type.kind&&"value"!==o.type.kind)return t.error("Cannot use collator to compare non-string types.");if(s=t.parse(e[3],3,gt),!s)return null}return new r(a,o,s)}evaluate(r){const a=this.lhs.evaluate(r),o=this.rhs.evaluate(r);if(i&&this.hasUntypedArgument){const t=zt(a),n=zt(o);if(t.kind!==n.kind||"string"!==t.kind&&"number"!==t.kind)throw new Wt(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${n.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const e=zt(a),n=zt(o);if("string"!==e.kind||"string"!==n.kind)return t(r,a,o)}return this.collator?n(r,a,o,this.collator.evaluate(r)):t(r,a,o)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}serialize(){const t=[e];return this.eachChild(e=>{t.push(e.serialize())}),t}}}const gi=hi("==",(function(e,t,n){return t===n}),mi),yi=hi("!=",(function(e,t,n){return t!==n}),(function(e,t,n,i){return!mi(0,t,n,i)})),vi=hi("<",(function(e,t,n){return t<n}),(function(e,t,n,i){return i.compare(t,n)<0})),bi=hi(">",(function(e,t,n){return t>n}),(function(e,t,n,i){return i.compare(t,n)>0})),_i=hi("<=",(function(e,t,n){return t<=n}),(function(e,t,n,i){return i.compare(t,n)<=0})),wi=hi(">=",(function(e,t,n){return t>=n}),(function(e,t,n,i){return i.compare(t,n)>=0}));class xi{constructor(e,t,n,i,r,a){this.type=dt,this.number=e,this.locale=t,this.currency=n,this.unit=i,this.minFractionDigits=r,this.maxFractionDigits=a}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,ut);if(!n)return null;const i=e[2];if("object"!=typeof i||Array.isArray(i))return t.error("NumberFormat options argument must be an object.");let r=null;if(i.locale&&(r=t.parse(i.locale,1,dt),!r))return null;let a=null;if(i.currency&&(a=t.parse(i.currency,1,dt),!a))return null;let o=null;if(i.unit&&(o=t.parse(i.unit,1,dt),!o))return null;let s=null;if(i["min-fraction-digits"]&&(s=t.parse(i["min-fraction-digits"],1,ut),!s))return null;let l=null;return i["max-fraction-digits"]&&(l=t.parse(i["max-fraction-digits"],1,ut),!l)?null:new xi(n,r,a,o,s,l)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class ki{constructor(e){this.type=ut,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error(`Expected argument of type string or array, but found ${_t(n.type)} instead.`):new ki(n):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new Wt(`Expected value to be of type string or array, but found ${_t(zt(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(t=>{e.push(t.serialize())}),e}}const Oi={"==":gi,"!=":yi,">":bi,"<":vi,">=":wi,"<=":_i,array:Gt,at:ni,boolean:Gt,case:ui,coalesce:$n,collator:nn,format:Yt,image:Zt,in:ri,"index-of":oi,interpolate:Jn,"interpolate-hcl":Jn,"interpolate-lab":Jn,length:ki,let:ei,literal:Ht,match:li,number:Gt,"number-format":xi,object:Gt,slice:pi,step:In,string:Gt,"to-boolean":Kt,"to-color":Kt,"to-number":Kt,"to-string":Kt,var:Tn,within:wn};function Ei(e,[t,n,i,r]){t=t.evaluate(e),n=n.evaluate(e),i=i.evaluate(e);const a=r?r.evaluate(e):1,o=Dt(t,n,i,a);if(o)throw new Wt(o);return new At(t/255*a,n/255*a,i/255*a,a)}function Ti(e,t){return e in t}function Ci(e,t){const n=t[e];return void 0===n?null:n}function Si(e){return{type:e}}tn.register(Oi,{error:[{kind:"error"},[dt],(e,[t])=>{throw new Wt(t.evaluate(e))}],typeof:[dt,[ht],(e,[t])=>_t(zt(t.evaluate(e)))],"to-rgba":[bt(ut,4),[ft],(e,[t])=>t.evaluate(e).toArray()],rgb:[ft,[ut,ut,ut],Ei],rgba:[ft,[ut,ut,ut,ut],Ei],has:{type:pt,overloads:[[[dt],(e,[t])=>Ti(t.evaluate(e),e.properties())],[[dt,mt],(e,[t,n])=>Ti(t.evaluate(e),n.evaluate(e))]]},get:{type:ht,overloads:[[[dt],(e,[t])=>Ci(t.evaluate(e),e.properties())],[[dt,mt],(e,[t,n])=>Ci(t.evaluate(e),n.evaluate(e))]]},"feature-state":[ht,[dt],(e,[t])=>Ci(t.evaluate(e),e.featureState||{})],properties:[mt,[],e=>e.properties()],"geometry-type":[dt,[],e=>e.geometryType()],id:[ht,[],e=>e.id()],zoom:[ut,[],e=>e.globals.zoom],pitch:[ut,[],e=>e.globals.pitch||0],"distance-from-center":[ut,[],e=>e.distanceFromCenter()],"heatmap-density":[ut,[],e=>e.globals.heatmapDensity||0],"line-progress":[ut,[],e=>e.globals.lineProgress||0],"sky-radial-progress":[ut,[],e=>e.globals.skyRadialProgress||0],accumulated:[ht,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[ut,Si(ut),(e,t)=>{let n=0;for(const i of t)n+=i.evaluate(e);return n}],"*":[ut,Si(ut),(e,t)=>{let n=1;for(const i of t)n*=i.evaluate(e);return n}],"-":{type:ut,overloads:[[[ut,ut],(e,[t,n])=>t.evaluate(e)-n.evaluate(e)],[[ut],(e,[t])=>-t.evaluate(e)]]},"/":[ut,[ut,ut],(e,[t,n])=>t.evaluate(e)/n.evaluate(e)],"%":[ut,[ut,ut],(e,[t,n])=>t.evaluate(e)%n.evaluate(e)],ln2:[ut,[],()=>Math.LN2],pi:[ut,[],()=>Math.PI],e:[ut,[],()=>Math.E],"^":[ut,[ut,ut],(e,[t,n])=>Math.pow(t.evaluate(e),n.evaluate(e))],sqrt:[ut,[ut],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[ut,[ut],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[ut,[ut],(e,[t])=>Math.log(t.evaluate(e))],log2:[ut,[ut],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[ut,[ut],(e,[t])=>Math.sin(t.evaluate(e))],cos:[ut,[ut],(e,[t])=>Math.cos(t.evaluate(e))],tan:[ut,[ut],(e,[t])=>Math.tan(t.evaluate(e))],asin:[ut,[ut],(e,[t])=>Math.asin(t.evaluate(e))],acos:[ut,[ut],(e,[t])=>Math.acos(t.evaluate(e))],atan:[ut,[ut],(e,[t])=>Math.atan(t.evaluate(e))],min:[ut,Si(ut),(e,t)=>Math.min(...t.map(t=>t.evaluate(e)))],max:[ut,Si(ut),(e,t)=>Math.max(...t.map(t=>t.evaluate(e)))],abs:[ut,[ut],(e,[t])=>Math.abs(t.evaluate(e))],round:[ut,[ut],(e,[t])=>{const n=t.evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[ut,[ut],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[ut,[ut],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[pt,[dt,ht],(e,[t,n])=>e.properties()[t.value]===n.value],"filter-id-==":[pt,[ht],(e,[t])=>e.id()===t.value],"filter-type-==":[pt,[dt],(e,[t])=>e.geometryType()===t.value],"filter-<":[pt,[dt,ht],(e,[t,n])=>{const i=e.properties()[t.value],r=n.value;return typeof i==typeof r&&i<r}],"filter-id-<":[pt,[ht],(e,[t])=>{const n=e.id(),i=t.value;return typeof n==typeof i&&n<i}],"filter->":[pt,[dt,ht],(e,[t,n])=>{const i=e.properties()[t.value],r=n.value;return typeof i==typeof r&&i>r}],"filter-id->":[pt,[ht],(e,[t])=>{const n=e.id(),i=t.value;return typeof n==typeof i&&n>i}],"filter-<=":[pt,[dt,ht],(e,[t,n])=>{const i=e.properties()[t.value],r=n.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[pt,[ht],(e,[t])=>{const n=e.id(),i=t.value;return typeof n==typeof i&&n<=i}],"filter->=":[pt,[dt,ht],(e,[t,n])=>{const i=e.properties()[t.value],r=n.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[pt,[ht],(e,[t])=>{const n=e.id(),i=t.value;return typeof n==typeof i&&n>=i}],"filter-has":[pt,[ht],(e,[t])=>t.value in e.properties()],"filter-has-id":[pt,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[pt,[bt(dt)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[pt,[bt(ht)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[pt,[dt,bt(ht)],(e,[t,n])=>n.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[pt,[dt,bt(ht)],(e,[t,n])=>function(e,t,n,i){for(;n<=i;){const r=n+i>>1;if(t[r]===e)return!0;t[r]>e?i=r-1:n=r+1}return!1}(e.properties()[t.value],n.value,0,n.value.length-1)],all:{type:pt,overloads:[[[pt,pt],(e,[t,n])=>t.evaluate(e)&&n.evaluate(e)],[Si(pt),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:pt,overloads:[[[pt,pt],(e,[t,n])=>t.evaluate(e)||n.evaluate(e)],[Si(pt),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[pt,[pt],(e,[t])=>!t.evaluate(e)],"is-supported-script":[pt,[dt],(e,[t])=>{const n=e.globals&&e.globals.isSupportedScript;return!n||n(t.evaluate(e))}],upcase:[dt,[dt],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[dt,[dt],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[dt,Si(ht),(e,t)=>t.map(t=>Ft(t.evaluate(e))).join("")],"resolved-locale":[dt,[gt],(e,[t])=>t.evaluate(e).resolvedLocale()]});var Pi=Oi;function Mi(e){return{result:"success",value:e}}function Ii(e){return{result:"error",value:e}}function Ai(e){return"data-driven"===e["property-type"]}function ji(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Li(e){return!!e.expression&&e.expression.interpolated}function Ri(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Ni(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Di(e){return e}function Bi(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function zi(e,t,n,i,r){return Bi(typeof n===r?i[n]:void 0,e.default,t.default)}function Fi(e,t,n){if("number"!==Ri(n))return Bi(e.default,t.default);const i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];const r=Pn(e.stops.map(e=>e[0]),n);return e.stops[r][1]}function Ui(e,t,n){const i=void 0!==e.base?e.base:1;if("number"!==Ri(n))return Bi(e.default,t.default);const r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];const a=Pn(e.stops.map(e=>e[0]),n),o=function(e,t,n,i){const r=i-n,a=e-n;return 0===r?0:1===t?a/r:(Math.pow(t,a)-1)/(Math.pow(t,r)-1)}(n,i,e.stops[a][0],e.stops[a+1][0]),s=e.stops[a][1],l=e.stops[a+1][1];let c=jn[t.type]||Di;if(e.colorSpace&&"rgb"!==e.colorSpace){const t=Yn[e.colorSpace];c=(e,n)=>t.reverse(t.interpolate(t.forward(e),t.forward(n),o))}return"function"==typeof s.evaluate?{evaluate(...e){const t=s.evaluate.apply(void 0,e),n=l.evaluate.apply(void 0,e);if(void 0!==t&&void 0!==n)return c(t,n,o)}}:c(s,l,o)}function Hi(e,t,n){return"color"===t.type?n=At.parse(n):"formatted"===t.type?n=Rt.fromString(n.toString()):"resolvedImage"===t.type?n=Nt.fromString(n.toString()):Ri(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),Bi(n,e.default,t.default)}class Wi{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Qt,this._defaultValue=t?function(e){return"color"===e.type&&(Ni(e.default)||Array.isArray(e.default))?new At(0,0,0,0):"color"===e.type?At.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,n,i,r,a,o,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=i||null,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=a,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,n,i,r,a,o,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i||null,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=a||null,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=s||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new Wt(`Expected value to be one of ${Object.keys(this._enumValues).map(e=>JSON.stringify(e)).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function qi(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Pi}function Vi(e,t){const n=new Sn(Pi,[],t?function(e){const t={color:ft,string:dt,number:ut,enum:dt,boolean:pt,formatted:yt,resolvedImage:vt};return"array"===e.type?bt(t[e.value]||ht,e.length):t[e.type]}(t):void 0),i=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return i?Mi(new Wi(i,t)):Ii(n.errors)}class Gi{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!kn(t.expression)}evaluateWithoutErrorHandling(e,t,n,i,r,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,i,r,a)}evaluate(e,t,n,i,r,a){return this._styleExpression.evaluate(e,t,n,i,r,a)}}class Yi{constructor(e,t,n,i){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent="camera"!==e&&!kn(t.expression),this.interpolationType=i}evaluateWithoutErrorHandling(e,t,n,i,r,a){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,i,r,a)}evaluate(e,t,n,i,r,a){return this._styleExpression.evaluate(e,t,n,i,r,a)}interpolationFactor(e,t,n){return this.interpolationType?Jn.interpolationFactor(this.interpolationType,e,t,n):0}}function Zi(e,t){if("error"===(e=Vi(e,t)).result)return e;const n=e.value.expression,i=xn(n);if(!i&&!Ai(t))return Ii([new ot("","data expressions not supported")]);const r=On(n,["zoom","pitch","distance-from-center"]);if(!r&&!ji(t))return Ii([new ot("","zoom expressions not supported")]);const a=function e(t){let n=null;if(t instanceof ei)n=e(t.result);else if(t instanceof $n){for(const i of t.args)if(n=e(i),n)break}else(t instanceof In||t instanceof Jn)&&t.input instanceof tn&&"zoom"===t.input.name&&(n=t);return n instanceof ot||t.eachChild(t=>{const i=e(t);i instanceof ot?n=i:!n&&i?n=new ot("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&i&&n!==i&&(n=new ot("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}(n);return a||r?a instanceof ot?Ii([a]):a instanceof Jn&&!Li(t)?Ii([new ot("",'"interpolate" expressions cannot be used with this property')]):Mi(a?new Yi(i?"camera":"composite",e.value,a.labels,a instanceof Jn?a.interpolation:void 0):new Gi(i?"constant":"source",e.value)):Ii([new ot("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Xi{constructor(e,t){this._parameters=e,this._specification=t,nt(this,function e(t,n){const i="color"===n.type,r=t.stops&&"object"==typeof t.stops[0][0],a=r||!(r||void 0!==t.property),o=t.type||(Li(n)?"exponential":"interval");if(i&&((t=nt({},t)).stops&&(t.stops=t.stops.map(e=>[e[0],At.parse(e[1])])),t.default=At.parse(t.default?t.default:n.default)),t.colorSpace&&"rgb"!==t.colorSpace&&!Yn[t.colorSpace])throw new Error("Unknown color space: "+t.colorSpace);let s,l,c;if("exponential"===o)s=Ui;else if("interval"===o)s=Fi;else if("categorical"===o){s=zi,l=Object.create(null);for(const e of t.stops)l[e[0]]=e[1];c=typeof t.stops[0][0]}else{if("identity"!==o)throw new Error(`Unknown function type "${o}"`);s=Hi}if(r){const i={},r=[];for(let e=0;e<t.stops.length;e++){const n=t.stops[e],a=n[0].zoom;void 0===i[a]&&(i[a]={zoom:a,type:t.type,property:t.property,default:t.default,stops:[]},r.push(a)),i[a].stops.push([n[0].value,n[1]])}const a=[];for(const t of r)a.push([i[t].zoom,e(i[t],n)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:Jn.interpolationFactor.bind(void 0,o),zoomStops:a.map(e=>e[0]),evaluate:({zoom:e},i)=>Ui({stops:a,base:t.base},n,e).evaluate(e,i)}}if(a){const e="exponential"===o?{name:"exponential",base:void 0!==t.base?t.base:1}:null;return{kind:"camera",interpolationType:e,interpolationFactor:Jn.interpolationFactor.bind(void 0,e),zoomStops:t.stops.map(e=>e[0]),evaluate:({zoom:e})=>s(t,n,e,l,c)}}return{kind:"source",evaluate(e,i){const r=i&&i.properties?i.properties[t.property]:void 0;return void 0===r?Bi(t.default,n.default):s(t,n,r,l,c)}}}(this._parameters,this._specification))}static deserialize(e){return new Xi(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}class Ji{constructor(e,t,n,i){this.message=(e?e+": ":"")+n,i&&(this.identifier=i),null!=t&&t.__line__&&(this.line=t.__line__)}}function Ki(e){const t=e.key,n=e.value,i=e.valueSpec||{},r=e.objectElementValidators||{},a=e.style,o=e.styleSpec;let s=[];const l=Ri(n);if("object"!==l)return[new Ji(t,n,`object expected, ${l} found`)];for(const e in n){const l=e.split(".")[0];let c;r[l]?c=r[l]:i[l]?c=Cr:r["*"]?c=r["*"]:i["*"]&&(c=Cr),c?s=s.concat(c({key:(t?t+".":t)+e,value:n[e],valueSpec:i[l]||i["*"],style:a,styleSpec:o,object:n,objectKey:e},n)):s.push(new Ji(t,n[e],`unknown property "${e}"`))}for(const e in i)r[e]||i[e].required&&void 0===i[e].default&&void 0===n[e]&&s.push(new Ji(t,n,`missing required property "${e}"`));return s}function $i(e){const t=e.value,n=e.valueSpec,i=e.style,r=e.styleSpec,a=e.key,o=e.arrayElementValidator||Cr;if("array"!==Ri(t))return[new Ji(a,t,`array expected, ${Ri(t)} found`)];if(n.length&&t.length!==n.length)return[new Ji(a,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new Ji(a,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum,function:void 0};r.$version<7&&(s.function=n.function),"object"===Ri(n.value)&&(s=n.value);let l=[];for(let e=0;e<t.length;e++)l=l.concat(o({array:t,arrayIndex:e,value:t[e],valueSpec:s,style:i,styleSpec:r,key:`${a}[${e}]`}));return l}function Qi(e){const t=e.key,n=e.value,i=e.valueSpec;let r=Ri(n);if("number"===r&&n!=n&&(r="NaN"),"number"!==r)return[new Ji(t,n,`number expected, ${r} found`)];if("minimum"in i){let r=i.minimum;if("array"===Ri(i.minimum)&&(r=i.minimum[e.arrayIndex]),n<r)return[new Ji(t,n,`${n} is less than the minimum value ${r}`)]}if("maximum"in i){let r=i.maximum;if("array"===Ri(i.maximum)&&(r=i.maximum[e.arrayIndex]),n>r)return[new Ji(t,n,`${n} is greater than the maximum value ${r}`)]}return[]}function er(e){const t=e.valueSpec,n=it(e.value.type);let i,r,a,o={};const s="categorical"!==n&&void 0===e.value.property,l=!s,c="array"===Ri(e.value.stops)&&"array"===Ri(e.value.stops[0])&&"object"===Ri(e.value.stops[0][0]),u=Ki({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===n)return[new Ji(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const i=e.value;return t=t.concat($i({key:e.key,value:i,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:d})),"array"===Ri(i)&&0===i.length&&t.push(new Ji(e.key,i,"array must have at least one stop")),t},default:function(e){return Cr({key:e.key,value:e.value,valueSpec:t,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===n&&s&&u.push(new Ji(e.key,e.value,'missing required property "property"')),"identity"===n||e.value.stops||u.push(new Ji(e.key,e.value,'missing required property "stops"')),"exponential"===n&&e.valueSpec.expression&&!Li(e.valueSpec)&&u.push(new Ji(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(l&&!Ai(e.valueSpec)?u.push(new Ji(e.key,e.value,"property functions not supported")):s&&!ji(e.valueSpec)&&u.push(new Ji(e.key,e.value,"zoom functions not supported"))),"categorical"!==n&&!c||void 0!==e.value.property||u.push(new Ji(e.key,e.value,'"property" property is required')),u;function d(e){let n=[];const i=e.value,s=e.key;if("array"!==Ri(i))return[new Ji(s,i,`array expected, ${Ri(i)} found`)];if(2!==i.length)return[new Ji(s,i,`array length 2 expected, length ${i.length} found`)];if(c){if("object"!==Ri(i[0]))return[new Ji(s,i,`object expected, ${Ri(i[0])} found`)];if(void 0===i[0].zoom)return[new Ji(s,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new Ji(s,i,"object stop key must have value")];const t=it(i[0].zoom);if("number"!=typeof t)return[new Ji(s,i[0].zoom,"stop zoom values must be numbers")];if(a&&a>t)return[new Ji(s,i[0].zoom,"stop zoom values must appear in ascending order")];t!==a&&(a=t,r=void 0,o={}),n=n.concat(Ki({key:s+"[0]",value:i[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:Qi,value:p}}))}else n=n.concat(p({key:s+"[0]",value:i[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},i));return qi(rt(i[1]))?n.concat([new Ji(s+"[1]",i[1],"expressions are not allowed in function stops.")]):n.concat(Cr({key:s+"[1]",value:i[1],valueSpec:t,style:e.style,styleSpec:e.styleSpec}))}function p(e,a){const s=Ri(e.value),l=it(e.value),c=null!==e.value?e.value:a;if(i){if(s!==i)return[new Ji(e.key,c,`${s} stop domain type must match previous stop domain type ${i}`)]}else i=s;if("number"!==s&&"string"!==s&&"boolean"!==s&&"number"!=typeof l&&"string"!=typeof l&&"boolean"!=typeof l)return[new Ji(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){let i=`number expected, ${s} found`;return Ai(t)&&void 0===n&&(i+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ji(e.key,c,i)]}return"categorical"!==n||"number"!==s||"number"==typeof l&&isFinite(l)&&Math.floor(l)===l?"categorical"!==n&&"number"===s&&"number"==typeof l&&"number"==typeof r&&void 0!==r&&l<r?[new Ji(e.key,c,"stop domain values must appear in ascending order")]:(r=l,"categorical"===n&&l in o?[new Ji(e.key,c,"stop domain values must be unique")]:(o[l]=!0,[])):[new Ji(e.key,c,"integer expected, found "+String(l))]}}function tr(e){const t=("property"===e.expressionContext?Zi:Vi)(rt(e.value),e.valueSpec);if("error"===t.result)return t.value.map(t=>new Ji(`${e.key}${t.key}`,e.value,t.message));const n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new Ji(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!kn(n))return[new Ji(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext)return function e(t,n){const i=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(n.valueSpec&&n.valueSpec.expression)for(const e of n.valueSpec.expression.parameters)i.delete(e);if(0===i.size)return[];const r=[];return t instanceof tn&&i.has(t.name)?[new Ji(n.key,n.value,`["${t.name}"] expression is not supported in a filter for a ${n.object.type} layer with id: ${n.object.id}`)]:(t.eachChild(t=>{r.push(...e(t,n))}),r)}(n,e);if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!On(n,["zoom","feature-state"]))return[new Ji(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!xn(n))return[new Ji(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function nr(e){const t=e.key,n=e.value,i=e.valueSpec,r=[];return Array.isArray(i.values)?-1===i.values.indexOf(it(n))&&r.push(new Ji(t,n,`expected one of [${i.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(i.values).indexOf(it(n))&&r.push(new Ji(t,n,`expected one of [${Object.keys(i.values).join(", ")}], ${JSON.stringify(n)} found`)),r}function ir(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!ir(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}function rr(e,t="fill"){if(null==e)return{filter:()=>!0,needGeometry:!1,needFeature:!1};ir(e)||(e=cr(e));const n=e;let i=!0;try{i=function(e){if(!ar(e))return e;let t=rt(e);return function e(t){let n=!1;const i=[];if("case"===t[0]){for(let e=1;e<t.length-1;e+=2)n=n||ar(t[e]),i.push(t[e+1]);i.push(t[t.length-1])}else if("match"===t[0]){n=n||ar(t[1]);for(let e=2;e<t.length-1;e+=2)i.push(t[e+1]);i.push(t[t.length-1])}else if("step"===t[0]){n=n||ar(t[1]);for(let e=1;e<t.length-1;e+=2)i.push(t[e+1])}n&&(t.length=0,t.push("any",...i));for(let n=1;n<t.length;n++)e(t[n])}(t),t=function e(t){if(!Array.isArray(t))return t;const n=function(e){if(or.has(e[0]))for(let t=1;t<e.length;t++)if(ar(e[t]))return!0;return e}(t);return!0===n?n:n.map(t=>e(t))}(t),t}(n)}catch(e){console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(n,null,2)}\n        `)}const r=tt["filter_"+t],a=Vi(i,r);let o=null;if("error"===a.result)throw new Error(a.value.map(e=>`${e.key}: ${e.message}`).join(", "));o=(e,t,n)=>a.value.evaluate(e,t,{},n);let s=null,l=null;if(i!==n){const e=Vi(n,r);if("error"===e.result)throw new Error(e.value.map(e=>`${e.key}: ${e.message}`).join(", "));s=(t,n,i,r,a)=>e.value.evaluate(t,n,{},i,void 0,void 0,r,a),l=!xn(e.value.expression)}return{filter:o,dynamicFilter:s||void 0,needGeometry:lr(i),needFeature:!!l}}function ar(e){if(!Array.isArray(e))return!1;if("pitch"===(t=e[0])||"distance-from-center"===t)return!0;var t;for(let t=1;t<e.length;t++)if(ar(e[t]))return!0;return!1}const or=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function sr(e,t){return e<t?-1:e>t?1:0}function lr(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(let t=1;t<e.length;t++)if(lr(e[t]))return!0;return!1}function cr(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?ur(e[1],e[2],"=="):"!="===t?fr(ur(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?ur(e[1],e[2],t):"any"===t?(n=e.slice(1),["any"].concat(n.map(cr))):"all"===t?["all"].concat(e.slice(1).map(cr)):"none"===t?["all"].concat(e.slice(1).map(cr).map(fr)):"in"===t?dr(e[1],e.slice(2)):"!in"===t?fr(dr(e[1],e.slice(2))):"has"===t?pr(e[1]):"!has"===t?fr(pr(e[1])):"within"!==t||e;var n}function ur(e,t,n){switch(e){case"$type":return["filter-type-"+n,t];case"$id":return["filter-id-"+n,t];default:return["filter-"+n,e,t]}}function dr(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(e=>typeof e!=typeof t[0])?["filter-in-large",e,["literal",t.sort(sr)]]:["filter-in-small",e,["literal",t]]}}function pr(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function fr(e){return["!",e]}function mr(e){return ir(rt(e.value))?tr(nt({},e,{expressionContext:"filter",valueSpec:e.styleSpec["filter_"+(e.layerType||"fill")]})):function e(t){const n=t.value,i=t.key;if("array"!==Ri(n))return[new Ji(i,n,`array expected, ${Ri(n)} found`)];const r=t.styleSpec;let a,o=[];if(n.length<1)return[new Ji(i,n,"filter array must have at least 1 element")];switch(o=o.concat(nr({key:i+"[0]",value:n[0],valueSpec:r.filter_operator,style:t.style,styleSpec:t.styleSpec})),it(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&"$type"===it(n[1])&&o.push(new Ji(i,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":3!==n.length&&o.push(new Ji(i,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(a=Ri(n[1]),"string"!==a&&o.push(new Ji(i+"[1]",n[1],`string expected, ${a} found`)));for(let e=2;e<n.length;e++)a=Ri(n[e]),"$type"===it(n[1])?o=o.concat(nr({key:`${i}[${e}]`,value:n[e],valueSpec:r.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==a&&"number"!==a&&"boolean"!==a&&o.push(new Ji(`${i}[${e}]`,n[e],`string, number, or boolean expected, ${a} found`));break;case"any":case"all":case"none":for(let r=1;r<n.length;r++)o=o.concat(e({key:`${i}[${r}]`,value:n[r],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":a=Ri(n[1]),2!==n.length?o.push(new Ji(i,n,`filter array for "${n[0]}" operator must have 2 elements`)):"string"!==a&&o.push(new Ji(i+"[1]",n[1],`string expected, ${a} found`));break;case"within":a=Ri(n[1]),2!==n.length?o.push(new Ji(i,n,`filter array for "${n[0]}" operator must have 2 elements`)):"object"!==a&&o.push(new Ji(i+"[1]",n[1],`object expected, ${a} found`))}return o}(e)}function hr(e,t){const n=e.key,i=e.style,r=e.styleSpec,a=e.value,o=e.objectKey,s=r[`${t}_${e.layerType}`];if(!s)return[];const l=o.match(/^(.*)-transition$/);if("paint"===t&&l&&s[l[1]]&&s[l[1]].transition)return Cr({key:n,value:a,valueSpec:r.transition,style:i,styleSpec:r});const c=e.valueSpec||s[o];if(!c)return[new Ji(n,a,`unknown property "${o}"`)];let u;if("string"===Ri(a)&&Ai(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(a))){const e=`\`{ "type": "identity", "property": ${u?JSON.stringify(u[1]):'"_"'} }\``;return[new Ji(n,a,`"${o}" does not support interpolation syntax\nUse an identity property function instead: ${e}.`)]}const d=[];return"symbol"===e.layerType&&("text-field"===o&&i&&!i.glyphs&&d.push(new Ji(n,a,'use of "text-field" requires a style "glyphs" property')),"text-font"===o&&Ni(rt(a))&&"identity"===it(a.type)&&d.push(new Ji(n,a,'"text-font" does not support identity functions'))),d.concat(Cr({key:e.key,value:a,valueSpec:c,style:i,styleSpec:r,expressionContext:"property",propertyType:t,propertyKey:o}))}function gr(e){return hr(e,"paint")}function yr(e){return hr(e,"layout")}function vr(e){let t=[];const n=e.value,i=e.key,r=e.style,a=e.styleSpec;n.type||n.ref||t.push(new Ji(i,n,'either "type" or "ref" is required'));let o=it(n.type);const s=it(n.ref);if(n.id){const a=it(n.id);for(let o=0;o<e.arrayIndex;o++){const e=r.layers[o];it(e.id)===a&&t.push(new Ji(i,n.id,`duplicate layer id "${n.id}", previously used at line ${e.id.__line__}`))}}if("ref"in n){let e;["type","source","source-layer","filter","layout"].forEach(e=>{e in n&&t.push(new Ji(i,n[e],`"${e}" is prohibited for ref layers`))}),r.layers.forEach(t=>{it(t.id)===s&&(e=t)}),e?e.ref?t.push(new Ji(i,n.ref,"ref cannot reference another ref layer")):o=it(e.type):"string"==typeof s&&t.push(new Ji(i,n.ref,`ref layer "${s}" not found`))}else if("background"!==o&&"sky"!==o)if(n.source){const e=r.sources&&r.sources[n.source],a=e&&it(e.type);e?"vector"===a&&"raster"===o?t.push(new Ji(i,n.source,`layer "${n.id}" requires a raster source`)):"raster"===a&&"raster"!==o?t.push(new Ji(i,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==a||n["source-layer"]?"raster-dem"===a&&"hillshade"!==o?t.push(new Ji(i,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==o||!n.paint||!n.paint["line-gradient"]&&!n.paint["line-trim-offset"]||"geojson"===a&&e.lineMetrics||t.push(new Ji(i,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Ji(i,n,`layer "${n.id}" must specify a "source-layer"`)):t.push(new Ji(i,n.source,`source "${n.source}" not found`))}else t.push(new Ji(i,n,'missing required property "source"'));return t=t.concat(Ki({key:i,value:n,valueSpec:a.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Cr({key:i+".type",value:n.type,valueSpec:a.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"}),filter:e=>mr(nt({layerType:o},e)),layout:e=>Ki({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>yr(nt({layerType:o},e))}}),paint:e=>Ki({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>gr(nt({layerType:o},e))}})}})),t}function br(e){const t=e.value,n=e.key,i=Ri(t);return"string"!==i?[new Ji(n,t,`string expected, ${i} found`)]:[]}const _r={promoteId:function({key:e,value:t}){if("string"===Ri(t))return br({key:e,value:t});{const n=[];for(const i in t)n.push(...br({key:`${e}.${i}`,value:t[i]}));return n}}};function wr(e){const t=e.value,n=e.key,i=e.styleSpec,r=e.style;if(!t.type)return[new Ji(n,t,'"type" is required')];const a=it(t.type);let o;switch(a){case"vector":case"raster":case"raster-dem":return o=Ki({key:n,value:t,valueSpec:i["source_"+a.replace("-","_")],style:e.style,styleSpec:i,objectElementValidators:_r}),o;case"geojson":if(o=Ki({key:n,value:t,valueSpec:i.source_geojson,style:r,styleSpec:i,objectElementValidators:_r}),t.cluster)for(const e in t.clusterProperties){const[i,r]=t.clusterProperties[e],a="string"==typeof i?[i,["accumulated"],["get",e]]:i;o.push(...tr({key:`${n}.${e}.map`,value:r,expressionContext:"cluster-map"})),o.push(...tr({key:`${n}.${e}.reduce`,value:a,expressionContext:"cluster-reduce"}))}return o;case"video":return Ki({key:n,value:t,valueSpec:i.source_video,style:r,styleSpec:i});case"image":return Ki({key:n,value:t,valueSpec:i.source_image,style:r,styleSpec:i});case"canvas":return[new Ji(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return nr({key:n+".type",value:t.type,valueSpec:{values:xr(i)},style:r,styleSpec:i})}}function xr(e){return e.source.reduce((t,n)=>{const i=e[n];return"enum"===i.type.type&&(t=t.concat(Object.keys(i.type.values))),t},[])}function kr(e){const t=e.value,n=e.styleSpec,i=n.light,r=e.style;let a=[];const o=Ri(t);if(void 0===t)return a;if("object"!==o)return a=a.concat([new Ji("light",t,`object expected, ${o} found`)]),a;for(const e in t){const o=e.match(/^(.*)-transition$/);a=a.concat(o&&i[o[1]]&&i[o[1]].transition?Cr({key:e,value:t[e],valueSpec:n.transition,style:r,styleSpec:n}):i[e]?Cr({key:e,value:t[e],valueSpec:i[e],style:r,styleSpec:n}):[new Ji(e,t[e],`unknown property "${e}"`)])}return a}function Or(e){const t=e.value,n=e.key,i=e.style,r=e.styleSpec,a=r.terrain;let o=[];const s=Ri(t);if(void 0===t)return o;if("object"!==s)return o=o.concat([new Ji("terrain",t,`object expected, ${s} found`)]),o;for(const e in t){const n=e.match(/^(.*)-transition$/);o=o.concat(n&&a[n[1]]&&a[n[1]].transition?Cr({key:e,value:t[e],valueSpec:r.transition,style:i,styleSpec:r}):a[e]?Cr({key:e,value:t[e],valueSpec:a[e],style:i,styleSpec:r}):[new Ji(e,t[e],`unknown property "${e}"`)])}if(t.source){const e=i.sources&&i.sources[t.source],r=e&&it(e.type);e?"raster-dem"!==r&&o.push(new Ji(n,t.source,`terrain cannot be used with a source of type ${String(r)}, it only be used with a "raster-dem" source type`)):o.push(new Ji(n,t.source,`source "${t.source}" not found`))}else o.push(new Ji(n,t,'terrain is missing required property "source"'));return o}function Er(e){const t=e.value,n=e.style,i=e.styleSpec,r=i.fog;let a=[];const o=Ri(t);if(void 0===t)return a;if("object"!==o)return a=a.concat([new Ji("fog",t,`object expected, ${o} found`)]),a;for(const e in t){const o=e.match(/^(.*)-transition$/);a=a.concat(o&&r[o[1]]&&r[o[1]].transition?Cr({key:e,value:t[e],valueSpec:i.transition,style:n,styleSpec:i}):r[e]?Cr({key:e,value:t[e],valueSpec:r[e],style:n,styleSpec:i}):[new Ji(e,t[e],`unknown property "${e}"`)])}return a}const Tr={"*":()=>[],array:$i,boolean:function(e){const t=e.value,n=e.key,i=Ri(t);return"boolean"!==i?[new Ji(n,t,`boolean expected, ${i} found`)]:[]},number:Qi,color:function(e){const t=e.key,n=e.value,i=Ri(n);return"string"!==i?[new Ji(t,n,`color expected, ${i} found`)]:null===Et(n)?[new Ji(t,n,`color expected, "${n}" found`)]:[]},enum:nr,filter:mr,function:er,layer:vr,object:Ki,source:wr,light:kr,terrain:Or,fog:Er,string:br,formatted:function(e){return 0===br(e).length?[]:tr(e)},resolvedImage:function(e){return 0===br(e).length?[]:tr(e)},projection:function(e){const t=e.value,n=e.styleSpec,i=n.projection,r=e.style;let a=[];const o=Ri(t);if("object"===o)for(const e in t)a=a.concat(Cr({key:e,value:t[e],valueSpec:i[e],style:r,styleSpec:n}));else"string"!==o&&(a=a.concat([new Ji("projection",t,`object or string expected, ${o} found`)]));return a}};function Cr(e){const t=e.value,n=e.valueSpec,i=e.styleSpec;return n.expression&&Ni(it(t))?er(e):n.expression&&qi(rt(t))?tr(e):n.type&&Tr[n.type]?Tr[n.type](e):Ki(nt({},e,{valueSpec:n.type?i[n.type]:n}))}function Sr(e){const t=e.value,n=e.key,i=br(e);return i.length||(-1===t.indexOf("{fontstack}")&&i.push(new Ji(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&i.push(new Ji(n,t,'"glyphs" url must include a "{range}" token'))),i}function Pr(e,t=tt){return Ar(Cr({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Sr,"*":()=>[]}}))}const Mr=e=>Ar(gr(e)),Ir=e=>Ar(yr(e));function Ar(e){return e.slice().sort((e,t)=>e.line&&t.line?e.line-t.line:0)}function jr(e,t){let n=!1;if(t&&t.length)for(const i of t)e.fire(new Qe(new Error(i.message))),n=!0;return n}var Lr=Rr;function Rr(e,t,n){var i=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var r=new Int32Array(this.arrayBuffer);e=r[0],this.d=(t=r[1])+2*(n=r[2]);for(var a=0;a<this.d*this.d;a++){var o=r[3+a],s=r[3+a+1];i.push(o===s?null:r.subarray(o,s))}var l=r[3+i.length+1];this.keys=r.subarray(r[3+i.length],l),this.bboxes=r.subarray(l),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var c=0;c<this.d*this.d;c++)i.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var u=n/t*e;this.min=-u,this.max=e+u}Rr.prototype.insert=function(e,t,n,i,r){this._forEachCell(t,n,i,r,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)},Rr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Rr.prototype._insertCell=function(e,t,n,i,r,a){this.cells[r].push(a)},Rr.prototype.query=function(e,t,n,i,r){var a=this.min,o=this.max;if(e<=a&&t<=a&&o<=n&&o<=i&&!r)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,n,i,this._queryCell,s,{},r),s},Rr.prototype._queryCell=function(e,t,n,i,r,a,o,s){var l=this.cells[r];if(null!==l)for(var c=this.keys,u=this.bboxes,d=0;d<l.length;d++){var p=l[d];if(void 0===o[p]){var f=4*p;(s?s(u[f+0],u[f+1],u[f+2],u[f+3]):e<=u[f+2]&&t<=u[f+3]&&n>=u[f+0]&&i>=u[f+1])?(o[p]=!0,a.push(c[p])):o[p]=!1}}},Rr.prototype._forEachCell=function(e,t,n,i,r,a,o,s){for(var l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(n),d=this._convertToCellCoord(i),p=l;p<=u;p++)for(var f=c;f<=d;f++){var m=this.d*f+p;if((!s||s(this._convertFromCellCoord(p),this._convertFromCellCoord(f),this._convertFromCellCoord(p+1),this._convertFromCellCoord(f+1)))&&r.call(this,e,t,n,i,m,a,o,s))return}},Rr.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Rr.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Rr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,n=0,i=0;i<this.cells.length;i++)n+=this.cells[i].length;var r=new Int32Array(t+n+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;for(var a=t,o=0;o<e.length;o++){var s=e[o];r[3+o]=a,r.set(s,a),a+=s.length}return r[3+e.length]=a,r.set(this.keys,a),r[3+e.length+1]=a+=this.keys.length,r.set(this.bboxes,a),a+=this.bboxes.length,r.buffer};var Nr=f(Lr);const Dr={};function Br(e,t,n={}){Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Dr[t]={klass:e,omit:n.omit||[]}}Br(Object,"Object"),Nr.serialize=function(e,t){const n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},Nr.deserialize=function(e){return new Nr(e.buffer)},Object.defineProperty(Nr,"name",{value:"Grid"}),Br(Nr,"Grid"),Br(At,"Color"),Br(Error,"Error"),Br(ue,"AJAXError"),Br(Nt,"ResolvedImage"),Br(Xi,"StylePropertyFunction"),Br(Wi,"StyleExpression",{omit:["_evaluator"]}),Br(Yi,"ZoomDependentExpression"),Br(Gi,"ZoomConstantExpression"),Br(tn,"CompoundExpression",{omit:["_evaluate"]});for(const e in Pi)Dr[Pi[e]._classRegistryKey]||Br(Pi[e],"Expression"+e);function zr(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Fr(e){return n.ImageBitmap&&e instanceof n.ImageBitmap}function Ur(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(zr(e)||Fr(e))return t&&t.push(e),e;if(ArrayBuffer.isView(e)){const n=e;return t&&t.push(n.buffer),n}if(e instanceof n.ImageData)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){const n=[];for(const i of e)n.push(Ur(i,t));return n}if("object"==typeof e){const n=e.constructor,i=n._classRegistryKey;if(!i)throw new Error("can't serialize object of unregistered class "+i);const r=n.serialize?n.serialize(e,t):{};if(!n.serialize){for(const n in e)e.hasOwnProperty(n)&&(Dr[i].omit.indexOf(n)>=0||(r[n]=Ur(e[n],t)));e instanceof Error&&(r.message=e.message)}if(r.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==i&&(r.$name=i),r}throw new Error("can't serialize object of type "+typeof e)}function Hr(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||zr(e)||Fr(e)||ArrayBuffer.isView(e)||e instanceof n.ImageData)return e;if(Array.isArray(e))return e.map(Hr);if("object"==typeof e){const t=e.$name||"Object",{klass:n}=Dr[t];if(!n)throw new Error("can't deserialize unregistered class "+t);if(n.deserialize)return n.deserialize(e);const i=Object.create(n.prototype);for(const t of Object.keys(e))"$name"!==t&&(i[t]=Hr(e[t]));return i}throw new Error("can't deserialize object of type "+typeof e)}const Wr=e=>e>=128&&e<=255,qr=e=>e>=1536&&e<=1791,Vr=e=>e>=1872&&e<=1919,Gr=e=>e>=2208&&e<=2303,Yr=e=>e>=4352&&e<=4607,Zr=e=>e>=5120&&e<=5759,Xr=e=>e>=6016&&e<=6143,Jr=e=>e>=6320&&e<=6399,Kr=e=>e>=8192&&e<=8303,$r=e=>e>=8448&&e<=8527,Qr=e=>e>=8528&&e<=8591,ea=e=>e>=8960&&e<=9215,ta=e=>e>=9216&&e<=9279,na=e=>e>=9280&&e<=9311,ia=e=>e>=9312&&e<=9471,ra=e=>e>=9632&&e<=9727,aa=e=>e>=9728&&e<=9983,oa=e=>e>=11008&&e<=11263,sa=e=>e>=11904&&e<=12031,la=e=>e>=12032&&e<=12255,ca=e=>e>=12272&&e<=12287,ua=e=>e>=12288&&e<=12351,da=e=>e>=12352&&e<=12447,pa=e=>e>=12448&&e<=12543,fa=e=>e>=12544&&e<=12591,ma=e=>e>=12592&&e<=12687,ha=e=>e>=12688&&e<=12703,ga=e=>e>=12704&&e<=12735,ya=e=>e>=12736&&e<=12783,va=e=>e>=12784&&e<=12799,ba=e=>e>=12800&&e<=13055,_a=e=>e>=13056&&e<=13311,wa=e=>e>=13312&&e<=19903,xa=e=>e>=19904&&e<=19967,ka=e=>e>=19968&&e<=40959,Oa=e=>e>=40960&&e<=42127,Ea=e=>e>=42128&&e<=42191,Ta=e=>e>=43360&&e<=43391,Ca=e=>e>=44032&&e<=55215,Sa=e=>e>=55216&&e<=55295,Pa=e=>e>=57344&&e<=63743,Ma=e=>e>=63744&&e<=64255,Ia=e=>e>=64336&&e<=65023,Aa=e=>e>=65040&&e<=65055,ja=e=>e>=65072&&e<=65103,La=e=>e>=65104&&e<=65135,Ra=e=>e>=65136&&e<=65279,Na=e=>e>=65280&&e<=65519;function Da(e){for(const t of e)if(Fa(t.charCodeAt(0)))return!0;return!1}function Ba(e){for(const t of e)if(!za(t.charCodeAt(0)))return!1;return!0}function za(e){return!(qr(e)||Vr(e)||Gr(e)||Ia(e)||Ra(e))}function Fa(e){return!(746!==e&&747!==e&&(e<4352||!(ga(e)||fa(e)||ja(e)&&!(e>=65097&&e<=65103)||Ma(e)||_a(e)||sa(e)||ya(e)||!(!ua(e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||wa(e)||ka(e)||ba(e)||ma(e)||Ta(e)||Sa(e)||Yr(e)||Ca(e)||da(e)||ca(e)||ha(e)||la(e)||va(e)||pa(e)&&12540!==e||!(!Na(e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!La(e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||Zr(e)||Jr(e)||Aa(e)||xa(e)||Oa(e)||Ea(e))))}function Ua(e){return!(Fa(e)||function(e){return!!(Wr(e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||Kr(e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||$r(e)||Qr(e)||ea(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||ta(e)&&9251!==e||na(e)||ia(e)||ra(e)||aa(e)&&!(e>=9754&&e<=9759)||oa(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||ua(e)||pa(e)||Pa(e)||ja(e)||La(e)||Na(e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function Ha(e){return e>=1424&&e<=2303||Ia(e)||Ra(e)}function Wa(e,t){return!(!t&&Ha(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||Xr(e))}function qa(e){for(const t of e)if(Ha(t.charCodeAt(0)))return!0;return!1}const Va="deferred",Ga="loading",Ya="loaded";let Za=null,Xa="unavailable",Ja=null;const Ka=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(Xa="error"),Za&&Za(e)};function $a(){Qa.fire(new $e("pluginStateChange",{pluginStatus:Xa,pluginURL:Ja}))}const Qa=new et,eo=function(){return Xa},to=function(){if(Xa!==Va||!Ja)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Xa=Ga,$a(),Ja&&fe({url:Ja},e=>{e?Ka(e):(Xa=Ya,$a())})},no={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Xa===Ya||null!=no.applyArabicShaping,isLoading:()=>Xa===Ga,setState(e){Xa=e.pluginStatus,Ja=e.pluginURL},isParsed:()=>null!=no.applyArabicShaping&&null!=no.processBidirectionalText&&null!=no.processStyledBidirectionalText,getPluginURL:()=>Ja};class io{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.transition=t.transition,this.pitch=t.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(e){return function(e,t){for(const n of e)if(!Wa(n.charCodeAt(0),t))return!1;return!0}(e,no.isLoaded())}}class ro{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(Ni(e))return new Xi(e,t);if(qi(e)){const n=Zi(e,t);if("error"===n.result)throw new Error(n.value.map(e=>`${e.key}: ${e.message}`).join(", "));return n.value}{let n=e;return"string"==typeof e&&"color"===t.type&&(n=At.parse(e)),{kind:"constant",evaluate:()=>n}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}class ao{constructor(e){this.property=e,this.value=new ro(e,void 0)}transitioned(e,t){return new so(this.property,this.value,t,j({},e.transition,this.transition),e.now)}untransitioned(){return new so(this.property,this.value,null,{},0)}}class oo{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return W(this._values[e].value.value)}setValue(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new ao(this._values[e].property)),this._values[e].value=new ro(this._values[e].property,null===t?void 0:W(t))}getTransition(e){return W(this._values[e].transition)}setTransition(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new ao(this._values[e].property)),this._values[e].transition=W(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n);const i=this.getTransition(t);void 0!==i&&(e[t+"-transition"]=i)}return e}transitioned(e,t){const n=new lo(this._properties);for(const i of Object.keys(this._values))n._values[i]=this._values[i].transitioned(e,t._values[i]);return n}untransitioned(){const e=new lo(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class so{constructor(e,t,n,i,r){const a=i.delay||0,o=i.duration||0;r=r||0,this.property=e,this.value=t,this.begin=r+a,this.end=this.begin+o,e.specification.transition&&(i.delay||i.duration)&&(this.prior=n)}possiblyEvaluate(e,t,n){const i=e.now||0,r=this.value.possiblyEvaluate(e,t,n),a=this.prior;if(a){if(i>this.end)return this.prior=null,r;if(this.value.isDataDriven())return this.prior=null,r;if(i<this.begin)return a.possiblyEvaluate(e,t,n);{const o=(i-this.begin)/(this.end-this.begin);return this.property.interpolate(a.possiblyEvaluate(e,t,n),r,E(o))}}return r}}class lo{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,n){const i=new po(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].possiblyEvaluate(e,t,n);return i}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class co{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return W(this._values[e].value)}setValue(e,t){this._values[e]=new ro(this._values[e].property,null===t?void 0:W(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n)}return e}possiblyEvaluate(e,t,n){const i=new po(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].possiblyEvaluate(e,t,n);return i}}class uo{constructor(e,t,n){this.property=e,this.value=t,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,n,i){return this.property.evaluate(this.value,this.parameters,e,t,n,i)}}class po{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class fo{constructor(e){this.specification=e}possiblyEvaluate(e,t){return e.expression.evaluate(t)}interpolate(e,t,n){const i=jn[this.specification.type];return i?i(e,t,n):e}}class mo{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,n,i){return new uo(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,i)}:e.expression,t)}interpolate(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new uo(this,{kind:"constant",value:void 0},e.parameters);const i=jn[this.specification.type];return i?new uo(this,{kind:"constant",value:i(e.value.value,t.value.value,n)},e.parameters):e}evaluate(e,t,n,i,r,a){return"constant"===e.kind?e.value:e.evaluate(t,n,i,r,a)}}class ho{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,i){return!!e.expression.evaluate(t,null,{},n,i)}interpolate(){return!1}}class go{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const t=new io(0,{});for(const n in e){const i=e[n];i.specification.overridable&&this.overridableProperties.push(n);const r=this.defaultPropertyValues[n]=new ro(i,void 0),a=this.defaultTransitionablePropertyValues[n]=new ao(i);this.defaultTransitioningPropertyValues[n]=a.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=r.possiblyEvaluate(t)}}}function yo(e,t){return 256*(e=S(Math.floor(e),0,255))+S(Math.floor(t),0,255)}Br(mo,"DataDrivenProperty"),Br(fo,"DataConstantProperty"),Br(ho,"ColorRampProperty");const vo={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class bo{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class _o{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function wo(e,t=1){let n=0,i=0;return{members:e.map(e=>{const r=vo[e.type].BYTES_PER_ELEMENT,a=n=xo(n,Math.max(t,r)),o=e.components||1;return i=Math.max(i,r),n+=r*o,{name:e.name,type:e.type,components:o,offset:a}}),size:xo(n,Math.max(i,t)),alignment:t}}function xo(e,t){return Math.ceil(e/t)*t}class ko extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const i=2*e;return this.int16[i+0]=t,this.int16[i+1]=n,e}}ko.prototype.bytesPerElement=4,Br(ko,"StructArrayLayout2i4");class Oo extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}emplace(e,t,n,i){const r=3*e;return this.int16[r+0]=t,this.int16[r+1]=n,this.int16[r+2]=i,e}}Oo.prototype.bytesPerElement=6,Br(Oo,"StructArrayLayout3i6");class Eo extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n,i)}emplace(e,t,n,i,r){const a=4*e;return this.int16[a+0]=t,this.int16[a+1]=n,this.int16[a+2]=i,this.int16[a+3]=r,e}}Eo.prototype.bytesPerElement=8,Br(Eo,"StructArrayLayout4i8");class To extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,a,o){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,i,r,a,o)}emplace(e,t,n,i,r,a,o,s){const l=6*e,c=12*e,u=3*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.uint8[c+4]=i,this.uint8[c+5]=r,this.uint8[c+6]=a,this.uint8[c+7]=o,this.float32[u+2]=s,e}}To.prototype.bytesPerElement=12,Br(To,"StructArrayLayout2i4ub1f12");class Co extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n,i)}emplace(e,t,n,i,r){const a=4*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=i,this.float32[a+3]=r,e}}Co.prototype.bytesPerElement=16,Br(Co,"StructArrayLayout4f16");class So extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,i,r)}emplace(e,t,n,i,r,a){const o=6*e,s=3*e;return this.uint16[o+0]=t,this.uint16[o+1]=n,this.uint16[o+2]=i,this.uint16[o+3]=r,this.float32[s+2]=a,e}}So.prototype.bytesPerElement=12,Br(So,"StructArrayLayout4ui1f12");class Po extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n,i)}emplace(e,t,n,i,r){const a=4*e;return this.uint16[a+0]=t,this.uint16[a+1]=n,this.uint16[a+2]=i,this.uint16[a+3]=r,e}}Po.prototype.bytesPerElement=8,Br(Po,"StructArrayLayout4ui8");class Mo extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,a){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,i,r,a)}emplace(e,t,n,i,r,a,o){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=i,this.int16[s+3]=r,this.int16[s+4]=a,this.int16[s+5]=o,e}}Mo.prototype.bytesPerElement=12,Br(Mo,"StructArrayLayout6i12");class Io extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,a,o,s,l,c,u,d){const p=this.length;return this.resize(p+1),this.emplace(p,e,t,n,i,r,a,o,s,l,c,u,d)}emplace(e,t,n,i,r,a,o,s,l,c,u,d,p){const f=12*e;return this.int16[f+0]=t,this.int16[f+1]=n,this.int16[f+2]=i,this.int16[f+3]=r,this.uint16[f+4]=a,this.uint16[f+5]=o,this.uint16[f+6]=s,this.uint16[f+7]=l,this.int16[f+8]=c,this.int16[f+9]=u,this.int16[f+10]=d,this.int16[f+11]=p,e}}Io.prototype.bytesPerElement=24,Br(Io,"StructArrayLayout4i4ui4i24");class Ao extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,a){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,i,r,a)}emplace(e,t,n,i,r,a,o){const s=10*e,l=5*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=i,this.float32[l+2]=r,this.float32[l+3]=a,this.float32[l+4]=o,e}}Ao.prototype.bytesPerElement=20,Br(Ao,"StructArrayLayout3i3f20");class jo extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}jo.prototype.bytesPerElement=4,Br(jo,"StructArrayLayout1ul4");class Lo extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,a,o,s,l,c,u,d,p){const f=this.length;return this.resize(f+1),this.emplace(f,e,t,n,i,r,a,o,s,l,c,u,d,p)}emplace(e,t,n,i,r,a,o,s,l,c,u,d,p,f){const m=20*e,h=10*e;return this.int16[m+0]=t,this.int16[m+1]=n,this.int16[m+2]=i,this.int16[m+3]=r,this.int16[m+4]=a,this.float32[h+3]=o,this.float32[h+4]=s,this.float32[h+5]=l,this.float32[h+6]=c,this.int16[m+14]=u,this.uint32[h+8]=d,this.uint16[m+18]=p,this.uint16[m+19]=f,e}}Lo.prototype.bytesPerElement=40,Br(Lo,"StructArrayLayout5i4f1i1ul2ui40");class Ro extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,a,o){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,i,r,a,o)}emplace(e,t,n,i,r,a,o,s){const l=8*e;return this.int16[l+0]=t,this.int16[l+1]=n,this.int16[l+2]=i,this.int16[l+4]=r,this.int16[l+5]=a,this.int16[l+6]=o,this.int16[l+7]=s,e}}Ro.prototype.bytesPerElement=16,Br(Ro,"StructArrayLayout3i2i2i16");class No extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,i,r)}emplace(e,t,n,i,r,a){const o=4*e,s=8*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=i,this.int16[s+6]=r,this.int16[s+7]=a,e}}No.prototype.bytesPerElement=16,Br(No,"StructArrayLayout2f1f2i16");class Do extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n,i)}emplace(e,t,n,i,r){const a=12*e,o=3*e;return this.uint8[a+0]=t,this.uint8[a+1]=n,this.float32[o+1]=i,this.float32[o+2]=r,e}}Do.prototype.bytesPerElement=12,Br(Do,"StructArrayLayout2ub2f12");class Bo extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}emplace(e,t,n,i){const r=3*e;return this.float32[r+0]=t,this.float32[r+1]=n,this.float32[r+2]=i,e}}Bo.prototype.bytesPerElement=12,Br(Bo,"StructArrayLayout3f12");class zo extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n)}emplace(e,t,n,i){const r=3*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,this.uint16[r+2]=i,e}}zo.prototype.bytesPerElement=6,Br(zo,"StructArrayLayout3ui6");class Fo extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,a,o,s,l,c,u,d,p,f,m,h,g,y,v,b,_){const w=this.length;return this.resize(w+1),this.emplace(w,e,t,n,i,r,a,o,s,l,c,u,d,p,f,m,h,g,y,v,b,_)}emplace(e,t,n,i,r,a,o,s,l,c,u,d,p,f,m,h,g,y,v,b,_,w){const x=30*e,k=15*e,O=60*e;return this.int16[x+0]=t,this.int16[x+1]=n,this.int16[x+2]=i,this.float32[k+2]=r,this.float32[k+3]=a,this.uint16[x+8]=o,this.uint16[x+9]=s,this.uint32[k+5]=l,this.uint32[k+6]=c,this.uint32[k+7]=u,this.uint16[x+16]=d,this.uint16[x+17]=p,this.uint16[x+18]=f,this.float32[k+10]=m,this.float32[k+11]=h,this.uint8[O+48]=g,this.uint8[O+49]=y,this.uint8[O+50]=v,this.uint32[k+13]=b,this.int16[x+28]=_,this.uint8[O+58]=w,e}}Fo.prototype.bytesPerElement=60,Br(Fo,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Uo extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r,a,o,s,l,c,u,d,p,f,m,h,g,y,v,b,_,w,x,k,O,E,T,C,S,P){const M=this.length;return this.resize(M+1),this.emplace(M,e,t,n,i,r,a,o,s,l,c,u,d,p,f,m,h,g,y,v,b,_,w,x,k,O,E,T,C,S,P)}emplace(e,t,n,i,r,a,o,s,l,c,u,d,p,f,m,h,g,y,v,b,_,w,x,k,O,E,T,C,S,P,M){const I=38*e,A=19*e;return this.int16[I+0]=t,this.int16[I+1]=n,this.int16[I+2]=i,this.float32[A+2]=r,this.float32[A+3]=a,this.int16[I+8]=o,this.int16[I+9]=s,this.int16[I+10]=l,this.int16[I+11]=c,this.int16[I+12]=u,this.int16[I+13]=d,this.uint16[I+14]=p,this.uint16[I+15]=f,this.uint16[I+16]=m,this.uint16[I+17]=h,this.uint16[I+18]=g,this.uint16[I+19]=y,this.uint16[I+20]=v,this.uint16[I+21]=b,this.uint16[I+22]=_,this.uint16[I+23]=w,this.uint16[I+24]=x,this.uint16[I+25]=k,this.uint16[I+26]=O,this.uint16[I+27]=E,this.uint16[I+28]=T,this.uint32[A+15]=C,this.float32[A+16]=S,this.float32[A+17]=P,this.float32[A+18]=M,e}}Uo.prototype.bytesPerElement=76,Br(Uo,"StructArrayLayout3i2f6i15ui1ul3f76");class Ho extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}Ho.prototype.bytesPerElement=4,Br(Ho,"StructArrayLayout1f4");class Wo extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,i,r){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,i,r)}emplace(e,t,n,i,r,a){const o=5*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=i,this.float32[o+3]=r,this.float32[o+4]=a,e}}Wo.prototype.bytesPerElement=20,Br(Wo,"StructArrayLayout5f20");class qo extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,i){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n,i)}emplace(e,t,n,i,r){const a=6*e;return this.uint32[3*e+0]=t,this.uint16[a+2]=n,this.uint16[a+3]=i,this.uint16[a+4]=r,e}}qo.prototype.bytesPerElement=12,Br(qo,"StructArrayLayout1ul3ui12");class Vo extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const i=2*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,e}}Vo.prototype.bytesPerElement=4,Br(Vo,"StructArrayLayout2ui4");class Go extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}Go.prototype.bytesPerElement=2,Br(Go,"StructArrayLayout1ui2");class Yo extends _o{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const i=2*e;return this.float32[i+0]=t,this.float32[i+1]=n,e}}Yo.prototype.bytesPerElement=8,Br(Yo,"StructArrayLayout2f8");class Zo extends bo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Zo.prototype.size=40;class Xo extends Lo{get(e){return new Zo(this,e)}}Br(Xo,"CollisionBoxArray");class Jo extends bo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}Jo.prototype.size=60;class Ko extends Fo{get(e){return new Jo(this,e)}}Br(Ko,"PlacedSymbolArray");class $o extends bo{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}$o.prototype.size=76;class Qo extends Uo{get(e){return new $o(this,e)}}Br(Qo,"SymbolInstanceArray");class es extends Ho{getoffsetX(e){return this.float32[1*e+0]}}Br(es,"GlyphOffsetArray");class ts extends ko{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}Br(ts,"SymbolLineVertexArray");class ns extends bo{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}ns.prototype.size=12;class is extends qo{get(e){return new ns(this,e)}}Br(is,"FeatureIndexArray");class rs extends Vo{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}Br(rs,"FillExtrusionCentroidArray");const as=wo([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),os=wo([{name:"a_dash",components:4,type:"Uint16"}]);var ss={exports:{}},ls={exports:{}};ls.exports=function(e,t){var n,i,r,a,o,s,l,c;for(i=e.length-(n=3&e.length),r=t,o=3432918353,s=461845907,c=0;c<i;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,r=27492+(65535&(a=5*(65535&(r=(r^=l=(65535&(l=(l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|r>>>19))+((5*(r>>>16)&65535)<<16)&4294967295))+((58964+(a>>>16)&65535)<<16);switch(l=0,n){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:r^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*o+(((l>>>16)*o&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return r^=e.length,r=2246822507*(65535&(r^=r>>>16))+((2246822507*(r>>>16)&65535)<<16)&4294967295,r=3266489909*(65535&(r^=r>>>13))+((3266489909*(r>>>16)&65535)<<16)&4294967295,(r^=r>>>16)>>>0};var cs=ls.exports,us={exports:{}};us.exports=function(e,t){for(var n,i=e.length,r=t^i,a=0;i>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24))+((1540483477*(n>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),i-=4,++a;switch(i){case 3:r^=(255&e.charCodeAt(a+2))<<16;case 2:r^=(255&e.charCodeAt(a+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(a)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),(r^=r>>>15)>>>0};var ds=cs,ps=us.exports;ss.exports=ds,ss.exports.murmur3=ds,ss.exports.murmur2=ps;var fs=f(ss.exports);class ms{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,n,i){this.ids.push(hs(e)),this.positions.push(t,n,i)}getPositions(e){const t=hs(e);let n=0,i=this.ids.length-1;for(;n<i;){const e=n+i>>1;this.ids[e]>=t?i=e:n=e+1}const r=[];for(;this.ids[n]===t;)r.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return r}static serialize(e,t){const n=new Float64Array(e.ids),i=new Uint32Array(e.positions);return function e(t,n,i,r){for(;i<r;){const a=t[i+r>>1];let o=i-1,s=r+1;for(;;){do{o++}while(t[o]<a);do{s--}while(t[s]>a);if(o>=s)break;gs(t,o,s),gs(n,3*o,3*s),gs(n,3*o+1,3*s+1),gs(n,3*o+2,3*s+2)}s-i<r-s?(e(t,n,i,s),i=s+1):(e(t,n,s+1,r),r=s)}}(n,i,0,n.length-1),t&&t.push(n.buffer,i.buffer),{ids:n,positions:i}}static deserialize(e){const t=new ms;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function hs(e){const t=+e;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:fs(String(e))}function gs(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}Br(ms,"FeaturePositionMap");class ys{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,t){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,t),this.initialized=!0),!!this.location}}class vs extends ys{constructor(e){super(e),this.current=0}set(e,t,n){this.fetchUniformLocation(e,t)&&this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class bs extends ys{constructor(e){super(e),this.current=[0,0,0,0]}set(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3])))}}class _s extends ys{constructor(e){super(e),this.current=At.transparent}set(e,t,n){this.fetchUniformLocation(e,t)&&(n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a)))}}const ws=new Float32Array(16),xs=new Float32Array(9),ks=new Float32Array(4);function Os(e){return[yo(255*e.r,255*e.g),yo(255*e.b,255*e.a)]}class Es{constructor(e,t,n){this.value=e,this.uniformNames=t.map(e=>"u_"+e),this.type=n}setUniform(e,t,n,i,r){t.set(e,r,i.constantOr(this.value))}getBinding(e,t){return"color"===this.type?new _s(e):new vs(e)}}class Ts{constructor(e,t){this.uniformNames=t.map(e=>"u_"+e),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,t,n,i,r){const a="u_pattern"===r||"u_dash"===r?this.pattern:"u_pixel_ratio"===r?this.pixelRatio:null;a&&t.set(e,r,a)}getBinding(e,t){return"u_pattern"===t||"u_dash"===t?new bs(e):new vs(e)}}class Cs{constructor(e,t,n,i){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map(e=>({name:"a_"+e,type:"Float32",components:"color"===n?2:1,offset:0})),this.paintVertexArray=new i}populatePaintArray(e,t,n,i,r,a){const o=this.paintVertexArray.length,s=this.expression.evaluate(new io(0),t,{},r,i,a);this.paintVertexArray.resize(e),this._setPaintValue(o,e,s)}updatePaintArray(e,t,n,i,r){const a=this.expression.evaluate({zoom:0},n,i,void 0,r);this._setPaintValue(e,t,a)}_setPaintValue(e,t,n){if("color"===this.type){const i=Os(n);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,i[0],i[1])}else{for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ss{constructor(e,t,n,i,r,a){this.expression=e,this.uniformNames=t.map(e=>`u_${e}_t`),this.type=n,this.useIntegerZoom=i,this.zoom=r,this.maxValue=0,this.paintVertexAttributes=t.map(e=>({name:"a_"+e,type:"Float32",components:"color"===n?4:2,offset:0})),this.paintVertexArray=new a}populatePaintArray(e,t,n,i,r,a){const o=this.expression.evaluate(new io(this.zoom),t,{},r,i,a),s=this.expression.evaluate(new io(this.zoom+1),t,{},r,i,a),l=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(l,e,o,s)}updatePaintArray(e,t,n,i,r){const a=this.expression.evaluate({zoom:this.zoom},n,i,void 0,r),o=this.expression.evaluate({zoom:this.zoom+1},n,i,void 0,r);this._setPaintValue(e,t,a,o)}_setPaintValue(e,t,n,i){if("color"===this.type){const r=Os(n),a=Os(i);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,r[0],r[1],a[0],a[1])}else{for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,n,i);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(i))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t,n,i,r){const a=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,o=S(this.expression.interpolationFactor(a,this.zoom,this.zoom+1),0,1);t.set(e,r,o)}getBinding(e,t){return new vs(e)}}class Ps{constructor(e,t,n,i,r){this.expression=e,this.layerId=r,this.paintVertexAttributes=("array"===n?os:as).members;for(let e=0;e<t.length;++e);this.paintVertexArray=new i}populatePaintArray(e,t,n){const i=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(i,e,t.patterns&&t.patterns[this.layerId],n)}updatePaintArray(e,t,n,i,r,a){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],a)}_setPaintValues(e,t,n,i){if(!i||!n)return;const r=i[n];if(!r)return;const{tl:a,br:o,pixelRatio:s}=r;for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,a[0],a[1],o[0],o[1],s)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ms{constructor(e,t,n=(()=>!0)){this.binders={},this._buffers=[];const i=[];for(const r in e.paint._values){if(!n(r))continue;const a=e.paint.get(r);if(!(a instanceof uo&&Ai(a.property.specification)))continue;const o=js(r,e.type),s=a.value,l=a.property.specification.type,c=!!a.property.useIntegerZoom,u="line-dasharray"===r||r.endsWith("pattern"),d="line-dasharray"===r&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==s.kind||d)if("source"===s.kind||d||u){const t=Ns(r,l,"source");this.binders[r]=u?new Ps(s,o,l,t,e.id):new Cs(s,o,l,t),i.push("/a_"+r)}else{const e=Ns(r,l,"composite");this.binders[r]=new Ss(s,o,l,c,t,e),i.push("/z_"+r)}else this.binders[r]=u?new Ts(s.value,o):new Es(s.value,o,l),i.push("/u_"+r)}this.cacheKey=i.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof Cs||t instanceof Ss?t.maxValue:0}populatePaintArrays(e,t,n,i,r,a){for(const o in this.binders){const s=this.binders[o];(s instanceof Cs||s instanceof Ss||s instanceof Ps)&&s.populatePaintArray(e,t,n,i,r,a)}}setConstantPatternPositions(e){for(const t in this.binders){const n=this.binders[t];n instanceof Ts&&n.setConstantPatternPositions(e)}}updatePaintArrays(e,t,n,i,r,a){let o=!1;for(const s in e){const l=t.getPositions(s);for(const t of l){const l=n.feature(t.index);for(const n in this.binders){const c=this.binders[n];if((c instanceof Cs||c instanceof Ss||c instanceof Ps)&&!0===c.expression.isStateDependent){const u=i.paint.get(n);c.expression=u.value,c.updatePaintArray(t.start,t.end,l,e[s],r,a),o=!0}}}}return o}defines(){const e=[];for(const t in this.binders){const n=this.binders[t];(n instanceof Es||n instanceof Ts)&&e.push(...n.uniformNames.map(e=>"#define HAS_UNIFORM_"+e))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof Cs||n instanceof Ss||n instanceof Ps)for(let t=0;t<n.paintVertexAttributes.length;t++)e.push(n.paintVertexAttributes[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof Es||n instanceof Ts||n instanceof Ss)for(const t of n.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const t=[];for(const n in this.binders){const i=this.binders[n];if(i instanceof Es||i instanceof Ts||i instanceof Ss)for(const r of i.uniformNames)t.push({name:r,property:n,binding:i.getBinding(e,r)})}return t}setUniforms(e,t,n,i,r){for(const{name:t,property:a,binding:o}of n)this.binders[a].setUniform(e,o,r,i.get(a),t)}updatePaintBuffers(){this._buffers=[];for(const e in this.binders){const t=this.binders[e];(t instanceof Cs||t instanceof Ss||t instanceof Ps)&&t.paintVertexBuffer&&this._buffers.push(t.paintVertexBuffer)}}upload(e){for(const t in this.binders){const n=this.binders[t];(n instanceof Cs||n instanceof Ss||n instanceof Ps)&&n.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof Cs||t instanceof Ss||t instanceof Ps)&&t.destroy()}}}class Is{constructor(e,t,n=(()=>!0)){this.programConfigurations={};for(const i of e)this.programConfigurations[i.id]=new Ms(i,t,n);this.needsUpload=!1,this._featureMap=new ms,this._bufferOffset=0}populatePaintArrays(e,t,n,i,r,a,o){for(const n in this.programConfigurations)this.programConfigurations[n].populatePaintArrays(e,t,i,r,a,o);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,n,i,r){for(const a of n)this.needsUpload=this.programConfigurations[a.id].updatePaintArrays(e,this._featureMap,t,a,i,r)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const As={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function js(e,t){return As[e]||[e.replace(t+"-","").replace(/-/g,"_")]}const Ls={"line-pattern":{source:So,composite:So},"fill-pattern":{source:So,composite:So},"fill-extrusion-pattern":{source:So,composite:So},"line-dasharray":{source:Po,composite:Po}},Rs={color:{source:Yo,composite:Co},number:{source:Ho,composite:Yo}};function Ns(e,t,n){const i=Ls[e];return i&&i[n]||Rs[t][n]}Br(Es,"ConstantBinder"),Br(Ts,"PatternConstantBinder"),Br(Cs,"SourceExpressionBinder"),Br(Ps,"PatternCompositeBinder"),Br(Ss,"CompositeExpressionBinder"),Br(Ms,"ProgramConfiguration",{omit:["_buffers"]}),Br(Is,"ProgramConfigurationSet");const Ds="-transition";class Bs extends et{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new co(t.layout)),t.paint)){this._transitionablePaint=new oo(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new po(t.paint)}}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t,n={}){null!=t&&this._validate(Ir,`layers.${this.id}.layout.${e}`,e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return F(e,Ds)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t,n={}){if(null!=t&&this._validate(Mr,`layers.${this.id}.paint.${e}`,e,t,n))return!1;if(F(e,Ds))return this._transitionablePaint.setTransition(e.slice(0,-11),t||void 0),!1;{const n=this._transitionablePaint._values[e],i=n.value.isDataDriven(),r=n.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const a=this._transitionablePaint._values[e].value,o=a.isDataDriven(),s=F(e,"pattern")||"line-dasharray"===e;return o||i||s||this._handleOverridablePaintPropertyUpdate(e,r,a)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,t,n){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),H(e,(e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length))}_validate(e,t,n,i,r={}){return(!r||!1!==r.validate)&&jr(this,e.call(Pr,{key:t,layerType:this.type,objectKey:n,value:i,styleSpec:tt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof uo&&Ai(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=rr(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const zs=wo([{name:"a_pos",components:2,type:"Int16"}],4),Fs=wo([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Us{constructor(e=[]){this.segments=e}prepareSegment(e,t,n,i){let r=this.segments[this.segments.length-1];return e>Us.MAX_VERTEX_ARRAY_LENGTH&&V(`Max vertices per segment is ${Us.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!r||r.vertexLength+e>Us.MAX_VERTEX_ARRAY_LENGTH||r.sortKey!==i)&&(r={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==i&&(r.sortKey=i),this.segments.push(r)),r}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,n,i){return new Us([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:i,vaos:{},sortKey:0}])}}Us.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Br(Us,"SegmentVector");var Hs=8192;class Ws{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof vc?new vc(e.lng,e.lat):vc.convert(e),this}setSouthWest(e){return this._sw=e instanceof vc?new vc(e.lng,e.lat):vc.convert(e),this}extend(e){const t=this._sw,n=this._ne;let i,r;if(e instanceof vc)i=e,r=e;else{if(!(e instanceof Ws))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(Ws.convert(e)):this.extend(vc.convert(e)):"object"==typeof e&&null!==e&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(vc.convert(e)):this;if(i=e._sw,r=e._ne,!i||!r)return this}return t||n?(t.lng=Math.min(i.lng,t.lng),t.lat=Math.min(i.lat,t.lat),n.lng=Math.max(r.lng,n.lng),n.lat=Math.max(r.lat,n.lat)):(this._sw=new vc(i.lng,i.lat),this._ne=new vc(r.lng,r.lat)),this}getCenter(){return new vc((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new vc(this.getWest(),this.getNorth())}getSouthEast(){return new vc(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:t,lat:n}=vc.convert(e);let i=this._sw.lng<=t&&t<=this._ne.lng;return this._sw.lng>this._ne.lng&&(i=this._sw.lng>=t&&t>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&i}static convert(e){return!e||e instanceof Ws?e:new Ws(e)}}var qs=1e-6,Vs="undefined"!=typeof Float32Array?Float32Array:Array;function Gs(){var e=new Vs(9);return Vs!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Ys(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],p=n[0],f=n[1],m=n[2],h=n[3],g=n[4],y=n[5],v=n[6],b=n[7],_=n[8];return e[0]=p*i+f*o+m*c,e[1]=p*r+f*s+m*u,e[2]=p*a+f*l+m*d,e[3]=h*i+g*o+y*c,e[4]=h*r+g*s+y*u,e[5]=h*a+g*l+y*d,e[6]=v*i+b*o+_*c,e[7]=v*r+b*s+_*u,e[8]=v*a+b*l+_*d,e}function Zs(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Xs(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8],d=t[9],p=t[10],f=t[11],m=t[12],h=t[13],g=t[14],y=t[15],v=n*s-i*o,b=n*l-r*o,_=n*c-a*o,w=i*l-r*s,x=i*c-a*s,k=r*c-a*l,O=u*h-d*m,E=u*g-p*m,T=u*y-f*m,C=d*g-p*h,S=d*y-f*h,P=p*y-f*g,M=v*P-b*S+_*C+w*T-x*E+k*O;return M?(e[0]=(s*P-l*S+c*C)*(M=1/M),e[1]=(r*S-i*P-a*C)*M,e[2]=(h*k-g*x+y*w)*M,e[3]=(p*x-d*k-f*w)*M,e[4]=(l*T-o*P-c*E)*M,e[5]=(n*P-r*T+a*E)*M,e[6]=(g*_-m*k-y*b)*M,e[7]=(u*k-p*_+f*b)*M,e[8]=(o*S-s*T+c*O)*M,e[9]=(i*T-n*S-a*O)*M,e[10]=(m*x-h*_+y*v)*M,e[11]=(d*_-u*x-f*v)*M,e[12]=(s*E-o*C-l*O)*M,e[13]=(n*C-i*E+r*O)*M,e[14]=(h*b-m*w-g*v)*M,e[15]=(u*w-d*b+p*v)*M,e):null}function Js(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],p=t[9],f=t[10],m=t[11],h=t[12],g=t[13],y=t[14],v=t[15],b=n[0],_=n[1],w=n[2],x=n[3];return e[0]=b*i+_*s+w*d+x*h,e[1]=b*r+_*l+w*p+x*g,e[2]=b*a+_*c+w*f+x*y,e[3]=b*o+_*u+w*m+x*v,e[4]=(b=n[4])*i+(_=n[5])*s+(w=n[6])*d+(x=n[7])*h,e[5]=b*r+_*l+w*p+x*g,e[6]=b*a+_*c+w*f+x*y,e[7]=b*o+_*u+w*m+x*v,e[8]=(b=n[8])*i+(_=n[9])*s+(w=n[10])*d+(x=n[11])*h,e[9]=b*r+_*l+w*p+x*g,e[10]=b*a+_*c+w*f+x*y,e[11]=b*o+_*u+w*m+x*v,e[12]=(b=n[12])*i+(_=n[13])*s+(w=n[14])*d+(x=n[15])*h,e[13]=b*r+_*l+w*p+x*g,e[14]=b*a+_*c+w*f+x*y,e[15]=b*o+_*u+w*m+x*v,e}function Ks(e,t,n){var i,r,a,o,s,l,c,u,d,p,f,m,h=n[0],g=n[1],y=n[2];return t===e?(e[12]=t[0]*h+t[4]*g+t[8]*y+t[12],e[13]=t[1]*h+t[5]*g+t[9]*y+t[13],e[14]=t[2]*h+t[6]*g+t[10]*y+t[14],e[15]=t[3]*h+t[7]*g+t[11]*y+t[15]):(r=t[1],a=t[2],o=t[3],s=t[4],l=t[5],c=t[6],u=t[7],d=t[8],p=t[9],f=t[10],m=t[11],e[0]=i=t[0],e[1]=r,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=d,e[9]=p,e[10]=f,e[11]=m,e[12]=i*h+s*g+d*y+t[12],e[13]=r*h+l*g+p*y+t[13],e[14]=a*h+c*g+f*y+t[14],e[15]=o*h+u*g+m*y+t[15]),e}function $s(e,t,n){var i=n[0],r=n[1],a=n[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Qs(e,t,n){var i=Math.sin(n),r=Math.cos(n),a=t[4],o=t[5],s=t[6],l=t[7],c=t[8],u=t[9],d=t[10],p=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*r+c*i,e[5]=o*r+u*i,e[6]=s*r+d*i,e[7]=l*r+p*i,e[8]=c*r-a*i,e[9]=u*r-o*i,e[10]=d*r-s*i,e[11]=p*r-l*i,e}function el(e,t,n){var i=Math.sin(n),r=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],c=t[8],u=t[9],d=t[10],p=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*r-c*i,e[1]=o*r-u*i,e[2]=s*r-d*i,e[3]=l*r-p*i,e[8]=a*i+c*r,e[9]=o*i+u*r,e[10]=s*i+d*r,e[11]=l*i+p*r,e}function tl(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function nl(e,t,n){var i,r,a,o=n[0],s=n[1],l=n[2],c=Math.hypot(o,s,l);return c<qs?null:(o*=c=1/c,s*=c,l*=c,i=Math.sin(t),r=Math.cos(t),e[0]=o*o*(a=1-r)+r,e[1]=s*o*a+l*i,e[2]=l*o*a-s*i,e[3]=0,e[4]=o*s*a-l*i,e[5]=s*s*a+r,e[6]=l*s*a+o*i,e[7]=0,e[8]=o*l*a+s*i,e[9]=s*l*a-o*i,e[10]=l*l*a+r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var il=Js;function rl(){var e=new Vs(3);return Vs!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function al(e){var t=new Vs(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function ol(e){return Math.hypot(e[0],e[1],e[2])}function sl(e,t,n){var i=new Vs(3);return i[0]=e,i[1]=t,i[2]=n,i}function ll(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function cl(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function ul(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function dl(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function pl(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function fl(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function ml(e,t,n,i){return e[0]=t[0]+n[0]*i,e[1]=t[1]+n[1]*i,e[2]=t[2]+n[2]*i,e}function hl(e,t){var n=t[0],i=t[1],r=t[2],a=n*n+i*i+r*r;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a,e}function gl(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function yl(e,t,n){var i=t[0],r=t[1],a=t[2],o=n[0],s=n[1],l=n[2];return e[0]=r*l-a*s,e[1]=a*o-i*l,e[2]=i*s-r*o,e}function vl(e,t,n){var i=t[0],r=t[1],a=t[2],o=n[3]*i+n[7]*r+n[11]*a+n[15];return e[0]=(n[0]*i+n[4]*r+n[8]*a+n[12])/(o=o||1),e[1]=(n[1]*i+n[5]*r+n[9]*a+n[13])/o,e[2]=(n[2]*i+n[6]*r+n[10]*a+n[14])/o,e}function bl(e,t,n){var i=n[0],r=n[1],a=n[2],o=t[0],s=t[1],l=t[2],c=r*l-a*s,u=a*o-i*l,d=i*s-r*o,p=r*d-a*u,f=a*c-i*d,m=i*u-r*c,h=2*n[3];return u*=h,d*=h,f*=2,m*=2,e[0]=o+(c*=h)+(p*=2),e[1]=s+u+f,e[2]=l+d+m,e}var _l,wl=cl,xl=ul,kl=ol;function Ol(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function El(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=n*n+i*i+r*r+a*a;return o>0&&(o=1/Math.sqrt(o)),e[0]=n*o,e[1]=i*o,e[2]=r*o,e[3]=a*o,e}function Tl(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3];return e[0]=n[0]*i+n[4]*r+n[8]*a+n[12]*o,e[1]=n[1]*i+n[5]*r+n[9]*a+n[13]*o,e[2]=n[2]*i+n[6]*r+n[10]*a+n[14]*o,e[3]=n[3]*i+n[7]*r+n[11]*a+n[15]*o,e}function Cl(){var e=new Vs(4);return Vs!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function Sl(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Pl(e,t,n){n*=.5;var i=t[0],r=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=i*l+o*s,e[1]=r*l+a*s,e[2]=a*l-r*s,e[3]=o*l-i*s,e}function Ml(e,t,n){n*=.5;var i=t[0],r=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=i*l-a*s,e[1]=r*l+o*s,e[2]=a*l+i*s,e[3]=o*l-r*s,e}rl(),_l=new Vs(4),Vs!=Float32Array&&(_l[0]=0,_l[1]=0,_l[2]=0,_l[3]=0);var Il=El;rl(),sl(1,0,0),sl(0,1,0),Cl(),Cl(),Gs();const Al=wo([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:jl}=Al,Ll=wo([{name:"a_pos_3",components:3,type:"Int16"}]);var Rl=wo([{name:"a_pos",type:"Int16",components:2}]);class Nl{constructor(e,t){this.pos=e,this.dir=t}intersectsPlane(e,t,n){const i=gl(t,this.dir);if(Math.abs(i)<1e-6)return!1;const r=((e[0]-this.pos[0])*t[0]+(e[1]-this.pos[1])*t[1]+(e[2]-this.pos[2])*t[2])/i;return n[0]=this.pos[0]+this.dir[0]*r,n[1]=this.pos[1]+this.dir[1]*r,n[2]=this.pos[2]+this.dir[2]*r,!0}closestPointOnSphere(e,t,n){if(function(e,t){var n=e[0],i=e[1],r=e[2],a=t[0],o=t[1],s=t[2];return Math.abs(n-a)<=qs*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-o)<=qs*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(r-s)<=qs*Math.max(1,Math.abs(r),Math.abs(s))}(this.pos,e)||0===t)return n[0]=n[1]=n[2]=0,!1;const[i,r,a]=this.dir,o=this.pos[0]-e[0],s=this.pos[1]-e[1],l=this.pos[2]-e[2],c=i*i+r*r+a*a,u=2*(o*i+s*r+l*a),d=u*u-4*c*(o*o+s*s+l*l-t*t);if(d<0){const e=Math.max(-u/2,0),c=o+i*e,d=s+r*e,p=l+a*e,f=Math.hypot(c,d,p);return n[0]=c*t/f,n[1]=d*t/f,n[2]=p*t/f,!1}{const e=(-u-Math.sqrt(d))/(2*c);if(e<0){const e=Math.hypot(o,s,l);return n[0]=o*t/e,n[1]=s*t/e,n[2]=l*t/e,!1}return n[0]=o+i*e,n[1]=s+r*e,n[2]=l+a*e,!0}}}class Dl{constructor(e,t,n,i,r){this.TL=e,this.TR=t,this.BR=n,this.BL=i,this.horizon=r}static fromInvProjectionMatrix(e,t,n){const i=[-1,1,1],r=[1,1,1],a=[1,-1,1],o=[-1,-1,1],s=vl(i,i,e),l=vl(r,r,e),c=vl(a,a,e),u=vl(o,o,e);return new Dl(s,l,c,u,t/n)}}class Bl{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(e,t,n,i){const r=Math.pow(2,n),a=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(n=>{const a=Tl([],n,e),o=1/a[3]/t*r;return function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}(a,a,[o,o,i?1/a[3]:o,o])}),o=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(e=>{const t=hl([],yl([],wl([],a[e[0]],a[e[1]]),wl([],a[e[2]],a[e[1]]))),n=-gl(t,a[e[1]]);return t.concat(n)});return new Bl(a,o)}}class zl{static fromPoints(e){const t=[1/0,1/0,1/0],n=[-1/0,-1/0,-1/0];for(const i of e)dl(t,t,i),pl(n,n,i);return new zl(t,n)}static applyTransform(e,t){const n=e.getCorners();for(let e=0;e<n.length;++e)vl(n[e],n[e],t);return zl.fromPoints(n)}constructor(e,t){this.min=e,this.max=t,this.center=fl([],ll([],this.min,this.max),.5)}quadrant(e){const t=[e%2==0,e<2],n=al(this.min),i=al(this.max);for(let e=0;e<t.length;e++)n[e]=t[e]?this.min[e]:this.center[e],i[e]=t[e]?this.center[e]:this.max[e];return i[2]=this.max[2],new zl(n,i)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,t=this.max;return[[e[0],e[1],e[2]],[t[0],e[1],e[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],t[2]],[e[0],t[1],t[2]]]}intersects(e){const t=this.getCorners();let n=!0;for(let i=0;i<e.planes.length;i++){const r=e.planes[i];let a=0;for(let e=0;e<t.length;e++)a+=gl(r,t[e])+r[3]>=0;if(0===a)return 0;a!==t.length&&(n=!1)}if(n)return 2;for(let t=0;t<3;t++){let n=Number.MAX_VALUE,i=-Number.MAX_VALUE;for(let r=0;r<e.points.length;r++){const a=e.points[r][t]-this.min[t];n=Math.min(n,a),i=Math.max(i,a)}if(i<0||n>this.max[t]-this.min[t])return 0}return 1}}const Fl=Hs/Math.PI/2,Ul=[64,32,16],Hl=-Fl,Wl=Fl,ql=[new zl([Hl,Hl,Hl],[Wl,Wl,Wl]),new zl([Hl,Hl,Hl],[0,0,Wl]),new zl([0,Hl,Hl],[Wl,0,Wl]),new zl([Hl,0,Hl],[0,Wl,Wl]),new zl([0,0,Hl],[Wl,Wl,Wl])];function Vl(e){return e*Fl/hc}function Gl(e,t,n,i=!0){const r=fl([],e._camera.position,e.worldSize),a=[t,n,1,1];Tl(a,a,e.pixelMatrixInverse),Ol(a,a,1/a[3]);const o=hl([],wl([],a,r)),s=e.globeMatrix,l=[s[12],s[13],s[14]],c=wl([],l,r),u=ol(c),d=hl([],c),p=e.worldSize/(2*Math.PI),f=gl(d,o),m=Math.asin(p/u);if(m<Math.acos(f)){if(!i)return null;const e=[],t=[];fl(e,o,u/f),hl(t,wl(t,e,c)),hl(o,ll(o,c,fl(o,t,Math.tan(m)*u)))}const h=[];new Nl(r,o).closestPointOnSphere(l,p,h);const g=hl([],Q(s,0)),y=hl([],Q(s,1)),v=hl([],Q(s,2)),b=gl(g,h),_=gl(y,h),w=gl(v,h),x=k(Math.asin(-_/p));let O=k(Math.atan2(b,w));O=e.center.lng+function(e,t){const n=(t-e+180)%360-180;return n<-180?n+360:n}(e.center.lng,O);const E=_c(O),T=S(wc(x),0,1);return new Sc(E,T)}class Yl{constructor(e,t,n){this.a=wl([],e,n),this.b=wl([],t,n),this.center=n;const i=hl([],this.a),r=hl([],this.b);this.angle=Math.acos(gl(i,r))}}function Zl(e,t){if(0===e.angle)return null;let n;return n=0===e.a[t]?1/e.angle*.5*Math.PI:1/e.angle*Math.atan(e.b[t]/e.a[t]/Math.sin(e.angle)-1/Math.tan(e.angle)),n<0||n>1?null:function(e,t,n,i){const r=Math.sin(n);return e*(Math.sin((1-i)*n)/r)+t*(Math.sin(i*n)/r)}(e.a[t],e.b[t],e.angle,S(n,0,1))+e.center[t]}function Xl(e){if(e.z<=1)return ql[e.z+2*e.y+e.x];const t=ec(Ql(e));return zl.fromPoints(t)}function Jl(e,t,n){return fl(e,e,1-n),ml(e,e,t,n)}function Kl(e,t){const n=cc(t.zoom);if(0===n)return Xl(e);const i=Ql(e),r=ec(i),a=_c(i.getWest())*t.worldSize,o=_c(i.getEast())*t.worldSize,s=wc(i.getNorth())*t.worldSize,l=wc(i.getSouth())*t.worldSize,c=[a,s,0],u=[o,s,0],d=[a,l,0],p=[o,l,0],f=Xs([],t.globeMatrix);return vl(c,c,f),vl(u,u,f),vl(d,d,f),vl(p,p,f),r[0]=Jl(r[0],d,n),r[1]=Jl(r[1],p,n),r[2]=Jl(r[2],u,n),r[3]=Jl(r[3],c,n),zl.fromPoints(r)}function $l(e,t,n){for(const i of e)vl(i,i,t),fl(i,i,n)}function Ql({x:e,y:t,z:n}){const i=1/(1<<n),r=new vc(kc(e*i),Oc((t+1)*i)),a=new vc(kc((e+1)*i),Oc(t*i));return new Ws(r,a)}function ec(e){const t=x(e.getNorth()),n=x(e.getSouth()),i=Math.cos(t),r=Math.cos(n),a=Math.sin(t),o=Math.sin(n),s=e.getWest(),l=e.getEast();return[tc(r,o,s),tc(r,o,l),tc(i,a,l),tc(i,a,s)]}function tc(e,t,n,i=Fl){return n=x(n),[e*Math.sin(n)*i,-t*i,e*Math.cos(n)*i]}function nc(e,t,n){return tc(Math.cos(x(e)),Math.sin(x(e)),t,n)}function ic(e,t,n,i){const r=1<<n.z,a=(e/Hs+n.x)/r;return nc(Oc((t/Hs+n.y)/r),kc(a),i)}function rc({min:e,max:t}){return 16383/Math.max(t[0]-e[0],t[1]-e[1],t[2]-e[2])}const ac=new Float64Array(16);function oc(e){const t=rc(e),n=tl(ac,[t,t,t]);return Ks(n,n,((i=[])[0]=-(r=e.min)[0],i[1]=-r[1],i[2]=-r[2],i));var i,r}function sc(e){const t=(i=e.min,(n=ac)[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=i[0],n[13]=i[1],n[14]=i[2],n[15]=1,n);var n,i;const r=1/rc(e);return $s(t,t,[r,r,r])}function lc(e,t,n,i,r){const a=function(e){const t=Hs/(2*Math.PI);return e/(2*Math.PI)/t}(n),o=[e,t,-n/(2*Math.PI)],s=Zs(new Float64Array(16));return Ks(s,s,o),$s(s,s,[a,a,a]),Qs(s,s,x(-r)),el(s,s,x(-i)),s}function cc(e){return P(5,6,e)}function uc(e,t){const n=nc(t.lat,t.lng);return a=(i=cl([],function(e){const t=nc(e._center.lat,e._center.lng);let n=yl([],sl(0,1,0),t);const i=nl([],-e.angle,t);n=vl(n,n,i),nl(i,-e._pitch,n);const r=hl([],t);return fl(r,r,Vl(e.cameraToCenterDistance/e.pixelsPerMeter)),vl(r,r,i),ll([],t,r)}(e),n))[0],o=i[1],s=i[2],l=(r=n)[0],c=r[1],u=r[2],p=(d=Math.sqrt(a*a+o*o+s*s)*Math.sqrt(l*l+c*c+u*u))&&gl(i,r)/d,Math.acos(Math.min(Math.max(p,-1),1));var i,r,a,o,s,l,c,u,d,p}function dc(e,t){return uc(e,t)>Math.PI/2*1.01}const pc=x(85),fc=Math.cos(pc),mc=Math.sin(pc),hc=6371008.8,gc=2*Math.PI*hc;class yc{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new yc(M(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const t=Math.PI/180,n=this.lat*t,i=e.lat*t,r=Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos((e.lng-this.lng)*t);return hc*Math.acos(Math.min(r,1))}toBounds(e=0){const t=360*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new Ws(new yc(this.lng-n,this.lat-t),new yc(this.lng+n,this.lat+t))}toEcef(e){const t=Vl(e);return nc(this.lat,this.lng,Fl+t)}static convert(e){if(e instanceof yc)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new yc(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new yc(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}var vc=yc;function bc(e){return gc*Math.cos(e*Math.PI/180)}function _c(e){return(180+e)/360}function wc(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function xc(e,t){return e/bc(t)}function kc(e){return 360*e-180}function Oc(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function Ec(e,t){return e*bc(Oc(t))}const Tc=85.051129;function Cc(e){return 1/Math.cos(e*Math.PI/180)}class Sc{constructor(e,t,n=0){this.x=+e,this.y=+t,this.z=+n}static fromLngLat(e,t=0){const n=vc.convert(e);return new Sc(_c(n.lng),wc(n.lat),xc(t,n.lat))}toLngLat(){return new vc(kc(this.x),Oc(this.y))}toAltitude(){return Ec(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/gc*Cc(Oc(this.y))}}function Pc(e,t,n,i,r,a,o,s,l){const c=(t+i)/2,u=(n+r)/2,d=new b(c,u);s(d),function(e,t,n,i,r,a){const o=n-r,s=i-a;return Math.abs((i-t)*o-(n-e)*s)/Math.hypot(o,s)}(d.x,d.y,a.x,a.y,o.x,o.y)>=l?(Pc(e,t,n,c,u,a,d,s,l),Pc(e,c,u,i,r,d,o,s,l)):e.push(o)}function Mc(e,t,n){let i=e[0],r=i.x,a=i.y;t(i);const o=[i];for(let s=1;s<e.length;s++){const l=e[s],{x:c,y:u}=l;t(l),Pc(o,r,a,c,u,i,l,t,n),r=c,a=u,i=l}return o}function Ic(e,t,n,i){if(i(t,n)){const r=t.add(n)._mult(.5);Ic(e,t,r,i),Ic(e,r,n,i)}else e.push(n)}function Ac(e,t){let n=e[0];const i=[n];for(let r=1;r<e.length;r++){const a=e[r];Ic(i,n,a,t),n=a}return i}const jc=Math.pow(2,14)-1,Lc=-jc-1;function Rc(e,t){const n=Math.round(e.x*t),i=Math.round(e.y*t);return e.x=S(n,Lc,jc),e.y=S(i,Lc,jc),(n<e.x||n>e.x+1||i<e.y||i>e.y+1)&&V("Geometry exceeds allowed extent, reduce your vector tile buffer size"),e}function Nc(e,t,n){const i=e.loadGeometry(),r=e.extent,a=Hs/r;if(t&&n&&n.projection.isReprojectedInTileSpace){const a=1<<t.z,{scale:o,x:s,y:l,projection:c}=n,u=e=>{const n=kc((t.x+e.x/r)/a),i=Oc((t.y+e.y/r)/a),u=c.project(n,i);e.x=(u.x*o-s)*r,e.y=(u.y*o-l)*r};for(let t=0;t<i.length;t++)if(1!==e.type)i[t]=Mc(i[t],u,1);else{const e=[];for(const n of i[t])n.x<0||n.x>=r||n.y<0||n.y>=r||(u(n),e.push(n));i[t]=e}}for(const e of i)for(const t of e)Rc(t,a);return i}function Dc(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?Nc(e):[]}}function Bc(e,t,n,i,r){e.emplaceBack(2*t+(i+1)/2,2*n+(r+1)/2)}function zc(e,t,n){const i=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*i,n[1]*i,n[2]*i)}class Fc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new ko,this.indexArray=new zo,this.segments=new Us,this.programConfigurations=new Is(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,t,n,i){const r=this.layers[0],a=[];let o=null;"circle"===r.type&&(o=r.layout.get("circle-sort-key"));for(const{feature:t,id:r,index:s,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,c=Dc(t,e);if(!this.layers[0]._featureFilter.filter(new io(this.zoom),c,n))continue;const u=o?o.evaluate(c,{},n):void 0,d={id:r,properties:t.properties,type:t.type,sourceLayerIndex:l,index:s,geometry:e?c.geometry:Nc(t,n,i),patterns:{},sortKey:u};a.push(d)}o&&a.sort((e,t)=>e.sortKey-t.sortKey);let s=null;"globe"===i.projection.name&&(this.globeExtVertexArray=new Mo,s=i.projection);for(const i of a){const{geometry:r,index:a,sourceLayerIndex:o}=i,l=e[a].feature;this.addFeature(i,r,a,t.availableImages,n,s),t.featureIndex.insert(l,r,a,o,this.index)}}update(e,t,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,zs.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Fs.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,t,n,i,r,a){for(const n of t)for(const t of n){const n=t.x,i=t.y;if(n<0||n>=Hs||i<0||i>=Hs)continue;if(a){const e=a.projectTilePoint(n,i,r),t=a.upVector(r,n,i),o=this.globeExtVertexArray;zc(o,e,t),zc(o,e,t),zc(o,e,t),zc(o,e,t)}const o=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),s=o.vertexLength;Bc(this.layoutVertexArray,n,i,-1,-1),Bc(this.layoutVertexArray,n,i,1,-1),Bc(this.layoutVertexArray,n,i,1,1),Bc(this.layoutVertexArray,n,i,-1,1),this.indexArray.emplaceBack(s,s+1,s+2),this.indexArray.emplaceBack(s,s+2,s+3),o.vertexLength+=4,o.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},i,r)}}function Uc(e,t){for(let n=0;n<e.length;n++)if(Jc(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(Jc(e,t[n]))return!0;return!!Vc(e,t)}function Hc(e,t,n){return!!Jc(e,t)||!!Yc(t,e,n)}function Wc(e,t){if(1===e.length)return Xc(t,e[0]);for(let n=0;n<t.length;n++){const i=t[n];for(let t=0;t<i.length;t++)if(Jc(e,i[t]))return!0}for(let n=0;n<e.length;n++)if(Xc(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(Vc(e,t[n]))return!0;return!1}function qc(e,t,n){if(e.length>1){if(Vc(e,t))return!0;for(let i=0;i<t.length;i++)if(Yc(t[i],e,n))return!0}for(let i=0;i<e.length;i++)if(Yc(e[i],t,n))return!0;return!1}function Vc(e,t){if(0===e.length||0===t.length)return!1;for(let n=0;n<e.length-1;n++){const i=e[n],r=e[n+1];for(let e=0;e<t.length-1;e++)if(Gc(i,r,t[e],t[e+1]))return!0}return!1}function Gc(e,t,n,i){return G(e,n,i)!==G(t,n,i)&&G(e,t,n)!==G(e,t,i)}function Yc(e,t,n){const i=n*n;if(1===t.length)return e.distSqr(t[0])<i;for(let n=1;n<t.length;n++)if(Zc(e,t[n-1],t[n])<i)return!0;return!1}function Zc(e,t,n){const i=t.distSqr(n);if(0===i)return e.distSqr(t);const r=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/i;return e.distSqr(r<0?t:r>1?n:n.sub(t)._mult(r)._add(t))}function Xc(e,t){let n,i,r,a=!1;for(let o=0;o<e.length;o++){n=e[o];for(let e=0,o=n.length-1;e<n.length;o=e++)i=n[e],r=n[o],i.y>t.y!=r.y>t.y&&t.x<(r.x-i.x)*(t.y-i.y)/(r.y-i.y)+i.x&&(a=!a)}return a}function Jc(e,t){let n=!1;for(let i=0,r=e.length-1;i<e.length;r=i++){const a=e[i],o=e[r];a.y>t.y!=o.y>t.y&&t.x<(o.x-a.x)*(t.y-a.y)/(o.y-a.y)+a.x&&(n=!n)}return n}function Kc(e,t,n,i,r){for(const a of e)if(t<=a.x&&n<=a.y&&i>=a.x&&r>=a.y)return!0;const a=[new b(t,n),new b(t,r),new b(i,r),new b(i,n)];if(e.length>2)for(const t of a)if(Jc(e,t))return!0;for(let t=0;t<e.length-1;t++)if($c(e[t],e[t+1],a))return!0;return!1}function $c(e,t,n){const i=n[0],r=n[2];if(e.x<i.x&&t.x<i.x||e.x>r.x&&t.x>r.x||e.y<i.y&&t.y<i.y||e.y>r.y&&t.y>r.y)return!1;const a=G(e,t,n[0]);return a!==G(e,t,n[1])||a!==G(e,t,n[2])||a!==G(e,t,n[3])}function Qc(e,t,n){const i=t.paint.get(e).value;return"constant"===i.kind?i.value:n.programConfigurations.get(t.id).getMaxValue(e)}function eu(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function tu(e,t,n,i,r){if(!t[0]&&!t[1])return e;const a=b.convert(t)._mult(r);"viewport"===n&&a._rotate(-i);const o=[];for(let t=0;t<e.length;t++)o.push(e[t].sub(a));return o}function nu(e,t,n,i){const r=b.convert(e)._mult(i);return"viewport"===t&&r._rotate(-n),r}Br(Fc,"CircleBucket",{omit:["layers"]});const iu=new go({"circle-sort-key":new mo(tt.layout_circle["circle-sort-key"])});var ru={paint:new go({"circle-radius":new mo(tt.paint_circle["circle-radius"]),"circle-color":new mo(tt.paint_circle["circle-color"]),"circle-blur":new mo(tt.paint_circle["circle-blur"]),"circle-opacity":new mo(tt.paint_circle["circle-opacity"]),"circle-translate":new fo(tt.paint_circle["circle-translate"]),"circle-translate-anchor":new fo(tt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new fo(tt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new fo(tt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new mo(tt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new mo(tt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new mo(tt.paint_circle["circle-stroke-opacity"])}),layout:iu};function au(e,t,n,i,r,a,o,s,l){if(a&&e.queryGeometry.isAboveHorizon)return!1;a&&(l*=e.pixelToTileUnitsFactor);const c=e.tileID.canonical,u=n.projection.upVectorScale(c,n.center.lat,n.worldSize).metersToTile;for(const d of t)for(const t of d){const d=t.add(s),p=r&&n.elevation?n.elevation.exaggeration()*r.getElevationAt(d.x,d.y,!0):0,f=n.projection.projectTilePoint(d.x,d.y,c);if(p>0){const e=n.projection.upVector(c,d.x,d.y);f.x+=e[0]*u*p,f.y+=e[1]*u*p,f.z+=e[2]*u*p}const m=a?d:ou(f.x,f.y,f.z,i),h=a?e.tilespaceRays.map(e=>cu(e,p)):e.queryGeometry.screenGeometry,g=Tl([],[f.x,f.y,f.z,1],i);if(!o&&a?l*=g[3]/n.cameraToCenterDistance:o&&!a&&(l*=n.cameraToCenterDistance/g[3]),a){const e=Oc((t.y/Hs+c.y)/(1<<c.z));l/=n.projection.pixelsPerMeter(e,1)/xc(1,e)}if(Hc(h,m,l))return!0}return!1}function ou(e,t,n,i){const r=Tl([],[e,t,n,1],i);return new b(r[0]/r[3],r[1]/r[3])}const su=sl(0,0,0),lu=sl(0,0,1);function cu(e,t){const n=rl();return su[2]=t,e.intersectsPlane(su,lu,n),new b(n[0],n[1])}class uu extends Fc{}function du(e,{width:t,height:n},i,r){if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==t*n*i)throw new RangeError("mismatched image size")}else r=new Uint8Array(t*n*i);return e.width=t,e.height=n,e.data=r,e}function pu(e,t,n){const{width:i,height:r}=t;i===e.width&&r===e.height||(fu(e,t,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,i),height:Math.min(e.height,r)},n),e.width=i,e.height=r,e.data=t.data)}function fu(e,t,n,i,r,a){if(0===r.width||0===r.height)return t;if(r.width>e.width||r.height>e.height||n.x>e.width-r.width||n.y>e.height-r.height)throw new RangeError("out of range source coordinates for image copy");if(r.width>t.width||r.height>t.height||i.x>t.width-r.width||i.y>t.height-r.height)throw new RangeError("out of range destination coordinates for image copy");const o=e.data,s=t.data;for(let l=0;l<r.height;l++){const c=((n.y+l)*e.width+n.x)*a,u=((i.y+l)*t.width+i.x)*a;for(let e=0;e<r.width*a;e++)s[u+e]=o[c+e]}return t}Br(uu,"HeatmapBucket",{omit:["layers"]});class mu{constructor(e,t){du(this,e,1,t)}resize(e){pu(this,new mu(e),1)}clone(){return new mu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,i,r){fu(e,t,n,i,r,1)}}class hu{constructor(e,t){du(this,e,4,t)}resize(e){pu(this,new hu(e),4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new hu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,i,r){fu(e,t,n,i,r,4)}}Br(mu,"AlphaImage"),Br(hu,"RGBAImage");var gu={paint:new go({"heatmap-radius":new mo(tt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new mo(tt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new fo(tt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ho(tt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new fo(tt.paint_heatmap["heatmap-opacity"])})};function yu(e){const t={},n=e.resolution||256,i=e.clips?e.clips.length:1,r=e.image||new hu({width:n,height:i}),a=(n,i,a)=>{t[e.evaluationKey]=a;const o=e.expression.evaluate(t);r.data[n+i+0]=Math.floor(255*o.r/o.a),r.data[n+i+1]=Math.floor(255*o.g/o.a),r.data[n+i+2]=Math.floor(255*o.b/o.a),r.data[n+i+3]=Math.floor(255*o.a)};if(e.clips)for(let t=0,r=0;t<i;++t,r+=4*n)for(let i=0,o=0;i<n;i++,o+=4){const s=i/(n-1),{start:l,end:c}=e.clips[t];a(r,o,l*(1-s)+c*s)}else for(let e=0,t=0;e<n;e++,t+=4)a(0,t,e/(n-1));return r}var vu={paint:new go({"hillshade-illumination-direction":new fo(tt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new fo(tt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new fo(tt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new fo(tt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new fo(tt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new fo(tt.paint_hillshade["hillshade-accent-color"])})};const bu=wo([{name:"a_pos",components:2,type:"Int16"}],4),{members:_u}=bu;var wu={exports:{}};function xu(e,t,n){n=n||2;var i,r,a,o,s,l,c,u=t&&t.length,d=u?t[0]*n:e.length,p=ku(e,0,d,n,!0),f=[];if(!p||p.next===p.prev)return f;if(u&&(p=function(e,t,n,i){var r,a,o,s=[];for(r=0,a=t.length;r<a;r++)(o=ku(e,t[r]*i,r<a-1?t[r+1]*i:e.length,i,!1))===o.next&&(o.steiner=!0),s.push(Lu(o));for(s.sort(Mu),r=0;r<s.length;r++)n=Iu(s[r],n);return n}(e,t,p,n)),e.length>80*n){i=a=e[0],r=o=e[1];for(var m=n;m<d;m+=n)(s=e[m])<i&&(i=s),(l=e[m+1])<r&&(r=l),s>a&&(a=s),l>o&&(o=l);c=0!==(c=Math.max(a-i,o-r))?32767/c:0}return Eu(p,f,n,i,r,c,0),f}function ku(e,t,n,i,r){var a,o;if(r===Yu(e,t,n,i)>0)for(a=t;a<n;a+=i)o=qu(a,e[a],e[a+1],o);else for(a=n-i;a>=t;a-=i)o=qu(a,e[a],e[a+1],o);return o&&Bu(o,o.next)&&(Vu(o),o=o.next),o}function Ou(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!Bu(i,i.next)&&0!==Du(i.prev,i,i.next))i=i.next;else{if(Vu(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function Eu(e,t,n,i,r,a,o){if(e){!o&&a&&function(e,t,n,i){var r=e;do{0===r.z&&(r.z=ju(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,a,o,s,l,c=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,i=n,s=0,t=0;t<c&&(s++,i=i.nextZ);t++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;n=i}a.nextZ=null,c*=2}while(o>1)}(r)}(e,i,r,a);for(var s,l,c=e;e.prev!==e.next;)if(s=e.prev,l=e.next,a?Cu(e,i,r,a):Tu(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),Vu(e),e=l.next,c=l.next;else if((e=l)===c){o?1===o?Eu(e=Su(Ou(e),t,n),t,n,i,r,a,2):2===o&&Pu(e,t,n,i,r,a):Eu(Ou(e),t,n,i,r,a,1);break}}}function Tu(e){var t=e.prev,n=e,i=e.next;if(Du(t,n,i)>=0)return!1;for(var r=t.x,a=n.x,o=i.x,s=t.y,l=n.y,c=i.y,u=r<a?r<o?r:o:a<o?a:o,d=s<l?s<c?s:c:l<c?l:c,p=r>a?r>o?r:o:a>o?a:o,f=s>l?s>c?s:c:l>c?l:c,m=i.next;m!==t;){if(m.x>=u&&m.x<=p&&m.y>=d&&m.y<=f&&Ru(r,s,a,l,o,c,m.x,m.y)&&Du(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function Cu(e,t,n,i){var r=e.prev,a=e,o=e.next;if(Du(r,a,o)>=0)return!1;for(var s=r.x,l=a.x,c=o.x,u=r.y,d=a.y,p=o.y,f=s<l?s<c?s:c:l<c?l:c,m=u<d?u<p?u:p:d<p?d:p,h=s>l?s>c?s:c:l>c?l:c,g=u>d?u>p?u:p:d>p?d:p,y=ju(f,m,t,n,i),v=ju(h,g,t,n,i),b=e.prevZ,_=e.nextZ;b&&b.z>=y&&_&&_.z<=v;){if(b.x>=f&&b.x<=h&&b.y>=m&&b.y<=g&&b!==r&&b!==o&&Ru(s,u,l,d,c,p,b.x,b.y)&&Du(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,_.x>=f&&_.x<=h&&_.y>=m&&_.y<=g&&_!==r&&_!==o&&Ru(s,u,l,d,c,p,_.x,_.y)&&Du(_.prev,_,_.next)>=0)return!1;_=_.nextZ}for(;b&&b.z>=y;){if(b.x>=f&&b.x<=h&&b.y>=m&&b.y<=g&&b!==r&&b!==o&&Ru(s,u,l,d,c,p,b.x,b.y)&&Du(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;_&&_.z<=v;){if(_.x>=f&&_.x<=h&&_.y>=m&&_.y<=g&&_!==r&&_!==o&&Ru(s,u,l,d,c,p,_.x,_.y)&&Du(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function Su(e,t,n){var i=e;do{var r=i.prev,a=i.next.next;!Bu(r,a)&&zu(r,i,i.next,a)&&Hu(r,a)&&Hu(a,r)&&(t.push(r.i/n|0),t.push(i.i/n|0),t.push(a.i/n|0),Vu(i),Vu(i.next),i=e=a),i=i.next}while(i!==e);return Ou(i)}function Pu(e,t,n,i,r,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Nu(o,s)){var l=Wu(o,s);return o=Ou(o,o.next),l=Ou(l,l.next),Eu(o,t,n,i,r,a,0),void Eu(l,t,n,i,r,a,0)}s=s.next}o=o.next}while(o!==e)}function Mu(e,t){return e.x-t.x}function Iu(e,t){var n=function(e,t){var n,i=t,r=e.x,a=e.y,o=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var s=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>o&&(o=s,n=i.x<i.next.x?i:i.next,s===r))return n}i=i.next}while(i!==t);if(!n)return null;var l,c=n,u=n.x,d=n.y,p=1/0;i=n;do{r>=i.x&&i.x>=u&&r!==i.x&&Ru(a<d?r:o,a,u,d,a<d?o:r,a,i.x,i.y)&&(l=Math.abs(a-i.y)/(r-i.x),Hu(i,e)&&(l<p||l===p&&(i.x>n.x||i.x===n.x&&Au(n,i)))&&(n=i,p=l)),i=i.next}while(i!==c);return n}(e,t);if(!n)return t;var i=Wu(n,e);return Ou(i,i.next),Ou(n,n.next)}function Au(e,t){return Du(e.prev,e,t.prev)<0&&Du(t.next,e,e.next)<0}function ju(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Lu(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Ru(e,t,n,i,r,a,o,s){return(r-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(i-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(r-o)*(i-s)}function Nu(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&zu(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Hu(e,t)&&Hu(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(Du(e.prev,e,t.prev)||Du(e,t.prev,t))||Bu(e,t)&&Du(e.prev,e,e.next)>0&&Du(t.prev,t,t.next)>0)}function Du(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Bu(e,t){return e.x===t.x&&e.y===t.y}function zu(e,t,n,i){var r=Uu(Du(e,t,n)),a=Uu(Du(e,t,i)),o=Uu(Du(n,i,e)),s=Uu(Du(n,i,t));return r!==a&&o!==s||!(0!==r||!Fu(e,n,t))||!(0!==a||!Fu(e,i,t))||!(0!==o||!Fu(n,e,i))||!(0!==s||!Fu(n,t,i))}function Fu(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Uu(e){return e>0?1:e<0?-1:0}function Hu(e,t){return Du(e.prev,e,e.next)<0?Du(e,t,e.next)>=0&&Du(e,e.prev,t)>=0:Du(e,t,e.prev)<0||Du(e,e.next,t)<0}function Wu(e,t){var n=new Gu(e.i,e.x,e.y),i=new Gu(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function qu(e,t,n,i){var r=new Gu(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Vu(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Gu(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Yu(e,t,n,i){for(var r=0,a=t,o=n-i;a<n;a+=i)r+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return r}wu.exports=xu,wu.exports.default=xu,xu.deviation=function(e,t,n,i){var r=t&&t.length,a=Math.abs(Yu(e,0,r?t[0]*n:e.length,n));if(r)for(var o=0,s=t.length;o<s;o++)a-=Math.abs(Yu(e,t[o]*n,o<s-1?t[o+1]*n:e.length,n));var l=0;for(o=0;o<i.length;o+=3){var c=i[o]*n,u=i[o+1]*n,d=i[o+2]*n;l+=Math.abs((e[c]-e[d])*(e[u+1]-e[c+1])-(e[c]-e[u])*(e[d+1]-e[c+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},xu.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},i=0,r=0;r<e.length;r++){for(var a=0;a<e[r].length;a++)for(var o=0;o<t;o++)n.vertices.push(e[r][a][o]);r>0&&n.holes.push(i+=e[r-1].length)}return n};var Zu=f(wu.exports);function Xu(e,t,n,i,r){!function e(t,n,i,r,a){for(;r>i;){if(r-i>600){var o=r-i+1,s=n-i+1,l=Math.log(o),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(o-c)/o)*(s-o/2<0?-1:1);e(t,n,Math.max(i,Math.floor(n-s*c/o+u)),Math.min(r,Math.floor(n+(o-s)*c/o+u)),a)}var d=t[n],p=i,f=r;for(Ju(t,i,n),a(t[r],d)>0&&Ju(t,i,r);p<f;){for(Ju(t,p,f),p++,f--;a(t[p],d)<0;)p++;for(;a(t[f],d)>0;)f--}0===a(t[i],d)?Ju(t,i,f):Ju(t,++f,r),f<=n&&(i=f+1),n<=f&&(r=f-1)}}(e,t,n||0,i||e.length-1,r||Ku)}function Ju(e,t,n){var i=e[t];e[t]=e[n],e[n]=i}function Ku(e,t){return e<t?-1:e>t?1:0}function $u(e,t){const n=e.length;if(n<=1)return[e];const i=[];let r,a;for(let t=0;t<n;t++){const n=Y(e[t]);0!==n&&(e[t].area=Math.abs(n),void 0===a&&(a=n<0),a===n<0?(r&&i.push(r),r=[e[t]]):r.push(e[t]))}if(r&&i.push(r),t>1)for(let e=0;e<i.length;e++)i[e].length<=t||(Xu(i[e],t,1,i[e].length-1,Qu),i[e]=i[e].slice(0,t));return i}function Qu(e,t){return t.area-e.area}function ed(e,t,n){const i=n.patternDependencies;let r=!1;for(const n of t){const t=n.paint.get(e+"-pattern");t.isConstant()||(r=!0);const a=t.constantOr(null);a&&(r=!0,i[a]=!0)}return r}function td(e,t,n,i,r){const a=r.patternDependencies;for(const o of t){const t=o.paint.get(e+"-pattern").value;if("constant"!==t.kind){let e=t.evaluate({zoom:i},n,{},r.availableImages);e=e&&e.name?e.name:e,a[e]=!0,n.patterns[o.id]=e}}return n}class nd{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ko,this.indexArray=new zo,this.indexArray2=new Vo,this.programConfigurations=new Is(e.layers,e.zoom),this.segments=new Us,this.segments2=new Us,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.projection=e.projection}populate(e,t,n,i){this.hasPattern=ed("fill",this.layers,t);const r=this.layers[0].layout.get("fill-sort-key"),a=[];for(const{feature:o,id:s,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,u=Dc(o,e);if(!this.layers[0]._featureFilter.filter(new io(this.zoom),u,n))continue;const d=r?r.evaluate(u,{},n,t.availableImages):void 0,p={id:s,properties:o.properties,type:o.type,sourceLayerIndex:c,index:l,geometry:e?u.geometry:Nc(o,n,i),patterns:{},sortKey:d};a.push(p)}r&&a.sort((e,t)=>e.sortKey-t.sortKey);for(const i of a){const{geometry:r,index:a,sourceLayerIndex:o}=i;if(this.hasPattern){const e=td("fill",this.layers,i,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(i,r,a,n,{},t.availableImages);t.featureIndex.insert(e[a].feature,r,a,o,this.index)}}update(e,t,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,i)}addFeatures(e,t,n,i,r){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,n,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,_u),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,n,i,r,a=[]){for(const e of $u(t,500)){let t=0;for(const n of e)t+=n.length;const n=this.segments.prepareSegment(t,this.layoutVertexArray,this.indexArray),i=n.vertexLength,r=[],a=[];for(const t of e){if(0===t.length)continue;t!==e[0]&&a.push(r.length/2);const n=this.segments2.prepareSegment(t.length,this.layoutVertexArray,this.indexArray2),i=n.vertexLength;this.layoutVertexArray.emplaceBack(t[0].x,t[0].y),this.indexArray2.emplaceBack(i+t.length-1,i),r.push(t[0].x),r.push(t[0].y);for(let e=1;e<t.length;e++)this.layoutVertexArray.emplaceBack(t[e].x,t[e].y),this.indexArray2.emplaceBack(i+e-1,i+e),r.push(t[e].x),r.push(t[e].y);n.vertexLength+=t.length,n.primitiveLength+=t.length}const o=Zu(r,a);for(let e=0;e<o.length;e+=3)this.indexArray.emplaceBack(i+o[e],i+o[e+1],i+o[e+2]);n.vertexLength+=t,n.primitiveLength+=o.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r,a,i)}}Br(nd,"FillBucket",{omit:["layers","patternFeatures"]});const id=new go({"fill-sort-key":new mo(tt.layout_fill["fill-sort-key"])});var rd={paint:new go({"fill-antialias":new fo(tt.paint_fill["fill-antialias"]),"fill-opacity":new mo(tt.paint_fill["fill-opacity"]),"fill-color":new mo(tt.paint_fill["fill-color"]),"fill-outline-color":new mo(tt.paint_fill["fill-outline-color"]),"fill-translate":new fo(tt.paint_fill["fill-translate"]),"fill-translate-anchor":new fo(tt.paint_fill["fill-translate-anchor"]),"fill-pattern":new mo(tt.paint_fill["fill-pattern"])}),layout:id};const ad=wo([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),od=wo([{name:"a_centroid_pos",components:2,type:"Uint16"}]),sd=wo([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:ld}=ad;var cd={},ud=y,dd=pd;function pd(e,t,n,i,r){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=i,this._values=r,e.readFields(fd,this,t)}function fd(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var i=t._keys[e.readVarint()],r=t._values[e.readVarint()];t.properties[i]=r}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function md(e){for(var t,n,i=0,r=0,a=e.length,o=a-1;r<a;o=r++)i+=((n=e[o]).x-(t=e[r]).x)*(t.y+n.y);return i}pd.types=["Unknown","Point","LineString","Polygon"],pd.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,i=1,r=0,a=0,o=0,s=[];e.pos<n;){if(r<=0){var l=e.readVarint();i=7&l,r=l>>3}if(r--,1===i||2===i)a+=e.readSVarint(),o+=e.readSVarint(),1===i&&(t&&s.push(t),t=[]),t.push(new ud(a,o));else{if(7!==i)throw new Error("unknown command "+i);t&&t.push(t[0].clone())}}return t&&s.push(t),s},pd.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,i=0,r=0,a=0,o=1/0,s=-1/0,l=1/0,c=-1/0;e.pos<t;){if(i<=0){var u=e.readVarint();n=7&u,i=u>>3}if(i--,1===n||2===n)(r+=e.readSVarint())<o&&(o=r),r>s&&(s=r),(a+=e.readSVarint())<l&&(l=a),a>c&&(c=a);else if(7!==n)throw new Error("unknown command "+n)}return[o,l,s,c]},pd.prototype.toGeoJSON=function(e,t,n){var i,r,a=this.extent*Math.pow(2,n),o=this.extent*e,s=this.extent*t,l=this.loadGeometry(),c=pd.types[this.type];function u(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+o)/a-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/a)*Math.PI/180))-90]}}switch(this.type){case 1:var d=[];for(i=0;i<l.length;i++)d[i]=l[i][0];u(l=d);break;case 2:for(i=0;i<l.length;i++)u(l[i]);break;case 3:for(l=function(e){var t=e.length;if(t<=1)return[e];for(var n,i,r=[],a=0;a<t;a++){var o=md(e[a]);0!==o&&(void 0===i&&(i=o<0),i===o<0?(n&&r.push(n),n=[e[a]]):n.push(e[a]))}return n&&r.push(n),r}(l),i=0;i<l.length;i++)for(r=0;r<l[i].length;r++)u(l[i][r])}1===l.length?l=l[0]:c="Multi"+c;var p={type:"Feature",geometry:{type:c,coordinates:l},properties:this.properties};return"id"in this&&(p.id=this.id),p};var hd=dd,gd=yd;function yd(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(vd,this,t),this.length=this._features.length}function vd(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var i=e.readVarint()>>3;t=1===i?e.readString():2===i?e.readFloat():3===i?e.readDouble():4===i?e.readVarint64():5===i?e.readVarint():6===i?e.readSVarint():7===i?e.readBoolean():null}return t}(n))}yd.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new hd(this._pbf,t,this.extent,this._keys,this._values)};var bd=gd;function _d(e,t,n){if(3===e){var i=new bd(n,n.readVarint()+n.pos);i.length&&(t[i.name]=i)}}var wd=cd.VectorTile=function(e,t){this.layers=e.readFields(_d,{},t)},xd=cd.VectorTileFeature=dd;function kd(e,t,n,i){const r=[],a=0===i?(e,t,n,i,r,a)=>{e.push(new b(a,n+(a-t)/(i-t)*(r-n)))}:(e,t,n,i,r,a)=>{e.push(new b(t+(a-n)/(r-n)*(i-t),a))};for(const o of e){const e=[];for(const r of o){if(r.length<=2)continue;const o=[];for(let e=0;e<r.length-1;e++){const s=r[e].x,l=r[e].y,c=r[e+1].x,u=r[e+1].y,d=0===i?s:l,p=0===i?c:u;d<t?p>t&&a(o,s,l,c,u,t):d>n?p<n&&a(o,s,l,c,u,n):o.push(r[e]),p<t&&d>=t&&a(o,s,l,c,u,t),p>n&&d<=n&&a(o,s,l,c,u,n)}let s=r[r.length-1];const l=0===i?s.x:s.y;l>=t&&l<=n&&o.push(s),o.length&&(s=o[o.length-1],o[0].x===s.x&&o[0].y===s.y||o.push(o[0]),e.push(o))}e.length&&r.push(e)}return r}cd.VectorTileLayer=gd;const Od=xd.types,Ed=Math.pow(2,13);function Td(e,t,n,i,r,a,o,s){e.emplaceBack((t<<1)+o,(n<<1)+a,(Math.floor(i*Ed)<<1)+r,Math.round(s))}function Cd(e,t,n){const i=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*i,n[1]*i,n[2]*i)}class Sd{constructor(){this.acc=new b(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new b(e.x,e.y),this.max=new b(e.x,e.y))}append(e,t){this.currentPolyCount.edges++,this.acc._add(e);const n=this.min,i=this.max;e.x<n.x?n.x=e.x:e.x>i.x&&(i.x=e.x),e.y<n.y?n.y=e.y:e.y>i.y&&(i.y=e.y),((0===e.x||e.x===Hs)&&e.x===t.x)!=((0===e.y||e.y===Hs)&&e.y===t.y)&&this.processBorderOverlap(e,t),t.x<0!=e.x<0&&this.addBorderIntersection(0,An(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>Hs!=e.x>Hs&&this.addBorderIntersection(1,An(t.y,e.y,(Hs-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,An(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>Hs!=e.y>Hs&&this.addBorderIntersection(3,An(t.x,e.x,(Hs-t.y)/(e.y-t.y)))}addBorderIntersection(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const n=this.borders[e];t<n[0]&&(n[0]=t),t>n[1]&&(n[1]=t)}processBorderOverlap(e,t){if(e.x===t.x){if(e.y===t.y)return;const n=0===e.x?0:1;this.addBorderIntersection(n,t.y),this.addBorderIntersection(n,e.y)}else{const n=0===e.y?2:3;this.addBorderIntersection(n,t.x),this.addBorderIntersection(n,e.x)}}centroid(){const e=this.polyCount.reduce((e,t)=>e+t.edges,0);return 0!==e?this.acc.div(e)._round():new b(0,0)}span(){return new b(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((e,t)=>e+ +(t[0]!==Number.MAX_VALUE),0)}}class Pd{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.layoutVertexArray=new Eo,this.centroidVertexArray=new rs,this.indexArray=new zo,this.programConfigurations=new Is(e.layers,e.zoom),this.segments=new Us,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.enableTerrain=e.enableTerrain}populate(e,t,n,i){this.features=[],this.hasPattern=ed("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(e){const t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/Hs/(1<<e.z)}(n),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:r,id:a,index:o,sourceLayerIndex:s}of e){const e=this.layers[0]._featureFilter.needGeometry,l=Dc(r,e);if(!this.layers[0]._featureFilter.filter(new io(this.zoom),l,n))continue;const c={id:a,sourceLayerIndex:s,index:o,geometry:e?l.geometry:Nc(r,n,i),properties:r.properties,type:r.type,patterns:{}},u=this.layoutVertexArray.length;this.hasPattern?this.features.push(td("fill-extrusion",this.layers,c,this.zoom,t)):this.addFeature(c,c.geometry,o,n,{},t.availableImages,i),t.featureIndex.insert(r,c.geometry,o,s,this.index,u)}this.sortBorders()}addFeatures(e,t,n,i,r){for(const e of this.features){const{geometry:a}=e;this.addFeature(e,a,e.index,t,n,i,r)}this.sortBorders()}update(e,t,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,ld),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,sd.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,od.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,n,i,r,a,o){const s=[new b(0,0),new b(Hs,Hs)],l=o.projection,c="globe"===l.name,u=this.enableTerrain&&!c?new Sd:null,d="Polygon"===Od[e.type];c&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Mo);const p=$u(t,500);for(let e=p.length-1;e>=0;e--){const t=p[e];(0===t.length||(f=t[0]).every(e=>e.x<=0)||f.every(e=>e.x>=Hs)||f.every(e=>e.y<=0)||f.every(e=>e.y>=Hs))&&p.splice(e,1)}var f;let m;if(c)m=Dd(p,s,i);else{m=[];for(const e of p)m.push({polygon:e,bounds:s})}const h=d?this.edgeRadius:0;for(const{polygon:e,bounds:t}of m){let n=0,r=0;for(const t of e)d&&!t[0].equals(t[t.length-1])&&t.push(t[0]),r+=d?t.length-1:t.length;const a=this.segments.prepareSegment((d?5:4)*r,this.layoutVertexArray,this.indexArray);if(d){const t=[],r=[];n=a.vertexLength;for(const n of e){let o,s;n.length&&n!==e[0]&&r.push(t.length/2),o=n[1].sub(n[0])._perp()._unit();for(let e=1;e<n.length;e++){const r=n[e],u=n[e===n.length-1?1:e+1];let{x:d,y:p}=r;if(h){s=u.sub(r)._perp()._unit();const e=o.add(s)._unit(),t=h*Math.min(4,1/(o.x*e.x+o.y*e.y));d+=t*e.x,p+=t*e.y,o=s}Td(this.layoutVertexArray,d,p,0,0,1,1,0),a.vertexLength++,t.push(r.x,r.y),c&&Cd(this.layoutVertexExtArray,l.projectTilePoint(d,p,i),l.upVector(i,d,p))}}const o=Zu(t,r);for(let e=0;e<o.length;e+=3)this.indexArray.emplaceBack(n+o[e],n+o[e+2],n+o[e+1]),a.primitiveLength++}for(const r of e){u&&r.length&&u.startRing(r[0]);let e,o,s,p=r.length>4&&Ld(r[r.length-2],r[0],r[1]),f=h?Id(r[r.length-2],r[0],r[1],h):0;o=r[1].sub(r[0])._perp()._unit();let m=!0;for(let g=1,y=0;g<r.length;g++){let v=r[g-1],b=r[g];const _=r[g===r.length-1?1:g+1];if(u&&d&&u.currentPolyCount.top++,jd(b,v,t)){h&&(o=_.sub(b)._perp()._unit(),m=!m);continue}u&&u.append(b,v);const w=b.sub(v)._perp(),x=w.x/(Math.abs(w.x)+Math.abs(w.y)),k=w.y>0?1:0,O=v.dist(b);if(y+O>32768&&(y=0),h){s=_.sub(b)._perp()._unit();let e=Ad(v,b,_,Md(o,s),h);isNaN(e)&&(e=0);const t=b.sub(v)._unit();v=v.add(t.mult(f))._round(),b=b.add(t.mult(-e))._round(),f=e,o=s}const E=a.vertexLength,T=r.length>4&&Ld(v,b,_);let C=Rd(y,p,m);if(Td(this.layoutVertexArray,v.x,v.y,x,k,0,0,C),Td(this.layoutVertexArray,v.x,v.y,x,k,0,1,C),y+=O,C=Rd(y,T,!m),p=T,Td(this.layoutVertexArray,b.x,b.y,x,k,0,0,C),Td(this.layoutVertexArray,b.x,b.y,x,k,0,1,C),a.vertexLength+=4,this.indexArray.emplaceBack(E+0,E+1,E+2),this.indexArray.emplaceBack(E+1,E+3,E+2),a.primitiveLength+=2,h){const i=n+(1===g?r.length-2:g-2),o=1===g?n:i+1;if(this.indexArray.emplaceBack(E+1,i,E+3),this.indexArray.emplaceBack(i,o,E+3),a.primitiveLength+=2,void 0===e&&(e=E),!jd(_,r[g],t)){const t=g===r.length-1?e:a.vertexLength;this.indexArray.emplaceBack(E+2,E+3,t),this.indexArray.emplaceBack(E+3,t+1,t),this.indexArray.emplaceBack(E+3,o,t+1),a.primitiveLength+=3}m=!m}if(c){const e=this.layoutVertexExtArray,t=l.projectTilePoint(v.x,v.y,i),n=l.projectTilePoint(b.x,b.y,i),r=l.upVector(i,v.x,v.y),a=l.upVector(i,b.x,b.y);Cd(e,t,r),Cd(e,t,r),Cd(e,n,a),Cd(e,n,a)}}d&&(n+=r.length-1)}}if(u&&u.polyCount.length>0){if(u.borders){u.vertexArrayOffset=this.centroidVertexArray.length;const e=u.borders,t=this.featuresOnBorder.push(u)-1;for(let n=0;n<4;n++)e[n][0]!==Number.MAX_VALUE&&this.borders[n].push(t)}this.encodeCentroid(u.borders?void 0:u.centroid(),u)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r,a,i)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort((t,n)=>this.featuresOnBorder[t].borders[e][0]-this.featuresOnBorder[n].borders[e][0])}encodeCentroid(e,t,n=!0){let i,r;if(e)if(0!==e.y){const n=t.span()._mult(this.tileToMeter);i=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(n.x/10)),r=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(n.y/10))}else i=Math.ceil(7*(e.x+450)),r=0;else i=0,r=+n;let a=n?this.centroidVertexArray.length:t.vertexArrayOffset;for(const e of t.polyCount){n&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*e.edges+e.top);for(let t=0;t<e.top;t++)this.centroidVertexArray.emplace(a++,i,r);for(let t=0;t<2*e.edges;t++)this.centroidVertexArray.emplace(a++,0,r),this.centroidVertexArray.emplace(a++,i,r)}}}function Md(e,t){const n=e.add(t)._unit();return e.x*n.x+e.y*n.y}function Id(e,t,n,i){const r=t.sub(e)._perp()._unit(),a=n.sub(t)._perp()._unit();return Ad(e,t,n,Md(r,a),i)}function Ad(e,t,n,i,r){const a=Math.sqrt(1-i*i);return Math.min(e.dist(t)/3,t.dist(n)/3,r*a/i)}function jd(e,t,n){return e.x<n[0].x&&t.x<n[0].x||e.x>n[1].x&&t.x>n[1].x||e.y<n[0].y&&t.y<n[0].y||e.y>n[1].y&&t.y>n[1].y}function Ld(e,t,n){if(e.x<0||e.x>=Hs||t.x<0||t.x>=Hs||n.x<0||n.x>=Hs)return!1;const i=n.sub(t),r=i.perp(),a=e.sub(t);return(i.x*a.x+i.y*a.y)/Math.sqrt((i.x*i.x+i.y*i.y)*(a.x*a.x+a.y*a.y))>-.866&&r.x*a.x+r.y*a.y<0}function Rd(e,t,n){const i=t?2|e:-3&e;return n?1|i:-2&i}function Nd(){const e=Math.PI/32,t=Math.tan(e),n=hc;return n*Math.sqrt(1+2*t*t)-n}function Dd(e,t,n){const i=1<<n.z,r=kc(n.x/i),a=kc((n.x+1)/i),o=Oc(n.y/i),s=Oc((n.y+1)/i);return function(e,t,n,i,r=0,a){const o=[];if(!e.length||!n||!i)return o;const s=(e,t)=>{for(const n of e)o.push({polygon:n,bounds:t})},l=Math.ceil(Math.log2(n)),c=Math.ceil(Math.log2(i)),u=l-c,d=[];for(let e=0;e<Math.abs(u);e++)d.push(u>0?0:1);for(let e=0;e<Math.min(l,c);e++)d.push(0),d.push(1);let p=e;if(p=kd(p,t[0].y-r,t[1].y+r,1),p=kd(p,t[0].x-r,t[1].x+r,0),!p.length)return o;const f=[];for(d.length?f.push({polygons:p,bounds:t,depth:0}):s(p,t);f.length;){const e=f.pop(),t=e.depth,n=d[t],i=e.bounds[0],o=e.bounds[1],l=0===n?i.x:i.y,c=0===n?o.x:o.y,u=a?a(n,l,c):.5*(l+c),p=kd(e.polygons,l-r,u+r,n),m=kd(e.polygons,u-r,c+r,n);if(p.length){const e=[i,new b(0===n?u:o.x,1===n?u:o.y)];d.length>t+1?f.push({polygons:p,bounds:e,depth:t+1}):s(p,e)}if(m.length){const e=[new b(0===n?u:i.x,1===n?u:i.y),o];d.length>t+1?f.push({polygons:m,bounds:e,depth:t+1}):s(m,e)}}return o}(e,t,Math.ceil((a-r)/11.25),Math.ceil((o-s)/11.25),1,(e,t,r)=>{if(0===e)return.5*(t+r);{const e=Oc((n.y+t/Hs)/i);return(wc(.5*(Oc((n.y+r/Hs)/i)+e))*i-n.y)*Hs}})}Br(Pd,"FillExtrusionBucket",{omit:["layers","features"]}),Br(Sd,"PartMetadata");const Bd=new go({"fill-extrusion-edge-radius":new fo(tt["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var zd={paint:new go({"fill-extrusion-opacity":new fo(tt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new mo(tt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new fo(tt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new fo(tt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new mo(tt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new mo(tt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new mo(tt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new fo(tt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new fo(tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new fo(tt["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-rounded-roof":new fo(tt["paint_fill-extrusion"]["fill-extrusion-rounded-roof"])}),layout:Bd};function Fd(e,t,n){var i=2*Math.PI*6378137/256/Math.pow(2,n);return[e*i-2*Math.PI*6378137/2,t*i-2*Math.PI*6378137/2]}class Ud{constructor(e,t,n){this.z=e,this.x=t,this.y=n,this.key=qd(0,e,e,t,n)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t){const n=function(e,t,n){var i=Fd(256*e,256*(t=Math.pow(2,n)-t-1),n),r=Fd(256*(e+1),256*(t+1),n);return i[0]+","+i[1]+","+r[0]+","+r[1]}(this.x,this.y,this.z),i=function(e,t,n){let i,r="";for(let a=e;a>0;a--)i=1<<a-1,r+=(t&i?1:0)+(n&i?2:0);return r}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",i).replace("{bbox-epsg-3857}",n)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Hd{constructor(e,t){this.wrap=e,this.canonical=t,this.key=qd(e,t.z,t.z,t.x,t.y)}}class Wd{constructor(e,t,n,i,r){this.overscaledZ=e,this.wrap=t,this.canonical=new Ud(n,+i,+r),this.key=0===t&&e===n?this.canonical.key:qd(t,e,n,i,r)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const t=this.canonical.z-e;return e>this.canonical.z?new Wd(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Wd(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t=!0){if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return qd(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);{const n=this.canonical.z-e;return qd(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new Wd(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,n=2*this.canonical.x,i=2*this.canonical.y;return[new Wd(t,this.wrap,t,n,i),new Wd(t,this.wrap,t,n+1,i),new Wd(t,this.wrap,t,n,i+1),new Wd(t,this.wrap,t,n+1,i+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Wd(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Wd(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Hd(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function qd(e,t,n,i,r){const a=1<<Math.min(n,22);let o=a*(r%a)+i%a;return e&&n<22&&(o+=a*a*((e<0?-2*e-1:2*e)%(1<<2*(22-n)))),16*(32*o+n)+(t-n)}Br(Ud,"CanonicalTileID"),Br(Wd,"OverscaledTileID",{omit:["projMatrix"]});class Vd extends b{constructor(e,t,n){super(e,t),this.z=n}}function Gd(e,t){return e.x*t.x+e.y*t.y}function Yd(e,t){if(1===e.length){let n=0;const i=t[n++];let r;for(;!r||i.equals(r);)if(r=t[n++],!r)return 1/0;for(;n<t.length;n++){const a=t[n],o=e[0],s=r.sub(i),l=a.sub(i),c=o.sub(i),u=Gd(s,s),d=Gd(s,l),p=Gd(l,l),f=Gd(c,s),m=Gd(c,l),h=u*p-d*d,g=(p*f-d*m)/h,y=(u*m-d*f)/h,v=i.z*(1-g-y)+r.z*g+a.z*y;if(isFinite(v))return v}return 1/0}{let e=1/0;for(const n of t)e=Math.min(e,n.z);return e}}function Zd(e,t,n,i,r,a,o,s){const l=o*r.getElevationAt(e,t,!0,!0),c=0!==a[0],u=c?0===a[1]?o*(a[0]/7-450):o*function(e,t,n){const i=Math.floor(t[0]/8),r=Math.floor(t[1]/8),a=10*(t[0]-8*i),o=10*(t[1]-8*r),s=e.getElevationAt(i,r,!0,!0),l=e.getMeterToDEM(n),c=Math.floor(.5*(a*l-1)),u=Math.floor(.5*(o*l-1)),d=e.tileCoordToPixel(i,r),p=2*c+1,f=2*u+1,m=function(e,t,n,i,r){return[e.getElevationAtPixel(t,n,!0),e.getElevationAtPixel(t+r,n,!0),e.getElevationAtPixel(t,n+r,!0),e.getElevationAtPixel(t+i,n+r,!0)]}(e,d.x-c,d.y-u,p,f),h=Math.abs(m[0]-m[1]),g=Math.abs(m[2]-m[3]),y=Math.abs(m[0]-m[2])+Math.abs(m[1]-m[3]),v=Math.min(.25,.5*l*(h+g)/p),b=Math.min(.25,.5*l*y/f);return s+Math.max(v*a,b*o)}(r,a,s):l;return{base:l+(0===n)?-1:n,top:c?Math.max(u+i,l+n+2):l+i}}const Xd=wo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Jd}=Xd,Kd=wo([{name:"a_packed",components:4,type:"Float32"}]),{members:$d}=Kd,Qd=xd.types,ep=Math.cos(Math.PI/180*37.5);class tp{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(e=>{this.gradients[e.id]={}}),this.layoutVertexArray=new To,this.layoutVertexArray2=new Co,this.indexArray=new zo,this.programConfigurations=new Is(e.layers,e.zoom),this.segments=new Us,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id)}populate(e,t,n,i){this.hasPattern=ed("line",this.layers,t);const r=this.layers[0].layout.get("line-sort-key"),a=[];for(const{feature:t,id:o,index:s,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,c=Dc(t,e);if(!this.layers[0]._featureFilter.filter(new io(this.zoom),c,n))continue;const u=r?r.evaluate(c,{},n):void 0,d={id:o,properties:t.properties,type:t.type,sourceLayerIndex:l,index:s,geometry:e?c.geometry:Nc(t,n,i),patterns:{},sortKey:u};a.push(d)}r&&a.sort((e,t)=>e.sortKey-t.sortKey);const{lineAtlas:o,featureIndex:s}=t,l=this.addConstantDashes(o);for(const i of a){const{geometry:r,index:a,sourceLayerIndex:c}=i;if(l&&this.addFeatureDashes(i,o),this.hasPattern){const e=td("line",this.layers,i,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(i,r,a,n,o.positions,t.availableImages);s.insert(e[a].feature,r,a,c,this.index)}}addConstantDashes(e){let t=!1;for(const n of this.layers){const i=n.paint.get("line-dasharray").value,r=n.layout.get("line-cap").value;if("constant"!==i.kind||"constant"!==r.kind)t=!0;else{const t=r.value,n=i.value;if(!n)continue;e.addDash(n,t)}}return t}addFeatureDashes(e,t){const n=this.zoom;for(const i of this.layers){const r=i.paint.get("line-dasharray").value,a=i.layout.get("line-cap").value;if("constant"===r.kind&&"constant"===a.kind)continue;let o,s;if("constant"===r.kind){if(o=r.value,!o)continue}else o=r.evaluate({zoom:n},e);s="constant"===a.kind?a.value:a.evaluate({zoom:n},e),t.addDash(o,s),e.patterns[i.id]=t.getKey(o,s)}}update(e,t,n,i){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,i)}addFeatures(e,t,n,i,r){for(const e of this.patternFeatures)this.addFeature(e,e.geometry,e.index,t,n,i)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,$d)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Jd),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,n,i,r,a){const o=this.layers[0].layout,s=o.get("line-join").evaluate(e,{}),l=o.get("line-cap").evaluate(e,{}),c=o.get("line-miter-limit"),u=o.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const n of t)this.addLine(n,e,s,l,c,u);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,r,a,i)}addLine(e,t,n,i,r,a){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const o="Polygon"===Qd[t.type];let s=e.length;for(;s>=2&&e[s-1].equals(e[s-2]);)s--;let l=0;for(;l<s-1&&e[l].equals(e[l+1]);)l++;if(s<(o?3:2))return;"bevel"===n&&(r=1.05);const c=this.overscaling<=16?15*Hs/(512*this.overscaling):0,u=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let d,p,f,m,h;this.e1=this.e2=-1,o&&(d=e[s-2],h=e[l].sub(d)._unit()._perp());for(let t=l;t<s;t++){if(f=t===s-1?o?e[l+1]:void 0:e[t+1],f&&e[t].equals(f))continue;h&&(m=h),d&&(p=d),d=e[t],h=f?f.sub(d)._unit()._perp():m,m=m||h;let g=m.add(h);0===g.x&&0===g.y||g._unit();const y=m.x*h.x+m.y*h.y,v=g.x*h.x+g.y*h.y,b=0!==v?1/v:1/0,_=2*Math.sqrt(2-2*v),w=v<ep&&p&&f,x=m.x*h.y-m.y*h.x>0;if(w&&t>l){const e=d.dist(p);if(e>2*c){const t=d.sub(d.sub(p)._mult(c/e)._round());this.updateDistance(p,t),this.addCurrentVertex(t,m,0,0,u),p=t}}const k=p&&f;let O=k?n:o?"butt":i;if(k&&"round"===O&&(b<a?O="miter":b<=2&&(O="fakeround")),"miter"===O&&b>r&&(O="bevel"),"bevel"===O&&(b>2&&(O="flipbevel"),b<r&&(O="miter")),p&&this.updateDistance(p,d),"miter"===O)g._mult(b),this.addCurrentVertex(d,g,0,0,u);else if("flipbevel"===O){if(b>100)g=h.mult(-1);else{const e=b*m.add(h).mag()/m.sub(h).mag();g._perp()._mult(e*(x?-1:1))}this.addCurrentVertex(d,g,0,0,u),this.addCurrentVertex(d,g.mult(-1),0,0,u)}else if("bevel"===O||"fakeround"===O){const e=-Math.sqrt(b*b-1),t=x?e:0,n=x?0:e;if(p&&this.addCurrentVertex(d,m,t,n,u),"fakeround"===O){const e=Math.round(180*_/Math.PI/20);for(let t=1;t<e;t++){let n=t/e;if(.5!==n){const e=n-.5;n+=n*e*(n-1)*((1.0904+y*(y*(3.55645-1.43519*y)-3.2452))*e*e+(.848013+y*(.215638*y-1.06021)))}const i=h.sub(m)._mult(n)._add(m)._unit()._mult(x?-1:1);this.addHalfVertex(d,i.x,i.y,!1,x,0,u)}}f&&this.addCurrentVertex(d,h,-t,-n,u)}else if("butt"===O)this.addCurrentVertex(d,g,0,0,u);else if("square"===O){const e=p?1:-1;p||this.addCurrentVertex(d,g,e,e,u),this.addCurrentVertex(d,g,0,0,u),p&&this.addCurrentVertex(d,g,e,e,u)}else"round"===O&&(p&&(this.addCurrentVertex(d,m,0,0,u),this.addCurrentVertex(d,m,1,1,u,!0)),f&&(this.addCurrentVertex(d,h,-1,-1,u,!0),this.addCurrentVertex(d,h,0,0,u)));if(w&&t<s-1){const e=d.dist(f);if(e>2*c){const t=d.add(f.sub(d)._mult(c/e)._round());this.updateDistance(d,t),this.addCurrentVertex(t,h,0,0,u),d=t}}}}addCurrentVertex(e,t,n,i,r,a=!1){const o=t.y*i-t.x,s=-t.y-t.x*i;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,a,!1,n,r),this.addHalfVertex(e,o,s,a,!0,-i,r)}addHalfVertex({x:e,y:t},n,i,r,a,o,s){this.layoutVertexArray.emplaceBack((e<<1)+(r?1:0),(t<<1)+(a?1:0),Math.round(63*n)+128,Math.round(63*i)+128,1+(0===o?0:o<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const l=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,l),s.primitiveLength++),a?this.e2=l:this.e1=l}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}Br(tp,"LineBucket",{omit:["layers","patternFeatures"]});const np=new go({"line-cap":new mo(tt.layout_line["line-cap"]),"line-join":new mo(tt.layout_line["line-join"]),"line-miter-limit":new fo(tt.layout_line["line-miter-limit"]),"line-round-limit":new fo(tt.layout_line["line-round-limit"]),"line-sort-key":new mo(tt.layout_line["line-sort-key"])});var ip={paint:new go({"line-opacity":new mo(tt.paint_line["line-opacity"]),"line-color":new mo(tt.paint_line["line-color"]),"line-translate":new fo(tt.paint_line["line-translate"]),"line-translate-anchor":new fo(tt.paint_line["line-translate-anchor"]),"line-width":new mo(tt.paint_line["line-width"]),"line-gap-width":new mo(tt.paint_line["line-gap-width"]),"line-offset":new mo(tt.paint_line["line-offset"]),"line-blur":new mo(tt.paint_line["line-blur"]),"line-dasharray":new mo(tt.paint_line["line-dasharray"]),"line-pattern":new mo(tt.paint_line["line-pattern"]),"line-gradient":new ho(tt.paint_line["line-gradient"]),"line-trim-offset":new fo(tt.paint_line["line-trim-offset"])}),layout:np};const rp=new class extends mo{possiblyEvaluate(e,t){return t=new io(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,n,i){return t=j({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,n,i)}}(ip.paint.properties["line-width"].specification);function ap(e,t){return t>0?t+2*e:e}rp.useIntegerZoom=!0;const op=wo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),sp=wo([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),lp=wo([{name:"a_projected_pos",components:4,type:"Float32"}],4);wo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const cp=wo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),up=wo([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);wo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const dp=wo([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),pp=wo([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);wo([{name:"triangle",components:3,type:"Uint16"}]),wo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),wo([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),wo([{type:"Float32",name:"offsetX"}]),wo([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);const fp=128;function mp(e,t){const{expression:n}=t;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new io(e+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:i}=n;let r=0;for(;r<t.length&&t[r]<=e;)r++;r=Math.max(0,r-1);let a=r;for(;a<t.length&&t[a]<e+1;)a++;a=Math.min(t.length-1,a);const o=t[r],s=t[a];return"composite"===n.kind?{kind:"composite",minZoom:o,maxZoom:s,interpolationType:i}:{kind:"camera",minZoom:o,maxZoom:s,minSize:n.evaluate(new io(o)),maxSize:n.evaluate(new io(s)),interpolationType:i}}}function hp(e,{uSize:t,uSizeT:n},{lowerSize:i,upperSize:r}){return"source"===e.kind?i/fp:"composite"===e.kind?An(i/fp,r/fp,n):t}function gp(e,t){let n=0,i=0;if("constant"===e.kind)i=e.layoutSize;else if("source"!==e.kind){const{interpolationType:r,minZoom:a,maxZoom:o}=e,s=r?S(Jn.interpolationFactor(r,t,a,o),0,1):0;"camera"===e.kind?i=An(e.minSize,e.maxSize,s):n=s}return{uSizeT:n,uSize:i}}var yp=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:fp,evaluateSizeForFeature:hp,evaluateSizeForZoom:gp,getSizeData:mp});function vp(e,t,n){return e.sections.forEach(e=>{e.text=function(e,t,n){const i=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===i?e=e.toLocaleUpperCase():"lowercase"===i&&(e=e.toLocaleLowerCase()),no.applyArabicShaping&&(e=no.applyArabicShaping(e)),e}(e.text,t,n)}),e}const bp={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};function _p(e){return""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e}function wp(e){return""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e||""===e}var xp=Ep,kp=function(e,t,n,i,r){var a,o,s=8*r-i-1,l=(1<<s)-1,c=l>>1,u=-7,d=n?r-1:0,p=n?-1:1,f=e[t+d];for(d+=p,a=f&(1<<-u)-1,f>>=-u,u+=s;u>0;a=256*a+e[t+d],d+=p,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=i;u>0;o=256*o+e[t+d],d+=p,u-=8);if(0===a)a=1-c;else{if(a===l)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,i),a-=c}return(f?-1:1)*o*Math.pow(2,a-i)},Op=function(e,t,n,i,r,a){var o,s,l,c=8*a-r-1,u=(1<<c)-1,d=u>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:a-1,m=i?1:-1,h=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),(t+=o+d>=1?p/l:p*Math.pow(2,1-d))*l>=2&&(o++,l/=2),o+d>=u?(s=0,o=u):o+d>=1?(s=(t*l-1)*Math.pow(2,r),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,r),o=0));r>=8;e[n+f]=255&s,f+=m,s/=256,r-=8);for(o=o<<r|s,c+=r;c>0;e[n+f]=255&o,f+=m,o/=256,c-=8);e[n+f-m]|=128*h};
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Ep(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Ep.Varint=0,Ep.Fixed64=1,Ep.Bytes=2,Ep.Fixed32=5;var Tp=4294967296,Cp=1/Tp,Sp="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Pp(e){return e.type===Ep.Bytes?e.readVarint()+e.pos:e.pos+1}function Mp(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function Ip(e,t,n){var i=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;r>=e;r--)n.buf[r+i]=n.buf[r]}function Ap(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function jp(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function Lp(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function Rp(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function Np(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function Dp(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function Bp(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function zp(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function Fp(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function Up(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Hp(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function Wp(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}Ep.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var i=this.readVarint(),r=i>>3,a=this.pos;this.type=7&i,e(r,t,this),this.pos===a&&this.skip(i)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Up(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Wp(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Up(this.buf,this.pos)+Up(this.buf,this.pos+4)*Tp;return this.pos+=8,e},readSFixed64:function(){var e=Up(this.buf,this.pos)+Wp(this.buf,this.pos+4)*Tp;return this.pos+=8,e},readFloat:function(){var e=kp(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=kp(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,i=this.buf;return t=127&(n=i[this.pos++]),n<128?t:(t|=(127&(n=i[this.pos++]))<<7,n<128?t:(t|=(127&(n=i[this.pos++]))<<14,n<128?t:(t|=(127&(n=i[this.pos++]))<<21,n<128?t:function(e,t,n){var i,r,a=n.buf;if(i=(112&(r=a[n.pos++]))>>4,r<128)return Mp(e,i,t);if(i|=(127&(r=a[n.pos++]))<<3,r<128)return Mp(e,i,t);if(i|=(127&(r=a[n.pos++]))<<10,r<128)return Mp(e,i,t);if(i|=(127&(r=a[n.pos++]))<<17,r<128)return Mp(e,i,t);if(i|=(127&(r=a[n.pos++]))<<24,r<128)return Mp(e,i,t);if(i|=(1&(r=a[n.pos++]))<<31,r<128)return Mp(e,i,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=i[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&Sp?function(e,t,n){return Sp.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var i="",r=t;r<n;){var a,o,s,l=e[r],c=null,u=l>239?4:l>223?3:l>191?2:1;if(r+u>n)break;1===u?l<128&&(c=l):2===u?128==(192&(a=e[r+1]))&&(c=(31&l)<<6|63&a)<=127&&(c=null):3===u?(o=e[r+2],128==(192&(a=e[r+1]))&&128==(192&o)&&((c=(15&l)<<12|(63&a)<<6|63&o)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(o=e[r+2],s=e[r+3],128==(192&(a=e[r+1]))&&128==(192&o)&&128==(192&s)&&((c=(15&l)<<18|(63&a)<<12|(63&o)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,i+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),i+=String.fromCharCode(c),r+=u}return i}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Ep.Bytes)return e.push(this.readVarint(t));var n=Pp(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Ep.Bytes)return e.push(this.readSVarint());var t=Pp(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Ep.Bytes)return e.push(this.readBoolean());var t=Pp(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Ep.Bytes)return e.push(this.readFloat());var t=Pp(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Ep.Bytes)return e.push(this.readDouble());var t=Pp(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Ep.Bytes)return e.push(this.readFixed32());var t=Pp(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Ep.Bytes)return e.push(this.readSFixed32());var t=Pp(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Ep.Bytes)return e.push(this.readFixed64());var t=Pp(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Ep.Bytes)return e.push(this.readSFixed64());var t=Pp(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===Ep.Varint)for(;this.buf[this.pos++]>127;);else if(t===Ep.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Ep.Fixed32)this.pos+=4;else{if(t!==Ep.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Hp(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Hp(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Hp(this.buf,-1&e,this.pos),Hp(this.buf,Math.floor(e*Cp),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Hp(this.buf,-1&e,this.pos),Hp(this.buf,Math.floor(e*Cp),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,i;if(e>=0?(n=e%4294967296|0,i=e/4294967296|0):(i=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,i=i+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(i,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var i,r,a=0;a<t.length;a++){if((i=t.charCodeAt(a))>55295&&i<57344){if(!r){i>56319||a+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):r=i;continue}if(i<56320){e[n++]=239,e[n++]=191,e[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(e[n++]=239,e[n++]=191,e[n++]=189,r=null);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(i<65536?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=63&i|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&Ip(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),Op(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),Op(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var i=this.pos-n;i>=128&&Ip(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(e,t,n){this.writeTag(e,Ep.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,Ap,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,jp,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,Np,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,Lp,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,Rp,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,Dp,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Bp,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,zp,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,Fp,t)},writeBytesField:function(e,t){this.writeTag(e,Ep.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Ep.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Ep.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Ep.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Ep.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Ep.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Ep.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Ep.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Ep.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Ep.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};var qp=f(xp);function Vp(e,t,n){t.glyphs=[],1===e&&n.readMessage(Gp,t)}function Gp(e,t,n){if(3===e){const{id:e,bitmap:i,width:r,height:a,left:o,top:s,advance:l}=n.readMessage(Yp,{});t.glyphs.push({id:e,bitmap:new mu({width:r+6,height:a+6},i),metrics:{width:r,height:a,left:o,top:s,advance:l}})}else 4===e?t.ascender=n.readSVarint():5===e&&(t.descender=n.readSVarint())}function Yp(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}function Zp(e){let t=0,n=0;for(const i of e)t+=i.w*i.h,n=Math.max(n,i.w);e.sort((e,t)=>t.h-e.h);const i=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}];let r=0,a=0;for(const t of e)for(let e=i.length-1;e>=0;e--){const n=i[e];if(!(t.w>n.w||t.h>n.h)){if(t.x=n.x,t.y=n.y,a=Math.max(a,t.y+t.h),r=Math.max(r,t.x+t.w),t.w===n.w&&t.h===n.h){const t=i.pop();e<i.length&&(i[e]=t)}else t.h===n.h?(n.x+=t.w,n.w-=t.w):t.w===n.w?(n.y+=t.h,n.h-=t.h):(i.push({x:n.x+t.w,y:n.y,w:n.w-t.w,h:t.h}),n.y+=t.h,n.h-=t.h);break}}return{w:r,h:a,fill:t/(r*a)||0}}class Xp{constructor(e,{pixelRatio:t,version:n,stretchX:i,stretchY:r,content:a}){this.paddedRect=e,this.pixelRatio=t,this.stretchX=i,this.stretchY=r,this.content=a,this.version=n}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Jp{constructor(e,t){const n={},i={};this.haveRenderCallbacks=[];const r=[];this.addImages(e,n,r),this.addImages(t,i,r);const{w:a,h:o}=Zp(r),s=new hu({width:a||1,height:o||1});for(const t in e){const i=e[t],r=n[t].paddedRect;hu.copy(i.data,s,{x:0,y:0},{x:r.x+1,y:r.y+1},i.data)}for(const e in t){const n=t[e],r=i[e].paddedRect,a=r.x+1,o=r.y+1,l=n.data.width,c=n.data.height;hu.copy(n.data,s,{x:0,y:0},{x:a,y:o},n.data),hu.copy(n.data,s,{x:0,y:c-1},{x:a,y:o-1},{width:l,height:1}),hu.copy(n.data,s,{x:0,y:0},{x:a,y:o+c},{width:l,height:1}),hu.copy(n.data,s,{x:l-1,y:0},{x:a-1,y:o},{width:1,height:c}),hu.copy(n.data,s,{x:0,y:0},{x:a+l,y:o},{width:1,height:c})}this.image=s,this.iconPositions=n,this.patternPositions=i}addImages(e,t,n){for(const i in e){const r=e[i],a={x:0,y:0,w:r.data.width+2,h:r.data.height+2};n.push(a),t[i]=new Xp(a,r),r.hasRenderCallback&&this.haveRenderCallbacks.push(i)}}patchUpdatedImages(e,t){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(t=>e.hasImage(t)),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}patchUpdatedImage(e,t,n){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[i,r]=e.tl;n.update(t.data,void 0,{x:i,y:r})}}Br(Xp,"ImagePosition"),Br(Jp,"ImageAtlas");const Kp={horizontal:1,vertical:2,horizontalOnly:3};class $p{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const n=new $p;return n.scale=e||1,n.fontStack=t,n}static forImage(e){const t=new $p;return t.imageName=e,t}}class Qp{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const n=new Qp;for(let i=0;i<e.sections.length;i++){const r=e.sections[i];r.image?n.addImageSection(r):n.addTextSection(r,t)}return n}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(e,t){let n="";for(let i=0;i<e.length;i++){const r=e.charCodeAt(i+1)||null,a=e.charCodeAt(i-1)||null;n+=!t&&(r&&Ua(r)&&!bp[e[i+1]]||a&&Ua(a)&&!bp[e[i-1]])||!bp[e[i]]?e[i]:bp[e[i]]}return n}(this.text,e)}trim(){let e=0;for(let t=0;t<this.text.length&&tf[this.text.charCodeAt(t)];t++)e++;let t=this.text.length;for(let n=this.text.length-1;n>=0&&n>=e&&tf[this.text.charCodeAt(n)];n--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const n=new Qp;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,t)=>Math.max(e,this.sections[t].scale),0)}addTextSection(e,t){this.text+=e.text,this.sections.push($p.forText(e.scale,e.fontStack||t));const n=this.sections.length-1;for(let t=0;t<e.text.length;++t)this.sectionIndex.push(n)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void V("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push($p.forImage(t)),this.sectionIndex.push(this.sections.length-1)):V("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function ef(e,t,n,i,r,a,o,s,l,c,u,d,p,f,m){const h=Qp.fromFeature(e,r);d===Kp.vertical&&h.verticalizePunctuation(p);let g=[];const y=function(e,t,n,i,r,a){if(!e)return[];const o=[],s=function(e,t,n,i,r,a){let o=0;for(let n=0;n<e.length();n++){const s=e.getSection(n);o+=rf(e.getCharCode(n),s,i,r,t,a)}return o/Math.max(1,Math.ceil(o/n))}(e,t,n,i,r,a),l=e.text.indexOf("")>=0;let c=0;for(let n=0;n<e.length();n++){const d=e.getSection(n),p=e.getCharCode(n);if(tf[p]||(c+=rf(p,d,i,r,t,a)),n<e.length()-1){const t=!((u=p)<11904||!(ga(u)||fa(u)||ja(u)||Ma(u)||_a(u)||sa(u)||ya(u)||ua(u)||wa(u)||ka(u)||ba(u)||Na(u)||da(u)||ca(u)||la(u)||va(u)||pa(u)||Aa(u)||Ea(u)||Oa(u)));(nf[p]||t||d.imageName)&&o.push(sf(n+1,c,s,o,of(p,e.getCharCode(n+1),t&&l),!1))}}var u;return function e(t){return t?e(t.priorBreak).concat(t.index):[]}(sf(e.length(),c,s,o,0,!0))}(h,c,a,t,i,f),{processBidirectionalText:v,processStyledBidirectionalText:b}=no;if(v&&1===h.sections.length){const e=v(h.toString(),y);for(const t of e){const e=new Qp;e.text=t,e.sections=h.sections;for(let n=0;n<t.length;n++)e.sectionIndex.push(0);g.push(e)}}else if(b){const e=b(h.text,h.sectionIndex,y);for(const t of e){const e=new Qp;e.text=t[0],e.sectionIndex=t[1],e.sections=h.sections,g.push(e)}}else g=function(e,t){const n=[],i=e.text;let r=0;for(const i of t)n.push(e.substring(r,i)),r=i;return r<i.length&&n.push(e.substring(r,i.length)),n}(h,y);const _=[],w={positionedLines:_,text:h.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:d,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(e,t,n,i,r,a,o,s,l,c,u,d){let p=0,f=0,m=0;const h="right"===s?1:"left"===s?0:.5;let g=!1;for(const e of r){const n=e.getSections();for(const e of n){if(e.imageName)continue;const n=t[e.fontStack];if(n&&(g=void 0!==n.ascender&&void 0!==n.descender,!g))break}if(!g)break}let y=0;for(const o of r){o.trim();const r=o.getMaxScale(),s=24*(r-1),b={positionedGlyphs:[],lineOffset:0};e.positionedLines[y]=b;const _=b.positionedGlyphs;let w=0;if(!o.length()){f+=a,++y;continue}let x=0,k=0;for(let a=0;a<o.length();a++){const s=o.getSection(a),m=o.getSectionIndex(a),h=o.getCharCode(a);let y=s.scale,b=null,O=null,E=null,T=24,C=0;const S=!(l===Kp.horizontal||!u&&!Fa(h)||u&&(tf[h]||(v=h,qr(v)||Vr(v)||Gr(v)||Ia(v)||Ra(v))));if(s.imageName){const t=i[s.imageName];if(!t)continue;E=s.imageName,e.iconsInText=e.iconsInText||!0,O=t.paddedRect;const n=t.displaySize;y=24*y/d,b={width:n[0],height:n[1],left:1,top:-3,advance:S?n[1]:n[0],localGlyph:!1},C=g?-b.height*y:24*r-17-n[1]*y,T=b.advance;const a=(S?n[0]:n[1])*y-24*r;a>0&&a>w&&(w=a)}else{const e=n[s.fontStack];if(!e)continue;e[h]&&(O=e[h]);const i=t[s.fontStack];if(!i)continue;const a=i.glyphs[h];if(!a)continue;if(b=a.metrics,T=8203!==h?24:0,g){const e=void 0!==i.ascender?Math.abs(i.ascender):0,t=void 0!==i.descender?Math.abs(i.descender):0,n=(e+t)*y;x<n&&(x=n,k=(e-t)/2*y),C=-e*y}else C=24*(r-y)-17}S?(e.verticalizable=!0,_.push({glyph:h,imageName:E,x:p,y:f+C,vertical:S,scale:y,localGlyph:b.localGlyph,fontStack:s.fontStack,sectionIndex:m,metrics:b,rect:O}),p+=T*y+c):(_.push({glyph:h,imageName:E,x:p,y:f+C,vertical:S,scale:y,localGlyph:b.localGlyph,fontStack:s.fontStack,sectionIndex:m,metrics:b,rect:O}),p+=b.advance*y+c)}0!==_.length&&(m=Math.max(p-c,m),g?cf(_,h,w,k,a*r/2):cf(_,h,w,0,a/2)),p=0;const O=a*r+w;b.lineOffset=Math.max(w,s),f+=O,++y}var v;const b=f,{horizontalAlign:_,verticalAlign:w}=lf(o);(function(e,t,n,i,r,a){const o=(t-n)*r,s=-a*i;for(const t of e)for(const e of t.positionedGlyphs)e.x+=o,e.y+=s})(e.positionedLines,h,_,w,m,b),e.top+=-w*b,e.bottom=e.top+b,e.left+=-_*m,e.right=e.left+m,e.hasBaseline=g}(w,t,n,i,g,o,s,l,d,c,p,m),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(_)&&w}const tf={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},nf={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function rf(e,t,n,i,r,a){if(t.imageName){const e=i[t.imageName];return e?e.displaySize[0]*t.scale*24/a+r:0}{const i=n[t.fontStack],a=i&&i.glyphs[e];return a?a.metrics.advance*t.scale+r:0}}function af(e,t,n,i){const r=Math.pow(e-t,2);return i?e<t?r/2:2*r:r+Math.abs(n)*n}function of(e,t,n){let i=0;return 10===e&&(i-=1e4),n&&(i+=150),40!==e&&65288!==e||(i+=50),41!==t&&65289!==t||(i+=50),i}function sf(e,t,n,i,r,a){let o=null,s=af(t,n,r,a);for(const e of i){const i=af(t-e.x,n,r,a)+e.badness;i<=s&&(o=e,s=i)}return{index:e,x:t,priorBreak:o,badness:s}}function lf(e){let t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function cf(e,t,n,i,r){if(!(t||n||i||r))return;const a=e.length-1,o=e[a],s=(o.x+o.metrics.advance*o.scale)*t;for(let t=0;t<=a;t++)e[t].x-=s,e[t].y+=n+i+r}function uf(e,t,n){const{horizontalAlign:i,verticalAlign:r}=lf(n),a=t[0]-e.displaySize[0]*i,o=t[1]-e.displaySize[1]*r;return{image:e,top:o,bottom:o+e.displaySize[1],left:a,right:a+e.displaySize[0]}}function df(e,t,n,i,r,a){const o=e.image;let s;if(o.content){const e=o.content,t=o.pixelRatio||1;s=[e[0]/t,e[1]/t,o.displaySize[0]-e[2]/t,o.displaySize[1]-e[3]/t]}const l=t.left*a,c=t.right*a;let u,d,p,f;"width"===n||"both"===n?(f=r[0]+l-i[3],d=r[0]+c+i[1]):(f=r[0]+(l+c-o.displaySize[0])/2,d=f+o.displaySize[0]);const m=t.top*a,h=t.bottom*a;return"height"===n||"both"===n?(u=r[1]+m-i[0],p=r[1]+h+i[2]):(u=r[1]+(m+h-o.displaySize[1])/2,p=u+o.displaySize[1]),{image:o,top:u,right:d,bottom:p,left:f,collisionPadding:s}}class pf extends b{constructor(e,t,n,i,r){super(e,t),this.angle=i,this.z=n,void 0!==r&&(this.segment=r)}clone(){return new pf(this.x,this.y,this.z,this.angle,this.segment)}}function ff(e,t,n,i,r){if(void 0===t.segment)return!0;let a=t,o=t.segment+1,s=0;for(;s>-n/2;){if(o--,o<0)return!1;s-=e[o].dist(a),a=e[o]}s+=e[o].dist(e[o+1]),o++;const l=[];let c=0;for(;s<n/2;){const t=e[o],n=e[o+1];if(!n)return!1;let a=e[o-1].angleTo(t)-t.angleTo(n);for(a=Math.abs((a+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:a}),c+=a;s-l[0].distance>i;)c-=l.shift().angleDelta;if(c>r)return!1;o++,s+=t.dist(n)}return!0}function mf(e){let t=0;for(let n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function hf(e,t,n){return e?.6*t*n:0}function gf(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function yf(e,t,n,i,r,a){const o=hf(n,r,a),s=gf(n,i)*a;let l=0;const c=mf(e)/2;for(let n=0;n<e.length-1;n++){const i=e[n],r=e[n+1],a=i.dist(r);if(l+a>c){const u=(c-l)/a,d=An(i.x,r.x,u),p=An(i.y,r.y,u),f=new pf(d,p,0,r.angleTo(i),n);return!o||ff(e,f,s,o,t)?f:void 0}l+=a}}function vf(e,t,n,i,r,a,o,s,l){const c=hf(i,a,o),u=gf(i,r),d=u*o,p=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-d<t/4&&(t=d+t/4),function e(t,n,i,r,a,o,s,l,c){const u=o/2,d=mf(t);let p=0,f=n-i,m=[];for(let e=0;e<t.length-1;e++){const n=t[e],s=t[e+1],l=n.dist(s),h=s.angleTo(n);for(;f+i<p+l;){f+=i;const g=(f-p)/l,y=An(n.x,s.x,g),v=An(n.y,s.y,g);if(y>=0&&y<c&&v>=0&&v<c&&f-u>=0&&f+u<=d){const n=new pf(y,v,0,h,e);n._round(),r&&!ff(t,n,o,r,a)||m.push(n)}}p+=l}return l||m.length||s||(m=e(t,p/2,i,r,a,o,s,!0,c)),m}(e,p?t/2*s%t:(u/2+2*a)*o*s%t,t,c,n,d,p,!1,l)}function bf(e,t,n,i,r){const a=[];for(let o=0;o<e.length;o++){const s=e[o];let l;for(let e=0;e<s.length-1;e++){let o=s[e],c=s[e+1];o.x<t&&c.x<t||(o.x<t?o=new b(t,o.y+(t-o.x)/(c.x-o.x)*(c.y-o.y))._round():c.x<t&&(c=new b(t,o.y+(t-o.x)/(c.x-o.x)*(c.y-o.y))._round()),o.y<n&&c.y<n||(o.y<n?o=new b(o.x+(n-o.y)/(c.y-o.y)*(c.x-o.x),n)._round():c.y<n&&(c=new b(o.x+(n-o.y)/(c.y-o.y)*(c.x-o.x),n)._round()),o.x>=i&&c.x>=i||(o.x>=i?o=new b(i,o.y+(i-o.x)/(c.x-o.x)*(c.y-o.y))._round():c.x>=i&&(c=new b(i,o.y+(i-o.x)/(c.x-o.x)*(c.y-o.y))._round()),o.y>=r&&c.y>=r||(o.y>=r?o=new b(o.x+(r-o.y)/(c.y-o.y)*(c.x-o.x),r)._round():c.y>=r&&(c=new b(o.x+(r-o.y)/(c.y-o.y)*(c.x-o.x),r)._round()),l&&o.equals(l[l.length-1])||(l=[o],a.push(l)),l.push(c)))))}}return a}Br(pf,"Anchor");const _f=1e20;function wf(e,t,n,i,r,a,o,s,l){for(let c=t;c<t+i;c++)xf(e,n*a+c,a,r,o,s,l);for(let c=n;c<n+r;c++)xf(e,c*a+t,1,i,o,s,l)}function xf(e,t,n,i,r,a,o){a[0]=0,o[0]=-_f,o[1]=_f,r[0]=e[t];for(let s=1,l=0,c=0;s<i;s++){r[s]=e[t+s*n];const i=s*s;do{const e=a[l];c=(r[s]-r[e]+i-e*e)/(s-e)/2}while(c<=o[l]&&--l>-1);l++,a[l]=s,o[l]=c,o[l+1]=_f}for(let s=0,l=0;s<i;s++){for(;o[l+1]<s;)l++;const i=a[l],c=s-i;e[t+s*n]=r[i]+c*c}}const kf={none:0,ideographs:1,all:2};class Of{constructor(e,t,n){this.requestManager=e,this.localGlyphMode=t,this.localFontFamily=n,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,t){const n=[];for(const t in e)for(const i of e[t])n.push({stack:t,id:i});I(n,({stack:e,id:t},n)=>{let i=this.entries[e];i||(i=this.entries[e]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let r=i.glyphs[t];if(void 0!==r)return void n(null,{stack:e,id:t,glyph:r});if(r=this._tinySDF(i,e,t),r)return i.glyphs[t]=r,void n(null,{stack:e,id:t,glyph:r});const a=Math.floor(t/256);if(256*a>65535)return void n(new Error("glyphs > 65535 not supported"));if(i.ranges[a])return void n(null,{stack:e,id:t,glyph:r});let o=i.requests[a];o||(o=i.requests[a]=[],Of.loadGlyphRange(e,a,this.url,this.requestManager,(e,t)=>{if(t){i.ascender=t.ascender,i.descender=t.descender;for(const e in t.glyphs)this._doesCharSupportLocalGlyph(+e)||(i.glyphs[+e]=t.glyphs[+e]);i.ranges[a]=!0}for(const n of o)n(e,t);delete i.requests[a]})),o.push((i,r)=>{i?n(i):r&&n(null,{stack:e,id:t,glyph:r.glyphs[t]||null})})},(e,n)=>{if(e)t(e);else if(n){const e={};for(const{stack:t,id:i,glyph:r}of n)void 0===e[t]&&(e[t]={}),void 0===e[t].glyphs&&(e[t].glyphs={}),e[t].glyphs[i]=r&&{id:r.id,bitmap:r.bitmap.clone(),metrics:r.metrics},e[t].ascender=this.entries[t].ascender,e[t].descender=this.entries[t].descender;t(null,e)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==kf.none&&(this.localGlyphMode===kf.all?!!this.localFontFamily:!!this.localFontFamily&&(ka(e)||Ca(e)||da(e)||pa(e)||ua(e)))}_tinySDF(e,t,n){const i=this.localFontFamily;if(!i||!this._doesCharSupportLocalGlyph(n))return;let r=e.tinySDF;if(!r){let n="400";/bold/i.test(t)?n="900":/medium/i.test(t)?n="500":/light/i.test(t)&&(n="200"),r=e.tinySDF=new Of.TinySDF({fontFamily:i,fontWeight:n,fontSize:48,buffer:6,radius:16}),r.fontWeight=n}if(this.localGlyphs[r.fontWeight][n])return this.localGlyphs[r.fontWeight][n];const a=String.fromCharCode(n),{data:o,width:s,height:l,glyphWidth:c,glyphHeight:u,glyphLeft:d,glyphTop:p,glyphAdvance:f}=r.draw(a);return this.localGlyphs[r.fontWeight][n]={id:n,bitmap:new mu({width:s,height:l},o),metrics:{width:c/2,height:u/2,left:d/2,top:p/2-27,advance:f/2,localGlyph:!0}}}}function Ef(e,t,n,i){const r=[],a=e.image,o=a.pixelRatio,s=a.paddedRect.w-2,l=a.paddedRect.h-2,c=e.right-e.left,u=e.bottom-e.top,d=a.stretchX||[[0,s]],p=a.stretchY||[[0,l]],f=(e,t)=>e+t[1]-t[0],m=d.reduce(f,0),h=p.reduce(f,0),g=s-m,y=l-h;let v=0,_=m,w=0,x=h,k=0,O=g,E=0,T=y;if(a.content&&i){const e=a.content;v=Tf(d,0,e[0]),w=Tf(p,0,e[1]),_=Tf(d,e[0],e[2]),x=Tf(p,e[1],e[3]),k=e[0]-v,E=e[1]-w,O=e[2]-e[0]-_,T=e[3]-e[1]-x}const C=(i,r,s,l)=>{const d=Sf(i.stretch-v,_,c,e.left),p=Pf(i.fixed-k,O,i.stretch,m),f=Sf(r.stretch-w,x,u,e.top),g=Pf(r.fixed-E,T,r.stretch,h),y=Sf(s.stretch-v,_,c,e.left),C=Pf(s.fixed-k,O,s.stretch,m),S=Sf(l.stretch-w,x,u,e.top),P=Pf(l.fixed-E,T,l.stretch,h),M=new b(d,f),I=new b(y,f),A=new b(y,S),j=new b(d,S),L=new b(p/o,g/o),R=new b(C/o,P/o),N=t*Math.PI/180;if(N){const e=Math.sin(N),t=Math.cos(N),n=[t,-e,e,t];M._matMult(n),I._matMult(n),j._matMult(n),A._matMult(n)}const D=i.stretch+i.fixed,B=r.stretch+r.fixed;return{tl:M,tr:I,bl:j,br:A,tex:{x:a.paddedRect.x+1+D,y:a.paddedRect.y+1+B,w:s.stretch+s.fixed-D,h:l.stretch+l.fixed-B},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:L,pixelOffsetBR:R,minFontScaleX:O/o/c,minFontScaleY:T/o/u,isSDF:n}};if(i&&(a.stretchX||a.stretchY)){const e=Cf(d,g,m),t=Cf(p,y,h);for(let n=0;n<e.length-1;n++){const i=e[n],a=e[n+1];for(let e=0;e<t.length-1;e++)r.push(C(i,t[e],a,t[e+1]))}}else r.push(C({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:l+1}));return r}function Tf(e,t,n){let i=0;for(const r of e)i+=Math.max(t,Math.min(n,r[1]))-Math.max(t,Math.min(n,r[0]));return i}function Cf(e,t,n){const i=[{fixed:-1,stretch:0}];for(const[t,n]of e){const e=i[i.length-1];i.push({fixed:t-e.stretch,stretch:e.stretch}),i.push({fixed:t-e.stretch,stretch:e.stretch+(n-t)})}return i.push({fixed:t+1,stretch:n}),i}function Sf(e,t,n,i){return e/t*n+i}function Pf(e,t,n,i){return e-t*n/i}function Mf(e,t,n,i){const r=t+e.positionedLines[i].lineOffset;return 0===i?n+r/2:n+(r+(t+e.positionedLines[i-1].lineOffset))/2}Of.loadGlyphRange=function(e,t,n,i,r){const a=256*t,o=a+255,s=i.transformRequest(i.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}",`${a}-${o}`),ce.Glyphs);fe(s,(e,t)=>{if(e)r(e);else if(t){const e={},n=function(e){return new qp(e).readFields(Vp,{})}(t);for(const t of n.glyphs)e[t.id]=t;r(null,{glyphs:e,ascender:n.ascender,descender:n.descender})}})},Of.TinySDF=class{constructor({fontSize:e=24,buffer:t=3,radius:n=8,cutoff:i=.25,fontFamily:r="sans-serif",fontWeight:a="normal",fontStyle:o="normal"}={}){this.buffer=t,this.cutoff=i,this.radius=n;const s=this.size=e+4*t,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font=`${o} ${a} ${e}px ${r}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:n,actualBoundingBoxDescent:i,actualBoundingBoxLeft:r,actualBoundingBoxRight:a}=this.ctx.measureText(e),o=Math.ceil(n),s=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(a-r))),l=Math.min(this.size-this.buffer,o+Math.ceil(i)),c=s+2*this.buffer,u=l+2*this.buffer,d=Math.max(c*u,0),p=new Uint8ClampedArray(d),f={data:p,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:o,glyphLeft:0,glyphAdvance:t};if(0===s||0===l)return f;const{ctx:m,buffer:h,gridInner:g,gridOuter:y}=this;m.clearRect(h,h,s,l),m.fillText(e,h,h+o);const v=m.getImageData(h,h,s,l);y.fill(_f,0,d),g.fill(0,0,d);for(let e=0;e<l;e++)for(let t=0;t<s;t++){const n=v.data[4*(e*s+t)+3]/255;if(0===n)continue;const i=(e+h)*c+t+h;if(1===n)y[i]=0,g[i]=_f;else{const e=.5-n;y[i]=e>0?e*e:0,g[i]=e<0?e*e:0}}wf(y,0,0,c,u,c,this.f,this.v,this.z),wf(g,h,h,s,l,c,this.f,this.v,this.z);for(let e=0;e<d;e++){const t=Math.sqrt(y[e])-Math.sqrt(g[e]);p[e]=Math.round(255-255*(t/this.radius+this.cutoff))}return f}};class If{constructor(e=[],t=Af){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let e=(this.length>>1)-1;e>=0;e--)this._down(e)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,i=t[e];for(;e>0;){const r=e-1>>1,a=t[r];if(n(i,a)>=0)break;t[e]=a,e=r}t[e]=i}_down(e){const{data:t,compare:n}=this,i=this.length>>1,r=t[e];for(;e<i;){let i=1+(e<<1),a=t[i];const o=i+1;if(o<this.length&&n(t[o],a)<0&&(i=o,a=t[o]),n(a,r)>=0)break;t[e]=a,e=i}t[e]=r}}function Af(e,t){return e<t?-1:e>t?1:0}function jf(e,t=1,n=!1){let i=1/0,r=1/0,a=-1/0,o=-1/0;const s=e[0];for(let e=0;e<s.length;e++){const t=s[e];(!e||t.x<i)&&(i=t.x),(!e||t.y<r)&&(r=t.y),(!e||t.x>a)&&(a=t.x),(!e||t.y>o)&&(o=t.y)}const l=Math.min(a-i,o-r);let c=l/2;const u=new If([],Lf);if(0===l)return new b(i,r);for(let t=i;t<a;t+=l)for(let n=r;n<o;n+=l)u.push(new Rf(t+c,n+c,c,e));let d=function(e){let t=0,n=0,i=0;const r=e[0];for(let e=0,a=r.length,o=a-1;e<a;o=e++){const a=r[e],s=r[o],l=a.x*s.y-s.x*a.y;n+=(a.x+s.x)*l,i+=(a.y+s.y)*l,t+=3*l}return new Rf(n/t,i/t,0,e)}(e),p=u.length;for(;u.length;){const i=u.pop();(i.d>d.d||!d.d)&&(d=i,n&&console.log("found best %d after %d probes",Math.round(1e4*i.d)/1e4,p)),i.max-d.d<=t||(c=i.h/2,u.push(new Rf(i.p.x-c,i.p.y-c,c,e)),u.push(new Rf(i.p.x+c,i.p.y-c,c,e)),u.push(new Rf(i.p.x-c,i.p.y+c,c,e)),u.push(new Rf(i.p.x+c,i.p.y+c,c,e)),p+=4)}return n&&(console.log("num probes: "+p),console.log("best distance: "+d.d)),d.p}function Lf(e,t){return t.max-e.max}class Rf{constructor(e,t,n,i){this.p=new b(e,t),this.h=n,this.d=function(e,t){let n=!1,i=1/0;for(let r=0;r<t.length;r++){const a=t[r];for(let t=0,r=a.length,o=r-1;t<r;o=t++){const r=a[t],s=a[o];r.y>e.y!=s.y>e.y&&e.x<(s.x-r.x)*(e.y-r.y)/(s.y-r.y)+r.x&&(n=!n),i=Math.min(i,Zc(e,r,s))}}return(n?1:-1)*Math.sqrt(i)}(this.p,i),this.max=this.d+this.h*Math.SQRT2}}const Nf=Number.POSITIVE_INFINITY,Df=Math.sqrt(2);function Bf(e,[t,n]){let i=0,r=0;if(n===Nf){t<0&&(t=0);const n=t/Df;switch(e){case"top-right":case"top-left":r=n-7;break;case"bottom-right":case"bottom-left":r=7-n;break;case"bottom":r=7-t;break;case"top":r=t-7}switch(e){case"top-right":case"bottom-right":i=-n;break;case"top-left":case"bottom-left":i=n;break;case"left":i=t;break;case"right":i=-t}}else{switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":r=n-7;break;case"bottom-right":case"bottom-left":case"bottom":r=7-n}switch(e){case"top-right":case"bottom-right":case"right":i=-t;break;case"top-left":case"bottom-left":case"left":i=t}}return[i,r]}function zf(e,t,n,i,r,a,o,s,l,c){e.createArrays(),e.tilePixelRatio=Hs/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;const u=e.layers[0].layout,d=e.layers[0]._unevaluatedLayout._values,p={};if("composite"===e.textSizeData.kind){const{minZoom:t,maxZoom:n}=e.textSizeData;p.compositeTextSizes=[d["text-size"].possiblyEvaluate(new io(t),s),d["text-size"].possiblyEvaluate(new io(n),s)]}if("composite"===e.iconSizeData.kind){const{minZoom:t,maxZoom:n}=e.iconSizeData;p.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new io(t),s),d["icon-size"].possiblyEvaluate(new io(n),s)]}p.layoutTextSize=d["text-size"].possiblyEvaluate(new io(l+1),s),p.layoutIconSize=d["icon-size"].possiblyEvaluate(new io(l+1),s),p.textMaxSize=d["text-size"].possiblyEvaluate(new io(18),s);const f="map"===u.get("text-rotation-alignment")&&"point"!==u.get("symbol-placement"),m=u.get("text-size");for(const a of e.features){const l=u.get("text-font").evaluate(a,{},s).join(","),d=m.evaluate(a,{},s),h=p.layoutTextSize.evaluate(a,{},s),g=(p.layoutIconSize.evaluate(a,{},s),{horizontal:{},vertical:void 0}),y=a.text;let v,b=[0,0];if(y){const i=y.toString(),o=24*u.get("text-letter-spacing").evaluate(a,{},s),c=24*u.get("text-line-height").evaluate(a,{},s),p=Ba(i)?o:0,m=u.get("text-anchor").evaluate(a,{},s),v=u.get("text-variable-anchor");if(!v){const e=u.get("text-radial-offset").evaluate(a,{},s);b=e?Bf(m,[24*e,Nf]):u.get("text-offset").evaluate(a,{},s).map(e=>24*e)}let _=f?"center":u.get("text-justify").evaluate(a,{},s);const w="point"===u.get("symbol-placement"),x=w?24*u.get("text-max-width").evaluate(a,{},s):1/0,k=a=>{e.allowVerticalPlacement&&Da(i)&&(g.vertical=ef(y,t,n,r,l,x,c,m,a,p,b,Kp.vertical,!0,h,d))};if(!f&&v){const e="auto"===_?v.map(e=>Ff(e)):[_];let i=!1;for(let a=0;a<e.length;a++){const o=e[a];if(!g.horizontal[o])if(i)g.horizontal[o]=g.horizontal[0];else{const e=ef(y,t,n,r,l,x,c,"center",o,p,b,Kp.horizontal,!1,h,d);e&&(g.horizontal[o]=e,i=1===e.positionedLines.length)}}k("left")}else{if("auto"===_&&(_=Ff(m)),w||u.get("text-writing-mode").indexOf("horizontal")>=0||!Da(i)){const e=ef(y,t,n,r,l,x,c,m,_,p,b,Kp.horizontal,!1,h,d);e&&(g.horizontal[_]=e)}k(w?"left":_)}}let _=!1;if(a.icon&&a.icon.name){const t=i[a.icon.name];t&&(v=uf(r[a.icon.name],u.get("icon-offset").evaluate(a,{},s),u.get("icon-anchor").evaluate(a,{},s)),_=t.sdf,void 0===e.sdfIcons?e.sdfIcons=t.sdf:e.sdfIcons!==t.sdf&&V("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.pixelRatio||0!==u.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}const w=Vf(g.horizontal)||g.vertical;e.iconsInText||(e.iconsInText=!!w&&w.iconsInText),(w||v)&&Uf(e,a,g,v,i,p,h,0,b,_,o,s,c)}a&&e.generateCollisionDebugBuffers(l,e.collisionBoxArray)}function Ff(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Uf(e,t,n,i,r,a,o,s,l,c,u,d,p){let f=a.textMaxSize.evaluate(t,{},d);void 0===f&&(f=o);const m=e.layers[0].layout,h=m.get("icon-offset").evaluate(t,{},d),g=Vf(n.horizontal)||n.vertical,y="globe"===p.name,v=o/24,b=e.tilePixelRatio*f/24,_=(P=e.overscaling,e.zoom>18&&P>2&&(P>>=1),Math.max(Hs/(512*P),1)*m.get("symbol-spacing")),w=m.get("text-padding")*e.tilePixelRatio,k=m.get("icon-padding")*e.tilePixelRatio,O=x(m.get("text-max-angle")),E="map"===m.get("text-rotation-alignment")&&"point"!==m.get("symbol-placement"),T="map"===m.get("icon-rotation-alignment")&&"point"!==m.get("symbol-placement"),C=m.get("symbol-placement"),S=_/2;var P;const M=m.get("icon-text-fit");let I;i&&"none"!==M&&(e.allowVerticalPlacement&&n.vertical&&(I=df(i,n.vertical,M,m.get("icon-text-fit-padding"),h,v)),g&&(i=df(i,g,M,m.get("icon-text-fit-padding"),h,v)));const A=(o,s,f)=>{if(s.x<0||s.x>=Hs||s.y<0||s.y>=Hs)return;let m=null;if(y){const{x:e,y:t,z:n}=p.projectTilePoint(s.x,s.y,f);m={anchor:new pf(e,t,n,0,void 0),up:p.upVector(f,s.x,s.y)}}!function(e,t,n,i,r,a,o,s,l,c,u,d,p,f,m,h,g,y,v,b,_,w,x,k,O){const E=e.addToLineVertexArray(t,i);let T,C,S,P,M,I,A,j=0,L=0,R=0,N=0,D=-1,B=-1;const z={};let F=fs("");const U=n?n.anchor:t;let H=0,W=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")?[H,W]=l.layout.get("text-offset").evaluate(_,{},O).map(e=>24*e):(H=24*l.layout.get("text-radial-offset").evaluate(_,{},O),W=Nf),e.allowVerticalPlacement&&r.vertical){const e=r.vertical;if(m)I=Yf(e),s&&(A=Yf(s));else{const n=l.layout.get("text-rotate").evaluate(_,{},O)+90;S=Gf(c,U,t,u,d,p,e,f,n,h),s&&(P=Gf(c,U,t,u,d,p,s,y,n))}}if(a){const i=l.layout.get("icon-rotate").evaluate(_,{},O),r="none"!==l.layout.get("icon-text-fit"),o=Ef(a,i,x,r),f=s?Ef(s,i,x,r):void 0;C=Gf(c,U,t,u,d,p,a,y,i),j=4*o.length;const m=e.iconSizeData;let h=null;"source"===m.kind?(h=[fp*l.layout.get("icon-size").evaluate(_,{},O)],h[0]>Wf&&V(`${e.layerIds[0]}: Value for "icon-size" is >= ${Hf}. Reduce your "icon-size".`)):"composite"===m.kind&&(h=[fp*w.compositeIconSizes[0].evaluate(_,{},O),fp*w.compositeIconSizes[1].evaluate(_,{},O)],(h[0]>Wf||h[1]>Wf)&&V(`${e.layerIds[0]}: Value for "icon-size" is >= ${Hf}. Reduce your "icon-size".`)),e.addSymbols(e.icon,o,h,b,v,_,!1,n,t,E.lineStartIndex,E.lineLength,-1,k,O),D=e.icon.placedSymbolArray.length-1,f&&(L=4*f.length,e.addSymbols(e.icon,f,h,b,v,_,Kp.vertical,n,t,E.lineStartIndex,E.lineLength,-1,k,O),B=e.icon.placedSymbolArray.length-1)}for(const i in r.horizontal){const a=r.horizontal[i];T||(F=fs(a.text),m?M=Yf(a):T=Gf(c,U,t,u,d,p,a,f,l.layout.get("text-rotate").evaluate(_,{},O),h));const s=1===a.positionedLines.length;if(R+=qf(e,n,t,a,o,l,m,_,h,E,r.vertical?Kp.horizontal:Kp.horizontalOnly,s?Object.keys(r.horizontal):[i],z,D,w,k,O),s)break}r.vertical&&(N+=qf(e,n,t,r.vertical,o,l,m,_,h,E,Kp.vertical,["vertical"],z,B,w,k,O));let q=-1;const G=(e,t)=>e?Math.max(e,t):t;q=G(M,q),q=G(I,q),q=G(A,q);const Y=q>-1?1:0;e.glyphOffsetArray.length>=Tm.MAX_GLYPHS&&V("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==_.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,_.sortKey),e.symbolInstances.emplaceBack(U.x,U.y,U.z,t.x,t.y,z.right>=0?z.right:-1,z.center>=0?z.center:-1,z.left>=0?z.left:-1,z.vertical>=0?z.vertical:-1,D,B,F,void 0!==T?T:e.collisionBoxArray.length,void 0!==T?T+1:e.collisionBoxArray.length,void 0!==S?S:e.collisionBoxArray.length,void 0!==S?S+1:e.collisionBoxArray.length,void 0!==C?C:e.collisionBoxArray.length,void 0!==C?C+1:e.collisionBoxArray.length,P||e.collisionBoxArray.length,P?P+1:e.collisionBoxArray.length,u,R,N,j,L,Y,0,H,W,q)}(e,s,m,o,n,i,r,I,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,w,E,l,0,k,T,h,t,a,c,u,d)};if("line"===C)for(const r of bf(t.geometry,0,0,Hs,Hs)){const t=vf(r,_,O,n.vertical||g,i,24,b,e.overscaling,Hs);for(const n of t)g&&Zf(e,g.text,S,n)||A(r,n,d)}else if("line-center"===C){for(const e of t.geometry)if(e.length>1){const t=yf(e,O,n.vertical||g,i,24,b);t&&A(e,t,d)}}else if("Polygon"===t.type)for(const e of $u(t.geometry,0)){const t=jf(e,16);A(e[0],new pf(t.x,t.y,0,0,void 0),d)}else if("LineString"===t.type)for(const e of t.geometry)A(e,new pf(e[0].x,e[0].y,0,0,void 0),d);else if("Point"===t.type)for(const e of t.geometry)for(const t of e)A([t],new pf(t.x,t.y,0,0,void 0),d)}const Hf=255,Wf=Hf*fp;function qf(e,t,n,i,r,a,o,s,l,c,u,d,p,f,m,h,g){const y=function(e,t,n,i,r,a,o,s){const l=[];if(0===t.positionedLines.length)return l;const c=i.layout.get("text-rotate").evaluate(a,{})*Math.PI/180,u=function(e){const t=e[0],n=e[1],i=t*n;return i>0?[t,-n]:i<0?[-t,n]:0===t?[n,t]:[n,-t]}(n);let d=Math.abs(t.top-t.bottom);for(const e of t.positionedLines)d-=e.lineOffset;const p=t.positionedLines.length,f=d/p;let m=t.top-n[1];for(let e=0;e<p;++e){const i=t.positionedLines[e];m=Mf(t,f,m,e);for(const e of i.positionedGlyphs){if(!e.rect)continue;const i=e.rect||{};let a=4,d=!0,p=1,f=0;if(e.imageName){const t=o[e.imageName];if(!t)continue;if(t.sdf){V("SDF images are not supported in formatted text and will be ignored.");continue}d=!1,p=t.pixelRatio,a=1/p}const h=(r||s)&&e.vertical,g=e.metrics.advance*e.scale/2,y=e.metrics,v=e.rect;if(null===v)continue;s&&t.verticalizable&&(f=e.imageName?g-e.metrics.width*e.scale/2:0);const _=r?[e.x+g,e.y]:[0,0];let w=[0,0],x=[0,0],k=!1;r||(h?(x=[e.x+g+u[0],e.y+u[1]-f],k=!0):w=[e.x+g+n[0],e.y+n[1]-f]);const O=v.w*e.scale/(p*(e.localGlyph?2:1)),E=v.h*e.scale/(p*(e.localGlyph?2:1));let T,C,S,P;if(h){const t=e.y-m,n=new b(-g,g-t),i=-Math.PI/2,r=new b(...x);T=new b(-g+w[0],w[1]),T._rotateAround(i,n)._add(r),T.x+=-t+g,T.y-=(y.left-a)*e.scale;const o=e.imageName?y.advance*e.scale:24*e.scale,s=String.fromCharCode(e.glyph);_p(s)?T.x+=(1-a)*e.scale:wp(s)?T.x+=o-y.height*e.scale+(-a-1)*e.scale:T.x+=e.imageName||y.width+2*a===v.w&&y.height+2*a===v.h?(o-E)/2:(o-(y.height+2*a)*e.scale)/2,C=new b(T.x,T.y-O),S=new b(T.x+E,T.y),P=new b(T.x+E,T.y-O)}else{const t=(y.left-a)*e.scale-g+w[0],n=(-y.top-a)*e.scale+w[1],i=t+O,r=n+E;T=new b(t,n),C=new b(i,n),S=new b(t,r),P=new b(i,r)}if(c){let e;e=r?new b(0,0):k?new b(u[0],u[1]):new b(n[0],n[1]),T._rotateAround(c,e),C._rotateAround(c,e),S._rotateAround(c,e),P._rotateAround(c,e)}const M=new b(0,0),I=new b(0,0);l.push({tl:T,tr:C,bl:S,br:P,tex:i,writingMode:t.writingMode,glyphOffset:_,sectionIndex:e.sectionIndex,isSDF:d,pixelOffsetTL:M,pixelOffsetBR:I,minFontScaleX:0,minFontScaleY:0})}}return l}(0,i,l,a,o,s,r,e.allowVerticalPlacement),v=e.textSizeData;let _=null;"source"===v.kind?(_=[fp*a.layout.get("text-size").evaluate(s,{},g)],_[0]>Wf&&V(`${e.layerIds[0]}: Value for "text-size" is >= ${Hf}. Reduce your "text-size".`)):"composite"===v.kind&&(_=[fp*m.compositeTextSizes[0].evaluate(s,{},g),fp*m.compositeTextSizes[1].evaluate(s,{},g)],(_[0]>Wf||_[1]>Wf)&&V(`${e.layerIds[0]}: Value for "text-size" is >= ${Hf}. Reduce your "text-size".`)),e.addSymbols(e.text,y,_,l,o,s,u,t,n,c.lineStartIndex,c.lineLength,f,h,g);for(const t of d)p[t]=e.text.placedSymbolArray.length-1;return 4*y.length}function Vf(e){for(const t in e)return e[t];return null}function Gf(e,t,n,i,r,a,o,s,l,c){let u=o.top,d=o.bottom,p=o.left,f=o.right;const m=o.collisionPadding;if(m&&(p-=m[0],u-=m[1],f+=m[2],d+=m[3]),l){const e=new b(p,u),t=new b(f,u),n=new b(p,d),i=new b(f,d),r=x(l);let a=new b(0,0);c&&(a=new b(c[0],c[1])),e._rotateAround(r,a),t._rotateAround(r,a),n._rotateAround(r,a),i._rotateAround(r,a),p=Math.min(e.x,t.x,n.x,i.x),f=Math.max(e.x,t.x,n.x,i.x),u=Math.min(e.y,t.y,n.y,i.y),d=Math.max(e.y,t.y,n.y,i.y)}return e.emplaceBack(t.x,t.y,t.z,n.x,n.y,p,u,f,d,s,i,r,a),e.length-1}function Yf(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);const t=e.bottom-e.top;return t>0?Math.max(10,t):null}function Zf(e,t,n,i){const r=e.compareText;if(t in r){const e=r[t];for(let t=e.length-1;t>=0;t--)if(i.dist(e[t])<n)return!0}else r[t]=[];return r[t].push(i),!1}function Xf(e,t){const n=e.fovAboveCenter,i=e.elevation?e.elevation.getMinElevationBelowMSL()*t:0,r=(e._camera.position[2]*e.worldSize-i)/Math.cos(e._pitch),a=Math.sin(n)*r/Math.sin(Math.max(Math.PI/2-e._pitch-n,.01)),o=Math.sin(e._pitch)*a+r;return Math.min(1.01*o,r*(1/e._horizonShift))}function Jf(e,t){if(!t.isReprojectedInTileSpace)return{scale:1<<e.z,x:e.x,y:e.y,x2:e.x+1,y2:e.y+1,projection:t};const n=Math.pow(2,-e.z),i=e.x*n,r=(e.x+1)*n,a=e.y*n,o=(e.y+1)*n,s=kc(i),l=kc(r),c=Oc(a),u=Oc(o),d=t.project(s,c),p=t.project(l,c),f=t.project(l,u),m=t.project(s,u);let h=Math.min(d.x,p.x,f.x,m.x),g=Math.min(d.y,p.y,f.y,m.y),y=Math.max(d.x,p.x,f.x,m.x),v=Math.max(d.y,p.y,f.y,m.y);const b=n/16;function _(e,n,i,r,a,o){const s=(i+a)/2,l=(r+o)/2,c=t.project(kc(s),Oc(l)),u=Math.max(0,h-c.x,g-c.y,c.x-y,c.y-v);h=Math.min(h,c.x),y=Math.max(y,c.x),g=Math.min(g,c.y),v=Math.max(v,c.y),u>b&&(_(e,c,i,r,s,l),_(c,n,s,l,a,o))}_(d,p,i,a,r,a),_(p,f,r,a,r,o),_(f,m,r,o,i,o),_(m,d,i,o,i,a),h-=b,g-=b,y+=b,v+=b;const w=1/Math.max(y-h,v-g);return{scale:w,x:h*w,y:g*w,x2:y*w,y2:v*w,projection:t}}const Kf=Zs(new Float32Array(16));class $f{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,t){return{x:0,y:0,z:0}}unproject(e,t){return new vc(0,0)}projectTilePoint(e,t,n){return{x:e,y:t,z:0}}locationPoint(e,t,n=!0){return e._coordinatePoint(e.locationCoordinate(t),n)}pixelsPerMeter(e,t){return xc(1,e)*t}pixelSpaceConversion(e,t,n){return 1}farthestPixelDistance(e){return Xf(e,e.pixelsPerMeter)}pointCoordinate(e,t,n,i){const r=e.horizonLineFromTop(!1),a=new b(t,Math.max(r,n));return e.rayIntersectionCoordinate(e.pointRayIntersection(a,i))}pointCoordinate3D(e,t,n){const i=new b(t,n);if(e.elevation)return e.elevation.pointCoordinate(i);{const t=this.pointCoordinate(e,i.x,i.y,0);return[t.x,t.y,t.z]}}isPointAboveHorizon(e,t){if(e.elevation)return!this.pointCoordinate3D(e,t.x,t.y);const n=e.horizonLineFromTop();return t.y<n}createInversionMatrix(e,t){return Kf}createTileMatrix(e,t,n){let i,r,a;const o=n.canonical,s=Zs(new Float64Array(16));if(this.isReprojectedInTileSpace){const l=Jf(o,this);i=1,r=l.x+n.wrap*l.scale,a=l.y,$s(s,s,[i/l.scale,i/l.scale,e.pixelsPerMeter/t])}else i=t/e.zoomScale(o.z),r=(o.x+Math.pow(2,o.z)*n.wrap)*i,a=o.y*i;return Ks(s,s,[r,a,0]),$s(s,s,[i/Hs,i/Hs,1]),s}upVector(e,t,n){return[0,0,1]}upVectorScale(e,t,n){return{metersToTile:1}}}class Qf extends $f{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[t,n]=this.parallels=e.parallels||[29.5,45.5],i=Math.sin(x(t));this.n=(i+Math.sin(x(n)))/2,this.c=1+i*(2*this.n-i),this.r0=Math.sqrt(this.c)/this.n}project(e,t){const{n:n,c:i,r0:r}=this,a=x(e-this.center[0]),o=x(t),s=Math.sqrt(i-2*n*Math.sin(o))/n;return{x:s*Math.sin(a*n),y:s*Math.cos(a*n)-r,z:0}}unproject(e,t){const{n:n,c:i,r0:r}=this,a=r+t;let o=Math.atan2(e,Math.abs(a))*Math.sign(a);a*n<0&&(o-=Math.PI*Math.sign(e)*Math.sign(a));const s=x(this.center[0])*n;o=M(o,-Math.PI-s,Math.PI-s);const l=S(k(o/n)+this.center[0],-180,180),c=Math.asin(S((i-(e*e+a*a)*n*n)/(2*n),-1,1)),u=S(k(c),-Tc,Tc);return new vc(l,u)}}const em=1.340264,tm=-.081106,nm=893e-6,im=.003796,rm=Math.sqrt(3)/2;class am extends $f{project(e,t){t=t/180*Math.PI,e=e/180*Math.PI;const n=Math.asin(rm*Math.sin(t)),i=n*n,r=i*i*i;return{x:.5*(e*Math.cos(n)/(rm*(em+3*tm*i+r*(7*nm+9*im*i)))/Math.PI+.5),y:1-.5*(n*(em+tm*i+r*(nm+im*i))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let n=t=(2*(1-t)-1)*Math.PI,i=n*n,r=i*i*i;for(let e,a,o,s=0;s<12&&(a=n*(em+tm*i+r*(nm+im*i))-t,o=em+3*tm*i+r*(7*nm+9*im*i),e=a/o,n=S(n-e,-Math.PI/3,Math.PI/3),i=n*n,r=i*i*i,!(Math.abs(e)<1e-12));++s);const a=rm*e*(em+3*tm*i+r*(7*nm+9*im*i))/Math.cos(n),o=Math.asin(Math.sin(n)/rm),s=S(180*a/Math.PI,-180,180),l=S(180*o/Math.PI,-Tc,Tc);return new vc(s,l)}}class om extends $f{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){return{x:.5+e/360,y:.5-t/360,z:0}}unproject(e,t){const n=360*(e-.5),i=S(360*(.5-t),-Tc,Tc);return new vc(n,i)}}const sm=Math.PI/2;function lm(e){return Math.tan((sm+e)/2)}class cm extends $f{constructor(e){super(e),this.center=e.center||[0,30];const[t,n]=this.parallels=e.parallels||[30,30];let i=x(t),r=x(n);this.southernCenter=i+r<0,this.southernCenter&&(i=-i,r=-r);const a=Math.cos(i),o=lm(i);this.n=i===r?Math.sin(i):Math.log(a/Math.cos(r))/Math.log(lm(r)/o),this.f=a*Math.pow(lm(i),this.n)/this.n}project(e,t){t=x(t),this.southernCenter&&(t=-t),e=x(e-this.center[0]);const n=1e-6,{n:i,f:r}=this;r>0?t<-sm+n&&(t=-sm+n):t>sm-n&&(t=sm-n);const a=r/Math.pow(lm(t),i);let o=a*Math.sin(i*e),s=r-a*Math.cos(i*e);return o=.5*(o/Math.PI+.5),s=.5*(s/Math.PI+.5),{x:o,y:this.southernCenter?s:1-s,z:0}}unproject(e,t){e=(2*e-.5)*Math.PI,this.southernCenter&&(t=1-t),t=(2*(1-t)-.5)*Math.PI;const{n:n,f:i}=this,r=i-t,a=Math.sign(r),o=Math.sign(n)*Math.sqrt(e*e+r*r);let s=Math.atan2(e,Math.abs(r))*a;r*n<0&&(s-=Math.PI*Math.sign(e)*a);const l=S(k(s/n)+this.center[0],-180,180),c=S(k(2*Math.atan(Math.pow(i/o,1/n))-sm),-Tc,Tc);return new vc(l,this.southernCenter?-c:c)}}class um extends $f{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,t){return{x:_c(e),y:wc(t),z:0}}unproject(e,t){const n=kc(e),i=Oc(t);return new vc(n,i)}}const dm=x(Tc);class pm extends $f{project(e,t){const n=(t=x(t))*t,i=n*n;return{x:.5*((e=x(e))*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791))/Math.PI+.5),y:1-.5*(t*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let n=t=(2*(1-t)-1)*Math.PI,i=25,r=0,a=n*n;do{a=n*n;const e=a*a;r=(n*(1.007226+a*(.015085+e*(.028874*a-.044475-.005916*e)))-t)/(1.007226+a*(.045255+e*(.259866*a-.311325-.005916*11*e))),n=S(n-r,-dm,dm)}while(Math.abs(r)>1e-6&&--i>0);a=n*n;const o=S(k(e/(.8707+a*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979))),-180,180),s=k(n);return new vc(o,s)}}const fm=x(Tc);class mm extends $f{project(e,t){t=x(t),e=x(e);const n=Math.cos(t),i=2/Math.PI,r=Math.acos(n*Math.cos(e/2)),a=Math.sin(r)/r,o=.5*(e*i+2*n*Math.sin(e/2)/a)||0,s=.5*(t+Math.sin(t)/a)||0;return{x:.5*(o/Math.PI+.5),y:1-.5*(s/Math.PI+1),z:0}}unproject(e,t){let n=e=(2*e-.5)*Math.PI,i=t=(2*(1-t)-1)*Math.PI,r=25;const a=1e-6;let o=0,s=0;do{const r=Math.cos(i),a=Math.sin(i),l=2*a*r,c=a*a,u=r*r,d=Math.cos(n/2),p=Math.sin(n/2),f=2*d*p,m=p*p,h=1-u*d*d,g=h?1/h:0,y=h?Math.acos(r*d)*Math.sqrt(1/h):0,v=.5*(2*y*r*p+2*n/Math.PI)-e,b=.5*(y*a+i)-t,_=.5*g*(u*m+y*r*d*c)+1/Math.PI,w=g*(f*l/4-y*a*p),x=.125*g*(l*p-y*a*u*f),k=.5*g*(c*d+y*m*r)+.5,O=w*x-k*_;o=(b*w-v*k)/O,s=(v*x-b*_)/O,n=S(n-o,-Math.PI,Math.PI),i=S(i-s,-fm,fm)}while((Math.abs(o)>a||Math.abs(s)>a)&&--r>0);return new vc(k(n),k(i))}}class hm extends $f{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(x(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){const{scale:n,cosPhi:i}=this;return{x:x(e)*i*n+.5,y:-Math.sin(x(t))/i*n+.5,z:0}}unproject(e,t){const{scale:n,cosPhi:i}=this,r=-(t-.5)/n,a=S(k((e-.5)/n)/i,-180,180),o=Math.asin(S(r*i,-1,1)),s=S(k(o),-Tc,Tc);return new vc(a,s)}}class gm extends um{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(e,t,n){const i=ic(e,t,n);return vl(i,i,oc(Xl(n))),{x:i[0],y:i[1],z:i[2]}}locationPoint(e,t){const n=nc(t.lat,t.lng),i=hl([],n),r=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(t),e._centerAltitude):e._centerAltitude;ml(n,n,i,xc(1,0)*Hs*r);const a=Zs(new Float64Array(16));return Js(a,e.pixelMatrix,e.globeMatrix),vl(n,n,a),new b(n[0],n[1])}pixelsPerMeter(e,t){return xc(1,0)*t}pixelSpaceConversion(e,t,n){const i=xc(1,e)*t,r=An(xc(1,45)*t,i,n);return this.pixelsPerMeter(e,t)/r}createTileMatrix(e,t,n){const i=sc(Xl(n.canonical));return Js(new Float64Array(16),e.globeMatrix,i)}createInversionMatrix(e,t){const{center:n}=e,i=oc(Xl(t));return el(i,i,x(n.lng)),Qs(i,i,x(n.lat)),$s(i,i,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(i)}pointCoordinate(e,t,n,i){return Gl(e,t,n,!0)||new Sc(0,0)}pointCoordinate3D(e,t,n){const i=this.pointCoordinate(e,t,n,0);return[i.x,i.y,i.z]}isPointAboveHorizon(e,t){return!Gl(e,t.x,t.y,!1)}farthestPixelDistance(e){const t=function(e,t){const n=e.cameraToCenterDistance,i=e._centerAltitude*t,r=e._camera,a=e._camera.forward(),o=ll([],fl([],a,-n),[0,0,i]),s=e.worldSize/(2*Math.PI),l=[0,0,-s],c=e.width/e.height,u=Math.tan(e.fovAboveCenter),d=fl([],r.up(),u),p=fl([],r.right(),u*c),f=hl([],ll([],ll([],a,d),p)),m=[];let h;if(new Nl(o,f).closestPointOnSphere(l,s,m)){const t=ll([],m,l),n=wl([],t,o);h=Math.cos(e.fovAboveCenter)*ol(n)}else{const e=wl([],o,l),t=wl([],l,o);hl(t,t);const n=ol(e)-s;h=Math.sqrt(n*(n+2*s));const i=Math.acos(h/(s+n))-Math.acos(gl(a,t));h*=Math.cos(i)}return 1.01*h}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),n=cc(e.zoom);if(n>0){const i=Xf(e,xc(1,e.center.lat)*e.worldSize),r=e.worldSize/(2*Math.PI),a=Math.max(e.width,e.height)/e.worldSize*Math.PI;return An(t,i+r*(1-Math.cos(a)),Math.pow(n,10))}return t}upVector(e,t,n){return ic(t,n,e,1)}upVectorScale(e){return{metersToTile:Vl(rc(Xl(e)))}}}function ym(e){const t=e.parallels,n=!!t&&Math.abs(t[0]+t[1])<.01;switch(e.name){case"mercator":return new um(e);case"equirectangular":return new om(e);case"naturalEarth":return new pm(e);case"equalEarth":return new am(e);case"winkelTripel":return new mm(e);case"albers":return n?new hm(e):new Qf(e);case"lambertConformalConic":return n?new hm(e):new cm(e);case"globe":return new gm(e)}throw new Error("Invalid projection name: "+e.name)}const vm=xd.types,bm=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function _m(e,t,n,i,r,a,o,s,l,c,u,d,p){const f=s?Math.min(Wf,Math.round(s[0])):0,m=s?Math.min(Wf,Math.round(s[1])):0;e.emplaceBack(t,n,Math.round(32*i),Math.round(32*r),a,o,(f<<1)+(l?1:0),m,16*c,16*u,256*d,256*p)}function wm(e,t,n,i,r,a,o){e.emplaceBack(t,n,i,r,a,o)}function xm(e,t,n,i,r){e.emplaceBack(t,n,i,r),e.emplaceBack(t,n,i,r),e.emplaceBack(t,n,i,r),e.emplaceBack(t,n,i,r)}function km(e){for(const t of e.sections)if(qa(t.text))return!0;return!1}class Om{constructor(e){this.layoutVertexArray=new Io,this.indexArray=new zo,this.programConfigurations=e,this.segments=new Us,this.dynamicLayoutVertexArray=new Co,this.opacityVertexArray=new jo,this.placedSymbolArray=new Ko,this.globeExtVertexArray=new Ao}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,n,i){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,op.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,lp.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,bm,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,sp.members,!0)),this.opacityVertexBuffer.itemSize=1),(n||i)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Br(Om,"SymbolBuffers");class Em{constructor(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new Us,this.collisionVertexArray=new Do,this.collisionVertexArrayExt=new Bo}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,cp.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,up.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Br(Em,"CollisionBuffers");class Tm{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.id),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Zs([]),this.placementViewportMatrix=Zs([]);const t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=mp(this.zoom,t["text-size"]),this.iconSizeData=mp(this.zoom,t["icon-size"]);const n=this.layers[0].layout,i=n.get("symbol-sort-key"),r=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==r&&void 0!==i.constantOr(1),this.sortFeaturesByY=("viewport-y"===r||"auto"===r&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=n.get("text-writing-mode").map(e=>Kp[e]),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new Om(new Is(this.layers,this.zoom,e=>/^text/.test(e))),this.icon=new Om(new Is(this.layers,this.zoom,e=>/^icon/.test(e))),this.glyphOffsetArray=new es,this.lineVertexArray=new ts,this.symbolInstances=new Qo}calculateGlyphDependencies(e,t,n,i,r){for(let n=0;n<e.length;n++)if(t[e.charCodeAt(n)]=!0,i&&r){const i=bp[e.charAt(n)];i&&(t[i.charCodeAt(0)]=!0)}}populate(e,t,n,i){const r=this.layers[0],a=r.layout,o="globe"===this.projection.name,s=a.get("text-font"),l=a.get("text-field"),c=a.get("icon-image"),u=("constant"!==l.value.kind||l.value.value instanceof Rt&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),d="constant"!==c.value.kind||!!c.value.value||Object.keys(c.parameters).length>0,p=a.get("symbol-sort-key");if(this.features=[],!u&&!d)return;const f=t.iconDependencies,m=t.glyphDependencies,h=t.availableImages,g=new io(this.zoom);for(const{feature:t,id:l,index:c,sourceLayerIndex:y}of e){const e=r._featureFilter.needGeometry,v=Dc(t,e);if(!r._featureFilter.filter(g,v,n))continue;if(e||(v.geometry=Nc(t,n,i)),o&&1!==t.type&&n.z<=5){const e=v.geometry,t=.98078528056,i=(e,i)=>gl(ic(e.x,e.y,n,1),ic(i.x,i.y,n,1))<t;for(let t=0;t<e.length;t++)e[t]=Ac(e[t],i)}let b,_;if(u){const e=r.getValueAndResolveTokens("text-field",v,n,h),t=Rt.factory(e);km(t)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===eo()||this.hasRTLText&&no.isParsed())&&(b=vp(t,r,v))}if(d){const e=r.getValueAndResolveTokens("icon-image",v,n,h);_=e instanceof Nt?e:Nt.fromString(e)}if(!b&&!_)continue;const w=this.sortFeaturesByKey?p.evaluate(v,{},n):void 0;if(this.features.push({id:l,text:b,icon:_,index:c,sourceLayerIndex:y,geometry:v.geometry,properties:t.properties,type:vm[t.type],sortKey:w}),_&&(f[_.name]=!0),b){const e=s.evaluate(v,{},n).join(","),t="map"===a.get("text-rotation-alignment")&&"point"!==a.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Kp.vertical)>=0;for(const n of b.sections)if(n.image)f[n.image.name]=!0;else{const i=Da(b.toString()),r=n.fontStack||e,a=m[r]=m[r]||{};this.calculateGlyphDependencies(n.text,a,t,this.allowVerticalPlacement,i)}}}"line"===a.get("symbol-placement")&&(this.features=function(e){const t={},n={},i=[];let r=0;function a(t){i.push(e[t]),r++}function o(e,t,r){const a=n[e];return delete n[e],n[t]=a,i[a].geometry[0].pop(),i[a].geometry[0]=i[a].geometry[0].concat(r[0]),a}function s(e,n,r){const a=t[n];return delete t[n],t[e]=a,i[a].geometry[0].shift(),i[a].geometry[0]=r[0].concat(i[a].geometry[0]),a}function l(e,t,n){const i=n?t[0][t[0].length-1]:t[0][0];return`${e}:${i.x}:${i.y}`}for(let c=0;c<e.length;c++){const u=e[c],d=u.geometry,p=u.text?u.text.toString():null;if(!p){a(c);continue}const f=l(p,d),m=l(p,d,!0);if(f in n&&m in t&&n[f]!==t[m]){const e=s(f,m,d),r=o(f,m,i[e].geometry);delete t[f],delete n[m],n[l(p,i[r].geometry,!0)]=r,i[e].geometry=null}else f in n?o(f,m,d):m in t?s(f,m,d):(a(c),t[f]=r-1,n[m]=r-1)}return i.filter(e=>e.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((e,t)=>e.sortKey-t.sortKey)}update(e,t,n,i){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n,i),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n,i))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=ym(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const n=this.lineVertexArray.length;if(void 0!==e.segment)for(const{x:e,y:n}of t)this.lineVertexArray.emplaceBack(e,n);return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(e,t,n,i,r,a,o,s,l,c,u,d,p,f){const m=e.indexArray,h=e.layoutVertexArray,g=e.globeExtVertexArray,y=e.segments.prepareSegment(4*t.length,h,m,this.canOverlap?a.sortKey:void 0),v=this.glyphOffsetArray.length,b=y.vertexLength,_=this.allowVerticalPlacement&&o===Kp.vertical?Math.PI/2:0,w=a.text&&a.text.sections;for(let i=0;i<t.length;i++){const{tl:r,tr:o,bl:c,br:u,tex:d,pixelOffsetTL:v,pixelOffsetBR:b,minFontScaleX:x,minFontScaleY:k,glyphOffset:O,isSDF:E,sectionIndex:T}=t[i],C=y.vertexLength,S=O[1];if(_m(h,l.x,l.y,r.x,S+r.y,d.x,d.y,n,E,v.x,v.y,x,k),_m(h,l.x,l.y,o.x,S+o.y,d.x+d.w,d.y,n,E,b.x,v.y,x,k),_m(h,l.x,l.y,c.x,S+c.y,d.x,d.y+d.h,n,E,v.x,b.y,x,k),_m(h,l.x,l.y,u.x,S+u.y,d.x+d.w,d.y+d.h,n,E,b.x,b.y,x,k),s){const{x:t,y:n,z:i}=s.anchor,[r,a,o]=s.up;wm(g,t,n,i,r,a,o),wm(g,t,n,i,r,a,o),wm(g,t,n,i,r,a,o),wm(g,t,n,i,r,a,o),xm(e.dynamicLayoutVertexArray,t,n,i,_)}else xm(e.dynamicLayoutVertexArray,l.x,l.y,l.z,_);m.emplaceBack(C,C+1,C+2),m.emplaceBack(C+1,C+2,C+3),y.vertexLength+=4,y.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(O[0]),i!==t.length-1&&T===t[i+1].sectionIndex||e.programConfigurations.populatePaintArrays(h.length,a,a.index,{},p,f,w&&w[T])}const x=s?s.anchor:l;e.placedSymbolArray.emplaceBack(x.x,x.y,x.z,l.x,l.y,v,this.glyphOffsetArray.length-v,b,c,u,l.segment,n?n[0]:0,n?n[1]:0,i[0],i[1],o,0,!1,0,d,0)}_commitLayoutVertex(e,t,n,i,r,a,o){e.emplaceBack(t,n,i,r,a,Math.round(o.x),Math.round(o.y))}_addCollisionDebugVertices(e,t,n,i,r,a,o){const s=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),l=s.vertexLength,c=o.tileAnchorX,u=o.tileAnchorY;for(let e=0;e<4;e++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),n.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(n.layoutVertexArray,i,r,a,c,u,new b(e.x1,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,i,r,a,c,u,new b(e.x2,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,i,r,a,c,u,new b(e.x2,e.y2)),this._commitLayoutVertex(n.layoutVertexArray,i,r,a,c,u,new b(e.x1,e.y2)),s.vertexLength+=4;const d=n.indexArray;d.emplaceBack(l,l+1),d.emplaceBack(l+1,l+2),d.emplaceBack(l+2,l+3),d.emplaceBack(l+3,l),s.primitiveLength+=4}_addTextDebugCollisionBoxes(e,t,n,i,r,a){for(let o=i;o<r;o++){const i=n.get(o),r=this.getSymbolInstanceTextSize(e,a,t,o);this._addCollisionDebugVertices(i,r,this.textCollisionBox,i.projectedAnchorX,i.projectedAnchorY,i.projectedAnchorZ,a)}}_addIconDebugCollisionBoxes(e,t,n,i,r,a){for(let o=i;o<r;o++){const i=n.get(o),r=this.getSymbolInstanceIconSize(e,t,a.placedIconSymbolIndex);this._addCollisionDebugVertices(i,r,this.iconCollisionBox,i.projectedAnchorX,i.projectedAnchorY,i.projectedAnchorZ,a)}}generateCollisionDebugBuffers(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Em(Ro,dp.members,Vo),this.iconCollisionBox=new Em(Ro,dp.members,Vo);const n=gp(this.iconSizeData,e),i=gp(this.textSizeData,e);for(let r=0;r<this.symbolInstances.length;r++){const a=this.symbolInstances.get(r);this._addTextDebugCollisionBoxes(i,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._addTextDebugCollisionBoxes(i,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._addIconDebugCollisionBoxes(n,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex,a),this._addIconDebugCollisionBoxes(n,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a)}}getSymbolInstanceTextSize(e,t,n,i){const r=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:i),a=hp(this.textSizeData,e,r)/24;return this.tilePixelRatio*a}getSymbolInstanceIconSize(e,t,n){const i=this.icon.placedSymbolArray.get(n),r=hp(this.iconSizeData,e,i);return this.tilePixelRatio*r}_commitDebugCollisionVertexUpdate(e,t,n){e.emplaceBack(t,-n,-n),e.emplaceBack(t,n,-n),e.emplaceBack(t,n,n),e.emplaceBack(t,-n,n)}_updateTextDebugCollisionBoxes(e,t,n,i,r,a){for(let o=i;o<r;o++){const i=n.get(o),r=this.getSymbolInstanceTextSize(e,a,t,o);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,r,i.padding)}}_updateIconDebugCollisionBoxes(e,t,n,i,r,a){for(let o=i;o<r;o++){const i=n.get(o),r=this.getSymbolInstanceIconSize(e,t,a);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,r,i.padding)}}updateCollisionDebugBuffers(e,t){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const n=gp(this.iconSizeData,e),i=gp(this.textSizeData,e);for(let r=0;r<this.symbolInstances.length;r++){const a=this.symbolInstances.get(r);this._updateTextDebugCollisionBoxes(i,e,t,a.textBoxStartIndex,a.textBoxEndIndex,a),this._updateTextDebugCollisionBoxes(i,e,t,a.verticalTextBoxStartIndex,a.verticalTextBoxEndIndex,a),this._updateIconDebugCollisionBoxes(n,e,t,a.iconBoxStartIndex,a.iconBoxEndIndex,a.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(n,e,t,a.verticalIconBoxStartIndex,a.verticalIconBoxEndIndex,a.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,t,n,i,r,a,o,s,l){const c={};if(t<n){const{x1:n,y1:i,x2:r,y2:a,padding:o,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:p,featureIndex:f}=e.get(t);c.textBox={x1:n,y1:i,x2:r,y2:a,padding:o,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:p},c.textFeatureIndex=f}if(i<r){const{x1:t,y1:n,x2:r,y2:a,padding:o,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:p,featureIndex:f}=e.get(i);c.verticalTextBox={x1:t,y1:n,x2:r,y2:a,padding:o,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:p},c.verticalTextFeatureIndex=f}if(a<o){const{x1:t,y1:n,x2:i,y2:r,padding:o,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:p,featureIndex:f}=e.get(a);c.iconBox={x1:t,y1:n,x2:i,y2:r,padding:o,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:p},c.iconFeatureIndex=f}if(s<l){const{x1:t,y1:n,x2:i,y2:r,padding:a,projectedAnchorX:o,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:p,featureIndex:f}=e.get(s);c.verticalIconBox={x1:t,y1:n,x2:i,y2:r,padding:a,projectedAnchorX:o,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:d,tileAnchorY:p},c.verticalIconFeatureIndex=f}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const n=e.placedSymbolArray.get(t),i=n.vertexStartIndex+4*n.numGlyphs;for(let t=n.vertexStartIndex;t<i;t+=4)e.indexArray.emplaceBack(t,t+1,t+2),e.indexArray.emplaceBack(t+1,t+2,t+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),n=Math.cos(e),i=[],r=[],a=[];for(let e=0;e<this.symbolInstances.length;++e){a.push(e);const o=this.symbolInstances.get(e);i.push(0|Math.round(t*o.tileAnchorX+n*o.tileAnchorY)),r.push(o.featureIndex)}return a.sort((e,t)=>i[e]-i[t]||r[t]-r[e]),a}addToSortKeyRanges(e,t){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex);const{rightJustifiedTextSymbolIndex:n,centerJustifiedTextSymbolIndex:i,leftJustifiedTextSymbolIndex:r,verticalPlacedTextSymbolIndex:a,placedIconSymbolIndex:o,verticalPlacedIconSymbolIndex:s}=t;n>=0&&this.addIndicesForPlacedSymbol(this.text,n),i>=0&&i!==n&&this.addIndicesForPlacedSymbol(this.text,i),r>=0&&r!==i&&r!==n&&this.addIndicesForPlacedSymbol(this.text,r),a>=0&&this.addIndicesForPlacedSymbol(this.text,a),o>=0&&this.addIndicesForPlacedSymbol(this.icon,o),s>=0&&this.addIndicesForPlacedSymbol(this.icon,s)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Br(Tm,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),Tm.MAX_GLYPHS=65535,Tm.addDynamicAttributes=xm;const Cm=new go({"symbol-placement":new fo(tt.layout_symbol["symbol-placement"]),"symbol-spacing":new fo(tt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new fo(tt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new mo(tt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new fo(tt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new fo(tt.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new fo(tt.layout_symbol["icon-ignore-placement"]),"icon-optional":new fo(tt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new fo(tt.layout_symbol["icon-rotation-alignment"]),"icon-size":new mo(tt.layout_symbol["icon-size"]),"icon-text-fit":new fo(tt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new fo(tt.layout_symbol["icon-text-fit-padding"]),"icon-image":new mo(tt.layout_symbol["icon-image"]),"icon-rotate":new mo(tt.layout_symbol["icon-rotate"]),"icon-padding":new fo(tt.layout_symbol["icon-padding"]),"icon-keep-upright":new fo(tt.layout_symbol["icon-keep-upright"]),"icon-offset":new mo(tt.layout_symbol["icon-offset"]),"icon-anchor":new mo(tt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new fo(tt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new fo(tt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new fo(tt.layout_symbol["text-rotation-alignment"]),"text-field":new mo(tt.layout_symbol["text-field"]),"text-font":new mo(tt.layout_symbol["text-font"]),"text-size":new mo(tt.layout_symbol["text-size"]),"text-max-width":new mo(tt.layout_symbol["text-max-width"]),"text-line-height":new mo(tt.layout_symbol["text-line-height"]),"text-letter-spacing":new mo(tt.layout_symbol["text-letter-spacing"]),"text-justify":new mo(tt.layout_symbol["text-justify"]),"text-radial-offset":new mo(tt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new fo(tt.layout_symbol["text-variable-anchor"]),"text-anchor":new mo(tt.layout_symbol["text-anchor"]),"text-max-angle":new fo(tt.layout_symbol["text-max-angle"]),"text-writing-mode":new fo(tt.layout_symbol["text-writing-mode"]),"text-rotate":new mo(tt.layout_symbol["text-rotate"]),"text-padding":new fo(tt.layout_symbol["text-padding"]),"text-keep-upright":new fo(tt.layout_symbol["text-keep-upright"]),"text-transform":new mo(tt.layout_symbol["text-transform"]),"text-offset":new mo(tt.layout_symbol["text-offset"]),"text-allow-overlap":new fo(tt.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new fo(tt.layout_symbol["text-ignore-placement"]),"text-optional":new fo(tt.layout_symbol["text-optional"])});var Sm={paint:new go({"icon-opacity":new mo(tt.paint_symbol["icon-opacity"]),"icon-color":new mo(tt.paint_symbol["icon-color"]),"icon-halo-color":new mo(tt.paint_symbol["icon-halo-color"]),"icon-halo-width":new mo(tt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new mo(tt.paint_symbol["icon-halo-blur"]),"icon-translate":new fo(tt.paint_symbol["icon-translate"]),"icon-translate-anchor":new fo(tt.paint_symbol["icon-translate-anchor"]),"text-opacity":new mo(tt.paint_symbol["text-opacity"]),"text-color":new mo(tt.paint_symbol["text-color"],{runtimeType:ft,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new mo(tt.paint_symbol["text-halo-color"]),"text-halo-width":new mo(tt.paint_symbol["text-halo-width"]),"text-halo-blur":new mo(tt.paint_symbol["text-halo-blur"]),"text-translate":new fo(tt.paint_symbol["text-translate"]),"text-translate-anchor":new fo(tt.paint_symbol["text-translate-anchor"])}),layout:Cm};class Pm{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:ct,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Br(Pm,"FormatSectionOverride",{omit:["defaultValue"]});class Mm extends Bs{constructor(e){super(e,Sm)}recalculate(e,t){super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const n=this.layout.get("text-writing-mode");if(n){const e=[];for(const t of n)e.indexOf(t)<0&&e.push(t);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,t,n,i){const r=this.layout.get(e).evaluate(t,{},n,i),a=this._unevaluatedLayout._values[e];return a.isDataDriven()||qi(a.value)||!r?r:function(e,t){return t.replace(/{([^{}]+)}/g,(t,n)=>n in e?String(e[n]):"")}(t.properties,r)}createBucket(e){return new Tm(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of Sm.paint.overridableProperties){if(!Mm.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),n=new Pm(t),i=new Wi(n,t.property.specification);let r=null;r="constant"===t.value.kind||"source"===t.value.kind?new Gi("source",i):new Yi("composite",i,t.value.zoomStops,t.value._interpolationType),this.paint._values[e]=new uo(t.property,r,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,n){return!(!this.layout||t.isDataDriven()||n.isDataDriven())&&Mm.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const n=e.get("text-field"),i=Sm.paint.properties[t];let r=!1;const a=e=>{for(const t of e)if(i.overrides&&i.overrides.hasOverride(t))return void(r=!0)};if("constant"===n.value.kind&&n.value.value instanceof Rt)a(n.value.value.sections);else if("source"===n.value.kind){const e=t=>{r||(t instanceof Ht&&zt(t.value)===yt?a(t.value.sections):t instanceof Yt?a(t.sections):t.eachChild(e))},t=n.value;t._styleExpression&&e(t._styleExpression.expression)}return r}getProgramConfiguration(e){return new Ms(this,e)}}var Im={paint:new go({"background-color":new fo(tt.paint_background["background-color"]),"background-pattern":new fo(tt.paint_background["background-pattern"]),"background-opacity":new fo(tt.paint_background["background-opacity"])})},Am={paint:new go({"raster-opacity":new fo(tt.paint_raster["raster-opacity"]),"raster-hue-rotate":new fo(tt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new fo(tt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new fo(tt.paint_raster["raster-brightness-max"]),"raster-saturation":new fo(tt.paint_raster["raster-saturation"]),"raster-contrast":new fo(tt.paint_raster["raster-contrast"]),"raster-resampling":new fo(tt.paint_raster["raster-resampling"]),"raster-fade-duration":new fo(tt.paint_raster["raster-fade-duration"])})};class jm extends Bs{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var Lm={paint:new go({"sky-type":new fo(tt.paint_sky["sky-type"]),"sky-atmosphere-sun":new fo(tt.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new fo(tt.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new fo(tt.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new fo(tt.paint_sky["sky-gradient-radius"]),"sky-gradient":new ho(tt.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new fo(tt.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new fo(tt.paint_sky["sky-atmosphere-color"]),"sky-opacity":new fo(tt.paint_sky["sky-opacity"])})};function Rm(e,t,n){const i=[0,0,1],r=Sl([]);return Ml(r,r,n?-x(e)+Math.PI:x(e)),Pl(r,r,-x(t)),bl(i,i,r),hl(i,i)}const Nm={circle:class extends Bs{constructor(e){super(e,ru)}createBucket(e){return new Fc(e)}queryRadius(e){const t=e;return Qc("circle-radius",this,t)+Qc("circle-stroke-width",this,t)+eu(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,n,i,r,a,o,s){const l=nu(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),c=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n);return au(e,i,a,o,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,c)}getProgramIds(){return["circle"]}getProgramConfiguration(e){return new Ms(this,e)}},heatmap:class extends Bs{createBucket(e){return new uu(e)}constructor(e){super(e,gu),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=yu({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(e){return Qc("heatmap-radius",this,e)}queryIntersectsFeature(e,t,n,i,r,a,o,s){const l=this.paint.get("heatmap-radius").evaluate(t,n);return au(e,i,a,o,s,!0,!0,new b(0,0),l)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(e){return new Ms(this,e)}},hillshade:class extends Bs{constructor(e){super(e,vu)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Bs{constructor(e){super(e,rd)}getProgramIds(){const e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),n=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getProgramConfiguration(e){return new Ms(this,e)}recalculate(e,t){super.recalculate(e,t);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new nd(e)}queryRadius(){return eu(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,n,i,r,a){return!e.queryGeometry.isAboveHorizon&&Wc(tu(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),i)}isTileClipped(){return!0}},"fill-extrusion":class extends Bs{constructor(e){super(e,zd)}createBucket(e){return new Pd(e)}queryRadius(){return eu(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(e){return new Ms(this,e)}queryIntersectsFeature(e,t,n,i,r,a,o,s,l){const c=nu(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),u=this.paint.get("fill-extrusion-height").evaluate(t,n),d=this.paint.get("fill-extrusion-base").evaluate(t,n),p=[0,0],f=s&&a.elevation,m=a.elevation?a.elevation.exaggeration():1,h=e.tile.getBucket(this);if(f&&h instanceof Pd){const e=h.centroidVertexArray,t=l+1;t<e.length&&(p[0]=e.geta_centroid_pos0(t),p[1]=e.geta_centroid_pos1(t))}if(0===p[0]&&1===p[1])return!1;"globe"===a.projection.name&&(i=Dd([i],[new b(0,0),new b(Hs,Hs)],e.tileID.canonical).map(e=>e.polygon).flat());const g=f?s:null,[y,v]=function(e,t,n,i,r,a,o,s,l,c,u){return"globe"===e.projection.name?function(e,t,n,i,r,a,o,s,l,c,u){const d=[],p=[],f=e.projection.upVectorScale(u,e.center.lat,e.worldSize).metersToTile,m=[0,0,0,1],h=[0,0,0,1],g=(e,t,n,i)=>{e[0]=t,e[1]=n,e[2]=i,e[3]=1},y=Nd();n>0&&(n+=y),i+=y;for(const y of t){const t=[],v=[];for(const d of y){const p=d.x+r.x,y=d.y+r.y,b=e.projection.projectTilePoint(p,y,u),_=e.projection.upVector(u,d.x,d.y);let w=n,x=i;if(o){const e=Zd(p,y,n,i,o,s,l,c);w+=e.base,x+=e.top}0!==n?g(m,b.x+_[0]*f*w,b.y+_[1]*f*w,b.z+_[2]*f*w):g(m,b.x,b.y,b.z),g(h,b.x+_[0]*f*x,b.y+_[1]*f*x,b.z+_[2]*f*x),vl(m,m,a),vl(h,h,a),t.push(new Vd(m[0],m[1],m[2])),v.push(new Vd(h[0],h[1],h[2]))}d.push(t),p.push(v)}return[d,p]}(e,t,n,i,r,a,o,s,l,c,u):o?function(e,t,n,i,r,a,o,s,l){const c=[],u=[],d=[0,0,0,1];for(const p of e){const e=[],f=[];for(const c of p){const u=c.x+i.x,p=c.y+i.y,m=Zd(u,p,t,n,a,o,s,l);d[0]=u,d[1]=p,d[2]=m.base,d[3]=1,Tl(d,d,r),d[3]=Math.max(d[3],1e-5);const h=new Vd(d[0]/d[3],d[1]/d[3],d[2]/d[3]);d[0]=u,d[1]=p,d[2]=m.top,d[3]=1,Tl(d,d,r),d[3]=Math.max(d[3],1e-5);const g=new Vd(d[0]/d[3],d[1]/d[3],d[2]/d[3]);e.push(h),f.push(g)}c.push(e),u.push(f)}return[c,u]}(t,n,i,r,a,o,s,l,c):function(e,t,n,i,r){const a=[],o=[],s=r[8]*t,l=r[9]*t,c=r[10]*t,u=r[11]*t,d=r[8]*n,p=r[9]*n,f=r[10]*n,m=r[11]*n;for(const t of e){const e=[],n=[];for(const a of t){const t=a.x+i.x,o=a.y+i.y,h=r[0]*t+r[4]*o+r[12],g=r[1]*t+r[5]*o+r[13],y=r[2]*t+r[6]*o+r[14],v=r[3]*t+r[7]*o+r[15],b=h+s,_=g+l,w=y+c,x=Math.max(v+u,1e-5),k=h+d,O=g+p,E=y+f,T=Math.max(v+m,1e-5);e.push(new Vd(b/x,_/x,w/x)),n.push(new Vd(k/T,O/T,E/T))}a.push(e),o.push(n)}return[a,o]}(t,n,i,r,a)}(a,i,d,u,c,o,g,p,m,a.center.lat,e.tileID.canonical),_=e.queryGeometry;return function(e,t,n){let i=1/0;Wc(n,t)&&(i=Yd(n,t[0]));for(let r=0;r<t.length;r++){const a=t[r],o=e[r];for(let e=0;e<a.length-1;e++){const t=a[e],r=[t,a[e+1],o[e+1],o[e],t];Uc(n,r)&&(i=Math.min(i,Yd(n,r)))}}return i!==1/0&&i}(y,v,_.isPointQuery()?_.screenBounds:_.screenGeometry)}},line:class extends Bs{constructor(e){super(e,ip),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof In,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=rp.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new tp(e)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(e){return new Ms(this,e)}queryRadius(e){const t=e,n=ap(Qc("line-width",this,t),Qc("line-gap-width",this,t)),i=Qc("line-offset",this,t);return n/2+Math.abs(i)+eu(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,n,i,r,a){if(e.queryGeometry.isAboveHorizon)return!1;const o=tu(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a.angle,e.pixelToTileUnitsFactor),s=e.pixelToTileUnitsFactor/2*ap(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),l=this.paint.get("line-offset").evaluate(t,n);return l&&(i=function(e,t){const n=[],i=new b(0,0);for(let r=0;r<e.length;r++){const a=e[r],o=[];for(let e=0;e<a.length;e++){const n=a[e],r=a[e+1],s=0===e?i:n.sub(a[e-1])._unit()._perp(),l=e===a.length-1?i:r.sub(n)._unit()._perp(),c=s._add(l)._unit();c._mult(1/(c.x*l.x+c.y*l.y)),o.push(c._mult(t)._add(n))}n.push(o)}return n}(i,l*e.pixelToTileUnitsFactor)),function(e,t,n){for(let i=0;i<t.length;i++){const r=t[i];if(e.length>=3)for(let t=0;t<r.length;t++)if(Jc(e,r[t]))return!0;if(qc(e,r,n))return!0}return!1}(o,i,s)}isTileClipped(){return!0}},symbol:Mm,background:class extends Bs{constructor(e){super(e,Im)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Bs{constructor(e){super(e,Am)}getProgramIds(){return["raster"]}},sky:class extends Bs{constructor(e){super(e,Lm),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=yu({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}getCenter(e,t){if("atmosphere"===this.paint.get("sky-type")){const n=this.paint.get("sky-atmosphere-sun"),i=!n,r=e.style.light,a=r.properties.get("position");return i&&"viewport"===r.properties.get("anchor")&&V("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),i?Rm(a.azimuthal,90-a.polar,t):Rm(n[0],90-n[1],t)}const n=this.paint.get("sky-gradient-center");return Rm(n[0],90-n[1],t)}is3D(){return!1}isSky(){return!0}markSkyboxValid(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}};class Dm{constructor(e,t,n,i){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,i)}update(e,t,i){const{width:r,height:a}=e,{context:o}=this,{gl:s}=o,{HTMLImageElement:l,HTMLCanvasElement:c,HTMLVideoElement:u,ImageData:d,ImageBitmap:p}=n;if(s.bindTexture(s.TEXTURE_2D,this.texture),o.pixelStoreUnpackFlipY.set(!1),o.pixelStoreUnpack.set(1),o.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!t||!1!==t.premultiply)),i||this.size&&this.size[0]===r&&this.size[1]===a){const{x:t,y:n}=i||{x:0,y:0};e instanceof l||e instanceof c||e instanceof u||e instanceof d||p&&e instanceof p?s.texSubImage2D(s.TEXTURE_2D,0,t,n,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,t,n,r,a,s.RGBA,s.UNSIGNED_BYTE,e.data)}else this.size=[r,a],e instanceof l||e instanceof c||e instanceof u||e instanceof d||p&&e instanceof p?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,r,a,0,this.format,s.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(t&&t.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&s.generateMipmap(s.TEXTURE_2D)}bind(e,t){const{context:n}=this,{gl:i}=n;i.bindTexture(i.TEXTURE_2D,this.texture),e!==this.filter&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,e),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,this.useMipmap?e===i.NEAREST?i.NEAREST_MIPMAP_NEAREST:i.LINEAR_MIPMAP_NEAREST:e),this.filter=e),t!==this.wrap&&(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class Bm{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class zm{constructor(){this.tasks={},this.taskQueue=[],z(["process"],this),this.invoker=new Bm(this.process),this.nextId=0}add(e,t){const n=this.nextId++,i=function({type:e,isSymbolTile:t,zoom:n}){return n=n||0,"message"===e?0:"maybePrepare"!==e||t?"parseTile"!==e||t?"parseTile"===e&&t?300-n:"maybePrepare"===e&&t?400-n:500:200-n:100-n}(t);if(0===i){Z();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[n]={fn:e,metadata:t,priority:i,id:n},this.taskQueue.push(n),this.invoker.trigger(),{cancel:()=>{delete this.tasks[n]}}}process(){Z();try{if(this.taskQueue=this.taskQueue.filter(e=>!!this.tasks[e]),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const t=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!t)return;t.fn()}finally{}}pick(){let e=null,t=1/0;for(let n=0;n<this.taskQueue.length;n++){const i=this.tasks[this.taskQueue[n]];i.priority<t&&(t=i.priority,e=n)}if(null===e)return null;const n=this.taskQueue[e];return this.taskQueue.splice(e,1),n}remove(){this.invoker.remove()}}class Fm{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const Um=["tile","layer","source","sourceLayer","state"];class Hm{constructor(e,t,n,i,r){this.type="Feature",this._vectorTileFeature=e,this._z=t,this._x=n,this._y=i,this.properties=e.properties,this.id=r}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};void 0!==this.id&&(e.id=this.id);for(const t of Um)void 0!==this[t]&&(e[t]=this[t]);return e}}const Wm=new Uint16Array(8184);for(let e=0;e<2046;e++){let t=e+2,n=0,i=0,r=0,a=0,o=0,s=0;for(1&t?r=a=o=32:n=i=s=32;(t>>=1)>1;){const e=n+r>>1,l=i+a>>1;1&t?(r=n,a=i,n=o,i=s):(n=r,i=a,r=o,a=s),o=e,s=l}const l=4*e;Wm[l+0]=n,Wm[l+1]=i,Wm[l+2]=r,Wm[l+3]=a}const qm=new Uint16Array(2178),Vm=new Uint8Array(1089),Gm=new Uint16Array(1089);function Ym(e){return 0===e?-.03125:32===e?.03125:0}var Zm=wo([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Xm={type:2,extent:Hs,loadGeometry:()=>[[new b(0,0),new b(8193,0),new b(8193,8193),new b(0,8193),new b(0,0)]]};class Jm{constructor(e,t,n,i,r){this.tileID=e,this.uid=R(),this.uses=0,this.tileSize=t,this.tileZoom=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=r,this.expiredRequestCount=0,this.state="loading",i&&i.transform&&(this.projection=i.transform.projection)}registerFadeDuration(e){const t=e+this.timeAdded;t<Xe.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Jf(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,t,n){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const n={};if(!t)return n;for(const i of e){const e=i.layerIds.map(e=>t.getLayer(e)).filter(Boolean);if(0!==e.length){i.layers=e,i.stateDependentLayerIds&&(i.stateDependentLayers=i.stateDependentLayerIds.map(t=>e.filter(e=>e.id===t)[0]));for(const t of e)n[t.id]=i}}return n}(e.buckets,t.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const t=this.buckets[e];if(t instanceof Tm){if(this.hasSymbolBuckets=!0,!n)break;t.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const t=this.buckets[e];if(t instanceof Tm&&t.hasRTLText){this.hasRTLText=!0,no.isLoading()||no.isLoaded()||"deferred"!==eo()||to();break}}this.queryPadding=0;for(const e in this.buckets){const n=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(e).queryRadius(n))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new Xo}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const t in this.buckets){const n=this.buckets[t];n.uploadPending()&&n.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Dm(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Dm(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new Dm(e,this.lineAtlas.image,t.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,n,i,r,a,o,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:i,pixelPosMatrix:o,transform:a,params:r,tileTransform:this.tileTransform},e,t,n):{}}querySourceFeatures(e,t){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const i=n.loadVTLayers(),r=t?t.sourceLayer:"",a=i._geojsonTileLayer||i[r];if(!a)return;const o=rr(t&&t.filter),{z:s,x:l,y:c}=this.tileID.canonical,u={z:s,x:l,y:c};for(let t=0;t<a.length;t++){const i=a.feature(t);if(o.needGeometry){const e=Dc(i,!0);if(!o.filter(new io(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!o.filter(new io(this.tileID.overscaledZ),i))continue;const d=n.getId(i,r),p=new Hm(i,s,l,c,d);p.tile=u,e.push(p)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const t=this.expirationTime;if(e.cacheControl){const t=X(e.cacheControl);t["max-age"]&&(this.expirationTime=Date.now()+1e3*t["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let n=!1;if(this.expirationTime>e)n=!1;else if(t)if(this.expirationTime<t)n=!0;else{const i=this.expirationTime-t;i?this.expirationTime=e+Math.max(i,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length||!t)return;const n=this.latestFeatureIndex.loadVTLayers(),i=t.style.listImages();for(const r in this.buckets){if(!t.style.hasLayer(r))continue;const a=this.buckets[r],o=a.layers[0].sourceLayer||"_geojsonTileLayer",s=n[o],l=e[o];if(!s||!l||0===Object.keys(l).length)continue;if(a.update(l,s,i,this.imageAtlas&&this.imageAtlas.patternPositions||{}),a instanceof tp||a instanceof nd){const e=t.style._getSourceCache(a.layers[0].source);t._terrain&&t._terrain.enabled&&e&&a.programConfigurations.needsUpload&&t._terrain._clearRenderCacheForTile(e.id,this.tileID)}const c=t&&t.style&&t.style.getLayer(r);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(a)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Xe.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=Xe.now()+e}setTexture(e,t){const n=t.context,i=n.gl;this.texture=this.texture||t.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new Dm(n,e,i.RGBA,{useMipmap:!0}),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE))}setDependencies(e,t){const n={};for(const e of t)n[e]=!0;this.dependencies[e]=n}hasDependency(e,t){for(const n of e){const e=this.dependencies[n];if(e)for(const n of t)if(e[n])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,t){if(!t||"mercator"===t.name||this._tileDebugBuffer)return;const n=Nc(Xm,this.tileID.canonical,this.tileTransform)[0],i=new ko,r=new Go;for(let e=0;e<n.length;e++){const{x:t,y:a}=n[e];i.emplaceBack(t,a),r.emplaceBack(e)}r.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(r),this._tileDebugBuffer=e.createVertexBuffer(i,Rl.members),this._tileDebugSegments=Us.simpleSegment(0,0,i.length,r.length)}_makeTileBoundsBuffers(e,t){if(this._tileBoundsBuffer||!t||"mercator"===t.name)return;const n=Nc(Xm,this.tileID.canonical,this.tileTransform)[0];let i,r;if(this.isRaster){const e=function(e,t){const n=Jf(e,t),i=Math.pow(2,e.z);for(let r=0;r<33;r++)for(let a=0;a<33;a++){const o=kc((e.x+(a+Ym(a))/32)/i),s=Oc((e.y+(r+Ym(r))/32)/i),l=t.project(o,s),c=33*r+a;qm[2*c+0]=Math.round((l.x*n.scale-n.x)*Hs),qm[2*c+1]=Math.round((l.y*n.scale-n.y)*Hs)}Vm.fill(0),Gm.fill(0);for(let e=2045;e>=0;e--){const t=4*e,n=Wm[t+0],i=Wm[t+1],r=Wm[t+2],a=Wm[t+3],o=n+r>>1,s=i+a>>1,l=o+s-i,c=s+n-o,u=33*i+n,d=33*a+r,p=33*s+o,f=Math.hypot((qm[2*u+0]+qm[2*d+0])/2-qm[2*p+0],(qm[2*u+1]+qm[2*d+1])/2-qm[2*p+1])>=16;Vm[p]=Vm[p]||(f?1:0),e<1022&&(Vm[p]=Vm[p]||Vm[33*(i+c>>1)+(n+l>>1)]||Vm[33*(a+c>>1)+(r+l>>1)])}const r=new Eo,a=new zo;let o=0;function s(e,t){const n=33*t+e;return 0===Gm[n]&&(r.emplaceBack(qm[2*n+0],qm[2*n+1],e*Hs/32,t*Hs/32),Gm[n]=++o),Gm[n]-1}function l(e,t,n,i,r,o){const c=e+n>>1,u=t+i>>1;if(Math.abs(e-r)+Math.abs(t-o)>1&&Vm[33*u+c])l(r,o,e,t,c,u),l(n,i,r,o,c,u);else{const l=s(e,t),c=s(n,i),u=s(r,o);a.emplaceBack(l,c,u)}}return l(0,0,32,32,32,0),l(32,32,0,0,0,32),{vertices:r,indices:a}}(this.tileID.canonical,t);i=e.vertices,r=e.indices}else{i=new Eo,r=new zo;for(const{x:e,y:t}of n)i.emplaceBack(e,t,0,0);const e=Zu(i.int16,void 0,4);for(let t=0;t<e.length;t+=3)r.emplaceBack(e[t],e[t+1],e[t+2])}this._tileBoundsBuffer=e.createVertexBuffer(i,Zm.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(r),this._tileBoundsSegments=Us.simpleSegment(0,0,i.length,r.length)}_makeGlobeTileDebugBuffers(e,t){const n=t.projection;if(!n||"globe"!==n.name||t.freezeTileCoverage)return;const i=this.tileID.canonical,r=oc(Kl(i,t)),a=cc(t.zoom);let o;a>0&&(o=Xs(new Float64Array(16),t.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,i,t,r,o,a),this._makeGlobeTileDebugTextBuffer(e,i,t,r,o,a)}_globePoint(e,t,n,i,r,a,o){let s=ic(e,t,n);if(a){const r=1<<n.z,l=_c(i.center.lng),c=wc(i.center.lat),u=(n.x+.5)/r-l;let d=0;u>.5?d=-1:u<-.5&&(d=1);let p=(e/Hs+n.x)/r+d,f=(t/Hs+n.y)/r;p=(p-l)*i._pixelsPerMercatorPixel+l,f=(f-c)*i._pixelsPerMercatorPixel+c;const m=[p*i.worldSize,f*i.worldSize,0];vl(m,m,a),s=Jl(s,m,o)}return vl(s,s,r)}_makeGlobeTileDebugBorderBuffer(e,t,n,i,r,a){const o=new ko,s=new Go,l=new Oo,c=(e,c,u,d,p)=>{const f=(u-e)/(p-1),m=(d-c)/(p-1),h=o.length;for(let u=0;u<p;u++){const d=e+u*f,p=c+u*m;o.emplaceBack(d,p);const g=this._globePoint(d,p,t,n,i,r,a);l.emplaceBack(g[0],g[1],g[2]),s.emplaceBack(h+u)}},u=Hs;c(0,0,u,0,16),c(u,0,u,u,16),c(u,u,0,u,16),c(0,u,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(s),this._tileDebugBuffer=e.createVertexBuffer(o,Rl.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(l,Ll.members),this._tileDebugSegments=Us.simpleSegment(0,0,o.length,s.length)}_makeGlobeTileDebugTextBuffer(e,t,n,i,r,a){const o=new ko,s=new zo,l=new Oo,c=25;s.reserve(32),o.reserve(c),l.reserve(c);const u=(e,t)=>c*e+t;for(let e=0;e<c;e++){const s=2048*e;for(let e=0;e<c;e++){const c=2048*e;o.emplaceBack(c,s);const u=this._globePoint(c,s,t,n,i,r,a);l.emplaceBack(u[0],u[1],u[2])}}for(let e=0;e<4;e++)for(let t=0;t<4;t++){const n=u(e,t),i=u(e,t+1),r=u(e+1,t),a=u(e+1,t+1);s.emplaceBack(n,i,r),s.emplaceBack(r,i,a)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(s),this._tileDebugTextBuffer=e.createVertexBuffer(o,Rl.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(l,Ll.members),this._tileDebugTextSegments=Us.simpleSegment(0,0,c,32)}}class Km{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,t,n){const i=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][i]=this.stateChanges[e][i]||{},j(this.stateChanges[e][i],n),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==i&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][i]){this.deletedStates[e][i]={};for(const t in this.state[e][i])n[t]||(this.deletedStates[e][i][t]=null)}else for(const t in n)this.deletedStates[e]&&this.deletedStates[e][i]&&null===this.deletedStates[e][i][t]&&delete this.deletedStates[e][i][t]}removeFeatureState(e,t,n){if(null===this.deletedStates[e])return;const i=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][i]&&(this.deletedStates[e][i]=this.deletedStates[e][i]||{},this.deletedStates[e][i][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][i])for(n in this.deletedStates[e][i]={},this.stateChanges[e][i])this.deletedStates[e][i][n]=null;else this.deletedStates[e][i]=null;else this.deletedStates[e]=null}getState(e,t){const n=String(t),i=j({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const n=this.deletedStates[e][t];if(null===n)return{};for(const e in n)delete i[e]}return i}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,t){const n={};for(const e in this.stateChanges){this.state[e]=this.state[e]||{};const t={};for(const n in this.stateChanges[e])this.state[e][n]||(this.state[e][n]={}),j(this.state[e][n],this.stateChanges[e][n]),t[n]=this.state[e][n];n[e]=t}for(const e in this.deletedStates){this.state[e]=this.state[e]||{};const t={};if(null===this.deletedStates[e])for(const n in this.state[e])t[n]={},this.state[e][n]={};else for(const n in this.deletedStates[e]){if(null===this.deletedStates[e][n])this.state[e][n]={};else if(this.state[e][n])for(const t of Object.keys(this.deletedStates[e][n]))delete this.state[e][n][t];t[n]=this.state[e][n]}n[e]=n[e]||{},j(n[e],t)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(const i in e)e[i].setFeatureState(n,t)}}class $m{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,t){const n=this.toIdx(e,t);return{min:this.minimums[n],max:this.maximums[n]}}isLeaf(e,t){return this.leaves[this.toIdx(e,t)]}toIdx(e,t){return t*this.size+e}}function Qm(e,t,n,i){let r=0,a=Number.MAX_VALUE;for(let o=0;o<3;o++)if(Math.abs(i[o])<1e-15){if(n[o]<e[o]||n[o]>t[o])return null}else{const s=1/i[o];let l=(e[o]-n[o])*s,c=(t[o]-n[o])*s;if(l>c){const e=l;l=c,c=e}if(l>r&&(r=l),c<a&&(a=c),r>a)return null}return r}function eh(e,t,n,i,r,a,o,s,l,c,u){const d=i-e,p=r-t,f=a-n,m=o-e,h=s-t,g=l-n,y=u[1]*g-u[2]*h,v=u[2]*m-u[0]*g,b=u[0]*h-u[1]*m,_=d*y+p*v+f*b;if(Math.abs(_)<1e-15)return null;const w=1/_,x=c[0]-e,k=c[1]-t,O=c[2]-n,E=(x*y+k*v+O*b)*w;if(E<0||E>1)return null;const T=k*f-O*p,C=O*d-x*f,S=x*p-k*d,P=(u[0]*T+u[1]*C+u[2]*S)*w;return P<0||E+P>1?null:(m*T+h*C+g*S)*w}function th(e,t,n){return(e-t)/(n-t)}function nh(e,t,n,i,r,a,o,s,l){const c=1<<n,u=a-i,d=o-r,p=(e+1)/c*u+i,f=(t+0)/c*d+r,m=(t+1)/c*d+r;s[0]=(e+0)/c*u+i,s[1]=f,l[0]=p,l[1]=m}class ih{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const t=function(e){const t=Math.ceil(Math.log2(e.dim/8)),n=[];let i=Math.ceil(Math.pow(2,t));const r=1/i,a=(e,t,n,i,r)=>{const a=i?1:0,o=(e+1)*n-a,s=t*n,l=(t+1)*n-a;r[0]=e*n,r[1]=s,r[2]=o,r[3]=l};let o=new $m(i);const s=[];for(let t=0;t<i*i;t++){a(t%i,Math.floor(t/i),r,!1,s);const n=ah(s[0],s[1],e),l=ah(s[2],s[1],e),c=ah(s[2],s[3],e),u=ah(s[0],s[3],e);o.minimums.push(Math.min(n,l,c,u)),o.maximums.push(Math.max(n,l,c,u)),o.leaves.push(1)}for(n.push(o),i/=2;i>=1;i/=2){const e=n[n.length-1];o=new $m(i);for(let t=0;t<i*i;t++){a(t%i,Math.floor(t/i),2,!0,s);const n=e.getElevation(s[0],s[1]),r=e.getElevation(s[2],s[1]),l=e.getElevation(s[2],s[3]),c=e.getElevation(s[0],s[3]),u=e.isLeaf(s[0],s[1]),d=e.isLeaf(s[2],s[1]),p=e.isLeaf(s[2],s[3]),f=e.isLeaf(s[0],s[3]),m=Math.min(n.min,r.min,l.min,c.min),h=Math.max(n.max,r.max,l.max,c.max),g=u&&d&&p&&f;o.maximums.push(h),o.minimums.push(m),o.leaves.push(h-m<=5&&g?1:0)}n.push(o)}return n}(this.dem),n=t.length-1,i=t[n];this._addNode(i.minimums[0],i.maximums[0],i.leaves[0]),this._construct(t,0,0,n,0)}raycastRoot(e,t,n,i,r,a,o=1){return Qm([e,t,-100],[n,i,this.maximums[0]*o],r,a)}raycast(e,t,n,i,r,a,o=1){if(!this.nodeCount)return null;const s=this.raycastRoot(e,t,n,i,r,a,o);if(null==s)return null;const l=[],c=[],u=[],d=[],p=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];for(;p.length>0;){const{idx:s,t:f,nodex:m,nodey:h,depth:g}=p.pop();if(this.leaves[s]){nh(m,h,g,e,t,n,i,u,d);const s=1<<g,l=(m+0)/s,c=(m+1)/s,p=(h+0)/s,y=(h+1)/s,v=ah(l,p,this.dem)*o,b=ah(c,p,this.dem)*o,_=ah(c,y,this.dem)*o,w=ah(l,y,this.dem)*o,x=eh(u[0],u[1],v,d[0],u[1],b,d[0],d[1],_,r,a),k=eh(d[0],d[1],_,u[0],d[1],w,u[0],u[1],v,r,a),O=Math.min(null!==x?x:Number.MAX_VALUE,null!==k?k:Number.MAX_VALUE);if(O!==Number.MAX_VALUE)return O;{const e=ml([],r,a,f);if(rh(v,b,w,_,th(e[0],u[0],d[0]),th(e[1],u[1],d[1]))>=e[2])return f}continue}let y=0;for(let p=0;p<this._siblingOffset.length;p++){nh((m<<1)+this._siblingOffset[p][0],(h<<1)+this._siblingOffset[p][1],g+1,e,t,n,i,u,d),u[2]=-100,d[2]=this.maximums[this.childOffsets[s]+p]*o;const f=Qm(u,d,r,a);if(null!=f){const e=f;l[p]=e;let t=!1;for(let n=0;n<y&&!t;n++)e>=l[c[n]]&&(c.splice(n,0,p),t=!0);t||(c[y]=p),y++}}for(let e=0;e<y;e++){const t=c[e];p.push({idx:this.childOffsets[s]+t,t:l[t],nodex:(m<<1)+this._siblingOffset[t][0],nodey:(h<<1)+this._siblingOffset[t][1],depth:g+1})}}return null}_addNode(e,t,n){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}_construct(e,t,n,i,r){if(1===e[i].isLeaf(t,n))return;this.childOffsets[r]||(this.childOffsets[r]=this.nodeCount);const a=i-1,o=e[a];let s=0,l=0;for(let e=0;e<this._siblingOffset.length;e++){const i=2*t+this._siblingOffset[e][0],r=2*n+this._siblingOffset[e][1],a=o.getElevation(i,r),c=o.isLeaf(i,r),u=this._addNode(a.min,a.max,c);c&&(s|=1<<e),l||(l=u)}for(let i=0;i<this._siblingOffset.length;i++)s&1<<i||this._construct(e,2*t+this._siblingOffset[i][0],2*n+this._siblingOffset[i][1],a,l+i)}}function rh(e,t,n,i,r,a){return An(An(e,n,a),An(t,i,a),r)}function ah(e,t,n){const i=n.dim,r=S(e*i-.5,0,i-1),a=S(t*i-.5,0,i-1),o=Math.floor(r),s=Math.floor(a),l=Math.min(o+1,i-1),c=Math.min(s+1,i-1);return rh(n.get(o,s),n.get(l,s),n.get(o,c),n.get(l,c),r-o,a-s)}const oh={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function sh(e,t,n){return(256*e*256+256*t+n)/10-1e4}function lh(e,t,n){return 256*e+t+n/256-32768}class ch{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,t,n,i=!1,r=!1){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return V(`"${n}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=t.height;const a=this.dim=t.height-2,o=new Uint32Array(t.data.buffer);if(this.pixels=new Uint8Array(t.data.buffer),this.encoding=n||"mapbox",this.borderReady=i,!i){for(let e=0;e<a;e++)o[this._idx(-1,e)]=o[this._idx(0,e)],o[this._idx(a,e)]=o[this._idx(a-1,e)],o[this._idx(e,-1)]=o[this._idx(e,0)],o[this._idx(e,a)]=o[this._idx(e,a-1)];o[this._idx(-1,-1)]=o[this._idx(0,0)],o[this._idx(a,-1)]=o[this._idx(a-1,0)],o[this._idx(-1,a)]=o[this._idx(0,a-1)],o[this._idx(a,a)]=o[this._idx(a-1,a-1)],r&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new ih(this)}get(e,t,n=!1){n&&(e=S(e,-1,this.dim),t=S(t,-1,this.dim));const i=4*this._idx(e,t);return("terrarium"===this.encoding?lh:sh)(this.pixels[i],this.pixels[i+1],this.pixels[i+2])}static getUnpackVector(e){return oh[e]}get unpackVector(){return oh[this.encoding]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}static pack(e,t){const n=[0,0,0,0],i=ch.getUnpackVector(t);let r=Math.floor((e+i[3])/i[2]);return n[2]=r%256,r=Math.floor(r/256),n[1]=r%256,r=Math.floor(r/256),n[0]=r,n}getPixels(){return new hu({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let i=t*this.dim,r=t*this.dim+this.dim,a=n*this.dim,o=n*this.dim+this.dim;switch(t){case-1:i=r-1;break;case 1:r=i+1}switch(n){case-1:a=o-1;break;case 1:o=a+1}const s=-t*this.dim,l=-n*this.dim;for(let t=a;t<o;t++)for(let n=i;n<r;n++){const i=4*this._idx(n,t),r=4*this._idx(n+s,t+l);this.pixels[i+0]=e.pixels[r+0],this.pixels[i+1]=e.pixels[r+1],this.pixels[i+2]=e.pixels[r+2],this.pixels[i+3]=e.pixels[r+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Br(ch,"DEMData"),Br(ih,"DemMinMaxQuadTree",{omit:["dem"]});class uh{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,n){const i=e.wrapped().key;void 0===this.data[i]&&(this.data[i]=[]);const r={value:t,timeout:void 0};if(void 0!==n&&(r.timeout=setTimeout(()=>{this.remove(e,r)},n)),this.data[i].push(r),this.order.push(i),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const n=e.wrapped().key,i=void 0===t?0:this.data[n].indexOf(t),r=this.data[n][i];return this.data[n].splice(i,1),r.timeout&&clearTimeout(r.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(r.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const n in this.data)for(const i of this.data[n])e(i.value)||t.push(i);for(const e of t)this.remove(e.value.tileID,e)}}class dh{constructor(e,t,n){this.func=e,this.mask=t,this.range=n}}dh.ReadOnly=!1,dh.ReadWrite=!0,dh.disabled=new dh(519,dh.ReadOnly,[0,1]);class ph{constructor(e,t,n,i,r,a){this.test=e,this.ref=t,this.mask=n,this.fail=i,this.depthFail=r,this.pass=a}}ph.disabled=new ph({func:519,mask:0},0,0,7680,7680,7680);class fh{constructor(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n}}fh.Replace=[1,0],fh.disabled=new fh(fh.Replace,At.transparent,[!1,!1,!1,!1]),fh.unblended=new fh(fh.Replace,At.transparent,[!0,!0,!0,!0]),fh.alphaBlended=new fh([1,771],At.transparent,[!0,!0,!0,!0]);class mh{constructor(e,t,n){this.enable=e,this.mode=t,this.frontFace=n}}mh.disabled=new mh(!1,1029,2305),mh.backCCW=new mh(!0,1029,2305),mh.backCW=new mh(!0,1029,2304),mh.frontCW=new mh(!0,1028,2304),mh.frontCCW=new mh(!0,1028,2305);class hh extends et{constructor(e,t,n){super(),this.id=e,this._onlySymbols=n,t.on("data",e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),t.on("error",()=>{this._sourceErrored=!0}),this._source=t,this._tiles={},this._cache=new uh(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Km,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,()=>{})}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,()=>{})}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}}getIds(){return A(this._tiles).map(e=>e.tileID).sort(gh).map(e=>e.key)}getRenderableIds(e){const t=[];for(const n in this._tiles)this._isIdRenderable(+n,e)&&t.push(this._tiles[n]);return e?t.sort((e,t)=>{const n=e.tileID,i=t.tileID,r=new b(n.canonical.x,n.canonical.y)._rotate(this.transform.angle),a=new b(i.canonical.x,i.canonical.y)._rotate(this.transform.angle);return n.overscaledZ-i.overscaledZ||a.y-r.y||a.x-r.x}).map(e=>e.tileID.key):t.map(e=>e.tileID).sort(gh).map(e=>e.key)}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,t){const n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))}_tileLoaded(e,t,n,i){if(i)if(e.state="errored",404!==i.status)this._source.fire(new Qe(i,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const e=this.map.painter.terrain;this.update(this.transform,e.getScaledDemTileSize(),!0),e.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=Xe.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new $e("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const t=this.getRenderableIds();for(let i=0;i<t.length;i++){const r=t[i];if(e.neighboringTiles&&e.neighboringTiles[r]){const t=this.getTileByID(r);n(e,t),n(t,e)}}function n(e,t){if(!e.dem||e.dem.borderReady)return;e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;let n=t.tileID.canonical.x-e.tileID.canonical.x;const i=t.tileID.canonical.y-e.tileID.canonical.y,r=Math.pow(2,e.tileID.canonical.z),a=t.tileID.key;0===n&&0===i||Math.abs(i)>1||(Math.abs(n)>1&&(1===Math.abs(n+r)?n+=r:1===Math.abs(n-r)&&(n-=r)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,i),e.neighboringTiles&&e.neighboringTiles[a]&&(e.neighboringTiles[a].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,n,i){for(const r in this._tiles){let a=this._tiles[r];if(i[r]||!a.hasData()||a.tileID.overscaledZ<=t||a.tileID.overscaledZ>n)continue;let o=a.tileID;for(;a&&a.tileID.overscaledZ>t+1;){const e=a.tileID.scaledTo(a.tileID.overscaledZ-1);a=this._tiles[e.key],a&&a.hasData()&&(o=e)}let s=o;for(;s.overscaledZ>t;)if(s=s.scaledTo(s.overscaledZ-1),e[s.key]){i[o.key]=o;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(let n=e.overscaledZ-1;n>=t;n--){const t=e.scaledTo(n),i=this._getLoadedTile(t);if(i)return i}}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,t){t=t||this._source.tileSize;const n=Math.ceil(e.width/t)+1,i=Math.ceil(e.height/t)+1,r=Math.floor(n*i*5),a="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,r):r,o="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,a):a;this._cache.setMaxSize(o)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const n in this._tiles){const i=this._tiles[n];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),e[i.tileID.key]=i}this._tiles=e;for(const e in this._timers)clearTimeout(this._timers[e]),delete this._timers[e];for(const e in this._tiles)this._setTileReloadTimer(+e,this._tiles[e])}}update(e,t,n){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!n)return;let i;this.updateCacheSize(e,t),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?i=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(e=>new Wd(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)):(i=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!n,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(i=i.filter(e=>this._source.hasTile(e)))):i=[];const r=this._updateRetainedTiles(i);if(yh(this._source.type)&&0!==i.length){const e={},t={},n=Object.keys(r);for(const i of n){const n=r[i],a=this._tiles[i];if(!a||a.fadeEndTime&&a.fadeEndTime<=Xe.now())continue;const o=this.findLoadedParent(n,Math.max(n.overscaledZ-hh.maxOverzooming,this._source.minzoom));o&&(this._addTile(o.tileID),e[o.tileID.key]=o.tileID),t[i]=n}const a=i[i.length-1].overscaledZ;for(const e in this._tiles){const n=this._tiles[e];if(r[e]||!n.hasData())continue;let i=n.tileID;for(;i.overscaledZ>a;){i=i.scaledTo(i.overscaledZ-1);const a=this._tiles[i.key];if(a&&a.hasData()&&t[i.key]){r[e]=n.tileID;break}}}for(const t in e)r[t]||(this._coveredTiles[t]=!0,r[t]=e[t])}for(const e in r)this._tiles[e].clearFadeHold();const a=function(e,t){const n=[];for(const i in e)i in t||n.push(i);return n}(this._tiles,r);for(const e of a){const t=this._tiles[e];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(+e)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const t={};if(0===e.length)return t;const n={},i=e.reduce((e,t)=>Math.min(e,t.overscaledZ),1/0),r=e[0].overscaledZ,a=Math.max(r-hh.maxOverzooming,this._source.minzoom),o=Math.max(r+hh.maxUnderzooming,this._source.minzoom),s={};for(const n of e){const e=this._addTile(n);t[n.key]=n,e.hasData()||i<this._source.maxzoom&&(s[n.key]=n)}this._retainLoadedChildren(s,i,o,t);for(const i of e){let e=this._tiles[i.key];if(e.hasData())continue;if(i.canonical.z>=this._source.maxzoom){const e=i.children(this._source.maxzoom)[0],n=this.getTile(e);if(n&&n.hasData()){t[e.key]=e;continue}}else{const e=i.children(this._source.maxzoom);if(t[e[0].key]&&t[e[1].key]&&t[e[2].key]&&t[e[3].key])continue}let r=e.wasRequested();for(let o=i.overscaledZ-1;o>=a;--o){const a=i.scaledTo(o);if(n[a.key])break;if(n[a.key]=!0,e=this.getTile(a),!e&&r&&(e=this._addTile(a)),e&&(t[a.key]=a,r=e.wasRequested(),e.hasData()))break}}return t}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let n,i=this._tiles[e].tileID;for(;i.overscaledZ>0;){if(i.key in this._loadedParentTiles){n=this._loadedParentTiles[i.key];break}t.push(i.key);const e=i.scaledTo(i.overscaledZ-1);if(n=this._getLoadedTile(e),n)break;i=e}for(const e of t)this._loadedParentTiles[e]=n}}_addTile(e){let t=this._tiles[e.key];if(t)return t;t=this._cache.getAndRemove(e),t&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));const n=Boolean(t);if(!n){const n=this.map?this.map.painter:null;t=new Jm(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,n,this._isRaster),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))}return t?(t.uses++,this._tiles[e.key]=t,n||this._source.fire(new $e("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const n=t.getExpiryTimeout();n&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},n))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,t,n){const i=[],r=this.transform;if(!r)return i;const a="globe"===r.projection.name,o=_c(r.center.lng);for(const s in this._tiles){const l=this._tiles[s];if(n&&l.clearQueryDebugViz(),l.holdingForFade())continue;let c;if(a){const e=l.tileID.canonical;if(0===e.z){const t=[Math.abs(S(o,...vh(e,-1))-o),Math.abs(S(o,...vh(e,1))-o)];c=[0,2*t.indexOf(Math.min(...t))-1]}else{const t=[Math.abs(S(o,...vh(e,-1))-o),Math.abs(S(o,...vh(e,0))-o),Math.abs(S(o,...vh(e,1))-o)];c=[t.indexOf(Math.min(...t))-1]}}else c=[0];for(const n of c){const a=e.containsTile(l,r,t,n);a&&i.push(a)}}return i}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map(e=>this._tiles[e].tileID);for(const e of t)e.projMatrix=this.transform.calculateProjMatrix(e.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(yh(this._source.type))for(const e in this._tiles){const t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=Xe.now())return!0}return!1}setFeatureState(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)}removeFeatureState(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,n){const i=this._tiles[e];i&&i.setDependencies(t,n)}reloadTilesForDependencies(e,t){for(const n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(+n,"reloading");this._cache.filter(n=>!n.hasDependency(e,t))}_preloadTiles(e,t){if(!this._sourceLoaded){const n=()=>{this._sourceLoaded&&(this._source.off("data",n),this._preloadTiles(e,t))};return void this._source.on("data",n)}const n=new Map,i=Array.isArray(e)?e:[e],r=this.map.painter.terrain,a=this.usedForTerrain&&r?r.getScaledDemTileSize():this._source.tileSize;for(const e of i){const t=e.coveringTiles({tileSize:a,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const e of t)n.set(e.key,e);this.usedForTerrain&&e.updateElevation(!1)}I(Array.from(n.values()),(e,t)=>{const n=new Jm(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(n,e=>{"raster-dem"===this._source.type&&n.dem&&this._backfillDEM(n),t(e,n)})},t)}}function gh(e,t){const n=Math.abs(2*e.wrap)-+(e.wrap<0),i=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||i-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function yh(e){return"raster"===e||"image"===e||"video"===e||"custom"===e}function vh(e,t){const n=1<<e.z;return[e.x/n+t,(e.x+1)/n+t]}hh.maxOverzooming=10,hh.maxUnderzooming=3;class bh{constructor(e,t,n){this._demTile=e,this._dem=this._demTile.dem,this._scale=t,this._offset=n}static create(e,t,n){const i=n||e.findDEMTileFor(t);if(!i||!i.dem)return;const r=i.dem,a=i.tileID,o=1<<t.canonical.z-a.canonical.z;return new bh(i,i.tileSize/Hs/o,[(t.canonical.x/o-a.canonical.x)*r.dim,(t.canonical.y/o-a.canonical.y)*r.dim])}tileCoordToPixel(e,t){const n=t*this._scale+this._offset[1],i=Math.floor(e*this._scale+this._offset[0]),r=Math.floor(n);return new b(i,r)}getElevationAt(e,t,n,i){const r=e*this._scale+this._offset[0],a=t*this._scale+this._offset[1],o=Math.floor(r),s=Math.floor(a),l=this._dem;return i=!!i,n?An(An(l.get(o,s,i),l.get(o,s+1,i),a-s),An(l.get(o+1,s,i),l.get(o+1,s+1,i),a-s),r-o):l.get(o,s,i)}getElevationAtPixel(e,t,n){return this._dem.get(e,t,!!n)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*xc(1,e)*this._dem.stride}}class _h{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Nr(Hs,16,0),this.featureIndexArray=new is,this.promoteId=t}insert(e,t,n,i,r,a=0){const o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,i,r,a);const s=this.grid;for(let e=0;e<t.length;e++){const n=t[e],i=[1/0,1/0,-1/0,-1/0];for(let e=0;e<n.length;e++){const t=n[e];i[0]=Math.min(i[0],t.x),i[1]=Math.min(i[1],t.y),i[2]=Math.max(i[2],t.x),i[3]=Math.max(i[3],t.y)}i[0]<Hs&&i[1]<Hs&&i[2]>=0&&i[3]>=0&&s.insert(o,i[0],i[1],i[2],i[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new wd(new qp(this.rawTileData)).layers,this.sourceLayerCoder=new Fm(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,t,n,i){this.loadVTLayers();const r=e.params||{},a=rr(r.filter),o=e.tileResult,s=e.transform,l=o.bufferedTilespaceBounds,c=this.grid.query(l.min.x,l.min.y,l.max.x,l.max.y,(e,t,n,i)=>Kc(o.bufferedTilespaceGeometry,e,t,n,i));c.sort(xh);let u=null;s.elevation&&c.length>0&&(u=bh.create(s.elevation,this.tileID));const d={};let p;for(let s=0;s<c.length;s++){const l=c[s];if(l===p)continue;p=l;const f=this.featureIndexArray.get(l);let m=null;this.loadMatchingFeature(d,f,a,r.layers,r.availableImages,t,n,i,(t,n,i,r=0)=>(m||(m=Nc(t,this.tileID.canonical,e.tileTransform)),n.queryIntersectsFeature(o,t,i,m,this.z,e.transform,e.pixelPosMatrix,u,r)))}return d}loadMatchingFeature(e,t,n,i,r,a,o,s,l){const{featureIndex:c,bucketIndex:u,sourceLayerIndex:d,layoutVertexArrayOffset:p}=t,f=this.bucketLayerIDs[u];if(i&&!function(e,t){for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(i,f))return;const m=this.sourceLayerCoder.decode(d),h=this.vtLayers[m].feature(c);if(n.needGeometry){const e=Dc(h,!0);if(!n.filter(new io(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!n.filter(new io(this.tileID.overscaledZ),h))return;const g=this.getId(h,m);for(let t=0;t<f.length;t++){const n=f[t];if(i&&i.indexOf(n)<0)continue;const u=a[n];if(!u)continue;let d={};void 0!==g&&s&&(d=s.getState(u.sourceLayer||"_geojsonTileLayer",g));const m=j({},o[n]);m.paint=wh(m.paint,u.paint,h,d,r),m.layout=wh(m.layout,u.layout,h,d,r);const y=!l||l(h,u,d,p);if(!y)continue;const v=new Hm(h,this.z,this.x,this.y,g);v.layer=m;let b=e[n];void 0===b&&(b=e[n]=[]),b.push({featureIndex:c,feature:v,intersectionZ:y})}}lookupSymbolFeatures(e,t,n,i,r,a,o,s){const l={};this.loadVTLayers();const c=rr(r);for(const r of e)this.loadMatchingFeature(l,{bucketIndex:n,sourceLayerIndex:i,featureIndex:r,layoutVertexArrayOffset:0},c,a,o,s,t);return l}loadFeature(e){const{featureIndex:t,sourceLayerIndex:n}=e;this.loadVTLayers();const i=this.sourceLayerCoder.decode(n),r=this.vtFeatures[i];if(r[t])return r[t];const a=this.vtLayers[i].feature(t);return r[t]=a,a}hasLayer(e){for(const t of this.bucketLayerIDs)for(const n of t)if(e===n)return!0;return!1}getId(e,t){let n=e.id;if(this.promoteId){const i="string"==typeof this.promoteId?this.promoteId:this.promoteId[t];null!=i&&(n=e.properties[i]),"boolean"==typeof n&&(n=Number(n))}return n}}function wh(e,t,n,i,r){return U(e,(e,a)=>{const o=t instanceof po?t.get(a):null;return o&&o.evaluate?o.evaluate(n,i,r):o})}function xh(e,t){return t-e}Br(_h,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class kh{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.image=new mu({width:e,height:t}),this.positions={},this.uploaded=!1}getDash(e,t){const n=this.getKey(e,t);return this.positions[n]}trim(){const e=this.width,t=this.height=D(this.nextRow);this.image.resize({width:e,height:t})}getKey(e,t){return e.join(",")+t}getDashRanges(e,t,n){const i=[];let r=e.length%2==1?-e[e.length-1]*n:0,a=e[0]*n,o=!0;i.push({left:r,right:a,isDash:o,zeroLength:0===e[0]});let s=e[0];for(let t=1;t<e.length;t++){o=!o;const l=e[t];r=s*n,s+=l,a=s*n,i.push({left:r,right:a,isDash:o,zeroLength:0===l})}return i}addRoundDash(e,t,n){const i=t/2;for(let t=-n;t<=n;t++){const r=this.width*(this.nextRow+n+t);let a=0,o=e[a];for(let s=0;s<this.width;s++){s/o.right>1&&(o=e[++a]);const l=Math.abs(s-o.left),c=Math.abs(s-o.right),u=Math.min(l,c);let d;const p=t/n*(i+1);if(o.isDash){const e=i-Math.abs(p);d=Math.sqrt(u*u+e*e)}else d=i-Math.sqrt(u*u+p*p);this.image.data[r+s]=Math.max(0,Math.min(255,d+128))}}}addRegularDash(e,t){for(let t=e.length-1;t>=0;--t){const n=e[t],i=e[t+1];n.zeroLength?e.splice(t,1):i&&i.isDash===n.isDash&&(i.left=n.left,e.splice(t,1))}const n=e[0],i=e[e.length-1];n.isDash===i.isDash&&(n.left=i.left-this.width,i.right=n.right+this.width);const r=this.width*this.nextRow;let a=0,o=e[a];for(let n=0;n<this.width;n++){n/o.right>1&&(o=e[++a]);const i=Math.abs(n-o.left),s=Math.abs(n-o.right),l=Math.min(i,s);this.image.data[r+n]=Math.max(0,Math.min(255,(o.isDash?l:-l)+t+128))}}addDash(e,t){const n=this.getKey(e,t);if(this.positions[n])return this.positions[n];const i="round"===t,r=i?7:0,a=2*r+1;if(this.nextRow+a>this.height)return V("LineAtlas out of space"),null;0===e.length&&e.push(1);let o=0;for(let t=0;t<e.length;t++)e[t]<0&&(V("Negative value is found in line dasharray, replacing values with 0"),e[t]=0),o+=e[t];if(0!==o){const n=this.width/o,a=this.getDashRanges(e,this.width,n);i?this.addRoundDash(a,n,r):this.addRegularDash(a,"square"===t?.5*n:0)}const s=this.nextRow+r;this.nextRow+=a;const l={tl:[s,r],br:[o,0]};return this.positions[n]=l,l}}Br(kh,"LineAtlas");class Oh{constructor(e){const t={},n=[];for(const i in e){const r=e[i],a=t[i]={};for(const e in r.glyphs){const t=r.glyphs[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const i=t.metrics.localGlyph?2:1,o={x:0,y:0,w:t.bitmap.width+2*i,h:t.bitmap.height+2*i};n.push(o),a[e]=o}}const{w:i,h:r}=Zp(n),a=new mu({width:i||1,height:r||1});for(const n in e){const i=e[n];for(const e in i.glyphs){const r=i.glyphs[+e];if(!r||0===r.bitmap.width||0===r.bitmap.height)continue;const o=t[n][e],s=r.metrics.localGlyph?2:1;mu.copy(r.bitmap,a,{x:0,y:0},{x:o.x+s,y:o.y+s},r.bitmap)}}this.image=a,this.positions=t}}Br(Oh,"GlyphAtlas");class Eh{constructor(e){this.tileID=new Wd(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=Jf(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,t,n,i,r){this.status="parsing",this.data=e,this.collisionBoxArray=new Xo;const a=new Fm(Object.keys(e.layers).sort()),o=new _h(this.tileID,this.promoteId);o.bucketLayerIDs=[];const s={},l=new kh(256,256),c={featureIndex:o,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:l,availableImages:n},u=t.familiesBySource[this.source];for(const t in u){const i=e.layers[t];if(!i)continue;let r=!1,l=!1;for(const e of u[t])"symbol"===e[0].type?r=!0:l=!0;if(!0===this.isSymbolTile&&!r)continue;if(!1===this.isSymbolTile&&!l)continue;1===i.version&&V(`Vector tile source "${this.source}" layer "${t}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const d=a.encode(t),p=[];for(let e=0;e<i.length;e++){const n=i.feature(e),r=o.getId(n,t);p.push({feature:n,id:r,index:e,sourceLayerIndex:d})}for(const e of u[t]){const t=e[0];void 0!==this.isSymbolTile&&"symbol"===t.type!==this.isSymbolTile||t.minzoom&&this.zoom<Math.floor(t.minzoom)||t.maxzoom&&this.zoom>=t.maxzoom||"none"!==t.visibility&&(Th(e,this.zoom,n),(s[t.id]=t.createBucket({index:o.bucketLayerIDs.length,layers:e,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:d,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:n})).populate(p,c,this.tileID.canonical,this.tileTransform),o.bucketLayerIDs.push(e.map(e=>e.id)))}}let d,p,f,m;l.trim();const h={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},g=()=>{if(d)return r(d);if(p&&f&&m){const e=new Oh(p),t=new Jp(f,m);for(const i in s){const r=s[i];r instanceof Tm?(Th(r.layers,this.zoom,n),zf(r,p,e.positions,f,t.iconPositions,this.showCollisionBoxes,n,this.tileID.canonical,this.tileZoom,this.projection)):r.hasPattern&&(r instanceof tp||r instanceof nd||r instanceof Pd)&&(Th(r.layers,this.zoom,n),r.addFeatures(c,this.tileID.canonical,t.patternPositions,n,this.tileTransform))}this.status="done",r(null,{buckets:A(s).filter(e=>!e.isEmpty()),featureIndex:o,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:l,imageAtlas:t,glyphMap:this.returnDependencies?p:null,iconMap:this.returnDependencies?f:null,glyphPositions:this.returnDependencies?e.positions:null})}},y=U(c.glyphDependencies,e=>Object.keys(e).map(Number));Object.keys(y).length?i.send("getGlyphs",{uid:this.uid,stacks:y},(e,t)=>{d||(d=e,p=t,g())},void 0,!1,h):p={};const v=Object.keys(c.iconDependencies);v.length?i.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"icons"},(e,t)=>{d||(d=e,f=t,g())},void 0,!1,h):f={};const b=Object.keys(c.patternDependencies);b.length?i.send("getImages",{icons:b,source:this.source,tileID:this.tileID,type:"patterns"},(e,t)=>{d||(d=e,m=t,g())},void 0,!1,h):m={},g()}}function Th(e,t,n){const i=new io(t);for(const t of e)t.recalculate(i,n)}class Ch{constructor(e){this.entries={},this.scheduler=e}request(e,t,n,i){const r=this.entries[e]=this.entries[e]||{callbacks:[]};if(r.result){const[e,n]=r.result;return this.scheduler?this.scheduler.add(()=>{i(e,n)},t):i(e,n),()=>{}}return r.callbacks.push(i),r.cancel||(r.cancel=n((n,i)=>{r.result=[n,i];for(const e of r.callbacks)this.scheduler?this.scheduler.add(()=>{e(n,i)},t):e(n,i);setTimeout(()=>delete this.entries[e],3e3)})),()=>{r.result||(r.callbacks=r.callbacks.filter(e=>e!==i),r.callbacks.length||(r.cancel(),delete this.entries[e]))}}}function Sh(e,t,n){const i=JSON.stringify(e.request);return e.data&&(this.deduped.entries[i]={result:[null,e.data]}),this.deduped.request(i,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},t=>{const i=fe(e.request,(e,i,r,a)=>{e?t(e):i&&t(null,{vectorTile:n?void 0:new wd(new qp(i)),rawData:i,cacheControl:r,expires:a})});return()=>{i.cancel(),t()}},t)}const Ph=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Mh{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,n]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const i=n>>4;if(1!==i)throw new Error(`Got v${i} data when expected v1.`);const r=Ph[15&n];if(!r)throw new Error("Unrecognized array type.");const[a]=new Uint16Array(e,2,1),[o]=new Uint32Array(e,4,1);return new Mh(o,a,r,e)}constructor(e,t=64,n=Float64Array,i){if(isNaN(e)||e<0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const r=Ph.indexOf(this.ArrayType),a=2*e*this.ArrayType.BYTES_PER_ELEMENT,o=e*this.IndexArrayType.BYTES_PER_ELEMENT,s=(8-o%8)%8;if(r<0)throw new Error(`Unexpected typed array class: ${n}.`);i&&i instanceof ArrayBuffer?(this.data=i,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+o+s,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+a+o+s),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+o+s,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+r]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error(`Added ${e} items when expected ${this.numItems}.`);return function e(t,n,i,r,a,o){if(a-r<=i)return;const s=r+a>>1;(function e(t,n,i,r,a,o){for(;a>r;){if(a-r>600){const s=a-r+1,l=i-r+1,c=Math.log(s),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(s-u)/s)*(l-s/2<0?-1:1);e(t,n,i,Math.max(r,Math.floor(i-l*u/s+d)),Math.min(a,Math.floor(i+(s-l)*u/s+d)),o)}const s=n[2*i+o];let l=r,c=a;for(Ih(t,n,r,i),n[2*a+o]>s&&Ih(t,n,r,a);l<c;){for(Ih(t,n,l,c),l++,c--;n[2*l+o]<s;)l++;for(;n[2*c+o]>s;)c--}n[2*r+o]===s?Ih(t,n,r,c):(c++,Ih(t,n,c,a)),c<=i&&(r=c+1),i<=c&&(a=c-1)}})(t,n,s,r,a,o),e(t,n,i,r,s-1,1-o),e(t,n,i,s+1,a,1-o)}(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:a,nodeSize:o}=this,s=[0,r.length-1,0],l=[];for(;s.length;){const c=s.pop()||0,u=s.pop()||0,d=s.pop()||0;if(u-d<=o){for(let o=d;o<=u;o++){const s=a[2*o],c=a[2*o+1];s>=e&&s<=n&&c>=t&&c<=i&&l.push(r[o])}continue}const p=d+u>>1,f=a[2*p],m=a[2*p+1];f>=e&&f<=n&&m>=t&&m<=i&&l.push(r[p]),(0===c?e<=f:t<=m)&&(s.push(d),s.push(p-1),s.push(1-c)),(0===c?n>=f:i>=m)&&(s.push(p+1),s.push(u),s.push(1-c))}return l}within(e,t,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:r,nodeSize:a}=this,o=[0,i.length-1,0],s=[],l=n*n;for(;o.length;){const c=o.pop()||0,u=o.pop()||0,d=o.pop()||0;if(u-d<=a){for(let n=d;n<=u;n++)jh(r[2*n],r[2*n+1],e,t)<=l&&s.push(i[n]);continue}const p=d+u>>1,f=r[2*p],m=r[2*p+1];jh(f,m,e,t)<=l&&s.push(i[p]),(0===c?e-n<=f:t-n<=m)&&(o.push(d),o.push(p-1),o.push(1-c)),(0===c?e+n>=f:t+n>=m)&&(o.push(p+1),o.push(u),o.push(1-c))}return s}}function Ih(e,t,n,i){Ah(e,n,i),Ah(t,2*n,2*i),Ah(t,2*n+1,2*i+1)}function Ah(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function jh(e,t,n,i){const r=e-n,a=t-i;return r*r+a*a}e.ARRAY_TYPE=Vs,e.AUTH_ERR_MSG=be,e.Aabb=zl,e.Actor=class{constructor(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.cancelCallbacks={},z(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Z()?e:n,this.scheduler=new zm}send(e,t,n,i,r=!1,a){const o=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=a,this.callbacks[o]=n);const s=K(this.globalScope)?void 0:[];return this.target.postMessage({id:o,type:e,hasCallback:!!n,targetMapId:i,mustQueue:r,sourceMapId:this.mapId,data:Ur(t,s)},s),{cancel:()=>{n&&delete this.callbacks[o],this.target.postMessage({id:o,type:"<cancel>",targetMapId:i,sourceMapId:this.mapId})}}}receive(e){const t=e.data,n=t.id;if(n&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){const e=this.cancelCallbacks[n];delete this.cancelCallbacks[n],e&&e.cancel()}else if(t.mustQueue||Z()){const e=this.callbacks[n];this.cancelCallbacks[n]=this.scheduler.add(()=>this.processTask(n,t),e&&e.metadata||{type:"message"})}else this.processTask(n,t)}processTask(e,t){if("<response>"===t.type){const n=this.callbacks[e];delete this.callbacks[e],n&&(t.error?n(Hr(t.error)):n(null,Hr(t.data)))}else{const n=K(this.globalScope)?void 0:[],i=t.hasCallback?(t,i)=>{delete this.cancelCallbacks[e],this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:t?Ur(t):null,data:Ur(i,n)},n)}:e=>{},r=Hr(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,r,i);else if(this.parent.getWorkerSource){const e=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,e[0],r.source)[e[1]](r,i)}else i(new Error("Could not find function "+t.type))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},e.CanonicalTileID=Ud,e.Color=At,e.ColorMode=fh,e.CullFaceMode=mh,e.DEMData=ch,e.DataConstantProperty=fo,e.DedupedRequest=Ch,e.DepthMode=dh,e.EXTENT=Hs,e.Elevation=class{isDataAvailableAtPoint(e){const t=this._source();if(this.isUsingMockSource()||!t||e.y<0||e.y>1)return!1;const n=t.getSource().maxzoom,i=1<<n,r=Math.floor(e.x),a=Math.floor((e.x-r)*i),o=Math.floor(e.y*i),s=this.findDEMTileFor(new Wd(n,r,n,a,o));return!(!s||!s.dem)}getAtPointOrZero(e,t=0){return this.getAtPoint(e,t)||0}getAtPoint(e,t,n=!0){if(this.isUsingMockSource())return null;null==t&&(t=null);const i=this._source();if(!i)return t;if(e.y<0||e.y>1)return t;const r=i.getSource().maxzoom,a=1<<r,o=Math.floor(e.x),s=e.x-o,l=new Wd(r,o,r,Math.floor(s*a),Math.floor(e.y*a)),c=this.findDEMTileFor(l);if(!c||!c.dem)return t;const u=c.dem,d=1<<c.tileID.canonical.z,p=(s*d-c.tileID.canonical.x)*u.dim,f=(e.y*d-c.tileID.canonical.y)*u.dim,m=Math.floor(p),h=Math.floor(f);return(n?this.exaggeration():1)*An(An(u.get(m,h),u.get(m,h+1),f-h),An(u.get(m+1,h),u.get(m+1,h+1),f-h),p-m)}getAtTileOffset(e,t,n){const i=1<<e.canonical.z;return this.getAtPointOrZero(new Sc(e.wrap+(e.canonical.x+t/Hs)/i,(e.canonical.y+n/Hs)/i))}getAtTileOffsetFunc(e,t,n,i){return r=>{const a=this.getAtTileOffset(e,r.x,r.y),o=i.upVector(e.canonical,r.x,r.y);return fl(o,o,a*i.upVectorScale(e.canonical,t,n).metersToTile),o}}getForTilePoints(e,t,n,i){if(this.isUsingMockSource())return!1;const r=bh.create(this,e,i);return!!r&&(t.forEach(e=>{e[2]=this.exaggeration()*r.getElevationAt(e[0],e[1],n)}),!0)}getMinMaxForTile(e){if(this.isUsingMockSource())return null;const t=this.findDEMTileFor(e);if(!t||!t.dem)return null;const n=t.dem.tree,i=t.tileID,r=1<<e.canonical.z-i.canonical.z;let a=e.canonical.x/r-i.canonical.x,o=e.canonical.y/r-i.canonical.y,s=0;for(let t=0;t<e.canonical.z-i.canonical.z&&!n.leaves[s];t++){a*=2,o*=2;const e=2*Math.floor(o)+Math.floor(a);s=n.childOffsets[s]+e,a%=1,o%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(e,t,n){throw new Error("Pure virtual method called.")}pointCoordinate(e){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(e){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},e.ErrorEvent=Qe,e.EvaluationParameters=io,e.Event=$e,e.Evented=et,e.FillExtrusionBucket=Pd,e.Frustum=Bl,e.FrustumCorners=Dl,e.GLOBE_RADIUS=Fl,e.GLOBE_SCALE_MATCH_LATITUDE=45,e.GLOBE_ZOOM_THRESHOLD_MAX=6,e.GLOBE_ZOOM_THRESHOLD_MIN=5,e.GlobeSharedBuffers=class{constructor(e){this._createGrid(e),this._createPoles(e)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const e of this._poleSegments)e.destroy();for(const e of this._gridSegments)e.withSkirts.destroy(),e.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const e of this._wireframeSegments)e.destroy()}}_fillGridMeshWithLods(e,t){const n=new ko,i=new zo,r=[],a=e+1+2,o=t[0]+1,s=t[0]+1+(1+t.length),l=(e,t,n)=>{let i=e===a-1?e-2:0===e?e:e-1;return i+=n?24575:0,[i,t]};for(let e=0;e<a;++e)n.emplaceBack(...l(e,0,!0));for(let e=0;e<o;++e)for(let t=0;t<a;++t)n.emplaceBack(...l(t,e,(0===t||t===a-1)&&!0));for(let e=0;e<t.length;++e){const i=t[e];for(let e=0;e<a;++e)n.emplaceBack(...l(e,i,!0))}for(let e=0;e<t.length;++e){const o=i.length,l=t[e]+1+2,c=new zo;for(let n=0;n<l-1;n++){const r=n===l-2,o=r?a*(s-t.length+e-n):a;for(let e=0;e<a-1;e++){const t=n*a+e;0===n||r||0===e||e===a-2?(c.emplaceBack(t+1,t,t+o),c.emplaceBack(t+o,t+o+1,t+1)):(i.emplaceBack(t+1,t,t+o),i.emplaceBack(t+o,t+o+1,t+1))}}const u=Us.simpleSegment(0,o,n.length,i.length-o);for(let e=0;e<c.uint16.length;e+=3)i.emplaceBack(c.uint16[e],c.uint16[e+1],c.uint16[e+2]);const d=Us.simpleSegment(0,o,n.length,i.length-o);r.push({withoutSkirts:u,withSkirts:d})}return{vertices:n,indices:i,segments:r}}_createGrid(e){const t=this._fillGridMeshWithLods(64,Ul);this._gridSegments=t.segments,this._gridBuffer=e.createVertexBuffer(t.vertices,Rl.members),this._gridIndexBuffer=e.createIndexBuffer(t.indices,!0)}_createPoles(e){const t=new zo;for(let e=0;e<=64;e++)t.emplaceBack(0,e+1,e+2);this._poleIndexBuffer=e.createIndexBuffer(t,!0);const n=new Wo,i=new Wo;this._poleSegments=[];for(let e=0,t=0;e<5;e++){const r=360/(1<<e);n.emplaceBack(0,-Fl,0,.5,0),i.emplaceBack(0,-Fl,0,.5,1);for(let e=0;e<=64;e++){const t=e/64,a=An(0,r,t),[o,s,l]=tc(fc,mc,a,Fl);n.emplaceBack(o,s,l,t,0),i.emplaceBack(o,s,l,t,1)}this._poleSegments.push(Us.simpleSegment(t,0,66,64)),t+=66}this._poleNorthVertexBuffer=e.createVertexBuffer(n,jl,!1),this._poleSouthVertexBuffer=e.createVertexBuffer(i,jl,!1)}getGridBuffers(e,t){return[this._gridBuffer,this._gridIndexBuffer,t?this._gridSegments[e].withSkirts:this._gridSegments[e].withoutSkirts]}getPoleBuffers(e){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[e]]}getWirefameBuffers(e,t){if(!this._wireframeSegments){const t=new Vo,n=64,i=n+1+2,r=1;this._wireframeSegments=[];for(let e=0,a=0;e<Ul.length;e++){const o=Ul[e];for(let e=r;e<o+r;e++)for(let a=r;a<n+r;a++){const n=e*i+a;t.emplaceBack(n,n+1),t.emplaceBack(n,n+i),t.emplaceBack(n,n+i+1)}const s=o*n*3;this._wireframeSegments.push(Us.simpleSegment(0,a,(o+1)*i,s)),a+=s}this._wireframeIndexBuffer=e.createIndexBuffer(t)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[t]]}},e.GlyphManager=Of,e.ImagePosition=Xp,e.KDBush=Mh,e.LivePerformanceUtils=Ue,e.LngLat=vc,e.LngLatBounds=Ws,e.LocalGlyphMode=kf,e.MAX_MERCATOR_LATITUDE=Tc,e.MercatorCoordinate=Sc,e.ONE_EM=24,e.OverscaledTileID=Wd,e.PerformanceMarkers=Fe,e.Point=b,e.Properties=go,e.RGBAImage=hu,e.Ray=Nl,e.RequestManager=class{constructor(e,t,n){this._transformRequestFn=e,this._customAccessToken=t,this._silenceAuthErrors=!!n,this._createSkuToken()}_createSkuToken(){const e=function(){let e="";for(let t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",p,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeStyleURL(e,t){if(!_e(e))return e;const n=Te(e);return n.path="/styles/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||t)}normalizeGlyphsURL(e,t){if(!_e(e))return e;const n=Te(e);return n.path="/fonts/v1"+n.path,this._makeAPIURL(n,this._customAccessToken||t)}normalizeSourceURL(e,t,n,i){if(!_e(e))return e;const r=Te(e);return r.path=`/v4/${r.authority}.json`,r.params.push("secure"),n&&r.params.push("language="+n),i&&r.params.push("worldview="+i),this._makeAPIURL(r,this._customAccessToken||t)}normalizeSpriteURL(e,t,n,i){const r=Te(e);return _e(e)?(r.path=`/styles/v1${r.path}/sprite${t}${n}`,this._makeAPIURL(r,this._customAccessToken||i)):(r.path+=`${t}${n}`,Ce(r))}normalizeTileURL(e,t,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!_e(e))return e;const i=Te(e);i.path=i.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${t||n&&"raster"!==i.authority&&512===n?"@2x":""}${o.supported?".webp":"$1"}`),"raster"===i.authority?i.path=`/${a.RASTER_URL_PREFIX}${i.path}`:(i.path=i.path.replace(/^.+\/v4\//,"/"),i.path=`/${a.TILE_URL_VERSION}${i.path}`);const r=this._customAccessToken||function(e){for(const t of e){const e=t.match(/^access_token=(.*)$/);if(e)return e[1]}return null}(i.params)||a.ACCESS_TOKEN;return a.REQUIRE_ACCESS_TOKEN&&r&&this._skuToken&&i.params.push("sku="+this._skuToken),this._makeAPIURL(i,r)}canonicalizeTileURL(e,t){const n=Te(e);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return e;let i="mapbox://";n.path.match(/^\/raster\/v1\//)?i+="raster/"+n.path.replace(`/${a.RASTER_URL_PREFIX}/`,""):i+="tiles/"+n.path.replace(`/${a.TILE_URL_VERSION}/`,"");let r=n.params;return t&&(r=r.filter(e=>!e.match(/^access_token=/))),r.length&&(i+="?"+r.join("&")),i}canonicalizeTileset(e,t){const n=!!t&&_e(t),i=[];for(const t of e.tiles||[])we(t)?i.push(this.canonicalizeTileURL(t,n)):i.push(t);return i}_makeAPIURL(e,t){const n="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",i=Te(a.API_URL);if(e.protocol=i.protocol,e.authority=i.authority,"http"===e.protocol){const t=e.params.indexOf("secure");t>=0&&e.params.splice(t,1)}if("/"!==i.path&&(e.path=`${i.path}${e.path}`),!a.REQUIRE_ACCESS_TOKEN)return Ce(e);if(t=t||a.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error("An API access token is required to use Mapbox GL. "+n);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+n)}return e.params=e.params.filter(e=>-1===e.indexOf("access_token")),e.params.push("access_token="+(t||"")),Ce(e)}},e.ResourceType=ce,e.SegmentVector=Us,e.SourceCache=hh,e.StencilMode=ph,e.StructArrayLayout1ui2=Go,e.StructArrayLayout2f1f2i16=No,e.StructArrayLayout2i4=ko,e.StructArrayLayout2ui4=Vo,e.StructArrayLayout3f12=Bo,e.StructArrayLayout3ui6=zo,e.StructArrayLayout4i8=Eo,e.StructArrayLayout5f20=Wo,e.Texture=Dm,e.Tile=Jm,e.Transitionable=oo,e.Uniform1f=vs,e.Uniform1i=class extends ys{constructor(e){super(e),this.current=0}set(e,t,n){this.fetchUniformLocation(e,t)&&this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}},e.Uniform2f=class extends ys{constructor(e){super(e),this.current=[0,0]}set(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1])))}},e.Uniform3f=class extends ys{constructor(e){super(e),this.current=[0,0,0]}set(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2])))}},e.Uniform4f=bs,e.UniformColor=_s,e.UniformMatrix2f=class extends ys{constructor(e){super(e),this.current=ks}set(e,t,n){if(this.fetchUniformLocation(e,t))for(let e=0;e<4;e++)if(n[e]!==this.current[e]){this.current=n,this.gl.uniformMatrix2fv(this.location,!1,n);break}}},e.UniformMatrix3f=class extends ys{constructor(e){super(e),this.current=xs}set(e,t,n){if(this.fetchUniformLocation(e,t))for(let e=0;e<9;e++)if(n[e]!==this.current[e]){this.current=n,this.gl.uniformMatrix3fv(this.location,!1,n);break}}},e.UniformMatrix4f=class extends ys{constructor(e){super(e),this.current=ws}set(e,t,n){if(this.fetchUniformLocation(e,t)){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(let e=1;e<16;e++)if(n[e]!==this.current[e]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}}},e.UnwrappedTileID=Hd,e.ValidationError=Ji,e.VectorTileFeature=xd,e.VectorTileWorkerSource=class extends et{constructor(e,t,n,i,r){super(),this.actor=e,this.layerIndex=t,this.availableImages=n,this.loadVectorData=r||Sh,this.loading={},this.loaded={},this.deduped=new Ch(e.scheduler),this.isSpriteLoaded=i,this.scheduler=e.scheduler}loadTile(e,t){const n=e.uid,i=e&&e.request,r=i&&i.collectResourceTiming,a=this.loading[n]=new Eh(e);a.abort=this.loadVectorData(e,(o,s)=>{const l=!this.loading[n];if(delete this.loading[n],l||o||!s)return a.status="done",l||(this.loaded[n]=a),t(o);const c=s.rawData,u={};s.expires&&(u.expires=s.expires),s.cacheControl&&(u.cacheControl=s.cacheControl),a.vectorTile=s.vectorTile||new wd(new qp(c));const d=()=>{a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,(e,n)=>{if(e||!n)return t(e);const a={};if(r){const e=qe(i);e.length>0&&(a.resourceTiming=JSON.parse(JSON.stringify(e)))}t(null,j({rawTileData:c.slice(0)},n,u,a))})};this.isSpriteLoaded?d():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(d,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom}):d()}),this.loaded=this.loaded||{},this.loaded[n]=a})}reloadTile(e,t){const n=this.loaded,i=e.uid,r=this;if(n&&n[i]){const a=n[i];a.showCollisionBoxes=e.showCollisionBoxes,a.enableTerrain=!!e.enableTerrain,a.projection=e.projection,a.tileTransform=Jf(e.tileID.canonical,e.projection);const o=(e,n)=>{const i=a.reloadCallback;i&&(delete a.reloadCallback,a.parse(a.vectorTile,r.layerIndex,this.availableImages,r.actor,i)),t(e,n)};"parsing"===a.status?a.reloadCallback=o:"done"===a.status&&(a.vectorTile?a.parse(a.vectorTile,this.layerIndex,this.availableImages,this.actor,o):o())}}abortTile(e,t){const n=e.uid,i=this.loading[n];i&&(i.abort&&i.abort(),delete this.loading[n]),t()}removeTile(e,t){const n=this.loaded,i=e.uid;n&&n[i]&&delete n[i],t()}},e.WritingMode=Kp,e.ZoomDependentExpression=Yi,e.add=ll,e.addDynamicAttributes=xm,e.adjoint=function(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=t[4],s=t[5],l=t[6],c=t[7],u=t[8];return e[0]=o*u-s*c,e[1]=r*c-i*u,e[2]=i*s-r*o,e[3]=s*l-a*u,e[4]=n*u-r*l,e[5]=r*a-n*s,e[6]=a*c-o*l,e[7]=i*l-n*c,e[8]=n*o-i*a,e},e.asyncAll=I,e.bezier=T,e.bindAll=z,e.boundsAttributes=Zm,e.bufferConvexPolygon=function(e,t){const n=[];for(let i=0;i<e.length;i++){const r=M(i-1,-1,e.length-1),a=M(i+1,-1,e.length-1),o=e[i],s=e[a],l=e[r].sub(o).unit(),c=s.sub(o).unit(),u=c.angleWithSep(l.x,l.y),d=l.add(c).unit().mult(-1*t/Math.sin(u/2));n.push(o.add(d))}return n},e.cacheEntryPossiblyAdded=function(e){le++,le>re&&(e.getActor().send("enforceCacheSizeLimit",ie),le=0)},e.calculateGlobeLabelMatrix=function(e,t){const{x:n,y:i}=e.point,r=lc(n,i,e.worldSize/e._pixelsPerMercatorPixel,0,0);return Js(r,r,sc(Xl(t)))},e.calculateGlobeMatrix=function(e){const{x:t,y:n}=e.point,{lng:i,lat:r}=e._center;return lc(t,n,e.worldSize,i,r)},e.calculateGlobeMercatorMatrix=function(e){const t=e.pixelsPerMeter,n=t/xc(1,e.center.lat),i=Zs(new Float64Array(16));return Ks(i,i,[e.point.x,e.point.y,0]),$s(i,i,[n,n,t]),Float32Array.from(i)},e.circumferenceAtLatitude=bc,e.clamp=S,e.clearTileCache=function(e){if(!ae())return;const t=n.caches.delete(ee);e&&t.catch(e).then(()=>e())},e.clipLine=bf,e.clone=function(e){var t=new Vs(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=W,e.collisionCircleLayout=pp,e.config=a,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new Vs(16);return Vs!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=Gs,e.createExpression=Vi,e.createLayout=wo,e.createStyleLayer=function(e){return"custom"===e.type?new jm(e):new Nm[e.type](e)},e.cross=yl,e.degToRad=x,e.distance=function(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1],t[2]-e[2])},e.div=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},e.dot=gl,e.earthRadius=hc,e.ease=C,e.easeCubicInOut=E,e.ecefToLatLng=function([e,t,n]){const i=Math.hypot(e,t,n),r=Math.atan2(e,n),a=.5*Math.PI-Math.acos(-t/i);return new vc(k(r),k(a))},e.emitValidationErrors=jr,e.endsWith=F,e.enforceCacheSizeLimit=function(e){oe(),te&&te.then(t=>{t.keys().then(n=>{for(let i=0;i<n.length-e;i++)t.delete(n[i])})})},e.evaluateSizeForFeature=hp,e.evaluateSizeForZoom=gp,e.evaluateVariableOffset=Bf,e.evented=Qa,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.exported=Xe,e.exported$1=o,e.extend=j,e.extend$1=nt,e.fillExtrusionHeightLift=Nd,e.filterObject=H,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=n+n,s=i+i,l=r+r,c=n*o,u=i*o,d=i*s,p=r*o,f=r*s,m=r*l,h=a*o,g=a*s,y=a*l;return e[0]=1-d-m,e[1]=u+y,e[2]=p-g,e[3]=0,e[4]=u-y,e[5]=1-c-m,e[6]=f+h,e[7]=0,e[8]=p+g,e[9]=f-h,e[10]=1-c-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=n,e[2]=0,e[3]=-n,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=tl,e.furthestTileCorner=function(e){const t=Math.round((e+45+360)%360/90)%4;return O[t]},e.getAABBPointSquareDist=function(e,t,n){let i=0;for(let r=0;r<2;++r){const a=n?n[r]:0;e[r]>a&&(i+=(e[r]-a)*(e[r]-a)),t[r]<a&&(i+=(a-t[r])*(a-t[r]))}return i},e.getAnchorAlignment=lf,e.getAnchorJustification=Ff,e.getBounds=function(e){let t=1/0,n=1/0,i=-1/0,r=-1/0;for(const a of e)t=Math.min(t,a.x),n=Math.min(n,a.y),i=Math.max(i,a.x),r=Math.max(r,a.y);return{min:new b(t,n),max:new b(i,r)}},e.getColumn=Q,e.getDefaultExportFromCjs=f,e.getGridMatrix=function(e,t,n,i){const r=t.getNorth(),a=t.getSouth(),o=t.getWest(),s=t.getEast(),l=1<<e.z,c=s-o,u=r-a,d=c/64,p=-u/Ul[n],f=[0,d,0,p,0,0,r,o,0];if(e.z>0){const e=180/i;Ys(f,f,[e/c+1,0,0,0,e/u+1,0,-.5*e/d,.5*e/p,1])}return f[2]=l,f[5]=e.x,f[8]=e.y,f},e.getImage=ve,e.getJSON=function(e,t){return pe(j(e,{type:"json"}),t)},e.getLatitudinalLod=function(e){const t=Tc-5;e=S(e,-t,t)/t*90;const n=Math.pow(Math.abs(Math.sin(x(e))),3);return Math.round(n*(Ul.length-1))},e.getMapSessionAPI=Be,e.getPerformanceMeasurement=qe,e.getProjection=ym,e.getRTLTextPluginStatus=eo,e.getReferrer=de,e.getTilePoint=function(e,{x:t,y:n},i=0){return new b(((t-i)*e.scale-e.x)*Hs,(n*e.scale-e.y)*Hs)},e.getTileVec3=function(e,t,n=0){return sl(((t.x-n)*e.scale-e.x)*Hs,(t.y*e.scale-e.y)*Hs,Ec(t.z,t.y))},e.getVideo=function(e,t){const i=n.document.createElement("video");i.muted=!0,i.onloadstart=function(){t(null,i)};for(let t=0;t<e.length;t++){const r=n.document.createElement("source");me(e[t])||(i.crossOrigin="Anonymous"),r.src=e[t],i.appendChild(r)}return{cancel:()=>{}}},e.globeCenterToScreenPoint=function(e){const t=[0,0,0],n=Zs(new Float64Array(16));return Js(n,e.pixelMatrix,e.globeMatrix),vl(t,t,n),new b(t[0],t[1])},e.globeDenormalizeECEF=sc,e.globeECEFOrigin=function(e,t){const n=[0,0,0];return vl(n,n,oc(Xl(t.canonical))),vl(n,n,e),n},e.globeMetersToEcef=Vl,e.globeNormalizeECEF=oc,e.globePixelsToTileUnits=function(e,t){return Hs/(512*Math.pow(2,e))*rc(Xl(t))},e.globePoleMatrixForTile=function(e,t,n){const i=Zs(new Float64Array(16)),r=(t/(1<<e)-.5)*Math.PI*2;return el(i,n.globeMatrix,r),Float32Array.from(i)},e.globeTileBounds=Xl,e.globeTiltAtLngLat=uc,e.globeToMercatorTransition=cc,e.globeUseCustomAntiAliasing=function(e,t,n){const i=cc(n.zoom),r=e.style.map._antialias,a=!!t.extStandardDerivatives,o=t.extStandardDerivativesForceOff||e.terrain&&e.terrain.exaggeration()>0;return 0===i&&!r&&!o&&a},e.identity=Zs,e.identity$1=Sl,e.invert=Xs,e.isFullscreen=function(){return!!n.document.fullscreenElement||!!n.document.webkitFullscreenElement},e.isLngLatBehindGlobe=dc,e.isMapAuthenticated=function(e){return ze.has(e)},e.isMapboxURL=_e,e.isSafariWithAntialiasingBug=function(e){const t=e.navigator?e.navigator.userAgent:null;return!!K(e)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},e.latFromMercatorY=Oc,e.latLngToECEF=nc,e.len=kl,e.length=ol,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.lngFromMercatorX=kc,e.loadVectorTile=Sh,e.makeRequest=pe,e.mapValue=function(e,t,n,i,r){return S((e-t)/(n-t)*(r-i)+i,i,r)},e.mercatorScale=Cc,e.mercatorXfromLng=_c,e.mercatorYfromLat=wc,e.mercatorZfromAltitude=xc,e.mul=il,e.mul$1=xl,e.multiply=Js,e.multiply$1=Ys,e.multiply$2=ul,e.nextPowerOfTwo=D,e.normalize=hl,e.normalize$1=Il,e.normalize$2=El,e.number=An,e.ortho=function(e,t,n,i,r,a,o){var s=1/(t-n),l=1/(i-r),c=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(r+i)*l,e[14]=(o+a)*c,e[15]=1,e},e.pbf=xp,e.perspective=function(e,t,n,i,r){var a,o=1/Math.tan(t/2);return e[0]=o/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=r&&r!==1/0?(e[10]=(r+i)*(a=1/(i-r)),e[14]=2*r*i*a):(e[10]=-1,e[14]=-2*i),e},e.pick=function(e,t){const n={};for(let i=0;i<t.length;i++){const r=t[i];r in e&&(n[r]=e[r])}return n},e.plugin=no,e.pointGeometry=y,e.polesInViewport=function(e){const t=Zs(new Float64Array(16));Js(t,e.pixelMatrix,e.globeMatrix);const n=[0,Hl,0],i=[0,Wl,0];return vl(n,n,t),vl(i,i,t),[n[0]>0&&n[0]<=e.width&&n[1]>0&&n[1]<=e.height&&!dc(e,new vc(e.center.lat,90)),i[0]>0&&i[0]<=e.width&&i[1]>0&&i[1]<=e.height&&!dc(e,new vc(e.center.lat,-90))]},e.polygonContainsPoint=Jc,e.polygonIntersectsBox=Kc,e.polygonIntersectsPolygon=Uc,e.polygonizeBounds=function(e,t,n=0,i=!0){const r=new b(n,n),a=e.sub(r),o=t.add(r),s=[a,new b(o.x,a.y),o,new b(a.x,o.y)];return i&&s.push(a.clone()),s},e.posAttributes=Rl,e.postMapLoadEvent=Le,e.postPerformanceEvent=Ne,e.postTurnstileEvent=Ae,e.potpack=Zp,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=k,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:Xa,pluginURL:Ja}),Qa.on("pluginStateChange",e),e},e.removeAuthState=function(e){ze.delete(e)},e.renderColorRamp=yu,e.resample=Mc,e.rotateX=Qs,e.rotateX$1=Pl,e.rotateY=el,e.rotateY$1=Ml,e.rotateZ=function(e,t,n){var i=Math.sin(n),r=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],c=t[4],u=t[5],d=t[6],p=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*r+c*i,e[1]=o*r+u*i,e[2]=s*r+d*i,e[3]=l*r+p*i,e[4]=c*r-a*i,e[5]=u*r-o*i,e[6]=d*r-s*i,e[7]=p*r-l*i,e},e.rotateZ$1=function(e,t,n){n*=.5;var i=t[0],r=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=i*l+r*s,e[1]=r*l-i*s,e[2]=a*l+o*s,e[3]=o*l-a*s,e},e.scale=$s,e.scale$1=Ol,e.scale$2=fl,e.scaleAndAdd=ml,e.set=function(e,t,n,i){return e[0]=t,e[1]=n,e[2]=i,e},e.setCacheLimits=function(e,t){ie=e,re=t},e.setColumn=function(e,t,n){e[4*t+0]=n[0],e[4*t+1]=n[1],e[4*t+2]=n[2],e[4*t+3]=n[3]},e.setRTLTextPlugin=function(e,t,n=!1){if(Xa===Va||Xa===Ga||Xa===Ya)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ja=Xe.resolveURL(e),Xa=Va,Za=t,$a(),n||to()},e.smoothstep=P,e.spec=tt,e.squaredLength=function(e){var t=e[0],n=e[1],i=e[2];return t*t+n*n+i*i},e.storeAuthState=function(e,t){t?ze.add(e):ze.delete(e)},e.sub=wl,e.subtract=cl,e.symbolSize=yp,e.tileAABB=function(e,t,n,i,r,a,o,s,l){if("globe"===l.name)return function(e,t,n){const i=t/e.worldSize,r=e.globeMatrix;if(n.z<=1){const e=Xl(n).getCorners();return $l(e,r,i),zl.fromPoints(e)}const a=Ql(n),o=ec(a);$l(o,r,i);const s=Number.MAX_VALUE,l=[-s,-s,-s],c=[s,s,s];if(a.contains(e.center)){for(const e of o)dl(c,c,e),pl(l,l,e);l[2]=0;const t=e.point,n=[t.x*i,t.y*i,0];return dl(c,c,n),pl(l,l,n),new zl(c,l)}const u=[r[12]*i,r[13]*i,r[14]*i],d=a.getCenter(),p=S(e.center.lat,-Tc,Tc),f=S(d.lat,-Tc,Tc),m=_c(e.center.lng),h=wc(p);let g=m-_c(d.lng);const y=h-wc(f);g>.5?g-=1:g<-.5&&(g+=1);let v=0;Math.abs(g)>Math.abs(y)?v=g>=0?1:3:(v=y>=0?0:2,ml(u,u,[r[4]*i,r[5]*i,r[6]*i],-Math.sin(x(y>=0?a.getSouth():a.getNorth()))*Fl));const b=o[v],_=o[(v+1)%4],w=new Yl(b,_,u),k=[Zl(w,0)||b[0],Zl(w,1)||b[1],Zl(w,2)||b[2]],O=cc(e.zoom);if(O>0){const i=function({x:e,y:t,z:n},i,r,a,o){const s=1/(1<<n);let l=e*s,c=l+s,u=t*s,d=u+s,p=0;const f=(l+c)/2-a;return f>.5?p=-1:f<-.5&&(p=1),l=((l+p)*i-(a*=i))*r+a,c=((c+p)*i-a)*r+a,u=(u*i-(o*=i))*r+o,d=(d*i-o)*r+o,[[l,d,0],[c,d,0],[c,u,0],[l,u,0]]}(n,t,e._pixelsPerMercatorPixel,m,h);for(let e=0;e<o.length;e++)Jl(o[e],i[e],O);const r=ll([],i[v],i[(v+1)%4]);fl(r,r,.5),Jl(k,r,O)}for(const e of o)dl(c,c,e),pl(l,l,e);return c[2]=Math.min(b[2],_[2]),dl(c,c,k),pl(l,l,k),new zl(c,l)}(e,t,new Ud(n,i,r));const c=Jf({z:n,x:i,y:r},l);return new zl([(a+c.x/c.scale)*t,t*(c.y/c.scale),o],[(a+c.x2/c.scale)*t,t*(c.y2/c.scale),s])},e.tileCornersToBounds=Ql,e.tileTransform=Jf,e.transformMat3=function(e,t,n){var i=t[0],r=t[1],a=t[2];return e[0]=i*n[0]+r*n[3]+a*n[6],e[1]=i*n[1]+r*n[4]+a*n[7],e[2]=i*n[2]+r*n[5]+a*n[8],e},e.transformMat4=vl,e.transformMat4$1=Tl,e.transformQuat=bl,e.transitionTileAABBinECEF=Kl,e.translate=Ks,e.transpose=function(e,t){if(e===t){var n=t[1],i=t[2],r=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=i,e[7]=r}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},e.triggerPluginCompletionEvent=Ka,e.uniqueId=R,e.updateGlobeVertexNormal=function(e,t,n,i,r){const a=5*t+2;e.float32[a+0]=n,e.float32[a+1]=i,e.float32[a+2]=r},e.validateCustomStyleLayer=function(e){const t=[],n=e.id;return void 0===n&&t.push({message:`layers.${n}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${n}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),t},e.validateFilter=e=>Ar(mr(e)),e.validateFog=e=>Ar(Er(e)),e.validateLayer=e=>Ar(vr(e)),e.validateLight=e=>Ar(kr(e)),e.validateSource=e=>Ar(wr(e)),e.validateStyle=Pr,e.validateTerrain=e=>Ar(Or(e)),e.values=A,e.vectorTile=cd,e.version=i,e.warnOnce=V,e.window=n,e.wrap=M})),r(0,(function(e){function t(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||null==e)return JSON.stringify(e);if(Array.isArray(e)){let n="[";for(const i of e)n+=t(i)+",";return n+"]"}let n="{";for(const i of Object.keys(e).sort())n+=`${i}:${t(e[i])},`;return n+"}"}function n(n){let i="";for(const r of e.refProperties)i+="/"+t(n[r]);return i}class i{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,i){for(const n of t)this._layerConfigs[n.id]=n,(this._layers[n.id]=e.createStyleLayer(n)).compileFilter(),this.keyCache[n.id]&&delete this.keyCache[n.id];for(const e of i)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const r=function(e,t){const i={};for(let r=0;r<e.length;r++){const a=t&&t[e[r].id]||n(e[r]);t&&(t[e[r].id]=a);let o=i[a];o||(o=i[a]=[]),o.push(e[r])}const r=[];for(const e in i)r.push(i[e]);return r}(e.values(this._layerConfigs),this.keyCache);for(const e of r){const t=e.map(e=>this._layers[e.id]),n=t[0];if("none"===n.visibility)continue;const i=n.source||"";let r=this.familiesBySource[i];r||(r=this.familiesBySource[i]={});const a=n.sourceLayer||"_geojsonTileLayer";let o=r[a];o||(o=r[a]=[]),o.push(t)}}}class r{loadTile(t,n){const{uid:i,encoding:r,rawImageData:a,padding:o,buildQuadTree:s}=t,l=e.window.ImageBitmap&&a instanceof e.window.ImageBitmap?this.getImageData(a,o):a;n(null,new e.DEMData(i,l,r,o<1,s))}getImageData(e,t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const n=this.offscreenCanvasContext.getImageData(-t,-t,e.width+2*t,e.height+2*t);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),n}}function a(e,t){if(0!==e.length){o(e[0],t);for(var n=1;n<e.length;n++)o(e[n],!t)}}function o(e,t){for(var n=0,i=0,r=0,a=e.length,o=a-1;r<a;o=r++){var s=(e[r][0]-e[o][0])*(e[o][1]+e[r][1]),l=n+s;i+=Math.abs(n)>=Math.abs(s)?n-l+s:s-l+n,n=l}n+i>=0!=!!t&&e.reverse()}var s=e.getDefaultExportFromCjs((function e(t,n){var i,r=t&&t.type;if("FeatureCollection"===r)for(i=0;i<t.features.length;i++)e(t.features[i],n);else if("GeometryCollection"===r)for(i=0;i<t.geometries.length;i++)e(t.geometries[i],n);else if("Feature"===r)e(t.geometry,n);else if("Polygon"===r)a(t.coordinates,n);else if("MultiPolygon"===r)for(i=0;i<t.coordinates.length;i++)a(t.coordinates[i],n);return t}));const l=e.VectorTileFeature.prototype.toGeoJSON;var c={exports:{}},u=e.pointGeometry,d=e.vectorTile.VectorTileFeature,p=f;function f(e,t){this.options=t||{},this.features=e,this.length=e.length}function m(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}f.prototype.feature=function(e){return new m(this.features[e],this.options.extent)},m.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var n=e[t],i=[],r=0;r<n.length;r++)i.push(new u(n[r][0],n[r][1]));this.geometry.push(i)}return this.geometry},m.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,i=1/0,r=-1/0,a=0;a<e.length;a++)for(var o=e[a],s=0;s<o.length;s++){var l=o[s];t=Math.min(t,l.x),n=Math.max(n,l.x),i=Math.min(i,l.y),r=Math.max(r,l.y)}return[t,i,n,r]},m.prototype.toGeoJSON=d.prototype.toGeoJSON;var h=e.pbf,g=p;function y(e){var t=new h;return function(e,t){for(var n in e.layers)t.writeMessage(3,v,e.layers[n])}(e,t),t.finish()}function v(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var i={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)i.feature=e.feature(n),t.writeMessage(2,b,i);var r=i.keys;for(n=0;n<r.length;n++)t.writeStringField(3,r[n]);var a=i.values;for(n=0;n<a.length;n++)t.writeMessage(4,O,a[n])}function b(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,_,e),t.writeVarintField(3,n.type),t.writeMessage(4,k,n)}function _(e,t){var n=e.feature,i=e.keys,r=e.values,a=e.keycache,o=e.valuecache;for(var s in n.properties){var l=n.properties[s],c=a[s];if(null!==l){void 0===c&&(i.push(s),a[s]=c=i.length-1),t.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var d=u+":"+l,p=o[d];void 0===p&&(r.push(l),o[d]=p=r.length-1),t.writeVarint(p)}}}function w(e,t){return(t<<3)+(7&e)}function x(e){return e<<1^e>>31}function k(e,t){for(var n=e.loadGeometry(),i=e.type,r=0,a=0,o=n.length,s=0;s<o;s++){var l=n[s],c=1;1===i&&(c=l.length),t.writeVarint(w(1,c));for(var u=3===i?l.length-1:l.length,d=0;d<u;d++){1===d&&1!==i&&t.writeVarint(w(2,u-1));var p=l[d].x-r,f=l[d].y-a;t.writeVarint(x(p)),t.writeVarint(x(f)),r+=p,a+=f}3===i&&t.writeVarint(w(7,1))}}function O(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}c.exports=y,c.exports.fromVectorTileJs=y,c.exports.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var i in e)n[i]=new g(e[i].features,t),n[i].name=i,n[i].version=t.version,n[i].extent=t.extent;return y({layers:n})},c.exports.GeoJSONWrapper=g;var E=e.getDefaultExportFromCjs(c.exports);const T={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},C=Math.fround||(S=new Float32Array(1),e=>(S[0]=+e,S[0]));var S;class P{constructor(e){this.options=Object.assign(Object.create(T),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:n,maxZoom:i}=this.options;t&&console.time("total time");const r=`prepare ${e.length} points`;t&&console.time(r),this.points=e;const a=[];for(let t=0;t<e.length;t++){const n=e[t];if(!n.geometry)continue;const[i,r]=n.geometry.coordinates,o=C(A(i)),s=C(j(r));a.push(o,s,1/0,t,-1,1),this.options.reduce&&a.push(0)}let o=this.trees[i+1]=this._createTree(a);t&&console.timeEnd(r);for(let e=i;e>=n;e--){const n=+Date.now();o=this.trees[e]=this._createTree(this._cluster(o,e)),t&&console.log("z%d: %d clusters in %dms",e,o.numItems,+Date.now()-n)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const i=Math.max(-90,Math.min(90,e[1]));let r=180===e[2]?180:((e[2]+180)%360+360)%360-180;const a=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,r=180;else if(n>r){const e=this.getClusters([n,i,180,a],t),o=this.getClusters([-180,i,r,a],t);return e.concat(o)}const o=this.trees[this._limitZoom(t)],s=o.range(A(n),j(a),A(r),j(i)),l=o.data,c=[];for(const e of s){const t=this.stride*e;c.push(l[t+5]>1?M(l,t,this.clusterProps):this.points[l[t+3]])}return c}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),i="No cluster with the specified id.",r=this.trees[n];if(!r)throw new Error(i);const a=r.data;if(t*this.stride>=a.length)throw new Error(i);const o=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=r.within(a[t*this.stride],a[t*this.stride+1],o),l=[];for(const t of s){const n=t*this.stride;a[n+4]===e&&l.push(a[n+5]>1?M(a,n,this.clusterProps):this.points[a[n+3]])}if(0===l.length)throw new Error(i);return l}getLeaves(e,t,n){const i=[];return this._appendLeaves(i,e,t=t||10,n=n||0,0),i}getTile(e,t,n){const i=this.trees[this._limitZoom(e)],r=Math.pow(2,e),{extent:a,radius:o}=this.options,s=o/a,l=(n-s)/r,c=(n+1+s)/r,u={features:[]};return this._addTileFeatures(i.range((t-s)/r,l,(t+1+s)/r,c),i.data,t,n,r,u),0===t&&this._addTileFeatures(i.range(1-s/r,l,1,c),i.data,r,n,r,u),t===r-1&&this._addTileFeatures(i.range(0,l,s/r,c),i.data,-1,n,r,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,i,r){const a=this.getChildren(t);for(const t of a){const a=t.properties;if(a&&a.cluster?r+a.point_count<=i?r+=a.point_count:r=this._appendLeaves(e,a.cluster_id,n,i,r):r<i?r++:e.push(t),e.length===n)break}return r}_createTree(t){const n=new e.KDBush(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let e=0;e<t.length;e+=this.stride)n.add(t[e],t[e+1]);return n.finish(),n.data=t,n}_addTileFeatures(e,t,n,i,r,a){for(const o of e){const e=o*this.stride,s=t[e+5]>1;let l,c,u;if(s)l=I(t,e,this.clusterProps),c=t[e],u=t[e+1];else{const n=this.points[t[e+3]];l=n.properties;const[i,r]=n.geometry.coordinates;c=A(i),u=j(r)}const d={type:1,geometry:[[Math.round(this.options.extent*(c*r-n)),Math.round(this.options.extent*(u*r-i))]],tags:l};let p;p=s||this.options.generateId?t[e+3]:this.points[t[e+3]].id,void 0!==p&&(d.id=p),a.features.push(d)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:n,extent:i,reduce:r,minPoints:a}=this.options,o=n/(i*Math.pow(2,t)),s=e.data,l=[],c=this.stride;for(let n=0;n<s.length;n+=c){if(s[n+2]<=t)continue;s[n+2]=t;const i=s[n],u=s[n+1],d=e.within(s[n],s[n+1],o),p=s[n+5];let f=p;for(const e of d){const n=e*c;s[n+2]>t&&(f+=s[n+5])}if(f>p&&f>=a){let e,a=i*p,o=u*p,m=-1;const h=((n/c|0)<<5)+(t+1)+this.points.length;for(const i of d){const l=i*c;if(s[l+2]<=t)continue;s[l+2]=t;const u=s[l+5];a+=s[l]*u,o+=s[l+1]*u,s[l+4]=h,r&&(e||(e=this._map(s,n,!0),m=this.clusterProps.length,this.clusterProps.push(e)),r(e,this._map(s,l)))}s[n+4]=h,l.push(a/f,o/f,1/0,h,-1,f),r&&l.push(m)}else{for(let e=0;e<c;e++)l.push(s[n+e]);if(f>1)for(const e of d){const n=e*c;if(!(s[n+2]<=t)){s[n+2]=t;for(let e=0;e<c;e++)l.push(s[n+e])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,n){if(e[t+5]>1){const i=this.clusterProps[e[t+6]];return n?Object.assign({},i):i}const i=this.points[e[t+3]].properties,r=this.options.map(i);return n&&r===i?Object.assign({},r):r}}function M(e,t,n){return{type:"Feature",id:e[t+3],properties:I(e,t,n),geometry:{type:"Point",coordinates:[(i=e[t],360*(i-.5)),L(e[t+1])]}};var i}function I(e,t,n){const i=e[t+5],r=i>=1e4?Math.round(i/1e3)+"k":i>=1e3?Math.round(i/100)/10+"k":i,a=e[t+6],o=-1===a?{}:Object.assign({},n[a]);return Object.assign(o,{cluster:!0,cluster_id:e[t+3],point_count:i,point_count_abbreviated:r})}function A(e){return e/360+.5}function j(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function L(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function R(e,t,n,i,r,a){var o=r-n,s=a-i;if(0!==o||0!==s){var l=((e-n)*o+(t-i)*s)/(o*o+s*s);l>1?(n=r,i=a):l>0&&(n+=o*l,i+=s*l)}return(o=e-n)*o+(s=t-i)*s}function N(e,t,n,i){var r={id:void 0===e?null:e,type:t,geometry:n,tags:i,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)D(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var i=0;i<t.length;i++)D(e,t[i]);else if("MultiPolygon"===n)for(i=0;i<t.length;i++)for(var r=0;r<t[i].length;r++)D(e,t[i][r])}(r),r}function D(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function B(e,t,n,i){if(t.geometry){var r=t.geometry.coordinates,a=t.geometry.type,o=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],l=t.id;if(n.promoteId?l=t.properties[n.promoteId]:n.generateId&&(l=i||0),"Point"===a)z(r,s);else if("MultiPoint"===a)for(var c=0;c<r.length;c++)z(r[c],s);else if("LineString"===a)F(r,s,o,!1);else if("MultiLineString"===a){if(n.lineMetrics){for(c=0;c<r.length;c++)F(r[c],s=[],o,!1),e.push(N(l,"LineString",s,t.properties));return}U(r,s,o,!1)}else if("Polygon"===a)U(r,s,o,!0);else{if("MultiPolygon"!==a){if("GeometryCollection"===a){for(c=0;c<t.geometry.geometries.length;c++)B(e,{id:l,geometry:t.geometry.geometries[c],properties:t.properties},n,i);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<r.length;c++){var u=[];U(r[c],u,o,!0),s.push(u)}}e.push(N(l,a,s,t.properties))}}function z(e,t){t.push(H(e[0])),t.push(W(e[1])),t.push(0)}function F(e,t,n,i){for(var r,a,o=0,s=0;s<e.length;s++){var l=H(e[s][0]),c=W(e[s][1]);t.push(l),t.push(c),t.push(0),s>0&&(o+=i?(r*c-l*a)/2:Math.sqrt(Math.pow(l-r,2)+Math.pow(c-a,2))),r=l,a=c}var u=t.length-3;t[2]=1,function e(t,n,i,r){for(var a,o=r,s=i-n>>1,l=i-n,c=t[n],u=t[n+1],d=t[i],p=t[i+1],f=n+3;f<i;f+=3){var m=R(t[f],t[f+1],c,u,d,p);if(m>o)a=f,o=m;else if(m===o){var h=Math.abs(f-s);h<l&&(a=f,l=h)}}o>r&&(a-n>3&&e(t,n,a,r),t[a+2]=o,i-a>3&&e(t,a,i,r))}(t,0,u,n),t[u+2]=1,t.size=Math.abs(o),t.start=0,t.end=t.size}function U(e,t,n,i){for(var r=0;r<e.length;r++){var a=[];F(e[r],a,n,i),t.push(a)}}function H(e){return e/360+.5}function W(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function q(e,t,n,i,r,a,o,s){if(i/=t,a>=(n/=t)&&o<i)return e;if(o<n||a>=i)return null;for(var l=[],c=0;c<e.length;c++){var u=e[c],d=u.geometry,p=u.type,f=0===r?u.minX:u.minY,m=0===r?u.maxX:u.maxY;if(f>=n&&m<i)l.push(u);else if(!(m<n||f>=i)){var h=[];if("Point"===p||"MultiPoint"===p)V(d,h,n,i,r);else if("LineString"===p)G(d,h,n,i,r,!1,s.lineMetrics);else if("MultiLineString"===p)Z(d,h,n,i,r,!1);else if("Polygon"===p)Z(d,h,n,i,r,!0);else if("MultiPolygon"===p)for(var g=0;g<d.length;g++){var y=[];Z(d[g],y,n,i,r,!0),y.length&&h.push(y)}if(h.length){if(s.lineMetrics&&"LineString"===p){for(g=0;g<h.length;g++)l.push(N(u.id,p,h[g],u.tags));continue}"LineString"!==p&&"MultiLineString"!==p||(1===h.length?(p="LineString",h=h[0]):p="MultiLineString"),"Point"!==p&&"MultiPoint"!==p||(p=3===h.length?"Point":"MultiPoint"),l.push(N(u.id,p,h,u.tags))}}}return l.length?l:null}function V(e,t,n,i,r){for(var a=0;a<e.length;a+=3){var o=e[a+r];o>=n&&o<=i&&(t.push(e[a]),t.push(e[a+1]),t.push(e[a+2]))}}function G(e,t,n,i,r,a,o){for(var s,l,c=Y(e),u=0===r?J:K,d=e.start,p=0;p<e.length-3;p+=3){var f=e[p],m=e[p+1],h=e[p+2],g=e[p+3],y=e[p+4],v=0===r?f:m,b=0===r?g:y,_=!1;o&&(s=Math.sqrt(Math.pow(f-g,2)+Math.pow(m-y,2))),v<n?b>n&&(l=u(c,f,m,g,y,n),o&&(c.start=d+s*l)):v>i?b<i&&(l=u(c,f,m,g,y,i),o&&(c.start=d+s*l)):X(c,f,m,h),b<n&&v>=n&&(l=u(c,f,m,g,y,n),_=!0),b>i&&v<=i&&(l=u(c,f,m,g,y,i),_=!0),!a&&_&&(o&&(c.end=d+s*l),t.push(c),c=Y(e)),o&&(d+=s)}var w=e.length-3;f=e[w],m=e[w+1],h=e[w+2],(v=0===r?f:m)>=n&&v<=i&&X(c,f,m,h),w=c.length-3,a&&w>=3&&(c[w]!==c[0]||c[w+1]!==c[1])&&X(c,c[0],c[1],c[2]),c.length&&t.push(c)}function Y(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function Z(e,t,n,i,r,a){for(var o=0;o<e.length;o++)G(e[o],t,n,i,r,a,!1)}function X(e,t,n,i){e.push(t),e.push(n),e.push(i)}function J(e,t,n,i,r,a){var o=(a-t)/(i-t);return e.push(a),e.push(n+(r-n)*o),e.push(1),o}function K(e,t,n,i,r,a){var o=(a-n)/(r-n);return e.push(t+(i-t)*o),e.push(a),e.push(1),o}function $(e,t){for(var n=[],i=0;i<e.length;i++){var r,a=e[i],o=a.type;if("Point"===o||"MultiPoint"===o||"LineString"===o)r=Q(a.geometry,t);else if("MultiLineString"===o||"Polygon"===o){r=[];for(var s=0;s<a.geometry.length;s++)r.push(Q(a.geometry[s],t))}else if("MultiPolygon"===o)for(r=[],s=0;s<a.geometry.length;s++){for(var l=[],c=0;c<a.geometry[s].length;c++)l.push(Q(a.geometry[s][c],t));r.push(l)}n.push(N(a.id,o,r,a.tags))}return n}function Q(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var i=0;i<e.length;i+=3)n.push(e[i]+t,e[i+1],e[i+2]);return n}function ee(e,t){if(e.transformed)return e;var n,i,r,a=1<<e.z,o=e.x,s=e.y;for(n=0;n<e.features.length;n++){var l=e.features[n],c=l.geometry,u=l.type;if(l.geometry=[],1===u)for(i=0;i<c.length;i+=2)l.geometry.push(te(c[i],c[i+1],t,a,o,s));else for(i=0;i<c.length;i++){var d=[];for(r=0;r<c[i].length;r+=2)d.push(te(c[i][r],c[i][r+1],t,a,o,s));l.geometry.push(d)}}return e.transformed=!0,e}function te(e,t,n,i,r,a){return[Math.round(n*(e*i-r)),Math.round(n*(t*i-a))]}function ne(e,t,n,i,r){for(var a=t===r.maxZoom?0:r.tolerance/((1<<t)*r.extent),o={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:i,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){o.numFeatures++,ie(o,e[s],a,r);var l=e[s].minX,c=e[s].minY,u=e[s].maxX,d=e[s].maxY;l<o.minX&&(o.minX=l),c<o.minY&&(o.minY=c),u>o.maxX&&(o.maxX=u),d>o.maxY&&(o.maxY=d)}return o}function ie(e,t,n,i){var r=t.geometry,a=t.type,o=[];if("Point"===a||"MultiPoint"===a)for(var s=0;s<r.length;s+=3)o.push(r[s]),o.push(r[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===a)re(o,r,e,n,!1,!1);else if("MultiLineString"===a||"Polygon"===a)for(s=0;s<r.length;s++)re(o,r[s],e,n,"Polygon"===a,0===s);else if("MultiPolygon"===a)for(var l=0;l<r.length;l++){var c=r[l];for(s=0;s<c.length;s++)re(o,c[s],e,n,!0,0===s)}if(o.length){var u=t.tags||null;if("LineString"===a&&i.lineMetrics){for(var d in u={},t.tags)u[d]=t.tags[d];u.mapbox_clip_start=r.start/r.size,u.mapbox_clip_end=r.end/r.size}var p={geometry:o,type:"Polygon"===a||"MultiPolygon"===a?3:"LineString"===a||"MultiLineString"===a?2:1,tags:u};null!==t.id&&(p.id=t.id),e.features.push(p)}}function re(e,t,n,i,r,a){var o=i*i;if(i>0&&t.size<(r?o:i))n.numPoints+=t.length/3;else{for(var s=[],l=0;l<t.length;l+=3)(0===i||t[l+2]>o)&&(n.numSimplified++,s.push(t[l]),s.push(t[l+1])),n.numPoints++;r&&function(e,t){for(var n=0,i=0,r=e.length,a=r-2;i<r;a=i,i+=2)n+=(e[i]-e[a])*(e[i+1]+e[a+1]);if(n>0===t)for(i=0,r=e.length;i<r/2;i+=2){var o=e[i],s=e[i+1];e[i]=e[r-2-i],e[i+1]=e[r-1-i],e[r-2-i]=o,e[r-1-i]=s}}(s,a),e.push(s)}}function ae(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var i=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var i=0;i<e.features.length;i++)B(n,e.features[i],t,i);else B(n,"Feature"===e.type?e:{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(i=function(e,t){var n=t.buffer/t.extent,i=e,r=q(e,1,-1-n,n,0,-1,2,t),a=q(e,1,1-n,2+n,0,-1,2,t);return(r||a)&&(i=q(e,1,-n,1+n,0,-1,2,t)||[],r&&(i=$(r,1).concat(i)),a&&(i=i.concat($(a,-1)))),i}(i,t)).length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function oe(e,t,n){return 32*((1<<e)*n+t)+e}function se(t,n){const i=t.tileID.canonical;if(!this._geoJSONIndex)return n(null,null);const r=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!r)return n(null,null);const a=new class{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t}feature(t){return new class{constructor(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const n of this._feature.geometry)t.push([new e.Point(n[0],n[1])]);return t}{const t=[];for(const n of this._feature.geometry){const i=[];for(const t of n)i.push(new e.Point(t[0],t[1]));t.push(i)}return t}}toGeoJSON(e,t,n){return l.call(this,e,t,n)}}(this._features[t])}}(r.features);let o=E(a);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),n(null,{vectorTile:a,rawData:o.buffer})}ae.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},ae.prototype.splitTile=function(e,t,n,i,r,a,o){for(var s=[e,t,n,i],l=this.options,c=l.debug;s.length;){i=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var u=1<<t,d=oe(t,n,i),p=this.tiles[d];if(!p&&(c>1&&console.time("creation"),p=this.tiles[d]=ne(e,t,n,i,l),this.tileCoords.push({z:t,x:n,y:i}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,i,p.numFeatures,p.numPoints,p.numSimplified),console.timeEnd("creation"));var f="z"+t;this.stats[f]=(this.stats[f]||0)+1,this.total++}if(p.source=e,r){if(t===l.maxZoom||t===r)continue;var m=1<<r-t;if(n!==Math.floor(a/m)||i!==Math.floor(o/m))continue}else if(t===l.indexMaxZoom||p.numPoints<=l.indexMaxPoints)continue;if(p.source=null,0!==e.length){c>1&&console.time("clipping");var h,g,y,v,b,_,w=.5*l.buffer/l.extent,x=.5-w,k=.5+w,O=1+w;h=g=y=v=null,b=q(e,u,n-w,n+k,0,p.minX,p.maxX,l),_=q(e,u,n+x,n+O,0,p.minX,p.maxX,l),e=null,b&&(h=q(b,u,i-w,i+k,1,p.minY,p.maxY,l),g=q(b,u,i+x,i+O,1,p.minY,p.maxY,l),b=null),_&&(y=q(_,u,i-w,i+k,1,p.minY,p.maxY,l),v=q(_,u,i+x,i+O,1,p.minY,p.maxY,l),_=null),c>1&&console.timeEnd("clipping"),s.push(h||[],t+1,2*n,2*i),s.push(g||[],t+1,2*n,2*i+1),s.push(y||[],t+1,2*n+1,2*i),s.push(v||[],t+1,2*n+1,2*i+1)}}},ae.prototype.getTile=function(e,t,n){var i=this.options,r=i.extent,a=i.debug;if(e<0||e>24)return null;var o=1<<e,s=oe(e,t=(t%o+o)%o,n);if(this.tiles[s])return ee(this.tiles[s],r);a>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var l,c=e,u=t,d=n;!l&&c>0;)c--,u=Math.floor(u/2),d=Math.floor(d/2),l=this.tiles[oe(c,u,d)];return l&&l.source?(a>1&&console.log("found parent tile z%d-%d-%d",c,u,d),a>1&&console.time("drilling down"),this.splitTile(l.source,c,u,d,e,t,n),a>1&&console.timeEnd("drilling down"),this.tiles[s]?ee(this.tiles[s],r):null):null};class le extends e.VectorTileWorkerSource{constructor(e,t,n,i,r){super(e,t,n,i,se),r&&(this.loadGeoJSON=r)}loadData(t,n){const i=t&&t.request,r=i&&i.collectResourceTiming;this.loadGeoJSON(t,(a,o)=>{if(a||!o)return n(a);if("object"!=typeof o)return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));{s(o,!0);try{if(t.filter){const n=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map(e=>`${e.key}: ${e.message}`).join(", "));const i=o.features.filter(e=>n.value.evaluate({zoom:0},e));o={type:"FeatureCollection",features:i}}this._geoJSONIndex=t.cluster?new P(function({superclusterOptions:t,clusterProperties:n}){if(!n||!t)return t;const i={},r={},a={accumulated:null,zoom:0},o={properties:null},s=Object.keys(n);for(const t of s){const[a,o]=n[t],s=e.createExpression(o),l=e.createExpression("string"==typeof a?[a,["accumulated"],["get",t]]:a);i[t]=s.value,r[t]=l.value}return t.map=e=>{o.properties=e;const t={};for(const e of s)t[e]=i[e].evaluate(a,o);return t},t.reduce=(e,t)=>{o.properties=t;for(const t of s)a.accumulated=e[t],e[t]=r[t].evaluate(a,o)},t}(t)).load(o.features):function(e,t){return new ae(e,t)}(o,t.geojsonVtOptions)}catch(a){return n(a)}this.loaded={};const l={};if(r){const n=e.getPerformanceMeasurement(i);n&&(l.resourceTiming={},l.resourceTiming[t.source]=JSON.parse(JSON.stringify(n)))}n(null,l)}})}reloadTile(e,t){const n=this.loaded;return n&&n[e.uid]?super.reloadTile(e,t):this.loadTile(e,t)}loadGeoJSON(t,n){if(t.request)e.getJSON(t.request,n);else{if("string"!=typeof t.data)return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));try{return n(null,JSON.parse(t.data))}catch(e){return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}getClusterChildren(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}getClusterLeaves(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}class ce{constructor(t){this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.getProjection({name:"mercator"}),this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:le},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(e,t)=>{if(this.workerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=t=>{if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}clearCaches(e,t,n){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e],n()}checkIfReady(e,t,n){n()}setReferrer(e,t){this.referrer=t}spriteLoaded(t,n){this.isSpriteLoaded[t]=n;for(const i in this.workerSources[t]){const r=this.workerSources[t][i];for(const t in r)r[t]instanceof e.VectorTileWorkerSource&&(r[t].isSpriteLoaded=n,r[t].fire(new e.Event("isSpriteLoaded")))}}setImages(e,t,n){this.availableImages[e]=t;for(const n in this.workerSources[e]){const i=this.workerSources[e][n];for(const e in i)i[e].availableImages=t}n()}enableTerrain(e,t,n){this.terrain=t,n()}setProjection(t,n){this.projections[t]=e.getProjection(n)}setLayers(e,t,n){this.getLayerIndex(e).replace(t),n()}updateLayers(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()}loadTile(t,n,i){const r=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;r.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).loadTile(r,i)}loadDEMTile(t,n,i){const r=this.enableTerrain?e.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(t,n.source).loadTile(r,i)}reloadTile(t,n,i){const r=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;r.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).reloadTile(r,i)}abortTile(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)}removeTile(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)}removeSource(e,t,n){if(!this.workerSources[e]||!this.workerSources[e][t.type]||!this.workerSources[e][t.type][t.source])return;const i=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==i.removeSource?i.removeSource(t,n):n()}loadWorkerSource(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}}syncRTLPluginState(t,n,i){try{e.plugin.setState(n);const t=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=t){this.self.importScripts(t);const n=e.plugin.isParsed();i(n?void 0:new Error("RTL Text Plugin failed to import scripts from "+t),n)}}catch(e){i(e.toString())}}getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}getLayerIndex(e){let t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new i),t}getWorkerSource(e,t,n){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][n]){const i={send:(t,n,i,r,a,o)=>{this.actor.send(t,n,i,e,a,o)},scheduler:this.actor.scheduler};this.workerSources[e][t][n]=new this.workerSourceTypes[t](i,this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded[e])}return this.workerSources[e][t][n]}getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new r),this.demWorkerSources[e][t]}enforceCacheSizeLimit(t,n){e.enforceCacheSizeLimit(n)}getWorkerPerformanceMetrics(e,t,n){n(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new ce(self)),ce})),r(0,(function(e){function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(!t(e[i],n[i]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(!t(e[i],n[i]))return!1;return!0}return e===n}var n=i;function i(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),i=URL.createObjectURL(n);try{t=new Worker(i),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(i),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var n=t.getImageData(0,0,1,1);return n&&n.width===e.width}()?(void 0===r[t=e&&e.failIfMajorPerformanceCaveat]&&(r[t]=function(e){var t,n=function(e){var t=document.createElement("canvas"),n=Object.create(i.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=e,t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}(e);if(!n)return!1;try{t=n.createShader(n.VERTEX_SHADER)}catch(e){return!1}return!(!t||n.isContextLost())&&(n.shaderSource(t,"void main() {}"),n.compileShader(t),!0===n.getShaderParameter(t,n.COMPILE_STATUS))}(t)),r[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var r={};function a(t,n,i){const r=e.window.document.createElement(t);return void 0!==n&&(r.className=n),i&&i.appendChild(r),r}function o(t,n,i){const r=e.window.document.createElementNS("http://www.w3.org/2000/svg",t);for(const e of Object.keys(n))r.setAttributeNS(null,e,n[e]);return i&&i.appendChild(r),r}i.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const s=e.window.document&&e.window.document.documentElement.style,l=s&&void 0!==s.userSelect?"userSelect":"WebkitUserSelect";let c;function u(){s&&l&&(c=s[l],s[l]="none")}function d(){s&&l&&(s[l]=c)}function p(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",p,!0)}function f(){e.window.addEventListener("click",p,!0),e.window.setTimeout(()=>{e.window.removeEventListener("click",p,!0)},0)}function m(e,t){const n=e.getBoundingClientRect();return y(e,n,t)}function h(e,t){const n=e.getBoundingClientRect(),i=[];for(let r=0;r<t.length;r++)i.push(y(e,n,t[r]));return i}function g(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button}function y(t,n,i){const r=t.offsetWidth===n.width?1:t.offsetWidth/n.width;return new e.Point((i.clientX-n.left)*r,(i.clientY-n.top)*r)}function v(e,t){var n=t[0],i=t[1],r=t[2],a=t[3],o=n*a-r*i;return o?(e[0]=a*(o=1/o),e[1]=-i*o,e[2]=-r*o,e[3]=n*o,e):null}function b(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class _ extends e.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,callback:t}of this.requestors)this._notify(e,t);this.requestors=[]}}hasImage(e){return!!this.getImage(e)}getImage(e){return this.images[e]}addImage(e,t){this._validate(e,t)&&(this.images[e]=t)}_validate(t,n){let i=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),i=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),i=!1),this._validateContent(n.content,n)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),i=!1),i}_validateStretch(e,t){if(!e)return!0;let n=0;for(const i of e){if(i[0]<n||i[1]<i[0]||t<i[1])return!1;n=i[1]}return!0}_validateContent(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e,t){let n=!0;if(!this.isLoaded())for(const t of e)this.images[t]||(n=!1);this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})}_notify(t,n){const i={};for(const n of t){this.images[n]||this.fire(new e.Event("styleimagemissing",{id:n}));const t=this.images[n];t?i[n]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)}:e.warnOnce(`Image "${n}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}n(null,i)}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(t){const n=this.patterns[t],i=this.getImage(t);if(!i)return null;if(n&&n.position.version===i.version)return n.position;if(n)n.position.version=i.version;else{const n={w:i.data.width+2,h:i.data.height+2,x:0,y:0},r=new e.ImagePosition(n,i);this.patterns[t]={bin:n,position:r}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,n.RGBA),this.atlasTexture&&this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const e in this.patterns)t.push(this.patterns[e].bin);const{w:n,h:i}=e.potpack(t),r=this.atlasImage;r.resize({width:n||1,height:i||1});for(const t in this.patterns){const{bin:n}=this.patterns[t],i=n.x+1,a=n.y+1,o=this.images[t].data,s=o.width,l=o.height;e.RGBAImage.copy(o,r,{x:0,y:0},{x:i,y:a},{width:s,height:l}),e.RGBAImage.copy(o,r,{x:0,y:l-1},{x:i,y:a-1},{width:s,height:1}),e.RGBAImage.copy(o,r,{x:0,y:0},{x:i,y:a+l},{width:s,height:1}),e.RGBAImage.copy(o,r,{x:s-1,y:0},{x:i-1,y:a},{width:1,height:l}),e.RGBAImage.copy(o,r,{x:0,y:0},{x:i+s,y:a},{width:1,height:l})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const t of e){if(this.callbackDispatchedThisFrame[t])continue;this.callbackDispatchedThisFrame[t]=!0;const e=this.images[t];b(e)&&this.updateImage(t,e)}}}const w=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new class{constructor(){this.specification=e.spec.light.position}possiblyEvaluate(t,n){return function([t,n,i]){const r=e.degToRad(n+90),a=e.degToRad(i);return{x:t*Math.cos(r)*Math.sin(a),y:t*Math.sin(r)*Math.sin(a),z:t*Math.cos(a),azimuthal:n,polar:i}}(t.expression.evaluate(n))}interpolate(t,n,i){return{x:e.number(t.x,n.x,i),y:e.number(t.y,n.y,i),z:e.number(t.z,n.z,i),azimuthal:e.number(t.azimuthal,n.azimuthal,i),polar:e.number(t.polar,n.polar,i)}}},color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)});class x extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(w),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,n={}){if(!this._validate(e.validateLight,t,n))for(const n in t){const i=t[n];e.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),i):this._transitionable.setValue(n,i)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,n,i){return(!i||!1!==i.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}const k=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)});let O=class extends e.Evented{constructor(t,n){super(),this._transitionable=new e.Transitionable(k),this.set(t),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=n}get(){return this._transitionable.serialize()}set(t){for(const n in t){const i=t[n];e.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),i):this._transitionable.setValue(n,i)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}};function E(t,n,i,r){const a=e.smoothstep(45,65,i),[o,s]=T(t,r),l=e.length(n);let c=1-Math.min(1,Math.exp((l-o)/(s-o)*-6));return c*=c*c,c=Math.min(1,1.00747*c),c*a*t.alpha}function T(e,t){const n=.5/Math.tan(.5*t);return[e.range[0]+n,e.range[1]+n]}const C=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),"high-color":new e.DataConstantProperty(e.spec.fog["high-color"]),"space-color":new e.DataConstantProperty(e.spec.fog["space-color"]),"horizon-blend":new e.DataConstantProperty(e.spec.fog["horizon-blend"]),"star-intensity":new e.DataConstantProperty(e.spec.fog["star-intensity"])});class S extends e.Evented{constructor(t,n){super(),this._transitionable=new e.Transitionable(C),this.set(t),this._transitioning=this._transitionable.untransitioned(),this._transform=n}get state(){const t=this._transform,n="globe"===t.projection.name,i=e.globeToMercatorTransition(t.zoom),r=this.properties.get("range"),a=[.5,3];return{range:n?[e.number(a[0],r[0],i),e.number(a[1],r[1],i)]:r,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(t,n={}){if(!this._validate(e.validateFog,t,n)){for(const n of Object.keys(e.spec.fog))t&&void 0===t[n]&&(t[n]=e.spec.fog[n].default);for(const n in t){const i=t[n];e.endsWith(n,"-transition")?this._transitionable.setTransition(n.slice(0,-11),i):this._transitionable.setValue(n,i)}}}getOpacity(t){if(!this._transform.projection.supportsFog)return 0;const n=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:e.smoothstep(45,65,t))*n.a}getOpacityAtLatLng(t,n){return this._transform.projection.supportsFog?function(t,n,i){const r=e.MercatorCoordinate.fromLngLat(n),a=i.elevation?i.elevation.getAtPointOrZero(r):0,o=[r.x,r.y,a];return e.transformMat4(o,o,i.mercatorFogMatrix),E(t,o,i.pitch,i._fov)}(this.state,t,n):0}getFovAdjustedRange(e){return this._transform.projection.supportsFog?T(this.state,e):[0,1]}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,n,i){return(!i||!1!==i.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}class P{constructor(t,n){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=e.uniqueId();const i=this.workerPool.acquire(this.id);for(let e=0;e<i.length;e++){const t=new P.Actor(i[e],n,this.id);t.name="Worker "+e,this.actors.push(t)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(t,n,i){e.asyncAll(this.actors,(e,i)=>{e.send(t,n,i)},i=i||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(e=>{e.remove()}),this.actors=[],this.workerPool.release(this.id)}}function M(t,n,i){return n*(e.EXTENT/(t.tileSize*Math.pow(2,i-t.tileID.overscaledZ)))}P.Actor=e.Actor;class I{constructor(e,t,n,i){this.screenBounds=e,this.cameraPoint=t,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=n,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,i)}static createFromScreenPoints(t,n){let i,r;if(t instanceof e.Point||"number"==typeof t[0]){const a=e.Point.convert(t);i=[a],r=n.isPointAboveHorizon(a)}else{const a=e.Point.convert(t[0]),o=e.Point.convert(t[1]);i=[a,o],r=e.polygonizeBounds(a,o).every(e=>n.isPointAboveHorizon(e))}return new I(i,n.getCameraPoint(),r,n)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const n=this.screenBounds[0],i=1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,1)):this.screenBounds[1],r=e.polygonizeBounds(n,i,0,!1);return this.cameraPoint.y>i.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<i.x?r.splice(3,0,this.cameraPoint):this.cameraPoint.x>=i.x?r[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(r[3]=this.cameraPoint)),e.bufferConvexPolygon(r,t)}bufferedCameraGeometryGlobe(t){const n=this.screenBounds[0],i=1===this.screenBounds.length?this.screenBounds[0].add(new e.Point(1,1)):this.screenBounds[1],r=e.polygonizeBounds(n,i,t),a=this.cameraPoint.clone();switch(3*((a.y>n.y)+(a.y>i.y))+((a.x>n.x)+(a.x>i.x))){case 0:r[0]=a,r[4]=a.clone();break;case 1:r.splice(1,0,a);break;case 2:r[1]=a;break;case 3:r.splice(4,0,a);break;case 5:r.splice(2,0,a);break;case 6:r[3]=a;break;case 7:r.splice(3,0,a);break;case 8:r[2]=a}return r}containsTile(t,n,i,r=0){const a=t.queryPadding/n._pixelsPerMercatorPixel+1,o=i?this._bufferedCameraMercator(a,n):this._bufferedScreenMercator(a,n);let s=t.tileID.wrap+(o.unwrapped?r:0);const l=o.polygon.map(n=>e.getTilePoint(t.tileTransform,n,s));if(!e.polygonIntersectsBox(l,0,0,e.EXTENT,e.EXTENT))return;s=t.tileID.wrap+(this.screenGeometryMercator.unwrapped?r:0);const c=this.screenGeometryMercator.polygon.map(n=>e.getTileVec3(t.tileTransform,n,s)),u=c.map(t=>new e.Point(t[0],t[1])),d=n.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),p=e.getTileVec3(t.tileTransform,d,s),f=c.map(t=>{const n=e.sub(t,t,p);return e.normalize(n,n),new e.Ray(p,n)}),m=M(t,1,n.zoom)*n._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:u,tilespaceRays:f,bufferedTilespaceGeometry:l,bufferedTilespaceBounds:(h=e.getBounds(l),h.min.x=e.clamp(h.min.x,0,e.EXTENT),h.min.y=e.clamp(h.min.y,0,e.EXTENT),h.max.x=e.clamp(h.max.x,0,e.EXTENT),h.max.y=e.clamp(h.max.y,0,e.EXTENT),h),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:m};var h}_bufferedScreenMercator(e,t){const n=L(e);if(this._screenRaycastCache[n])return this._screenRaycastCache[n];{let i;return i="globe"===t.projection.name?this._projectAndResample(this.bufferedScreenGeometry(e),t):{polygon:this.bufferedScreenGeometry(e).map(e=>t.pointCoordinate3D(e)),unwrapped:!0},this._screenRaycastCache[n]=i,i}}_bufferedCameraMercator(e,t){const n=L(e);if(this._cameraRaycastCache[n])return this._cameraRaycastCache[n];{let i;return i="globe"===t.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(e),t):{polygon:this.bufferedCameraGeometry(e).map(e=>t.pointCoordinate3D(e)),unwrapped:!0},this._cameraRaycastCache[n]=i,i}}_projectAndResample(t,n){const i=function(t,n){const i=e.multiply([],n.pixelMatrix,n.globeMatrix),r=[0,-e.GLOBE_RADIUS,0,1],a=[0,e.GLOBE_RADIUS,0,1],o=[0,0,0,1];e.transformMat4$1(r,r,i),e.transformMat4$1(a,a,i),e.transformMat4$1(o,o,i);const s=new e.Point(r[0]/r[3],r[1]/r[3]),l=new e.Point(a[0]/a[3],a[1]/a[3]),c=e.polygonContainsPoint(t,s)&&r[3]<o[3],u=e.polygonContainsPoint(t,l)&&a[3]<o[3];if(!c&&!u)return null;const d=function(e,t,n){for(let i=1;i<e.length;i++){const r=j(t.pointCoordinate3D(e[i-1]).x),a=j(t.pointCoordinate3D(e[i]).x);if(n<0){if(r<a)return{idx:i,t:-r/(a-1-r)}}else if(a<r)return{idx:i,t:(1-r)/(a+1-r)}}return null}(t,n,c?-1:1);if(!d)return null;const{idx:p,t:f}=d;let m=p>1?A(t.slice(0,p),n):[],h=p<t.length?A(t.slice(p),n):[];m=m.map(t=>new e.Point(j(t.x),t.y)),h=h.map(t=>new e.Point(j(t.x),t.y));const g=[...m];0===g.length&&g.push(h[h.length-1]);const y=e.number(g[g.length-1].y,(0===h.length?m[0]:h[0]).y,f);let v;return v=c?[new e.Point(0,y),new e.Point(0,0),new e.Point(1,0),new e.Point(1,y)]:[new e.Point(1,y),new e.Point(1,1),new e.Point(0,1),new e.Point(0,y)],g.push(...v),0===h.length?g.push(m[0]):g.push(...h),{polygon:g.map(t=>new e.MercatorCoordinate(t.x,t.y)),unwrapped:!1}}(t,n);if(i)return i;const r=function(t,n){let i=!1,r=-1/0,a=0;for(let e=0;e<t.length-1;e++)t[e].x>r&&(r=t[e].x,a=e);for(let e=0;e<t.length-1;e++){const n=(a+e)%(t.length-1),r=t[n],o=t[n+1];Math.abs(r.x-o.x)>.5&&(r.x<o.x?(r.x+=1,0===n&&(t[t.length-1].x+=1)):(o.x+=1,n+1===t.length-1&&(t[0].x+=1)),i=!0)}const o=e.mercatorXfromLng(n.center.lng);return i&&o<Math.abs(o-1)&&t.forEach(e=>{e.x-=1}),{polygon:t,unwrapped:i}}(A(t,n).map(t=>new e.Point(j(t.x),t.y)),n);return{polygon:r.polygon.map(t=>new e.MercatorCoordinate(t.x,t.y)),unwrapped:r.unwrapped}}}function A(t,n){return e.resample(t,e=>{const t=n.pointCoordinate3D(e);e.x=t.x,e.y=t.y},1/256)}function j(e){return e<0?1+e%1:e%1}function L(e){return 100*e|0}function R(t,n,i,r,a){const o=function(i,r){if(i)return a(i);if(r){t.url&&r.tiles&&t.tiles&&delete t.tiles;const i=e.pick(e.extend(r,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);r.vector_layers&&(i.vectorLayers=r.vector_layers,i.vectorLayerIds=i.vectorLayers.map(e=>e.id)),i.tiles=n.canonicalizeTileset(i,t.url),a(null,i)}};return t.url?e.getJSON(n.transformRequest(n.normalizeSourceURL(t.url,null,i,r),e.ResourceType.Source),o):e.exported.frame(()=>o(null,t))}class N{constructor(t,n,i){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=n||0,this.maxzoom=i||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(t){const n=Math.pow(2,t.z),i=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*n),r=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*n),a=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*n),o=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*n);return t.x>=i&&t.x<a&&t.y>=r&&t.y<o}}class D{constructor(e,t,n){this.context=e;const i=e.gl;this.buffer=i.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||t.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const B={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class z{constructor(e,t,n,i){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=i,this.context=e;const r=e.gl;this.buffer=r.createBuffer(),e.bindVertexBuffer.set(this.buffer),r.bufferData(r.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||t.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let n=0;n<this.attributes.length;n++){const i=t.attributes[this.attributes[n].name];void 0!==i&&e.enableVertexAttribArray(i)}}setVertexAttribPointers(e,t,n){for(let i=0;i<this.attributes.length;i++){const r=this.attributes[i],a=t.attributes[r.name];void 0!==a&&e.vertexAttribPointer(a,r.components,e[B[r.type]],!1,this.itemSize,r.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class F{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class U extends F{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class H extends F{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class W extends F{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class q extends F{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class V extends F{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class G extends F{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class Y extends F{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class Z extends F{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class X extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class J extends F{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class K extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class $ extends F{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class Q extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class ee extends F{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class te extends F{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class ne extends F{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class ie extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class re extends F{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class ae extends F{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}let oe,se=class extends F{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}};class le extends F{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class ce extends F{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class ue extends F{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class de extends F{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class pe extends F{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class fe extends F{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class me extends F{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class he extends F{constructor(e){super(e),this.vao=e.extVertexArrayObject}getDefault(){return null}set(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}class ge extends F{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class ye extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class ve extends F{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class be extends F{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class _e extends be{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class we extends be{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class xe extends we{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class ke{constructor(e,t,n,i){this.context=e,this.width=t,this.height=n;const r=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new _e(e,r),i&&(this.depthAttachment=new we(e,r))}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class Oe{constructor(e,t=!1){if(this.gl=e,this.isWebGL2=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),t){const t=e;this.extVertexArrayObject={createVertexArrayOES:t.createVertexArray.bind(e),deleteVertexArrayOES:t.deleteVertexArray.bind(e),bindVertexArrayOES:t.bindVertexArray.bind(e)}}this.clearColor=new U(this),this.clearDepth=new H(this),this.clearStencil=new W(this),this.colorMask=new q(this),this.depthMask=new V(this),this.stencilMask=new G(this),this.stencilFunc=new Y(this),this.stencilOp=new Z(this),this.stencilTest=new X(this),this.depthRange=new J(this),this.depthTest=new K(this),this.depthFunc=new $(this),this.blend=new Q(this),this.blendFunc=new ee(this),this.blendColor=new te(this),this.blendEquation=new ne(this),this.cullFace=new ie(this),this.cullFaceSide=new re(this),this.frontFace=new ae(this),this.program=new se(this),this.activeTexture=new le(this),this.viewport=new ce(this),this.bindFramebuffer=new ue(this),this.bindRenderbuffer=new de(this),this.bindTexture=new pe(this),this.bindVertexBuffer=new fe(this),this.bindElementBuffer=new me(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new he(this),this.pixelStoreUnpack=new ge(this),this.pixelStoreUnpackPremultiplyAlpha=new ye(this),this.pixelStoreUnpackFlipY=new ve(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=e.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=e.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=e.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),t||(this.extTextureHalfFloat=e.getExtension("OES_texture_half_float")),(t||this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=t||e.getExtension("OES_standard_derivatives"),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new D(this,e,t)}createVertexBuffer(e,t,n){return new z(this,e,t,n)}createRenderbuffer(e,t,n){const i=this.gl,r=i.createRenderbuffer();return this.bindRenderbuffer.set(r),i.renderbufferStorage(i.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),r}createFramebuffer(e,t,n){return new ke(this,e,t,n)}clear({color:e,depth:t,stencil:n}){const i=this.gl;let r=0;e&&(r|=i.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(r|=i.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),void 0!==n&&(r|=i.STENCIL_BUFFER_BIT,this.clearStencil.set(n),this.stencilMask.set(255)),i.clear(r)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(n){t(n.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Ee extends e.Evented{constructor(t,n,i,r){if(super(),this.id=t,this.dispatcher=i,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(n,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(r),this._tileWorkers={},this._deduped=new e.DedupedRequest}load(t){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"}));const n=Array.isArray(this.map._language)?this.map._language.join():this.map._language,i=this.map._worldview;this._tileJSONRequest=R(this._options,this.map._requestManager,n,i,(r,a)=>{this._tileJSONRequest=null,this._loaded=!0,r?(n&&console.warn("Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: "+n),i&&2!==i.length&&console.warn("Requested worldview strings must be a valid ISO alpha-2 code. Found: "+i),this.fire(new e.ErrorEvent(r))):a&&(e.extend(this,a),a.bounds&&(this.tileBounds=new N(a.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(a.tiles,this.map._requestManager._customAccessToken),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(r)})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.extend({},this._options)}loadTile(t,n){const i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),r={request:this.map._requestManager.transformRequest(i,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(r.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=n:t.request=t.actor.send("reloadTile",r,a.bind(this));else if(t.actor=this._tileWorkers[i]=this._tileWorkers[i]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",r,a.bind(this),void 0,!0);else{const n=e.loadVectorTile.call({deduped:this._deduped},r,(e,n)=>{e||!n?a.call(this,e):(r.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},t.actor&&t.actor.send("loadTile",r,a.bind(this),void 0,!0))},!0);t.request={cancel:n}}function a(i,r){return delete t.request,t.aborted?n(null):i&&404!==i.status?n(i):(r&&r.resourceTiming&&(t.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&r&&t.setExpiryData(r),t.loadVectorData(r,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id})}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Te extends e.Evented{constructor(t,n,i,r){super(),this.id=t,this.dispatcher=i,this.setEventedParent(r),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},n),e.extend(this,e.pick(n,["url","scheme","tileSize"]))}load(t){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=R(this._options,this.map._requestManager,null,null,(n,i)=>{this._tileJSONRequest=null,this._loaded=!0,n?this.fire(new e.ErrorEvent(n)):i&&(e.extend(this,i),i.bounds&&(this.tileBounds=new N(i.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(i.tiles),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(n)})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.extend({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,n){const i=e.exported.devicePixelRatio>=2,r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),i,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),(i,r,a,o)=>(delete t.request,t.aborted?(t.state="unloaded",n(null)):i?(t.state="errored",n(i)):r?(this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:a,expires:o}),t.setTexture(r,this.map.painter),t.state="loaded",e.cacheEntryPossiblyAdded(this.dispatcher),void n(null)):n(null)))}static loadTileData(e,t,n){e.setTexture(t,n)}static unloadTileData(e,t){e.texture&&t.saveTileTexture(e.texture)}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t()}unloadTile(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}function Ce(t,n,i,r,a,o,s,l){const c=[t,i,a,n,r,o,1,1,1],u=[s,l,1],d=e.adjoint([],c),[p,f,m]=e.transformMat3(u,u,e.transpose(d,d));return e.multiply$1(c,[p,0,0,0,f,0,0,0,m],c)}class Se extends e.Evented{constructor(e,t,n,i){super(),this.id=e,this.dispatcher=n,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(i),this.options=t,this._dirty=!1}load(t,n){this._loaded=n||!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),(n,i)=>{if(this._imageRequest=null,this._loaded=!0,n)this.fire(new e.ErrorEvent(n));else if(i){const{HTMLImageElement:n}=e.window;this.image=i instanceof n?e.exported.getImageData(i):i,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,t&&(this.coordinates=t),this._finishLoading()}})}loaded(){return this._loaded}updateImage(e){return this.image&&e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(t){this.coordinates=t,this._boundsArray=void 0;const n=t.map(e.MercatorCoordinate.fromLngLat);return this.tileID=function(t){let n=1/0,i=1/0,r=-1/0,a=-1/0;for(const e of t)n=Math.min(n,e.x),i=Math.min(i,e.y),r=Math.max(r,e.x),a=Math.max(a,e.y);const o=Math.max(r-n,a-i),s=Math.max(0,Math.floor(-Math.log(o)/Math.LN2)),l=Math.pow(2,s);return new e.CanonicalTileID(s,Math.floor((n+r)/2*l),Math.floor((i+a)/2*l))}(n),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(t){for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}if(this._boundsArray)return;const n=e.tileTransform(this.tileID,this.map.transform.projection),[i,r,a,o]=this.coordinates.map(t=>{const i=n.projection.project(t[0],t[1]);return e.getTilePoint(n,i)._round()});this.perspectiveTransform=function(t,n,i,r,a,o,s,l,c,u){const d=Ce(0,0,t,0,0,n,t,n),p=Ce(i,r,a,o,s,l,c,u);return e.multiply$1(p,e.adjoint(d,d),p),[p[6]/p[8]*t/e.EXTENT,p[7]/p[8]*n/e.EXTENT]}(this.width,this.height,i.x,i.y,r.x,r.y,o.x,o.y,a.x,a.y);const s=this._boundsArray=new e.StructArrayLayout4i8;s.emplaceBack(i.x,i.y,0,0),s.emplaceBack(r.x,r.y,e.EXTENT,0),s.emplaceBack(o.x,o.y,0,e.EXTENT),s.emplaceBack(a.x,a.y,e.EXTENT,e.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=t.createVertexBuffer(s,e.boundsAttributes.members),this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,n=t.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new e.Texture(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(t)}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Pe={vector:Ee,raster:Te,"raster-dem":class extends Te{constructor(t,n,i,r){super(t,n,i,r),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}loadTile(t,n){const i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function r(e,i){e&&(t.state="errored",n(e)),i&&(t.dem=i,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",n(null))}t.request=e.getImage(this.map._requestManager.transformRequest(i,e.ResourceType.Tile),function(i,a,o,s){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(i)t.state="errored",n(i);else if(a){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:s});const n=e.window.ImageBitmap&&a instanceof e.window.ImageBitmap&&(null==oe&&(oe=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof e.window.createImageBitmap),oe),i=1-(a.width-e.prevPowerOfTwo(a.width))/2;i<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));const l=n?a:e.exported.getImageData(a,i),c={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:l,encoding:this.encoding,padding:i};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",c,r.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(t){const n=t.canonical,i=Math.pow(2,n.z),r=(n.x-1+i)%i,a=0===n.x?t.wrap-1:t.wrap,o=(n.x+1+i)%i,s=n.x+1===i?t.wrap+1:t.wrap,l={};return l[new e.OverscaledTileID(t.overscaledZ,a,n.z,r,n.y).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y).key]={backfilled:!1},n.y>0&&(l[new e.OverscaledTileID(t.overscaledZ,a,n.z,r,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y-1).key]={backfilled:!1}),n.y+1<i&&(l[new e.OverscaledTileID(t.overscaledZ,a,n.z,r,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},l[new e.OverscaledTileID(t.overscaledZ,s,n.z,o,n.y+1).key]={backfilled:!1}),l}unloadTile(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}},geojson:class extends e.Evented{constructor(t,n,i,r){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=i.getActor(),this.setEventedParent(r),this._data=n.data,this._options=e.extend({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const a=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*a,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*a,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==n.clusterRadius?n.clusterRadius:50)*a,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}onAdd(e){this.map=e,this.setData(this._data)}setData(e){return this._data=e,this._updateWorkerData(),this}getClusterExpansionZoom(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}getClusterChildren(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}getClusterLeaves(e,t,n,i){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},i),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new e.Event("dataloading",{dataType:"source"})),this._loaded=!1;const t=e.extend({},this.workerOptions),n=this._data;"string"==typeof n?(t.request=this.map._requestManager.transformRequest(e.exported.resolveURL(n),e.ResourceType.Source),t.request.collectResourceTiming=this._collectResourceTiming):t.data=JSON.stringify(n),this._pendingLoad=this.actor.send(this.type+".loadData",t,(t,n)=>{if(this._loaded=!0,this._pendingLoad=null,t)this.fire(new e.ErrorEvent(t));else{const t={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&n&&n.resourceTiming&&n.resourceTiming[this.id]&&(t.resourceTiming=n.resourceTiming[this.id]),this.fire(new e.Event("data",t)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(t,n){const i=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(i,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(e,r)=>(delete t.request,t.unloadVectorData(),t.aborted?n(null):e?n(e):(t.loadVectorData(r,this.map.painter,"reloadTile"===i),n(null))),void 0,"loadTile"===i)}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}unloadTile(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return e.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Se{constructor(e,t,n,i){super(e,t,n,i),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const n of t.urls)this.urls.push(this.map._requestManager.transformRequest(n,e.ResourceType.Source).url);e.getVideo(this.urls,(t,n)=>{this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):n&&(this.video=n,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const n=this.video.seekable;t<n.start(0)||t>n.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,n=t.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(t)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Se,canvas:class extends Se{constructor(t,n,i,r){super(t,n,i,r),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some(e=>!Array.isArray(e)||2!==e.length||e.some(e=>"number"!=typeof e))||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+t,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(n,this.canvas,n.gl.RGBA,{premultiply:!0}),this._prepareData(n)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}},custom:class extends e.Evented{constructor(t,n,i,r){super(),this.id=t,this.type="custom",this._dataType="raster",this._dispatcher=i,this._implementation=n,this.setEventedParent(r),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new e.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new e.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new N(this._implementation.bounds,this.minzoom,this.maxzoom)),n.update=this._update.bind(this),n.clearTiles=this._clearTiles.bind(this),n.coveringTiles=this._coveringTiles.bind(this),e.extend(this,e.pick(n,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return e.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(t){this._map=t,this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(t),this.load()}onRemove(e){this._implementation.onRemove&&this._implementation.onRemove(e)}hasTile(e){if(this._implementation.hasTile){const{x:t,y:n,z:i}=e.canonical;return this._implementation.hasTile({x:t,y:n,z:i})}return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,n){const{x:i,y:r,z:a}=t.tileID.canonical,o=new e.window.AbortController;t.request=Promise.resolve(this._implementation.loadTile({x:i,y:r,z:a},{signal:o.signal})).then(function(i){return delete t.request,t.aborted?(t.state="unloaded",n(null)):void 0===i?(t.state="errored",n(null)):null===i?(this.loadTileData(t,{width:this.tileSize,height:this.tileSize,data:null}),t.state="loaded",n(null)):function(t){return t instanceof e.window.ImageData||t instanceof e.window.HTMLCanvasElement||t instanceof e.window.ImageBitmap||t instanceof e.window.HTMLImageElement}(i)?(this.loadTileData(t,i),t.state="loaded",void n(null)):(t.state="errored",n(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(e=>{20!==e.code&&(t.state="errored",n(e))}),t.request.cancel=()=>o.abort()}loadTileData(e,t){Te.loadTileData(e,t,this._map.painter)}unloadTileData(e){Te.unloadTileData(e,this._map.painter)}unloadTile(e,t){if(this.unloadTileData(e),this._implementation.unloadTile){const{x:t,y:n,z:i}=e.tileID.canonical;this._implementation.unloadTile({x:t,y:n,z:i})}t()}abortTile(e,t){e.request&&e.request.cancel&&(e.request.cancel(),delete e.request),t()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(e=>({x:e.canonical.x,y:e.canonical.y,z:e.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Me=function(t,n,i,r){const a=new Pe[n.type](t,n,i,r);if(a.id!==t)throw new Error(`Expected Source id to be ${t} instead of ${a.id}`);return e.bindAll(["load","abort","unload","serialize","prepare"],a),a};function Ie(t,n){const i=e.identity([]);return e.scale(i,i,[.5*t.width,.5*-t.height,1]),e.translate(i,i,[1,-1,0]),e.multiply(i,i,t.calculateProjMatrix(n.toUnwrapped())),Float32Array.from(i)}function Ae(e,t,n,i,r,a,o,s=!1){const l=e.tilesIn(i,o,s);l.sort(Le);const c=[];for(const i of l)c.push({wrappedTileID:i.tile.tileID.wrapped().key,queryResults:i.tile.queryRenderedFeatures(t,n,e._state,i,r,a,Ie(e.transform,i.tile.tileID),s)});const u=function(e){const t={},n={};for(const i of e){const e=i.queryResults,r=i.wrappedTileID,a=n[r]=n[r]||{};for(const n in e){const i=e[n],r=a[n]=a[n]||{},o=t[n]=t[n]||[];for(const e of i)r[e.featureIndex]||(r[e.featureIndex]=!0,o.push(e))}}return t}(c);for(const t in u)u[t].forEach(t=>{const n=t.feature,i=n.layer;i&&"background"!==i.type&&"sky"!==i.type&&(n.source=i.source,i["source-layer"]&&(n.sourceLayer=i["source-layer"]),n.state=void 0!==n.id?e.getFeatureState(i["source-layer"],n.id):{})});return u}function je(e,t){const n=e.getRenderableIds().map(t=>e.getTileByID(t)),i=[],r={};for(let e=0;e<n.length;e++){const a=n[e],o=a.tileID.canonical.key;r[o]||(r[o]=!0,a.querySourceFeatures(i,t))}return i}function Le(e,t){const n=e.tileID,i=t.tileID;return n.overscaledZ-i.overscaledZ||n.canonical.y-i.canonical.y||n.wrap-i.wrap||n.canonical.x-i.canonical.x}function Re(){return null!=ma.workerClass?new ma.workerClass:new e.window.Worker(ma.workerUrl)}const Ne="mapboxgl_preloaded_worker_pool";class De{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<De.workerCount;)this.workers.push(new Re);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach(e=>{e.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ne]}numActive(){return Object.keys(this.active).length}}let Be;function ze(){return Be||(Be=new De),Be}function Fe(t,n){const i={};for(const e in t)"ref"!==e&&(i[e]=t[e]);return e.refProperties.forEach(e=>{e in n&&(i[e]=n[e])}),i}function Ue(e){e=e.slice();const t=Object.create(null);for(let n=0;n<e.length;n++)t[e[n].id]=e[n];for(let n=0;n<e.length;n++)"ref"in e[n]&&(e[n]=Fe(e[n],t[e[n].ref]));return e}De.workerCount=2;const He={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function We(e,t,n){n.push({command:He.addSource,args:[e,t[e]]})}function qe(e,t,n){t.push({command:He.removeSource,args:[e]}),n[e]=!0}function Ve(e,t,n,i){qe(e,n,i),We(e,t,n)}function Ge(e,n,i){let r;for(r in e[i])if(e[i].hasOwnProperty(r)&&"data"!==r&&!t(e[i][r],n[i][r]))return!1;for(r in n[i])if(n[i].hasOwnProperty(r)&&"data"!==r&&!t(e[i][r],n[i][r]))return!1;return!0}function Ye(e,n,i,r,a,o){let s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t(e[s],n[s])||i.push({command:o,args:[r,s,n[s],a]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t(e[s],n[s])||i.push({command:o,args:[r,s,n[s],a]}))}function Ze(e){return e.id}function Xe(e,t){return e[t.id]=t,e}class Je{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let e=1;e<this.points.length;e++)this._distances[e]=this._distances[e-1]+this.points[e].dist(this.points[e-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);let n=1,i=this._distances[n];const r=t*this.paddedLength+this.padding;for(;i<r&&n<this._distances.length;)i=this._distances[++n];const a=n-1,o=this._distances[a],s=i-o,l=s>0?(r-o)/s:0;return this.points[a].mult(1-l).add(this.points[n].mult(l))}}class Ke{constructor(e,t,n){const i=this.boxCells=[],r=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(let e=0;e<this.xCellCount*this.yCellCount;e++)i.push([]),r.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,n,i,r){this._forEachCell(t,n,i,r,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(i),this.bboxes.push(r)}insertCircle(e,t,n,i){this._forEachCell(t-i,n-i,t+i,n+i,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(i)}_insertBoxCell(e,t,n,i,r,a){this.boxCells[r].push(a)}_insertCircleCell(e,t,n,i,r,a){this.circleCells[r].push(a)}_query(e,t,n,i,r,a){if(n<0||e>this.width||i<0||t>this.height)return!r&&[];const o=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=i){if(r)return!0;for(let e=0;e<this.boxKeys.length;e++)o.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],n=this.circles[3*e+1],i=this.circles[3*e+2];o.push({key:this.circleKeys[e],x1:t-i,y1:n-i,x2:t+i,y2:n+i})}return a?o.filter(a):o}return this._forEachCell(e,t,n,i,this._queryCell,o,{hitTest:r,seenUids:{box:{},circle:{}}},a),r?o.length>0:o}_queryCircle(e,t,n,i,r){const a=e-n,o=e+n,s=t-n,l=t+n;if(o<0||a>this.width||l<0||s>this.height)return!i&&[];const c=[];return this._forEachCell(a,s,o,l,this._queryCellCircle,c,{hitTest:i,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},r),i?c.length>0:c}query(e,t,n,i,r){return this._query(e,t,n,i,!1,r)}hitTest(e,t,n,i,r){return this._query(e,t,n,i,!0,r)}hitTestCircle(e,t,n,i){return this._queryCircle(e,t,n,!0,i)}_queryCell(e,t,n,i,r,a,o,s){const l=o.seenUids,c=this.boxCells[r];if(null!==c){const r=this.bboxes;for(const u of c)if(!l.box[u]){l.box[u]=!0;const c=4*u;if(e<=r[c+2]&&t<=r[c+3]&&n>=r[c+0]&&i>=r[c+1]&&(!s||s(this.boxKeys[u]))){if(o.hitTest)return a.push(!0),!0;a.push({key:this.boxKeys[u],x1:r[c],y1:r[c+1],x2:r[c+2],y2:r[c+3]})}}}const u=this.circleCells[r];if(null!==u){const r=this.circles;for(const c of u)if(!l.circle[c]){l.circle[c]=!0;const u=3*c;if(this._circleAndRectCollide(r[u],r[u+1],r[u+2],e,t,n,i)&&(!s||s(this.circleKeys[c]))){if(o.hitTest)return a.push(!0),!0;{const e=r[u],t=r[u+1],n=r[u+2];a.push({key:this.circleKeys[c],x1:e-n,y1:t-n,x2:e+n,y2:t+n})}}}}}_queryCellCircle(e,t,n,i,r,a,o,s){const l=o.circle,c=o.seenUids,u=this.boxCells[r];if(null!==u){const e=this.bboxes;for(const t of u)if(!c.box[t]){c.box[t]=!0;const n=4*t;if(this._circleAndRectCollide(l.x,l.y,l.radius,e[n+0],e[n+1],e[n+2],e[n+3])&&(!s||s(this.boxKeys[t])))return a.push(!0),!0}}const d=this.circleCells[r];if(null!==d){const e=this.circles;for(const t of d)if(!c.circle[t]){c.circle[t]=!0;const n=3*t;if(this._circlesCollide(e[n],e[n+1],e[n+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[t])))return a.push(!0),!0}}}_forEachCell(e,t,n,i,r,a,o,s){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(n),d=this._convertToYCellCoord(i);for(let p=l;p<=u;p++)for(let l=c;l<=d;l++)if(r.call(this,e,t,n,i,this.xCellCount*l+p,a,o,s))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,n,i,r,a){const o=i-e,s=r-t,l=n+a;return l*l>o*o+s*s}_circleAndRectCollide(e,t,n,i,r,a,o){const s=(a-i)/2,l=Math.abs(e-(i+s));if(l>s+n)return!1;const c=(o-r)/2,u=Math.abs(t-(r+c));if(u>c+n)return!1;if(l<=s||u<=c)return!0;const d=l-s,p=u-c;return d*d+p*p<=n*n}}const $e=0,Qe=1,et=2,tt=Math.tan(85*Math.PI/180);function nt(t,n,i,r,a,o,s){const l=e.create();if(i)if("globe"===o.name){const t=e.calculateGlobeLabelMatrix(a,n);e.multiply(l,l,t)}else{const t=v([],s);l[0]=t[0],l[1]=t[1],l[4]=t[2],l[5]=t[3],r||e.rotateZ(l,l,a.angle)}else e.multiply(l,a.labelPlaneMatrix,t);return l}function it(e,t,n,i,r,a,o){const s=nt(e,t,n,i,r,a,o);return"globe"===a.name&&n||(s[2]=s[6]=s[10]=s[14]=0),s}function rt(t,n,i,r,a,o,s){if(i){if("globe"===o.name){const l=nt(t,n,i,r,a,o,s);return e.invert(l,l),e.multiply(l,t,l),l}{const n=e.clone(t),i=e.identity([]);return i[0]=s[0],i[1]=s[1],i[4]=s[2],i[5]=s[3],e.multiply(n,n,i),r||e.rotateZ(n,n,-a.angle),n}}return a.glCoordMatrix}function at(t,n,i,r){const a=[t,n,i,1];i?e.transformMat4$1(a,a,r):gt(a,a,r);const o=a[3];return a[0]/=o,a[1]/=o,a[2]/=o,a}function ot(e,t){return Math.min(.5+e/t*.5,1.5)}function st(e,t){const n=e[0]/e[3],i=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&i>=-t[1]&&i<=t[1]}function lt(t,n,i,r,a,o,s,l,c,u){const d=i.transform,p=r?t.textSizeData:t.iconSizeData,f=e.evaluateSizeForZoom(p,i.transform.zoom),m="globe"===d.projection.name,h=[256/i.width*2+1,256/i.height*2+1],g=r?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;g.clear();let y=null;m&&(y=r?t.text.globeExtVertexArray:t.icon.globeExtVertexArray);const v=t.lineVertexArray,b=r?t.text.placedSymbolArray:t.icon.placedSymbolArray,_=i.transform.width/i.transform.height;let w,x=!1;for(let r=0;r<b.length;r++){const m=b.get(r),{numGlyphs:k,writingMode:O}=m;if(O!==e.WritingMode.vertical||x||w===e.WritingMode.horizontal||(x=!0),w=O,(m.hidden||O===e.WritingMode.vertical)&&!x){ht(k,g);continue}x=!1;const E=new e.Point(m.tileAnchorX,m.tileAnchorY);let{x:T,y:C,z:S}=d.projection.projectTilePoint(E.x,E.y,u.canonical);if(c){const[e,t,n]=c(E);T+=e,C+=t,S+=n}const P=[T,C,S,1];if(e.transformMat4$1(P,P,n),!st(P,h)){ht(k,g);continue}const M=ot(i.transform.cameraToCenterDistance,P[3]),I=e.evaluateSizeForFeature(p,f,m),A=s?I/M:I*M,j=at(T,C,S,a);if(j[3]<=0){ht(k,g);continue}let L={};const R=s?null:c,N=dt(m,A,!1,l,n,a,o,t.glyphOffsetArray,v,g,y,j,E,L,_,R,d.projection,u,s);x=N.useVertical,R&&N.needsFlipping&&(L={}),(N.notEnoughRoom||x||N.needsFlipping&&dt(m,A,!0,l,n,a,o,t.glyphOffsetArray,v,g,y,j,E,L,_,R,d.projection,u,s).notEnoughRoom)&&ht(k,g)}r?(t.text.dynamicLayoutVertexBuffer.updateData(g),y&&t.text.globeExtVertexBuffer.updateData(y)):(t.icon.dynamicLayoutVertexBuffer.updateData(g),y&&t.icon.globeExtVertexBuffer.updateData(y))}function ct(e,t,n,i,r,a,o,s,l,c,u,d,p,f,m,h){const{lineStartIndex:g,glyphStartIndex:y,segment:v}=s,b=y+s.numGlyphs,_=g+s.lineLength,w=t.getoffsetX(y),x=t.getoffsetX(b-1),k=mt(e*w,n,i,r,a,o,v,g,_,l,c,u,d,p,!0,f,m,h);if(!k)return null;const O=mt(e*x,n,i,r,a,o,v,g,_,l,c,u,d,p,!0,f,m,h);return O?{first:k,last:O}:null}function ut(t,n,i,r){return t===e.WritingMode.horizontal&&Math.abs(r)>Math.abs(i)?{useVertical:!0}:t===e.WritingMode.vertical?r>0?{needsFlipping:!0}:null:n!==$e&&function(e,t){return 0===e||Math.abs(t/e)>tt}(i,r)?n===Qe?{needsFlipping:!0}:null:i<0?{needsFlipping:!0}:null}function dt(t,n,i,r,a,o,s,l,c,u,d,p,f,m,h,g,y,v,b){const _=n/24,w=t.lineOffsetX*_,x=t.lineOffsetY*_,{lineStartIndex:k,glyphStartIndex:O,numGlyphs:E,segment:T,writingMode:C,flipState:S}=t,P=k+t.lineLength,M=t=>{if(d){const[n,i,r]=t.up,a=u.length;e.updateGlobeVertexNormal(d,a+0,n,i,r),e.updateGlobeVertexNormal(d,a+1,n,i,r),e.updateGlobeVertexNormal(d,a+2,n,i,r),e.updateGlobeVertexNormal(d,a+3,n,i,r)}const[n,i,r]=t.point;e.addDynamicAttributes(u,n,i,r,t.angle)};if(E>1){const e=ct(_,l,w,x,i,p,f,t,c,o,m,g,!1,y,v,b);if(!e)return{notEnoughRoom:!0};if(r&&!i){let[n,i,r]=e.first.point,[a,o,l]=e.last.point;[n,i]=at(n,i,r,s),[a,o]=at(a,o,l,s);const c=ut(C,S,(a-n)*h,o-i);if(t.flipState=c&&c.needsFlipping?Qe:et,c)return c}M(e.first);for(let e=O+1;e<O+E-1;e++){const t=mt(_*l.getoffsetX(e),w,x,i,p,f,T,k,P,c,o,m,g,!1,!1,y,v,b);if(!t)return u.length-=4*(e-O),{notEnoughRoom:!0};M(t)}M(e.last)}else{if(r&&!i){const n=at(f.x,f.y,0,a),i=k+T+1,r=new e.Point(c.getx(i),c.gety(i)),o=at(r.x,r.y,0,a),s=o[3]>0?o:ft(f,r,n,1,a,void 0,y,v.canonical),l=ut(C,S,(s[0]-n[0])*h,s[1]-n[1]);if(t.flipState=l&&l.needsFlipping?Qe:et,l)return l}const n=mt(_*l.getoffsetX(O),w,x,i,p,f,T,k,P,c,o,m,g,!1,!1,y,v,b);if(!n)return{notEnoughRoom:!0};M(n)}return{}}function pt(e,t,n,i,r){const{x:a,y:o,z:s}=i.projectTilePoint(e.x,e.y,t);if(!r)return at(a,o,s,n);const[l,c,u]=r(e);return at(a+l,o+c,s+u,n)}function ft(t,n,i,r,a,o,s,l){const c=pt(t.sub(n)._unit()._add(t),l,a,s,o);return e.sub(c,i,c),e.normalize(c,c),e.scaleAndAdd(c,i,c,r)}function mt(t,n,i,r,a,o,s,l,c,u,d,p,f,m,h,g,y,v){const b=r?t-n:t+n;let _=b>0?1:-1,w=0;r&&(_*=-1,w=Math.PI),_<0&&(w+=Math.PI);let x=l+s+(_>0?0:1)|0,k=a,O=a,E=0,T=0;const C=Math.abs(b),S=[],P=[];let M=o,I=M;const A=()=>ft(I,M,O,C-E+1,d,f,g,y.canonical);for(;E+T<=C;){if(x+=_,x<l||x>=c)return null;if(O=k,I=M,S.push(O),m&&P.push(I),M=new e.Point(u.getx(x),u.gety(x)),k=p[x],!k){const e=pt(M,y.canonical,d,g,f);k=e[3]>0?p[x]=e:A()}E+=T,T=e.distance(O,k)}h&&f&&(p[x]&&(k=A(),T=e.distance(O,k)),p[x]=k);const j=(C-E)/T,L=M.sub(I)._mult(j)._add(I),R=e.sub([],k,O),N=e.scaleAndAdd([],O,R,j);let D=[0,0,1],B=R[0],z=R[1];if(v&&(D=g.upVector(y.canonical,L.x,L.y),0!==D[0]||0!==D[1]||1!==D[2])){const t=[D[2],0,-D[0]],n=e.cross([],D,t);e.normalize(t,t),e.normalize(n,n),B=e.dot(R,t),z=e.dot(R,n)}if(i){const t=e.cross([],D,R);e.normalize(t,t),e.scaleAndAdd(N,N,t,i*_)}const F=w+Math.atan2(z,B);return S.push(N),m&&P.push(L),{point:N,angle:F,path:S,tilePath:P,up:D}}function ht(e,t){const n=t.length,i=n+4*e;t.resize(i),t.float32.fill(-1/0,4*n,4*i)}function gt(e,t,n){const i=t[0],r=t[1];return e[0]=n[0]*i+n[4]*r+n[12],e[1]=n[1]*i+n[5]*r+n[13],e[3]=n[3]*i+n[7]*r+n[15],e}const yt=100;class vt{constructor(e,t,n=new Ke(e.width+200,e.height+200,25),i=new Ke(e.width+200,e.height+200,25)){this.transform=e,this.grid=n,this.ignoredGrid=i,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+yt,this.screenBottomBoundary=e.height+yt,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=t}placeCollisionBox(e,t,n,i,r,a,o,s){let l=n.projectedAnchorX,c=n.projectedAnchorY,u=n.projectedAnchorZ;const d=n.elevation,p=n.tileID,f=e.getProjection();if(d&&p){const[e,t,i]=f.upVector(p.canonical,n.tileAnchorX,n.tileAnchorY),r=f.upVectorScale(p.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;l+=e*d*r,c+=t*d*r,u+=i*d*r}const m=this.projectAndGetPerspectiveRatio(o,l,c,u,n.tileID,"globe"===f.name||!!d||this.transform.pitch>0,f),h=a*m.perspectiveRatio,g=(n.x1*t+i.x-n.padding)*h+m.point.x,y=(n.y1*t+i.y-n.padding)*h+m.point.y,v=(n.x2*t+i.x+n.padding)*h+m.point.x,b=(n.y2*t+i.y+n.padding)*h+m.point.y,_=m.perspectiveRatio<=.55||m.occluded;return!this.isInsideGrid(g,y,v,b)||!r&&this.grid.hitTest(g,y,v,b,s)||_?{box:[],offscreen:!1,occluded:m.occluded}:{box:[g,y,v,b],offscreen:this.isOffscreen(g,y,v,b),occluded:!1}}placeCollisionCircles(t,n,i,r,a,o,s,l,c,u,d,p,f,m,h){const g=[],y=this.transform.elevation,v=t.getProjection(),b=y?y.getAtTileOffsetFunc(h,this.transform.center.lat,this.transform.worldSize,v):null,_=new e.Point(i.tileAnchorX,i.tileAnchorY);let{x:w,y:x,z:k}=v.projectTilePoint(_.x,_.y,h.canonical);if(b){const[e,t,n]=b(_);w+=e,x+=t,k+=n}const O="globe"===v.name,E=this.projectAndGetPerspectiveRatio(s,w,x,k,h,O||!!y||this.transform.pitch>0,v),{perspectiveRatio:T}=E,C=(d?o/T:o*T)/e.ONE_EM,S=at(w,x,k,l),P=E.signedDistanceFromCamera>0?ct(C,a,i.lineOffsetX*C,i.lineOffsetY*C,!1,S,_,i,r,l,{},y&&!d?b:null,d&&!!y,v,h,d):null;let M=!1,I=!1,A=!0;if(P&&!E.occluded){const t=.5*f*T+m,i=new e.Point(-100,-100),r=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),a=new Je,{first:o,last:s}=P,l=o.path.length;let d=[];for(let e=l-1;e>=1;e--)d.push(o.path[e]);for(let e=1;e<s.path.length;e++)d.push(s.path[e]);const h=2.5*t;c&&(d=d.map(([e,t,n],i)=>(b&&!O&&(n=b(i<l-1?o.tilePath[l-1-i]:s.tilePath[i-l+2])[2]),at(e,t,n,c))),d.some(e=>e[3]<=0)&&(d=[]));let y=[];if(d.length>0){let t=1/0,n=-1/0,a=1/0,o=-1/0;for(const e of d)t=Math.min(t,e[0]),a=Math.min(a,e[1]),n=Math.max(n,e[0]),o=Math.max(o,e[1]);n>=i.x&&t<=r.x&&o>=i.y&&a<=r.y&&(y=[d.map(t=>new e.Point(t[0],t[1]))],(t<i.x||n>r.x||a<i.y||o>r.y)&&(y=e.clipLine(y,i.x,i.y,r.x,r.y)))}for(const e of y){a.reset(e,.25*t);let i=0;i=a.length<=.5*t?1:Math.ceil(a.paddedLength/h)+1;for(let e=0;e<i;e++){const r=e/Math.max(i-1,1),o=a.lerp(r),s=o.x+yt,l=o.y+yt;g.push(s,l,t,0);const c=s-t,d=l-t,f=s+t,m=l+t;if(A=A&&this.isOffscreen(c,d,f,m),I=I||this.isInsideGrid(c,d,f,m),!n&&this.grid.hitTestCircle(s,l,t,p)&&(M=!0,!u))return{circles:[],offscreen:!1,collisionDetected:M,occluded:!1}}}}return{circles:!u&&M||!I?[]:g,offscreen:A,collisionDetected:M,occluded:E.occluded}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let i=1/0,r=1/0,a=-1/0,o=-1/0;for(const s of t){const t=new e.Point(s.x+yt,s.y+yt);i=Math.min(i,t.x),r=Math.min(r,t.y),a=Math.max(a,t.x),o=Math.max(o,t.y),n.push(t)}const s=this.grid.query(i,r,a,o).concat(this.ignoredGrid.query(i,r,a,o)),l={},c={};for(const t of s){const i=t.key;if(void 0===l[i.bucketInstanceId]&&(l[i.bucketInstanceId]={}),l[i.bucketInstanceId][i.featureIndex])continue;const r=[new e.Point(t.x1,t.y1),new e.Point(t.x2,t.y1),new e.Point(t.x2,t.y2),new e.Point(t.x1,t.y2)];e.polygonIntersectsPolygon(n,r)&&(l[i.bucketInstanceId][i.featureIndex]=!0,void 0===c[i.bucketInstanceId]&&(c[i.bucketInstanceId]=[]),c[i.bucketInstanceId].push(i.featureIndex))}return c}insertCollisionBox(e,t,n,i,r){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:i,collisionGroupID:r},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,n,i,r){const a=t?this.ignoredGrid:this.grid,o={bucketInstanceId:n,featureIndex:i,collisionGroupID:r};for(let t=0;t<e.length;t+=4)a.insertCircle(o,e[t],e[t+1],e[t+2])}projectAndGetPerspectiveRatio(t,n,i,r,a,o,s){const l=[n,i,r,1];let c=!1;r||this.transform.pitch>0?(e.transformMat4$1(l,l,t),this.fogState&&a&&"globe"!==s.name&&(c=function(t,n,i,r,a,o){const s=o.calculateFogTileMatrix(a),l=[n,i,r];return e.transformMat4(l,l,s),E(t,l,o.pitch,o._fov)}(this.fogState,n,i,r,a.toUnwrapped(),this.transform)>.9)):gt(l,l,t);const u=l[3];return{point:new e.Point((l[0]/u+1)/2*this.transform.width+yt,(-l[1]/u+1)/2*this.transform.height+yt),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(s)/u*.5,1.5),signedDistanceFromCamera:u,occluded:o&&l[2]>u||c}}isOffscreen(e,t,n,i){return n<yt||e>=this.screenRightBoundary||i<yt||t>this.screenBottomBoundary}isInsideGrid(e,t,n,i){return n>=0&&e<this.gridRightBoundary&&i>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}function bt(t,n,i){const r=n.createTileMatrix(t,t.worldSize,i.toUnwrapped());return e.multiply(new Float32Array(16),t.projMatrix,r)}function _t(e,t,n){if(t.projection.name===n.projection.name)return e.projMatrix;const i=n.clone();return i.setProjection(t.projection),bt(i,t.getProjection(),e)}function wt(e,t,n){return t.name===n.projection.name?e.projMatrix:bt(n,t,e)}class xt{constructor(e,t,n,i){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):i&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class kt{constructor(e,t,n,i,r,a=!1){this.text=new xt(e?e.text:null,t,n,r),this.icon=new xt(e?e.icon:null,t,i,r),this.clipped=a}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ot{constructor(e,t,n,i=!1){this.text=e,this.icon=t,this.skipFade=n,this.clipped=i}}class Et{constructor(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]}}class Tt{constructor(e,t,n,i,r){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=i,this.tileID=r}}class Ct{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function St(t,n,i,r,a){const{horizontalAlign:o,verticalAlign:s}=e.getAnchorAlignment(t),l=-(o-.5)*n,c=-(s-.5)*i,u=e.evaluateVariableOffset(t,r);return new e.Point(l+u[0]*a,c+u[1]*a)}function Pt(t,n,i,r,a){const o=new e.Point(t,n);return i&&o._rotate(r?a:-a),o}class Mt{constructor(e,t,n,i,r){this.transform=e.clone(),this.projection=e.projection.name,this.collisionIndex=new vt(this.transform,r),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new Ct(n),this.collisionCircleArrays={},this.prevPlacement=i,i&&(i.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,n,i,r){const a=i.getBucket(n),o=i.latestFeatureIndex;if(!a||!o||n.id!==a.layerIds[0])return;const s=a.layers[0].layout,l=i.collisionBoxArray,c=Math.pow(2,this.transform.zoom-i.tileID.overscaledZ),u=i.tileSize/e.EXTENT,d=i.tileID.toUnwrapped();this.transform.setProjection(a.projection);const p=(f=i.tileID,m=a.getProjection(),h=this.transform,m.name===this.projection?h.calculateProjMatrix(f.toUnwrapped()):bt(h,m,f));var f,m,h;const g="map"===s.get("text-pitch-alignment"),y="map"===s.get("text-rotation-alignment");n.compileFilter();const v=n.dynamicFilter(),b=n.dynamicFilterNeedsFeature(),_=this.transform.calculatePixelsToTileUnitsMatrix(i),w=it(p,i.tileID.canonical,g,y,this.transform,a.getProjection(),_);let x=null;if(g){const t=rt(p,i.tileID.canonical,g,y,this.transform,a.getProjection(),_);x=e.multiply([],this.transform.labelPlaneMatrix,t)}let k=null;v&&i.latestFeatureIndex&&(k={unwrappedTileID:d,dynamicFilter:v,dynamicFilterNeedsFeature:b,featureIndex:i.latestFeatureIndex}),this.retainedQueryData[a.bucketInstanceId]=new Tt(a.bucketInstanceId,o,a.sourceLayerIndex,a.index,i.tileID);const O={bucket:a,layout:s,posMatrix:p,textLabelPlaneMatrix:w,labelToScreenMatrix:x,clippingData:k,scale:c,textPixelRatio:u,holdingForFade:i.holdingForFade(),collisionBoxArray:l,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(a.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(a.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(a.sourceID)};if(r)for(const e of a.sortKeyRanges){const{sortKey:n,symbolInstanceStart:i,symbolInstanceEnd:r}=e;t.push({sortKey:n,symbolInstanceStart:i,symbolInstanceEnd:r,parameters:O})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:a.symbolInstances.length,parameters:O})}attemptAnchorPlacement(e,t,n,i,r,a,o,s,l,c,u,d,p,f,m,h,g,y){const{textOffset0:v,textOffset1:b,crossTileID:_}=d,w=[v,b],x=St(e,n,i,w,r),k=this.collisionIndex.placeCollisionBox(f,r,t,Pt(x.x,x.y,a,o,this.transform.angle),u,s,l,c.predicate);if(h){const e=f.getSymbolInstanceIconSize(y,this.transform.zoom,d.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(f,e,h,Pt(x.x,x.y,a,o,this.transform.angle),u,s,l,c.predicate).box.length)return}if(k.box.length>0){let t;return this.prevPlacement&&this.prevPlacement.variableOffsets[_]&&this.prevPlacement.placements[_]&&this.prevPlacement.placements[_].text&&(t=this.prevPlacement.variableOffsets[_].anchor),this.variableOffsets[_]={textOffset:w,width:n,height:i,anchor:e,textScale:r,prevAnchor:t},this.markUsedJustification(f,e,d,m),f.allowVerticalPlacement&&(this.markUsedOrientation(f,m,d),this.placedOrientations[_]=m),{shift:x,placedGlyphBoxes:k}}}placeLayerBucketPart(t,n,i,r){const{bucket:a,layout:o,posMatrix:s,textLabelPlaneMatrix:l,labelToScreenMatrix:c,clippingData:u,textPixelRatio:d,holdingForFade:p,collisionBoxArray:f,partiallyEvaluatedTextSize:m,partiallyEvaluatedIconSize:h,collisionGroup:g}=t.parameters,y=o.get("text-optional"),v=o.get("icon-optional"),b=o.get("text-allow-overlap"),_=o.get("icon-allow-overlap"),w="map"===o.get("text-rotation-alignment"),x="map"===o.get("text-pitch-alignment"),k="none"!==o.get("icon-text-fit"),O="viewport-y"===o.get("symbol-z-order");this.transform.setProjection(a.projection);let E=b&&(_||!a.hasIconData()||v),T=_&&(b||!a.hasTextData()||y);!a.collisionArrays&&f&&a.deserializeCollisionBoxes(f),i&&r&&a.updateCollisionDebugBuffers(this.transform.zoom,f);const C=(t,r,f)=>{const{crossTileID:O,numVerticalGlyphVertices:C}=t;if(u){const i={zoom:this.transform.zoom,pitch:this.transform.pitch};let r=null;if(u.dynamicFilterNeedsFeature){const e=this.retainedQueryData[a.bucketInstanceId];r=u.featureIndex.loadFeature({featureIndex:t.featureIndex,bucketIndex:e.bucketIndex,sourceLayerIndex:e.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,u.dynamicFilter)(i,r,this.retainedQueryData[a.bucketInstanceId].tileID.canonical,new e.Point(t.tileAnchorX,t.tileAnchorY),this.transform.calculateDistanceTileData(u.unwrappedTileID)))return this.placements[O]=new Ot(!1,!1,!1,!0),void n.add(O)}if(n.has(O))return;if(p)return void(this.placements[O]=new Ot(!1,!1,!1));let S=!1,P=!1,M=!0,I=!1,A=!1,j=null,L={box:null,offscreen:null,occluded:null},R={box:null,offscreen:null,occluded:null},N=null,D=null,B=null,z=0,F=0,U=0;f.textFeatureIndex?z=f.textFeatureIndex:t.useRuntimeCollisionCircles&&(z=t.featureIndex),f.verticalTextFeatureIndex&&(F=f.verticalTextFeatureIndex);const H=e=>{e.tileID=this.retainedQueryData[a.bucketInstanceId].tileID;const t=this.transform.elevation;(t||e.elevation)&&(e.elevation=t?t.getAtTileOffset(e.tileID,e.tileAnchorX,e.tileAnchorY):0)},W=f.textBox;if(W){H(W);const n=n=>{let i=e.WritingMode.horizontal;if(a.allowVerticalPlacement&&!n&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[O];e&&(this.placedOrientations[O]=e,i=e,this.markUsedOrientation(a,i,t))}return i},i=(t,n)=>{if(a.allowVerticalPlacement&&C>0&&f.verticalTextBox){for(const i of a.writingModes)if(i===e.WritingMode.vertical?(L=n(),R=L):L=t(),L&&L.box&&L.box.length)break}else L=t()};if(o.get("text-variable-anchor")){let l=o.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[O]){const e=this.prevPlacement.variableOffsets[O];l.indexOf(e.anchor)>0&&(l=l.filter(t=>t!==e.anchor),l.unshift(e.anchor))}const c=(e,n,i)=>{const o=a.getSymbolInstanceTextSize(m,t,this.transform.zoom,r),c=(e.x2-e.x1)*o+2*e.padding,u=(e.y2-e.y1)*o+2*e.padding,p=k&&!_?n:null;p&&H(p);let f={box:[],offscreen:!1,occluded:!1};const y=b?2*l.length:l.length;for(let n=0;n<y;++n){const y=this.attemptAnchorPlacement(l[n%l.length],e,c,u,o,w,x,d,s,g,n>=l.length,t,r,a,i,p,m,h);if(y&&(f=y.placedGlyphBoxes,f&&f.box&&f.box.length)){S=!0,j=y.shift;break}}return f};i(()=>c(W,f.iconBox,e.WritingMode.horizontal),()=>{const t=f.verticalTextBox;return t&&H(t),a.allowVerticalPlacement&&!(L&&L.box&&L.box.length)&&C>0&&t?c(t,f.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),L&&(S=L.box,M=L.offscreen,I=L.occluded);const u=n(!(!L||!L.box));if(!S&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[O];e&&(this.variableOffsets[O]=e,this.markUsedJustification(a,e.anchor,t,u))}}else{const o=(n,i)=>{const o=a.getSymbolInstanceTextSize(m,t,this.transform.zoom,r),l=this.collisionIndex.placeCollisionBox(a,o,n,new e.Point(0,0),b,d,s,g.predicate);return l&&l.box&&l.box.length&&(this.markUsedOrientation(a,i,t),this.placedOrientations[O]=i),l};i(()=>o(W,e.WritingMode.horizontal),()=>{const t=f.verticalTextBox;return a.allowVerticalPlacement&&C>0&&t?(H(t),o(t,e.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),n(!!(L&&L.box&&L.box.length))}}if(N=L,S=N&&N.box&&N.box.length>0,M=N&&N.offscreen,I=N&&N.occluded,t.useRuntimeCollisionCircles){const n=a.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),r=e.evaluateSizeForFeature(a.textSizeData,m,n),u=o.get("text-padding");D=this.collisionIndex.placeCollisionCircles(a,b,n,a.lineVertexArray,a.glyphOffsetArray,r,s,l,c,i,x,g.predicate,t.collisionCircleDiameter*r/e.ONE_EM,u,this.retainedQueryData[a.bucketInstanceId].tileID),S=b||D.circles.length>0&&!D.collisionDetected,M=M&&D.offscreen,I=D.occluded}if(f.iconFeatureIndex&&(U=f.iconFeatureIndex),f.iconBox){const n=n=>{H(n);const i=k&&j?Pt(j.x,j.y,w,x,this.transform.angle):new e.Point(0,0),r=a.getSymbolInstanceIconSize(h,this.transform.zoom,t.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(a,r,n,i,_,d,s,g.predicate)};R&&R.box&&R.box.length&&f.verticalIconBox?(B=n(f.verticalIconBox),P=B.box.length>0):(B=n(f.iconBox),P=B.box.length>0),M=M&&B.offscreen,A=B.occluded}const q=y||0===t.numHorizontalGlyphVertices&&0===C,V=v||0===t.numIconVertices;if(q||V?V?q||(P=P&&S):S=P&&S:P=S=P&&S,S&&N&&N.box&&this.collisionIndex.insertCollisionBox(N.box,o.get("text-ignore-placement"),a.bucketInstanceId,R&&R.box&&F?F:z,g.ID),P&&B&&this.collisionIndex.insertCollisionBox(B.box,o.get("icon-ignore-placement"),a.bucketInstanceId,U,g.ID),D&&(S&&this.collisionIndex.insertCollisionCircles(D.circles,o.get("text-ignore-placement"),a.bucketInstanceId,z,g.ID),i)){const e=a.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new Et);for(let e=0;e<D.circles.length;e+=4)t.circles.push(D.circles[e+0]),t.circles.push(D.circles[e+1]),t.circles.push(D.circles[e+2]),t.circles.push(D.collisionDetected?1:0)}const G="globe"!==a.projection.name;E=E&&(G||!I),T=T&&(G||!A),this.placements[O]=new Ot(S||E,P||T,M||a.justReloaded),n.add(O)};if(O){const e=a.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){const n=e[t];C(a.symbolInstances.get(n),n,a.collisionArrays[n])}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)C(a.symbolInstances.get(e),e,a.collisionArrays[e]);if(i&&a.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[a.bucketInstanceId];e.invert(t.invProjMatrix,s),t.viewportMatrix=this.collisionIndex.getViewportMatrix()}a.justReloaded=!1}markUsedJustification(t,n,i,r){const{leftJustifiedTextSymbolIndex:a,centerJustifiedTextSymbolIndex:o,rightJustifiedTextSymbolIndex:s,verticalPlacedTextSymbolIndex:l,crossTileID:c}=i,u=e.getAnchorJustification(n),d=r===e.WritingMode.vertical?l:"left"===u?a:"center"===u?o:"right"===u?s:-1;a>=0&&(t.text.placedSymbolArray.get(a).crossTileID=d>=0&&a!==d?0:c),o>=0&&(t.text.placedSymbolArray.get(o).crossTileID=d>=0&&o!==d?0:c),s>=0&&(t.text.placedSymbolArray.get(s).crossTileID=d>=0&&s!==d?0:c),l>=0&&(t.text.placedSymbolArray.get(l).crossTileID=d>=0&&l!==d?0:c)}markUsedOrientation(t,n,i){const r=n===e.WritingMode.horizontal||n===e.WritingMode.horizontalOnly?n:0,a=n===e.WritingMode.vertical?n:0,{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:s,rightJustifiedTextSymbolIndex:l,verticalPlacedTextSymbolIndex:c}=i,u=t.text.placedSymbolArray;o>=0&&(u.get(o).placedOrientation=r),s>=0&&(u.get(s).placedOrientation=r),l>=0&&(u.get(l).placedOrientation=r),c>=0&&(u.get(c).placedOrientation=a)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const i=t?t.symbolFadeChange(e):1,r=t?t.opacities:{},a=t?t.variableOffsets:{},o=t?t.placedOrientations:{};for(const e in this.placements){const t=this.placements[e],a=r[e];a?(this.opacities[e]=new kt(a,i,t.text,t.icon,null,t.clipped),n=n||t.text!==a.text.placed||t.icon!==a.icon.placed):(this.opacities[e]=new kt(null,i,t.text,t.icon,t.skipFade,t.clipped),n=n||t.text||t.icon)}for(const e in r){const t=r[e];if(!this.opacities[e]){const r=new kt(t,i,!1,!1);r.isHidden()||(this.opacities[e]=r,n=n||t.text.placed||t.icon.placed)}}for(const e in a)this.variableOffsets[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.variableOffsets[e]=a[e]);for(const e in o)this.placedOrientations[e]||!this.opacities[e]||this.opacities[e].isHidden()||(this.placedOrientations[e]=o[e]);n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const n=new Set;for(const i of t){const t=i.getBucket(e);t&&i.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,n,i.collisionBoxArray)}}updateBucketOpacities(t,n,i){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const r=t.layers[0].layout,a=!!t.layers[0].dynamicFilter(),o=new kt(null,0,!1,!1,!0),s=r.get("text-allow-overlap"),l=r.get("icon-allow-overlap"),c=r.get("text-variable-anchor"),u="map"===r.get("text-rotation-alignment"),d="map"===r.get("text-pitch-alignment"),p="none"!==r.get("icon-text-fit"),f=new kt(null,0,s&&(l||!t.hasIconData()||r.get("icon-optional")),l&&(s||!t.hasTextData()||r.get("text-optional")),!0);!t.collisionArrays&&i&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(i);const m=(e,t,n)=>{for(let i=0;i<t/4;i++)e.opacityVertexArray.emplaceBack(n)};let h=0;for(let i=0;i<t.symbolInstances.length;i++){const r=t.symbolInstances.get(i),{numHorizontalGlyphVertices:s,numVerticalGlyphVertices:l,crossTileID:g,numIconVertices:y}=r,v=n.has(g);let b=this.opacities[g];v?b=o:b||(b=f,this.opacities[g]=b),n.add(g);const _=s>0||l>0,w=y>0,x=this.placedOrientations[g],k=x===e.WritingMode.vertical,O=x===e.WritingMode.horizontal||x===e.WritingMode.horizontalOnly;if(!_&&!w||b.isHidden()||h++,_){const e=zt(b.text);m(t.text,s,k?Ft:e),m(t.text,l,O?Ft:e);const n=b.text.isHidden(),{leftJustifiedTextSymbolIndex:i,centerJustifiedTextSymbolIndex:a,rightJustifiedTextSymbolIndex:o,verticalPlacedTextSymbolIndex:c}=r,u=t.text.placedSymbolArray,d=n||k?1:0;i>=0&&(u.get(i).hidden=d),a>=0&&(u.get(a).hidden=d),o>=0&&(u.get(o).hidden=d),c>=0&&(u.get(c).hidden=n||O?1:0);const p=this.variableOffsets[g];p&&this.markUsedJustification(t,p.anchor,r,x);const f=this.placedOrientations[g];f&&(this.markUsedJustification(t,"left",r,f),this.markUsedOrientation(t,f,r))}if(w){const e=zt(b.icon),{placedIconSymbolIndex:n,verticalPlacedIconSymbolIndex:i}=r,a=t.icon.placedSymbolArray,o=b.icon.isHidden()?1:0;n>=0&&(m(t.icon,y,k?Ft:e),a.get(n).hidden=o),i>=0&&(m(t.icon,r.numVerticalIconVertices,O?Ft:e),a.get(i).hidden=o)}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const n=t.collisionArrays[i];if(n){let i=new e.Point(0,0),r=!0;if(n.textBox||n.verticalTextBox){if(c){const e=this.variableOffsets[g];e?(i=St(e.anchor,e.width,e.height,e.textOffset,e.textScale),u&&i._rotate(d?this.transform.angle:-this.transform.angle)):r=!1}a&&(r=!b.clipped),n.textBox&&It(t.textCollisionBox.collisionVertexArray,b.text.placed,!r||k,i.x,i.y),n.verticalTextBox&&It(t.textCollisionBox.collisionVertexArray,b.text.placed,!r||O,i.x,i.y)}const o=r&&Boolean(!O&&n.verticalIconBox);n.iconBox&&It(t.iconCollisionBox.collisionVertexArray,b.icon.placed,o,p?i.x:0,p?i.y:0),n.verticalIconBox&&It(t.iconCollisionBox.collisionVertexArray,b.icon.placed,!o,p?i.x:0,p?i.y:0)}}}if(t.fullyClipped=0===h,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}setStale(){this.stale=!0}}function It(e,t,n,i,r){e.emplaceBack(t?1:0,n?1:0,i||0,r||0),e.emplaceBack(t?1:0,n?1:0,i||0,r||0),e.emplaceBack(t?1:0,n?1:0,i||0,r||0),e.emplaceBack(t?1:0,n?1:0,i||0,r||0)}const At=Math.pow(2,25),jt=Math.pow(2,24),Lt=Math.pow(2,17),Rt=Math.pow(2,16),Nt=Math.pow(2,9),Dt=Math.pow(2,8),Bt=Math.pow(2,1);function zt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*At+t*jt+n*Lt+t*Rt+n*Nt+t*Dt+n*Bt+t}const Ft=0;class Ut{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(e,t,n,i,r){const a=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(a,i,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,r())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort((e,t)=>e.sortKey-t.sortKey));this._currentPartIndex<a.length;){const e=a[this._currentPartIndex];if(t.placeLayerBucketPart(e,this._seenCrossTileIDs,n,0===e.symbolInstanceStart),this._currentPartIndex++,r())return!0}return!1}}class Ht{constructor(e,t,n,i,r,a,o,s){this.placement=new Mt(e,r,a,o,s),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=i,this._done=!1}isDone(){return this._done}continuePlacement(t,n,i){const r=e.exported.now(),a=()=>{const t=e.exported.now()-r;return!this._forceFullPlacement&&t>2};for(;this._currentPlacementIndex>=0;){const e=n[t[this._currentPlacementIndex]],r=this.placement.collisionIndex.transform.zoom;if("symbol"===e.type&&(!e.minzoom||e.minzoom<=r)&&(!e.maxzoom||e.maxzoom>r)){if(this._inProgressLayer||(this._inProgressLayer=new Ut(e)),this._inProgressLayer.continuePlacement(i[e.source],this.placement,this._showCollisionBoxes,e,a))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Wt=512/e.EXTENT/2;class qt{constructor(t,n,i){this.tileID=t,this.bucketInstanceId=i,this.index=new e.KDBush(n.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const r=t.canonical.x*e.EXTENT,a=t.canonical.y*e.EXTENT;for(let e=0;e<n.length;e++){const{key:t,crossTileID:i,tileAnchorX:o,tileAnchorY:s}=n.get(e),l=Math.floor((r+o)*Wt),c=Math.floor((a+s)*Wt);this.index.add(l,c),this.keys.push(t),this.crossTileIDs.push(i)}this.index.finish()}findMatches(t,n,i){const r=this.tileID.canonical.z<n.canonical.z?1:Math.pow(2,this.tileID.canonical.z-n.canonical.z),a=Wt/Math.pow(2,n.canonical.z-this.tileID.canonical.z),o=n.canonical.x*e.EXTENT,s=n.canonical.y*e.EXTENT;for(let e=0;e<t.length;e++){const n=t.get(e);if(n.crossTileID)continue;const{key:l,tileAnchorX:c,tileAnchorY:u}=n,d=Math.floor((o+c)*a),p=Math.floor((s+u)*a),f=this.index.range(d-r,p-r,d+r,p+r);for(const e of f){const t=this.crossTileIDs[e];if(this.keys[e]===l&&!i.has(t)){i.add(t),n.crossTileID=t;break}}}}}class Vt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Gt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const e in this.indexes){const n=this.indexes[e],i={};for(const e in n){const r=n[e];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),i[r.tileID.key]=r}this.indexes[e]=i}this.lng=e}addBucket(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let e=0;e<t.symbolInstances.length;e++)t.symbolInstances.get(e).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]=new Set);const i=this.usedCrossTileIDs[e.overscaledZ];for(const n in this.indexes){const r=this.indexes[n];if(Number(n)>e.overscaledZ)for(const n in r){const a=r[n];a.tileID.isChildOf(e)&&a.findMatches(t.symbolInstances,e,i)}else{const a=r[e.scaledTo(Number(n)).key];a&&a.findMatches(t.symbolInstances,e,i)}}for(let e=0;e<t.symbolInstances.length;e++){const r=t.symbolInstances.get(e);r.crossTileID||(r.crossTileID=n.generate(),i.add(r.crossTileID))}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new qt(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const n of t.crossTileIDs)this.usedCrossTileIDs[e].delete(n)}removeStaleBuckets(e){let t=!1;for(const n in this.indexes){const i=this.indexes[n];for(const r in i)e[i[r].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,i[r]),delete i[r],t=!0)}return t}}class Yt{constructor(){this.layerIndexes={},this.crossTileIDs=new Vt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,n,i){let r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new Gt);let a=!1;const o={};"globe"!==i.name&&r.handleWrapJump(n);for(const n of t){const t=n.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),r.addBucket(n.tileID,t,this.crossTileIDs)&&(a=!0),o[t.bucketInstanceId]=!0)}return r.removeStaleBuckets(o)&&(a=!0),a}pruneUnusedLayers(e){const t={};e.forEach(e=>{t[e]=!0});for(const e in this.layerIndexes)t[e]||delete this.layerIndexes[e]}}const Zt=(t,n)=>e.emitValidationErrors(t,n&&n.filter(e=>"source.canvas"!==e.identifier)),Xt=e.pick(He,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Jt=e.pick(He,["setCenter","setZoom","setBearing","setPitch"]),Kt={version:8,layers:[],sources:{}},$t={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Qt extends e.Evented{constructor(t,n={}){super(),this.map=t,this.dispatcher=new P(ze(),this),this.imageManager=new _,this.imageManager.setEventedParent(this),this.glyphManager=new e.GlyphManager(t._requestManager,n.localFontFamily?e.LocalGlyphMode.all:n.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,n.localFontFamily||n.localIdeographFontFamily),this.crossTileSymbolIndex=new Yt,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());const i=this;this._rtlTextPluginCallback=Qt.registerForPluginStateChange(t=>{i.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},(t,n)=>{if(e.triggerPluginCompletionEvent(t),n&&n.every(e=>e))for(const e in i._sourceCaches){const t=i._sourceCaches[e],n=t.getSource().type;"vector"!==n&&"geojson"!==n||t.reload()}})}),this.on("data",e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(const e in this._layers){const n=this._layers[e];n.source===t.id&&this._validateLayer(n)}})}loadURL(t,n={}){this.fire(new e.Event("dataloading",{dataType:"style"}));const i="boolean"==typeof n.validate?n.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,n.accessToken);const r=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(r,(t,n)=>{this._request=null,t?this.fire(new e.ErrorEvent(t)):n&&this._load(n,i)})}loadJSON(t,n={}){this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame(()=>{this._request=null,this._load(t,!1!==n.validate)})}loadEmpty(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Kt,!1)}_updateLayerCount(e,t){const n=t?1:-1;e.is3D()&&(this._num3DLayers+=n),"circle"===e.type&&(this._numCircleLayers+=n),"symbol"===e.type&&(this._numSymbolLayers+=n)}_load(t,n){if(n&&Zt(this,e.validateStyle(t)))return;this._loaded=!0,this.stylesheet=e.clone$1(t),this._updateMapProjection();for(const e in t.sources)this.addSource(e,t.sources[e],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);const i=Ue(this.stylesheet.layers);this._order=i.map(e=>e.id),this._layers={},this._serializedLayers={};for(const t of i){const n=e.createStyleLayer(t);n.setEventedParent(this,{layer:{id:n.id}}),this._layers[n.id]=n,this._serializedLayers[n.id]=n.serialize(),this._updateLayerCount(n,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new x(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(t){this._spriteRequest=function(t,n,i){let r,a,o;const s=e.exported.devicePixelRatio>1?"@2x":"";let l=e.getJSON(n.transformRequest(n.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),(e,t)=>{l=null,o||(o=e,r=t,u())}),c=e.getImage(n.transformRequest(n.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),(e,t)=>{c=null,o||(o=e,a=t,u())});function u(){if(o)i(o);else if(r&&a){const t=e.exported.getImageData(a),n={};for(const i in r){const{width:a,height:o,x:s,y:l,sdf:c,pixelRatio:u,stretchX:d,stretchY:p,content:f}=r[i],m=new e.RGBAImage({width:a,height:o});e.RGBAImage.copy(t,m,{x:s,y:l},{x:0,y:0},{width:a,height:o}),n[i]={data:m,pixelRatio:u,sdf:c,stretchX:d,stretchY:p,content:f}}i(null,n)}}return{cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(t,this.map._requestManager,(t,n)=>{if(this._spriteRequest=null,t)this.fire(new e.ErrorEvent(t));else if(n)for(const e in n)this.imageManager.addImage(e,n[e]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new e.Event("data",{dataType:"style"}))})}_validateLayer(t){const n=this.getSource(t.source);if(!n)return;const i=t.sourceLayer;i&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(i))&&this.fire(new e.ErrorEvent(new Error(`Source layer "${i}" does not exist on source "${n.id}" as specified by style layer "${t.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(e){const t=[];for(const n of e){const e=this._layers[n];"custom"!==e.type&&t.push(e.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(e){return!!this.terrain&&("function"==typeof e.isLayerDraped?e.isLayerDraped():$t[e.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(t){if(!this._loaded)return;const n=this._changed;if(this._changed){const e=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(e.length||n.length)&&this._updateWorkerLayers(e,n);for(const e in this._updatedSources){const t=this._updatedSources[e];"reload"===t?this._reloadSource(e):"clear"===t&&this._clearSource(e)}this._updateTilesForChangedImages();for(const e in this._updatedPaintProps)this._layers[e].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}const i={};for(const e in this._sourceCaches){const t=this._sourceCaches[e];i[e]=t.used,t.used=!1}for(const e of this._order){const n=this._layers[e];if(n.recalculate(t,this._availableImages),!n.isHidden(t.zoom)){const e=this._getLayerSourceCache(n);e&&(e.used=!0)}const i=this.map.painter;if(i){const e=n.getProgramIds();if(!e)continue;const r=n.getProgramConfiguration(t.zoom);for(const t of e)i.useProgram(t,r)}}for(const t in i){const n=this._sourceCaches[t];i[t]!==n.used&&n.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:n.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new e.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(n){if(this._checkLoaded(),Zt(this,e.validateStyle(n)))return!1;(n=e.clone$1(n)).layers=Ue(n.layers);const i=function(e,n){if(!e)return[{command:He.setStyle,args:[n]}];let i=[];try{if(!t(e.version,n.version))return[{command:He.setStyle,args:[n]}];t(e.center,n.center)||i.push({command:He.setCenter,args:[n.center]}),t(e.zoom,n.zoom)||i.push({command:He.setZoom,args:[n.zoom]}),t(e.bearing,n.bearing)||i.push({command:He.setBearing,args:[n.bearing]}),t(e.pitch,n.pitch)||i.push({command:He.setPitch,args:[n.pitch]}),t(e.sprite,n.sprite)||i.push({command:He.setSprite,args:[n.sprite]}),t(e.glyphs,n.glyphs)||i.push({command:He.setGlyphs,args:[n.glyphs]}),t(e.transition,n.transition)||i.push({command:He.setTransition,args:[n.transition]}),t(e.light,n.light)||i.push({command:He.setLight,args:[n.light]}),t(e.fog,n.fog)||i.push({command:He.setFog,args:[n.fog]}),t(e.projection,n.projection)||i.push({command:He.setProjection,args:[n.projection]});const r={},a=[];!function(e,n,i,r){let a;for(a in n=n||{},e=e||{})e.hasOwnProperty(a)&&(n.hasOwnProperty(a)||qe(a,i,r));for(a in n){if(!n.hasOwnProperty(a))continue;const o=n[a];e.hasOwnProperty(a)?t(e[a],o)||("geojson"===e[a].type&&"geojson"===o.type&&Ge(e,n,a)?i.push({command:He.setGeoJSONSourceData,args:[a,o.data]}):Ve(a,n,i,r)):We(a,n,i)}}(e.sources,n.sources,a,r);const o=[];e.layers&&e.layers.forEach(e=>{e.source&&r[e.source]?i.push({command:He.removeLayer,args:[e.id]}):o.push(e)});let s=e.terrain;s&&r[s.source]&&(i.push({command:He.setTerrain,args:[void 0]}),s=void 0),i=i.concat(a),t(s,n.terrain)||i.push({command:He.setTerrain,args:[n.terrain]}),function(e,n,i){n=n||[];const r=(e=e||[]).map(Ze),a=n.map(Ze),o=e.reduce(Xe,{}),s=n.reduce(Xe,{}),l=r.slice(),c=Object.create(null);let u,d,p,f,m,h,g;for(u=0,d=0;u<r.length;u++)p=r[u],s.hasOwnProperty(p)?d++:(i.push({command:He.removeLayer,args:[p]}),l.splice(l.indexOf(p,d),1));for(u=0,d=0;u<a.length;u++)p=a[a.length-1-u],l[l.length-1-u]!==p&&(o.hasOwnProperty(p)?(i.push({command:He.removeLayer,args:[p]}),l.splice(l.lastIndexOf(p,l.length-d),1)):d++,h=l[l.length-u],i.push({command:He.addLayer,args:[s[p],h]}),l.splice(l.length-u,0,p),c[p]=!0);for(u=0;u<a.length;u++)if(p=a[u],f=o[p],m=s[p],!c[p]&&!t(f,m))if(t(f.source,m.source)&&t(f["source-layer"],m["source-layer"])&&t(f.type,m.type)){for(g in Ye(f.layout,m.layout,i,p,null,He.setLayoutProperty),Ye(f.paint,m.paint,i,p,null,He.setPaintProperty),t(f.filter,m.filter)||i.push({command:He.setFilter,args:[p,m.filter]}),t(f.minzoom,m.minzoom)&&t(f.maxzoom,m.maxzoom)||i.push({command:He.setLayerZoomRange,args:[p,m.minzoom,m.maxzoom]}),f)f.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Ye(f[g],m[g],i,p,g.slice(6),He.setPaintProperty):t(f[g],m[g])||i.push({command:He.setLayerProperty,args:[p,g,m[g]]}));for(g in m)m.hasOwnProperty(g)&&!f.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&(0===g.indexOf("paint.")?Ye(f[g],m[g],i,p,g.slice(6),He.setPaintProperty):t(f[g],m[g])||i.push({command:He.setLayerProperty,args:[p,g,m[g]]}))}else i.push({command:He.removeLayer,args:[p]}),h=l[l.lastIndexOf(p)+1],i.push({command:He.addLayer,args:[m,h]})}(o,n.layers,i)}catch(e){console.warn("Unable to compute style diff:",e),i=[{command:He.setStyle,args:[n]}]}return i}(this.serialize(),n).filter(e=>!(e.command in Jt));if(0===i.length)return!1;const r=i.filter(e=>!(e.command in Xt));if(r.length>0)throw new Error(`Unimplemented: ${r.map(e=>e.command).join(", ")}.`);return i.forEach(e=>{"setTransition"!==e.command&&"setProjection"!==e.command&&this[e.command].apply(this,e.args)}),this.stylesheet=n,this._updateMapProjection(),!0}addImage(t,n){return this.getImage(t)?this.fire(new e.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(t,n),this._afterImageUpdated(t),this)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(t){return this.getImage(t)?(this.imageManager.removeImage(t),this._afterImageUpdated(t),this):this.fire(new e.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(t,n,i={}){if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.validateSource,"sources."+t,n,null,i))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const r=Me(t,n,this.dispatcher,this);r.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(t),source:r.serialize(),sourceId:t}));const a=n=>{const i=(n?"symbol:":"other:")+t,a=this._sourceCaches[i]=new e.SourceCache(i,r,n);(n?this._symbolSourceCaches:this._otherSourceCaches)[t]=a,a.style=this,a.onAdd(this.map)};a(!1),"vector"!==n.type&&"geojson"!==n.type||a(!0),r.onAdd&&r.onAdd(this.map),this._changed=!0}removeSource(t){this._checkLoaded();const n=this.getSource(t);if(!n)throw new Error("There is no source with this ID");for(const n in this._layers)if(this._layers[n].source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${n}" is using it.`)));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while terrain is using it.`)));const i=this._getSourceCaches(t);for(const t of i)delete this._sourceCaches[t.id],delete this._updatedSources[t.id],t.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:t.getSource().id})),t.setEventedParent(null),t.clearTiles();return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}getSource(e){const t=this._getSourceCache(e);return t&&t.getSource()}_getSources(){const e=[];for(const t in this._otherSourceCaches){const n=this._getSourceCache(t);n&&e.push(n.getSource())}return e}addLayer(t,n,i={}){this._checkLoaded();const r=t.id;if(this.getLayer(r))return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${r}" already exists on this map`)));let a;if("custom"===t.type){if(Zt(this,e.validateCustomStyleLayer(t)))return;a=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(r,t.source),t=e.clone$1(t),t=e.extend(t,{source:r})),this._validate(e.validateLayer,"layers."+r,t,{arrayIndex:-1},i))return;a=e.createStyleLayer(t),this._validateLayer(a),a.setEventedParent(this,{layer:{id:r}}),this._serializedLayers[a.id]=a.serialize(),this._updateLayerCount(a,!0)}const o=n?this._order.indexOf(n):this._order.length;if(n&&-1===o)return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`)));this._order.splice(o,0,r),this._layerOrderChanged=!0,this._layers[r]=a;const s=this._getLayerSourceCache(a);if(this._removedLayers[r]&&a.source&&s&&"custom"!==a.type){const e=this._removedLayers[r];delete this._removedLayers[r],e.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",s.pause())}this._updateLayer(a),a.onAdd&&a.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(t,n){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===n)return;const i=this._order.indexOf(t);this._order.splice(i,1);const r=n?this._order.indexOf(n):this._order.length;n&&-1===r?this.fire(new e.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`))):(this._order.splice(r,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(t){this._checkLoaded();const n=this._layers[t];if(!n)return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be removed.`)));n.setEventedParent(null),this._updateLayerCount(n,!1);const i=this._order.indexOf(t);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(e){return this._layers[e]}hasLayer(e){return e in this._layers}hasLayerType(e){for(const t in this._layers)if(this._layers[t].type===e)return!0;return!1}setLayerZoomRange(t,n,i){this._checkLoaded();const r=this.getLayer(t);r?r.minzoom===n&&r.maxzoom===i||(null!=n&&(r.minzoom=n),null!=i&&(r.maxzoom=i),this._updateLayer(r)):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(n,i,r={}){this._checkLoaded();const a=this.getLayer(n);if(a){if(!t(a.filter,i))return null==i?(a.filter=void 0,void this._updateLayer(a)):void(this._validate(e.validateFilter,`layers.${a.id}.filter`,i,{layerType:a.type},r)||(a.filter=e.clone$1(i),this._updateLayer(a)))}else this.fire(new e.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be filtered.`)))}getFilter(t){const n=this.getLayer(t);return n&&e.clone$1(n.filter)}setLayoutProperty(n,i,r,a={}){this._checkLoaded();const o=this.getLayer(n);o?t(o.getLayoutProperty(i),r)||(o.setLayoutProperty(i,r,a),this._updateLayer(o)):this.fire(new e.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(t,n){const i=this.getLayer(t);if(i)return i.getLayoutProperty(n);this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style.`)))}setPaintProperty(n,i,r,a={}){this._checkLoaded();const o=this.getLayer(n);o?t(o.getPaintProperty(i),r)||(o.setPaintProperty(i,r,a)&&this._updateLayer(o),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new e.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(e,t){const n=this.getLayer(e);return n&&n.getPaintProperty(t)}setFeatureState(t,n){this._checkLoaded();const i=t.source,r=t.sourceLayer,a=this.getSource(i);if(!a)return void this.fire(new e.ErrorEvent(new Error(`The source '${i}' does not exist in the map's style.`)));const o=a.type;if("geojson"===o&&r)return void this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===o&&!r)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));const s=this._getSourceCaches(i);for(const e of s)e.setFeatureState(r,t.id,n)}removeFeatureState(t,n){this._checkLoaded();const i=t.source,r=this.getSource(i);if(!r)return void this.fire(new e.ErrorEvent(new Error(`The source '${i}' does not exist in the map's style.`)));const a=r.type,o="vector"===a?t.sourceLayer:void 0;if("vector"===a&&!o)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(n&&"string"!=typeof t.id&&"number"!=typeof t.id)return void this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const s=this._getSourceCaches(i);for(const e of s)e.removeFeatureState(o,t.id,n)}getFeatureState(t){this._checkLoaded();const n=t.source,i=t.sourceLayer,r=this.getSource(n);if(r){if("vector"!==r.type||i)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(i,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t={};for(const e in this._sourceCaches){const n=this._sourceCaches[e].getSource();t[n.id]||(t[n.id]=n.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},e=>void 0!==e)}_updateLayer(e){this._updatedLayers[e.id]=!0;const t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0,e.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,n={},i=[];for(let r=this._order.length-1;r>=0;r--){const a=this._order[r];if(t(a)){n[a]=r;for(const t of e){const e=t[a];if(e)for(const t of e)i.push(t)}}}i.sort((e,t)=>t.intersectionZ-e.intersectionZ);const r=[];for(let a=this._order.length-1;a>=0;a--){const o=this._order[a];if(t(o))for(let e=i.length-1;e>=0;e--){const t=i[e].feature;if(n[t.layer.id]<a)break;r.push(t),i.pop()}else for(const t of e){const e=t[o];if(e)for(const t of e)r.push(t.feature)}}return r}queryRenderedFeatures(t,n,i){n&&n.filter&&this._validate(e.validateFilter,"queryRenderedFeatures.filter",n.filter,null,n);const r={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const t of n.layers){const n=this._layers[t];if(!n)return this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be queried for features.`))),[];r[n.source]=!0}}const a=[];n.availableImages=this._availableImages;const o=n&&n.layers?n.layers.some(e=>{const t=this.getLayer(e);return t&&t.is3D()}):this.has3DLayers(),s=I.createFromScreenPoints(t,i);for(const e in this._sourceCaches){const t=this._sourceCaches[e].getSource().id;n.layers&&!r[t]||a.push(Ae(this._sourceCaches[e],this._layers,this._serializedLayers,s,n,i,o,!!this.map._showQueryGeometry))}return this.placement&&a.push(function(e,t,n,i,r,a,o){const s={},l=a.queryRenderedSymbols(i),c=[];for(const e of Object.keys(l).map(Number))c.push(o[e]);c.sort(Le);for(const n of c){const i=n.featureIndex.lookupSymbolFeatures(l[n.bucketInstanceId],t,n.bucketIndex,n.sourceLayerIndex,r.filter,r.layers,r.availableImages,e);for(const e in i){const t=s[e]=s[e]||[],r=i[e];r.sort((e,t)=>{const i=n.featureSortOrder;if(i){const n=i.indexOf(e.featureIndex);return i.indexOf(t.featureIndex)-n}return t.featureIndex-e.featureIndex});for(const e of r)t.push(e)}}for(const t in s)s[t].forEach(i=>{const r=i.feature,a=n(e[t]);if(!a)return;const o=a.getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=o});return s}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),s.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(a)}querySourceFeatures(t,n){n&&n.filter&&this._validate(e.validateFilter,"querySourceFeatures.filter",n.filter,null,n);const i=this._getSourceCaches(t);let r=[];for(const e of i)r=r.concat(je(e,n));return r}addSourceType(e,t,n){return Qt.getSourceType(e)?n(new Error(`A source type called "${e}" already exists.`)):(Qt.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))}getLight(){return this.light.getLight()}setLight(e,n={}){this._checkLoaded();const i=this.light.getLight();let r=!1;for(const n in e)if(!t(e[n],i[n])){r=!0;break}if(!r)return;const a=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(e,n),this.light.updateTransitions(a)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(n,i=1){if(this._checkLoaded(),!n)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let r=n;if(1===i){if("object"==typeof r.source){const t="terrain-dem-src";this.addSource(t,r.source),r=e.clone$1(r),r=e.extend(r,{source:t})}if(this._validate(e.validateTerrain,"terrain",r))return}if(!this.terrain||this.terrain&&i!==this.terrain.drapeRenderMode){if(!r)return;this._createTerrain(r,i)}else{const n=this.terrain,i=n.get();for(const t of Object.keys(e.spec.terrain))!r.hasOwnProperty(t)&&e.spec.terrain[t].default&&(r[t]=e.spec.terrain[t].default);for(const e in r)if(!t(r[e],i[e])){n.set(r),this.stylesheet.terrain=r;const e=this._setTransitionParameters({duration:0});n.updateTransitions(e);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(e){const t=this.fog=new S(e,this.map.transform);this.stylesheet.fog=e;const n=this._setTransitionParameters({duration:0});t.updateTransitions(n)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const e of this.map._markers)e._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const n=this.fog,i=n.get();0===Object.keys(e).length&&n.set(e);for(const r in e)if(!t(e[r],i[r])){n.set(e),this.stylesheet.fog=e;const t=this._setTransitionParameters({duration:0});n.updateTransitions(t);break}}else this._createFog(e);this._markersNeedUpdate=!0}_setTransitionParameters(t){return{now:e.exported.now(),transition:e.extend(t,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const e=this._order.filter(e=>this.isLayerDraped(this._layers[e])),t=this._order.filter(e=>!this.isLayerDraped(this._layers[e]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...e),this._drapedFirstOrder.push(...t)}_createTerrain(e,t){const n=this.terrain=new O(e,t);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const i=this._setTransitionParameters({duration:0});n.updateTransitions(i)}_force3DLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}_forceSymbolLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"symbol"===t.type&&this._updateLayer(t)}}_validate(t,n,i,r,a={}){return(!a||!1!==a.validate)&&Zt(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:i,styleSpec:e.spec},r)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this._sourceCaches)this._sourceCaches[e].clearTiles(),this._sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(e){const t=this._getSourceCaches(e);for(const e of t)e.clearTiles()}_reloadSource(e){const t=this._getSourceCaches(e);for(const e of t)e.resume(),e.reload()}_reloadSources(){for(const e of this._getSources())e.reload&&e.reload()}_updateSources(e){for(const t in this._sourceCaches)this._sourceCaches[t].update(e)}_generateCollisionBoxes(){for(const e in this._sourceCaches){const t=this._sourceCaches[e];t.resume(),t.reload()}}_updatePlacement(t,n,i,r,a=!1){let o=!1,s=!1;const l={};for(const e of this._order){const n=this._layers[e];if("symbol"!==n.type)continue;if(!l[n.source]){const e=this._getLayerSourceCache(n);if(!e)continue;l[n.source]=e.getRenderableIds(!0).map(t=>e.getTileByID(t)).sort((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1))}const i=this.crossTileSymbolIndex.addLayer(n,l[n.source],t.center.lng,t.projection);o=o||i}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),a=a||this._layerOrderChanged||0===i,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(a||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new Ht(t,this._order,a,n,i,r,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,l),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),s=!0),o&&this.pauseablePlacement.placement.setStale()),s||o)for(const e of this._order){const t=this._layers[e];"symbol"===t.type&&this.placement.updateLayerOpacities(t,l[t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}_releaseSymbolFadeTiles(){for(const e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,t,n){this.imageManager.getImages(t.icons,n),this._updateTilesForChangedImages();const i=e=>{e&&e.setDependencies(t.tileID.key,t.type,t.icons)};i(this._otherSourceCaches[t.source]),i(this._symbolSourceCaches[t.source])}getGlyphs(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)}getResource(t,n,i){return e.makeRequest(n,i)}_getSourceCache(e){return this._otherSourceCaches[e]}_getLayerSourceCache(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}_getSourceCaches(e){const t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}_isSourceCacheLoaded(t){const n=this._getSourceCaches(t);return 0===n.length?(this.fire(new e.ErrorEvent(new Error(`There is no source with ID '${t}'`))),!1):n.every(e=>e.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Qt.getSourceType=function(e){return Pe[e]},Qt.setSourceType=function(e,t){Pe[e]=t},Qt.registerForPluginStateChange=e.registerForPluginStateChange;var en="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",tn="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",nn="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",rn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",an="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let on={},sn={};const ln=[];fn(en,ln),fn(nn,ln),fn(rn,ln),fn(an,ln),on=mn("",nn),sn=mn(an,rn);const cn=mn("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),un=en,dn="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var pn={background:mn("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:mn("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:mn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:mn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:mn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:mn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:mn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:mn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:mn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:mn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:mn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:mn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:mn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:mn("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:mn("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:mn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:mn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:mn("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:mn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:mn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:mn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:mn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:mn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:mn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:mn("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:mn("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",tn),skyboxGradient:mn("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",tn),skyboxCapture:mn("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:mn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:mn("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function fn(e,t){const n=e.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let e of n)if(e=e.trim(),"#"===e[0]&&e.includes("if")&&!e.includes("endif")){e=e.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const n=e.split(" ");for(const e of n)t.includes(e)||t.push(e)}}function mn(e,t){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,i=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),r={},a=[...ln];return fn(e,a),fn(t,a),{fragmentSource:e=e.replace(n,(e,t,n,i,a)=>(r[a]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${a}\nvarying ${n} ${i} ${a};\n#else\nuniform ${n} ${i} u_${a};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${a}\n    ${n} ${i} ${a} = u_${a};\n#endif\n`)),vertexSource:t=t.replace(n,(e,t,n,i,a)=>{const o="float"===i?"vec2":"vec4",s=a.match(/color/)?"color":o;return r[a]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${a}\nuniform lowp float u_${a}_t;\nattribute ${n} ${o} a_${a};\nvarying ${n} ${i} ${a};\n#else\nuniform ${n} ${i} u_${a};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${a}\n    ${a} = a_${a};\n#else\n    ${n} ${i} ${a} = u_${a};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${a}\n    ${a} = unpack_mix_${s}(a_${a}, u_${a}_t);\n#else\n    ${n} ${i} ${a} = u_${a};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${a}\nuniform lowp float u_${a}_t;\nattribute ${n} ${o} a_${a};\n#else\nuniform ${n} ${i} u_${a};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${a}\n    ${n} ${i} ${a} = a_${a};\n#else\n    ${n} ${i} ${a} = u_${a};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${a}\n    ${n} ${i} ${a} = unpack_mix_${s}(a_${a}, u_${a}_t);\n#else\n    ${n} ${i} ${a} = u_${a};\n#endif\n`}),staticAttributes:i,usedDefines:a}}class hn{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(e,t,n,i,r,a,o){this.context=e;let s=this.boundPaintVertexBuffers.length!==i.length;for(let e=0;!s&&e<i.length;e++)this.boundPaintVertexBuffers[e]!==i[e]&&(s=!0);let l=this.boundDynamicVertexBuffers.length!==o.length;for(let e=0;!l&&e<o.length;e++)this.boundDynamicVertexBuffers[e]!==o[e]&&(l=!0);if(!e.extVertexArrayObject||!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||s||l||this.boundIndexBuffer!==r||this.boundVertexOffset!==a)this.freshBind(t,n,i,r,a,o);else{e.bindVertexArrayOES.set(this.vao);for(const e of o)e&&e.bind();r&&r.dynamicDraw&&r.bind()}}freshBind(e,t,n,i,r,a){let o;const s=e.numAttributes,l=this.context,c=l.gl;if(l.extVertexArrayObject)this.vao&&this.destroy(),this.vao=l.extVertexArrayObject.createVertexArrayOES(),l.bindVertexArrayOES.set(this.vao),o=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=i,this.boundVertexOffset=r,this.boundDynamicVertexBuffers=a;else{o=l.currentNumAttributes||0;for(let e=s;e<o;e++)c.disableVertexAttribArray(e)}t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,r);for(const t of n)t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,r);for(const t of a)t&&(t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,r));i&&i.bind(),l.currentNumAttributes=s}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function gn(t,n){const i=Math.pow(2,n.canonical.z),r=n.canonical.y;return[new e.MercatorCoordinate(0,r/i).toLngLat().lat,new e.MercatorCoordinate(0,(r+1)/i).toLngLat().lat]}function yn(t,n,i,r,a,o,s){const l=t.context,c=l.gl,u=i.fbo;if(!u)return;t.prepareDrawTile();const d=t.useProgram("hillshade");l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get());const p=((e,t,n,i)=>{const r=n.paint.get("hillshade-shadow-color"),a=n.paint.get("hillshade-highlight-color"),o=n.paint.get("hillshade-accent-color");let s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);const l=!e.options.moving;return{u_matrix:i||e.transform.calculateProjMatrix(t.tileID.toUnwrapped(),l),u_image:0,u_latrange:gn(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:r,u_highlight:a,u_accent:o}})(t,i,r,t.terrain?n.projMatrix:null);t.prepareDrawProgram(l,d,n.toUnwrapped());const{tileBoundsBuffer:f,tileBoundsIndexBuffer:m,tileBoundsSegments:h}=t.getTileBoundsBuffers(i);d.draw(l,c.TRIANGLES,a,o,s,e.CullFaceMode.disabled,p,r.id,f,m,h)}function vn(t,n,i){if(!n.needsDEMTextureUpload)return;const r=t.context,a=r.gl;r.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(i.stride);const o=i.getPixels();n.demTexture?n.demTexture.update(o,{premultiply:!1}):n.demTexture=new e.Texture(r,o,a.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}function bn(t,n,i,r,a,o){const s=t.context,l=s.gl;if(!n.dem)return;const c=n.dem;if(s.activeTexture.set(l.TEXTURE1),vn(t,n,c),!n.demTexture)return;n.demTexture.bind(l.NEAREST,l.CLAMP_TO_EDGE);const u=c.dim;s.activeTexture.set(l.TEXTURE0);let d=n.fbo;if(!d){const t=new e.Texture(s,{width:u,height:u,data:null},l.RGBA);t.bind(l.LINEAR,l.CLAMP_TO_EDGE),d=n.fbo=s.createFramebuffer(u,u,!0),d.colorAttachment.set(t.texture)}s.bindFramebuffer.set(d.framebuffer),s.viewport.set([0,0,u,u]);const{tileBoundsBuffer:p,tileBoundsIndexBuffer:f,tileBoundsSegments:m}=t.getMercatorTileBoundsBuffers();t.useProgram("hillshadePrepare").draw(s,l.TRIANGLES,r,a,o,e.CullFaceMode.disabled,((t,n)=>{const i=n.stride,r=e.create();return e.ortho(r,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(r,r,[0,-e.EXTENT,0]),{u_matrix:r,u_image:1,u_dimension:[i,i],u_zoom:t.overscaledZ,u_unpack:n.unpackVector}})(n.tileID,c),i.id,p,f,m),n.needsHillshadePrepare=!1}const _n=t=>({u_matrix:new e.UniformMatrix4f(t),u_image0:new e.Uniform1i(t),u_skirt_height:new e.Uniform1f(t)}),wn=(e,t)=>({u_matrix:e,u_image0:0,u_skirt_height:t}),xn=(e,t,n,i,r,a,o,s,l,c,u,d,p,f,m)=>({u_proj_matrix:Float32Array.from(e),u_globe_matrix:t,u_normalize_matrix:Float32Array.from(i),u_merc_matrix:n,u_zoom_transition:r,u_merc_center:a,u_image0:0,u_frustum_tl:o,u_frustum_tr:s,u_frustum_br:l,u_frustum_bl:c,u_globe_pos:u,u_globe_radius:d,u_viewport:p,u_grid_matrix:m?Float32Array.from(m):new Float32Array(9),u_skirt_height:f});function kn(e,t){return null!=e&&null!=t&&!(!e.hasData()||!t.hasData())&&null!=e.demTexture&&null!=t.demTexture&&e.tileID.key!==t.tileID.key}const On=new class{constructor(){this.operations={}}newMorphing(e,t,n,i,r){if(e in this.operations){const t=this.operations[e];t.to.tileID.key!==n.tileID.key&&(t.queued=n)}else this.operations[e]={startTime:i,phase:0,duration:r,from:t,to:n,queued:null}}getMorphValuesForProxy(e){if(!(e in this.operations))return null;const t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}update(e){for(const t in this.operations){const n=this.operations[t];for(n.phase=(e-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,e)){delete this.operations[t];break}}}_nextOp(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}_validOp(e){return e.from.hasData()&&e.to.hasData()}},En={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Tn(e){return 6*Math.pow(1.5,22-e)}function Cn(e,t){const n=1<<e.z;return!t&&(0===e.x||e.x===n-1)||0===e.y||e.y===n-1}const Sn=e=>({u_matrix:e});function Pn(t,n,i,r,a){if(a>0){const o=e.exported.now(),s=(o-t.timeAdded)/a,l=n?(o-n.timeAdded)/a:-1,c=i.getSource(),u=r.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),d=!n||Math.abs(n.tileID.overscaledZ-u)>Math.abs(t.tileID.overscaledZ-u),p=d&&t.refreshedUponExpiration?1:e.clamp(d?s:1-l,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}class Mn extends e.SourceCache{constructor(e){const t={type:"raster-dem",maxzoom:e.transform.maxZoom},n=new P(ze(),null),i=Me("mock-dem",t,n,e.style);super("mock-dem",i,!1),i.setEventedParent(this),this._sourceLoaded=!0}_loadTile(e,t){e.state="loaded",t(null)}}class In extends e.SourceCache{constructor(e){const t=Me("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new P(ze(),null),e.style);super("proxy",t,!1),t.setEventedParent(this),this.map=this.getSource().map=e,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(t,n,i){if(t.freezeTileCoverage)return;this.transform=t;const r=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((n,i)=>{if(n[i.key]="",!this._tiles[i.key]){const n=new e.Tile(i,this._source.tileSize*i.overscaleFactor(),t.tileZoom);n.state="loaded",this._tiles[i.key]=n}return n},{});for(const e in this._tiles)e in r||(this.freeFBO(e),this._tiles[e].unloadVectorData(),delete this._tiles[e])}freeFBO(e){const t=this.proxyCachedFBO[e];if(void 0!==t){const n=Object.values(t);this.renderCachePool.push(...n),delete this.proxyCachedFBO[e]}}deallocRenderCache(){this.renderCache.forEach(e=>e.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class An extends e.OverscaledTileID{constructor(e,t,n){super(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y),this.proxyTileKey=t,this.projMatrix=n}}class jn extends e.Elevation{constructor(t,n){super(),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[i,r,a]=function(t){const n=new e.StructArrayLayout2i4,i=new e.StructArrayLayout3ui6,r=131;n.reserve(17161),i.reserve(33800);const a=e.EXTENT/128,o=e.EXTENT+a/2,s=o+a;for(let t=-a;t<s;t+=a)for(let i=-a;i<s;i+=a){const r=i<0||i>o||t<0||t>o?24575:0,a=e.clamp(Math.round(i),0,e.EXTENT),s=e.clamp(Math.round(t),0,e.EXTENT);n.emplaceBack(a+r,s)}const l=(e,t)=>{const n=t*r+e;i.emplaceBack(n+1,n,n+r),i.emplaceBack(n+r,n+r+1,n+1)};for(let e=1;e<129;e++)for(let t=1;t<129;t++)l(t,e);return[0,129].forEach(e=>{for(let t=0;t<130;t++)l(t,e),l(e,t)}),[n,i,32768]}(),o=t.context;this.gridBuffer=o.createVertexBuffer(i,e.posAttributes.members),this.gridIndexBuffer=o.createIndexBuffer(r),this.gridSegments=e.SegmentVector.simpleSegment(0,0,i.length,r.length),this.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,i.length,a),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new In(n.map),this.orthoMatrix=e.create(),e.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,e.EXTENT,0,e.EXTENT,0,1);const s=o.gl;this._overlapStencilMode=new e.StencilMode({func:s.GEQUAL,mask:255},0,255,s.KEEP,s.KEEP,s.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=n,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Mn(n.map)}set style(e){e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(t,n,i){if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;const r=t.terrain.properties;this.sourceCache=0===t.terrain.drapeRenderMode?this._mockSourceCache:t._getSourceCache(r.get("source")),this._exaggeration=r.get("exaggeration");const a=()=>{this.sourceCache.used&&e.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const t=this.getScaledDemTileSize();this.sourceCache.update(n,t,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,a(),this._initializing=!0),a(),n.updateElevation(!0,i),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(e){this._findCoveringTileCache[e]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce(`Terrain render cache efficiency is not optimal (${t.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${t.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(e=>e.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}set useVertexMorphing(e){this._useVertexMorphing=e}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const n=this.proxySourceCache,i=this.painter.transform;this._initializing&&(this._initializing=0===i._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(i.center),-1),this._emptyDEMTextureDirty=!this._initializing);const r=this.proxyCoords=n.getIds().map(e=>{const t=n.getTileByID(e).tileID;return t.projMatrix=i.calculateProjMatrix(t.toUnwrapped()),t});!function(t,n){const i=n.transform.pointCoordinate(n.transform.getCameraPoint()),r=new e.Point(i.x,i.y);t.sort((t,n)=>{if(n.overscaledZ-t.overscaledZ)return n.overscaledZ-t.overscaledZ;const i=new e.Point(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),a=new e.Point(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),o=r.mult(1<<t.canonical.z);return o.x-=.5,o.y-=.5,o.distSqr(i)-o.distSqr(a)})}(r,this.painter),this._previousZoom=i.zoom;const a=this.proxyToSource||{};this.proxyToSource={},r.forEach(e=>{this.proxyToSource[e.key]={}}),this.terrainTileForTile={};const o=this._style._sourceCaches;for(const e in o){const n=o[e];if(!n.used)continue;if(n!==this.sourceCache&&this.resetTileLookupCache(n.id),this._setupProxiedCoordsForOrtho(n,t[e],a),n.usedForTerrain)continue;const i=t[e];n.getSource().reparseOverscaled&&this._assignTerrainTiles(i)}this.proxiedCoords[n.id]=r.map(e=>new An(e,e.key,this.orthoMatrix)),this._assignTerrainTiles(r),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(a),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();const s={};this._visibleDemTiles=[];for(const e of this.proxyCoords){const t=this.terrainTileForTile[e.key];if(!t)continue;const n=t.tileID.key;n in s||(this._visibleDemTiles.push(t),s[n]=n)}}_assignTerrainTiles(e){this._initializing||e.forEach(e=>{if(this.terrainTileForTile[e.key])return;const t=this._findTileCoveringTileID(e,this.sourceCache);t&&(this.terrainTileForTile[e.key]=t)})}_prepareDEMTextures(){const e=this.painter.context,t=e.gl;for(const n in this.terrainTileForTile){const i=this.terrainTileForTile[n],r=i.dem;!r||i.demTexture&&!i.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),vn(this.painter,i,r))}}_prepareDemTileUniforms(e,t,n,i){if(!t||null==t.demTexture)return!1;const r=e.tileID.canonical,a=Math.pow(2,t.tileID.canonical.z-r.z),o=i||"";return n["u_dem_tl"+o]=[r.x*a%1,r.y*a%1],n["u_dem_scale"+o]=a,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const t=this.painter.context,n=t.gl;if(!this._emptyDepthBufferTexture){const i=new e.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new e.Texture(t,i,n.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let e=0;const t=this._visibleDemTiles.reduce((t,n)=>{if(!n.dem)return t;const i=n.dem.tree.minimums[0];return i>0&&e++,t+i},0);return e?t/e:0}_updateEmptyDEMTexture(){const t=this.painter.context,n=t.gl;t.activeTexture.set(n.TEXTURE2);const i=this._getLoadedAreaMinimum(),r=new e.RGBAImage({width:1,height:1},new Uint8Array(e.DEMData.pack(i,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let a=this._emptyDEMTexture;return a?a.update(r,{premultiply:!1}):a=this._emptyDEMTexture=new e.Texture(t,r,n.RGBA,{premultiply:!1}),a}setupElevationDraw(t,n,i){const r=this.painter.context,a=r.gl,o=(s=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(s),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var s;o.u_dem_size=this.sourceCache.getSource().tileSize,o.u_exaggeration=this.exaggeration();let l=null,c=null,u=1;if(i&&i.morphing&&this._useVertexMorphing){const e=i.morphing.srcDemTile,n=i.morphing.dstDemTile;u=i.morphing.phase,e&&n&&(this._prepareDemTileUniforms(t,e,o,"_prev")&&(c=e),this._prepareDemTileUniforms(t,n,o)&&(l=n))}if(c&&l?(r.activeTexture.set(a.TEXTURE2),l.demTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST),r.activeTexture.set(a.TEXTURE4),c.demTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE,a.NEAREST),o.u_dem_lerp=u):(l=this.terrainTileForTile[t.tileID.key],r.activeTexture.set(a.TEXTURE2),(this._prepareDemTileUniforms(t,l,o)?l.demTexture:this.emptyDEMTexture).bind(a.NEAREST,a.CLAMP_TO_EDGE)),r.activeTexture.set(a.TEXTURE3),i&&i.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE),this._depthFBO&&(o.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(a.NEAREST,a.CLAMP_TO_EDGE),o.u_depth_size_inv=[1,1]),i&&i.useMeterToDem&&l){const t=(1<<l.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;o.u_meter_to_dem=t}if(i&&i.labelPlaneMatrixInv&&(o.u_label_plane_matrix_inv=i.labelPlaneMatrixInv),n.setTerrainUniformValues(r,o),"globe"===this.painter.transform.projection.name){const e=this.globeUniformValues(this.painter.transform,t.tileID.canonical,i&&i.useDenormalizedUpVectorScale);n.setGlobeUniformValues(r,e)}}globeUniformValues(t,n,i){const r=t.projection;return{u_tile_tl_up:r.upVector(n,0,0),u_tile_tr_up:r.upVector(n,e.EXTENT,0),u_tile_br_up:r.upVector(n,e.EXTENT,e.EXTENT),u_tile_bl_up:r.upVector(n,0,e.EXTENT),u_tile_up_scale:i?e.globeMetersToEcef(1):r.upVectorScale(n,t.center.lat,t.worldSize).metersToTile}}renderToBackBuffer(t){const n=this.painter,i=this.painter.context;0!==t.length&&(i.bindFramebuffer.set(null),i.viewport.set([0,0,n.width,n.height]),n.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(t,n,i,r,a){if("globe"===t.transform.projection.name)!function(t,n,i,r,a){const o=t.context,s=o.gl;let l,c;const u=t.options.showTerrainWireframe?2:0,d=t.transform,p=e.globeUseCustomAntiAliasing(t,o,d),f=(e,n)=>{if(c===e)return;const i=[En[e],"PROJECTION_GLOBE_VIEW"];p&&i.push("CUSTOM_ANTIALIASING"),n&&i.push(En[u]),l=t.useProgram("globeRaster",null,i),c=e},m=t.colorModeForRenderPass(),h=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);On.update(a);const g=e.calculateGlobeMercatorMatrix(d),y=[e.mercatorXfromLng(d.center.lng),e.mercatorYfromLat(d.center.lat)],v=u?[!1,!0]:[!1],b=t.globeSharedBuffers,_=[d.width*e.exported.devicePixelRatio,d.height*e.exported.devicePixelRatio],w=Float32Array.from(d.globeMatrix),x={useDenormalizedUpVectorScale:!0};if(v.forEach(u=>{const d=t.transform,p=Tn(d.zoom)*n.exaggeration();c=-1;const v=u?s.LINES:s.TRIANGLES;for(const c of r){const r=i.getTile(c),k=e.StencilMode.disabled,O=n.prevTerrainTileForTile[c.key],E=n.terrainTileForTile[c.key];kn(O,E)&&On.newMorphing(c.key,O,E,a,250),o.activeTexture.set(s.TEXTURE0),r.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);const T=On.getMorphValuesForProxy(c.key),C=T?1:0;T&&e.extend$1(x,{morphing:{srcDemTile:T.from,dstDemTile:T.to,phase:e.easeCubicInOut(T.phase)}});const S=e.tileCornersToBounds(c.canonical),P=e.getLatitudinalLod(S.getCenter().lat),M=e.getGridMatrix(c.canonical,S,P,d.worldSize/d._pixelsPerMercatorPixel),I=e.globeNormalizeECEF(e.globeTileBounds(c.canonical)),A=xn(d.projMatrix,w,g,I,e.globeToMercatorTransition(d.zoom),y,d.frustumCorners.TL,d.frustumCorners.TR,d.frustumCorners.BR,d.frustumCorners.BL,d.globeCenterInViewSpace,d.globeRadius,_,p,M);if(f(C,u),n.setupElevationDraw(r,l,x),t.prepareDrawProgram(o,l,c.toUnwrapped()),b){const[n,i,r]=u?b.getWirefameBuffers(t.context,P):b.getGridBuffers(P,0!==p);l.draw(o,v,h,k,m,e.CullFaceMode.backCCW,A,"globe_raster",n,i,r)}}}),b){const a=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];p&&a.push("CUSTOM_ANTIALIASING"),l=t.useProgram("globeRaster",null,a);for(const a of r){const{x:r,y:c,z:u}=a.canonical,p=0===c,f=c===(1<<u)-1,[g,v,w,k]=b.getPoleBuffers(u);if(k&&(p||f)){const c=i.getTile(a);o.activeTexture.set(s.TEXTURE0),c.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);let b=e.globePoleMatrixForTile(u,r,d);const O=e.globeNormalizeECEF(e.globeTileBounds(a.canonical)),E=(t,n)=>t.draw(o,s.TRIANGLES,h,e.StencilMode.disabled,m,e.CullFaceMode.disabled,xn(d.projMatrix,b,b,O,0,y,d.frustumCorners.TL,d.frustumCorners.TR,d.frustumCorners.BR,d.frustumCorners.BL,d.globeCenterInViewSpace,d.globeRadius,_,0),"globe_pole_raster",n,w,k);n.setupElevationDraw(c,l,x),t.prepareDrawProgram(o,l,a.toUnwrapped()),p&&E(l,g),f&&(b=e.scale(e.create(),b,[1,-1,1]),E(l,v))}}}}(t,n,i,r,a);else{const o=t.context,s=o.gl;let l,c;const u=t.options.showTerrainWireframe?2:0,d=(e,n)=>{if(c===e)return;const i=[En[e]];n&&i.push(En[u]),l=t.useProgram("terrainRaster",null,i),c=e},p=t.colorModeForRenderPass(),f=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);On.update(a);const m=t.transform,h=Tn(m.zoom)*n.exaggeration();(u?[!1,!0]:[!1]).forEach(u=>{c=-1;const g=u?s.LINES:s.TRIANGLES,[y,v]=u?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments];for(const c of r){const r=i.getTile(c),b=e.StencilMode.disabled,_=n.prevTerrainTileForTile[c.key],w=n.terrainTileForTile[c.key];kn(_,w)&&On.newMorphing(c.key,_,w,a,250),o.activeTexture.set(s.TEXTURE0),r.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST);const x=On.getMorphValuesForProxy(c.key),k=x?1:0;let O;x&&(O={morphing:{srcDemTile:x.from,dstDemTile:x.to,phase:e.easeCubicInOut(x.phase)}});const E=wn(c.projMatrix,Cn(c.canonical,m.renderWorldCopies)?h/10:h);d(k,u),n.setupElevationDraw(r,l,O),t.prepareDrawProgram(o,l,c.toUnwrapped()),l.draw(o,g,f,b,p,e.CullFaceMode.backCCW,E,"terrain_raster",n.gridBuffer,y,v)}})}}(n,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,n.gpuTimingDeferredRenderEnd(),t.splice(0,t.length))}renderBatch(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;const n=this.painter,i=this.painter.context,r=this.proxySourceCache,a=this.proxiedCoords[r.id],o=this._drapedRenderBatches.shift(),s=[],l=n.style.order;let c=0;for(const u of a){const a=r.getTileByID(u.proxyTileKey),d=r.proxyCachedFBO[u.key]?r.proxyCachedFBO[u.key][t]:void 0,p=void 0!==d?r.renderCache[d]:this.pool[c++],f=void 0!==d;if(a.texture=p.tex,f&&!p.dirty){s.push(a.tileID);continue}let m;i.bindFramebuffer.set(p.fb.framebuffer),this.renderedToTile=!1,p.dirty&&(i.clear({color:e.Color.transparent,stencil:0}),p.dirty=!1);for(let e=o.start;e<=o.end;++e){const t=n.style._layers[l[e]];if(t.isHidden(n.transform.zoom))continue;const r=n.style._getLayerSourceCache(t),a=r?this.proxyToSource[u.key][r.id]:[u];if(!a)continue;const o=a;i.viewport.set([0,0,p.fb.width,p.fb.height]),m!==(r?r.id:null)&&(this._setupStencil(p,a,t,r),m=r?r.id:null),n.renderLayer(n,r,t,o)}this.renderedToTile?(p.dirty=!0,s.push(a.tileID)):f||--c,5===c&&(c=0,this.renderToBackBuffer(s))}return this.renderToBackBuffer(s),this.renderingToTexture=!1,i.bindFramebuffer.set(null),i.viewport.set([0,0,n.width,n.height]),o.end+1}postRender(){}renderCacheEfficiency(e){const t=e.order.length;if(0===t)return{efficiency:100};let n,i=0,r=0,a=!1;for(let o=0;o<t;++o){const t=e._layers[e.order[o]];this._style.isLayerDraped(t)?(a&&++i,++r):a||(a=!0,n=t.id)}return 0===r?{efficiency:100}:{efficiency:100*(1-i/r),firstUndrapedLayer:n}}getMinElevationBelowMSL(){let e=0;return this._visibleDemTiles.filter(e=>e.dem).forEach(t=>{e=Math.min(e,t.dem.tree.minimums[0])}),0===e?e:(e-30)*this._exaggeration}raycast(e,t,n){if(!this._visibleDemTiles)return null;const i=this._visibleDemTiles.filter(e=>e.dem).map(i=>{const r=i.tileID,a=1<<r.overscaledZ,{x:o,y:s}=r.canonical,l=o/a,c=(o+1)/a,u=s/a,d=(s+1)/a;return{minx:l,miny:u,maxx:c,maxy:d,t:i.dem.tree.raycastRoot(l,u,c,d,e,t,n),tile:i}});i.sort((e,t)=>(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE));for(const r of i){if(null==r.t)return null;const i=r.tile.dem.tree.raycast(r.minx,r.miny,r.maxx,r.maxy,e,t,n);if(null!=i)return i}return null}_createFBO(){const t=this.painter.context,n=t.gl,i=this.drapeBufferSize;t.activeTexture.set(n.TEXTURE0);const r=new e.Texture(t,{width:i[0],height:i[1],data:null},n.RGBA);r.bind(n.LINEAR,n.CLAMP_TO_EDGE);const a=t.createFramebuffer(i[0],i[1],!1);return a.colorAttachment.set(r.texture),a.depthAttachment=new xe(t,a.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,i[0],i[1]),this._stencilRef=0,a.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):a.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:a,tex:r,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e].hasTransition())return!0;return this._style.order.some(e=>{const t=this._style._layers[e],n=t.isHidden(this.painter.transform.zoom);return"custom"===t.type?!n&&t.shouldRedrape():!n&&t.hasTransition()})}_clearLineLayersFromRenderCache(){let t=!1;for(const e of this._style._getSources())if(e instanceof Ee){t=!0;break}if(!t)return;const n={};for(let t=0;t<this._style.order.length;++t){const i=this._style._layers[this._style.order[t]],r=this._style._getLayerSourceCache(i);if(r&&!n[r.id]&&!i.isHidden(this.painter.transform.zoom)&&"line"===i.type&&i.widthExpression()instanceof e.ZoomDependentExpression){n[r.id]=!0;for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][r.id];if(t)for(const e of t)this._clearRenderCacheForTile(r.id,e)}}}}_clearRasterLayersFromRenderCache(){let e=!1;for(const t in this._style._sourceCaches)if(this._style._sourceCaches[t]._source instanceof Te){e=!0;break}if(!e)return;const t={};for(let e=0;e<this._style.order.length;++e){const n=this._style._layers[this._style.order[e]],i=this._style._getLayerSourceCache(n);if(!i||t[i.id])continue;if(n.isHidden(this.painter.transform.zoom)||"raster"!==n.type)continue;const r=n.paint.get("raster-fade-duration");for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][i.id];if(t)for(const e of t){const t=Pn(i.getTile(e),i.findLoadedParent(e,0),i,this.painter.transform,r);(1!==t.opacity||0!==t.mix)&&this._clearRenderCacheForTile(i.id,e)}}}}_setupDrapedRenderBatches(){const e=this._style.order,t=e.length;if(0===t)return;const n=[];let i,r=0,a=this._style._layers[e[r]];for(;!this._style.isLayerDraped(a)&&a.isHidden(this.painter.transform.zoom)&&++r<t;)a=this._style._layers[e[r]];for(;r<t;++r){const t=this._style._layers[e[r]];t.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(t)?void 0===i&&(i=r):void 0!==i&&(n.push({start:i,end:r-1}),i=void 0))}void 0!==i&&n.push({start:i,end:r-1}),this._drapedRenderBatches=n}_setupRenderCache(e){const t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){const e=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(let n=0;n<e.length;++n){const i=Object.values(e[n]);t.renderCachePool.push(...i)}}return}this._clearRasterLayersFromRenderCache();const n=this.proxyCoords,i=this._tilesDirty;for(let r=n.length-1;r>=0;r--){const a=n[r];if(t.getTileByID(a.key),void 0!==t.proxyCachedFBO[a.key]){const n=e[a.key],r=this.proxyToSource[a.key];let o=0;for(const e in r){const t=r[e],a=n[e];if(!a||a.length!==t.length||t.some((t,n)=>t!==a[n]||i[e]&&i[e].hasOwnProperty(t.key))){o=-1;break}++o}for(const e in t.proxyCachedFBO[a.key])t.renderCache[t.proxyCachedFBO[a.key][e]].dirty=o<0||o!==Object.values(n).length}}const r=[...this._drapedRenderBatches];r.sort((e,t)=>t.end-t.start-(e.end-e.start));for(const e of r)for(const i of n){if(t.proxyCachedFBO[i.key])continue;let n=t.renderCachePool.pop();void 0===n&&t.renderCache.length<50&&(n=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==n&&(t.proxyCachedFBO[i.key]={},t.proxyCachedFBO[i.key][e.start]=n,t.renderCache[n].dirty=!0)}this._tilesDirty={}}_setupStencil(e,t,n,i){if(!i||!this._sourceTilesOverlap[i.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const r=this.painter.context,a=r.gl;if(t.length<=1)return void(this._overlapStencilType=!1);let o;if(n.isTileClipped())o=t.length,this._overlapStencilMode.test={func:a.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);o=1,this._overlapStencilMode.test={func:a.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+o>255&&(r.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=o,this._overlapStencilMode.ref=this._stencilRef,n.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}_renderTileClippingMasks(t,n){const i=this.painter,r=this.painter.context,a=r.gl;i._tileClippingMaskIDs={},r.setColorMode(e.ColorMode.disabled),r.setDepthMode(e.DepthMode.disabled);const o=i.useProgram("clippingMask");for(const s of t){const t=i._tileClippingMaskIDs[s.key]=--n;o.draw(r,a.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:a.ALWAYS,mask:0},t,255,a.KEEP,a.KEEP,a.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Sn(s.projMatrix),"$clipping",i.tileExtentBuffer,i.quadTriangleIndexBuffer,i.tileExtentSegments)}}pointCoordinate(t){const n=this.painter.transform;if(t.x<0||t.x>n.width||t.y<0||t.y>n.height)return null;const i=[t.x,t.y,1,1];e.transformMat4$1(i,i,n.pixelMatrixInverse),e.scale$1(i,i,1/i[3]),i[0]/=n.worldSize,i[1]/=n.worldSize;const r=n._camera.position,a=e.mercatorZfromAltitude(1,n.center.lat),o=[r[0],r[1],r[2]/a,0],s=e.subtract([],i.slice(0,3),o);e.normalize(s,s);const l=this.raycast(o,s,this._exaggeration);return null!==l&&l?(e.scaleAndAdd(o,o,s,l),o[3]=o[2],o[2]*=a,o):null}drawDepth(){const t=this.painter,n=t.context,i=this.proxySourceCache,r=Math.ceil(t.width),a=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===r&&this._depthFBO.height===a||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const t=n.gl,i=n.createFramebuffer(r,a,!0);n.activeTexture.set(t.TEXTURE0);const o=new e.Texture(n,{width:r,height:a,data:null},t.RGBA);o.bind(t.NEAREST,t.CLAMP_TO_EDGE),i.colorAttachment.set(o.texture);const s=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,r,a);i.depthAttachment.set(s),this._depthFBO=i,this._depthTexture=o}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,r,a]),function(t,n,i,r){if("globe"===t.transform.projection.name)return;const a=t.context,o=a.gl;a.clear({depth:1});const s=t.useProgram("terrainDepth"),l=new e.DepthMode(o.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D);for(const t of r){const r=i.getTile(t),c=wn(t.projMatrix,0);n.setupElevationDraw(r,s),s.draw(a,o.TRIANGLES,l,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,c,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}(t,this,i,this.proxyCoords)}_setupProxiedCoordsForOrtho(e,t,n){if(e.getSource()instanceof Se)return this._setupProxiedCoordsForImageSource(e,t,n);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};const i=this.proxiedCoords[e.id]=[],r=this.proxyCoords;for(let t=0;t<r.length;t++){const a=r[t],o=this._findTileCoveringTileID(a,e);if(o){const t=this._createProxiedId(a,o,n[a.key]&&n[a.key][e.id]);i.push(t),this.proxyToSource[a.key][e.id]=[t]}}let a=!1;for(let r=0;r<t.length;r++){const o=e.getTile(t[r]);if(!o||!o.hasData())continue;const s=this._findTileCoveringTileID(o.tileID,this.proxySourceCache);if(s&&s.tileID.canonical.z!==o.tileID.canonical.z){const t=this.proxyToSource[s.tileID.key][e.id],r=this._createProxiedId(s.tileID,o,n[s.tileID.key]&&n[s.tileID.key][e.id]);t?t.splice(t.length-1,0,r):this.proxyToSource[s.tileID.key][e.id]=[r],i.push(r),a=!0}}this._sourceTilesOverlap[e.id]=a}_setupProxiedCoordsForImageSource(t,n,i){if(!t.getSource().loaded())return;const r=this.proxiedCoords[t.id]=[],a=this.proxyCoords,o=t.getSource(),s=new e.Point(o.tileID.x,o.tileID.y)._div(1<<o.tileID.z),l=o.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce((e,t)=>(e.min.x=Math.min(e.min.x,t.x-s.x),e.min.y=Math.min(e.min.y,t.y-s.y),e.max.x=Math.max(e.max.x,t.x-s.x),e.max.y=Math.max(e.max.y,t.y-s.y),e),{min:new e.Point(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.Point(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(t,n)=>{const i=t.wrap+t.canonical.x/(1<<t.canonical.z),r=t.canonical.y/(1<<t.canonical.z),a=e.EXTENT/(1<<t.canonical.z),o=n.wrap+n.canonical.x/(1<<n.canonical.z),s=n.canonical.y/(1<<n.canonical.z);return i+a<o+l.min.x||i>o+l.max.x||r+a<s+l.min.y||r>s+l.max.y};for(let e=0;e<a.length;e++){const o=a[e];for(let e=0;e<n.length;e++){const a=t.getTile(n[e]);if(!a||!a.hasData())continue;if(c(o,a.tileID))continue;const s=this._createProxiedId(o,a,i[o.key]&&i[o.key][t.id]),l=this.proxyToSource[o.key][t.id];l?l.push(s):this.proxyToSource[o.key][t.id]=[s],r.push(s)}}}_createProxiedId(t,n,i){let r=this.orthoMatrix;if(i){const e=i.find(e=>e.key===n.tileID.key);if(e)return e}if(n.tileID.key!==t.key){const i=t.canonical.z-n.tileID.canonical.z;let a,o,s;r=e.create();const l=n.tileID.wrap-t.wrap<<t.overscaledZ;i>0?(a=e.EXTENT>>i,o=a*((n.tileID.canonical.x<<i)-t.canonical.x+l),s=a*((n.tileID.canonical.y<<i)-t.canonical.y)):(a=e.EXTENT<<-i,o=e.EXTENT*(n.tileID.canonical.x-(t.canonical.x+l<<-i)),s=e.EXTENT*(n.tileID.canonical.y-(t.canonical.y<<-i))),e.ortho(r,0,a,0,a,0,1),e.translate(r,r,[o,s,0])}return new An(n.tileID,t.key,r)}_findTileCoveringTileID(t,n){let i=n.getTile(t);if(i&&i.hasData())return i;const r=this._findCoveringTileCache[n.id],a=r[t.key];if(i=a?n.getTileByID(a):null,i&&i.hasData()||null===a)return i;let o=i?i.tileID:t,s=o.overscaledZ;const l=n.getSource().minzoom,c=[];if(!a){const r=n.getSource().maxzoom;if(t.canonical.z>=r){const i=t.canonical.z-r;n.getSource().reparseOverscaled?(s=Math.max(t.canonical.z+2,n.transform.tileZoom),o=new e.OverscaledTileID(s,t.wrap,r,t.canonical.x>>i,t.canonical.y>>i)):0!==i&&(s=r,o=new e.OverscaledTileID(s,t.wrap,r,t.canonical.x>>i,t.canonical.y>>i))}o.key!==t.key&&(c.push(o.key),i=n.getTile(o))}const u=e=>{c.forEach(t=>{r[t]=e}),c.length=0};for(s-=1;s>=l&&(!i||!i.hasData());s--){i&&u(i.tileID.key);const e=o.calculateScaledKey(s);if(i=n.getTileByID(e),i&&i.hasData())break;const t=r[e];if(null===t)break;void 0===t?c.push(e):i=n.getTileByID(t)}return u(i?i.tileID.key:null),i&&i.hasData()?i:null}findDEMTileFor(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(e,t){let n=this._tilesDirty[e];n||(n=this._tilesDirty[e]={}),n[t.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const t=function(t){let n=0;const i=new e.StructArrayLayout2ui4,r=131;for(let e=1;e<129;e++){for(let t=1;t<129;t++)n=e*r+t,i.emplaceBack(n,n+1),i.emplaceBack(n,n+r),i.emplaceBack(n+1,n+r),128===e&&i.emplaceBack(n+r,n+r+1);i.emplaceBack(n+1,n+1+r)}return i}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Ln{static cacheKey(e,t,n,i){let r=`${t}${i?i.cacheKey:""}`;for(const t of n)e.usedDefines.includes(t)&&(r+="/"+t);return r}constructor(t,n,i,r,a,o){const s=t.gl;this.program=s.createProgram();const l=function(e){const t=[];for(let n=0;n<e.length;n++){if(null===e[n])continue;const i=e[n].split(" ");t.push(i.pop())}return t}(i.staticAttributes),c=r?r.getBinderAttributes():[],u=l.concat(c);let d=r?r.defines():[];d=d.concat(o.map(e=>"#define "+e));const p=t.isWebGL2?"#version 300 es\n":"",f=p+d.concat(t.extStandardDerivatives&&0===p.length?"#extension GL_OES_standard_derivatives : enable\n".concat(dn):dn,dn,un,cn.fragmentSource,sn.fragmentSource,i.fragmentSource).join("\n"),m=p+d.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",un,cn.vertexSource,sn.vertexSource,on.vertexSource,i.vertexSource).join("\n"),h=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(h,f),s.compileShader(h),s.attachShader(this.program,h);const g=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())this.failedToCreate=!0;else{s.shaderSource(g,m),s.compileShader(g),s.attachShader(this.program,g),this.attributes={},this.numAttributes=u.length;for(let e=0;e<this.numAttributes;e++)u[e]&&(s.bindAttribLocation(this.program,e,u[e]),this.attributes[u[e]]=e);s.linkProgram(this.program),s.deleteShader(g),s.deleteShader(h),this.fixedUniforms=a(t),this.binderUniforms=r?r.getUniforms(t):[],o.includes("TERRAIN")&&(this.terrainUniforms=(t=>({u_dem:new e.Uniform1i(t),u_dem_prev:new e.Uniform1i(t),u_dem_unpack:new e.Uniform4f(t),u_dem_tl:new e.Uniform2f(t),u_dem_scale:new e.Uniform1f(t),u_dem_tl_prev:new e.Uniform2f(t),u_dem_scale_prev:new e.Uniform1f(t),u_dem_size:new e.Uniform1f(t),u_dem_lerp:new e.Uniform1f(t),u_exaggeration:new e.Uniform1f(t),u_depth:new e.Uniform1i(t),u_depth_size_inv:new e.Uniform2f(t),u_meter_to_dem:new e.Uniform1f(t),u_label_plane_matrix_inv:new e.UniformMatrix4f(t)}))(t)),o.includes("GLOBE")&&(this.globeUniforms=(t=>({u_tile_tl_up:new e.Uniform3f(t),u_tile_tr_up:new e.Uniform3f(t),u_tile_br_up:new e.Uniform3f(t),u_tile_bl_up:new e.Uniform3f(t),u_tile_up_scale:new e.Uniform1f(t)}))(t)),o.includes("FOG")&&(this.fogUniforms=(t=>({u_fog_matrix:new e.UniformMatrix4f(t),u_fog_range:new e.Uniform2f(t),u_fog_color:new e.Uniform4f(t),u_fog_horizon_blend:new e.Uniform1f(t),u_fog_temporal_offset:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_globe_transition:new e.Uniform1f(t),u_is_globe:new e.Uniform1i(t),u_viewport:new e.Uniform2f(t)}))(t))}}setTerrainUniformValues(e,t){if(!this.terrainUniforms)return;const n=this.terrainUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e]&&n[e].set(this.program,e,t[e])}}setGlobeUniformValues(e,t){if(!this.globeUniforms)return;const n=this.globeUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e]&&n[e].set(this.program,e,t[e])}}setFogUniformValues(e,t){if(!this.fogUniforms)return;const n=this.fogUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e].set(this.program,e,t[e])}}draw(e,t,n,i,r,a,o,s,l,c,u,d,p,f,m){const h=e.gl;if(this.failedToCreate)return;e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(i),e.setColorMode(r),e.setCullFace(a);for(const e of Object.keys(this.fixedUniforms))this.fixedUniforms[e].set(this.program,e,o[e]);f&&f.setUniforms(this.program,e,this.binderUniforms,d,{zoom:p});const g={[h.LINES]:2,[h.TRIANGLES]:3,[h.LINE_STRIP]:1}[t];for(const n of u.get()){const i=n.vaos||(n.vaos={});(i[s]||(i[s]=new hn)).bind(e,this,l,f?f.getPaintVertexBuffers():[],c,n.vertexOffset,m||[]),h.drawElements(t,n.primitiveLength*g,h.UNSIGNED_SHORT,n.primitiveOffset*g*2)}}}function Rn(e,t){const n=Math.pow(2,t.tileID.overscaledZ),i=t.tileSize*Math.pow(2,e.transform.tileZoom)/n,r=i*(t.tileID.canonical.x+t.tileID.wrap*n),a=i*t.tileID.canonical.y;return{u_image:0,u_texsize:t.imageAtlasTexture.size,u_tile_units_to_pixels:1/M(t,1,e.transform.tileZoom),u_pixel_coord_upper:[r>>16,a>>16],u_pixel_coord_lower:[65535&r,65535&a]}}const Nn=e.create(),Dn=(t,n,i,r,a,o,s,l,c,u,d)=>{const p=n.style.light,f=p.properties.get("position"),m=[f.x,f.y,f.z],h=e.create$1();"viewport"===p.properties.get("anchor")&&(e.fromRotation(h,-n.transform.angle),e.transformMat3(m,m,h));const g=p.properties.get("color"),y=n.transform,v={u_matrix:t,u_lightpos:m,u_lightintensity:p.properties.get("intensity"),u_lightcolor:[g.r,g.g,g.b],u_vertical_gradient:+i,u_opacity:r,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Nn,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:a,u_edge_radius:o};return"globe"===y.projection.name&&(v.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],v.u_zoom_transition=c,v.u_inv_rot_matrix=d,v.u_merc_center=u,v.u_up_dir=y.projection.upVector(new e.CanonicalTileID(0,0,0),u[0]*e.EXTENT,u[1]*e.EXTENT),v.u_height_lift=l),v},Bn=(t,n,i,r,a,o,s,l,c,u,d,p)=>{const f=Dn(t,n,i,r,a,o,s,c,u,d,p),m={u_height_factor:-Math.pow(2,s.overscaledZ)/l.tileSize/8};return e.extend(f,Rn(n,l),m)},zn=e=>({u_matrix:e}),Fn=(t,n,i)=>e.extend(zn(t),Rn(n,i)),Un=(e,t)=>({u_matrix:e,u_world:t}),Hn=(t,n,i,r)=>e.extend(Fn(t,n,i),{u_world:r}),Wn=e.create(),qn=(t,n,i,r,a,o)=>{const s=t.transform,l="globe"===s.projection.name;let c;if("map"===o.paint.get("circle-pitch-alignment"))if(l){const t=e.globePixelsToTileUnits(s.zoom,n.canonical)*s._pixelsPerMercatorPixel;c=Float32Array.from([t,0,0,t])}else c=s.calculatePixelsToTileUnitsMatrix(i);else c=new Float32Array([s.pixelsToGLUnits[0],0,0,s.pixelsToGLUnits[1]]);const u={u_camera_to_center_distance:s.cameraToCenterDistance,u_matrix:t.translatePosMatrix(n.projMatrix,i,o.paint.get("circle-translate"),o.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:c,u_inv_rot_matrix:Wn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(l){u.u_inv_rot_matrix=r,u.u_merc_center=a,u.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],u.u_zoom_transition=e.globeToMercatorTransition(s.zoom);const t=a[0]*e.EXTENT,i=a[1]*e.EXTENT;u.u_up_dir=s.projection.upVector(new e.CanonicalTileID(0,0,0),t,i)}return u},Vn=e=>{const t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},Gn=(t,n,i,r)=>{const a=e.EXTENT/i.tileSize;return{u_matrix:t,u_camera_to_center_distance:n.getCameraToCenterDistance(r),u_extrude_scale:[n.pixelsToGLUnits[0]/a,n.pixelsToGLUnits[1]/a]}},Yn=(e,t,n=1)=>({u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:n}),Zn=e.create(),Xn=(t,n,i,r,a,o,s)=>{const l=t.transform,c="globe"===l.projection.name,u=c?e.globePixelsToTileUnits(l.zoom,n.canonical)*l._pixelsPerMercatorPixel:M(i,1,o),d={u_matrix:n.projMatrix,u_extrude_scale:u,u_intensity:s,u_inv_rot_matrix:Zn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(c){d.u_inv_rot_matrix=r,d.u_merc_center=a,d.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],d.u_zoom_transition=e.globeToMercatorTransition(l.zoom);const t=a[0]*e.EXTENT,i=a[1]*e.EXTENT;d.u_up_dir=l.projection.upVector(new e.CanonicalTileID(0,0,0),t,i)}return d},Jn=(e,t,n,i,r,a,o)=>{const s=e.transform,l=s.calculatePixelsToTileUnitsMatrix(t);return{u_matrix:Qn(e,t,n,i),u_pixels_to_tile_units:l,u_device_pixel_ratio:a,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:r,u_texsize:ei(n)?t.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:$n(t,e.transform),u_alpha_discard_threshold:0,u_trim_offset:o}},Kn=(e,t,n,i,r)=>{const a=e.transform;return{u_matrix:Qn(e,t,n,i),u_texsize:t.imageAtlasTexture.size,u_pixels_to_tile_units:a.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:r,u_image:0,u_tile_units_to_pixels:$n(t,a),u_units_to_pixels:[1/a.pixelsToGLUnits[0],1/a.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function $n(e,t){return 1/M(e,1,t.tileZoom)}function Qn(e,t,n,i){return e.translatePosMatrix(i||t.tileID.projMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function ei(e){const t=e.paint.get("line-dasharray").value;return t.value||"constant"!==t.kind}const ti=(e,t,n,i,r,a)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_fade_t:i.mix,u_opacity:i.opacity*r.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:r.paint.get("raster-brightness-min"),u_brightness_high:r.paint.get("raster-brightness-max"),u_saturation_factor:(s=r.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(o=r.paint.get("raster-contrast"),o>0?1/(1-o):1+o),u_spin_weights:ni(r.paint.get("raster-hue-rotate")),u_perspective_transform:a};var o,s};function ni(e){e*=Math.PI/180;const t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}const ii=e.create(),ri=(t,n,i,r,a,o,s,l,c,u,d,p,f,m,h,g)=>{const y=a.transform,v={u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:y.cameraToCenterDistance,u_rotate_symbol:+i,u_aspect_ratio:y.width/y.height,u_fade_change:a.options.fadeDuration?a.symbolFadeChange:1,u_matrix:o,u_label_plane_matrix:s,u_coord_matrix:l,u_is_text:+c,u_pitch_with_map:+r,u_texsize:u,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:ii,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:ii,u_up_vector:[0,-1,0]};return"globe"===g.name&&(v.u_tile_id=[d.canonical.x,d.canonical.y,1<<d.canonical.z],v.u_zoom_transition=p,v.u_inv_rot_matrix=m,v.u_merc_center=f,v.u_camera_forward=y._camera.forward(),v.u_ecef_origin=e.globeECEFOrigin(y.globeMatrix,d.toUnwrapped()),v.u_tile_matrix=Float32Array.from(y.globeMatrix),v.u_up_vector=h),v},ai=(t,n,i,r,a,o,s,l,c,u,d,p,f,m,h,g,y)=>e.extend(ri(t,n,i,r,a,o,s,l,c,u,p,f,m,h,g,y),{u_gamma_scale:r?a.transform.cameraToCenterDistance*Math.cos(a.terrain?0:a.transform._pitch):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+d}),oi=(t,n,i,r,a,o,s,l,c,u,d,p,f,m,h,g)=>e.extend(ai(t,n,i,r,a,o,s,l,!0,c,!0,d,p,f,m,h,g),{u_texsize_icon:u,u_texture_icon:1}),si=(e,t,n)=>({u_matrix:e,u_opacity:t,u_color:n}),li=(t,n,i,r,a)=>e.extend(function(e,t,n){const i=t.imageManager.getPattern(e.toString()),{width:r,height:a}=t.imageManager.getPixelSize(),o=Math.pow(2,n.tileID.overscaledZ),s=n.tileSize*Math.pow(2,t.transform.tileZoom)/o,l=s*(n.tileID.canonical.x+n.tileID.wrap*o),c=s*n.tileID.canonical.y;return{u_image:0,u_pattern_tl:i.tl,u_pattern_br:i.br,u_texsize:[r,a],u_pattern_size:i.displaySize,u_tile_units_to_pixels:1/M(n,1,t.transform.tileZoom),u_pixel_coord_upper:[l>>16,c>>16],u_pixel_coord_lower:[65535&l,65535&c]}}(r,i,a),{u_matrix:t,u_opacity:n}),ci={fillExtrusion:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t)}),fillExtrusionPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_height_factor:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t)}),fill:t=>({u_matrix:new e.UniformMatrix4f(t)}),fillPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),fillOutline:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t)}),fillOutlinePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),circle:t=>({u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),collisionBox:t=>({u_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.Uniform2f(t)}),collisionCircle:t=>({u_matrix:new e.UniformMatrix4f(t),u_inv_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_viewport_size:new e.Uniform2f(t)}),debug:t=>({u_color:new e.UniformColor(t),u_matrix:new e.UniformMatrix4f(t),u_overlay:new e.Uniform1i(t),u_overlay_scale:new e.Uniform1f(t)}),clippingMask:t=>({u_matrix:new e.UniformMatrix4f(t)}),heatmap:t=>({u_extrude_scale:new e.Uniform1f(t),u_intensity:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),heatmapTexture:t=>({u_image:new e.Uniform1i(t),u_color_ramp:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t)}),hillshade:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_latrange:new e.Uniform2f(t),u_light:new e.Uniform2f(t),u_shadow:new e.UniformColor(t),u_highlight:new e.UniformColor(t),u_accent:new e.UniformColor(t)}),hillshadePrepare:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_dimension:new e.Uniform2f(t),u_zoom:new e.Uniform1f(t),u_unpack:new e.Uniform4f(t)}),line:t=>({u_matrix:new e.UniformMatrix4f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_units_to_pixels:new e.Uniform2f(t),u_dash_image:new e.Uniform1i(t),u_gradient_image:new e.Uniform1i(t),u_image_height:new e.Uniform1f(t),u_texsize:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t),u_trim_offset:new e.Uniform2f(t)}),linePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_texsize:new e.Uniform2f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_units_to_pixels:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t)}),raster:t=>({u_matrix:new e.UniformMatrix4f(t),u_tl_parent:new e.Uniform2f(t),u_scale_parent:new e.Uniform1f(t),u_fade_t:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_image0:new e.Uniform1i(t),u_image1:new e.Uniform1i(t),u_brightness_low:new e.Uniform1f(t),u_brightness_high:new e.Uniform1f(t),u_saturation_factor:new e.Uniform1f(t),u_contrast_factor:new e.Uniform1f(t),u_spin_weights:new e.Uniform3f(t),u_perspective_transform:new e.Uniform2f(t)}),symbolIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_texture:new e.Uniform1i(t)}),symbolSDF:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_is_halo:new e.Uniform1i(t)}),symbolTextAndIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texsize_icon:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_texture_icon:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_is_halo:new e.Uniform1i(t)}),background:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_color:new e.UniformColor(t)}),backgroundPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_pattern_tl:new e.Uniform2f(t),u_pattern_br:new e.Uniform2f(t),u_texsize:new e.Uniform2f(t),u_pattern_size:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),terrainRaster:_n,terrainDepth:_n,skybox:t=>({u_matrix:new e.UniformMatrix4f(t),u_sun_direction:new e.Uniform3f(t),u_cubemap:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxGradient:t=>({u_matrix:new e.UniformMatrix4f(t),u_color_ramp:new e.Uniform1i(t),u_center_direction:new e.Uniform3f(t),u_radius:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxCapture:t=>({u_matrix_3f:new e.UniformMatrix3f(t),u_sun_direction:new e.Uniform3f(t),u_sun_intensity:new e.Uniform1f(t),u_color_tint_r:new e.Uniform4f(t),u_color_tint_m:new e.Uniform4f(t),u_luminance:new e.Uniform1f(t)}),globeRaster:t=>({u_proj_matrix:new e.UniformMatrix4f(t),u_globe_matrix:new e.UniformMatrix4f(t),u_normalize_matrix:new e.UniformMatrix4f(t),u_merc_matrix:new e.UniformMatrix4f(t),u_zoom_transition:new e.Uniform1f(t),u_merc_center:new e.Uniform2f(t),u_image0:new e.Uniform1i(t),u_grid_matrix:new e.UniformMatrix3f(t),u_skirt_height:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_viewport:new e.Uniform2f(t)}),globeAtmosphere:t=>({u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_horizon:new e.Uniform1f(t),u_transition:new e.Uniform1f(t),u_fadeout_range:new e.Uniform1f(t),u_color:new e.Uniform4f(t),u_high_color:new e.Uniform4f(t),u_space_color:new e.Uniform4f(t),u_star_intensity:new e.Uniform1f(t),u_star_density:new e.Uniform1f(t),u_star_size:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t),u_horizon_angle:new e.Uniform1f(t),u_rotation_matrix:new e.UniformMatrix4f(t)})};let ui;function di(t,n,i,r,a,o,s){const l=t.context,c=l.gl,u=t.transform,d=t.useProgram("collisionBox"),p=[];let f=0,m=0;for(let h=0;h<r.length;h++){const g=r[h],y=n.getTile(g),v=y.getBucket(i);if(!v)continue;const b=_t(g,v,u);let _=b;0===a[0]&&0===a[1]||(_=t.translatePosMatrix(b,y,a,o));const w=s?v.textCollisionBox:v.iconCollisionBox,x=v.collisionCircleArray;if(x.length>0){const t=e.create(),n=_;e.mul(t,v.placementInvProjMatrix,u.glCoordMatrix),e.mul(t,t,v.placementViewportMatrix),p.push({circleArray:x,circleOffset:m,transform:n,invTransform:t,projection:v.getProjection()}),f+=x.length/4,m=f}w&&(t.terrain&&t.terrain.setupElevationDraw(y,d),d.draw(l,c.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,Gn(_,u,y,v.getProjection()),i.id,w.layoutVertexBuffer,w.indexBuffer,w.segments,null,u.zoom,null,[w.collisionVertexBuffer,w.collisionVertexBufferExt]))}if(!s||!p.length)return;const h=t.useProgram("collisionCircle"),g=new e.StructArrayLayout2f1f2i16;g.resize(4*f),g._trim();let y=0;for(const e of p)for(let t=0;t<e.circleArray.length/4;t++){const n=4*t,i=e.circleArray[n+0],r=e.circleArray[n+1],a=e.circleArray[n+2],o=e.circleArray[n+3];g.emplace(y++,i,r,a,o,0),g.emplace(y++,i,r,a,o,1),g.emplace(y++,i,r,a,o,2),g.emplace(y++,i,r,a,o,3)}(!ui||ui.length<2*f)&&(ui=function(t){const n=2*t,i=new e.StructArrayLayout3ui6;i.resize(n),i._trim();for(let e=0;e<n;e++){const t=6*e;i.uint16[t+0]=4*e+0,i.uint16[t+1]=4*e+1,i.uint16[t+2]=4*e+2,i.uint16[t+3]=4*e+2,i.uint16[t+4]=4*e+3,i.uint16[t+5]=4*e+0}return i}(f));const v=l.createIndexBuffer(ui,!0),b=l.createVertexBuffer(g,e.collisionCircleLayout.members,!0);for(const n of p){const r={u_matrix:n.transform,u_inv_matrix:n.invTransform,u_camera_to_center_distance:(_=u).getCameraToCenterDistance(n.projection),u_viewport_size:[_.width,_.height]};h.draw(l,c.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,r,i.id,b,v,e.SegmentVector.simpleSegment(0,2*n.circleOffset,n.circleArray.length,n.circleArray.length/2),null,u.zoom)}var _;b.destroy(),v.destroy()}const pi=e.create();function fi({width:t,height:n,anchor:i,textOffset:r,textScale:a},o){const{horizontalAlign:s,verticalAlign:l}=e.getAnchorAlignment(i),c=-(s-.5)*t,u=-(l-.5)*n,d=e.evaluateVariableOffset(i,r);return new e.Point((c/a+d[0])*o,(u/a+d[1])*o)}function mi(t,n,i,r,a,o,s,l,c,u,d){const p=t.text.placedSymbolArray,f=t.text.dynamicLayoutVertexArray,m=t.icon.dynamicLayoutVertexArray,h={},g=t.getProjection(),y=wt(l,g,o),v=o.elevation,b=g.upVectorScale(l.canonical,o.center.lat,o.worldSize).metersToTile;f.clear();for(let m=0;m<p.length;m++){const _=p.get(m),{tileAnchorX:w,tileAnchorY:x,numGlyphs:k}=_,O=_.hidden||!_.crossTileID||t.allowVerticalPlacement&&!_.placedOrientation?null:r[_.crossTileID];if(O){let r=0,p=0,m=0;if(v){const e=v?v.getAtTileOffset(l,w,x):0,[t,n,i]=g.upVector(l.canonical,w,x);r=e*t*b,p=e*n*b,m=e*i*b}let[E,T,C,S]=at(_.projectedAnchorX+r,_.projectedAnchorY+p,_.projectedAnchorZ+m,i?y:s);const P=ot(o.getCameraToCenterDistance(g),S);let M=a.evaluateSizeForFeature(t.textSizeData,u,_)*P/e.ONE_EM;i&&(M*=t.tilePixelRatio/c);const I=fi(O,M);i?(({x:E,y:T,z:C}=g.projectTilePoint(w+I.x,x+I.y,l.canonical)),[E,T,C]=at(E+r,T+p,C+m,s)):(n&&I._rotate(-o.angle),E+=I.x,T+=I.y,C=0);const A=t.allowVerticalPlacement&&_.placedOrientation===e.WritingMode.vertical?Math.PI/2:0;for(let t=0;t<k;t++)e.addDynamicAttributes(f,E,T,C,A);d&&_.associatedIconIndex>=0&&(h[_.associatedIconIndex]={x:E,y:T,z:C,angle:A})}else ht(k,f)}if(d){m.clear();const n=t.icon.placedSymbolArray;for(let t=0;t<n.length;t++){const i=n.get(t),{numGlyphs:r}=i,a=h[t];if(i.hidden||!a)ht(r,m);else{const{x:t,y:n,z:i,angle:o}=a;for(let a=0;a<r;a++)e.addDynamicAttributes(m,t,n,i,o)}}t.icon.dynamicLayoutVertexBuffer.updateData(m)}t.text.dynamicLayoutVertexBuffer.updateData(f)}function hi(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function gi(t,n,i,r,a,o,s,l,c,u,d,p){const f=t.context,m=f.gl,h=t.transform,g="map"===l,y="map"===c,v=g&&"point"!==i.layout.get("symbol-placement"),b=g&&!y&&!v,_=void 0!==i.layout.get("symbol-sort-key").constantOr(1);let w=!1;const x=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),k=[e.mercatorXfromLng(h.center.lng),e.mercatorYfromLat(h.center.lat)],O=i.layout.get("text-variable-anchor"),E="globe"===h.projection.name,T=[],C=[0,-1,0];let S=C;!E&&!h.mercatorFromTransition||g||(S=function(t){const n=t._camera.getWorldToCamera(t.worldSize,1),i=e.multiply([],n,t.globeMatrix);e.invert(i,i);const r=[0,0,0],a=[0,1,0,0];return e.transformMat4$1(a,a,i),r[0]=a[0],r[1]=a[1],r[2]=a[2],e.normalize(r,r),r}(h));for(const l of r){const r=n.getTile(l),c=r.getBucket(i);if(!c)continue;if("mercator"===c.projection.name&&E)continue;const d=a?c.text:c.icon;if(!d||c.fullyClipped||!d.segments.get().length)continue;const p=d.programConfigurations.get(i.id),f=a||c.sdfIcons,x=a?c.textSizeData:c.iconSizeData,P=y||0!==h.pitch,M=e.evaluateSizeForZoom(x,h.zoom);let I,A,j,L,R=[0,0],N=null;if(a)A=r.glyphAtlasTexture,j=m.LINEAR,I=r.glyphAtlasTexture.size,c.iconsInText&&(R=r.imageAtlasTexture.size,N=r.imageAtlasTexture,L=P||t.options.rotating||t.options.zooming||"composite"===x.kind||"camera"===x.kind?m.LINEAR:m.NEAREST);else{const e=1!==i.layout.get("icon-size").constantOr(0)||c.iconsNeedLinear;A=r.imageAtlasTexture,j=f||t.options.rotating||t.options.zooming||e||P?m.LINEAR:m.NEAREST,I=r.imageAtlasTexture.size}const D="globe"===c.projection.name,B=D?S:C,z=D?e.globeToMercatorTransition(h.zoom):0,F=wt(l,c.getProjection(),h),U=h.calculatePixelsToTileUnitsMatrix(r),H=nt(F,r.tileID.canonical,y,g,h,c.getProjection(),U),W=t.terrain&&y&&v?e.invert(e.create(),H):pi,q=rt(F,r.tileID.canonical,y,g,h,c.getProjection(),U),V=O&&c.hasTextData(),G="none"!==i.layout.get("icon-text-fit")&&V&&c.hasIconData();if(v){const e=h.elevation,n=e?e.getAtTileOffsetFunc(l,h.center.lat,h.worldSize,c.getProjection()):null,i=it(F,r.tileID.canonical,y,g,h,c.getProjection(),U);lt(c,F,t,a,i,q,y,u,n,l)}const Y=v||a&&O||G,Z=t.translatePosMatrix(F,r,o,s),X=Y?pi:H,J=t.translatePosMatrix(q,r,o,s,!0),K=c.getProjection().createInversionMatrix(h,l.canonical),$=[];t.terrainRenderModeElevated()&&y&&$.push("PITCH_WITH_MAP_TERRAIN"),D&&$.push("PROJECTION_GLOBE_VIEW"),Y&&$.push("PROJECTED_POS_ON_VIEWPORT");const Q=f&&0!==i.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1);let ee;ee=f?c.iconsInText?oi(x.kind,M,b,y,t,Z,X,J,I,R,l,z,k,K,B,c.getProjection()):ai(x.kind,M,b,y,t,Z,X,J,a,I,!0,l,z,k,K,B,c.getProjection()):ri(x.kind,M,b,y,t,Z,X,J,a,I,l,z,k,K,B,c.getProjection());const te={program:t.useProgram(hi(f,a,c),p,$),buffers:d,uniformValues:ee,atlasTexture:A,atlasTextureIcon:N,atlasInterpolation:j,atlasInterpolationIcon:L,isSDF:f,hasHalo:Q,tile:r,labelPlaneMatrixInv:W};if(_&&c.canOverlap){w=!0;const t=d.segments.get();for(const n of t)T.push({segments:new e.SegmentVector([n]),sortKey:n.sortKey,state:te})}else T.push({segments:d.segments,sortKey:0,state:te})}w&&T.sort((e,t)=>e.sortKey-t.sortKey);for(const e of T){const n=e.state;if(t.terrain&&t.terrain.setupElevationDraw(n.tile,n.program,{useDepthForOcclusion:!E,labelPlaneMatrixInv:n.labelPlaneMatrixInv}),f.activeTexture.set(m.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,m.CLAMP_TO_EDGE),n.atlasTextureIcon&&(f.activeTexture.set(m.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,m.CLAMP_TO_EDGE)),n.isSDF){const r=n.uniformValues;n.hasHalo&&(r.u_is_halo=1,yi(n.buffers,e.segments,i,t,n.program,x,d,p,r)),r.u_is_halo=0}yi(n.buffers,e.segments,i,t,n.program,x,d,p,n.uniformValues)}}function yi(t,n,i,r,a,o,s,l,c){const u=r.context,d=[t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer,t.globeExtVertexBuffer];a.draw(u,u.gl.TRIANGLES,o,s,l,e.CullFaceMode.disabled,c,i.id,t.layoutVertexBuffer,t.indexBuffer,n,i.paint,r.transform.zoom,t.programConfigurations.get(i.id),d)}function vi(t,n,i,r,a,o,s){const l=t.context.gl,c=i.paint.get("fill-pattern"),u=c&&c.constantOr(1);let d,p,f,m,h;s?(p=u&&!i.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",d=l.LINES):(p=u?"fillPattern":"fill",d=l.TRIANGLES);for(const g of r){const r=n.getTile(g);if(u&&!r.patternsLoaded())continue;const y=r.getBucket(i);if(!y)continue;t.prepareDrawTile();const v=y.programConfigurations.get(i.id),b=t.useProgram(p,v);u&&(t.context.activeTexture.set(l.TEXTURE0),r.imageAtlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE),v.updatePaintBuffers());const _=c.constantOr(null);if(_&&r.imageAtlas){const e=r.imageAtlas.patternPositions[_.toString()];e&&v.setConstantPatternPositions(e)}const w=t.translatePosMatrix(g.projMatrix,r,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"));if(s){m=y.indexBuffer2,h=y.segments2;const e=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[l.drawingBufferWidth,l.drawingBufferHeight];f="fillOutlinePattern"===p&&u?Hn(w,t,r,e):Un(w,e)}else m=y.indexBuffer,h=y.segments,f=u?Fn(w,t,r):zn(w);t.prepareDrawProgram(t.context,b,g.toUnwrapped()),b.draw(t.context,d,a,t.stencilModeForClipping(g),o,e.CullFaceMode.disabled,f,i.id,y.layoutVertexBuffer,m,h,i.paint,t.transform.zoom,v)}}function bi(t,n,i,r,a,o,s){const l=t.context,c=l.gl,u=t.transform,d=i.paint.get("fill-extrusion-pattern"),p=d.constantOr(1),f=i.paint.get("fill-extrusion-opacity"),m=[i.paint.get("fill-extrusion-ambient-occlusion-intensity"),i.paint.get("fill-extrusion-ambient-occlusion-radius")],h=i.layout.get("fill-extrusion-edge-radius"),g=h>0&&!i.paint.get("fill-extrusion-rounded-roof"),y=g?0:h,v="globe"===u.projection.name?e.fillExtrusionHeightLift():0,b="globe"===u.projection.name,_=b?e.globeToMercatorTransition(u.zoom):0,w=[e.mercatorXfromLng(u.center.lng),e.mercatorYfromLat(u.center.lat)],x=[];b&&x.push("PROJECTION_GLOBE_VIEW"),m[0]>0&&x.push("FAUX_AO"),g&&x.push("ZERO_ROOF_RADIUS");for(const h of r){const r=n.getTile(h),g=r.getBucket(i);if(!g||g.projection.name!==u.projection.name)continue;const k=g.programConfigurations.get(i.id),O=t.useProgram(p?"fillExtrusionPattern":"fillExtrusion",k,x);if(t.terrain){const e=t.terrain;if(t.style.terrainSetForDrapingOnly())e.setupElevationDraw(r,O,{useMeterToDem:!0});else{if(!g.enableTerrain)continue;if(e.setupElevationDraw(r,O,{useMeterToDem:!0}),_i(l,n,h,g,i,e),!g.centroidVertexBuffer){const e=O.attributes.a_centroid_pos;void 0!==e&&c.vertexAttrib2f(e,0,0)}}}p&&(t.context.activeTexture.set(c.TEXTURE0),r.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),k.updatePaintBuffers());const E=d.constantOr(null);if(E&&r.imageAtlas){const e=r.imageAtlas.patternPositions[E.toString()];e&&k.setConstantPatternPositions(e)}const T=t.translatePosMatrix(h.projMatrix,r,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor")),C=u.projection.createInversionMatrix(u,h.canonical),S=i.paint.get("fill-extrusion-vertical-gradient"),P=p?Bn(T,t,S,f,m,y,h,r,v,_,w,C):Dn(T,t,S,f,m,y,h,v,_,w,C);t.prepareDrawProgram(l,O,h.toUnwrapped());const M=[];t.terrain&&M.push(g.centroidVertexBuffer),b&&M.push(g.layoutVertexExtBuffer),O.draw(l,l.gl.TRIANGLES,a,o,s,e.CullFaceMode.backCCW,P,i.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,i.paint,t.transform.zoom,k,M)}}function _i(t,n,i,r,a,o){const s=[t=>{let n=t.canonical.x-1,i=t.wrap;return n<0&&(n=(1<<t.canonical.z)-1,i--),new e.OverscaledTileID(t.overscaledZ,i,t.canonical.z,n,t.canonical.y)},t=>{let n=t.canonical.x+1,i=t.wrap;return n===1<<t.canonical.z&&(n=0,i++),new e.OverscaledTileID(t.overscaledZ,i,t.canonical.z,n,t.canonical.y)},t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1),t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)],l=e=>{const t=n.getSource().minzoom,i=e=>{const t=n.getTileByID(e);if(t&&t.hasData())return t.getBucket(a)},r=[0,-1,1];for(const n of r){if(e.overscaledZ+n<t)continue;const r=i(e.calculateScaledKey(e.overscaledZ+n));if(r)return r}},c=[0,0,0],u=(t,n)=>(c[0]=Math.min(t.min.y,n.min.y),c[1]=Math.max(t.max.y,n.max.y),c[2]=e.EXTENT-n.min.x>t.max.x?n.min.x-e.EXTENT:t.max.x,c),d=(t,n)=>(c[0]=Math.min(t.min.x,n.min.x),c[1]=Math.max(t.max.x,n.max.x),c[2]=e.EXTENT-n.min.y>t.max.y?n.min.y-e.EXTENT:t.max.y,c),p=[(e,t)=>u(e,t),(e,t)=>u(t,e),(e,t)=>d(e,t),(e,t)=>d(t,e)],f=new e.Point(0,0);let m,h,g;const y=(t,n,r,a,s)=>{const l=[[a?r:t,a?t:r,0],[a?r:n,a?n:r,0]],c=s<0?e.EXTENT+s:s,u=[a?c:(t+n)/2,a?(t+n)/2:c,0];return 0===r&&s<0||0!==r&&s>0?o.getForTilePoints(g,[u],!0,h):l.push(u),o.getForTilePoints(i,l,!0,m),Math.max(l[0][2],l[1][2],u[2])/o.exaggeration()};for(let t=0;t<4;t++){const n=(t<2?1:5)-t,a=r.borders[t];if(0===a.length)continue;const c=g=s[t](i),u=l(c);if(!(u&&u instanceof e.FillExtrusionBucket&&u.enableTerrain))continue;if(r.borderDoneWithNeighborZ[t]===u.canonical.z&&u.borderDoneWithNeighborZ[n]===r.canonical.z)continue;if(h=o.findDEMTileFor(c),!h||!h.dem)continue;if(!m){const e=o.findDEMTileFor(i);if(!e||!e.dem)return;m=e}const d=u.borders[n];let v=0;const b=u.borderDoneWithNeighborZ[n]!==r.canonical.z;if(r.canonical.z===u.canonical.z){for(let i=0;i<a.length;i++){const o=r.featuresOnBorder[a[i]],s=o.borders[t];let l;for(;v<d.length&&(l=u.featuresOnBorder[d[v]],!(l.borders[n][1]>s[0]+3));)b&&u.encodeCentroid(void 0,l,!1),v++;if(l&&v<d.length){const i=v;let a=0;for(;!(l.borders[n][0]>s[1]-3)&&(a++,++v!==d.length);)l=u.featuresOnBorder[d[v]];if(l=u.featuresOnBorder[d[i]],o.intersectsCount()>1||l.intersectsCount()>1||1!==a){1!==a&&(v=i),r.encodeCentroid(void 0,o,!1),b&&u.encodeCentroid(void 0,l,!1);continue}const c=p[t](o,l),m=t%2?e.EXTENT-1:0;f.x=y(c[0],Math.min(e.EXTENT-1,c[1]),m,t<2,c[2]),f.y=0,r.encodeCentroid(f,o,!1),b&&u.encodeCentroid(f,l,!1)}else r.encodeCentroid(void 0,o,!1)}r.borderDoneWithNeighborZ[t]=u.canonical.z,r.needsCentroidUpdate=!0,b&&(u.borderDoneWithNeighborZ[n]=r.canonical.z,u.needsCentroidUpdate=!0)}else{for(const e of a)r.encodeCentroid(void 0,r.featuresOnBorder[e],!1);if(b){for(const e of d)u.encodeCentroid(void 0,u.featuresOnBorder[e],!1);u.borderDoneWithNeighborZ[n]=r.canonical.z,u.needsCentroidUpdate=!0}r.borderDoneWithNeighborZ[t]=u.canonical.z,r.needsCentroidUpdate=!0}}(r.needsCentroidUpdate||!r.centroidVertexBuffer&&0!==r.centroidVertexArray.length)&&r.uploadCentroid(t)}const wi=new e.Color(1,0,0,1),xi=new e.Color(0,1,0,1),ki=new e.Color(0,0,1,1),Oi=new e.Color(1,0,1,1),Ei=new e.Color(0,1,1,1);function Ti(t,n,i){const r=t.context,a=t.transform,o=r.gl,s="globe"===a.projection.name,l=s?["PROJECTION_GLOBE_VIEW"]:null;let c=i.projMatrix;if(s&&e.globeToMercatorTransition(a.zoom)>0){const t=e.transitionTileAABBinECEF(i.canonical,a),n=e.globeDenormalizeECEF(t);c=e.multiply(new Float32Array(16),a.globeMatrix,n),e.multiply(c,a.projMatrix,c)}const u=t.useProgram("debug",null,l),d=n.getTileByID(i.key);t.terrain&&t.terrain.setupElevationDraw(d,u);const p=e.DepthMode.disabled,f=e.StencilMode.disabled,m=t.colorModeForRenderPass(),h="$debug";r.activeTexture.set(o.TEXTURE0),t.emptyTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE),s?d._makeGlobeTileDebugBuffers(t.context,a):d._makeDebugTileBoundsBuffers(t.context,a.projection);const g=d._tileDebugBuffer||t.debugBuffer,y=d._tileDebugIndexBuffer||t.debugIndexBuffer,v=d._tileDebugSegments||t.debugSegments;u.draw(r,o.LINE_STRIP,p,f,m,e.CullFaceMode.disabled,Yn(c,e.Color.red),h,g,y,v,null,null,null,[d._globeTileDebugBorderBuffer]);const b=d.latestRawTileData,_=Math.floor((b&&b.byteLength||0)/1024),w=n.getTile(i).tileSize,x=512/Math.min(w,512)*(i.overscaledZ/a.zoom)*.5;let k=i.canonical.toString();i.overscaledZ!==i.canonical.z&&(k+=" => "+i.overscaledZ),k+=` ${_}kb`,function(e,t){e.initDebugOverlayCanvas();const n=e.debugOverlayCanvas,i=e.context.gl,r=e.debugOverlayCanvas.getContext("2d");r.clearRect(0,0,n.width,n.height),r.shadowColor="white",r.shadowBlur=2,r.lineWidth=1.5,r.strokeStyle="white",r.textBaseline="top",r.font="bold 36px Open Sans, sans-serif",r.fillText(t,5,5),r.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(i.LINEAR,i.CLAMP_TO_EDGE)}(t,k);const O=d._tileDebugTextBuffer||t.debugBuffer,E=d._tileDebugTextIndexBuffer||t.quadTriangleIndexBuffer,T=d._tileDebugTextSegments||t.debugSegments;u.draw(r,o.TRIANGLES,p,f,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,Yn(c,e.Color.transparent,x),h,O,E,T,null,null,null,[d._globeTileDebugTextBuffer])}function Ci(e,t,n,i){Pi(e,0,t+n/2,e.transform.width,n,i)}function Si(e,t,n,i){Pi(e,t-n/2,0,n,e.transform.height,i)}function Pi(t,n,i,r,a,o){const s=t.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(n*e.exported.devicePixelRatio,i*e.exported.devicePixelRatio,r*e.exported.devicePixelRatio,a*e.exported.devicePixelRatio),s.clear({color:o}),l.disable(l.SCISSOR_TEST)}const Mi=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Ii}=Mi;function Ai(e,t,n,i){e.emplaceBack(t,n,i)}class ji{constructor(t){this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,Ai(this.vertexArray,-1,-1,1),Ai(this.vertexArray,1,-1,1),Ai(this.vertexArray,-1,1,1),Ai(this.vertexArray,1,1,1),Ai(this.vertexArray,-1,-1,-1),Ai(this.vertexArray,1,-1,-1),Ai(this.vertexArray,-1,1,-1),Ai(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,Ii),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}}function Li(t,n,i,r,a,o){const s=t.gl,l=n.paint.get("sky-atmosphere-color"),c=n.paint.get("sky-atmosphere-halo-color"),u=n.paint.get("sky-atmosphere-sun-intensity"),d=((e,t,n,i,r)=>({u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:n,u_color_tint_r:[i.r,i.g,i.b,i.a],u_color_tint_m:[r.r,r.g,r.b,r.a],u_luminance:5e-5}))(e.fromMat4(e.create$1(),r),a,u,l,c);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+o,n.skyboxTexture,0),i.draw(t,s.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,d,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}const Ri=e.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Ni{constructor(t){const n=new e.StructArrayLayout5f20;n.emplaceBack(-1,1,1,0,0),n.emplaceBack(1,1,1,1,0),n.emplaceBack(1,-1,1,1,1),n.emplaceBack(-1,-1,1,0,1);const i=new e.StructArrayLayout3ui6;i.emplaceBack(0,1,2),i.emplaceBack(2,3,0),this.vertexBuffer=t.createVertexBuffer(n,Ri.members),this.indexBuffer=t.createIndexBuffer(i),this.segments=e.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Di={symbol:function(t,n,i,r,a){if("translucent"!==t.renderPass)return;const o=e.StencilMode.disabled,s=t.colorModeForRenderPass();i.layout.get("text-variable-anchor")&&function(t,n,i,r,a,o,s){const l=n.transform,c="map"===a,u="map"===o;for(const n of t){const t=r.getTile(n),a=t.getBucket(i);if(!a||!a.text||!a.text.segments.get().length)continue;const o=e.evaluateSizeForZoom(a.textSizeData,l.zoom),d=wt(n,a.getProjection(),l),p=l.calculatePixelsToTileUnitsMatrix(t),f=nt(d,t.tileID.canonical,u,c,l,a.getProjection(),p),m="none"!==i.layout.get("icon-text-fit")&&a.hasIconData();if(o){const i=Math.pow(2,l.zoom-t.tileID.overscaledZ);mi(a,c,u,s,e.symbolSize,l,f,n,i,o,m)}}}(r,t,i,n,i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),a),0!==i.paint.get("icon-opacity").constantOr(1)&&gi(t,n,i,r,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright"),o,s),0!==i.paint.get("text-opacity").constantOr(1)&&gi(t,n,i,r,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright"),o,s),n.map.showCollisionBoxes&&(di(t,n,i,r,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),!0),di(t,n,i,r,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),!1))},circle:function(t,n,i,r){if("translucent"!==t.renderPass)return;const a=i.paint.get("circle-opacity"),o=i.paint.get("circle-stroke-width"),s=i.paint.get("circle-stroke-opacity"),l=void 0!==i.layout.get("circle-sort-key").constantOr(1);if(0===a.constantOr(1)&&(0===o.constantOr(1)||0===s.constantOr(1)))return;const c=t.context,u=c.gl,d=t.transform,p=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),f=e.StencilMode.disabled,m=t.colorModeForRenderPass(),h="globe"===d.projection.name,g=[e.mercatorXfromLng(d.center.lng),e.mercatorYfromLat(d.center.lat)],y=[];for(let a=0;a<r.length;a++){const o=r[a],s=n.getTile(o),c=s.getBucket(i);if(!c||c.projection.name!==d.projection.name)continue;const u=c.programConfigurations.get(i.id),p=Vn(i);h&&p.push("PROJECTION_GLOBE_VIEW");const f=t.useProgram("circle",u,p),m=c.layoutVertexBuffer,v=c.globeExtVertexBuffer,b=c.indexBuffer,_=d.projection.createInversionMatrix(d,o.canonical),w={programConfiguration:u,program:f,layoutVertexBuffer:m,globeExtVertexBuffer:v,indexBuffer:b,uniformValues:qn(t,o,s,_,g,i),tile:s};if(l){const t=c.segments.get();for(const n of t)y.push({segments:new e.SegmentVector([n]),sortKey:n.sortKey,state:w})}else y.push({segments:c.segments,sortKey:0,state:w})}l&&y.sort((e,t)=>e.sortKey-t.sortKey);const v={useDepthForOcclusion:!h};for(const n of y){const{programConfiguration:r,program:a,layoutVertexBuffer:o,globeExtVertexBuffer:s,indexBuffer:l,uniformValues:h,tile:g}=n.state,y=n.segments;t.terrain&&t.terrain.setupElevationDraw(g,a,v),t.prepareDrawProgram(c,a,g.tileID.toUnwrapped()),a.draw(c,u.TRIANGLES,p,f,m,e.CullFaceMode.disabled,h,i.id,o,l,y,i.paint,d.zoom,r,[s])}},heatmap:function(t,n,i,r){if(0!==i.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){const a=t.context,o=a.gl,s=e.StencilMode.disabled,l=new e.ColorMode([o.ONE,o.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,n,i){const r=e.gl,a=t.width*i,o=t.height*i;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,a,o]);let s=n.heatmapFbo;if(!s||s&&(s.width!==a||s.height!==o)){s&&s.destroy();const t=r.createTexture();r.bindTexture(r.TEXTURE_2D,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),s=n.heatmapFbo=e.createFramebuffer(a,o,!1),function(e,t,n,i,r,a){const o=e.gl;o.texImage2D(o.TEXTURE_2D,0,e.isWebGL2&&e.extRenderToTextureHalfFloat?o.RGBA16F:o.RGBA,r,a,0,o.RGBA,e.extRenderToTextureHalfFloat?e.isWebGL2?o.HALF_FLOAT:e.extTextureHalfFloat.HALF_FLOAT_OES:o.UNSIGNED_BYTE,null),i.colorAttachment.set(n)}(e,0,t,s,a,o)}else r.bindTexture(r.TEXTURE_2D,s.colorAttachment.get()),e.bindFramebuffer.set(s.framebuffer)}(a,t,i,"globe"===t.transform.projection.name?.5:.25),a.clear({color:e.Color.transparent});const c=t.transform,u="globe"===c.projection.name,d=u?["PROJECTION_GLOBE_VIEW"]:null,p=u?e.CullFaceMode.frontCCW:e.CullFaceMode.disabled,f=[e.mercatorXfromLng(c.center.lng),e.mercatorYfromLat(c.center.lat)];for(let m=0;m<r.length;m++){const h=r[m];if(n.hasRenderableParent(h))continue;const g=n.getTile(h),y=g.getBucket(i);if(!y||y.projection.name!==c.projection.name)continue;const v=y.programConfigurations.get(i.id),b=t.useProgram("heatmap",v,d),{zoom:_}=t.transform;t.terrain&&t.terrain.setupElevationDraw(g,b),t.prepareDrawProgram(a,b,h.toUnwrapped());const w=c.projection.createInversionMatrix(c,h.canonical);b.draw(a,o.TRIANGLES,e.DepthMode.disabled,s,l,p,Xn(t,h,g,w,f,_,i.paint.get("heatmap-intensity")),i.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,i.paint,t.transform.zoom,v,u?[y.globeExtVertexBuffer]:null)}a.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){const i=t.context,r=i.gl,a=n.heatmapFbo;if(!a)return;i.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,a.colorAttachment.get()),i.activeTexture.set(r.TEXTURE1);let o=n.colorRampTexture;o||(o=n.colorRampTexture=new e.Texture(i,n.colorRamp,r.RGBA)),o.bind(r.LINEAR,r.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(i,r.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,((e,t,n,i)=>({u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}))(0,n),n.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,n.paint,t.transform.zoom)}(t,i))},line:function(t,n,i,r){if("translucent"!==t.renderPass)return;const a=i.paint.get("line-opacity"),o=i.paint.get("line-width");if(0===a.constantOr(1)||0===o.constantOr(1))return;const s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),l=t.colorModeForRenderPass(),c=t.terrain&&t.terrain.renderingToTexture?1:e.exported.devicePixelRatio,u=i.paint.get("line-dasharray"),d=u.constantOr(1),p=i.layout.get("line-cap"),f=i.paint.get("line-pattern"),m=f.constantOr(1),h=i.paint.get("line-gradient"),g=m?"linePattern":"line",y=t.context,v=y.gl,b=(e=>{const t=[];ei(e)&&t.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");const n=e.paint.get("line-trim-offset");0===n[0]&&0===n[1]||t.push("RENDER_LINE_TRIM_OFFSET");const i=e.paint.get("line-pattern").constantOr(1),r=1!==e.paint.get("line-opacity").constantOr(1);return!i&&r&&t.push("RENDER_LINE_ALPHA_DISCARD"),t})(i);let _=b.includes("RENDER_LINE_ALPHA_DISCARD");t.terrain&&t.terrain.clipOrMaskOverlapStencilType()&&(_=!1);for(const a of r){const r=n.getTile(a);if(m&&!r.patternsLoaded())continue;const o=r.getBucket(i);if(!o)continue;t.prepareDrawTile();const w=o.programConfigurations.get(i.id),x=t.useProgram(g,w,b),k=f.constantOr(null);if(k&&r.imageAtlas){const e=r.imageAtlas.patternPositions[k.toString()];e&&w.setConstantPatternPositions(e)}const O=u.constantOr(null),E=p.constantOr(null);if(!m&&O&&E&&r.lineAtlas){const e=r.lineAtlas.getDash(O,E);e&&w.setConstantPatternPositions(e)}let[T,C]=i.paint.get("line-trim-offset");if("round"===E||"square"===E){const e=1;T!==C&&(0===T&&(T-=e),1===C&&(C+=e))}const S=t.terrain?a.projMatrix:null,P=m?Kn(t,r,i,S,c):Jn(t,r,i,S,o.lineClipsArray.length,c,[T,C]);if(h){const r=o.gradients[i.id];let s=r.texture;if(i.gradientVersion!==r.version){let l=256;if(i.stepInterpolant){const i=n.getSource().maxzoom,r=a.canonical.z===i?Math.ceil(1<<t.transform.maxZoom-a.canonical.z):1;l=e.clamp(e.nextPowerOfTwo(o.maxLineLength/e.EXTENT*1024*r),256,y.maxTextureSize)}r.gradient=e.renderColorRamp({expression:i.gradientExpression(),evaluationKey:"lineProgress",resolution:l,image:r.gradient||void 0,clips:o.lineClipsArray}),r.texture?r.texture.update(r.gradient):r.texture=new e.Texture(y,r.gradient,v.RGBA),r.version=i.gradientVersion,s=r.texture}y.activeTexture.set(v.TEXTURE1),s.bind(i.stepInterpolant?v.NEAREST:v.LINEAR,v.CLAMP_TO_EDGE)}d&&(y.activeTexture.set(v.TEXTURE0),r.lineAtlasTexture.bind(v.LINEAR,v.REPEAT),w.updatePaintBuffers()),m&&(y.activeTexture.set(v.TEXTURE0),r.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),w.updatePaintBuffers()),t.prepareDrawProgram(y,x,a.toUnwrapped());const M=n=>{x.draw(y,v.TRIANGLES,s,n,l,e.CullFaceMode.disabled,P,i.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,i.paint,t.transform.zoom,w,[o.layoutVertexBuffer2])};if(_){const n=t.stencilModeForClipping(a).ref;0===n&&t.terrain&&y.clear({stencil:0});const i={func:v.EQUAL,mask:255};P.u_alpha_discard_threshold=.8,M(new e.StencilMode(i,n,255,v.KEEP,v.KEEP,v.INVERT)),P.u_alpha_discard_threshold=0,M(new e.StencilMode(i,n,255,v.KEEP,v.KEEP,v.KEEP))}else M(t.stencilModeForClipping(a))}_&&(t.resetStencilClippingMasks(),t.terrain&&y.clear({stencil:0}))},fill:function(t,n,i,r){const a=i.paint.get("fill-color"),o=i.paint.get("fill-opacity");if(0===o.constantOr(1))return;const s=t.colorModeForRenderPass(),l=i.paint.get("fill-pattern"),c=t.opaquePassEnabledForLayer()&&!l.constantOr(1)&&1===a.constantOr(e.Color.transparent).a&&1===o.constantOr(0)?"opaque":"translucent";if(t.renderPass===c){const a=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);vi(t,n,i,r,a,s,!1)}if("translucent"===t.renderPass&&i.paint.get("fill-antialias")){const a=t.depthModeForSublayer(i.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);vi(t,n,i,r,a,s,!0)}},"fill-extrusion":function(t,n,i,r){const a=i.paint.get("fill-extrusion-opacity");if(0!==a&&"translucent"===t.renderPass){const o=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==a||i.paint.get("fill-extrusion-pattern").constantOr(1))bi(t,n,i,r,o,e.StencilMode.disabled,e.ColorMode.disabled),bi(t,n,i,r,o,t.stencilModeFor3D(),t.colorModeForRenderPass()),t.resetStencilClippingMasks();else{const a=t.colorModeForRenderPass();bi(t,n,i,r,o,e.StencilMode.disabled,a)}}},hillshade:function(t,n,i,r){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const a=t.context,o=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),s=t.colorModeForRenderPass(),l=t.terrain&&t.terrain.renderingToTexture,[c,u]="translucent"!==t.renderPass||l?[{},r]:t.stencilConfigForOverlap(r);for(const r of u){const a=n.getTile(r);if(a.needsHillshadePrepare&&"offscreen"===t.renderPass)bn(t,a,i,o,e.StencilMode.disabled,s);else if("translucent"===t.renderPass){const e=l&&t.terrain?t.terrain.stencilModeForRTTOverlap(r):c[r.overscaledZ];yn(t,r,a,i,o,e,s)}}a.viewport.set([0,0,t.width,t.height]),t.resetStencilClippingMasks()},raster:function(t,n,i,r,a,o){if("translucent"!==t.renderPass)return;if(0===i.paint.get("raster-opacity"))return;if(!r.length)return;const s=t.context,l=s.gl,c=n.getSource(),u=t.useProgram("raster"),d=t.colorModeForRenderPass(),p=t.terrain&&t.terrain.renderingToTexture,[f,m]=c instanceof Se||p?[{},r]:t.stencilConfigForOverlap(r),h=m[m.length-1].overscaledZ,g=!t.options.moving;for(const r of m){const a=p?e.DepthMode.disabled:t.depthModeForSublayer(r.overscaledZ-h,1===i.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,l.LESS),m=r.toUnwrapped(),y=n.getTile(r);if(p&&(!y||!y.hasData()))continue;const v=p?r.projMatrix:t.transform.calculateProjMatrix(m,g),b=t.terrain&&p?t.terrain.stencilModeForRTTOverlap(r):f[r.overscaledZ],_=o?0:i.paint.get("raster-fade-duration");y.registerFadeDuration(_);const w=n.findLoadedParent(r,0),x=Pn(y,w,n,t.transform,_);let k,O;t.terrain&&t.terrain.prepareDrawTile();const E="nearest"===i.paint.get("raster-resampling")?l.NEAREST:l.LINEAR;s.activeTexture.set(l.TEXTURE0),y.texture.bind(E,l.CLAMP_TO_EDGE),s.activeTexture.set(l.TEXTURE1),w?(w.texture.bind(E,l.CLAMP_TO_EDGE),k=Math.pow(2,w.tileID.overscaledZ-y.tileID.overscaledZ),O=[y.tileID.canonical.x*k%1,y.tileID.canonical.y*k%1]):y.texture.bind(E,l.CLAMP_TO_EDGE),y.texture.useMipmap&&s.extTextureFilterAnisotropic&&t.transform.pitch>20&&l.texParameterf(l.TEXTURE_2D,s.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,s.extTextureFilterAnisotropicMax);const T=ti(v,O||[0,0],k||1,x,i,c instanceof Se?c.perspectiveTransform:[0,0]);if(t.prepareDrawProgram(s,u,m),c instanceof Se)c.boundsBuffer&&c.boundsSegments&&u.draw(s,l.TRIANGLES,a,e.StencilMode.disabled,d,e.CullFaceMode.disabled,T,i.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments);else{const{tileBoundsBuffer:n,tileBoundsIndexBuffer:r,tileBoundsSegments:o}=t.getTileBoundsBuffers(y);u.draw(s,l.TRIANGLES,a,b,d,e.CullFaceMode.disabled,T,i.id,n,r,o)}}t.resetStencilClippingMasks()},background:function(t,n,i,r){const a=i.paint.get("background-color"),o=i.paint.get("background-opacity");if(0===o)return;const s=t.context,l=s.gl,c=t.transform,u=c.tileSize,d=i.paint.get("background-pattern");if(t.isPatternMissing(d))return;const p=!d&&1===a.a&&1===o&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==p)return;const f=e.StencilMode.disabled,m=t.depthModeForSublayer(0,"opaque"===p?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),h=t.colorModeForRenderPass(),g=t.useProgram(d?"backgroundPattern":"background");let y,v=r;v||(y=t.getBackgroundTiles(),v=Object.values(y).map(e=>e.tileID)),d&&(s.activeTexture.set(l.TEXTURE0),t.imageManager.bind(t.context));for(const p of v){const v=p.toUnwrapped(),b=r?p.projMatrix:t.transform.calculateProjMatrix(v);t.prepareDrawTile();const _=n?n.getTile(p):y?y[p.key]:new e.Tile(p,u,c.zoom,t),w=d?li(b,o,t,d,{tileID:p,tileSize:u}):si(b,o,a);t.prepareDrawProgram(s,g,v);const{tileBoundsBuffer:x,tileBoundsIndexBuffer:k,tileBoundsSegments:O}=t.getTileBoundsBuffers(_);g.draw(s,l.TRIANGLES,m,f,h,e.CullFaceMode.disabled,w,i.id,x,k,O)}},sky:function(t,n,i){const r=t.transform,a="mercator"===r.projection.name||"globe"===r.projection.name?1:e.smoothstep(7,8,r.zoom),o=i.paint.get("sky-opacity")*a;if(0===o)return;const s=t.context,l=i.paint.get("sky-type"),c=new e.DepthMode(s.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),u=t.frameCounter/1e3%1;"atmosphere"===l?"offscreen"===t.renderPass?i.needsSkyboxCapture(t)&&(function(t,n,i,r){const a=t.context,o=a.gl;let s=n.skyboxFbo;if(!s){s=n.skyboxFbo=a.createFramebuffer(32,32,!1),n.skyboxGeometry=new ji(a),n.skyboxTexture=a.gl.createTexture(),o.bindTexture(o.TEXTURE_CUBE_MAP,n.skyboxTexture),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_CUBE_MAP,o.TEXTURE_MAG_FILTER,o.LINEAR);for(let e=0;e<6;++e)o.texImage2D(o.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,o.RGBA,32,32,0,o.RGBA,o.UNSIGNED_BYTE,null)}a.bindFramebuffer.set(s.framebuffer),a.viewport.set([0,0,32,32]);const l=n.getCenter(t,!0),c=t.useProgram("skyboxCapture"),u=new Float64Array(16);e.identity(u),e.rotateY(u,u,.5*-Math.PI),Li(a,n,c,u,l,0),e.identity(u),e.rotateY(u,u,.5*Math.PI),Li(a,n,c,u,l,1),e.identity(u),e.rotateX(u,u,.5*-Math.PI),Li(a,n,c,u,l,2),e.identity(u),e.rotateX(u,u,.5*Math.PI),Li(a,n,c,u,l,3),e.identity(u),Li(a,n,c,u,l,4),e.identity(u),e.rotateY(u,u,Math.PI),Li(a,n,c,u,l,5),a.viewport.set([0,0,t.width,t.height])}(t,i),i.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,n,i,r,a){const o=t.context,s=o.gl,l=t.transform,c=t.useProgram("skybox");o.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture);const u=((e,t,n,i,r)=>({u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:i,u_temporal_offset:r}))(l.skyboxMatrix,n.getCenter(t,!1),0,r,a);t.prepareDrawProgram(o,c),c.draw(o,s.TRIANGLES,i,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,u,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,i,c,o,u):"gradient"===l&&"sky"===t.renderPass&&function(t,n,i,r,a){const o=t.context,s=o.gl,l=t.transform,c=t.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new ji(o)),o.activeTexture.set(s.TEXTURE0);let u=n.colorRampTexture;u||(u=n.colorRampTexture=new e.Texture(o,n.colorRamp,s.RGBA)),u.bind(s.LINEAR,s.CLAMP_TO_EDGE);const d=((t,n,i,r,a)=>({u_matrix:t,u_color_ramp:0,u_center_direction:n,u_radius:e.degToRad(i),u_opacity:r,u_temporal_offset:a}))(l.skyboxMatrix,n.getCenter(t,!1),n.paint.get("sky-gradient-radius"),r,a);t.prepareDrawProgram(o,c),c.draw(o,s.TRIANGLES,i,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,d,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,i,c,o,u)},debug:function(e,t,n){for(let i=0;i<n.length;i++)Ti(e,t,n[i])},custom:function(t,n,i,r){const a=t.context,o=i.implementation;if(!t.transform.projection.unsupportedLayers||!t.transform.projection.unsupportedLayers.includes("custom")||t.terrain&&(t.terrain.renderingToTexture||"offscreen"===t.renderPass)&&i.isLayerDraped()){if("offscreen"===t.renderPass){const n=o.prerender;if(n){if(t.setCustomLayerDefaults(),a.setColorMode(t.colorModeForRenderPass()),"globe"===t.transform.projection.name){const i=t.transform.pointMerc;n.call(o,a.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[i.x,i.y],t.transform.pixelsPerMeterRatio)}else n.call(o,a.gl,t.transform.customLayerMatrix());a.setDirty(),t.setBaseState()}}else if("translucent"===t.renderPass){if(t.terrain&&t.terrain.renderingToTexture){const n=o.renderToTile;if(n){const i=r[0].canonical,s=new e.MercatorCoordinate(i.x+r[0].wrap*(1<<i.z),i.y,i.z);a.setDepthMode(e.DepthMode.disabled),a.setStencilMode(e.StencilMode.disabled),a.setColorMode(t.colorModeForRenderPass()),t.setCustomLayerDefaults(),n.call(o,a.gl,s),a.setDirty(),t.setBaseState()}return}t.setCustomLayerDefaults(),a.setColorMode(t.colorModeForRenderPass()),a.setStencilMode(e.StencilMode.disabled);const n="3d"===o.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);if(a.setDepthMode(n),"globe"===t.transform.projection.name){const n=t.transform.pointMerc;o.render(a.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[n.x,n.y],t.transform.pixelsPerMeterRatio)}else o.render(a.gl,t.transform.customLayerMatrix());a.setDirty(),t.setBaseState(),a.bindFramebuffer.set(null)}}else e.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Bi{constructor(t,n,i=!1){this.context=new Oe(t,i),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(e,t){const n=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(!(n||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new jn(this,e));const i=this._terrain;this.transform.elevation=n?i:null,i.update(e,this.transform,t)}_updateFog(e){const t=e.fog;if(!t||"globe"===this.transform.projection.name||t.getOpacity(this.transform.pitch)<1||t.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[n,i]=t.getFovAdjustedRange(this.transform._fov);if(n>i)return void(this.transform.fogCullDistSq=null);const r=n+.78*(i-n);this.transform.fogCullDistSq=r*r}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(t,n){if(this.width=t*e.exported.devicePixelRatio,this.height=n*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style.order)this.style._layers[e].resize()}setup(){const t=this.context,n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(n,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);const i=new e.StructArrayLayout2i4;i.emplaceBack(0,0),i.emplaceBack(e.EXTENT,0),i.emplaceBack(0,e.EXTENT),i.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);const r=new e.StructArrayLayout2i4;r.emplaceBack(-1,-1),r.emplaceBack(1,-1),r.emplaceBack(-1,1),r.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);const a=new e.StructArrayLayout4i8;a.emplaceBack(0,0,0,0),a.emplaceBack(e.EXTENT,0,e.EXTENT,0),a.emplaceBack(0,e.EXTENT,0,e.EXTENT),a.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(a,e.boundsAttributes.members),this.mercatorBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);const o=new e.StructArrayLayout3ui6;o.emplaceBack(0,1,2),o.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(o);const s=new e.StructArrayLayout1ui2;for(const e of[0,1,3,2,0])s.emplaceBack(e);this.debugIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,new e.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA),this.identityMat=e.create();const l=this.context.gl;this.stencilClearMode=new e.StencilMode({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(e.window.performance.now()),this.atmosphereBuffer=new Ni(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(t,n.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,Sn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(t,n,i){if(!n||this.currentStencilSource===n.id||!t.isTileClipped()||!i||0===i.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let e=!1;for(const t of i)if(void 0===this._tileClippingMaskIDs[t.key]){e=!0;break}if(!e)return}this.currentStencilSource=n.id;const r=this.context,a=r.gl;this.nextStencilID+i.length>256&&this.clearStencil(),r.setColorMode(e.ColorMode.disabled),r.setDepthMode(e.DepthMode.disabled);const o=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const t of i){const i=n.getTile(t),s=this._tileClippingMaskIDs[t.key]=this.nextStencilID++,{tileBoundsBuffer:l,tileBoundsIndexBuffer:c,tileBoundsSegments:u}=this.getTileBoundsBuffers(i);o.draw(r,a.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:a.ALWAYS,mask:0},s,255,a.KEEP,a.KEEP,a.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Sn(t.projMatrix),"$clipping",l,c,u)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,n=this.context.gl;return new e.StencilMode({func:n.NOTEQUAL,mask:255},t,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);const n=this.context.gl;return new e.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,n.KEEP,n.KEEP,n.REPLACE)}stencilConfigForOverlap(t){const n=this.context.gl,i=t.sort((e,t)=>t.overscaledZ-e.overscaledZ),r=i[i.length-1].overscaledZ,a=i[0].overscaledZ-r+1;if(a>1){this.currentStencilSource=void 0,this.nextStencilID+a>256&&this.clearStencil();const t={};for(let i=0;i<a;i++)t[i+r]=new e.StencilMode({func:n.GEQUAL,mask:255},i+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=a,[t,i]}return[{[r]:e.StencilMode.disabled},i]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}depthModeForSublayer(t,n,i){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;const r=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(i||this.context.gl.LEQUAL,n,[r,r])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,n){this.style=t,this.options=n,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();const i=this.style.order,r=this.style._sourceCaches;for(const e in r){const t=r[e];t.used&&t.prepare(this.context)}const a={},o={},s={};for(const e in r){const t=r[e];a[e]=t.getVisibleCoordinates(),o[e]=a[e].slice().reverse(),s[e]=t.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let e=0;e<i.length;e++)if(this.style._layers[i[e]].is3D()){this.opaquePassCutoff=e;break}if(this.terrain&&(this.terrain.updateTileBinding(s),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.GlobeSharedBuffers(this.context)),!e.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const e of i){const n=this.style._layers[e],i=t._getLayerSourceCache(n);if(!n.hasOffscreenPass()||n.isHidden(this.transform.zoom))continue;const r=i?o[i.id]:void 0;("custom"===n.type||n.isSky()||r&&r.length)&&this.renderLayer(this,i,n,r)}this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon];const l=this.terrain;if(l&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&l.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:n.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=i.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[i[this.currentLayer]],n=t._getLayerSourceCache(e);if(e.isSky())continue;const r=n?o[n.id]:void 0;this._renderTileClippingMasks(e,n,r),this.renderLayer(this,n,e,r)}if(this.style.fog&&this.transform.projection.supportsFog&&function(t,n){const i=t.context,r=i.gl,a=t.transform,o=new e.DepthMode(r.LEQUAL,e.DepthMode.ReadOnly,[0,1]),s=t.useProgram("globeAtmosphere",null,"globe"===a.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),l=e.globeToMercatorTransition(a.zoom),c=n.properties.get("color").toArray01(),u=n.properties.get("high-color").toArray01(),d=n.properties.get("space-color").toArray01PremultipliedAlpha(),p=e.identity$1([]);e.rotateY$1(p,p,-e.degToRad(a._center.lng)),e.rotateX$1(p,p,e.degToRad(a._center.lat)),e.rotateZ$1(p,p,a.angle),e.rotateX$1(p,p,-a._pitch);const f=e.fromQuat(new Float32Array(16),p),m=e.mapValue(n.properties.get("star-intensity"),0,1,0,.25),h=5e-4,g=e.mapValue(n.properties.get("horizon-blend"),0,1,h,.25),y=e.globeUseCustomAntiAliasing(t,i,a)&&g===h?a.worldSize/(2*Math.PI*1.025)-1:a.globeRadius,v=t.frameCounter/1e3%1,b=e.length(a.globeCenterInViewSpace),_=Math.sqrt(Math.pow(b,2)-Math.pow(y,2)),w=Math.acos(_/b),x=((t,n,i,r,a,o,s,l,c,u,d,p,f,m)=>({u_frustum_tl:t,u_frustum_tr:n,u_frustum_br:i,u_frustum_bl:r,u_horizon:a,u_transition:o,u_fadeout_range:s,u_color:l,u_high_color:c,u_space_color:u,u_star_intensity:d,u_star_size:5*e.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:p,u_horizon_angle:f,u_rotation_matrix:m}))(a.frustumCorners.TL,a.frustumCorners.TR,a.frustumCorners.BR,a.frustumCorners.BL,a.frustumCorners.horizon,l,g,c,u,d,m,v,w,f);t.prepareDrawProgram(i,s);const k=t.atmosphereBuffer;k&&s.draw(i,r.TRIANGLES,o,e.StencilMode.disabled,e.ColorMode.alphaBlended,e.CullFaceMode.backCW,x,"skybox",k.vertexBuffer,k.indexBuffer,k.segments)}(this,this.style.fog),this.renderPass="sky",(e.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<i.length;this.currentLayer++){const e=this.style._layers[i[this.currentLayer]],n=t._getLayerSourceCache(e);e.isSky()&&this.renderLayer(this,n,e,n?o[n.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<i.length;){const e=this.style._layers[i[this.currentLayer]],n=t._getLayerSourceCache(e);if(e.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(e)){if(e.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const r=n?("symbol"===e.type?s:o)[n.id]:void 0;this._renderTileClippingMasks(e,n,n?a[n.id]:void 0),this.renderLayer(this,n,e,r),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let n=null;e.values(this.style._layers).forEach(e=>{const i=t._getLayerSourceCache(e);i&&!e.isHidden(this.transform.zoom)&&(!n||n.getSource().maxzoom<i.getSource().maxzoom)&&(n=i)}),n&&this.options.showTileBoundaries&&Di.debug(this,n,n.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;Ci(e,e.transform.height-(t.top||0),3,wi),Ci(e,t.bottom||0,3,xi),Si(e,t.left||0,3,ki),Si(e,e.transform.width-(t.right||0),3,Oi);const n=e.transform.centerPoint;!function(e,t,n,i){Pi(e,t-1,n-10,2,20,i),Pi(e,t-10,n-1,20,2,i)}(e,n.x,e.transform.height-n.y,Ei)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}renderLayer(e,t,n,i){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||i&&i.length)&&(this.id=n.id,this.gpuTimingStart(n),(!e.transform.projection.unsupportedLayers||!e.transform.projection.unsupportedLayers.includes(n.type)||e.terrain&&"custom"===n.type)&&Di[n.type](e,t,n,i,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(e){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;let n=this.gpuTimers[e.id];n||(n=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),n.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,n.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const e=this.context.extTimerQuery,t=e.createQueryEXT();this.deferredRenderGpuTimeQueries.push(t),e.beginQueryEXT(e.TIME_ELAPSED_EXT,t)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}collectGpuTimers(){const e=this.gpuTimers;return this.gpuTimers={},e}collectDeferredRenderGpuQueries(){const e=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],e}queryGpuTimers(e){const t={};for(const n in e){const i=e[n],r=this.context.extTimerQuery,a=r.getQueryObjectEXT(i.query,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(i.query),t[n]=a}return t}queryGpuTimeDeferredRender(e){if(!this.options.gpuTimingDeferredRender)return 0;const t=this.context.extTimerQuery;let n=0;for(const i of e)n+=t.getQueryObjectEXT(i,t.QUERY_RESULT_EXT)/1e6,t.deleteQueryEXT(i);return n}translatePosMatrix(t,n,i,r,a){if(!i[0]&&!i[1])return t;const o=a?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(o){const e=Math.sin(o),t=Math.cos(o);i=[i[0]*t-i[1]*e,i[0]*e+i[1]*t]}const s=[a?i[0]:M(n,i[0],this.transform.zoom),a?i[1]:M(n,i[1],this.transform.zoom),0],l=new Float32Array(16);return e.translate(l,t,s),l}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){return null===e||void 0!==e&&!this.imageManager.getPattern(e.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const e=this.terrain&&this.terrain.renderingToTexture,t=this.terrain&&0===this.terrain.exaggeration(),n=this.style&&this.style.fog,i=[];return this.terrainRenderModeElevated()&&i.push("TERRAIN"),"globe"===this.transform.projection.name&&i.push("GLOBE"),t&&i.push("ZERO_EXAGGERATION"),n&&!e&&0!==n.getOpacity(this.transform.pitch)&&i.push("FOG"),e&&i.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&i.push("OVERDRAW_INSPECTOR"),i}useProgram(e,t,n){this.cache=this.cache||{};const i=n||[],r=this.currentGlobalDefines().concat(i),a=Ln.cacheKey(pn[e],e,r,t);return this.cache[a]||(this.cache[a]=new Ln(this.context,e,pn[e],t,ci[e],r)),this.cache[a]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(t,n,i){if(this.terrain&&this.terrain.renderingToTexture)return;const r=this.style.fog;if(r){const a=r.getOpacity(this.transform.pitch),o=((t,n,i,r,a,o,s,l,c,u,d)=>{const p=t.transform,f=n.properties.get("color").toArray01();f[3]=r;const m=t.frameCounter/1e3%1;return{u_fog_matrix:i?p.calculateFogTileMatrix(i):t.identityMat,u_fog_range:n.getFovAdjustedRange(p._fov),u_fog_color:f,u_fog_horizon_blend:n.properties.get("horizon-blend"),u_fog_temporal_offset:m,u_frustum_tl:a,u_frustum_tr:o,u_frustum_br:s,u_frustum_bl:l,u_globe_pos:c,u_globe_radius:u,u_viewport:d,u_globe_transition:e.globeToMercatorTransition(p.zoom),u_is_globe:+("globe"===p.projection.name)}})(this,r,i,a,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*e.exported.devicePixelRatio,this.transform.height*e.exported.devicePixelRatio]);n.setFogUniformValues(t,o)}}setTileLoadedFlag(e){this.tileLoaded=e}saveCanvasCopy(){const e=this.canvasCopy();e&&(this.frameCopies.push(e),this.tileLoaded=!1)}canvasCopy(){const e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const e=this.style&&this.style.fog;return!!e&&0!==e.getOpacity(this.transform.pitch)}getBackgroundTiles(){const t=this._backgroundTiles,n=this._backgroundTiles={},i=this.transform.coveringTiles({tileSize:512});for(const r of i)n[r.key]=t[r.key]||new e.Tile(r,512,this.transform.tileZoom,this);return n}clearBackgroundTiles(){this._backgroundTiles={}}}class zi{constructor(e=0,t=0,n=0,i=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(n)||n<0||isNaN(i)||i<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=n,this.right=i}interpolate(t,n,i){return null!=n.top&&null!=t.top&&(this.top=e.number(t.top,n.top,i)),null!=n.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,n.bottom,i)),null!=n.left&&null!=t.left&&(this.left=e.number(t.left,n.left,i)),null!=n.right&&null!=t.right&&(this.right=e.number(t.right,n.right,i)),this}getCenter(t,n){const i=e.clamp((this.left+t-this.right)/2,0,t),r=e.clamp((this.top+n-this.bottom)/2,0,n);return new e.Point(i,r)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new zi(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Fi(t,n){const i=e.getColumn(t,3);e.fromQuat(t,n),e.setColumn(t,3,i)}function Ui(t,n){const i=e.identity$1([]);return e.rotateZ$1(i,i,-n),e.rotateX$1(i,i,-t),i}function Hi(t,n){const i=[t[0],t[1],0],r=[n[0],n[1],0];if(e.length(i)>=1e-15){const t=e.normalize([],i);e.scale$2(r,t,e.dot(r,t)),n[0]=r[0],n[1]=r[1]}const a=e.cross([],n,t);if(e.len(a)<1e-15)return null;const o=Math.atan2(-a[1],a[0]);return Ui(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),o)}class Wi{constructor(e,t){this.position=e,this.orientation=t}get position(){return this._position}set position(t){if(t){const n=t instanceof e.MercatorCoordinate?t:new e.MercatorCoordinate(t[0],t[1],t[2]);this._renderWorldCopies&&(n.x=e.wrap(n.x,0,1)),this._position=n}else this._position=null}lookAtPoint(t,n){if(this.orientation=null,!this.position)return;const i=this.position,r=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(t)):0,a=e.MercatorCoordinate.fromLngLat(t,r),o=[a.x-i.x,a.y-i.y,a.z-i.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=Hi(o,n)}setPitchBearing(t,n){this.orientation=Ui(e.degToRad(t),e.degToRad(-n))}}class qi{constructor(t,n){this._transform=e.identity([]),this.orientation=n,this.position=t}get mercatorPosition(){const t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}get position(){const t=e.getColumn(this._transform,3);return[t[0],t[1],t[2]]}set position(t){var n;t&&e.setColumn(this._transform,3,[(n=t)[0],n[1],n[2],1])}get orientation(){return this._orientation}set orientation(t){this._orientation=t||e.identity$1([]),t&&Fi(this._transform,this._orientation)}getPitchBearing(){const e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}setPitchBearing(e,t){this._orientation=Ui(e,t),Fi(this._transform,this._orientation)}forward(){const t=e.getColumn(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=e.getColumn(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=e.getColumn(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(t,n){const i=new Float64Array(16);return e.invert(i,this.getWorldToCamera(t,n)),i}getWorldToCameraPosition(t,n,i){const r=this.position;e.scale$2(r,r,-t);const a=new Float64Array(16);return e.fromScaling(a,[i,i,i]),e.translate(a,a,r),a[10]*=n,a}getWorldToCamera(t,n){const i=new Float64Array(16),r=new Float64Array(4),a=this.position;return e.conjugate(r,this._orientation),e.scale$2(a,a,-t),e.fromQuat(i,r),e.translate(i,i,a),i[1]*=-1,i[5]*=-1,i[9]*=-1,i[13]*=-1,i[8]*=n,i[9]*=n,i[10]*=n,i[11]*=n,i}getCameraToClipPerspective(t,n,i,r){const a=new Float64Array(16);return e.perspective(a,t,n,i,r),a}getDistanceToElevation(t,n=!1){const i=0===t?0:e.mercatorZfromAltitude(t,n?e.latFromMercatorY(this.position[1]):this.position[1]),r=this.forward();return(i-this.position[2])/r[2]}clone(){return new qi([...this.position],[...this.orientation])}}function Vi(t,n){const i=Yi(t.projection,t.zoom,t.width,t.height),r=function(t,n,i,r,a){const o=new e.LngLat(i.lng-180*Zi,i.lat),s=new e.LngLat(i.lng+180*Zi,i.lat),l=t.project(o.lng,o.lat),c=t.project(s.lng,s.lat),u=-Math.atan2(c.y-l.y,c.x-l.x),d=e.MercatorCoordinate.fromLngLat(i);d.y=e.clamp(d.y,-1+Zi,1-Zi);const p=d.toLngLat(),f=t.project(p.lng,p.lat),m=e.MercatorCoordinate.fromLngLat(p);m.x+=Zi;const h=m.toLngLat(),g=t.project(h.lng,h.lat),y=Ji(g.x-f.x,g.y-f.y,u),v=e.MercatorCoordinate.fromLngLat(p);v.y+=Zi;const b=v.toLngLat(),_=t.project(b.lng,b.lat),w=Ji(_.x-f.x,_.y-f.y,u),x=Math.abs(y.x)/Math.abs(w.y),k=e.identity([]);e.rotateZ(k,k,-u*(1-(a?0:r)));const O=e.identity([]);return e.scale(O,O,[1,1-(1-x)*r,1]),O[4]=-w.x/w.y*r,e.rotateZ(O,O,u),e.multiply(O,k,O),O}(t.projection,0,t.center,i,n),a=Gi(t);return e.scale(r,r,[a,a,1]),r}function Gi(t){const n=t.projection,i=Yi(t.projection,t.zoom,t.width,t.height),r=Xi(n,t.center),a=Xi(n,e.LngLat.convert(n.center));return Math.pow(2,r*i+(1-i)*a)}function Yi(t,n,i,r,a=1/0){const o=t.range;if(!o)return 0;const s=Math.min(a,Math.max(i,r)),l=Math.log(s/1024)/Math.LN2;return e.smoothstep(o[0]+l,o[1]+l,n)}const Zi=1/4e4;function Xi(t,n){const i=e.clamp(n.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),r=new e.LngLat(n.lng-180*Zi,i),a=new e.LngLat(n.lng+180*Zi,i),o=t.project(r.lng,i),s=t.project(a.lng,i),l=e.MercatorCoordinate.fromLngLat(r),c=e.MercatorCoordinate.fromLngLat(a),u=s.x-o.x,d=s.y-o.y,p=c.x-l.x,f=c.y-l.y,m=Math.sqrt((p*p+f*f)/(u*u+d*d));return Math.log(m)/Math.LN2}function Ji(e,t,n){const i=Math.cos(n),r=Math.sin(n);return{x:e*i-t*r,y:e*r+t*i}}class Ki{constructor(t,n,i,r,a,o,s){this.tileSize=512,this._renderWorldCopies=void 0===a||a,this._minZoom=t||0,this._maxZoom=n||22,this._minPitch=null==i?0:i,this._maxPitch=null==r?60:r,this.setProjection(o),this.setMaxBounds(s),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new zi,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new qi,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const e=new Ki(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,e.tileSize=this.tileSize,e.mercatorFromTransition=this.mercatorFromTransition,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._seaLevelZoom=this._seaLevelZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e.frustumCorners=this.frustumCorners,e}get elevation(){return this._elevation}set elevation(e){this._elevation!==e&&(this._elevation=e,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(e,t=!1){const n=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||n)&&this._updateCameraOnTerrain(),(e||n)&&this._constrainCamera(t),this._calcMatrices()}getProjection(){return e.pick(this.projection,["name","center","parallels"])}setProjection(n){this.projectionOptions=n||{name:"mercator"};const i=this.projection?this.getProjection():void 0;this.projection=e.getProjection(this.projectionOptions);const r=!t(i,this.getProjection());return r&&this._calcMatrices(),this.mercatorFromTransition=!1,r}setMercatorFromTransition(){const t=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=e.getProjection({name:"mercator"});const n=t!==this.projection.name;return n&&this._calcMatrices(),n}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get cameraWorldSize(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return e.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.Point(this.width,this.height)}get bearing(){return e.wrap(this.rotation,-180,180)}set bearing(e){this.rotation=e}get rotation(){return-this.angle/Math.PI*180}set rotation(t){const n=-t*Math.PI/180;var i;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=(i=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(i[1]=0,i[2]=0),i[0]=1,i[3]=1,i),function(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);e[0]=i*l+a*s,e[1]=r*l+o*s,e[2]=i*-s+a*l,e[3]=r*-s+o*l}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const n=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const e=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/e)}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=e.degToRad(t),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(e){this._averageElevation=e,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const e=this._elevation;this._centerAltitude=e.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=e.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const t=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],i=this.horizonLineFromTop();let r=0,a=0;for(let o=0;o<n.length;o++){const s=new e.Point(n[o][0]*this.width,i+n[o][1]*(this.height-i)),l=t.pointCoordinate(s);if(!l)continue;const c=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);r+=l[3]*c,a+=c}return 0===a?NaN:r/a}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const e=this._seaLevelZoom,t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),n=this.pixelsPerMeter/this.worldSize*t,i=this._mercatorZfromZoom(e),r=this._mercatorZfromZoom(this._maxZoom),a=Math.max(i-n,r);this._setZoom(this._zoomFromMercatorZ(a))}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}computeZoomRelativeTo(t){const n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let i;i=t.z<this._camera.position[2]?[n.x,n.y,n.z]:[t.x,t.y,t.z];const r=e.length(e.sub([],this._camera.position,i));return e.clamp(this._zoomFromMercatorZ(r),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height)return;if(!t.position&&!t.orientation)return;this._updateCameraState();let n=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(t.orientation)),t.position){const i=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(i,this._camera.position)||(this._setCameraPosition(i),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,n=new Wi;return n.position=new e.MercatorCoordinate(t[0],t[1],t[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this.renderWorldCopies,n}_setCameraOrientation(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);const n=e.transformQuat([],[0,0,-1],t),i=e.transformQuat([],[0,-1,0],t);if(i[2]<0)return!1;const r=Hi(n,i);return!!r&&(this._camera.orientation=r,!0)}_setCameraPosition(t){const n=this.zoomScale(this.minZoom)*this.tileSize,i=this.zoomScale(this.maxZoom)*this.tileSize,r=this.cameraToCenterDistance;t[2]=e.clamp(t[2],r/i,r/n),this._camera.position=t}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(t){const n=[new e.UnwrappedTileID(0,t)];if(this.renderWorldCopies){const i=this.pointCoordinate(new e.Point(0,0)),r=this.pointCoordinate(new e.Point(this.width,0)),a=this.pointCoordinate(new e.Point(this.width,this.height)),o=this.pointCoordinate(new e.Point(0,this.height)),s=Math.floor(Math.min(i.x,r.x,a.x,o.x)),l=Math.floor(Math.max(i.x,r.x,a.x,o.x)),c=1;for(let i=s-c;i<=l+c;i++)0!==i&&n.push(new e.UnwrappedTileID(i,t))}return n}coveringTiles(t){let n=this.coveringZoomLevel(t);const i=n,r=this.elevation&&!t.isTerrainDEM,a="mercator"===this.projection.name;if(void 0!==t.minzoom&&n<t.minzoom)return[];void 0!==t.maxzoom&&n>t.maxzoom&&(n=t.maxzoom);const o=this.locationCoordinate(this.center),s=this.center.lat,l=1<<n,c=[l*o.x,l*o.y,0],u="globe"===this.projection.name,d=!u,p=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n,d),f=u?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),m=l*e.mercatorZfromAltitude(1,this.center.lat),h=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),g=[l*f.x,l*f.y,h*(d?1:m)],y=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),v=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?n:0,b=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,_=t.isTerrainDEM?-b:this._elevation?this._elevation.getMinElevationBelowMSL():0,w=this.projection.isReprojectedInTileSpace?Gi(this):1,x=t=>{const n=1/4e4,i=new e.MercatorCoordinate(t.x+n,t.y,t.z),r=new e.MercatorCoordinate(t.x,t.y+n,t.z),a=t.toLngLat(),o=i.toLngLat(),s=r.toLngLat(),l=this.locationCoordinate(a),c=this.locationCoordinate(o),u=this.locationCoordinate(s),d=Math.hypot(c.x-l.x,c.y-l.y),p=Math.hypot(u.x-l.x,u.y-l.y);return Math.sqrt(d*p)*w/n},k=t=>{const n=b,i=_;return{aabb:e.tileAABB(this,l,0,0,0,t,i,n,this.projection),zoom:0,x:0,y:0,minZ:i,maxZ:n,wrap:t,fullyVisible:!1}},O=[];let E=[];const T=n,C=t.reparseOverscaled?i:n,S=e=>e*e,P=S((h-this._centerAltitude)*m),M=e=>{if(!this._elevation||!e.tileID||!a)return;const t=this._elevation.getMinMaxForTile(e.tileID),n=e.aabb;t?(n.min[2]=t.min,n.max[2]=t.max,n.center[2]=(n.min[2]+n.max[2])/2):(e.shouldSplit=I(e),e.shouldSplit||(n.min[2]=n.max[2]=n.center[2]=this._centerAltitude))},I=t=>{if(t.zoom<v)return!0;if(t.zoom===T)return!1;if(null!=t.shouldSplit)return t.shouldSplit;const n=t.aabb.distanceX(g),a=t.aabb.distanceY(g);let o=P,l=1;if(u){o=S(t.aabb.distanceZ(g));const n=Math.pow(2,t.zoom),i=e.latFromMercatorY((t.y+1)/n),r=e.latFromMercatorY(t.y/n),a=Math.min(Math.max(s,i),r),c=e.circumferenceAtLatitude(a)/e.circumferenceAtLatitude(s);if(l=a===s?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,c/this._mercatorScaleRatio),this.zoom<=e.GLOBE_ZOOM_THRESHOLD_MIN&&t.zoom===T-1&&c>=.9)return!0}else if(r&&(o=S(t.aabb.distanceZ(g)*m)),this.projection.isReprojectedInTileSpace&&i<=5){const n=Math.pow(2,t.zoom),i=x(new e.MercatorCoordinate((t.x+.5)/n,(t.y+.5)/n));l=i>.85?1:i}const c=n*n+a*a+o;return c<S((1<<T-t.zoom)*y*l*((e,t)=>{if(t*S(.707)<e)return 1;const n=Math.sqrt(t/e);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(o,P),c))};if(this.renderWorldCopies)for(let e=1;e<=3;e++)O.push(k(-e)),O.push(k(e));for(O.push(k(0));O.length>0;){const i=O.pop(),o=i.x,s=i.y;let d=i.fullyVisible;if(!d){const e=i.aabb.intersects(p);if(0===e)continue;d=2===e}if(i.zoom!==T&&I(i))for(let t=0;t<4;t++){const n=(o<<1)+t%2,c=(s<<1)+(t>>1),p={aabb:a?i.aabb.quadrant(t):e.tileAABB(this,l,i.zoom+1,n,c,i.wrap,i.minZ,i.maxZ,this.projection),zoom:i.zoom+1,x:n,y:c,wrap:i.wrap,fullyVisible:d,tileID:void 0,shouldSplit:void 0,minZ:i.minZ,maxZ:i.maxZ};r&&!u&&(p.tileID=new e.OverscaledTileID(i.zoom+1===T?C:i.zoom+1,i.wrap,i.zoom+1,n,c),M(p)),O.push(p)}else{const r=i.zoom===T?C:i.zoom;if(t.minzoom&&t.minzoom>r)continue;const a=c[0]-(.5+o+(i.wrap<<i.zoom))*(1<<n-i.zoom),l=c[1]-.5-s,u=i.tileID?i.tileID:new e.OverscaledTileID(r,i.wrap,i.zoom,o,s);E.push({tileID:u,distanceSq:a*a+l*l})}}if(this.fogCullDistSq){const n=this.fogCullDistSq,i=this.horizonLineFromTop();E=E.filter(r=>{const a=[0,0,0,1],o=[e.EXTENT,e.EXTENT,0,1],s=this.calculateFogTileMatrix(r.tileID.toUnwrapped());e.transformMat4$1(a,a,s),e.transformMat4$1(o,o,s);const l=e.getAABBPointSquareDist(a,o);if(0===l)return!0;let c=!1;const u=this._elevation;if(u&&l>n&&0!==i){const n=this.calculateProjMatrix(r.tileID.toUnwrapped());let a;t.isTerrainDEM||(a=u.getMinMaxForTile(r.tileID)),a||(a={min:_,max:b});const o=e.furthestTileCorner(this.rotation),s=[o[0]*e.EXTENT,o[1]*e.EXTENT,a.max];e.transformMat4(s,s,n),c=(1-s[1])*this.height*.5<i}return l<n||c})}return E.sort((e,t)=>e.distanceSq-t.distanceSq).map(e=>e.tileID)}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(t){const n=e.clamp(t.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),i=this.projection.project(t.lng,n);return new e.Point(i.x*this.worldSize,i.y*this.worldSize)}unproject(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/e.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(t,n){let i,r;const a=this.centerPoint;if("globe"===this.projection.name){const e=this.worldSize;i=(n.x-a.x)/e,r=(n.y-a.y)/e}else{const e=this.pointCoordinate(n),t=this.pointCoordinate(a);i=e.x-t.x,r=e.y-t.y}const o=this.locationCoordinate(t);this.setLocation(new e.MercatorCoordinate(o.x-i,o.y-r))}setLocation(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(e){return this.projection.locationPoint(this,e)}locationPoint3D(e){return this.projection.locationPoint(this,e,!0)}pointLocation(e){return this.coordinateLocation(this.pointCoordinate(e))}pointLocation3D(e){return this.coordinateLocation(this.pointCoordinate3D(e))}locationCoordinate(t,n){const i=n?e.mercatorZfromAltitude(n,t.lat):void 0,r=this.projection.project(t.lng,t.lat);return new e.MercatorCoordinate(r.x,r.y,i)}coordinateLocation(e){return this.projection.unproject(e.x,e.y)}pointRayIntersection(t,n){const i=null!=n?n:this._centerAltitude,r=[t.x,t.y,0,1],a=[t.x,t.y,1,1];e.transformMat4$1(r,r,this.pixelMatrixInverse),e.transformMat4$1(a,a,this.pixelMatrixInverse);const o=a[3];e.scale$1(r,r,1/r[3]),e.scale$1(a,a,1/o);const s=r[2],l=a[2];return{p0:r,p1:a,t:s===l?0:(i-s)/(l-s)}}screenPointToMercatorRay(t){const n=[t.x,t.y,0,1],i=[t.x,t.y,1,1];return e.transformMat4$1(n,n,this.pixelMatrixInverse),e.transformMat4$1(i,i,this.pixelMatrixInverse),e.scale$1(n,n,1/n[3]),e.scale$1(i,i,1/i[3]),n[2]=e.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,i[2]=e.mercatorZfromAltitude(i[2],this._center.lat)*this.worldSize,e.scale$1(n,n,1/this.worldSize),e.scale$1(i,i,1/this.worldSize),new e.Ray([n[0],n[1],n[2]],e.normalize([],e.sub([],i,n)))}rayIntersectionCoordinate(t){const{p0:n,p1:i,t:r}=t,a=e.mercatorZfromAltitude(n[2],this._center.lat),o=e.mercatorZfromAltitude(i[2],this._center.lat);return new e.MercatorCoordinate(e.number(n[0],i[0],r)/this.worldSize,e.number(n[1],i[1],r)/this.worldSize,e.number(a,o,r))}pointCoordinate(e,t=this._centerAltitude){return this.projection.pointCoordinate(this,e.x,e.y,t)}pointCoordinate3D(t){if(!this.elevation)return this.pointCoordinate(t);let n=this.projection.pointCoordinate3D(this,t.x,t.y);if(n)return new e.MercatorCoordinate(n[0],n[1],n[2]);let i=0,r=this.horizonLineFromTop();if(t.y>r)return this.pointCoordinate(t);const a=.02*r,o=t.clone();for(let t=0;t<10&&r-i>a;t++){o.y=e.number(i,r,.66);const t=this.projection.pointCoordinate3D(this,o.x,o.y);t?(r=o.y,n=t):i=o.y}return n?new e.MercatorCoordinate(n[0],n[1],n[2]):this.pointCoordinate(t)}isPointAboveHorizon(e){return this.projection.isPointAboveHorizon(this,e)}isPointOnSurface(t){if(t.y<0||t.y>this.height||t.x<0||t.x>this.width)return!1;if(this.elevation||this.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX)return!this.isPointAboveHorizon(t);const n=this.pointCoordinate(t);return n.y>=0&&n.y<=1}_coordinatePoint(t,n){const i=n&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,r=[t.x*this.worldSize,t.y*this.worldSize,i+t.toAltitude(),1];return e.transformMat4$1(r,r,this.pixelMatrix),r[3]>0?new e.Point(r[0]/r[3],r[1]/r[3]):new e.Point(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:t,left:n}=this._edgeInsets,i=this.height-this._edgeInsets.bottom,r=this.width-this._edgeInsets.right,a=this.pointLocation3D(new e.Point(n,t)),o=this.pointLocation3D(new e.Point(r,t)),s=this.pointLocation3D(new e.Point(r,i)),l=this.pointLocation3D(new e.Point(n,i));let c=Math.min(a.lng,o.lng,s.lng,l.lng),u=Math.max(a.lng,o.lng,s.lng,l.lng),d=Math.min(a.lat,o.lat,s.lat,l.lat),p=Math.max(a.lat,o.lat,s.lat,l.lat);const f=Math.pow(2,-this.zoom)/16*270,m="globe"===this.projection.name?1:4,h=(t,n,i,r,a)=>{const o=(t+i)/2,s=(n+r)/2,l=new e.Point(o,s),{lng:g,lat:y}=this.pointLocation3D(l),v=Math.max(0,c-g,d-y,g-u,y-p);c=Math.min(c,g),u=Math.max(u,g),d=Math.min(d,y),p=Math.max(p,y),(a<m||v>f)&&(h(t,n,o,s,a+1),h(o,s,i,r,a+1))};if(h(n,t,r,t,1),h(r,t,r,i,1),h(r,i,n,i,1),h(n,i,n,t,1),"globe"===this.projection.name){const[t,n]=e.polesInViewport(this);t?(p=90,u=180,c=-180):n&&(d=-90,u=180,c=-180)}return new e.LngLatBounds(new e.LngLat(c,d),new e.LngLat(u,p))}_getBoundsRectangular(t,n){const{top:i,left:r}=this._edgeInsets,a=this.height-this._edgeInsets.bottom,o=this.width-this._edgeInsets.right,s=new e.Point(r,i),l=new e.Point(o,i),c=new e.Point(o,a),u=new e.Point(r,a);let d=this.pointCoordinate(s,t),p=this.pointCoordinate(l,t);const f=this.pointCoordinate(c,n),m=this.pointCoordinate(u,n),h=(e,t)=>(t.y-e.y)/(t.x-e.x);return d.y>1&&p.y>=0?d=new e.MercatorCoordinate((1-m.y)/h(m,d)+m.x,1):d.y<0&&p.y<=1&&(d=new e.MercatorCoordinate(-m.y/h(m,d)+m.x,0)),p.y>1&&d.y>=0?p=new e.MercatorCoordinate((1-f.y)/h(f,p)+f.x,1):p.y<0&&d.y<=1&&(p=new e.MercatorCoordinate(-f.y/h(f,p)+f.x,0)),(new e.LngLatBounds).extend(this.coordinateLocation(d)).extend(this.coordinateLocation(p)).extend(this.coordinateLocation(m)).extend(this.coordinateLocation(f))}_getBoundsRectangularTerrain(){const e=this.elevation;if(!e.visibleDemTiles.length||e.isUsingMockSource())return this._getBoundsRectangular(0,0);const t=e.visibleDemTiles.reduce((e,t)=>{if(t.dem){const n=t.dem.tree;e.min=Math.min(e.min,n.minimums[0]),e.max=Math.max(e.max,n.maximums[0])}return e},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(t.min*e.exaggeration(),t.max*e.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(e=!0){const t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-t*(1-this._horizonShift);return e?Math.max(0,n):n}getMaxBounds(){return this.maxBounds}setMaxBounds(t){this.maxBounds=t,this.minLat=-e.MAX_MERCATOR_LATITUDE,this.maxLat=e.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=e.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=e.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=e.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(e,t){return this.projection.createTileMatrix(this,t,e)}calculateDistanceTileData(t){const n=t.key,i=this._distanceTileDataCache;if(i[n])return i[n];const r=t.canonical,a=1/this.height,o=this.cameraWorldSize,s=o/this.zoomScale(r.z),l=(r.x+Math.pow(2,r.z)*t.wrap)*s,c=r.y*s,u=this.point;u.x*=o/this.worldSize,u.y*=o/this.worldSize;const d=this.angle,p=Math.sin(-d),f=-Math.cos(-d);return i[n]={bearing:[p,f],center:[(u.x-l)*a,(u.y-c)*a],scale:s/e.EXTENT*a},i[n]}calculateFogTileMatrix(t){const n=t.key,i=this._fogTileMatrixCache;if(i[n])return i[n];const r=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,t);return e.multiply(r,this.worldToFogMatrix,r),i[n]=new Float32Array(r),i[n]}calculateProjMatrix(t,n=!1){const i=t.key,r=n?this._alignedProjMatrixCache:this._projMatrixCache;if(r[i])return r[i];const a=this.calculatePosMatrix(t,this.worldSize);return e.multiply(a,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:n?this.alignedProjMatrix:this.projMatrix,a),r[i]=new Float32Array(a),r[i]}calculatePixelsToTileUnitsMatrix(t){const n=t.tileID.key,i=this._pixelsToTileUnitsCache;if(i[n])return i[n];const r=function(t,n){const{scale:i}=t.tileTransform,r=i*e.EXTENT/(t.tileSize*Math.pow(2,n.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return a=new Float32Array(4),l=(o=n.inverseAdjustmentMatrix)[1],c=o[2],u=o[3],p=(s=[r,r])[1],a[0]=o[0]*(d=s[0]),a[1]=l*d,a[2]=c*p,a[3]=u*p,a;var a,o,s,l,c,u,d,p}(t,this);return i[n]=r,i[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const t=1/this.worldSize,n=e.fromScaling([],[t,t,t]);return e.multiply(n,n,this.globeMatrix),n}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const t=this._elevation;this._updateCameraState();const n=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,i=this._computeCameraPosition(n),r=this._camera.forward(),a=e.mercatorZfromAltitude(1,this._center.lat);i[2]/=a,r[2]/=a,e.normalize(r,r);const o=t.raycast(i,r,t.exaggeration());if(o){const t=e.scaleAndAdd([],i,r,o),n=new e.MercatorCoordinate(t[0],t[1],e.mercatorZfromAltitude(t[2],e.latFromMercatorY(t[1]))),s=(n.z+e.length([n.x-i[0],n.y-i[1],n.z-i[2]*a]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(s),this._centerAltitude=n.toAltitude(),this._center=this.coordinateLocation(n),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(t=!1){if(!this._elevation)return;const n=this._elevation,i=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(i),a=n.getAtPointOrZero(new e.MercatorCoordinate(...r)),o=this.pixelsPerMeter/this.worldSize*a,s=this._minimumHeightOverTerrain(),l=r[2]-o;if(l<=s)if(l<0||t){const t=this.locationCoordinate(this._center,this._centerAltitude),n=[r[0],r[1],t.z-r[2]],i=e.length(n);n[2]-=(s-l)/this._pixelsPerMercatorPixel;const a=e.length(n);if(0===a)return;e.scale$2(n,n,i/a*this._pixelsPerMercatorPixel),this._camera.position=[r[0],r[1],t.z*this._pixelsPerMercatorPixel-n[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const t="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||t){const n=this.center;return n.lat=e.clamp(n.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!t)&&(n.lng=e.clamp(n.lng,this.minLng,this.maxLng)),this.center=n,void(this._constraining=!1)}const n=this._unmodified,{x:i,y:r}=this.point;let a=0,o=i,s=r;const l=this.width/2,c=this.height/2,u=this.worldMinY*this.scale,d=this.worldMaxY*this.scale;if(r-c<u&&(s=u+c),r+c>d&&(s=d-c),d-u<this.height&&(a=Math.max(a,this.height/(d-u)),s=(d+u)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const e=this.worldMinX*this.scale,t=this.worldMaxX*this.scale,n=this.worldSize/2-(e+t)/2;o=(i+n+this.worldSize)%this.worldSize-n,o-l<e&&(o=e+l),o+l>t&&(o=t-l),t-e<this.width&&(a=Math.max(a,this.width/(t-e)),o=(t+e)/2)}o===i&&s===r||(this.center=this.unproject(new e.Point(o,s))),a&&(this.zoom+=this.scaleZoom(a)),this._constrainCamera(),this._unmodified=n,this._constraining=!1}_minZoomForBounds(){let e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,n=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=e.mercatorZfromAltitude(1,this.center.lat)/e.mercatorZfromAltitude(1,e.GLOBE_SCALE_MATCH_LATITUDE));const i=Yi(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,i),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const r="meters"===this.projection.zAxisUnit?n:1,a=this._camera.getWorldToCamera(this.worldSize,r),o=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);o[8]=2*-t.x/this.width,o[9]=2*t.y/this.height;let s=e.mul([],o,a);if(this.projection.isReprojectedInTileSpace){const t=this.locationCoordinate(this.center),n=e.identity([]);e.translate(n,n,[t.x*this.worldSize,t.y*this.worldSize,0]),e.multiply(n,n,Vi(this)),e.translate(n,n,[-t.x*this.worldSize,-t.y*this.worldSize,0]),e.multiply(s,s,n),this.inverseAdjustmentMatrix=function(e){const t=Vi(e,!0);return v([],[t[0],t[1],t[4],t[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=e.scale([],s,[this.worldSize,this.worldSize,this.worldSize/r,1]),this.projMatrix=s,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);const l=e.invert([],o);this.frustumCorners=e.FrustumCorners.fromInvProjectionMatrix(l,this.horizonLineFromTop(),this.height);const c=new Float32Array(16);e.identity(c),e.scale(c,c,[1,-1,1]),e.rotateX(c,c,this._pitch),e.rotateZ(c,c,this.angle);const u=e.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),d=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;u[8]=2*-t.x/this.width,u[9]=2*(t.y+d)/this.height,this.skyboxMatrix=e.multiply(c,u,c);const p=this.point,f=p.x,m=p.y,h=this.width%2/2,g=this.height%2/2,y=Math.cos(this.angle),b=Math.sin(this.angle),_=f-Math.round(f)+y*h+b*g,w=m-Math.round(m)+y*g+b*h,x=new Float64Array(s);if(e.translate(x,x,[_>.5?_-1:_,w>.5?w-1:w,0]),this.alignedProjMatrix=x,s=e.create(),e.scale(s,s,[this.width/2,-this.height/2,1]),e.translate(s,s,[1,-1,0]),this.labelPlaneMatrix=s,s=e.create(),e.scale(s,s,[1,-1,1]),e.translate(s,s,[-1,-1,0]),e.scale(s,s,[2/this.width,2/this.height,1]),this.glCoordMatrix=s,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},s=e.invert(new Float64Array(16),this.pixelMatrix),!s)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=s,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=e.calculateGlobeMatrix(this);const t=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=e.transformMat4(t,t,a),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=s;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const t=this.cameraWorldSizeForFog,n=this.cameraPixelsPerMeter,i=this._camera.position,r=1/this.height/this._pixelsPerMercatorPixel,a=[t,t,n];e.scale$2(a,a,r),e.scale$2(i,i,-1),e.multiply$2(i,i,a);const o=e.create();e.translate(o,o,i),e.scale(o,o,a),this.mercatorFogMatrix=o,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,n,r)}_computeCameraPosition(e){const t=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,n=this._camera.forward(),i=this.point,r=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*t-e/this.worldSize*this._centerAltitude;return[i.x/this.worldSize-n[0]*r,i.y/this.worldSize-n[1]*r,e/this.worldSize*this._centerAltitude-n[2]*r]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(t){const n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),i=this._camera.position[2],r=t[2];let a=1;this.projection.wrap&&(this.center=this.center.wrap()),r>0&&(a=Math.min((n-i)/r,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,a),this._updateStateFromCamera()}_updateStateFromCamera(){const t=this._camera.position,n=this._camera.forward(),{pitch:i,bearing:r}=this._camera.getPitchBearing(),a=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,o=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),s=Math.max((t[2]-a)/Math.cos(i),o),l=this._zoomFromMercatorZ(s);e.scaleAndAdd(t,t,n,s),this._pitch=e.clamp(i,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(r,-Math.PI,Math.PI),this._setZoom(e.clamp(l,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new e.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(e){return Math.pow(2,e)*this.tileSize}_mercatorZfromZoom(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}_minimumHeightOverTerrain(){const e=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(e)}_zoomFromMercatorZ(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}zoomFromMercatorZAdjusted(t){let n=0,i=e.GLOBE_ZOOM_THRESHOLD_MAX,r=0,a=1/0;for(;i-n>1e-6&&i>n;){const e=n+.5*(i-n),o=this.tileSize*Math.pow(2,e),s=this.getCameraToCenterDistance(this.projection,e,o),l=this.scaleZoom(s/(t*this.tileSize)),c=Math.abs(e-l);c<a&&(a=c,r=e),e<l?n=e:i=e}return r}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(e.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(t,n){const i=Math.min(t.x,n.x),r=Math.max(t.x,n.x),a=Math.min(t.y,n.y),o=Math.max(t.y,n.y);if(a<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const s=[new e.Point(i,a),new e.Point(r,o),new e.Point(i,o),new e.Point(r,a)],l=this.renderWorldCopies?-3:0,c=this.renderWorldCopies?4:1;for(const e of s){const t=this.pointRayIntersection(e);if(t.t<0)return!0;const n=this.rayIntersectionCoordinate(t);if(n.x<l||n.y<0||n.x>c||n.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.Point(0,0),new e.Point(this.width,this.height))}zoomDeltaToMovement(t,n){const i=e.length(e.sub([],this._camera.position,t)),r=this._zoomFromMercatorZ(i)+n;return i-this._mercatorZfromZoom(r)}getCameraPoint(){if("globe"===this.projection.name){const t=function([t,n,i],r){const a=[t,n,i,1];e.transformMat4$1(a,a,r);const o=a[3]=Math.max(a[3],1e-6);return a[0]/=o,a[1]/=o,a[2]/=o,a}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new e.Point(t[0],t[1])}{const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,t))}}getCameraToCenterDistance(e,t=this.zoom,n=this.worldSize){const i=Yi(e,t,this.width,this.height,1024),r=e.pixelSpaceConversion(this.center.lat,n,i);return.5/Math.tan(.5*this._fov)*this.height*r}getWorldToCameraMatrix(){const t=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&e.multiply(t,t,this.globeMatrix),t}}function $i(e,t){let n=!1,i=null;const r=()=>{i=null,n&&(e(),i=setTimeout(r,t),n=!1)};return()=>(n=!0,i||r(),i)}class Qi{constructor(t){this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=$i(this._updateHashUnthrottled.bind(this),300)}addTo(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),t.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),e.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const t=this._map;if(!t)return"";const n=er(t);if(this._hashName){const t=this._hashName;let i=!1;const r=e.window.location.hash.slice(1).split("&").map(e=>{const r=e.split("=")[0];return r===t?(i=!0,`${r}=${n}`):e}).filter(e=>e);return i||r.push(`${t}=${n}`),"#"+r.join("&")}return"#"+n}_getCurrentHash(){const t=e.window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map(e=>e.split("=")).forEach(t=>{t[0]===this._hashName&&(e=t)}),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const e=this._map;if(!e)return!1;const t=this._getCurrentHash();if(t.length>=3&&!t.some(e=>isNaN(e))){const n=e.dragRotate.isEnabled()&&e.touchZoomRotate.isEnabled()?+(t[3]||0):e.getBearing();return e.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:n,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t)}}function er(e,t){const n=e.getCenter(),i=Math.round(100*e.getZoom())/100,r=Math.ceil((i*Math.LN2+Math.log(512/360/.5))/Math.LN10),a=Math.pow(10,r),o=Math.round(n.lng*a)/a,s=Math.round(n.lat*a)/a,l=e.getBearing(),c=e.getPitch();let u=t?`/${o}/${s}/${i}`:`${i}/${s}/${o}`;return(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+="/"+Math.round(c)),u}const tr={linearity:.3,easing:e.bezier(0,0,.3,1)},nr=e.extend({deceleration:2500,maxSpeed:1400},tr),ir=e.extend({deceleration:20,maxSpeed:1400},tr),rr=e.extend({deceleration:1e3,maxSpeed:360},tr),ar=e.extend({deceleration:1e3,maxSpeed:90},tr);class or{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,n=e.exported.now();for(;t.length>0&&n-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._map._prefersReducedMotion())return;if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)n.zoom+=e.zoomDelta||0,n.bearing+=e.bearingDelta||0,n.pitch+=e.pitchDelta||0,e.panDelta&&n.pan._add(e.panDelta),e.around&&(n.around=e.around),e.pinchAround&&(n.pinchAround=e.pinchAround);const i=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,r={};if(n.pan.mag()){const a=lr(n.pan.mag(),i,e.extend({},nr,t||{}));r.offset=n.pan.mult(a.amount/n.pan.mag()),r.center=this._map.transform.center,sr(r,a)}if(n.zoom){const e=lr(n.zoom,i,ir);r.zoom=this._map.transform.zoom+e.amount,sr(r,e)}if(n.bearing){const t=lr(n.bearing,i,rr);r.bearing=this._map.transform.bearing+e.clamp(t.amount,-179,179),sr(r,t)}if(n.pitch){const e=lr(n.pitch,i,ar);r.pitch=this._map.transform.pitch+e.amount,sr(r,e)}if(r.zoom||r.bearing){const e=void 0===n.pinchAround?n.around:n.pinchAround;r.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),r.noMoveStart=!0,r}}function sr(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function lr(t,n,i){const{maxSpeed:r,linearity:a,deceleration:o}=i,s=e.clamp(t*a/(n/1e3),-r,r),l=Math.abs(s)/(o*a);return{easing:i.easing,duration:1e3*l,amount:s*(l/2)}}class cr extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,i,r={}){const a=m(n.getCanvasContainer(),i),o=n.unproject(a);super(t,e.extend({point:a,lngLat:o,originalEvent:i},r)),this._defaultPrevented=!1,this.target=n}}class ur extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,i){const r="touchend"===t?i.changedTouches:i.touches,a=h(n.getCanvasContainer(),r),o=a.map(e=>n.unproject(e)),s=a.reduce((e,t,n,i)=>e.add(t.div(i.length)),new e.Point(0,0));super(t,{points:a,point:s,lngLats:o,lngLat:n.unproject(s),originalEvent:i}),this._defaultPrevented=!1}}class dr extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,n){super(e,{originalEvent:n}),this._defaultPrevented=!1}}class pr{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){this._mousedownPos=void 0}wheel(e){return this._firePreventable(new dr(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new cr(e.type,this._map,e))}mouseup(e){this._map.fire(new cr(e.type,this._map,e))}preclick(t){const n=e.extend({},t);n.type="preclick",this._map.fire(new cr(n.type,this._map,n))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||(this.preclick(e),this._map.fire(new cr(e.type,this._map,e)))}dblclick(e){return this._firePreventable(new cr(e.type,this._map,e))}mouseover(e){this._map.fire(new cr(e.type,this._map,e))}mouseout(e){this._map.fire(new cr(e.type,this._map,e))}touchstart(e){return this._firePreventable(new ur(e.type,this._map,e))}touchmove(e){this._map.fire(new ur(e.type,this._map,e))}touchend(e){this._map.fire(new ur(e.type,this._map,e))}touchcancel(e){this._map.fire(new ur(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class fr{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(e){this._map.fire(new cr(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new cr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new cr(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class mr{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(u(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const n=t,i=this._startPos,r=this._lastPos;if(!i||!r||r.equals(n)||!this._box&&n.dist(i)<this._clickTolerance)return;this._lastPos=n,this._box||(this._box=a("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));const o=Math.min(i.x,n.x),s=Math.max(i.x,n.x),l=Math.min(i.y,n.y),c=Math.max(i.y,n.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${o}px,${l}px)`,this._box.style.width=s-o+"px",this._box.style.height=c-l+"px")})}mouseupWindow(t,n){if(!this._active)return;const i=this._startPos,r=n;if(i&&0===t.button){if(this.reset(),f(),i.x!==r.x||i.y!==r.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:e=>e.fitScreenCoordinates(i,r,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",t)}}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),d(),delete this._startPos,delete this._lastPos}_fireEvent(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))}}function hr(e,t){const n={};for(let i=0;i<e.length;i++)n[e[i].identifier]=t[i];return n}class gr{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(t,n,i){(this.centroid||i.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=t.timeStamp),i.length===this.numTouches&&(this.centroid=function(t){const n=new e.Point(0,0);for(const e of t)n._add(e);return n.div(t.length)}(n),this.touches=hr(i,n)))}touchmove(e,t,n){if(this.aborted||!this.centroid)return;const i=hr(n,t);for(const e in this.touches){const t=i[e];(!t||t.dist(this.touches[e])>30)&&(this.aborted=!0)}}touchend(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class yr{constructor(e){this.singleTap=new gr(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(e,t,n){this.singleTap.touchstart(e,t,n)}touchmove(e,t,n){this.singleTap.touchmove(e,t,n)}touchend(e,t,n){const i=this.singleTap.touchend(e,t,n);if(i){const t=e.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(i)<30;if(t&&n||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=i,this.count===this.numTaps)return this.reset(),i}}}class vr{constructor(){this._zoomIn=new yr({numTouches:1,numTaps:2}),this._zoomOut=new yr({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}touchmove(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}touchend(e,t,n){const i=this._zoomIn.touchend(e,t,n),r=this._zoomOut.touchend(e,t,n);return i?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(i)},{originalEvent:e})}):r?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(r)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const br={0:1,2:2};class _r{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(e,t){return!1}_move(e,t){return{}}mousedown(e,t){if(this._lastPoint)return;const n=g(e);this._correctButton(e,n)&&(this._lastPoint=t,this._eventButton=n)}mousemoveWindow(e,t){const n=this._lastPoint;if(n)if(e.preventDefault(),null!=this._eventButton&&function(e,t){const n=br[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(n,t)}mouseupWindow(e){this._lastPoint&&g(e)===this._eventButton&&(this._moved&&f(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wr extends _r{mousedown(e,t){super.mousedown(e,t),this._lastPoint&&(this._active=!0)}_correctButton(e,t){return 0===t&&!e.ctrlKey}_move(e,t){return{around:t,panDelta:t.sub(e)}}}class xr extends _r{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const n=.8*(t.x-e.x);if(n)return this._active=!0,{bearingDelta:n}}contextmenu(e){e.preventDefault()}}class kr extends _r{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const n=-.5*(t.y-e.y);if(n)return this._active=!0,{pitchDelta:n}}contextmenu(e){e.preventDefault()}}class Or{constructor(t,n){this._map=t,this._el=t.getCanvasContainer(),this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset(),e.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)}touchstart(e,t,n){return this._calculateTransform(e,t,n)}touchmove(t,n,i){if(this._active&&!(i.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===i.length&&!e.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return t.cancelable&&t.preventDefault(),this._calculateTransform(t,n,i)}}touchend(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,n,i){i.length>0&&(this._active=!0);const r=hr(i,n),a=new e.Point(0,0),o=new e.Point(0,0);let s=0;for(const e in r){const t=r[e],n=this._touches[e];n&&(a._add(t),o._add(t.sub(n)),s++,r[e]=t)}if(this._touches=r,s<this._minTouches||!o.mag())return;const l=o.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:a.div(s),panDelta:l}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=a("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))+"px")}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class Er{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(e){}_move(e,t,n){return{}}touchstart(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,n){const i=this._firstTwoTouches;if(!i)return;e.preventDefault();const[r,a]=i,o=Tr(n,t,r),s=Tr(n,t,a);if(!o||!s)return;const l=this._aroundCenter?null:o.add(s).div(2);return this._move([o,s],l,e)}touchend(e,t,n){if(!this._firstTwoTouches)return;const[i,r]=this._firstTwoTouches,a=Tr(n,t,i),o=Tr(n,t,r);a&&o||(this._active&&f(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Tr(e,t,n){for(let i=0;i<e.length;i++)if(e[i].identifier===n)return t[i]}function Cr(e,t){return Math.log(e/t)/Math.LN2}class Sr extends Er{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Cr(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Cr(this._distance,n),pinchAround:t}}}function Pr(e,t){return 180*e.angleWith(t)/Math.PI}class Mr extends Er{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t){const n=this._vector;if(this._vector=e[0].sub(e[1]),n&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Pr(this._vector,n),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,n=this._startVector;if(!n)return!1;const i=Pr(e,n);return Math.abs(i)<t}}function Ir(e){return Math.abs(e.y)>Math.abs(e.x)}class Ar extends Er{constructor(e){super(),this._map=e}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(e){this._lastPoints=e,Ir(e[0].sub(e[1]))&&(this._valid=!1)}_move(t,n,i){const r=this._lastPoints;if(!r)return;const a=t[0].sub(r[0]),o=t[1].sub(r[1]);return this._map._cooperativeGestures&&!e.isFullscreen()&&i.touches.length<3||(this._valid=this.gestureBeginsVertically(a,o,i.timeStamp),!this._valid)?void 0:(this._lastPoints=t,this._active=!0,{pitchDelta:(a.y+o.y)/2*-.5})}gestureBeginsVertically(e,t,n){if(void 0!==this._valid)return this._valid;const i=e.mag()>=2,r=t.mag()>=2;if(!i&&!r)return;if(!i||!r)return null==this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const a=e.y>0==t.y>0;return Ir(e)&&Ir(t)&&a}}const jr={panStep:100,bearingStep:15,pitchStep:10};class Lr{constructor(){const e=jr;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,n=0,i=0,r=0,a=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),r=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),r=1);break;case 38:e.shiftKey?i=1:(e.preventDefault(),a=-1);break;case 40:e.shiftKey?i=-1:(e.preventDefault(),a=1);break;default:return}return this._rotationDisabled&&(n=0,i=0),{cameraAnimation:o=>{const s=o.getZoom();o.easeTo({duration:300,easeId:"keyboardHandler",easing:Rr,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:o.getBearing()+n*this._bearingStep,pitch:o.getPitch()+i*this._pitchStep,offset:[-r*this._panStep,-a*this._panStep],center:o.getCenter()},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Rr(e){return e*(2-e)}const Nr=4.000244140625;class Dr{constructor(t,n){this._map=t,this._el=t.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||e.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let n=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const i=e.exported.now(),r=i-(this._lastWheelEventTime||0);this._lastWheelEventTime=i,0!==n&&n%Nr==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(r*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this._active||this._start(t)),t.preventDefault()}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const t=m(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._map.transform;"wheel"===this._type&&t.projection.wrap&&(t._center.lng>=180||t._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const n=()=>t._terrainEnabled()&&this._aroundCoord?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(0!==this._delta){const e="wheel"===this._type&&Math.abs(this._delta)>Nr?this._wheelZoomRate:this._defaultZoomRate;let i=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==i&&(i=1/i);const r=n(),a=Math.pow(2,r),o="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):a;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(o*i))),"wheel"===this._type&&(this._startZoom=r,this._easing=this._smoothOutEasing(200)),this._delta=0}const i="number"==typeof this._targetZoom?this._targetZoom:n(),r=this._startZoom,a=this._easing;let o,s=!1;if("wheel"===this._type&&r&&a){const t=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),n=a(t);o=e.number(r,i,n),t<1?this._frameId||(this._frameId=!0):s=!0}else o=i,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:o-n(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let n=e.ease;if(this._prevEase){const t=this._prevEase,i=(e.exported.now()-t.start)/t.duration,r=t.easing(i+.01)-t.easing(i),a=.27/Math.sqrt(r*r+1e-4)*.01,o=Math.sqrt(.0729-a*a);n=e.bezier(a,o,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:n},n}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=a("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(e.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))+"px")}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class Br{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class zr{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(e,t){return e.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fr{constructor(){this._tap=new yr({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(e,t,n){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=t[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(e,t,n))}touchmove(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const i=t[0],r=i.y-this._swipePoint.y;return this._swipePoint=i,e.preventDefault(),this._active=!0,{zoomDelta:r/128}}}else this._tap.touchmove(e,t,n)}touchend(e,t,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(e,t,n)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ur{constructor(e,t,n){this._el=e,this._mousePan=t,this._touchPan=n}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Hr{constructor(e,t,n){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Wr{constructor(e,t,n,i){this._el=e,this._touchZoom=t,this._touchRotate=n,this._tapDragZoom=i,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const qr=e=>e.zoom||e.drag||e.pitch||e.rotate;class Vr extends e.Event{}class Gr{constructor(){this.constants=[1,1,.01],this.radius=0}setup(t,n){const i=e.sub([],n,t);this.radius=e.length(i[2]<0?e.div([],i,this.constants):[i[0],i[1],0])}projectRay(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);const n=e.scale$2([],t,this.radius);if(n[2]>0){const t=e.scale$2([],[0,0,1],e.dot(n,[0,0,1])),i=e.scale$2([],e.normalize([],[n[0],n[1],0]),this.radius),r=e.add([],n,e.scale$2([],e.sub([],e.add([],i,t),n),2));n[0]=r[0],n[1]=r[1]}return n}}function Yr(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class Zr{constructor(t,n){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new or(t),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Gr,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),e.bindAll(["handleEvent","handleWindowEvent"],this);const i=this._el;this._listeners=[[i,"touchstart",{passive:!0}],[i,"touchmove",{passive:!1}],[i,"touchend",void 0],[i,"touchcancel",void 0],[i,"mousedown",void 0],[i,"mousemove",void 0],[i,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[i,"mouseover",void 0],[i,"mouseout",void 0],[i,"dblclick",void 0],[i,"click",void 0],[i,"keydown",{capture:!1}],[i,"keyup",void 0],[i,"wheel",{passive:!1}],[i,"contextmenu",void 0],[e.window,"blur",void 0]];for(const[t,n,i]of this._listeners)t.addEventListener(n,t===e.window.document?this.handleWindowEvent:this.handleEvent,i)}destroy(){for(const[t,n,i]of this._listeners)t.removeEventListener(n,t===e.window.document?this.handleWindowEvent:this.handleEvent,i)}_addDefaultHandlers(e){const t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new pr(t,e));const i=t.boxZoom=new mr(t,e);this._add("boxZoom",i);const r=new vr,a=new zr;t.doubleClickZoom=new Br(a,r),this._add("tapZoom",r),this._add("clickZoom",a);const o=new Fr;this._add("tapDragZoom",o);const s=t.touchPitch=new Ar(t);this._add("touchPitch",s);const l=new xr(e),c=new kr(e);t.dragRotate=new Hr(e,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new wr(e),d=new Or(t,e);t.dragPan=new Ur(n,u,d),this._add("mousePan",u),this._add("touchPan",d,["touchZoom","touchRotate"]);const p=new Mr,f=new Sr;t.touchZoomRotate=new Wr(n,f,p,o),this._add("touchRotate",p,["touchPan","touchZoom"]),this._add("touchZoom",f,["touchPan","touchRotate"]),this._add("blockableMapEvent",new fr(t));const m=t.scrollZoom=new Dr(t,this);this._add("scrollZoom",m,["mousePan"]);const h=t.keyboard=new Lr;this._add("keyboard",h);for(const n of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])e.interactive&&e[n]&&t[n].enable(e[n])}_add(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!qr(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(e,t,n){for(const i in e)if(i!==n&&(!t||t.indexOf(i)<0))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,e.type+"Window")}_getMapTouches(e){const t=[];for(const n of e)this._el.contains(n.target)&&t.push(n);return t}handleEvent(e,t){this._updatingCamera=!0;const n="renderFrame"===e.type,i=n?void 0:e,r={needsRenderFrame:!1},a={},o={},s=e.touches?this._getMapTouches(e.touches):void 0,l=s?h(this._el,s):n?void 0:m(this._el,e);for(const{handlerName:n,handler:c,allowed:u}of this._handlers){if(!c.isEnabled())continue;let d;this._blockedByActive(o,u,n)?c.reset():c[t||e.type]&&(d=c[t||e.type](e,l,s),this.mergeHandlerResult(r,a,d,n,i),d&&d.needsRenderFrame&&this._triggerRenderFrame()),(d||c.isActive())&&(o[n]=c)}const c={};for(const e in this._previousActiveHandlers)o[e]||(c[e]=i);this._previousActiveHandlers=o,(Object.keys(c).length||Yr(r))&&(this._changes.push([r,a,c]),this._triggerRenderFrame()),(Object.keys(o).length||Yr(r))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:u}=r;u&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],u(this._map))}mergeHandlerResult(t,n,i,r,a){if(!i)return;e.extend(t,i);const o={handlerName:r,originalEvent:i.originalEvent||a};void 0!==i.zoomDelta&&(n.zoom=o),void 0!==i.panDelta&&(n.drag=o),void 0!==i.pitchDelta&&(n.pitch=o),void 0!==i.bearingDelta&&(n.rotate=o)}_applyChanges(){const t={},n={},i={};for(const[r,a,o]of this._changes)r.panDelta&&(t.panDelta=(t.panDelta||new e.Point(0,0))._add(r.panDelta)),r.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+r.zoomDelta),r.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+r.bearingDelta),r.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+r.pitchDelta),void 0!==r.around&&(t.around=r.around),void 0!==r.aroundCoord&&(t.aroundCoord=r.aroundCoord),void 0!==r.pinchAround&&(t.pinchAround=r.pinchAround),r.noInertia&&(t.noInertia=r.noInertia),e.extend(n,a),e.extend(i,o);this._updateMapTransform(t,n,i),this._changes=[]}_updateMapTransform(t,n,i){const r=this._map,a=r.transform,o=e=>[e.x,e.y,e.z];if((e=>{const t=this._eventsInProgress.drag;return t&&!this._handlersById[t.handlerName].isActive()})()&&!Yr(t)){const e=a.zoom;a.cameraElevationReference="sea",a.recenterOnTerrain(),a.cameraElevationReference="ground",e!==a.zoom&&this._map._update(!0)}if(a._isCameraConstrained&&r._stop(!0),!Yr(t))return void this._fireEvents(n,i,!0);let{panDelta:s,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:d,aroundCoord:p,pinchAround:f}=t;a._isCameraConstrained&&(l>0&&(l=0),a._isCameraConstrained=!1),void 0!==f&&(d=f),(l||(e=>n[e]&&!this._eventsInProgress[e])("drag"))&&d&&(this._dragOrigin=o(a.pointCoordinate3D(d)),this._trackingEllipsoid.setup(a._camera.position,this._dragOrigin)),a.cameraElevationReference="sea",r._stop(!0),d=d||r.transform.centerPoint,c&&(a.bearing+=c),u&&(a.pitch+=u),a._updateCameraState();const m=[0,0,0];if(s)if("mercator"===a.projection.name){const e=this._trackingEllipsoid.projectRay(a.screenPointToMercatorRay(d).dir),t=this._trackingEllipsoid.projectRay(a.screenPointToMercatorRay(d.sub(s)).dir);m[0]=t[0]-e[0],m[1]=t[1]-e[1]}else{const t=a.pointCoordinate(d);if("globe"===a.projection.name){s=s.rotate(-a.angle);const n=a._pixelsPerMercatorPixel/a.worldSize;m[0]=-s.x*e.mercatorScale(e.latFromMercatorY(t.y))*n,m[1]=-s.y*e.mercatorScale(a.center.lat)*n}else{const e=a.pointCoordinate(d.sub(s));t&&e&&(m[0]=e.x-t.x,m[1]=e.y-t.y)}}const h=a.zoom,g=[0,0,0];if(l){const t=o(p||a.pointCoordinate3D(d)),n={dir:e.normalize([],e.sub([],t,a._camera.position))};if(n.dir[2]<0){const i=a.zoomDeltaToMovement(t,l);e.scale$2(g,n.dir,i)}}const y=e.add(m,m,g);a._translateCameraConstrained(y),l&&Math.abs(a.zoom-h)>1e-4&&a.recenterOnTerrain(),a.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(n,i,!0)}_fireEvents(t,n,i){const r=qr(this._eventsInProgress),a=qr(t),o={};for(const e in t){const{originalEvent:n}=t[e];this._eventsInProgress[e]||(o[e+"start"]=n),this._eventsInProgress[e]=t[e]}!r&&a&&this._fireEvent("movestart",a.originalEvent);for(const e in o)this._fireEvent(e,o[e]);a&&this._fireEvent("move",a.originalEvent);for(const e in t){const{originalEvent:n}=t[e];this._fireEvent(e,n)}const s={};let l;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:i}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],l=n[t]||i,s[e+"end"]=l)}for(const e in s)this._fireEvent(e,s[e]);const c=qr(this._eventsInProgress);if(i&&(r||a)&&!c){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;t?(n(t.bearing||this._map.getBearing())&&(t.bearing=0),this._map.easeTo(t,{originalEvent:l})):(this._map.fire(new e.Event("moveend",{originalEvent:l})),n(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,n){this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{this._frameId=void 0,this.handleEvent(new Vr("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Xr="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Jr extends e.Evented{constructor(t,n){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=n.bearingSnap,this._respectPrefersReducedMotion=!1!==n.respectPrefersReducedMotion,e.bindAll(["_renderFrameCallback"],this)}getCenter(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(t,n,i){return t=e.Point.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),i)}panTo(t,n,i){return this.easeTo(e.extend({center:t},n),i)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(t,n,i){return this.easeTo(e.extend({zoom:t},n),i)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(t,n,i){return this.easeTo(e.extend({bearing:t},n),i)}resetNorth(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this}resetNorthPitch(t,n){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),n),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(t,n){t=e.LngLatBounds.convert(t);const i=n&&n.bearing||0,r=n&&n.pitch||0,a=t.getNorthWest(),o=t.getSouthEast();return this._cameraForBounds(this.transform,a,o,i,r,n)}_extendCameraOptions(t){const n={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){const e=t.padding;t.padding={top:e,bottom:e,right:e,left:e}}return t.padding=e.extend(n,t.padding),t}_minimumAABBFrustumDistance(e,t){const n=t.max[0]-t.min[0],i=t.max[1]-t.min[1];return n/i>e.aspect?n/(2*Math.tan(.5*e.fovX)*e.aspect):i/(2*Math.tan(.5*e.fovY)*e.aspect)}_cameraForBoundsOnGlobe(t,n,i,r,a,o){const s=t.clone(),l=this._extendCameraOptions(o);s.bearing=r,s.pitch=a;const c=e.LngLat.convert(n),u=e.LngLat.convert(i),d=.5*(c.lat+u.lat),p=.5*(c.lng+u.lng),f=e.latLngToECEF(d,p),m=e.normalize([],f),h=e.normalize([],e.cross([],m,[0,1,0])),g=e.cross([],h,m),y=[h[0],h[1],h[2],0,g[0],g[1],g[2],0,m[0],m[1],m[2],0,0,0,0,1],v=[f,e.latLngToECEF(c.lat,c.lng),e.latLngToECEF(u.lat,c.lng),e.latLngToECEF(u.lat,u.lng),e.latLngToECEF(c.lat,u.lng),e.latLngToECEF(d,c.lng),e.latLngToECEF(d,u.lng),e.latLngToECEF(c.lat,p),e.latLngToECEF(u.lat,p)];let b=e.Aabb.fromPoints(v.map(t=>[e.dot(h,t),e.dot(g,t),e.dot(m,t)]));const _=e.transformMat4([],b.center,y);0===e.squaredLength(_)&&e.set(_,0,0,1),e.normalize(_,_),e.scale$2(_,_,e.GLOBE_RADIUS),s.center=e.ecefToLatLng(_);const w=s.getWorldToCameraMatrix(),x=e.invert(new Float64Array(16),w);b=e.Aabb.applyTransform(b,e.multiply([],w,y)),e.transformMat4(_,_,w);const k=.5*(b.max[2]-b.min[2]),O=this._minimumAABBFrustumDistance(s,b),E=e.scale$2([],[0,0,1],k),T=e.add(E,_,E),C=O+(0===s.pitch?0:e.distance(_,T)),S=s.globeCenterInViewSpace,P=e.sub([],_,[S[0],S[1],S[2]]);e.normalize(P,P),e.scale$2(P,P,C);const M=e.add([],_,P);e.transformMat4(M,M,x);const I=e.earthRadius/e.GLOBE_RADIUS,A=e.length(M),j=e.mercatorZfromAltitude(Math.max(A*I-e.earthRadius,Number.EPSILON),0),L=Math.min(s.zoomFromMercatorZAdjusted(j),l.maxZoom);return L>.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"mercator"}),s.zoom=L,this._cameraForBounds(s,n,i,r,a,o)):{center:s.center,zoom:L,bearing:r,pitch:a}}queryTerrainElevation(t,n){const i=this.transform.elevation;return i?(n=e.extend({},{exaggerated:!0},n),i.getAtPoint(e.MercatorCoordinate.fromLngLat(t),null,n.exaggerated)):null}_cameraForBounds(t,n,i,r,a,o){if("globe"===t.projection.name)return this._cameraForBoundsOnGlobe(t,n,i,r,a,o);const s=t.clone(),l=this._extendCameraOptions(o),c=s.padding;s.bearing=r,s.pitch=a;const u=e.LngLat.convert(n),d=e.LngLat.convert(i),p=new e.LngLat(u.lng,d.lat),f=new e.LngLat(d.lng,u.lat),m=s.project(u),h=s.project(d),g=this.queryTerrainElevation(u),y=this.queryTerrainElevation(d),v=this.queryTerrainElevation(p),b=this.queryTerrainElevation(f),_=[[m.x,m.y,Math.min(g||0,y||0,v||0,b||0)],[h.x,h.y,Math.max(g||0,y||0,v||0,b||0)]];let w=e.Aabb.fromPoints(_);const x=s.getWorldToCameraMatrix(),k=e.invert(new Float64Array(16),x);w=e.Aabb.applyTransform(w,x);const O=e.sub([],w.max,w.min),E=c.left||0,T=c.right||0,C=c.bottom||0,S=c.top||0,{left:P,right:M,top:I,bottom:A}=l.padding,j=.5*(E+T),L=.5*(S+C),R=Math.min(s.scaleZoom(s.scale*Math.min((s.width-(E+T+P+M))/O[0],(s.height-(C+S+A+I))/O[1])),l.maxZoom),N=s.scale/s.zoomScale(R);w=new e.Aabb([w.min[0]-(P+j)*N,w.min[1]-(A+L)*N,w.min[2]],[w.max[0]+(M+j)*N,w.max[1]+(I+L)*N,w.max[2]]);const D=.5*O[2],B=this._minimumAABBFrustumDistance(s,w),z=[0,0,1,0];e.transformMat4$1(z,z,x),e.normalize$2(z,z);const F=e.scale$2([],z,B+D),U=e.add([],w.center,F),H=("number"==typeof l.offset.x&&"number"==typeof l.offset.y?new e.Point(l.offset.x,l.offset.y):e.Point.convert(l.offset)).rotate(-e.degToRad(r));w.center[0]-=H.x*N,w.center[1]+=H.y*N,e.transformMat4(w.center,w.center,k),e.transformMat4(U,U,k);const W=[w.center[0],w.center[1],U[2]*s.pixelsPerMeter];e.scale$2(W,W,1/s.worldSize);const q=e.lngFromMercatorX(W[0]),V=e.latFromMercatorY(W[1]),G=Math.min(s._zoomFromMercatorZ(W[2]),l.maxZoom),Y=new e.LngLat(q,V);return s.mercatorFromTransition&&G<.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"globe"}),s.zoom=G,this._cameraForBounds(s,n,i,r,a,o)):{center:Y,zoom:G,bearing:r,pitch:a}}fitBounds(e,t,n){const i=this.cameraForBounds(e,t);return this._fitInternal(i,t,n)}fitScreenCoordinates(t,n,i,r,a){const o=e.Point.convert(t),s=e.Point.convert(n),l=new e.Point(Math.min(o.x,s.x),Math.min(o.y,s.y)),c=new e.Point(Math.max(o.x,s.x),Math.max(o.y,s.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(o,s))return this;const u=this.transform.pointLocation3D(l),d=this.transform.pointLocation3D(c),p=this.transform.pointLocation3D(new e.Point(l.x,c.y)),f=this.transform.pointLocation3D(new e.Point(c.x,l.y)),m=[Math.min(u.lng,d.lng,p.lng,f.lng),Math.min(u.lat,d.lat,p.lat,f.lat)],h=[Math.max(u.lng,d.lng,p.lng,f.lng),Math.max(u.lat,d.lat,p.lat,f.lat)],g=r&&r.pitch?r.pitch:this.getPitch(),y=this._cameraForBounds(this.transform,m,h,i,g,r);return this._fitInternal(y,r,a)}_fitInternal(t,n,i){return t?(delete(n=e.extend(t,n)).padding,n.linear?this.easeTo(n,i):this.flyTo(n,i)):this}jumpTo(t,n){this.stop();const i=t.preloadOnly?this.transform.clone():this.transform;let r=!1,a=!1,o=!1;return"zoom"in t&&i.zoom!==+t.zoom&&(r=!0,i.zoom=+t.zoom),void 0!==t.center&&(i.center=e.LngLat.convert(t.center)),"bearing"in t&&i.bearing!==+t.bearing&&(a=!0,i.bearing=+t.bearing),"pitch"in t&&i.pitch!==+t.pitch&&(o=!0,i.pitch=+t.pitch),null==t.padding||i.isPaddingEqual(t.padding)||(i.padding=t.padding),t.preloadOnly?(this._preloadTiles(i),this):(this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),r&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),a&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),o&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||e.warnOnce(Xr),this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,n){const i=this.transform;if(!i.projection.supportsFreeCamera)return e.warnOnce(Xr),this;this.stop();const r=i.zoom,a=i.pitch,o=i.bearing;i.setFreeCameraOptions(t);const s=r!==i.zoom,l=a!==i.pitch,c=o!==i.bearing;return this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),s&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),c&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),l&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)),this}easeTo(t,n){this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||this._prefersReducedMotion(t))&&(t.duration=0);const i=this.transform,r=this.getZoom(),a=this.getBearing(),o=this.getPitch(),s=this.getPadding(),l="zoom"in t?+t.zoom:r,c="bearing"in t?this._normalizeBearing(t.bearing,a):a,u="pitch"in t?+t.pitch:o,d="padding"in t?t.padding:i.padding,p=e.Point.convert(t.offset);let f,m,h;if("globe"===i.projection.name){const n=e.MercatorCoordinate.fromLngLat(i.center),r=p.rotate(-i.angle);n.x+=r.x/i.worldSize,n.y+=r.y/i.worldSize;const a=n.toLngLat(),o=e.LngLat.convert(t.center||a);this._normalizeCenter(o),f=i.centerPoint.add(r),m=new e.Point(n.x,n.y).mult(i.worldSize),h=new e.Point(e.mercatorXfromLng(o.lng),e.mercatorYfromLat(o.lat)).mult(i.worldSize).sub(m)}else{f=i.centerPoint.add(p);const n=i.pointLocation(f),r=e.LngLat.convert(t.center||n);this._normalizeCenter(r),m=i.project(n),h=i.project(r).sub(m)}const g=i.zoomScale(l-r);let y,v;t.around&&(y=e.LngLat.convert(t.around),v=i.locationPoint(y));const b=this._zooming||l!==r,_=this._rotating||a!==c,w=this._pitching||u!==o,x=!i.isPaddingEqual(d),k=i=>k=>{if(b&&(i.zoom=e.number(r,l,k)),_&&(i.bearing=e.number(a,c,k)),w&&(i.pitch=e.number(o,u,k)),x&&(i.interpolatePadding(s,d,k),f=i.centerPoint.add(p)),y)i.setLocationAtPoint(y,v);else{const e=i.zoomScale(i.zoom-r),t=l>r?Math.min(2,g):Math.max(.5,g),n=Math.pow(t,1-k),a=i.unproject(m.add(h.mult(k*n)).mult(e));i.setLocationAtPoint(i.renderWorldCopies?a.wrap():a,f)}return t.preloadOnly||this._fireMoveEvents(n),i};if(t.preloadOnly){const e=this._emulate(k,t.duration,i);return this._preloadTiles(e),this}const O={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=b,this._rotating=_,this._pitching=w,this._padding=x,this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,O),this._ease(k(i),e=>{i.recenterOnTerrain(),this._afterEase(n,e)},t),this}_prepareEase(t,n,i={}){this._moving=!0,this.transform.cameraElevationReference="sea",n||i.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!i.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!i.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!i.pitching&&this.fire(new e.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}_afterEase(t,n){if(this._easeId&&n&&this._easeId===n)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const i=this._zooming,r=this._rotating,a=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,i&&this.fire(new e.Event("zoomend",t)),r&&this.fire(new e.Event("rotateend",t)),a&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}flyTo(t,n){if(this._prefersReducedMotion(t)){const i=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(i,n)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);const i=this.transform,r=this.getZoom(),a=this.getBearing(),o=this.getPitch(),s=this.getPadding(),l="zoom"in t?e.clamp(+t.zoom,i.minZoom,i.maxZoom):r,c="bearing"in t?this._normalizeBearing(t.bearing,a):a,u="pitch"in t?+t.pitch:o,d="padding"in t?t.padding:i.padding,p=i.zoomScale(l-r),f=e.Point.convert(t.offset);let m=i.centerPoint.add(f);const h=i.pointLocation(m),g=e.LngLat.convert(t.center||h);this._normalizeCenter(g);const y=i.project(h),v=i.project(g).sub(y);let b=t.curve;const _=Math.max(i.width,i.height),w=_/p,x=v.mag();if("minZoom"in t){const n=e.clamp(Math.min(t.minZoom,r,l),i.minZoom,i.maxZoom),a=_/i.zoomScale(n-r);b=Math.sqrt(a/x*2)}const k=b*b;function O(e){const t=(w*w-_*_+(e?-1:1)*k*k*x*x)/(2*(e?w:_)*k*x);return Math.log(Math.sqrt(t*t+1)-t)}function E(e){return(Math.exp(e)-Math.exp(-e))/2}function T(e){return(Math.exp(e)+Math.exp(-e))/2}const C=O(0);let S=function(e){return T(C)/T(C+b*e)},P=function(e){return _*((T(C)*(E(t=C+b*e)/T(t))-E(C))/k)/x;var t},M=(O(1)-C)/b;if(Math.abs(x)<1e-6||!isFinite(M)){if(Math.abs(_-w)<1e-6)return this.easeTo(t,n);const e=w<_?-1:1;M=Math.abs(Math.log(w/_))/b,P=function(){return 0},S=function(t){return Math.exp(e*b*t)}}t.duration="duration"in t?+t.duration:1e3*M/("screenSpeed"in t?+t.screenSpeed/b:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);const I=a!==c,A=u!==o,j=!i.isPaddingEqual(d),L=i=>p=>{const h=p*M,b=1/S(h);i.zoom=1===p?l:r+i.scaleZoom(b),I&&(i.bearing=e.number(a,c,p)),A&&(i.pitch=e.number(o,u,p)),j&&(i.interpolatePadding(s,d,p),m=i.centerPoint.add(f));const _=1===p?g:i.unproject(y.add(v.mult(P(h))).mult(b));return i.setLocationAtPoint(i.renderWorldCopies?_.wrap():_,m),i._updateCameraOnTerrain(),t.preloadOnly||this._fireMoveEvents(n),i};if(t.preloadOnly){const e=this._emulate(L,t.duration,i);return this._preloadTiles(e),this}return this._zooming=!0,this._rotating=I,this._pitching=A,this._padding=j,this._prepareEase(n,!1),this._ease(L(i),()=>this._afterEase(n),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const e=this._onEaseEnd;this._onEaseEnd=void 0,e.call(this,t)}if(!e){const e=this.handlers;e&&e.stop(!1)}return this}_ease(t,n,i){!1===i.animate||0===i.duration?(t(1),n()):(this._easeStart=e.exported.now(),this._easeOptions=i,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1),n=this._onEaseFrame;n&&n(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,n){t=e.wrap(t,-180,180);const i=Math.abs(t-n);return Math.abs(t-360-n)<i&&(t-=360),Math.abs(t+360-n)<i&&(t+=360),t}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.maxBounds)return;const n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}_prefersReducedMotion(t){return this._respectPrefersReducedMotion&&e.exported.prefersReducedMotion&&!(t&&t.essential)}_emulate(e,t,n){const i=Math.ceil(15*t/1e3),r=[],a=e(n.clone());for(let e=0;e<=i;e++){const t=a(e/i);r.push(t.clone())}return r}}class Kr{constructor(t={}){this.options=t,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){const t=this.options&&this.options.compact;return this._map=e,this._container=a("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=a("button","mapboxgl-ctrl-attrib-button",this._container),a("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=a("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const n=this._map._getUIString("AttributionControl."+t);e.setAttribute("aria-label",n),e.removeAttribute("title"),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));const n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){const i=n.reduce((e,t,i)=>(t.value&&(e+=`${t.key}=${t.value}${i<n.length-1?"&":""}`),e),"?");t.href=`${e.config.FEEDBACK_URL}/${i}#${er(this._map,!0)}`,t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}_updateData(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let e=[];if(this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style._sourceCaches;for(const n in t){const i=t[n];if(i.used){const t=i.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e.sort((e,t)=>e.length-t.length),e=e.filter((t,n)=>{for(let i=n+1;i<e.length;i++)if(e[i].indexOf(t)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[...this.options.customAttribution,...e]:e.unshift(this.options.customAttribution));const n=e.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,e.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class $r{constructor(){e.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(e){this._map=e,this._container=a("div","mapboxgl-ctrl");const t=a("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(const t in e){const n=e[t].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}_updateCompact(){const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}class Qr{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,n=t?this._queue.concat(t):this._queue;for(const t of n)if(t.id===e)return void(t.cancelled=!0)}run(e=0){const t=this._currentlyRunning=this._queue;this._queue=[];for(const n of t)if(!n.cancelled&&(n.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function ea(t,n,i){if(t=new e.LngLat(t.lng,t.lat),n){const r=new e.LngLat(t.lng-360,t.lat),a=new e.LngLat(t.lng+360,t.lat),o=360*Math.ceil(Math.abs(t.lng-i.center.lng)/360),s=i.locationPoint(t).distSqr(n),l=n.x<0||n.y<0||n.x>i.width||n.y>i.height;i.locationPoint(r).distSqr(n)<s&&(l||Math.abs(r.lng-i.center.lng)<o)?t=r:i.locationPoint(a).distSqr(n)<s&&(l||Math.abs(a.lng-i.center.lng)<o)&&(t=a)}for(;Math.abs(t.lng-i.center.lng)>180;){const e=i.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=i.width&&e.y<=i.height)break;t.lng>i.center.lng?t.lng-=360:t.lng+=360}return t}const ta={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class na extends e.Evented{constructor(t,n){if(super(),(t instanceof e.window.HTMLElement||n)&&(t=e.extend({element:t},n)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=t&&t.occludedOpacity||.2,t&&t.element)this._element=t.element,this._offset=e.Point.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=a("div");const n=41,i=27,r=o("svg",{display:"block",height:n*this._scale+"px",width:i*this._scale+"px",viewBox:`0 0 ${i} ${n}`},this._element),s=o("radialGradient",{id:"shadowGradient"},o("defs",{},r));o("stop",{offset:"10%","stop-opacity":.4},s),o("stop",{offset:"100%","stop-opacity":.05},s),o("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},r),o("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},r),o("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},r),o("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},r),this._offset=e.Point.convert(t&&t.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",e=>{e.preventDefault()}),this._element.addEventListener("mousedown",e=>{e.preventDefault()});const i=this._element.classList;for(const e in ta)i.remove("mapboxgl-marker-anchor-"+e);i.add("mapboxgl-marker-anchor-"+this._anchor),this._popup=null}addTo(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),e.on("click",this._onMapClick)),this}remove(){const e=this._map;return e&&(e.off("click",this._onMapClick),e.off("move",this._updateMoving),e.off("moveend",this._update),e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler),e.off("mouseup",this._onUp),e.off("touchend",this._onUp),e.off("mousemove",this._onMove),e.off("touchmove",this._onMove),e.off("remove",this._clearFadeTimer),e._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,n=13.5,i=Math.sqrt(Math.pow(n,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[i,-1*(t-n+i)],"bottom-right":[-i,-1*(t-n+i)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,e._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(e){const t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()}_onMapClick(e){const t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(e.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const e=this._map,t=this._pos;if(!e||!t)return!1;const n=e.unproject(t),i=e.getFreeCameraOptions();if(!i.position)return!1;const r=i.position.toLngLat();return r.distanceTo(n)<.9*r.distanceTo(this._lngLat)}_evaluateOpacity(){const t=this._map;if(!t)return;const n=this._pos;if(!n||n.x<0||n.x>t.transform.width||n.y<0||n.y>t.transform.height)return void this._clearFadeTimer();const i=t.unproject(n);let r;t._showingGlobe()&&e.isLngLatBehindGlobe(t.transform,this._lngLat)?r=0:(r=1-t._queryFogOpacity(i),t.transform._terrainEnabled()&&t.getTerrain()&&this._behindTerrain()&&(r*=this._occludedOpacity)),this._element.style.opacity=""+r,this._element.style.pointerEvents=r>0?"auto":"none",this._popup&&this._popup._setOpacity(r),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const e=this._pos;if(!e||!this._map)return;const t=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${e.x}px,${e.y}px)\n            ${ta[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${t.x}px,${t.y}px)\n        `}_calculateXYTransform(){const t=this._pos,n=this._map,i=this.getPitchAlignment();if(!n||!t||"map"!==i)return"";if(!n._showingGlobe()){const e=n.getPitch();return e?`rotateX(${e}deg)`:""}const r=e.radToDeg(e.globeTiltAtLngLat(n.transform,this._lngLat)),a=t.sub(e.globeCenterToScreenPoint(n.transform)),o=Math.abs(a.x)+Math.abs(a.y);if(0===o)return"";const s=r/o;return`rotateX(${-a.y*s}deg) rotateY(${a.x*s}deg)`}_calculateZTransform(){const t=this._pos,n=this._map;if(!n||!t)return"";let i=0;const r=this.getRotationAlignment();if("map"===r)if(n._showingGlobe()){const t=n.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),r=n.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(t);i=e.radToDeg(Math.atan2(r.y,r.x))-90}else i=-n.getBearing();else if("horizon"===r){const r=e.smoothstep(4,6,n.getZoom()),a=e.globeCenterToScreenPoint(n.transform);a.y+=r*n.transform.height;const o=t.sub(a),s=e.radToDeg(Math.atan2(o.y,o.x));i=(s>90?s-270:s+90)*(1-r)}return i+=this._rotation,i?`rotateZ(${i}deg)`:""}_update(t){e.window.cancelAnimationFrame(this._updateFrameId);const n=this._map;n&&(n.transform.renderWorldCopies&&(this._lngLat=ea(this._lngLat,this._pos,n.transform)),this._pos=n.project(this._lngLat),!0===t?this._updateFrameId=e.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),n._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(n._showingGlobe()||n.getTerrain()||n.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(t){return this._offset=e.Point.convert(t),this._update(),this}_onMove(t){const n=this._map;if(!n)return;const i=this._pointerdownPos,r=this._positionDelta;if(i&&r){if(!this._isDragging){const e=this._clickTolerance||n._clickTolerance;if(t.point.dist(i)<e)return;this._isDragging=!0}this._pos=t.point.sub(r),this._lngLat=n.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const t=this._map;t&&(t.off("mousemove",this._onMove),t.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}_addDragHandler(e){const t=this._map,n=this._pos;t&&n&&this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(n),this._pointerdownPos=e.point,this._state="pending",t.on("mousemove",this._onMove),t.on("touchmove",this._onMove),t.once("mouseup",this._onUp),t.once("touchend",this._onUp))}setDraggable(e){this._draggable=!!e;const t=this._map;return t&&(e?(t.on("mousedown",this._addDragHandler),t.on("touchstart",this._addDragHandler)):(t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(e){return this._occludedOpacity=e||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const ia={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ra=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function aa(t=new e.Point(0,0),n="bottom"){if("number"==typeof t){const i=Math.round(Math.sqrt(.5*Math.pow(t,2)));switch(n){case"top":return new e.Point(0,t);case"top-left":return new e.Point(i,i);case"top-right":return new e.Point(-i,i);case"bottom":return new e.Point(0,-t);case"bottom-left":return new e.Point(i,-i);case"bottom-right":return new e.Point(-i,-i);case"left":return new e.Point(t,0);case"right":return new e.Point(-t,0)}return new e.Point(0,0)}return t instanceof e.Point||Array.isArray(t)?e.Point.convert(t):e.Point.convert(t[n]||[0,0])}class oa{constructor(e){this.jumpTo(e)}getValue(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;const n=e.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}isEasing(e){return e>=this._startTime&&e<=this._endTime}jumpTo(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}easeTo(e,t,n){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+n}}const sa={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use  + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},la={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0},ca={showCompass:!0,showZoom:!0,visualizePitch:!1};class ua{constructor(t,n,i=!1){this._clickTolerance=10,this.element=n,this.mouseRotate=new xr({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,i&&(this.mousePitch=new kr({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener("mousedown",this.mousedown),n.addEventListener("touchstart",this.touchstart,{passive:!1}),n.addEventListener("touchmove",this.touchmove),n.addEventListener("touchend",this.touchend),n.addEventListener("touchcancel",this.reset)}down(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),u()}move(e,t){const n=this.map,i=this.mouseRotate.mousemoveWindow(e,t),r=i&&i.bearingDelta;if(r&&n.setBearing(n.getBearing()+r),this.mousePitch){const i=this.mousePitch.mousemoveWindow(e,t),r=i&&i.pitchDelta;r&&n.setPitch(n.getPitch()+r)}}off(){const e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart,{passive:!1}),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){d(),e.window.removeEventListener("mousemove",this.mousemove),e.window.removeEventListener("mouseup",this.mouseup)}mousedown(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),m(this.element,t)),e.window.addEventListener("mousemove",this.mousemove),e.window.addEventListener("mouseup",this.mouseup)}mousemove(e){this.move(e,m(this.element,e))}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=h(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos))}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=h(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos))}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const da={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},pa={maxWidth:100,unit:"metric"},fa={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},ma={version:e.version,supported:n,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:class extends Jr{constructor(t){if(e.LivePerformanceUtils.mark(e.PerformanceMarkers.create),null!=(t=e.extend({},la,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(t.antialias&&e.isSafariWithAntialiasingBug(e.window)&&(t.antialias=!1,e.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Ki(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t),this._interactive=t.interactive,this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._useWebGL2=t.useWebGL2,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=t.crossSourceCollisions,this._collectResourceTiming=t.collectResourceTiming,this._optimizeForTerrain=t.optimizeForTerrain,this._language=this._parseLanguage(t.language),this._worldview=t.worldview,this._renderTaskQueue=new Qr,this._domRenderTaskQueue=new Qr,this._controls=[],this._markers=[],this._popups=[],this._mapId=e.uniqueId(),this._locale=e.extend({},sa,t.locale),this._clickTolerance=t.clickTolerance,this._cooperativeGestures=t.cooperativeGestures,this._performanceMetricsCollection=t.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new oa(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken,t.testMode),this._silenceAuthErrors=!!t.testMode,"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error(`Container '${t.container}' not found.`)}else{if(!(t.container instanceof e.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(this._container.childNodes.length>0&&e.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1),e.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new Zr(this,t),this._localFontFamily=t.localFontFamily,this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),t.projection&&this.setProjection(t.projection),this._hash=t.hash&&new Qi("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),t.attributionControl&&this.addControl(new Kr({customAttribution:t.customAttribution})),this._logoControl=new $r,this.addControl(this._logoControl,t.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",t=>{this._update("style"===t.dataType),this.fire(new e.Event(t.dataType+"data",t))}),this.on("dataloading",t=>{this.fire(new e.Event(t.dataType+"dataloading",t))})}_getMapId(){return this._mapId}addControl(t,n){if(void 0===n&&(n=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const i=t.onAdd(this);this._controls.push(t);const r=this._controlPositions[n];return-1!==n.indexOf("bottom")?r.insertBefore(i,r.firstChild):r.appendChild(i),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(t);return n>-1&&this._controls.splice(n,1),t.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(t){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const n=!this._moving;return n&&this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)),this.fire(new e.Event("resize",t)),n&&this.fire(new e.Event("moveend",t)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(t){return"auto"===t?e.window.navigator.language:Array.isArray(t)?0===t.length?void 0:t.map(t=>"auto"===t?e.window.navigator.language:t):t}setLanguage(e){const t=this._parseLanguage(e);if(!this.style||t===this._language)return this;this._language=t,this.style._reloadSources();for(const e of this._controls)e._setLanguage&&e._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(e){return this.style&&e!==this._worldview?(this._worldview=e,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(e){return this._lazyInitEmptyStyle(),e?"string"==typeof e&&(e={name:e}):e=null,this._useExplicitProjection=!!e,this._prioritizeAndUpdateProjection(e,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const t=this.transform,n=t.projection.name;let i;"globe"===n&&t.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?(t.setMercatorFromTransition(),i=!0):"mercator"===n&&t.zoom<e.GLOBE_ZOOM_THRESHOLD_MAX&&(t.setProjection({name:"globe"}),i=!0),i&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(e,t){return this._updateProjection(e||t||{name:"mercator"})}_updateProjection(t){let n;if(n="globe"===t.name&&this.transform.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(t),this.style.applyProjectionUpdate(),n){this.painter.clearBackgroundTiles();for(const e in this.style._sourceCaches)this.style._sourceCaches[e].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}unproject(t){return this.transform.pointLocation3D(e.Point.convert(t))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(e,t,n){if("mouseenter"===e||"mouseover"===e){let i=!1;const r=r=>{const a=t.filter(e=>this.getLayer(e)),o=a.length?this.queryRenderedFeatures(r.point,{layers:a}):[];o.length?i||(i=!0,n.call(this,new cr(e,this,r.originalEvent,{features:o}))):i=!1},a=()=>{i=!1};return{layers:new Set(t),listener:n,delegates:{mousemove:r,mouseout:a}}}if("mouseleave"===e||"mouseout"===e){let i=!1;const r=r=>{const a=t.filter(e=>this.getLayer(e));(a.length?this.queryRenderedFeatures(r.point,{layers:a}):[]).length?i=!0:i&&(i=!1,n.call(this,new cr(e,this,r.originalEvent)))},a=t=>{i&&(i=!1,n.call(this,new cr(e,this,t.originalEvent)))};return{layers:new Set(t),listener:n,delegates:{mousemove:r,mouseout:a}}}{const i=e=>{const i=t.filter(e=>this.getLayer(e)),r=i.length?this.queryRenderedFeatures(e.point,{layers:i}):[];r.length&&(e.features=r,n.call(this,e),delete e.features)};return{layers:new Set(t),listener:n,delegates:{[e]:i}}}}on(e,t,n){if(void 0===n)return super.on(e,t);Array.isArray(t)||(t=[t]);const i=this._createDelegatedListener(e,t,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(i);for(const e in i.delegates)this.on(e,i.delegates[e]);return this}once(e,t,n){if(void 0===n)return super.once(e,t);Array.isArray(t)||(t=[t]);const i=this._createDelegatedListener(e,t,n);for(const e in i.delegates)this.once(e,i.delegates[e]);return this}off(e,t,n){if(void 0===n)return super.off(e,t);t=new Set(Array.isArray(t)?t:[t]);const i=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0},r=this._delegatedListeners?this._delegatedListeners[e]:void 0;return r&&(e=>{for(let r=0;r<e.length;r++){const a=e[r];if(a.listener===n&&i(a.layers,t)){for(const e in a.delegates)this.off(e,a.delegates[e]);return e.splice(r,1),this}}})(r),this}queryRenderedFeatures(t,n){return this.style?(void 0!==n||void 0===t||t instanceof e.Point||Array.isArray(t)||(n=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}isPointOnSurface(t){const{name:n}=this.transform.projection;return"globe"!==n&&"mercator"!==n&&e.warnOnce(n+" projection does not support isPointOnSurface, this API may behave unexpectedly."),this.transform.isPointOnSurface(e.Point.convert(t))}setStyle(t,n){return!1!==(n=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(t,n))}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),e&&(this.style=new Qt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Qt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(t,n){if("string"==typeof t){const i=this._requestManager.normalizeStyleURL(t),r=this._requestManager.transformRequest(i,e.ResourceType.Style);e.getJSON(r,(t,i)=>{t?this.fire(new e.ErrorEvent(t)):i&&this._updateDiff(i,n)})}else"object"==typeof t&&this._updateDiff(t,n)}_updateDiff(t,n){try{this.style.setState(t)&&this._update(!0)}catch(i){e.warnOnce(`Unable to perform style diff: ${i.message||i.error||i}.  Rebuilding the style from scratch.`),this._updateStyle(t,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(e.warnOnce("There is no style added to the map."),!1)}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){return!!this.style&&this.style._isSourceCacheLoaded(e)}areTilesLoaded(){const e=this.style&&this.style._sourceCaches;for(const t in e){const n=e[t]._tiles;for(const e in n){const t=n[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}addSourceType(e,t,n){this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,n)}removeSource(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(t,n,{pixelRatio:i=1,sdf:r=!1,stretchX:a,stretchY:o,content:s}={}){if(this._lazyInitEmptyStyle(),n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap){const{width:l,height:c,data:u}=e.exported.getImageData(n);this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},u),pixelRatio:i,stretchX:a,stretchY:o,content:s,sdf:r,version:0})}else if(void 0===n.width||void 0===n.height)this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:l,height:c}=n,u=n;this.style.addImage(t,{data:new e.RGBAImage({width:l,height:c},new Uint8Array(u.data)),pixelRatio:i,stretchX:a,stretchY:o,content:s,sdf:r,version:0,userImage:u}),u.onAdd&&u.onAdd(this,t)}}updateImage(t,n){const i=this.style.getImage(t);if(!i)return void this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const r=n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap?e.exported.getImageData(n):n,{width:a,height:o}=r;void 0!==a&&void 0!==o?a===i.data.width&&o===i.data.height?(i.data.replace(r.data,!(n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap)),this.style.updateImage(t,i)):this.fire(new e.ErrorEvent(new Error(`The width and height of the updated image (${a}, ${o})\n                must be that same as the previous version of the image\n                (${i.data.width}, ${i.data.height})`))):this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(t,n){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),(t,i)=>{n(t,i instanceof e.window.HTMLImageElement?e.exported.getImageData(i):i)})}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}setLayerZoomRange(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}setFilter(e,t,n={}){return this.style.setFilter(e,t,n),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,n,i={}){return this.style.setPaintProperty(e,t,n,i),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,n,i={}){return this.style.setLayoutProperty(e,t,n,i),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(t),this.transform):0}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}_updateContainerDimensions(){if(!this._container)return;const t=this._container.getBoundingClientRect().width||400,n=this._container.getBoundingClientRect().height||300;let i,r,a,o=this._container;for(;o&&(!r||!a);){const t=e.window.getComputedStyle(o).transform;t&&"none"!==t&&(i=t.match(/matrix.*\((.+)\)/)[1].split(", "),i[0]&&"0"!==i[0]&&"1"!==i[0]&&(r=i[0]),i[3]&&"0"!==i[3]&&"1"!==i[3]&&(a=i[3])),o=o.parentElement}this._containerWidth=r?Math.abs(t/r):t,this._containerHeight=a?Math.abs(n/a):n}_detectMissingCSS(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=a("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();const t=this._canvasContainer=a("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=a("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const n=this._controlContainer=a("div","mapboxgl-control-container",e),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(e=>{i[e]=a("div","mapboxgl-ctrl-"+e,n)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(t,n){const i=e.exported.devicePixelRatio||1;this._canvas.width=i*Math.ceil(t),this._canvas.height=i*Math.ceil(n),this._canvas.style.width=t+"px",this._canvas.style.height=n+"px"}_addMarker(e){this._markers.push(e)}_removeMarker(e){const t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1)}_addPopup(e){this._popups.push(e)}_removePopup(e){const t=this._popups.indexOf(e);-1!==t&&this._popups.splice(t,1)}_setupPainter(){const t=e.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._useWebGL2&&this._canvas.getContext("webgl2",t),r=i||this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);r?(this._useWebGL2&&!i&&e.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),e.storeAuthState(r,!0),this.painter=new Bi(r,this.transform,!!i),this.on("data",e=>{"source"===e.dataType&&this.painter.setTileLoadedFlag(!0)}),e.exported$1.testSupport(r)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}_contextRestored(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_requestDomTask(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e)}_render(t){let n;const i=this.painter.context.extTimerQuery,r=e.exported.now();if(this.listens("gpu-timing-frame")&&(n=i.createQueryEXT(),i.beginQueryEXT(i.TIME_ELAPSED_EXT,n)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],e.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],e.window.performance.now())),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),this._removed)return;this._updateProjectionTransition();const a=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,n=this.transform.pitch,i=e.exported.now(),r=new e.EvaluationParameters(t,{now:i,fadeDuration:a,pitch:n,transition:this.style.getTransition()});this.style.update(r)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let o=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),o=this._updateAverageElevation(r),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):o=this._updateAverageElevation(r),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,a,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:a,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),n){const t=e.exported.now()-r;i.endQueryEXT(i.TIME_ELAPSED_EXT,n),setTimeout(()=>{const a=i.getQueryObjectEXT(n,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(n),this.fire(new e.Event("gpu-timing-frame",{cpuTime:t,gpuTime:a})),e.window.performance.mark("frame-gpu",{startTime:r,detail:{gpuTime:a}})},50)}if(this.listens("gpu-timing-layer")){const t=this.painter.collectGpuTimers();setTimeout(()=>{const n=this.painter.queryGpuTimers(t);this.fire(new e.Event("gpu-timing-layer",{layerTimes:n}))},50)}if(this.listens("gpu-timing-deferred-render")){const t=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const n=this.painter.queryGpuTimeDeferredRender(t);this.fire(new e.Event("gpu-timing-deferred-render",{gpuTime:n}))},50)}const s=this._sourcesDirty||this._styleDirty||this._placementDirty||o;if(s||this._repaint)this.triggerRepaint();else{const t=!this.isMoving()&&this.loaded();if(t&&(o=this._updateAverageElevation(r,!0)),o)this.triggerRepaint();else if(this._triggerFrame(!1),t&&(this.fire(new e.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const t=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:t})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||s||(this._fullyLoaded=!0,e.LivePerformanceUtils.mark(e.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&e.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(e){for(const t of this._markers)e&&!this.getRenderWorldCopies()&&(t._lngLat=t._lngLat.wrap()),t._update();for(const t of this._popups)!e||this.getRenderWorldCopies()||t._trackPointer||(t._lngLat=t._lngLat.wrap()),t._update()}_updateAverageElevation(e,t=!1){const n=e=>(this.transform.averageElevation=e,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&n(0);if((t||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){const t=this.transform.averageElevation;let i=this.transform.sampleAverageElevation(),r=!1;this.transform.elevation&&(r=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(i)?i=0:this._averageElevationLastSampledAt=e;const a=Math.abs(t-i);if(a>1){if(this._isInitialLoad||r)return this._averageElevation.jumpTo(i),n(i);this._averageElevation.easeTo(i,e,300)}else if(a>1e-4)return this._averageElevation.jumpTo(i),n(i)}return!!this._averageElevation.isEasing(e)&&n(this._averageElevation.getValue(e))}_authenticate(){e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,t=>{if(t&&(t.message===e.AUTH_ERR_MSG||401===t.status)){const t=this.painter.context.gl;e.storeAuthState(t,!1),this._logoControl instanceof $r&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new e.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const e=this._isDragging();this.painter.updateTerrain(this.style,e)}_calculateSpeedIndex(){const e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const n=this.painter.context.gl,i=n.createFramebuffer();function r(e){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);const t=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,t),t}return n.bindFramebuffer(n.FRAMEBUFFER,i),this._canvasPixelComparison(r(e),t.canvasCopies.map(r),t.timeStamps)}_canvasPixelComparison(e,t,n){let i=n[1]-n[0];const r=e.length/4;for(let a=0;a<t.length;a++){const o=t[a];let s=0;for(let t=0;t<o.length;t+=4)o[t]===e[t]&&o[t+1]===e[t+1]&&o[t+2]===e[t+2]&&o[t+3]===e[t+3]&&(s+=1);i+=(n[a+2]-n[a+1])*(1-s/r)}return i}remove(){this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1),e.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(t){this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.exported.frame(e=>{const t=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,t&&this._render(e)}))}_preloadTiles(t){const n=this.style?Object.values(this.style._sourceCaches):[];return e.asyncAll(n,(e,n)=>e._preloadTiles(t,n),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update()}_onVisibilityChange(){"hidden"===e.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(e){this._showTileAABBs!==e&&(this._showTileAABBs=e,e&&this._update())}_setCacheLimits(t,n){e.setCacheLimits(t,n)}get version(){return e.version}},NavigationControl:class{constructor(t){this.options=e.extend({},ca,t),this._container=a("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",e=>{this._map&&this._map.zoomIn({},{originalEvent:e})}),a("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",e=>{this._map&&this._map.zoomOut({},{originalEvent:e})}),a("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",e=>{const t=this._map;t&&(this.options.visualizePitch?t.resetNorthPitch({},{originalEvent:e}):t.resetNorth({},{originalEvent:e}))}),this._compassIcon=a("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const e=this._map;if(!e)return;const t=e.getZoom(),n=t===e.getMaxZoom(),i=t===e.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=i,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",i.toString())}_rotateCompassArrow(){const e=this._map;if(!e)return;const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(e.transform.pitch*(Math.PI/180)),.5)}) rotateX(${e.transform.pitch}deg) rotateZ(${e.transform.angle*(180/Math.PI)}deg)`:`rotate(${e.transform.angle*(180/Math.PI)}deg)`;e._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=t)})}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),e.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&e.on("pitch",this._rotateCompassArrow),e.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ua(e,this._compass,this.options.visualizePitch)),this._container}onRemove(){const e=this._map;e&&(this._container.remove(),this.options.showZoom&&e.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&e.off("pitch",this._rotateCompassArrow),e.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(e,t){const n=a("button",e,this._container);return n.type="button",n.addEventListener("click",t),n}_setButtonTitle(e,t){if(!this._map)return;const n=this._map._getUIString("NavigationControl."+t);e.setAttribute("aria-label",n),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}},GeolocateControl:class extends e.Evented{constructor(t){super(),this.options=e.extend({geolocation:e.window.navigator.geolocation},da,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=$i(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(e){return this._map=e,this._container=a("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(t){const n=(e=!!this.options.geolocation)=>{this._supportsGeolocation=e,t(e)};void 0!==this._supportsGeolocation?t(this._supportsGeolocation):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then(e=>n("denied"!==e.state)).catch(()=>n()):n()}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),n=e.coords;return!!t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}_updateCamera(t){const n=new e.LngLat(t.coords.longitude,t.coords.latitude),i=t.coords.accuracy,r=this._map.getBearing(),a=e.extend({bearing:r},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(i),a,{geolocateSource:!0})}_updateMarker(t){if(t){const n=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const t=this._map.transform,n=e.mercatorZfromAltitude(1,t._center.lat)*t.worldSize,i=Math.ceil(2*this._accuracy*n);this._circleElement.style.width=i+"px",this._circleElement.style.height=i+"px"}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(t){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=a("button","mapboxgl-ctrl-geolocate",this._container),a("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a("div","mapboxgl-user-location"),this._dotElement.appendChild(a("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(a("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new na({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=a("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new na({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new e.Event("trackuserlocationend")))})}}_onDeviceOrientation(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(e={maximumAge:6e5,timeout:0},this._noTimeout=!0):(e=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,e),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const t=()=>{e.window.addEventListener("ondeviceorientationabsolute"in e.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==e.window.DeviceMotionEvent&&"function"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(e=>{"granted"===e&&t()}).catch(console.error):t()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener("deviceorientation",this._onDeviceOrientation),e.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Kr,ScaleControl:class{constructor(t){this.options=e.extend({},pa,t),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch(e){return!1}}(),e.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const e=this.options.maxWidth||100,t=this._map,n=t._containerHeight/2,i=t._containerWidth/2-e/2,r=t.unproject([i,n]),a=t.unproject([i+e,n]),o=r.distanceTo(a);if("imperial"===this.options.unit){const t=3.2808*o;t>5280?this._setScale(e,t/5280,"mile"):this._setScale(e,t,"foot")}else"nautical"===this.options.unit?this._setScale(e,o/1852,"nautical-mile"):o>=1e3?this._setScale(e,o/1e3,"kilometer"):this._setScale(e,o,"meter")}_setScale(e,t,n){this._map._requestDomTask(()=>{const i=function(e){const t=Math.pow(10,(""+Math.floor(e)).length-1);let n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n),t*n}(t),r=i/t;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==n?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:n}).format(i):`${i}&nbsp;${fa[n]}`,this._container.style.width=e*r+"px"})}onAdd(e){return this._map=e,this._language=e.getLanguage(),this._container=a("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(e){this._language=e,this._update()}setUnit(e){this.options.unit=e,this._update()}},FullscreenControl:class{constructor(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=a("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=a("button","mapboxgl-ctrl-fullscreen",this._controlContainer);a("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",e)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends e.Evented{constructor(t){super(),this.options=e.extend(Object.create(ia),t),e.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(t&&t.className?t.className.trim().split(/\s+/):[])}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&t.on("preclick",this._onClose),this.options.closeOnMove&&t.on("move",this._onClose),t.on("remove",this.remove),this._update(),t._addPopup(this),this._focusFirstElement(),this._trackPointer?(t.on("mousemove",this._onMouseEvent),t.on("mouseup",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")):t.on("move",this._update),this.fire(new e.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const t=this._map;return t&&(t.off("move",this._update),t.off("move",this._onClose),t.off("preclick",this._onClose),t.off("click",this._onClose),t.off("remove",this.remove),t.off("mousemove",this._onMouseEvent),t.off("mouseup",this._onMouseEvent),t.off("drag",this._onMouseEvent),t._canvasContainer&&t._canvasContainer.classList.remove("mapboxgl-track-pointer"),t._removePopup(this),this._map=void 0),this.fire(new e.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(t){this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update();const n=this._map;return n&&(n.on("move",this._update),n.off("mousemove",this._onMouseEvent),n._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const e=this._map;return e&&(e.off("move",this._update),e.on("mousemove",this._onMouseEvent),e.on("drag",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(e.window.document.createTextNode(t))}setHTML(t){const n=e.window.document.createDocumentFragment(),i=e.window.document.createElement("body");let r;for(i.innerHTML=t;r=i.firstChild,r;)n.appendChild(r);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){let t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=a("div","mapboxgl-popup-content",this._container||void 0);if(t.appendChild(e),this.options.closeButton){const e=this._closeButton=a("button","mapboxgl-popup-close-button",t);e.type="button",e.setAttribute("aria-label","Close popup"),e.setAttribute("aria-hidden","true"),e.innerHTML="&#215;",e.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(e){return this._classList.add(e),this._updateClassList(),this}removeClassName(e){return this._classList.delete(e),this._updateClassList(),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){let t;return this._classList.delete(e)?t=!1:(this._classList.add(e),t=!0),this._updateClassList(),t}_onMouseEvent(e){this._update(e.point)}_getAnchor(e){if(this.options.anchor)return this.options.anchor;const t=this._map,n=this._container,i=this._pos;if(!t||!n||!i)return"bottom";const r=n.offsetWidth,a=n.offsetHeight,o=i.x<r/2,s=i.x>t.transform.width-r/2;if(i.y+e<a)return o?"top-left":s?"top-right":"top";if(i.y>t.transform.height-a){if(o)return"bottom-left";if(s)return"bottom-right"}return o?"left":s?"right":"bottom"}_updateClassList(){const e=this._container;if(!e)return;const t=[...this._classList];t.push("mapboxgl-popup"),this._anchor&&t.push("mapboxgl-popup-anchor-"+this._anchor),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),e.className=t.join(" ")}_update(t){const n=this._map,i=this._content;if(!n||!this._lngLat&&!this._trackPointer||!i)return;let r=this._container;if(r||(r=this._container=a("div","mapboxgl-popup",n.getContainer()),this._tip=a("div","mapboxgl-popup-tip",r),r.appendChild(i)),this.options.maxWidth&&r.style.maxWidth!==this.options.maxWidth&&(r.style.maxWidth=this.options.maxWidth),n.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=ea(this._lngLat,this._pos,n.transform)),!this._trackPointer||t){const e=this._pos=this._trackPointer&&t?t:n.project(this._lngLat),i=aa(this.options.offset),r=this._anchor=this._getAnchor(i.y),a=aa(this.options.offset,r),o=e.add(a).round();n._requestDomTask(()=>{this._container&&r&&(this._container.style.transform=`${ta[r]} translate(${o.x}px,${o.y}px)`)})}if(!this._marker&&n._showingGlobe()){const t=e.isLngLatBehindGlobe(n.transform,this._lngLat)?0:1;this._setOpacity(t)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(ra);e&&e.focus()}_onClose(){this.remove()}_setOpacity(e){this._container&&(this._container.style.opacity=""+e),this._content&&(this._content.style.pointerEvents=e?"auto":"none")}},Marker:na,Style:Qt,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:Wi,Evented:e.Evented,config:e.config,prewarm:function(){ze().acquire(Ne)},clearPrewarmedResources:function(){const e=Be;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(Ne),Be=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return De.workerCount},set workerCount(e){De.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage(t){e.clearTileCache(t)},workerUrl:"",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return ma})),i}()}).call(this,n("E0jC"))},d8Ar:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("RIqP")),a=i(n("J4zp")),o=i(n("lSNA")),s=i(n("lwsE")),l=i(n("W8MJ")),c=i(n("7W2i")),u=i(n("a1gu")),d=i(n("Nsbk")),p=n("6hsm"),f=i(n("8j+C")),m=i(n("pn2R")),h=i(n("J4Ca")),g=i(n("MmfM")),y=i(n("n00r")),v=n("4mEQ");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var x=function(e){(0,c.default)(n,e);var t=w(n);function n(){return(0,s.default)(this,n),t.apply(this,arguments)}return(0,l.default)(n,[{key:"isLiveBriefing",get:function(){var e;if(null!==(e=this.data)&&void 0!==e&&e.sprinkledBody){var t=this.data.sprinkledBody.content;return Boolean((void 0===t?[]:t).some((function(e){return e.__typename===p.HEADERLIVEBRIEFINGBLOCK_TYPENAME})))}return!1}},{key:"multimediaIds",get:function(){var e,t=[],n=[];if(null!==(e=this.data)&&void 0!==e&&e.sprinkledBody){var i,r,a,o=this.data.sprinkledBody.content,s=void 0===o?[]:o,l=s.find((function(e){return e.__typename.match(/Header[a-zA-Z]+Block/)}));if("VideoBlock"===(null==l||null===(i=l.ledeMedia)||void 0===i?void 0:i.__typename))t.push({"@id":null===(r=l.ledeMedia)||void 0===r||null===(a=r.media)||void 0===a?void 0:a.url});if("HeaderMultimediaBlock"===(null==l?void 0:l.__typename)&&"AudioBlock"===l.media.__typename){var c,u,d,p,f=(null===(c=l.media)||void 0===c||null===(u=c.media)||void 0===u?void 0:u.url)||(null===(d=l.media)||void 0===d||null===(p=d.media)||void 0===p?void 0:p.fileUrl);n.push({"@id":f})}s.filter((function(e){return"VideoBlock"===e.__typename})).forEach((function(e){var n,i=(null==e||null===(n=e.media)||void 0===n?void 0:n.url)||(null==e?void 0:e.url);t.push({"@id":i})})),s.filter((function(e){return"AudioBlock"===e.__typename})).forEach((function(e){var t,i,r=(null==e||null===(t=e.media)||void 0===t?void 0:t.url)||(null==e||null===(i=e.media)||void 0===i?void 0:i.fileUrl);n.push({"@id":r})}))}return{audio:n.length>0?n:void 0,video:t.length>0?t:void 0}}},{key:"articleData",get:function(){var e,t,n=this.data,i=n.firstPublished,r=n.lastModified,a=n.lastMajorModification,o=n.summary,s=n.url,l=n.headline,c=n.language,u=n.section,d=n.printInformation,p=n.isAccessibleForFree,f=(null==u?void 0:u.name)||void 0,h=(0,v.isOpinion)(f)?"Opinion | ":"",g="".concat(h).concat((null==l?void 0:l.seo)||(null==l?void 0:l.default));return null!=l&&l.seo&&null!=l&&l.default&&(null==l?void 0:l.seo)!==(null==l?void 0:l.default)?t="".concat(h).concat(l.default):d&&d.headline&&d.publicationDate&&(d.section||d.edition)&&"The New York Times on the Web"!==d.edition&&(t="".concat(h).concat(d.headline)),new m.default(_(_({meteredContentClass:this.meteredContentClass,dateModified:a||r,environment:this.environment||"",inLanguage:(null==c?void 0:c.code)||void 0,datePublished:i,description:o,url:s,author:this.authorsStructuredData,image:null===(e=this.promotionalImage)||void 0===e?void 0:e.getStructuredData()},this.multimediaIds),{},{headline:g,alternativeHeadline:t,isAccessibleForFree:p}))}},{key:"liveBriefingData",get:function(){return this.isLiveBriefing?new f.default(this.data).getStructuredData():null}},{key:"reviewData",get:function(){var e=this.data.compatibility,t=void 0===e?{}:e;return null!=t&&t.isDiningReview||null!=t&&t.isMovieReview||null!=t&&t.isTheaterReview?new g.default(this.data).getStructuredData():[]}},{key:"faqData",get:function(){var e=y.default.isFAQPage(this.data),t=(0,a.default)(e,2),n=t[0],i=t[1];return n?new y.default(this.data,i):null}},{key:"getStructuredData",value:function(){return[this.articleData,this.liveBriefingData,this.faqData].concat((0,r.default)(this.reviewData))}}]),n}(h.default);t.default=x},d8k4:function(e,t,n){"use strict";var i=n("VkAN"),r=n.n(i),a=n("gcR/"),o=n.n(a),s=n("q1tI"),l=n.n(s),c=n("eFc+"),u=n.n(c),d=n("ZKN5"),p=n("lSNA"),f=n.n(p),m=n("QS0n"),h=n("Jqp9"),g=n("cr+I"),y=n.n(g),v=n("mczz"),b=n("lwsE"),_=n.n(b),w=n("W8MJ"),x=n.n(w),k=n("7W2i"),O=n.n(k),E=n("a1gu"),T=n.n(E),C=n("Nsbk"),S=n.n(C),P=n("hKI/"),M=n.n(P),I="Polyfill may not function in the presence of the `sandbox` attribute. Consider using the `force` option.",A=/\ballow-same-origin\b/,j=function(){return null};j=function(e){console.error("[srcdoc-polyfill] ".concat(e))};var L=function(e,t,n){if(e&&e.getAttribute&&(t?e.setAttribute("srcdoc",t):t=e.getAttribute("srcdoc"),t)){!function(e,t){var n=e.getAttribute("sandbox");"string"!=typeof n||A.test(n)||(t&&t.force?e.removeAttribute("sandbox"):t&&!1===t.force||(j(I),e.setAttribute("data-srcdoc-polyfill",I)))}(e,n);var i='javascript: window.frameElement.getAttribute("srcdoc");';e.contentWindow&&(e.contentWindow.location=i),e.setAttribute("src",i)}},R=function(){if(!!!("srcdoc"in document.createElement("iframe")))for(var e=document.getElementsByTagName("iframe"),t=e.length;t>0;t-=1)L(e[t])},N=Object(h.css)("border:0;overflow:hidden;width:1px;min-width:100%;");function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=S()(e);if(t){var r=S()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return T()(this,n)}}var B=function(e){O()(n,e);var t=D(n);function n(){var e;_()(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).observer=null,e.frameLoaded=!1,e.state={frameHeight:null},e.onFrameLoaded=function(t){if(t){!function n(){try{var i=t.contentWindow;if(!i)return void setTimeout(n,17);var r=t.contentDocument;if(!r||!r.body)return void setTimeout(n,17);if(""===r.body.innerHTML)return void setTimeout(n,17);var a=r.documentElement,o=function(){return a.offsetHeight+a.offsetTop},s=i.MutationObserver||i.WebKitMutationObserver||i.MozMutationObserver,l=function(){e.setState({frameHeight:o()})};if(e.props.onLoad(t),e.frameLoaded=!0,e.observer=new s(l),e.observer.observe(a,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),!window.requestAnimationFrame)return;var c=M()((function(){e.state.frameHeight!==o()&&l()}),17);window.requestAnimationFrame((function t(){e.frameLoaded&&c(),window.requestAnimationFrame(t)}))}catch(e){console.warn("NYT Iframe error:",e),setTimeout(n,500)}}()}},e}return x()(n,[{key:"componentDidMount",value:function(){this.props.srcDoc&&R()}},{key:"componentWillUnmount",value:function(){this.observer&&this.observer.disconnect(),this.frameLoaded=!1}},{key:"render",value:function(){var e=this.props,t=e.src,n=e.srcDoc,i=e.id,r=e.className,a=this.state.frameHeight,o={src:t};n&&(o={srcDoc:n,"data-src":t});var s=Object.assign(o,{className:Object(h.cx)(N,r),frameBorder:0,scrolling:"no",width:"100%",id:i,ref:this.onFrameLoaded},"number"==typeof a?{height:a}:{});return l.a.createElement("iframe",s)}}]),n}(s.Component);B.displayName="Iframe",B.defaultProps={src:null,srcDoc:null,id:null,className:void 0,onLoad:function(){}};var z,F=B,U=n("wXC7"),H=n.n(U),W=Object(h.css)("display:block;margin:0 auto;line-height:0;"),q=Object(h.css)("border-top:1px solid ",H.a.color.gray60,";border-bottom:1px solid ",H.a.color.gray60,";"),V=Object(h.css)("width:",H.a.breakpoint.mobileFullWidth,";max-width:",H.a.breakpoint.textBodyWidth,"px;margin-left:",H.a.grid.pageMargin,"px;margin-right:",H.a.grid.pageMargin,"px;@media (max-width:340px){width:calc(100% - 20px);}",H.a.breakpoint.small,"{margin-left:auto;margin-right:auto;}",H.a.breakpoint.mediumLarge,"{width:",H.a.breakpoint.textBodyWidth,"px;margin-left:0;}",H.a.breakpoint.extraLarge,"{width:",H.a.breakpoint.textBodyWidthExtralarge,"px;max-width:",H.a.breakpoint.textBodyWidthExtralarge,"px;}"),G=(new Date).getFullYear();function Y(e){var t,n=e.asset,i=e.styles,r=e.inStory,a=Object(h.useTheme)(),l=Object(m.useLocation)();if(Object(s.useEffect)((function(){window.location.hostname.match(/\.nytimes\.com/)&&(document.domain="nytimes.com")}),[]),!n.sourceId)return null;var c="",u="/interactive/".concat(G,"/uri/").concat(n.uri.split("nyt://")[1]),d="https://www.nytimes.com",p={},g=Object(v.d)(l,"GQL_HOST_SERVER"),b=Object(v.d)(l,"GQL_HOST_CLIENT"),_=Object(v.d)(l,"GQL_HOST");if("test"===vi.env.ENVIRONMENT&&(d="https://www.stg.nytimes.com"),("local"===vi.env.ENVIRONMENT||"dev"===vi.env.ENVIRONMENT||/-sbx$/.test(vi.env.ENVIRONMENT))&&(d="",g&&""!==g&&(p.GQL_HOST_SERVER=g),b&&""!==b&&(p.GQL_HOST_CLIENT=b),_&&""!==_&&(p.GQL_HOST=_)),function(e){var t=y.a.parse(e.search);return!(!t||void 0===t.scooppreview)||!!window.location.search.match(/scooppreview/)}(l)){switch(c="/resources/app/url/proxy/html?url=",vi.env.ENVIRONMENT){case"preview-development":d="http://alpha-preview.dev.nytimes.com";break;case"preview-staging":d="http://alpha-preview.stg.nytimes.com";break;default:d="http://alpha-preview.nytimes.com"}d=encodeURIComponent(d),u=encodeURIComponent(u),p.contentUri=encodeURIComponent(n.uri)}var w="?".concat(y.a.stringify(p)),x=n.displayProperties,k=(void 0===x?{}:x).maxWidth||0,O=n.headline&&!(n.displayProperties&&n.displayProperties.displayForPromotionOnly),E=r&&O&&!1,T={maxWidth:"100%",margin:"0 auto"},C={maxWidth:k};return o()("div",{style:T,className:Object(h.cx)(f()({},V,"medium"===(null===(t=a.tone)||void 0===t?void 0:t.toLowerCase())))},void 0,o()("div",{"data-id":n.sourceId,"data-slug":n.slug,className:Object(h.cx)(W,f()({},q,E),i),style:C},void 0,o()(F,{src:"".concat(c).concat(d).concat(u).concat(w)})))}Y.displayName="EmbeddedIframe",Y.defaultProps={styles:"",inStory:!1},Y.fragments={media:u()(z||(z=r()(["\n    fragment EmbeddedIframe_media on CreativeWork {\n      headline {\n        default\n      }\n      displayProperties {\n        displayOverrides\n        displayForPromotionOnly\n        maxWidth: maximumWidth\n      }\n      ... on Interactive {\n        id\n        slug\n      }\n      ... on EmbeddedInteractive {\n        id\n        slug\n      }\n      ... on Published {\n        sourceId\n        uri\n      }\n    }\n  "])))};var Z,X=Y,J=n("RKHt"),K=n.n(J),$=n("5g7D"),Q=n.n($),ee=n("SYzA"),te=Object(h.css)("margin:",H.a.font.size(37)," auto;width:calc(100% - 20px);@media (min-width:340px) and (max-width:630px){width:calc(100% - 40px);}"),ne=te,ie=Object(h.css)(te," max-width:",H.a.breakpoint.textBodyWidth,"px;"),re=Object(h.css)(te," max-width:945px;",H.a.breakpoint.extraLarge,"{max-width:",H.a.breakpoint.mediaMaxWidth,"px;}"),ae=Object(h.css)("margin-top:0;position:relative;z-index:901;"),oe=Object(h.css)("width:100%;@media (min-width:340px) and (max-width:630px){width:100%;}",H.a.breakpoint.small,"{width:calc(100% - 40px);#live-chat-feed &{width:100%;}}"),se={SMALL:ie,MEDIUM:ie,LARGE:re,FULL:ne};function le(e){var t,n,i,r,a=e.media,l=e.locksmith,c=e.blockSize,u=e.children,d=e.inStory,p=e.isAboveH1,m=e.embeddedClass,g=e.manageScripts,y=e.enableInteractiveBridge,v=Object(ee.a)();Object(s.useEffect)((function(){if(null!=l&&l.lock){var e=a.slug;l.lock(e)}}),[]);var b,_=d?se[c]||ie:"",w=null===(t=a.displayProperties)||void 0===t?void 0:t.maxWidth;return o()(K.a,{interactive:a,className:Object(h.cx)(_,m,(r={},f()(r,(b=w,Object(h.css)("max-width:",b,"px;",H.a.breakpoint.extraLarge,"{max-width:",b,"px;}")),w),f()(r,oe,/grid|carousel/.test(null==a||null===(n=a.headline)||void 0===n?void 0:n.default)),f()(r,ae,p),f()(r,Q()(null==a||null===(i=a.displayProperties)||void 0===i?void 0:i.displayOverrides),v),r)),size:c,manageScripts:g,enableInteractiveBridge:y},void 0,u)}le.displayName="EmbeddedInline",le.defaultProps={blockSize:void 0,embeddedClass:void 0,inStory:!1,isAboveH1:!1,children:null,manageScripts:!1,locksmith:void 0,enableInteractiveBridge:!0},le.fragments={media:u()(Z||(Z=r()(["\n    fragment EmbeddedInline_media on CreativeWork {\n      headline {\n        default\n      }\n      advertisingProperties {\n        sensitivity\n      }\n      displayProperties {\n        displayForPromotionOnly\n        displayOverrides\n        maxWidth: maximumWidth\n        minWidth: minimumWidth\n      }\n      bylines {\n        prefix\n        creators {\n          ... on TimesTag {\n            displayName\n          }\n        }\n      }\n      ... on Published {\n        sourceId\n      }\n      ... on InteractiveWork {\n        credit\n        leadin\n        note\n        dataSource\n        html\n      }\n      ... on Interactive {\n        id\n        slug\n      }\n      ... on EmbeddedInteractive {\n        id\n        slug\n      }\n    }\n  "])))};var ce,ue=le,de=/^<iframe[^>]+>\s*<\/iframe>\s*$/;function pe(e){var t,n,i=e.media,r=e.styles,a=e.inStory,s=e.isAboveH1,l=e.blockSize,c=e.embeddedClass,u=e.manageScripts,d=e.locksmith;if(!i||!i.html)return null;if(0===(null==i||null===(t=i.slug)||void 0===t?void 0:t.toLowerCase().indexOf("newsletter-signup-")))return null;if(de.test(i.html)){return o()("div",{className:r,style:{marginLeft:"auto",marginRight:"auto"},dangerouslySetInnerHTML:{__html:i.html}})}return i.compatibility&&"nyt5"!==i.compatibility.toLowerCase()?"inline"===(null===(n=i.compatibility)||void 0===n?void 0:n.toLowerCase())?o()(ue,{embeddedClass:c,media:i,blockSize:l,inStory:a,isAboveH1:s,manageScripts:u,locksmith:d}):o()(X,{styles:r,asset:i,inStory:a,blockSize:l}):o()(X,{asset:i,styles:r,inStory:a,blockSize:l})}pe.displayName="EmbeddedInteractive",pe.defaultProps={styles:void 0,blockSize:void 0,embeddedClass:void 0,inStory:!1,isAboveH1:!1,manageScripts:!1,locksmith:void 0},pe.fragments={media:u()(ce||(ce=r()(["\n    fragment EmbeddedInteractive_media on EmbeddedInteractive {\n      id\n      appName\n      storyFormat\n      slug\n      html\n      compatibility\n      ...EmbeddedInline_media\n      ...EmbeddedIframe_media\n    }\n    ","\n    ","\n  "])),ue.fragments.media,X.fragments.media)};t.a=Object(d.a)(pe)},d9qb:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("cDf5")),a=function(e,t){return e===t||"object"===(0,r.default)(e)&&null!==e&&"object"===(0,r.default)(t)&&null!==t&&Object.keys(e).every((function(n){return e[n]===t[n]}))};t.default=a},dE6V:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("Jqp9"),a=n("3sMT"),o=(0,i(n("WThh")).default)(["small","medium","mediumLarge"]),s=(0,r.themeFn)("treatment",{none:(0,r.css)(),atHome:function(e){return(0,r.css)("border:0;border-top:1px solid ",a.color.stroke.tertiary,";",o(e,{margin:["30px 20px","30px 20px","30px auto"]}))}}),l=(0,r.styled)("hr",{target:"e1mu4ftr0"})("border:0;border-top:1px solid ",a.color.stroke.quaternary,";margin:30px auto;",s,";");t.default=l},dKsL:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=(i(n("17x9")),i(n("q1tI"))),s=n("Jqp9"),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("eDf7")),c=n("D5MC");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var d=function(e){var t=e.status;if(!t)return null;var n=c.PrimaryAssetStatusMap[t];return n?o.default.createElement("span",{className:(0,s.cx)(l.labelContainerClass,(0,a.default)({},l.labelEmphasisClass,n===c.PrimaryAssetStatusMap.LIVE)),"data-testid":"menu-link-label"},n):null};d.displayName="MenuLinkLabel",d.defaultProps={status:void 0};var p=d;t.default=p},"dQ+W":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.twitterIconClass=t.mailIconClass=t.fbIconClass=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=(0,r.css)("border-radius:100%;padding:6px;width:18px;height:18px;display:block;"),s=(0,r.css)(o,";background-color:","#3B5998",";");t.fbIconClass=s;var l=(0,r.css)(o,";background-color:","#1DA1F2",";");t.twitterIconClass=l;var c=(0,r.css)(o,";background-color:",a.default.color.gray27,";");t.mailIconClass=c},dU4i:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"canStorylineComposeLatestUpdates",{enumerable:!0,get:function(){return h.canStorylineComposeLatestUpdates}}),t.default=void 0;var r=i(n("lSNA")),a=i(n("lwsE")),o=i(n("W8MJ")),s=i(n("PJYZ")),l=i(n("7W2i")),c=i(n("a1gu")),u=i(n("Nsbk")),d=i(n("q1tI")),p=(i(n("17x9")),i(n("aY2f"))),f=n("mH4u"),m=i(n("kr/V")),h=(n("5YwL"),n("cCFw")),g=n("Wtq3");function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.default)(this,n)}}var _=function(e){(0,l.default)(n,e);var t=b(n);function n(e){var i;(0,a.default)(this,n),(i=t.call(this,e)).state={displayData:{}},i.hasBeenSeen=!1,i.hasTrackedMessagingView=!1,i.wrapperRef=d.default.createRef(),i.trackImpression=i.trackImpression.bind((0,s.default)(i));var r=e.storyline,o=e.parentUri;return i.state.displayData=(0,h.mapDataToProps)({storyline:r,parentUri:o}),i}return(0,o.default)(n,[{key:"componentDidMount",value:function(){var e,t,n;this.wrapperRef.current&&(this.observer=new IntersectionObserver(this.trackImpression,{threshold:.5}),this.observer.observe(this.wrapperRef.current)),this.annotateUrls();var i={componentName:"LatestUpdates",componentQuestion:"Is this helpful?",storylineName:null===(e=this.state)||void 0===e||null===(t=e.displayData)||void 0===t||null===(n=t.storylineDisplayName)||void 0===n?void 0:n.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(function(e,t){return t.toUpperCase()})),id:"storyline-survey-latest-updates"},r=window.location.href;window.parent.postMessage(i,r)}},{key:"componentDidUpdate",value:function(e){e.trackLink!==this.props.trackLink&&this.annotateUrls()}},{key:"componentWillUnmount",value:function(){this.observer&&this.observer.disconnect()}},{key:"annotateUrls",value:function(){var e=this.props.trackLink,t=this.state.displayData;if(!t||!e)return null;var n={},i=0;return null!=t&&t.storylineUrl&&(n.storylineUrl=e(t.storylineUrl,{index:i}),i+=1),null!=t&&t.url&&(n.url=e(null==t?void 0:t.url,{index:i}),i+=1),n.items=null==t?void 0:t.items.map((function(t){return v(v({},t),{},{url:e(null==t?void 0:t.url,{index:i})})})),this.setState({displayData:v(v({},t),n)})}},{key:"trackImpression",value:function(e){var t;if(!this.hasBeenSeen&&null!=e&&null!==(t=e[0])&&void 0!==t&&t.isIntersecting){this.hasBeenSeen=!0;var n=this.props.trackEvent;if(n){var i=this.state.displayData;i&&null!=i&&i.storylineUrl&&n()}}}},{key:"render",value:function(){var e,t,n,i;if(!(0,h.canStorylineComposeLatestUpdates)(this.props))return null;var r=this.props,a=r.renderTimestamp,o=r.children,s=r.ctaText,l=r.liveAlertTracking,c=r.trackLinkInteraction,u=this.state.displayData,y=l.trackImpression,v=l.onMessagingSubscribe,b=l.onMessagingUnSubscribe,_=u.displayName,w=u.url,x=u.lastMajorModification,k=u.items,O=u.unstructuredData,E=u.isActive,T=u.liveAssetUri,C=(0,f.getTimeFormat)(x),S=C.useElapsedTime,P=C.timestampFormatter,M=null==O||null===(e=O.messagingConfig)||void 0===e||null===(t=e.push)||void 0===t?void 0:t.segment,I=null==O?void 0:O.topicLabel,A=!(null!=O&&null!==(n=O.messagingConfig)&&void 0!==n&&null!==(i=n.push)&&void 0!==i&&i.enabled);return d.default.createElement("div",{role:"complementary","aria-labelledby":"storyline-latest-updates",className:g.containerClass,ref:this.wrapperRef},d.default.createElement("div",{className:g.innerClass},d.default.createElement("h2",{id:"storyline-latest-updates",className:g.headingStyleClass},d.default.createElement("a",{href:w,onClick:function(e){return null==c?void 0:c(e,w,{item:{url:w,uri:T},eventData:{type:"url-click",trigger:"item",url:w}})}},_)),d.default.createElement("div",{className:g.lastModClass},a?a(x):d.default.createElement(p.default,{showAbsoluteTime:!1,updatedText:!0,iso:x,formatter:S?P:"abbreviated-date"})),d.default.createElement("ul",{className:g.listClass},k.map((function(e,t){return d.default.createElement("li",{key:t.toString(),className:g.bulletStyleClass},d.default.createElement("a",{href:e.url,onClick:function(t){return null==c?void 0:c(t,e.url,{item:{url:e.url,uri:e.uri},eventData:{type:"url-click",trigger:"item",url:e.url}})}},e.text))}))),A&&E&&d.default.createElement("div",{className:g.hideOnWebClass},d.default.createElement(m.default,{segment:M,kicker:I,onView:y,onSubscribe:v,onUnsubscribe:b,ctaText:s})),d.default.createElement("div",{className:"styln-survey-component",id:"storyline-survey-latest-updates"})),o)}}]),n}(d.default.Component);_.displayName="StorylineLatestUpdates",_.defaultProps={storyline:null,parentUri:null,renderTimestamp:null,trackEvent:null,trackLink:null,children:null,ctaText:null,trackLinkInteraction:function(){},liveAlertTracking:{trackImpression:function(){},onMessagingSubscribe:function(){},onMessagingUnSubscribe:function(){}}};var w=_;t.default=w},dc0q:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PREFERRED_CROPS=t.FALLBACK_CROPS=void 0;var r=i(n("lwsE")),a=i(n("W8MJ")),o=n("6hsm"),s=i(n("810M")),l=i(n("Np/z")),c=["videoSixteenByNineJumbo1600","superJumbo","mediumSquareAt3X"];t.PREFERRED_CROPS=c;var u=[["master1050","articleLarge"],["videoSixteenByNine1050","facebookJumbo"],"square640",["horizontalMediumAt2X","threeByTwoMediumAt2X","threeByTwoLargeAt2X"]];t.FALLBACK_CROPS=u;var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;(0,r.default)(this,e),this.data=t,this.preferredCropsOverride=n}return(0,a.default)(e,[{key:"getStructuredData",value:function(){var e,t,n,i=this,r=(null===(e=this.data)||void 0===e?void 0:e.assetCrops)||(null===(t=this.data)||void 0===t?void 0:t.crops)||(null===(n=this.data)||void 0===n?void 0:n.spanImageCrops);if(Array.isArray(r)&&r.length>0){var a,d,p=r.reduce((function(e,t){return e.concat(t.renditions)}),[]),f=(0,l.default)(p,this.preferredCropsOverride||c),m=(null===(a=this.data)||void 0===a||null===(d=a.caption)||void 0===d?void 0:d.text)||this.data.caption;if(f.length<1&&(f=f.concat((0,l.default)(p,u))),f.length>0){var h=f.map((function(e){var t,n;try{var r;n=new URL(e.url),null!==(r=i.data)&&void 0!==r&&r.isAccessibleForFree&&(n.searchParams.set("open",1),n.searchParams.set("w",e.width),n.searchParams.set("h",e.height))}catch(t){n=e.url}return new s.default({width:e.width,height:e.height,url:n.toString(),caption:"string"==typeof m&&m.length>0?m:void 0,contentUrl:n.toString(),creditText:null===(t=i.data)||void 0===t?void 0:t.credit})}));return 1===h.length?h.pop():h}}return o.DEFAULT_PROMO_IMAGES}}]),e}();t.default=d},dfdT:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n("q1tI")),l=n("X6oL"),c=o(n("5UIh")),u=a(n("qOgO")),d=n("syiw"),p=n("HDG5"),f=n("djNW"),m=n("FY2l"),h=n("6gWn");t.default=function(e){var t,n,i,r,a=e.unit,o=(0,s.useState)(!1),g=o[0],y=o[1],v=(0,d.useMessageSelection)({config:{name:"dock"}}),b=(0,p.useUserState)(),_=(0,l.useTracking)(),w="/"===(0,m.getPathName)()?"homepage":"article",x=s.default.createElement("div",{className:u.mainText},"Enjoy 25% off at The New York Times Store for a limited time."),k=function(e,t){_.trackEvent({event:"moduleInteraction",eventData:{pagetype:w,trigger:"module",type:"click"},module:{name:e,label:"MWD_NYT_STORE_DISCOUNT_PROMO_2311",element:{name:f.Action.Store,url:t}}})};if(v.loading)return null;if(!g){var O=null===(n=null===(t=null==v?void 0:v.response)||void 0===t?void 0:t.userstate())||void 0===n?void 0:n.messageSelectionMessageCaps,E=null;if(O)if((C=O).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==v?void 0:v.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==v?void 0:v.response)||void 0===n?void 0:n.audience())&&(E=e)})),null!==E){var T=E;T.viewCount+=1,T.lastSeenOn=(new Date).toISOString(),b.update({messageSelectionMessageCaps:C})}if(!E){var C=[];O&&(C=O),C.push({unit:"dock",campaign:null===(i=null==v?void 0:v.response)||void 0===i?void 0:i.campaign(),audience:null===(r=null==v?void 0:v.response)||void 0===r?void 0:r.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),b.update({messageSelectionMessageCaps:C})}y(!0)}return s.default.createElement(c.default,{testId:"onsite-messaging-unit-".concat(null===h.config||void 0===h.config?void 0:h.config.name),unit:a,contentID:"MWD_NYT_STORE_DISCOUNT_PROMO_2311",dockID:"standard",header:x,headingClassName:u.headerContainer,onDockHeadingClick:function(){var e,t="".concat(null===(e=null==a?void 0:a.content)||void 0===e?void 0:e.url);k("mwdNytStoreDiscountPromo2311",t),k("dock",t),window.open(t,"_blank","noopener,noreferrer")},isDockDismissible:!0,isDockExpandable:!1,minimized:!0})}},dlfA:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.listItemSelector=t.default=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=(0,r.themeFn)("treatment",{none:(0,r.css)("margin-bottom:",a.default.font.size(16),";"),sponsored:(0,r.css)()}),s=(0,r.css)("list-style:disc;padding-left:0;margin-left:0.875rem;");t.listItemSelector=function(e){return(0,r.css)("li{",o(e),";",s,";}")};var l=(0,r.styled)("li",{target:"eoqvrfo0"})(o,";",s,";");t.default=l},dmwf:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.heading2Selector=t.default=void 0;var r=n("Jqp9"),a=n("3sMT"),o=i(n("wXC7")),s=n("6l8D"),l=(0,i(n("WThh")).default)(["medium"]),c=function(e){return(0,r.css)("color:",a.color.content.secondary,";font-weight:",o.default.font.weight.mediumBold,";",l(e,{fontSize:[23,28],lineHeight:[27,34]}),";")},u=(0,r.themeFn)("treatment",{none:function(e){return(0,r.css)("color:",a.color.content.primary,";font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.mediumBold,";",l(e,{fontSize:[26,28],lineHeight:[30,34]}),";")},feature:function(e){return(0,r.css)("color:",a.color.content.primary,";font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.book,";",l(e,{fontSize:[26,28],lineHeight:[30,34]}),";")},magazine:function(e){return(0,r.css)("color:",a.color.content.primary,";font-family:",o.default.font.magslab,";font-weight:",o.default.font.weight.book,";",l(e,{fontSize:[25,29],lineHeight:[28,35]}),";")},opinion:function(e){return(0,r.css)("color:",a.color.content.primary,";font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.book,";",l(e,{fontSize:[26,28],lineHeight:[30,34]}),";")},sponsored:function(e){return(0,r.css)(c(e),";font-family:",o.default.font.sponsoredBase,";")},sponsoredSensitive:function(e){return(0,r.css)(c(e),";font-family:",o.default.font.sponsoredSensitive,";")},"t-magazine":function(e){return(0,r.css)("color:",a.color.content.primary,";font-family:",o.default.font.tmagSerifDisplayBase,";font-weight:",o.default.font.weight.bold,";",l(e,{fontSize:[21,30],lineHeight:[28,36]}),";")},liveSplitLayout:(0,r.css)("color:",a.color.content.primary,";font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.mediumBold,";font-size:",o.default.font.size(26),";line-height:",o.default.font.size(30),";")}),d=(0,r.themeFn)("languageDirection",{rightToLeft:(0,r.css)("text-align:right;direction:rtl;unicode-bidi:isolate;")}),p=(0,r.themeFn)("language",{"zh-hans":(0,r.css)("font-family:",o.default.font.cheltenhamSCSerifBase,";font-weight:",o.default.font.weight.bold,";font-style:normal;"),"zh-hant":(0,r.css)("font-family:",o.default.font.cheltenhamTCSerifBase,";font-weight:",o.default.font.weight.bold,";font-style:normal;")}),f=(0,r.css)(".",s.linkClass,"{color:",a.color.signal.editorial,";text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:3px;&:hover,&:focus{text-decoration:none;}}");t.heading2Selector=function(e){return(0,r.css)("h2{",u(e),";",f,";}")};var m=(0,r.styled)("h2",{target:"eoo0vm40"})(u,";",f,";",d,";",p,";");t.default=m},dn9S:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=i(n("q1tI")),a=i(n("UHqw"));function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return r.default.createElement(a.default,{key:n},t)}o.displayName="linkFormatFromOak"},dp42:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.italicClass=t.default=void 0;var i=n("Jqp9"),r=(0,i.css)("font-style:italic;");t.italicClass=r;var a=(0,i.styled)("em",{target:"e1gzwzxm0"})(r,";");t.default=a},dxVN:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,t.shouldLoadEmbedsJs=y;var a=i(n("lwsE")),o=i(n("W8MJ")),s=i(n("7W2i")),l=i(n("a1gu")),c=i(n("Nsbk")),u=h(n("q1tI")),d=(i(n("17x9")),n("s5tu")),p=i(n("M4W2")),f=h(n("2t41"));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,l.default)(this,n)}}function y(){return"undefined"==typeof window||(!window.instgrm||(!window.instgrm.Embeds||(!window.instgrm.Embeds.process||"function"!=typeof window.instgrm.Embeds.process)))}var v=function(e){(0,s.default)(n,e);var t=g(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"componentDidMount",value:function(){y()?(0,p.default)("https://www.instagram.com/embed.js"):setTimeout((function(){window.instgrm.Embeds.process()}),0)}},{key:"render",value:function(){var e=(0,d.stripQueryParams)(this.props.instagramUrl);return u.default.createElement(f.default,{className:this.props.className},u.default.createElement("blockquote",{className:f.instagramClass,"data-instgrm-captioned":!0,"data-instgrm-permalink":e}))}}]),n}(u.Component);v.displayName="InstagramEmbed",v.defaultProps={className:void 0};var b=v;t.default=b},dxmc:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=n("Jqp9"),o=(i(n("17x9")),n("C2Ll")),s=(0,a.css)("width:100%;"),l=function(e){var t=e.crops,n=e.rendition,i=e.mobileRendition,l=e.className,c=e.isInAMP,u=function(e,t,n,i){return e.crops?e.crops[t]?e.crops[t]:i&&(0,o.parseImageData)(e,n)||(0,o.parseImageData)(e,t):{}}({crops:t},n,i,c),d=u.url,p=u.width,f=u.height;return d?c?r.default.createElement("amp-img",{className:(0,a.cx)(l,s),src:d,width:p,height:f,layout:"responsive"}):r.default.createElement("img",{className:(0,a.cx)(l,s),alt:"",src:d}):null};l.defaultProps={isInAMP:!1,className:void 0,crops:void 0,rendition:"jumbo",mobileRendition:"mobileMasterAt3x"};var c=l;t.default=c},e0Jg:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"l",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"i",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"m",(function(){return h})),n.d(t,"o",(function(){return g})),n.d(t,"p",(function(){return y})),n.d(t,"k",(function(){return v})),n.d(t,"q",(function(){return b})),n.d(t,"g",(function(){return _})),n.d(t,"e",(function(){return w})),n.d(t,"h",(function(){return x})),n.d(t,"n",(function(){return k})),n.d(t,"d",(function(){return O})),n.d(t,"f",(function(){return E})),n.d(t,"j",(function(){return T}));var i,r=n("lSNA"),a=n.n(r),o=n("a9ya");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=(i={},a()(i,o.d.ALL,"all"),a()(i,o.d.HIGHLIGHTED,"nyt-picks"),a()(i,o.d.RECOMMENDED,"reader-picks"),a()(i,o.d.REPORTER_REPLIES,"nyt-replies"),a()(i,o.d.SINGLE_COMMENT,"permalink"),i),u={AUTOOPEN:"autoopen",AUTOOPEN_HOME:"autoopen-home",AUTOOPEN_PERMALINK:"autoopen-permalink",AUTOOPEN_EMAIL_LINK:"autoopen-email-link",HEADER:"header",FOOTER:"footer",C_COLUMN:"ccol",FOOTER_BOTTOM_BAR:"footer-bottom-bar",FOOTER_COMMENTS:"footer-comments",INLINE_COMMENTS:"inline-comments",INSTORYMASTHEAD:"masthead"},d=function(e){var t={name:"comments"},n=function(e){return c[e]||""}(e);return n&&(t.context=n),{eventData:{trigger:"module"},module:t}},p=function(e){return{comment:{id:e}}},f=function(e){return l(l({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{region:e,element:{name:"open"}}})},m=function(){return l(l({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{name:"close"}}})},h=function(e,t){var n={name:e===o.d.SINGLE_COMMENT?"back-to-all-comments":t===o.d.SINGLE_COMMENT?"timestamp":"tab"},i=o.e[t];return i&&(n.label=i),l(l({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:n}})},g=function(e,t){return l(l({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{region:t,name:"submit-new",label:e}}})},y=function(e){return l(l({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{name:"submit-reply",label:e}}})},v=function(e){return l(l({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{name:"user-recommend",label:e}}})},b=function(e){return l(l({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{name:"user-unrecommend",label:e}}})},_=function(e){return l(l({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{name:"user-flagged",label:e}}})},w=function(e){return l(l({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{name:"replies-view-all",label:e}}})},x=function(e){return l(l({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{name:"read-more",label:e}}})},k=function(e){return l(l({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{name:"sort",label:o.b[e]}}})},O=function(e){return l(l({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{name:"profile-edit",label:e}}})},E=function(e){return l(l({},{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{name:"faq",label:e}}})},T=function(){return l(l(l({},d()),{event:"moduleInteraction",eventData:{type:"click"}}),{},{module:{element:{name:"share-permalink"}}})}},e8Mh:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleKeyNavigation=void 0;var i=n("7zGq");t.handleKeyNavigation=function(e){return function(t){39===t.keyCode&&(0,i.handleNavRight)(e),37===t.keyCode&&(0,i.handleNavLeft)(e)}}},eCWu:function(e,t,n){"use strict";n.d(t,"b",(function(){return D}));var i,r,a,o,s,l,c,u,d=n("VkAN"),p=n.n(d),f=n("lSNA"),m=n.n(f),h=n("gcR/"),g=n.n(h),y=(n("q1tI"),n("vftj")),v=n("QS0n"),b=n("eFc+"),_=n.n(b),w=n("t0IW"),x=n("XMA8"),k=n("49re"),O=n("7FfI"),E=n("4mEQ"),T=n("/9TP"),C=n.n(T),S=n("HU5K"),P=n("hU1o"),M=n("EYBZ");function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.language,n=e.url;return null!=t&&t.code&&n?g()("link",{rel:"alternate",hrefLang:t.code,href:n},n):null}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){m()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=["gift"],R="The New York Times";function N(e){var t,n,l,c,u,d,p,f,m,h,b,_,T,A,N,D,B,z,F,U,H=e.asset,W=e.children,q=e.skipCanonicalLink,V=Object(S.a)()&&"Article"===(null==H?void 0:H.__typename),G=Object(P.a)().socialVariant;if(!H)return g()(y.Helmet,{titleTemplate:"%s - ".concat(R),prioritizeSeoTags:!0},void 0,W);var Y=H.sourceId,Z=H.uri,X=H.eventId,J=H.summary,K=H.section,$=H.subsection,Q=H.timesTags,ee=H.bylines,te=H.firstPublished,ne=H.lastModified,ie=H.lastMajorModification,re=H.headline,ae=H.collections,oe=H.language,se=H.translations,le=H.column,ce=H.promotionalImage,ue=H.isAccessibleForFree,de=H.__typename,pe=H.url&&"null"!==H.url?H.url:"",fe=pe,me="",he=null,ge=re.default,ye=re.seo?re.seo:re.default;K&&(me=K.name,he=K.displayName),"Opinion"===he&&(ye="".concat(he," | ").concat(ye),ge="".concat(he," | ").concat(ge)),"Video"===H.__typename&&(ge="Video: ".concat(ye)),le&&le.name&&le.slug&&"the-weekly"===le.slug&&(ye="".concat(le.name," | ").concat(ye),ge="".concat(le.name," | ").concat(ge));var ve="";$&&(ve=$.name);var be=ue||(null==Q?void 0:Q.some((function(e){return"internal-open-access"===(null==e?void 0:e.displayName)}))),_e=Object(M.getPrimaryCollection)(ae),we=Object(M.getCollectionData)(_e),xe=null,ke=null;if(te){var Oe=Object(O.parseISODate)(te);Oe&&(xe="".concat(Oe.year).concat(Oe.month).concat(Oe.day),ke=te.replace(/\.([A-Z]+)$/,(function(e,t){return C()(t)})))}var Ee=null;ie&&(Object(O.parseISODate)(ie)&&(Ee=ie.replace(/\.([A-Z]+)$/,(function(e,t){return C()(t)}))));var Te=null!=ee&&null!==(t=ee[0])&&void 0!==t&&t.creators?ee[0].creators.reduce((function(e,t){return t.url&&e.push(t.url),e}),[]):[],Ce=(se||[]).map(I),Se=(null==oe||null===(n=oe.code)||void 0===n||null===(l=n.split("-"))||void 0===l?void 0:l[0])||"en",Pe=(null==oe?void 0:oe.code)||"en",Me=pe.match(/.*smarter-living\/wirecutter\/((\w+-?)+)/),Ie=new Date(te).getFullYear(),Ae=Me&&Ie<2020?"https://www.nytimes.com/wirecutter/blog/".concat(Me[1],"/"):pe,je=Object(k.getStructuredData)({data:j(j({},H),{},V?{firstPublished:H.lastModified,isAccessibleForFree:be}:{isAccessibleForFree:be}),meteredContentClass:"meteredContent",platform:"vi",environment:vi.env.ENVIRONMENT}),Le=je?je.map((function(e,t){if(e){var n="sd-".concat(t);return g()("script",{type:"application/ld+json"},n,"".concat(JSON.stringify(e)))}return null})):null,Re=(null==ce||null===(c=ce.image)||void 0===c||null===(u=c.caption)||void 0===u?void 0:u.text)||"",Ne={url:x.b},De={url:x.a},Be=j({},(null==ce||null===(d=ce.socialMediaRendition)||void 0===d?void 0:d.rendition)||Ne),ze=j({},(null==ce||null===(p=ce.twitterRendition)||void 0===p?void 0:p.rendition)||De);if(Be.url!==x.b&&"Video"===H.__typename&&(Be.url="".concat(Be.url,"?video-overlay")),ze.url!==x.a&&"Video"===H.__typename&&(ze.url="".concat(ze.url,"?video-overlay")),L.includes(G))Be.url=Object(w.a)(Be.url,{gift:1}),ze.url=Object(w.a)(ze.url,{gift:1,tw:1}),ge="".concat(ge," (Gift Article)"),fe=Object(w.a)(pe,{unlocked_article_code:1});else if(be)Be.url=Object(w.a)(Be.url,{open:1,w:Be.width,h:Be.height}),ze.url=Object(w.a)(ze.url,{open:1,tw:1,w:ze.width,h:ze.height});else{var Fe,Ue=new Date;Ue.setFullYear(Ue.getFullYear()-1);var He=new Date(te);"Interactive"!==de||pe.match(/interactive\/[0-9]{4}\/[0-9]{2}/i)||(He=new Date(ie));var We=null!=ce&&null!==(Fe=ce.socialMediaRendition)&&void 0!==Fe&&Fe.parentPublishDate?new Date(ce.socialMediaRendition.parentPublishDate):He;if(Ue>=We&&"Video"!==H.__typename&&!V){var qe,Ve,Ge,Ye,Ze,Xe,Je,Ke,$e=We.getFullYear();if(ge="".concat(ge," (Published ").concat($e,")"),Be.url!==x.b)Be.url=Object(w.a)(Be.url,{year:$e,h:Be.height,w:Be.width,s:null==ce||null===(qe=ce.socialMediaRendition)||void 0===qe||null===(Ve=qe.signature)||void 0===Ve?void 0:Ve.value,k:null==ce||null===(Ge=ce.socialMediaRendition)||void 0===Ge||null===(Ye=Ge.signature)||void 0===Ye?void 0:Ye.keyId});else Be.url=Object(w.a)(Be.url,{year:$e});if(ze.url!==x.a)ze.url=Object(w.a)(ze.url,{year:$e,h:ze.height,w:ze.width,s:null==ce||null===(Ze=ce.twitterRendition)||void 0===Ze||null===(Xe=Ze.signature)||void 0===Xe?void 0:Xe.value,k:null==ce||null===(Je=ce.twitterRendition)||void 0===Je||null===(Ke=Je.signature)||void 0===Ke?void 0:Ke.keyId,tw:1});else ze.url=Object(w.a)(ze.url,{year:$e})}}return g()(v.Route,{render:function(e){var t,n=e.staticContext;return n&&(n.xScoopLastModifiedHeader=ne),g()(y.Helmet,{titleTemplate:"%s - ".concat(R),prioritizeSeoTags:!0},void 0,f||(f=g()("html",{lang:Se})),g()("title",{},void 0,ye),!V&&g()("meta",{property:"article:published_time",content:ke}),g()("meta",{property:"article:modified_time",content:Ee}),m||(m=g()("meta",{httpEquiv:"Content-Language",content:Se})),Ce.length>0&&(h||(h=g()("link",{rel:"alternate",hrefLang:Pe,href:pe}))),Ce,!q&&(b||(b=g()("link",{rel:"canonical",href:Ae}))),i||(i=g()("meta",{name:"robots",content:"noarchive, max-image-preview:large"})),"es"===Pe&&(r||(r=g()("meta",{name:"googlebot",content:"notranslate"}))),_||(_=g()("meta",{name:"articleid",content:Y})),T||(T=g()("meta",{name:"nyt_uri",content:Z})),A||(A=g()("meta",{name:"pubp_event_id",content:X})),N||(N=g()("meta",{name:"description",content:J})),g()("meta",{name:"image",content:Be.url}),g()("meta",{name:"byl",content:null==ee||null===(t=ee[0])||void 0===t?void 0:t.renderedRepresentation}),g()("meta",{name:"news_keywords",content:Q?Q.map((function(e){return e.vernacular})).join():null}),g()("meta",{name:"pdate",content:xe}),fe&&g()("meta",{property:"og:url",content:fe}),a||(a=g()("meta",{property:"og:type",content:"article"})),g()("meta",{property:"og:title",content:ge}),g()("meta",{property:"og:image",content:Be.url}),D||(D=g()("meta",{property:"og:image:alt",content:Re})),B||(B=g()("meta",{property:"og:description",content:J})),pe&&(z||(z=g()("meta",{property:"twitter:url",content:pe}))),g()("meta",{property:"twitter:title",content:ge}),F||(F=g()("meta",{property:"twitter:description",content:J})),g()("meta",{property:"twitter:image",content:ze.url}),U||(U=g()("meta",{property:"twitter:image:alt",content:Re})),o||(o=g()("meta",{property:"twitter:card",content:"summary_large_image"})),g()("meta",{property:"article:section",content:he}),Te.map((function(e){return g()("meta",{property:"article:author",content:e},e)})),Q?Q.map((function(e){var t=e.displayName;return g()("meta",{property:"article:tag",content:t},t)})):null,g()("meta",{property:"article:opinion",content:Object(E.isOpinion)(me).toString()}),s||(s=g()("meta",{property:"article:content_tier",content:"metered"})),g()("meta",{name:"CG",content:me}),g()("meta",{name:"SCG",content:ve}),g()("meta",{name:"CN",content:we.slug}),g()("meta",{name:"CT",content:we.type}),W,Le)}})}N.displayName="AssetHelmet",N.defaultProps={asset:void 0,children:null,skipCanonicalLink:!1};var D=_()(l||(l=p()(['\n  fragment AssetHelmet_promotionalImage on HasPromotionalProperties {\n    promotionalImage {\n      socialMediaRendition: signableRendition(\n        renditionPriority: ["facebookJumbo", "videoSixteenByNineJumbo1600", "articleLarge"]\n      ) {\n        ...AssetHelmet_signableRendition\n      }\n      twitterRendition: signableRendition(\n        renditionPriority: ["videoSixteenByNine3000", "videoSixteenByNineJumbo1600", "articleLarge"]\n      ) {\n        ...AssetHelmet_signableRendition\n      }\n      image {\n        id\n        credit\n        caption {\n          text\n        }\n      }\n    }\n  }\n\n  fragment AssetHelmet_signableRendition on SignableImageRendition {\n    parentPublishDate\n    parentPublishYear\n    signature {\n      value\n      keyId\n      __typename\n    }\n    rendition {\n      name\n      height\n      width\n      url\n      __typename\n    }\n    __typename\n  }\n']))),B=_()(c||(c=p()(['\n  fragment AssetHelmet_promoImage on Image {\n    id\n    assetCrops: crops(\n      renditionNames: [\n        "thumbStandard"\n        "thumbLarge"\n        "facebookJumbo"\n        "videoSixteenByNine3000"\n        "videoSixteenByNineJumbo1600"\n        "articleLarge"\n        "superJumbo"\n        "mediumSquareAt3X"\n      ]\n    ) {\n      name\n      renditions {\n        url\n        height\n        width\n        name\n      }\n    }\n    credit\n    caption {\n      text\n    }\n  }\n'])));N.fragments={asset:_()(u||(u=p()(["\n    fragment AssetHelmet_asset on HasPromotionalProperties {\n      ... on Linkable {\n        id\n        url\n      }\n      ... on Article {\n        id\n        translations {\n          language {\n            code\n          }\n        }\n        language {\n          code\n          name\n        }\n      }\n      ... on Audio {\n        id\n        translations {\n          language {\n            code\n          }\n        }\n        language {\n          code\n          name\n        }\n      }\n      ... on Video {\n        id\n        language {\n          code\n          name\n        }\n      }\n      ... on Interactive {\n        id\n        translations {\n          language {\n            code\n          }\n        }\n        language {\n          code\n          name\n        }\n      }\n      ... on Slideshow {\n        id\n        translations {\n          language {\n            code\n          }\n        }\n        language {\n          code\n          name\n        }\n      }\n      ... on CreativeWork {\n        collections @filterEmpty {\n          id\n          slug\n          collectionType\n        }\n        headline {\n          default @stripHtml\n          seo @stripHtml\n        }\n        summary\n        timesTags @filterEmpty {\n          displayName\n          vernacular\n        }\n        section {\n          id\n          displayName\n          name\n        }\n        subsection {\n          id\n          name\n        }\n        bylines {\n          renderedRepresentation\n          creators {\n            ... on Published {\n              url\n            }\n          }\n        }\n      }\n      ... on Published {\n        firstPublished\n        lastModified\n        lastMajorModification\n        sourceId\n        uri\n        eventId\n      }\n      promotionalMedia {\n        ...AssetHelmet_promoImage\n        ... on EmbeddedInteractive {\n          id\n          promotionalMedia {\n            ...AssetHelmet_promoImage\n          }\n        }\n        ... on Video {\n          id\n          promotionalMedia {\n            ...AssetHelmet_promoImage\n            ... on Video {\n              id\n              promotionalMedia {\n                ...AssetHelmet_promoImage\n              }\n            }\n          }\n        }\n        ... on Audio {\n          id\n          promotionalMedia {\n            ...AssetHelmet_promoImage\n          }\n        }\n      }\n      ...AssetHelmet_promotionalImage\n    }\n    ","\n    ","\n  "])),D,B)};t.a=N},eDf7:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.labelEmphasisClass=t.labelContainerClass=void 0;var r=n("Jqp9"),a=n("3sMT"),o=i(n("wXC7")),s=(0,r.css)("margin-right:5px;display:inline-block;letter-spacing:0.06em;text-transform:uppercase;font-size:",o.default.font.size(12),";line-height:",o.default.font.size(12),";font-weight:",o.default.font.weight.extraBold,";");t.labelContainerClass=s;var l=(0,r.css)("color:",a.color.signal.breaking,";");t.labelEmphasisClass=l},eRNE:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("boCj")),o=i(n("0p19")),s=n("Xx18");function l(e){var t=e.storyline,n=e.parentUrl,i=e.isPeeking,l=e.trackLinkInteraction,c=e.internalLinkTrackingParams,u=e.trackImpressionEvent;if(!t.context)return null;var d=t.context,p=d.items,f=d.displayName;return r.default.createElement(a.InView,{as:"section",role:"complementary",className:s.contextContainerClass,"aria-label":f},r.default.createElement("div",{className:s.contextHeaderClass,"data-testid":"context-component-new"},r.default.createElement("h2",{className:s.titleClass},f)),r.default.createElement(o.default,{title:f,items:p,parentUrl:n,isPeeking:i,trackLinkInteraction:l,internalLinkTrackingParams:c,trackImpressionEvent:u}))}l.displayName="StorylineContextV2",l.defaultProps={isPeeking:!1,trackLinkInteraction:function(){},internalLinkTrackingParams:null,trackImpressionEvent:function(){}};var c=l;t.default=c},eUG7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.aspectRatioOuterClass=t.aspectRatioInnerClass=void 0;var i=n("Jqp9"),r=(0,i.css)("height:0;width:100%;position:relative;background-color:transparent;");t.aspectRatioOuterClass=r;var a=(0,i.css)("position:absolute;top:0;left:0;width:100%;height:100%;");t.aspectRatioInnerClass=a},ed9S:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.balanceText=l,t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(i,o,l):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("LOnR")));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function l(e){if(e.length<15)return[e];for(var t,n=Math.floor(e.length/2),i=0;i<n;i+=1){var r=n-i,a=n+i;if(" "===e[r]){t=r;break}if(" "===e[a]){t=a;break}}return[e.substr(0,t),e.substr(t)]}var c=function(e){var t=e.className,n=e.text,i=e.disable;if(!n)return null;var r=i?[n]:l(n);return a.default.createElement("span",{className:t},r.map((function(e){return a.default.createElement("span",{key:e,className:o.textBalancerClass,"data-testid":"text-balancer"},e)})))};c.displayName="TextBalancer",c.defaultProps={className:void 0,disable:!1,text:null};var u=c;t.default=u},eeq6:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OnsiteSummary=void 0;var r=i(n("q1tI")),a=i(n("XlcC")),o=i(n("oKgi")),s=n("V6Yu"),l=(n("EVBM"),function(e){var t=e.summary;if(!t||!(0,s.hasContent)(t))return null;var n=t.content.map(a.default);return r.default.createElement(o.default,{id:"article-summary","data-testid":"onsite-summary"},n)});t.OnsiteSummary=l,l.displayName="OnsiteSummary",l.defaultProps={summary:null};var c=l;t.default=c},eoAV:function(e,t,n){"use strict";var i=n("pVnL"),r=n.n(i),a=n("gcR/"),o=n.n(a),s=n("QILm"),l=n.n(s),c=n("lwsE"),u=n.n(c),d=n("W8MJ"),p=n.n(d),f=n("7W2i"),m=n.n(f),h=n("a1gu"),g=n.n(h),y=n("Nsbk"),v=n.n(y),b=n("q1tI"),_=n.n(b),w=n("aqT/"),x=n.n(w),k=n("Jqp9"),O=n("mczz"),E=["children","onLoad"];function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return g()(this,n)}}var C=Object(k.css)("display:block;height:5px;"),S=function(e){m()(n,e);var t=T(n);function n(){var e;u()(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={isVisible:!1},e.mounted=!1,e.onChange=function(t){e.mounted&&t&&!e.state.isVisible&&e.setState({isVisible:!0})},e}return p()(n,[{key:"componentDidMount",value:function(){this.mounted=!0,Object(O.d)(Object(O.c)(),"forceLazy")&&this.setState({isVisible:!0})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.onLoad,i=l()(e,E);return this.state.isVisible?(n&&n(),t):_.a.createElement(x.a,r()({},i,{onChange:this.onChange}),o()("div",{className:C,"data-testid":"lazy-load-wrapper-".concat(JSON.stringify(this.props.offset))}))}}]),n}(b.Component);S.displayName="LazyLoadWrapper",S.defaultProps={partialVisibility:!0,scrollCheck:!0,offset:{bottom:-500},onLoad:null},t.a=S},"f/4F":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.linkImageClass=t.headshotSpaceBetween=t.headshotOpinionHeaderRedesignSize=t.headshotOpinionDesktopSize=t.headshotDesktopBreakpoint=t.getHeadshotSize=t.ampHeadshotClass=t.StyledHeadshot=t.NodeHeadshotContainer=t.HeadshotsContainer=void 0;var r=n("Jqp9"),a=i(n("wXC7"));t.headshotOpinionHeaderRedesignSize=40;var o=a.default.breakpoint.mediumLarge;t.headshotDesktopBreakpoint=o;t.headshotOpinionDesktopSize=80;t.headshotSpaceBetween=10;var s=function(e){return"opinion"===e.theme.section?e.theme.opinionHeaderRedesign?40:60:50};t.getHeadshotSize=s;var l=function(e,t){return"opinion"===e.theme.section&&(0,r.css)(o,"{",t,";}")},c=(0,r.css)("display:inline-block;margin-bottom:auto;"),u=(0,r.css)("display:block;width:100%;margin-bottom:0.5rem;",o,"{display:inline-block;width:auto;margin-bottom:auto;}"),d=(0,r.css)("display:block;width:100%;margin-bottom:0.5rem;",o,"{display:inline-block;width:auto;}"),p=function(e){return(0,r.css)("min-width:",(s(e)+10)*e.headshotCount,"px;",1===e.headshotCount&&c,";",2===e.headshotCount&&("opinion"!==e.theme.section||!e.theme.opinionHeaderRedesign)&&u,";",e.headshotCount>2&&d,";",l(e,(0,r.css)("min-width:",90*e.headshotCount,"px;")))},f=(0,r.styled)("div",{target:"ey68jwv0"})(p);t.HeadshotsContainer=f;var m=(0,r.css)("margin-right:",10,"px;vertical-align:bottom;"),h=function(e){return(0,r.css)("width:",s(e),"px;",m,";",l(e,(0,r.css)("width:",80,"px;margin-bottom:0;")))},g=(0,r.styled)("div",{target:"ey68jwv1"})("img,amp-img{",h,";margin-right:0;}",p,";");t.NodeHeadshotContainer=g;var y=(0,r.styled)("img",{target:"ey68jwv2"})(h,";border-radius:50%;");t.StyledHeadshot=y;var v=(0,r.css)("width:100%;height:100%;");t.linkImageClass=v;var b=(0,r.css)(m,";",v,";");t.ampHeadshotClass=b},f3Il:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.titleUnderlineClass=t.titleLinkClass=t.titleClass=t.featureToneClass=t.caretClass=void 0;var r=n("Jqp9"),a=n("3sMT"),o=i(n("wXC7")),s=(0,r.css)("font-family:",o.default.font.franklinBase,";font-size:",o.default.font.size(14),";line-height:",o.default.font.size(14),";font-weight:",o.default.font.weight.bold,";flex-shrink:0;width:auto;display:flex;margin-right:16px;padding-right:15px;color:",a.color.content.primary,";background-color:",a.color.background.elevated,";box-shadow:4px 0 7px 10px ",a.color.background.elevated,";border-right:1px solid ",a.color.stroke.quaternary,";",o.default.breakpoint.small,"{font-size:",o.default.font.size(15),";line-height:",o.default.font.size(15),";}");t.titleClass=s;var l=(0,r.css)("span:last-of-type::after{content:'';font-weight:",o.default.font.weight.medium,";font-size:",o.default.font.size(18),";margin-left:4px;color:inherit;position:relative;bottom:-1px;",o.default.breakpoint.small,"{font-size:",o.default.font.size(19),";}}");t.caretClass=l;var c=(0,r.css)("font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.mediumBold,";font-size:",o.default.font.size(17),";line-height:",o.default.font.size(17),";",o.default.breakpoint.small,"{font-size:",o.default.font.size(18),";line-height:",o.default.font.size(18),";}span:last-of-type::after{font-size:",o.default.font.size(19),";font-weight:",o.default.font.weight.mediumBold,";",o.default.breakpoint.small,"{font-size:",o.default.font.size(20),";}}");t.featureToneClass=c;var u=(0,r.css)("padding-bottom:0;",o.default.breakpoint.small,"{:hover,:focus,:active{padding-bottom:1px;color:",a.color.content.tertiary,";border-bottom:2px solid ",a.color.content.tertiary,";}}");t.titleUnderlineClass=u;var d=(0,r.css)("text-decoration:none;color:unset;");t.titleLinkClass=d},f6wl:function(e,t){e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return'(function () { var _f=function(t={}){window.AdSlot4=window.AdSlot4||{},window.AdSlot4.cmd=window.AdSlot4.cmd||[],window.AdSlot4.clientRequirements={mergeObjects:function(t,...e){return e.reduce(function(t,e){return Object.entries(e).reduce(function(t,[e,n]){return t[e]&&null==n?t:Object.assign({},t,{[e]:n})},t)},t)},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},getAbraVariant:function(t){if(!(window.NYTD&&window.NYTD.Abra&&window.NYTD.Abra.getAbraSync&&this.isFunction(window.NYTD.Abra.getAbraSync)))return void console.warn("Abra does not exist or is not a function");const e=window.NYTD.Abra.getAbraSync(t);return e&&e.variant},shouldHaltDFP:function(t){return"1_block"===this.getAbraVariant(t)},isAdsDisabled:function(t={}){const{adTargeting:{section:e}={},adsDisabled:n,adUnitPath:i=""}=t,o=i&&i.toLowerCase&&i.toLowerCase().includes("tragedy");return n||"learning"===e||o},getSov:function(t={}){return t.sov=t.sov||(Math.floor(4*Math.random())+1).toString(),{sov:t.sov}},getPageViewId:function(t){return{page_view_id:t&&t.current}},getUserData:function(t="{}"){try{const e=JSON.parse(t).data;return e&&e.user}catch(t){console.warn("userinfo data unavailable")}},getEm:function(t){return t&&t.length?{em:t.toString().toLowerCase()}:{}},getWat:function(t){return t?{wat:t.toLowerCase()}:{}},getDemographics:function(t){return this.mergeObjects(this.getEm(t&&t.emailSubscriptions),this.getWat(t&&t.wat))},isValidDfpVariant:function(t){return t.toLowerCase().indexOf("dfp")>-1||t.indexOf("redbird")>-1},joinArgumentsForVariant:function(){if(arguments.length)return[].slice.call(arguments).join("_").toLowerCase()},reduceAbraConfigKeysToDfpVariants:function(t=[],e=""){const n=this.getAbraVariant(e),i=this.joinArgumentsForVariant(e,n);return n&&i?t.concat(i):t},getDFPTestNames:function(t={}){if(!t)return[];const e=this.isValidDfpVariant;return Object.keys(t).filter(function(t){return e(t)})},getAbraDfpVariants:function(t={}){this.isValidDfpVariant;let e="";if(t.config){e=this.getDFPTestNames(t.config).reduce(this.reduceAbraConfigKeysToDfpVariants,[])}return{abra_dfp:e}},isMobile:function(t){const e=t.matchMedia("(max-width: 739px)");return e&&e.matches},isManualRefresh:function(t={}){return!(!t.navigation||1!==t.navigation.type)},getAltLangFromPathname:function(t=""){return 0===t.indexOf("/es/")?"es":""},getAdTargetingProperty:function(t=!1,e=""){let n=t?"m":"";return{prop:(n+=e)+"nyt"}},getAdTargetingPlatform:function(t=!1){return{plat:(t?"m":"")+"web"}},getAdTargetingEdition:function(t=""){return t.length?{edn:t}:{}},getAdTargetingVersion:function(t=!1){return{ver:(t?"m":"")+"vi"}},getAdTargetingHome:function(t,e,n){let i={},o={};return"hp"===t&&(i=e?{topRef:e}:{},o=n?{refresh:"manual"}:{}),this.mergeObjects(i,o)},getAdTargeting:function(t={},e={}){const n=this.isMobile(window),i=this.getAltLangFromPathname(window.location.pathname),o=this.isManualRefresh(performance);return this.mergeObjects(t,this.getDemographics(e),this.getAdTargetingProperty(n,i),this.getAdTargetingPlatform(n),this.getAdTargetingEdition(i),this.getAdTargetingVersion(n),this.getAdTargetingHome(t.typ,document.referrer,o),this.getAbraDfpVariants(window.NYTD.Abra),this.getSov(window),this.getPageViewId(window.NYTD.PageViewId))},init:function(t){window.AdSlot4.init&&this.isFunction(window.AdSlot4.init)?window.AdSlot4.init&&window.AdSlot4.init(t):console.warn("AdSlot4.init does not exist or is not a function")},reportExposure:function(t){window.NYTD.Abra&&this.isFunction(window.NYTD.Abra.reportExposure)?window.NYTD.Abra.reportExposure(t):console.warn("Abra.reportExposure does not exist or is not a function")},generateConfig:function(t={},e={},n={}){const i=n&&n.userInfo&&n.userInfo.demographics;return this.mergeObjects(t,e,{adTargeting:this.getAdTargeting(e.adTargeting,i),haltDFP:this.shouldHaltDFP(e.dfpToggleName||t.dfpToggleName),adsDisabled:this.isAdsDisabled(e)})}};for(let t in window.AdSlot4.clientRequirements)window.AdSlot4.clientRequirements[t]=window.AdSlot4.clientRequirements[t].bind(window.AdSlot4.clientRequirements);const e={adUnitPath:"/29390238/nyt/thisIsNotAPath",offset:400,hideTopAd:AdSlot4.clientRequirements.isMobile(window),lockdownAds:!1,sizeMapping:{top:[[970,["fluid",[728,90],[970,90],[970,250],[1605,300]]],[728,["fluid",[728,90],[1605,300]]],[0,[]]],fp1:[[0,[[195,250],[215,270]]]],fp2:[[0,[[195,250],[215,270]]]],fp3:[[0,[[195,250],[215,270]]]],feat1:[[0,["fluid"]]],feat2:[[0,["fluid"]]],feat3:[[0,["fluid"]]],feat4:[[0,["fluid"]]],mktg:[[1020,[300,250]],[0,[]]],pencil:[[728,[[336,46]],[0,[]]]],pp_edpick:[[0,["fluid"]]],pp_morein:[[0,["fluid"],[210,218]]],ribbon:[[0,["fluid"]]],sponsor:[[765,[150,50]],[0,[320,25]]],supplemental:[[1020,[[300,250],[300,600]]],[0,[]]],chat:[[0,[[300,250],[300,420]]]],column:[[0,[[300,250],[300,420]]]],ressint:[[600,["fluid"]],[0,[[300,250]]]],default:[[970,["fluid",[728,90],[970,90],[970,250],[1605,300]]],[728,["fluid",[728,90],[300,250],[1605,300]]],[0,["fluid",[300,250],[300,420]]]]},adTargeting:{},haltDFP:!1,dfpToggleName:t.dfpToggleName,lazyApi:t.lazyApi||{},adsDisabled:!1};window.AdSlot4.cmd.push(function(){const n=window.AdSlot4.clientRequirements,i=n.getUserData(window&&window.userXhrObject&&window.userXhrObject.responseText),o=n.generateConfig(e,t,i);n.init(o),n.reportExposure("dfp_adslot4v2")})};;_f.apply(null, '.concat(JSON.stringify(t),"); })();")}},f81r:function(e,t,n){"use strict";var i,r=n("4Z/T");t.a={addAComment:"Add a comment",all:"All",anErrorOccurred:"An error occurred",couldNotSave:"An error has occurred and we cannot save your comment. Please copy what youve written and refresh the page to try again.",tooManySubmits:"User submitted a comment recently. Please wait before submitting another one.",backToAllComments:"Back to All Comments",commentNotFound:"The comment you are looking for is currently unavailable.",cancel:"Cancel",commentsClosed:'The comments section is closed.\n      To submit a letter to the editor for publication, write to\n      <a href="mailto:letters@nytimes.com">letters@nytimes.com</a>.',commentList:"List of Comments",commentPosted:"Your comment has been posted.",commentPromptPlaceholder:"Share your thoughts.",edit:"Edit",inReplyTo:"In Reply to",loading:"Loading...",moderationDisclaimer:"Comments are moderated for civility.",newest:"Newest",noComments:"No comments yet. Be the first to comment.",nytPicks:"NYT Picks",reporterReplies:"NYT Replies",oldest:"Oldest",pendingApproval:"Pending Approval",permalink:"Permalink",readerPicks:"Reader Picks",readMore:"Read More",recommend:"Recommend",recommended:"Recommended",reported:"Reported",reply:"Reply",replies:"Replies",requiredLabel:(i="%(fieldName)s (required)",function(e){return Object(r.sprintf)(i,e)}),save:"Save",submit:"Submit",submissionThanks:"Thank you for your submission.",waitingOnApproval:"Your comment will appear once it has been approved.",waitingOnApprovalNotify:"We'll notify you via email when your comment has been approved.",timesPick:"Times Pick",welcome:"The Times needs your voice. We welcome your on-topic commentary, criticism and expertise.",viewAllReplies:"View All Replies",writeAComment:"Write a comment",commentNotifyLabel:"Email me when my comment is published and if a journalist responds.",nameLabel:"Name",locationLabel:"Location",commentFormNameTooLong:"Name is too long.",commentFormEmailTooLong:"Location is too long.",commentFormNoEmail:"Please do not include your email.",commentFormAvatarTooBig:"Avatar must be smaller than 5mbs.",commentFormErrorBodyTooLong:"Comment body is too long.",commentFormProfileLabel:"This appears on your posts",flag:"Flag",share:"Share",reportInappropriateComment:"Report Inappropriate Comment",vulgar:"Vulgar",spam:"Spam",inflammatory:"Inflammatory",offTopic:"Off Topic",personalAttack:"Personal Attack",verifiedAccountAutoApproved:"Since you're signed into a verified account, your comment has been automatically approved. ",verifiedNote:"PLEASE NOTE: You are logged in with a verified New York Times staff account as part of the Reporter Reply program. Comments you leave will identify you as a staff member. Please keep that in mind when responding.",reporterReplyUrlLabel:"You can find more about the Reporter Reply program here"}},f9QA:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.paragraphClass=t.linkClass=void 0;var r=n("3sMT"),a=n("Jqp9"),o=i(n("wXC7")),s=(0,i(n("3Rk2")).default)([o.default.breakpoint.medium]),l=(0,a.css)("font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.medium,";",s({fontSize:[o.default.font.size(16),o.default.font.size(17)],lineHeight:[o.default.font.size(22),o.default.font.size(24)]}));t.paragraphClass=l;var c=(0,a.css)("color:",r.color.signal.editorial,";text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:1px;&:visited{color:",r.color.signal.editorial,";}&:hover{text-decoration:none;}");t.linkClass=c},fQFh:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-cooking-276e5519a9df3d2697b666fb95ddd69b.webp"},fRbn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.navListClass=t.dotClass=t.activeClass=void 0;var i=n("Jqp9"),r=n("3sMT"),a=(0,i.css)("list-style:none;counter-reset:list-block-counter;display:inline-flex;flex-flow:row nowrap;align-items:center;");t.navListClass=a;var o=(0,i.css)("margin:0 6px 0 0;width:6px;height:6px;border-radius:50%;background-color:",r.color.background.quaternary,";transition:background-color 0.2s ease;");t.dotClass=o;var s=(0,i.css)("background-color:",r.color.background.inversePrimary,";");t.activeClass=s},fY8U:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=(0,n("q1tI").createContext)(0);t.default=i},fdyL:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.productsWithSignupRedirectLookup=t.isSubOnlyWithFreeTrial=t.isSubOnly=t.isFreeNewsletter=t.handleRedirectForNewsletter=t.getNewsletterCardButtonStates=t.getInArticleSignupText=t.getInArticleConfirmationText=t.getInArticleConfirmationCTAText=t.createNewsletterSignupRedirectUrl=t.convertProductDefaultsToSamizdatData=t.MANAGE_YOUR_PLACES_PATH=void 0;var r=i(n("lSNA")),a=n("T25G"),o=n("5E+G"),s=i(n("Ds/+")),l=i(n("tPsl"));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.isFreeNewsletter=function(e){return e instanceof s.default};var d=function(e){return e instanceof l.default};t.isSubOnly=d;t.isSubOnlyWithFreeTrial=function(e){return d(e)&&e.allowsFreeTrial()};t.getNewsletterCardButtonStates=function(e,t,n,i){var r=d(e)&&e.canTakeFreeTrial(t)&&!i&&!n;return{showTryFor4Weeks:r,showCircularPlusButton:!r||r&&(i||n),showCheckmark:i||n}};t.convertProductDefaultsToSamizdatData=function(e,t){var n=u(u({},e),{},{productCode:t});return{newsletterId:n.productCode||"",title:(null==n?void 0:n.title)||"",caption:(null==n?void 0:n.caption)||"",frequency:(null==n?void 0:n.frequency)||"",altText:(null==n?void 0:n.altText)||"",sampleUrl:(null==n?void 0:n.sampleUrl)||"",thumbImageUrl:(null==n?void 0:n.thumbImg)||"",allowedEntitlement:(null==n?void 0:n.allowedEntitlement)||"",subscriptionPageLink:(null==n?void 0:n.subscriptionPageLink)||"",isOnsiteFreeTrialEnabled:(null==n?void 0:n.isOnsiteFreeTrialEnabled)||0}};t.getInArticleSignupText=function(e,t){return d(e)?e.canTakeFreeTrial(t)?o.IN_ARTICLE_CTA_TEXT[o.SIGNUP_TYPE.FREE_TRIAL]:e.isEligible(t)?o.IN_ARTICLE_CTA_TEXT[o.SIGNUP_TYPE.SUBSCRIBER]:o.IN_ARTICLE_CTA_TEXT[o.SIGNUP_TYPE.NEED_SUBSCRIPTION]:o.IN_ARTICLE_CTA_TEXT[o.SIGNUP_TYPE.DEFAULT]};t.getInArticleConfirmationText=function(e){var t=e.getData().title,n=(0,a.nameWithArticle)(t);return d(e)?e.allowsFreeTrial()?t?"You are now signed up for 4 weeks of ".concat(n," newsletter."):"Thank you for signing up for 4 week complimentary access.":"You are now signed up for ".concat(n," newsletter. Thank you for being a Times subscriber."):"Thank you for signing up. We have other newsletters you may enjoy."};t.getInArticleConfirmationCTAText=function(e){return d(e)?e.allowsFreeTrial()?"Explore more subscriber-only newsletters.":"Explore more newsletters.":"Take a look."};t.MANAGE_YOUR_PLACES_PATH="/your-places-global-update";var p={YPGU:{name:"Your Places: Global Update",baseRedirectUrl:"https://nytimes.com/your-places-global-update"},YPEW:{name:"Your Places: Extreme Weather",baseRedirectUrl:"https://nytimes.com/interactive/2023/us/extreme-weather-forecast-maps.html"}};t.productsWithSignupRedirectLookup=p;var f=function(e){var t=e.productCode,n=e.signup_origin,i=(p[t]||{}).baseRedirectUrl;if(!i)return null;var r=new URL(i),a=n?"&signup_origin=".concat(n):"",o="?".concat("signup_redirect=true").concat(a);return"".concat(window.location.origin).concat(r.pathname).concat(o)};t.createNewsletterSignupRedirectUrl=f;t.handleRedirectForNewsletter=function(e,t){var n=f({productCode:null==e?void 0:e.productCode,signup_origin:t});n&&window.location.assign(n)}},fmuu:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!u[e.__typename])return console.warn('Unrecognized format "'.concat(e.__typename,'"')),t||null;return u[e.__typename](e,t,n,i)};var r=i(n("G03P")),a=i(n("HTGc")),o=i(n("3HYe")),s=i(n("SoJ3")),l=i(n("x4ns")),c=i(n("dn9S")),u={BoldFormat:a.default,ItalicFormat:o.default,LinkFormat:r.default,DropcapFormat:s.default,SuperscriptFormat:l.default,SubscriptFormat:c.default}},fpec:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),i(n("wXC7"))),o=n("Jqp9"),s=n("V6Yu"),l=i(n("3XBt")),c=i(n("TvEp")),u=function(e){var t,n=(0,o.useTheme)();if(!e)return null;var i=e.children,u=e.content,d=e.hangPunctuation,p=e.customOffset,f=e.textAlign,m=e.className,h=e.id,g={className:(0,o.cx)(m,"rightToLeft"===(null==n?void 0:n.languageDirection)?a.default.textAlign.right:a.default.textAlign[f.toLowerCase()])};h?g.id=h:u&&(g.id="link-".concat((0,s.createHexHash)((0,s.textFromOakContent)(u))));var y=r.default.createElement(c.default,null);if(y=r.default.createElement(c.default,{id:g.id,className:g.className,"data-testid":"headline"},i),d&&u&&null!==(t=u[0])&&void 0!==t&&t.text){var v=u[0].text;y=r.default.createElement(l.default,{customOffset:p,text:v},y)}return y};u.defaultProps={children:null,hangPunctuation:!1,content:null,customOffset:"",textAlign:"left",id:null};var d=u;t.default=d},"g+Cy":function(e,t,n){"use strict";var i,r,a=n("gcR/"),o=n.n(a),s=(n("q1tI"),n("wXC7")),l=n.n(s),c=function(e){var t=e.className,n=e.fill;return o()("svg",{viewBox:"0 0 44 57",className:t,"aria-hidden":!0},void 0,i||(i=o()("defs",{})),o()("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},void 0,o()("g",{fill:n},void 0,r||(r=o()("path",{d:"M43.6284633,34.8996508 C41.83393,39.6379642 38.53153,43.2989842 33.7932167,45.2371375 L33.7932167,34.8996508 L39.46463,29.8027175 L33.7932167,24.7777375 L33.7932167,17.6709842 C38.9621033,17.3120775 42.5514567,13.5074375 42.5514567,8.84136417 C42.5514567,2.73966417 36.7369967,0.5859375 33.4345967,0.5859375 C32.71707,0.5859375 31.9270167,0.5859375 30.7789167,0.872890833 L30.7789167,1.16013083 C31.20949,1.16013083 31.8550633,1.08846417 32.0709233,1.08846417 C34.36827,1.08846417 36.0911367,2.16518417 36.0911367,4.2469575 C36.0911367,5.82620417 34.7988433,7.40545083 32.5017833,7.40545083 C26.83037,7.40545083 20.15419,2.81133083 12.9038167,2.81133083 C6.44292333,2.81133083 1.99242333,7.6207375 1.99242333,12.5023842 C1.99242333,17.3120775 4.79201,18.8913242 7.73521667,19.9680442 L7.80717,19.6808042 C6.87378333,19.1066108 6.22763667,18.1018442 6.22763667,16.5223108 C6.22763667,14.3688708 8.23774333,12.5743375 10.7503767,12.5743375 C16.8520767,12.5743375 26.68675,17.6709842 32.7887367,17.6709842 L33.36293,17.6709842 L33.36293,24.8496908 L27.6918033,29.8027175 L33.36293,34.8996508 L33.36293,45.3804708 C30.9942033,46.2416175 28.5532367,46.6010975 26.0406033,46.6010975 C16.5648367,46.6010975 10.53509,40.8577308 10.53509,31.3102975 C10.53509,29.0135242 10.8220433,26.7878442 11.46819,24.6341175 L16.20593,22.5526308 L16.20593,43.6576042 L25.8253167,39.4226775 L25.8253167,17.8146042 L11.6834767,24.1315908 C13.1191033,19.9680442 16.06231,16.9531708 19.5799967,15.2303042 L19.50833,15.0150175 C10.0322767,17.0967908 0.84375,24.2754975 0.84375,35.0432708 C0.84375,47.4622442 11.32457,56.0768642 23.5285433,56.0768642 C36.4497567,56.0768642 43.7720833,47.4622442 43.84375,34.8996508 L43.6284633,34.8996508 Z"})))))};c.displayName="TLogoIcon",c.defaultProps={className:void 0,fill:l.a.color.black},t.a=c},g4BQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.playbackAnimationClass=void 0;var i=(0,n("Jqp9").css)("height:14px;width:14px;margin-right:10px;");t.playbackAnimationClass=i},gJ8K:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(r,a){function o(e){try{l(i.next(e))}catch(e){a(e)}}function s(e){try{l(i.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((i=i.apply(e,t||[])).next())}))},s=this&&this.__generator||function(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(r=o.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=a(n("q1tI")),u=n("Jqp9"),d=n("X6oL"),p=l(n("5UIh")),f=a(n("xn+k")),m=n("syiw"),h=n("HDG5"),g=n("K5H2"),y=l(n("aV8g")),v=a(n("FY2l")),b=n("6gWn"),_=n("bSj6");t.default=function(e){var t,n,i,r,a,l,w,x,k=this,O=e.unit,E=(0,c.useState)(!1),T=E[0],C=E[1],S=(0,m.useMessageSelection)({config:{name:"dock"}}),P=(0,h.useUserState)(),M=(0,d.useTracking)(),I="/"===(0,v.getPathName)()?"homepage":"article",A=(0,c.useState)(!1),j=A[0],L=A[1],R=(0,c.useState)(!1),N=R[0],D=R[1],B=(0,c.useState)(!1),z=B[0],F=B[1],U=(0,c.useState)(""),H=U[0],W=U[1],q=function(e){return"prd"===e?"https://myaccount.nytimes.com":"https://myaccount.stg.nytimes.com"}((0,g.useMessagingContext)().env),V=null===(n=null===(t=null==S?void 0:S.response)||void 0===t?void 0:t.subInfo())||void 0===n?void 0:n.filter((function(e){return"ACTIVE"===e.status})),G=V&&(null===(i=V[0])||void 0===i?void 0:i.subscriptionID),Y={currentSubscriptionId:G},Z=(0,v.default)("https://www.nytimes.com/get-started").toString(),X=new URLSearchParams({conid:G||""}),J="".concat("https://nyt.qualtrics.com/jfe/form/SV_2sI6T8b9Z7r2zSS","?").concat(X),K=c.default.createElement("div",{className:f.headerText},z?"All set. Your trial begins now.":"Try a free upgrade to unlimited access."),$=c.default.createElement("div",{className:f.descriptionBox},c.default.createElement("div",{className:f.confirmationTitle},"You have three months of unlimited access at your current rate."),c.default.createElement("div",{className:f.confirmationSubtitleBox},c.default.createElement("div",{className:f.subscriptionText},"Trial expires: ",(x=new Date(H),Number.isNaN(x.valueOf())?"Invalid Date":new Intl.DateTimeFormat("en-US",{timeZone:"UTC",month:"long",day:"numeric",year:"numeric"}).format(x))),c.default.createElement("div",{className:f.subscriptionText},"You won't be charged more at the end."))),Q=c.default.createElement("div",{className:f.loaderBox},c.default.createElement("div",{className:f.spinner},c.default.createElement("div",{className:f.bar1}),c.default.createElement("div",{className:f.bar2}),c.default.createElement("div",{className:f.bar3}),c.default.createElement("div",{className:f.bar4}),c.default.createElement("div",{className:f.bar5}),c.default.createElement("div",{className:f.bar6}),c.default.createElement("div",{className:f.bar7}),c.default.createElement("div",{className:f.bar8}),c.default.createElement("div",{className:f.bar9}),c.default.createElement("div",{className:f.bar10}))),ee=c.default.createElement("div",null,!N&&c.default.createElement("div",{className:f.descriptionBox},c.default.createElement("div",{className:f.title1},"Want more than news?"),c.default.createElement("div",{className:f.title2},"Enjoy access to everything we offer for three months - at your current rate. You won't be charged more at the end."),c.default.createElement("div",{className:f.complianceLinksDesktop},c.default.createElement(_.Anchor,{href:"https://www.nytimes.com/privacy/privacy-policy",target:_.Target.Blank,className:f.complianceLink},"Privacy Policy")," ",c.default.createElement(_.Anchor,{href:"https://help.nytimes.com/hc/en-us/articles/115014893428-Terms-of-Service",target:_.Target.Blank,className:f.complianceLink},"Terms of Service"))),N&&c.default.createElement("p",{className:f.header},"Hmm... Something went wrong. Please try activating your free access again.")),te=c.default.createElement("div",{className:(0,u.cx)(f.mainContent)},c.default.createElement("div",{className:f.headerLogo},c.default.createElement(y.default,null)),z?$:ee,c.default.createElement("div",{className:f.ctaContainer},z?c.default.createElement("button",{className:f.confirmationButton,type:"button",onClick:function(){!function(){var e;M.trackEvent({event:"moduleInteraction",eventData:{pagetype:I,trigger:"module",type:"click"},module:{name:"dock",context:"expanded",audience:(null===(e=O.content)||void 0===e?void 0:e.audience)||"",label:"CH_AT-RISK_SUBSCRIBER_RETENTION_2312",region:"",element:{name:"DOCK_START_FREE_ADA_3_MONTH_TRIAL",label:"onboarding-click",url:Z}}})}(),window.location.href=Z}},"Get started with All Access"):c.default.createElement(c.default.Fragment,null,c.default.createElement("button",{className:f.offerButton,type:"button",onClick:function(){o(k,void 0,void 0,(function(){var e,t,n,i,r;return s(this,(function(a){switch(a.label){case 0:L(!0),a.label=1;case 1:return a.trys.push([1,4,5,6]),[4,fetch("".concat(q,"/svc/cancel/query"),{method:"POST",credentials:"include",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"mutation CreateComplimentarySubscription(\n  $data: CreateComplimentarySubscriptionInput!\n) {\n  createComplimentarySubscription(\n    createComplimentarySubscriptionInput: $data\n  ) {\n    success\n    message\n    endDate\n  }\n}",operationName:"CreateComplimentarySubscription",variables:{data:Y}})})];case 2:return[4,a.sent().json()];case 3:return e=a.sent(),(null===(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.createComplimentarySubscription)||void 0===n?void 0:n.success)?(F(!0),W(null===(r=null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.createComplimentarySubscription)||void 0===r?void 0:r.endDate)):D(!0),[3,6];case 4:return a.sent(),D(!0),[3,6];case 5:return L(!1),[7];case 6:return[2]}}))})),function(){var e;M.trackEvent({event:"moduleInteraction",eventData:{pagetype:I,trigger:"module",type:"click"},module:{name:"dock",context:"expanded",audience:(null===(e=O.content)||void 0===e?void 0:e.audience)||"",label:"CH_AT-RISK_SUBSCRIBER_RETENTION_2312",region:"",element:{name:"redeem-free-trial",label:"Start trial"}}})}()},disabled:j},"Start trial"),c.default.createElement("div",{className:f.surveyText},"Not interested?"," ",c.default.createElement(_.Anchor,{className:f.link,href:J,target:_.Target.Blank,onClick:function(){var e;M.trackEvent({event:"moduleInteraction",eventData:{pagetype:I,trigger:"module",type:"click"},module:{name:"dock",context:"expanded",audience:(null===(e=O.content)||void 0===e?void 0:e.audience)||"",label:"CH_AT-RISK_SUBSCRIBER_RETENTION_2312",region:"",element:{name:"goto-survey",label:"Not interested? Tell us why.",url:J}}})}},"Tell us why"),c.default.createElement("div",{className:f.complianceLinksMobile},c.default.createElement(_.Anchor,{href:"https://www.nytimes.com/privacy/privacy-policy",target:_.Target.Blank,className:f.complianceLink},"Privacy Policy")," ",c.default.createElement(_.Anchor,{href:"https://help.nytimes.com/hc/en-us",target:_.Target.Blank,className:f.complianceLink},"Help"))))));if(S.loading)return null;if(!T){var ne=null===(a=null===(r=null==S?void 0:S.response)||void 0===r?void 0:r.userstate())||void 0===a?void 0:a.messageSelectionMessageCaps,ie=null;if(ne)if((ae=ne).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==S?void 0:S.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==S?void 0:S.response)||void 0===n?void 0:n.audience())&&(ie=e)})),null!==ie){var re=ie;re.viewCount+=1,re.lastSeenOn=(new Date).toISOString(),P.update({messageSelectionMessageCaps:ae})}if(!ie){var ae=[];ne&&(ae=ne),ae.push({unit:"dock",campaign:null===(l=null==S?void 0:S.response)||void 0===l?void 0:l.campaign(),audience:null===(w=null==S?void 0:S.response)||void 0===w?void 0:w.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),P.update({messageSelectionMessageCaps:ae})}C(!0)}return c.default.createElement(p.default,{testId:"onsite-messaging-unit-".concat(null===b.config||void 0===b.config?void 0:b.config.name),className:f.dockBorder,unit:O,contentID:"CH_AT-RISK_SUBSCRIBER_RETENTION_2312",dockID:"expand",header:K,card:j?Q:te,isDockDismissible:z,isDockExpandable:!z,minimized:!1,headingClassStyle:f.headingClassStyle,headingInfoContainerStyle:f.headingInfoContainerStyle})}},gVNr:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-the-veggie-f7c053c8b480b183342a9514c3b2787c.webp"},gX7T:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=n("Jqp9"),o=i(n("XlcC")),s=i(n("i+0r")),l=i(n("fpec")),c=i(n("oKgi")),u=i(n("HMjI")),d=n("mH4u"),p=n("V6Yu"),f=i(n("/UXH")),m=i(n("95Yr")),h=i(n("XMNT")),g=i(n("ApQM")),y=n("gmXO"),v=i(n("lraK")),b=i(n("z8TD")),_=n("IBfC"),w=n("L1jB"),x=function(e){var t,n,i,_=e.article,x=e.headline,k=e.summary,O=e.label,E=e.timestampBlock,T=e.lastMajorModification,C=e.media,S=e.shareTools,P=e.translations,M=e.newsStatus,I=e.timesExclusive,A=e.sponsoredByAd,j=e.brandBar,L=e.associatedNewsletter,R=e.showReadingTime,N=e.readingTimeRef,D=(0,a.useTheme)(),B="t-magazine"===(null==_||null===(t=_.section)||void 0===t?void 0:t.name)||"magazine"===(null==_||null===(n=_.section)||void 0===n?void 0:n.name);if(L)return r.default.createElement(y.HeaderOnsiteNewsletter,e);var z=(0,d.getBylineData)(e),F=(null==E?void 0:E.timestamp)&&r.default.createElement("div",{ref:N,"data-testid":"reading-time-module"},r.default.createElement("div",{className:(0,w.getTimestampContainerClass)({theme:D})},r.default.createElement(h.default,{showUpdatedTimestamp:E.showUpdatedTimestamp,canShowTime:!0,lastMajorModification:T,showReadingTime:R},E.timestamp),R&&!B&&r.default.createElement(v.default,{wordCount:_.wordCount,className:(0,w.readTimeClass)({theme:D})}))),U=z&&r.default.createElement(u.default,{headshots:z.headshots,Headshot:m.default,data:z});return r.default.createElement(b.default,{newsStatus:r.default.createElement(g.default,{newsStatus:M}),timesExclusive:I,headline:(0,p.hasContent)(x)&&r.default.createElement(l.default,{balanceText:!0,hangPunctuation:!0,content:x.content},x.content.map(o.default)),summary:(0,p.hasContent)(k)&&r.default.createElement(c.default,{id:"article-summary"},k.content.map(o.default)),label:(0,p.hasContent)(O)&&r.default.createElement(s.default,null,O.content.map(o.default)),translationLinks:r.default.createElement(f.default,{translations:P}),media:(null==C||null===(i=C.props)||void 0===i?void 0:i.data)&&C,byline:U,timestamp:F,sponsoredByAd:A,brandBar:j,shareTools:r.default.createElement("div",{className:w.responsiveCenteringClass},S)})};x.displayName="HeaderBasic",x.defaultProps=_.defaultProps;var k=x;t.default=k},giFd:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var l=a?Object.getOwnPropertyDescriptor(e,o):null;l&&(l.get||l.set)?Object.defineProperty(i,o,l):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("UMeL")));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}var l=function(e){var t=e.podcastName,n=e.hideTranscript;return a.default.createElement("button",{type:"button",className:o.backToClass,onClick:n},a.default.createElement("div",{className:o.leftArrowClass}),a.default.createElement("span",null,t&&"Back to ".concat(t)||"Back"))};l.displayName="BackTo",l.defaultProps={podcastName:void 0,hideTranscript:void 0};var c=l;t.default=c},gmXO:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.HeaderOnsiteNewsletter=void 0;var a=i(n("q1tI")),o=n("Jqp9"),s=n("mH4u"),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("L1jB")),c=i(n("OB6K")),u=i(n("/UXH")),d=n("/tXv"),p=n("LbdL"),f=n("D/my"),m=n("eeq6"),h=n("AF3j"),g=n("hsyQ"),y=n("z5jG"),v=n("IBfC"),b=n("AhCu");function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}var w=function(e){var t,n,i,r,v,_,w,x,k=e.associatedNewsletter,O=e.headline,E=e.summary,T=e.timestampBlock,C=e.lastMajorModification,S=e.media,P=e.shareTools,M=e.translations,I=e.brandBar,A=e.isInAMP,j=(0,o.useTheme)(),L=(0,s.getBylineData)(e),R=(null==k||null===(t=k.newsletterProduct)||void 0===t||null===(n=t.newsletterProductData)||void 0===n?void 0:n.name)||"",N=(null==k||null===(i=k.newsletterProduct)||void 0===i||null===(r=i.newsletterProductData)||void 0===r?void 0:r.code)||"",D=null!==(null==k||null===(v=k.newsletterProduct)||void 0===v||null===(_=v.newsletterProductData)||void 0===_?void 0:_.allowedEntitlement),B="https://www.nytimes.com/newsletters/signup/".concat(N),z="opinion"===(null==j?void 0:j.section);return j.opinionHeaderRedesign?a.default.createElement(c.default,{theme:{summary:E,media:S}},a.default.createElement(l.default,{id:"header-onsite-newsletter-container",className:b.headerContainerClass},a.default.createElement("a",{href:B},a.default.createElement(d.OnsiteKicker,{isSubOnly:D}),a.default.createElement(f.OnsiteNewsletterName,{isInAMP:A,newsletterName:R})),z&&a.default.createElement("div",{className:b.opinionClass},I),a.default.createElement(p.OnsiteHeadline,{headline:O}),a.default.createElement(m.OnsiteSummary,{summary:E}),!z&&a.default.createElement("div",{className:l.responsiveCenteringClass},P),z&&a.default.createElement(g.OnsiteTimestamp,{timestampBlock:T,lastMajorModification:C}),(null==S||null===(x=S.props)||void 0===x?void 0:x.data)&&S,z&&a.default.createElement("div",{className:l.responsiveCenteringClass},P),a.default.createElement(y.OnsiteByline,{bylineData:L}),!z&&a.default.createElement(g.OnsiteTimestamp,{timestampBlock:T,lastMajorModification:C}),a.default.createElement(u.default,{translations:M}))):a.default.createElement(c.default,{theme:{summary:E,media:S}},a.default.createElement(l.default,{id:"header-onsite-newsletter-container",className:b.headerContainerClass},a.default.createElement("a",{href:B},a.default.createElement(d.OnsiteKicker,{isSubOnly:D}),a.default.createElement(f.OnsiteNewsletterName,{newsletterName:R})),z&&a.default.createElement("span",{className:b.opinionClass},I),a.default.createElement(p.OnsiteHeadline,{headline:O}),a.default.createElement(m.OnsiteSummary,{summary:E}),z&&a.default.createElement(h.OnsiteBylineTimestamp,{bylineData:L,timestampBlock:T,lastMajorModification:C,translations:M}),a.default.createElement("div",{className:l.responsiveCenteringClass},P),(null==S||null===(w=S.props)||void 0===w?void 0:w.data)&&S,!z&&a.default.createElement(h.OnsiteBylineTimestamp,{bylineData:L,timestampBlock:T,lastMajorModification:C,translations:M})))};t.HeaderOnsiteNewsletter=w,w.displayName="HeaderOnsiteNewsletter",w.defaultProps=v.defaultProps;var x=w;t.default=x},grZ5:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lwsE")),a=i(n("W8MJ")),o=i(n("Wpbk")),s=i(n("65wn")),l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,r.default)(this,e),this.data=t}return(0,a.default)(e,[{key:"getStructuredData",value:function(){var e=this.data,t=e.url,n=e.headline,i=e.summary,r=e.language,a=e.videos,l=(null==r?void 0:r.code)||void 0;return new o.default({url:t,name:(null==n?void 0:n.seo)||(null==n?void 0:n.default),alternateName:null!=n&&n.seo&&null!=n&&n.default?n.default:void 0,description:i,inLanguage:l,mainEntity:new s.default({items:(null==a?void 0:a.edges)||[]})})}}]),e}();t.default=l},gtCS:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("Jqp9"));function o(e){var t=e.interactive,n=e.footerClass,i=e.metaClass,o=t.note,s=t.dataSource,l=t.credit;return r.default.createElement("footer",{id:"interactive-footer",className:(0,a.cx)(n,"interactive-footer")},o&&r.default.createElement("p",{"data-testid":"note",id:"interactive-notes",className:(0,a.cx)(i,"interactive-notes"),dangerouslySetInnerHTML:{__html:o}}),s&&r.default.createElement("p",{"data-testid":"source",id:"interactive-source",className:(0,a.cx)(i,"interactive-source"),dangerouslySetInnerHTML:{__html:s}}),l&&r.default.createElement("p",{"data-testid":"credit",id:"interactive-credit",className:(0,a.cx)(i,"interactive-credit"),dangerouslySetInnerHTML:{__html:l}}))}o.displayName="Footer",o.defaultProps={footerClass:null};var s=o;t.default=s},gxa1:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"f",(function(){return p}));var i=n("Jqp9"),r=n("wXC7"),a=n.n(r),o=n("3sMT"),s=Object(i.css)("width:8px;"),l=Object(i.css)("background:",a.a.color.white,";display:inline-block;text-transform:uppercase;transition:none;z-index:",a.a.zIndex.navigation,";margin-top:-3px;cursor:default;"),c=Object(i.css)("@media (min-width:","1277px","){position:static;}"),u=Object(i.css)("display:flex;align-items:center;justify-content:center;padding:0;@media (min-width:","1277px","){position:relative;}"),d=Object(i.css)("font-family:",a.a.font.franklinBase,";font-weight:",a.a.font.weight.medium,";font-size:",a.a.font.size(12),";line-height:",a.a.font.size(12),";padding:1.25rem 12px;&:nth-child(7){padding-left:12px;&::before{content:'';height:20px;margin-right:24px;border-left:1px solid ",a.a.color.gray60,";}}:hover > a{text-decoration:underline;text-decoration-thickness:2px;text-underline-offset:3px;}"),p=Object(i.css)("padding:0 6px 0 0;display:inline-block;color:",o.color.content.primary,";")},h3Sg:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lwsE")),o=i(n("W8MJ")),s=i(n("7W2i")),l=i(n("a1gu")),c=i(n("Nsbk")),u=h(n("q1tI")),d=(i(n("17x9")),h(n("UMeL"))),p=i(n("qsmR")),f=i(n("rnec"));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,l.default)(this,n)}}var y=function(e){(0,s.default)(n,e);var t=g(n);function n(){return(0,a.default)(this,n),t.apply(this,arguments)}return(0,o.default)(n,[{key:"componentDidUpdate",value:function(e){!e.isVisible&&this.props.isVisible&&this.playPauseButton&&this.playPauseButton.focus()}},{key:"render",value:function(){var e=this;return u.default.createElement("button",{tabIndex:"99",ref:function(t){e.playPauseButton=t},type:"button",className:d.playPauseClass,onClick:this.props.onPlayPause,"aria-label":this.props.isPlaying?"pause":"play"},this.props.isPlaying&&u.default.createElement(f.default,null)||u.default.createElement(p.default,null))}}]),n}(u.Component);y.displayName="PlayPause",y.defaultProps={isVisible:void 0,isPlaying:void 0,onPlayPause:void 0};var v=y;t.default=v},h58Z:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.updatedClass=t.timeChunkClass=t.separatorClass=t.readTimeClass=t.liveBriefingDateClass=t.default=t.UpdatedTime=t.StyledTimeStampWithTimeWrap=t.StyledPubDate=t.PubbedTime=void 0;var r=n("Jqp9"),a=n("3sMT"),o=i(n("wXC7")),s=(0,r.themeFn)("section",{magazine:(0,r.css)("font-family:",o.default.font.magazineSansBase,";font-weight:",o.default.font.weight.medium,";color:",a.color.content.secondary,";"),"t-magazine":(0,r.css)("font-family:",o.default.font.tmagSansBase,";font-weight:",o.default.font.weight.book,";color:",a.color.content.secondary,";letter-spacing:0.02em;")}),l=(0,r.css)("time&.reading-time{margin:auto 0;}");t.readTimeClass=l;var c=(0,r.styled)("time",{target:"e16638kd0"})("font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.medium,";color:",a.color.content.secondary,";margin-bottom:1rem;font-size:",o.default.font.size(13),";line-height:",o.default.font.size(16),";",(function(e){return e.useSection&&s(e)}),";"),u=c.withComponent("div",{target:"e16638kd1"});t.StyledPubDate=u;var d=(0,r.styled)(c,{target:"e16638kd2"})("margin-bottom:0;display:flex;flex-wrap:wrap;flex-shrink:1;");t.StyledTimeStampWithTimeWrap=d;var p=(0,r.css)("white-space:nowrap;");t.timeChunkClass=p;var f=(0,r.css)("text-transform:capitalize;");t.updatedClass=f;var m=(0,r.css)("text-transform:none;");t.liveBriefingDateClass=m;var h=(0,r.css)("margin-left:10px;margin-right:10px;color:",a.color.stroke.quaternary,";");t.separatorClass=h;var g=(0,r.css)("color:",a.color.content.secondary,";"),y=(0,r.themeFn)("languageDirection",{none:(0,r.css)("padding-right:1em;"),rightToLeft:(0,r.css)("padding-right:0;padding-left:1em;")}),v=(0,r.styled)("span",{target:"e16638kd3"})("display:inline-block;",y,";");t.PubbedTime=v;var b=(0,r.styled)("span",{target:"e16638kd4"})("display:inline-block;",(function(e){return e.isRecentModification?g:null}),";");t.UpdatedTime=b;var _=c;t.default=_},h6Ch:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.embeddedGatewayClass=t.snackbarContainerClass=t.deactivateScrollingClass=t.gatewayContainerClass=t.fullHeightClass=t.fullWidthClass=t.animationComplete=t.showClass=t.gatewayClass=void 0;var a,o,s,l,c,u,d,p,f,m=n("Jqp9"),h=r(n("wXC7"));t.gatewayClass=(0,m.css)(a||(a=i(["\n  will-change: transform;\n  display: flex;\n  top: 100vh;\n  align-items: center;\n  background-color: ",";\n  box-shadow: 0px -2px 31px rgba(0, 0, 0, 0.22);\n  box-sizing: border-box;\n  flex-direction: column;\n  font-family: ",";\n  height: 300px;\n  margin: 0 auto;\n  opacity: 0;\n  padding: 20px;\n  position: fixed;\n  text-align: left;\n  width: 100%;\n  z-index: ",";\n  overflow: hidden;\n\n  "," {\n    padding: 20px 25px;\n  }\n"],["\n  will-change: transform;\n  display: flex;\n  top: 100vh;\n  align-items: center;\n  background-color: ",";\n  box-shadow: 0px -2px 31px rgba(0, 0, 0, 0.22);\n  box-sizing: border-box;\n  flex-direction: column;\n  font-family: ",";\n  height: 300px;\n  margin: 0 auto;\n  opacity: 0;\n  padding: 20px;\n  position: fixed;\n  text-align: left;\n  width: 100%;\n  z-index: ",";\n  overflow: hidden;\n\n  "," {\n    padding: 20px 25px;\n  }\n"])),h.default.color.white,h.default.font.franklinBase,h.default.zIndex.modal,h.default.breakpoint.mediumMediaExtralarge),t.showClass=(0,m.css)(o||(o=i(["\n  height: auto;\n  min-height: 42vh;\n  opacity: 1;\n  transform: translate(0, -42vh);\n  transition: transform 750ms ease-out;\n  overscroll-behavior: none;\n\n  @media screen and (min-width: 765px) {\n    min-height: 50vh;\n    transform: translate(0, -50vh);\n  }\n\n  @media print {\n    /* stylelint-disable-next-line declaration-no-important */\n    background-color: "," !important;\n    padding: 30px 25px;\n    border-top: 1px solid #e4e4e4;\n  }\n"],["\n  height: auto;\n  min-height: 42vh;\n  opacity: 1;\n  transform: translate(0, -42vh);\n  transition: transform 750ms ease-out;\n  overscroll-behavior: none;\n\n  @media screen and (min-width: 765px) {\n    min-height: 50vh;\n    transform: translate(0, -50vh);\n  }\n\n  @media print {\n    /* stylelint-disable-next-line declaration-no-important */\n    background-color: "," !important;\n    padding: 30px 25px;\n    border-top: 1px solid #e4e4e4;\n  }\n"])),h.default.color.white),t.animationComplete=(0,m.css)(s||(s=i(["\n  overscroll-behavior: unset;\n  position: absolute;\n"],["\n  overscroll-behavior: unset;\n  position: absolute;\n"]))),t.fullWidthClass=(0,m.css)(l||(l=i(["\n  padding: 0;\n  max-width: none;\n\n  "," {\n    max-width: none;\n  }\n"],["\n  padding: 0;\n  max-width: none;\n\n  "," {\n    max-width: none;\n  }\n"])),h.default.breakpoint.mediumMediaExtralarge),t.fullHeightClass=(0,m.css)(c||(c=i(["\n  min-height: 100%;\n  top: 0;\n  flex-grow: 1;\n  border-top: none;\n  transform: unset;\n\n  @media screen and (min-width: 765px) {\n    min-height: 100%;\n    top: 0;\n    transform: unset;\n  }\n"],["\n  min-height: 100%;\n  top: 0;\n  flex-grow: 1;\n  border-top: none;\n  transform: unset;\n\n  @media screen and (min-width: 765px) {\n    min-height: 100%;\n    top: 0;\n    transform: unset;\n  }\n"]))),t.gatewayContainerClass=(0,m.css)(u||(u=i(["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  max-width: 420px;\n  min-height: 364px;\n  width: 100%;\n  -webkit-font-smoothing: antialiased;\n  overflow: hidden;\n\n  "," {\n    max-width: ","px;\n  }\n"],["\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  max-width: 420px;\n  min-height: 364px;\n  width: 100%;\n  -webkit-font-smoothing: antialiased;\n  overflow: hidden;\n\n  "," {\n    max-width: ","px;\n  }\n"])),h.default.breakpoint.mediumMediaExtralarge,h.default.breakpoint.mediaMaxWidth),t.deactivateScrollingClass=(0,m.css)(d||(d=i(["\n  aria-hidden: true;\n  position: fixed;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n"],["\n  aria-hidden: true;\n  position: fixed;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n"]))),t.snackbarContainerClass=(0,m.css)(p||(p=i(["\n  z-index: ",";\n"],["\n  z-index: ",";\n"])),h.default.zIndex.interstitialModal),t.embeddedGatewayClass=(0,m.css)(f||(f=i(["\n  position: static;\n  transform: unset;\n  min-height: 0;\n  box-shadow: 0px -1px 114px 114px #ffffff;\n\n  @media screen and (min-width: 765px) {\n    position: static;\n    transform: unset;\n    min-height: 0;\n    box-shadow: 0px -1px 114px 114px #ffffff;\n  }\n"],["\n  position: static;\n  transform: unset;\n  min-height: 0;\n  box-shadow: 0px -1px 114px 114px #ffffff;\n\n  @media screen and (min-width: 765px) {\n    position: static;\n    transform: unset;\n    min-height: 0;\n    box-shadow: 0px -1px 114px 114px #ffffff;\n  }\n"])))},hFCc:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.StyledRelatedLinks=t.RelatedLinksSeries=t.RelatedLinksHeadline=t.RelatedLinksDescription=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=n("6l8D"),s=i(n("WThh")),l=i(n("qp0C")),c=n("3sMT"),u=n("tLpV"),d=(0,s.default)(["medium","small","mediumLarge"]),p=(0,r.themeFn)("treatment",{none:function(e){var t=(0,r.css)("color:",c.color.content.secondary,";font-family:",a.default.font.franklinBase,";font-weight:",a.default.font.weight.bold,";",d(e,{fontSize:[15,16],lineHeight:[20,22]}),";a{text-decoration:underline;}a:hover{text-decoration:none;}");return"compact"===e.theme.displayStyle||"intentional"===e.theme.displayStyle?(0,r.css)("margin-right:0.4rem;",t,";"):t},sponsored:function(e){if("compact"===e.theme.displayStyle||"intentional"===e.theme.displayStyle){return(0,r.css)(d(e,{fontSize:[13.5,15],lineHeight:[16,24],fontWeight:[a.default.font.weight.mediumBold,a.default.font.weight.bold],letterSpacing:["".concat(.68/13.5,"em"),"".concat(1/15,"em")],marginRight:["".concat(8/13.5,"em"),"".concat(8/15,"em")]}),";color:",c.color.content.secondary,";font-family:",a.default.font.sponsoredBase,";text-transform:uppercase;")}return(0,r.css)("font-size:",a.default.font.size(17),";line-height:",a.default.font.size(22),";font-weight:",a.default.font.weight.bold,";color:",c.color.content.secondary,";font-family:",a.default.font.sponsoredBase,";")},atHome:(0,r.css)("font-size:19px;letter-spacing:0.4px;font-family:",a.default.font.franklinBase,";font-weight:bold;")}),f=(0,r.styled)("div",{target:"epkadsg0"})((function(e){return("compact"===e.theme.displayStyle||"intentional"===e.theme.displayStyle)&&(0,r.css)("display:inline-block;")}),";",p);t.RelatedLinksHeadline=f;var m=(0,r.themeFn)("treatment",{none:function(e){return(0,r.css)("color:",c.color.content.secondary,";font-family:",a.default.font.franklinBase,";",d(e,{fontSize:[15,16],lineHeight:[20,22]}),";")},sponsored:function(e){return"compact"===e.theme.displayStyle||"intentional"===e.theme.displayStyle?(0,r.css)(d(e,{fontSize:[13.5,19],lineHeight:[16,24]}),";color:",c.color.content.secondary,";font-family:",a.default.font.sponsoredBase,";font-style:italic;"):(0,r.css)("font-size:",a.default.font.size(17),";line-height:",a.default.font.size(24),";color:",c.color.content.secondary,";font-family:",a.default.font.sponsoredBase,";font-style:italic;")},atHome:function(e){return(0,r.css)("font-family:",l.default.cheltenham,";font-weight:100;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;letter-spacing:0.2px;color:",c.color.content.secondary,";",d(e,{paddingRight:[0,0,"4%"],margin:[a.default.breakpoint.mobileBlockMargins,a.default.breakpoint.desktopStorylineMargins],fontSize:[27,27,45],lineHeight:[36,36,61]})," .",o.linkClass,"{text-decoration:underline;color:",c.color.content.primary,";&:hover,&:focus{text-decoration:none;}&:visited{color:",c.color.content.primary,";}}strong{color:inherit;font-weight:700;}")}}),h=(0,r.styled)("div",{target:"epkadsg1"})("font-weight:",a.default.font.weight.medium,";",(function(e){return("compact"===e.theme.displayStyle||"intentional"===e.theme.displayStyle)&&(0,r.css)("display:inline;")}),";.",o.linkClass,"{text-decoration:underline;&:hover{text-decoration:none;}&:focus{text-decoration:underline;}}",m,";");t.RelatedLinksDescription=h;var g=(0,r.themeFn)("treatment",{none:function(e){return e.hasHeadlineorDescription&&(0,r.css)("margin-top:10px;padding-top:15px;border-top:1px solid ",c.color.stroke.quaternary,";")},atHome:function(e){return e.children.length>1||"group"===e.theme.displayStyle?(0,r.css)(d(e,{display:["block","flex"],marginBottom:"60px"}),";",u.StyledRelatedLink,":nth-child(3n-1){",d(e,{margin:["0 0 36px","0 0 36px","0 4%"]}),"}"):(0,r.css)("display:block;",u.StyledRelatedLink,":not(:first-child){display:none;}")}}),y=(0,r.themeFn)("displayStyle",{compact:function(e){return(0,r.css)("border-top:none;margin-top:0;padding:",e.hasHeadlineorDescription?"5px 0":"0",";")},intentional:function(e){return(0,r.css)("border-top:none;margin-top:0;padding:",e.hasHeadlineorDescription?"5px 0":"0",";")}}),v=(0,r.styled)("div",{target:"epkadsg2"})(g,";",y);t.RelatedLinksSeries=v;var b=(0,r.themeFn)("treatment",{none:function(e){return(0,r.css)("box-sizing:border-box;margin:",a.default.breakpoint.mobileBlockMargins,";padding:0.9375rem;border:1px solid ",c.color.stroke.quaternary,";",e.theme.breakpointMap.medium,"{padding:1.25rem;margin:",a.default.breakpoint.desktopStorylineMargins,";}")},atHome:function(e){return(0,r.css)(d(e,{padding:["0 22px","0 0"]}))}}),_=(0,r.styled)("div",{target:"epkadsg3"})(a.default.printHide,";",b,";");t.StyledRelatedLinks=_},hG4R:function(e,t,n){"use strict";n.d(t,"b",(function(){return f}));var i,r=n("VkAN"),a=n.n(r),o=n("gcR/"),s=n.n(o),l=(n("q1tI"),n("eFc+")),c=n.n(l),u=n("KQYy"),d=n("B2Q+"),p={threeByTwoLargeAt2X:{initial:1080,safe:[600,1100,1620]},threeByTwoMediumAt2X:{initial:1080,safe:[600,1100]},threeByTwoSmallAt2X:{initial:400,safe:[400]},largeHorizontalJumbo:{initial:719,safe:[700]},square640:{initial:218,safe:[350]}},f=function(e,t,n){if(!(e&&(e.spanImageCrops&&e.spanImageCrops.length||e.crops&&e.crops.length)))return null;var i;if(!(i=e.spanImageCrops?e.spanImageCrops.reduce((function(e,t){return e.concat(t.renditions)}),[]):e.crops.reduce((function(e,t){return e.concat(t.renditions)}),[])).length)return null;var r=Array.isArray(n)?n:[n],a=t||r.find((function(e){return i.find((function(t){return t.name===e}))}));return i.find((function(e){return e.name===a}))||i[0]},m=function(e){var t=e.lazy,n=e.caption,i=e.media,r=e.preferredCrop,a=e.crop,o=e.metadataOptOut,l=f(i,r,a);if(!l)return null;var c=l.height,m=l.width,h={src:l.url,alt:n},g=p[l.name]?p[l.name]:null,y=g?g.safe:null,v=g?g.initial:null,b=m/c,_=Object(d.a)();return s()(u.a,{lazy:t,imageProps:h,initialAspectRatio:b,initialImageWidth:v,safeWidths:y,metadataOptOut:o,rootMargin:"smartphone"===_?200:400})};m.displayName="SpanImage",m.defaultProps={lazy:void 0,preferredCrop:"threeByTwoLargeAt2X",crop:"threeByTwoLargeAt2X",metadataOptOut:!1,caption:""},m.fragments={media:c()(i||(i=a()(['\n    fragment SpanImage_media on Image {\n      id\n      caption {\n        text @stripHtml\n      }\n      spanImageCrops: crops(\n        renditionNames: [\n          "videoLarge"\n          "largeHorizontalJumbo"\n          "articleLarge"\n          "master1050"\n          "square640"\n          "thumbLarge"\n          "threeByTwoSmallAt2X"\n          "threeByTwoMediumAt2X"\n          "threeByTwoLargeAt2X"\n        ]\n      ) {\n        name\n        renditions {\n          name\n          url\n          width\n          height\n        }\n      }\n    }\n  '])))},t.a=m},hJkT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.PUB_EVENT_DETAILS=t.PUB_EVENTS=t.PERFORMANCE_EVENTS=t.GPT_EVENTS=t.EVENTS=void 0;var i={READY:"ready",RENDER:"render",SCROLL:"scroll",MESSAGE:"message",VISIBILITY_CHANGE:"visibilitychange",SLOT_VISIBILITY_CHANGED:"slotVisibilityChanged",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",READY_STATE_CHANGE:"readystatechange",UNLOAD:"unload"};t.EVENTS=i;var r={SLOT_REQUESTED:"slotRequested",SLOT_RESPONSE_RECEIVED:"slotResponseReceived",SLOT_RENDER_ENDED:"slotRenderEnded",SLOT_ON_LOAD:"slotOnload",IMPRESSION_VIEWABLE:"impressionViewable"};t.GPT_EVENTS=r;var a={RESPONSE_START:"responseStart",TIME_DEFINED:"timeDefined",TIME_CALLED:"timeCalled",TIME_CALL_SENT:"timeCallSent",TIME_RECEIVED:"timeReceived",TIME_RENDERED:"timeRendered",TIME_LOADED:"timeLoaded",TIME_VIEWED:"timeViewed"};t.PERFORMANCE_EVENTS=a;var o={AD_EMPTY:"AdEmpty",AD_BLOCK_ON:"AdBlockOn",AD_DEFINED:"AdDefined",AD_CALLED:"AdCalled",AD_REFRESHED:"AdRefreshed",AD_REQUEST_SENT:"AdRequestSent",AD_RESPONSE:"AdResponse",AD_RENDERED:"AdRendered",AD_LOADED:"AdLoaded",AD_SLOT_READY:"AdSlotReady",AD_VIEWABLE:"AdViewable",AD_ENTERED_VIEWPORT:"AdEnteredViewport",AD_LEFT_VIEWPORT:"AdLeftViewport",AD_MOUSE_ENTER:"AdMouseEnter",AD_MOUSE_LEAVE:"AdMouseLeave"};t.PUB_EVENTS=o;var s={AD_BLOCK_ON:"AdBlockOn",ADS_DISABLED:"AdsDisabled",GPT_ERROR:"GptError"};t.PUB_EVENT_DETAILS=s;var l={EVENTS:i,PUB_EVENTS:o,PUB_EVENT_DETAILS:s,PERFORMANCE_EVENTS:a,GPT_EVENTS:r};t.default=l},hKAy:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n("q1tI")),l=a(n("ZR5w")),c=n("bSj6"),u=o(n("FY2l")),d=n("tRGv");function p(e){var t=e.unit;return s.default.createElement(s.default.Fragment,null," ",s.default.createElement("span",{className:l.topperWrapClass},"Already a subscriber?"," ",s.default.createElement(c.Anchor,{className:l.loginLink,onClick:null==t?void 0:t.trackInteraction,href:(0,u.default)("https://myaccount.nytimes.com/auth/login?response_type=cookie&client_id=freex&asset=RegiWallStandalone&application=Free_Experience&reload=3").withCampaignID({defaultCampaignID:"7JFJX"}).withRedirectUri({uri:(0,u.default)("https://www.nytimes.com/subscription/onboarding-offer").withCampaignID({defaultCampaignID:"7JFJX"}).withRedirectUri().withExitUri().toString()}).toString()},"Log in.")))}t.default=function(e){var t,n,i=e.unit,r=!(null===(t=null==i?void 0:i.content)||void 0===t?void 0:t.loggedIn);return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:l.topperClass,"data-testid":"onsite-messaging-unit-".concat(null===d.config||void 0===d.config?void 0:d.config.name)},s.default.createElement("span",{className:l.topperWrapClass},null===(n=null==i?void 0:i.content)||void 0===n?void 0:n.text),r&&s.default.createElement(p,{unit:i})),s.default.createElement("hr",{className:l.longHorizontalRule}))}},hKNt:function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"o",(function(){return E})),n.d(t,"m",(function(){return T})),n.d(t,"b",(function(){return C})),n.d(t,"h",(function(){return K})),n.d(t,"k",(function(){return $})),n.d(t,"d",(function(){return Q})),n.d(t,"e",(function(){return ee})),n.d(t,"p",(function(){return te})),n.d(t,"f",(function(){return ne})),n.d(t,"g",(function(){return ie})),n.d(t,"i",(function(){return re})),n.d(t,"r",(function(){return ae})),n.d(t,"c",(function(){return oe})),n.d(t,"n",(function(){return le})),n.d(t,"q",(function(){return ce})),n.d(t,"l",(function(){return de})),n.d(t,"j",(function(){return pe}));var i=n("lSNA"),r=n.n(i),a=n("8iTF"),o=n("kV2j"),s=n("2oaX"),l=n("+5AW"),c=function(e,t,n){return e(t),Object(l.a)(t).then((function(t){return n.response=t,t.json().then((function(e){n.payload=e}),(function(t){return n.payload=t,n.error=!0,e(n),Promise.reject(new Error)})).then((function(){var i,r,a=!(t.ok&&(i=n.payload,!(i.error||null!==(r=i.results)&&void 0!==r&&r.error||i.status&&"OK"!==i.status)));if(n.error=a,e(n),a){var o=n.payload.results,s=(null==o?void 0:o.error)||"";return Promise.reject(new Error(s))}return Promise.resolve()}))}),(function(t){return n.response=t,n.error=!0,e(n),Promise.reject(t instanceof Error?t:new Error)}))},u=n("ygvk"),d="url",p="commentID",f="commentLabels",m="userID",h=(n("JYoY"),"url"),g="commentSequence",y="parentID",v="recommend",b="userEmail",_="userID";function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(){return Promise.resolve({type:"@@NEXT"})},O=function(){return{type:u.a.CLEAR_ARTICLE}},E=function(e){return{type:u.a.SELECT_VIEW,viewId:e}},T=function(e){return{type:u.a.OPEN_COMMENT_ENTRY,replyToCommentId:e}},C=function(){return{type:u.a.CLOSE_COMMENT_ENTRY}},S=function(e){return{type:u.a.GET_SUMMARY_REQUEST,meta:e}},P=function(e){return{type:u.a.GET_SUMMARY_RESPONSE,meta:e}},M=function(e){return{type:u.a.GET_ARTICLE_REQUEST,meta:e}},I=function(e){return{type:u.a.GET_ARTICLE_RESPONSE,meta:e}},A=function(e){return{type:u.a.GET_COMMENT_LIST_REQUEST,meta:e}},j=function(e){return{type:u.a.GET_COMMENT_LIST_RESPONSE,meta:e}},L=function(e){return{type:u.a.GET_COMMENTS_REQUEST,meta:e}},R=function(e){return{type:u.a.GET_COMMENTS_RESPONSE,meta:e}},N=function(e){return{type:u.a.GET_REPLIES_REQUEST,meta:e}},D=function(e){return{type:u.a.GET_REPLIES_RESPONSE,meta:e}},B=function(e){return{type:u.a.GET_PROFILE_REQUEST,meta:e}},z=function(e){return{type:u.a.GET_PROFILE_RESPONSE,meta:e}},F=function(e){return{type:u.a.UPDATE_AVATAR_REQUEST,meta:e}},U=function(e){return{type:u.a.UPDATE_AVATAR_RESPONSE,meta:e}},H=function(e){return{type:u.a.CREATE_COMMENT_RESPONSE,meta:e}},W=function(e){return{type:u.a.RECOMMEND_COMMENT_REQUEST,meta:e}},q=function(e){return{type:u.a.RECOMMEND_COMMENT_RESPONSE,meta:e}},V=function(e){return{type:u.a.UNRECOMMEND_COMMENT_REQUEST,meta:e}},G=function(e){return{type:u.a.UNRECOMMEND_COMMENT_RESPONSE,meta:e}},Y=function(e){return{type:u.a.FLAG_COMMENT_REQUEST,meta:e}},Z=function(e){return{type:u.a.FLAG_COMMENT_RESPONSE,meta:e}},X=function(e){return{type:u.a.GET_SHORT_URL_REQUEST,meta:e}},J=function(e){return{type:u.a.GET_SHORT_URL_RESPONSE,meta:e}},K=function(e){return function(t,n){var i=n();if(i.profile.isFetching||i.profile.lastUpdatedMs)return k();if(!e)try{e=i.article.data.id}catch(t){e="unknownArticle"}var r={articleId:e},a=[B(r),z(r)];return c.apply(void 0,[t].concat(a))}},$=function(e){return function(t,n){var i=n();if(i.panel.isFetching||i.panel.lastUpdatedMs)return k();var r={articleUrl:e},a=[S(r),P(r)];return c.apply(void 0,[t].concat(a))}},Q=function(e,t){return function(n,i){var r=i();if(r.article.isFetching||r.article.lastUpdatedMs)return k();var a={articleId:e,articleUrl:t},o=[M(a),I(a)];return c.apply(void 0,[n].concat(o))}},ee=function(e,t){return function(n){var i={articleId:e,listId:t},r=[A(i),j(i)];return c.apply(void 0,[n].concat(r))}},te=function(e,t,n){return function(i){var r={articleId:e,listId:t,sortType:n},a=[A(r),j(r)];return c.apply(void 0,[i].concat(a))}},ne=function(e,t){return function(n,i){var r=i(),a=function(e,t){var n=e.commentLists[t];return n?n.nextUrl:null}(r,t);if(!a)return k();var o=r.commentLists[t],s=o&&o.commentIds?o.commentIds.length-1:-1,l={articleId:e,listId:t,nextUrl:a,isPaginatedRequest:!0,sortType:o.selectedSortType,commentSequence:s>=0?o.commentIds[s]:0},u=[A(l),j(l)];return c.apply(void 0,[n].concat(u))}},ie=function(e,t){return function(n){var i={articleId:e,commentId:t},r=[L(i),R(i)];return c.apply(void 0,[n].concat(r))}},re=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:25;return function(r){var a={articleId:e,commentId:t,commentSequence:t,offset:n,limit:i,cmd:"GetRepliesBySequence"},o=[N(a),D(a)];return c.apply(void 0,[r].concat(o))}},ae=function(e){return function(t,n){if(!e)return k();var i=n(),r=new FormData;r.append("image",e);var a={values:{avatar:r,csrfToken:i.profile.csrfToken}},o=[F(a),U(a)];return c.apply(void 0,[t].concat(o))}},oe=function(e){return function(t){var n,i={values:e},r=[(n=i,{type:u.a.CREATE_COMMENT_REQUEST,meta:n}),H(i)];return c.apply(void 0,[t].concat(r))}},se=function(e,t){var n,i=e.profile.data;return n={},r()(n,h,Object(o.a)(e)),r()(n,g,t),r()(n,y,Object(s.h)(e,t)||"0"),r()(n,b,i.email),r()(n,_,i.userID),n},le=function e(t){return function(n,i){var a=i();if(!a.profile.data)return n(K()).then((function(){return n(e(t))}));var o={commentId:t,values:x(x({},se(a,t)),{},r()({},v,1))},s=[W(o),q(o)];return c.apply(void 0,[n].concat(s))}},ce=function e(t){return function(n,i){var a=i();if(!a.profile.data)return n(K()).then((function(){return n(e(t))}));var o={commentId:t,values:x(x({},se(a,t)),{},r()({},v,0))},s=[V(o),G(o)];return c.apply(void 0,[n].concat(s))}},ue=function(e,t){var n,i=e.profile.data;return n={},r()(n,d,Object(o.a)(e)),r()(n,p,t),r()(n,m,i.userID),n},de=function e(t,n){return function(i,a){var o=a();if(!o.profile.data)return i(K()).then((function(){return i(e(t,n))}));var s={values:x(x({},ue(o,t)),{},r()({},f,n?n.join(","):""))},l=[Y(s),Z(s)];return c.apply(void 0,[i].concat(l))}},pe=function(e){return function(t,n){var i=n();if(Object(s.j)(i,e))return k();var r=Object(o.a)(i),l=Object(s.h)(i,e),u=l?Object(a.e)(r,l,e):Object(a.e)(r,e),d={commentId:e,url:u},p=[X(d),J(d)];return c.apply(void 0,[t].concat(p))}}},hMrr:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.summaryClass=t.pClass=t.oakClass=t.innerContainerTwoClass=t.innerContainerOneClass=t.imgClass=t.creditClass=t.containerClass=t.ampCreditClass=t.ampContainerItemClass=t.ampContainerClass=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=n("3sMT"),s=(0,r.css)("width:100%;height:100vh;overflow-y:hidden;position:sticky;top:0;z-index:-1;");t.innerContainerOneClass=s;var l=(0,r.css)("width:100%;height:100vh;overflow-y:hidden;top:0;position:relative;");t.innerContainerTwoClass=l;t.containerClass=function(e){return(0,r.css)("position:relative;z-index:901;margin-top:",e?"0px":a.default.font.size(50),";margin-bottom:",a.default.font.size(50),";",a.default.breakpoint.small,"{margin-top:",e?"0px":a.default.font.size(60),";margin-bottom:",a.default.font.size(60),";}.scrolly-image-0{opacity:1 !important;}")};var c=(0,r.css)("object-fit:cover;transition:all 0.35s ease-in-out;width:100%;height:100%;position:absolute;opacity:0;");t.imgClass=c;var u=(0,r.css)("margin-bottom:100vh;font-family:",a.default.font.serifMedium,";font-weight:",a.default.font.weight.book,";font-size:24px;line-height:30px;max-width:600px;color:",o.dark.colors.content.primary.hex,";padding-left:40px;padding-right:40px;margin-left:auto;margin-right:auto;text-shadow:0 2px 4px ",o.dark.colors.background.primary.transform(a.default.setAlpha(.5)).rgba,";&:first-of-type{margin-top:-33vh;}&:last-of-type{padding-bottom:66vh;margin-bottom:0;}",a.default.breakpoint.small,"{font-size:28px;line-height:32px;}");t.pClass=u;var d=(0,r.css)("background:",o.color.background.quaternary,";display:flex;height:400px;p{display:flex;margin:auto;font-family:",a.default.font.franklinBase,";font-weight:",a.default.font.weight.bold,";font-size:26px;line-height:1.2;max-width:600px;}");t.oakClass=d;var p=(0,r.css)("position:absolute;bottom:20px;left:40px;color:",o.dark.colors.content.primary.hex,";font-size:10px;opacity:0.5;font-family:",a.default.font.serifBase,";",a.default.breakpoint.small,"{font-size:11px;}",a.default.breakpoint.medium,"{left:20px;}");t.creditClass=p;var f=(0,r.css)("margin-bottom:60px;margin-top:60px;");t.ampContainerClass=f;var m=(0,r.css)("width:calc(100% - 40px);margin-left:auto;margin-right:auto;margin-bottom:40px;max-width:600px;");t.summaryClass=m;var h=(0,r.css)("display:inline-block;margin-top:10px;margin-left:20px;");t.ampCreditClass=h;var g=(0,r.css)("margin-bottom:30px;");t.ampContainerItemClass=g},hP1F:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return m})),n.d(t,"f",(function(){return h})),n.d(t,"d",(function(){return y})),n.d(t,"c",(function(){return v})),n.d(t,"e",(function(){return w}));var i,r=n("VkAN"),a=n.n(r),o=n("eFc+"),s=n.n(o),l=n("06b3"),c=n("GB3f"),u=n("solT"),d=n("ziu7"),p=n("EYBZ"),f=function(e){return e.advertisingProperties&&e.advertisingProperties.sensitivity?e.advertisingProperties.sensitivity:"SHOW_ADS"};f.fragments={article:s()(i||(i=a()(["\n    fragment getAdSensitivity_article on Article {\n      id\n      advertisingProperties {\n        sensitivity\n      }\n    }\n  "])))};var m=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null!=n&&null!==(e=n.language)&&void 0!==e&&e.code&&null!=n&&null!==(t=n.language)&&void 0!==t&&t.code.startsWith("es")&&null!=n&&n.subsection?"/".concat("es","/"):l.a.load("NYT-Edition")===c.a.CA.value?c.a.CA.path:l.a.load("NYT-Edition")===c.a.INT.value?c.a.INT.path:"/"},h=function(e,t){var n=e.pathname.includes("/aponline")||e.pathname.includes("/reuters"),i=parseInt(t.params.year,10)<2018;return n&&i},g=function(e,t){return t&&t.displayName||e&&e.displayName||""},y=function(e){var t=e.collections,n=e.section,i=e.subsection,r=Object(p.getSectionUrlFromCollections)(n,t),a=Object(p.getSectionUrlFromCollections)(i,t);return{sectionName:n&&n.name,subsectionName:i&&i.name,displayName:g(n,i),url:a||r||""}},v=function(e,t){if(!e||!e.sprinkledBody)return{};var n,i,r,a=e.sprinkledBody.content.find((function(e){return"HeaderFullBleedHorizontalBlock"===e.__typename||"HeaderFullBleedVerticalBlock"===e.__typename||Object(u.b)(e,t)}));a&&(i=a.__typename,r=a.alignment?a.alignment:"",n=a.displayOverride?a.displayOverride:"",a.__typename===u.a&&(n="TRANSPARENT_MASTHEAD_WHITE_ICONS"));var o,s="HeaderFullBleedVerticalBlock"===i,l="HeaderFullBleedVerticalBlock"===i,c="HeaderFullBleedVerticalBlock"===i,p="HeaderFullBleedHorizontalBlock"===i||"HeaderFullBleedVerticalBlock"===i||Object(u.b)(a,t);o="TRANSPARENT_MASTHEAD_WHITE_ICONS"===n?"white":"black";var f,m="";return"HeaderFullBleedVerticalBlock"===i&&(m="verticalFullBleed"),Object(d.d)(e.sprinkledBody.content[0])&&(o="white",p=!0,f=!0),{hideSearch:s,semitransparentAtMobile:l,hideUsernameAtSmallViewport:c,transparent:p,iconStyle:o,alignment:r,variant:m,isVerticalFullBleed:"HeaderFullBleedVerticalBlock"===i,isFullBleed:f||"HeaderFullBleedHorizontalBlock"===i||"HeaderFullBleedVerticalBlock"===i||Object(u.b)(a,t)}},b=["feature","opinion"],_=["magazine","t-magazine","opinion"],w=function(e){var t,n=y(e),i=e.tone&&"no_tone_set"!==e.tone.toLowerCase()&&e.tone.toLowerCase(),r=null;return n&&_.indexOf(n.sectionName)>-1?r=n.sectionName:b.indexOf(i)>-1?r=i:"espanol"===(null==n?void 0:n.sectionName)&&"opinion"===(null==n?void 0:n.subsectionName)&&(r="opinion",i="opinion"),e.collections.find((function(e){return"us-morning-briefing"===e.slug||"europe-morning-briefing"===e.slug||"asia-australia-morning-briefing"===e.slug}))&&null!==(t=e.compatibility)&&void 0!==t&&t.isOak&&(r="morning-briefing"),{treatment:r,tone:i}}},hWkY:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lSNA")),a=i(n("QILm")),o=i(n("W8MJ")),s=i(n("lwsE")),l=i(n("7W2i")),c=i(n("a1gu")),u=i(n("Nsbk")),d=i(n("Nz+N")),p=n("6hsm"),f=["articleBody","url"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.default)(this,n)}}var y=function(e){(0,l.default)(n,e);var t=g(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.articleBody,o=i.url,l=(0,a.default)(i,f);return(0,s.default)(this,n),(e=t.call(this,h(h({},l),{},{url:o})))["@type"]="Article",e.articleBody=r,e.mainEntityOfPage=o,e.publisher=p.PUBLISHER_ID_OBJ,e.copyrightHolder=p.PUBLISHER_ID_OBJ,e.sourceOrganization=p.PUBLISHER_ID_OBJ,e.copyrightYear=(new Date).getFullYear(),e}return(0,o.default)(n)}(d.default);t.default=y},hXGK:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("H0lQ"))),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("UMeL"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}var c=function(e){var t=e.currentTime,n=e.audioDuration;return a.default.createElement("div",null,a.default.createElement("div",{className:s.desktopDurationClass},(0,o.default)(1e3*t),"/",(0,o.default)(n)),a.default.createElement("div",{className:s.mobileDurationClass},"-",(0,o.default)(1e3*(n/1e3-t))))};c.displayName="Duration",c.defaultProps={audioDuration:void 0,currentTime:void 0};var u=c;t.default=u},hZ4i:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.FEED_LEDE=t.FEED_FOOTER=void 0,t.findBriefingCollection=function(e){var t;return null!==(t=null==e?void 0:e.find((function(e){try{var t=JSON.parse(null==e?void 0:e.mobileHeader);return C(null==t?void 0:t.typeOfBlog)}catch(e){return!1}})))&&void 0!==t?t:null},t.getAdditionalItems=function(e){var t,n,i,a=(null===(t=w(e))||void 0===t||null===(n=t.find((function(e){return"additional content"===e.label})))||void 0===n||null===(i=n.relations)||void 0===i?void 0:i.map((function(e){return e.asset})))||[],o=(0,r.default)(a,1)[0];if(!o)return{};var s=o.highlights;if(null!=s&&s.edges){var l,c=w(e),u=O(k(x(e)));return d(d({},s),{},{edges:null===(l=s.edges)||void 0===l?void 0:l.map((function(t){return d(d({},t),{},{metadata:R(e,c,u,null==t?void 0:t.node)})}))})}return s},t.getBlockKey=function(e,t){var n,i,r=e.youTubeId||(null===(n=e.media)||void 0===n?void 0:n.sourceId)||(null===(i=e.media)||void 0===i?void 0:i.id)||t;return"".concat(e.__typename,"-").concat(r)},t.getBylinesFromPosts=function(e){var t,n,i,r,a=null==e?void 0:e.reduce((function(e,t){var n;return null==e||null===(n=e.concat)||void 0===n?void 0:n.call(e,null==t?void 0:t.bylines)}),[]);return null!==(t=null===(n=Object.values(null!==(i=null==a||null===(r=a.reduce)||void 0===r?void 0:r.call(a,(function(e,t){return null!=t&&t.renderedRepresentation&&(e[null==t?void 0:t.renderedRepresentation]=t),e}),{}))&&void 0!==i?i:{}))||void 0===n?void 0:n.filter(Boolean))&&void 0!==t?t:[]},t.getCapsuleFromContainers=function(e,t){var n,i,r=null==e?void 0:e.find((function(e){return m(e)===t}));r||"feed lede"!==t||(r=null==e?void 0:e.find((function(e){return"highlights"===m(e)})));var a=null===(n=r)||void 0===n||null===(i=n.relations)||void 0===i?void 0:i.find((function(e){var t;return"Capsule"===(null==e||null===(t=e.asset)||void 0===t?void 0:t.__typename)}));return(null==a?void 0:a.asset)||null},t.getContainerIdentifier=m,t.getContainersFromCollection=w,t.getExplainerAsset=P,t.getFirstImageInPosts=b,t.getHeadline=function(e,t){var n=g(e)||g(t)||{default:null==t?void 0:t.name};null!=t&&t.header&&(n.seo=null==t?void 0:t.header);return n},t.getHighlightArtPromoMedia=N,t.getHighlightArtPromoMediaCrops=function(e){var t,n,i=N(e);return(null==i||null===(t=i.promotionalMedia)||void 0===t?void 0:t.crops)||(null==i||null===(n=i.promotionalMedia)||void 0===n?void 0:n.spanImageCrops)||(null==i?void 0:i.crops)},t.getLastModifiedAsset=function(e,t){return h([].concat((0,a.default)(null==e?void 0:e.map((function(e){return null==e?void 0:e.lastModified}))),[null==t?void 0:t.lastModified]))},t.getLastModifiedAssetTime=h,t.getLiveAsset=D,t.getMenuFromContainers=function(e){var t;return(null==e||null===(t=e.find((function(e){return"header"===m(e)})))||void 0===t?void 0:t.relations)||[]},t.getMetadataForAsset=R,t.getNodesFromCollectionStream=function(e){var t,n,i;return(null==e||null===(t=e.stream)||void 0===t||null===(n=t.edges)||void 0===n||null===(i=n.map((function(e){return e.node})))||void 0===i?void 0:i.filter((function(e){return"Article"===(null==e?void 0:e.__typename)})))||[]},t.getNodesFromRelayConnection=function(e){var t;return(null==e||null===(t=e.edges)||void 0===t?void 0:t.map((function(e){return e.node})))||[]},t.getPostStatus=function(e){return(I(e)?"Breaking":A(e)&&"Live")||j(e)&&"Just now"||null},t.getPostTypeOverride=function(e){var t=e.metadata;return null!=t&&t.isFactCheck?"FACTCHECK":null},t.getPromotionalImage=function(e,t,n,i,r){var a,o=null==e?void 0:e.promotionalImage,s=_(v(e,["ImageBlock","VideoBlock","InteractiveBlock","CardDeckBlock"])),l=null==t?void 0:t.promotionalImage,c=null==n||null===(a=n.find((function(e){return null==e?void 0:e.promotionalImage})))||void 0===a?void 0:a.promotionalImage;if(r)return o||null;if(i)return s||c||o||l||null;return o||s||l||c||null},t.getPromotionalMedia=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4?arguments[4]:void 0,a=null==e?void 0:e.promotionalMedia,o=v(e,["ImageBlock","VideoBlock","InteractiveBlock","CardDeckBlock"]),s=null==t?void 0:t.promotionalMedia,l=b(n);if(r)return o||null;if(i)return o||l||a||s||null;return a||o||s||l||null},t.getPromotionalMediaFromOakBody=v,t.getRankedUpdatesFromContainers=function(e,t){var n,i,r=null!=e&&e.highlights?e.highlights.edges.map((function(e){return e.node})):null==t||null===(n=t.find((function(e){return"highlights"===m(e)})))||void 0===n||null===(i=n.relations)||void 0===i?void 0:i.map((function(e){return e.asset})),a=null==r?void 0:r.filter((function(e){return"Article"===(null==e?void 0:e.__typename)}));return null!=a?a:[]},t.getSectionItems=function(e,t,n){var i,o,s,c,u,d=(null===(i=w(e))||void 0===i||null===(o=i.find((function(e){return"additional content"===e.name})))||void 0===o||null===(s=o.relations)||void 0===s?void 0:s.map((function(e){return e.asset})))||[],p=w((0,r.default)(d,1)[0]).reduce((function(e,t){return e[t.name]=t,e}),{}),f=null===(c=t.find((function(e){return"top stories"===e.name})))||void 0===c||null===(u=c.relations)||void 0===u?void 0:u.filter((function(e){var t,n;return null===(t=e.asset)||void 0===t||null===(n=t.slug)||void 0===n?void 0:n.includes(l.VOX_POP_SLUG)}));return t.reduce((function(e,t){var i,r=t.name,o=(null===(i=p[r])||void 0===i?void 0:i.relations)||[],s="what were seeing"===r&&f||[],c=(null==o?void 0:o.length)||(null==s?void 0:s.length),u=[].concat((0,a.default)((null==t?void 0:t.relations)||[]),(0,a.default)(o),(0,a.default)(s)).filter((function(e){var t,n,i;return["Article","ReporterUpdate","EmbeddedInteractive"].includes(null===(t=e.asset)||void 0===t?void 0:t.__typename)&&!("top stories"===r&&null!==(n=e.asset)&&void 0!==n&&null!==(i=n.slug)&&void 0!==i&&i.includes(l.VOX_POP_SLUG))})).map((function(e){var t=e.asset,n=t.__typename,i=t.id,r=t.uri,a=t.firstPublished;return{__typename:n,id:i,uri:r,firstPublished:a,firstPublishedTimestamp:new Date(a).getTime()}})).sort((function(e,t){return t.firstPublishedTimestamp-e.firstPublishedTimestamp}));if(c)return e[r]=u,e;var d=u.reduce((function(e,t){return e.set(t.id,t),e}),new Map),m=n.map((function(e){return e.id})).filter((function(e){return d.has(e)})),h=u.map((function(e){return e.id})),g=Array.from(new Set([].concat((0,a.default)(m),(0,a.default)(h))));return e[r]=g.map((function(e){return d.get(e)})),e}),{})},t.getSectionsFromContainers=function(e){var t,n,i=x(e).sections,r=i?Object.keys(i):[],a=null==e||null===(t=e.groupings)||void 0===t||null===(n=t.filter((function(e){return"rank"===e.name}))[0])||void 0===n?void 0:n.containers;return(null==a?void 0:a.filter((function(e){var t=e.name;return r.includes(t)})))||[]},t.getSubscriptionUris=function(e){var t,n,i,a=(null===(t=w(e))||void 0===t||null===(n=t.find((function(e){return"additional content"===e.label})))||void 0===n||null===(i=n.relations)||void 0===i?void 0:i.map((function(e){return e.asset})))||[],o=(0,r.default)(a,1)[0];return o?o.uri:{}},t.getSummary=function(e,t){return(null==e?void 0:e.summary)||(null==e?void 0:e.promotionalSummary)||(null==t?void 0:t.summary)||(null==t?void 0:t.longDescription)||""},t.getSupplementalItems=void 0,t.getTypeOfBlog=k,t.getUnderhighlightItems=void 0,t.hasLabel=M,t.hideInteractiveMetaText=function(e){var t=(null==e?void 0:e.media)||e;if("EmbeddedInteractive"!==(null==t?void 0:t.__typename))return;null!=t&&t.displayProperties&&(t.displayProperties.displayForPromotionOnly=!0);t.credit=""},t.isExplainerAsset=t.isBreaking=void 0,t.isInExplainerAsset=function(e){return!!P(e)},t.isInLiveAsset=function(e){return!!D(e)},t.isLive=t.isJustNow=void 0,t.isNewLiveAsset=function(e){var t,n;return(null==e||null===(t=e.url)||void 0===t?void 0:t.includes("/live/"))&&(null==e||null===(n=e.__typename)||void 0===n?void 0:n.includes("LegacyCollection"))&&!function(e){return T(x(e).typeOfBlog)}(e)},t.isOldLiveBriefing=function(e){var t,n,i;if("Article"!==(null==e?void 0:e.__typename))return!1;var r=null==e||null===(t=e.sprinkledBody)||void 0===t||null===(n=t.content)||void 0===n?void 0:n.find((function(e){return"HeaderLiveBriefingBlock"===(null==e?void 0:e.__typename)}));return!!r&&"Right Now"===(null==r||null===(i=r.latestUpdate)||void 0===i?void 0:i.label)},t.isTypeOfBlogBriefing=C,t.isTypeOfBlogCoverageBriefing=function(e){return e===c.THEMES.COVERAGE_BRIEFING},t.isTypeOfBlogFactCheck=T,t.isTypeOfBlogNewsBriefing=function(e){return e===c.THEMES.NEWS_BRIEFING},t.isTypeOfBlogStorylineFeed=function(e){return e===c.THEMES.STORYLINE_FEED},t.mapPromotionalMediaToPromotionalImage=_,t.mapTypeOfBlogToTypeOfFeedPublication=O,t.parseUnstructuredData=x,t.rewriteNodePermalinkToAnchor=f,t.sprinkleAdditionalItemsInFeed=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.trim,r=void 0===i||i,o=(0,a.default)(e);return t.forEach((function(e){if(null!=e&&e.node){var t=o.findIndex((function(t){var n=t.node,i=t.metadata;return!(null==n||!n.firstPublished)&&((null==i||!i.isRanked)&&new Date(n.firstPublished)<new Date(e.node.firstPublished))}));if(!(r&&t<0)){var n=t<0?o.length:t;o=E(o,n,e)}}})),o};var r=i(n("J4zp")),a=i(n("RIqP")),o=i(n("lSNA")),s=n("C2Ll"),l=n("xeA1"),c=n("p3S2");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.FEED_LEDE="feed lede";t.FEED_FOOTER="footer";var p=["LIVE_BLOG","LIVE_BRIEFING","FACT_CHECK"];function f(e,t){var n=null==e?void 0:e.url,i=(null==t?void 0:t.shareUrl)||(null==t?void 0:t.url)||"",r=(null==t?void 0:t.url)||"",a=r.split("/");if(!r.includes("#")&&null!=a&&a.length){var o=a.pop().replace(".html","");r="".concat(n,"#").concat(o)}return d(d({},t),{},{url:r,shareUrl:i})}function m(e){return(null==e?void 0:e.label)||(null==e?void 0:e.name)}function h(e){var t,n,i;return(null==e||null===(t=e.filter(Boolean))||void 0===t||null===(n=t.map((function(e){return new Date(e)})))||void 0===n||null===(i=n.sort((function(e,t){return t-e}))[0])||void 0===i?void 0:i.toISOString())||""}var g=function(e){var t;return(null==e||null===(t=e.headline)||void 0===t?void 0:t.default)&&(null==e?void 0:e.headline)};var y=function(e){return"HeaderBasicBlock"===(null==e?void 0:e.__typename)||"HeaderFullBleedHorizontalBlock"===(null==e?void 0:e.__typename)||"HeaderFullBleedVerticalBlock"===(null==e?void 0:e.__typename)||"HeaderLiveBriefingBlock"===(null==e?void 0:e.__typename)||"HeaderMultimediaBlock"===(null==e?void 0:e.__typename)};function v(e){var t,n,i,r,a,o,s,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["ImageBlock","VideoBlock"],c=null==e||null===(t=e.body)||void 0===t||null===(n=t.content)||void 0===n?void 0:n.find((function(e){var t,n;return y(e)&&(null==e||null===(t=e.ledeMedia)||void 0===t?void 0:t.media)&&l.includes(null==e||null===(n=e.ledeMedia)||void 0===n?void 0:n.__typename)||l.includes(null==e?void 0:e.__typename)&&((null==e?void 0:e.media)||(null==e?void 0:e.ledeMedia))}));if("CardDeck"===(null==c||null===(i=c.ledeMedia)||void 0===i||null===(r=i.media)||void 0===r?void 0:r.__typename)){var u,d,p,f,m,h,g=null==c||null===(u=c.ledeMedia)||void 0===u||null===(d=u.media)||void 0===d||null===(p=d.asset)||void 0===p||null===(f=p.cards)||void 0===f||null===(m=f[0])||void 0===m||null===(h=m.assets)||void 0===h?void 0:h[0];s=g,"Video"===(null==g?void 0:g.__typename)&&(s=null==g?void 0:g.promotionalMedia)}return s||(null==c?void 0:c.postMedia)||(null==c||null===(a=c.postLedeMedia)||void 0===a?void 0:a.postMedia)||(null==c||null===(o=c.ledeMedia)||void 0===o?void 0:o.media)||(null==c?void 0:c.media)||null}function b(e){var t=null==e?void 0:e.find((function(e){return(null==e?void 0:e.promotionalMedia)||v(e)}));return(null==t?void 0:t.promotionalMedia)||v(t)}function _(e){var t,n;if(!e)return null;var i=e;if("Image"!==e.__typename&&"Image"===(null===(t=e.promotionalMedia)||void 0===t?void 0:t.__typename)&&(i=e.promotionalMedia),"Image"!==i.__typename)return null;var r=(0,s.collapsePromoMedia)({crops:i.assetCrops||i.crops});return{socialMediaRendition:{rendition:(0,s.getPromoCropObj)(r)},twitterRendition:{rendition:(0,s.getCropByPriority)(r,["videoSixteenByNine3000","videoSixteenByNineJumbo1600","articleLarge"])||s.defaultPromoCrop},image:{id:i.id,caption:{text:null===(n=i.caption)||void 0===n?void 0:n.text}}}}function w(e){var t;return(null==e||null===(t=e.groupings)||void 0===t?void 0:t.reduce((function(e,t){return e.concat(null==t?void 0:t.containers)}),[]))||[]}function x(e){var t={};try{t=JSON.parse(null==e?void 0:e.mobileHeader)}catch(e){}return t}function k(e){return(null==e?void 0:e.typeOfBlog)||"UNSET"}function O(e){switch(e){case"FACTCHECK":return c.THEMES.FACT_CHECK;case"BRIEFING":return c.THEMES.LIVE_BRIEFING;case"COVERAGE_BRIEFING":return c.THEMES.COVERAGE_BRIEFING;case"EXPLAINER":return c.THEMES.EXPLAINER;case"NEWS_BRIEFING":return c.THEMES.NEWS_BRIEFING;case"LIVE_STORYLINE_FEED":return c.THEMES.STORYLINE_FEED;case"BLOG":default:return c.THEMES.LIVE_BLOG}}var E=function(e,t,n){return[].concat((0,a.default)(e.slice(0,t)),[n],(0,a.default)(e.slice(t)))};function T(e){return"FACTCHECK"===e||"FACT_CHECK"===e}function C(e){return"LIVE_BRIEFING"===e||"BRIEFING"===e}var S=function(e){var t;return null==e||null===(t=e.url)||void 0===t?void 0:t.includes("/explain/")};function P(e){var t;return null==e||null===(t=e.collections)||void 0===t?void 0:t.find((function(e){return S(e)}))}function M(e){return function(t){var n,i;return null==t||null===(n=t.metadata)||void 0===n||null===(i=n.labels)||void 0===i?void 0:i.includes(e)}}t.isExplainerAsset=S;var I=M(c.LABELS.BREAKING_UPDATES);t.isBreaking=I;var A=M(c.LABELS.LIVE_UPDATES);t.isLive=A;var j=M(c.LABELS.JUST_NOW);function L(e,t){var n;return null==e||null===(n=e.relations)||void 0===n?void 0:n.some((function(e){var n;return(null==e||null===(n=e.asset)||void 0===n?void 0:n.id)&&t&&e.asset.id===t}))}function R(e,t,n,i){var r,a=f(e,i).url,o=(null==t?void 0:t.filter((function(e){return"highlights"!==m(e)&&L(e,null==i?void 0:i.id)})).map(m))||[],s=L(null==t?void 0:t.find((function(e){return"highlights"===m(e)})),null==i?void 0:i.id),l={};n.includes("LIVE")&&(l={__typename:"LiveFeedItemMetadata_Beta",isRightNow:o.includes(c.LABELS.RIGHT_NOW),isMajorUpdate:o.includes(c.LABELS.MAJOR_UPDATES),hasArtHighlighted:o.includes(c.LABELS.ART_HIGHLIGHT),isRanked:s,isFactCheck:null==i||null===(r=i.slug)||void 0===r?void 0:r.includes("fact-check")});return d({__typename:"GenericFeedItemMetadata_Beta",labels:o,deepUrl:a},l)}t.isJustNow=j;t.getSupplementalItems=function(e){var t,n,i;return(null===(t=w(e))||void 0===t||null===(n=t.find((function(e){return e.name===c.LABELS.SUPPLEMENTAL})))||void 0===n||null===(i=n.relations)||void 0===i?void 0:i.map((function(e){return e.asset})))||[]};function N(e){return v(e,["ImageBlock","VideoBlock","InteractiveBlock"])}function D(e){var t,n,i,r=null==e||null===(t=e.feedPublications)||void 0===t?void 0:t.find((function(e){return p.includes(null==e?void 0:e.feedPublicationType)}));if(r)return r;var a=/^live-blog-/,o=null==e||null===(n=e.collections)||void 0===n||null===(i=n.filter((function(e){return a.test(null==e?void 0:e.slug)})))||void 0===i?void 0:i.sort((function(e,t){return(null==t?void 0:t.firstPublished)>(null==e?void 0:e.firstPublished)?1:-1})),s=null==o?void 0:o.filter((function(e){return null==e?void 0:e.active}));return(null==s?void 0:s[0])||(null==o?void 0:o[0])}t.getUnderhighlightItems=function(e){var t,n,i;return(null===(t=w(e))||void 0===t||null===(n=t.find((function(e){return e.name===c.LABELS.UNDERHIGHLIGHTS})))||void 0===n||null===(i=n.relations)||void 0===i?void 0:i.map((function(e){return e.asset})))||[]}},hbBX:function(e,t,n){"use strict";var i,r,a,o=n("yXPU"),s=n.n(o),l=n("lSNA"),c=n.n(l),u=n("J4zp"),d=n.n(u),p=n("VkAN"),f=n.n(p),m=n("o0o1"),h=n.n(m),g=n("q1tI"),y=n.n(g),v=n("Kxyt"),b=n("eFc+"),_=n.n(b),w=n("X6oL"),x=n("GB3f"),k=n("+ClL"),O=n("ZKN5"),E=n("5xNV"),T=n("fZdH"),C=_()(i||(i=f()(["\n  query ReadingListStatusQuery($url: [String!]!) {\n    user {\n      readingListStatus(urls: $url) {\n        url\n        saved\n      }\n    }\n  }\n"]))),S=_()(r||(r=f()(["\n  mutation AddToReadingListMutation($readingListInput: ReadingListMutation!) {\n    addToReadingList(input: $readingListInput) {\n      clientMutationId\n      url\n    }\n  }\n"]))),P=_()(a||(a=f()(["\n  mutation RemoveFromReadingListMutation($readingListInput: ReadingListMutation!) {\n    removeFromReadingList(input: $readingListInput) {\n      clientMutationId\n      url\n    }\n  }\n"])));t.a=Object(O.a)((function(e){var t,n=e.url,i=e.uri,r=e.urlSet,a=e.optimisticResponse,o=e.moduleName,l=e.buttonRegion,u=e.callback,p=void 0===u?function(){}:u,f=e.children,m=Object(w.useTracking)({event:"moduleInteraction",module:{name:o,region:l}}).trackEvent,b=Object(g.useState)(),_=d()(b,2),O=_[0],M=_[1],I=Object(T.a)(),A=n?[n]:r,j=Object(v.useQuery)(C,{variables:{url:A},ssr:!1,context:{queryDeduplication:!1},fetchPolicy:"cache-first"}),L=j.loading,R=j.error,N=j.data,D=Object(v.useMutation)(S,{update:Object(E.d)("addToReadingList")}),B=d()(D,2),z=B[0],F=B[1],U=Object(v.useMutation)(P,{update:Object(E.d)("removeFromReadingList")}),H=d()(U,2),W=H[0],q=H[1],V=F.loading||q.loading,G=Object(g.useCallback)((function(){var e;if(!(L||V||R))if(null!=N&&null!==(e=N.user)&&void 0!==e&&e.readingListStatus.length){var t=!N.user.readingListStatus.every((function(e){return e.saved})),i=t?z:W,r=N.user.readingListStatus.reduce((function(e,r){var o=r.url;if(r.saved===t)return e;var s=i({variables:{readingListInput:{url:o,clientMutationId:o}},optimisticResponse:a?c()({},t?"addToReadingList":"removeFromReadingList",{__typename:"ReadingListMutationResult",clientMutationId:o,url:o}):void 0});return s.then((function(e){return m({eventData:{trigger:"module",type:"click"},module:{element:{name:t?"save":"unsave",label:t?"Save":"Unsave",url:o}}}),m({eventData:{trigger:"module",type:"click"},module:{element:{name:"save",label:O,url:n}}}),e})),e.push(s),e}),[]);Promise.allSettled(r).then((function(){return p(t?"save":"unsave")})).catch((function(e){return Object(k.a)(e,{msg:"Save button mutation failed."})}))}else{var o=Object(x.b)();window.location.assign(o)}}),[N,R,V,L,z,W,m,p,a,O,n]);Object(g.useEffect)((function(){var e=function(){var e=s()(h.a.mark((function e(){var t,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://reading-list.api.nytimes.com/reading-list/v2/save-count?uri=".concat(i));case 3:if(!(t=e.sent).ok){e.next=12;break}return e.next=7,t.json();case 7:n=e.sent,r=null==n?void 0:n.numberOfSaves,M(r),e.next=13;break;case 12:Object(k.a)(new Error("response.ok false"),{msg:"Query for total saves failed."});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),Object(k.a)(e.t0,{msg:"Query for total saves failed."});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();!Object(E.b)(I)||O||L||e()}),[I,i,O,L]);var Y=!(null==N||null===(t=N.user)||void 0===t||!t.readingListStatus.length)&&N.user.readingListStatus.every((function(e){return e.saved}));return y.a.cloneElement(f,{loading:L,error:R,mutationLoading:V,mutationError:F.error||q.error,saved:Y,handleSave:G,savesCount:O})}))},hkPW:function(e,t,n){"use strict";var i=n("J4zp"),r=n.n(i),a=n("q1tI"),o=n("X6oL"),s=n("Gl8y");t.a=function(e){var t=e.root,n=void 0===t?null:t,i=e.rootMargin,l=e.threshold,c=void 0===l?.1:l,u=e.data,d=Object(o.useTracking)(),p=Object(s.a)({root:n,rootMargin:i,threshold:c}),f=r()(p,2),m=f[0],h=f[1],g=Object(a.useState)(!1),y=r()(g,2),v=y[0],b=y[1];return Object(a.useEffect)((function(){h.isIntersecting&&(Array.isArray(u)?u.forEach((function(e){return d.trackEvent(e)})):d.trackEvent(u),b(!0))}),[h.isIntersecting]),{isTracked:v,ref:m,refEl:h}}},hsyQ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OnsiteTimestamp=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("Jqp9")),o=i(n("XMNT")),s=n("L1jB"),l=(n("EVBM"),function(e){var t=e.timestampBlock,n=e.lastMajorModification,i=(0,a.useTheme)();return null!=t&&t.timestamp?r.default.createElement("div",{className:(0,s.getTimestampContainerClass)({theme:i}),"data-testid":"onsite-timestamp"},r.default.createElement(o.default,{showUpdatedTimestamp:t.showUpdatedTimestamp,canShowTime:!0,lastMajorModification:n},t.timestamp)):null});t.OnsiteTimestamp=l,l.displayName="OnsiteTimestamp",l.defaultProps={timestampBlock:null,lastMajorModification:null};var c=l;t.default=c},huET:function(e,t,n){"use strict";var i,r,a=n("gcR/"),o=n.n(a),s=n("J4zp"),l=n.n(s),c=n("q1tI"),u=n.n(c),d=n("Gl8y"),p=n("d3NK"),f=n("N/T0"),m=n("ZKN5"),h=n("Bk96"),g=n("zsRM");function y(e){var t=e.messageId,n=e.Content,a=e.showAds,s=e.dismissTruncator,m=e.tracking,y=Object(c.useState)(!1),v=l()(y,2),b=v[0],_=v[1],w=Object(d.a)({}),x=l()(w,2),k=x[0],O=x[1],E={name:g.c,context:"",label:t},T=Object(f.a)(Object.assign(E,m));return Object(c.useEffect)((function(){O.isIntersecting&&!b&&(_(!0),T.trackImpression())}),[O,t,T,b]),u.a.createElement("div",{className:h.e,ref:k},i||(i=o()("div",{className:h.c})),o()(n,{dismissTruncator:s,tracker:T}),a&&(r||(r=o()("div",{className:h.a},void 0,o()(p.a,{id:"acm"})))))}y.displayName="Truncator",y.defaultProps={dismissTruncator:function(){return null},tracking:{}},t.a=Object(m.a)(y)},"i+0r":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("IkF8")).default;t.default=r},i48y:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("QILm")),a=i(n("W8MJ")),o=i(n("lwsE")),s=i(n("7W2i")),l=i(n("a1gu")),c=i(n("Nsbk")),u=i(n("6OwD")),d=["uploadDate","transcript","duration","contentUrl"];function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,l.default)(this,n)}}var f=function(e){(0,s.default)(n,e);var t=p(n);function n(e){var i,a=e.uploadDate,s=e.transcript,l=e.duration,c=e.contentUrl,u=(0,r.default)(e,d);return(0,o.default)(this,n),(i=t.call(this,u))["@type"]="AudioObject",i.uploadDate=a,i.transcript=s,i.duration=l,i.contentUrl=c,i}return(0,a.default)(n)}(u.default);t.default=f},i9lO:function(e,t,n){"use strict";var i,r,a,o,s,l,c,u=n("VkAN"),d=n.n(u),p=n("q1tI"),f=n.n(p),m=n("eFc+"),h=n.n(m),g=n("InUh"),y=n.n(g),v=n("9i1U"),b=n("solT"),_=y()((function(){return Promise.all([n.e(147),n.e(51)]).then(n.bind(null,"L1Rh"))}),{loadableGenerated:{webpack:function(){return["L1Rh"]},modules:["./AudioBlock"]}}),w=y()((function(){return Promise.all([n.e(165),n.e(172)]).then(n.bind(null,"3COf"))}),{loadableGenerated:{webpack:function(){return["3COf"]},modules:["./VideoBlock"]}}),x=function(e){var t=e.data;return Object(b.b)(t)?f.a.createElement(w,e):f.a.createElement(_,e)},k=h()(i||(i=d()(["\n  fragment HeaderMultimediaBlock_promoImage on Image {\n    id\n    crops(\n      cropNames: [\n        MEDIUM_SQUARE\n        THREE_BY_TWO\n        TWO_BY_THREE\n        SIXTEEN_BY_NINE\n        FIFTEEN_BY_SEVEN\n        MASTER\n      ]\n    ) {\n      name\n      renditions {\n        name\n        width\n        height\n        url\n      }\n    }\n  }\n"]))),O=h()(r||(r=d()(['\n  fragment HeaderMultimediaBlock_recircPromoImage on Image {\n    id\n    crops(renditionNames: ["thumbLarge"]) {\n      name\n      renditions {\n        url\n        height\n        width\n        name\n      }\n    }\n  }\n']))),E=h()(a||(a=d()(["\n  fragment HeaderMultimediaBlock_assetEdges on AssetsConnection {\n    ...Connection_pageInfo\n    edges {\n      node {\n        ... on Article {\n          id\n          headline {\n            subHeadline\n            seo\n            default\n          }\n          body {\n            content @take(first: 1) {\n              ... on HeaderMultimediaBlock {\n                media {\n                  ... on AudioBlock {\n                    media {\n                      id\n                      ... on Audio {\n                        id\n                        length\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n          episodeProperties {\n            episodeLabel\n          }\n          url\n          firstPublished\n          promotionalMedia {\n            ...HeaderMultimediaBlock_recircPromoImage\n            ... on Audio {\n              id\n              promotionalMedia {\n                ...HeaderMultimediaBlock_recircPromoImage\n              }\n            }\n            ... on Video {\n              id\n              promotionalMedia {\n                ...HeaderMultimediaBlock_recircPromoImage\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"])),O,v.a),T=h()(o||(o=d()(["\n  fragment HeaderMultimediaBlock_mostRecentAssets on Article {\n    id\n    column {\n      id\n      url\n      tagline\n      name\n      assets(first: 12) {\n        ...HeaderMultimediaBlock_assetEdges\n      }\n      __typename\n    }\n  }\n  ","\n"])),E),C=h()(s||(s=d()(["\n  fragment HeaderMultimediaBlock_oldestAssets on Article {\n    id\n    column {\n      id\n      url\n      tagline\n      name\n      stream(first: 12, streamQuery: { sort: oldest }) {\n        ...HeaderMultimediaBlock_assetEdges\n      }\n    }\n  }\n  ","\n"])),E);x.fragments={data:h()(l||(l=d()(['\n    fragment HeaderMultimediaBlock_data on HeaderMultimediaBlock {\n      headlineColor\n      backgroundColor\n      headline {\n        ... on Heading1Block {\n          content {\n            ... on TextInline {\n              text\n            }\n          }\n          textAlign\n        }\n      }\n      summary {\n        content {\n          ... on TextInline {\n            text\n          }\n        }\n        textAlign\n      }\n      media {\n        ... on VideoBlock {\n          size\n          promotionalOverride {\n            ...HeaderMultimediaBlock_promoImage\n            ... on Video {\n              id\n              renditions {\n                width\n                height\n                bitrate\n                url\n                type\n                aspectRatio\n              }\n              promotionalMedia {\n                ...HeaderMultimediaBlock_promoImage\n              }\n            }\n          }\n          media {\n            id\n            promotionalMedia {\n              ...HeaderMultimediaBlock_promoImage\n            }\n            ... on Video {\n              url\n              duration\n              sourceId\n              productionType\n              advertisingProperties {\n                sensitivity\n              }\n              firstPublished\n              promotionalMedia {\n                ... on Video {\n                  id\n                  renditions {\n                    width\n                    height\n                    bitrate\n                    url\n                    type\n                    aspectRatio\n                  }\n                  promotionalMedia {\n                    ...HeaderMultimediaBlock_promoImage\n                  }\n                }\n              }\n              renditions {\n                width\n                height\n                bitrate\n                url\n                type\n                aspectRatio\n              }\n              videoTranscript: transcript\n              playlist {\n                videos(first: 4) {\n                  ...Connection_pageInfo\n                  edges @filterEmpty {\n                    node {\n                      advertisingProperties {\n                        sensitivity\n                        sponsored\n                      }\n                      id\n                      sourceId\n                      duration\n                      section {\n                        id\n                        name\n                      }\n                      headline {\n                        default\n                      }\n                      renditions {\n                        url\n                        type\n                      }\n                      url\n                      promotionalMedia {\n                        ...HeaderMultimediaBlock_promoImage\n                        ... on Video {\n                          id\n                          promotionalMedia {\n                            ...HeaderMultimediaBlock_promoImage\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n                id\n                promotionalHeadline\n                url\n                sourceId\n              }\n            }\n          }\n        }\n        ... on AudioBlock {\n          media {\n            id\n            ... on Audio {\n              id\n              transcript {\n                __typename\n              }\n              id\n              headline {\n                default\n              }\n              summary\n              fileUrl\n              credit\n              firstPublished\n              length\n              subscribeUrls {\n                url\n                platform\n              }\n              promotionalMedia {\n                ... on Image {\n                  id\n                  crops(renditionNames: ["jumbo"]) {\n                    renditions {\n                      url\n                      width\n                      height\n                    }\n                  }\n                }\n              }\n              podcastSeries {\n                title\n                subtitle\n                name\n                itunesUrl\n                image {\n                  id\n                  crops(\n                    cropNames: [FIFTEEN_BY_SEVEN, THREE_BY_TWO, MASTER, MEDIUM_SQUARE, HORIZONTAL]\n                    renditionNames: [\n                      "videoLarge"\n                      "videoFifteenBySeven2610"\n                      "articleLarge"\n                      "square320"\n                    ]\n                  ) {\n                    name\n                    renditions {\n                      width\n                      url\n                      name\n                      height\n                      format\n                    }\n                  }\n                }\n                collection {\n                  id\n                  ... on LegacyCollection {\n                    name\n                  }\n                }\n              }\n              transcript {\n                transcriptFragment {\n                  text\n                  speaker\n                  timecode {\n                    start\n                    end\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    ',"\n    ","\n  "])),k,v.a),article:h()(c||(c=d()(['\n    fragment HeaderMultimediaBlock_article on Article {\n      id\n      episodeProperties {\n        episodeLabel\n        linksLeadIn\n        links {\n          platformName\n          linkUrl\n          image {\n            id\n            crops(renditionNames: "master180") {\n              name\n              renditions {\n                name\n                url\n              }\n            }\n          }\n        }\n      }\n      ...HeaderMultimediaBlock_mostRecentAssets @skip(if: $isTheWeekly)\n      ...HeaderMultimediaBlock_oldestAssets @include(if: $isTheWeekly)\n    }\n    ',"\n    ","\n  "])),T,C)},t.a=x},iDRl:function(e,t,n){"use strict";n.r(t);var i,r=n("VkAN"),a=n.n(r),o=n("gcR/"),s=n.n(o),l=n("lSNA"),c=n.n(l),u=n("q1tI"),d=n("eFc+"),p=n.n(d),f=n("kbxR"),m=n.n(f),h=n("IX5K"),g=n("YWmT"),y=n("boCj"),v=n("2XMp");function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=e.storyline,n=e.parentUri,i=e.pageType,r=e.testName,a=e.ruleName,o=e.region,l=Object(u.useMemo)((function(){return{region:o,block:"storyline_top_links_recirc",name:a,parentUri:n,pgtype:i,variant:"show"}}),[a,n,i,o]),c=Object(u.useMemo)((function(){return _(_({},t),{},{experimentalJsonBlob:Object(v.a)(_(_({},l),{},{html:null==t?void 0:t.experimentalJsonBlob}))})}),[t,l]);return s()(g.a,{componentName:"top_links",region:o,parentUri:n,testName:r,ruleName:a,pageType:i},void 0,(function(e){var t=e.trackImpression,n=e.trackInteraction;return t?s()(y.InView,{onChange:function(e){e&&t({event:"impression"})},triggerOnce:!0},void 0,s()(m.a,{storyline:c,trackingParams:l,trackLinkInteraction:n})):s()(m.a,{storyline:c,trackingParams:l,trackLinkInteraction:n})}))}w.displayName="StorylinesTopLinks",w.defaultProps={testName:null},w.fragments={storyline:p()(i||(i=a()(["\n    fragment StorylinesTopLinks_storyline on CreativeWork {\n      ... on Published {\n        uri\n      }\n      storylines {\n        ruleName\n        testName\n        storyline {\n          uri\n          experimentalJsonBlob\n          topLinks {\n            displayName\n            leadIn\n            imageUrl\n            items {\n              ...ListBlock_data\n            }\n          }\n        }\n      }\n    }\n    ","\n  "])),h.a.fragments.data)},t.default=w},iEQv:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=o(n("q1tI")),l=a(n("iYU6")),c=n("tRGv");t.default=function(){return s.default.createElement(s.default.Fragment,null,s.default.createElement("div",{className:l.topperClass,"data-testid":"onsite-messaging-unit-".concat(null===c.config||void 0===c.config?void 0:c.config.name)},"Already have an account? Log in."),s.default.createElement("hr",{className:l.longHorizontalRule}))}},iGEk:function(e,t,n){"use strict";var i=n("gcR/"),r=n.n(i),a=n("lSNA"),o=n.n(a),s=n("q1tI"),l=n.n(s),c=n("X6oL"),u=n("Jqp9"),d=n("ZKN5"),p=n("eoAV"),f=n("jOYC"),m=n("jFEr"),h=n("lwsE"),g=n.n(h),y=n("W8MJ"),v=n.n(y),b=n("7W2i"),_=n.n(b),w=n("a1gu"),x=n.n(w),k=n("Nsbk"),O=n.n(k),E=n("369f"),T=n("wXC7"),C=n.n(T),S=Object(u.css)("display:none;",C.a.breakpoint.mediumLarge,"{display:flex;margin-right:0;margin-left:auto;width:130px;align-items:center;}",C.a.breakpoint.large,"{width:210px;}@media print{display:none;}"),P=Object(u.css)("display:flex;");function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=O()(e);if(t){var r=O()(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return x()(this,n)}}var I=function(){return null},A=function(e){_()(n,e);var t=M(n);function n(e){var i;return g()(this,n),(i=t.call(this,e)).state={companionComponent:null},i.companionColumn=l.a.createRef(),i}return v()(n,[{key:"componentDidMount",value:function(){this.companionColumn.current&&this.props.addZone(this.companionColumn.current.offsetHeight)}},{key:"render",value:function(){var e=this.props.defaultOpts,t=this.state&&this.state.companionComponent?this.state.companionComponent:I;return l.a.createElement("aside",{className:Object(u.cx)(S,o()({},P,t.requirements&&t.requirements.appearsAtMobile)),ref:this.companionColumn,"aria-label":"companion column"},t.requirements&&t.requirements.lazyLoad&&r()(E.a,{offset:500},void 0,l.a.createElement(t,e)),t.requirements&&!t.requirements.lazyLoad&&l.a.createElement(t,e))}}],[{key:"getDerivedStateFromProps",value:function(e){return e.metadata||null}}]),n}(s.Component);A.displayName="CompanionColumn",A.defaultProps={defaultOpts:{},addZone:function(){},metadata:{}};var j=A,L=n("nxVm"),R=n.n(L),N=Object(u.css)(C.a.breakpoint.mediumLarge,"{flex-direction:row;height:100%;width:945px;margin-left:auto;margin-right:auto;}",C.a.breakpoint.large,"{width:1110px;margin-left:auto;margin-right:auto;}@media (min-width:1280px){width:1170px;}",C.a.breakpoint.extraLarge,"{width:1200px;}"),D=Object(u.css)("display:flex;flex-direction:column;margin-bottom:1rem;",N,";",R.a,";@media print{margin-bottom:1em;display:block;}"),B=(C.a.breakpoint.mediumLarge,C.a.breakpoint.extraLarge,Object(u.css)("margin-left:auto;margin-right:auto;width:100%;",C.a.breakpoint.mediumLarge,"{margin-left:calc((100% - ",C.a.breakpoint.textBodyWidth,"px) / 2);margin-right:0;width:",C.a.breakpoint.textBodyWidth,"px;}",C.a.breakpoint.extraLarge,"{max-width:",C.a.breakpoint.textBodyWidthExtralarge,"px;width:",C.a.breakpoint.textBodyWidthExtralarge,"px;margin-left:calc((100% - ",C.a.breakpoint.textBodyWidthExtralarge,"px) / 2);}",R.a,";"));function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e){var t=e.children,n=e.defaultOpts,i=e.supplementalCount,a=e.addZone,o=e.metadata,s=e.minWidthMatches,d=e.componentTypeMap,h=e.embeddedComponentTypeMap,g=e.isOldLiveBriefing,y=e.className,v=Object(c.useTracking)({module:{region:""}}).Track,b={defaultOpts:n,addZone:a,metadata:o};return r()(v,{},void 0,r()("div",{className:Object(u.cx)(D,"StoryBodyCompanionColumn",y)},i,r()("div",{className:B},void 0,t.map((function(e){var t=e.name,i=e.data,a=e.heading1Rendered,o=e.key,c=e.isFirstParagraph,u=e.isFirstTextAfterHeading2Block,y=e.shortFormHeadersCount;"Heading1Block"===t&&(n.replaceHeading1=a),"ImageBlock"===t&&(n.usePhotoViewer=!0,n.useMobileCrop=!0,n.lazyLoad=!0),g&&"Heading2Block"===t&&(n.isOldLiveBriefing=!0),n.firstHeading3Block="Heading3Block"===t&&1===y;var v=d[t],b=F(F({},n),{},{isFirstParagraph:c,isFirstTextAfterHeading2Block:u,data:i,key:o,minWidthMatches:s,className:f.b.layout.nonInterrupterTextElementBaseClass});return o>m.b&&h[t]?r()(p.a,{offset:{},partialVisibility:!0,scrollCheck:!0,scrollThrottle:m.c,intervalCheck:!0,intervalDelay:m.a},o.toString(16),l.a.createElement(v,b)):l.a.createElement(v,b)}))),l.a.createElement(j,b)))}U.displayName="StoryBodyCompanionColumn",U.defaultProps={defaultOpts:{},children:[],supplementalCount:0,addZone:function(){},minWidthMatches:function(){return null},metadata:{},isOldLiveBriefing:!1,className:void 0};t.a=Object(d.a)(U)},iO9H:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("QILm")),a=i(n("W8MJ")),o=i(n("lwsE")),s=i(n("7W2i")),l=i(n("a1gu")),c=i(n("Nsbk")),u=i(n("Nz+N")),d=["associatedMedia"];function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,l.default)(this,n)}}var f=function(e){(0,s.default)(n,e);var t=p(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=i.associatedMedia,s=(0,r.default)(i,d);return(0,o.default)(this,n),(e=t.call(this,s))["@type"]="ImageGallery",e.associatedMedia=a,e}return(0,a.default)(n)}(u.default);t.default=f},iPKY:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.topRuleClass=t.titleClass=t.sectionRuleClass=t.paragraphClass=t.listItemClass=t.leadInClass=t.guideContainerClass=void 0;var r=n("Jqp9"),a=i(n("3Rk2")),o=i(n("wXC7")),s=n("3sMT"),l=(0,a.default)([o.default.breakpoint.medium]),c=(0,r.css)(o.default.printHide," font-family:",o.default.font.franklinBase,";color:",s.color.content.secondary,";background-color:",s.color.background.primary,";max-width:600px;width:",o.default.breakpoint.mobileFullWidth,";margin:0 auto 1.5rem;font-size:",o.default.font.size(17),";line-height:",o.default.font.size(24),";");t.guideContainerClass=c;var u=(0,r.css)("border-top:2px solid ",s.color.stroke.primary,";margin-top:1.25rem;margin-bottom:1.25rem;");t.topRuleClass=u;var d=(0,r.css)("margin-top:1rem;margin-bottom:1rem;");t.sectionRuleClass=d;var p=(0,r.css)("list-style:disc;padding-left:0;margin-bottom:0;margin-left:12px;");t.listItemClass=p;var f=(0,r.css)("font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.bold,";color:",s.color.content.primary,";margin:0;",l({fontSize:[o.default.font.size(24),o.default.font.size(28)],lineHeight:[o.default.font.size(28),o.default.font.size(32)]}));t.titleClass=f;var m=(0,r.css)("font-size:inherit;font-weight:",o.default.font.weight.medium,";padding-top:",o.default.font.size(12),";");t.leadInClass=m;var h=(0,r.css)(l({fontSize:[o.default.font.size(17),o.default.font.size(17)],lineHeight:[o.default.font.size(24),o.default.font.size(24)],marginBottom:[o.default.font.size(12.5),o.default.font.size(15)]}));t.paragraphClass=h},iSgW:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("J4zp")),a=n("q1tI"),o=i(n("hKI/"));var s=function(){var e=(0,a.useState)(!1),t=(0,r.default)(e,2),n=t[0],i=t[1];return(0,a.useEffect)((function(){var e=(0,o.default)((function(){i(Boolean(window.scrollY))}),1e3,{leading:!0});return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]),n};t.default=s},iYU6:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.longHorizontalRule=t.topperClass=void 0;var r,a,o=n("Jqp9"),s=n("lVLo");t.topperClass=(0,o.css)(r||(r=i(["\n  font-family: ",";\n  font-weight: 500;\n  padding-top: 24px;\n  padding-bottom: 16px;\n  text-align: center;\n  line-height: 1.2;\n  font-size: 15px;\n  color: ",";\n"],["\n  font-family: ",";\n  font-weight: 500;\n  padding-top: 24px;\n  padding-bottom: 16px;\n  text-align: center;\n  line-height: 1.2;\n  font-size: 15px;\n  color: ",";\n"])),s.fonts.franklin,s.colors.black),t.longHorizontalRule=(0,o.css)(a||(a=i(["\n  border: 0;\n  background-color: ",";\n  height: 1px;\n  width: 100%;\n"],["\n  border: 0;\n  background-color: ",";\n  height: 1px;\n  width: 100%;\n"])),s.colors.lineGrey)},ibW7:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=function(){return r.default.createElement("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none"},r.default.createElement("rect",{width:"26",height:"26",fill:"black",fillOpacity:"0"}),r.default.createElement("mask",{id:"mask1","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"6",y:"9",width:"14",height:"9"},r.default.createElement("path",{d:"M18.2918 17.8262L13.3193 12.8645L8.34684 17.8262L6.81934 16.2987L13.3193 9.79867L19.8193 16.2987L18.2918 17.8262Z",fill:"white"})),r.default.createElement("g",{mask:"url(#mask1)"},r.default.createElement("rect",{width:"26",height:"26",fill:"black",fillOpacity:"0"}),r.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 0H26V26H0V0Z",fill:"black",fillOpacity:"0.54"})))};a.displayName="UpArrow";var o=a;t.default=o},icOM:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("Jqp9")),o=n("ybjx"),s=function(e){var t=e.className,n=e.bio,i=n.displayName,s=n.bioUrl,l=(null==n?void 0:n.legacyData).htmlShortBiography;if(!s||!i||!l)return null;var c,u,d,p;return r.default.createElement(o.Bio,{className:(0,a.cx)(t)},r.default.createElement("div",{className:o.moreAboutClass,dangerouslySetInnerHTML:{__html:((c=l.replace("&#8217;","")).includes(i)&&(c=c.replace(i,"<span class=".concat(o.authorNameClass,'><a class="authorPageLinkClass overrideLinkStyles" href=').concat(s,">").concat(i,"</a></span>"))),u=c,d="<span class=".concat(o.moreAboutClass,'> <a class="authorPageLinkClass overrideLinkStyles" href=').concat(s,">More about ").concat(i,"</a></span>"),p=u.trim().split("</p>"),p.splice(p.length-1,0,d),p.push("</p>"),p.join(""))}}))};s.displayName="Bio",s.defaultProps={bio:null,className:void 0};var l=s;t.default=l},icfT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mediaFigureContainerSizeStyles=t.default=void 0;var i=n("Jqp9"),r=(0,i.themeFn)("mediaSize",{small:function(e){return(0,i.css)("width:50%;",e.theme.breakpointMap.small,"{width:300px;}",e.theme.breakpointMap.medium,"{max-width:300px;}",e.theme.breakpointMap.mediumLarge,"{width:300px;}",e.theme.breakpointMap.extraLarge,"{width:300px;}")}});t.mediaFigureContainerSizeStyles=r;var a=(0,i.styled)("div",{target:"erfvjey0"})(r,";");t.default=a},ifco:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPreferredSection=void 0;t.getPreferredSection=function(e){var t=e.section,n=e.subsection;return"Opinion"!==(null==t?void 0:t.displayName)&&n&&""!==(null==n?void 0:n.displayName)?n:t}},iz2t:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return p}));var i=n("lSNA"),r=n.n(i),a=n("cr+I"),o=n.n(a),s=n("06b3"),l=n("+ClL");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=["myaccount.stg.nytimes.com","myaccount.nytimes.com","www.stg.nytimes.com","www.nytimes.com"];if(""===e)return Object(l.a)(new Error("Failed to addExitUri: called with an empty URL")),e;var n=["/subscription","/crosswords"];try{var i=new URL(e);if(!t.includes(i.hostname)&&!n.includes(i.pathname))return e;var r=o.a.parseUrl(e,{parseFragmentIdentifier:!0});return o.a.stringifyUrl(u(u({},r),{},{query:u(u({},r.query),{},{EXIT_URI:window.encodeURIComponent(window.location.href)})}))}catch(t){Object(l.a)(new Error("Failed to addExitUri: ".concat(t.toString(),": ").concat(e)))}return e},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=s.a.load("nyt-a");if(void 0===t||!t)return e;var n=o.a.parseUrl(e,{parseFragmentIdentifier:!0});return o.a.stringifyUrl(u(u({},n),{},{query:u(u({},n.query),{},{agentid:t})}))}},"j/0i":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.darkModeMediaInsetClass=t.TimesTagsPropType=void 0;var r=n("Jqp9"),a=n("3sMT"),o=i(n("17x9")),s=i(n("wXC7")),l="\n    background-color: ".concat(a.light.colors.background.primary.hsla,";\n\n    img {\n      transform: scale(0.9);\n    }\n"),c=function(e){var t=e.timesTags;return(0,r.css)(function(e){return null==e?void 0:e.some((function(e){return"internal-dark-mode-incompatible-image"===(null==e?void 0:e.vernacular)}))}(t)&&s.default.darkColorPreference(l))};t.darkModeMediaInsetClass=c;var u=(0,r.styled)("picture",{target:"e18g54np0"})(c),d=o.default.arrayOf(o.default.shape({vernacular:o.default.string}));t.TimesTagsPropType=d;var p=u;t.default=p},j1Z1:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.periodText=t.button=t.price=t.ctaContainer=t.header=t.standardDockHeading=t.mainContent=t.headerLogo=t.headerText=t.standardDockHeaderText=void 0;var r,a,o,s,l,c,u,d,p,f,m=n("Jqp9"),h=n("lVLo");t.standardDockHeaderText=(0,m.css)(r||(r=i(["\n  font-family: ",";\n  font-size: 13px;\n  font-weight: ",";\n  line-height: 15px;\n  margin: auto 0;\n  margin-left: 20px;\n  padding: 10px 0;\n\n  & > b {\n    font-weight: ",";\n  }\n\n  @media (min-width: ","px) {\n    font-size: 15px;\n    line-height: 17px;\n  }\n\n  @media (min-width: ","px) {\n    margin: 0;\n    padding-left: 130px;\n  }\n"],["\n  font-family: ",";\n  font-size: 13px;\n  font-weight: ",";\n  line-height: 15px;\n  margin: auto 0;\n  margin-left: 20px;\n  padding: 10px 0;\n\n  & > b {\n    font-weight: ",";\n  }\n\n  @media (min-width: ","px) {\n    font-size: 15px;\n    line-height: 17px;\n  }\n\n  @media (min-width: ","px) {\n    margin: 0;\n    padding-left: 130px;\n  }\n"])),h.fonts.franklin,h.fontWeights.normal,h.fontWeights.bold,h.widths.verySmall,h.widths.mediumLarge),t.headerText=(0,m.css)(a||(a=i(["\n  font-family: ",";\n  font-size: 13px;\n  font-weight: ",";\n  line-height: 15px;\n  margin: auto 0;\n  margin-left: 20px;\n  padding: 10px 0;\n\n  & > b {\n    font-weight: ",";\n  }\n\n  @media (min-width: ","px) {\n    font-size: 15px;\n    line-height: 17px;\n  }\n\n  @media (min-width: ","px) {\n    margin: 0;\n    padding-right: 65px;\n  }\n"],["\n  font-family: ",";\n  font-size: 13px;\n  font-weight: ",";\n  line-height: 15px;\n  margin: auto 0;\n  margin-left: 20px;\n  padding: 10px 0;\n\n  & > b {\n    font-weight: ",";\n  }\n\n  @media (min-width: ","px) {\n    font-size: 15px;\n    line-height: 17px;\n  }\n\n  @media (min-width: ","px) {\n    margin: 0;\n    padding-right: 65px;\n  }\n"])),h.fonts.franklin,h.fontWeights.normal,h.fontWeights.bold,h.widths.verySmall,h.widths.mediumLarge),t.headerLogo=(0,m.css)(o||(o=i(["\n  margin-bottom: 4px;\n  @media (min-width: ","px) {\n    & > svg {\n      width: 131px;\n      height: 24px;\n    }\n  }\n"],["\n  margin-bottom: 4px;\n  @media (min-width: ","px) {\n    & > svg {\n      width: 131px;\n      height: 24px;\n    }\n  }\n"])),h.widths.mediumLarge),t.mainContent=(0,m.css)(s||(s=i(["\n  font-family: ",";\n  display: flex;\n  align-items: center;\n  background-color: ",";\n  font-family: ",";\n  max-width: 240px;\n  border-radius: 8px;\n  height: 174px;\n  padding: 20px;\n  flex-direction: column;\n  margin: 0 auto 20px;\n  align-self: flex-start;\n\n  @media (min-width: ","px) {\n    margin: 0 20px 20px 20px;\n    align-self: center;\n    max-width: 400px;\n    width: calc(100% - 80px);\n  }\n\n  @media (min-width: ","px) {\n    flex-direction: row;\n    gap: 40px;\n    padding: 20px 40px;\n    max-width: 808px;\n    width: calc(100% - 114px);\n    height: 114px;\n    justify-content: space-around;\n  }\n\n  @media (min-width: ","px) {\n    justify-content: center;\n    max-width: 1140px;\n  }\n  @media (min-width: ","px) {\n    max-width: 1040px;\n    gap: 80px;\n  }\n"],["\n  font-family: ",";\n  display: flex;\n  align-items: center;\n  background-color: ",";\n  font-family: ",";\n  max-width: 240px;\n  border-radius: 8px;\n  height: 174px;\n  padding: 20px;\n  flex-direction: column;\n  margin: 0 auto 20px;\n  align-self: flex-start;\n\n  @media (min-width: ","px) {\n    margin: 0 20px 20px 20px;\n    align-self: center;\n    max-width: 400px;\n    width: calc(100% - 80px);\n  }\n\n  @media (min-width: ","px) {\n    flex-direction: row;\n    gap: 40px;\n    padding: 20px 40px;\n    max-width: 808px;\n    width: calc(100% - 114px);\n    height: 114px;\n    justify-content: space-around;\n  }\n\n  @media (min-width: ","px) {\n    justify-content: center;\n    max-width: 1140px;\n  }\n  @media (min-width: ","px) {\n    max-width: 1040px;\n    gap: 80px;\n  }\n"])),h.fonts.franklin,h.colors.gamesSaleLightYellow,h.fonts.franklin,h.widths.verySmall,h.widths.medium,h.widths.mediumLarge,h.widths.xLarge),t.standardDockHeading=(0,m.css)(l||(l=i(["\n  @media (min-width: ","px) {\n    & > div {\n      & > div {\n        padding-left: 0;\n      }\n    }\n  }\n"],["\n  @media (min-width: ","px) {\n    & > div {\n      & > div {\n        padding-left: 0;\n      }\n    }\n  }\n"])),h.widths.mediumLarge),t.header=(0,m.css)(c||(c=i(["\n  font-family: ",";\n  font-size: 12px;\n  font-weight: ",";\n  line-height: 21px;\n  text-align: center;\n  color: ",";\n  margin: 0;\n\n  @media (min-width: ","px) {\n    font-size: 14px;\n  }\n\n  @media (min-width: ","px) {\n    width: 210px;\n  }\n\n  @media (min-width: ","px) {\n    width: 280px;\n  }\n"],["\n  font-family: ",";\n  font-size: 12px;\n  font-weight: ",";\n  line-height: 21px;\n  text-align: center;\n  color: ",";\n  margin: 0;\n\n  @media (min-width: ","px) {\n    font-size: 14px;\n  }\n\n  @media (min-width: ","px) {\n    width: 210px;\n  }\n\n  @media (min-width: ","px) {\n    width: 280px;\n  }\n"])),h.fonts.franklin,h.fontWeights.normal,h.colors.veryDarkGrey,h.widths.verySmall,h.widths.medium,h.widths.mediumLarge),t.ctaContainer=(0,m.css)(u||(u=i(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n\n  @media (min-width: ","px) {\n    flex: 0;\n  }\n"],["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n\n  @media (min-width: ","px) {\n    flex: 0;\n  }\n"])),h.widths.medium),t.price=(0,m.css)(d||(d=i(["\n  font-family: ",";\n  margin: 10px 0 8px 0;\n  text-align: center;\n  font-size: 18px;\n  font-weight: ",";\n  line-height: 22px;\n"],["\n  font-family: ",";\n  margin: 10px 0 8px 0;\n  text-align: center;\n  font-size: 18px;\n  font-weight: ",";\n  line-height: 22px;\n"])),h.fonts.franklin,h.fontWeights.bold),t.button=(0,m.css)(p||(p=i(["\n  font-family: ",";\n  text-decoration: none;\n  font-size: 14px;\n  font-weight: ",";\n  line-height: 21px;\n  color: ",";\n  background-color: ",";\n  margin-top: 10px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  text-align: center;\n  border-radius: 3px;\n  cursor: pointer;\n  width: calc(100% - 20px);\n  height: 31px;\n  padding: 8px 10px;\n  margin: 0;\n  letter-spacing: -0.05px;\n  flex: 1;\n\n  @media (min-width: ","px) {\n    width: 202px;\n    align-self: center;\n  }\n"],["\n  font-family: ",";\n  text-decoration: none;\n  font-size: 14px;\n  font-weight: ",";\n  line-height: 21px;\n  color: ",";\n  background-color: ",";\n  margin-top: 10px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  text-align: center;\n  border-radius: 3px;\n  cursor: pointer;\n  width: calc(100% - 20px);\n  height: 31px;\n  padding: 8px 10px;\n  margin: 0;\n  letter-spacing: -0.05px;\n  flex: 1;\n\n  @media (min-width: ","px) {\n    width: 202px;\n    align-self: center;\n  }\n"])),h.fonts.franklin,h.fontWeights.semiBold,h.colors.white,h.colors.black,h.widths.medium),t.periodText=(0,m.css)(f||(f=i(["\n  font-family: ",";\n  font-size: 12px;\n  font-weight: ",";\n  line-height: 18px;\n  text-align: center;\n  margin: 12px 0 5px 0;\n"],["\n  font-family: ",";\n  font-size: 12px;\n  font-weight: ",";\n  line-height: 18px;\n  text-align: center;\n  margin: 12px 0 5px 0;\n"])),h.fonts.franklin,h.fontWeights.normal)},jFEr:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return a}));var i=8,r=100,a=3e3},jOYC:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return g}));var i=n("Jqp9"),r=n("wXC7"),a=n.n(r),o=n("nxVm"),s=n.n(o),l=n("TvEp"),c=n.n(l),u=n("dmwf"),d=n.n(u),p=Object(i.css)("width:","calc(100% - 40px)",";max-width:",a.a.breakpoint.textBodyWidth,"px;margin-left:","20px",";margin-right:","20px",";",a.a.breakpoint.small,"{margin-left:auto;margin-right:auto;}",a.a.breakpoint.mediumLarge,"{width:",a.a.breakpoint.textBodyWidth,"px;}",a.a.breakpoint.extraLarge,"{width:",a.a.breakpoint.textBodyWidthExtralarge,"px;max-width:",a.a.breakpoint.textBodyWidthExtralarge,"px;}",s.a,";"),f={left:Object(i.css)("text-align:left;"),center:Object(i.css)("text-align:center;"),right:Object(i.css)("text-align:right;")},m=Object(i.css)("margin-left:","20px",";margin-right:","20px",";width:","calc(100% - 40px)",";max-width:",a.a.breakpoint.textBodyWidth,"px;&:first-child{margin-top:0;}&:last-child{margin-bottom:0;}&",c.a,"{&:last-child{margin-bottom:0.75rem;}}&",d.a,"{&:first-child{margin-top:0.8125rem;}}",a.a.breakpoint.small,"{margin-left:auto;margin-right:auto;}",a.a.breakpoint.mediumLarge,"{margin-left:0;margin-right:0;width:100%;max-width:100%;&",d.a,"{&:first-child{margin-top:1.1875rem;}}}",s.a,";"),h=Object(i.css)("width:100%;margin-left:0;",a.a.breakpoint.small,"{width:","calc(100% - 40px)",";max-width:unset;}",a.a.breakpoint.mediumLarge,"{width:100%;max-width:unset;}"),g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,i="15px",r=20,a=n-1,o=a*t+2*r;return"calc(".concat(e," * (((100vw - ").concat(o,"px) - ").concat(i,") / ").concat(n,") + (").concat(e," - 1) * ").concat(t,"px)")};t.b={layout:{feature:p,news:p,opinion:p,magazine:p,"t-magazine":p,textAlign:f,nonInterrupterTextElementBaseClass:m,largeWidthClass:h},grid:{pageMargin:"20px",mobileFullWidth:"calc(100% - 40px)"}}},jVmZ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getSectionWithCanonicalUrl=void 0;var r=i(n("lSNA")),a=n("EYBZ");function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.getSectionWithCanonicalUrl=function(e,t){return s(s({},t),{},{url:e?(0,a.getSectionUrlFromCollections)(t,e):t.url})}},jcbH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default='\nfragment onCardDeckCarousel on Carousel {\n  __typename\n  data\n  cards {\n    key\n    data\n    text {\n      key\n      content {\n        ... on TextInline {\n          text\n          __typename\n        }\n      }\n    }\n    assets {\n      ... on CreativeWork {\n        ... on Published {\n          uri\n          url\n          sourceId\n          __typename\n        }\n        ... on Image {\n          id\n          uri\n          credit\n          sourceId\n          altText\n          crops(\n            renditionNames: [\n              "videoSixteenByNine1050"\n              "videoSixteenByNine600"\n              "threeByTwoMediumAt2X"\n              "verticalTwoByThree735"\n              "square640"\n              "threeByTwoMediumAt2X"\n            ]\n          ) {\n            name\n            renditions {\n              name\n              url\n              width\n              height\n            }\n          }\n        }\n        ... on Video {\n          id\n          uri\n          advertisingProperties {\n            sensitivity\n          }\n          bylines {\n            renderedRepresentation\n          }\n          transcript\n          duration\n          renditions {\n            aspectRatio\n            type\n            url\n            width\n            height\n          }\n          isCinemagraph\n          promotionalMedia {\n            ... on Image {\n              id\n              credit\n              crops(\n                renditionNames: [\n                  "videoSixteenByNine1050"\n                  "videoSixteenByNine600"\n                  "threeByTwoMediumAt2X"\n                  "verticalTwoByThree735"\n                  "square640"\n                  "threeByTwoMediumAt2X"\n                ]\n              ) {\n                name\n                renditions {\n                  name\n                  url\n                  width\n                  height\n                }\n              }\n            }\n          }\n          summary\n        }\n      }\n    }\n  }\n}\n'},jdN1:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-dealbook-fc342092e07d3e54c5b740508ec9b956.webp"},jt2X:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("lSNA"),r=n.n(i),a=n("q1tI"),o=n("txtk");function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(){return l(l({data:null},Object(a.useContext)(o.a)),{},{loading:!1})}},kBkf:function(e,t,n){"use strict";n.r(t),n.d(t,"internationalData",(function(){return P})),n.d(t,"IntDataProvider",(function(){return M}));var i=n("q1tI"),r=n.n(i),a=n("+fSA"),o=n("wNrk"),s=n("a6hj"),l=n("sdlZ"),c=n("pRWC"),u=n("fQFh"),d=n("jdN1"),p=n("Vcia"),f=n("BIcR"),m=n("+FKv"),h=n("0fzg"),g=n("NeZs"),y=n("/bvS"),v=n("n7ID"),b=n("69/w"),_=n("uTOv"),w=n("0l0s"),x=n("Ycuk"),k=n("urXL"),O=n("tNL+"),E=n("r3VM"),T=n("gVNr"),C=n("3TWG"),S=n("0s5G"),P=[{url:"https://www.nytimes.com/international/section/us",name:"U.S.",dropdown:[{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"U.S.",link:"https://www.nytimes.com/international/section/us"},{copy:"Politics",link:"https://www.nytimes.com/international/section/politics"},{copy:"New York",link:"https://www.nytimes.com/international/section/nyregion"},{copy:"California",link:"https://www.nytimes.com/column/california-today"},{copy:"Education",link:"https://www.nytimes.com/international/section/education"},{copy:"Health",link:"https://www.nytimes.com/international/section/health"},{copy:"Obituaries",link:"https://www.nytimes.com/international/section/obituaries"},{copy:"Science",link:"https://www.nytimes.com/international/section/science"}]},{columnWidth:2,hamburgerColumnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"Climate",link:"https://www.nytimes.com/international/section/climate"},{copy:"Sports",link:"https://www.nytimes.com/international/section/sports"},{copy:"Business",link:"https://www.nytimes.com/international/section/business"},{copy:"Tech",link:"https://www.nytimes.com/international/section/technology"},{copy:"The Upshot",link:"https://www.nytimes.com/international/section/upshot"},{copy:"The Magazine",link:"https://www.nytimes.com/international/section/magazine"}]},{columnWidth:4,heading:"U.S. Politics",type:"links",style:{marginLeft:"2rem"},links:[{copy:"2024 Elections",link:"https://www.nytimes.com/news-event/2024-election"},{copy:"Supreme Court",link:"https://www.nytimes.com/topic/organization/us-supreme-court"},{copy:"Congress",link:"https://www.nytimes.com/topic/organization/us-congress"},{copy:"Biden Administration",link:"https://www.nytimes.com/spotlight/joe-biden"}]},{columnWidth:4,heading:"Top Stories",type:"links",links:[{copy:"Trump Investigations",link:"https://www.nytimes.com/news-event/donald-trump-investigations"},{copy:"Immigration",link:"https://www.nytimes.com/news-event/immigration-us"},{copy:"Abortion",link:"https://www.nytimes.com/spotlight/abortion-news"},{copy:"The Eric Adams Administration",link:"https://www.nytimes.com/spotlight/eric-adams-mayor-nyc"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"The Morning",description:"Make sense of the days news and ideas.",link:"https://www.nytimes.com/newsletters/morning-briefing",thumbnailImage:x.a},{title:"The Upshot",description:"Analysis that explains politics, policy and everyday life.",link:"https://www.nytimes.com/newsletters/upshot",thumbnailImage:E.a}]},{type:"hamburgerSpacer",hamburgerColumnWidth:1,columnWidth:0},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"The Daily",description:"The biggest stories of our time, in 20 minutes a day.",link:"https://www.nytimes.com/column/the-daily",thumbnailImage:"https://static01.nyt.com/images/2017/01/29/podcasts/the-daily-album-art/the-daily-album-art-square320-v5.jpg?quality=75&auto=webp&disable=upscale"},{title:"The Run-Up",description:"On the campaign trail with Astead Herndon.",link:"https://www.nytimes.com/column/election-run-up-podcast",thumbnailBorder:!0,thumbnailImage:"https://static01.nyt.com/images/2022/08/29/podcasts/the-run-up-album-art/the-run-up-album-art-thumbLarge.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/international/section/world",name:"World",dropdown:[{columnWidth:1},{columnWidth:4,hamburgerColumnWidth:5,heading:"Sections",type:"links",innerGridColumnCount:2,columns:[[{copy:"World",link:"https://www.nytimes.com/international/section/world"},{copy:"Africa",link:"https://www.nytimes.com/international/section/world/africa"},{copy:"Americas",link:"https://www.nytimes.com/international/section/world/americas"},{copy:"Asia",link:"https://www.nytimes.com/international/section/world/asia"},{copy:"Australia",link:"https://www.nytimes.com/international/section/world/australia"},{copy:"Canada",link:"https://www.nytimes.com/international/section/world/canada"}],[{copy:"Europe",link:"https://www.nytimes.com/international/section/world/europe"},{copy:"Middle East",link:"https://www.nytimes.com/international/section/world/middleeast"},{copy:"Science",link:"https://www.nytimes.com/international/section/science"},{copy:"Climate",link:"https://www.nytimes.com/international/section/climate"},{copy:"Health",link:"https://www.nytimes.com/international/section/health"},{copy:"Obituaries",link:"https://www.nytimes.com/international/section/obituaries"}]]},{columnWidth:1},{columnWidth:5,heading:"Top Stories",type:"links",links:[{copy:"Israel-Hamas War",link:"https://www.nytimes.com/news-event/israel-hamas-gaza"},{copy:"Russia-Ukraine War",link:"https://www.nytimes.com/news-event/ukraine-russia"}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",items:[{title:"Morning Briefing: Europe",description:"Get what you need to know to start your day.",link:"https://www.nytimes.com/newsletters/morning-briefing-europe",thumbnailImage:p.a},{title:"The Interpreter",description:"Original analysis on the weeks biggest global stories.",link:"https://www.nytimes.com/newsletters/the-interpreter",thumbnailImage:w.a}]},{columnWidth:4,heading:"Newsletters",hideHeading:!0,footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Australia Letter",description:"News, features and opinion for readers in the region.",link:"https://www.nytimes.com/newsletters/australia-letter",thumbnailImage:o.a},{title:"Canada Letter",description:"Backstories and analysis from our Canadian correspondents.",link:"https://www.nytimes.com/newsletters/canada-letter",thumbnailImage:l.a}]}]},{url:"https://www.nytimes.com/international/section/business",name:"Business",dropdown:[{columnWidth:1},{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"Business",link:"https://www.nytimes.com/international/section/business"},{copy:"Tech",link:"https://www.nytimes.com/international/section/technology"},{copy:"Economy",link:"https://www.nytimes.com/international/section/business/economy"},{copy:"Media",link:"https://www.nytimes.com/international/section/business/media"},{copy:"Finance and Markets",link:"https://www.nytimes.com/section/markets-overview"}]},{columnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"DealBook",link:"https://www.nytimes.com/international/section/business/dealbook"},{copy:"Personal Tech",link:"https://www.nytimes.com/international/section/technology/personaltech"},{copy:"Energy Transition",link:"https://www.nytimes.com/international/section/business/energy-environment"},{copy:"Your Money",link:"https://www.nytimes.com/international/section/your-money"}]},{columnWidth:5,heading:"Top Stories",type:"links",links:[{copy:"U.S. Economy",link:"https://www.nytimes.com/news-event/economy-business-us"},{copy:"Stock Market",link:"https://www.nytimes.com/section/markets-overview"},{copy:"Artificial Intelligence",link:"https://www.nytimes.com/spotlight/artificial-intelligence"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"DealBook",description:"The most crucial business and policy news you need to know.",link:"https://www.nytimes.com/newsletters/dealbook",thumbnailImage:d.a}]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Hard Fork",description:"Our tech journalists help you make sense of the rapidly changing tech world.",link:"https://www.nytimes.com/column/hard-fork",thumbnailImage:"https://static01.nyt.com/images/2022/09/28/podcasts/hard-fork-album-art/hard-fork-album-art-square320-v2.png?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/international/section/arts",name:"Arts",dropdown:[{columnWidth:1},{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"Today's Arts",link:"https://www.nytimes.com/international/section/arts"},{copy:"Books",link:"https://www.nytimes.com/international/section/books"},{copy:"Best Sellers",link:"https://www.nytimes.com/books/best-sellers"},{copy:"Dance",link:"https://www.nytimes.com/international/section/arts/dance"},{copy:"Movies",link:"https://www.nytimes.com/international/section/movies"},{copy:"Music",link:"https://www.nytimes.com/international/section/arts/music"}]},{columnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"Television",link:"https://www.nytimes.com/international/section/arts/television"},{copy:"Theater",link:"https://www.nytimes.com/international/section/theater"},{copy:"Pop Culture",link:"https://www.nytimes.com/spotlight/pop-culture"},{copy:"T Magazine",link:"https://www.nytimes.com/international/section/t-magazine"},{copy:"Visual Arts",link:"https://www.nytimes.com/international/section/arts/design"}]},{columnWidth:5,heading:"Recommendations",type:"links",links:[{copy:"Best of 2023",link:"https://www.nytimes.com/spotlight/best-of"},{copy:"Award Season",link:"https://www.nytimes.com/news-event/awards-season"},{copy:"Critics Picks",link:"https://www.nytimes.com/spotlight/critics-picks"},{copy:"What to Read",link:"https://www.nytimes.com/spotlight/books-to-read"},{copy:"What to Watch",link:"https://www.nytimes.com/spotlight/what-to-watch"},{copy:"What to Listen To",link:"https://www.nytimes.com/column/playlist"},{copy:"5 Minutes to Make You Love Music",link:"https://www.nytimes.com/interactive/2023/10/27/arts/music/music-fivemins-collection.html"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Read Like the Wind",description:"Book recommendations from our critics.",link:"https://www.nytimes.com/newsletters/read-like-the-wind",thumbnailImage:b.a},{title:"Watching",description:"Streaming TV and movie recommendations.",link:"https://www.nytimes.com/newsletters/watching",thumbnailImage:C.a}]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Book Review",description:"The podcast that takes you inside the literary world.",link:"https://www.nytimes.com/column/book-review-podcast",thumbnailImage:"https://static01.nyt.com/images/2018/03/27/books/book-review-album-art-v2/book-review-album-art-v2-thumbLarge-v3.jpg?quality=75&auto=webp&disable=upscale"},{title:"Popcast",description:"Pop music news, new songs and albums, and artists of note.",link:"https://www.nytimes.com/column/popcast-pop-music-podcast",thumbnailImage:"https://static01.nyt.com/images/2011/05/20/multimedia/music-popcast/music-popcast-thumbLarge-v3.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/spotlight/lifestyle",name:"Lifestyle",dropdown:[{columnWidth:1},{columnWidth:2,heading:"Sections",type:"links",links:[{copy:"Lifestyle",link:"https://www.nytimes.com/spotlight/lifestyle"},{copy:"Well",link:"https://www.nytimes.com/international/section/well"},{copy:"Travel",link:"https://www.nytimes.com/international/section/travel"},{copy:"Style",link:"https://www.nytimes.com/international/section/style"},{copy:"Real Estate",link:"https://www.nytimes.com/international/section/realestate"},{copy:"Food",link:"https://www.nytimes.com/international/section/food"}]},{columnWidth:3,heading:"Sections",hideHeading:!0,type:"links",links:[{copy:"Fashion",link:"https://www.nytimes.com/international/section/fashion"},{copy:"Love",link:"https://www.nytimes.com/international/section/fashion/weddings"},{copy:"Your Money",link:"https://www.nytimes.com/international/section/your-money"},{copy:"Personal Tech",link:"https://www.nytimes.com/international/section/technology/personaltech"},{copy:"T Magazine",link:"https://www.nytimes.com/international/section/t-magazine"}]},{columnWidth:3,heading:"Columns",type:"links",links:[{copy:"Modern Love",link:"https://www.nytimes.com/column/modern-love"},{copy:"The Hunt",link:"https://www.nytimes.com/column/the-hunt"},{copy:"Social Qs",link:"https://www.nytimes.com/column/social-qs"},{copy:"The Ethicist",link:"https://www.nytimes.com/column/the-ethicist"}]},{columnWidth:2,heading:"Well",type:"links",links:[{copy:"Eat",link:"https://www.nytimes.com/international/section/well/eat"},{copy:"Move",link:"https://www.nytimes.com/international/section/well/move"},{copy:"Mind",link:"https://www.nytimes.com/international/section/well/mind"},{copy:"Family",link:"https://www.nytimes.com/international/section/well/family"},{copy:"Live",link:"https://www.nytimes.com/international/section/well/live"},{copy:"Ask Well",link:"https://www.nytimes.com/column/ask-well"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Open Thread",description:"The latest news on what we wear, by our chief fashion critic.",link:"https://www.nytimes.com/newsletters/open-thread-fashion",thumbnailImage:y.a},{title:"Love Letter",description:"Real stories of relationship highs, lows and woes.",link:"https://www.nytimes.com/newsletters/love-letter",thumbnailImage:g.a}]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Modern Love",description:"The complicated love lives of real people.",link:"https://www.nytimes.com/column/modern-love-podcast",thumbnailImage:"https://static01.nyt.com/images/2020/09/21/podcasts/modernlove-logo/modernlove-logo-thumbLarge-v3.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/international/section/opinion",name:"Opinion",dropdown:[{columnWidth:1},{columnWidth:2,hamburgerColumnWidth:3,heading:"Sections",type:"links",links:[{copy:"Opinion",link:"https://www.nytimes.com/international/section/opinion"},{copy:"Guest Essays",link:"https://www.nytimes.com/international/section/opinion/contributors"},{copy:"Editorials",link:"https://www.nytimes.com/international/section/opinion/editorials"},{copy:"Op-Docs",link:"https://www.nytimes.com/column/op-docs"},{copy:"Videos",link:"https://www.nytimes.com/spotlight/opinion-video"},{copy:"Letters",link:"https://www.nytimes.com/international/section/opinion/letters"}]},{columnWidth:2,hamburgerColumnWidth:3,heading:"Topics",type:"links",links:[{copy:"Politics",link:"https://www.nytimes.com/international/section/opinion/politics"},{copy:"World",link:"https://www.nytimes.com/international/section/opinion/international-world"},{copy:"Business",link:"https://www.nytimes.com/international/section/opinion/business-economics"},{copy:"Tech",link:"https://www.nytimes.com/international/section/opinion/technology"},{copy:"Climate",link:"https://www.nytimes.com/international/section/opinion/environment"},{copy:"Health",link:"https://www.nytimes.com/international/section/opinion/health"},{copy:"Culture",link:"https://www.nytimes.com/international/section/opinion/culture"}]},{columnWidth:1},{columnWidth:9,heading:"Columnists",type:"links",innerGridColumnCount:3,columns:[[{copy:"Charles M. Blow",link:"https://www.nytimes.com/by/charles-m-blow"},{copy:"Jamelle Bouie",link:"https://www.nytimes.com/by/jamelle-bouie"},{copy:"David Brooks",link:"https://www.nytimes.com/by/david-brooks"},{copy:"Gail Collins",link:"https://www.nytimes.com/by/gail-collins"},{copy:"Ross Douthat",link:"https://www.nytimes.com/by/ross-douthat"},{copy:"Maureen Dowd",link:"https://www.nytimes.com/by/maureen-dowd"},{copy:"David French",link:"https://www.nytimes.com/by/david-french"}],[{copy:"Thomas L. Friedman",link:"https://www.nytimes.com/by/thomas-l-friedman"},{copy:"Michelle Goldberg",link:"https://www.nytimes.com/by/michelle-goldberg"},{copy:"Ezra Klein",link:"https://www.nytimes.com/by/ezra-klein"},{copy:"Nicholas Kristof",link:"https://www.nytimes.com/by/nicholas-kristof"},{copy:"Paul Krugman",link:"https://www.nytimes.com/by/paul-krugman"},{copy:"Carlos Lozada",link:"https://www.nytimes.com/by/carlos-lozada"}],[{copy:"Tressie McMillan Cottom",link:"https://www.nytimes.com/by/tressie-mcmillan-cottom"},{copy:"Pamela Paul",link:"https://www.nytimes.com/by/pamela-paul"},{copy:"Lydia Polgreen",link:"https://www.nytimes.com/by/lydia-polgreen"},{copy:"Bret Stephens",link:"https://www.nytimes.com/by/bret-stephens"},{copy:"Zeynep Tufekci",link:"https://www.nytimes.com/by/zeynep-tufekci"}]]},{columnWidth:4,heading:"Podcasts",footer:{copy:"See all podcasts",link:"https://www.nytimes.com/spotlight/podcasts"},type:"thumbnailContent",items:[{title:"Matter of Opinion",description:"Thoughts, aloud. With Michelle Cottle, Ross Douthat, Carlos Lozada and Lydia Polgreen.",link:"https://www.nytimes.com/column/matter-of-opinion",thumbnailImage:"https://static01.nyt.com/images/2023/05/08/podcasts/matter-of-opinion-album-art/matter-of-opinion-album-art-thumbLarge-v2.jpg?quality=75&auto=webp&disable=upscale"},{title:"The Ezra Klein Show",description:"Discussions of ideas that matter, plus book recommendations.",link:"https://www.nytimes.com/column/ezra-klein-podcast",thumbnailImage:"https://static01.nyt.com/images/2021/01/12/podcasts/ezra-klein-album-art/ezra-klein-album-art-square320-v2.jpg?quality=75&auto=webp&disable=upscale"}]}]},{url:"https://www.nytimes.com/spotlight/podcasts",name:"Audio",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Audio",type:"brand",link:"https://www.nytimes.com/spotlight/podcasts",description:"Podcasts and narrated articles covering news, tech, culture and more.",footer:{copy:"Download the Audio app on iOS.",link:"https://www.nytimes.com/audio/app"}},{columnWidth:6,heading:"Listen",type:"links",innerGridColumnCount:2,footer:{copy:"See all audio",link:"https://www.nytimes.com/spotlight/podcasts"},columns:[[{copy:"The Headlines",link:"https://www.nytimes.com/column/the-headlines"},{copy:"The Daily",link:"https://www.nytimes.com/column/the-daily"},{copy:"Hard Fork",link:"https://www.nytimes.com/column/hard-fork"},{copy:"The Ezra Klein Show",link:"https://www.nytimes.com/column/ezra-klein-podcast"},{copy:"Matter of Opinion",link:"https://www.nytimes.com/column/matter-of-opinion"},{copy:"Serial Productions",link:"https://www.nytimes.com/interactive/2022/podcasts/serial-productions.html"}],[{copy:"The Book Review Podcast",link:"https://www.nytimes.com/column/book-review-podcast"},{copy:"Modern Love",link:"https://www.nytimes.com/column/modern-love-podcast"},{copy:"The Run-Up",link:"https://www.nytimes.com/column/election-run-up-podcast"},{copy:"Popcast",link:"https://www.nytimes.com/column/popcast-pop-music-podcast"},{copy:"Reporter Reads",link:"https://www.nytimes.com/spotlight/reporter-reads"},{copy:"The Sunday Read",link:"https://www.nytimes.com/spotlight/the-sunday-read"}]]},{columnWidth:4,heading:"Featured",type:"thumbnailContent",items:[{title:"The Headlines",description:"Your morning listen. Top stories, in 5 minutes.",link:"https://www.nytimes.com/column/the-headlines",thumbnailImage:"https://static01.nyt.com/images/2022/10/12/podcasts/headlines-albumartwork-audioapp-2/headlines-albumartwork-audioapp-2-thumbLarge.png?quality=75&auto=webp&disable=upscale"},{title:"The Kids of Rutherford County",description:"A series about how one county illegally jailed children.",link:"https://www.nytimes.com/2023/10/19/podcasts/serial-kids-rutherford-county.html",thumbnailImage:_.a},{title:"Reporter Reads",description:"Recent articles read by the reporters behind them.",link:"https://www.nytimes.com/spotlight/reporter-reads",thumbnailImage:O.a}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},items:[{title:"Audio",description:"Our editors share their favorite listens from the New York Times Audio app.",link:"https://www.nytimes.com/newsletters/audio",thumbnailImage:a.a}]}]},{url:"https://www.nytimes.com/crosswords",name:"Games",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Games",type:"brand",link:"https://www.nytimes.com/crosswords",description:"Word games, logic puzzles and crosswords, including an extensive archive."},{columnWidth:3,heading:"Play",type:"linksWithIcons",links:[{copy:"Spelling Bee",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/spelling-bee.svg",link:"https://www.nytimes.com/puzzles/spelling-bee"},{copy:"The Mini Crossword",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/mini.svg",link:"https://www.nytimes.com/crosswords/game/mini"},{copy:"Wordle",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/wordle.svg",link:"https://www.nytimes.com/games/wordle/index.html"},{copy:"The Crossword",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/daily.svg",link:"https://www.nytimes.com/crosswords/game/daily/"},{copy:"Vertex",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/vertex.svg",link:"https://www.nytimes.com/puzzles/vertex"}]},{columnWidth:3,heading:"Play",hideHeading:!0,type:"linksWithIcons",links:[{copy:"Connections",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/connections.svg",link:"https://www.nytimes.com/games/connections"},{copy:"Sudoku",icon:"https://www.nytimes.com/games-assets/v2/assets/expansion-games/sudoku-card-icon.svg",link:"https://www.nytimes.com/puzzles/sudoku"},{copy:"Letter Boxed",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/letter-boxed.svg",link:"https://www.nytimes.com/puzzles/letter-boxed"},{copy:"Tiles",icon:"https://www.nytimes.com/games-assets/v2/assets/icons/tiles.svg",link:"https://www.nytimes.com/puzzles/tiles"}]},{columnWidth:4,heading:"Community",type:"links",links:[{copy:"Spelling Bee Forum",link:"https://www.nytimes.com/spotlight/spelling-bee-forum"},{copy:"Wordplay Column",link:"https://www.nytimes.com/spotlight/daily-crossword-column"},{copy:"Wordle Review",link:"https://www.nytimes.com/spotlight/wordle-review"},{copy:"Submit a Crossword",link:"https://www.nytimes.com/article/submit-crossword-puzzles-the-new-york-times.html"},{copy:"Meet Our Crossword Constructors",link:"https://www.nytimes.com/spotlight/puzzle-making"},{copy:"Mini to Maestro",link:"https://www.nytimes.com/2022/09/19/crosswords/mini-to-maestro-part-1.html"},{copy:"Wordlebot",link:"https://www.nytimes.com/interactive/2022/upshot/wordle-bot.html"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"Gameplay",description:"Puzzles, brain teasers, solving tips and more.",link:"https://www.nytimes.com/newsletters/gameplay",thumbnailImage:h.a}]}]},{url:"https://cooking.nytimes.com/",name:"Cooking",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Cooking",type:"brand",link:"https://cooking.nytimes.com/",description:"Recipes, advice and inspiration for everyday cooking, special occasions and more."},{columnWidth:3,hamburgerColumnWidth:4,heading:"Recipes",type:"links",innerGridColumnCount:2,columns:[[{copy:"Easy",link:"https://cooking.nytimes.com/topics/easy-recipes"},{copy:"Dinner",link:"https://cooking.nytimes.com/topics/dinner-recipes"},{copy:"Quick",link:"https://cooking.nytimes.com/68861692-nyt-cooking/43843372-quick-recipes"},{copy:"Healthy",link:"https://cooking.nytimes.com/topics/healthy-recipes"},{copy:"Breakfast",link:"https://cooking.nytimes.com/topics/breakfast"}],[{copy:"Vegetarian",link:"https://cooking.nytimes.com/topics/vegetarian"},{copy:"Vegan",link:"https://cooking.nytimes.com/topics/vegan-recipes"},{copy:"Chicken",link:"https://cooking.nytimes.com/topics/our-best-chicken-recipes"},{copy:"Pasta",link:"https://cooking.nytimes.com/topics/our-best-pasta-recipes"},{copy:"Dessert",link:"https://cooking.nytimes.com/topics/desserts"}]]},{columnWidth:3,heading:"Editors' Picks",type:"links",links:[{copy:"Soups and Stews",link:"https://cooking.nytimes.com/68861692-nyt-cooking/638891-best-soup-stew-recipes"},{copy:"Easy Weeknight",link:"https://cooking.nytimes.com/topics/easy-weeknight"},{copy:"Newest Recipes",link:"https://cooking.nytimes.com/68861692-nyt-cooking/32998034-our-newest-recipes"},{copy:"One-Pot Meals",link:"https://cooking.nytimes.com/68861692-nyt-cooking/2370458-one-pot-dinner-recipes"},{copy:"Slow Cooker Recipes",link:"https://cooking.nytimes.com/68861692-nyt-cooking/950138-amazing-slow-cooker-recipes"},{copy:"Comfort Food",link:"https://cooking.nytimes.com/topics/comfort-food"},{copy:"Party Recipes",link:"https://cooking.nytimes.com/topics/entertaining"}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",items:[{title:"The Cooking Newsletter",description:"Culinary inspiration from Sam Sifton and Melissa Clark.",link:"https://www.nytimes.com/newsletters/cooking",thumbnailImage:u.a},{title:"The Veggie",description:"Delicious vegetarian recipes and tips from Tanya Sichynsky.",link:"https://www.nytimes.com/newsletters/the-veggie",thumbnailImage:T.a}]},{columnWidth:4,heading:"Newsletters",hideHeading:!0,type:"thumbnailContent",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},items:[{title:"Five Weeknight Dishes",description:"Dinner ideas for busy people from Emily Weinstein.",link:"https://www.nytimes.com/newsletters/five-weeknight-dishes",thumbnailImage:f.a}]}]},{url:"https://www.nytimes.com/wirecutter/",name:"Wirecutter",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"Wirecutter",type:"brand",link:"https://www.nytimes.com/wirecutter",description:"Reviews and recommendations for thousands of products."},{columnWidth:3,heading:"Reviews",type:"links",links:[{copy:"Kitchen",link:"https://www.nytimes.com/wirecutter/kitchen-dining/"},{copy:"Tech",link:"https://www.nytimes.com/wirecutter/electronics/"},{copy:"Sleep",link:"https://www.nytimes.com/wirecutter/sleep/"},{copy:"Appliances",link:"https://www.nytimes.com/wirecutter/appliances/"},{copy:"Home and Garden",link:"https://www.nytimes.com/wirecutter/home-garden/"},{copy:"Moving",link:"https://www.nytimes.com/wirecutter/make-a-plan/moving/"}]},{columnWidth:3,heading:"Reviews",hideHeading:!0,type:"links",links:[{copy:"Travel",link:"https://www.nytimes.com/wirecutter/travel/"},{copy:"Gifts",link:"https://www.nytimes.com/wirecutter/gifts/"},{copy:"Deals",link:"https://www.nytimes.com/wirecutter/deals/"},{copy:"Baby and Kid",link:"https://www.nytimes.com/wirecutter/baby-kid/"},{copy:"Health and Fitness",link:"https://www.nytimes.com/wirecutter/health-fitness/"}]},{columnWidth:4,heading:"The Best...",type:"links",links:[{copy:"Air Purifier",link:"https://www.nytimes.com/wirecutter/reviews/best-air-purifier/"},{copy:"Electric Toothbrush",link:"https://www.nytimes.com/wirecutter/reviews/best-electric-toothbrush/"},{copy:"Pressure Washer",link:"https://www.nytimes.com/wirecutter/reviews/best-pressure-washer/"},{copy:"Cordless Stick Vacuum",link:"https://www.nytimes.com/wirecutter/reviews/best-cordless-stick-vacuum/"},{copy:"Office Chair",link:"https://www.nytimes.com/wirecutter/reviews/best-office-chair/"},{copy:"Robot Vacuum",link:"https://www.nytimes.com/wirecutter/reviews/best-robot-vacuum/"}]},{columnWidth:4,heading:"Newsletters",footer:{copy:"See all newsletters",link:"https://www.nytimes.com/newsletters"},type:"thumbnailContent",items:[{title:"The Recommendation",description:"The best independent reviews, expert advice and intensively researched deals.",link:"https://www.nytimes.com/newsletters/the-recommendation",thumbnailImage:k.a},{title:"Clean Everything",description:"Step-by-step advice on how to keep everything in your home squeaky clean.",link:"https://www.nytimes.com/newsletters/clean-everything",thumbnailImage:c.a}]}]},{url:"https://theathletic.com/",name:"The Athletic",productType:"standalone",dropdown:[{columnWidth:1},{columnWidth:4,heading:"The Athletic",type:"brand",link:"https://theathletic.com/",description:"Personalized coverage of your sports teams and leagues."},{columnWidth:3,hamburgerColumnWidth:5,heading:"Leagues",type:"links",innerGridColumnCount:2,columns:[[{copy:"NFL",link:"https://theathletic.com/nfl/"},{copy:"MLB",link:"https://theathletic.com/mlb/"},{copy:"NBA",link:"https://theathletic.com/nba/"},{copy:"Premier League",link:"https://theathletic.com/football/premier-league/"},{copy:"NCAAF",link:"https://theathletic.com/college-football/"},{copy:"NCAAM",link:"https://theathletic.com/college-basketball/"},{copy:"NHL",link:"https://theathletic.com/nhl/"}],[{copy:"NCAAW",link:"https://theathletic.com/womens-college-basketball/ "},{copy:"MLS",link:"https://theathletic.com/football/mls/"},{copy:"Formula 1",link:"https://theathletic.com/formula-1/"},{copy:"NWSL",link:"https://theathletic.com/football/nwsl/"},{copy:"Golf",link:"https://theathletic.com/golf/"}]]},{columnWidth:3,heading:"Top Stories",type:"links",links:[{copy:"Must-Read Stories",link:"https://theathletic.com/tag/a1-must-read-stories/"},{copy:"NFL Playoffs",link:"https://theathletic.com/nfl/schedule/"},{copy:"MLB Free Agency",link:"https://theathletic.com/5029170/2023/11/06/free-agents-mlb-list/"}]},{columnWidth:4,heading:"Newsletters",type:"thumbnailContent",items:[{title:"The Pulse",description:"Delivering the top stories in sports, Sunday to Friday.",link:"https://theathletic.com/newsletters/the-pulse",thumbnailImage:v.a},{title:"The Windup",description:"The biggest stories in baseball, by Levi Weaver with Ken Rosenthal.",link:"https://theathletic.com/newsletters/the-windup",thumbnailImage:S.a}]},{columnWidth:4,type:"thumbnailContent",heading:"Newsletters",hideHeading:!0,items:[{title:"The Bounce",description:"Essential NBA news from Zach Harper and Shams Charania.",link:"https://theathletic.com/newsletters/the-bounce",thumbnailImage:s.a},{title:"Full Time",description:"The biggest women's soccer stories, from Emily Olsen, Meg Linehan & Steph Yang",link:"https://theathletic.com/newsletters/full-time",thumbnailImage:m.a}]}]}],M=function(e){var t=e.children;return r.a.Children.only(r.a.cloneElement(t,{data:P}))}},kCKD:function(e,t,n){"use strict";var i=n("gcR/"),r=n.n(i),a=(n("q1tI"),n("wXC7")),o=n.n(a),s=function(e){var t=e.className,n=e.fill;return r()("svg",{"aria-hidden":"true",width:"23",height:"18",viewBox:"0 0 23 18",className:t},void 0,r()("path",{d:"M1.357 17.192a.663.663 0 0 1-.642-.81c1.82-7.955 6.197-12.068 12.331-11.68V1.127a.779.779 0 0 1 .42-.653.726.726 0 0 1 .78.106l8.195 6.986a.81.81 0 0 1 .253.557.82.82 0 0 1-.263.547l-8.196 6.955a.83.83 0 0 1-.779.105.747.747 0 0 1-.42-.663V11.29c-8.418-.905-10.974 5.177-11.08 5.45a.662.662 0 0 1-.6.453Zm10.048-7.26a16.37 16.37 0 0 1 2.314.158.81.81 0 0 1 .642.726v3.02l6.702-5.682-6.702-5.692v2.883a.767.767 0 0 1-.242.536.747.747 0 0 1-.547.18c-4.808-.537-8.364 1.85-10.448 6.922a11.679 11.679 0 0 1 8.28-3.093v.042Z",fill:n,fillRule:"nonzero"}))};s.displayName="ArrowV2",s.defaultProps={className:void 0,fill:o.a.color.black},t.a=s},kIGo:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n("q1tI")),l=n("Jqp9"),c=n("X6oL"),u=o(n("5UIh")),d=a(n("Rpp7")),p=n("syiw"),f=n("HDG5"),m=n("djNW"),h=n("FY2l"),g=n("6gWn"),y=n("bSj6"),v=o(n("XvvG"));function b(e){var t=e.className,n=e.priceClassName,i=e.bauPrice,r=e.price,a=e.frequency,o=e.showOnly;return s.default.createElement("div",{className:t},o&&s.default.createElement("span",null,"Only "),s.default.createElement(v.default,{oldPriceClassname:n,oldPrice:i,currentPrice:"".concat(r," ").concat(a)}))}function _(e){var t=e.bauPrice,n=e.price,i=e.frequency;return s.default.createElement("div",{className:(0,l.cx)(d.dockHeaderWrapper)},s.default.createElement("div",{className:(0,l.cx)(d.dockHeaderHed)},s.default.createElement("span",null,"Gain "),s.default.createElement("span",{className:d.dockHeaderHedWord},"Unlimited")," access to all of The Times."),s.default.createElement("span",null,""),s.default.createElement(b,{className:(0,l.cx)(d.dockHeaderSubHed),priceClassName:(0,l.cx)(d.dockBauPrice),bauPrice:t,price:n,frequency:i,showOnly:!0}))}function w(){return s.default.createElement("img",{className:(0,l.cx)(d.dockContentLogo),src:"https://mwcm.nyt.com/dam/the-new-york-times.png",alt:"The New York Times - Logo"})}function x(){return s.default.createElement(w,null)}function k(e){var t,n=e.hed,i=e.bauPrice,r=e.price,a=e.frequency;return s.default.createElement("div",{className:(0,l.cx)(d.middleContentWrapper)},s.default.createElement("div",{className:(0,l.cx)(d.middleContentHed)},n),s.default.createElement(b,{className:(0,l.cx)(d.middleContentSubHed,(t={},t[d.middleContentSubHedCA]=null==r?void 0:r.toLowerCase().includes("cdn"),t)),bauPrice:i,price:r,priceClassName:(0,l.cx)(d.dockBauContentPrice),frequency:a}))}function O(e){var t=e.subscriptionURI,n=e.cta,i=e.onCtaClick;return s.default.createElement("div",{className:(0,l.cx)(d.rightContentWrapper)},s.default.createElement(y.Anchor,{className:(0,l.cx)(d.ctaButton),href:t,onClick:i},n),s.default.createElement("div",{className:(0,l.cx)(d.ctaDek)},"Cancel or pause anytime."))}function E(e){var t=e.unit,n=e.onCtaClick,i=t.content||{};return s.default.createElement("div",{className:(0,l.cx)(d.dockContentWrapper)},s.default.createElement(x,null),s.default.createElement(k,{hed:i.hed,bauPrice:i.bauPrice,price:i.price,frequency:i.frequency}),s.default.createElement(O,{cta:i.cta,subscriptionURI:i.subscriptionURI,onCtaClick:n}))}t.default=function(e){var t,n,i,r,a,o,y,b,w,x,k,O,T,C,S,P,M,I,A,j,L,R,N,D,B=e.unit,z=(0,s.useState)(!1),F=z[0],U=z[1],H=(0,s.useState)(!1),W=H[0],q=H[1],V=(0,p.useMessageSelection)({config:{name:"dock"}}),G=(0,f.useUserState)(),Y=(0,c.useTracking)(),Z="/"===(0,h.getPathName)()?"homepage":"article",X=null===(t=B.content)||void 0===t?void 0:t.subscriptionURI,J={event:"moduleInteraction",eventData:{pagetype:Z,trigger:"module",type:"click"},module:{name:"dock",label:null===(n=null==V?void 0:V.response)||void 0===n?void 0:n.campaign(),element:{name:m.Action.Subscribe,url:X}}},K=function(){Y.trackEvent(J),window.open(X,"_blank","noopener,noreferrer")};if(null==V?void 0:V.loading)return null;if(!F){var $=null===(r=null===(i=null==V?void 0:V.response)||void 0===i?void 0:i.userstate())||void 0===r?void 0:r.messageSelectionMessageCaps,Q=null;if($)if((re=$).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==V?void 0:V.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==V?void 0:V.response)||void 0===n?void 0:n.audience())&&(Q=e)})),Q){var ee=Q,te=new Date(null==ee?void 0:ee.lastSeenOn).getTime(),ne=(new Date).getTime(),ie=Math.abs(Math.round(ne-te)/6e4);ee.viewCount+=1,ie>2880?(ee.viewCount=1,ee.lastSeenOn=(new Date).toISOString(),q(!1)):ee.viewCount>2?q(!0):q(!1),G.update({messageSelectionMessageCaps:re})}if(!Q){var re=[];$&&(re=$),re.push({unit:"dock",campaign:null===(a=null==V?void 0:V.response)||void 0===a?void 0:a.campaign(),audience:null===(o=null==V?void 0:V.response)||void 0===o?void 0:o.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),G.update({messageSelectionMessageCaps:re}),q(!1)}U(!0)}return(null===(y=null==B?void 0:B.content)||void 0===y?void 0:y.convDockDesignTest2311)?W?s.default.createElement(u.default,{testId:"onsite-messaging-unit-dock",className:(0,l.cx)(d.dockWrapperConvDockDesignTest2311),unit:B,contentID:"CONV_DOCK_DESIGN_TEST_2311",dockID:"standard",header:s.default.createElement("div",{className:(0,l.cx)(d.dockHeaderHedConvDockDesignTest2311)},null===(b=null==B?void 0:B.content)||void 0===b?void 0:b.headerText),headerCollapsedCTA:null===(w=B.content)||void 0===w?void 0:w.headerCta,onDockHeadingClick:K,isDockDismissible:!1,isDockExpandable:!1,minimized:!0}):s.default.createElement(u.default,{testId:"onsite-messaging-unit-dock",className:(0,l.cx)(d.dockWrapperConvDockDesignTest2311),unit:B,contentID:"CONV_DOCK_DESIGN_TEST_2311",dockID:"expand",header:s.default.createElement("div",{className:(0,l.cx)(d.dockHeaderHedConvDockDesignTest2311)},null===(x=null==B?void 0:B.content)||void 0===x?void 0:x.headerText),card:s.default.createElement("div",{className:(0,l.cx)(d.dockContentWrapperConvDockDesignTest2311)},s.default.createElement("div",{className:(0,l.cx)(d.dockContentKickerConvDockDesignTest2311)},"6-month Welcome Offer"),"1_priceInCollapsed"===(null===(k=null==B?void 0:B.content)||void 0===k?void 0:k.convDockDesignTest2311)&&s.default.createElement("div",{className:(0,l.cx)(d.dockContentHeadlineConvDockDesignTest2311)},"All of The Times.",s.default.createElement("br",null),s.default.createElement(v.default,{oldPrice:null===(O=null==B?void 0:B.content)||void 0===O?void 0:O.fullPrice,currentPrice:null===(T=null==B?void 0:B.content)||void 0===T?void 0:T.bodyPriceExpression})),"2_noPriceInCollapsed"===(null===(C=null==B?void 0:B.content)||void 0===C?void 0:C.convDockDesignTest2311)&&s.default.createElement("div",{className:(0,l.cx)(d.dockContentHeadlineConvDockDesignTest2311,d.dockContentHeadlineConvDockDesignTest2311Variant2noPriceInCollapsed)},s.default.createElement(v.default,{oldPrice:null===(S=null==B?void 0:B.content)||void 0===S?void 0:S.fullPrice,currentPrice:null===(P=null==B?void 0:B.content)||void 0===P?void 0:P.bodyPriceExpression})),s.default.createElement("a",{className:(0,l.cx)(d.ctaButtonConvDockDesignTest2311),href:null===(M=null==B?void 0:B.content)||void 0===M?void 0:M.subscriptionURI},"Learn more")),isDockDismissible:!1,isDockExpandable:!0,minimized:!1,hideVerticleRuleInHeader:!0,centerAlignHeaderAgainstPageWidth:!0}):W?s.default.createElement(u.default,{testId:"onsite-messaging-unit-".concat(null===g.config||void 0===g.config?void 0:g.config.name),className:(0,l.cx)(d.dockWrapper),unit:B,contentID:"SUBCON__BAU_ALL_ACCESS_ACQUISITION_234",dockID:"standard",header:s.default.createElement(_,{bauPrice:null===(I=B.content)||void 0===I?void 0:I.bauPrice,price:null===(A=B.content)||void 0===A?void 0:A.price,frequency:null===(j=B.content)||void 0===j?void 0:j.frequency}),headerCollapsedCTA:null===(L=B.content)||void 0===L?void 0:L.cta,onDockHeadingClick:K,isDockDismissible:!1,isDockExpandable:!1,minimized:!0}):s.default.createElement(u.default,{testId:"onsite-messaging-unit-".concat(null===g.config||void 0===g.config?void 0:g.config.name),className:(0,l.cx)(d.dockWrapper),unit:B,contentID:"SUBCON__BAU_ALL_ACCESS_ACQUISITION_234",dockID:"expand",header:s.default.createElement(_,{bauPrice:null===(R=B.content)||void 0===R?void 0:R.bauPrice,price:null===(N=B.content)||void 0===N?void 0:N.price,frequency:null===(D=B.content)||void 0===D?void 0:D.frequency}),card:s.default.createElement(E,{unit:B,onCtaClick:function(){Y.trackEvent(J)}}),headerCollapsedCTA:"EXPAND",headerExpandedCTA:"COLLAPSE",isDockDismissible:!1,headingClassName:d.dockHeaderWrapperExpanded,minimized:!1,overrideHeaderStyles:!0,isDockExpandable:!0})}},kJEd:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lSNA")),a=i(n("q1tI")),o=(i(n("17x9")),n("Jqp9")),s=n("bLcY"),l=n("AKP5");function c(e){var t=e.index,n=e.length;return a.default.createElement("ul",{className:s.navListClass},(0,l.times)(n,(function(e){return a.default.createElement("li",{key:e,className:(0,o.cx)(s.dotClass,(0,r.default)({},s.activeClass,e===t)),"data-active":e===t})})))}c.displayName="DotNav",c.defaultProps={index:0};var u=c;t.default=u},kPjT:function(e,t,n){"use strict";var i=n("gcR/"),r=n.n(i),a=n("q1tI"),o=n.n(a),s=n("Jqp9"),l=n("wXC7"),c=n.n(l),u=n("3sMT"),d=Object(s.css)("font-size:",c.a.font.size(11),";line-height:",c.a.font.size(18),";color:",u.color.content.tertiary,";margin-left:40px;"),p=Object(s.css)(":hover{text-decoration:underline;color:",u.color.content.quaternary,";}"),f=function(e){var t=e.footer,n=e.handleNestedLinkClick,i=e.heading,a=e.parentName,l=e.className;return o.a.createElement(o.a.Fragment,null,t&&t.copy&&t.link&&r()("a",{href:t.link,className:p,onClick:function(e){return n(e,t.link,a,i,t.copy)}},void 0,r()("p",{className:Object(s.cx)(d,l)},void 0,t.copy)),t&&t.copy&&!t.link&&r()("p",{className:Object(s.cx)(d,l)},void 0,t.copy))};f.defaultProps={className:void 0,handleNestedLinkClick:function(){},footer:{},link:""};t.a=f},kTfh:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.disabledClass=t.arrowsNavClass=t.arrowRightClass=t.arrowLeftClass=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=n("3sMT"),s=(0,r.css)("justify-content:space-between;position:absolute;display:none;z-index:1;div &{right:0;}",a.default.breakpoint.small,"{display:flex;}");t.arrowsNavClass=s;var l=(0,r.css)("display:inline-flex;justify-content:center;align-items:center;white-space:nowrap;width:26px;height:26px;border-radius:50%;background-color:",o.color.background.primary,";border:1px solid ",o.color.stroke.quaternary,";cursor:pointer;outline:none;::after{content:'';display:inline-block;margin-left:2px;margin-bottom:1;width:7px;height:7px;line-height:0;border-top:2px solid ",o.color.content.primary,";border-right:2px solid ",o.color.content.primary,";border-color:",o.color.content.primary,";}&:hover{background-color:",o.color.stroke.quaternary,";}"),c=(0,r.css)(l," left:0;margin-right:10px;&::after{transform:rotate(-135deg);}");t.arrowLeftClass=c;var u=(0,r.css)(l," right:0;&::after{margin-left:-2px;transform:rotate(45deg);}");t.arrowRightClass=u;var d=(0,r.css)("cursor:default;:hover{background-color:",o.color.background.primary,";}::after{border-color:",o.color.stroke.quaternary,";}");t.disabledClass=d},kV2j:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var i=function(e){var t,n;return null!==(t=e.article)&&void 0!==t&&t.data?e.article.data.attributes.approvedCount:null!==(n=e.article)&&void 0!==n&&n.approvedCount?e.article.approvedCount:null},r=function(e){var t,n;return null!==(t=e.article)&&void 0!==t&&t.data?e.article.data.attributes.url:null!==(n=e.article)&&void 0!==n&&n.url?e.article.url:null}},kafo:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lwsE")),a=i(n("W8MJ")),o=i(n("7W2i")),s=i(n("a1gu")),l=i(n("Nsbk")),c=i(n("J4Ca")),u=i(n("R+Gq"));function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,l.default)(e);if(t){var r=(0,l.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,s.default)(this,n)}}var p=function(e){(0,o.default)(n,e);var t=d(n);function n(){return(0,r.default)(this,n),t.apply(this,arguments)}return(0,a.default)(n,[{key:"genericData",get:function(){var e,t=this.data,n=t.firstPublished,i=t.lastModified,r=t.lastMajorModification,a=t.summary,o=t.url,s=t.headline,l=t.language;return new u.default({dateModified:r||i,inLanguage:(null==l?void 0:l.code)||void 0,datePublished:n,description:a,url:o,author:this.authorsStructuredData,image:null===(e=this.promotionalImage)||void 0===e?void 0:e.getStructuredData(),headline:(null==s?void 0:s.seo)||(null==s?void 0:s.default),alternativeHeadline:null!=s&&s.seo&&null!=s&&s.default?s.default:void 0})}},{key:"getStructuredData",value:function(){return this.genericData}}]),n}(c.default);t.default=p},kbxR:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("oCqg"))),s=n("xHA4"),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("OGvp"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}function u(e){var t,n=e.storyline,i=e.trackingParams,r=e.trackLinkInteraction;if(n.topLinks)return a.default.createElement(o.default,{storyline:n,trackingParams:i,trackLinkInteraction:r});var c=(0,s.getExperimentalAssetDataFromStoryline)({storyline:n,block:s.STORYLINE_BLOCKS.toplinks});if(!(null!=c&&c.title||null!=c&&null!==(t=c.bulletedList)&&void 0!==t&&t.length))return null;var u=c.title,d=c.imageUrl,p=c.leadIn,f=c.bulletedList;return a.default.createElement("section",{role:"complementary","aria-labelledby":"styln-toplinks-title",className:l.containerClass},d&&a.default.createElement("img",{src:d,alt:"",className:l.imageClass}),a.default.createElement("header",{className:l.headerClass},a.default.createElement("h2",{id:"styln-toplinks-title",className:l.titleClass},u),p&&a.default.createElement("h3",{className:l.leadInClass},p)),a.default.createElement("ul",{className:l.listClass},f.map((function(e){return a.default.createElement("li",{key:e},a.default.createElement("span",{dangerouslySetInnerHTML:{__html:e}}))}))))}u.displayName="StorylineTopLinks",u.defaultProps={storyline:{experimentalJsonBlob:null,topLinks:null},trackingParams:null,trackLinkInteraction:function(){}};var d=u;t.default=d},kekP:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n("q1tI")),l=o(n("5UIh")),c=n("syiw"),u=n("HDG5"),d=a(n("IHwD")),p=n("bSj6"),f=n("6gWn");t.default=function(e){var t,n,i,r,a,o,m,h,g,y,v,b,_,w,x,k,O,E,T,C,S,P=e.unit,M=(0,s.useState)(!1),I=M[0],A=M[1],j=(0,c.useMessageSelection)({config:{name:"dock"}}),L=(0,u.useUserState)(),R=s.default.createElement("p",{className:d.headerTextClass},s.default.createElement("strong",{className:null===(t=P.content)||void 0===t?void 0:t.classDockBody},null===(n=P.content)||void 0===n?void 0:n.topHeadline)," ",s.default.createElement("br",{className:d.giftingDockShowMobile}),s.default.createElement("span",null,null===(i=P.content)||void 0===i?void 0:i.topSubHeadline)),N=s.default.createElement("div",{className:d.mainContent},s.default.createElement("div",{className:null===(r=P.content)||void 0===r?void 0:r.classDockBody},s.default.createElement("div",{className:d.logosDockDesktop},s.default.createElement("img",{className:"logoClass",alt:null===(a=P.content)||void 0===a?void 0:a.alt,src:null===(o=P.content)||void 0===o?void 0:o.logo})),s.default.createElement("div",{className:d.contentDockDesktop},s.default.createElement("div",{className:"wrapRedBoxClass"},s.default.createElement("img",{alt:"NYT Box Gift",src:null===(m=P.content)||void 0===m?void 0:m.image})),s.default.createElement("div",{className:"wrapHeadline"},s.default.createElement("h2",{className:"headlineGiftingBF"},null===(h=P.content)||void 0===h?void 0:h.headLine),s.default.createElement("div",null,s.default.createElement("p",{className:"subHeadlineGiftingBF"},null===(g=P.content)||void 0===g?void 0:g.subHeadLine)),s.default.createElement("div",null,s.default.createElement("p",{className:"subHeadlineGiftingBFG"},null===(y=P.content)||void 0===y?void 0:y.giftCopy)),s.default.createElement("h2",{className:"headlineGiftingBFM"},null===(v=P.content)||void 0===v?void 0:v.headLineM),s.default.createElement("div",null,s.default.createElement("p",{className:"subHeadlineGiftingBFGM"},null===(b=P.content)||void 0===b?void 0:b.giftCopyM)),s.default.createElement("div",{className:d.giftingDockShowMobile},s.default.createElement(p.Anchor,{href:null===(_=null==P?void 0:P.content)||void 0===_?void 0:_.url,className:"giftingButtonClass"},null===(w=P.content)||void 0===w?void 0:w.ctaCopy)))),s.default.createElement("div",{className:d.logosDockDesktop},s.default.createElement(p.Anchor,{href:null===(x=null==P?void 0:P.content)||void 0===x?void 0:x.url,className:"giftingButtonClass"},null===(k=P.content)||void 0===k?void 0:k.ctaCopy))));if(j.loading)return null;if(!I){var D=null===(E=null===(O=null==j?void 0:j.response)||void 0===O?void 0:O.userstate())||void 0===E?void 0:E.messageSelectionMessageCaps,B=null;if(D)if((H=D).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==j?void 0:j.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==j?void 0:j.response)||void 0===n?void 0:n.audience())&&(B=e)})),null!==B){var z=B,F=new Date(null==z?void 0:z.lastSeenOn).getTime(),U=(new Date).getTime();Math.abs(Math.round(U-F)/6e4)>1440?(z.viewCount=1,z.lastSeenOn=(new Date).toISOString()):z.viewCount+=1,L.update({messageSelectionMessageCaps:H})}if(!B){var H=[];D&&(H=D),H.push({unit:"dock",campaign:null===(T=null==j?void 0:j.response)||void 0===T?void 0:T.campaign(),audience:null===(C=null==j?void 0:j.response)||void 0===C?void 0:C.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),L.update({messageSelectionMessageCaps:H})}A(!0)}return s.default.createElement(l.default,{testId:"onsite-messaging-unit-".concat(null===f.config||void 0===f.config?void 0:f.config.name),unit:P,contentID:null===(S=P.content)||void 0===S?void 0:S.classDock,dockID:"Holiday Gifting Black Friday - 2311",header:R,card:N,isDockDismissible:!1,minimized:!1})}},"kr/V":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),i(n("Youu"))),o=function(e){var t=e.className,n=e.showTooltip,i=e.ctaText,o=e.ariaLabel,s=e.storageKey,l=e.segment,c=e.onView,u=e.onSubscribe,d=e.onUnsubscribe,p=e.tooltipArrowPosition,f=e.buttonWrapperClassName,m=e.showToggle,h=e.errorAlertClassName,g=e.tooltipOverrideClassName,y=e.alertWrapperClassName,v=e.testingInBrowser;return r.default.createElement(a.default,{className:t,showTooltip:n,ctaText:i,ariaLabel:o,storageKey:s,segment:l,onView:c,onSubscribe:u,onUnsubscribe:d,tooltipArrowPosition:p,buttonWrapperClassName:f,showToggle:m,errorAlertClassName:h,tooltipOverrideClassName:g,alertWrapperClassName:y,testingInBrowser:v})};o.displayName="NotificationToggle",o.defaultProps={className:void 0,ariaLabel:void 0,ctaText:void 0,showTooltip:!1,storageKey:void 0,tooltipArrowPosition:"bottom",onView:void 0,onSubscribe:void 0,onUnsubscribe:void 0,buttonWrapperClassName:void 0,showToggle:!0,errorAlertClassName:void 0,tooltipOverrideClassName:void 0,alertWrapperClassName:void 0,segment:void 0,testingInBrowser:!1};var s=o;t.default=s},ktkx:function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return m}));var i,r=n("VkAN"),a=n.n(r),o=(n("yXPU"),n("o0o1"),n("eFc+")),s=n.n(o),l=n("06b3"),c=(n("NW2b"),n("HChe")),u=n("mczz"),d=n("0O4q"),p=n("Rb+W");function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(!e)return t;var i=e.targetUrl,r=e.timesTags,a=e.collections,o=e.adTargetingParams,s=Object(c.a)()||"smartphone",l=n||Object(p.q)(s);return i||(o?t=Object(p.t)(o,l,t):(t=Object(p.c)(t,e,l),r&&(t=Object(p.j)(r,t)),a&&(t=Object(p.h)(a,t)))),t}function m(e,t){var n,i,r=t.tracking,a=t.getPageviewId,o=t.getReferrer,s=Object(c.a)()||"smartphone",f=Object(p.d)(l.a),m=r?function(e){var t=e.getTrackingData;return"function"==typeof t?t():null}(r):null,h=Object(u.c)(),g=Object(d.b)(),y={ver:Object(p.p)(s),sov:Object(p.o)(),vp:Object(p.q)(s),test:"projectvi",ref:Object(p.k)(),refdom:Object(p.l)(),abra_dfp:Object(p.b)(),"gpt-beta":"vqwdtftx"};return h&&(i=Object(u.d)(h,"ad-keywords")),a&&(y.page_view_id=a()),o&&(y.topref=o()),"1"===Object(p.i)(l.a)&&(y.gdprUser=!0),"out"===(null==f?void 0:f.toString().toLowerCase())&&(y.noTracking=!0),null!=m&&null!==(n=m.interaction)&&void 0!==n&&n.page&&(y.page=m.interaction.page),i&&(y.adv=i),y=function(e,t){if(null!=e&&e.subscriptionDetails&&Array.isArray(e.subscriptionDetails)&&e.subscriptionDetails.length>=1){var n=e.subscriptionDetails[0];n.billingSource&&(t.subsrc=n.billingSource)}return t}(g,y),"smartphone"===s?Object(p.s)(y):Object(p.a)(y)}f.fragments={data:s()(i||(i=a()(['\n    fragment getTargetingParams_data on WorkOrLocation {\n      ... on RelocatedWork {\n        targetUrl\n      }\n      ... on CreativeWork {\n        adTargetingParams(clientAdParams: { edn: "us", plat: "web", prop: "nyt" }) {\n          key\n          value\n        }\n        ...getAdLibraryFallback_data\n        ...getCollections_collections\n        ...getNewsKeywords_keywords\n      }\n    }\n    ',"\n    ","\n    ","\n  "])),p.c.fragments.data,p.h.fragments.collections,p.j.fragments.keywords)}},kvrv:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),o=(i(n("17x9")),n("Jqp9")),s=i(n("Vcud")),l=n("7DZV"),c=n("e8Mh"),u=n("7zGq");function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}var p=a.default.forwardRef((function(e,t){var n=e.a11yLabel,i=e.children,r=e.id,d=e.onSwipe,p=e.scrolledIndex,f=e.isPeeking,m=(0,u.debounce)((function(e){var t=f?1.2:1,n=(0,u.getScrolledIndex)(e,t);d(n)}));return(0,a.useEffect)((function(){var e=null!=t&&t.current?(0,c.handleKeyNavigation)(t.current):u.noop;return document.addEventListener("keyup",e,!0),function(){document.removeEventListener("keyup",e,!0)}}),[t]),a.default.createElement("div",{id:r,"aria-live":"polite","aria-atomic":!0},a.default.createElement(s.default,null,n),a.default.createElement("div",{ref:t,"data-scrolled-index":p,className:(0,o.cx)("swiper",l.swiperClass),onScroll:function(e){return m(e.target)}},a.default.Children.map(i,(function(e,t){return a.default.createElement("div",{className:l.peekingSlideContainerClass},a.default.createElement("div",{className:l.slideClass,"aria-hidden":t!==p},e))}))))}));p.defaultProps={a11yLabel:void 0,id:void 0};var f=p;t.default=f},kz9X:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),o=(n("17x9"),n("45t3")),s=n("QDH1"),l=i(n("Ivf9")),c=n("To3l");function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var d=function(e){var t=e.article,n=(0,s.getHeadingData)(t),i=(0,o.useBulletBriefLocationContext)(),r=i.boldItems,u=i.setboldItems;return(0,a.useEffect)((function(){var e=function(){var e=window.pageYOffset+20,t=(0,s.getBoldNavMap)(n,e);u(t)};return window.addEventListener("scroll",e,{passive:!0}),function(){window.removeEventListener("scroll",e)}}),[n,u]),a.default.createElement(a.default.Fragment,null,a.default.createElement(c.GuideNavHeading,null,t.headline.default),a.default.createElement(c.GuideNavItems,null,n.map((function(e){return a.default.createElement(l.default,{item:e,boldLocation:r})}))))};t.default=d},l24T:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return u}));var i={name:"MAPS_OnsiteNL_RecircOptimize_0401",control:"0_control",mapsVariant:"1_MAPS_Cards",sujoVariant:"2_SuJoMoreNewsletters"},r=i.name,a=function(e){var t;return null==e||null===(t=e[r])||void 0===t?void 0:t.allocated},o=function(e){var t;return null==e||null===(t=e[r])||void 0===t?void 0:t.variant},s=function(e,t){return!(null==e||!e.allowedEntitlement)&&a(t)},l=function(e,t){return s(e,t)&&[i.mapsVariant,i.sujoVariant].includes(o(t))},c=function(e,t){return s(e,t)&&o(t)===i.mapsVariant},u=function(e,t){return s(e,t)&&o(t)===i.sujoVariant}},l2po:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n("q1tI")),a=n("iolA"),o=n("tHll"),s=n("6gWn");function l(){var e=(0,o.useUnit)(s.config).unit;return(null==e?void 0:e.canShow)&&(null==e?void 0:e.component)?r.default.createElement(e.component,{unit:e}):null}l.propTypes={},t.default=(0,a.withErrorBoundary)(l)},lJVC:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=i(n("q1tI")),a=(i(n("17x9")),i(n("wXC7")));function o(e){var t=e.className,n=e.fill;return r.default.createElement("svg",{className:t,viewBox:"0 0 15 18",fill:"none"},r.default.createElement("path",{d:"M2.0243 1.84397H12.7936L14.6964 0H0V3.80563L2.0243 1.84397Z",fill:n}),r.default.createElement("path",{d:"M12.976 2.23315H7.71278V15.1801L5.68848 17.1418H5.70872H9.61562V4.07711H15.0003V0.271484L12.976 2.23315Z",fill:n}),r.default.createElement("path",{d:"M2.18605 2.23633L0.283203 4.08029H5.10104L7.00388 2.23633H2.18605Z",fill:n}),r.default.createElement("path",{d:"M7.28761 2.5293L5.38477 4.37326V16.8495L7.28761 15.0055V2.5293Z",fill:n}))}o.displayName="TMagMobileLogo",o.defaultProps={className:void 0,fill:a.default.color.black}},lKtF:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getNewsletterProduct=void 0;var r=i(n("Ds/+")),a=i(n("tPsl"));t.getNewsletterProduct=function(e){return e.allowedEntitlement?new a.default(e):new r.default(e)}},lMaV:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(["ar-AR","az-AZ","fa-IR","he-IL","ku-TR","ps-AF","ur-PK","yi-DE"].includes(null==e?void 0:e.code))return!0;return!1}},lQyp:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.BaseEmailSignup=void 0;var a=i(n("q1tI")),o=i(n("Ys1a")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=l(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("vqZQ"));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(l=function(e){return e?n:t})(e)}var c=function(e){var t=e.newsletter,n=e.user,i=e.signupOptions,r=e.LoggedOut,o=e.LoggedInSignup,l=e.AlreadyReceiving,c=e.SignupSuccess,u=e.onSignupStart,d=e.onSignupComplete,p=e.onSignupFail,f=e.extraProps,m=void 0===f?{}:f,h=(0,s.default)({newsletter:t,user:n,signupOptions:i,onSignupStart:u,onSignupComplete:d,onSignupFail:p}),g=h.handleSignup,y=h.loading,v=h.error,b=h.viewState,_=h.loggedOut,w=h.alreadyReceiving;return b.type===s.View.SignupSuccess?a.default.createElement(c,{user:n,newsletter:t,signupResult:b.result,extraProps:m}):_?a.default.createElement(r,{user:n,newsletter:t,handleSignup:g,loading:y,error:v,extraProps:m}):w?a.default.createElement(l,{user:n,newsletter:t,extraProps:m}):a.default.createElement(o,{user:n,newsletter:t,handleSignup:g,loading:y,error:v,extraProps:m})};t.BaseEmailSignup=c,c.displayName="BaseEmailSignup";var u=(0,o.default)(c);t.default=u},lbJX:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=i(n("+nHC")),o=function(){var e=(0,a.default)();return r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 40 36",id:"el_0kpS9qL_S"},r.default.createElement("title",null,"bars"),r.default.createElement("g",{id:"el_oZ84Hna1GC_65hRV2Qwn",className:e.fourthBarParentClass,"data-animator-group":"true","data-animator-type":"0"},r.default.createElement("g",{id:"el_oZ84Hna1GC_ILVvi2tqx",className:e.fourthBarClass,"data-animator-group":"true","data-animator-type":"2"},r.default.createElement("g",{id:"el_oZ84Hna1GC"},r.default.createElement("rect",{x:"34",width:"6",height:"36",id:"el_qw_T_tngXw"})))),r.default.createElement("g",{id:"el_mYVjkduhMU_p_9Pm85Ac",className:e.thirdBarParentClass,"data-animator-group":"true","data-animator-type":"0"},r.default.createElement("g",{id:"el_mYVjkduhMU_WxG3R40yd",className:e.thirdBarClass,"data-animator-group":"true","data-animator-type":"2"},r.default.createElement("g",{id:"el_mYVjkduhMU"},r.default.createElement("rect",{x:"22.67",width:"6",height:"36",id:"el_lf9GrROk6j"})))),r.default.createElement("g",{id:"el_o-EuxhgoAw_kYNRGDfcw",className:e.secondBarParentClass,"data-animator-group":"true","data-animator-type":"0"},r.default.createElement("g",{id:"el_o-EuxhgoAw_3c3bzSjOJ",className:e.secondBarClass,"data-animator-group":"true","data-animator-type":"2"},r.default.createElement("g",{id:"el_o-EuxhgoAw"},r.default.createElement("rect",{x:"11.33",width:"6",height:"36",id:"el_-iueO8klO0"})))),r.default.createElement("g",{id:"el_F7mSMPhqpC_y_fKcpSxn",className:e.firstBarParentClass,"data-animator-group":"true","data-animator-type":"0"},r.default.createElement("g",{id:"el_F7mSMPhqpC_R6bNB6_Ys",className:e.firstBarClass,"data-animator-group":"true","data-animator-type":"2"},r.default.createElement("g",{id:"el_F7mSMPhqpC"},r.default.createElement("rect",{width:"6",height:"36",id:"el_dS5TKNZZ5w"})))))};o.displayName="PlaybackIcon";var s=o;t.default=s},lgII:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("ZDp4")),a=i(n("W8MJ")),o=i(n("lwsE")),s=i(n("7W2i")),l=i(n("a1gu")),c=i(n("Nsbk")),u=i(n("Nz+N")),d=n("6hsm");function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,l.default)(this,n)}}var f=function(e){(0,s.default)(n,e);var t=p(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object.assign({},((0,r.default)(i),i));return(0,o.default)(this,n),(e=t.call(this,a))["@type"]="CollectionPage",e.publisher=d.PUBLISHER_ID_OBJ,e.copyrightHolder=d.PUBLISHER_ID_OBJ,e.sourceOrganization=d.PUBLISHER_ID_OBJ,e.copyrightYear=(new Date).getFullYear(),e}return(0,a.default)(n)}(u.default);t.default=f},ljg4:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("o0o1")),o=i(n("yXPU")),s=i(n("J4zp")),l=f(n("q1tI")),c=(i(n("17x9")),i(n("d4gE"))),u=i(n("v2Y2")),d=f(n("zt4Q"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}var m=function(e){var t=e.latitude,n=e.longitude,i=(0,l.useRef)(null),r=(0,l.useRef)(null),p=(0,l.useState)(!1),f=(0,s.default)(p,2),m=f[0],h=f[1];return(0,l.useEffect)((function(){return function(){var e=(0,o.default)(a.default.mark((function e(){var o;return a.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,u.default)("https://api.mapbox.com/mapbox-gl-js/v2.14.1/mapbox-gl.css");case 3:c.default.accessToken="pk.eyJ1Ijoibnl0Z3JhcGhpY3MiLCJhIjoiY2swcXlvbmMwMDByMjNjdDh3c3Y1NnRrbSJ9.ObcEsDUY5vaOZEszZVFqDg",r.current=new c.default.Map({container:i.current,style:"mapbox://styles/nytgraphics/cjtrnt4vr27bh1go46ussni44",center:[n,t],zoom:13}),(new c.default.Marker).setLngLat([n,t]).addTo(r.current),e.next=15;break;case 8:e.prev=8,e.t0=e.catch(0),h(!0),(o=new Error(e.t0)).name="Error loading mapbox instance",console.error(o),"undefined"!=typeof window&&window.Sentry&&window.Sentry.captureException&&window.Sentry.captureException(o);case 15:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()(),function(){var e;null===(e=r.current)||void 0===e||e.remove()}}),[t,n]),m?null:l.default.createElement("div",{className:d.mapWrapperClass},l.default.createElement("div",{className:d.mapClass,ref:i}))};m.displayName="Map";var h=m;t.default=h},lraK:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=n("3sMT"),o=n("Jqp9"),s=(0,o.css)("text-align:center;"),l=function(e){var t=e.wordCount,n=e.center,i=e.mt,o=e.deviceType,l=e.className,c=t?Math.ceil(t/270):null;if(!c)return null;var u="".concat(c," min read");return u?r.default.createElement(a.Text,{fontSize:"smartphone"===o?11:10,fontFamily:"franklinAllCaps",color:"quaternary",className:n?s:l,mt:i||("smartphone"===o?1:.5),"data-ttr":"1"},u):null};t.default=l},mAfr:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.thumbnailClass=t.headingClass=t.figureMediaClass=t.figureClass=t.figcaptionClass=t.captionSpanClass=t.audioBlockPromoClass=void 0;var r=n("Jqp9"),a=n("3sMT"),o=i(n("wXC7")),s=(0,r.css)("border-bottom:1px solid ",a.color.stroke.quaternary,";border-top:1px solid ",a.color.stroke.quaternary,";margin:",o.default.breakpoint.mobileBlockMargins,";max-width:",o.default.breakpoint.textBodyWidth,"px;padding:20px 0;width:",o.default.breakpoint.mobileFullWidth,";",o.default.breakpoint.medium,"{margin:",o.default.breakpoint.desktopMediaMargins,";}",o.default.printHide,";");t.figureClass=s;var l=(0,r.css)("font-family:",o.default.font.franklinBase,";margin:0 auto;");t.figcaptionClass=l;var c=(0,r.css)("color:",a.color.content.secondary,";font-size:",o.default.font.size(14),";font-weight:",o.default.font.weight.bold,";line-height:",o.default.font.size(18),";");t.headingClass=c;var u=(0,r.css)("color:",a.color.content.quaternary,";display:block;font-size:",o.default.font.size(14),";font-weight:",o.default.font.weight.medium,";line-height:",o.default.font.size(18),";margin-top:0.125rem;");t.captionSpanClass=u;var d=(0,r.css)("min-height:",o.default.font.size(54),";");t.thumbnailClass=d;var p=(0,r.css)("float:right;height:75px;margin:0 0 16px 32px;width:75px;");t.figureMediaClass=p;var f=(0,r.css)("margin-top:1.75rem;",o.default.breakpoint.medium,"{margin-top:2rem;}");t.audioBlockPromoClass=f},mFeT:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("cDf5")),a=i(n("q1tI")),o=n("boCj"),s=n("f9QA"),l=n("s5tu");function c(e,t,n,i){var c,u,d=e.url,p=(0,l.isInternalLink)(d);if(p||(c="noopener noreferrer",u="_blank"),p&&i.internalLinkTrackingParams&&"object"===(0,r.default)(i.internalLinkTrackingParams)){var f=-1===d.indexOf("?")?"?":"&";d="".concat(d).concat(f).concat((0,l.objectToQueryParams)(i.internalLinkTrackingParams))}return a.default.createElement(o.InView,{as:"a",threshold:1,onChange:function(t){t&&i.trackEvent&&i.trackEvent(e.url)},triggerOnce:!0,className:s.linkClass,href:d,key:n,rel:c,target:u,onClick:function(t){var n;return null==i||null===(n=i.trackLinkInteraction)||void 0===n?void 0:n.call(i,t,null==e?void 0:e.url,{item:{uri:e.uri,url:e.url},eventData:{type:"url-click",trigger:"item",url:e.url}})}},t)}c.displayName="StorylineLinkFormat";var u=c;t.default=u},mGV9:function(e,t,n){"use strict";var i=n("VkAN"),r=n.n(i),a=n("lSNA"),o=n.n(a),s=n("gcR/"),l=n.n(s),c=n("q1tI"),u=n.n(c),d=n("eFc+"),p=n.n(d),f=n("Jqp9"),m=n("i+0r"),h=n.n(m),g=n("XlcC"),y=n.n(g),v=n("jOYC"),b=n("HTd6"),_=n("w4n4"),w=n("wXC7"),x=n.n(w),k=Object(f.css)("width:auto;margin-left:auto;margin-right:auto;",x.a.breakpoint.mediumLarge,"{width:auto;}"),O=Object(f.css)(v.b.layout.news,";display:inline-block;color:",x.a.color.developingColor,";&::after{content:'  ';white-space:pre;}"),E=Object(f.css)("color:",x.a.color.breakingColor,";"),T=Object(f.css)(x.a.breakpoint.small,"{",v.b.layout.news,";}margin-left:auto !important;margin-right:auto !important;"),C=function(e){var t,n=e.newsStatus,i=e.adjacentToLabel;if(!function(e){return"string"==typeof e&&["BREAKING","DEVELOPING"].includes(e.toUpperCase())}(n))return null;var r=l()("span",{className:Object(f.cx)(O,(t={},o()(t,k,i),o()(t,E,"string"==typeof n&&"breaking"===n.toLowerCase()),t))},void 0,n);return i?r:l()(h.a,{className:T},void 0,r)};C.defaultProps={newsStatus:"DEFAULT",adjacentToLabel:!1};var S,P,M=C,I=Object(f.css)("text-transform:none;"),A=function(e){var t,n,i=e.data,r=e.className,a=e.signalOpinion,s=e.newsStatus,c=e.timesExclusive,d=e.isVisualStacks,p=Object(f.useTheme)(),m=i&&i.content?i.content.map(y.a):"",g=i&&i.textAlign?i.textAlign.toLowerCase():null,b="rightToLeft"===(null==p?void 0:p.languageDirection)?_.b:null,w=null==i||null===(t=i.content)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.text,x=a&&Boolean(w),k=l()("span",{className:r},void 0,w),O=a?S||(S=l()("a",{href:"/section/opinion"},void 0,"Opinion")):m;return l()(h.a,{className:Object(f.cx)(_.a,v.b.layout.textAlign[g]||v.b.layout.textAlign.left,r,b,o()({},I,d))},void 0,c||null,u.a.createElement(u.a.Fragment,null,l()(M,{newsStatus:s,adjacentToLabel:!0}),O,x&&k))};A.displayName="LabelBlock",A.defaultProps={data:null,className:void 0,signalOpinion:void 0,newsStatus:void 0,timesExclusive:null,isVisualStacks:!1},A.fragments={data:p()(P||(P=r()(["\n    fragment LabelBlock_data on LabelBlock {\n      textAlign\n      content {\n        ...TextInline_content\n      }\n    }\n    ","\n  "])),b.a.fragments.content)};t.a=A},mH4u:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTimestampData=t.getTimeFormat=t.getElapsedMinutes=t.getBylineData=void 0;var i=n("6qvD"),r=n("t7vg"),a=function(e){var t=((new Date).getTime()-e.getTime())/1e3;return Math.floor(t/60)};t.getElapsedMinutes=a;t.getTimeFormat=function(e){var t="abbreviated-date",n=!1;if(e){var i=a(new Date(e));i<360&&(t="elapsed-with-label",n=!0),i<1&&(t="elapsed")}return{timestampFormatter:t,useElapsedTime:n}};var o=function(e,t){return{updatedText:e,time:t}};t.getTimestampData=o;t.getBylineData=function(e){var t=e.byline,n=e.updatedText,a=e.firstPublished,s=e.isOak,l=e.section,c=e.includeTimestamp;if(!t)return null;var u=t.bylines,d=t.hideHeadshots,p=t.role,f=s||"opinion"===l,m=(u||[]).map(i.fetchHeadshots),h=(0,i.getHeadshotCount)(m),g={headshots:(0,i.showHeadshotsTest)({hideHeadshots:d,headshotCandidate:f,bylines:u,section:l,headshotCount:h})?m:null,bylines:u,role:(null==p?void 0:p.length)>0?(0,r.getFormattedText)(p):null};return c&&(g.timestamp=o(n,a)),g}},mlav:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lSNA")),a=i(n("QILm")),o=i(n("W8MJ")),s=i(n("lwsE")),l=i(n("7W2i")),c=i(n("a1gu")),u=i(n("Nsbk")),d=i(n("Nz+N")),p=n("6hsm"),f=["url","reviewRating","itemReviewed"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.default)(this,n)}}var y=function(e){(0,l.default)(n,e);var t=g(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.url,o=i.reviewRating,l=i.itemReviewed,c=(0,a.default)(i,f);return(0,s.default)(this,n),(e=t.call(this,h(h({},c),{},{url:r})))["@type"]="Review",e.mainEntityOfPage=r,e.publisher=p.PUBLISHER_ID_OBJ,e.copyrightHolder=p.PUBLISHER_ID_OBJ,e.sourceOrganization=p.PUBLISHER_ID_OBJ,e.copyrightYear=(new Date).getFullYear(),e.reviewRating=o,e.itemReviewed=l,e}return(0,o.default)(n)}(d.default);t.default=y},msCe:function(e,t,n){"use strict";var i=n("gcR/"),r=n.n(i),a=n("lSNA"),o=n.n(a),s=(n("q1tI"),n("Jqp9")),l=n("X6oL"),c=n("PgO9"),u=n("HUmG"),d=n("kPjT"),p=n("wXC7"),f=n.n(p),m=n("3sMT"),h=Object(s.css)("h3{color:",m.color.content.primary,";font-family:",f.a.font.karnakBase,";font-weight:",f.a.font.weight.book,";font-size:",f.a.font.size(20),";line-height:",f.a.font.size(24),";margin:-0.3125rem 0 0.4375rem 0;}p{color:",m.color.content.secondary,";max-width:11rem;}a:hover h3,a:hover p{color:",m.color.content.tertiary,";}"),g=Object(s.css)("margin-left:0;margin-top:1rem;"),y=function(e){var t=e.columnId,n=e.description,i=e.footer,a=e.handleNestedLinkClick,o=e.link,s=e.parentName,l=e.title;return r()("div",{id:t,className:h},void 0,r()("a",{href:o,onClick:function(e){return a(e,o,s,l,l)}},void 0,r()("h3",{},void 0,l),r()("p",{},void 0,n)),r()(d.a,{className:g,footer:i,handleNestedLinkClick:a,heading:s,parentName:s}))};y.displayName="BrandColumn",y.defaultProps={handleNestedLinkClick:function(){},footer:{}};var v=y,b=n("pYsa"),_=n("cMFZ"),w=n("coi8"),x=n("Gfev");function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E="https://www.nytimes.com/subscription/all-access",T=function(e){var t,n=e.className,i=e.dropdownData,a=e.isFloatingNav,d=e.item,p=e.setVisibleNestedNav,f=e.visibleNestedNav,m=e.regionForTracking,h=e.pagetype,g=Object(c.a)().user,y=Object(u.c)(g),k=Object(l.useTracking)({eventData:{pagetype:h},module:{context:"standard",region:"masthead"}}),T=function(e){return e.toLowerCase().split(" ").join("-")},C={event:"moduleInteraction",eventData:{trigger:"module",type:"click"},module:{name:"nested-navigation",label:"masthead-navigation",region:m}},S=function(e){window.location.assign(e)},P=function(e,t,n,i,r){e.preventDefault();var a=C;a.module.element={name:T("go-to-".concat(n,"-").concat(i,"-").concat(r)),label:T("clicked-".concat(n,"-").concat(i,"-").concat(r)),url:t},k.trackEvent(O(O({},a),{},{eventCallback:S(t)}))},M=function(e,t,n){var i=t?"".concat(T(t),"-column"):n;return"".concat(e,"-").concat(i)};return r()("div",{"aria-hidden":f===d.name,"aria-label":"".concat(d.name," submenu"),className:Object(s.cx)(x.q,(t={},o()(t,x.s,f===d.name),o()(t,x.m,a),t),n),"data-testid":"nav-dropdown-".concat(d.name),onKeyDown:function(e){return function(e){"Escape"===e.key&&(e.currentTarget.parentElement.getElementsByTagName("a")[0].focus(),p(null))}(e)}},void 0,r()("div",{className:x.n},void 0,i.map((function(e,t){var n;return r()("div",{className:Object(s.cx)(x.l,(n={},o()(n,x.a,0===e.columnWidth),o()(n,x.c,1===e.columnWidth),o()(n,x.d,2===e.columnWidth),o()(n,x.e,3===e.columnWidth),o()(n,x.f,4===e.columnWidth),o()(n,x.g,5===e.columnWidth),o()(n,x.h,6===e.columnWidth),o()(n,x.i,7===e.columnWidth),o()(n,x.j,8===e.columnWidth),o()(n,x.k,9===e.columnWidth),o()(n,x.b,10===e.columnWidth),n))},"".concat(d.name," ").concat(e.heading||"column ".concat(t)).concat(e.hideHeading?" hide heading":""),"brand"===e.type&&r()(v,{title:e.heading,description:e.description,link:e.link,columnId:M(d.name,e.name,"brand-column"),parentName:d.name,handleNestedLinkClick:P,footer:e.footer}),"links"===e.type&&r()(_.a,{footer:e.footer,heading:e.heading,hideHeading:e.hideHeading,innerColumnCount:e.innerGridColumnCount||1,columns:e.columns||[],links:e.links||[],columnId:M(d.name,e.name,"links-column"),parentName:d.name,handleNestedLinkClick:P,style:e.style}),"linksWithIcons"===e.type&&r()(w.a,{heading:e.heading,hideHeading:e.hideHeading,links:e.links||[],columnId:M(d.name,e.name,"links-icons-column"),parentName:d.name,handleNestedLinkClick:P}),"thumbnailContent"===e.type&&r()(b.a,{heading:e.heading,hideHeading:e.hideHeading,footer:e.footer,items:e.items,columnId:M(d.name,e.name,"thumbnail-column"),parentName:d.name,handleNestedLinkClick:P}))}))),"standalone"===d.productType&&!y&&r()("div",{className:x.r},void 0,d.name," is included in an All Access subscription."," ",r()("a",{href:E,onClick:function(e){return function(e,t,n){e.preventDefault();var i=C;i.module.element={name:T("go-to-".concat(n,"-learn-more")),label:T("clicked-".concat(n,"-learn-more")),url:t},k.trackEvent(O(O({},i),{},{eventCallback:S(t)}))}(e,E,d.name)}},void 0,"Learn more.")),"standalone"===d.productType&&y&&r()("div",{className:x.r},void 0,d.name," is included in your All Access subscription."))};T.displayName="DropDownPanel",T.defaultProps={className:void 0,isFloatingNav:!1,visibleNestedNav:null,regionForTracking:"masthead",pagetype:"home"};t.a=T},"n+OA":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.topRuleClass=t.titleClass=t.sectionRuleClass=t.paragraphClass=t.listItemClass=t.leadInClass=t.guideContainerClass=void 0;var r=n("Jqp9"),a=i(n("3Rk2")),o=i(n("wXC7")),s=n("3sMT"),l=(0,a.default)([o.default.breakpoint.medium]),c=(0,r.css)("font-family:",o.default.font.franklinBase,";color:",s.color.content.secondary,";background-color:",s.color.background.primary,";max-width:600px;width:",o.default.breakpoint.mobileFullWidth,";margin:0 auto 1.5rem;font-size:",o.default.font.size(17),";line-height:",o.default.font.size(24),";",o.default.printHide," strong{font-weight:",o.default.font.weight.bold,";}em{font-style:italic;}a{color:",s.color.signal.editorial,";text-decoration:underline;text-decoration-thickness:1px;text-underline-offset:1px;&:hover{text-decoration:none;}}");t.guideContainerClass=c;var u=(0,r.css)("border-top:2px solid ",s.color.stroke.primary,";margin-top:1.25rem;margin-bottom:1.25rem;");t.topRuleClass=u;var d=(0,r.css)("margin-top:1rem;margin-bottom:1rem;");t.sectionRuleClass=d;var p=(0,r.css)("list-style:disc;padding-left:0;margin-bottom:0;margin-left:12px;");t.listItemClass=p;var f=(0,r.css)("font-family:",o.default.font.serifMedium,";font-weight:",o.default.font.weight.bold,";color:",s.color.content.primary,";margin:0;",l({fontSize:[o.default.font.size(24),o.default.font.size(28)],lineHeight:[o.default.font.size(28),o.default.font.size(32)]}));t.titleClass=f;var m=(0,r.css)("font-size:inherit;font-weight:",o.default.font.weight.medium,";padding-top:",o.default.font.size(12),";");t.leadInClass=m;var h=(0,r.css)("font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.medium,";",l({fontSize:[o.default.font.size(17),o.default.font.size(17)],lineHeight:[o.default.font.size(24),o.default.font.size(24)]}));t.paragraphClass=h},n00r:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a=i(n("J4zp")),o=i(n("lwsE")),s=i(n("W8MJ")),l=i(n("7W2i")),c=i(n("a1gu")),u=i(n("Nsbk")),d=i(n("R+Gq")),p=i(n("W7lC")),f=n("V6Yu");function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.default)(this,n)}}var h=function(e){(0,l.default)(n,e);var t=m(n);function n(e,i){var r,a,s,l,c;return(0,o.default)(this,n),(c=t.call(this,e)).buildQAList=function(e){return e.map((function(e){var t=e.answer,n=e.question;return new p.default(n,t)}))},c.headline=(null===(r=c.data)||void 0===r||null===(a=r.headline)||void 0===a?void 0:a.seo)||(null===(s=c.data)||void 0===s||null===(l=s.headline)||void 0===l?void 0:l.default),c["@type"]="FAQPage",c.mainEntity=c.buildQAList(i),c}return(0,s.default)(n,null,[{key:"isDateless",value:function(e){return!(null!=e&&e.match(/\/[0-9]{4}\/[0-9]{2}\/[0-9]{2}\//))}},{key:"getQuestions",value:function(e){for(var t,n="",i=function(){var e=!1;return n="",function(t){if(e)return n;if((n+=t).length>=500)switch(e=!0,n[n.length-1]){case".":n+="..";break;case" ":n="".concat(n.slice(0,n.length-1),"..");break;default:n+="..."}return n}},r="",o=i(),s=[],l=e.length-1,c=0;c<=l;){var u=c===l,d=e[c],p=(0,f.textFromOakContent)([d]),m=d.__typename,h=(t=p,"Heading2Block"===m?[(null==t?void 0:t.length)&&t.match(/.*\?.?/),t]:[!1,""]),g=(0,a.default)(h,2),y=g[0],v=g[1];!y&&r&&o(p),(y||u)&&n.length&&s.push({question:r,answer:n}),y&&(o=i(),r=v),c+=1}return s}}]),n}(d.default);r=h,h.isFAQPage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,n=e.sprinkledBody,i=void 0===n?{}:n,a=r.isDateless(t);if(!a)return[!1,[]];var o=i.content,s=void 0===o?[]:o,l=r.getQuestions(s);return[l.length>2,l]};var g=h;t.default=g},n7ID:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-athletic-pulse-bc1160f70031b452aec5578d67207a0a.webp"},"nGF/":function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lwsE")),o=i(n("W8MJ")),s=i(n("7W2i")),l=i(n("a1gu")),c=i(n("Nsbk")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),d=n("Jqp9"),p=i(n("x9rc")),f=n("vOGy");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,l.default)(this,n)}}function g(e){var t=!1;return function(){if(!t)return t=!0,e()}}var y=function(e){(0,s.default)(n,e);var t=h(n);function n(){var e;(0,a.default)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={useFallback:!1,reducedMotion:!1,hasLoaded:!1},e.videoRef=e.props.videoRef||u.default.createRef(),e.imgRef=u.default.createRef(),e.isVideoPlaying=function(){var t;if(null!==(t=e.videoRef)&&void 0!==t&&t.current){var n=e.videoRef.current;if(n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2)return!0}return!1},e.handleBadProps=function(){var t=e.props,n=t.src,i=t.imgFallback;n||i||e.handleVideoError()},e.handleVideoError=function(){e.setState({useFallback:!0})},e.handleOnLoad=g((function(){var t,n;null===(t=(n=e.props).onLoad)||void 0===t||t.call(n)})),e.handleOnError=function(){var t,n;null===(t=(n=e.props).onError)||void 0===t||t.call(n)},e.shouldReducedMotion=function(){try{return window.matchMedia("(prefers-reduced-motion)").matches}catch(e){return!1}},e}return(0,o.default)(n,[{key:"componentDidMount",value:function(){var e,t,n,i,r=this;(setTimeout(this.handleBadProps,500),this.shouldReducedMotion())&&(this.props.useVideoReducedMotionFallback?(null!==(n=this.videoRef)&&void 0!==n&&n.current&&(this.videoRef.current.pause(),this.videoRef.current.currentTime=0),this.setState({reducedMotion:!0})):this.setState({useFallback:!0}));(this.isVideoPlaying()&&this.handleOnLoad(),null!==(e=this.imgRef)&&void 0!==e&&null!==(t=e.current)&&void 0!==t&&t.complete)&&((null===(i=this.imgRef)||void 0===i?void 0:i.current.naturalHeight)>0?this.handleOnLoad():this.handleOnError());if(this.props.deferLoading&&!this.state.hasLoaded&&"undefined"!=typeof window){var a=function(){r.setState({hasLoaded:!0})};"complete"===document.readyState?a():window.addEventListener("load",a)}}},{key:"componentDidUpdate",value:function(){var e,t,n,i;this.props.playVideo&&!1===this.state.reducedMotion&&(null===(e=this.videoRef)||void 0===e||null===(t=e.current)||void 0===t||t.play());this.props.pauseVideo&&(null===(n=this.videoRef)||void 0===n||null===(i=n.current)||void 0===i||i.pause())}},{key:"render",value:function(){var e=!this.state.useFallback&&this.props.imgLoading,t=!this.state.reducedMotion&&(!1===this.props.deferLoading||!0===this.state.hasLoaded),n=u.default.createElement(u.default.Fragment,null,u.default.createElement("img",{src:this.props.imgFallback||this.props.imgLoading,onLoad:this.handleOnLoad,onError:this.handleOnError,className:f.mediaClass,alt:this.props.imgFallbackAltText,ref:this.imgRef}),!1===this.props.fallback&&!this.state.useFallback&&this.props.src&&u.default.createElement("video",{"data-testid":"cinemagraph","data-play":this.props.playVideo,poster:e?this.props.imgLoading:void 0,src:this.props.src,ref:this.videoRef,className:(0,d.cx)("cinemagraph_video",f.mediaClass),muted:!0,loop:!0,autoPlay:t,controls:this.state.reducedMotion,playsInline:!0,onPlay:this.handleOnLoad,onError:this.handleVideoError,preload:t?void 0:"none"}),this.props.textOverlay);return this.props.renderAspectRatioPlaceholder?u.default.createElement(p.default,{className:(0,d.cx)(this.props.className,this.props.containerClass),ratio:this.props.ratio,style:{overflow:"hidden"}},n):n}}]),n}(u.PureComponent);y.defaultProps={src:void 0,onLoad:function(){},onError:function(){},ratio:"16:9",imgFallback:void 0,imgLoading:void 0,className:void 0,containerClass:"",textOverlay:void 0,playVideo:void 0,pauseVideo:void 0,useVideoReducedMotionFallback:!0,videoRef:void 0,deferLoading:!1,fallback:!1,renderAspectRatioPlaceholder:!0},y.displayName="Cinemagraph";var v=y;t.default=v},nosR:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.commonPrioritizedVideoRenditions=void 0,t.computeAspectRatioFromRendition=p,t.findRenditionsByRatio=t.findRenditionOfBestFitUrl=t.findRenditionOfBestFit=t.findCropsByRatio=t.findCommonPrioritizedVideoRendition=t.filterVideoRenditionsByPreferredRatio=void 0,t.parseRatio=d,t.sortByQuality=t.preferredMobileRatios=t.preferredDesktopRatios=void 0,t.sortRenditionsByTargetRatioAndFit=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1080;if(!e)return[];var i=e.filter(Boolean);if(i.length<1)return[];if(!i.some((function(e){return!(null==e||!e.aspectRatio)||(null==e?void 0:e.height)&&(null==e?void 0:e.width)})))return i;var a=i.filter((function(e){return"thumbs"!==e.type})),o=(0,r.default)(new Set(a.map(p)));o.sort((function(e,n){return Math.abs(t-e)-Math.abs(t-n)}));var s=o[0],l=a.filter((function(e){return Math.abs(p(e)-s)<.01})),c=a.filter((function(e){return Math.abs(p(e)-s)>.01}));return[].concat((0,r.default)(f(l,n)),(0,r.default)(f(c,n)))};var r=i(n("RIqP")),a=n("vFws"),o=function(e,t){var n,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var a=(0,r.default)(e);if((a=a.filter((function(e){return"number"==typeof e.width}))).sort((function(e,t){return e.width-t.width})),i)for(var o=a.filter((function(e){return/_mobile/.test(e.type)})),s=0;s<o.length&&(n=o[s],!(o[s].width>t));s+=1);else{var l=a.filter((function(e){var t;return!(null!=e&&null!==(t=e.type)&&void 0!==t&&t.toString().includes("_mobile"))}));l.length>0&&(a=l)}if(!n)for(var c=0;c<a.length&&!((n=a[c]).width>t);c+=1);}catch(e){return null}return n};t.findRenditionOfBestFit=o;t.findRenditionOfBestFitUrl=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=o(e,t,n);return i?i.url:null};var s=function(e,t){if(null!=e&&e.find){var n=e.find((function(e){return e.name===a.RATIOS[t]}));if(n)return n;var i=e.find((function(e){return"MASTER"===e.name}));if(i)return i}return null};t.findCropsByRatio=s;t.findRenditionsByRatio=function(e,t){var n=s(e,t);return null!=n&&n.renditions?n.renditions:null};var l={smartphone:["video_1080p_mp4_mobile","video_720p_mp4_mobile","video_480p_mp4_mobile","video_360p_mp4_mobile","video_240p_mp4_mobile","video_1080p_mp4","video_720p_mp4","video_480p_mp4","video_360p_mp4","video_240p_mp4"],tablet:["video_1080p_mp4","video_720p_mp4","video_480p_mp4","video_360p_mp4","video_240p_mp4"],desktop:["video_1080p_mp4","video_720p_mp4","video_480p_mp4","video_360p_mp4","video_240p_mp4"]};t.commonPrioritizedVideoRenditions=l;t.findCommonPrioritizedVideoRendition=function(e,t){for(var n,i=0;i<l[t].length&&!n;i+=1)for(var r=0;r<e.length&&!n;r+=1){var a=l[t][i],o=e[r];a===o.type&&(n=o)}return n?[n]:e};var c=["16:9","3:2"];t.preferredDesktopRatios=c;var u=["1:1","2:3","9:16","4:5","16:9","3:2"];t.preferredMobileRatios=u;function d(e){if(!e)return 0;var t=e.split(":");return parseInt(t[0],10)/parseInt(t[1],10)}function p(e){return e.aspectRatio?d(e.aspectRatio):parseInt(e.width,10)/parseInt(e.height,10)}t.filterVideoRenditionsByPreferredRatio=function(e,t){var n=c;"smartphone"===t&&(n=u);var i=n.reduce((function(t,n){return 0===t.length?t.concat(e.filter((function(e){return e.aspectRatio===n}))):t}),[]);return i.length>0?i:e};var f=function(e,t){return(0,r.default)(e).sort((function(e,n){return Math.abs(t-(e.height&&parseInt(e.height,10)))-Math.abs(t-(n.height&&parseInt(n.height,10)))}))};t.sortByQuality=f},nqWJ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.titleClass=t.readerContextClass=t.labelClass=t.containerClass=t.bodyClass=t.arrowClass=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=n("3sMT"),s=(0,r.css)("background-color:",o.color.background.secondary,";margin-bottom:1rem;transition:opacity 0.2s ease-out;.hide{opacity:0;display:none;}.show{opacity:1;display:block;}");t.readerContextClass=s;var l=(0,r.css)("font-family:",a.default.font.franklinBase,";font-weight:",a.default.font.weight.medium,";font-size:0.75rem;line-height:1;margin-bottom:5px;cursor:pointer;");t.labelClass=l;var c=(0,r.css)("font-family:",a.default.font.serifMedium,";font-weight:",a.default.font.weight.medium,";font-size:1.3rem;line-height:1;cursor:pointer;margin:0 auto;transition:text-decoration 0.2s ease-out;");t.titleClass=c;var u=(0,r.css)("transition:opacity 1s ease-out;padding:0 1.5rem 1.5rem;font-size:15px;margin-bottom:0;a{text-decoration:underline;color:",o.color.signal.editorial,";&:hover{text-decoration:none;}}",a.default.breakpoint.small,"{line-height:1.47rem;}");t.bodyClass=u;var d=(0,r.css)("display:flex;justify-content:space-between;padding:1.5rem;");t.containerClass=d;var p=(0,r.css)("display:flex;align-items:center;");t.arrowClass=p},nxD0:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.playIconDisplayStyles=t.StyledAudioRelatedLink=t.AudioRelatedLinkTextWrapper=t.AudioRelatedLinkSummary=t.AudioRelatedLinkPlayIconWrapper=t.AudioRelatedLinkMediaWrapper=t.AudioRelatedLinkLabel=t.AudioRelatedLinkImage=t.AudioRelatedLinkHeadline=t.AudioRelatedLinkDuration=t.AudioRelatedLinkCaption=t.AudioRelatedLinkAudioTag=t.AudioRelatedLinkAudioSignalWrapper=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=i(n("WThh")),s=n("6l8D"),l=n("3sMT"),c=(0,o.default)(["medium","small","mediumLarge"]),u=(0,r.themeFn)("displayStyle",{standard:function(e){return(0,r.css)("margin-right:10px;width:75px;min-width:75px;",e.theme.breakpointMap.medium,"{margin-right:15px;width:135px;min-width:135px;}")},expanded:function(e){return(0,r.css)("margin-bottom:15px;min-width:285px;",e.theme.breakpointMap.small,"{max-width:400px;margin-left:auto;margin-right:auto;}",e.theme.breakpointMap.medium,"{max-width:285px;margin-bottom:0;margin-right:15px;}")},compact:(0,r.css)("display:none;")}),d=(0,r.styled)("div",{target:"eilw6ym0"})(u,";");t.AudioRelatedLinkMediaWrapper=d;var p=(0,r.themeFn)("displayStyle",{standard:(0,r.css)("min-width:75px;"),expanded:(0,r.css)("min-width:285px;")}),f=(0,r.styled)("img",{target:"eilw6ym1"})("width:100%;",p,";");t.AudioRelatedLinkImage=f;var m=(0,r.styled)("p",{target:"eilw6ym2"})("display:block;color:",l.color.content.quaternary,";min-height:",a.default.font.size(12),";font-size:",a.default.font.size(10),";line-height:",a.default.font.size(12),";letter-spacing:0.2px;text-align:right;");t.AudioRelatedLinkCaption=m;var h=(0,r.themeFn)("displayStyle",{compact:(0,r.css)("color:",l.color.signal.editorial,";text-decoration:underline;margin-bottom:7px;&:hover,&:focus{text-decoration:none;}"),standard:(0,r.css)("color:",l.color.content.primary,";"),expanded:function(e){return(0,r.css)("color:",l.color.content.primary,";",e.theme.breakpointMap.medium,"{margin-bottom:7px;}")}}),g=(0,r.themeFn)("displayStyle",{compact:function(e){return(0,r.css)("font-family:",a.default.font.serifBase,";font-weight:",a.default.font.weight.medium,";",c(e,{fontSize:[16,17],lineHeight:[22,23]}),";")},standard:function(e){return(0,r.css)("font-family:",a.default.font.serifMedium,";font-weight:",a.default.font.weight.medium,";",c(e,{fontSize:[16,19],lineHeight:[19,23]}),";")},expanded:function(e){return(0,r.css)("font-family:",a.default.font.serifMedium,";font-weight:",a.default.font.weight.bold,";",c(e,{fontSize:[18,19],lineHeight:[22,23]}),";")}}),y=(0,r.styled)("div",{target:"eilw6ym3"})("display:inline;",h,";",g,";");t.AudioRelatedLinkHeadline=y;var v=(0,r.themeFn)("displayStyle",{expanded:function(e){return(0,r.css)(e.theme.breakpointMap.medium,"{margin-bottom:2px;}")}}),b=(0,r.styled)("div",{target:"eilw6ym4"})("color:",l.color.content.tertiary,";font-weight:",a.default.font.weight.book,";font-family:",a.default.font.serifBase,";font-size:",a.default.font.size(15),";line-height:",a.default.font.size(20),";margin-top:0.4rem;",v,";");t.AudioRelatedLinkSummary=b;var _=(0,r.css)("flex-grow:1;"),w=(0,r.styled)("div",{target:"eilw6ym5"})(_);t.AudioRelatedLinkTextWrapper=w;var x=function(e){return(0,r.css)("color:",l.color.content.primary,";font-family:",a.default.font.franklinBase,";font-weight:",a.default.font.weight.mediumBold,";letter-spacing:0.1em;text-transform:uppercase;",c(e,{fontSize:[11,12],lineHeight:[16,18]}))},k=(0,r.styled)("div",{target:"eilw6ym6"})((function(e){return"compact"===e.theme.displayStyle&&(0,r.css)("display:block;margin-right:0.3em;")}),";",x);t.AudioRelatedLinkLabel=k;var O=(0,r.styled)("span",{target:"eilw6ym7"})((0,r.css)("color:",l.color.content.quaternary,";margin-left:0.2rem;"),";");t.AudioRelatedLinkAudioTag=O;var E=function(){return(0,r.css)("margin-top:8px;display:flex;align-items:center;")},T=(0,r.styled)("div",{target:"eilw6ym8"})(E);t.AudioRelatedLinkAudioSignalWrapper=T;var C=(0,r.themeFn)("displayStyle",{standard:function(e){return(0,r.css)(c(e,{marginRight:[8,12]})," svg{",c(e,{height:[20,24],width:[20,24]}),";}")},expanded:(0,r.css)("margin-right:12px;svg{height:24px;width:24px;}"),compact:(0,r.css)("display:none;")});t.playIconDisplayStyles=C;var S=(0,r.styled)("div",{target:"eilw6ym9"})(C);t.AudioRelatedLinkPlayIconWrapper=S;var P=(0,r.themeFn)("displayStyle",{none:(0,r.css)("svg{margin-left:10px;}")}),M=(0,r.themeFn)("displayStyle",{none:function(e){return(0,r.css)("color:",l.color.content.quaternary,";font-family:",a.default.font.franklinBase,";font-weight:",a.default.font.weight.medium,";letter-spacing:0.1em;text-transform:uppercase;",c(e,{fontSize:[11,12],lineHeight:[16,18]}))}}),I=(0,r.styled)("div",{target:"eilw6ym10"})(P,";",M,";");t.AudioRelatedLinkDuration=I;var A=(0,r.themeFn)("displayStyle",{standard:(0,r.css)("display:flex;align-items:flex-start;"),expanded:function(e){return(0,r.css)("display:flex;flex-direction:column;",e.theme.breakpointMap.medium,"{flex-direction:row;align-items:center;}")}}),j=function(e){return"compact"===e.theme.displayStyle?(0,r.css)(":not(:last-child){margin-bottom:0.75rem;}"):(0,r.css)(":not(:last-child){margin-bottom:1rem;}")},L=function(e){return"compact"===e.theme.displayStyle?(0,r.css)("color:",l.color.signal.editorial,";"):(0,r.css)("color:",l.color.content.quaternary,";")},R=(0,r.styled)("div",{target:"eilw6ym11"})("&:hover,&:visited{",y,"{",L,";}}.",s.linkClass,"{",A,";}",j,";");t.StyledAudioRelatedLink=R},"o+dK":function(e,t,n){"use strict";var i=n("VkAN"),r=n.n(i),a=n("gcR/"),o=n.n(a),s=(n("q1tI"),n("eFc+")),l=n.n(s),c=n("InUh"),u=n.n(c),d=n("Jqp9"),p=n("Ymd4"),f=n("WPUH"),m=n("uoyi"),h=n("jOYC"),g=n("534C"),y=n.n(g),v=n("1rl3"),b=n("pCca"),_=n("wXC7"),w=n.n(_),x=n("3sMT"),k=n("nosR"),O=n("nGF/"),E=n.n(O),T=n("139F"),C=n.n(T),S=n("pVYW"),P=Object(d.css)(w.a.breakpoint.mediumLarge,"{height:100%;padding-bottom:0;}padding-bottom:66.6666666666%;"),M=Object(d.css)("position:relative;",w.a.breakpoint.small,"{margin-bottom:43px;}margin-bottom:37px;"),I=Object(d.css)("display:block;margin-right:7px;color:",x.color.content.quaternary,";font-family:",w.a.font.serifBase,";font-size:0.875rem;line-height:1.125rem;");function A(e){var t,n,i,r,a=e.data,s=e.containerClass,l=e.textOverlay,c=Object(b.a)().breakpoint,u=(t=a.media.renditions,i=(n=c)<=600,r=t.filter((function(e){return/\.mp4$/.test(e.url)})),Object(k.findRenditionOfBestFitUrl)(r,n,i)),p=a.media.promotionalMedia&&a.media.promotionalMedia.promotionalMedia||a.media.promotionalMedia,f=function(e,t){var n=t<=600,i=e.filter((function(e){return/\.mp4$/.test(e.url)}));if(0===i.length)throw new Error("An mp4 video is required");return Object(k.findRenditionOfBestFit)(i,t,n)}(a.media.renditions,c),m=(null==f?void 0:f.aspectRatio)||a.media.aspectRatio||"".concat(f.width,":").concat(f.height),h=function(e,t,n){var i=n<=600,r=Object(k.findRenditionsByRatio)(e,t);return Object(k.findRenditionOfBestFitUrl)(r,n,i)}(p.crops,m,c),g="",y=a.media.summary;if(a.media.bylines&&a.media.bylines.length){var v=a.media.bylines.find((function(e){return e.renderedRepresentation}));g=v&&v.renderedRepresentation}return o()("div",{className:Object(d.cx)(s,M,"sizeFull")},void 0,o()(E.a,{src:u,imgFallback:h,className:P,ratio:c<1024?m:"",textOverlay:l}),(g||y)&&o()(S.a,{},void 0,y&&o()("span",{className:Object(d.cx)(I),dangerouslySetInnerHTML:{__html:y}}),g&&o()(C.a,{dangerouslySetInnerHTML:{__html:g}})))}A.displayName="HeaderCinemagraphWrapper",A.defaultProps={textOverlay:null};var j,L=A,R=n("mGV9"),N=Object(d.css)("margin-top:0;",w.a.breakpoint.small,"{margin-top:0;}",w.a.breakpoint.mediumLarge,"{max-width:none;width:100%;}"),D=Object(d.css)(w.a.breakpoint.mediumLarge,"{display:flex;flex-direction:column;right:0;padding:50px 50px 70px 0;}"),B=Object(d.css)("position:relative;",w.a.breakpoint.mediumLarge,"{height:100vh;}"),z=Object(d.css)("display:block;",w.a.breakpoint.mediumLarge,"{span{::after{content:'';height:1px;width:72px;background-color:white;display:block;margin-top:1rem;margin-bottom:1.25rem;}}}"),F=u()((function(){return Promise.all([n.e(155),n.e(94)]).then(n.bind(null,"l+kF"))}),{loadableGenerated:{webpack:function(){return["l+kF"]},modules:["./HeaderFullBleedHorizontalVi"]}}),U={ImageBlock:f.a,VideoBlock:L},H=function(e){var t,n=Object(d.useTheme)(),i=e.data,r=e.collections,a=e.labelOverride,s=e.headlineClass,l=e.className,c=e.storyMetaOverrideClass,u=e.lastModified,f=!1;i.ledeMedia&&(f=Object.prototype.hasOwnProperty.call(U,i.ledeMedia.__typename),t=U[i.ledeMedia.__typename]);var g=i.ledeMedia&&f&&o()(t,{className:N,data:i.ledeMedia,containerClass:B,isFullBleed:!0,showCaption:!1,lede:!0,useResponsiveMedia:!0,useMobileCrop:!0})||null,b=i.headline&&o()(p.a,{data:i.headline,className:s}),_=i.summary&&o()(m.a,{data:i.summary}),w=n&&"opinion"===n.section,x=o()(y.a,{collections:r}),k="Visual Stacks"===(n&&n.storyFormat),O=(i.label||w||x)&&o()(R.a,{data:i.label,signalOpinion:w,timesExclusive:x,isVisualStacks:k,className:z}),E=Object(v.shouldUseHeaderV2Position)({textPosition:null==i?void 0:i.textPosition,lastModified:u,isVertical:!1});return o()(F,{headerMedia:g,label:a()||O,headline:b,summary:_,content:i,baseColumnStyle:h.a,storyMetaClass:Object(d.cx)("rightToLeft"===(null==n?void 0:n.languageDirection)?D:void 0,c),textPosition:null==i?void 0:i.textPosition,className:l,isVisualStacks:k,isVi:!0,useHeaderV2Position:E})};H.displayName="HeaderFullBleedHorizontalBlock",H.fragments={data:l()(j||(j=r()(['\n    fragment HeaderFullBleedHorizontalBlock_data on HeaderFullBleedHorizontalBlock {\n      headlineColor\n      displayOverride\n      gradientEnabled\n      label {\n        ...LabelBlock_data\n      }\n      headline {\n        ...Heading1Block_data\n      }\n      summary {\n        ...SummaryBlock_data\n      }\n      textPosition {\n        mobile\n        desktop\n      }\n      ledeMedia {\n        __typename\n        ... on ImageBlock {\n          size\n          media {\n            id\n            crops(renditionNames: ["articleLarge", "jumbo", "superJumbo", "mobileMasterAt3x"]) {\n              bleed {\n                percentTop\n                percentLeft\n                percentRight\n                percentBottom\n              }\n              renditions {\n                url\n                name\n                width\n                height\n              }\n            }\n            legacyHtmlCaption\n            altText\n            credit\n          }\n        }\n        ... on VideoBlock {\n          media {\n            id\n            aspectRatio\n            renditions {\n              width\n              height\n              url\n              aspectRatio\n              type\n            }\n            summary\n            bylines {\n              renderedRepresentation\n            }\n            promotionalMedia {\n              ... on Image {\n                id\n                crops {\n                  name\n                  renditions {\n                    width\n                    height\n                    url\n                  }\n                }\n              }\n              ... on Video {\n                id\n                promotionalMedia {\n                  ... on Image {\n                    id\n                    crops {\n                      name\n                      renditions {\n                        width\n                        height\n                        url\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    ',"\n    ","\n    ","\n  "])),p.a.fragments.data,R.a.fragments.data,m.a.fragments.data)},H.defaultProps={collections:null,data:null,labelOverride:function(){},headlineClass:void 0,className:void 0,storyMetaOverrideClass:void 0,lastModified:void 0};t.a=H},oCqg:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),i(n("AfrD"))),s=i(n("Pmun")),l=i(n("TB7k")),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("vubr"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}function d(e){var t,n=e.storyline.topLinks,i=e.trackingParams,r=e.trackLinkInteraction,u=n.displayName,d=n.leadIn,p=n.imageUrl,f=n.items;return u&&null!=f&&null!==(t=f.content)&&void 0!==t&&t.length?a.default.createElement("section",{role:"complementary","aria-labelledby":"styln-toplinks-title",className:c.containerClass},p&&a.default.createElement("img",{src:p,alt:"",className:c.imageClass}),a.default.createElement("header",{className:c.headerClass},a.default.createElement("h2",{id:"styln-toplinks-title",className:c.titleClass},u),d&&a.default.createElement("h3",{className:c.leadInClass},d)),a.default.createElement(o.default,{className:c.listClass},f.content.map((function(e,t){return a.default.createElement(s.default,{key:t.toString(),className:c.listItemClass},e.content.map((function(e,n){return a.default.createElement(l.default,{key:(t+n).toString(),text:e,internalLinkTrackingParams:i,trackLinkInteraction:r})})))})))):null}d.displayName="StorylineTopLinksV2",d.defaultProps={trackingParams:null,trackLinkInteraction:function(){}};var p=d;t.default=p},oEA4:function(e,t,n){"use strict";var i=n("pVnL"),r=n.n(i),a=n("QILm"),o=n.n(a),s=n("q1tI"),l=n.n(s),c=["children","onClickOutside"];function u(e){var t=e.children,n=e.onClickOutside,i=o()(e,c),a=Object(s.useRef)(!1),u=Object(s.useRef)(null);return Object(s.useEffect)((function(){var e=function(e){"touchend"===e.type&&(a.current=!0),"click"===e.type&&a.current||u.current.contains(e.target)||n(e)};return document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),function(){document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0)}}),[n]),l.a.createElement("div",r()({},i,{ref:u}),t)}u.displayName="ClickOutside",u.defaultProps={children:null},t.a=u},oKgi:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("6/jP")).default;t.default=r},oRP5:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n("gcR/"),r=n.n(i),a=(n("q1tI"),n("3sMT"));function o(e){var t=e.size,n=40,i=40;return"medium"===t?(n=30,i=30):"small"===t?(n=20,i=20):"extrasmall"===t&&(n=14,i=14),r()("svg",{width:i,height:n,viewBox:"0 0 40 40"},void 0,r()("path",{d:"M3 40V0l34 20z",fill:a.dark.colors.content.primary.hex,fillRule:"evenodd"}),"small"!==t&&"extrasmall"!==t&&r()("circle",{cx:"20",cy:"20",r:"19",stroke:a.dark.colors.stroke.primary.hex,fill:"transparent",strokeWidth:"2px"}))}o.displayName="PlayButton",o.defaultProps={size:"medium"}},oXTd:function(e,t,n){"use strict";n.d(t,"i",(function(){return i})),n.d(t,"p",(function(){return r})),n.d(t,"q",(function(){return a})),n.d(t,"k",(function(){return o})),n.d(t,"n",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"l",(function(){return c})),n.d(t,"o",(function(){return u})),n.d(t,"j",(function(){return d})),n.d(t,"f",(function(){return p})),n.d(t,"h",(function(){return f})),n.d(t,"g",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return v})),n.d(t,"m",(function(){return b}));var i={newsletterIndividualPage:"EmailSignup_NL_indiv_page",newsletterGridIndexPage:"EmailSignup_NL_index_page",newsletterSubOnlyIndexPage:"EmailSignup_NL_sub_only_index_page",onboardingAutoOptin:"Vi_Onboarding_auto_opt_v1",onboardingNewslettersGetStarted:"Vi_Onboarding_newsletters_getStarted",onboardingNewslettersGetStartedSub:"Vi_SubOnboarding_newsletters_getStarted",articleInline:"Vi_article_inline_v1",dynamicArticleInline:"Dynamic_article_inline_v1",onsiteNLTop:"OnsiteNL_top_v1",onsiteNLBottom:"OnsiteNL_bottom_v1",liveBlogPage:"LiveBlog_v1",emailSignupDock:"Vi_dock_v1",targetedNewsletterSignup:"Vi_article_recirc_v1"},r="SUBSCRIBER-ONLY NEWSLETTER",a="".concat(r,"S"),o="HIDDEN",s={BN:"es"},l={default:"default",alert:"alert"},c={seeSample:{"en-US":"Read the Latest",es:"Lee el ms reciente"},sendFrequency:{"en-US":"Sent to Your Inbox",es:"Se enva a tu buzn"},contactUs:{"en-US":"Contact us",es:"Contctenos"},privacyPolicy:{"en-US":"Privacy Policy",es:"Poltica de privacidad"}},u="Read the latest.",d={newsletterIndividualPage:"individual",newsletterGridIndexPage:"index",newsletterSubOnlyIndexPage:"subonly-index",article:"inline"},p="Thank you for signing up for 4 week complimentary access.",f="Thank you for signing up for this newsletter.",m="Thank you for signing up for these newsletters.",h="Weve sent you a confirmation email.",g="Weve sent you confirmation emails.",y="Thank you for signing up for this alert.",v="Thank you for signing up for these alerts.",b={NA:{kicker:"Stay up to date",caption:"Get informed as important news breaks around the world."},NN:{kicker:"Start your day",caption:"Make sense of the days news and ideas."},NE:{kicker:"Wind down",caption:"Find out the 10 most important things that happened today."},WG:{kicker:"What to watch",caption:"Discover streaming TV and movie recommendations from critic Margaret Lyons and friends."},RLW:{kicker:"What to read",caption:"Book recommendations from our critic Molly Young."},NC:{kicker:"Expert political analysis",caption:"Making sense of elections, politics and polling."},CLIM:{kicker:"Get clear-eyed analysis",caption:"Your must-read guide to the climate crisis."},TE:{kicker:"Your questions answered",caption:"Expert advice on lifes trickiest situations and moral dilemmas. "},PTG:{kicker:"Opinion Voice",caption:"Analyzing the American family, culture, politics and the way we live now."},DF:{kicker:"Opinion Voice",caption:"Reflections on law and culture, war and peace, and the deeper trends that define and divide America."},JBO:{kicker:"Opinion Voice",caption:"Historical context for present-day events."},PK:{kicker:"Opinion Voice",caption:"A guide to U.S. politics and the economy  from the mainstream to the wonkish."},INT:{kicker:"Decoding global events",caption:"Exploring the ideas and context behind major world events."},WTE:{kicker:"Find new favorites",caption:"Restaurant recommendations, from new places to beloved classics."},THW:{kicker:"Opinion Voice",caption:"Reflecting on matters of faith in private life and public discourse."},TMC:{kicker:"Opinion Voice",caption:"A sociologists perspective on culture, politics and the economics of our everyday lives."},RS:{kicker:"Keep up with the sport",caption:"News and analysis, on and off the pitch."},PW:{kicker:"Read reviews early",caption:"Get reviews of New York City restaurants sent to you directly  a day before everyone else."},PC:{kicker:"Opinion Voice",caption:"Offering sensible thinking on economics and the business issues that matter."},HH:{kicker:"Improve your well-being",caption:"Essential news and guidance to live your healthiest life."},DWW:{kicker:"Opinion Voice",caption:"Exploring climate change, technology, the future of the planet and how we live on it."},RD:{kicker:"Opinion Voice",caption:"The columnist reflects on culture and politics, but mostly culture."},AMP:{kicker:"Find your favorite song",caption:"Your alternative to the algorithm  a real, live human helps you discover songs youll love."},JM:{kicker:"Opinion Voice",caption:"Examining how race and language shape our politics and culture."},FB:{kicker:"Opinion Voice",caption:"Reflections on the mess (and magic) of politics and life."},WKDR:{kicker:"Our best weekend reads",caption:"Get stories handpicked by Times editors for you to enjoy each weekend."},FORY:{kicker:"A personal daily digest",caption:"Receive a roundup of the best stories for you, based on your interests."},TY:{kicker:"Gain perspective",caption:"Get expert analysis of the news and a guide to the big ideas shaping the world."},CK:{kicker:"What to cook",caption:"Feast on recipes, food writing and culinary inspiration from Sam Sifton and NYT Cooking."}}},oZ2M:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.spanClass=t.default=t.compoundBylineClass=t.BylineLink=void 0;var r=n("Jqp9"),a=n("3sMT"),o=i(n("wXC7")),s=(0,r.themeFn)("section",{none:(0,r.css)("font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.bold,";color:",a.color.content.secondary,";"),magazine:(0,r.css)("font-family:",o.default.font.magazineSansBase,";font-weight:",o.default.font.weight.bold,";color:",a.color.content.secondary,";"),"t-magazine":(0,r.css)("font-family:",o.default.font.tmagSansBase,";font-weight:",o.default.font.weight.medium,";color:",a.color.content.secondary,";")}),l=(0,r.styled)("a",{target:"e1jsehar0"})("color:inherit;text-decoration:underline;text-underline-offset:1px;text-decoration-thickness:1px;text-decoration-color:",a.color.content.quaternary,";&:hover,&:focus{text-decoration:none;}");t.BylineLink=l;var c=(0,r.css)("display:inline-block;");t.spanClass=c;var u=(0,r.css)("text-align:inherit;padding-right:12px;&:last-child{padding-right:0;}");t.compoundBylineClass=u;var d=(0,r.css)("font-size:",o.default.font.size(14),";line-height:",o.default.font.size(18),";",o.default.breakpoint.medium,"{font-size:",o.default.font.size(15),";line-height:",o.default.font.size(20),";}"),p=(0,r.css)("font-size:",o.default.font.size(13),";line-height:",o.default.font.size(17),";margin-top:",o.default.font.size(3),";",o.default.breakpoint.mediumLarge,"{font-size:",o.default.font.size(16),";line-height:",o.default.font.size(21),";}"),f=(0,r.themeFn)("section",{none:d,opinion:(0,r.themeFn)("opinionHeaderRedesign",{none:d,true:p})}),m=(0,r.styled)("p",{target:"e1jsehar1"})("display:inline-block;margin:0;",f,";",s,";");t.default=m},p1Mg:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),function(e){var t=e.className,n=e.fill;return r.default.createElement("svg",{className:t,viewBox:"0 0 7 15",width:"7",height:"15",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.775 14.163V7.08h1.923l.255-2.441H4.775l.004-1.222c0-.636.06-.977.958-.977H6.94V0H5.016c-2.31 0-3.123 1.184-3.123 3.175V4.64H.453v2.44h1.44v7.083h2.882z",fill:n}))});a.displayName="Facebook",a.defaultProps={className:void 0,fill:"#000"};var o=a;t.default=o},p1Tn:function(e,t,n){"use strict";n.d(t,"h",(function(){return i})),n.d(t,"g",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return u})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return p})),n.d(t,"k",(function(){return f}));var i=["nyt://per/personalized-list/welcome-banner-newsletter-rec","nyt://per/personalized-list/welcome-banner-newsletter-rec-subs","nyt://per/personalized-list/welcome-banner-newsletter-rec-clicks"],r=10,a=3,o=6,s="getStartedLater",l=9,c="welcomeBannerRegi",u="welcome-banner",d="SJ_regi_welcome_1123",p="1_old",f="2_new"},p3S2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.USER_STATE_API_TEST=t.THEMES=t.LIVE_ALERT_TOGGLE_DEFAULTS=t.LABELS=void 0;t.THEMES={LIVE_BLOG:"LIVE_BLOG",LIVE_BRIEFING:"LIVE_BRIEFING",COVERAGE_BRIEFING:"COVERAGE_BRIEFING",FACT_CHECK:"FACT_CHECK",EXPLAINER:"EXPLAINER",NEWS_BRIEFING:"NEWS_BRIEFING",STORYLINE_FEED:"LIVE_STORYLINE_FEED"};t.LABELS={RIGHT_NOW:"right now",MAJOR_UPDATES:"major updates",ART_HIGHLIGHT:"art highlight",BREAKING_UPDATES:"breaking",LIVE_UPDATES:"live",JUST_NOW:"just now",SUPPLEMENTAL:"supplemental",UNDERHIGHLIGHTS:"underhighlights"};t.USER_STATE_API_TEST={name:"STYLN_user_state_api_1122",control:"0_Control",variant:"1_User_State"};t.LIVE_ALERT_TOGGLE_DEFAULTS={cta:"Get notifications for updates on thisstory.",ariaLabel:"Subscribe to alerts toggle button",tooltipStorageKey:"styln_live_signup_alert_tooltip",notifications:function(e){return{subscribed:{title:e?"Live Update: ".concat(e):"Live Update",body:e?"You will receive alerts as this story develops.":"You will receive alerts for a live story."},unsubscribed:{title:"Unsubscribed",body:e?"You will no longer receive live update alerts for ".concat(e,"."):"You will no longer receive live update alerts."}}}}},p7hx:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lSNA")),a=i(n("QILm")),o=i(n("W8MJ")),s=i(n("lwsE")),l=i(n("7W2i")),c=i(n("a1gu")),u=i(n("Nsbk")),d=i(n("uf0L")),p=["url","servesCuisine","priceRange","telephone","image","geo","hasMenu","openingHours","acceptsReservations","address","reviewRating"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.default)(this,n)}}var g=function(e){(0,l.default)(n,e);var t=h(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.url,o=i.servesCuisine,l=i.priceRange,c=i.telephone,u=i.image,d=i.geo,f=i.hasMenu,h=i.openingHours,g=i.acceptsReservations,y=i.address,v=i.reviewRating,b=(0,a.default)(i,p);return(0,s.default)(this,n),(e=t.call(this,m(m({},b),{},{url:r})))["@type"]="Restaurant",e.servesCuisine=o,e.priceRange=l,e.telephone=c,e.image=u,e.geo=d,e.hasMenu=f,e.openingHours=h,e.acceptsReservations=g,e.address=y,e.reviewRating=v,e}return(0,o.default)(n)}(d.default);t.default=g},pQqS:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PUB_EVENTS",{enumerable:!0,get:function(){return r.PUB_EVENTS}}),Object.defineProperty(t,"adManager",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"adScripts",{enumerable:!0,get:function(){return o.default}});var r=n("hJkT"),a=i(n("PNea")),o=i(n("K8lX"))},pRWC:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-clean-everything-2ec25627f12347716015757e012ec04b.webp"},pVYW:function(e,t,n){"use strict";n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return m}));var i=n("Jqp9"),r=n("3sMT"),a=n("wXC7"),o=n.n(a),s=n("139F"),l=n.n(s),c=Object(i.css)(".sizeSmall &{width:50%;",o.a.breakpoint.small,"{width:300px;}",o.a.breakpoint.extraLarge,"{width:300px;}@media (max-width:",o.a.breakpoint.width.small,"px){width:50%;}}.sizeSmall.sizeSmallNoCaption &{margin-left:auto;margin-right:auto;}.sizeSmall.layoutVertical &{",o.a.breakpoint.medium,"{max-width:250px;}",o.a.breakpoint.mediumLarge,"{width:250px;}@media (max-width:",o.a.breakpoint.width.medium,"px){max-width:250px;}}.sizeSmall.layoutHorizontal &{",o.a.breakpoint.medium,"{max-width:300px;}",o.a.breakpoint.mediumLarge,"{width:300px;}@media (max-width:",o.a.breakpoint.width.medium,"px){max-width:300px;}}.sizeMedium.layoutVertical.verticalVideo &{",o.a.breakpoint.small,"{width:420px;}}"),u=Object(i.css)("margin:0 auto 37px auto;",o.a.breakpoint.medium,"{margin:0 auto;}"),d=Object(i.css)("margin:",o.a.breakpoint.mobileBlockMargins,";strong{font-weight:",o.a.font.weight.bold,";}em{font-style:italic;}&.sizeSmall{width:",o.a.breakpoint.mobileFullWidth,";display:flex;",o.a.breakpoint.small,"{max-width:",o.a.breakpoint.textBodyWidth,"px;margin-left:auto;margin-right:auto;}",o.a.breakpoint.mediumLarge,"{width:100%;}",o.a.breakpoint.extraLarge,"{max-width:",o.a.breakpoint.textBodyWidthExtralarge,"px;}&.sizeSmallNoCaption{display:block;@media print{display:none;}}}&.sizeMedium{width:100%;max-width:",o.a.breakpoint.textBodyWidth,"px;margin-right:auto;margin-left:auto;",o.a.breakpoint.small,"{width:",o.a.breakpoint.mobileFullWidth,";}",o.a.breakpoint.medium,"{max-width:",o.a.breakpoint.textBodyWidthExtralarge,"px;}&.layoutVertical{",o.a.breakpoint.small,"{width:420px;}&.verticalVideo{width:100%;",o.a.breakpoint.small,"{width:420px;}}}}&.sizeLarge{width:100%;max-width:",o.a.breakpoint.mediaMaxWidth,"px;margin-left:auto;margin-right:auto;",o.a.breakpoint.small,"{width:auto;}",o.a.breakpoint.medium,"{&.layoutVertical{width:",o.a.breakpoint.textBodyWidthExtralarge,"px;&.verticalVideo{width:",o.a.breakpoint.textBodyWidth,"px;}}}",o.a.breakpoint.mediumLarge,"{width:945px;}",o.a.breakpoint.extraLarge,"{width:",o.a.breakpoint.mediaMaxWidth,"px;&.layoutVertical{width:",o.a.breakpoint.mediumMediaExtralarge,"px;&.verticalVideo{width:",o.a.breakpoint.textBodyWidthExtralarge,"px;}}}}",o.a.breakpoint.medium,"{margin:",o.a.breakpoint.desktopMediaMargins,";}@media print{display:none;}"),p=Object(i.styled)("figcaption",{target:"e1maroi60"})("color:",r.color.content.quaternary,";font-family:",o.a.font.serifBase,";margin:10px ",o.a.grid.pageMargin,"px 0;text-align:left;a{color:",r.color.signal.editorial,";text-decoration:none;&:hover,&:focus{text-decoration:underline;}}",o.a.breakpoint.small,"{margin-left:0;}.sizeSmall &{display:flex;flex-direction:column;width:calc(50% - 15px);margin:auto 0 15px 15px;",o.a.breakpoint.small,"{width:260px;margin-left:15px;}",o.a.breakpoint.medium,"{margin-left:15px;}",o.a.breakpoint.extraLarge,"{width:330px;margin-left:15px;}@media (max-width:",o.a.breakpoint.width.small,"px){margin:auto 0 0 15px;}}.sizeSmall.sizeSmallNoCaption &{margin-left:auto;margin-right:auto;margin-top:10px;}.sizeMedium &{max-width:900px;}.sizeMedium.layoutVertical.verticalVideo &{margin-left:auto;margin-right:auto;width:",o.a.breakpoint.mobileFullWidth,";",o.a.breakpoint.small,"{width:100%;}}.sizeLarge &{max-width:none;",o.a.breakpoint.small,"{margin-left:",o.a.grid.pageMargin,"px;}",o.a.breakpoint.medium,"{margin-left:",o.a.grid.pageMargin,"px;max-width:900px;}",o.a.breakpoint.mediumLarge,"{margin-left:0;max-width:",o.a.breakpoint.mediumMediaExtralarge,"px;}",o.a.breakpoint.extraLarge,"{margin-left:0;max-width:900px;}}.sizeLarge.layoutVertical &{",o.a.breakpoint.medium,"{margin-left:0;}}.sizeFull &{margin-left:",o.a.grid.pageMargin,"px;",o.a.breakpoint.small,"{max-width:900px;}",o.a.breakpoint.medium,"{max-width:900px;}",o.a.breakpoint.extraLarge,"{max-width:900px;}}@media print{display:none;}"),f=Object(i.styled)("figcaption",{target:"e1maroi61"})("color:",r.color.content.quaternary,";font-family:",o.a.font.serifBase,";margin:7px ",o.a.grid.pageMargin,"px 0;text-align:right;direction:rtl;unicode-bidi:isolate;a{color:",r.color.signal.editorial,";text-decoration:none;&:hover,&:focus{text-decoration:underline;}}",o.a.breakpoint.small,"{margin-right:0;}.sizeSmall &{display:flex;flex-direction:column;width:calc(50% - 15px);margin:auto 0 15px 15px;",o.a.breakpoint.small,"{width:260px;margin-left:15px;}",o.a.breakpoint.medium,"{margin-left:15px;}",o.a.breakpoint.extraLarge,"{width:330px;margin-left:15px;}@media (max-width:",o.a.breakpoint.width.small,"px){margin:auto 0 0 15px;}}.sizeSmall.sizeSmallNoCaption &{margin-left:auto;margin-right:auto;margin-top:10px;}.sizeMedium &{max-width:900px;}.sizeMedium.layoutVertical.verticalVideo &{margin-left:0;margin-right:0;}.sizeLarge &{max-width:none;",o.a.breakpoint.small,"{margin-left:",o.a.grid.pageMargin,"px;}",o.a.breakpoint.medium,"{margin-left:",o.a.grid.pageMargin,"px;max-width:900px;}",o.a.breakpoint.mediumLarge,"{margin-left:0;max-width:",o.a.breakpoint.mediumMediaExtralarge,"px;}",o.a.breakpoint.extraLarge,"{margin-left:0;max-width:900px;}}.sizeLarge.layoutVertical &{",o.a.breakpoint.medium,"{margin-left:0;}}.sizeFull &{margin-left:",o.a.grid.pageMargin,"px;",o.a.breakpoint.small,"{max-width:900px;}",o.a.breakpoint.medium,"{max-width:900px;}",o.a.breakpoint.extraLarge,"{max-width:900px;}}@media print{display:none;}"),m=Object(i.styled)(l.a,{target:"e1maroi62"})(".sizeSmall.sizeSmallNoCaption &{",o.a.breakpoint.small,"{margin-left:5px;}",o.a.breakpoint.mediumLarge,"{margin-left:5px;}",o.a.breakpoint.extraLarge,"{margin-left:40px;}@media (max-width:",o.a.breakpoint.width.small,"px){margin-left:-8px;}}@media print{display:none;}")},pYsa:function(e,t,n){"use strict";var i=n("gcR/"),r=n.n(i),a=n("lSNA"),o=n.n(a),s=(n("q1tI"),n("Jqp9")),l=n("kPjT"),c=n("wXC7"),u=n.n(c),d=n("3sMT"),p=Object(s.styled)("div",{target:"e10k0zts0"})("font-weight:",u.a.font.weight.bold,";color:",d.color.content.primary,";:hover{color:",d.color.content.tertiary,";}"),f=Object(s.css)("display:flex;margin-bottom:1.25rem;color:",d.color.content.secondary,";:hover ",p,"{color:",d.color.content.tertiary,";}img{width:30px;height:30px;margin-right:0.625rem;margin-top:3px;object-fit:content-cover;}"),m=Object(s.css)("p{font-size:",u.a.font.size(14),";line-height:",u.a.font.size(20),";}"),h=Object(s.css)("border:1px solid ",u.a.color.gray60,";"),g=function(e){var t=e.description,n=e.handleNestedLinkClick,i=e.heading,a=e.link,l=e.parentName,c=e.thumbnailBorder,u=e.thumbnailImage,d=e.title,g=e.isHamburgerMenu;return r()("a",{className:Object(s.cx)(f,o()({},m,g)),href:a,onClick:function(e){return n(e,a,l,i,d)}},void 0,u&&r()("img",{src:u,alt:"".concat(d," Logo"),className:Object(s.cx)(o()({},h,c))}),r()("div",{},void 0,r()(p,{},void 0,d),r()("p",{},void 0,t)))};g.displayName="ContentCard",g.defaultProps={handleNestedLinkClick:function(){},heading:"",thumbnailBorder:!1,thumbnailImage:"",isHamburgerMenu:!1};var y=g,v=n("Gfev"),b=function(e){var t=e.columnId,n=e.handleNestedLinkClick,i=e.heading,a=e.hideHeading,c=e.footer,u=e.items,d=e.parentName,p=e.isHamburgerMenu;return r()("div",{id:t},void 0,r()("h3",{id:"".concat(t,"-header"),className:Object(s.cx)(v.o,o()({},v.p,!i))},void 0,!a&&i),r()("ul",{"aria-labelledby":"".concat(t,"-header")},void 0,u.map((function(e){return r()("li",{},e.title,r()(y,{description:e.description,handleNestedLinkClick:n,heading:i,link:e.link,parentName:d,thumbnailBorder:e.thumbnailBorder,thumbnailImage:e.thumbnailImage,title:e.title,isHamburgerMenu:p}))}))),r()(l.a,{footer:c,handleNestedLinkClick:n,heading:i,parentName:d}))};b.displayName="ContentCardColumn",b.defaultProps={handleNestedLinkClick:function(){},heading:"",hideHeading:!1,footer:{},isHamburgerMenu:!1};t.a=b},paWp:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return f}));var i=n("Jqp9"),r=n("wXC7"),a=n.n(r),o=n("3Rk2"),s=n.n(o),l=n("3sMT"),c=s()(["@media (min-width: ".concat(a.a.breakpoint.maxMobileContentWidth,"px)"),a.a.breakpoint.medium,a.a.breakpoint.mediumLarge,a.a.breakpoint.large]),u=Object(i.css)("margin-left:25px;margin-right:25px;",a.a.breakpoint.large,"{width:calc(100% - 50px);max-width:1200px;margin-left:auto;margin-right:auto;}"),d=Object(i.css)("background-color:",l.dark.colors.background.primary.transform(a.a.setAlpha(.6)).rgba,";border:1px solid ",l.dark.colors.stroke.primary.hex,";border-radius:3px;height:30px;left:10px;position:absolute;width:30px;",c({bottom:["35px","35px","35px","25px"]}),";"),p=Object(i.css)("background-image:url(","/vi-assets/static-assets/icon-media-slideshow-16x14-ffffff-dad880e7cfaac5facf5a03b3a4a1bdd3.svg",");height:14px;margin-top:7px;margin-left:7px;width:16px;"),f=Object(i.css)("border-right:11.9px inset transparent;border-top:7px inset transparent;border-bottom:7px inset transparent;border-left:11.9px solid ",a.a.color.white,";margin-top:8px;margin-left:9px;width:18px;")},pn2R:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("QILm")),a=i(n("W8MJ")),o=i(n("lwsE")),s=i(n("7W2i")),l=i(n("a1gu")),c=i(n("Nsbk")),u=i(n("hWkY")),d=n("6hsm"),p=["articleBody","meteredContentClass","environment"];function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,l.default)(this,n)}}var m=function(e){(0,s.default)(n,e);var t=f(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(i.articleBody,i.meteredContentClass),s=i.environment,l=void 0===s?"":s,c=(0,r.default)(i,p);(0,o.default)(this,n),(e=t.call(this,c))["@type"]="NewsArticle",e.isAccessibleForFree=!(null==c||!c.isAccessibleForFree);var u=["dev","local","stg"].includes(l)?"stg.nytimes.com":"nytimes.com";return a&&(e.hasPart={"@type":"WebPageElement",isAccessibleForFree:e.isAccessibleForFree,cssSelector:a?".".concat(a):".meteredContent"},e.isPartOf={"@type":["CreativeWork","Product"],name:d.NYT_ORGANIZATION.name,productID:"".concat(u,":basic")}),e}return(0,a.default)(n)}(u.default);t.default=m},pq3b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(e||"").replace(/"([\w,.?!)])/g,"$1").replace(/"/g,"").replace(/([^a-zA-Z\d]|^|\s+)'([\w,.?!)])/g,"$1$2").replace(/'/g,"").replace(/(-{2})/g,"")}},"q94/":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!s[e.__typename])return console.error('Unrecognized format "'.concat(e.__typename,'"')),t||null;return s[e.__typename](e,t,n,i)};var r=i(n("HTGc")),a=i(n("3HYe")),o=i(n("mFeT")),s={BoldFormat:r.default,ItalicFormat:a.default,LinkFormat:o.default}},qCfC:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i,r=n("VkAN"),a=n.n(r),o=n("gcR/"),s=n.n(o),l=(n("q1tI"),n("eFc+")),c=n.n(l),u=n("Jqp9"),d=n("HO7F");function p(e){var t=e.data,n=e.className,i=t.capsuleContent,r=i.uri,a=i.sourceId,o=i.body;return o&&o.content?s()("section",{className:Object(u.cx)(n,"capsule-content"),"data-id":a,"data-uri":r,"data-testid":"capsule-block"},void 0,s()(d.a,{body:o,uri:r})):null}p.displayName="CapsuleBlock",p.defaultProps={componentTypemapExtension:{},className:void 0},p.fragments={data:c()(i||(i=a()(["\n    fragment CapsuleBlock_data on CapsuleBlock {\n      capsuleContent: content {\n        ... on Capsule {\n          sourceId\n          slug\n          lastMajorModification\n          ...Capsule_data\n        }\n      }\n    }\n    ","\n  "])),d.a.fragments.data)}},qGEe:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("Vgop")),a=i(n("xPyS")),o=i(n("sg0Q")),s=i(n("AWWW")),l=i(n("TMfO")),c=i(n("I4yQ")),u=i(n("Ma1Z")),d=i(n("X4Xf")),p=i(n("UqQm")),f=i(n("r5E/")),m=i(n("zkhZ")),h=i(n("HNZC")),g={Reveal:r.default,PhotoQuote:a.default,ReaderContext:o.default,Ask:s.default,Aml:l.default,AdHint:c.default,BulletBriefing:u.default,TableOfContents:d.default,FeaturedReporter:p.default,Scrolly:f.default,MediaWithWriteThrough:m.default,DocPromo:h.default};t.default=g},qOgO:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.mainText=t.headerContainer=void 0;var r,a,o=n("Jqp9"),s=n("lVLo");t.headerContainer=(0,o.css)(r||(r=i(["\n  cursor: pointer;\n"],["\n  cursor: pointer;\n"]))),t.mainText=(0,o.css)(a||(a=i(["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  line-height: 17px;\n  padding-left: 20px;\n  text-decoration: underline;\n\n  @media (min-width: ","px) {\n    padding-left: unset;\n  }\n"],["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  line-height: 17px;\n  padding-left: 20px;\n  text-decoration: underline;\n\n  @media (min-width: ","px) {\n    padding-left: unset;\n  }\n"])),s.fonts.franklin,s.fontWeights.bold,s.widths.medium)},qf1F:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),i(n("7502"))),o=n("AteQ"),s=function(e){var t=e.alternateRating,n=e.children,i=e.claim,s=e.claimDate,l=e.claimReviewUrl,c=e.claimUrl,u=e.className,d=e.content,p=e.contentMetadata,f=e.firstPublished,m=e.hideClaim,h=e.hideSchema,g=e.rating,y=e.source,v=r.default.createElement(a.default,{alternateRating:t,claim:i,claimDate:s,claimReviewUrl:l,claimUrl:c,contentMetadata:p,firstPublished:f,rating:g,source:y});return m?v:r.default.createElement("div",{className:u},r.default.createElement(o.Claim,null,""!==c?r.default.createElement("a",{href:c},i):i),r.default.createElement(o.ClaimAttr,null," ",""!==c?r.default.createElement("a",{href:c},y):y),r.default.createElement(o.ClaimRating,null,t),r.default.createElement(o.ClaimContent,null,n||d),h?null:v)};s.displayName="ClaimReview",s.defaultProps={contentMetadata:"",alternateRating:"",className:void 0,children:null,hideSchema:!1};var l=s;t.default=l},qrZX:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=n("3sMT"),s=(0,r.styled)("span",{target:"ezdmqqa0"})("margin-right:10px;padding:6px 7px 3px;display:none;white-space:nowrap;align-items:center;border-radius:3px;font-family:",a.default.font.franklinBase,";font-weight:",a.default.font.weight.bold,";letter-spacing:0.03rem;font-size:",a.default.font.size(13),";line-height:",a.default.font.size(13),";color:",o.color.content.primary,";text-transform:uppercase;");t.default=s},qsmR:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=n("3sMT");t.default=function(){return r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},r.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 13.7683V6L14.5 9.88415L8 13.7683Z",fill:a.color.content.secondary}),r.default.createElement("circle",{cx:"10",cy:"10",r:"9.25",stroke:a.color.stroke.primary,strokeWidth:"1.5"}))}},r0tw:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"i",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return m})),n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return g}));var i=n("Jqp9"),r=n("wXC7"),a=n.n(r),o=n("3sMT"),s=a.a.breakpoint,l=Object(i.css)("background-color:",o.color.background.primary,";height:25px;.hiddenClass{display:none;}"),c=Object(i.css)("height:auto;width:auto;border:solid 1px ",o.color.stroke.quaternary,";background-color:",o.color.background.primary,";border-radius:30px;font-size:",a.a.font.size(12),";font-family:",a.a.font.franklinBase,";text-transform:uppercase;&:hover{background-color:",o.color.background.tertiary,";border:1px solid ",o.color.background.tertiary,";}.hiddenClass{display:none;}&[aria-checked='true']{.saved-fill{fill:",o.color.stroke.primary,";}.saved-stroke{fill:",o.color.stroke.primary,";}}&[aria-checked='false']{.saved-fill{fill:none;}.saved-stroke{fill:",o.color.stroke.primary,";}}&[aria-busy='true']{cursor:default;background-color:",o.color.background.tertiary,";}"),u=Object(i.css)("cursor:not-allowed;",s.large,"{&:hover g,&:focus g{stroke:",o.color.stroke.secondary,";opacity:1;}}"),d=Object(i.css)("padding-left:10px;"),p=Object(i.css)("padding-right:7px;margin-left:-4px;"),f=Object(i.css)(s.large,"{&:hover g,&:focus g{stroke:",o.color.stroke.primary,";opacity:0.4;}}"),m=Object(i.css)(s.large,"{&:hover g,&:focus g{stroke:",o.color.stroke.primary,";}}"),h=Object(i.css)(s.large,"{&:hover g,&:focus g{opacity:0.5;}}"),g=Object(i.css)(s.large,"{&:hover g,&:focus g{opacity:1;}}")},r3VM:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-the-upshot-826140ece0fb230ed2af6d87ef0ab42b.webp"},"r5E/":function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("pVnL")),o=i(n("RIqP")),s=i(n("lwsE")),l=i(n("W8MJ")),c=i(n("7W2i")),u=i(n("a1gu")),d=i(n("Nsbk")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),f=(i(n("17x9")),n("Jqp9")),m=n("abzs"),h=n("hMrr"),g=i(n("IFOt")),y=i(n("2cNn"));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}var _=function(e){(0,c.default)(n,e);var t=b(n);function n(){var e;(0,s.default)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).media=[],e.id="",e.state={mobile:!0,isIE11:!1},e}return(0,l.default)(n,[{key:"componentDidMount",value:function(){var e,t,n=this;if(this.props.isInEditor)return null;if(11===(e=window.navigator.userAgent,(t=e.indexOf("MSIE"))>0?parseInt(e.substring(t+5,e.indexOf(".",t)),10):navigator.userAgent.match(/Trident\/7\./)?11:0))return this.setState({isIE11:!0}),null;window.matchMedia("(min-width: 750px)").matches&&this.setState({mobile:!1});var i=(0,o.default)(document.querySelectorAll(".scrolly-text-".concat(this.id))).map((function(e,t){return{el:e,mediaEl:document.getElementById("scrolly-image-".concat(t,"-").concat(n.id)),credit:n.media[t].credit,active:!1}})),r=document.getElementById("scrolly-credit-".concat(this.id));var a=new IntersectionObserver((function(e){e.forEach((function(e){var t,n=parseInt(e.target.id.split("-")[1],10);i[n].active=e.isIntersecting,e.intersectionRatio>0&&(r.innerHTML=i[n].credit),t=i.findLastIndex((function(e){return e.active})),i.forEach((function(e,n){e.mediaEl.style.opacity=n<=t?"1":"0"}))}))}));return i.forEach((function(e){return a.observe(e.el)})),null}},{key:"render",value:function(){for(var e=this,t=this.props,n=t.article,i=t.isInAMP,r=t.isInEditor,o=n.content||n.sprinkledBody&&n.sprinkledBody.content,s=!1,l=0,c=0;c<o.length;c+=1)if("UnstructuredBlock"===o[c].__typename&&"ExperimentalBlock_Scrolly"===o[c].dataType&&(l+=1,JSON.stringify(this.props.media)===JSON.stringify(o[c].mediaRefs))){0===c&&(s=!0);break}if(i)return p.default.createElement(g.default,(0,a.default)({},this.props,{scrollyIndex:l}));if(r)return p.default.createElement("div",{className:h.oakClass},p.default.createElement("p",null,"SCROLLING SLIDESHOW"));if(this.id=this.props.index,this.media=this.props.media.map((function(e,t){if("Image"===e.__typename){var n=((0,m.getCrop)(e.crops,"MASTER")&&(0,m.getCrop)(e.crops,"MASTER").renditions).length;return{url:(0,m.getCrop)(e.crops,"MASTER").renditions[n-1].url,mobileUrl:(0,m.getCrop)(e.crops,"MOBILE_MASTER")?(0,m.getCrop)(e.crops,"MOBILE_MASTER").renditions[0].url:(0,m.getCrop)(e.crops,"MASTER").renditions[n-1].url,text:e.legacyHtmlCaption||e.caption.text,credit:e.credit,index:t,__typename:"Image"}}if("Video"===e.__typename){var i,r=e.renditions.find((function(e){return"video_720p_mp4_mobile"===e.type}));return i=r&&r.url?r.url:e.renditions.find((function(e){return"video_480p_mp4"===e.type})).url,{url:e.renditions.find((function(e){return"video_1080p_mp4"===e.type})).url,mobileUrl:i,text:e.headline.default,credit:e.summary,index:t,__typename:"Video"}}return null})),this.state.isIE11)return p.default.createElement(y.default,{media:this.media});var u={muted:!0,loop:!0,autoPlay:!0,playsInline:!0};return p.default.createElement("div",{id:"".concat("scrolly-instance","-").concat(l),className:(0,f.cx)((0,h.containerClass)(s),"scrolly-container")},p.default.createElement("div",{className:h.innerContainerOneClass},p.default.createElement("div",{className:h.innerContainerTwoClass},this.media.map((function(t,n){return"Image"===t.__typename?p.default.createElement("img",{className:(0,f.cx)(h.imgClass,"scrolly-image-".concat(n)),alt:"photo",id:"scrolly-image-".concat(n,"-").concat(e.id),src:e.state.mobile?t.mobileUrl:t.url,"data-credit":t.credit}):p.default.createElement("video",(0,a.default)({className:(0,f.cx)(h.imgClass,"scrolly-image-".concat(n)),alt:"video",id:"scrolly-image-".concat(n,"-").concat(e.id),src:e.state.mobile?t.mobileUrl:t.url,"data-credit":t.credit},u))})),p.default.createElement("p",{id:"scrolly-credit-".concat(this.id),className:h.creditClass},this.media[0].credit))),this.media.map((function(t,n){return p.default.createElement("p",{id:"scrolly-".concat(n),"data-credit":t.credit,className:(0,f.cx)(h.pClass,"scrolly-text-".concat(e.id)),dangerouslySetInnerHTML:{__html:t.text}})})))}}]),n}(p.Component);_.displayName="Scrolly",_.defaultProps={isInEditor:!1,isInAMP:!1};var w=(0,f.withTheme)(_);t.default=w},r6lX:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.convertTrackingParams=t.coerceTrackingParams=void 0,t.initHybridUnifiedTracking=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=e||("undefined"!=typeof window?window:void 0);var i=(null===(t=e)||void 0===t?void 0:t.UnifiedTracking)||{};if(i.context="hybrid",!e)return i;e.UnifiedTracking=i;var a={success:!1,error:!0,errorDetails:"No valid context, no analytic sent"};return i.sendAnalytic=function(){var t=(0,o.default)(r.default.mark((function t(i,o){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.sendAnalytic){t.next=11;break}return t.prev=1,t.next=4,e.NativeBridge.sendAnalytic(i,o);case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),console.log(t.t0),t.abrupt("return",new Promise((function(e){return e({success:!1,error:!0,errorDetails:t.t0})})));case 11:return t.abrupt("return",Promise.resolve(a));case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}(),i},t.initUnifiedTracking=function(e){var t;e=e||("undefined"!=typeof window?window:void 0);var n=(null===(t=e)||void 0===t?void 0:t.UnifiedTracking)||{};if(!e)return n;e.UnifiedTracking=n;var i=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(t=e.navigator)||void 0===t?void 0:t.userAgent,i=/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/i;return i.test(n)},a=function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(t=e.navigator)||void 0===t?void 0:t.userAgent,i=/nyt[-_]?ios/i;return i.test(n)},s={success:!1,error:!0,errorDetails:"No valid context, no analytic sent"};(null===(l=e)||void 0===l?void 0:l.vi)?n.context="web":function(){var t,n,r,o,s,l,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(t=e.navigator)||void 0===t?void 0:t.userAgent;return(i(c)||a(c)||Boolean(null===(n=e)||void 0===n||null===(r=n.NYTG)||void 0===r?void 0:r.enqueue)||Boolean(null===(o=e)||void 0===o||null===(s=o.navigator)||void 0===s?void 0:s.native)||Boolean(null===(l=e)||void 0===l?void 0:l.config))&&!!e.NativeBridge}()&&(n.context="hybrid");var l;return n.sendAnalytic=function(){var t=(0,o.default)(r.default.mark((function t(i,a){var o;return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("web"!==n.context){t.next=4;break}return e.dataLayer=e.dataLayer||[],Array.isArray(e.dataLayer)&&(a.event=a.event||i,e.dataLayer.push(a)),t.abrupt("return",new Promise((function(e){return e({success:!0})})));case 4:if("hybrid"!==n.context){t.next=17;break}if(null===(o=e.NativeBridge)||void 0===o||!o.sendAnalytic){t.next=16;break}return t.prev=6,t.next=9,e.NativeBridge.sendAnalytic(i,a);case 9:return t.abrupt("return",t.sent);case 12:return t.prev=12,t.t0=t.catch(6),console.log(t.t0),t.abrupt("return",new Promise((function(e){return e({success:!1,error:!0,errorDetails:t.t0})})));case 16:case 17:return t.abrupt("return",new Promise((function(e){return e(s)})));case 18:case"end":return t.stop()}}),t,null,[[6,12]])})));return function(e,n){return t.apply(this,arguments)}}(),n},t.unifiedTrackingWebSnippet=t.trackLinkInteraction=t.trackImpression=void 0;var r=i(n("o0o1")),a=i(n("lSNA")),o=i(n("yXPU"));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c="\n  (".concat((function(e){var t,n=(null===(t=e=e||("undefined"!=typeof window?window:void 0))||void 0===t?void 0:t.UnifiedTracking)||{};return n.context="web",e?(e.UnifiedTracking=n,n.sendAnalytic=function(t,n){return e.dataLayer=e.dataLayer||[],Array.isArray(e.dataLayer)&&(n.event=n.event||t,e.dataLayer.push(n)),Promise.resolve({success:!0})},n):n}),")(window);\n");t.unifiedTrackingWebSnippet=c;var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return null==e?void 0:e.reduce((function(e,t){return e[t.key]=t.value,e}),{})};t.convertTrackingParams=u;var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return null==e?void 0:e.reduce((function(e,t){var n="imp_id"===(null==t?void 0:t.key)||"req_id"===(null==t?void 0:t.key),i="fellback"===(null==t?void 0:t.key);return e[null==t?void 0:t.key]=n?Number(null==t?void 0:t.value):i?"true"===(null==t?void 0:t.value):null==t?void 0:t.value,e}),{})};t.coerceTrackingParams=d;t.trackLinkInteraction=function(e,t,n,i){if("undefined"!=typeof window&&window.UnifiedTracking){var r="web"===window.UnifiedTracking.context,a=r?"moduleInteraction":"interaction";if(e.target.closest("a")||e.target.closest("button")){var o,s,c,p=t.node,f=void 0===p?{}:p,m=t.trackingParams,h=u(void 0===m?[]:m),g={event_data:l(l({type:r?"ob_click":"tap"},r&&{trigger:"item"}),{},{pagetype:i}),module:{label:n.label,name:"".concat(i," tap"),context:n.context,element:{url:null!==(o=f.url||f.targetUrl)&&void 0!==o?o:"",uri:null!==(s=f.uri)&&void 0!==s?s:"",index:null!==(c=t.index)&&void 0!==c?c:null,type:i}},algos:h,package:{algos_meta:d(null==n?void 0:n.trackingParams)}};window.UnifiedTracking.sendAnalytic(a,g)}}};t.trackImpression=function(e,t,n){var i,r,a;if("undefined"!=typeof window&&window.UnifiedTracking){var o=e.node,s=void 0===o?{}:o,l=e.trackingParams,c={algos:u(void 0===l?[]:l),card:{url:null!==(i=s.url||s.targetUrl)&&void 0!==i?i:"",uri:null!==(r=s.uri)&&void 0!==r?r:"",index:null!==(a=e.index)&&void 0!==a?a:null,type:n},block:{label:t.label,name:t.context,index:t.index},package:{algos_meta:d(null==t?void 0:t.trackingParams)}};window.UnifiedTracking.sendAnalytic("impression",c)}}},rCSJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=!("undefined"==typeof window||!window.document||!window.document.createElement);t.default=i},rHUa:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.textAreaClass=t.oakClass=void 0;var i=n("Jqp9"),r=(0,i.css)("background:rgba(0,0,0,0.05);height:100%;padding:15px;font-family:'Consolas','Courier New',monospace;");t.oakClass=r;var a=(0,i.css)("height:400px;width:100%;");t.textAreaClass=a},rJzx:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.withBorderClass=t.storylinesMenuShadowClass=t.storylinesMenuApplyShadowClass=t.logoOnRightClass=t.logoClass=t.linkClass=t.hybridAudioPromoBannerClass=t.hideOnAndroidClass=t.hasAudioDeepLinkClass=t.bannerWrapperClass=t.audioTextClass=t.audioPromoWrapperClass=t.audioAppAsBannerClass=void 0;var r=n("Jqp9"),a=i(n("qp0C")),o=n("3sMT"),s=i(n("DxDJ")),l=i(n("wXC7")),c=(0,r.css)("display:flex;gap:0.75rem;align-items:center;margin:0 auto;width:100%;max-width:550px;");t.audioPromoWrapperClass=c;var u=(0,r.css)("flex-direction:row-reverse;max-width:600px;");t.logoOnRightClass=u;var d=(0,r.css)("margin:auto;& > a > div{justify-content:center;}");t.hasAudioDeepLinkClass=d;var p=(0,r.css)("color:",o.color.content.secondary,";font-size:",a.default.size(14),";line-height:",a.default.size(18),";font-weight:",a.default.weight.medium,";font-family:",a.default.franklinBase,";",s.default.small,"{font-size:",a.default.size(15),";line-height:",a.default.size(20),";}");t.audioTextClass=p;var f=(0,r.css)("flex-shrink:0;width:50px;height:50px;",s.default.small,"{width:40px;height:40px;}");t.logoClass=f;var m=(0,r.css)("font-weight:",a.default.weight.bold,";text-decoration:underline 1px;text-underline-offset:2px;@media (hover:hover){&:hover{text-decoration:none;}}");t.linkClass=m;var h=(0,r.css)("&::after{content:'';position:absolute;top:0;left:0;height:100%;width:100%;z-index:-1;box-shadow:0 0 transparent,0 0 transparent,1px 3px 6px #00000026;opacity:0;transition:opacity 200ms ease-out;@media (prefers-color-scheme:dark){.NYTApp &{box-shadow:none;}}}");t.storylinesMenuShadowClass=h;var g=(0,r.css)("border-bottom:1px solid transparent;&::after{opacity:1;}@media (prefers-color-scheme:dark){.NYTApp &{border-bottom:1px solid ",o.color.stroke.quaternary,";}}");t.storylinesMenuApplyShadowClass=g;var y=(0,r.css)("width:calc(100% - 40px);max-width:600px;margin:0 auto;min-height:75px;display:flex;align-items:center;border-bottom:1px solid transparent;");t.audioAppAsBannerClass=y;var v=(0,r.css)("position:fixed;width:100%;top:env(safe-area-inset-top,0);left:0;z-index:",l.default.zIndex.navigation,";background-color:",o.color.background.elevated,";");t.hybridAudioPromoBannerClass=v;var b=(0,r.css)("border-bottom:1px solid transparent;");t.bannerWrapperClass=b;var _=(0,r.css)("border-bottom:1px solid ",o.color.stroke.quaternary,";");t.withBorderClass=_;var w=(0,r.css)(".NYTApp.ANDROID &{display:none;}");t.hideOnAndroidClass=w},rNEd:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var i,r=n("VkAN"),a=n.n(r),o=n("gcR/"),s=n.n(o),l=n("lSNA"),c=n.n(l),u=(n("q1tI"),n("eFc+")),d=n.n(u),p=n("XlcC"),f=n("yEZI"),m=n.n(f),h=n("Jqp9"),g=n("HTd6"),y=n("wXC7"),v=n.n(y),b=Object(h.css)("font-family:",v.a.font.karnakBase,";font-weight:",v.a.font.weight.medium,";",v.a.breakpoint.medium,"{font-size:1.8rem;line-height:1.33;}");function _(e){var t=e.data,n=e.className,i=e.isFirstParagraph,r=e.isFirstTextAfterHeading2Block,a=Object(h.useTheme)(),o=a.treatment,l=a.noFollowExternalLinks,u=a.onPageDeeplinks,d="guide"===o&&(i||r),f=Object(h.cx)(n,c()({},b,d)),g=Object(p.createMapInlineUnionWithOptions)({noFollowExternalLinks:l,onPageDeeplinks:u});return s()(m.a,{className:f},void 0,t.content.map(g))}_.displayName="ParagraphBlock",_.defaultProps={data:null,className:void 0,isFirstParagraph:!1,isFirstTextAfterHeading2Block:!1},_.fragments={data:d()(i||(i=a()(["\n    fragment ParagraphBlock_data on ParagraphBlock {\n      textAlign\n      content {\n        ...TextInline_content\n      }\n    }\n    ","\n  "])),g.a.fragments.content)}},rONy:function(e,t,n){"use strict";t.a=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;n>4||(window.Iterate?t():window.setTimeout((function(){return e(t,n+1)}),1e3))}},raa0:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.voxPopImageOverrideClass=t.paragraphOverrideClass=t.opinionLabelOverrideClass=t.linkPostChildrenClass=t.interactiveOverrideClass=t.BlockClasses=void 0;var r=i(n("lSNA")),a=n("Jqp9"),o=n("3sMT"),s=i(n("wXC7")),l=n("p3S2"),c=(0,a.css)("margin-left:26px;margin-right:26px;");t.paragraphOverrideClass=c;var u=(0,a.css)(".interactive-content,.margins-v{margin:1rem auto;",s.default.breakpoint.medium,"{margin:1.5rem auto 2rem;}}");t.interactiveOverrideClass=u;var d=(0,a.css)("width:calc(100% - 40px);> figcaption{margin-left:0;}",s.default.breakpoint.small,"{margin-left:auto;margin-right:auto;max-width:600px;}");t.voxPopImageOverrideClass=d;var p=(0,a.css)("cursor:pointer;");t.linkPostChildrenClass=p;var f=(0,a.css)("font-size:",s.default.font.size(15),";line-height:",s.default.font.size(30),";color:",o.color.content.tertiary,";margin-bottom:0;",s.default.breakpoint.medium,"{font-size:",s.default.font.size(16),";line-height:",s.default.font.size(30),";}");t.opinionLabelOverrideClass=f;var m={ParagraphBlock:(0,r.default)({},l.THEMES.STORYLINE_FEED,{carousel:(0,a.css)("&:first-of-type{display:inline;}")}),Heading3Block:{FACT_CHECK:(0,a.css)("& span{background-color:",o.color.signal.highlight,";padding:6px 9px 4px 9px;}"),default:null},DetailBlock:{FACT_CHECK:{default:(0,a.css)("&:first-of-type{margin-bottom:30px;font-size:",s.default.font.size(18),";}"),liveSplitLayout:(0,a.css)("&:first-of-type{margin-bottom:30px;font-size:",s.default.font.size(18),";line-height:",s.default.font.size(20),";}")},default:null}};t.BlockClasses=m},rnec:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=n("3sMT");t.default=function(){return r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none"},r.default.createElement("path",{d:"M19.25 10C19.25 15.1086 15.1086 19.25 10 19.25C4.89137 19.25 0.75 15.1086 0.75 10C0.75 4.89137 4.89137 0.75 10 0.75C15.1086 0.75 19.25 4.89137 19.25 10Z",stroke:a.color.stroke.primary,strokeWidth:"1.5"}),r.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 5.66699H13.3333V14.3337H11V5.66699Z",fill:a.color.content.secondary}),r.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.66797 5.66699H9.0013V14.3337H6.66797V5.66699Z",fill:a.color.content.secondary}))}},s2os:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var i=n("Jqp9"),r=Object(i.css)("display:none;"),a=Object(i.css)("&::before,&::after{display:table;clear:both;content:'';line-height:0;}")},s6ck:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.Heading3AsH2=void 0;var r=i(n("Bi8q")),a=r.default.withComponent("h2",{target:"e12nqm5i0"});t.Heading3AsH2=a;var o=r.default;t.default=o},sCLo:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.dockBorder=t.button=t.subHeader=t.smallSubHeader=t.header=t.mainContent=t.headerText=void 0;var r,a,o,s,l,c,u,d=n("Jqp9"),p=n("lVLo");t.headerText=(0,d.css)(r||(r=i(["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  line-height: 11px;\n  margin: auto 0;\n  margin-left: 20px;\n"],["\n  font-family: ",";\n  font-size: 15px;\n  font-weight: ",";\n  line-height: 11px;\n  margin: auto 0;\n  margin-left: 20px;\n"])),p.fonts.franklin,p.fontWeights.bold),t.mainContent=(0,d.css)(a||(a=i(["\n  display: flex;\n  background-color: ",";\n  font-family: ",";\n  max-width: 240px;\n  border-radius: 4px;\n  height: 166px;\n  padding: 20px;\n  flex-direction: column;\n  margin: 0 auto 20px;\n  align-self: flex-start;\n\n  @media (min-width: ","px) {\n    max-width: unset;\n    width: calc(100% - 80px);\n  }\n\n  @media (min-width: ","px) {\n    flex-direction: row;\n    max-width: 1180px;\n    height: 100px;\n    justify-content: space-between;\n  }\n\n  @media (min-width: ","px) {\n    margin: 0 auto 20px auto;\n  }\n"],["\n  display: flex;\n  background-color: ",";\n  font-family: ",";\n  max-width: 240px;\n  border-radius: 4px;\n  height: 166px;\n  padding: 20px;\n  flex-direction: column;\n  margin: 0 auto 20px;\n  align-self: flex-start;\n\n  @media (min-width: ","px) {\n    max-width: unset;\n    width: calc(100% - 80px);\n  }\n\n  @media (min-width: ","px) {\n    flex-direction: row;\n    max-width: 1180px;\n    height: 100px;\n    justify-content: space-between;\n  }\n\n  @media (min-width: ","px) {\n    margin: 0 auto 20px auto;\n  }\n"])),p.colors.whiteDarkContentPrimary,p.fonts.franklin,p.widths.verySmall,p.widths.mediumLarge,p.widths.large),t.header=(0,d.css)(o||(o=i(["\n  font-size: 14px;\n  font-weight: ",";\n  line-height: 18.2px;\n  color: ",";\n  margin: 0;\n  width: 240px;\n\n  @media (min-width: ","px) {\n    width: 100%;\n    margin: 5px auto 0;\n  }\n\n  @media (min-width: ","px) {\n    font-size: 18px;\n    line-height: 27px;\n  }\n"],["\n  font-size: 14px;\n  font-weight: ",";\n  line-height: 18.2px;\n  color: ",";\n  margin: 0;\n  width: 240px;\n\n  @media (min-width: ","px) {\n    width: 100%;\n    margin: 5px auto 0;\n  }\n\n  @media (min-width: ","px) {\n    font-size: 18px;\n    line-height: 27px;\n  }\n"])),p.fontWeights.semiBold,p.colors.veryDarkGrey,p.widths.verySmall,p.widths.mediumLarge),t.smallSubHeader=(0,d.css)(s||(s=i(["\n  font-size: 10px;\n  line-height: 14px;\n"],["\n  font-size: 10px;\n  line-height: 14px;\n"]))),t.subHeader=(0,d.css)(l||(l=i(["\n  font-size: 11px;\n  line-height: 15.4px;\n  font-weight: ",";\n  max-width: 694px;\n  color: ",";\n  margin: 20px 0;\n  width: 240px;\n\n  @media (min-width: ","px) {\n    width: 100%;\n  }\n\n  @media (min-width: ","px) {\n    font-size: 13px;\n    line-height: 19.5px;\n    margin: 0;\n  }\n"],["\n  font-size: 11px;\n  line-height: 15.4px;\n  font-weight: ",";\n  max-width: 694px;\n  color: ",";\n  margin: 20px 0;\n  width: 240px;\n\n  @media (min-width: ","px) {\n    width: 100%;\n  }\n\n  @media (min-width: ","px) {\n    font-size: 13px;\n    line-height: 19.5px;\n    margin: 0;\n  }\n"])),p.fontWeights.medium,p.colors.veryDarkGrey,p.widths.verySmall,p.widths.mediumLarge),t.button=(0,d.css)(c||(c=i(["\n  text-decoration: none;\n  font-size: 12px;\n  font-weight: ",";\n  line-height: 14.4px;\n  color: ",";\n  background-color: ",";\n  margin-top: 10px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  text-align: center;\n  border-radius: 4px;\n  cursor: pointer;\n  width: 220px;\n  height: 38px;\n  padding: 11.8px 10px;\n  margin: 0 0 20px 0;\n  letter-spacing: -0.05px;\n  flex: 0;\n\n  @media (min-width: ","px) and (max-width: ","px) {\n    align-self: center;\n  }\n\n  @media (min-width: ","px) {\n    max-width: 191px;\n    height: 32px;\n    flex: 1;\n    padding: 0;\n    margin-top: 16px;\n    align-self: center;\n    font-size: 14px;\n    line-height: 18.2px;\n    font-weight: ",";\n  }\n"],["\n  text-decoration: none;\n  font-size: 12px;\n  font-weight: ",";\n  line-height: 14.4px;\n  color: ",";\n  background-color: ",";\n  margin-top: 10px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  text-align: center;\n  border-radius: 4px;\n  cursor: pointer;\n  width: 220px;\n  height: 38px;\n  padding: 11.8px 10px;\n  margin: 0 0 20px 0;\n  letter-spacing: -0.05px;\n  flex: 0;\n\n  @media (min-width: ","px) and (max-width: ","px) {\n    align-self: center;\n  }\n\n  @media (min-width: ","px) {\n    max-width: 191px;\n    height: 32px;\n    flex: 1;\n    padding: 0;\n    margin-top: 16px;\n    align-self: center;\n    font-size: 14px;\n    line-height: 18.2px;\n    font-weight: ",";\n  }\n"])),p.fontWeights.bold,p.colors.white,p.colors.black,p.widths.verySmall,p.widths.medium,p.widths.mediumLarge,p.fontWeights.semiBold),t.dockBorder=(0,d.css)(u||(u=i(["\n  border-top: 1px solid ",";\n"],["\n  border-top: 1px solid ",";\n"])),p.colors.veryDarkGrey)},sKBQ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=function(){return r.default.createElement("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none"},r.default.createElement("rect",{width:"26",height:"26",fill:"black",fillOpacity:"0"}),r.default.createElement("mask",{id:"mask0","mask-type":"alpha",maskUnits:"userSpaceOnUse",x:"6",y:"9",width:"14",height:"9"},r.default.createElement("path",{d:"M8.0275 9.30566L13 14.2673L17.9725 9.30566L19.5 10.8332L13 17.3332L6.5 10.8332L8.0275 9.30566Z",fill:"white"})),r.default.createElement("g",{mask:"url(#mask0)"},r.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 0H26V26H0V0Z",fill:"black",fillOpacity:"0.54"})))};a.displayName="DownArrow";var o=a;t.default=o},sQQE:function(e,t,n){"use strict";var i=n("gcR/"),r=n.n(i),a=(n("q1tI"),n("wXC7")),o=n.n(a),s=function(e){var t=e.className,n=e.ariaHidden;return r()("svg",{"aria-hidden":n,width:"19",height:"19",viewBox:"0 0 19 19",className:t},void 0,r()("path",{d:"M18.04 5.293h-2.725c.286-.34.493-.74.606-1.17a2.875 2.875 0 0 0-.333-2.322A2.906 2.906 0 0 0 13.64.48a3.31 3.31 0 0 0-2.372.464 3.775 3.775 0 0 0-1.534 2.483l-.141.797-.142-.847A3.745 3.745 0 0 0 7.927.923 3.31 3.31 0 0 0 5.555.459 2.907 2.907 0 0 0 3.607 1.78a2.877 2.877 0 0 0-.333 2.321c.117.429.324.828.606 1.171H1.155a.767.767 0 0 0-.757.757v3.674a.767.767 0 0 0 .757.757h.424v7.53A1.01 1.01 0 0 0 2.588 19h14.13a1.01 1.01 0 0 0 1.01-.959v-7.56h.424a.758.758 0 0 0 .757-.757V6.05a.759.759 0 0 0-.868-.757Zm-7.196-1.625a2.665 2.665 0 0 1 1.01-1.736 2.24 2.24 0 0 1 1.574-.313 1.817 1.817 0 0 1 1.211.818 1.857 1.857 0 0 1 .202 1.453 2.2 2.2 0 0 1-.838 1.191h-3.431l.272-1.413ZM4.576 2.386a1.837 1.837 0 0 1 1.221-.817 2.23 2.23 0 0 1 1.565.313 2.624 2.624 0 0 1 1.01 1.736l.242 1.453H5.182a2.2 2.2 0 0 1-.838-1.19 1.857 1.857 0 0 1 .202-1.495h.03ZM1.548 6.424h7.54V9.39h-7.58l.04-2.967Zm1.181 4.128h6.359v7.287H2.729v-7.287Zm13.777 7.287h-6.348v-7.307h6.348v7.307Zm1.181-8.468h-7.53V6.404h7.53V9.37Z",fill:o.a.color.gray10,fillRule:"nonzero"}))};s.displayName="GiftV2",s.defaultProps={className:void 0,ariaHidden:void 0},t.a=s},sTKe:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.checkAlreadyReceiving=void 0;var r=i(n("2ePO")),a=function(e,t){var n,i,a,o=t.productCode,s=t.allowedEntitlement,l=!(null==e||null===(n=e.userInfo)||void 0===n||null===(i=n.entitlements)||void 0===i||!i.length),c=(0,r.default)(null==e||null===(a=e.newsletterSubscriptions)||void 0===a?void 0:a.newsletters)[o];return!!c&&(!s||(!!l||!(null==c||!c.isFreeTrial)))};t.checkAlreadyReceiving=a;var o=a;t.default=o},sWm8:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("J4zp")),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),s=n("boCj"),l=(i(n("17x9")),i(n("kvrv"))),c=i(n("cc1G")),u=i(n("RxXP")),d=i(n("M8e9")),p=n("tDj8"),f=n("7zGq");function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e){var t=e.items,n=e.trackEvent,i=e.parentUrl,r=e.title,m=e.isPeeking,h=e.trackLinkInteraction,g=(0,o.useState)(0),y=(0,a.default)(g,2),v=y[0],b=y[1],_=(0,o.useState)(new Set),w=(0,a.default)(_,2),x=w[0],k=w[1],O=(0,o.useRef)(null),E=t.length,T=(0,o.useCallback)((function(e){h(e,v,E)}),[v,E,h]),C=function(e){e&&!x.has(v)&&n&&(n({event:"impression",module:{label:i},card:{index:v+1},block:{length:E}}),k((function(e){return e.add(v)})))};return o.default.createElement(o.default.Fragment,null,o.default.createElement(l.default,{ref:O,id:"storyline-context-container",a11yLabel:"Card ".concat(v+1," of ").concat(E),onSwipe:b,scrolledIndex:v,isPeeking:m},t.map((function(e){return o.default.createElement(s.InView,{onChange:C,threshold:1,key:e.text},o.default.createElement(c.default,{title:r,items:[e],trackLink:T}))}))),o.default.createElement("div",{className:p.swiperNavClass},o.default.createElement(u.default,{index:v,length:E}),o.default.createElement(d.default,{ariaControls:"storyline-context-container",index:v,length:E,handleNavLeft:function(){return(0,f.handleNavLeft)(O.current)},handleNavRight:function(){return(0,f.handleNavRight)(O.current)}})))}h.defaultProps={trackEvent:null};var g=h;t.default=g},sYsD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NewsletterProduct",{enumerable:!0,get:function(){return i.NewsletterProduct}}),Object.defineProperty(t,"getNewsletterProduct",{enumerable:!0,get:function(){return i.getNewsletterProduct}});var i=n("lKtF")},scmT:function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var r=i(n("q1tI")),a=n("tHll"),o=n("tRGv");t.default=function(){var e,t=(0,a.useUnit)(o.config).unit;return(null==t?void 0:t.canShow)?(null==t?void 0:t.component)?r.default.createElement(t.component,{unit:t}):(null===(e=null===o.config||void 0===o.config?void 0:o.config.fallback)||void 0===e?void 0:e.component)?r.default.createElement(o.config.fallback.component,{unit:t}):null:null}},sdlZ:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-canada-letter-30c08e776a61316a12718a308c12ca18.webp"},sg0Q:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lwsE")),o=i(n("W8MJ")),s=i(n("7W2i")),l=i(n("a1gu")),c=i(n("Nsbk")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),d=(i(n("17x9")),n("Jqp9")),p=i(n("yEZI")),f=i(n("0oBV")),m=i(n("HvIc")),h=i(n("sKBQ")),g=i(n("ibW7")),y=n("nqWJ");function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,l.default)(this,n)}}var _=function(e){(0,s.default)(n,e);var t=b(n);function n(){var e;(0,a.default)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isRevealed:e.props.isInEditor},e.toggleReveal=function(){var t=e.props,n=t.handleEvent,i=t.contentType;e.setState((function(e){return{isRevealed:!e.isRevealed}})),n&&n("click",{eventData:{trigger:i}})},e.handleKeyPress=function(t){"Enter"===t.key&&e.toggleReveal()},e}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props,t=e.isInAMP,n=e.className,i=e.contentType;if(t)return null;var r=this.state.isRevealed?"show":"hide",a=m.default.filter((function(e){return e.key===i}))[0]||{};return u.default.createElement("div",{className:(0,d.cx)(n,y.readerContextClass)},u.default.createElement("div",{className:y.containerClass,contentEditable:!1,onClick:this.toggleReveal,onKeyPress:this.handleKeyPress},u.default.createElement("div",null,u.default.createElement("div",{className:y.labelClass},a.label),u.default.createElement("div",{className:y.titleClass},a.title)),u.default.createElement("div",{className:y.arrowClass,tabIndex:"0",role:"button","aria-label":"expand","aria-expanded":this.state.isRevealed?"true":"false"},this.state.isRevealed?u.default.createElement(g.default,null):u.default.createElement(h.default,null))),u.default.createElement(p.default,{className:(0,d.cx)(y.bodyClass,r),dangerouslySetInnerHTML:{__html:a.body}}))}}]),n}(u.Component);_.displayName="ReaderContext",_.defaultProps={className:void 0,contentType:"",isInEditor:!1,isInAMP:!1,handleEvent:void 0};var w=(0,f.default)(_);t.default=w},shGR:function(e,t,n){"use strict";var i=n("VkAN"),r=n.n(i),a=n("gcR/"),o=n.n(a),s=(n("q1tI"),n("eFc+")),l=n.n(s),c=n("InUh"),u=n.n(c),d=n("Jqp9"),p=n("534C"),f=n.n(p),m=n("wXC7"),h=n.n(m),g=n("1rl3"),y=n("B0Ek"),v=n("Ymd4"),b=n("WPUH"),_=n("uoyi"),w=n("6NOd"),x=n("jOYC"),k=n("pCca"),O=n("3sMT"),E=n("nosR"),T=n("nGF/"),C=n.n(T),S=n("139F"),P=n.n(S),M=n("pVYW"),I=Object(d.css)(h.a.breakpoint.mediumLarge,"{height:100%;padding-bottom:0;}padding-bottom:150%;"),A=Object(d.css)(h.a.breakpoint.small,"{margin-bottom:43px;}margin-bottom:37px;"),j=Object(d.css)("display:block;margin-right:7px;color:",O.color.content.quaternary,";font-family:",h.a.font.serifBase,";font-size:0.875rem;line-height:1.125rem;");function L(e){var t,n,i,r,a=e.data,s=e.containerClass,l=e.imageLoadedHandler,c=Object(k.a)().breakpoint,u=(t=a.media.renditions,i=(n=c)<=600,r=t.filter((function(e){return/\.mp4$/.test(e.url)})),Object(E.findRenditionOfBestFitUrl)(r,n,i)),p=a.media.promotionalMedia&&a.media.promotionalMedia.promotionalMedia||a.media.promotionalMedia,f=function(e,t){var n=t<=600,i=e.filter((function(e){return/\.mp4$/.test(e.url)}));if(0===i.length)throw new Error("An mp4 video is required");return Object(E.findRenditionOfBestFit)(i,t,n)}(a.media.renditions,c),m=(null==f?void 0:f.aspectRatio)||a.media.aspectRatio||"".concat(f.width,":").concat(f.height),h=function(e,t,n){var i=n<=600,r=Object(E.findRenditionsByRatio)(e,t);return Object(E.findRenditionOfBestFitUrl)(r,n,i)}(p.crops,m,c),g="",y=a.media.summary;if(a.media.bylines&&a.media.bylines.length){var v=a.media.bylines.find((function(e){return e.renderedRepresentation}));g=v&&v.renderedRepresentation}return o()("div",{className:Object(d.cx)(s,A,"sizeFull")},void 0,o()(C.a,{src:u,imgFallback:h,className:I,ratio:c<1024?m:"",onLoad:l}),(g||y)&&o()(M.a,{},void 0,y&&o()("span",{className:Object(d.cx)(j),dangerouslySetInnerHTML:{__html:y}}),g&&o()(P.a,{dangerouslySetInnerHTML:{__html:g}})))}L.displayName="HeaderCinemagraphWrapper";var R,N=L,D=n("mGV9"),B=Object(d.css)("margin-top:0;",h.a.breakpoint.small,"{margin-top:0;}",h.a.breakpoint.mediumLarge,"{max-width:none;width:100%;}"),z=Object(d.css)("position:relative;",h.a.breakpoint.mediumLarge,"{background-color:#fff;height:100vh;}"),F=Object(d.css)("display:block;",h.a.breakpoint.mediumLarge,"{span{::after{content:'';height:1px;width:72px;display:block;margin:1rem auto 1.25rem;}}}"),U=u()((function(){return Promise.all([n.e(156),n.e(95)]).then(n.bind(null,"swNt"))}),{loadableGenerated:{webpack:function(){return["swNt"]},modules:["./HeaderFullBleedVerticalVi"]}}),H="\n  ".concat(h.a.breakpoint.mediumLarge," {\n    &::first-letter {\n      margin-left: 0;\n    }\n\n    .balancedHeadline {\n      &::first-letter {\n        margin-left: 0;\n      }\n    }\n  }\n"),W={ImageBlock:b.a,VideoBlock:N},q=function(e){var t,n=e.data,i=e.collections,r=e.showMasthead,a=e.lastModified,s=Object(w.b)().mastheadStyleProps,l=Object(d.useTheme)(),c=!1;n.ledeMedia&&(c=Object.prototype.hasOwnProperty.call(W,n.ledeMedia.__typename),t=W[n.ledeMedia.__typename]);var u=n.ledeMedia&&c&&o()(t,{className:B,data:n.ledeMedia,containerClass:z,isFullBleed:!0,showCaption:!1,lede:!0,useResponsiveMedia:!0,useMobileCrop:!0})||null,p=n.headline&&o()(v.a,{data:n.headline,customOffset:H,honorAlignment:!1}),m=l&&l.section||"default",h=s||{},b=h.hideSearch,k=h.semitransparentAtMobile,O=h.hideUsernameAtSmallViewport,E=h.transparent,T=h.iconStyle,C=h.alignment,S=h.variant,P=h.isVerticalFullBleed,M=h.isFullBleed,I=r?o()(y.a,{section:m,hideSearch:b,semitransparentAtMobile:k,hideUsernameAtSmallViewport:O,transparent:E,iconStyle:T,alignment:C,variant:S,isVerticalFullBleed:P,isFullBleed:M}):null,A=o()(f.a,{collections:i}),j="opinion"===m,L="Visual Stacks"===(l&&l.storyFormat),R=(n.label||j||A)&&o()(D.a,{data:n.label,signalOpinion:j,timesExclusive:A,isVisualStacks:L,className:F}),N=n.summary&&o()(_.a,{data:n.summary}),q=Object(g.shouldUseHeaderV2Position)({textPosition:null==n?void 0:n.textPosition,lastModified:a,isVertical:!0});return o()(U,{headerMedia:u,masthead:I,label:R,headline:p,summary:N,content:n,baseColumnStyle:x.a,textPosition:null==n?void 0:n.textPosition,isVisualStacks:L,isVi:!0,useHeaderV2Position:q})};q.displayName="HeaderFullBleedVerticalBlock",q.defaultProps={data:null,collections:null,showMasthead:!0,lastModified:void 0},q.fragments={data:l()(R||(R=r()(['\n    fragment HeaderFullBleedVerticalBlock_data on HeaderFullBleedVerticalBlock {\n      headlineColor\n      backgroundColor\n      displayOverride\n      alignment\n      gradientEnabled\n      mobileHeadlineColor\n      label {\n        ...LabelBlock_data\n      }\n      headline {\n        ...Heading1Block_data\n      }\n      summary {\n        ...SummaryBlock_data\n      }\n      textPosition {\n        mobile\n        desktop\n      }\n      ledeMedia {\n        __typename\n        ... on ImageBlock {\n          size\n          media {\n            id\n            crops(renditionNames: ["articleLarge", "jumbo", "superJumbo", "mobileMasterAt3x"]) {\n              bleed {\n                percentTop\n                percentLeft\n                percentRight\n                percentBottom\n              }\n              renditions {\n                url\n                name\n                width\n                height\n              }\n            }\n            legacyHtmlCaption\n            altText\n            credit\n          }\n        }\n        ... on VideoBlock {\n          media {\n            id\n            summary\n            aspectRatio\n            renditions {\n              width\n              height\n              url\n              aspectRatio\n              type\n            }\n            bylines {\n              renderedRepresentation\n            }\n            promotionalMedia {\n              ... on Image {\n                id\n                crops {\n                  name\n                  renditions {\n                    width\n                    height\n                    url\n                  }\n                }\n              }\n              ... on Video {\n                id\n                promotionalMedia {\n                  ... on Image {\n                    id\n                    crops {\n                      name\n                      renditions {\n                        width\n                        height\n                        url\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    ',"\n    ","\n    ","\n  "])),v.a.fragments.data,D.a.fragments.data,_.a.fragments.data)};t.a=q},sj7d:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.overlayClass=t.modalClass=t.dismissIconClass=t.dismissClass=t.bodyOpenClass=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=(0,r.css)("position:fixed;width:100%;overflow:hidden;");t.bodyOpenClass=o;var s=(0,r.css)("display:block;position:fixed;box-sizing:border-box;top:0;right:0;bottom:0;left:0;width:100%;height:100%;z-index:",a.default.zIndex.overlay,";background-color:rgba(0,0,0,0.5);opacity:1;");t.overlayClass=s;var l=(0,r.css)("position:fixed;top:0;left:0;right:0;bottom:0;overflow:auto;width:100%;box-shadow:none;border-radius:0;background-color:",a.default.color.white,";font-family:",a.default.font.franklinBase,";-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:",a.default.color.black,";z-index:",a.default.zIndex.interstitialModal,";",a.default.breakpoint.small,"{width:450px;left:50%;top:50%;right:unset;bottom:unset;transform:translate(-50%,-50%);margin:0 auto;overflow:unset;position:absolute;border-radius:3px;box-shadow:0 0 8px rgba(0,0,0,0.2);}");t.modalClass=l;var c=(0,r.css)("position:absolute;top:1px;right:0;padding:16px;cursor:pointer;background-color:",a.default.color.white,";");t.dismissClass=c;var u=(0,r.css)("display:block;width:15px;height:15px;");t.dismissIconClass=u},sn4R:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i,r=n("gcR/"),a=n.n(r),o=n("q1tI"),s=n("g+Cy"),l=n("GB3f"),c=n("boCj"),u=n("bFSk"),d=n("Jqp9"),p=n("wXC7"),f=n.n(p),m=Object(d.css)("width:25px;height:25px;",f.a.button.transparent," padding:10px;"),h=Object(d.css)("padding:0 10px;height:55px;position:absolute;left:0;top:0;align-items:center;justify-content:center;background:",f.a.color.white,";display:none;",f.a.breakpoint.large,"{display:flex;}");function g(e){var t=e.pageType,n=e.region,r=e.ruleName,d=e.parentUri,p=Object(l.d)(),f="https://www.nytimes.com".concat(p),g=Object(u.a)({name:r,template:"storyline_menu_home_logo",region:n,parentUri:d,pageType:t}),y=Object(o.useMemo)((function(){return g.trackImpression()}),[g]),v=Object(o.useMemo)((function(){return g.trackInteraction()}),[g]);return a()("span",{className:h},void 0,a()(c.InView,{as:"a",onChange:function(e){e&&y({event:"impression",card:{url:f}})},triggerOnce:!0,href:p,"data-testid":"tlogo-home-link","aria-label":"The New York Times Home Page",onClick:function(e){v(e,p,{eventData:{type:"url-click",trigger:"item"},item:{url:f,uri:null}})}},void 0,i||(i=a()(s.a,{className:m}))))}g.displayName="HomepageLink"},solT:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var i="HeaderMultimediaBlock";function r(e){try{return e.__typename===i&&"VideoBlock"===e.media.__typename}catch(e){return!1}}},stgn:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.widths=t.isSpotifyPodcastUrl=t.heights=t.getSpotifyPlayerType=t.getSpotifyIframeAttributes=t.createSpotifyEmbedUrl=void 0;var r=i(n("SA+Z")),a={DEFAULT:"600px",VISUAL:"300px"};t.widths=a;var o={music:{DEFAULT:"80px",VISUAL:"380px"},podcast:{DEFAULT:"152px",VISUAL:"232px"}};t.heights=o;var s=function(e){return/\b\/episode|show\b/.test(e)};t.isSpotifyPodcastUrl=s;var l=function(e){return s(e)?"podcast":"music"};t.getSpotifyPlayerType=l;var c=function(e){if(/\b\/embed(-podcast)?\/\b/.test(e))return e;var t=e.split(/\/\/?/),n=(0,r.default)(t),i=n[0],a=n[1],o=n.slice(2);return"".concat(i,"//").concat(a,"/embed/").concat(o.join("/"))};t.createSpotifyEmbedUrl=c;t.getSpotifyIframeAttributes=function(e){var t=e.spotifyEmbedUrl,n=e.playerStyle;return{src:c(t),width:a[n],height:o[l(t)][n]}}},t7Wz:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.block,n=e.storyline;return!!(t&&n&&(0,r.default)({storyline:n,block:t}))};var r=i(n("uJd7"))},t7vg:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getFormattedText=t.default=void 0,t.hasLink=function(e){if("TextInline"!==e.__typename)return!1;return e.formats.some((function(e){return"LinkFormat"===e.__typename}))};var r=i(n("lSNA")),a=i(n("QILm")),o=i(n("q1tI")),s=(i(n("17x9")),i(n("WG9L"))),l=i(n("Jfsd")),c=i(n("RemB")),u=i(n("0Fvw")),d=i(n("PcXc")),p=i(n("7TTU")),f=i(n("H6qo")),m=["__typename"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=/(\r|\n|\t|[\s]{2,})/g,v={LinkFormat:s.default,BoldFormat:l.default,ItalicFormat:c.default,DropcapFormat:u.default,SuperscriptFormat:d.default,SubscriptFormat:p.default},b=function(e){var t=e.content,n=t.text,i=t.formats,r=t.__typename,s=e.opts;if("LineBreakInline"===r)return o.default.createElement("br",null);var l=n.split(y).map((function(e){return y.test(e)?o.default.createElement(f.default,{key:e},e):e}));return(null==i?void 0:i.length)>0&&i.forEach((function(e){l=function(e,t){var n=e.__typename,i=(0,a.default)(e,m);return v[n]?o.default.createElement(v[n],i,t):null}(g(g({},e),{},{opts:s}),l)})),l};t.getFormattedText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0===t.blank&&(t.blank=!0),e?e.map((function(e,n){return o.default.createElement(b,{key:n.toString(),content:e,opts:t})})):null},b.defaultProps={opts:{},content:{}};var _=b;t.default=_},tA6d:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),i(n("Kn2l"))),o=function(e){var t=e.children,n=e.related,i=e.displayStyle,o=e.className;return n?r.default.createElement(a.default,{related:n,displayStyle:i,className:o},t):null};o.displayName="EditableRelatedLinks",o.defaultProps={children:null,related:null,displayStyle:"STANDARD",className:void 0};var s=o;t.default=s},tDj8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.swiperNavClass=void 0;var i=(0,n("Jqp9").css)("display:flex;flex-direction:row;justify-content:center;position:relative;min-height:40px;");t.swiperNavClass=i},tLpV:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.StyledRelatedLink=t.RelatedLinkTextWrapper=t.RelatedLinkSummary=t.RelatedLinkMediaWrapper=t.RelatedLinkLabel=t.RelatedLinkImage=t.RelatedLinkHeadline=t.RelatedLinkCaption=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=n("h58Z"),s=i(n("WThh")),l=n("6l8D"),c=n("3sMT"),u=(0,s.default)(["medium","small","mediumLarge"]),d=(0,r.themeFn)("displayStyle",{standard:function(e){return(0,r.css)("margin-right:10px;width:75px;min-width:75px;",e.theme.breakpointMap.medium,"{margin-right:15px;width:135px;min-width:135px;}")},expanded:function(e){return(0,r.css)("margin-bottom:15px;min-width:285px;",e.theme.breakpointMap.small,"{max-width:400px;margin-left:auto;margin-right:auto;}",e.theme.breakpointMap.medium,"{max-width:285px;margin-bottom:0;margin-right:15px;}")},compact:(0,r.css)("display:none;")}),p=(0,r.themeFn)("treatment",{none:(0,r.css)(),sponsored:function(e){return"standard"===e.theme.displayStyle?(0,r.css)("width:120px;min-width:120px;",e.theme.breakpointMap.medium,"{width:165px;min-width:165px;}"):(0,r.css)()},atHome:function(e){return 1===e.siblings||"single"===e.theme.displayStyle?(0,r.css)(u(e,{minWidth:[0,0,"360px"],maxWidth:["none","none","48%"],marginRight:[0,0,"4%"],marginLeft:["auto","auto",0]})," align-self:flex-start;margin-bottom:3px;",e.theme.breakpointMap.medium,"{margin-bottom:8px;}"):(0,r.css)(u(e,{minWidth:[0,0,"200px"],maxWidth:["none","none","none"],marginRight:[0,0,0]})," margin-bottom:3px;")}}),f=(0,r.styled)("div",{target:"e16ij5yr0"})(d,";",p,";");t.RelatedLinkMediaWrapper=f;var m=(0,r.themeFn)("displayStyle",{standard:(0,r.css)("min-width:75px;"),expanded:(0,r.css)("min-width:285px;")}),h=(0,r.themeFn)("treatment",{none:(0,r.css)(),sponsored:(0,r.css)("min-width:120px;"),atHome:(0,r.css)("width:100%;min-width:0;")}),g=(0,r.styled)("img",{target:"e16ij5yr1"})("width:100%;",m,";",h,";");t.RelatedLinkImage=g;var y=(0,r.themeFn)("treatment",{atHome:(0,r.css)("display:block;")}),v=(0,r.styled)("p",{target:"e16ij5yr2"})("display:none;color:",c.color.content.quaternary,";min-height:",a.default.font.size(12),";font-size:",a.default.font.size(10),";line-height:",a.default.font.size(12),";letter-spacing:0.2px;text-align:right;",y,";");t.RelatedLinkCaption=v;var b=(0,r.themeFn)("displayStyle",{compact:(0,r.css)("color:",c.color.signal.editorial,";text-decoration:underline;&:hover,&:focus{text-decoration:none;}"),standard:(0,r.css)("color:",c.color.content.primary,";"),expanded:function(e){return(0,r.css)("color:",c.color.content.primary,";",e.theme.breakpointMap.medium,"{margin-bottom:7px;}")}}),_=(0,r.themeFn)("displayStyle",{compact:function(e){return"sponsored"===e.theme.treatment?(0,r.css)("font-family:",a.default.font.sponsoredBase,";line-height:",a.default.font.size(22),";",u(e,{fontSize:[18,19]}),";"):(0,r.css)("font-family:",a.default.font.serifBase,";font-weight:",a.default.font.weight.medium,";",u(e,{fontSize:[16,17],lineHeight:[22,23]}),";")},standard:function(e){return"sponsored"===e.theme.treatment?(0,r.css)("font-size:",a.default.font.size(18),";font-family:",a.default.font.sponsoredBase,";line-height:",a.default.font.size(22),";font-weight:",a.default.font.weight.mediumBold,";"):(0,r.css)("font-family:",a.default.font.serifMedium,";font-weight:",a.default.font.weight.medium,";",u(e,{fontSize:[16,19],lineHeight:[19,23]}),";")},expanded:function(e){return"sponsored"===e.theme.treatment?(0,r.css)("font-size:",a.default.font.size(18),";font-family:",a.default.font.sponsoredBase,";line-height:",a.default.font.size(22),";font-weight:",a.default.font.weight.bold,";"):(0,r.css)("font-family:",a.default.font.serifMedium,";font-weight:",a.default.font.weight.bold,";",u(e,{fontSize:[18,19],lineHeight:[22,23]}),";")}}),w=(0,r.themeFn)("treatment",{sponsored:function(e){return"compact"===e.theme.displayStyle?(0,r.css)("color:",c.color.signal.editorial,";"):(0,r.css)("color:",c.color.content.secondary,";transition:opacity 0.6s;")},atHome:function(e){return(0,r.css)("font-style:normal;font-weight:bold;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;font-family:",a.default.font.cheltenham,";color:",c.color.content.primary,";display:inline;margin-right:8px;",u(e,{fontSize:[20,20,21],lineHeight:[26,26,28]})," .",l.linkClass,"{text-decoration:underline;color:",c.color.content.secondary,";&:focus,&:visited{color:",c.color.content.secondary,";}&:focus{text-decoration:none;}}")}}),x=(0,r.styled)("div",{target:"e16ij5yr3"})("display:inline;",b,";",_,";",w,";");t.RelatedLinkHeadline=x;var k=(0,r.themeFn)("displayStyle",{expanded:function(e){return(0,r.css)(e.theme.breakpointMap.medium,"{margin-bottom:2px;}")}}),O=(0,r.themeFn)("treatment",{none:(0,r.css)("color:",c.color.content.tertiary,";font-family:",a.default.font.serifBase,";font-size:",a.default.font.size(15),";line-height:",a.default.font.size(20),";"),sponsored:(0,r.css)("color:",c.color.content.secondary,";font-family:",a.default.font.sponsoredBase,";font-size:",a.default.font.size(14),";line-height:",a.default.font.size(19),";"),atHome:function(e){return(0,r.css)("font-family:",a.default.font.imperial,";font-style:normal;display:inline;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:",c.color.content.secondary,";",u(e,{fontSize:[18,18,19],lineHeight:[26,26,28]})," .",l.linkClass,"{text-decoration:underline;color:",c.color.content.secondary,";&:focus,&:visited{color:",c.color.content.secondary,";}&:focus{text-decoration:none;}}strong{color:",c.color.content.primary,";font-weight:700;font-family:",a.default.font.cheltenham,";",u(e,{fontSize:[20,20,21]}),"}")}}),E=(0,r.styled)("div",{target:"e16ij5yr4"})("font-weight:",a.default.font.weight.book,";margin-top:0.4rem;",k,";",O,";");t.RelatedLinkSummary=E;var T=(0,r.themeFn)("treatment",{none:(0,r.css)(),atHome:function(e){return(0,r.css)("align-self:flex-start;margin-top:0;flex-basis:",1===e.siblings||"single"===e.theme.displayStyle?"31%":"auto",";flex-grow:0;")}}),C=(0,r.styled)("div",{target:"e16ij5yr5"})("flex-grow:1;",T,";");t.RelatedLinkTextWrapper=C;var S=(0,r.themeFn)("treatment",{none:function(e){return(0,r.css)("color:",c.color.content.secondary,";font-family:",a.default.font.franklinBase,";font-weight:",a.default.font.weight.bold,";letter-spacing:0.05em;text-transform:uppercase;",u(e,{fontSize:[11,12],lineHeight:[16,18]}))},sponsored:(0,r.css)("color:",c.color.content.secondary,";font-family:",a.default.font.sponsoredBase,";font-size:",a.default.font.size(14),";font-weight:",a.default.font.weight.medium,";line-height:",a.default.font.size(18),";letter-spacing:0.03rem;text-transform:uppercase;"),atHome:(0,r.css)("display:none;")}),P=(0,r.themeFn)("displayStyle",{compact:(0,r.css)("color:",a.default.color.opinionGray,";"),standard:(0,r.css)("color:",a.default.color.opinionGray,";"),expanded:(0,r.css)("color:",a.default.color.opinionGray,";")}),M=(0,r.styled)("div",{target:"e16ij5yr6"})((function(e){return"compact"===e.theme.displayStyle&&(0,r.css)("display:block;margin-right:0.3em;")}),";",(function(e){return e.isOpinion?P:S(e)}),";",(function(e){return e.isOpinion&&_}),";");t.RelatedLinkLabel=M;var I=(0,r.themeFn)("treatment",{none:function(e){return(0,r.css)("color:",c.color.content.quaternary,";",u(e,{fontSize:[12,13],lineHeight:[19,23],marginTop:["2px",0]}),";")},sponsored:(0,r.css)("display:none;"),atHome:(0,r.css)("display:none;")}),A=(0,r.themeFn)("treatment",{none:function(e){return"compact"===e.theme.displayStyle?(0,r.css)("color:",c.color.signal.editorial,";"):(0,r.css)("color:",c.color.content.quaternary,";")},sponsored:function(e){return"compact"===e.theme.displayStyle?(0,r.css)():(0,r.css)("opacity:0.8;")},atHome:(0,r.css)("color:",c.color.content.secondary,";")}),j=(0,r.themeFn)("displayStyle",{standard:(0,r.css)("display:flex;align-items:center;"),expanded:function(e){return(0,r.css)("display:flex;flex-direction:column;",e.theme.breakpointMap.medium,"{flex-direction:row;align-items:center;}")}}),L=(0,r.themeFn)("treatment",{none:function(e){return"compact"===e.theme.displayStyle?(0,r.css)(":not(:last-child){margin-bottom:0.75rem;}"):(0,r.css)(":not(:last-child){margin-bottom:1rem;}")},atHome:function(e){return e.siblings>1||"group"===e.theme.displayStyle?(0,r.css)("flex-grow:1;flex-basis:31%;",u(e,{margin:["0 0 36px","0 0 36px","0 0"]})," .",l.linkClass,"{",e.theme.breakpointMap.medium,"{flex-direction:column;}}"):(0,r.css)(a.default.breakpoint.medium,"{margin:0 0 50px;}.",l.linkClass,"{align-items:stretch;justify-content:flex-start;}")}}),R=(0,r.styled)("div",{target:"e16ij5yr7"})(o.StyledPubDate,"{margin-bottom:0;display:block;",I,";}&:hover,&:visited{",x,"{",A,";}}.",l.linkClass,"{",j,";}",L,";");t.StyledRelatedLink=R},"tNL+":function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-reporter-reads-75f75d9ff93c918be35824c2d9920ab6.webp"},tOSR:function(e,t,n){"use strict";var i,r=n("lSNA"),a=n.n(r),o=n("gcR/"),s=n.n(o),l=n("q1tI"),c=n.n(l),u=n("Jqp9"),d=n("/KYJ"),p=n("fZdH"),f=n("hkPW"),m=n("PgO9"),h=n("r0tw"),g=n("5xNV"),y=function(e){var t,n=e.handleSave,r=e.saved,o=void 0!==r&&r,l=e.loading,y=void 0===l||l,v=e.mutationLoading,b=e.error,_=e.children,w=e.buttonClass,x=e.childrenStyleClass,k=e.svgStyleClass,O=e.tabIndex,E=e.savesCount,T=Object(p.a)(),C=Object(m.a)(),S=Object(g.a)(E),P=E&&E>9||!1,M=Object(g.b)(T)&&void 0===E,I={event:"impression",block:{label:E,name:"saves",template:"share-tools",region:"header"},user:{regiId:C.id}},A=Object(f.a)({rootMargin:"0px",threshold:.5,data:I}),j=A.isTracked,L=A.ref;return s()("button",{type:"button",role:"switch",onClick:n,className:Object(u.cx)(h.f,w),"data-testid":"save-article-button","aria-label":"Save article for reading later...","aria-checked":o,disabled:y||!!b,"aria-disabled":v||void 0,"aria-busy":v,"aria-live":"polite",tabIndex:O},void 0,v||M?s()(d.Spinner,{size:16,className:k}):c.a.createElement(c.a.Fragment,null,s()("svg",{width:"12",height:"18",viewBox:"0 0 12 18",className:Object(u.cx)(k,(t={},a()(t,h.h,o),a()(t,h.c,!o),a()(t,h.e,y||!!b),t))},void 0,i||(i=s()("g",{fillRule:"nonzero"},void 0,s()("path",{className:"saved-fill",d:"M1.157 1.268v14.288l4.96-3.813 4.753 3.843V1.268z"}),s()("path",{className:"saved-stroke",d:"m12 18-5.9-4.756L0 17.98V1.014C0 .745.095.487.265.297.435.107.664 0 .904 0h10.192c.24 0 .47.107.64.297.169.19.264.448.264.717V18ZM1.157 1.268v14.288l4.96-3.813 4.753 3.843V1.268H1.158Z"})))),Object(g.b)(T)&&P&&c.a.createElement("span",{className:h.i,ref:j?void 0:L},S)),_&&s()("span",{className:Object(u.cx)(h.a,x)},void 0,_))};y.displayName="SaveBanner",t.a=y},tRGv:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;var a=n("djNW"),o=r(n("7QIA")),s=r(n("6XOG")),l=r(n("iEQv")),c=r(n("hKAy")),u=r(n("FY2l")),d={component:c.default,content:function(){return{loggedIn:!1,text:"Resubscribe to continue reading."}},tracking:{module:{name:"gatewayTopper",context:"ConvFormersPaywallTesting241LoggedOut",label:"DEFAULT",element:{name:a.Action.LogIn,label:"Log in",url:"https://myaccount.nytimes.com/auth/login?response_type=cookie&client_id=freex&asset=RegiWallStandalone&application=Free_Experience&reload=3&redirect_uri=https%3A%2F%2Fwww.nytimes.com%2Fsubscription%2Fonboarding-offer%3FcampaignID%3D7JFJX%26EXIT_URI%3Dhttps%253A%252F%252F"}}},tests:[{test:"MKT_SubCon_FormersPW_12_23"}]},p={component:c.default,content:function(){return{loggedIn:!0,text:"Resubscribe to continue reading."}},tracking:{module:{name:"gatewayTopper",context:"ConvFormersPaywallTesting241LoggedIn",label:"DEFAULT"}},tests:[{test:"MKT_SubCon_FormersPW_12_23"}]};t.config={name:"gatewayTopper",campaigns:{DEFAULT:{component:o.default,content:function(){return{loggedIn:!1}},tracking:{module:{name:"gatewayTopper",context:"SubconConvGatewayTopperLoggedOut234",label:"DEFAULT",element:{name:a.Action.LogIn,label:"Log in",url:"https://myaccount.nytimes.com/auth/login?response_type=cookie&client_id=freex&asset=RegiWallStandalone&application=Free_Experience&reload=3&redirect_uri=https://www.nytimes.com/subscription/onboarding-offer?campaignID=7JFJX&EXIT_URI=https://"}}}},FALLBACK_PAYWALL_TOPPER:{component:o.default,content:function(){return{loggedIn:!1}},tracking:{module:{name:"gatewayTopper",context:"SubconConvGatewayTopperLoggedOut234",label:"FALLBACK_PAYWALL_TOPPER",element:{name:a.Action.LogIn,label:"Log in",url:"https://myaccount.nytimes.com/auth/login?response_type=cookie&client_id=freex&asset=RegiWallStandalone&application=Free_Experience&reload=3&redirect_uri=https%3A%2F%2Fwww.nytimes.com%2Fsubscription%2Fonboarding-offer%3FcampaignID%3D7JFJX%26EXIT_URI%3Dhttps%253A%252F%252F"}}}},SUBCON_CONV_GATEWAY_TOPPER_LOGGED_IN_234:{component:o.default,content:function(){return{loggedIn:!0}}},SUBCON_CONV_GATEWAY_TOPPER_LOGGED_OUT_234:{component:o.default,content:function(){return{loggedIn:!1}},tracking:{module:{name:"gatewayTopper",context:"SubconConvGatewayTopperLoggedOut234",label:"DEFAULT",element:{name:a.Action.LogIn,label:"Log in",url:"https://myaccount.nytimes.com/auth/login?response_type=cookie&client_id=freex&asset=RegiWallStandalone&application=Free_Experience&reload=3&redirect_uri=https%3A%2F%2Fwww.nytimes.com%2Fsubscription%2Fonboarding-offer%3FcampaignID%3D7JFJX%26EXIT_URI%3Dhttps%253A%252F%252F"}}}},AUD_ENGAGE_GIFT_ARTICLES_LOGGED_OUT_237:{component:s.default,content:function(){return{loggedIn:!1,uri:(0,u.default)("https://myaccount.nytimes.com/auth/login").withExitUri().toString()}},tracking:{module:{name:"gatewayTopper",context:"AudEngageGiftArticlesLoggedOut237",label:"DEFAULT",element:{name:a.Action.LogIn,label:"Log in"}}}},AUD_ENGAGE_GIFT_ARTICLES_LOGGED_IN_237:{component:s.default,content:function(){return{loggedIn:!0}},tracking:{module:{name:"gatewayTopper",context:"AudEngageGiftArticlesLoggedIn237",label:"DEFAULT"}}},CONV_CAUCUS_REGIWALL_TEST_241:{component:l.default,content:function(){return{test:"value"}}},CONV_FORMERS_PAYWALL_TESTING_241_control_LOGGED_IN:i(i({},p),{content:function(){return{loggedIn:!0,text:"Support independent journalism with a subscription."}}}),CONV_FORMERS_PAYWALL_TESTING_241_control_LOGGED_OUT:i(i({},d),{content:function(){return{loggedIn:!1,text:"Support independent journalism with a subscription."}}}),CONV_FORMERS_PAYWALL_TESTING_241_v1_LOGGED_IN:i(i({},p),{content:function(){return{loggedIn:!0,text:"Save now when you resubscribe."}}}),CONV_FORMERS_PAYWALL_TESTING_241_v1_LOGGED_OUT:i(i({},d),{content:function(){return{loggedIn:!1,text:"Save now when you resubscribe."}}}),CONV_FORMERS_PAYWALL_TESTING_241_v2_LOGGED_IN:p,CONV_FORMERS_PAYWALL_TESTING_241_v2_LOGGED_OUT:i(i({},d),{content:function(){return{loggedIn:!1,text:"Resubscribe to continue reading."}}}),CONV_FORMERS_PAYWALL_TESTING_241_v3_LOGGED_IN:p,CONV_FORMERS_PAYWALL_TESTING_241_v3_LOGGED_OUT:i(i({},d),{content:function(){return{loggedIn:!1,text:"Resubscribe to continue reading."}}})}}},tXdy:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.interactiveShape=t.default=void 0;var a=i(n("lwsE")),o=i(n("W8MJ")),s=i(n("7W2i")),l=i(n("a1gu")),c=i(n("Nsbk")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("q1tI")),d=i(n("17x9")),p=n("Jqp9"),f=i(n("RG0N")),m=n("QgjT");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,l.default)(this,n)}}var y=function(e){(0,s.default)(n,e);var t=g(n);function n(){var e;(0,a.default)(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e.htmlWrapperRef=function(t){if(e.props.manageScripts&&t){var n=Array.prototype.slice.call(t.querySelectorAll("script"));if(n.length){var i=[];n.forEach((function(e){i.push({html:e.innerHTML,parentNode:e.parentNode,attributes:e.attributes}),e.parentNode.removeChild(e)})),e.setState({html:t.innerHTML},(function(){i.forEach((function(e){var t=e.html,n=e.parentNode,i=e.attributes,r=document.createElement("script");t&&(r.innerHTML=t),i&&Array.from(i).forEach((function(e){var t=e.name,n=e.value;r.setAttribute(t,n)})),n&&n.appendChild(r)}))}))}}},e}return(0,o.default)(n,[{key:"render",value:function(){var e=this.props,t=e.interactive,n=e.maxWidth,i=e.className,r=e.children,a=e.Header,o=e.Footer,s=e.enableInteractiveBridge,l=t.slug,c=t.sourceId,d=this.state.html||t.html,h=n?"scoop":"medium";return u.default.createElement("section",{"data-testid":"inline-interactive",id:l,"data-id":c,"data-source-id":c,className:(0,p.cx)((0,m.sectionClass)({maxWidth:n}),i,"interactive-content interactive-size-".concat(h))},a,s?u.default.createElement(f.default,{className:(0,p.cx)(m.interactiveDivClass,"interactive-body"),html:d,id:c}):u.default.createElement("div",{className:(0,p.cx)(m.interactiveDivClass,"interactive-body"),ref:this.htmlWrapperRef,dangerouslySetInnerHTML:{__html:d}}),o,r)}}]),n}(u.Component);y.displayName="InlineInteractive";var v=d.default.shape({sourceId:d.default.string,leadin:d.default.string,note:d.default.string,kicker:d.default.string,firstPublished:d.default.string,updatedText:d.default.string,bylines:d.default.arrayOf(d.default.object),credit:d.default.string,dataSource:d.default.string,slug:d.default.string,html:d.default.string,displayProperties:d.default.shape({maximumWidth:d.default.number,minimumWidth:d.default.number,displayForPromotionOnly:d.default.bool,displayOverrides:d.default.arrayOf(d.default.string)}),headline:d.default.oneOfType([d.default.shape({default:d.default.string}),d.default.string])});t.interactiveShape=v,y.defaultProps={Header:null,Footer:null,interactive:{html:null,displayProperties:{},headline:{default:""}},className:void 0,children:null,maxWidth:0,manageScripts:!1,enableInteractiveBridge:!1};var b=y;t.default=b},taqW:function(e,t,n){"use strict";var i,r,a,o,s,l,c,u,d,p,f=n("gcR/"),m=n.n(f),h=n("lSNA"),g=n.n(h),y=n("q1tI"),v=n.n(y),b=n("Jqp9"),_=Object(b.css)("display:flex;justify-content:center;align-items:center;"),w=Object(b.css)("position:fixed;width:100%;height:100%;top:0;z-index:1;"),x=Object(b.keyframes)("100%{transform:rotate(360deg);transform-origin:center;}"),k=Object(b.css)("opacity:1;width:50px;animation:",x," 0.8s steps(10,end) infinite;");function O(e){var t=e.wrapperClass,n=e.iconClass,f=e.color,h=e.fixed;return m()("div",{className:Object(b.cx)(_,g()({},w,h),t),"data-testid":"loading-spinner"},void 0,m()("svg",{className:Object(b.cx)(k,n),alt:"Loading spinner icon",version:"1.1",width:"198px",height:"198px",viewBox:"-50 -50 100 100"},void 0,m()("g",{stroke:f,strokeWidth:"3.75",strokeLinecap:"round"},void 0,i||(i=m()("line",{x1:0,y1:-14,x2:0,y2:-30,opacity:"1"})),r||(r=m()("line",{x1:-8.229,y1:-11.33,x2:-17.63,y2:-24.27,opacity:"0.87"})),a||(a=m()("line",{x1:-13.31,y1:-4.326,x2:-28.53,y2:-9.271,opacity:"0.74"})),o||(o=m()("line",{x1:-13.31,y1:4.326,x2:-28.53,y2:9.271,opacity:"0.61"})),s||(s=m()("line",{x1:-8.23,y1:11.33,x2:-17.63,y2:24.27,opacity:"0.48"})),l||(l=m()("line",{x1:0,y1:14,x2:0,y2:30,opacity:"0.37"})),c||(c=m()("line",{x1:8.23,y1:11.33,x2:17.63,y2:24.27,opacity:"0.26"})),u||(u=m()("line",{x1:13.31,y1:4.33,x2:28.53,y2:9.27,opacity:"0.17"})),d||(d=m()("line",{x1:13.31,y1:-4.33,x2:28.53,y2:-9.27,opacity:"0.09"})),p||(p=m()("line",{x1:8.23,y1:-11.33,x2:17.63,y2:-24.27,opacity:"0.02"})))))}O.displayName="LoadingSpinner",O.defaultProps={wrapperClass:void 0,iconClass:void 0,color:"black",fixed:!0};t.a=v.a.memo(O)},tl88:function(e,t){e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return'(function () { var _f=function(e={}){const i=window&&window.AdSlot4;function o(){const e=window.matchMedia("(max-width: 739px)");return e&&e.matches}try{const{adToggleMap:t,pageType:n,prebidOverrides:d,section:a,isSectionHbEligible:c,setFastFetch:r}=e,s=Object.keys(t).reduce((e,i)=>{const o=t[i]||"";return e[i]=function(e){return!!(window&&window.adClientUtils&&window.adClientUtils.hasActiveToggle)&&window.adClientUtils.hasActiveToggle(e)}(o),e},{}),{amazon:w,geoedge:l}=s,p=w&&c,g=d&&d.positionsToFilter||[],u=o()?g.concat(["top"]):g,T=["appnexus","medianet","rubicon","openx","triplelift","ix","pubmatic"];"function"==typeof i.loadScripts&&i.loadScripts({loadAmazon:p,loadPrebid:c,setFastFetch:r&&!o(),section:a,prebidOverrides:{...d,positionsToFilter:u,activeBidders:T},pageType:n,pageViewId:window&&window.NYTD&&window.NYTD.PageViewId&&window.NYTD.PageViewId.current?window.NYTD.PageViewId.current:"",loadGeoEdge:l})}catch(e){console.error(e)}};;_f.apply(null, '.concat(JSON.stringify(t),"); })();")}},tn1d:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"MediaFigCaption",{enumerable:!0,get:function(){return f.MediaFigCaptionComponent}}),Object.defineProperty(t,"MediaFigureContainer",{enumerable:!0,get:function(){return p.default}}),t.default=void 0;var a=i(n("lSNA")),o=i(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=i(n("OB6K")),c=i(n("Vcud")),u=i(n("MKiQ")),d=h(n("HvhO")),p=i(n("icfT")),f=h(n("6RhY"));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function h(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}var g=function(e){var t=e.size,n=e.media,i=e.mediaTypeLabel,r=e.orientation,m=e.className,h=e.children,g=e.textOverlay,y=e.containerClass,v=e.isFullBleed,b=(0,s.useTheme)(),_="small"===t&&!o.default.Children.toArray(h).find((function(e){return e.type===u.default}));return o.default.createElement(l.default,{theme:{mediaSize:t,mediaOrientation:r,isFullBleed:v}},o.default.createElement(d.default,{className:(0,s.cx)((0,a.default)({},(0,d.mediaFigureSmallNoCreditStyles)({theme:b}),_),m),"aria-label":"media",role:"group"},o.default.createElement(p.default,{className:y,"data-testid":"photoviewer-children-figure"},o.default.createElement(c.default,null,i),o.default.cloneElement(o.default.Children.only(n),{className:(0,s.cx)(d.mediaElementClass,n.props.className)}),g),o.default.createElement(f.default,{"data-testid":"photoviewer-children-caption"},h)))};g.displayName="MediaFigure",g.defaultProps={className:void 0,media:null,mediaTypeLabel:"",children:null,size:null,orientation:"horizontal",textOverlay:null,containerClass:"",isFullBleed:!1};var y=g;t.default=y},toO0:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("ALE8")),a=i(n("MzAb")),o=i(n("pfWQ"));t.default=function(e,t){(0,r.default)()&&(0,a.default)((function(){(0,o.default)().initializeAd(e,t)}))}},tqOg:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=(i(n("17x9")),n("Jqp9")),o=i(n("2Sf2")),s=function(e){var t=e.html,n=e.className;return r.default.createElement("div",{className:(0,a.cx)(o.default,n),dangerouslySetInnerHTML:{__html:t}})};s.displayName="ReviewInformation",s.defaultProps={html:null,className:void 0};var l=s;t.default=l},tz7j:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.loginLink=t.longHorizontalRule=t.topperWrapClass=t.topperClass=void 0;var r,a,o,s,l=n("Jqp9"),c=n("lVLo");t.topperClass=(0,l.css)(r||(r=i(["\n  font-family: ",";\n  font-weight: 500;\n  padding-top: 24px;\n  padding-bottom: 16px;\n  text-align: center;\n  line-height: 1.2;\n  font-size: 14px;\n  color: ",";\n"],["\n  font-family: ",";\n  font-weight: 500;\n  padding-top: 24px;\n  padding-bottom: 16px;\n  text-align: center;\n  line-height: 1.2;\n  font-size: 14px;\n  color: ",";\n"])),c.fonts.franklin,c.colors.black),t.topperWrapClass=(0,l.css)(a||(a=i(["\n  display: block;\n\n  @media (min-width: ","px) {\n    display: inline;\n  }\n"],["\n  display: block;\n\n  @media (min-width: ","px) {\n    display: inline;\n  }\n"])),c.widths.small),t.longHorizontalRule=(0,l.css)(o||(o=i(["\n  border: 0;\n  background-color: ",";\n  height: 1px;\n  width: 100%;\n"],["\n  border: 0;\n  background-color: ",";\n  height: 1px;\n  width: 100%;\n"])),c.colors.lineGrey),t.loginLink=(0,l.css)(s||(s=i(["\n  color: ",";\n  font-weight: 700;\n  text-decoration: none;\n"],["\n  color: ",";\n  font-weight: 700;\n  text-decoration: none;\n"])),c.colors.veryDarkGrey)},uAdo:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var i=n("iz2t");function r(e){var t=(new DOMParser).parseFromString(e,"text/html"),n=t.getElementsByTagName("a");return Array.from(n).forEach((function(e){null===e.getAttribute("target")&&(e.target="_blank"),null===e.getAttribute("rel")&&(e.rel="noopener noreferrer")})),t.documentElement.innerHTML}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new DOMParser,n=t.parseFromString(e,"text/html"),r=n.getElementsByTagName("a");return Array.from(r).forEach((function(e){var t=e.getAttribute("href");null!==t&&(e.href=i.a(t))})),n.documentElement.innerHTML}},uJd7:function(e,t,n){"use strict";function i(e){try{return JSON.parse(e.experimentalJsonBlob||null)}catch(e){return null}}function r(e,t,n){if(!e)return null;if(e.type===t&&e.version===n)return e;if(!(e.data instanceof Array))return r(e.data,t,n);for(var i=0;i<e.data.length;i+=1){var a=r(e.data[i],t,n);if(a)return a}return null}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.storyline,n=e.block;try{if(!n)return null;var a=n.type,o=n.version;return r(i(t),a,o).data}catch(e){return null}},t.deserializeExperimentalJsonBlob=i,t.getExperimentalAssetBlock=r},uLdf:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("Jqp9"),a=n("3sMT"),o=i(n("wXC7")),s=(0,r.css)("color:",a.color.signal.breaking,";border:none;text-transform:none;letter-spacing:0;font-size:",o.default.font.size(12),";font-weight:",o.default.font.weight.medium,";padding:4px 4px 0 4px;");t.default=s},uTOv:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-tkorc-e70cf6b0628d964d89952497590a03ba.webp"},uVKy:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.canStorylineComposeMenu=x,t.default=void 0,t.isElectionStoryline=k;var a=i(n("lSNA")),o=i(n("lwsE")),s=i(n("W8MJ")),l=i(n("7W2i")),c=i(n("a1gu")),u=i(n("Nsbk")),d=b(n("q1tI")),p=(i(n("17x9")),n("Jqp9")),f=i(n("vJhq")),m=i(n("wFfY")),h=i(n("Y3E+")),g=b(n("ZB1J")),y=n("ATQY");n("D5MC");function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function b(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=(0,u.default)(e);if(t){var r=(0,u.default)(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.default)(this,n)}}var w=function(e){return e};function x(e){var t;return(null==e?void 0:e.displayName)&&(null==e||null===(t=e.primaryAssets)||void 0===t?void 0:t.length)>0}function k(e){return"nyt://storyline/894481b3-768d-4cd7-8eba-6fbfb73390d7"===e}var O=function(e){(0,l.default)(n,e);var t=_(n);function n(){var e;(0,o.default)(this,n);for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).trackInteraction=function(t,n){var i=e.props.trackInteraction;return function(e){i(e,n,{eventData:{type:"url-click",trigger:"item"},item:{uri:null==t?void 0:t.uri,url:null==t?void 0:t.url}})}},e}return(0,s.default)(n,[{key:"render",value:function(){var e=this;if(!x(this.props.storyline))return null;var t=this.props,n=t.storyline,i=t.uriOfActiveMenuLink,r=t.trackEvent,o=t.className,s=t.HomepageLink,l=t.isLiveRoute,c=n.displayName,u=n.tone,v=n.primaryAssets,b=n.hubAssets,_=k(n.uri);return d.default.createElement("div",{className:(0,p.cx)(g.menuContainerClass,o)},s,d.default.createElement("nav",{className:g.scrollContainerClass,"aria-labelledby":"storyline-menu-title",role:"navigation"},d.default.createElement(h.default,{onVisible:function(){var e,t,n,i,a,o;null!=b&&null!==(e=b[0])&&void 0!==e&&null!==(t=e.asset)&&void 0!==t&&t.url&&(null==r||r({event:"impression",card:{index:0,type:"title",id:null==b||null===(n=b[0])||void 0===n||null===(i=n.asset)||void 0===i?void 0:i.uri,url:null==b||null===(a=b[0])||void 0===a||null===(o=a.asset)||void 0===o?void 0:o.url,label:c}}))}},(function(t){var n,i,r,o,s,l=t.ref;return d.default.createElement("p",{id:"storyline-menu-title",ref:l,className:(0,p.cx)((0,a.default)({},g.electionTitleClass,_))},d.default.createElement(f.default,{url:null==b||null===(n=b[0])||void 0===n||null===(i=n.asset)||void 0===i?void 0:i.url,text:c,tone:u,className:(0,p.cx)(g.preventInteractivesFromTurningLinksBlueClass),trackInteraction:e.trackInteraction(null==b||null===(r=b[0])||void 0===r?void 0:r.asset,null==b||null===(o=b[0])||void 0===o||null===(s=o.asset)||void 0===s?void 0:s.url),isElectionStoryline:_}))})),d.default.createElement("ul",{className:g.listClass,role:"menu"},(0,y.withDerivedLiveStatus)(v).filter((function(e){return null==e?void 0:e.asset})).map((function(t,n){return d.default.createElement(h.default,{key:(null==t?void 0:t.asset.uri)||n,onVisible:function(){var e,i;return null==r?void 0:r({event:"impression",card:{index:null!=b&&null!==(e=b[0])&&void 0!==e&&null!==(i=e.asset)&&void 0!==i&&i.url?n+1:n,type:(null==t?void 0:t.status)||"UNSET",id:null==t?void 0:t.asset.uri,url:null==t?void 0:t.asset.url,label:null==t?void 0:t.displayName,is_new:null==t?void 0:t.isNew}})}},(function(n){var r,a,o,s,c,u=n.ref;return d.default.createElement("li",{ref:u,className:g.listSpacingClass},d.default.createElement(m.default,{status:null==t?void 0:t.status,displayName:null==t?void 0:t.displayName,key:null==t||null===(r=t.asset)||void 0===r?void 0:r.uri,url:null==t?void 0:t.asset.url,isLiveRoute:l,lastModified:null==t||null===(a=t.asset)||void 0===a?void 0:a.lastModified,isActive:null==t||null===(o=t.asset)||void 0===o||null===(s=o.uri)||void 0===s||null===(c=s.includes)||void 0===c?void 0:c.call(s,i),isNew:null==t?void 0:t.isNew,className:g.preventInteractivesFromTurningLinksBlueClass,trackInteraction:e.trackInteraction(null==t?void 0:t.asset,null==t?void 0:t.asset.url)}))}))})))),this.props.children)}}]),n}(d.Component);O.displayName="StorylineMenu",O.defaultProps={storyline:null,trackEvent:w,trackInteraction:w,uriOfActiveMenuLink:null,className:void 0,children:null,HomepageLink:null,isLiveRoute:!1};var E=O;t.default=E},uW2s:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.metaClass=t.leadinClass=t.headlineClass=t.headerClass=t.fullbleedHeaderFooterContainerClass=t.fullbleedClass=t.footerClass=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=n("3sMT"),s=n("wiOm"),l=a.default.font,c=(0,r.css)("margin:0 auto 1rem;");t.headerClass=c;var u=(0,r.css)("color:",o.color.content.primary,";font-family:",l.serifMedium,";font-size:",l.size(21),";font-weight:",l.weight.mediumBold,";line-height:",l.size(24),";margin-bottom:5px;",s.onDarkModeInset,"{color:",o.light.colors.content.primary.hex,";}");t.headlineClass=u;var d=(0,r.css)("color:",o.color.content.quaternary,";font-family:",l.serifBase,";font-size:",l.size(15),";line-height:",l.size(20),";",s.onDarkModeInset,"{color:",o.light.colors.content.quaternary.hex,";}");t.leadinClass=d;var p=(0,r.css)("margin:10px auto 20px;max-width:100%;line-height:0;a{color:",o.color.content.primary,";",s.onDarkModeInset,"{color:",o.light.colors.content.primary.hex,";}}");t.footerClass=p;var f=(0,r.css)("width:100% !important;max-width:100% !important;margin:0 auto !important;");t.fullbleedClass=f;t.fullbleedHeaderFooterContainerClass=function(e){var t=e.maxWidth;return(0,r.css)("width:calc(100% - 40px);",t?"max-width: ".concat(t,"px;"):null)};var m=(0,r.css)("margin:0;display:inline;color:",o.color.content.quaternary,";font-family:",l.serifBase,";font-size:",l.size(12),";line-height:",l.size(16),";letter-spacing:0.01em;",a.default.breakpoint.large,"{font-size:",l.size(13),";line-height:",l.size(17),";}&:not(:last-child)::after{content:'';color:",o.color.stroke.quaternary,";margin:0 10px;font-size:10px;white-space:no-wrap;",s.onDarkModeInset,"{color:",o.light.colors.stroke.quaternary.hex,";}}",s.onDarkModeInset,"{color:",o.light.colors.content.quaternary.hex,";}");t.metaClass=m},"uc/3":function(e,t,n){"use strict";var i=n("VkAN"),r=n.n(i),a=n("gcR/"),o=n.n(a),s=n("lSNA"),l=n.n(s),c=n("q1tI"),u=n.n(c),d=n("eFc+"),p=n.n(d),f=n("Jqp9"),m=n("wXC7"),h=n.n(m),g=n("MKiQ"),y=n.n(g),v=n("c106"),b=n("nGF/"),_=n.n(b),w=n("pCca"),x=n("ZKN5"),k=n("nosR");function O(e){var t,n,i=e.media,r=Object(w.a)().breakpoint;if(!i.promotionalMedia)return null;var a=i.renditions,s=i.aspectRatio,l=i.promotionalMedia.crops||(null===(t=i.promotionalMedia)||void 0===t||null===(n=t.promotionalMedia)||void 0===n?void 0:n.crops),c=function(e,t){var n=600===t,i=e.filter((function(e){return/\.mp4$/.test(e.url)}));if(0===i.length)throw new Error("An mp4 video is required");return Object(k.findRenditionOfBestFit)(i,t,n)}(a,r),u=(null==c?void 0:c.aspectRatio)||s||"".concat(c.width,":").concat(c.height),d=Object(k.findCropsByRatio)(l,u),p=600===r,f=Object(k.findRenditionOfBestFit)(null==d?void 0:d.renditions,r,p);return o()(_.a,{src:null==c?void 0:c.url,imgFallback:null==f?void 0:f.url,ratio:u})}O.displayName="SpanCinemagraph";var E,T=Object(x.a)(O),C=n("pVYW"),S=n("caSQ"),P=n("M5Mg"),M=n("FQbI"),I=n.n(M),A=n("F77t"),j=n("PgO9"),L=n("HUmG"),R=n("8npY"),N=n.n(R),D=Object(f.css)("@media print{display:none;}"),B=Object(f.css)("display:inline-block;> *{display:inline;margin-right:0;}"),z=Object(f.css)("& *{:not([class*='vhs-icon']){font-family:",h.a.font.sponsoredBase," !important;}}& .vhs-times-logo{display:none;}"),F=Object(f.css)("margin-left:0;margin-right:7px;");function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e){var t,n=e.data,i=e.autoplayOverride,r=e.videoOptionOverrides,a=e.className,s=e.lede,c=e.showCaption,d=e.creditClass,p=Object(S.a)(),m=Object(j.a)().user,g=Object(f.useTheme)(),b=Object(w.a)().breakpoint;if(!n||!n.media)return null;var _="guide"===g.treatment,x=n.media,O=x.summary,E=x.aspectRatio,M=x.advertisingProperties,R=n.promotionalOverride||n.media.promotionalMedia,U=n.controls,W=void 0===U?"":U,q=n.muted,V=void 0!==q&&q,G=n.looping,Y=void 0!==G&&G,Z=n.size,X=(null==R?void 0:R.credit)||"",J="TRAGEDY"===(null==M?void 0:M.sensitivity),K=null==M?void 0:M.sponsored,$=N.a[Z],Q=n.media.isLive||!0===i&&!J||n.autoplay&&!0===n.autoplay&&!J,ee=!!E&&function(e){if(!e)return 0;var t=e.split(":");return parseInt(t[0],10)/parseInt(t[1],10)}(E)<1,te=!J&&"STANDARD_MUTED_AUTOPLAY"===W||!!n.media.isLive,ne=n.muted&&n.looping&&n.autoplay&&n.hideControls&&!te,ie="production";"test"===vi.env.ENVIRONMENT&&(ie="test");var re=H({ads:!K,api:!1,autoplay:Q,contextualMenu:!0,controls:!n.media.isLive,controlsOverlay:{mode:"clean"},cover:{mode:"article"},endSlate:{autoplayNext:!0,hasRecommendation:!0},env:ie,type:s?"article-lede":"article-embedded",ratio:E,muted:V,loop:Y,mutedAutoplayOverlay:te},r),ae="";if(ne&&n.media.bylines&&n.media.bylines.length){var oe=n.media.bylines.find((function(e){return e.renderedRepresentation}));ae=oe&&oe.renderedRepresentation}var se,le,ce="rightToLeft"===(null==g?void 0:g.languageDirection)?F:null,ue={data:{media:n},sectionStyle:null===(t=n.media.section)||void 0===t?void 0:t.name},de=Object(A.hasRegionLock)(ue).hasRegionLock,pe=Object(A.hasSubscriberLock)(ue).hasSubscriberLock,fe=p?Object(A.isRegionLocked)(H(H({},ue),{},{geolocation:p})).isRegionLocked:void 0,me=m?Object(A.isSubscriberLocked)(ue,Object(L.f)(m)).isSubscriberLocked:void 0,he=H(H({},n.media),{},{promotionalMedia:R});if(de&&void 0===fe||pe&&void 0===me)se=o()(P.a,{isLoading:!0,aspectRatio:E});else if(de&&fe||pe&&me){var ge,ye=fe?A.getRegionLockedMessage:A.getSubscriberLockedMessage,ve=Object(k.findCropsByRatio)(R.crops,E),be=Object(k.findRenditionOfBestFit)(ve.renditions,b);le=u.a.createElement(u.a.Fragment,null,o()(I.a,{width:"100%",message:ye(null===(ge=he.section)||void 0===ge?void 0:ge.displayName)}),o()("img",{alt:"Promotion for locked video",src:be.url}))}else se=ne?o()(T,{media:he}):o()(v.a,{media:he,videoOptions:re});var _e=Object(f.cx)(D,C.f,$,a,_&&C.e,{layoutVertical:ee,verticalVideo:ee}),we=Object(f.cx)(B,d);return o()("figure",{className:_e,"aria-label":"media",role:"group","data-testid":"VideoBlock"},void 0,o()("div",{className:Object(f.cx)(C.d,l()({},z,K))},void 0,o()("span",{className:h.a.a11y.visuallyHidden},void 0,"Video"),le,se),!_&&o()(C.a,{},void 0,c&&O&&o()(y.a,{className:ce},void 0,O),(X||ne)&&o()("span",{className:we},void 0,o()("span",{className:h.a.a11y.visuallyHidden},void 0,"Credit"),o()(C.b,{dangerouslySetInnerHTML:{__html:"".concat(ne&&ae||X)}}))))}W.displayName="VideoBlock",W.fragments={data:p()(E||(E=r()(["\n    fragment VideoBlock_data on VideoBlock {\n      size\n      autoplay\n      muted\n      hideControls\n      hideSummary\n      looping\n      controls\n      media {\n        id\n        summary\n        firstPublished\n        aspectRatio\n        transcript\n        productionType\n        promotionalMedia {\n          ... on Image {\n            id\n            credit\n          }\n        }\n        advertisingProperties {\n          sensitivity\n          sponsored\n        }\n        ...SpanVideo_media\n      }\n      promotionalOverride {\n        ...Video_promoVideo\n        ...Video_promoImage\n      }\n    }\n    ","\n  "])),v.a.fragments.media)},W.defaultProps={autoplayOverride:!1,videoOptionOverrides:{},className:void 0,lede:!1,showCaption:!0,creditClass:""};t.a=W},uf0L:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("lSNA")),a=i(n("J4zp")),o=i(n("lwsE")),s=i(n("W8MJ"));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){return"function"==typeof(null==e?void 0:e.getStructuredData)?e.getStructuredData():e},d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t["@id"],i=t.description,r=t.image,a=t.mainEntityOfPage,s=t.url,l=t.inLanguage,c=t.name,u=t.alternateName,d=t.sameAs,p=t.potentialAction;(0,o.default)(this,e),this["@context"]="https://schema.org",this["@type"]="Thing",this["@id"]=n,this.description=i,this.image=r,this.mainEntityOfPage=a,this.url=s,this.inLanguage=l,this.name=c,this.alternateName=u,this.sameAs=d,this.potentialAction=p}return(0,s.default)(e,[{key:"getStructuredData",value:function(){return Object.entries(this).reduce((function(e,t){var n=(0,a.default)(t,2),i=n[0],o=n[1];return Array.isArray(o)?c(c({},e),{},(0,r.default)({},i,o.map(u))):c(c({},e),{},(0,r.default)({},i,u(o)))}),{})}}]),e}();t.default=d},uktc:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("J4zp"),r=n.n(i),a=n("q1tI"),o=n("SYzA"),s=n("pjM+"),l=n("PgO9"),c=n("uCIn"),u=n("osgS");function d(e){var t=Object(s.a)(),n=Object(a.useRef)(!1),i=Object(a.useState)(null),d=r()(i,2),p=d[0],f=d[1],m=Object(l.a)().subscriptionDetails,h=Object(u.a)(m),g=e.canShow(),y=t.data(),v=Object(o.a)(),b=Object(c.a)(30),_=!(null!=y&&y.subscriberOnboarding)||void 0===(null==y?void 0:y.subscriberOnboarding);return Object(a.useEffect)((function(){h||!y||!e||e.loading()||v||b.loading||(g&&!n.current&&(n.current=!0),f(b.value&&n.current&&_))}),[e,t,h,g,y,_,v,b.loading,b.value]),{showWelcomeBannerSubs:p}}},uoyi:function(e,t,n){"use strict";var i,r=n("VkAN"),a=n.n(r),o=n("gcR/"),s=n.n(o),l=n("lSNA"),c=n.n(l),u=(n("q1tI"),n("eFc+")),d=n.n(u),p=n("Jqp9"),f=n("oKgi"),m=n.n(f),h=n("XlcC"),g=n.n(h),y=n("jOYC"),v=n("HTd6"),b=n("wXC7"),_=n.n(b),w=Object(p.css)("margin:0 ",y.b.grid.pageMargin," 1.6rem;"),x=Object(p.css)("text-align:right;direction:rtl;unicode-bidi:isolate;"),k=Object(p.css)("font-family:",_.a.font.karnakBase,";font-weight:",_.a.font.weight.medium,";text-align:left;",_.a.breakpoint.medium,"{font-size:1.8rem;line-height:1.33;}"),O=function(e){var t,n=e.data,i=e.className,r=e.isFirstTextAfterHeading2Block,a=Object(p.useTheme)(),o=n.textAlign?n.textAlign.toLowerCase():null,l=Object(p.cx)(y.b.layout.textAlign[o]||y.b.layout.textAlign.left,w,i,(t={},c()(t,x,"rightToLeft"===a.languageDirection),c()(t,k,"guide"===a.treatment&&r),t));return s()(m.a,{className:l},void 0,n.content.map(g.a))};O.displayName="SummaryBlock",O.defaultProps={className:void 0,isFirstTextAfterHeading2Block:!1},O.fragments={data:d()(i||(i=a()(["\n    fragment SummaryBlock_data on SummaryBlock {\n      textAlign\n      content {\n        ...TextInline_content\n      }\n    }\n    ","\n  "])),v.a.fragments.content)};t.a=O},urXL:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-the-recommendation-b43bb0e154cda17a4b232f1105511a28.webp"},uwQJ:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var i={themeID:"smallDockTheme",dockContentHeight:{mobileSmall:185,mobileLarge:185,small:185,mediumLarge:185},dockHeaderHeight:{mobileSmall:65,mobileLarge:65,small:55,mediumLarge:55},dockHeaderOffset:{mobileSmall:5,mobileLarge:5,small:0,mediumLarge:0},dockExpandSpeed:"200ms"},r={themeID:"largeDockTheme",dockContentHeight:{mobileSmall:281,mobileLarge:281,small:170,mediumLarge:170},dockHeaderHeight:{mobileSmall:50,mobileLarge:50,small:70,mediumLarge:70},dockHeaderOffset:{mobileSmall:5,mobileLarge:5,small:0,mediumLarge:0},dockExpandSpeed:"200ms"},a={themeID:"disrupterDockTheme",dockContentHeight:{mobileSmall:230,mobileLarge:230,small:230,mediumLarge:230},dockHeaderHeight:{mobileSmall:0,mobileLarge:0,small:0,mediumLarge:0},dockHeaderOffset:{mobileSmall:0,mobileLarge:0,small:0,mediumLarge:0},dockExpandSpeed:"200ms"}},v2SN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timestampCapitalizeClass=t.timeContainerClass=t.timeClass=t.showClass=t.sharedTransformClass=t.relClass=t.hideClass=t.absClass=void 0;var i=n("Jqp9"),r=(0,i.css)("transform:translateY(0);display:inline-block;");t.showClass=r;var a=(0,i.css)("transition:transform 0.3s ease-in-out;display:inline-block;");t.sharedTransformClass=a;var o=(0,i.css)("transform:translateY(110%);left:0;position:absolute;@media (max-width:600px){display:block;left:unset;top:0;}");t.relClass=o;var s=(0,i.css)("transform:translateY(-110%);");t.absClass=s;var l=(0,i.css)("overflow:hidden;position:relative;display:inline-block;");t.timeContainerClass=l;var c=(0,i.css)("display:flex;white-space:nowrap;");t.timeClass=c;var u=(0,i.css)("text-transform:capitalize;");t.timestampCapitalizeClass=u;var d=(0,i.css)("display:none;");t.hideClass=d},v2Y2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){return new Promise((function(t,n){var i=function(e){return e.addEventListener("load",(function(){e.dataset.loaded=!0,t(e)})),e.addEventListener("error",(function(t){e.dataset.loaded=!0,e.dataset.error=!0,n(t)})),e},r=document.querySelector('link[href="'.concat(e,'"]'));if(r)return r.dataset.loaded?r.dataset.error?n():t(r):i(r);var a=document.createElement("link");return a.href=e,a.rel="stylesheet",a.type="text/css",a.media="all",document.head.appendChild(a),i(a)}))};t.default=i},v466:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.wrapperClass=t.websiteLinkClass=t.updatedClass=t.timestampClass=t.starsClass=t.reviewFooterClass=t.reviewClass=t.reviewButtonClass=t.ratingClass=t.poweredByClass=t.phoneLinkClass=t.metadataClass=t.logoClass=t.linkWithoutDisclaimerClass=t.linkWithDisclaimerClass=t.disclaimerClass=t.criticsPickClass=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=n("BHcd"),s=n("3sMT"),l=(0,r.css)("margin-top:40px;");t.reviewFooterClass=l;var c=(0,r.css)("width:calc(100% - 40px);max-width:",a.default.breakpoint.textBodyWidth,"px;margin:0 auto;",a.default.print,";");t.wrapperClass=c;var u=(0,r.css)("margin:0 auto 1rem;padding:0 0 1rem;width:100%;font-family:",a.default.font.franklinBase,";font-size:",a.default.font.size(14),";line-height:",a.default.font.size(20),";border-bottom:1px solid ",s.color.stroke.quaternary,";",a.default.breakpoint.medium,"{margin-bottom:0;}.",c," + .",c,"{border-top:1px solid ",s.color.stroke.quaternary,";}",a.default.print,";h4{color:",s.color.content.secondary,";display:inline-block;font-family:",a.default.font.franklinBase,";font-size:",a.default.font.size(14),";font-weight:",a.default.font.weight.bold,";line-height:",a.default.font.size(18),";margin-right:0.5rem;}dl{display:flex;flex-direction:column;justify-content:center;}address{display:block;margin-bottom:8px;}dt{color:",s.color.content.secondary,";display:inline;font-size:",a.default.font.size(14),";font-weight:",a.default.font.weight.bold,";line-height:",a.default.font.size(20),";margin-right:4px;}dd{color:",s.color.content.secondary,";display:inline;font-weight:",a.default.font.weight.medium,";}address dt,address dd{display:block;}address a:hover,address a:focus{text-decoration:none;}div[itemprop='starRating']{margin-top:8px;}dd[itemprop='showtimes']{table{max-width:300px;}}");t.reviewClass=u;var d=(0,r.css)("color:",s.color.content.secondary,";text-decoration:none;");t.phoneLinkClass=d;var p=(0,r.css)("color:",s.color.content.secondary,";text-decoration:underline;");t.websiteLinkClass=p;var f=(0,r.css)("color:",a.default.color.reviewCritPickGold,";");t.starsClass=f;var m=(0,r.css)("display:inline-block;");t.ratingClass=m;var h=(0,r.css)("margin-left:-1px;margin-right:8px;i{display:inline-block;vertical-align:middle;background-image:url('data:image/svg+xml;utf8,",o.criticsPick,"');height:16px;width:16px;margin-top:-3px;margin-right:4px;}");t.criticsPickClass=h;var g=(0,r.css)("background-color:transparent;border:1px ",s.color.stroke.quaternary," solid;color:",s.color.content.secondary,";font-size:",a.default.font.size(12),";line-height:",a.default.font.size(12),";font-weight:",a.default.font.weight.medium,";padding:10px;text-transform:unset;border-radius:30px;&:active,&.active{background-color:",a.default.color.gray90,";}",a.default.breakpoint.medium,"{&:hover{background-color:",a.default.color.gray90,";}}");t.reviewButtonClass=g;var y=(0,r.css)(a.default.breakpoint.small,"{columns:2;column-gap:30px;display:block;}& > *{display:block;margin-bottom:8px;",a.default.breakpoint.small,"{page-break-inside:avoid;break-inside:avoid;display:inline-block;width:100%;}}");t.metadataClass=y;var v=(0,r.css)("display:flex;justify-content:flex-start;align-items:center;margin-bottom:1rem;margin-top:0.5rem;button{white-space:nowrap;}@media print{display:none;}");t.linkWithDisclaimerClass=v;var b=(0,r.css)("display:flex;margin-bottom:1rem;margin-top:0.75rem;button{white-space:nowrap;}@media print{display:none;}");t.linkWithoutDisclaimerClass=b;var _=(0,r.css)("color:",s.color.content.quaternary,";font-family:",a.default.font.franklinBase,";font-size:",a.default.font.size(11),";font-weight:",a.default.font.weight.medium,";line-height:",a.default.font.size(14),";letter-spacing:0.03em;",a.default.breakpoint.medium,"{font-size:",a.default.font.size(12),";line-height:",a.default.font.size(15),";}margin-left:12px;max-width:360px;");t.disclaimerClass=_;var w=(0,r.css)("margin-top:0.5rem;display:flex;align-items:center;height:20px;@media print{display:none;}p{font-family:",a.default.font.franklinBase,";font-size:",a.default.font.size(12),";font-weight:",a.default.font.weight.medium,";line-height:",a.default.font.size(16),";color:",s.color.content.quaternary,";}a{display:block;}");t.poweredByClass=w;var x=(0,r.css)("margin-right:8px;background-size:contain;background-repeat:no-repeat;height:20px;&.imdb{width:41px;background-image:url('data:image/svg+xml;utf8,",o.imdb,"');}&.ticketmaster{height:15px;width:112px;background-image:url('data:image/svg+xml;utf8,",o.ticketmaster,"');& + p{margin-top:0.3rem;}}&.opentable{width:86px;background-image:url('data:image/svg+xml;utf8,",o.opentable,"');}&.resy{width:50px;background-image:url('data:image/svg+xml;utf8,",o.resy,"');}");t.logoClass=x;var k=(0,r.css)("color:",s.color.content.quaternary,";font-family:",a.default.font.franklinBase,";font-size:",a.default.font.size(12),";font-weight:",a.default.font.weight.medium,";line-height:",a.default.font.size(16),";");t.updatedClass=k;var O=(0,r.css)("color:",s.color.content.quaternary,";font-size:",a.default.font.size(12),";");t.timestampClass=O},vAfh:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return r}));var i="recirc_sub",r="recirc_regi"},vFws:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VIDEO_HEADER_LAYOUTS=t.RATIOS=void 0;t.VIDEO_HEADER_LAYOUTS={MOBILE:"mobile",DESKTOP:"desktop"};t.RATIOS={"1:1":"MEDIUM_SQUARE","3:2":"THREE_BY_TWO","2:3":"TWO_BY_THREE","16:9":"SIXTEEN_BY_NINE","15:7":"FIFTEEN_BY_SEVEN"}},vJhq:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=i(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=i(n("ed9S")),c=i(n("1jzN")),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("f3Il")),d=n("D5MC");function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}var f=function(e){var t=e.url,n=e.tone,i=e.text,r=e.className,p=e.isAmp,f=e.trackInteraction,m=e.isElectionStoryline;return i?t?o.default.createElement("a",{href:t,onClick:f,className:(0,s.cx)(u.titleLinkClass,u.titleClass,r,(0,a.default)({},u.featureToneClass,n===d.StorylineTone.Feature))},m?o.default.createElement(c.default,null):o.default.createElement(l.default,{className:(0,s.cx)(u.titleUnderlineClass,u.caretClass),text:i,disable:p})):o.default.createElement("span",{className:(0,s.cx)(u.titleClass,r,(0,a.default)({},u.featureToneClass,n===d.StorylineTone.Feature))},o.default.createElement(l.default,{text:i,disable:p})):null};f.displayName="MenuTitle",f.defaultProps={url:null,className:void 0,isAmp:!1,text:null,tone:void 0,trackInteraction:function(e){return e},isElectionStoryline:!1};var m=f;t.default=m},vOGy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mediaClass=void 0;var i=(0,n("Jqp9").css)("position:absolute;top:0;left:0;width:100%;height:100%;background-color:transparent;object-fit:cover;color:rgba(0,0,0,0);&::after{content:'';display:block;background-color:transparent;position:absolute;top:0;left:0;width:100%;height:100%;text-align:center;min-height:50px;}");t.mediaClass=i},vkfW:function(e,t,n){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(t,n);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,r)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(n("q1tI")),l=n("Jqp9"),c=n("X6oL"),u=o(n("5UIh")),d=a(n("6Y/s")),p=n("syiw"),f=n("HDG5"),m=n("djNW"),h=o(n("EhNO")),g=n("FY2l"),y=n("6gWn"),v=o(n("XvvG"));t.default=function(e){var t,n,i,r,a,o,b,_,w=e.unit,x=(0,s.useState)(!1),k=x[0],O=x[1],E=(0,p.useMessageSelection)({config:{name:"dock"}}),T=(0,f.useUserState)(),C=(0,c.useTracking)(),S="/"===(0,g.getPathName)()?"homepage":"article",P=s.default.createElement("div",{className:d.headerText},"Thanks for reading The Times."),M=s.default.createElement("div",{className:(0,l.cx)(d.mainContent)},s.default.createElement("div",{className:d.headerLogo},s.default.createElement(h.default,null)),s.default.createElement("div",{className:d.headerContainer},s.default.createElement("div",{className:d.header},"Complete your Times experience."),s.default.createElement("div",{className:d.subHeader},"Upgrade your subscription.")),s.default.createElement("div",{className:d.ctaContainer},(null===(t=null==w?void 0:w.content)||void 0===t?void 0:t.priceDisplay)?s.default.createElement(v.default,{oldPriceClassname:d.strikeThroughExpression,currentPriceClassname:d.salePriceExpression,oldPrice:null===(n=null==w?void 0:w.content)||void 0===n?void 0:n.strikeThroughPriceDisplay,currentPrice:"".concat(null===(i=null==w?void 0:w.content)||void 0===i?void 0:i.priceDisplay,"/week more")}):null,s.default.createElement("div",{className:d.subscriptionText},"compared to your current subscription"),s.default.createElement("a",{className:d.button,href:null===(r=w.content)||void 0===r?void 0:r.clickThroughURI,onClick:function(){var e,t;C.trackEvent({event:"moduleInteraction",eventData:{pagetype:S,trigger:"module",type:"click"},module:{name:"dock",context:"expanded",audience:(null===(e=w.content)||void 0===e?void 0:e.audience)||"",label:"ACT_CONV_NEWS_SUB_ALL_ACCESS_UPGRADE_2310",region:"",element:{name:m.Action.ProductSwitch,label:"Upgrade now",url:null===(t=w.content)||void 0===t?void 0:t.clickThroughURI}}})}},"Upgrade now")));if(E.loading)return null;if(!k){var I=null===(o=null===(a=null==E?void 0:E.response)||void 0===a?void 0:a.userstate())||void 0===o?void 0:o.messageSelectionMessageCaps,A=null;if(I)if((L=I).forEach((function(e){var t,n;"dock"===(null==e?void 0:e.unit)&&(null==e?void 0:e.campaign)===(null===(t=null==E?void 0:E.response)||void 0===t?void 0:t.campaign())&&(null==e?void 0:e.audience)===(null===(n=null==E?void 0:E.response)||void 0===n?void 0:n.audience())&&(A=e)})),null!==A){var j=A;j.viewCount+=1,j.lastSeenOn=(new Date).toISOString(),T.update({messageSelectionMessageCaps:L})}if(!A){var L=[];I&&(L=I),L.push({unit:"dock",campaign:null===(b=null==E?void 0:E.response)||void 0===b?void 0:b.campaign(),audience:null===(_=null==E?void 0:E.response)||void 0===_?void 0:_.audience(),lastSeenOn:(new Date).toISOString(),viewCount:1,dismissed:!1}),T.update({messageSelectionMessageCaps:L})}O(!0)}return s.default.createElement(u.default,{testId:"onsite-messaging-unit-".concat(null===y.config||void 0===y.config?void 0:y.config.name),className:d.dockBorder,unit:w,contentID:"ACT_CONV_NEWS_SUB_ALL_ACCESS_UPGRADE_2310",dockID:"expand",header:P,card:M,isDockDismissible:!0,isDockExpandable:!1,minimized:!1,overrideHeaderWidth:!0})}},voDd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addReferringSource=function(e){var t=new URL(e);return t.searchParams.set("referringSource","audioAppPromo"),t.toString()},t.getAudioDeepLink=function(e){return null==e?void 0:e.replace("nytimes.com","nytimes.com/audio/app")},t.getAudioFromBody=void 0,t.shouldRenderAudioAppPromoAsBanner=function(e){return!!r(e)&&!!function(e){return!!a(e)}(e)&&!!function(e){var t,n=(null==e?void 0:e.body)||(null==e?void 0:e.sprinkledBody);return!(null==n||null===(t=n.content)||void 0===t||!t.some((function(e){return"HeaderMultimediaBlock"===e.__typename})))}(e)},t.shouldRenderAudioAppPromoInPlayer=function(e){return!!r(e)};var i=["audio-app-publisher-","audio-app-show-"],r=function(e){var t;return!!((null==e||null===(t=e.collections)||void 0===t?void 0:t.map((function(e){return(null==e?void 0:e.slug)||""})))||[]).some((function(e){return!!i.some((function(t){return e.startsWith(t)}))}))},a=function(e){var t,n,i=(null==e?void 0:e.body)||(null==e?void 0:e.sprinkledBody);return null==i||null===(t=i.content)||void 0===t||t.forEach((function(e){var t;"AudioBlock"===(null===(t=e.media)||void 0===t?void 0:t.__typename)&&(n=e.media.media),n||"AudioBlock"!==e.__typename||(n=e.media)})),n};t.getAudioFromBody=a},vqZQ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0,t.default=function(e){var t,n=e.user,i=e.newsletter,u=e.signupOptions,d=e.onSignupStart,p=e.onSignupComplete,f=e.onSignupFail,m=(0,s.useState)({type:c.Initial}),h=(0,o.default)(m,2),g=h[0],y=h[1],v=function(){var e=(0,a.default)(r.default.mark((function e(){var t;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y({type:c.Loading}),null==d||d(),e.prev=2,e.next=5,i.signup(u);case 5:(t=e.sent).success&&y({type:c.SignupSuccess,result:t}),null==p||p(t),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),y({type:c.Error,error:e.t0}),null==f||f(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}(),b=(0,s.useCallback)((function(){return y({type:c.Initial})}),[]),_=g.type===c.Loading,w=g.type===c.Error?g.error:null,x=(null==n||null===(t=n.profile)||void 0===t?void 0:t.email)||(null==n?void 0:n.email);return{handleSignup:v,loading:_,error:w,viewState:g,loggedOut:!x,alreadyReceiving:(0,l.checkAlreadyReceiving)(n,i),resetViewState:b}};var r=i(n("o0o1")),a=i(n("yXPU")),o=i(n("J4zp")),s=n("q1tI"),l=n("sTKe"),c=function(e){return e[e.Initial=0]="Initial",e[e.Loading=1]="Loading",e[e.SignupSuccess=2]="SignupSuccess",e[e.Error=3]="Error",e}({});t.View=c},vubr:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.titleClass=t.listItemClass=t.listClass=t.leadInClass=t.imageClass=t.headerClass=t.containerClass=void 0;var r=n("Jqp9"),a=i(n("3Rk2")),o=i(n("wXC7")),s=n("3sMT"),l=(0,a.default)([o.default.breakpoint.medium]),c=(0,r.css)(o.default.printHide," border:1px solid ",s.color.stroke.quaternary,";color:",s.color.content.secondary,";background-color:",s.color.background.primary,";max-width:600px;box-sizing:border-box;",l({width:[o.default.breakpoint.mobileFullWidth,"100%"],padding:["15px 15px 20px","25px"],margin:[o.default.breakpoint.mobileBlockMargins,o.default.breakpoint.desktopStorylineMargins]}));t.containerClass=c;var u=(0,r.css)("border-bottom:1px solid ",s.color.stroke.quaternary,";padding-bottom:12px;margin-bottom:0;");t.headerClass=u;var d=(0,r.css)("font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.bold,";margin-top:0;margin-bottom:0;",l({fontSize:[o.default.font.size(16),o.default.font.size(17)],lineHeight:[o.default.font.size(22),o.default.font.size(24)]}));t.titleClass=d;var p=(0,r.css)("font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.medium,";",l({fontSize:[o.default.font.size(16),o.default.font.size(17)],lineHeight:[o.default.font.size(22),o.default.font.size(24)]}));t.leadInClass=p;var f=(0,r.css)("height:14px;padding-top:5px;",l({marginBottom:["5px","10px"]}));t.imageClass=f;var m=(0,r.css)("list-style:disc;display:flex;flex-direction:column;",l({marginTop:["0.75rem","1rem"],gap:["10px","15px"]}));t.listClass=m;var h=(0,r.css)("margin-bottom:0;");t.listItemClass=h},w4n4:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l}));var i=n("Jqp9"),r=n("nxVm"),a=n.n(r),o=n("jOYC"),s=Object(i.css)("margin:35px ",o.b.grid.pageMargin," 3px;",a.a,";"),l=Object(i.css)("text-align:right;direction:rtl;unicode-bidi:isolate;")},"w6U+":function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.enableBodyScroll=t.disableBodyScroll=t.clearAllBodyScrollLocks=void 0;var r=i(n("RIqP")),a=!1;if("undefined"!=typeof window){var o={get passive(){a=!0}};window.addEventListener("testPassive",null,o),window.removeEventListener("testPassive",null,o)}var s,l,c="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),u=[],d=!1,p=-1,f=function(e){return u.some((function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))}))},m=function(e){var t=e||window.event;return!!f(t.target)||(t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1))},h=function(){setTimeout((function(){void 0!==l&&(document.body.style.paddingRight=l,l=void 0),void 0!==s&&(document.body.style.overflow=s,s=void 0)}))};t.disableBodyScroll=function(e,t){if(c){if(!e)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(e&&!u.some((function(t){return t.targetElement===e}))){var n={targetElement:e,options:t||{}};u=[].concat((0,r.default)(u),[n]),e.ontouchstart=function(e){1===e.targetTouches.length&&(p=e.targetTouches[0].clientY)},e.ontouchmove=function(t){1===t.targetTouches.length&&function(e,t){var n=e.targetTouches[0].clientY-p;!f(e.target)&&(0===(null==t?void 0:t.scrollTop)&&n>0||function(e){return!!e&&e.scrollHeight-e.scrollTop<=e.clientHeight}(t)&&n<0?m(e):e.stopPropagation())}(t,e)},d||(document.addEventListener("touchmove",m,a?{passive:!1}:void 0),d=!0)}}else{!function(e){setTimeout((function(){if(void 0===l){var t=!0==!(null==e||!e.reserveScrollBarGap),n=window.innerWidth-document.documentElement.clientWidth;t&&n>0&&(l=document.body.style.paddingRight,document.body.style.paddingRight="".concat(n,"px"))}void 0===s&&(s=document.body.style.overflow,document.body.style.overflow="hidden")}))}(t);var i={targetElement:e,options:t||{}};u=[].concat((0,r.default)(u),[i])}};t.clearAllBodyScrollLocks=function(){c?(u.forEach((function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null})),d&&(document.removeEventListener("touchmove",m,a?{passive:!1}:void 0),d=!1),u=[],p=-1):(h(),u=[])};t.enableBodyScroll=function(e){if(c){if(!e)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");e.ontouchstart=null,e.ontouchmove=null,u=u.filter((function(t){return t.targetElement!==e})),d&&0===u.length&&(document.removeEventListener("touchmove",m,a?{passive:!1}:void 0),d=!1)}else 1===u.length&&u[0].targetElement===e?(h(),u=[]):u=u.filter((function(t){return t.targetElement!==e}))}},wB9J:function(e,t,n){"use strict";var i,r,a=n("VkAN"),o=n.n(a),s=n("gcR/"),l=n.n(s),c=(n("q1tI"),n("InUh")),u=n.n(c),d=n("eFc+"),p=n.n(d),f=n("oXTd"),m=n("+zxi"),h=n("aFeP"),g=n("MlQP"),y=n("fdyL"),v=n("5E+G"),b=n("KMmm"),_=n.n(b),w=n("jOYC").b.layout.nonInterrupterTextElementBaseClass,x=u()((function(){return Promise.all([n.e(152),n.e(77)]).then(n.bind(null,"u3o0"))}),{loadableGenerated:{webpack:function(){return["u3o0"]},modules:["./InlineEmailSignup"]}}),k=function(e){var t,n,i=e.data,r=e.isOnsiteNewsletter,a=e.isTopOfStory,o=Object(h.a)();if(!i||!o)return null;var s=i.productDefaults,c=i.newsletterHeading,u=i.newsletterSummary,d=i.productCode;if(!!_()(o,{productCode:d})&&!a)return null;var p=(null==s?void 0:s.title)||"",b=(null==c||null===(t=c[0])||void 0===t?void 0:t.text)||p,k=(null==u||null===(n=u[0])||void 0===n?void 0:n.text)||(null==s?void 0:s.caption)||"";if(!b||!k)return null;var O=f.i.articleInline,E=f.i.onsiteNLTop,T=r?E:O,C=Object(y.convertProductDefaultsToSamizdatData)(s,d),S=Object(g.getNewsletterProduct)(C),P=(null==s?void 0:s.subscriptionPageLink)||v.SUBSCRIPTIONS_SPLASH_PAGE_DEFAULT;return l()("div",{className:w},void 0,l()(x,{newsletter:S,user:o,signupOptions:{signupFormVersion:T},onSignupComplete:function(e){if(null!=e&&e.subscriptionNeeded){var t=Object(m.a)(P,{ref:f.j.article});window.location.assign(t)}},heading:b,summary:k}))};k.displayName="EmailSignupBlock",k.defaultProps={data:null,isOnsiteNewsletter:!1,isTopOfStory:!1},k.fragments={article:p()(i||(i=o()(["\n    fragment EmailSignupBlock_article on Article {\n      id\n      timesTags @filterEmpty {\n        displayName\n        ... on Published {\n          uri\n        }\n      }\n    }\n  "]))),data:p()(r||(r=o()(["\n    fragment EmailSignupBlock_data on EmailSignupBlock {\n      productCode\n      newsletterSummary: summary {\n        ... on TextInline {\n          text\n        }\n      }\n      newsletterHeading: heading {\n        ... on TextInline {\n          text\n        }\n      }\n      productDefaults {\n        title\n        caption\n        allowedEntitlement\n        subscriptionPageLink\n        isOnsiteFreeTrialEnabled\n        altText\n        frequency\n        caption\n        sampleUrl\n        thumbImg\n      }\n    }\n  "])))};t.a=k},wFfY:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("lSNA")),o=i(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=i(n("aY2f")),c=i(n("dKsL")),u=i(n("/Kb5")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("y9tx"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}var f=function(e){var t=e.displayName,n=e.status,i=e.url,r=e.lastModified,p=e.isActive,f=e.className,m=e.isNew,h=e.trackInteraction,g=e.isLiveRoute;if(!i||!t)return null;var y="live"===(null==n?void 0:n.toLowerCase()),v=r&&Date.now()-Number(new Date(r)),b=!g&&y&&v<=18e5;return o.default.createElement("span",{className:(0,s.cx)(d.menuLinkContainerClass,f),"data-testid":"menu-link"},!p&&o.default.createElement(c.default,{status:n}),o.default.createElement("a",{className:(0,s.cx)(d.menuLinkClass,(0,a.default)({},d.underlineClass,p)),role:"menuitem",href:i,onClick:h},o.default.createElement("span",{className:d.hoverUnderlineClass},t),m&&o.default.createElement(u.default,null)),b&&o.default.createElement("div",{className:d.placeholderClass},o.default.createElement(l.default,{autoUpdate:!0,showAbsoluteTime:!1,iso:r,formatter:"elapsed",className:d.timestampClass})))};f.displayName="MenuLink",f.defaultProps={displayName:void 0,className:void 0,status:void 0,url:void 0,lastModified:void 0,isActive:!1,isNew:!1,trackInteraction:void 0};var m=f;t.default=m},wNrk:function(e,t,n){"use strict";t.a="/vi-assets/static-assets/icon-australia-letter-968327f63e43ed894591f997ff4fcad3.webp"},wRre:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return s})),n.d(t,"b",(function(){return l}));var i=n("XMA8"),r=["UnstructuredBlock","HeaderFullBleedHorizontalBlock","HeaderFullBleedVerticalBlock","HeaderLegacyBlock","HeaderBasicBlock","HeaderLiveBriefingBlock","TwitterEmbedBlock","YouTubeEmbedBlock","SoundcloudEmbedBlock","AudioBlock","VideoBlock","InteractiveBlock","InstagramEmbedBlock","RelatedLinksBlock","DiptychBlock","HeaderMultimediaBlock","VisualStackBlock","CardDeckBlock"],a=function(e){var t,n=e.__typename;return n||(n=e.name),!!r.includes(n)||(!("Dropzone"!==n||!e.adsDesktop)||("ImageBlock"!==n||!e.media||!Object(i.n)(null==e||null===(t=e.media)||void 0===t?void 0:t.crops))&&!(!e.size||"FULL"!==e.size&&"LARGE"!==e.size&&"MEDIUM"!==e.size))},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=["HeaderBasicBlock","HeaderLegacyBlock","HeaderFullBleedHorizontalBlock","HeaderFullBleedVerticalBlock","HeaderLiveBriefingBlock","HeaderMultimediaBlock"];return t&&t.length>0&&(n=t),e.find((function(e){return-1!==n.indexOf(e.__typename)}))||!1},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!!e&&Boolean(1===t)};function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Image";return e?e.__typename===t?e:l(e.promotionalMedia,t):null}},wiOm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onDarkModeInset=t.noDarkModeInsetClass=t.alwaysLightClass=void 0;var i=n("Jqp9"),r=n("3sMT"),a=n("DxDJ"),o=(0,i.css)("color:",r.light.colors.content.primary.hex,";background:",r.light.colors.background.primary.hex,";");t.alwaysLightClass=o;var s=(0,i.css)("@media (prefers-color-scheme:dark){box-shadow:20px 0 0 8px ",r.light.colors.background.primary.hex,",-20px 0 0 8px ",r.light.colors.background.primary.hex,";",a.breakpointMap.small,"{box-shadow:0 0 0 8px ",r.light.colors.background.primary.hex,";}}");t.noDarkModeInsetClass=s;t.onDarkModeInset=".noDarkModeInsetClass &"},wnaz:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.listSelectorClass=t.listNavbarClass=t.default=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=n("3sMT"),s=(0,r.css)("list-style:none;"),l=(0,r.css)("ul{",s,";}");t.listSelectorClass=l;var c=(0,r.css)("display:flex;width:100%;justify-content:space-between;border-bottom:1px solid ",o.color.stroke.primary,";li{list-style-type:none;margin-bottom:0;text-decoration:none;font-size:10px;",a.default.breakpoint.small,"{font-size:17px;}a:hover{text-decoration:underline;}a{color:",o.color.content.quaternary,";border:0;}}");t.listNavbarClass=c;var u=(0,r.styled)("ul",{target:"ez3869y0"})(s,";");t.default=u},x04V:function(e,t,n){"use strict";n.d(t,"b",(function(){return d}));var i=n("lSNA"),r=n.n(i),a=n("RIqP"),o=n.n(a),s=n("CsDw"),l=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||!e.getTargetingKeys||!n.getTargetingKeys)return{};var i=n.getTargetingKeys(),a=e.getTargetingKeys(),l=[].concat(o()(i),o()(a)),c=s.c.every((function(e){return l.includes(e)}));return t={},r()(t,s.g,l.indexOf(s.b)>-1),r()(t,s.e,l.indexOf(s.a)>-1),r()(t,s.i,c),t},c=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.getTargeting)return!1;var n=null===(e=t.getTargeting(s.a))||void 0===e?void 0:e[0];return"string"==typeof n&&n.startsWith("ls-")},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.getTargeting)return!1;var t=e.getTargeting(s.b)[0];return""===t},d=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=l(e,n);return 0===Object.keys(i).length?{}:(t={},r()(t,s.f,!!i[s.e]),r()(t,s.h,!!i[s.g]),r()(t,s.j,!!i[s.i]),r()(t,s.k,c(n)),r()(t,s.l,u(n)),t)};t.a=l},x4ns:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=o;var r=i(n("q1tI")),a=i(n("yxLZ"));function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return r.default.createElement(a.default,{key:n},t)}o.displayName="linkFormatFromOak"},x9rc:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=p;var r=i(n("lSNA")),a=i(n("J4zp")),o=i(n("q1tI")),s=(i(n("17x9")),n("Jqp9")),l=n("eUG7");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e){var t=e.split(":"),n=(0,a.default)(t,2),i=n[0];return n[1]/i}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ratio?{paddingBottom:"".concat(100*d(e.ratio),"%")}:{};return o.default.createElement("div",{className:(0,s.cx)(l.aspectRatioOuterClass,e.className),style:u(u({width:"100%"},t),e.style)},o.default.createElement("div",{className:l.aspectRatioInnerClass},e.children))}p.displayName="AspectRatio",p.defaultProps={className:void 0,ratio:"16:9",style:{},children:null}},xBez:function(e,t,n){"use strict";n.d(t,"b",(function(){return Ae})),n.d(t,"a",(function(){return je}));var i=n("pn57"),r=n("TdMD"),a=n.n(r),o=n("8iTF"),s=n("RIqP"),l=n.n(s),c=n("LgWu"),u=n("ygvk"),d=n("+5AW"),p=n("a9ya"),f="articles",m="comments",h=new RegExp(/<br(\s?)(\/?)>/),g=function(e){var t,n={name:e.userDisplayName,location:(t=e.userLocation,"string"==typeof t?t.replace(h,""):"")};return e.picURL&&(n.avatar=e.picURL),"NULL"!==e.userTitle&&(n.title=e.userTitle),n},y=function(e){return e.replies.map((function(e){return{type:m,id:e.commentID.toString()}}))},v=function(e){return{type:m,id:e.commentID.toString(),attributes:{sourceId:e.commentID.toString(),replyToSourceId:e.parentID||0,authorSourceId:e.userID.toString(),text:e.commentBody,authorPanel:g(e),isAccepted:"approved"===e.status,isHighlighted:e.editorsSelection,sourceApprovedAt:(t=e.approveDate,new Date(1e3*parseInt(t,10)).toISOString()),recommendedCount:e.recommendedFlag?e.recommendations-1:e.recommendations,replyId:e.parentID||null,replyToAuthorPanel:e.parentID?{name:e.parentUserDisplayName}:null,isReporterReply:"reporterReply"===e.commentType},relationships:{replies:{data:y(e),isFetchingReplies:!1,replyCount:e.replyCount},replyTo:{data:{type:m,id:e.parentID?e.parentID.toString():""}}}};var t},b=function(e){return Boolean(e.commentID)&&e.commentType!==f},_=function(e){var t=e.payload,n=t.results,i=n.comments,r=n.page,a=t.results,o={};o.commentIds=i.map((function(e){return b(e)&&e.commentID.toString()}));var s=o.commentIds.length>0?o.commentIds[o.commentIds.length-1]:0,l=function(e,t,n,i){var r=Object(c.parse)(e,!0),a=t+25;return a<i?(r.query.offset=a,r.query.limit=25,r.query.commentSequence=n,r.search=null,Object(c.format)(r)):null}(Object(d.c)(e.meta),r-1,s||0,function(e,t){switch(e){case p.a.HIGHLIGHTED:return t.totalEditorsSelectionFound;case p.a.RECOMMENDED:return t.totalRecommendationsFound;case p.a.REPORTER_REPLIES:return t.totalReporterReplyCommentsFound;default:return t.totalParentCommentsFound}}(e.meta.listId,a));return l&&(o.links={next:l}),o},w=function(e){var t=e.payload.results.comments,n=t.filter((function(e){return b(e)})).map((function(e){return v(e)})),i=t.reduce((function(e,t){var n=t.replies?t.replies:[];return e.concat(n.map((function(e){return v(e)})))}),[]);return[].concat(l()(n),l()(i)).reduce((function(e,t){return e[t.id]=t,e}),{})},x=function(){return function(e){return function(t){if(!t.error)switch(t.type){case u.a.GET_ARTICLE_RESPONSE:t.payload=function(e){var t=e.payload.results;return{data:{type:f,id:t.url,attributes:{sourceId:t.url,url:t.url,approvedCount:t.totalCommentsFound,highlightedCount:t.totalEditorsSelectionFound,recommendedCount:t.totalRecommendationsFound,reporterReplyCount:t.totalReporterReplyCommentsFound}}}}(t);break;case u.a.GET_COMMENTS_RESPONSE:case u.a.GET_REPLIES_RESPONSE:t.payload=w(t);break;case u.a.GET_COMMENT_LIST_RESPONSE:t.commentsList=_(t),t.payload=w(t)}return e(t)}}},k=n("lSNA"),O=n.n(k),E=function(){return Date.now()};function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S={isFetching:!1},P=function(e,t){var n={lastUpdatedMs:E()};return t.error?n.error=t.payload:n.data=t.payload.data,C({isFetching:!1},n)},M=function(e,t){if(t.error)return e;var n=t.payload.results||{};return{commentStatus:1===n.canSubmit?o.a.ACCEPT_AND_DISPLAY_COMMENTS:o.a.DISPLAY_COMMENTS_ONLY,taxonomy:n.taxonomy,approvedCount:n.totalCommentsFound,url:t.meta&&t.meta.articleUrl}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.a.CLEAR_ARTICLE:return S;case u.a.GET_ARTICLE_REQUEST:return C(C({},e),{},{isFetching:!0});case u.a.GET_ARTICLE_RESPONSE:return C(C({},e),P(0,t));case u.a.GET_SUMMARY_RESPONSE:return C(C({},e),M(e,t));default:return e}};function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L={replyToCommentId:null,submittedComments:{}},R=function(e,t){if(t.error)return{};var n=t.meta.values;return{replyToCommentId:null,submittedComments:j(j({},e.submittedComments),{},O()({},n.parentID,n.commentBody))}},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.a.CLEAR_ARTICLE:return L;case u.a.OPEN_COMMENT_ENTRY:return j(j({},e),{},{replyToCommentId:t.replyToCommentId});case u.a.CLOSE_COMMENT_ENTRY:return j(j({},e),{},{replyToCommentId:null});case u.a.CREATE_COMMENT_RESPONSE:return j(j({},e),R(e,t));default:return e}};function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=O()({},p.a.ALL,{isFetching:!1,isFetchingNext:!1,sortTypes:[p.c.NEWEST,p.c.OLDEST],selectedSortType:p.c.NEWEST}),F=function(e,t){var n=t.meta,i=n.listId;return n.nextUrl?O()({},i,B(B({},e[i]),{},{isFetchingNext:!0})):O()({},i,B(B({},e[i]),{},{isFetching:!0}))},U=function(e,t){var n,i=t.meta,r=i.listId,a=i.sortType,o=void 0===a?null:a,s=i.isPaginatedRequest,l=void 0!==s&&s,c=e[r],u=(null===(n=t.commentsList.links)||void 0===n?void 0:n.next)||null,d=t.commentsList.commentIds;return l&&(d=c.commentIds.concat(d)),O()({},r,B(B({},c),{},{isFetching:!1,isFetchingNext:!1,lastUpdatedMs:E(),commentIds:d,nextUrl:u,selectedSortType:o||(null==c?void 0:c.selectedSortType)||null}))},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.a.CLEAR_ARTICLE:return z;case u.a.GET_COMMENT_LIST_REQUEST:return B(B({},e),F(e,t));case u.a.GET_COMMENT_LIST_RESPONSE:return B(B({},e),U(e,t));default:return e}};function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var V={},G=function(e,t){if(t.error)return{};var n=e[t.meta.commentId];return n.relationships.replies.isFetchingReplies=!0,n},Y=function(e,t){if(t.error)return e;var n=q(q({},t.payload),e),i=t.meta.commentId,r=n[i].relationships.replies;r.isFetchingReplies=!1;var a=t.payload[i].relationships.replies.data;return r.data=r.data.concat(a),n},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.a.CLEAR_ARTICLE:return V;case u.a.GET_COMMENTS_RESPONSE:case u.a.GET_COMMENT_LIST_RESPONSE:return q(q({},e),t.payload);case u.a.GET_REPLIES_REQUEST:return q(q({},e),G(e,t));case u.a.GET_REPLIES_RESPONSE:return Y(e,t);default:return e}},X=n("2SQs"),J=n.n(X);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Q={flaggedComments:{},shortUrls:{},recommended:{}},ee=function(e,t){return t.error?{}:{flaggedComments:$($({},e.flaggedComments),{},O()({},t.meta.values.commentID,!0))}},te=function(e,t){return t.error?{}:{shortUrls:$($({},e.shortUrls),{},O()({},t.meta.commentId,t.payload.payload.short_url))}},ne=function(e,t){if(t.error)return{};try{var n=t.payload.results.activity.recommendations,i={};return n.forEach((function(e){i[e]=!0})),{recommended:i}}catch(e){return{}}},ie=function(e,t){if(t.error)return{};var n=t.meta.commentId,i=$({},e.recommended);return i[n]=!0,{recommended:i}},re=function(e,t){return t.error?{}:{recommended:J()(e.recommended,t.meta.commentId)}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.a.CLEAR_ARTICLE:return Q;case u.a.FLAG_COMMENT_RESPONSE:return $($({},e),ee(e,t));case u.a.GET_SHORT_URL_RESPONSE:return $($({},e),te(e,t));case u.a.GET_PROFILE_RESPONSE:return $($({},e),ne(0,t));case u.a.UNRECOMMEND_COMMENT_RESPONSE:return $($({},e),re(e,t));case u.a.RECOMMEND_COMMENT_RESPONSE:return $($({},e),ie(e,t));default:return e}},oe=n("Lkij");function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ce={"comment-list-sort-editors":p.d.HIGHLIGHTED,"comment-list-sort-recommended":p.d.RECOMMENDED,"comment-list-sort-replies":p.d.REPORTER_REPLIES},ue={viewId:null,isFetching:!1},de=function(e){return{viewId:e,label:p.e[e]}},pe=function(e,t){if(t.error)return e;var n=[],i=t.payload.data.attributes;return i&&(i.highlightedCount>0&&n.push(de(p.d.HIGHLIGHTED)),i.recommendedCount>0&&n.push(de(p.d.RECOMMENDED)),i.reporterReplyCount>0&&n.push(de(p.d.REPORTER_REPLIES))),n.push(de(p.d.ALL)),{tabs:n}},fe=function(e,t){if(t.error)return{isUnderMaintenance:!0};var n=t.payload.results||{};return{isUnderMaintenance:(n.isUnderMaintenance||Object(oe.a)("MAINT_MODE","ON"))&&!("1"===Object(o.d)("NYT-COM-MMB")),lastUpdatedMs:E(),isFetching:!1,commentQuestion:n.commentQuestion,viewId:ce[n.sortBy]||p.d.ALL}},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.a.CLEAR_ARTICLE:return ue;case u.a.GET_ARTICLE_RESPONSE:return le(le({},e),pe(e,t));case u.a.SELECT_VIEW:return le(le({},e),{},{viewId:t.viewId});case u.a.GET_SUMMARY_REQUEST:return le(le({},e),{},{isFetching:!0});case u.a.GET_SUMMARY_RESPONSE:return le(le({},e),fe(0,t));default:return e}},he=n("X7zQ"),ge=n("JYoY");function ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var be,_e={isFetching:!1},we=function(e,t){var n={lastUpdatedMs:E(),isFetching:!1},i=t.response.headers.get("X-Csrf-Token");return i&&(n.csrfToken=i),t.error?n.error=t.payload:n.data=t.payload.results,n},xe=function(e,t){if(t.error)return{};var n=t.meta.values;return{data:ve(ve({},e.data),{},{displayName:n[he.a.DISPLAY_NAME],location:n[he.a.LOCATION],comment_notify:n[he.a.COMMENT_NOTIFY]})}},ke=function(e,t){var n=t.payload.results;return ve(ve({},e.data),{},{data:O()({},ge.a.AVATAR_URL,n)})},Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.a.GET_PROFILE_REQUEST:return ve(ve({},e),{},{isFetching:!0});case u.a.GET_PROFILE_RESPONSE:case u.a.UPDATE_PROFILE_RESPONSE:return ve(ve({},e),we(0,t));case u.a.UPDATE_AVATAR_RESPONSE:return ve(ve({},e),ke(e,t));case u.a.CREATE_COMMENT_RESPONSE:return ve(ve({},e),xe(e,t));default:return e}};function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){O()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce=(be={},O()(be,p.d.ALL,{listId:p.a.ALL,numPreviewReplies:2}),O()(be,p.d.HIGHLIGHTED,{listId:p.a.HIGHLIGHTED}),O()(be,p.d.RECOMMENDED,{listId:p.a.RECOMMENDED}),O()(be,p.d.REPORTER_REPLIES,{listId:p.a.REPORTER_REPLIES,numPreviewReplies:1}),O()(be,p.d.SINGLE_COMMENT,{commentId:null}),be),Se=function(e,t){var n=null,i=null;return t.viewId===p.d.SINGLE_COMMENT&&(n=t.commentId,i=t.replyCommentId),O()({},p.d.SINGLE_COMMENT,Te(Te({},e[p.d.SINGLE_COMMENT]),{},{commentId:n,replyCommentId:i}))},Pe={article:I,commentActions:ae,commentEntry:N,commentLists:H,comments:Z,panel:me,profile:Oe,views:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.a.CLEAR_ARTICLE:return Ce;case u.a.SELECT_VIEW:return Te(Te({},e),Se(e,t));default:return e}}},Me=[a.a];Object(o.g)()||Me.push(x);var Ie=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||i.compose,Ae=Object(i.createStore)(Object(i.combineReducers)(Pe),Ie(i.applyMiddleware.apply(void 0,Me)));function je(e){Pe.form=e,Ae.replaceReducer(Object(i.combineReducers)(Pe))}},xCAf:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=u(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("xXO4"))),s=i(n("0bZC")),l=i(n("64gi")),c=i(n("cFZn"));function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(u=function(e){return e?n:t})(e)}var d=function(e){var t=e.headline,n=e.credits,i=e.summary,r=e.date,u=e.transcript,d=(0,c.default)("string"==typeof u?[{speaker:"",text:u}]:null==u?void 0:u.transcriptFragment)||[];return null!=d&&d.length?a.default.createElement("div",{className:o.transcriptBodyClass},a.default.createElement(s.default,{episodeTitle:t,hostedBy:n,summary:i,pubDate:r}),a.default.createElement(l.default,{blocks:d})):null};d.defaultProps={headline:void 0,credits:void 0,summary:void 0,date:void 0,transcript:void 0};var p=d;t.default=p},xHA4:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LATEST_UPDATES_BLOCK",{enumerable:!0,get:function(){return l.LATEST_UPDATES_BLOCK}}),Object.defineProperty(t,"STORYLINE_BLOCKS",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"canPlaceBlock",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"canStorylineComposeBlock",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"canStorylineComposeExperimentalAsset",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"getComposableStorylineBlocks",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"getExperimentalAssetDataFromStoryline",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"hideInlineModule",{enumerable:!0,get:function(){return u.default}}),t.storyPageTests=void 0;var a=i(n("uJd7")),o=i(n("D3tI")),s=i(n("t7Wz")),l=m(n("4Qil")),c=i(n("XtfB")),u=i(n("OmBZ")),d=i(n("+rdV")),p=m(n("Uxaz"));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function m(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}return i.default=e,n&&n.set(e,i),i}t.storyPageTests=p},xPyS:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("pVnL")),a=i(n("q1tI")),o=(i(n("17x9")),i(n("139F"))),s=n("Jqp9"),l=i(n("0oBV")),c=n("E2S6"),u=i(n("dxmc")),d=function(e){var t=e.isInAMP,n=e.overText,i=e.leadPhoto,l=e.attribution,d=e.rendition,p=e.size;return i?a.default.createElement("div",{className:(0,s.cx)((0,c.containerClass)(t),"exp-pq-size-".concat(p))},a.default.createElement("div",{className:t?c.ampContainerClass:void 0},a.default.createElement(u.default,(0,r.default)({},i,{rendition:d,isInAMP:t})),a.default.createElement(o.default,{className:c.imageCreditClass},i.credit)),a.default.createElement(c.StyledQuoteContainer,null,a.default.createElement("p",null,n),a.default.createElement(c.StyledAttribution,null,l))):null};d.displayName="PhotoQuote",d.defaultProps={overText:"",leadPhoto:void 0,rendition:"jumbo",attribution:"",isInAMP:!1,size:"medium"};var p=(0,l.default)(d);t.default=p},xXO4:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.transcriptBodyClass=t.transcriptBlocksClass=t.textClass=t.speakerClass=t.paragraphClass=t.kickerClass=t.hostedByClass=t.episodeTitleClass=t.episodeSummaryClass=t.episodePubdateClass=t.episodeMetadataClass=t.archivedBlocksClass=void 0;var r=n("Jqp9"),a=n("3sMT"),o=i(n("wXC7")),s=(0,r.css)("position:relative;padding:0 20px;border-top:1px solid ",a.color.stroke.quaternary,";height:calc(100% - 40px);overflow-y:scroll;*{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;-webkit-touch-callout:none;}",o.default.breakpoint.medium,"{padding:0 50px;}",o.default.breakpoint.mediumLarge,"{margin:0 4px;padding:0 74px 0 112px;}");t.transcriptBodyClass=s;var l=(0,r.css)("padding:25px 0 20px;border-bottom:1px solid ",a.color.stroke.quaternary,";");t.episodeMetadataClass=l;var c=(0,r.css)("font-size:13px;text-transform:uppercase;font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.bold,";letter-spacing:0.04em;color:",a.color.content.secondary,";margin-bottom:15px;",o.default.breakpoint.large,"{display:none;}");t.kickerClass=c;var u=(0,r.css)("font-size:40px;line-height:48px;font-family:",o.default.font.serifMedium,";margin-bottom:14px;");t.episodeTitleClass=u;var d=(0,r.css)("font-family:",o.default.font.franklinBase,";font-weight:",o.default.font.weight.bold,";font-size:15px;line-height:22px;margin-bottom:5px;");t.hostedByClass=d;var p=(0,r.css)("font-family:",o.default.font.franklinBase,";font-size:15px;line-height:22px;margin-bottom:10px;");t.episodeSummaryClass=p;var f=(0,r.css)("font-family:",o.default.font.franklinBase,";font-size:15px;line-height:22px;padding:4px 0;display:block;");t.episodePubdateClass=f;var m=(0,r.css)("padding-top:30px;",o.default.breakpoint.medium,"{padding-bottom:35px;}");t.transcriptBlocksClass=m;var h=(0,r.css)("font-family:",o.default.font.franklinBase,";font-size:14px;line-height:16px;color:",o.default.color.gray40,";text-transform:capitalize;padding-bottom:5px;");t.speakerClass=h;var g=(0,r.css)("font-family:",o.default.font.serifBase,";font-size:17px;line-height:26px;color:",a.color.content.secondary,";",o.default.breakpoint.large,"{font-size:18px;line-height:28px;}margin-bottom:25px;",o.default.breakpoint.medium,"{margin-bottom:33px;}");t.textClass=g;var y=(0,r.css)("margin-bottom:0.9375rem;");t.paragraphClass=y;var v=(0,r.css)("border-left:3px solid ",a.color.stroke.tertiary,";padding-left:20px;.",g,"{font-style:italic;}",o.default.breakpoint.small,"{padding-left:40px;}");t.archivedBlocksClass=v},xeA1:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.isHeaderBlock=t.default=t.VOX_POP_SLUG=t.NUM_VISIBLE_POST_BLOCKS=void 0;var r=i(n("pVnL")),a=i(n("lSNA")),o=(i(n("17x9")),n("Jqp9")),s=i(n("q1tI")),l=n("hZ4i"),c=n("raa0");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.NUM_VISIBLE_POST_BLOCKS=3;t.VOX_POP_SLUG="vox-pop";var p=["ParagraphBlock","ListBlock","Heading1Block","Heading2Block","Heading3Block","SummaryBlock","CapsuleBlock"],f=["AudioBlock","BlockquoteBlock","DetailBlock","DiptychBlock","ImageBlock","TwitterEmbedBlock","VideoBlock","YouTubeEmbedBlock","SlideshowBlock","PullquoteBlock","InteractiveBlock"],m=function(e){return["HeaderBasicBlock","HeaderFullBleedHorizontalBlock","HeaderFullBleedVerticalBlock","HeaderLiveBriefingBlock","HeaderMultimediaBlock"].includes(e.__typename)};t.isHeaderBlock=m;var h=function(e){var t=e.addendum,n=e.body,i=e.bylines,a=e.componentProps,u=e.componentTypeMap,h=e.isAMP,g=e.isInWebview,y=e.renderHeader,v=e.renderReadMore,b=e.deepUrl,_=e.numVisibleBlocks,w=e.metadata,x=e.isSplitLayout,k=e.isInCarousel,O=e.slug,E=(0,o.useTheme)(),T=E.typeOfBlog,C=E.treatment,S=E.shouldRender,P=null==O?void 0:O.includes("vox-pop"),M=0,I=(null==n?void 0:n.content.filter((function(e){switch(e.__typename){case"ParagraphBlock":return(null==(t=e)||null===(n=t.content)||void 0===n?void 0:n.length)>0;default:return!0}var t,n})).map((function(e,t){var n=(0,l.getBlockKey)(e,t),i=function(e){var t,n,i=e.blogType,r=e.dataType,a=e.treatment,o="FACTCHECK"===i?"FACT_CHECK":i,s=null;(c.BlockClasses[r]&&(s=c.BlockClasses[r][o]||c.BlockClasses[r].default||null),s instanceof Object)&&(s=(null===(t=s)||void 0===t?void 0:t[a])||(null===(n=s)||void 0===n?void 0:n.default));return s}({blogType:(0,l.getPostTypeOverride)({metadata:w})||T,dataType:e.__typename,treatment:"ParagraphBlock"===e.__typename&&k?"carousel":C});if(m(e))return y?y(e):null;var p=u[e.__typename];if(!p)return null;var f=d(d({},a),{},{className:(0,o.cx)(i,a.className)});return h&&("ImageBlock"===e.__typename?(e.size="full",f.useMobileCrop=!0):"ParagraphBlock"===e.__typename?f.className=c.paragraphOverrideClass:"InteractiveBlock"===e.__typename&&(f.articleURL=b)),(g||x)&&"DiptychBlock"===e.__typename&&(f.usePhotoViewer=!1),"InteractiveBlock"===e.__typename?s.default.createElement("div",{key:n,className:c.interactiveOverrideClass},s.default.createElement(p,(0,r.default)({data:e},f))):("PullquoteBlock"===e.__typename&&(f.isVoxPopPost=P),"ImageBlock"===e.__typename&&P&&(f.imageBlockClass=c.voxPopImageOverrideClass),"VideoBlock"===e.__typename&&P&&(f.isVoxPopPost=P),"DetailBlock"===e.__typename&&null!=S&&S.opinionHeader&&(f.className=(0,o.cx)(f.className,c.opinionLabelOverrideClass)),s.default.createElement(p,(0,r.default)({key:n,data:e},f)))})).filter((function(e){return e})))||[];if(t||i){var A,j=null==I||null===(A=I.map((function(e){var t,n,i,r,a,o,s;return p.includes(null==e||null===(t=e.props)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.__typename)&&(null==e||null===(i=e.props)||void 0===i||null===(r=i.data)||void 0===r||null===(a=r.content)||void 0===a?void 0:a.length)>0||f.includes(null==e||null===(o=e.props)||void 0===o||null===(s=o.data)||void 0===s?void 0:s.__typename)})))||void 0===A?void 0:A.lastIndexOf(!0),L=j<0?null==I?void 0:I.length:j+1;i&&(I.splice(L,0,i),M+=1),t&&(I.splice(L,0,t),M+=1)}for(var R=["DetailBlock","LabelBlock"],N=_||3,D=I[N-1];null!==(B=D)&&void 0!==B&&null!==(z=B.props)&&void 0!==z&&z.data&&R.includes(D.props.data.__typename);){var B,z;D=I[(N+=1)-1]}var F=I.slice(N).length-M>1;if(v&&F&&I.length>N){var U=I.splice(N);I.push(v(U))}return I};h.defaultProps={addendum:void 0,body:[],bylines:null,componentProps:{},componentTypeMap:{},isAMP:!1,isInWebview:!1,metadata:{},renderHeader:null,renderReadMore:null,isSplitLayout:!1,isInCarousel:!1,deepUrl:"",slug:null,numVisibleBlocks:0};var g=h;t.default=g},xf5d:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var i=n("Jqp9"),r=n("wXC7"),a=n.n(r),o=n("3sMT"),s=Object(i.css)("font-family:",a.a.font.franklinBase,";font-size:",a.a.font.size(14),";line-height:",a.a.font.size(20),";display:block;width:auto;margin:5px auto 0 auto;",a.a.breakpoint.small,"{display:inline-block;width:auto;margin-top:0;}@media print{display:none;}"),l=Object(i.css)("position:relative;display:inline-block;color:",o.color.signal.editorial,";",a.a.breakpoint.small,"{margin-top:0;}&:hover{color:",o.color.signal.editorial,";}&:visited{color:",o.color.signal.editorial,";}&::after{color:",o.color.stroke.quaternary,";content:'';margin-left:6px;margin-right:7px;font-size:8px;}&:last-child::after{content:none;}")},"xn+k":function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.bar10=t.bar9=t.bar8=t.bar7=t.bar6=t.bar5=t.bar4=t.bar3=t.bar2=t.bar1=t.spinner=t.loaderBox=t.complianceLink=t.complianceLinksMobile=t.complianceLinksDesktop=t.dockBorder=t.confirmationButton=t.offerButton=t.link=t.subscriptionText=t.surveyText=t.ctaContainer=t.confirmationSubtitleBox=t.confirmationTitle=t.title2=t.title1=t.descriptionBox=t.header=t.headerContainer=t.headerLogo=t.mainContent=t.headerText=t.headingInfoContainerStyle=t.headingClassStyle=void 0;var r,a,o,s,l,c,u,d,p,f,m,h,g,y,v,b,_,w,x,k,O,E,T,C,S,P,M,I,A,j,L,R,N,D,B=n("Jqp9"),z=n("lVLo");t.headingClassStyle=(0,B.css)(r||(r=i(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  text-align: center;\n  justify-content: space-between;\n  height: 100%;\n  width: 100%;\n  margin: auto;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n  outline: ",";\n\n  strong {\n    font-weight: ",";\n  }\n"],["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  text-align: center;\n  justify-content: space-between;\n  height: 100%;\n  width: 100%;\n  margin: auto;\n  /* stylelint-disable-next-line declaration-no-important */\n  -webkit-font-smoothing: antialiased !important;\n  outline: ",";\n\n  strong {\n    font-weight: ",";\n  }\n"])),z.colors.blue,z.fontWeights.bold),t.headingInfoContainerStyle=(0,B.css)(a||(a=i(["\n  width: 100%;\n  font-family: ",";\n  text-align: left;\n\n  span {\n    display: inline;\n  }\n\n  @media (min-width: ","px) {\n    text-align: center;\n  }\n"],["\n  width: 100%;\n  font-family: ",";\n  text-align: left;\n\n  span {\n    display: inline;\n  }\n\n  @media (min-width: ","px) {\n    text-align: center;\n  }\n"])),z.fonts.franklin,z.widths.medium),t.headerText=(0,B.css)(o||(o=i(["\n  font-family: ",";\n  font-size: 18px;\n  font-weight: ",";\n  line-height: 130%;\n  margin: auto 0 auto 20px;\n  text-align: center;\n  justify-content: center;\n  padding: 10px 0 10px 90px;\n\n  @media (max-width: 500px) {\n    font-size: 15px;\n    font-weight: ",";\n    line-height: 15px;\n    text-align: left;\n    padding: 10px 0;\n  }\n"],["\n  font-family: ",";\n  font-size: 18px;\n  font-weight: ",";\n  line-height: 130%;\n  margin: auto 0 auto 20px;\n  text-align: center;\n  justify-content: center;\n  padding: 10px 0 10px 90px;\n\n  @media (max-width: 500px) {\n    font-size: 15px;\n    font-weight: ",";\n    line-height: 15px;\n    text-align: left;\n    padding: 10px 0;\n  }\n"])),z.fonts.franklin,z.fontWeights.semiBold,z.fontWeights.medium),t.mainContent=(0,B.css)(s||(s=i(["\n  align-self: flex-start;\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  justify-content: space-between;\n  flex: 1 0 0;\n\n  background-color: ",";\n  font-family: ",";\n  border-radius: 5px;\n  padding: 20px;\n  margin: 0 auto 20px;\n  max-width: 240px;\n  column-gap: 24px;\n\n  @media (min-width: ","px) {\n    max-width: unset;\n    width: calc(100% - 80px);\n  }\n\n  @media (min-width: ","px) {\n    flex-direction: row;\n    max-width: 1176px;\n    padding: 32px;\n    width: calc(100% - 114px);\n    justify-content: space-between;\n    text-align: left;\n  }\n\n  @media (max-width: 500px) {\n    flex-direction: column;\n    align-items: stretch;\n  }\n"],["\n  align-self: flex-start;\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  justify-content: space-between;\n  flex: 1 0 0;\n\n  background-color: ",";\n  font-family: ",";\n  border-radius: 5px;\n  padding: 20px;\n  margin: 0 auto 20px;\n  max-width: 240px;\n  column-gap: 24px;\n\n  @media (min-width: ","px) {\n    max-width: unset;\n    width: calc(100% - 80px);\n  }\n\n  @media (min-width: ","px) {\n    flex-direction: row;\n    max-width: 1176px;\n    padding: 32px;\n    width: calc(100% - 114px);\n    justify-content: space-between;\n    text-align: left;\n  }\n\n  @media (max-width: 500px) {\n    flex-direction: column;\n    align-items: stretch;\n  }\n"])),z.colors.graylightBackgroundTertiary2,z.fonts.franklin,z.widths.verySmall,z.widths.medium),t.headerLogo=(0,B.css)(l||(l=i(["\n  align-self: start;\n  display: none;\n\n  @media (min-width: ","px) {\n    display: block;\n    & > svg {\n      width: 154px;\n      height: 20px;\n    }\n  }\n"],["\n  align-self: start;\n  display: none;\n\n  @media (min-width: ","px) {\n    display: block;\n    & > svg {\n      width: 154px;\n      height: 20px;\n    }\n  }\n"])),z.widths.medium),t.headerContainer=(0,B.css)(c||(c=i(["\n  align-self: start;\n  color: ",";\n  margin: 0 auto;\n  padding: 0 20px;\n\n  @media (min-width: ","px) {\n    margin: 0;\n  }\n"],["\n  align-self: start;\n  color: ",";\n  margin: 0 auto;\n  padding: 0 20px;\n\n  @media (min-width: ","px) {\n    margin: 0;\n  }\n"])),z.colors.white,z.widths.medium),t.header=(0,B.css)(u||(u=i(["\n  font-family: ",";\n  font-size: 20px;\n  font-weight: ",";\n  line-height: 120%;\n  margin-bottom: 8px;\n\n  @media (min-width: ","px) {\n    font-size: 22px;\n  }\n"],["\n  font-family: ",";\n  font-size: 20px;\n  font-weight: ",";\n  line-height: 120%;\n  margin-bottom: 8px;\n\n  @media (min-width: ","px) {\n    font-size: 22px;\n  }\n"])),z.fonts.franklin,z.fontWeights.semiBold,z.widths.medium),t.descriptionBox=(0,B.css)(d||(d=i(["\n  @media (min-width: ","px) {\n    max-width: 548px;\n  }\n"],["\n  @media (min-width: ","px) {\n    max-width: 548px;\n  }\n"])),z.widths.mediumLarge),t.title1=(0,B.css)(p||(p=i(["\n  font-family: ",";\n  font-size: 21px;\n  font-style: normal;\n  font-weight: ",";\n  line-height: 25px;\n\n  @media (max-width: 500px) {\n    font-size: 16px;\n  }\n"],["\n  font-family: ",";\n  font-size: 21px;\n  font-style: normal;\n  font-weight: ",";\n  line-height: 25px;\n\n  @media (max-width: 500px) {\n    font-size: 16px;\n  }\n"])),z.fonts.franklin,z.fontWeights.medium),t.title2=(0,B.css)(f||(f=i(["\n  font-family: ",";\n  font-size: 21px;\n  font-style: normal;\n  font-weight: ",";\n  line-height: 25px;\n\n  @media (max-width: 500px) {\n    font-size: 16px;\n    line-height: 21px;\n  }\n"],["\n  font-family: ",";\n  font-size: 21px;\n  font-style: normal;\n  font-weight: ",";\n  line-height: 25px;\n\n  @media (max-width: 500px) {\n    font-size: 16px;\n    line-height: 21px;\n  }\n"])),z.fonts.franklin,z.fontWeights.bold),t.confirmationTitle=(0,B.css)(m||(m=i(["\n  font-family: ",";\n  font-size: 21px;\n  font-style: normal;\n  font-weight: ",";\n  line-height: 25px;\n  margin-bottom: 16px;\n\n  @media (max-width: 500px) {\n    font-size: 16px;\n    line-height: 21px;\n  }\n"],["\n  font-family: ",";\n  font-size: 21px;\n  font-style: normal;\n  font-weight: ",";\n  line-height: 25px;\n  margin-bottom: 16px;\n\n  @media (max-width: 500px) {\n    font-size: 16px;\n    line-height: 21px;\n  }\n"])),z.fonts.franklin,z.fontWeights.bold),t.confirmationSubtitleBox=(0,B.css)(h||(h=i(["\n  display: flex;\n  flex-direction: column;\n  row-gap: 8px;\n"],["\n  display: flex;\n  flex-direction: column;\n  row-gap: 8px;\n"]))),t.ctaContainer=(0,B.css)(g||(g=i(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n\n  @media (min-width: 501px) {\n    row-gap: 12px;\n  }\n\n  @media (max-width: 500px) {\n    align-items: center;\n  }\n"],["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n\n  @media (min-width: 501px) {\n    row-gap: 12px;\n  }\n\n  @media (max-width: 500px) {\n    align-items: center;\n  }\n"]))),t.surveyText=(0,B.css)(y||(y=i(["\n  font-family: ",";\n  font-size: 14px;\n  font-weight: ",";\n  font-style: normal;\n  line-height: 150%;\n  color: ",";\n"],["\n  font-family: ",";\n  font-size: 14px;\n  font-weight: ",";\n  font-style: normal;\n  line-height: 150%;\n  color: ",";\n"])),z.fonts.franklin,z.fontWeights.medium,z.colors.blackDarkBackgroundPrimary),t.subscriptionText=(0,B.css)(v||(v=i(["\n  font-family: ",";\n  font-size: 14px;\n  font-weight: ",";\n  font-style: normal;\n  line-height: 150%;\n  color: ",";\n"],["\n  font-family: ",";\n  font-size: 14px;\n  font-weight: ",";\n  font-style: normal;\n  line-height: 150%;\n  color: ",";\n"])),z.fonts.franklin,z.fontWeights.semiBold,z.colors.blackDarkBackgroundPrimary),t.link=(0,B.css)(b||(b=i(["\n  color: ",";\n  text-decoration: underline;\n  white-space: nowrap;\n  font-weight: ",";\n"],["\n  color: ",";\n  text-decoration: underline;\n  white-space: nowrap;\n  font-weight: ",";\n"])),z.colors.blackDarkBackgroundPrimary,z.fontWeights.bold),t.offerButton=(0,B.css)(_||(_=i(["\n  font-family: ",";\n  text-decoration: none;\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 150%;\n  color: ",";\n  background-color: ",";\n  border-radius: 3px;\n  cursor: pointer;\n\n  width: 100%;\n  height: 44px;\n  padding: 0 16px;\n\n  @media (max-width: 500px) {\n    margin: 16px 0;\n  }\n\n  @media (min-width: 501px) {\n    width: 150px;\n    height: 44px;\n  }\n"],["\n  font-family: ",";\n  text-decoration: none;\n  font-size: 16px;\n  font-weight: ",";\n  line-height: 150%;\n  color: ",";\n  background-color: ",";\n  border-radius: 3px;\n  cursor: pointer;\n\n  width: 100%;\n  height: 44px;\n  padding: 0 16px;\n\n  @media (max-width: 500px) {\n    margin: 16px 0;\n  }\n\n  @media (min-width: 501px) {\n    width: 150px;\n    height: 44px;\n  }\n"])),z.fonts.franklin,z.fontWeights.semiBold,z.colors.whiteDarkContentPrimary,z.colors.blackDarkBackgroundPrimary),t.confirmationButton=(0,B.css)(w||(w=i(["\n  height: 44px;\n  padding: 0 16px;\n  width: 100%;\n  border-radius: 3px;\n  border: 1px solid #121212;\n  background-color: inherit;\n  cursor: pointer;\n  font-family: ",";\n  white-space: nowrap;\n\n  @media (max-width: 500px) {\n    margin-top: 16px;\n  }\n"],["\n  height: 44px;\n  padding: 0 16px;\n  width: 100%;\n  border-radius: 3px;\n  border: 1px solid #121212;\n  background-color: inherit;\n  cursor: pointer;\n  font-family: ",";\n  white-space: nowrap;\n\n  @media (max-width: 500px) {\n    margin-top: 16px;\n  }\n"])),z.fonts.franklin),t.dockBorder=(0,B.css)(x||(x=i(["\n  border-top: 1px solid ",";\n  background-color: ",";\n"],["\n  border-top: 1px solid ",";\n  background-color: ",";\n"])),z.colors.veryDarkGrey,z.colors.white),t.complianceLinksDesktop=(0,B.css)(k||(k=i(["\n  margin-top: 10px;\n  display: block;\n\n  @media (max-width: 500px) {\n    display: none;\n  }\n"],["\n  margin-top: 10px;\n  display: block;\n\n  @media (max-width: 500px) {\n    display: none;\n  }\n"]))),t.complianceLinksMobile=(0,B.css)(O||(O=i(["\n  margin-top: 10px;\n  text-align: center;\n  display: none;\n  color: ",";\n\n  @media (max-width: 500px) {\n    display: block;\n  }\n"],["\n  margin-top: 10px;\n  text-align: center;\n  display: none;\n  color: ",";\n\n  @media (max-width: 500px) {\n    display: block;\n  }\n"])),z.colors.black),t.complianceLink=(0,B.css)(E||(E=i(["\n  font-size: 11px;\n  font-family: ",";\n  text-decoration: underline;\n  font-weight: 300;\n  color: ",";\n\n  &:first-of-type {\n    margin-right: 10px;\n  }\n"],["\n  font-size: 11px;\n  font-family: ",";\n  text-decoration: underline;\n  font-weight: 300;\n  color: ",";\n\n  &:first-of-type {\n    margin-right: 10px;\n  }\n"])),z.fonts.franklin,z.colors.black),t.loaderBox=(0,B.css)(T||(T=i(["\n  background: ",";}\n  min-height: 140px;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"],["\n  background: ",";}\n  min-height: 140px;\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"])),z.colors.white),t.spinner=(0,B.css)(C||(C=i(["\n  position: relative;\n  width: 34px;\n  height: 44px;\n  padding: 10px;\n  margin-bottom: 40px;\n\n  @keyframes fade {\n    from {\n      opacity: 1;\n    }\n    to {\n      opacity: 0.25;\n    }\n  }\n\n  & > div {\n    width: 4%;\n    height: 16%;\n    background: #121212;\n    position: absolute;\n    left: 48%;\n    top: 43%;\n    opacity: 0;\n    border-radius: 50px;\n  }\n"],["\n  position: relative;\n  width: 34px;\n  height: 44px;\n  padding: 10px;\n  margin-bottom: 40px;\n\n  @keyframes fade {\n    from {\n      opacity: 1;\n    }\n    to {\n      opacity: 0.25;\n    }\n  }\n\n  & > div {\n    width: 4%;\n    height: 16%;\n    background: #121212;\n    position: absolute;\n    left: 48%;\n    top: 43%;\n    opacity: 0;\n    border-radius: 50px;\n  }\n"]))),t.bar1=(0,B.css)(S||(S=i(["\n  transform: rotate(0deg) translate(0, -100%);\n  animation: fade 1s linear 0s infinite;\n"],["\n  transform: rotate(0deg) translate(0, -100%);\n  animation: fade 1s linear 0s infinite;\n"]))),t.bar2=(0,B.css)(P||(P=i(["\n  transform: rotate(36deg) translate(0, -100%);\n  animation: fade 1s linear -0.9s infinite;\n"],["\n  transform: rotate(36deg) translate(0, -100%);\n  animation: fade 1s linear -0.9s infinite;\n"]))),t.bar3=(0,B.css)(M||(M=i(["\n  transform: rotate(72deg) translate(0, -100%);\n  animation: fade 1s linear -0.8s infinite;\n"],["\n  transform: rotate(72deg) translate(0, -100%);\n  animation: fade 1s linear -0.8s infinite;\n"]))),t.bar4=(0,B.css)(I||(I=i(["\n  transform: rotate(108deg) translate(0, -100%);\n  animation: fade 1s linear -0.7s infinite;\n"],["\n  transform: rotate(108deg) translate(0, -100%);\n  animation: fade 1s linear -0.7s infinite;\n"]))),t.bar5=(0,B.css)(A||(A=i(["\n  transform: rotate(144deg) translate(0, -100%);\n  animation: fade 1s linear -0.6s infinite;\n"],["\n  transform: rotate(144deg) translate(0, -100%);\n  animation: fade 1s linear -0.6s infinite;\n"]))),t.bar6=(0,B.css)(j||(j=i(["\n  transform: rotate(180deg) translate(0, -100%);\n  animation: fade 1s linear -0.5s infinite;\n"],["\n  transform: rotate(180deg) translate(0, -100%);\n  animation: fade 1s linear -0.5s infinite;\n"]))),t.bar7=(0,B.css)(L||(L=i(["\n  transform: rotate(216deg) translate(0, -100%);\n  animation: fade 1s linear -0.4s infinite;\n"],["\n  transform: rotate(216deg) translate(0, -100%);\n  animation: fade 1s linear -0.4s infinite;\n"]))),t.bar8=(0,B.css)(R||(R=i(["\n  transform: rotate(252deg) translate(0, -100%);\n  animation: fade 1s linear -0.3s infinite;\n"],["\n  transform: rotate(252deg) translate(0, -100%);\n  animation: fade 1s linear -0.3s infinite;\n"]))),t.bar9=(0,B.css)(N||(N=i(["\n  transform: rotate(288deg) translate(0, -100%);\n  animation: fade 1s linear -0.2s infinite;\n"],["\n  transform: rotate(288deg) translate(0, -100%);\n  animation: fade 1s linear -0.2s infinite;\n"]))),t.bar10=(0,B.css)(D||(D=i(["\n  transform: rotate(324deg) translate(0, -100%);\n  animation: fade 1s linear -0.1s infinite;\n"],["\n  transform: rotate(324deg) translate(0, -100%);\n  animation: fade 1s linear -0.1s infinite;\n"])))},xn0n:function(e,t,n){"use strict";var i,r=n("VkAN"),a=n.n(r),o=n("gcR/"),s=n.n(o),l=(n("q1tI"),n("eFc+")),c=n.n(l),u=n("/jA0"),d=n.n(u),p=n("B2Q+"),f=n("InUh"),m=n.n(f),h=m()((function(){return n.e(72).then(n.bind(null,"kMnh"))}),{loadableGenerated:{webpack:function(){return["kMnh"]},modules:["./DealBook"]}}),g=m()((function(){return n.e(101).then(n.bind(null,"VXKL"))}),{loadableGenerated:{webpack:function(){return["VXKL"]},modules:["./Lens"]}}),y=m()((function(){return n.e(119).then(n.bind(null,"cDcs"))}),{loadableGenerated:{webpack:function(){return["cDcs"]},modules:["./Opinion"]}}),v={DealBook:h,Lens:g,Opinion:y,"Opinin":y,"The Upshot":m()((function(){return n.e(143).then(n.bind(null,"W7ou"))}),{loadableGenerated:{webpack:function(){return["W7ou"]},modules:["./Upshot"]}}),"World Cup 2019":m()((function(){return n.e(179).then(n.bind(null,"JxK2"))}),{loadableGenerated:{webpack:function(){return["JxK2"]},modules:["./WorldCup2019"]}})},b=function(e){var t=e.asset,n=e.position,i=Object(p.a)();return s()(d.a,{collections:null==t?void 0:t.collections,logos:v,position:n,section:null==t?void 0:t.section,size:"smartphone"===i?"small":"standard",subsection:null==t?void 0:t.subsection,withLink:!0})};b.displayName="BrandBar",b.defaultProps={asset:void 0,position:void 0},b.fragments={asset:c()(i||(i=a()(["\n    fragment BrandBar_asset on CreativeWork {\n      section {\n        id\n        displayName\n        url\n      }\n      subsection {\n        id\n        displayName\n        url\n      }\n      collections {\n        id\n        slug\n        header\n        url\n      }\n    }\n  "])))};t.a=b},xvFu:function(e,t,n){"use strict";var i,r,a=n("VkAN"),o=n.n(a),s=n("gcR/"),l=n.n(s),c=n("q1tI"),u=n.n(c),d=n("Jqp9"),p=n("eFc+"),f=n.n(p),m=n("wXC7"),h=n.n(m),g=n("j/0i"),y=n.n(g),v=n("5dFD"),b=n("NVP0"),_=n("coEv"),w=n("paWp"),x=n("3sMT"),k=Object(d.themeFn)("treatment",{none:Object(d.css)("float:none;margin-left:0;margin-bottom:5px;",h.a.breakpoint.medium,"{margin-bottom:15px;}"),"custom-features":Object(d.css)()}),O=Object(d.styled)("figure",{target:"e759ksq0"})(k,";position:relative;width:100%;img{width:100%;vertical-align:top;}"),E=Object(d.themeFn)("treatment",{none:Object(d.css)("text-align:right;"),"custom-features":Object(d.css)("text-align:right;",h.a.breakpoint.medium,"{text-align:left;}")}),T=Object(d.styled)("figcaption",{target:"e759ksq1"})(E,";"),C=Object(d.themeFn)("treatment",{none:Object(d.css)("color:",x.color.content.quaternary,";font-family:",h.a.font.franklinBase,";text-transform:uppercase;"),magazine:Object(d.css)("color:",x.color.content.quaternary,";font-family:",h.a.font.magazineSansBase,";margin-bottom:4px;letter-spacing:0.03em;margin-top:8px;"),"custom-features":Object(d.css)("color:",x.color.content.quaternary,";font-family:",h.a.font.franklinBase,";text-transform:uppercase;"),"t-magazine":Object(d.css)("color:",x.color.content.quaternary,";font-family:",h.a.font.franklinBase,";")}),S=Object(d.styled)("span",{target:"e759ksq2"})("font-size:",h.a.font.size(10),";display:inline-block;font-weight:",h.a.font.weight.medium,";line-height:",h.a.font.size(12),";margin-top:2px;",C,";"),P=["videoLarge","mediumThreeByTwo440","mediumThreeByTwo225","hpSmall","thumbLarge"],M=["videoLarge","mediumThreeByTwo440"],I=y.a.withComponent("div",{target:"e1y9711p0"});function A(e){var t=e.asset,n=e.crops,i=e.imgSizes,r=e.imgAspectRatio,a=e.className,o=e.captionClass,s=e.creditClass,c=e.timesTags,p=e.shouldHaveLink,f=null;"Slideshow"===t.__typename?f=w.c:"Video"===t.__typename&&(f=w.d);var m=t.promotionalMedia;m&&"Image"!==m.__typename&&(m=m.promotionalMedia);var g,y=m&&m.crops,x=y?Object(b.i)(m,n||M):null,k=y?Object(b.c)(m,n||P):null,E=r?(g=r,Object(d.css)("aspect-ratio:",g,";")):void 0,C=function(){var e,t;return u.a.createElement(u.a.Fragment,null,l()(I,{timesTags:c},void 0,l()("img",{src:Object(b.a)(null==k?void 0:k.url),srcSet:x,sizes:i||void 0,alt:(null===(e=m)||void 0===e||null===(t=e.caption)||void 0===t?void 0:t.text)||"",className:E})),f&&l()("div",{className:w.a},void 0,l()("i",{className:Object(d.cx)(_.b,f)})))};return l()(O,{className:Object(d.cx)("photo",a),role:"group"},void 0,k&&p&&l()(v.a,{link:t,"data-tracking-index":null,"data-rref":""},void 0,C()),k&&!p&&u.a.createElement(u.a.Fragment,null,C()),l()(T,{className:o},void 0,l()(S,{className:s},void 0,l()("span",{className:h.a.a11y.visuallyHidden},void 0,"Credit"),t.promotionalMedia.credit)))}A.displayName="Image",A.defaultProps={crops:void 0,imgSizes:void 0,imgAspectRatio:void 0,className:void 0,captionClass:void 0,creditClass:void 0,timesTags:[],shouldHaveLink:!0};var j=f()(i||(i=o()(['\n  fragment ImageFragment_data on Image {\n    id\n    caption {\n      text\n    }\n    credit\n    crops(\n      renditionNames: [\n        "videoLarge"\n        "mediumThreeByTwo440"\n        "mediumThreeByTwo225"\n        "threeByTwoMediumAt2X"\n        "hpSmall"\n        "thumbLarge"\n        "thumbStandard"\n        "jumbo"\n      ]\n    ) {\n      renditions {\n        name\n        url\n        width\n        height\n      }\n    }\n    timesTags {\n      vernacular\n    }\n  }\n'])));A.fragments={data:f()(r||(r=o()(["\n    fragment Image_data on HasPromotionalProperties {\n      __typename\n      ... on Published {\n        url\n      }\n      promotionalMedia {\n        __typename\n        ... on Video {\n          id\n          promotionalMedia {\n            ... on Image {\n              id\n              ...ImageFragment_data\n            }\n          }\n        }\n        ... on Audio {\n          id\n          promotionalMedia {\n            ... on Image {\n              id\n              ...ImageFragment_data\n            }\n          }\n        }\n        ... on Slideshow {\n          id\n          promotionalMedia {\n            ... on Image {\n              id\n              ...ImageFragment_data\n            }\n          }\n        }\n        ... on Interactive {\n          id\n          promotionalMedia {\n            ... on Image {\n              id\n              ...ImageFragment_data\n            }\n          }\n        }\n        ... on EmbeddedInteractive {\n          id\n          promotionalMedia {\n            ... on Image {\n              id\n              ...ImageFragment_data\n            }\n          }\n        }\n        ... on Image {\n          id\n          ...ImageFragment_data\n        }\n      }\n    }\n    ","\n  "])),j)};t.a=A},y9tx:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.underlineClass=t.timestampClass=t.placeholderClass=t.menuLinkContainerClass=t.menuLinkClass=t.hoverUnderlineClass=void 0;var r=n("Jqp9"),a=n("3sMT"),o=i(n("wXC7")),s=(0,r.css)("font-family:",o.default.font.franklinBase,";flex-shrink:0;font-size:",o.default.font.size(13),";font-weight:",o.default.font.weight.medium,";",o.default.breakpoint.small,"{font-size:",o.default.font.size(14),";}");t.menuLinkContainerClass=s;var l=(0,r.css)("padding-bottom:1px;border-bottom:1px solid ",a.color.content.primary,";");t.underlineClass=l;var c=(0,r.css)("padding-bottom:1px;",o.default.breakpoint.small,"{:hover{color:",a.color.content.tertiary,";border-bottom:1px solid ",a.color.content.tertiary,";}}");t.hoverUnderlineClass=c;var u=(0,r.css)("text-decoration:none;color:",a.color.content.primary,";");t.menuLinkClass=u;var d=(0,r.css)("width:auto;min-width:40px;position:relative;margin-left:4px;display:inline-block;");t.placeholderClass=d;var p=(0,r.css)("color:",a.color.signal.breaking,";font-size:",o.default.font.size(11),";font-family:",o.default.font.franklinBase,";span[data-time='rel']{position:relative;}span[data-time='abs']{display:none;}");t.timestampClass=p},yEZI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("Mzrn").Paragraph;t.default=i},yFJX:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.boldClass=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=(0,r.css)("font-weight:",a.default.font.weight.bold,";");t.boldClass=o;var s=(0,r.styled)("strong",{target:"ebyp5n10"})(o,";");t.default=s},yQsP:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0});var r={};t.default=d;var a=i(n("lSNA")),o=i(n("q1tI")),s=n("Jqp9"),l=i(n("YgNI")),c=n("rJzx"),u=n("voDd");function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{logoPosition:"left"},t=e.logoPosition,n=e.className,i=e.audioDeepLink,r=(0,u.addReferringSource)(i||"https://www.nytimes.com/audio/app");return o.default.createElement("div",{className:(0,s.cx)((0,a.default)({},c.hasAudioDeepLinkClass,!!i))},o.default.createElement("a",{href:r},o.default.createElement("div",{className:(0,s.cx)(c.audioPromoWrapperClass,n,(0,a.default)({},c.logoOnRightClass,"right"===t))},o.default.createElement(l.default,{className:c.logoClass}),!i&&o.default.createElement("p",{className:c.audioTextClass},"For more audio journalism and storytelling,"," ",o.default.createElement("span",{className:c.linkClass},"download New York Times Audio"),", a new iOS app available for news subscribers."),!!i&&o.default.createElement("p",{className:c.audioTextClass},o.default.createElement("span",{className:c.linkClass},"Open this article")," in the New York Times Audio app on iOS."))))}Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(r,e)||e in t&&t[e]===u[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}}))})),d.displayName="AudioAppPromo"},ybjx:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.moreAboutClass=t.bioTreatmentStyles=t.authorNameClass=t.Bio=void 0;var r=n("3sMT"),a=n("Jqp9"),o=i(n("WThh")),s=i(n("wXC7")),l=(0,o.default)(["medium"]),c=(0,a.themeFn)("treatment",{none:function(e){return(0,a.css)("color:",r.color.content.secondary,";font-family:",s.default.font.franklinBase,";font-weight:",s.default.font.weight.medium,";",l(e,{fontSize:[15,16],lineHeight:[20,22]}),";")},magazine:function(e){return(0,a.css)("color:",r.color.content.secondary,";font-family:",s.default.font.magazineSansBase,";font-weight:",s.default.font.weight.medium,";",l(e,{fontSize:[15,16],lineHeight:[20,22]}),";")}});t.bioTreatmentStyles=c;var u=(0,a.css)("font-weight:",s.default.font.weight.medium,";a.authorPageLinkClass.overrideLinkStyles{text-decoration:underline;color:",r.color.content.primary,";text-decoration-thickness:1px;text-underline-offset:2px;}a.authorPageLinkClass.overrideLinkStyles:hover,a.authorPageLinkClass.overrideLinkStyles:focus{text-decoration:none;color:",r.color.content.primary,";}");t.moreAboutClass=u;var d=(0,a.css)("a.authorPageLinkClass.overrideLinkStyles,a.authorPageLinkClass.overrideLinkStyles:visited,a.authorPageLinkClass.overrideLinkStyles:hover a.authorPageLinkClass.overrideLinkStyles:focus{font-weight:",s.default.font.weight.bold,";color:",r.color.content.primary,";}a.authorPageLinkClass.overrideLinkStyles:hover a.authorPageLinkClass.overrideLinkStyles:focus{text-decoration:none;}");t.authorNameClass=d;var p=(0,a.styled)("div",{target:"eqi4ubu0"})(c,";color:",r.color.content.secondary,";margin-top:0.75rem;p{margin-bottom:",s.default.font.size(12),";}a,a:visited{color:",r.color.content.primary,";text-decoration:underline;}a:hover,a:focus{color:",r.color.content.primary,";text-decoration:none;}",s.default.print,";");t.Bio=p},ygvk:function(e,t,n){"use strict";t.a={CLEAR_ARTICLE:"CLEAR_ARTICLE",OPEN_COMMENT_ENTRY:"OPEN_COMMENT_ENTRY",CLOSE_COMMENT_ENTRY:"CLOSE_COMMENT_ENTRY",SELECT_VIEW:"SELECT_VIEW",GET_ARTICLE_REQUEST:"GET_ARTICLE_REQUEST",GET_ARTICLE_RESPONSE:"GET_ARTICLE_RESPONSE",GET_COMMENT_LIST_REQUEST:"GET_COMMENT_LIST_REQUEST",GET_COMMENT_LIST_RESPONSE:"GET_COMMENT_LIST_RESPONSE",GET_COMMENTS_REQUEST:"GET_COMMENTS_REQUEST",GET_COMMENTS_RESPONSE:"GET_COMMENTS_RESPONSE",GET_REPLIES_REQUEST:"GET_REPLIES_REQUEST",GET_REPLIES_RESPONSE:"GET_REPLIES_RESPONSE",GET_SUMMARY_REQUEST:"GET_SUMMARY_REQUEST",GET_SUMMARY_RESPONSE:"GET_SUMMARY_RESPONSE",GET_PROFILE_REQUEST:"GET_PROFILE_REQUEST",GET_PROFILE_RESPONSE:"GET_PROFILE_RESPONSE",UPDATE_PROFILE_REQUEST:"UPDATE_PROFILE_REQUEST",UPDATE_PROFILE_RESPONSE:"UPDATE_PROFILE_RESPONSE",UPDATE_AVATAR_REQUEST:"UPDATE_AVATAR_REQUEST",UPDATE_AVATAR_RESPONSE:"UPDATE_AVATAR_RESPONSE",CREATE_COMMENT_REQUEST:"CREATE_COMMENT_REQUEST",CREATE_COMMENT_RESPONSE:"CREATE_COMMENT_RESPONSE",RECOMMEND_COMMENT_REQUEST:"RECOMMEND_COMMENT_REQUEST",RECOMMEND_COMMENT_RESPONSE:"RECOMMEND_COMMENT_RESPONSE",UNRECOMMEND_COMMENT_REQUEST:"UNRECOMMEND_COMMENT_REQUEST",UNRECOMMEND_COMMENT_RESPONSE:"UNRECOMMEND_COMMENT_RESPONSE",FLAG_COMMENT_REQUEST:"FLAG_COMMENT_REQUEST",FLAG_COMMENT_RESPONSE:"FLAG_COMMENT_RESPONSE",GET_SHORT_URL_REQUEST:"GET_SHORT_URL_REQUEST",GET_SHORT_URL_RESPONSE:"GET_SHORT_URL_RESPONSE"}},yxLZ:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("Ybk9")).default;t.default=r},z0L9:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("J4zp")),a=n("q1tI"),o=i(n("AWLv")),s="STYLN_reading_time",l="1_reading_time",c=function(e){var t,n,i=e.abra,c=e.reportExposure,u=(0,o.default)({}),d=(0,r.default)(u,2),p=d[0],f=d[1],m=(0,a.useRef)(!1),h=null==i||null===(t=i.STYLN_reading_time)||void 0===t?void 0:t.allocated,g=(null==i||null===(n=i.STYLN_reading_time)||void 0===n?void 0:n.variant)===l;return(0,a.useEffect)((function(){h&&f.isIntersecting&&!m.current&&(c(s),m.current=!0)}),[h,f,c]),[p,g]};t.default=c},z5jG:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.OnsiteByline=void 0;var r=i(n("q1tI")),a=i(n("HMjI")),o=i(n("95Yr")),s=(n("EVBM"),function(e){var t=e.bylineData;return t?r.default.createElement(a.default,{headshots:t.headshots,Headshot:o.default,data:t}):null});t.OnsiteByline=s,s.displayName="OnsiteByline",s.defaultProps={bylineData:null};var l=s;t.default=l},z8TD:function(e,t,n){"use strict";var i=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("q1tI")),o=(i(n("17x9")),n("Jqp9")),s=i(n("OB6K")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=c(t);if(n&&n.has(e))return n.get(e);var i={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=a?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(i,o,s):i[o]=e[o]}i.default=e,n&&n.set(e,i);return i}(n("L1jB"));function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(c=function(e){return e?n:t})(e)}var u=function(e){var t,n=(0,o.useTheme)(),i=e.label,r=e.byline,c=e.headline,u=e.summary,d=e.media,p=e.children,f=e.timestamp,m=e.shareTools,h=e.translationLinks,g=e.newsStatus,y=e.timesExclusive,v=e.sponsoredByAd,b=e.brandBar,_=e.className;if(n.opinionHeaderRedesign){var w,x=a.default.createElement(a.default.Fragment,null,d,r,f,m),k=a.default.createElement(a.default.Fragment,null,"opinion"!==(null==n?void 0:n.section)&&m,"opinion"===(null==n?void 0:n.section)&&f,d,"opinion"===(null==n?void 0:n.section)&&m,r,"opinion"!==(null==n?void 0:n.section)&&f);return a.default.createElement(s.default,{theme:{summary:u,media:d}},a.default.createElement(l.default,{className:_},b,v,("DEFAULT"!==(null==g||null===(w=g.props)||void 0===w?void 0:w.newsStatus)||i||y)&&a.default.createElement(l.LabelContainer,null,y,g,i),c,u,n.isShortForm?x:k,h,p))}return a.default.createElement(s.default,{theme:{summary:u,media:d}},a.default.createElement(l.default,{className:_},b,v,("DEFAULT"!==(null==g||null===(t=g.props)||void 0===t?void 0:t.newsStatus)||i||y)&&a.default.createElement(l.LabelContainer,null,y,g,i),c,u,"opinion"===(null==n?void 0:n.section)&&a.default.createElement(a.default.Fragment,null,r,f,h),m,d,"opinion"!==(null==n?void 0:n.section)&&a.default.createElement(a.default.Fragment,null,r,f,h),p))};u.displayName="HeaderBasic",u.defaultProps={byline:null,children:null,label:null,media:null,summary:null,timestamp:null,shareTools:null,translationLinks:null,newsStatus:null,timesExclusive:null,sponsoredByAd:null,brandBar:null,className:void 0};var d=u;t.default=d},zC1O:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("q1tI")),a=i(n("YCta")),o=function(){var e=(0,a.default)();return r.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 40 36",id:"el_0kpS9qL_S"},r.default.createElement("title",null,"bars"),r.default.createElement("g",{id:"el_oZ84Hna1GC_65hRV2Qwn",className:e.fourthBarParentCollapsedClass,"data-animator-group":"true","data-animator-type":"0"},r.default.createElement("g",{id:"el_oZ84Hna1GC_ILVvi2tqx",className:e.fourthBarCollapsedClass,"ata-animator-group":"true","data-animator-type":"2"},r.default.createElement("g",{id:"el_oZ84Hna1GC"},r.default.createElement("rect",{x:"34",width:"6",height:"36",id:"el_qw_T_tngXw"})))),r.default.createElement("g",{id:"el_mYVjkduhMU_p_9Pm85Ac",className:e.thirdBarParentCollapsedClass,"data-animator-group":"true","data-animator-type":"0"},r.default.createElement("g",{id:"el_mYVjkduhMU_WxG3R40yd",className:e.thirdBarCollapsedClass,"data-animator-group":"true","data-animator-type":"2"},r.default.createElement("g",{id:"el_mYVjkduhMU"},r.default.createElement("rect",{x:"22.67",width:"6",height:"36",id:"el_lf9GrROk6j"})))),r.default.createElement("g",{id:"el_o-EuxhgoAw_kYNRGDfcw",className:e.secondBarParentCollapsedClass,"data-animator-group":"true","data-animator-type":"0"},r.default.createElement("g",{id:"el_o-EuxhgoAw_3c3bzSjOJ",className:e.secondBarCollapsedClass,"ata-animator-group":"true","data-animator-type":"2"},r.default.createElement("g",{id:"el_o-EuxhgoAw"},r.default.createElement("rect",{x:"11.33",width:"6",height:"36",id:"el_-iueO8klO0"})))),r.default.createElement("g",{id:"el_F7mSMPhqpC_y_fKcpSxn",className:e.firstBarParentCollapsedClass,"data-animator-group":"true","data-animator-type":"0"},r.default.createElement("g",{id:"el_F7mSMPhqpC_R6bNB6_Ys",className:e.firstBarCollapsedClass,"ata-animator-group":"true","data-animator-type":"2"},r.default.createElement("g",{id:"el_F7mSMPhqpC"},r.default.createElement("rect",{width:"6",height:"36",id:"el_dS5TKNZZ5w"})))))};o.displayName="PlaylistIconCollapsed";var s=o;t.default=s},zIxd:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i,r,a,o,s,l=n("gcR/"),c=n.n(l),u=(n("q1tI"),n("/KYJ")),d=n("huET"),p=n("zsRM"),f=function(e,t){e.trackInteraction(t,{name:Object(p.e)(t.currentTarget),label:t.currentTarget.textContent,url:t.currentTarget.href})},m=function(e,t){e.trackInteraction(t,{name:"goto-subscribe",label:t.currentTarget.textContent,url:t.currentTarget.href})},h=n("Jqp9"),g=n("wXC7"),y=n.n(g),v=n("u1H9"),b=Object(h.css)("height:170px;"),_=Object(h.css)("@keyframes fadeIn{0%{opacity:0;}50%{opacity:0;}100%{opacity:1;}}animation:fadeIn 2s ease;overflow:hidden;"),w=Object(h.css)("display:grid;grid-row-gap:24px;justify-items:center;margin-left:20px;margin-right:20px;padding:32px 0 40px 0;"),x=Object(h.css)("display:grid;grid-row-gap:8px;text-align:center;"),k=Object(h.css)("color:",y.a.color.gray10,";text-decoration:underline;"),O=Object(v.b)({clientId:"vi",extraParams:{asset:"opttrunc"}}),E=Object(v.d)({campaignId:"89WYR"}),T=function(e){var t=e.tracker,n="undefined"==typeof window;return c()("div",{className:b},void 0,i||(i=c()("noscript",{},void 0,c()("div",{className:w,"data-testid":"optimistic-truncator-noscript"},void 0,c()(u.AlertIcon,{"aria-hidden":!0,size:24}),c()("div",{"data-testid":"optimistic-truncator-noscript-message",className:x},void 0,c()(u.Text,{as:"p",size:16,color:"secondaryDim"},void 0,"We are having trouble retrieving the article content."),c()(u.Text,{as:"p",size:16,color:"secondaryDim"},void 0,"Please enable JavaScript in your browser settings."))))),c()("div",{className:y.a.a11y.visuallyHidden,id:"optimistic-truncator-a11y",tabIndex:-1},void 0,r||(r=c()("hr",{})),c()("p",{},void 0,"Thank you for your patience while we verify access. If you are in Reader mode please exit and",c()("a",{href:O,onClick:function(e){return f(t,e)}},void 0,"log into"),"your Times account, or",c()("a",{href:E,onClick:function(e){return m(t,e)}},void 0,"subscribe"),"for all of The Times."),a||(a=c()("hr",{}))),c()("div",{className:Object(h.cx)(_,w)},void 0,o||(o=c()(u.Spinner,{"data-testid":"optimistic-truncator-spinner",size:24,"aria-hidden":"true"})),c()("div",{"data-testid":"optimistic-truncator-message",className:x},void 0,s||(s=c()(u.Text,{as:"p",size:16,color:"secondaryDim"},void 0,"Thank you for your patience while we verify access.")),c()(u.Text,{as:"p",size:16,color:"secondaryDim"},void 0,"Already a subscriber?",n?"Log in":c()("a",{"data-testid":"log-in-link",className:k,href:O,onClick:function(e){return f(t,e)}},void 0,"Log in"),"."),c()(u.Text,{as:"p",size:16,color:"secondaryDim"},void 0,"Want all of The Times?",n?"Subscribe":c()("a",{"data-testid":"subscribe-link",className:k,href:E,onClick:function(e){return m(t,e)}},void 0,"Subscribe"),"."))))};T.displayName="Content";var C=function(e,t){return t?e?"fallback":t.dropzone.toString():""},S=function(e){var t=e.dropzoneCount,n=e.fallbackTruncation,i=e.truncated,r={name:"optimisticTruncator",context:t?"".concat(t):"",label:C(n,i)};return c()(u.Root,{darkMode:!1},void 0,c()(d.a,{messageId:"optimistic",Content:T,showAds:!1,tracking:r}))};S.displayName="Optimistic"},zMFK:function(e,t,n){"use strict";var i=this&&this.__makeTemplateObject||function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e};Object.defineProperty(t,"__esModule",{value:!0}),t.link=t.cookiesButtonClass=t.gdprButtonsContainerClass=t.descriptionClass=t.contentContainerClass=t.closeButtonIconClass=t.closeButtonClass=t.titleClass=t.titleContainerClass=t.containerClass=void 0;var r,a,o,s,l,c,u,d,p,f,m=n("Jqp9"),h=n("lVLo");t.containerClass=(0,m.css)(r||(r=i(["\n  font-family: ",";\n  margin-top: 48px;\n  max-width: 700px;\n\n  @media (max-width: 481px) {\n    margin: 32px 5% 32px 5%;\n  }\n"],["\n  font-family: ",";\n  margin-top: 48px;\n  max-width: 700px;\n\n  @media (max-width: 481px) {\n    margin: 32px 5% 32px 5%;\n  }\n"])),h.fonts.franklin),t.titleContainerClass=(0,m.css)(a||(a=i(["\n  display: flex;\n  justify-content: space-between;\n"],["\n  display: flex;\n  justify-content: space-between;\n"]))),t.titleClass=(0,m.css)(o||(o=i(["\n  color: ",";\n  font-size: 22px;\n  font-weight: 700;\n  line-height: 28px;\n\n  @media (max-width: 481px) {\n    font-size: 18px;\n  }\n"],["\n  color: ",";\n  font-size: 22px;\n  font-weight: 700;\n  line-height: 28px;\n\n  @media (max-width: 481px) {\n    font-size: 18px;\n  }\n"])),h.colors.black),t.closeButtonClass=(0,m.css)(s||(s=i(["\n  background-color: transparent;\n  border-width: 0;\n  cursor: pointer;\n  padding-right: 0px;\n"],["\n  background-color: transparent;\n  border-width: 0;\n  cursor: pointer;\n  padding-right: 0px;\n"]))),t.closeButtonIconClass=(0,m.css)(l||(l=i(["\n  width: 20px;\n  height: 20px;\n\n  path {\n    fill: #121212;\n  }\n\n  @media (max-width: 481px) {\n    width: 16px;\n    height: 16px;\n  }\n"],["\n  width: 20px;\n  height: 20px;\n\n  path {\n    fill: #121212;\n  }\n\n  @media (max-width: 481px) {\n    width: 16px;\n    height: 16px;\n  }\n"]))),t.contentContainerClass=(0,m.css)(c||(c=i(["\n  display: flex;\n  margin-top: 32px;\n\n  @media (max-width: 481px) {\n    flex-direction: column;\n    margin-top: 16px;\n  }\n"],["\n  display: flex;\n  margin-top: 32px;\n\n  @media (max-width: 481px) {\n    flex-direction: column;\n    margin-top: 16px;\n  }\n"]))),t.descriptionClass=(0,m.css)(u||(u=i(["\n  color: ",";\n  font-size: 16px;\n  font-weight 500;\n  line-height: 24px;\n  margin-right: 50px;\n  margin-top: 0px;\n\n  @media (max-width: 481px) {\n    font-size: 14px;\n    margin-right: 0px;\n    text-overflow: ellipses;\n  }\n"],["\n  color: ",";\n  font-size: 16px;\n  font-weight 500;\n  line-height: 24px;\n  margin-right: 50px;\n  margin-top: 0px;\n\n  @media (max-width: 481px) {\n    font-size: 14px;\n    margin-right: 0px;\n    text-overflow: ellipses;\n  }\n"])),h.colors.gray30),t.gdprButtonsContainerClass=(0,m.css)(d||(d=i(["\n  display: flex;\n  flex-direction: column;\n  margin-top: 0px;\n\n  @media (max-width: 481px) {\n    margin-left: 0px;\n    margin-top: 26px;\n  }\n"],["\n  display: flex;\n  flex-direction: column;\n  margin-top: 0px;\n\n  @media (max-width: 481px) {\n    margin-left: 0px;\n    margin-top: 26px;\n  }\n"]))),t.cookiesButtonClass=(0,m.css)(p||(p=i(["\n  background-color: ",";\n  border: 1px "," solid;\n  border-radius: 3px;\n  color: ",";\n  cursor: pointer;\n  display: block;\n  font-family: ",";\n  font-size: 16px;\n  font-weight: 600;\n  letter-spacing: 0.2px;\n  line-height: 24px;\n  margin-bottom: 12px;\n  padding: 10px 16px 10px 16px;\n  text-align: center;\n  text-decoration: none;\n  width: 244px;\n\n  @media (max-width: 481px) {\n    width: auto;\n    margin-bottom: 8px;\n  }\n"],["\n  background-color: ",";\n  border: 1px "," solid;\n  border-radius: 3px;\n  color: ",";\n  cursor: pointer;\n  display: block;\n  font-family: ",";\n  font-size: 16px;\n  font-weight: 600;\n  letter-spacing: 0.2px;\n  line-height: 24px;\n  margin-bottom: 12px;\n  padding: 10px 16px 10px 16px;\n  text-align: center;\n  text-decoration: none;\n  width: 244px;\n\n  @media (max-width: 481px) {\n    width: auto;\n    margin-bottom: 8px;\n  }\n"])),h.colors.white,h.colors.veryDarkGrey,h.colors.veryDarkGrey,h.fonts.franklin),t.link=(0,m.css)(f||(f=i(["\n  color: ",";\n  text-decoration: none;\n  border-bottom: 0.5px solid;\n"],["\n  color: ",";\n  text-decoration: none;\n  border-bottom: 0.5px solid;\n"])),h.colors.footerLinkLightBlue)},zS3r:function(e,t,n){"use strict";var i=n("pVnL"),r=n.n(i),a=n("gcR/"),o=n.n(a),s=n("q1tI"),l=n.n(s),c=n("Jqp9"),u=n("f81r"),d=n("rI8Z"),p=n("wXC7"),f=n.n(p),m=n("3sMT"),h="@media (max-width: ".concat(f.a.breakpoint.maxMobileContentWidth,"px)"),g=(f.a.color.gray30,f.a.font.franklinBase,f.a.font.size(12),f.a.font.weight.medium,f.a.font.size(16),f.a.color.gray50,f.a.color.gray30,f.a.color.gray30,f.a.color.white,f.a.color.white,f.a.color.gray50,Object(c.css)("font-size:",f.a.font.size(12),";line-height:",f.a.font.size(12),";margin-top:auto;")),y=Object(c.css)("background-color:",f.a.color.blue30,";border:1px solid ",f.a.color.blue20,";border-radius:3px;color:white;display:block;font-family:",f.a.font.franklinBase,";font-size:",f.a.font.size(13),";font-weight:",f.a.font.weight.mediumBold,";letter-spacing:0.05em;line-height:1.5rem;margin-left:auto;margin-right:auto;padding:5px 0;text-transform:uppercase;transition:background-color 0.6s ease;width:100%;&:active,&:focus,&:hover{background-color:",f.a.color.blue20,";}",f.a.printHide,";"),v=Object(c.css)("border-radius:30px;padding:6px;padding:8px 10px 7px;display:inline-block;",h,"{padding:8px 7px 7px;}svg path{fill:",m.color.content.primary,";}"),b=Object(c.css)("vertical-align:middle;margin-top:-1px;margin-right:5px;overflow:visible;"),_=Object(c.css)("line-height:0;"),w=Object(c.css)("align-self:center;vertical-align:initial;border-radius:30px;background-color:transparent;border:none;bottom:0.05rem;cursor:pointer;display:inline-flex;flex-direction:column;font-family:",f.a.font.franklinBase,";font-size:",f.a.font.size(12),";font-weight:",f.a.font.weight.medium,";height:auto;width:auto;line-height:",f.a.font.size(16),";overflow:visible;position:relative;text-transform:uppercase;&:hover,&:focus{text-decoration:none;border-color:",f.a.color.gray50,";}"),x=function(e){var t=e.onClick,n=e.label,i=e.position,r=e.content,a=e.buttonClass;return o()("button",{type:"button",className:Object(c.cx)(y,a),onClick:t,"aria-label":Object(d.a)(n),"data-testid":"comments-speech-bubble".concat(i?"-".concat(i):""),id:"comments-speech-bubble".concat(i?"-".concat(i):"")},void 0,r)};x.displayName="BlockButton",x.defaultProps={label:"",position:"",content:null,buttonClass:void 0};var k=x,O=n("J4zp"),E=n.n(O),T=function(e){var t=e.onClick,n=e.label,i=e.position,r=e.content,a=e.buttonClass,l=Object(s.useState)(!1),u=E()(l,2),p=u[0],f=u[1];return o()("button",{type:"button",className:Object(c.cx)(w,a),onClick:function(){p||(f(!0),t())},onFocus:function(){p&&f(!1)},"aria-label":Object(d.a)(n),"aria-haspopup":"dialog","aria-expanded":p,"aria-controls":"comments-panel","data-testid":"comments-speech-bubble".concat(i?"-".concat(i):""),id:"comments-speech-bubble".concat(i?"-".concat(i):"")},void 0,r)};T.displayName="SpeechBubbleButton",T.defaultProps={label:"",position:"",content:null,buttonClass:void 0};var C,S=T,P=n("8LP6"),M="comment",I="comments",A="There are no comments",j=function(e){var t,n=e.children,i=e.onClick,a=e.viewCommentsInNewWindow,s=e.commentCount,p=e.position,f=e.url,m=e.buttonClass,h="bigBottom"===p;t=0===s?u.a.addAComment:"Read ".concat(n&&n,1===s?" Comment":" Comments");var y=o()("div",{className:v},void 0,o()("svg",{"aria-hidden":"true",width:"21",height:"18",viewBox:"0 0 21 18",className:b},void 0,C||(C=o()("path",{d:"m14.52 17.831-5.715-4.545H2.4a1.468 1.468 0 0 1-1.468-1.469V1.894A1.471 1.471 0 0 1 2.4.405h16.583a1.469 1.469 0 0 1 1.469 1.469v9.923a1.469 1.469 0 0 1-1.47 1.47H14.58l-.06 4.564ZM2.4 1.645a.228.228 0 0 0-.228.229v9.923a.228.228 0 0 0 .228.229h6.811l4.06 3.235v-3.235h5.652a.228.228 0 0 0 .229-.229V1.874a.228.228 0 0 0-.229-.229H2.4Z",fill:"#121212",fillRule:"nonzero"}))),o()("span",{className:g},void 0,n&&Object(P.a)(n))),x=A;if(s>0&&(x="Read ".concat(s," ").concat(1===s?M:I)),a&&f)return o()("a",{href:"".concat(f,"#commentsContainer"),target:"_blank",rel:"noreferrer","aria-label":Object(d.a)(x),className:Object(c.cx)({commentStyleClass:0===s},w,_,m)},void 0,y);if(!i)return o()("span",{className:Object(c.cx)({commentStyleClass:0===s},w,m)},void 0,y);var O={onClick:i,label:x,position:p,content:y,buttonClass:m};return h?l.a.createElement(k,r()({},O,{content:t})):l.a.createElement(S,O)};j.displayName="OpenCommentsButton",j.defaultProps={children:null,onClick:null,commentCount:null,position:"",viewCommentsInNewWindow:!1,url:void 0,buttonClass:void 0};t.a=j},zWrI:function(e,t,n){"use strict";t.a={COMMENTS_PANEL:"commentsContainer",PERM_ID:"permid"}},ziu7:function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"d",(function(){return o})),n.d(t,"e",(function(){return s}));var i=function(e,t){var n=t||e;return"t-magazine"===e&&(n=e),"media"===n?"":n},r=function(e){return e&&e[0].ledeMedia?e[0].ledeMedia:""},a=function(e,t){return t&&e&&e.media&&e.media[t]||""},o=function(e){if(!e)return null;var t=e.__typename||e.name;return"InteractiveBlock"===t||"UnstructuredBlock"===t&&(e.dataType&&"ExperimentalBlock_Scrolly"===e.dataType||e.data&&e.data.dataType&&"ExperimentalBlock_Scrolly"===e.data.dataType)},s=function(e){var t;if(null==e||null===(t=e.capsuleContent)||void 0===t||!t.slug)return!1;var n=e.capsuleContent.slug;return!!["NL_SEG_","SO_NL_NATIVE_AD"].filter((function(e){return n.toUpperCase().startsWith(e)})).length}},zkhZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("RRh/").MediaWithWriteThrough;t.default=i},zl8J:function(e,t,n){"use strict";n.r(t);var i,r=n("VkAN"),a=n.n(r),o=n("gcR/"),s=n.n(o),l=n("lSNA"),c=n.n(l),u=n("J4zp"),d=n.n(u),p=n("q1tI"),f=n("eFc+"),m=n.n(f),h=n("9/5/"),g=n.n(h),y=n("wXC7"),v=n.n(y),b=n("E8oU"),_=n.n(b),w=n("YWmT"),x=n("xHA4"),k=n("pCca"),O=n("2XMp"),E=n("HTd6");function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e){var t=e.storyline,n=e.parentUri,i=e.parentUrl,r=e.pageType,a=e.testName,o=e.ruleName,l=e.region,c=e.isOpinion,u=Object(p.useMemo)((function(){return Object(x.getExperimentalAssetDataFromStoryline)({storyline:t,block:x.STORYLINE_BLOCKS.context})}),[t]),f=Object(p.useMemo)((function(){return function(e,t){var n,i=(null==e||null===(n=e.items)||void 0===n?void 0:n.length)>2,r=t?"opinion":"levelup";return{BLOCK_NAME:"storyline_".concat(r,"_").concat(i?"swipe_":"","recirc"),BLOCK_COMPONENT_NAME:"".concat(r).concat(i?"_swipe":"")}}(u,c)}),[u,c]),m=f.BLOCK_NAME,h=f.BLOCK_COMPONENT_NAME,y={region:l,block:m,name:o,variant:"show",pgtype:r},b=Object(k.a)().maxWidthMatches,E=Object(p.useState)(b(v.a.breakpoint.width.small)),T=d()(E,2),S=T[0],P=T[1];Object(p.useEffect)((function(){var e=g()((function(){P(b(v.a.breakpoint.width.small))}),250);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[b]);var M=Object(p.useMemo)((function(){return C(C({},t),{},{experimentalJsonBlob:Object(O.a)({region:l,block:m,name:o,variant:"show",pgtype:r,html:t.experimentalJsonBlob})})}),[t,l,o,r,m]);return s()(w.a,{componentName:h,region:l,parentUri:n,testName:a,ruleName:o,pageType:r},void 0,(function(e){var t=e.trackImpression,n=e.trackInteraction;return s()(_.a,{parentUrl:i,storyline:M,trackEvent:t,trackLinkInteractionV2:n,internalLinkTrackingParams:y,isPeeking:S},t)}))}S.displayName="ContextBlock",S.defaultProps={testName:null},S.fragments={storyline:m()(i||(i=a()(["\n    fragment ContextBlock_storyline on CreativeWork {\n      ... on Published {\n        uri\n        url\n      }\n      storylines {\n        ruleName\n        testName\n        storyline {\n          experimentalJsonBlob\n          context {\n            displayName\n            items {\n              subtitle\n              text {\n                content {\n                  ...TextInline_content\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    ","\n  "])),E.a.fragments.content)},t.default=S},zrfs:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e,t){if("function"==typeof requirejs)requirejs([e],(function(e){return t(e)}));else{var n=document.getElementsByTagName("head")[0],i=document.createElement("script");i.loaded=!1,i.async=1;var r=function(){i.readyState&&!/^c|loade/.test(i.readyState)||i.loaded||(i.loaded=!0,i.onerror=null,i.onreadystatechange=null,i.onload=null,t())};i.onload=r,i.onerror=r,i.src=e,n.insertBefore(i,n.lastChild)}};t.default=i},zsRM:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"f",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"h",(function(){return g})),n.d(t,"g",(function(){return y}));var i={dropzone:2},r="truncator",a=/log in/i,o=/(register)|(create .*account)/i,s=/update .*payment/i,l=/(nytimes\.com\/get-started)|(nytimes\.com\/subscription)/,c=/((click|follow) (here|this link))/i,u=/grace/i,d=/(continue reading)|(dismiss)|(show .*article)/i,p={test:"AMS_FrictionCircumventionDesktop_cwv",control:"0_control",variant1:"1_high-mid-truncation",variant2:"2_low-mid-truncation"},f={test:"AMS_FrictionCircumventionMobile_cwv",control:"0_control",variant1:"1_high-mid-truncation",variant2:"2_low-mid-truncation"},m=function(e){var t,n;return(null===(t=e[p.test])||void 0===t?void 0:t.variant)===p.variant1||(null===(n=e[f.test])||void 0===n?void 0:n.variant)===f.variant1?{dropzone:4}:{dropzone:6}},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.textContent,i=void 0===n?"":n,r=e.href,p=void 0===r?"":r;return a.test(i)?"goto-login":o.test(i)?"goto-register":s.test(i)||c.test(i)&&u.test(t)?"goto-manage-billing":d.test(i)?"do-continue-reading":l.test(p)?"goto-subscribe":""},g=function(e){var t=e.shouldTruncate,n=e.minimumTruncation,i=e.elementCounter,r=e.dropzoneCounter,a=e.allowShortTruncate;if(!(void 0!==a&&a)&&i<=3)return!1;if(t){if(t.dropzone&&r>=t.dropzone)return!0;if(i>n)return!0}return!1},y=function(e,t,n){return!!e||t<n}},zt4Q:function(e,t,n){"use strict";var i=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.mapWrapperClass=t.mapClass=void 0;var r=n("Jqp9"),a=i(n("wXC7")),o=(0,r.css)("max-width:",a.default.breakpoint.textBodyWidth,"px;margin-bottom:1.5rem;@media print{display:none;}");t.mapWrapperClass=o;var s=(0,r.css)("width:100%;height:200px;padding-bottom:",100/3,"%;",a.default.breakpoint.medium,"{height:90px;}");t.mapClass=s}}]);
//# sourceMappingURL=story-e049005649e09e52a55a.js.map