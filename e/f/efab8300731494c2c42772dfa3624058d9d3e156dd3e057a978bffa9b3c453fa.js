"use strict";(self.webpackChunkWPS_Drive=self.webpackChunkWPS_Drive||[]).push([[2398],{32398:function(e,t,r){r.r(t),r.d(t,{default:);var n=r(15861),o=r(4942),i=r(44925),a=r(87757),s=r.n(a),c=r(23358),u=r(68688),l=r(7685),p=r(78684),d=r(81045),f=r(89602),v=r(85956),m=r(3892),_=r(76043),h=["file"];r y=[],b=function(e){var t=e.file,r=(0,i.Z)(e,h);try{(0,_.E)(w({fileid:t.id,groupid:t.groupid,action:"newfile_import",filetype:t.ftype,fname:t.name,filesize:(t.size/1024).toFixed(2)},r))}catch(e){}},$={name:"MultiAccountUploadBtn",mixins:[p.Z],mounted:methods:{getI18nText:d.GH,showDialog:function(){var e=this;return(0,n.Z)(s().mark((function t(){var r,n,o,i,a,p,m,h,g,$,x;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$ua.wpsDocumentEmbed){t.next=3;break}return(0,v.Xk)("importFromOtherAccount",{parentFileId:Number(e.$route.params&&e.$route.params.fid)||0,parentGroupId:Number(e.$route.params&&e.$route.params.tid||e.$store.state.company.entspaceid)||0}),t.abrupt("return");case 3:return t.prev=3,p=function(t,r){var n,o;r.fail||y.forEach((),y=[];var i="";switch(t){case"copy":i=(0,d.GH)("yun_views_Index35");break;case"move":i=(0,d.GH)("yun_views_Index30");break;case"save":i=(0,d.GH)("yun_views_Index38")}null===(n=a)||void 0===n||null===(o=n.close)||void 0===o||o.call(n);var s,c,u=(r||{}).fail;void 0!==u&&u||(null===(s=(c=e.$message).success)||void 0===s||s.call(c,i));e.$store.dispatch(f.V9B)},t.next=7,(0,c.J8)({excludeIds:[e.$store.state.user.id],companyId:e.$store.state.user.companyid||0,userId:e.$store.state.user.id||0,groupId:(null==e||null===(r=e.$route)||void 0===r||null===(n=r.params)||void 0===n?void 0:n.tid)||e.$store.state.company.entspaceid||e.$store.state.team.current.id||0,parentId:(null==e||null===(o=e.$route)||void 0===o||null===(i=o.params)||void 0===i?void 0:i.fid)||0,source:"kdocs",afterCopy:function(e){p("copy",e)},afterMove:function(e){p("move",e)},afterSave:inProgress:function(t,r){y=r.files,a=(0,l.Ve)({type:t,context:{message:e.$message},duration:0})},handleImportFail:function(t){var r,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,a=i.hasThirdErrs;if(!o.length)return(0,_.E)({action:"newfile_import_fail",error:"第三方错误"}),void(a&&(null===(r=(n=e.$message).error)||void 0===r||r.call(n,(0,d.GH)("yun_views_operate_fail"))));if(o.forEach((function(e){b({action:"newfile_import_fail",file:e,error:null==e?void 0:e.failMsg})})),"save"===t){var s,c,u="yun_views_".concat(t,"File_fail");null===(s=(c=e.$message).error)||void 0===s||s.call(c,"".concat((0,d.GH)(u,{length:o.length})))}else{var l,p;null===(l=(p=e.$message).error)||void 0===l||l.call(p,o[0].failMsg)}}});case 7:if(t.t0=t.sent,t.t0){t.next=10;break}t.t0={};case 10:m=t.t0,h=m.checked,g=m.props,$=m.dwParams,h?(null===c.vs||void 0===c.vs||(0,c.vs)("click",$),(0,u.nA)("MultiAccountSelectList",w(w({},g),{},{useNewLayout:e.$store.state.ui.useNewLayout}))):e.$message.info((0,d.GH)("multi_account_upload_btn_txt0")),t.next=20;break;case 17:t.prev=17,t.t1=t.catch(3),null===(x=e._error)||void 0===x||x.call(e,t.t1);case 20:case"end":return t.stop()}}),t,null,[[3,17]])})))()}}},x=$,k=(0,r(51900).Z)(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.$store.state.ui.useNewLayout?r("kd-menu-item",{attrs:{index:"otherAccount"},on:{click:e.showDialog}},[r("UserIcon",{attrs:{slot:"prefix"},slot:"prefix"}),r("span",[e._v(e._s(e.getI18nText("multi_account_upload_btn_txt1")))])],1):r("div",{staticClass:"el-dropdown-menu__item-block multi-account-import-dropdown-item",on:{click:e.showDialog}},[r("Icon",{attrs:{type:"nav-multi-account-import"}}),r("span",[e._v(e._s(e.getI18nText("multi_account_upload_btn_txt1")))])],1)}),[],!1,null,null,null).exports,O={upload:{created:function(){this.powerConfig.get("disable_import_from_other_account")||(this.kdocsExtComponents.multiAccountUpload=k)}}}}}]);
