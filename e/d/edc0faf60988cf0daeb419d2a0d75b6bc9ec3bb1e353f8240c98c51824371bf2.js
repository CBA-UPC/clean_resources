/*! For license information please see player.js.LICENSE.txt */
!function(){var e={3316:function(e,t,n){"use strict";var i=n(8908),r=n(434),o=n(7376),s=xports=l,e.exports.default=l,l.XMLHttpRequest=i.XMLHttpRequest||function(){},l.XDomainRequest="withCredentials"in new l.XMLHttpRequest?l.XMLHttpRequest:i.XDomainRequest,["get","put","post","patch","head","delete"],()},9390:function(e,t,n){"use strict";n.r(t);var i=n(5879);const r=videojs.getComponent("Component"),o=videojs.getComponent("CurrentTimeDisplay"),s=videojs.getComponent("TimeDivider"),a=videojs.getComponent("DurationDisplay");class l extends r{constructor(e,t){if(super(e,t),!e.options_.isStreaming){this.addChild(new o(e)),this.addChild(new s(e));let t=new a(e);e.options_.duration&&(e.duration(parseInt(e.options_.duration)),t.updateContent()),this.addChild(t)}}createEl(){return super.createEl("div",{className:"vjs-timer-controls vjs-control"})}}const u=videojs.getComponent("Component"),d=videojs.getComponent("ProgressControl"),c=videojs.getComponent("PlayToggle"),h=videojs.getComponent("FullscreenToggle"),p=videojs.getComponent("VolumePanel");videojs.registerComponent("ControlBar",class extends u{constructor(e,t){super(e,t),this.addChild(this.progressControl=new d(e));const n=new c(e);function r(t){t.stopPropagation();const n=e.playerState.getStateName();"autoplay"!==n&&"standby"!==n||(e.trigger("autoplay-next-video-cancel"),e.trigger({type:"request-refresh",video:{src:e.options_.sources[0].src,title:e.options_.title,poster:e.options_.poster,options:e.options_},autoplay:!0}))}n.on("click",r),n.on("tap",r),this.addChild(n);const o=new p(e,{name:"volumePanel"});this.addChild(o),e.on("loadeddata",(()=>{o.removeClass("vjs-hidden"),o.children_.map(()})),this.addChild(new l(e)),this.addChild(new h(e)),e.options_.plugins["social-share"]&&this.addChild(new i.Z(e));try{e.volume(.7),e.muted()&&e.muted(!0)}catch(e){console.log("Failing to set volume")}e.on("ended",this.onVideoEnded),e.on("play",this.onVideoStart)}createEl(){return super.createEl("div",{className:"vjs-control-bar"})}onVideoEnded(){this.addClass("vjs-video-finished")})},1287:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});const i=videojs.getComponent("Component");class r extends i{constructor(e,t){super(e,t)}createEl(){return super.createEl("div",{className:"mol-modal-window-backdrop"})}}},2834:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});const i=videojs.getComponent("Component");class r extends i{constructor(e,t){super(e,t)}createEl(){return super.createEl("div",{className:"mol-modal-window"})}}},5241:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var i=n(2152),r=n.n(i);n(8171);const o=videojs.getComponent("Button");class s extends o{constructor(e,t){super(e,t)}createEl(){let e=this.options_.buttonText||"Copy Code";return super.createEl("button",{className:"vjs-copy-code-button vjs-popup-button vjs-popup-principal-button",innerHTML:e})}},7741:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});const i=videojs.getComponent("Button");class r extends i{constructor(e,t){super(e,t),this.on("click",this.onClick),this.on("tap",this.onClick)}createEl(){return super.createEl("button",{className:"vjs-close-button",innerHTML:"Ã—"})}onClick(){this.player().trigger("CloseButton.pressed")}}const o=videojs.getComponent("Component");class s extends o{constructor(e,t){super(e,t);let n=new r(e,t);this.addChild(n),e.on("CloseButton.pressed",videojs.bind(this,(function(){this.trigger("FullWidthPopup.close")})))}createEl(e,t){return(t=t||{}).className=(t.className||"")+" vjs-full-width-popup",super.createEl(e||"div",t)}}},8017:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});const i=videojs.getComponent("Component");class r extends i{constructor(e,t){if(super(e,t),this.buttonPressed_=!1,this.on("click",this.onClick),this.on("tap",this.onClick),t.className){this.addClass("share-item-"+t.className);let n=new o(e,{className:t.className});this.addChild(n)}}openPopup(){let e=this.player(),t=this.getPopup();this.buttonPressed_=!0,t&&(t.isOpen=!0,e.trigger("CloseButton.pressed"),this.buttonPressed_=!0,this.currentPopup_=t,t.one("FullWidthPopup.close",videojs.bind(this,this.closePopup)),e.addChild(t))}closePopup(){let e=this.player(),t=this.currentPopup_;this.buttonPressed_=!1,t&&t.isOpen&&(t.isOpen=!1,e.removeChild(t))reateEl(){let e=super.createEl("a",{className:"share-button vjs-social-share-control vjs-control vjs-social-share-control-share-button share-item btn"}),t="share-video-bottom-"+this.options_.className;return e.setAttribute("data-track",t),e.setAttribute("data-vars-position","video"),e.setAttribute("data-vars-platform",this.options_.className),e}}class o extends i{constructor(e,t){super(e,t),t.className&&this.addClass("icon-".concat(t.className))}createEl(){return super.createEl("span",{className:"icon vjs-social-icon"})}}},310:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var i=n(8017),r=n(2152),o=n.n(r),s=n(7741),a=n(5241);const l=videojs.getComponent("Component");class u extends s.Z{constructor(e,t){super(e,t),this.addChild(new d(e))}createEl(){return super.createEl("div",{className:"vjs-embed-video-popup"})}}class d extends l{constructor(e,t){if(super(e,t),this.addChild(new c(e)),this.addChild(new h(e)),a.Z.isCopySupported()){let e=document.createElement("button");e.className="vjs-copy-code-button",e.innerHTML="Copy Code",e.setAttribute("data-clipboard-target","#copyToClipboard"),new(o())(e),this.el_.append(e)}}createEl(){return super.createEl("div",{className:"vjs-embed-video-popup-content"})}}class c extends l{constructor(e,t){super(e,t)}createEl(){return super.createEl("div",{className:"vjs-popup-title",innerHTML:"Embed this video"})}}class h extends l{constructor(e,t){super(e,t)}createEl(){let e=this.player().socials.embedSnippet();return a.Z.isCopySupported()||(e+='<div class="vjs-popup-helper-msg">Please copy the text above</div>'),super.createEl("div",{className:"vjs-popup-content",innerHTML:e})}}class p extends i.Z{constructor(e,t){super(e,t)}getPopu}},7218:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var i=n(8017),r=n(2152),o=n.n(r),s=n(5241);const a=videojs.getComponent("Component");class l extends a{constructor(e,t){if(super(e,t),this.addChild(new u(e)),s.Z.isCopySupported()){let e=document.createElement("button");e.className="vjs-copy-code-button",e.innerHTML="Copy Link",e.setAttribute("data-clipboard-target","#copyToClipboard"),new(o())(e),this.el_.append(e)}}createEl(){return super.createEl("div",{className:"vjs-popup-wrapper"})}}class u extends a{constructor(e,t){super(e,t)}createEl(){let e=this.player().socials.linkUrl+"?ito=vjs-link";e||(e="No link available");let t='<div class="clearfix"></div><div class="vjs-popup-title">Get link</div><div class="vjs-popup-content"><textarea id="copyToClipboard" readonly rows="3">'+e+"</textarea></div>";return s.Z.isCopySupported()||(t+='<div class="vjs-popup-helper-msg">Please copy the text above</div>'),super.createEl("div",{className:"vjs-link-popup-content",innerHTML:t})}}var d=n(7741);class c extends d.Z{constructor(e,t){super(e,t),this.addChild(new l(e))}createEl(){return super.createEl("div",{className:"vjs-link-popup"})}}class h extends i.Z},5879:function(e,t,n){"use strict";n.d(t,{A:function(){return l},Z:function(){return a}});var i=n(8017),r=n(310),o=n(7218);const s=videojs.getComponent("Component");class a extends s{constructor(e,t){super(e,t),this.name_="SocialControls";let n=new l(e);this.addChild(n);let s=new i.Z(e,{className:"facebook"});this.addChild(s);let a=new i.Z(e,{className:"twitter"});this.addChild(a);let u=new o.Z(e,{className:"link"});this.addChild(u),e.socials.nonEmbeddable&&!1!==e.socials.nonEmbeddable||this.addChild(new r.Z(e,{className:"code"}))}createEl(){return super.createEl("div",{className:"vjs-social-controls vjs-control shareable-item"})}}class l extends s{constructor(e,t){super(e,t),this.name_="ShareDetailWrapper";const{title:n,pageURL:i,poster:r,id:o}=e.options_;n&&this.addChild(new u(e,{className:"item-share-title",innerHTML:n})),i&&this.addChild(new u(e,{className:"item-share-url",innerHTML:"https://metro.co.uk/video/".concat(i.toLowerCase(),"-").concat(o,"/")})),this.addChild(new u(e,{className:"item-share-description",innerHTML:""})),this.addChild(new u(e,{className:"item-share-video-id",innerHTML:o})),r&&this.addChild(new d(e,{className:"item-share-image",src:r}))}createEl(){return super.createEl("span",{className:"item-share-detail"})}}class u extends s{constructor(e,t){super(e,t),t.className&&this.addClass(t.className)}createEl(){return super.createEl("span",{innerHTML:this.options_.innerHTML})}}class d extends s{constructor(e,t){super(e,t),t.className&&this.addClass(t.className)}createEl(){return super.createEl("img",{src:this.options_.src})}}},6863,8284:function(e,t,n){"use strict";n.r(t);var i=n(8171),r=n(8366);videojs.registerPlugin("player-events",(function(){var e=this,t=e.el(),n=i.Z.isMobile();function o(){e.trigger("videoStart"),e.one("ended",s)}function s(){e.trigger("videoComplete"),e.one("play",o)}e.options_.isMobile=n,e.isEmbedded=i.Z.isIframe(),e.ready((function(){setTimeout(),10)})),/iP(hone|od)/.test(navigator.userAgent)&&this.addClass("vjs-iphone"),e.one("play",o)}))},8568:function(e,t,n){"use strict";n.r(t);var i=n(3984),r=n.n(i),o=n(8129),s=n(8366);videojs.registerPlugin("player-state",(function(){var e=this;!document.addEventListener&&s.Z.addClass(document.body,"vjs-ie8");var t=window.location.search.match(/logVideoplayerState/),n=new(r())(e,{"timer:waitingLoading":[{from:function(t){return"adsWaiting"===t&&("IMA"===e.vast.type||!!e.vast.adUnit&&("VAST"===e.vast.adUnit.type?e.currentTime()>0:"VPAID"===e.vast.adUnit.type))},to:"adPlaying"},{from,to:"contentReady",timer:"startPlaying",timer_time:1400}],"timer:resumeAfterSeek":[{from:"resumeAfterSeek",to:"contentPlaying"}],"vast.adStart, ima.adStart":[{from:"started",to:"adsWaiting",timer:"waitingLoading",timer_interval:10},{from:"contentWaiting",to:"adsWaiting",timer:"waitingLoading",timer_interval:10}],"vast.adEnd, ima.adEnd":[{from:"adPlaying",to:"adEnded"},{from:"adPaused",to:"adEnded"},{from:"adPauseStandby",to:"adEnded"}],playing:[{from:"adEnded",to:"contentWaiting",timer:"waitingLoading",timer_interval:10}],"timer:startPlaying":[{from:"contentReady",to:"contentPlaying"}],"timer:end":[{from:function(t){return!("ended"!==t||e.autoplayNextVideoActive&&(o.Z.defer((function(){e.trigger("mol.autoplay-start")})),1))},to:"standby"}],"timer:error":[{from:"errored",to:"ended",timer:"end",timer_time:600}],"timer:pause":[{from:"contentPaused",to:"pauseStandby"}],"timer:adPause":[{from:"adPaused",to:"adPauseStandby"}],"timer:replay":[{from:"started",to:"contentWaiting",timer:"waitingLoading",timer_interval:10}],"timer:seeking_to_ended":[{from:"contentPlaying",to:"ended",timer:"end",timer_time:600}],"timer:stop_seeking":[{from:"seeking",to:"contentPlaying"}],ended:[{from:"contentPlaying",to:"ended",timer:"end",timer_time:600},{from:"seeking",to:"contentPlaying",timer:"seeking_to_ended",timer_time:100},{from:"resumeAfterSeek",to:"contentPlaying",timer:"seeking_to_ended",timer_time:100}],error:[{from,to:"errored",timer:"error",timer_time:3e3}],pause:[{from:function(e){var t=this.currentTime()/this.duration();return("contentPlaying"==e||"resumeAfterSeek"==e)&&t<1},to:"contentPaused",timer:"pause",timer_time:200},{from:function(e){var t=this.currentTime()/this.duration();return"adPlaying"==e&&t<1},to:"adPaused",timer:"adPause",timer_time:200},{from:"autoplay",to:"standby"}],"ima.firstPlay":[{from:"ready",to:"started"},{from:"standby",to:"started"},{from:function(t){return"autoplay"===t&&!(e.options_.isMobile&&e.isFullscreen_)},to:"started"}],play:[{from:"ready",to:"started"},{from:"ended",to:"started"},{from:"standby",to:"started"},{from:"pauseStandby",to:"contentPlaying"},{from:"adPauseStandby",to:"adPlaying"},{from:"contentPaused",to:"contentPlaying"},{from:"seeking",to:"resumeAfterSeek",timer:"resumeAfterSeek",timer_time:1e3}],"play-after-seek":[{from:"seeking",to:"contentPlaying"}],"before-seeking, seeking":[{from:"contentReady",to:"contentPlaying"},{from:"contentPlaying",to:"seeking",timer:"stop_seeking",timer_time:3e3},{from:"contentPaused",to:"seeking",timer:"stop_seeking",timer_time:3e3},{from:"seeking",to:"seeking",timer:"stop_seeking",timer_time:3e3}],seeked:[{from:"contentReady",to:"contentPlaying"},{from:"changingSrc",to:"contentPlaying"}],"mol.sources.renditionChanging":[{from:"contentPlaying",to:"changingSrc"}],"vast.adsCancel, ima.adsCancel, ima.adsError":[{from:"standby",to:"contentWaiting",timer:"waitingLoading",timer_interval:10},{from:"started",to:"contentWaiting",timer:"waitingLoading",timer_interval:10},{from:"adPlaying",to:"contentWaiting",timer:"waitingLoading",timer_interval:10}],"request-dispose":[{from:"adPlaying",to:"destroyedDuringAds"},{from:/.*/,to:"destroyed"}],"request-refresh":[{from:"contentPlaying",to:"aborting"},{from:"pauseStandby",to:"aborting"},{from:"autoplay",to:"standby"}],"autoplay-next-video-cancel":[{from:"autoplay",to:"standby"}],"flyout-close":[{from:"autoplay",to:"standby"}],"mol.autoplay-start":[{from:"ended",to:"autoplay"}],refresh:[{from:/.*/,to:"started"}]},{onTransition:function(e,n,i){t&&console.log("STATE: "+e+" -> "+i+" -> "+n+" ("+Date.now()+")")}}),i=function(e,t){var n=100*e;return function(i){var r,o=parseInt(i,10);return!isNaN(o)&&n>o&&0!==this.duration()&&(r=this.currentTime()/this.duration())>=e&&r<t}},a=new(r())(e,{"playerstate.enter.contentPlaying":[{from:"ready",to:"0"}],"timeupdate,contenttimeupdate":[{from:i(.25,1),to:"25"},{from:i(.5,1),to:"50"}],"playerstate.enter.seeking":[{from:"0",to:"seeking-0"},{from:"25",to:"seeking-25"},{from:"50",to:"seeking-50"}],"playerstate.leave.seeking":[{from:"seeking-0",to:"0-resumed"},{from:"seeking-25",to:"25-resumed"},{from:"seeking-50",to:"50-resumed"}],"playerstate.enter.ended":[{from:/^0.*/,to:"25",timer:"from25toend"},{from:/^25.*/,to:"50",timer:"from50toend"},{from:/^50.*/,to:"ready"}],"timer:from25toend":[{from:"25",to:"50",timer:"from50toend"}],"timer:from50toend":[{from:"50",to:"ready"}],refresh:[{from:/.*/,to:"ready"}]},{onTransition:function(e,n,i){t&&console.log("PROGRESS: "+e+" -> "+i+" -> "+n)}});n.on((function(t){null!==e.el()&&(window.top.postMessage({id:e.id_,sender:"metro-html5-player",type:t.type,state:t.state,payload:{options:e.options_}},"*"),e.trigger("playerstate."+t.type+"."+t.state))})),a.on((function(t){null!==e.el()&&(window.top.postMessage({id:e.id_,sender:"metro-html5-player",type:t.event.type,state:t.state,payload:{options:e.options_}},"*"),e.trigger("playerstate.progress."+t.type+"."+t.state))})),n.on("destroyedDuringAds",(function(){null!==e.el()&&(n.destroy(),a.destroy())})),n.on("destroyed",)),e._states={state:n,progress:a},e.playerState={getStateName:function(){return n.get()}}}))},2288,7842:function(e,t,n){"use strict";n.r(t);var i=n(8366),r={};function o(e){var t,n,i,o=e||window.navigator,s=o.appVersion,a=o.userAgent,l=o.appName,u=""+parseFloat(s),d=parseInt(u,10);-1!=(n=a.indexOf("Opera"))?(l="Opera",u=a.substring(n+6),-1!=(n=a.indexOf("Version"))&&(u=a.substring(n+8))):-1!=(n=a.indexOf("MSIE"))?(l="Microsoft Internet Explorer",u=a.substring(n+5)):-1!=(n=a.indexOf("Chrome"))?(l="Chrome",u=a.substring(n+7)):-1!=(n=a.indexOf("Safari"))?(l="Safari",u=a.substring(n+7),-1!=(n=a.indexOf("Version"))&&(u=a.substring(n+8))):-1!=(n=a.indexOf("Firefox"))?(l="Firefox",u=a.substring(n+8)):-1!=a.indexOf("Trident/")?(l="Microsoft Internet Explorer",u=a.substring(a.indexOf("rv:")+3)):(t=a.lastIndexOf(" ")+1)<(n=a.lastIndexOf("/"))&&(l=a.substring(t,n),u=a.substring(n+1),l.toLowerCase()==l.toUpperCase()&&(l=window.navigator.browser)),-1!=(i=u.indexOf(";"))&&(u=u.substring(0,i)),-1!=(i=u.indexOf(" "))&&(u=u.substring(0,i)),-1!=(i=u.indexOf(")"))&&(u=u.substring(0,i)),isNaN(d)&&(u=""+parseFloat(s),d=parseInt(s,10));var c=/Mobile|mini|Fennec|Android|iP(ad|od|hone)|Windows Phone/.test(s),h="-",p=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var f in p){var m=p[f];if(m.r.test(a)){h=m.s;break}}var v="-";switch(/Windows/.test(h)&&(v=/Windows (.*)/.exec(h)[1],h="Windows"),h){case"Mac OS X":v=/Mac OS X (1[\.\_\d]+)/.exec(a)[1];break;case"Android":v=/Android ([\.\_\d]+)/.exec(a)[1];break;case"iOS":v=(v=/OS (\d+)_(\d+)_?(\d+)?/.exec(s))[1]+"."+v[2]+"."+(v[3]||0)}var g=parseInt(v.split(".")[0],10),y=!a.match(/Windows Phone/)&&a.match(/iPhone/);r.browser=l,r.browserVersion=u,r.browserMajorVersion=d,r.mobile=c,r.os=h,r.osVersion=v,r.osMajorVersion=g,r.isIPhone=y}o(),window.addEventListener("updateSystemInfo",(function(e){o(e.detail)}));var s,a=r;videojs.registerPlugin("mobile",(function(){var e=this.el();"iOS"==a.os&&i.Z.addClass(e,"vjs-idevice"),a.isIPhone&&(i.Z.addClass(e,"no-full-width-control"),i.Z.addClass(e,"vjs-iphone"),a.osMajorVersion<=7&&i.Z.addClass(e,"vjs-ios-old")),a.mobile&&i.Z.addClass(e,"no-volume-slider")})),9!==parseInt("09")&&(s=window.parseInt,window.parseInt)},9475:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var i=n(8171),r=n(3018);function o(e){this.message="DFPUrlBuilder Error: "+(e||"")}function s(e){if(!(this instanceof s))return new s(e);if(!e)throw new o("Missing videoAdServerUrl");var t={env:"vp",gdfp_req:1,impl:"s",output:"xml_vast3",unviewed_position_start:1,hl:"en"};try{const e=localStorage.getItem("mol.ads.tcfv2.uuid")||localStorage.getItem("mol.ads.ppid.uuid");e&&(t.ppid=e)}catch(e){console.warn("Unable to set PPID")}var n,a,l={base_url:(n=e.split("?"))[0],search:n[1]};this.base_url=l.base_url,this.params=i.Z.extend({},t,(a=l.search)?r.Z.queryStringToObj(a,(function(e,t){return t&&!/(\[.+])/g.test(t)})):{})}o.prototype=new Error,o.prototype.name="DFPUrlBuilder Error",s.encodeCustomParams=function(e){if(i.Z.isObject(e))return i.Z.forEach(e,(function(t,n){i.Z.isArray(t)?e[n]=t.map(encodeURIComponent).join(","):e[n]=encodeURIComponent(t)})),encodeURIComponent(r.Z.objToQueryString(e));throw new o("encodeCustomParams only accepts an object map of key value pairs.")},s.prototype.iu=function(e){if(!/^\/[a-zA-z0-9\-_\.~]+(\/[a-zA-z0-9\-\_\.\~]+)*/.test(e))throw new o("'iu' param must follow format: /network_id/directory_tree.../ad_unit");return this.params.iu=encodeURIComponent(e),this},s.prototype.sz=function(e){if(!/^[0-9]+x[0-9]+/.test(e))throw new o("'sz' param must follow format like: 300x400.");return this.params.sz=e,this},s.prototype.url=function(e){return this.params.url=encodeURIComponent(r.Z.urlParts(e).href),this},s.prototype.correlator=function(e){if(i.Z.isNumber(e)&&!isNaN(e))return this.params.correlator=e,this;throw new o("the passed correlator is not a number")},s.prototype.description_url=function(e){return this.params.description_url=encodeURIComponent(r.Z.urlParts(e).href),this},s.prototype.hl=function(e){return this.params.hl=e,this},s.prototype.ciu_szs=function(e){return this.params.ciu_szs=e,this},s.prototype.scp,s.prototype.cust_params,s.prototype.scor=function(e){if(i.Z.isNumber(e)&&!isNaN(e))return this.params.scor=e,this;throw new o("the passed scor is not a number")},s.prototype.addParam=function(e,t){return this.params[e]=t,this},s.prototype.build=function(){var e=this.params;return i.Z.forEach(["env","gdfp_req","impl","output","unviewed_position_start","hl","url","correlator","description_url"],)),this.base_url+"?"+r.Z.objToQueryString(this.params)};var a={getScreenSize:function(e,t){return t?{width:640,height:360}:e.isChromeless?{width:401,height:225}:{width:636,height:358}},getCustomParams:async function(e,t,r){var o;const s=e.duration();let a={length:s>120?120:30*Math.floor(s/30),videoWidth:r.width,videoHeight:r.height,domain:t.domain,ttid:e.options_.videoId,play:e.autoplayIndex||1};if("metro.co.uk"!==(null===(o=n.g.location)||void 0===o?void 0:o.host)&&(a.environment="integration"),t.title&&(a.videoTitle=t.title.replace(/\s/g,"_").replace(/[^_\w]/g,"")),t.source&&(a.video=t.source.replace(/\s/g,"_")),a.sz=r.width+"x"+r.height,n.g.__cmp&&("yes"===localStorage.getItem("cmp.consent")?a.consent="true":(a.consent="false",a.npa="1")),window.__cmp){const e=await new Promise((e=>window.__cmp("getConsentData",null,))));a.gdpr_consent=e.consentData}return t.tags&&t.tags.forEach((e=>{a=i.Z.extend(a,e)})),a},getDFPUrl:function(e,t,i){return new Promise((async(r,o)=>{t.tags=await function(e,t,i){if(n.g.adverts&&n.g.adverts.getVideoTags)return new Promise((async r=>{let o,s=[],a=!1;const l=()=>{a||(a=!0,new Date,r(s||[]),clearTimeout(o))};o=setTimeout(l,2e3);try{const r=n.g.adverts.getVideoTags(e,t,i);r instanceof Promise&&(s=await r,l())}catch(e){l()}}))}(t,i,e),r(await a.buildDFPAdTag(e,t))}))},buildDFPAdTag:async function(e,t){let n=i.Z.isObject(t.screen)?t.screen:a.getScreenSize(e,i.Z.isMobile()),r=e.options_.linkBaseURL,o=new s(t.masterVideoTag).correlator((new Date).valueOf()).cust_params(await a.getCustomParams(e,t,n)).description_url(r).url(r).scor(t.scor).sz(t.sz||"".concat(n.width,"x").concat(n.height)).addParam("ged","ta1_ve2_eb11_pt20.16.20_td20_tt1_pd1_bs10_tv1_is0_er2930.0.3288.636_sv2_sp1_vi2491.0.3775.534_vp84_ct1_vb1_vl1_vr0").addParam("vid",e.options_.videoId).addParam("prebidToken",t.prebidToken);const l=metro.pageData.topCategory||"";let u="".concat(decodeURIComponent(o.params.iu),"/").concat(l);if(e.isChromeless){const e=t.adUnitPos||"preroll";u="".concat(decodeURIComponent(o.params.iu),"/").concat(e,"/").concat(l)}return o.iu(u),o.build()}},l=a},4781:function(e,t,n){"use strict";n.r(t),n(8171),n(9475),videojs.registerPlugin("ads-setup",(function(e){const t=this;t.ready((()=>{t["ima-setup"](e)}))}))},7469:function(e,t,n){"use strict";n.r(t);var i=n(8171),r=n(3018),o=(n(9475),n(8366));videojs.registerPlugin("ima-setup",(function(e){const t=this,n=t.el().querySelector(".vjs-tech"),s=function(e){var n=r.Z.queryStringToObj(window.location.search);return e.adCancelTimeout=i.Z.isDefined(n.adCancelTimeout)?parseInt(n.adCancelTimeout,10):e.adCancelTimeout,e.adsEnabled=i.Z.isDefined(n.adsEnabled)?"false"!==n.adsEnabled:e.adsEnabled,i.Z.isString(n.referer)?e.domain=n.referer:e.domain=t.isEmbedded?"notmetro":"metro",e}(i.Z.extend({},this.options_,e));s.scor=(new Date).valueOf();let a=document.createElement("div");t.el().appendChild(a),e.adsEnabled=e.adsEnabled||t.videoStarts%3==0;const l=this.options_.adsEnabled=!!e.adsEnabled;try{t.ima({adSetupOpts:s,adCancelTimeout:e.adCancelTimeout,adsEnabled:l,vpaidEnabled:!0,adContainerDiv:a})}catch(e){console.log("IMA ERROR: "+e.message,e)}return t.on("reset",(function(){(t.options_.plugins["ads-setup"]||{}).scor=(new Date).valueOf(),t.options_.adsEnabled?t.ima.enable():t.ima.disable(),t.ima.reset({adsEnabled:t.options_.adsEnabled||(t.videoStarts-1)%3==0})})),t.on("vast.resize",(()=>{var e=document.createEvent("Event");e.initEvent("resize",!0,!0),o.Z.dispatchEvent(n,e)})),t.vast={type:"IMA",isEnabled:function(){return t.ima.isEnabled()},enable:function(){return t.ima.enable()},disable:function(){return t.ima.disable()}},t.vast}))},1386:function(e,t,n){"use strict";n.r(t);var i=n(8171),r=n(4021),o=n(8366),s=n(9274),a=(n(3417),n(4291)),l={separators:[" ",""],ellipsis:"&hellip;"};function u(e){var t;return t=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)}function d(e,t){var n,i,r,o,s,a,d=(t=t||{}).separators||l.separators,c=t.ellipsis||l.ellipsis,h=t.maxlines;if(a=h?h(e)+u(e):e.parentNode.clientHeight-u(e.parentNode),(o=e.getAttribute("clamp-full-text"))?e.innerHTML=o:(o=e.innerHTML,e.setAttribute("clamp-full-text",o)),!(e.clientHeight<=a))for(n=0;n<d.length;n++)for(i=d[n],s&&(o+=s,e.innerHTML=o+c),r=o.split(i);e.clientHeight>a&&r.length>0;)s=i+r.pop(),o=r.join(i),e.innerHTML=o+c}let c=videojs.getComponent("ClickableComponent");class h extends c{constructor(e,t){super(e,t);let n=this.el();this.updateClamp=function(){!function(e,t){if(e)if(i.Z.isNodeList(e))for(var n=0;n<e.length;n++)d(e[n],t);else d(e,t)}(n.getElementsByTagName("h4"))},e.on("resize",this.updateClamp),this.on("show",this.updateClamp),this.on("dispose",))}}const p=videojs.getComponent("Component");class f extends p{constructor(e,t){super(e,t)}createEl(){return super.createEl("div",{className:"vjs-autoplay-next-video-controls-wrapper"})}}const m=videojs.getComponent("Component");class v extends m{constructor(e,t){super(e,t)}createEl(){return super.createEl("div",{className:"vjs-autoplay-next-video-controls-related-videos-wrapper"})}}const g=videojs.getComponent("Component");class y extends g{constructor(e,t){super(e,t)}createEl(){let e=this.options_.video;return super.createEl("div",{className:"vjs-autoplay-next-video-controls",innerHTML:'<div class="vjs-autoplay-next-video-title"><h4>Up next: '+(e.headline||"")+"</h4></div>"})}}const _=videojs.getComponent("Component");class b extends _{constructor(e,t){super(e,t)}createEl(){return super.createEl("div",{className:"vjs-autoplay-next-video-controls-related-videos"})}}const T=videojs.getComponent("ClickableComponent");class w extends T{constructor(e,t){super(e,t),this.on("click",this.onClick),this.on("tap",this.onClick)}createEl(){return super.createEl("div",{className:"vjs-autoplay-next-video-play",innerHTML:'<div class="vjs-autoplay-next-video-play-button"><span></span></div><svg viewBox="0 0 100 100" version="1.1" xmlns="http://www.w3.org/2000/svg"><circle r="47" cx="50" cy="50" fill="transparent" stroke-dasharray="295.30" stroke-dashoffset="0" style="stroke-dashoffset: 0;"></circle></svg>'})}onClick(){let e=this.options_.video,t=this.player();t.currentTime(0),t.trigger({type:"request-refresh",video:{src:e.renditions[0].url,title:e.headline,poster:e.stillImage.hostUrl,options:e},autoplay:!0}),t.trigger({type:"updateAutoplayIndex",increment:1})}}const S=videojs.getComponent("ClickableComponent");class E extends S{constructor(e,t){super(e,t),this.on("click",this.onClick),this.on("tap",this.onClick)}createEl(){return super.createEl("div",{className:"vjs-autoplay-next-video-cancel",innerHTML:"Cancel"})}var x=n(1344);class C extends h{constructor(e,t){super(e,t);let n=this.addChild(new f(e)),i=this.addChild(new v(e)),r=n.addChild(new y(e,{video:t.videos[0]})),o=i.addChild(new b(e));this.nextButton=r.addChild(new w(e,{video:t.videos[0]})),r.addChild(new E(e,{video:t.videos[0]}));for(let n=1;n<t.videos.length;n++){let i=t.videos[n];o.addChild(new x.Z(e,{video:i,updateAutoplayIndex:n+e.autoplayIndex+1}))}}countdown(e){let t=this,n=this.player(),i=!1,r=function(){if(!n._states||!n._states.state||"autoplay"!==n._states.state.get()){i=!0,n.off("autoplay-next-video-cancel",r),n.off("refresh",r),n.off("play",r);try{t.off("dispose",r)}catch(e){}}};n.on("autoplay-next-video-cancel",r),n.on("refresh",r),n.on("play",r),t.on("dispose",r),function(e,t,n){let i=e.querySelector("circle");if(!i)return void setTimeout(n,1e3*t);let r=parseInt(i.getAttribute("r"),10),o=1e3*t/60,s=0;!function e(){let t=s/o;i.style.strokeDashoffset=Math.PI*(-2*r)*t+"px",s>=o?n():(s++,setTimeout(e,60))}()}(this.el(),e,))}createEl(){let e=this.options_.videos[0];return e.stillImage.hostUrl&&(e.stillImage.hostUrl=e.stillImage.hostUrl.replace(/^http:\/\/video\.metro/i,"https://videos.metro")),super.createEl("div",{className:"vjs-autoplay-next-video-wrapper",innerHTML:'<div class="vjs-autoplay-next-video-poster" style="background-image: url(\''+(e.stillImage.hostUrl||"")+"');\"></div>"})}}videojs.registerPlugin("autoplay-next-video",(function(e){let t=this;if(t.options_.isStreaming)return;const n=t.options_.linkBaseOrigin+"/wp-json/videos/";let l,u=i.Z.extend({countdown_time:10},e),d=t.options_.isMobile,c=n+t.options_.videoId+"/recommended/";function h(){let n=t.el(),h=(0,r.Z)(c),p=i.Z.extend({},t.options_)function m(){d&&l&&t.vast.enable(),t.off("autoplay-next-video-cancel",m),t.off("flyout-close",m),o.Z.removeClass(n,"vjs-AutoplayNextVideoShow"),t.autoplayNextVideoPanel&&(t.removeChild(t.autoplayNextVideoPanel),t.autoplayNextVideoPanel.dispose(),delete t.autoplayNextVideoPanel)}t.autoplayNextVideoActive=!0,t.autoplayIndex=0,t.on("playerstate.enter.started",(function(){h.get((function(e,n){if(e&&t.trigger({type:"warning",message:"plugin.autoplay-next-video: "+e.message}),null===n)return;n.videos=n.videos.filter());let r=i.Z.rotateRight(n.videos,t.autoplayIndex);t.autoplayNextVideoPanel||(t.autoplayNextVideoPanel=t.addChild(new C(t,{videos:r})))}),{params:{per_page:10,channel:(0,a.x)(e.channel),fields:"id,stillImage.hostUrl,thumbImage.hostUrl,headline,renditions,iOSRenditions,pageURL,adsEnabled,metroTags,metroVideoCategory"}})})),t.on("playerstate.enter.autoplay",(function(){let e;t.autoplay(!1),d&&t.isFullscreen_&&"iOS"===s.Z.os&&(l=t.vast.isEnabled(),t.vast.disable(),e=t.currentSrc(),t.changeRendition("https://videos.metro.co.uk/videos/metro_autoplay_countdown_960x540.mp4",{currentTime:0,playing:!0},(function(){i.Z.once(t,["ended","request-refresh","autoplay-next-video-cancel","error","pause"],(function(n){("autoplay-next-video-cancel"===n.type||"error"===n.type||"pause"===n.type&&s.Z.isIPhone)&&(t.changeRendition(e,{currentTime:0,playing:!1}),t.trigger("timeupdate"),"pause"!==n.type&&t.trigger("pause")),l&&t.vast.enable(),e=null,l=null}))}))),i.Z.once(t,["playerstate.leave.autoplay","autoplay-next-video-cancel","flyout-close"],f),t.autoplayNextVideoPanel&&(o.Z.addClass(n,"vjs-AutoplayNextVideoShow"),t.autoplayNextVideoPanel.countdown(u.countdown_time))})),t.on("updateAutoplayIndex",))}d?(u.countdown_time=2,h()):h()}))},5598:function(e,t,n){"use strict";n.r(t);var i=n(9274);const r=videojs.getComponent("Component");class o extends r{constructor(e,t){super(e,t)}createEl(){var e=this.options_,t=super.createEl("div",{className:"mol-branded-content__end-view"}),n=e.clickThroughUri?e.clickThroughUri:"",i=e.clickThroughUri?"_blank":"";return t.innerHTML='<a class="mol-branded-content__end-view-blocker" href="'+n+'" target="'+i+'"><img class="mol-branded-content__end-view-poster" src="'+e.poster+'"></a>',t}}var s=n(8171),a,l=[],u=s.Z.debounce((function(){l.forEach((function(e){var t=e.element;setTimeout((function(){var n(t)&&!document.hidden;n&&!e.inViewport?(e.inViewport=!0,t.dispatchEvent(a("viewport.enter"))):!n&&e.inViewport&&(e.inViewport=!1,t.dispatchEvent(a("viewport.exit")))}),0)}))}),100);videojs.registerPlugin("branded-content",(function(e){var t,n,r=this;console.log(e);var s,a,d,c=function(){return e.trackingPixels?e.trackingPixels.reduce(),{}):null},h=c(),p={},f=0,m=0;if(e.clickThroughUri){t=function(e,t){var n=window.document.createElement("a");return n.href=t,n.target="_blank",n.rel="nofolow",n.onclick=function(t){var n=e._states.state.get();if("ended"!==n&&"standby"!==n)return e.paused()?(e.play(),t.stopPropagation(),!1):void e.pause()},n.classList.add("mol-branded-content__blocker"),n}(r,e.clickThroughUri);let n=r.el().getElementsByClassName("vjs-control-bar")[0];r.el().insertBefore(t,n)}(r),r.el().classList.add("mol-branded-content"),r.on("playerstate.enter.standby",)),r.on("playerstate.enter.standby",(function(){a(),n=new o(r,{poster:e.endStatePoster||r.options_.poster,clickThroughUri:e.clickThroughUri}),r.addChild(n)})),r.on("playerstate.leave.standby",a),r.on("playerstate.leave.standby",(function(){f=0})),r.on("timeupdate",(function(){var t=Math.floor(r.currentTime())||0;t>0&&t%10==0&&!p[t]&&(p[t]=!0,r.trigger("brandedContentPlayer.progress"),10===t&&e.impressionPixel&&d(e.impressionPixel)),h&&h["s"+t]&&(d(h["s"+t]),delete h["s"+t])})),r.on("ended",(function(){p={},h=c(),"Microsoft Internet Explorer"===i.Z.browser&&r.currentTime(0)})),r.muted(!0),i.Z.mobile&&(r.el().querySelector(".vjs-tech").setAttribute("playsinline",""),r.on("timeupdate",(function(){var e=r.currentTime();Math.abs(e-f)>3?((m+=1)>=2&&r.pause(!0),r.currentTime(f)):f=e})),r.on("ended",(function(){r.duration()-f>3&&(r.pause(!0),r.play(!0),r.currentTime(f))}))),s=r.el(),l.push({element:s,inViewport:!1}),window.addEventListener("DOMContentLoaded",u,!1),window.addEventListener("load",u,!1),window.addEventListener("scroll",u,!1),window.addEventListener("resize",u,!1),document.addEventListener("visibilitychange",u,!1),r.el().addEventListener("viewport.enter",)),r.el().addEventListener("viewport.exit",(function(){r.pause()}))}))},3461:function(e,t,n){"use strict";n.r(t);var i=n(4021),r=n(1287),o=n(2834);const s=videojs.getComponent("Button");class a extends s{constructor(e,t){super(e,t),this.player=e,this.on("click",this.onClick),this.on("tap",this.onClick)}name(){return"metroPreviousVideoButton"}onClick(){this.player.trigger("metro.chromeless.previous.video")}createEl(){return super.createEl("button",{className:"metro-previous-control vjs-control",innerHTML:""})}}const l=videojs.getComponent("Button");class u extends l{constructor(e,t){super(e,t),this.player=e,this.on("click",this.onClick),this.on("tap",this.onClick)}name(){return"metroSkipVideoButton"const d=videojs.getComponent("Component");class c extends d{constructor(e,t){super(e,t);const n=new a(e),i=e.controlBar.children_.find((e=>{let{el_:t}=e;return t.classList.contains("vjs-play-control")})),r=new u(e);this.addChild(n),this.addChild(i),this.addChild(r)}name(){return"MetroOverlayMainControls"}createEl(){return super.createEl("div",{className:"metro-controls-overlay-main-controls"})}}const h=videojs.getComponent("Component");class p extends h{constructor(e,t){super(e,t);const n=e.controlBar.children_.find((e=>{let{el_:t}=e;return t.classList.contains("vjs-progress-control")})),i=e.controlBar.children_.find((e=>{let{el_:t}=e;return t.classList.contains("vjs-volume-panel")})),r=e.controlBar.children_.find());this.addChild(n),this.addChild(i),this.addChild(r)}name(){return"MetroOverlayBottomControls"}createEl(){return super.createEl("div",{className:"metro-controls-overlay-bottom-controls"})}}const f=videojs.getComponent("Component");class m extends f{constructor(e,t){super(e,t);const n=new r.Z(e),i=new o.Z(e);n.addChild(i),i.addChild(new c(e,{})),i.addChild(new p(e,{})),this.addChild(n)createEl(){return super.createEl("div",{className:"metro-controls-overlay-panel"})}}videojs.registerPlugin("chromeless",(function(e){const t=this;let n,r;t.isChromeless=!0;let o=0,s=0;function a(){"visible"===document.visibilityState?l():u()}function l(){t.play()function d(){document.getElementById("metro_chromeless").style.display="none",t.dispose(),document.removeEventListener("visibilitychange",a)}function c(){const e=r[s];o>0&&(e.adsEnabled=!1),t.trigger({type:"request-refresh",video:{...e,src:e.renditions[0].url,options:{...e,videoId:e.id}},autoplay:!0}),t.trigger({type:"updateAutoplayIndex",increment:1}),function(e){const t=document.getElementById("metro_chromeless__more");if(!e.pageURL&&!e.id&&!e.headline)return void(t.innerHTML="");t.innerHTML="";const n=document.createElement("a");n.setAttribute("href","https://metro.co.uk/video/".concat(e.pageURL,"-").concat(e.id,"/")),n.innerHTML=e.headline,t.appendChild(n)}(e)}function h(){o++,s===r.length-1?s=0:s++,c()}function p(){0===s?s=r.length-1:s--,c()}n=e.videos&&e.videos.length?(0,i.Z)({videos:e.videos}):(0,i.Z)("https://metro.co.uk/wp-json/videos/trending-commercial"),n.get(((e,n)=>{e&&(console.log("Chromeless Player: ",e),d()),n&&n.videos&&n.videos.length?(r=n.videos,function(){const e=new m(t,{});t.addChild(e),c(),t.on("ended",h),t.on("metro.chromeless.next.video",h),t.on("metro.chromeless.previous.video",p),t.on("metro.chromeless.dispose",d),window.addEventListener("blur",u),window.addEventListener("focus",l),document.addEventListener("mouseenter",l),document.getElementById("metro_chromeless__close").addEventListener("click",d)}()):d()}),{params:{per_page:50}})}))},7931:function(){videojs.plugin("headless-mode",(function(){const e=this.el().querySelector(".vjs-tech");this.headlessMode=!0,e.setAttribute("webkit-playsinline",""),e.setAttribute("playsinline","")})),videojs.hook("beforesetup",((e,t)=>{var n;if(null==t||!t.plugins["headless-mode"])return{};const i=e.closest(".vjs-video-container");try{i.classList.add("metro-headless-mode")}catch(e){console.warn(e)}return{plugins:{"ads-setup":{masterVideoTag:"https://pubads.g.doubleclick.net/gampad/ads?iu=%2F5765%2Fmetro.verticalvideo&impl=s&gdfp_req=1&env=vp&output=xml_vast3&unviewed_position_start=1",adCancelTimeout:5e3,sz:"300x250|480x360|640x360|640x480|720x1280|1080x1440|1080x1920",pos:null!==(n=document.querySelector(".metro-portrait-video-carousel"))&&void 0!==n&&n.contains(i)?"player_top":"player_bottom"}}}}))},6839:function(e,t,n){"use strict";n.r(t);class istatic getInternetExplorerVersiostatic isOldIE(){var e=i.navigator(),t=i.getInternetExplorerVersion(e);return-1!==t&&t<10}static isIDevice(){var e=i.navigator();return/iP(hone|ad)/.test(e.userAgent)}static isMobile(){var e=i.navigator();return/iP(hone|ad|od)|Android|Windows Phone/.test(e.userAgent)}static isIPhone(){var e=i.navigator();return/iP(hone|od)/.test(e.userAgent)}static isAndroid(){var e=i.navigator();return/Android/.test(e.userAgent)}}class ratic isObject(e){return"object"==typeof e}static isFunction(e){return"function"==typeof e}static isNumber(e){return"number"==typeof etatic isWindostatic isArrayLike(e){if(null===e||r.isWindow(e)||r.isFunction(e)||r.isUndefined(e))return!1;var t=e.length;return!(1!==e.nodeType||!t)||r.isString(e)||r.isArray(e)||0===t||"number"==typeof t&&t>0&&t-1 in e}}function o(e){return r.isString(e)&&0!==e.length}function s(){}var a={isVisible:function(e){return"hidden"!==window.getComputedStyle(e).visibility},isHidden:function(e){return"none"===window.getComputedStyle(e).display},isShown:function(e){return!a.isHidden(e)},hide:function(e){e.__prev_style_display_=e.style.display,e.style.display="none"},show:function(e){a.isHidden(e)&&(e.style.display=e.__prev_style_display_),e.__prev_style_display_=void 0},hasClass:function(e,t){var n,i,s;if(o(t)){if(e.classList)return e.classList.contains(t);for(t=t||"",i=0,s=(n=r.isString(e.getAttribute("class"))?e.getAttribute("class").split(/\s+/):[]).length;i<s;i+=1)if(n[i]===t)return!0}return!1},toggleClass:function(e,t,n){const i=a.hasClass(e,t)?!0!==n&&"removeClass":!1!==n&&"addClass";i&&a[i](e,t)},toggleEventListener:function(e,t,n,i){a[i?"addEventListener":"removeEventListener"](e,t,n)},addClass:function(e,t){var n;if(o(t)){if(e.classList)return e.classList.add(t);n=r.isString(e.getAttribute("class"))?e.getAttribute("class").split(/\s+/):[],r.isString(t)&&o(t.replace(/\s+/,""))&&(n.push(t),e.setAttribute("class",n.join(" ")))}},removeClass:function(e,t){var n;if(o(t)){if(e.classList)return e.classList.remove(t);n=r.isString(e.getAttribute("class"))?e.getAttribute("class").split(/\s+/):[];var i,s,a=[];if(r.isString(t)&&o(t.replace(/\s+/,""))){for(i=0,s=n.length;i<s;i+=1)t!==n[i]&&a.push(n[i]);e.setAttribute("class",a.join(" "))}}},addEventListener:function(e,t,n){r.isArray(e)?e.forEach((function(e){a.addEventListener(e,t,n)})):r.isArray(t)?t.forEach((function(t){a.addEventListener(e,t,n)})):e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},removeEventListener:function(e,t,n){r.isArray(e)?e.forEach((function(e){a.removeEventListener(e,t,n)})):r.isArray(t)?t.forEach((function(t){a.removeEventListener(e,t,n)})):e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},dispatchEvent:function(e,t){e.dispatchEvent?e.dispatchEvent(t):e.fireEvent("on"+t.eventType,t)},trigger:function(e,t,n){a.dispatchEvent(e,function(e,t){var n=document.createEvent("Event");return n.initEvent(e,!0,!0),t&&Object.keys(t).forEach()),n}(t,n))},isDescendant:function(e,t){for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1},getTextContent:function(e){return e.textContent||e.text},prependChild:function(e,t){return t.parentNode&&t.parentNode.removeChild(t),e.insertBefore(t,e.firstChild)},remove:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},isDomElement:function(e){return e instanceof Element},click:function(e,t){a.addEventListener(e,"click",t)},once:function(e,t,n){a.addEventListener(e,t,(function i(){n.apply(null,arguments),a.removeEventListener(e,t,i)}))},getDimension,getPositionOfElement:function(e){if(!i.isOldIE()&&e.getBoundingClientRect)return e.getBoundingClientRect();var t=0,n=0;do{t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent}while(e);return{top:t,left:n,width:e.offsetWidth,height:e.offsetHeight}},createScript:function(e,t){var n,i;return t=r.isFunction(t)?t:s,i,(n=document.createElement("script")).type="text/javascript",n.src=e,n.onreadystatechange,n.onload=i,n},appendChildren,createElementWithClasses:function(e){const t=document.createElement("div");return e.forEach()),t}},l=a;const u=window.IMA_SDK_URL||"//imasdk.googleapis.com/js/sdkloader/ima3.js";let d=[];class cstatic ready(e){!function(e){if(!c.isSupported())throw new Error("IMA Error: The IMA SDK is not supported on the current browser");if(!r.isFunction(e))throw new Error("Ima.ready Error: Missing required callback")}(e),d.push(e),"loaded"===window._IMA_SDK_STATE&&h()}static load(){return function(){if(c.isSupported()&&!window._IMA_SDK_STATE)if(window._IMA_SDK_STATE="loading",window.google&&window.google.ima)window._IMA_SDK_STATE="loaded",h();else{let e=l.createScript(u,));document.head.appendChild(e)}}(),new Promise((e=>{c.ready((function(t){e(t)}))}))}}function h(){setTimeout((function(){for(;0!==d.length;)d.shift().call(null,window.google&&window.google.ima)}),0)}let p="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,f=(()=>{let e,t,n,i=["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],r=[i,["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]];for(n=0;n<r.length;n++)if(r[n][1]in document){e=r[n];break}if(e)for(t={},n=0;n<e.length;n++)t[i[n]]=e[n];return t})();class mtatic isFullscreen(){return!!document[f.fullscreenElement]}static enabletatic requesstatic existatic toggl}class v{constructor(e){this.ui={},this.videoElement=e,this.el=y.call(this),this.updateVideoState()}setVolume(e,t){if(void 0!==t)this.muted=t,this.trigger("ima.volume",{volume:this.volume}),this.trigger(t?"ima.muted":"ima.non-muted");else{const t=this.volume;this.volume=e,this.trigger("ima.volume",{volume:e}),t!==e&&(0===e?this.trigger("ima.muted"):0===t?this.trigger("ima.non-muted"):this.muted&&e>0&&(this.muted=!1,this.trigger("ima.non-muted")))}g.call(this)nAdMuteCliconVolumeTrackDown(e){const t=this,n=this.ui.volumeTrack,i=this.ui.volumeDiv,r=["pointermove","touchmove","MSPointerMove","mousemove"],o=["pointerup","touchstop","MSPointerUp","mouseup"]function a(e){l.toggleClass(i,"ima-volume-interact",e),l.toggleEventListener(window,o,s,e),l.toggleEventListener(i,r,u,e)}function u(e){const i=l.getPositionOfElement(n);let r=(i.height-(e.clientY-i.top))/i.height;r=Math.min(1,Math.max(0,r)),t.setVolume(r)}a(!0),u(e)}updateVideoState(){this.volume=this.videoElement.volume,this.muted=this.videoElement.muted,g.call(this)}}function g(){const e=this.muted?0:this.volume;this.ui.handler.style.bottom=100*e+"%",this.ui.volumeProgress.style.height=100*e+"%",[{cssClass:"ima-sound--loud",volumeMin:.64,volumeMax:1},{cssClass:"ima-sound--medium",volumeMin:.33,volumeMax:.64},{cssClass:"ima-sound--low",volumeMin:0,volumeMax:.33},{cssClass:"ima-sound--muted",volumeMin:-1,volumeMax:0}].forEach((t=>{const n=e<=t.volumeMax&&e>t.volumeMin;l.toggleClass(this.ui.muteControl,t.cssClass,n)}))}function y(){return this.ui.volumeDiv=l.createElementWithClasses(["ima-control","ima-volume-div"]),l.appendChildren(this.ui.volumeDiv,[b.call(this),_.call(this)]),this.ui.volumeDiv}function _(){return this.ui.muteControl=l.createElementWithClasses(["ima-control","ima-sound"]),l.click(this.ui.muteControl,this.onAdMuteClick.bind(this)),this.ui.muteControl}function b(){return this.ui.volumeSlider=l.createElementWithClasses(["ima-volume-slider"]),this.ui.volumeProgress=l.createElementWithClasses(["ima-volume-progress"]),this.ui.volumeTrack=l.createElementWithClasses(["ima-volume-track"]),this.ui.handler=l.createElementWithClasses(["ima-volume-handler"]),l.appendChildren(this.ui.volumeTrack,[this.ui.volumeProgress,this.ui.handler]),this.ui.volumeSlider.appendChild(this.ui.volumeTrack),l.addEventListener(this.ui.volumeTrack,["pointerdown","touchstart","MSPointerDown","mousedown"],this.onVolumeTrackDown.bind(this)),this.ui.volumeSlider}class T{constructor(e,t){function n(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.createElementWithClasses(["ima-control"].concat(t))}this.videoEl=t,this.controlsContainer=n("ima-controls-div"),this.seekBarControl=function(){const e=document.createElement("div");return l.addClass(e,"ima-seek-bar-div"),e}(),this.progressBarControl=function(e){const t=document.createElement("div");return l.addClass(t,"ima-progress-div"),e.appendChild(t),t}(this.seekBarControl),this.playPauseControl=function(){const e=n("ima-play-pause-div");return l.click(e,this.onAdPlayPauseClick.bind(this)),e}.call(this),this.volumeControl=new v(t),this.countdownControl=n("ima-countdown-div"),l.appendChildren(this.controlsContainer,[this.seekBarControl,this.playPauseControl,this.volumeControl.el,this.countdownControl]),e.appendChild(this.controlsContainer),m.isSupported()&&(this.fullScreenControl=function(){const e=n("ima-fullscreen-div");return l.click(e,this.trigger.bind(this,"ima.fullscreen")),e}.call(this),this.controlsContainer.appendChild(this.fullScreenControl)),l.addEventListener(this.volumeControl.el,"ima.volume",))}updateVideoState(){this.volumeControl.updateVideoState(),w(this.volumeControl,this.adsManager)}init(e){this.adsManager=e,this.updateVideoState(),[google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.STARTED].forEach()),e.addEventListener(google.ima.AdEvent.Type.CLICK,this.onAdPlayPauseClick.bind(this)),e.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdStarted.bind(this)),e.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdComplete.bind(this)),e.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdComplete.bind(this)),e.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPlayStatusUpdated.bind(this,!1)),e.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdPlayStatusUpdated.bind(this,!0))}onAdPlayPauseClick(){let e=!l.hasClass(this.playPauseControl,"ima-play");this.adsManager&&this.adsManager[e?"pause":"resume"](),this.trigger(e?"pause":"play")}onAdPlayStatusUpdateonAdStarted(e){var t=e.getAd();this.currentAd=t,t.isLinear()&&(this.adTrackingTimer=setInterval(this.onAdPlayheadTrackerInterval.bind(this),250))}onAdPlayheadTrackerInterval(){var e=this.adsManager.getRemainingTime(),t=this.currentAd.getDuration(),n=t-e;n=n>0?n:0;var i=Math.floor(e/60),r=Math.floor(e%60);r.toString().length<2&&(r="0"+r),this.countdownControl.innerHTML="Advertisement "+i+":"+r;var o=n/t*100;this.progressBarControl.style.width=o+"%"}onFullscreenChangonAdComplete(){this.adsManager=null,this.currentAd=null,this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.progressBarControl.style.width="0%"lass S{constructor(e,t,n){let i=t.adContainerDiv;function r(e){let t=new window.google.ima.AdsLoader(e);t.addEventListener(window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,o.bind(this),!1),t.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,u.bind(this),!1);var n=t.getSettings();return n.setLocale("en"),videojs&&(n.setPlayerType("videojs"),n.setPlayerVersion(videojs.version)),this._settings.vpaidEnabled?n.setVpaidMode(window.google.ima.ImaSdkSettings.VpaidMode.INSECURE):n.setVpaidMode(window.google.ima.ImaSdkSettings.VpaidMode.DISABLED),n.setAutoPlayAdBreaks(!0),t}function o(e){var t=new window.google.ima.AdsRenderingSettings;t.loadVideoTimeout=this._settings.adCancelTimeout||15e3,t.restoreCustomPlaybackStateOnAdBreakComplete=!0;var n=e.getAdsManager(this.videoEl,t);this.adsManager=n,this.controlBar.init(n);const i={partnerCode:"mailonlinemetrojs782989987491",viewMode:window.google.ima.ViewMode.NORMAL,slicer1:"%esid!",slicer2:"%epid!"};(function(e,t,n){if(!1===t.hasOwnProperty("partnerCode"))return!1;var i=window.location.protocol,r="https:"===i?"z":"js",o=document.createElement("script");n=n||e&&(void 0!==e.O?e.O.parentNode:document.body)||document.body;var s=[],a={adsManager:e,ids:t,imaSDK:!0,events:[]},l={complete:"AdVideoComplete",firstquartile:"AdVideoFirstQuartile",impression:"AdImpression",loaded:"AdLoaded",midpoint:"AdVideoMidpoint",pause:"AdPaused",skip:"AdSkipped",start:"AdVideoStart",thirdquartile:"AdVideoThirdQuartile",volumeChange:"AdVolumeChange"};if(google&&google.ima&&e){var u,d="_moatApi"+Math.floor(1e8*Math.random());for(u in google.ima.AdEvent.Type){var c;e.addEventListener(google.ima.AdEvent.Type[u],c),s.push({type:google.ima.AdEvent.Type[u],func:c})}}d=void 0!==d?d:"",window[d]=a,n&&n.appendChild(o),o.src=i+"//"+r+".moatads.com/"+t.partnerCode+"/moatvideo.js#"+d})(this.adsManager,i,this.adContainerDiv),n.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,u.bind(this)),n.addEventListener(window.google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,d.bind(this)),n.addEventListener(window.google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,c.bind(this)),n.addEventListener(window.google.ima.AdEvent.Type.ALL_ADS_COMPLETED,h.bind(this)),n.addEventListener(window.google.ima.AdEvent.Type.LOADED,h.bind(this)),n.addEventListener(window.google.ima.AdEvent.Type.STARTED,h.bind(this)),n.addEventListener(window.google.ima.AdEvent.Type.COMPLETE,h.bind(this)),n.addEventListener(window.google.ima.AdEvent.Type.AD_PROGRESS,s.bind(this)),n.addEventListener(window.google.ima.AdEvent.Type.IMPRESSION,a.bind(this));try{let e=l.getDimension(this.videoEl);n.init(e.width,e.height,window.google.ima.ViewMode.NORMAL),n.start()}catch(e){this.handleImaError(e)}}function s(e){n.adData=e.getAdData(),n.trigger({type:"timeupdate",evt:e})}function a(e){const t=e.getAd();n.trigger({type:"ima.adImpression",evt:t}),n.trigger({type:"videoAd.impression",evt:t}),window.top.postMessage({id:n.id_,sender:"metro-html5-player",type:"ima.adImpression",payload:{options:n.options_,adImpression:t}},"*")}function u(e){this.handleImaError(e.getError())}function d(){const e=this.videoEl,t=this.adContainerDiv;l.removeClass(t,"ima-ad-loading"),l.addClass(t,"ima-ad-playing"),l.dispatchEvent(e,E("ima.adStart")),this.toogleResize(!0)}function c(){l.removeClass(this.adContainerDiv,"ima-ad-playing"),l.dispatchEvent(this.videoEl,E("ima.adEnd")),window.top.postMessage({id:n.id_,sender:"metro-html5-player",type:"ima.adEnd",payload:{options:n.options_}},"*")}function h(e){var t=e.getAd();switch(e.type){case window.google.ima.AdEvent.Type.LOADED:t.isLinear()||this.videoEl.play();case window.google.ima.AdEvent.Type.STARTED:case window.google.ima.AdEvent.Type.COMPLETE:}}(e,i),function(e){var t=document.createElement("div");l.addClass(t,"ima-loading-spinner"),l.addClass(e,"ima-ad-container"),l.prependChild(e,t)}(i),this._isLoaded=!1,this.videoEl=e,this.player=n,this._settings=t,this._isFullscreen=!1,this.adContainerDiv=i,this.controlBar=new T(i,e),this.resizeAd=this.resizeAd.bind(this),this.unregisterResizeAd=this.toogleResize.bind(this,!1),this.init(),this.imaPromise&&this.imaPromise.then((()=>{window.google&&(this.adDisplayContainer=new window.google.ima.AdDisplayContainer(this.adContainerDiv,this.videoEl),this.adsLoader=r.call(this,this.adDisplayContainer))}))}init(){return this.imaPromise=c.load().then()).catch(this.handleImaError.bind(this)),this.imaPromise}toogleResize(e){[{target:window,name:"resize",handler:this.resizeAd},{target:this.videoEl,name:"ima.adEnd",handler:this.unregisterResizeAd},{target:this.videoEl,name:"ima.adsError",handler:this.unregisterResizeAd}].forEach((t=>{t.target&&l.toggleEventListener(t.target,t.name,t.handler,e)}))}handleImaError(e){this.reset(),l.dispatchEvent(this.videoEl,function(e){let t=E("ima.adsError");return t.error=e,t}(e))}reset(){this.adsLoader&&this.adsLoader.contentComplete(),this.adsManager&&(this.unregisterResizeAd(),this.controlBar.reset(),this.adsManager.destroy(),this.adsManager=null),l.removeClass(this.adContainerDiv,"ima-ad-playing"),l.removeClass(this.adContainerDiv,"ima-ad-loading")}resume(){this.adsManager&&this.adsManager.resume()resizeAd(e){if(!this.adsManager)return;this._isFullscreen=void 0===e?this._isFullscreen:e,this.controlBar.onFullscreenChange(this._isFullscreen);let t=l.getDimension(this.videoEl);this.adsManager.resize(t.width,t.height,window.google.ima.ViewMode[this._isFullscreen?"FULLSCREEN":"NORMAL"])}requestAd(e){var t=this;function n(){let t=this.videoEl,n=this.adsLoader,i=l.getDimension(t);const r=this.player.muted();if(.call(this))return console.log("Ima Class Error: Tried to request an ad but the IMA SDK was not ready"),void l.dispatchEvent(t,E("ima.adsCancel"));try{l.addClass(this.adContainerDiv,"ima-ad-loading");const t=function(e,t,n){var i=new window.google.ima.AdsRequest;return i.adTagUrl=t,i.linearAdSlotWidth=e.width,i.linearAdSlotHeight=e.height,i.nonLinearAdSlotWidth=e.width,i.nonLinearAdSlotHeight=e.height,i.setAdWillAutoPlay(n),i.setAdWillPlayMuted(n),i}(i,e,r);n.requestAds(t)}catch(e){this.handleImaError(e)}}this.imaPromise.then((()=>{n.call(this,e),this.adDisplayContainer.initialize()})),setTimeout((()=>{if(!t._isLoaded){const e="Ima Class Error: Tried to request an ad but the IMA SDK was not loaded";throw console.log(e),l.dispatchEvent(t.videoEl,E("ima.adsCancel")),new Error(e)}}),500)}var x=n(9475);videojs.registerPlugin("ima",(function(e){var t,n,i;const r=this,o=r.el().querySelector(".vjs-tech");let s,a=!0,l=!1,u=[];if(!c.isSupported())return;if(!o||"VIDEO"!==o.nodeName)return;o.autoplay=!1,o.pause(),function(e){var t=e.play;e.play=function(){return l?(s&&s.resume(),e.trigger("play")):a?(a=!1,e.trigger("ima.firstPlay")):t.apply(this,arguments),this};var n=e.pause;e.pause=function(){return l?(s&&s.pause(),e.trigger("pause")):n.apply(this,arguments),this}}(r),s=new S(o,e,r),r.on("ima.firstPlay",(function(){if(function(e){return"object"===e.el().querySelector(".vjs-tech").tagName.toLowerCase()}(r))return r.trigger("ima.adsCancel");if(!e.adsEnabled)return r.trigger("ima.adsCancel");const t=x.Z.getDFPUrl(r,e.adSetupOpts,e.adContainerDiv);Promise.resolve(t).then((e=>{l=!0,s.requestAd(e),r.addClass("ima-ad-playing")})).catch((e=>{l=!1}))}));const d=(null===(t=window.adverts)||void 0===t||null===(n=t.config)||void 0===n||null===(i=n.chromeless)||void 0===i?void 0:i.midroll)||{};function h(){l=!1,r.removeClass("ima-ad-playing"),r.play()}r.isChromeless&&d.enabled&&r.on("timeupdate",(function(){const{minDuration:t}=d,n=Math.round(this.currentTime()),i=(parseInt(t)||1/0)<r.duration();if(u.includes(n)&&i){o.autoplay=!1,o.pause();const t=Object.assign({},e.adSetupOpts,{adUnitPos:"midroll"}),i=x.Z.getDFPUrl(r,t,e.adContainerDiv);Promise.resolve(i).then((e=>{l=!0,s.requestAd(e),r.addClass("ima-ad-playing")})).catch()),u.splice(u.indexOf(n),1)}})),r.on("ima.adEnd",h),r.on("ima.adsCancel",h),r.on("ima.adsError",)),r.on("ima.muted",(()=>{r.muted(!0)})),r.on("ima.non-muted",)),r.on("ima.volume",)),r.on("ima.fullscreen",)),r.on("fullscreenchange",(()=>{s.resizeAd(r.isFullscreen())})),r.on("resize",)),r.ima={reset:function(t){a=!0,l=!1,s.reset();const{intervals:n}=d;n&&(u=n.slice(0)),t.adsEnabled&&(e.adsEnabled=t.adsEnabled),t.adTagUrl&&(e.adTagUrl=t.adTagUrl),r.removeClass("ima-ad-playing")},enable:function(){e.adsEnabled=!0},disable:function(){e.adsEnabled=!1},isEnabled:function(){return e.adsEnabled},isPlayingAd:function(){return l}}}))},1478:function(e,t,n){"use strict";n.r(t);var i=n(4021),r=(n(8366),n(8171),n(4291)),o=n(1287),s=n(2834);n(8017),n(310),n(7218),videojs.getComponent("Component");var a=n(1344);const l=videojs.getComponent("Component");class u extends l{constructor(e,t){let n;for(super(e,t),n=0;n<t.videos.length;n++)this.addChild(new a.Z(e,{video:t.videos[n]}))}createEl(){return super.createEl("div",{className:"mol-related-videos-video-list"})}}videojs.getComponent("Component"),videojs.getComponent("Component");const d=videojs.getComponent("Component");class c extends dcreateEl(){return super.createEl("h3",{innerHTML:"More videos"})}}class h extends d{constructor(e,t){super(e,t);let n=new c(e);this.addChild(n),this.addChild(new u(e,{videos:t.videos.slice(0,13)}))}createEl(){return super.createEl("div",{className:"mol-related-videos-panel mol-related-videos-panel-ended"})}}const p=videojs.getComponent("Component");class f extends p{constructor(e,t){super(e,t);let n=new o.Z(e),i=new s.Z(e);n.addChild(i),i.addChild(new h(e,{videos:t.videos})),this.addChild(n)}videojs.registerPlugin("related-videos",(function(e){let t=this;const n=t.options_.linkBaseOrigin+"/wp-json/videos/";let o,s=n+t.options_.id+"/recommended/",a=(0,i.Z)(s)t.on("playerstate.enter.pauseStandby",(function(){l(),a.get((function(e,n){"pauseStandby"===t.playerState.getStateName()&&(o=new f(t,{videos:u(t.options_.id,n.videos)}),t.addChild(o))}),{params:{per_page:10,channel:(0,r.x)(e.channel),fields:"id,stillImage.hostUrl,thumbImage.hostUrl,headline,renditions,iOSRenditions,pageURL,adsEnabled,metroTags,metroVideoCategory"}})})),t.on("playerstate.leave.pauseStandby",l),t.on("playerstate.enter.standby",(function(){l(),a.get((function(e,n){"standby"===t.playerState.getStateName()&&(o=new f(t,{videos:u(t.options_.id,n.videos)}),t.addChild(o))}),{params:{per_page:10,channel:(0,r.x)(e.channel),fields:"id,stillImage.hostUrl,thumbImage.hostUrl,headline,renditions,iOSRenditions,pageURL,adsEnabled,metroTags,metroVideoCategory"}})})),t.on("playerstate.leave.standby",l),t.on("refresh",(function(){let e=n+t.options_.id+"/recommended/";a=(0,i.Z)(e)}));const u}))},1344:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});const i=videojs.getComponent("ClickableComponent");class r extends i{constructor(e,t){super(e,t),this.on("click",this.onClick),this.on("tap",this.onClick),this.el();e.on("resize",(function(){})),setTimeout((function(){}),10)}createEl(){let e=this.options_.video,t=this.player(),n=e.thumbImage.hostUrl||e.stillImage.hostUrl;n=n.replace(/^http:\/\/video\.metro/i,"https://videos.metro");let i,r=super.createEl("div",{className:"mol-related-videos-video",innerHTML:'<div class="video-thumbnail"><img src="'+n+'" /></div><div class="video-caption"><div class="aux-stadiometer"><h4>'+e.headline+"</h4></div></div>"});return i=t.isEmbedded?"autoplay-video-tile-embed":"autoplay-video-tile",r.setAttribute("data-track",i),r}onClick(){let e=this.options_,t=e.video,n=this.player();n.currentTime(0);const{isFBIA:i,isAMP:r}=n.options_;if(n.isEmbedded&&!r&&!i){let e="http://metro.co.uk/video/"+[t.pageURL.toLowerCase(),t.id].join("-")+"/";return window.open(e+"?ito=vjs-ap-link"),void n.trigger("autoplay-next-video-cancel")}e.updateAutoplayIndex&&(n.autoplayIndex=e.updateAutoplayIndex),n.trigger({type:"request-refresh",video:{src:t.renditions[0].url,title:t.headline,poster:t.stillImage.hostUrl,options:t},autoplay:!0})}}},9191:function(e,t,n){"use strict";n.r(t);var i=n(5879),r=n(8129);videojs.registerPlugin("refresh",(function(){let e=this;e.on("request-refresh",(function(t){let n=t.video,i=t.autoplay;r.Z.defer())})),e.on("reset-sources",(function(t){let n=t.video,o=t.autoplay;if(!n.src)return void console.log("[metro-html5-player] No video src",n);e.playingRecommendedVideo=!0,e.autoplay(!1),e.pause(),e.src(n.src),e.src();const s=n.linkBaseURL?n.linkBaseURL:"https://metro.co.uk/video/".concat(n.options.pageURL.toLowerCase(),"-").concat(n.options.id,"/"),a="https://metro.co.uk/video/embed/".concat(n.options.id,"/");var l;e.options_.linkBaseURL=s,e.renditions=n.options.renditions,e.iOSRenditions=n.options.iOSRenditions,e.poster(n.poster),e.options_.title=n.title,e.options_.poster=n.poster,Object.assign(e.options_,(delete(l=n.options||{}).isMobile,l)),e.socials=e.socials||{},e.socials.linkUrl=s,e.socials.embedUrl=a;const u=e.getChild("controlBar").getChild("SocialControls");if(u){u.removeChild("ShareDetailWrapper");const t=new i.A(e);u.addChild(t)}r.Z.defer((function(){e.trigger("reset")})),e.on("reset",(function(){o&&r.Z.defer((function(){e.play()}))}))})),e.resetVideo}))},4850:function(){videojs.registerPlugin("social-share",(function(e){let t=this,n={linkUrl:e.linkUrl||"",embedUrl:e.embedUrl||"",nonEmbeddable:e.nonEmbeddable||!1,embedSnippet:function(){let e=t.socials.embedUrl||n.embedUrl;return e?"<textarea id='copyToClipboard' rows='4'><iframe src=\"".concat(e,'" title="Metro Embed Video Player" width="540" height="353" scrolling="no" frameborder="0" allowfullscreen></iframe></textarea>'):""}};t.socials=n}))},999:function(e,t,n){"use strict";n.r(t);var i=n(8171),r=n(8366);videojs.registerPlugin("sources",(function(e){!function(e){if(!e||!e.renditions||!e.renditions.length)throw new Error('Metro Video Player Error: "sources" plugin missing sources array')}(e);let t=this,n=r.Z.getDimension(t.el()).width;function o(){if(i.Z.isIDevice()?t.renditions=function(){let n=[];e.iOSRenditions&&e.iOSRenditions.length&&(n=a(e.iOSRenditions),n=u(n)),t.iOSRenditions&&(n=a(t.iOSRenditions),n=u(n));let i=s();return n.concat(i)}():t.renditions=s(),t.renditions.length>0){let e=t.renditions.filter());e.length<1&&(e=t.renditions),t.changeRendition(e[0])}}function s(){let n;return n=t.renditions?a(t.renditions):a(e.renditions),u(n)}function a(e){return e.map((function(e){return{id:e.id,src:e.url,type:e.type||l(e.url),width:e.frameWidth,height:e.frameHeight,videoContainer:e.videoContainer,bitrate:e.encodingRate,videoCodec:e.videoCodec,duration:e.duration}}))}function l(e){let t=e.match(/\.([^.\/\?]+)(\?[^\/]+)?$/i),n=t&&t[1];return{ogv:"video/ogg",webm:"video/webm",flv:"video/x-flv",mp4:"video/mp4",m4v:"video/mp4",m3u8:"application/x-mpegURL",ts:"video/MP2T","3gp":"video/3gpp",mov:"video/quicktime",avi:"video/x-msvideo",wmv:"video/x-ms-wmv"}[n]||"video/"+n}function u(e){return e.sort())}t.ready(o),t.on("refresh",o),t.changeRendition=function(e,n,r){let o=n||function(e){return{currentTime:e.currentTime(),playing:!e.paused()}}(t);o.playing&&t.pause(),t.src(e),function(e,t){let n=t.duration/1e3,i=e.controlBar&&e.controlBar.timerControls&&e.controlBar.timerControls.durationDisplay;n>0&&i&&(e.duration(n),i.updateContent())}(t,e),function(e,t,n){t.playing&&(e.load(),e.play()),e.one("loadeddata",(function(){e.currentTime(t.currentTime),i.Z.isFunction(n)&&n()}))}(t,o,r)}}))},893:function(e,t,n){"use strict";n.r(t);var i=n(8366);const r=videojs.getComponent("Component");class o extends r{constructor(e,t){super(e,t);let n=e.el_,r=this.el_;setTimeout(),0)}createEl(){let e=this.options_.text,t=this.player_;t.el_.parentNode&&i.Z.hasClass(t.el_.parentNode,"vjs-span-one-col")&&function(e){(e)?i.Z.addClass(t.el_.parentNode,"vjs-one-col-title-single"):i.Z.addClass(t.el_.parentNode,"vjs-one-col-title-multi")}(e);let n=super.createEl("div",{className:"vjs-title"});return n.appendChild(super.createEl("span",{innerHTML:e})),n}}videojs.registerPlugin("title",(function(){let e=this;function t(){let t=e.options_;e.titleChild&&(e.removeChild(e.titleChild),e.titleChild.dispose(),delete e.titleChild),t.title&&(e.titleChild=e.addChild(new o(e,{text:t.title})))}t(),e.on("refresh",t)}))},7852:function(e,t,n){"use strict";n.r(t);var i=n(4147),r=JSON.parse('{"dimension1":"renderPlatform","dimension3":"authorName","dimension4":"contentType","dimension5":"articleId","dimension6":"channel","dimension7":"articleTitle","dimension8":"publishedDate","dimension9":"domain","dimension10":"sponsorName","dimension11":"articleAge","dimension12":"wordCount","dimension13":"publishedHour","dimension14":"subChannel","dimension17":"gdprStatus","dimension18":"galleryImageAction","dimension19":"galleryImageSwipeCount","dimension20":"galleryImageId","dimension21":"userAgent","dimension22":"pageUrl","dimension23":"internalSearchTerms","dimension24":"referrer","dimension25":"icoInternalHit","dimension26":"icoInternalSession","dimension27":"videoDuration","dimension28":"videoPlayerVersion","dimension29":"videoChannelArticleId","dimension30":"videoPlayerType","dimension31":"videoModule","dimension32":"videoAdsEnabled","dimension33":"videoInternalId","dimension34":"videoTitle","dimension35":"videoExternalId","dimension36":"userLocalServerDate","dimension37":"pageContainsVideoPlayerTypes","dimension38":"clientId","dimension40":"itoExternalHit","dimension41":"itoExternalSession","dimension44":"previousPagename","dimension45":"windowsPushStatus","dimension46":"referringUrl","dimension47":"windowsPushCriteriaString","dimension48":"webPushCampaignId","dimension49":"webPushStatus","dimension50":"bundleVersions","dimension51":"adBlockerEnabled","dimension67":"topics","dimension90":"videoTopics","dimension98":"referringDomain","dimension101":"multivariantExperiments","dimension112":"openwebEnabled","metric1":"internalSearchIncrease","metric2":"articleViewIncrease","metric3":"autoRefreshIncrease","metric4":"imageViewIncrease","metric5":"videoViewIncrease","metric7":"video25Increase","metric8":"video50Increase","metric9":"videoCompleteIncrease","metric10":"videoAdvertStartIncrease","metric11":"socialShareClicksIncrease"}');n.g.metro.ga4props=n.g.metro.ga4props||{},videojs.registerPlugin("ga4Events",(function(e){var t;const o=(e,t)=>{window.gtag&&(void 0!==r[e]&&t?metro.ga4props[r[e]]=t:delete metro.ga4props[r[e]])},s=this,{isFBIA:a,isStreaming:l}=s.options_;if(null!==(t=s.options_)&&void 0!==t&&t.plugins.chromeless)return;s.on("dispose",(function(){m("aborted")}));let u=0,d=0;s.on("timeupdate",(function(){u=d,d=s.currentTime()}));const c=()=>{m("advert start")},h=()=>{m("advert complete")};function p(){var e;return null!==(e=s.options_)&&void 0!==e&&e.isAutoplay||s.playingRecommendedVideo?"autoplay":"click"}s.on("playerstate.enter.started",(async()=>{s.playingRecommendedVideo?m("stream continuous play"):m("stream started"),s.one("playerstate.enter.adPlaying",c),s.one("playerstate.enter.adEnded",h),s.one("playerstate.enter.contentPlaying",(()=>{s.off("playerstate.enter.adPlaying",c),s.off("playerstate.enter.adEnded",h),m("content start"),l||(s.one("playerstate.progress.enter.25",(()=>{m("25%")})),s.one("playerstate.progress.enter.50",(()=>{m("50%")})),s.one("playerstate.enter.ended",(()=>{m("complete")})))}))}));const f={"stream started":"e_videostreamstarted","content start":"e_videocontentstart","stream continuous play":"e_videostreamcontinuousplay","25%":"e_video25","50%":"e_video50",complete:"e_videocomplete","advert complete":"e_videoadvertcomplete","advert start":"e_videoadvertstart"};function m(t){(function(){var t,r;const u=s.duration();if(u){const e=new Date(1e3*u).toISOString().substr(11,8);o("dimension27",e)}o("dimension5",(null===(t=n.g.metro)||void 0===t||null===(r=t.pageData)||void 0===r?void 0:r.postId)||"video not embedded within the article"),o("dimension28",i.i8),o("dimension29",metro.pageData.topCategory||""),o("dimension30",function(){let t;return t=l?"liveStreamVideoPlayer":a?"fbiaembedded":e.sponsored?"commercialVideoPlayer":s.isEmbedded?s.playingRecommendedVideo?"video_embedded_inline_related_offsite":"video_embedded_inline_offsite":s.isChromeless?"metro.chromeless":null!=s&&s.el_.closest(".metro-portrait-video-carousel")?"portrait_video_carousel":s.playingRecommendedVideo?"video_article_inline_related":"video_article_inline",t}()),o("dimension32",s.options_.adsEnabled?"true":"false"),o("dimension33",s.options_.id),o("dimension34",(s.options_.title||s.options_.headline).toLowerCase()),o("dimension90",s.options_.metroTags||""),o("event_category","video"),o("event_label",p())})(),void 0!==f[t]&&window.gtag("event",f[t],{...metro.ga4props,send_to:["G-NXG4EG54ZW"],playMethod:p()})}}))},8841:function(e,t,n){"use strict";n.r(t);var i=n(4147);videojs.registerPlugin("gaEvents",(function(e){var t;const r=this,{isFBIA:o,isStreaming:s}=r.options_;if(null!==(t=r.options_)&&void 0!==t&&t.plugins.chromeless)return;r.on("dispose",));let a=0,l=0;r.on("timeupdate",(function(){a=l,l=r.currentTime()}));const u=()=>{h("advert start")},d=()=>{h("advert complete")};r.on("playerstate.enter.started",(async()=>{r.playingRecommendedVideo?h("stream continuous play"):h("stream started"),r.one("playerstate.enter.adPlaying",u),r.one("playerstate.enter.adEnded",d),r.one("playerstate.enter.contentPlaying",(()=>{r.off("playerstate.enter.adPlaying",u),r.off("playerstate.enter.adEnded",d),h("content start"),s||(r.one("playerstate.progress.enter.25",(()=>{h("25%")})),r.one("playerstate.progress.enter.50",(()=>{h("50%")})),r.one("playerstate.enter.ended",)))}))}));const c={"stream started":"metric5","stream continuous play":"metric5","25%":"metric7","50%":"metric8",complete:"metric9","advert start":"metric10"};function h(t){var a;let l=function(){var t,a;let l={};const u=r.duration();if(u){const e=new Date(1e3*u).toISOString().substr(11,8);l.dimension27=e}return l.dimension5=(null===(t=n.g.metro)||void 0===t||null===(a=t.pageData)||void 0===a?void 0:a.postId)||"video not embedded within the article",l.dimension28=i.i8,l.dimension29=metro.pageData.topCategory||"",l.dimension30=function(){let t;return t=s?"liveStreamVideoPlayer":o?"fbiaembedded":e.sponsored?"commercialVideoPlayer":r.isEmbedded?r.playingRecommendedVideo?"video_embedded_inline_related_offsite":"video_embedded_inline_offsite":r.isChromeless?"metro.chromeless":null!=r&&r.el_.closest(".metro-portrait-video-carousel")?"portrait_video_carousel":r.playingRecommendedVideo?"video_article_inline_related":"video_article_inline",t}(),l.dimension32=r.options_.adsEnabled?"true":"false",l.dimension33=r.options_.id,l.dimension34=(r.options_.title||r.options_.headline).toLowerCase(),l.dimension90=r.options_.metroTags||"",l}();l.event_category="video",l.event_label=null!==(a=r.options_)&&void 0!==a&&a.isAutoplay||r.playingRecommendedVideo?"autoplay":"click";const u=c[t]?{[c[t]]:1}:{};if(void 0===window.dataLayer){const e=document.createElement("script");e.src="https://www.googletagmanager.com/gtag/js?id=UA-3639451-12",document.head.appendChild(e),window.dataLayer=window.dataLayer||[],window.gtag,window.gtag("js",new Date)}window.gtag("config","UA-3639451-12",{send_page_view:!1}),window.gtag&&window.gtag("event",t,Object.assign({},l,u,{send_to:["UA-3639451-12"]}))}}))},7865:function(){videojs.registerPlugin("rtaTracking",(function(e){const t=this,{isFBIA:n}=t.options_;let i=0,r=0,o=null;if(t.on("timeupdate",(function(){i=r,r=t.currentTime()})),t.options_.isStreaming){let e=0;t.on("timeupdate",(function(){r-e>30&&(e=r,l(a({action:"video.progress",percent:100,duration:r})))}))}function s(){let i;return i=t.options_.isStreaming?"liveStreamVideoPlayer":n?"fbiaembedded":e.sponsored?"commercialVideoPlayer":t.isEmbedded?"video_embedded_inline_offsite":t.isChromeless?"metro.chromeless":"video_article_inline",i}function a(e){var n;const i={initial:!t.playingRecommendedVideo,id:t.options_.id,percent:0,duration:0,module:s(),title:t.options_.title};return null!==(n=t.options_)&&void 0!==n&&n.metroVideoCategory&&(i.videoChannel=t.options_.metroVideoCategory.toLowerCase()),Object.assign({},i,e)}function l(e){e=e||{},metro.ted.tedEvent("video-event",e)}t.on("seeking",)),t.on("seeked",)),t.on("playerstate.enter.started",(()=>{l(a({action:"video.stream-started"})),t.one("playerstate.enter.adPlaying",(()=>{l(a({action:"video.advert-started"})),t.one("playerstate.enter.adEnded",))})),t.one("playerstate.enter.contentPlaying",(()=>{l(a({action:"video.content-started"})),t.one("playerstate.progress.enter.25",(()=>{l(a({action:"video.progress",percent:25,duration:t.currentTime()}))})),t.one("playerstate.progress.enter.50",(()=>{l(a({action:"video.progress",percent:50,duration:t.currentTime()}))})),t.one("playerstate.enter.ended",(()=>{l(a({action:"video.content-completed",percent:100,duration:t.currentTime()}))}))}))}))}))},2609:function(){videojs.plugin("video-starts",(function(e){const t=this;t.videoStarts="number"==typeof e.videoStarts?e.videoStarts:1,t.on("request-refresh",))}))},8129:function(e,t,n){"use strict";var i=n(8171),r={defer,iterator,waterfall:function(e,t){if(t=t||function(){},!i.Z.isArray(e)){var n=new Error("First argument to waterfall must be an array of functions");return t(n)}if(!e.length)return t();var o;o(r.iterator(e))()},when:function(e,t){if(!i.Z.isFunction(t))throw new Error("async.when error: missing callback argument");var n=i.Z.isFunction(e)?e;return function(){var e=i.Z.arrayLikeObjToArray(arguments),r=e.pop();return n.apply(null,e)?t.apply(this,arguments):(e.unshift(null),r.apply(null,e))}}};t.Z=r},4021:function(e,t,n){"use strict";var i=n(8129),r=n(3417),o=n(3018),s=n(8171);t.Z=function(e,t){t=t||"get";var n=[];return e||(e=null),{get:function(a,l){if(function(e){if(!s.Z.isFunction(e))throw new Error("dataSource Error: on get method, missing callback")}(a),n.push(a),s.Z.isString(e))return function(e){var i=e;n.length>1||r.ZP[t](o.Z.appendGeolocation(i),(function(t,n){if(t)return u(t,null);try{return u(null,e="object"==typeof n?n:JSON.parse(n))}catch(t){return e=i,u(t,null)}}),l)}(e);function u(e,t){n.forEach((function(n){i.Z.defer())})),n.length=0}u(null,e)}}}},8366:function(e,t,n){"use strict";var i=n(8171),r={isVisible,isHidden,isShown,hide,show,hasClass:function(e,t){var n,r,o;if(i.Z.isNotEmptyString(t)){if(e.classList)return e.classList.contains(t);for(t=t||"",r=0,o=(n=i.Z.isString(e.getAttribute("class"))?e.getAttribute("class").split(/\s+/):[]).length;r<o;r+=1)if(n[r]===t)return!0}return!1},addClass:function(e,t){var n;if(i.Z.isNotEmptyString(t)){if(e.classList)return e.classList.add(t);n=i.Z.isString(e.getAttribute("class"))?e.getAttribute("class").split(/\s+/):[],i.Z.isString(t)&&i.Z.isNotEmptyString(t.replace(/\s+/,""))&&(n.push(t),e.setAttribute("class",n.join(" ")))}},removeClass:function(e,t){var n;if(i.Z.isNotEmptyString(t)){if(e.classList)return e.classList.remove(t);n=i.Z.isString(e.getAttribute("class"))?e.getAttribute("class").split(/\s+/):[];var r,o,s=[];if(i.Z.isString(t)&&i.Z.isNotEmptyString(t.replace(/\s+/,""))){for(r=0,o=n.length;r<o;r+=1)t!==n[r]&&s.push(n[r]);e.setAttribute("class",s.join(" "))}}},addEventListener:function(e,t,n){i.Z.isArray(e)?i.Z.forEach(e,(function(e){r.addEventListener(e,t,n)})):i.Z.isArray(t)?i.Z.forEach(t,(function(t){r.addEventListener(e,t,n)})):e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},removeEventListener:function(e,t,n){i.Z.isArray(e)?i.Z.forEach(e,(function(e){r.removeEventListener(e,t,n)})):i.Z.isArray(t)?i.Z.forEach(t,)):e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},dispatchEvent,isDescendant,getTextContent,prependChild,remove,isDomElement,click,find,once,getPosition:function(e){var t;if(e.getBoundingClientRect)return{left:(t=e.getBoundingClientRect()).left,top:t.top,bottom:t.bottom,right:t.right};for(var n=0,i=0,r=e.offsetWidth,o=e.offsetHeight;e;)n+=e.offsetLeft-e.scrollLeft+e.clientLeft,i+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return{left:n,top:i,bottom:i+o,right:n+r}},elementPositionInViewport,isElementInViewport,getUrlParts,getDimension:function(e){var t;return!i.Z.isOldIE()&&e.getBoundingClientRect?{width:(t=e.getBoundingClientRect()).width,height:t.height}:{width:e.offsetWidth,height:e.offsetHeight}}};t.Z=r},4291:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});const i=e=>({tvshowbiz:"TV"}[e]||e||"")},3417:function(e,t,n){"use strict";var i=n(3018),r=n(8171)function s(e){if(!r.Z.isFunction(e))throw new o("Missing XMLHttpRequest factory method");this.createXhr=e}o.prototype=new Error,o.prototype.name="HttpRequest Error",s.prototype.run=function(e,t,n,s){var a,l;!function(e,t,n){if(!r.Z.isString(e)||r.Z.isEmptyString(e))throw new o("Invalid url '"+e+"'");if(!r.Z.isFunction(t))throw new o("Invalid handler '"+t+"' for the http request");if(r.Z.isDefined(n)&&!r.Z.isObject(n))throw new o("Invalid options map '"+n+"'")}(t,n,s);var u=this.createXhr()s=s||{},a=r.Z.isNumber(s.timeout)?s.timeout:0,u.open(e,i.Z.urlParts(t).href,!0),s.headers&&function(e,t){r.Z.forEach(t,(function(t,n){r.Z.isDefined(t)&&e.setRequestHeader(n,t)}))}(u,s.headers),s.withCredentials&&(u.withCredentials=!0),u.onload=function(){var e,t,i;u.getAllResponseHeaders||(u.getAllResponseHeaders=function(){return null}),u.status||(u.status=200),r.Z.isDefined(l)&&(clearTimeout(l),l=void 0),e=u.statusText||"",t="response"in u?u.response:u.responseText,i=1223===u.status?204:u.status,n(i,t,u.getAllResponseHeaders(),e)},u.onerror=d,u.onabort=d,u.send(),a>0&&(l=setTimeout(),a))},s.prototype.get=function(e,t,n){n&&n.params&&(e+="?"+Object.keys(n.params).map()).join("&")),this.run("GET",e,),n)},s.prototype.getJSON=function(e,t,n){this.get(e,(function(e,n,i,r,o){if(e)t(e,n,i,r,o);else try{var s=JSON.parse(n);t(null,s,i,r,o)}catch(e){t(new Error("response is not a valid json"),n,i,r,o)}}),n)},s.prototype.getJSONP=function(e,t,n,i){var r=!1;i=i||3e3;var o="cb";setTimeout((function(){r||(t("JSONP request timed up (or returned an error)"),delete window[o])}),i),window[o]=function(e){r=!0,t(null,e),delete window[o]};var s=document.createElement("script");s.src=e+"?callback="+o,document.head.appendChild(s)},t.ZP=new s((function(){var e=new XMLHttpRequest;return"withCredentials"in e||(e=new XDomainRequest),e}))},9274:function(e,t){"use strict";var n={};function i(e){var t,i,r,o=e||window.navigator,s=o.appVersion,a=o.userAgent,l=o.appName,u=""+parseFloat(s),d=parseInt(u,10);-1!=(i=a.indexOf("Opera"))?(l="Opera",u=a.substring(i+6),-1!=(i=a.indexOf("Version"))&&(u=a.substring(i+8))):-1!=(i=a.indexOf("MSIE"))?(l="Microsoft Internet Explorer",u=a.substring(i+5)):-1!=(i=a.indexOf("Chrome"))?(l="Chrome",u=a.substring(i+7)):-1!=(i=a.indexOf("Safari"))?(l="Safari",u=a.substring(i+7),-1!=(i=a.indexOf("Version"))&&(u=a.substring(i+8))):-1!=(i=a.indexOf("Firefox"))?(l="Firefox",u=a.substring(i+8)):-1!=a.indexOf("Trident/")?(l="Microsoft Internet Explorer",u=a.substring(a.indexOf("rv:")+3)):(t=a.lastIndexOf(" ")+1)<(i=a.lastIndexOf("/"))&&(l=a.substring(t,i),u=a.substring(i+1),l.toLowerCase()==l.toUpperCase()&&(l=window.navigator.browser)),-1!=(r=u.indexOf(";"))&&(u=u.substring(0,r)),-1!=(r=u.indexOf(" "))&&(u=u.substring(0,r)),-1!=(r=u.indexOf(")"))&&(u=u.substring(0,r)),isNaN(d)&&(u=""+parseFloat(s),d=parseInt(s,10));var c=/Mobile|mini|Fennec|Android|iP(ad|od|hone)|Windows Phone/.test(s),h="-",p=[{s:"Windows 3.11",r:/Win16/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows ME",r:/Windows ME/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var f in p){var m=p[f];if(m.r.test(a)){h=m.s;break}}var v,g="-";switch(/Windows/.test(h)&&(g=(v=/Windows (.*)/.exec(h))?v[1]:"",h="Windows"),h){case"Mac OS X":g=(v=/Mac OS X (1[\.\_\d]+)/.exec(a))?v[1]:"";break;case"Android":g=(v=/Android ([\.\_\d]+)/.exec(a))?v[1]:"";break;case"iOS":g=(v=/OS (\d+)_(\d+)_?(\d+)?/.exec(s))?g[1]+"."+g[2]+"."+(g[3]||0):""}var y=parseInt(g.split(".")[0],10),_=!a.match(/Windows Phone/)&&a.match(/iPhone/);n.browser=l,n.browserVersion=u,n.browserMajorVersion=d,n.mobile=c,n.os=h,n.osVersion=g,n.osMajorVersion=y,n.isIPhone=_}i(),window.addEventListener("updateSystemInfo",)),t.Z=n},3018:function(e,t,n){"use strict";var i=n(8171),r=document.createElement("a"),o=document.documentMode,s={appendGeolocation,appendKeyToURL:function(e,t,n){var i,r;return i=/\?/.test(e)?"&":"?",i+=t+"="+encodeURIComponent(n.toString()),2===(r=e.split("#")).length?r[0]+i+"#"+r[1]:r[0]+i},objToQueryString:function(e){var t=[];return i.Z.forEach(e,)),t.join("&")},queryStringToObj:function(e,t){var n,r;return t=i.Z.isFunction(t)?t:function(){return!0},n=(e=e.trim().replace(/^\?/,"")).split("&"),r={},i.Z.forEach(n,)),r},urlParts:function(e){var t,n=e;return o&&(r.setAttribute("href",n),n=r.href,/(.*)\:(\d+)/.test(r.host)&&(t=r.host.split(":"),r.host=t[0],r.port=t[1])),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:i.Z.isNotEmptyString(r.port)?r.port:80,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}};t.Z=s},8171:function(e,t){"use strict";var n=/[A-Z]/g,i=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)+$/i,r=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/function s(e){return"object"==typeof e}function a(e){return"function"==typeof eonst d={_UA:navigator.userAgent,arrayLikeObjToArray,capitalize:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},debounce,decapitalize,echoFn,extend,forEach,getInternetExplorerVersion:function(e){var t=-1;if("Microsoft Internet Explorer"==e.appName){var n=e.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})").exec(n);null!==i&&(t=parseFloat(i[1]))}return t},isAndroid:function(){return/Android/.test(d._UA)},isArray:l,isArrayLike:function(e){if(null===e||d.isWindow(e)||d.isFunction(e)||d.isUndefined(e))return!1;var t=e.length;return!(1!==e.nodeType||!t)||d.isString(e)||d.isArray(e)||0===t||"number"==typeof t&&t>0&&t-1 in e},isDefined:function(e){return void 0!==e},isEmptyString,isFunction:a,isIDevice:function(){return/iP(hone|ad)/.test(d._UA)},isIPhone:function(){return/iP(hone|od)/.test(d._UA)},isISO8601,isMobile,isIframe,isMicrosoftBrowser,isNotEmptyString,isNull:o,isNodeList:function(e){var t=Object.prototype.toString.call(e);return"object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(t)&&"number"==typeof e.length&&(0===e.length||"object"==typeof e[0]&&e[0].nodeType>0)},isNumber:function(e){return"number"==typeof e},isObject:s,isOldIE,isString:u,isUndefined:function(e){return void 0===e},isValidEmail,isWindow:function(e){return d.isObject(e)&&e.window===e},noop:function(){},once,rotateRight:function(e,t){var n,i=[],r=e.length,o=t%r;for(n=0;n<r;n++)i.push(e[o]),o>=r-1?o=0:o++;return i},snakeCase,throttle:function(e,t){var n,i,r,o,s,a,l=d.debounce(),t);return function(){return n=this,i=arguments,r||(r=setTimeout(),t)),o?s=!0:(o=!0,a=e.apply(n,i)),l(),a}},toFixedDigits,transformArray,treeSearch};t.Z=d},2152,9691round" andr["__:"undndow.itle={};for(o in i)s[i[o]]=o;for(var a in r)i[a]>4,sapToVid=null("undefined"==typeof self?void 0===n.g?this:n.g:self)},3984:function(e,t,n){"use strict"e either a string, a function or a state object")}e.exports=function(e,t,n){var i,r,a,h,p,f,m=(n=n||{}).initialState||"ready",v=n.onTransition||functioni.length;r++)i[r].call(this,{type:e,state:t,event:n})}if(l(m),"function"==typeof e[y]&&(e={default:e}),e.timer)throw new Error(e+" the word 'timer' in the subjects map is reserved");e.timer=s(y,_);var T={};for(var w in t){h=w.split(/[\s,]+/);for(var S=0;S<h.length;S++)(p=(a=h[S]).a].timer,n[a].timer_time,n[a].timer_interval);break}}}(a,t[w],f),g.push([p[1],r]),f[y](p[1],r)}rift("ent;for(e=0reset=function(){clearTimeout(n),clearInterval(r)},a}},9399:function(e,t,n){"use strict";n(4889);tion(e){return"string"==typeof e||e 0,inref=UreplatLoc+nction(){i.VTTCue=a,i.VTTRegion=l},i.VTTCue||r.shim( ale:"center",end:"end",right:"end"},t.align)}(e,t)}o.prototype=r(Error.prototype),o.prototype.constructor=o,o.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{codfuncs(e)?this.values[e]:t[n]:this.has(e)?this.val i=0;i<non(e,t){/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var d=i.createElement&&i.createElement("textarea"),c={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},h={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"r.join(" ")}m.push(y[1]),u.appendChild(v),u=v}return l}var v=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,1266th;o++)if(g(o)}return r||o}(r,a);t.move(f.toCSS=t||this.div,e)e.hasOwnPrototype.formatStyle=function(e,t){return 0===e?0:e+t},b.prototype=r(_.bottom+=t;break;caseis.right>e.left&&this.toe.length;t++)if(thitom<=e.bottom&&this.left>=e.left& this.top<e.top;case"-y":return m)-Math.max(this.top,e.top))/(right-this.right,height|t,bottom:e.bott");return decodeURIComertCueToDOMTrer a=0;a<tdecoder=n||new TextDecoder("utf8"),this))thro="INITortOrThrowError(t)}TT.con invalid or illegalrrentElement.appendChid,p):i.errorHandler.error("locator&&(thior(u),c),c.entElement;i.tagNamement=i.parentNode},startPrefixMapping:function(e,t){uction(e,t);this.locor,n),l(this.doc.appendChild(i),this.locator&&o(this.locator,i)}},skippedEntity:function(e){},endDocumeocator:feComment(e);this.locator&&o(this.locator,i),l(this,i)},startCDATA:function(){thisype(e,t,n);this.locator&&o(this.locator,r),l(this,r)}},warning:function(e){conso){console.e)},fatalError:function(e){throw new h(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSg,(function(e){r.prototype[e]=function(){return null}}));var u=n(3791),d=n(8275),c=d.XMLReader,h=d.ParseError,p=n(9034).DOMImplementation;n(9034),t.a=i},9034: e&&console.error("unknow Class:"+e),i.constructor=e)}var r="http://www.w3.org/1999/xhtml",o={},s=o.ELEMENT_NODE=1,a=o.ATTRIBUTE_NODE=2,l=o.TEXT_NODE=3,u=o.CDATA_SECTION_NODE=4,d=o.ENTITY_REFERENCE_NODE=5,c=o.ENTITY_NODE=6,h=o.PROCESSING_INSTRUCTION_NODE=7,p=o.COMMENT_NODE=8,f=o.DOCUMENT_NODE=9,m=o.DOCUMENT_TYPE_NODE=10,v=o.DOCUMENT_FRAGMENT_NODE=11,g=o.NOTATION_NODE=12,y={},_={},b=(y.INDEX_SIZE_ERR=(_[1]="Index size error",1),y.DOMSTRING_SIZE_ERR=(_[2]="DOMString size error",2),y.HIERARCHY_REQUEST_ERR=(_[3]="Hierarchy request error",3)),T=(y.WRONG_DOCUMENT_ERR=(_[4]="Wrong document",4),y.INVALID_CHARACTER_ERR=(_[5]="Invalid character",5),y.NO_DATA_ALLOWED_ERR=(_[6]="No data allowed",6),y.NO_MODIFICATION_ALLOWED_ERR=(_[7]="No modification allowed",7),y.NOT_FOUND_ERR=(_[8]="Not found",8)),w=(y.NOT_SUPPORTED_ERR=(_[9]="Not supported",9turn n.code=esh(e._node);._featuresstChild)do{i),t.nodeType==v&&(t.firstChild=t.lastChild=null),t}function F(){this._nsMap={}}function V(){}function H(){}function q(){}function z(){}function W(){}function G(){}function X(){}fs=n[o];if(s.prefix==i)return s.namespace!=r}return!0}function ee(e,t,n,i,o){if(i){if(!(e=i(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case s:o||(o=[]),o.length;var c=e.attributes,g=c.length,y=e.firstChild,_=e.tagName;n=r===e.namespaceURI||n,t.push("<",_);for(var b=0;b<g;b++)"xmlns"==(T=c.item(b)).prefix?o.push({prefix:T.localName,namespace:T.value}):"xmlns"==T.nodeName&&o.push({prefix:"",namespace:T.value});for(b=0;b<g;b++){var T;if($(T=c.item(b),0,o)){var w=T.prefix||"",S=T.namespaceURI,E=w?" xmlns:"+w:" xmlns";t.push(E,'="',S,'"'),o.push({prefix:w,namespace:S})}ee(T,t,n,i,o)}if($(e,0,o)&&(w=e.prefix||"",S=e.namespaceURI,E=w?" xmlns:"+w:" xmlns",t.push(E,'="',S,'"'),o.push({prefix:w,namespace:S})),y||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(_)){if(t.push(">"),n&&/^script$/i.test(_))for(;y;)y.data?t.push(y.data):ee(y,t,n,i,o),y=y.nextSibling;else for(;y;)ee(y,t,n,i,o),y=y.nextSibling;t.push("</",_,">")}else t.push("/>");return;case f:case v:for(y=e.firstChild;y;)ee(y,t,n,i,o),y=y.nextSibling;return;case a:return t.push(" ",e.name,'="',e.value.replace(/[&"]/g,O),'"');case l:return t.push(e.data.replace(/[<&]/g,O).replace(/]]>/g,"]]&gt;"));case u:return t.push("<![CDATA[",e.data,"]]>");case p:return t.push("\x3c!--",e.data,"--\x3e");case m:var x=e.publicId,C=e.systemId;if(t.push("<!DOCTYPE ",e.name),x)t.push(" PUBLIC ",x),C&&"."!=C&&t.push(" ",C),t.push(">");else if(C&&"."!=C)t.push(" SYSTEM ",C,">");else{var k=e.internalSubset;k&&t.push(" [",k,"]"),t.push(">")}return;case h:return t.push("<?",e.target," ",e.data,"?>");case d:return t.pus,h=h.nextSibling;return i}function ie(e,t,n){e[t]=n}y.INVALID_STATE_ERR=(_[11]="Invalid state",11),y.SYNTAX_ERR=(_[12]="Syntax error",12),y.INVALID_MODIFICATION_ERR=(_[13]="Invalid modification",13),y.NAMESPACE_ERR=(_[14]="Invalid namespace",14),y.INVALID_ACCESS_ERR=(_[15]="Invalid access",15),S.protootype={lei<this.length;i++)},x.prototype.item=function(e){return C(this),this[e]},i(x,E),k.length;t--;){m(e.nodeName);rpaceURI,e.localNgetNamedItem(e);reamedItemNS(e,t).localName==t&&i.namespac._features[e.toar r=i.createElemenurn i.name=e,i.nodeName=e,i.publicId=t,i.systemId=n,i}},L.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,inseron(e,t){thisoveChild(t)}endChild:functhasChildNounction(e)veChild(t),eurn this.ownerAttributes:fu.nodeType==a?t.owne.nodeType==a?t.ownemespace:function(e){return null==this.lookupPrefix(e)}},n(o,L),n(o,L.prototype),N.prototype={nodeName:"#document",nodeType:fdocumentElemmentElementthis,e)},importdeType==s&&n.getAttribus&&t.test(i.geildNodes=new E,(t.attriew Z;return e.ownerDocument=this,e.childNodes=new E,e},createTextNode:function(e){var t=new q;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new z;return t.owt=new W;return t.ownerDocumement=this,n.tagN,t.name=e,t.nodeName=ear t=new K;retur],n.localName=i[1]ngth?(n.prefix=i[0],n.localName=i[1]):n.localute:function({var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e(e);n.value=n.nois.getAttribild=t,e.lastChild=t,R(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){retu:function(e){return e){return this.attetAttributeNodenction(e,t){ret n=this.getAttr,t);i.value=i.nodeVction(e,t){return thinodeType!=s||"*"!==e&&iceURI!==e||"*"!==t&&r.localName!=t||i.push(r)})),i}))}},N.prototype.getElementsByTagName=F.prototype.getElementsByTagName,N.prototype.getElementsByTagNameNS=F.prototype.getElementsByTagNameNS,i(F,L),V.prototypgData:functata+e,this.gth},insertDe,0,t)},app])},deleteDa(e+t),this.nodeValue=this.data=n,this.length=n.length}},i(He&&this.parentNode.insertBefore(i,this.nextSibling),i}},i(q,H),z.prototype={nodeName:"#comment",nodeType:p},i(z,H),W.prototype={nodeName:"#cdata-section",nodeType:u},i(W,H),G.prototype.nodeType=m,i(G,L),X.prototype.nodeType=g,i(X,L),Y.prototype.nodeType=c,i(Y,L),K.prototype.nodeType=d,i(K,L),Z.prototype.nodeName="#document-fragment",Z.prototype.nodeType=v,i(Z,L),Q.prototype.nodeType=h,i(Q,LSibling;return t.join("");default:return e.node"length",{get:function(){return C(this),this.$$length}}ototak;dee,this.nodeValue=e}}}),ie=function(e,t,nuo:"â€š",ldquo:"â€œ",rdquo:"â€",bdquo:"â€ž",dagger:"â€ ",Dagger:"â€¡",bull:"â€¢",hellip:"â€¦",permil:"â€°",prime:"â€²",Prime:"â€³",lsaquo:"â€¹",rsaquo:"â€º",oline:"â€¾",euro:"â‚¬",trade:"â„¢",larr:"â†",uarr:"â†‘",rarr:"â†’",darr:"â†“",harr:"â†”",crarr:"â†µ",lceil:"âŒˆ",rceil:"âŒ‰",lfloor:"âŒŠ",rfloor:"âŒ‹",loz:"â—Š",spades:"â™u=!1;s>3&&(/^public$/i.test(o[2][0])?(l=o[3][0],u=s>4&&o[4][0]):/^system$/i.test(o[2][0])&&(u=o[3][0]));var d=o[s-1];return n.startDTD(a,l,u),n.endDTD(),d.index+d[0].length}retu6)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(r.error("entity not found:"+e),e)}function h(t){if(t>S){var n=e.substring(S,t).replace(/&#?\w+;/g,s);b&&v(S),i.characters(n,0,t-S),S=t}}function v(t,n){for(;t>=y&&(n=_.exec(e));)g=n.index,y=g+n[0].length,b.lineNumber++;b.columnNumber=t-g+1}for(var g=0,y=0,_=/.*(?:\r\n?|\n)|.*$/g,b=i.locator,T=[{currentNSMap:t}],w={},S=0;;){try{var E=e.indexOf("<",S);if(E<0){if(!e.substr(S).match(/^\s*$/)){var x=i.doc,C=x.createTextNode(e.substr(S));x.appendChild(C),i.currentElement=C}return}switch(E>S&&h(E),e.charAt(E+1)){case"/":var k=e.indexOf(">",E+3),j=e.substring(E+2,k),A=T.pop();k<0?(j=e.substring(E+2).replace(/[\s<].*/,""),r.error("end tag name: "+j+" is not complete:"+A.tagName),k=E+1+j.length):j.match(/\s</)&&(j=j.replace(/[\s<].*/,""),r.error("end tag name: "+j+" maybe not complete"),k=E+1+j.length);var I=A.localNSMap,P=A.tagName==j;if(P||A.tagName&&A.tagName.toLowerCase()==j.toLowerCase()){if(i.endElement(A.uri,A.localName,j),I)for(var L in I)i.endPrefixMapping(L);P||r.fatalError("end tag name: "+j+" is not match the current start tagName:"+A.tagName)}else T.push(A);k++;break;case"?":b&&v(E),k=f(e,E,i);break;case"!":b&&v(E),k=p(e,E,i,r);break;default:b&&v(E);var O=new m,D=T[T.length-1].currentNSMap,N=(k=l(e,E,O,D,s,r),O.length);if(!O.closed&&c(e,k,O.tagName,w)&&(O.closed=!0,n.nbsp||r.warning("unclosed xml attribute")),b&&N){for(var M=a(b,{}),sh(O),i.l("element parse error: "+e),k=-1}k>S?S=k:h(Math.max(E,S)+1)}}(e,t,n,i,this.errorHandler),i.endDocument()}},m.prototype={setTagName:function(e){if(!r.test(e))throw new Error("invalid tagName:"+e);thi,n){if(!r.test(e))throw new Error("invalid attribute:},434.assigallexpo"1.1tion(eretuglobalThis)return globalThis;try{return this||new Function("return this")()}catch(e){i])}return e},o.apply(this,arguments)}function s(e){if(void 0===e)throw new Rflect.construct)return!1n&&t().location.href||"");var i="function"==typeof t().URL,r=/^\/\//.test(e),o=!t().location&&!/\/\//i.test(e);if(i?e=new(t().URL)(e,t().location||"http://example.com"):/\/\//i.test(e)||(e=_().buildAbsoluteURL(t().location&&t().location.href||"",e)),i){var s=new URL(n,e);return o?s.href.slice(18):r?s.href.slice(s.protocol.length):s.href}return _().buildAbsoluteURL(e,n)},T=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),th for(var r=int8Array(i.length),o=0;o<i.lero;rion(ee)<a&&(this.trigger("warn",{message:r+" clamping HOLD-BACK ("+t[o]+") to targetDuration * 3 ("+a+")"}),t[o]=a),i&&!t.hasOwnProperty(s)&&(t[s]=3*i,this.trigger("info",{message:r+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+t[s]+")."})),i&&t[s]<l&&(this.trigger("warn",{message:r+" clamping PART-HOLD-BACK ("+t[s]+")seStream);var n,i,r=s(t),a=[],l={},u=!1,d=function(){},c={AUDIO:{},VIDEO:{wCache:!0,discimeline||"s.manifefunc"defe.attributes.METHattributes.IV&&(i.iv=e.atbute list"})},"montir,h=e.number)list tANGUAGE),e.atttributes["INSTREAM-Ing incomplete othis.m"ignoring invalid target duration: "+e.duration}):(this.manifest.targetDuration=e.duration,L.ctart:se:e.ge.offset+i.byterwnProperty("cangth)));var r=l.prelhe same TYPRI"];u&&i.push("LAST-PART"),tifest.partTargetDuration=thil)&&(this.trigger("warn",{message:"defaulting segment duration to the target duratustom[e.customType]=e.data):(this.manifest.custom==e.data)}})[e.type].call(r)})),t}l(t,e);var n=t.prototype;return n.war;n.forEach((function(e){t.hasOwnProperty(e)||i.push(e)})),i.length&&this.trigger("warn",{message:e+" lacks required attribute(s): "+i.join(", ")})},n.push=function(e){this.lineStream.push(e)},n.end=function(){this.lineStream.push("\n"),this.trigger("end")},n.addParser=function(e){this.parseStream.addParser(e)},n.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(T),D={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3(merpl{rrC(e){return D.ogg.test(e)}))&&(r="ogg"),i+"/"+r+';codecs="'+e+'"'}},V=function(e){return void 0===e&&(e="){return vo.e?",Kuront},J=functi",r)};ifient 0===r?1:r,s=e.sourceDuration,a=ee[n](e),l=function(e,t){for(var n=[],i=e;i<t;i++)n.push(i);return n}(a.start,a.end).map(function(e){return function(t,n){var i=e.duration,r=e.timescale,o=void 0===r?1:r,s=e.periodIndex,a=e.startNumber;return{number:(void 0===a?1:a)+t,duration:i/o,timeline:s,time:n*i}}}(e));if("static"===n){var u=l.length-1;l[u].duration=s-i/o*u}return l},ne=function(e){var t=e.baseUrl,n=e.initiange,a=s.offset+s.length,l=t.timescale,u=t.references.filter((function(e){return 1!==e.referenceType})),d=[],c=a+t.firstOffset,h=0;h<u.le=e.byterange).offset+t.length-1,t.offset+"-"+n);var t,n},oe=function(e){var t;return(t=e.reduce((function(e,t){var n,i=t.attributes.id+(t.attribu[0].discontinuiibut[e"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},t["PROGRAM-ID",serott.mumber,h=void 0===c?1:c,p=e.periodIndex,f=h+f.length;E<S;)f.push({number:E,duration:y/d,time:m,timeline:p}),m+=y,E++}return f},fe=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,me=function(e,t){return e.replace(fe,function(e){return function(t,n,i,r)o.length+1).join("0):pe(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodIndex}]}(e,t);return s.map((function(t){n.Number=t.number,n.nTimeOffset),r}))},ge=function(e,t){var n=e.o,s=r.map(nction.batimn,u==t}))},be=function(e){return e.textContent.trim()},Te=function(e){var t=/P(?:r n=t.slice(1),i=n[0],r=n[1],o=n[2],s=n[3],a=n[4],l=n[5];return 31536e3*parseFloat(i||0)+2592e3*parseFloat(r||0)+86400*parseFloat(o||0)+3600*parseFloat(s||0)+60*parseFloat(a||0)+parseFloat(l||0)},we={mediaPresentationDuration:function(e){return Te(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return Te(e)},suggestedPresentationDelay:function(e){return Te(e)},type:function(e){rett:function(e){return Te(e)},width:function(e){return parseInt(e,10)},height:bandwidth:function(e){return parsern parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?Te(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},Se=function(e){return e&&e.attributes?Q(e.attributes).reducfec&_e(a,"Initialization")[0],u=t&&Se(t);u&&l?u.initialization=l&&Se(l):u&&u.initialization&&(u.initialization={sourceURL:u.initialization});var d={template:u,timeline:s&&_e(s,"S").map((,"cenc:pssh")[entInfo:K(n,a),attributes:K(s,{baseUrl:e})}}))}}(u,s,g)))}}(u,o,c)))}},je=function(e){if(""===e)throw new Error("DASH_EMPTY_MANIFEST");var t,n,i=new X.a;try{n=(t=i.parseFromString(e,"application/xml"))&&"MPD"===t.documentElement.tagName?t.documentElement:null}catch(e){}if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return n},Ae=function(e,t){void 0===t&&(t={});var n=function(e,t){void 0===t&&(t={});var n=t,i=n.manifestUri,r=void 0===i?"":i,o=n.NOW,s=void 0===o?Date.now():o,a=n.clientOffset,l=void 0===a?0:a,u=_e(e,"Period");if(!u.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var d=_e(e,"Location"),c=Se(e),h=xe([r],_e(e,"BaseURL"));return c.sourceDuration=c.mediaPresentationDuration||0,c.NOW=s,c.clientOffset=l,d.length&&(c.locations=d.map(be)),{locations:c.locations,representationInfo:Z(u.map(ke(c,h)))}}(je(e),t);return function(e,t,n){var i;if(void 0===n&&(n={}),!e.length)return{};var r=e[0].attributes,o=r.sourceDuration,s=r.type,a=void 0===s?"static":s,l=r.suggestedPresentationDelay,u=r.minimumUpdatePeriod,d=oe(e.filter(ue)).map(le),c=oe(e.filter(de)),h=e.filter(ce),p=e.map((function(e){return e.attributes.captionServicessolvedUri:"",targetDuration:i.duration,segments:l||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceD,p.length&&(f.mediaGroups["CLOSED-CAPTIONS"].cc=p.reduce((function(e,t){return t?(t.forEach((function(t){var n=t.channel,i=t.language;e[i]={autoselect:!1,dnProperty("easyReader")&&(e[i].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(e[i]["3D"]=t["3D"])})),e):e}),{})),f}(n.representationInfo.map(ye),n.locations,t.sidxMapping)},Ie=n(4221),Pe=n.n(Ie),Le=function(e){return e instanceof Uint8Array?e:(Array.isArray(e)||function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer}(e)||e instanceof ArrayBuffer||(e="number"!=typeof e||"number"==typeof e&&r,S.urnape(encodeURIComponenArray.prototype.every;return t.length&&e.length-o>=a[n]?i+20:i+10}(t,n)[t.size+1],t.st}(e.subarray(t.size+1,t.size+1+n)),t.size+=n}return 32&t.flags1],t.sizern Array.isArray(e)?e.map((function(e){return Fe(e)})):[Fe(e)]}(n),t=Le(t);var r=[];if(!n.length)return r;for(var o=0;o<t.length;){var s=(t[o]<<24|t[o+1]<<16|t[o+2]<<8|t[o+3])>>>0,a=t.subarray(o+4,o+8);if(0===s)break;var l=o+s;if(l>t.length){if(i)break;l=t.length}var u=t.subarray(o+8,l);Re(a,n[0])&&(1===n.length?r.push(u):r.push.apply(r,e(u,n.slice(1),i))),o=l}return r},qe={EBML:Le([26,69,223,163]),DocType:Le([66,130]),Segment:Le([24,83,128,103]),SegmentInfo:Le([21,73,169,102]),Tracks:Le([22,84,174,107]),Track:Le([174]),TrackNumber:Le([215]),DeGrot){ture(e)]}(n),t=Le(t);var i=[];if(!n.length)return i;f(1=o];return r},$e=function(e,t,n,i){void 0===i&&(i=1/0),e=Le(e),n=[].concat(n);for(var r,o=0,s=0;o<e.length&&(s<i||r);){var a=void 0;if(Re(e.subarray(o),Ke)?a=4:Re(e.subarray(o),Ze)&&(a=3),a){if(s++,r)return Je(e.subarray(r,o));var l=void 0;"h264"===t?l=31&e[o+a]:"h265"===t&&(l=e[o+a]>>1&63),-1!==n.indexOf(l)&&(r=o+a),o+=a+("h264"===t?1:2)}else o++}return e.subarray(0,0)},et={webm:Le([119,101,98,109]),matroska:Le([109,97,116,114,111,115,107,97]),flac:Le([102,76,9,avi:Le([65,86,73]),wav:Le([87,65,86,69]),"3gp":Le([102,116,121,112,51,103]),mp,113);rewebm:freturn Re(t,et.webm)},mkv:function(e){var t=Ye(e,[qe.EBML,qe.DoRe(e,,movoffset:4})},"3gp":function(e){return Re(e,et["3gp"],{offset:4})},acs:fun8<e.lion(e){var t=Be(e);return Reet.ogg)},avi:function(e){return Re(e,et.rifriff)&&Re(e,et.wav,{ofunction(e){return function(e,t,n){return $e(e,"h265",[32,33],3)}(e).length}},nt=Object.keys(tt).filter((function(e){return"ts"!==e&&"h264"!==e&&"h265"!==e})).concat(["ts","h264","h265"]);nt.forEach((function(e){var t=tt[e];tt[e]=function(e){return t(Le(e))}}));for(var it,rt=tt,ot=function(e){e=Le(e);for(var t=0;t<nt.length;t++){var n=nt[t];if(rt[n](e))return n}return""},st=n(1489),at="7.13.3",lt={prefixed:!0},ut=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled"unction(){null===pt&&(pt=[])},o.error=function(){for(var e=argach((function(t){t&&yt(t,(function(t,n){e[n]=t}))})),e)}function bt(e){return!!e&&"object"==typeof e}function Tt(e){return bt(e)&&"[object Object]"===vt.call(e)&&e.constructor===Object}function wt(e,n){if(!e||!n)returnvigator.userAgent||"",kt=/AppleWebKit\/([\d.]+)/i.exec(Ct),jt=kt?parseFloat(kt.pop()):null,At=/iPod/i.test(Ct),It=(t.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),Ot=Pt&&Lt<5&&jt<537,Dt=/Firefox/i.test(Ct),Nt=/Edg/i.test(Ct),Mt=!Nt&&(/Chrome/i.test(Ct)||/CriOS/i.test(Ct)),Rt=function(){var e=Ct.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),Ut=(Et=/MSIE\s(\d+)\.\d/.exec(Ct),!(xt=Et&&parseFloat(Et[1]))&&/Trident\/7.0/i.test(Ct)&&/rv:11.0/.test(Ct)&&(xt=11),xt),Bt=/Safari/i.test(Ct)&&!Mt&&!Pt&&!Nt,Ft=/Windows/i.test(Ct),Vt=Boolean(Kt()&&("ontouchstart"in t()||t().navigator.maxTouchPoints||t().DocumentTouch&&t().document instanceof t().DocumentTouch)),Ht=/iPad/i.tesDROID:Ot,IS_FIREFOX:Dt,IS_EDGE:Nt,IS_CHROcreateTextNode(e):void 0})).filter((function(e){return e}))}function bn(e,t){return _n(t).forEach((function(t){return e.appendChild(t)})),e}function Tn(e,t){return bn(yn(e),t)}function wn(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons}var Sn,En=Jt("querySelector"),xn=Jt("querySelectorAll"),Cn=Object.freeze({__proto__:null,isReal:Kt,isEl:Zt,isInFrame:Qt,createEl:$t,textContent:en,prependTo:),n=Array.prototype.slice.call(r().getElementsByTagName("video-js")),i=e.concat(t||!e("daAn(1)}};function.prototype;return n.set=function(e,t){var n=ers[t].length&&(delete n.handlers[t],e.removeEventListenr(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&Rn.delete(e)}}function Bn(e,t,n,i){n.forEach((function(n){e(t,n,i)}))}function Fn(e){if(e.fixed_)return e;function n(){return!0}function "!==s&&"keyLocation"!==s&&"webkitMovemenlement||r()),e.relatedTarget||(e.relatedTarget=e.froue=!1,o.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){o.stopPropagation&&o.stopPropagation(),e.cancelBubble=!0,o.cancelBubble=!0,e.isPropagationStopped=n},e.isPropagationStopped=i,e.stopImmediatePropagation=function(){o.stopImmediatePropagation&&o.stopImmediatePropagation(),e.isImmediatePropagationStopped=n,e.stopPropagation()},e.isImmediatePropagationStopped=i,null!==e.clientX&&void 0!==e.cli&&l.clientTop||0)}e.which=e.chisabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),o.disabled=!1)}return!t.defaue,tuments)};i.guid=n.guid=n.guid||Nn(),qn(e,t,i)}var Yn,Kn=Object.freeze({__proto__:null,fixEvent:Fn,on:qn,off:zn,trigger:Wn,one:Gn,any:Xn}),Zn=30,Qn=function(e,t,n){t.guid||(t.guid=Nn());var i=t.bind(e);return i.guid=n?n+"_"+t.guid:t.guid,i},Jrformance.now();return function(){var r=t().performance.now();r-i>=n&&(e.apply(void 0,arguments),i=r)}},$n=function(){};$n.prototype.allowedEvents_={},$n.prototype.on=function(e,t){var n=this.addEven.prototype.on,$n.protentListener;this.addEventListener=function(){},Gn(this,e,t),this.addEventLEvents_r i{0=etutypiont,n.")nvalid e,n,i):e[t](n,i)},li={on:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=si(this,n,"on"),o=r.isTargetingSelf,s=r.target,a=r.type,l=r.listener;if(ai(s,"on",a,l),!o){var u=function(){return e.off(s,a,l)};u.guid=l.guid;var d=function(){return e.off("dispose",u)};d.guid=l.guid,ai(this,"on","dispose",u),ai(s,.guif(s,a,t)pose",n)):ti(i)&&(i.off(r,n),i.off("dispose",n))}},trigger:function(e,t){ii(this.eventBusEl_,this,"trigger");var n=e&&"string"!=typeof e?e.type:e;if(!ni(n)){var i="Invalid event type for "+ei(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!e)throw new Error(i);(this.log||ft).error(i)}return Wn(this.eventBusEl0===n&&(n={});var i=n.eventBusKey;ieetState:function(e){var t,n=this;return"function"==typeof e&&(e=e()),yt(e,(function(e,i){n.state[i]!==e&&((t=t||{})[i]={from:n.state[i],to:e}),n.state[i]=e})),t&&ti(this)&&this.trigger({changes:ttring"(t,n){Tt(t)?(Tt(e[n])||(e[n{for(var n in this.map_)e.call(t,this.",this.handleLanguagechange)),ci(tis.isDisposedlength-1;e>=0;e--)this.children_[e].dispose&&this.cull,this.parentComponent_=null,this.el_&&(thNode.remove.createEl=function(e,t,n){return $t(e,t,n)},n.localize=function(e,t,n){void 0===n&&(n=e);var i=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),o=r&&r[i],s=i&&i.split("-")[0],a=r&&r[s],l=n;return o&&o[e]?l=o[e]:a&&a[e]&&(l=a[ar i=t[n-1],r=i;rn this.chiComponent_=thigetChild(e)),e&){var i,r;return"string"==typeof e?r=n[i=e]||e){var n=e.namefunction(e,t){if(void 0===t&&(t=!1),e)return this.isReadys.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},n.triggerReady=function(){this.isReady_=!0,this.setTimeout((function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach((function(e){e.call(this)}),this),this.trigger("ready")}),1)},n.$=function(e,t){return En(e,t||this.contentEl())},n.$$=function(e,t){return xn(e,t||this.contentEl())},n.hasClass=function(e){return nn(thisthis.el_,e)},n.el_,e)},n.toggleClass=function(e,t){sn(this.el_,e,t)},n.show=function(){this.removeClass("vjs-hidden")},n.hide=fu=function(){tng=function(ght(t)},n.dimensionis.el_)return 0;var offset"+pi(e)],10)},n.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=wt(this.el_,e),0===(t=parseFloat(t))||isNaN(t)){var n="oh:this.currentDimension("width"),height:this.currentDimension("heighw(),e=!0)})),this.on("his.trigger(".clearInterval(e),e=this.setInterval(t,250)}));var n=function(n){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchen,i=t().setTimeoun.clearTimeout=function(n.clearInterval=function(e){rtionFrame((function(){i.rafIme=function(e,t){var n=has(e)&&n.namedRafs_.delhis;this.clearingTimt be a Componen});va{var n,i,r=0;if(!t)return 0;e&&e.length||(e=wi(0,0));for(var o=0;o<e.length;o++)n=e.start(o),(i=e.end(o))>t&&(i=t),r+=i-n;return r/t}function Ei(e){if(e instanceof Ei)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:bt(e)&&("number"==typeof e.code&&(this.code=e.code),_t(this,e)),this.message||(this.message=Ei.defaultMessages[this.code]||"")}_i.prototype.supportsRaf_="function"==typeof t().requestAnimationFrame&&"function"==typeof t().cancelAnimationFrame,_i.registerComponent("Component",_i),Ei.prototype.code=0,Ei.prototype.message="",Ei.prototype.status=null,Ei.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Ei.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corrded, !=e&&"function"==typeof ef t().HTMLInputElement||e instanceof t().HTMLSelectElement||e instanceof t().HTMLTextAreaElement||e in)},ti(e)&&e.addEventListener("labelchange",e.labelchange_)},n.removeTrack=function(e){for(var t,n=0,i=this.length;n<i;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},n.getTrackById=function(e){for(var t=null,n=0,i=thhis,t),trit.addEvadata",s_[n]prototype;return t.setCues_=function(e){var t=this.length||0,n=0,i=e.length;this.cues_=e,this.length_=e.length;var r=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<i)for(n=t;n<i;n++)r.call(this,n)},t.getCueById=function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},e}(),Fi={alternative:"alternative",captions:"captions",main:"main",sign:"si{}),n=e.call(this)||this;var i={id:t.id||"vjs_track_"+Nn(),kind:t.kind||"",language:t.language||""},r=t.label||"",o=function(e){Object.defineProperty(s(n),e,{get:function(){return i[e]},set:function(){}})};for(var a in i)o(a);return Object.defineProperty(s(n),"label",{get:function(){return r},set:function(e){e!==r&&(r=e,this.trigger("labelchange"))}}),n}return l(t,e),t}($n),Wi=function(e){var n=["protocol","hostname","port","pathname","search","hash","host"],i=r().createElement("a");i.href=e;var o,s=""===i.host&&"file:"!==i.protocol;s&&((o=r().createElement("div")).innerHTML='<a href="'+e+'"></a>',i=o.firstChild,o.setAttribute("style","display:none; position:absolute;"),r().body.appendChild(o));for(var a={},l=0;l.priv");t.innerHTML='<a href="'+e+'">x</a>',e=t.firstChild.href}return e},Xi=function(e){if("string"==typeofunc&&(i.cors=r);vae<=e&&r.startTime+.5>=e)&&t.push(r)}if(uloaded_=!0,n),e)i in n||(n[i]=e[i]);n.id=e.id,n.originalCue_=e}for(var r=this.vents_=abled),t(t){var n,i;void 0===t&&(t={}),n=e.call(this)||this;var r=new Ji(t);return n.kind=r.kind,n.src=r.src,n.srclang=r.language,n.label=r.label,n.default=r.default,Object.defineProperties(s(n),{readyState:{get:function(){return i}},track:{get:function(){return r}}}),i=0,r.addEventListener("loarn l(t,e),t}($n);tr.prototype.allowedEvents_={load:"load"},tr.NONE=0,tr.LOADING=1,tr.LOADED=2,tr.ERROR=3;var nr={audio:{ListClass:Di,TrackClass:$i,capitalName:"Audio"},video:{ListClass:Mi,TrackClass:er,capitalName:"Video"},text:{ListClass:Ri,TrackClass:Ji,capitalName:"Text"}};Object.keys(nr).forEach((function(e){nr[e].getterName=e+"Tracks",nr[e].privateName=e+"Tracks_"}));var ir={remoteText:{ListClass:Ri,TesNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==r.text.ListClass,i."),i}l(n,e);var i=n.etTimeout((functtion(){this.manualPoff("duratiange_)},i.trackProgressInterval=this.setI();this.bufferedPercention(e){this.duration_=n(){this.clearInterfunction(){this.manualTimeime_)},i.t",target:this,,i.dispose=function(){thdatesOff(),e.prototype.dispose.call(this)},i.clearTracks=function(e){var t=this;(e=[]."text"===)},i.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;rossOrigin=function()"timeupdate",target"vttjsloaded");var ncuechange",o)}}etrack",s);for(var e=0;eion(e,t,n){if(!e)throturn!0!==t&&!1!==t&&(ft.ddTrackElement_(i),this.rerack(i.track),!0!==t&&thisremoveRemoteTextTrack=funcmoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},i.getVideoPlaybackQuality=function(){return{}},i.requestPictureInPicture=functons_.Promise||t(ictureInP},i.setPoster=fh=functionrce method on them");retus_[e]:(e=pi(e),t()&&t().videojs&&t().videojs[e]?(ft.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),t().videojs[e]):void 0)},n}(_i);rr.names.forEach((function(e){var t=rr[e];or.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateNam),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)ponent("Tech",or),or.registerTech("Tech",or),or.defaultTechOrder_=[];var sr={},ar={},lr={};function ur(e,t,n){e.setTimeout((function(){return mr(t,sr[t.tyt(e),ar[e.id()]=[[t,i]],i;for(var r=0;r<n.length;r++){var o=n[r],s=o[0],a=o[1];s===t&&(i=a)}return null===i&&(i=t(e),n.push([t,i])),i}(i,a);if(!u.setSource)return r.push(u),mr(e,l,n,i,r,o);u.setSource(_t({},e),(function(t,s){if(t)return mr(e,l,n,i,r,o);r.push(u),mr(s,e.type===s.type?l:sr[s.type],n,i,r,o)}))}else l.length?mr(e,l,n,i,r,o):o?n(e,r):mr(e,sr["*"],n,i,p4"&(e=""r br=function(e){function t(t,n,i){var r,o=fi({createEl:!1},n)_i);_i.registerComponent("MediaLoader",br)HTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),ototype.createpolite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_}=function(n",this.handleKeyDown_))},n.disable=function(){this.enabled_=!1,this.addClass("vjs-diremoveAttribute(ndleKeyDown_)},n.handleLanguagechange=function(){this.controc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},n.handleClick=function(e){if(this.player_.controls()){var t=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(Ut||Nt)&&t||this.player_.tech(!0).focus(),this.player_.paused()?ki(this.player_.play()):this.player_.pause()}},t}(Tr);_i.registerComponent("PosterImage",wr);var Sr="#222",Er={if'};function xr(ech_&&n.tech_.featuresNativeTextTracks)this.hidens:1,subtitles:1o&&o.enableriptions"!==a.k="showing")},i.tr.mode&&n.push(r)}thi0 0 4px #222, 0 0e.length;++i)for(var r=e[i],o=0;o<r.activeCues.length;++o)on t(){return e.apply(this,arguments)||this}return l(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),n=this.localize(t?"Audio Player":"Videoction t(){rClass()},return thiructor.name;retutead."),_i.prototype.addChild.call(this,e,t)},n.|this.player_.tech(!0).focus())}var i=this.player_.getChild("controlBar"),r=i&&i.getChild("||i.localize("Close")),i}l(t,e);var n=t.prototype;sed"),this.addClass("vjs-playing"),this.controlText("Pause")},n.handlePause=functi,(funcotype.controlText_h.floor(t/60%60),s=Math.floor(t/3600);retu.createEl=ame:t+" vjs-time-ctEl_){var e=t.textNode_;e&&t.contentEl_.firstChild!==e&&(e=null,ft.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element sinent("TimeDisplay",Mr);var Rr=function(e){function t(){return e.apply(this,arguments)||this}l(t,e);var n=t.prototype;return n.buildCSSClaimeDisplay",Rr);var Ur=function(e){function t(t,n){var i,r=function(e){return i.updateContent(e)};return(i=e.call(this,t,n)||tpe.labelText_="Duration",Ur.prototype.controlText_me"},n.createEl=function(){var t=e.prototype.createEl.call(this);return t.insertBefore($t("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t}.contentEl_=$t("div",{className:"vjs-live-display"ibute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind li},n.dispose=funn i.handleMouseDown(e)},i.handleMouseUp_=function(e){return i.handleMouseUp(e)},i.h.enabled().off(this.phis.addClass("disathis.bar.el_.ownerDocument;"mousedown"===e.type&is.handlethis.off(e,"toeMouseUp_),this.upda=this.getProgres))},n.calculateDistance=function(e){var t=vn(this.el_,e);return this.verticalt,"Right")||h().isEventKey(t,"Up")?(t.preventDefypecent_!==s&&(t.el_.style.width=s,en(t.percentageEl_,s),+l+"px",this.write(n)}},n.write=function(e){en(thi(s(i),i.update),Zn),i}l(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progression t(t,n){var i;return(i=e.call(this,t,n)||this).update=Jn(Qn(s(i),i.update),Zn),i}l(t,e);var n=t.prototype;return vjs-mouse-display"})},n.update=function(e,t){var n=s.enableIntervalHandler_),"hidden"in roggleVisibility_=fud()||this.pnterval(t.liveTracker_.setAttribute("ar)),n.currentTer.nextSeekedFromUnction(){var e,t=tall(this,t))},n.handleMouseMove=function(e){if(wn(e)){var t,n=this.calculateDistance(e),i=this.player_.liveTrackerrentTime();if((y");t&&t.show(r t=this.geunction(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.pl&&n.isLivethis.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",thkBar"]},_i.registerComponent("ProgressControl",Qr);var Jr=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,["enterpictureinpicture","leavepictureinpictadata"],(function(e){return i.hlass.call(this)},n.handlePictureInPictureEnabledChange=function(){r().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},n.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?tvar n=t.prototype;return n.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},n.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},n.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(Ar);$r.purn;var a=e.left-o.left+s,l=e.width-s+(o.right-e.right),ull(this,t,n)||this).update=Jn(Qn(s(i),i.update),Zn),i}l(t,e);var n=t.prototype;return n.createEl=function(){return e.pis.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},n.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},n.updateLastVolume_=ft,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(e){var t=this.el_.ownerDocument;zt&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.ten.handleVolumeControlKeyUp=function(e){h().isEventKey(e,"Esc")&&this.muteToggle.focus()},n.handleMouseOver=functio!==this.focusedChild_&&(e=this.focusedChild_+1),this.fo(i.menuButton_,"tap",s),i.on(i.menuButto(function(e){his.show()},n.createMenu=function(){vai",{className:"vjs-menu(this.items[i]);WrapperCSSClas"vjs-menu-SClass.call(thptions_.inline?t+=")},n.controlText=function(e,t){return void 0===t&&(tton_.controlTextis.menuButton_.focEsc")||h().isEventKey(e,utton(),h().isEventKey(eMenuKeyUp=fune){(h().isEventK,n.pressBuenuButtonButton=function(){this.enabled_&&(this.buttonPresseds).items.length<=1&&i.hide(),!r)return s(i);var o=Qn(s(i),i.update);return r.addEventListener("removetrack,"Up","Down","Right","Left"],ho=function(erole","menuitemcn=t.prototype;i){return ttotype.handleKeyDown.call(this,t)},n.handleClick=fi.handleSelectedLanguageChange=function(e){if("showing"=s_.kinds.indexOf(o.kind)>-1&&"showing"===o.mode){n=!1;breaknd:this.kind_,label:n})),this.hideThreshold_+=1;var i=e.call(this,t,n)||this).track=r,i.cue=o,r.addEventListener("label?this.track_.label:this.localize(pi(this.kind_))},n.createMenu=function(){return this.options_.title=this.getMenuCa(var t=this.player().textTracks(),n=!1,i=0,r=t.length;i<r;i++){var o=t[i];if(o.kind!==this.kind_&&"showing"===o.mode){n=!0;break}}n?Text_="Descriptions",_i.registerComponent("DescriptionsButton",yo);var _o=function(e){function t(t,n,i){return e.call(this,;return n.track={player:t,kind:n.kind,label:n.kind+" settings"n.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItemunction(t,n,i){var r='<span class="vjs-menu-item-text">ldWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[aria-hidden="true" class="vjs-icon-placeholder"></span>\nio-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-ed=o===t.playbackRate(),n.selectable=!0,n.multiSelectable=!1,(i=e.call(this,t,n)||this).label=rd=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()otype.controlText_="Playback Rate",_i.registeClass()})},t}(_i);_i.registerComponent("Spacer",jo);var AocreateEl=function(){var t=e.prototype.createEl.call(this,{className:this.buildCSSClass()});return t.innerHTML="Â ",t},t}(jo);_i.registerComponent("CustomControlSpacer",Ao);var Io=function(e){function t(){return e.apply(this,arguments)||this}return l(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(_i);Io.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressContro),_i.registerComponent("ControlBar",Io);var Po=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,"error",(function(e){return i.open(e)})),i}l(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},n.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(Ii);Po.prototype.options_=o({},Ii.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),_i.registerComponent("ErrorDisplay",Po);var Lo="vjs-text-track-settings",Oo=["#000","Black"],Do=["#00F","Blue"],No=["#0FF","Cyan"],Mo=["#0F0","Green"],Ro=["#F0F","Magenta"],Uo=["#F00","Red"],Bo=["#FFF","White"],Fo=["#FF0","Yellow"],Vo=["1","Opaque"],Ho=["0.5","Semi-Transparent"],qo=["0","Transparent"],zo={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Oo,Bo,Uo,Mo,Do,Fo,Ro,No]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Vo,Ho,qo]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Bo,Oo,Uo,Mo,Do,Fo,Ro,No]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serisual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1xt-opacity > select",id:"captions-foreground-opacity-%s"eys(e).length?t().localStorage.setItem(Lo,JSON.stringify(e)):t().loc0,s(r)),o?(r.resizeObserver_=new r.ResizeO=r.debouncedHandn(r.el_.coresizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_indLiveEdge_},i.isTracking=function(){return"number"=ng(),e.prototype.dispose.call(this)},n}(_i);_funcgerSo.no=t.apply(n,r);return Qo(e),s}};["appendineP.reseotype.getAttriboveChild(l[d])}return i.proxyNativeTracks tracks from loading."),i.ar o=r.call(n,t,i);return/src/i.test(t)&&e.mode!==r.storedMo)},i.overrideNative_=function(e,t){var n=this;if(t===this["featuresNative"+e+"Tracks"]){var i=e.toLowerCase();this[i+"TracksListeners_"]&&Object.keys(this[i+"TracksListeners_for(var n=!1,o=0;o<i.ift())};thi"}))}e.playerId=ththis.on("loadedmetadata",i),void this.ready((function(){this.off("loadstart",n),this.off("loadedmetadata",i),t||thyState>=4&&his.el_.fastSeek&&Wt?this.el_.fastSeek(e):this.el_.currentTime=e}catch(e){ft(e,"Video is not ready. (Video.js)")}},i.duratinge",{isFullscreen:!1een:!0,nativeIOSFu/Android/.test(e).play()),this.setTimeout((function(){e.pause();try{e.webkitEnterFullScreen()}catch(e){FullScrer",e)}},i.exicreen():this.t"The video is n===e)return this.el_.srcextTrack.call(this,t,r n=r().createElement("t.src),n},i.addRemoteTextTr&(e.droppedVideoFrames=thperformance.now()eationTime=t().Date.now()-t().performance.timing.navigationStart),e},n}(or);ns(is,"TEST_VID",(function(){if(Kt()){var e=r().createElement("videoisSupported=function(e,t){return is.canPlayVolume=function(){try{varcanOverrideAttributes=functiject.defineProperty(r().createElement("video"),"src",{get:e,set:e}),Object.defineProperty(r().createElement("audio"),""video"),"innerHTML",{get:e,set:e}),Object.defineProperty(r().createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},is.supportsNativeTextTracks=function(){return Wt||zt&&Mt},is.supportsNativeVideoTracks=function(){return!(!is.TEST_VID||!is.TEST_VID.videoTracks)},is.supportsNativeAudioTracks=function(){return!(!is.TEST_VID||!is.TEST_VID.audioTracks)},is.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volcanMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeprototype.featuresFullt>=4&&!Dt&&!Mt&&(Zo=is.TEST_VID&&is.TEST_VID.function(){var e=is.Te&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild)}}()}},is.resetMediaElement=function(e){if(e){for(var t=e.querySelecoad()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){is.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}})),["paused","currentTime","buffered","volume","poster","preloaybackRate","disablePictureInPicturght","crossOrigin"].forEach((function(e){is.prototype[e]=function(){return this.el_[e]}})te","disablePictureInPicture","crossOriis.el_[e]()}})),or.withSourceHandlers.nativeSourceHandler.canPlayType=function(e){try{return is.TEST_VID.canPlayType(e)}catch(e){return""}},is.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return is.nativeSourceHandler.canPlayType(e.type);if(e.src){var n=Xi(e.src);return is.nativeSourceHandler.canPlayType("video/"+n)}return""},is.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},is.nativeSourceHandler.dispose=function(){},is.registerSo","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],os={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},ss=["tiny","xsmall","small","medium","large","xlarge","huge"],as={};ss.forEach((function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;as[e]="vjs-layout-"+t}));var ls={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},us=function(e){function n(t,i,o){var a;if(t.id=t.id||i.id||"vjs_video_"+Nn(),(i=_t(n.getTagSettings(t),i)).initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language)if("function"==typeof t.closest){var l=t.closest("[lang]");l&&l.getAttribute&&(i.language=l.getAttribute("lang"))}else for(var u=t;u&&1===u.nodeType;){if(ln(u).hasOwnProperty("lang")){i.language=u.getAttribute("lang");break}u=u.parentNode}if((a=e.call(this,null,i,o)||this).boundDocumentFullscreenChange_=function(e){return a.documentFullscreenChange_(e)},a.boundFullWindowOnEscKey_=function(e){return a.fullWindowOnEscKey(e)},a.boundUpdateStyleEl_=function(e){return a.updateStyleEl_(e)},a.boundApplyInitTime_=function(e){return a.applyInitTime_(e)},a.boundUpdateCurrentBreakpoint_=function(e){return a.updateCurrentBreakpoint_(e)},a.boundHandleTechClick_=function(e){return a.handleTechClick_(e)},a.boundHandleTechDoubleClick_=function(e){return a.handleTechDoubleClick_(e)},a.boundHandleTechTouchStart_=function(e){return a.handleTechTouchStart_(e)},a.boundHandleTechTouchMove_=function(e){return a.handleTechTouchMove_(e)},a.boundHandleTechTouchEnd_=function(e){return a.handleTechTouchEnd_(e)},a.boundHandleTechTap_=function(e){return a.handleTechTap_(e)},a.isFullscreen_=!1,a.log=mt(a.id_),a.fsApi_=lt,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.ua.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=t,a.tagAttributes=t&&ln(t),a.language(a.options_.language),i.languages){var d={};Object.getOwnPropertyNames(i.languages).forEach((function(e){d[e.toLowerCasresetCache_(),a.poster_=i.poster||"",a.controls_=!!i.controls,t.controls=!1,t.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],t.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach((function(e){if("function"!=typeof a[e])throw new Error('plugin "'+e+ng_=!1,a.el_=a.createEl(),ui(s(a),{eventBusKey:"el_"}),a.fsApi_.requestFullscreen&&(qn(r(),a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_),a.on(a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_)),a.fluid_&&a.on(["playerreset","resize"],a.boundUpdateStyleEl_);var c=fi(a.options_);i.plugins&&Object.keys(i.plugins).forEach((function(e){a[e](i.plugins[e])})),i.debug&&a.debug(!0),a.options_.playerOptions=c,a.middleware_=[],a.playbackRates(i.playbackRates),a.initChildren(),a.isAudio("audio"===t.nodeName.toLowerCase()),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),Vt&&a.addClass("vjs-touch-enabled"),zt||a.addClass("vjs-workinghover"),n.players[a.id_]=s(a);var h=at.split(".")[0];return a.addClass("vjs-v"+h),a.userActive(!0),a.reportUserActivity(his.tag.plarossOrigin(thietworkState,i.parentNode&&!o&&i.parentNode.insertBefore(n,i),tnribute("lang'"')},i.is;if(vjs-fluid"),thi===e)return!!thisyleEl_,"\n  n(e){return n.l(t,(fuf(e)})).map(ji))),this.isReasListeners_(),this.on(this.techction(){this.off(thhMove_),this.off(this.tionChange_()},i.ha0);var n=function(){t.turn o.type}return gr(t(r)&&(!this.l.lastSource_.tech=tarted=function(e){if(vomoveClass("vjs-pausede){return e.callback(e.event)})),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},i.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime();this.on("timeupdate",(function n(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",n))}))},i.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},i.handleTechCanPlayThrough_=function(){thir("seeking")},i.hanrigger("seeked")},ihis.currentTime(this.optionsrigger("firstplay")s-paused"),this.trigger("ptions_&&void 0!=s_.userActions.doubleClivoid 0!==this.options_&is.options_.userActionClick.call(this,e):t():this.requestFullscreen()))},i.handleTechTap_=function(){this.userActive(!this.userActive())},i.handleTechTouchStart_=function(){this.userWasActive=this.isFullscreen()?this.addClaser;if(!t||t===this){var n=thii&&n.matches?i=n.matches(":"+th.handleTechFullscreenChange_=function(e,t){t&&(t.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(t.isFullscreen))},i.handleTechFullscreenError_=fugglePictureInPictureCls.removeClass("vjs-picture-in-picture")},i.handleTechEntction(){var tPlaybackRaech_,e)throw ftngSrc_&&(this.src()||this.is.isReady_||!n)retuis.techGet_("play");null===i?this.runPlayTerminatedQuinatedQue(0);this.planction(t){t(e)ction(e){return vSrc_&&this.is.cache_.currenhis.cache_.initTime)},icache_.durauration=e,e===1/0?isNaN(e)||thisime()},i.(){returis.duration(),nth.min(1,parset))):(t=parseFloat(thf(void 0===e)ren this.cache_.lastVolume;this.cache_.lastVolume=e},i.supportsFullScreen=function(){return this.techGet_(eturn this.isFullscreen_},i.requestFullscreen=function(e){var n=this._.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen)lScreen"):this.enterFullWindow()},i.exitFullscreen=function(){var e=this.options_.Promise||t().Promise;if(e){var n=this;return new e((function(e,t){function i(){n.off("fullscree}function r(){i(),e()}function o(e,n){i(),t(n)}n.one("fullscreenchange",r),n.one("fullscreenerror",o);var s=n.exitFullscreenHelper_();if(s)return &1==!this.options_.prsFullWindow=!0,thwOnEscKey=function(e){h().dFullWindowOnEscKey_),rInPicture=function(e){if(veInPicture=e,this.triggoid 0!==e?(this.nPicture()},i.hation();var u=_pPropagation(),h is undefineech(s)h>1){va{var t,eturn!r|(this.readyvar e=this,n=this.opttion(){return e.doRetechOrder[0],null),thi.resetControlBarUkRate_(),this.rese.remainingTimeDtent()},i.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handlegger("volumechange")},i.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sochGet_("preloa!0===e&=!1):thisline",e),this.options_.pla|(e=""),e!=",e),this.controls_?(t.removeT"],t),void this.one("lick","touchsctive_=e,this.userActive_ion(e){this.plarActivity_=!1,this.use250)},i.plfeaturesPlaybachis.techCall_("setPla.techCall_("setDefaultPlction(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},i.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},i.addRemoteTextTrack=function(e,t){if(this.tecoid 0===e&&,i.videoWidtoWidth()|this.language_rn fi(n.prototype.options_."";var i=new Ii(this,t);retrentBreakpointakpoints_[i])ls,e),this.updateCurts_)},i.responsive=functiBoolean(e))!this.breakpRemoteTextTrack(e t={sources:[],trackasChildN.style||"mozFlexthis.log.level("debug"),tn this.cache_.playbackRates;Array.isArray(e)&&e.every((function(e){return"number"==typeof e}))&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))},n}(_i);rr.names.forEach((function(e){var t=rr[e];us.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}})),us.prototype.crossorigin=us.prototype.crossOrigin,us.players={};var ds=t().navigator;us.prototype.options_={techOrder:or.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","ds.languages&&:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpointssee((frot},en}(t,n):us.prototype[t]=ys(t,n)),n},e.deregisterPlugin=function(e){if(e===cs)throw new Erroete ps[e],delete us.pronction(tView&&r.ownerDocument.b).forEac));bt(n)&&!Ar,t,n),Ts.hook],t&&(Ts.hooks_[e]=Ts.hooks_[e].concat(t)),Ts.hooks_[e]},Ts.hook=function(e,t){Ts.hooks(e,t)},Ts.hookOnce=function(e,t){Ts.hooks(e,[].concat(t).map((function(t){return function n(){return Ts.removeHook(e,n),t.apply(void 0,arguments)}})))},Ts.removeHook=function(e,t){var n=Ts.hooks(e).indexOf(t);return!(n<=-1||(Ts.hooks_[e]=Ts.hooks_[e].slice(),Ts.hooks_[e].splice(n,1),0))},!0!==t().VIDEO ws=En(".vjs-150px;\n      }\ns=us.prototype.options_,Ts.getPlayers=function(){return us.players},Ts.getPllPlayers=function(){return Object.keys(us.players).map((funcn)},Ts.players=us.players,Ts.getComponent=_i.getComponent,Ts.registerComponent=function(e,t){or.isTech(t)&&ft.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.rion"==typeof t&&(n=t),function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must eitect.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(n,e),e&&(n.super_=e),i)i.hasOwnProperty(r)&&(n.prougin=function(e,t){return ft.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead")(e,t)},Ts.getPlugin.getPlugin=_s.getPlugin,Ts.getPluginVersion=_s.getPluginVersion,Ts.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),Ts.options.languages=fi(Ts.options.languages,((n={})[e]=t,n)),Ts.options.languages[e]},Ts.log=ft,Ts.createLogger=mt,Ts.createTimeRange=Ts.createTimeRanges=wi,Ts.formatTime=Nr,Ts.setFormatTime=fuigger=Wn,Ts.xhr=f(),Ts.TextTrack=Ji,Ts.AudioTrack=$i,Ts.VideoTrack=er,["isEl","isTextNode","createEl","hasClass","addClass","removeClass"tCoeprecated; use vion-&n&tioh)fmeR e-js<=t&&n+js>=t}))},Ps=d(nnctnt:h:0:n+if(tiortI){f++){ife);>Daunc(e)ts.length)return Zs(e,(function(e){return playlists[t],i=n.atttIndex||null,segmentIndeartTime:n};l=0}for(var f=l;f<a.length;f++){var m=a[f];if:o+Hs({defaultDuration:t.targetDuration,dur.length-1].partIndex,startTime:n}},isEnabled:Gs,isDisabled:function(e){retzs,===tMalists[t.uri]=t}))})),function(e){for(vara=Tri)))}egmetu[a]=o);return iu;r.src=t,r.vhs_=n,r.withCredentials=l,r.handleManifestRedi?"v2":"YES")),n.forEachhaveMetadata({plauaranteed.")),d.partTargetDuration=p}return d}({onwarn:function(e){var i=e.message;return t.logger_("m3u8-parser warn for "+n+": "+i)},oninfo:function(e){var i=e.message;return t.logger_("m3u8-parser info for "+n+": "+i)},manifestString:e.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},i.haveMetadata=function(e){var n=this,i=e.playlistString,r=e.playlistObject,o=e.url,s=e.id;this.request=null,this.state="HAVE_METADATA";var a=r||);a.lastRequest=Date.now(),na({playlist:a,uri:o,id:s});var l=da(thanged"),this.mtion(){n.trigger("mediaupdatetimeout")}),ca(this.media(),!!l))),this.trigger("loadedplaylist")},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),t().clearTimeout(this.mediaUpdateTimeout),t().clearTimeout(this.finalRenditionTimeout),this.off()},i.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},i.media=function(e,n){var i=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(t().clearTimeout(this.finalRenditionTimeout),n){var r=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=t().setTimeout(this.media.bind(this,e,!1),r)}else{var o=this.state,s=!this.media_||e.id!==this.media_.id,a=this.master.playlists[e.id];if(a&&a.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(s&&(this.trigger("mediachanging"),"Ht=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(function(t,n){if(i.request){if(e.lastRequest=Date.now(),e.resolvedUri=xs(i.handleManifestRedirects,e.resolvedUri,n),t)return i.playlistRequestError(i.request,e,o);i.haveMetadata({playlistString:n.responseText,url:e.uri,id:e.id}),"HAVE_MASTER"===o?i.trigger("loadedmetadata"):i.trigger("mediachange")}}))}}},i.pause=function(){this.stopRequest(),t().clearTimeout(this.mediaUpdateTimeout),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(t},(functi.status,message:"HLS ple,n){var i=ea(0,n),r={mediaGroups:{AUDIonstiof irigncto.rionength)+n+(t%2?" ":"")},ba=function(e){re:i.byteOffset,byteLength:i.byteLength}:t[n]=i})),t},wa=function(e){var t=e.byterange||{length:1/0,offset:0};return,")},Sa=fun.slicret("estimate"===c.type)return 0===o?d({mesdx|angmap&&!t.map)||B("A non-empty playlist URL or object is required"_.srcUrl=t,o.master: "+s,respumUpdatePeriodTimeoumeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,thiylists[e]}var iis.mediarPlaylivar i=thePeriodTimeout_()r_.masterXml_=i.responseTlue),method:i.sterLoaded_-Date.now(),e();var o;o="HEAD"===i.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):n.masterLoaded_:Date.parse(r.responseText),n.masterPlaylistLoader_.clientOffset_=o-Date.now(),e()}})))},i.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},i.handleMaster_=function(){this.medialaylists[o];if(s.sidx){var a=re(s.sidx);n&&n[a]&&n[a].sidx&&ie(s,n[a].sidx,s.sidx.resolvedUri)}var l=da(r,s,Ia);l&&(r=l,i=!1)}return ta(t,(function(e,t,n,o){if(e.playlists&&e.playlists.length){var s=e.playlists[0].id,a=da(r,e.playlists[0],Ia);a&&((r=a).mediaGroups[t][n][o].playlists[0]=r.playlists[s],i=!1)}})),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(i=!1),i?null:r}(r,i,this.masterPlaylistLoader_.sidxMappt_),e.minimumUpdatePateMupOnMedia__=e.masterPlayliisMaster_&&this.handleMaster_();var i=this.masterPlaylistLoader_.master.playlists,r=!this.media_||this.media_!==i[e];r?this.media_=i[e]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function e(){n.media().endList||(n.mediaUpdateTimeout=t().setTimeout((function(){n.trigger("mediaupdatetimeout"),e(a={n f}))getBlob())}}(e),n=Na(new Won(t,n){var i;retuush(arguments[i]);for(r=n.length,i=0;i<r;++i)n[i].apply(this,o)}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFunction(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},e.prototype.push=function(e){th Uin0,y(n.h)cy{r5,lesa,0vin-25,0et1,Ui,0)>,055e&[ir(t8o.length,l=0;l<s.lengta.dura};var q,z,W,G,X,Y,K,Z,Q=function(e){return t(w.mdat,e)},J=a,$=function(e,DependedOrirnfset=e.pts-e.dt.size=endependsle=0),n},ee=[33,5,1{re;red 0{e.on("data",this.trigger.-,void(this.numSameDts_||(th<i;n++)o={type:3&t[2+(r=3_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIhis.flushCCStreams(e)):this.flushCon(e){e.reset()}))},fe.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCeActive(e)?this.activeCea608Channe.activeCea608Channel_[e.type]&&thih(e)},fe.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},fe.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},fe.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)},fe.pre70me={127:9834,4128:3tion(){this.clearText},this.penAttr={},this.,this.rowLock=0,this.unction(){return this,ge.prototype.newLine.virtualRowCount&&"func.rowIdxsEmpty=function(){otype.backspace=function(){if(is.rows"function"==typeof t&&(this.windows[n].beforeion e(){e.prototype.init.acket&&t.new708Packet(),t.a.ccData,n=t>>>8,i=255&t;this.cWindows(r,s):139===i?r=this.to===i?r=this.setPenCos):8===i?s.currentWindow.ds=function(e,t){var n=t(e),this.services[e].init(thisototype.handleText=functioow(r);var o=t.currentWindow;returty=(192&i)>>6,r.fillRed=(48&(64&i)>>6,r.printDirectioisplayed=function(e,t){for(var n=[],i=0;i<8;i++)t.windows[i].visible&&!t.windows[i].isEmpty()&&n.push(t.windows[i].getText());t.endPts=e,t.text=n.join("\n\n"),this.pushCaption(t),t.startPts=e},_e.prototype.pushendPts)},_e.prototype.displeturn e},_e.prototype.hideWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible=0);return e},_e.prototype.toggle1);return e},_e.prototype.cleae],i=this.getPts(e);this.56&i)>>3,r.fontStyle=7&i,e},gGreen=(12&i)>>2,r.],r.edgeRed=(48&i)>>4,r.edgeGreen=(12&i)>>2,r.edgeBlue=3&i,e},_e.prototype.setPenLocation=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,i=n[++e],r.row=15&i,i=n[++e],r.column=63&i,e},_e.prototype.reset=function(e,t){var n=this.getPts(e);return this.flushDisplayed(n,t),this.initService(t.serviceNum,e)};var be={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:190:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:292,this.row_&&(this.clearFormatting(e.pts),this.ro,o),this.column_+=oalformed caption."),""}}))NTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|thi=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASESPLAYED_MEMORY_=46| e===this.EXT_&&t>=48&&treturn(e===this.EXT_+1||e=rototype.isMidRowCode=f=127},Ee.prototype.setRollUd_=Se()),void 0!==t&&t!==thishis.rollUpRows_+1},Ee.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,n)},Ee.prototype.clearFormatting=function(e){if(this.formonDisplayed_[this.row.displayed_[this.row_]=n},Ee.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;eyednction(e){this.type_!==ke&&e.type!==this.))}enddtimeliner(i=t<<14|h).r.data.subarray(s+10,s+a+10)}).key=l.id,Me[l.id]&&(Me[l.:i=n;o<i.byteLength;===this.programMapTable?this.packetsWaitingForPmt.push([t,i,n]):this.processPes_(t,i,n)},this.processPes_=function(e,t,n){n.pid===this.prog&&(c.pts=(14&d[9])<<27|(255&d[10])<<20|t,!0),e.dat};null!==(e=s.progriaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",n)}})[s.type]()},this.reset=function(){n.size=0,n.data.length=0,i.size=0,i.data.length=0,this.trigger("reset")},this.flushStreams_=function(){o(n,"video"),o(i,"audio"),o(r,"timed-metadata")},this.flush=function(){this.flushStreams_(),this.trigger("done")}},Be.prototype=new V;var qe={PAT_P+2])<<2|(192&t[d+3])>>>6,samplerate:Xe[(6nct:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=reak;case 12:p=[64,33];break;case 13:p=[160,99];break;case 14:p=[4,3];break;case 15:p=[3,2];break;case 16:p=[2,1];break;case 255:p=[t.readetutotype=new V;var $e,et={H264Stream:Ye,NalByteStream:Ke},tt=[96e3,88200,64e[t+8]<<7|e[t+9];return n=n>=0?n:0!=="I".chafunction(e){var e:function(e,t){va+10,tdts:t},this.trigger("data",o),l+=a}else{if(e.length-l<10)break;if(l+(a=ot.parseId3TagSize(e,l))>e.length)break;r={type:"timed-metadata",data:e.subarray(l,l+a)},this.trigger("data",r),l+=a}i=e.length-l,e=i>0?e.subarray(l):new Uint8Array},this.reset=fundeize"],ht=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],pt=ett.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},vt=function(e,t,n,i,r,o){return{start:{dts:e,pts:e+(n-t)},end:{dtngth),ce(e)h=a.length*c,this.trigger("segmentTimingInfo",vt(ae(e.baseMediaDecodeTime,e.samplerate),a[0].dts,a[0].pts,a[0].dts+h,a[0].pts+h,p||0)),this..trigger("rps:e.sps}),",e.baseMediaDecodfo",e.timelineStartInf=0,this.trigger("reset"a=n));return i?i.gop:ak}i.pts>r.pts?t--:(t===s.length-1&&(o=n),n--)}if(!a&&null=rototype.init.call(this),this.push=funideoTrack=null,this.peCapis.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=funineuxPipeline(e[1]),(uban:(192&e[1])>>>6,hasRed[3]}},kt=function(e){for(var t,n,i=e.byteLength,r=[],o=1;o<i-2;)0===e[o]&&0===e[o+1]&&3===rn e;t=i-r.length,n=new Uint8Array(t);var s=0;for(o=06&i.flags[2],l=32&i.flags[2],u=65536&i.flags[0],d=131072&i.flu&&(i.durationIsEmpty=!0),!r&&d&&(i.baseDataOffsetIsMoof=!0),i}(Et(&(1===n.v.byteLength),l=[];for(r=0;r+4<e.length;r+=o)if(o=a.getUint32(r),r+=4,!(o<=0))switch(31&e[r]){case 6:var u=e.subarray(r+1,r+1+o),d=At(r,ta. See mux.js#function(){e=function(e,o];else if(null===)}return a=function(e,t,nescale:n}}(e,n,i),null!=r):null},this.pushNalsll;t.forEac()},this.clearParsedCap,th(fu5]<.",r.codec+=Ot(d[9]ec=st(.le{var t=31&e[1]ar t=0;relayer_wit(e);return 0===n?"pat":n===t?"pmt":t?"pes":nulle[i+1])<<8|e[))return null;var t=4+Ut(e);yer_without_partitioning_rbsp_idr"===Bt(31&n[r+3])&&(o=!0)audush.pts=Vt(e.pts,deo.length){var i=t;if((void 0===i||isNaN(i))&&(i=e.video[0].dts),e.video.forEach((function(e){e.dts=Vt(e.dts,i),e.pts=Vt(e.pts,i),e.action:"caption",caption:t})})),t.on("trackinfrt:se(t.start),end:sParser.init());vas.self.posbuffer])},t.probeTs=function(e){var t=e.data,n=e.baseStartTime,i="number"!=typeof n||isNaN(n)?void 0:n*re,r=Yt(t,i),o=null;r&&((o={hasVideo:r.video&&2===r.video.length||!1,hasAudio:r.audio&&2===r.adio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:orAllCaptions()},t.cleadCaptions()a,e.byte,t.setTimestam)},t.setAudioAppe.appendStart)))},t.ction(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},e}();self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new Kt(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new Kt(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}))),Fa=Ma(Ba),Va=function(e){vatadata,u=i.videoFrameDtsTime,d=i.videoFramePtsTime;t.buffer.push({captions:s,captioment.boxes||{data:e.data.segment.data},h={type:r,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(o.data,o.byteOffset,o.byteLength)};void 0!==u&&(h.videoFrameDtsTime=u),void 0!==d&&(h.videoFramePtsTime=d),n(h)}(n,g,s),"trackinfo"===n.data.action&&a(n.data.trackInfo),"gopInfo"===n.data.action&&function(e,t){t.gopInfo=e.data.gopInfo}(n,g),"audioTimingInfo"===n.data.action&&l(n.data.audioTimingInfo),"videoTimingInfo"===n.data.action&&u(n.data.videoTimegmentTimingInfo),"audioSegmentTimingInfo"===n.data.action&&c(n.data.audioSegmentTimingInfo),"id3Frame"===n.data.action&&h([n.data.id3Frame],n.data.id3Frame.dispatchType),"caption"===n.data.action&&p(n.data.caption),"endedtimeline"===n.data.action&&(y=!1,m()),"transmuxed"===n.data.type&&(y||(t.onmessage=null,function(e){var t=e.transmuxedData,n=e.callback;t.buffer=[],n(t)}({transmuxedData:g,callback:f}),Ha(t))))},i&&t.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isAnst({anct===n&&(t.removeEvennew:t.t.u: "+i,code:2})}Wa({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(n){var i=n.tracks,r=n.data;return e.map.bytes=r,i.forEach((function(t){e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||(e.map.tracks[t.type]=t,"number"==typeof t.id&&t.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale))})),t(null)}})},Ja=function(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,r=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,a=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,d=e.endedTimelineFn,c=e.dataFn,h=e.doneFn,p=t.map&&t.map.tracks||{},f=Boolean(p.audio&&p.video),m=r.bind(null,t,"audio","startt.transmuxer,data:n,baseStartTime:t.baseStartTime,callback:function(e){t.bytes=n=e.data;var r=e.result;r&&(i(t,{hasAudo&&!f&&m(r.all,g=null),function(e){if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void Va(e);e.transmuxer.pendStart,gopsToAlignWith:t.gopsToAlignWith,remux:f,onData:function(e){e.type="combined"===e,e)},onTracf&&(e.isMuxed=!0),i(t,e))},onAudioion(e){VideoTimingInfo:function(e){g&&void 0!==e.start&&(g(e.start),g=null),y&&void 0!==e.end&&y(e.end)},onVideoSegmentTimingInfo:function(e){o(e)},onAudioSegmentTimingInfo:function(e){s(e)},onId3:function(e,n){a(t,e,n)},onCaptions:function(e){l(t,[e])},id()},onDone:function(e){h&&(e.type="combined"===e.type?"video":e.type,h(null,t,e))}})}})},$a=function(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,r=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,a=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,d=e.endedTimelineFn,;var f=t.map.tracks,m={isFmp4:!0,hasVideo:!!f.video,hasAudio:!!f.audio};f.audio&&f.audio.codec&&"enr i=e.data,o=e.startTime;n=i.buffer,t.bytes=p=i,m.hasAudio&&!m.isMuxed&&r(t,"audio","start",o),m.hasVideo&&r(t,"video","start",o),f.video&&i.byteLength&&t.transmuxer?Wa({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:p,timescales:t.map.timescales,trackIds:[f.video.id],callback:function(e){n=e.data.buffer,t.bytes=p=e.data,v(e.captions)}}ryptedBytes,s=e.decryptionWorker;s.addEventListener("message",(function e(n){if(n.data.source===i){s.removeEventListener("message",e);var r=n.data.decrypted;t(new Uint8Array(r.bytes,r.byteOffset,r.byteLength))}})),n=r.bytes.slice?r.bytes.slice():new Uint32Array(Array.prototype.slice.call(r.bytes)),s.postMessage(Ta({source:i,encrypted:o,key:n,iv:r.iv}),[o.buffer,n.buffer])},tl=function(e){var t=e.xhr,n=e.xhrOptions,i=e.decryptionWorker,r=e.segment,o=e.abortFn,s=e.progressFn,a=e.trackInfoFn,l=e.timingInfoFn,u=e.videoSegmentTimingInfoFn,d=e.audioSegmentTimingInfoFn,c=e.id3Fn,h=e.captionsFn,p=e.isEndOfTimeline,f=e.endedTimelineFn,m=e.dataFn,v=e.doneFn,g=[],y=function(e){var t=e.activeXhrs,n=e.decryptionWorker,i=e.trackInfoFn,r=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,a=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,d=e.endedTimelineFn,c=e.dataFn,h=e.doneFn,p=0,f=!1;return function(e,m){if(!f){if(e)return f=!0,Ya(t),h(e,m);if((p+=1)===t.length){var v=function(){if(m.encryptedBytes)return function(e){var t=e.decryptionWorker,n=e.segment,i=e.trackInfoFn,r=e.timingInfoFn,o=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,a=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,d=e.endedTimelineFn,c=e.dataFn,h=e.doneFn;el({id:n.requestId,key:n.key,encryptedBytes:n.encryptedBytes,decryptionWorker:t},(function(e){n.bytes=e,$a({segment:n,bytes:n.bytes,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:d,dataFn:c,doneFn:h})}))}({decryptionWorker:n,segment:m,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:d,dataFn:c,doneimingInfoFn:o,audioSegmentTimingInfoFn:s,id3Fn:a,captionsFn:l,isEndOfTimeline:u,endedTimelineFn:d,dataFn:c,doneFn:h})};if(m.endOfAllRequests=Date.now(),m.map&&m.map.encryptedBytes&&!m.map.bytes)return el({decryptionWorker:n,id:m.requestId+"-init",encryptedBytes:m.map.encryptedBytes,key:m.map.key},(function(e){m.map.bytes=e,Qa(m,(function(e){if(e)return Ya(t),h(e,m);v()}))}));v()}}}}({activeXhrs:g,decryptionWorker:i,trackInfoFn:a,timingInfoFn:l,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:d,id3Fn:c,captionsFn:h,isEndOfTimeline:p,endedTimelineFn:f,dataFn:m,doneFn:v});if(r.key&&!r.key.bytes){var _=[r.key];r.map&&!r.map.bytes&&r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&_.push(r.map.key);var b=t(Ts.mergeOptions w=Ts.mergeOptions(n,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:ga(r.map)}),S=function(e){var t=e.segment,n=e.finishProcessingFn;return function(e,i){var r=Ka){for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n++)t[n]=e.charCodeAt(n)ataFn,function(e){if(!e.target.aborted)return t.stats=Ts.mergeOptions(t.stats,(r=(i=e).target,(o={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-r.requestTime||0}).bytesReceived=i.loaded,o.bandwidth=Math.ftiTimingInfoFn:u,audioSegm((f{va=e.{},i=e.mediaGroups.AUDIO[n.AU nu0].,llction(e,n){if(!e)return"";var i=t().getComputedStyle(e);return i?i[n]:""},dl=function(e,t){var n=e.slice();e.sort((function(e,i){var r=t(e,i);return 0===r?n.indexOf(e)-n.indexOf(i):r}))},cl=functiayerDimensions:o},l=e.playlists;Js.isAudioOnly(e)&&(l=s.getAudioTrackPlaylists_(),a.audioOnly=!0);var u=l.map((function(e){var n=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,i=e.attrRESOLUTION.height;r).Number.MAX_VALUE,width:n,height:i,playlist:e}}));dl(u,(function(e,t){return e.bandwidth-t.bandwidth}));var d=(u=u.filter((function(e){return!Js.isIncompatible(e.playlist)}))).filter((function(e){return Js.isEnabled(e.playlist)}));d.length||(d=u.filter((function(e){return!Js.isDisabled(e.playlist)})));var c=d.filter((function(e){return e.bandwidth*Da.BANDWIDTlter((function(e){return e.bandwidth===h.bandwidth}))[0];if(!1==m="sortedPlaylistReps";return p&&(m="bandwidthBestRep"),d[0]&&(m="enabledPlaylistReps"),al("choosing "+ll(f)+"eturn al("cfunction(e){return e.width&&e..width}));var g=v.filter((function(e){return e.width===i&&e.height===r}));h=g[g.length-1];var y,_,b,T=g.filter((function(e){return e.bandwidth===h.bandwidth}))[0];T||(_=(y=v.filter((function(e){return e.width>i||e.height>r}))).filter((function(e){return e.width===y[0].width&&e.height===y[0].height})),h=_[_.length-1],bS+"Devis.playlist (ieofy [t=e.timelineChangeController,n=e.currentTimeline,i=e.segmentTimeline,r=e.loaderType,o=e.audioDisabled;if(n===i)return!1;if("audio"===r){var s=t.lastTimelineChange({type:"main"});return!s||s.to!==i}if("main"===r&&o){var a=t.pendingTimelineChange({type:"audio"});return!a||a.to!==i}return!1},bl=function(e){var t=e.segmentDuration,n=e.maxDuration;return!!t&&Math.round(t)>n+ks},Tl=function(e){function n(t,n){var i;if(i=e.call(this)||this,!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return i.bandwidth=t.bandwidth,i.throughput={rate:0,count:0},i.roundTrip=NaN,i.resetStats_(),i.mediaIndex=null,i.partIndex=null,i.hasPlayed_=t.hasPlayed,i.currentTime_=t.currentTime,i.seekable_=t.seekable,i.seeking_=t.seeking,i.duration_=t.duration,i.mediaSource_=t.mediaSource,i.vhs_=t.vhs,i.loaderType_=t.loaderType,i.currentMediaInfo_=void 0,i.startingMediaInfo_=void 0,i.segmentMetadataTrack_=t.segmentMetadataTrack,i.goalBufferLength_=t.goalBufferLength,i.sourceType_=t.sourceType,i.sourceUpdater_=t.sourceUpdater,i.inbandTextTracks_=t.inbandTextTracks,i.state_="INIT",i.timelineChangeController_=t.timelineChangeController,i.shouldSaveSegmentTimingInfo_=!0,i.parse708captions_=t.parse708captions,i.checkBufferTimeout_=null,i.error_=void 0,i.currentTimeline_=-1,i.pendingSegment_=null,i.xhrOptions_=null,i.pendingSegments_=[],i.audioDisabled_=!1,i.isPendingTimestampOffset_=!1,i.gopBuffer_=[],i.timeMapping_=0,i.safeAppend_=Ts.browser.IE_VERSION>=11,i.appendInitSegment_={audio:!0,video:!0},i.playlistOfLastInitSegment_={audio:null,video:null},i.callQueue_=[],i.loadQueue_=[],i.metadataQueue_={id3:[],caption:[]},i.waitingOnRemove_=!1,i.quotaExceededErrorRetryTimeout_=null,i.activeInitSegmentId_=null,i.initSegments_={}i.keyCache_={},i.decrypter_=t.decrypter,i.syncController_=t.syncController,i.syncPoint_={segmentIndex:0,time:0},i.transmuxer_=i.createTransmuxer_(e",i.triggerSyncInfoUpdate_),i.mediaSource_.addEventListener("sourceopen",(function(){i.isEndOfStream_()||(i.ended_=!1)})),i.fetchAtBuffer_=!1,i.logger_=Cs("SegmentLoader["+i.ion(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(thiEnoughInfoToAppend_()&&i.processCallQueue_()})),"main"===i.loaderType_&&i.()&&i.processLoadQueue_(),i.hasEnoughInfoToAppend_()&&i.processCallQueue_()})),i}l(n,e);var i=n.prototype;return i.createTranaction:"iniaAppends=0smuxer_.yncControt_.abortRequests&.captiont(this.quotaExte||this.penr("ended")},i.bufferdater_.bufferdUri:e.resolvedUri,bytimescas:e.bytes});var r={resolvedUri:(i||e).resolvedUri};return i&&(r.bytes=i.bytes),r},i.couldBeginLoading_this.log=a}}i&&(ipartIndex=null):(ion(){this.checout_),this.chec1,this.resyncLoader()},i.resyncLoader=function(){this.transmuxer_&&za(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],ion=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},i.remove=function(e,t,n,i){i(var s in!i&&this.audioDisabled_||(r++,this.sourceUpdater_.removeAudio(e,t,o)),(i||"main"===this.loaderType_)&&(this.gopBuffer_=function(e,t,n,i){for(var r=Math.ceil((t-i)*st.ONE_SECOND_IN_TS),o=Math.ceil((n-i)*st.ONE_SECOND_IN_TS),s=e.slice(),a=e.length;a--&&!(e[a].pts<=o););if(-1=oveVideo(e,t,o)),thison(){this.checimeout_=t().setTieline_,to:e.timeline}tartOfSegment=d,o.partIoAppendStart=h-this.sourceUpdSECOND_IN_TS);for(i=0;i<rentTime:t,bandrrentTimeline:this!s.playlist||s.playr o=n[r];if(o!==i[r]stId)||(this.pendinction(e){varush(t),e[t.startTime]=n,:this.inbandTextTracueue_.id3.push(this.handleId3_.bind(this,e,n,i))},i.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach((function(e){retdQueue_=[],e.forEach((function(e){return e()}))},i.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!(!e||this.currentMediaInfo_&&_l({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},i.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_;if(!e||!e.trackInfo)return!1;var t=this.currentMediaInfo_,n=t.hasAudio,i=t.hasVideo,r=t.isMuxed;return!(i&&!e.videoTimingInfo||n&&!this.audioDisabled_&&!r&&!e.audioTimingInfo||_l({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},i.handleData_=function(e,t){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[yl(t.type)].start;else{var i,r="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo;r&&(i=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:r,firstVideoFrameTimeForData:i,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:"main"===this.loaderType_});va,this.processMetadataQueue_(),th[t]=!0)},i.getInitSegmentAndis.logger_("On QUOTA_allQueue_()}),1e3)}),!0)nfo,o=e.type,s=e.initSegmen_.requestId){vEnd=n.end.decodBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push((function(){var n=o({},e,{forceTimestampOffset:!0});o(e,t.generateSegmentInfo_(n)),t.isPendingTimestampOffset_=!1,t.updateTransmuxerAndRequestSegment_(e)}))},i.updateTransmuxerAndRequestSegment_=function(e){var t=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var n=this.createSimplifiedSegmentObj_(e),i=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),r=null!==this.mediaIndex,o=e.timeline!==this.currentTimeline_&&e.timeline>0,s=i||r&&o;this.logger_("Requesting "+gl(e)),n.map&&!n.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=tl({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:n,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"callback")},id3Fn:this.handleI.mediaIndex-1];if(r&&tTime=r.audioTimingInfo.transdiaRequests+=1,e&atedStats_=function(e,t){tRelatedStats_(i.du,n){if(!t.length)return e;ifsafeAppend_)),this.state="APPENDING",thisteMediaSecondsLoadedthis.sourceUpdater_.audioTim={start:0},e.waitingid this.checkAppendsDone_(e);Video found in segment when we expect){var t=!1;e.timestampOestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}},i.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var t="main"===this.loaderType_&&this.currentMediaInfo_.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;t&&(e.timingInfo.end="number"==typeof t.end?t.end:t.start+e.duration)},i.handleAe reported duration is "+e.duration+" and the target duration is "+a+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return l||u?{severity:l?"warn":"info",message:d}:null}(e,this.sourceType_);if(t&&("warn"===t.severity?Ts.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",!e.isSyncRequest||(this.trigger("syncinfoupdate"),e.hasAppendedData_)){this.logger_("Appended "+gl(e)),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var n=e.segment;n.end&&this.currentTime_()-n.end>3*e.playlist.targetDuration?this.resetEverything():(null!==this.mediaIndex&&this._("Throwing away un-appen{custom:n.custom,dateTimeObject:n.dateTimeOblaylist.attributes.RESOL,ti{va?voours,t co,Pl r=uffndO"onvin ren.ldispose=function(){ourceBuffer()?e.removeSourceBuffer(t):e[n jl(t,e)}))})),thnent(escape(String.fromCharCode.apply(null,e)))},Hl=new Uint8Array("\n\n".split("").mapeTextTracks,i.shouldh-1].startTime;return 0===t&&Hl.byteL,byterangeginLoading_=fsTrack_},i.remove=function(e,t){fl(e,t,this.subtitlesTrack_)},i.fillBufferr_.timestampOffsetForxtRequest_=func,i.skipEmptySegments_=funcVTTCue)(e.startTime,e.endTime,e.text):e)})),function(e){var t=e.cues;if(t)for(vr=new(t().WebVTT.ParseMapping_=ping;if(e.cues.forEatTime,a=e.cues[e.cues.length-[t.endList||0===r?l:areturn o}},{name:"Segment",,run:function(e,t,n,i,=t.discontinuitySe:d.time,segmentIndex:l,partIndex:null})}}retuence-t.mediaSequevalue:i}):null},nectSyncPoint_(n,{ket,i=Math.abs(e[0].syncPoidex:"+n.partIndex:"")+"]"),n}ylist refresh sync: [timvar t=e.segmentInfo,n=e.shouldSaveTimelineMapping,i=this.calculateSegmentTimeMapping_(t,t.timingInfo,n),r=t.segment;i&&(this.Sequence:t.playlist.mediaSequent,mapping:e.startOfSegment-t.ence+i+1,snuities[o]||this.discotTimelineChange=function(eray(t.key.bytes,t.st:t,[n.buffer(n,i);var tracks[u].eveTrack();ror",$l[e](e,n))}},SUBTITLES:function(e,t,n){var i=n.tech,r=n.requestOptions,o=n.segmentLoaders[e],s=n.mediaTypes[e];t.on("loadedmetadata",(function(){var e=t.media();o.playlist(e,r),o.track(s.activeTrack()),(!i.paused()||e.endList&&"none"!==i.preload())&&o.load()})),t.on("loadedplaylist",(function(){o.playlist(t.media(),r),i.paused()||o.load()})),t.on("error",$l[e](e,n))}},tu={AUDIO:function(e,t){var n=t.vhs,i=t.sourceType,r=t.segmentLoaders[e],o=t.requestOptions,s=t.master.mediaGroups,a=t.mediaTypes[e],l=a.groups,u=a.tracks,d=a.logger_,c=t.masterPlaylistLoader,h=Qs(c.master);for(var p in s[e]&&0!==Object.keys(s[e]).length||(s[e]={main:{default:{default:!0}}}),s[e])for(var f in l[p]||(l[p]=[]),s[e][p]){var m=s[e][p][f],v=void 0;if(h?(d("AUDIO group '"+p+"' label '"+f+"' is a master playlist"),m.isMasterPlaylist=!0,v=null):v="vhs-json"===i&&m.playh)return;m=new Oa(s||{ons(c,d[c.teTextTracth;i++){if(Ks(n,t[i]))return!0;if(t[i].playlists&&e(t[i].playlists,n))return!0}return!1},iu={AUDIO:function(e,t){return function(){var n=t.mediaTypes[e].trackon(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if("showing"===n[i].mode||"hidden"===n[i].mode)return n[i];return null}}},ru=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],ou=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},su=function(e){function n(n){var i;i=e.call(this)||this;var r=n.src,o=n.handleManifestRedirects,a=n.withCredentials,l=n.tech,u=n.bandwidth,d=n.externVhs,c=n.useCueTags,h=n.blacklistDuration,p=n.enableLowInitialPlaylist,f=n.sourceType,m=n.cacheEncryptionKeys,v=n.experimentalBufferBasedABR;if(!r)throw new Error("A non-empty playlist URL or JSON manifest string is required");var g=n.maxPlaylistRetries;null==g&&(g=1/0),Sl=d,i.experimentalBufferBasedABR=Boolean(v),i.withCredentials=a,i.tech_=l,i.vhs_=l.vhanifestRedirects:o,maxPlaylistRetries:g,timeout:null},i.on("error",i.pauseLoading),i.mediaTypes_=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:wl,activeTrack:wl,getActiveGroup:wl,onGroupChanged:wl,onTrackChanged:wl,lastTrack_:null,logger_:Cs("MediaGroups["+t+"]")}})),e}(),i.mediaSource=new(t().MediaSource),i.handleDurationChange_=i.handleDurationChange_.bind(s(i)),i.handleSourceOpen_=i.handleSourceOpen_.bind(s(i)),i.handleSourceEnded_=i.handleSourceEnded_.bind(s(i)),i.mediaSource.addEventListener("durationchange",i.handleDurationChange_),i.mediaSource.addEventListener("sourceopen",i.handleSourceOpen_),i.mediaSource.addEventListener("sourceended",i.handleSourceEnded_),i.seekable_=Ts.createTimeRanges(),i.hasPlayed_=!1,i.syncController_=new Gl(n),i.segmentMetad"metadata",label:"segment-metadata"},!1).track,i.decrypter_=new Kl,i.sourceUpdater_=new Fl(i.mediaSource),i.inbandTextTracks_={},i.timelineChangeController_=new Xl;var y={vhs:i.vhs_,parse708captions:n.parse708captions,mediaSource:i.mediaSource,currentTime:i.tech_.currentTime.bind(i.tech_),seekable:function(){return i.seekable()},seeking:function(){return i.tech_.seeking()},duration:function(){return i.duration()},hasPlayed:function(){return i.hasPlayed_},goalBufferLength:function(){return i.goalBufferLength()},bandwidth:u,syncController:i.syncController_,decrypter:i.decrypter_,sourceType:i.sourceType_,inbandTextTracks:i.inbandTextTracks_,cacheEncryptionKeys:m,sourceUpdater:i.sourceUpdater_,timelineChangeController:i.timelineChangeController_};i.masterPlaylistLoader_="dash"===i.sourceType_?new Oa(r,i.vhs_,i.requestOptions_):new ha(r,i.vhs_,i.requestOptions_),i.setupMasterPlaylistLoaderListeners_(),i.mainSegmentLoader_=new Tl(Ts.mergeOptions(y,{segmentMetadataTrack:i.segmentMetadataTrack_,loaderType:"main"}),n),i.audioSegmentLoader_=new Tl(Ts.mergeOptions(y,{loaderType:"audio"}),n),i.subtitleSegmentLoader_=new ql(Ts.mesNativeTextTracks:i.tech_.featuresNativeTextTracks}),n),i.setupSegmentLoaderListeners_(loadedplaylist",(function(){return i.startABRTimer_()})),i.tech_.on("pause",(function(){return i.stopABRTimer_()})),i.tech_.on("play",(function(){return i.startABRTimer_()}))),ru.forEach((function(e){i[e+"_"]=ou.bind(s(i),e)}))Data__=-1,i.mainAppendsToLoadedData__=-1,i.audioAppendsToLoadedData__=-1;var _="none"===i.tech_.preload()?"play":"loadstart";return i.tech_.one(_,(function(){var e=Date.now();i.tech_.one("loadeddata",(function(){i.tedData__=i.audioSegmentLoader_.mediaAppends}))})),i}l(n,e);var i=n.prototypndsToLoadedDataoLoadedData__},i.Media_=function(om "+t),this.tech_.triggerplaylists||[];var t,n=e.mediaGroups.AUthis.masterPlaylistLoader_.one:"vhs-rendition-enabled}),this.tech_.trigger({c+" > "+h+")"),l(f),!0}return ltech_.trigger({type:"uage||(eed"),e.onEndOfStream()}mediaSecondsLoaded+the&&(e=th_.currentTime())d()||this.hasPlayed_play"),e.tech_.setCurthis.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.t){this.tech_.trigger("e&&(this.stopABRTimer_(),thttributes.AUDIOutes.SUBTITLES!==n.),(r||"subtitle"=.segments?tioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlayli0)||r.start(0)>e.t=this.seeoller_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaurce.removeEventListenceended",this.handleSourceEnded_),this.off()},i.master=function(){return this.masterPlaylistLoader_.master},i.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},i.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader;return!(!this.mainSegmentLoader_.currentMediaInfo_||e&&!this.audioSegmentLoader_.currentMediaInfo_)},i.getCodecsOrExclude_=function(){var e=this,t={main:this.mainSegmentLoader_.currentMediaInfo_||{},audio:this.audioSegmentLoader_.currentMediaInfo_||{}};t.video=t.main;var n=sl(this.master(),this.media()),i={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.haAudio||r)&&(i.audio=n.audio||t.main.audioCodec||t.audio.audioCodec||q,t.audio.isFmp4=t.main.hasAudio&&!t.mai.forEach((function(e){if(i.hasOwnProperty(e)&&(r=t[e].isFmp4,a=i[e],!(r?V(a):H(a)))){var n=t[e].isFmp4?"browser":"muxer";s[n]=s[n]||[],s[n].push(i[e]),"audio"===e&&(o=n)}var r,a})),r&&o&&this.media().attributes.AUDIO){var a=this.media().attributes.AUrt codec(s): "'+i.audio+'"')}if(!Object.keys(s).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var l=[];if(["video","audio"].forEach((function(t){var n=(U(e.sour.toLowerCase()&&l.push('"'+e.sourceUpdater_.codecs[t]+'" -> "'+i[t]+'"')})),l.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+l.join(", ")+".",blacklistDuration:1/0,internal:!0})}return i}var u=Object.ke codecs for playlist.",blacklition(i){var r=t[i];if(-1===n.innChangeType()){v;continue}r.endTimevar l=a.cueOutCont.spn=Da.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,Da.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*N;this.width=l&&l.width,this.height=l&&l.height,this.bandwidth=t.attributes.BANDWIDTH}this.codecs=sl(s.master(),t),this.playlist=t,this.id=n,this.enabled=(i=e.playlists,r=t.id,o=a,function(e){var t=i.master.playlists[r],n=Ws(t),s=Gs(t);return void 0===e?s:(e?delete t.disabled:t.disabled=!0,e===s||n||(o(),e?i.trigger("renditionenabled"):i.trigger("renditiondisabled")),e)})},lu=["seeking","seeked","pause","playing","error"],uu=function(){function e(e){var n=this;this.masterPlaylistController_=e.masterPlaylistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checksBadSeeks_()},l=this.masterPlaylistController_,u=["main","subtitle","audio"],d={};u.forEach((function(e){d[e]={reset:function(){return n.resetSegmentechanged",a),n.tech_.off("waiting",o),n.tech_.o["seeked","seeking"],d[e]eckCurrentTimeTimeout_),tle stalled download)!this.tech_.see-1)))return this.rn!!functiorn n.length&&e+.setCurrentTime(t),thisar s=o.start(0)-t;returnncelTimer_(),this.ion(e){var t=e=function(e){var t=this.tp"}),this.tech_.trigger({type:"usageretu"usoad-canceled"})):o.getSource&&"function"==typeof o.getSource?(i=Date.now(),o.getSource.call(t,a)):void Ts.log.loadSourceOnError=function(n){u(),e(t,n)}},hu=function(e).devicePixelRatio||1;return n<0&&(n=this.systemBandwiesolution:function(e,n){var i,r;ret:va()};Object.keys(Da).for},set:function(t){Ts.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?Ts.log.warnngth;r++)if(e[r].id==return null}};fu.supportsNativeHls=function(){if(!r()||!r().createElement)return!1;var e=r().createElement("video");return!!Ts.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio","application/r()&&r().createElem_.fastQualityChange_():o.masterPlaylistControstRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS"].forEach((function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.vicePixelRatio},i.src=function(e,n){var i=this;if(e){var r;this.setOptions_(),this.options_.src=0===(r=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(r.substring(r.indexOf(",")+1)):r,this.options_.tech=this.tech_,this.options_.externVhs=fu,this.options_.sourceType=G(n),this.options_.seekTo=function(e){i.tech_.setCurrentTime(e)},this.options_.smoothQualityChange&&Ts.log.warn("smoothQualityChange is deprecated and will be removed in thmedia:function(){return i.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new uu(o),this.masterPlaylistController_.on("error",(function(){var e=Ts.players[i.tech_.options_.playerId],t=i.masterPlaylistController_.error;"object"!=typeof t||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)}));var s=this.options_.experimentalBufferBasedABR?fu.movingAverageBandwidthSelector(.55):fu.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.seltInitialPlaylist=.mass.masterPlaylistctPlylistController_.mainSdth:.bandwidth},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{geidth||1);return e=this.throughput>0?1/this.throughput:0,Math.floor(1/(t+e))},set:function(){Ts.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return i.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return i.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return i.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return i.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return i.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return i.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return i.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return i.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return i.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mai_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return i.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return i.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return i.masterPlaylistController_.timeToLoadedData_()||0},enueturn Os(i.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return i.tech_.currentTime()},enumerablei.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return i.tech_.name_},enumerable:!0},duration:{get:function(){return i.tech_.duration()},enumerable:!0},master:{get:function(){return i.playlists.master},enumerable:!0},playerDimensions:{get:function(){return i.tech_.currentDimensions()},enumerabasterPlaylistController_.setupFirstPlay.bind(this.masterPlayi.bandwidth,throughput:Math.round(i.throughput)})})),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var e;(e=i).representations=funcster(),n=Qs(t)?e.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists;return n?n.filter((function(e){return!Ws(e)})).map((function(t,n){return new au(e,t,t.id)})):[]}})),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",(function(){i.setupEme_()})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(thiCODECS))),n&&n.attributes&&n.attributes.CODECS&&(i.audio=n.attributes.CODECS);var r=F(i.video),o=F(i.audio),s={};for(var a in e)s[a]={},o&&(s[a].audioContentType=o),r&&(s[a].videoContentType=r),t.contentProtection&&t.contentProtection[a]&&t.contentProtecection[n];return i&&i.pssh&&(e[n]={pssh:i.pssh}),e}),{});return Object.keys(n).length&&e.push(n),e}),[])),l=[],u=[];return a.forEach((functi,i){t.emeurceKeySystems:this.source_.keySystems,audioMedia:r&&r.media(),mainPlaylists:this.playliss.tech_.oplectedinitialmedia",(function(){var t,n;t=e.qualityLevels_,(n=e).representations().forEach((function(e){t.addQualityLevel(e)})),vu(t,n.playlists)})),this.playlists.on("mediachange",(function(){vu(e.qualityLevels_,e.playlists)})))},n.version=function(){return{"@videojs/http-streaming":pu,"mux.js":"5.11.1","mpd-parser":"0.17.0","m3u8-parser":"4.7.0","aes-decrypter":"3.1.2"}},i.version=function(){rethis.qualityLevels_&&thiStart});var s={mediaent);return a&&(s.programDateTime=a.toISOString()),r(null,s)}({playlist:this.masterPlaylistConvoid 0===i&&(t);return _u",{get:function(){return Ts.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=va(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){void 0===t&&(t={});var n=Ts.mergeOptions(Ts.options,t).vhs.overrideNative,i=void 0===n?!Ts.browser.IS_ANY_SAFARI:n,r=G(e);return!r||fu.supportsTypeNatively(r)&&!i?"":"maybe"}};V("avc1.4d400d,mp4a.40.2")&&Ts.getTech("Html5").registerSourceHandler(_u,0),Ts.VhsHandler=yu,Object.defineProperty(Ts,"HlsHandler",{er instead."),yu},configurable:!0}),Ts.VhsSourceHandler=_u,Object.defineProperty(Ts,"HlsSourceHandler",{get:function(){return Ts.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),_u},configurable:!0}),Ts.Vhs=fu,Object.defineProperty(Ts,"Hls",{get:function(){return Ts.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),fu},configurable:!0}),Ts.use||(Ts.registerComponent("Hls",fu),Ts.registerComponent("Vhs",fu)),Ts.options.vhs=Ts.options.vhs||{},Ts.options.hls=Ts.options.hls||{},Ts.registerPlugin?Ts.registerPlugin("reloadSourceOnError",hu):Ts.plugin("reloadSourceOnError",hu);var bu=Ts,Tu=n(8171);const wu=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"");var Su={title:"",descr:"",poster:"",preload:"metadata",linkBaseURL:window.location.href,linkBaseOrigin:wu,playerId:0,videoId:0,"flash.swf":"https://static.metro.co.uk/videojs/video-js.swf",plugins:{"player-state":{},"player-events":{},"autoplay-next-video":{},refresh:{},title:{},mobile:{},gaEvents:{},ga4Events:{},rtaTracking:{},"ads-setup":{masterVideoTag:"https://pubads.g.doubleclick.net/gampad/ads?iu=%2F5765%2Fmetro.video&impl=s&gdfp_req=1&env=vp&output=xml_vast3&unviewed_position_start=1",adCancelTimeout:5e3}}};function Eu(e){if(!(this instanceof Eu))return new Eu(e);this.options=e||Su,this.options.flaswf"}}Eu.prototype.run=function(e){let t=this.options,n=Eu.getMediaEls(e),i=Eu.filterByInstantiability(n),r=[];return Tu.Z.forEach(i,(function(e){try{let n=Tu.Z.extend({},t,Eu.getMediaOpts(e));n.preload="metadata",n.plugins["branded-content"]&&delete n.plugins.title;let i=!1;n.autoplay&&(delete n.autoplay,i=!0),n.isAutoplay=i;const o=videojs(e,n);i&&o.ready((()=>{o.play()})),r.push(o)}catch(e){console.error(e.message)}})),r},Eu.getMediaEls=function(e){if(e=e||document,Eu.isVideoElement(e))return[e];let t,n,i=e.getElementsByTagName("video"),r=[];if(i&&i.length>0)for(t=0,n=i.length;t<n;t++)r.push(i[t]);return r},Eu.filterByInstantiability=function(e){return e.filter(Eu.canBeInstantiated)},Eu.isVideoElement=function(e){return!!e&&!!e.tagName&&"VIDEO"===e.tagName.toUpperCase()},Eu.canBeInstantiated=function(e){return Eu.isVideoElement(e)&&!!e.getAttribute("data-opts")},Eu.getMediaOpts=function(ea-opts");return JSON.parse(t)}catch(e){throw new Error("Video Player Setup Error: There was an error parsing media options from video element")}},n.g.videojs=bu,n(6863),n(2288),n(9390),n(999),n(5598),n(8841),n(7852),n(7865),n(7469),n(4781),n(9191),n(893),n(4850),n(1386),n(1478),n(3461),n(6839),n(7931),n(2609),window.metroVideoplayer=new class{init(e){return(new Eu).run(e)}},window.metroVideoplayer.init(document)}()}();