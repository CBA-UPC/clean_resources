!function(){var e,t={JUhV:function(e,t,n){"use strict";n.d(t,{gx:function(){return Im},ZP:function(){return km}});var o,r,i,a,s=n("zThL"),c=n("q1tI"),u=n("i8i4"),l=n("sINF"),d=n("ANjH"),h=n("1RQZ"),p=n("8ckN"),f="ACTION_SHEET_RESTART_CONFIRMATION_TITLE",g="ACTION_SHEET_RESTART_CONFIRMATION_TEXT",m="ACTION_SHEET_RESTART_CONFIRMATION_CONFIRM",v="ACTION_SHEET_RESTART_CONFIRMATION_CANCEL",E="ACTION_SHEET_END_ACTIVE_SESSION_TITLE",C="ACTION_SHEET_END_ACTIVE_SESSION_TEXT",S="ACTION_SHEET_END_ACTIVE_SESSION_CANCEL",y="ACTION_SHEET_NOTIFICATION_PERMISSION_REQUEST_TITLE",b="ACTION_SHEET_NOTIFICATION_PERMISSION_REQUEST_TEXT",_="ACTION_SHEET_NOTIFICATION_PERMISSION_REQUEST_CONFIRM",T="ACTION_SHEET_NOTIFICATION_PERMISSION_REQUEST_CANCEL",I="ACTION_SHEET_NOTIFICATION_PERMISSION_SUCCESS_TITLE",N="ACTION_SHEET_NOTIFICATION_PERMISSION_SUCCESS_TEXT",O="ACTION_SHEET_NOTIFICATION_PERMISSION_SUCCESS_CONFIRM",R="ACTION_SHEET_LEAVE_QUEUE_TITLE",A="ACTION_SHEET_LEAVE_QUEUE_TEXT",k="ACTION_SHEET_LEAVE_QUEUE_CONFIRM",Z="ACTION_SHEET_LEAVE_QUEUE_CANCEL",w="ACTION_SHEET_CHAT_BLOCKED_TITLE",M="ACTION_SHEET_CHAT_BLOCKED_CONFIRM",D="ANNOUNCER_BUTTON",P="ANNOUNCER_SUPPORT",L="ANNOUNCER_USER",B="ANNOUNCER_AUTOCOMPLETE",H="BACK",V="BUBBLE_FAILED",U="BUBBLE_SECURE_MESSAGE",F="CHAT_INPUT_ADD_ATTACHMENT",x="CHAT_INPUT_PLACEHOLDER_TEXT",j="CHAT_INPUT_REGION_TITLE",q="CHAT_INPUT_ANCHOR_TITLE",W="CHAT_INPUT_SEND_BUTTON_TEXT",G="CHAT_MESSAGES_REGION_TITLE",z="CHAT_MESSAGES_ANCHOR_TITLE",Q="CHAT_NAV_BAR_MENU",Y="CHAT_NAV_BAR_MENU_BUTTON",K="CHAT_NAV_BAR_SOUND_ON",X="CHAT_NAV_BAR_SOUND_OFF",$="CHAT_NAV_BAR_REGION_TITLE",J="CHAT_NAV_BAR_ANCHOR_TITLE",ee="CHAT_NAV_BAR_DRAG",te="CHAT_NAV_BAR_UNDOCK",ne="CHAT_NAV_BAR_DOCK",oe="COMPONENT_VIEW_MISSING_FIELD_ERROR",re="COMPONENT_VIEW_REQUIRED_FIELD",ie="MINIMIZE",ae="CONNECTED",se="DISMISS",ce="END_BUTTON_TEXT",ue="CHAT_BANNER_NO_CONNECTION",le="CHAT_BANNER_IMAGE_UPLOAD",de="CHAT_BANNER_POPUP_BLOCKER",he="CHAT_BANNER_MESSAGE_EXPIRED",pe="CHAT_BANNER_INLINE_FORM_FAILED",fe="CHAT_BANNER_CHAR_LIMIT_EXCEEDED",ge="CHAT_BANNER_DISCONNECTED",me="CHAT_BANNER_BLOCKED_IN_CALL",ve="ERROR_VIEW_CONNECTION_ERROR",Ee="ERROR_VIEW_LOG_IN_PROMPT",Ce="ERROR_VIEW_EXPIRED_CREDENTIALS",Se="ERROR_VIEW_BROWSER_STORAGE_ACCESS",ye="ERROR_VIEW_RETRY_CONNECTION_BUTTON",be="ERROR_VIEW_LOG_IN_BUTTON",_e="ERROR_VIEW_COMPONENT",Te="EWT_SHEET_LEAVE_BUTTON",Ie="MODAL_VIEW_CLOSE",Ne="NEW_QUESTION_BUTTON_TEXT",Oe="NEW_QUESTION_BUTTON_REGION",Re="REQUEST_FAILURE",Ae="TRY_AGAIN",ke="UNREAD_MESSAGE_TEXT",Ze="UNREAD_MESSAGES_TEXT",we="QUICK_REPLY_REGION_TITLE",Me="QUICK_REPLY_ANCHOR_TITLE",De="COBROWSING_STATE_PENDING",Pe="COBROWSING_STATE_ACTIVE",Le="COBROWSING_STATE_DECLINED",Be="COBROWSING_STATE_ENDED_BY_AGENT",He="COBROWSING_STATE_ENDED_BY_USER",Ve="COBROWSING_STATE_ENDED_BY_DISABLED_PAGE",Ue="COBROWSING_STATE_ERROR",Fe="LOADING",xe="SMS_FORM_HEADER",je="SMS_PHONE_NUMBER_CHAT_INSTEAD_TITLE",qe="SMS_PHONE_NUMBER_OMNI_BADGE_TITLE",We="SMS_PHONE_NUMBER_CHAT_INSTEAD_DESCRIPTION",Ge="SMS_PHONE_NUMBER_OMNI_BADGE_DESCRIPTION",ze="SMS_PHONE_NUMBER_INPUT_TITLE",Qe="SMS_PHONE_NUMBER_PRIMARY_BUTTON_TEXT",Ye="SMS_VERIFICATION_CODE_TITLE",Ke="SMS_VERIFICATION_CODE_DESCRIPTION",Xe="SMS_VERIFICATION_CODE_INPUT_TITLE",$e="SMS_VERIFICATION_CODE_PRIMARY_BUTTON_TEXT",Je="SMS_VERIFICATION_CODE_SECONDARY_BUTTON_DEFAULT",et="SMS_VERIFICATION_CODE_SECONDARY_BUTTON_LOADING",tt="SMS_VERIFICATION_CODE_SECONDARY_BUTTON_SENT",nt="SMS_ERROR_TOO_MANY_RETRIES_TITLE",ot="SMS_ERROR_TOO_MANY_RETRIES_DESCRIPTION",rt="SMS_ERROR_TOO_MANY_RETRIES_PRIMARY_BUTTON_TEXT",it="SMS_TITLE_CLOSE",at="SMS_GO_BACK",st="INFOBAND_TIME_AT",ct="INFOBAND_COBROWSING_STARTED",ut="INFOBAND_COBROWSING_ENDED",lt="INFOBAND_COBROWSING_END_BY_USER",dt="INFOBAND_COBROWSING_END_BY_AGENT",ht="INFOBAND_COBROWSING_END_BY_DISABLED_PAGE",pt="TYPING_INDICATOR_LIVE_CHAT",ft="TYPING_INDICATOR_SRS",gt="EWT_TITLE_GENERIC_NO_POSITION",mt="EWT_TITLE_GENERIC_POSITION",vt="EWT_TITLE_LINE_POSITION",Et="EWT_MAIN_MAX_TIME",Ct="EWT_MAIN_MIN_TIME",St="EWT_MAIN_RANGE_TIME",yt="EWT_MAIN_PRECISE_TIME",bt="UTILS_TIME_HR",_t="UTILS_TIME_MIN",Tt="UTILS_TIME_RANGE_MIN",It="UTILS_TIME_RANGE_HR",Nt="UTILS_TIME_RANGE_GENERIC",Ot="UTILS_ORDINAL_SENTENCE_NUMBER_1ST",Rt="UTILS_ORDINAL_SENTENCE_NUMBER_2ND",At="UTILS_ORDINAL_SENTENCE_NUMBER_3RD",kt="UTILS_ORDINAL_SENTENCE_NUMBER_NTH",Zt="UTILS_ORDINAL_ONLY_NUMBER_1ST",wt="UTILS_ORDINAL_ONLY_NUMBER_2ND",Mt="UTILS_ORDINAL_ONLY_NUMBER_3RD",Dt="UTILS_ORDINAL_ONLY_NUMBER_NTH",Pt=(o={},(0,s.Z)(o,f,"Are you sure?"),(0,s.Z)(o,g,"It looks like you're in the middle of something. "),(0,s.Z)(o,m,"Never mind, I'll continue"),(0,s.Z)(o,v,"I want to ask a new question"),(0,s.Z)(o,E,"Looks like you’re chatting somewhere else."),(0,s.Z)(o,C,"Would you like to end that session and ask a new question here? If not, you’ll need to find the browser window you were previously chatting in."),(0,s.Z)(o,S,"End active session"),(0,s.Z)(o,y,"Never miss a message"),(0,s.Z)(o,b,"Enable push notifications so you know when you receive a message. \n \nWhen your browser asks to show you notifications, select “Allow”."),(0,s.Z)(o,_,"No thanks"),(0,s.Z)(o,T,"Enable notifications"),(0,s.Z)(o,I,"Notifications enabled!"),(0,s.Z)(o,N,"Make sure your volume is on.\n We’ll notify you when there’s a new message."),(0,s.Z)(o,O,"Got it"),(0,s.Z)(o,R,"Are you sure?"),(0,s.Z)(o,A,"If you leave, you'll lose your place in line."),(0,s.Z)(o,k,"Never mind, I’ll keep waiting"),(0,s.Z)(o,Z,"Yes, leave the line"),(0,s.Z)(o,w,"Phone call in progress..."),(0,s.Z)(o,M,"Okay"),(0,s.Z)(o,D,"Button"),(0,s.Z)(o,P,"Support"),(0,s.Z)(o,L,"You"),(0,s.Z)(o,B,"{0} autocomplete options available. Use the up and down arrows to browse"),(0,s.Z)(o,H,"Back"),(0,s.Z)(o,V,"Not delivered. Retry?"),(0,s.Z)(o,U,"Send a secure message"),(0,s.Z)(o,F,"Add an image attachment"),(0,s.Z)(o,x,"Type here"),(0,s.Z)(o,j,"Chat Input"),(0,s.Z)(o,q,"Jump to Chat Input"),(0,s.Z)(o,W,"send"),(0,s.Z)(o,G,"Chat Log"),(0,s.Z)(o,z,"Jump to Chat Log"),(0,s.Z)(o,Q,"Chat Menu"),(0,s.Z)(o,Y,"Toggle Chat Menu"),(0,s.Z)(o,K,"Sound On"),(0,s.Z)(o,X,"Sound Off"),(0,s.Z)(o,$,"Chat Navigation"),(0,s.Z)(o,J,"Jump to Chat Navigation"),(0,s.Z)(o,ee,"Drag window"),(0,s.Z)(o,te,"Pop out chat"),(0,s.Z)(o,ne,"Re-dock"),(0,s.Z)(o,oe,"Some required fields are missing."),(0,s.Z)(o,re,"Required field"),(0,s.Z)(o,ie,"Minimize Chat"),(0,s.Z)(o,ae,"Connected"),(0,s.Z)(o,se,"Dismiss"),(0,s.Z)(o,ce,"End Chat"),(0,s.Z)(o,ue,"Please check your connection"),(0,s.Z)(o,le,"Image upload failed."),(0,s.Z)(o,de,"For best results, make sure your browser allows popups."),(0,s.Z)(o,he,"Message expired."),(0,s.Z)(o,pe,"Sorry, we're having trouble loading that form. Please try again."),(0,s.Z)(o,fe,"This message is too long to send"),(0,s.Z)(o,ge,"No connection. Retry connecting?"),(0,s.Z)(o,me,"Chat unavailable during phone call"),(0,s.Z)(o,ve,"Chat disconnected"),(0,s.Z)(o,Ee,"Please log in to continue"),(0,s.Z)(o,Ce,"Sorry, we are having trouble connecting. Please try again later."),(0,s.Z)(o,Se,"Please enable third-party cookies on your browser"),(0,s.Z)(o,ye,"Try reconnecting"),(0,s.Z)(o,be,"Log in"),(0,s.Z)(o,_e,"We’ve encountered an unexpected error. Our engineers have been notified. Please try again later."),(0,s.Z)(o,Te,"Leave"),(0,s.Z)(o,Ie,"Dismiss Modal"),(0,s.Z)(o,Ne,"New Question"),(0,s.Z)(o,Oe,"Jump to New Question button"),(0,s.Z)(o,Re,"We’re having technical issues - we’re on it. \n Please try again in a few minutes."),(0,s.Z)(o,Ae,"Try again"),(0,s.Z)(o,ke,"{0} unread message"),(0,s.Z)(o,Ze,"{0} unread messages"),(0,s.Z)(o,we,"Suggested Questions"),(0,s.Z)(o,Me,"Jump to Suggested Questions"),(0,s.Z)(o,De,"Co-Browse Request"),(0,s.Z)(o,Pe,"Active Co-Browsing Session"),(0,s.Z)(o,Le,"You have declined Co-Browsing invitation"),(0,s.Z)(o,Be,"Agent has ended Co-Browsing session"),(0,s.Z)(o,He,"You have ended Co-Browsing session"),(0,s.Z)(o,Ve,"Co-Browsing Session Ended - Disabled Page"),(0,s.Z)(o,Ue,"Co-Browsing Session Failed"),(0,s.Z)(o,Fe,"Loading"),(0,s.Z)(o,xe,"Text with us"),(0,s.Z)(o,je,"What number should we text?"),(0,s.Z)(o,qe,"Text with us"),(0,s.Z)(o,We,""),(0,s.Z)(o,Ge,"Enter your phone number and a live agent will text you on your device."),(0,s.Z)(o,ze,"Phone number"),(0,s.Z)(o,Qe,"Text me"),(0,s.Z)(o,Ye,"Enter your confirmation code"),(0,s.Z)(o,Ke,"Please enter the 6-digit code texted to "),(0,s.Z)(o,Xe,"Confirmation code"),(0,s.Z)(o,$e,"Submit"),(0,s.Z)(o,Je,"Resend Code"),(0,s.Z)(o,et,"Sending..."),(0,s.Z)(o,tt,"Sent"),(0,s.Z)(o,nt,"Too many tries!"),(0,s.Z)(o,ot,"Please try again later or try a different contact method."),(0,s.Z)(o,rt,"Go Back"),(0,s.Z)(o,it,"Close Window"),(0,s.Z)(o,at,"Go Back"),(0,s.Z)(o,st,"{0} at {1}"),(0,s.Z)(o,ct,"Co-Browsing Session Started"),(0,s.Z)(o,ut,"Co-Browsing Session Ended"),(0,s.Z)(o,lt,"Co-Browsing Session Ended by You"),(0,s.Z)(o,dt,"Co-Browsing Session Ended by Agent"),(0,s.Z)(o,ht,"Co-Browsing Session Ended - Unsupported Page"),(0,s.Z)(o,pt,"Agent is typing"),(0,s.Z)(o,ft,"Support is responding"),(0,s.Z)(o,gt,"Estimated wait time"),(0,s.Z)(o,mt,"Your position in line"),(0,s.Z)(o,vt,"You're {0} in line"),(0,s.Z)(o,Et,"Less than {0} wait"),(0,s.Z)(o,Ct,"Over {0} wait"),(0,s.Z)(o,St,"{0} wait"),(0,s.Z)(o,yt,"~{0} wait"),(0,s.Z)(o,bt,"{0} hr"),(0,s.Z)(o,_t,"{0} min"),(0,s.Z)(o,Tt,"{0}–{1} min"),(0,s.Z)(o,It,"{0}–{1} hr"),(0,s.Z)(o,Nt,"{0}–{1}"),(0,s.Z)(o,Ot,"{0}st"),(0,s.Z)(o,Rt,"{0}nd"),(0,s.Z)(o,At,"{0}rd"),(0,s.Z)(o,kt,"{0}th"),(0,s.Z)(o,Zt,"{0}st"),(0,s.Z)(o,wt,"{0}nd"),(0,s.Z)(o,Mt,"{0}rd"),(0,s.Z)(o,Dt,"{0}th"),o),Lt=(r={},(0,s.Z)(r,f,"Confirme por favor"),(0,s.Z)(r,g,"Parece que usted está en medio de algo."),(0,s.Z)(r,m,"Cambié de opinión, quiero regresar"),(0,s.Z)(r,v,"Quiero hacer una nueva pregunta"),(0,s.Z)(r,E,"Parece que usted ya está hablando en otro lugar."),(0,s.Z)(r,C,"¿Le gustaría terminar esa sesión y hacer una nueva pregunta aquí? Si no es así, deberá buscar la pestaña de su navegador donde estaba conversando previamente."),(0,s.Z)(r,S,"Cerrar sesión activa"),(0,s.Z)(r,y,"No se pierda ningún mensaje"),(0,s.Z)(r,b,'Habilite las notificaciones para obtener una alerta al recibir un mensaje. \n \nCuando su navegador le pregunte si desea mostrar notificaciones del sitio, seleccione "Permitir".'),(0,s.Z)(r,_,"No gracias"),(0,s.Z)(r,T,"Habilitar notificaciones"),(0,s.Z)(r,I,"¡Notificaciones habilitadas!"),(0,s.Z)(r,N,"Asegúrese de tener el volumen encendido.\nLe notificaremos cuando haya un nuevo mensaje."),(0,s.Z)(r,O,"Ok"),(0,s.Z)(r,R,"Confirme por favor"),(0,s.Z)(r,A,"Si abandona la fila, perderá su lugar"),(0,s.Z)(r,k,"Prefiero esperar"),(0,s.Z)(r,Z,"Sí, quiero abandonar la fila"),(0,s.Z)(r,w,"Llamada en progreso..."),(0,s.Z)(r,M,"Ok"),(0,s.Z)(r,D,"Botón"),(0,s.Z)(r,P,"Soporte"),(0,s.Z)(r,L,"Usted"),(0,s.Z)(r,B,"{0} opciones disponibles para autocompletar. Use las flechas hacia abajo o hacia arriba para desplazarse"),(0,s.Z)(r,H,"Volver"),(0,s.Z)(r,V,"No enviado. ¿Reintentar?"),(0,s.Z)(r,U,"Enviar un mensaje seguro"),(0,s.Z)(r,F,"Adjuntar una imagen"),(0,s.Z)(r,x,"Escriba aquí"),(0,s.Z)(r,j,"Campo de texto"),(0,s.Z)(r,q,"Ir al campo de texto"),(0,s.Z)(r,W,"enviar"),(0,s.Z)(r,G,"Historial del chat"),(0,s.Z)(r,z,"Ir al historial de chat"),(0,s.Z)(r,Q,"Menú de chat"),(0,s.Z)(r,Y,"Abrir / cerrar menú de chat"),(0,s.Z)(r,K,"Sonido prendido"),(0,s.Z)(r,X,"Sonido apagado"),(0,s.Z)(r,$,"Navegación del chat"),(0,s.Z)(r,J,"Ir a navegación del chat"),(0,s.Z)(r,ee,"Arrastrar ventana"),(0,s.Z)(r,te,"Desanclar el chat"),(0,s.Z)(r,ne,"Reanclar"),(0,s.Z)(r,oe,"Algunos campos requeridos están vacíos."),(0,s.Z)(r,re,"Campo requerido"),(0,s.Z)(r,ie,"Minimizar chat"),(0,s.Z)(r,ae,"Conectado"),(0,s.Z)(r,se,"Descartar"),(0,s.Z)(r,ce,"Finalizar chat"),(0,s.Z)(r,ue,"Por favor verifique su conexión"),(0,s.Z)(r,le,"Error subiendo la imagen."),(0,s.Z)(r,de,"Para los mejores resultados asegúrese que su navegador permite popups."),(0,s.Z)(r,he,"Mensaje expirado."),(0,s.Z)(r,pe,"Disculpanos, estamos teniendo problema cargando el formulario. Por favor intenta de nuevo."),(0,s.Z)(r,fe,"El mensaje es demasiado largo para ser enviado"),(0,s.Z)(r,ge,"No hay conexión. ¿Volver a intentar conectarse?"),(0,s.Z)(r,me,"El chat no está disponible durante llamadas telefónicas"),(0,s.Z)(r,ve,"Chat desconectado"),(0,s.Z)(r,Ee,"Por favor inicie sesión antes de continuar"),(0,s.Z)(r,Ce,"Disculpas, estamos teniendo problemas estableciendo la conexión. Por favor intente de nuevo."),(0,s.Z)(r,Se,"Por favor habilite las cookies de terceros en su navegador"),(0,s.Z)(r,ye,"Reintentar conexión"),(0,s.Z)(r,be,"Iniciar sesión"),(0,s.Z)(r,_e,"Hemos encontrado un error inesperado. Nuestros ingenieros han sido notificados. Por favor intente más tarde."),(0,s.Z)(r,Te,"Salir"),(0,s.Z)(r,Ie,"Descartar"),(0,s.Z)(r,Ne,"Nueva pregunta"),(0,s.Z)(r,Oe,"Ir al botón de nueva pregunta"),(0,s.Z)(r,Re,"Estamos teniendo dificultades técnicas - estamos trabajando en ello. \n Por favor intente en unos minutos."),(0,s.Z)(r,Ae,"Intente nuevamente"),(0,s.Z)(r,ke,"{0} Mensaje no leído"),(0,s.Z)(r,Ze,"{0} mensajes no leídos"),(0,s.Z)(r,we,"Preguntas sugeridas"),(0,s.Z)(r,Me,"Ir a preguntas sugeridas"),(0,s.Z)(r,De,"Confirmar conavegación"),(0,s.Z)(r,Pe,"Sesión de conavegación activa"),(0,s.Z)(r,Le,"Has declinado la invitación de conavegación"),(0,s.Z)(r,Be,"Agente ha finalizado la sesión de conavegación"),(0,s.Z)(r,He,"Has finalizado la sesión de conavegación"),(0,s.Z)(r,Ve,"Sesión de conavegación finalizada - página deshabilitada"),(0,s.Z)(r,Ue,"Sesión de conavegación fallida"),(0,s.Z)(r,Fe,"Cargando"),(0,s.Z)(r,xe,"Chatear con nosotros"),(0,s.Z)(r,je,"¿A qué número le deberíamos enviar un mensaje de texto?"),(0,s.Z)(r,qe,"Chatear con nosotros"),(0,s.Z)(r,We,""),(0,s.Z)(r,Ge,"Ingrese su número de teléfono y un agente le enviará un mensaje de texto a su móvil."),(0,s.Z)(r,ze,"Número de teléfono"),(0,s.Z)(r,Qe,"Mandarme un mensaje de texto"),(0,s.Z)(r,Ye,"Ingrese su código de confirmación"),(0,s.Z)(r,Ke,"Ingrese el código de 6 dígitos enviado por mensaje de texto al {0}"),(0,s.Z)(r,Xe,"Código de confirmación"),(0,s.Z)(r,$e,"Enviar"),(0,s.Z)(r,Je,"Reenviar código"),(0,s.Z)(r,et,"Enviando..."),(0,s.Z)(r,tt,"Enviado"),(0,s.Z)(r,nt,"¡Demasiados intentos!"),(0,s.Z)(r,ot,"Vuelva a intentarlo más tarde o pruebe con otro método de contacto."),(0,s.Z)(r,rt,"Regresar"),(0,s.Z)(r,it,"Cerrar Ventana"),(0,s.Z)(r,at,"Volver"),(0,s.Z)(r,st,"{0} a las {1}"),(0,s.Z)(r,ct,"Sesión de conavegación iniciada"),(0,s.Z)(r,ut,"Sesión de conavegación finalizada"),(0,s.Z)(r,lt,"Sesión de conavegación finalizada por usted"),(0,s.Z)(r,dt,"Sesión de conavegación finalizada por agente"),(0,s.Z)(r,ht,"Sesión de conavegación finalizada - página deshabilitada"),(0,s.Z)(r,pt,"El agente está escribiendo"),(0,s.Z)(r,ft,"Soporte está respondiendo"),(0,s.Z)(r,gt,"Tiempo estimado de espera"),(0,s.Z)(r,mt,"Su posición en la lista de espera"),(0,s.Z)(r,vt,"Usted está {0} en la lista de espera"),(0,s.Z)(r,Et,"Menos de {0} de espera"),(0,s.Z)(r,Ct,"Más de {0} de espera"),(0,s.Z)(r,St,"{0} de espera"),(0,s.Z)(r,yt,"~{0} de espera"),(0,s.Z)(r,bt,"{0} hr"),(0,s.Z)(r,_t,"{0} min"),(0,s.Z)(r,Tt,"{0}–{1} min"),(0,s.Z)(r,It,"{0}–{1} hr"),(0,s.Z)(r,Nt,"{0}–{1}"),(0,s.Z)(r,Ot,"{0}°"),(0,s.Z)(r,Rt,"{0}°"),(0,s.Z)(r,At,"{0}°"),(0,s.Z)(r,kt,"{0}°"),(0,s.Z)(r,Zt,"{0}"),(0,s.Z)(r,wt,"{0}"),(0,s.Z)(r,Mt,"{0}"),(0,s.Z)(r,Dt,"{0}"),r),Bt=(i={},(0,s.Z)(i,f,"Êtes-vous sûr ?"),(0,s.Z)(i,g,"On dirait que vous êtes en train de faire quelque chose."),(0,s.Z)(i,m,"Ce n'est pas grave, je vais continuer"),(0,s.Z)(i,v,"Je voudrais poser une nouvelle question"),(0,s.Z)(i,E,"On dirait que vous discutez ailleurs."),(0,s.Z)(i,C,"Souhaitez-vous terminer cette session-là et poser une nouvelle question ici ? Sinon, vous devez trouver la fenêtre du navigateur dans laquelle vous discutiez auparavant."),(0,s.Z)(i,S,"Terminer la session active"),(0,s.Z)(i,y,"Ne manquez jamais un message"),(0,s.Z)(i,b,"Activez les notifications push pour savoir quand vous recevez un message. \n \nLorsque votre navigateur vous demande d'afficher des notifications, sélectionnez “Autoriser”."),(0,s.Z)(i,_,"Non merci"),(0,s.Z)(i,T,"Activer les notifications"),(0,s.Z)(i,I,"Notifications activées !"),(0,s.Z)(i,N,"Assurez-vous que le volume est activé.\n Nous vous avertirons lorsqu'il y aura un nouveau message."),(0,s.Z)(i,O,"C'est compris"),(0,s.Z)(i,R,"Êtes-vous sûr ?"),(0,s.Z)(i,A,"Si vous partez, vous perdrez votre place dans la file d'attente."),(0,s.Z)(i,k,"Ce n'est pas grave, je vais continuer à attendre"),(0,s.Z)(i,Z,"Oui, quitter la file d'attente"),(0,s.Z)(i,w,"Appel téléphonique en cours..."),(0,s.Z)(i,M,"Okay"),(0,s.Z)(i,D,"Bouton"),(0,s.Z)(i,P,"Assistance"),(0,s.Z)(i,L,"Vous"),(0,s.Z)(i,B,"{0} options de saisie semi-automatique disponibles. Utilisez les flèches haut et bas pour parcourir"),(0,s.Z)(i,H,"Retour"),(0,s.Z)(i,V,"Non transmis. Réessayer ?"),(0,s.Z)(i,U,"Envoyer un message sécurisé"),(0,s.Z)(i,F,"Ajouter une image en pièce jointe"),(0,s.Z)(i,x,"Taper ici"),(0,s.Z)(i,j,"Entrée de Chat"),(0,s.Z)(i,q,"Aller à Entrée de Chat"),(0,s.Z)(i,W,"envoyer"),(0,s.Z)(i,G,"Historique du Chat"),(0,s.Z)(i,z,"Aller à Historique du Chat"),(0,s.Z)(i,Q,"Menu du Chat"),(0,s.Z)(i,Y,"Basculer vers le Menu du Chat"),(0,s.Z)(i,K,"Son Activé"),(0,s.Z)(i,X,"Son Désactivé"),(0,s.Z)(i,$,"Navigation du Chat"),(0,s.Z)(i,J,"Aller à Navigation du Chat"),(0,s.Z)(i,ee,"Faire glisser la fenêtre"),(0,s.Z)(i,te,"Chat en direct"),(0,s.Z)(i,ne,"Ré-ancrer"),(0,s.Z)(i,oe,"Certains champs obligatoires sont manquants."),(0,s.Z)(i,re,"Champ obligatoire"),(0,s.Z)(i,ie,"Réduire le Chat"),(0,s.Z)(i,ae,"Connecté"),(0,s.Z)(i,se,"Ignorer"),(0,s.Z)(i,ce,"Terminer le Chat"),(0,s.Z)(i,ue,"Veuillez vérifier votre connexion"),(0,s.Z)(i,le,"Échec du téléchargement de l'image."),(0,s.Z)(i,de,"Pour de meilleurs résultats, assurez-vous que votre navigateur autorise les pop-ups."),(0,s.Z)(i,he,"Message expiré"),(0,s.Z)(i,pe,"Désolés, nous avons du mal à charger ce formulaire. Veuillez réessayer"),(0,s.Z)(i,fe,"Ce message est trop long pour être envoyé"),(0,s.Z)(i,ge,"Pas de connexion. Réessayer de se connecter ?"),(0,s.Z)(i,me,"Le chat n'est pas disponible durant un appel téléphonique"),(0,s.Z)(i,ve,"Chat déconnecté"),(0,s.Z)(i,Ee,"Veuillez vous connecter pour continuer"),(0,s.Z)(i,Ce,"Désolés, nous avons du mal à connecter. Veuillez réessayer plus tard."),(0,s.Z)(i,Se,"Veuillez activer les cookies tiers sur votre navigateur"),(0,s.Z)(i,ye,"Essayer de se reconnecter"),(0,s.Z)(i,be,"Se connecter"),(0,s.Z)(i,_e,"Nous avons rencontré une erreur inattendue. Nos ingénieurs ont été notifiés. Veuillez réessayer plus tard."),(0,s.Z)(i,Te,"Quitter"),(0,s.Z)(i,Ie,"Ignorer le Modal"),(0,s.Z)(i,Ne,"Nouvelle Question"),(0,s.Z)(i,Oe,"Allez au bouton Nouvelle Question"),(0,s.Z)(i,Re,"Nous avons des problèmes techniques - nous y travaillons. \n Veuillez réessayer dans quelques minutes."),(0,s.Z)(i,Ae,"Réessayer"),(0,s.Z)(i,ke,"message non lu"),(0,s.Z)(i,Ze,"{0} messages non lus"),(0,s.Z)(i,we,"Questions Suggérées"),(0,s.Z)(i,Me,"Aller à Questions Suggérées"),(0,s.Z)(i,De,"Demande de Co-Navigation"),(0,s.Z)(i,Pe,"Activer une session de Co-Navigation"),(0,s.Z)(i,Le,"Vous avez refusé l'invitation de Co-Navigation"),(0,s.Z)(i,Be,"L'agent a terminé la session de Co-Navigation"),(0,s.Z)(i,He,"Vous avez terminé la session de Co-Navigation"),(0,s.Z)(i,Ve,"Session de Co-Navigation terminée - Page désactivée"),(0,s.Z)(i,Ue,"Session de Co-Navigation échouée"),(0,s.Z)(i,Fe,"Chargement"),(0,s.Z)(i,xe,"Textez avec nous"),(0,s.Z)(i,je,"Quel numéro devrions-nous texter ?"),(0,s.Z)(i,qe,"Textez avec nous"),(0,s.Z)(i,We,""),(0,s.Z)(i,Ge,"Entrez votre numéro de téléphone et un agent en direct vous enverra un SMS sur votre appareil."),(0,s.Z)(i,ze,"Numéro de téléphone"),(0,s.Z)(i,Qe,"Envoyez-moi un texto"),(0,s.Z)(i,Ye,"Entrez votre code de confirmation"),(0,s.Z)(i,Ke,"Veuillez entrer le code à 6 chiffres envoyé au"),(0,s.Z)(i,Xe,"Code de confirmation"),(0,s.Z)(i,$e,"Soumettre"),(0,s.Z)(i,Je,"Réenvoyer le Code"),(0,s.Z)(i,et,"Envoi en cours..."),(0,s.Z)(i,tt,"Envoyé"),(0,s.Z)(i,nt,"Trop d'essais !"),(0,s.Z)(i,ot,"Veuillez réessayer plus tard ou essayer un autre moyen de contact."),(0,s.Z)(i,rt,"Revenir"),(0,s.Z)(i,it,"Fermer la Fenêtre"),(0,s.Z)(i,at,"Revenir"),(0,s.Z)(i,st,"{0} à {1}"),(0,s.Z)(i,ct,"Session de Co-Navigation Commencée"),(0,s.Z)(i,ut,"Session de Co-Navigation Terminée"),(0,s.Z)(i,lt,"Session de Co-Navigation Terminée par Vous"),(0,s.Z)(i,dt,"Session de Co-Navigation Terminée par l'Agent"),(0,s.Z)(i,ht,"Session de Co-Navigation Terminée - Page Non Prise En Charge"),(0,s.Z)(i,pt,"L'agent est en train de taper"),(0,s.Z)(i,ft,"L'assistance est en train de répondre"),(0,s.Z)(i,gt,"Temps d'attente estimé"),(0,s.Z)(i,mt,"Votre position dans la file d'attente"),(0,s.Z)(i,vt,"Vous êtes {0} dans la file d'attente"),(0,s.Z)(i,Et,"Moins que {0} attendent"),(0,s.Z)(i,Ct,"Plus que {0} attendent"),(0,s.Z)(i,St,"{0} attendent"),(0,s.Z)(i,yt,"~{0} attendent"),(0,s.Z)(i,bt,"{0} h"),(0,s.Z)(i,_t,"{0} min"),(0,s.Z)(i,Tt,"{0}–{1} min"),(0,s.Z)(i,It,"{0}–{1} h"),(0,s.Z)(i,Nt,"{0}–{1}"),(0,s.Z)(i,Ot,"{0}er"),(0,s.Z)(i,Rt,"{0}e"),(0,s.Z)(i,At,"{0}e"),(0,s.Z)(i,kt,"{0}e"),(0,s.Z)(i,Zt,"{0}er"),(0,s.Z)(i,wt,"{0}e"),(0,s.Z)(i,Mt,"{0}e"),(0,s.Z)(i,Dt,"{0}e"),i),Ht=n("oHpd"),Vt="US",Ut="web-sdk",Ft="ASAPP-ClientDevice",xt="ASAPP-ClientType",jt="ASAPP-ClientVersion",qt="ASAPP-CompanyMarker",Wt="ASAPP-PartnerAppVersion",Gt="ASAPP-Language",zt="ASAPP-RegionCode",Qt="Accept Cobrowsing",Yt="Cobrowsing Session Continue",Kt="Drag event",Xt="Hide Chat",$t="iFrame Loaded",Jt="JS API: Action",en="JS API: Send",tn="JS API: SetIntent",nn="Post Hostpage Metrics",on="Redirect Link Action",rn="Request Cobrowsing UserId",an="Request Login",sn="Request Proactive Message",cn="Send Initial Data",un="Set Cobrowsing Timestamp",ln="Set Customer",dn="Set Error",hn="Set Host Settings",pn="Show Chat",fn="Show SMS Form",gn=" Update Host Location",mn="Unmount IFrame",vn="auth.session",En="blocker",Cn="chat",Sn="chatinstead",yn="chatinstead.abc",bn="chatinstead.gbm",_n="chatinstead.getchannelsettings",Tn="chatinstead.phone",In="chatinstead.sms",Nn="chatinstead.web",On="chat.connect",Rn="chat.open.interaction",An="conversation.end",kn="conversation.flow",Zn="conversation.pending.message",wn="conversation.pending.message.retry",Mn="conversation.unreadindicator",Dn="web.iframe.loadpoll",Pn="enterchat",Ln="ewt",Bn="ewt.leave",Hn="ewt.leave.confirm",Vn="conversation.sendtext.live",Un="sms.verificationcheck",Fn="sms.verificationcheck.form",xn="sms.verificationstart",jn="sms.verificationstart.form",qn="websocket",Wn="websocket.overall",Gn="websocket.url",zn="web.api.action.off",Qn="web.api.action.on",Yn="web.api.getstate",Kn="web.api.hide",Xn="web.api.send",$n="web.api.set",Jn="web.api.show",eo="web.api.showchatinstead",to="web.api.unload",no="web.notification",oo="web.notification.permission",ro="web.notification.permission.confirm",io="history",ao={SET_CUSTOMER_WHILE_CONNECTING:"chat.connect.interrupted.by.setcustomer"},so={TIMEOUT:"contextprovider.timeout"},co={DISPLAYABLE_EVENT_RECEIVED:"conversation.event.displayable.received",PARTNER_EVENT_RECEIVED:"conversation.event.partner.received",WHISPER_EVENT_RECEIVED:"conversation.event.whisper.received",DELAY_START:"conversation.delayinput.start",DELAY_DURATION:"conversation.delayinput.duration",DELAY_TIMEOUT:"conversation.delayinput.timeout"},uo={DISCONNECT_CALLED:"websocket.disconnect.called"},lo={START:"websocket.healthcheck.start",DISABLED:"websocket.healthcheck.disabled",CYCLE_FAILURE:"websocket.healthcheck.cycle.failure",BAD_PAYLOAD:"websocket.healthcheck.cycle.badpayload"},ho={CONVERSATION_CHANGED:"state.conversation.changed"},po="accept",fo="cancel",go="checked",mo="confirmed",vo="connect.duration",Eo="connect.failure",Co="connect.start",So="connect.success",yo="disconnect",bo="dismiss",_o="display",To="error",Io="failure",No="hide",Oo="open",Ro="opportunity",Ao="ready.duration",ko="reject",Zo="request.duration",wo="request.failure",Mo="request.start",Do="request.success",Po="select",Lo="stuck",Bo="success.duration",Ho="device_type",Vo="is_live",Uo="status",Fo="with_customer_credentials",xo="ui_message_id",jo="unread_messages_count",qo="Decline",Wo="End Session",Go="Authentication Error",zo="Component error",Qo="Connection Error",Yo="Expired Credentials Error",Ko={API:"api",USER_LOGIN:"userLogin",COMPONENT_VIEW:"componentView",CUSTOM_POST_HTTP:"customPostHttp",TREEWALK:"treewalk",FINISH:"finish",DEEP_LINK:"deepLink",HTTP:"http",WEB:"web",LINK:"link"},Xo=260,$o=([].concat((0,Ht.Z)([]),["sdk.asapp.com","sdk.uat.asapp.com"]).map((function(e){return"https://"+(/\.asapp\.com$/.test(e)?e:e+":3000")})),"default"),Jo="sidebar",er="chatInstead",tr="omniBadge",nr="default",or="granted",rr="asappChatSDK",ir="asapp-chat-sdk-",ar={HOSTHTML:{CLASSNAME:{DEFAULT:rr+"HostHTML",CHAT_OPEN:rr+"HostHTML_chatOpened",CHAT_FULLSCEEN:rr+"HostHTML_chatFullscreen",CHAT_SIDEBAR:rr+"HostHTML_chatSideBar",LEFT:rr+"HostHTML_chatLeft",RIGHT:rr+"HostHTML_chatRight"}},BADGE:{CLASSNAME:{CLOSED:rr+"Badge_closed",DEFAULT:rr+"Badge",HIDDEN:rr+"Badge_hidden",LEFT:rr+"Badge_left",OPENED:rr+"Badge_opened",RIGHT:rr+"Badge_right"},ID:ir+"badge",TEXT:{CLASSNAME:rr+"Badge__text"},UNREAD_INDICATOR:{CLASSNAME:rr+"Badge__unreadIndicator",VISIBLE:rr+"Badge__unreadIndicator_visible"}},CHAT_INSTEAD:{CLASSNAME:{BODY:rr+"chatInstead__body",BODY_CLOSED:rr+"chatInstead__body_closed",BODY_OPENED:rr+"chatInstead__body_opened",CONTAINER:rr+"chatInstead__container",CONTAINER_CLOSED:rr+"chatInstead__container_closed",CONTAINER_OPENED:rr+"chatInstead__container_opened",HEADER:rr+"chatInstead__header",LOADING:rr+"chatInstead__loading",TITLE:rr+"chatInstead__title",CLOSE_BUTTON:rr+"chatInstead__closeButton",OPTIONS_CONTAINER:{DEFAULT:rr+"chatInstead__optionsContainer",LOADING:rr+"chatInstead__optionsContainer_loading"},OPTION:{ICON:rr+"chatInstead__optionIcon",ITEM:rr+"chatInstead__optionItem",LABEL:rr+"chatInstead__optionLabel",TEXT:rr+"chatInstead__optionText",TEXT_CONTAINER:rr+"chatInstead__optionTextContainer",TITLE:rr+"chatInstead__optionTitle"}},ID:{BODY:ir+"chat-instead-body",TITLE:ir+"chat-instead-title"}},FRAME_EL:{CLASSNAME:{DEFAULT:rr+"FrameEl"},ID:ir+"frame-el"},MODAL_BACKGROUND:{CLASSNAME:{DEFAULT:rr+"ModalBackground",OPENED:rr+"ModalBackground_opened",CLOSED:rr+"ModalBackground_closed"}},IFRAME:{CLASSNAME:{CLOSED:rr+"IFrame_closed",CLOSED_FINISHED:rr+"IFrame_closedFinished",DEFAULT:rr+"IFrame",IS_FULLSCREEN:rr+"IFrame_isFullscreen",IS_MOBILE:rr+"IFrame_isMobile",LEFT:rr+"IFrame_left",OPENED:rr+"IFrame_opened",RIGHT:rr+"IFrame_right",SIDEBAR:rr+"IFrame_sideBar",SMS_FORM:rr+"IFrame_smsForm"},ID:ir+"iframe"},PROACTIVE_MESSAGE:{CLASSNAME:{DEFAULT:rr+"Notification",BUTTON:{DEFAULT:rr+"Notification__button",CONTAINER:rr+"Notification__buttonContainer"},CLOSE_BUTTON:rr+"Notification__closeButton",CONTAINER:{DEFAULT:rr+"NotificationContainer",HIDDEN:rr+"NotificationContainer_hidden"},CONVERSATIONAL:rr+"Notification_conversational",DIRECT:rr+"Notification_direct",ICON:rr+"Notification__icon",LEFT:rr+"NotificationContainer_left",RIGHT:rr+"NotificationContainer_right",TEXT:rr+"Notification__text",TITLE:rr+"Notification__title"},ID:{PREFIX:ir+"notification",CONTAINER:ir+"notification-container"}},INTEGRATION:{SEND:{TYPES:{CUSTOMER:"customer",REPORTING:"reporting"},REPORTING_TYPES:{TRANSACTION:"transaction"}},ACTION:{EVENTS:{CHAT_SHOW:"chat:show",CHAT_HIDE:"chat:hide",ISSUE_NEW:"issue:new",ISSUE_END:"issue:end",AGENT_ASSIGNED:"agent:assigned",MESSAGE_RECEIVED:"message:received",FLOW_END:"flow:end",FEEDBACK_REQUESTED:"feedback:requested",FEEDBACK_RECEIVED:"feedback:received"},SENDER_TYPES:{SRS:"srs",AGENT:"agent"}}},JS:{ACTION_OFF:"off",ACTION_ON:"on",GET_STATE:"getState",HIDE:"hide",LOAD:"load",REFRESH:"refresh",SEND:"send",SET:"set",SET_CUSTOMER:"setCustomer",SET_INTENT:"setIntent",SHOW:"show",SHOW_CHAT_INSTEAD:"showChatInstead",UNLOAD:"unload",DEBUG:"debug"}},sr=n("o9nq"),cr={supportedLanguages:(a={},(0,s.Z)(a,"en",Pt),(0,s.Z)(a,"es",Lt),(0,s.Z)(a,"fr",Bt),a)},ur=n("k6D 0!==ar=function(){a=Date.now(),i=null,r=e.apply(n,o),i||(n=o=null)};return function(){var c=Date.now(),u=t-(c-a);return n=this,o=arguments,u<=0||u>t?(i&&(clearTimeout(i),i=null),a=c,r=e.apply(n,o),i||(n=o=null)):i||(i=setTimeout(s,u)),r}}var pr=n("RB7F"),fr=n.n(pr),gr=n("lIP5"),mr={},vr=["customerid","issueid"],Er=new RegExp('"('.concat(vr.join("|"),')":\\s*(\\d{16,})'),"gi"),Cr=new RegExp('("(?:'.concat(vr.join("|"),')":\\s*)"(\\d{16,})n"'),"gi"),Sr=function(e,t){if("string"!=typeof e)return e;var n=e.replace(Er,'"$1": "$2n"');return JSON.parse(n,(function(e,n){return vr.indexOf(e.toLowerCase())>=0&&"string"==typeof n&&/^\d{16,}n$/.test(n)&&(n=BigInt(n.slice(0,-1))),"function"==typeof t?t(e,n):n}))},yr=function(e,t,n){var o=JSON.stringify(e,(function(e,n){return"bigint"==typeof n&&(n=vr.indexOf(e.toLowerCase())>=0?n.toString()+"n":n.toString()),"function"==typeof t?t(e,n):n}),n);return o&&o.replace(Cr,"$1$2")},br=function(){function e(t){(0,ur.Z)(this,e),this.storageKey="".concat(ir,"storage");try{var n=new Date;(this.storage=window[t]).setItem(n,n);var o=this.storage.getItem(n)!==n.toString();this.storage.removeItem(n),o&&(this.storage=!1)}catch(e){this.storage=!1}this.storage&&!this.storage.getItem(this.storageKey)&&this.storage.setItem(this.storageKey,yr({}))}return(0,lr.Z)(e,[{key:"get",value:function(e){if(this.storage){var t=Sr(this.storage.getItem(this.storageKey))||{};return"string"==typeof e?t[e]:t}return!1}},{key:"remove",value:function(e){if(!this.storage||!e)return!1;var t=this.get();delete t[e],t",value:function(e,t){if(!this.storage||!e)return!1;var n=Object.assign({},this.get(),"object"===(0,gr.Z)(e)?e:(0,s.Z)({},e,t));this.storage.setItem(this.storageKey,yr(n));var o=function(e){return mr.hasOwnProperty(e)?mr[e]:void 0}("IFrameRef");o&&o.setIFrameLocalStorage(e,t)}}]),e}(),_r=new br("sessionStorage"),Tr=(new b_r.get&&_r.get("debugEnabled")),Ir=[].indexOf(window.location.hostname)>=0;function Nr(e,t,n){if(Tr||Ir||n){var o=Array.prototype.slice.call(t||[]);o.unshift("Chat SDK:"),e.apply(console,o)}}function Or(){Nr(console.log,arguments)}Or.Error=function(){Nr(console.error,arguments,!0)},Or.Warn=function(){Nr(console.warn,arguments,!0)};var Rr,Ar=Or,kr=7e3,Zr={END_CONVERSATION:"customer/EndConversation",ENTER_CHAT:"customer/enterChat",GET_OFFERED_MESSAGE_UNAUTHED:"customer/proactive/GetOfferedMessageUnauthed",ASK:"customer/ask",SEND_TEXT_MESSAGE_AND_HIER_AND_TREEWALK:"srs/SendTextMessageAndHierAndTreewalk",SEND_TEXT_MESSAGE:"customer/SendTextMessage",GET_COMPONENT_VIEW:"srs/GetComponentView",HISTORY:"customer/history",SEND_PICTURE_MESSAGE:"customer/SendPictureMessage",NOTIFY_TYPING_PREVIEW:"customer/NotifyTypingPreview",REQUEST_AUTOCOMPLETE:"customer/autocomplete",ANALYTICS_EVENT:"customer/analytics",RESOLVE_LINK:"customer/ResolveLink",GET_SDK_SETTING:"customer/getsdksettings",UPDATE_CONTEXT:"customer/updateContext",UPDATE_SESSION:"customer/updateSession",PUBLISH_REPORTING_EVENT:"customer/publishReportingEvent",COBROWSING_ACCEPT:"customer/CobrowsingInvitationAccepted",COBROWSING_DECLINE:"customer/CobrowsingInvitationDeclined",COBROWSING_END:"customer/EndCobrowsingSession",CHECK_COBROWSING_URL:"customer/CheckCobrowsingUrl",UPDATE_COBROWSING_URL:"customer/UpdateCobrowsingURL",SUBMIT_FEEDBACK:"srs/SubmitFeedback",SMS_VERIFICATION_START:"verification/start",SMS_VERIFICATION_CHECK:"verification/check",GET_REALTIME_WAIT_DATA:"customer/getRealtimeWaitData",V2:{_ROOT:"api/v2",CUSTOMER:{_ROOT:"customer",AUTH:"customer/auth"},WEBSOCKET:{_ROOT:"websocket",REQUEST:"websocket/request"}}},wr="finish",Mr="Unauthed",Dr="Authing",Pr="Authed",Lr="message_too_large",Br="disconnected",Hr="popupBlockerError",Vr="imageUploadFailed",Ur="noConnection",Fr="messageExpired",xr="inlineFormFailed",jr="characterLimitExceeded",qr="blockedInCall",Wr="restartConfirm",Gr="continuePrompt",zr="endActiveSession",Qr="notificationPermissionRequest",Yr="notificationPermissionSuccess",Kr="leaveQueue",Xr="chatBlocked",$r="cobrowsing pending",Jr="cobrowsing active",ei="cobrowsing inactive",ti="cobrowsing error",ni="cobrowsing declined by a user",oi="cobrowsing ended by an agent",ri="cobrowsing ended by a user",ii="cobrowsing ended due to disabled page",ai="Session",si="Settings",ci="HostSettings",ui="Metrics",li="EWTSheetData",di="events",hi="settings",pi="token",fi="transactionEvents",gi=1,mi=2,vi=3,Ei=1,Ci=2,Si=(Rr={},(0,s.Z)(Rr,vn,1),(0,s.Z)(Rr,En,.3),(0,s.Z)(Rr,Sn,1),(0,s.Z)(Rr,yn,1),(0,s.Z)(Rr,bn,1),(0,s.Z)(Rr,_n,1),(0,s.Z)(Rr,Tn,1),(0,s.Z)(Rr,In,1),(0,s.Z)(Rr,Nn,1),(0,s.Z)(Rr,Cn,.5),(0,s.Z)(Rr,On,.99),(0,s.Z)(Rr,Rn,.99),(0,s.Z)(Rr,An,.99),(0,s.Z)(Rr,kn,.9),(0,s.Z)(Rr,co.DELAY_START,.5),(0,s.Z)(Rr,co.DELAY_DURATION,.5),(0,s.Z)(Rr,co.DELAY_TIMEOUT,.5),(0,s.Z)(Rr,Zn,0),(0,s.Z)(Rr,wn,0),(0,s.Z)(Rr,Mn,0),(0,s.Z)(Rr,Pn,.99),(0,s.Z)(Rr,Ln,.99),(0,s.Z)(Rr,Bn,.99),(0,s.Z)(Rr,Hn,.99),(0,s.Z)(Rr,Vn,0),(0,s.Z)(Rr,Un,1),(0,s.Z)(Rr,Fn,1),(0,s.Z)(Rr,xn,1),(0,s.Z)(Rr,jn,1),(0,s.Z)(Rr,qn,.5),(0,s.Z)(Rr,Wn,1),(0,s.Z)(Rr,Gn,.99),(0,s.Z)(Rr,zn,.8),(0,s.Z)(Rr,Qn,.8),(0,s.Z)(Rr,Yn,.8),(0,s.Z)(Rr,Kn,.9),(0,s.Z)(Rr,Xn,.8),(0,s.Z)(Rr,$n,.8),(0,s.Z)(Rr,eo,.8),(0,s.Z)(Rr,Jn,.9),(0,s.Z)(Rr,to,.9),(0,s.Z)(Rr,no,1),(0,s.Z)(Rr,oo,1),(0,s.Z)(Rr,ro,1),Rr),yi={VERIFICATION_CODE:"confirmationCode",ERROR_TOO_MANY_RETRIES:"errorTooManyRetries",PHONE_NUMBER:"phoneNumber"},bi="EWTDisplayType",_i="EWTLowerBoundMinutes",Ti="EWTUpperBoundMinutes",Ii="QueuePositionDisplayType",Ni="QueuePosition",Oi="InitialQueuePosition",Ri="hide",Ai="maximum",ki="minimum",Zi="number",wi="range",Mi="hide",Di="self",Pi={TEXT_MESSAGE:1,NEW_ISSUE:2,NEW_REP:3,CONVERSATION_END:4,PICTURE_MESSAGE:5,PRIVATE_NOTE:6,TOPIC_CHANGE:7,ISSUE_ENQUEUED:8,CONVERSATION_RATED:9,CUSTOMER_TIMED_OUT:10,CRM_CUSTOMER_LINKED:11,ISSUE_SUMMARIZED:12,TEXT_ANNOTATION:13,CUSTOMER_PROMPT:14,CUSTOMER_CONVERSATION_END:15,ISSUE_ANNOTATION:16,CUSTOMER_FEEDBACK:18,IP_BLOCK:20,PHONE_NUMBER_BLOCK:21,SRS_HIER_AND_TREEWALK:22,SWITCH_TO_GENERATIVE_AGENT:24,SWITCH_SRS_TO_CHAT:28,ACCOUNT_MERGE:30,SWITCH_TO_SRS:31,COBROWSING_STARTED:40,COBROWSING_ENDED:41,COBROWSING_INVITATION:42,COBROWSING_DECLINED:43},Li="SRS",Bi="Live",Hi="InQueue",Vi="GenerativeAgent",Ui=function(){function e(){(0,ur.Z)(this,e),this.nextSubId=1,this.subsBySignal={},this.signalBySubId={}}return(0,lr.Z)(e,[{key:"on",value:function(e,t){var n=this.nextSubId;return this.nextSubId+=1,this.subsBySignal[e]||(this.subsBySignal[e]={}),this.subsBySignal[e][n]=t,this.signale this.subsBySignal[e][i],delete this.signalBySubId[i];break}}}},{key:"once",value:function(e,t){var n=this;this.on(e,(function o(){n.off(e,o);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];t.apply(n,i)}))}},{key:"fire",value:function(e){for(var t=this.subsBySignal[e],n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];for(var i in t)t[i].apply(this,o)}}]),e}(),Fi=function(){function e(t,n,o){if((0,ur.Z)(this,e),/\//.test(n)){var r=n.split("/");n="".concat(r[0],"//").concat(r[2])}this.name=o||this.constructor.name,this.target=t,this.targetOrigin=n,this._pubsub=new Ui,this._isListening=!1,this.handleMessageEvent=this.handleMessageEvent.bind(this),this.startListening()}return(0,lr.Z)(e,[{key:"handleMessageEvent",value:function(e){if(e&&e.data&&e.data.type){var t=e.data.type,n=e.data.data||{};this.targetOrigin&&e.origin!==this.targetOrigin?Ar("MessageBus.js","".concat(this.name,": Ignoring mes,"'.\n  Event: { type: ").coing||(this._isListening=!0,window.addEventListener("message",this.handleMessageEvent))}},{key:"stopListening",value:function(){t!1,window.removeEventListener("message",this.handleMessageEvent))}},{key:"on",value:function(e,t){this._pubsub.on(e,t)}},{key:"once",value:function(e,t){this._pubsub.once(e,t)}},{key:"off",value:function(e,t){this._pubsub.off(e,t)}},{key:"post",value:function(e,t){this.target&&"function"==typeof this.target.postMessage&&this.targetOrigin?this.target.postMessage({type:e,data:t},this.targetOrigin):Ar("MessageBus.js","".concat(this.name,": Unable to post message with invalid target or targetOrigin: target="),this.target,", targetOrigin=",this.targetOrigin)}}]),e}(),xi=function(e,t,n,o){var r=/\{[0-9a-z]+:[^}]+\}/gim,i=n.match(r)||[],a=n.split(r),s=[];return a.forEach((function(n,r){s.push(ji(e,t,n,o{var r={regex:Wi,recursive:Gi}[t.Type];return r?r(e,t.Value,n,o):(Ar("Cannot scrub a mee),n)},qi=function(e,t){return e.Replacements.forEach((function(e){t=t.replace(new RegExp(e.Search,"gim"),e.Replace)})),"{"+e.Category+":"+t+"}"},Wi=function(e,t,n,o){return n.replace(new RegExp(t,"gim"),(function(t){return o(e,t)}))},Gi=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return 0===n.length?r(t,o):xi(t,n[0],o,(function(t,o){return e(t,n.slice(1),o,r)}))},zi=n.p+"sounds/notification.88f6c8f5.mp3",Qi=n("Lr5L"),Yi=n("5hh5"),Ki=n("UHbJ"),Xi=n("udpn"),$i=n("RlfA"),Ji=n("17x9"),ea=n.n(Ji),ta=n("RotF"),na=n.n(ta),oa=n("vOnD"),ra="SET_SCROLL_TARGET_EVENT_ID",ia="SET_REP_IS_TYPING",aa="RESET_UNREAD_MESSAGE_COUNT",sa="INCREMENT_UNREAD_MESSAGE_COUNT",ca="DECREMENT_UNREAD_MESSAGE_COUNT",ua=function(e){return{type:ia,showTypingIndicator:e}},la=function(){return{type:aa}},da=function(e){return{type:sa,payload:e}},ha=function(){return function(e,t){var n=t().chatMessagesView,o=n.scrollTargetEventId,r=n.showTypingIndicator;n.unreadMessageCount&&e(la());var i=r?document.querySelector(".bubble_typingIndicator"):document.getElementById(o),a=Jd(800)?"smooth":"auto";i&&i.scrollIntoView({behavior:a})}},pa="SET_ACTION_SHEET_DATA",fa="SET_ACTION_SHEET_TYPE",ga="SET_SHOW_ACTION_SHEET_ERROR",ma="SET_IS_ACTION_SHEET_LOADING",va="RESET_ACTION_SHEET",Ea=function(e){return{type:pa,actionSheetData:e}},Ca=function(e){return function(t,n){n().chat.isBlocked||t({type:fa,actionSheetType:e})}},Sa=function(e){return{type:ma,isActionSheetLoading:e}},ya=function(e){return{type:ga,showActionSheetError:e}},ba=function(){return{type:va}},_a=function(){return function(e){var t=document.getElementById("action-sheet");t&&t.classList.add("actionSheet_hidden"),setTimeout((function(){e(ba()),e(rc(!1))}),Xo)}},Ta="RECORD_COUNT",Ia="RECORD_GAUGE",Na="START_DURATION",Oa="END_DURATION",Ra="SEND_METRICS_EVENTS",Aa=function(e){return{type:Ta,payload:e}},ka=function(e){return{type:Oa,payload:e}},Za=function(e){return{type:Na,payload:e}},wa=function(e){return function(t){var n=e.metricsEventLabel;if(n){var o=(0,s.Z)({},Fo,rh());t(Aa({label:n,type:Mo,tags:o})),t(Za({label:n,type:Zo}))}}},Ma=function(e){return function(t){var n=e.metricsEventLabel,o=(0,s.Z)({},Fo,rh());n&&(200===e.statusCode?(t(Aa({label:n,type:Do,tags:o})),e.successDuration&&t(ka({label:n,type:Bo,tags:o,data:{attempts:e.attempts}}))):t(Aa({label:n,type:wo,data:{error:e.error,code:e.statusCode},tags:o})),t(ka({label:n,type:Zo,ull;var t=e.payload.quickReplies;return Array.isArray(t)?t:nut||[]},Pa=function(e){var t=Da(e);return t&&t.length>0},La=function(e){return 1===e.EventFlags&&e.EventType!==Pi.CONVERSATION_END},Ba=function(e){return e.isChatMessage&&!e.isFromCusturn e.EventJSON&&romCustomer=La(e),e.isFromRep=function(e){return 2===e.EventFlags}(e),e.isFromSRS=function(e){return 4===e.EventFlags||e.EventType===Pi.CONVERSATION_END}(e),e.isEphemeral=function(e){return sh(e.EphemeralType)&&0!==e.EphemeralType}(e),e.isChatMessage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload,n=e.EventType;return!(!t||[Pi_TIMED_OUT,Pi.SRS_HIER_AND_TREEWALK,Pi.SWITCH_TO_GENERATIVE_AGENT,Pi.SWITCH_SRS_TO_CHAT,Pi.SWITCH_TO_SRS].indexOf(n)<0||!t.text&&!t.Text&&!t.attachment)}(e),e.isPictureMessage=function(e){return e&&e.EventType===Pi.PICTURE_MESSAGE}(e),e.isWhisper=Ha(e),e.hasText=functionayload;return!!t&&!!t.attachment&&!!t.attachment.content}(e),e.isDisplayable=function(e){return!Ha(e)&&(e.isChatMessage||e.isPictureMessage||function(e){return e.EventTypventType===Pi.COBROWSING_ENDED}(e))}(e),e.renderKey=function(e){return e?e.isPending?"event-".concat(e.payload.UIMessageID):["event",e.CustomerId,e.RepId,e.EventId,e.EventTime].join("-"):null}(e),e},Ua=function(e){return e.map(Va)},Fa=function(e){var t=e&&e.length;if(!t)return[n]Pi.SWITCH_TO_SRS)return Li;if(o===Pi.NEW_REP)return Bi;if(o===Pi.ISSUE_ENQUEUED)return Hi;if(o===Pi.SWITCH_TO_GENERATIVE_AGENT)return Vi}return Li},xa=function(e){return e===Bi||e===Hi},ja=function(e){return e===Bi||e===Hi||e===Vi},qa=function(e,t){return e&&e.EventTime&&t&&t.EventTime?Math.abs(e.EventTime-t.EventTime)/1e3/1e3:0},Wa=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(e={},(0,s.Z)(e,3,lt),(0,s.Z)(e,2,dt),(0,s.Z)(e,4,ht),e),o=null;return t.EventType===Pi.COBROWSING_STARTED?o=ct:t.EventType===Pi.COBROWSING_ENDED&&(o=n[t.payload&&t.payload.Reason]||ut),o?(0,sr.translate)(o):null},Ga=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e&&e.length>0&&e[e.length-1]},za=function(e){e.sort((function(e,t){return(""+e.EventId).locale=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=e.find((function(e){return e.EventId===t.EventId}));return o||(e.push(t),n&&za(e)),!o},Ya=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((function(n){Qa(e,n,!1)&&t++})),za(e),t},Ka="RESET_AUTOCOMPLETE",Xa="SELECT_AUTOCOMPLETE",$a="SET_AUTOCOMPLETE",Ja="SET_SHOW_INPUT",es="SET_INPUT_DELAY_ACTIVE",ts=function(e){return{type:Ja,showInput:e}},ns=function(e){return{type:es,inputDelayActive:e}},os=function(){return function(e,t){var n=t(),o=n.chat,r=n.chatInput,i=n.eventLog.mostRecentMessageEvent,a=ja(o.conversationState)||i&&i.payload&&i.payload.userCanTypeResponse||!1;Ar("[ChatInput.actions.js]","updateChatInputVisibility showInput = ",a,"conversationState = ",o.conversationState),r.showInput!==a&&e(ts(a))}},rs=function(e){var t=e.UIMessageID,n=e.error,o=e.status;return function(e){var r=200===o;n===Lr?(e(Wu()),e(Js(jr))):e(ll(t,{isPending:!1,isFailed:!r})),e(Aa({label:Zn,type:r?mo:Io}))}};function is(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function as(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?is(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):is(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ss,cs="SET_SHOW_EWT_SHEET",us="SET_EWT_SHEET_DATA",ls="REMOVE_EWT_SHEET",ds=bi,hs=_i,ps=Ti,fs=Oi,gs=Ni,ms=Ii,vs=0,Es=function(){return function(e,t){var n,o=t().ewtSheet.ewtSheetData,r=(n={},(0,s.Z)(n,hs,o[hs]),(0,s.Z)(n,ps,o[ps]),(0,s.Z)(n,gs,o[gs]),(0,s.Z)(n,ds,o[ds]),(0,s.Z)(n,ds,o[ds]),(0,s.Z)(n,ms,o[ms]),n);return e(Aa({label:Ln,type:Mo})),e(Za({label:Ln,type:Bo})),mh.getRealtimeWaitData(r).then((function(t){var n=t.response;if(!n)throw new Error("missing data");vs=0,e(ys(n)),e(Aa({label:Ln,type:Do})),e(ka({label:Ln,type:Bo}))})).catch((function(t){Ar.Warn("[EWTSheet.actions]","Failed to get RealTime EWT",t),e(Ss()),e(Aa({label:Ln,type:wo,data:{error:t&&t.error,code:t&&t.status}}))}))}},Cs=function(){return function(e){clearTimeout(ss);var t=document.getElementById("ewt-sheet");t&&t.classList.add("ewtSheet_hidden"),setTimeout((function(){e({type:ls})}),500)}},Ss=function(){return function(e){vs>=3?(vs=0,e(Cs())):(vs++,e(Es()))}},ys=function(e){return function(t,n){if(e.ShouldDisplayRealtimeWaitData&&function(e){if(e[Ni]+1<=0)return!1;switch(e[bi]){case wi:return!(!e[_i]||!e[Ti]);case Zi:case Ai:return!!e[Ti];case ki:return!!e[_i];case Ri:return"show"===e[Ii];default:return!1}}(e)){var o,r=n().ewtSheet.ewtSheetData;r&&r[fs]||(e[fs]=e[gs]),t({type:cs,showEWTSheet:!0}),t((o=as(as({},r),e),{type:us,ewtSheetData:o}));var i=e.TimeToNextPollSeconds;i&&(ss=setTimeout((function(){t(Es())}),1e3*i))}else t(Cs())}},bs="ADD_STORAGE_EVENT_LISTENER",_s="GET_CUSTOMER_AUTH",Ts="START_HEALTH_CHECK",Is="RESTART_AUTH",Ns="RESTART_AUTH_FOR_NEW_CUSTOMER",Os="REMOVE_SESSION",Rs="RESET_ERROR",As="SET_AUTH_STATUS",ks="SET_DID_ENTER_CHAT",Zs="SET_ERROR",ws="SET_CONVERSATION_STATE",Ms="SET_CHAT_BANNER",Ds="SET_HIDE_NEW_QUESTION_BUTTON",Ps="SET_IS_DOCKED",Ls="SET_IS_DRAGGABLE",Bs="SET_IS_LIVE_CHAT",Hs="SET_SESSION",Vs="SET_SHOW_LOADING_VIEW",Us="SET_SMS_FORM_SETTINGS",Fs="SET_HOST_SETTINGS",xs="SET_IS_RESTARTING_CHAT",js="SET_INITIATION_TYPE",qs="SET_IS_BLOCKED",Ws=function(){return{type:_s}},Gs=function(){return{type:Is}},zs=function(){return{type:Os}},Qs=function(e){return{type:As,authStatus:e}},Ys=function(e){return function(t,n){if(e)t(Ea({text:n().sdkSettings.BlockingMessage})),t(Ca(Xr)),t(Aa({label:En,type:_o}));else{var o=n(),r=o.actionSheet.actionSheetType,i=o.chat.chatBanner;r===Xr&&(t(ba()),t(Aa({label:En,type:No}))),i===qr&&t(Js(null))}t({type:qs,isBlocked:e})}},Ks=function(e,t,n){return function(o,r){Gd.post("Set isLiveChat",{isLiveChat:t}),o(function(e){return{type:Bs,isLiveChat:e}}(t)),o(function(e){return{type:ws,conversationState:e}}(e)),t?o(uc(!1)):(o(zu({})),o(Qu(null)),o(ua(!1))),e===Hi?n===Li&&nh():r().ewtSheet.showEWTSheet&&o(Cs()),o(ostype:Vs,showLoadingView:e}},$s=function(e){return{type:Us,SMSFormSettings:e}},Js=function(e){return{type:Ms,chatBanner:e}},ec=function(e){return Gd.post("Dock chat",{isDocked:e}),{type:Ps,isDocked:e}},tc=function(){return{type:Rs}},nc=function(e){return function(t,n){n().chat.showLoadingView&&t(Xs(!1)),t({type:Zs,error:e})}},oc=function(e){return{type:Hs,session:e}},rc=function(e){return{type:xs,isRestartingChat:e}},ic=function(e){return function(t,n){t(rc(!0)),mh.ask({Intent:e}).then((function(){t(ha()),n().actionSheet.actionSheetType?t(_a()):t(rc(!1))})).catch((function(){n().actionSheet.actionSheetType&&(t(rc(!1)),t(ya(!0)))}))}},ac=function(e){return function(t,n){if(e){e.preventDefault();var o=n(),r=o.sdkSettings,i=r.IsDocumentUploadingEnabled,a=r.IsPhotoUploadingEnabled,s=r.SupportedUploadMIMETypes,c=void 0===s?[]:s;if(o.chat.isLiveChat&&(i||a)){var u=Object.prototype.hasOwnProperty.call(e,"dataTransfer")?e.dataTransfer:e.target,l=u.files&&u.files.length?u.files[0]:null;if(l){var d=new RegExp(c.join("|"),"i");d&&d.test(l.type)?mh.sendPictureMessage({file:l,onComplete:function(e,n){n&&t(Js(Vr))}}):Ar("[Chat.actions]","sendFile()","invalid file type")}}}}},sc="SET_QUICK_REPLIES_DISABLED",cc="SET_SHOW_QUICK_REPLIES",uc=function(e){return{type:cc,showQuickReplies:e}},lc=functn.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function vc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var Ec=function e(t,n){var o=[];if(t&&t.content&&(t.content.root?o.push(t.content.root):t.content.items&&t.content.items.length&&(o=[].concat((0,Ht.Z)(o),(0,Ht.Z)(t.content.items)))),n){var r,i=mc(o);try{for(i.s();!(r=i.n()).done;){var a=e(r.value,!0);a&&a.length&&(o=[].concat((0,Ht.Z)(o),(0,Ht.Z)(a)))}}catch(e){i.e(e)}finally{i.f()}}return o},Cc=function(e){var t={};return e&&e.root&&(t=function(e){var t={};if(!e)return t;var n,o=mc([e].concat((0,Ht.Z)(Ec(e,!0))));try{for(o.s();!(n=o.n()).done;){var r=n.value;r&&"name"in r&&"value"in r&&("checkboxView"===r.type?r.checked&&(t[r.name]=r.value):t[r.name]=r.value)}}catch(e){o.e(e)}finally{o.f()}return t}(e.root)),t},Sc="SET_FORM_ERROR_MESSAGE",yc="SET_FORM_ERRORS",bc="SET_IS_HANDLING_ACTION",_c="UPDATE_FORM_DATA",Tc="RESET_FORM",Ic="REMOVE_FORM_ERROR",Nc="SET_INLINE_FORM_CONTENT",Oc="SET_SHOW_INLINE_FORM",Rc="HIDE_INLINE_FORM",Ac=function(e){return{type:_c,formData:e}},kc=function(e){return function(t,n){n().modalView.showModalView&&t({type:Sc,formErrorMessage:e})}},Zc=function(e){return{type:yc,formErrors:e}},wc=function(e){return{type:bc,isHandlingAction:e}},Mc=function(e){return{type:Ic,fieldName:e}},Dc=function(e){var t=e.fieldName,n=e.value;return function(e,o){if(t){var r=o().form.formErrors;r&&r[t]&&e(Mc(t)),e(Ac((0,s.Z)({},t,n)))}}},Pc=function(){return function(e,t){Pa(t().eventLog.mostRecentMessageEvent)&&e(uc(!0)),e({type:Rc})}},Lc=n("/0+J"),Bc=n("Kq5O"),Hc=n.n(Bc);function Vc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Uc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vc(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fc,xc={httpRequest:(Fc=(0,Lc.Z)(Hc().mark((function e(t){var n,o,r;return Hc().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.metricsEventLabel&&km.dispatch(wa({metricsEventLabel:t.metricsEventLabel})),n=function(e){return t.metricsEventLabel&&km.dispatch(Ma({statusCode:e.status,error:e.error,metricsEventLabel:t.metricsEventLabel})),e},t.noContextRequired){e.next=7;break}return e.next=5,xc.fetchContext();case 5:(o=e.sent)&&(t.body=Uc(Uc({},t.body),{},{params:Uc({Context:yr(o)},t.body&&tt=10,xc.runHttpRequest(t);case 10:return r=e.s5,e.t0=e.catch(7),n(e.t0),e.t0;case 19:case"end":return e.stop()}}),e,null,[[7,15]])}))),function(e){return Fc.apply(this,arguments)}),fetchContext:function(e){return new Promise((function(t){mh.fetchContext((function(e){t(e)}),e)}))},runHttpRequest:function(e){var t=e.method,n=void 0===t?"POST":t,o=e.path,r=e.headers,i=void 0===r?{}:r,a=e.body,s=void 0===a?{}:a,c=e.timeout,u=void 0===c?null:c;return new Promise((function(e,t){if(["GET","POST","PUT","DELETE","OPTIONS"].indexOf(n)<0)return turn t({error:"Invalid path"});var r=o.startsWith("https://");o=xc.getRequestPath(r,o),i=xc.getRequestHeaders(r,o,i),s=xc.getRequestBody(r,s);var a=xd(n,o,u);Object.keys(i).forEach((function(e){var t=i[e];t&&a.setRequestHeader(e,t)})),a.withCredentials="Authorization"in i,a.addEventListener("readystatechange",(function(n){var o=n.target;o.readyState===XMLHttpRequest.DONE&&xc.handleHttpResponse(o).then(e).catch(t)})),a.send(yr(s))}))},handleHttpResponse:function(e){return new Promise((function(t,n){var o,r=e.status;xc.updateConnectionStatus(0!==r);try{o=function(e){return-1!==(e.getResponseHeader("content-type")||"").indexOf("application/json")?Sr(e.response):e.response}(e)}catch(i){return n({status:r,error:i})}switch(r){case 200:t({status:r,response:o});break;case 403:km.dispatch(Ws()),n({status:r,error:"Unauthenticated"});break;default:var i;n({status:r,error:"object"===Wd(o)&&o.error||o})}}))},getRequestPath:function(e,t){if(e)return t;var n=km.getState().partnerConfig.apiHostname;return"https://".concat(n,"/api/http/v1/").concat(t)},getRequestHeaders:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e)return n;n=Object.assign({},n,zd());var o=km.getState().chat.session;return t!==Zr.GET_OFFERED_MESSAGE_UNAUTHED&&o&&null!==o.session_token&&(n.Authorization="Bearer ".concat(o.session_token)),n},getRequestBody:function(e,t){if(e){var n;t.params=Uc((n={},(0,s.Z)(n,xt,Ut),(0,s.Z)(n,jt,"4.0.0"),n),t.params||{})}else{t=Uc(Uc({},zd(!1)),t);var o=km.getState().chat.session;o&&(t.ctxParams={CompanyId:o.company_id})}return t},updateConnectionStatus:function(e){e?km.getState().chat.chatBanner===Ur&&km.dispatch(Js(null)):km.dispatch(Js(Ur))}},jc="SET_PARTNER_CONFIG",qc="UPDATE_HOST",Wc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n){Object.prototype.hasOwnProperty.call(e,"customerId")&&n(function(e,t){return function(n,o){var r=o().chat.session;if(n(Xs(!0)),r&&r.customer_primary_identifier){var i=r.customer_primary_identifier;(e&&e.toString()!==i.toString()||!e&&""!==i)&&n(oc(null))}n(t?{type:Ns}:Gs())}}(e.customerId,t)),n({type:jc,partnerConfig:e})}},Gc=function(e){return{type:qc,host:e}},zc="REMOVE_SDK_SETTING",Qc="SET_SDK_SETTINGS",Yc=function(){return{type:Qc,sdkSettings:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}},Kc="SET_IS_CONNECTED",Xc="SET_ON_CONNECTED_CALLBACK",$c="[Connection]",Jc=function(e){return function(t,n){var o=n().connection.isConnected;Ar($c,"setIsConnected: was",o,"set to",e),t(e?nu():Ws()),t({type:Kc,isConnected:e})}},eu=function(e){return{type:Xc,onConnectedCallback:e}},tu=function(){return function(e,t){t().connection.isConnected||e(Ws())}},nu=function(){return function(e,t){var n=t(),o=n.chat.error,r=n.connection.onConnectedCallback;o===Qo&&e(tc()),"function"==typeof r&&(r(),e(eu(null)));var i=mh.enterChat().then((function(){e($u()),e(Wc({intent:null})),e({type:ks,didEnterChat:!0}),e(ka({label:Rn,type:Ao}))})).catch((function(e){Ar.Warn($c,"enterChat error: ",e)})),a=mh.getSDKSetting(2).then((function(t){e(Yc(t.response)),e({type:Ts})})).catch((function(e){Ar.Warn($c,"getSDKSetting error: ",e)}));return Promise.all([i,a])}},ou="REMOVE_LAST_MODAL_VIEW_CONTENT",ru="SET_SHOW_MODAL_VIEW",iu="SET_MODAL_VIEW_DISPLAY_STYLE",au="ADD_MODAL_VIEW_CONTENT",su="RESET_MODAL_VIEW_CONTENT",cu="SET_RETRY_ACTION",uu="SET_IS_LOADING_CONTENT",lu="SET_LOADING_CONTENT_ERROR_MESSAGE",du=function(e){return{type:ru,showModalView:e}},hu=function(e){return{type:uu,isLoadingContent:e}},pu=function(e){return{type:lu,loadingContentErrorMessage:e}},fu=function(e){return{type:cu,retryAction:e}},gu=function(e){return function(t,n){var o=n().modalView.modalViewContent,r=document.getElementById("modal-view");r&&(e||1===o.length?(r.classList.add("modalView_hidden"),t({type:Tc}),setTimeout((function(){t({type:su}),t(du(!1))}),Xo),mh.sendAnalyticsEvent({name:"view.dismissed",attributes:o[0]&&o[0].metadata}).then()):t({type:ou}))}};function mu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function vu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mu(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Eu,Cu="[ActionHandler]",Su=function(){function e(){var t;(0,ur.Z)(this,e),this.createNewPage=this.createNewPage.bind(this),this.closeNewPage=this.closeNewPage.bind(this),this.setNewPage=this.setNewPage.bind(this),this.openTargetURL=this.openTargetURL.bind(this),this.handleSavedNextAction=this.handleSavedNextAction.bind(this),this.handleAPIResponseError=this.handleAPIResponseError.bind(this),this.handleAPIResponse=this.handleAPIResponse.bind(this),this.handleMissingFieldsError=this.handleMissingFieldsError.bind(this),this.handleResponseAction=this.handleResponseAction.bind(this),this.actionProxy=this.actionProxy.bind(this),this.finishAction=this.finishAction.bind(this),this.componentViewAction=this.componentViewAction.bind(this),this.customPostHttpAction=this.customPostHttpAction.bind(this),this.apiAction=this.apiAction.bind(this),this.treewalkAction=this.treewalkAction.bind(this),this.userLoginAction=this.userLoginAction.bind(this),this.webAction=this.webAction.bind(this),this.httpAction=this.httpAction.bind(this),this.linkAction=this.linkAction.bind(this),this.newPage=null,this.actionHandlers=(t={},(0,s.Z)(t,Ko.FINISH,this.finishAction),(0,s.Z)(t,Ko.COMPONENT_VIEW,this.componentViewAction),(0,s.Z)(t,Ko.CUSTOM_POST_HTTP,this.customPostHttpAction),(0,s.Z)(t,Ko.API,this.apiAction),(0,s.Z)(t,Ko.TREEWALK,this.treewalkAction),(0,s.Z)(t,Ko.USER_LOGIN,this.userLoginAction),(0,s.Z)(t,Ko.WEB,this.webAction),(0,s.Z)(t,Ko.HTTP,this.httpAction),(0,s.Z)(t,Ko.LINK,this.linkAction),t)}return(0,lr.Z)(e,[{key:"createNewPage",value:function(e){var t="_blank";(km.getState().sdkSettings||{}).WebLinkTarget!==Di?uh(e)?this.newPage=window.open("",t):this.newPage=window.open("",tcloseNewPage",value:function(){this.newPage&&"function"==typeof this.newPage.close&&(this.newPage.close(),this.newPage=null)}},{key:"setNewPage",value:function(e){this.newPage&&this.newPage.location&&(this.newPage.location.href=e)}},{key:"getCustomParams",value:function(e){var t=e.requestBody,n=e.formFields,o=e.formData;return n.reduce((function(e,n){for(var r=n.name,i=n.path.split("."),a=0;a<i.length-1;a++)e=e[i[a]]||{};return o[r]&&(e[i[i.length-1]]=o[r]),t}),t)}},{key:"openTargetURL",value:function(e){if(e){var t=km.getState(),n=t.partnerConfig.host;switch(t.sdkSettings.WebLinkTarget){case"blank":this.setNewPage(e);break;case Di:Gd.post(on,e);break;default:var o=n&&n.location&&n.location.origin;new RegExp("^".concat(o)).test(e)?(this.closeNewPage(),Gd.post(on,e)):this.setNewPage(e)}}}},{key:"handleSavedNextAction",value:function(){var e=km.getState(),t=e.partnerConfig.customerId,n=e.sdkSettings.NextAction;if(n){if(!t)return Ar(Cu,"Could not handleSavedNextAction since customerId does not exist");try{Ar(Cu,"handleSavedNextAction:",n),this.actionProxy({action:n}),km.dispatch({type:zc,setting:"NextAction"})}catch(e){Ar(Cu,"Could not handleSavedNextAction:",e)}}}},{key:"handleAPIResponseError",value:function(e){var t,n=(0,sr.translate)(Re);if(e.content){e.content.userMessage&&(n=e.content.userMessage);var o=e.content.invalidInputs;if(o)if(Array.isArray(o)){t={};for(var r=0;r<o.length;r++){var i=o[r];t[i.name]=i.userMessage||!0}}else t=o}km.dispatch(kc(n)),km.dispatch(Zc(t))}},{key:"handleAPIResponse",value:function(e){km.dispatch(wc(!1));var t=!1;if(e&&e.type)switch(e.type){case wr:this.actionProxy({action:e}),t=!0;break;case"error":this.handleAPIRes||this.handleUnexpectedError()}},{key:"handleUnexpectedError",value:function(){km.dispatch(kc((0,sr.translate)(Re)))}},{key:"handleMissingFieldsError",value:function(e){var t=(0,sr.translate)(re),n={};e.forEach((function(e){n[e]=t})),km.dispatch(kc((0,sr.translate)(oe))),km.dispatch(Zc(n)),km.dispatch(wc(!1))}},{key:"handleResponseAction",value:function(e){var t=e.onComplete,n=e.onResponseAction,o=e.response,r=e.status;if(!n)return Promise.resolve();var i=200===r,a="object"===Wd(o)&&o.errorMessage?o.errorMessage:o,s=vu({content:{}},n);return s.content.data=vu(vu({},s.content.data),{},{response:a,success:i}),this.apiAction({action:s,onComplete:t})}},{key:"linkAction",value:function(e){var t=this,n=e.action,o=e.quickReply,r=e.onCom=n&&n.metadata;return this.createNewPage(),i||Ar(Cu,"linkAction - link is undefined"),Promise.all([mh.resolveLink({link:s.openTargeNewPage(),e})),mh.sendAnalyticsEvent({name:"action.link.selected",attributes:vu(vu({},a),{},{link:i,linkText:o&&o.title})})]).catch((function(e){Ar(Cu,"link or analytics failure",e)})).finally((function(){"function"==typeof r&&r()}))}},{key:"webAction",value:function(e){var t=e.action,n=e.onComplete,o=t&&t.content||{},r=o.url,i=o.windowFeatures;uh(r)?Ar.Warn(Cu,"url is empty for web action",t):(this.createNewPage(i),this.openTargetURL(r)),"function"==typeof n&&n()}},{key:"treewalkAction",vakReply,o=o:function(){};return mh.sendSRSMessage({text:t.content.messageText||n&&n.title,classification:t.content.classification,data:t.content.data}).then((function(e){return r(e.response,null)})).catch((function(e){return r(null,e.error)}))}},{key:"userLoginAction",value:function(e){var t=e.action,n=e.onComplete,o=t&&t.content;try{km.dispatch(Yc({NextAction:o&&o.nextAction})),km.dispatch(eu(this.handleSavedNextAction)),Gd.post(an,o&&o.partnerPayload),"function"==typeof n&&n()}catch(e){Ar(Cu,"userLoginAction:",e)}}},{key:"apiAction",value:function(e){var t=this,n=e.action,o=e.formData,r=e.onComplete;if(n&&n.content&&n.content.requestPath)return Ar(Cu,"apiAction:","formData:",o),mh.sendAPIActionRequest({action:n,formData:o}).then((function(e){var o=e.response;t.handleAPIResponse(o),o&&o.type===wr&&n.content.requestPath===Zr.SUBMIT_FEEDBACK&&Gd.post(Jt,{type:ar.INTEGRATION.ACTION.EVENTS.FEEDBACK_RECEIVED}),"function"==typeof r&&r(o,null)})).catch((function(e){t.handleUnexpectedError(),"function"==typeof r&&r(null,e.error)}));Ar(Cu,"apiAction:","invalid action",n)}},{key:"httpAction",value:function(e){var t=this,n=e.action,o=e.formData,r=e.onComplete;Ar(Cu,"httpAction:","formData:",o);var i=n.content,a=i.url,s=i.data,c=i.onResponseAction;return xc.httpRequest({path:a,body:{params:{data:vu(vu({},s),o)}}}).catch((function(e){return Ar.Warn(Cu,"httpAction failed",e),{status:e.status,response:e.error}})).then((function(e){var n=e.status,o=e.response;return t.handleResponseAction({onResponseAction:c,onComplete:r,response:o,status:n})}))}},{key:"customPostHttpAction",value:function(e){var t=this,n=e.action,o=e.formData,r=e.onComplete;Ar(Cu,"customPostHttpAction:","formData:",o);var i=n.content,a=i.url,s=i.requestBody,c=i.formFields,u=i.requestHeaders,l=i.onResponseAction;return xc.httpRequest({path:a,headers:u,body:{params:this.getCustomParams({requestBody:s,formFields:c,formData:o})}}).catch((function(e){return Ar.Warn(Cu,"customPostHttpAction failed",e),{status:e.status,response:e.error}})).then((function(e){var n=e.status,o=e.response;return t.handleResponseAction({onResponseAction:l,onComplete:r,response:o,status:n})}))}},{key:"componentViewAction",value:function(e){var t=e.action,n=e.onComplete;if(t||t.content){var o=t.content,r=o.renderInline,i=o.name,a=o.data,s=o.displayStyle;if(r||(km.dispatch({type:iu,modalViewDisplayStyle:s}),km.dispatch(du(!0)),km.dispatch(hu(!0)),km.dispatch(fu(null)),km.dispatch(pu(null))),i)return mh.getComponentView({name:i,data:a}).then((function(e){r?km.dispatch(function(e){return function(t,n){e&&e.root?(t(Ac(Cc(e))),t(uc(!1)),t({type:Nc,inlineFormContent:e}),t({type:Oc,showInlineForm:!0})):n().chat.chaction(n){e&&e.root?(n(Ac(Cc(e))),n(kc(null)),n({type:au,modalViewContent:e})):(n(pu((0,sr.translate)(Re))),n(fu(t))),n(hu(!1))}}(e,t)),"function"==typeof n&&n()})).catch((function(e){return Ar.Warn(Cu,"Can't get component view",e)}));Ar("cannot complete componentViewAction: missing name")}}},{key:"finishAction",value:function(e){var t=e.action,n=e.onComplete;km.dispatch(gu(!0)),km.dispatch(Pc()),"function"==typeof n&&n();var o=t.content;if(o){o.type===wr&&o.content&&(Ar(Cu,"Poorly formatted FINISH Action:",t),o=o.content);var r=o.nextAction;r&&(r.type===wr&&Ar(Cu,"Doubly-nested FINISH Action:",t),this.actionProxy({action:r}))}}},{key:"actionProxy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.action||!e.action.type)return Ar(Cu,"Missing action or action.type:",e.action),void("function"==typeof e.onComplete&&e.onComplete());var t=this.actionHandlers[e.action.type];if(t){if(Ar(Cu,t.name.substr(6),"action:",e.action),[Ko.API,Ko.HTTP,Ko.CUSTOM_POST_HTTP].indexOf(e.action.type)>-1){var n=km.getState(),o=n.form,r=o.formData,i=o.inlineFormContent,a=n.modalView.modalViewContent,s=i||a&&a[a.length-1];if(s&&r){km.dispatch(wc(!0)),km.dispatch(kc(null)),km.dispatch(Zc(null));var c=function(e,t){var n=[];return[e.root].concat((0,Ht.Z)(Ec(e.root,!0))).fored,r=e.name;!o||void 0!==t[r]&&""!==t[r]||n.push(r)})),{missingFields:n}}(s,r)||{},u=c.missingFields;return void(u&&u.length>0?this.handleMissingFieldsError(u):t(vu(vu({},e),{},{formData:r,onComplete:function(){km.dispatch(wc(!1))}})))}}t(e)}else Ar(Cu,"No handler for action:",e.action)}}]),e}(),yu=new Su,bu=yu.handleSavedNextAction,_u=yu.actionProxy,Tu=n("Lw/n"),Iu=n("AsUd"),Nu="localhost:3000"===window.location.host,Ou="[EventLog]",Ru={handleInputUiEnterChatDelayTimeout:function(){Ar(Ou,"Triggering delayed ChatInput"),km.dispatch(ns(!0));var e=km.getState().sdkSettings.InputUiEnterChatDelayMS;clearTimeout(Eu),km.dispatch(Aa({label:co.DELAY_START})),km.dispatch(Za({label:co.DELAY_DURATION})),Eu=setTimeout((function(){km.dispatch(ns(!1)),Eu=null,Ar(Ou,"Triggering delayed ChatInput Timeout after ".concat(e," milliseconds")),km.dispatch(Aa({label:co.DELAY_TIMEOUT})),km.dispatch(ka({label:co.DELAY_DURATION}))}),e)},cancelInputUiEnterChatDelayTimeout:function(){Eu&&(km.dispatch(ns(!1)),Ar(Ou,"Clearing delayed ChatInput",co.DELAY_DURATION),clearTimeout(Eu),Eu=null,km.dispatch(ka({label:co.DELAY_DURATION})))},onFetchHistoryComplete:function(e,t){km.dispatch(Ku(!1));var n=km.getState().eventLog.events;if(!t&&e){var o=Ua(e.EventList||[]),r=Ya(n,o);Ar(Ou,"onFetchHistoryComplete","Added ".concat(r," of ").concat(o.length));var i=function(e){if(!e)return null;for(var t=0;t<e.length-1;t++)if(La(e[t]))return e[t].EventId;return null}(n);km.dispatch(Xu(i));var a=e.SDKConversationState||Fa(n),s=e.IsLiveChat||xa(a);"Blocked"===e.SDKConversationState&&(km.dispatch(Ys(!0)),a=Fa(n),s=!1),km.dispatch(tl(n)),km.dispatch(Ks(a,s)),a===Bi?km.dispatch(zu(function(e){if(!e)return null;for(var t=e.length-1;t>=0;t--){if(e[t].EventType===Pi.NEW_REP)return e[t];if(e[t].EventType===Pi.ISSUE_ENQUEUED||e[t].EventType===Pi.NEW_ISSUE)break}return null}(n))):a===Hi&&km.dispatch(Es()),Ru.onHandleInputChatDelay(o,a)}},isReturningUser:function(e,t){var n,o=Ga(e);return n=o.EventTime?o.EventTime/1e3:0,Date.now()-parseInt(n,10)>864e5&&e.length>5&&(t===Vi||t===Li)},isInputUiEnterChatDelayMsEnabled:function(){var e=km.getState(),t=e.sdkSettings.InputUiEnterChatDelayMS;return!e.chat.isLiveChat&&t>0},onHandleInputChatDelay:function(e,t){Ru.isInputUiEnterChatDelayMsEnabled()&&Ru.isReturningUser(e,t)&&(Ar(Ou,"Triggering InputUiEnterChatDelayTimeout"),Ru.handleInputUiEnterChatDelayTimeout())},onWebSocketEvent:function(e){if(e){var t,n,o=km.getState().eventLog,r=o.events,i=o.firstCustomerEventId,a=Ga(r),s=a&&a.EventId;s&&s===e.EventId?Ar(Ou,"duplicate message:",e):(i&&e.isFromSRS&&e.EventIdPrevious===i&&(e.isFirstSRSMessage=!0),!i&&e.isFromCustomer&&km.dispatch(Xu(e.EventId)),n=["".concat(Ou," 'onWebSocketEvent()'"),(t=e).isEphemeral?"Ephemeral Event Type: ".concat(t.EphemeralType):"Event Type: ".concat(t.EventType),t],Ar.apply(null,n),km.dispatch(nl(e)),e.isEphemeral?km.dispatch(cl(e)):function(e,t){if(!t)return!1;var n=function(){var ements[0]?arguments[0]:[]);return e&&e.EventId}(e);return!n||t.EventIdPrevious===n}(r,e)?Ru.processNextEvent(e):(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Iu.$e((function(n){n.setExtras(t),Iu.uT(e)}))}("Unorder events detected",{currentEvent:e,lastEvent:a}),Ar(Ou,"Unordered events detected","\nCurrentEvent:",e,"\nlastEvent:",a,"\neventLog:",r),km.dispatch($u({recover:!0}))))}else Ar(Ou,"onWebSocketEvent: undefined event")},processNextEvent:function(e){var t=km.getState(),n=t.eventLog.events,o=t.chat.conversationState,r=Fa(n);o!==r&&(Ar(Ou,"ConversationState change: ",o,"--\x3e",r),km.dispatch(Aa({label:ho.CONVERSATION_CHANGED,data:{from:o,to:r}})),km.dispatch(Ks(r,xa(r),o))),km.dispatch(sl(e))}},Au=Ru;function ku(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}var Zu,wu,Mu,Du,Pu="[EventLog.actions]",Lu="ADD_MORE_EVENTS",Bu="ADD_NEW_EVENT",Hu="SET_EVENTS",Vu="SET_FIRST_REP_MESSAGE",Uu="SET_HAS_MORE_EVENTS",Fu="SET_MOST_RECENT_MESSAGE_EVENT",xu="SET_NEW_REP_EVENT",ju="SET_IS_REFETCHING_HISTORY",qu="SET_FIRST_CUSTOMER_EVENT_ID",Wu=function(){return function(e,t){e({type:Hu,events:t().eventLog.events.filter((function(e){return!e.isPending}))})}},Gu=function(e){return{type:Bu,event:e}},zu=function(e){return{type:xu,newRepEvent:e}},Qu=function(e){return{type:Vu,firstRepMessage:e}},Yu=function(e){return{type:Uu,hasMoreEvents:e}},Ku=function(e){return{type:ju,isFetchingHistory:e}},Xu=function(e){return{tygth>0&&voion(t,n){if(!n().eventLog.isFetchingHistory)return Ar(Pu,"fetchHistory"),t(Ku(!0)),mh.getHistory({recover:e.recover}).then((function(e){Au.onFetchHistoryComistory error",e)}));Ar(Pu,"fetchHistory","already fetching!")}},Ju=function(e){return function(t){clearTimeout(Zu);var n,o=e.payload;if(o&&o.buttons){var r=o.buttons.filter((function(e){return e.action&&e.action.performImmediately}))[0];r&&_u({action:r.action})}Pa(e)?(t(uc(!0)),t(lc(!1))):t(uc(!1)),t(function(e){return{type:Fu,event:e}}(e)),t((n=o&&o.hideNewQuestionButton,{type:Ds,hideNewQuestionButton:n||!1})),t(os()),Zu=setTimeout((function(){t((function(e,t){var n=t(),o=n.actionSheet.showActionSheet,r=n.chat.hideNewQuestionButton,i=n.chatInput.showInput,a=n.eventLog.mostRecentMessageEvent,s=n.quickReplies.showQuickReplies,c=a&&a.payload||{},u=c.buttons,l=c.metadata,d=void 0===l?{}:l,h=!ch(u);!r||o||i||s||h||(Ar("Metrics.actions.js","Reporting stuck in conversation"),e(Aa({label:kn,type:Lo,data:{flowId:d.flowId,issueId:d.issueId,flowName:d.flowreturn fun3*Date.now(),EventType:Pi.TEXT_MESSAGE,isPending:!0});t(nl(n))}},tl=function(e){return function(t,n){t(Yu(50===e.length)),t(function(e){return{type:Hu,events:e}}(e));var o=function(e){return lh(e).find((function(e){return Ba(e)}))}(e);o&&t(Ju(o)),n().chat.showLoadingView&&t(Xs(!1)),t(ol()),t(ha())}},nl=function(e){return function(t){if(e)switch(!e.isPending&&e.payload&&e.payload.UIMessageID?t(ul(e)):e.isEphemeral||t(Gu(e)),e.isDisplayable?(Au.cancelInputUiEnterChatDelayTimeout(),t(rl(e))):e.isWhisper&&t(hl(e)),e.EventType){case Pi.COBROWSING_INVITATION:case Pi.COBROWSING_ENDED:t(function(e){return function(t){if(e.EventType===Pi.COBROWSING_INVITATION)t(fc($r));else if(e.EventType===Pi.COBROWSING_ENDED){var n;switch(e.payload&&e.payload.Reason){case 2:n=oi;break;case 3:n=ri;bt(fc(n))}}}(e));break;case Pi.NEW_REP:t(zu(e));break;case Pi.ISSUE_EN}},ol=function(){return function(e,t){var n=t().eventLog.events,o=dh(n,(function(e){return e.isDisplayable}));if(o){var r;if(o.isFromCustomer)r=o.renderKey;else{var i=n.filter((function(e){return e.isDisplayable&&!e.isFromCustomer})).find((function(e){return(o.EventTime?o.EventTime/1e3:0)-(e.EventTime?e.EventTime/1e3:0)<200}));r=i?i.renderKey:o.renderKey}e({type:ra,scrollTargetEventId:r})}}},rl=function(e){return function(t,n){var o=n().form.showInlineForm;if(Ba(e)&&t(Ju(e)),o&&t(Pc()),e.isFromCustomer?t(ha()):t(il(e)),!e.isPending){var r="unknown";e.isFromCustomer?r=ar.INTEGRATION.SEND.TYPES.CUSTOMER:e.isFromRep?r=ar.INTEGRATION.ACTION.SENDER_TYPES.AGENT:e.isFromSRS&&(r=ar.INTEGRATION.ACTION.SENDER_TYPES.SRS),t(Aa({label:co.DISPLAYABLE_EVENT_RECEIVED,data:{senderType:r,isChatMessage:e.isChatMessage,isPictureMessage:e.isPictureMessage,hasText:e.hasText,hasAttachment:e.hasAttachment}}))}}},il=function(e){return function(t,n){var o,r=n(),i=r.chat,a=i.isLiveChat,c=i.conversationState,u=r.chatMessagesView.showTypingIndicator,l=r.chatNavBar.soundEnabled,d=r.partnerConfig,h=d.deviceInfo,p=d.sound,f=d.host.notificationPermission,g=r.sdkSettings.ASAPPNotificationsPermissionUI,m=void 0===g?{}:g,v=!1;lityState&&m.web&&(t(Aa({label:no,type:Ro,tags:(o={},(0,s.Z)(o,Ho,h&&h.deviceType),(0,s.Z)(o,Uo,f),o)})),f===or&&(Gd.post("Push Browser Notification",{body:oh(e.payload)}),th(),v=!0)),!v&&p&&l&&a&&th(),u&&!function(e){return e==Vi}(c)&&(Ar(Pu,"Will hide typing indicator"),t(ua(!1))),Jd(800)?t(ha()):t(da(e.renderKey))}},al=function(e){return function(){e.payload&&e.payload.buttons&&Gd.post(Jt,{type:ar.INTEGRATION.ACTION.EVENTS.FEEDBACK_REQUESTED})}},sl=function(e){return function(t,n){var o,r=n(),i=r.chat.isLiveChat,a=r.eventLog,s=a.firstRepMessage,c=a.newRepEvent,u=c&&function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).payload;return e&&e.NewRep&&e.NewRep.CRMRepId||null}(c),l={issueId:e.IssueId,customerId:e.CustomerId,externalSenderId:u||void 0},d={issueId:e.IssueId};if(e.isEphemeral){var h=e.payload;if(!h||"flowFinished"!==h.type)return;o=ar.INTEGRATION.ACTION.EVENTS.FLOW_END,Object.assign(l,{data:h&&h.data})}else if(function(e){return e.EventType===Pi.NEW_ISSUE}(e))o=ar.INTEGRATION.ACTION.EVENTS.ISSUE_NEW;else if(function(e){return e.EventType===Pi.CONVERSATION_END||e.EventType===Pi.CUSTOMER_CONVERSATION_END}(e))o=ar.INTEGRATION.ACTION.EVENTS.ISSUE_END;else if(function(e){return e.EventType===Pi.NEW_REP}(e))o=ar.INTEGRATION.ACTION.EVENTS.AGENT_ASSIGNED;else{if(!Ba(e))return;var p=!s&&e.isFromRep;p&&t(Qu(e)),o=ar.INTEGRATION.ACTION.EVENTS.MESSAGE_RECEIVED;var f={senderType:e.isFromSRS?ar.INTEGRATION.ACTION.SENDER_TYPES.SRS:ar.INTEGRATION.ACTION.SENDER_TYPES.AGENT,isLiveChat:i,isFirstMessage:e.isFirstSRSMessage||p};Object.assign(l,f),Object.assign(d,f)}var g={type:o,detail:l};Gd.post(Jt,g);var m={type:o,detail:d};t(Aa({label:co.PARTNER_EVENT_t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ku(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.payload))),t(Ca(Gr));break;case 10:mh.updateContext().catch((function(e){Ar.Warn(Pu,"Update context error",e)}));break;case 14:t(sl(e));break;case 13:mh.checkCobrowsingUrl(!1).catch((function(e){Ar.Warn(Pu,"Check Cobrowsing URL error",e)}));break;case 21:e.payload&&e.payload.ShowBlockingMessage?t(Ys(!0)):t(Ys(!1))}}}},ul=function(e){return function(t,n){var o=n().eventLog.events,r=(e&&e.payload).UIMessageID;dl(r,o)?t({type:Hu,events:o.map((function(t){return t.payload.UIMessageID===r?e:t}))}):t(Gu(e))}},ll=function(e,t){return function(n,o){var r=o().eventLog.events;dl(e,r)&&n({type:Hu,events:r.map((function(n){return n.payload.UIMessageID===e?Object.assign({},n,t):n}))})}},dl=function(e,t){for(var n=!1,o=t.length-1;o>=0;o--)if(t[o].payload.UIMessageID===e){n=!0;break}return n},hl=function(e){return function(t){t(Aa({label:co.WHISPER_EVENT_RECEIVED,data:{EventId:e.EventId,IssueId:e.IssueId}}))}},pl=n("TSYQ"),fl=n.n(pl),gl=n("ufqH");var ml=oa.ZP.ul(wu||(wu=(0,$i.Z)(["\n    background-color: ",";\n"])),(function(e){var t=e.theme.colors;return"".concat((0,gl._j)(.03,t.white))})),vl=oa.ZP.li(Mu||(Mu=(0,$i.Z)(["\n    background-color: ",";\n"])),(function(e){var t=e.theme.colors,n=e.isSelected;return"".concat(n?t.gray12:"transparent")})),El=oa.ZP.span(Du||(Du=(0,$i.Z)(["\n    color: ",";\n"])),(function(e){return e.theme.colors.onBackground})),Cl="chat-input-autocomplete",Sl=function(e){(0,Yi.Z)(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(return(0,Ki.Z)(this,e)});function r(e){var t;return(0,ur.Z)(this,r),(t=o.call(this,e)).handleHover=t.handleHover.bind((0,Qi.Z)(t)),t.handleSelect=t.handleSelect.bind((0,Qi.Z)(t)),t.handleUnhover=t.handleUnhover.bind((0,Qi.Z)(t)),t}return(0,lr.Z)(r,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.autocomplete&&e.autocomplete.classList.remove("autocomplete_hidden")}),50)}},{keideAutoComplete&&this.autocoideAutoComplete?"add":"remove"]("autocomplete_hidden")}},{key:"handleHover",value:function(e){var t=e.currentTarget.value;this.props.selectAutocomplete(t)}},{key:"handleUnhover",value:function(){this.props.selectAutocomplete(null)}},{key:"handleSelect",value:function(e){var t=e.currentTarget&&e.currentTarget.value;this.props.handleAutocompleteSelect(t)}},{key:"render",value:function(){var e=this;return c.createElement("div",{className:"autocomplete__container"},c.createElement(ml,{id:Cl,className:"autocomplete autocomplete_hidden",ref:function(t){return e.autocomplete=t},role:"listbox"},c.createElement("div",{"aria-atomic":"true","aria-live":"polite",className:"announcer",role:"status"},!this.props.hideAutoComplete&&c.createElement("p",null,(0,sr.translate)(B,this.props.suggestions.length))),this.props.suggestions.map((function(t,n){var o=e.props.selectedAutocomplete===n;return c.createElement(vl,{key:"autocomplete-".concat(n),id:"".concat(Cl,"-option").concat(n),className:"autocomplete__option",isSelected:o,role:"option","aria-selected":o,value:n,onMouseDown:e.handleSelect,onTouchStart:e.handleSelect,onMouseEnter:e.handleHover,onMouseLeave:e.handleUnhover},c.createElement(El,null,t))}))))}}]),r}(c.Component),yl=Sl;Sl.propTypes={selectAutocomplete:ea().func,handleAutocompleteSelect:ea().func,selectedAutocomplete:ea().number,suggestions:ea().array,hideAutoComplete:ea().bool};var bl,_l,Tl=Object.freeze({attachment:c.createElement("path",{d:"M27.165 3.395L6.36 24.25a13.726 13.726 0 0 0 5.928 23.322 13.664 13.664 0 0 0 13.397-3.935l20.856-20.856-2.774-2.774-20.835 20.856A9.76 9.76 0 0 1 5.99 36.795a9.801 9.801 0 0 1 3.154-9.729L29.928 6.17a5.897 5.897 0 1 1 8.291 8.301L17.384 35.347a1.962 1.962 0 1 1-2.764-2.774l20.836-20.856-2.774-2.774-20.826 20.876a5.928 5.928 0 1 0 8.281 8.312l20.856-20.877A9.801 9.801 0 0 0 36.925.272a9.76 9.76 0 0 0-9.72 3.164l-.04-.041z"}),goBack:c.createElement("path",{d:"M44.9196 20.4183H10.5118L25.544 5.30391C26.7454 4.09601 26.7454 2.1138 25.544 0.905887C24.9685 0.325928 24.1872 0 23.3724 0C22.5576 0 21.7762 0.325928 21.2007 0.905887L0.901011 21.3165C-0.300337 22.5244 -0.300337 24.4756 0.901011 25.6835L21.2007 46.0941C22.4021 47.302 24.3427 47.302 25.544 46.0941C26.7454 44.8862 26.7454 42.9349 25.544 41.727L10.5118 26.6127H44.9196C46.6138 26.6127 48 25.2189 48 23.5155C48 21.812 46.6138 20.4183 44.9196 20.4183Z"}),navCheck:c.createElement("path",{d:"M15.2541 35.1916L3.87492 23.686L0 27.5763L15.2541 43L48 9.89039L44.1524 6L15.2541 35.1916Z"}),close:c.createElement("path",{d:"M48.17 5.87l-5.7-5.7-18.3 18.3L5.87.17l-5.7 5.7 18.3 18.3-18.3 18.3 5.7 5.7 18.3-18.3 18.3 18.3 5.7-5.7-18.3-18.3z"}),downArrow:c.createElement("path",{d:"M43.77 10L24 29.72 4.24 10 0 14.22l19.77 19.72L24 38.17l24-23.94z"}),leftArrow:c.createElement("path",{d:"M38.75 40.53l-5.99 5.988L10 23.76 32.758 1l5.991 5.989L21.977 23.76z"}),loading:c.createElement("path",{d:"M24.02 0l.708 4.013A20.36 20.36 0 0 0 24 4C12.954 4 4 12.954 4 24s8.954 20 20 20c8.565 0 15.872-5.384 18.723-12.951l3.997.705C43.496 41.204 34.542 48 24 48 10.745 48 0 37.255 0 24S10.745 0 24 0h.02z"}),minimize:c.createElement("path",{d:"M3 21h42v6H3z"}),more:c.createElement("path",{d:"M23.538 11.077a5.531 5.531 0 0 0 5.539-5.539A5.531 5.531 0 0 0 23.538 0 5.531 5.531 0 0 0 18 5.538a5.531 5.531 0 0 0 5.538 5.539zm0 7.385A5.531 5.531 0 0 0 18 24a5.531 5.531 0 0 0 5.538 5.538A5.531 5.531 0 0 0 29.077 24a5.531 5.531 0 0 0-5.539-5.538zm0 18.461A5.531 5.531 0 0 0 18 42.462 5.531 5.531 0 0 0 23.538 48a5.531 5.531 0 0 0 5.539-5.538 5.531 5.531 0 0 0-5.539-5.539z"}),newQuestion:c.createElement("path",{d:"M30.445 44.8c-2.107.52-4.27.781-6.44.776C10.763 45.576 0 36.026 0 24.288 0 12.552 10.763 3 23.995 3 37.227 3 48 12.552 48 24.288c0 4.64-1.725 9.179-4.872 12.861.667 1.456 1.627 2.6 2.872 3.427.656.432.96 1.19.795 1.947a1.81 1.81 0 0 1-1.52 1.4c-2 .285-5.902.424-9.499-1.742a1.208 1.208 0 0 1 .326-2.205c.31-.078.638-.03.911.136 2.254 1.368 4.686 1.627 6.467 1.557-1.264-1.133-2.224-2.592-2.87-4.333a1.221 1.221 0 0 1 .243-1.24c3.11-3.387 4.755-7.467 4.755-11.808 0-10.408-9.693-18.875-21.603-18.875C12.096 5.413 2.4 13.88 2.4 24.288S12.093 43.165 24 43.165c1.992 0 3.973-.237 5.875-.709a1.208 1.208 0 0 1 .568 2.344h.002zm-6.429-18.965a1.541 1.541 0 0 1-1.541-1.547 1.541 1.541 0 0 1 3.077 0c0 .853-.688 1.547-1.536 1.547zm6.624 0a1.541 1.541 0 0 1-1.539-1.547c0-.853.691-1.547 1.539-1.547.85 0 1.539.694 1.539 1.547s-.688 1.547-1.539 1.547zm-13.253 0a1.541 1.541 0 0 1-1.536-1.547c0-.853.688-1.547 1.538-1.547.848 0 1.539.694 1.539 1.547s-.69 1.547-1.539 1.547h-.002z"}),send:c.createElement("path",{d:"M0 8.89V20l36 4-36 4v11.11a4 4 0 0 0 5.47 3.72l40.4-17.21a2 2 0 0 0 0-3.71L5.47 5.17A4 4 0 0 0 0 8.89z"}),upArrow:c.createElement("path",{d:"M43.77 38.17L24 18.45 4.24 38.17 0 33.94l19.77-19.72L24 10l24 23.94-4.23 4.23z"}),dockRight:c.createElement("g",null,c.createElement("mask",{id:"mask-path-1"},c.createElement("path",{d:"M28.8 38.6V9.8H4.8V38.6H28.8ZM28.8 5H43.2H46C47.1046 5 48 5.89543 48 7V9.8V38.6V41.4C48 42.5046 47.1046 43.4 46 43.4H43.2H28.8H4.8C2.14903 43.4 0 41.251 0 38.6V9.8C0 7.14903 2.14903 5 4.8 5H28.8Z"})),c.createElement("path",{d:"M28.8 38.6V9.8H4.8V38.6H28.8ZM28.8 5H43.2H46C47.1046 5 48 5.89543 48 7V9.8V38.6V41.4C48 42.5046 47.1046 43.4 46 43.4H43.2H28.8H4.8C2.14903 43.4 0 41.251 0 38.6V9.8C0 7.14903 2.14903 5 4.8 5H28.8Z"}),c.createElement("path",{d:"M28.8 38.6V40.6H30.8V38.6H28.8ZM28.8 9.8H30.8V7.8H28.8V9.8ZM4.8 9.8V7.8H2.8V9.8H4.8ZM4.8 38.6H2.8V40.6H4.8V38.6ZM30.8 38.6V9.8H26.8V38.6H30.8ZM28.8 7.8H4.8V11.8H28.8V7.8ZM2.8 9.8V38.6H6.8V9.8H2.8ZM4.8 40.6H28.8V36.6H4.8V40.6ZM28.8 7H43.2V3H28.8V7ZM43.2 7H46V3H43.2V7ZM46 7H50C50 4.79086 48.2091 3 46 3V7ZM46 7V9.8H50V7H46ZM46 9.8V38.6H50V9.8H46ZM46 38.6V41.4H50V38.6H46ZM46 41.4V45.4C48.2091 45.4 50 43.6091 50 41.4H46ZM46 41.4H43.2V45.4H46V41.4ZM43.2 41.4H28.8V45.4H43.2V41.4ZM4.8 45.4H28.8V41.4H4.8V45.4ZM-2 38.6C-2 42.3555 1.04447 45.4 4.8 45.4V41.4C3.2536 41.4 2 40.1464 2 38.6H-2ZM-2 9.8V38.6H2V9.8H-2ZM4.8 3C1.04446 3 -2 6.04446 -2 9.8H2C2 8.2536 3.2536 7 4.8 7V3ZM28.8 3H4.8V7H28.8V3Z",mask:"url(#mask-path-1)"})),dockLeft:c.createElement("g",null,c.createElement("mask",{id:"mask-path-1"},c.createElement("path",{d:"M2 5H4.8H19.2H43.2C45.851 5 48 7.14903 48 9.8V38.6C48 41.251 45.851 43.4 43.2 43.4H19.2H4.8H2C0.895431 43.4 0 42.5046 0 41.4V38.6V9.8V7C0 5.89543 0.89543 5 2 5ZM19.2 38.6H43.2V9.8H19.2V38.6Z"})),c.createElement("path",{d:"M2 5H4.8H19.2H43.2C45.851 5 48 7.14903 48 9.8V38.6C48 41.251 45.851 43.4 43.2 43.4H19.2H4.8H2C0.895431 43.4 0 42.5046 0 41.4V38.6V9.8V7C0 5.89543 0.89543 5 2 5ZM19.2 38.6H43.2V9.8H19.2V38.6Z"}),c.createElement("path",{d:"M19.2 38.6H17.2V40.6H19.2V38.6ZM43.2 38.6V40.6H45.2V38.6H43.2ZM43.2 9.8H45.2V7.8H43.2V9.8ZM19.2 9.8V7.8H17.2V9.8H19.2ZM4.8 3H2V7H4.8V3ZM19.2 3H4.8V7H19.2V3ZM43.2 3H19.2V7H43.2V3ZM50 9.8C50 6.04446 46.9555 3 43.2 3V7C44.7464 7 46 8.2536 46 9.8H50ZM50 38.6V9.8H46V38.6H50ZM43.2 45.4C46.9555 45.4 50 42.3555 50 38.6H46C46 40.1464 44.7464 41.4 43.2 41.4V45.4ZM19.2 45.4H43.2V41.4H19.2V45.4ZM4.8 45.4H19.2V41.4H4.8V45.4ZM2 45.4H4.8V41.4H2V45.4ZM-2 41.4C-2 43.6091 -0.20914 45.4 2 45.4V41.4H-2ZM-2 38.6V41.4H2V38.6H-2ZM-2 9.8V38.6H2V9.8H-2ZM-2 7V9.8H2V7H-2ZM2 3C-0.209141 3 -2 4.79086 -2 7H2H2V3ZM19.2 40.6H43.2V36.6H19.2V40.6ZM45.2 38.6V9.8H41.2V38.6H45.2ZM43.2 7.8H19.2V11.8H43.2V7.8ZM21.2 38.6V9.8H17.2V38.6H21.2Z",mask:"url(#mask-path-1)"})),bell:c.createElement("path",{d:"M38.4435 33.2306V20.923C38.4435 13.3661 34.5197 7.03997 27.6109 5.36613V3.69229C27.6109 1.64922 25.9981 0 24.0001 0C22.0021 0 20.3892 1.64922 20.3892 3.69229V5.36613C13.5046 7.03997 9.55671 13.3415 9.55671 20.923V33.2306L4.74225 38.1539V40.6154H43.258V38.1539L38.4435 33.2306ZM24.0001 48C26.648 48 28.8145 45.7842 28.8145 43.0769H19.1856C19.1856 45.7842 21.3521 48 24.0001 48ZM14.3712 35.6922H33.629V20.923C33.629 14.8184 29.9941 9.84611 24.0001 9.84611C18.0061 9.84611 14.3712 14.8184 14.3712 20.923V35.6922ZM13.3601 3.88921L9.91779 0.369229C4.14044 4.87383 0.337012 11.8153 0 19.6922H4.81447C5.17555 13.1692 8.44938 7.45843 13.3601 3.88921ZM48 19.6922H43.1855C42.8247 13.1692 39.5266 7.45843 34.6641 3.88921L38.0822 0.369229C43.8357 4.87383 47.6391 11.8153 48 19.6922Z"}),phone:c.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M37.1513 32.2751L43.9247 33.0484C46.618 33.3684 48.6447 35.6351 48.618 38.3284V42.9417C48.618 45.9551 46.1113 48.4617 43.098 48.2751C20.3513 46.8617 2.13797 28.6751 0.72464 5.90177C0.537973 2.88843 3.04464 0.38176 6.05797 0.38176H10.6713C13.3913 0.38176 15.658 2.40843 15.978 5.10177L16.7513 11.8218C16.938 13.4484 16.378 15.0484 15.2313 16.1951L10.298 21.1284C14.138 28.7017 20.3247 34.8617 27.8713 38.7017L32.778 33.7951C33.9247 32.6484 35.5247 32.0884 37.1513 32.2751ZM26.9913 5.82177C35.4713 6.88843 42.1113 13.5284 43.178 22.0084C43.338 23.3684 44.4847 24.3551 45.818 24.3551C45.9247 24.3551 46.0313 24.3551 46.138 24.3284C47.6047 24.1417 48.6447 22.8084 48.458 21.3417C47.098 10.4351 38.538 1.8751 27.6313 0.515093C26.1647 0.355093 24.8313 1.39509 24.6713 2.86177C24.4847 4.32843 25.5247 5.66177 26.9913 5.82177ZM28.0047 11.4484C26.5913 11.0751 25.1247 11.9284 24.7513 13.3684C24.378 14.8084 25.2313 16.2484 26.6713 16.6217C29.4713 17.3417 31.658 19.5284 32.4047 22.3551C32.7247 23.5551 33.7913 24.3551 34.9913 24.3551C35.2047 24.3551 35.4447 24.3284 35.658 24.2751C37.0713 23.9017 37.9247 22.4351 37.578 21.0217C36.3247 16.3017 32.6713 12.6484 28.0047 11.4484Z"})});function Il(e){var t=e.hidden,n=e.className,o=e.iconName,r=e.title,i=Tl[o];if(void 0===i)return Ar("Icon.js","Icon not found",i),null;var a=["icon","icon_".concat(o),n].join(" ").trim(),s={"aria-hidden":!(r.length>0)&&t,className:a,fill:"#000",height:"48",role:"img",title:r.length>0?r:null,viewBox:"0 0 48 48",width:"48",xmlns:"http://www.w3.org/2000/svg"};return c.createElement("svg",s,i)}Il.defaultProps={hidden:!0,title:""},Il.propTypes={hidden:ea().bool,className:ea().string,iconName:ea().string.isRequired,title:ea().string};var Nl,Ol,Rl=(bl={},(0,s.Z)(bl,40,!0),(0,s.Z)(bl,38,!0),bl),Al=(Object.assign({},Rl,(_l={},(0,s.Z)(_l,37,!0),(0,s.Z)(_l,39,!0),_l)),new RegExp(/[0-9]|\.|,|-|\+/)),kl=function(e){return 13===e.keyCode};var Zl=oa.ZP.textarea(Nl||(Nl=(0,$i.Z)(["\n    background-color: ",";\n    border-color: transparent;\n    color: ",";\n\n    &:focus {\n        border: ",";\n    }\n\n    &::placeholder {\n        color: ",";\n    }\n"])),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.onBackground}),(function(e){var t=e.theme.colors;return"2px solid ".concat(t.gray25)}),(function(e){var t=e.theme.colors;return(0,gl.m4)(t.onBackground,.65)})),wl=oa.ZP.button(Ol||(Ol=(0,$i.Z)(["\n    .icon {\n        fill: ",";\n    }\n\n    &:hover {\n        background-color: ",";\n    }\n"])),(function(e){var t=e.theme.colors;return e.disabled?t.gray50:t.primary}),(function(e){return e.theme.colors.gray5})),Ml=[Pl],Dl="chat-input",Pl=function(e){(0,Yi.Z)(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,Xi.Z)(t);if(n){var r=(0,Xi.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,Ki.Z)(this,e)});function r(e){var t;return(0,ur.Z)(this,r),(t=o.call(this,e)).state={sendButtonActive:!1,isActive:!1},t.chatInputLabel=(0,sr.translate)(x),t.keystrokesCount=0,t.requestList=[],t.analyticsData={},t.onTouchMove=t.onTouchMove.bind((0,Qi.Z)(t)),t.onKeyDown=t.onKeyDown.bind((0,Qi.Z)(t)),t.onKeyPress=t.onKeyPress.bind((0,Qi.Z)(t)),t.onLabelKeyDown=t.onLabelKeyDown.bind((0,Qi.Z)(t)),t.onChange=t.onChange.bind((0,Qi.Z)(t)),t.onSubmit=t.onSubmit.bind((0,Qi.Z)(t)),t.isEmpty=t.isEmpty.bind((0,Qi.Z)(t)),t.canUploadAttachments=t.canUploadAttachments.bind((0,Qi.Z)(t)),t.clearInput=t.clearInput.bind((0,Qi.Z)(t)),t.sendTextMessage=t.sendTextMessage.bind((0,Qi.Z)(t)),t.sendSRSMessage=t.sendSRSMessage.bind((0,Qi.Z)(t)),t.updateInputHeight=t.updateInputHeight.bind((0,Qi.Z)(t)),t.fetchAutocomplete=t.fetchAutocomplete.bind((0,Qi.Z)(t)),t.hasAutocomplete=t.hasAutocomplete.bind((0,Qi.Z)(t)),t.handleAutocompleteSelect=t.handleAutocompleteSelect.bind((0,Qi.Z)(t)),t.handleAnalyticsData=t.handleAnalyticsData.bind((0,Qi.Z)(t)),t.handleFileInputClick=t.handleFileInputtocomplete.bind((0,Qi.Z)(t)),t.ha((0,Qi.Z)(t)),t}return(0,lr.Z)(r,[{key:"componentWillUnmount",value:function(){var e=document.getElementById(ql);e&&e.feFocus",value:function(){var e=this;this.setState({isActive:!0}),dr()&&(this.props.setShowQuickReplies(!1),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return/Android/i.test(e)}()&&setTimeout((function(){e.props.scrollToBottom()}),450))}},{key:"handleBlur",value:function(){this.setState({isActive:!1}),this.props.selectAutocomplete(null),this.isEmpty()&&Pa(this.props.mostRecentMessageEvent)&&this.props.setShowQuickReplies(!0)}},{key:"onTouchMove",value:function(e){e.preventDefault()}},{key:"onKeyDown",value:function(e){var t;this.hasAutocomplete()&&(t=e.nativeEvent,Rl[t.keyCode])&&this.navigateAutocomplete(40===e.nativeEvent.keyCode)}},{key:"onKeyPress",value:function(e){kl(e.nativeEvent)?(e.preventDefault(),null!==this.props.selectedAutocomplete?this.handleAutocompleteSelect(this.props.selectedAutocomplete):this.onSubmit(e)):xa(this.props.conversationState)||this.keystrokesCount++}},{key:"onLabelKeyDown",value:function(e){kl(e.nativeEvent)&&e.target&&e.target.click()}},{key:"canShowAutoComplete",value:function(){var e=this.props.sdkSettings.ShowAutocompleteInGenerativeAgent,t=this.props.conversationState===Li,n=this.props.conversationState===Vi&&e;return t||n}},{key:"onChange",value:function(){var e=this._textarea.value,t=this.props.conversationState,n=this.isEmpty(e);xa(t)?mh.sendTypingPreview({text:e}):!n&&this.canShowAutoComplete(t)?this.fetchAutocomplete(e):(!dr()&&Pa(this.props.mostRecentMessageEvent)&&this.props.setShowQuickReplies(!0),this.props.resetAutocomplete()),this.setState({sendButtonActive:!n}),this.updateInputHeight()}},{key:"onSubmit",value:function(){var e=this._textarea.value;this.isEmpty(e)?Ar(Ml,"Unable to send empty message."):e.length>1e4?this.props.setChatBanner(jr):(xa(this.props.conversationState)?this.sendTextMessage(e):this.sendSRSMessage(e),ja(this.props.conversationState)?this._textarea.focus():this.props.setShowInput(!1))}},{key:"isEmpty",value:function(e){var t=e||this._textarea.value;return!/\S/.test(t||"")}},{key:"clearInput",value:function(){this._textarea&&(this._textarea.value=""),this.setState({sendButtonActive:!1}),this.keystrokesCount=0,this.analyticsData={},this.requestList=[],this.props.resetAutocomplete()}},{key:"sendTextMessage",value:function(e){mh.sendTypingPreview({text:""}),mh.sendTextMessage(e).catch((function(e){Ar.Warn(Ml,"Error sending text message",e)})),this.clearInput()}},{key:"sendSRSMessage",value:function(e){this.analyticsData.KeystrokesAfterSelection=this.keystrokesCount,this.props.setQuickRepliesDisabled(!0),mh.sendSRSMessage({text:e,CustAutoCompleteAnalytics:this.analyticsData}).catch((function(e){return Ar.Warn(Ml,"Error sending SRS message",e)})),this.clearInput()}},{key:"updateInputHeight",value:function(){if(this._textarea)if(this.props.displaySettings.FrameStyle===Jo&&this.props.isDocked)this._textarea.style.height="";else{var e=this._textarea.scrollHeight;e<=83&&(this._textarea.style.height="auto",this._textarea.style.height=this._textarea.scrollHeight+4+"px"),e>83&&!this.isEmpty()?(this._textarea.classList.add("scrollable"),this._textarea.style.height<83&&(this._textarea.style.height="83px")):this._textarea.classList.contains("scrollable")&&this._textarea.classList.remove("scrollable")}}},{key:"fetchAutocomplete",value:function(e){var t=this;this.requestList.push(e),mh.requestAutocomplete({params:{text:e,number:4},onComplete:function(n){var o=t.requestList.indexOf(e);if(!(t._textarea&&!t._textarea.value||o<0))if(t.requestList=t.requestList.slice(o+1),n&&n.Suggestions){t.props.setShowQuickReplies(!1);var r=Object.assign({},n,{Original:e});t.props.setAutocomplete(r)}else t.hasAutocomplete()&&t.props.resetAutocomplete()}})}},{key:"hasAutocomplete",value:function(){return this.props.autocomplete&&this.props.autocomplete.Suggestions&&this.props.autocomplete.Suggestions.length>0}},{key:"handleAutocompleteSelect",value:function(e){if(null!==e){var t=this.props.autocomplete.Suggestions[e];this._textarea&&t&&(this._textarea.focus(),this._textarea.value=t,this.updateInputHeight(),this.handleAnalyticsData(e,t),this.props.resetAutocomplete())}}},{key:"handleAnalyticsData",value:function(e,t){var n=this.props.autocomplete,o=n.ResponseId,r=n.Suggestions,eSelection:this.keystrokesCount,Suggestion:t,Index:e,ResponseId:o,Original:i,ReturnedCount:r.length,DisplayedCount:r.length},this.keystrokesCount=0}},{key:"handleFileInputClick",value:function(e){e&&e.target&&(e.target.value=null)}},{key:"navigateAutocomplete",value:function(e){var t,n=this.props.autocomplete.Suggestions.length-1,o=this.props.selectedAutocomplete;t=null===o||o<0||o>n?e?0:n:e?o+1:o-1,this.props.selectAutocomplete(t)}},{key:"canUploadAttachments",value:function(){var e=this.props.sdkSettings,t=e.IsDocumentUploadingEnabled,n=e.IsPhotoUploadingEnabled;return xa(this.props.conversationState)&&(t||n)}},{key:"render",value:function(){var e=this,t=this.hasAutocomplete(),n=this.canUploadAttachments(),o=this.props.sdkSettings.SupportedUploadMIMETypes,r=void 0===o?[]:o,i={className:fl()("chatInput__textarea",{chatInput__textarea_sideBar:this.props.displaySettings.FrameStyle===Jo&&this.props.isDocked}),id:Dl,autoComplete:"off","aria-label":this.chatInputLabel,"aria-expanded":t?this.state.isActive:void 0,"aria-autocomplete":"list",onBlur:this.handleBlur,onChange:this.onChange,onFocus:this.handleFocus,onKeyDown:this.onKeyDown,onKeyPress:this.onKeyPress,onTouchMove:this.onTouchMove,placeholder:this.chatInputLabel,ref:function(t){e._textarea=t},rows:"1","aria-activedescendant":null!==this.props.selectedAutocomplete?"".concat(Cl,"-option").concat(this.props.selectedAutocomplete):void 0,role:t?"combobox":void 0},a={className:fl()("chatInput__sendButton",{chatInput__sendButton_disabled:!this.state.sendButtonActive}),disabled:!this.state.sendButtonActive,onClick:this.onSubmit,title:(0,sr.translate)(W),type:"submit"},s={id:"chat-input-file-hidden",name:"file",onChange:this.props.sendFile,type:"file",accept:r.join(","),onClick:this.handleFileInputClick};return c.createElement("footer",{"aria-label":(0,sr.translate)(j),className:fl()("chatInput",{chatInput_hidden:!this.props.showInput,chatInput_active:this.state.isActive}),ref:function(t){e._container=t},tabIndex:"-1"},t&&c.createElement(yl,{suggestions:this.props.autocomplete.Suggestions,selectAutocomplete:this.props.selectAutocomplete,selectedAutocomplete:this.props.selectedAutocomplete,handleAutocompleteSelect:this.handleAutocompleteSelect,hideAutoComplete:!this.state.isActive}),c.createElement(Zl,i),c.createElement("div",{className:"chatInput__buttonContainer"},n&&c.createElement("form",{className:"chatInput__attachmentButton__form"},c.createElement(wl,{as:"label",className:"chatInput__attachmentButton",htmlFor:"chat-input-file-hidden",title:(0,sr.translate)(F),tabIndex:"0",onKeyDown:this.onLabelKeyDown},c.createElement(Il,{iconName:"attachment"})),c.createElement("input",s)),c.createElement(wl,a,c.createElement(Il,{iconName:"send"}))))}}]),r}(c.Component);Pl.propTypes={autocomplete:ea().object,mostRecentMessageEvent:ea().object,displaySettings:ea().object,isDocked:ea().bool,conversationState:ea().string,sendFile:ea().func.isRequired,regionCode:ea().string.isRequired,resetAutocomplete:ea().func,scrollToBottom:ea().func,sdkSettings:ea().object.isRequired,selectAutocomplete:ea().func,selectedAutocomplete:ea().number,setAutocomplete:ea().func,setChatBanner:ea().func,setQuickRepliesDisabled:ea().func,setShowInput:ea().func,setShowQuickReplies:ea().func,showInput:ea().bool};var Ll,Bl,Hl=(0,h.$j)((function(e){var t=e.chat,n=e.chatInput,o=e.eventLog,r=e.partnerConfig,i=e.sdkSettings;return{autocomplete:n.autocomplete,displaySettings:r.displaySettings,isDocked:t.isDocked,sdkSettings:i,selectedAutocomplete:n.selectedAutocomplete,regionCode:r.regionCode,showInput:n.showInput,conversationState:t.conversationState,mostRecentMessageEvent:o.mostRecentMessageEvent}}),(function(e){return{setAutocomplete:function(t){e(function(e){return{type:$a,autocomplete:e}}(t))},resetAutocomplete:function(){e({type:Ka})},selectAutocomplete:function(t){e(function(e){return{type:Xa,selectedAutocomplete:e}}(t))},setChatBanner:function(t){e(Js(t))},setQuickRepliesDisabled:function(t){e(lc(t))},scrollToBottom:function(){e(ha())},setShowQuickReplies:function(t){e(uc(t))},setShowInput:function(t){e(ts(t))},sendFile:function(t){e(ac(t))}}}))(Pl);var Vl="quick-replies-container",Ul=oa.ZP.div(Ll||(Ll=(0,$i.Z)(["\n    background-color: ",";\n    border-top: ",";\n\n    + .chatInput {\n        border-top: ",";\n    }\n"])),(function(e){var t=e.theme.colors;return"".concat((0,gl.m4)(t.onBackground,.05))}),(function(e){var t=e.theme.colors;return"1px solid ".concat(t.borderColor)}),(function(e){var t=e.theme.colors,n=e.hidden;return"".concat(n&&"1px solid ".concat(t.borderColor))})),Fl=oa.ZP.button(Bl||(Bl=(0,$i.Z)(["\n    border-color: ",";\n    color: ",";\n    box-sizing: border-box;\n\n    &:active,\n    &:focus {\n        -webkit-tap-highlight-color: ",";\n    }\n\n    &:focus:enabled,\n    &:hover:enabled {\n        background-color: ",";\n        border-color: ",";\n        color: ",";\n        cursor: pointer;\n    }\n\n    @media (pointer: coarse) {\n        &:hover:enabled {\n            background-color: transparent;\n            border-color: ",";\n            color: ",";\n        }\n    }\n"])),(function(e){return e.theme.colors.quickReplyButtonPrimary}),(function(e){return e.theme.colors.quickReplyButtonPrimary}),(function(e){var t=e.theme.colors;return"".concat((0,gl.m4)(t.quickReplyButtonPrimary,.25))}),(function(e){return e.theme.colors.quickReplyButtonPrimary}),(function(e){return e.theme.colors.quickReplyButtonPrimary}),(function(e){return e.theme.colors.quickReplyButtonOnPrimary}),(function(e){return e.theme.colors.quickReplyButtonPrimary}),(function(e){return e.theme.colors.quickReplyButtonPrimary})),xl=function(e){(0,Yi.Z)(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,Xi.Z)(t);if(n){var r=(0,Xi.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,Ki.Z)(this,e)});function r(e){var t;return(0,ur.Z)(this,r),(t=o.call(this,e)).state={animating:!0},t.onClick=t.onClick.bind((0,Qi.Z)(t)),t.renderQuickReplyButton=t.renderQuickReplyButton.bind((0,Qi.Z)(t)),t.setAnimationTimeout=t.setAnimationTimeout.bind((0,Qi.Z)(t)),t}return(0,lr.Z)(r,[{key:"componentDidMount",value:function(){this.setAnimationTimeout()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout)}},{key:"componentDidUpdate",value:function(e){e.mostRecentMessageEvent!==this.props.mostRecentMessageEvent&&(this.quickReplies&&(this.quickReplies.scrollTop=0),this.setState({animating:!0}),this.setAnimationTimeout())}},{key:"setAnimationTimeout",value:function(){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.setState({animating:!1})}),450)}},{key:"getScrollbarMinimum",value:function(){return window.innerHeight>550?3:window.innerHeight>=415?2:1}},{key:"onClick",value:function(e){if(e&&!this.props.quickRepliesDisabled){this.props.setQuickRepliesDisabled(!0),this.props.setShowInput(!1),_u({action:e.action,quickReply:e});var t=this.props.mostRecentMessageEvent&&this.props.mostRecentMessageEvent.payload&&this.props.mostRecentMessageEvent.payload.metadata,n=e.action&&e.action.content&&e.action.content.metadata;mh.sendAnalyticsEvent({name:"quickReply.selected",attributes:{metadata:n,messageMetadata:t,quickReplyText:e.title}}).then()}}},{key:"renderQuickReplyButton",value:function(e){var t=this,n=e.title,o=e.action;return n&&o?c.createElement(Fl,{key:n,className:"quickReplies__button",disabled:this.state.animating||this.props.quickRepliesDisabled,onClick:function(){t.onClick(e)}},n):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.isLiveChat,o=t.isBlocked,r=t.mostRecentMessageEvent,i=t.showQuickReplies,a=Da(r)||[],s=o||n||!i;return c.createElement(Ul,{"aria-flowto":Dl,"aria-haspopup":"false","aria-label":(0,sr.translate)(we),className:fl()("quickReplies",{quickReplies_animating:this.state.animating,quickReplies_hidden:s,quickReplies_transparent:0===a.length,quickReplies_noScrollbar:a.length<=this.getScrollbarMinimum(),quickReplies_disabled:this.props.quickRepliesDisabled}),id:Vl,role:"region",tabIndex:"-1",ref:function(t){return e.quickReplies=t},hidden:s},a.map(this.renderQuickReplyButton))}}]),r}(c.Component),jl=(0,h.$j)((function(e){var t=e.chat,n=e.eventLog,o=e.partnerConfig,r=e.quickReplies;return{showQuickReplies:r.showQuickReplies,regionCode:o.regionCode,isLiveChat:t.isLiveChat,isBlocked:t.isBlocked,quickRepliesDisabled:r.quickRepliesDisabled,mostRecentMessageEvent:n.mostRecentMessageEvent}}),(function(e){return{setQuickRepliesDisabled:function(t){e(lc(t))},setShowInput:function(t){e(ts(t))}}}))(xl);xl.propTypes={isLiveChat:ea().bool,isBlocked:ea().bool,showQuickReplies:ea().bool,quickRepliesDisabled:ea().bool,setQuickRepliesDisabled:ea().func,setShowInput:ea().func,mostRecentMessageEvent:ea().object};var ql="announcer",Wl=function(e){(0,Yi.Z)(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,Xi.Z)(t);if(n){var r=(0,Xi.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,Ki.Z)(this,e)});function r(e){var t;return(0,ur.Z)(this,r),(t=o.call(this,e)).getAnnouncementText=t.getAnnouncementText.bind((0,Qi.Z)(t)),t}return(0,lr.Z)(r,[{key:"getAnnouncementText",value:function(){var e=this.props.mostRecentMessageEvent;if(!e||!e.payload)return null;var t=e.payload,n=[(0,sr.translate)(e.isFromCustomer?L:P)];return t.text&&n.push(t.text),t.attachment&&n.push.apply(n,(0,Ht.Z)(this.getTextContent(t.attachment))),t.buttons&&n.push(t.buttons.map((function(e){return"".concat((0,sr.translate)(D),", ").concat(e.title)}))),n.length>1?n.join(". "):null}},{key:"getTextContent",value:function(e){return(Ec(e,!0)||[]).filter((function(e){return"label"===e.type})).map((function(e){return e.content&&e.content.text}))}},{key:"render",value:function(){return c.createElement("div",{"aria-atomic":"true","aria-flowto":Vl,"Component);Wl.propTypes={mostRecentMessageEvent:ea().object,regionCode:ea().string};var Gl,zl=(0,h.$j)((function(e){var t=e.eventLog,n=e.partnerConfig;return{mostRecentMessageEvent:t.mostRecentMessageEvent,regionCode:n.regionCode}}))(Wl),Ql=oa.ZP.button(Gl||(Gl=(0,$i.Z)(["\n    background-color: ",";\n    color: ",";\n\n    &:active,\n    &:focus {\n        box-shadow: ",";\n    }\n"])),(function(e){return e.theme.colors.gray85}),(function(e){return e.theme.colors.white}),(function(e){var t=e.theme.colors;return"0 0 2px 3px ".concat(t.primary)})),Yl=function(e){var t,n=e.unreadMessageCount,o=e.onClick;if(!n||"number"!=typeof n||n<1)return!1;if(1===n)t=(0,sr.translate)(ke,n);else{var r=n>99?"99+":n;t=(0,sr.translate)(Ze,r)}return c.createElement(Ql,{"aria-atomic":"true",className:"unreadMessageIndicator",onClick:o,role:"status"},t)};Yl.propTypes={unreadMessageCount:ea().number,regionCode:ea().string.isRequired,onClick:ea().func};var Kl,Xl=Yl,$l=n("YjrL"),Jl=n.n($l);var ed=oa.ZP.div(Kl||(Kl=(0,$i.Z)(["\n    background-color: ",";\n    border: ",";\n"])),(function(e){return e.theme.colors.white}),(function(e){var t=e.theme.colors;return"1px solid ".concat(t.borderColor)})),td=function(e){(0,Yi.Z)(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,Xi.Z)(t);if(n){var r=(0,Xi.Z)(this).constructor;e=Reflect.cons(0,Ki.Z)(this,e)});function r(e){i.Z)(t)),t}return(0,lr.Z)rops.scrollToBottom()}},{key:"componentDidUpdate",value:function(e){e.isHandlingAction&&!this.props.isHandlingAction&ut",value:function(){var e=this.inlineForm.querySelector("input");e&&e.focus()}},{key:"render",value:function(){var e=this;return c.createElement("div",{className:"inlineForm",id:"inline-form",ref:function(t){return e.inlineForm=t}},c.createElement(ed,{className:"inlineForm__content"},c.createElement(Jl(),{component:this.props.inlineFormContent.root,language:(0,sr.getLanguage)(),styles:this.props.inlineFormContent.styles,formData:this.props.formData,formErrors:this.props.formErrors,isLoading:this.props.isHandlingAction,saveFormData:this.props.saveFormData,theme:this.props.theme,actionHandler:_u})))}}]),r}(llToBottom:ea().func};var nd,od,rd(e){var t=e.forreturn{inlineFormContent:t.inlineFormContent,formData:t.formData,formErrors:t.formErrors,isHandlingAction:t.isHandlingAction,theme:n.theme}}),(function(e){return{saveFormData:function(t){e(Dc(t))},scrollToBottom:function(){e(ha())}}}))(td),ad=n("+80P"),sd=n.n(ad),cd=n("0y5I"),ud=n("1nlz"),ld=n("wMS7"),dd=function(e){var t=(0,sr.getLanguage)();if(t&&t.length>2)return t;var n=(e||Vt).toLowerCase();return"".concat(t,"-").concat(n)},hd=function(e,t){if(!e)return null;var n=dd(t),o=new Date(e),r={hour:"numeric",minute:"numeric",hour12:["en-us","us"].indexOf(n)>-1},i=o.toLocaleTimeString(n,r);return"".concat(i)},pd="576px",fd=("only screen and (max-width: ".concat(pd,") and (orientation: portrait)")," only screen and (max-width: ".concat("768px",") and (max-height: ").concat(pd,") and (orientation: landscape)"),"only screen and (max-height: ".concat(pd,")"),"only screen and (min-width:  ".concat("992px",")"),"primary");function gd(e){var t=e.background,n=void 0===t?"transparent":t,o=e.text,r=e.border,i=void 0===r?"transparent":r,a=e.hoverBackground,s=e.disabledBackground,c=e.disabledBorder,u=e.disabledText;return"\n    background-color: ".concat(n,";\n    border-color: ").concat(i,";\n    color: ").concat(o,";\n\n    svg {\n        fill: ").concat(o,";\n    }\n\n    &:active,\n    &:hover {\n        color: ").concat(o,";\n        background-color: ").concat(a,";\n        border-color: ").concat(i,";\n        box-shadow: none;\n    }\n\n    &:disabled {\n        background-color: ").concat(s||n,";\n    ){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):md(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ed=oa.ZP.div(nd||(nd=(0,$i.Z)(["\n    &:after {\n        background-color: ",";\n    }\n"])),(function(e){var t=e.theme.colors;return e.isFromCustomer?t.customerMessageBackground:t.repMessageBackground})),Cd=oa.ZP.span(od||(od=(0,$i.Z)(["\n    color: ",";\n"])),(function(e){var t=e.theme.colors;return e.isFailed?t.error:t.gray85})),Sd=oa.ZP.div((function(e){return function(e){var t=e.theme.colors,n=e.isFromCustomer,o=e.isPictureMessage,r=e.withButtons,i=n?t.customerMessageBackground:t.repMessageBackground;o&&(i=t.background);var a=r&&"1px solid ".concat(t.gray5);return"\n    background-color: ".concat(i,";\n    color: ").concat(n?t.customerMessageText:t.repMessageText,";\n    border: ").cospan {\n        background-color: ",";\n    }\n"])),(function(e){return e.theme.colors.repMessageText})),bd=new(sd());bd.tlds(cd),ld.addHook("afterSanitizeAttributes",(function(e){"A"===e.tagName&&e.setAttribute("target","_blank")}));var _d=function(e){(0,Yi.Z)(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,Xi.Z)(t);if(n){var r=(0,Xi.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,Ki.Z)(this,e)});function r(e){var t;return(0,ur.Z)(this,r),(t=o.call(this,e)).state={showSendingIndicator:!1,showTimestamp:!1},t.getLinkMatches=t.getLinkMatches.bind((0,Qi.Z)(t)),t.handleClick=t.handleClick.bind((0,Qi.Z)(t)),t.linkifyText=t.linkifyText.bind((0,Qi.Z)(t)),t.renderContent=t.renderContent.bind((0,Qi.Z)(t)),t.renderMarkdown=t.renderMarkdown.bind((0,Qi.Z)(t)),t.renderMeta=t.renderMeta.bind((0,Qi.Z)(t)),t.renderPictureMessage=t.renderPictureMessage.bind((0,Qi.Z)(t)),t.renderTextMessage=t.renderTextMessage.bind((0,Qi.Z)(t)),t.toggleTimestamp=t.toggleTimestamp.bind((0,Qi.Z)(t)),t}return(0,lr.Z)(r,[{key:"componentDidMount",value:function(){this.props.event&&this.props.event.isPending&&this.setSendingIndicatorTimer()}},{key:"componentDidUpdate",value:function(e){(e.event.isPending&&!this.props.event.isPending||!e.event.isFailendingIndicator:!1}),clearTimeouing&&this.setSendingIndicatorTimer()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.sendingIndicatorTimer)}},{key:"parsePlainUrlText",value:function(e){return e.replace(/(^|\s)(https?:\/\/\S+)(?=\s|$)/g,"$1<$2>")}},{key:"renderMarkdown",value:function(e){if(!e)return null;var t=new ud._b,n=new ud.VI,o=t.parse(e),r=n.render(o);return(r=ld.sanitize(r))?{__html:r}:null}},{key:"handleClick",value:function(){this.props.event.isFailed&&this.props.retryCallback?this.props.retryCallback(this.props.event):this.toggleTimestamp()}},{key:"renderMeta",value:function(){var e=this.props.event.isFailed?(0,sr.translate)(V):hd(this.props.event.EventTime/1e,{className:"bubble__meta touch_noSelect",isFailed:this.props.event.isFailed},e)}},{key:dicatorTimer=setTimeout((function(){e.setState({showSendingIndicator:!0})}),this.props.sdkSettings.ShowSendingIndicatorThresholdMS)}},{key:"toggleTimestamp",value:function(){this.setState({showTimestamp:!this.state.showTimestamp})}},{key:"linkifyText",value:function(){var e=this,t=this.getLinkMatches();if(!t.length)return this.props.text;var n=[],o=0;return t.forEach((function(t,r){t.index>o&&n.push(e.props.text.substring(o,t.index));var i=/^https:\/\/.*\.secmsg\.asapp\.com\//.test(t.url)?(0,sr.translate)(U):t.text;n.push(c.createElement("a",{href:t.url,key:"parsed-m".concat(t.index,"i").concat(r),target:"_blank"},i)),o=t.lastIndex})),o<this.props.text.length&&n.push(this.props.text.substring(o)),1===n.length?n[0]:n}},{key:"getLinkMatches",value:function(){var e,t=new RegExp(/[1+]*[(-]{0,1}[0-9]{1,4}[)]{0,1}[\s\-.]?[0-9]{3}[\s\-.(this.props.text)&&(n=bd.match(this.props.text)||[]);null!==(e=t.exec(this.props.text));)n.push(vd(vd({},e),{},{text:e[0],url:"tel:".concat(e[0]),lastIndex:e.index+e[0].length}));return n.sort((function(e,t){return e.index-t.index}))}},{key:"renderNormalTextMessage",value:function(){return c.createElement("div",{className:"bubble__text normal_text",onClick:this.handleClick},this.props.event.isFromCustomer?this.props.text:this.linkifyText())}},{key:"renderRichTextMessage",value:function(){var e=this.parsePlainUrlText(thi__richtext",onClick:this.handleClick,dangerouslySetInnerHTML:t}):c.createElement(c.Fragment,null)}},{key:"renderTextMessage",value:function(){return this.props.isRichText?this.renderRichTextMessage():this.renderNormalTextMessage()}},{key:"renderPictureMessage",value:function(){return c.createElement("div",{className:"bubble__attachment",onClick:this.handleClick},this.props.children)}},{key:"renderTypingIndicator",value:functment("span",null),c.createElement("span",null))}},{key:"renderContent",value:function(){return this.props.isTypingIndicator?this.renderTypingIndicator():this.props.isTextMessage?this.renderTextMessage():this.renderPictureMessage()}},{key:"render",value:function(){var e=this.props,t=e.actionHandler,n=e.displayInfo,o=e.event.isFromCustomer,r=e.hasAttachment,i=e.hasMessageActionButtons,a=e.theme,s=e.isTextMessage,u=e.isTypingIndicator,l=e.messageActionButtons,d=o&&{bubble_isFailed:this.props.event.isFailed,bubble_isPending:this.state.showSendingIndicator},h=!s&&!u,p=fl()("bubble",vd({bubble_first:n.isFirst||u,bubble_fromCustomer:o,bubble_fromRep:!o||u,bubble_lastOfMany:!r&&n.isLastOfMany,bubble_pictureMessage:h,bubble_typingIndicator:u,bubble_withAttachment:r},d));return c.createElement(Ed,{className:p,isFromCustomer:o},c.createElement(Sd,{className:"bubble__content",isFromCustomer:o,isPictureMessage:h,withButtons:!r&&i},this.renderContent(),!r&&i&&c.createElement($l.MessageActionButtons,{messageActionButtons:l,actionHandler:t,theme:a})),this.state.showTimestamp||this.props.event.isFailed?this.renderMeta():null)}}]),r}(c.Component);_d.defaultProps={displayInfo:{},event:{},sdkSettings:{ShowSendingIndicatorThresholdMS:1e3}},_d.propTypes={actionHandler:ea().func,children:ea().node,displayInfo:ea().shape({isFirst:ea().bool,isLastOfMany:ea().bool,showInfoBandBefore:ea().bool,isLastRepMsg:ea().bool}).isRequired,event:ea().object.isRequired,hasAttachment:ea().bool,hasMessageActionButtons:ea().bool,isLiveChat:ea().bool,isTextMessage:ea().bool,isTypingIndicator:ea().bool,messageActionButtons:ea().array,regionCode:ea().string,retryCallback:ea().func,isRichText:ea().bool,text:ea().oneOfType([ea().string,ea().arrayOf(ea().node)]),sdkSettings:ea().shape({ShowSendingIndicatorThresholdMS:ea().number}),theme:ea().object};var Td=_d,Id=function(e){var t=e.actionHandler,n=e.displayInfo,o=e.event,r=e.hideMessageActionButtons,i=e.regionCode,a=e.retryCallback,s=e.sdkSettings,u=e.isLiveChat,l=e.theme,d=o.payload;if(!d)return null;var h=d.text||d.Text,p=!0===d.IsRichText,f=!!d.attachment&&!!d.attachment.content,g=func&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,o=t.payload;return o&&Array.isArray(o.buttons)&&!t.isFromCustomer?n?o.buttons:(e=o.buttons,Array.isArray(e)?e.filter((function(e){return!e.isTransient})):[]):null}(o,n.isLastRepMsg)||[],m=!r&&g.length>0;if(!h&&!f)return null;var v={actionHandler:t,displayInfo:n,isTextMessage:!0,messageActionButtons:g,isLiveChat:u,theme:l};return c.createElement("div",null,h&&c.createElement(Td,Object.assign({},v,{event:o,hasAttachment:f,hasMessageActionButtons:m,regionCode:i,retryCallback:a,sdkSettings:s,text:h,isRichText:p})),f&&c.createElement($l.ChatAttachment,Object.assign({},v,{attachment:d.attachment,language:(0,sr.getLanguage)(),isIndependent:!h})))};Id.defaultProps={displayInfo:{},event:{},regionCode:Vt,sdkSettings:{}},Id.propTypes={actionHandler:ea().func.isRequired,displayInfo:ea().shape({isFirst:ea().bool,isLastOfMany:ea().bool,showInfoBandBefore:ea().bool,isLastRepMsg:ea().bool}).isRequired,event:ea().object.isRequired,theme:ea().object,hideMessageActionButtons:ea().bool,regionCode:ea().string.isRequired,retryCallback:ea().func,sdkSettings:ea().object.isRequired,isLiveChat:ea().bool};var Nd,Od=Id,Rd=oa.ZP.time(Nd||(Nd=(0,$i.Z)(["\n    color: ",";\n"])),(function(e){return e.theme.colors.gray85}));function Ad(e){var t=e.time,n=e.regionCode,o=e.string,r=t/1e3;return c.createElement(Rd,{className:"infoBand touch_noSelect",role:"heading","aria-level":3},function(e,t,n){if(!e)return null;var o=new Date(e),r=hd(e,t);if(n)return"".concat((0,sr.translate)(n)," ").concat(r);var i=o.toLocaleDateString(dd(t),{month:"long",day:"numeric"});return(0,sr.translate)(st,i,r)}(r,n,o))}function kd(e){var t=e.event,n=e.companyId,o=t.payload,r=o.PicUrl?o.PicUrl:function(e,t,n){var o=La(e)?e.CustomerId:e.RepId;return"https://".concat(t.FileBucket,".s3.amazonaws.com/company/")+"".concat(n,"/flags/").concat(e.EventFlags,"/id/").concat(o,"/")+(t.FileSecret+"-"+t.PicWidth+"x"+t.PicHeight+"."+t.MimeType.split("/")[1])}(t,o,n),i=260/o.PicWidth,a={width:260,height:Math.floor(i*o.PicHeight)};return c.createElement("div",{style:a,className:"conversation__pictureMessage"},c.createElement("img",{src:r,style:a,alt:"Uploaded image"}))}Ad.propTypes={time:ea().number.isRequired,regionCode:ea().string,string:ea().string},kd.propTypes={event:ea().object.isRequired,companyId:ea().number.isRequired};var Zd=kd;var wd=function(e){(0,Yi.Z)(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(ar r=(0,Xi.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,Ki.Z)(this,e)});function r(e){var t;return(0,ur.Z)(this,r),(t=o.call(this,e)).renderEvent=t.renderEvent.bind((0,Qi.Z)(t)),t}return(0,lr.Z)(r,[{key:"shouldComponentUpdate",value:function(e){return this.props.event.renderKey!=e.event.renderKey||this.props.nextEvent.renderKey!=e.event.renderKey}},{key:"renderEvent",value:function(){var e=this.props,t=e.companyId,n=e.event,o=e.sdkSettings;return n.isChatMessage?c.createElement(Od,Object.assign({},this.props,{displayInfo:this.displayInfo})):n.isPictureMessage?c.createElement(Td,{event:n,isTextMessage:!1,sdkSettings:o},c.createElement(Zd,{event:n,companyId:t})):null}},{key:"renderInfoBand",value:function(){var e=this.props,t=e.event,n=e.regionCode,o=this.displayInfo,r=o.infoBandString,i=o.showInfoBandBefore;if(r||i)return c.createElement(Ad,{time:t.EventTime,regionCode:n,string:r})}},{key:"render",value:function(){var e=this.props,t=e.event,n=e.events;return this.displayInfo=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:180,o=function(e,t){if(!e||!t)return null;var n=e.indexOf(t);if(n<0)return null;for(var o=n-1;o>=0;o--){var r=e[o];if(r.isDisplayable)return r}return null}(t,e),r=function(e,t){if(!e||!t)return null;var n=e.indexOf(t);if(n<0)return null;for(var o=n+1;o<e.length;o++){var r=e[o];if(r.isDisplayable)return r}return null}(t,e),i=qa(e,o),a=!o||i>n,s=qa(e,r)>n,c=o&&o.isFromCustomer===e.isFromCustomer,u=r&&r.isFromCustomer===e.isFromCustomer,l=!c||a,d=c&&!l&&(!u||s),h=!e.isFromCustomer&&!r;return{infoBandString:Wa(e),isFirst:l,isLastOfMany:d,isLastRepMsg:h,showInfoBandAfter:s,showInfoBandBefore:a}}(t,n),c.createElement("div",{tabIndex:0,id:t.renderKey,key:t.renderKey,className:fl()("eventView",{eventView_first:this.displayInfo.isFirst})},this.renderInfoBand(),this.renderEvent())}}]),r}(c.Component);wd.defaultProps={nextEvent:{},regionCode:Vt,retryCallback:null,sdkSettings:{}},wd.propTypes={actionHandler:ea().func.isRequired,companyId:ea().number,event:ea().object.isRequired,events:ea().array.isRequired,hideMessageActionButea().string,retryCallback:ea().func,sdkSettings:ea().object,theme:ea().object};var Md,Dd=wd;var Pd=oa.ZP.div(Md||(Md=(0,$i.Z)(["ed(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,Xi.Z)(t);if(n){var r=(0,Xi.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,Ki.Z)(this,e)});function r(e){var t;return(0,ur.Z)(this,r),(t=o.call(this,e)).pageSize=50,t.threshold=1500,t.onNewPageLoaded=t.onNewPageLoaded.bind((0,Qi.Z)(t)),t.onScroll=t.onScroll.bind((0,Qi.Z)(t)),t.throttledOnScroll=hr(t.onScroll,600).bind((0,Qi.Z)(t)),t.handleUnreadMessageIndicatorClick=t.handleUnreadMessageIndicatorClick.bind((0,Qi.Z)(t)),t.renderEvents=t.renderEvents.bind((0,Qi.Z)(t)),t.renderInlineForm=t.r.bind((0,Qi.Z)(t)),t.renderTypingIndicator=t.renderTypingIndicator.bind((0,Qi.Z)(t)),t}return(0,lr.Z)(r,[{key:"componentDidMount",value:function(){this.scrollView&&this.scrollView.addEventListener("scroll",this.throttledOnScroll)}},{key:"componentWillUnmount",value:function(){this.scrollView&&this.scrollView.removeEventListener("scroll",this.throttledOnScroll)}},{key:"componentDidUpdate",value:function(e){Jd(800)&&(!e.showTypingIndicator&&this.props.showTypingIndicator||e.events.length+1===this.props.events.length)&&this.props.scrollToBottom(),e.unreadMessageCount!==this.props.unreadMessageCount&&this.props.recordGauge({label:Mn,type:_o,value:this.props.unreadMessageCount,tags:(0,s.Z)({},Vo,this.props.isLiveChat)})}},{key:"handleUnreadMessageIndicatorClick",value:function(){this.props.recordCount({label:Mn,type:Po,data:(0,s.Z)({},jo,this.props.unreadMessageCount)}),this.props.scrollToBottom()}},{key:"isInViewport",value:function(e){var t=document.getElementById(e),n=document.querySelector("#chat-messages-view");if(!t();return o.top<=r.bottom-20}},{key:"onScroll",value:function(){var e=this;this.props.unreadMessageEventIds.length>0&&this.props.unreadMessageEventIds.forEach((function(t){e.isInViewport(t)&&e.props.decrementUnreadMessageCount(t)})),this.props.unreadMessageCount&&Jd()&&this.props.resetUnreadMessageCount()}},{key:"renderEvents",value:function(){var e=this,t=this.props,n=t.events,o=t.regionCode,r=t.sdkSettings,i=t.isLiveChat,a=t.theme,s=n.filter((function(e){return e.isDisplayable}));if(s.length)return s.map((function(t,u){return c.createElement(Dd,{key:t.renderKey,actionHandler:_u,companyId:e.props.session&&e.props.session.company_id,event:t,events:n,hideMessageActionButtons:e.props.showInlineForm,nextEvent:s[u+1]||{},regionCode:o,retryCallback:t.isFailed?mh.retrySendMessage:null,sdkSettings:r,isLiveChat:i,theme:a})}))}},{key:"renderTypingIndicator",value:function(){if(this.props.showTypingIndicator)return c.createElement(Td,{isLiveChat:this.props.isLiveChat,isTypingIndicator:!0})}},{key:"renderUnreadMessageIndicator",value:function(){if(this.props.unreadMessageCount)return c.createElement(Xl,{unreadMessageCount:this.props.unreadMessageCount,regionCode:this.props.regionCode,onClick:this.handleUnreadMessageIndicatorClick})}},{key:"renderInlineForm",value:function(){if(this.props.showInlineForm)return c.createElement(id,null)}},{key:"onNewPageLoaded",value:function(){this.scrollView&&(this.scrollView.scrollTop=this.scrollView.scrollTop+this.threshold+5)}},{key:"render",value:function(){var e=this,t=Math.ceil(this.props.events.length/this.pageSize);return c.createElement(Pd,{className:"chatMessagesView",id:"chat-messages-view"},c.createElement(zl,null),c.createElement("div",{"aria-atomic":"false","aria-label":(0,sr.translate)(G),"aria-live":"off",clas(t){return e.scrollView=t},role:"log",tabIndex:"-1"},c.createElement(na(),{className:"chatMessagesView__scrollView__content",id:Bd,pageStart:t,threshold:this.threshold,loadMore:function(){e.props.fetchMoreEvents(e.onNewPageLoaded)},loader:c.createElement(Il,{className:"chatMessagesView__loader",iconName:"loading",key:"loader"}),hasMore:this.props.hasMoreEvents,isReverse:!0,useWindow:!1,initialLoad:!1},this.renderEvents(),this.renderInlineForm(),this.renderTypingIndicator())),this.renderUnreadMessageIndicator())}}]),r}(c.Component);Hd.propTypes={events:ea().array.isRequired,fetchMoreEvents:ea().func,isLiveChat:ea().bool,regionCode:ea().string.isRequired,showTypingIndicator:ea().bool,hasMoreEvents:ea().bool,scrollToBottom:ea().func,sdkSettings:ea().object,setShowTypingIndicator:ea().func,showInlineForm:ea().bool,unreadMessageCount:ea().number,unreadMessageEventIds:ea().array,resetUnreadMessageCount:ea().func,incrementUnreadMessageCount:ea().func,decrementUnreadMessageCount:ea().func,recordCount:ea().func,recordGauge:ea().func,session:ea().object,theme:ea().object};var Vd=(0,h.$j)((function(e){var t=e.chat,n=e.chatMessagesView,o=e.eventLog,r=e.form,i=e.partnerConfig,a=e.sdkSettings;return{events:o.events,hasMoreEvents:o.hasMoreEvents,session:t.session,showTypingIndicator:n.showTypingIndicator,sdkSettings:a,showInlineForm:r.showInlineForm,regionCode:i.regionCode,isLiveChat:t.isLiveChat,unreadMessageCount:n.unreadMessageCount,unreadMessageEventIds:n.unreadMessageEventIds,theme:i.theme}}),(function(e){return{fetchMoreEvents:function(t){return e((n=t,function(e,t){var o=t().eventLog,r=o.events;if(o.hasMoreEvents)return mh.getHistory({lastEventId:r&&r.length?r[0].EventId:null}).then((function(t){var o=t.response;o&&o.EventList?(o,events:Ua(o.EventList)}),e(Yu(50===o.EventList.length))):e(Yu(!1)),n()):Ar.Warn(Pu,"Fetch events failed",t)})).catch((function(e){Ar.Warn(Pu,"Fetch events failed",e)}))}));var n},setShowTypingIndicator:function(t){return e(ua(t))},resetUnreadMessageCount:function(){e(la())},incrementUnreadMessageCount:function(t){e(da(t))},decrementUnreadMessageCount:function(t){e(function(e){return{type:ca,payload:e}}(t))},scrollToBottom:function(){e(ol()),e(ha())},recordCount:function(t){e(Aa(t))},recordGauge:function(t){e(function(e){return{type:Ia,payload:e}}(t))}}}))(Hd);function Ud(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Fd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ud(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ud(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xd(e,t,n){if(e&&t){var o,r=km.getState().sdkSettings.GlobalRequestTimeoutMS;o="number"==Request;return i.open(e,t,!0),i.timeout=o,i}}function jd(e){var t=e.substring(1).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"');return 0===t.length?{}:Sr('{"'+t+'"}',(function(e,t){return""===e?t:decodeURIComponent(t)}))}function qd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",t="?v=".concat("7b9f772194aab6988a41688cb513532df02d1efb");return"stylesheets/chat-sdk-iframe-partner-".concat(e,".css").concat(t)}function Wd(e){return null===e?"null":Array.isArray(e)?"array":(0,gr.Z)(e)}var Gd=new Fi(window.parent,jd(window.location.search).Origin,"HostPageMessageBus"),zd=function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=km.getState().partnerConfig,o=n.appId,r=n.deviceInfo.clientDeviceName,i=n.regionCode,a=(0,sr.getLanguage)(),c=(e={},(0,s.Z)(e,qt,o),(0,s.Z)(e,xt,Ut),(0,s.Z)(e,jt,"4.0.0"),(0,s.Z)(e,Wt,"".concat(Ut,"-").concat(o)),(0,s.Z)(e,Ft,r),(0,s.Z)(e,Gt,a),(0,s.Z)(e,zt,i),e);return t&&(c["Content-Type"]="application/json"),c};var Qd,Yd=function(){var e=km.getState().partnerConfig.host,t=e.location,n=e.referrerUrl,o=e.sdkLoadTime;return{CurrentPageUrl:t&&t.href,ReferringPageUrl:n,TimeOnPageSecs:Math.ceil((Date.now()-o)/1e3)}},Kd=function(e){var t=Math.floor(e/60),n=e%60;return(t?(0,sr.translate)(bt,t):"")+(t?" ":"")+(n?(0,sr.translate)(_t,n):"")},Xd=function(e,t){return e?t?e+"."+t:e:null},$d=function(e,t){if(!e||!e.text)return e;var n=km.getState().sdkSettings.RedactionRules,o=void 0===n?[]:n,r=e.text;return o&&o.length&&o.forEach((function(e){var n,o;(3!==e.Type||t)&&(o=r,r=(n=e)&&n.Search&&n.Replacements?xi(n,n.Search,o,qi):(Ar("Cannot scrub a message due to missing data",n,o),o))})),Fd(Fd({},e),{},{text:r})},Jd=function(){var e=arguments.length>0&&void 0!==arguments[0]?.getElementById(Bd),n=document.getElementById(Ld);return!(!t||!n)&&t.scrollHeight-(n.offsetHeight+n.scrollTop)<e},eh=function(){try{Qd=new Audio(zi)}catch(e){Ar("Could not load notification sound.",e)}},th=function(){Qd&&Qd.play()},nh=function(){var e,t=km.getState(),n=t.partnerConfig,o=n.host.notificationPermission,r=n.deviceInfo,i=t.sdkSettings.ASAPPNotificationsPermissionUI;if((void 0===i?{}:i).web){var a=(r||{}).deviceType;km.dispatch(Aa({label:oo,type:go,tags:(e={},(0,s.Z)(e,Ho,a),(0,s.Z)(e,Uo,o),e)})),o===nr&&setTimeout((function(){km.dispatch(Ca(Qr)),km.dispatch(Aa({label:ro,type:_o,tags:(0,s.Z)({},Ho,a)}))}),2e3)}},oh=function(e){var t=e.Text||e.text||"";return t.length<=30?t:t.slice(0,30)+"..."},rh=functioe().paro=null,n||(s=e.apply(i,r),o||(i=r=null)))};return function(){i=this,r=arguments,a=Date.now();var u=n&&!o;return o||(o=setTimeout(c,t)),u&&(s=e.apply(i,r),i=r=null),s}}function sh(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function ch(e){if(null==e)return!0;if(Array.isArray(e)||"string"==typeof e)return 0===e.length;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function uh(e){return null==e||"string"==typeof e&&0===e.trim().length}var lhguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).slice().reverse()},dh=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return!1};return Array.isArray(e)&&e.findLast?e.findLast(t):"function"==typeof t?lh(e).find(t):void 0};function hh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ph(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hh(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hscriptor(n,t))}))}return e}var fh=1024,gh={ask:function(e){return xc.httpRequest({path:Zr.ASK,body:{params:ph({Intent:e&&e.Intent},Yd())}})},endChat:function(){return xc.httpRequest({path:Zr.END_CONVERSATION,metricsEventLabel:An})},enterChat:function(){var e=km.getState(),t=e.chat.initiationType,n=e.partnerConfig,o=n.intent,r=n.loadIdentifiers;return xc.httpRequest({path:Zr.ENTER_CHAT,metricsEventLabel:Pn,body:{params:ph({Intent:o,LoadIdentifiers:r,InitiationType:t},Yd())}})},getOfferedMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=km.getState(),n=t.partnerConfig,o=n.appId,r=n.customerId,i=n.loadIdentifiers,a=n.regionCode,s=t.connection.isConnected,c=s?Zr.UPDATE_SESSION:Zr.GET_OFFERED_MESSAGE_UNAUTHED,u=ph(ph({RegionCode:a||Vt,LoadIdentifiers:i},Yd()),e);rdk-iframet(o,"_CUSTOMER_ACCOUNT_ID"),RegionCode:a||Vt}})),xc.httpRequest({path:c,body:{params:u}}).then((function(t){return gh.onGetOfferedMessageComplete(t.response,e)})).catch((function(e){Ar.Error("getOfferedMessage: error calling",c,e)}))},onGetOfferedMessageComplete:function(e,t){ch(e)||(e.timeOnPageDelaySecs?setTimeout((function(){gh.getOfferedMessage(t)}),1e3*e.timeOnPageDelaySecs):Gd.post("Show Proactive Message",e))},getHistory:function(e){var t=e.recover,n=e.lastEventId;return xc.httpRequest({path:Zr.HISTORY,noContextRequired:!0,body:{params:{Recover:t||!1,BeforeEventId:n,Limit:50}},metricsEventLabel:io})},fetchContext:function(e,t){var n,o=km.getState().partnerConfig.contextProviderTimeout;n=sh(o)?o:6e3;var r=!1,i=!1;Gd.once("Set Context",(function(t){i=!0,r||e(t)})),Gd.post("Request Context",{needsRefresh:t}),window.setTimeout((function(){r=!0,i||(Ar.Warn("API.js: fetchContext timed out after",n,"ms"),km.dispatch(Aa({label:so.TIMEOUT,data:{timeoutValue:n}})),e(null))}),n)},updateContext:function(){return xc.fetchContext(!0).then((function(e){if(!e)throw new Error("Received invalid context, will not call update");return xc.httpRequest({path:Zr.UPDATE_CONTEXT,noContextRequired:!0,body:{params:{Context:yr(e),Auth:e.access_token}}})}))},getComponentView:function(e){var t=e.data,n=void 0===t?{}:t,o=e.name;return xc.httpRequest({path:Zr.GET_COMPONENT_VIEW,body:{params:{ComponentView:o,Data:yr(n)}}}).then((function(e){if(!e||!e.response)throw new Error("Invalid CUI response "+e);return e.response}))},getRealtimeWaitData:function(e){return xc.httpRequest({path:Zr.GET_REALTIME_WAIT_DATA,body:{params:e}})},getSDKSetting:function(e){return xc.httpRequest({path:Zr.GET_SDK_SETTING,noContextRequired:!0}).catch((function(t){if(t&&--e>0)return Ar("API.js: getSDKSetting request failed. Refetching...",t),gh.getSDKSetting(e)}))},publishReportingEvent:function(e){var t=e.reportingData,n=e.reportingType;return xc.httpRequest({path:Zr.PUBLISH_REPORTING_EVENT,body:{params:{reportingData:t,reportingType:n}}})},sendAPIActionRequest:function(e){var t=e.action,n=e.formData;if(!t||!t.content||!t.content.requestPath)return Ar("API.js: valid action required for sendAPIActionRequest:",t),Promise.reject({error:"missing action"});var o={actionTarget:t.content.data&&t.content.data.actionTarget,Data:yr(ph(ph({},t.content.data),n))};return xc.httpRequest({path:t.content.requestPath,body:{params:o}})},sendPictureMessage:function(e){var t=e.file,n=e.onComplete;if(t){var o=new FileReader;o.readAsDataURL(t),o.addEventListener("load",(function(e){var o=new Image;o.src=e.target.result,o.addEventListener("load",(function(){var e=document.createElement("canvas"),r=o.width>o.height;r&&o.width>fh?(o.height=Math.round(fh/o.width*o.height),o.width=fh):!r&&o.height>fh&&(o.width=Math.round(fh/o.height*o.width),o.height=fh);var i=e.getContext("2d");i.clearRect(0,0,e.width,e.height),e.width=o.width,e.height=o.height,i.drawImage(o,0,0,o.width,o.height);var a=e.toDataURL(),s=(a&&a.split("base64,"))[1];if(s){var c={binaryBase64:s,params:{MimeType:t.type,FileSize:Math.round(3*s.length/4),PicWidth:o.width,PicHeight:o.height}};xc.httpRequest({noContextRequired:!0,path:Zr.SEND_PICTURE_MESSAGE,body:c}).then((function(e){return n(e.response,null)})).catch((function(e){return n(null,e.error)}))}else Ar.Warn(Pu,"Will not send picture, unable to get image bytes")}))}))}else Ar("API.js: sendPictureMessage, could not find file")},sendSRSMessage:function(e){var t=e.classification,n=e.data,o=e.text,r=e.CustAutoCompleteAnalytics;if(!o)return Ar("API.js: text is required for sendSRSMessage"),Promise.reject({error:"missing text"});var i=km.getState().sdkSettings.ShowDeliveryFailureThresholdMS,a={Classification:t,Data:n?yr(n):void 0,text:o,UIMessageID:fr().create().toString(),CustAutoCompleteAnalytics:r};return km.dispatch(el(a)),xc.httpRequest({path:Zr.SEND_TEXT_MESSAGE_AND_HIER_AND_TREEWALK,timeout:i,body:{params:$d(a,!1)}}).then((function(e){return km.dispatch(Aa({label:Zn,type:mo})),e})).catch((function(e){var t;throw Ar.Warn("sendSRSMessage error",e),km.dispatch((t=e.error,function(e){t===Lr&&e(Js(jr)),e(lc(!1)),e(uc(!0)),e(Wu()),e(os())})),km.dispatch(Aa({label:Zn,type:Io})),e}))},sendTextMessage:function(e){var t=km.getState().sdkSettings.ShowDeliveryFailureThresholdMS,n=fr().create().toString(),o={text:e,UIMessagm.dispatca:(0,s.Z)({},xo,n)}));var r=function(e){km.dispatch(rs(ph({UIMessageID:n},e)))};return xc.httpRequest({path:Zr.SEND_TEXT_MESSAGE,timeout:t,body:{params:$d(o,!1)}}).then((function(e){return r(e),e})).catch((function(e){throw r(e),e}))},retrySendMessage:function(e){if(e&&e.payload){km.dispatch(ll(e.payload.UIMessageID,{isPending:!0,isFaion(t){km.dispatch(rs(ph({UIMessageID:e.payload.UIMessageID},t)))};return xc.httpRequest({path:Zr.SEND_TEXT_MESSAGE,body:{params:e.payload}}).then((function(e){t(e)})).catch((function(e){Ar.Warn(Pu,"Failed retrySendMessage",e),t(e)}))}},sendTypingPreview:hr((function(e){return xc.httpRequest({path:Zr.NOTIFY_TYPING_PREVIEW,body:{params:$d(e,!0)},noContextRequired:!0}).catchon sendTypingPreview",e)}))}),200),requestAutocomplete:hr((function(e){var t=e.params,n=e.onComplete;return xc.httpRequest({path:Zr.REQUEST_AUTOCOMPLETE,body:{params:$d(t,!0)},noContextRequired:!0}).then((function(e){n(e.response)})).catch((function(e){Ar(Pu,"Error on requestAutocomplete",e),n()}))}),100),resolveLink:function(e){var t=e.link,n=e.data,o=void 0===n?{}:n;return xc.httpRequest({path:Zr.RESOLVE_LINK,body:{params:{link:t,Data:yr(o)}}}).then((function(e){if(e.response&&e.response.link)return e.response.link;throw{error:"invalid link: "+t}}))},sendAnalyticsEvent:function(e){var t=e.name,n=e.attributes,o=void 0===n?{}:n;return xc.httpRequest({path:Zr.ANALYTICS_EVENT,body:{params:{events:[{name:t,attributes:o,time:(new Date).toISOString()}]}}}).catch((function(e){Ar(Pu,"Error in sendAnalyticsEvent",e)}))},checkCobrowsingUrl:function(e){var t=km.getState()||{},n=t.partnerConfig.host.location,o=t.cobrowsing.cobrowsingUserId,r=e?Zr.UPDATE_COBROWSING_URL:Zr.CHECK_COBROWSING_URL;return xc.httpRequest({path:r,body:{params:{URL:n&&n.href,UserID:o}}})},submitSMSRequest:function(e){var t=e.phoneNumber,n=e.verificationCode,o=e.path,r=e.metricsEventLabel,i=km.getState().partnerConfig,a=i.apiHostname,s=i.appId,c=i.loadIdentifiers,u={CompanyMarker:s,PhoneNumber:t,VerificationCode:n,PersistentId:c&&c.PersistentId};return xc.httpRequest({path:"https://".concat(a,"/").concat(o),body:{params:u},metricsEventLabel:r})}},mh=gh,vh="[SocketUtils]",Eh=function(e){if(!e||"string"!=typeof e.data)return Ar(vh,"parseSocketEvent()","Invalid websocket event",e),{};var t=e.data,n=t.indexOf("|"),o=t.substring(0,n);if("Event"===o)try{return Va(Sr(t.substring(n+1)))||{}}catch(e){return Ar(vh,"parseSocketEvent()","Failed to parse socket event",o,t.substring(n+1)),{}}else{if("PONG"!==o)return{};try{return{isHealthCheck:!0,payload:t.substring(n+1)}}catch(e){return Ar(vh,"parseSocketEvent()","Failed to parse healthcheck event",t),{}}}},Ch="Socket",Sh=function(){function e(t,n){(0,ur.Z)(this,e),this.apiHostname=t,this.webSocketToken=n,this.webSocket=null,this.isOpeningConnection=!1,this.lastPingSentPayload=null,this.lastPongReceivedPayload=null,this.healthCheckInterval=null,this.connect=this.connect.bind(this),this.disconnect=this.disconnect.bind(this),this.onSocketClose=this.onSocketClose.bind(this),this.onSocketError=this.onSocketError.bind(this),this.onSocketOpen=this.onSocketOpen.bind(this),this.onSocketMessage=this.onSocketMessage.bind(this),this.getWebSocketState=this.getWebSocketState.bind(this),this.startHealthCheck=this.startHealthCheck.bind(this),this.cancelHealthCheck=this.cancelHealthCheck.bind(this),this.handleHealthCheckPong=this.handleHealthCheckPong.bind(this),this.sendHealthCheckPing=this.sendHealthCheckPing.bind(this),this.failHealthCheck=this.failHealthCheck.bind(this),this.handleVisibilityUpdate=this.handleVisibilityUpdate.bind(this),this.connect()}return(0,lr.Z)(e,[{key:"connect",value:function(){Ar(Ch,"connect()","WebSocket connecting..."),this.isOpeningConnection=!0,this.webSocket=new WebSocket(["wss://",this.apiHostname,"/",Zr.V2._ROOT,"/websocket",this.webSocketToken].join("")),this.webSocket.addEventListener("close",this.onSocketClose),this.webSocket.addEventListener("error",this.onSocketError),this.webSocket.addEventListener("open",this.onSocketOpen),this.webSocket.addEventListener("message",this.onSocketMessage),km.dispatch(Aa({label:qn,type:Co,tags:(0,s.Z)({},Fo,rh())})),km.dispatch(Za({label:qn,type:vo})),document.addEventListener("visibilitychange",this.handleVisibilityUpdate)}},{key:"disconnect",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).doRemoveCloseListener,t=void 0===e||e;Ar(Ch,"disconnect()"),this.cancelHealthCheck(),document.removeEventListener("visibilitychange",this.handleVisibilityUpdate),km.dispatch(Aa({label:uo.DISCONNECT_CALLED})),this.webSocket instanceof WebSocket&&(t&&(Ar(Ch,"disconnect()","will remove close callback"),this.webSocket.removeEventListener("close",this.onSocketClose)),this.webSocket.removeEventListener("error",this.onSocketError),this.webSocket.removeEventListener("open",this.onSocketOpen),this.webSocket.removeEventListener("message",this.onSocketMessage),this.webSocket.close(),this.webSocket=null)}},{key:"onSocketClose",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ar(Ch,"onSocketClose()",e),this.disconnect(),km.dispatch(Jc(!1)),km.dispatch(Xs(!0)),this.isOpeningConnection||km.dispatch(Aa({label:qn,type:yo,tags:(0,s.Z)({},Fo,rh()),data:{intentional:e.wasClean,reason:e.reason,error:e.code&&e.code.toString()}})),this.isOpeningConnection=!1}},{key:"onSocketError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ar(Ch,"onSocketError()",e),this.disconnect(),km.dispatch(Jc(!1)),km.dispatch(Xs(!0)),this.isOpeningConnection&&km.dispatch(Aa({label:qn,type:Eo,tags:(0,s.Z)({},Fo,rh()),data:{intentional:e.wasClean,reason:e.reason,error:e.code&&e.code.toString()}}))}},{key:"onSocketOpen",value:function(){Ar(Ch,"onSocketOpen()",arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.isOpeningConnection=!1,km.dispatch(Jc(!0)),km.dispatch(Aa({label:qn,type:So,tags:(0,s.Z)({},Fo,rh())}))}},{>0&&void 0!==arguments[0]?arguments[0)}}},{key:"getWebSocketState",value:function(){return this.webSocket&&this.webSocket.readyState}},{key:"handleVisibilityUpdate",value:function(){"visible"===document.visibilityState?this.startHealthCheck():this.cancelHealthCheck()}},{key:"startHealthCheck",value:function(){var e=this;if(this.webSocket){var t=km.getState().sdkSettings.HealthCheckIntervalMS;if(!t||t<5e3)return Ar(Ch,"(startHealthCheck) Deactivated. intervalTime =",t),void km.dispatch(Aa({label:lo.DISABLED}));Ar(Ch,"(startHealthCheck)",t),this.healthCheckInterval&&(Ar(Ch,"(startHealthCheck) canceling already started interval, race condition"),this.cancelHealthCheck()),this.sendHealthCheckPing(),this.healthCheckInterval=setInterval((function(){e.webSocket?e.lastPongReceivedPayload===e.lastPingSentPayload?e.sendHealthCheckPing():e.failHealthCheck():(Ar(Ch,"(startHealthCheck) no websocket, cancelling check"),e.cancelHealthCheck())}),t),km.dispatch(Aa({label:lo.START}))}else Ar(Ch,"(startHealthCheck) no websocket, won't start")}},{key:"cancelHealthCheck",value:function(){Ar(Ch,"(cancelHealthCheck)"),clearInterval(this.healthCheckInterval),this.healthCheckInterval=null}},{key:"sendHealthCheckPing",value:function(){if(this.getWebSocketState()!==WebSocket.OPEN)return Ar(Ch,"(sendHealthCheckPing) no websocket open, cancelling"),void this.cancelHealthCheck();this.lastPingSentPayload=Date.now().toString(16);var e="".concat("PING","|").concat(this.lastPingSentPayload);this.webSocket.send(e)}},{key:"handleHealthCheckPong",value:function(e){this.lastPongReceivedPayload=e,this.lastPongReceivedPayload!==this.lastPingSentPayload&&km.dispatch(Aa({label:lo.BAD_PAYLOAD,data:{ping:this.lastPingSentPayload,pong:this.lastPongReceivedPayload}}))}},{key:"failHealthCheck",value:function(){Ar(Ch,"(failHealthCheck) failed, will disconnect! ping/pong:",this.lastPingSentPayload,this.lastPongReceivedPayload),km.dispatch(Aa({label:lo.CYCLE_FAILURE})),this.disconnect(),km.dispatch((function(e){Ar($c,"setOnHealthCheckFailed: forcing reconnect"),e(Xs(!0)),e(Jc(!1))}))}}]),e}(),yh="[Auth]",bh=3e3,_h=function(){function e(){(0,ur.Z)(this,e),this.authRequestCalls=0,this.websocketRequestCalls=0,this.socket=null,this.gotRestartAuthWhileConnecting=!1,this.getCustomerAuth=this.getCustomerAuth.bind(this),this.getWebsocketRequest=this.getWebsocketRequest.bind(this),this.handleAuthRequestRetry=this.handleAuthRequestRetry.bind(this),this.handleWebsocketRequestRetry=this.handleWebsocketRequestRetry.bind(this),this.makeRequest=this.makeRequest.bind(this),this.onCustomerAuthComplete=this.onCustomerAuthComplete.bind(this),this.onCustomerAuthFetchContext=this.onCustomerAuthFetchContext.bind(this),this.onWebsocketRequestComplete=this.onWebsocketRequestComplete.bind(this),this.resetWebsocketRequestRetry=this.resetWebsocketRequestRetry.bind(this),this.connectWebSocket=this.connectWebSocket.bind(this),this.handleAuthInterruption=this.handleAuthInterruption.bind(this)}return(0,lr.Z)(e,[{key:"getCustomerAuth",value:fu0!==arguments[0]&&arguments[0];this.customerId=null,this.gotRestartAuthWhileConnecting=!1,this.resetWebsocketRequestRetry(),this.authRequestCalls++,km.dispatch(Qs(Dr)),mh.fetchContext((function(n){e.onCustomerAuthFetchContext(n,t)}),t)}},{key:"getWebsocketRequest",value:function(){this.websocketRequestCalls++,Ar(yh,"getWebsocketRequest() websocketRequestCalls = ",this.websocketRequestCalls),this.socket&&(Ar(yh,"getWebsocketRequest() a socket already exists, will disconnect it"),this.socket.disconnect()),this.makeRequest({onComplete:this.onWebsocketRequestComplete,path:Zr.V2.WEBSOCKET.REQUEST})}},{key:"handleAuthRequestRetry",value:function(){var e=this;this.authRequestCalls>5?(km.dispatch(nc(Qo)),km.dispatch(Qs(Mr))):setTimeout((function(){e.getCustomerAuth(!1)}),e=this;this.websocketRequestCalls>5?km.dispatch(nc(Qo)):(1===this.websocketRequestCalls&&km.dispatch(Js(Br)),this.websocketRetryTimeout=setTimeout((function(){Ar(yh,"handleWebsocketRequestRetry() retrying"),e.getWebsocketRequest()}),this.websocketRequestCalls*bh))}},{key:"makeRequest",value:function(e){var t=e.onComplete,n=e.params,o=void 0===n?{}:n,r=e.path,i=km.getState(),a=i.chat.session,s=i.partnerConfig,c=s.apiHostname,u=s.appId,l=s.deviceInfo.clientDeviceName,d=s.regionCode,h=i.sdkSettings.GlobalRequestTimeoutMS,p=xd("POST","https://".concat(c,"/").concat(Zr.V2._ROOT,"/").concat(r),h);p.addEventListener("readystatechange",(function(){p.readyState===XMLHttpRequest.DONE&&t&&t(p)})),a&&a.session_token&&(p.withCredentials=!0,p.setRequestHeader("Authorization","Bearer ".concat(a.session_token))),p.setRequestHeader(Ft,l),p.setRequestHeader(xt,Ut),p.setRequestHeader(jt,"4.0.0"),p.setRequestHeader(qt,u),p.setRequestHeader(Wt,"".concat(Ut,"-").concat(u));var f,g=(0,sr.getLanguage)();g&&p.setRequestHeader(Gt,g),p.setRequestHeader(zt,d),p.setRequestHeader("Content-Type","application/json"),"navigator"in window&&!window.navigator.onLine?km.dispatch(nc(Qo)):(p.send(yr(o)),r===Zr.V2.CUSTOMER.AUTH?(f=vn,Ar(yh,"Auth Request",o)):f=Gn,km.dispatch(wa({metricsEventLabel:f})))}},{key:"restartAuth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.authRequestCalls>0||this.websocketRequestCalls>0;this.socket?(this.socket.disconnect({doRemoveCloseListener:!1}),this.socket=null):km.getState().chat.error===Go?(km.dispatch(tc()),this.getCustomerAuth()):e&&t&&(Ar.Warn(yh,"Chat connecting, but interrupted by SET_CUSTOMER. Will restart auth..."),this.gotRestartAuthWhileConnecting=!0,km.dispatch(Aa({label:ao.SET_CUSTOMER_WHILE_CONNECTING,data:{authRequestCalls:this.authRequestCalls,websocketRequestCalls:this.websocketRequestCalls}})))}},{key:"onCustomerAuthComplete",value:function(e){var t,n=this,o=this.authRequestCalls;if(this.gotRestartAuthWhileConnecting)this.handleAuthInterruption();else if(200===e.status)km.dispatch(oc(Sr(e.response))),km.dispatch(Qs(Pr)),this.getWebsocketRequest(),this.authRequestCalls=0;else if(403===e.status){Ar(yh,"onCustomerAuthComplete()","Partner auth failed",e);try{t=Sr(e.response).error}catch(t){Ar(yh,"on parse JSON",e.response)}switch(t){case"invalid_auth":km.dispatch(nc(Go)),km.dispatch(Qs(Mr));break;case"token_expired":this.authRequestCalls>5?(km.dispatch(nc(Yo)),km.dispatch(Qs(Mr))):setTimeout((function(){n.getCustomerAuth(!0)}),this.authRequestCalls*bh);break;case"session_not_found":km.dispatch(zs()),this.getCustomerAuth(!1);break;default:this.handleAuthRequestRetry()}}else this.handleAuthRequestRetry();km.dispatch(Ma({statusCode:e.status,error:t||null,attempts:o,metricsEventLabel:vn,successDuration:!0}))}},{key:"onCustomerAuthFetchContext",value:fnts[1]&&arguments[1];if(this.gotRestartAuthWhileConnecting)this.handleAuthInterruption();else{var n={context:{}};if(e){Object.assign(n,{context:e}),Object.keys(n.context).forEach((function(e){""===n.context[e]&&delete n.context[e]}));var o=km.getState().partnerConfig.appId+"_CUSTOMER_ACCOUNT_ID";this.customerId=e[o],this.customerId&&Object.assign(n,{customer_identifier:this.customerId,identifier_type:o})}else if(t)return km.dispatch(nc(Yo));this.makeRequest({onComplete:this.onCustomerAuthComplete,params:n,path:Zr.V2.CUSTOMER.AUTH})}}},{key:"onWebsocketRequestComplete",value:function(e){var t=this.websocketRequestCalls;if(km.dispatch(Ma({statusCode:e.status,metricsEventLabel:Gn,successDuration:!0,attempts:t})),this.gotRestartAuthWhileConnecting)this.handleAuthInterruption();else if(200===e.status)try{var n=Sr(e.response).url;this.connectWebSocket(03===e.status?(this.resetWebsocketRequestRetry(),this.getCustomerAuth()):this.handleWebsocketRequestRetry()}},{key:"resetWebsocketRequestRetry",value:function(){clearTimeout(this.websocketRetryTimeout),this.websocketRequestCalls=0}},{key:"connectWebSocket",value:function(e){var t=km.getState().partnerConfig.apiHostname;this.socket=new Sh(t,e),this.websocketRequestCalls=0,window.addEventListener("beforeunload",this.socket.disconnect)}},{key:"startHealthCheck",value:function(){this.socket||Ar(yh,"startHealthCheck() WebSocket missing. Won't start heath check"),this.socket.startHealthCheck()}},{key:"handleAuthInterruption",value:function(){Ar(yh,"Handling interruption, will restart authentication"),this.authRequestCalls=0,this.getCustomerAuth()}}]),e}(),Th={};Object.defineProperties(Th,{_access_token:{enumerable:!1,writable:!0},_Auth:{enumerable:!1,writable:!0},_CompanySubdivision:{enumerable:!1,writable:!0},_CustomerInfo:{enumerable:!1,writable:!0},_DebugSettings:{enumerable:!1,writable:!0},_ExternalSessionId:{enumerable:!1,writable:!0},_ExternalSessionType:{enumerable:!1,writable:!0},_PartnerAnalytics:{enumerable:!1,writable:!0},_Segments:{enumerable:!1,writable:!0},access_token:{enumerable:!0,writeable:!1,get:function(){return Th._access_token},set:function(e){Jh("string",{key:"access_token",value:e})&&(Th._access_token=e)}},Auth:{enumerable:!0,writeable:!1,get:function(){return Th._Auth},set:function(e){Jh("object",{key:"Auth",value:e})&&(Th._Auth=e)}},CompanySubdivision:{enumerable:!0,writeable:!1,get:function(){return Th._CompanySubdivision},set:function(e){Jh("string",{key:"CompanySubdivision",value:e})&&(Th._CompanySubdivision=e)}},CustomerInfo:{enumerable:!0,writeable:!1,get:function(){return Th._CustomerInfo},set:function(e){Jh("object",{key:"CustomerInfo",value:e})&&(Th._CustomerInfo=Object.assign({},Th._CustomerInfo,e))}},DebugSettings:{enumerable:!0,writeable:!1,get:function(){return Th._DebugSettings},set:function(e){Jh("object",{key:"DebugSettings",value:e})&&(Th._DebugSettings=e)}},ExternalSessionId:{enumerable:!0,writeable:!1,get:function(){return Th._ExternalSessionId},set:function(e){Jh("string",{key:"ExternalSessionId",value:e})&&(Th._ExternalSessionId=e)}},ExternalSessionType:{enumerable:!0,writeable:!1,get:function(){return Th._ExternalSessionType},set:function(e){Jh("string",{key:"ExternalSessionType",value:e})&&(Th._ExternalSessionType=e)}},PartnerAnalytics:{enumerable:!0,writeable:!1,get:function(){return Th._PartnerAnalytics},set:function(e){Jh("object",{key:"PartnerAnalytics",value:e})&&(Th._PartnerAnalytics=e)}},Segments:{enumerable:!0,writeable:!1,get:function(){return Th._Segments},set:function(e){Jh("array",{key:"Segments",value:e})&&(Th._Segments=e)}}});var Ih,Nh,Oh,Rh,Ah,kh,Zh="FRAME_TITLE",wh="NOTIFICATION_TITLE_SINGLE",Mh="NOTIFICATION_TITLE_MULTIPLE",Dh="BADGE_OPEN",Ph="BADGE_CLOSE",Lh="BADGE_UNREAD_INDICATOR",Bh="BADGE_UNREAD_INDICATOR_NUMBER",Hh="BLINK_TAB_INDICATOR",Vh="CHAT_INSTEAD_HEADER_CONTACT_US",Uh="CHAT_INSTEAD_HEADER_CHOOSE_OPTION",Fh="CHAT_INSTEAD_HEADER_CLOSE_BUTTON",xh="CHAT_INSTEAD_PHONE_TITLE",jh="CHAT_INSTEAD_LOADING",qh="PROACTIVE_MESSAGE_MESSAGE",Wh="PROACTIVE_MESSAGE_DISMISS",Gh="PROACTIVE_MESSAGE_DECLINE",zh=(Ih={},(0,s.Z)(Ih,Zh,"Chat Window"),(0,s.Z)(Ih,wh,"New Message"),(0,s.Z)(Ih,Mh,"{0} new messages"),(0,s.Z)(Ih,Dh,"Open chat"),(0,s.Z)(Ih,Ph,"Minimize chat"),(0,s.Z)(Ih,Lh,"Unread messages"),(0,s.Z)(Ih,Bh,"{0} unread messages"),(0,s.Z)(Ih,Hh,"({0}) messages"),(0,s.Z)(Ih,Vh,"Contact Us"),(0,s.Z)(Ih,Uh,"Choose an option"),(0,s.Z)(Ih,Fh," Close Dialog"),(0,s.Z)(Ih,xh,"Call: {0}"),(0,s.Z)(Ih,jh,"Loading options"),(0,s.Z)(Ih,qh,"MESSAGE"),(0,s.Z)(Ih,Wh,"Dismiss message"),(0,s.Z)(Ih,Gh,"No, thanks"),Ih),Qh=(Nh={},(0,s.Z)(Nh,Zh,"Ventana de chat"),(0,s.Z)(Nh,wh,"Nuevo mensaje"),(0,s.Z)(Nh,Mh,"{0} mensajes nuevos"),(0,s.Z)(Nh,Dh,"Abrir chat"),(0,s.Z)(Nh,Ph,"Minimizar chat"),(0,s.Z)(Nh,Lh,"Mensajes no leídos"),(0,s.Z)(Nh,Bh,"{0} mensajes no leídos"),(0,s.Z)(Nh,Hh,"({0}) mensajes"),(0,s.Z)(Nh,Vh,"Contáctenos"),(0,s.Z)(Nh,Uh,"Elija una opción"),(0,s.Z)(Nh,Fh,"Cerrar"),(0,s.Z)(Nh,xh,"Llamar: {0}"),(0,s.Z)(Nh,jh,"Cargando opciones"),(0,s.Z)(Nh,qh,"MENSAJE"),(0,s.Z)(Nh,Wh,"Ignorar mensaje"),(0,s.Z)(Nh,Gh,"No, gracias"),Nh),Yh=(Oh={},(0,s.Z)(Oh,Zh,"Fenêtre de Chat"),(0,s.Z)(Oh,wh,"Nouveau message"),(0,s.Z)(Oh,Mh,"{0} nouveaux messages"),(0,s.Z)(Oh,Dh,"Ouvrir le chat"),(0,s.Z)(Oh,Ph,"Réduire le chat"),(0,s.Z)(Oh,Lh,"Messages non lus"),(0,s.Z)(Oh,Bh,"{0} messages non lus"),(0,s.Z)(Oh,Hh,"({0}) messages"),(0,s.Z)(Oh,Vh,"Contactez-nous"),(0,s.Z)(Oh,Uh,"Choisissez une option"),(0,s.Z)(Oh,Fh,"Fermer le dialogue"),(0,s.Z)(Oh,xh,"Appel : {0}"),(0,s.Z)(Oh,jh,"Chargement des options"),(0,s.Z)(Oh,qh,"MESSAGE"),(0,s.Z)(Oh,Wh,"Ignorer le message"),(0,s.Z)(Oh,Gh,"Non, merci"),Oh),Kh=(Rh={},(0,s.Z)(Rh,"en",zh),(0,s.Z)(Rh,"es",Qh),(0,s.Z)(Rh,"fr",Yh),{INACTIVE:"badgeInactive",ACTIVE:"badgeActive"}),Xh={ABC:"abc",CHAT:"chat",GBM:"gbm",PHONE:"phone",SMS:"sms"},$h={CONVERSATION:"proactiveMessageConversation"};function Jh(e,t){var n=t.key,o=t.value;return!("array"!==e||!Array.isArray(o))||(0,gr.Z)(o)===e&&null!==o||null!=o&&Ar.Error('"'.concat(n,'"'),'Value must be "'.concat(e,'"'))}function ep(e,t){if(!e)return null;t=t?t.toLowerCase():"seconds";var n=Date.now();switch(t){case"seconds":default:return Math.ceil((n-e)/1e3);case"minutes":return Math.ceil((n-e)/6e4);case"hours":return Math.ceil((n-e)/36e5);case"days":return Math.ceil((n-e)/864e5)}}Object.freeze((Ah={},(0,s.Z)(Ah,Kh.ACTIVE,'<g><path d="M44 0H17a4 4 0 0 0-4 4v18a4 4 0 0 0 4 4h12l12 9v-9h3a4 4 0 0 0 4-4V4a4 4 0 0 0-4-4z"/><path d="M10 16H4a4 4 0 0 0-4 4v17a4 4 0 0 0 4 4v7l11-7h8a4 4 0 0 0 4-4v-8H14.8a4.8 4.8 0 0 1-4.8-4.8V16z"/></g>'),(0,s.Z)(Ah,Kh.INACTIVE,'<g><path d="M43 5v16h-7v4l-4-3-1.33-1H18V5h25zm1-5H17a4 4 0 0 0-4 4v18a4 4 0 0 0 4 4h12l12 9v-9h3a4 4 0 0 0 4-4V4a4 4 0 0 0-4-4z"></path><path d="M22 36h-8.46l-1.23.78L9 38.89V36H5V21h5v-5H4a4 4 0 0 0-4 4v17a4 4 0 0 0 4 4v7l11-7h8a4 4 0 0 0 4-4v-8h-5v7z"></path></g>'),(0,s.Z)(Ah,Xh.ABC,'<path fill-rule="evenodd" clip-rule="evenodd" d="M24 40.964C37.2548 40.964 48 32.4655 48 21.982C48 11.4985 37.2548 3 24 3C10.7452 3 0 11.4985 0 21.982C0 28.3862 4.0098 34.0496 10.152 37.4874C10.1659 37.4952 10.218 37.5239 10.3082 37.5736C10.3878 37.6174 10.4441 37.6928 10.4628 37.7803C10.9912 40.2529 7.53478 42.4704 5.22463 43.95C12.8814 44.4221 16.7447 41.4195 17.8501 40.435C19.7245 40.8068 21.9798 40.964 24 40.964Z"/>'),(0,s.Z)(Ah,Xh.CHAT,'<path fill-rule="evenodd" clip-rule="evenodd" d="M23.9999 1.52588e-05C10.752 1.52588e-05 -3.05176e-05 10.752 -3.05176e-05 24C-3.05176e-05 37.248 10.752 48 23.9999 48C37.248 48 48 37.248 48 24C48 10.752 37.248 1.52588e-05 23.9999 1.52588e-05ZM4.80014 24C4.80014 22.536 4.99214 21.096 5.30414 19.728L16.7761 31.2V33.6C16.7761 36.24 18.9361 38.4 21.5761 38.4V43.032C12.1441 41.832 4.80014 33.768 4.80014 24ZM33.576 33.6C35.736 33.6 37.512 35.016 38.136 36.96C41.256 33.552 43.2 28.992 43.2 24C43.2 15.96 38.208 9.04801 31.176 6.21601V7.20001C31.176 9.84001 29.016 12 26.376 12H21.5761V16.8C21.5761 18.12 20.4961 19.2 19.1761 19.2H14.3761V24H28.776C30.096 24 31.176 25.08 31.176 26.4V33.6H33.576Z" />'),(0,s.Z)(Ah,Xh.PHONE,'<path d="M9.65333 20.7733C13.4933 28.32 19.68 34.48 27.2267 38.3467L33.0933 32.48C33.8133 31.76 34.88 31.52 35.8133 31.84C38.8 32.8267 42.0267 33.36 45.3333 33.36C46.8 33.36 48 34.56 48 36.0267V45.3333C48 46.8 46.8 48 45.3333 48C20.2933 48 0 27.7067 0 2.66667C0 1.2 1.2 0 2.66667 0H12C13.4667 0 14.6667 1.2 14.6667 2.66667C14.6667 6 15.2 9.2 16.1867 12.1867C16.48 13.12 16.2667 14.16 15.52 14.9067L9.65333 20.7733Z" />'),(0,s.Z)(Ah,Xh.GBM,'<path fill-rule="evenodd" clip-rule="evenodd" d="M4.79998 0H43.2001C45.8399 0 47.9999 2.16 47.9999 4.80001V33.6C47.9999 36.2401 45.8399 38.4001 43.2001 38.4001H9.59999L0 48L0.0239907 4.80001C0.0239907 2.16 2.16 0 4.79998 0ZM9.59999 28.7999H38.4V24H9.59999V28.7999ZM38.4 21.6H9.59999V16.8H38.4V21.6ZM9.59999 14.4H38.4V9.59999H9.59999V14.4Z"/>'),(0,s.Z)(Ah,Xh.SMS,'<path d="M14.3581 0L36.2582 0.0218172C38.6673 0.0218172 40.6383 1.96363 40.6383 4.36364V43.6363C40.6383 46.0364 38.6673 48 36.2582 48H14.3581C11.9491 48 10 46.0364 10 43.6363V4.36364C10 1.96363 11.9491 0 14.3581 0ZM14.3581 39.2728H36.2582V8.72728H14.3581V39.2728Z" />'),(0,s.Z)(Ah,"close",'<path d="M48.17 5.87l-5.7-5.7-18.3 18.3L5.87.17l-5.7 5.7 18.3 18.3-18.3 18.3 5.7 5.7 18.3-18.3 18.3 18.3 5.7-5.7-18.3-18.3z" />'),(0,s.Z)(Ah,"loading",'<path d="M24.02 0l.708 4.013A20.36 20.36 0 0 0 24 4C12.954 4 4 12.954 4 24s8.954 20 20 20c8.565 0 15.872-5.384 18.723-12.951l3.997.705C43.496 41.204 34.542 48 24 48 10.745 48 0 37.255 0 24S10.745 0 24 0h.02z" />'),(0,s.Z)(Ah,$h.CONVERSATION,'<g><path d="M48 5.57447C47.9946 4.62811 47.6163 3.72205 46.9471 3.05286C46.278 2.38368 45.3719 2.00536 44.4255 2L24 2C23.0537 2.00536 22.1476 2.38368 21.4784 3.05286C20.8092 3.72205 20.4309 4.62811 20.4255 5.57447V11.1915H23.4894V5.06383H44.9362V20.383H38.2979C37.9662 20.3815 37.6432 20.4891 37.3787 20.6894L31.6596 24.9787V21.9149C31.6543 21.5102 31.4912 21.1237 31.205 20.8375C30.9189 20.5514 30.5323 20.3883 30.1277 20.383H26.5532V23.4468H28.5957V28.0426C28.5957 28.327 28.675 28.6059 28.8245 28.8479C28.9741 29.0899 29.1881 29.2855 29.4426 29.4127C29.697 29.54 29.9819 29.5938 30.2652 29.5683C30.5486 29.5427 30.8192 29.4388 31.0468 29.2681L38.8085 23.4468H44.4255C45.3719 23.4414 46.278 23.0631 46.9471 22.3939C47.6163 21.7248 47.9946 20.8187 48 19.8723V5.57447Z" /><path d="M15.8297 14.2553C14.3148 14.2553 12.8339 14.7046 11.5743 15.5462C10.3147 16.3878 9.33295 17.5841 8.75322 18.9837C8.17348 20.3833 8.0218 21.9234 8.31735 23.4092C8.61289 24.895 9.3424 26.2598 10.4136 27.331C11.4848 28.4022 12.8496 29.1318 14.3354 29.4273C15.8212 29.7228 17.3613 29.5712 18.7609 28.9914C20.1605 28.4117 21.3568 27.4299 22.1984 26.1703C23.0401 24.9107 23.4893 23.4298 23.4893 21.9149C23.4893 19.8835 22.6823 17.9352 21.2459 16.4988C19.8094 15.0623 17.8612 14.2553 15.8297 14.2553ZM15.8297 26.5106C14.9208 26.5106 14.0323 26.2411 13.2765 25.7361C12.5207 25.2311 11.9317 24.5134 11.5838 23.6736C11.236 22.8339 11.145 21.9098 11.3223 21.0183C11.4996 20.1268 11.9373 19.3079 12.5801 18.6652C13.2228 18.0225 14.0417 17.5848 14.9332 17.4075C15.8246 17.2301 16.7487 17.3211 17.5885 17.669C18.4282 18.0168 19.146 18.6059 19.651 19.3616C20.156 20.1174 20.4255 21.0059 20.4255 21.9149C20.4255 22.5184 20.3066 23.116 20.0757 23.6736C19.8447 24.2312 19.5062 24.7378 19.0794 25.1646C18.6527 25.5913 18.146 25.9299 17.5885 26.1608C17.0309 26.3918 16.4333 26.5106 15.8297 26.5106V26.5106Z"/><path d="M0 45.9149H31.6596V44.383C31.6596 37.4587 25.1438 32.6383 15.8298 32.6383C6.51574 32.6383 0 37.4587 0 44.383V45.9149ZM3.41106 42.177C4.73872 38.0919 9.53872 35.7021 15.8298 35.7021C22.1209 35.7021 26.9209 38.1941 28.2485 42.177L28.4732 42.8511H3.18638L3.41106 42.177Z"/></g>'),Ah)),n("2In3"),ar.MODAL_BACKGROUND.CLASSNAME,"".concat(rr,"-iframe-status"),kh={},(0,s.Z)(kh,"isLoggingIn",!0),(0,s.Z)(kh,"isOpen",!0),Object.freeze({Align:"right",AlwaysShowMinimize:!1,BadgeColor:null,BadgeText:null,BadgeType:"badge",FrameDraggable:!1,FrameStyle:$o,FrameTitle:void 0,HideBadgeOnLoad:!1,Identity:void 0,PrimaryColor:null,DarkColor:null});var tp,np,op=function e(){e.c(arguments)};function rp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ip(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rp(Object(n),!0).forEach((function(t){(0,etOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}op.q=[],op.c=function(e){op.q.push(e)};var ap="[Metrics]",sp={CONTENT_TYPE:"content_type",CONTENT_TRANSFER_ENCODING:"content_transfer_encoding",CONTENT_VERSION:"content_version",DATA:"data",EXTERNAL_ID:"external_id",EVENT_TYPE:"event_type",EVENT_DATE:"event_date",TAGS:"tags",VALUE:"value",VALUE_TYPE:"value_type",VALUE_UNITS:"value_units"},cp={CLIENT_ID:"client_id",CLIENT_TYPE:"client_type",CLIENT_VERSION:"client_version",CLIENT_DEVICE:"client_device",COMPANY_MARKER:"company_marker",LANGUAGE:"language",REGION_CODE:"region_code",USER_AGENT:"user_agent",USER_SESSION_ID:"user_session_id"},up="batch_size",lp="min_batch_period_seconds",dp="max_batch_period_seconds",hp="persisted_events",pp="minimum_priority",fp=(tp={},(0,s.Z)(tp,up,100),(0,s.Z)(tp,lp,5),(0,s.Z)(tp,dp,30),(0,s.Z)(tp,hp,500),(0,s.Z)(tp,pp,0),tp),gp=(np={},(0,s.Z)(np,di,[]),(0,s.Z)(np,fi,[]),(0,s.Z)(np,pi,null),(0,s.Z)(np,hi,fp),np),mp=function(){function e(){var t=this;(0,ur.Z)(this,e),this.pendingEvents={},this.fetchingToken=!1,this.lastSent=null,this.eventRequestRetries=0,this.onEventsRequestSuccess=this.onEventsRequestSuccess.bind(this),this.onEventsRequestFailure=this.onEventsRequestFailure.bind(this),this.onTokenReceived=thivents=this.removeEvents.bind(this),this.sendEvents=this.sendEvents.bind(this),this.setData(Object.assign({},gp,this.getData())),this.resetBatchTimer(fp[dp]),window.addEventListener("beforeunload",(function(){clearTimeout(t.batchTimeout)}))}return(0,lr.Z)(e,[{key:"addToEvents",value:function(e,t){var n=this.getData(),o=n.events,r=void 0===o?[]:o,i=n.transactionEvents,a=void 0===i?[]:i,s=n.settings,c=void 0===s?{}:s,u=t?a:r;if(u.length>c[hp])Ar(ap,"addToEvents()","Max number of persisted events has reached");else{var l=u.concat(e),d=t?fi:di;this.setData(d,l),(ep(this.lastSent)||0)>=c[lp]&&l.length>=c[up]&&this.sendEvents()}}},{key:"getBaseUrl",value:function(){var e=km.getState().partnerConfig.apiHostname;if(/test.asapp.com$/.test(e))return"https://hudson-dev01-frontend.test.asapp.com";if(e){var t=e.indexOf(".");if(t<0)return e;var n=e.substr(0,t),o=e.substr(t);return"https://".concat(n,"-frontend").concat(o)}}},{key:"endDuration",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,r=this.pendingEvents[e];if(!r)return Ar(ap,"endDuration()","Pending event does not exist for ".concat(e)),this;var i=(Date.now()-r.startTime)/1e3;return this.recordEvent(e,t,{value:i,valueType:mi,valueUnit:Ci,tags:n.tags||r.tags,data:n.data||r.data},o),this.removePendingEvent(e),this}},n(){var e=this;this.fetchingToken||(this.fetchingToken=!0,this.sendMetricsRequest({path:"token?grant_type=client_credentials&client_id=no_id&client_secret=no_secret",onSuccess:this.onTokenReceived,onFailure:function(){e.fetchingToken=!1}}))}},{key:"getData",value:function(e){var t=Im.get(ui,e);return ch(t)?e?gp[e]:gp:t}},{key:"getEventProperties",value:function(e){var t,n,o=e.name,r=e.value,i=e.valueType,a=e.valueUnit,c=e.tags,u=e.data,l=(t={},(0,s.Z)(t,sp.EXTERNAL_ID,fr().create().toString()),(0,s.Z)(t,sp.EVENT_DATE,{value:(new Date).toISOString()}),(0,s.Z)(t,sp.EVENT_TYPE,o),(0,s.Z)(t,sp.VALUE,r),(0,s.Z)(t,sp.TAGS,this.parseTags(c)),(0,s.Z)(t,sp.VALUE_TYPE,i),(0,s.Z)(t,sp.VALUE_UNITS,a),t);return u&&Object.assign(l,(n={},(0,s.Z)(n,sp.CONTENT_TYPE,"application/json"),(0,s.Z)(n,sp.CONTENT_TRANSFER_ENCODING,"text/plain"),(0,s.Z)(n,sp.CONTENT_VERSION,"1"),(0,s.Z)(n,sp.DATA,yr(u)),n)),l}},{key:"getMetadata",value:function(){var e,t=km.getState(),n=t.chat.session,o=t.partnerConfig.loadIdentifiers,r=(0,sr.getLanguage)();return e={},(0,s.Z)(e,cp.CLIENT_ID,o&&o.PersistentId),(0,s.Z)(e,cp.USER_SESSION_ID,n&&n.session_id),(0,s.Z)(e,cp.LANGUAGE,r),e}},{key:"onEventsRequestFailure",value:function(){401===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).status?(Ar(ap,"Expired token. Refetching..."),this.fetchToken()):this.eventRequestRetries++}},{key:"onEventsRequestSuccess",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;this.eventRequestRetries=0,this.updateSettings(e.settings),this.removeEvents(e.events_processed,t)}},{key:"updateSettings",value:function(e){ch(e)||this.setData(hi,Object.assign({},this.getDaction(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setData(pi,t.access_token),this.sendMetricsRequest({token:t.access_token,path:"analytics/settings",onSuccess:function(t){e.updateSettings(t&&t.settings)}}),this.sendEvents(),this.fetchingToken=!1}},{key:"recordCount",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;return this.recordEvent(e,t,ip(ip({},n),{},{value:1,valueType:gi,valueUnit:Ei}),o),this}},{key:"recordGauge",value:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4?arguments[4]:void 0;return this.recordEvent(e,t,ip(ip({},o),{},{value:n,valueType:vi,valueUnit:Ei}),r),this}},{key:"recordEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0,r=this.getData(hi);if(r&&r[pp]>t)return Ar(ap,"recordEvent()","Invalid event to record"),null;var i={event:this.getEventProperties(ip({name:e},n)),metadata:this.getMetadata()};this.addToEvents(i,o)}},{key:"removeEvents",value:function(e,t){var n=t?fi:di,o=this.getData(n),r=o&&o.slice(0,o.length-e);this.setData(n,r)}},{key:"removePendingEvent",value:function(e){return this.pendingEvents&&delete this.pendingEvents[e],this}},{key:"sendEvents",value:function(){var e=this,t=this.getData(),n=t.events,o=void 0===n?[]:n,r=t.transactionEvents,i=void 0===r?[]:r,a=t.settings,s=void 0===a?{}:a;if(!(this.eventRequestRetries>=5)&&(this.resetBatchTimer(s[dp]),o.length||i.length)){var c=this.getData(pi);if(!c)return Ar(ap,"Token is required"),void this.fetchToken();if(o.length){var u=o.slice(0,s[up]);this.sendMetricsRequest({token:c,path:"analyticsEventsRequestSuccess,onFailure:this.onEventsRequestFailure})}if(i.length){var l=i.slice(0,s[up]);this.sendMetricsRequest({token:c,path:"analytics/transaction-events",params:{events:l},onSuccess:function(t){e.onEventsRequestSuccess(t,!0)},onFailure:this.onEventsRequestFailure})}this.lastSent=Date.now()}}},{key:"sendMetricsRequest",value:function(e){var t=e.token,n=e.path,o=e.onSuccess,r=e.onFailure,i=e.params;if(!this.baseUrl){var a=this.getBaseUrl();if(!a)return;this.baseUrl=a}var s=xd("POST","".concat(this.baseUrl,"/").concat(n));s.addEventListener("readystatechange",(function(){if(4===s.readyState)if(200===s.status)try{var e=s.response&&Sr(s.response);"function"==typeof o&&o(e)}catch(e){"function"==typeof r&&r(s)}else"function"==typeof r&&r(s)})),function(e){var t=zd();Object.keys(t).forEach((function(n){var o=t[n];o&&e.setRequestHeader(n,o)}))}(s),t&&(s.withCre("Authorization","Bearer ".concat(t))),s.send(i?yr(i):"")}},{key:"resetBatchTimer",value:function(e){clearTimeout(this.batchTimeout),this.batchTimeout=setTimeout(this.sendEvents,1e3*e)}},{key:"setData",value:function(e,t){Im.set(ui,e,t)}},{key:"startDuration",value:function(e){varts[1]:{};return Object.assign(this.pendingEvents,(0,s.Z)({},e,ip(ip({},t),{},{startTime:Date.now()}))),this}},{key:"parseTags",value:function(e){if(!ch(e))return Object.keys(e).forEach((function(t){"string"!=typeof e[t]&&(e[t]=yr(e[t]))})),e}}]),e}(),vp=mp;function Ep(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Cp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ep(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ep(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Sp,yp,bp="[BrowserStorage]",_p="lastUpdated",Tp=(0,s.Z)({},ci,24),Ip=function(){function e(t,n){var o=n.APIHostname,r=n.CompanyMarker,i=n.RegionCode,a=n.Language;(0,ur.Z)(this,e),this.environmentKey=[o,r,i,a].join("|");try{var s=new Date;(this.storage=window[t]).setItem(s,s);var c=this.storage.getItem(s)!==s.toString();this.storage.removeItem(s),c&&(this.storage=!1)}catch(e){Ar(bp,"No ".concat(t," access"),e),this.storage=!1}}return(0,lr.Z)(e,[{key:"addStorageEventListener",value:function(e,t){var n=this;window.addEventListener("smName(e))try{var r=Sr(o.oldValue)||{},i=Sr(o.newValue)||{};t(Cp(Cp({},o),{},{oldValue:r,newValue:i}))}catch(e){Ar(bp,"Unable to parse JSON",e)}}))}},{key:"getItemName",value:function(e){return"".concat(this.environmentKey,"|").concat(e)}},{key:"get",value:function(e,t){if(this.storage){var n=Sr(this.storage.getItem(this.getItemName(e)));return n?Tp[e]&&ep(n[_p],"hours")>Tp[e]?(this.clear(e),null):"string"==typeof t?n[t]:(delete n[_p],n):null}return!1}},{key:"clear",value:function(e){if(!this.storage)return!1;this.storage.removeItem(this.getItemName(e))}},{key:"remove",value:function(e,t){if(!this.storage||!t)return!1;var n=this.get(e);delete n[t],this.storage.setItem(this.getItemName(e),yr(n))}},{key:"set",value:function(e,t,n){if(!this.storage||!t)return!1;var o=Object.assign({},this.get(e),"object"===(0,gr.Z)(t)?t:(0,s.Z)({},t,n),Tp[e]&&(0,s.Z)({},_p,Date.now()));this.storage.setItem(this.getItemName(e),yr(o))}}]),e}(),Np=(Sp={},(0,s.Z)(Sp,Sn,!0),(0,s.Z)(Sp,yn,!0),(0,s.Z)(Sp,bn,!0),(0,s.Z)(Sp,_n,!0),(0,s.Z)(Sp,Tn,!0),(0,s.Z)(Sp,In,!0),(0,s.Z)(Sp,Nn,!0),(0,s.Z)(Sp,Un,!0),(0,s.Z)(Sp,Fn,!0),(0,s.Z)(Sp,xn,!0),(0,s.Z)(Sp,jn,!0),(0,s.Z)(Sp,no,!0),(0,s.Z)(Sp,oo,!0),(0,s.Z)(Sp,ro,!0),(0,s.Z)(Sp,no,!0),(0,s.Z)(Sp,oo,!0),(0,s.Z)(Sp,ro,!0),Sp),Op=n("+9dH"),Rp="SET_NAV_MENU_OPEN",Ap="SET_SOUND_ENABLED",kp=function(e){return{type:Rp,navMenuOpen:e}},Zp=oa.ZP.button(yp||(yp=(0,$i.Z)(["\n    .icon {\n        fill: ",";\n    }\n\n    &:active,\n    &:hover {\n        background-colonction(e){return e.theme.colors.gray85}),(function(e){return e.theme.colors.gray5})),wp=function(e){var t=e.classNames,n=e.iconName;return c.createElement(Zp,{className:["closeChat",t||""].join(" ").trim(),onClick:function(){Gd.post(Xt)},title:(0,sr.translate)(ie)},c.createElement(Il,{iconName:n||"close"}))};wp.propTypes={classNames:ea().string,iconName:ea().string};var Mp=wp;var Dp=function(e){(0,Yi.Z)(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,Xi.Z)(t);if(n){var r=(0,Xi.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,Ki.Z)(this,e)});function r(e){var t;return(0,ur.Z)(this,r),(t=o.call(this,e)).state={dragging:!1},t.baseMouseX=0,t.baseMouseY=0,t.handleDragStart=t.handleDragStart.bind((0,Qi.Z)(t)),t.handleDragEnd=t.handleDragEnd.bind((0,Qi.Z)(t)),t.handleMouseMove=hr(t.handleMouseMove,50).bind((0,Qi.Z)(t)),t}return(0,lr.Z)(r,[{key:"handleDragStart",value:function(e){if(0===e.button){if(this.props.isDocked&&(this.props.setIsDocked(!1),this.props.displaySettings.FrameStyle===Jo))return;this.setState({dragging:!0}),this.baseMouseX=e.clientX,this.baseMouseY=e.clientY,Gd.post(Kt,{type:"Dragging start"}),document.addEventListener("mouseup",this.handleDragEnd),document.addEventListener("mousemove",this.handleMouseMove)}}},{key:"handleDragEnd",value:function(){this.setState({dragging:!1}),Gd.post(Kt,{type:"Dragging end"}),document.removeEventListener("mouseup",this.handleDragEnd),document.removeEventListener("mousemove",this.handleMouseMove)}},{key:"handleMouseMove",value:function(e){e.preventDefault(),Gd.post(Kt,{type:"Dragging move",offsetX:e.clientX-this.baseMouseX,offsetY:e.clientY-this.baseMouseY})}},{key:"render",value:function(){var e=this.props.isDocked&&this.props.displaySettings.FrameStyle===Jo?te:ee;return c.createElement("div",{"aria-level":"1",className:fl()(this.props.className,"draggable"),onMouseDown:this.handleDragStart,role:"heading",tabIndex:"0"},c.createElement("span",{className:"draggable__content"},this.props.children),c.createElement("span",{"aria-hidden":"true",className:"draggable__tooltip"},(0,sr.translate)(e)))}}]),r}(c.Component);Dp.propTypes={regionCode:ea().string,className:ea().string,children:ea().object,isDocked:ea().bool,displaySettings:ea().object,setIsDocked:ea().func};var Pp,Lp,Bp,Hp,Vp=Dp;var Up=oa.ZP.nav(Pp||(Pp=(0,$i.Z)(["\n    background-color: ",";\n    color: ",";\n    .chatNavBar_title {\n        color: ",";\n    }\n    .chatNavBar__navButton {\n        .icon {\n            fill: ",";\n        }\n\n        &:hover {\n            background-color: ",";\n        }\n    }\n\n    + .chatMessagesView {\n        border-top: ",";\n    }\n"])),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.onBackground}),(function(e){return e.theme.colors.onBackground}),(function(e){return e.theme.colors.gray5}),(function(e){var t=e.theme.colors;return"1px solid ".concat(t.borderColor)})),Fp=oa.ZP.div(Lp||(Lp=(0,$i.Z)(["\n    background-color: ",";\n    border: ",";\n"])),(function(e){return e.theme.colors.white}),(function(e){var t=e.theme.colors;return"1px solid ".concat(t.borderColor)})),xp=oa.ZP.button(Bp||(Bp=(0,$i.Z)(["\n    border-top: ",";\n    color: ",";\n\n    &:hover {\n        background-color: ",";\n    }\n\n    svg {\n        fill: ",";\n    }\n"])),(function(e){var t=e.theme.colors;return"1px solid ".concat(t.borderColor)}),(function(e){return e.theme.colors.onBackground}),(function(e){return e.theme.colors.gray5}),(function(e){return e.theme.colors.primary})),jp=oa.ZP.span(Hp||(Hp=(0,$i.Z)(["\n    color: ",";\n"])),(function(e){return e.theme.colors.gray85})),qp=function(e){(0,Yi.Z)(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOfderLeftContent=t.renderLeftContent.bind((0,Qi.Z)(tntent.bind((0,Qi.Z)(t)),t.renderCenterContent=t.renderCenterContent.bind((0,Qi.Z)(t)),t.renderExpandedMenu=t.renderExpandedMenu.bind((0,Qi.Z)(t)),t}return(0,lr.Z)(r,[{key:"onDockButtonClicked",value:function(){this.props.setIsDocked(!0)}},{key:"renderLeftContent",value:function(){return c.createElement("div",{className:"chatNavBar_left"},c.createElement(Mp,{classNames:fl()("chatNavBar__navButton",{alwaysShowMinimize:this.props.displaySettings.AlwaysShowMinimize||this.props.displaySettings.FrameStyle===Jo||this.props.displaySettings.FrameDraggable}),iconName:"minimize",tabIndex:0}))}},{key:"renderCenterContent",value:function(){var e=this.props.isDraggable?Vp:"div",t=this.props.isDraggable?{isDocked:this.props.isDocked,setIsDocked:this.props.setIsDocked,regionCode:this.props.regionCode,displaySettings:this.props.displaySettings}:{};return c.createElement(e,(0,Op.Z)({className:"chatNavBar_center"},t,{tabIndex:0}),this.props.displaySettings.FrameTitle?c.createElement("span",{className:"chatNavBar_title",role:"heading","aria-level":"1"},this.props.displaySettings.FrameTitle):c.createElement("span",{role:"img","aria-label":"brand-logo",className:"chatNavBar__logo"}))}},{key:"renderRightContent",value:function(){var e=this,t=(0,sr.translate)(ne),n=c.createElement("button",{className:fl()("chatNavBar__navButton","chatNavBar__navButton_redock"),title:t,"aria-label":t,value:t,onClick:this.onDockButtonClicked,tabIndex:0},c.createElement(Il,{iconName:"left"===this.props.displaySettings.Align?"dockLeft":"dockRight"})),o=c.createElement("div",{"aria-controls":"chat-nav-bar-nav-menu","aria-expanded":this.props.navMenuOpen,className:fl()("chatNavBar__menur:function(t){t.currentTarget.contains(t.relatedTarget)||e.props.setNavMenuOpen(!1)}},c.createElement("button",{className:"chatNavBar__navButton chatNavBar__navButton_menu",onClick:function(){e.props.setNavMenuOpen(!e.props.navMenuOpen)},title:(0,sr.translate)(Y)},c.createElement(Il,{iconName:"more"})),this.props.navMenuOpen&&this.renderExpandedMenu());return c.createElement("div",{className:"chatNavBar_right"},this.props.isLiveChat&&o,this.props.displaySettings.FrameDraggable&&!this.props.isDocked&&n)}},{key:"renderExpandedMenu",value:function(){var e=this,t=this.props.soundEnabled?X:K,n=this.props.soundEnabled?$l.ICON_NAMES.SOUND_OFF_FILL:$l.ICON_NAMES.SOUND_ON_FILL,o={className:"chatNavBar__menuItem",role:"menuitem"};return c.createElement(Fp,{"aria-expanded":this.props.navMenuOpen,className:"chatNavBar__menuList",id:"chat-nav-bar-nav-menu",role:"menu","aria-label":(0,sr.translate)(Q)},c.createElement(xp,(0,Op.Z)({id:"end-chat",onClic.NAV_EXIT_FILL)),c.createElement(jp,{className:"chatNavBar__menuItem_text"},(0,sr.translate)(ce))),this.props.sound&&c.createElement(xp,(0,Op.Z)({id:"toggle-sound",onClick:function(){return e.props.setSoundEnabled(!e.props.soundEnabled)}},o),c.createElement(Jl(),ih(n)),c.createElement(jp,{className:"chatNavBar__menuItem_text"},(0,sr.translate)(t))))}},{key:"render",value:function(){return c.createElement(Up,{id:"chat-nav-bar",className:fl()("chatNavBar",{chatNavBar_draggable:this.props.isDraggable,chatNavBar_sideDocked:this.props.isDocked&&this.props.displaySettings.FrameStyle===Jo}),role:"navigation","aria-label":(0,sr.translate)($),tabIndex:"-1"},this.renderLeftContent(),""===this.props.displaySettings.FrameTitle?"":this.renderCenterContent(),this.renderRightContent())}}]),r}(c.Component);qp.propTypes={displaySettings:ea().object,endLiveChat:ea().func.isRequired,isLiveChat:ea().bool.isRequired,navMenuOpen:ea().bool,regionCode:ea().string.isRequired,setNavMenuOpen:ea().func.isRequired,setSoundEnabled:ea().func,sound:ea().bool,soundEnabled:ea().bool,isDocked:ea().bool,isDraggable:ea().bool,setIsDocked:ea().func},qp.defaultProps={displaySettings:{}};var Wp,Gp,zp=(0,h.$j)((function(e){var t=e.chat,n=e.chatNavBar,o=e.partnerConfig;return{displaySettings:o.displaySettings,navMenuOpen:n.navMenuOpen,sound:o.sound,soundEnabled:n.soundEnabled,isDocked:t.isDocked,isDraggable}),(function(e){return{endLiveChat:function(){e((function(e){e(kp(!1)),e(Wu()),e(Aa({label:An,type:Po})),mh.endChat()}))},setNavMenuOpen:function(t){e(kp(t))},setSoundEnabled:function(t){e(function(e){return{type:Ap,soundEnabled:e}}(t))},setIsDocked:function(t){e(ec(t))}}}))(qp);var Qp,Yp,Kp=oa.ZP.div(Wp||(Wp=(0,$i.Z)(["\n    background-color: ",";\n    color: ","};\n\n    svg {\n        fill: ",";\n    }\n"])),(function(e){var t=e.theme.colors;return e.bannerType===qr?t.warning:t.error}),(function(e){var t=e.theme.colors;return e.bannerType===qr?t.onBackground:t.white}),(function(e){return e.theme.colors.onBackground})),Xp=[xr,Fr,Vr,jr],$p=[Vr,Hr,Br],Jp=(Gp={},(0,s.Z)(Gp,Ur,ue),(0,s.Z)(Gp,Vr,le),(0,s.Z)(Gp,Hr,de),(0,s.Z)(Gp,Fr,he),(0,s.Z)(Gp,xr,pe),(0,s.Z)(Gp,jr,fe),(0,s.Z)(Gp,Br,ge),(0,s.Z)(Gp,qr,me),Gp),ef=(0,s.Z)({},qr,$l.ICON_NAMES.NOTIFICATION_ALERT),tf=function(e){(0,Yi.Z)(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOfo,arguments,r)}else e=o.apply(this,arguments);return(0,Ki.Z)(this,e)});function r(e){var t;return(0,ur.Z)(this,r),(t=o.call(this,e)).onClick=t.onClick.bind((0,Qi.Z)(t)),t.handleEphemeralBanner=t.handleEphemeralBanner.bind((0,Qi.Z)(t)),t}return(0,lr.Z)(r,[{key:"componentDidMount",value:function(){Xp.indexOf(this.props.chatBanner)>=0&&this.handleEphemeralBanner()}},{key:"onClick",value:function(){switch(this.props.chatBanner){case Vr:case Hr:this.props.setChatBanner(null);break;case Br:this.props.isConnected||(this.props.setShowLoadingView(!0),this.props.getCustomerAuth())}}},{key:"handleEphemeralBanner",value:function(){var e=this;setTimeout((function(){e.$chatBanner&&e.$chatBanner.classList.add("chatBanner_hidden"),setTimeout((function(){e.props.setChatBanner(null)}),Xo)}),3e3)}},{key:"render",value:function(){var e=this,t=Jp[this.props.chatBanner],n=ef[this.props.chatBanner],o=$p.indexOf(this.props.chatBanner)>=0;return c.createElement(Kp,{className:fl()("chatBanner",{chatBanner_clickable:o}),bannerType:this.props.chatBanner,onClick:o?this.onClick:null,role:"status",ref:function(t){return e.$chatBanner=t}},n&&c.createElement(Jl(),ih(n)),c.createElement("span",{className:"chatBanner__text"},(0,sr.translate)(t)))}}]),r}(c.Component),nf=(0,h.$j)((function(e){var t=e.chat,n=e.connection;return{regionCode:e.partnerConfig.regionCode,chatBanner:t.chatBanner,isConnected:n.isConnected}}),(function(e){return{setChatBanner:function(t){e(Js(t))},getCustomerAuth:function(){e(Ws())},setShowLoadingView:function(t){e(Xs(t))}}}))(tf);tf.propTypes={chatBanner:ea().string.isRequired,regionCode:ea().string.isRequired,isConnected:ea().bool,setChatBanner:ea().func,setShowLoadingView:ea().func,getCustomerAuth:ea().func};var of,rf,af,sf,cf,uf=(Qp={},(0,s.Z)(Qp,$r,"pending"),(0,s.Z)(Qp,Jr,"active"),(0,s.Z)(Qp,ni,"declined"),(0,s.Z)(Qp,oi,"ended"),(0,s.Z)(Qp,ri,"ended"),(0,s.Z)(Qp,ii,"disabled"),(0,s.Z)(Qp,ti,"error"),Qp),lf=(Yp={},(0,s.Z)(Yp,$r,De),(0,s.Z)(Yp,Jr,Pe),(0,s.Z)(Yp,ni,Le),(0,s.Z)(Yp,oi,Be),(0,s.Z)(Yp,ri,He),(0,s.Z)(Yp,ii,Ve),(0,s.Z)(Yp,ti,Ue),Yp),df="CobrowsingBanner",hf=function(e){(0,Yi.Z)(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,Xi.Z)(t);if(n){var r=(0,Xi.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,Ki.Z)(this,e)});function r(e){var t;return(0,ur.Z)(this,r),(t=o.call(this,e)).state={sessionDuration:0,isLoading:!1},t.renderButtons=t.renderButtons.bind((0,Qi.Z)(t)),t.acceptCobrowsingInvitation=t.acceptCobrowsingInvitation.bind((0,Qi.Z)(t)),t.handleEphemeralBanner=t.handleEphemeralBanner.bind((0,Qi.Z)(t)),t.handleClick=t.handleClick.bind((0,Qi.Z)(t)),t.handleError=t.handleError.bind((0,Qi.Z)(t)),t.setSessionDurationTimer=t.setSessionDurationTimer.bind((0,Qi.Z)(t)),t}return(0,lr.Z)(r,[{key:"componentDidMount",value:function(){if(this.props.cobrowsingState===Jr){var e=function(e,t){if(!e)return null;t=t?t.toLowerCase():"seconds";var n=Date.now();switch(t){case"seconds":default:return Math.ceil((n-e)/1e3);case"minutes":return Math.ceil((n-e)/6e4);case"hours":return Math.ceil((n-e)/36e5);case"days":return Math.ceil((n-e)/864e5)}}(this.props.cobrowsingTimestamp,"seconds");this.setState({sessionDuration:e}),this.setSessionDurationTimer()}else Gd.on(Qt,this.acceptCobrowsingInvitation),Gd.post("Initiate Cobrowsing");this.handleEphemeralBanner()}},{key:"componentWillUnmount",value:function(){Gd.off(Qt,this.acceptCobrowsingInvitation),clearInterval(this.interval)}},{key:"componentDidUpdate",value:function(e){e.cobrowsingState!==this.props.cobrowsingState&&(clearTimeout(this.ephemeralAnimation),Ar("CobrowsingBanner.js: state change",e.cobrowsingState," -> ",this.props.cobrowsingState),this.props.cobrowsingState===Jr&&(this.setSessionDurationTimer(),Gd.post(un,{timestamp:Date.now()})),e.cobrowsingState===Jr&&(clearInterval(this.interval),this.setState({sessionDuration:0}),Gd.post(un,{timestamp:null})),this.handleEphemeralBanner()),e.isLiveChat&&!this.ingUserIdngInvitation",value:function(e){var t=this;return xc.httpRequest({path:Zr.COBROWSING_ACCEPT,body:{params:{UserId:e}}}).then((function(){t.props.setCobrowsingState(Jr),t.props.setCobrowsingUserId(e)})).catch((function(e){t.handleError(e)})).finally((function(){t.setState({isLoading:!1})}))}},{key:"handleEphemeralBanner",value:function(){var e=this;this.props.cobrowsingState!==Jr&&this.props.cobrowsingState!==$r&&(this.ephemeralAnimation=setTimeout((function(){e.banner&&e.banner.classList.add("cobrowsingBanner_hidden"),setTimeout((function(){e.props.:"handleClick",value:function(e){var t=this,n=e.currentTarget.innerHTML;return n===qo?xc.httpRequest({path:Zr.COBROWSING_DECLINE}).catch((function(e){Ar.Warn(df,.props.setCobrowsingState(ni)})):n===Wo?xc.httpRequest({path:Zr.COBROWSING_END,body:{params:{props.setCobrowsingUserId(null)})):(this.setState({isLoading:!0}),Gd.post(rn,n),Promiseto start cobrowsing session.",e),this.props.setCobrowsingState(ti)}},{key:"setSessionDurationTimer",value:function(){var e=this;this.interval=setInterval((function(){e.setState((function(e){return{sessionDuration:e.sessionDuration+1}}))}),1e3)}},{key:"renderButtons",value:function(){return this.props.cobrowsingState===$r?c.createElement("div",{className:"cobrowsingBanner__buttonContainer"},c.createElement("button",{onClick:this.handleClick,className:"cobrowsingBanner__button cobrowsingBanner__button_accept"},this.state.isLoading?c.createElement(Jl(),ih($l.ICON_NAMES.LOADING)):"Accept"),c.createElement("button",{onClick:this.handleClick,className:"cobrowsingBanner__button cobrowsingBanner__button_decline"},qo)):this.props.cobrowsingState===Jr?c.createElement("div",{className:"cobrowsingBanner__buttonContainer"},c.createElement("button",{onClick:this.handleClick,className:"cobrowsingBanner__button cobrowsLoading?c.createElement(Jl(),ih($l.ICON_NAMES.LOADING)):Wo)):void 0}},{key:"renderSessionDuration",value:function(){var e=Math.floor(this.state.sessionDuration/60),t=this.state.sessionDuration-60*e,n=function(e){return("0"+e).slice(-2)};return" "+n(e)+":"+n(t)}},{key:"render",value:function(){var e=this;return c.createElement("div",{className:fl()("cobrowsingBanner","cobrowsingBanner_".concat(uf[this.props.cobrowsingState])),ref:function(t){return e.banner=t},role:"status"},c.createElement("div",{className:"cobrowsingBanner__text"},(0,sr.translate)(lf[this.props.cobrowsingState]),this.props.cobrowsingState===Jr&&this.renderSessionDuration()),this.renderButtons())}}]),r}(c.Component),pf=(0,h.$j)((function(e){var t=e.chat,n=e.cobrowsing,o=e.partnerConfig;return{cobrowsingState:n.cobrowsingState,cobrowsingTimestamp:n.cobrowsingTimestamp,cobrowsingUserId:n.cobrowsingUserId,isLiveChat:t.isLiveChat,regionCode:o.regionCode}}),(function(e){return{setCobrowsingState:function(t){e(fc(t))},setCobrowsingUserId:function(t){e(gc(t))}}}))(hf);hf.propTypes={cobrowsingState:ea().string,regionCode:ea().string,setCobrowsingState:ea().func,setCobrowsingUserIUserId:ea().string};var ff,gf,mf=oa.ZP.div(of||(of=(0,$i.Z)(["\n    background-color: ",";\n    box-shadow: ",";\n"])),(function(e){return e.theme.colors.white}),(function(e){var t=e.theme.colors;return"0 4px 8px ".concat(t.borderColor)})),vf=oa.ZP.div(rf||(rf=(0,$i.Z)(["\n    background-color: ",";\n"])),(function(e){return e.theme.colors.gray12})),Ef=oa.ZP.div(af||(af=(0,$i.Z)(["\n    background-color: ",";\n"])),(function(e){return e.theme.colorheme.colors.gray85})),Sf=oa.ZP.div(cf||(cf=(0,$i.Z)(["\n    color: ",";\n"])),(function(e){return e.theme.colors.onBackground})),yf=oa.ZP.button((function(e){var t=e.theme.colors;return gd({text:t.onBackground,hoverBackground:t.gray12})})),bf=function(e){(0,Yi.Z)(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,Xi.Z)(t);if(n){var r=(0,Xi.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,Ki.Z)(this,e)});function r(e){var t;return(0,ur.Z)(this,r),(t=o.call(this,e)).getQueuePosNumber=t.getQueuePosNumber.bind((0,Qi.Z)(t)),t.getPrimaryText=t.getPrimaryText.bind((0,Qi.Z)(t)),t.renderProgressBar=t.renderProgressBar.bind((0,Qi.Z)(t)),t.getSecondaryText=t.getSecondaryText.bind((0,Qi.Z)(t)),t.getProgressBarPercentage=t.getProgressBarPercentage.bind((0,Qi.Z)(t)),t.handleLeaveButtonClick=t.handleLeaveButtonClick.bind((0,Qi.Z)(t)),t}return(0,lr.Z)(r,[{key:"componentDidMount",value:function(){var e=this;this.props.recordCount({label:Ln,type:_o}),setTimeout((function(){e.ewtSheet&&e.ewtSheet.classList.remove("ewtSheet_hidden")}),50)}},{key:"handleLeaveButtonClick",value:function(){this.props.setActionSheetType(Kr),this.props.recordCount({label:Bn,type:Po})}},{key:"getQueuePosNumber",value:function(e){return function(e,t){if("number"!=typeof e||isNaN(e))return"";var n=e%10,o=e%100;if(1==n&&11!=o){var r=t?Ot:Zt;return(0,sr.translate)(r,e)}if(2==n&&12!=o){var i=t?Rt:wt;return(0,sr.translate)(i,e)}if(3==n&&13!=o){var a=t?At:Mt;return(0,sr.translate)(a,e)}var s=t?kt:Dt;return(0,sr.translate)(s,e)}(this.props.ewtSheetData[Ni]+1,e)}},{key:"getProgressBarPercentage",value:function(e,t){-1==t&&(t=0);var n=(e+1)/(t+1);return Math.round(Math.min(95,Math.max(0,100-95*n)))}},{key:"renderProgressBar",value:function(){var e=this.getProgressBarPercentage(this.props.ewtSheetData[Ni],this.props.ewtSheetData[Oi]);return c.createElement(vf,{role:"progressbar","aria-valuenow":e,"aria-valuemin":"0","aria-valuemax":"95","aria-describedby":"ewt-sheet-primary-text"},c.createElement(Ef,{className:"ewtSheet__progressBar__line",style:{width:"".concat(e,"%")}}))}},{key:"getSecondaryText",value:function(e,t){return t===Mi?(0,sr.translate)(gt):e===Ri?(0,sr.translate)(mt):(0,sr.translate)(vt,this.getQueuePosNumber(!0))}},{key:"getPrimaryText",value:function(e){var t,n,o,r,i,a,s,c=this.props.ewtSheetData[_i],u=this.props.ewtSheetData[Ti];switch(e){case Ai:t=(0,sr.translate)(Et,Kd(u));break;case wi:t=(0,sr.translate)(St,(n=c,o=u,r=Math.floor(n/60),i=n%60,a=Math.floor(o/60),s=o%60,r||a?i||s?(0,sr.translate)(Nt,Kd(n),Kd(o)):(0,sr.translate)(It,r,a):(0,sr.translate)(Tt,i,s)));break;case Zi:t=(0,sr.translate)(yt,Kd(u));break;case ki:t=(0,sr.translate)(Ct,Kd(c));break;case Ri:t=this.getQueuePosNumber(!1)}return t}},{key:"render",value:function(){var e=this,t=this.props.ewtSheetData[Ii],n=this.props.ewtSheetData[bi];return t===Mi&&n===Ri?(this.props.hideEWTSheet(),null):c.createElement(mf,{ref:function(t){return e.ewtSheet=t},className:"ewtSheet ewtSheet_hidden",id:"ewt-sheet"},this.renderProgressBar(),c.createElement("div",{className:"ewtSheet__content"},c.createElement("div",{className:"ewtSheet__textContainer",role:"status"},c.createElement(Cf,{"aria-live":"polite","aria-atomic":!0,className:"ewtSheet__secondaryText"},this.getSecondaryText(n,t)),c.createElement(Sf,{"aria-live":"polite","aria-atomic":!0,className:"ewtSheet__primaryText",id:"ewt-sheet-primary-text"},this.getPrimar:"ewtSheet__button",onClick:this.handleLeaveButtonClick,type:"textPrimary"},(0,sr.translate)(Te)))))}}]),r}(c.Component),_f=(0,h.$j)((function(e){var t=e.partnerConfig;return{ewtSheetData:e.ewtSheet.ewtSheetData,regionCode:t.regionCode}}),(function(e){return{hideEWTSheet:function(){e(Cs())},setActionSheetType:function(t){e(Ca(t))},recordCount:function(t){e(Aa(t))}}}))(bf);bf.defaultProps={ewtSheetData:{}},bf.propTypes={regionCode:ea().string,ewtSheetData:ea().object,setActionSheetType:ea().func,hideEWTSheet:ea().func,recordCount:ea().func};var Tf=oa.ZP.div(ff||(ff=(0,$i.Z)(["\n    background-color: ",";\n"])),(function(e){return e.theme.colors.background})),If=oa.ZP.div(gf||(gf=(0,$i.Z)(["\n    background-color: ",";\n    color: ",";\n"])),(function(e){return e.theme.colors.error}),(function(e){return e.theme.colors.white})),Nf=function(e){(0,Yi.Z)(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,Xi.;return(0,Ki.Z)(this,e)});function r(e){return(0,ur.Z)(this,r),o.call(this,e)}return(0,lr.Z)(r,[{key:"componentDidUpdate",value:function(e){!e.formErrorMessage&&this.props.formErrorMessage&&this.$errorMessage&&this.$errorMessage.focus()}},{key:"render",value:function(){var e=this;return c.createElement(Tf,{className:"componentView"},this.props.formErrorMessage&&c.createElement(If,{id:"component-view-error",className:"componentView__error",ref:function(t){return e.$errorMessage=t},tabIndex:"-1",role:"alertdialog"},this.props.formErrorMessage),c.createElement("div",{className:"componentView__content"},c.createElement(Jl(),{component:this.props.content.root,language:(0,sr.getLanguage)(),styles:this.props.content.styles,formData:this.props.formData,formErrors:this.props.formErrors,isLoading:this.props.isHandlingAction,saveFormData:this.props.saveFormData,theme:this.props.theme,actionHandler:_u})))}}]),r}(c.Component);Nf.defaultProps={content:{}},Nf.propTypes={content:ea().object.isRequired,formData:ea().object,formErrorMessage:ea().string,formErrors:ea().object,theme:ea().object,isHandlingAction:ea().bool,updateFormData:ea().func,removeFormError:ea().func,saveFormData:ea().func};var Of,Rf,Af=(0,h.$j)((function(e){var t=e.form,n=e.partnerConfig;return{formData:t.formData,formErrorMessage:t.formErrorMessage,formErrors:t.formErrors,isHandlingAction:t.isHandlingAction,theme:n.theme}}),(function(e){return{updateFormData:function(t){e(Ac(t))},removeFormError:function(t){e(Mc(t))},saveFormData:function(t){e(Dc(t))}}}))(Nf),kf=oa.ZP.button((function(e){return function(e,t){if(e&&e.colors&&e.colors.buttons&&e.colors.buttons[t]){var n,o,r,i,a=e.colors,s=a.buttons,c=a.gray5,u=a.gray12,l=a.gray50,d=s[t],h=d.background,p=void 0===h?"transparent":h,f=d.text,g=d.border,m=void 0===g?"transparent":g;switch(t){case fd:n=(0,gl._j)(.15,p),o=c,i=l;break;case"secondary":n=c,r=u,i=l;break;case"textPrimary":n=c,i=l}return gd({background:p,text:f,border:m,hoverBackground:n,disabledBackground:o,disabledBorder:r,disabledText:i})}}(e.theme,e.type)}));function Zf(e){var t=e.type,n=e.disabled,o=e.onClick,r=e.children,i=e.isLoading;return c.createElement(kf,{className:fl()("button button_".concat(t),{button_loading:i}),disabled:n||i,onClick:o,type:t},i&&c.createElement(Il,{iconName:"loading"}),c.createElement("div",{className:"button__content"},r))}Zf.propTypes={children:ea().oneOfType([ea().array,ea().object,ea().string]),disabled:ea().bool,isLoading:ea().bool,name:ea().string,onClick:ea().func,state:ea().string,type:ea().string,inlineStyles:ea().object,attributes:ea().object},Zf.defaultProps={object:{content:{},style:{}}};var wf,Mf,Df,Pf,Lf=oa.ZP.div(Of||(Of=(0,$i.Z)(["\n    background-color: ",";\n\n    .icon_loading {\n        fill: ",";\n    }\n"])),(function(e){return e.theme.colors.background}),(function(e){return e.theme.colors.primary})),Bf=oa.ZP.div(Rf||(Rf=(0,$i.Z)(["\n    color: ",";\n"])),(function(e){return e.theme.colors.onBackground})),Hf=function(e){var t=e.displaySettings,n=e.buttonText,o=e.isLoading,r=e.onButtonClick,i=e.regionCode,a=e.text,s=e.suppressCloseButton;return c.createElement(Lf,{className:"loadingView",role:"alert","aria-busy":"true","aria-live":"assertive","aria-label":(0,sr.translate)(Fe)},!s&&c.createElement(Mp,{classNames:fl()("delayed",{alwaysShowMinimize:t.FrameStyle===Jo||t.Fement(Il,{iconName:"loading"}),!o&&n&&r&&c.createElement(Zf,{className:"loadingView__button",type:"primary",onClick:r},n))},Vf=(0,h.$j)((function(e){var t=e.partnerConfig;return{displaySettings:t.displaySettings,regionCode:t.regionCode}}))(Hf);Hf.defaultProps={displaySettings:{},regionCode:Vt},Hf.propTypes={displaySettings:ea().object.isRequired,buttonText:ea().string,isLoading:ea().bool.isRequired,onButtonClick:ea().func,regionCode:ea().string.isRequired,text:ea().string,suppressCloseButton:ea().bool};var Uf=oa.ZP.div(wf||(wf=(0,$i.Z)(["\n    background-color: ",";\n"])),(function(e){var t=e.theme.colors;return"".concat((0,gl.m4)(t.black,.5))})),Ff=oa.ZP.div(Mf||(Mf=(0,$i.Z)(["\n    background-color: ",";\n"])),(function(e){return e.theme.colors.background})),xf=oa.ZP.div(Df||(Df=(0,$i.Z)(["\n    background-color: ",";\n    border-bottom: ",";\n    color: ",";\n"])),(function(e){return e.theme.colors.background}),(function(e){var t=e.theme.colors;return"1px solid ".concat(t.borderColor)}),(function(e){return e.theme.colors.onBackground})),jf=oa.ZP.button(Pf||(Pf=(0,$i.Z)(["\n    .componentUI_icon .componentUI_icon__svg {\n        fill: ",";\n    }\n\n    &:hover {\n        background-color: ",";\n    }\n"])),(function(e){return e.theme.colors.onBackground}),(function(e){return e.theme.colors.gray5})),qf=function(e){(0,Yi.Z)(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,Xi.Z)(t);if(n){var r=(0,Xi.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,Ki.Z)(this,e)});function r(e){return(0,ur.Z)(this,r),o.call(this,e)}return(0,lr.Z)(r,[{key:"componentDidMount",value:function(){var e=this;this.modalViewTitle&&this.modalViewTitle.focus(),this.modalView&&this.modalView.classList.add("modalView_hidden"),setTimeout((function(){e.modalView&&e.modalView.classList.remove("modalView_hidden"),e.currentView&&e.currentView.classList.remove("modalView__content_hidden")}),50)}},{key:"componentDidUpdate",value:function(){var e=this;setTimeout((function(){e.currentView&&e.currentView.classList.remove("modalView__content_hidden")}),50)}},{key:"renderNavBar",value:function(){var e=this;return c.createElement(xf,{className:"modalView__navBar"},c.createElement(jf,{className:fl()("modalView__backButton",{modalView__backButton_hidden:this.props.modalViewContent.length<=1}),title:(0,sr.translate)(H),onClick:function(){e.props.hideModalView(!1)}},c.createElement(Jl(),ih($l.ICON_NAMES.ARROW_LEFT))),c.createElement("div",{className:"modalView__title",id:"modal-view-title",ref:function(t){e.modalViewTitle=t},s.currentTitle},this.currentTitle),c.createElement(jf,{className:fl()("modalView__closeButton",{modalView__closeButton_hidden:this.props.modalViewContent.length>1}),title:(0,sr.translate)(Ie),onClick:function(){e.props.hideModalView(!0)}},c.createElement(Jl(),ih($l.ICON_NAMES.NAV_CLOSE))))}},{key:"render",value:function(){var e=this,t=this.props,n=t.modalViewDisplayStyle,o=t.regionCode,r=t.modalViewContent,i=r[r.length-1];return this.currentTitle=i&&i.title,c.createElement(Uf,{"aria-labelledby":"modal-view-title",className:fl()("modalView",{modalView_inset:"inset"===n}),id:"modal-view",ref:function(t){e.modalView=t},role:"dialog"},this.renderNavBar(),(this.props.isLoadingContent||this.props.loadingContentErrs.props.isLoadingContent,text:this.props.isLoadingContent?null:this.props.loadingContentErrorMessage,buttonText:this.props.isLoadingContent?null:(0,sr.translate)(Ae),regionCode:o,onButtonClick:function(){_u({action:e.props.retryAction})},suppressCloseButton:!0}),this.props.modalViewContent.map((function(t,n){return c.createElement(Ff,{className:fl()("modalView__content",{modalView__content_hidden:n!==e.props.modalViewContent.length-1}),ref:function(t){n===e.props.modalViewContent.length-1&&(e.currentView=t)},id:"modal-view-".concat(n),key:n},c.createElement(Af,{content:t,regionCode:o}))})))}}]),r}(c.Component);qf.propTypes={actionHandler:ea().func,modalViewContent:ea().array.isnfntent:t.isLoadingContent,modalViewDisplayStyle:t.modalViewDisplayStyle,loadingContentErrorMessage:t.loadingContentErrorMessage,retryAction:t.retryAction,regionCode:n.regionCode}}),(function(e){return{hideModalView:function(t){e(gu(t))}}}))(qf);var $f,Jf,eg=oa.ZP.div(Wf||(Wf=(0,$i.Z)(["\n    background-color: ",";\n    border-top: ",";\n"])),(function(e){return e.theme.colors.background}),(function(e){var t=e.theme.colors;return"1px solid ".concat(t.borderColor)})),tg=oa.ZP.h2(Gf||(Gf=(0,$i.Z)(["\n    color: ",";\n"])),(function(e){return e.theme.colors.onBackground})),ng=oa.ZP.div(zf||(zf=(0,$i.Z)(["\n    color: ",";\n"])),(function(e){return e.theme.colors.gray85})),og=oa.ZP.div(Qf||(Qf=(0,$i.Z)(["\n    color: ",";\n"])),(function(e){return e.theme.colors.error})),rg=oa.ZP.div(Yf||(Yf=(0,$i.Z)(["\n    margin-bottom: 30px;\n\n    .icon {\n        fill: ",";\n        height: 30px;\n        width: 30px;\n    }\n"])),(function(e){return e.theme.colors.primary})),ig=(Kf={},(0,s.Z)(Kf,Wr,{title:f,text:g,continueText:m,abandonText:v}),(0,s.Z)(Kf,zr,{title:E,text:C,abandonText:S}),(0,s.Z)(Kf,Qr,{icon:"bell",title:y,text:b,continueText:_,abandonText:T}),(0,s.Z)(Kf,Yr,{icon:"navCheck",title:I,text:N,continueText:O}),(0,s.Z)(Kf,Kr,{title:R,text:A,continueText:k,abandonText:Z}),(0,s.Z)(Kf,Xr,{icon:"phone",title:w,continueText:M}),Kf),ag=function(e){(0,Yi.Z)(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,Xi.Z)(t);if(n){var r=(0,Xi.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,Ki.Z)(this,e)});function r(e){var t;return(0,ur.Z)(this,r),(s.bind((0,Qi.Z)(t)),t}return(0,lr.Z)(r,[{key:"componentDidMount",value:function(){var e=this;this.actionSheetTitle&&this.actionSheetTitle.focus(),setTimeout((function(){e.actionShenSheet_hidden")}),50)}},{key:"componentDidUpdate",value:function(){var e=this;this.actionSheet&&this.actionSheet.classList.remove("actionSheet_hidden"),this.props.actionSheetType===Yr&&setTimeout((function(){e.props.dismissActionSheet()}),2e3)}},{key:"onConfirm",value:function(){switch(this.props.actionSheetType){case Wr:case Gr:this.props.restartChat();break;case zr:this.props.removeSession(),this.props.restartAuthNormally(),this.props.dismissActionSheet();break;case Qr:Gd.post("Request Notification Permission"),this.props.recordCount({label:ro,type:Po,tags:(0,s.Z)({},Ho,this.props.deviceInfo.deviceType)});break;case Kr:this.props.leaveQueue()}}},{key:"onDismiss",value:function(){switch(this.props.actionSheetType){case Qr:this.props.recordCount({label:ro,type:fo,tags:(0,s.Z)({},Ho,this.props.deviceInfo.deviceType)});break;case Kr:this.props.recordCount({label:Bn,type:fo});break;case Xr:this.props.setChatBanner(qr),this.props.recordCount({label:En,type:bo})}this.props.dismissActionSheet()}},{key:"render",value:function(){var e=this,t=Object.assign({},this.props.actionSheetData,ig[this.props.actionSheetType]),n=t.icon,o=t.title,r=t.text,i=t.continueText,a=t.abandonText,s=(0,sr.translate)(o);return c.createElement(eg,{"aria-describedby":"action-sheet-text","aria-labelledby":"action-sheet-title",id:"action-sheet",className:"actionSheet actionSheet_hidden actionSheet_".concat(this.props.actionSheetType),ref:function(t){return e.actionSheet=t},role:"dialog",title:s},c.createElement("div",{className:"actionSheet__content"},n&&c.createElement(rg,null,c.createElement(Il,{iconName:n})),c.createElement(tg,{className:"actionSheet__title",id:"action-sheet-title",tabIndex:"-1",ref:function(t){return e.actionSheetTitle=t}},s),c.createElement(ng,{className:"actionSheet__text",id:"action-sheet-text"},(0,sr.translate)(r)),this.props.showActionSheetError&&c.createElement(og,{className:"actionSheet__error"},(0,sr.translate)(Re))),c.createElement("div",{className:"actionSheet__buttons"},a&&c.createElement(Zf,{id:"action-sheet-abandon-button",onClick:this.onConfirm,isLoading:this.props.isActionSheetLoading||this.props.isRestartingChat,type:"primary"},(0,sr.translate)(a)),i&&c.createElement(Zf,{onClick:this.onDismiss,type:"secondary"},(0,sr.translate)(i))))}}]),r}(c.Component),sg=(0,h.$j)((function(e){var t=e.actionSheet,n=e.chat,o=e.partnerConfig;return{actionSheetData:t.actionSheetData,actionSheetType:t.actionSheetType,isActionSheetLoading:t.isActionSheetLoading,showActionSheetError:t.showActionSheetError,isRestartingChat:n.isRestartingChat,regionCode:o.regionCode,deviceInfo:o.deviceInfo}}),(function(e){return{recordCount:function(t){e(Aa(t))},restars())},removeSession:function(){e(zs())},restartChat:function(){e(ic())},dismissActionSheet:function(){e(_a())},leaveQueue:function(){e((function(e){return e(Sa(!0)),e(Aa({label:Hn,type:Po})),mh.endChat().then((function(){e(Cs()),e(_a())})).catch((function(){e(Sa(!1)),e(ya(!0))}))}))},setChatBanner:function(t){e(Js(t))}}}))(ag);ag.defaultProps={deviceInfo:{}},ag.propTypes={regionCode:ea().string,actionSheetType:ea().string,restartChat:ea().func,recordCount:ea().func,dismissActionSheet:ea().func,restartAuthNormally:ea().func,removeSession:ea().func,leaveQueue:ea().func,actionSheetData:ea().object,deviceInfo:ea().object,isRestartingChat:ea().bool,showActionSheetError:ea().bool,isActionSheetLoading:ea().bool,setChatBanner:ea().func};var cg,ug=oa.ZP.button($f||($f=(0,$i.Z)(["\n    background-color: ",";\n\n    &:active,\n    &:hover,\n    &:focus {\n        background-color: ",";\n    }\n"])),(function(e){var t=e.theme.colors,n=e.quickReplyAdjacent;return"".concat(n?t.gray5:(0,gl._j)(.01,t.white))}),(function(e){return e.theme.colors.gray12})),lg=oa.ZP.div(Jf||(Jf=(0,$i.Z)(["\n    color: ",";\n\n    .icon_newQuestion {\n        fill: ",";\n    }\n"])),(function(e){return e.theme.colors.newQuestionButtonPrimary}),(function(e){return e.theme.colors.newQuestionButtonPrimary})),dg=function(e){(0,Yi.Z)(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,Xi.Z)(t);if(n){var r=(0,Xi.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,Ki.Z)(this,e)});function r(e){var t;return(0,ur.Z)(this,r),(t=o.call(this,e)).clickEnabled=!t.props.quickRepliesDisabled,t.handleClick=t.handleClick.bind((0,Qi.Z)(t)),t.setEnabledTimeout=t.setEnabledTimeout.bind((0,Qi.Z)(t)),t}return(0,lr.Z)(r,[{key:"componentDidMount",value:function(){this.setEnabledTimeout()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.enabledTimeout)}},{key:"componentDidUpdate",value:function(){this.clickEnabled=!this.props.quickRepliesDisabled,this.setEnabledTimeout()}},{key:"setEnabledTimeout",value:function(){var e=this;this.clickEnabled||(clearTimeout(this.enabledTimeout),this.enabledTimeout=setTimeout((function(){e.clickEnabled=!0}),3500))}},{key:"handleClick",value:function(){this.clickEnabled&&(this.props.mostRecentMessageEvent&&this.props.mostRecentMessageEvent.payload&&this.props.mostRecentMessageEvent.payload.suppressNewQuestionConfirmation?this.props.restartChat():this.props.setActionSheetType(Wr))}},{key:"render",value:function(){return c.createElement(ug,{key:"new-question-button-with-delay-".concat(this.props.quickRepliesDisabled),id:"new-question-button",className:fl()("newQuestionButton",{newQuestionButton_alone:this.props.quickRepliesDisabled,newQuestionButton_hidden:this.props.hideNewQuestionButton}),onClick:this.handleClick,disabled:this.props.isRestartingChat,quickReplyAdjacent:this.props.showQuickReplies&&Pa(this.props.mostRecentMessageEvent)},c.createElement(lg,{className:"newQuestionButton__content"},c.createElement(Il,{iconName:"newQuestion"}),(0,sr.translate)(Ne)))}}]),r}(c.Component),hg=(0,h.$j)((function(e){var t=e.chat,n=e.eventLog,o=e.partnerConfig,r=e.quickReplies;return{hideNewQuestionButton:t.hideNewQuestionButton,regionCode:o.regionCode,quickRepliesDisabled:r.quickRepliesDisabled,isRestartingChat:t.isRestartingChat,showQuickReplies:r.showQuickReplies,mostRecentMessageEvent:n.mostRecentMessageEvent}}),(function(e){return{restartChat:function(){e(ic())},setActionSheetType:function(t){e(Ca(t))}}}))(dg);dg.defaultProps={mostRecentMessageEvent:{}},dg.propTypes={hideNewQuestionButton:ea().bool,regionCode:ea().string,restartChat:ea().func,quickRepliesDisabled:ea().bool,mostRecentMessageEvent:ea().object.isRequired,showQuickReplies:ea().bool,setActionSheetType:ea().func,isRestartingChat:ea().bool};var pg=oa.ZP.a(cg||(cg=(0,$i.Z)(["\n    &:active,\n    &:focus {\n        background-color: ",";\n        color: ",";\n    }\n"])),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.onPrimary})),fg=function(e){(0,Yi.Z)(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf0}catch(e){return!1}}(),function(){var e,o=(0,Xi.Z)(t);if(n){var r=(0,Xi.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,Ki.Z)(this,e)});function r(e){return(0,ur.Z)(this,r),o.call(this,e)}return(0,lr.Z)(r,[{key:"render",value:function(){return c.createElement("nav",{id:"assistive-nav-menu",className:"assistiveNavMenu"},c.createElement(pg,{href:"#chat-nav-bar",className:"assistiveNavMenu__anchor"},(0,sr.translate)(J)),c.createElement(pg,{href:"#chat-messages-view-scroll-view",className:"assistiveNavMenu__anchor"},(0,sr.translate)(z)),this.props.showQuickReplies&&c.createElement(pg,{href:"#".concat(Vl),className:"assistiveNavMenu__anchor"},(0,sr.translate)(Me)),this.props.showInput?c.createElement(pg,{href:"#".concat(Dl),className:"assistiveNavMenu__anchor"},(0,sr.translate)(q)):!this.props.hideNewQuestionButton&&c.createElement(pg,{href:"#new-question-button",className:"assistiveNavMenu__anchor"},(0,sr.translate)(Oe)))}}]),r}(c.Component);fg.propTypes={hideNewQuestionButton:ea().bool,regionCode:ea().string,showInput:ea().bool,showQuickReplies:ea().bool};var gg=(0,h.$j)((function(e){var t=e.chat,n=e.chatInput,o=e.partnerConfig,r=e.quickReplies;return{hideNewQuestionButton:t.hideNewQuestionButton,regionCode:o.regionCode,showInput:n.showInput,showQuickReplies:r.showQuickReplies}}))(fg);var mg,vg,Eg,Cg,Sg=function(e){(0,Yi.Z)(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,Xi.Z)(t);if(n){var r=(0,Xi.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,Ki.Z)(this,e)});function r(e){var t;return(0,ur.Z)(this,r),(t=o.call(this,e)).onConnected=t.onConnected.bind((0,Qi.Z)[{key:"componentDidMount",value:function(){var e=this.props,t=e.updateChatInputVisibility,n=e.isConnected;t(),n&&this.onConnected()}},{key:"componentDidUpdate",value:function(e){!e.isConnected&&this.props.isConnected&&this.onConnected()}},{key:"onConnected",value:function(){var e=this.props,t=e.chatBanner,n=e.setChatBanner;t===Br&&n(null),bu()}},{key:"renderFooter",value:function(){var e=this.props,t=e.isBlocked,n=e.showInput;return t?null:n?c.createElement(Hl,null):c.createElement(hg,null)}},{key:"render",value:function(){var e=this.props,t=e.sendFile,n=e.chatBanner,o=e.cobrowsingState,r=e.showEWTSheet,i=e.actionSheetType,a=e.showModalView;return c.createElement("div",{onDrop:t,className:"chatView"},c.createElement(gg,null),c.createElement(zp,null),n&&c.createElement(nf,null),o!==ei&&c.createElement(pf,null),r&&c.createElement(_f,null),c.createElement(Vd,null),!this.props.inputDelayActive&&c.createElement(c.Fragment,null,c.createElement(jl,null),this.renderFooter()),i&&c.createElement(sg,null),a&&c.createElement(Xf,null))}}]),r}(c.Component),yg=(0,h.$j)((function(e){var t=e.actionSheet,n=e.chat,o=e.chatInput,r=e.connection,i=e.cobrowsing,a=e.ewtSheet,s=e.modalView;return{cobrowsingState:i.cobrowsingState,isConnected:r.isConnected,isBlocked:n.isBlocked,chatBanner:n.chatBanner,actionSheetType:t.actionSheetType,showModalView:s.showModalView,showInput:o.showInput,showEWTSheet:a.showEWTSheet,inputDelayActive:o.inputDelayActive}}),(function(e){return{sendFile:function(t){e(ac(t))},updateChatInputVisibility:function(){e(os())},setChatBanner:function(t){e(Js(t))}}}))(Sg);Sg.propTypes={actionSheetType:ea().string,cobrowsingState:ea().string,isConnected:ea().bool,isBlocked:ea().bool,chatBanner:ea().string,setChatBanner:ea().func,showEWTSheet:ea().bool,showModalView:ea().bool,showInput:ea().bool,updateChatInputVisibility:ea().func,sendFile:ea().func,inputDelayActive:ea().bool};var bg=Go,_g=zo,Tg=Qo,Ig=Yo,Ng="Browser Storage Access Error",Og=(mg={},(0,s.Z)(mg,bg,Ee),(0,s.Z)(mg,Ng,Se),(0,s.Z)(mg,_g,_e),(0,s.Z)(mg,Tg,ve),(0,s.Z)(mg,Ig,Ee),mg),Rg=(vg={},(0,s.Z)(vg,bg,be),(0,s.Z)(vg,Tg,ye),(0,s.Z)(vg,Ig,be),vg),Ag=(Eg={},(0,s.Z)(Eg,bg,$l.ICON_NAMES.USER_USER_STANDING),(0,s.Z)(Eg,Ng,$l.ICON_NAMES.NETWORK_ALERT),(0,s.Z)(Eg,_g,$l.ICON_NAMES.NOTIFICATION_ALERT),(0,s.Z)(Eg,Tg,$l.ICON_NAMES.NETWORK_ALERT),(0,s.Z)(Eg,Ig,$l.ICON_NAMES.USER_USER_STANDING),Eg),kg=oa.ZP.span(Cg||(Cg=(0,$i.Z)(["\n    background-color: ",";\n\n    svg {\n function(e){return e.theme.colors.gray.theme.colors.primary})),Zg=function(e){var t,n=e.displaySettings,o=e.error,r=e.reloadIfNecessary,i=e.resetError,a=e.setOnConnectedCallback,u=function(){a&&a(i),Gd.post(an)},l=(t={},(0,s.Z)(t,bg,u),(0,s.Z)(t,Tg,(function(){i&&i(),r&&r()})),(0,s.Z)(t,Ig,u),t),d=Rg[o],h=Ag[o];return c.createElement("div",{className:"errorView"},c.createElement(Mp,{classNames:fl()("delayed",{alwaysShowMinimize:n.FrameStyle===Jo||n.FrameDraggable})}),c.createElement("div",{className:"errorView__info"},c.createElement(kg,{className:"err(0,sr.translate)(Og[o]))),d&&c.createElement(Zf,{type:"primary",onClick:l[o]},(0,sr.translate)(d)))},wg=(0,h.$j)((function(e){var t=e.chat,n=e.partnerConfig;return{displaySettings:n.displaySettings,regionCode:n.regionCode,error:t.error}}),(function(e){return{reloadIfNecessary:function(){e(tu())},resetError:function(){e(tc())},setOnConnectedCallback:function(t){e(eu(t))}}}))(Zg);Zg.defaultProps={displaySettings:{},regionCode:Vt},Zg.propTypes={displaySettings:ea().object.isRequired,error:ea().string,regionCode:ea().string.isRequired,reloadIfNecessary:ea().func,resetError:ea().func,setOnConnectedCallback:ea().func};var Mg=kl,Dg=Al,Pg="initial",Lg="sending",Bg="sent",Hg="SMSForm",Vg=function(e){(0,Yi.Z)(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,Xi.Z)(t);if(n){var r=(0,Xi.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,Ki.Z)(this,e)});function r(e){var t,n;return(0,ur.Z)(this,r),(n=o.call(this,e)).state=(t={currentForm:yi.PHONE_NUMBER,error:null,verificationCheckStatus:Pg,verificationStartStatus:Pg},(0,s.Z)(t,yi.VERIFICATION_CODE,""),(0,s.Z)(t,yi.PHONE_NUMBER,""),t),n.phoneNumberFormat=e.SMSFormSettings.smsPhoneNumberFormat&&e.SMSFormSettings.smsPhoneNumberFormat[0]||{},n.onCloseButtonClick=n.onCloseButtonClick.bind((0,Qi.Z)(n)),n.onGoBackButtonClick=n.onGoBackButtonClick.bind((0,Qi.Z)(n)),n.getContentText=n.getContentText.bind((0,Qi.Z)(n)),n.getPhoneNumber=n.getPhoneNumber.bind((0,Qi.Z)(n)),n.handleErrorResponse=n.handleErrorResponse.bind((0,Qi.Z)(n)),n.handleInputChange=n.handleInputChange.bind((0,Qi.Z)(n)),n.handleKeyPress=n.handleKeyPress.bind((0,Qi.Z)(n)),n.hide=n.hide.bind((0,Qi.Z)(n)),n.onVerificationCheck=n.onVerificationCheck.bind((0,Qi.Z)(n)),n.onVerificationStart=n.onVerificationStart.bind((0,Qi.Z)(n)),n.renderMainContent=n.renderMainContent.bind((0,Qi.Z)(n)),n.verificationCheck=n.verificationCheck.bind((0,Qi.Z)(n)),n.verificationStart=n.verificationStart.bind((0,Qi.Z)(n)),n}return(0,lr.Z)(r,[{key:"componentDidMount",value:function(){var e=this;this.props.recordCount({label:jn,type:_o}),setTimeout((function(){e.focusInput()}),280)}},{key:"componentDidUpdate",value:function(e,t){t.currentForm===yi.PHONE_NUMBER&&this.state.currentForm===yi.VERIFICATION_CODE&&this.props.recordCount({label:Fn,type:_o})}},{key:"focusInput",value:function(){var e=this.currentContent&&this.currentContent.querySelector("input");e&&e.focus()}},{key:"hide",value:function(e){var t=this;Gd.post(Xt),Gd.post("Toggle Chat Instead",{showChatInstead:e}),setTimeout((function(){t.props.setSMSFormSettings(null)}),280)}},{key:"getContentText",value:function(e){var t,n,o,r=(o={},(0,s.Z)(o,yi.PHONE_NUMBER,{TITLE:(t={},(0,s.Z)(t,er,je),(0,s.Z)(t,tr,qe),t),DESCRIPTION:(n={},(0,s.Z)(n,er,We),(0,s.Z)(n,tr,Ge),n)}),(0,s.Z)(o,yi.VERIFICATION_CODE,{TITLE:Ye,DESCRIPTION:Ke}),(0,s.Z)(o,yi.ERROR_TOO_MANY_RETRIES,{TITLE:nt,DESCRIPTION:ot}),(0,s.Z)(o,"TITLE",{CLOSE:it,GO_BACK:at}),o)[e],i=r.TITLE,a=r.DESCRIPTION,c=i,u=a;return e===yi.PHONE_NUMBER?(c=i[this.props.SMSFormSettings.entryType],u=a[this.props.SMSFormSettings.entryType]):e===yi.VERIFICATION_CODE&&(u=a+this.state[yi.PHONE_NUMBER]),{title:c,description:u}}},{key:"getPhoneNumber",value:function(){var e=this.phoneNumberFormat,t=e.countryCode,n=e.omitInitialZero,o=this.state[yi.PHONE_NUMBER].replace(/\D/g,"");return n&&(o=o.substring(1)),"+"+t+o}},{key:"verificationStart",value:function(){var e=this;this.setState({verificationStartStatus:Lg});var t=Zr.SMS_VERIFICATION_START;return mh.submitSMSRequest({path:t,phoneNumber:this.getPhoneNumber(),metricsEventLabel:xn}).then(this.onVerificationStart).catch((function(n){Ar.Warn(Hg,"Failed to send SMS request",t,n),e.handleErrorResponse(n.status,n.error)}))}},{key:"verificationCheck",value:function(){var e=this;this.setState({verificationCheckStatus:Lg});var t=Zr.SMS_VERIFICATION_CHECK;return mh.submitSMSRequest({path:t,phoneNumber:this.getPhoneNumber(),verificationCode:this.state[yi.VERIFICATION_CODE],metricsEventLabel:Un}).then(this.onVerificationCheck).catch((function(n){Ar.Warn(Hg,"Failed to send SMS request",t,n),e.handleErrorResponse(n.status,n.error)}))}},{key:"handleErrorResponse",value:function(e,t){429===e?this.setState({currentForm:yi.ERROR_TOO_MANY_RETRIES}):this.setState({error:"string"==typeof t?t:null,verificationStartStatus:Pg,verificationCheckStatus:Pg})}},{key:"onCloseButtonClick",value:function(){this.state.currentForm===yi.PHONE_NUMBER?this.props.recordCount({label:jn,type:bo}):this.state.currentForm===yi.VERIFICATION_CODE&&this.props.recordCount({label:Fn,type:bo}),this.hide()}},{key:"onGoBackButtonClick",value:function(){this.state.currentForm===yi.VERIFICATION_CODE?this.setState((0,s.Z)({currentForm:yi.PHONE_NUMBER,error:null},yi.VERIFICATION_CODE,"")):this.hide(!0)}},{key:"onVerificationStart",value:function(){var e,t=this;this.state.currentForm===ye({currentForm:yi.VERIFICATION_CODE,error:null,verificationStartStatus:Pg}):this.setState((e={},(0,s.Z)(e,yi.VERIFICATION_CODE,""),(0,s.Z)(e,"error",null),(0,s.Z)(e,"verificationStartStatus",Bg),e)),setTimeout((function(){t.focusInput()}),500)}},{key:"onVerificationCheck",value:function(){this.setState({verificationCheckStatus:Bg,error:null}),setTimeout(this.hide,2e3)}},{key:"handleInputChange",value:function(e){var t,n=e.target,o=n.name,r=n.value,i=r;o===yi.VERIFICATION_CODE&&(i=r.replace(/\D/g,"")).length>6||this.setState((t={},(0,s.Z)(t,o,i),(0,s.Z)(t,"error",null),t))}},{key:"handleKeyPress",value:function(e){if(Mg(e.nativeEvent)){var t=this.currentContent&&this.currentContent.querySelector('button[type="submit"]');t&&(e.preventDefault(),t.click())}}},{key:"renderContent",value:function(){var e=this;return Object.keys(yi).map((function(t){va=e.getContentText(n),i=r.title,a=r.description;return c.createElement("div",{key:"".concat(n,"-content"),className:fl()("smsForm__content smsForm__content_".concat(n),{smsForm__content_hidden:!o}),ref:function(t){o&&(e.currentContent=t)}},c.createElement("span",{className:"smsForm__title"},(0,sr.translate)(i)),c.createElement("span",{className:"smsForm__description"},(0,sr.translate)(a)),e.renderMainContent(n))}))}},{key:"renderMainContent",value:function(e){return e===yi.ERROR_TOO_MANY_RETRIES?c.createElement("button",{className:"smsForm__button smsForm__primaryButton smsForm__button_goback",onClick:this.onGoBackButtonClick},c.createElement("span",{className:"smsForm__button__text"},(0,sr.translate)(rt))):e===yi.VERIFICATION_CODE&&this.state.verificationCheckStatus!==Pg?c.createElement("div",{className:"smsForm__statusIcon smsForm__statusIcon_".concat(this.state.verificationCheckStatus)},c.createElement(Il,{iconName:this.state.verificationCheckStatus===Lg?"loading":"navCheck"})):this.renderInput(e)}},{key:"renderInput",value:function(e){var t,n=(t={},(0,s.Z)(t,yi.PHONE_NUMBER,{INPUT_TITLE:ze}),(0,s.Z)(t,yi.VERIFICATION_CODE,{INPUT_TITLE:Xe}),t)[e].INPUT_TITLE,o="errorMessage-".concat(e),r="smsForm-input-".concat(e),i="".concat(e,"-label"),a={"aria-describedby":this.state.error&&o,"aria-invalid":!!this.state.error,"aria-labelledby":i,"data-numeric":!0,className:fl()("smsForm__input smsForm__input_".concat(e),{smsForm__input_hasError:!!this.state.error}),id:r,name:e,onChange:this.handleInputChange,onKeyPress:this.handleKeyPress,pattern:Dg,required:!0,type:"tel",value:this.state[e],placeholder:e===yi.PHONE_NUMBER?this.phoneNumberFormat.placeHolder:"123456"};return c.createElement("div",{className:"smsForm__input__container"},c.createElement("label",{id:i,className:"smsForm__input__label",htmlFor:r},(0,sr.translate)(n)),c.createElement("div",{className:"smsForm__input__box"},c.createElement("input",a)),this.state.error?c.createElement("p",{id:o,className:"smsForm__input__error"},this.state.error):null,c.createElement("div",{className:"smsForm__input__buttonContainer"},e===yi.PHONE_NUMBER?this.renderPhoneNumberInputButton():this.renderConfirmationCodeInputButtons()))}},{key:"renderPhoneNumberInputButton",value:function(){var e=this.state[yi.PHONE_NUMBER].length;return c.createElement("button",{className:fl()("smsForm__button smsForm__primaryButton",{smsForm__button_loading:this.state.verificationStartStatus===Lg}),onClick:this.verificationStart,disabled:!e},c.createElement(Il,{iconName:"loading"}),c.createElement("span",{className:"smsForm__button__text"},(0,sr.translate)(Qe)))}},{key:"renderConfirmationCodeInputButtons",value:function(){var e,t,n,o,r=(e={},(0,s.Z)(e,yi.PHONE_NUMBER,{PRIMARY_BUTTON_TEXT:Qe}),(0,s.Z)(e,yi.VERIFICATION_CODE,{PRIMARY_BUTTON_TEXT:$e,SECONDARY_BUTTON:{DEFAULT:Je,LOADING:et,SENT:tt}}),(0,s.Z)(e,yi.ERROR_TOO_MANY_RETRIES,{PRIMARY_BUTTON_TEXT:at}),e)[yi.VERIFICATION_CODE],i=r.PRIMARY_BUTTON_TEXT,a=r.SECONDARY_BUTTON,u=this.state[yi.VERIFICATION_CODE].length;switch(this.state.verificationStartStatus){case Lg:n=a.LOADING,t=!0;break;case Bg:n=a.SENT,o="navCheck",t=!0;break;default:n=a.DEFAULT,t=!1}return c.createElement(c.Fragment,null,c.createElement("button",{className:"smsForm__button smsForm__secondaryButton",onClick:this.verificationStart,disabled:t,type:"icon-text"},c.createElement("span",{className:"smsForm__button__text"},(0,sr.translate)(n)),o&&c.createElement(Il,{iconName:o})),c.createElement("button",{type:"primary",className:"smsForm__button smsForm__primaryButton",onClick:this.verificationCheck,disabled:6!==u},c.createElement("span",{className:"smsForm__button__text"},(0,sr.translate)(i))))}},{key:"render",value:function(){return c.createElement("div",{className:"smsForm",id:"sms-form"},c.createElement("div",{className:"smsForm__header"},this.state.verificationCheckStatus!==Bg&&c.createElement("button",{type:"icon",className:"smsForm__header__button smsForm__header__goBackButton",onClick:this.onGoBackButtonClick},c.createElement(Il,{iconName:"goBack"})),c.createElement("span",{className:"smsForm__header__title"},(0,sr.translate)(xe)),c.createElement("button",{type:"icon",className:"smsForm__header__button smsForm__header__closeButton",onClick:this.onCloseButtonClick},c.createElement(Il,{iconName:"close"}))),this.props.chatBanner&&c.createElement(nf,null),c.createElement("div",{className:"smsForm__content__container"},this.renderContent()))}}]),r}(c.Component),Ug=(0,h.$j)((function(e){var t=e.chat;return{regionCode:e.partnerConfig.regionCode,chatBanner:t.chatBanner,SMSFormSettings:t.SMSFormSettings}}),(function(e){return{setSMSFormSettings:function(t){e($s(t))},recordCount:function(t){e(Aa(t))}}}))(Vg);function Fg(e,t){mh.getOfferedMessage({CustomerInfo:e,UnauthedImpression:t.UnauthedImpression,ActiveTriggerId:t.ActiveTriggerId})}Vg.defaultProps={SMSFormSettings:{phoneNumberFormat:[],entryType:""},regionCode:Vt},Vg.propTypes={setSMSFormSettings:ea().func,recordCount:ea().func,regionCode:ea().string,chatBanner:ea().string,SMSFormSettings:ea().object};var xg="[receiveSend.reporting]";function jg(e){switch(e){case 403:return Ar.Error(xg,"Unable to send data. Missing session.");case 500:return Ar.Error(xg,'Unable to parse "data".',"Ple and try again.")}}function qg(e,t){var n=t.reportingType;return n&&ar.INTEGRATION.SEND.REPORTING_TYPES.hasOwnProperty(n.toUpperCase())?mh.publishReportingEvent({reportingData:e,reportingType:n}).then((function(e){return jg(e&&e.statusg,'Failed to publish "'.concat(n,'".'),e),jg(e&&e.status)})):Ar.Error(xg,"Unknown reportingType:",n,"Please see documentation for available types.")}function Wg(e){var t={};return Object.keys(e).forEach((function(n){return t[n]=Wd(e[n])})),{_interface:t}}var Gg=hr((function(e){var t=e.data,n=e.metadata,o=void 0===n?{}:n,r=e.type,i=function(e){try{if("string"!=typeof e)throw new Error('"data" must be stringified JSON');if(e&&e.length>=21844)throw new Error('"data" exceeds 21,844 character limit');var t=Sr(e);if(Array.isArray(t)||"object"!==(0,gr.Z)(t))throw new Error('"data" does not contain a valid object');return t}catch(e){return Ar.Error("[receiveSend]",e.message),e}}(t);if(i){var a=[i,Object.assign({},o,Wg(i))];switch(r){case ar.INTEGRATION.SEND.TYPES.CUSTOMER:Fg.apply(null,a);break;case ar.INTEGRATION.SEND.TYPES.REPORTING:qg.apply(null,a)}}}),5e3),zg=hr((function(e){return function(t,n){e&&e.Code?t(n().chat.didEnterChat?ic(e):Wc({intent:e})):Ar.Error("[setIntent]","Invalid setIntent.",e)}}),5e3);var Qg="Chat.js",Yg=function(e){(0,Yi.Z)(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=(0,Xi.Z)(t);if(n){var r=(0,Xi.Z)(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return(0,Ki.Z)(this,e)});function r(e){var t;return(0,ur.Z)(this,r),(t=o.call(this,e)).started=null,t.retryConnectionOnVisibility=t.retryConnectionOnVisibility.bind((0,Qi.Z)(t)),t.handleSetScreenSize=t.handleSetScreenSize.bind((0,Qi.Z)(t)),t.onCobrowsingSessionContinue=t.onCobrowsingSessionContinue.bind((0,Qi.Z)(t)),t.onDragOver=t.onDragOver.bind((0,Qi.Z)(t)),t.onHostLocationChange=t.onHostLocationChange.bind((0,Qi.Z)(t)),t.handleIframeLoadedPoll=t.handleIframeLoadedPoll.bind((0,Qi.Z)(t)),t.onSessionStorageChange=t.onSessionStorageChange.bind((0,Qi.Z)(t)),t.sendInitialData=t.sendInitialData.bind((0,Qi.Z)(t)),t.start=t.start.bind((0,Qi.Z)(t)),t.handleSetCustomer=t.handleSetCustomer.bind((0,Qi.Z)(t)),t.unmountIFrame=t.unmountIFrame.bind((0,Qi.Z)(t)),t}return(0,lr.Z)(r,[{key:"componentDidMount",value:function(){void 0!==document.hidden?(this.hidden="hidden",this.visibilityChange="visibilitychange"):void 0!==document.msHidibilityChange="msvisibilitychange")idden="webkitHidden",this.visibilityChange="webkitvisibilitychange"),this.setEventListeners()}},{key:"componentDidCatch",value:function(){this.props.setError(zo)}},{key:"componentWillUnmount",value:function(){this.removeEventListeners()}},{key:"setEventListeners",value:function(){var e=this.props,t=e.setChatIntent,n=e.setSMSFormSettings,o=e.setError,r=e.setHostSettings,i=e.recordCount,a=e.updateNotificationPermission,s=e.hostSettings;Gd.on("Set Screen Size",this.handleSetScreenSize),Gd.on(ln,this.handleSetCustomer),Gd.on(pn,this.start),Gd.on(fn,n),Gd.on(sn,mh.getOfferedMessage),Gd.on(cn,this.sendInitialData),Gd.on(dn,o),Gd.on(en,Gg),Gd.on(tn,t),Gd.on(Yt,this.onCobrowsingSessionContinue),Gd.on(gn,ah(this.onHostLocationChange,1e3)),Gd.on(hn,r),Gd.on(mn,this.unmountIFrame),Gd.on(nn,i),Gd.on("Request Notification Permission",a),Gd.on("Has iFrame Loaded",this.handleIframeLoadedPoll),Gd.post($t,s),document.addEventListener("dragover",this.onDragOver),void 0!==document[this.hidden]&&document.addEventListener(this.visibilityChange,this.retryConnectionOnVisibility,!1)}},{key:"removeEventListeners",value:function(){var e=this.props,t=e.setChatIntent,n=e.setSMSFormSettings,o=e.setError,r=e.setHostSettings,i=e.recordCount;Gd.off(ln,this.handleSetCustomer),Gd.off(pn,this.start),Gd.off(fn,n),Gd.off(sn,mh.getOfferedMessage),Gd.off(cn,this.sendInitialData),Gd.off(dn,o),Gd.off(en,Gg),Gd.off(tn,t),Gd.off(Yt,this.onCobrowsingSessionContinue),Gd.off(gn,ah(this.onHostLocationChange,1e3)),Gd.off(hn,r),Gd.off(mn,this.unmountIFrame),Gd.off(nn,i),Gd.stopListening(),document.removeEventListener("dragover",this.onDragOver),void 0!==document.hidden&&document.removenge,this.retryConnectionOnVisibility)}},{key:"unmountIFrame",value:function(){this.props.sendMetricsEvents(),u.unmountComponentAtNode(document.getElementById("chat-sdk-app-root"))}},{key:"onDragOver",value:function(e){e.preventDefault()}},{key:"onSessionStorageChange",value:function(e){var t=e.oldValue,n=e.newValue,o=!!t.customer_primary_identifier,r=!!n.customer_primary_identifier;ch(t)||ch(n)||o===r||this.props.setActionSheetType(zr)}},{key:"handleSetScreenSize",value:function(e){var t=e.currentScreenSize,n=e.mobileClassnames,o=e.shouldDock;t&&!t.large?(this.props.setIsDocked(!1),this.props.setIsDraggable(!1)):o&&(this.props.setIsDocked(!0),this.props.displaySettings.FrameDraggable&&this.props.setIsDraggable(!0)),Array.isArray(n)&&n.forEach((function(e){try{e.add?document.body.classList.add(e.label):document.body.classList.remove(e.label)}catch(e){Ar(Qg,"handleSetScreenSize","Could not apply classname",e)}}))}},{key:"retryConnectionOnVisibility",value:function(){var e=this;setTimeout((function(){var t=km.getState(),n=t.chat.authStatus,o=t.connection.isConnected;!1!==document[e.hidden]||n!==Pr||o||(e.props.resetError(),e.props.reloadIfNecessary())}),100)}},{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props,n=t.updateProactiveMessageIntent,o=t.SMSFormSettings,r=t.setInitiationType,i=t.getCustomerAuth,a=t.setShowLoadingView,s=t.startDuration,c=t.recordCount;if(e.proactiveMessage&&n(e),this.started)return Ar(Qg,"start failed: already active."),void window.focus();o?Ar(Qg,"start failed: SMS Form is active."):(e.isAutoOpen||window.focus(),r(e.initiationType),i(),a(!0),this.started=!0,s({label:Rn,type:Ao}),c({label:Cn,type:Oo}))}},{key:"sendInitialData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ar(Qg,"sendInitialData","Initial data:",e);var t,n,o,r,i,a,s,c=this.props,u=c.setPartnerConfig,l=c.setIsDraggable,d=c.addStorageEventListener;u!1),e.deviceInfo&&e.deviceInfo.clientDevice&&e.deviceInfo.clientDevice.desktop&&d(ai,this.onSessionStorageChange),(e.sound||e.host&&e.host.notificationPermission===or)&&eh(),t=function(){document.body.classList.remove("initializingApp")},a=qd((n=km.getState().partnerConfig,o=n.appId,r=n.displaySettings,(i=r&&"string"==typeof r.Identity&&r.Identity.length>0?[o,r.Identity].join("-"):o)?i.toLowerCase():"default")),(s=xd("HEAD",a)).addEventListener("load",(function(){var e=document.createElement("link");e.type="text/css",e.rel="stylesheet",e.href=200===s.status?a:qd(),document.head.appendChild(e),"function"==typeof t&&window.setTimeout(t,150)})),s.send()}},{key:"handleIframeLoadedPoll",value:function(){Ar(Qg,"handleIframeLoadedPoll: resending Iframe Loaded"),Gd.post($t,this.props.hostSettings),this.props.recordCount({label:Dn,type:To})}},{key:"handleSetCustomer",value:function(e){(0,this.props.setPartnerConfig)(e,!0)}},{key:"onCobrowsingSessionContinue",value:function(e){var t=e.timestamp,n=e.userId,o=this.props,r=o.setCobrowsingTimestamp,i=o.setCobrowsingState,a=o.setCobrowsingUserId;r(t),i(Jr),a(n),mh.checkCobrowsingUrl(!0).catch((function(e){Ar(Qg,"onCobrowsingSessionContinue error",e)}))}},{key:"onHostLocationChange",value:function(e){this.props.updateHost({location:e}),this.props.cobrowsingState===Jr&&Gd.post(rn,"Continue Session")}},{key:"render",value:function(){var e;return e=this.props.error?c.createElement(wg,null):this.props.SMSFormSettings?c.createElement(Ug,null):this.props.showLoadingView?c.createElement(Vf,{isLoading:this.props.showLoadingView,retryText:(0,sr.translate)(Ae),suppressCloseButton:!1}):c.createElement(yg,null),c.createElement(oa.f6,{theme:this.props.theme},e)}}]),r}(c.Component),Kg=(0,h.$j)((function(e){var t=e.chat,n=e.connection,o=e.cobrowsing,r=e.partnerConfig;return{apiHostname:r.apiHostname,appId:r.appId,theme:r.theme,displaySettings:r.displaySettings,cobrowsingState:o.cings:t.hostSettings,error:t.error,showLoadingView:t.showLoadingView,SMSFormSettings:t.SMSFormSettings,regionCode:r.regionCode}}),(function(e){return{addStorageEventListener:function(t,n){e(function(e,t){return{type:bs,item:e,callback:t}}(t,n))},getCustomerAuth:function(){e(Ws())},reloadIfNecessary:function(){e(tu())},setError:fu)},setShowLoadingView:function(t){e(Xs(t))},setSMSFormSettisetActionSheetType:function(t){e(Ca(t))},setCobrowsingState:function(t){e(fc(t))},setCobrowsingTimestamp:function(t){e({type:hc,cobrowsingTimestamp:t})},setCobrowsingUserId:function(t){e(gc(t))},setPartnerConfig:function(t,n){e(Wc(t,n))},setIsDocked:function(t){e(ec(t))},setIsDraggable:function(t){e(function(e){return{type:Ls,isDraggable:e}}(t))},setHostSettings:function(t){e(function(e){return{type:Fs,hostSettings:e}}(t))},updateHost:function(t){e(Gc(t))},updateProactiveMessageIntent:function(t){var n,o,r;e((o=(n=t).proactiveMessage,r=n.proactiveMessageStatus,function(e,t){if(!t().partnerConfig.intent){var n=o.intent;"Opt-in"!==r&&(n=Object.assign({},o.intent,{ActionID:"Opt-out"===r?"0":null})),e(Wc({intent:n}))}}))},updateNotificationPermission:function(t){e(function(e){return function(t,n){var o=(n().partnerConfig.deviceInfo||{}).deviceType;switch(e){case nr:t(_a()),t(Aa({label:oo,type:bo,tags:(0,s.Z)({},Ho,o)}));break;case"denied":t(_a()),t(Aa({label:oo,t,o)}));break;case or:eh(),t(Ca(Yr)),t(Aa({label:oo,type:po,tags:(0,s.Z)({},Ho,o)}))}t(Gc({notificationPermission:e}))}}(t))},startDuration:function(t){e(Za(t))},recordCount:function(t){e(Aa(t))},sendMetricsEvents:function(){e({type:Ra})},setInitiationType:function(t){e(function(e){return{type:js,initiationType:e}}(t))},setChatIntent:function(t){e(zg(t))}}}))(Yg);Yg.propTypes={addStorageEventListener:ea().func,apiHostname:ea().string,appId:ea().string,auth:ea().object,cobrowsingState:ea().string,isConnected:ea().bool,displaySettings:ea().object,error:ea().string,getCustomerAuth:ea().func,regionCode:ea().string.isRequired,reloadIfNecessary:ea().func,resetError:ea().func,setActionSheetType:ea().func,setChatIntent:ea().func,setCobrowsingState:ea().func,setCobrowsingTimestamp:ea().func,setCobrowsingUserId:ea().func,setError:ea().func,setIsDocked:ea().func,setIsDraggable:ea().func,setOnConnectedCallback:ea().func,setPartnerConfig:ea().func,setShowLoadingView:ea().func,setHostSettings:ea().func,updateHost:ea().func,updateProactiveMessageIntent:ea().func,updateNotificationPermission:ea().func,startDuration:ea().func,recordCount:ea().func,sendMetricsEvents:ea().func,setInitiationType:ea().func,hostSettings:ea().object,showLoadingView:ea().bool.isRequired,SMSFormSettings:ea().object,theme:ea().object,setSMSFormSettings:ea().func};var Xg=Object.freeze({actionSheetData:null,actionSheetType:null,isActionSheetLoading:!1,showActionSheetError:!1}),$g={autocomplete:{Suggestions:[]},selectedAutocomplete:null,showInput:null,inputDelayActive:!1},Jg=Object.freeze({scrollTargetEventId:null,showTypingIndicator:!1,unreadMessageCount:0,unreadMessageEventIds:[]}),em=Object.freeze({navMenuOpen:!1,soundEnabled:!0}),tm=Object.freeze({authStatus:Mr,conversationState:Li,error:null,chatBanner:null,didEnterChat:!1,hideNewQuestionButton:null,initiationType:null,isBlocked:!1,isDocked:!1,isDraggable:!1,isLiveChat:!1,isRestartingChat:!1,session:null,showLoadingView:!1,SMSFormSettings:null,hostSettings:null}),nm=Object.freeze({cobrowsingState:ei,cobrowsingTimestamp:null,cobrowsingUserId:null}),om={isConnected:!1,onConnectedCallback:null},rm=Object.freeze({events:[],firstRepMessage:null,mostRecentMessageEvent:{},newRepEvent:{},hasMoreEvents:!1,isFetchingHistory:!1,firstCustomerEventId:null}),im=Object.freeze({showEWTSheet:!1,ewtSheetData:{}}),am=Object.freeze({formData:{},formErrorMessage:null,formErrors:null,isHandlingAction:!1,showInlineForm:!1,inlineFormContent:null}),sm=Object.freeze({modalViewContent:[],modalViewDisplayStyle:null,showModalView:!1,isLoadingContent:!1,loadingContentErrorMessage:null,retryAction:null});function cm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function um(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cm(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lm=Object.freeze({apiHostname:null,appId:null,customerId:null,deviceInfo:{},displaySettings:{},intent:null,loadIdentifiers:{},regionCode:Vt,sound:!1,host:{location:{},referrerUrl:"",sdkLoadTime:0,notificationPermission:null},contextProviderTimeout:6e3,theme:{colors:{background:"#fff",black:"#000",error:"#c30019",onBackground:"#000",onPrimary:"#fff",primary:"#0078d2",success:"#008266",warning:"#faaf00",white:"#fff"}}}),dm=Object.freeze({quickRepliesDisabled:!1,showQuickReplies:!1}),hm=Object.freeze({RedactionRules:[],SupportedUploadMIMETypes:[],IsDocumentUploadingEnabled:!1,IsPhotoUploadingEnabled:!1,NextAction:null,ShowSendingIndicatorThresholdMS:1e3,ShowDeliveryFailureThresholdMS:16e3,ShowAutocompleteInGenerativeAgent:!1,GlobalRequestTimeoutMS:15e3,InputUiEnterChatDelayMS:0,ASAPPNotificationsPermissionUI:{web:!1,ios:!1,android:!1},WebLinkTarget:"default",HealthCheckIntervalMS:0}),pm=(0,d.UY)({actionSheet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xg,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case fa:return Object.assign({},e,{actionSheetType:t.actionSheetType});case ga:return Object.assign({},e,{showActionSheetError:t.showActionSheetError});case pa:return Object.assign({},e,{actionSheetData:t.actionSheetData});case ma:return Object.assign({},e,{isActionSheetLoading:t.isActionSheetLoading});case va:return Xg;default:return e}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tm,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case Os:return Object.assign({},e,{session:tm.session});case As:return Object.assign({},e,{authStatus:t.authStatus});case Bs:return Object.assign({},e,{isLiveChat:t.isLiveChat});case ws:return Object.assign({},e,{conversationState:t.conversationState});case Zs:return Object.assign({},e,{error:t.error});case Ds:return Object.assign({},e,{hideNewQuestionButton:t.hideNewQuestionButton});case Rs:return Object.assign({},e,{error:null});case Vs:return Object.assign({},e,{showLoadingView:t.showLoadingView});case Us:return Object.assign({},e,{SMSFormSettings:t.SMSFormSettings});case Ms:return Object.assign({},e,{chatBanner:t.chatBanner});case Ps:return Object.assign({},e,{isDocked:t.isDocked});case Ls:return Object.assign({},e,{isDraggable:t.isDraggable});case xs:return Object.assign({},e,{isRestartingChat:t.isRestartingChat});case Hs:return Object.assign({},e,{session:t.session});case Fs:return Object.assign({},e,{hostSettings:t.hostSettings});case js:return Object.assign({},e,{initiationType:t.initiationType});case qs:return Object.assign({},e,{isBlocked:t.isBlocked});case ks:return Object.assign({},e,{didEnterChat:t.didEnterChat});default:return e}},chatInput:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$g,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case Ja:return Object.assign({},e,{showInput:t.showInput});case $a:return Object.assign({},e,{autocomplete:t.autocomplete,selectedAutocomplete:null});case Xa:return Object.assign({},e,{selectedAutocomplete:t.selectedAutocomplete});case Ka:return Object.assign({},e,{autocomplete:{Suggestions:[]},selectedAutocomplete:null});case es:return Object.assign({},e,{inputDelayActive:t.inputDelayActive});default:return e}},chatMessagesView:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jg,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case ia:return Object.assign({},e,{showTypingIndicator:t.showTypingIndicator});case ra:return Object.assign({},e,{scrollTargetEventId:t.scrollTargetEventId});case aa:return Object.assign({},e,{unreadMessageCount:0,unreadMessageEventIds:[]});case sa:var n=t.payload?(0,.unreadMessageEventIds),[t.payload]))):[];return Object.assign({},e,{unreadMessageCount:n.length,unreadMessageEventIds:n});case ca:var o=t.payload&&e.unreadMessageEventIds?e.unreadMessageEventIds.filter((function(e){return e!==t.payload})):e.unreadMessageEventIds;return Object.assign({},e,{unreadMessageCount:o.length,unreadMessageEventIds:o});default:return e}},chatNavBar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:em,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case Rp:return Object.assign({},e,{navMenuOpen:t.navMenuOpen});case Ap:return Object.assign({},e,{soundEnabled:t.soundEnabled});default:return e}},cobrowsing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nm,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case dc:return Object.assign({},e,{cobrowsingState:t.cobrowsingState});case hc:return Object.assign({},e,{cobrowsingTimestamp:t.cobrowsingTimestamp});case pc:return Object.assign({},e,{cobrowsingUserId:t.cobrowsingUserId});default:return e}},connection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:om,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case Kc:return Object.assign({},e,{isConnected:t.isConnected});case Xc:return Object.assign({},e,{onConnectedCallback:t.onConnectedCallback});default:return e}},eventLog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rm,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case Lu:var n=t.events;return Ya(n,e.events),Object.assign({},e,{events:n});case Bu:var o=(0,Ht.Z)(e.events);return Qa(o,t.event),Object.assign({},e,{events:o});case Hu:return Object.assign({},e,{events:t.events});case Vu:return Object.assign({},e,{firstRepMessage:t.firstRepMessage});case Fu:return Object.assign({},e,{mostRecentMessageEvent:t.event});case xu:return Object.assign({},e,{newRepEvent:t.newRepEvent});case Uu:return Object.assign({},e,{hasMoreEvents:t.hasMoreEvents});case ju:return Object.assign({},e,{isFetchingHistory:t.isFetchingHistory});case qu:return Object.assign({},e,{firstCustomerEventId:t.firstCustomerEventId});default:return e}},ewtSheet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:im,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case cs:return Object.assign({},e,{showEWTSheet:t.showEWTSheet});case us:return Object.assign({},e,{ewtSheetData:t.ewtSheetData});case ls:return Object.assign({},e,{showEWTSheet:!1,ewtSheetData:{}});default:return e}},form:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:am,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case _c:return Object.assign({},e,{formData:Object.assign({},e.formData,t.formData)});case Sc:return Object.assign({},e,{formErrorMessage:t.formErrorMessage});case yc:return Object.assign({},e,{formErrors:t.formErrors});case bc:return Object.assign({},e,{isHandlingAction:t.isHandlingAction});case Ic:return Object.assign({},e,{formErrors:Object.assign({},e.formErrors,(0,s.Z)({},t.fieldName,null))});case Tc:return Object.assign({},e,{formData:am.formData,formErrors:am.formErrors,formErrorMessage:am.formErrorMessage});case Oc:return Object.assign({},e,{showInlineForm:t.showInlineForm});case Nc:return Object.assign({},e,{inlineFormContent:t.inlineFormContent});case Rc:return Object.assign({},e,{showInlineForm:!1,formData:am.formData,formErrors:am.formErrors,inlineFormContent:am.inlineFormContent});default:return e}},modalView:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sm,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case ru:return Object.assign({},e,{showModalView:t.showModalView});case au:return Object.assign({},e,{modalViewContent:e.modalViewContent.concat(t.modalViewContent)});case iu:return Object.assign({},e,{modalViewDisplayStyle:t.modalViewDisplayStyle});case uu:return Object.assign({},e,{isLoadingContent:t.isLoadingContent});case lu:return Object.assign({},e,{loadingContentErrorMessage:t.loadingContentErrorMessage});case ou:return Object.assign({},e,{modalViewContent:e.modalViewContent.slice(0,-1)});case su:return Object.assign({},e,{modalViewContent:sm.modalViewContent,loadingContentErrorMessage:sm.loadingContentErrorMessage});case cu:return Object.assign({},e,{retryAction:t.retryAction});default:return e}},partnerConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lm,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case jc:return Object.assign({},e,t.partnerConfig);case qc:return Object.assign({},e,{host:um(um({},e.host),t.host)});default:return e}},quickReplies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dm,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case sc:return Object.assign({},e,{quickRepliesDisabled:t.quickRepliesDisabled});case cc:return Object.assign({},e,{showQuickReplies:t.showQuickReplies});default:return e}},sdkSettings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hm,t=arguments.length>1?arguments[1]:void 0;switch(Object.freeze(e),t.type){case zc:return Object.assign({},e,(0,s.Z)({},t.setting,null));case Qc:return Object.assign({},e,t.sdkSettings);default:return e}}}),fm={lato:"Lato"},gm={Lato:[400,700]},mm={classes:!1,timeout:750,google:{families:["".concat(fm.lato,":").concat(gm.Lato.join(","))]}};function vm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Em(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vm(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cm=jd(window.location.search),Sm=Cm.APIHostname,ym=Cm.CompanyMarker,bm=Cm.RegionCode,_m=Cm.Language,Tm=new Ip("localStorage",{APIHostname:Sm,CompanyMarker:ym,RegionCode:bm,Language:_m}),Im=new Ip("sessionStorage",{APIHostname:Sm,CompanyMarker:ym,RegionCode:bm,Language:_m}),Nm=new _h,Om=new vp,Rm=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||d.qC,Am=(0,d.MT)(pm,{chat:Object.assign({},tm,{session:Tm.get(ai),hostSettings:Tm.get(ci)}),sdkSettings:Object.assign({},hm,Tm.get(si)),ewtSheet:Object.assign({},im,{ewtSheetData:Im.get(li)||{}})},Rm((0,d.md)(function(e){return function(){return function(t){return function(n){switch(n.type){case _s:e.getCustomerAuth();break;case Ts:e.startHealthCheck();break;case Is:e.restartAuth(!1);break;case Ns:e.restartAuth(!0)}return t(n)}}}}(Nm),function(e,t){return function(){return function(n){return function(o){switch(o.type){case zc:e.remove(si,o.setting);break;case Os:e.clear(ai);break;case Qc:e.set(si,o.sdkSettings);break;case Hs:e.set(ai,o.session);break;case Fs:e.set(ci,o.hostSettings);break;case us:t.set(li,o.ewtSheetData);break;case ls:t.clear(li);break;case bs:e.addStorageEventListener(o.item,o.callback)}return n(o)}}}}(Tm,Im),function(e){return function(){return function(t){return function(n){var o=n.type,r=n.payload,i=void 0===r?{}:r,a=Np[i.label]||!1;switch(o){case Ta:e.recordCount(Xd(i.label,i.type),Si[i.label],{tags:i.tags,data:i.data},a);break;case Ia:e.recordGauge(Xd(i.label,i.type),Si[i.label],i.value,{tags:i.tags,data:i.data},a);break;case Na:e.startDuration(Xd(i.label,i.type));break;case Oa:e.endDuration(Xd(i.label,i.type),Si[i.label],{tags:i.tags,data:i.data},a);break;case _s:e.startDuration(Xd(On,Bo)).startDuration(Xd(vn,Bo));break;case Kc:n.isConnected&&e.endDuration(Xd(Wn,Bo),Si[Wn]);break;case As:n.authStatus===Mr?e.removePendingEvent(Xd(On,Bo)).removePendingEvent(Xd(vn,Bo)):n.authStatus===Dr?e.startDuration(Xd(vn,Bo)):n.authStatus===Pr&&e.startDuration(Xd(Wn,Bo)).startDuration(Xd(Gn,Bo));break;case Zs:n.error===Qo&&e.removePendingEvent(Xd(Wn,Bo));break;case Ra:e.sendEvents()}return t(n)}}}}(Om),l.Z))),km=Am;document.addEventListener("DOMContentLoaded",(function(){var e,t,n;e=Sm,t=ym,n=bm,Tu.S({dsn:"https://c5ecfaa718bc4ac19177237a338b7f34@o326333.ingest.sentry.io/5795638",environment:Nu?"localhost":"prod",release:"7b9f772194aab6988a41688cb513532df02d1efb",beforeSend:function(e,t){if(Nu){var n=t&&(t.originalException||tion);return n&&console.error(n),null}return"info"===e.level&&"prod"===e.environment?null:e}}),Iu.mG({apiHostname:e,companyMarker:t,regionCode:n}),(0,sr.setupI18n)(Em(Em({},cr),{},{language:_m})),function(e,t){if(mm.active=function(){t()},mm.inactive=function(){Ar("loadFonts:","failed",mm),t()},fm.hasOwnProperty(e)){var n=gm.hasOwnProperty(e)?":".concat(gm[e].join(",")):"";mm.custom={families:[fm.companyMarker+n]}}window.WebFont&&window.WebFont.hasOwnProdocument.getElementById("chat-sdk-app-root"))}))}))},"2In3":function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");e){if(null==e)throw new TypeError("Caroperty.call(o1&i|e.sp[l-1)o.o(t,ne){reProper.m[r]=s[r]);if(c)var l=c(o)}for(t&&t(n);u<&e[i]&&e[i][0](),e[i]=0;return o.O(l)},n=self.webpackChunkchat_sdk_web=self.webpackChunkchat_sdk_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),o.nc=void 0;var r=o.O(void 0,[203,460],(function(){return o("JUhV")}));r=o.O(r)}();