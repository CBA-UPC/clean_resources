(()=>{var eo=Object.defineProperty,to=Object.defineProperties;var io=Object.getOwnPropertyDescriptors;var Vt=Object.getOwnPropertySymbols;var Ys=Object.prototype.hasOwnProperty,Qs=Object.prototype.propertyIsEnumerable;var Zs=H=Pe=var er=var I=var Xe=class{constructor(e={}){e=Object.assign({resolveTimeout:null,resolveValue:!0,rejectTimeout:null,rejectValue:!1},e),this._promise=new Promise(,this.then=this._promise.then.bind(this._promise),this.catch=this._promise.catch.bind(this._promise),this.finally=this._promise.finally.bind(this._promise),this[Symbol.toStringTag]="Promise";let{resolveTimeout:i,resolveValue:s,rejectTimeout:r,rejectValue:n}=e;i&&setTimeout(()=>this.resolve(s),i),r&&setTimeout(()=>this.reject(n),r)}};var tr="layer";ar gt=t=>typeof t=="function"?t:function(){return t},so=typeof self!="undefined"?self:null,vt=typeof window!="undefined"?window:null,Ze=so||vt||Ze,ro="2.0.0",Ce={connecting:0,open:1,closing:2,closed:3},no=1e4,oo=1e3,fe={closed:"closed",errored:"errored",joined:"joined",joining:"joining",leaving:"leaving"},Re={close:"phx_close",error:"phx_error",join:"phx_join",reply:"phx_reply",leave:"phx_leave"},Yi={longpoll:"longpoll",websocket:"websocket"},ao={complete:4},jt=class{RefEvent(){!this.refEvent||this.channel.off(this.refEvent)}=lo=class{constructor(t,e,i){this.state=fe.closed,this.topic=t,this.params=gt(e||{}),this.socket=i,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new jt(this,Re.join,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new sr(this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError(()=>this.rejoinTimer.reset())),this.stateChangeRefs.push(this.socket.onOpen(),this.joinPush.receive("ok",,this.joinPush.receive("error",()=>{this.state=fe.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.onClose(()=>{this.rejoinTimer.reset(),this.socket.hasLogger()&&this.socket.log("channel",`close ${this.topic} ${this.joinRef()}`),this.state=fe.closed,this.socket.remove(this)}),this.onError(s=>{this.socket.hasLogger()&&this.socket.log("channel",`error ${this.topic}`,s),this.isJoining()&&this.joinPush.reset(),this.state=fe.errored,this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.joinPush.receive("timeout",()=>{this.socket.hasLogger()&&this.socket.log("channel",`timeout ${this.topic} (${this.joinRef()})`,this.joinPush.timeout),new jt(this,Re.leave,gt({}),this.timeout).send(),this.state=fe.errored,this.joinPush.reset(),this.socket.isConnected()&&this.rejoinTimer.scheduleTimeout()}),this.on(Re.reply,}Error(t){return this.on(Re.error,e=>t(e))}ff(t,e){this.bindings=this.bindings.filter(i=>!(i.event===t&&(typeof e=="undefined"||e===i.ref)))}ave(t=this.timeout){this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=fe.leaving;let e=()=>{this.socket.hasLogger()&&this.socket.log("channel",`leave ${this.topic}`),this.trigger(Re.close,"leave")},i=new jt(this,Re.leave,gt({}),t);return i.receive("ok",()=>e()).receive("timeout",()=>e()),i.send(),this.canPush()||i.trigger("ok",{}),i}sMember(t,e,i,s){return this.topic!==t?!1:s&&s!==this.joinRef()?(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:t,event:e,payload:i,joinRef:s}),!1):!0}joinRef(){return this.joinPush.ref}losed(){return this.state===fe.closed}isErrored(){return this.state===fe.errored}isJoined(){return this.state===fe.joined}isJoining(){return this.state===fe.joining},Xt=class{static request(t,e,i,s,r,n,o){if(Ze.XDomainRequest){let a=new Ze.XDomainRequest;return this.xdomainRequest(a,t,e,s,r,n,o)}else{let a=new Ze.XMLHttpRequest;return this.xhrRequest(a,t,e,i,s,r,n,o)}}tatic xhrRequest(t,e,i,s,r,n,o,a){return t.open(e,i,!0),t.timeout=n,t.setRequestHeader("Content-Type",s),t.onerror=t.onreadystatechange=()=>{if(t.readyState===ao.complete&&a){let l=this.parseJSON(t.responseText);a(l)}},o&&(t.ontimeout=o),t.send(r),t}static parseJSON(t){if(!t||t==="")return null;try{return JSON.parse(t)}catch(e){return console&&console.log("failed to parse JSON response",t),null}}static serialize(t,e){let i=[];for(var s in t){if(!Object.prototype.hasOwnProperty.call(t,s))continue;let r=e?`${e}[${s}]`:s,n=t[s];typeof n=="object"?i.push(this.serialize(n,r)):i.push(encodeURIComponent(r)+"="+encodeURIComponent(n))}return i.join("&")}static appendParams(t,e){if(Object.keys(e).length===0)return t;let i=t.match(/\?/)?"&":"?";return`${t}${i}${this.serialize(e)}`}},ho=_t=class{constructor(t){this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.reqs=new Set,this.awaitingBatchAck=!1,this.currentBatch=null,this.currentBatchTimer=null,this.batchBuffer=[],this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(t),this.readyState=Ce.connecting,setTimeout(()=>this.poll(),0)}normalizeEndpointoseAndRetry(t,e,i){this.close(t,e,i),this.readyState=Ce.connecting}ll(){this.ajax("GET","application/json",null,()=>this.ontimeout(),t=>{if(t){var{status:e,token:i,messages:s}=t;this.token=i}else e=0;switch(e){case 200:s.forEach(,this.poll();break;case 204:this.poll();break;case 410:this.readyState=Ce.open,this.onopen({}),this.poll();break;case 403:this.onerror(403),this.close(1008,"forbidden",!1);break;case 0:case 500:this.onerror(500),this.closeAndRetry(1011,"internal server error",500);break;default:throw new Error(`unhandled poll status ${e}`)}})}send(t){typeof t!="string"&&(t=ho(t)),this.currentBatch?this.currentBatch.push(t):this.awaitingBatchAck?this.batchBuffer.push(t):(this.currentBatch=[t],this.currentBatchTimer=setTimeout(0))}batchSend(t){this.awaitingBatchAck=!0,this.ajax("POST","application/x-ndjson",t.join(`
`),()=>this.onerror("timeout"),e=>{this.awaitingBatchAck=!1,!e||e.status!==200?(this.onerror(e&&e.status),this.closeAndRetry(1011,"internal server error",!1)):this.batchBuffer.length>0&&(this.batchSend(this.batchBuffer),this.batchBuffer=[])})}close(t,e,i){for(let r of this.reqs)r.abort();this.readyState=Ce.closed;let s=Object.assign({code:1e3,reason:void 0,wasClean:!0},{code:t,reason:e,wasClean:i});this.batchBuffer=[],clearTimeout(this.currentBatchTimer),this.currentBatchTimer=null,typeof CloseEvent!="undefined"?this.onclose(new CloseEvent("close",s)):this.onclose(s)}ajax(t,e,i,s,r){let n,o=n=Xt.request(t,this.endpointURL(),e,i,this.timeout,o,,this.reqs.add(n)}};var Wt={HEADER_LENGTH:1,META_LENGTH:4,KINDS:{push:0,reply:1,broadcast:2},encodedecodebinaryEncodebinaryDecodedecodePush(t,e,i){let s=e.getUint8(1),r=e.getUint8(2),n=e.getUint8(3),o=this.HEADER_LENGTH+this.META_LENGTH-1,a=i.decode(t.slice(o,o+s));o=o+s;let l=i.decode(t.slice(o,o+r));o=o+r;let c=i.decode(t.slice(o,o+n));o=o+n;let p=t.slice(o,t.byteLength);return{join_ref:a,ref:null,topic:l,event:c,payload:p}},decodeReply(t,e,i){let s=e.getUint8(1),r=e.getUint8(2),n=e.getUint8(3),o=e.getUint8(4),a=this.HEADER_LENGTH+this.META_LENGTH,l=i.decode(t.slice(a,a+s));a=a+s;let c=i.decode(t.slice(a,a+r));a=a+r;let p=i.decode(t.slice(a,a+n));a=a+n;let g=i.decode(t.slice(a,a+o));a=a+o;let _=t.slice(a,t.byteLength),S={status:g,response:_};return{join_ref:l,ref:c,topic:p,event:Re.reply,payload:S}},decodeBroadcast(t,e,i){let s=e.getUint8(1),r=e.getUint8(2),n=this.HEADER_LENGTH+2,o=i.decode(t.slice(n,n+s));n=n+s;let a=i.decode(t.slice(n,n+r));n=n+r;let l=t.slice(n,t.byteLength);return{join_ref:null,ref:null,topic:o,event:a,payload:l}}},rr=class{constructor(t,e={}){this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=e.timeout||no,this.transport=e.transport||Ze.WebSocket||_t,this.longPollFallbackMs=e.longPollFallbackMs,this.fallbackTimer=null,this.sessionStore=e.sessionStorage||Ze.sessionStorage,this.establishedConnections=0,this.defaultEncoder=Wt.encode.bind(Wt),this.defaultDecoder=Wt.decode.bind(Wt),this.closeWasClean=!1,this.binaryType=e.binaryType||"arraybuffer",this.connectClock=1,this.transport!==_t?(this.encode=e.encode||this.defaultEncoder,this.decode=e.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder);let i=null;vt&&vt.addEventListener&&(vt.addEventListener("pagehide",,vt.addEventListener("pageshow",),this.heartbeatIntervalMs=e.heartbeatIntervalMs||3e4,this.rejoinAfterMs=this.reconnectAfterMs=this.logger=e.logger||null,!this.logger&&e.debug&&(this.logger=(s,r,n)=>{console.log(`${s}: ${r}`,n)}),this.longpollerTimeout=e.longpollerTimeout||2e4,this.params=gt(e.params||{}),this.endPoint=`${t}/${Yi.websocket}`,this.vsn=e.vsn||ro,this.heartbeatTimeoutTimer=null,this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new sr(this.reconnectAfterMs)}eplaceTransport(t){this.connectClock++,this.closeWasClean=!0,clearTimeout(this.fallbackTimer),this.reconnectTimer.reset(),this.conn&&(this.conn.close(),this.conn=null),this.transport=t}ndPointURL(){let t=Xt.appendParams(Xt.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return t.charAt(0)!=="/"?t:t.charAt(1)==="/"?`${this.protocol()}:${t}`:`${this.protocol()}://${location.host}${t}`}disconnect(t,e,i){this.connectClock++,this.closeWasClean=!0,clearTimeout(this.fallbackTimer),this.reconnectTimer.reset(),this.teardown(t,e,i)}connect(t){t&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=gt(t)),!this.conn&&(this.longPollFallbackMs&&this.transport!==_t?this.connectWithFallback(_t,this.longPollFallbackMs):this.transportConnect())}logOpen(t){let e=this.makeRef();return this.stateChangeCallbacks.open.push([e,t]),e}onClose(t){let e=this.makeRef();return this.stateChangeCallbacks.close.push([e,t]),e}onError(t){let e=this.makeRef();return this.stateChangeCallbacks.error.push([e,t]),e}ansportConnect(){this.connectClock++,this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=()=>this.onConnOpen(),this.conn.onerror=t=>this.onConnError(t),this.conn.onmessage=t=>this.onConnMessage(t),this.conn.onclose=t=>this.onConnClose(t)}nnectWithFallback(t,e=2500){clearTimeout(this.fallbackTimer);let i=!1,s=!0,r,n,o=a=>{this.log("transport",`falling back to ${t.name}...`,a),this.off([r,n]),s=!1,this.storeSession("phx:longpoll","true"),this.replaceTransport(t),this.transportConnect()};if(this.getSession("phx:longpoll"))return o("memorized");this.fallbackTimer=setTimeout(o,e),n=this.onError(a=>{this.log("transport","error",a),s&&!i&&(clearTimeout(this.fallbackTimer),o(a))}),this.onOpen(()=>{if(i=!0,!s)return console.log("transport",`established ${t.name} fallback`);clearTimeout(this.fallbackTimer),this.fallbackTimer=setTimeout(o,e),this.ping(a=>{this.log("transport","connected to primary after",a),clearTimeout(this.fallbackTimer)})}),this.transportConnect()}nConnOpen(){this.hasLogger()&&this.log("transport",`${this.transport.name} connected to ${this.endPointURL()}`),this.closeWasClean=!1,this.establishedConnections++,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach(}heartbeatTimeout(){this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.triggerChanError(),this.closeWasClean=!1,this.teardown(()=>this.reconnectTimer.scheduleTimeout(),oo,"heartbeat timeout"))}itForBufferDone(t,e=1){if(e===5||!this.conn||!this.conn.bufferedAmount){t();return}setTimeout(()=>{this.waitForBufferDone(t,e+1)},150*e)}waitForSocketClosed(t,e=1){if(e===5||!this.conn||this.conn.readyState===Ce.closed){t();return}setTimeout(150*e)}onConnClose(t){let e=t&&t.code;this.hasLogger()&&this.log("transport","close",t),this.triggerChanError(),this.clearHeartbeats(),!this.closeWasClean&&e!==1e3&&this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(}riggerChanError(){this.channels.forEach(t=>{t.isErrored()||t.isLeaving()||t.isClosed()||t.trigger(Re.error)})}(t){for(let e in this.stateChangeCallbacks)this.stateChangeCallbacks[e]=this.stateChangeCallbacks[e].filter(([i])=>t.indexOf(i)===-1)}channel(t,e={}){let i=new lo(t,e,this);return this.channels.push(i),i}nnMessage(t){this.decode(t.data,e=>{let{topic:i,event:s,payload:r,ref:n,join_ref:o}=e;n&&n===this.pendingHeartbeatRef&&(this.clearHeartbeats(),this.pendingHeartbeatRef=null,this.heartbeatTimer=setTimeout(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)),this.hasLogger()&&this.log("receive",`${r.status||""} ${i} ${s} ${n&&"("+n+")"||""}`,r);for(let a=0;a<this.channels.length;a++){let l=this.channels[a];!l.isMember(i,s,r,o)||l.trigger(s,r,n,o)}for(let a=0;a<this.stateChangeCallbacks.message.length;a++){let[,l]=this.stateChangeCallbacks.message[a];l(e)}})};var nr=(t,e,i)=>{e.forEach(s=>{t.addEventListener(s,i)})},or=(t,e,i)=>{e.forEach(},Qi=class{constructor(e){this.defaults={idle:1e4,events:["mousemove","scroll","keydown","mousedown","touchstart"],onIdle:null,onActive:null,onHide:null,onShow:null,keepTracking:!0,startAtIdle:!1,recurIdleCall:!1},this.throwOnBadKey(Object.keys(e),Object.keys(this.defaults)),this.settings=Object.assign({},this.defaults,e),this.visibilityEvents=["visibilitychange","webkitvisibilitychange","mozvisibilitychange","msvisibilitychange"],this.clearTimeout=null,this.reset(),this.stopListener=this.idlenessEventsHandler=i=>{this.idle&&(this.idle=!1,this.settings.onActive&&this.settings.onActive.call()),this.resetTimeout(this.settings)},this.visibilityEventsHandler=i=>{document.hidden||document.webkitHidden||document.mozHidden||document.msHidden?this.visible&&(this.visible=!1,this.settings.onHide&&this.settings.onHide.call()):this.visible||(this.visible=!0,this.settings.onShow&&this.settings.onShow.call())}}resetTimeout(e,i=this.settings.keepTracking){this.clearTimeout&&(this.clearTimeout(),this.clearTimeout=null),i&&this.timeout(this.settings)}timeout(e){var i=this.settings.recurIdleCall?{set:setInterval.bind(window),clear:clearInterval.bind(window)}:{set:setTimeout.bind(window),clear:clearTimeout.bind(window)},s=i.set(bind(this),this.settings.idle);this.clearTimeout=()=>i.clear(s)}start(){return window.addEventListener("idle:stop",this.stopListener),this.timeout(this.settings),nr(window,this.settings.events,this.idlenessEventsHandler),(this.settings.onShow||this.settings.onHide)&&nr(document,this.visibilityEvents,this.visibilityEventsHandler),this}stop(){return window.removeEventListener("idle:stop",this.stopListener),or(window,this.settings.events,this.idlenessEventsHandler),this.resetTimeout(this.settings,!1),(this.settings.onShow||this.settings.onHide)&&or(document,this.visibilityEvents,this.visibilityEventsHandler),this}reset({idle:e=this.settings.startAtIdle,visible:i=!this.settings.startAtIdle}={}){return this.idle=e,this.visible=i,this}throwOnBadKey(e,i){e.forEach(function(s){if(!i.includes(s))throw`set: Unknown key ${s}`})}set(e){this.throwOnBadKey(Object.keys(e),Object.keys(this.defaults)),this.settings=Object.assign(this.settings,e)}};var Zi=class extends rr{constructor(e,i={}){super(e,i);this.preventReconnect=!1,this.shouldReconnect=!1,this.idleMonitor=new Qi({idle:3*60*1e3,onActive:this.onShowOrActive.bind(this),onShow:this.onShowOrActive.bind(this)}),this.idleMonitor.start()}onShowOrActive(){this.shouldReconnect&&this.idleMonitor.visible&&!this.idleMonitor.idle&&(this.shouldReconnect=!1,this.reconnectTimer.scheduleTimeout())}onConnClose(e){this.hasLogger()&&this.log("transport","close",e),this.triggerChanError(),this.clearHeartbeats(),this.preventReconnect||(this.closeWasClean?this.idleMonitor.stop():this.scheduleReconnect()),this.stateChangeCallbacks.close.forEach(([,i])=>i(e))}scheduleReconnect(){!this.idleMonitor.idle&&this.idleMonitor.visible?this.reconnectTimer.scheduleTimeout():(this.reconnectTimer.reset(),this.shouldReconnect=!0)}};var F="search",Jt="consecutive-reloads",ar=10,lr=5e3,hr=1e4,cr=3e4,Kt=["phx-click-loading","phx-change-loading","phx-submit-loading","phx-keydown-loading","phx-keyup-loading","phx-blur-loading","phx-focus-loading"],pe="data-phx-component";var dr="track-static";var ne="data-phx-ref",ke="data-phx-ref-src",qt="track-uploads",me="data-phx-upload-ref",et="data-phx-preflighted-refs",ur="data-phx-done-refs",es="drop-target",bt="data-phx-active-refs",tt=`${F}:live-file:updated`,zt="data-phx-skip",Gt="data-phx-id",ts="data-phx-prune",is="page-loading",ss="phx-connected",it="phx-loading",Yt="phx-no-feedback",Et="phx-error",rs="phx-client-error",Qt="phx-server-error",We="data-phx-parent-id",Zt="data-phx-main",Le="data-dfd-root-id",St="viewport-top",yt="viewport-bottom",fr="trigger-action",Je="feedback-for",wt="phx-has-focused",pr=["text","textarea","number","email","password","search","tel","url","date","time","datetime-local","color","range"],ei=["checkbox","radio"],st="phx-has-submitted",ge="data-dfd-view",Ie=`[${ge}]`,ns="data-phx-sticky",He="data-phx-static",ti="data-phx-readonly",At="data-phx-disabled",Tt="disable-with",Ct="data-phx-disable-with-restore",rt="hook",mr="debounce",gr="throttle",nt="update",kt="stream",ot="data-phx-stream",vr="key",Ee="phxPrivate",os="auto-recover",xt="phx:live-socket:debug",ii="phx:live-socket:profiling",si="phx:live-socket:latency-sim",_r="progress",as="mounted",br=1,Er=200,Sr="dfd-",yr=3e4;var at="debounce-trigger",Pt="throttled",ls="debounce-prev-key",wr={debounce:300,throttle:300},Rt="d",Se="s",ri="r",he="c",hs="e",cs="r",ds="t",Ar="p",us="stream";var ni=class{constructor(e,i,s){this.liveSocket=s,this.entry=e,this.offset=0,this.chunkSize=i,this.chunkTimer=null,this.errored=!1,this.uploadChannel=s.channel(`lvu:${e.ref}`,{token:e.metadata()})}error(e){this.errored||(this.uploadChannel.leave(),this.errored=!0,clearTimeout(this.chunkTimer),this.entry.error(e))}upload(){this.uploadChannel.onError(e=>this.error(e)),this.uploadChannel.join().receive("ok",.receive("error",e=>this.error(e))}isDoneeadNextChunk(){let e=new window.FileReader,i=this.entry.file.slice(this.offset,this.chunkSize+this.offset);e.onload=s=>{if(s.target.error===null)this.offset+=s.target.result.byteLength,this.pushChunk(s.target.result);else return ee("Read error: "+s.target.error)},e.readAsArrayBuffer(i)}pushChunk(e){!this.uploadChannel.isJoined()||this.uploadChannel.push("chunk",e).receive("ok",()=>{this.entry.progress(this.offset/this.entry.file.size*100),this.isDone()||(this.chunkTimer=setTimeout(()=>this.readNextChunk(),this.liveSocket.getLatencySim()||0))}).receive("error",}};var ee=ve=t=>{let e=typeof t;return e==="number"||e==="string"&&/^(0|[1-9]\d*)$/.test(t)};function Tr(t=document){let e=new Set,i=t.querySelectorAll("*[id]");for(let s=0,r=i.length;s<r;s++)e.has(i[s].id)?console.error(`Multiple IDs detected: ${i[s].id}. Ensure unique element ids.`):e.add(i[s].id)}var Cr=(t,e,i,s)=>{t.liveSocket.isDebugEnabled()&&console.log(`${t.id} ${e}: ${i} - `,s)},oi=t=>typeof t=="function"?t:function(){return t},lt=ht=(t,e,i)=>{do{if(t.matches(`[${e}]`)&&!t.disabled)return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1&&!(i&&i.isSameNode(t)||t.matches(Ie)));return null},ct=t=>t!==null&&typeof t=="object"&&!(t instanceof Array),kr=fs=ye=(t,e)=>t&&e(t),xr=function(t,e,i,s){t.forEach(r=>{new ni(r,i.config.chunk_size,s).upload()})};var Pr={canPushStatedropLocalupdateLocal(t,e,i,s,r){let n=this.getLocal(t,e,i),o=this.localKey(e,i),a=n===null?s:r(n);return t.setItem(o,JSON.stringify(a)),a},getLocal(t,e,i){return JSON.parse(t.getItem(this.localKey(e,i)))},updateCurrentState(t){!this.canPushState()||history.replaceState(t(history.state||{}),"",window.location.href)},pushState(t,e,i){if(this.canPushState()){if(i!==window.location.href){if(e.type=="redirect"&&e.scroll){let r=history.state||{};r.scroll=e.scroll,history.replaceState(r,"",window.location.href)}delete e.scroll,history[t+"State"](e,"",i||null);let s=this.getHashTargetEl(window.location.hash);s?s.scrollIntoView():e.type==="redirect"&&window.scroll(0,0)}}else this.redirect(i)},setCookiegetCookie(t){return document.cookie.replace(new RegExp(`(?:(?:^|.*;s*)${t}s*=s*([^;]*).*$)|^.*$`),"$1")},redirect(t,e){e&&Pr.setCookie("__phoenix_flash__",e+"; max-age=60000; path=/"),window.location=t},localKeygetHashTargetEl(t){let e=t.toString().substring(1);if(e!=="")return document.getElementById(e)||document.querySelector(`a[name="${e}"]`)}},xe=Pr;var _e={byId(t){return document.getElementById(t)||ee(`no id found for ${t}`)},removeClass(t,e){t.classList.remove(e),t.classList.length===0&&t.removeAttribute("class")},all(t,e,i){if(!t)return[];let s=Array.from(t.querySelectorAll(e));return i?s.forEach(i):s},childNodeLengthisUploadInput(t){return t.type==="file"&&t.getAttribute(me)!==null},isAutoUploadfindUploadInputs(t){return this.all(t,`input[type="file"][${me}]`)},findComponentNodeList(t,e){return this.filterWithinSameLiveView(this.all(t,`[${pe}="${e}"]`),t)},isPhxDestroyed(t){return!!(t.id&&_e.private(t,"destroyed"))},wantsNewTab(t){let e=t.ctrlKey||t.shiftKey||t.metaKey||t.button&&t.button===1,i=t.target instanceof HTMLAnchorElement&&t.target.hasAttribute("download"),s=t.target.hasAttribute("target")&&t.target.getAttribute("target").toLowerCase()==="_blank";return e||s||i},isUnloadableFormSubmit(t){return t.target&&t.target.getAttribute("method")==="dialog"||t.submitter&&t.submitter.getAttribute("formmethod")==="dialog"?!1:!t.defaultPrevented&&!this.wantsNewTab(t)},isNewPageClick(t,e){let i=t.target instanceof HTMLAnchorElement?t.target.getAttribute("href"):null,s;if(t.defaultPrevented||i===null||this.wantsNewTab(t)||i.startsWith("mailto:")||i.startsWith("tel:")||t.target.isContentEditable)return!1;try{s=new URL(i)}catch(r){try{s=new URL(i,e)}catch(n){return!0}}return s.host===e.host&&s.protocol===e.protocol&&s.pathname===e.pathname&&s.search===e.search?s.hash===""&&!s.href.endsWith("#"):s.protocol.startsWith("http")},markPhxChildDestroyed(t){this.isPhxChild(t)&&t.setAttribute(ge,""),this.putPrivate(t,"destroyed",!0)},findPhxChildrenInFragment(t,e){let i=document.createElement("template");return i.innerHTML=t,this.findPhxChildren(i.content,e)},isIgnored(t,e){return(t.getAttribute(e)||t.getAttribute("data-phx-update"))==="ignore"},isPhxUpdate(t,e,i){return t.getAttribute&&i.indexOf(t.getAttribute(e))>=0},findPhxSticky(t){return this.all(t,`[${ns}]`)},findPhxChildren(t,e){return this.all(t,`${Ie}[${We}="${e}"]`)},findParentCIDs(t,e){let i=new Set(e),s=e.reduce((r,n)=>{let o=`[${pe}="${n}"] [${pe}]`;return this.filterWithinSameLiveView(this.all(t,o),t).map(.forEach(a=>r.delete(a)),r},i);return s.size===0?new Set(e):s},filterWithinSameLiveView(t,e){return e.querySelector(Ie)?t.filter(i=>this.withinSameLiveView(i,e)):t},withinSameLiveView(t,e){for(;t=t.parentNode;){if(t.isSameNode(e))return!0;if(t.getAttribute(ge)!==null)return!1}},privatedeletePrivateputPrivateupdatePrivate(t,e,i,s){let r=this.private(t,e);r===void 0?this.putPrivate(t,e,s(i)):this.putPrivate(t,e,s(r))},copyPrivatesputTitle(t){let e=document.querySelector("title");if(e){let{prefix:i,suffix:s}=e.dataset;document.title=`${i||""}${t}${s||""}`}else document.title=t},debounce(t,e,i,s,r,n,o,a){let l=t.getAttribute(i),c=t.getAttribute(r);l===""&&(l=s),c===""&&(c=n);let p=l||c;switch(p){case null:return a();case"blur":this.once(t,"debounce-blur")&&t.addEventListener("blur",;return;default:let g=parseInt(p),_=()=>c?this.deletePrivate(t,Pt):a(),S=this.incCycle(t,at,_);if(isNaN(g))return ee(`invalid throttle/debounce value: ${p}`);if(c){let w=!1;if(e.type==="keydown"){let M=this.private(t,ls);this.putPrivate(t,ls,e.key),w=M!==e.key}if(!w&&this.private(t,Pt))return!1;a(),this.putPrivate(t,Pt,!0),setTimeout(g)}else setTimeout(()=>{o()&&this.triggerCycle(t,at,S)},g);let b=t.form;b&&this.once(b,"bind-debounce")&&b.addEventListener("submit",()=>{Array.from(new FormData(b).entries(),([w])=>{let M=b.querySelector(`[name="${w}"]`);this.incCycle(M,at),this.deletePrivate(M,Pt)})}),this.once(t,"bind-debounce")&&t.addEventListener("blur",()=>this.triggerCycle(t,at))}},triggerCycle(t,e,i){let[s,r]=this.private(t,e);i||(i=s),i===s&&(this.incCycle(t,e),r())},once(t,e){return this.private(t,e)===!0?!1:(this.putPrivate(t,e,!0),!0)},incCycle(t,e,i=function(){}){let[s]=this.private(t,e)||[0,i];return s++,this.putPrivate(t,e,[s,i]),s},maybeAddPrivateHooks(t,e,i){t.hasAttribute&&(t.hasAttribute(e)||t.hasAttribute(i))&&t.setAttribute("data-phx-hook","Phoenix.InfiniteScroll")},maybeHideFeedback(t,e,i){let s=[];if(e.forEach(r=>{this.private(r,wt)||this.private(r,st)||(s.push(r.name),r.name.endsWith("[]")&&s.push(r.name.slice(0,-2)))}),s.length>0){let r=s.map(.join(", ");_e.all(t,r,n=>n.classList.add(Yt))}},resetForm(t,e){Array.from(t.elements).forEach(i=>{let s=`[${e}="${i.id}"],
                   [${e}="${i.name}"],
                   [${e}="${i.name.replace(/\[\]$/,"")}"]`;this.deletePrivate(i,wt),this.deletePrivate(i,st),this.all(document,s,})},showError(t,e){(t.id||t.name)&&this.all(t.form,`[${e}="${t.id}"], [${e}="${t.name}"]`,},isPhxChildisPhxSticky(t){return t.getAttribute&&t.getAttribute(ns)!==null},firstPhxChild(t){return this.isPhxChild(t)?t:this.all(t,`[${We}]`)[0]},dispatchEvent(t,e,i={}){let r={bubbles:i.bubbles===void 0?!0:!!i.bubbles,cancelable:!0,detail:i.detail||{}},n=e==="click"?new MouseEvent("click",r):new CustomEvent(e,r);t.dispatchEvent(n)},cloneNode(t,e){if(typeof e=="undefined")return t.cloneNode(!0);{let i=t.cloneNode(!1);return i.innerHTML=e,i}},mergeAttrs(t,e,i={}){let s=i.exclude||[],r=i.isIgnored,n=e.attributes;for(let a=n.length-1;a>=0;a--){let l=n[a].name;s.indexOf(l)<0&&t.setAttribute(l,e.getAttribute(l))}let o=t.attributes;for(let a=o.length-1;a>=0;a--){let l=o[a].name;r?l.startsWith("data-")&&!e.hasAttribute(l)&&![ne,ke].includes(l)&&t.removeAttribute(l):e.hasAttribute(l)||t.removeAttribute(l)}},mergeFocusedInput(t,e){t instanceof HTMLSelectElement||_e.mergeAttrs(t,e,{exclude:["value"]}),e.readOnly?t.setAttribute("readonly",!0):t.removeAttribute("readonly")},hasSelectionRange(t){return t.setSelectionRange&&(t.type==="text"||t.type==="textarea")},restoreFocus(t,e,i){if(!_e.isTextualInput(t))return;let s=t.matches(":focus");t.readOnly&&t.blur(),s||t.focus(),this.hasSelectionRange(t)&&t.setSelectionRange(e,i)},isFormInput(t){return/^(?:input|select|textarea)$/i.test(t.tagName)&&t.type!=="button"},syncAttrsToProps(t){t instanceof HTMLInputElement&&ei.indexOf(t.type.toLocaleLowerCase())>=0&&(t.checked=t.getAttribute("checked")!==null)},isTextualInputisNowTriggerFormExternal(t,e){return t.getAttribute&&t.getAttribute(e)!==null},syncPendingRef(t,e,i){let s=t.getAttribute(ne);if(s===null)return!0;let r=t.getAttribute(ke);return _e.isFormInput(t)||t.getAttribute(i)!==null?(_e.isUploadInput(t)&&_e.mergeAttrs(t,e,{isIgnored:!0}),_e.putPrivate(t,ne,e),!1):(Kt.forEach(,e.setAttribute(ne,s),e.setAttribute(ke,r),!0)},cleanChildNodes(t,e){if(_e.isPhxUpdate(t,e,["append","prepend"])){let i=[];t.childNodes.forEach(s=>{s.id||(s.nodeType===Node.TEXT_NODE&&s.nodeValue.trim()===""||ee(`only HTML element tags with an id are allowed inside containers with phx-update.

removing illegal node: "${(s.outerHTML||s.nodeValue).trim()}"

`),i.push(s))}),i.forEach(s=>s.remove())}},replaceRootContainer(t,e,i){let s=new Set(["id",ge,He,Zt,Le]);if(t.tagName.toLowerCase()===e.toLowerCase())return Array.from(t.attributes).filter(.forEach(,Object.keys(i).filter(.forEach(r=>t.setAttribute(r,i[r])),t;{let r=document.createElement(e);return Object.keys(i).forEach(,s.forEach(,r.innerHTML=t.innerHTML,t.replaceWith(r),r}},getSticky(t,e,i){let s=(_e.private(t,"sticky")||[]).find(([r])=>e===r);if(s){let[r,n,o]=s;return o}else return typeof i=="function"?i():i},deleteSticky(t,e){this.updatePrivate(t,"sticky",[],i=>i.filter()},putSticky(t,e,i){let s=i(t);this.updatePrivate(t,"sticky",[],r=>{let n=r.findIndex(;return n>=0?r[n]=[e,i,s]:r.push([e,i,s]),r})},applyStickyOperations(t){let e=_e.private(t,"sticky");!e||e.forEach(}},f=_e;var dt=class{static isActive(e,i){let s=i._phxRef===void 0,n=e.getAttribute(bt).split(",").indexOf(X.genFileRef(i))>=0;return i.size>0&&(s||n)}static isPreflighted(e,i){return e.getAttribute(et).split(",").indexOf(X.genFileRef(i))>=0&&this.isActive(e,i)}constructor(e,i,s){this.ref=X.genFileRef(i),this.fileEl=e,this.file=i,this.view=s,this.meta=null,this._isCancelled=!1,this._isDone=!1,this._progress=0,this._lastProgressSent=-1,this._onDone=function(){},this._onElUpdated=this.onElUpdated.bind(this),this.fileEl.addEventListener(tt,this._onElUpdated)}metadata(){return this.meta}progress(e){this._progress=Math.floor(e),this._progress>this._lastProgressSent&&(this._progress>=100?(this._progress=100,this._lastProgressSent=100,this._isDone=!0,this.view.pushFileProgress(this.fileEl,this.ref,100,()=>{X.untrackFile(this.fileEl,this.file),this._onDone()})):(this._lastProgressSent=this._progress,this.view.pushFileProgress(this.fileEl,this.ref,this._progress)))}sDone(){return this._isDone}error(e="failed"){this.fileEl.removeEventListener(tt,this._onElUpdated),this.view.pushFileProgress(this.fileEl,this.ref,{error:e}),f.isAutoUpload(this.fileEl)||X.clearFiles(this.fileEl)}onDone(e){this._onDone=()=>{this.fileEl.removeEventListener(tt,this._onElUpdated),e()}}onElUpdated(){this.fileEl.getAttribute(bt).split(",").indexOf(this.ref)===-1&&this.cancel()}toPreflightPayload(){return{last_modified:this.file.lastModified,name:this.file.name,relative_path:this.file.webkitRelativePath,size:this.file.size,type:this.file.type,ref:this.ref,meta:typeof this.file.meta=="function"?this.file.meta():void 0}}uploader(e){if(this.meta.uploader){let i=e[this.meta.uploader]||ee(`no uploader configured for ${this.meta.uploader}`);return{name:this.meta.uploader,callback:i}}else return{name:"channel",callback:xr}}zipPostFlight(e){this.meta=e.entries[this.ref],this.meta||ee(`no preflight upload response returned with ref ${this.ref}`,{input:this.fileEl,response:e})}};var co=0,X=class{static genFileRef(e){let i=e._phxRef;return i!==void 0?i:(e._phxRef=(co++).toString(),e._phxRef)}static getEntryDataURL(e,i,s){let r=this.activeFiles(e).find(;s(URL.createObjectURL(r))}static hasUploadsInProgress(e){let i=0;return f.findUploadInputs(e).forEach(s=>{s.getAttribute(et)!==s.getAttribute(ur)&&i++}),i>0}static serializeUploads(e){let i=this.activeFiles(e),s={};return i.forEach(r=>{let n={path:e.name},o=e.getAttribute(me);s[o]=s[o]||[],n.ref=this.genFileRef(r),n.last_modified=r.lastModified,n.name=r.name||n.ref,n.relative_path=r.webkitRelativePath,n.type=r.type,n.size=r.size,typeof r.meta=="function"&&(n.meta=r.meta()),s[o].push(n)}),s}static clearFiles(e){e.value=null,e.removeAttribute(me),f.putPrivate(e,"files",[])}static untrackFile(e,i){f.putPrivate(e,"files",f.private(e,"files").filter(s=>!Object.is(s,i)))}static trackFiles(e,i,s){if(e.getAttribute("multiple")!==null){let r=i.filter(n=>!this.activeFiles(e).find(o=>Object.is(o,n)));f.putPrivate(e,"files",this.activeFiles(e).concat(r)),e.value=null}else s&&s.files.length>0&&(e.files=s.files),f.putPrivate(e,"files",i)}static activeFileInputs(e){let i=f.findUploadInputs(e);return Array.from(i).filter(s=>s.files&&this.activeFiles(s).length>0)}static activeFiles(e){return(f.private(e,"files")||[]).filter(i=>dt.isActive(e,i))}static inputsAwaitingPreflight(e){let i=f.findUploadInputs(e);return Array.from(i).filter(}static filesAwaitingPreflight(e){return this.activeFiles(e).filter(}constructor(e,i,s){this.view=i,this.onComplete=s,this._entries=Array.from(X.filesAwaitingPreflight(e)||[]).map(,this.numEntriesInProgress=this._entries.length}entries(){return this._entries}initAdapterUpload(e,i,s){this._entries=this._entries.map(n=>(n.zipPostFlight(e),n.onDone(()=>{this.numEntriesInProgress--,this.numEntriesInProgress===0&&this.onComplete()}),n));let r=this._entries.reduce((n,o)=>{if(!o.meta)return n;let{name:a,callback:l}=o.uploader(s.uploaders);return n[a]=n[a]||{callback:l,entries:[]},n[a].entries.push(o),n},{});for(let n in r){let{callback:o,entries:a}=r[n];o(a,i,e,s)}}};var uo={focusMain(){let t=document.querySelector("main h1, main, h1");if(t){let e=t.tabIndex;t.tabIndex=-1,t.focus(),t.tabIndex=e}},anyOf(t,e){return e.find(},isFocusable(t,e){return t instanceof HTMLAnchorElement&&t.rel!=="ignore"||t instanceof HTMLAreaElement&&t.href!==void 0||!t.disabled&&this.anyOf(t,[HTMLInputElement,HTMLSelectElement,HTMLTextAreaElement,HTMLButtonElement])||t instanceof HTMLIFrameElement||t.tabIndex>0||!e&&t.getAttribute("tabindex")!==null&&t.getAttribute("aria-hidden")!=="true"},attemptFocus(t,e){if(this.isFocusable(t,e))try{t.focus()}catch(i){}return!!document.activeElement&&document.activeElement.isSameNode(t)},focusFirstInteractive(t){let e=t.firstElementChild;for(;e;){if(this.attemptFocus(e,!0)||this.focusFirstInteractive(e,!0))return!0;e=e.nextElementSibling}},focusFirst(t){let e=t.firstElementChild;for(;e;){if(this.attemptFocus(e)||this.focusFirst(e))return!0;e=e.nextElementSibling}},focusLast(t){let e=t.lastElementChild;for(;e;){if(this.attemptFocus(e)||this.focusLast(e))return!0;e=e.previousElementSibling}}},Me=uo;var Rr={LiveFileUpload:{activeRefs(){return this.el.getAttribute(bt)},preflightedRefs(){return this.el.getAttribute(et)},mountedupdated(){let t=this.preflightedRefs();this.preflightedWas!==t&&(this.preflightedWas=t,t===""&&this.__view.cancelSubmit(this.el.form)),this.activeRefs()===""&&(this.el.value=null),this.el.dispatchEvent(new CustomEvent(tt))}},LiveImgPreview:{mounted(){this.ref=this.el.getAttribute("data-phx-entry-ref"),this.inputEl=document.getElementById(this.el.getAttribute(me)),X.getEntryDataURL(this.inputEl,this.ref,},destroyed,FocusWrap:{mounted(){this.focusStart=this.el.firstElementChild,this.focusEnd=this.el.lastElementChild,this.focusStart.addEventListener("focus",()=>Me.focusLast(this.el)),this.focusEnd.addEventListener("focus",,this.el.addEventListener(`${F}:show-end`,,window.getComputedStyle(this.el).display!=="none"&&Me.focusFirst(this.el)}}},Lr=ps=fo=t=>{let e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.top<=ps()},po=t=>{let e=t.getBoundingClientRect();return e.right>=0&&e.left>=0&&e.bottom<=ps()},Ir=t=>{let e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.top<=ps()};Rr.InfiniteScroll={mounted(){let t=Lr(),e=!1,i=500,s=null,r=this.throttle(i,(a,l)=>{s=this.liveSocket.execJSHookPush(this.el,a,{id:l.id,_overran:!0},}),n=this.throttle(i,(a,l)=>{s=()=>l.scrollIntoView({block:"start"}),this.liveSocket.execJSHookPush(this.el,a,{id:l.id},()=>{s=null,Ir(l)||l.scrollIntoView({block:"start"})})}),o=this.throttle(i,(a,l)=>{s=this.liveSocket.execJSHookPush(this.el,a,{id:l.id},()=>{s=null,Ir(l)||l.scrollIntoView({block:"end"})})});this.onScroll=a=>{let l=Lr();if(s)return t=l,s();let c=this.el.getBoundingClientRect(),p=this.el.getAttribute(this.liveSocket.binding("viewport-top")),g=this.el.getAttribute(this.liveSocket.binding("viewport-bottom")),_=this.el.lastElementChild,S=this.el.firstElementChild,b=l<t,w=l>t;b&&p&&!e&&c.top>=0?(e=!0,r(p,S)):w&&e&&c.top<=0&&(e=!1),p&&b&&fo(S)?n(p,S):g&&w&&po(_)&&o(g,_),t=l},window.addEventListener("scroll",this.onScroll)},destroyed(){window.removeEventListener("scroll",this.onScroll)},throttle(t,e){let i=0,s;return(...r)=>{let n=Date.now(),o=t-(n-i);o<=0||o>t?(s&&(clearTimeout(s),s=null),i=n,e(...r)):s||(s=setTimeout(()=>{i=Date.now(),s=null,e(...r)},o))}}};var Dr=Rr;var ai=class{constructor(e,i,s){let r=new Set,n=new Set([...i.children].map(a=>a.id)),o=[];Array.from(e.children).forEach(a=>{if(a.id&&(r.add(a.id),n.has(a.id))){let l=a.previousElementSibling&&a.previousElementSibling.id;o.push({elementId:a.id,previousElementId:l})}}),this.containerId=i.id,this.updateType=s,this.elementsToModify=o,this.elementIdsToAdd=[...n].filter(}perform(){let e=f.byId(this.containerId);this.elementsToModify.forEach(i=>{i.previousElementId?ye(document.getElementById(i.previousElementId),s=>{ye(document.getElementById(i.elementId),r=>{r.previousElementSibling&&r.previousElementSibling.id==s.id||s.insertAdjacentElement("afterend",r)})}):ye(document.getElementById(i.elementId),s=>{s.previousElementSibling==null||e.insertAdjacentElement("afterbegin",s)})}),this.updateType=="prepend"&&this.elementIdsToAdd.reverse().forEach(i=>{ye(document.getElementById(i),s=>e.insertAdjacentElement("afterbegin",s))})}};var Or=11;function mo(t,e){var i=e.attributes,s,r,n,o,a;if(!(e.nodeType===Or||t.nodeType===Or)){for(var l=i.length-1;l>=0;l--)s=i[l],r=s.name,n=s.namespaceURI,o=s.value,n?(r=s.localName||r,a=t.getAttributeNS(n,r),a!==o&&(s.prefix==="xmlns"&&(r=s.name),t.setAttributeNS(n,r,o))):(a=t.getAttribute(r),a!==o&&t.setAttribute(r,o));for(var c=t.attributes,p=c.length-1;p>=0;p--)s=c[p],r=s.name,n=s.namespaceURI,n?(r=s.localName||r,e.hasAttributeNS(n,r)||t.removeAttributeNS(n,r)):e.hasAttribute(r)||t.removeAttribute(r)}}var li,go="http://www.w3.org/1999/xhtml",ce=typeof document=="undefined"?void 0:document,vo=!!ce&&"content"in ce.createElement("template"),_o=!!ce&&ce.createRange&&"createContextualFragment"in ce.createRange();tion hi(t,e){var i=t.nodeName,s=e.nodeName,r,n;return i===s?!0:(r=i.charCodeAt(0),n=s.charCodeAt(0),r<=90&&n>=97?i===s.toUpperCase():n<=90&&r>=97?s===i.toUpperCase():!1)} Hr={OPTION:function(t,e){var i=t.parentNode;if(i){var s=i.nodeName.toUpperCase();s==="OPTGROUP"&&(i=i.parentNode,s=i&&i.nodeName.toUpperCase()),s==="SELECT"&&!i.hasAttribute("multiple")&&(t.hasAttribute("selected")&&!e.selected&&(t.setAttribute("selected","selected"),t.removeAttribute("selected")),i.selectedIndex=-1)}ms(t,e,"selected")},INPUT:TEXTAREA:SELECT:function(t,e){if(!e.hasAttribute("multiple")){for(var i=-1,s=0,r=t.firstChild,n,o;r;)if(o=r.nodeName&&r.nodeName.toUpperCase(),o==="OPTGROUP")n=r,r=n.firstChild;else{if(o==="OPTION"){if(r.hasAttribute("selected")){i=s;break}s++}r=r.nextSibling,!r&&n&&(r=n.nextSibling,n=null)}t.selectedIndex=i}}},Lt=1,Mr=11,Nr=3,Fr=8;nction Co(t){return function(i,s,r){if(r||(r={}),typeof s=="string")if(i.nodeName==="#document"||i.nodeName==="HTML"||i.nodeName==="BODY"){var n=s;s=ce.createElement("html"),s.innerHTML=n}else s=yo(s);else s.nodeType===Mr&&(s=s.firstElementChild);var o=r.getNodeKey||To,a=r.onBeforeNodeAdded||Ne,l=r.onNodeAdded||Ne,c=r.onBeforeElUpdated||Ne,p=r.onElUpdated||Ne,g=r.onBeforeNodeDiscarded||Ne,_=r.onNodeDiscarded||Ne,S=r.onBeforeElChildrenUpdated||Ne,b=r.skipFromChildren||Ne,w=r.addChild||M=r.childrenOnly===!0,P=Object.create(null),R=[];;nction O(x,k,j){var L=o(k);L&&delete P[L],!(!j&&(c(x,k)===!1||(t(x,k),p(x),S(x,k)===!1)))&&(x.nodeName!=="TEXTAREA"?ie(x,k):Hr.TEXTAREA(x,k))}function ie(x,k){var j=b(x,k),L=k.firstChild,B=x.firstChild,Oe,ue,Te,Ve,se;e:for(;L;){for(Ve=L.nextSibling,Oe=o(L);!j&&B;){if(Te=B.nextSibling,L.isSameNode&&L.isSameNode(B)){L=Ve,B=Te;continue e}ue=o(B);var Qe=B.nodeType,be=void 0;if(Qe===L.nodeType&&(Qe===Lt?(Oe?Oe!==ue&&((se=P[Oe])?Te===se?be=!1:(x.insertBefore(se,B),ue?W(ue):m(B,x,!0),B=se,ue=o(B)):be=!1):ue&&(be=!1),be=be!==!1&&hi(B,L),be&&O(B,L)):(Qe===Nr||Qe==Fr)&&(be=!0,B.nodeValue!==L.nodeValue&&(B.nodeValue=L.nodeValue))),be){L=Ve,B=Te;continue e}ue?W(ue):m(B,x,!0),B=Te}if(Oe&&(se=P[Oe])&&hi(se,L))j||w(x,se),O(se,L);else{var pt=a(L);pt!==!1&&(pt&&(L=pt),L.actualize&&(L=L.actualize(x.ownerDocument||ce)),w(x,L),Q(L))}L=Ve,B=Te}J(x,B,ue);var Ft=Hr[x.nodeName];Ft&&Ft(x,k)}var $=i,le=$.nodeType,Ye=s.nodeType;if(!M){if(le===Lt)Ye===Lt?hi(i,s)||(_(i),$=Ao(i,wo(s.nodeName,s.namespaceURI))):$=s;else if(le===Nr||le===Fr){if(Ye===le)return $.nodeValue!==s.nodeValue&&($.nodeValue=s.nodeValue),$;$=s}}if($===s)_(i);else{if(s.isSameNode&&s.isSameNode($))return;if(O($,s,M),R)for(var ft=0,Bi=R.length;ft<Bi;ft++){var Be=P[R[ft]];Be&&m(Be,Be.parentNode,!1)}}return!M&&$!==i&&i.parentNode&&($.actualize&&($=$.actualize(i.ownerDocument||ce)),i.parentNode.replaceChild($,i)),$}}var ko=Co(mo),gs=ko;var Ke=class{static patchEl(e,i,s){gs(e,i,{childrenOnly:!1,onBeforeElUpdated:(r,n)=>{if(s&&s.isSameNode(r)&&f.isFormInput(r))return f.mergeFocusedInput(r,n),!1}})}constructor(e,i,s,r,n,o){this.view=e,this.liveSocket=e.liveSocket,this.container=i,this.id=s,this.rootID=e.root.id,this.html=r,this.streams=n,this.streamInserts={},this.targetCID=o,this.cidPatch=ve(this.targetCID),this.pendingRemoves=[],this.phxRemove=this.liveSocket.binding("remove"),this.callbacks={beforeadded:[],beforeupdated:[],beforephxChildAdded:[],afteradded:[],afterupdated:[],afterdiscarded:[],afterphxChildAdded:[],aftertransitionsDiscarded:[]}}before(e,i){this.callbacks[`before${e}`].push(i)}after(e,i){this.callbacks[`after${e}`].push(i)}trackBefore(e,...i){this.callbacks[`before${e}`].forEach(s=>s(...i))}trackAfter(e,...i){this.callbacks[`after${e}`].forEach(}markPrunableContentForRemoval(){let e=this.liveSocket.binding(nt);f.all(this.container,`[${e}=${kt}]`,,f.all(this.container,`[${e}=append] > *, [${e}=prepend] > *`,}perform(e){let{view:i,liveSocket:s,container:r,html:n}=this,o=this.isCIDPatch()?this.targetCIDContainer(n):r;if(this.isCIDPatch()&&!o)return;let a=s.getActiveElement(),{selectionStart:l,selectionEnd:c}=a&&f.hasSelectionRange(a)?a:{},p=s.binding(nt),g=s.binding(Je),_=s.binding(Tt),S=s.binding(St),b=s.binding(yt),w=s.binding(fr),M=[],P=[],R=[],W=[],U=null;return this.trackBefore("added",r),this.trackBefore("updated",r,r),s.time("morphdom",()=>{this.streams.forEach(([m,T,Q,J])=>{Object.entries(T).forEach(([O,[ie,$]])=>{this.streamInserts[O]={ref:m,streamAt:ie,limit:$,resetKept:!1}}),J!==void 0&&f.all(r,`[${ot}="${m}"]`,O=>{T[O.id]?this.streamInserts[O.id].resetKept=!0:this.removeStreamChildElement(O)}),Q.forEach(O=>{let ie=r.querySelector(`[id="${O}"]`);ie&&this.removeStreamChildElement(ie)})}),gs(o,n,{childrenOnly:o.getAttribute(pe)===null,getNodeKey:m=>f.isPhxDestroyed(m)?null:e?m.id:m.id||m.getAttribute&&m.getAttribute(Gt),skipFromChildren:addChild:(m,T)=>{let{ref:Q,streamAt:J,limit:O}=this.getStreamInsert(T);if(Q===void 0)return m.appendChild(T);if(f.putSticky(T,ot,le=>le.setAttribute(ot,Q)),J===0)m.insertAdjacentElement("afterbegin",T);else if(J===-1)m.appendChild(T);else if(J>0){let le=Array.from(m.children)[J];m.insertBefore(T,le)}let ie=O!==null&&Array.from(m.children),$=[];O&&O<0&&ie.length>O*-1?$=ie.slice(0,ie.length+O):O&&O>=0&&ie.length>O&&($=ie.slice(O)),$.forEach(le=>{this.streamInserts[le.id]||this.removeStreamChildElement(le)})},onBeforeNodeAdded:m=>(f.maybeAddPrivateHooks(m,S,b),this.trackBefore("added",m),m),onNodeAdded:m=>{m.getAttribute&&this.maybeReOrderStream(m),m instanceof HTMLImageElement&&m.srcset?m.srcset=m.srcset:m instanceof HTMLVideoElement&&m.autoplay&&m.play(),f.isNowTriggerFormExternal(m,w)&&(U=m),m.getAttribute&&m.getAttribute("name")&&f.isFormInput(m)&&P.push(m),(f.isPhxChild(m)&&i.ownsElement(m)||f.isPhxSticky(m)&&i.ownsElement(m.parentNode))&&this.trackAfter("phxChildAdded",m),M.push(m)},onBeforeElChildrenUpdated:(m,T)=>{if(m.getAttribute(p)===kt){let Q=Array.from(T.children).map(J=>J.id);Array.from(m.children).filter(J=>{let{resetKept:O}=this.getStreamInsert(J);return O}).forEach(J=>{this.streamInserts[J.id].streamAt=Q.indexOf(J.id)})}},onNodeDiscarded:m=>this.onNodeDiscarded(m),onBeforeNodeDiscarded:m=>m.getAttribute&&m.getAttribute(ts)!==null?!0:!(m.parentElement!==null&&m.id&&f.isPhxUpdate(m.parentElement,p,[kt,"append","prepend"])||this.maybePendingRemove(m)||this.skipCIDSibling(m)),onElUpdated:m=>{f.isNowTriggerFormExternal(m,w)&&(U=m),R.push(m),this.maybeReOrderStream(m)},onBeforeElUpdated:(m,T)=>{if(f.maybeAddPrivateHooks(T,S,b),f.cleanChildNodes(T,p),this.skipCIDSibling(T)||f.isPhxSticky(m))return!1;if(f.isIgnored(m,p)||m.form&&m.form.isSameNode(U))return this.trackBefore("updated",m,T),f.mergeAttrs(m,T,{isIgnored:!0}),R.push(m),f.applyStickyOperations(m),!1;if(m.type==="number"&&m.validity&&m.validity.badInput)return!1;if(!f.syncPendingRef(m,T,_))return f.isUploadInput(m)&&(this.trackBefore("updated",m,T),R.push(m)),f.applyStickyOperations(m),!1;if(f.isPhxChild(T)){let J=m.getAttribute(ge);return f.mergeAttrs(m,T,{exclude:[He]}),J!==""&&m.setAttribute(ge,J),m.setAttribute(Le,this.rootID),f.applyStickyOperations(m),!1}return f.copyPrivates(T,m),a&&m.isSameNode(a)&&f.isFormInput(m)&&m.type!=="hidden"?(this.trackBefore("updated",m,T),f.mergeFocusedInput(m,T),f.syncAttrsToProps(m),R.push(m),f.applyStickyOperations(m),P.push(m),!1):(f.isPhxUpdate(T,p,["append","prepend"])&&W.push(new ai(m,T,T.getAttribute(p))),f.syncAttrsToProps(T),f.applyStickyOperations(T),T.getAttribute("name")&&f.isFormInput(T)&&P.push(T),this.trackBefore("updated",m,T),!0)}})}),s.isDebugEnabled()&&Tr(s.doofinderMount),W.length>0&&s.time("post-morph append/prepend restoration",,f.maybeHideFeedback(o,P,g),s.silenceEvents(,f.dispatchEvent(document,`${F}:update`),M.forEach(m=>this.trackAfter("added",m)),R.forEach(,this.transitionPendingRemoves(),U&&(s.unload(),Object.getPrototypeOf(U).submit.call(U)),!0}onNodeDiscarded(e){(f.isPhxChild(e)||f.isPhxSticky(e))&&this.liveSocket.destroyViewByEl(e),this.trackAfter("discarded",e)}maybePendingRemove(e){return e.getAttribute&&e.getAttribute(this.phxRemove)!==null?(this.pendingRemoves.push(e),!0):!1}removeStreamChildElement(e){this.maybePendingRemove(e)||(e.remove(),this.onNodeDiscarded(e))}getStreamInsert(e){return(e.id?this.streamInserts[e.id]:{})||{}}maybeReOrderStream(e){let{ref:i,streamAt:s,limit:r}=this.getStreamInsert(e);if(s!==void 0){if(f.putSticky(e,ot,n=>n.setAttribute(ot,i)),s===0)e.parentElement.insertBefore(e,e.parentElement.firstElementChild);else if(s>0){let n=Array.from(e.parentElement.children),o=n.indexOf(e);if(s>=n.length-1)e.parentElement.appendChild(e);else{let a=n[s];o>s?e.parentElement.insertBefore(e,a):e.parentElement.insertBefore(e,a.nextElementSibling)}}}}transitionPendingRemoves(){let{pendingRemoves:e,liveSocket:i}=this;e.length>0&&(i.transitionRemoves(e),i.requestDOMUpdate(()=>{e.forEach(s=>{let r=f.firstPhxChild(s);r&&i.destroyViewByEl(r),s.remove()}),this.trackAfter("transitionsDiscarded",e)}))}isCIDPatch(){return this.cidPatch}skipCIDSiblingargetCIDContainer(e){if(!this.isCIDPatch())return;let[i,...s]=f.findComponentNodeList(this.container,this.targetCID);return s.length===0&&f.childNodeLength(e)===1?i:i&&i.parentNode}indexOf;var xo=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),Po=new Set(["'",'"']),Ur=(t,e,i)=>{let s=0,r=!1,n,o,a,l,c,p,g=t.match(/^(\s*(?:<!--.*?-->\s*)*)<([^\s\/>]+)/);if(g===null)throw new Error(`malformed html ${t}`);for(s=g[0].length,n=g[1],a=g[2],l=s,s;s<t.length&&t.charAt(s)!==">";s++)if(t.charAt(s)==="="){let b=t.slice(s-3,s)===" id";s++;let w=t.charAt(s);if(Po.has(w)){let M=s;for(s++,s;s<t.length&&t.charAt(s)!==w;s++);if(b){c=t.slice(M+1,s);break}}}let _=t.length-1;for(r=!1;_>=n.length+a.length;){let b=t.charAt(_);if(r)b==="-"&&t.slice(_-3,_)==="<!-"?(r=!1,_-=4):_-=1;else if(b===">"&&t.slice(_-2,_)==="--")r=!0,_-=3;else{if(b===">")break;_-=1}}o=t.slice(_+1,t.length);let S=Object.keys(e).map(b=>e[b]===!0?b:`${b}="${e[b]}"`).join(" ");if(i){let b=c?` id="${c}"`:"";xo.has(a)?p=`<${a}${b}${S===""?"":" "}${S}/>`:p=`<${a}${b}${S===""?"":" "}${S}></${a}>`}else{let b=t.slice(l,_+1);p=`<${a}${S===""?"":" "}${S}${b}`}return[p,n,o]},It=class{static extract(e){let{[cs]:i,[hs]:s,[ds]:r}=e;return delete e[cs],delete e[hs],delete e[ds],{diff:e,title:r,reply:i||null,events:s||[]}}constructor(e,i){this.viewId=e,this.rendered={},this.magicId=0,this.mergeDiff(i)}parentViewId(){return this.viewId}toString(e){let[i,s]=this.recursiveToString(this.rendered,this.rendered[he],e,!0,{});return[i,s]}recursiveToString(e,i=e[he],s,r,n){s=s?new Set(s):null;let o={buffer:"",components:i,onlyCids:s,streams:new Set};return this.toOutputBuffer(e,null,o,r,n),[o.buffer,o.streams]}componentCIDs(e){return Object.keys(e[he]||{}).map(}isComponentOnlyDiff(e){return e[he]?Object.keys(e).length===1:!1}ergeDiff(e){let i=e[he],s={};if(delete e[he],this.rendered=this.mutableMerge(this.rendered,e),this.rendered[he]=this.rendered[he]||{},i){let r=this.rendered[he];for(let n in i)i[n]=this.cachedFindComponent(n,i[n],r,i,s);for(let n in i)r[n]=i[n];e[he]=i}}cachedFindComponent(e,i,s,r,n){if(n[e])return n[e];{let o,a,l=i[Se];if(ve(l)){let c;l>0?c=this.cachedFindComponent(l,r[l],s,r,n):c=s[-l],a=c[Se],o=this.cloneMerge(c,i,!0),o[Se]=a}else o=i[Se]!==void 0||s[e]===void 0?i:this.cloneMerge(s[e],i,!1);return n[e]=o,o}}mutableMerge(e,i){return i[Se]!==void 0?i:(this.doMutableMerge(e,i),e)}doMutableMerge(e,i){for(let s in i){let r=i[s],n=e[s];ct(r)&&r[Se]===void 0&&ct(n)?this.doMutableMerge(n,r):e[s]=r}e[ri]&&(e.newRender=!0)}cloneMerge(e,i,s){let r=H(H({},e),i);for(let n in r){let o=i[n],a=e[n];ct(o)&&o[Se]===void 0&&ct(a)&&(r[n]=this.cloneMerge(a,o,s))}return s?(delete r.magicId,delete r.newRender):e[ri]&&(r.newRender=!0),r}componentToString(e){let[i,s]=this.recursiveCIDToString(this.rendered[he],e,null),[r,n,o]=Ur(i,{});return[r,s]}pruneCIDs(e){e.forEach(}get(){return this.rendered}isNewFingerprint(e={}){return!!e[Se]}templateStatic(e,i){return typeof e=="number"?i[e]:e}nextMagicID(){return this.magicId++,`${this.parentViewId()}-${this.magicId}`}toOutputBuffer(e,i,s,r,n={}){if(e[Rt])return this.comprehensionToBuffer(e,i,s);let{[Se]:o}=e;o=this.templateStatic(o,i);let a=e[ri],l=s.buffer;a&&(s.buffer=""),r&&a&&!e.magicId&&(e.newRender=!0,e.magicId=this.nextMagicID()),s.buffer+=o[0];for(let c=1;c<o.length;c++)this.dynamicToBuffer(e[c-1],i,s,r),s.buffer+=o[c];if(a){let c=!1,p;r||Object.keys(n).length>0?(c=!e.newRender,p=H({[Gt]:e.magicId},n)):p=n,c&&(p[zt]=!0);let[g,_,S]=Ur(s.buffer,p,c);e.newRender=!1,s.buffer=l+_+g+S}}comprehensionToBuffer(e,i,s){let{[Rt]:r,[Se]:n,[us]:o}=e,[a,l,c,p]=o||[null,{},[],null];n=this.templateStatic(n,i);let g=i||e[Ar];for(let _=0;_<r.length;_++){let S=r[_];s.buffer+=n[0];for(let b=1;b<n.length;b++){let w=!1;this.dynamicToBuffer(S[b-1],g,s,w),s.buffer+=n[b]}}o!==void 0&&(e[Rt].length>0||c.length>0||p)&&(delete e[us],e[Rt]=[],s.streams.add(o))}dynamicToBuffer(e,i,s,r){if(typeof e=="number"){let[n,o]=this.recursiveCIDToString(s.components,e,s.onlyCids);s.buffer+=n,s.streams=new Set([...s.streams,...o])}else ct(e)?this.toOutputBuffer(e,i,s,r,{}):s.buffer+=e}recursiveCIDToString(e,i,s){let r=e[i]||ee(`no component for CID ${i}`,e),n={[pe]:i},o=s&&!s.has(i);r.newRender=!o,r.magicId=`${this.parentViewId()}-c-${i}`;let a=!0,[l,c]=this.recursiveToString(r,e,s,a,n);return[l,c]}};var Ro=1,Fe=class{static makeIDnstructor(e,i,s){this.__view=e,this.liveSocket=e.liveSocket,this.__callbacks=s,this.__listeners=new Set,this.__isDisconnected=!1,this.el=i,this.el.phxHookId=this.constructor.makeID();for(let r in this.__callbacks)this[r]=this.__callbacks[r]}__mounted(){this.mounted&&this.mounted()}__updated(){this.updated&&this.updated()}__beforeUpdate(){this.beforeUpdate&&this.beforeUpdate()}_reconnected(){this.__isDisconnected&&(this.__isDisconnected=!1,this.reconnected&&this.reconnected())}ushEvent(e,i={},s=function(){}){return this.__view.pushHookEvent(this.el,null,e,i,s)}pushEventTo(e,i,s={},r=function(){}){return this.__view.withinTargets(e,(n,o)=>n.pushHookEvent(this.el,o,i,s,r))}handleEvent(e,i){let s=(r,n)=>n?e:i(r.detail);return this.liveSocket.doofinderMount.addEventListener(`${F}:${e}`,s),this.__listeners.add(s),s}removeHandleEvent(e){let i=e(null,!0);this.liveSocket.doofinderMount.removeEventListener(`${F}:${i}`,e),this.__listeners.delete(e)}ploadTo(e,i,s){return this.__view.withinTargets(e,};var ci=null,Lo={exec(t,e,i,s,r){let[n,o]=r||[null,{callback:r&&r.callback}];(e.charAt(0)==="["?JSON.parse(e):[[n,o]]).forEach(([l,c])=>{l===n&&o.data&&(c.data=Object.assign(c.data||{},o.data),c.callback=c.callback||o.callback),this.filterToEls(s,c).forEach(p=>{this[`exec_${l}`](t,e,i,s,p,c)})})},isVisible(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length>0)},isInViewportexec_exec(t,e,i,s,r,[n,o]){(o?f.all(document,o):[s]).forEach(l=>{let c=l.getAttribute(n);if(!c)throw new Error(`expected ${n} to contain JS command on "${o}"`);i.liveSocket.execJS(l,c,t)})},exec_dispatch(t,e,i,s,r,{to:n,event:o,detail:a,bubbles:l}){a=a||{},a.dispatcher=s,f.dispatchEvent(r,o,{detail:a,bubbles:l})},exec_push(t,e,i,s,r,n){let{event:o,data:a,target:l,page_loading:c,loading:p,value:g,dispatcher:_,callback:S}=n,b={loading:p,value:g,target:l,page_loading:!!c},w=t==="change"&&_?_:s,M=l||w.getAttribute(i.binding("target"))||w;i.withinTargets(M,(P,R)=>{if(!!P.isConnected())if(t==="change"){let{newCid:W,_target:U}=n;U=U||(f.isFormInput(s)?s.name:void 0),U&&(b._target=U),P.pushInput(s,R,W,o||e,b,S)}else if(t==="submit"){let{submitter:W}=n;P.submitForm(s,R,o||e,W,b,S)}else P.pushEvent(t,s,R,o||e,a,b,S)})},exec_navigate(t,e,i,s,r,{href:n,replace:o}){i.liveSocket.historyRedirect(n,o?"replace":"push")},exec_patch(t,e,i,s,r,{href:n,replace:o}){i.liveSocket.pushHistoryPatch(n,o?"replace":"push",s)},exec_focus(t,e,i,s,r){window.requestAnimationFrame(()=>Me.attemptFocus(r))},exec_focus_first(t,e,i,s,r){window.requestAnimationFrame(()=>Me.focusFirstInteractive(r)||Me.focusFirst(r))},exec_push_focus(t,e,i,s,r){window.requestAnimationFrame(()=>ci=r||s)},exec_pop_focus(t,e,i,s,r){window.requestAnimationFrame(},exec_add_class(t,e,i,s,r,{names:n,transition:o,time:a}){this.addOrRemoveClasses(r,n,[],o,a,i)},exec_remove_class(t,e,i,s,r,{names:n,transition:o,time:a}){this.addOrRemoveClasses(r,[],n,o,a,i)},exec_transition(t,e,i,s,r,{time:n,transition:o}){this.addOrRemoveClasses(r,[],[],o,n,i)},exec_toggle(t,e,i,s,r,{display:n,ins:o,outs:a,time:l}){this.toggle(t,i,r,n,o,a,l)},exec_show(t,e,i,s,r,{display:n,transition:o,time:a}){this.show(t,i,r,n,o,a)},exec_hide(t,e,i,s,r,{display:n,transition:o,time:a}){this.hide(t,i,r,n,o,a)},exec_set_attr(t,e,i,s,r,{attr:[n,o]}){this.setOrRemoveAttrs(r,[[n,o]],[])},exec_remove_attr(t,e,i,s,r,{attr:n}){this.setOrRemoveAttrs(r,[],[n])},show(t,e,i,s,r,n){this.isVisible(i)||this.toggle(t,e,i,s,r,null,n)},hide(t,e,i,s,r,n){this.isVisible(i)&&this.toggle(t,e,i,s,null,r,n)},toggle(t,e,i,s,r,n,o){let[a,l,c]=r||[[],[],[]],[p,g,_]=n||[[],[],[]];if(a.length>0||p.length>0)if(this.isVisible(i)){let S=()=>{this.addOrRemoveClasses(i,g,a.concat(l).concat(c)),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(i,p,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(i,_,g))})};i.dispatchEvent(new Event(`${F}:hide-start`)),e.transition(o,S,()=>{this.addOrRemoveClasses(i,[],p.concat(_)),f.putSticky(i,"toggle",b=>b.style.display="none"),i.dispatchEvent(new Event(`${F}:hide-end`))})}else{if(t==="remove")return;let S=()=>{this.addOrRemoveClasses(i,l,p.concat(g).concat(_));let b=s||this.defaultDisplay(i);f.putSticky(i,"toggle",w=>w.style.display=b),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(i,a,[]),window.requestAnimationFrame(()=>this.addOrRemoveClasses(i,c,l))})};i.dispatchEvent(new Event(`${F}:show-start`)),e.transition(o,S,()=>{this.addOrRemoveClasses(i,[],a.concat(c)),i.dispatchEvent(new Event(`${F}:show-end`))})}else this.isVisible(i)?window.requestAnimationFrame(()=>{i.dispatchEvent(new Event(`${F}:hide-start`)),f.putSticky(i,"toggle",,i.dispatchEvent(new Event(`${F}:hide-end`))}):window.requestAnimationFrame(()=>{i.dispatchEvent(new Event(`${F}:show-start`));let S=s||this.defaultDisplay(i);f.putSticky(i,"toggle",,i.dispatchEvent(new Event(`${F}:show-end`))})},addOrRemoveClasses(t,e,i,s,r,n){let[o,a,l]=s||[[],[],[]];if(o.length>0){let c=()=>{this.addOrRemoveClasses(t,a,[].concat(o).concat(l)),window.requestAnimationFrame(()=>{this.addOrRemoveClasses(t,o,[]),window.requestAnimationFrame(})},p=()=>this.addOrRemoveClasses(t,e.concat(l),i.concat(o).concat(a));return n.transition(r,c,p)}window.requestAnimationFrame(()=>{let[c,p]=f.getSticky(t,"classes",[[],[]]),g=e.filter(w=>c.indexOf(w)<0&&!t.classList.contains(w)),_=i.filter(w=>p.indexOf(w)<0&&t.classList.contains(w)),S=c.filter(w=>i.indexOf(w)<0).concat(g),b=p.filter(.concat(_);f.putSticky(t,"classes",w=>(w.classList.remove(...b),w.classList.add(...S),[S,b]))})},setOrRemoveAttrs(t,e,i){let[s,r]=f.getSticky(t,"attrs",[[],[]]),n=e.map(.concat(i),o=s.filter(.concat(e),a=r.filter(l=>!n.includes(l)).concat(i);f.putSticky(t,"attrs",l=>(a.forEach(c=>l.removeAttribute(c)),o.forEach(,[o,a]))},hasAllClassesisToggledOut(t,e){return!this.isVisible(t)||this.hasAllClasses(t,e)},filterToEls(t,{to:e}){return e?f.all(document,e):[t]},defaultDisplay(t){return{tr:"table-row",td:"table-cell"}[t.tagName.toLowerCase()]||"block"}},de=Lo;var di=(t,e,i=[])=>{let l=e,{submitter:s}=l,r=er(l,["submitter"]),n=new FormData(t);s&&s.hasAttribute("name")&&s.form&&s.form===t&&n.append(s.name,s.value);let o=[];n.forEach((c,p,g)=>{c instanceof File&&o.push(p)}),o.forEach(c=>n.delete(c));let a=new URLSearchParams;for(let[c,p]of n.entries())(i.length===0||i.indexOf(c)>=0)&&a.append(c,p);for(let c in r)a.append(c,r[c]);return a.toString()},ut=class{constructor(e,i,s,r,n){this.isDead=!1,this.liveSocket=i,this.flash=r,this.parent=s,this.root=s?s.root:this,this.el=e,this.id=this.el.id,this.ref=0,this.childJoins=0,this.loaderTimer=null,this.pendingDiffs=[],this.pruningCIDs=[],this.redirect=!1,this.href=null,this.joinCount=this.parent?this.parent.joinCount-1:0,this.joinPending=!0,this.destroyed=!1,this.joinCallback=this.stopCallback=function(){},this.pendingJoinOps=this.parent?null:[],this.viewHooks={},this.uploaders={},this.formSubmits=[],this.children=this.parent?null:{},this.root.children[this.id]={},this.channel=this.liveSocket.channel(`lv:${this.id}`,()=>{let o=this.href&&this.expandURL(this.href);return{redirect:this.redirect?o:void 0,url:this.redirect?void 0:o||void 0,params:this.connectParams(n),session:this.getSession(),static:this.getStatic(),flash:this.flash}})}Main(){return this.el.hasAttribute(Zt)}connectParams(e){let i=this.liveSocket.params(this.el),s=f.all(document,`[${this.binding(dr)}]`).map(.filter(;return s.length>0&&(i._track_static=s),i._mounts=this.joinCount,i._live_referer=e,i}isConnected(){return this.channel.canPush()}getSession(){return this.el.getAttribute(ge)}getStatic(){let e=this.el.getAttribute(He);return e===""?null:e}destroy(e=function(){}){this.destroyAllChildren(),this.destroyed=!0,delete this.root.children[this.id],this.parent&&delete this.root.children[this.parent.id][this.id],clearTimeout(this.loaderTimer);let i=()=>{e();for(let s in this.viewHooks)this.destroyHook(this.viewHooks[s])};f.markPhxChildDestroyed(this.el),this.log("destroyed",()=>["the child has been removed from the parent"]),this.channel.leave().receive("ok",i).receive("error",i).receive("timeout",i)}setContainerClasses(...e){this.el.classList.remove(ss,it,Et,rs,Qt),this.el.classList.add(...e)}showLoader(e){if(clearTimeout(this.loaderTimer),e)this.loaderTimer=setTimeout(()=>this.showLoader(),e);else{for(let i in this.viewHooks)this.viewHooks[i].__disconnected();this.setContainerClasses(it)}}execAll(e){f.all(this.el,`[${e}]`,i=>this.liveSocket.execJS(i,i.getAttribute(e)))}hideLoader(){clearTimeout(this.loaderTimer),this.setContainerClasses(ss),this.execAll(this.binding("connected"))}ansition(e,i,s=function(){}){this.liveSocket.transition(e,i,s)}withinTargets(e,i){if(e instanceof HTMLElement||e instanceof SVGElement)return this.liveSocket.owner(e,s=>i(s,e));if(ve(e))f.findComponentNodeList(this.el,e).length===0?ee(`no component found matching phx-target of ${e}`):i(this,parseInt(e));else{let s=Array.from(document.querySelectorAll(e));s.length===0&&ee(`nothing found matching the phx-target selector "${e}"`),s.forEach(r=>this.liveSocket.owner(r,n=>i(n,r)))}}applyDiff(e,i,s){this.log(e,()=>["",lt(i)]);let{diff:r,reply:n,events:o,title:a}=It.extract(i);s({diff:r,reply:n,events:o}),a&&window.requestAnimationFrame(}onJoin(e){let{rendered:i,container:s}=e;if(s){let[r,n]=s;this.el=f.replaceRootContainer(this.el,r,n)}this.childJoins=0,this.joinPending=!0,this.flash=null,xe.dropLocal(this.liveSocket.localStorage,window.location.pathname,Jt),this.applyDiff("mount",i,({diff:r,events:n})=>{this.rendered=new It(this.id,r);let[o,a]=this.renderContainer(null,"join");this.dropPendingRefs();let l=this.formsForRecovery(o);this.joinCount++,l.length>0?l.forEach(([c,p,g],_)=>{this.pushFormRecovery(c,g,S=>{_===l.length-1&&this.onJoinComplete(S,o,a,n)})}):this.onJoinComplete(e,o,a,n)})}dropPendingRefs(){f.all(document,`[${ke}="${this.id}"][${ne}]`,}onJoinComplete({live_patch:e},i,s,r){if(this.joinCount>1||this.parent&&!this.parent.isJoinPending())return this.applyJoinPatch(e,i,s,r);f.findPhxChildrenInFragment(i,this.id).filter(o=>{let a=o.id&&this.el.querySelector(`[id="${o.id}"]`),l=a&&a.getAttribute(He);return l&&o.setAttribute(He,l),this.joinChild(o)}).length===0?this.parent?(this.root.pendingJoinOps.push([this,()=>this.applyJoinPatch(e,i,s,r)]),this.parent.ackJoin(this)):(this.onAllChildJoinsComplete(),this.applyJoinPatch(e,i,s,r)):this.root.pendingJoinOps.push([this,)}attachTrueDocEl(){this.el=f.byId(this.id),this.el.setAttribute(Le,this.root.id)}execNewMounted(){let e=this.binding(St),i=this.binding(yt);f.all(this.el,`[${e}], [${i}]`,s=>{f.maybeAddPrivateHooks(s,e,i),this.maybeAddNewHook(s)}),f.all(this.el,`[${this.binding(rt)}], [data-phx-${rt}]`,,f.all(this.el,`[${this.binding(as)}]`,s=>this.maybeMounted(s))}applyJoinPatch(e,i,s,r){this.attachTrueDocEl();let n=new Ke(this,this.el,this.id,i,s,null);if(n.markPrunableContentForRemoval(),this.performPatch(n,!1,!0),this.joinNewChildren(),this.execNewMounted(),this.joinPending=!1,this.liveSocket.dispatchEvents(r),this.applyPendingUpdates(),e){let{kind:o,to:a}=e;this.liveSocket.historyPatch(a,o)}this.hideLoader(),this.joinCount>1&&this.triggerReconnected(),this.stopCallback()}triggerBeforeUpdateHook(e,i){this.liveSocket.triggerDOM("onBeforeElUpdated",[e,i]);let s=this.getHook(e),r=s&&f.isIgnored(e,this.binding(nt));if(s&&!e.isEqualNode(i)&&!(r&&kr(e.dataset,i.dataset)))return s.__beforeUpdate(),s}maybeMounted(e){let i=e.getAttribute(this.binding(as)),s=i&&f.private(e,"mounted");i&&!s&&(this.liveSocket.execJS(e,i),f.putPrivate(e,"mounted",!0))}maybeAddNewHook(e,i){let s=this.addHook(e);s&&s.__mounted()}performPatch(e,i,s=!1){let r=[],n=!1,o=new Set;return e.after("added",a=>{this.liveSocket.triggerDOM("onNodeAdded",[a]);let l=this.binding(St),c=this.binding(yt);f.maybeAddPrivateHooks(a,l,c),this.maybeAddNewHook(a),a.getAttribute&&this.maybeMounted(a)}),e.after("phxChildAdded",a=>{f.isPhxSticky(a)?this.liveSocket.joinRootViews():n=!0}),e.before("updated",(a,l)=>{this.triggerBeforeUpdateHook(a,l)&&o.add(a.id)}),e.after("updated",a=>{o.has(a.id)&&this.getHook(a).__updated()}),e.after("discarded",,e.after("transitionsDiscarded",,e.perform(s),this.afterElementsRemoved(r,i),n}afterElementsRemoved(e,i){let s=[];e.forEach(r=>{let n=f.all(r,`[${pe}]`),o=f.all(r,`[${this.binding(rt)}]`);n.concat(r).forEach(a=>{let l=this.componentID(a);ve(l)&&s.indexOf(l)===-1&&s.push(l)}),o.concat(r).forEach(}),i&&this.maybePushComponentsDestroyed(s)}joinNewChildren(){f.findPhxChildren(this.el,this.id).forEach(e=>this.joinChild(e))}etDescendentByEl(e){return e.id===this.id?this:this.children[e.getAttribute(We)][e.id]}destroyDescendent(e){for(let i in this.root.children)for(let s in this.root.children[i])if(s===e)return this.root.children[i][s].destroy()}joinChild(e){if(!this.getChildById(e.id)){let s=new ut(e,this.liveSocket,this);return this.root.children[this.id][s.id]=s,s.join(),this.childJoins++,!0}}isJoinPending(){return this.joinPending}ackJoin(e){this.childJoins--,this.childJoins===0&&(this.parent?this.parent.ackJoin(this):this.onAllChildJoinsComplete())}onAllChildJoinsComplete(){this.joinCallback(()=>{this.pendingJoinOps.forEach(([e,i])=>{e.isDestroyed()||i()}),this.pendingJoinOps=[]})}update(e,i){if(this.isJoinPending()||this.liveSocket.hasPendingLink()&&this.root.isMain())return this.pendingDiffs.push({diff:e,events:i});this.rendered.mergeDiff(e);let s=!1;this.rendered.isComponentOnlyDiff(e)?this.liveSocket.time("component patch complete",()=>{f.findParentCIDs(this.el,this.rendered.componentCIDs(e)).forEach(n=>{this.componentPatch(this.rendered.getComponent(e,n),n)&&(s=!0)})}):fs(e)||this.liveSocket.time("full patch complete",()=>{let[r,n]=this.renderContainer(e,"update"),o=new Ke(this,this.el,this.id,r,n,null);s=this.performPatch(o,!0)}),this.liveSocket.dispatchEvents(i),s&&this.joinNewChildren()}renderContainer(e,i){return this.liveSocket.time(`toString diff (${i})`,()=>{let s=this.el.tagName,r=e?this.rendered.componentCIDs(e).concat(this.pruningCIDs):null,[n,o]=this.rendered.toString(r);return[`<${s}>${n}</${s}>`,o]})}componentPatch(e,i){if(fs(e))return!1;let[s,r]=this.rendered.componentToString(i),n=new Ke(this,this.el,this.id,s,r,i);return this.performPatch(n,!0)}ddHook(e){if(Fe.elementID(e)||!e.getAttribute)return;let i=e.getAttribute(`data-phx-${rt}`)||e.getAttribute(this.binding(rt));if(i&&!this.ownsElement(e))return;let s=this.liveSocket.getHookCallbacks(i);if(s){e.id||ee(`no DOM ID for hook "${i}". Hooks require a unique ID on each element.`,e);let r=new Fe(this,e,s);return this.viewHooks[Fe.elementID(r.el)]=r,r}else i!==null&&ee(`unknown hook found for "${i}"`,e)}destroyHook(e){e.__destroyed(),e.__cleanup__(),delete this.viewHooks[Fe.elementID(e.el)]}applyPendingUpdates(){this.pendingDiffs.forEach(,this.pendingDiffs=[],this.eachChild(e=>e.applyPendingUpdates())}eachChild(e){let i=this.root.children[this.id]||{};for(let s in i)e(this.getChildById(s))}onChannel(e,i){this.liveSocket.onChannel(this.channel,e,s=>{this.isJoinPending()?this.root.pendingJoinOps.push([this,()=>i(s)]):this.liveSocket.requestDOMUpdate(()=>i(s))})}bindChannel(){this.liveSocket.onChannel(this.channel,"diff",e=>{this.liveSocket.requestDOMUpdate(()=>{this.applyDiff("update",e,({diff:i,events:s})=>this.update(i,s))})}),this.onChannel("redirect",,this.onChannel("live_patch",e=>this.onLivePatch(e)),this.onChannel("live_redirect",e=>this.onLiveRedirect(e)),this.channel.onError(e=>this.onError(e)),this.channel.onClose(e=>this.onClose(e))}nLiveRedirect(e){let{to:i,kind:s,flash:r}=e,n=this.expandURL(i);this.liveSocket.historyRedirect(n,s,r)}onLivePatch(e){let{to:i,kind:s}=e;this.href=this.expandURL(i),this.liveSocket.historyPatch(i,s)}expandURL(e){return e.startsWith("/")?`${window.location.protocol}//${window.location.host}${e}`:e}sDestroyed(){return this.destroyed}oin(e){this.showLoader(this.liveSocket.loaderTimeout),this.bindChannel(),this.isMain()&&(this.stopCallback=this.liveSocket.withPageLoading({to:this.href,kind:"initial"})),this.joinCallback=i=>{i=i||function(){},e?e(this.joinCount,i):i()},this.liveSocket.wrapPush(this,{timeout:!1},()=>this.channel.join().receive("ok",i=>{this.isDestroyed()||this.liveSocket.requestDOMUpdate(()=>this.onJoin(i))}).receive("error",i=>!this.isDestroyed()&&this.onJoinError(i)).receive("timeout",()=>!this.isDestroyed()&&this.onJoinError({reason:"timeout"})))}onJoinError(e){if(e.reason==="reload"){this.log("error",()=>[`failed mount with ${e.status}. Falling back to page request`,e]),this.isMain()&&this.onRedirect({to:this.href});return}else if(e.reason==="unauthorized"||e.reason==="stale"){this.log("error",()=>["unauthorized live_redirect. Falling back to page request",e]),this.isMain()&&this.onRedirect({to:this.href});return}if((e.redirect||e.live_redirect)&&(this.joinPending=!1,this.channel.leave()),e.redirect)return this.onRedirect(e.redirect);if(e.live_redirect)return this.onLiveRedirect(e.live_redirect);this.displayError([it,Et,Qt]),this.log("error",()=>["unable to join",e]),this.liveSocket.isConnected()&&this.liveSocket.reloadWithJitter(this)}onClose(e){if(!this.isDestroyed()){if(this.liveSocket.hasPendingLink()&&e!=="leave")return this.liveSocket.reloadWithJitter(this);this.destroyAllChildren(),this.liveSocket.dropActiveElement(this),document.activeElement&&document.activeElement.blur(),this.liveSocket.isUnloaded()&&this.showLoader(Er)}}onError(e){this.onClose(e),this.liveSocket.isConnected()&&this.log("error",()=>["view crashed",e]),this.liveSocket.isUnloaded()||(this.liveSocket.isConnected()?this.displayError([it,Et,Qt]):this.displayError([it,Et,rs]))}displayError(e){this.isMain()&&f.dispatchEvent(window,`${F}:page-loading-start`,{detail:{to:this.href,kind:"error"}}),this.showLoader(),this.setContainerClasses(...e),this.execAll(this.binding("disconnected"))}pushWithReply(e,i,s,r=function(){}){if(!this.isConnected())return;let[n,[o],a]=e?e():[null,[],{}],l=function(){};return(a.page_loading||o&&o.getAttribute(this.binding(is))!==null)&&(l=this.liveSocket.withPageLoading({kind:"element",target:o})),typeof s.cid!="number"&&delete s.cid,this.liveSocket.wrapPush(this,{timeout:!0},()=>this.channel.push(i,s,yr).receive("ok",c=>{let p=g=>{c.redirect&&this.onRedirect(c.redirect),c.live_patch&&this.onLivePatch(c.live_patch),c.live_redirect&&this.onLiveRedirect(c.live_redirect),l(),r(c,g)};c.diff?this.liveSocket.requestDOMUpdate(()=>{this.applyDiff("update",c.diff,({diff:g,reply:_,events:S})=>{n!==null&&this.undoRefs(n),this.update(g,S),p(_)})}):(n!==null&&this.undoRefs(n),p(null))}))}undoRefs(e){!this.isConnected()||f.all(document,`[${ke}="${this.id}"][${ne}="${e}"]`,i=>{let s=i.getAttribute(At);i.removeAttribute(ne),i.removeAttribute(ke),i.getAttribute(ti)!==null&&(i.readOnly=!1,i.removeAttribute(ti)),s!==null&&(i.disabled=s==="true",i.removeAttribute(At)),Kt.forEach(o=>f.removeClass(i,o));let r=i.getAttribute(Ct);r!==null&&(i.innerText=r,i.removeAttribute(Ct));let n=f.private(i,ne);if(n){let o=this.triggerBeforeUpdateHook(i,n);Ke.patchEl(i,n,this.liveSocket.getActiveElement()),o&&o.__updated(),f.deletePrivate(i,ne)}})}putRef(e,i,s={}){let r=this.ref++,n=this.binding(Tt);return s.loading&&(e=e.concat(f.all(document,s.loading))),e.forEach(o=>{o.classList.add(`phx-${i}-loading`),o.setAttribute(ne,r),o.setAttribute(ke,this.el.id);let a=o.getAttribute(n);a!==null&&(o.getAttribute(Ct)||o.setAttribute(Ct,o.innerText),a!==""&&(o.innerText=a),o.setAttribute("disabled",""))}),[r,e,s]}componentID(e){let i=e.getAttribute&&e.getAttribute(pe);return i?parseInt(i):null}targetComponentID(e,i,s={}){if(ve(i))return i;let r=s.target||e.getAttribute(this.binding("target"));return ve(r)?parseInt(r):i&&(r!==null||s.target)?this.closestComponentID(i):null}closestComponentID(e){return ve(e)?e:e?ye(e.closest(`[${pe}]`),:null}pushHookEvent(e,i,s,r,n){if(!this.isConnected())return this.log("hook",,!1;let[o,a,l]=this.putRef([e],"hook");return this.pushWithReply(()=>[o,a,l],"event",{type:"hook",event:s,value:r,cid:this.closestComponentID(i)},,o}extractMeta(e,i,s){let r=this.binding("value-");for(let n=0;n<e.attributes.length;n++){i||(i={});let o=e.attributes[n].name;o.startsWith(r)&&(i[o.replace(r,"")]=e.getAttribute(o))}if(e.value!==void 0&&!(e instanceof HTMLFormElement)&&(i||(i={}),i.value=e.value,e.tagName==="INPUT"&&ei.indexOf(e.type)>=0&&!e.checked&&delete i.value),s){i||(i={});for(let n in s)i[n]=s[n]}return i}pushEvent(e,i,s,r,n,o={},a){this.pushWithReply(()=>this.putRef([i],e,o),"event",{type:e,event:r,value:this.extractMeta(i,n,o.value),cid:this.targetComponentID(i,s,o)},}pushFileProgress(e,i,s,r=function(){}){this.liveSocket.withinOwners(e.form,(n,o)=>{n.pushWithReply(null,"progress",{event:e.getAttribute(n.binding(_r)),ref:e.getAttribute(me),entry_ref:i,progress:s,cid:n.targetComponentID(e.form,o)},r)})}pushInput(e,i,s,r,n,o){let a,l=ve(s)?s:this.targetComponentID(e.form,i,n),c=()=>this.putRef([e,e.form],"change",n),p,g=this.extractMeta(e.form);e.getAttribute(this.binding("change"))?p=di(e.form,H({_target:n._target},g),[e.name]):p=di(e.form,H({_target:n._target},g)),f.isUploadInput(e)&&e.files&&e.files.length>0&&X.trackFiles(e,Array.from(e.files)),a=X.serializeUploads(e);let _={type:"form",event:r,value:p,uploads:a,cid:l};this.pushWithReply(c,"event",_,S=>{if(f.showError(e,this.liveSocket.binding(Je)),f.isUploadInput(e)&&f.isAutoUpload(e)){if(X.filesAwaitingPreflight(e).length>0){let[b,w]=c();this.uploadFiles(e.form,i,b,l,M=>{o&&o(S),this.triggerAwaitingSubmit(e.form),this.undoRefs(b)})}}else o&&o(S)})}triggerAwaitingSubmit(e){let i=this.getScheduledSubmit(e);if(i){let[s,r,n,o]=i;this.cancelSubmit(e),o()}}getScheduledSubmit(e){return this.formSubmits.find(([i,s,r,n])=>i.isSameNode(e))}scheduleSubmit(e,i,s,r){if(this.getScheduledSubmit(e))return!0;this.formSubmits.push([e,i,s,r])}cancelSubmit(e){this.formSubmits=this.formSubmits.filter(([i,s,r])=>i.isSameNode(e)?(this.undoRefs(s),!1):!0)}disableForm(e,i={}){let s=g=>!(ht(g,`${this.binding(nt)}=ignore`,g.form)||ht(g,"data-phx-update=ignore",g.form)),r=g=>g.hasAttribute(this.binding(Tt)),n=o=a=Array.from(e.elements),l=a.filter(r),c=a.filter(n).filter(s),p=a.filter(o).filter(s);return c.forEach(g=>{g.setAttribute(At,g.disabled),g.disabled=!0}),p.forEach(g=>{g.setAttribute(ti,g.readOnly),g.readOnly=!0,g.files&&(g.setAttribute(At,g.disabled),g.disabled=!0)}),e.setAttribute(this.binding(is),""),this.putRef([e].concat(l).concat(c).concat(p),"submit",i)}pushFormSubmit(e,i,s,r,n,o){let a=()=>this.disableForm(e,n),l=this.targetComponentID(e,i);if(X.hasUploadsInProgress(e)){let[c,p]=a(),g=return this.scheduleSubmit(e,c,n,g)}else if(X.inputsAwaitingPreflight(e).length>0){let[c,p]=a(),g=this.uploadFiles(e,i,c,l,_=>{let S=this.extractMeta(e),b=di(e,H({submitter:r},S));this.pushWithReply(g,"event",{type:"form",event:s,value:b,cid:l},o)})}else if(!(e.hasAttribute(ne)&&e.classList.contains("phx-submit-loading"))){let c=this.extractMeta(e),p=di(e,H({submitter:r},c));this.pushWithReply(a,"event",{type:"form",event:s,value:p,cid:l},o)}}uploadFiles(e,i,s,r,n){let o=this.joinCount,a=X.activeFileInputs(e),l=a.length;a.forEach(c=>{let p=new X(c,this,()=>{l--,l===0&&n()});this.uploaders[c]=p;let g=p.entries().map(S=>S.toPreflightPayload()),_={ref:c.getAttribute(me),entries:g,cid:this.targetComponentID(c.form,i)};this.log("upload",()=>["sending preflight request",_]),this.pushWithReply(null,"allow_upload",_,S=>{if(this.log("upload",,S.error){this.undoRefs(s);let[b,w]=S.error;this.log("upload",()=>[`error for entry ${b}`,w])}else{let b=w=>{this.channel.onError(()=>{this.joinCount===o&&w()})};p.initAdapterUpload(S,b,this.liveSocket)}})})}dispatchUploads(e,i,s){let r=this.targetCtxElement(e)||this.el,n=f.findUploadInputs(r).filter(;n.length===0?ee(`no live file inputs found matching the name "${i}"`):n.length>1?ee(`duplicate live file inputs found matching the name "${i}"`):f.dispatchEvent(n[0],qt,{detail:{files:s}})}targetCtxElement(e){if(ve(e)){let[i]=f.findComponentNodeList(this.el,e);return i}else return e||null}pushFormRecovery(e,i,s){this.liveSocket.withinOwners(e,(r,n)=>{let o=this.binding("change"),a=Array.from(e.elements).filter(p=>f.isFormInput(p)&&p.name&&!p.hasAttribute(o));if(a.length===0)return;a.forEach(;let l=a.find(||a[0],c=e.getAttribute(this.binding(os))||e.getAttribute(this.binding("change"));de.exec("change",c,r,l,["push",{_target:l.name,newCid:i,callback:s}])})}pushLinkPatch(e,i,s){let r=this.liveSocket.setPendingLink(e),n=i?()=>this.putRef([i],"click"):null,o=a=e.startsWith("/")?`${location.protocol}//${location.host}${e}`:e,l=this.pushWithReply(n,"live_patch",{url:a},c=>{this.liveSocket.requestDOMUpdate(()=>{c.link_redirect?this.liveSocket.replaceMain(e,null,s,r):(this.liveSocket.commitPendingLink(r)&&(this.href=e),this.applyPendingUpdates(),s&&s(r))})});l?l.receive("timeout",o):o()}formsForRecovery(e){if(this.joinCount===0)return[];let i=this.binding("change"),s=document.createElement("template");return s.innerHTML=e,f.all(this.el,`form[${i}]`).filter(.filter(.filter(r=>r.getAttribute(this.binding(os))!=="ignore").map(r=>{let n=r.getAttribute(i).replaceAll(/([\[\]"])/g,"\\$1"),o=s.content.querySelector(`form[id="${r.id}"][${i}="${n}"]`);return o?[r,o,this.targetComponentID(o)]:[r,r,this.targetComponentID(r)]}).filter(([r,n,o])=>n)}maybePushComponentsDestroyed(e){let i=e.filter(s=>f.findComponentNodeList(this.el,s).length===0);i.length>0&&(this.pruningCIDs.push(...i),this.pushWithReply(null,"cids_will_destroy",{cids:i},()=>{this.pruningCIDs=this.pruningCIDs.filter(;let s=i.filter(r=>f.findComponentNodeList(this.el,r).length===0);s.length>0&&this.pushWithReply(null,"cids_destroyed",{cids:s},}))}ownsElement(e){let i=e.closest(Ie);return e.getAttribute(We)===this.id||i&&i.id===this.id||!i&&this.isDead}submitForm(e,i,s,r,n={}){f.putPrivate(e,st,!0);let o=this.liveSocket.binding(Je),a=Array.from(e.elements);a.forEach(,this.liveSocket.blurActiveElement(this),this.pushFormSubmit(e,i,s,r,n,()=>{a.forEach(,navigator.userAgent.includes("Android")||this.liveSocket.restorePreviouslyActiveFocus()})};var Dt=class{constructor(e,i,s={}){if(this.unloaded=!1,!i||i.constructor.name==="Object")throw new Error(`
      a phoenix Socket must be provided as the second argument to the LiveSocket constructor. For example:

          import {Socket} from "phoenix"
          import {LiveSocket} from "phoenix_live_view"
          let liveSocket = new LiveSocket("/live", Socket, {...})
      `);this.socket=new i(e,s),this.bindingPrefix=s.bindingPrefix||Sr,this.opts=s,this.params=oi(s.params||{}),this.viewLogger=s.viewLogger,this.metadataCallbacks=s.metadata||{},this.defaults=Object.assign(lt(wr),s.defaults||{}),this.activeElement=null,this.prevActive=null,this.silenced=!1,this.main=null,this.outgoingMainEl=null,this.clickStartedAtTarget=null,this.linkRef=1,this.roots={},this.href=window.location.href,this.pendingLink=null,this.currentLocation=lt(window.location),this.hooks=s.hooks||{},this.uploaders=s.uploaders||{},this.loaderTimeout=s.loaderTimeout||br,this.reloadWithJitterTimer=null,this.maxReloads=s.maxReloads||ar,this.reloadJitterMin=s.reloadJitterMin||lr,this.reloadJitterMax=s.reloadJitterMax||hr,this.failsafeJitter=s.failsafeJitter||cr,this.localStorage=s.localStorage||window.localStorage,this.sessionStorage=s.sessionStorage||window.sessionStorage,this.boundTopLevelEvents=!1,this.domCallbacks=Object.assign({onNodeAdded:oi(),onBeforeElUpdated:oi()},s.dom||{}),this.doofinderMount=s.doofinderMount,this.connectCallback=s.connectCallback||(()=>{}),this.disconnectCallback=s.disconnectCallback||(,this.unbindFunctions=[],this.transitions=new $r,window.addEventListener("pagehide",,this.socket.onOpen(()=>{this.isUnloaded()&&window.location.reload()}),this.socket.onOpen(()=>{this.connectCallback()})}isProfileEnabled(){return this.sessionStorage.getItem(ii)==="true"}isDebugEnabled(){return this.sessionStorage.getItem(xt)==="true"}isDebugDisablednableDebug(){this.sessionStorage.setItem(xt,"true")}enableProfiling(){this.sessionStorage.setItem(ii,"true")}isableProfiling(){this.sessionStorage.removeItem(ii)}enableLatencySim(e){this.enableDebug(),console.log("latency simulator enabled for the duration of this browser session. Call disableLatencySim() to disable"),this.sessionStorage.setItem(si,e)}etLatencySim(){let e=this.sessionStorage.getItem(si);return e?parseInt(e):null}getSocket(){return this.socket}connect(){window.location.hostname==="localhost"&&!this.isDebugDisabled()&&this.enableDebug(),this.joinRootViews()&&(this.bindTopLevelEvents(),this.socket.connect())}disconnecteplaceTransport(e){clearTimeout(this.reloadWithJitterTimer),this.socket.replaceTransport(e),this.connect()}execJS(e,i,s=null){this.owner(e,}execJSHookPush(e,i,s,r){this.withinOwners(e,n=>{de.exec("hook",i,n,e,["push",{data:s,callback:r}])})}unload(){this.unloaded||(this.main&&this.isConnected()&&this.log(this.main,"socket",()=>["disconnect for page nav"]),this.unloaded=!0,this.destroyAllViews(),this.disconnect())}triggerDOM(e,i){this.domCallbacks[e](...i)}time(e,i){if(!this.isProfileEnabled()||!console.time)return i();console.time(e);let s=i();return console.timeEnd(e),s}log(e,i,s){if(this.viewLogger){let[r,n]=s();this.viewLogger(e,i,r,n)}else if(this.isDebugEnabled()){let[r,n]=s();Cr(e,i,r,n)}}requestDOMUpdate(e){this.transitions.after(e)}transition(e,i,s=function(){}){this.transitions.addTransition(e,i,s)}onChannel(e,i,s){e.on(i,r=>{let n=this.getLatencySim();n?setTimeout(()=>s(r),n):s(r)})}wrapPush(e,i,s){let r=this.getLatencySim(),n=e.joinCount;if(!r)return this.isConnected()&&i.timeout?s().receive("timeout",()=>{e.joinCount===n&&!e.isDestroyed()&&this.reloadWithJitter(e,()=>{this.log(e,"timeout",})}):s();let o={receives:[],receive;return setTimeout(()=>{e.isDestroyed()||o.receives.reduce(s())},r),o}reloadWithJitter(e,i){clearTimeout(this.reloadWithJitterTimer),this.disconnect();let s=this.reloadJitterMin,r=this.reloadJitterMax,n=Math.floor(Math.random()*(r-s+1))+s;xe.updateLocal(this.localStorage,window.location.pathname,Jt,0,>this.maxReloads&&(n=this.failsafeJitter),this.reloadWithJitterTimer=setTimeout(n)}getHookCallbacks(e){return e&&e.startsWith("Phoenix.")?Dr[e.split(".")[1]]:this.hooks[e]}isUnloaded(){return this.unloaded}isConnected(){return this.socket.isConnected()}getBindingPrefix(){return this.bindingPrefix}inRootViews(){if(this.doofinderMount){let e=this.newRootView(this.doofinderMount);return e.setHref(this.getHref()),e.join(),this.main=e,!0}else return!1}redirect(e,i){this.disconnect(this.disconnectCallback),xe.redirect(e,i)}replaceMain(e,i,s=null,r=this.setPendingLink(e)){let n=this.currentLocation.href;this.outgoingMainEl=this.outgoingMainEl||this.main.el;let o=f.cloneNode(this.outgoingMainEl,"");this.main.showLoader(this.loaderTimeout),this.main.destroy(),this.main=this.newRootView(o,i,n),this.main.setRedirect(e),this.transitionRemoves(),this.main.join((a,l)=>{a===1&&this.commitPendingLink(r)&&this.requestDOMUpdate(()=>{f.findPhxSticky(document).forEach(c=>o.appendChild(c)),this.outgoingMainEl.replaceWith(o),this.outgoingMainEl=null,s&&requestAnimationFrame(,l()})})}transitionRemoves(e){let i=this.binding("remove");e=e||f.all(document,`[${i}]`),e.forEach(s=>{this.execJS(s,s.getAttribute(i),"remove")})}isPhxView(e){return e.getAttribute&&e.getAttribute(ge)!==null}newRootView(e,i,s){let r=new ut(e,this,null,i,s);return this.roots[r.id]=r,r}owner(e,i){let s=ye(e.closest(Ie),||this.main;s&&i(s)}withinOwners(e,i){this.owner(e,}getViewByEl(e){let i=e.getAttribute(Le);return ye(this.getRootById(i),s=>s.getDescendentByEl(e))}getRootById(e){return this.roots[e]}destroyAllViews(){for(let e in this.roots)this.roots[e].destroy(),delete this.roots[e];this.main=null}destroyViewByEl(e){let i=this.getRootById(e.getAttribute(Le));i&&i.id===e.id?(i.destroy(),delete this.roots[i.id]):i&&i.destroyDescendent(e.id)}setActiveElement(e){if(this.activeElement===e)return;this.activeElement=e;let i=()=>{e===this.activeElement&&(this.activeElement=null),e.removeEventListener("mouseup",this),e.removeEventListener("touchend",this)};e.addEventListener("mouseup",i),e.addEventListener("touchend",i)}getActiveElement(){return document.activeElement===document.body?this.activeElement||document.activeElement:document.activeElement||document.body}dropActiveElement(e){this.prevActive&&e.ownsElement(this.prevActive)&&(this.prevActive=null)}restorePreviouslyActiveFocus(){this.prevActive&&this.prevActive!==document.body&&this.prevActive.focus()}blurActiveElement(){this.prevActive=this.getActiveElement(),this.prevActive!==document.body&&this.prevActive.blur()}bindTopLevelEvents({dead:e}={}){this.boundTopLevelEvents||(this.boundTopLevelEvents=!0,this.socket.onClose(i=>{if(i&&i.code===1e3&&this.main)return this.reloadWithJitter(this.main)}),this.unbindFunctions.push((()=>{let i=return document.body.addEventListener("click",i),)()),window.addEventListener("pageshow",i=>{i.persisted&&(this.getSocket().disconnect(),this.withPageLoading({to:window.location.href,kind:"redirect"}),window.location.reload())},!0),this.bindClicks(),e||this.bindForms(),this.bind({keyup:"keyup",keydown:"keydown"},(i,s,r,n,o,a)=>{let l=n.getAttribute(this.binding(vr)),c=i.key&&i.key.toLowerCase();if(l&&l.toLowerCase()!==c)return;let p=H({key:i.key},this.eventMeta(s,i,n));de.exec(s,o,r,n,["push",{data:p}])}),this.bind({blur:"focusout",focus:"focusin"},(i,s,r,n,o,a)=>{if(!a){let l=H({key:i.key},this.eventMeta(s,i,n));de.exec(s,o,r,n,["push",{data:l}])}}),this.bind({blur:"blur",focus:"focus"},(i,s,r,n,o,a)=>{if(a==="window"){let l=this.eventMeta(s,i,n);de.exec(s,o,r,n,["push",{data:l}])}}),this.unbindFunctions.push((()=>{let i=return this.doofinderMount.addEventListener("dragover",i),()=>this.doofinderMount.removeEventListener("dragover",i)})()),this.unbindFunctions.push((()=>{let i=s=>{s.preventDefault();let r=ye(ht(s.target,this.binding(es)),,n=r&&document.getElementById(r),o=Array.from(s.dataTransfer.files||[]);!n||n.disabled||o.length===0||!(n.files instanceof FileList)||(X.trackFiles(n,o,s.dataTransfer),n.dispatchEvent(new Event("input",{bubbles:!0})))};return this.doofinderMount.addEventListener("drop",i),()=>this.doofinderMount.removeEventListener("drop",i)})()),this.on(qt,i=>{let s=i.target;if(!f.isUploadInput(s))return;let r=Array.from(i.detail.files||[]).filter(;X.trackFiles(s,r),s.dispatchEvent(new Event("input",{bubbles:!0}))},this.doofinderMount))}ventMeta(e,i,s){let r=this.metadataCallbacks[e];return r?r(i,s):{}}setPendingLink(e){return this.linkRef++,this.pendingLink=e,this.linkRef}commitPendingLink(e){return this.linkRef!==e?!1:(this.href=this.pendingLink,this.pendingLink=null,!0)}getHref(){return this.href}ind(e,i){for(let s in e){let r=e[s];this.on(r,n=>{let o=this.binding(s),a=this.binding(`window-${s}`),l=n.target.getAttribute&&n.target.getAttribute(o);l?this.debounce(n.target,n,r,()=>{this.withinOwners(n.target,c=>{i(n,s,c,n.target,l,null)})}):f.all(document,`[${a}]`,c=>{let p=c.getAttribute(a);this.debounce(c,n,r,()=>{this.withinOwners(c,g=>{i(n,s,g,c,p,"window")})})})},this.doofinderMount)}}bindClicks(){let e=this.doofinderMount.addEventListener("click",e),this.unbindFunctions.push(,this.bindClick("click","click",!1),this.bindClick("mousedown","capture-click",!0)}bindClick(e,i,s){let r=this.binding(i),n=o=>{if(!this.isConnected())return;let a=null;if(s)a=o.target.matches(`[${r}]`)?o.target:o.target.querySelector(`[${r}]`);else{let c=this.clickStartedAtTarget||o.target;a=ht(c,r),this.dispatchClickAway(o,c),this.clickStartedAtTarget=null}let l=a&&a.getAttribute(r);if(!l){!s&&f.isNewPageClick(o,window.location)&&this.unload();return}a.getAttribute("href")==="#"&&o.preventDefault(),!a.hasAttribute(ne)&&(a.disabled||this.debounce(a,o,"click",()=>{this.withinOwners(a,c=>{de.exec("click",l,c,a,["push",{data:this.eventMeta("click",o,a)}])})}))};this.doofinderMount.addEventListener(e,n,s),this.unbindFunctions.push(}dispatchClickAway(e,i){let s=this.binding("click-away");f.all(document,`[${s}]`,r=>{r.isSameNode(i)||r.contains(i)||this.withinOwners(e.target,n=>{let o=r.getAttribute(s);de.isVisible(r)&&de.isInViewport(r)&&de.exec("click",o,n,r,["push",{data:this.eventMeta("click",e,e.target)}])})})}maybeScroll(e){typeof e=="number"&&requestAnimationFrame(}dispatchEvent(e,i={}){f.dispatchEvent(this.doofinderMount,`${F}:${e}`,{detail:i})}dispatchEvents(e){e.forEach(}withPageLoading(e,i){f.dispatchEvent(this.doofinderMount,`${F}:page-loading-start`,{detail:e});let s=()=>f.dispatchEvent(this.doofinderMount,`${F}:page-loading-stop`,{detail:e});return i?i(s):s}pushHistoryPatch(e,i,s){if(!this.isConnected())return xe.redirect(e);this.withPageLoading({to:e,kind:"patch"},r=>{this.main.pushLinkPatch(e,s,n=>{this.historyPatch(e,i,n),r()})})}historyPatch(e,i,s=this.setPendingLink(e)){!this.commitPendingLink(s)||(xe.pushState(i,{type:"patch",id:this.main.id},e),f.dispatchEvent(window,`${F}:navigate`,{detail:{patch:!0,href:e,pop:!1}}),this.registerNewLocation(window.location))}historyRedirect(e,i,s){if(!this.isConnected())return xe.redirect(e,s);if(/^\/$|^\/[^\/]+.*$/.test(e)){let{protocol:n,host:o}=window.location;e=`${n}//${o}${e}`}let r=window.scrollY;this.withPageLoading({to:e,kind:"redirect"},n=>{this.replaceMain(e,s,o=>{o===this.linkRef&&(xe.pushState(i,{type:"redirect",id:this.main.id,scroll:r},e),f.dispatchEvent(window,`${F}:navigate`,{detail:{href:e,patch:!1,pop:!1}}),this.registerNewLocation(window.location)),n()})})}replaceRootHistory(){xe.pushState("replace",{root:!0,type:"patch",id:this.main.id})}registerNewLocation(e){let{pathname:i,search:s}=this.currentLocation;return i+s===e.pathname+e.search?!1:(this.currentLocation=lt(e),!0)}bindForms(){let e=0,i=!1;this.on("submit",s=>{let r=s.target.getAttribute(this.binding("submit")),n=s.target.getAttribute(this.binding("change"));!i&&n&&!r&&(i=!0,s.preventDefault(),s.stopPropagation(),this.withinOwners(s.target,o=>{o.disableForm(s.target),window.requestAnimationFrame(()=>{f.isUnloadableFormSubmit(s)&&this.unload(),s.target.submit()})}))},this.doofinderMount),this.on("submit",s=>{let r=s.target.getAttribute(this.binding("submit"));if(!r){f.isUnloadableFormSubmit(s)&&this.unload();return}s.preventDefault(),s.stopPropagation(),s.target.disabled=!0,this.withinOwners(s.target,n=>{de.exec("submit",r,n,s.target,["push",{submitter:s.submitter}])})},this.doofinderMount);for(let s of["change","input"])this.on(s,r=>{r.stopPropagation();let n=this.binding("change"),o=r.target,a=o.getAttribute(n),l=o.form&&o.form.getAttribute(n),c=a||l;if(!c||o.type==="number"&&o.validity&&o.validity.badInput)return;let p=a?o:o.form,g=e;e++;let{at:_,type:S}=f.private(o,"prev-iteration")||{};_===g-1&&s==="change"&&S==="input"||(f.putPrivate(o,"prev-iteration",{at:g,type:s}),this.debounce(o,r,s,()=>{this.withinOwners(p,b=>{f.putPrivate(o,wt,!0),f.isTextualInput(o)||this.setActiveElement(o),de.exec("change",c,b,o,["push",{_target:r.target.name,dispatcher:p}])})}))},this.doofinderMount);this.on("reset",s=>{let r=s.target;f.resetForm(r,this.binding(Je));let n=Array.from(r.elements).find(;window.requestAnimationFrame(()=>{n.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!1}))})})}debounce(e,i,s,r){if(s==="blur"||s==="focusout")return r();let n=this.binding(mr),o=this.binding(gr),a=this.defaults.debounce.toString(),l=this.defaults.throttle.toString();this.withinOwners(e,c=>{let p=()=>!c.isDestroyed()&&document.body.contains(e);f.debounce(e,i,n,a,o,l,p,})}n(e,i,s=window){let r=s.addEventListener(e,r),this.unbindFunctions.push(}},$r=class{eset(){this.transitions.forEach(,this.flushPendingOps()}after(e){this.size()===0?e():this.pushPendingOp(e)}addTransition(e,i,s){i();let r=setTimeout(()=>{this.transitions.delete(r),s(),this.flushPendingOps()},e);this.transitions.add(r)}ushPendingOps(){if(this.size()>0)return;let e=this.pendingOps.shift();e&&(e(),this.flushPendingOps())}};var ui=class{et data(){return JSON.parse(this._store.getItem(this._bucket))||{}}tItem(e,i){let s=this.data;s[e]=i,this.data=s}removeItem(e){let i=this.data;delete i[e],this.data=i}estroy(){this._store.removeItem(this._bucket)}popItem(e){let i=this.data,s=i[e];return delete i[e],this.data=i,s}};var vs="dfd-animate",_s="dfd-fixed-layout",De="hidden",fi="floating",pi="fullscreen",qe="static";function mi(t){let e=["left","top","right","bottom","width","height","scrollLeft","scrollTop","scrollWidth","scrollHeight"],i=e.reduce({}),s=t;if(s===window)i=Pe(H({},i),{width:s.outerWidth,height:s.outerHeight,clientWidth:s.innerWidth,clientHeight:s.innerHeight,scrollLeft:s.scrollX,scrollTop:s.scrollY,scrollWidth:document.scrollWidth,scrollHeight:document.scrollHeight});else{if(s===document)s=document.documentElement,i=Pe(H({},i),{width:s.offsetWidth,height:s.offsetHeight});else if(s.getBoundingClientRect){let r=s.getBoundingClientRect();i=e.reduce({})}i=Pe(H({},i),{clientWidth:s.clientWidth,clientHeight:s.clientHeight,scrollLeft:s.scrollLeft,scrollTop:s.scrollTop,scrollWidth:s.scrollWidth,scrollHeight:s.scrollHeight})}return i}function Br(t){let e=t;for(;e&&getComputedStyle(e).position!=="fixed";)e=e.offsetParent;return!!e}"use strict";var bs=class{constructor(e,i={}){this.options=H({align:i.align,offsetX:0,offsetY:4,marginY:20,marginX:20,fillViewPortWidth:768},i),this.element=e}__origin__(e){let i=mi(e),s=mi(document),r=s.width<=this.options.fillViewPortWidth,n={width:i.width,top:i.top+i.height,left:i.left,fixed:Br(e),align:function(){let o=Math.abs(i.left)*100/s.width,a=Math.abs(s.clientWidth-i.right)*100/s.width;switch(!0){case r:case Math.abs(o-a)<=15:return"center";case o<a:return"left";default:return"right"}}(),fillViewPort:r};return n.fixed||(n.top+=Math.abs(s.scrollTop),n.left+=Math.abs(s.scrollLeft)),n}update(e){let i=this.__origin__(e),s=document.documentElement,r=this.options.align||i.align,n=s.clientHeight-i.top-this.options.marginY,o=this.options.offsetX,a=this.options.offsetY;if(this.element.style.maxWidth=null,this.element.style.height=null,r!=="center"&&(this.element.style.marginLeft=null),this.element.style.position=i.fixed?"fixed":"absolute",r==="left"){let l=s.clientWidth-i.left-this.options.marginX,c=i.left;this.element.style.maxWidth=`${l-o}px`,this.element.style.left=`${c+o}px`,this.element.style.right=null}else if(r==="right"){let l=i.left+i.width-this.options.marginX+o,c=s.clientWidth-i.left-i.width;this.element.style.maxWidth=`${l+o}px`,this.element.style.right=`${c-o}px`,this.element.style.left=null}else{let l=s.clientWidth-i.left-i.width,c=Math.min(this.options.marginX,i.left,l);this.element.style.maxWidth=`${s.clientWidth-2*c}px`,this.element.style.left="50%",this.element.style.marginLeft=`-${mi(this.element).width/2}px`}this.element.style.top=`${i.top+a}px`,this.element.style.height=`${n-a}px`}destroy(){["position","top","left","right","height","maxWidth","marginLeft"].forEach(,this.options=null,this.element=null}};function gi(t,e=66,i=!1){let s;return function(...r){s?Date.now()-s>=e?(t(...r),s=Date.now()):i&&console.log("throttle: discard execution"):(t(...r),s=Date.now())}}var ze=class{_animate__(){return new Promise(e=>{setTimeout(()=>{this.mount.classList.add(vs),e()},10)})}get positionReference(){return this._positionReference}show(){return I(this,null,function*(){let e=this.hidden();return e&&(this.mount.removeAttribute(De),yield this.__animate__()),e})}hide(){return I(this,null,function*(){let e=!this.hidden();return e&&(this.mount.setAttribute(De,""),this.mount.classList.remove(vs),this.mount.innerHTML=""),e})}updatePosition(e){return I(this,null,}idden(){return this.mount.hasAttribute(De)}};var Es=class extends ze{constructor(e,i={}){super(e);this.handleWindowChange=gi(this.handleWindowChange.bind(this)),this._position=new bs(this.mount,i)}t position(){return this._position}how(){var e=i=>super[i];return I(this,null,function*(){let s=this.hidden();return s&&(this.mount.style.opacity="0",this.mount.removeAttribute(De)),this._position.update(this._positionReference),s&&(this.mount.setAttribute(De,""),this.mount.style.opacity=null,yield e("show").call(this),this.__addListeners__()),s})}hide(){var e=i=>super[i];return I(this,null,function*(){let s=!this.hidden();return s&&(this.__removeListeners__(),yield e("hide").call(this)),s})}updatePosition(e){var i=s=>super[s];return I(this,null,function*(){i("updatePosition").call(this,e),this._position.update(this._positionReference)})}destroy(){this.__removeListeners__(),this._position.destroy(),this._position=null,super.destroy()}};var Ss=class extends ze{show(){var e=i=>super[i];return I(this,null,function*(){let s=this.hidden();return s&&(document.documentElement.classList.add(_s),yield e("show").call(this)),s})}hide(){var e=i=>super[i];return I(this,null,function*(){let s=yield e("hide").call(this);return s&&document.documentElement.classList.remove(_s),s})}};function vi(t=8){let e="";for(;e.length<t;)e=`${e}${Math.random().toString(36).substring(2)}`;return e.substr(0,t)}var Io=10,Do=500;function ys(t,e={}){let i=document.querySelector(t);return i?Promise.resolve(i):new Promise((s,r)=>{let n=0,o=null,a=e.interval||Do,l=e.times||Io;o=setInterval(function(){n++<l?(i=document.querySelector(t),i&&(clearInterval(o),s(i))):(clearInterval(o),r(`selector '${t}' not found`))},a)})}var ws="data-dfd-id",_i="data-dfd-display",bi="data-dfd-mount-id",Ei="wrapper",Si="wrapper-source",Oo=`insertion method should be one of ${["append","prepend","before","after","replace","replace-content"].join(" | ")}`,As=class{constructor(e,i=qe,s={}){this._type=null,this._insertionPoint=null,this._insertionMethod=null,this._screenType=null,this._theme=null,this._mount=e,this._displayMethod=null,this.setType(i,s)}__place__(){return I(this,arguments,function*(e={}){if(!(e.insertionPoint===this._insertionPoint&&e.insertionMethod===this._insertionMethod)){this._insertionPoint=e.insertionPoint||"body",this._insertionMethod=this.__resolveInsertionMethod__(e.insertionMethod);try{this.__placeMount__()}catch(i){console.warn("insertion point not found, falling back to body",i),this._insertionPoint="body",this._insertionMethod="append",this.__placeMount__()}}})}__resolveInsertionMethod__(e="append"){return this._insertionPoint==="body"&&!["append","prepend"].includes(e)?"append":e}__resolveInsertionPoint__(){return I(this,null,function*(){let e=yield ys(this._insertionPoint);return this._insertionMethod==="replace"?this.__wrapMount__(e):(this.__unwrapMount__(),e)})}__resolveInsertionPosition__(){switch(this._insertionMethod){case"before":return"beforebegin";case"replace":case"replace-content":case"prepend":return"afterbegin";case"append":return"beforeend";case"after":return"afterend";default:throw Oo}}__placeMount__(){return I(this,null,function*(){let e=yield this.__resolveInsertionPoint__(),i=this.__resolveInsertionPosition__();this._insertionMethod==="replace-content"&&(e.innerHTML=""),e.insertAdjacentElement(i,this._mount)})}__getWrapperElement__(e){return document.querySelector(`[${_i}="${e}"][${bi}="${this._mount.id}"]`)}__ensureElementId__(e){return e.setAttribute("id",e.getAttribute("id")||`dfd-${vi(16)}`),e.getAttribute("id")}__wrapMount__(e){let i=this.__ensureElementId__(e),s=e.cloneNode(!1);return s.setAttribute(ws,i),s.setAttribute(_i,Ei),s.setAttribute(bi,this._mount.id),e.setAttribute(ws,i),e.setAttribute(_i,Si),e.setAttribute(bi,this._mount.id),e.insertAdjacentElement("beforebegin",s),this.__updateWrap__(),s}__unwrapMount__(){let e=this.__getWrapperElement__(Ei),i=this.__getWrapperElement__(Si);e&&(e.insertAdjacentElement("beforebegin",this._mount),e.remove(),i&&(i.setAttribute("id",i.dataset.dfdId),i.removeAttribute(ws),i.removeAttribute(_i),i.removeAttribute(bi),i.removeAttribute("hidden")))}__updateWrap__(){let e=this.__getWrapperElement__(this.hidden?Si:Ei),i=this.__getWrapperElement__(this.hidden?Ei:Si);!e||!i||(e.setAttribute("id",e.dataset.dfdId),e.removeAttribute("hidden"),i.removeAttribute("id"),i.setAttribute("hidden",""))}get type(){return this._type}get method(){return this._displayMethod}et screenType(){return this._screenType}how(){return I(this,null,function*(){yield this._displayMethod.show(),this.__updateWrap__()})}hide(){return I(this,null,}setType(e,i={}){var s;if(e!==this._type)switch(this._type=e,(s=this._displayMethod)==null||s.destroy(),e){case fi:this._displayMethod=new Es(this._mount,{align:i.align});break;case pi:this._displayMethod=new Ss(this._mount);break;case qe:default:this._displayMethod=new ze(this._mount)}this.__place__(i.placement)}updateTheme(e){if(e!==this._theme){let i=`dfd-${e}`,s=`dfd-${this._theme}`;e&&this._theme?this._mount.classList.replace(s,i):e?this._mount.classList.add(i):this._theme&&this._mount.classList.remove(s),this._theme=e}}updatePosition(e){var i;(i=this._displayMethod)==null||i.updatePosition(e)}destroy(){return I(this,null,function*(){var e;yield this.hide(),(e=this._displayMethod)==null||e.destroy(),this._displayMethod=null,this._mount=null,this._type=null,this._insertionPoint=null,this._insertionMethod=null,this._theme=null})}};var Ts=class{constructor(e){this.el=document.createComment(e),document.body.appendChild(this.el)}on(e,i){if(this._checkReady())return this.el.addEventListener(e,i,{passive:!0}),()=>this.off(e,i)}once(e,i){if(this._checkReady())return this.el.addEventListener(e,i,{once:!0,passive:!0}),mit(e,i){if(this._checkReady()){let s=new CustomEvent(e,{detail:i,bubbles:!1,cancelable:!1,composed:!1});this.el.dispatchEvent(s)}}teardown(){this._checkReady()&&(this.el=this.el.remove())}_checkReady(){if(this.el)return!0;throw new Error("tried to access a dead event bus!")}};var Vr=var Cs="__DF_DEBUG_MODE__",jr="true",yi=window.sessionStorage;tion z(...t){Ho()&&console.log("[doofinder]",...t)}"use strict";var wi=window.history,Ai=class{constructor({installationId:e,autoload:i,urlHash:s}){this._installationId=e,this._autoload=i?Object.freeze(i):null,this._urlHash=s,this._initialState=null,this._currentState=null}getQueryParamValue(){return this._autoload?new URLSearchParams(window.location.search).get(this._autoload.param):null}et(e=!1){return this.__fromHash__()||this.__fromQuery__()||this.__fromURL__()||this.__fromCurrentState__(e)}static getQuery(e){if(e){let i=e.split("/"),s=i[i.length-1];return Object.fromEntries(new URLSearchParams(s)).q}return""}replace(e){z("[state] replace state:",e),e=this.absoluteURL(e),this._currentState=e,wi.replaceState(e,"",this._urlHash?e:"")}save(e){z("[state] save state:",e),e=this.absoluteURL(e),this._currentState=e;let i=wi.state;e!==i&&(this.valid(i)||(this._initialState=i),wi.pushState(e,"",this._urlHash?e:""))}saveAbsoluteURL(){let e=this.absoluteURL("");z("[state] saveAbsoluteURL state",e),wi.pushState(e,"",this._urlHash?e:"")}absoluteURLalid(e){return typeof e=="string"&&(Vr(this._installationId).test(e)||e.startsWith(`#/${this._installationId}/`))}validEvent({state:e}){let i=this.valid(e);switch(!0){case(this._initialState===null&&!i):case this._initialState===e:case(this._initialState&&e&&this._initialState.toString()===e.toString()):return!1;default:return i}}__fromHash__(){let e=this.valid(window.location.hash)?`#${window.location.hash.split("#",2)[1]}`:null;return z("[state] __fromHash__ state:",e),e}__fromQuery__(){if(!this._autoload){z("[state] __fromQuery__ with autoload false - state:",null);return}let e=this.getQueryParamValue(),i=e!=null?`#/${this._autoload.screen}/q=${e.trim()}`:null;return z("[state] __fromQuery__ state:",i),i}__fromURL__(){if(!this._autoload){z("[state] __fromURL__ with autoload false - state:",null);return}let i=this._autoload.urls.find(s=>location.pathname.search(s)===0)?`#/${this._autoload.screen}/`:null;return z("[state] __fromURL__ state:",i),i}__fromCurrentState__(e){return e?(z("[state] __fromCurrentState__ with isTransient true - state:",this._currentState),this._currentState):(z("[state] __fromCurrentState__ with isTransient false - state:",null),null)}};var ks="df:trigger:click",Ot="df:trigger:focus",Ht="df:trigger:input",xs="df:trigger:submit";var Ti=1;"use strict";var Mo="[dfd-carousel-btn-left]",No="[dfd-carousel-btn-right]",Kr="[dfd-carousel-content]",Ci="ltr",qr={mounted(){this.btnLeftEl=this.el.querySelector(Mo),this.btnRightEl=this.el.querySelector(No),this.contentEl=this.el.querySelector(Kr),getComputedStyle(this.contentEl).direction==="rtl"&&(Ci="rtl"),this.getVisibleChildren=()=>{let t=this.contentEl.getBoundingClientRect();return Array.from(this.contentEl.children).filter(e=>{let i=e.getBoundingClientRect();return t.left<=i.left&&t.right>=i.right})},this.nextPage=()=>{let t=this.getVisibleChildren();if(t.length<=0)return;let e=t.slice(-1).pop(),i=e.nextElementSibling;if(!i)return;let s=this.contentEl.getBoundingClientRect(),r=e.getBoundingClientRect(),n=i.getBoundingClientRect(),o=r.width,a=i?n.x-r.x-r.width:0,l;Ci==="ltr"?l=this.contentEl.scrollLeft+(r.x-s.x):l=this.contentEl.scrollLeft-(r.x+s.x),this.contentEl.scroll({left:l+o+a/2,behavior:"smooth"})},this.previousPage=()=>{let t=this.getVisibleChildren();if(t.length<=0)return;let e=t[0],i=e.previousElementSibling;if(!i)return;let s=this.contentEl.getBoundingClientRect(),r=e.getBoundingClientRect(),n=i.getBoundingClientRect(),o=n.width-(s.x-n.x),a=i?r.x-n.x-n.width:0,l;Ci==="ltr"?l=this.contentEl.scrollLeft-s.width:l=this.contentEl.scrollLeft+s.width,this.contentEl.scroll({left:l+o+a/2,behavior:"smooth"})},this.btnLeftEl.addEventListener("click",this.previousPage),this.btnRightEl.addEventListener("click",this.nextPage)},updated(){this.contentEl=this.el.querySelector(Kr),getComputedStyle(this.contentEl).direction==="rtl"&&(Ci="rtl")},destroyed;var ki=240;unction zr(t){return I(this,null,function*(){if(!Fo(t))throw"invalid image, can't search";let e=yield Gr(t),i=yield Uo(e);return yield Gr(i)})}function Gr(t){return new Promise(function(e,i){let s=new FileReader;s.onload=function(){e(s.result)},s.onerror=s.readAsDataURL(t)})}function Uo(t){return new Promise(function(e,i){let s=new Image;s.onload=function(){let r=document.createElement("canvas");r.width=ki,r.height=ki,r.getContext("2d").drawImage(s,0,0,ki,ki),r.toBlob("image/jpeg")},s.onerror=s.src=t})}var Yr={mounted(){this.search=t=>I(this,null,function*(){this.el.dataset.status="loading";let e=yield zr(t);this.pushEvent("search",{search:{image:e}})}),this.el.addEventListener("change",t=>this.search(t.target.files[0]))}};function Ps(t){setTimeout(()=>{t.focus(),t.selectionStart=t.selectionEnd=t.value.length},0)}"use strict";var Qr={mounted(){this.search=t=>{let e=this.el.dataset.dfdAction||"search";this.pushEvent(e,{search:{query:t}})},this.handleEvent("set-input-focus",,this.handleEvent("unset-input-focus",,this.el.addEventListener("input",,this.el.addEventListener("keydown",t=>{let e=this.el.getAttribute("dfd-value-suggestion");t.key==="Tab"&&e&&e!==this.el.value&&(this.el.value=e,Ps(this.el),this.search(e))})}};use strict";var xi="doofinder.cart.add.click",$o="doofinder.cart.add",Pi="doofinder.cart.hide.price",Ri="doofinder.cart.display.price",Rs="dfd-btn-loading",Zr="dfd-btn-done",en="dfd-btn-error";function tn(t){t.addToCartResolveTimeout=3e3,t.addToCartRejectTimeout=5e3,t.addToCartButtonFeedback=function(i,s){let r=Bo.bind(null,i,s),n=Xo.bind(null,i,i.innerHTML),o=Vo.bind(null,i,n),a=jo.bind(null,i,n);r().then(o,a)},t.handleCartAddClick=i=>{let s=i.detail.target?document.getElementById(i.detail.target.id):i.target,r=new Xe({resolveTimeout:t.addToCartResolveTimeout,rejectTimeout:t.addToCartRejectTimeout});r.then(n=>{t.pushEvent("add-to-cart",{item:i.detail.item,dfid:i.detail.dfid},()=>{typeof n=="function"&&n()}),t.pushEvent("close-add-to-cart-button",{item:i.detail.item,dfid:i.detail.dfid})},n=>{typeof n=="function"&&n(),t.pushEvent("close-add-to-cart-button",{item:i.detail.item,dfid:i.detail.dfid})}),setTimeout(()=>t.tag.dispatch($o,Pe(H({},i.detail.item),{statusPromise:r})),1e3),t.addToCartButtonFeedback&&t.addToCartButtonFeedback(s,r)},t.handleHidePrice=i=>{let s=i.detail.target?document.getElementById(i.detail.target.id):i.target;s.closest(".dfd-card-row").querySelector(".dfd-card-pricing").style.display="none"},t.handleDisplayPrice=i=>{let s=i.detail.target?document.getElementById(i.detail.target.id):i.target;s.closest(".dfd-card-row").querySelector(".dfd-card-pricing").style.display="flex"};let e=!!t.tag&&!!t.tag.dom?t.tag.dom.mount:t.tag.mount;e.addEventListener(xi,t.handleCartAddClick),e.addEventListener(Ge(xi),t.handleCartAddClick),e.addEventListener(Pi,t.handleHidePrice),e.addEventListener(Ge(Pi),t.handleHidePrice),e.addEventListener(Ri,t.handleDisplayPrice),e.addEventListener(Ge(Ri),t.handleDisplayPrice)}function sn(t){let e=!!t.tag&&!!t.tag.dom?t.tag.dom.mount:t.tag.mount;e.removeEventListener(xi,t.handleCartAddClick),e.removeEventListener(Ge(xi),t.handleCartAddClick),e.removeEventListener(Pi,t.handleHidePrice),e.removeEventListener(Ge(Pi),t.handleHidePrice),e.removeEventListener(Ri,t.handleDisplayPrice),e.removeEventListener(Ge(Ri),t.handleDisplayPrice)}function Bo(t,e){return t.setAttribute("disabled",""),t.setAttribute("dfd-update","ignore"),t.innerHTML="",t.classList.add(Rs),e}function Vo(t,e){t.classList.remove(Rs),t.classList.add(Zr),setTimeout(e,1e3)}function jo(t,e){t.classList.remove(Rs),t.classList.add(en),setTimeout(e,2e3)}function Xo(t,e){t.classList.remove(Zr),t.classList.remove(en),t.innerHTML=e,t.removeAttribute("dfd-update"),t.removeAttribute("disabled")}"use strict";var rn={mounted(){this.close=()=>this.pushEvent("close-layer"),this.handleEvent("history-go",,this.handleEvent("close",()=>{let t=this.tag.searchQueryRetention?this.tag.state.get():"";this.tag.updateQuery(t),this.tag.disconnect()}),this.handleEvent("save-state",({state:t})=>{this.tag.state.save(t)}),this.handleEvent("replace-state",,this.handleEvent("disconnect",t=>{t.errors.forEach(,this.tag.destroy()}),this.handleEvent("load",t=>{this.tag.onLoad(t),this.pushEvent("ready")}),this.handleEvent("click-suggestion",t=>I(this,null,function*(){var e;this.tag.trigger.updateQuery((e=t==null?void 0:t.search)==null?void 0:e.query)})),this.handleEvent("search",,this.handleEvent("update-latest-searches",,this.el.addEventListener("contextmenu",t=>{let e=t.target.closest('[dfd-click="item-click"]');if(e){let i=e.getAttribute("dfd-value-link"),s=e.getAttribute("dfd-value-dfid");this.pushEvent("item-click",{link:i,dfid:s},}}),this.el.addEventListener("error",({target:t})=>{if(t.tagName!=="IMG")return;let e=t.closest('[data-dfd-role="card-thumbnail"]');setTimeout(()=>{e==null||e.parentElement.setAttribute("dfd-update","ignore"),e==null||e.classList.add("dfd-card-thumbnail-404")},1)},!0),this.applyOperationBySelector=function(t,e){if(t.startsWith("#")){let i=getElementById(t);e(i)}else this.el.querySelectorAll(t).forEach(},this.handleEvent("dom:add-class",({target:t,newClass:e})=>{this.applyOperationBySelector(t.selector,i=>i==null?void 0:i.classList.add(e))}),this.handleEvent("dom:remove-class",({target:t,oldClass:e})=>{this.applyOperationBySelector(t.selector,i=>i==null?void 0:i.classList.remove(e))}),this.handleEvent("dom:add-attribute",({target:t,name:e,value:i})=>{this.applyOperationBySelector(t.selector,s=>s==null?void 0:s.setAttribute(e,i))}),this.handleEvent("dom:remove-attribute",({target:t,name:e})=>{this.applyOperationBySelector(t.selector,}),this.handleEvent("redirection:update",({redirection:t})=>{this.tag.trigger.redirection=t}),tn(this)},destroyed;var nn=Object.freeze({Linear:EaseInQuad:EaseOutQuad:EaseInOutQuad:EaseInCubic:EaseOutCubic:EaseInOutCubic:EaseInQuart:EaseOutQuart:EaseInOutQuart:EaseInQuint:EaseOutQuint:EaseInOutQuint:);function on(t,e,i,s,r=nn.EaseInQuint){let n=Date.now(),o=e[t];return new Promise((a,l)=>{function c(){let p=Date.now(),g=Math.min(1,(p-n)/s),_=r(g);e[t]=o+_*(i-o),g<1?requestAnimationFrame(c):a()}o===i?a():requestAnimationFrame(c)})}var an=on.bind(null,"scrollTop"),oc=on.bind(null,"scrollLeft");function Wo(t){let e=t.scrollHeight>t.clientHeight,s=window.getComputedStyle(t).overflowY.indexOf("hidden")!==-1;return e&&!s}function Ls(t){return!t||t===document.documentElement?document.documentElement:Wo(t)?t:Ls(t.parentNode)}function ln(t,e){return typeof t!="undefined"?t:e}var Li=class{constructor(e,i,s={}){let{threshold:r}=s;this.handleIntersection=this.handleIntersection.bind(this),this._callback=i,this._io=new IntersectionObserver(this.handleIntersection,{root:e,threshold:ln(r,0)})}observe(e){this._io.disconnect(),e&&this._io.observe(e),z("[ScrollObserver][observe]",e)}unobserve(){this._io.disconnect(),z("[ScrollObserver][unobserve]")}handleIntersection([e]){z("[ScrollObserver][intersection detected] target:",e.target),this._callback(e)}};var hn='[data-dfd-role~="scroll-sentinel"]',Jo='[data-dfd-role~="scroll-top-sentinel"]',Ko="div.dfd-card";function Ii(t,e,i){i?t.scrollTop=e:an(t,e,250)}function qo(t){var s,r;let e=((s=document.querySelector(Ko))==null?void 0:s.offsetHeight)||0,i=((r=document.querySelector(hn))==null?void 0:r.offsetHeight)||0;return t.scrollHeight-i-e*2.6}var cn={mounted(){this.sentinel=()=>this.el.querySelector(hn),this.scrollTopSentinel=this.scrollTarget=this.refreshObservers=()=>{this.scrollObserver.observe(this.sentinel()),this.scrollTopObserver.observe(this.scrollTopSentinel())},this.changeBackToTopVisibility=this.scrollObserver=new Li(this.el,({target:t,isIntersecting:e})=>{if(!e)return;let i={index:t.dataset.index};this.debug('[push] "load-more", params:',i),this.pushEvent("load-more",i)}),this.scrollTopObserver=new Li(this.el,({isIntersecting:t})=>{this.changeBackToTopVisibility(!t)}),this.handleEvent("search",t=>{this.debug('[handle] "search", params:',t);let{index:e,page:i}=t,s=this.sentinel();i===1&&e===(s==null?void 0:s.dataset.index)&&(this.changeBackToTopVisibility(!1),Ii(this.el,0,!0)),this.refreshObservers()}),this.handleEvent("back-to-top",({id:t,fast:e})=>{this.debug(`[handle] "back-to-top", id: ${t}, fast: ${e}`),this.scrollTarget()==="window"?window.scrollTo(0,0):(!t||t===this.el.id)&&Ii(this.el,0,!!e)}),this.handleEvent("change-current-index",()=>{this.scrollObserver.observe(this.sentinel()),this.scrollTopObserver.observe(this.scrollTopSentinel()),Ii(this.el,0,!0)}),this.scrollObserver.observe(this.sentinel()),this.scrollTopObserver.observe(this.scrollTopSentinel())},destroyed,Is={mounted(){this.hideVirtualKeyboard=gi(()=>{let t=document.querySelector("input:focus");t?(this.debug("[hideVirtualKeyboard][blur] input:",t),t.blur()):this.debug("[hideVirtualKeyboard][noop]")},100),this.debug("[observe][touchstart] hideVirtualKeyboard()"),this.el.addEventListener("touchstart",this.hideVirtualKeyboard)},destroyed(){this.debug("[unobserve][touchstart] hideVirtualKeyboard()"),this.el.removeEventListener("touchstart",this.hideVirtualKeyboard)}},Ds={mounted(){this.transientTargetCard=()=>this.el.querySelector(`[dfd-value-dfid="${this.tag.popTargetItemId()}"]`),this.handleEvent("update-scroll",t=>{this.debug('[handle] "update-scroll", params:',t);let e=this.transientTargetCard();setTimeout(()=>{e!=null?e.scrollIntoView({block:"center"}):t.scroll_end&&Ii(Ls(this.el),qo(this.el),!1)},1e3)})}};function Di(t,e,i,s){return new Intl.NumberFormat(t,{style:"currency",maximumFractionDigits:parseInt(i,10),numberingSystem:s,currency:e})}function Oi(t,e,i){return new Intl.NumberFormat(t,{maximumFractionDigits:parseInt(e,10),numberingSystem:i})}var Os=class{ormat(e){let i=e<0,s=Math.pow(10,this.precision),r=(Math.round(e*s)/s).toFixed(this.precision),n=`${parseInt(Math.abs(r||0).toFixed(this.precision),10)}`,o=n.length>3?n.length%3:0,a=r.split(".")[1],l=[];return o>0&&l.push(`${n.substring(0,o)}${this.thousand}`),l.push(n.substring(o).replace(/(\d{3})(?=\d)/g,"$1"+this.thousand)),this.precision>0&&parseInt(a,10)>0&&l.push(`${this.decimal}${a}`),l=this.template.replace(/%s/g,this.symbol).replace(/%v/g,l.join("")),i&&(l=`-${l}`),l}};"use strict";var Ue;((Ue||(Ue={}));var ae;((ae||(ae={}));ar e=window.pageXOffset!==void 0,i=(t.compatMode||"")==="CSS1Compat",s=e?window.pageXOffset:i?t.documentElement.scrollLeft:t.body.scrollLeft,r=e?window.pageYOffset:i?t.documentElement.scrollTop:t.body.scrollTop;return{x:s,y:r}}a(t,e,i,s){if(s===100)return s;var r=Mt(s,t),n=t[r-1],o=t[r];return i?s-n>(o-n)/2?o:n:e[r-1]?t[r-1]+Yo(s-t[r-1],e[r-1]):s}var gn=function(){eturn t.prototype.getDistance=t.prototype.getAbsoluteDistance=function(e,i,s){var r=0;if(e<this.xPct[this.xPct.length-1])for(;e>this.xPct[r+1];)r++;else e===this.xPct[this.xPct.length-1]&&(r=this.xPct.length-2);!s&&e===this.xPct[r+1]&&r++,i===null&&(i=[]);var n,o=1,a=i[r],l=0,c=0,p=0,g=0;for(s?n=(e-this.xPct[r])/(this.xPct[r+1]-this.xPct[r]):n=(this.xPct[r+1]-e)/(this.xPct[r+1]-this.xPct[r]);a>0;)l=this.xPct[r+1+g]-this.xPct[r+g],i[r+g]*o+100-n*100>100?(c=l*n,o=(a-100*n)/i[r+g],n=1):(c=i[r+g]*l/100*o,o=0),s?(p=p-c,this.xPct.length+g>=1&&g--):(p=p+c,this.xPct.length-g>=1&&g++),a=i[r+g]*o;return e+p},t.prototype.toStepping=function(e){return e=oa(this.xVal,this.xPct,e),e},t.prototype.fromStepping=t.prototype.getStep=function(e){return e=la(this.xPct,this.xSteps,this.snap,e),e},t.prototype.getDefaultStep=function(e,i,s){var r=Mt(e,this.xPct);return(e===100||i&&e===this.xPct[r-1])&&(r=Math.max(r-1,1)),(this.xVal[r]-this.xVal[r-1])/s},t.prototype.getNearbySteps=t.prototype.countStepDecimals=t.prototype.hasNoSize=t.prototype.convert=t.prototype.handleEntryPoint=function(e,i){var s;if(e==="min"?s=0:e==="max"?s=100:s=parseFloat(e),!we(s)||!we(i[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(s),this.xVal.push(i[0]);var r=Number(i[1]);s?this.xSteps.push(isNaN(r)?!1:r):isNaN(r)||(this.xSteps[0]=r),this.xHighestCompleteStep.push(0)},t.prototype.handleStepPoint=function(e,i){if(!!i){if(this.xVal[e]===this.xVal[e+1]){this.xSteps[e]=this.xHighestCompleteStep[e]=this.xVal[e];return}this.xSteps[e]=Ns([this.xVal[e],this.xVal[e+1]],i,0)/Ms(this.xPct[e],this.xPct[e+1]);var s=(this.xVal[e+1]-this.xVal[e])/this.xNumSteps[e],r=Math.ceil(Number(s.toFixed(3))-1),n=this.xVal[e]+this.xNumSteps[e]*r;this.xHighestCompleteStep[e]=n}},t}(),vn={to:function(t){return t===void 0?"":t.toFixed(2)},from:Number},_n={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},$e={tooltips:".__tooltips",aria:".__aria"};function ha(t,e){if(!we(e))throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function ca(t,e){if(!we(e))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");t.keyboardPageMultiplier=e}function da(t,e){if(!we(e))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");t.keyboardMultiplier=e}function ua(t,e){if(!we(e))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");t.keyboardDefaultStep=e}function fa(t,e){if(typeof e!="object"||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");if(e.min===void 0||e.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.spectrum=new gn(e,t.snap||!1,t.singleStep)}unction ma(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");t.snap=e}function ga(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");t.animate=e}function va(t,e){if(typeof e!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");t.animationDuration=e}function _a(t,e){var i=[!1],s;if(e==="lower"?e=[!0,!1]:e==="upper"&&(e=[!1,!0]),e===!0||e===!1){for(s=1;s<t.handles;s++)i.push(e);i.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");i=e}t.connect=i}function ba(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function bn(t,e){if(!we(e))throw new Error("noUiSlider: 'margin' option must be numeric.");e!==0&&(t.margin=t.spectrum.getDistance(e))}unction Sa(t,e){var i;if(!we(e)&&!Array.isArray(e))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&!(e.length===2||we(e[0])||we(e[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(e!==0){for(Array.isArray(e)||(e=[e,e]),t.padding=[t.spectrum.getDistance(e[0]),t.spectrum.getDistance(e[1])],i=0;i<t.spectrum.xNumSteps.length-1;i++)if(t.padding[0][i]<0||t.padding[1][i]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var s=e[0]+e[1],r=t.spectrum.xVal[0],n=t.spectrum.xVal[t.spectrum.xVal.length-1];if(s/(n-r)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}unction wa(t,e){if(typeof e!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var i=e.indexOf("tap")>=0,s=e.indexOf("drag")>=0,r=e.indexOf("fixed")>=0,n=e.indexOf("snap")>=0,o=e.indexOf("hover")>=0,a=e.indexOf("unconstrained")>=0,l=e.indexOf("drag-all")>=0,c=e.indexOf("smooth-steps")>=0;if(r){if(t.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");bn(t,t.start[1]-t.start[0])}if(a&&(t.margin||t.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:i||n,drag:s,dragAll:l,smoothSteps:c,fixed:r,snap:n,hover:o,unconstrained:a}}function Aa(t,e){if(e!==!1)if(e===!0||Hi(e)){t.tooltips=[];for(var i=0;i<t.handles;i++)t.tooltips.push(e)}else{if(e=Mi(e),e.length!==t.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");e.forEach(function(s){if(typeof s!="boolean"&&!Hi(s))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),t.tooltips=e}}unction Ca(t,e){if(!Hi(e))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");t.ariaFormat=e}unction xa(t,e){if(typeof e!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");t.keyboardSupport=e}unction Ra(t,e){if(typeof e!="string"&&e!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function La(t,e){if(typeof e!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof t.cssPrefix=="string"?(t.cssClasses={},Object.keys(e).forEach():t.cssClasses=e}function En(t){var e={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:vn,format:vn},i={step:{r:!1,t:ha},keyboardPageMultiplier:{r:!1,t:ca},keyboardMultiplier:{r:!1,t:da},keyboardDefaultStep:{r:!1,t:ua},start:{r:!0,t:pa},connect:{r:!0,t:_a},direction:{r:!0,t:ya},snap:{r:!1,t:ma},animate:{r:!1,t:ga},animationDuration:{r:!1,t:va},range:{r:!0,t:fa},orientation:{r:!1,t:ba},margin:{r:!1,t:bn},limit:{r:!1,t:Ea},padding:{r:!1,t:Sa},behaviour:{r:!0,t:wa},ariaFormat:{r:!1,t:Ca},format:{r:!1,t:ka},tooltips:{r:!1,t:Aa},keyboardSupport:{r:!0,t:xa},documentElement:{r:!1,t:Pa},cssPrefix:{r:!0,t:Ra},cssClasses:{r:!0,t:La},handleAttributes:{r:!1,t:Ta}},s={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:_n,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};t.format&&!t.ariaFormat&&(t.ariaFormat=t.format),Object.keys(i).forEach(function(l){if(!Hs(t[l])&&s[l]===void 0){if(i[l].r)throw new Error("noUiSlider: '"+l+"' is required.");return}i[l].t(e,Hs(t[l])?t[l]:s[l])}),e.pips=t.pips;var r=document.createElement("div"),n=r.style.msTransform!==void 0,o=r.style.transform!==void 0;e.transformRule=o?"transform":n?"msTransform":"webkitTransform";var a=[["left","top"],["right","bottom"]];return e.style=a[e.dir][e.ort],e}function Ia(t,e,i){var s=ta(),r=sa(),n=r&&ia(),o=t,a,l,c,p,g,_=e.spectrum,S=[],b=[],w=[],M=0,P={},R=t.ownerDocument,W=e.documentElement||R.documentElement,U=R.body,m=R.dir==="rtl"||e.ort===1?0:100;unction Q(h,d){var u=T(h,e.cssClasses.origin),v=T(u,e.cssClasses.handle);if(T(v,e.cssClasses.touchArea),v.setAttribute("data-handle",String(d)),e.keyboardSupport&&(v.setAttribute("tabindex","0"),v.addEventListener("keydown",),e.handleAttributes!==void 0){var y=e.handleAttributes[d];Object.keys(y).forEach(}return v.setAttribute("role","slider"),v.setAttribute("aria-orientation",e.ort?"vertical":"horizontal"),d===0?oe(v,e.cssClasses.handleLower):d===e.handles-1&&oe(v,e.cssClasses.handleUpper),u.handle=v,u}nction ie(h){oe(h,e.cssClasses.target),e.dir===0?oe(h,e.cssClasses.ltr):oe(h,e.cssClasses.rtl),e.ort===0?oe(h,e.cssClasses.horizontal):oe(h,e.cssClasses.vertical);var d=getComputedStyle(h).direction;return d==="rtl"?oe(h,e.cssClasses.textDirectionRtl):oe(h,e.cssClasses.textDirectionLtr),T(h,e.cssClasses.base)}function $(h,d){return!e.tooltips||!e.tooltips[d]?!1:T(h.firstChild,e.cssClasses.tooltip)}nction ft(h){h!=null?(l[h].setAttribute("disabled",""),l[h].handle.removeAttribute("tabindex")):(o.setAttribute("disabled",""),l.forEach()}function Bi(h){h!=null?(l[h].removeAttribute("disabled"),l[h].handle.setAttribute("tabindex","0")):(o.removeAttribute("disabled"),l.forEach()}unction x(){Be(),g=l.map($),Xi("update"+$e.tooltips,function(h,d,u){if(!(!g||!e.tooltips)&&g[d]!==!1){var v=h[d];e.tooltips[d]!==!0&&(v=e.tooltips[d].to(u[d])),g[d].innerHTML=v}})}unction j(h){if(h.mode===Ue.Range||h.mode===Ue.Steps)return _.xVal;if(h.mode===Ue.Count){if(h.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var d=h.values-1,u=100/d,v=[];d--;)v[d]=d*u;return v.push(100),L(v,h.stepped)}return h.mode===Ue.Positions?L(h.values,h.stepped):h.mode===Ue.Values?h.stepped?h.values.map(:h.values:[]}unction B(h){ar u=j(h),v={},y=_.xVal[0],E=_.xVal[_.xVal.length-1],C=!1,A=!1,V=0;return u=Go(u.slice().sort(),u[0]!==y&&(u.unshift(y),C=!0),u[u.length-1]!==E&&(u.push(E),A=!0),u.forEach(function(N,K){var q,D,Y,re=N,Z=u[K+1],te,Ki,qi,zi,qs,Gi,zs,Gs=h.mode===Ue.Steps;for(Gs&&(q=_.xNumSteps[K]),q||(q=Z-re),Z===void 0&&(Z=re),q=Math.max(q,1e-7),D=re;D<=Z;D=d(D,q)){for(te=_.toStepping(D),Ki=te-V,qs=Ki/(h.density||1),Gi=Math.round(qs),zs=Ki/Gi,Y=1;Y<=Gi;Y+=1)qi=V+Y*zs,v[qi.toFixed(5)]=[_.fromStepping(qi),0];zi=u.indexOf(D)>-1?ae.LargeValue:Gs?ae.SmallValue:ae.NoValue,!K&&C&&D!==Z&&(zi=0),D===Z&&A||(v[te.toFixed(5)]=[D,zi]),V=te}}),v}function Oe(h,d,u){var v,y,E=R.createElement("div"),C=(v={},v[ae.None]="",v[ae.NoValue]=e.cssClasses.valueNormal,v[ae.LargeValue]=e.cssClasses.valueLarge,v[ae.SmallValue]=e.cssClasses.valueSub,v),A=(y={},y[ae.None]="",y[ae.NoValue]=e.cssClasses.markerNormal,y[ae.LargeValue]=e.cssClasses.markerLarge,y[ae.SmallValue]=e.cssClasses.markerSub,y),V=[e.cssClasses.valueHorizontal,e.cssClasses.valueVertical],N=[e.cssClasses.markerHorizontal,e.cssClasses.markerVertical];oe(E,e.cssClasses.pips),oe(E,e.ort===0?e.cssClasses.pipsHorizontal:e.cssClasses.pipsVertical);unction q(D,Y,re){if(re=d?d(Y,re):re,re!==ae.None){var Z=T(E,!1);Z.className=K(re,e.cssClasses.marker),Z.style[e.style]=D+"%",re>ae.NoValue&&(Z=T(E,!1),Z.className=K(re,e.cssClasses.value),Z.setAttribute("data-value",String(Y)),Z.style[e.style]=D+"%",Z.innerHTML=String(u.to(Y)))}}return Object.keys(h).forEach(,E}unction Te(h){ue();var d=B(h),u=h.filter,v=h.format||{to:;return p=o.appendChild(Oe(d,u,v)),p}unction se(h,d,u,v){var y=function(C){var A=Qe(C,v.pageOffset,v.target||d);if(!A||le()&&!v.doNotReject||ea(o,e.cssClasses.tap)&&!v.doNotReject||h===s.start&&A.buttons!==void 0&&A.buttons>1||v.hover&&A.buttons)return!1;n||A.preventDefault(),A.calcPoint=A.points[e.ort],u(A,v)},E=[];return h.split(" ").forEach(function(C){d.addEventListener(C,y,n?{passive:!0}:!1),E.push([C,y])}),E}function Qe(h,d,u){var v=h.type.indexOf("touch")===0,y=h.type.indexOf("mouse")===0,E=h.type.indexOf("pointer")===0,C=0,A=0;if(h.type.indexOf("MSPointer")===0&&(E=!0),h.type==="mousedown"&&!h.buttons&&!h.touches)return!1;if(v){var V=if(h.type==="touchstart"){var N=Array.prototype.filter.call(h.touches,V);if(N.length>1)return!1;C=N[0].pageX,A=N[0].pageY}else{var K=Array.prototype.find.call(h.changedTouches,V);if(!K)return!1;C=K.pageX,A=K.pageY}}return d=d||mn(R),(y||E)&&(C=h.clientX+d.x,A=h.clientY+d.y),h.pageOffset=d,h.points=[C,A],h.cursor=y||E,h}function be(h){var d=h-Qo(a,e.ort),u=d*100/Ve();return u=pn(u),e.dir?100-u:u}function pt(h){var d=100,u=!1;return l.forEach(function(v,y){if(!Ye(y)){var E=b[y],C=Math.abs(E-h),A=C===100&&d===100,V=C<d,N=C<=d&&h>E;(V||N||A)&&(u=y,d=C)}}),u}function Ft(h,d){h.type==="mouseout"&&h.target.nodeName==="HTML"&&h.relatedTarget===null&&Vi(h,d)}function Bn(h,d){if(navigator.appVersion.indexOf("MSIE 9")===-1&&h.buttons===0&&d.buttonsProperty!==0)return Vi(h,d);var u=(e.dir?-1:1)*(h.calcPoint-d.startCalcPoint),v=u*100/d.baseSize;Vs(u>0,v,d.locations,d.handleNumbers,d.connect)}function Vi(h,d){d.handle&&(Ni(d.handle,e.cssClasses.active),M-=1),d.listeners.forEach(,M===0&&(Ni(o,e.cssClasses.drag),Ji(),h.cursor&&(U.style.cursor="",U.removeEventListener("selectstart",un))),e.events.smoothSteps&&(d.handleNumbers.forEach(,d.handleNumbers.forEach(function(u){G("update",u)})),d.handleNumbers.forEach(}function ji(h,d){if(!d.handleNumbers.some(Ye)){var u;if(d.handleNumbers.length===1){var v=l[d.handleNumbers[0]];u=v.children[0],M+=1,oe(u,e.cssClasses.active)}h.stopPropagation();var y=[],E=se(s.move,W,Bn,{target:h.target,handle:u,connect:d.connect,listeners:y,startCalcPoint:h.calcPoint,baseSize:Ve(),pageOffset:h.pageOffset,handleNumbers:d.handleNumbers,buttonsProperty:h.buttons,locations:b.slice()}),C=se(s.end,W,Vi,{target:h.target,handle:u,listeners:y,doNotReject:!0,handleNumbers:d.handleNumbers}),A=se("mouseout",W,Ft,{target:h.target,handle:u,listeners:y,doNotReject:!0,handleNumbers:d.handleNumbers});y.push.apply(y,E.concat(C,A)),h.cursor&&(U.style.cursor=getComputedStyle(h.target).cursor,l.length>1&&oe(o,e.cssClasses.drag),U.addEventListener("selectstart",un,!1)),d.handleNumbers.forEach(}}function Vn(h){h.stopPropagation();var d=be(h.calcPoint),u=pt(d);u!==!1&&(e.events.snap||fn(o,e.cssClasses.tap,e.animationDuration),je(u,d,!0,!0),Ji(),G("slide",u,!0),G("update",u,!0),e.events.snap?ji(h,{handleNumbers:[u]}):(G("change",u,!0),G("set",u,!0)))}function jn(h){var d=be(h.calcPoint),u=_.getStep(d),v=_.fromStepping(u);Object.keys(P).forEach(function(y){y.split(".")[0]==="hover"&&P[y].forEach(})}function Xn(h,d){if(le()||Ye(d))return!1;var u=["Left","Right"],v=["Down","Up"],y=["PageDown","PageUp"],E=["Home","End"];e.dir&&!e.ort?u.reverse():e.ort&&!e.dir&&(v.reverse(),y.reverse());var C=h.key.replace("Arrow",""),A=C===y[0],V=C===y[1],N=C===v[0]||C===u[0]||A,K=C===v[1]||C===u[1]||V,q=C===E[0],D=C===E[1];if(!N&&!K&&!q&&!D)return!0;h.preventDefault();var Y;if(K||N){var re=N?0:1,Z=Ks(d),te=Z[re];if(te===null)return!1;te===!1&&(te=_.getDefaultStep(b[d],N,e.keyboardDefaultStep)),V||A?te*=e.keyboardPageMultiplier:te*=e.keyboardMultiplier,te=Math.max(te,1e-7),te=(N?-1:1)*te,Y=S[d]+te}else D?Y=e.spectrum.xVal[e.spectrum.xVal.length-1]:Y=e.spectrum.xVal[0];return je(d,_.toStepping(Y),!0,!0),G("slide",d),G("update",d),G("change",d),G("set",d),!1}function Wn(h){h.fixed||l.forEach(,h.tap&&se(s.start,a,Vn,{}),h.hover&&se(s.move,a,jn,{hover:!0}),h.drag&&c.forEach(function(d,u){if(!(d===!1||u===0||u===c.length-1)){var v=l[u-1],y=l[u],E=[d],C=[v,y],A=[u-1,u];oe(d,e.cssClasses.draggable),h.fixed&&(E.push(v.children[0]),E.push(y.children[0])),h.dragAll&&(C=l,A=w),E.forEach(}})}function Xi(h,d){P[h]=P[h]||[],P[h].push(d),h.split(".")[0]==="update"&&l.forEach(}unction mt(h){var d=h&&h.split(".")[0],u=d?h.substring(d.length):h;Object.keys(P).forEach(function(v){var y=v.split(".")[0],E=v.substring(y.length);(!d||d===y)&&(!u||u===E)&&(!Jn(E)||u===E)&&delete P[v]})}unction Ut(h,d,u,v,y,E,C){var A;return l.length>1&&!e.events.unconstrained&&(v&&d>0&&(A=_.getAbsoluteDistance(h[d-1],e.margin,!1),u=Math.max(u,A)),y&&d<l.length-1&&(A=_.getAbsoluteDistance(h[d+1],e.margin,!0),u=Math.min(u,A))),l.length>1&&e.limit&&(v&&d>0&&(A=_.getAbsoluteDistance(h[d-1],e.limit,!1),u=Math.min(u,A)),y&&d<l.length-1&&(A=_.getAbsoluteDistance(h[d+1],e.limit,!0),u=Math.max(u,A))),e.padding&&(d===0&&(A=_.getAbsoluteDistance(0,e.padding[0],!1),u=Math.max(u,A)),d===l.length-1&&(A=_.getAbsoluteDistance(100,e.padding[1],!0),u=Math.min(u,A))),C||(u=_.getStep(u)),u=pn(u),u===h[d]&&!E?!1:u}unction Vs(h,d,u,v,y){var E=u.slice(),C=v[0],A=e.events.smoothSteps,V=[!h,h],N=[h,!h];v=v.slice(),h&&v.reverse(),v.length>1?v.forEach(function(q,D){var Y=Ut(E,q,E[q]+d,V[D],N[D],!1,A);Y===!1?d=0:(d=Y-E[q],E[q]=Y)}):V=N=[!0];var K=!1;v.forEach(,K&&(v.forEach(,y!=null&&G("drag",C))}unction Kn(h,d){b[h]=d,S[h]=_.fromStepping(d);var u=js(d,0)-m,v="translate("+Wi(u+"%","0")+")";l[h].style[e.transformRule]=v,Xs(h),Xs(h+1)}unction je(h,d,u,v,y,E){return y||(d=Ut(b,h,d,u,v,!1,E)),d===!1?!1:(Kn(h,d),!0)}function Xs(h){if(!!c[h]){var d=0,u=100;h!==0&&(d=b[h-1]),h!==c.length-1&&(u=b[h]);var v=u-d,y="translate("+Wi(js(d,v)+"%","0")+")",E="scale("+Wi(v/100,"1")+")";c[h].style[e.transformRule]=y+" "+E}}function Ws(h,d){return h===null||h===!1||h===void 0||(typeof h=="number"&&(h=String(h)),h=e.format.from(h),h!==!1&&(h=_.toStepping(h)),h===!1||isNaN(h))?b[d]:h}function $t(h,d,u){var v=Mi(h),y=b[0]===void 0;d=d===void 0?!0:d,e.animate&&!y&&fn(o,e.cssClasses.tap,e.animationDuration),w.forEach(;var E=w.length===1?0:1;if(y&&_.hasNoSize()&&(u=!0,b[0]=0,w.length>1)){var C=100/(w.length-1);w.forEach(}for(;E<w.length;++E)w.forEach(;Ji(),w.forEach(function(A){G("update",A),v[A]!==null&&d&&G("set",A)})}unction zn(h,d,u,v){if(h=Number(h),!(h>=0&&h<w.length))throw new Error("noUiSlider: invalid handle number, got: "+h);je(h,Ws(d,h),!0,!0,v),G("update",h),u&&G("set",h)}function Js(h){if(h===void 0&&(h=!1),h)return S.length===1?S[0]:S.slice(0);var d=S.map(e.format.to);return d.length===1?d[0]:d}unction Ks(h){var d=b[h],u=_.getNearbySteps(d),v=S[h],y=u.thisStep.step,E=null;if(e.snap)return[v-u.stepBefore.startValue||null,u.stepAfter.startValue-v||null];y!==!1&&v+y>u.stepAfter.startValue&&(y=u.stepAfter.startValue-v),v>u.thisStep.startValue?E=u.thisStep.step:u.stepBefore.step===!1?E=!1:E=v-u.stepBefore.highestStep,d===100?y=null:d===0&&(E=null);var C=_.countStepDecimals();return y!==null&&y!==!1&&(y=Number(y.toFixed(C))),E!==null&&E!==!1&&(E=Number(E.toFixed(C))),[E,y]}unction Qn(h,d){var u=Js(),v=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];v.forEach(function(E){h[E]!==void 0&&(i[E]=h[E])});var y=En(i);v.forEach(,_=y.spectrum,e.margin=y.margin,e.limit=y.limit,e.padding=y.padding,e.pips?Te(e.pips):ue(),e.tooltips?x():Be(),b=[],$t(Hs(h.start)?h.start:u,d)}n();var Bt={destroy:Gn,steps:Yn,on:Xi,off:mt,get:Js,set:$t,setHandle:zn,reset:qn,disable:ft,enable:Bi,__moveHandles:options:i,updateOptions:Qn,target:o,removePips:ue,removeTooltips:Be,getPositions:getTooltips:function(){return g},getOrigins:function(){return l},pips:Te};return Bt}function Da(t,e){if(!t||!t.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var i=En(e),s=Ia(t,i,e);return t.noUiSlider=s,s}var Sn={__spectrum:gn,cssClasses:_n,create:Da};unction wn(t){let e={};return{tofrom}function Fs(t,e){let{min:i,max:s,from:r,to:n}=t;return i=parseFloat(i),s=parseFloat(s),i===s&&s++,r=parseFloat(r)||i,n=parseFloat(n)||s,{range:{min:i,max:s},start:[e.to(r),e.to(n)]}}function An(t,e,i,s={}){return Sn.create(t,H({cssPrefix:"dfd-slider-",orientation:"horizontal",direction:s.rtl?"rtl":"ltr",tooltips:!0,padding:0,connect:!0,animate:!0,step:1,keyboardSupport:!0,format:e,pips:{mode:"count",values:3,density:6,format:e}},i))}function Tn(t,e,i){let s=getComputedStyle(t).direction==="rtl",r=t.noUiSlider.options.direction==="rtl",n=t.noUiSlider.options.orientation==="vertical",a=t.noUiSlider.getTooltips().map(,l=t.noUiSlider.getOrigins();a.forEach(,t.noUiSlider.on("update",function(c,p,g,_,S){let b=[[]],w=[[]],M=[[]],P=0;a[0]&&(b[0][0]=0,w[0][0]=S[0],M[0][0]=c[0]);for(let R=1;R<S.length;R++)(!a[R]||S[R]-S[R-1]>e)&&(P++,b[P]=[],M[P]=[],w[P]=[]),a[R]&&(b[P].push(R),M[P].push(c[R]),w[P].push(S[R]));b.forEach(function(R,W){let U=R.length;for(let m=0;m<U;m++){let T=R[m];if(m===U-1){let Q=0;w[W].forEach(;let J=n?"bottom":"right",O=r?0:U-1,ie=1e3-w[W][O];Q=(s&&!n?100:0)+Q/U-ie,a[T].innerHTML=yn(M[W]).join(i),a[T].style.display="block",a[T].style[J]=Q+"%"}else a[T].style.display="none"}})})}"use strict";var Cn={mounted(){let{facet:t,language:e,currency:i,currencyDecimal:s,currencyFormat:r,currencyPrecision:n,currencySymbol:o,currencyThousand:a,decimalPrecision:l,min:c,max:p,from:g,to:_,target:S}=this.el.dataset,b=this.el.dataset.autohideTooltips==="true",w=this.options.numberingSystem||"latn",M=(document.documentElement.getAttribute("dir")||"").toLowerCase()==="rtl",P=(()=>typeof r=="string"?new Os(r,o,a,s,parseInt(n,10)):i?Di(e,i,parseInt(n,10),w):Oi(e,parseInt(l,10),w))();this.format=wn(P),this.slider=An(this.el,this.format,Fs({min:c,max:p,from:g,to:_},this.format),{rtl:M}),this.slider.on("change",R=>{let[W,U]=R,T={index:this.el.dataset.index,range:{[t]:{from:this.format.from(W),to:this.format.from(U)}}};S?this.pushEventTo(S,"slide",T):this.pushEvent("slide",T)}),b||Tn(this.el,25," - ")},updated(){let{min:t,max:e,from:i,to:s}=this.el.dataset;this.slider.updateOptions(Fs({min:t,max:e,from:i,to:s},this.format))},destroyed;"use strict";var kn={mounted(){let t=0,e=0;this.el.addEventListener("touchstart",!1),this.el.addEventListener("touchend",i=>{e=i.changedTouches[0].screenY,e>t&&this.pushEvent(this.el.dataset.action,{index:""})},!1)}};var Fi=window.SpeechRecognition||window.webkitSpeechRecognition||null,xn=["click"],Pn=["start","end","error","result"],Oa="voice-search",Rn="voice-status-change";function Ha(t){return t.results.length>0?t.results[0][0].transcript:null}var Ln={mounted(){!Fi||(this.recording=!1,this.driver=new Fi,this.driver.continuous=!1,this.driver.interimResults=!1,this.handleVoiceEvent=t=>{switch(t.type){case"end":case"error":this.driver.stop(),this.recording=!1,this.pushEvent(Rn,{recording:!1});break;case"click":this.driver[this.recording?"stop":"start"](),this.recording=!this.recording,this.pushEvent(Rn,{recording:this.recording});break;case"result":let e=Ha(t);e&&this.pushEvent(Oa,{query:e});break}},xn.forEach(t=>this.el.addEventListener(t,this.handleVoiceEvent)),Pn.forEach(t=>this.driver.addEventListener(t,this.handleVoiceEvent)))},destroyed(){xn.forEach(t=>this.el.removeEventListener(t,this.handleVoiceEvent)),Pn.forEach(t=>this.driver.removeEventListener(t,this.handleVoiceEvent)),this.driver=null}};function Ae(t,e,...i){var o;let s=((o=i.find()==null?void 0:o.options)||{},r={get tag(){return e},get optionsdebug(...a){z(`[hook][${t}]`,...a)}};return["mounted","beforeUpdate","updated","destroyed","disconnected","reconnected"].forEach(a=>{let l=i.map(.filter(;r[a]=function(){l.length>0&&this.debug(`${a}()`),l.forEach(}}),r}unction Us(t,e,i){let s=i.x,r=s+i.width,n=i.y,o=n+i.height;return t>=s&&t<=r&&e>=n&&e<=o}function Dn(t,e=!1){let i=Jr("__DF_LAYER_SERVER__")||`https://${t.toLowerCase()}-layer.doofinder.com`;return e?i.replace(/^http/,"ws"):i}function On(){var t;if("maxTouchPoints"in navigator)return navigator.maxTouchPoints>0;if("msMaxTouchPoints"in navigator)return navigator.msMaxTouchPoints>0;{let e=(t=window.matchMedia)==null?void 0:t.call(window,"(pointer:coarse)");if((e==null?void 0:e.media)==="(pointer:coarse)")return!!e.matches;if("orientation"in window)return!0;{let i=navigator.userAgent;return/\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(i)||/\b(Android|Windows Phone|iPad|iPod)\b/i.test(i)}}}function Hn(t){let e=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)"));if(e)return decodeURIComponent(e[1])}function Mn(t){if(t instanceof PointerEvent)switch(t.pointerType){case"mouse":case"pen":case"touch":return!0;default:return!1}else if(t instanceof MouseEvent){let{pageX:e,pageY:i,target:s}=t;return!(e===i&&e===0&&Ma(s))}return!1}function Ma(t){return t.getAttribute("type")==="submit"&&(t.tagName==="BUTTON"||t.tagName==="INPUT")}function $s(t){return typeof t=="undefined"?null:t}var Na="Search",Nn=On(),Fn="latestSearches",Fa="dfd-root",Un="dfdTarget",Ua=10,Nt="transientState",Bs="isTransient",Ui=class{constructor(e){this.__handleTriggerEvent__=this.__handleTriggerEvent__.bind(this),this.__handlePopstate__=this.__handlePopstate__.bind(this),this.__handleLinkClick__=this.__handleLinkClick__.bind(this),this.__handleDocumentClick__=this.__handleDocumentClick__.bind(this),this.__handleDocumentKeyup__=this.__handleDocumentKeyup__.bind(this),this.__updateSocketParams__=this.__updateSocketParams__.bind(this);let{id:i,installationId:s,zone:r,language:n,currency:o,exportResultsData:a,hashid:l,trigger:c,autoload:p,urlHash:g,search_query_retention:_,layerType:S}=e;this._installationId=s,this._zone=r,this._hashid=l,this._language=n,this._currency=o,this._exportResultsData=a,this._layerType=S,this._mount=this.__createMount__(i),this._mount.addEventListener("click",this.__handleLinkClick__),this._eventBus=new Ts(this._mount.id),this._eventBusSubscriptions=[ks,Ot,Ht,xs].map(,this._trigger=c,this._trigger.setEventBus(this._eventBus),this._display=new As(this._mount),this._state=new Ai({installationId:s,autoload:p,urlHash:g}),this._data=new ui(`${s}.data`),this._sessionData=new ui(`${s}.data`,window.sessionStorage),this._params=this.__buildSocketParams__(e),this._hooks=this.__buildSocketHooks__(e),this._liveSocket=null,this._liveSocketConnectedPromise=new Xe,this._theme=null,this._layerHook=null,_==null?this._searchQueryRetention=g:this._searchQueryRetention=_,this._transientQuery=null,this.closable&&this.mount.classList.add("dfd-closable"),window.addEventListener("popstate",this.__handlePopstate__),this._trigger.flushMessages(),this.__applyTransientState__(),this.__loadState__().then(}__createMount__(e){let i=document.createElement("div");return i.id=e||`df-${vi(32)}`,i.dataset.dfdView=Na,i.setAttribute(De,""),i.classList.add(Fa),Object.defineProperty(i,"doofinderTag",{value:this,writable:!1}),i}get mount(){return this._mount}get trigger(){return this._trigger}get display(){return this._display}get hashid(){return this._hashid}get installationId(){return this._installationId}get zone(){return this._zone}get language(){return this._language}get currency(){return this._currency}get exportResultsData(){return this._exportResultsData}get layerType(){return this._layerType}get searchQueryRetention(){return this._searchQueryRetention}get data(){return this._data}et layerHook(){return this._layerHook||(this._layerHook=this.getHooksByName("Layer").pop()),this._layerHook}get closable(){return this.display.type!==qe||!this.state.hasQueryParam}enableDebugebug(...e){z("[tag]",...e)}saveTransientState(e){this._sessionData.setItem(Nt,e),this._sessionData.setItem(Bs,!0),this.debug("save transient state:",e)}__popTransientState__(){let e=this._sessionData.getItem(Nt)||null;return this._sessionData.removeItem(Nt),this.debug("pop transient state:",e),e}__handleTriggerEvent__(e){let{source:i,originalEvent:s}=e.detail,{query:r}=e.detail;!r&&this._transientQuery&&(r=this._transientQuery);let n=r?{query:r}:{};this.connect(n).then(()=>{this.__shouldDisplay__(e)?(this.show(i),e.type===Ht&&this.search(r)):e.type===xs&&this.submit(r,o=>{var l;if(!o)return;let{submit:a}=o||{};a&&((l=s==null?void 0:s.target.closest("form"))==null||l.submit())})})}__applyTransientState__(){let e=this._sessionData.getItem(Nt);this._sessionData.getItem(Bs)&&(this._searchQueryRetention?(this.debug("apply transient state - search query retention true:",e),this.updateQuery(e)):(this.debug("apply transient state - search query retention false:",""),this._state.replace(""),this.updateQuery("")),this._sessionData.removeItem(Bs),this._sessionData.removeItem(Nt))}__shouldDisplay__(e){let{query:i}=e.detail;switch(this._display.type){case fi:return(e.type===Ht||e.type===Ot)&&(this._display.screenType==="classic-initial"||!!i);case qe:return(e.type===Ht||e.type===Ot)&&!!i;case pi:return e.type===ks||e.type===Ot;default:return!1}}__handlePopstate__(e){this.debug("handle pop state event:",e),this._liveSocket?this._state.validEvent(e)?this.__changeState__(e.state):this.disconnect():this.__loadState__()}__changeState__(e){this.debug("change state:",e),this.layerHook?this.layerHook.pushEvent("change-state",e):this.debug("tried to change state but hook did not exist:",e)}__handleLinkClick__(e){if(e.target.href){let i=e.target.closest("[dfd-value-dfid]"),s=i==null?void 0:i.getAttribute("dfd-value-dfid");s&&this._sessionData.setItem(Un,s),this._liveSocket.socket.preventReconnect=!0;let r=!0;this.saveTransientState(this._state.get(r))}else this._liveSocket.socket.preventReconnect=!1}_handleDocumentClick__(e){if(this._display.type===qe||!Mn(e))return;let{clientX:i,clientY:s}=e;if(Us(i,s,this._mount.getBoundingClientRect()))return;let r=this._display.method.positionReference;!!r&&(Us(i,s,r.getBoundingClientRect())||e.target.closest('button[type="submit"]')&&e.target.closest("form")===r.closest("form"))||this.close()}__handleDocumentKeyup__(e){e.key==="Escape"&&this.layerType!=="category_pages"&&this.close()}__loadState__(){let e=this._state.get();return this.debug("load state:",e),e?(this._state.saveAbsoluteURL(),this.updateQuery(e),this.connect({state:e}).then():Promise.resolve()}updateQuery(e){let i=Ai.getQuery(e);this._trigger.updateQuery(i),this._transientQuery=i}getLatestSearchesLoad(e){let{min_capture_length:i,capture_submit:s,align:r,display_type:n,insertion_point:o,insertion_method:a,screen_type:l,theme:c}=e;this.__updateTrigger__({min_capture_length:i,capture_submit:s}),this.__updateDisplay__({display_type:n,insertion_point:o,insertion_method:a,screen_type:l,theme:c,align:r}),this._liveSocketConnectedPromise.resolve(e)}__updateTrigger__({min_capture_length:e,capture_submit:i}){this._trigger.setCaptureLength(e),this._trigger.captureSubmit=i}__updateDisplay__({display_type:e,insertion_point:i,insertion_method:s,screen_type:r,theme:n,align:o}){this._display.setType(e,{placement:{insertionPoint:i,insertionMethod:s},align:o}),this._display.screenType=r,this._display.updateTheme(n),this._display.hidden||this.updatePosition()}updatePosition(e){return I(this,null,function*(){this._display.updatePosition({positionReference:e||(yield this._trigger.getElement())})})}close(){var e,i;this.closable&&((i=(e=this.getHooksByName("Layer"))==null?void 0:e.pop())==null||i.close())}show(e){return I(this,null,function*(){yield this.updatePosition(e),yield this._display.show(),this.dispatch("doofinder.show")})}hide(){return I(this,null,function*(){yield this._display.hide(),this.dispatch("doofinder.hide")})}dispatch(e,i={}){let s=Pe(H({},i),{tag:this});document.dispatchEvent(new CustomEvent(e,{detail:s}))}connect(e){if(!this._liveSocket){let s=`${Dn(this._zone,!0)}/layer/${Ti}`,r={params:hooks:this._hooks,doofinderMount:this._mount,disconnectCallback:()=>{this.__afterDisconnect__(),this.hide(),this.debug("layer died and can't reconnect automatically! \u{1F92C}")},metadata:{click:(n,o)=>({keys:{altKey:n.altKey,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,metaKey:n.metaKey}})}};this.debug(`creating live socket for layer: ${this._mount.id}`),this._liveSocket=new Dt(s,Zi,r),this._liveSocket.connect(),Doofinder.Session.setLive("layer"),document.addEventListener("click",this.__handleDocumentClick__),document.addEventListener("keyup",this.__handleDocumentKeyup__,{passive:!0})}return this._liveSocketConnectedPromise}open(){return I(this,arguments,function*(e={}){let{search:i,screen:s}=e,r=H({},e);i!=null&&!s&&(r.screen="fallback"),typeof i=="string"&&(delete r.search,r.query=i),yield this.connect(r),yield this.show(),typeof i=="object"&&this.search(i)})}__afterDisconnect__(){this._liveSocket&&(this._liveSocket.unbindTopLevelEvents(),this._liveSocket.destroyAllViews()),this._layerHook=null,this._liveSocket=null,this.dispatch("doofinder.disconnect")}disconnect(){var e;this.layerType!=="category_pages"&&(this.debug(`disconnecting from live socket: ${this._mount.id}`),(e=this._liveSocket)==null||e.disconnect(()=>{this.__afterDisconnect__(),this.hide(),document.removeEventListener("keyup",this.__handleDocumentKeyup__),document.removeEventListener("click",this.__handleDocumentClick__)}),this._liveSocketConnectedPromise=new Xe)}destroy(){return I(this,null,function*(){var e;this.debug(`destroy: ${this._mount.id}`),(e=this._liveSocket)==null||e.disconnect(),this._liveSocket=null,this._eventBusSubscriptions.forEach(,this._eventBusSubscriptions=null,this._eventBus.teardown(),this._eventBus=null,yield this._display.destroy(),this._display=null,window.removeEventListener("popstate",this.__handlePopstate__),document.removeEventListener("keyup",this.__handleDocumentKeyup__),document.removeEventListener("click",this.__handleDocumentClick__),this.dispatch("doofinder.destroy"),this._trigger.destroy()})}getHooksByName(e){if(this._liveSocket){let i=this._liveSocket.getViewByEl(this._mount);return Array.from(this._mount.querySelectorAll(`[dfd-hook="${e}"]`)).map(}else return[]}search(e,i){var r;let s=typeof e=="string"?{query:e}:e;(r=this.layerHook)==null||r.pushEvent("search-suggest",{search:s},i)}changeLocale(e,i,s){var r;(r=this.layerHook)==null||r.pushEvent("change-locale",{language:e,currency:i},s)}submit(e,i){var s;(s=this.layerHook)==null||s.pushEvent("search-submit",{search:{query:e}},i)}__buildSocketParams__(e){let{params:i,vars:s,indices:r,state:n}=e,o={hashid:this._hashid,origin:window.location.hostname,indices:r,params:i,vars:s,state:n};return["indices","search-server"].filter(a=>!o[a]).forEach(,o}__buildSocketHooks__(e){let i=e.hooks||{},s={Carousel:Ae("Carousel",this,qr,i.Carousel||{}),ImageSearch:Ae("ImageSearch",this,Yr),Input:Ae("Input",this,Qr,i.Input||{}),Layer:Ae("Layer",this,rn,i.Layer||{}),EmbeddedResults:Ae("EmbeddedResults",this,Ds,Nn?Is:{},i.EmbeddedResults||{}),Results:Ae("Results",this,cn,Nn?Is:{},Ds,i.Results||{}),Slider:Ae("Slider",this,Cn,i.Slider||{}),Swipe:Ae("Swipe",this,kn,i.Swipe||{}),VoiceSearch:Ae("VoiceSearch",this,Ln,i.VoiceSearch||{})};return z("[tag] Hooks created:",this._mount.id,s),Object.keys(i).filter(.forEach(r=>{s[r]=Ae(r,this,i[r]||{})}),s}__updateSocketParams__(e){var n,o;let i=this._state.get(),s=this.__popTransientState__(),r=H(Pe(H({},In(this._params)),{zone:this.zone,installation_id:this.installationId,language:this.language,currency:this.currency,session_id:Doofinder.Session.getSessionId(),session_alive:Doofinder.Session.isLive("layer"),user_id:Doofinder.Session.getUserId(),latest_searches:this.getLatestSearches(),voice_supported:!!Fi,export_results_data:$s((n=this.exportResultsData)==null?void 0:n.slice(0,Ua)),ga_client_id:$s((o=Hn("_ga"))==null?void 0:o.substring(6)),layer_type:this.layerType}),e);return s&&!r.state&&(r.state=s),i&&(r.state=i),this.debug(`__updateSocketParams__ for layer: ${this._mount.id}`,r),r}};var $i=[];document.addEventListener("doofinder.destroy",t=>{$i=$i.filter(});var $n={getTagscreatedestroy(t){var e;t instanceof Ui?t.destroy():(e=t==null?void 0:t.doofinderTag)==null||e.destroy()},enableDebug:Xr,disableDebug:Wr,debug:z,utils:{buildNumericFormatter:Oi,buildCurrencyFormatter:Di}};Object.defineProperty($n,"__version__",{value:Ti});ir(tr,$n);})();
