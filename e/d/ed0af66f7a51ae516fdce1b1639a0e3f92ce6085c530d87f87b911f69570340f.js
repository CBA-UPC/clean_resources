<!doctype html><html lang="en-US" dir="ltr"><head><base href="https://news.google.com/swg/"><meta name="referrer" content="origin"><link rel="canonical" href="https://news.google.com/swg/ui/v1/serviceiframe"><meta name="viewport" content="initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no"><script data-id="_gd" nonce="6Pfl3diRIJSrEZaksQrj9w">window.WIZ_global_data = {"D52Fwf":"https://accounts.google.com/AccountChooser","DldR":[97460387,48677624,93847438,97460385,48677622,93847436],"DpimGf":false,"EP1ykd":["/_/*"],"FdrFJe":"-7263971925415742834","FqoiI":13,"Im6cmf":"/swg/_/SubscribewithgoogleClientUi","LVIXXb":1,"LoQv7e":true,"MT7f9b":[],"MuJWjd":false,"QS2HYc":"https://myaccount.google.com/subscriptions","QrtxK":"","S06Grb":"","S4hDUb":"https://accounts.google.com/ServiceLogin","S6lZl":123383679,"TSDtV":"%.@.[[null,[[45453813,null,false,null,null,null,\"MxRFy\"],[45459555,null,false,null,null,null,\"Imeoqb\"],[45453812,null,true,null,null,null,\"GhXpzd\"],[45427656,null,false,null,null,null,\"W0a4ad\"],[45453811,null,false,null,null,null,\"izR0Bf\"],[45453814,null,false,null,null,null,\"aYYbYb\"]],\"CAMSDh0L3ZGMEJae1RIa1EsI\"]]]","Vvafkd":false,"XXNOmd":true,"Yllh3e":"%.@.1706786116747435,122281560,1493687145]","cfb2h":"boq_subscribewithgoogleclientserver_20240129.03_p0","eptZe":"/swg/_/SubscribewithgoogleClientUi/","f63x2":"https://pay.google.com","fPDxwd":[93804554,93814382],"gGcLoe":false,"nQyAE":{"aYYbYb":"false","MxRFy":"false","izR0Bf":"false","GhXpzd":"true"},"qwAQke":"SubscribewithgoogleClientUi","rtQCxc":-60,"uoqGRe":"uH3qmc","vXmutd":"%.@.\"ES\",\"ZZ\",\"k1OCGw\\u003d\\u003d\"]","w2btAe":"%.@.null,null,\"\",true,null,null,true,false]","y2FhP":"prod","zChJod":"%.@.]"};</script><script nonce="6Pfl3diRIJSrEZaksQrj9w">(function(){'use strict';var a=window,d=a.performance,l=k();a.cc_latency_start_time=d&&d.now?0:d&&d.timing&&d.timing.navigationStart?d.timing.navigationStart:l;function k(){return d&&d.now?d.now():(new Date).getTime()}function n(e){if(d&&d.now&&d.mark){var g=d.mark(e);if(g)return g.startTime;if(d.getEntriesByName&&(e=d.getEntriesByName(e).pop()))return e.startTime}return k()}a.onaft=function(){n("aft")};a._isLazyImage=function(e){return e.hasAttribute("data-src")||e.hasAttribute("data-ils")||"lazy"===e.getAttribute("loading")};
a.l=function(e){function g(b){var c={};c[b]=k();a.cc_latency.push(c)}function m(b){var c=n("iml");b.setAttribute("data-iml",c);return c}a.cc_aid=e;a.iml_start=a.cc_latency_start_time;a.css_size=0;a.cc_latency=[];a.ccTick=g;a.onJsLoad=function(){g("jsl")};a.onCssLoad=function(){g("cssl")};a._isVisible=function(b,c){if(!c||"none"==c.style.display)return!1;var f=b.defaultView;if(f&&f.getComputedStyle&&(f=f.getComputedStyle(c),"0px"==f.height||"0px"==f.width||"hidden"==f.visibility))return!1;if(!c.getBoundingClientRect)return!0;
var h=c.getBoundingClientRect();c=h.left+a.pageXOffset;f=h.top+a.pageYOffset;if(0>f+h.height||0>c+h.width||0>=h.height||0>=h.width)return!1;b=b.documentElement;return f<=(a.innerHeight||b.clientHeight)&&c<=(a.innerWidth||b.clientWidth)};a._recordImlEl=m;document.documentElement.addEventListener("load",function(b){b=b.target;var c;"IMG"!=b.tagName||b.hasAttribute("data-iid")||a._isLazyImage(b)||b.hasAttribute("data-noaft")||(c=m(b));if(a.aft_counter&&(b=a.aft_counter.indexOf(b),-1!==b&&(b=1===a.aft_counter.splice(b,
1).length,0===a.aft_counter.length&&b&&c)))a.onaft(c)},!0);a.prt=-1;a.wiz_tick=function(){var b=n("prt");a.prt=b}};}).call(this);
l('pibVed')</script><script nonce="6Pfl3diRIJSrEZaksQrj9w">var _F_cssRowKey = 'boq-subscribewithgoogle.SubscribewithgoogleClientUi.emY87lbE3Ms.L.F4.O';var _F_combinedSignature = 'ABXTjI4mkxdCPjpgGUYDFm5juL2oMAFUHQ';function _DumpException(e) {throw e;}</script><link rel="stylesheet" href="https://www.gstatic.com/_/mss/boq-subscribewithgoogle/_/ss/k=boq-subscribewithgoogle.SubscribewithgoogleClientUi.emY87lbE3Ms.L.F4.O/am=gKEY/d=1/ed=1/rs=ABXTjI7JNIF9r7KGV9yxW5Takdi2JNTnHg/m=serviceiframeview,_b,_tp" data-id="_cl" nonce="0d5gANB-0yPPEL-2-zsKag"><script nonce="6Pfl3diRIJSrEZaksQrj9w">onCssLoad();</script><script nonce="6Pfl3diRIJSrEZaksQrj9w">(function(){'use strict';function t(){var b=w,c=0;return function(){return c<b.length?{done:!1,value:b[c++]}:{done:!0}}};/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var x=this||self;/*

 Copyright 2013 Google LLC.
 SPDX-License-Identifier: Apache-2.0
*/
var A={};function aa(b,c){if(null===c)return!1;if("contains"in b&&1==c.nodeType)return b.contains(c);if("compareDocumentPosition"in b)return b==c||!!(b.compareDocumentPosition(c)&16);for(;c&&b!=c;)c=c.parentNode;return c==b};function ba(b,c){return function(d){d||(d=window.event);return c.call(b,d)}}function B(b){b=b.target||b.srcElement;!b.getAttribute&&b.parentNode&&(b=b.parentNode);return b}var D="undefined"!==typeof navigator&&/Macintosh/.test(navigator.userAgent),ca="undefined"!==typeof navigator&&!/Opera/.test(navigator.userAgent)&&/WebKit/.test(navigator.userAgent),da={A:1,INPUT:1,TEXTAREA:1,SELECT:1,BUTTON:1};function ea(){this._mouseEventsPrevented=!0}
var fa={Enter:13," ":32},E={A:13,BUTTON:0,CHECKBOX:32,COMBOBOX:13,FILE:0,GRIDCELL:13,LINK:13,LISTBOX:13,MENU:0,MENUBAR:0,MENUITEM:0,MENUITEMCHECKBOX:0,MENUITEMRADIO:0,OPTION:0,RADIO:32,RADIOGROUP:32,RESET:0,SUBMIT:0,SWITCH:32,TAB:0,TREE:13,TREEITEM:13},J={CHECKBOX:!0,FILE:!0,OPTION:!0,RADIO:!0},K={COLOR:!0,DATE:!0,DATETIME:!0,"DATETIME-LOCAL":!0,EMAIL:!0,MONTH:!0,NUMBER:!0,PASSWORD:!0,RANGE:!0,SEARCH:!0,TEL:!0,TEXT:!0,TEXTAREA:!0,TIME:!0,URL:!0,WEEK:!0},ha={A:!0,AREA:!0,BUTTON:!0,DIALOG:!0,IMG:!0,
INPUT:!0,LINK:!0,MENU:!0,OPTGROUP:!0,OPTION:!0,PROGRESS:!0,SELECT:!0,TEXTAREA:!0};function ia(b){this.g=b;this.h=[]};/*

 Copyright 2005 Google LLC.
 SPDX-License-Identifier: Apache-2.0
*/
function L(){this.o=[];this.g=[];this.j=[];this.m={};this.h=null;this.l=[]}function M(b){return String.prototype.trim?b.trim():b.replace(/^\s+/,"").replace(/\s+$/,"")}
function ja(b,c){return function n(a,k){k=void 0===k?!0:k;var e=c;if("click"==e&&(D&&a.metaKey||!D&&a.ctrlKey||2==a.which||null==a.which&&4==a.button||a.shiftKey))e="clickmod";else{var f=a.which||a.keyCode;!f&&a.key&&(f=fa[a.key]);ca&&3==f&&(f=13);if(13!=f&&32!=f)f=!1;else{var g=B(a),h;(h="keydown"!=a.type||!!(!("getAttribute"in g)||(g.getAttribute("type")||g.tagName).toUpperCase()in K||"BUTTON"==g.tagName.toUpperCase()||g.type&&"FILE"==g.type.toUpperCase()||g.isContentEditable)||a.ctrlKey||a.shiftKey||
a.altKey||a.metaKey||(g.getAttribute("type")||g.tagName).toUpperCase()in J&&32==f)||((h=g.tagName in da)||(h=g.getAttributeNode("tabindex"),h=null!=h&&h.specified),h=!(h&&!g.disabled));if(h)f=!1;else{h=(g.getAttribute("role")||g.type||g.tagName).toUpperCase();var r=!(h in E)&&13==f;g="INPUT"!=g.tagName.toUpperCase()||!!g.type;f=(0==E[h]%f||r)&&g}}f&&(e="clickkey")}g=a.srcElement||a.target;f=N(e,a,g,"",null);var l,y;for(h=g;h&&h!=this;h=h.__owner||("#document-fragment"!==(null==(l=h.parentNode)?void 0:
l.nodeName)?h.parentNode:null==(y=h.parentNode)?void 0:y.host)){var m=h;var q=void 0;var u=m;r=e;var p=u.__jsaction;if(!p){var C;p=null;"getAttribute"in u&&(p=u.getAttribute("jsaction"));if(C=p){p=A[C];if(!p){p={};for(var F=C.split(ka),la=F?F.length:0,G=0;G<la;G++){var z=F[G];if(z){var H=z.indexOf(":"),S=-1!=H;p[S?M(z.substr(0,H)):ma]=S?M(z.substr(H+1)):z}}A[C]=p}u.__jsaction=p}else p=na,u.__jsaction=p}u=p;"maybe_click"==r&&u.click?(q=r,r="click"):"clickkey"==r?r="click":"click"!=r||u.click||(r="clickonly");
q={eventType:q?q:r,action:u[r]||"",event:null,u:!1};if(q.u||q.action)break}q&&(f=N(q.eventType,q.event||a,g,q.action||"",m,f.timeStamp));f&&"touchend"==f.eventType&&(f.event._preventMouseEvents=ea);if(q&&q.action){if(l="clickkey"==e)l=B(a),l=(l.type||l.tagName).toUpperCase(),(l=32==(a.which||a.keyCode)&&"CHECKBOX"!=l)||(l=B(a),y=l.tagName.toUpperCase(),g=(l.getAttribute("role")||"").toUpperCase(),l="BUTTON"===y||"BUTTON"===g?!0:!(l.tagName.toUpperCase()in ha)||"A"===y||"SELECT"===y||(l.getAttribute("type")||
l.tagName).toUpperCase()in J||(l.getAttribute("type")||l.tagName).toUpperCase()in K?!1:!0);l&&(a.preventDefault?a.preventDefault():a.returnValue=!1);if("mouseenter"==e||"mouseleave"==e||"pointerenter"==e||"pointerleave"==e)if(l=a.relatedTarget,!("mouseover"==a.type&&"mouseenter"==e||"mouseout"==a.type&&"mouseleave"==e||"pointerover"==a.type&&"pointerenter"==e||"pointerout"==a.type&&"pointerleave"==e)||l&&(l===m||aa(m,l)))f.action="",f.actionElement=null;else{e={};for(var v in a)"function"!==typeof a[v]&&
"srcElement"!==v&&"target"!==v&&(e[v]=a[v]);e.type="mouseover"==a.type?"mouseenter":"mouseout"==a.type?"mouseleave":"pointerover"==a.type?"pointerenter":"pointerleave";e.target=e.srcElement=m;e.bubbles=!1;f.event=e;f.targetElement=m}}else f.action="",f.actionElement=null;m=f;b.h&&!m.event.a11ysgd&&(v=N(m.eventType,m.event,m.targetElement,m.action,m.actionElement,m.timeStamp),"clickonly"==v.eventType&&(v.eventType="click"),b.h(v,!0));if(m.actionElement)if(b.h)!m.actionElement||"A"!=m.actionElement.tagName||
"click"!=m.eventType&&"clickmod"!=m.eventType||(a.preventDefault?a.preventDefault():a.returnValue=!1),(a=b.h(m))&&k&&n.call(this,a,!1);else{if((k=x.document)&&!k.createEvent&&k.createEventObject)try{var I=k.createEventObject(a)}catch(sa){I=a}else I=a;m.event=I;b.l.push(m)}}}function N(b,c,d,a,k,n){return{eventType:b,event:c,targetElement:d,action:a,actionElement:k,timeStamp:n||Date.now()}}
function oa(b,c){return function(d){var a=b,k=c,n=!1;"mouseenter"==a?a="mouseover":"mouseleave"==a?a="mouseout":"pointerenter"==a?a="pointerover":"pointerleave"==a&&(a="pointerout");if(d.addEventListener){if("focus"==a||"blur"==a||"error"==a||"load"==a||"toggle"==a)n=!0;d.addEventListener(a,k,n)}else d.attachEvent&&("focus"==a?a="focusin":"blur"==a&&(a="focusout"),k=ba(d,k),d.attachEvent("on"+a,k));return{eventType:a,i:k,capture:n}}}
function O(b,c,d){if(!b.m.hasOwnProperty(c)){var a=ja(b,c);d=oa(d||c,a);b.m[c]=a;b.o.push(d);for(a=0;a<b.g.length;++a){var k=b.g[a];k.h.push(d.call(null,k.g))}"click"==c&&O(b,"keydown")}}L.prototype.i=function(b){return this.m[b]};
function pa(b,c){var d=new ia(c);a:{for(var a=0;a<b.g.length;a++)if(P(b.g[a].g,c)){c=!0;break a}c=!1}if(c)return b.j.push(d),d;Q(b,d);b.g.push(d);c=b.j.concat(b.g);a=[];for(var k=[],n=0;n<b.g.length;++n){var e=b.g[n];if(R(e,c)){a.push(e);for(var f=0;f<e.h.length;++f){var g=e.g,h=e.h[f];g.removeEventListener?g.removeEventListener(h.eventType,h.i,h.capture):g.detachEvent&&g.detachEvent("on"+h.eventType,h.i)}e.h=[]}else k.push(e)}for(n=0;n<b.j.length;++n)e=b.j[n],R(e,c)?a.push(e):(k.push(e),Q(b,e));
b.g=k;b.j=a;return d}function Q(b,c){var d=c.g;qa&&(d.style.cursor="pointer");for(d=0;d<b.o.length;++d)c.h.push(b.o[d].call(null,c.g))}function R(b,c){for(var d=0;d<c.length;++d)if(c[d].g!=b.g&&P(c[d].g,b.g))return!0;return!1}function P(b,c){for(;b!=c&&c.parentNode;)c=c.parentNode;return b==c}var qa="undefined"!=typeof navigator&&/iPhone|iPad|iPod/.test(navigator.userAgent),ka=/\s*;\s*/,ma="click",na={};var w="click dblclick focus focusin blur error focusout keydown keyup keypress load mouseover mouseout mouseenter mouseleave submit toggle touchstart touchend touchmove touchcancel auxclick change compositionstart compositionupdate compositionend beforeinput input select textinput copy cut paste mousedown mouseup wheel contextmenu dragover dragenter dragleave drop dragstart dragend pointerdown pointermove pointerup pointercancel pointerenter pointerleave pointerover pointerout gotpointercapture lostpointercapture ended loadedmetadata pagehide pageshow visibilitychange beforematch".split(" ");
if(!(w instanceof Array)){var T;var U="undefined"!=typeof Symbol&&Symbol.iterator&&w[Symbol.iterator];if(U)T=U.call(w);else if("number"==typeof w.length)T={next:t()};else throw Error(String(w)+" is not an iterable or ArrayLike");for(var V,ra=[];!(V=T.next()).done;)ra.push(V.value)};var W=function(b){return{trigger:function(c){var d=b.i(c.type);d||(O(b,c.type),d=b.i(c.type));var a=c.target||c.srcElement;d&&d.call(a.ownerDocument.documentElement,c)},bind:function(c){b.h=c;b.l&&(0<b.l.length&&c(b.l),b.l=null)}}}(function(){var b=window,c=new L,d=pa(c,b.document.documentElement);w.forEach(function(n){return O(c,n)});var a,k;"onwebkitanimationend"in b&&(a="webkitAnimationEnd");O(c,"animationend",a);"onwebkittransitionend"in b&&(k="webkitTransitionEnd");O(c,"transitionend",k);return{s:c,
v:d}}().s),X=["BOQ_wizbind"],Y=window||x;X[0]in Y||"undefined"==typeof Y.execScript||Y.execScript("var "+X[0]);for(var Z;X.length&&(Z=X.shift());)X.length||void 0===W?Y[Z]&&Y[Z]!==Object.prototype[Z]?Y=Y[Z]:Y=Y[Z]={}:Y[Z]=W;}).call(this);
</script><script noCollect src="https://www.gstatic.com/_/mss/boq-subscribewithgoogle/_/js/k=boq-subscribewithgoogle.SubscribewithgoogleClientUi.en_US.zccY2MEiBmI.es5.O/am=gKEY/d=1/excm=_b,_tp,serviceiframeview/ed=1/dg=0/wt=2/ujg=1/rs=ABXTjI4fjbINA15dIn8Zp1CxhWohm_CDRA/m=_b,_tp" defer id="base-js" nonce="6Pfl3diRIJSrEZaksQrj9w"></script><script nonce="6Pfl3diRIJSrEZaksQrj9w">if (window.BOQ_loadedInitialJS) {onJsLoad();} else {document.getElementById('base-js').addEventListener('load', onJsLoad, false);}</script><script nonce="6Pfl3diRIJSrEZaksQrj9w">
    window['_wjdc'] = function (d) {window['_wjdd'] = d};
    </script><title></title><script nonce="6Pfl3diRIJSrEZaksQrj9w">var AF_initDataKeys = []; var AF_dataServiceRequests = {}; var AF_initDataChunkQueue = []; var AF_initDataCallback; var AF_initDataInitializeCallback; if (AF_initDataInitializeCallback) {AF_initDataInitializeCallback(AF_initDataKeys, AF_initDataChunkQueue, AF_dataServiceRequests);}if (!AF_initDataCallback) {AF_initDataCallback = function(chunk) {AF_initDataChunkQueue.push(chunk);};}</script></head><c-wiz jsrenderer="oU9u4b" jsshadow jsdata="deferred-i1" data-p="%.@.]" jscontroller="W93Wdc" jsaction="rcuQ6b:npT2md;" data-node-index="0;0" jsmodel="hc6Ubd" view c-wiz><c-data id="i1"></c-data></c-wiz><script aria-hidden="true" nonce="6Pfl3diRIJSrEZaksQrj9w">window.wiz_progress&&window.wiz_progress();window.wiz_tick&&window.wiz_tick('oU9u4b');</script><script nonce="6Pfl3diRIJSrEZaksQrj9w">(function(){'use strict';var c=window,d=[];c.aft_counter=d;var e=[],f=0;function _recordIsAboveFold(a){if(!c._isLazyImage(a)&&!a.hasAttribute("data-noaft")&&a.src){var b=(c._isVisible||function(){})(c.document,a);a.setAttribute("data-atf",b);b&&(-1!==e.indexOf(a)||-1!==d.indexOf(a)||a.complete||d.push(a),a.hasAttribute("data-iml")&&(a=Number(a.getAttribute("data-iml")),a>f&&(f=a)))}}
c.initAft=function(){f=0;e=Array.prototype.slice.call(document.getElementsByTagName("img")).filter(function(a){return!!a.getAttribute("data-iml")});[].forEach.call(document.getElementsByTagName("img"),function(a){try{_recordIsAboveFold(a)}catch(b){throw b.message=a.hasAttribute("data-iid")?b.message+"\nrecordIsAboveFold error for defer inlined image":b.message+("\nrecordIsAboveFold error for img element with <src: "+a.src+">"),b;}});if(0===d.length)c.onaft(f)};}).call(this);
initAft()</script><script id="_ij" nonce="6Pfl3diRIJSrEZaksQrj9w">window.IJ_values = [[null,null,"",true,null,null,true,false],'0','https:\/\/news.google.com\/swg\/', null ,'boq_subscribewithgoogleclientserver_20240129.03_p0','news.google.com', 0.0 ,'','6Pfl3diRIJSrEZaksQrj9w','0d5gANB-0yPPEL-2-zsKag','DEFAULT','\/swg', 2024.0 ,'https:\/\/news.google.com\/swg\/ui\/v1\/serviceiframe', null ,'ltr', false ,'https:\/\/accounts.google.com\/AccountChooser?continue\x3dhttps:\/\/news.google.com\/swg\/ui\/v1\/serviceiframe?_%3D1706786093239%26publicationId%3Dthestar.com\x26hl\x3den-US','https:\/\/accounts.google.com\/ServiceLogin?hl\x3den-US\x26continue\x3dhttps:\/\/news.google.com\/swg\/ui\/v1\/serviceiframe?_%3D1706786093239%26publicationId%3Dthestar.com','https:\/\/accounts.google.com\/SignOutOptions?continue\x3dhttps:\/\/news.google.com\/swg\/ui\/v1\/serviceiframe?_%3D1706786093239%26publicationId%3Dthestar.com', false , false , false , false ,'en','en-US','en_US','https:\/\/goto2.corp.google.com\/mdtredirect?data_id_filter\x3dnews.google.com\x26system_name\x3dsubscribewithgoogle-client', null , null ,'https:\/\/myaccount.google.com\/privacypolicy?hl\x3den-US', false ,'https:\/\/myaccount.google.com\/termsofservice?hl\x3den-US', null , false , null ,]; window.IJ_valuesCb && window.IJ_valuesCb();</script><script id="wiz_jd" nonce="6Pfl3diRIJSrEZaksQrj9w">if (window['_wjdc']) {const wjd = {}; window['_wjdc'](wjd); delete window['_wjdc'];}</script><script aria-hidden="true" id="WIZ-footer" nonce="6Pfl3diRIJSrEZaksQrj9w">window.wiz_progress&&window.wiz_progress(); window.stopScanForCss&&window.stopScanForCss(); ccTick('bl');</script></body></html>sed&&!this.loading&&!this.initDataLoading&&!this.qrCodeStatus:this.thirdPartCookies&&!this.loading&&!this.initDataLoading&&!this.qrCodeStatus},txtShow:function(){return this.moreDialog?!this.bindSuccessed&&!this.initDataLoading&&!this.qrCodeStatus:!this.thirdPartCookies&&!this.initDataLoading&&!this.qrCodeStatus},bindDesc:function(){return this.descTxt?this.descTxt:"certification"===this.identityType?this.$t("dialog_bind_SharePhoneBind_certification"):this.$t("dialog_bind_SharePhoneBind0")},bindCheck:function(){return"certification"===this.identityType?this.$t("dialog_bind_SharePhoneBind_certCheck"):this.$t("dialog_bind_SharePhoneBind2")},qrCodeBindSwitch:function(){return this.isQrCodeBind&&"certification"===this.identityType},qrCodeBindShow:function(){return!this.initDataLoading&&this.qrCodeBindSwitch&&this.isBindWx&&this.bindSuccessed&&this.qrCodeStatus},bindTipShow:function(){return!this.initDataLoading&&this.qrCodeBindSwitch&&this.isBindWx&&this.bindSuccessed&&!this.isHideBottomTip},onEvent:function(){return _.Z.onEvent.bind(_.Z)}},mounted:function(){var e=this;return(0,i.Z)(r().mark((function t(){var n,s;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.registerMessageHandler(),n=e.$parent.$el.getElementsByClassName("drive-dialog-sharePhoneBind"),s=e.from||(e.$ua.WPS?"kdpc-kdocs-web-share":"kdweb-kdocs-web-share"),e.url="".concat(b.fy,"/crossdomain.html?action=sharePhoneBind&from=").concat(s,"&type=").concat(e.identityType),e.qrCodeBindSwitch?e.getWxBindStatus():e.initDataLoading=!1,t.next=7,e.checkThirdPartCookies();case 7:if(!t.sent){t.next=12;break}e.$refs.iframe.src=e.url,t.next=15;break;case 12:e.thirdPartCookies=!1,e.loading=!1,n&&n[0]&&!n[0].className.includes("third")&&(n[0].className+=" third");case 15:e.moreDialog&&n&&n[0]&&(n[0].className+=" third");case 16:case"end":return t.stop()}}),t)})))()},methods:{checkThirdPartCookies:function(){return(0,i.Z)(r().mark((function e(){var t,n,s;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=Z().create({baseURL:b.yV})).interceptors.response.use((function(e){return e}),(function(e){return e})),e.next=4,t.get("/api/check/cdwc");case 4:return n=e.sent,s=n.data,e.abrupt("return",s&&"ok"===s.result);case 7:case"end":return e.stop()}}),e)})))()},toBindPhone:function(){if(this.bindSuccessed=!0,this.moreDialog&&!this.thirdPartCookies&&(this.close(),window.open(this.url)),this.moreDialog){var e=this.$parent.$el.getElementsByClassName("drive-dialog-sharePhoneBind");e&&e[0]&&(e[0].className+=" no-third")}else this.close(),window.open(this.url)},close:function(){this.$emit("close","ok")},getBindStatus:function(){return this.$store.dispatch(k.kU9)},registerMessageHandler:function(){var e,t,n=this,s=this.$refs.iframe;(0,L.Z9)("action",{load:function(){n.thirdPartCookies&&(s.style.visibility="visible"),n.loading=!1},beforeunload:function(){n.thirdPartCookies&&(s.style.visibility="hidden",n.loading=!0)},onBackPressed:function(){n.$emit("close")},identityFinish:(t=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.$message.success(n.$t("dialog_bind_SharePhoneBind3")),n.bindSuccessed=!0,!n.thirdPartCookies){e.next=6;break}return e.next=5,n.getBindStatus();case 5:setTimeout((function(){n.$emit("close","ok")}),1e3);case 6:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),bindPhoneSuccessed:(e=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.$message.success(n.$t("dialog_bind_SharePhoneBind3")),n.bindSuccessed=!0,!n.thirdPartCookies){e.next=6;break}return e.next=5,n.getBindStatus();case 5:setTimeout((function(){n.$emit("close","ok"),n.callbackFun()}),1e3);case 6:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),openBrowser:function(e){(0,A.p4)(e.url||"".concat(b.yV,"/help#account_merge"))}})},getWxBindStatus:function(){var e=this;return(0,i.Z)(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,q.q6S)();case 3:(n=t.sent)&&n.wechat&&(e.isBindWx=!0,e.qrCodeStatus=!0,e.bindSuccessed=!0,e.onEvent("realname_dialog",{action:"show",page:"scan",scene:e.dwFromMap[e.qrCodeBindFrom]}));case 5:return t.prev=5,e.initDataLoading=!1,t.finish(5);case 8:case"end":return t.stop()}}),t,null,[[0,,5,8]])})))()},switchQrCodeStatus:function(){this.qrCodeStatus?(this.onEvent("realname_dialog",{action:"show",page:"message",scene:this.dwFromMap[this.qrCodeBindFrom]}),this.onEvent("realname_dialog",{action:"click",type:"switchToMessage",page:"scan",scene:this.dwFromMap[this.qrCodeBindFrom]})):(this.onEvent("realname_dialog",{action:"show",page:"scan",scene:this.dwFromMap[this.qrCodeBindFrom]}),this.onEvent("realname_dialog",{action:"click",type:"switchToScan",page:"message",scene:this.dwFromMap[this.qrCodeBindFrom]})),this.qrCodeStatus&&!this.thirdPartCookies&&(this.$emit("close"),window.open(this.url)),this.qrCodeStatus=!this.qrCodeStatus},onQrCodeBindSuccess:function(){var e=this;return(0,i.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.bindSuccessed=!0,t.next=3,e.getBindStatus();case 3:e.$emit("close","ok"),e.callbackFun();case 5:case"end":return t.stop()}}),t)})))()}},created:function(){_.Z.onEvent("binding_mobile_show",{entrance:this.entrance,vip:this.vipLevel})},beforeDestroy:function(){var e=this.$parent.$el.getElementsByClassName("drive-dialog-sharePhoneBind");e&&e[0]&&(e[0].className=e[0].className.replace(" third",(function(){return""})),e[0].className=e[0].className.replace(" no-third",(function(){return""})))},destroyed:function(){try{var e=this.$store.state.user.bindstatus;e.phone&&e.phone.value&&(this.callbackFun(),_.Z.onEvent("binding_mobile_succes",{entrance:this.entrance,vip:this.vipLevel}))}catch(e){}}},j=B,G=(0,u.Z)(j,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("iframe",{directives:[{name:"show",rawName:"v-show",value:e.iframeShow,expression:"iframeShow"}],ref:"iframe",class:"bind_"+e.identityType,staticStyle:{width:"100%",height:"466px","margin-top":"-76px",visibility:"hidden",position:"inherit"},attrs:{frameborder:"0"}}),e.txtShow?n("div",{staticClass:"tips-box"},[n("div",{staticClass:"phone-img"}),n("div",{staticClass:"sub-disc"},[e._v(e._s(e.bindDesc))]),n("div",{staticClass:"btns"},[n("el-button",{staticClass:"cancle",on:{click:e.close}},[e._v(e._s(e.$t("dialog_bind_SharePhoneBind1")))]),n("el-button",{attrs:{type:"primary"},on:{click:e.toBindPhone}},[e._v(e._s(e.bindCheck))])],1)]):e._e(),e.qrCodeBindShow?n("QrCodeBind",{attrs:{onEvent:e.onEvent,from:e.qrCodeBindFrom},on:{hideBottomTip:function(t){e.isHideBottomTip=!0},success:e.onQrCodeBindSuccess}}):e._e(),e.bindTipShow?n("div",{staticClass:"sharePhoneBind__qr-code-switch",on:{click:e.switchQrCodeStatus}},[e._v(" "+e._s(e.qrCodeStatus?e.lang_smsValid+" ＞":e.lang_wxValid+" ＞")+" ")]):e._e(),!e.loading&&!e.initDataLoading||e.qrCodeBindShow?e._e():n("loading")],1)}),[],!1,null,null,null).exports,H=n(85476),M={props:["orderId","platform","component","position","csourceValue"],computed:{src:function(){return(0,H.P$)({billno:this.orderId,platform:this.platform,position:this.position,component:this.component,csource:this.csourceValue,isclient:!1,hideclosebtn:1})}}},R=(0,u.Z)(M,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("iframe",{staticClass:"iframe-pay",attrs:{src:e.src,frameborder:"0"}})}),[],!1,null,null,null).exports,U={props:["vipinfo","position"],computed:{src:function(){var e="web_homepage_personalpanel",t="pc_kdocs_cloud_space",n=new Set,s="",i=(this.$store.state||[]).user.personal_vip_array;i&&i.length&&i.forEach((function(e){n.add(e.skuKey)})),n.has("20")&&(s="vip_pro_plus"),n.has("40")&&(e="web_homepage",t="pc_kdocs_cloud_personalpanel",s="vip_pro_plus");var a={position:this.position,component:e,csource:t,payconfig:"svip",isclient:!1,hideclosebtn:1};return s&&(a.sku_key=s),(0,H.P$)(a)}}},z=U,V=(0,u.Z)(z,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("iframe",{staticClass:"iframe-vip-upgrade",attrs:{src:e.src,frameborder:"0"}})}),[],!1,null,null,null).exports,W=n(4942),Q=n(42982),K=n(79913),Y=n(39201),J=n(75542),X=n(27361),ee=n.n(X),te=n(57397);function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){(0,W.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie={data:function(){return{folderName:"",status:"",successArr:[],errArr:[],errObj:{},formCount:0,shareFolder:{}}},components:{FormatIcon:te.Z},filters:K.Z,directives:{focus:D.Z},mixins:[f.Z,Y.Z],computed:{selected:function(){return this.$store.state.file.selected},selectedFiles:function(){return this.$store.getters.selectedFiles.map((function(e){return e.fileid=Number(e.fileid||e.id),e}))},tips:function(){return this.isProcessing?this.$t("dialog_share_MultiShare_status_process"):this.isFinish?this.$t("dialog_share_MultiShare_status_finish",{success:this.successArr.length,fail:this.errArr.length}):this.$t("dialog_share_MultiShare_status_init")},isProcessing:function(){return"process"===this.status},isFinish:function(){return"finish"===this.status}},watch:{selectedFiles:{handler:function(e){var t=this;if(e&&!(e.length<=0)){var n=this.errArr;e.forEach((function(e){var s=e||{},i=s.name,a=s.fname,r=void 0===a?"":a,o=s.fileid,c=s.id,l=(i||r).split(".").pop();if("form"===l){var u=o||c;n.includes(u)||(t.errArr.push(u),t.errObj[u]=t.$t("shareFormFileDoesNotSupportBatch"),t.formCount++)}else if(["ckt","resh"].includes(l)){var d=o||c;n.includes(d)||(t.errArr.push(d),t.errObj[d]=t.$t("fileTypeDoNotSupBatchToShare"),t.formCount++)}}))}},immediate:!0}},methods:{gotoShareFolder:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&_.Z.onEvent("batchshare_homepage",{action:"click",type:"isshare"}),this.$emit("close");var n={name:"Team",params:{tid:this.shareFolder.linkgroupid}};this.$route.query.folderid&&(n.query={folderid:""}),this.$router.push(n),this.$store.dispatch(k.DJg),setTimeout((function(){var t=e.$store.state.team.current;(0,E.BN)({file:t,position:"multiShare"},e)}),1500)},onClose:function(){this.$emit("close")},onAdd:function(){20!==this.selected.length?this.onClose():this._error(this.$t("dialog_share_MultiShare_tips_num"))},doCopyFile:function(e){var t=this;return(0,i.Z)(r().mark((function n(){var s,i;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=e.targetGroupId,i=e.fileIds,n.next=3,(0,J.vC)({fileIds:i,targetGroupId:s,targetParentId:0,context:{message:t.$message},opt:{waitAsyncTask:!0}});case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))()},onShare:function(){var e=this;return(0,i.Z)(r().mark((function t(){var n,s,i,a,o,c,l,u,d,p,h,f,m,v,g,y,b;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.selected.length){t.next=3;break}return e._error(e.$t("dialog_share_MultiShare_tips_empty")),t.abrupt("return");case 3:if(_.Z.onEvent("batchshare_homepage",{action:"click",type:"share"}),n={lengthLimit:e.$t("dialog_share_MultiShare_error_length"),empty:e.$t("dialog_share_MultiShare_error_empty"),illegalChar:e.$t("dialog_share_MultiShare_error_invalid")},s=/[\\/;:*?"<>|%&]/,0===(i=e.folderName.trim()).length?a=n.empty:i.length>240?a=n.lengthLimit:i.match(s)&&(a=n.illegalChar),!a){t.next=11;break}return e._error(a),t.abrupt("return");case 11:return t.prev=11,t.next=14,e.$store.dispatch("POST",{url:"/api/v5/groups/special/share/folders",data:{name:i,parentid:0}});case 14:c=t.sent,l=c.data,o=u=void 0===l?{}:l,_.Z.onEvent("newfolder_success",{type:"batchfolder",linkgroupid:u.linkgroupid,folderid:u.folderid,groupid:u.groupid}),o&&o.name&&(e.folderName===o.name?e.folderName+=" ":e.folderName=o.name),t.next=27;break;case 22:return t.prev=22,t.t0=t.catch(11),d=t.t0&&t.t0.response||{data:{result:t.t0.message}},"groupNumLimit"===d.data.result?e.dialog("shareGroupNumLimit"):e._error(t.t0),t.abrupt("return");case 27:if(!o){t.next=53;break}return e.shareFolder=o,p=o.linkgroupid,h=e.selectedFiles.reduce((function(e,t){var n=t||{},s=n.fname,i=void 0===s?"":s,a=n.name,r=void 0===a?"":a,o=n.fileid,c=n.id,l=(r||i).split(".").pop();if(["form","resh","ckt"].includes(l))return e;var u=parseInt(o||c);return e.concat(u)}),[]),f=!1,e.status="process",t.prev=33,t.next=36,e.doCopyFile({targetGroupId:p,fileIds:h});case 36:(m=e.successArr).push.apply(m,(0,Q.Z)(h)),t.next=51;break;case 39:if(t.prev=39,t.t1=t.catch(33),g=ee()(t.t1,"response.data.faillist"),(y=ee()(t.t1,"response.data.fileids"))&&(v=e.successArr).push.apply(v,(0,Q.Z)(y)),!g||!g.length){t.next=51;break}if(b=new Error,g.forEach((function(t){e.errArr.push(parseInt(t.fileid)),e.errObj[t.fileid]=t.msg||t.result,["SpaceFull"].includes(t.result)&&!f&&(f=!0,b.response={status:403},b.response.data=se(se({},t),{},{full_component:"web_doc_rightlist",full_position:"spacelimit_saveas",groupid:p}))})),t.t2=f,!t.t2){t.next=51;break}return t.next=51,e.handleSpaceFull(b);case 51:e.status="finish",e.successArr.length+e.formCount===e.selected.length&&e.gotoShareFolder(!1);case 53:case"end":return t.stop()}}),t,null,[[11,22],[33,39]])})))()}},beforeMount:function(){var e=this.$store.state.user,t=e.nickname,n=e.name;this.folderName=this.$t("dialog_share_MultiShare_name",{name:t||n})}},ae=ie,re=(0,u.Z)(ae,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"selected-header"},[n("FormatIcon",{staticClass:"icon-folder",attrs:{fileType:"sharefolder",size:30}}),n("div",{staticClass:"input-wrapper"},[n("el-input",{directives:[{name:"focus",rawName:"v-focus"},{name:"pad-focus",rawName:"v-pad-focus"}],staticClass:"input-name",attrs:{placeholder:e.$t("dialog_share_MultiShare_placeholder"),disabled:e.isFinish||e.isProcessing},model:{value:e.folderName,callback:function(t){e.folderName=t},expression:"folderName"}})],1),n("Icon",{directives:[{name:"show",rawName:"v-show",value:!e.isProcessing,expression:"!isProcessing"}],staticClass:"icon-close",attrs:{type:"close"},nativeOn:{click:function(t){return e.onClose.apply(null,arguments)}}})],1),n("div",{staticClass:"count"},[e._v(" "+e._s(e.$t("dialog_share_MultiShare_count")+e.selected.length)+"/20 ")]),n("div",{staticClass:"files"},e._l(e.selectedFiles,(function(t){return n("div",{key:t.fileid,staticClass:"file"},[n("FormatIcon",{staticClass:"icon-file",attrs:{fileType:e._f("yunIcon")(t.name||t.fname,t.ftype),fileName:t.name||t.fname,size:30}}),n("span",{staticClass:"file-name"},[e._v(e._s(e._f("subFileName")(t.name||t.fname)))]),e.errArr.includes(t.fileid)?[n("span",{staticClass:"error",attrs:{title:e.errObj[t.fileid]}},[e._v(e._s(e.errObj[t.fileid]))]),n("Icon",{staticClass:"icon-status",attrs:{type:"tips"}})]:e._e(),e.successArr.includes(t.fileid)?[n("span",{staticClass:"error"}),n("Icon",{staticClass:"icon-status",attrs:{type:"check-green"}})]:e._e()],2)})),0),n("div",{staticClass:"selected-footer"},[n("div",{staticClass:"tips"},[e._v(e._s(e.tips))]),e.isFinish?n("el-button",{staticClass:"btn-share",attrs:{type:"primary"},on:{click:e.gotoShareFolder}},[e._v(e._s(e.$t("dialog_share_MultiShare_btn_confirm")))]):[n("el-button",{staticClass:"btn-select",attrs:{disabled:e.isProcessing},on:{click:e.onAdd}},[e._v(e._s(e.$t("dialog_share_MultiShare_btn_add")))]),n("el-button",{staticClass:"btn-share",attrs:{type:"primary",disabled:e.isProcessing},on:{click:e.onShare}},[e._v(e._s(e.$t("dialog_share_MultiShare_btn_share")))])]],2)])}),[],!1,null,null,null),oe=re.exports,ce=n(94476),le=n(20629),ue=n(52966),de={name:"ShareFileMembers",props:{member:{type:Object},disableToolTip:{type:Boolean,default:!1},active:{type:Boolean,default:!1},padding:{type:Boolean,default:!1},extensionSize:{type:String,default:"75"},highlight:{type:Boolean,default:!1},nameToolTip:{type:Boolean,default:!1},emailOrPhone:{type:Boolean,default:!1}},computed:{clazz:function(){return{"member-subtitle-box":this.emailOrPhone&&this.highlightEmailOrPhone(this.member)}}},methods:{highlightName:function(e){var t=e.name,n=e.highlight;return this.highlight&&n&&(n.name&&n.name[0]||n.user_name&&n.user_name[0])&&(n.name?t=n.name[0]:n.user_name&&(t=n.user_name[0])),this.serverHighlight(t)},highlightEmailOrPhone:function(e){var t=e.email,n=e.phone,s=e.highlight,i=e.dept_path,a=(void 0===i?"":i).split("/").slice(1).slice(-2),r=n||t,o=s.email,c=void 0===o?[]:o,l=s.phone,u=void 0===l?[]:l;return c[0]||u[0]?(c[0]?r=c[0]:u[0]&&(r=u[0]),this.serverHighlight(r)):(a.length>=1&&(r='<span class="depts-2">'.concat(a.map((function(e){return'<span class="dept-1">'.concat(e.trim(),"</span>")})).join("/"),"</span>")),r)},serverHighlight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.replace(/<\/?[\s\S]+?>/gi,(function(e){return/<\/?\s*em\s*[\s\S]*>/i.test(e)?e:""})).replace(/<\/em><em>/gi,"");return t}}},pe=de,he=(0,u.Z)(pe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:["file-share-member-item",{"file-share-member-item-active":e.active,"file-share-member-item-padding":e.padding}]},[n("div",{staticClass:"member-avatar-box"},[n("Avatar",{attrs:{disableToolTip:e.disableToolTip,avatarSrc:e.member.avatar,nickname:e.member.name,size:"24"}})],1),n("div",{staticClass:"member-name-box",class:e.clazz},[n("div",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:e.highlightName(e.member),expression:"highlightName(member)"}],style:{cursor:e.nameToolTip?"pointer":"default"},attrs:{title:e.nameToolTip?e.member.name:""}}),e.emailOrPhone?n("div",{directives:[{name:"dompurify-html",rawName:"v-dompurify-html",value:e.highlightEmailOrPhone(e.member),expression:"highlightEmailOrPhone(member)"}],staticClass:"email-or-phone"}):e._e()]),n("div",{staticClass:"member-extension",style:{flex:"0 0 "+e.extensionSize+"px"}},[e._t("default")],2)])}),[],!1,null,null,null).exports;function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){(0,W.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve={name:"DeleteContacts",components:{Scroll:ue.Z,Member:he},data:function(){return{contacts:[],pagination:{count:20,offset:0},hoverIndex:-1}},computed:me({scrollContent:function(){return{list:this.contacts,pagination:this.pagination}},paging:function(){return!(this.user.companyid&&this.user.is_plus)}},(0,le.rn)({user:function(e){return e.user}})),created:function(){this.fetchItems()},methods:me({fetchItems:function(){var e=this;return(0,i.Z)(r().mark((function t(){var n,s,i,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.loading=!0,n=e.contacts.length,e.pagination.offset=n,s={offset:n,count:e.paging?e.pagination.count:100},t.next=7,e[k.h_h]({params:Object.assign(s,{label:ce.gw.cloud_doc})});case 7:return i=t.sent,a=i.contacts,e.contacts=e.contacts.concat(a),t.abrupt("return",{items:a,pagination:s});case 13:t.prev=13,t.t0=t.catch(0),e._error(t.t0);case 16:return t.prev=16,e.loading=!1,t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[0,13,16,19]])})))()},deleteContact:function(e){var t=this;return(0,i.Z)(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t[k.czx]([e]);case 3:t.contacts=t.contacts.filter((function(t){return t.userid!==e})),t.$message.success(t.$t("components_dialog_DeleteContacts2")),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t._error(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})))()}},(0,le.nv)([k.h_h,k.czx]))},_e=(0,u.Z)(ve,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"delete-contacts"},[n("p",[e._v(e._s(e.$t("components_dialog_DeleteContacts0")))]),n("div",[e.loading&&e.contacts.length<=0?n("Loading"):n("Scroll",{attrs:{execScrollEvent:e.paging,scrollContent:e.scrollContent}},e._l(e.contacts,(function(t,s){return n("Member",{key:s,attrs:{member:t,padding:!0,extensionSize:"40",disableToolTip:!0,active:e.hoverIndex===s},nativeOn:{mouseenter:function(t){e.hoverIndex=s},mouseleave:function(t){e.hoverIndex=-1}}},[n("span",{staticClass:"delete",on:{click:function(n){return e.deleteContact(t.userid)}}},[e._v(e._s(e.$t("components_dialog_DeleteContacts1")))])])})),1)],1)])}),[],!1,null,"2b5312ba",null).exports,ge=n(21628),ye={name:"DeleteContact",components:{KDeleteContact:function(){return n.e(6582).then(n.bind(n,66582))}},props:{member:{type:Object,required:!0},onDeleteSuccess:{type:Function,default:function(){}}},methods:{onSuccess:function(e){(0,ge.setSendedContactsStorage)(this.$store.state.user.id,e.userid,!0),this.$message.success(this.$t("components_dialog_DeleteContact0")),this.onDeleteSuccess(e),this.onCancel()},onError:function(e){this._error(e)},onCancel:function(){this.$emit("close")}}},be=(0,u.Z)(ye,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("KDeleteContact",{attrs:{memberInfo:e.member,onSuccess:e.onSuccess,onError:e.onError,onCancel:e.onCancel}})}),[],!1,null,null,null).exports,Ce=n(80706),we=n(79984),ke={name:"AddContacts",components:{KAddRecommendContact:function(){return Promise.all([n.e(1820),n.e(1897),n.e(6788),n.e(1918),n.e(8641),n.e(6179)]).then(n.bind(n,68641))}},props:{onSendSuccess:{type:Function,default:function(){}},defaultPhone:{type:String,default:""},addedCoopMembers:{type:Array,default:function(){return[]}},source:{type:Object,default:function(){return{}}},onUpdateLink:{type:Function,default:function(){}},isClink:{type:Boolean,default:!1}},mixins:[f.Z,we.Z],directives:{Clickoutside:Ce.Z},data:function(){return{pcOfficeBrowser:!1}},mounted:function(){this.pcOfficeBrowser=window&&window.wpsQuery||!1},computed:{isFromCard:function(){return"card"===this.$route.query.source}},methods:{onSendInvitationSuccess:function(e,t){this.$emit("updateLink"),this.onSendInvitationClick(e,t)},toAccount:function(){window.open("".concat(b.yV,"/usercenter/apps"))}}},Se=(0,u.Z)(ke,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"addContacts"},[n("KAddRecommendContact",{attrs:{source:e.source,isClink:e.isClink,user:e.user,addedCoopMembers:e.addedCoopMembers,defaultPhone:e.defaultPhone,onSendSuccess:e.onSendSuccess,onUpdateLink:e.onUpdateLink,onLoad:e.onLoad,onLoadError:e.onLoadError,onCopy:e.onCopy,onSearchClick:e.onSearchContactClick,onIndexSend:e.onIndexSend,onSearchSend:e.onSearchSend,onSearchEnd:e.onSearchEnd,onInvitationSuccessCallback:e.onSendInvitationClick,onInvitationCancelCallback:e.onCancelInvitationClick,onContactInvitationPanelLoad:e.onContactInvitationPanelLoad,errorFn:e.toAccount,enableAddingContactLink:e.powerConfig.get("addContactByLink")}})],1)}),[],!1,null,null,null).exports;function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var Ie={name:"SendContactInvitation",components:{Member:he},props:{member:{type:Object,required:!0},onSuccess:{type:Function,default:function(){}},onCancel:{type:Function,default:function(){}},username:{type:String,default:""},content:{type:String,default:""}},data:function(){return{msg:"",sending:!1,showError:!1}},computed:{isFromCard:function(){return"card"===this.$route.query.source}},mounted:function(){this.msg="".concat(this.$t("components_dialog_SendContactInvitation7")).concat(this.username).slice(0,32),this.dwMessageEvent({action:"load"}),document.querySelector(".sendContactInvitation-input input").focus()},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){(0,W.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({sendInvite:function(e){var t=this;return(0,i.Z)(r().mark((function n(){var s,i,a,c,l,u;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=e.userid,n.prev=1,!t.sending){n.next=4;break}return n.abrupt("return");case 4:return t.sending=!0,n.next=7,o.account.post("/api/contact/apply/create",{receiver_id:s,type:0,msg:t.msg});case 7:i=n.sent,a=i.data,t.dwMessageEvent({action:"click",click:"send"}),t.onSendSuccess(e,a),n.next=26;break;case 13:if(n.prev=13,n.t0=n.catch(1),"RateLimited"!==(c=ee()(n.t0,"response.data.result"))||t.$ua.wps2018beta||t.$ua.wxminiprogram){n.next=25;break}return n.next=19,t[k.kU9]();case 19:l=n.sent,u=l.data.phone,(void 0===u?{}:u).value?t._error(n.t0):t.showError=!0,n.next=26;break;case 25:"ApplySended"===c?t.onSendSuccess(e):t._error(n.t0);case 26:return n.prev=26,t.sending=!1,n.finish(26);case 29:case"end":return n.stop()}}),n,null,[[1,13,26,29]])})))()},onSendSuccess:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.showError=!1,this.onSuccess(e,t),this.$message.success(t.RelationAdded||this.$t("components_dialog_SendContactInvitation8")),this.onCancelClick()},onCancelClick:function(e){e&&this.dwMessageEvent({action:"click",click:"cancel"}),this.onCancel()},dwMessageEvent:function(e){this.isFromCard&&(e.entrance="card"),_.Z.onEvent("messagecontacts_page",e)},toAccount:function(){window.open("".concat(b.yV,"/usercenter/apps"))}},(0,le.nv)([k.kU9]))},$e=Ie,Te=(0,u.Z)($e,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sendContactInvitation"},[n("Member",{attrs:{member:e.member,disableToolTip:!0}}),n("p",[e._v(e._s(e.$t("components_dialog_SendContactInvitation0")))]),n("el-input",{directives:[{name:"pad-focus",rawName:"v-pad-focus"}],class:"sendContactInvitation-input",attrs:{placeholder:e.$t("components_dialog_SendContactInvitation1"),maxlength:32},model:{value:e.msg,callback:function(t){e.msg=t},expression:"msg"}}),e.showError?n("div",{staticClass:"sendContactInvitation-error"},[e._v(e._s(e.$t("components_dialog_SendContactInvitation2"))+" "),n("span",{on:{click:e.toAccount}},[e._v(e._s(e.$t("components_dialog_SendContactInvitation3")))]),e._v(" "+e._s(e.$t("components_dialog_SendContactInvitation4")))]):e._e(),n("div",{staticClass:"sendContactInvitation-buttons"},[n("el-button",{on:{click:function(t){return t.stopPropagation(),e.onCancelClick.apply(null,arguments)}}},[e._v(e._s(e.$t("components_dialog_SendContactInvitation5")))]),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.sendInvite(e.member)}}},[e._v(e._s(e.$t("components_dialog_SendContactInvitation6"))+" ")])],1)],1)}),[],!1,null,"3122aad7",null),Ee=Te.exports,De={componentName:"OpenClientTips",props:["cb"],methods:{confirm:function(e){this.cb(),this.$emit("close")}},created:function(){this.$on("ok",this.confirm)}},Pe=(0,u.Z)(De,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v(e._s(e.$t("components_dialog_OpenClientTips0")))])}),[],!1,null,null,null).exports,Fe={componentName:"ShareGroupNumLimit",methods:{confirm:function(){this.$router.push({name:"All"}),this.$emit("close")}},created:function(){this.$on("ok",this.confirm)}},Ae=(0,u.Z)(Fe,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"tips"},[e._v(e._s(e.$t("dialog_share_ShareGroupNumLimit_tip")))])}),[],!1,null,"efcfa2de",null).exports,Oe={name:"SecureInfo",componentName:"SecureInfo",mixins:[f.Z],props:{entrance:String,callbackFun:{type:Function,default:function(){}}},computed:{},created:function(){this.$on("ok",this.ok)},methods:{ok:function(){var e=this;this.dialog("sharePhoneBind",{entrance:this.entrance,backprev:!0,back:!0,callbackFun:function(){e.$emit("close"),e.callbackFun.apply(e,arguments)}})}}},Ze=Oe,Ne=(0,u.Z)(Ze,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("p",[e._v(e._s(e.$t("dialog_user_SecureInfo0")))])])}),[],!1,null,"2896186d",null).exports,qe={props:{url:{type:String}},methods:{copySuccess:function(){this.$message.success(this.$t("components_dialog_CopyLink2"))},copyError:function(){this.$message.success(this.$t("components_dialog_CopyLink3"))}}},Le=(0,u.Z)(qe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"yun-link"},[n("div",[n("p",[e._v(e._s(e.$t("components_dialog_CopyLink0")))]),n("p",[e._v(e._s(e.url))])]),n("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.url,expression:"url"}],on:{success:e.copySuccess,error:e.copyError}},[e._v(e._s(e.$t("components_dialog_CopyLink1")))])],1)}),[],!1,null,null,null).exports,Be=n(32489),je={name:"DialogTips",props:["uid"],data:function(){return{checked:!1}},methods:{ok:function(){this.checked&&window.localStorage.setItem("".concat(Be.lE,"-").concat(this.uid),!0),_.Z.onEvent("space_cleantips",{action:"ok",no_more:this.checked?1:0}),this.$emit("close")}}},Ge=(0,u.Z)(je,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"yun-tips"},[n("span",[e._v(e._s(e.$t("clean_file")))]),n("div",{staticClass:"tips-footer"},[n("el-checkbox",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v(e._s(e.$t("no_tips_again")))]),n("el-button",{attrs:{type:"primary"},on:{click:e.ok}},[e._v(e._s(e.$t("i_know")))])],1)])}),[],!1,null,"e95d91fe",null).exports,He={name:"CompanyFullTips",props:["uid"],data:function(){return{checked:!1}},methods:{ok:function(){this.$emit("close")}}},Me=(0,u.Z)(He,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"company-full-tips"},[n("span",[e._v(e._s(e.$t("company_full_tips1")))]),n("span",{staticClass:"height-light"},[e._v(e._s(e.$t("company_full_tips2")))]),n("span",[e._v(e._s(e.$t("company_full_tips3")))]),n("div",{staticClass:"tips-footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.ok}},[e._v(e._s(e.$t("i_know")))])],1)])}),[],!1,null,"81d89f14",null).exports,Re={name:"UpdateKdocsClient",props:["text","btnCancel","btnSubmit"],data:function(){return{checked:!1}},methods:{ok:function(){var e=this.$ua,t=e.isMac,n=e.isWindows,s=e.kdesktop;(t||n)&&s&&window.open("".concat(b.Kn,"/welcome")),this.$emit("close")},cancel:function(){this.$emit("close")}}},Ue=(0,u.Z)(Re,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"company-full-tips"},[e._v(" "+e._s(e.text)+" "),n("div",{staticClass:"tips-footer"},[n("kd-button",{attrs:{type:"secondary"},on:{click:e.cancel}},[e._v(e._s(e.btnCancel))]),n("kd-button",{attrs:{type:"primary"},on:{click:e.ok}},[e._v(e._s(e.btnSubmit))])],1)])}),[],!1,null,"4470801f",null).exports,ze={name:"CorpTeamSpaceFull",componentName:"CorpTeamSpaceFull",components:{KCorpTeamSpaceFull:function(){return n.e(1140).then(n.bind(n,71140))}},props:{isSuperAdmin:Boolean,superAdminName:{type:String,default:""},spaceFullType:{type:String,default:""},cid:Number},methods:{onCancel:function(){this.$emit("close")}}},Ve=(0,u.Z)(ze,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"space-full-box"},[n("KCorpTeamSpaceFull",{attrs:{cid:e.cid,isSuperAdmin:e.isSuperAdmin,superAdminName:e.superAdminName,spaceFullType:e.spaceFullType,onCancel:e.onCancel}})],1)}),[],!1,null,null,null).exports,We=n(65856),Qe={name:"EduProTips",props:{currentCompany:{type:Object,default:function(){return{}}}},data:function(){return{checked:!1}},computed:{serviceEndAt:function(){return We.Z.date("Y年m月d日",new Date(this.currentCompany.service_end_at))}},methods:{ok:function(){this.$emit("close")},close:function(){this.$emit("close")},goMorePage:function(){var e="".concat(b.PQ,"/price");(0,A.p4)(e)}}},Ke=(0,u.Z)(Qe,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"edu-pro-tips"},[n("img",{staticClass:"close",attrs:{src:e.$cdn+"/kdocs/cloud/tips/eduPro/close.svg"},on:{click:e.close}}),n("div",{staticClass:"to"},[e._v("致 "+e._s(e.currentCompany.name)+"：")]),n("div",{staticClass:"tips"},[e._v("您的企业套餐已从金山文档基础版升级为教育增强版，"+e._s(e.serviceEndAt)+"到期")]),n("div",{staticClass:"servers-items"},[n("div",{staticClass:"server-item"},[n("img",{staticClass:"item-logo",attrs:{src:e.$cdn+"/kdocs/cloud/tips/eduPro/storage_space.svg"}}),n("div",{staticClass:"item-content"},[n("div",{staticClass:"item-title"},[n("span",[e._v("1 GB/人")]),n("img",{staticClass:"arrows",attrs:{src:e.$cdn+"/kdocs/cloud/tips/eduPro/arrows.svg"}}),n("span",{staticClass:"highlight"},[e._v("10 GB/人")])]),n("div",{staticClass:"item-decs"},[e._v("存储空间")])])]),n("div",{staticClass:"server-item"},[n("img",{staticClass:"item-logo",attrs:{src:e.$cdn+"/kdocs/cloud/tips/eduPro/search.svg"}}),n("div",{staticClass:"item-content"},[n("div",{staticClass:"item-title"},[n("span",[e._v("标题检索")]),n("img",{staticClass:"arrows",attrs:{src:e.$cdn+"/kdocs/cloud/tips/eduPro/arrows.svg"}}),n("span",{staticClass:"highlight"},[e._v("全文检索")])]),n("div",{staticClass:"item-decs"},[e._v("搜索")])])]),n("div",{staticClass:"server-item"},[n("img",{staticClass:"item-logo",attrs:{src:e.$cdn+"/kdocs/cloud/tips/eduPro/template.svg"}}),e._m(0)])]),n("div",{staticClass:"know-more",on:{click:e.goMorePage}},[e._v("点击了解更多权益")]),n("div",{staticClass:"contact"},[e._v("如有疑问，请联系我们。QQ群：952836550")])])}),[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"item-content"},[n("div",{staticClass:"item-title"},[n("span",[e._v("部分教育类模板免费")])])])}],!1,null,"9c2423b0",null).exports,Ye=[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"kdocs-logo"},[t("img",{staticClass:"kdocs-logo",attrs:{src:n(60615)}})])}],Je=n(6887),Xe=n(43189),et=Je.Z.create({withCredentials:!0}),tt={name:"Update",data:function(){return{updateInfo:{}}},created:function(){this.getUpdateInfo()},methods:{getUpdateInfo:function(){var e=this;return(0,i.Z)(r().mark((function t(){var n,s,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="oldKdesktopWin",t.next=3,et.get("/kdg/api/v1/configure?idList=".concat(n));case 3:s=t.sent,i=s.data,e.updateInfo=JSON.parse(i.data[n]);case 6:case"end":return t.stop()}}),t)})))()},handleDownload:function(){_.Z.onEvent("general_update",{action:"updatenow",type:"normal"}),(0,Xe.Yf)("".concat(b.Kn,"/welcome?download=win&channel=1001")),this.$emit("close")}}},nt=(0,u.Z)(tt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"update-container"},[e._m(0),n("div",{staticClass:"kdocs-name"},[e._v(e._s(e.$t("component_dialog_update1")))]),n("div",{staticClass:"kdocs-version"},[e._v(e._s(e.$t("component_dialog_update0"))+" v"+e._s(e.updateInfo.version||"-"))]),n("div",{staticClass:"kdocs-update"},[n("div",{staticClass:"kdocs-changes"},[n("div",{staticClass:"kdocs-changes-text"},[e._v(e._s(e.updateInfo.changes||"-"))])]),n("div",{staticClass:"btn-group"},[n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleDownload()}}},[e._v(e._s(e.$t("component_dialog_update2")))])],1)])])}),Ye,!1,null,null,null).exports,st=n(10928),it=n.n(st);var at=n(96490),rt={componentName:"RiskyDownloadTips",props:{copyText:String,fname:String},computed:{name:function(){var e,t,n=function(e){return~["folder","normal","special","secret ","sharefolder","team"].indexOf(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file")?e:e.replace(/^(.+)(\..+)$/,(function(e,t){return t}))}(this.fname),s=(e=this.fname,1===(t=e?e.split("."):"unknown").length?"unknown":it()(t).toLowerCase());return n.length>15?n.substring(0,7)+"..."+n.substring(n.length-7,n.length)+"."+s:this.fname}},methods:{handleCopySuccess:function(){this.isIE?window.clipboardData.setData("text",this.copyText)?this.$message.success(this.$t("dialog_dotview_contact_customer_service_copy_success")):this.$message.error(this.$t("dialog_dotview_contact_customer_service_copy_error")):this.$message.success(this.$t("dialog_dotview_contact_customer_service_copy_success"))},handleCopyError:function(){var e=this.$ua.isMac?"Command":"ctrl";window.prompt("".concat(this.$t("link_v1_ShareWithUrl11")," ").concat(e," + c ").concat(this.$t("link_v1_ShareWithUrl12")),this.copyText)},handleOk:function(){this.$emit("close")}},created:function(){this.$on("ok",this.handleOk)},mounted:function(){(0,at.fV)(!0)}},ot=rt,ct=(0,u.Z)(ot,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"risky-download-tips-container"},[n("div",{staticClass:"desc"},[e._v(" "+e._s(e.$t("dialog_risky_download_tips_desc_prefix"))+" "),n("span",{staticClass:"bold"},[e._v(e._s(e.name))]),e._v(" "+e._s(e.$t("dialog_risky_download_tips_desc_affix"))+" ")]),n("div",{staticClass:"btn-copy-wrap"},[n("Icon",{attrs:{size:"16",type:"nav-copy"}}),n("span",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.copyText,expression:"copyText"}],staticClass:"btn-copy",attrs:{type:"primary"},on:{success:e.handleCopySuccess,error:e.handleCopyError}},[e._v(e._s(e.$t("dialog_risky_download_tips_copy")))])],1)])}),[],!1,null,null,null).exports,lt=n(45767),ut={name:"RecoverVipConfirm",componentName:"RecoverFilesVipConfirm",props:{title:{type:String}},mixins:[lt.Z],mounted:function(){var e=this;this.recycleComfirn({action:"show",name:"openvip"}),this.$on("ok",(function(){e.recycleComfirn({action:"click",name:"openvip"}),e.gotoPayPage("trash"),e.$emit("close")})),this.$on("close",(function(){e.recycleComfirn({action:"click",name:"openvip",button:"close"})})),this.$on("cancel",(function(){e.recycleComfirn({action:"click",name:"openvip",button:"取消"})}))},methods:{recycleComfirn:function(e){_.Z.onEvent("recycle_popwindow",e)}}},dt=(0,u.Z)(ut,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v(" "+e._s(e.$t("entTrash_payVipSubTitle"))+" ")])}),[],!1,null,null,null).exports,pt={componentName:"Upgrade5G",props:{cardInfo:Object},data:function(){return{activityCloseImg:"".concat(this.$cdn,"/kdocs/cloud/card/banner/activity_close.png")}},mounted:function(){this.cardInfo&&this.dw("show")},methods:{close:function(){this.dw("close"),this.$emit("close")},gotoActivityPage:function(){this.dw("click"),this.$emit("close"),window&&this.cardInfo&&window.open(this.cardInfo.openData,"_blank")},dw:function(e){var t=(this.cardInfo||{}).id;_.Z.onEvent("activity_space5g_card",{name:t,type:1,action:e})}}},ht=(0,u.Z)(pt,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"upgrade-home"},[n("img",{staticClass:"close",attrs:{src:e.activityCloseImg},on:{click:e.close}}),n("img",{staticClass:"dialog-icon",attrs:{src:e.cardInfo&&e.cardInfo.icon,alt:""}})])}),[],!1,null,null,null).exports,ft=n(58746);function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}var vt={name:"DriveDeleteLabel",componentName:"DriveDeleteLabel",props:{tag:{type:Object},onCommit:{type:Function,default:function(){return Promise.resolve(!0)}},showTagInfo:{type:Boolean,default:!1}},data:function(){return{tagInfo:{}}},created:function(){this.showTagInfo&&this.getTagInfo()},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){(0,W.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,le.Se)(["allFiles"])),methods:{confirm:function(){this.onCommit(),this.$emit("close")},getTagInfo:function(){var e=this;return(0,i.Z)(r().mark((function t(){var n,s,i,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,ft.VI)(e.tag.tag_id);case 3:if(n=t.sent,s=n.data,e.tagInfo=s.result,e.tag.tag_id===e.$store.state.route.params.tagId){t.next=12;break}return t.next=9,(0,ft.xl)(e.tag.tag_id);case 9:i=t.sent,a=i.data.result,e.tagInfo.file_count=a.length;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),e._error(t.t0);case 17:case"end":return t.stop()}}),t,null,[[0,14]])})))()}}},_t=vt,gt=(0,u.Z)(_t,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"drive-delete-label"},[n("div",{class:["delete",{"tips-visible":!e.showTagInfo||e.tagInfo.title}]},[e._v(" "+e._s(e.showTagInfo?e.$t("label_remove_tips_with_taginfo",{count:e.tagInfo.file_count||e.allFiles.length,name:e.tagInfo.title}):e.$t("label_remove_tips"))+" ")]),n("div",{staticClass:"footer"},[n("kd-button",{attrs:{type:"secondary"},on:{click:function(t){return e.$emit("close")}}},[e._v(e._s(e.$t("file_delete_Index2")))]),n("kd-button",{attrs:{type:"primary",danger:""},on:{click:e.confirm}},[e._v(e._s(e.$t("file_delete_Index3")))])],1)])}),[],!1,null,null,null).exports,yt={componentName:"Confirm",props:{msg:String,onOk:{type:Function,default:function(){}},onCancel:{type:Function,default:function(){}}},created:function(){var e=this;this.$on("ok",(function(){e.onOk&&e.onOk()})),this.$on("cancel",(function(){e.onCancel&&e.onCancel()}))}},bt=(0,u.Z)(yt,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",[e._v(e._s(e.msg))])}),[],!1,null,null,null).exports,Ct={name:"DialogCommonTips",componentName:"DialogCommonTips",props:{text:{type:String,default:""},okFunc:Function},mounted:function(){var e=this;this.$on("ok",(function(){e.okFunc&&e.okFunc(),e.$emit("close")}))}},wt=(0,u.Z)(Ct,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dialog-common-tips",class:e.$attrs.className},[n("p",[e._v(" "+e._s(e.text)+" ")])])}),[],!1,null,"900d6e30",null).exports,kt=n(26743),St={name:"HomepagePopupCover",props:{cardInfo:Object,onClose:{type:Function,default:function(){}}},data:function(){return{closeImg:"".concat((0,kt.getCDN)(),"/kdocs/cloud/card/banner/activity_close.png")}},computed:{buttonName:function(){return this.cardInfo&&this.cardInfo.buttonName&&(0,kt.cutStrByByte)(this.cardInfo.buttonName,16)},pageType:function(){return"NEW_LAYOUT"}},mounted:function(){this.cardInfo&&this.dw("show")},methods:{handleClose:function(){this.dw("close"),this.$emit("close")},handlePictureClick:function(){2===this.cardInfo.styles&&this.handleClick()},handleSecondClick:function(){1===this.cardInfo.openType&&(this.dw("click_secondbutton"),window.open(this.cardInfo.openData,"_blank"),this.$emit("close"))},handleClick:function(){1===this.cardInfo.openType&&(this.dw("click"),window.open(this.cardInfo.openData,"_blank"),this.$emit("close"))},dw:function(e){var t=(this.cardInfo||{}).id,n="NEW_LAYOUT"===this.pageType?"homepage_newfullcard_pc":"homepage_fullcard_pc";_.Z.onEvent(n,{type:t,action:e,cardtype:1===this.cardInfo.styles?"imagetext":"picture"})}}},xt=(0,u.Z)(St,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"homepage-popup-cover"},["NEW_LAYOUT"===e.pageType?[n("div",{staticClass:"cover-newlayout"},[n("div",{staticClass:"cover-newlayout-picture",class:{"only-picture":2===e.cardInfo.styles},on:{click:e.handlePictureClick}},[n("img",{staticClass:"cover-newlayout-img",attrs:{src:e.cardInfo.icon,alt:""}})]),1===e.cardInfo.styles?n("div",{staticClass:"cover-newlayout-confirm"},[e.cardInfo.title?n("p",{staticClass:"cover-newlayout-title"},[e._v(e._s(e.cardInfo.title))]):e._e(),e.cardInfo.subTitle?n("p",{staticClass:"cover-newlayout-subtitle"},[e._v(e._s(e.cardInfo.subTitle))]):e._e(),n("div",{staticClass:"cover-newlayout-btns"},[n("button",{staticClass:"cover-newlayout-primary",on:{click:e.handleClick}},[e._v(e._s(e.buttonName))])])]):e._e()]),n("div",{staticClass:"homepage-popup-close kd-icon-box",on:{click:e.handleClose}},[n("CloseIcon",{attrs:{size:"12"}})],1)]:[1===e.cardInfo.styles?n("div",{staticClass:"homepage-popoup-graphics"},[n("img",{staticClass:"homepage-popoup-graphics-img",attrs:{src:e.cardInfo.icon,alt:""}}),n("p",{staticClass:"homepage-popoup-graphics-title"},[e._v(" "+e._s(e.cardInfo.title)+" ")]),n("p",{staticClass:"homepage-popoup-graphics-subTitle"},[e._v(" "+e._s(e.cardInfo.subTitle)+" ")]),n("button",{staticClass:"homepage-popoup-graphics-btn",on:{click:e.handleClick}},[e._v(e._s(e.buttonName))])]):e._e(),2===e.cardInfo.styles?n("div",{staticClass:"homepage-popoup-pure-graph"},[n("img",{staticClass:"homepage-popoup-pure-graph-img",attrs:{alt:"",src:e.cardInfo.icon},on:{click:e.handleClick}})]):e._e(),n("img",{staticClass:"homepage-popup-close",attrs:{src:e.closeImg},on:{click:e.handleClose}})]],2)}),[],!1,null,"ee31fcaa",null).exports,It={name:"DialogLogout",data:function(){return{checked:!1}},methods:{ok:function(){this.checked&&window.localStorage.setItem("".concat(Be.lE,"-").concat(this.uid),!0),_.Z.onEvent("space_cleantips",{action:"ok",no_more:this.checked?1:0}),this.$emit("close")}}},$t=(0,u.Z)(It,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"yun-logout"},[n("div",{staticClass:"logout-text logout-text-content"},[e._v(e._s(e.$t("dialog_lougout_text1")))]),n("div",{staticClass:"logout-text logout-text-option"},[e._v(e._s(e.$t("dialog_lougout_text2")))]),n("div",{staticClass:"logout-text logout-text-option"},[e._v(e._s(e.$t("dialog_lougout_text3")))]),n("div",{staticClass:"logout-footer"},[n("el-button",{attrs:{type:"primary"},on:{click:e.ok}},[e._v(e._s(e.$t("i_know")))])],1)])}),[],!1,null,"065aaca1",null).exports,Tt=n(76489),Et={name:"Guide",methods:{handlerClose:function(){this.$emit("close")}},data:function(){return{isEnUs:!1}},mounted:function(){var e=Tt.parse(document.cookie),t=e&&e.lang;this.isEnUs="en-US"===t}},Dt=(0,u.Z)(Et,(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("transition",{attrs:{name:"fade"}},[s("div",{staticClass:"newlayout-guide-main"},[s("img",{staticClass:"newlayout-guide-img",attrs:{src:n(78574)},on:{click:e.handlerClose}}),s("div",{staticClass:"newlayout-title",style:e.isEnUs?{bottom:"110px"}:{bottom:"130px"}},[s("p",{staticClass:"title_first"},[e._v(e._s(e.$t("components_dialog_NewLayoutGuide0")))]),s("p",{staticClass:"title_sec"},[e._v(e._s(e.$t("components_dialog_NewLayoutGuide1")))])]),s("div",{staticClass:"newlayout-btn"},[s("kd-button",{staticClass:"guide-btn",attrs:{type:"secondary"},on:{click:e.handlerClose}},[e._v(" "+e._s(e.$t("components_dialog_NewLayoutGuide2"))+" ")])],1)])])}),[],!1,null,null,null).exports,Pt={name:"TeamTagPanel",components:{KTeamTagPanel:function(){return n.e(1852).then(n.bind(n,51852))}},props:{targetLabel:{type:Object,default:function(){return{title:"",tag_id:0}}},userInfo:{type:Object,default:function(){return{userId:"",companyId:""}}},handler:{type:Object,default:function(){return{openFile:function(){}}}},isProMode:{type:Boolean,default:!1}},methods:{}},Ft=(0,u.Z)(Pt,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("KTeamTagPanel",{attrs:{targetLabel:e.targetLabel,userInfo:e.userInfo,handler:e.handler,isProMode:e.isProMode}})}),[],!1,null,null,null).exports,At={name:"GroupApplyList",components:{KGroupApplyList:function(){return Promise.all([n.e(4972),n.e(3839),n.e(352),n.e(78)]).then(n.bind(n,35728))}},props:{userInfo:{type:Object,default:function(){return{userId:"",companyId:""}}}},watch:{approvalStatus:{handler:function(e,t){if(e!==t){this.$refs.mychild.updataGroupApplyList(0)}}}},computed:{approvalStatus:function(){return this.$store.state.team.approvalStatus},companyId:function(){return this.$store.state.company.current.id||this.$route.query.cid}},methods:{updataGroupApplyList:function(){this.$refs.mychild.updataGroupApplyList(0)}}},Ot=(0,u.Z)(At,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("KGroupApplyList",{ref:"mychild",attrs:{companyId:e.companyId,showHeader:!1,isDialog:!0,source:"docsWeb"}})}),[],!1,null,null,null).exports,Zt=n(51633),Nt=n(79835),qt=n(15671),Lt=n(43144);var Bt,jt=(function(e,t){t.SSE=function e(t,n){if(!(this instanceof e))return new e(t,n);this.INITIALIZING=-1,this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,this.url=t,n=n||{},this.headers=n.headers||{},this.payload=void 0!==n.payload?n.payload:"",this.method=n.method||this.payload&&"POST"||"GET",this.withCredentials=!!n.withCredentials,this.FIELD_SEPARATOR=":",this.listeners={},this.xhr=null,this.readyState=this.INITIALIZING,this.progress=0,this.chunk="",this.addEventListener=function(e,t){void 0===this.listeners[e]&&(this.listeners[e]=[]),-1===this.listeners[e].indexOf(t)&&this.listeners[e].push(t)},this.removeEventListener=function(e,t){if(void 0!==this.listeners[e]){var n=[];this.listeners[e].forEach((function(e){e!==t&&n.push(e)})),0===n.length?delete this.listeners[e]:this.listeners[e]=n}},this.dispatchEvent=function(e){if(!e)return!0;e.source=this;var t="on"+e.type;return(!Object.prototype.hasOwnProperty.call(this,t)||(this[t].call(this,e),!e.defaultPrevented))&&(!this.listeners[e.type]||this.listeners[e.type].every((function(t){return t(e),!e.defaultPrevented})))},this._setReadyState=function(e){var t=new CustomEvent("readystatechange");t.readyState=e,this.readyState=e,this.dispatchEvent(t)},this._onStreamFailure=function(e){var t=new CustomEvent("error");t.data=e.currentTarget.response,this.dispatchEvent(t),this.close()},this._onStreamAbort=function(){this.dispatchEvent(new CustomEvent("abort")),this.close()},this._onStreamProgress=function(e){if(this.xhr)if(200===this.xhr.status){this.readyState==this.CONNECTING&&(this.dispatchEvent(new CustomEvent("open")),this._setReadyState(this.OPEN));var t=this.xhr.responseText.substring(this.progress);this.progress+=t.length,t.split(/(\r\n|\r|\n){2}/g).forEach(function(e){0===e.trim().length?(this.dispatchEvent(this._parseEventChunk(this.chunk.trim())),this.chunk=""):this.chunk+=e}.bind(this))}else this._onStreamFailure(e)},this._onStreamLoaded=function(e){this._onStreamProgress(e),this.dispatchEvent(this._parseEventChunk(this.chunk)),this.chunk=""},this._parseEventChunk=function(e){if(!e||0===e.length)return null;var t={id:null,retry:null,data:"",event:"message"};e.split(/\n|\r\n|\r/).forEach(function(e){var n=(e=e.trimRight()).indexOf(this.FIELD_SEPARATOR);if(!(n<=0)){var s=e.substring(0,n);if(s in t){var i=e.substring(n+1).trimLeft();"data"===s?t[s]+=i:t[s]=i}}}.bind(this));var n=new CustomEvent(t.event);return n.data=t.data,n.id=t.id,n},this._checkStreamClosed=function(){this.xhr&&this.xhr.readyState===XMLHttpRequest.DONE&&this._setReadyState(this.CLOSED)},this.stream=function(){for(var e in this._setReadyState(this.CONNECTING),this.xhr=new XMLHttpRequest,this.xhr.addEventListener("progress",this._onStreamProgress.bind(this)),this.xhr.addEventListener("load",this._onStreamLoaded.bind(this)),this.xhr.addEventListener("readystatechange",this._checkStreamClosed.bind(this)),this.xhr.addEventListener("error",this._onStreamFailure.bind(this)),this.xhr.addEventListener("abort",this._onStreamAbort.bind(this)),this.xhr.open(this.method,this.url),this.headers)this.xhr.setRequestHeader(e,this.headers[e]);this.xhr.withCredentials=this.withCredentials,this.xhr.send(this.payload)},this.close=function(){this.readyState!==this.CLOSED&&(this.xhr.abort(),this.xhr=null,this._setReadyState(this.CLOSED))}}}(Bt={exports:{}},Bt.exports),Bt.exports),Gt=jt.SSE,Ht=function(e){for(var t="",n=0;n<e;n++)t+=parseInt(10*Math.random());return t},Mt=Ht(6),Rt=function(){return"".concat((new Date).getTime(),"_").concat(Mt,"_").concat(Ht(12))},Ut={400:"分析失败，请重试",500:"分析失败，请重试",2e4:"分析失败，请重试",20001:"分析失败，请重试",20002:"分析失败，请重试",20003:"分析失败，请重试",20004:"分析失败，请重试",20005:"分析失败，请重试",20006:"暂未开放，敬请期待",20007:"分析失败，请重试",20008:"文档超出{100}页，无法支持分析。",20009:"文档大小超出{50}M，无法支持分析。",20010:"作为一个人工智能语言模型，我无法回答这个问题。我的目的是提供客观和准确的信息，帮助人们解决问题。如果你有其他问题，欢迎向我提问。",20011:"作为一个人工智能语言模型，我无法回答这个问题。我的目的是提供客观和准确的信息，帮助人们解决问题。如果你有其他问题，欢迎向我提问。",20012:"该文档内容过少，无法支持分析。",20013:"分析失败，请重试",20014:"分析失败，请重试",20015:"分析失败，请重试",20016:"分析失败，请重试",20017:"分析失败，请重试",20018:"分析失败，请重试"};function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function Vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){(0,W.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wt=function(){function e(t,n,s,i){(0,qt.Z)(this,e);var a="pdf"===n?"chatpdf":"chatdoc";this.evtSource=new Gt("".concat(b.Kn,"/api/v3/kai/file/").concat(t,"/aigc/chatfile/proxy/chat/api/v1/").concat(a,"?scene=summarize&privilege_id=ai_kdocs_smart_summary&client_type=kdocs-web&request_id=").concat(i),{headers:{"Content-Type":"application/json","AIGC-GATEWAY-PRODUCT-NAME":"kdocs-summary-web","AIGC-GATEWAY-INTENTION-CODE":"kdocs_summary_summarize"},method:"POST",payload:s?JSON.stringify(s):void 0})}return(0,Lt.Z)(e,[{key:"handleSSEData",value:function(e,t){var n=JSON.parse(e.data);"ping"!==n.cmd&&t(n)}},{key:"onMessage",value:function(e){var t=this;t.evtSource.addEventListener("message",(function(n){try{t.handleSSEData(n,(function(n){200!==n.code?(t.evtSource.dispatchEvent(Vt({type:"error"},n)),t.evtSource.close()):e(n)}))}catch(e){t.evtSource.close(),console.log("会话结束",e)}}))}},{key:"onError",value:function(e){this.evtSource.addEventListener("error",e)}},{key:"start",value:function(){this.evtSource.stream()}},{key:"close",value:function(){this.evtSource.close()}}]),e}(),Qt={select:"s_select document",text:"s_text",local:"s_localFile"},Kt={otl:"otl",doc:"wps",docx:"wps",pdf:"pdf"},Yt={request_type:"",request_theme:"",request_import_way:""},Jt=function(){function e(t){var n=t.fid,s=t.ftype,i=t.isRetry,a=t.position,r=t.onMessage,o=t.onError;(0,qt.Z)(this,e),this.fid=n,this.ftype=s,this.isRetry=i,this.open_position=Qt[a||"select"],this.onMessage=r,this.onError=o||function(e){console.error(e)},this.init()}var t,n;return(0,Lt.Z)(e,[{key:"init",value:(n=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.requestId=Rt(),e.prev=1,e.next=4,this.updateToken();case 4:return e.next=6,this.createChat();case 6:return e.next=8,this.getSummary();case 8:this.close(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),this.close(),this.onError(e.t0);case 15:case"end":return e.stop()}}),e,this,[[1,11]])}))),function(){return n.apply(this,arguments)})},{key:"updateToken",value:(t=(0,i.Z)(r().mark((function e(){var t,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,J.LP)(this.fid,this.requestId,{"AIGC-GATEWAY-PRODUCT-NAME":"kdocs-summary-web","AIGC-GATEWAY-INTENTION-CODE":"kdocs_summary_summarize"});case 2:t=e.sent,n=t.token,this.token=n;case 5:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"createChat",value:function(){var e=this,t=this,n=Date.now();return new Promise((function(s,i){var a=new Wt(e.fid,e.ftype,{cmd:"create",data:{token:t.token,type:"agent_file"}},e.requestId);a.onMessage((function(n){var i=n.data;a.close();var r=i.session_id;t.sessionId=r,e.sendDw("ai_open"),s(i)})),a.onError((function(t){var s=t.code,a=Date.now()-n;e.sendRequestDw({requestId:e.requestId,time:a,result:"fail",fail_reason:s}),i(t)})),a.start()}))}},{key:"getSummary",value:function(){var e=this,t=Date.now(),n=this;return new Promise((function(s,i){var a=new Wt(n.fid,e.ftype,{cmd:"chat",data:{session_id:n.sessionId,chat_id:"".concat(n.sessionId,"_1"),prompt:"帮我生成摘要"}},e.requestId);a.onMessage((function(a){var r=a.data,o=r.status,c=Date.now()-t;["done","reply"].includes(o)&&n.onMessage(r),"done"===o?(e.sendRequestDw({requestId:e.requestId,time:c,result:"success"}),e.close(),s(r)):"error"===o&&(e.sendRequestDw({requestId:e.requestId,time:c,result:"fail"}),i(r))})),a.onError((function(n){var s=n.code,a=Date.now()-t;e.sendRequestDw({requestId:e.requestId,time:a,result:"fail",fail_reason:s}),i(n)})),e.sendDw("ai_createrequest",Vt({request_id:e.requestId,request_source:e.isRetry?"retry":"request",send_way:""},Yt)),a.start(),e.summaryChat=a}))}},{key:"abort",value:function(){this.close(),this.requestId&&this.sendDw("ai_finishrequest",Vt({request_id:this.requestId,request_source:this.isRetry?"retry":"request",scene:"discontinue"},Yt))}},{key:"close",value:function(){this.summaryChat&&this.summaryChat.close()}},{key:"sendRequestDw",value:function(e){var t=e.requestId,n=e.time,s=e.result;this.sendDw("ai_requestresult",{request_id:t,request_source:this.isRetry?"retry":"request",req_duration:n,exec_duration:n,duration:n,result:s}),this.sendDw("ai_finishrequest",Vt({request_id:t,request_source:this.isRetry?"retry":"request",scene:"finish"},Yt))}},{key:"sendDw",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_.Z.onEvent(e,Vt({project:Kt[this.ftype]||"unknow",file_id:this.fid,session_id:this.sessionId,ai_type:"ai_summary",open_position:this.open_position||"s_select document",request_id:this.requestId},t))}}]),e}(),Xt=n(98466),en=n(33958),tn=n(79505),nn=n(89777),sn=n(94190),an=n(39650),rn=n(26155),on=n(91739),cn=n(22737),ln=["docx","pdf","otl"],un=!1,dn=0,pn={name:"AiSummary",components:{FormatIcon:te.Z,SymbolCrossTwo:nn.Z},mixins:[Y.Z],data:function(){return{firstStep:!0,firstStepCanClick:!0,isDone:!1,answer:"",menuInputValue:"",menuInputShow:!1,menuInputBtnLoading:!1,currentStorage:"",defaultStorage:"ks3,ks3sh",switchStorage:["ks3","ks3sh"],retryStorages:[],failedStorages:"",percentCompleted:0,ftype:"",fileFullName:"",Refresh:sn.Z,SymbolTick:an.Z,Pen:rn.Z,DocFile:on.Z,aiPage:!1,aiError:!1,isCreatingDone:!1}},mounted:function(){_.Z.onEvent("smartSummary_show",{open_position:"application center"}),this.init()},computed:{myCloudId:function(){return this.$store.state.team.myCloud.id},cdn:function(){return this.$isServer?(0,kt.getCDN)():"https:".concat(window.Public_Path)},companyID:function(){var e;return null===(e=this.$store.state.team.current)||void 0===e?void 0:e.corpid},messageLoadingStatus:function(){return"".concat((0,s.GH)("views_AiSummary19"),"   ").concat(this.percentCompleted,"%")}},methods:{init:function(){var e=this;return(0,i.Z)(r().mark((function t(){var n,s,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,cn.Vs)({containerName:"kdocs",exposeModuleName:"./AiPoint",url:"".concat(b.Kn,"/kdocs/mf/kdocs-mf.js?t=").concat(Date.now()),manifest:"".concat(b.Kn,"/kdocs/mf/manifest.json?t=").concat(Date.now())});case 3:return n=t.sent,s=n.default?n.default:n,i=document.querySelector("#aiSummaryXianMian"),e.aiPoint=new s,i.style.display="none",t.next=10,e.aiPoint.mount(i,{productName:"kdocs-summary-web",intentionCode:"kdocs_summary_summarize"});case 10:return t.next=12,e.aiPoint.isReady();case 12:i.style.display="block",t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))()},getI18nText:s.GH,getFileName:function(e){return e=e.replace(/^(.+)(\..+)$/,(function(e,t){return t}))},clearInputValue:function(){this.menuInputValue="",this.$refs.menuInput.focus()},cancelCreateFile:function(){this.menuInputShow=!1,this.menuInputValue="",this.firstStep=!0},commonCreate:function(e){var t=this;return(0,i.Z)(r().mark((function n(){var i,a,o,c,l,u,d,p,h,f,m,v,_,g,y,C,w,S,x,I,$;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=e.loadingKey,a=void 0===i?"menuInputBtnLoading":i,o=e.title,c=e.summary,l=e.openLink,u=void 0===l||l,t[a]=!0,n.prev=2,d=0,p=t.myCloudId,!u){n.next=10;break}return n.next=7,t.createDefaultAiSummaryFolder(t.myCloudId,0,(0,s.GH)("views_AiSummary3"),[(0,s.GH)("views_AiSummary25")]);case 7:t.defaultAiSummaryFolder=n.sent,d=t.defaultAiSummaryFolder.id,p=t.defaultAiSummaryFolder.groupid;case 10:return h=u?"".concat((0,s.GH)("views_AiSummary17")).concat(o):o,n.next=13,t.$store.dispatch(k.v_A,{groupID:p,parentID:d,title:h,summary:c});case 13:if(f=n.sent){n.next=16;break}return n.abrupt("return");case 16:if(!u){n.next=27;break}return m=null,t.$ua.wxpcmini||(m=window.open()),n.next=21,(0,J.g2)(f.data.fileID,{with_link:!0});case 21:v=n.sent,_=v.fileinfo,g="".concat(b.Kn,"/l/").concat(_.link_id),m?m.location.href=g:window.open(g),n.next=44;break;case 27:return y=f.data,C=y.fileID,w=y.fileName,n.next=30,(0,J.g2)(C,{with_link:!0});case 30:S=n.sent,x=S.fileinfo,t.openLink="".concat(b.Kn,"/l/").concat(x.link_id),t.fid=C,t.ftype=(0,Nt.getExtName)(w),t.fileFullName=w,t.filename=t.getFileName(w),t.menuInputShow=!1,t.menuInputValue="",t.firstStep=!1,t.aiPage=!0,t.firstStep=!1,t.aiError=!1,t.initChat();case 44:t.$store.dispatch(k.V9B),n.next=50;break;case 47:n.prev=47,n.t0=n.catch(2),n.t0&&n.t0.response&&n.t0.response.data&&"spaceFull"===n.t0.response.data.msg&&(I=n.t0.response.data,$=t.myCloudId,u&&($=t.defaultAiSummaryFolder.groupid),I.groupid=$,I.companyID=t.companyID,I.fname="".concat(o,".otl"),I.path=(0,s.GH)("views_AiSummary24"),I.result="CorpSpaceFull",t.handleSpaceFull(I));case 50:t[a]=!1;case 51:case"end":return n.stop()}}),n,null,[[2,47]])})))()},createFileFromMenu:function(){this.commonCreate({title:this.menuInputValue.slice(0,5),summary:this.menuInputValue,openLink:!1})},menuInputAction:function(){var e=this;return(0,i.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return _.Z.onEvent("smartSummary_click",{open_position:"application center",button_name:"text"}),e.position="text",t.next=4,e.checkCertification();case 4:if(t.sent){t.next=7;break}return t.abrupt("return");case 7:e.menuInputShow=!0,e.menuInputValue="",e.$nextTick((function(){e.$refs.menuInput.focus()})),e.firstStep=!1;case 11:case"end":return t.stop()}}),t)})))()},createDefaultAiSummaryFolder:function(e){var t=arguments,n=this;return(0,i.Z)(r().mark((function s(){var i,a,o,c,l,u;return r().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return i=t.length>1&&void 0!==t[1]?t[1]:0,a=t.length>2?t[2]:void 0,o=t.length>3&&void 0!==t[3]?t[3]:[],a&&(o=[].concat((0,Q.Z)(o),[a])),c=o.length,s.next=7,n.$store.dispatch(k.An0,{groupid:e,parentid:i,path:o.join(",")});case 7:if(0!==(l=s.sent).status){s.next=15;break}return s.next=11,n.$store.dispatch(k.hjF,{groupid:e,parentid:i,name:o[c-1],parentPath:o.slice(0,c-1)});case 11:return u=s.sent,s.abrupt("return",u);case 15:if(1!==l.status){s.next=17;break}return s.abrupt("return",l.data);case 17:return s.abrupt("return",void 0);case 18:case"end":return s.stop()}}),s)})))()},close:function(){this.setLoadingMessageText(0),this.instance&&this.instance.close(),this.chat&&this.chat.abort(),this.$emit("close")},checkInputCertification:function(){var e=this;return(0,i.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.checkCertification();case 2:t.sent&&e.$refs.fileInput.click();case 4:case"end":return t.stop()}}),t)})))()},resetFileInput:function(){this.$refs.fileInput.value=""},getLocalFile:function(e){var t=this;return(0,i.Z)(r().mark((function n(){var i,a,o,c,l,u;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(_.Z.onEvent("smartSummary_click",{open_position:"application center",button_name:"localFile"}),t.position="local",i=(0,Q.Z)(e.target.files),a=i[0],o=a.name,c=a.size,l=(0,Nt.getExtName)(o),["docx","pdf"].includes(l)){n.next=8;break}return t.$message.error((0,s.GH)("views_AiSummary21")),n.abrupt("return");case 8:return t.fileSize=c,t.instance=t.$message({message:t.messageLoadingStatus,type:"loading",duration:0}),t.firstStepCanClick=!1,t.filename=t.getFileName(o),t.fileFullName=o,n.next=15,t.onFileUpload(i[0]);case 15:if(u=n.sent,t.firstStepCanClick=!0,t.setLoadingMessageText(0),t.instance.close(),u){n.next=22;break}return t.$message({message:(0,s.GH)("views_AiSummary23"),type:"error"}),n.abrupt("return");case 22:t.$store.dispatch(k.V9B),t.aiPage=!0,t.firstStep=!1,t.aiError=!1,t.initChat();case 27:case"end":return n.stop()}}),n)})))()},createFile:function(e){var t=this;return(0,i.Z)(r().mark((function n(){var i,a,o,c,l,u,d,p,h;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.store,a=e.name,o=e.size,c=e.sha1,l=e.etag,n.prev=1,u=t.myCloudId,0,d={groupid:u||0,parentid:0,store:i,name:a,size:o,sha1:c,etag:l,isUpNewVer:!1,must_create:!0},n.next=7,(0,tn.S0)(d,!1);case 7:if(p=n.sent,!(h=p.data).id){n.next=17;break}return t.fid=h.id,t.ftype=(0,Nt.getExtName)(h.fname),t.openLink="".concat(b.Kn,"/l/").concat(h.link_id),_.Z.onEvent("smartSummary_document",{channel:"localFile",result:"success",fileid:h.id}),n.abrupt("return",!0);case 17:return _.Z.onEvent("smartSummary_document",{channel:"localFile",result:"fail",reason:h}),h.groupid=t.myCloudId,h.companyID=t.companyID,h.size=t.fileSize,h.fname=t.fileFullName,h.path=(0,s.GH)("views_AiSummary24"),h.full_position="spacelimit_upload_transfer",h.result&&t.handleSpaceFull(h),n.abrupt("return",!1);case 26:n.next=32;break;case 28:return n.prev=28,n.t0=n.catch(1),console.log(n.t0),n.abrupt("return",!1);case 32:case"end":return n.stop()}}),n,null,[[1,28]])})))()},setLoadingMessageText:function(e){this.percentCompleted=e,this.instance&&(this.instance.message=this.messageLoadingStatus)},onFileUpload:function(e){var t=this;return(0,i.Z)(r().mark((function n(){var s,i,a,o,c,l,u,d,p,h,f,m,v,g,y,b,C,w,k,S,x,I,$,T,E,D,P,F,A,O;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,e){n.next=3;break}return n.abrupt("return");case 3:return s=e.name,i=e.size,a=e.type,e.dwStartTime=Date.now(),n.next=7,(0,en.Vm)(e);case 7:if(e.md5=n.sent,!((i/1024/1024).toFixed(2)<100)){n.next=12;break}return n.next=11,(0,Xt.Z)(e);case 11:e.sha1=n.sent;case 12:if(!e.sha1||!e.md5){n.next=30;break}return n.prev=13,n.next=16,(0,tn.At)({size:i,md5:e.md5,sha1:e.sha1});case 16:if(!(o=n.sent)||!o.data||"ok"!==o.data.result){n.next=25;break}return t.setLoadingMessageText(50),c=o.data||{},l=c.etag,u=c.key,d=c.store,n.next=22,t.createFile({sha1:u,etag:l,name:e.name,size:e.size,store:d});case 22:return(p=n.sent)&&t.setLoadingMessageText(100),n.abrupt("return",p);case 25:n.next=30;break;case 27:n.prev=27,n.t0=n.catch(13),console.log(n.t0);case 30:return h=t.getStoreForFetchUploadUrl(),f={groupid:0,parentid:0,name:s,size:i,contenttype:a,startswithfilename:s,client_stores:h,req_by_internal:!1,successactionstatus:201,encrypt:!0},m=t.myCloudId,n.next=35,(0,tn.cm)(f);case 35:if(!(v=n.sent)||!v.data||"SpaceFull"!==v.data.result){n.next=43;break}(g=v.data).groupid=m,t.handleSpaceFull(g),_.Z.onEvent("smartSummary_document",{channel:"localFile",result:"fail",reason:g}),n.next=63;break;case 43:if(y=v&&v.data&&v.data.uploadinfo,C=(b=y||{}).params,w=b.url,k=b.retry_stores,(S=b.store)&&(t.currentStorage=S),Array.isArray(k)&&k.length&&(t.retryStorages=k),!C||!w){n.next=63;break}return x=y.params,I=y.url,$=t.createFromData(x,e),n.next=52,(0,en.ws)(I,$,t.onUploadProgress);case 52:if(!(T=n.sent)||!T.data){n.next=63;break}return E=T.data,D=T.headers,P=E.newfilename,F=D.Etag||D.ETag||D.etag,A=F.replace(/"/gi,""),n.next=61,t.createFile({sha1:P,etag:A,name:e.name,size:e.size,store:S});case 61:return O=n.sent,n.abrupt("return",O);case 63:n.next=69;break;case 65:return n.prev=65,n.t1=n.catch(0),t.failedStorages=[t.currentStorage],n.abrupt("return",!1);case 69:case"end":return n.stop()}}),n,null,[[0,65],[13,27]])})))()},onUploadProgress:function(e){var t=Math.round(100*e.loaded/e.total);t>this.percentCompleted&&this.setLoadingMessageText(t)},getStoreForFetchUploadUrl:function(){var e=this,t=this.defaultStorage;return this.failedStorages.includes(this.currentStorage)?t=this.retryStorages.length?this.retryStorages.pop():this.switchStorage.find((function(t){return!e.failedStorages.includes(t)})):this.failedStorages.length&&(t=this.currentStorage),t},createFromData:function(e,t){var n=new FormData;n.append("file",t);for(var s=Object.keys(e),i=0;i<s.length;i++){var a=s[i];n.append(a,e[a])}return n},chooseYunFile:function(){var e=this;return(0,i.Z)(r().mark((function t(){var n,s,a;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return _.Z.onEvent("smartSummary_click",{open_position:"application center",button_name:"select document"}),e.position="select",t.next=4,e.checkCertification();case 4:if(t.sent){t.next=7;break}return t.abrupt("return");case 7:"选择文件",n={name:"MyDocs"},e.$store.state.company.currentView.isEnt&&(n.name="EnterpriseIndex",s={cid:parseInt(e.$store.state.company.currentView.companyid)},n.params=s),a={_from:"kdocs",_function:"select_file"},(0,Zt.v)("openFinderNew",{title:"选择文件",size:"large",action:"selectFile",path:n,dw:a,file:{includes:ln.map((function(e){return"."+e}))},onFinderConfirm:function(){var t=(0,i.Z)(r().mark((function t(n){var s,i,a,o,c,l;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=n.files[0],i=s.id,a=s.ext,o=s.name,e.fid=i,e.ftype=a,e.filename=e.getFileName(o),e.fileFullName=o,_.Z.onEvent("smartSummary_document",{channel:"select document",result:"success",fileid:i}),t.prev=6,t.next=9,(0,J.g2)(i,{with_link:!0});case 9:c=t.sent,l=c.fileinfo,e.openLink="".concat(b.Kn,"/l/").concat(l.link_id),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(6),console.log(t.t0);case 17:e.aiPage=!0,e.firstStep=!1,e.aiError=!1,e.initChat();case 21:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(e){return t.apply(this,arguments)}}()});case 12:case"end":return t.stop()}}),t)})))()},checkCertification:function(){var e=this;return(0,i.Z)(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!1,t.prev=1,t.next=4,e.$store.dispatch(k.oKV);case 4:1!==t.sent.data.certification?(0,Zt.v)("sharePhoneBind",{backprev:!0,identityType:"certification"}):n=!0,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:return t.abrupt("return",n);case 12:case"end":return t.stop()}}),t,null,[[1,8]])})))()},handleCopySuccess:function(){this.chat.sendDw("ai_funcclick",{func_name:(0,s.GH)("views_AiSummary10")}),this.$message({type:"success",message:(0,s.GH)("views_AiSummary13")}),this.chat.sendDw("ai_funcresult",{func_name:(0,s.GH)("views_AiSummary10"),result:"success"})},goToFile:function(){var e=this.openLink;window.open(e)},savaAsFile:function(){var e=this;return(0,i.Z)(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.chat.sendDw("ai_funcclick",{func_name:(0,s.GH)("views_AiSummary8")}),t.next=3,e.commonCreate({title:e.filename,summary:e.answer});case 3:e.chat.sendDw("ai_funcresult",{func_name:(0,s.GH)("views_AiSummary8"),result:"success"});case 4:case"end":return t.stop()}}),t)})))()},retry:function(){this.chat.sendDw("ai_funcclick",{func_name:(0,s.GH)("views_AiSummary9")}),this.initChat(!0),this.chat.sendDw("ai_funcresult",{func_name:(0,s.GH)("views_AiSummary9"),result:"success"})},returnBackChooseFile:function(){this.aiPage=!1,this.firstStep=!0,this.aiError=!1,this.answerContent="",this.chat&&this.chat.abort(),this.answer="",this.isDone=!1},initChat:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];dn=0,un=!1,this.answer="",this.isDone=!1,this.aiError=!1,this.answerContent="",this.isCreatingDone=!1,this.chat=new Jt({fid:this.fid,ftype:this.ftype,isRetry:t,position:this.position,onMessage:function(t){var n=t.status,s=t.content;["done","error"].includes(n)?(e.isDone=!0,e.chat.close()):"reply"===n&&(e.answerContent||(e.answerContent=""),e.answerContent+=s,e.printing())},onError:function(t){e.aiError=!0,e.aiPoint.update(),t&&t.code?(e.answer="",setTimeout((function(){e.answer=Ut[t.code]}),300)):e.answer=(0,s.GH)("views_AiSummary22"),console.log(t)}})},stopChat:function(){this.chat&&this.chat.abort(),this.isDone=!0,this.aiError=!0},createFileFromAI:function(){var e=this;return(0,i.Z)(r().mark((function t(){var n,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.chat.sendDw("ai_funcclick",{func_name:(0,s.GH)("views_AiSummary15")}),e.chat.sendDw("ai_funcresult",{func_name:(0,s.GH)("views_AiSummary15"),result:"success"}),"pdf"===e.ftype){t.next=5;break}return e.$message.error((0,s.GH)("views_AiSummary16")),t.abrupt("return");case 5:return n="".concat(e.openLink,"?openAI=chat"),i=null,e.$ua.wxpcmini||(i=window.open()),t.prev=8,t.next=11,e.$store.dispatch(k.IIt,"ai_kdocs_pdf");case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(8),console.log(t.t0);case 16:i?i.location.href=n:window.open(n);case 17:case"end":return t.stop()}}),t,null,[[8,13]])})))()},sleep:function(e){return new Promise((function(t){return setTimeout(t,e)}))},printing:function(){var e=this;if(!un){un=!0;!function t(){e.aiError?e.aiPoint.update():dn<e.answerContent.length?(e.answer+=e.answerContent[dn++],requestAnimationFrame(t)):(e.isCreatingDone=!0,un=!1,e.aiPoint.update())}()}}}},hn=pn,fn=(0,u.Z)(hn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ai-summary-container"},[n("div",{staticClass:"header"},[n("span",{staticClass:"text"},[e._v(e._s(e.getI18nText("views_AiSummary3")))]),n("div",{staticClass:"right-area"},[n("div",{staticClass:"xianmian",attrs:{id:"aiSummaryXianMian"}}),n("kd-button",{staticClass:"icon-close",attrs:{icon:"",type:"light"},on:{click:e.close}},[n("SymbolCrossTwo",{attrs:{size:"16"}})],1)],1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.firstStep,expression:"firstStep"}],staticClass:"start-container"},[n("img",{staticClass:"poster",attrs:{src:e.cdn+"/kdocs/cloud/ai/ai-summary-poster.svg"}}),n("p",{staticClass:"start-text"},[e._v(e._s(e.getI18nText("views_AiSummary4")))]),n("div",{staticClass:"methods"},[n("kd-button",{staticClass:"btn upload-local-file",attrs:{disabled:!e.firstStepCanClick,type:"primary"},on:{click:e.checkInputCertification}},[e._v(" "+e._s(e.getI18nText("views_AiSummary1"))+" "),n("input",{ref:"fileInput",staticClass:"file-input",attrs:{type:"file"},on:{change:e.getLocalFile,click:function(t){return t.stopPropagation(),e.resetFileInput.apply(null,arguments)}}})])],1),n("div",{staticClass:"methods"},[n("kd-button",{staticClass:"btn",attrs:{disabled:!e.firstStepCanClick,type:"light"},on:{click:e.chooseYunFile}},[e._v(" "+e._s(e.getI18nText("views_AiSummary0")))])],1),n("div",{staticClass:"methods"},[n("kd-button",{staticClass:"btn",attrs:{disabled:!e.firstStepCanClick,type:"light"},on:{click:e.menuInputAction}},[e._v(" "+e._s(e.getI18nText("views_AiSummary2")))])],1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.menuInputShow,expression:"menuInputShow"}],staticClass:"input-text-container"},[n("div",{staticClass:"input-container"},[n("el-input",{ref:"menuInput",staticClass:"chat-summary",class:{paddingRight:e.menuInputValue.length},attrs:{type:"textarea",maxlength:1e4},model:{value:e.menuInputValue,callback:function(t){e.menuInputValue="string"==typeof t?t.trim():t},expression:"menuInputValue"}}),e.menuInputValue.length?n("kd-button",{staticClass:"icon-close",attrs:{icon:"",type:"light"},on:{click:e.clearInputValue}},[n("SymbolCrossTwo",{attrs:{size:"16"}})],1):e._e()],1),n("div",{staticClass:"input-footer"},[n("kd-button",{staticClass:"btn",attrs:{disabled:e.menuInputBtnLoading,type:"light"},on:{click:e.cancelCreateFile}},[e._v(" "+e._s(e.getI18nText("views_AiSummary5")))]),n("kd-button",{staticClass:"btn",attrs:{loading:e.menuInputBtnLoading,disabled:!e.menuInputValue,type:"primary"},on:{click:e.createFileFromMenu}},[e._v(" "+e._s(e.getI18nText("views_AiSummary6")))])],1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.aiPage,expression:"aiPage"}],staticClass:"ai-container"},[n("div",{staticClass:"ai-header"},[n("div",{staticClass:"file-info",on:{click:e.goToFile}},[n("FormatIcon",{attrs:{fileType:e.ftype,fileName:e.fileFullName,size:16}}),n("span",{staticClass:"filename"},[e._v(e._s(e.fileFullName))])],1),n("kd-button",{staticClass:"btn",attrs:{prefixIcon:e.DocFile,disabled:!(e.isDone&&e.isCreatingDone||e.aiError),type:"light"},on:{click:e.returnBackChooseFile}},[e._v(" "+e._s(e.getI18nText("views_AiSummary7"))+" ")])],1),n("div",{staticClass:"ai-body"},[e.answer?e._e():n("img",{staticClass:"waiting-icon",attrs:{src:e.cdn+"/kdocs/cloud/ai/waiting.svg"}}),n("div",{staticClass:"ai-text"},[e._v(e._s(e.answer))]),e.isDone&&e.isCreatingDone||e.aiError?n("div",{staticClass:"ai-footer"},[e.isDone&&!e.aiError?n("kd-button",{staticClass:"btn main-btn",attrs:{prefixIcon:e.SymbolTick,disabled:!e.answer,iconColor:"#fff",type:"light"},on:{click:e.savaAsFile}},[e._v(" "+e._s(e.getI18nText("views_AiSummary8"))+" ")]):e._e(),e.isDone||e.aiError?n("kd-button",{staticClass:"btn",attrs:{prefixIcon:e.Refresh,type:"light"},on:{click:e.retry}},[e._v(" "+e._s(e.getI18nText("views_AiSummary9"))+" ")]):e._e(),e.isDone&&!e.aiError?n("kd-button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:e.answer,expression:"answer"}],staticClass:"btn",attrs:{prefixIcon:e.Pen,disabled:!e.answer,type:"light"},on:{success:e.handleCopySuccess}},[e._v(" "+e._s(e.getI18nText("views_AiSummary10"))+" ")]):e._e()],1):e._e()]),e.isDone&&e.isCreatingDone||e.aiError?e._e():n("div",{staticClass:"ai-creating"},[n("div",{staticClass:"logo-info"},[n("img",{staticClass:"ai-icon",attrs:{src:e.cdn+"/kdocs/cloud/ai/ai.gif"}}),n("span",{staticClass:"text"},[e._v(" "+e._s(e.getI18nText("views_AiSummary11")))])]),n("kd-button",{staticClass:"btn",attrs:{type:"light"},on:{click:e.stopChat}},[e._v(" "+e._s(e.getI18nText("views_AiSummary12"))+" ")])],1),e.isDone&&e.isCreatingDone?n("div",{staticClass:"ai-tips"},[e._v(e._s(e.getI18nText("views_AiSummary14")))]):e._e(),n("kd-button",{staticClass:"ai-btn",attrs:{disabled:!(e.isDone&&e.isCreatingDone||e.aiError),type:"light"},on:{click:e.createFileFromAI}},[e._v(" "+e._s(e.getI18nText("views_AiSummary15"))+" ")])],1)])}),[],!1,null,"e23af092",null),mn=fn.exports,vn={init:"init",input:"input",loading:"loading",success:"success",error:"error"},_n=[{title:(0,s.GH)("file_navigator_normal_DropdownFilter_otl_ai"),url:"".concat(b.RX,"/new/category/airpage/131/0?sourcepage=navigate&categorytype=7"),ftype:"otl"},{title:(0,s.GH)("config_dotview_i18_xls"),url:"".concat(b.RX,"/new/airsheet/900002437/0-0?mbtype=16785408"),ftype:"ksheet",dwType:"excel"},{title:(0,s.GH)("file_navigator_normal_DropdownFilter_ppt"),ftype:"ppt",dwType:"wpp"}],gn="kdocs-creation-web",yn="kdocs_creation_generate_outline",bn=n(89762),Cn=n(45546),wn={data:function(){return{STATUS:vn,aiPoint:"",newTheme:"",isChange:!1}},components:{SymbolCrossTwo:nn.Z,AirplaneNormal:bn.Z},props:{status:String,content:{type:String,default:""}},mounted:function(){this.initAiPoint()},methods:{getI18nText:s.GH,changeTheme:function(){this.newTheme=this.content,this.isChange=!0},handleToInput:function(){this.$emit("handleToInput",{inputValue:this.newTheme}),this.isChange=!1},handleClose:function(){this.$emit("close")},updatePriv:function(){this.aiPoint&&(this.aiPoint.update(),this.aiPoint.dwEvent("change"))},reset:function(){this.isChange=!1},initAiPoint:function(){var e=this;return(0,i.Z)(r().mark((function t(){var n,s,i;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Cn.CJ)({name:"./AiPoint"});case 2:return n=t.sent,s=document.querySelector("#ai-create-point"),i=new n,t.next=7,i.mount(s,{productName:gn,intentionCode:yn});case 7:e.aiPoint=i;case 8:case"end":return t.stop()}}),t)})))()}}},kn=(0,u.Z)(wn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ai-create-header"},[n("div",{staticClass:"title-wrapper"},[n("div",{staticClass:"flex-box first-line"},[n("div",{staticClass:"title"},[e._v(" "+e._s(e.getI18nText("yun_views_AiCreate"+(e.status===e.STATUS.init?"0":"9")))+" ")]),n("div",{staticClass:"flex-box ai-create-header-tool"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.aiPoint,expression:"aiPoint"}],staticClass:"ai-create-point",attrs:{id:"ai-create-point"}}),n("kd-button",{staticClass:"ai-create-close",attrs:{icon:"",type:"light"},on:{click:e.handleClose}},[n("SymbolCrossTwo",{attrs:{size:"16",fill:"#757575"}})],1)],1)]),e.status===e.STATUS.init?n("div",{staticClass:"second-title"},[e._v(e._s(e.getI18nText("yun_views_AiCreate1")))]):e._e()]),[e.STATUS.success,e.STATUS.loading,e.STATUS.error].includes(e.status)?n("div",{staticClass:"loading-desc"},[n("div",{staticClass:"title"},[e._v(e._s(e.getI18nText("yun_views_AiCreate5")))]),e.isChange?n("div",{staticClass:"ai-create-textarea-box"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.newTheme,expression:"newTheme"}],staticClass:"create-textarea",attrs:{rows:"2"},domProps:{value:e.newTheme},on:{input:function(t){t.target.composing||(e.newTheme=t.target.value)}}}),e._v(" "),n("div",{staticClass:"confirm-btn",on:{click:e.handleToInput}},[n("AirplaneNormal")],1)]):[n("div",{staticClass:"ellipsis content",attrs:{title:e.content}},[e._v(e._s(e.content))]),e.STATUS.loading!==e.status?n("kd-button",{staticClass:"back-btn",attrs:{type:"light",highlight:""},on:{click:e.changeTheme}},[e._v(e._s(e.getI18nText("yun_views_AiCreate6")))]):e._e()]],2):e._e()])}),[],!1,null,"46a75048",null).exports,Sn={mounted:function(){document.addEventListener("keydown",this.handleKeyDown)},beforeDestroy:function(){document.removeEventListener("keydown",this.handleKeyDown)},methods:{getI18nText:s.GH,handleKeyDown:function(e){e.stop,e&&27===e.keyCode&&(e.stopPropagation(),this.handleStop())},handleStop:function(){this.$emit("handleStop")}}},xn=(0,u.Z)(Sn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ai-loading-card",on:{click:e.handleStop}},[n("div",{staticClass:"card-icon"},[n("img",{staticClass:"icon",attrs:{src:e.$cdn+"/kdocs/cloud/ai/ai.gif"}}),n("span",{staticClass:"text"},[e._v(e._s(e.getI18nText("views_AiSummary11")))]),n("span",{staticClass:"desc"},[e._v(e._s(e.getI18nText("yun_views_AiCreate10")))])]),n("div",{staticClass:"card-btn"},[n("span",{staticClass:"title"},[e._v(e._s(e.getI18nText("yun_views_AiCreate3")))]),n("span",{staticClass:"desc"},[e._v(e._s(e.getI18nText("yun_views_AiCreate4")))])])])}),[],!1,null,"3a119180",null).exports,In=n(27522),$n=n(70536),Tn=!1,En=0,Dn={props:{status:String,answerContent:{type:String,default:""},inputContent:{type:String,default:""}},components:{SymbolTick:an.Z,Refresh:sn.Z},data:function(){return{STATUS:vn,answer:"",SymbolTick:an.Z,Refresh:sn.Z}},watch:{answerContent:function(e,t){e.length>t.length&&this.printing()},status:function(e){e===vn.loading&&this.initVal()}},mounted:function(){this.initVal()},methods:{getI18nText:s.GH,gotoPPT:function(){var e=this;return(0,i.Z)(r().mark((function t(){var n,s,i,a,o,c,l,u,d,p,h;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$emit("aiSendDw","ai_funcclick",{func_name:"generate presentation"}),t.prev=1,e.$emit("handleIsLoading",!0),n=e.answerContent.split("\n").shift(),s=n.replaceAll(/[\n\r\s]+|(文档标题：|标题：)/g,""),t.next=7,(0,J.OH)({value:{textType:"outline",input:e.inputContent,text:e.answerContent}});case 7:return i=t.sent,a=i.id,t.next=11,(0,$n.dP)();case 11:if(!(o=t.sent)){t.next=23;break}return l=e.$store.state.team,t.next=16,o.createNewPage({tid:0,tname:"".concat(s,".pptx"),gid:(null==l||null===(c=l.current)||void 0===c?void 0:c.id)||0,pid:0,type:"wpp"});case 16:if(u=t.sent,d=u.href,e.$emit("handleIsLoading",!1),e.$emit("aiSendDw","ai_funcclick",{func_name:"generate presentation",result:"success"}),!d){t.next=23;break}return window.open((0,ge.changeUrlQuery)(d,{createInfo:a}),"_blank"),t.abrupt("return");case 23:t.next=31;break;case 25:t.prev=25,t.t0=t.catch(1),p=t.t0.code,h=t.t0.msg,e.$emit("aiSendDw","ai_funcclick",{func_name:"generate presentation",result:"fail",fail_reason:h||p}),e.$emit("handleIsLoading",!1),e.$message.error(e.getI18nText("yun_views_AiCreate11"));case 31:case"end":return t.stop()}}),t,null,[[1,25]])})))()},retry:function(){this.$emit("retry")},initVal:function(){Tn=!1,En=0,this.answer=""},printing:function(){var e=this;if(!Tn){Tn=!0;!function t(){En<e.answerContent.length?(e.answer+=e.answerContent[En++],En%15==0&&e.$refs.textarea&&(e.$refs.textarea.scrollTop=e.$refs.textarea.scrollHeight),requestAnimationFrame(t)):(Tn=!1,e.$refs.textarea&&(e.$refs.textarea.scrollTop=e.$refs.textarea.scrollHeight),e.$emit("changeSuccess"))}()}}}},Pn=(0,u.Z)(Dn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.answerContent,expression:"answerContent"}],staticClass:"answer-box"},[n("div",{ref:"textarea",staticClass:"textarea"},[e._v(" "+e._s(e.answer)+" ")]),[e.STATUS.success,e.STATUS.error].includes(e.status)?n("div",{staticClass:"tools-btn"},[e.status===e.STATUS.success?n("div",{staticClass:"btn success-btn",on:{click:e.gotoPPT}},[n("SymbolTick",{staticClass:"icon",attrs:{fill:"#ffffff",size:"16"}}),e._v(" "+e._s(e.getI18nText("yun_views_AiCreate7"))+" ")],1):e._e(),n("div",{staticClass:"btn retry-btn",on:{click:e.retry}},[n("Refresh",{staticClass:"icon",attrs:{size:"16"}}),e._v(" "+e._s(e.getI18nText("yun_views_AiCreate8"))+" ")],1)]):e._e()])}),[],!1,null,null,null).exports;function Fn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fn(Object(n),!0).forEach((function(t){(0,W.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var On=function(){function e(t){(0,qt.Z)(this,e);var n=t.query,s=t.body,i=(0,kt.changeUrlQuery)("".concat(b.Kn,"/kfc/longprovider/v1/aigc/content/stream/proxy"),n);this.evtSource=new Gt(i,{headers:{"Content-Type":"application/json","AIGC-GATEWAY-PRODUCT-NAME":gn,"AIGC-GATEWAY-INTENTION-CODE":yn},method:"POST",payload:s?JSON.stringify(s):void 0})}return(0,Lt.Z)(e,[{key:"handleSSEData",value:function(e,t){if(e&&e.data){var n=e.data;"ping"!==(n=JSON.parse(n)).cmd&&t(n)}}},{key:"onMessage",value:function(e){var t=this;t.evtSource.addEventListener("message",(function(n){try{t.handleSSEData(n,(function(n){n.result?(t.evtSource.dispatchEvent(An({type:"error"},n)),t.evtSource.close()):e(n)}))}catch(e){t.evtSource.close()}}))}},{key:"onError",value:function(e){this.evtSource.addEventListener("error",e)}},{key:"start",value:function(){this.evtSource.stream()}},{key:"close",value:function(){this.evtSource.close()}}]),e}(),Zn=function(){function e(t){var n=t.onMessage,s=t.onError,i=t.question,a=t.isRetry;(0,qt.Z)(this,e),this.onMessage=n,this.onError=s||function(e){console.error(e)},this.question=i,this.requestId=Rt(),this.isRetry=a,this.init()}var t,n;return(0,Lt.Z)(e,[{key:"init",value:(n=(0,i.Z)(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getPromt();case 3:return e.next=5,this.getContent();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),this.onError(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])}))),function(){return n.apply(this,arguments)})},{key:"getPromt",value:(t=(0,i.Z)(r().mark((function e(){var t,n,s,i,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,J.M1)({proxy:"/prompt/category/list",source:"wpp",office_type:"p",client_type:"kdocs-web",tag:"chat_list",method:"GET",request_id:this.requestId},{"AIGC-GATEWAY-PRODUCT-NAME":gn,"AIGC-GATEWAY-INTENTION-CODE":yn});case 2:t=e.sent,n=t.list,s=n.find((function(e){return"wpp_all"===e.category_name})),i=s.prompt_list,a=i.find((function(e){return"getOutlineByText"===e.name})),this.prompt=a.id;case 8:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getContent",value:function(){var e=this,t=Date.now(),n=this;return new Promise((function(s){e.sendDw("ai_open");var i=new On({query:{request_id:e.requestId,proxy:"/session/stream",office_type:"p",source:"wpp",client_type:"kdocs-web",scene:"ppt_generate"},body:{prompt_id:e.prompt,prompt_replace:{"{0}":e.question},question:"\n"}});i.onMessage((function(i){var a=i.data,r=i.event;if(["finish","error"].includes(r)){var o=Date.now()-t,c=a.session_id;e.sessionId=c,e.sendRequestDw({requestId:e.requestId,time:o,result:"finish"===r?"success":"fail"}),e.close()}["add","finish"].includes(r)?n.onMessage({data:a,event:r}):(s(),e.close())})),i.onError((function(s){var i=s.code,a=s.result,r=Date.now()-t;e.sendRequestDw({requestId:e.requestId,code:i||a,time:r,result:"fail"}),n.onError(s),e.close()})),i.start(),e.chat=i,e.sendDw("ai_createrequest",{request_id:e.requestId,request_source:e.isRetry?"retry":"request",send_way:"",request_type:"",request_theme:"",request_import_way:""})}))}},{key:"abort",value:function(){this.chat&&(this.sendDw("ai_finishrequest",{request_id:this.requestId,request_source:"request",scene:"discontinue",request_type:"",request_theme:"",request_import_way:""}),this.close())}},{key:"close",value:function(){this.chat&&(this.chat.close(),this.chat=void 0)}},{key:"sendRequestDw",value:function(e){var t=e.requestId,n=e.time,s=e.result;this.sendDw("ai_requestresult",{request_id:t,request_source:this.isRetry?"retry":"request",req_duration:n,exec_duration:n,duration:n,result:s}),this.sendDw("ai_finishrequest",{request_id:t,request_source:this.isRetry?"retry":"request",scene:"finish"})}},{key:"sendDw",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_.Z.onEvent(e,An({project:"wpp",file_id:"",session_id:this.sessionId,ai_type:"ai_creation",open_position:"creation",request_id:this.requestId},t))}}]),e}(),Nn=["一","二","三","四","五","六","七","八","九","十","十一","十二","十四","十五","十六","十七"],qn=[0,0],Ln=function(e){for(var t=0,n=0,s="";t<e.length;){if("#"===e[t]){if(n++,e[t+1]&&"#"===e[t+1]){t++;continue}n>=3?s+="  -":2===n?s+=" ".concat(++qn[1],"."):1===n&&(qn[1]=0,s+="".concat(Nn[qn[0]],"、"),qn[0]++),n=0}else s+=e[t];t++}return s};function Bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bn(Object(n),!0).forEach((function(t){(0,W.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gn={name:"AiCreate",components:{"create-header":kn,"loading-card":xn,"answer-box":Pn,FormatIcon:In.Z},data:function(){return{STATUS:vn,status:vn.init,DocList:_n,inputContent:"",answerContent:"",isLoading:!1,hasPrive:!1,scrollStatus:!1}},created:function(){var e=this;return(0,i.Z)(r().mark((function t(){var n;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,J.vn)({product_name:gn,intention_code:yn});case 3:n=t.sent,e.$store.commit(k.Sh3,{name:"pc_appCenter_ai_create",value:n}),e.hasPrive=n.enable,t.next=10;break;case 8:t.prev=8,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,8]])})))()},mounted:function(){this.sendDw("smartCreationn_show")},methods:{getI18nText:s.GH,handleClose:function(){this.$emit("close")},handleRetry:function(){this.chat&&this.chat.abort(),this.handletoChat({isRetry:!0})},handleStop:function(){this.chat&&this.chat.abort(),this.status=vn.error},handleToInput:function(e){var t=e.inputValue;this.aiSendDw("ai_funcclick",{func_name:"modify theme",result:"success"}),this.inputContent=t,this.chat&&this.chat.abort(),this.$refs.ansWerbox&&this.$refs.ansWerbox.initVal(),this.handletoChat()},handletoChat:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.isRetry,s=void 0!==n&&n;this.status=vn.loading,this.restoreValue(),this.chat=new Zn({onMessage:function(t){var n=t.data;if("finish"===t.event){if(e.answerContent){e.scrollStatus=!0,e.changeSuccess();var s=e.$refs.ansWerbox;s&&s.$forceUpdate()}else e.status=vn.error,e.answerContent=e.getI18nText("views_AiSummary22");e.$refs.createHeader&&e.$refs.createHeader.updatePriv()}else{var i=n.delta;e.answerContent+=Ln(i)}},onError:function(t){var n=t||{},s=n.code,i=n.msg;e.restoreValue();var a=i||e.getI18nText("views_AiSummary22");s&&Ut[s]&&(a=Ut[s].replaceAll(/\{|\}/g,"")),e.answerContent=a,e.status=vn.error},question:this.inputContent,isRetry:s})},handleClick:function(e){var t=this,n=e.ftype,s=e.url,i=e.dwType;this.sendDw("smartCreationn_click",{button_name:i||n}),["otl","ksheet"].includes(n)?window.open(s,"_blank"):["doc","form"].includes(n)?this.$message.warning(this.getI18nText("views_AiSummary16")):this.hasPrive?(this.inputContent="",this.status=vn.input,this.$nextTick((function(){t.$refs.textarea&&t.$refs.textarea.focus()}))):(this.$store.commit(k.QYd,{value:!0,aiApplyAttr:{proejct:"wpp",ai_type:"ai_creation",open_position:"creation"}}),this.$emit("close"))},changeSuccess:function(){this.scrollStatus&&this.printStatus?this.status=vn.success:this.printStatus||(this.printStatus=!0)},restoreValue:function(){this.answer="",this.answerContent="",this.scrollStatus=!1,this.printStatus=!1,qn=[0,0],this.$refs.createHeader&&this.$refs.createHeader.reset()},aiSendDw:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_.Z.onEvent(e,jn({project:"wpp",ai_type:"ai_creation",open_position:"creation"},t))},sendDw:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_.Z.onEvent(e,jn({open_position:"application center"},t))}}},Hn=Gn,Mn=(0,u.Z)(Hn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ai-create",class:e.status===e.STATUS.init?"":"ai-create-fix-height"},[n("create-header",{ref:"createHeader",attrs:{status:e.status,content:e.inputContent},on:{handleToInput:e.handleToInput,close:e.handleClose}}),e.status===e.STATUS.init?[n("div",{staticClass:"card-panel"},e._l(e.DocList,(function(t,s){return n("div",{key:s,staticClass:"card",on:{click:function(n){return e.handleClick(t)}}},[n("FormatIcon",{staticClass:"card-icon",attrs:{size:24,fileType:t.ftype,isLink:!1}}),n("div",{staticClass:"title"},[e._v(e._s(t.title))])],1)})),0),n("div",{staticClass:"bottom-tip"},[e._v(e._s(e.getI18nText("yun_views_AiCreate13")))])]:e.status===e.STATUS.input?n("div",{staticClass:"input-panel"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.inputContent,expression:"inputContent"}],ref:"textarea",staticClass:"input-textarea",attrs:{rows:"6",placeholder:e.getI18nText("yun_views_AiCreate2")},domProps:{value:e.inputContent},on:{input:function(t){t.target.composing||(e.inputContent=t.target.value)}}}),e._v(" "),n("kd-button",{staticClass:"confirm-btn",attrs:{type:"primary",disabled:!e.inputContent},on:{click:e.handletoChat}},[e._v(" "+e._s(e.getI18nText("yun_views_AiCreate10"))+" ")])],1):n("answer-box",{ref:"ansWerbox",attrs:{status:e.status,inputContent:e.inputContent,answerContent:e.answerContent},on:{changeSuccess:e.changeSuccess,aiSendDw:e.aiSendDw,handleIsLoading:function(t){return e.isLoading=t},retry:e.handleRetry}}),e.status===e.STATUS.loading?n("loading-card",{on:{handleStop:e.handleStop}}):e._e(),e.isLoading?n("div",{staticClass:"loading-box"},[n("img",{staticClass:"wpsai-loading",attrs:{src:e.$cdn+"/kdocs/public/ai/ai_loading.gif",alt:"wpsai"}})]):e._e(),e.status===e.STATUS.success?n("div",{staticClass:"warn-tip"},[e._v(" "+e._s(e.getI18nText("views_AiSummary14"))+" ")]):e._e()],2)}),[],!1,null,"10e166e4",null).exports,Rn={eduProTips:{title:"",hideTitle:!0,body:Ke,closeOnClickModal:!0,footer:null},companyFullTips:{title:(0,s.GH)("tip"),body:Me,footer:null},updateKdocsClient:{title:(0,s.GH)("doc_tips_client_update_dialog_title"),body:Ue,footer:null},tips:{title:(0,s.GH)("tip"),body:Ge,footer:null},copylink:{title:"<% title %>",body:Le,footer:null},recoverFilesVipConfirm:{title:"<% title %>",body:dt,footer:{okText:(0,s.GH)("entTrash_payVip")}},guide:{title:(0,s.GH)("components_dialog_events15"),body:v,footer:null},addDevices:{title:(0,s.GH)("components_dialog_events28"),body:w,footer:null},notEmptyDevices:{title:(0,s.GH)("components_dialog_events29"),body:F,footer:null},sharePhoneBind:{title:(0,s.GH)("components_dialog_bind_phone"),body:G,footer:null},docsFeedback:{title:(0,s.GH)("components_dialog_events40"),body:p,footer:null},vipPay:{title:"",body:R,footer:null},vipUpgrade:{title:"",body:V,footer:null},bindPhoneTip:{title:"",body:y,size:"small",footer:null},riskyDownloadTips:{title:(0,s.GH)("dialog_risky_download_tips_title"),body:ct,footer:{cancelText:null,okText:(0,s.GH)("i_know")}},deleteContacts:{title:(0,s.GH)("components_dialog_events49"),body:_e,footer:null},multiShare:{title:"",body:oe,showClose:!1,size:"large",footer:null},removeDevices:{title:(0,s.GH)("components_dialog_events29"),body:T,footer:null},secureInfo:{title:(0,s.GH)("components_dialog_events56"),body:Ne,footer:{okText:(0,s.GH)("components_dialog_events22")}},addContacts:{title:(0,s.GH)("components_dialog_events65"),body:Se,size:"large",footer:null,showClose:!1,showLeftBack:!0},sendContactInvitation:{title:(0,s.GH)("components_dialog_events65"),body:Ee,footer:null},deleteContact:{title:(0,s.GH)("components_dialog_events67"),body:be,footer:null},openClientTips:{title:(0,s.GH)("components_dialog_events68"),body:Pe,footer:{okText:(0,s.GH)("components_dialog_events69")}},shareGroupNumLimit:{title:(0,s.GH)("dialog_share_ShareGroupNumLimit_title"),body:Ae,footer:{okText:(0,s.GH)("dialog_share_ShareGroupNumLimit_confirm")}},DialogCorpTeamSpaceFull:{title:"<% title %>",body:Ve,footer:null},removeBackup:{title:(0,s.GH)("components_dialog_events74"),body:I,footer:null},update:{title:(0,s.GH)("component_dialog_update0"),body:nt,footer:null},upgrade5G:{title:"",hideTitle:!0,body:ht,footer:null},DeleteLabel:{title:"<% title %>",body:gt,footer:null},confirm:{title:"<% title %>",body:bt},CommonTips:{title:"<% title %>",body:wt},HomepagePopupCover:{title:"",hideTitle:!0,body:xt,footer:null,closeOnClickModal:!1},LogoutFail:{title:"<% title %>",body:$t,footer:null},newLayoutGuide:{body:Dt,footer:null,showClose:!1,modal:!1},TeamTagPanel:{title:"<% title %>",body:Ft,footer:null},TeamApprove:{title:"<% title %>",body:Ot,footer:null},aiSummary:{title:"",body:mn,footer:null,hideHeader:!0,size:"custom"},aiCreate:{title:"",hideHeader:!0,closeOnPressEscape:!1,body:Mn,footer:null,size:"custom"}}},79913:function(e,t,n){"use strict";var s=n(42982),i=n(81045),a=n(79835),r=n(21628),o=n(65856),c=n(16739);t.Z={_ext:function(e){if("folder"===e.ftype)return(0,i.GH)("file_filters_index0");var t=(0,a.getExtName)(e.fname);return("img"===t?e.fname.split(".").pop():t).toUpperCase()},_yunIcon:function(e){var t=e.ftype,n=e.type,s=e.name,i=e.fname,a=e.folder_acl,o=e.folderid,c=e.isShareFolder,l=a&&("part"===a.read_type||"part"===a.write_type);return"folder"===t&&l?"secret-folder":"sharefolder"===t?"folder":"devices"===t?"devices":"secretfolder"===t?"secret-folder":"normal"===n||"corpnormal"===n||"corpspecial"===n||"delgroup"===t||"linkfolder"===t?!o&&!c||e.useSharefolder1?"share-folder":"share-folder2":"loading"===n?"wps-file-loading":"folder"===t||"delfolder"===t?"folder":"kbs"===t?"kbs":(0,r.yunIcon)(s||i,t)},_icon:function(e){var t=e.ftype,n=e.type,s=e.name,i=e.fname;return"normal"===n?"wps-team-folder-s":"loading"===n?"wps-file-loading":t&&"folder"!==t&&"delfolder"!==t?(0,r.icon)(s||i,t):"folder"},_relative:function(e,t){return e?o.Z.relative(e,t):""},_size:function(e){var t=e.fname,n=e.ftype,i=e.fsize,r=e.size,o=(0,a.getExtName)(t,n);return(0,a.isWdoc)(t)||[].concat((0,s.Z)(c.ET),["h5","folder"]).indexOf(o)>-1?"":(0,a.convertUnit)(i||r||"0")},_selected:function(e,t){var n=e.id,s=e.fileid;return!!t.find((function(e){return e===(n||s)}))}}},39201:function(e,t,n){"use strict";var s=n(16473),i=n.n(s),a=n(71002),r=n(15861),o=n(87757),c=n.n(o),l=n(14500),u=n(78684),d=n(21628),p=n(81045),h=n(96490),f=n(70536),m=n(63040),v=n(5839),_=n(92250),g=n(63616);t.Z={mixins:[u.Z,_.Z],computed:{currentLevel:function(){return"svip"}},methods:{handleSpaceFull:function(e){var t=arguments,n=this;return(0,r.Z)(c().mark((function s(){var r,o,l,u,_,y,b,C,w,k,S,x,I,$,T,E,D,P,F,A,O,Z,N,q,L,B,j,G,H,M,R,U,z,V,W,Q,K,Y,J,X,ee,te;return c().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(r=!(t.length>1&&void 0!==t[1])||t[1],o=t.length>2?t[2]:void 0,l=t.length>3?t[3]:void 0,u={},e instanceof Error?u=(0,d.get)(e,"response.data"):"object"===(0,a.Z)(e)&&(u=e),(0,h.fV)(!0),_=(0,d.getSpaceFullType)((0,d.get)(u,"msg")),y=(0,d.get)(u,"result"),b=(0,d.get)(u,"code"),!("SpaceFull"===y&&_||"SpaceFull"===y&&11001===b)){s.next=18;break}return n.$emit("close","ok"),C=l&&l.groupid||u.groupid,w={position:u.full_position||"spacelimit_newbuilt",component:u.full_component||"web_lefttbab",payconfig:n.currentLevel},n.vipLessThan(n.$store.state.user.vip_level,"20")||n.vipEqualsTo("104")||(w.sku_key="vip_pro_plus"),s.next=16,(0,f.UK)("spaceFullModalShow",{groupId:C,payParams:w});case 16:s.next=58;break;case 18:if(!["CorpSpaceFull","corpSpacesFull","fileSizeLimit"].includes(y)){s.next=37;break}if(n.$emit("close","ok"),k=window.__INITIAL_STATE__?window.__INITIAL_STATE__.team.current.id:u.groupid,S=n.$route&&"Enterprise"===n.$route.name?k:u.groupid,I=(x=u||{}).companyID,$=void 0===I?0:I,T=x.fname,E=void 0===T?"":T,D=x.size,P=void 0===D?"":D,F=x.count,A=void 0===F?1:F,O=x.path,Z=void 0===O?"":O,N=x.action,q=void 0===N?"":N,L=x.fgroupid,B=void 0===L?0:L,j=x.fileid,G=void 0===j?0:j,H=x.isFolder,M=void 0!==H&&H,R=x.origId,U=void 0===R?0:R,z={groupId:S,payParams:{position:u.full_position||"spacelimit_upload_transfer",component:u.full_component||"web_lefttbab"}},$=Number($)||0,"saveas"===(V=o||q)&&(V="save_as"),z.epSpaceLimitOptions={companyID:$,type:"fileSizeLimit"===y?"upload_limit":"space_limit",action:V,fileInfo:{name:E,size:P,count:A,location:Z,groupID:Number(B)||0,fileID:Number(U)||Number(G)||0,isFolder:M}},!n.$ua.eduWorkbench){s.next=33;break}return i().error((0,p.GH)("fileSizeLimit"===y?"c_tooltips_Index20":"c_tooltips_Index14")),s.abrupt("return");case 33:return s.next=35,(0,f.UK)("spaceFullModalShow",z);case 35:s.next=58;break;case 37:if(!["groupNormalSpacesFull","groupSpecialSpacesFull"].includes(y)){s.next=52;break}if(!(W=+u.cid||+u.corpid||u.company&&+u.company.id)&&["Enterprise","EntSpace","EntTrash","Backup"].includes(n.$route.name)&&(W=n.$route.params.cid||0),W||!u.groupid){s.next=44;break}return s.next=43,(0,v.ZG)(u.groupid);case 43:W=s.sent;case 44:return Q={cid:W,spaceFullType:y,title:"groupNormalSpacesFull"===y?(0,p.GH)("mixins_spaceFull1"):(0,p.GH)("mixins_spaceFull2")},s.next=47,n._getSuperAdmin(W);case 47:K=s.sent,n.dialog("DialogCorpTeamSpaceFull",Object.assign({},Q,K)),(0,g.f)(Object.assign({},Q,K)),s.next=58;break;case 52:J=null!==(Y=e.response)&&void 0!==Y&&Y.data?e.response.data.result:-1,X=e,ee=(u||{}).faillist,te=void 0===ee?[]:ee,"ErrForbidDownloadLinkFile"===J?X=(0,p.GH)("mixins_spaceFull0"):"GroupOwnerSpaceFull"===y?X=(0,p.GH)("file_space_SpaceFull13"):"defaultError"!==y&&b?X=y:te.length&&(J=te[0].result,X={groupNumLimit:"".concat((0,p.GH)("plugins_tips_team1")).concat(m.Z[40].team_number).concat((0,p.GH)("plugins_tips_team2"))}[J]||e),r&&n._error(X),setTimeout((function(){(0,h.fV)(!1)}),3e3);case 58:case"end":return s.stop()}}),s)})))()},_isSuperAdmin:function(e){return(0,r.Z)(c().mark((function t(){var n,s,i,a,r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!1,t.prev=1,t.next=4,l.plussvr.get("/api/user/userinfo?comp_id=".concat(e));case 4:s=t.sent,i=s.data,a=i.userinfo||{},r=a.roleid,n=1===(parseInt(r)||-1),t.next=12;break;case 10:t.prev=10,t.t0=t.catch(1);case 12:return t.abrupt("return",n);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})))()},_getSuperAdminName:function(e){return(0,r.Z)(c().mark((function t(){var n,s,i;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="",t.prev=1,t.next=4,l.plussvr.get("/svr/v1/companies/".concat(e,"/super-admin"));case 4:s=t.sent,i=s.data,n=i.name,t.next=11;break;case 9:t.prev=9,t.t0=t.catch(1);case 11:return t.abrupt("return",n);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},_getSuperAdmin:function(e){var t=this;return(0,r.Z)(c().mark((function n(){var s;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s={},n.next=3,t._isSuperAdmin(e);case 3:if(s.isSuperAdmin=n.sent,s.isSuperAdmin){n.next=8;break}return n.next=7,t._getSuperAdminName(e);case 7:s.superAdminName=n.sent;case 8:return n.abrupt("return",s);case 9:case"end":return n.stop()}}),n)})))()}}}},98466:function(e,t,n){"use strict";var s=n(81354),i=n.n(s),a={sha1:s.SHA1,sha256:s.SHA256};t.Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sha1";return new Promise((function(n){var s=new FileReader;s.onload=function(){var e=i().lib.WordArray.create(this.result);n(a[t](e).toString())},s.readAsArrayBuffer(e)}))}},78574:function(e,t,n){"use strict";e.exports=n.p+"s1/static/images/e723b1b267c06f7eb934.svg"},73289:function(e,t,n){"use strict";e.exports=n.p+"s1/static/images/871798b005bc77aae265.svg"},60615:function(e,t,n){"use strict";e.exports=n.p+"s1/static/images/d639ad26dbf2e1aa2e14.png"},42480:function(){}}]);
