![function(t,e,n){"use strict";function i(t,e,n){if(arguments.length>1&&"[object Object]"!==String(e)){if(n=$.extend({},n),null==e&&(n.expires=-1),"number"==typeof n.expires){var i=n.expires,o=n.expires=new Date;o.setDate(o.getDate()+i)}return e=String(e),document.cookie=[encodeURIComponent(t),"=",n.raw?e:encodeURIComponent(e),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}var a,r=(n=e||{}).raw?function(t){return t}:decodeURIComponent;return(a=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie))?r(a[1]):null}Object.defineProperty(e,"__esModule",{value:!0}),e.gCookie=i,e.gIsLoginMi=function(){return!(!i("userId")&&!i("cUserId"))},e.gLogin=function(t){window.location.href=GLOBAL_CONFIG.loginUrl+"?redirectUrl="+(t||window.location.href)},e.shareTelegram=function(t){var e=window.GLOBAL_CONFIG.orderSite;e=("http"!==e.substr(0,4)?"https:"+e:e)+"/static/toshare?";var n=new URL(e),i=new URLSearchParams(n.search||"");!!t.title&&i.set("title",t.title),!!t.picture&&i.set("image",t.picture),!!t.description&&i.set("desc",t.description),t.link&&i.set("link",t.link);var o=""+n.origin+n.pathname+"?"+i.toString(),a=window.innerWidth/2-300+window.screenX,r=window.innerHeight/2-240+window.screenY,s=window.open("https://telegram.me/share/url?url="+encodeURIComponent(encodeURIComponent(o)),"telegram-window","width=600, height=480, top="+r+", left="+a+", toolbar=0, location=0, menubar=0, directories=0, scrollbars=0");s&&s.focus&&s.focus()},e.gFbShare=function(t){var e="",n=t.isOrigin;t.link&&"http"!==t.link.substr(0,4)&&(t.link="https:"+t.link);e=(n=!(t.link.indexOf("mi.com")>0)||n)?t.link:"https://buy.mi.com/es/static/toshare?image="+encodeURIComponent(t.picture)+"&title="+encodeURIComponent(t.title)+"&desc="+encodeURIComponent(t.description)+"&link="+encodeURIComponent(t.link);window.open("https://www.facebook.com/sharer.php?u="+encodeURIComponent(e)+"&quote="+t.title+"&display=popup&hashtag="+t.hashtag,"facebookwindow","height=450, width=550, top=    "+($(window).height()/2-225)+", left="+$(window).width()/2+", toolbar=0, location=0, menubar=0, directories=0, scrollbars=0")},e.gTwShare=function(t){var e=t.href,n=t.title,i=t.description,o=void 0===i?"":i,a=t.picture,r=void 0===a?"":a,s=t.isEventShare;if(void 0!==s&&s&&r&&n&&o)return void function(t){var e=t.link,n=t.title,i=t.description,o=t.picture,a="https://buy.mi.com/es/static/toshare?image="+encodeURIComponent(o)+"&title="+encodeURIComponent(n)+"&desc="+encodeURIComponent(i)+"&link="+encodeURIComponent(e);window.open("https://twitter.com/share?url="+encodeURIComponent(a),"twitterwindow","height=450, width=550, top=    "+($(window).height()/2-225)+", left="+$(window).width()/2+", toolbar=0, location=0, menubar=0, directories=0, scrollbars=0")}({link:e,title:n,description:o,picture:r});t.href&&"http"!==t.href.substr(0,4)&&(e="https:"+t.href);window.open("https://twitter.com/share?url="+encodeURIComponent(e)+"&text="+encodeURIComponent(n+"-"+o),"twitterwindow","height=450, width=550, top=    "+($(window).height()/2-225)+", left="+$(window).width()/2+", toolbar=0, location=0, menubar=0, directories=0, scrollbars=0")},e.login=function(t){window.location.href=GLOBAL_CONFIG.loginUrl+"?redirectUrl="+(t||window.location.href)},e.jsonp=function(t){$.ajax({url:t.url,dataType:"jsonp",jsonp:"jsonpcallback",jsonpCallback:t.jsonpCallback||"",cache:!!t.cache&&t.cache,success:t.success,error:t.error,timeout:t.timeout})},e.formatPrice=function(t,e){!e&&(e=",");var n=t.toString().split(".");return n[0]=n[0].replace(/\B(?=(\d{3})+(?!\d))/g,e),n.join(".")},e.randomNum=function(t){if(1===(t=parseInt(t)))return 0;if(t>1){var e=t-1;return Math.round(Math.random()*e)}},e.removeRepeat=function(t){for(var e,n=[],i={},o=0;null!=(e=t[o]);o++)i[e]||(n.push(e),i[e]=!0);return n},e.checkEmail=e.escape=e.getUTCDate=function(t,e){var n=t,i=o[e||GLOBAL_CONFIG.appLocal.name]||0,a=new Date(n).getTimezoneOffset();return new Date(n+60*(a+60*i)*1e3)},e.getUTCTime=function(t,e){var n=new Date(t),i=o[e||GLOBAL_CONFIG.appLocal.name]||0,a=60*(n.getTimezoneOffset()+60*i)*1e3;return n.getTime()-a},e.timeStr=function(t){return(t=new String(t)).length>2?t:(t="0"+t).substr(-2)},e.replaceAll=function(t,e){var n=new RegExp(Object.keys(e).join("|"),"gi");return t.replace(n,function(t){return e[t]})},e.FbRedirectUrl=function(t){var e="https://www.facebook.com/dialog/oauth/?client_id="+t.appID+"&redirect_uri="+t.redirect_uri+"&state="+t.state+"&scope="+t.scope+"&dislay=page";location.href=e},e.FbInit=function(t,e){window.fbAsyncInit=function(){FB.init({appId:t,xfbml:!0,version:"v2.1"}),e&&e()},n=document,i="script",o="facebook-jssdk",r=n.getElementsByTagName(i)[0],n.getElementById(o)||((a=n.createElement(i)).id=o,a.src="//connect.facebook.net/en_ALL/sdk.js",r.parentNode.insertBefore(a,r));var n,i,o,a,r},e.shareVk=function(t){t.img&&"http"!==t.img.substr(0,4)&&(t.img="https:"+t.img);t.url&&"http"!==t.url.substr(0,4)&&(t.url="https:"+t.url);!function(t){var e,n=t.params||{},i=Object.keys(n),o=i.length>0?"?":"";for(e=0;e<i.length;e++)"?"!==o&&(o+="&"),n[i[e]]&&(o+=i[e]+"="+encodeURIComponent(n[i[e]]));if(t.shareUrl+=o,t.isLink)window.location.href=t.shareUrl;else{var a=t.width||600,r=t.height||480,s=window.innerWidth/2-a/2+window.screenX,c=window.innerHeight/2-r/2+window.screenY,d="scrollbars=no, width="+a+", height="+r+", top="+c+", left="+s,l=window.open(t.shareUrl,"",d);window.focus&&l.focus()}}({shareUrl:"https://vk.com/share.php",params:{url:t.url,title:t.title,description:t.desc,image:t.img,comment:t.comment}})},e.reducePicUrl=function(t){var e=Math.ceil(t.width*t.pi),n=Math.ceil(t.height*t.pi),i="!"+e+"x"+n+"x1";return t.url.replace(/(\.jpg|\.jpeg|\.png)/,i+"$1")};var o=e.UTC_MAP={in:5.5,id:7,sg:8,my:8,ph:8,hk:8,tw:8,eg:2,es:2,it:2,de:2,fr:2,uk:1,ru:3}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ajax=e.Ajax=void 0;var i=c(n(121)),o=c(n(0)),a=c(n(1)),r=c(n(3));e.getServerTime=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,n=Math.floor(t/e),i=0;return new Promise(function(t){var o=setInterval(function(){i++,window.servertime&&(clearInterval(o),t(window.servertime)),i>n&&(clearInterval(o),t(Math.floor((new Date).getTime()/1e3)))},e)})},e.getOrderedSequence=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=0;return new Array(t).fill(0).map(function(t,o){return 0===o?i=e:i+=n,i})},e.isRightTime=function(t,e,n){return t<e?-1:t>n?1:0},e.getCompressedImageUrl=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return e&&n?t+"?thumb=1&w="+e+"&h="+n+"&width="+e+"&height="+n:t},e.getFormatedPriceText=function(t){var e=window.__NEED_SYMBOL_REVERSED_NATIONS__||["es","fr","it","ru","de","tr"],n=window.GLOBAL_CONFIG.appLocal.name,i=window.TRANSLATE.bundle.dollar;return e.includes(n)?t+" "+i:i+" "+t},e.setSizeof=function(t,e){if(!e)return!0;return Math.floor(Math.random()*t)<=e},e.getLatestLowestPrice=p,e.setDomLatestLowestPrice=function(t,e,n){if(!u)return;var o=new Map;e.each(function(t,e){var i=$(e).attr(n);if(o.has(i)){var a=Object.assign([],o.get(i));a.push(e),o.set(i,a)}else o.set(i,[e]);$(e).parent().css("visibility","hidden")});var a=[].concat((0,i.default)(o.keys()));p(t,a,o)},e.getEnergyLabel=function(t){function e(t,e){t.show();var n=e.energy_image,i=e.energy_info,o=e.product_energy,a=e.product_energy_info;n?t.find(".energy-icon").attr("src",n):t.find(".energy-icon").hide(),o?t.find(".energy-text").text(o):t.find(".energy-text").hide(),i?t.find(".energy-icon-url").attr("href",i):t.find(".energy-icon-url").removeAttr("target"),a?t.find(".energy-text-url").attr("href",a):(t.find(".energy-text-url").hide(),t.find(".energy-icon-url").removeAttr("target"))}$.ajax({type:"post",url:window.GLOBAL_CONFIG.goSite+"/activity/getenergy",dataType:"json",cache:!0,timeout:1e4,data:JSON.stringify({itemids:t}),success:function(t){if(0===t.errno){var n=$(".energy-box"),i=t.data;n.each(function(t,n){var o=$(n);if(!o.attr("data-gid"))return o.hide(),!1;for(var a=o.attr("data-gid").split(",")[0],r=0;r<i.length;r++)if(i[r].item_id===a&&null!==i[r].energy&&i[r].energy.length>0){for(var s=i[r].energy,c=1;c<s.length;c++){var d=n.cloneNode(!0);n.parentNode.insertBefore(d,n),e($(d),s[c-1])}e(o,s[s.length-1])}})}},error:)},e.deepLinkApp=function(t){if("1"!==s.get("ISAPP")&&"1"!==s.get("ISIOS")&&["in"].includes(t.appLocal.name)){var e="globalshop://mobile.mi.com?nativeOpenUrl="+window.location.href.replace(/&/g,"%26"),n=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);if(!!~navigator.userAgent.indexOf("Chrome")||n)window.location.href=e;else{var i=document.createElement("iframe");i.style.cssText="display:none; width=0; height=0",document.body.appendChild(i),i.src=e}}};var s=n(126));function c(t){return t&&t.__esModule?t:{default:t}}var d=window.__SCRIBING_PRICE_COMPLIANCE_NATIONS__||["fr","de","nl","pl","it"],l=window.GLOBAL_CONFIG.appLocal.name,u=d.includes(l);var f=Symbol("_AjaxInnerRequest"),h=e.Ajax=function(){function t(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).baseURL,n=void 0===e?"":e;(0,a.default)(this,t),this.base=n}return(0,r.default)(t,[{key:"get",value:function(t,e){var n=this.base?""+this.base+t:t;return this[f]((0,o.default)({url:n},e,{type:"GET"}))}},{key:"post",value:function(t,e){var n=this.base?""+this.base+t:t;return this[f]((0,o.default)({url:n},e,{type:"POST"}))}},{key:"request",value:,{key:f,value:function(t){return new Promise(function(e,n){$.ajax((0,o.default)({},t,{url:t.url,type:t.type,dataType:t.dataType||"json",xhrFields:(0,o.default)({withCredentials:!0},t.xhrFields),data:t.data||{},success:function(t){e(t)},error:function(t){n(t)}}))})}}]),t}();e.ajax=new h;function p(t,e,n){$.ajax({type:"post",url:t.goSite+"/activity/getreferenceprice",dataType:"json",cache:!0,timeout:1e4,data:JSON.stringify({itemids:e}),success:function(t){if(0===t.errno&&t.data&&t.data.length>0){var e=!0,i=!1,o=void 0;try{for(var a,r=t.data[Symbol.iterator]();!(e=(a=r.next()).done);e=!0){var s=a.value;if("0"!==s.reference_price){var c=!0,d=!1,l=void 0;try{for(var u,f=n.get(s.item_id)[Symbol.iterator]();!(c=(u=f.next()).done);c=!0){var h=u.value;$(h).text(s.reference_price),$(h).parent().css("visibility","visible"),$(h).parent().css("display","block")}}catch(t){d=!0,l=t}finally{try{!c&&f.return&&f.return()}finally{if(d)throw l}}}}}catch(t){i=!0,o=t}finally{try{!e&&r.return&&r.return()}finally{if(i)throw o}}}},error:function(t){}})}},function(t,e,n){t.exports=n(138)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.slide=e.formatNum=e.cartNum=e.appAddCart=e.winTips=e.getAjax=e.lazyLoad=e.cookie=void 0;var i,o=n(57),a=(i=o)&&i.__esModule?i:{default:i},r=n(4);function s(t,e,n){if(arguments.length>1&&"[object Object]"!==String(e)){if(n=$.extend({},n),null==e&&(n.expires=-1),"number"==typeof n.expires){var i=n.expires,o=n.expires=new Date;o.setDate(o.getDate()+i)}return e=String(e),document.cookie=[encodeURIComponent(t),"=",n.raw?e:encodeURIComponent(e),n.expires?"; expires="+n.expires.toUTCString():"",n.path?"; path="+n.path:"",n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("")}var a=void 0,r=(n=e||{}).raw?decodeURIComponent;return(a=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(document.cookie))?r(n.raw?a[1]:a[1].replace(/\+/g,"%20")):null}function c(t){var e=document.documentElement.clientWidth||320;e>720&&(e=720);var n=e/720,i=this,o={defObj:".main",defHeight:2.5*$(window).height()||2e3,graduallyShow:!0,placeholder:!1,hasquality:!0},r=((o=$.extend(o,t||{})).defHeight,"object"===(0,a.default)(o.defObj)?o.defObj.find("img[data-original], .xm-lazy"):$(o.defObj).find("img[data-original], .xm-lazy")),s=[],c=parseFloat($(window.document.documentElement).css("font-size")),d=window.devicePixelRatio,l=window.location.href.toLowerCase(),u=/(_network_type=)\w*/.exec(l),f=/(_img_quality=)\w*/.exec(l),h=(h=u?u[0].replace(/_network_type=/,""):"empty")||"empty",p=f?f[0].replace(/_img_quality=/,""):"",m={_default:"!40",default:"!60",wifi:"!90",empty:"!90"};h=m[h]?h:d>=2?"_default":"default",p=o.hasquality?p?"!"+p:m[h]:"";r.each(function(){var t=$(this);if(o.placeholder&&"img"===t[0].tagName.toLowerCase()&&0===t.next("span.J_imgPlaceholder").length){var e=$('<span class="J_imgPlaceholder xm-img-placeholder icon-mi"></span>'),n=t.position().top+t.height()/2,i=t.position().left+parseFloat(t.css("margin-left"))-parseFloat(t.css("margin-right"))+t.width()/2;e.css({top:c?parseInt(n/c*1e3)/1e3+"rem":n,left:c?parseInt(i/c*1e3)/1e3+"rem":i}),t.after(e)}s.push(t.offset().top)}),i._imgLoad=function(){var t,e=!1,i=(t=document,(window.pageYOffset?window.pageYOffset:Math.max(t.documentElement.scrollTop,t.body.scrollTop))+o.defHeight),a=$(window).width()+$(window).scrollLeft();r.each(function(t){var l=$(this);s[t]<=i&&(!(l.closest(".J_slideLazyLoad").length>0)||!(a<l.offset().left))&&(e=!0,r=r.not(l),s.splice(t,1,0),"img"===l[0].tagName.toLowerCase()?(!function(t){var e=t.css("width"),i=t.css("height");e.indexOf("rem")>-1&&(e=Math.ceil(parseFloat(e)*c)),i.indexOf("rem")>-1&&(i=Math.ceil(parseFloat(i)*c));var a=t.data("original"),r=o.imgWidth?Math.ceil(o.imgWidth*n)*o.imgPi:Math.ceil(e*d),s=o.imgHeight?Math.ceil(o.imgHeight*n)*o.imgPi:Math.ceil(i*d||1999);if(r&&s){var l="!"+r+"x"+s;o.imgPi&&(l=l+"x"+o.imgPi),a=a.replace(/(\.jpg|\.png|\.jpeg)/,l+p+"$1")}t.attr("src",a)}(l),l.on("load",function(){o.graduallyShow?l.removeAttr("data-original").addClass("xm-gradualimg"):l.removeAttr("data-original"),l.next(".J_imgPlaceholder").remove()})):l.removeClass("xm-lazy"))}),!0===e&&(s=$.grep(s,)},i._imgLoad(),i._bindImg=function(){c=parseFloat($(window.document.documentElement).css("font-size")),i._imgLoad()},$(window).on("scroll",i._bindImg).on("resize",i._bindImg),r.closest(".J_slideLazyLoad").length>0&&(r.closest(".J_slideLazyLoad").on("touchmove",function(){i._imgLoad()}),r.closest(".J_slideLazyLoad").on("scroll",function(){i._imgLoad()}))}function d(t){var e=t.$load||"";e&&e.hasClass("icon-loading")||(e&&e.addClass("icon-loading"),$.ajax({url:t.url,type:t.type||"GET",data:t.data||"",dataType:t.dataType||"json",jsonp:t.jsonp||"jsonpcallback",jsonpCallback:t.jsonpCallback||"jsonpCallback",cache:t.cache,xhrFields:t.xhrFields||{},success:function(n){var i=n.errno||n.code,o={title:n.msg||n.errmsg||n.error||n.message};if(e&&e.hasClass("icon-loading")&&e.removeClass("icon-loading"),-2!=n.code)return 0!==i&&20010!==i&&i?void(t.successERR?t.successERR(n):l(o)):(e&&e.hasClass("icon-loading")&&e.removeClass("icon-loading"),void(t.success&&t.success(n)));(0,r.gLogin)()},error:function(n){e&&e.hasClass("icon-loading")&&e.removeClass("icon-loading"),t.error&&t.error(n)}}))}function l(t){var e=doT.template('<div class="xm-tips-win J_tipsWin"><div class="tips-con">{{? it.img }}<div class="img"><img src="{{= it.img }}"></div>{{?}}{{? it.title }}<div class="title">{{= it.title }}</div>{{?}}{{? it.msg }}<div class="msg">{{= it.msg }}</div>{{?}}{{? it.button }}{{? it.button.length == 2 }}<div class="btn-double tips-btns-box"><a class="btn btn-l btn-white" href="{{= it.button[0][1] }}">{{= it.button[0][0] }}</a><a class="btn btn-r btn-white" href="{{= it.button[1][1] }}">{{= it.button[1][0] }}</a></div>{{?}}{{? it.button.length == 1 }}<div class="tips-btns-box"><a class="btn btn-white" href="{{= it.button[0][1] }}">{{= it.button[0][0] }}</a></div>{{?}}{{? !!it.button.text2 }}<div class="btn-double tips-btns-box"><span id="J_tipsBtn1" class="btn btn-l btn-white">{{= it.button.text1 }}</span><span id="J_tipsBtn2" class="btn btn-r btn-white">{{= it.button.text2 }}</span></div>{{?}}{{? !!it.button.text1 && !it.button.text2 }}<div class="tips-btns-box"><span id="J_tipsBtn1" class="btn btn-white">{{= it.button.text1 }}</span></div>{{?}}{{?}}</div><span class="tips-close" id="J_tipsClose"></span></div>'),n=$(document.body),i=$(".J_tipsWin");if(i.length>0&&i.remove(),!t);n.append(e(t)),$("#J_tipsClose").on("click",function(){$(this).parent().remove(),t.closeCB&&t.closeCB()}),t.button&&(t.button.ev1&&$("#J_tipsBtn1").on("click",function(){t.button.ev1(),$(this).parents(".J_tipsWin").remove()}),t.button.ev2&&$("#J_tipsBtn2").on("click",function(){t.button.ev2(),$(this).parents(".J_tipsWin").remove()}))}function u(t){var e=Number(s("xm_user_"+XIAOMI.GLOBAL_CONFIG.appLocal.name+"_num"));t&&(e+=Number(t),s("xm_user_"+XIAOMI.GLOBAL_CONFIG.appLocal.name+"_num",e,{path:"/"+XIAOMI.GLOBAL_CONFIG.appLocal.name,domain:".mi.com"})),e>0?$("#J_cartNum").removeClass("hide").text(e):$("#J_cartNum").addClass("hide"),_page_isAppSite&&setTimeout(0)}c.prototype.unbind=function(){$(window).off("scroll",this._bindImg).off("resize",this._bindImg)},e.cookie=s,e.lazyLoad=c,e.getAjax=d,e.winTips=l,e.appAddCart=function(t,e,n){d({url:GLOBAL_CONFIG.goSite+"/cart/add",data:t,type:"GET",dataType:"json",xhrFields:{withCredentials:!0},success:$load:n})},e.cartNum=u,e.formatNum=function(t){var e=/(\d+)(\d{3})/,n=function(n){return String(t).replace(/\d+/,function(t){for(;e.test(t);)t=t.replace(e,"$1"+n+"$2");return t})},i={in:n(","),id:n(".")};return i[XIAOMI.GLOBAL_CONFIG.appLocal.name]?i[XIAOMI.GLOBAL_CONFIG.appLocal.name]:t},e.slide=function(t){var e={slideObj:".xm-slide",tagCenter:!0,hasTag:!0,hasButton:!1,edgeType:"rollback",autoPlay:!0,interval:5,position:0,hasMulti:!1};for(var n in t)e[n]=t[n];e.endCallback=e.endCallback||function(){},e.interval=1e3*e.interval;var i=$(e.slideObj).find("xm-slide-scroll"),o=$(e.slideObj).find("figure");if(o.length<=1)return i.width("100%"),void o.width("100%");$(e.slideObj).length>0&&new function(t){var e,n,i=this,o=$(t.slideObj),a=o.find(".xm-slide-scroll"),r=o.find("figure"),s=r.length,c=o.width(),d=c*s,l=t.position;if(r.width(c),t.hasTag){for(var u=$('<ul class="xm-slide-pagination"></ul>'),f="<li></li>",h=1;h<s;h++)f+="<li></li>";u.append(f);var p=u.children("li");p.eq(l).addClass("current"),o.append(u),t.tagCenter&&u.css({"margin-left":-u.width()/2,left:"50%"})}if(t.hasButton){var m=$('<span class="xm-slide-leftbutton hide"></span><span id="" class="xm-slide-rightbutton"></span>');o.append(m),o.find(".xm-slide-leftbutton").on("click",function(){i.toLeft()}),o.find(".xm-slide-rightbutton").on("click",function(){i.toRight()})}if(a.css("width",d).on(),function(){a.removeClass("transition"),i.events();var e=o.find("figure[data-source]");"continue"===t.edgeType&&e.length>0&&(l=Number(e.data("source")),i.transform(a,c*l),e.css({"z-index":"-1"}),setTimeout(0))}),this.init=function(){i.transform(a,c*l),i.toPlay()},this.transform=function(t,e){t.css({"-moz-transform":"translate3d("+-e+"px, 0, 0)","-webkit-transform":"translate3d("+-e+"px, 0, 0)","-o-transform":"translate3d("+-e+"px, 0, 0)","-ms-transform":"translate3d("+-e+"px, 0, 0)",transform:"translate3d("+-e+"px, 0, 0)"})},this.toRun=function(e){var n;if(void 0!==e)n=c*l-e;else if(i.runType[t.edgeType](),a.addClass("transition"),n=c*l,r.off("touchstart").off("touchend"),o.off("touchmove"),p&&p.length>0){var s=l>=p.length?0:l;p.removeClass("current"),p.eq(s).addClass("current")}i.transform(a,n)},this.toPlay=function(){t.autoPlay&&!e&&(e=setInterval(function(){i.toRight()},t.interval))},this.toRight=function(t){t?l+=t:l++,i.toRun()},this.toLeft=function(t){t?l-=t:l--,i.toRun()},this.runType={rollback:function(){l<0?l=s-1:l>s-1&&(l=0)},end:function(){l<=0?(l=0,o.find(".xm-slide-leftbutton").addClass("hide"),o.find(".xm-slide-rightbutton").removeClass("hide")):l>=s-1?(l==s&&t.endCallback(),l=s-1,o.find(".xm-slide-rightbutton").addClass("hide"),o.find(".xm-slide-leftbutton").removeClass("hide")):(o.find(".xm-slide-leftbutton").removeClass("hide"),o.find(".xm-slide-rightbutton").removeClass("hide")),r.eq(l).addClass("on").siblings().removeClass("on")},continue:function(){v.css({"z-index":"1"}),g.css({"z-index":"1"}),l<0?(v.data("source",s-1),i.toRun(c*l,s-1)):l>s-1&&(g.data("source",0),i.toRun(-c*l,0))}},this.events=function(){r.off("touchstart").off("touchend").on("touchstart",function(t){e&&(clearInterval(e),e=null),a.removeClass("transition"),n=t.targetTouches[0].pageX}).on("touchend",function(e){var o=e.changedTouches[0].pageX-n,a=Math.abs(o),r=$(window).width()/5,s=void 0,d=Math.round(a/c);t.hasMulti&&d>1&&(s=d),o>0&&a>r?i.toLeft(s):o<0&&a>r?i.toRight(s):i.toRun(),i.toPlay()}),o.off("touchmove").on("touchmove",function(t){var e=t.targetTouches[0].pageX-n,o=Math.abs(e);$(window).width();o>=10&&t.preventDefault(),i.toRun(e)})},$(window).resize(function(){r.width(o.width()),c=r.width(),d=c*s,a.css("width",d)}),this.events(),"continue"===t.edgeType){var v=r.eq(-1).clone(),g=r.eq(0).clone(),_=function(t,e){i.transform(t,e),t.css({position:"absolute","z-index":"1",top:"0"}),a.append(t)};_(v,c),_(g,-d)}}(e).init()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlPath=void 0,e.gShare=function(t){(0,o.Mshare)(t),(0,i.Mbury)({eventTag:a(),buryName:"Sign_share_"+t.type})},e.bury=function(t){(0,i.Mbury)({eventTag:a(),buryName:t})};var i=n(159),o=n(86),a=e.getUrlPath=function(){var t="/"+GLOBAL_CONFIG.appLocal.name+"/",e=window.location.pathname.slice(t.length);return"preview/eventpage"===e?function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=window.location.search,n=e.split("&")||[],i="";return n.length&&n.forEach(,i}("page_url"):e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(57)),o=r(n(1)),a=r(n(3));function r(t){return t&&t.__esModule?t:{default:t}}e.clearCountDown=function(t){if(t&&t.timeIds)for(var e in t.timeIds)clearInterval(e)};var s=function(){function t(e){var n=e.endTime,i=e.tick,a=void 0===i?function(){}:i,r=e.timeup,s=void 0===r?function(){}:r,c=e.format,d=void 0===c?"%dd : %hh : %mm : %ss":c;(0,o.default)(this,t),this.timeIds={},n&&(d=d||"%dd : %hh : %mm : %ss",this.countDown(n,d,a,s))}return(0,a.default)(t,[{key:"getTimeNumbers",value:function(t){return String.prototype.padStart||(String.prototype.padStart=,{d:parseInt(t/86400).toString().padStart(2,"0"),h:parseInt(t/3600%24).toString().padStart(2,"0"),m:parseInt(t/60%60).toString().padStart(2,"0"),s:parseInt(t%60).toString().padStart(2,"0")}}},{key:"countDown",value:function(t,e,n,o){var a=0,r=Math.floor((new Date).getTime()/1e3);window.servertime&&"number"==typeof window.servertime&&(a=window.servertime-r,r=window.servertime),"number"==!(void 0===t||(0,i.default)(t))&&parseInt(t),setTimeout(function(){this.renderTime(r+1,t,e,n,o)}.bind(this),0);var s=setInterval(function(){(r=(new Date).getTime()/1e3+a)>=t&&clearInterval(this.timeIds[s]),this.renderTime(r,t,e,n,o)}.bind(this),1e3);this.timeIds[s]=s}},{key:"renderTime",value:function(t,e,n,i,o){var a=e-t,r=this.formatTime(a,n);a>0?i(r,a):o()}},{key:"formatTime",value:function(t,e){var n=this.getTimeNumbers(t);return 0==n.d&&e.replace(/\%d\w\s?:/,""),/\%d/.test(e)||(n.h=24*n.d+1*n.h+""),e.replace(/(\%\w)/g,}}]),t}();e.default=s},,function(t,e,n){e.f=n(5)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=GLOBAL_CONFIG.apiUrl+"/eventapi/api";e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"json";return new Promise(function(a,r){var s=""+i+t;$.ajax({type:n,url:s,dataType:o,xhrFields:{withCredentials:!0},data:e,success:function(t){a(t)},error:function(t){r(t)}})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.updateData=e.ajaxData=void 0;var i=n(51),o=n(33),a=GLOBAL_CONFIG.apiUrl+"/eventapi/api/signin/",r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"json";return new Promise(function(o,r){var s=""+a+t;$.ajax({type:n,url:s,dataType:i,xhrFields:{withCredentials:!0},data:e,success:function(t){o(t)},error:function(t){r(t)}})})};e.ajaxData=r,e.updateData=function(t,e){r("draw",{tag:(0,o.getUrlPath)(),date:t},"post").then(function(t){if(0===t.code){var n=0;n=(t.data.today_prize||{}).got?1:3,e(n);var o=t.data.bonus;(0,i.initBigPrizeStatus)(o)}821002===t.code&&(e(3),(0,i.initBigPrizeStatus)())})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bindEvent=function(){$(".modal_mask,.modal_close").on("click"),$(".modal_share,.modal_got").on("click",function(t){t.stopPropagation()}),$(".share_icons .icon").each(function(t,e){"1"!==$(e).attr("data-show")&&$(e).css({display:"none"})})},e.initBigPrizeStatus=function(t,e){var n=$(".coupon_content").attr("data-active"),i=$(".coupon_content").attr("data-got"),o=$(".coupon_content").attr("data-token");$(".signin .coupon_item").each(function(a,r){if(t){var s=t[a],c=s.got,d=s.current;s.total;$(r).find(".star").each(function(t,e){t<d&&$(e).css({backgroundImage:"url("+n+")"})}),c?$(r).find(".coupon-got").css({backgroundImage:"url("+i+")"}):(s.empty||e)&&$(r).find(".coupon-got").css({backgroundImage:"url("+o+")"})}else{var l=$(r).find(".coupon-got");!l.css("backgroundImage")&&l.css({backgroundImage:"url("+o+")"})}})},e.showPrizeModal=function(t){if(!t)return;$(".modal_mask").css({display:"block"}),$(".modal_share").css({display:"none"}),$(".modal_got").css({display:"block"})},e.showShareModal=function(t,e,n){$(".modal_mask").css({display:"block"}),$(".modal_share").css({display:"block"}),$(".modal_got").css({display:"none"});var r={};r.title=$(".share_icons").attr("data-title"),r.desc=$(".share_icons").attr("data-desc"),r.img=$(".share_icons").attr("data-image"),$(".share_icons").off("click").on("click",function(s){(0,o.updateData)(t,e);var c=s.target.className,d="";switch(!0){case-1!==c.indexOf("fb"):d="fb";break;case-1!==c.indexOf("tw"):d="tw";break;case-1!==c.indexOf("line"):d="line";break;case-1!==c.indexOf("vk"):d="vk"}r.type=d,r.link=window.location.href,(0,i.gShare)(r),a.signInBury.share({otData:n,key:d})})},e.setPrizeModalProImg=function(){var t=$(".signin_current").attr("data-img");$(".modal_got .got_img").css({backgroundImage:"url("+t+")"})},e.setClickLink=function(t){var e=$(".coupon_link").attr("data-url");$(".coupon_link").attr("href",t?e:GLOBAL_CONFIG.loginUrl+"?redirectUrl="+window.location.href)};var i=n(33),o=n(50),a=n(87)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TRANSLATE_TEXT=void 0;var i=a(n(26)),o=a(n(0));function a(t){return t&&t.__esModule?t:{default:t}}e.getStaticGoodsInfo=function(t){return JSON.parse(JSON.stringify(window.temp.content[t])).sections.reduce(function(t,e,n){var a=e.items.reduce,{});return(0,o.default)({},t,(0,i.default)({},n,a))},{})};var r={comming:"",select:"",nostock:"",noquota:"",chosen:"",deselect:"",select_more:"",add_cart_long:"",on_going:"",starts_at:"",starts_in:"",ends_at:"",ends_in:"",month:[],nth:null,ok:"",noleft_text:"",dollar:"",error_on_addcart:"",rrp:""};e.TRANSLATE_TEXT=(0,o.default)({},r,window.TRANSLATE.bundle)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.showTips=function(t){if(!t||!t.msg)return;var e='\n  <div id="J_Common_Tips" class="common-tips">\n    <div class="common-tips-container">\n      <div id="J_Common_Tips_Btn_Close"></div>\n      <div class="common-tips-body">\n        {{? it.title }}<div class="common-tips-title">{{= it.title }}</div>{{?}}\n        {{? it.msg }}<div class="common-tips-msg">{{= it.msg }}</div>{{?}}\n        '+(t.bodyElem||"")+'\n      </div>\n      {{? it.footerElem }}\n        <div class="common-tips-footer">'+(t.footerElem||"")+"</div>\n      {{?}}\n    </div>\n  </div>",n=window.doT.template(e),i=$("#J_Common_Tips");i.length>0&&i.remove();function o(){$("#J_Common_Tips").remove(),t.onClose&&"function"==typeof t.onClose&&t.onClose()}$(document.body).append(n(t)),"function"==typeof t.afterShow&&t.afterShow($("#J_Common_Tips .common-tips-container")),$("#J_Common_Tips_Btn_Close").on("click",o),$("#J_Common_Tips").on("click")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Countdown=void 0;var i=a(n(1)),o=a(n(3));function a(t){return t&&t.__esModule?t:{default:t}}e.Countdown=function(){function t(e){var n=e.endTime,o=e.tick,a=e.timeup;(0,i.default)(this,t),this.tick=o||function(){},this.timeup=a||function(){},this.timeId=0,n&&this.countDown(n-1)}return(0,o.default)(t,[{key:"countDown",value:function(t){var e=this;if("number"!=typeof t)return console.error("endTime must be string type!");var n=window.setInterval(function(){var n=Math.floor(Date.now()/1e3);t<=n&&clearInterval(e.timeId),e.renderTime(n,t)},1e3);this.timeId=n}},{key:"renderTime",value:function(t,e){var n=e-t,i=this.getTimeNumbers(n);n>-1&&this.tick(i,n),0===n&&this.timeup()}},{key:"getTimeNumbers",value:function(t){return{d:Math.floor(t/86400),h:Math.floor(t/3600%24),m:Math.floor(t/60%60),s:Math.floor(t%60)}}},{key:"clearCountDown",value}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TRANSLATE_TEXT=void 0;var i,o=n(0),a=(i=o)&&i.__esModule?i:{default:i};e.getStaticGoodsInfo=function(t){return JSON.parse(JSON.stringify(window.temp.content[t])).sections.reduce(function(t,e){var n=e.items.reduce(function(t,e){var n=e.skus,i=e.spuId;return n.forEach(function(e){t[e.goods_id]=(0,a.default)({},e,{spuId:i})}),t},{});return(0,a.default)({},t,n)},{})},e.getLatestStockInfos=function(t){var e={},n={},i=function(i){n[i]={sold_out:!0,no_left:!0,disabled:!0};var o=t[i].list,a=function(t){var a=function(){var e=o[t],n=e.sold_out,i=e.no_left;return{sold_out:n,no_left:i,disabled:n||i}}();e[t]=a;var r=n[i],s=r.sold_out,c=r.no_left,d=r.disabled;n[i].sold_out=s&&a.sold_out,n[i].no_left=c&&a.no_left,n[i].disabled=d&&a.disabled};for(var r in o)a(r)};for(var o in t)i(o);return{SKU:e,SPU:n}},e.getLatestGroupList=function(t,e,n){var i={},o={};for(var r in t){var s=e[r]||{},c=s.spuId,d=s.goods_name;if(i[c]||(i[c]=[]),t[r].list){var l=!0,u=!1,f=void 0;try{for(var h,p=t[r].list[Symbol.iterator]();!(l=(h=p.next()).done);l=!0)m=void 0,v=void 0,g=void 0,_=void 0,v=h.value,g=(m=n-v.user_num)<1?1:m,_=(0,a.default)({},v,{spuId:c,goods_name:d,need_num:g,goods_id:r}),i[c].push(_),o[v.group_no]=_}catch(t){u=!0,f=t}finally{try{!l&&p.return&&p.return()}finally{if(u)throw f}}}}var m,v,g,_;return{SPU:i,MAP:o}},e.getRandomAvatar=function(){var t=["https://i01.appmifile.com/webfile/globalimg/pandora/user-head/head-1.png","https://i01.appmifile.com/webfile/globalimg/pandora/user-head/head-2.png","https://i01.appmifile.com/webfile/globalimg/pandora/user-head/head-3.png","https://i01.appmifile.com/webfile/globalimg/pandora/user-head/head-4.png"];return t[Math.floor(Math.random()*t.length)]};n(34);e.TRANSLATE_TEXT=(0,a.default)({},{startsIn:"",endsIn:"",day:"",days:"",coming:"",end:"",setgroup:"",nostock:"",noleft:"",gPrice:"",join:"",need:"",BtnText:"",SelectVersionText:"",JoinGroup:"",error_on_set_group:"",rrp:"",latestLowestPrice:"",dollar:""},window.TRANSLATE.group_buying)},function(t,e,n){t.exports=n(12)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GoogleCaptcha=function(t,e){var n=void 0,o='<div id="J_CaptchaDialogImage" style="margin: 0 auto"></div>';function a(){var t;t=n,window.grecaptcha.reset(t),$("#J_CaptchaDialog").html(o),$("#J_CaptchaDialog").hide(),$("body").css("overflow","visible")}function r(t){a(),"function"==typeof e&&e(t)}$("#J_CaptchaDialogImage").is(":empty")&&(n=window.grecaptcha.render("J_CaptchaDialogImage",{sitekey:t,callback:r})),$("#J_CaptchaDialog").show(),1==(0,i.gCookie)("ISIOS")&&document.querySelector("#J_CaptchaDialog").addEventListener("touchmove",!1),$("body").css("overflow","hidden"),$("#J_CaptchaDialog").on("click")};var i=n(4)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(0),a=(i=o)&&i.__esModule?i:{default:i},r=n(25),s=n(4),c=n(15);var d={data:{contentData:{},_cmsEventText:_cmsEventText,currentEl:null},init:function(t){var e=$("#sec_"+t.id);d.data.currentEl=e,d.data.contentData=t,d.findSection(t)},findSection:function(t){var e=$("#sec_"+t.id);e.find(".goods-list");t.info.forEach(function(t,n){d.setStatus(t,e.find(".goods-list").eq(n))})},setStatus:function(t,e){for(var n=t.status,i=d.data._cmsEventText,o=e.find(".J_flashBuyBtn"),a=0;a<o.length;a++)if(t.items[a].id==o.eq(a).attr("data-seckillid").trim()){var r=t.items[a].goods_id;o.eq(a).attr("data-gid",r)}1==n||2==n?e.find(".J_flashBuyBtn").text(i.coming).attr("href","javascript:void(0)").attr("disabled","disabled"):3==n||4==n?d.setLiveBtn(t,e):5==n&&e.find(".J_flashBuyBtn").text(i.outstock).attr("href","javascript:void(0)").attr("disabled","disabled")},setLiveBtn:function(t,e){for(var n=t.items,i=d.data._cmsEventText,o=e.find(".J_flashBuyBtn"),a=function(t,e){var a=o.eq(t).removeAttr("disabled");a.text(i.buynow),n.forEach(function(t){t.goods_id==a.data("gid")&&t.is_cos&&a.text(i.outstock).attr("href","javascript:void(0)").attr("disabled","disabled")})},r=0,s=o.length;r<s;r++)a(r);$(".J_flashBuyBtn").off().on("click",function(){if($(this).attr("disabled"))return!1;d.buySeckill($(this))})},buySeckill:function(t){var e=d.data._cmsEventText;if(!(0,s.gIsLoginMi)())return(0,s.gLogin)(),!1;var n=t.attr("data-gid");if((0,c.setSizeof)(1e3,1e3))try{var i=t.data("otInfo"),o=(0,a.default)({},i.tip,{e:8720});window.eventXmot("click",(0,a.default)({},i,{tip:o,goodsId:n,isOpenGA:!1}));var l=(0,a.default)({},otData,{tip:o,items:[{itemName:otData.itemName,itemId:otData.goodsId,itemListName:"flashsale",itemListId:i.tip.c}]});window.xmot("ecommerce",{event:"select_item",ecommerce:l}),window.xmot("ecommerce",{event:"add_to_cart",ecommerce:l})}catch(t){console.warn(t)}(0,r.getAjax)({url:GLOBAL_CONFIG.seckillBaseUrl+"/seckill/do",dataType:"jsonp",jsonpCallback:"seckill",cache:!0,timeout:5e3,data:{tag:d.data.contentData.act_tag,tid:generalDisplay,goods_id:n},success,successERR:function(n){t.off().text(e.outstock).attr("href","javascript:void(0)").attr("disabled","disabled")},error:function(n){t.off().text(e.outstock).attr("href","javascript:void(0)").attr("disabled","disabled")}})}};e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.exposeTrack=function(t){try{var e=$(t.section);e&&0!==e.length&&window.xmot("exposeWith",{isInfinite:!1,exposeThreshold:.3,targetNodeSelector:t.section+" "+t.targetNodeSelector,targetNodeDataAttr:"data-ot-info"},function(e){return e.tip=e.tip||{},e.tip.c=window.temp.config.onetrack_id+"|"+e.tip.c,e.tip.e=t.tipE,e.extra=e.extra||{},e.extra.eventId=window.temp.config.id,e.isOpenGA=!1!==e.isOpenGA,e.goodsId&&e.goodsId.includes(",")&&(e.itemId=e.goodsId=e.goodsId.split(",")[0]),e})}catch(t){console.warn(t)}},e.performanceTrack=function(){var t=null;try{t=window.xmot("performance",{tip:{c:0,d:1,e:10786},pageType:"huodong"})}catch(t){}window.addEventListener("beforeunload")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(26)),o=a(n(0));function a(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=!(t.href.indexOf("mi.com")>0)||t.isOrigin;e?t.href=t.href.startsWith("http")?t.href:"https:"+t.href:e||(t.href="https://buy.mi.com/es/static/toshare?image="+t.image+"&title="+t.title+"&desc="+t.description+"&link="+t.href),window.FB&&window.FB.ui({link:t.href,method:"feed"})}function s(t){t.href.startsWith("http")||(t.href="https:"+t.href),window.open("https://twitter.com/share?text="+encodeURIComponent(t.title+"\n"+t.description)+"&url="+encodeURIComponent(t.href),"twitterwindow","height=450, width=550, top="+(window.screen.height/2-225)+", left="+(window.screen.width/2-275)+", toolbar=0, location=0, menubar=0, directories=0, scrollbars=0")}function c(t){var e=t.image?t.image.startsWith("http")?t.image:"https:"+t.image:"";t.href.startsWith("http")||(t.href="https:"+t.href),function(t){var e=t.params||{},n=Object.keys(e),i=void 0,o=n.length>0?"?":"";for(i=0;i<n.length;i++)"?"!==o&&(o+="&"),e[n[i]]&&(o+=n[i]+"="+encodeURIComponent(e[n[i]]));if(t.shareUrl+=o,t.isLink)window.location.href=t.shareUrl;else{var a=t.width||600,r=t.height||480,s=window.innerWidth/2-a/2+window.screenX,c=window.innerHeight/2-r/2+window.screenY,d="scrollbars=no, width="+a+", height="+r+", top="+c+", left="+s,l=window.open(t.shareUrl,"",d);window.focus&&l.focus()}}({shareUrl:"https://vk.com/share.php",params:(0,o.default)({},t,{url:t.href,image:e})})}function d(t){t.href.startsWith("http")||(t.href="https:"+t.href),window.open("https://social-plugins.line.me/lineit/share?url="+encodeURIComponent(t.href)+"&text="+encodeURIComponent(t.title+" \n"+t.description))}function l(t){t.href.startsWith("http")||(t.href="https:"+t.href),window.open("https://api.whatsapp.com/send?text="+encodeURIComponent(t.title+"\n"+t.description+"\n"+t.href))}e.Mshare=function(t){var e,n=t.type,a=t.img,u=void 0===a?"":a,f=t.title,h=void 0===f?"":f,p=t.desc,m=void 0===p?"":p,v=t.link,g=t.isOrigin;({fb:r,tw:s,vk:c,line:d,whatsapp:l})[n]((0,o.default)({href:window.location.href},(e={isOrigin:g,href:v,title:h},(0,i.default)(e,"vk"===n?"desc":"description",m),(0,i.default)(e,"image",u),e)))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.signInBury=void 0;var i,o=n(0),a=(i=o)&&i.__esModule?i:{default:i},r=n(80);e.signInBury={share:function(t){var e=t.otData,n=t.key;window.eventXmot("click",(0,a.default)({},e,{elementName:n,elementTitle:"signin",tip:(0,a.default)({},e.tip,{e:8723})}))},exposeModule:function(){setTimeout,1e3)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bidBury=void 0;var i,o=n(0),a=(i=o)&&i.__esModule?i:{default:i};e.bidBury={confirmBidBtn:function(t){var e=t.otInfo,n=t.goodsAmount;window.eventXmot("click",(0,a.default)({},e,{elementName:"confirm_bid",tip:(0,a.default)({},e.tip,{e:9543}),itemId:e.goodsId,extra:{goodsAmount:Number(n)}}))},clickableBidBtn:function(t){window.eventXmot("click",(0,a.default)({},t,{elementName:"i_want_to_bid",tip:(0,a.default)({},t.tip,{e:9542}),itemId:t.goodsId}))},addCartEndBid:function(t){var e=t.otInfo,n=t.goodsAmount;window.eventXmot("click",(0,a.default)({},e,{elementName:"cart",tip:(0,a.default)({},e.tip,{e:9541}),itemId:e.goodsId,extra:{goodsAmount:n}}))},share:function(t){var e=t.otInfo,n=t.key;window.eventXmot("click",(0,a.default)({},e,{elementName:n,itemId:e.goodsId}))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Bundle=void 0;var i=g(n(26)),o=g(n(0)),a=g(n(17)),r=g(n(18)),s=g(n(1)),c=g(n(3));e.initBundle=function(t){String.prototype.padStart||(String.prototype.padStart);$(".J_Bundle").each(function(e,n){new _(t,n)})};var d=n(53),l=n(184),u=n(15),f=n(185),h=n(55),p=n(54),m=n(186),v=n(187);function g(t){return t&&t.__esModule?t:{default:t}}var _=e.Bundle=function(){function t(e,n){(0,s.default)(this,t),this.mode=e,this.isPc="pc"===e,this.containerElem=$(n),this.preActiveIndex=0,this.cds={},v.Track.c1=+this.containerElem.data("track-c1"),v.Track.subModulePos=""+(+this.containerElem.data("index")+1),this.init()}var e,n;return(0,c.default)(t,[{key:"init",value:(n=(0,r.default)(a.default.mark(function t(){var e,n,i=this;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.sectionsElem=this.containerElem.find(".bundle-sections"),this.$sections=this.sectionsElem.children(".bundle-section"),this.tabsSelector="bundle-block-tabs"+(this.isPc?"":"-wrapper"),this.tabsElem=this.containerElem.find("."+this.tabsSelector),this.$tabs=this.tabsElem.children(".bundle-block-tab"),this.$addCartBtn=this.containerElem.find("#J_Bundle_AddCart"),t.next=8,this.initSections();case 8:if(e=t.sent,n=e.needStock,e.needContinue){t.next=13;break}return t.abrupt("return");case 13:this.initTabs(),this.initButtons(),n&&this.getStock().then(function(t){i.isGettingStock=!1;var e=t.data;i.updateProductInfo(e),i.$curSection.on("click",i._handleActiveBtnClick.bind(i)),i.$addCartBtn.on("click",i._handleAddCartClick.bind(i)),i.setLastestStockInfos(e)}),this.allStaticGoodsInfo=(0,d.getStaticGoodsInfo)(this.containerElem.data("index"));case 17:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})},{key:"updateProductInfo",value:function(t){var e={sold_out:!0,quota:0,isdefault:!0},n=[],i=[];this.$curSection.children().each(function(o,a){var r=$(a),s=r.find(".bundle-item-info-btn"),c=r.data("spu"),l=t[c]||e;!function(t,e,n,i){e.sold_out||0===e.quota?(i.attr("disabled","disabled"),0===e.quota&&i.text(d.TRANSLATE_TEXT.noquota),e.sold_out&&i.text(d.TRANSLATE_TEXT.nostock)):i.text(d.TRANSLATE_TEXT.select).removeClass("bundle-item-info-btn-disabled")}(0,l,0,s),function(t,e){var n=t.find(".bundle-item-info-process-text :first-child"),i=t.find(".bundle-item-info-process-bar-inner");if(e.sold_out||0===e.quota)return n.text(0),void i.css("width",0);var o,a=((o=e.quota/+t.data("limit"))>1&&(o=1),o);n.text(e.quota),i.css("width",Math.round(1e3*a)/10+"%")}(r,l),function(t,e,o){(e.sold_out||0===e.quota)&&(t.remove(),e.sold_out?i.push(o):0===e.quota&&n.push(o))}(r,l,a)}),this.$curSection.append([].concat(n,i)),this.$curSection.find(".bundle-item-info-process").css("opacity",1)}},{key:"setLastestStockInfos",value:function(t){this.lastestStockInfos=Object.keys(t).reduce(function(e,n){var i=t[n].goods;return Object.keys(i).forEach),e},{})}},{key:"initSections",value:(e=(0,r.default)(a.default.mark(function t(){var e,n,i,o,r=this;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=function(t,e){r._switchDisplaySection(0,t),r.displayIndexs=r._initDisplayTab(t,e),r.preActiveIndex=t},t.next=3,(0,u.getServerTime)();case 3:if(n=t.sent,this.hasActiveSection=!1,i=[],o=[],this.$sections.each(function(t,a){var s=$(a),c=r._getTime(s),d=c.unix_start,l=c.unix_end,f=(0,u.isRightTime)(n,d,l);if(!f)return e(t,"ongoing"),r.hasActiveSection=!0,!1;-1===f?o.push(t):1===f&&(i.push(t),s.hide())}),!this.hasActiveSection){t.next=12;break}return t.abrupt("return",{needStock:!0,needContinue:!0});case 12:if(0!==o.length){t.next=17;break}return this.containerElem.remove(),t.abrupt("return",{needStock:!1,needContinue:!1});case 17:return e(o[0],"comming"),t.abrupt("return",{needStock:!1,needContinue:!0});case 19:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"_switchDisplaySection",value:function(t,e){this.$sections.eq(t).hide(),this.$sections.eq(e).show()}},{key:"_initDisplayTab",value:function(t,e){var n=this.$sections.length,i=(0,u.getOrderedSequence)(n).slice(t,t+4),o=this.$tabs;if(o.each(function(t,e){var n=$(e);i.includes(t)?(n.attr("data-status","comming"),t>=4&&n.show()):t<4&&n.hide()}),i.length<4&&o.addClass("bundle-block-tab-"+i.length),o.eq(t).attr("data-status",e),!this.isPc){var a=o.eq(0).css("border-top-left-radius");i.forEach(function(t,e,n){var i=o.eq(t);i.css("border-radius","unset"),0===e&&(i.css("border-top-left-radius",a),i.css("border-bottom-left-radius",a)),e===n.length-1&&(i.css("border-top-right-radius",a),i.css("border-bottom-right-radius",a))})}return this._switchActiveTab(this.preActiveIndex,t),i}},{key:"initTabs",value:function(){var t=this.$tabs.eq(this.preActiveIndex);if(this.isInOneDay=this._getIsInOneDay(t),1===this.displayIndexs.length)return this.setSpecialTab(t);this.setDefaultTabs(),this.isInOneDay&&this.setActiveTab(t),this.tabsElem.on("click",this._handleTabsClick.bind(this))}},{key:"setActiveTab",value:function(t){var e=this._getTabFullTexts(t);if(this.isPc){var n=t.find(".bundle-block-tab-active-line1"),i=t.find(".bundle-block-tab-active-line2").children().eq(0);n.text(e._at),i.text(e._in),t.children("span").hide(),t.children("div").show()}else{t.parent().parent().find(".bundle-block-tab-active-info").children().eq(0).text(e._in),t.children().eq(0).text(e._at_2_line[0]+":"),t.children().eq(1).text(e._at_2_line[1])}this.cds[this.preActiveIndex]||(this.cds[this.preActiveIndex]={cd:this.setCountdown(this._getTime(t)["unix_"+e.keys],t),texts:e})}},{key:"setDefaultTabs",value:function(){var t=this;this.isPc?this.$tabs.each(function(e,n){var i=$(n),o=t._getTime(i).start,a=(0,f.getFormatedDate)(o);i.children().eq(0).text(t._getTabTime(a,o))}):this.$tabs.each(function(e,n){var i=$(n),o=t._getTime(i).start,a=(0,f.getFormatedDate)(o);i.children().eq(0).text(a.time),i.children().eq(1).text((0,f.getIsInSameDay)(o)?"":a.date)})}},{key:"setSpecialTab",value:function(t){var e=this._getTabFullTexts(t);if(this.isInOneDay){if(this.isPc)t.html(t.children(".bundle-block-tab-active-wrapper").html());else{var n=t.parent().parent().children().eq(2).show(),i=n.prop("outerHTML");n.remove(),t.html("<div></div>"+i)}t.children().eq(0).text(e._at),t.children().eq(1).children().eq(0).text(e._in),this.setCountdown(this._getTime(t)["unix_"+e.keys],t)}else t.html("<div>"+d.TRANSLATE_TEXT.starts_at+" : "+e.start.datetime+"</div><div></div>");t.removeClass("bundle-block-tab-active")}},{key:"_getTabFullTexts",value:function(t){var e=t.data("status");if(this.cds[this.preActiveIndex])return this.cds[this.preActiveIndex].texts;var n=this._getTime(t),a=(0,f.getFormatedDate)(n.start),r=(0,f.getFormatedDate)(n.end),s={_at:{comming:d.TRANSLATE_TEXT.starts_at+" : "+(this.isPc?this._getTabTime(a,n.start):a.time),ongoing:d.TRANSLATE_TEXT.ends_at+" : "+(this.isPc?this._getTabTime(r,n.end):r.time)},_at_2_line:{comming:[d.TRANSLATE_TEXT.starts_at,this._getTabTime(a,n.start)],ongoing:[d.TRANSLATE_TEXT.ends_at,this._getTabTime(r,n.end)]},_in:{comming:d.TRANSLATE_TEXT.starts_in+" :",ongoing:d.TRANSLATE_TEXT.ends_in+" :"},keys:{comming:"start",ongoing:"end"}};return Object.keys(s).reduce(function(t,n){return(0,o.default)({},t,(0,i.default)({},n,s[n][e]))},{start:a,end:r})}},{key:"setCountdown",value:function(t,e){var n=this,i=+e.data("index"),o=n.isPc?e.find(".bundle-block-tab-active-line2-time"):e.parent().parent().find(".bundle-block-tab-active-info-time");return new h.Countdown({endTime:t,tick:function(t,e){if(i===n.preActiveIndex||n.isPc){if(0===e)return window.location.reload();o.eq(0).text((""+(t.h+24*t.d)).padStart(2,"0")),o.eq(1).text((""+t.m).padStart(2,"0")),o.eq(2).text((""+t.s).padStart(2,"0"))}},timeup:function(){this.clearCountDown()}})}},{key:"_getTabTime",value},{key:"_getTabElem",value:function(t){return Array.from(t.classList).includes("bundle-block-tab")?$(t):this._getTabElem(t.parentNode)}},{key:"_switchActiveTab",value:function(t,e){t!==e&&(this.tabsElem.children().eq(t).removeClass("bundle-block-tab-active"),("number"==typeof e?this.tabsElem.children().eq(e):e).addClass("bundle-block-tab-active"))}},{key:"_getIsInOneDay",value:function(t){return this._getTime(t).start-Date.now()<864e5}},{key:"_getTime",value:function(t){var e=+t.data("start"),n=+t.data("end");return{start:1e3*e,end:1e3*n,unix_start:e,unix_end:n}}},{key:"_handleTabsClick",value:function(t){if(!this.isGettingStock&&t.target.className!==this.tabsSelector){var e=this._getTabElem(t.target);if(this.preActiveIndex!==e.data("index")){var n=+e.data("index"),i=this.preActiveIndex;if(this._switchActiveTab(this.preActiveIndex,e),this._switchDisplaySection(this.preActiveIndex,n),this.preActiveIndex=n,this.isInOneDay){this._getIsInOneDay(e)?(this.isPc||e.parent().siblings().eq(1).removeClass("bundle-block-tab-active-info_hidden"),this.setActiveTab(e)):(this.cds[this.preActiveIndex]||(this.cds[this.preActiveIndex]={texts:this._getTabFullTexts(e),cd:null}),this.isPc||e.parent().siblings().eq(1).addClass("bundle-block-tab-active-info_hidden"));var o=this.$tabs.eq(i),a=o.data("status"),r=this.cds[i].texts;if(this.isPc){if("ongoing"===a)o.children("span").show().html(r._at+"");else{var s=this._getTabTime(r.start,this._getTime(o).start);o.children("span").show().text(s)}o.children("div").hide()}else if("ongoing"===a)o.children().eq(0).text(r._at),o.children().eq(1).html("");else{o.children().eq(0).text(r.start.time);var c=(0,f.getIsInSameDay)(this._getTime(o).start);o.children().eq(1).text(c?"":r.start.date)}}v.Track.SessionClick({tip:{d:n}})}}}},{key:"initButtons",value:function(){var t=!0,e=!1,n=void 0;try{for(var i,o=this.displayIndexs[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,r=this._getBtns(a);a===this.preActiveIndex&&this.hasActiveSection||r.text(d.TRANSLATE_TEXT.comming)}}catch(t){e=!0,n=t}finally{try{!t&&o.return&&o.return()}finally{if(e)throw n}}}},{key:"_handleActiveBtnClick",value:function(t){var e=this;if(Array.from(t.target.classList).includes("bundle-item-info-btn")){var n=$(t.target);if(!n.attr("disabled"))if(n.hasClass("bundle-item-info-btn-selected"))this._handleCancelSelect(n);else{this.$curSelectedBtn=n;var i=n.data("spu"),a=n.data("goodsid")+"";if(a.includes(",")){var r=a.split(",").filter(Boolean).map(function(t){return(0,o.default)({},e.curGoodsInfo[t],e.lastestStockInfos[t]||{})});l.ChooseModal.getInstance(this).render({spu:i,skus:r})}else this._handleSelected({type:"single",spu:i,id:a,curSku:this.curGoodsInfo[a]})}}}},{key:"_handleCancelSelect",value:function(t){var e=-1;this.selectedGoodsList.some(function(n,i){return n.spu===t.data("spu")&&(e=i,!0)})&&this.selectedGoodsList.splice(e,1),t.text(d.TRANSLATE_TEXT.select).removeClass("bundle-item-info-btn-selected"),this.isPc&&m.ToolTip.remove(t),"multiple"===t.data("goods-type")&&this._setListItemInfo(t,{name:t.data("product-name"),price:{current:t.data("minprice-current"),origin:t.data("minprice-origin")}}),this._updateAddCartBtn()}},{key:"_getListItemByBtn",value:function(t){return t.hasClass("bundle-item")?{title:t.find(".bundle-item-info-title"),current_price:t.find(".bundle-item-info-price-now"),original_price:t.find(".bundle-item-info-price-origin")}:this._getListItemByBtn(t.parent())}},{key:"_setListItemInfo",value:function(t,e){var n=this._getListItemByBtn(t);n.title.text(e.name),n.current_price.text(e.price.current),n.original_price.text(e.price.origin)}},{key:"_handleSelected",value:function(t){this.selectedGoodsList||(this.selectedGoodsList=[]),"multiple"===t.type&&this._setListItemInfo(this.$curSelectedBtn,{name:t.curSku.goods_name,price:{current:t.curSku.current_price,origin:t.curSku.goods_price}});var e=this.curCondition.value,n={id:t.id,spu:t.spu,$btn:this.$curSelectedBtn};this.selectedGoodsList.length>=e?(this.selectedGoodsList[this.selectedGoodsList.length-1].$btn.text(d.TRANSLATE_TEXT.select).removeClass("bundle-item-info-btn-selected"),this.selectedGoodsList[this.selectedGoodsList.length-1]=n):this.selectedGoodsList.push(n);n.$btn.text(d.TRANSLATE_TEXT.chosen).addClass("bundle-item-info-btn-selected"),this.isPc&&m.ToolTip.set(n.$btn,d.TRANSLATE_TEXT.deselect),this._updateAddCartBtn();var i=+n.$btn.data("track-d"),o=(n.$btn.data("track-info")||{}).itemName||"";v.Track.SelectClick({tip:{d:i},productId:""+t.spu,goodsId:""+t.id,itemName:o})}},{key:"_updateAddCartBtn",value:function(){var t=this,e=this.curCondition.value,n=this.selectedGoodsList.length;if(0!==n){this.$addCartBtn.show();var i=this.$addCartBtn.children("p");if(n===e){var o=this.selectedGoodsList.reduce(function(e,n){return(1e4*e+1e4*t.curGoodsInfo[n.id].reduce_price)/1e4},0);i.html(d.TRANSLATE_TEXT.add_cart_long+'<span class="bundle-addcart-save">'+(0,u.getFormatedPriceText)(o)+"</span>"),this.$addCartBtn.removeClass("bundle-addcart-disabled")}else i.text(d.TRANSLATE_TEXT.select_more.replace("$$",""+(e-n))),this.$addCartBtn.addClass("bundle-addcart-disabled")}else this.$addCartBtn.hide()}},{key:"_handleAddCartClick",value:function(){var t=this;this.selectedGoodsList.length<this.curCondition.value||(v.Track.CartClick(this.curCondition.value,this.selectedGoodsList),this.addCart().then(function(e){var n=window.GLOBAL_CONFIG.orderSite+"/cart";t.isPc?window.open(n,"_blank"):window.location.href=n,setTimeout(function(){window.location.reload()},1e3)}).catch(function(e){if(2019020!==e.errno)(0,p.showTips)({msg:e.errmsg||d.TRANSLATE_TEXT.error_on_addcart});else{var n=e.data.err_data.split(",").map);l.NoLeftModal.getInstance().render(t.isPc,{goodsinfo:n})}}))}},{key:"_getBtns",value},{key:"getStock",value:function(){this.isGettingStock=!0;var t=window.GLOBAL_CONFIG.apiUrl+"/eventapi/api/pulse/quotaList?pulse_activity_id="+this.$curSection.data("activity-id");return u.ajax.get(t)}},{key:"addCart",value:function(){var t,e=this,n=window.GLOBAL_CONFIG.goSite,i=(t={from:window.GLOBAL_CONFIG.clientType,id:e.selectedGoodsList.map).join("_"),source:"activity_bundle",promotion_id:e.$curSection.data("activity-id"),promotion_type:3},Object.keys(t).reduce,"").slice(1));return new Promise(function(t,e){u.ajax.get(n+"/cart/add?"+i).then(function(n){!n.errno&&n.data.res?t(n):e(n)})})}},{key:"$curSection",get},{key:"curCondition",get:function(){return{type:this.$curSection.data("condition-type"),value:+this.$curSection.data("condition-value")}}},{key:"curGoodsInfo",get}]),t}()},function(t,e,n){t.exports=n(91)},function(t,e,n){"use strict";n(92);var i=n(4),o=n(35),a=w(o);n(116);var r=n(127),s=n(128),c=w(n(131)),d=n(136),l=n(137);n(154);var u=n(80),f=n(155),h=n(156),p=n(157),m=n(180),v=n(89),g=n(188),_=n(15),b=n(193);function w(t){return t&&t.__esModule?t:{default:t}}$(document).ready(function(){var t,e,n=!1;function w(e){var n=$(".J_cmsBuyBtn");e<=_cmsEventConfig.timeSaleStart?n.each(function(t,e){var n=$(e),i=$(e).attr("data-endtime");if(n.removeAttr("target"),!i)return!0;n.text(_cmsEventText.coming).attr("href","javascript:void(0)").attr("disabled","")}):e<_cmsEventConfig.timeEventEnd?n.each(function(n,i){var o=$(i),r=$(i).attr("data-endtime");if(!r)return!0;e<=r?new a.default({endTime:r,tick:function(t){o.text(_cmsEventText.coming).attr("href","javascript:void(0)").attr("disabled","")},timeup}):(o.removeClass("ticking"),o.checkStock(t))}):console.log("error")}function y(e){$(".J_cmsLikeBuyBtn").each(function(){var n=$(this),i=+n.data("sale-time");e>i&&(n.data("is-sale-time","1"),n.checkStock(t))})}function k(t){var e;window.timeDef=$.ajax({type:"GET",url:GLOBAL_CONFIG.damiaoSite+"/gettimestamp",dataType:"script",timeout:5e3,error,success,complete:function(){t&&t(e)}})}(0,r.originCommon)(!1),(e=$(".cms-sec-marquee-box").width())>1126&&($(".cms-sec-marquee-box").css("transform","translateX("+e+"px)"),$(".cms-sec-marquee").addClass("cms-sec-marquee-animation")),function(){var e=$(".J_cmsEventCountdown"),u=$(".J_cmsNav"),f=$(".J_flashSaleCarousel .pro-list"),h=$(".J_couponSecList"),p=$(".J_freshCoupon"),m=[];if($(".energy-box").each(function(t,e){m.push($(e).attr("data-gid"))}),m=m.join(",").split(","),(0,_.getEnergyLabel)(Array.from(new Set(m))),u&&u.length>0&&function(t){var e=t.offset().top,n=t.addClass("fixed").height(),i=[];t.removeClass("fixed"),$(window).on("scroll.cmsNav",function(o){var a=0,r=$(window).scrollTop();if(r>=e){t.addClass("fixed");for(var s=0;s<i.length;s++)if(i[s].offset()){if(!(r>=i[s].offset().top-10-n))break;a=s}t.find("[data-target]").removeClass("active").eq(a).addClass("active")}else t.removeClass("fixed").find("[data-target]").removeClass("active")}),t.on("click.cmsNav","[data-target]",function(){var t=$(this).attr("data-target"),e=$('[data-id="'+t+'"]');e.length>0&&($("html, body").animate({scrollTop:e.offset().top-n},"fast"),$(this).siblings().addClass("active").removeClass("active"))}),t.find("[data-target]").each(function(){var t=$(this).attr("data-target"),e=$('[data-id="'+t+'"]');i.push(e)})}(u),(0,d.videoInit)(),$(".J_fix_icons .J_shareTG").on("click",function(t){t.preventDefault();var e=$(this),n=window.location.href.split("?")[0].split("#")[0];(0,i.shareTelegram)({title:e.attr("data-title"),description:e.attr("data-desc"),link:e.attr("data-link")||n+"?utm_source=tg&utm_medium=share",picture:e.attr("data-img")})}),$(".J_fix_icons .J_shareVK").on("click",function(t){t.preventDefault();var e=$(this),n=window.location.href.split("?")[0].split("#")[0];(0,i.shareVk)({title:e.attr("data-title"),desc:e.attr("data-desc"),url:e.attr("data-link")||n+"?utm_source=vk&utm_medium=share",img:e.attr("data-img")})}),$(".J_fix_icons .J_shareTW").on("click",function(t){t.preventDefault();var e=$(this),n=window.location.href.split("?")[0].split("#")[0];(0,i.gTwShare)({title:e.attr("data-title"),description:e.attr("data-desc"),href:e.attr("data-link")||n+"?utm_source=tw&utm_medium=share",picture:e.attr("data-img"),isEventShare:!0})}),$(".J_fix_icons .J_shareFb").on("click",function(t){t.preventDefault();var e=$(this),n=window.location.href.split("?")[0].split("#")[0],o=e.attr("data-hashtag")?"#"+e.attr("data-hashtag"):"";(0,i.gFbShare)({isOrigin:!0,link:e.attr("data-link")||n+"?utm_source=fb&utm_medium=share",title:e.attr("data-title"),description:e.attr("data-desc"),picture:e.attr("data-img"),hashtag:o})}),$(".J_fix_icons .J_shareLineApp").on("click",function(t){t.preventDefault();var e,n="";n=$(this).attr("data-link")||window.location.href.split("?")[0].split("#")[0]+"?utm_source=line&utm_medium=share",e="https://lineit.line.me/share/ui?url="+(n=encodeURIComponent(n)),window.open(e,"_blank")}),f&&f.length>0&&f.carousel({itemPerSlide:3,itemWidth:322}),!_cmsEventConfig.timePreheatEnd||!_cmsEventConfig.timeSaleStart||!_cmsEventConfig.timeEventEnd)return!1;function v(t){var e="";return t>=86400?e=countDownText.left+"%d"+countDownText.days+countDownText.togo:t>=3600?e=countDownText.left+"%h"+countDownText.hours+countDownText.togo:t<3600&&(e=countDownText.left+"%m"+countDownText.minutes+"%s"+countDownText.seconds+countDownText.togo),e}k(function(i){!function(t){$(".J_count_down").each(function(e,n){var i=$(n).attr("data-endtime"),r=i-t;if(i&&r>=0){$(n).show();var s=new a.default({endTime:i,format:v(r),tick,timeup:function(){$(n).hide(),(0,o.clearCountDown)(s)}})}})}(i),h&&h.length>0&&window.APISWITCH.flashcoupon&&(0,s.couponInit)(),p&&p.length>0&&window.APISWITCH.registercoupon&&(0,s.freshCouponInit)(),new a.default({endTime:_cmsEventConfig.timeSaleStart,format:_cmsEventCountdownTpl||"%dd : %hh : %mm : %ss",tick:function(t,n){var i=(_cmsEventCountdownTpl||"%dd : %hh : %mm : %ss").split(" : "),o={"%dd":"dd","%hh":"hh","%mm":"mm","%ss":"ss"},a=JSON.stringify(window.TRANSLATE.timeSymbols).includes("%")?{dd:"d",hh:"h",mm:"m",ss:"s"}:window.TRANSLATE.timeSymbols,r=[a[o[i[0]]],a[o[i[1]]],a[o[i[2]]],a[o[i[3]]]],s=t.split(" : ").map),c=""+s[0]+r[0]+" : "+s[1]+r[1]+" : "+s[2]+r[2]+" : "+s[3]+r[3];e.html(c)},timeup:function(){e.hide()}});var c=$(".J_cmsBuyBtn"),d=$(".J_cmsLikeBuyBtn");if(i<_cmsEventConfig.timeEventStart)c.each(function(t,e){$(e).text(_cmsEventText.eventComing).attr("href","javascript:void(0)").attr("disabled","disabled")}),d.each(function(t,e){$(e).text(_cmsEventText.eventComing).attr("href","javascript:void(0)").attr("disabled","disabled")});else if(i>=_cmsEventConfig.timeEventEnd)c.each(function(t,e){$(e).text(_cmsEventText.eventEnd).attr("href","javascript:void(0)").attr("disabled","disabled")}),d.each(function(t,e){$(e).text(_cmsEventText.eventEnd).attr("href","javascript:void(0)").attr("disabled","disabled")});else{var u={};d.each(function(t){var e=$(this),n=e.closest(".pro-detail").find(".J_likeCountDown"),o=e.data("stat-aid"),r=+e.data("sale-time"),s=e.data("start-time")-0,c=e.data("end-time")-0;function d(t){new a.default({endTime:t,format:"%hh : %mm : %ss",tick:function(t,e){if(e>86400){var i=parseInt(e/86400);i>1?n.html(i+window.TRANSLATE.cmsLikeBuy.days):n.html(i+window.TRANSLATE.cmsLikeBuy.day)}else n.html(t)},timeup:function(){}})}e.addClass("J_btnLike"),i<c?(i<s?(u[o]=!1,d(s),n.attr("data-countDownTips",window.TRANSLATE.cmsLikeBuy.startsIn),e.text(_cmsEventText.eventComing).attr("href","javascript:void(0)").attr("disabled","disabled")):(u[o]=!0,d(c),n.attr("data-countDownTips",window.TRANSLATE.cmsLikeBuy.EndsIn)),n.show()):n.hide(),i<r&&i>c&&(u[o]=!1,e.text(_cmsEventText.eventComing).attr("href","javascript:void(0)").attr("disabled","disabled"))}),window.APISWITCH.up&&(0,r.getUpInfo)(!1,u),t?(y(i),n=!0):$.ajax({url:GLOBAL_CONFIG.goSite+"/getstarstock?hd_id="+_cmsEventConfig.stockId,dataType:"jsonp",jsonp:"jsonpcallback",jsonpCallback:"getStarStock",cache:!0,timeout:1e4,success:function(e){0===e.errno&&(t=e.data,n||(y(i),n=!0))},error:function(){}}),i>=_cmsEventConfig.timePreheatEnd?t?w(i):$.ajax({url:GLOBAL_CONFIG.goSite+"/getstarstock?hd_id="+_cmsEventConfig.stockId,dataType:"jsonp",jsonp:"jsonpcallback",jsonpCallback:"getStarStock",cache:!0,timeout:1e4,success:function(e){0===e.errno&&(t=e.data,w(i),n||(y(i),n=!0))},error:function(){}}):(0,l.initProduct)()}}),window.APISWITCH.flashsale&&c.default.init()}(),$(".images-block .image-item").on("click",function(t){var e=$(this).attr("href");e.indexOf("mailto")>=0||(e.indexOf("javascript:void(0)")>=0?t.preventDefault():e.indexOf("http")<0&&(t.preventDefault(),$("html, body").animate({scrollTop:$("#"+e).offset().top},"fast")))}),window.APISWITCH.up&&(0,h.setDiscountLikeProcess)(),(0,f.initNotification)(),$(".J_SignDay").length&&(0,p.signDayInit)("pc"),$(".J_bid").length&&(0,m.initBid)(),$(".J_Bundle").length&&(0,v.initBundle)("pc"),$(".J_Group_Buying").length&&(0,g.initGroupBuying)("pc"),(0,b.initNotifyMe)(_cmsEventConfig);[{section:".J_products",targetNodeSelector:".goods-item",tipE:8700},{section:".images-block",targetNodeSelector:".image-item",tipE:8704},{section:".J_cmsVideo",targetNodeSelector:".video-wrap",tipE:8712},{section:".pro-box",targetNodeSelector:".pro-img a",tipE:8714},{section:".J_couponSecList",targetNodeSelector:".J_couponArea",tipE:8708},{section:".flashsale-container",targetNodeSelector:".goods-item",tipE:8718},{section:".J_Bundle",targetNodeSelector:".bundle-item",tipE:9008},{section:".J_Group_Buying",targetNodeSelector:".group-buying-item",tipE:11601}].forEach);var x=$("span[data-lastest-lowest]");(0,_.setDomLatestLowestPrice)(GLOBAL_CONFIG,x,"data-lastest-lowest")})},function(t,e,n){"use strict";!function(t){function e(e){var n,i,o,a,r,s,c,d,l,u,f,h,p,m=t(this),v=0,g=-1;function _(){if(f<=0)return!1;v&&clearInterval(v),v=setTimeout(function(){b(g===f-1?0:g+1),_()},p.pause)}function b(t){if(g===t)return!1;m.css({marginLeft:-l*p.itemPerSlide*t,transition:"margin-left "+p.speed/1e3+"s "+p.easing}),p.controls&&(0===t?o.addClass("control-disabled"):o.removeClass("control-disabled"),t===f-1?a.addClass("control-disabled"):a.removeClass("control-disabled")),p.pager&&c.find("li").eq(t).addClass("pager-active").siblings().removeClass("pager-active"),g=t}if(h={itemSelector:"> li",itemWidth:null,itemHeight:null,itemPerSlide:null,containerSelector:null,controlsSelector:null,pagersSelector:null,controls:!0,controlsClass:"xm-controls-line-small",pager:!1,speed:500,easing:"ease",auto:!1,pause:5e3,onLoad:t.noop},p=t.extend({},h,e),n=m.find(p.itemSelector),p.itemPerSlide&&n.length<=p.itemPerSlide)return this;l=p.itemWidth||n.outerWidth(!0),u=p.itemHeight||n.outerHeight(!0),(r=p.containerSelector?m.closest(p.containerSelector):m.parent()).addClass("xm-carousel-container"),s=m.wrap('<div class="xm-carousel-wrapper"></div>').closest(".xm-carousel-wrapper").css({height:u,overflow:"hidden"}),m.css("width",l*n.length),p.controls&&(i=t('<div class="xm-controls '+p.controlsClass+' xm-carousel-controls"><a class="control control-prev iconfont" href="javascript: void(0);">&#xe908;</a><a class="control control-next iconfont" href="javascript: void(0);">&#xe90d;</a></div>'),p.controlsSelector?r.find(p.controlsSelector).append(i):i.insertAfter(s),o=i.find(".control-prev"),a=i.find(".control-next"),o.on("click",function(e){e.preventDefault(),t(this).hasClass("control-disabled")||b(g-1)}),a.on("click",function(e){e.preventDefault(),t(this).hasClass("control-disabled")||b(g+1)})),p.pager&&(c=t('<div class="xm-pagers-wrapper"></div>'),p.pagersSelector?r.find(p.pagersSelector).append(c):c.insertAfter(s)),d=p.itemPerSlide||Math.ceil(s.width()/l),(f=Math.ceil(n.length/d))<=1||(b(0),p.pager&&function(){for(var e='<ul class="xm-pagers">',n=0,i=f;n<i;n+=1)e+='<li class="pager'+(0===n?" pager-active":"")+'"><span class="dot">'+(n+1)+"</span></li>";e+="</ul>",c.html(e),c.find("li").off(".carousel").on("click.carousel",function(){t(this).addClass("pager-active").siblings().removeClass("pager-active"),b(c.find("li").index(t(this)))})}(),p.auto&&(_(),p.controls&&i.find(".control").off(".carousel").on({"mouseenter.carousel":function(){v&&clearTimeout(v)},"mouseleave.carousel":function(){_()}}),p.pager&&c.find(".pager").off(".carousel").on({"mouseenter.carousel","mouseleave.carousel":function(){_()}})))}t.fn.carousel}(jQuery)},function(t,e,n){t.exports={default:n(94),__esModule:!0}},function(t,e,n){t.exports={default:n(105),__esModule:!0}},function(t,e,n){n(46)("asyncIterator")},function(t,e,n){"use strict";var i,o=n(0),a=(i=o)&&i.__esModule?i:{default:i},r=n(15);$.fn.reset=function(){return this.each)},$.fn.buyNow=function(){var t;return this.each(function(){t=$(this).attr("data-gid")?$(this).attr("data-gid").split(","):[];var e,n=$(this).attr("data-url"),i=t[0];n?(e=n,+$(this).data("open-on-new-page")&&$(this).attr("target","_blank")):e=GLOBAL_CONFIG.orderSite+"/cart/add/"+i,$(this).reset().html(_cmsEventText.buynow),e&&$(this).attr("href",e).removeAttr("disabled"),!$(this).hasClass("J_btnYes")&&$(this).click(function(){var t=$(this).data("otInfo"),e=$(this).data("type");t.tip=(0,a.default)({},t.tip,{e:{discount:8716,product:8702}[e]}),window.eventXmot("click",(0,a.default)({},t,{elementName:"buy_now",extra:{goodsCount:1},isOpenGA:!1}));var n=$(this).data("link"),i=(0,a.default)({},t,{link:n,elementName:"buy_now",items:[{itemName:t.itemName,itemId:t.goodsId,itemListName:e,itemListId:t.tip.c}]});window.xmot("ecommerce",{event:"select_item",ecommerce:i}),window.xmot("ecommerce",{event:"add_to_cart",ecommerce:i})})})},$.fn.outStock=function(t){return t=_cmsEventText.outstock||t,this.each(function(){$(this).reset().html(t).attr("disabled","").attr("href","javascript:void(0)")})},$.fn.colorChoose=function(){return this.each(function(){$(this).reset().html(_cmsEventText.buynow).removeAttr("disabled").addClass("J_openColorPop").attr("href","javascript:void(0)")})},$.fn.damiao=function(t,e,n,i){return this.each(function(){$(this).reset().html(_cmsEventText.buynow).removeAttr("disabled").attr("href","javascript:void(0)"),$(this).on("click.buy",function(){xiaomi.cart().addGood(t,function(){window.location.href=n?GLOBAL_CONFIG.orderSite+"/cart/recommend"+i:GLOBAL_CONFIG.orderSite+"/cart"})})})},$.fn.checkStock=function(t,e){t&&t.length>0&&this.each(function(){$(this).attr("data-gid")||$(this).buyNow();for(var n=$(this).attr("data-gid").split(","),i=!1,o=!1,c=!1,d=!1,l="",u=$(this).attr("data-outofstocktxt"),f=0;f<n.length;f++)for(var h=0;h<t.length;h++)t[h].id==n[f]&&(i=i||!t[h].is_cos,o=o||t[h].is_bigtap,c=t[h].has_recommend,d=t[h].has_packet,l=t[h].tag);if(i||e)if(n.length>1)!function(t,e){if(s)return;s=1;$(document).on("click",".J_openColorPop",function(e){if(e.preventDefault(),$(this).data("url")){var n=$(this).data("url");return+$(this).data("open-on-new-page")?(window.open(n,"_blank"),!1):(window.location.href=n,!1)}for(var i=$(".J_colorPop"),o=$(this).attr("data-gid").split(","),r=[],s=0;s<o.length;s++)for(var c=0;c<t.length;c++)t[c].id==o[s]&&r.push(t[c]);var d=doT.template($("#colorPopTempl").html())(r),l=$(this).data("otInfo");i.html(d),i.modal("show"),i.find(".J_proList>li").eq(0).click(),i.find(".J_btnYes").data("otInfo",l);var u=$(this).data("type");l.tip=(0,a.default)({},l.tip,{e:{discount:8717,product:8703}[u]}),window.eventXmot("click",(0,a.default)({},l,{elementName:"buy_now",isOpenGA:!1}));var f=$(this).data("link");window.xmot("ecommerce",{event:"select_item",ecommerce:(0,a.default)({},l,{tip:l.tip,link:f,items:[{itemName:l.itemName,itemId:l.goodsId,itemListName:u,itemListId:l.tip.c}]})})}),$(document).on("click",".J_colorPop .J_proList>li",function(n){var i=this,o=$(this).attr("data-img"),a=$(this).attr("data-price"),s=$(this).attr("data-name"),c=$(this).attr("data-title"),d=($(this).attr("data-product"),$(this).attr("data-gid")),l=$(this).parents(".J_colorPop"),u=l.find(".J_popTitle"),f=l.find(".J_btnYes"),h=$(this).attr("data-energyImage"),p=$(this).attr("data-energyInfo"),m=$(this).attr("data-energyProduct"),v=$(this).attr("data-energyProductInfo"),g=$($(this).parent().parent().find(".energy-box"));g.attr("data-gid",d),g.find(".energy-icon-url").attr("href",p),h?g.find(".energy-icon").attr("src",h):g.find(".energy-icon").hide(),v?g.find(".energy-text-url").attr("href",v):g.find(".energy-text-url").hide(),g.find(".energy-text").text(m);var _=$.grep(t);l.find(".J_proThumb").attr({src:o+"?thumb=1&w=220&h=220&width=220&height=220",alt:c}),l.find(".J_proName").text(s),l.find(".J_proPrice").text(a),c!==u.text()&&u.text(c),$(this).addClass("selected").siblings().removeClass("selected out-of-stock"),l.find(".J_proInfo").show(),l.find(".J_proStock").hide(),l.find(".J_proRegister").hide(),l.find(".J_soldBy")&&l.find(".J_soldBy").text("Sold by : "+_[0].goods_dealer),f.attr("data-gid",d).checkStock(_,e),e||!_[0].is_cos||_[0].is_presale&&!_[0].presale_cos||($(this).addClass("out-of-stock"),l.find(".J_proInfo").hide(),l.find(".J_proRegister").hide(),l.find(".J_proStock").show()),$($(this).parent().parent().find("span[data-lastest-lowest]")[0]).attr("data-lastest-lowest",d),setTimeout(function(){(0,r.setDomLatestLowestPrice)(GLOBAL_CONFIG,$(i).parent().parent().find("span[data-lastest-lowest]"),"data-lastest-lowest")},0)}),$(document).on("click",".J_colorPop .J_btnYes",function(t){$(this).parents(".J_colorPop").modal("hide");var e=$(".cms-color-pop .pro-list>li.selected"),n=$(this).data("otInfo"),i=(0,a.default)({},n.tip,{e:8725});window.eventXmot("click",(0,a.default)({},n,{tip:i,extra:{goodsCount:1},goodsId:String($(e).data("gid")),isOpenGA:!1}));var o=$(this).attr("href"),r=(0,a.default)({},n,{tip:i,link:o,items:[{itemName:n.itemName,itemId:n.goodsId,itemListName:"product_add_pop",itemListId:n.tip.c}]});window.xmot("ecommerce",{event:"select_item",ecommerce:r}),window.xmot("ecommerce",{event:"add_to_cart",ecommerce:r})})}(t,e),$(this).colorChoose();else if(o){var p="?phone="+l+"&goodsId="+n[0];$(this).damiao(n[0],d,c,p)}else $(this).buyNow();else $(this).outStock(u)})};var s=0},function(t,e,n){t.exports={default:n(118),__esModule:!0}},function(t,e,n){t.exports={default:n(123),__esModule:!0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(0),a=(i=o)&&i.__esModule?i:{default:i};e.originCommon=function(t){$("#J_main").on("click",".J_btnLikeShare",function(t){t.preventDefault();var e=$(this),n=e.data("share-title"),i=e.data("share-description"),o=e.data("share-image"),a=(e.data("stat-aid"),window.location.href),s=(e.data("goodsid")+"").split(",")[0];"fr"!==window.GLOBAL_CONFIG.appLocal.name&&window._msq&&window._msq.push(["trackEvent","event","template_price_like_reduction","-Share-FB_share_"+s,""]),(0,r.gFbShare)({isOrigin:!1,link:a,title:n,description:i,picture:o})}),$("#J_main").on("click",".J_btnSubcription",function(e){e.preventDefault();var n=$(this),i=n.data("type")-0,o=n.data("block-id"),a=n.data("stat-aid");if(!(0,r.gIsLoginMi)())return(0,r.gLogin)(),!1;$.ajax({url:GLOBAL_CONFIG.apiUrl+"/warmup/follow",type:"GET",dataType:"jsonp",cache:!0,data:{action:"add",follow_type:i,event_code:enPageUrl,block_code:o,aid:a},jsonp:"jsonpcallback",jsonpCallback:"follow",success:function(e){-2===e.code?(0,r.gLogin)():0===e.code&&(n.hide(),function(t,e){e?(0,s.winTips)({title:t}):alert(t)}(subscriptionTxt.successTxt,t))},error:function(t){}})}),(0,r.gIsLoginMi)()?requireInfo&&window.APISWITCH.popup&&$.ajax({url:GLOBAL_CONFIG.apiUrl+"/eventapi/api/popup/info",type:"GET",data:{event_code:enPageUrl},xhrFields:{withCredentials:!0},cache:!0,success:function(t){0==t.code&&t.data.show&&c(),$(".J_redPocket").find("a").length>0&&"ad"===$($(".J_redPocket").find("a")[0]).data("type")&&c()},error}):c();$("#J_main").on("click",".J_btnCloseRedPocket",function(t){t.preventDefault(),(0,r.gIsLoginMi)()&&$.ajax({url:GLOBAL_CONFIG.apiUrl+"/eventapi/api/popup/draw",type:"POST",cache:!0,xhrFields:{withCredentials:!0},data:{event_code:enPageUrl,close:!0},success}),$(".J_modalMask").hide(),$(".J_redPocket").hide()}),$("#J_main").on("click",".J_btnCloseRes"),$("#J_main").on("click",".J_btnRedPocket",function(t){t.preventDefault();var e=$(this),n=e.data("type").toLowerCase(),i=e.attr("href");e.data("successful-text"),e.data("failure-text");if("coupon"===n){if(!(0,r.gIsLoginMi)())return(0,r.gLogin)(),!1;$.ajax({url:GLOBAL_CONFIG.apiUrl+"/eventapi/api/popup/draw",type:"POST",cache:!0,xhrFields:{withCredentials:!0},data:{event_code:enPageUrl,close:!1},success:function(t){if(10004===t.code)(0,r.gLogin)();else if(0===t.code){var e=$(".J_pocketTipTitle");$(".J_redPocketRes .J_pocketErrorImg").hide(),e.html(e.data("successful-text")),$(".J_redPocket").hide(),$(".J_redPocketRes").removeClass("redpocket-hide")}else{var n=$(".J_pocketTipTitle");$(".J_redPocketRes .J_pocketSuccessImg").hide(),n.html(n.data("failure-text")),$(".J_redPocket").hide(),$(".J_redPocketRes").removeClass("redpocket-hide")}},error:function(t){t.msg||t.message;c()}})}else window.location.href=i}),$("#J_main").on("click",".J_btnLike",function(t){t.preventDefault();var e=$(this),n=e.data("stat-aid");if(e.attr("disabled")||e.hasClass("btn-disabled"))return!1;if("pc"===window.GLOBAL_CONFIG.clientType&&+e.data("is-sale-time")){var i=e.attr("href");!i.includes("javascript:void")&&window.open(i)}else{e.addClass("btn-disabled").attr("disabled","disabled"),$.ajax({url:d("/eventapi/api/up/set?url="+enPageUrl+"&goodsId="+n),type:"POST",cache:!0,xhrFields:{withCredentials:!0},success:function(t){-2===t.code||(0===t.code&&t.data.res?e.addClass("btn-like-ok").text(btnLike.liked):e.removeAttr("disabled").removeClass("btn-disabled"))},error:function(t){t.msg||t.message;e.removeAttr("disabled").removeClass("btn-disabled")}});var o=e.data("otInfo"),r=(0,a.default)({},o.tip,{e:8716});window.eventXmot("click",(0,a.default)({},o,{tip:r,elementName:"like",extra:{goodsCount:1},isOpenGA:!1}));var s=e.data("link");window.xmot("ecommerce",{event:"select_item",ecommerce:{productId:o.productId,tip:r,elementName:"like",link:s,items:[(0,a.default)({},o,{itemId:o.goodsId,itemListName:"discount",itemListId:o.tip.c})]}})}})},e.getUpInfo=function(t,e){if(""===enPageUrl)return;$.ajax({url:d("/eventapi/api/up/get"),type:"GET",xhrFields:{withCredentials:!0},cache:!0,data:{url:enPageUrl},success:function(t){if(-2===t.code);else if(0===t.code){var n=t.data;$(".J_proLikeItem").each(function(){var t=$(this),i=t.find(".J_btnLike"),o=t.data("stat-aid"),a=n[o];e&&e[o]&&(a.isUp?i.html(window.btnLike.liked):i.removeClass("btn-disabled").removeAttr("disabled").html(window.btnLike.like)),t.find(".J_stepPrice").eq(a.segmentIndex).addClass("now-price").siblings().removeClass("now-price"),t.find(".J_likeProcess").css({width:a.rate+"%"}),t.find(".J_likedPeopleCount").html(a.count)})}},error})};var r=n(4),s=n(25)function d(t){return window.location.href.includes("event.t.n.mi.com")?"//hd-c.test.mi.com/"+window.GLOBAL_CONFIG.appLocal.name+t:""+window.GLOBAL_CONFIG.apiUrl+t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.freshCouponInit=e.couponInit=void 0;var i=r(n(129)),o=r(n(48)),a=r(n(130));function r(t){return t&&t.__esModule?t:{default:t}}e.couponInit=function(){var t={},e=document.querySelector(".J_couponSecList").dataset.tag;Array.from(document.querySelectorAll(".J_couponSecList .J_couponArea")).forEach(function(n){var o=new i.default(n,e);t[o.id]=o}),(0,o.default)("/raffle/drawinfo",{tag:e}).then(function(e){if(0==e.code){var n=e.data.info;Object.keys(t).forEach(function(e){var i=t[e],o=n[e];if(null==o)return console.warn("优惠券与接口不符：ID "+e),void i.setState(0);3==o?i.setState(1):2==o?2==i.checkState(1e3*servertime)?i.setState(2):i.setState(0):1==o?0==i.checkState(1e3*servertime)?i.setState(0):i.setState(2):i.setState(0)})}})},e.freshCouponInit=function(){var t={},e=document.querySelector(".J_freshCoupon").dataset.tag;Array.from(document.querySelectorAll(".J_freshCoupon .J_couponArea")).forEach(function(n){var i=new a.default(n,e);t[i.id]=i}),(0,o.default)("/newcomer/info").then(function(e){if(0==e.code){var n=e.data;Object.keys(t).forEach(function(e){var i=t[e],o=n[e];if(null==o)return console.warn("优惠券与接口不符：ID "+e),void i.setState(0);3==o?i.setState(1):2==o?i.setState(0):1==o?i.setState(2):i.setState(0)})}else 400015==e.code?Object.keys(t).forEach(function(e){t[e].setState(2)}):Object.keys(t).forEach(function(e){t[e].setState(0)})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=d(n(0)),o=d(n(1)),a=d(n(3)),r=d(n(48)),s=n(4),c=n(74);function d(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(e,n){(0,o.default)(this,t),this.tag=n,this.coupon=e,this.id=e.dataset.couponId,this.startTime=1e3*e.dataset.startTime,this.endTime=1e3*e.dataset.endTime,this._timeGap=1e3*servertime-Date.parse(new Date),this._clicked=!1,this.setState=this.setState.bind(this),this.checkState=this.checkState.bind(this),this.alertMsg=this.alertMsg.bind(this),this.coupon.addEventListener("click",this._handlerClick.bind(this)),this.GOOGLE_CAPTCHA_KEY="6Le2lq4ZAAAAAICguqzsVnvy9ZTCNYzl3fZyJJ9Q"}return(0,a.default)(t,[{key:"_handlerClick",value:function(){var t=this,e=Date.parse(new Date);if(0!=this.checkState(e+this._timeGap)){if(!this._clicked){this._clicked=!0;!function e(n){var i={tag:t.tag,present_id:t.id};n&&(i.token=n),t.track("receive"),(0,r.default)("/raffle/drawprize",i,"POST").then(function(n){t._clicked=!1,0==n.code?t.setState(1):10004==n.code?(0,s.gLogin)():10009==n.code?(t.alertMsg(".coupon-warn-out"),t.setState(2)):10010==n.code?((0,c.GoogleCaptcha)(t.GOOGLE_CAPTCHA_KEY,function(t){e(t)}),t._clicked=!0):10011==n.code?(t.alertMsg(".coupon-warn-invalid"),t.setState(2)):t.setState(2)}).catch(function(e){t._clicked=!1})}()}}else(0,s.gIsLoginMi)()?(this.alertMsg(".coupon-warn-notNewComer"),this.track("about_to_start")):(0,s.gLogin)()}},{key:"track",value:function(t){try{var e=$(this.coupon).data("otInfo")||{};window.eventXmot("click",(0,i.default)({},e,{tip:(0,i.default)({},e.tip,{e:"8711"}),extra:(0,i.default)({},e.extra,{presentStatus:t})}))}catch(t){console.warn(t)}}},{key:"checkState",value:function(t){return(t=t||Date.parse(new Date))<this.startTime?0:t>=this.endTime?2:1}},{key:"alertMsg",value:function(t){var e=this,n=this.coupon.querySelector(t);n.style.visibility="visible",n.style.opacity="1",this._clicked=!0,setTimeout(function(){n.style.visibility="hidden",n.style.opacity="0",e._clicked=!1},1e3)}},{key:"setState",value:function(t){var e=["received-coupon","draw-coupon","stock-coupon"];Array.from(this.coupon.querySelectorAll(".coupon")).forEach(function(n){n.className.indexOf(e[t])>=0?n.style.display="inline":n.style.display="none"}),2!=t&&1!=t||this.coupon.setAttribute("aria-disabled","true")}}]),t}();e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=c(n(1)),o=c(n(3)),a=c(n(48)),r=n(4),s=n(74);function c(t){return t&&t.__esModule?t:{default:t}}var d=function(){function t(e,n){(0,i.default)(this,t),this.tag=n,this.coupon=e,this.id=e.dataset.couponId,this._clicked=!1,this.setState=this.setState.bind(this),this.alertMsg=this.alertMsg.bind(this),this.coupon.addEventListener("click",this._handlerClick.bind(this)),this.GOOGLE_CAPTCHA_KEY="6Le2lq4ZAAAAAICguqzsVnvy9ZTCNYzl3fZyJJ9Q"}return(0,o.default)(t,[{key:"_handlerClick",value:function(){var t=this;if(!this._clicked){this._clicked=!0;!function e(n){var i={present_id:t.id};n&&(i.token=n),(0,a.default)("/newcomer/draw",i,"POST").then(function(n){t._clicked=!1;var i=n.code;0==i?t.setState(1):10004==i?(0,r.gLogin)():400013==i?t.alertMsg(".coupon-warn-out"):400017==i||400018==i?t.alertMsg(".coupon-warn-end"):10009==i?(t.alertMsg(".coupon-warn-out"),t.setState(2)):10010==i?((0,s.GoogleCaptcha)(t.GOOGLE_CAPTCHA_KEY,function(t){e(t)}),t._clicked=!0):10011==i?(t.alertMsg(".coupon-warn-invalid"),t.setState(2)):t.ale)}).catch(function(e){t._clicked=!1})}()}}},{key:"alertMsg",value:function(t){var e=this,n=this.coupon.querySelector(t);n.style.visibility="visible",n.style.opacity="1",this._clicked=!0,setTimeout(function(){n.style.visibility="hidden",n.style.opacity="0",e._clicked=!1},2e3)}},{key:"setState",value:function(t){var e=["received-coupon","draw-coupon","stock-coupon"];Array.from(this.coupon.querySelectorAll(".coupon")).forEach(function(n){n.className.indexOf(e[t])>=0?n.style.display="inline":n.style.display="none"}),2!=t&&1!=t||this.coupon.setAttribute("aria-disabled","true")}}]),t}();e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,o=n(132),a=(i=o)&&i.__esModule?i:{default:i};var r={init:function(){a.default.init()}};e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=c(n(133)),o=c(n(75)),a=c(n(134)),r=c(n(135)),s=n(25);function c(t){return t&&t.__esModule?t:{default:t}}var d={data:{operateDatas:operateDatas,httpData:{},dataUrls:{seckillInfo:GLOBAL_CONFIG.seckillBaseUrl+"/seckill/info",shareReg:GLOBAL_CONFIG.seckillBaseUrl+"/seckill/share",seckillDo:GLOBAL_CONFIG.seckillBaseUrl+"/seckill/do"}},init:function(){d.getData()},getData:function(){(0,s.getAjax)({url:d.data.dataUrls.seckillInfo,dataType:"jsonp",jsonp:"jsonpcallback",jsonpCallback:"seckill",cache:!0,success:function(t){generalDisplay=t.data.display,d.data.httpData=d.deepClone(t.data),d.data.operateDatas.forEach(function(t){d.initData(t)})}})},initData:function(t){var e=d.deepClone(d.data.httpData),n=e.info,s=t.sections,c=e.display,l=e.next,u=e.share,f=e.seckill_start,h=e.act_tag,p=e.act_name,m=e.is_start,v=e.timestamp,g=e.is_need_share,_={id:t.id,display:c,next:l,share:u,seckill_start:f,act_tag:h,act_name:p,is_start:m,timestamp:v,is_need_share:g,info:[]};s.forEach(function(t,e){n.forEach(function(e,n){var i,o,a,r=(i=t.items,o=e.items,a=[],i.forEach(function(t){o.forEach(function(e){t.seckillId&&t.seckillId.trim()==e.id&&a.push(e)})}),a);if(r.length>0){var s={start_time:e.start_time,end_time:e.end_time,tid:e.tid,status:e.status,items:r,users:e.users};_.info.push(s)}})}),_.info=d.s(t){return 3==t.status||4==t.status});if(w.length>0&&(b=w[0].status),0==w.length){var y=_.info.filter(function(t){return 2==t.status});y.length>0&lter(function(t){return t.status==b}),x=0;if(k.length>0&&(x=_.info.indexOf(k[0])>0?_.info.indexOf(k[0])lter(function(t){return 5==t.status});T.length==_.info.length&&(x=T.length-1)}return _.display=x,a.default.init(d.deepClone(_)),i.default.init(d.deepClone(_)),o.default.init(d.deepClone(_)),new r.defaulteturn JSON.parse(JSON.stringify(t))},sliceData:function(t){var e=t.info,n=e.length;if(n<=4)return e;var i=t.timestamp,o=[],a=0;if(n>4)if(e.forEach(function(t,e){t.end_time<i&&(a=e+1)}),o=n-a>=4?e.slice(a,a+4):e.slice(n-4),n-a>=4)for(var r=0;r<a;r++)$("#sec_"+t.id+" .slider-item").eq(0).remove();else for(var s=0;s<n-4;s++)$("#sec_"+t.id+" .slider-item").eq(0).remove();return o}};e.default=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(75)),o=a(n(35));function a(t){return t&&t.__esModule?t:{default:t}}var r={data:{contentData:{},currentEl:null},init:function(t){var e=$("#sec_"+t.id);r.data.currentEl=e,r.data.contentData=t,r.getState()},formatTime:function(t){var e=r.data.currentEl;e.find(".J_hour").html(""),e.find(".J_min").html(""),e.find(".J_sec").html("")},getState:function(){var t=r.data.contentData,e=t.display,n=t.info[e],i=t.info.filter(function(t){return t.tid==n.tid});if(0!=i.length){var o=i[0];r.judegSection(o)}},judegSection:function(t){var e=r.data.contentData;switch(t.status){case 2:r.countDown(t);break;case 3:r.shine();break;case 4:var n=r.judgeTotalCos(t);if(r.shine(),n){r.unshine();var i=e.info[e.display+1];i&&r.judegSection(i)}break;case 5:r.unshine()}},countDown:function(t){var e=t.start_time,n=r.data,a=n.currentEl,s=n.contentData,c=[a.find(".J_hour"),a.find(".J_min"),a.find(".J_sec")],d=c[0],l=c[1],u=c[2];$("#J_timer_"+s.id).show(),$("#J_shine_"+s.id).hide(),new o.default({endTime:e,tick:function(t,e){var n=Math.floor(e/3600)>9?Math.floor(e/3600):"0"+Math.floor(e/3600),i=Math.floor(e/60%60)>9?Math.floor(e/60%60):"0"+Math.floor(e/60%60),o=Math.floor(e%60)>9?Math.floor(e%60):"0"+Math.floor(e%60);d.text(n),l.text(i),u.text(o)},timeup:function(){var t=a.find(".flashsale-title .active").index();i.default.setLiveBtn(s.info[s.display],a.find(".goods-list").eq(t))}})},shine:function(){var t=r.data.contentData.id;$("#J_timer_"+t).hide(),$("#J_shine_"+t).show(),$("#J_shine_"+t).removeClass("unlightning").addClass("light-shine")},unshine:function(){var t=r.data.contentData.id;$("#J_timer_"+t).hide(),$("#J_shine_"+t).show(),$("#J_shine_"+t).removeClass("light-shine").addClass("unlightning")},judgeTotalCos:function(t){for(var e=!0,n=t.items,i=0,o=n.length;i<o;i++)if(!n[i].is_cos){e=!1;break}return e}};e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={data:{contentData:{},btn:{},currentEl:null},init:function(t){var e=$("#sec_"+t.id);i.data.currentEl=e,i.data.btn={lightIndex:0,tabW:e.find(".flashsale-time .time-item").width()+e.find(".flashsale-time .space-item").width(),goodsW:e.find(".slider-group").width()},i.data.contentData=JSON.parse(JSON.stringify(t)),i.tabTimeShow(t),i.falshsaleBtn(t)},falshsaleBtn:function(t){var e=t.id;i.firstShowTab(t),$(".J_title_"+e).on("click",function(){var e=$(this).index();i.highlightBtn(e,t.id)})},firstShowTab:function(t){var e=t.info.filter(function(e){return e.tid==t.info[t.display].tid});if(0!=e.length&&-1!=t.display){var n=t.info.indexOf(e[0]),o=n+1>=t.info.length?n:n+1;if(4==e[0].status)if(i.judgeTotalCos(e[0]))return void i.highlightBtn(o,t.id);5!=e[0].status?i.highlightBtn(n,t.id):i.highlightBtn(o,t.id)}else i.highlightBtn(0,t.id)},judgeTotalCos:function(t){for(var e=!0,n=t.items,i=0,o=n.length;i<o;i++)if(!n[i].is_cos){e=!1;break}return e},highlightBtn:function(t,e){var n=t*($("#sec_"+e).find(".flashsale-time .time-item").width()+$("#sec_"+e).find(".flashsale-time .space-item").width()),o=-t*$("#sec_"+e).find(".slider-group").width();$("#sec_"+e+" .flashsale-title li").eq(t).attr("data-active","true").siblings().attr("data-active","false"),$("#sec_"+e+" .select-btn").css("transform","translateX("+n+"px)"),$("#sec_"+e+" .slider-content").css("transform","translateX("+o+"px)"),$("#sec_"+e+" .flashsale-title li").hasClass("active")||$("#sec_"+e+" .flashsale-title li").eq(t).addClass("activach(function(t,e){i.initTime(t,e)})},initTime:function(t,e){var n=i.data.currentEl,o=JSON.parse(JSON.stringify(i.data.contentData)),a=n.find(".flashsalenction(e){return e.status==t.status}),s=0;r.length>0&&(s=o.info.indexOf(r[0])>0?o.info.indexOf(r[0]):0);var c=s,d=new Date(1e3*t.start_time),l=[_flashSaleText.jan,_flashSaleText.feb,_flashSaleText.mar,_flashSaleText.apr,_flashSaleText.may,_flashSaleText.jun,_flashSaleText.jul,_flashSaleText.aug,_flashSaleText.sep,_flashSaleText.oct,_flashSaleText.nov,_flashSaleText.dec][d.getMonth()],u=d.getDate(),f=d.getHours()>=10?d.getHours():"0"+d.getHours(),h=d.getMinutes()>=10?d.getMinutes():"0"+d.getMinutes(),p=_flashSaleText.th;switch(u%10==1&&1!=Math.floor(u/10)?p=_flashSaleText.st:u%10==2&&1!=Math.floor(u/10)?p=_flashSaleText.nd:u%10==3&&1!=Math.floor(u/10)&&(p=_flashSaleText.rd),a.eq(e).find(".time").text(f+":"+h),a.eq(e).find(".day").text(l+"."+u+p),t.status){case 2:a.eq(c).find(".day").text(_flashSaleText.next);for(var m=0,v=a.length;m<v;m++)if(m!=c&&a.eq(m).find(".day").text()==_flashSaleText.next){a.eq(c).find(".day").text(l+"."+u+p);break}break;case 3:a.eq(c).find(".day").text(_flashSaleText.live);break;case 4:i.judgeTotalCos(t)?a.eq(c).find(".day").text(_flashSaleText.end):a.eq(c).find(".day").text(_flashSaleText.live);break;case 5:a.eq(c).find(".day").text(_flashSaleText.end)}5==r[0].status&&r.forEach(function(t,e){a.eq(e).find(".day").text(_flashSaleText.end)})}};e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(1)),o=a(n(3));function a(t){return t&&t.__esModule?t:{default:t}}var r=function(){function t(e){(0,i.default)(this,t),this.data=e,this.init=this.init.bind(this),this.setWinnerList=this.setWinnerList.bind(this)}return(0,o.default)(t,[{key:"init",value:function(){var t=this.data.id;if("1"!==$(".flashsale-winner-container_"+t).attr("data-show")){for(var e=this.data.info,n="",i=0;i<e.length;i++){for(var o={},a=e[i].items,r=0;r<a.length;r++){var s=a[r].goods_id,c=a[r].name;o[s]=c}var d=e[i].users;for(var l in d)for(var u=d[l],f=0;f<u.length;f++)n+="<li>"+_flashSaleText.miId+" "+u[f]+"  "+o[l]+"</li>"}this.setWinnerList(n,t)}}},{key:"setWinnerList",value:function(t,e){if(t.length){var n=$(".flashsale-winner-container_"+e),i=$(".winner_"+e),o=$(".winner_list_"+e);n.show(),o.append(t);i.width();var a=o.eq(0).width(),r=Math.ceil(a)/40;o.css("-webkit-animation-duration",r+"s")}}}]),t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.videoInit=function(){$(".J_ownVideo").each(function(){var t=function(t){var e=document.createElement("video");return e.src=t.src,e.poster=t.poster,e.controls=t.controls,e.preload=t.preload,e.width=o[t.type].width,e.height=442,e.playVideo=e.play,e.pauseVideo=e.pause,{player:e,top:t.top,scrollAutoPlay:t.autoplay}}({src:$(this).data("video-src"),controls:!0,preload:"auto",autoplay:$(this).data("video-autoplay"),top:$(this).offset().top,type:$(this).data("video-type"),poster:$(this).data("video-poster")});"autoplay"===t.scrollAutoPlay&&(t.player.muted="muted",i.push(t)),$(this).append($(t.player))}),function(){var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e),window.onYouTubeIframeAPIReady=function(){$(".J_youtubeVideo").each(function(t,e){var n=$(e).offset().top,o="autoplay"===$(e).data("video-autoplay"),a={player:new window.YT.Player($(e).attr("id"),{videoId:$(e).data("video-src").replace("https://www.youeady:function(t){o&&t.target.mute()}},playerVars:{rel:0,listType:"user_uploads"}}),top:n};o&&i.push(a)})}}(),$(window).on("scroll",function(t,e){var n=0,i=void 0,o=!1;function a(){(i=Date.now())-n<e&&!1===o||(t(),n=i)}return a.flash=function(){t()},a.pause=function(){o=!0},a.resume=function(){o=!1},a}(a,200))};var i=[],o={0:{width:750,textWidth:476},1:{width:561,textWidth:665},2:{width:422,textWidth:804}};function a(t){if(i.length>0){var e=$(window).scrollTop(),n=$(window).height();i.forEach(function(t){t.top<=e+n/2&&t.top+422>e+n/2?t.player.playVideo&&t.player.playVideo():(t.top>e+n/2||t.top+422<e+n/2)&&t.player.pauseVideo&&t.player.pauseVideo()})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setRemindMe=void 0;var i,o=u(n(17)),a=u(n(18)),r=e.setRemindMe=(i=(0,a.default)(o.default.mark(function t(){var e,n,i,r,c,u,w;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=m(window.location.href),n=h.eq(0).attr("data-follow"),i=h.eq(0).attr("data-unfollow"),r=h.eq(0).attr("data-learntxt"),$("#J_main").on("click",".J_cmsBuyBtn",function(){var t=(0,a.default)(o.default.mark(function t(e){var a,r,c,u,h,m,g,w,y;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),a=$(this),r=$(this).data("link"),c=$(this).data("otInfo")||{},"1"===a.attr("data-show-subscription")){t.next=8;break}return window.open(a.attr("href")),(0,l.track)({type:"learn_more",otData:$(this).data("otInfo"),link:r}),t.abrupt("return");case 8:if((0,l.track)({type:"remind_me",otData:c,link:r}),u=3,h=a.data("block-id"),m=a.data("stat-aid"),(0,s.gIsLoginMi)()){t.next=15;break}return(0,s.gLogin)(window.location.href+"?aid="+m+"&type="+u),t.abrupt("return");case 15:return g=a.hasClass("subscription"),w=g?p.follow:p.unfollow,t.next=19,_(u,m,w,h);case 19:10004===(y=t.sent)?(0,s.gLogin)(window.location.href+"?aid="+m+"&type="+u):0===y?(g?a.text(i).removeClass("subscription").addClass("hasSubscription"):a.text(n).removeClass("hasSubscription").addClass("subscription"),g&&b(),(0,d.initCount)().updateIcon(a,g)):v(f.errorTxt,!1);case 21:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()),t.next=7,g();case 7:c=t.sent,u=[],0===c.code&&(w=c(function(t){return t.split("-")[2]})),h.each(function(t,o){var a=$(o),s=a.data("stat-aid");a.addClass("remind-me"),"1"!==a.attr("data-show-subscription")||u.includes(s)||a.text(n).attr("href","javascript:void(0)").removeAttr("disabled").addClass("subscription"),"1"===a.attr("data-show-subscription")&&u.includes(s)&&a.text(i).attr("href","javascript:void(0)").removeAttr("disabled").addClass("hasSubscription"),"1"!==a.attr("data-show-subscription")&&a.text(r).removeAttr("disabled"),e.aid===s&&a.hasClass("subscription")&&a.trigger("click"),(0,d.initCount)().initCountIcon(o)});case 11:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)});e.initProduct=function(){r(),(0,d.initCount)().initInfo(".J_cmsBuyBtn")};var s=n(4),c=n(25),d=n(152),l=n(153);function u(t){return t&&t.__esModule?t:{default:t}}var f=window.subscriptionTxt,h=$(".J_cmsBuyBtn"),p={follow:GLOBAL_CONFIG.apiUrl+"/eventapi/api/warmup/follow",unfollow:GLOBAL_CONFIG.apiUrl+"/eventapi/api/warmup/unfollow",list:GLOBAL_CONFIG.apiUrl+"/eventapi/api/warmup/list"};function m(t){var e=t.match(/([^?=&]+)(=([^&]*))/g),n={};return e&&e.forEach(function(t){n[t.slice(0,t.indexOf("="))]=t.slice(t.indexOf("=")+1)}),n}function v(t,e){e?(0,c.winTips)({title:t}):alert(t)}function g(){return window.APISWITCH.warmup?new Promise(function(t){$.ajax({url:GLOBAL_CONFIG.apiUrl+"/eventapi/api/warmup/list",type:"GET",data:{event_code:window.enPageUrl,build_type:0},xhrFields:{withCredentials:!0},success:function(e){t(e)},error:function(){t(-1)}})}):[]}function _(t,e,n,i){return new Promise(function(o){$.ajax({url:n,type:"POST",data:{event_code:window.enPageUrl,follow_type:t,block_code:i,aid:e,build_type:0},xhrFields:{withCredentials:!0},success:function(t){o(t.code)},error:function(){o(-1)}})})}function b(){var t=3e3,e='<div id="J_subToast" class="sub-toast"><div class="sub-title">'+f.toastTxt+"</div></div>",n=$("#J_subToast");n.length>0?n.show():($("body").append(e),n=$("#J_subToast")),n.css({opacity:1}),setTimeout(function(){n.css({opacity:0})},t),n.on("transitionend",function(){"0"===n.css("opacity")&&n.hide()}),n.on("webkitTransitionEnd",function(){this}()||Function("return this")())},function(t,e,n){t.expreject:e.resolve)(n.v),e.promise}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(17)),o=r(n(18)),a=r(n(1));function r(t){return t&&t.e.initCount=function(){return new s};var s=function t(){var e,n=this;(0,a.default)(this,t),this._getRemindNum=function(t){var e=window.enPageUrl;return new Promise(function(n){$.ajax({url:GLOBAL_CONFIG.apiUrl+"/eventapi/api/warmup/v2/num",type:"GET",data:{event_code:e,aids:t.toString(),status:3,build_type:0,fq:1},success:function(t){return 0===t.code&&n(t.data[e])}})})},this._getAllProduct=function(t){Array.from(document.querySelectorAll(t)).forEach(function(t){var e=n._showCount(t),i=e.countBtnEl,o=e.flag;n.countBtnEl=i,n.proBtnEl=t,o&&(n._setCountNum(),n._setProAid())})},this._showCount=function(t){var e=t.nextElementSibling||{},n=e.dataset,i=t.dataset;return{countBtnEl:e,flag:n&&+n.showCount&&"1"===i.showSubscription}},this._setProAid=function(){var t=(n.proBtnEl.dataset||{}).statAid;n.aidList.push(t)},this._setCountNum=function(){var t=n.proBtnEl.dataset||{};n.countBtnEl.classList.add("active");var e=n.countBtnEl.firstElementChild;n.allCountEl[t.statAid]=e},this.initCountIcon=function(t){var e=n._showCount(t),i=e.countBtnEl;e.flag&&$(t).hasClass("hasSubscription")&&$(i).removeClass("unnotify").addClass("active-notify")},this.updateIcon=function(t,e){var n=e?"active-notify":"unnotify";t.next().removeClass("active-notify unnotify").addClass(n)},this.initInfo=(e=(0,o.default)(i.default.mark(function t(e){var o,a;return i.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n._getAllProduct(e),n.aidList.length){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,n._getRemindNum(n.aidList);case 5:if(o=t.sent){t.next=8;break}return t.abrupt("return");case 8:for(a in o)n.allCountEl[a].innerHTML=o[a];case 9:case"end":return t.stop()}},t,n)})),function(t){return e.apply(this,arguments)}),this.allCountEl={},this.aidList=[]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.track=void 0;var i,o=n(0),a=(i=o)&&i.__esModule?i:{default:i};e.track=function(t){var e=t.type,n=t.otData;t.link;try{var i=(0,a.default)({},n.tip,{e:8702});window.eventXmot("click",(0,a.default)({},n,{tip:i,elementName:e,extra:{goodsCount:1},isOpenGA:!1}))}catch(t){console.warn(t)}}},function(t,e,n){"use strict";$(".J_Swiper").length&&window.Swiper&&new Swiper(".swiper-container",{loop:!0,autoplay:{delay:4e3},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initNotification=void 0;var i,o,a,r=f(n(17)),s=f(n(18)),c=(e.initNotification=(i=(0,s.default)(r.default.mark(function t(){var e,n;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(window.APISWITCH.notification){t.next=2;break}return t.abrupt("return");case 2:if(0!==v.length){t.next=4;break}return t.abrupt("return");case 4:e=v.eq(0).attr("data-follow"),n=v.eq(0).attr("data-unfollow"),c(e,n),d(e,n);case 8:case"end":return t.stop()}},t,this)})),function(){return i.apply(this,arguments)}),o=(0,s.default)(r.default.mark(function t(e,n){var i,o,a,s;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=function(t){var e=[];if(0===t.code){var n=t.data&&t.data.follow_list;n&&(e=n.map(function(t){return t.split("-")[2]}))}return e},i=_(window.location.href),t.next=4,new Promise(function(t){$.ajax({url:m.list,type:"GET",data:{event_code:window.enPageUrl,build_type:0},xhrFields:{withCredentials:!0},success:function(e){t(e)},error:function(){t(-1)}})});case 4:o=t.sent,a=s(o),v.each(function(t,o){var r=$(o),s=r.data("stat-aid"),c=+(r.data("receive-time")+"000");(new Date).getTime()>c||(r.addClass("J_noticeBtn").removeClass("notification-remind-disabled"),a.includes(s)?r.text(n).addClass("notification-remind-cancel"):r.text(e).addClass("notification"),i.aid===s&&r.hasClass("notification")&&r.trigger("click"))});case 7:case"end":return t.stop()}},t,this)})),function(t,e){return o.apply(this,arguments)}),d=(a=(0,s.default)(r.default.mark(function t(e,n){return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:$("#J_main").on("click",".J_noticeBtn",function(){var t=(0,s.default)(r.default.mark(function t(i){var o,a,s,c,d,u,f,p;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i.preventDefault(),o=$(this),a=2,s=o.data("block-id"),c=o.data("stat-aid"),d=o.hasClass("notification"),u=d?m.follow:m.unfollow,f=window.location.href.includes("?")?window.location.href+"&aid="+c+"&type="+a:window.location.href+"?aid="+c+"&type="+a,(0,l.gIsLoginMi)()){t.next=11;break}return(0,l.gLogin)(f),t.abrupt("return");case 11:return t.next=13,g(a,"",u,s);case 13:10004===(p=t.sent)?(0,l.gLogin)(f):0===p?d?(o.text(n).removeClass("notification").addClass("notification-remind-cancel"),w()):o.text(e).removeClass("notification-remind-cancel").addClass("notification"):b(h.errorTxt,!1);case 15:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}());case 1:cat,e){return a.apply(this,arguments)}),l=n(4),u=n(25);function f(t){return t&&t.__esModule?t:{default:t}}var h=window.subscriptionTxt;function p(t){return window.location.href.includes("event.t.n.mi.com")?"//hd-c.test.mi.com/"+window.GLOBAL_CONFIG.appLocal.name+t:""+window.GLOBAL_CONFIG.apiUrl+t}var m={follow:p("/eventapi/api/warmup/follow"),unfollow:p("/eventapi/api/warmup/unfollow"),list:p("/eventapi/api/warmup/list")},v=$(".notification-remind");function g(t,e,n,i){return new Promise(function(o){$.ajax({url:n,type:"POST",data:{event_code:window.enPageUrl,follow_type:t,block_code:i,aid:e,build_type:0},xhrFields:{withCredentials:!0},success:function(t){o(t.code)},error:function(){o(-1)}})})}function _(t){var e=t.match(/([^?=&]+)(=([^&]*))/g),n={};return e&&e.forEach(function(t){n[t.slice(0,t.indexOf("="))]=t.slice(t.indexOf("=")+1)}),n}function b(t,e){e?(0,u.winTips)({title:t}):alert(t)}function w(){var t=3e3,e='<div id="J_subToast" class="sub-toast"><div class="sub-title">'+h.toastTxt+"</div></div>",n=$("#J_subToast");n.length>0?n.show():($("body").append(e),n=$("#J_subTomeout(function(){n.css({opacity:0})},t),n.on("transitionend",function(){"0"===n.css("opacity")&&n(){"0"===n.css("opacity")&&n.hide()})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setDiscountLikeProcess=function(){$(".like-process").each(function(){var t=$(this),e=t.find(".step-prices").children("li");if(e.css({opacity:1}),!(e.length<3)){var n=t.find(".bar-dots").children("li"),i=t.data("price-segments"),o=+i[i.length-1].peopleNum;i.forEach(function(t,a){if(0!==a&&a!==i.length-1){var r=$(n[a]),s=$(e[a]),c=(100*(1-+t.peopleNum/o)).toFixed(2)+"%";r.css({right:c}),s.css({right:c})}})}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.signDayInit=void 0;var i=d(n(158)),o=d(n(179)),a=n(50),r=n(33),s=n(51),c=n(87);function d(t){return t&&t.__esModule?t:{default:t}}function l(t){var e=(0,r.getUrlPath)(),n=function(){var t={};return Array.from(document.querySelectorAll(".J_signinCon .J_signinBlock")).forEach(function(e,n){var o=new i.default(e,n);t[o.index]=o}),t}(),d=new o.default(t);(0,a.ajaxData)("info",{tag:e}).then(function(t){if(821011!==t.code){if(0===t.code){var e=t.data||{},i=e.activity_list,o=e.bonus,a=e.show_modal,r=e.is_login;Object.keys(n).forEach(function(t){var a=n[t],l=i[t];if(a.isLogin=e.is_login,e.is_end){var u=l.got?1:3;return a.setStatus(u),a.setProStatus(0),(0,s.initBigPrizeStatus)(o,e.is_end),void(0,s.setClickLink)(r)}!function(t){var e=t.product,n=t.state,i=t.arrow,o=t.id;if(2===n.day_type)return e.setProStatus(1),$(".signin__content li").eq(o).addClass("signin_current"),(0,s.setPrizeModalProImg)(),i.setScroll(o),void c.signInBury.exposeModule();e.setProStatus(n.day_type-1)}({product:a,state:l,arrow:d,id:t}),function(t){var e=t.product,n=t.state,i=n.got,o=n.empty,a=n.day_type;if(i)return void e.setStatus(1);if(o)return void e.setStatus(3);if(1===a)return void e.setStatus(2);e.setStatus(0)}({product:a,state:l})}),(0,s.initBigPrizeStatus)(o),(0,s.showPrizeModal)(a),(0,s.setClickLch(function(t){n[=function(t){l(t),(0,s.bindEvent)()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=l(n(0)),o=l(n(1)),a=l(n(3)),r=n(50),s=n(4),c=n(33),d=n(51);function l(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,n){(0,o.default)(this,t),this.element=e,this.index=n,this.data=document.querySelector(".J_signinCon").dataset||{},this.$btn=$(".J_signBtn").eq(this.index),this.isLogin=!1,this.status=0,this.setStatus=this.setStatus.bind(this),this.setProStatus=this.setProStatus.bind(this),this.$btn.on("click",this.handleClickBtn.bind(this))}return(0,a.default)(t,[{key:"setProStatus",value:function(t){this.getProductStyle(t),2!==t&&$(this.element).removeClass("active__block-hide")}},{key:"setProductStyle",value:function(t){$(this.element).css("background-image","url("+t.img+")"),$(".J_signinBlock .J_signTimeTxt").eq(this.index).css("color",t.color)}},{key:"getProductStyle",value:function(t){var e=[{img:this.data.pastBg,color:this.data.pastColor},{img:this.data.nowBg,color:this.data.nowColor},{img:this.data.futBg,color:this.data.futColor}];return this.setProductStyle(e[t])}},{key:"handleClickBtn",value:function(){var t=this;if((0,c.bury)("sign_click_btn"),"app"===GLOBAL_CONFIG.clientType&&!(0,s.gIsLoginMi)())return(0,s.gLogin)(),void this.track();if("app"!==GLOBAL_CONFIG.clientType&&!this.isLogin)return(0,s.gLogin)(),void this.track();var e=this.status,n=this.element.dataset.time;0!==e?(2===e&&(0,d.showShareModal)(n,this.setStatus,$(this.element).data("otInfounction(e){t.setStatus(e),t.track()})}},{key:"track",value:function(){try{var t=this.status||0,e=$(this.element).data("otInfo");window.eventXmot("click",(0,i.default)({},e,{elementName:["unsign","signed","resign","finished"][t]}))}catch(t){consoBtnStyle(t),this.getReceiveStyle(t)}},{key:"setBtnStyle",value:function(t){this.$btn.css("color",t.color),this.$btn.html(t.text)}},{key:"getBtnStyle",value:function(t){var e=JSON.parse(this.data.btnStatus),n=[e.notGot,e.got,e.reissue,e.share];return this.setBtnStyle(n[t])}},{key:"setReceiveStyle",value:function(t){var e=$(".J_signStar").eq(this.index);this.$btn.css("background-image","url("+t.btn+")"),e.css("background-image","url("+t.star+")")}},{key:"getReceiveStyle",value:function(t){var e=this.data,n=[{star:e.starNot,btn:e.btnNot},{star:e.starGot,btn:e.btnGot}],i=1===t?1:0;return this.setReceiveStyle(n[i])}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Mbury=function(t){if(!window.GLOBAL_CONFIG)return;var e=window.GLOBAL_CONFIG.apiUrl+"/eventapi/api/stat",n={event_code:t.eventTag,action_code:t.buryName,param:{name:t.buryAction||""}};(0,a.default)({method:"post",url:e,headers:{"content-type":"application/json"},withCredentials:).catch(function(t){console.warn(t)})};var i,o=n(160),unction(e){return t.apply(null,e)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a(n(1)),o=a(n(3));function a(t){return t&&t.__esModule?t:{default:t}}var r=2.5,s=5,c=function(){function t(e){(0,i.default)(this,t),this.platform=e,this.distance=0,this.inline="pc"===this.platform?s:r,this.proWidth=$(".J_signinCon .J_signinBlock").width(),this.timer=null,this.total=document.querySelector(".J_signinCon").dataset.totalDay,this.init(),this.setScroll=this.setScroll.bind(this),$(".arrow-lt").on("click",this.handleClickArrow.bind(this,-1)),$(".arrow-rt").on("click",this.handleClickArrow.bind(this,1))}return(0,o.default)(t,[{key:"init",value:function(){this.computedDistance()}},{key:"computedDistance",value:function(){var t=this.proWidth*(this.total-this.inline),e=!1,n=!1;this.distance<=0&&(this.distance=0,e=!0),this.hideEl(".arrow-lt",e),this.distance>=t&&(this.distance=t,n=!0),this.hideEl(".arrow-rt",n)}},{key:"hideEl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];$(t).css("display",e?"none":"block")}},{key:"setScroll",value:function(t){this.distance=this.proWidth*(t-1),"pc"===this.platform?this.total<=s||(this.computedDistance(),this.aniScroll(this.distance)):this.mAniScorlll(this.distance)}},{key:"handleClickArrow",value:function(t){var e=this.proWidth,n=-1===t?-e:e;this.aniScroll(this.distance+n),this.distance+=n,this.computedDistance()}},{key:"mAniScorlll",value:function(t){var e=Math.ceil($(".J_signinBlock").eq(0).offset().left);$(".J_signinCon").scrollLeft(t+e)}},{key:"aniScroll",value:function(t){$(".J_signinCon").css("transform","translateX("+-t+"px)")}}]),t}();e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initBid=e.Bid=void 0;var i=l(n(1)),o=l(n(3)),a=n(181),r=n(182),s=n(183),c=l(n(35)),d=n(88);function l(t){return t&&t.__esModule?t:{default:t}}var u=e.Bid=function(){function t(){(0,i.default)(this,t),this.tag=$(".bid").data("tag"),this.type=window.GLOBAL_CONFIG.clientType,this.timer=0,this.tipTimer=0,this.allAjax=null,this.loopTime=12,this.singleScrollTime=.6,this.isLogin=!1,this.nation=window.GLOBAL_CONFIG.appLocal.name,this.rounds=[],this.currency="",this.apis={gameinfo:"/bid/gameinfo2?tag="+this.tag,updateprice:"/bid/updateprice",bidinfo:"/bid/bidinfo"},this.urls={gameinfo:"",updateprice:"",bidinfo:""},this.defaultBase="//sgp-api.buy.mi.com/",this.baseUrls={in:"//in-api.buy.mi.com/",ru:"//ru-api.buy.mi.com/"},this.setTabActive=this.setTabActive.bind(this),this.setTabStatus=this.setTabStatus.bind(this),this.initPageWithData=this.initPageWithData.bind(this),this.renderBidList=this.renderBidList.bind(this),this.updatePrice=this.updatePrice.bind(this),this.initUrl(),this.initPage(),(0,r.handleClickPutAway)()}return(0,o.default)(t,[{key:"initUrl",value:function(){var t=this.nation,e=this.baseUrls,n=this.defaultBase,i=this.apis,o=window.location.href;o.includes("event.t.n.mi.com")||o.includes("event.test.mi.com")?n="id"==t?"//api.test.mi.co.id/":"//api.test.mi.com/":n=(window.GLOBAL_CONFIG.apiSite?window.GLOBAL_CONFIG.apiSite.replace(new RegExp("(.*)"+t),"$1"):"")||(e[t]?e[t]:n);this.urls={gameinfo:n+t+i.gameinfo,updateprice:n+t+i.updateprice,bidinfo:n+t+i.bidinfo}}},{key:"initPage",value:function(){(0,a.setTabAndRound)(0);this.type;this.setTabActive(),(0,a.bindEvent)(),(0,a.clickUpdate)(this,this.updatePrice),this.getInfo()}},{key:"setTabActive",value:function(){var t=this;$(".tab").each(function(e,n){$(n).find(".top").html((0,a.setTimeRange)(n)),$(n).on("click",function(){if(!$(n).hasClass("active")){$(".list1, .list2").html(""),$(".winner .list").html("");var i=$(n).data("roundid");t.renderBidList(i),(0,a.setTabAndRound)(e)}})})}},{key:"getInfo",value:function(){var t=this,e=t.urls.gameinfo;$.ajax({url:e,type:"get",dataType:"jsonp",success:function(e){if(0===e.code){t.isLogin=e.data.isLogin,(0,a.bindShare)(t.isLogin),$(".modal_bid .bid-separator").html(e.data.decimalpoint),$(".bid_number_currency").html(e.data.currency),$(".J_bid .container").data("hasWined",e.data.hasWined);var n=e.data.roundIndex,i="pc"===t.type?3:2;$(".tab").length>i&&new s.Arrow({activeIndex:n}),(0,a.setTabAndRound)(n),t.rounds=e.data.rounds,t.initPageWithData(),1!==e.data.status&&t.renderBidList(e.data.roundid)}}})}},{key:"initPageWithData",value:function(){for(var t=this.rounds,e=0;e<t.length;e++){var n=t[e];this.setTabStatus(e,n.status,n.endTime);for(var i=n.product,o=0;o<i.length;o++){var r=i[o],s=$(".round").eq(e).find(".goodsItem").eq(o);(0,a.setPrice)(s,r.selfPrice,r.isWinner),(0,a.setBtn)(this.isLogin,s,n.status,r)}}}},{key:"setTabStatus",value:function(t,e,n){var i=$(".tab").eq(t);if(i.find(".status").text(""+window.TRANSLATE.bidInfo.status[e]),2===e){var o=n;new c.default({endTime:o,tick:function(t,e){parseInt(e/86400).toString().padStart(2,"0");var n=parseInt(e/3600%24).toString().padStart(2,"0"),o=parseInt(e/60%60).toString().padStart(2,"0"),a=parseInt(e%60).toString().padStart(2,"0");i.find(".count").text(n+":"+o+":"+a)},timeup:function(){i.find(".status").text(""+window.TRANSLATE.bidInfo.status[3]),i.find(".count").remove();var e=$(".round").eq(t).find(".goodsItem");(0,a.setBtn)(!0,e,3,{})}})}}},{key:"renderBidList",value:function(t){var e=this,n=e.urls.bidinfo,i="",o="";e.timer&&clearTimeout(e.timer),e.allAjax&&e.allAjax.abort(),e.allAjax=$.ajax({url:n,type:"get",dataType:"jsonp",data:{tag:e.tag,roundId:t},success:function(n){var r=n.data;if(1009===n.code)return $(".bidList").removeClass("active"),$(".bidWarning").addClass("active"),void $(".winner").removeClass("active");if(0===r.status||1===r.status)$(".bidList").removeClass("active"),$(".bidWarning").removeClass("active"),$(".winner").removeClass("active");else if(2===r.status||3===r.status){if($(".bidList").addClass("active"),$(".bidWarning").removeClass("active"),$(".winner").removeClass("active"),r.bids){for(var s=0;s<r.bids.length;s++)i+='\n                            <li class="item">'+window.TRANSLATE.bidInfo.miid+" "+r.bids[s].userid+'  <span class="white">'+window.TRANSLATE.bidInfo.bid+"</span> "+r.bids[s].price+' <span class="white">'+window.TRANSLATE.bidInfo.for+"</span> "+r.bids[s].name+"</li>\n                            ";$(".list1, .list2").html(i),"pc"===e.type&&r.bids.length>5||"mobile"===e.type&&r.bids.length>4?$(".list1, .list2").css({animation:"move "+e.singleScrollTime*r.bids.length+"s linear infinite"}):$(".list1, .list2").css("animation","none")}else $(".bidList").removeClassmeout(function(){e.renderBidList(t)},1e3*e.loopTime)}else{if($(".bidList").removeClass("active"),$(".bidWarning").removeClass("active"),$(".winner").addClass("active"),r.bids.length){for(var c=0;c<r.bids.length;c++)o+='\n                                <div class="item">'+window.TRANSLATE.bidInfo.miid+" "+r.bids[c].userid+'  <span class="white">'+window.TRANSLATE.bidInfo.win+"</span> "+r.bids[c].name+'<span class="white"> '+window.TRANSLATE.bidInfo.for+"</span> "+r.bids[c].price+"</div>\n                                ";$(".winner .list").html(o)}else $(".winner").removeClass("active");if(r.isLogin){var d=$(".round.active").fifunction(t){l[t.goodsid]=t.isWinner}),d.each(function(t,e){var n=$(e).data("goodsid"),i=l[n];(0,a.setBidStatus)($(e),i),1===i&&($(".J_bid .container").data("hasWined",!0),(0,a.setPrice)($(e),null,1),(0,a.setBtn)(!0,$(e),4,{isWin:1}))})}}}})}},{key:"updatePrice",value:function(t,e){if(!$(".modal_bid .bid_btn").hasClass("disabled")){var n=$(".modal_bid").data("roundsid"),i=$(".modal_bid").data("goodsid");$(".modal_bid .bid_btn").addClass("disabled"),$.ajax({url:this.urls.updateprice,type:"get",dataType:"jsonp",data:{tag:this.tag,prizeid:i,price:t,roundId:n},success:function(t){if(0===t.code){var n=t.data,o=n.leftUpdateTimes,r=n.selfPrice,s=$(".bid-separator").html(),c=r.replace(s,".");d.bidBury.confirmBidBtn({otInfo:e,goodsAmount:c}),$(".round.active").find(".goodsItem").each(function(t,e){var n=$(e).data("goodsid");Number(n)===Number(i)&&((0,a.setPrice)($(e),r,null),(0,a.setBtn)(!0,$(e),2,{leftUpdateTimes:o}))}),$(".mask").removeClass("active"),$(".modal_block").removeClass("active"),$(".modal_bid .bid_btn").removeClass("disabled"),$(".modal_bid .bid_tip").removeClass("active"),$("inp}]),t}();e.initBid=function(){new u}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clickUpdate=e.bindShare=e.showShareModal=e.setBidStatus=e.setTimeRange=e.setBtn=e.setPrice=e.setTabAndRound=e.bindEvent=void 0;var i=n(86),o=n(4),a=n(88);function r(t,e){var n=$(".J_bid .container").data("winnerimg"),i=$(".J_bid .container").data("failureimg"),o=$(".J_bid .container").data("passimg");-1===e&&t.find(".status").css({backgroundImage:"url('"+o+"')"}),0===e&&t.find(".status").css({backgroundImage:"url('"+i+"')"}),1===e&&t.find(".status").css({backgroundImage:"url('"+n+"')"})}function s(t){c("share");var e={};e.title=$(".share_icons").data("title"),e.desc=$(".share_icons").data("desc"),e.img=$(".share_icons").data("image"),$(".share_icons").off("click").on("click",function(n){var o=n.target.className,r="";switch(!0){case-1!==o.indexOf("fb"):r="fb";break;case-1!==o.indexOf("tw"):r="tw";break;case-1!==o.indexOf("line"):r="line";break;case-1!==o.indexOf("vk"):r="vk"}e.type=r,e.link=window.location.href,a.bidBury.share({otInfo:t,key:r}),(0,i.Mshare)(e)})}function c(t,e,n){if($(".mask").addClass("active"),$(".modal_block").removeClass("active"),$(".modal_"+t).addClass("active"),"bid"===t){var i=e.find(".bid_btn").data("maxprice"),o=e.find(".bid_btn").data("lefttimes"),a=e.data("goodsid"),r=$(".tab.active").data("roundid");$(".modal_bid").data("maxprice",i),$(".modal_bid").data("roundsid",r),$(".modal_bid").data("goodsid",a),$(".bid_leftTimes .times").html(o);var s="pc"===window.GLOBAL_CONFIG.clientType;$(".modal_bid .bid_btn").data("otInfo",s?n:JSON.stringify(n))}}e.bindEvent=function(){$("n("click",function(){(0,o.gLogin)()}),$(".bid-cell").on("input",function(t){var e=new RegExp(/[^0-9]/g);if(t.target.value=t.target.value.replace(e,""),""!==t.target.value){var n=$(this).parent().next();"input_back"!==n.attr("class")&&(n=n.next()),n.find("input")[0]&&n.find("input")[0].focus()}}),function(){window.GLOBAL_CONFIG.clientType;dow.GLOBAL_CONFIG.orderSite+"/cart"})}(),"pc"===window.GLOBAL_CONFIG.clientType?$(eClass("active"),$("input").val("")}):$(".mask").on("click",function(t){"mask active"===t.target.className&&($(".mask").removeClass("active"),$(".modal_block").removeClass("active"),$("input").val(""))})},e.setTabAndRound=function(t){var e=$(".tab_list_container").data("themecolor");$(".tab").eq(t).addClass("active").css({background:e}).siblings().removeClass("active").css({background:"rgba(0,0,0,.6)",color:e}),$(".round").eq(t).addClass("active").siblings().removeClass("active")},e.setPrice=function(t,e,n){var i=t.find(".bid_price"),o=t.find(".bid_btn"),a=$(".right").data("wincolor");if(e){i.addClass("active"),i.find(".bid_number .bid_num_price").html(e);var r=$(".bid-separator").html();o.data("goodsAmount",e.replace(r,"."))}1===n&&(i.find(".bid_text").html(window.TRANSLATE.bidInfo.winText).css({color:a}),i.find(".bid_number").css({color:a}))},e.setBtn=function(t,e,n,i){var o=e.find(".bid_btn"),s=$(".right").data("wincolor"),d=i.leftUpdateTimes,l=i.isWin,u=i.maxPrice;if(o.data("lefttimes",d||0),u&&o.data("maxprice",u),e.find(".btn_text").html(window.TRANSLATE.bidInfo.btnStatus[""+n]),1===n&&e.find(".bid_btn").hasClass("disabled"))return;if(2===n&&Number(o.data("lefttimes")))o.removeClass("disabled").off("click").on("click",function(){var n=$(".J_bid .container").data("haswined");if(t)if(n)c("warnBid");else{var i=o.data("otInfo");c("bid",e,i),a.bidBury.clickableBidBtn(i)}else c("login")});else if(2!==n||Number(o.data("lefttimes")))if(3!==n){if(4===n&&(r(e,l),1===l)){e.find(".btn_text").html(window.TRANSLATE.bidInfo.goToCart),o.removeClass("disabled").addClass("win"),o.css({background:s});var f=window.GLOBAL_CONFIG.clientType,h=window.GLOBAL_CONFIG.orderSite+"/cart";o.off("click").on("click",function(){var t=o.data("otInfo"),e=Number(o.data("goodsAmount"));a.bidBury.addCartEndBid({otInfo:t,goodsAmount:e}),window.location.href=h}),"pc"===f?(e.find(".share").css({backgroundColor:s}),o.find(".icon").css({backgroundImage:"url('//i01.appmifile.com/webfile/globalimg/events/operator_bid/cart.png')"})):e.find(".share").css({color:s})}}else o.addClass("disabled").off("click");else o.removeClasson("click",function(){c("noChance")})},e.setTimeRange=function(t){var e=new Date(1e3*$(t).data("starttime")),n=new Date(1e3*$(t).data("endtime")),i=window.TRANSLATE.bidInfo.month[e.getMonth()],o=e.getDate(),a=e.getHours(),r=a>9?a:"0"+a,s=e.getMinutes(),c=s>9?s:"0"+s,d=n.getHours(),l=d>9?d:"0"+d,u=n.getMinutes();return i+" "+o+" "+r+":"+c+"-"+l+":"+(u>9?u:"0"+u)},e.setBidStatus=r,e.showShareModal=s,e.bindShare=function(t){$(".right .share").on("click",function(){t?s($(this).data("otInfo")):c("login")})},e.clickUpdate=function(t,e){$(".modal_bid .bid_btn").on("click",function(){var n="",i="";$(".bid-cell-front").each(function(t){n+=$(".bid-cell-front")[t].value}),$(".bid-cell-behind").each(function(t){i+=$(".bid-cell-behind")[t].value});var o,a,r=$(".bid-separator").html(),s=(o=parseInt(n)?parseInt(n):0)+r+i;a=parseFloat(o+"."+(i||0));var c=$(".modal_bid").data("maxprice"),d=(n+i).length===$(".bid-cell").length;if(a>c||0===a||!d)$(".modal_bid .bid_tip").addClass("active"),t.tipTimer&&clearTimeoid .bid_tip").removeClass("active")},1e3);else{var l=$(".modal_bid .bid_btn").data("otInfo");e(s,l)}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.handleClickPutAway=function(){$(".bid .bid-header-title-switch").on("click",function(t){"SPAN"===t.target.tagName&&$(".bid .bid-header-content").toggleClass("bid-header-content-hide")})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Arrow=void 0;var i=a(n(1)),o=a(n(3));function a(t){return t&&t.__esModule?t:{default:t}}var r=3;e.Arrow=function(){function t(e){(0,i.default)(this,t);var n=e.activeIndex;this.type=window.GLOBAL_CONFIG.clientType,this.activeIndex=n,this.distance=0,this.length=$(".tab_more").length,this.moveCellWidth=-("pc"===this.type?$(".tab_list_move").width():$(".tab_list_container").width())/$(".tab_more").length,this.maxPCDistance=($(".tab_more").length-r)*this.moveCellWidth,this.init(),$(".arrow_left").off("click").on("click",this.handleMove.bind(this,-1)),$(".arrow_right").off("click").on("click",this.handleMove.bind(this,1))}return(0,o.default)(t,[{key:"init",value:function(){if("pc"===this.type)this.activeIndex<2?this.distance=0:this.activeIndex>this.length-3?this.distance=this.moveCellWidth*(this.length-3):this.distance=this.moveCellWidth*(this.activeIndex-1),this.setArrowStatus(this.distance),$(".tab_list_move").css("transform","translateX("+this.distance+"px)");else{var t=0;this.activeIndex===$(".tab_more").length-1?t=-this.activeIndex*this.moveCellWidth:this.activeIndex>0&&(t=-(this.activeIndex-.64)*this.moveCellWidth),$(".nav_top").scrollLeft(t)}}},{key:"handleMove",value:function(t,e){if($(e.currentTarget).hasClass("active")){var n=this.distance+t*this.moveCellWidth;this.setArrowStatus(n),n>0||n<this.maxPCDistance||(this.distance=n,$(".tab_list_move").css("transform","translateX("+this.distance+"px)"))}}},{key:"setArrowStatus",value:function(t){t>=0?($(".arrow_left").removeClass("active"),$(".arrow_right").addClass("active")):t<=this.maxPCDistance?($(".arrow_left").addClass("active"),$(".arrow_right").removeClass("active")):($(".arrow_left").addClass("active"),$(".arrow_right").addClass("active"))}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NoLeftModal=e.ChooseModal=void 0;var i=l(n(26)),o=l(n(0)),a=l(n(1)),r=l(neturn t&&t.__esModule?t:{default:t}}e.ChooseModal=function(){function t(e){(0,a.default)(this,t),this.Caller=e,this.isPc=this.Caller.isPc,this.container=$("#J_Bundle_Modal"),this.tpl=window.doT.template($("#J_Bundle_Modal_template").html()),this.scrollAble=!0,this._addEventListener()}return(0,r.defauls._handleContainerClick.bind(this))}"===t.target.id&&this._closeModal()value:function(){this._closeModal()}},{key:"_handleListClick",value:function(t){if("LI"===t.target.tagName){var e=$(t.target);if(!e.hasClass("bundle-modal-select-list-item-active")){var n=e.data("goodsid");this.selectedGoods=n,e.addClass("bundle-modal-select-list-item-active"),this.$preSelectedListItem.removeClass("bundle-modal-select-list-item-active"),this.$preSelectedListItem=e,this._setCurGoodsInfo(this.curGoodsInfo.skus[n]),this._updateSelectBtn(n),$(".bundle-modal-container").find("span[data-lastest-lowest]").attr("data-lastest-lowest",n),setTimeout(function(){(0,d.setDomLatestLowestPrice)(window.GLOBAL_CONFIG,$(".bundle-modal-container").find("span[data-lastest-lowest]"),"data-lastest-lowest")},0)}}}},{key:"_setCurGoodsInfo",value:function(t){var e=this.isPc?280:330;this.productImage.attr("src",(0,d.getCompressedImageUrl)(t.image,e,e));var n=window.__SCRIBING_PRICE_COMPLIANCE_NATIONS__||["fr","de","nl","pl","it"],i=window.GLOBAL_CONFIG.appLocal.name,o=n.includes(i);this.productTitle.text(t.goods_name),this.productPrice.current.text(t.current_price),this.productPrice.original.text((o?c.TRANSLATE_TEXT.rrp:"")+t.goods_price)}},{key:"_updateSelectBtn",value:function(t){if(!this.hasNoDisabledSku){var e=this.curGoodsInfo.skus[t];0===e.stock||0===e.quota?(this.selectBtn.addClass("bundle-modal-footer-btn-disabled"),0===e.quota&&this.selectBtn.text(c.TRANSLATE_TEXT.noquota),0===e.stock&&this.selectBtn.text(c.TRANSLATE_TEXT.nostock)):this.selectBtn.removeClass("bundle-modal-footer-btn-disabled").text(c.TRANSLATE_TEXT.select)}}},{key:"handleSelectClick",value:function(t){$(t.target).hasClass("bundle-modal-footer-btn-disabled")||(this.Caller._handleSelected({type:"multiple",spu:this.curGoodsInfo.spu,id:this.selectedGoods,curSku:this.curGoodsInfo.skus[this.selectedGoods]}),this._closeModal())}},{key:"_closeModal",value:function(){this.container.hide().children().remove(),this._toggleScroll()}},{key:"_toggleScroll",value:function(){this.scrollAble?$(document.body).css("overflow","hidden").css("height","100%"):$(document.body).css("overflow","visible").css("height","auto"),this.scrollAble=!this.scrollAble}},{key:"render",value:function(t){var e=this;this.curGoodsInfo={spu:t.spu,skus:t.skus.reduce(function(t,e){return(0,o.default)({},t,(0,i.default)({},e.goods_id,e))},{})};var n,a,r=(n=[],a=[],t.skus.forEach(function(t){0===t.stock||0===t.quota?a.push(t):n.push(t)}),{filteredSkus:[].concat(n,a),hasNoDisabledSku:0===a.length}),s=r.filteredSkus,c=r.hasNoDisabledSku;this.hasNoDisabledSku=c,this.container.html(this.tpl(s)).show(),this.selectedGoods=s[0].goods_id,this.$preSelectedListItem=this.selectList.children("li").eq(0),this._toggleScroll(),setTimeout(function(){e.container.children(".bundle-modal-container").css("transform","translateY(0)").css("opacity"(e,n){t.push($(n).attr("data-gid"))}),t=t.join(",").split(","),(0,d.getEnergyLabel)(Array.from(new Set(t))),(0,d.setDomLatestLowestPrice)(window.GLOBAL_CONFIG,$(".bundle-modal-container").find("span[data-lastest-lowest]"),"data-lastest-lowest")},0),this.closeBtn.on("click",this._handleCloseBtnClick.bind(this)),this.selectList.on("click",this._handleListClick.bind(this)),this.selectBtn.on("click",this.handleSelectClick.bind(this))}},{key:"closeBtn",get:function(){return this.container.find("#J_Bundle_Modal_Btn_Close")}},{key:"selectBtn",get:function(){return this.container.find("#J_Bundle_Modal_Btn_Yes")}},{key:"productTitle",get:function(){return this.container.find("#J_Bundle_Modal_Title")}},{key:"productPrice",get:function(){var t=this.container.find(".bundle-modal-select-price");return{current:t.children("span"),original:t.childrfind(".bundle-modal-product-image")}},{key:"selectList",get:function(){return this.container.find(".bundle-modal-select-list")}}],[{key:"getInstance",value:function(e){return this._instance||(this._instance=new t(e)),this.Caller=e,this._instance}}]),t}(),e.NoLeftModal=function(){function t(){(0,a.default)(this,t),this.bodyElem='\n    <ul class="bundle-noleft-list">\n      {{~it.skus :sku}}\n        <li class="bundle-noleft-list-item">\n          <img src="{{=sku.image}}?thumb=1&w=200&h=200&width=200&height=200" class="bundle-noleft-list-item-image" />\n          <p class="bundle-noleft-list-item-name">{{=sku.goods_name}}</p>\n        </li>\n      {{~}}\n    </ul>',this.footerElem='\n    <div class="bundle-noleft-footer">\n      <span class="bundle-noleft-footer-btn">'+c.TRANSLATE_TEXT.ok+"</span>\n    </div>\n    "}return(0,r.default)(t,[{key:"render",value:function(t,e){(0,s.showTips)({msg:c.TRANSLATE_TEXT.noleft_text,bodyElem:this.bodyElem,footerElem:t?this.footerElem:"",skus:e.goodsinfo,afterShow:function(e){t?e.css("padding-top","70px").css("padding-bottom","70px"):e.find(".common-tips-msg").css("font-size","3.61vw").css("text-align","center")}}),e.goodsinfo.length>2&&t&&this.$list.css("justify-content","flex-start"),this.$okBtn.on("click",function(){$("#J_Common_Tips_Btn_Close").triggenction(){return $("#J_Common_Tips")}},{key:"$list",get:function(){return this.$container.find(".bundle-noleft-list")}},{key:"$okBtn",get:function(){return this.$container.find(".bundle-noleft-footer-btn")}}],[{key:"getInstance",value:function(){return this._instance||(this._instance=new t),this._instance}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFormatedDate=function(t){var e=new Date(t),n=e.getMonth(),o=e.getDate(),a=e.getHours(),r=e.getMinutes(),s=i.TRANSLATE_TEXT.month[n],c=(u=i.TRANSLATE_TEXT.nth.th,f=o%10,1!==Math.floor(o/10)&&[1,2,3].includes(f)&&(u=i.TRANSLATE_TEXT.nth[f]),""+(""+o).padStart(2,"0")+u),d=(""+a).padStart(2,"0"),l=(""+r).padStart(2,"0");var u,f;return{date:c+" "+s,time:d+":"+l,datetime:d+":"+l+" "+c+" "+s}},e.getIsInSameDay=function(t){var e=new Date(t).getDate(),n=(new Date).getDate();return e===n};var i=n(53)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.ToolTip={_preposition:function(){if("mobile"===window.GLOBAL_CONFIG.clientType)throw new Error("ToolTip is only supported on PC!")},set:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this._preposition(),t.attr("tooltip",e),n&&t.attr("position",n)},remove:function(t){this._preposition(),t.removeAttr("tooltip").removeAttr("position")}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Track=void 0;var i,o=n(0),a=(i=o)&&i.__esModule?i:{default:i};e.Track={_send:function(t,e){var n=(0,a.default)({},t,{tip:(0,a.default)({},t.tip,{c:this.c1,e:e}),subModulePos:this.subModulePos,subModuleTitle:"bundle",elementTitle:"bundle"});return window.eventXmot("click",n)},c1:void 0,subModulePos:void 0,CartClick:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i="9011";this._send({tip:{d:1},extra:{goodsCount:t},isOpenGA:!1},i),n.forEach(function(t){var n=t.id,o=t.spu,a=(t.$btn.data("track-info")||{}).itemName||"";window.xmot("ecommerce",{event:"add_to_cart",ecommerce:{tip:{c:e.c1,d:1,e:i},spuId:o,elementTitle:"bundle",items:[{itemName:a,itemId:n,itemListName:"bundle",itemListId:e.c1}]}})})},SessionClick:function(t){this._send(t,"9010")},SelectClick:function(t){this._send((0,a.default)({},t,{isOpenGA:!1}),"9009"),window.xmot("ecommerce",{event:"select_item",ecommerce:(0,a.default)({},t,{tip:(0,a.default)({},t.tip,{e:"9009"}),elementTitle:"bundle",items:[{itemName:t.goodsId,itemId:t.goodsId,itemListName:"bundle",itemListId:this.c1}]})})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GroupBuying=void 0;var i=g(n(0)),o=g(n(17)),a=g(n(18)),r=g(n(1)),s=g(n(3));e.initGroupBuying=fing").each(function(e,n){new b(t,n)})};var c=n(56),d=n(4),l=(n(34),n(15)),u=n(55),f=n(189),h=n(190),p=n(191),m=n(192),v=n(54);function g(t){return t&&t.__esModule?t:{default:t}}var _={sold_out:!0,no_left:!0,disabled:!0},b=e.GroupBuying=function(){function t(e,n){(0,r.default)(this,t),this.isPc="pc"===e,this.containerElem=$(n),this.containerID=this.containerElem.data("id"),f.Track.c1=+this.containerElem.data("track-c1"),f.Track.subModulePos=""+(+this.containerElem.data("index")+1),this.init()}var e,n;return(0,s.default)(t,[{key:"init",value:(n=(0,a.default)(o.default.mark(function t(){var e,n,i,a=this;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$section=this.containerElem.find(".group-buying-section"),t.next=3,this.initSection();case 3:if(e=t.sent,n=e.needContinue,i=e.needRequest,n){t.next=8;break}return t.abrupt("return");case 8:this.initPageInfo(),i&&this.getActivityInfo().then(function(t){var e=t.activity,n=t.goods,i=t.group;if(e.status)return a.containerElem.remove();a.latestStockInfos=(0,c.getLatestStockInfos)(n),a.latestGroupList=(0,c.getLatestGroupList)(i,a.staticGoodsInfo,+a.$section.data("min-group-num")),a.updateProductInfo(),a.$section.on("click",a.sectionEventDispatcher.bind(a))}),(0,h.handleGuideSwitchClick)(this.containerElem),this.staticGoodsInfo=(0,c.getStaticGoodsInfo)(this.containerElem.data("index"));case 12:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})},{key:"updateProductInfo",value:function(){var t=this,e=this.latestStockInfos.SPU,n=[],i=[];this.$section.children().each(function(o,a){var r=$(a),s=r.find(".group-buying-item-btn"),d=r.data("spu"),l=e[d]||_;!function(t,e,o){if(e.sold_out||e.no_left||e.disabled)t.remove(),e.sold_out?i.push(o):(e.no_left||e.disabled)&&n.push(o)}(r,l,a),function(t,e){e.sold_out||e.no_left||e.disabled?(t.attr("disabled","disabled"),(e.no_left||e.disabled)&&t.text(c.TRANSLATE_TEXT.noleft),e.sold_out&&t.text(c.TRANSLATE_TEXT.nostock)):t.text(c.TRANSLATE_TEXT.setgroup).removeClass("group-buying-item-btn-disabled")}(s,l),function(t,e){e&&m.SwiperGenerator.use(t,e).create()}(r,t.latestGroupList.SPU[d])}),this.$section.append([].concat(n,i))}},{key:"initPageInfo",value:function(){var t,e,n,i,o,a=this;!function(){if(window.location.hash.slice(1)===a.containerID){var t=a.containerElem.offset().top;a.isPc?$("html, body").animate({scrollTop:t},"fast"):$(window).scrollTop(t)}}(),function(){var t=a.containerElem.find(".groupction(){t.css("visibility","unset")},1e3);var e=function(){var t=c.TRANSLATE_TEXT.startsIn,e=c.TRANSLATE_TEXT.endsIn,n=a.activityInfo,i=n.startTime,o=n.endTime;return"ongoing"===n.status?{endTime:o,textPrefix:e}:{endTime:i,textPrefix:t}}(),n=e.endTime,i=e.textPrefix;new u.Countdown({endTime:n,tick:function(e,n){var o=function(){if(!e.d)return"";var t=c.TRANSLATE_TEXT.days,n=c.TRANSLATE_TEXT.day;return e.d+" "+(e.d>1?t:n)+" "}(),a=(""+e.h).padStart(2,"0"),r=(""+e.m).padStart(2,"0"),s=(""+e.s).padStart(2,"0");t.texountDown(),window.location.reload()}})}(),t=a.$section.data("min-group-num"),e=a.$section.data("group-ongoing-hours"),n=a.containerElem.find(".group-buying-guide-content-rules").children(),i=n.eq(1),o=n.eq(2),i.text(i.text().replace("#p#",t)),o.text(o.text().replace("#p#",t).replace("#h#",e))}},{key:"initSection",value:(e=(0,a.default)(o.default.mark(function t(){var e,n,i,a;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,l.getServerTime)();case 2:if(e=t.sent,n=+this.$section.data("start"),i=+this.$section.data("end"),a=(0,l.isRightTime)(e,n,i),this.activityInfo={startTime:n,endTime:i,status:"ongoing"},-1!==a){t.next=13;break}return this.activityInfo.status="coming",this.initDisabledBtns(a),t.abrupt("return",{needContinue:!0,needRequest:!1});case 13:if(1!==a){t.next=17;break}return this.activityInfo.status="end",this.containerElem.remove(),t.abrupt("return",{needContinue:!1,needRequest:!1});case 17:return t.abrupt("return",{needContinue:!0,needRequest:!0});case 18:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})},{key:"initDisabledBtns",value:function(t){var e={"-1":c.TRANSLATE_TEXT.coming,1:c.TRANSLATE_TEXT.end}[t];this.$section.find(".group-buying-item-btn").text(e)}},{key:"sectionEventDispatcher",value:function(t){var e=t.target.className,n="gb-swiper-item-"+(this.isPc?"join":"info"),i=[["group-buying-item-btn",this.handleBtnClick.bind(this)],[n,this.handleJoinGroup.bind(this)]],o=!0,a=!1,r=void 0;try{for(var s,c=i[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var l=s.value;if(e.includes(l[0])){if(!(0,d.gIsLoginMi)())return(0,d.gLogin)(this.moduleUrl);l[1](t);break}}}catch(t){a=!0,r=t}finally{try{!o&&c.return&&c.return()}finally{if(a)throw r}}}},{key:"handleBtnClick",value:function(t){var e=this,n=$(t.target);if(!n.attr("disabled")){var o=n.data("spu"),a=(n.data("goodsid")+"").split(",").filter(Boolean).map(function(t){var n=e.staticGoodsInfo[t],o=e.latestStockInfos.SKU[t]||_;return(0,i.default)({},n,o)});p.ChooseModal.getInstance().render("open",{spu:o,skus:a},this.handleSelected.bind(this)),this.curGroupInfo={spu:o,tipD:n.data("track-d")},f.Track.OpenClick({tip:{d:n.data("track-d")},productId:o})}}},{key:"handleJoinGroup",value:function(t){var e,n=this,o="P"===t.target.tagName?$(t.target.parentNode):$(t.target),a=o.data("spu"),r=o.data("goodsid")+"",s=(e=n.staticGoodsInfo[r],[(0,i.default)({},e,{sold_out:!1,no_left:!1,disabled:!1})]),c={userId:o.data("user-id"),avatar:o.data("avatar"),need:o.data("need"),endTime:o.data("end")},d=function t(e){return e.hasClass("swiper-wrapper")?e:t(e.parent())}(o).data("track-d");this.curGroupInfo={spu:a,goodsid:r,groupNo:o.data("group-no"),tipD:d},p.ChooseModal.getInstance().render("join",{spu:a,skus:s,join:c},this.handleSelected.bind(this)),f.Track.JoinClick({tip:{d:d},productId:a,extra:{groupId:this.curGroupInfo.groupNo}})}},{key:"handleSelected",value:function(t){var e=this;this.startGroup(t.type,t).then(function(){e.startTrack(t);var n=window.GLOBAL_CONFIG.orderSite+(e.isPc?"/buy/checkout/?oneclick=1":"/buy/checkoutoneclick/?oneclick=1")+"&act_type=5&goods_id="+t.id;e.isPc?(window.open(n,"_blank"),setTimeout(function(){window.location.reload()},1e3)):window.location.href=n}).catch(function(t){20001===t.errno?(0,d.gLogin)(e.moduleUrl):(0,v.showTips)({msg:t.errmsg||c.TRANSLATE_TEXT.error_on_set_group})})}},{key:"startTrack",value:function(t){var e=this.curGroupInfo,n=e.tipD,i=e.groupNo,o=e.spu,a=t.curSku.current_price,r=t.id+"";"open"===t.type?f.Track.OpenClickOnModal({tip:{d:n},productId:o,goodsId:r,extra:{goodsCount:1,goodsAmount:a}}):f.Track.JoinClickOnModal({tip:{d:n},productId:o,goodsId:r,extra:{goodsCount:1,goodsAmount:a,groupId:i}})}},{key:"getActivityInfo",value:function(){var t=window.GLOBAL_CONFIG.goSite+"/groupon/groupondetail?act_no="+this.$section.data("actt(t).then(function(t){return t.data})}},{key:"startGroup",value:function(t,e){var n=window.GLOBAL_CONFIG.goSite,i={id:e.id+"-0-"+e.count,act_no:this.$section.data("activity-id"),source:"i18n_groupon",act_type:"5",oneclick:"1"};return"join"===t&&(i.extend=[{goodsId:this.curGroupInfo.goodsid,groupNo:this.curGroupInfo.groupNo}]),new Promise(function(t,e){l.ajax.post(n+"/cart/add",{data:i}).then(function(n){!n.errno&&n.data.res?t(n):e(n)})})}},{key:"moduleUrl",get:function(){var t=window.location;return t.protocol+"//"+t.hostname+t.pathname+"#"+this.containerID}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Track=void 0;var i,o=n(0),a=(i=o)&&i.__esModule?i:{default:i};e.Track={c1:void 0,subModulePos:void 0,_send:function(t,e){var n=(0,a.default)({},t,{tip:(0,a.default)({},t.tip,{c:this.c1,e:e}),subModulePos:this.subModulePos,subModuleTitle:"group_buying"});return window.eventXmot("click",n)},OpenClick:function(t){this._send(t,"11604")},JoinClick:function(t){this._send(t,"11605")},OpenClickOnModal:function(t){thil:function(t){this._send(t,"11608")}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.handleGuideSwitchClick=function(t){var e=t.find(".group-buying-guide-content");$(".gr("group-buying-guide-content-hide")})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChooseModal=void 0;var i=l(n(26)),o=l(n(0)),a=l(n(1)),r=l(n(3)),s=(n(34),n(56)),c=n(55),d=n(15);function l(t){return t&&t.__esModule?t:{default:t}}var u=window.doT.template;(e.ChooseModal=function(){function t(){(0,a.default)(this,t),this.isPc="pc"===window.GLOBAL_CONFIG.clientType,this.scrollAble=!0}return(0,r.default)(t,[{key:"handleListClick",value:function(t){if("LI"===t.target.tagName){var e=$(t.target),n="gb-choose-modal-select-list-item-active";if(!e.hasClass(n)){var i=e.data("goodsid"),o=this.curGoodsInfo.skus[i];this.selectedGoods=i;var a=n+" gb-theme-modal-list-item";e.addClass(a),this.$preSelectedListItem.removeClass(a),this.$preSelectedListItem=e;var r=window.__SCRIBING_PRICE_COMPLIANCE_NATIONS__||["fr","de","nl","pl","it"],c=window.GLOBAL_CONFIG.appLocal.name,l=r.includes(c),u=this.isPc?260:308;if(this.productElems.image.attr("src",(0,d.getCompressedImageUrl)(o.image,u,u)),this.productElems.price.current.text(o.current_price_txt),this.productElems.price.origin.text((l?s.TRANSLATE_TEXT.rrp:"")+o.origin_price_txt),this.hasDisabledSku){if(o.disabled){var f=s.TRANSLATE_TEXT.nostock,h=s.TRANSLATE_TEXT.noleft,p=o.sold_out?f:h;this.$selectBtn.addClass("gb-choose-modal-btn-disabled").text(p)}else{var m=s.TRANSLATE_TEXT.BtnText,v=s.TRANSLATE_TEXT.JoinGroup,g="join"===this.groupType?v:m;this.$selectBtn.removeClass("gb-choose-modal-btn-disabled").text(g)}}$("#J_Choose_Modal_Wrapper").find("span[data-lastest-lowest]").attr("data-lastest-lowest",i),setTimeout(function(){(0,d.setDomLatestLowestPrice)(window.GLOBAL_CONFIG,$("#J_Choose_Modal_Wrapper").find("span[data-lastest-lowest]"),"data-lastest-lowest")},0)}}}},{key:"handleSelectClick",value:function(t){$(t.target).hasClass("gb-choose-modal-btn-disabled")||(this.handleSelected({type:this.groupType,spu:this.curGoodsInfo.spu,id:this.selectedGoods,curSku:this.curGoodsInfo.skus[this.selectedGoods],count:this.counter.value}),this.closeModal())}},{key:"toggleScroll",value:function(){this.scrollAble?$(document.body).css("overflow","hidden").css("height","100%"):$(document.body).css("overflow","visible").css("height","auto"),this.scrollAble=!this.scrollAble}},{key:"closeModal",value:function(){this.$container.remove(),this.toggleScroll(),this.countdown&&this.countdown.clearCountDown()}},{key:"addEventListener",value:function(){var e=this;this.$container.on("click",function(n){n.target.id===t.selectors.container[1]&&e.closn("click",function(){e.closeModal()}),this.$selectList.on("click",this.handleListClick.bind(this)),this.$selectBtn.on("click",this.handleSelectClick.bind(this))}},{key:"render",value:function(e,n,a){var r=this;this.curGoodsInfo={spu:n.spu,skus:n.skus.reduce(function(t,e){return(0,o.default)({},t,(0,i.default)({},e.goods_id,e))},{})},this.groupType=e,this.handleSelected=an(t){t.disabled?f.push(t):l.push(t)}),{sortedSkus:[].concat(l,f),hasDisabledSku:0!==f.length}),p=h.sortedSkus,m=h.hasDisabledSku;this.hasDisabledSku=m,$("#J_main").append(u(function(t,e,n){var i=s.TRANSLATE_TEXT.SelectVersionText,o=s.TRANSLATE_TEXT.BtnText,a=s.TRANSLATE_TEXT.JoinGroup,r=s.TRANSLATE_TEXT.gPrice,c=s.TRANSLATE_TEXT.latestLowestPrice,l=s.TRANSLATE_TEXT.dollar,u=n.join||{},f=u.userId,h=u.avatar,p=u.need,m="join"===e?a:o,v=[];$(".energy-box").each(function(t,e){v.push($(e).attr("data-gid"))}),v=v.join(",").split(","),(0,d.getEnergyLabel)(Array.from(new Set(v)));var g=s.TRANSLATE_TEXT.need+' <span class="gb-icon-people gb-theme-icon-people" /> × '+p,_=window.__SCRIBING_PRICE_COMPLIANCE_NATIONS__||["fr","de","nl","pl","it"],b=window.GLOBAL_CONFIG.appLocal.name,w=_.includes(b),y="gb-choose-modal-select-list-item-active gb-theme-modal-list-item",k=(window.__NEED_SYMBOL_REVERSED_NATIONS__||["es","fr","it","ru","de","tr","jp"]).includes(b),x='\n    <div class="lastest-lowest-price-box">\n      <div class="lastest-lowest-price-hide lastest-lowest-price-tl lastest-lowest-price-group-color" >\n        <span>'+c+"</span>\n        "+(k?"":"<span >"+l+"</span>")+'\n        <span class="lastest-lowest-price" data-lastest-lowest="{{=it[0].goods_id}}"></span>\n        '+(k?"<span >"+l+"</span>":"")+"\n      </div>\n    </div>\n  ",T='\n  <div id="J_Choose_Modal_Wrapper" class="gb-choose-modal-wrapper">\n    <div class="gb-choose-modal-main">\n      <div class="gb-choose-modal-header" '+("open"===e?'style="display: none;"':"")+'>\n        <div class="gb-choose-modal-header-left">\n          <img class="gb-choose-modal-header-avatar" src="'+(h||(0,s.getRandomAvatar)())+'"\n            onerror="this.src=\''+(0,s.getRandomAvatar)()+'\';this.onerror=null"\n          />\n          <span class="gb-choose-modal-header-uid">'+f+'</span>\n          <span class="gb-choose-modal-header-more">'+g+'</span>\n        </div>\n\n        <div class="gb-choose-modal-header-right"></div>\n      </div>\n\n      <div class="gb-choose-modal-body">\n        <div class="gb-choose-modal-select">\n          <h4>'+i+'</h4>\n\n          <ul id="J_Choose_Modal_Select_List" class="gb-choose-modal-select-list">\n            {{~it :sku:index}}\n              <li\n                class="gb-choose-modal-select-list-item {{? index === 0 }}'+y+'{{?}}"\n                data-energyInfo="{{=sku.energy_info}}" data-energyImage="{{=sku.energy_image}}" data-energyProductInfo="{{=sku.product_energy_info}}" data-energyProduct="{{=sku.product_energy}}"\n                data-goodsid="{{=sku.goods_id}}"\n                data-index="{{=index}}"\n                data-disabled="{{? sku.disabled }}disabled{{?}}"\n                title="{{=sku.goods_name}}"\n              >\n                {{=sku.goods_name}}\n              </li>\n            {{~}}\n          </ul>\n\n          \n        </div>\n\n        <img class="gb-choose-modal-product-image"\n          src="{{=it[0].image}}?thumb=1&w=260&h=260&width=260&height=260"\n          alt="choose-modal-product-image" width="260" height="260"\n        />\n      </div>\n\n      <div class="gb-choose-modal-footer">\n        <div class="gb-choose-modal-footer-left">\n          <span class="gb-theme-theme1Text">'+r+'</span>\n          <p class="gb-choose-modal-footer-price">\n            <span class="gb-theme-theme1Text">{{=it[0].current_price_txt}}</span>\n            <del class="gb-theme-productText">'+(w?s.TRANSLATE_TEXT.rrp:"")+"{{=it[0].origin_price_txt}}</del>\n          </p>\n          "+(w?x:"")+'\n          <div class="energy-box" style="display:none" data-gid="{{=it[0].goods_id}}">\n            <a href="javascript:void(0)" class="energy-icon-url" target="_blank">\n              <img class="energy-icon" />\n            </a>\n            <a href="javascript:void(0)" class="energy-text-url" target="_blank">\n              <div class="energy-text"></div>\n            </a>\n          </div>\n        </div>\n\n        <span id="J_Choose_Modal_Btn_Yes" class="gb-choose-modal-btn gb-theme-itemBtn">'+m+'</span>\n      </div>\n    </div>\n\n    <span id="J_Choose_Modal_Btn_Close" class="gb-choose-modal-close"></span>\n  </div>',S='\n  <div id="J_Choose_Modal_Wrapper" class="gb-choose-modal-wrapper">\n    <div class="gb-choose-modal-main">\n      <div class="gb-choose-modal-header" '+("open"===e?'style="display: none;"':"")+'>\n        <div class="gb-choose-modal-header-left">\n          <img class="gb-choose-modal-header-avatar" src="'+(h||(0,s.getRandomAvatar)())+'"\n            onerror="this.src=\''+(0,s.getRandomAvatar)()+'\';this.onerror=null"\n          />\n          <span class="gb-choose-modal-header-more">'+g+'</span>\n        </div>\n\n        <div class="gb-choose-modal-header-right"></div>\n      </div>\n\n      <div class="gb-choose-modal-body">\n        <div class="gb-choose-modal-select">\n          <h4>'+i+'</h4>\n\n          <ul id="J_Choose_Modal_Select_List" class="gb-choose-modal-select-list">\n            {{~it :sku:index}}\n              <li\n                class="gb-choose-modal-select-list-item {{? index === 0 }}'+y+'{{?}}"\n                data-goodsid="{{=sku.goods_id}}"\n                data-index="{{=index}}"\n                data-disabled="{{? sku.disabled }}disabled{{?}}"\n                title="{{=sku.goods_name}}"\n              >\n                {{=sku.goods_name}}\n              </li>\n            {{~}}\n          </ul>\n        </div>\n      </div>\n\n      <div class="gb-choose-modal-footer">\n        <div class="gb-choose-modal-footer-left">\n          \n          <div class="energy-box" style="display:none" data-gid="{{=it[0].goods_id}}">\n            <a href="javascript:void(0)" class="energy-icon-url" target="_blank">\n              <img class="energy-icon" />\n            </a>\n            <a href="javascript:void(0)" class="energy-text-url" target="_blank">\n              <div class="energy-text"></div>\n            </a>\n          </div>\n          <span class="gb-theme-theme1Text">'+r+'</span>\n          <p class="gb-choose-modal-footer-price">\n            <span class="gb-theme-theme1Text">{{=it[0].current_price_txt}}</span>\n            <del class="gb-theme-productText">'+(w?s.TRANSLATE_TEXT.rrp:"")+"{{=it[0].origin_price_txt}}</del>\n          </p>\n          "+(w?x:"")+'\n        </div>\n        <img class="gb-choose-modal-product-image"\n          src="{{=it[0].image}}?thumb=1&w=308&h=308&width=308&height=308"\n          alt="choose-modal-product-image" width="308" height="308"\n        />\n      </div>\n\n      <div id="J_Choose_Modal_Btn_Yes" class="gb-choose-modal-btn gb-theme-itemBtn">'+m+"</div>\n    </div>\n  </div>";return'<div id="J_Choose_Modal" class="choose-modal">'+(t?T:S)+"</div>"}(this.isPc,e,{join:n.join}))(p)),this.counter={value:1},this.selectedGoods=p[0].goods_id,this.$preSelectedListItem=this.$selectList.children("li").eq(0),"join"===e&&(this.countdown=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".gb-choose-modal-header-right";return new c.Countdown({endTime:e,tick:function(e,i){var o=(""+(e.h+24*e.d)).padStart(2,"0"),a=(""+e.m).padStart(2,"0"),r=(""+e.s).padStart(2,"0");t.find(n).html(s.TRANSLATE_TEXT.endsIn+' <span class="gb-theme-theme1Text">':function(){window.location.reload()}})}(this.$container,n.join.endTime)),this.toggleScroll(),setTimeout(function(){r.$container.children(t.selectors.wrapper[0]).css("transform","translateY(0)").css("opacity","1"),(0,d.setDomLatestLowestPrice)(window.GLOBAL_CONFIG,$("#J_Choose_Modal_Wrapper").find("span[data-lastest-lowest]"),"data-lastest-lowest")},0),this.addEventListener()}},{key:"$container",get:function(){return $(t.selectors.container[0])}},{key:"$closeBtn",get:function(){return this.$container.find(t.selectors.closeBtn[0])}},{key:"$selectBtn",get:function(){return this.$container.find(t.selectors.selectBtn[0])}},{key:"$selectList",get:function(){return this.$container.find(t.selectors.selectList[0])}},{key:"productElems",get:function(){var t=this.$container.find(".gb-choose-modal-footer-price");return{image:this.$container.find(".gb-en("span"),origin:t.children("this._instance=new t),this._instance}}]),t}()).selectors={container:["#J_Choose_Modal","J_Choose_Modal"],closeBtn:["#J_Choose_Modal_Btn_Close"],selectBtn:["#J_Choose_Modal_Btn_Yes"],selectList:["#J_Choose_Modal_Select_List"],wrapper:["#J_Choose_Modal_Wrapper"]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SwiperGenerator=void 0;n(34);var i=n(56);e.SwiperGenerator={isPc:"pc"===window.GLOBAL_CONFIG.clientType,$item:null,$swiper:null,use:function(t,e){var n=this;this.$item=t,this.$swiper=t.find(".gb-swiper-container");var o=e.map(function(t){var e=t.user_avatar||(0,i.getRandomAvatar)(),o='\n        data-group-no="'+t.group_no+'"\n        data-user-id="'+t.user_id+'"\n        data-spu="'+t.spuId+'"\n        data-goodsid="'+t.goods_id+'"\n        data-need="'+t.need_num+'"\n        data-end="'+t.group_end_time+'"\n        title="'+t.goods_name+'"\n        data-avatar="'+e+'"',a=i.TRANSLATE_TEXT.need+' <span class="gb-icon-people gb-theme-icon-people" /> × '+t.need_num;return'<div class="swiper-slide">\n        <div class="gb-swiper-item">\n          '+('<div class="gb-circle-countdown-box">\n  <div class="gb-circle-countdown-left_box">\n    <div class="gb-circle-countdown-left_item gb-circle-countdown-rotate_item gb-theme-process-color"></div>\n  </div>\n  <div class="gb-circle-countdown-right_box">\n    <div class="gb-circle-countdown-right_item gb-circle-countdown-rotate_item gb-theme-process-color"></div>\n  </div>\n  <img class="gb-circle-countdown-mask"\n    src="'+e+'" alt="user-avatar"\n    onerror="this.src=\''+(0,i.getRandomAvatar)()+"';this.onerror=null\"\n  />\n  </div>")+'\n          <div class="gb-swiper-item-info gb-theme-theme1Text" '+(n.isPc?"":o)+'>\n            <p class="gb-swiper-item-info-emitter">'+t.user_id+'</p>\n            <p class="gb-swiper-item-info-emitter">'+a+'</p>\n          </div>\n\n          <div class="gb-swiper-item-join gb-theme-theme1Text gb-theme-join-border"\n            '+(n.isPc?o:"")+"\n          >"+(n.isPc?i.TRANSLATE_TEXT.join+" >":"")+"</div>\n        </div>\n      </div>"}).join("\n");return this.$swiper.children(".swiper-wrapper").html(o),this.$item.find(".gb-swiper").show(),this},create:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gb-circle-countdown-control",n=this.$swiper,i=function(t){var i=n.find(".swiper-slide-active .gb-circle-countdown-box");t?i.addClass(e):i.removeClass(e)},o=new window.Swiper(n[0],{direction:"vertical",loop:!0,allowTouchMove:!1,autoplay:{delay:t},on:{init:function(){return i(!0)},transitionStart:transitionEnd:function(){return i(!0)}}});return o.el.onmouseover=function(){o.t=function(){o.autoplay.start(),i(!0)},this}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initNotifyMe=void 0;var i,o,a=d(n(17)),r=d(n(18)),s=(e.initNotifyMe=(i=(0,r.default)(a.default.mark(function t(e){var n,i,o,r,d,u,f,h,p,m,v,g;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=(0,c.gIsLoginMi)(),i=!1,!n){t.next=12;break}return t.next=5,s();case 5:if(t.sent){t.next=9;break}new Promise(function(t){$.ajax({url:l.follow,type:"POST",data:{event_code:window.enPageUrl,follow_type:1,block_code:window.enPageUrl,build_type:0},als:!0},success:function(e){t(e.code)},error:function(){t(-1)}})}),t.next=12;break;case 9:$(".notify-box").css("display","none"),document.body.style.overflow="",i=!0;case 12:if(!i){t.next=14;break}return t.abrupt("return");case 14:if(o=(new Date).getTime()/1e3,r=window.location.href.includes("notify=1"),!(o>Number(e.timeEventStart)&&o<Number(e.timeSaleStart)&&"in"===window.GLOBAL_CONFIG.appLocal.name&&r)){t.next=21;break}$(".notify-box").css("display","block"),document.body.style.overflow="hidden",t.next=24;break;case 21:return $(".notify-box").css("display","none"),document.body.style.overflow="",t.abrupt("return");case 24:d=new Date(1e3*e.timeSaleStart),u=d.getFullYear(),f=String(d.getMonth()+1).padStart(2,"0"),h=String(d.getDate()).padStart(2,"0"),p=String(d.getHours()).padStart(2,"0"),m=String(d.getMinutes()).padStart(2,"0"),v=String(d.getSeconds()).padStart(2,"0"),g=u+"-"+f+"-"+h+" "+p+":"+m+":"+v,$("#notify-start-text").text(g),n?($(".not-login").css("display","none"),$(".is-login").css("display","block")):($(".not-login").css("display","block"),$(".is-login").css("display","none"))lick",function(){return(0,c.gLogin)()});case 35:ion(t){return i.apply(this,arguments)}),o=(0,r.default)(a.default.mark(function t(){var e,n;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise(function(t){$.ajax({url:l.list,type:"GET",data:{event_code:window.enPageUrl,build_type:0},dentiaction(e){t(e)},error:function(){t(-1)}})});case 2:return e=t.sent,n=e.data&&e.data.follow_list,t.abrupt("return",n.length>0);case 6:tion(){return o.apply(this,arguments)}),c=n(4);function d(t){return t&&t.__esModule?t:{default:t}}var l={follow:GLOBAL_CONFIG.apiUrl+"/eventapi/api/warmup/follow",unfollow:GLOBAL_CONFIG.apiUrl+"/eventapi/api/warmup/unfollow",list:GLOBAL_CONFIG.apiUrl+"/eventapi/api/warmup/list"}}]);