var Protobuf={Messages:{}};
Protobuf.Messages.zfcCookie={"zfc.Cookie.Session":{1:{rule:"required",name:"timestamp",type:"uint64"},2:{rule:"required",name:"connection",type:"uint64"},3:{rule:"optional",name:"timestamp2",type:"uint64"},fields:["1","2","3"]},"zfc.Cookie.Test":{1:{rule:"required",name:"name",type:"string"},2:{rule:"optional",name:"index",type:"uint32"},3:{rule:"optional",name:"phase",type:"uint32"},4:{rule:"optional",name:"active",type:"bool"},5:{rule:"optional",name:"timestamp",type:"uint64"},fields:["1","2","3",
"4","5"]},"zfc.Cookie":{1:{rule:"required",name:"session",code:"zfc.Cookie.Session"},2:{rule:"repeated",name:"tests",code:"zfc.Cookie.Test"},fields:["1","2"]}};
Protobuf.Messages.zfcEvent={imports:["zfcCheckoutEvent","zfcHydra","zfcPlatform","zfcProductPageViewEvent","zfcRecommendationEvent"],"zfc.EventBundle.Event":{1:{rule:"required",name:"type",type:"string"},2:{rule:"optional",name:"payload",type:"string"},3:{rule:"optional",name:"metadata",type:"string"},4:{rule:"optional",name:"timestamp",type:"uint64"},6:{rule:"optional",name:"subsiteId",type:"uint32"},1E3:{rule:"optional",name:"checkout",code:"zfc.CheckoutEvent"},1001:{rule:"optional",name:"product",
code:"zfc.ProductPageViewEvent"},fields:"1 2 3 4 6 1000 1001".split(" ")},"zfc.EventBundle":{1:{rule:"optional",name:"uuid",type:"string"},2:{rule:"optional",name:"counter",type:"uint32"},3:{rule:"repeated",name:"events",code:"zfc.EventBundle.Event"},4:{rule:"repeated",name:"hydra",code:"zfc.Hydra"},5:{rule:"optional",name:"upstreamUri",type:"string"},6:{rule:"optional",name:"legacyCustomerId",type:"string"},7:{rule:"optional",name:"amazonCustomerId",type:"string"},8:{rule:"optional",name:"platform",
code:"zfc.Platform"},fields:"12345678".split("")}};Protobuf.Messages.zfcHydra={"zfc.Hydra.Treatment":{1:"ASSIGNED",2:"APPLIED",3:"REASSIGNED",4:"REMOVED",type:"enum",ASSIGNED:"1",APPLIED:"2",REASSIGNED:"3",REMOVED:"4"},"zfc.Hydra":{1:{rule:"required",name:"name",type:"string"},2:{rule:"required",name:"treatment",code:"zfc.Hydra.Treatment"},3:{rule:"optional",name:"index",type:"uint32"},4:{rule:"optional",name:"lastIndex",type:"uint32"},fields:["1","2","3","4"]}};
Protobuf.Messages.zfcImpression={imports:["zfcLazyEye"],"zfc.ImpressionBundle.TreeDictEntry":{1:{rule:"required",name:"id",type:"uint32"},2:{rule:"repeated",name:"tree",code:"zfc.LazyEye.Event.Node"},fields:["1","2"]},"zfc.ImpressionBundle.Impression":{1:{rule:"required",name:"element",code:"zfc.LazyEye.Event.Element"},2:{rule:"required",name:"context",type:"uint32"},3:{rule:"required",name:"timestamp",type:"uint64"},4:{rule:"required",name:"duration",type:"uint64"},fields:["1","2","3","4"]},"zfc.ImpressionBundle":{1:{rule:"required",
name:"uuid",type:"string"},2:{rule:"required",name:"counter",type:"uint32"},3:{rule:"repeated",name:"impressions",code:"zfc.ImpressionBundle.Impression"},4:{rule:"repeated",name:"treeDict",code:"zfc.ImpressionBundle.TreeDictEntry"},fields:["1","2","3","4"]}};
Protobuf.Messages.zfcLazyEye={imports:["zfcHydra"],"zfc.LazyEye.Event.Type":{1:"CLICK",2:"CHANGE",3:"CONTEXTMENU",4:"ERROR",5:"SUBMIT",6:"REDIRECT",type:"enum",CLICK:"1",CHANGE:"2",CONTEXTMENU:"3",ERROR:"4",SUBMIT:"5",REDIRECT:"6"},"zfc.LazyEye.Event.Value":{1:{rule:"required",name:"value",type:"string"},2:{rule:"optional",name:"truncated",type:"bool"},fields:["1","2"]},"zfc.LazyEye.Event.Node":{1:{rule:"required",name:"name",type:"string"},2:{rule:"optional",name:"id",type:"string"},fields:["1",
"2"]},"zfc.LazyEye.Event.Image":{1:{rule:"required",name:"src",type:"string"},2:{rule:"optional",name:"title",code:"zfc.LazyEye.Event.Value"},3:{rule:"optional",name:"alt",code:"zfc.LazyEye.Event.Value"},fields:["1","2","3"]},"zfc.LazyEye.Event.Input":{1:{rule:"required",name:"type",type:"string"},2:{rule:"optional",name:"name",type:"string"},3:{rule:"optional",name:"checked",type:"bool"},4:{rule:"optional",name:"disabled",type:"bool"},fields:["1","2","3","4"]},"zfc.LazyEye.Event.Select":{1:{rule:"required",
name:"name",type:"string"},2:{rule:"required",name:"value",type:"string"},3:{rule:"required",name:"text",type:"string"},4:{rule:"optional",name:"multiple",type:"bool"},fields:["1","2","3","4"]},"zfc.LazyEye.Event.Offset":{1:{rule:"required",name:"left",type:"uint64"},2:{rule:"required",name:"top",type:"uint64"},3:{rule:"required",name:"width",type:"uint64"},4:{rule:"required",name:"height",type:"uint64"},fields:["1","2","3","4"]},"zfc.LazyEye.Event.Form.Field":{1:{rule:"required",name:"element",code:"zfc.LazyEye.Event.Node"},
2:{rule:"optional",name:"input",code:"zfc.LazyEye.Event.Value"},3:{rule:"optional",name:"type",type:"string"},fields:["1","2","3"]},"zfc.LazyEye.Event.Form":{1:{rule:"optional",name:"name",type:"string"},2:{rule:"optional",name:"action",type:"string"},3:{rule:"optional",name:"method",type:"string"},4:{rule:"repeated",name:"fields",code:"zfc.LazyEye.Event.Form.Field"},fields:["1","2","3","4"]},"zfc.LazyEye.Event.Element":{1:{rule:"required",name:"node",code:"zfc.LazyEye.Event.Node"},2:{rule:"repeated",
name:"classNames",type:"string"},3:{rule:"optional",name:"href",type:"string"},4:{rule:"optional",name:"image",code:"zfc.LazyEye.Event.Image"},5:{rule:"optional",name:"text",code:"zfc.LazyEye.Event.Value"},6:{rule:"optional",name:"input",code:"zfc.LazyEye.Event.Input"},7:{rule:"optional",name:"select",code:"zfc.LazyEye.Event.Select"},8:{rule:"optional",name:"offset",code:"zfc.LazyEye.Event.Offset"},9:{rule:"optional",name:"form",code:"zfc.LazyEye.Event.Form"},fields:"123456789".split("")},"zfc.LazyEye.Event":{1:{rule:"required",
name:"counter",type:"uint64"},2:{rule:"required",name:"timestamp",type:"uint64"},3:{rule:"required",name:"timeOnPage",type:"uint64"},4:{rule:"optional",name:"pageX",type:"uint64"},5:{rule:"optional",name:"pageY",type:"uint64"},6:{rule:"required",name:"windowWidth",type:"uint64"},7:{rule:"required",name:"windowHeight",type:"uint64"},8:{rule:"required",name:"target",code:"zfc.LazyEye.Event.Element"},9:{rule:"optional",name:"anchor",code:"zfc.LazyEye.Event.Element"},10:{rule:"optional",name:"upstreamUri",
type:"string"},11:{rule:"repeated",name:"nodeTree",code:"zfc.LazyEye.Event.Node"},12:{rule:"optional",name:"type",code:"zfc.LazyEye.Event.Type"},13:{rule:"optional",name:"attempts",type:"uint32"},14:{rule:"repeated",name:"hydra",code:"zfc.Hydra"},fields:"1 2 3 4 5 6 7 8 9 10 11 12 13 14".split(" ")},"zfc.LazyEye":{1:{rule:"repeated",name:"events",code:"zfc.LazyEye.Event"},fields:["1"]}};
Protobuf.Messages.zfcOnload={"zfc.Onload.Checkpoint":{1:{rule:"optional",name:"label",type:"string"},2:{rule:"required",name:"time",type:"uint32"},3:{rule:"required",name:"msec",type:"uint32"},fields:["1","2","3"]},"zfc.Onload.Error":{1:{rule:"required",name:"msg",type:"string"},2:{rule:"required",name:"url",type:"string"},3:{rule:"required",name:"line",type:"uint32"},fields:["1","2","3"]},"zfc.Onload":{1:{rule:"required",name:"uuid",type:"string"},2:{rule:"required",name:"upstreamUuid",type:"string"},
3:{rule:"optional",name:"pageGenerationTime",type:"uint32"},4:{rule:"optional",name:"pageGenerationMsec",type:"uint32"},5:{rule:"optional",name:"enterHeadTime",type:"uint32"},6:{rule:"optional",name:"enterHeadMsec",type:"uint32"},7:{rule:"optional",name:"leaveBodyTime",type:"uint32"},8:{rule:"optional",name:"leaveBodyMsec",type:"uint32"},9:{rule:"optional",name:"onloadTime",type:"uint32"},10:{rule:"optional",name:"onloadMsec",type:"uint32"},11:{rule:"optional",name:"upstreamHost",type:"string"},12:{rule:"optional",
name:"upstreamUri",type:"string"},13:{rule:"optional",name:"pageGeneration",code:"zfc.Onload.Checkpoint"},14:{rule:"optional",name:"enterHead",code:"zfc.Onload.Checkpoint"},15:{rule:"optional",name:"leaveBody",code:"zfc.Onload.Checkpoint"},16:{rule:"optional",name:"onload",code:"zfc.Onload.Checkpoint"},17:{rule:"repeated",name:"checkpoints",code:"zfc.Onload.Checkpoint"},18:{rule:"optional",name:"exited",type:"bool"},19:{rule:"repeated",name:"errors",code:"zfc.Onload.Error"},fields:"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19".split(" ")}};
Protobuf.Messages.zfcTracker={imports:["zfcHydra"],"zfc.Tracker.Var":{1:{rule:"required",name:"name",type:"string"},2:{rule:"optional",name:"value",type:"string"},fields:["1","2"]},"zfc.Tracker":{1:{rule:"required",name:"locationHref",type:"string"},2:{rule:"required",name:"upstreamLabel",type:"string"},3:{rule:"required",name:"upstreamHost",type:"string"},4:{rule:"required",name:"upstreamUri",type:"string"},5:{rule:"optional",name:"pageGenerationTime",type:"uint32"},6:{rule:"optional",name:"pageGenerationMsec",
type:"uint32"},7:{rule:"optional",name:"enterHeadTime",type:"uint32"},8:{rule:"optional",name:"enterHeadMsec",type:"uint32"},9:{rule:"optional",name:"leaveBodyTime",type:"uint32"},10:{rule:"optional",name:"leaveBodyMsec",type:"uint32"},11:{rule:"optional",name:"screenWidth",type:"uint32"},12:{rule:"optional",name:"screenHeight",type:"uint32"},13:{rule:"optional",name:"screenColorDepth",type:"uint32"},14:{rule:"optional",name:"documentReferrer",type:"string"},15:{rule:"optional",name:"upstreamMetadata",
type:"string"},16:{rule:"optional",name:"windowId",type:"string"},17:{rule:"optional",name:"windowWidth",type:"uint32"},18:{rule:"optional",name:"windowHeight",type:"uint32"},19:{rule:"repeated",name:"vars",code:"zfc.Tracker.Var"},20:{rule:"repeated",name:"hydra",code:"zfc.Hydra"},99:{rule:"optional",name:"uuid",type:"string"},fields:"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 99".split(" ")}};
Protobuf.Messages.zfcCheckoutEvent={imports:["zfcProductData"],"zfc.CheckoutEvent":{1:{rule:"optional",name:"amazonPurchaseId",type:"string"},2:{rule:"optional",name:"amazonPhysicalOrderId",type:"string"},3:{rule:"optional",name:"amazonDigitalOrderId",type:"string"},4:{rule:"optional",name:"legacyOrderId",type:"string"},5:{rule:"optional",name:"shipping",type:"string"},6:{rule:"optional",name:"tax",type:"string"},7:{rule:"optional",name:"subtotal",type:"string"},8:{rule:"optional",name:"total",type:"string"},
9:{rule:"optional",name:"fraud",type:"bool"},10:{rule:"optional",name:"employee",type:"bool"},11:{rule:"repeated",name:"orderItem",code:"zfc.ProductData"},fields:"1 2 3 4 5 6 7 8 9 10 11".split(" ")}};
Protobuf.Messages.zfcProductData={"zfc.ProductData":{1:{rule:"optional",name:"productId",type:"uint32"},2:{rule:"optional",name:"styleId",type:"uint32"},3:{rule:"optional",name:"colorId",type:"uint32"},4:{rule:"optional",name:"stockId",type:"uint32"},5:{rule:"optional",name:"asin",type:"string"},6:{rule:"repeated",name:"taxonomyCategoryId",type:"uint32"},fields:"123456".split("")}};
Protobuf.Messages.zfcPlatform={"zfc.Platform.PlatformType":{0:"CHROME_OS",1:"BLACKBERRY",2:"UNKNOWN",3:"LINUX",4:"IOS",5:"MAC_OSX",6:"WINDOWS_PHONE",7:"WINDOWS",8:"ANDROID",type:"enum",CHROME_OS:"0",BLACKBERRY:"1",UNKNOWN:"2",LINUX:"3",IOS:"4",MAC_OSX:"5",WINDOWS_PHONE:"6",WINDOWS:"7",ANDROID:"8"},"zfc.Platform":{1:{rule:"optional",name:"platformType",code:"zfc.Platform.PlatformType"},2:{rule:"optional",name:"osVersion",type:"string"},3:{rule:"optional",name:"browser",type:"string"},4:{rule:"optional",
name:"browserVersion",type:"string"},5:{rule:"optional",name:"screenWidth",type:"uint64"},6:{rule:"optional",name:"screenHeight",type:"uint64"},7:{rule:"optional",name:"appVersion",type:"string"},8:{rule:"optional",name:"deviceId",type:"string"},9:{rule:"optional",name:"deviceBuild",type:"string"},10:{rule:"optional",name:"deviceAdvertisingId",type:"string"},fields:"1 2 3 4 5 6 7 8 9 10".split(" ")}};
Protobuf.Messages.zapposBrandSearch={"zappos.BrandSearch":{10:{rule:"required",name:"brandId",type:"uint32"},44:{rule:"optional",name:"history",type:"uint32"},fields:["10","44"]}};
Protobuf.Extensions={"zfc.LazyEye.Event":{100:{rule:"optional",name:"pageTransition",code:"zfc.PageTransition"},fields:["100"],names:["imports","zfc.PageTransition.Page","zfc.PageTransition"],imports:["zfcLazyEye"],"zfc.PageTransition.Page":{1:{rule:"required",name:"uuid",type:"string"},2:{rule:"required",name:"windowId",type:"string"},fields:["1","2"]},"zfc.PageTransition":{1:{rule:"required",name:"source",code:"zfc.PageTransition.Page"},2:{rule:"optional",name:"destination",code:"zfc.PageTransition.Page"},
fields:["1","2"]}},"zfc.Tracker":{100:{rule:"optional",name:"sourceClick",code:"zfc.SourceClick"},fields:["100"],names:["imports","zfc.SourceClick"],imports:["zfcTracker"],"zfc.SourceClick":{1:{rule:"required",name:"windowId",type:"string"},2:{rule:"required",name:"counter",type:"uint32"},fields:["1","2"]}}};var JSON;JSON||(JSON={});
(function(){nction"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=;var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h,d,g={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;"function"!==typeof JSON.stringify&&(JSON.stringify=;
"function"!==typeof JSON.parse&&(JSON.parse=})();
(function(f,a){var b=f.Annapurna=f.Annapurna||{};b.forEach=function(a,e){var h,d;if(a)for(h=0,d=a.length;h<d;h++)e.call(this,a[h],h)};b.hasKeys=b.inArray=function(a,e){if("object"===typeof e&&e.length)for(var h=0,d=e.length;h<d;h++)if(a===e[h])return!0;return!1};b.iterateArray=function(a,e,h,d){function g(){for(var f=d.chunk;f--&&k<b;)e(a[k]),++k;k<b?setTimeout(g,1):h&&h()}var k=0,b=a.length;d=d||{};d.chunk=d.chunk||100;g()};b.lastElement=function(a){var e;
if(a&&(e=a.length))return a[e-1]};b.callbackDelegator=function(a,e){var h,d,g,k=[];if(a&&e)for(h=0,d=e.length;h<d;h++)e[h]&&("object"===typeof e[h]?(g=e[h].shift(),k=e[h]):g=e[h]),"function"===typeof a[g]?a[g].apply(a,k):console.error("No callback was found for: "+g)};b.firePixel=function(a,e,h){var d;a&&e&&(d=new Image,h&&(d.onload=h),d.src=a+"?"+e)};b.error=function(a){var e=window.onerror;e&&"function"===typeof e&&e(a,"Annapurna/7d31c52")};b.extend=function(a,e){var h=function(){};h.prototype=e.prototype;
a.prototype=new h;a.prototype.constructor=a;a.superclass=e.prototype;e.prototype.constructor==Object.prototype.constructor&&(e.prototype.constructor=e)};b.implement=function(a,e){b.forEach(e,function(h,d){a.prototype[h]=)}})(window,document);
(function(f){f.Cookies=function(a){if(!(this instanceof f.Cookies))return new f.Cookies(a);this.name=a};f.Cookies.prototype={read:function(){for(var a=this.name+"=",b=document.cookie.split(";"),c,e=0;e<b.length;e++){for(c=b[e];" "==c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(a))return c.substring(a.length,c.length)}return null},write:function(a,b,c){var e;b?(e=new Date,e.setTime(e.getTime()+864E5*b),b="; expires="+e.toGMTString()):b="";document.cookie=this.name+"="+a+b+"; path=/"+(c&&
""!==c?"; domain="+c:"")},erase:function(a){this.write("",-1,a)}}})(Annapurna);
(function(f){f.string={trim:function(a){if("string"===typeof a)return a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},truncateValue:function(a,b,c){var e=!1;if(a=f.string.trim(a))return a.length>b&&(a=a.substring(0,b),e=!0),c.call(this,a,e)},capFirstLetter:splitOnSpaces:function(a){var b=[],c=[],e;if(a&&"string"===typeof a){if(a.match(/ /g)){b=a.split(" ");a=0;for(e=b.length;a<e;a++)c.push(b[a]);return c}return[a]}},utf8Encode:function(a){var b=
"",c,e,h,d=String.fromCharCode;if(a)if("string"!==typeof a&&a.toString&&(a=a.toString()),"string"===typeof a)for(c=0,e=a.length;c<e;c++)h=a.charCodeAt(c),128>h?b+=d(h):2048>h?(b+=d(h>>6|192),b+=d(h&63|128)):65536>h&&(b+=d(h>>12|224),b+=d(h>>6&63|128),b+=d(h&63|128));else this.utf8Error(a);return b},utf8Decode:function(a){var b="",c,e,h,d,g,k=String.fromCharCode;if(a)if("string"!==typeof a&&a.toString&&(a=a.toString()),"string"===typeof a)for(c=0,e=a.length;c<e;c++)h=a.charCodeAt(c),128>h?b+=k(h):
192<=h&&224>h&&c<e-1?(d=a.charCodeAt(++c),128<=d&&192>d&&(h=(h&31)<<6|d&63,b+=k(h))):224<=h&&240>h&&c<e-2&&(d=a.charCodeAt(++c),g=a.charCodeAt(++c),128<=d&&192>d&&128<=g&&192>g&&(h=(h&15)<<12|(d&63)<<6|g&63,b+=k(h)));else this.utf8Error(a);return b},utf8Error:function(a){a&&("object"===typeof a&&a.nodeName?f.error("utf8Encode: Encountered an Object with the following attributes: id="+a.id+"||class="+a.className+"||nodeName:"+a.nodeName+"||name:"+a.name):f.error("utf8Encode: Encountered a non-string with value "+
a))},normalize:function(a){if(a)return a.replace(/[^\w']/g," ").replace(/\s+/g," ").replace(/(^\s+|\'|\s+$)/g,"").toLowerCase()}}})(Annapurna);
(function(f){function a(){if(!(this instanceof f.Protobuf))return new f.Protobuf;this.descriptor={};this.extensions={};this.extensionCallbacks=[]}var b=function(){for(var a={},d=4;20>d;d++)a[d]=Math.pow(2,7*d);return a}(),c=[],e={extensions:[],base:{}};a.prototype.setDescriptor=function(a){this.descriptor=a;a.imports&&(this.loadImports(a.imports),this.descriptor.loadedImports=!0);return this};a.prototype.setExtensions=function(a){this.extensions=a;return this};a.prototype.getExtensions=a.prototype.addExtension=a.prototype.setMessageExtensions=function(){var a,d,g,k,e,b;b=this.getExtensions();for(a in this.descriptor)if(!f.inArray(a,c)){if(b[a]){if(d=b[a].fields)for(k=0,e=d.length;k<e;k++)g=d[k],this.descriptor[a].fields.push(g),this.descriptor[a][g]=b[a][g];if(d=b[a].names)for(k=0,e=d.length;k<e;k++)g=d[k],this.descriptor[g]=b[a][g]}c.push(a)}};a.prototype.accumulatedExtensionFields=
function(a){var d,g,e;d=0;for(g=this.extensionCallbacks.length;d<g;d++)e=this.extensionCallbacks[d],a[e.name]=e.fn.call(this,a);return a};a.prototype.decode=function(a,d){if(this.descriptor)return this.setMessageExtensions(),this.decodeMessage(a,d,{});console.error("The descriptor setter must be used in order to decode.")};a.prototype.decodeMessage=function(a,d,g){var e,b,c,f;for(d={pointer:0,message:d};d.pointer<d.message.length;)e=this.decodeVarint(d),b=e&7,c=e>>3,(e=this.descriptor[a][c])?(c=this.decodeField(d,
b),b=e.name,(f=e.code)?this.descriptor[f]?c="enum"===this.descriptor[f].type?this.descriptor[f][c]:this.decodeMessage(f,c,{}):console.error("No root type was found for",f,"with descriptor",this.descriptor):c=this.processByType(c,e,"post"),"repeated"===e.rule?g[b]?g[b].push(c):g[b]=[c]:g[b]=c):(console.log(a+": skipping unknown field "+c+" (wire type "+b+")"),this.decodeField(d,b));return g};a.prototype.encode=a.prototype.encodeMessage=
function(a,d){var g,e,b,c,f,p,q="",t={},u=[];d=this.accumulatedExtensionFields(d);if(!d||!this.descriptor[a])return"";t=this.descriptor[a];u=t.fields;g=0;for(e=u.length;g<e;g++)c=u[g],b=t[c],f=d[b.name],"undefined"!==typeof f&&null!==f&&(b.code?this.descriptor[b.code]?p="enum"===this.descriptor[b.code].type?this.processEnum:this.processMessage:console.error("No root type was found for",b.code,"with descriptor",this.descriptor):p=this.processField,q+=this.encodeField(c,b,f,p));return q};a.prototype.processByType=
function(a,d,g){return d.type&&(d=g+"process"+f.string.capFirstLetter(d.type),this[d]&&"function"===typeof this[d])?this[d].call(this,a):a};a.prototype.processEnum=function(a,d){return Number(this.descriptor[a.code][d])};a.prototype.processMessage=a.prototype.processField=a.prototype.encodeValue=function(a,d,g,e){var b="",c=this.encodeVarint;g=e.call(this,d,g);"number"===typeof g?isNaN(g)||(b=c(a<<
3)+c(g)):void 0!==g&&""!==g&&null!==g&&(b=c(a<<3|2)+c(g.length)+g);return b};a.prototype.encodeField=function(a,d,g,e){var b,c,f="";if("repeated"===d.rule)for(b=0,c=g.length;b<c;b++)f+=this.encodeValue(a,d,g[b],e);else f+=this.encodeValue(a,d,g,e);return f};a.prototype.preprocessBool=a.prototype.preprocessString=function(a){return f.string.utf8Encode(a)};a.prototype.postprocessString=a.prototype.decodeField=a.prototype.decodeVarint=function(a){for(var d=0,g=0,e;(e=a.message.charCodeAt(a.pointer++))&&(g+=4>d?(e&127)<<7*d++:(e&127)*b[d++],e&128););return g};a.prototype.decodeLengthDelimited=function(a){var d=this.decodeVarint(a),g=a.message.substring(a.pointer,a.pointer+d);a.pointer+=d;return g};a.prototype.encodeVarint=function(a){var d="",g=String.fromCharCode,e=Math.floor;do d=128<=a?d+g(a&127|128):d+g(a);while(a=4294967296>a?a>>>7:e(a/128));return d};
a.prototype.loadImports=function(a){var d,g,b,c,f,l;if(a&&a.length&&!this.descriptor.loadedImports)for(d=0,g=a.length;d<g;d++)if(b=a[d],f=e.base[b])for(c in f)this.descriptor[c]||(l=f[c],this.descriptor[c]=l,this.loadImports(e.base[b].imports))};a.config=f.Protobuf=a})(Annapurna);
Annapurna.Base64=function(f){EY_STR=f.__="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return{encode:function(a){for(var c=KEY_STR,e,h,d,g=a.length,k=0,f="";2<g;)e=a.charCodeAt(k++)&255,h=a.charCodeAt(k++)&255,d=a.charCodeAt(k++)&255,f+=c.charAt(e>>>2&63),f+=c.charAt((e&3)<<4|h>>>4),f+=c.charAt((h&15)<<2|d>>>6),f+=c.charAt(d&63),g-=3;g&&(e=a.charCodeAt(k++),f+=c.charAt(e>>>2&63),1==g?(f+=c.charAt((e&3)<<4),f+="="):(h=a.charCodeAt(k++),
f+=c.charAt((e&3)<<4|h>>>4),f+=c.charAt((h&15)<<2)),f+="=");return f},decode:function(b){for(var c=String,e="",h=0,d,g,k,f,n;h<b.length;)d=a(b,h++),g=a(b,h++),f=a(b,h++),n=a(b,h++),d=d<<2|g>>4,g=(g&15)<<4|f>>2,k=(f&3)<<6|n,e+=c.fromCharCode(d),64!=f&&(e+=c.fromCharCode(g)),64!=n&&(e+=c.fromCharCode(k));return e}}}(window);
(function(f,a,b){f.Dom={getWindowWidth:function(){return a.innerWidth||b.documentElement.clientWidth},getWindowHeight:})(Annapurna,window,document);
(function(f,a){function b(a){var b,d={target:a.target||a.srcElement,pageX:a.pageX||a.clientX,pageY:a.pageY||a.clientY};for(b in d)a[b]=d[b]}var c={bind:{},unbind:{}};f.addEvent=function(a,b,d){c.bind[b]?c.bind[b].call(c,a,b,d):c.on.call(c,a,b,d)};f.removeEvent=function(a,b,d){c.unbind[b]?c.unbind[b].call(c,a,b,d):c.off.call(c,a,b,d)};f.preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1;return a};c.on=function(e,h,d){c.on=a.addEventListener?function(d,a,b){d&&d.addEventListener(a,
b,!1)}:function(d,a,e){var c,h=a+e;d&&(d["e"+h]=e,d[h]=function(){c=window.event;b(c);d["e"+h](c)},d.attachEvent("on"+a,d[h]))};if(e&&h&&d)c.on(e,h,d)};c.off=function(e,c,d){this.off=a.addEventListener?function(d,a,b){d&&d.addEventListener(a,b,!1)}:function(d,a,e){var c,h=a+e;d&&(d["e"+h]=e,d[h]=function(){c=window.event;b(c);d["e"+h](c)},d.attachEvent("on"+a,d[h]))};e&&c&&d&&this.off(e,c,d)};c.bind.submit=function(b,c,d){var g=this;if(b&&("FORM"===b.nodeName||"onsubmit"in a.documentElement))g.on(b,
c,d);else g.on(a.body,"click",function(a){a=a.target;!a.form||"BUTTON"!==a.nodeName&&"INPUT"!==a.nodeName||(a=a.form,a.getAttribute("data-submit-event")||(a.setAttribute("data-submit-event","1"),g.on(a,c,d)))})}})(Annapurna,document);
(function(f){var a=function(){if(!(this instanceof a))return new a;this.hash={};this.setup()};f.implement(a,["getData","writeData","flushData"]);a.prototype.set=function(a,c){"undefined"!==typeof c&&this.hash&&(this.hash[a]=c,this.refresh());return this};a.prototype.get=function(a){if(this.hash&&(a=this.hash[a],"undefined"!==typeof a))return a};a.prototype.remove=function(a){this.hash&&this.hash[a]&&(delete this.hash[a],this.refresh())};a.prototype.flush=function(){this.flushData.call(this)};a.prototype.getFields=
a.prototype.hasFields=function(){return f.hasKeys(this.hash)};a.prototype.setup=function(){var a=this.getData();if(a&&""!==a){try{this.hash=JSON.parse(a)}catch(c){this.reset()}"object"===typeof this.hash||this.hasDefaultValues()||this.reset()}else this.reset()};a.prototype.reset=a.prototype.refresh=function(){"function"===typeof JSON.stringify&&this.writeData.call(this,JSON.stringify(this.hash),this.hash)};
a.prototype.setDefaultValues=function(){var a={},c;if(a=this.getDefaultValues()){for(c in a)this.hash[c]=a[c];this.refresh()}};a.prototype.hasDefaultValues=function(){var a,c=this.getDefaultValues();if(!c)return!0;for(a in c)if(this.hash[a])return!0};a.prototype.getDefaultValues=function(){};f.JSONDataFormatter=a})(Annapurna);
(function(f){var a=function(b,c,e){if(!(this instanceof a))return new a(b,c,e);this.cookie=f.Cookies(b);this.expire=c;this.domain=e;a.superclass.constructor.call(this)};f.extend(a,f.JSONDataFormatter);a.prototype.getData=a.prototype.flushData=a.prototype.writeData=function(a,c){f.hasKeys(c)&&this.cookie.write(a,this.expire,this.domain)};f.CookieStorage=a})(Annapurna);
(function(f,a){var b=function(){if(!(this instanceof b))return new b;b.superclass.constructor.call(this)};a.extend(b,a.JSONDataFormatter);b.prototype.getData=b.prototype.writeData=function(a){f.name=a};b.prototype.flushData=b.prototype.getDefaultValues=a.WindowStorage=b})(window,Annapurna);
(function(f){var a=function(a){if(!(this instanceof f.PB64))return new f.PB64(a);this.protobuf=f.Protobuf().setDescriptor(a)};a.prototype.encode=function(a,c){var e=this.protobuf.encode(a,c);return f.Base64.encode(e)};a.prototype.decode=function(a,c){var e=f.Base64.decode(c);return this.protobuf.decode(a,e)};a.prototype.addExtension=f.PB64=a})(Annapurna);
(function(f){var a={},b={},c=c.prototype.subscribe=function(c){var h;if(h=b[this.name])return c.apply(h.context,h.args);a[this.name]||(a[this.name]=[]);a[this.name].push(c)};c.prototype.publish=function(){var c=Array.prototype.slice.apply(arguments),h=c.shift(),d,g,k,f=[];if(a[this.name])for(d=0,g=a[this.name].length;d<g;d++)(k=a[this.name][d].apply(h,c))&&f.push(k);b[this.name]={context:h,args:c};if(f.length)return f};c.prototype.publishFns=
function(){Array.prototype.slice.apply(arguments).shift();var c,b,d=[];if(a[this.name])for(c=0,b=a[this.name].length;c<b;c++)d.push(a[this.name][c]);return d};c.prototype.unpublish=f.Observer=c})(Annapurna);
(function(f){var a=function(){};a.prototype={push:flush:function(a){var c,e;c=0;for(e=a.length;c<e;c++)this.fire(a[c])},fire:function(a){var c="fire"+f.string.capFirstLetter(typeof a);if(this[c])this[c](a)},fireFunction:function(a){a()}};f.Queue=a})(Annapurna);
(function(f,a){var b={},c={};b.getParam=function(e){if(!f.hasKeys(c)&&a.search){var b=a.search.slice(1).split("&"),d,g,k;d=0;for(g=b.length;d<g;d++)k=b[d].split("="),k[1]||(k[1]=!0),c[k[0]]=k[1]}if(e=c[e])return e};b.replaceParam=function(a,c,d){function g(d){var a=new RegExp("\\b"+c+"=[^&]*");return a.test(d)?d.replace(a,n):d+"&"+n}var b=a.indexOf("?"),f,n=c+"="+d;++b?(f=a.substr(0,b),d=a.indexOf("#",b),-1!=d?(f=b<d?f+g(a.substr(b,d)):f+n,f+=a.substr(d)):f=b<a.length?f+g(a.substr(b)):f+n):(d=a.indexOf("#"),
f=-1!=d?a.substr(0,d)+"?"+n+a.substr(d):a+"?"+n);return f};f.Url=b})(window.Annapurna,location);
Annapurna.Observer("storage").subscribe(function(f){function a(b){if(!(this instanceof a))return new a(b);a.superclass.constructor.call(this,b)}Annapurna.extend(a,f);a.prototype.getRecord=function(){return localStorage.getItem(this.record)};a.prototype.writeRecord=a.prototype.removeRecord=a.prototype.supportedFeature=function(){this.supportedFeature=function(){try{if(window.localStorage)return localStorage.setItem("foo",
"bar"),localStorage.removeItem("foo"),!0}catch(a){}return!1};return this.supportedFeature()};return a});
Annapurna.Observer("storage").subscribe(function(f){function a(c){if(!(this instanceof a))return new a(c);this.setupStorage();a.superclass.constructor.call(this,c)}var b=document;Annapurna.extend(a,f);a.prototype.setupStorage=function(){this.featureIsSupported(function(){var a;try{a=new ActiveXObject("htmlfile"),a.open(),a.write('<script>document.w=window\x3c/script><iframe src="/favicon.ico"></frame>'),a.close(),this.owner=a.w.frames[0].document,this.el=this.owner.createElement("div")}catch(e){this.el=
b.createElement("div"),this.owner=b.body}this.owner.appendChild(this.el);this.el.addBehavior("#default#userData")})};a.prototype.getRecord=function(){this.el||this.setupStorage();if(this.el)return this.el.load(this.record),this.el.getAttribute(this.record)};a.prototype.writeRecord=function(a){this.el||this.setupStorage();if(this.el)try{this.el.load(this.record),this.el.setAttribute(this.record,a),this.el.save(this.record)}catch(b){b.message&&/Permission denied/.test(b.message)}};a.prototype.removeRecord=
function(){this.el||this.setupStorage();this.el&&(this.el.removeAttribute(this.record),this.el.save(this.record))};a.prototype.supportedFeature=function(){this.supportedFeature=function(){if(b.documentElement.addBehavior)try{return b.documentElement.addBehavior}catch(a){return!1}};return this.supportedFeature()};return a});
Annapurna.Observer("storage").subscribe(function(f){function a(b){if(!(this instanceof a))return new a(b);var c;(c=document.getElementById("unsupported"))||(c=document.createElement("storage"),c.id="unsupported",document.getElementsByTagName("head")[0].appendChild(c));this.el=c;a.superclass.constructor.call(this,b)}Annapurna.extend(a,f);a.prototype.getRecord=a.prototype.writeRecord=a.prototype.removeRecord=a.prototype.getRecordName=a.prototype.supportedFeature=return a});
(function(f,a){function b(a){if(!(this instanceof b))return new b(a);this.record=a;b.superclass.constructor.call(this)}a.extend(b,a.JSONDataFormatter);b.prototype.getData=function(){var a;this.featureIsSupported(function(){a=this.getRecord.call(this)});return a};b.prototype.writeData=function(a){this.featureIsSupported(};b.prototype.flushData=function(){this.featureIsSupported(};b.prototype.featureIsSupported=a.implement(b,["getRecord","writeRecord","removeRecord","supportedFeature"]);a.Storage=function(c){var e=a.Observer("storage").publish(this,b),h,d,g=e.length;for(d=0;d<g;d++)if(h=e[d](c),h.supportedFeature())return h;a.error("No storage was supported for "+navigator.userAgent)}})(window,Annapurna);
(function(f){function a(d){if(!(this instanceof a))return new a(d);this.url=d;this.xhr=b();this.dataType="JSON";this.method="GET"}function b(){var a;e(;return a}function c(){var a=this.xhr;e(}function e(a,d){window.XMLHttpRequest?a():window.ActiveXObject&&d()}function h(a){a="format_"+a;if(d[a])return d[a].call(this)}var d={};a.prototype.dataType=function(a){this.dataType=
a;return this};a.prototype.method=function(a){this.method=a;return this};a.prototype.request=function(a){var d=this;d.xhr.onreadystatechange=function(){var c={},b={};4===d.xhr.readyState&&(200===d.xhr.status?c=h.call(d,d.dataType):(b.statusCode=d.xhr.status,b.statusText=d.xhr.statusText||""),a.call(d.xhr,b,c))};d.xhr.open(d.method,d.url,!0);c.call(d)};d.format_JSON=d.format_HTML=function(){return this.xhr.response};d.format_TEXT=
f.Ajax=a})(Annapurna);
(function(f){function a(c,b,h){if(!(this instanceof a))return new a(c,b,h);this.key=c;this.days=b;this.callback="";this.willRepeat=!0;this.storage=f.Storage("scheduler");this.hash=this.storage.get("hash")||{}}var b=[];a.prototype.repeat=function(a){this.willRepeat=a;return this};a.prototype.operation=function(a){this.callback=a;return this};a.prototype.execute=function(){var a=+new Date,b={};(b=this.hash[this.key])?b.e&&a>b.e&&(this.callback&&this.callback.call(this,b),this.willRepeat&&this.reset(a)):
this.reset(a)};a.prototype.reset=function(a){var e=a+864E5*this.days;this.hash[this.key]={c:a,d:this.days,e:e};b.push({t:e,n:this.key});this.storage.set("hash",this.hash)};a.cleanse=function(){var a=f.Storage("scheduler"),e=a.get("bookie")||[],h=a.get("hash")||{},d,g,k,v=+new Date,e=e.concat(b);d=0;for(g=e.length;d<g;d++)k=e[d],h[k.n]&&v>h[k.n].e&&delete h[k.n],v>k.t&&(e.splice(d,1),g=e.length,d--);a.set("bookie",e).set("hash",h)};f.Scheduler=a})(Annapurna);
(function(f,a,b){function c(){if(!k){var a,d,g=e();if(g)for(a=0,d=g.length;a<d;a++)g[a]();k=!0}}function e(){switch(typeof g){case "function":return g();case "object":return g}}function h(){e();g()?c():setTimeout(h,10)}ar g,k=!1;f.domReady=function(e){var k,f;g=e;"complete"===b.readyState&&h();if(b.addEventListener)b.addEventListener("DOMContentLoaded",c,!1),a.addEventListener("load",c,!1);else if(b.attachEvent){b.attachEvent("onreadystatechange",
c);a.attachEvent("onload",c);try{f=a.frameElement||null}catch(p){}document.documentElement.doScroll&&f&&d()}else k=a.onload,a.onload=function(){"function"===typeof k&&k();c()}}})(Annapurna,window,document);(function(f){f.Observer("fireWhenReady").subscribe(})(Annapurna);(function(f){var a={};f.register=function(b,c){a[b]||(a[b]=[]);a[b].push(c);f.Observer(b).publish(this,c)};f.initialize=function(b,c){c(};f.initialize("domReady",f.domReady)})(Annapurna);
(function(f){f.Redirector=function(a,b){function c(g,b,c){b(a.location.toString()||"null")&&(d=!0,h(g,function(d){c?c(d):a.location.replace(g)}))}function e(a){c(a,function(d){-1===a.indexOf("http")&&(a=b.protocol+"//"+b.host+a);if(d!==a)return!0})}function h(d,b){var c,e;c=a.referrer?a.referrer.toString():"null";f.K2&&f.K2.cookieDomain&&(e=f.K2.cookieDomain);Annapurna.Cookies("zfcReferrer").write(c,0,e);b(c)}var d=!1;return{parts:"",redirect:c,url:flush:function(a){var d,
b;d=0;for(b=a.length;d<b;d++)this.push(a[d])},push:function(a){var d=a.shift();this[d]&&"function"===typeof this[d]&&this[d].apply(this,a)},buildUrl:function(a){this.toPath(a.path).withParams(a.params).withHash(a.hash);e(this.parts);return this},withDomain:function(a){this.parts=/^http/.test(a)?a:"http://"+a;return this},toPath:withParams:function(a){var d,b=[];if(a){if("object"===typeof a){for(d in a)b.push(d+"="+encodeURIComponent(a[d]));a=b.join("&")}this.parts+=
"?"+a}return this},withHash:function(a){a&&(this.parts+="#"+a);return this},switchHost:function(a){c(a,function(d){if(b.hostname!=a)return!0},},isRedirecting:}(document,location)})(window);
(function(f,a){function b(a){var d=0;a&&(a=a.toString(),d=a.substring(0,a.length-3));return parseInt(d,10)}function c(a){var d=0;a&&(a=a.toString(),d=a.substring(a.length-3,a.length));return parseInt(d,10)}function e(a,d){var g={time:b(a),msec:c(a)};d&&(g.label=d);return g}f.ZFC&&"function"===typeof f.ZFC||(f.ZFC=ZFC=ZFC.prototype={initialize:function(a,d,g,b,c,e,f){this.pageGenTime=a;this.enterHeadTime=d;this.leaveBodyTime=null;this.upstreamLabel=g;this.upstreamHost=b;this.upstreamURI=
c;this.upstreamUUID=e;this.eventUrl=this.metadata=null;this.eventCounter=1;this.eventList=[];this.vars=[];this.uuid=f;this.checkPointList=[];this.errors=[];this.completed={};this.tests=[]},push:function(a){var d=a.shift();this[d]&&"function"===typeof this[d]?this[d].apply(this,a):Annapurna.error("No method is found for "+d+" from zfcAsync.")},setMetaData:function(a){this.metadata=a},setEventUrl:function(a){this.eventUrl=a},addFullEvent:function(a){this.eventList&&null!==a&&null!==a.type&&(a.timestamp=
(new Date).getTime(),this.eventList.push(a))},addEvent:function(a,d,g){this.eventList&&this.eventList.push({type:a,payload:d,metadata:g,timestamp:(new Date).getTime()})},addVar:function(a,d){var g={name:a};d&&(g.value=d);this.vars.push(g)},addCheckPoint:addError:leaveBody:getMember:function(a,d){var g;(g=this[a])&&d.call(this,g)},getMember:function(a,d){"undefined"!==
typeof this[a]&&d.call(this,this[a])},recordTest:function(a,d,g,b){g="undefined"!==typeof g?g:null;b="undefined"!==typeof b?b:null;this.tests.push({name:a,treatment:d.toUpperCase(),index:g,lastIndex:b});this.completed&&this.completed.tracker&&this.sendEvent()},getUUID:function(a){if(!this.uuid){var d=this.uuid=d()+d()+"-"+d()+"-"+d()+"-"+d()+"-"+d()+d()+d()}a&&a(this.uuid);return this.uuid},robot:function(){return navigator&&
navigator.userAgent&&navigator.userAgent.match(/googlebot|gomezagent/i)?1:0},tracker:function(b){var d=this,g,c,e;d.sendData(b,function(b){g=b;g.locationHref=location.href;g.upstreamLabel=d.upstreamLabel;g.upstreamHost=d.upstreamHost;g.upstreamUri=d.upstreamURI;screen&&(g.screenWidth=screen.width,g.screenHeight=screen.height,g.screenColorDepth=screen.colorDepth);a.referrer&&(g.documentReferrer=a.referrer);d.metadata&&(g.upstreamMetadata=d.metadata);if(c=Annapurna.WindowStorage().get("windowId"))g.windowId=
c;g.windowWidth=Annapurna.Dom.getWindowWidth();g.windowHeight=Annapurna.Dom.getWindowHeight();d.addTestList(g);d.vars&&d.vars.length&&(g.vars=d.vars);e=Annapurna.PB64(Protobuf.Messages.zfcTracker);Annapurna.Observer("tracker").publish(d,e,g);d.completed.tracker=!0;return e.encode("zfc.Tracker",g)},},onload:function(a,d,g){var k=this,f,n,l,p;k.sendData(a,function(a){l=a;l.upstreamUuid=k.upstreamUUID;l.upstreamHost=k.upstreamHost;l.upstreamUri=
k.upstreamURI;l.onloadTime=b(d);l.onloadMsec=c(d);l.pageGeneration=e(k.pageGenTime);l.enterHead=e(k.enterHeadTime);l.leaveBody=e(k.leaveBodyTime);l.onload=e(d);g&&(l.exited=1);if(k.checkPointList&&k.checkPointList.length){l.checkpoints=[];f=0;for(n=k.checkPointList.length;f<n;f++)l.checkpoints.push(k.checkPointList[f]);k.checkPointList=[]}if(k.errors&&k.errors.length){l.errors=[];f=0;for(n=k.errors.length;f<n;f++)l.errors.push(k.errors[f]);k.errors=[]}p=Annapurna.PB64(Protobuf.Messages.zfcOnload);
Annapurna.Observer("onload").publish(k,p,l);k.completed.onload=!0;return p.encode("zfc.Onload",l)})},sendEvent:function(a,d,b,c){a&&this.addEvent(a,d,b);this.sendEvents(c)},sendFullEvent:function(a,d){null!==a&&null!==a.type&&this.addFullEvent(a);this.sendEvents(d)},sendEvents:function(a){var d=this;null!==d.eventUrl&&d.eventList&&d.eventList.length&&d.sendData(d.eventUrl,function(a){a={uuid:d.getUUID(),counter:d.eventCounter++,events:d.eventList};d.eventList=[];d.addTestList(a);return Annapurna.PB64(Protobuf.Messages.zfcEvent).encode("zfc.EventBundle",
a)},a)},createWindowId:function(a){var d=Annapurna.WindowStorage();d.get("windowId")||d.set("windowId",a)},sendData:function(a,d,g){if(!this.robot()){var e={},e={uuid:this.getUUID(),pageGenerationTime:b(this.pageGenTime),pageGenerationMsec:c(this.pageGenTime),enterHeadTime:b(this.enterHeadTime),enterHeadMsec:c(this.enterHeadTime)};this.leaveBodyTime&&(e.leaveBodyTime=b(this.leaveBodyTime),e.leaveBodyMsec=c(this.leaveBodyTime));Annapurna.firePixel(a,d.call(this,e),g)}},addTestList:function(a){this.tests.length&&
(a.hydra=this.tests,this.tests=[])}})})(window,document);
(function(f){var a=Protobuf.Messages.zfcCookie,b=function(){if(!(this instanceof b))return new b;this.cookie=Annapurna.Cookies("zfc");this.pb64=Annapurna.PB64(a);this.hash=this.getClientData()};b.prototype={getClientData:function(){var a;(a=this.cookie.read())?a=this.decode(a):(a={session:{timestamp:+new Date,connection:1E13*Math.random(),timestamp2:+new Date},tests:[]},this.encodeAndSet(a));return a},get:function(a){var b;if(this.hash&&(b=this.hash[a]))return b},set:function(a,b){this.hash&&a&&b&&
(this.hash[a]=b,this.encodeAndSet(this.hash))},encodeAndSet:function(a){a=this.pb64.encode("zfc.Cookie",a);this.cookie.write(a,10950,f.K2.cookieDomain)},decode:;f.ZFCClient=b})(window);(function(f){var a=ZFCClient().get("session"),b=+new Date(1E13<=a.timestamp2?a.timestamp2/1E3:1E13<=a.timestamp?a.timestamp/1E3:a.timestamp),c=(new Date).setHours(0,0,0,0);f.ZFCSession={isNewVisitor:isReturningVisitor:})(window);
(function(f){window.ZFCGeo={parse:function(){var a,b,c,e={};if(a=Annapurna.Cookies("geo").read()){a=a.split("/")||[];b=0;for(c=a.length;b<c;b++)e[this.zones[b]]=a[b]||"";return e}},zones:["country","state","dma","city"]}})(window);
(function(f,a){function b(a){for(var b=Math.random(),c=0,e=0,f=a.length;e<f;e++)if(c+=a[e].chance,b<c)return e;return 0}function c(a){return function(){f["hydraTest_"+a.name]=a.index}}function e(a){var b;a.callback?(b=h.VariantUtils(a.assignment),a.callback.apply(b,a.args||[])):console.error("The callback property must be included when executing a setup. Value of setup",a)}var h=function(a){this.tests=a;this.zfcClient=ZFCClient();this.assignments=this.zfcClient.get("tests")||[];this.replacements=
{};this.redirects=[];this.classNames=[];this.setups=[];this.geoTests=[];this.reassigned={};this.init()};h.prototype={init:push:function(a){var b=a.shift();this[b]&&"function"===typeof this[b]&&this[b].apply(this,a)},geo:function(a,b){Annapurna.Observer("hydra:geo:"+a).subscribe(},addTest:function(a){var b;this.runTest(a)&&(this.executeTestProcess("post",a),this.zfcClient.set("tests",
this.assignments),this.executeRedirects(),b=Annapurna.lastElement(this.setups),e(b),Annapurna.inArray(a.name,this.geoTests)&&this.publishGeoTest(a.name))},retireTest:function(a){var b,c,e,f={};b=0;for(c=this.assignments.length;b<c;b++)f[this.assignments[b].name]=1;if("string"===typeof a)e=a,f[e]&&(this.removeAssignment(e),this.zfcClient.set("tests",this.assignments));else for(b=0,c=a.length;b<c;b++)e=a[b],f[e]&&(this.removeAssignment(e),this.zfcClient.set("tests",this.assignments))},flush:setupRfh:function(){var a=Annapurna.Cookies("rfh"),b=a.read(),c,e,h;if(b){h=b.split(",");b=0;for(c=h.length;b<c;b++)if(e=h[b].split(":"),2===e.length){var l=e[1]|0;0<=l&&16>l&&(this.replacements[e[0]]=l,e=this.getAssignment(e[0]))&&(e.index=l)}a.write("",-1,f.K2.cookieDomain)}},setupTests:function(){var a,b;if(this.tests){a=0;for(b=this.tests.length;a<b;a++)this.runTest(this.tests[a]);this.executePostTests();this.zfcClient.set("tests",this.assignments);this.executeRedirects();
this.executeTests();this.executeGeoTests()}},runTest:function(a){var b,c;b=!(a.excludeUrl&&zfcUPU.match(new RegExp(a.excludeUrl)))&&(!a.url||zfcUPU.match(new RegExp(a.url)));if(a.variants)a:{c=a.variants;var e=c.length,f,h;for(h=0;h<e;h++)if((f=c[h].redirect)&&"param"===f){c=!0;break a}c=!1}else c=!1;this.executePreTest(a);this.activateDeferredTest(a);if(b||c){this.createWeightedTest(a);c=this.activateAssignOperation(a,b);if("undefined"!==typeof c)return c;this.activatePercentageTest(a,b);return!0}},
executePreTest:executePostTests:function(){var a,b;a=0;for(b=this.tests.length;a<b;a++)this.executeTestProcess("post",this.tests[a])},executeTestProcess:function(a,b){if(b[a]&&"function"===typeof b[a])b[a](b)},activateAssignOperation:function(a,b){var c,e,f,l=!0;if(a.assign&&"function"===typeof a.assign)return e=this.determineAssignment(a),f=h.Storage.create(a.name),c=h.AssignUtils(a,e),(c=a.assign.call(c,f))?(a.url&&!b&&(l=!1),c.geo&&!this.matchGeo(a,
c)&&(this.removeAssignment(a.name),l=!1),l&&(this.activateTest(e,a.timestamp),f="run"+Annapurna.string.capFirstLetter(typeof c)+"AssignTest",this[f]&&"function"===typeof this[f]&&this[f].call(this,c,e,a))):e.active||this.removeAssignment(a.name),l},runBooleanAssignTest:function(a,b,c){this.setupTestPhase(c,b);this.addPageTestTreatment(c,b);this.setupActiveVariant(c,b)},runStringAssignTest:function(a,b,c){c[a]&&"function"===typeof c[a]?(b.segment=a,this.setups.push({callback:c[a],assignment:b})):console.error("when returning assign as a string, the returned value must appear in the test Object and be a function.")},
runObjectAssignTest:function(a,c,e){var f=a.args||[],h;a.callback&&"string"===typeof a.callback&&e[a.callback]&&"function"===typeof e[a.callback]?(c.segment=a.callback,h=e[a.callback],this.setups.push({callback:h,args:f,assignment:c})):a.test&&"string"===typeof a.test&&(e.tests&&e.tests[a.test]||e[a.test])&&(e.tests&&e.tests[a.test]?e.variants=e.tests[a.test]:e[a.test]&&(e.variants=e[a.test]),c.segment=a.test,!c.index&&e.variants&&(c.index=b(e.variants)));"number"===typeof a.chance&&this.setupChanceTestPhase(a,
e,c);this.setupTestPhase(e,c);this.addPageTestTreatment(e,c);this.setupActiveVariant(e,c,f)},activatePercentageTest:function(a,b){var c=this.determineAssignment(a);this.setupTestPhase(a,c);b&&(this.addPageTestTreatment(a,c),this.activateTest(c,a.timestamp),this.setupActiveVariant(a,c))},activateDeferredTest:function(a){if(a.defer&&"function"===typeof a.defer){var b=this,c=f.onload,e,n,l,p;f.onload=function(){"function"===typeof c&&c();e=h.Storage.create(a.name);n=h.Operator(b,a,e);l=n.getAssignment();
p=h.DeferUtils(a,l);a.defer.call(p,n,e);return!0}}},removeAssignment:function(a){var b,c,e;b=0;for(c=this.assignments.length;b<c;b++)e=this.assignments[b],e.name===a&&(this.assignments.splice(b,1),c=this.assignments.length,b--)},setupActiveVariant:function(a,b,e){var f;e=e||[];a.variants&&(f=a.variants[b.index],a=Annapurna.lastElement(a.variants),f&&(f.setup?this.setups.push({callback:f.setup,args:e,assignment:b}):f.redirect?(b.redirect=f.redirect,"domain"===f.redirect&&(b.domain=f.domain),this.redirects.push(b)):
!a.setup&&a.chance&&(e=c(b),this.setups.push({callback:e,assignment:b}))))},activateTest:function(a,b){a.active=1;b&&(a.timestamp=+new Date)},executeRedirects:function(){if(this.redirects.length){var d=this.zfcTestRedirect(a.location.toString());rq.push(["url",d])}},executeTests:function(){for(var a=0,b=this.setups.length;a<b;a++)e(this.setups[a])},executeGeoTests:function(){var a,b;if(this.geoTests&&(b=this.geoTests.length))for(a=0;a<b;a++)this.publishGeoTest(this.geoTests[a])},setupClickTransition:function(){var a=
this,b=f.onload;f.onload=function(){"function"===typeof b&&b();a.bindClickTransition()}},bindClickTransition:function(){var d=this;Annapurna.addEvent(a.body,"click",function(a){var b,c,e,f,h;for(a=a.target;a&&"A"!==a.tagName;)a=a.parentNode;if((h=a)&&"A"===h.tagName&&d.tests){d.redirects=[];a=0;for(b=d.tests.length;a<b;a++)(c=d.tests[a])&&c.name&&(e=d.getAssignment(c.name))&&(f=c.variants[e.index||0])&&f.redirect&&"domain"!=f.redirect&&(h.href&&h.href.match(new RegExp(c.url||null))||h.className&&
h.className.match(new RegExp(c.className||null)))&&(e.redirect=f.redirect,d.redirects.push(e));d.redirects.length&&(h.href=d.zfcTestRedirect(h.href))}})},getAssignment:zfcTestRedirect:function(d){var b=this.zfcTestsURL();var c=b.domain;if(d&&c){var e=a.location;if(e.protocol.match(/https/)||e.host.match(/secure-/))c="secure-"+c;d=d.replace(/:\/\/[^:\/]+/,"://"+c)}b=(b=b.param)?
Annapurna.Url.replaceParam(d,f.K2.hydra.testParam,encodeURIComponent(decodeURIComponent(b))):d;return b},zfcTestsURL:function(){var a,b,c,e=[],f=null;a=0;for(b=this.redirects.length;a<b;a++)c=this.redirects[a],c.domain?f=c.domain:"param"==c.redirect&&e.push(c.name+":"+c.index);return{domain:f,param:e.join(",")}},setupChanceTestPhase:function(a,b,c){var e,f,h=b.variants;if(e=h.length)for(b=0;b<e;b++)if(f=h[b],f.chance&&"function"===typeof f.chance){if(f.chance(a.chance)){c.index!==b&&(c.index=b);c.ignorePhase=
!0;break}}else console.error("[hydra] When returning a property of chance, the group must have a chance property and it must be a function.");else console.error("[hydra] At least on variant is required when doing a custom chance test.")},publishGeoTest:function(a){var b=this.getAssignment(a);Annapurna.Observer("hydra:geo:"+a).publish(this,b)},matchGeo:function(a,b){if(b.geo&&"object"===typeof b.geo){var c=this,e,f,h,p,q,t,u,r=ZFCGeo.parse();if(r){q=ZFCGeo.zones;u=b.geo;e=0;for(f=q.length;e<f;e++)if(h=
q[e],p=u[h])if("string"===typeof p&&p===r[h])t=!0;else if("object"===typeof p&&Annapurna.inArray(r[h],p))t=!0;else if(u.strict){t=!1;break}if(t)return c.geoTests.push(a.name),!0}else Annapurna.Observer("tracker:onload").subscribe(}},setupTestPhase:function(a,c,e){a.phase&&this.reassigned[a.name]?(c.phase=a.phase,c.ignorePhase||(c.index=b(a.variants)),this.replacements[a.name]&&(this.assignments.index=this.replacements[a.name])):a.phase||(a.phase=1)},determineAssignment:function(a){var c=
this.getAssignment(a.name);c?a.phase>c.phase&&(this.reassigned[a.name]={lastIndex:c.index}):(c={name:a.name,phase:a.phase},a.variants&&a.variants.length&&(a.variants[0].chance||0===a.variants[0].chance)&&(c.index=b(a.variants)),c.inital=!0,this.assignments.push(c),this.replacements[a.name]&&(this.assignments.index=this.replacements[a.name]));return c},createWeightedTest:function(a){var b,c;if(!a.variants&&a.weights&&a.weights.length){a.variants=[];b=0;for(c=a.weights.length;b<c;b++)a.variants.push({chance:a.weights[b]});
delete a.weights}},addTestTreatment:function(a,b,c){var e,f=b.index,h;this.reassigned[b.name]?(e="reassigned",h=this.reassigned[b.name].lastIndex):e=b.inital?"assigned":"applied";c.call(this,a.name,e.toUpperCase(),f,h)},addPageTestTreatment:function(a,b){this.addTestTreatment(a,b,function(a,c,d,e){b.active&&window.zfc&&zfc.push(["recordTest",a,c,d,e])})}};f.Hydra=h})(window,document);
(function(f){f.Utils={getTest:function(a){var b,c,e=ZFCClient().get("tests");b=0;for(c=e.length;b<c;b++)if(e[b].name==a)return e[b]},updateRedirectParams:function(a,b,c){var e,f,d=[],g,k;e="";if(-1!==a.indexOf(window.K2.hydra.testParam)){if(a=a.match(new RegExp(window.K2.hydra.testParam+"=([^&]+)"))||[],a[1]){e=decodeURIComponent(a[1]);g=e.split(",");e=0;for(a=g.length;e<a;e++)f=g[e].split(":"),f[0]==b?(d.push(this.appendTest(f[0],c)),k=!0):d.push(g[e]);k||d.push(this.appendTest(b,c));e=d.join(",")}}else e=
this.appendTest(b,c);return e},appendTest:getTestParams:function(a,b,c){a=a||window.hydraTests;c=c||{encode:!1};var e,f,d,g={},k=[],v=ZFCClient().get("tests");e=0;for(f=a.length;e<f;e++)g[a[e].name]=a[e];e=0;for(f=v.length;e<f;e++)a=v[e],g[a.name]&&g[a.name].variants&&a.active&&(d=g[a.name].variants,d[0]&&d[0].redirect&&"param"===d[0].redirect&&(!b||b&&g[a.name].url&&(new RegExp(g[a.name].url)).test(b))&&k.push(this.appendTest(a.name,a.index)));return k.length?(b=k.join(","),
c.encode&&(b=encodeURIComponent(b)),window.K2.hydra.testParam+"="+b):null}}})(window.Hydra||{});
(function(f){function a(b,c){if(!(this instanceof a))return new a(b,c);this.test=b;this.assignment=c}a.prototype.isMobile=a.prototype.assignToCustomer=function(){var a=Annapurna.CookieStorage("holmes",0,window.K2.cookieDomain).get("customerId");if(a)return a%100};a.prototype.setupTrystAssignment=function(){var a=Annapurna.CookieStorage("holmes",0,window.K2.cookieDomain),c=Annapurna.CookieStorage("watson",0,window.K2.cookieDomain),a=
a.get(this.test.name);this.assignment.index!==a&&("number"===typeof a?this.assignment.index=a:(a=c.get(this.test.name),"number"===typeof a?this.assignment.index=a:c.set(this.test.name,this.assignment.index)));return this.assignment.ignorePhase=!0};f.AssignUtils=a})(window.Hydra||{});
(function(f,a,b){.prototype={redirect:function(a){rq.push(["url",a])},switchHost:;b.VariantUtils=c})(window,document,window.Hydra||{});
(function(f){function a(b,c){if(!(this instanceof a))return new a(b,c);this.test=b;this.assignment=c}a.prototype={submitSearch:function(a){Annapurna.addEvent(document.getElementById("globalSearch"),"submit",function(c){var e=c.target[1];e&&e.value&&a.call(this,c,e)})}};f.DeferUtils=a})(window.Hydra||{});
Annapurna.Observer("hydra:operator").subscribe(function(f){function a(){}Annapurna.extend(a,f);a.prototype.register=a.prototype.preactivate=function(a){var c=this,e;Hydra.Storage.append(c.test.name);c.hydra.setupTestPhase(c.test,c.assignment);c.recordAssignments();e=c.getVariantContext();a.call(e,};a.prototype.deactivate=function(){delete this.assignment.active;this.refreshTests()};
a.prototype.activate=function(a){this.hydra.setupTestPhase(this.test,this.assignment);this.finalize(a)};a.prototype.finalize=function(a){var c=this.getVariantContext();Hydra.Storage.append(this.test.name);this.hydra.activateTest(this.assignment);this.recordAssignments();a&&a.call(c)};return a});
Annapurna.Observer("hydra:operator").subscribe(function(f){function a(){}Annapurna.extend(a,f);a.prototype.register=function(){this.addOperation("submit");this.addOperation("submit:action",this.action);this.addOperation("submit:field",this.field)};a.prototype.submit=function(a,c,e){this.proxy(a,[c,e])};a.prototype.action=function(a,c){var e=this,f=typeof a,d;e.submitEvent(document.body,function(g){function k(a){var b=e.hydra.assignment,c=d.getAttribute("action"),b=Hydra.Utils.updateRedirectParams(c,
b.name,b.index);d.action=Annapurna.Url.replaceParam(c,window.K2.hydra.testParam,encodeURIComponent(b));a&&a()}d=g.target;if("string"===f&&d.id==a||"object"===f&&Annapurna.inArray(d.id,a))c?c.call(e.getVariantContext(e.hydra.assignment),g,k):k()})};a.prototype.field=function(a,c){var e=typeof a,f,d;if("string"===e)(d=document.getElementById(a))&&this.injectHiddenField(d,c);else if("object"===e)for(e=0,f=a.length;e<f;e++)(d=document.getElementById(a[e]))&&this.injectHiddenField(d,c)};a.prototype.injectHiddenField=
function(a,c){var e=this;e.on("preactivate",function(f){var d,g=this.assignment,k=window.K2.hydra.testParam,v=k+"-"+a.id;(d=document.getElementById(v))?d.value=Hydra.Utils.updateRedirectParams(d.value,g.name,g.index):(d=document.createElement("input"),d.type="hidden",d.id=v,d.name=k,d.value=Hydra.Utils.appendTest(g.name,g.index),a.appendChild(d));e.submitEvent(a,function(a){c?c.call(e.getVariantContext(),a,f):f()})})};a.prototype.submitEvent=return a});
Annapurna.Observer("hydra:operator").subscribe(function(f){nnapurna.extend(a,f);a.prototype.register=a.prototype.click=a.prototype.anchor=function(a){function c(a,b){e.on("activate",function(){var c,f;if(c=a.getAttribute("href"))f=Hydra.Utils.updateRedirectParams(c,this.assignment.name,this.assignment.index),c=Annapurna.Url.replaceParam(c,window.K2.hydra.testParam,encodeURIComponent(f)),
a.href=c,b&&b.call(e.getVariantContext())})}var e=this;e.clickEvent(};a.prototype.clickEvent=return a});
(function(f){function a(){this.hydra={};this.test={};this.assignment={};this.operationList=[];this.operations={}}function b(a,e){if(!(this instanceof b))return new b(a,e);this.hydra=a;this.test=e;this.assignment=a.determineAssignment(e);this.operations={}}Annapurna.implement(["register"]);a.prototype.init=function(a,b,f,d){this.hydra||(this.hydra=a,this.test=b,this.assignment=f,this.operations=d);return this};a.prototype.addOperation=function(a,b){this.operationList||(this.operationList=[]);this.operationList.push({name:a,
context:this,callback:b||this[a]})};a.prototype.consumeOperations=a.prototype.concatOperations=function(a){var b,f,d;if(this.operationList&&(f=this.operationList.length))for(b=0;b<f;b++)d=this.operationList[b],a[d.name]=d;return a};a.prototype.on=function(a){var b,f,d;d=Array.prototype.slice.apply(arguments);d.shift();(b=this.operations[a])?(f=b.callback)&&"function"===typeof f?(b.context.init(this.hydra,this.test,this.assignment,this.operations),f.apply(b.context,
d)):Annapurna.error("[operator] No callback was specific for the action "+a):Annapurna.error("[operator] [operator] No instance was found under the action "+a)};a.prototype.proxy=function(a,b){this[a]&&"function"===typeof this[a]&&this[a].apply(this,b)};a.prototype.recordAssignments=a.prototype.getVariantContext=b.prototype.on=function(b){var e,f,d,g,k={};g=Annapurna.Observer("hydra:operator").publish(window,
a);e=0;for(f=g.length;e<f;e++)d=new g[e],k=d.consumeOperations().concatOperations(k);d.init(this.hydra,this.test,this.assignment,k);d.on.apply(d,arguments)};b.prototype.getAssignment=f.Operator=b})(window.Hydra||{});
(function(f){ar b={},c;b.scheduler=function(){Annapurna.Scheduler("hydra",7).operation(function(b){var c,d,f={};d=ZFCClient().get("tests");var k=a().get("storage");if(d)for(b=0,c=d.length;b<c;b++)f[d[b].name]=1;if(k)for(b=0,c=k.length;b<c;b++)d=k[b],f[d]||(Annapurna.Storage(d).flush(),k.splice(b,1),a().set("storage",k),c=k.length,b--)}).execute()};b.append=function(c){var f=b.create(c),d=a().get("storage")||[];!Annapurna.inArray(c,d)&&f.hasFields()&&
(d.push(c),a().set("storage",d))};b.create=f.Storage=b})(window.Hydra||{});
(function(f){function a(){Annapurna.Observer("tracker:onload").subscribe(function(){var a=f.zfcXDHost,c=Annapurna.WindowStorage().get("windowId"),e=f.zfcUUID;a&&e&&c===e&&(a=location.protocol+"//"+a+"/xd.cgi",Annapurna.firePixel(a,"uuid="+e))})}Annapurna.register("fireWhenReady",function(){Annapurna.Protobuf.config({extensions:Protobuf.Extensions,base:Protobuf.Messages});a();if(f.todo){var b=todo;todo=new Annapurna.Queue;todo.flush(b)}if(f.zfc){b=zfc;zfc=new ZFC;for(var c=0,e=b.length;c<e;c++)zfc.push(b[c]);
f.zfcBackup=zfc}f.rq&&(b=f.rq.list||[],f.rq=Redirector,f.rq.flush(b));f.rq.isRedirecting()||(b=[],f.hq&&f.hq.list&&f.hq.list.length&&(b=f.hq.list),f.hq=new Hydra(f.hydraTests),f.hq.flush(b))})})(window);
