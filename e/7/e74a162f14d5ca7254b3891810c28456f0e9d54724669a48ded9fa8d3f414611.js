(this["webpackJsonpbot-widget-r2"]=this["webpackJsonpbot-widget-r2"]||[]).push([[0],{135:function(e,t,n){"use strict";var a=n(167),i=n(801),o=(n(800),n(365)),r=n(46),s=n(206),l=n(453),c=n(454),d=n(366),u=Object(i.a)({appState:r.a,launchDarklyFlags:l.a,botConfig:s.b,messages:d.b,mbus:c.a}),p=[o.a];var m=Object(a.a)({reducer:u,middleware:p,devTools:!1});t.a=m},143:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var a=n(198),i=n.n(a);function o(){var e={context:{orgId:"a2936b6900ba0fe2",botName:"magfast-demo",procEngine:"v2",appId:"DCTEST2",autoScroll:"yes",showChatMessageTimeStamps:"no",previewText:"\ud83d\udc4b Hi there! How can I help you?",escapeHatchText:"Don't see the right option? Click here",agentAvatar:"https://static.deepconverse.com/shared/icons/chatbot_icon-blue.png",headerLogo:"https://static.deepconverse.com/shared/icons/chatbot_icon-blue.png",headerText:"Support Bot",chatBtnLogo:"https://static.deepconverse.com/shared/icons/chatbot_icon-blue.png",botType:"extended",enabled:!0,stylesheets:"",audioBotInit:"no",policyDocUrl:"",audioMaximize:"no",audioMinimize:"no",showPredictions:"no",triggerFunction:'/** Emit event botWidgetInit to initialize**/\ndocument.dispatchEvent(new CustomEvent("botWidgetInit", {"detail": {}}));',additionalFeatures:{},visibilityShowSettings:"yes",enableChasitorSneakPeek:"no",visibilityShowAgentHandover:"no",visibilityShowChatEndButton:"no",visibilityShowFullScreenToggle:"no",visibilityShowLauncherPreview:"yes",visibilityShowMaximizeIcon:"no",logThreshold:1},visibility:{showPredictions:"no",showLauncherPreview:"yes",closeBotOnEnd:"no",showChatEndButton:"yes"},theme:{agentBgColor:"#f6f6f6",primaryColor:"#000000",agentTextColor:"#000000",chatBtnBgColor:"#fff",chasitorBgColor:"#318f00",chatAreaBgImage:"url()",chatBtnLogoWidth:"80px",chasitorTextColor:"#ffffff",chatBtnLogoHeight:"80px",chatBtnLogoMargin:"-10px 0px 0px -10px",chatAreaBgImageUrl:""},channelId:i()(),translations:{}};return e.context.url=window.location.href,e.isLocalStorageAllowed=r()||!1,e.context.hostedPageEvents={},e.context.draft=!0,e.context.locale="en_us",e}function r(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}}function s(){try{return sessionStorage.setItem("test","test"),sessionStorage.removeItem("test"),!0}catch(e){return!1}}},144:function(e,t,n){"use strict";(function(e){var a,i;a=window,i=function(){return [function(e,t,n){function a(e,t){var n={},a={},i=o=r=c=c.preventDefault=function(){this.returnValue=!1},c.stopPropagation=var d={fire:on:un:unextendEvents:;if(t)return d;for(var u in d)d.hasOwnProperty(u)&&(e[u]=d[u]);return s.bugs.leaksMemory&&s.bugs.leaksMemory((),e} s=n(2),l={extend:a,body:a(document.body,!0),window:a(window,!0),document:a(document,!0),runAfterScriptReady:function(e){i(0,e)},runAfterFirstChildReady:function(e){i(1,e)},runAfterDomReady:;l.extend(l);var c=0,d=[[],[],[],[]];!),function(){var e;if(s.isSafari)e=window.setInterval((,20);else if(document.addEventListener)/loaded|complete/i.test(document.readyState)?r():document.addEventListener("DOMContentLoaded",r,!1);else if(s.isIE){window.attachEvent("onload",r);var t=document.createElement("document:ready");e=window.setInterval((function(){if(/loaded|complete/i.test(document.readyState))t=null,window.clearInterval(e),r();else{try{t.doScroll("left")}catch(e){return}t=null,window.clearInterval(e),r()}}),200)}}(),e.exports=l},function(e,t,n){function a(){var t,n,a=navigator,r=a.userAgent.toLowerCase(),s=+(/trident.*rv:? *([0-9]+)/.exec(r)||[])[1]||!1,l=),c=8===l,d=7===l,u=6===l,p=!!window.opera&&"[object Opera]"===Object.prototype.toString.call(window.opera),m=r.indexOf("edge")>-1,h="Google Inc."===a.vendor,f="Apple Computer, Inc."===a.vendor,g=!m&&!l&&!p&&(h||f||/webkit|khtml/.test(r)),v=+/\d+/.exec(/firefox\/\d+/i.exec(a.userAgent)||""),b=-1!==r.indexOf("iphone"),y=-1!==r.indexOf("ipod"),w=-1!==r.indexOf("ipad"),E=b||w||y,_=-1!==r.indexOf("android"),O=-1!==r.indexOf("wp7"),C=E||_||O,S=(l?"msie":v&&"firefox")||p&&"opera"||h&&"chrome"||f&&"safari",k="CSS1Compat"===document.compatMode,x=!k,T=l&&x&&document.documentElement&&!!document.documentElement.style.setExpression,j=document.documentMode||l,N=-1!==r.indexOf("windows")||-1!==r.indexOf("win32"),I=-1!==r.indexOf("macintosh")||-1!==r.indexOf("mac os x"),A="https:"===document.location.protocol,D=a.language||a.browserLanguage||a.userLanguage||a.systemLanguage,M={noBoxSizing:j<=7,ie:{cssBottomRight:u,cssFixed:u||T,buggyCSS:u||T}},L="textContent"in document.createElement("div"),$=!1,P=null;try{window.CustomEvent&&/\[native code\]|\[object CustomEventConstructor\]/.test(window.CustomEvent.toString())&&(new window.CustomEvent("testevent",{bubbles:!1,cancelable:!0,detail:!0}),$=!0,P=window.CustomEvent)}catch(e){}switch(S){case"msie":case"firefox":case"chrome":n=+/\d+/.exec(new RegExp(S+"[ /]\\d+").exec(r)||"");break;default:n=+/\d+/.exec(/version[ \/]\d+/.exec(r)||"")}var B=!1;try{var R={get passive(){B=!0}},F=function(){};window.addEventListener("test",F,R),window.removeEventListener("test",F,R)}catch(e){B=!1}if(u){var U=[];M.leaksMemory=M.leaksMemory.remove=window.attachEvent("onunload",()}return{browser:S,version:n,isStrict:k,isQuirks:x,isOpera:p,isSafari:f,isWebKit:g,isChrome:h,isAndroid:_,isIPhone:b,isIPod:y,isIPad:w,isIOS:E,isWP7:O,isMobile:C,isNewIE:s,isEdge:m,isIE:l,isIE6:u,isIE7:d,isIE8:c,isFF:v,isCustomEvents:$,CustomEvent:P,engineIE:j,bugs:M,isWindows:N,isMac:I,isSecure:A,secureURL:hasFlash:),hasJava:function(){var e=a.mimeTypes;return l?!O&&"javaEnabled"in a&&a.javaEnabled():e&&(e=e["application/x-java-vm"])&&(e=e.enabledPlugin)?e.name:void 0}(),language:D,getScrollbarSize:getWindowClientHeight:function(){if(void 0!==window.innerHeight)return window.innerHeight;if(document.documentElement)return document.documentElement.offsetHeight;var e=document.getElementsByTagName("body");return e.length?e[0].clientHeight:0},getWindowClientWidth:isTextContent:L,hasPassiveListeners:B}}var i=n(23),o=n(1),r=a();r.sniffBrowser=a,e.exports=r},function(e,t,n){ar i=n(1),o=n(4),r=n(2),s=n(46),l=n(21),c=function(){for(var e=),t=[/\/?[?]/,/\/livechat\//],n=[],a=0;a<t.length&&!(n=e.split(t[a])).length;a++);var i=n[1],o=n[0],r=/^(https?:)?\/\/[^\/]+/.exec(o),s=o.replace(/^(https?:)?\/\//i,"").split("/")[0],l=s.replace(/(.+\.)(?=.+\..+)/,""),c=n[0].split("/");return{accountKey:i,brandDomain:l,baseURL:c=c.pop()==s?n[0]:c.join("/"),rootURL:r=r&&"zopim.com"!==s?r[0]:"https://v2.zopim.com"}}(),d="https://v2.zopim.com/widget",u=d+"/images",p=s.map([".zopim.com",".zopim.org",".zdch.at",".zd-dev.com",".bre-zd.com"],l.escape),m=new RegExp("^[a-z][a-z0-9_-]*(\\.[a-z][a-z0-9_-]*)*("+p.join("|")+")(:\\d+)?$","i"),h=/^([a-z][a-z0-9_-]*)(:\d+)?$/i;i(o.baseURL,!0)&&(o.baseURL=r.secureURL(c.baseURL));var f={ASSETS_URL:d,IMAGES_URL:u,SOUNDS_URL:"https://v2.zopim.com/widget/sounds",FONTS_URL:"https://v2.zopim.com/widget/fonts",ASSETS_LEGACY:document.location.protocol+"//cdn.zopim.com/assets",BRANDING_URL:"https://www.zopim.com",AVATARS:{CONCIERGE:u+"/avatar_simple_agent.png",AGENT:u+"/avatar_simple_agent.png",VISITOR:u+"/avatar_simple_visitor.png",DEFAULT:u+"/avatar_simple_visitor.png"},ACCOUNT_KEY:c.accountKey,BRAND_DOMAIN:c.brandDomain,COUNTRY_CODE:function(){var e='\x3c!--# echo var="http_cf_ipcountry" default="geo" --\x3e'.toUpperCase();return"<"==e.charAt(0)&&(e="geo"),e}(),AUTH_URL:"https://www.zopim.com/auth/$NAME/$KEY-$MID",AUTH_LOGOUT_URL:"https://www.zopim.com/auth/logout/$KEY-$MID",AUTH_SERVER_URL:a(),IS_POPOUT:window.$zopim_popout,POPOUT_WINDOW_PREFIX:"zlivechatpopout_",POPOUT_URL:c.rootURL+"/widget/livechat.html",CALLBACK_FILE_UPLOAD_PATH:"/client/widget/upload",FILE_UPLOAD_PATH:"/client/widget/uploads",FILE_UPLOAD_MAX:20971520,RESEND_MSG_TIMEOUT:5e3,FILE_REPLACE_SOURCE:/^(\s*https?\:\/\/v2(?:assets|uploads)\.zopim\.)com(\/)/i,FILE_REPLACE_RESULT:"$1io$2",CHAT_LOG_REMEMBER_COUNT:10,getAuthServerURL:a,getMediatorHost:;e.exports=f},function(e,t){e.exports=function(e){return"function"==typeof e}},function(e,t,n){ar i,o=n(2),r=n(1),s=n(11),l=n(16),c=n(3),d="-webkit- -moz- -o- -ms- ".split(" "),u="webkit Moz O ms ".split(" "),p=["transition","MozTransition","OTransition","WebkitTransition"],m=["transitionend","transitionend","otransitionend","webkitTransitionEnd"],h=["animationend","animationend","oanimationend","webkitAnimationEnd"],f={contains:function(){var e=document.documentElement;return e.compareDocumentPosition?e.contains?(),onTransitionEnd:a(!0,m),unTransitionEnd:a(!1,m),onAnimationEnd:a(!0,h),unAnimationEnd:a(!1,h),css_prefixes:d,cssom_prefixes:u,isStyleSupported:function(){var e=document.createElement("div").style;return (),pick:shallowExtend:fullyExtend:fullyDelete:computedHeightBoxSizingBug:getComputedHeight:hoverFix:getEffectiveTLD:function(e){for(var t=e.split("."),n="."+t.splice(t.length-2,2).join(".");t.length;){var a={domain:n,path:"/"};if(l.set("zte2095","1",a),"1"==l.get("zte2095")){l.remove("zte2095",a);break}n="."+t.pop()+n}return n},descendsObj:insertObj:getValueByReference:isDefaultName:function(e){return g.test(e)},getKeys:supportsDataURI:isIE:o.isIE||/Trident\//.test(window.navigator.userAgent),pad:formatMinutesAsHours:function(e,t){ar a=s("<hours>:<minutes>"),i=s("<hours>:<minutes> am"),o=s("<hours>:<minutes> pm"),r="24"===t?24:12,l=Math[e>0?"floor":"ceil"](e/60),r),c=f.pad(Math.abs(e)%60,2);if(24===r)return n(f.pad(l,2),c,a);var d=0===l?12:l;return Math.abs(e/60)%24<12?n(d,c,i):n(d,c,o)},replaceFileHostname:getLastLogEntries:writeNode:isAgentNick:function(e){return v.test(e)},refocusActiveElement:warnBadEmbed:getAuthLoginUrl:function(e,t,n){return c.AUTH_URL.replace("$NAME",e).replace("$KEY",t).replace("$MID",n)}},g=/^Visitor [0-9]{3,}$/,v=/^agent:[0-9]+/i;e.exports=f},function(e,t,n){r o=n(7),r=/^(1|on|true)$/i,s={boolean:!1,integer:0,float:0,string:""},l=null;a._initSingleton=a.buildQuery=a.parseQuery=a.getHash=var c=a.prototype;c.add=c.has=c.getLast=c.getFirst=c.getAt=c.getRaw=c.get=c.getLast,c.toString=e.exports=a},function(e,t,n){ r=n(1),s=n(7),l=!r(window)&&window.JSON||{parse:function(e){var t,n,a,i,r,s=e.match(u),l=s.length,c=s[0];"{"==c?(t={},r=1):"["==c?(t=[],r=1):(t=[],r=0,n=!0);var d=[t];for(l=s.length;r<l;++r)switch((c=s[r]).charCodeAt(0)){case 91:i=d[0],d.unshift(i[a||i.length]=[]),a=void 0;break;case 93:d.shift();break;case 123:i=d[0],d.unshift(i[a||i.length]={}),a=void 0;break;case 125:d.shift();break;case 102:(i=d[0])[a||i.length]=!1,a=void 0;break;case 110:(i=d[0])[a||i.length]=null,a=void 0;break;case 116:(i=d[0])[a||i.length]=!0,a=void 0;break;case 34:if(-1!==(c=c.substring(1,c.length-1)).indexOf(f)&&(c=c.replace(p,o)),i=d[0],void 0==a){if(!(i instanceof Array)){a=c||h;break}a=i.length}i[a]=c,a=void 0;break;default:(i=d[0])[a||i.length]=+c,a=void 0}if(n){if(1==d.length)return t[0]}else if(!d.length)return t;throw"error"},stringify:function e(t){switch(typeof t){case"string":return a(t);case"number":return isFinite(t)?t.toString():"null";case"boolean":return String(t);case"object":if(!t)return"null";var n,i,o=[];if(s(t)){for(n=0,i=t.length;n<i;n++)o[n]=e(t[n])||"null";return"["+o.join(",")+"]"}var r,l,c=[];for(r in t)t.hasOwnProperty(r)&&c.push(r);for(c.sort(),n=0,i=c.length;n<i;n++)(l=e(t[r=c[n]]))&&o.push(a(r)+":"+l);if(o.length)return"{"+o.join(",")+"}"}}},c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,d={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","\\":"\\\\",'"':'\\"'},u=new RegExp('(?:false|true|null|[\\{\\}\\[\\]]|(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)|(?:"(?:[^\\0-\\x08\\x0a-\\x1f"\\\\]|\\\\(?:["/\\\\bfnrt]|u[0-9A-Fa-f]{4}))*"))',"g"),p=new RegExp("\\\\(?:([^u])|u(.{4}))","g"),m={'"':'"',"/":"/","\\":"\\",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},h=new String(""),f="\\";e.exports=l},function(e,t,n){unction i(){unction t(e,t){var a,o=new i;for(var r in m[n._]=o,n)if(n.hasOwnProperty(r)){if("string"!=typeof(a=n[r]))continue;a=a[e].apply(a,t),o.add(r,a)}return o}for(var n={},a=[],r={add:bind:function(e){o(e,r)},onTranslate:function(e){a.push(e)},toJSON:function(){return e()},toString:e,update:,s=["concat","replace","toLowerCase","toUpperCase"],l=0;l<s.length;l++)r[s[l]]=s[l]);return r}c=n(2),d=n(4),u=n(19),p=n(43),m=[],h="_",f=[],g=[],v=[],b=c.isTextContent,y=/^ar|^fa|^he|^ur/;a.bind=o,a.flip=a.onLanguage=function(e){v.push(e)},a.unLanguage=a.update=a.unbind=a.rtl=s,a.findClosestLanguage=r,a.loadDefaultStrings=l,l(),e.exports=a},function(e,t,n){var a,i,o,r=n(12),s=n(9),l=n(8),c=n(3),d={authenticate:isAuthenticated:function(){return!!i},getSiteJWTFunc:function(){return a},retrieveIDToken:function(e){i?+new Date-i.issued_at>=i.expires_in-6e4?d.authenticate((function(t){t?(o&&o.$("visitor").$("auth_status$string").update("failed"),e(t,null)):e(null,i.id_token)})):e(null,i.id_token):e(null,null)},clearIdentity:setOverrideHost:setSiteJWTFunc:function(e){a=e},setDataNode:function(e){o=e},exchangeToken:,u="format error",p="network/security error",m="jwt verification error",h=c.AUTH_SERVER_URL;e.exports=d},function(e,t,n){ r,s,l=n(38),c=n(8),d=n(37),u=n(16),p=n(3),m=n(6),h=48e4,f=p.ACCOUNT_KEY,g="__zlcstore",v="__zlcmid",b="__zlcpomid",y="__zlcprivacy",w={init:DOM:{saveVariable:getVariable:function(e){var t=d.get(g)||{};if(!t[f])return{};var n=t[f];return n.timestamp?+new Date-n.timestamp>h?{}:n[e]:n[e]||{}}},Cookie:u,clearAll:setIdentity:getIdentity:function(){return p.IS_POPOUT?u.get(b)||c().get("mid"):)||u.get(v)||""},clearIdentity:a,clearAllowCookieLaw:getAllowCookieLaw:setAllowCookieLaw:i};e.exports=w},function(e,t,n){r o=n(7),r=n(9),s=window.Error,l={any:equal:obj:type:ok:chain:function(e){return e},regex:minLength:maxLength:array:each:predicate:,c=Object.keys(l),d=a.prototype;c.forEach((),d.validate=d.validateAndThrow=d.validateAndLog=e.exports=a,i.prototype=Object.create(s.prototype),i.prototype.name="ValidationError"},function(e,t,n){unction i(e){var t;return window.zendeskOverrides&&window.zendeskOverrides.getLocalStorage&&(t=a(e)&&window.zendeskOverrides.getLocalStorage()[e]),a(e)&&(t||)[e])||null}function o(e,t,n){if(window.zendeskOverrides&&window.zendeskOverrides.setLocalStorage)window.zendeskOverrides.setLocalStorage(e,t);else{n=n||{};var a=l(e)+"="+l(t);if("ttl"in n){var i=new Date,o=24*n.ttl*60*60*1e3;i.setTime(i.getTime()+o),a+="; expires="+i.toGMTString()}"path"in n&&(a+="; path="+n.path),"domain"in n&&(a+="; domain="+n.domain),n.secure&&(a+="; secure"),a+="; SameSite="+(n.samesite||"Lax"),d.document.cookie=a}}var r=n(10),s={set:o,get:i,getJSONCookie:setJSONCookie:remove:setActivityWindow:,l=window.encodeURIComponent,c=window.decodeURIComponent,d=window;e.exports=s},function(e,t,n){r o,r=n(23),s=n(0),l=100,c=[];a.tick=i,e.exports=a},function(e,t,n){ar i=n(0),o=n(17);a.prototype.setScope=var r=/[&<>"']/g;a.prototype.load=function(e){if(/^(?:https?:)?\/\//i.test(e)){e=function(e){return e&&e.replace(r,()}(e);try{this.doc.open(),this.win.$Loader=this.$Loader,this.win.$Loader.scope=this.scope||{},this.doc.write('<html><head><script src="'+e+'"><\/script><script>document.addEventListener && document.addEventListener("DOMContentLoaded", function() {try { $Loader.cleanup() } catch(e) {}})<\/script></head><body></body></html>'),this.doc.close()}catch(e){this.$Loader.cleanup()}}else this.$Loader.cleanup()},a.prototype.destroy=e.exports=a},function(e,t){var n={debounceExceptFirst:function(e,t){ar a,i,o,r,s=!0;return ,debounce:function(e,t){ar a,i,o;return ,throttle:function(e,t){ar a,i,o,r=0;return ,queue:function(e,t){ar a,i=[],o=[],r=0;return };e.exports=n},function(e,t){e.exports=function(e){return"number"==typeof e}},function(e,t,n){ar i=n(5),o={ok:a,isFunction:log:function(){}};e.exports=o},function(e,t){unction a(e){e&&"resume"==e.socket_status$string&&(r=setTimeout(a,1e3));var t=function(){var e=+new Date,t=l.getValue(),n=c.getValue(),a=d.getValue(),i=u.getValue(),o=p.getValue(),r=m.getValue();if((n||t||a)&&"disconnecting"!==a){if("break"==n){if(g.indexOf(t)>-1)return"closed";if("disconnected"===a)return"closed"}return(null===n||"reconnect"==n||"resume"==n&&e-i>=1e3)&&"reattached"===t&&o<=r?"connected":"connecting"}}();t&&t!==s&&(o.update({friendly_connection_status$string:t}),s=t)}var i,o,r,s,l,c,d,u,p,m,h,f,g=["idle_disconnect","shutdown","error"],v={init:reset:destroy:n,getConnectionClosedReason:;e.exports=v},function(e,t,n){ar i,o=n(0),r=n(20),s={init:,l=3e5;e.exports=s},function(e,t){var n=Array.prototype.indexOf;"function"==typeof n&&/\[native code\]/.test(n.toString())||(n=,e.exports=,function(e,t,n){var a=n(11),i=n(27),o=n(1),r=a("File size too large. Maximum limit is <size>."),s=a("The file you are trying to send is not supported."),l=a("File sending is temporarily disabled. Please try again later."),c=a("<size> bytes"),d=a("<size> KB"),u=a("<size> MB"),p={ERR_SIZE:"TOO_LARGE",ERR_FORMAT:"ILLEGAL_TYPE",ERR_DISABLED:"FILE_UPLOADS_TEMPORARILY_DISABLED"},m=/^(x-|vnd\.)/i,h=["png","jpg","jpeg","gif","txt","pdf"],f={},g=a("Failed to send. Please try again.");f[p.ERR_SIZE]=r,f[p.ERR_FORMAT]=s,f[p.ERR_DISABLED]=l,p.prettySize=function(){var e=[c,d,u],t=[0,1,2];return (),p.prettyType=p.isValidType=p.prettyError=p.blobToFile=p.getExtension=e.exports=p},function(e,t,n){ar i,o,r,s=n(12),l=n(17),c=n(9),d=n(3),u=n(28),p=n(8),m=n(6),h={TOO_LARGE:"EXCEED_SIZE_LIMIT",ILLEGAL_TYPE:"INVALID_EXTENSION",NO_SESSION:"INTERNAL_ERROR",UNEXPECTED_ERROR:"INTERNAL_ERROR",UNABLE_TO_GET_SETTINGS:"INTERNAL_ERROR",S3_UPLOAD_ERROR:"INTERNAL_ERROR",NO_GATES:"INTERNAL_ERROR",FILE_UPLOADS_DISABLED:"NOT_ALLOWED",FILE_UPLOADS_TEMPORARILY_DISABLED:"INVALID_PLAN"},f={FILE_SENDING_ERRORS:{NOT_SUPPORTED:"NOT_SUPPORTED",NOT_ALLOWED:"NOT_ALLOWED",CONN_ERROR:"CONN_ERROR",INVALID_EXTENSION:"INVALID_EXTENSION",INVALID_PLAN:"INVALID_PLAN",EXCEED_SIZE_LIMIT:"EXCEED_SIZE_LIMIT",INTERNAL_ERROR:"INTERNAL_ERROR",UNKNOWN_ERROR:"UNKNOWN_ERROR"},init:sendChatMsg:sendFiles:sendFileWithCallback:function(e,t){var n=f._validateAndPrepareData([e]);if(t=c.once(t),s(n))l(();else{var i=o.registerCallback((),r="https://"+n.host+d.CALLBACK_FILE_UPLOAD_PATH,u={ts:parseInt(o.getServerTime().toFixed(0),10),__messageID:i,__socketID:o.getSocketID()},p={"X-Zopim-MID":n.mid,"X-Zopim-UID":n.uid},h={error:load:;f._uploadFiles(n.form_data,r,u,p,h)}},clearChatDepartmentID:_validateAndPrepareData:_uploadFiles:;e.exports=f},function(e,t,n){ar i=n(0),o=a;a.protocol="xdds";var r=n(18);a.prototype.process_data=a.prototype.send=a.prototype.abort=var s=function(){};e.exports=o},function(e,t){ar a=window.WebSocket||window.MozWebSocket,i=a?n:null;n.prototype.abort=n.prototype.send=n.protocol="ws",e.exports=i},function(e,t,n){function a(e){ar n,a,i,o=this,s=this.iframe=function(e){var t=document.createElement(e),n=t.style;return n.position="absolute",n.width=n.height=0,n.overflow="hidden",t}("iframe");this.url="https://"+e,s.src=this.src=n=this.url+["c",+new Date].join("/"),a=n.match(/https?:\/\/[^\/]+/)[0],s.onload=function(e){o.abort(e)},document.body.insertBefore(s,document.body.firstChild),r("SPM connecting to: "+this.url),window.addEventListener("message",t,!1),this.remove_listeners=var i=n(2),o=window.postMessage?!i.isAndroid&&a:null;a.protocol="spm",a.prototype.send=a.prototype.abort=var r=function(){};e.exports=o},function(e,t,n){function a(e){ar n,a=this.xhr=new o,r=this,c="",d=0;this.url=s+e,a.open("GET",this.url+["c",+new Date].join("/"),!0),a.onerror=function(e){r.abort(e)},i.isIE?(a.onprogress=a.onload=:a.onreadystatechange=l("CXHR connecting to: "+this.url),a.send()}var i=n(2),o=i.isIE?window.XDomainRequest:!i.isOpera&&!i.isAndroid&&window.XMLHttpRequest,r=o?a:null,s=i.isIE?"//":"https://";a.protocol="cxhr",a.prototype.send=function(e){r a,r=this.url+["d",+new Date].join("/"),s=new o,l=this;return s.open("POST",r,!0),s.send(e),i.isIE?(s.onerror=t,s.onload=n):s.onreadystatechange=a=setTimeout(t,5e3),this.xhr_sender=s,!1},a.prototype.abort=var l=function(){};e.exports=r},function(e,t,n){=n(0),c=n(10),d=n(34),u=n(33),p=n(32),m=n(31),h=p||d||u||m,f=m,g={INITIAL_RTT:1e3,RECONNECT_DELAY_MS:3e4,FAST_RECONNECT_MS:100,FLUSH_DELAY_MS:75,MAX_BLOCKING_TIME_MS:40,MAX_NO_WORK_TIME_MS:15,PREFERRED_PROVIDER:void 0};a.providers={},[d,u,p,m].forEach((),a.available=a.generateID=function(){return i(16)},a.prototype.connect=a.prototype.reconnect=a.prototype.send=a.prototype.close=a.prototype.hibernate=function(){},a.prototype.onoffline=a.prototype.ononline=function(){this.debug("ononline"),"disconnected"==this.status||this.connected||(this.reconnect_timer=clearTimeout(this.reconnect_timer),this.connect())},a.prototype.schedule_flush=a.prototype.flush=a.prototype.keep_alive=a.prototype.response_timeout=a.prototype.reset_server_timeout=a.prototype.fire_break=a.prototype.fire_resume=a.prototype.onmessage=a.prototype._onclose=a.prototype._ondrain=a.prototype._onerror=a.prototype.generate_frame=var v=Math.pow(50,.1),b=Math.pow(1e3,.1)-v;a.prototype.calculate_clocks=a.prototype.check_sequence=h&&(a.prototype.transport=h.protocol),a.prototype.debug=window.zendeskOverrides&&window.zendeskOverrides.debug||function(){};var y="+-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";a.genDate=a.genID=i,r.prototype.add=var w=s.prototype;w.queueFrame=w.process=w.work=e.exports=a},function(e,t,n){r o,r=n(10),s={},l=window,c=l.document,d="localStorage";if(s.disabled=!1,s.set=function(){},s.get=function(){},s.remove=function(){},s.clear=function(){},s.transact=s.getAll=function(){},s.serialize=function(e){return r.stringify(e)},s.deserialize=))o=l[d],s.set=function(e,t){var n=s.serialize(t);if(!window.zendeskOverrides||!window.zendeskOverrides.setLocalStorage)return void 0===t?s.remove(e):(o.setItem(e,n),t);window.zendeskOverrides.setLocalStorage(e,n)},s.get=function(e){var t;return t=window.zendeskOverrides&&window.zendeskOverrides.getLocalStorage?i(e)&&window.zendeskOverrides.getLocalStorage()[e]:o.getItem(e),s.deserialize(t)},s.remove=function(e){o.removeItem(e)},s.clear=function(){o.clear()},s.getAll=else if(c.documentElement.addBehavior){var u,p;try{(p=new window.ActiveXObject("htmlfile")).open(),p.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>'),p.close(),u=p.w.frames[0].document,o=u.createElement("div")}catch(e){o=c.createElement("div"),u=c.body}var m=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g");s.set=a((),s.get=a((),s.remove=a((),s.clear=a((),s.getAll=a(()}try{s.set("__storejs__","__storejs__"),"__storejs__"!=s.get("__storejs__")&&(s.disabled=!0),s.remove("__storejs__")}catch(e){s.disabled=!0}s.enabled=!s.disabled;var h=s;e.exports=h},function(e,t,n){unction i(e){if((ae="reattached"==e)&&(j.update({client_reattached_timestamp$int:+new Date}),w()),ae&&!1===C&&N&&T.$("livechat").$("profile").write({disconnect_timeout$int:E(N.rtt)}),"idle_disconnect"==e||"shutdown"==e||"error"==e){var t=T.$("livechat").$("account").$("status$string").getValue(),n=T.$("connection").$("backoff"),a=n.$("active$int").getValue()||0,i=n.$("max_seconds$int").getValue();"invalid_account_key"==t?X.warnBadEmbed():"widget_v2"==U&&"shutdown"==e&&a&&i&&function(e){window.clearTimeout(ce.reconnectTimer),ce.reconnectTimer=window.setTimeout((function(){ce.reconnect()}),1e3*e)}(i),c()}v()} m(){j.update({socket_status$string:"break"})}x,T,j,N,I,A,D,M,L,$,P,B,R,F,U,G,z,H,q=n(5),V=n(4),W=n(1),K=n(0),Y=n(3),Q=n(14),J=n(13),X=n(6),Z=n(36),ee=n(35),te=n(30),ne={FLUSH_DELAY_MS:0,RECONNECT_DELAY_MS:1e4},ae=!1,ie=[],oe=[],re=!1,se=0,le={},ce=K.extend({init:function(e){F=e.isCookieDenied,I=Y.getMediatorHost(e.overrideProxy),U=e.source,G=e.source_ver,z=e.gd_compatible,k=e.activity_window||window,x=k.document,T=e.root,D=T.$("tmp").$("api_settings"),M=T.$("tmp").$("server_settings"),L=T.$("livechat").$("settings").$("cached$bool"),j=T.$("connection"),$=j.$("server_retired$bool"),(B=j.$("server_ready$bool")).bindValue(s),$.bindValue(r),(A=T.$("livechat").$("ui").$("mockup$bool").getValue())?j.$("status$string").update("reattached"):(T.$("livechat").$("profile").bindValue(o),j.$("status$string").bindValue(i),j.$("socket_status$string").bindValue(v),T.bindWrite(w),j.$("reconnect$bool").bindValue(d),window.__z_sdk?C=!0:(C=!1,"visibilityState"in document&&"prerender"==document.visibilityState?document.addEventListener("visibilitychange",a):ce.connect()))},send:l,connect:function(){N||S||((N=function(e){return H||new ee(e,"W",null,ne)}(I)).on("break",m),N.on("message",p),N.on("reopen",f),N.on("resume",h),N.on("open",u))},reconnect:clientDisconnect:_,destroy:O,disconnect:function(){j.update({status$string:"idle_disconnect"})},getConnectionStats:function(){return Z.getConnectionStats(N)},getHost:function(){return I},getServerTime:function(){return Z.getServerTime(N)},getServerSettings:reconnectIfServerRetired:registerCallback:y,getSocketID:getDCTimeoutValue:E,setSocket:reset:O});e.exports=ce},function(e,t,n){ar i=n(0),o=n(18);a.prototype.onError=e.exports=a},function(e,t,n){r o=n(19),r=n(4),s=n(42),l=[],c=/^function *\( *\) *{ *([\s\S]*) *}$/;a.ensureLoaded=a.prototype.ensureLoaded=a.prototype.ifLoaded=a.prototype.load=function(){ar t,n,a=this.getDependencies();for(t=0;t<a.length;t++)(n=a[t]).loader||(n.loader=new s(r.baseURL+"/lib/"+r.build_number+"/"+n.fqname+".js",o,e))},a.prototype.getDependencies=a.prototype.ready=o.Module=a,e.exports=a},function(e,t,n){r o=n(7),r=n(5),s={shuffle:function(e,t){return t?function(e,t){var n,i,o,r,s,l=e.concat();for(t=a(e,t),e.length=0,s=0,n=t.length;n--;)s+=t[n];for(o=Math.random()*s,r=0,n=0;l.length;)r+=t[n],o<=r?(s-=t[n],i=l.splice(n,1)[0],t.splice(n,1),e.push(i),o=Math.random()*s,r=0,n=0):n++;return e}(e,t):function(e){for(var t,n,a=e.length;a>1;)t=Math.floor(a--*Math.random()),n=e[t],e[t]=e[a],e[a]=n;return e}(e)},random_index:function(e,t){if(!e||e.length<=0)return-1;if(!t)return Math.floor(Math.random()*e.length);var n,i=0;for(n=(t=a(e,t)).length;n--;)i+=t[n];var o=Math.random()*i,r=0,s=t.length;for(n=0;n<s-1;n++)if(o<=(r+=t[n]))return n;return n},map:i};e.exports=s},function(e,t){prototype.fqname=n.prototype.path=n.prototype._getOrCreateChildNode=n.prototype.descend=n.prototype.$$=n.prototype.descend,n.prototype.$=n.prototype.update=n.prototype.replace=n.prototype.undeleteParents=n.prototype.write=n.prototype.bindWrite=n.prototype.getValueListeners=function(){return this.listeners_value||(this.listeners_value=[]),this.listeners_value},n.prototype.getWriteListeners=function(){return this.listeners_write||(this.listeners_write=[]),this.listeners_write},n.prototype.getKeysListeners=n.prototype.bindValue=function(e){this.getValueListeners().push(e);try{e.call(this,this.getValue())}catch(e){}},n.prototype.bindKeys=function(e){if(!this.leaf){this.getKeysListeners().push(e);try{e.call(this,this.getKeys(),[])}catch(e){}}},n.prototype.unbindValue=n.prototype.unbindKeys=n.prototype.on=function(e,t){switch(e){case"value":this.bindValue(t);break;case"keys":this.bindKeys(t)}},n.prototype.un=n.prototype.notifyListeners=n.prototype.notifyWriteListeners=n.prototype.getValue=n.prototype.hasKey=n.prototype.getKeys=n.prototype.gc=n.DataNode=n,e.exports=n},function(e,t){var n=a=i={equal:n,clone:function e(t){if("object"!=typeof t||!t)return t;var n={};for(var a in t)t.hasOwnProperty(a)&&(n[a]=e(t[a]));return n},extend:;e.exports=i},function(e,t,n){function a(e,t,n,a){switch(T=t,j=n,N=a,ae.init(j,N),h("connection_update","tmp.friendly_connection_status$string",we),h("account_status","livechat.account.status$string",v(ye)),h("visitor_update","livechat.profile",function(e,t){return (["email$string","phone$string","display_name$string"],i)),h("department_update","livechat.departments",w(["name$string","status$string"],r)),h("agent_update","livechat.agents",w(["avatar_path$string","display_name$string","title$string"],d)),h("chat","livechat.channel.log",b(xe)),h("chat","livechat.agents",b(Se)),h("chat","livechat.triggers.agents",b(ke)),h("chat","livechat.channel.queue_position$int",g),h("history","livechat.history.log",b(xe)),h("chat","livechat.channel.last_read",b(Te)),A=function(e){window.zendeskOverrides&&window.zendeskOverrides.sdkEventTarget&&window.zendeskOverrides.sdkEventTarget.dispatchEvent(new CustomEvent("low_level_message",{detail:e})),(e.path?N.descend(e.path):N).update(e.update)},T.on("message",A),D=e.suppress_console_error||!1,te.init(e.activity_window),te.DOM.getVariable("account_status")){case"invalid_account_key":W.warnBadEmbed();case"banned":return}T.init({root:j,overrideProxy:e.override_proxy,isCookieDenied:source:le,lastHost:te.DOM.getVariable("web_sdk_last_host"),source_ver:L.release_tag,activity_window:e.activity_window,gd_compatible:1}),j.$("connection").$("server$string").bindValue((function(e){e&&te.DOM.saveVariable("web_sdk_last_host",e)})),N.$("livechat").$("account").$("status$string").bindValue((),X.init(j,T),ne.init(j,e.activity_window),re=!0} p(e){if(!e.type$string)return null;if(!e.nick$string)return null;var t={nick:u(e.nick$string),type:e.type$string},n=e.msg$string;switch(e.first$bool&&(t.first=e.first$bool),e.type$string){case"chat.msg":if("attachment"in e){if(!0===e.unverified$bool)return null;var a,i=e.attachment,o={mime_type:i.mime_type$string,name:i.name$string,size:i.size$int,url:i.url$string};return"metadata"in i&&(a=i.metadata,o.metadata={width:a.width$int,height:a.height$int}),"deleted$bool"in i&&(o.deleted=i.deleted$bool),U.extend(t,{type:"chat.file",display_name:e.display_name$string,attachment:o})}if("structured_msg"in e){var r=function e(t){if(!t||"object"!=typeof t)return t;var n={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var i=E(a),o=e(t[a]);n[i]=o}return n}(e.structured_msg);!function e(t,n){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(-1!==n.indexOf(a)&&(t[a]=y(t[a],()),"object"==typeof t[a]&&e(t[a],n))}(r,["items","buttons","quick_replies"]);var s=Q.validate(r);s?_(s,'Unsupported structured message in "chat.msg" event'):t.structured_msg=r}return U.extend(t,{display_name:e.display_name$string,msg:n,options:e.options$string?e.options$string.split("/"):[]});case"chat.rating":return U.extend(t,{display_name:e.display_name$string,new_rating:e.new_rating$string,rating:e.rating$string});case"chat.comment":return U.extend(t,{display_name:e.display_name$string,comment:e.comment$string,new_comment:e.new_comment$string});case"chat.memberleave":return U.extend(t,{display_name:e.display_name$string});case"chat.memberjoin":case"chat.request.rating":return U.extend(t,{display_name:e.display_name$string});case"chat.event":var l;return"agent:system"===e.nick$string&&(l=/Please wait while our agents attend to you. There are currently (\d+) visitor\(s\) waiting to be served\./.exec(n))?{type:"chat.wait_queue",nick:"system.queue",wait_queue:parseInt(l[1],10)}:null;case"chat.join":var c=e.history;if(c&&c[0]){var d=U.extend({},c[0]),m=d.timestamp$int;return d.type$string=d.__type$string,d.display_name$string=d.name$string,m*=1e3,d.timestamp$int=m,p(d)}return null;case"chat.file.update":default:return null}},M=n(2),L=n(4),$=n(0),P=n(22),B=n(1),R=n(12),F=n(5),U=n(48),G=n(47),z=n(21),H=n(20),q=n(3),V=n(45),W=n(6),K=n(15),Y=n(41),Q=n(40),J=n(39),X=n(29),Z=n(26),ee=n(13),te=n(14),ne=n(25),ae=n(24),ie={init:function(e){if(I&&se.un("data",I),I=se.on("data",I),re)_(new Error("Zendesk Chat Web SDK has already been initialized. Please ensure that zChat.init() is only called once in your code"),"init");else if(M.isIE<=10)_(new Error("The current browser you are on is not supported by the Web SDK. Please refer to the documentation to learn about the system requirements for Zendesk Chat."),"init");else if(!O([de.obj({account_key:de.type("string").ok(),suppress_console_error:de.type("boolean"),override_auth_server_host:de.type("string").ok(),override_proxy:de.type("string").ok(),authentication:de.obj({jwt_fn:de.type("function").ok()},{requiredKeys:["jwt_fn"]}),activity_window:de.type("object").chain(ge),popout:de.type("boolean")},{requiredKeys:["account_key"]})],[e],"init")){var t=new G("root"),n=new G("root"),i={livechat:{settings:U.clone(Z.livechat.settings)}};t.update(i),n.update(i),V()&&t.$("livechat").$("ui").$("mobile$bool").update(!0),q.ACCOUNT_KEY=e.account_key,e.authentication?(ee.setOverrideHost(e.override_auth_server_host),ee.setSiteJWTFunc(e.authentication.jwt_fn),ee.setDataNode(t),ee.authenticate(()):a(e,J,t,n)}},reconnect:getFirehose:setVisitorInfo:getVisitorInfo:i,setVisitorDefaultDepartment:getVisitorDefaultDepartment:getAllDepartments:getDepartment:o,clearVisitorDefaultDepartment:addTag:function(e,t){s("added$string",e,"addTag",t)},removeTag:function(e,t){s("removed$string",e,"removeTag",t)},addTags:function(e,t){l("added$string",e,"addTags",t)},removeTags:sendChatMsg:sendFile:sendVisitorPath:sendChatComment:sendChatRating:function(e,t){O([de.any([de.equal(null),de.equal("good"),de.equal("bad")]),he],[e,t],"sendChatRating")||(t=t||ce,j.$("livechat").$("channel").write({rating$string:e},k(t)))},getChatInfo:endChat:isChatting:c,getServingAgentsInfo:sendOfflineMsg:sendTyping:H.debounceExceptFirst((,300),sendEmailTranscript:function(e,t){var n=de.type("string").regex(z.email),a=!!N.$("livechat").$("channel").$("log").getKeys().length;O([n,he],[e,t],"sendEmailTranscript")||(t=t||ce,N.$("livechat").$("channel").$("chatting$bool").getValue()?j.$("livechat").$("channel").write({email_transcript$string:e},k(t)):ee.isAuthenticated()||a?j.$("livechat").$("channel").write({email_last_transcript$string:e},k(t)):_(new Error("There were no past chat to send a transcript of"),"sendEmailTranscript"))},getChatLog:getConnectionStatus:getAccountStatus:getOperatingHours:function(){var e=N.$("livechat"),t=e.$("settings"),n=t.$("operating_hours");if(t.hasKey("operating_hours")){var a=n.$("type$string").getValue(),i={enabled:n.$("enabled$bool").getValue(),type:a,timezone:t.$("timezone$string").getValue()||"UTC"};if("account"==a)i.account_schedule=function(e){for(var t,n,a={},i=0;i<7;i++){var o=e[i]||{};if(o.enabled$bool){for(var r in t=[],n=o.periods)Object.prototype.hasOwnProperty.call(n,r)&&t.push({start:n[r].start$int,end:n[r].end$int});a[i]=x(t)}else a[i]=[]}return a}(n.$("schedule").getValue()||{});else if("department"==a){var o=e.$("dg_mappings").getValue(),r=function(e,t){var n,a={},i=function(e){var t,n,a={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){if(n=e[i],Object.prototype.hasOwnProperty.call(n,"deleted_ts$int"))continue;if(!n.departments)continue;if(!n.enabled$bool)continue;t={};for(var o=0;o<7;o++){var r=n[o],s=[];if(r.enabled$bool&&r.periods){var l=r.periods;for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&s.push({start:l[c].start$int,end:l[c].end$int});s.length&&(t[o]=s)}}Object.keys(t).length&&(a[i]=t)}return a}(e),o=e,t);return t.forEach((function(e){var t=o[e];for(a[e]={},n=0;n<7;n++)a[e][n]=[];for(t.forEach((),n=0;n<7;n++){var r=a[e][n];r.length>1&&(a[e][n]=x(r))}})),a}(n.$("schedules").getValue(),e.$("departments").getKeys());e.$("account").$("departments_migrated$bool").getValue()&&o&&(r=Object.keys(r).reduce((,{})),i.department_schedule=r}return i}},getQueuePosition:fetchChatHistory:function(e){if(!O([he],[e],"fetchChatHistory"))if(ee.isAuthenticated()){var t=N.$("livechat").$("history"),n=j.$("livechat").$("history"),a=n.$("in_progress$bool").getValue(),i=t.$("has_more$bool").getValue(),o=t.$("cursor$string").getValue();a?_(new Error("Previous fetching of history is still in progress"),"fetchChatHistory"):!1!==i?(e=e||ce,n.$("in_progress$bool").update(!0),n.write({cursor$string:o||""},k(e))):_(new Error("No more history to load"),"fetchChatHistory")}else _(new Error("This API is not available for unauthenticated visitors"),"fetchChatHistory")},markAsRead:H.throttle((,2e3),logout:function(e){O([he],[e],"logout")||(ee.isAuthenticated()?function(e){T.destroy(),se.un("data",I),ae.destroy(),T.un("message",A),I=null,A=null,D=void 0,ee.clearIdentity(),te.clearIdentity(),re=!1,e&&setTimeout(()}(e):_(new Error("This API is only applicable for authenticated visitors"),"logout"))},EMAIL_REGEX:z.email},oe=$.extend(ie),re=!1,se=$.extend({}),le="web_sdk",ce=function(){},de=K,ue=/^(https?|ftps?):\/\//i,pe=/\S/,me=de.any([de.equal(""),de.type("string").regex(/[0-9]+/).maxLength(25)]),he=de.any([de.equal(void 0),de.type("function")]),fe=de.predicate((,"not contain any comma character"),ge=de.predicate((,"be a valid window object"),ve={interval:6e5,limit:10,callback:,be=Y.rateLimit((function(){T.reconnect()}),ve),ye={online:"online",offline:"offline",away:"away",invalid_account_key:null,banned:null},we=v({connected:"connected",connecting:"connecting",closed:"closed"}),Ee=v(ye),_e=m(["email$string","phone$string","display_name$string"]),Oe=m(["name$string","status$string"],"id",(),Ce=m(["avatar_path$string","display_name$string","title$string"],"nick"),Se=m(["typing$bool"],"nick",(function(e){return Object.prototype.hasOwnProperty.call(e,"typing$bool")?{type:"typing"}:null})),ke=m(["typing$bool"],"display_name",(function(e){return Object.prototype.hasOwnProperty.call(e,"typing$bool")?{type:"typing",nick:"agent:trigger"}:null})),xe=m(["timestamp$int"],null,p),Te=m(["timestamp$int"],"nick",(),je=(m(["banner","behavior","branding","bubble","chat_button","chat_window","concierge","file_sending","forms","greetings","language","login","rating","sound","theme","timezone$string"]),["on","un","fire","unextendEvents","init","getFirehose","getConnectionStatus"]);for(var Ne in oe)Object.prototype.hasOwnProperty.call(oe,Ne)&&-1===je.indexOf(Ne)&&F(oe[Ne])&&(oe[Ne]=Ne,oe[Ne]));e.exports=oe},)},"object"==typeof exports&&"object"==typeof e?e.exports=i():"function"==typeof define&&n(646)?define([],i):"object"==typeof exports?exports.zChat=i():a.zChat=i(),t.a=zChat}).call(this,n(609)(e))},1451:function(e,t,n){},1496:function(e,t,n){},1514:function(e,t,n){},1516:function(e,t,n){},1517:function(e,t,n){},1523:function(e,t,n){},1524:function(e,t,n){},1703:function(e,t,n){},1704:1707:function(e,t,n){"use strict";n.r(t);var a=n(36),i=n.n(a),o=n(53),r=n(22),s=n(0),l=n.n(s),c=n(58),d=n.n(c),u=n(452),p=n.n(u),m=n(6),h=n(143),f=n(8),g=n(2),v=n.n(g),b=n(455),y=n(33),w=n(135),E=n(598),_=n(12),O=n(13),C=n(40),S=n(14),k=n(15),x=n(95),T=n(1),j=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e,t=null===(e=this.props.clientConfigData)||void 0===e?void 0:e.context,n=t&&t.chatBtnLogo,a=!t||"no"!==t.visibilityUnreadBadge;return l.a.createElement("div",{className:"chat-button ".concat(this.props.addClass," ").concat("left"===this.props.botPosition?"position-left":""),onClick:this.props.onClick},l.a.createElement("img",{src:n,className:"chatbtn-logo",alt:"Chat Button"}),a&&this.props.unreadMesssages>0?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"newmessages__unread"}," ",l.a.createElement("span",null,this.props.unreadMesssages)),l.a.createElement("div",{className:"newmessages__unread"}," ",l.a.createElement("span",null,this.props.unreadMesssages>10?"10+":this.props.unreadMesssages))):null)}}]),n}(s.Component);j.displayName="ChatButton";var N=Object(y.b)((function(e){var t=e.appState.botPosition;return{clientConfigData:e.botConfig,botPosition:t}}),{})(j),I=function(e,t){e.currentTarget.querySelector("".concat(t))&&(e.currentTarget.querySelector("".concat(t)).style.display="block")},A=function(e,t){e.currentTarget.querySelector("".concat(t))&&(e.currentTarget.querySelector("".concat(t)).style.display="none")},D=n(127),M=n.n(D),L=function(){var e=(new Date).toISOString();return M.a.utc(e).local().format("Do MMMM YYYY, h:mm a")},$=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e,t,n=this.props.content,a=this.props.content||!1,i=this.props.index,o="yes"===(null===(e=this.props.clientConfigData)||void 0===e||null===(t=e.context)||void 0===t?void 0:t.showChatMessageTimeStamps);return l.a.createElement("div",{key:i,onMouseEnter:function(e){return I(e,".chasitor")},onMouseLeave:,l.a.createElement("div",{class:"chat_answer ".concat(this.props.isHistory&&this.props.isMessageTransitionBottomUp?"slide-bottom-up":"")},l.a.createElement("div",{class:"all_chat_answer"},"action_product_selection"===this.props.type?l.a.createElement(l.a.Fragment,null," ",n?l.a.createElement("p",{onClick:function(){},style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:10}},(null===n||void 0===n?void 0:n.image)&&l.a.createElement("img",{style:{width:50,borderRadius:10},src:null===n||void 0===n?void 0:n.image,alt:"product-image"}),l.a.createElement("div",{style:{textAlign:"center",width:150}},null===n||void 0===n?void 0:n.title)):l.a.createElement("p",null,"Product not selected")):l.a.createElement(l.a.Fragment,null,a?l.a.createElement("p",null,l.a.createElement("div",{dangerouslySetInnerHTML:{__html:n}})):l.a.createElement("p",null,n)))),o&&l.a.createElement("div",{className:"timestamp chasitor",style:{display:"none"}},L()," "))}}]),n}(s.PureComponent);$.displayName="ChasitorMessage";var P=Object(y.b)((function(e){var t,n=e.botConfig;return{clientConfigData:n,isMessageTransitionBottomUp:"yes"===(null===n||void 0===n||null===(t=n.context)||void 0===t?void 0:t.messageTransitionBottomUp)}}),{})($),B=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(_.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).hideToastMessage=function(){for(var e=document.getElementsByClassName("toaster"),t=0;t<e.length;t++);},e}return Object(O.a)(n,[{key:"componentDidMount",value:,{key:"render",value:function(){var e=this.props,t=e.message;e.type;return l.a.createElement("div",{className:"toaster show_newmessage cursor-pointer",onClick:function(){return Object(f.p)()}},l.a.createElement("i",{className:"fa fa-arrow-down","aria-hidden":"true",style:{margin:"0px 10px -2px 0px"}}),l.a.createElement("span",{id:"snackbar_txt"},t))}}]),n}(s.Component),R=n(5),F=n(46),U=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).sendFeedback=function(e){var t={name:"messagefeedback",data:{evalue:e,ename:"feedback",nodeId:v()(a.props.payloadData,"header.id"),tid:v()(a.props.payloadData,"header.tid"),title:v()(a.props.payloadData,"header.txt")}};Object(f.s)(t)},a.selectedOption=function(e){var t={};if(t.text=e.target.innerText,Object(f.t)("User Clicked",e.target.innerText),e.target.dataset.attr&&(t["data-attr"]=e.target.dataset.attr),e.target.dataset.attrTid&&(t["data-attr-tid"]=e.target.dataset.attrTid),t&&t["data-attr"]&&-1!==t["data-attr"].indexOf("#csat")){var n=t["data-attr"].replace("#csat","").trim();a.sendFeedback(n)}if(t&&t["data-attr"]&&t["data-attr-tid"]){a.props.isHistory&&!a.props.showOptionsAfterSelection&&a.setState({visible:!1});var i=a.props.isLast?{}:{history:{node_id:v()(a.props,"payloadData.header.id"),flow_id:v()(a.props,"payloadData.flowId")}};Object(f.q)(Object(r.a)(Object(r.a)({},t),i),"action_menuclick")}},a.state={visible:!1},a.selectedOption=a.selectedOption.bind(Object(C.a)(a)),a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.props.setShowTyping(!1),e.setState({visible:!0},()}),500)}},{key:"render",value:function(){var e=this,t=this.props.payloadData,n=this.props.index;return l.a.createElement(l.a.Fragment,null,this.state.visible&&l.a.createElement("li",{key:n},l.a.createElement("div",{className:"help_button_block ".concat(this.props.isMessageTransitionBottomUp?"slide-bottom-up":""),id:t.header.tid},t.options.map((function(n,a){return l.a.createElement("a",{className:"btn border-btn","data-attr":n.id,"data-attr-tid":t.header.tid,onClick:function(t){return e.selectedOption(t)}},n.translatedTxt||n.txt)})))))}}]),n}(s.Component);U.displayName="Options";var G={setShowTyping:F.l},z=Object(y.b)((function(e){var t,n,a=e.botConfig;return{clientConfigData:a,showOptionsAfterSelection:"yes"===(null===a||void 0===a||null===(t=a.context)||void 0===t?void 0:t.showOptionsAfterSelection),isMessageTransitionBottomUp:"yes"===(null===a||void 0===a||null===(n=a.context)||void 0===n?void 0:n.messageTransitionBottomUp)}}),G)(U),H=n(277),q=n(500),V=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).state={showArticle:!1},a.articledata="",a}return Object(O.a)(n,[{key:"render",value:function(){var e=this,t=this.props.articledata,n=t.fwd_index.sections;return l.a.createElement("div",{className:"full-screen fi"},l.a.createElement("div",{className:"fi-header"},l.a.createElement("i",{className:"fa fa-arrow-left article_back_arrow",onClick:),l.a.createElement("div",{style:{position:"absolute",right:5,marginRight:10},onClick:,l.a.createElement("a",{href:"{{article.fwd_index.url}}",target:"_blank"},l.a.createElement("i",{className:"fa fa-external-link article_external_link"}))),l.a.createElement("div",{style:{marginRight:"50px",fontSize:"16px",marginLeft:50}},l.a.createElement("div",{dangerouslySetInnerHTML:{__html:t.fwd_index.title}}))),l.a.createElement("div",{className:"fi-content"},n&&n.map((function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.title_anchor}}),l.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.content}}),l.a.createElement("br",null))}))))}}]),n}(s.Component);V.displayName="KnowledgeArticle";var W=V,K=n(457);function Y(e){var t=e.children,n=e.eventKey,a=Object(K.b)(n,(function(){for(var e=document.getElementsByClassName("header"),t=0;t<e.length;t++)t!=n&&e[t].classList.remove("selected");e[n].classList.toggle("selected")}));return l.a.createElement("div",{onClick:a},t)}var Q=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).openFullArticle=function(e,t){e&&e.preventDefault(),a.setState({showArticle:!0,articledata:t},(function(){this.sendClientEvents(m.X,t)}))},a.closeFullArticle=function(e){a.setState({showArticle:!1,articledata:""},()},a.openArticleInNewTab=function(e,t){t&&t.fwd_index&&window.open(t.fwd_index.url,"_blank"),a.sendClientEvents(m.V,t)},a.onArticleClick=function(e,t){var n,i,o,r,s,l,c,d;"yes"===(null===(n=a.props)||void 0===n||null===(i=n.clientConfigData)||void 0===i||null===(o=i.context)||void 0===o?void 0:o.openArticleInNewTabOnly)||(null===(r=a.props)||void 0===r||null===(s=r.payload)||void 0===s||null===(l=s.data)||void 0===l||null===(c=l.outdata)||void 0===c||null===(d=c.properties)||void 0===d?void 0:d.inline)?a.openArticleInNewTab(e,t):a.openFullArticle(e,t)},a.state={activekey:0,showArticle:!1},a}return Object(O.a)(n,[{key:"sendClientEvents",value:function(e,t){var n=e&&e.toLowerCase(),a=t&&t.fwd_index&&t.fwd_index.url,i=t&&t.fwd_index&&t.fwd_index.title,o=t&&t.idx;Object(f.q)({type:""+n,idx:""+o,url:""+a,title:""+i})}},{key:"render",value:function(){var e=this,t=this.props.payload,n=this.props.index;return l.a.createElement(l.a.Fragment,null,l.a.createElement("li",{key:n},this.state.showArticle&&l.a.createElement(W,{articledata:this.state.articledata,closeFullArticle:this.closeFullArticle,openArticleInNewTab:this.openArticleInNewTab}),l.a.createElement(H.a,{defaultActiveKey:"0"},t&&t.data&&t.data.outdata&&t.data.outdata.hits.map((function(t,n){return l.a.createElement(q.a,null,l.a.createElement(Y,{as:q.a.Header,eventKey:""+n},l.a.createElement("h2",{className:0===n?"mb-0 header selected":"mb-0 header"},l.a.createElement("a",{className:"toggle-btn btn btn-link collapsed","data-toggle":"collapse","data-target":"#collapseOne","aria-expanded":"false","aria-controls":"collapseOne"},l.a.createElement("i",{className:"fa fa-chevron-circle-down header-icon__shrink"}),l.a.createElement("i",{className:"fa fa-chevron-circle-up header-icon__expand",style:{display:"none"}}),l.a.createElement("span",{class:"toggle-btn-title",dangerouslySetInnerHTML:{__html:t.fwd_index.title}})))),l.a.createElement(H.a.Collapse,{eventKey:""+n},l.a.createElement(q.a.Body,null,"....",t.fwd_index.passages.map((),"....",l.a.createElement("div",{className:"dc_link_text",style:{float:"right"},onClick:function(n){return e.onArticleClick(n,t)}},l.a.createElement("a",{href:"{{this.fwd_index.url}}",target:"_blank"},"[+]")))))})))))}}]),n}(s.Component);Q.displayName="Knowledge";var J=Object(y.b)((function(e){return{clientConfigData:e.botConfig}}),{})(Q),X=n(209),Z=n(81),ee=n.n(Z),te=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);eturn Object(O.a)(n,[{key:"render",value:function(){var e=this.props.component,t=e.srcUrl,n=e.height,a=e.width,i=this.props.formData,o=t;return null!=i.iframeUrl&&(o=i.iframeUrl),l.a.createElement("iframe",{src:o,width:a||200,height:n||200})}}]),n}(s.Component),ne=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"attachReact",value:function(e){return d.a.render(l.a.createElement(te,{component:this.component,value:this.dataValue,formData:this.data}),e)}},{key:"detachReact",value:],[{key:"builderInfo",get:function(){return{title:"IFrame",icon:"window-maximize",group:"basic",documentation:"",weight:10,schema:n.schema()}}},{key:"schema",value:]),n}(X.ReactComponent);ne.editForm=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ee.a.apply(void 0,[[{key:"display",components:[{key:"placeholder",ignore:!0},{type:"textfield",input:!0,label:"Src Url",weight:12,key:"srcUrl"},{type:"textfield",input:!0,label:"Height",weight:12,key:"height"},{type:"textfield",input:!0,label:"Width",weight:12,key:"width"}]},{key:"data",components:[]},{key:"validation",components:[]},{key:"api",components:[]},{key:"conditional",components:[]},{key:"logic",components:[]}]].concat(t))},X.Formio.registerComponent("iframe",ne),n(709);var ae=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a,i,o;return Object(_.a)(this,n),(o=t.call(this,e)).closeFullScreen=o.loadCss=function(e){var t=document.createElement("style");t.innerHTML=e,document.body.appendChild(t)},o.submitForm=function(e){e.data?(o.generateResponse(e.data),Object(f.q)(e.data,"action_sendform")):(Object(f.q)({},"action_sendform"),Object(f.m)())},o.generateResponse=function(e){delete e.submit;var t="",n=0;for(var a in e){0!==n&&(t+="<br/>");var i=a,r=e[a];t+=(i=i.charAt(0).toUpperCase()+i.slice(1))+" : "+r,n++}o.setState({readOnly:!0,formdata:t})},o.state={readOnly:e.readOnly||!1,renderType:"inline",showHeader:!0,formdata:"",schema:""},o.retryTimes=(null===(a=o.props.clientConfigData)||void 0===a||null===(i=a.context)||void 0===i?void 0:i.formRetryTimes)||5,o}return Object(O.a)(n,[{key:"getFormData",value:function(){var e=Object(o.a)(i.a.mark((function e(t,n,a){var o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=this,e.abrupt("return",fetch(t,n).catch((function(e){if(1===a)throw e;return o.getFormData(t,n,a-1)})));case 2:case"end":return e.stop()}}),e,this)})));return ()},{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,n,a,o,r,s,l,c,d,u,p,m,h,g,v,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(performance.now(),(t=this.props.payload||{})&&t.data&&t.data.userData&&t.data.userData.formSpecification?a=t.data.userData.formSpecification.params:t&&t.data&&t.data.userData&&t.data.userData.formDefSpec&&(a=t.data.userData.formDefSpec.params),!a){e.next=24;break}if(o=a.formId,!(["contactForm","iframeTest"].indexOf(o)<0)){e.next=24;break}return l=a.appId||"DCDEMOS1",c=a.siteId||"9e99b7fd5fcd74cf",d={headers:{"X-Application-Id":l,"X-Site-Id":c}},u="https://api.converseapps.com/v1/action/forms/public/id/".concat(o),e.next=12,this.getFormData(u,d,this.retryTimes);case 12:return p=e.sent,e.next=15,p.json();case 15:m=e.sent,n={components:m.record.form.components},h="",(null===(r=this.props.payload)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.userData)&&(h=this.props.payload.data.userData),g=h.formSpecification,v=h.formData||{},b="inline",g&&(g.useCustomCss&&this.loadCss(g.customCss),g.formDisplayType&&(b=g.formDisplayType)),this.setState({schema:n,formdata:v,renderType:b},();case 24:case"end":return e.stop()}}),e,this)})));return ()},{key:"render",value:function(){var e,t,n=null===(e=this.props.clientConfigData)||void 0===e?void 0:e.context,a=(null===(t=this.props.clientConfigData)||void 0===t?void 0:t.translations)||{},i=n.locale.split("_")[0],o={};n.locale in a&&(o[i]=a[n.locale]);var r={noAlerts:!0,language:i,i18n:o,disableAlerts:!0};return l.a.createElement(l.a.Fragment,null,"inline"===this.state.renderType&&l.a.createElement("div",{className:"dc-formio-form inline dc-custom-style disable_form_"+this.state.readOnly,style:{display:"inline-block",width:"100%"}},l.a.createElement(X.Form,{src:this.state.schema,onSubmit:this.submitForm,options:r,submission:{data:this.state.formdata}})),"fullScreen"===this.state.renderType&&l.a.createElement("div",{className:"full-screen fi"},this.state.showHeader?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"fi-header"},l.a.createElement("i",{className:"fa fa-times article_close",onClick:this.submitForm}),l.a.createElement("div",{style:{marginRight:"50px",fontSize:"16px"}},"Form"))):l.a.createElement(l.a.Fragment,null),l.a.createElement("div",{className:"dc-formio-form fullscreen dc-custom-style  disable_form_"+this.state.readOnly},l.a.createElement(X.Form,{src:this.state.schema,onSubmit:this.submitForm,options:r,submission:{data:this.state.formdata}}))))}}]),n}(s.Component);ae.displayName="CustomForm";var ie=Object(y.b)((function(e){return{clientConfigData:e.botConfig}}),{})(ae),oe=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).renderByType=function(){var e,t,n=a.props.messagetext,i=null===(e=a.props.clientConfigData)||void 0===e||null===(t=e.context)||void 0===t?void 0:t.agentAvatar;if(a.props.message&&a.props.message.payload&&a.props.message.payload.props&&a.props.message.payload.props.icon&&(i=a.props.message.payload.props.icon),a.props.isLast)return l.a.createElement("div",{style:{margin:"auto 2vw"}},l.a.createElement("div",{className:"chat_question transient ".concat(a.props.isMessageTransitionBottomUp?"slide-bottom-up":"")},l.a.createElement("div",{className:"chat_question_icons_transient"},l.a.createElement("div",{class:"chat_image_border"},l.a.createElement("span",null,l.a.createElement("img",{src:i,alt:""})))),l.a.createElement("div",{style:{margin:"8px 8px 0px 15px",display:"none"}},l.a.createElement("i",{class:"fa fa-cog fa-spin fa-x fa-fw","aria-hidden":"true"})),l.a.createElement("div",{className:"chat_question_chat_transient"},l.a.createElement("p",{class:"saving"},n,l.a.createElement("span",null,l.a.createElement("span",{className:"dot"})),l.a.createElement("span",null,l.a.createElement("span",{className:"dot"})),l.a.createElement("span",null,l.a.createElement("span",{className:"dot"}))))))},a.renderByType=a.renderByType.bind(Object(C.a)(a)),a}return Object(O.a)(n,[{key:"render",value:]),n}(s.Component);oe.displayName="StatusUpdate";var re=Object(y.b)((function(e){var t,n=e.botConfig;return{clientConfigData:n,isMessageTransitionBottomUp:"yes"===(null===n||void 0===n||null===(t=n.context)||void 0===t?void 0:t.messageTransitionBottomUp)}}),{})(oe),se=n(314),le=["containerStyle"];var ce=function(e){var t=e.containerStyle;return Object(se.a)(e,le),l.a.createElement("div",{className:"d-flex h-100 align-items-center justify-content-center",style:Object(r.a)({},t)},l.a.createElement("div",{className:"spinner-border",role:"status"}))};var de=function(e){var t=e.onThumbsUpClick,n=e.onThumbsDownClick,a=e.feedbackQuestion,i=void 0===a?"Was this article helpful?":a,o=e.defaultSelectedThumb,r=void 0===o?null:o,c=Object(s.useState)(r),d=Object(R.a)(c,2),u=d[0],p=d[1],m=function(e){"up"===e?(p("up"),t()):(p("down"),n())};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"my-2"},i),l.a.createElement("div",{className:"help-article-feedback-buttons mb-2"},l.a.createElement("span",{role:"img","aria-label":"thumbs-up",className:"thumbs-up",style:{opacity:"down"===u?.5:1},onClick:function(){return m("up")}},"\ud83d\udc4d"),l.a.createElement("span",{role:"img","aria-label":"thumbs-down",className:"thumbs-down",style:{opacity:"up"===u?.5:1},onClick:,"\ud83d\udc4e")))},ue=(n(1451),n(141)),pe=n.n(ue),me=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(){var e;Object(_.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={drawerContentHeight:0},e.setContentHeight=function(){var t,n,a,i,o,r=e.props.hideFooter,s=(null===(t=document.querySelector(".widget-container"))||void 0===t?void 0:t.clientHeight)||0,l=0;(l=(null===(n=document.querySelector(".drawer-content"))||void 0===n?void 0:n.clientHeight)||0,l=s-(i=(null===(a=document.querySelector(".title-with-close-icon"))||void 0===a?void 0:a.clientHeight)||0),r)||(l=s-i-((null===(o=document.querySelector(".drawer-footer"))||void 0===o?void 0:o.clientHeight)||0)-1);e.setState({drawerContentHeight:l})},e.closeDrawer=function(){document.querySelector(".drawer-dialog")&&document.querySelector(".drawer-dialog").classList.add("close-drawer"),setTimeout((function(){document.querySelector(".drawer-dialog")&&(document.querySelector(".drawer-dialog").style.display="none"),e.props.hideDrawer()}),400)},e.refCloseDrawer=function(){document.querySelector(".drawer-dialog")&&document.querySelector(".drawer-dialog").classList.add("close-drawer"),setTimeout((,400)},e}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=document.querySelector("#sheet-backdrop");t&&t.addEventListener("click",(function(){e.closeDrawer()})),document.addEventListener("keydown",();var n=this.props,a=n.drawerHeight,i=n.titleWithCloseIcon;"full"===a&&i&&setTimeout((function(){e.setContentHeight()}),500)}},{key:"render",value:function(){var e,t,n=this.props,a=n.footerText,i=n.footerUrl,o=n.hideFooter,s=n.style,c=n.drawerHeight,d=n.closeIconClass,u=n.closeIconStyle,p=n.titleWithCloseIcon,m=n.noBorderRadius,h=n.hideSlideUpAnimation,f=Object(r.a)({bottom:0,right:0,maxWidth:400,height:"100%"},s),g={full:"100%",guide_full:"100%",half:"50%",content:"unset"}[c],v="full"===c&&p,b=document.querySelector(".widget-container.fullscreen"),y=this.state.drawerContentHeight;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"drawer-container ".concat(b?"fullscreen":""),style:f},l.a.createElement("div",{id:"sheet-backdrop","aria-label":"Close",tabIndex:"-1",role:"button",className:"drawer-backdrop h-100"}),l.a.createElement("div",{className:"drawer-dialog ".concat(h?"":"animation-slide-up"),style:{height:g||"unset",borderRadius:b&&"full"===c||"guide_full"===c||m?0:16,overflowX:"guide_full"===c?"hidden":""}},l.a.createElement("section",{className:"drawer-section",style:Object(r.a)({},"full"===c?{height:"100%"}:{})},!this.props.hideClose&&!p&&l.a.createElement("div",{className:"drawer-close"},l.a.createElement("i",{className:"icon-feather-x actions__icon ".concat(d),style:Object(r.a)({fontSize:20},u),onClick:this.closeDrawer})),p&&l.a.createElement("div",{className:"title-with-close-icon d-flex align-items-center justify-content-center theme-background-color",style:{minHeight:60}},l.a.createElement("div",{className:"d-flex align-items-center p-2 pl-3",style:{flex:.9,color:"#fff"}},p),l.a.createElement("div",{className:"d-flex align-items-center justify-content-center p-2 cursor-pointer",style:{flex:.1}},l.a.createElement("i",{className:"icon-feather-x actions__icon",style:{fontSize:24,color:"#fff"},onClick:this.closeDrawer}))),this.props.loader&&y>0&&l.a.createElement("div",{style:{height:y},className:"drawer-spinner"},l.a.createElement(pe.a,{type:"bars",color:null===(e=this.props.clientConfigData)||void 0===e||null===(t=e.theme)||void 0===t?void 0:t.primaryColor,height:"35px",width:"35px",className:"dc-macro--loader spokes"})),v&&l.a.createElement("div",{className:"drawer-content",style:{height:y,overflow:"scroll"}},this.props.children),!v&&this.props.children),!o&&l.a.createElement("div",{className:"drawer-footer"},l.a.createElement("div",{className:"footer-content"},l.a.createElement("a",{href:i,rel:"noreferrer noopener",target:"_blank",className:"footer-links"},a))))))}}]),n}(s.Component),he=Object(y.b)((function(e){return{clientConfigData:e.botConfig}}),{})(me),fe=(n(345),n(346),function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).onFeedbackIconClick=function(e){var t={name:"articlefeedback",data:{evalue:{type:e,url:v()(a.props,"articledata.docUrl",""),title:v()(a.props,"articledata.docTitle",""),articleId:v()(a.props,"articledata.article.id","")},ename:"articlefeedback"}};a.props.onFeedbackClick(t)},a.drawerClose=function(){var e=a.props.articledata;a.setState({fadeInFeedback:!1,showFeedback:!1}),a.props.closeFullArticle(e)},a.state={showArticle:!1,isIframeLoading:!1,fadeInFeedback:!1,showFeedback:e.showFeedback},a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=document.getElementsByClassName("fi-content")&&document.getElementsByClassName("fi-content")[0].getElementsByTagName("a");if(e.length>0)for(var t,n=function(t){var n;if(null===(n=e[t].getAttribute("href"))||void 0===n?void 0:n.startsWith("#"))return{v:void 0};e[t].addEventListener("click",(function(n){n.preventDefault(),window.open(e[t].href,"_blank")}))},a=0;a<e.length;a++)if(t=n(a))return t.v}},{key:"hideLoader",value:,{key:"render",value:function(){var e=this,t=this.props.articledata,n=this.state,a=n.fadeInFeedback,i=n.showFeedback;return null==t?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(he,{hideFooter:!0,hideDrawer:this.drawerClose,drawerHeight:"full",titleWithCloseIcon:l.a.createElement("p",Object.assign({className:"mb-1 font-weight-bold ".concat(t.docUrl?"cursor-pointer":""),style:{color:"#fff"}},t.docUrl&&{onClick:),v()(t,"docTitle","Help Article"))},l.a.createElement("div",{className:"fi-content",style:{height:"100%"}},this.state.isIframeLoading&&l.a.createElement(ce,null),l.a.createElement("div",{className:"full-article-style",dangerouslySetInnerHTML:{__html:"".concat(v()(t,"contentHtml","<div> N/A </div>"))}}),i&&l.a.createElement("div",{className:"text-center mt-3 pb-2",style:{position:"fixed",width:"100%",bottom:0,right:0,backgroundColor:"white",transition:"all 1s ease",opacity:a?1:0}},l.a.createElement(de,{defaultSelectedThumb:v()(t,"article.feedBack",null),onThumbsUpClick:function(){return e.onFeedbackIconClick(m.M)},onThumbsDownClick:)))))}}]),n}(s.Component));fe.displayName="KnowledgeArticleV2";var ge=fe,ve=n(448),be=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).openFullArticle=function(e,t,n,i,o){e&&e.preventDefault(),a.setState({showArticle:!0,articledata:{docUrl:t,docTitle:n,contentHtml:i,article:o}})},a.onArticleClick=function(e,t,n,i,o,r){var s,l,c,d,u,p,h,g="yes"===(null===(s=a.props)||void 0===s||null===(l=s.clientConfigData)||void 0===l||null===(c=l.context)||void 0===c?void 0:c.openArticleInNewTabOnly)||(null===(d=a.props.payload)||void 0===d||null===(u=d.data)||void 0===u||null===(p=u.outdata)||void 0===p||null===(h=p.properties)||void 0===h?void 0:h.inline),b=v()(o,"_source.doc_id");n=Object(f.i)(n),g?window.open(t,"_blank"):a.openFullArticle(e,t,n,i,o);var y={name:"openarticle",data:{evalue:{type:""+m.U,idx:""+r,url:""+t,title:""+n,docId:""+b},ename:"openarticle",tid:v()(a.props.payload,"data.header.tid"),title:Object(f.i)(v()(a.props.payload,"data.header.txt"))}};Object(f.s)(y)},a.hoverin=function(e){e.currentTarget.querySelector(".article-badge")&&(e.currentTarget.querySelector(".article-badge").style.display="block")},a.hoverout=function(e){e.currentTarget.querySelector(".article-badge")&&(e.currentTarget.querySelector(".article-badge").style.display="none")},a.closeFullArticle=function(){a.setState({showArticle:!1,articledata:null})},a.onFeedbackClick=function(e){var t=Object(r.a)(Object(r.a)({},e),{},{data:Object(r.a)(Object(r.a)({},e.data),{},{tid:v()(a.props.payload,"data.header.tid"),title:Object(f.i)(v()(a.props.payload,"data.header.txt"))})});Object(f.s)(t),a.setState({articleLists:a.state.articleLists.map((function(t){return t.id===v()(e.data,"evalue.articleId")?Object(r.a)(Object(r.a)({},t),{},{feedBack:e.data.evalue.type===m.M?"up":"down"}):t}))})},a.state={activekey:0,showArticle:!1,articleLists:v()(e.payload,"data.outdata.hits",[]).map(()},a}return Object(O.a)(n,[{key:"sendClientEvents",value:function(e,t,n,a){var i=e&&e.toLowerCase(),o=a&&a.idx;Object(f.q)({type:""+i,idx:""+o,url:""+t,title:""+n})}},{key:"componentDidMount",value:function(){Object(f.p)()}},{key:"render",value:function(){var e=this,t=this.props.payload,n=this.props.index;return l.a.createElement(l.a.Fragment,null,l.a.createElement("li",{key:n},this.state.showArticle&&l.a.createElement(ge,{articledata:this.state.articledata,closeFullArticle:this.closeFullArticle,openArticleInNewTab:this.openArticleInNewTab,onFeedbackClick:function(t){return e.onFeedbackClick(t)},showFeedback:"yes"===v()(this.props.clientConfigData,"context.showHelpArticleFeedback","no")}),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"cb-bg-container",style:{background:"transparent"}},l.a.createElement("div",{className:"help-articles-main-container"},l.a.createElement(H.a,{defaultActiveKey:1},t&&t.data&&t.data.outdata&&this.state.articleLists.map((function(n,a){if(null==t.data.outdata.properties||0===Object.keys(t.data.outdata.properties).length)return null;var i=ve.compile(t.data.outdata.properties.titleTemplate),o=ve.compile(t.data.outdata.properties.descriptionTemplate),r=t.data.outdata.properties.urlField,s=t.data.outdata.properties.titleField,c=(i(n),o(n),v()(n,t.data.outdata.properties.contentField)),d=v()(n,r),u=v()(n,s);return l.a.createElement("section",{className:"help-articles-main",key:n.id},l.a.createElement(H.a.Toggle,{as:"div",eventKey:a+1,style:{cursor:"pointer",padding:"0.75rem"}},l.a.createElement("div",{className:"dc-articles-content-header",dangerouslySetInnerHTML:{__html:u}})),l.a.createElement(H.a.Collapse,{eventKey:a+1},l.a.createElement("div",{className:"dc-article-shw-more-container"},l.a.createElement("div",{style:{maxHeight:"250px",padding:"0.75rem"}},l.a.createElement("div",{className:"dc-articles-content",dangerouslySetInnerHTML:{__html:c}})),l.a.createElement("div",{class:"shadow-dc-articles"}),l.a.createElement("div",{style:{padding:"0.75rem 0"}},l.a.createElement("span",{className:"dc-articles-read-more",onClick:," Read article")))))}))))))))}}]),n}(s.Component);be.displayName="KnowledgeV2";var ye=Object(y.b)((function(e){return{clientConfigData:e.botConfig}}),{})(be),we=n(253),Ee=n(24),_e=n(449),Oe=n(199),Ce=n(249),Se=n(18);function ke(){return(ke=Object(o.a)(i.a.mark((function e(t,n){var a,o,r,s,l,c,d,u,p,m,h,g,v,b,y,w,E,_,O;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="en_us",o=null,-1!==window.location.pathname.indexOf("/app/embed/")&&(o=window.location.pathname.split("/").pop(),r=window.location.pathname.split("/"),s=r[r.length-2],a="en_us",s&&"embed"!=s&&(a=s)),l=new URLSearchParams(window.location.search),c="",!1,o&&(c="?embedKey="+o),null!=(d=l.get("locale"))&&(a=d),a&&(c+=(c.length>0?"&":"?")+"locale="+a),void 0!==t&&(c=t),u="",p=n,e.next=15,xe(p,{method:"get"});case 15:if(m=e.sent,e.t0=m,!e.t0){e.next=21;break}return e.next=20,m.json();case 20:e.t0=e.sent;case 21:if(null!=(u=e.t0)){window.ConverseAppsGuide=u,window.ConverseAppsGuide.locale=a,window.ConverseAppsGuide.context.url=window.location.href,window.ConverseAppsGuide.context.locale=a,window.ConverseAppsGuide.isLocalStorageAllowed=je()||!1,h=Object(Ce.a)(l);try{for(h.s();!(g=h.n()).done;)v=Object(R.a)(g.value,2),b=v[0],y=v[1],b.startsWith("browser_")||"draft"===b||"debugToken"===b?window.ConverseAppsGuide.context[b]=y:window.ConverseAppsGuide.context["browser_"+b]=y}catch(i){h.e(i)}finally{h.f()}window.ConverseAppsGuide.context.cssStyles&&""!==window.ConverseAppsGuide.context.cssStyles&&Object(f.b)(window.ConverseAppsGuide.context.cssStyles),window.ConverseAppsGuide.context.inlineScript&&""!==window.ConverseAppsGuide.context.inlineScript&&Object(f.c)(window.ConverseAppsGuide.context.inlineScript),null!=window.ConverseAppsGuide.seo&&Object.keys(window.ConverseAppsGuide.seo).length>0&&((w=Object(Se.get)(window.ConverseAppsGuide,"seo.metaTitle","")).length>0&&(document.title=w),(E=Object(Se.get)(window.ConverseAppsGuide,"seo.metaDescription","")).length>0&&((_=document.createElement("meta")).setAttribute("name","description"),_.setAttribute("content",E),document.getElementsByTagName("head")[0].appendChild(_))),O={en:{headerText:"DeepConverse Guided Assist",footerText:"Powered by DeepConverse",start:"Start",back:"Back",history:"History",gotoquestion:"Go back to this question",nohistory:"No history found",catalog:"Catalog",reload:"Reload"}},window.ConverseAppsGuide.translations=Object.assign(window.ConverseAppsGuide.translations||{},O)}return e.abrupt("return",window.ConverseAppsGuide);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}unction Te(){return(Te=Object(o.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f.o)(t,n,1,5));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}ar Ne=n(241),Ie=n.n(Ne);var Ae=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).handleImageOperation=function(e){var t=e&&e.target&&e.target.currentSrc;a.setState({imageSrc:t,showModal:!0});var n={name:"guide_image",data:{evalue:t,ename:"enlargeimage"}};Object(f.s)(a.props.mbus,n)},a.closeModalPopup=function(){a.setState({showModal:!1})},a.handleMouseEnter=function(e){a.setState((function(t){return{isHovered:Object(r.a)(Object(r.a)({},t.isHovered),{},Object(T.a)({},e,!0))}}))},a.handleMouseLeave=function(e){a.setState((function(t){return{isHovered:Object(r.a)(Object(r.a)({},t.isHovered),{},Object(T.a)({},e,!1))}}))},a.performAction=function(e){!function(e,t){switch(e.actionType||e.actiontype){case"APPLY_MACRO":var n=e.id;t.invoke("macro",n);var a="Applied macro - ".concat(e.title);t.invoke("notify",a);break;case"ADD_COMMENT":t.invoke("comment.appendHtml",e.comment),e.commentType&&t.set("comment.type",e.commentType);break;case"UPDATE_FIELD":t.set(e.field,e.value);break;case"OPEN_MODAL":t.invoke("instances.create",{location:"modal",url:e.url,size:{width:"600px",height:"500px"}}).then((function(e){t.instance(e["instances.create"][0].instanceGuid).on("modal.close",()}))}}(Object.assign({actionType:"APPLY_MACRO"},e),a.props.zafClient)},a.handleGuideContentLoad=function(e){var t;(null===(t=a.props)||void 0===t?void 0:t.handleGuideHeight)&&a.props.handleGuideHeight()},a.renderByType=function(){var e=a.props.messagetext,t=window!==window.parent;if(a.props.type&&"message"===a.props.type){if((e=e.replace(/<p>\s*<\/p>/gi,"")).startsWith("macros:"))return a.renderMacros(e);var n=a.props.isLast?"last":"";return a.props.isLast&&(e='<i class="fa fa-question-circle"></i> '.concat(e)),l.a.createElement("div",{className:"dc-macro--question_item "+n},l.a.createElement("div",{className:"dc-macro--question_item__txt",dangerouslySetInnerHTML:{__html:e}}))}if(a.props.type&&("image"===a.props.type||"gif"===a.props.type))return l.a.createElement("div",{className:"modal_src dc-macro--media "+a.props.custClass},l.a.createElement("div",{className:"dc-macro--image-block inline-image-block"},l.a.createElement("img",{src:e,alt:e,onLoad:a.handleGuideContentLoad})));if(a.props.type&&"link"===a.props.type)return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"dc-macro--question_item",style:{textAlign:"left"}},l.a.createElement("div",{className:"dc-macro--question_item__link"},l.a.createElement("a",{href:e.url,target:"_blank",alt:""},e.text))));if(a.props.type&&"richText"===a.props.type){var i=a.state,o=i.showFullContent,r=i.height;if(t){var s=document.getElementsByClassName("dc-macro--question_item__txt")[0]&&document.getElementsByClassName("dc-macro--question_item__txt")[0].getElementsByTagName("a");if(void 0!==s&&s.length>0)for(var c=0;c<s.length;c++)s[c].setAttribute("target","_blank")}return l.a.createElement("div",{className:"dc-macro--question_item dc-macro-richtxt-ovfl"},l.a.createElement("div",{className:"dc-macro--question_item__txt"},l.a.createElement("div",{ref:style:o&&r>=300?{height:r+10,transition:"height 1s",overflow:"hidden"}:{},className:!o&&r>=300?"dc-macro-richtext-content-half":void 0},l.a.createElement(Ie.a,{model:e})),!o&&r>=300&&l.a.createElement("div",{class:"shadow"})),!o&&r>=300&&l.a.createElement("div",{className:"rich-txt-btn-container",onClick:function(){a.setState({showFullContent:!0}),setTimeout((,1e3)}},l.a.createElement("div",{className:"show-more"},l.a.createElement("i",{class:"fa fa-plus-circle"})," ",l.a.createElement("span",{style:{marginLeft:"0.5rem",position:"relative"}},"Show More "))))}if(a.props.type&&"video"===a.props.type){var d=a.props.url;return l.a.createElement("div",{className:"dc-macro--media "+a.props.custClass},l.a.createElement(Oe.a,{url:d,height:"150px",width:"300px"}))}},a.state={imageSrc:"",showModal:!1,showFullContent:!1,height:"",isHovered:{}},a.imgs="",a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=d.a.findDOMNode(this);this.imgs=e.getElementsByTagName("img");for(var t=0;t<this.imgs.length;t++)this.attachImageEvents(this.imgs[t],t);var n=v()(this.FroalaContainer,"clientHeight");this.setState({height:n})}},{key:"attachImageEvents",value:function(e,t){e.addEventListener("click",this.handleImageOperation)}},{key:"detachImageEvents",value:,{key:"componentWillUnmount",value:function(){for(var e=0;e<this.imgs.length;e++)this.attachImageEvents(this.imgs[e],e)}},{key:"renderMacros",value:function(e){var t=this,n=e.split(":")[1].split(",");return l.a.createElement("div",null,l.a.createElement("h4",{style:{textAlign:"center"}},"Macros"),n.map((function(e,n){var a=window.__APP_META.macros[e];return l.a.createElement("div",{className:"dc-macro--zendesk-macro",onMouseEnter:function(){return t.handleMouseEnter(n)},onMouseLeave:function(){return t.handleMouseLeave(n)},onClick:function(){return t.performAction(a)}},l.a.createElement("div",{className:"dc-macro--zendesk-macro-title"},a.title),l.a.createElement("div",{className:"dc-macro--zendesk-macro-description"},a.description,t.state.isHovered[n]&&l.a.createElement("div",{style:{textAlign:"center",fontSize:10,marginTop:10}},"Click to Apply")))})))}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,this.renderByType(),this.state.showModal&&this.state.imageSrc&&l.a.createElement(we.a,{show:!0},l.a.createElement(we.a.Header,null,l.a.createElement("button",{type:"button",className:"close",onClick:this.closeModalPopup},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"),l.a.createElement("span",{className:"sr-only"},"Close"))),l.a.createElement(we.a.Body,null,l.a.createElement("div",null,l.a.createElement("img",{src:this.state.imageSrc,href:"#",height:"100%",width:"100%"})))))}}]),n}(s.Component);Ae.displayName="ServerMessage";var De=Ae,Me=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;Object(_.a)(this,n),(a=t.call(this,e)).selectedOption=function(e,t,n,i){e&&e.preventDefault(),e&&e.stopPropagation();var o=a.state.selectedBtn,r=a.props.payloadData.options.find(();if(r){var s=o.findIndex(();o.splice(s)}a.setState({selectedBtn:[].concat(Object(x.a)(o),[t]),hoverShowIndex:null},(function(){a.props.handleSelectedBtn(a.state.selectedBtn),a.props.handleGuideOptionsPayload(i)})),a.props.handleIsGuideLoading();var l={text:i,"data-attr":t,"data-attr-tid":n};a.props.handleGuideTransistion(t,"moveToLeftFromRight"),l&&l["data-attr"]&&l["data-attr-tid"]&&a.props.mbus.sendMesg({sender:"chasitor",adata:l,type:"action_menuclick"});var c=document.querySelector(".drawer-section");a.setState({adata:l},()},a.submitSelectedOption=function(){var e=a.state.adata;e&&e["data-attr"]&&e["data-attr-tid"]&&a.props.mbus.sendMesg({sender:"chasitor",adata:e,type:"action_menuclick"})};var i=Object(Se.get)(a.props.clientConfigData,"context");return a.state={visible:!0,hoverShow:!1,selectedBtn:e.selectedBtn,prevSelectedBtns:e.selectedBtn,adata:{}},a.optionsType=i&&i.optionsType||"buttons",a}return Object(O.a)(n,[{key:"render",value:function(){var e=this,t=this.props.payloadData,n=this.state,a=n.hoverShowIndex,i=n.selectedBtn,o=n.prevSelectedBtns;return l.a.createElement(l.a.Fragment,null,this.state.visible&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"dc-macro--help__block "+this.optionsType,id:t.header.tid},l.a.createElement("div",{className:"items"},t.options.map((function(n,r){return l.a.createElement("a",{key:"a_"+r,className:"dc-macro--help__btn \n                     ".concat((null===i||void 0===i?void 0:i.includes(n.id))&&!(null===o||void 0===o?void 0:o.includes(n.id))?"dc-macro--help---btn__selected":"","\n                     ").concat((null===o||void 0===o?void 0:o.includes(n.id))?"dc-macro--help---btn__selected-noanimation ":"","\n                     "),href:"#!","data-attr":n.id,"data-attr-tid":t.header.tid,onClick:function(a){return e.selectedOption(a,n.id,t.header.tid,n.txt)},onMouseEnter:onMouseLeave:,"Guide"===t.tpl&&n.image?l.a.createElement("div",{className:"guide-btn-container",style:{display:"flex"}},l.a.createElement("div",{className:"btn-image"},l.a.createElement("img",{src:n.image,className:"help-btn-image",alt:"image"})),l.a.createElement("span",{className:"btn-lft-side-bar ".concat(a===r?"btn-lft-side-bar-hover":""),style:{display:(null===i||void 0===i?void 0:i.includes(n.id))?"none":"block"}}),l.a.createElement("div",{className:"guide-btn-text-container"},l.a.createElement("span",{style:{fontSize:"0.9rem"}},null==n.translatedTxt?n.txt:n.translatedTxt),(null===i||void 0===i?void 0:i.includes(n.id))&&l.a.createElement("i",{className:"fa fa-check-circle select-icon"}))):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"guide-btn-container",style:{display:"flex"}},l.a.createElement("span",{className:"btn-lft-side-bar ".concat(a===r?"btn-lft-side-bar-hover":""),style:{display:(null===i||void 0===i?void 0:i.includes(n.id))?"none":"block"}}),l.a.createElement("div",{className:"guide-btn-text-container"},l.a.createElement("span",{className:"btn-lft-side-text"},null==n.translatedTxt?n.txt:n.translatedTxt),(null===i||void 0===i?void 0:i.includes(n.id))&&l.a.createElement("i",{className:"fa fa-check-circle select-icon"})))))}))))))}}]),n}(s.Component);Me.displayName="GuideOptions";var Le=Me,$e=n(321),Pe=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).onButtonClick=function(e,t,n,i){var o=a.props.payload;if("web_url"==e.type)window.open(e.url);else if("postback"==e.type){var r="".concat(n).concat(i);a.setState({btnClicked:[].concat(Object(x.a)(a.state.btnClicked),[r])}),Object(f.q)({title:v()(t,o.data.outdata.properties.title),description:v()(t,o.data.outdata.properties.text),mediaUrl:v()(t,o.data.outdata.properties.image_url),actions:[{type:e.type,text:e.title,payload:"subscribe_message"}]},"action_carousel_postback")}},a.onLinkClick=function(e){"web_url"==e.type&&window.open(e.url)},a.onSlide=function(e,t){var n=document.getElementsByClassName("carousel-control-next"),a=document.getElementsByClassName("carousel-control-prev");e===t-1?n.forEach((function(e){e.style.visibility="hidden"})):0===e?a.forEach((function(e){e.style.visibility="hidden"})):(n.forEach((function(e){"visible"!==e.style.visibility&&(e.style.visibility="visible")})),a.forEach((function(e){"visible"!==e.style.visibility&&(e.style.visibility="visible")})))},a.state={btnClicked:[]},a}return Object(O.a)(n,[{key:"componentDidMount",value:,{key:"render",value:function(){var e=this,t=this.props.payload,n=this.state.btnClicked,a=v()(t,"data.outdata.hits"),i=a&&a.length;return l.a.createElement("div",{className:"cb-bg-container",style:{padding:"0.1rem"}},l.a.createElement($e.a,{className:"dcbot--templates__carousel container",nextIcon:l.a.createElement("i",{class:"fa fa-chevron-right","aria-hidden":"true"}),prevIcon:l.a.createElement("i",{class:"fa fa-chevron-left","aria-hidden":"true"}),controls:!0,touch:!0,interval:3e5,onSlide:function(t){return e.onSlide(t,i)}},a&&a.map((function(a,i){if(null==t.data.outdata.properties||0===Object.keys(t.data.outdata.properties).length)return null;var o=v()(a,t.data.outdata.properties.image_url),r=v()(a,t.data.outdata.properties.title),s=v()(a,t.data.outdata.properties.text),c=[],d=t.data.outdata.properties.actions;return d&&d.map((function(e){var t={renderAs:e.renderAs||"button",title:e.title,type:e.type,url:e.url};c.push(t)})),l.a.createElement($e.a.Item,null,l.a.createElement(q.a,null,o&&l.a.createElement("div",{className:"image"},l.a.createElement(q.a.Img,{variant:"top",src:o,width:"100%",height:200})),l.a.createElement(q.a.Body,null,r&&l.a.createElement(q.a.Title,{style:{float:"left",fontSize:"16px"}},r),s&&l.a.createElement("div",{className:"card-html"},l.a.createElement(Ie.a,{model:s}))),c&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{class:"card-buttons",style:{float:"left"}},c.map((function(t,o){return l.a.createElement(l.a.Fragment,null,"button"===t.renderAs&&l.a.createElement("button",{className:"btn border-btn ".concat(n.includes("".concat(o).concat(i))?"carousel-active":""),disabled:n.length>0,onClick:,t.icon&&l.a.createElement("img",{src:t.icon}),t.title))}))),l.a.createElement("div",{class:"card-links"},c.map((function(t){return l.a.createElement(l.a.Fragment,null,"link"===t.renderAs&&l.a.createElement("a",{href:"#",onClick:,t.title))}))))))}))))}}]),n}(l.a.Component);Pe.displayName="CarouselMessage";var Be=Pe,Re=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).openFullArticle=function(e,t,n,i,o){e&&e.preventDefault(),a.setState({showArticle:!0,articledata:{docUrl:i,docTitle:t,contentHtml:n,article:o}})},a.onArticleClick=function(e,t,n,i,o){var r,s,l,c,d,u,p="yes"===(null===(r=a.props)||void 0===r||null===(s=r.clientConfigData)||void 0===s||null===(l=s.context)||void 0===l?void 0:l.openArticleInNewTabOnly)||(null===(c=a.props.payload)||void 0===c||null===(d=c.data)||void 0===d||null===(u=d.outdata)||void 0===u?void 0:u.inline),h=o&&o.idx||1;p?window.open(i,"_blank"):a.openFullArticle(e,t,n,i,o);var g={name:"openarticle",data:{evalue:{type:""+m.U,idx:""+h,url:""+i,title:""+t},ename:"openarticle",title:Object(Se.get)(a.props,"payload.data.outdata.title")}};Object(f.s)(g),a.sendClientEvents(m.U,i,t,o)},a.onFeedbackClick=function(e){var t=Object(r.a)(Object(r.a)({},e),{},{data:Object(r.a)(Object(r.a)({},e.data),{},{tid:Object(Se.get)(a.props.payload,"data.header.tid"),title:Object(Se.get)(a.props,"payload.data.outdata.title")})});Object(f.s)(t),a.setState({articleData:Object(r.a)(Object(r.a)({},a.state.articleData),{},{feedBack:e.data.evalue.type===m.M?"up":"down"})})},a.state={showArticle:!1,hideFeedback:!1,articleData:Object(r.a)(Object(r.a)({},a.props.payload.data.outdata),{},{feedBack:""})},a}return Object(O.a)(n,[{key:"sendClientEvents",value:function(e,t,n,a){var i=e&&e.toLowerCase(),o=a&&a.idx||1;Object(f.q)({type:""+i,idx:""+o,url:""+t,title:""+n})}},{key:"componentDidMount",value:function(){var e=document.getElementsByClassName("dc-articles-content")[0]&&document.getElementsByClassName("dc-articles-content")[0].getElementsByTagName("a");if(e.length>0)for(var t=function(t){e[t].addEventListener("click",(function(n){n.preventDefault(),window.open(e[t].href,"_blank")}))},n=0;n<e.length;n++)t(n);Object(f.p)()}},{key:"render",value:function(){var e=this,t=this.props.payload.data.outdata.title||"",n=this.props.payload.data.outdata.content||"",a=this.props.payload.data.outdata.url||null;return l.a.createElement(l.a.Fragment,null,l.a.createElement("li",null,this.state.showArticle&&l.a.createElement(ge,{articledata:this.state.articledata,closeFullArticle:openArticleInNewTab:this.openArticleInNewTab,onFeedbackClick:function(t){return e.onFeedbackClick(t)},showFeedback:"yes"===Object(Se.get)(this.props.clientConfigData,"context.showHelpArticleFeedback","no")})),l.a.createElement(q.a,{className:"knowledge-answer",style:{padding:0,borderRadius:15}},l.a.createElement("div",{style:{padding:"0.75rem"}},l.a.createElement("div",{className:"dc-articles-content-header",dangerouslySetInnerHTML:{__html:t}})),l.a.createElement("div",{className:"dc-article-shw-more-container"},l.a.createElement("div",{style:{maxHeight:"400px",padding:"0 0.75rem"}},l.a.createElement("div",{className:"dc-articles-content",dangerouslySetInnerHTML:{__html:n}})),l.a.createElement("div",{class:"shadow-dc-articles"}),l.a.createElement("div",null,l.a.createElement("span",{className:"dc-articles-read-more",onClick:function(i){return e.onArticleClick(i,t,n,a,e.state.articleData)}},"Show More")))))}}]),n}(s.Component),Fe=Object(y.b)((function(e){return{clientConfigData:e.botConfig}}),{})(Re),Ue=n(112);var Ge=function(e){var t,n=Object(y.d)((function(e){var t,n=e.botConfig;return{clientConfigData:n,isMessageTransitionBottomUp:"yes"===(null===n||void 0===n||null===(t=n.context)||void 0===t?void 0:t.messageTransitionBottomUp)}})),a=n.clientConfigData,i=n.isMessageTransitionBottomUp,o=Object(s.useState)(!1),c=Object(R.a)(o,2),d=c[0],u=c[1],p=Object(s.useState)(!1),m=Object(R.a)(p,2),h=m[0],g=m[1],b=Object(s.useState)(null),w=Object(R.a)(b,2),E=w[0],_=w[1],O=Object(s.useState)(!1),C=Object(R.a)(O,2),S=C[0],k=C[1],j=Object(s.useState)([]),N=Object(R.a)(j,2),I=N[0],A=N[1],D=Object(s.useState)(!1),M=Object(R.a)(D,2),L=M[0],$=M[1],P=null===a||void 0===a?void 0:a.translations,B=null===a||void 0===a||null===(t=a.context)||void 0===t?void 0:t.locale,F=v()(P,"".concat(B,".moreOptions"),"More Options"),U=v()(P,"".concat(B,".submit"),"Submit"),G=v()(P,"".concat(B,".chooseOption"),"Choose an option");Object(s.useEffect)((function(){var t,n,a;Object(f.p)(),(null===e||void 0===e||null===(t=e.payload)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.outdata)||void 0===a?void 0:a.multiSelect)&&k(e.payload.data.outdata.multiSelect)}),[]);var z=function(e){var t=e.option;return l.a.createElement(s.Fragment,null,l.a.createElement(Ue.a,{variant:"light",onClick:function(){return W(t)},className:"mb-2 p-2 text-left list_options_button",disabled:h},t.text))},H=function(e){var t=e.option;return l.a.createElement(s.Fragment,null,l.a.createElement(Ue.a,{variant:"light",onClick:function(){return q(t)},className:"mb-2 p-2 text-left list_options_button ".concat(I.some((function(e){return e.text===t.text}))?"selected_option":""),disabled:h},t.text))},q=function(e){if(I.some((function(t){return t.text===e.text}))){var t=I;t.splice(t.findIndex((),1),A(Object(x.a)(t))}else A(()},V=function(){Object(f.t)("User Clicked List Option",I);var t=v()(e,"payload.data.outdata.outputField","selection");Object(f.q)(Object(T.a)({},t,I),"action_sendform"),u(!1),g(!0),$(!0)},W=function(t){Object(f.t)("User Clicked List Option",t.text);var n=v()(e,"payload.data.outdata.outputField","selection");Object(f.q)(Object(r.a)(Object(r.a)({},t),{},Object(T.a)({},n,t)),"action_sendform"),_(t),u(!1),g(!0)},K=v()(e,"payload.data.outdata.listOptions",[]),Y=v()(e,"payload.data.outdata.listHeader",G),Q=K.length>=4,J=v()(a,"context.agentAvatar","");return l.a.createElement("div",{className:"chat_question ".concat(i?"slide-bottom-up":"")},l.a.createElement("div",{className:"chat_question_image"},l.a.createElement("span",null,l.a.createElement("img",{src:J,alt:""}))),l.a.createElement("div",{className:"chat_question_chat list_options border-chat",style:{display:"unset"}},l.a.createElement("b",null,Y),l.a.createElement("div",{className:"mt-2"},S?l.a.createElement(l.a.Fragment,null,!E&&!L&&K.slice(0,3).map((function(e){return l.a.createElement(H,{key:e.value,option:e})}))):l.a.createElement(l.a.Fragment,null,!E&&K.slice(0,3).map((function(e){return l.a.createElement(z,{key:e.value,option:e})}))),!E&&Q&&!L&&l.a.createElement(l.a.Fragment,null,l.a.createElement(Ue.a,{variant:"light",className:"mt-2 text-left list_options_button",onClick:function(){return u(!0)},disabled:h},F,l.a.createElement("i",{className:"dripicons-chevron-right more_options_icon"})),S&&l.a.createElement(Ue.a,{variant:"light",className:"mt-2 list_options_button",onClick:function(){return V()},disabled:h},U)),L&&I.length>0&&l.a.createElement("p",null,I.map(().join(", ")),E&&l.a.createElement("p",null,E.text)),d&&l.a.createElement(he,{hideDrawer:,l.a.createElement("div",{className:"p-3"},l.a.createElement("h6",{className:"mb-3"},F),S?l.a.createElement(l.a.Fragment,null,K.map((function(e){return l.a.createElement(H,{key:e.value,option:e})}))):l.a.createElement(l.a.Fragment,null,K.map(()),S&&l.a.createElement(Ue.a,{variant:"light",className:"mt-2 list_options_button",onClick:disabled:h},U)))))},ze=n(1730),He=function(e){var t=document.getElementById("calendlyjs");if(!t){var n=document.createElement("script");n.src="https://assets.calendly.com/assets/external/widget.js",n.id="calendlyjs";var a=document.createElement("link");a.href="https://assets.calendly.com/assets/external/widget.css",document.body.appendChild(n),document.body.appendChild(a),n.onload=t&&e&&e()};var qe=function(e){var t=v()(e,"payloadData.outdata.calendlyUrl",null),n=v()(e,"payloadData.outdata.fields",{}),a=Object(s.useState)(!1),i=Object(R.a)(a,2),o=i[0],r=i[1],c=Object(s.useState)(!1),d=Object(R.a)(c,2),u=d[0],p=d[1],m=Object(s.useState)(!1),h=Object(R.a)(m,2),f=h[0],g=h[1];Object(s.useEffect)((,[]),Object(s.useEffect)((function(){var t=function(t){((t)&&"calendly.event_scheduled"===t.data.event&&(r(!0),setTimeout((function(){var n;n=t.data.payload,e.mbus.sendMesg({sender:"chasitor",adata:{calendlyPayload:n},type:"action_sendform"})}),5e3))};return o||window.addEventListener("message",t),),[o]),Object(s.useEffect)((function(){f&&b();var e=setInterval((function(){var t=!!document.getElementsByTagName("iframe")[0];p(t),t&&clearInterval(e)}),1e3)}),[f]);var b=function(){t&&window.Calendly.initInlineWidget({url:t,parentElement:document.getElementById("calendly-calendar-component"),prefill:n,utm:{}})};return l.a.createElement(ze.a,{spinning:!u},l.a.createElement("div",{id:"calendly-calendar-component"}))},Ve=n(447),We=n.n(Ve),Ke=n(450),Ye=n.n(Ke);function Qe(e){var t=Object(y.d)(().clientConfigData,n=Object(s.useRef)(),a=document.getElementsByClassName("message-area-container")[0],i=Object(s.useState)(!1),o=Object(R.a)(i,2),r=o[0],c=o[1],d=Object(y.c)(),u=Object(s.useState)(e.readOnly),p=Object(R.a)(u,2),m=p[0],h=p[1],g=Object(s.useState)(v()(e.payload,"data.userData.formV2.formData",{})),b=Object(R.a)(g,2),w=b[0],E=b[1],_=Object(s.useState)(!1),O=Object(R.a)(_,2),C=O[0],S=O[1],k=v()(e.payload,"data.userData.formV2.formDefinition",{}),x=null===t||void 0===t?void 0:t.context,T=(null===t||void 0===t?void 0:t.translations)||{},j=x.locale.split("_")[0],N={};x.locale in T&&(N[j]=T[x.locale]);var I={noAlerts:!0,language:j,i18n:N,disableAlerts:!0,readOnly:!1};Object(s.useEffect)((function(){var t=v()(e.payload,"data.userData.formV2.formSetting");t&&t.useCustomCss&&t.customCss),setTimeout((,300)}),[]),Object(s.useEffect)((function(){var t=setTimeout((function(){c(!0),Object(f.p)(500),e.isLast&&d(Object(F.o)(!0))}),e.waitBeforeShow);return function(){return clearTimeout(t)}}),[e.waitBeforeShow]);Object(s.useEffect)((,[m]);var A=function(e){"Enter"===e.key&&n.current&&!m&&n.current.formio.checkValidity()&&n.current.formio.submit()};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"dc-formio-form inline dc-custom-style disable_form_"+m,style:{display:r?"inline-block":"none",width:"100%"}},l.a.createElement(X.Form,{ref:n,src:We()(k),onSubmit:function(e){if(e.data||Object(f.m)(),!C){var t=Ye()(v()(e,"data",{}),"submit");E(t),Object(f.q)(t,"action_sendform"),h(!0),S(!0)}},options:I,onInitialized:submission:{data:w}})),v()(e.payload,"data.userData.showNevermind")&&e.isLast&&l.a.createElement("div",{style:{display:r?"inline-block":"none"},className:"help_button_block ".concat(e.isMessageTransitionBottomUp?"slide-bottom-up":""),id:"nevermind"},l.a.createElement("a",{className:"btn border-btn",onClick:,"Nevermind")))}X.Formio.registerComponent("iframe",ne),n(709);var Je=n(211),Xe=n.n(Je),Ze=(n(1496),n(198)),et=n.n(Ze),tt={selectedFile:null,isSelected:!1,progress:0,showProgress:!1,uploadStatus:null,showUploadButton:!1,uploadBtnText:"Upload",showLoader:!1,cancelToken:null,showDrawer:!1,errorResponse:null,showMaxSizeError:!1,showButtonLoader:!1},nt=function(e,t){return"RESET"!==t?Object(r.a)(Object(r.a)({},e),t):tt};var at=function(e){var t,n=e.onClose,a=e.maxSizeInMb,i=e.open,o=e.uploadText,c=e.title,d=e.uploadUrl,u=Object(y.d)((),p=u.mbus,h=u.clientConfigData,g=null===h||void 0===h?void 0:h.context,b=Object(s.createRef)(),w=null===h||void 0===h?void 0:h.translations,E=null===h||void 0===h||null===(t=h.context)||void 0===t?void 0:t.locale,_=v()(w,"".concat(E,".upload"),"Upload"),O=v()(w,"".concat(E,".retry"),"Retry"),C=v()(w,"".concat(E,".uploadFile"),"Upload File"),S=v()(w,"".concat(E,".uploadSuccess"),"Upload Success"),k=v()(w,"".concat(E,".uploadError"),"Upload Error"),x=v()(w,"".concat(E,".close"),"Close"),T=v()(w,"".concat(E,".fileSizeError"),"File size should be less than 50Mb"),j=v()(w,"".concat(E,".maxFileSizeError"),"Maximum file upload size is"),N=v()(w,"".concat(E,".cancel"),"Cancel"),I=Object(s.useReducer)(nt,tt),A=Object(R.a)(I,2),D=A[0],M=A[1],L=D.selectedFile,$=D.isSelected,P=D.progress,B=D.showProgress,F=D.uploadStatus,U=D.showUploadButton,G=D.uploadBtnText,z=D.showLoader,H=D.cancelToken,q=D.showDrawer,V=D.errorResponse,W=D.showMaxSizeError,K=D.showButtonLoader;Object(s.useEffect)((function(){M({uploadBtnText:_})}),[]),Object(s.useEffect)((,[i]);var Y=function(e){var t=new FormData,n=Xe.a.CancelToken.source();"ERROR"===F&&M({uploadStatus:null,showProgress:!0,progress:0});var a="",i="",o={};if(M({showButtonLoader:!0}),e&&!d){var s=e.fields,l=s.AWSAccessKeyId,c=s.policy,u=s.key,p=s.signature;a=e.url,i=u,t.append("key",u),t.append("policy",c),t.append("signature",p),t.append("AWSAccessKeyId",l),o={onUploadProgress:function(e){var t=e.loaded/e.total*100;M({showProgress:!0,progress:t})}}}else d&&!e&&(a=d);var m=Object(r.a)({headers:{"content-type":"multipart/form-data"},cancelToken:n.token},o);t.append("file",L),Xe.a.post(a,t,m).then((function(e){M({showProgress:!1,uploadStatus:"SUCCESS",showUploadButton:!1,showButtonLoader:!1}),d?Q("SUCCESS"):X("SUCCESS",{fileUrl:"https://uploads.converseapps.net/".concat(encodeURI(i)),fileName:L.name,fileType:L.type})})).catch((function(e){Xe.a.isCancel(e)?M({uploadStatus:null}):M({uploadStatus:"ERROR"}),M({showUploadButton:!0,uploadBtnText:O,showProgress:!1,errorResponse:e,showButtonLoader:!1})})),M({cancelToken:n})},Q=function(e,t){d||(null==e?J():"ERROR"===e&&Z(V)),(null===b||void 0===b?void 0:b.current)&&null==t&&b.current.refCloseDrawer(),setTimeout((,400)},J=function(){Object(f.q)({status:"cancelled"},"action_fileupload")},X=function(e,t){Object(f.q)(Object(r.a)({status:"success"},t),"action_fileupload"),setTimeout((,3e3)},Z=function(e){Object(f.q)({status:"failed",data:e},"action_fileupload")};return l.a.createElement(l.a.Fragment,null,q&&l.a.createElement(he,{drawerHeight:"content",hideDrawer:hideFooter:!0,titleWithCloseIcon:c||C,ref:b},l.a.createElement("div",{className:"p-4"},z&&l.a.createElement("div",{className:"file-upload-spinner"},l.a.createElement("div",{className:"spinner-border",role:"status"})),$&&!F&&l.a.createElement("div",{className:"mb-3"},l.a.createElement("div",{className:"text-center"},l.a.createElement("i",{className:"icon-feather-file",style:{fontSize:45}}),l.a.createElement("div",null,L.name)),B&&l.a.createElement("div",{className:"progress mb-2"},l.a.createElement("div",{className:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:{width:"".concat(P,"%")},"aria-valuenow":P,"aria-valuemin":"0","aria-valuemax":"100"}))),l.a.createElement("div",{className:"".concat(null==F?"mb-0":"mb-3")},"SUCCESS"===F&&l.a.createElement("div",{className:"text-center"},l.a.createElement("i",{className:"icon-feather-check",style:{fontSize:45,color:"#28a745"}}),l.a.createElement("h5",{className:"mb-3",style:{color:"#28a745"}},S),l.a.createElement("div",{className:"upload-button",onClick:style:{width:"50%",margin:"auto"}},x)),"ERROR"===F&&l.a.createElement("div",{className:"text-center"},l.a.createElement("i",{className:"icon-feather-x",style:{fontSize:45,color:"#dc3545"}}),l.a.createElement("h5",{style:{color:"#dc3545"}},k))),l.a.createElement("div",{className:"mb-3 d-flex text-center flex-column"},!$&&l.a.createElement("div",null,l.a.createElement("div",{className:"d-flex flex-column align-items-center mb-2"},l.a.createElement("div",{className:"alert alert-danger p-0 m-0",role:"alert",style:{transition:"all 0.5s ease-in",opacity:W?1:0}},W&&l.a.createElement("p",{className:"p-2 m-0"},T)),l.a.createElement("div",{className:"file ".concat(W?"mt-2":"mt-0")},l.a.createElement("label",{className:"file-label"},l.a.createElement("input",{className:"file-input cursor-pointer",type:"file",onChange:function(e){var t=e.target.files[0],n=if(a){var i=Math.pow(1024,2)*Number(a);t.size<i?(n(),M({showMaxSizeError:!1})):M({showMaxSizeError:!0})}else n()},accept:".3g2, .3gp, .7z, .aac, .amr, .avi, .bmp, .csv, .doc, .docx, .eml, .gif, .heic, .heif, .ics, .jfif, .jpeg, .jpg, .key, .log, .m4a, .m4v, .mov, .mp3, .mp4, .mp4a, .mpeg, .mpg, .mpga, .neon, .numbers, .odt, .oga, .ogg, .ogv, .opus, .pages, .pdf, .png, .pps, .ppsx, .ppt, .pptx, .qt, .svg, .tif, .tiff, .txt, .vcf, .wav, .webm, .webp, .wmv, .xls, .xlsx, .xml, .yaml, .yml, .zip"}),l.a.createElement("span",{className:"file-cta"},l.a.createElement("span",{className:"file-icon"},l.a.createElement("i",{className:"icon-feather-upload"})),l.a.createElement("span",{className:"file-label"},o||"Choose a file to upload")))),a&&l.a.createElement("div",{style:{fontSize:12,color:"red"}},"".concat(j," ").concat(a,"Mb")))),U&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"csat-submit-footer",style:{paddingBottom:0}},l.a.createElement(Ue.a,{className:"cancel-button",onClick:function(){H&&null==F?H.cancel():M({isSelected:!1,selectedFile:null,uploadStatus:null,showUploadButton:!1,uploadBtnText:_,errorResponse:null}),M({cancelToken:null,progress:0,uploadStatus:null})}},N),l.a.createElement(Ue.a,{className:"upload-button primary-button",onClick:function(e){if(e.preventDefault(),L&&!d){var t,n=g.orgId,a=g.botName;M({showLoader:!0}),Xe.a.post("".concat(m.b,"/connectors/attachments/get-presigned-url"),{fileName:"uploads/".concat(n,"/").concat(a,"/").concat(null===p||void 0===p||null===(t=p.config)||void 0===t?void 0:t.channel,"/").concat(et()(),"/").concat(L.name)}).then((function(e){M({showLoader:!1,showProgress:!0}),Y(e.data)})).catch((function(e){M({showLoader:!1,uploadStatus:"ERROR",uploadBtnText:O,showUploadButton:!0,showProgress:!1,errorResponse:e})}))}else d&&L&&Y()},style:Object(r.a)({},P>0||K?{pointerEvents:"none",opacity:.5}:{}),disabled:K},l.a.createElement(l.a.Fragment,null,K&&l.a.createElement("div",{className:"spinner-border",style:{width:"1rem",height:"1rem",borderWidth:"0.2em",marginBottom:2},role:"status"}),G))))))))},it=n(1721),ot=n(364),rt=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).showLoader=a.hideLoader=a.renderFirstMedia=function(e,t,n){if(t.atype&&"image"===t.atype)return l.a.createElement("img",{src:t.image_url,alt:""});if("video"===t.atype){var a=t.video_url||t.text;return l.a.createElement(Oe.a,{url:a,height:"150px",width:"300px"})}},a.handleGuideHeight=function(){var e,t,n,i=(null===(e=document.querySelector(".dc-macro-step-container"))||void 0===e?void 0:e.clientHeight)||0,o=(null===(t=document.querySelector(".dc-macro--options-mo"))||void 0===t?void 0:t.clientHeight)||0,r=(null===(n=document.querySelector(".dc-macro--options-so"))||void 0===n?void 0:n.clientHeight)||0;a.props.handleGuideHeight("".concat(i+o+r,"px"))},a.renderTemplate=function(e,t,n){0===n&&(a.renderMedia=!1);var i=e.steps.length===n+1,o=t.translatedTxt||t.text;if(i&&!a.state.isLastStep&&a.setState({lastStep:t,isLastStep:i}),t.atype&&("message"===t.atype||"richText"===t.atype))return l.a.createElement(De,{type:t.atype,messagetext:o,isLast:i,zafClient:a.props.zafClient});if(t.atype&&"image"===t.atype&&t.image_url){var r="dc--macro--media-item-hide";if(a.renderMedia)r="dc--macro--media-item-show";else a.renderMedia=!0;return l.a.createElement(De,{type:t.atype,messagetext:t.image_url,isLast:i,custClass:r,handleGuideHeight:a.handleGuideHeight})}if(t.atype&&"link"===t.atype)return l.a.createElement(De,{type:t.atype,url:t.url,messagetext:o,isLast:i});if(t.atype&&"video"===t.atype){r="dc--macro--media-item-hide";if(a.renderMedia)r="dc--macro--media-item-show";else a.renderMedia=!0;return l.a.createElement(De,{type:t.atype,url:t.video_url||t.text,messagetext:o,isLast:i,custClass:r})}},a.showLastStep=function(){var e=a.state.lastStep;if(e.atype&&"message"===e.atype)return l.a.createElement(De,{type:e.atype,messagetext:e.translatedTxt||e.text,isLast:!0,zafClient:a.props.zafClient})},a.renderOptions=function(e){if(e.payload&&e.payload.data&&e.payload.data.options)return l.a.createElement(Le,{payloadData:e.payload.data,mbus:a.props.mbus,clientConfigData:a.props.clientConfigData,selectedBtn:a.props.selectedBtn,handleSelectedBtn:a.props.handleSelectedBtn,handleGuideOptionsPayload:a.props.handleGuideOptionsPayload,handleGuideTransistion:a.props.handleGuideTransistion,handleIsGuideLoading:a.props.handleIsGuideLoading})},a.renderForm=function(e){if(e.payload&&e.payload.data&&e.payload.data.tpl===m.G)return v()(e,"payload.data.userData.formV2")?l.a.createElement(Qe,{payload:e.payload,mbus:a.props.mbus,showLoader:a.showLoader,clientConfigData:a.props.clientConfigData,zafClient:a.props.zafClient,hideLoader:a.hideLoader}):l.a.createElement(ie,{payload:e.payload,mbus:a.props.mbus,showLoader:a.showLoader,clientConfigData:a.props.clientConfigData,zafClient:a.props.zafClient,hideLoader:a.hideLoader})},a.renderKnowledge=function(e){return e.payload&&e.payload.data&&e.payload.data.tpl===m.P?l.a.createElement(J,{payload:e.payload,mbus:a.props.mbus,index:a.props.index,clientConfigData:a.props.clientConfigData}):e.payload&&e.payload.data&&e.payload.data.tpl===m.R?l.a.createElement(Fe,{payload:e.payload,mbus:a.props.mbus,index:a.props.index,clientConfigData:a.props.clientConfigData}):e.payload&&e.payload.data&&e.payload.data.tpl===m.Q?l.a.createElement(ye,{payload:e.payload,mbus:a.props.mbus,index:a.props.index,clientConfigData:a.props.clientConfigData}):void 0},a.renderCarousel=function(e){if(e.payload&&e.payload.data&&e.payload.data.tpl===m.f)return l.a.createElement(Be,{payload:e.payload})},a.renderBackButton=function(){if(a.props.isActionBtnsVisible)return l.a.createElement("div",{className:"dc-macro--action-back-btn"},l.a.createElement("i",{className:"fa fa-long-arrow-left dc-macro--action-icon dc-macro--action-back-icon",style:{padding:8,fontSize:14,borderRadius:8},onClick:a.props.goBack}))},a.renderListOptions=function(e){return l.a.createElement(Ge,{payloadData:e.payload.data,mbus:a.props.mbus,clientConfigData:a.props.clientConfigData})},a.renderCalendlyApp=function(e){return l.a.createElement(qe,{payloadData:e.payload.data,mbus:a.props.mbus,clientConfigData:a.props.clientConfigData})},a.renderFileUpload=function(e){return l.a.createElement(at,{payloadData:e.payload.data,mbus:a.props.mbus,clientConfigData:a.props.clientConfigData,maxSizeInMb:50})},a.handleGoBack=function(){var e=a.props.message,t=v()(e,"payload.data");a.props.handleGuideTransistion(null===t||void 0===t?void 0:t.instID,"moveToRightFromLeft"),a.props.goBack()},a.state={showLoader:!1,lastStep:"",isLastStep:!1},a.isFirstMedia=!0,a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){this.handleGuideHeight()}},{key:"render",value:function(){var e=this,t=this.props.message,n=this.props,a=n.isActionBtnsVisible,i=n.clientConfigData,o=v()(t,"payload.data"),r=(v()(o,"header.txt"),v()(i,"context.headerLogo")),s=v()(i,"context.showHeader"),c="1"===s||"3"===s,d=(v()(i,"context.showHistory"),v()(i,"context.showRestart"),this.props.hasMedia?"dc-macro--dp":"dc-macro--sp");r&&c&&(d+=" dc-macro--sh");var u=window.ConverseAppsMacro.theme.primaryColor||"#047bf8",p=o&&o.options&&o.options.length,h=!(!o||o.tpl!==m.G),f=!(!o||o.tpl!==m.P&&o.tpl!==m.Q&&o.tpl!==m.R),g=!(!o||o.tpl!==m.S),b=1==p?"dc-macro--options-so":"dc-macro--options-mo",y=!(!o||o.tpl!==m.f),w=v()(o,"tpl")===m.e,E=v()(o,"tpl")===m.db;return l.a.createElement(l.a.Fragment,null,this.state.showLoader?l.a.createElement("div",{style:{margin:"30vh auto"}},l.a.createElement(pe.a,{type:"bars",color:u,width:"35px",className:"dc-macro--loader spokes"})):l.a.createElement("div",{className:"dc-macro-step-container dc-macro--item "+d,id:"dmm-"+o.instID},l.a.createElement("div",{className:"dc-macro--item_image"},l.a.createElement("div",{className:"element",style:{display:"none"}},l.a.createElement("div",{className:"dummy"})),l.a.createElement("div",{className:"element"},o.steps&&o.steps.map((function(t,n){return t.atype&&("image"===t.atype||"video"===t.atype)&&l.a.createElement("div",{className:"media-item"},e.renderFirstMedia(o,t,n))})))),l.a.createElement("div",{className:"dc-macro--item_content"},l.a.createElement("div",{className:"dc-macro--question__block"},l.a.createElement(it.a,{onBack:a?this.handleGoBack:null,className:"page-header-container p-0",backIcon:a?l.a.createElement(ot.a,null):null,title:a?l.a.createElement("div",{className:"dc-macro--question__title ".concat(a?"ml-1":""),style:{cursor:"pointer"},onClick:this.handleGoBack},"Back"):" "}),o.steps&&o.steps.map((function(t,n){return l.a.createElement("div",{key:"step_"+n,className:"dc-macro--question"},e.renderTemplate(o,t,n))}))),l.a.createElement("div",{className:"dc-macro--tplsection"},this.hideLoader(),l.a.createElement("div",{className:"dc-macro--question-last"},this.showLastStep()),p>0&&l.a.createElement("div",{className:b},this.renderOptions(t)),h&&l.a.createElement("div",{className:"dc-macro--tpl-form"},this.renderForm(t)),f&&l.a.createElement("div",{className:"dc-macro--tpl-knowledge"},this.renderKnowledge(t)),y&&l.a.createElement("div",{className:"dc-macro--tpl-carousel"},this.renderCarousel(t)),g&&l.a.createElement("div",{className:"dc-macro--tpl-listoptions"},this.renderListOptions(t)),w&&l.a.createElement("div",{className:"dc-macro--tpl-calendlyapp"},this.renderCalendlyApp(t)),E&&l.a.createElement("div",{className:"dc-macro--tpl-uploadattachment"},this.renderFileUpload(t))))))}}]),n}(s.Component);rt.displayName="ServerMessageRenderer";var st=rt,lt=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).onLinkClick=a.onSlide=function(e,t){var n=document.getElementsByClassName("carousel-control-next"),a=document.getElementsByClassName("carousel-control-prev");e===t-1?n.forEach((function(e){e.style.visibility="hidden"})):0===e?a.forEach(():(n.forEach((function(e){"visible"!==e.style.visibility&&(e.style.visibility="visible")})),a.forEach(())},a.state={},a}return Object(O.a)(n,[{key:"render",value:function(){var e=this,t=this.props.elements,n=t&&t.length,a=n>1?"block":"none";return l.a.createElement($e.a,{className:"dcbot--templates__carousel container",nextIcon:l.a.createElement("i",{className:"fa fa-chevron-right",style:{display:a},"aria-hidden":"true"}),prevIcon:l.a.createElement("i",{className:"fa fa-chevron-left",style:{display:a},"aria-hidden":"true"}),controls:!0,touch:!0,interval:3e5,onSlide:,t&&t.map((function(t,i){return l.a.createElement($e.a.Item,{key:i},l.a.createElement("div",null,l.a.createElement(De,{type:t.type,url:t.value,messagetext:t.value,isLast:!1,mbus:e.props.mbus,handleGuideHeight:e.props.handleGuideHeight})),l.a.createElement("div",{className:"number-indicator",style:{display:a}},i+1," / ",n))})))}}]),n}(l.a.Component);lt.displayName="GuideCarousel";var ct=lt,dt=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);eturn Object(O.a)(n,[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.goNext,a=t?"disabled":"enabled";return l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{className:"dc-macro--btn next "+a,onClick:n},l.a.createElement("span",null,"Continue"),l.a.createElement("i",{className:"fa fa-arrow-right"})))}}]),n}(s.Component);dt.displayName="NextButton";var ut=dt,pt=n(1729),mt=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;Object(_.a)(this,n),(a=t.call(this,e)).onChange=function(e,t,n,i){var o=a.state.adata;if(e&&e.target)if(e.target.checked){var r={text:i,"data-attr":t,"data-attr-tid":n};o.push(r),a.setState({adata:o,hideNextBtn:!1})}else{var s=[];o&&o.map(();var l=0==s.length;a.setState({adata:s,hideNextBtn:l})}},a.submitSelectedOption=function(){var e=a.state.adata;e&&e.length>0&&a.props.mbus.sendMesg({sender:"chasitor",adata:e,type:"action_menuclick"})};var i=v()(a.props.clientConfigData,"context");return a.state={visible:!0,adata:[],hideNextBtn:!0},a.optionsType=i&&i.optionsType||"buttons",a}return Object(O.a)(n,[{key:"render",value:function(){var e=this,t=this.props.payloadData;return l.a.createElement(l.a.Fragment,null,this.state.visible&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"dc-macro--help__block "+this.optionsType,id:t.header.tid},l.a.createElement("div",{className:"items"},t.options.map((function(n,a){return l.a.createElement(l.a.Fragment,null,l.a.createElement("a",{key:"a_"+a,className:"dc-macro--help__btn btn border-btn",href:"#!","data-attr":n.id,"data-attr-tid":t.header.tid},"Guide"===t.tpl&&n.image?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"dc-macro--checkbox right",style:{right:10}},l.a.createElement(pt.a,{onChange:function(a){return e.onChange(a,n.id,t.header.tid,n.txt)}})),l.a.createElement("span",{className:"content-section"},l.a.createElement("span",{className:"btn-image"},l.a.createElement("img",{src:n.image,className:"help-btn-image",alt:"image"})),l.a.createElement("span",{className:"btn-label"},n.txt))):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"dc-macro--checkbox left",style:{left:10}},l.a.createElement(pt.a,{onChange:function(a){return e.onChange(a,n.id,t.header.tid,n.txt)}})),n.txt)))})))),l.a.createElement("div",{style:{marginTop:"20px"}},l.a.createElement(ut,{goNext:this.submitSelectedOption,visible:this.state.hideNextBtn}))))}}]),n}(s.Component),ht=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).renderMedia=function(e){var t=Object(Se.get)(e,"payload.data.userData.stepData.media");return l.a.createElement(ct,{elements:t,mbus:a.props.mbus,handleGuideHeight:a.handleGuideHeight})},a.renderOptions=function(e){if(Object(Se.get)(e,"payload.data.options"))return"multiselect"===(Object(Se.get)(e,"payload.data.userData.renderType")||"default")?l.a.createElement(mt,{payloadData:e.payload.data,mbus:a.props.mbus,clientConfigData:a.props.clientConfigData}):l.a.createElement(Le,{payloadData:e.payload.data,mbus:a.props.mbus,clientConfigData:a.props.clientConfigData,selectedBtn:a.props.selectedBtn,handleSelectedBtn:a.props.handleSelectedBtn,handleGuideOptionsPayload:a.props.handleGuideOptionsPayload,handleGuideTransistion:a.props.handleGuideTransistion,handleIsGuideLoading:a.props.handleIsGuideLoading})},a.handleGuideHeight=function(){var e,t,n,i=(null===(e=document.querySelector(".dc-macro--guidestep"))||void 0===e?void 0:e.clientHeight)||0,o=(null===(t=document.querySelector(".dc-macro--options-mo"))||void 0===t?void 0:t.clientHeight)||0,r=(null===(n=document.querySelector(".dc-macro--options-so"))||void 0===n?void 0:n.clientHeight)||0;a.props.handleGuideHeight("".concat(i+o+r,"px"))},a.renderTemplate=function(e){var t=e.subTitle,n=e.content;return l.a.createElement(l.a.Fragment,null,t&&l.a.createElement("div",{className:"dc-macro--question__subtitle"},t),n&&l.a.createElement(De,{type:"richText",messagetext:n,isLast:!1,zafClient:a.props.zafClient,mbus:a.props.mbus,handleGuideHeight:a.handleGuideHeight}))},a.renderQuestion=function(e){var t=e.question;return l.a.createElement(l.a.Fragment,null,t&&l.a.createElement("div",{className:"dc-macro--question-last"},l.a.createElement(De,{type:"message",messagetext:t,isLast:!0,zafClient:a.props.zafClient,mbus:a.props.mbus,handleGuideHeight:a.handleGuideHeight})))},a.handleGoBack=function(){var e=a.props.message,t=Object(Se.get)(e,"payload.data");a.props.handleGuideTransistion(null===t||void 0===t?void 0:t.instID,"moveToRightFromLeft"),a.props.goBack()},a.state={showMedia:!1,showContent:!1},a}return Object(O.a)(n,[{key:"componentDidMount",value:,{key:"render",value:function(){var e,t,n=this.props.message,a=this.props,i=a.isActionBtnsVisible,o=(a.goBack,a.clientConfigData),r=Object(Se.get)(n,"payload.data"),s=Object(Se.get)(o,"context.headerLogo"),c=Object(Se.get)(o,"context.showHeader"),d="1"===c||"3"===c,u=(Object(Se.get)(o,"context.showHistory"),Object(Se.get)(r,"userData.stepData.media",[]).length>0?"dc-macro--dp":"dc-macro--sp");s&&d&&(u+=" dc-macro--sh");var p=r&&r.options&&r.options.length,m=1==p?"dc-macro--options-so":"dc-macro--options-mo";return l.a.createElement("div",{className:"dc-macro--guidestep"},l.a.createElement("div",{className:"dc-macro--item "+u,id:"dmm-"+r.instID},l.a.createElement("div",{className:"dc-macro--item_content relative"},l.a.createElement(it.a,{onBack:i?this.handleGoBack:null,className:"page-header-container p-0",backIcon:i?l.a.createElement(ot.a,null):null,title:l.a.createElement("div",{className:"dc-macro--question__title ".concat(i?"ml-1":"")},null===r||void 0===r||null===(e=r.userData)||void 0===e||null===(t=e.stepData)||void 0===t?void 0:t.title)}),l.a.createElement("div",{className:"dc-macro--question__block"},r&&r.userData&&r.userData.stepData&&l.a.createElement("div",{className:"dc-macro--question"},this.renderTemplate(r.userData.stepData))),Object(Se.get)(n,"payload.data.userData.stepData.media")&&l.a.createElement("div",{className:"dc-macro--item_image"},l.a.createElement("div",{className:"element"},l.a.createElement("div",{className:"media-item"},this.renderMedia(n)))),l.a.createElement("div",{className:"dc-macro--tplsection"},r&&r.userData&&r.userData.stepData&&this.renderQuestion(r.userData.stepData),p>0&&l.a.createElement("div",{className:m},this.renderOptions(n))))))}}]),n}(s.Component),ft=function(){function e(t,n){Object(_.a)(this,e),this.islocalstorage=t||!1,this.memorystorage=n,this.namespace="dg_"+v()(window.ConverseAppsMacro,"context.orgId")+"_"+v()(window.ConverseAppsMacro,"context.procId")}return Object(O.a)(e,[{key:"set",value:function(e,t){e=this.namespace+"."+e,this.islocalstorage?localStorage.setItem(e,t):(this.sendMessageToParentIframe("SET",e,t),this.memorystorage.setItem(e,t))}},{key:"get",value:function(e){return e=this.namespace+"."+e,this.islocalstorage?localStorage.getItem(e):(this.sendMessageToParentIframe("GET",e),this.memorystorage.getItem(e))}},{key:"remove",value:function(e){e=this.namespace+"."+e,this.islocalstorage?localStorage.removeItem(e):(this.sendMessageToParentIframe("REMOVE",e),this.memorystorage.removeItem(e))}},{key:"clear",value:function(){if(this.islocalstorage)for(var e=0,t=Object.entries(localStorage);e<t.length;e++){var n=Object(R.a)(t[e],2),a=n[0],i=(n[1],a.split("."));"__dc"===i[i.length-1].substring(0,4)&&localStorage.removeItem(a)}else this.sendMessageToParentIframe("CLEAR"),this.memorystorage.clear()}},{key:"clearPrevious",value:function(){if(this.islocalstorage){for(var e=new Set,t=0,n=Object.entries(localStorage);t<n.length;t++){var a=Object(R.a)(n[t],2),i=a[0],o=a[1],r=i.split(".");2==r.length&&(e.has(r[0])||i!==r[0]+".__dcstate"||"inactive"!=o||e.add(r[0]))}for(var s=0,l=Object.entries(localStorage);s<l.length;s++){var c=Object(R.a)(l[s],2),d=c[0],u=(c[1],d.split("."));2==u.length?e.has(u[0])&&localStorage.removeItem(d):1==u.length&&localStorage.removeItem(d)}}}},{key:"setMemory",value:function(e,t){this.memorystorage.setItem(e,t)}},{key:"sendMessageToParentIframe",value:function(e,t,n){window.parentIFrame&&window.parentIFrame.sendMessage({task:"STORAGE",type:e,key:t,value:n})}}]),e}(),gt=n(1728),vt=n(1722),bt=n(1726),yt=n(727),wt=n(476),Et=n.n(wt),_t=n(594),Ot=n.n(_t),Ct=vt.a.TabPane,St=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).onTabsChange=function(e){a.setState({active:e})},a.state={message:e.message,active:1,open:e.open},a}return Object(O.a)(n,[{key:"componentWillReceiveProps",value:function(e,t){Ot()(this.state.message,e.message)?Ot()(this.state.open,e.open)||this.setState({open:e.open}):this.setState({message:e.message})}},{key:"render",value:function(){var e,t,n=this.state.message,a=null===n||void 0===n||null===(e=n.payload)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.debug;return l.a.createElement(bt.a,{width:450,title:"Inspector",placement:"right",visible:this.state.open,closable:!0,onClose:this.props.closeDebugPannel},l.a.createElement(vt.a,{defaultActiveKey:"1"},l.a.createElement(Ct,{tab:"Context",key:"1"},l.a.createElement("div",null,l.a.createElement(Et.a,{src:(null===a||void 0===a?void 0:a.ctx)||{},name:null,displayDataTypes:!1,enableClipboard:!1,displayObjectSize:!1}))),l.a.createElement(Ct,{tab:"Changes",key:"2"},l.a.createElement("div",null,Object.keys((null===a||void 0===a?void 0:a.delta)||[]).length>0?l.a.createElement(yt.a,{bordered:!0,size:"sm"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Parameter"),l.a.createElement("td",null,"Previous Value"),l.a.createElement("td",null,"New Value"))),l.a.createElement("tbody",null,Object.keys(a.delta).map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e),"object"===typeof a.delta[e][0]&&null!==a.delta[e][0]?l.a.createElement("td",{className:"table-fit"},l.a.createElement(Et.a,{src:a.delta[e][0],name:null,enableClipboard:!1,displayDataTypes:!1,displayObjectSize:!1})):l.a.createElement("td",null,null===a.delta[e][0]?"NULL":a.delta[e][0]),"object"===typeof a.delta[e][1]&&null!==a.delta[e][1]?l.a.createElement("td",{className:"table-fit"},l.a.createElement(Et.a,{src:a.delta[e][1],name:null,enableClipboard:!1,displayDataTypes:!1,displayObjectSize:!1})):l.a.createElement("td",null,a.delta[e][1]))})))):"No Changes Detected")),l.a.createElement(Ct,{tab:"Actions",key:"3"},l.a.createElement("div",null,(null===a||void 0===a?void 0:a.userAction)?l.a.createElement(l.a.Fragment,null,Object.keys(a.userAction).map((function(e){return l.a.createElement("div",{className:"json-container"},l.a.createElement("h6",null,e)," ",l.a.createElement("span",{className:"value-tag"},a.userAction[e]))}))):"No actions taken yet"))))}}]),n}(s.Component),kt=n(840),xt=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).renderMessages=function(e,t){if(e&&e.payload){var n=e.payload;if("bot"===n.sender){if(e.payload.type&&"cmd"===e.payload.type&&a.props.messages.length-1===t){if(a.Storage.set(m.A,Object(Se.get)(n,"data.header.id")),"Guide"===Object(Se.get)(n,"data.tpl"))return l.a.createElement(ht,Object.assign({message:e,mbus:a.props.mbus,clientConfigData:a.props.clientConfigData,zafClient:a.props.zafClient,goBack:a.props.goBack,isActionBtnsVisible:a.props.isActionBtnsVisible,handleGuideTransistion:a.handleGuideTransistion,handleGuideHeight:a.handleGuideHeight,handleIsGuideLoading:a.props.handleIsGuideLoading},a.props));var i=a.checkMediaAvailability(e);return l.a.createElement(st,Object.assign({message:e,mbus:a.props.mbus,clientConfigData:a.props.clientConfigData,zafClient:a.props.zafClient,goBack:a.props.goBack,isActionBtnsVisible:a.props.isActionBtnsVisible,hasMedia:i,handleGuideTransistion:a.handleGuideTransistion,handleGuideHeight:a.handleGuideHeight,handleIsGuideLoading:a.props.handleIsGuideLoading},a.props))}}else n.sender}},a.handleGuideTransistion=function(e,t){a.setState({transitionEffect:t},()},a.handleGuideHeight=function(e){a.setState({height:e})},a.state={showContextPanel:!1,transitionEffect:"moveToLeftFromRight",transitionKey:0,height:0},a.Storage=new ft(a.props.clientConfigData.isLocalStorageAllowed,a.props.clientConfigData.memorystorage),a}return Object(O.a)(n,[{key:"checkMediaAvailability",value:function(e){var t=Object(Se.get)(e,"payload.data"),n=!1;return t.steps&&t.steps.forEach((function(e){e.atype&&!n&&("image"!==e.atype&&"video"!==e.atype||(n=!0))})),n}},{key:"render",value:function(){var e,t,n=this,a=!(!this.props.isStandaloneGuide||!(null===(e=this.props.clientConfigData)||void 0===e||null===(t=e.context)||void 0===t?void 0:t.debugToken)),i=this.state,o=i.height,r=i.transitionEffect,s=i.transitionKey;return l.a.createElement("div",{className:"dc-macro--container"},a&&l.a.createElement(gt.a,{className:"float-right mt-1",onClick:function(){return n.setState({showContextPanel:!0})}},"view context"),l.a.createElement("div",{className:"dc-macro--container__main",style:{height:this.props.showLoader?"100vh":o}},l.a.createElement(kt.a,{preset:r,transitionKey:s},this.props.showLoader?l.a.createElement("div",{style:{margin:"30vh auto"}},l.a.createElement(pe.a,{type:"bars",color:"#047bf8",width:"35px",height:"30px",className:"dc-macro--loader spokes"})):l.a.createElement(l.a.Fragment,null,this.props.messages.map((function(e,t){return l.a.createElement("div",{key:"m_"+t},n.renderMessages(e,t),a&&l.a.createElement(St,{open:n.state.showContextPanel,message:e,closeDebugPannel:function(){return n.setState({showContextPanel:!1})},clientConfigData:n.props.clientConfigData}))}))))))}}]),n}(s.Component);xt.displayName="MacroMessages";var Tt=xt,jt=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).setHeader=function(){var e,t=a.props.clientConfigData&&a.props.clientConfigData.context,n=t&&t.showHeader,i=t&&t.headerText,o=t&&t.headerLogo,r="2"===n||"3"===n;return l.a.createElement(l.a.Fragment,null,o&&l.a.createElement("div",{className:"dc-macro--header ".concat(null===(e=a.props)||void 0===e?void 0:e.className)},r&&l.a.createElement("div",{className:"dc-macro--header__text"},l.a.createElement("span",null,i))))},a}return Object(O.a)(n,[{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null," ",this.setHeader())}}]),n}(s.Component);jt.displayName="Header";var Nt=jt,It=function(){function e(t,n){Object(_.a)(this,e),this.islocalstorage=t||!1,this.memorystorage=n}return Object(O.a)(e,[{key:"set",value:function(e,t){this.islocalstorage?localStorage.setItem(e,t):(this.sendMessageToParentIframe("SET",e,t),this.memorystorage.setItem(e,t))}},{key:"get",value:function(e){return this.islocalstorage?localStorage.getItem(e):(this.sendMessageToParentIframe("GET",e),this.memorystorage.getItem(e))}},{key:"remove",value:function(e){this.islocalstorage?localStorage.removeItem(e):(this.sendMessageToParentIframe("REMOVE",e),this.memorystorage.removeItem(e))}},{key:"clear",value:function(){if(this.islocalstorage){for(var e=0;e<localStorage.length;e++){var t=localStorage.key(e);-1===[m.y].indexOf(t)&&("__dcw"===t.substring(0,5)&&localStorage.removeItem(t))}for(var n=0;n<sessionStorage.length;n++){var a=sessionStorage.key(n);sessionStorage.removeItem(a)}}else this.sendMessageToParentIframe("CLEAR"),this.sendSessionStorageMessageToParentIframe("CLEAR_ALL"),this.memorystorage.clear()}},{key:"setMemory",value:,{key:"sendMessageToParentIframe",value:function(e,t,n){window.parentIFrame&&window.parentIFrame.sendMessage({task:"STORAGE",type:e,key:t,value:n})}},{key:"getSessionStorage",value:function(e){return Object(h.b)()?sessionStorage.getItem(e):(this.sendSessionStorageMessageToParentIframe("GET",e),this.memorystorage.getItem(e))}},{key:"setSessionStorage",value:function(e,t){Object(h.b)()?sessionStorage.setItem(e,t):(this.sendSessionStorageMessageToParentIframe("SET",e,t),this.memorystorage.setItem(e,t))}},{key:"sendSessionStorageMessageToParentIframe",value:function(e,t,n){window.parentIFrame&&window.parentIFrame.sendMessage({task:"SESSION_STORAGE",type:e,key:t,value:n})}}]),e}();function At(e){var t=new It(e.isLocalStorageAllowed,e.memorystorage),n=t.get(m.s);t.get("routeKey")&&(n=t.get("routeKey"));var a=t.get("pid"),i=t.get("siteId"),o=t.get("mode"),r=t.get("appId"),s=t.get("orgId"),l=t.get(m.z);n||(n=Math.floor(1e4*Math.random()),t.set(m.s,n),t.set(m.t,"dcdebug"));var c=e&&e.context;c.siteId=i||c.siteId,c.routeKey=n,c.appId=r||c.appId,c.procId=a||c.procId,c.logThreshold=l||c.logThreshold||"5",c.mode=o||c.mode||"1",c.orgId=s||c.orgId;var d={params:{appId:c.appId,orgId:c.orgId,siteId:c.appId,procId:c.procId,routeKey:n||"-500",mode:c.mode,draft:c.draft,locale:c.locale,browser_src:"GUIDE"}};for(var u in c)c.hasOwnProperty(u)&&(u.startsWith("browser_")||u.startsWith("version_"))&&(d.params[u]=c[u]);if(window.ConverseAppsGuideSession){var p=window.ConverseAppsGuideSession.browserParams;d.params=Object.assign({},d.params,window.ConverseAppsGuideSession),null!=p&&Object.keys(p).forEach((function(e){d.params["browser_"+e]=p[e]}))}if(""!==(null===c||void 0===c?void 0:c.debugToken)&&(d.params.debugToken=null===c||void 0===c?void 0:c.debugToken),!(n>1e4))return d.params}var Dt=n(478),Mt=function(){function e(t,n){Object(_.a)(this,e),this.logthreshold=t||0,this.loggername=n||"logger"}return Object(O.a)(e,[{key:"log",value:function(){var e=this,t=[].slice.apply(arguments);if(!(t.length<2)){var n=t[0],a=t[1];if(t.shift(),!(n<e.logthreshold))try{"object"==typeof a?console.debug(e.loggername+" : "+n+" : ",a):1===t.length?console.debug(e.loggername+" : "+n+" : "+a):console.debug(e.loggername+" : "+n+" : ",t)}catch(i){}}}}]),e}(),Lt=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;Object(_.a)(this,n);var i=(a=t.call(this,e)).props.clientConfigData;return a.Storage=new ft(i.isLocalStorageAllowed,i.memorystorage),a.Logger=new Mt(a.Storage.get(m.z),"MessageBus"),a.getMessageData=a.getMessageData.bind(Object(C.a)(a)),a.retryTimes=5,a}return Object(O.a)(n,[{key:"getMessageData",value:function(){var e=Object(o.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(f.o)(t,n,1,this.retryTimes));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,n,a,r,s,l,c,d,u,p,h,g,b,y,w,E;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E=function(e){this.config=e,p.log(2,"Message bus args:",e),this.procid=e.procid,this.mode=e.mode,this.channelKeyName=m.E+this.procid,this.localClientID=""+Math.floor(10000000001*Math.random())},t=this.props,n=t.siteId,a=t.procId,r=this.props.clientConfigData,this.Logger.log(2,"MessageBus CCD is",r),e.next=6,At(r);case 6:s=e.sent,this.Logger.log(2,"context is ",s),l={siteId:n||"DEVSITE",widgetInited:!1,procid:a||s.procId,mode:s.mode,messageQueue:[]},s.browser_conversationId=v()(this.props.chatbotPayload,"data.browser_conversationId"),c=s||{},d="",p=(u=this).Logger,h=u.Storage,g=u.getMessageData,b=u.props,y=function(e){b.handleSubscriptionMessage(e,d)},w=function e(t,n){n=n||{payload:{inRenderingPhase:!1}},setTimeout((function(){l.messageQueue.length>0&&(n.payload.inRenderingPhase||((n=l.messageQueue.shift()).payload=n.payload||{inRenderingPhase:!1},y(n))),e(t,n)}),t)},l.subHandler=w(10),E.prototype.initTransport=function(e){var t=this;t.widgetStateStr=h.get(m.D)||"{}",t.segmentName=h.get(m.t)||"default";var n=h.get(m.y);n||(n=Object(Dt.v4)(),h.set(m.y,n)),t.dcwgid=n,c&&(c.dcwgid=n),t.widgetState=JSON.parse(t.widgetStateStr),t.widgetState.inited="yes",t.channel=h.get(t.channelKeyName),t.procid=t.config.procid,t.config.channel=t.channel;var a=t.config;if(a.stateSynced=!1,t.channel&&"0"===t.mode)p.log(1,"Found previous channel "),setTimeout((function(){o(a,t)}),1e3);else{var i=window.ConverseAppsMacro;i.channelId?(a.channel=i.channelId,t.channel=i.channelId,h.set(t.channelKeyName,i.channelId),setTimeout((,1e3)):console.error("Channel not found")}var o=function(t,n){t.widgetInited=!0,e({isOK:!0}),"0"===n.mode&&n.sendMesg({sender:"chasitor",type:"action_initload"})}},E.prototype.sendMesg=function(){var e=Object(o.a)(i.a.mark((function e(t,n){var a,o,r,s,u,y,w,E;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this,n&&(l.channel=n,a.channel=n,h.set(a.channelKeyName,n)),t.localClientID=a.localClientID,t.localNodeId=h.get(m.A)||"",(o=Object(f.l)(window.location,"nodeId"))&&t.type&&"init_msg"==t.type?c.startNodeId=o:delete c.startNodeId,r={payload:t,tx:{src:"widget",ch:n||a.channel,procid:a.procid,custCtx:c,segmentName:a.segmentName}},t.mtype&&(r.tx.type=t.mtype),b.handleSubscriptionMessage(r,d),p.log(2,"SendMesg data is ",r),s=null==(s=h.get(m.u))?"https://api.converseapps.com/messaging/guide/gw":"".concat(s,"/messaging/guide/gw"),u=setTimeout((function(){(null===b||void 0===b?void 0:b.handleGuideLoader)&&b.handleGuideLoader(!0)}),500),e.next=15,g(s,{method:"post",body:JSON.stringify(r)});case 15:if(y=e.sent,clearTimeout(u),e.t0=y,!e.t0){e.next=22;break}return e.next=21,y.json();case 21:e.t0=e.sent;case 22:null!=(w=e.t0)&&0!==Object.keys(w).length&&(null!=v()(w,"payload.data")||(null===(E=v()(w,"steps"))||void 0===E?void 0:E.length)>0)&&l.subHandler(w);case 24:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}(),(d=new E(l)).initTransport((function(e){e.isOK&&(p.log(1,"initTransport completed"),u.props.initializeMbus(d))}));case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null)}}]),n}(s.Component),$t=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).startConversation=function(e){a.props.startMacroFlow(),a.props.mbus.sendMesg({sender:"chasitor",text:"hi"})},a.renderContent=a.state={isVisible:!1},a.startConversation=a.startConversation.bind(Object(C.a)(a)),a.renderContent=a.renderContent.bind(Object(C.a)(a)),a}return Object(O.a)(n,[{key:"render",value:function(){var e,t=this,n=Object(f.u)("homeContent"),a=this.props.clientConfigData&&this.props.clientConfigData.context,i=a&&a.headerLogo,o=window.ConverseAppsMacro,r=(null===o||void 0===o||null===(e=o.theme)||void 0===e?void 0:e.primaryColor)||"#047bf8";return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"dc-macro--home__loader"},i&&l.a.createElement("img",{src:i,alt:""}),l.a.createElement(pe.a,{type:"bars",color:r,height:"35px",width:"35px",className:"dc-macro--loader spokes"})),l.a.createElement("div",{className:"dc-macro--home__content",style:{display:"none"}},n&&n.map((function(e,n){return l.a.createElement("div",{key:"h_"+n},t.renderContent(e,n))}))),null!=this.props.mbus&&l.a.createElement("div",{className:"dc-macro--home__btns",style:{display:"none"}},l.a.createElement("div",null,l.a.createElement(Ue.a,{className:"dc-macro--action__btn-start dc-macro--action__btn",onClick:function(e){return t.startConversation(e)}},l.a.createElement("span",null,Object(f.u)("start")),l.a.createElement("i",{className:"os-icon os-icon-arrow-right7"})))))}}]),n}(s.Component);$t.displayName="HomePage";var Pt=$t,Bt=n(312),Rt=n(1724),Ft=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"render",value:function(){var e=this.props.percentage;return l.a.createElement(Bt.a,{placement:"top",title:e+"%",overlayClassName:"dc-macro--progress tooltip"},l.a.createElement(Rt.a,{percent:e,strokeColor:"#03a202",strokeWidth:"4px"}))}}]),n}(l.a.Component),Ut=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;Object(_.a)(this,n),(a=t.call(this,e)).handleCloseEvent=a.handleRestartBtn=function(){var e={name:m.K,data:{evalue:v()(a.props.payload,"data.userData.text")||a.props.src,ename:"openguideinmodal",type:"guide",tid:v()(a.props.payload,"data.header.tid"),title:v()(a.props.payload,"data.header.txt")}},t=a.state.mbus;Object(f.s)(e),Object(f.t)("Open Guide",a.props.messagetext),a.props.handleRestartGuide(),a.props.toggleRestartButton(),a.props.handleGuideCloseBtn(),a.setState({isFlowStarted:!1,messages:[],history:[],selectedBtn:[],mbus:null},Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:setTimeout((,2e3);case 1:case"end":return e.stop()}}),e)}))))},a.handleSelectedBtn=function(e){a.setState({selectedBtn:e})},a.handleGuideLoader=function(e){a.state.isLoading?a.setState({isLoading:!1,showLoader:e}):a.setState({showLoader:!1})},a.handleIsGuideLoading=function(){a.setState({isLoading:!0})},a.initializeMbus=function(e,t){if(null==a.state.mbus){a.setMessageBus(e),a.startMacroFlow(t);var n={name:"guide_init",data:{evalue:!0,ename:"guide_init",dims:{pageUrl:v()(window.ConverseAppsGuideSession,"pageUrl")||"",referrer:v()(window.ConverseAppsGuideSession,"referrer")||"",userAgent:v()(window.ConverseAppsGuideSession,"userAgent")||"",browserParams:v()(window.ConverseAppsGuideSession,"allBrowserParams")||"",utmParams:v()(window.ConverseAppsGuideSession,"browserParams")||"",locale:v()(window.ConverseAppsGuide,"context.locale")||v()(window.ConverseAppsGuide,"locale")||""}}};a.props.toggleRestartButton(),a.props.handleGuideCloseBtn(a.handleCloseEvent),a.props.storeGuideFunc(a.handleRestartBtn),Object(f.s)(n)}},a.handleSubscriptionMessage=function(e,t){if("show history"===v()(e,"payload.text")&&"cmd"===v()(e,"payload.type")){var n=v()(e,"payload.data"),i=[],o=[];n&&n.map((function(e){var t=JSON.parse(e.data);v()(t,"payload.sender")===m.c&&i.push(t),(v()(t,"payload.sender")===m.c||v()(t,"payload.sender")===m.h&&"action_menuclick"===v()(t,"payload.type"))&&o.push(t)})),o.length>0&&a.setState({history:o}),i.length>0&&a.setState({messages:i});var r=a.getPreviousStateId(a.state.messages);a.state.mbus.sendMesg({sender:"chasitor",adata:{goto:""+r},type:"sys_client_goback"})}else{if(a.calculateProgress(e),v()(e,"payload.sender")===m.c){var s=a.state.messages;v()(e,"payload.data.backtrack")&&s.pop(),a.setState({messages:[].concat(Object(x.a)(s),[e])})}if(v()(e,"payload.sender")===m.c||v()(e,"payload.sender")===m.h&&("action_menuclick"===v()(e,"payload.type")||"action_sendform"===v()(e,"payload.type"))){var l=a.state.history;v()(e,"payload.data.backtrack")&&l.pop(),a.setState({history:[].concat(Object(x.a)(l),[e])}),a.sendEventToParent("GUIDE_INPROGRESS")}v()(e,"payload.sender")===m.c&&"End"===v()(e,"payload.data.tpl")&&"no"===a.continueOnEnd&&a.setState({isBreadcrumbVisible:!1,isActionBtnsVisible:!1}),a.props.handleGuideMessage(e),(a.state.guideAutoClose&&"End"===v()(e,"payload.data.tpl")||"Solved"===v()(e,"payload.data.tpl")||"Unsolved"===v()(e,"payload.data.tpl"))&&(a.setState({isBreadcrumbVisible:!1,isActionBtnsVisible:!1},(function(){a.props.handleGuideClose()})),a.sendEventToParent("GUIDE_END")),e.payload.localClientID,t.localClientID}a.handleGuideLoader(!1)},a.sendEventToParent=function(e){if(window.parentIFrame){var t=v()(a.props.clientConfigData,"context.procId"),n=a.createTranscript(a.state.history);t&&window.parentIFrame.sendMessage({task:e,data:{procId:t,transcript:n,wsChannel:a.Storage.get(m.E+t),wsToken:a.Storage.get(m.F+t)}})}},a.calculateProgress=function(e){if(v()(e,"payload.sender")==m.c){var t=v()(e,"payload.data.progress")||{},n=100*(t.completed||0)/(t.total||1);a.setState({progressPercentage:n})}},a.createTranscript=function(e){var t,n,a=[];return e&&e.forEach((function(e,i){if(v()(e,"payload.sender")===m.c?(t=v()(e,"payload.data.userData.stepData.title"),n=""):v()(e,"payload.sender")!==m.h||"action_menuclick"!==v()(e,"payload.type")&&"action_sendform"!==v()(e,"payload.type")||(n=v()(e,"payload.adata.text")||v()(e,"payload.adata")),n){var o={bot:t,chasitor:n};a.push(o)}})),a},a.setMessageBus=function(e){a.setState({mbus:e})},a.goBack=function(){var e=a.state.messages,t=a.state.history;e.pop();var n=a.getPreviousStateId(e);t.pop(),t.pop(),a.state.mbus.sendMesg({sender:"chasitor",adata:{goto:""+n},type:"sys_client_goback"}),a.calculateProgress(t[t.length-1]),a.setState({messages:e,history:t})},a.removeDefaultContent=function(){var e=a.state.messages;e.pop(),a.setState({messages:e,isBreadcrumbVisible:!0})},a.startMacroFlow=function(e){a.state.mbus&&(e?a.state.mbus.sendMesg({sender:"chasitor",text:"hi",type:"init_msg"},window.ConverseAppsMacro.channelId):a.state.mbus.sendMesg({sender:"chasitor",text:"hi",type:"init_msg"}),a.setState({isFlowStarted:!0,isBreadcrumbVisible:!0}))},a.removeMessages=function(e){var t=[],n=[],i=!0,o=!0;a.state.messages.filter((function(n){e.payload.data.instID===n.payload.data.instID&&(t.push(n),i=!1),i&&t.push(n)})),a.state.history.filter((function(t){t.payload&&t.payload.data&&t.payload.data.instID&&e.payload.data.instID===t.payload.data.instID&&(n.push(t),o=!1),o&&n.push(t)})),a.setState({messages:t,history:n});var r=a.getPreviousStateId(t);a.calculateProgress(n[n.length-1]),a.state.mbus.sendMesg({sender:"chasitor",adata:{goto:""+r},type:"sys_client_goback"})},a.getPreviousStateId=function(e){a.Logger.log(2,"previousMsgList is ",e,e[e.length-1]);var t="";return e.length>0&&(t=e[e.length-1].payload.data.instID),t};var r=v()(a.props.clientConfigData,"context");return a.Storage=new ft(a.props.clientConfigData.isLocalStorageAllowed,a.props.clientConfigData.memorystorage),a.Storage.get(m.z)||a.Storage.set(m.z,r.logThreshold),a.Logger=new Mt(a.Storage.get(m.z),"Macro"),a.Logger.log(1,"context is",r),a.state={visible:!1,mbus:null,messages:[],isFlowStarted:!1,isBreadcrumbVisible:!1,isActionBtnsVisible:!0,history:[],progressPercentage:0,selectedBtn:[],guideAutoClose:v()(a.props.payload,"data.userData.text.autoClose")||v()(a.props.src,"autoClose"),showLoader:!1,isLoading:!1},a.showBreadcrumbs=r&&r.showBreadCrumbs||"yes",a.homeContent=r&&r.homeContent,a.showHeader=r&&r.showHeader||"0",a.showFooter=r&&r.showFooter||"yes",a.showHistory=r&&r.showHistory||"yes",a.continueOnEnd=r&&r.continueOnEnd||"no",a.showShareTranscript=r&&r.visibilityShareTranscript||"no",a.showProgressBar=r&&r.showProgressBar||"no",a}return Object(O.a)(n,[{key:"render",value:function(){var e=this.state,t=e.messages,n=e.mbus,a=e.isFlowStarted,i=e.history,o=e.isActionBtnsVisible,r=e.progressPercentage,s=!!(t.length>1&&o);return l.a.createElement("div",{className:"dc-macro--box"},l.a.createElement("div",{className:"dc-macro--align"},l.a.createElement("div",{className:"dc-macro--widget expand"},l.a.createElement(Lt,{setMessageBus:this.setMessageBus,handleSubscriptionMessage:this.handleSubscriptionMessage,initializeMbus:this.initializeMbus,clientConfigData:this.props.clientConfigData,chatbotPayload:this.props.payload,handleGuideLoader:this.handleGuideLoader}),"yes"===this.showProgressBar&&l.a.createElement(Ft,{percentage:r}),"0"!==this.showHeader&&a&&l.a.createElement(Nt,{clientConfigData:this.props.clientConfigData}),a?l.a.createElement(Tt,{messages:t,mbus:n,clientConfigData:this.props.clientConfigData,zafClient:this.props.zafClient,goBack:this.goBack,isActionBtnsVisible:s,removeMessages:this.removeMessages,showHistory:this.showHistory,showShareTranscript:this.showShareTranscript,historymessages:i,isStandaloneGuide:this.props.isStandaloneGuide,selectedBtn:this.state.selectedBtn,handleSelectedBtn:this.handleSelectedBtn,handleGuideOptionsPayload:this.props.handleGuideOptionsPayload,showLoader:this.state.showLoader,handleIsGuideLoading:this.handleIsGuideLoading}):l.a.createElement(Pt,{startMacroFlow:this.startMacroFlow,mbus:n,homeContent:this.homeContent,clientConfigData:this.props.clientConfigData}))))}}]),n}(s.Component);Ut.displayName="App";var Gt=Ut,zt=function(){eturn Object(O.a)(e,[{key:"getItem",value:,{key:"setItem",value:function(e,t){return this._data[e]="object"===typeof t&&null!==t?JSON.stringify(t):String(t)}},{key:"removeItem",value:,{key:"clear",value:]),e}(),Ht=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).state={clientconfig:"",showMacro:!1},a.globalConfig=window.ConverseAppsMacro,a.globalConfig.memorystorage=new zt,a.Storage=new ft(a.globalConfig.isLocalStorageAllowed,a.globalConfig.memorystorage),a.Logger=new Mt(a.Storage.get(m.z),"StandaloneGuide"),a.bindEvents(),a.onMessageReceived=a.onMessageReceived.bind(Object(C.a)(a)),a.searchparams=new URLSearchParams(window.location.search),a.handleLeaveGuide=a.handleLeaveGuide.bind(Object(C.a)(a)),a.mode=a.Storage.get("mode")||a.globalConfig&&a.globalConfig.context&&a.globalConfig.context.mode||"0",a}return Object(O.a)(n,[{key:"componentWillUnmount",value:,{key:"handleLeaveGuide",value:function(e){e.preventDefault(),this.Storage.set(m.v,"inactive")}},{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.addEventListener("beforeunload",this.handleLeaveGuide),this.Logger.log(4,"macroConfig is ",this.globalConfig),this.Storage.set(m.A,""),this.Storage.set(m.v,"active"),this.setState({clientconfig:this.globalConfig,showMacro:!0});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clearLocalStorage",value:function(){this.Storage.clear()}},{key:"clearPreviousLocalStorage",value:,{key:"bindEvents",value:function(){var e=this;window.iFrameResizer={onReady:function(){window.parentIFrame.sendMessage({task:"SESSION_INIT"}),window.parentIFrame.sendMessage({task:"STORAGE",type:"GETALL",prefix:"__dc"})},onMessage:}},{key:"onMessageReceived",value:function(e,t){if(t.Logger.log(4,"message from parent is ",e),e&&e.task&&"STORAGE"===e.task)if("GETALL"===e.type){var n=JSON.parse(e.data);for(var a in t.Logger.log(3,"local storage data is",n),n)if(n.hasOwnProperty(a)){var i=n[a];t.Logger.log(3,"local storage data is",typeof a,i),Object(f.a)(i)?t.Storage.setMemory(a,JSON.parse(i)):t.Storage.setMemory(a,i)}}else if("GET"===e.type)n=JSON.parse(e.data);switch(e.task){case"THEME_UPDATE":Object(f.g)(e.theme);break;case"SESSION_INFO":window.ConverseAppsGuideSession=e,delete window.ConverseAppsGuideSession.task,t.setState({showMacro:!0})}}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,this.state.showMacro&&l.a.createElement("div",{className:"dc-macro--outer"},l.a.createElement("div",{className:"dc-macro--wrapper all-wrapper solid-bg-all"},l.a.createElement("div",{className:"dc-macro--content__i content-i"},l.a.createElement("div",{className:"dc-macro--content__box content-box",style:{padding:"0px"}},l.a.createElement(Gt,Object.assign({clientConfigData:this.state.clientconfig,isStandaloneGuide:!0},this.props)))))))}}]),n}(s.Component),qt=n(1727),Vt=n(599),Wt=n(382),Kt=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).setMessageBus=function(e){a.setState({mbus:e})},a.initializeMbus=function(e){if(null==a.state.mbus){a.setState({mbus:e}),e.sendMesg({sender:"chasitor",type:"stepper_guide_initload"});a.props.toggleRestartButton(),a.props.handleGuideCloseBtn(),Object(f.s)(a.state.mbus,{name:"stepper_guide_init",data:{evalue:!0,ename:"stepper_guide_init",dims:{}}})}},a.sendEventToParent=function(e){if(window.parentIFrame){var t=Object(Se.get)(a.props.clientConfigData,"context.procId");t&&window.parentIFrame.sendMessage({task:e,data:{procId:t,transcript:a.state.transcript,wsChannel:a.Storage.get(m.E+t),wsToken:a.Storage.get(m.F+t)}})}},a.handleSubscriptionMessage=function(e,t){var n;if((null===(n=Object(Se.get)(e,"steps"))||void 0===n?void 0:n.length)>0){var i=e.steps.map(();a.setState({messages:Object(x.a)(e.steps),loading:!1,titleList:i})}},a.onNext=function(){a.slider.slick.slickNext();var e=a.state.titleList.slice(0,a.state.stepNumber+1);a.setState({stepNumber:a.state.stepNumber+1,transcript:e},(function(){a.sendEventToParent("GUIDE_INPROGRESS")}))},a.onPrev=function(){a.slider.slick.slickPrev(),a.setState({stepNumber:a.state.stepNumber-1})},a.onSelectChange=function(e){a.slider.slick.slickGoTo(e.key);var t=a.state.titleList.slice(0,parseInt(e.key)+1);a.setState({stepNumber:parseInt(e.key)+1,transcript:t},(function(){a.sendEventToParent("GUIDE_INPROGRESS")}))},a.state={clientconfig:"",messages:[],mbus:null,stepNumber:1,loading:!0,transcript:[],titleList:[]},a.globalConfig=window.ConverseAppsMacro,a.globalConfig.memorystorage=new zt,a.Storage=new ft(a.globalConfig.isLocalStorageAllowed,a.globalConfig.memorystorage),a.Logger=new Mt(a.Storage.get(m.z),"StepperGuide"),a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.Storage.set(m.A,""),this.Storage.set(m.v,"active"),this.Storage.clearPrevious();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n,a,i,o,r,s,c=this,d=this.state,u=d.messages,p=d.loading,m=d.stepNumber,h=null===(e=this.globalConfig)||void 0===e||null===(t=e.context)||void 0===t?void 0:t.headerLogo,f=(null===(n=this.globalConfig)||void 0===n||null===(a=n.theme)||void 0===a?void 0:a.primaryColor)||"#047bf8",g=(null===(i=this.globalConfig)||void 0===i||null===(o=i.context)||void 0===o?void 0:o.showHeader)||"0",v=null===(r=this.globalConfig)||void 0===r||null===(s=r.context)||void 0===s?void 0:s.headerText;return l.a.createElement("div",{className:"stepper-container"},l.a.createElement(Lt,{setMessageBus:this.setMessageBus,handleSubscriptionMessage:this.handleSubscriptionMessage,initializeMbus:this.initializeMbus,clientConfigData:this.globalConfig}),p?l.a.createElement("div",{className:"dc-macro--home__loader"},h&&l.a.createElement("img",{src:h,alt:""}),l.a.createElement(pe.a,{type:"bars",color:f,height:"35px",width:"35px",className:"dc-macro--loader spokes"})):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"slide-wrapper"},g&&l.a.createElement("div",{className:"dc-macro--header__text stepper-header-text-container"},l.a.createElement("span",{className:"stepper-header-text"},v),l.a.createElement("span",{className:"stepper-counter"},"(","".concat(m,"/").concat(u.length),")")),l.a.createElement("div",{className:"slide-content"},l.a.createElement(qt.a,Object.assign({afterChange:this.onSlideChange},{dots:!1,infinite:!1,speed:500,slidesToShow:1,slidesToScroll:1,adaptiveHeight:!0},{ref:function(e){return c.slider=e}}),u.length>0&&u.map((function(e,t){var n,a;return l.a.createElement("div",{className:"slide slide-".concat(t+1),key:t},l.a.createElement("h2",null,null===e||void 0===e||null===(n=e.stepData)||void 0===n?void 0:n.title),l.a.createElement("div",{className:"content",dangerouslySetInnerHTML:{__html:null===e||void 0===e||null===(a=e.stepData)||void 0===a?void 0:a.content}}))})))),l.a.createElement("div",{className:"button-container"},l.a.createElement("button",{className:"button-class",disabled:1===m,onClick:this.onPrev},l.a.createElement(Vt.a,null)),l.a.createElement("button",{className:"button-class",disabled:m===u.length,onClick:this.onNext},l.a.createElement(Wt.a,null))))))}}]),n}(s.Component),Yt=["guideUrl"],Qt=function(e){var t,n,a=e.guideUrl,i=Object(se.a)(e,Yt),o=Object(s.useState)(!1),r=Object(R.a)(o,2),c=r[0],d=r[1],u=Object(s.useState)([]),p=Object(R.a)(u,2),h=p[0],g=p[1],b=Object(s.useState)(!1),y=Object(R.a)(b,2),w=y[0],E=y[1];Object(s.useEffect)((function(){O()}),[w]);var _=O=function(){return function(e,t){return ke.apply(this,arguments)}("",a).then((function(e){if(e){window.ConverseAppsMacro=e;var t={name:m.K,data:{evalue:v()(i.payload,"data.userData.text"),ename:"openguideinmodal",type:v()(i.payload,"data.userData.atype"),tid:v()(i.payload,"data.header.tid"),title:v()(i.payload,"data.header.txt")},channel:e.channelId};Object(f.s)(t),Object(f.t)("Open Guide",i.messagetext),g(e),d(!0)}}))};return l.a.createElement(l.a.Fragment,null,c&&"stepper"===(null===h||void 0===h||null===(t=h.context)||void 0===t?void 0:t.guideType)&&l.a.createElement(Kt,Object.assign({handleRestartGuide:_},i)),c&&"stepper"!==(null===h||void 0===h||null===(n=h.context)||void 0===n?void 0:n.guideType)&&l.a.createElement(Ht,Object.assign({handleRestartGuide:_},i)))},Jt=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).handleClose=function(){a.props.closeModal()},a.handleGuideOptionsPayload=function(e){a.setState({lastGuideOptionsVal:e})},a.handleGuideMessage=function(e){var t=v()(e,"payload.data.userData.assignments",[]),n=t.length>0&&t.find((function(e){return"$sys_transcript"===e.value}));n&&a.setState({guideTranscriptParameter:n}),a.setState({guideMessage:e})},a.handleShowGuideBtn=function(e){e&&(a.guideClose=e),a.setState({showGuideCloseBtn:!a.state.showGuideCloseBtn})},a.showGuide=function(){a.setState({isLoading:!1})},a.onMessage=function(e){var t=e.message;if(null!=t.task)switch(t.task){case"GUIDE_END":a.setState({guideTranscript:""});var n={name:m.I,data:t.data};Object(f.q)({event:n,type:"action_user_tracking"});break;case"GUIDE_INPROGRESS":a.setState({guideTranscript:t.data})}},a.handleGuideClose=function(){var e,t=a.state,n=t.guideTranscriptParameter,i=t.guideMessage,o=t.lastGuideOptionsVal,s=v()(i,"payload.data.tpl"),l=s&&s.toLowerCase();s&&"solved"===s.toLowerCase()?e=1:s&&"unsolved"===s.toLowerCase()?e=2:(l="skipped",e=3);var c,d={name:"guide_close",guide_id:v()(i,"payload.data.flowId"),data:{id:e,tid:v()(i,"payload.data.header.id")||0,field:l,value:o||""}};n&&(d=Object(r.a)(Object(r.a)({},d),{},{interaction_id:null===(c=window.ConverseAppsMacro)||void 0===c?void 0:c.channelId,data:Object(r.a)(Object(r.a)({},d.data),{},{transcript_key:null===n||void 0===n?void 0:n.text})}));Object(f.s)(d),a.guideClose&&a.guideClose(),a.props.toggleRestartButton(),a.handleClose()},a.state={isLoading:!0,guideTranscript:"",showGuideCloseBtn:!1,guideMessage:{},lastGuideOptionsVal:"",guideTranscriptParameter:!1},a.guideClose=null,a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){this.showGuide()}},{key:"componentWillMount",value:function(){if(window.parentIFrame){var e=Ee.b(m.r)||v()(this.props.clientConfigData,"context.botType");window.parentIFrame.sendMessage({task:"SHOW_MODAL_POPUP",visible:!0,theme:e})}}},{key:"componentWillUnmount",value:function(){var e=this.state.guideTranscript;if(window.parentIFrame){var t=Ee.b(m.r)||v()(this.props.clientConfigData,"context.botType");window.parentIFrame.sendMessage({task:"CLOSE_MODAL_POPUP",visible:!0,theme:t})}if(e){var n={name:m.J,data:e};Object(f.q)({event:n,type:"action_user_tracking"})}}},{key:"render",value:function(){var e=this.props,t=e.show,n=e.type,a=e.src,i=v()(this.props,"clientConfigData.context.guideBaseUrl"),o=(document.querySelector(".widget-container.fullscreen"),v()(this.props,"clientConfigData.context.draft"));if(null!=Ee.b("guideurl")&&(i=Ee.b("guideurl")),"guide"===n){var r="",s="";a&&a.id?(s=a.id,r=a.theme):s=a.split(":")[1],i||(i="https://api.converseapps.com/v1/action/widgets/guide"),i=Object(f.f)(i,"procId",s),i=Object(f.f)(i,"applicationId",v()(this.props,"clientConfigData.context.appId")),i=Object(f.f)(i,"siteId",v()(this.props,"clientConfigData.context.orgId")),i=Object(f.f)(i,"theme",r),o&&(i=Object(f.f)(i,"draft",!0))}return"guide"===n&&a.inline?l.a.createElement(l.a.Fragment,null,!this.state.isLoading&&l.a.createElement(he,Object.assign({hideDrawer:this.handleClose,hideFooter:!0,drawerHeight:"guide_full",width:375,titleWithCloseIcon:!0,hideClose:!0},this.props),l.a.createElement("div",{className:"guide-drawer-container"},l.a.createElement(Qt,{guideUrl:i,handleGuideCloseBtn:this.handleShowGuideBtn,toggleRestartButton:this.props.toggleRestartButton,storeGuideFunc:this.props.storeGuideFunc,payload:this.props.message.payload,src:a,handleGuideMessage:this.handleGuideMessage,handleGuideOptionsPayload:this.handleGuideOptionsPayload,handleGuideClose:this.handleGuideClose}),this.state.showGuideCloseBtn&&l.a.createElement("button",{onClick:this.handleGuideClose},"Close")))):l.a.createElement(we.a,{show:t,onHide:this.handleClose,className:"custom-modal-style",centered:!0},l.a.createElement(we.a.Header,{closeButton:!0},l.a.createElement("p",{className:"chatbot-modal-drawer-header"},"video"===n?l.a.createElement(l.a.Fragment,null,"\xa0"):n)),l.a.createElement(we.a.Body,null,"image"===n?l.a.createElement("div",{style:{height:"80vh"}},l.a.createElement("img",{src:a,className:"zoom imagemodel_img",alt:"Trulli",width:"800",height:"500",style:{display:"block"}})):null,"richtext"===n&&l.a.createElement("div",null,l.a.createElement("div",{className:"dcbot--richtext-message-enlarged",style:{padding:"40px",backgroundColor:"#fff"},dangerouslySetInnerHTML:{__html:a}})),"PDF"===n&&l.a.createElement("div",{style:{height:"80vh"}},l.a.createElement(_e.a,{src:"".concat(a),style:{width:"100%",maxWidth:"100%",height:"100%"},title:"PDF",scrolling:"yes"})),"video"===n&&l.a.createElement(Oe.a,{url:a,height:500}),"guide"===n?l.a.createElement(l.a.Fragment,null,this.state.isLoading?l.a.createElement("div",{style:{height:"55vh"}},l.a.createElement(pe.a,{type:"bars",color:"#0078FF",height:"10%",width:"10%",className:"dcspinbars"})):null,l.a.createElement("div",{style:{width:"100%",maxWidth:"100%",height:"85vh",overflow:"auto"}},l.a.createElement(Qt,{guideUrl:i,handleGuideCloseBtn:this.handleShowGuideBtn,toggleRestartButton:this.props.toggleRestartButton,storeGuideFunc:this.props.storeGuideFunc,payload:this.props.message.payload,src:a,handleGuideMessage:this.handleGuideMessage,handleGuideOptionsPayload:this.handleGuideOptionsPayload,handleGuideClose:this.handleGuideClose}))):null))}}]),n}(s.Component);Jt.displayName="CustomModal";var Xt=Object(y.b)((,{})(Jt),Zt=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).state={submitted:!1,data:{}},a.onLikeOrDislike=a.onLikeOrDislike.bind(Object(C.a)(a)),a}return Object(O.a)(n,[{key:"onLikeOrDislike",value:function(e){this.setState({submitted:!0,data:{action:e}});var t={name:"messagefeedback",data:{evalue:e,ename:"feedback",type:this.props.step.atype,nodeId:v()(this.props.message,"payload.data.header.id"),tid:v()(this.props.message,"payload.data.header.tid"),title:v()(this.props.message,"payload.data.header.txt")}};Object(f.s)(t)}},{key:"render",value:function(){var e=this,t=this.state,n=t.submitted,a=t.data;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"dcbot--feedback-container"},n?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"dcbot--feedback-buttons selected"},a&&"like"===a.action&&l.a.createElement("span",{className:"feedback-item like"},l.a.createElement("i",{class:"feedback-item-icon dripicons-thumbs-up","aria-hidden":"true"})),a&&"dislike"===a.action&&l.a.createElement("span",{className:"feedback-item dislike"},l.a.createElement("i",{class:"feedback-item-icon dripicons-thumbs-down","aria-hidden":"true"})))):l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,"Was this helpful?"),l.a.createElement("div",{className:"dcbot--feedback-buttons"},l.a.createElement("span",{className:"feedback-item like"},l.a.createElement("i",{class:"feedback-item-icon dripicons-thumbs-up","aria-hidden":"true",onClick:function(){return e.onLikeOrDislike("like")}})),l.a.createElement("span",{className:"feedback-item dislike"},l.a.createElement("i",{class:"feedback-item-icon dripicons-thumbs-down","aria-hidden":"true",onClick:))))))}}]),n}(s.Component),en=n(363),tn=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).closeModalPopup=function(){a.setState({showModal:!1})},a.enlargeImage=function(e){a.setState({showModal:!0,type:"image",src:v()(a.props,"step.text")});var t={name:"enlargeimage",data:{evalue:!0,ename:"enlargeimage",type:a.props.step.atype,tid:v()(a.props.message,"payload.data.header.tid"),title:v()(a.props.message,"payload.data.header.txt")}};Object(f.s)(t),Object(f.t)("Enlarge Image",a.props.messagetext)},a.enlargeVideo=function(e){a.setState({showModal:!0,type:"video",src:v()(a.props,"step.video_url")});var t={name:"enlargevideo",data:{evalue:!0,ename:"enlargevideo",type:a.props.step.atype,tid:v()(a.props.message,"payload.data.header.tid"),title:v()(a.props.message,"payload.data.header.txt")}};Object(f.s)(t),Object(f.t)("Enlarge Video",a.props.messagetext)},a.enlargePDF=function(){a.setState({showModal:!0,type:"PDF",src:v()(a.props,"step.pdf_url")});var e={name:"enlargepdf",data:{evalue:!0,ename:"enlargepdf",type:a.props.step.atype,tid:v()(a.props.message,"payload.data.header.tid"),title:v()(a.props.message,"payload.data.header.txt")}};Object(f.s)(e),Object(f.t)("Enlarge PDF",a.props.messagetext)},a.handleRichTextOperations=function(e,t){a.setState({showModal:!0,type:"richtext",src:t});var n={name:"richtextoperation",data:{evalue:!0,ename:"richtextoperation",type:a.props.step.atype,tid:v()(a.props.message,"payload.data.header.tid"),title:v()(a.props.message,"payload.data.header.txt")}};Object(f.s)(n),Object(f.t)("Rich Text",t)},a.openGuideInModal=function(e){a.setState({showModal:!0,type:"guide",src:v()(a.props,"step.text")})},a.openLinkinNewTab=function(e,t){t&&window.open(e,"_blank");var n={name:"openlink",data:{ename:"openlink",type:a.props.step.atype,innerText:v()(a.props,"step.text.text"),url:v()(a.props,"step.text.url")}};Object(f.s)(n)},a.closeModal=function(){a.setState({showModal:!1})},a.delay=function(e){var t=Date.now(),n=null;do{n=Date.now()}while(n-t<e)},a.handlePDFViewer=function(e){window.open("").document.write("<embed width='100%' height='100%' type='application/pdf' src='".concat(e,"' />"))},a.renderByType=function(){var e,t,n=a.props,i=n.message,o=n.step,r=n.clientConfigData,s=(null===o||void 0===o?void 0:o.translatedTxt)||(null===o||void 0===o?void 0:o.text),c=o.atype,d=o.props||{},u=v()(o,"label","Show Content"),p=null===r||void 0===r?void 0:r.context;p&&p.agentAvatar;if(v()(i,"payload.props.icon")&&v()(i,"payload.props.icon"),c&&"iframe"===c)return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"chat_question_chat ".concat(a.props.showAvatar?"border-chat":""," ").concat(a.props.showAvatar&&a.props.showFeedback?"feedback-margin":"")},l.a.createElement("button",{className:"btn dc-primary-btn btn-sm",onClick:function(){return a.setState({showMenuDrawer:!0})},disabled:a.props.isHistory},u),l.a.createElement(l.a.Fragment,null,a.renderFeedback())));if(c&&"message"===c)return l.a.createElement(l.a.Fragment,null,l.a.createElement(en.a,{options:{target:"_blank"}},l.a.createElement("div",{className:"chat_question_chat ".concat(a.props.showAvatar?"border-chat":""," ").concat(a.props.showAvatar&&a.props.showFeedback?"feedback-margin":"")},l.a.createElement("p",null,s.trim()),l.a.createElement(l.a.Fragment,null,a.renderFeedback()))));if(c&&("richText"===c||"rich-text"===c)){if(null==s||0===s.trim().length)return l.a.createElement(l.a.Fragment,null);var m=document.getElementsByTagName("a");return Object(x.a)(m).forEach((function(e){Object(f.e)(e),e.onclick=function(){Object(f.s)({name:"openlink",data:{ename:"openlink",innerText:null===e||void 0===e?void 0:e.innerText,url:null===e||void 0===e?void 0:e.href,type:c}})}})),l.a.createElement(en.a,{options:{target:"_blank"}},l.a.createElement("div",{className:"chat_question_chat ".concat(a.props.showAvatar?"border-chat":""," ").concat(a.props.showAvatar&&a.props.showFeedback?"feedback-margin":"")},l.a.createElement("div",{className:a.props.isGuideQuestion?"full-article-style mb-0":"dcbot--richtext-message"},l.a.createElement(Ie.a,{model:s}),d.enlarge&&l.a.createElement("span",{className:"dcbot--richtext-enlarge",onClick:function(e){return a.handleRichTextOperations(e,s)}},l.a.createElement("i",{className:"fa fa-arrows-alt"}))),l.a.createElement(l.a.Fragment,null,a.renderFeedback())))}if(c&&("image"===c||"gif"===c))return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"chat_question_chat sticker-rounded modal_src ".concat("image"===c?"display-flex":""," ").concat(a.props.showAvatar?"border-chat":""," ").concat(a.props.showAvatar&&a.props.showFeedback?"feedback-margin":"")},d.enlarge&&l.a.createElement("div",{className:"dc_zoom_in_text",onClick:function(e){return a.enlargeImage(e)}},l.a.createElement("i",{className:"dripicons-expand"})),l.a.createElement("div",{className:"inline-image-block"},l.a.createElement("img",{src:s,alt:"image"})),l.a.createElement(l.a.Fragment,null,a.renderFeedback())));if(c&&"link"===c&&((null===o||void 0===o||null===(e=o.text)||void 0===e?void 0:e.url)||(null===o||void 0===o?void 0:o.url))&&(null===o||void 0===o||null===(t=o.text)||void 0===t?void 0:t.text)){var h,g,b=(null===o||void 0===o||null===(h=o.text)||void 0===h?void 0:h.url)||(null===o||void 0===o?void 0:o.url);if((null===s||void 0===s||null===(g=s.text)||void 0===g?void 0:g.length)>0||(null===s||void 0===s?void 0:s.length)>0)return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"chat_question_chat ".concat(a.props.showAvatar?"border-chat":""," ").concat(a.props.showAvatar&&a.props.showFeedback?"feedback-margin":"")},l.a.createElement("a",{className:"chat_question_link",style:{fontWeight:700},onClick:function(){return a.openLinkinNewTab(b,!1)},href:b,target:"_blank",rel:"noopener noreferrer"},(null===s||void 0===s?void 0:s.text)||s),l.a.createElement("div",{className:"link-icon-container"},l.a.createElement("i",{className:"fa fa-link link-icon position-relative",onClick:"aria-hidden":"true"})),l.a.createElement(l.a.Fragment,null,a.renderFeedback())))}else{if(c&&"video"===c){var y=o.video_url||o.text;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"chat_question_chat ".concat(a.props.showAvatar?"border-chat":""," ").concat(a.props.showAvatar&&a.props.showFeedback?"feedback-margin":""),style:{display:"flex",flexDirection:"column"}},l.a.createElement(Oe.a,{url:y,height:"150px",width:"300px"}),d.enlarge&&l.a.createElement("div",{className:"dc_show_guide_modal",onClick:function(e){return a.enlargeVideo(e)},style:{marginTop:"5px"}},"Open Video"),l.a.createElement(l.a.Fragment,null,a.renderFeedback())))}if(c&&"guide"===c){var w=o.text&&(o.text.name||o.text.messageToUser)||"Show Guide";return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"chat_question_chat ".concat(a.props.showAvatar?"border-chat":""," ").concat(a.props.showAvatar&&a.props.showFeedback?"feedback-margin":"")},l.a.createElement("div",{className:"dc_show_guide_modal",onClick:function(e){return a.openGuideInModal(e)}},w)))}if(c&&"pdf"===c){var E=o.pdf_url||o.url;return l.a.createElement(l.a.Fragment,null,d.enlarge?l.a.createElement("div",{className:"chat_question_chat ".concat(a.props.showAvatar?"border-chat":""," ").concat(a.props.showAvatar&&a.props.showFeedback?"feedback-margin":"")},l.a.createElement("div",{className:"dc_show_guide_modal",onClick:function(e){return a.enlargePDF(e)}},"Show PDF")):l.a.createElement("div",{className:"chat_question_chat ".concat(a.props.showAvatar?"border-chat":""," ").concat(a.props.showAvatar&&a.props.showFeedback?"feedback-margin":""),style:{flexDirection:"column"}},l.a.createElement("embed",{id:"pdf_url",src:E,type:"application/pdf",style:{width:"100%",maxWidth:"100%",height:"100%"}}),l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{className:"chat-pdf-btn",onClick:function(){return a.handlePDFViewer(E)}},"Open File"),a.renderFeedback())))}}},a.state={showModal:!1,type:"",src:"",hidden:"hidden",showTyping:"typing-hidden",isGuideAutoOpen:!1,isHistory:e.isHistory,showMenuDrawer:"iframe"===v()(e,"step.atype")},a.iframeRef=l.a.createRef(),a.renderByType=a.renderByType.bind(Object(C.a)(a)),a.enlargeImage=a.enlargeImage.bind(Object(C.a)(a)),a.openGuideInModal=a.openGuideInModal.bind(Object(C.a)(a)),a.renderFeedback=a.renderFeedback.bind(Object(C.a)(a)),a}return Object(O.a)(n,[{key:"componentWillMount",value:function(){var e=this;setTimeout((function(){e.show()}),this.props.delay),this.props.delay>0&&setTimeout((function(){e.showTyping()}),this.props.delay-1e3)}},{key:"componentDidUpdate",value:function(){var e;Object(f.p)();var t=this.props,n=t.step,a=t.isVisible,i=this.state,o=i.isGuideAutoOpen,r=i.isHistory;"guide"===n.atype&&(null===n||void 0===n||null===(e=n.text)||void 0===e?void 0:e.autoOpen)&&!o&&a&&!r&&(this.setState({isGuideAutoOpen:!0}),this.openGuideInModal())}},{key:"show",value:function(){var e,t;this.setState({hidden:"",showTyping:"hidden"}),this.props.isAudioEnabled&&"yes"===(null===(e=this.props.clientConfigData)||void 0===e||null===(t=e.context)||void 0===t?void 0:t.audioNewMessage)&&new Audio(this.props.clientConfigData.context.audioNewMessageTone).play()}},{key:"showTyping",value:,{key:"renderAvatar",value:function(e){var t=this.props.showAvatar;return l.a.createElement("div",{className:"chat_question_image"},l.a.createElement("span",null,t&&l.a.createElement("img",{src:e,alt:""})))}},{key:"renderFeedback",value:function(){var e=this.props,t=e.showFeedback,n=e.mbus;return l.a.createElement(l.a.Fragment,null,t&&l.a.createElement(Zt,Object.assign({mbus:n},this.props)))}},{key:"render",value:function(){var e=this,t=this.state,n=(t.showTyping,t.hidden),a=t.showModal,i=t.type,o=t.src,r=this.props,s=r.clientConfigData,c=r.index,d=r.message,u=r.step,p=null===s||void 0===s?void 0:s.context,m=d.payload&&d.payload.agentAvatar||p&&p.agentAvatar,h=!(!p||"yes"!==p.showChatMessageTimeStamps),f=u.translatedTxt||u.text,g=v()(u,"label","Content"),b=(null===u||void 0===u?void 0:u.text)||(null===u||void 0===u?void 0:u.translatedTxt)||(null===u||void 0===u?void 0:u.video_url)||(null===u||void 0===u?void 0:u.pdf_url)||(null===u||void 0===u?void 0:u.url);return l.a.createElement(l.a.Fragment,null,l.a.createElement("li",{key:"inner-message-".concat(c)},l.a.createElement("div",{className:n,onMouseEnter:function(e){return I(e,".agent")},onMouseLeave:function(e){return A(e,".agent")}},l.a.createElement("div",{className:"chat_question ".concat(this.props.isMessageTransitionBottomUp?"slide-bottom-up":"")},this.renderAvatar(m),b&&this.renderByType()),h&&l.a.createElement("span",{className:"timestamp agent",style:{display:"none"}},L()))),a&&l.a.createElement(Xt,Object.assign({show:a,type:i,src:o,closeModal:this.closeModal},this.props)),this.state.showMenuDrawer&&!this.props.isHistory&&l.a.createElement(he,{drawerHeight:"full",hideDrawer:function(){return e.setState({showMenuDrawer:!1})},hideFooter:!0,titleWithCloseIcon:g},l.a.createElement(_e.a,{forwardRef:this.iframeRef,id:"iframe",allowtransparency:"true",frameBorder:"0",onMessage:function(){},src:f,style:{width:"100%",maxWidth:"100%",height:"100%"}})))}}]),n}(s.PureComponent);tn.displayName="AgentMessage";var nn=Object(y.b)((function(e){var t,n=e.appState.isVisible,a=e.botConfig,i=e.mbus;return{clientConfigData:a,isMessageTransitionBottomUp:"yes"===(null===a||void 0===a||null===(t=a.context)||void 0===t?void 0:t.messageTransitionBottomUp),mbus:i,isVisible:n}}),{})(tn),an=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).renderByType=function(e){var t=a.props.isLast;return"chat.queue"===e.type?l.a.createElement(l.a.Fragment,null,t&&l.a.createElement("div",{className:"dcbot--bottom-overlay"},l.a.createElement("p",null,"You are number ",e.position," in the queue"))):"chat.agentjoined"===e.type||"file.uploadsuccess"===e.type?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"memberjoin"},l.a.createElement("div",null,l.a.createElement("span",null,l.a.createElement("img",{src:e.avatar,alt:""})),l.a.createElement("div",null,l.a.createElement("span",null,e.name||e.msg))))):"chat.agentleft"===e.type?l.a.createElement("div",{className:"memberjoin"},l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("span",null,e.msg)))):"chat.end"===e.type?l.a.createElement("div",{className:"memberjoin"},l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("span",null,"This conversation has ended")))):"chat.agenttyping"===e.type?l.a.createElement(l.a.Fragment,null,t&&l.a.createElement("div",{className:"dcbot--bottom-typing"},l.a.createElement("p",{class:"saving"},"Agent is typing",l.a.createElement("span",null,l.a.createElement("span",{className:"dot"})),l.a.createElement("span",null,l.a.createElement("span",{className:"dot"})),l.a.createElement("span",null,l.a.createElement("span",{className:"dot"}))))):void 0},a.state={hidden:"hidden"},a.iframeRef=l.a.createRef(),a}return Object(O.a)(n,[{key:"renderAvatar",value:function(e){var t=this.props.showAvatar;return l.a.createElement("div",{className:"chat_question_image"},l.a.createElement("span",null,t&&l.a.createElement("img",{src:e,alt:""})))}},{key:"render",value:function(){var e=this.props.data;return l.a.createElement(l.a.Fragment,null,e&&e.type&&l.a.createElement("li",{key:e.type},l.a.createElement("div",{className:"chat_question ".concat(this.props.isMessageTransitionBottomUp?"slide-bottom-up":"")},this.renderByType(e))))}}]),n}(s.Component);an.displayName="ChatEventRenderer";var on,rn=Object(y.b)((function(e){var t,n=e.botConfig;return{clientConfigData:n,isMessageTransitionBottomUp:"yes"===(null===n||void 0===n||null===(t=n.context)||void 0===t?void 0:t.messageTransitionBottomUp)}}),{})(an),sn=n(144);function ln(e,t,n,a){window.zChat=e,e.init({account_key:n||"eB9wGKFVEPxOOeYc0nRgCwBy8eIEeQZs",suppress_console_error:!0}),e.on("connection_update",(function(e){"connected"===e&&a&&a()})),function(e,t){e.on("agent_update",(),e.on("department_update",(function(e){})),e.on("chat",(function(n){if("chat.msg"===n.type||"chat.file"===n.type)dn(n,t);else if("chat.memberjoin"===n.type&&"visitor"!==n.nick)un({type:"input_box_open"},t),dn(n,t);else if("chat.queue_position"===n.type)n.queue_position>0&&un({type:"input_box_close"},t),dn(n,t);else if("chat.memberleave"===n.type&&"visitor"!==n.nick){dn(n,t),pn(null);e.endChat({clear_dept_id_on_chat_ended:!0},(function(e){return console.log(e)})),t.sendMesg({sender:"chasitor",adata:{},type:"action_sendform"})}}))}(e,t)}function cn(e,t,n,a){"connected"===e.getConnectionStatus()&&("init"!==a&&function(e,t){e.sendMesg({sender:"chasitor",adata:{message:t},type:"zd"})}(t,n),e.sendChatMsg(n,(function(e){})))}function dn(e,t){t.sendMesg({sender:"bot",data:e,properties:{icon:mn()},type:"zd"})}function un(e,t){t.sendMesg({sender:"chasitor",adata:e,type:"sys_client"})}r hn=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).setupChatParams=function(e){var t=v()(a.props.payload,"data.outdata");null!=t.tags&&t.tags.length>0&&e.addTags(t.tags),t.visitorInfo&&Object.keys(t.visitorInfo).length>0&&e.setVisitorInfo(t.visitorInfo)},a.checkAvailability=function(){var e=v()(a.props.payload,"data.outdata"),t=sn.a.getAllDepartments();if(null!=e.departmentId){var n=e.departmentId;(t=t.filter((function(e){return(e.id===parseInt(n)||e.name===n)&&"online"===e.status}))).length>0&&sn.a.setVisitorDefaultDepartment(t[0].id)}else t=t.filter(();return t.length>0},a.zopimInitializedCb=function(){if(a.setupChatParams(sn.a),a.checkAvailability()){var e=v()(a.props.payload,"data.outdata").transcript;setTimeout((function(){var t=e||"Hello";cn(sn.a,a.props.mbus,t,"init")}),1e3)}else Object(f.q)({agentAvailability:0},"action_sendform")},a.state={},a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=v()(this.props.payload,"data.outdata");null==sn.a||"connected"!==sn.a.getConnectionStatus()?ln(sn.a,this.props.mbus,e.accountKey,this.zopimInitializedCb):this.zopimInitializedCb()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null)}}]),n}(s.Component);hn.displayName="ZendeskChatHandover";var fn=Object(y.b)((function(e){return{mbus:e.mbus}}),{})(hn),gn=n(827),vn=n.n(gn);var bn=function(e){var t=Object(y.d)((function(e){var t,n=e.botConfig;return{clientConfigData:n,isMessageTransitionBottomUp:"yes"===(null===n||void 0===n||null===(t=n.context)||void 0===t?void 0:t.messageTransitionBottomUp)}})),n=t.clientConfigData,a=t.isMessageTransitionBottomUp,i=v()(n,"context.agentAvatar",""),o=v()(e,"payload.data.outdata.title","Book a time"),r=v()(e,"payload.data.outdata.calendlyUrl",null),c=v()(e,"payload.data.outdata.fields",{}),d=v()(e,"payload.data.outdata.autoShow",!1),u=v()(e,"isLast",!1),p=Object(s.useState)(!1),m=Object(R.a)(p,2),h=m[0],g=m[1],b=Object(s.useState)(!1),w=Object(R.a)(b,2),E=w[0],_=w[1],O=Object(s.useState)(!1),C=Object(R.a)(O,2),S=C[0],k=C[1],x=Object(s.useState)(!1),T=Object(R.a)(x,2),j=T[0],N=T[1];Object(s.useEffect)((function(){var e=function(e){(function(e){return e.data.event&&0===e.data.event.indexOf("calendly")})(e)&&"calendly.event_scheduled"===e.data.event&&(_(!0),A(e.data.payload),setTimeout((function(){g(!1)}),5e3))};return h&&window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}),[h]),Object(s.useEffect)((function(){d&&j&&u&&I(),Object(f.p)()}),[j]),Object(s.useEffect)((,[]);var I=function(){r&&j&&setTimeout((function(){window.Calendly.initInlineWidget({url:r,parentElement:document.getElementById("calendly-calendar-component"),prefill:c,utm:{}}),setTimeout((function(){document.getElementsByTagName("iframe")[0]&&(document.getElementsByClassName("calendly-spinner")[0].style.display="none")}),500)}),10),g(!0),k(!0)},A=function(e){var t=vn()(e);Object(f.t)("Calendly event ".concat(t?"not":""," scheduled"),"calendly_event".concat(t?"_not_":"_","scheduled")),Object(f.q)({calendlyPayload:e},"action_sendform")};return l.a.createElement(l.a.Fragment,null,u?l.a.createElement(l.a.Fragment,null,!d&&j&&l.a.createElement("div",{className:"chat_question ".concat(a?"slide-bottom-up":"")},l.a.createElement("div",{className:"chat_question_image"},l.a.createElement("span",null,l.a.createElement("img",{src:i,alt:""}))),l.a.createElement("div",{className:"chat_question_chat calendly-component border-chat",style:{display:"unset"}},l.a.createElement(Ue.a,{variant:"light",className:"text-left",onClick:I,disabled:S},l.a.createElement("i",{className:"dripicons-calendar calendar-icon"}),null!==o&&void 0!==o?o:"Book a time"))),h&&r&&j&&l.a.createElement(he,{drawerHeight:"full",hideDrawer:function(){E||A({}),g(!1)},hideFooter:!0,titleWithCloseIcon:o},l.a.createElement("div",{id:"calendly-calendar-component",style:{height:"100%"}}))):null)};var yn=function(e){var t=Object(y.c)(),n=Object(y.d)((function(e){var t,n=e.botConfig;return{isMessageTransitionBottomUp:"yes"===(null===n||void 0===n||null===(t=n.context)||void 0===t?void 0:t.messageTransitionBottomUp)}})).isMessageTransitionBottomUp;return Object(s.useEffect)((function(){t(Object(F.p)({chatEnded:!0}))}),[]),l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"chat_question endchat-msg ".concat(n?"slide-bottom-up":""," ")},l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("span",null,"You have ended the chat")))))};var wn=n(828),En=n.n(wn),_n=n(829),On=n.n(_n),Cn=n(830),Sn=n.n(Cn),kn=n(831),xn=n.n(kn),Tn=n(832),jn=n.n(Tn),Nn=function(e){var t=e.experienceLevel,n=e.onRatingClick,a=e.className,i=["Terrible","bad","okay","good","Excellent"],o=[On.a,En.a,Sn.a,xn.a,jn.a];return l.a.createElement("div",{className:null!==a&&void 0!==a?a:""},l.a.createElement("h1",{className:"csat-title"},"How would you rate your support experience today?"),l.a.createElement("div",{className:"button-group"},i.map((function(e,a){return l.a.createElement("button",{onClick:style:{background:"transparent",opacity:t===a+1?1:.3}},l.a.createElement("img",{src:o[a],alt:i[a],style:{width:35}}),t&&l.a.createElement("span",{className:"review-text ".concat(t===a+1?"opacity-1":"")},e),null==t&&l.a.createElement("span",{className:"review-text ".concat([0,4].includes(a)?"opacity-1":"")},e))}))))},In=function(e){var t=e.options,n=e.header,a=e.updateOptions,i=Object(s.useState)([]),o=Object(R.a)(i,2),r=o[0],c=o[1];return Object(s.useEffect)((,[t]),l.a.createElement(l.a.Fragment,null,t.length>0&&l.a.createElement("section",{className:"block text-center divider"},l.a.createElement("h2",{className:"block-header"},n||"Tell us more."),l.a.createElement("div",{className:"csat-options-container csat-question-block"},t.map((function(e,t){return l.a.createElement("div",{className:"csat-options"},l.a.createElement("button",{key:t,className:"".concat(r.includes(e)&&"selected"),onClick:function(){return function(e){var t=Object(x.a)(r);if(r.includes(e)){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}else t.push(e);c(t),a(t)}(e)}},e))})))))},An=function(e){var t=e.question,n=e.onClick,a=Object(s.useState)(null),i=Object(R.a)(a,2),o=i[0],r=i[1],c=return l.a.createElement("section",{className:"helpfull-block text-center"},l.a.createElement("h2",{className:"block-header"},t||"Was this helpful?"),l.a.createElement("div",{className:"resolve-buttons-container"},l.a.createElement("button",{onClick:function(){return c("positive")},className:"".concat("positive"===o&&"selected")},"Yes"),l.a.createElement("button",{onClick:function(){return c("negative")},className:"".concat("negative"===o&&"selected")},"No")))},Dn=function(e){var t=e.onChange,n=Object(s.useState)(""),a=Object(R.a)(n,2),i=a[0],o=a[1];return l.a.createElement("section",{className:"additional-feedback text-center"},l.a.createElement("h1",{className:"block-header"},"Additional Comments"),l.a.createElement("textarea",{rows:"4",value:i,onChange:className:"csat-textarea"}))},Mn=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a,i,o,r;Object(_.a)(this,n),(r=t.call(this,e)).drawerCloseAnimation=function(){var e,t,n;(null===(e=Object(C.a)(r))||void 0===e||null===(t=e.menuDrawerRef)||void 0===t||null===(n=t.current)||void 0===n?void 0:n.refCloseDrawer)?(r.menuDrawerRef.current.refCloseDrawer(),setTimeout((,400)):r.setState({drawerOpen:!1,csatSubmitOrClose:!0})},r.onLikeOrDislike=r.onDetailClose=function(){Object(f.q)({},"action_sendform"),r.drawerCloseAnimation()},r.onFullSubmit=function(){var e=r.state,t=e.additionalFeedback,n=e.experienceLevel,a=e.optionsArray,i=e.action;Object(f.q)({csatDataType:"details",comments:t,feedback:a,outcome:null!=i&&"positive"===i?1:0,rating:n,text:"Rating: "+n},"action_conversation_csat"),r.drawerCloseAnimation()},r.onRatingClick=function(e){r.setState({showFullScreen:!!r.state.detailedMode,experienceLevel:e,optionsArray:[],drawerOpen:!!r.state.detailedMode},(function(){Object(f.q)({detailsDisabled:!r.state.detailedMode,csatDataType:"rating",rating:e,text:"Rating: "+e},"action_conversation_csat"),r.state.detailedMode||r.setState({drawerOpen:!1,csatSubmitOrClose:!0})}))},r.updateOptionsArray=function(e){var t=r.state.optionsArray,n=Object(x.a)(t);if(t.includes(e)){var a=n.indexOf(e);-1!==a&&n.splice(a,1)}else n.push(e);r.setState({optionsArray:n})};var l=(null===(a=e.payload)||void 0===a||null===(i=a.data)||void 0===i||null===(o=i.outdata)||void 0===o?void 0:o.properties)||{};return r.state={title:l.title||"Overall, how would you rate your chat experience?",optionsHeader:l.optionsHeader||"Tell us more about your experience.",badOptions:null===l||void 0===l?void 0:l.badOptions,goodOptions:l.goodOptions,resolveQuestion:(null===l||void 0===l?void 0:l.resolveQuestion)||"Was this helpful?",detailedMode:null===l||void 0===l?void 0:l.detailedMode,showfullScreen:!1,experienceLevel:null,addAdditionalFeedback:!0,additionalFeedback:"",optionsArray:[],feedbackButton:["Terrible","bad","okay","good","Excellent"],action:null,drawerOpen:!1,csatSubmitOrClose:!1},r.menuDrawerRef=Object(s.createRef)(),r}return Object(O.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.showFullScreen,a=t.experienceLevel,i=t.detailedMode,o=t.drawerOpen,r=t.resolveQuestion,s=t.goodOptions,c=t.badOptions,d=t.optionsHeader,u=t.csatSubmitOrClose,p=t.feedbackButton,m=t.action,h=t.optionsArray,f=[],g=d;return f=1===a||2===a?c:s,console.log("csatSubmitOrClose",u),l.a.createElement(l.a.Fragment,null,!u&&l.a.createElement("div",{className:"chat_question ".concat(this.props.isMessageTransitionBottomUp?"slide-bottom-up":"")},l.a.createElement("div",{style:{padding:"20px 0px"}},l.a.createElement(Nn,{experienceLevel:a,onRatingClick:this.onRatingClick,className:"emojis-card"})),l.a.createElement("div",null,o&&l.a.createElement(he,{hideDrawer:function(){return e.setState({drawerOpen:!1})},hideClose:!0,hideFooter:!0,ref:this.menuDrawerRef,drawerHeight:n?"full":"unset",noBorderRadius:!0},l.a.createElement("div",{className:"conversational-csat-container ".concat(n?"fixed-height":"")},l.a.createElement(Nn,{experienceLevel:a,onRatingClick:this.onRatingClick}),n&&i&&l.a.createElement("section",{className:"full-screen-contents "},l.a.createElement(In,{options:f,header:g,updateOptions:function(t){return e.setState({optionsArray:t})}}),l.a.createElement(An,{question:r,onClick:function(t){return e.onLikeOrDislike(t)}}),l.a.createElement(Dn,{onChange:function(t){return e.setState({additionalFeedback:t})}}),l.a.createElement("div",{className:"csat-submit-footer"},l.a.createElement(Ue.a,{onClick:this.onFullSubmit,className:"primary-button",disabled:!(m&&a&&h.length>0)},"Submit"),l.a.createElement(Ue.a,{className:"cancel-button",variant:"outline-secondary",onClick:this.onDetailClose},"Close"))))))),u&&l.a.createElement("div",{className:"chat_question"},l.a.createElement("div",{className:"csat-after-submit"},"You rated the chat as ",l.a.createElement("span",{style:{textTransform:"capitalize"}},p[a-1]))))}}]),n}(s.Component),Ln=Object(y.b)((function(e){var t,n=e.botConfig;return{isMessageTransitionBottomUp:"yes"===(null===n||void 0===n||null===(t=n.context)||void 0===t?void 0:t.messageTransitionBottomUp)}}),{})(Mn),$n=(n(1514),function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;Object(_.a)(this,n),a=t.call(this,e);var i=v()(e,"payload.data.outdata.zdScriptSrc",null),o=v()(e,"payload.data.outdata.fields",{}),r=v()(e,"payload.data.outdata.transcript","Agent");return a.state={fields:o,zdScriptSrc:i,transcript:r},a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){window.parentIFrame&&(window.parentIFrame.sendMessage({task:"CLOSE_BOT"}),window.parentIFrame.sendMessage({task:"SHOW_ZENDESK_CHAT_CLASSIC_WIDGET",email:v()(this.state.fields,"email"),name:v()(this.state.fields,"name"),zdScriptSrc:this.state.zdScriptSrc,transcript:this.state.transcript}))}},{key:"render",value:]),n}(s.Component));var Pn=function(e){var t,n=Object(s.useState)("grid"),a=Object(R.a)(n,2),i=a[0],o=a[1],r=Object(s.useState)((null===(t=e.payloadData)||void 0===t?void 0:t.steps)||[]),c=Object(R.a)(r,2),d=c[0],u=(c[1],Object(s.useState)(d)),p=Object(R.a)(u,2),m=p[0],h=p[1];return l.a.createElement(he,{drawerHeight:"full",hideDrawer:function(){Object(f.q)({},"action_product_selection")},hideFooter:!0,titleWithCloseIcon:"Products"},l.a.createElement("div",{className:"product-page-container"},l.a.createElement("div",{className:"header-container"},l.a.createElement("div",{className:"header-controls"},l.a.createElement("span",{style:{marginBottom:10}},"Select a Product"),"grid"===i?l.a.createElement("i",{className:"icon-feather-grid header-icon",onClick:function(){return o("list")}}):l.a.createElement("i",{className:"icon-feather-menu header-icon",onClick:function(){return o("grid")}})),l.a.createElement("input",{className:"product-page-search",placeholder:"Search",onChange:function(e){var t=e.target.value;if(t){var n=d.filter(();h(n)}else h(d)}})),l.a.createElement("ul",{className:"grid"===i?"product-container-grid-layout":"product-container-list-layout"},m.map((function(e){return l.a.createElement("li",{style:{listStyle:"none"},onClick:function(){return t=e,void Object(f.q)({product:t},"action_product_selection");var t}},l.a.createElement("div",{className:"product-container"},l.a.createElement("img",{className:"product-image",src:e.image,alt:"productImage",loading:"lazy"}),l.a.createElement("div",{className:"product-title"},l.a.createElement("span",null,e.title))))})))))},Bn=["payload","name","clientConfigData","index"],Rn=function(e){var t=e.payload,n=e.name,a=e.clientConfigData,i=e.index,o=Object(se.a)(e,Bn),r=Object(s.useState)(!1),c=Object(R.a)(r,2),d=c[0],u=c[1],p=null===a||void 0===a?void 0:a.context,m=t.agentAvatar||p&&p.agentAvatar,h=v()(t,"data.userData.text"),f=!(!p||"yes"!==p.showChatMessageTimeStamps);Object(s.useEffect)((function(){v()(t,"data.userData.text.autoOpen")&&g()}),[]);var g=function(){u(!0)};return l.a.createElement(l.a.Fragment,null,l.a.createElement("li",{key:"inner-message-".concat(i)},l.a.createElement("div",{onMouseEnter:function(e){return I(e,".agent")},onMouseLeave:function(e){return A(e,".agent")}},l.a.createElement("div",{className:"chat_question"},l.a.createElement("div",{className:"chat_question_image"},l.a.createElement("span",null,l.a.createElement("img",{src:m,alt:""}))),l.a.createElement("div",{className:"chat_question_chat border-chat"},l.a.createElement("p",null,n))),f&&l.a.createElement("span",{className:"timestamp agent",style:{display:"none"}},L()))),d&&l.a.createElement(Xt,Object.assign({show:d,type:"guide",src:h,closeModal:function(){u(!1)}},o)))},Fn=n(1731),Un=n(1725),Gn=n(448),zn=n.n(Gn),Hn=n(595),qn=n(479),Vn=n.n(qn),Wn=(n(1516),function(e){var t,n=e.formData,a=e.isLast,c=Object(y.d)((function(e){var t,n=e.botConfig;return{clientConfigData:n,isMessageTransitionBottomUp:"yes"===(null===n||void 0===n||null===(t=n.context)||void 0===t?void 0:t.messageTransitionBottomUp)}})),d=c.clientConfigData,u=c.isMessageTransitionBottomUp,p=v()(d,"context.agentAvatar",""),m=null===n||void 0===n?void 0:n.dataSourceType,h=Object(s.useState)([]),g=Object(R.a)(h,2),b=g[0],w=g[1],E=Object(s.useState)([]),_=Object(R.a)(E,2),O=_[0],C=_[1],S=Object(s.useState)(),k=Object(R.a)(S,2),x=k[0],j=k[1],N=Object(s.useState)([]),I=Object(R.a)(N,2),A=I[0],D=I[1],M=Object(s.useState)(!1),L=Object(R.a)(M,2),$=L[0],P=L[1],B=Object(s.useState)(null),F=Object(R.a)(B,2),U=F[0],G=F[1],z=Object(s.useState)([]),H=Object(R.a)(z,2),q=H[0],V=H[1],W=null===n||void 0===n?void 0:n.multiSelect,K=["url","parameter"].includes(null===n||void 0===n?void 0:n.dataSourceType),Y={};(null===n||void 0===n?void 0:n.requestHeaders)&&(null===n||void 0===n||null===(t=n.requestHeaders)||void 0===t||t.forEach((function(e){(null===e||void 0===e?void 0:e.key)&&e.value&&(Y[e.key]=e.value)})));var Q=function(e){if((null===e||void 0===e?void 0:e.length)>0)return null===e||void 0===e?void 0:e.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{searchId:Object(Dt.v4)()})}))},J=function(){var e=Object(o.a)(i.a.mark((function e(t){var a,o,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.next=3,Xe.a.get(t,{headers:Y});case 3:return a=e.sent,P(!1),o=[],(null===n||void 0===n?void 0:n.dataPath)?(r=v()(null===a||void 0===a?void 0:a.data,null===n||void 0===n?void 0:n.dataPath,[]),o=Q(r)):o=Q((null===a||void 0===a?void 0:a.data)||[]),e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=[],"values"!==m){e.next=5;break}a=Q((null===n||void 0===n?void 0:n.dataSourceValues)||[]),e.next=12;break;case 5:if("url"!==m||!(null===n||void 0===n?void 0:n.dataSourceUrl)){e.next=11;break}return e.next=8,J(null===n||void 0===n?void 0:n.dataSourceUrl);case 8:a=e.sent,e.next=12;break;case 11:"parameter"===m&&(null===n||void 0===n?void 0:n.dataSourceParameter)&&(a=Q((null===n||void 0===n?void 0:n.dataSourceValues)||[]));case 12:C(a),D(a),a&&"queryName"!==(null===n||void 0===n?void 0:n.searchType)&&Z(a);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(e){var t=["label","value"];if("values"===m)j(new Hn.a({fields:["label"],idField:"searchId",storeFields:t}));else if(K){var a,i;if("propertyKey"===(null===n||void 0===n?void 0:n.searchType)&&(null===e||void 0===e?void 0:e.length)>0)t=Object.keys(e[0]),j(new Hn.a({fields:null!==(a=null===n||void 0===n||null===(i=n.searchKeys)||void 0===i?void 0:i.split(",").map(())&&void 0!==a?a:[""],idField:"searchId",storeFields:t}));else null===n||void 0===n||n.searchType}V(t)};Object(s.useEffect)((,[x]),Object(s.useEffect)((,[n]);var ee=function(e){if((null===e||void 0===e?void 0:e.length)>0)return null===e||void 0===e?void 0:e.map((function(e){try{var t=zn.a.compile(null===n||void 0===n?void 0:n.htmlTemplate);if(function(e){return"url"===m||"parameter"===m?e:"values"===m?e&&e.label&&e.value:void 0}(e))return{label:l.a.createElement(l.a.Fragment,null,l.a.createElement("span",{dangerouslySetInnerHTML:{__html:t(e)},style:{display:"flex",alignItems:"center"}}),l.a.createElement(Fn.a,{className:"m-0"})),value:function(){var t={};return"values"===(null===n||void 0===n?void 0:n.dataSourceType)?t={item:null===e||void 0===e?void 0:e.value}:K&&(t={item:e}),JSON.stringify(t)}()}}catch(a){}}))};Object(s.useEffect)((,[A,null===n||void 0===n?void 0:n.htmlTemplate]);var te=Vn()(function(){var e=Object(o.a)(i.a.mark((function e(t){var a,o,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("queryName"!==(null===n||void 0===n?void 0:n.searchType)){e.next=8;break}return a="".concat(null===n||void 0===n?void 0:n.dataSourceUrl,"?").concat(new URLSearchParams(Object(T.a)({},null===n||void 0===n?void 0:n.searchQueryName,t))),e.next=4,J(a);case 4:o=e.sent,w(ee(o)),e.next=11;break;case 8:r=x.search(t,{prefix:!0,fuzzy:.1}),(null===(s=r.map((function(e){var t={};return q.forEach((),t})))||void 0===s?void 0:s.length)>0?D(s):D(O);case 11:case"end":return e.stop()}}),e)})));return (),300);return l.a.createElement("div",{className:"chat_question ".concat(u?"slide-bottom-up":"")},l.a.createElement("div",{className:"chat_question_image"},l.a.createElement("span",null,l.a.createElement("img",{src:p,alt:""}))),l.a.createElement("div",{className:"chat_question_chat border-chat",style:{display:"unset"}},l.a.createElement(l.a.Fragment,null,l.a.createElement("label",null,null===n||void 0===n?void 0:n.label),l.a.createElement(Un.a,Object.assign({style:{width:"250px"},placeholder:null===n||void 0===n?void 0:n.placeholder,showSearch:!0,onSelect:getPopupContainer:function(e){return e.parentNode},onSearch:te,filterOption:!1,loading:$,disabled:!a,allowClear:!$,onClear:X},W?{mode:"multiple"}:{},{onChange:),null===b||void 0===b?void 0:b.map((function(e,t){if((null===e||void 0===e?void 0:e.label)&&(null===e||void 0===e?void 0:e.value)){var n,a,i,o=JSON.parse(null===e||void 0===e?void 0:e.value);if("object"===typeof(null===(n=o)||void 0===n?void 0:n.item)&&!Array.isArray(null===(a=o)||void 0===a?void 0:a.item))o={item:(s=null===(i=o)||void 0===i?void 0:i.item,Ye()(s,"searchId"))};var r=JSON.stringify(o);return l.a.createElement(Un.a.Option,{key:r,value:r},null===e||void 0===e?void 0:e.label)}var s}))),a&&l.a.createElement(gt.a,{type:"link",className:"mt-2 w-100",disabled:!U,onClick:function(){var e={};if(Array.isArray(U))e=null===U||void 0===U?void 0:U.map(();else if("string"===typeof U){var t;e=null===(t=JSON.parse(U))||void 0===t?void 0:t.item}var a={},i=["url","parameter"].includes(null===n||void 0===n?void 0:n.dataSourceType);if("values"===(null===n||void 0===n?void 0:n.dataSourceType))a[null===n||void 0===n?void 0:n.parameterName]=e;else if(i&&!(null===n||void 0===n?void 0:n.valueProperty))a[null===n||void 0===n?void 0:n.parameterName]=e;else if(i&&(null===n||void 0===n?void 0:n.valueProperty)){var o;if(Array.isArray(e))a[null===n||void 0===n?void 0:n.parameterName]=null===(o=e)||void 0===o?void 0:o.map((function(e){return v()(e,"".concat(null===n||void 0===n?void 0:n.valueProperty),e)}));else a[null===n||void 0===n?void 0:n.parameterName]=v()(e,"".concat(null===n||void 0===n?void 0:n.valueProperty),e)}Object(f.q)(Object(r.a)({},a),"action_sendform")}},(null===n||void 0===n?void 0:n.buttonName)||"Submit"))))});function Kn(e){var t=l.a.useState(e.steps),n=Object(R.a)(t,1)[0],a=l.a.useState([]),r=Object(R.a)(a,2),c=r[0],d=r[1],u=l.a.useState(),p=Object(R.a)(u,2),m=p[0],h=p[1],f=return Object(s.useEffect)((function(){Object(o.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.forEach(function(){var t=Object(o.a)(i.a.mark((function t(n,a){var o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=0===a||e.properties.isHistory?0:100,t.next=3,f(o);case 3:h(n);case 4:case"end":return t.stop()}}),t)})));return ()),h(void 0);case 2:case"end":return t.stop()}}),t)})))()}),[n]),Object(s.useEffect)((function(){m&&d((function(e){return[].concat(Object(x.a)(e),[m])}))}),[m]),l.a.createElement(l.a.Fragment,null,c.map((function(t,n){return function(e,t,n,a,i,o){var r,s,c=n.message,d=v()(c,"payload.props.show_agent_avatar",void 0),u=t===c.payload.data.steps.length-1,p=null==d?u:d,m=v()(c,"payload.data.userData.csatType","inline"),h=!(!(null===c||void 0===c||null===(r=c.payload)||void 0===r||null===(s=r.props)||void 0===s?void 0:s.enableCsat)||"inline"!==m||t!==c.payload.data.steps.length-1),f=0;null!=c.payload.delay&&(f=c.payload.delay);var g=0==t,b=!(!a||0!=t),y=v()(c,"payload.data.displaySettings.renderAs")||v()(c,"payload.data.userData.displaySettings.renderAs")||"";n.proactiveMessageDelay&&(f=0);n.isHistory&&(f=0);var w=e.text;return"transientMessage"===y?l.a.createElement(re,{message:c,messagetext:w,isLast:n.isLast}):l.a.createElement(nn,{step:e,message:c,delay:f,index:10*n.index+t,showAvatar:p,showLoader:b,showFeedback:h,isFirstmessage:g,messageIndex:n.index,selectedDebugMessage:n.selectedDebugMessage,selectDebugMessageCallback:n.selectDebugMessageCallback,isHistory:n.isHistory,toggleRestartButton:i,storeGuideFunc:o,isGuideQuestion:n.isGuideQuestion})}(t,n,e.properties,e.showLoader,e.toggleRestartButton,e.storeGuideFunc)})))}var Yn=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a,i;Object(_.a)(this,n),(i=t.call(this,e)).showMenu=function(){i.setState({vclass:"inline-block"})},i.processMessage=function(e){if("show_typing_activity"===e.payload.text)Object(F.l)(!0);else{if("chat_event"===e.payload.text){var t=i.props.isLast;return l.a.createElement(rn,{data:e.payload.data,isLast:t})}if(e.payload.data&&e.payload.data.steps)return l.a.createElement(l.a.Fragment,null,l.a.createElement(Kn,{steps:e.payload.data.steps,properties:i.props,showLoader:i.props.showLoader,toggleRestartButton:i.props.toggleRestartButton,storeGuideFunc:i.props.storeGuideFunc}))}},i.renderOptions=function(e){var t,n=e.message,a=e.tpl,o=v()(n,"payload.data.options",[]),r=null===n||void 0===n||null===(t=n.payload)||void 0===t?void 0:t.data;if(o.length>0&&"BotGuide"!==a&&("conversational"===(null===r||void 0===r?void 0:r.guideViewType)||null==(null===r||void 0===r?void 0:r.guideViewType)))return l.a.createElement(z,{payloadData:n.payload.data,index:i.props.index,isHistory:i.props.isHistory,isLast:i.props.isLast})},i.optionSelect=function(e){e.target.innerText.toLocaleLowerCase(),Object(f.t)("User Clicked",e.target.innerText),Object(f.q)({type:"escape_hatch"})},i.renderForm=function(e){var t=e.message;if("Form"===e.tpl){var n=200;return v()(t,"payload.data.steps","").length>0&&(n=1e3),l.a.createElement("div",{className:"disable_form_"+!i.props.isLast},v()(t,"payload.data.userData.formV2")?l.a.createElement(Qe,{payload:t.payload,waitBeforeShow:n,optionSelect:i.optionSelect,isLast:i.props.isLast,isMessageTransitionBottomUp:i.props.isMessageTransitionBottomUp,readOnly:!i.props.isLast&&i.props.isHistory}):l.a.createElement(ie,{payload:t.payload,index:i.props.index,readOnly:!i.props.isLast&&i.props.isHistory}))}},i.renderKnowledge=function(e){var t=e.message,n=e.tpl;return"Knowledge"===n?l.a.createElement(J,{payload:t.payload,index:i.props.index}):"KnowledgeAnswer"===n?l.a.createElement(Fe,{payload:t.payload,index:i.props.index,isHistory:i.props.isHistory}):"KnowledgeV2"===n?l.a.createElement(ye,{payload:t.payload,index:i.props.index,isHistory:i.props.isHistory}):void 0},i.renderZendeskChatHandover=function(e){var t=e.message;if("ZendeskChatHandover"===e.tpl)return l.a.createElement(fn,{payload:t.payload,index:i.props.index})},i.renderCarousel=function(e){var t=e.message;if("Carousel"===e.tpl)return l.a.createElement(Be,{payload:t.payload})},i.renderListOptions=function(e){var t=e.message;if("ListOptions"===e.tpl)return l.a.createElement(Ge,{payload:t.payload})},i.renderCalendly=function(e){var t=e.message;if("CalendlyApp"===e.tpl)return l.a.createElement(bn,{payload:t.payload,isLast:i.props.isLast})},i.renderEndChat=function(e){var t=e.message;if("EndChat"===e.tpl)return l.a.createElement(yn,{payload:t.payload})},i.renderZDClassicWidget=function(e){var t=e.message;if("ZDChatClassicWidgetHandover"===e.tpl)return i.props.isLast?l.a.createElement($n,{payload:t.payload}):null},i.renderConversationalCSAT=function(e){var t=e.message;if("ConversationCSAT"===e.tpl)return l.a.createElement(Ln,{payload:t.payload})},i.renderGuide=function(e){var t=e.message,n=e.tpl,a=v()(t,"payload.data.userData.text.messageToUser")||"Show Guide";if("BotGuide"===n)return l.a.createElement(Rn,Object.assign({name:a,payload:t.payload},i.props))},i.renderFileUpload=function(e){var t,n,a,o,r,s,c=e.message,d=e.tpl;return l.a.createElement(at,{onClose:open:i.state.showFileUpload&&i.props.isLast&&"UploadAttachment"===d,maxSizeInMb:50,title:null===c||void 0===c||null===(t=c.payload)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.outdata)||void 0===a?void 0:a.title,uploadText:null===c||void 0===c||null===(o=c.payload)||void 0===o||null===(r=o.data)||void 0===r||null===(s=r.outdata)||void 0===s?void 0:s.upload_text})},i.renderProductPage=function(e){var t,n=e.message;if("ProductSelector"===e.tpl&&i.props.isLast)return l.a.createElement(Pn,{payloadData:null===n||void 0===n||null===(t=n.payload)||void 0===t?void 0:t.data})},i.renderCustomSelect=function(e){var t,n,a,o=e.message;if("SelectList"===e.tpl)return l.a.createElement(Wn,{formData:null===o||void 0===o||null===(t=o.payload)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.outdata)||void 0===a?void 0:a.selectFormData,isLast:i.props.isLast})},i.state={vclass:"hidden",showFileUpload:!0};var o=null===(a=i.props.clientConfigData)||void 0===a?void 0:a.context;return i.delay=o&&o.messageDelayTime||100,i}return Object(O.a)(n,[{key:"componentWillMount",value:function(){var e,t,n,a,i=(null===(e=this.props.message)||void 0===e||null===(t=e.payload)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.steps)||void 0===a?void 0:a.length)||0;i=i>0?i:1;var o=this.props.isHistory?0:i*this.delay+50,r=this;setTimeout((function(){r.showMenu()}),o)}},{key:"render",value:function(){var e=this.props.message,t=this.props.isLast||!1,n=v()(e,"payload.data.tpl",null),a=this.props.showOptionsAfterSelection;return l.a.createElement(l.a.Fragment,null,e&&e.payload&&"ProductSelector"!==n&&this.processMessage(e),l.a.createElement("li",{className:this.state.vclass},this.renderKnowledge({message:e,tpl:n}),this.renderForm({message:e,tpl:n}),this.renderCarousel({message:e,tpl:n}),this.renderListOptions({message:e,tpl:n}),this.renderCalendly({message:e,tpl:n}),this.renderEndChat({message:e,tpl:n}),this.renderZDClassicWidget({message:e,tpl:n}),this.renderConversationalCSAT({message:e,tpl:n}),this.renderFileUpload({message:e,tpl:n}),this.renderProductPage({message:e,tpl:n}),this.renderGuide({message:e,tpl:n}),this.renderCustomSelect({message:e,tpl:n}),!this.props.chatEnded&&(t||a)&&this.renderOptions({message:e,tpl:n})),t&&l.a.createElement("li",{className:this.state.vclass},this.renderZendeskChatHandover({message:e,tpl:n})))}}]),n}(s.PureComponent);Yn.displayName="AgentMessageRenderer";var Qn={setShowTyping:F.l},Jn=Object(y.b)((function(e){var t,n=e.appState,a=n.chatEnded,i=n.showTyping,o=e.botConfig,r=e.mbus;return{clientConfigData:o,showOptionsAfterSelection:"yes"===(null===o||void 0===o||null===(t=o.context)||void 0===t?void 0:t.showOptionsAfterSelection),chatEnded:a,mbus:r,showTyping:i}}),Qn)(Yn),Xn=(n(1517),function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).state={showTyping:e.showTyping},a.hideTyping=a.hideTyping.bind(Object(C.a)(a)),a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.timeout||0;e>0&&setTimeout(this.hideTyping,e)}},{key:"hideTyping",value:function(){this.setState({showTyping:!1})}},{key:"render",value:function(){var e,t,n,a,i,o=this.state.showTyping,r=this.props.skipImage,s=null===(e=this.props.clientConfigData)||void 0===e?void 0:e.context,c=null===s||void 0===s?void 0:s.agentAvatar;return(null===(t=this.props)||void 0===t||null===(n=t.message)||void 0===n||null===(a=n.payload)||void 0===a||null===(i=a.props)||void 0===i?void 0:i.icon)&&(c=this.props.message.payload.props.icon),l.a.createElement(l.a.Fragment,null,o&&l.a.createElement("div",{className:"chat_question_chat ".concat("")},l.a.createElement("div",{className:"chat_question bg-transparent ".concat(this.props.isMessageTransitionBottomUp?"slide-bottom-up":"")},!r&&l.a.createElement("div",{className:"chat_question_image"},l.a.createElement("span",null,l.a.createElement("img",{src:c,alt:""}))),l.a.createElement("div",{class:"typing-loader"}))))}}]),n}(s.PureComponent));Xn.displayName="AgentTyping";var Zn=Object(y.b)((function(e){var t,n=e.botConfig,a=e.appState.showTyping;return{clientConfigData:n,isMessageTransitionBottomUp:"yes"===(null===n||void 0===n||null===(t=n.context)||void 0===t?void 0:t.messageTransitionBottomUp),showTyping:a}}),{})(Xn),ea=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).delay=function(e){var t=Date.now(),n=null;do{n=Date.now()}while(n-t<e)},a.renderByType=function(){a.props.messagetext;var e,t,n,i,o,r,s,c=null===(e=a.props.clientConfigData)||void 0===e?void 0:e.context,d=mn()||c&&c.agentAvatar,u=a.props.payload&&a.props.payload.data,p=a.props.payload&&a.props.payload.properties,m=null===(t=a.props.clientConfigData)||void 0===t?void 0:t.translations,h=null===(n=a.props.clientConfigData)||void 0===n||null===(i=n.context)||void 0===i?void 0:i.locale,f=v()(m,"".concat(h,".chattingWith"),"You are now chatting with"),g=v()(m,"".concat(h,".leftTheChat"),"has left the chat.");if((null===(o=a.props.message)||void 0===o||null===(r=o.payload)||void 0===r||null===(s=r.props)||void 0===s?void 0:s.icon)&&(d=a.props.message.payload.props.icon),p&&p.icon&&(d=p.icon),u&&u.type&&"chat.msg"===u.type)return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"chat_question_image"},l.a.createElement("span",null,l.a.createElement("img",{src:d,alt:""}))),l.a.createElement("div",{className:"chat_question_chat"},l.a.createElement("p",null,u.msg)));if(u&&u.type&&"chat.queue_position"===u.type){var b=0!==u.queue_position&&u.queue_position===window.zChat.getQueuePosition();return l.a.createElement(l.a.Fragment,null,l.a.createElement(re,{message:"You are number ".concat(u.queue_position," in the queue"),messagetext:"You are number ".concat(u.queue_position," in the queue"),isLast:b}))}return u&&u.type&&"chat.memberjoin"===u.type?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"memberjoin"},l.a.createElement("div",null,l.a.createElement("span",null,l.a.createElement("img",{src:d,alt:""})),l.a.createElement("div",null,l.a.createElement("span",null,"".concat(f," ").concat(u.display_name)))))):u.type&&"chat.memberleave"===u.type?l.a.createElement("div",{className:"memberjoin"},l.a.createElement("div",null,l.a.createElement("span",null,l.a.createElement("img",{src:d,alt:""})),l.a.createElement("div",null,l.a.createElement("span",null,"".concat(u.display_name," ").concat(g))))):void 0},a.renderAgentTyping=function(){return l.a.createElement(Zn,{skipImage:!1,message:a.props.message})},a.state={showModal:!1,type:"",src:"",hidden:"hidden",showTyping:"hidden"},a.renderByType=a.renderByType.bind(Object(C.a)(a)),a}return Object(O.a)(n,[{key:"componentWillMount",value:function(){var e=this;setTimeout((function(){var t,n;e.show(),"yes"===(null===(t=e.props.clientConfigData)||void 0===t||null===(n=t.context)||void 0===n?void 0:n.audioNewMessage)&&new Audio(e.props.clientConfigData.context.audioNewMessageTone).play()}),this.props.delay),this.props.delay>0&&setTimeout((function(){e.showTyping()}),this.props.delay-1e3)}},{key:"componentDidUpdate",value:function(){Object(f.p)()}},{key:"show",value:,{key:"showTyping",value:function(){this.setState({showTyping:""})}},{key:"render",value:function(){var e,t=null===(e=this.props.clientConfigData)||void 0===e?void 0:e.context,n=!(!t||"yes"!==t.showChatMessageTimeStamps);return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:this.state.showTyping},this.renderAgentTyping()),l.a.createElement("li",{key:this.props.index},l.a.createElement("div",{className:this.state.hidden},l.a.createElement("div",{className:"chat_question ".concat(this.props.isMessageTransitionBottomUp?"slide-bottom-up":"")},this.renderByType()),n&&l.a.createElement("span",{className:"timestamp agent"},"03 May 2020 12:05 PM"))))}}]),n}(s.Component);ea.displayName="ZdAgentMessage";var ta=Object(y.b)((function(e){var t,n=e.botConfig;return{clientConfigData:n,isMessageTransitionBottomUp:"yes"===(null===n||void 0===n||null===(t=n.context)||void 0===t?void 0:t.messageTransitionBottomUp)}}),{})(ea),na=function(e){var t=e.message,n=e.isHistory,a=Object(y.d)((function(e){return{messages:e.messages}})).messages;return Object(s.useEffect)((function(){!function(){var e,i,o,s,l,c=null===t||void 0===t||null===(e=t.payload)||void 0===e||null===(i=e.data)||void 0===i||null===(o=i.tpl)||void 0===o?void 0:o.toLowerCase();if(["solved","unsolved","end"].includes(c)&&!(null===t||void 0===t||null===(s=t.payload)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.originalType)&&!n){var d,u,p,m,h,g,v={id:1,field:"solved",tid:(null===t||void 0===t||null===(d=t.payload)||void 0===d||null===(u=d.data)||void 0===u||null===(p=u.header)||void 0===p?void 0:p.id)||0,value:(null===(m=a[a.length-3])||void 0===m||null===(h=m.payload)||void 0===h||null===(g=h.adata)||void 0===g?void 0:g.text)||""};"unsolved"===c.toLowerCase()?v=Object(r.a)(Object(r.a)({},v),{},{field:"unsolved",id:2}):"end"===c.toLowerCase()&&(v=Object(r.a)(Object(r.a)({},v),{},{field:"end",id:4}));var b={name:"guide_close",guide_id:null===t||void 0===t?void 0:t.flowId,data:v};Object(f.s)(b)}Object(f.k)()}()}),[]),l.a.createElement(l.a.Fragment,null)},aa=function(e){var t=e.content,n=e.question,a=Object(s.useState)(!0),i=Object(R.a)(a,2),o=i[0],r=(i[1],Object(s.useState)(0)),c=Object(R.a)(r,2),d=c[0],u=c[1],p=Object(s.useRef)();return Object(s.useEffect)((function(){var e,t;(null===p||void 0===p||null===(e=p.current)||void 0===e?void 0:e.clientHeight)&&u(null===p||void 0===p||null===(t=p.current)||void 0===t?void 0:t.clientHeight)}),[]),l.a.createElement("div",{className:"dc-guide--question_item dc-guide-richtxt-ovfl"},l.a.createElement("div",{className:"dc-guide--question_item__txt"},l.a.createElement("div",{ref:p,style:o&&d>=300?{height:d+10,transition:"height 1s",overflow:"hidden"}:{},className:"dc-guide--question_item__inner full-article-style mb-0"},l.a.createElement(en.a,{options:{target:"_blank"}},l.a.createElement(Ie.a,{model:t}),l.a.createElement("div",{className:"dc-guide--question_item__q"},n)))))},ia=function(e){var t=e.type,n=e.value;return"image"===t||"gif"===t?l.a.createElement("div",{className:"modal_src dc-macro--media "},l.a.createElement("div",{className:"dc-macro--image-block inline-image-block"},l.a.createElement("img",{src:n,alt:"guide-content"}))):"video"===t?l.a.createElement("div",{className:"dc-macro--media "},l.a.createElement(Oe.a,{url:n,height:"150px",width:"300px"})):void 0},oa=function(e){var t=e.medias,n=(null===t||void 0===t?void 0:t.length)||0,a=n>1?"block":"none";return l.a.createElement($e.a,{className:"dcbot--templates__carousel container",nextIcon:l.a.createElement("i",{className:"fa fa-chevron-right",style:{display:a},"aria-hidden":"true"}),prevIcon:l.a.createElement("i",{className:"fa fa-chevron-left",style:{display:a},"aria-hidden":"true"}),controls:!0,touch:!0,interval:3e5,onSlide:function(e){return function(e,t){var n=document.getElementsByClassName("carousel-control-next"),a=document.getElementsByClassName("carousel-control-prev");e===t-1?n.forEach((function(e){e.style.visibility="hidden"})):0===e?a.forEach((function(e){e.style.visibility="hidden"})):(n.forEach((function(e){"visible"!==e.style.visibility&&(e.style.visibility="visible")})),a.forEach((function(e){"visible"!==e.style.visibility&&(e.style.visibility="visible")})))}(e,n)}},t&&t.map((function(e,t){return l.a.createElement($e.a.Item,{key:t},l.a.createElement("div",null,l.a.createElement(ia,{type:null===e||void 0===e?void 0:e.type,value:null===e||void 0===e?void 0:e.value})),l.a.createElement("div",{className:"number-indicator",style:{display:a}},t+1," / ",n))})))},ra=function(e){var t=e.options,n=e.tid,a=e.onClick,i=Object(s.useState)(null),o=Object(R.a)(i,2),r=(o[0],o[1]),c=function(e){var t={text:null===e||void 0===e?void 0:e.text,"data-attr":null===e||void 0===e?void 0:e.keyid,"data-attr-tid":n,hide_message_in_chat_area:!0};Object(f.q)(t,"action_menuclick"),a&&a()};return l.a.createElement("div",{className:"dc-guide--help__block buttons"},l.a.createElement("div",{className:"items"},null===t||void 0===t?void 0:t.map((function(e,t){return l.a.createElement("div",{key:"a_"+t,className:"dc-guide--help__btn",onClick:function(){return c(e)},onMouseEnter:onMouseLeave:,l.a.createElement("div",{className:"guide-btn-container"},(null===e||void 0===e?void 0:e.image)&&l.a.createElement("div",{className:"btn-image"},l.a.createElement("img",{src:e.image,className:"help-btn-image",alt:"option"})),l.a.createElement("div",{className:"guide-btn-text-container"},l.a.createElement("span",{className:"".concat((null===e||void 0===e?void 0:e.image)?"":"btn-lft-side-text"),style:{fontSize:"0.9rem"}},null==e.translatedTxt?e.text:e.translatedTxt))))}))))},sa=function(e){var t,n,a,i,o,r=e.message,c=e.openGuide,d=(Object(y.c)(),Object(y.d)(()),u=d.showTyping,p=(d.messages,null===r||void 0===r||null===(t=r.payload)||void 0===t?void 0:t.data),m=(null===p||void 0===p?void 0:p.guideNodeCount)>1,h=null===p||void 0===p||null===(n=p.userData)||void 0===n?void 0:n.stepData,g=null===h||void 0===h?void 0:h.title,v=null===p||void 0===p||null===(a=p.userData)||void 0===a?void 0:a.transitions,b=(null===v||void 0===v?void 0:v.length)||0,w=1==b?"dc-guide--options-so":"dc-guide--options-mo",E=Object(s.useState)(c),_=Object(R.a)(E,2),O=_[0],C=_[1],S=Object(s.useState)(u),k=Object(R.a)(S,2),x=k[0],T=k[1];Object(s.useEffect)((function(){T(u)}),[u]),Object(s.useEffect)((function(){C(c)}),[c]);return l.a.createElement("div",{className:"bot-guide-v2"},O&&l.a.createElement(he,{hideDrawer:function(){var e;C(!1),Object(f.k)();var t={name:"guide_close",guide_id:null===p||void 0===p?void 0:p.flowId,data:{id:3,tid:(null===p||void 0===p||null===(e=p.header)||void 0===e?void 0:e.id)||0,field:"skipped",value:""}};Object(f.s)(t)},hideFooter:!0,drawerHeight:"full",width:375,titleWithCloseIcon:!0,loader:x,hideSlideUpAnimation:(null===p||void 0===p?void 0:p.guideNodeCount)>1},l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"guide-drawer-container"},l.a.createElement("div",{className:"dc-guide--outer"},l.a.createElement("div",{className:"dc-guide--guidestep"},l.a.createElement("div",{className:"dc-guide--item"},l.a.createElement("div",{className:"dc-guide--item_content relative"},l.a.createElement("div",{className:"dc-guide--step-title"},g),l.a.createElement("div",{className:"dc-guide--question__block"},h&&l.a.createElement("div",{className:"dc-guide--question"},function(){var e=null===h||void 0===h?void 0:h.subTitle,t=null===h||void 0===h?void 0:h.content,n=null===h||void 0===h?void 0:h.question;return l.a.createElement(l.a.Fragment,null,e&&l.a.createElement("div",{className:"dc-guide--question__subtitle"},e),(n||t)&&l.a.createElement(aa,{content:t,question:n}))}())),(null===h||void 0===h?void 0:h.media)&&l.a.createElement("div",{className:"dc-guide--item_image"},l.a.createElement("div",{className:"element"},l.a.createElement("div",{className:"media-item"},l.a.createElement(oa,{medias:null===h||void 0===h?void 0:h.media})))),l.a.createElement("div",{className:"dc-guide--tplsection"},b>0&&l.a.createElement("div",{className:w},l.a.createElement(ra,{options:v,tid:null===r||void 0===r||null===(i=r.data)||void 0===i||null===(o=i.header)||void 0===o?void 0:o.tid,onClick:function(){return T(!0)}}),m&&l.a.createElement("div",{className:"dc-guide--help__btn dc-guide--help__back_btn",onClick:function(e){return function(){var e;T(!0);var t=null===r||void 0===r||null===(e=r.payload)||void 0===e?void 0:e.data;Object(f.q)({guideViewType:null===t||void 0===t?void 0:t.guideViewType,guideNodeCount:null===t||void 0===t?void 0:t.guideNodeCount},"sys_client_goback")}()}},"Back")))))))))))},la=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).setToastTimer=function(){a.checkScrollState("newmessage")},a.handleScroll=function(e){window.ConverseAppsBot.isMobile&&a.props.isMobile||a.checkScrollState("scroll");var t=e.target;t.classList&&!1===t.classList.contains("on-scrollbar")&&t.classList.add("on-scrollbar")},a.showGuide=function(e){return"Guide"===(null===e||void 0===e?void 0:e.originalType)&&"widget"===(null===e||void 0===e?void 0:e.guideViewType)},a.diplayMessage=function(e,t){var n=function(e){return["solved","unsolved","skipped"].includes(null===e||void 0===e?void 0:e.toLowerCase())};if(e&&e.payload){var i=e.payload;if("bot"===i.sender){var o;if("conversation_messages"===i.text&&"cmd"===i.type){var r=t===a.props.messages.length-1;return l.a.createElement(l.a.Fragment,null,i.data.map((function(e,t){var o,s,c=t===i.data.length-1;if("bot"===(null===e||void 0===e||null===(o=e.payload)||void 0===o?void 0:o.sender)){var d,u,p,m,h,f=a.showGuide(null===e||void 0===e||null===(d=e.payload)||void 0===d?void 0:d.data),g=null===e||void 0===e||null===(u=e.payload)||void 0===u||null===(p=u.data)||void 0===p?void 0:p.tpl,v="Guide"===(null===e||void 0===e||null===(m=e.payload)||void 0===m||null===(h=m.data)||void 0===h?void 0:h.originalType);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Jn,{message:e,isHistory:!0,isLast:r&&c,isGuideQuestion:v}),f&&l.a.createElement(sa,{message:e,key:"bot-guide",openGuide:f}),n(g)&&l.a.createElement(na,{message:e,isHistory:!0}))}if("user"===(null===e||void 0===e||null===(s=e.payload)||void 0===s?void 0:s.sender))return l.a.createElement(P,{content:e.payload.data,index:a.props.index,isHistory:!0})})))}if("cmd"===(null===e||void 0===e||null===(o=e.payload)||void 0===o?void 0:o.type)){var s,c,d,u,p,m,h=t===a.props.messages.length-1,g=null===e||void 0===e||null===(s=e.payload)||void 0===s||null===(c=s.data)||void 0===c?void 0:c.tpl,v=a.showGuide(null===i||void 0===i?void 0:i.data),b="Guide"===(null===e||void 0===e||null===(d=e.payload)||void 0===d||null===(u=d.data)||void 0===u?void 0:u.originalType);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Jn,{message:e,isHistory:!1,index:t,showLoader:0===t,isLast:h,proactiveMessageDelay:a.props.proactiveDelay,selectDebugMessageCallback:a.props.selectDebugMessageCallback,toggleRestartButton:a.props.toggleRestartButton,storeGuideFunc:a.props.storeGuideFunc,isGuideQuestion:b}),a.props.debuggerMode&&(null===e||void 0===e||null===(p=e.payload)||void 0===p||null===(m=p.data)||void 0===m?void 0:m.debug)&&l.a.createElement("li",{className:"chat_question ".concat(a.props.isMessageTransitionBottomUp?"slide-bottom-up":"")},l.a.createElement("span",{className:"debug-point",onClick:function(){return a.props.selectDebugMessageCallback(t)}},"View Metadata")),v&&l.a.createElement(sa,{message:e,key:"bot-guide",openGuide:v}),n(g)&&h&&l.a.createElement(na,{message:e}))}if(i.type&&"zd"===i.type)return l.a.createElement(ta,{payload:i,index:t,isLast:!0})}else if("chasitor"===i.sender){var y,w,E,_;if(e.payload.type&&"action_menuclick"===e.payload.type)return l.a.createElement(P,{content:e.payload.adata.text,index:t});if(i.type&&"zd"===i.type)return l.a.createElement(P,{content:i.adata.message,index:t});if("action_sendform"===(null===e||void 0===e||null===(y=e.payload)||void 0===y?void 0:y.type));else if("action_initload"===(null===e||void 0===e||null===(w=e.payload)||void 0===w?void 0:w.type));else if("action_carousel_postback"!==(null===e||void 0===e||null===(E=e.payload)||void 0===E?void 0:E.type))return"action_product_selection"===(null===e||void 0===e||null===(_=e.payload)||void 0===_?void 0:_.type)?(Object(f.p)(),l.a.createElement(P,{content:e.payload.adata.product,type:"action_product_selection",index:t})):(Object(f.p)(),l.a.createElement(P,{content:e.payload.adata.text,index:t}))}}},a.state={showToaster:!1,type:"",message:"",height:500},a.diplayMessage=a.diplayMessage.bind(Object(C.a)(a)),a.checkScrollState=a.checkScrollState.bind(Object(C.a)(a)),a}return Object(O.a)(n,[{key:"componentDidMount",value:,{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"componentDidUpdate",value:function(e,t){var n,a,i=e&&e.messages&&e.messages.length,o=null===(n=this.props)||void 0===n||null===(a=n.messages)||void 0===a?void 0:a.length;if(i&&o>i){var r,s=null===(r=this.props.clientConfigData)||void 0===r?void 0:r.context;"yes"===s.autoScroll?Object(f.p)():"no"===s.autoScroll&&this.setToastTimer(this.setTimer,5e3)}}},{key:"isQualifiedToShowToast",value:function(e){var t,n,a,i=this.props.messages[this.props.messages.length-1];if("bot"===i.payload.sender&&(null===i||void 0===i||null===(t=i.payload)||void 0===t||null===(n=t.data)||void 0===n||null===(a=n.steps)||void 0===a?void 0:a.length)>1)return!0;return!1}},{key:"checkScrollState",value:function(e){var t,n,a=null===(t=this.props.clientConfigData)||void 0===t?void 0:t.context,i=null===(n=this.props.clientConfigData)||void 0===n?void 0:n.translations,o=Object(Se.get)(i,"".concat(a.locale,".newMessageText"),"New Messages"),r=Object(Se.get)(i,"".concat(a.locale,".latestMsgText"),"Go to Latest"),s=document.getElementsByClassName("chat_message_area")[0];"newmessage"===e?this.isQualifiedToShowToast()?this.state.showToaster||this.setState({showToaster:!0,type:"newmessage",message:o}):this.state.showToaster&&this.setState({showToaster:!1}):"scroll"===e&&(s.scrollTop+s.clientHeight-s.scrollHeight<-1e3?this.state.showToaster||this.setState({showToaster:!0,type:"newmessage",message:r}):this.state.showToaster&&this.setState({showToaster:!1}))}},{key:"scroll",value:function(e,t){setTimeout((function(){e.scrollIntoView({behavior:"smooth",block:"end"})}))}},{key:"render",value:function(){var e,t,n,a=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"message-area-container",style:{height:"100%",overflowY:"auto"}},l.a.createElement("div",{className:"message-list-container chat_message_area ".concat(this.props.isMessageTransitionBottomUp?"slide-bottom-up":""),key:"cma01",style:this.props.isMessageTransitionBottomUp?{display:"flex",flexDirection:"column",justifyContent:"flex-end",minHeight:"100%"}:{}},l.a.createElement(l.a.Fragment,null,this.props.children),this.props.debuggerMode&&l.a.createElement("div",{className:"debugger-tag"},l.a.createElement("span",null,"Test Mode")),this.state.height&&l.a.createElement(l.a.Fragment,null,(null===(e=this.props)||void 0===e||null===(t=e.messages)||void 0===t?void 0:t.length)>0&&l.a.createElement("ul",{className:"message-list",id:"message-list",key:"mla01"},null===(n=this.props.messages)||void 0===n?void 0:n.map(()),this.props.showTyping&&l.a.createElement("div",{className:"dcbot--typing-show bg-transparent"},l.a.createElement(Zn,{skipImage:!1,message:this.props.message,timeout:15e3})),this.state.showToaster&&this.props.isVisible?l.a.createElement(B,{type:this.state.type,message:this.state.message}):null,l.a.createElement("div",{id:"end-message",style:{float:"left",clear:"both"}})))))}}]),n}(s.PureComponent);la.displayName="ChatMessageArea";var ca=Object(y.b)((function(e){var t,n,a=e.appState,i=a.isVisible,o=a.showTyping,r=a.isMobile,s=e.botConfig,l=e.messages;return{clientConfigData:s,isMessageTransitionBottomUp:"yes"===(null===s||void 0===s||null===(t=s.context)||void 0===t?void 0:t.messageTransitionBottomUp),isMobile:r,isVisible:i,messages:l,debuggerMode:!!(null===s||void 0===s||null===(n=s.context)||void 0===n?void 0:n.debugToken),showTyping:o}}),{})(la),da=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){return Object(_.a)(this,n),t.call(this,e)}return Object(O.a)(n,[{key:"render",value:function(){return l.a.createElement("div",{className:"send-button ".concat(this.props.addClass||""),onClick:this.props.onClick},l.a.createElement("svg",{width:"12",height:"13",viewBox:"0 0 12 13"},l.a.createElement("path",{d:"M3 6L0 0c-.056.14 12 6 12 6L0 13c.053.083 3-7 3-7z",fill:"#FFF",fillRule:"evenodd"})))}}]),n}(s.Component);da.displayName="SendButton";var ua=da,pa=n(844),ma=n(834),ha=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).onInputKeyUp=function(e){a.debounceFn(e)},a.onInputKeyDown=function(e){e&&13===e.which&&(e.preventDefault(),a.props.onSubmit())},a.debounceFn=Vn()((,500),a.toggleTooltipView=function(e){a.setState({showAttachIconTooltip:e})},a.state={prediction:"",showFileUpload:!1,showAttachIconTooltip:!1},a}return Object(O.a)(n,[{key:"getRawInput",value:,{key:"componentDidUpdate",value:function(e){var t,n=this;(null===(t=this.props)||void 0===t?void 0:t.showSettings)||this.refs.input.focus(),this.props.showFileAttachmentIcon&&!e.showFileAttachmentIcon&&(this.toggleTooltipView(!0),this.tooltipTimer=setTimeout((,3e3))}},{key:"componentWillUnmount",value:,{key:"render",value:function(){var e=this,t=this.props.clientConfigData&&this.props.clientConfigData.context,n=t&&t.visibilityInputClosedPlaceholder||"Choose an option above...",a=t&&t.visibilityInputOpenPlaceholder||"Write a message...",i=this.props.show,o=i?a:n,r=this.props.showFileAttachmentIcon;return l.a.createElement("div",{style:{overflow:"visible"}},l.a.createElement("form",{className:"input-form",onSubmit:this.props.onSubmit},l.a.createElement(l.a.Fragment,null,r&&l.a.createElement(pa.a,{placement:"top",overlay:l.a.createElement(ma.a,null,"Upload File"),show:this.state.showAttachIconTooltip},l.a.createElement("span",{onMouseEnter:function(){return e.toggleTooltipView(!0)},onMouseLeave:function(){return e.toggleTooltipView(!1)}},l.a.createElement("i",{className:"icon-feather-paperclip ml-1 cursor-pointer",style:{color:"var(--primaryColor, #000)"},onClick:function(){e.setState({showFileUpload:!0})}}))),l.a.createElement("textarea",{className:"input "+i,ref:"input",placeholder:o,onKeyUp:this.onInputKeyUp,onKeyDown:this.onInputKeyDown,disabled:!i}),i&&l.a.createElement(ua,{onClick:this.props.onSubmit}))),l.a.createElement(at,{onClose:function(){return e.setState({showFileUpload:!1})},open:this.state.showFileUpload&&r,maxSizeInMb:50,uploadUrl:this.props.fileAttachmentUrl}))}}]),n}(s.Component);ha.displayName="Input";var fa=ha,ga=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).handleClick=function(e){e&&e.preventDefault();var t=a.props.mbus;if(t&&t.config&&t.config.enableEscapeHatch)if(a.props.closeEH(),t.config.ehsPending);else{Object(f.q)({type:a.props.ehEvent});var n=document.getElementsByClassName("disable_form_false");n&&n.length>0&&(n[0].classList.add("disable_form_true"),n[0].classList.remove("disable_form_false"))}},a.state={},a.handleClick=a.handleClick.bind(Object(C.a)(a)),a}return Object(O.a)(n,[{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,this.props.show?l.a.createElement("div",null,l.a.createElement("div",{className:"escape_hatch_standalone"},l.a.createElement("a",{className:"escape_hatch_link",onClick:function(t){return e.handleClick(t)}},this.props.ehDynaText))):null)}}]),n}(s.Component);ga.displayName="EscapeHatch";var va=ga;function ba(e){var t=Ee.b(m.s);Ee.b("routeKey")&&(t=Ee.b("routeKey"));var n=Ee.b("persistenceMode"),a=Ee.b(m.z);t||(t=Math.floor(1e4*Math.random()),Ee.g(m.s,t));var i=JSON.parse(JSON.stringify(e&&e.context));i.routeKey=t,i.shadow=i.shadow||0,i.autoScroll=i.autoScroll||"yes",i.showChatMessageTimeStamps=i.showChatMessageTimeStamps||"no",i.persistenceMode=n||i.persistenceMode||"clearOnReload",i.logThreshold=a||i.logThreshold||"5",i.locale=i.locale||"en-us";var o={params:{parseURL:!1,autoScroll:i.autoScroll,showChatMessageTimeStamps:i.showChatMessageTimeStamps,appId:i.appId,orgId:i.orgId,persistenceMode:i.persistenceMode,routeKey:t||"-500",botName:i.botName,draft:i.draft,locale:i.locale,userAgent:window.navigator.userAgent}};for(var r in i)i.hasOwnProperty(r)&&r.startsWith("browser_")&&(o.params[r]=i[r]);var s=e.browserParams;if(null!=s&&Object.keys(s).forEach((),window.ConverseAppsBotSession){var l=window.ConverseAppsBotSession.browserParams;o.params=Object.assign({},o.params,window.ConverseAppsBotSession),null!=l&&Object.keys(l).forEach((function(e){o.params["browser_"+e]=l[e]}))}if(window.ConverseAppsBot.context&&window.ConverseAppsBot.context.debugToken&&""!==window.ConverseAppsBot.context.debugToken&&(o.params.debugToken=window.ConverseAppsBot.context.debugToken),!(t>1e4))return o.params}var ya=n(839),wa=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,n,a,o,r,s,l,c,d,u,p;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p=function(e,t){var n=this;n.config=e,n.persistenceMode=e.persistenceMode;var a=Ee.a(m.B),i=null==a?"https://socks-gw1.deepconverse.com":a,o=Ee.a(m.C),r="r1";-1!==i.indexOf("gw")&&(r="r2"),o=null==o?["websocket","polling"]:JSON.parse(o),n.client=Object(ya.a)(i,{path:"r2"===r?"/clients/socketio/hubs/R2":"/messaging/chat/gw",query:{},transports:o,reconnectionDelay:250,timeout:2e4,withCredentials:!0}),n.client.on("connect",(function(){return n.client.emit("chat.establish_channel",{channel:n.config.channel,appId:n.config.context.appId,siteId:n.config.context.orgId,draft:n.config.draft,botName:n.config.context.botName}),t.onReconnect()})),n.client.on("connect_error",(function(e){return t.onConnectionError(e)})),n.localClientID=""+Math.floor(10000000001*Math.random())},u=function(){var e=Ee.b(m.w);return null!=e&&(e=parseInt(e),(new Date).getTime()-e<=36e5)},n=this.props.clientConfigData,a=ba(n),(o={widgetInited:!1,persistenceMode:a.persistenceMode,procEngine:a.procEngine,draft:a.draft,channel:null===(t=this.props.clientConfigData)||void 0===t?void 0:t.channelId,context:a}).messageQueue=[],r=a||{},s="",l=this,c=d=function e(t,n){n=n||{payload:{inRenderingPhase:!1}},setTimeout((function(){o.messageQueue.length>0&&(n.payload.inRenderingPhase||((n=o.messageQueue.shift()).payload=n.payload||{inRenderingPhase:!1},c(n))),e(t,n)}),t)},o.subHandler=function(e){if("show_typing_activity"!==v()(e,"payload.text")||"show_typing_activity"!==v()(o.messageQueue.slice(-1)[0],"payload.text")){var t=v()(e,"payload.type");if(null==t||-1===["action_suggestion_request"].indexOf(t)){var n=v()(e,"payload.data.tpl");if(null==n||"AnswerSuggestions"!==n)o.messageQueue.push(e);else{var a=v()(e,"payload.data.userData.suggestions"),i=new CustomEvent("dc.event.answer_suggestions",{detail:{suggestions:a}});document.dispatchEvent(i)}}}},d(10),p.prototype.initTransport=function(e,t){var n=this,a=n.client;n.widgetStateStr=Ee.b(m.D)||"{}";var i=Ee.b(m.y);i?r.browser_visitorType="repeat":(i=et()(),Ee.g(m.y,i),r.browser_visitorType="new"),n.dcwgid=i,r&&(r.dcwgid=i),n.widgetState=JSON.parse(n.widgetStateStr),n.widgetState.inited="yes",(e=n.config).stateSynced=!1;var o=function(e,n){a.open(),a.on("chat.outgoing_message",e.subHandler),e.widgetInited=!0,t({isOK:!0})};["persist","clearOnTabClose"].includes(n.persistenceMode)&&u()?setTimeout((function(){o(e)}),1e3):o(e)},p.prototype.sendMesg=function(e,t){e.localClientID=this.localClientID;var n={payload:e,tx:{src:"widget",ch:this.config.channel,custCtx:r}};e.mtype&&(n.tx.type=e.mtype),Ee.g(m.w,(new Date).getTime().toString()),this.client.emit("chat.incoming_message",n),o.subHandler(n)},p.prototype.newChannel=function(e){this.config.channel=e.channelId,this.client.emit("chat.establish_channel",{channel:this.config.channel,appId:this.config.context.appId,siteId:this.config.context.orgId,draft:this.config.draft,botName:this.config.context.botName})},(s=new p(o,this.props)).initTransport(o,();case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null)}}]),n}(s.Component),Ea=Object(y.b)((function(e){return{clientConfigData:e.botConfig}}),{})(wa),_a=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).closePreview=a.state={previewText:""},a.timer=null,a}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e,t,n=this,a=null===(e=this.props.clientConfigData)||void 0===e?void 0:e.context,i=null===(t=this.props.clientConfigData)||void 0===t?void 0:t.translations,o=Object(Se.get)(i,"".concat(a.locale,".previewText"),a.previewText);this.setState({previewText:o});var r=Object(Se.get)(this.props.flags,"chatbotLauncherPreviewTimeout",5e3);this.timer=-1===r?null:setTimeout((function(){return n.closePreview()}),r),this.props.showPreview||clearTimeout(this.timer)}},{key:"componentWillReceiveProps",value:function(e,t){e.isbotOpen&&null!==this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,this.props.showPreview&&l.a.createElement("div",{className:"launcher__preview ".concat("left"===this.props.botPosition?"launcher-position-left":""),style:{display:"block",fontSize:"14px"}},l.a.createElement("ul",{className:"min_max"},l.a.createElement("li",{style:{listStyleType:"none",cursor:"pointer"}},l.a.createElement("a",{id:"preview_close",className:"preview_minimize",onClick:function(t){return e.closePreview(t)},style:{float:"right"}},l.a.createElement("i",{className:"fa fa-times","aria-hidden":"true"})))),l.a.createElement("div",{className:"preview__body launcher__preview__body ",style:{minWidth:"200px",marginBottom:"10px",marginRight:"10",cursor:"pointer"},onClick:this.props.onClick},this.state.previewText),l.a.createElement("div",{className:"preview__caret"})))}}]),n}(s.Component);_a.displayName="LauncherPreview";var Oa=Object(y.b)((,{})(_a),Ca=n(448),Sa=function(e){var t=e.showPrivacyPolicy,n=e.showDC,a=Object(y.d)((function(e){var t=e.botConfig;return{context:null===t||void 0===t?void 0:t.context,translations:null===t||void 0===t?void 0:t.translations}})),i=a.context,o=a.translations,r=Object(s.useState)(null===i||void 0===i?void 0:i.privacyPolicyUrl),c=Object(R.a)(r,2),d=c[0],u=c[1],p=Object(Se.get)(o,"".concat(i.locale,".poweredBy"),"Powered by"),m=Object(Se.get)(o,"".concat(i.locale,".privacyPolicy"),"Privacy Policy");return Object(s.useEffect)((function(){if(null===i||void 0===i?void 0:i.privacyPolicyUrl){var e=Ca.compile(null===i||void 0===i?void 0:i.privacyPolicyUrl)({locale:i.locale});u(e)}}),[]),l.a.createElement(l.a.Fragment,null,(n||t)&&l.a.createElement("div",{className:"dcbot--footer-container"},n&&l.a.createElement("a",{className:"dcbot--footer-text",target:"_blank",rel:"noopener noreferrer",href:"https://deepconverse.com/"},l.a.createElement("span",null,p),l.a.createElement("img",{style:{height:10,paddingLeft:2},src:"https://static.deepconverse.com/shared/icons/integration/dc.png",alt:"company icon"})),n&&t&&l.a.createElement("div",{style:{padding:"0px 5px"}},"|"),t&&l.a.createElement("a",{className:"dcbot--footer-text",target:"_blank",rel:"noopener noreferrer",href:d},m)))},ka=n(278),xa=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).state={fileDownloadUrl:null,email:"",toast:{showToast:!1,toastType:"error",toastMessage:""},showButtonSpinner:!1},a.openPrivacyPolicy=a.openPrivacyPolicy.bind(Object(C.a)(a)),a.handleAudioNotifications=a.handleAudioNotifications.bind(Object(C.a)(a)),a}return Object(O.a)(n,[{key:"toastAction",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.showToast,a=void 0!==n&&n,i=t.toastType,o=void 0===i?"":i,r=t.toastMessage,s=void 0===r?"":r;this.setState({toast:{showToast:a,toastType:o,toastMessage:s}},(function(){a&&setTimeout((function(){return e.toastAction()}),5e3)}))}},{key:"generateTranscript",value:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,a,o,r,s,l,c,d,u,p,m,h,g,v,b,y,w=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="https://api.deepconverse.com/v1/action/mgmt/chatbots/transcript/".concat(Object(Se.get)(this.props,"clientConfigData.context.botName",""),"/").concat(Object(Se.get)(this.props,"clientConfigData.channelId","")),s={"X-Application-Id":Object(Se.get)(this.props,"clientConfigData.context.appId",""),"X-Site-Id":Object(Se.get)(this.props,"clientConfigData.context.orgId","")},l=function(e){w.toastAction({showToast:!0,toastType:"danger",toastMessage:e})},c=null===(n=this.props.clientConfigData)||void 0===n?void 0:n.translations,d=null===(a=this.props.clientConfigData)||void 0===a||null===(o=a.context)||void 0===o?void 0:o.locale,u=Object(Se.get)(c,"".concat(d,".errorDownloadTranscript"),"Error in downloading transcript"),p=Object(Se.get)(c,"".concat(d,".errorSendTranscript"),"Error in sending transcript to"),m=Object(Se.get)(c,"".concat(d,".successSendTranscript"),"Transcript sent to"),"downloadTranscript"!==t){e.next=21;break}return e.prev=9,e.next=12,Xe.a.get(r,{headers:s});case 12:(h=e.sent).data&&(g=new Blob([Object(Se.get)(h,"data.transcript","")]),v=URL.createObjectURL(g),Object(f.t)("Download Transcript"),this.setState({fileDownloadUrl:v},(function(){w.dofileDownload.click(),URL.revokeObjectURL(v),w.setState({fileDownloadUrl:""})}))),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),l(u);case 19:e.next=34;break;case 21:return b=this.state.email,this.setState({showButtonSpinner:!0}),e.prev=23,e.next=26,Xe.a.post(r,{email:b},{headers:s});case 26:y=e.sent,Object(Se.get)(y,"data.ack",!1)?(Object(f.t)("Send Transcript"),this.toastAction({showToast:!0,toastType:"success",toastMessage:"".concat(m," ").concat(b)}),this.setState({email:""})):l("".concat(p," ").concat(b)),e.next=33;break;case 30:e.prev=30,e.t1=e.catch(23),l("".concat(p," ").concat(b));case 33:this.setState({showButtonSpinner:!1});case 34:case"end":return e.stop()}}),e,this,[[9,16],[23,30]])})));return function(t){return e.apply(this,arguments)}}()},{key:"openPrivacyPolicy",value:function(){var e,t,n;window.open(null===(e=this.props)||void 0===e||null===(t=e.clientConfigData)||void 0===t||null===(n=t.context)||void 0===n?void 0:n.privacyPolicyUrl)}},{key:"handleAudioNotifications",value:function(e){var t=!!e.target.checked;this.props.setIsAudioEnabled(t)}},{key:"render",value:function(){var e,t,n,a,i,o,r,s=this,c=null===(e=this.props.clientConfigData)||void 0===e?void 0:e.translations,d=null===(t=this.props.clientConfigData)||void 0===t||null===(n=t.context)||void 0===n?void 0:n.locale,u=Object(Se.get)(c,"".concat(d,".settings"),"Settings"),p=Object(Se.get)(c,"".concat(d,".privacyPolicy"),"Privacy Policy"),m=Object(Se.get)(c,"".concat(d,".playSound"),"Play sound for incoming messages"),h=Object(Se.get)(c,"".concat(d,".notifications"),"Notifications"),f=Object(Se.get)(c,"".concat(d,".email"),"Email"),g=(Object(Se.get)(c,"".concat(d,".send"),"Send"),Object(Se.get)(c,"".concat(d,".downloadTranscript"),"Download Transcript"));return l.a.createElement(he,{hideDrawer:function(){s.props.setShowSettings(!1)},footerText:p,footerUrl:null===(a=this.props)||void 0===a||null===(i=a.clientConfigData)||void 0===i||null===(o=i.context)||void 0===o?void 0:o.privacyPolicyUrl},l.a.createElement("div",{style:{padding:"10px 20px 0px",maxHeight:500}},l.a.createElement("div",{className:"dcbot--settings-header__title mb-3 text-center"},l.a.createElement("span",null,l.a.createElement("i",{className:"icon-feather-settings",style:{top:2,position:"relative",marginRight:5}})),u),(this.props.audioControls.init.enabled||this.props.audioControls.maximize.enabled||this.props.audioControls.minimize.enabled)&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h6",{style:{textTransform:"uppercase",fontSize:12,color:"#999"}},h),l.a.createElement(ka.a,{className:"dcbot--settings-section__content",style:{display:"flex"}},l.a.createElement(ka.a.Label,null,m),l.a.createElement(ka.a.Check,{id:"notification-switch",className:"notification-switch-style",type:"switch",checked:this.props.isAudioEnabled,onChange:this.handleAudioNotifications}))),l.a.createElement("h6",{style:{textTransform:"uppercase",fontSize:12,color:"#999"}},"Chat Transcript"),l.a.createElement(ka.a,{style:{width:"100%"}},l.a.createElement(ka.a.Group,{style:{display:"flex"}},l.a.createElement(ka.a.Control,{value:this.state.email,type:"email","data-lpignore":"true",placeholder:f,onChange:),l.a.createElement(Ue.a,{className:"primary-button",style:{padding:"0px 12px",margin:6,minWidth:89},onClick:function(){return s.generateTranscript("emailTranscript")},disabled:!(!this.state.showButtonSpinner&&(r=this.state.email,/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(r).toLowerCase())))},this.state.showButtonSpinner?l.a.createElement("i",{className:"fa fa-circle-o-notch fa-spin"}):l.a.createElement("i",{className:"fa fa-paper-plane","aria-hidden":"true"}),l.a.createElement("span",{style:{marginLeft:5}},"Send")))),l.a.createElement(Ue.a,{className:"dcbot--settings-section__download mb-3 primary-button",style:{fontSize:13,border:"1px solid #ced4da",borderRadius:5,minWidth:"-webkit-fill-available",lineHeight:.5}},l.a.createElement("a",{className:"dcbot--settings-section__link",onClick:function(){return s.generateTranscript("downloadTranscript")}},g),l.a.createElement("a",{className:"hidden",download:"transcript.txt",href:this.state.fileDownloadUrl,ref:,"download")),this.state.toast.showToast&&l.a.createElement("div",{className:"p-2"},l.a.createElement("div",{className:"alert alert-".concat(this.state.toast.toastType),role:"alert",style:{wordBreak:"break-all"}},this.state.toast.toastMessage))))}}]),n}(s.Component);xa.displayName="Settings";var Ta={setShowSettings:F.k,setIsAudioEnabled:F.e},ja=Object(y.b)((,Ta)(xa);var Na=function(e){return l.a.createElement(pa.a,{trigger:["hover","hover"],key:"bottom",placement:"bottom",overlay:l.a.createElement(ma.a,{id:"popover-positioned-bottom-".concat(e.title.replace(/" "/g,"-").toLowerCase())},l.a.createElement("span",null,e.title))},e.children)},Ia=(n(1523),n(836)),Aa=n.n(Ia);var Da=function(e){var t=e.onClose,n=e.title,a=e.description,i=Object(s.useState)(0),o=Object(R.a)(i,2),r=o[0],c=o[1];return Object(s.useEffect)((function(){c(1);var e=document.getElementsByClassName("banner-desc")&&document.getElementsByClassName("banner-desc")[0].getElementsByTagName("a");if(e.length>0)for(var t,n=function(t){var n;if(null===(n=e[t].getAttribute("href"))||void 0===n?void 0:n.startsWith("#"))return{v:void 0};e[t].addEventListener("click",(function(n){n.preventDefault(),window.open(e[t].href,"_blank")}))},a=0;a<e.length;a++)if(t=n(a))return t.v}),[n,a]),l.a.createElement("div",{className:"announcement-banner",style:{transition:"opacity 1s",opacity:r}},l.a.createElement("div",{className:"banner-container"},l.a.createElement("div",{style:{position:"relative",top:-3,right:-5,float:"right",cursor:"pointer"}},l.a.createElement("i",{onClick:function(){c(0),t()},className:"icon-feather-x",style:{fontSize:20}})),l.a.createElement("div",{className:"d-flex"},l.a.createElement("img",{className:"align-self-center",src:Aa.a,alt:"speaker"}),n&&l.a.createElement("div",{className:"pl-2 banner-title"},n)),a&&l.a.createElement("div",{className:"banner-desc mt-1",dangerouslySetInnerHTML:{__html:a}})))},Ma=n(16),La=n.n(Ma);function $a(e){var t=e.status,n=e.description,a=e.autoClose,i=e.closeTime,o=Object(s.useState)(0),r=Object(R.a)(o,2),c=r[0],d=r[1],u=Object(s.useState)(!0),p=Object(R.a)(u,2),m=p[0],h=p[1];return Object(s.useEffect)((,[t,n,a,i]),Object(s.useEffect)((,[a,i]),l.a.createElement(l.a.Fragment,null,m?l.a.createElement("div",{className:"widget-notification p-2 m-2 alert alert-".concat(t),role:"alert",style:{opacity:c}},n):null)}$a.propType={status:La.a.oneOf(["success","danger","warning","info","light","default"]),description:La.a.oneOfType([La.a.string,La.a.node]).isRequired,autoClose:La.a.bool,closeTime:La.a.number},$a.defaultProps={status:"default",autoClose:!1,closeTime:3e3};var Pa=$a,Ba=n(223),Ra=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a;Object(_.a)(this,n),(a=t.call(this,e)).closeBanner=function(e){var t=a.state.announcements;e&&a.setState({announcements:t.map(()})},a.openSettings=function(){a.props.setShowSettings(!0),Object(f.t)("Setting Clicked")},a.handoverOnClick=function(){Object(f.t)("Agent Handover"),Object(f.q)({text:"i want to talk to an agent"},null),Object(f.q)({type:m.a,text:"agent_handover"})};var i=e.clientConfigData.context;return a.state={showChatEndButton:"show"===a.props.closeButton||"yes"===(null===i||void 0===i?void 0:i.visibilityShowChatEndButton),announcements:v()(a.props.clientConfigData,"announcements",[]).map((),isSocketConnected:a.props.isSocketConnected,hideInitially:!0,endChatStatusState:e.endChatStatus,showFullScreenButton:"yes"===(null===i||void 0===i?void 0:i.visibilityShowFullScreenToggle),showRestartCoversationButton:"show"===a.props.restartButton||"yes"===(null===i||void 0===i?void 0:i.visibilityRestartConversation)},a.getStatusText=a.getStatusText.bind(Object(C.a)(a)),a}return Object(O.a)(n,[{key:"shouldComponentUpdate",value:function(e,t,n){var a=e.clientConfigData.context;return e.endChatStatus||e.endChatStatus===this.state.endChatStatusState?e.endChatStatus!==this.state.endChatStatusState&&this.setState({endChatStatusState:e.endChatStatus,showChatEndButton:"show"===e.closeButton}):this.setState({showChatEndButton:!(!a.visibilityShowChatEndButton||"yes"!==a.visibilityShowChatEndButton),endChatStatusState:e.endChatStatus}),!0}},{key:"renderIcon",value:function(){var e="string"===typeof this.props.icon;return l.a.createElement("div",{className:"card-icon"},!e&&this.props.icon)}},{key:"getStatusText",value:,{key:"render",value:function(){var e,t,n=this,a=this.props.clientConfigData&&this.props.clientConfigData.context,i=a&&a.headerLogo,o=this.props.headerDynaText||a&&a.headerText;if(null==this.props.headerDynaText){var r=this.props.clientConfigData&&this.props.clientConfigData.translations;o=v()(r,"".concat(a.locale,".headerText"),a.headerText)}var s=!(!a||"yes"!==a.visibilityShowSettings),c=!(!a||"yes"!==a.visibilityShowAgentHandover),d=this.state,u=d.announcements,p=d.isSocketConnected,m=d.hideInitially,h=d.showChatEndButton,f=d.showFullScreenButton,g=d.showRestartCoversationButton,b=u.filter((function(e){return e.showAnnouncement}))[0],y="show"===this.props.minimizeButton,w=null===(e=this.props.clientConfigData)||void 0===e||null===(t=e.context)||void 0===t?void 0:t.locale,E=v()(r,"".concat(w,".settings"),"Settings"),_=v()(r,"".concat(w,".getAgent"),"Get an Agent"),O=v()(r,"".concat(w,".fullScreen"),"Full Screen"),C=v()(r,"".concat(w,".overlay"),"Overlay"),S=v()(r,"".concat(w,".minimize"),"Minimize"),k=v()(r,"".concat(w,".restartConversation"),"Restart the conversation"),x=v()(r,"".concat(w,".networkOffline"),"Looks like your network is offline. We will connect back when it comes online."),T=v()(r,"".concat(w,".networkOnline"),"You are back online.");return l.a.createElement("div",{className:"extended status-container",style:{textAlign:"unset",display:"flex",flexDirection:"column"}},l.a.createElement("div",{className:"chat_name pb-2"},(s||c||f)&&l.a.createElement("div",{className:"dropdown-area setting-dropdown-icon"},l.a.createElement(Ba.a,null,l.a.createElement(Ba.a.Toggle,{"data-testid":"header-dropdown",bsPrefix:"dropdown-menu-icons",childBsPrefix:"header-dropdown-btn",style:{display:"flex"}},l.a.createElement("i",{className:"icon-feather-more-vertical header-actions__icon"})),l.a.createElement(Ba.a.Menu,{"data-testid":"header-dropdown-menu-items",className:"header-dropdown-menu-items",style:{borderRadius:"10px !important",padding:"0",zIndex:2}},this.props.showRestartGuideButton&&l.a.createElement(Ba.a.Item,{"data-testid":"icon-feather-refresh-cw",onClick:this.props.restartGuide},l.a.createElement("div",{className:"settings-button display-flex cursor-pointer"},l.a.createElement("div",{className:"header-dropdown-item display-flex"},l.a.createElement("i",{className:"icon-feather-refresh-cw header-actions__icon"}),l.a.createElement("p",null,"Restart")))),s&&l.a.createElement(Ba.a.Item,{"data-testid":"icon-feather-settings",onClick:this.openSettings},l.a.createElement("div",{className:"settings-button display-flex cursor-pointer"},l.a.createElement("div",{className:"header-dropdown-item display-flex"},l.a.createElement("i",{className:"icon-feather-settings header-actions__icon"}),l.a.createElement("p",null,E)))),c&&l.a.createElement(Ba.a.Item,{"data-testid":"icon-feather-user",onClick:this.handoverOnClick},l.a.createElement("div",{className:"agent-handover-button display-flex cursor-pointer"},l.a.createElement("div",{className:"header-dropdown-item display-flex"},l.a.createElement("i",{className:"icon-feather-user header-actions__icon"}),l.a.createElement("p",null,_)))),f&&"fullscreen"!==this.props.theme&&l.a.createElement(Ba.a.Item,{"data-testid":"icon-feather-maximize",onClick:this.props.fullScreenOnClick},l.a.createElement("div",{className:"display-flex cursor-pointer"},l.a.createElement("div",{className:"header-dropdown-item display-flex"},l.a.createElement("i",{className:"icon-feather-maximize-2 header-actions__icon"}),l.a.createElement("p",null,O)))),f&&"fullscreen"===this.props.theme&&l.a.createElement(Ba.a.Item,{"data-testid":"icon-feather-minimize",onClick:this.props.restoreOnClick},l.a.createElement("div",{className:"display-flex cursor-pointer"},l.a.createElement("div",{className:"header-dropdown-item display-flex"},l.a.createElement("i",{className:"icon-feather-minimize-2 header-actions__icon"}),l.a.createElement("p",null,C))))))),l.a.createElement("div",{className:"chat_image",style:{flex:0,width:"unset",marginRight:8,marginTop:4}},l.a.createElement("div",{className:"chat_image_border",style:{margin:"0px",position:"relative"}},l.a.createElement("button",{id:"img_click",style:{padding:"0 5px"}},l.a.createElement("img",{src:i,alt:"client"}))),l.a.createElement("div",{className:"status--online"})),l.a.createElement("div",{className:"chat_client_name",style:{paddingLeft:"10px",flex:.6,width:"unset"}},l.a.createElement("div",{className:"name_area"},l.a.createElement("h2",null,o))),l.a.createElement("div",{className:"header-actions__buttons",style:{justifyContent:"flex-end",flex:.4,top:"unset"}},y&&l.a.createElement("div",{className:"minimize-button display-flex cursor-pointer"},l.a.createElement(Na,{title:S},l.a.createElement("i",{className:"icon-feather-minus header-actions__icon",style:{fontSize:24},onClick:))),g&&l.a.createElement("div",{className:"display-flex cursor-pointer"},l.a.createElement(Na,{title:k},l.a.createElement("i",{className:"icon-feather-refresh-cw header-actions__icon",style:{fontSize:20},onClick:this.props.restartConversation}))),h&&l.a.createElement("div",{className:"end-chat-button display-flex cursor-pointer"},l.a.createElement("i",{className:"icon-feather-x header-actions__icon",style:{fontSize:24},onClick:this.props.confirmEndChat})))),!m&&l.a.createElement(Pa,{status:p?"success":"danger",description:p?T:x,autoClose:p}),b&&l.a.createElement(Da,{key:v()(b,"uid",""),onClose:function(){return n.closeBanner(v()(b,"uid",null))},title:v()(b,"title",""),description:v()(b,"details.text","")}))}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(t.hideInitially&&e.isSocketConnected!==t.isSocketConnected)return{hideInitially:!1,isSocketConnected:e.isSocketConnected};var n=e.clientConfigData.context;return{isSocketConnected:e.isSocketConnected,showChatEndButton:"show"===(null===e||void 0===e?void 0:e.closeButton)||"yes"===(null===n||void 0===n?void 0:n.visibilityShowChatEndButton),showRestartCoversationButton:"show"===(null===e||void 0===e?void 0:e.restartButton)||"yes"===(null===n||void 0===n?void 0:n.visibilityRestartConversation)}}}]),n}(s.Component);Ra.displayName="Header";var Fa={expandOrMinimise:F.b,setShowSettings:F.k},Ua=Object(y.b)((function(e){var t=e.appState,n=t.showSettings,a=t.chatEnded,i=t.theme,o=t.minimizeButton,r=t.closeButton,s=t.restartButton;return{showSettings:n,clientConfigData:e.botConfig,endChatStatus:a,theme:i,minimizeButton:o,closeButton:r,restartButton:s}}),Fa)(Ra),Ga=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);eturn Object(O.a)(n,[{key:"componentDidMount",value:,{key:"render",value:function(){var e=this.state.show;return l.a.createElement(l.a.Fragment,null,e&&l.a.createElement(Ue.a,{variant:"primary",className:"new-conversation-btn",onClick:this.props.startNewConversation},"New Conversation"))}}]),n}(s.PureComponent),za=n(206),Ha=n(454),qa=n(366),Va=Object(s.lazy)((function(){return n.e(3).then(n.bind(null,1738))})),Wa=Object(s.lazy)((),Ka=Object(s.lazy)((),Ya=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a,l,c,d;Object(_.a)(this,n),(d=t.call(this,e)).initializeMbus=function(e){d.realizeState(e),e.config.enableEscapeHatch=!0,null==d.state.mbus&&d.setMessageBus(e)},d.addSubscriptionMessagesToQueue=function(e,t){var n,a,i,o;e&&e.payload&&"bot"===e.payload.sender&&"show_typing_activity"!==e.payload.text&&"chat_event"!==e.payload.text?(d.messageQueue.push(e),(null===e||void 0===e||null===(n=e.payload)||void 0===n?void 0:n.data)&&(null===e||void 0===e||null===(a=e.payload)||void 0===a?void 0:a.data)&&(null===(i=Object.keys(null===e||void 0===e||null===(o=e.payload)||void 0===o?void 0:o.data))||void 0===i?void 0:i.length)>0&&d.setState({showInitialLoader:!1,showReload:!1})):d.processSubscriptionMessage(e,t)},d.processQueueMessages=function(){var e=d.state.mbus,t=d.messageQueue,n=Object(C.a)(d);t.length>0?(d.processSubscriptionMessage(t.shift(),e),n.reloadTimeout&&window.clearTimeout(n.reloadTimeout)):d.state.visible&&d.state.messages.length<=0&&!n.reloadTimeout&&(n.reloadTimeout=window.setTimeout((function(){n.setState({showReload:!0,showInitialLoader:!1},()}),3e4))},d.handleSubscriptionMessage=function(e,t){"v2"===d.procEngine?d.addSubscriptionMessagesToQueue(e,t):d.processSubscriptionMessage(e,t)},d.processSubscriptionMessage=function(e,t){var n=d.state.messages,a=!1;if("conversation_messages"===e.payload.text&&["persist","clearOnTabClose"].includes(d.props.clientConfigData.context.persistenceMode)&&(a=n.length>0&&n.filter(()),"chasitor"!==v()(e,"payload.sender")||"sys_client"!==v()(e,"payload.type")&&"action_initload"!==v()(e,"payload.type")){if(e.payload&&"show_typing_activity"===e.payload.text&&n.length>0&&n[n.length-1].payload&&n[n.length-1].payload.text===e.payload.text)return;if(a&&a.length>0)return;if(["action_conversation_csat","action_fileupload","sys_client_goback","guide_close"].includes(e.payload.type))return;JSON.stringify(d.state.messages[d.state.messages.length-1])!==JSON.stringify(e)&&(d.props.showTyping&&setTimeout((function(){d.props.setShowTyping(!1)}),100),d.props.addNewMessage(e)),d.processMessage(e,t)}else d.handleChasitorSysMessages(e,t);e.payload.localClientID===t.localClientID&&d.saveState(t)},d.handleChasitorSysMessages=function(e,t){e.payload.adata&&"escape_hatch"===e.payload.adata.type?t&&t.config&&t.config.ehsPending&&(t.config.ehsPending=!1):e.payload.adata&&"input_box_open"===e.payload.adata.type?d.toggleInputBox({state:"visible"}):e.payload.adata&&"input_box_close"===e.payload.adata.type&&d.toggleInputBox({state:"hidden"})},d.handleServerSysMessages=function(e,t){var n,a=v()(e,"payload.data.tplData.eventName"),i=null===(n=d.props.clientConfigData)||void 0===n?void 0:n.context;if(a===m.kb)d.minimizeOnClick();else if(a===m.jb)d.chatButtonOnClick();else if(a===m.eb)d.clearBot(t);else if(a===m.ib)d.hideWidgetIcon();else if(a===m.pb)d.showWidgetIcon();else if(a===m.hb)d.showEH();else if(a===m.gb)d.closeEH();else if(a===m.nb)d.setState({serverPredictionsEnabled:!1});else if(a===m.ob)d.setState({serverPredictionsEnabled:!0});else if(a===m.fb){var o=v()(e,"payload.data.tplData.eventData");o&&o.controlName&&d.props.updateAppState(Object(T.a)({},o.controlName,o.state))}else a===m.lb?i&&i.hostedPageEvents&&window.parentIFrame&&window.parentIFrame.sendMessage({task:"CUSTOM_EVENTS",type:"PAGE",action:"DISABLE",context:window.ConverseAppsBot.context.hostedPageEvents}):a===m.mb&&i&&i.hostedPageEvents&&window.parentIFrame&&window.parentIFrame.sendMessage({task:"CUSTOM_EVENTS",type:"PAGE",action:"ENABLE",context:window.ConverseAppsBot.context.hostedPageEvents})},d.processMessage=function(e,t){var n,a,i,o,r,s,l,c,u,p,h,f,g,b,y=null===(n=d.props.clientConfigData)||void 0===n?void 0:n.translations,w=null===(a=d.props.clientConfigData)||void 0===a||null===(i=a.context)||void 0===i?void 0:i.locale,E=v()(y,"".concat(w,".rightOption"),"Don't see the right option?"),_=v()(y,"".concat(w,".cancelRequest"),"Cancel request?"),O=d.state.showEH,C=d.state.ehDynaText||E,S="escape_hatch";if(e&&e.payload&&e.payload.data&&e.payload.data.tpl){var k=e.payload.data.tpl;k===m.Z?d.state.visible||d.props.setNewMessagesCount(d.props.newMessagesCount+1):k===m.m&&d.handleServerSysMessages(e,t)}if((null===e||void 0===e||null===(o=e.payload)||void 0===o||null===(r=o.data)||void 0===r?void 0:r.tpl)||"conversation_messages"===(null===e||void 0===e||null===(s=e.payload)||void 0===s?void 0:s.text)||(d.state.visible||d.props.setNewMessagesCount(d.props.newMessagesCount+1),!d.state.showWidget&&d.showBot()),"show_typing_activity"===(null===e||void 0===e||null===(l=e.payload)||void 0===l?void 0:l.text)&&d.props.setShowTyping(!0),"closed"===(null===e||void 0===e||null===(c=e.payload)||void 0===c||null===(u=c.props)||void 0===u||null===(p=u.state)||void 0===p?void 0:p.input)&&d.toggleInputBox({state:"hidden"}),"conversation_messages"===(null===e||void 0===e||null===(h=e.payload)||void 0===h?void 0:h.text)&&(e.payload.data&&0===e.payload.data.length?d.toggleInputBox({state:"visible"}):(d.toggleInputBox({state:"hidden"}),!d.state.showWidget&&d.showBot()),O=d.state.showEH),e&&e.payload&&e.payload.props){var x=e.payload.props;x&&x.state&&("waiting"===x.state.eh&&(C=_,S="cancel_handover",d.toggleInputBox({state:"hidden"}),O=!0),"closed"===x.state.eh&&(O=!1),"closed"===x.state.input&&("Form"===k||d.toggleInputBox({state:"hidden"})),"open"===x.state.input&&(d.toggleInputBox({state:"visible"}),d.props.toggleHideInput(!1)))}e&&e.payload&&"bot"===e.payload.sender&&((null===e||void 0===e||null===(f=e.payload)||void 0===f||null===(g=f.props)||void 0===g||null===(b=g.state)||void 0===b?void 0:b.headerText)?d.setState({headerDynaText:x.state.headerText}):d.setState({headerDynaText:null}),"chat.agentjoined"===v()(e,"payload.data.type")?d.setState({agentJoined:!0}):"chat.agentleft"===v()(e,"payload.data.type")&&d.setState({agentJoined:!1}));if("ClientEvent"!==k&&(d.setState({showEH:O,ehDynaText:C,ehEvent:S}),t.config.enableEscapeHatch=O),"SalesforceClientAction"===v()(e,"payload.adata.tpl")){var T=v()(e,"payload.adata.type");d.setState({showFileAttachmentIcon:"show_attachment"===T,fileAttachmentUrl:v()(e,"payload.adata.uploadUrl")})}if("IntercomAttachment"===v()(e,"payload.adata.tpl")){var j=v()(e,"payload.adata.type");d.setState({showFileAttachmentIcon:"show_attachment"===j})}if("SuncoAttachment"===v()(e,"payload.adata.tpl")){var N=v()(e,"payload.adata.type");d.setState({showFileAttachmentIcon:"show_attachment"===N})}},d.realizeState=function(e){if(e&&e.widgetState&&e.widgetState.inputState){var t=e.widgetState.inputState;d.toggleInputBox(t)}else d.setState({showInitialLoader:!0})},d.toggleInputBox=function(e){"hidden"===e.state?!0===d.state.inputVisible&&d.setState({inputVisible:!1}):(!1===d.state.inputVisible&&d.props.toggleHideInput(!1),d.setState({inputVisible:!0}))},d.setMessageBus=d.saveState=d.closeEH=function(){d.setState({showEH:!1})},d.showEH=function(){d.setState({showEH:!0})},d.handleOnSubmit=function(e){e&&e.preventDefault();var t=d.refs.input.getRawInput().value.trim().replace(/\b(?:\d{4}[ -]?){3}(?=\d{4}\b)/gm,"#### #### #### ").replace(/\b(?:\d{3}[-]?)\d{2}[-]?(?=\d{4}\b)/gm,"###-##-");Object(f.t)("Input Submitted",t),t&&("connected"===sn.a.getConnectionStatus()&&sn.a&&sn.a.isChatting()?cn(sn.a,d.state.mbus,t):d.state.mbus.sendMesg({sender:"chasitor",adata:{text:t}}),d.clearInput(),d.hidePredictions(),Object(f.p)(500))},d.clearInput=function(){d.refs.input.getRawInput().value=""},d.onInputKeyUp=function(){var e=Object(o.a)(i.a.mark((function e(t,n){var a,o,r,s,l,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(o=null===(a=d.props.clientConfigData)||void 0===a?void 0:a.context)&&"yes"===o.showPredictions&&d.state.serverPredictionsEnabled&&(r=d.refs.input.getRawInput().value,s=r.toLowerCase().trim(),d.setState({inputValue:s}),d.state.prevSuggestionsLabel.some((function(e){return e.startsWith(s)}))&&r.length>3?d.setState({suggestionLabel:s}):r.length>3&&n?(d.setState({suggestionLabel:null}),d.state.mbus.sendMesg({sender:"chasitor",adata:{text:r.trim()},type:"action_suggestion_request"})):d.setState({suggestionLabel:null})),d.state.enableChasitorSneakPeek&&d.state.agentJoined&&(l=!1,(n||32===(t&&(t.keyCode||t.which)))&&(l=!0),l&&null!=(c=d.refs.input.getRawInput().value)&&c.trim().length>0&&d.sendClientEvents(m.i,c));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d.prevSuggestionsLabel=function(e){d.setState({prevSuggestionsLabel:[].concat(Object(x.a)(d.state.prevSuggestionsLabel),[e])}),d.showPredictions()},d.hidePredictions=function(){d.props.setShowPredictions(!1)},d.showPredictions=d.toggleRestartButton=d.storeGuideFunc=function(e){d.restartGuideFunc=e},d.restartGuide=function(){d.restartGuideFunc()},d.getVisibilityClass=function(){if(null!=d.state.mbus)return"extended"===window.ConverseAppsBot.context.botType?d.state.visible?"visible extended-visible":"":d.state.visible?"visible":""},d.minimizeOnClick=function(){var e=Object(C.a)(d);Object(f.t)("Minimize Bot"),"extended"===d.props.theme&&document.querySelector(".widget-container.extended").classList.add("widget-hidden"),d.props.setAutoOpen(!1),setTimeout((function(){d.props.expandOrMinimise(!1);var t=e.props.theme;Object(f.r)(m.N,!1,t),Object(f.r)(m.H),Ee.b(m.r)&&Ee.g(m.r,"minimized")}),80),d.sendClientEvents(m.N),d.state.isAudioEnabled&&d.state.audioControls.minimize.enabled&&d.playAudio(v()(d.state.audioControls,"minimize.tone",null))},d.fullScreenOnClick=function(){Object(f.t)("Full Screen Bot");d.props.setTheme("fullscreen");var e=d.state.visible;Object(f.r)(m.d,e,"fullscreen"),Ee.b(m.r)&&Ee.g(m.r,"fullscreen"),d.sendClientEvents(m.d)},d.restoreOnClick=function(){var e=Object(C.a)(d);Object(f.t)("Minimize Chat Area");var t=window.ConverseAppsBot.context.botType||"extended";d.props.setTheme(t);var n=e.state.visible;Object(f.r)(m.T,n,t),Ee.b(m.r)&&Ee.g(m.r,t),d.sendClientEvents(m.T)},d.sendEndChatAction=function(e){d.props.clientConfigData;d.closeEH(),d.sendClientEvents(m.j),Ee.f()},d.restartConversation=function(){d.sendClientEvents(m.l),Object(f.t)("Restart conversation"),d.props.updateMessages([]),d.startNewConversation()},d.startNewConversation=function(){var e,t,n=d.props.clientConfigData;d.props.updateAppState({chatEnded:!1,closeButton:"show"});var a=et()(),i=Object(r.a)(Object(r.a)({},n),{},{channelId:a});d.props.updateConfig({channelId:a});var o=(null===i||void 0===i||null===(e=i.context)||void 0===e?void 0:e.persistenceMode)||"clearOnReload";d.state.mbus.newChannel(i);var s,l=Date.now();"clearOnTabClose"===o&&(Ee.h(m.E,a),Ee.h(m.Y,l),Ee.h(m.q,null===n||void 0===n||null===(s=n.context)||void 0===s?void 0:s.botName));Ee.g(m.E,a),Ee.g(m.Y,l),Ee.g(m.q,null===n||void 0===n||null===(t=n.context)||void 0===t?void 0:t.botName),d.setState({closeButton:"show"},(function(){d.renderWidget()}))},d.chatButtonOnClick=function(){var e,t,n,a=Ee.b(m.r);"init"!==a&&"reload"!==a||d.sendClientEvents(m.k),d.state.mbus&&["persist","clearOnTabClose"].includes(null===(e=d.props)||void 0===e||null===(t=e.clientConfigData)||void 0===t||null===(n=t.context)||void 0===n?void 0:n.persistenceMode)&&(d.state.mbus.sendMesg({sender:"chasitor",type:"action_initload"}),Ee.b(m.r)||Ee.g(m.r,"init")),d.state.isAudioEnabled&&d.state.audioControls.maximize.enabled&&d.playAudio(v()(d.state.audioControls,"maximize.tone",null)),d.setState({proactiveMessages:!1}),d.renderWidget(),Object(f.t)("Open Bot")},d.renderWidget=function(){Object(C.a)(d);var e=d.props.theme;Ee.g(m.r,e),d.props.updateAppState({isVisible:!0,showLauncherPreview:!1,newMessagesCount:0}),Object(f.r)(m.bb,!0,e);["persist","clearOnTabClose"].includes(d.props.clientConfigData.context.persistenceMode);d.sendClientEvents(m.bb)},d.closePreview=function(){var e=d.props,t=e.isVisible,n=e.theme;Object(f.t)("Close Preview"),Object(f.r)(m.p,t,n),d.props.setShowLauncherPreview(!1)},d.reloadBot=function(){window.location.reload(),d.props.setIsVisible(!1),Object(f.r)(m.n,!1,d.props.theme),Ee.g(m.r,"reload")},d.clearBot=function(){Object(f.j)(),Object(f.t)("Reload Bot"),Object(f.r)(m.n,!1,""),Ee.g(m.r,"reload"),d.props.reloadWidget()},d.showWidgetIcon=function(){var e=Object(C.a)(d);Object(f.t)("Minimize Bot");d.props.updateAppState({showWidget:!0,isVisible:!1});var t=e.props.theme;Object(f.r)(m.N,!1,t),Ee.b(m.r)&&Ee.g(m.r,"minimized")},d.hideWidgetIcon=function(){var e=Object(C.a)(d);Object(f.t)("Hide Bot"),d.props.setShowWidget(!1);var t=e.state,n=t.visible,a=t.theme;Object(f.r)(m.n,n,a),Ee.b(m.r)&&Ee.g(m.r,"hidden")},d.showBot=function(){if("hidden"!==Ee.b(m.r)&&!d.state.showWidget){var e=Object(C.a)(d);d.props.updateAppState({showWidget:!0,isVisible:!0,showLauncherPreview:!1});var t=e.props.theme;Object(f.r)(m.bb,!0,t),Ee.g(m.r,t)}},d.renderBotState=function(){var e=Ee.b(m.r),t=Object(C.a)(d);if("hidden"===e)d.props.updateAppState({showWidget:!1,isVisible:!1});else if("minimized"===e)d.props.setShowLauncherPreview(!1);else if("extended"===e){d.props.updateAppState({isVisible:!0,showLauncherPreview:!1,theme:e}),Object(f.r)(m.bb,!0,e)}else if("reload"===e){d.props.setShowLauncherPreview(!1);var n=t.state,a=n.visible,i=n.theme;Object(f.r)(m.N,a,i)}else if("fullscreen"===e){d.props.updateAppState({isVisible:!0,showLauncherPreview:!1,theme:e}),Object(f.r)(m.d,!0,e)}else{var o={name:m.pb,data:{evalue:!0,ename:m.pb,dims:{pageUrl:v()(window.ConverseAppsBotSession,"pageUrl"),referrer:v()(window.ConverseAppsBotSession,"referrer"),userAgent:v()(window.ConverseAppsBotSession,"userAgent"),browserParams:v()(window.ConverseAppsBotSession,"allBrowserParams"),utmParams:v()(window.ConverseAppsBotSession,"browserParams"),locale:v()(window.ConverseAppsBot,"context.locale")}}};Object(f.s)(o)}},d.sendClientEvents=function(e,t){var n=e&&e.toLowerCase(),a=t||"";d.state.mbus&&d.state.mbus.sendMesg({sender:"chasitor",type:"sys_client",adata:{type:""+n,text:""+a}})},d.changeLanguage=function(e){Object(f.t)("Change Language"),d.sendClientEvents(m.g,e)},d.selectDebugMessageCallback=d.closeDebugPannel=function(){return d.setState({debugPannel:!1})},d.playAudio=function(e){if(e){var t=new Audio(e);t.load(),t.addEventListener("canplaythrough",(function(){t.play().catch((function(e){}))}))}},d.drawerCloseAnimation=function(){var e,t;(null===(e=d.menuDrawerRef)||void 0===e||null===(t=e.current)||void 0===t?void 0:t.refCloseDrawer)&&d.menuDrawerRef.current.refCloseDrawer(),setTimeout((function(){d.setState({showConfirmationDialog:!1})}),400)},d.endChatonClick=function(){Object(f.t)("End Chat"),d.drawerCloseAnimation(),d.sendEndChatAction(),d.setState({closeButton:"hide"},()},d.continueChat=function(e){Object(f.t)("Continue Chat"),e?d.drawerCloseAnimation():d.setState({showConfirmationDialog:!1})},d.confirmEndChat=function(){Object(f.t)("Confirm End Chat"),d.setState({showConfirmationDialog:!0})};var u=null===(a=d.props)||void 0===a||null===(l=a.clientConfigData)||void 0===l?void 0:l.context;d.procEngine=u&&u.procEngine,d.dcbuttonstate={minimizeButton:"show",closeButton:"hide"};var p=Ee.b(m.x);p?d.dcbuttonstate=JSON.parse(p):Ee.g(m.x,JSON.stringify(d.dcbuttonstate));var h=Ee.b("logThreshold")?Ee.b("logThreshold"):u.logThreshold?u.logThreshold:"5";Ee.g(m.z,h);var g=null===(c=d.props.clientConfigData)||void 0===c?void 0:c.translations,b=v()(g,"".concat(u.locale,".escapeHatchText"),u.escapeHatchText);return d.state={visible:!1,inputVisible:!1,showEH:!(!u||"yes"!==u.visibilityShowEscapeHatch),serverPredictionsEnabled:!0,enableChasitorSneakPeek:!(!u||"yes"!==u.enableChasitorSneakPeek),mbus:null,messages:[],prediction:"",showInitialLoader:!0,showReload:!1,theme:window.ConverseAppsBot.context.botType||"extended",ehDynaText:b||"",ehEvent:"escape_hatch",showWidget:!u||"0"!==u.visibilityWidgetDisplayStyle,showFooter:v()(u,"visibilityWidgetFooter"),newMessages:0,headerDynaText:null,showSettings:!1,isAudioEnabled:!0,vendor:u&&u.vendor||"",proactiveMessages:!(!u||"yes"!==u.proactiveMessages),messageId:0,debugPannel:!1,audioControls:{minimize:{enabled:!(!u||"yes"!==u.audioMinimize),tone:u&&u.audioMinimizeTone},maximize:{enabled:!(!u||"yes"!==u.audioMaximize),tone:u&&u.audioMaximizeTone},init:{enabled:!(!u||"yes"!==u.audioBotInit),tone:u&&u.audioBotInitTone}},isSocketConnected:!0,isStatusOnline:!0,showLauncher:"yes"!==(null===u||void 0===u?void 0:u.openBotExternally),showFileAttachmentIcon:!1,fileAttachmentUrl:null,showChatbot:"yes"===(null===u||void 0===u?void 0:u.visibilityShowChatbot),inputValue:"",prevSuggestionsLabel:[],suggestionLabel:!1,showRestartGuideButton:!1,showConfirmationDialog:!1,closeButton:e.closeButton},d.timer=null,d.messageQueue=[],d.reloadTimeout=null,d.restartGuideFunc=null,d.chatMessageAreaRef=Object(s.createRef)(),d.menuDrawerRef=Object(s.createRef)(),d}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this;setInterval(this.processQueueMessages,100),window.addEventListener("__internal.dc.show.bot",(),window.addEventListener("__internal.dc.bot.customevent",(function(e){e&&e.detail&&"show"===e.detail.name&&t.state.mbus&&t.state.mbus.sendMesg({sender:"chasitor",type:"sys_client",adata:{type:"action_user_custom_event",text:"user_events",event:e.detail.data}})})),window.addEventListener("online",(function(){e.setState({isStatusOnline:!0})})),window.addEventListener("offline",(function(){e.setState({isStatusOnline:!1})}))}},{key:"componentDidUpdate",value:function(e,t,n){var a,i,o,r,s,l,c=this.props,d=c.isVisible,u=c.theme,p=this;!this.state.visible&&this.props.autoOpen&&this.props.mbus&&setTimeout((function(){return p.chatButtonOnClick()}),400),"no"!==(null===(a=this.props)||void 0===a||null===(i=a.botConfig)||void 0===i||null===(o=i.context)||void 0===o?void 0:o.visibilityShowLauncherPreview)||d||"yes"===(null===(r=this.props)||void 0===r||null===(s=r.botConfig)||void 0===s||null===(l=s.context)||void 0===l?void 0:l.proactiveMessages)||Object(f.r)(m.p,d,u)}},{key:"render",value:function(){var e,t,n,a,i,o,r,c,d,u,p,h,g=this,b=this.state,y=b.visible,w=b.debugPannel,E=b.inputValue,_=b.suggestionLabel,O=b.showRestartGuideButton,C=null===(e=this.props.clientConfigData)||void 0===e?void 0:e.context,S=null===(t=this.props.clientConfigData)||void 0===t?void 0:t.theme,k=this.props.theme,x=null===(n=this.props.clientConfigData)||void 0===n?void 0:n.translations,T=null===(a=this.props.clientConfigData)||void 0===a||null===(i=a.context)||void 0===i?void 0:i.locale,j=v()(x,"".concat(T,".retry"),"Retry"),I=v()(x,"".concat(T,".sureToEndChat"),"Are you sure you want to end this chat?"),A=v()(x,"".concat(T,".cancel"),"Cancel"),D=v()(x,"".concat(T,".endChat"),"End Chat");return["persist","clearOnTabClose"].includes(this.props.clientConfigData.context.persistenceMode)?(!1,this.props.messages.length>0&&!0):!0,l.a.createElement("div",null,this.props.isPersistenceModeSet&&l.a.createElement(Ea,{setMessageBus:this.setMessageBus,handleSubscriptionMessage:this.handleSubscriptionMessage,initializeMbus:this.initializeMbus,onConnectionError:function(){return g.setState({isSocketConnected:!1})},onReconnect:function(){return g.setState({isSocketConnected:!0})},flags:this.props.flags}),this.state.showWidget&&l.a.createElement("div",{className:"widget-container ".concat(k," ").concat(this.getVisibilityClass()," ").concat(this.state.showInitialLoader?"white-background":""),"data-iframe-height":"true"},this.state.showInitialLoader&&l.a.createElement("div",{className:"dc-macro--home__loader"},C&&C.headerLogo&&l.a.createElement("img",{src:C&&C.headerLogo,alt:""}),l.a.createElement(pe.a,{type:"bars",color:S.primaryColor,height:"35px",width:"35px",className:"dc-macro--loader spokes"})),l.a.createElement(l.a.Fragment,null,l.a.createElement(Ua,{minimizeOnClick:this.minimizeOnClick,headerDynaText:this.state.headerDynaText,restoreOnClick:this.restoreOnClick,endChatOnClick:this.sendEndChatAction,fullScreenOnClick:this.fullScreenOnClick,confirmEndChat:this.confirmEndChat,closeButton:this.state.closeButton,restartConversation:this.restartConversation,isSocketConnected:this.state.isSocketConnected&&this.state.isStatusOnline,showRestartGuideButton:O,restartGuide:this.restartGuide}),this.state.showSettings&&l.a.createElement(ja,{audioControls:this.state.audioControls}),l.a.createElement(ca,{ref:this.chatMessageAreaRef,proactiveDelay:this.state.proactiveMessages,selectDebugMessageCallback:this.selectDebugMessageCallback,toggleRestartButton:this.toggleRestartButton,storeGuideFunc:this.storeGuideFunc},this.state.showReload&&l.a.createElement("div",{className:"mini-banner-container"},l.a.createElement("span",null,j),l.a.createElement("i",{style:{cursor:"pointer"},className:"icon-feather-rotate-ccw",onClick:this.reloadBot}))),this.state.showConfirmationDialog&&l.a.createElement(he,{hideDrawer:function(){return g.continueChat(!1)},hideClose:!0,hideFooter:!0,ref:this.menuDrawerRef},l.a.createElement("div",{className:"conversational-csat-container"},l.a.createElement("h1",{className:"endchat-heaader csat-title"},D),l.a.createElement("p",{className:"endchat-description"},I),l.a.createElement("div",{className:"csat-submit-footer"},l.a.createElement(Ue.a,{className:"primary-button endchat-end-button",onClick:this.endChatonClick},D),l.a.createElement(Ue.a,{className:"cancel-button",variant:"outline-secondary",onClick:,A)))),l.a.createElement(s.Suspense,{fallback:l.a.createElement(l.a.Fragment,null)},l.a.createElement(Wa,{payload:this.state.prediction,show:this.props.showPredictions,showPredictions:this.showPredictions,hidePredictions:this.hidePredictions,clearInput:this.clearInput,inputValue:E,suggestionLabel:_,prevSuggestionsLabel:this.prevSuggestionsLabel})),l.a.createElement(Sa,{showDC:"yes"===(null===(o=this.state)||void 0===o?void 0:o.showFooter)&&(null===(r=this.state)||void 0===r?void 0:r.showEH),showPrivacyPolicy:(null===C||void 0===C?void 0:C.privacyPolicyUrl)&&"yes"===(null===C||void 0===C?void 0:C.showPrivacyPolicyInFooter)&&(null===(c=this.state)||void 0===c?void 0:c.showEH)}),this.props.chatEnded?l.a.createElement(Ga,{startNewConversation:this.startNewConversation}):l.a.createElement(l.a.Fragment,null,!this.props.hideInput&&l.a.createElement(fa,{ref:"input",mbus:this.state.mbus,onSubmit:this.handleOnSubmit,show:this.state.inputVisible,onInputKeyUp:this.onInputKeyUp,clientConfigData:this.props.clientConfigData,showFileAttachmentIcon:this.state.showFileAttachmentIcon,fileAttachmentUrl:this.state.fileAttachmentUrl,showSettings:null===(d=this.props)||void 0===d?void 0:d.showSettings}),l.a.createElement(va,{mbus:this.state.mbus,show:this.state.showEH,ehDynaText:this.state.ehDynaText,ehEvent:this.state.ehEvent,closeEH:this.closeEH,clientConfigData:this.props.clientConfigData})),l.a.createElement(Sa,{showDC:"yes"===(null===(u=this.state)||void 0===u?void 0:u.showFooter)&&!(null===(p=this.state)||void 0===p?void 0:p.showEH),showPrivacyPolicy:(null===C||void 0===C?void 0:C.privacyPolicyUrl)&&"yes"===(null===C||void 0===C?void 0:C.showPrivacyPolicyInFooter)&&!(null===(h=this.state)||void 0===h?void 0:h.showEH)}))),this.state.showWidget&&this.state.mbus&&l.a.createElement(l.a.Fragment,null,l.a.createElement(s.Suspense,{fallback:l.a.createElement(l.a.Fragment,null)},this.state.proactiveMessages&&!["persist","clearOnTabClose"].includes(this.props.clientConfigData.context.persistenceMode)&&"yes"!==this.props.clientConfigData.context.defaultOpen&&this.state.showLauncher&&l.a.createElement(Ka,{restoreChatBot:this.chatButtonOnClick,hideProactiveMessage:function(e){g.setState({proactiveMessages:e}),Object(f.r)(m.O,y,k)}}),this.state.showWidget&&this.state.visible&&C.debugToken&&this.state.messages.length>0&&w&&l.a.createElement(Va,{messages:this.state.messages,selectedMessage:this.state.messageId,closeDebugPannel:this.closeDebugPannel})),!this.state.visible&&this.state.showLauncher&&this.state.showChatbot&&!this.props.autoOpen&&l.a.createElement(N,{addClass:this.getVisibilityClass(),onClick:this.chatButtonOnClick,unreadMesssages:this.props.newMessagesCount}),C&&"yes"===C.visibilityShowLauncherPreview&&this.state.showLauncher&&this.state.showChatbot&&!this.props.autoOpen&&l.a.createElement(Oa,{closePreview:this.closePreview,onClick:this.chatButtonOnClick,flags:this.props.flags})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n={};return e.showSettings!==t.showSettings?n=Object(r.a)(Object(r.a)({},n),{},{showSettings:e.showSettings}):e.isAudioEnabled!==t.isAudioEnabled?n=Object(r.a)(Object(r.a)({},n),{},{isAudioEnabled:e.isAudioEnabled}):e.isVisible!==t.visible?n=Object(r.a)(Object(r.a)({},n),{},{visible:e.isVisible}):e.messages.length!==t.messages?n=Object(r.a)(Object(r.a)({},n),{},{messages:e.messages}):e.newMessagesCount!==t.newMessages?n=Object(r.a)(Object(r.a)({},n),{},{newMessages:e.newMessagesCount}):e.theme!==t.theme&&(n=Object(r.a)(Object(r.a)({},n),{},{theme:e.theme})),Object(r.a)(Object(r.a)({},t),n)}}]),n}(s.PureComponent);Ya.displayName="App";var Qa={expandOrMinimise:F.b,updateMbus:Ha.b,updateConfig:za.c,addNewMessage:qa.a,updateMessages:qa.c,updateAppState:F.p,setShowLauncherPreview:F.i,setTheme:F.n,setIsVisible:F.g,setNewMessagesCount:F.h,setShowWidget:F.m,setShowPredictions:F.j,addConfig:za.a,setShowTyping:F.l,toggleHideInput:F.o,setAutoOpen:F.c},Ja=Object(y.b)((function(e){var t=e.appState,n=t.showSettings,a=t.isAudioEnabled,i=t.chatEnded,o=t.showLauncherPreview,r=t.isVisible,s=t.newMessagesCount,l=t.theme,c=t.showPredictions,d=t.isPersistenceModeSet,u=t.showTyping,p=t.hideInput,m=t.autoOpen,h=t.closeButton,f=e.botConfig;return{mbus:e.mbus,messages:e.messages,clientConfigData:f,showSettings:n,isAudioEnabled:a,chatEnded:i,showLauncherPreview:o,isVisible:r,newMessagesCount:s,theme:l,showPredictions:c,isPersistenceModeSet:d,showTyping:u,hideInput:p,autoOpen:m,closeButton:h}}),Qa)(Ya),Xa=function(e){Object(S.a)(n,e);var t=Object(k.a)(n);function n(e){var a,i,o;return Object(_.a)(this,n),(o=t.call(this,e)).reloadWidget=function(){Object(F.m)(!1),setTimeout((,100)},o.bindEvents=function(){var e=Object(C.a)(o);window.iFrameResizer={onReady:function(){var t,n,a,i,o,r,s,l=Ee.b("persistenceMode")||(null===(t=e.props.botConfig)||void 0===t||null===(n=t.context)||void 0===n?void 0:n.persistenceMode)||"clearOnReload";"yes"===(null===(a=window)||void 0===a||null===(i=a.ConverseAppsBot)||void 0===i||null===(o=i.context)||void 0===o?void 0:o.proactiveMessages)&&Object(f.r)(m.cb),(null===(r=window.ConverseAppsBot)||void 0===r||null===(s=r.context)||void 0===s?void 0:s.hostedPageEvents)&&window.parentIFrame.sendMessage({task:"CUSTOM_EVENTS",type:"PAGE",action:"ENABLE",context:window.ConverseAppsBot.context.hostedPageEvents}),"clearOnReload"===l&&e.clearLocalStorage(),window.parentIFrame.sendMessage({task:"SESSION_INIT"}),window.parentIFrame.sendMessage({task:"BOT_POSITION"}),window.parentIFrame.sendMessage({task:"BOT_AUTO_OPEN"}),window.parentIFrame.sendMessage({task:"STORAGE",type:"GETALL",prefix:"__dc"})},onMessage:function(t){switch(e.onMessageReceived(t,e),t.task){case"THEME_UPDATE":delete t.task,Object(f.g)(t.theme);break;case"BOT_POSITION":e.props.setBotPosition(t.botPosition||"right");break;case"BOT_STATE":e.props.setAutoOpen(t.data.botAutoOpen);break;case"SESSION_INFO":window.ConverseAppsBotSession=t,delete window.ConverseAppsBotSession.task,e.props.setShowWidget(!0),e.props.setIsMobile(t.browser_isMobile);var n=t.browser_isMobile;window.ConverseAppsBot.isMobile=n;break;case"SHOW_CHATBOT":window.dispatchEvent(new CustomEvent("__internal.dc.show.bot"));break;case"DC_CUSTOM_EVENT":window.dispatchEvent(new CustomEvent("__internal.dc.bot.customevent",{detail:t.data,source:t.source}));break;case"RESTART_CONVERSATION":e.widgetRef.current&&e.widgetRef.current.restartConversation()}}};var t=document.createElement("script");t.type="text/javascript",t.src="https://cdnjs.cloudflare.com/ajax/libs/iframe-resizer/4.2.9/iframeResizer.contentWindow.min.js",document.head.appendChild(t)},o.playAudio=function(e){if(e){var t=new Audio(e);t.load(),t.addEventListener("canplaythrough",(),o.setState({isInitAudioPlayed:!0})}},o.state={clientconfig:"",showWidget:!1,isInitAudioPlayed:!1,showChatbot:"yes"===(null===(a=e.botConfig)||void 0===a||null===(i=a.context)||void 0===i?void 0:i.visibilityShowChatbot)},o.bindEvents(),o.onMessageReceived=o.onMessageReceived.bind(Object(C.a)(o)),o.searchparams=new URLSearchParams(window.location.search),o.widgetRef=Object(s.createRef)(null),o}return Object(O.a)(n,[{key:"componentDidMount",value:function(){var e=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="yes"===v()(this.state.clientconfig,"context.audioBotInit"),n=v()(this.state.clientconfig,"context.audioBotInitTone",null),t&&n&&!this.state.isInitAudioPlayed&&this.playAudio(this.state.clientconfig.context.audioBotInitTone),Object(f.n)()||Object(F.m)(!0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"clearLocalStorage",value:function(){Ee.e(m.x),"reload"!==Ee.b(m.r)&&Ee.e(m.r)}},{key:"sendMessageToParentIframe",value:function(e,t,n){window.parentIFrame&&window.parentIFrame.sendMessage({task:"STORAGE",type:e,key:t,value:n})}},{key:"onMessageReceived",value:function(e,t){if(e&&e.task&&"STORAGE"===e.task){if("GETALL"===e.type){var n=JSON.parse(e.data);for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];Object(f.a)(i)?Ee.g(a,JSON.parse(i)):Ee.g(a,i)}}else if("GET"===e.type)n=JSON.parse(e.data)}else if("PARENT_FIRST_INTERACTION"===e.task){var o="yes"===v()(this.state.clientconfig,"context.audioBotInit"),r=v()(this.state.clientconfig,"context.audioBotInitTone",null);o&&r&&!this.state.isInitAudioPlayed&&this.playAudio(this.state.clientconfig.context.audioBotInitTone)}else"SESSION_STORAGE"===v()(e,"task")?v()(e,"type"):v()(e,"task")===m.W&&this.state.showChatbot&&this.widgetRef.current&&this.widgetRef.current.chatButtonOnClick()}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,this.props.showWidget?l.a.createElement(Ja,Object.assign({ref:this.widgetRef,reloadWidget:this.reloadWidget},this.props)):null)}}]),n}(s.Component),Za={setShowWidget:F.m,setIsMobile:F.f,setBotPosition:F.d,setAutoOpen:F.c},ei=Object(y.b)((function(e){var t=e.appState.showWidget,n=e.botConfig;return{mbus:e.mbus,clientConfigData:n,showWidget:t}}),Za)(Xa),ti=(n(1524),n(453)),ni=function(e){var t=e.botConfig,n=Object(y.c)(),a=Object(b.useFlags)();return Object(s.useEffect)((function(){var e=t.context;Ee.d({type:"localStorage",context:e}),Object(f.g)(t.theme),n(Object(ti.b)(Object(r.a)({},a))),n(Object(za.a)(Object(r.a)({},t))),n(Object(F.p)({showWidget:"0"!==(null===e||void 0===e?void 0:e.visibilityWidgetDisplayStyle),showLauncherPreview:"yes"===(null===e||void 0===e?void 0:e.visibilityShowLauncherPreview),showPredictions:"yes"===(null===e||void 0===e?void 0:e.showPredictions),theme:(null===e||void 0===e?void 0:e.botType)||"extended"})),setTimeout((function(){!function(){var e,t=w.a.getState().botConfig,n=Ee.b("persistenceMode")||(null===t||void 0===t||null===(e=t.context)||void 0===e?void 0:e.persistenceMode)||"clearOnReload",a=Date.now(),i=Number(v()(t,"context.clearPersistenceModeAfter",0)),o=0===i?null:i;if("clearOnReload"===n)Ee.f(),Ee.e(m.x),"reload"!==Ee.b(m.r)&&Ee.e(m.r);else if("clearOnTabClose"===n){var r=Ee.c(m.E),s=Ee.c(m.q),l=Ee.c(m.Y);null==r||null==s||t.context.botName!==s||null==l||Object(f.h)({persistenceSetDate:l,diff:o})?(Ee.h(m.E,t.channelId),Ee.h(m.q,t.context.botName),Ee.h(m.Y,a),Ee.g(m.Y,a),Ee.g(m.E,t.channelId)):(Ee.g(m.E,r),w.a.dispatch(Object(za.c)({channelId:r})))}else{var c=Ee.b(m.E),d=Ee.b(m.Y);null==c||null==d||Object(f.h)({persistenceSetDate:d,diff:o})?(Ee.g(m.E,t.channelId),Ee.g(m.Y,a)):w.a.dispatch(Object(za.c)({channelId:c}))}setTimeout((function(){w.a.dispatch(Object(F.p)({isPersistenceModeSet:!0}))}),200)}()}),200)}),[]),l.a.createElement(ei,{botConfig:Object(r.a)({},t),flags:a})},ai=(n(1525),n(1537),n(1701),n(1703),n(1704),"true"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_LAUNCH_DARKLY_CLIENT_ID:"612d761d0883b126d7e27d98",REACT_APP_CHAT_BOT_V2:"v2"}).REACT_APP_DEV);console.log=function(){};var ii={},oi=window.location.hostname;if(""!==window.location.search.substring(1)&&(ii=new URLSearchParams(window.location.search),ii=Object.fromEntries(ii.entries())),ii.hostname&&(oi=ii.hostname),ai)window.ConverseAppsBot=Object(h.c)(),d.a.render(l.a.createElement(y.a,{store:w.a},l.a.createElement(E.a,{basename:""},l.a.createElement(ni,{botConfig:window.ConverseAppsBot}))),document.getElementById("root"));else{var ri=ii.locale;null==ri&&(ri="en_us"),fetch("".concat(m.b,"/v1/action/widgets/bot?hostname=").concat(oi,"&locale=").concat(ri)).then((function(e){return e.json()})).then((function(e){if(window.ConverseAppsBot=e,window.ConverseAppsBot.context.url=window.location.href,window.ConverseAppsBot.isLocalStorageAllowed=Object(h.a)()||!1,Object.keys(ii).length>0&&(window.ConverseAppsBot.browserParams=Object(r.a)({},ii)),v()(window,"ConverseAppsBot.context.gaTrackingId")&&p.a.initialize(window.ConverseAppsBot.context.gaTrackingId),"payload"in ii&&ii.payload.length>0){var t=decodeURIComponent(escape(window.atob(ii.payload)));t=JSON.parse(t),window.ConverseAppsBot.context=Object.assign(window.ConverseAppsBot.context,t)}"true"===ii.draft&&(window.ConverseAppsBot.context.draft=!0),null!=ii.locale?window.ConverseAppsBot.context.locale=ii.locale:window.ConverseAppsBot.context.locale="en_us",ii.debugToken&&""!==ii.debugToken&&(window.ConverseAppsBot.context.debugToken=ii.debugToken),window.ConverseAppsBot.theme.cssStyles&&""!==window.ConverseAppsBot.theme.cssStyles&&Object(f.b)(window.ConverseAppsBot.theme.cssStyles),window.ConverseAppsBot.context.inlineScript&&""!==window.ConverseAppsBot.context.inlineScript&&Object(f.c)(window.ConverseAppsBot.context.inlineScript),Object(o.a)(i.a.mark((function e(){var t,n,a,o,r,s,c,u,p,m,h,f,g,v;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g=null===(t=window)||void 0===t||null===(n=t.ConverseAppsBot)||void 0===n||null===(a=n.context)||void 0===a?void 0:a.orgId,e.next=3,Object(b.asyncWithLDProvider)({clientSideID:"612d761d0883b126d7e27d98",user:{key:"".concat(g,"-b-").concat(Math.floor(100*Math.random())),custom:{application_id:null===(o=window)||void 0===o||null===(r=o.ConverseAppsBot)||void 0===r||null===(s=r.context)||void 0===s?void 0:s.appId,site_id:g,bot_name:null===(c=window)||void 0===c||null===(u=c.ConverseAppsBot)||void 0===u||null===(p=u.context)||void 0===p?void 0:p.botName,bot_version:null===(m=window)||void 0===m||null===(h=m.ConverseAppsBot)||void 0===h||null===(f=h.context)||void 0===f?void 0:f.draft}},options:{}});case 3:v=e.sent,d.a.render(l.a.createElement(v,null,l.a.createElement(y.a,{store:w.a},l.a.createElement(E.a,{basename:""},l.a.createElement(ni,{botConfig:window.ConverseAppsBot})))),document.getElementById("root"));case 5:case"end":return e.stop()}}),e)})))()})).catch(()}},199:function(e,t,n){"use strict";var a=n(12),i=n(13),o=n(14),r=n(15),s=n(0),l=n.n(s),c=function(e){Object(o.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.youtubeId,t=this.props.height||"100%",n=this.props.width||"100%";return l.a.createElement("div",{className:"youtube__video"},l.a.createElement("iframe",{className:"youtube__player",src:"https://www.youtube.com/embed/".concat(e),frameBorder:"0",title:e,height:t,width:n,allow:"fullscreen"}))}}]),n}(l.a.Component),d=function(e){Object(o.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.vimeoId,t=this.props.height||"100%";this.props.width;return l.a.createElement("div",{className:"vimeo__video"},l.a.createElement("iframe",{className:"vimeo__player",src:"https://player.vimeo.com/video/".concat(e),allow:"autoplay; fullscreen",allowfullscreen:!0,title:e,height:t,width:"100%"}))}}]),n}(l.a.Component),u=/(?:youtu\.be\/|youtube(?:-nocookie)?\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,p=/vimeo\.com\/.+/,m=/\.(mp4|og[gv]|webm|mov|m4v)($|\?)/i,h=f=function(e){return p.test(e)},g=function(e){return m.test(e)},v=function(e){Object(o.a)(n,e);var t=Object(r.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.videolocation,t=this.props.height||"100%";this.props.width;return l.a.createElement("div",{className:"generic__video"},l.a.createElement("div",null,l.a.createElement("video",{width:"257px",height:t,id:"my-video",class:"video-js",controls:!0,preload:"auto","data-setup":"{}"},l.a.createElement("source",{src:e,type:"video/mp4"}))))}}]),n}(l.a.Component),b=function(e){Object(o.a)(n,e);var t=Object(r.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).state={source:"",videoId:"",showPlayer:!1},i}return Object(i.a)(n,[{key:"componentDidMount",value:function(){try{var e=new URL(this.props.url);h(e)?this.renderYoutubePlayer(e):f(e)?this.renderVimeoPlayer(e):g(e)&&this.renderGenericPlayer(e)}catch(t){this.setState({showPlayer:!1})}}},{key:"renderVimeoPlayer",value:function(e){var t=String(e).split("?")[0].split("/"),n=t[t.length-1];this.setVideoRouterState("VIMEO",n,!0)}},{key:"renderYoutubePlayer",value:function(e){var t=new URLSearchParams(e.searchParams);t.has("v")&&this.setVideoRouterState("YOUTUBE",t.get("v"),!0)}},{key:"renderGenericPlayer",value:,{key:"setVideoRouterState",value:,{key:"render",value:function(){var e=this.state.videoId,t=this.state.source,n=this.props,a=n.height,i=n.width;return l.a.createElement(l.a.Fragment,null,"YOUTUBE"===t&&l.a.createElement(c,{youtubeId:e,height:a,width:i}),"VIMEO"===t&&l.a.createElement(d,{vimeoId:e,height:a,width:i}),"GENERIC"===t&&l.a.createElement(v,{videolocation:e,height:a}))}}]),n}(l.a.Component);t.a=b},206:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l}));var a=n(22),i=n(167),o=Object(i.b)({name:"botConfig",initialState:{},reducers:{addConfig:updateConfig:}),r=o.actions,s=r.addConfig,l=r.updateConfig;t.b=o.reducer},24:function(e,t,n){"use strict";(function(e){n.d(t,"d",(function(){return l})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return p})),n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return h})),n.d(t,"e",(function(){return f})),n.d(t,"h",(function(){return g})),n.d(t,"c",(function(){return v}));var a,i=n(12),o=n(13),r=n(143),s=n(6);ar c=d=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(i.a)(this,t);var a=n.context,o=a.orgId,s=a.botName;this.memoryStorage={},this.prefix="".concat(o,"__").concat(s),this.type=n.type;try{switch(n.type){case"sessionStorage":Object(r.b)()&&(this.browserStorage=e.sessionStorage);break;case"localStorage":Object(r.a)()&&(this.browserStorage=e.localStorage);break;default:Object(r.a)()&&(this.browserStorage=e.localStorage)}}catch(l){}}return Object(o.a)(t,[{key:"reset",value:function(){this.removeItemsWithPrefix();var e,t,n,a=this.getItem(s.B);if(this.memoryStorage={},Object(r.a)()&&localStorage.clear(),Object(r.b)()&&sessionStorage.clear(),null!=a)try{this.browserStorage.setItem(s.B,a)}catch(i){}e="CLEAR",window.parentIFrame&&window.parentIFrame.sendMessage({task:"STORAGE",type:e,key:t,value:n}),c("CLEAR_ALL")}},{key:"setItem",value:function(e,t){try{this.browserStorage?(this.browserStorage.setItem("".concat(this.prefix,".").concat(e),t),this.memoryStorage["".concat(this.prefix,".").concat(e)]=t):this.memoryStorage["".concat(this.prefix,".").concat(e)]=t}catch(n){this.memoryStorage["".concat(this.prefix,".").concat(e)]=t}}},{key:"getItem",value:,{key:"removeItem",value:function(e){delete this.memoryStorage["".concat(this.prefix,".").concat(e)];try{this.browserStorage&&this.browserStorage.removeItem("".concat(this.prefix,".").concat(e))}catch(t){}}},{key:"getItemWithPrefix",value:,{key:"removeItemsWithPrefix",value:function(){var e=this.browserStorage,t=this.prefix;void 0!==e&&Object.keys(e).filter((function(e){return e.startsWith(t)})).forEach((function(t){return e.removeItem(t)}))}},{key:"removeItems",value:function(e){var t=this;e.forEach(()}}]),t}();nction m(e){return a||l(),a.getItem(e)}function h(e){return a||l(),a.getItemWithPrefix(e)}unction g(t,n){Object(r.b)()&&(e.sessionStorage.setItem("".concat(a.prefix,".").concat(t),n),c("SET","".concat(a.prefix,".").concat(t),n),a.setItem("".concat(this.prefix,".").concat(t),n))}function v(t){return a?Object(r.b)()?e.sessionStorage.getItem("".concat(a.prefix,".").concat(t)):void c("GET","".concat(this.prefix,".").concat(t)):(l({type:"sessionStorage"}),this.getItem("".concat(a.prefix,".").concat(t)))}}).call(this,n(92))},366:function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return s}));var a=n(167),i=Object(a.b)({name:"messages",initialState:[],reducers:{updateMessages:function(e,t){return t.payload},addNewMessage:}),o=i.actions,r=o.updateMessages,s=o.addNewMessage;t.b=i.reducer},453:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var a=n(167),i=Object(a.b)({name:"launchDarkly",initialState:{},reducers:{updateLaunchDarklyFlags:function(e,t){return t.payload}}}),o=i.actions.updateLaunchDarklyFlags;t.a=i.reducer},454:function(e,t,n){"use strict";n.d(t,"b",(function(){return o}));var a=n(167),i=Object(a.b)({name:"mbus",initialState:null,reducers:{updateMbus:function(e,t){return t.payload}}}),o=i.actions.updateMbus;t.a=i.reducer},46:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"k",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"m",(function(){return d})),n.d(t,"p",(function(){return u})),n.d(t,"i",(function(){return p})),n.d(t,"n",(function(){return m})),n.d(t,"g",(function(){return h})),n.d(t,"h",(function(){return f})),n.d(t,"j",(function(){return g})),n.d(t,"d",(function(){return v})),n.d(t,"l",(function(){return b})),n.d(t,"f",(function(){return y})),n.d(t,"o",(function(){return w})),n.d(t,"c",(function(){return E}));var a=n(22),i=n(167),o=Object(i.b)({name:"appState",initialState:{isVisible:!1,showSettings:!1,isAudioEnabled:!0,showWidget:!1,chatEnded:!1,showLauncherPreview:!1,showPredictions:!1,theme:"extended",newMessagesCount:0,minimizeButton:"show",closeButton:"hide",isPersistenceModeSet:!1,botPosition:"right",showTyping:!1,hideInput:!1,isMobile:!1,autoOpen:!1,restartButton:"hide"},reducers:{expandOrMinimise:function(e,t){e.isVisible=t.payload},setShowSettings:function(e,t){e.showSettings=t.payload},setIsAudioEnabled:function(e,t){e.isAudioEnabled=t.payload},setShowWidget:function(e,t){e.showWidget=t.payload},setShowLauncherPreview:function(e,t){e.showLauncherPreview=t.payload},setTheme:function(e,t){e.theme=t.payload},setIsVisible:function(e,t){e.isVisible=t.payload},setNewMessagesCount:function(e,t){e.newMessagesCount=t.payload},setShowPredictions:function(e,t){e.showPredictions=t.payload},updateAppState:function(e,t){return Object(a.a)(Object(a.a)({},e),t.payload)},setBotPosition:function(e,t){e.botPosition=t.payload},setShowTyping:function(e,t){e.showTyping=t.payload},setIsMobile:function(e,t){e.isMobile=t.payload},toggleHideInput:function(e,t){e.hideInput=t.payload},setAutoOpen:,extraReducers:{}}),r=o.actions,s=r.expandOrMinimise,l=r.setShowSettings,c=r.setIsAudioEnabled,d=r.setShowWidget,u=r.updateAppState,p=r.setShowLauncherPreview,m=r.setTheme,h=r.setIsVisible,f=r.setNewMessagesCount,g=r.setShowPredictions,v=r.setBotPosition,b=r.setShowTyping,y=r.setIsMobile,w=r.toggleHideInput,E=r.setAutoOpen;t.a=o.reducer},6:function(e,t,n){"use strict";n.d(t,"kb",(function(){return a})),n.d(t,"jb",(function(){return i})),n.d(t,"eb",(function(){return o})),n.d(t,"ib",(function(){return r})),n.d(t,"pb",(function(){return s})),n.d(t,"hb",(function(){return l})),n.d(t,"gb",(function(){return c})),n.d(t,"fb",(function(){return d})),n.d(t,"i",(function(){return u})),n.d(t,"U",(function(){return p})),n.d(t,"X",(function(){return m})),n.d(t,"o",(function(){return h})),n.d(t,"V",(function(){return f})),n.d(t,"g",(function(){return g})),n.d(t,"a",(function(){return v})),n.d(t,"nb",(function(){return b})),n.d(t,"ob",(function(){return y})),n.d(t,"mb",(function(){return w})),n.d(t,"lb",(function(){return E})),n.d(t,"I",(function(){return _})),n.d(t,"K",(function(){return O})),n.d(t,"J",(function(){return C})),n.d(t,"M",(function(){return S})),n.d(t,"L",(function(){return k})),n.d(t,"n",(function(){return x})),n.d(t,"ab",(function(){return T})),n.d(t,"bb",(function(){return j})),n.d(t,"N",(function(){return N})),n.d(t,"T",(function(){return I})),n.d(t,"p",(function(){return A})),n.d(t,"j",(function(){return D})),n.d(t,"k",(function(){return M})),n.d(t,"cb",(function(){return L})),n.d(t,"O",(function(){return $})),n.d(t,"d",(function(){return P})),n.d(t,"W",(function(){return B})),n.d(t,"l",(function(){return R})),n.d(t,"H",(function(){return F})),n.d(t,"G",(function(){return U})),n.d(t,"Z",(function(){return G})),n.d(t,"m",(function(){return z})),n.d(t,"P",(function(){return H})),n.d(t,"c",(function(){return q})),n.d(t,"h",(function(){return V})),n.d(t,"S",(function(){return W})),n.d(t,"f",(function(){return K})),n.d(t,"R",(function(){return Y})),n.d(t,"Q",(function(){return Q})),n.d(t,"e",(function(){return J})),n.d(t,"db",(function(){return X})),n.d(t,"y",(function(){return Z})),n.d(t,"w",(function(){return ee})),n.d(t,"s",(function(){return te})),n.d(t,"E",(function(){return ne})),n.d(t,"x",(function(){return ae})),n.d(t,"z",(function(){return ie})),n.d(t,"r",(function(){return oe})),n.d(t,"D",(function(){return re})),n.d(t,"B",(function(){return se})),n.d(t,"C",(function(){return le})),n.d(t,"Y",(function(){return ce})),n.d(t,"F",(function(){return de})),n.d(t,"u",(function(){return ue})),n.d(t,"t",(function(){return pe})),n.d(t,"A",(function(){return me})),n.d(t,"v",(function(){return he})),n.d(t,"q",(function(){return fe})),n.d(t,"b",(function(){return ge}));var a="widget_minimize",i="widget_maximize",o="widget_clear",r="widget_hide",s="widget_show",l="widget_escapehatch_show",c="widget_escapehatch_hide",d="widget_control_state",u="chasitor_sneakpeek",p="open_article",m="open_article",h="close_full_article",f="open_article_in_externaltab",g="change_language",v="agent_handover",b="widget_predictions_hide",y="widget_predictions_show",w="widget_page_events_enable",E="widget_page_events_disable",_="guide_end",O="guide_open",C="guide_inprogress",S="help_article_thumbs_up",k="help_article_thumbs_down",x="CLOSE_BOT",T="SHOW_CAMPAIGN",j="SHOW_CHAT_AREA",N="HIDE_CHAT_AREA",I="MINIMIZE_CHAT_AREA",A="CLOSE_PREVIEW",D="CLICK_END_CHAT",M="CLICK_OPEN",L="SHOW_PROACTIVE_MESSAGE",$="HIDE_PROACTIVE_MESSAGE",P="BOT_FULL_SCREEN",B="OPEN_BOT_ON_EXTERNAL_CLICK",R="CLICK_RESTART_CONVERSATION",F="BOT_AUTO_OPEN",U="Form",G="Question",z="ClientEvent",H="Knowledge",q="bot",V="chasitor",W="ListOptions",K="Carousel",Y="KnowledgeAnswer",Q="KnowledgeV2",J="CalendlyApp",X="UploadAttachment",Z="__dcwgid",ee="__dcts",te="__dcrouteKey",ne="__dcwwsch",ae="__dcwbuttonstate",ie="__dcwlogthreshold",oe="__dcbotstate",re="__dcwstate",se="__dcSockServer",le="__dcSockTransports",ce="__persistenceModeSetDate",de="__dcwwst_",ue="__dcSockServer",pe="__dcsegmentName",me="__dcwnodeid",he="__dcstate",fe="__dcbotname",ge="https://api.converseapps.com"},8:function(e,t,n){"use strict";n.d(t,"g",(function(){return v})),n.d(t,"e",(function(){return b})),n.d(t,"r",(function(){return y})),n.d(t,"f",(function(){return w})),n.d(t,"t",(function(){return E})),n.d(t,"s",(function(){return _})),n.d(t,"n",(function(){return O})),n.d(t,"i",(function(){return C})),n.d(t,"a",(function(){return S})),n.d(t,"c",(function(){return k})),n.d(t,"d",(function(){return x})),n.d(t,"b",(function(){return T})),n.d(t,"h",(function(){return j})),n.d(t,"q",(function(){return N})),n.d(t,"j",(function(){return I})),n.d(t,"m",(function(){return A})),n.d(t,"p",(function(){return D})),n.d(t,"o",(function(){return $})),n.d(t,"l",(function(){return B})),n.d(t,"u",(function(){return R})),n.d(t,"k",(function(){return F}));var a=n(36),i=n.n(a),o=n(53),r=n(22),s=n(452),l=n.n(s),c=n(127),d=n.n(c),u=n(135),p=n(2),m=n.n(p),h=n(6),f=n(24),g=n(46);function v(e){e&&Object.keys(e).forEach((function(t){var n="--"+t,a=e[t];document.body.style.setProperty(n,a)}))}var b=function(e){e.getAttribute("target")&&e.getAttribute("rel")||(e.setAttribute("target","_blank"),e.setAttribute("rel","noopener noreferrer"))};function y(e,t,n){window.parentIFrame&&window.parentIFrame.sendMessage({task:e,visible:t,theme:n})}function w(e,t,n){if(0!==e.length){var a=e;"?"===a.charAt(a.length-1)&&(a=a.slice(0,a.length-1));var i=new URL(a),o=i.search;return o=(o+=0===o.length?"?":"&")+t+"="+n,i.origin+i.pathname+o}}function E(e,t){l.a.event({category:"Deepconverse-Bot ".concat(window.ConverseAppsBot.context.headerText),action:e,label:t||""})}tion k(e){var t=document.createElement("script");t.innerHTML=e,t.onload=function(){},document.body.appendChild(t)}function x(e){var t=e.src,n=e.scriptId,a=e.callback,i=document.getElementById(n);if(!i){var o=document.createElement("script");o.src=t,document.body.appendChild(o),o.id=n,o.onload=function(){a&&a()}}i&&a&&a()}function T(e){var t=document.getElementsByTagName("body")[0].lastChild,n=document.createElement("style");n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e)),t.parentNode.insertBefore(n,t.nextSibling)}var j=function(e){var t=e.diff,n=e.persistenceSetDate;if(!t)return!1;var a=n||Date.now();return d()().diff(d()(Number(a)),"hours")>=t},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sys_client",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"chasitor",a=u.a.getState(),i=a.mbus;i&&i.sendMesg(Object(r.a)(Object(r.a)({sender:n},t?{type:t}:{}),e?{adata:e}:{}))},I=function(){u.a.getState().botConfig;f.g(h.D,JSON.stringify({})),f.e(h.E),f.e(h.w),f.e(h.r),u.a.dispatch(Object(g.p)({minimizeButton:"show",closeButton:"hide"}))},A=function(){var e=u.a.getState().appState.theme;E("Close Bot");u.a.dispatch(Object(g.p)({showWidget:!1,isVisible:!1})),y(h.n,!1,e),I(),N({type:h.n.toLowerCase(),text:""})},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,t=u.a.getState(),n=t.botConfig,a=document.querySelector("#end-message"),i=navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")<=-1,o=null===n||void 0===n?void 0:n.context;"yes"===o.autoScroll&&setTimeout((function(){i?window.seamless.scrollIntoView(a,{behavior:"smooth",inline:"end",block:"end"}):a.scrollIntoView({behavior:"smooth",inline:"end",block:"end"})}),e)};function M(e,t){return 0==e?0:Math.exp(e)*t}nction P(){return(P=Object(o.a)(i.a.mark((function e(t,n,a,o){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,n);case 3:return r=e.sent,e.abrupt("return",r);case 7:if(e.prev=7,e.t0=e.catch(0),a!==o){e.next=11;break}return e.abrupt("return",Promise.reject(e.t0));case 11:return e.next=13,L(M(a+1,50));case 13:return e.abrupt("return",$(t,n,a+1,o));case 14:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function B(e,t){var n=new URLSearchParams(e.search);if(n&&n.has(t))return n.get(t)}function R(e){var t=window.ConverseAppsMacro,n=t.locale.split("_")[0]+"."+e,a=m()(t.translations,n);return null!=a?a:(n=t.locale.toLowerCase()+"."+e,null!=(a=m()(t.translations,n))?a:(n="en."+e,m()(t.translations,n)))}function F(){var e=document.querySelectorAll(".bot-guide-v2");(null===e||void 0===e?void 0:e.length)>0&&e.forEach((function(e){var t;(null===e||void 0===e||null===(t=e.parentNode)||void 0===t?void 0:t.removeChild)&&e.parentNode.removeChild(e)}))}},828:function(e,t,n){e.exports=n.p+"static/media/sad-emoji.5a0dd825.svg"},829:function(e,t,n){e.exports=n.p+"static/media/poor-emoji.4ae57a58.svg"},830:function(e,t,n){e.exports=n.p+"static/media/neutral-emoji.1411ccec.svg"},831:function(e,t,n){e.exports=n.p+"static/media/happy-emoji.86a778b2.svg"},832:function(e,t,n){e.exports=n.p+"static/media/excellent-emoji.a33cde9f.svg"},836:850:993:,[[850,1,2]]]);