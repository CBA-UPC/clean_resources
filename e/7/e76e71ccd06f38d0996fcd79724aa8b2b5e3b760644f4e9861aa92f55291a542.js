/*!
 * jQuery JavaScript Library v1.10.2
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03T13:48Z
 */
function empLoader(e){"undefined"==typeof empLogger&&(empLogger=new Cobalt.Console({from:"Public Page",loggers:[new Cobalt.Logger.EMPLogger]})),"undefined"==typeof empInstance&&(empInstance=new EMPEngine({lithium:Li,cobaltInstance:empLogger})),empInstance._engine(e)}!function(g,C){on s(){return!0}function u(){return!1}l,c=this,u={},d=t.style,h=t.nodeType&&S(t),p=ke._data(t,"fxshow");for(n in i.queue||(null==(o=ke._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,l=o.empty.fire,o.empty.fire=,o.unqueued++,c.always(),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===ke.css(t,"display")&&"none"===ke.css(t,"float")&&(ke.support.inlineBlockNeedsLayout&&"inline"!==A(t.nodeName)?d.zoom=1:d.display="inline-block")),i.overflow&&(d.overflow="hidden",ke.support.shrinkWrapBlocks||c.always(),e)if(s=e[n],Jt.exec(s)){if(delete e[n],r=r||"toggle"===s,s===(h?"hide":"show"))continue;u[n]=p&&p[n]||ke.style(t,n)}if(!ke.isEmptyObject(u))for(n in p?"hidden"in p&&(h=p.hidden):p=ke._data(t,"fxshow",{}),r&&(p.hidden=!h),h?ke(t).show():c.done(,c.done(,u)a=B(h?p[n]:0,n,c),n in p||(p[n]=a.start,h&&(a.end=a.start,a.start="width"===n||"height"===n?1:0))} W,q,Y=typeof C,X=g.location,Q=g.document,K=Q.documentElement,J=g.jQuery,Z=g.$,ee={},te=[],ie="1.10.2",ne=te.concat,se=te.push,re=te.slice,ae=te.indexOf,oe=ee.toString,le=ee.hasOwnProperty,ce=ie.trim,ke=ue=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,de=/\S+/g,he=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,pe=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,fe=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ge=/^[\],:{}\s]*$/,me=/(?:^|:|,)(?:\s*\[)+/g,ve=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,_e=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,ye=/^-ms-/,be=/-([\da-z])/gi,we=function(e,t){return t.toUpperCase()},Se=Ce=ke.fn=ke.prototype={jquery:ie,constructor:ke,init:selector:"",length:0,toArray:function(){return re.call(this)},get:pushStack:each:ready:slice:first:function(){return this.eq(0)},last:eq:map:end:push:se,sort:[].sort,splice:[].splice},ke.fn.init.prototype=ke.fn,ke.extend=ke.fn.extend=function(e,t){var i,n,s,r,a,o,l=e||{},c=1,u=arguments.length,d=!1;for("boolean"==typeof l&&(d=l,l=t||{},c=2),"object"==typeof l||ke.isFunction(l)||(l={}),u===c&&(l=this,--c);c<u;c++)if(null!=(a=arguments[c]))for(r in a)i=l[r],l!==(s=a[r])&&(d&&s&&(ke.isPlainObject(s)||(n=ke.isArray(s)))?(n?(n=!1,o=i&&ke.isArray(i)?i:[]):o=i&&ke.isPlainObject(i)?i:{},l[r]=ke.extend(d,o,s)):s!==C&&(l[r]=s));return l},ke.extend({expando:"jQuery"+(ie+Math.random()).replace(/\D/g,""),noConflict:isReady:!1,readyWait:1,holdReady:ready:isFunction:function(e){return"function"===ke.type(e)},isArray:Array.isArray||isWindow:isNumeric:type:isPlainObject:isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:parseJSON:parseXML:noop:function(){},globalEval:camelCase:nodeName:each:trim:ce&&!ce.call("\ufeff\xa0")?makeArray:inArray:merge:grep:map:guid:1,proxy:access:now:function(){return(new Date).getTime()},swap:),ke.ready.promise=ke.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()}),q=ke(Q),
/*!
 * Sizzle CSS Selector Engine v1.10.2
 * http://sizzlejs.com/
 *
 * Copyright 2013 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2013-07-03
 */
function(i,s){u(){}n f(m,v){var _=0,y=0<v.length,b=0<m.length,e=function(e,t,i,n,s){var r,a,o,l=[],c=0,u="0",d=e&&[],h=null!=s,p=P,f=e||b&&k.find.TAG("*",s&&t.parentNode||t),g=F+=null==p?1:Math.random()||.1;for(h&&(P=t!==D&&t,T=_);null!=(r=f[u]);u++){if(b&&r){for(a=0;o=m[a++];)if(o(r,t,i)){n.push(r);break}h&&(F=g,T=++_)}y&&((r=!o&&r)&&c--,e&&d.push(r))}if(c+=u,y&&u!==c){for(a=0;o=v[a++];)o(d,l,t,i);if(e){if(0<c)for(;u--;)d[u]||l[u]||(l[u]=J.call(n));l=S(l)}ee.apply(n,l),h&&!e&&0<l.length&&1<c+v.length&&w.uniqueSort(n)}return h&&(F=g,P=p),d};return y?l(e):e}unction v(e,t,i,n){var s,r,a,o,l,c=g(e);if(!n&&1===c.length){if(2<(r=c[0]=c[0].slice(0)).length&&"ID"===(a=r[0]).type&&C.getById&&9===t.nodeType&&N&&k.relative[r[1].type]){if(!(t=(k.find.ID(a.matches[0].replace(Se,Ce),t)||[])[0]))return i;e=e.slice(r.shift().value.length)}for(s=me.needsContext.test(e)?0:r.length;s--&&(a=r[s],!k.relative[o=a.type]);)if((l=k.find[o])&&(n=l(a.matches[0].replace(Se,Ce),he.test(r[0].type)&&t.parentNode||t))){if(r.splice(s,1),!(e=n.length&&m(r)))return ee.apply(i,n),i;break}}return A(e,c)(n,t,!N,i,he.test(e)),i}var b,C,T,k,E,I,A,P,x,M,D,L,N,O,R,U,H,B="sizzle"+-new Date,$=i.document,F=0,j=0,z=e(),G=e(),V=e(),W=!1,q=Y=typeof s,X=1<<31,Q={}.hasOwnProperty,K=[],J=K.pop,Z=K.push,ee=K.push,te=K.slice,ie=K.indexOf||ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",se="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ae=re.replace("w","w#"),oe="\\["+se+"*("+re+")"+se+"*(?:([*^$|!~]?=)"+se+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ae+")|)|)"+se+"*\\]",le=":("+re+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+oe.replace(3,8)+")*)|.*)\\)|)",ce=new RegExp("^"+se+"+|((?:^|[^\\\\])(?:\\\\.)*)"+se+"+$","g"),ue=new RegExp("^"+se+"*,"+se+"*"),de=new RegExp("^"+se+"*([>+~]|"+se+")"+se+"*"),he=new RegExp(se+"*[+~]"),pe=new RegExp("="+se+"*([^\\]'\"]*)"+se+"*\\]","g"),fe=new RegExp(le),ge=new RegExp("^"+ae+"$"),me={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+le),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+se+"*(even|odd|(([+-]|)(\\d*)n|)"+se+"*(?:([+-]|)"+se+"*(\\d+)|))"+se+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+se+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+se+"*((?:-\\d)?\\d*)"+se+"*\\)|)(?=[^-]|$)","i")},ve=/^[^{]+\{\s*\[native \w/,_e=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/^(?:input|select|textarea|button)$/i,be=/^h\d$/i,we=/'|\\/g,Se=new RegExp("\\\\([\\da-f]{1,6}"+se+"?|("+se+")|.)","ig"),Ce=try{ee.apply(K=te.call($.childNodes),$.childNodes),K[$.childNodes.length].nodeType}catch(Te){ee={apply:K.length?}for(b in I=w.isXML=C=w.support={},M=w.setDocument=function(e){var l=e?e.ownerDocument||e:$,t=l.defaultView;return l!==D&&9===l.nodeType&&l.documentElement?(L=(D=l).documentElement,N=!I(l),t&&t.attachEvent&&t!==t.top&&t.attachEvent("onbeforeunload",function(){M()}),C.attributes=n(,C.getElementsByTagName=n(,C.getElementsByClassName=n(,C.getById=n(,C.getById?(k.find.ID=k.filter.ID=:(delete k.find.ID,k.filter.ID=,k.find.TAG=C.getElementsByTagName?k.find.CLASS=C.getElementsByClassName&&R=[],O=[],(C.qsa=ve.test(l.querySelectorAll))&&(n(,n(),(C.matchesSelector=ve.test(U=L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&n(,O=O.length&&new RegExp(O.join("|")),R=R.length&&new RegExp(R.join("|")),H=ve.test(L.contains)||L.compareDocumentPosition?q=L.compareDocumentPosition?l):D},w.matches=w.matchesSelector=w.contains=w.attr=w.error=w.uniqueSort=E=w.getText=(k=w.selectors={cacheLength:50,createPseudo:l,match:me,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:CHILD:PSEUDO:,filter:{TAG:CLASS:ATTR:CHILD:PSEUDO:,pseudos:{not:l(,has:l(,contains:l(,lang:l(,target:root:focus:enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:selected:empty:parent:header:function(e){return be.test(e.nodeName)},input:function(e){return ye.test(e.nodeName)},button:text:first:o(,last:o(,eq:o(,even:o(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:o(,lt:o(,gt:o(}}).pseudos.nth=k.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})k.pseudos[b]=r(b);for(b in{submit:!0,reset:!0})k.pseudos[b]=a(b);u.prototype=k.filters=k.pseudos,k.setFilters=new u,A=w.compile=C.sortStable=B.split("").sort(q).join("")===B,C.detectDuplicates=W,M(),C.sortDetached=n(,n(||t("type|href|height|width",,C.attributes&&n(||t("value",,n(||t(ne,,ke.find=w,ke.expr=w.selectors,ke.expr[":"]=ke.expr.pseudos,ke.unique=w.uniqueSort,ke.text=w.getText,ke.isXMLDoc=w.isXML,ke.contains=w.contains}(g);var Te={};ke.Callbacks=ke.extend({Deferred:when:),ke.support={});var Ee=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Ie=/([A-Z])/g;ke.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:data:function(e,t,i){return n(e,t,i)},removeData:function(e,t){return i(e,t)},_data:_removeData:acceptData:),ke.fn.extend({data:removeData:function(e){return this.each(function(){ke.removeData(this,e)})}}),ke.extend({queue:dequeue:_queueHooks:),ke.fn.extend({queue:dequeue:function(e){return this.each(function(){ke.dequeue(this,e)})},delay:clearQueue:promise:);var Ae,Pe,xe=/[\t\r\n\f]/g,Me=/\r/g,De=/^(?:input|select|textarea|button|object)$/i,Le=/^(?:a|area)$/i,Ne=/^(?:checked|selected)$/i,Oe=ke.support.getSetAttribute,Re=ke.support.input;ke.fn.extend({attr:function(e,t){return ke.access(this,ke.attr,e,t,1<arguments.length)},removeAttr:prop:removeProp:addClass:removeClass:toggleClass:hasClass:val:),ke.extend({valHooks:{option:{get:,select:{get:set:},attr:removeAttr:attrHooks:{type:{set:},propFix:{"for":"htmlFor","class":"className"},prop:propHooks:{tabIndex:{get:}}),Pe={set:,ke.each(ke.expr.match.bool.source.match(/\w+/g),,Re&&Oe||(ke.attrHooks.value={set:),Oe||(Ae={set:,ke.expr.attrHandle.id=ke.expr.attrHandle.name=ke.expr.attrHandle.coords=ke.valHooks.button={get:set:Ae.set},ke.attrHooks.contenteditable={set:,ke.each(["width","height"],),ke.support.hrefNormalized||ke.each(["href","src"],,ke.support.style||(ke.attrHooks.style={get:set:),ke.support.optSelected||(
ke.propHooks.selected={get:),ke.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],,ke.support.enctype||(ke.propFix.enctype="encoding"),ke.each(["radio","checkbox"],;var Ue=/^(?:input|select|textarea)$/i,He=/^key/,Be=/^(?:mouse|contextmenu)|click/,$e=/^(?:focusinfocus|focusoutblur)$/,Fe=/^([^.]*)(?:\.(.+)|)$/;ke.event={global:{},add:remove:trigger:function(e,t,i,n){var s,r,a,o,l,c,u,d=[i||Q],h=le.call(e,"type")?e.type:e,p=le.call(e,"namespace")?e.namespace.split("."):[];if(a=c=i=i||Q,3!==i.nodeType&&8!==i.nodeType&&!$e.test(h+ke.event.triggered)&&(0<=h.indexOf(".")&&(h=(p=h.split(".")).shift(),p.sort()),r=h.indexOf(":")<0&&"on"+h,(e=e[ke.expando]?e:new ke.Event(h,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=p.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=C,e.target||(e.target=i),t=null==t?[e]:ke.makeArray(t,[e]),l=ke.event.special[h]||{},n||!l.trigger||!1!==l.trigger.apply(i,t))){if(!n&&!l.noBubble&&!ke.isWindow(i)){for(o=l.delegateType||h,$e.test(o+h)||(a=a.parentNode);a;a=a.parentNode)d.push(a),c=a;c===(i.ownerDocument||Q)&&d.push(c.defaultView||c.parentWindow||g)}for(u=0;(a=d[u++])&&!e.isPropagationStopped();)e.type=1<u?o:l.bindType||h,(s=(ke._data(a,"events")||{})[e.type]&&ke._data(a,"handle"))&&s.apply(a,t),(s=r&&a[r])&&ke.acceptData(a)&&s.apply&&!1===s.apply(a,t)&&e.preventDefault();if(e.type=h,!n&&!e.isDefaultPrevented()&&(!l._default||!1===l._default.apply(d.pop(),t))&&ke.acceptData(i)&&r&&i[h]&&!ke.isWindow(i)){(c=i[r])&&(i[r]=null),ke.event.triggered=h;try{i[h]()}catch(f){}ke.event.triggered=C,c&&(i[r]=c)}return e.result}},dispatch:handlers:fix:props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:,mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:,special:{load:{noBubble:!0},focus:{trigger:delegateType:"focusin"},blur:{trigger:delegateType:"focusout"},click:{trigger:_default:,beforeunload:{postDispatch:},simulate:,ke.removeEvent=Q.removeEventListener?ke.Event=ke.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:stopPropagation:stopImmediatePropagation:,ke.each({mouseenter:"mouseover",mouseleave:"mouseout"},,ke.support.submitBubbles||(ke.event.special.submit={setup:postDispatch:teardown:),ke.support.changeBubbles||(ke.event.special.change={setup:handle:teardown:),ke.support.focusinBubbles||ke.each({focus:"focusin",blur:"focusout"},,ke.fn.extend({on:one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:trigger:triggerHandler:);var je=/^.[^:#\[\.,]*$/,ze=/^(?:parents|prev(?:Until|All))/,Ge=ke.expr.match.needsContext,Ve={children:!0,contents:!0,next:!0,prev:!0};ke.fn.extend({find:has:not:function(e){return this.pushStack(a(this,e||[],!0))},filter:is:closest:index:add:addBack:),ke.each({parent:parents:function(e){return ke.dir(e,"parentNode")},parentsUntil:function(e,t,i){return ke.dir(e,"parentNode",i)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return ke.dir(e,"nextSibling")},prevAll:function(e){return ke.dir(e,"previousSibling")},nextUntil:function(e,t,i){return ke.dir(e,"nextSibling",i)},prevUntil:siblings:children:function(e){return ke.sibling(e.firstChild)},contents:,,ke.extend({filter:dir:sibling:);var We="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",qe=/ jQuery\d+="(?:null|\d+)"/g,Ye=new RegExp("<(?:"+We+")[\\s/>]","i"),Xe=/^\s+/,Qe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ke=/<([\w:]+)/,Je=/<tbody/i,Ze=/<|&#?\w+;/,et=/<(?:script|style|link)/i,tt=/^(?:checkbox|radio)$/i,it=/checked\s*(?:[^=]|=\s*.checked.)/i,nt=/^$|\/(?:java|ecma)script/i,st=/^true\/(.*)/,rt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,at={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ke.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},ot=m(Q).appendChild(Q.createElement("div"));at.optgroup=at.option,at.tbody=at.tfoot=at.colgroup=at.caption=at.thead,at.th=at.td,ke.fn.extend({text:append:prepend:before:after:remove:empty:clone:html:replaceWith:detach:domManip:),ke.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},,ke.extend({clone:buildFragment:cleanData:_evalUrl:),ke.fn.extend({wrapAll:wrapInner:wrap:unwrap:);var lt,ct,ut,dt=/alpha\([^)]*\)/i,ht=/opacity\s*=\s*([^)]*)/,pt=/^(top|right|bottom|left)$/,ft=/^(none|table(?!-c[ea]).+)/,gt=/^margin/,mt=new RegExp("^("+ue+")(.*)$","i"),vt=new RegExp("^("+ue+")(?!px)[a-z%]+$","i"),_t=new RegExp("^([+-])=("+ue+")","i"),yt={BODY:"block"},bt={position:"absolute",visibility:"hidden",display:"block"},wt={letterSpacing:0,fontWeight:400},St=["Top","Right","Bottom","Left"],Ct=["Webkit","O","Moz","ms"];ke.fn.extend({css:show:hide:function(){return T(this)},toggle:),ke.extend({cssHooks:{opacity:{get:},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ke.support.cssFloat?"cssFloat":"styleFloat"},style:css:),g.getComputedStyle?(ct=function(e){return g.getComputedStyle(e,null)},ut=:Q.documentElement.currentStyle&&(ct=function(e){return e.currentStyle},ut=,ke.each(["height","width"],,ke.support.opacity||(ke.cssHooks.opacity={get:set:),ke(,ke.expr&&ke.expr.filters&&(ke.expr.filters.hidden=ke.expr.filters.visible=,ke.each({margin:"",padding:"",border:"Width"},;var Tt=/%20/g,kt=/\[\]$/,Et=/\r?\n/g,It=/^(?:submit|button|image|reset|file)$/i,At=/^(?:input|select|textarea|keygen)/i;ke.fn.extend({serialize:function(){return ke.param(this.serializeArray())},serializeArray:),ke.param=ke.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),,ke.fn.extend({hover:bind:unbind:delegate:undelegate:);var Pt,xt,Mt=ke.now(),Dt=/\?/,Lt=/#.*$/,Nt=/([?&])_=[^&]*/,Ot=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Rt=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ut=/^(?:GET|HEAD)$/,Ht=/^\/\//,Bt=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,$t=ke.fn.load,Ft={},jt={},zt="*/".concat("*");try{xt=X.href}catch(ni){(xt=Q.createElement("a")).href="",xt=xt.href}Pt=Bt.exec(xt.toLowerCase())||[],ke.fn.load=ke.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],,ke.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xt,type:"GET",isLocal:Rt.test(Pt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ke.parseJSON,"text xml":ke.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:ajaxPrefilter:M(Ft),ajaxTransport:M(jt),ajax:getJSON:getScript:),ke.each(["get","post"],,ke.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":}),ke.ajaxPrefilter("script",,ke.ajaxTransport("script",;var Gt=[],Vt=/(=)\?(?=&|$)|\?\?/;ke.ajaxSetup({jsonp:"callback",jsonpCallback:),ke.ajaxPrefilter("json jsonp",;var Wt,qt,Yt=0,Xt=g.ActiveXObject&&ke.ajaxSettings.xhr=g.ActiveXObject?R,qt=ke.ajaxSettings.xhr(),ke.support.cors=!!qt&&"withCredentials"in qt,(qt=ke.support.ajax=!!qt)&&ke.ajaxTransport(;var Qt,Kt,Jt=/^(?:toggle|show|hide)$/,Zt=new RegExp("^(?:([+-])=|)("+ue+")([a-z%]*)$","i"),ei=/queueHooks$/,ti=[j],ii={"*":[};ke.Animation=ke.extend($,{tweener:prefilter:),(ke.Tween=z).prototype={constructor:z,init:cur:run:,z.prototype.init.prototype=z.prototype,z.propHooks={_default:{get:set:},z.propHooks.scrollTop=z.propHooks.scrollLeft={set:,ke.each(["toggle","show","hide"],,ke.fn.extend({fadeTo:animate:stop:finish:),ke.each({slideDown:G("show"),slideUp:G("hide"),slideToggle:G("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},,ke.speed=ke.easing={linear:function(e){return e},swing:,ke.timers=[],ke.fx=z.prototype.init,ke.fx.tick=ke.fx.timer=ke.fx.interval=13,ke.fx.start=ke.fx.stop=ke.fx.speeds={slow:600,fast:200,_default:400},ke.fx.step={},ke.expr&&ke.expr.filters&&(ke.expr.filters.animated=,ke.fn.offset=ke.offset={setOffset:,ke.fn.extend({position:offsetParent:),ke.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},,ke.each({Height:"height",Width:"width"},,ke.fn.size=function(){return this.length},ke.fn.andSelf=ke.fn.addBack,"object"==typeof module&&module&&"object"==typeof module.exports?module.exports=ke:(g.jQuery=g.$=ke,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ke}))}(window),function(d,h){var p;d.rails!==h&&d.error("jquery-ujs has already been loaded!");var e=d(document);d.rails=p={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:fire:confirm:function(e){return confirm(e)},ajax:function(e){return d.ajax(e)},href:function(e){return e.attr("href")},handleRemote:handleMethod:disableFormElements:enableFormElements:allowAction:blankInputs:nonBlankInputs:stopEverything:disableElement:enableElement:,p.fire(e,"rails:attachBindings")&&(d.ajaxPrefilter(,e.delegate(p.linkDisableSelector,"ajax:complete",function(){p.enableElement(d(this))}),e.delegate(p.linkClickSelector,"click.rails",function(e){var t=d(this),i=t.data("method"),n=t.data("params");if(!p.allowAction(t))return p.stopEverything(e);if(t.is(p.linkDisableSelector)&&p.disableElement(t),t.data("remote")===h)return t.data("method")?(p.handleMethod(t),!1):void 0;if((e.metaKey||e.ctrlKey)&&(!i||"GET"===i)&&!n)return!0;var s=p.handleRemote(t);return!1===s?p.enableElement(t):s.error(function(){p.enableElement(t)}),!1}),e.delegate(p.buttonClickSelector,"click.rails",function(e){var t=d(this);return p.allowAction(t)?(p.handleRemote(t),!1):p.stopEverything(e)}),e.delegate(p.inputChangeSelector,"change.rails",,e.delegate(p.formSubmitSelector,"submit.rails",,e.delegate(p.formInputClickSelector,"click.rails",,e.delegate(p.formSubmitSelector,"ajax:beforeSend.rails",function(e){this==e.target&&p.disableFormElements(d(this))}),e.delegate(p.formSubmitSelector,"ajax:complete.rails",,d()}(jQuery);var Interface=function Interface(e,t){var i,n;return i=e&&t?e:this,n=e&&t?t:e||"interface"+Math.random().toString(),function(e){return e.isInterface=!0,e.name=n,i[n]=e,i[n]}},Module=function Module(e,t){var i,n,s,r;return i=e&&t?e:this,n=e&&t?t:e||"module"+Math.random().toString(),r={moduleName:n,prototype:{},__includedModules:[],include:function(e){var t;for(t in e)e.hasOwnProperty(t)&&"prototype"!==t&&"isModule"!==t&&"__includedModules"!==t&&"include"!==t&&"moduleName"!==t&&(r[t]=e[t]);if(e.hasOwnProperty("prototype")&&e.prototype)for(t in e.prototype)e.prototype.hasOwnProperty(t)&&(r.prototype[t]=e.prototype[t]);return this.__includedModules.push(e),this}},(s=function(e){var t;for(t in r.isModule=!0,e)e.hasOwnProperty(t)&&"prototype"!==t&&"isModule"!==t&&"__includedModules"!==t&&"include"!==t&&"moduleName"!==t&&(r[t]=e[t]);if(e.hasOwnProperty("prototype")&&e.prototype)for(t in e.prototype)e.prototype.hasOwnProperty(t)&&(r.prototype[t]=e.prototype[t]);return i[n]=r,i[n]}).includes=function(){for(var e=0;e<arguments.length;e++)r.include(arguments[e]);return s},s},Class=function Class(e,o){var l,c,i;return l=e&&o?e:this,o=e&&o?o:e||"class"+Math.random().toString(),(c=.__descendants=[],c.__implementedInterfaces=[],c.__includedModules=[],c.className=o,c.include=function(e){var t;for(t in e)e.hasOwnProperty(t)&&"prototype"!=t&&"constructor"!=t&&"isModule"!=t&&"include"!=t&&"superClass"!=t&&(c[t]=e[t]);if(e.hasOwnProperty("prototype")&&e.prototype)for(t in e.prototype)e.prototype.hasOwnProperty(t)&&(c.prototype[t]=e.prototype[t]);return c.__includedModules.push(e),this},(i=function(e){var t,i,n,s,r,a=e.prototype;if(a){for(r in a)a.hasOwnProperty(r)&&(c.prototype[r]=a[r]);delete e.prototype}for(r in e)e.hasOwnProperty(r)&&(c[r]=e[r]);for(t=0,i=c.__implementedInterfaces.length;t<i;t++){for(n=0,s=c.__implementedInterfaces[t].constructor.length;n<s;n++)if(!c[c.__implementedInterfaces[t].constructor[n]]){alert("must implement static "+c.__implementedInterfaces[t].name);break}if(c.__implementedInterfaces[t].hasOwnProperty("prototype")&&c.__implementedInterfaces[t].prototype)for(n=0,s=c.__implementedInterfaces[t].prototype.length;n<s;n++)if(!c.prototype[c.__implementedInterfaces[t].prototype[n]]){alert("must implement prototype "+c.__implementedInterfaces[t].name);break}}return window.Li&&window.Li.ObjectSpy&&window.Li.Spy&&window.enableLi&&(c.__objectSpy=new Li.ObjectSpy,c.__objectSpy.spy(c),c.__objectSpy.spy(c.prototype,{except:["constructor"]})),l[o]=c}).inherits=function(e){var t,i;for(t in(c.superClass=e).hasOwnProperty("__descendants")&&e.__descendants.push(c),(i=function(){}).prototype=e.prototype,c.prototype=new i,c.prototype.constructor=c,e)e.hasOwnProperty(t)&&"prototype"!=t&&"className"!==t&&"superClass"!==t&&"__descendants"!=t&&"include"!=t&&(c[t]=e[t]);return delete this.inherits,this},i.ensures=function(e){for(var t=0;t<arguments.length;t++)c.__implementedInterfaces.push(arguments[t]);return delete this.ensures,i},i.includes=function(){for(var e=0;e<arguments.length;e++)c.include(arguments[e]);return i},i};if(Module("BubblingSupport")({dispatch:function(e,t){t=t||{};var i=CustomEventSupport.prototype.dispatch.call(this,e,t);return!0!==i._stopPropagation&&this.parent&&this.parent.dispatch&&(t.target=i.target,t.currentTarget=this.parent,this.parent.dispatch(i.type,t)),i},prototype:{dispatch:function(e,t){t=t||{};var i=CustomEventSupport.prototype.dispatch.call(this,e,t);return!0!==i._stopPropagation&&this.parent&&this.parent.dispatch&&(t.target=i.target,t.currentTarget=this.parent,this.parent.dispatch(i.type,t)),i}}}),Class("NeonCustomEvent")({prototype:{init:stopPropagation:function(){this._stopPropagation=!0},preventDefault:function(){this._preventDefault=!0}}}),Module("CustomEventSupport")({eventListeners:null,bind:function(e,t){var i;return this.eventListeners||(this.eventListeners={}),this.eventListeners[e]||(this.eventListeners[e]=[]),i=!1,$(this.eventListeners[e]).each(function(){if(this==t)return!(i=!0)}),i||this.eventListeners[e].push(t),this},unbind:function(e,t){var i=0,n=!1;return this.eventListeners||(this.eventListeners={}),void 0===t&&(this.eventListeners[e]=[]),$.each(this.eventListeners[e]||[],function(e){if(this==t)return i=e,!(n=!0)}),n&&this.eventListeners[e].splice(i,1),this},dispatch:function(e,t){var i,n,s;return this.eventListeners||(this.eventListeners={}),n=((i=new NeonCustomEvent(e,t)).target=this).eventListeners[e]||[],s=this,i.allowDefault=!0,$(n).each(function(){if(this.apply(s,[i,t]),i._preventDefault&&!1,i._stop)return!1}),i},prototype:{eventListeners:null,bind:function(e,t){var i;return this.eventListeners||(this.eventListeners={}),this.eventListeners[e]||(this.eventListeners[e]=[]),i=!1,$(this.eventListeners[e]).each(function(){if(this==t)return!(i=!0)}),i||this.eventListeners[e].push(t),this},unbind:function(e,t){var i=0,n=!1;return this.eventListeners||(this.eventListeners={}),void 0===t&&(this.eventListeners[e]=[]),$.each(this.eventListeners[e]||[],function(e){if(this==t)return i=e,!(n=!0)}),n&&this.eventListeners[e].splice(i,1),this},dispatch:function(e,t){var i,n,s;return this.eventListeners||(this.eventListeners={}),n=((i=new NeonCustomEvent(e,t)).target=this).eventListeners[e]||[],s=this,i.allowDefault=!0,$(n).each(function(){if(this.apply(s,[i,t]),i._preventDefault&&!1,i._stopPropagation)return!1}),i}}}),Module("NodeSupport")({prototype:{appendChild:function(e){return this.children||(this.children=[]),this.children.push(e),e.setParent(this),e.name&&(this[e.name]=e),e},insertBefore:function insertBefore(e,t){var i;return e.parent&&e.parent.removeChild(e),this.hasOwnProperty("children")||(this.children=[]),void 0===t?this.appendChild(e):(i=this.children.indexOf(t),this.children.splice(i,0,e),(this[e.name]=e).setParent(this)),e},getPreviousSibling:function getPreviousSibling(){if("undefined"!=typeof this.parent&&this.parent.children[0]!==this)return this.parent.children[this.parent.children.indexOf(this)-1]},getNextSibling:function getNextSibling(){if("undefined"!=typeof this.parent&&this.parent.children[this.parent.children.length-1]!==this)return this.parent.children[this.parent.children.indexOf(this)+1]},removeChild:function(e){this.children||(this.children=[]);var t,i=this.children.length;for(t=0;t<i;t++)if(this.children[t]===e){e.setParent(null),e.name&&delete this[e.name],this.children.splice(t,1);break}return this},setParent:}),Class("Widget").includes(CustomEventSupport,NodeSupport)({elementClass:"placeit-widget",html:"        <div></div>    ",elementSource:null,activeClass:"active",prototype:{elementId:null,cssClass:null,init:function(e){this.children=[],$.extend(this,e),this.element||(this.constructor.elementSource||(this.constructor.elementSource=$(this.constructor.html)),this.element=this.constructor.elementSource.clone(),this.element.addClass(this.constructor.elementClass),this.elementId&&this.element.attr("id",this.elementId),this.cssClass&&this.element.addClass(this.cssClass))},activate:function activate(){return this.element.addClass(this.constructor.activeClass),this.dispatch("activate"),this},deactivate:function deactivate(){return this.element.removeClass(this.constructor.activeClass),this},hide:function hide(){return this.element.hide(),this},show:function show(){return this.element.show(),this},isVisible:function isVisible(){return this.element.is(":visible")},getElement:function getElement(){return this.element},render:function render(e,t){return t?e.prepend(this.element):e.append(this.element),this.dispatch("render"),this},destroy:function destroy(){if(this.children){var e,t,i=this.children.length;for(e=0;e<i;e++)(t=this.children[e]).setParent(null),t.name&&delete this[t.name],t.destroy()}this.children=[],this.parent&&this.parent.removeChild(this),this.element.remove(),this.element=null,this.dispatch("destroy")}}}),
/*!
 * jQuery Cookie Plugin v1.3
 * https://github.com/carhartl/jquery-cookie
 *
 * Copyright 2011, Klaus Hartl
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/GPL-2.0
 */
function(d,h,p){r t=/\+/g,m=d.cookie=m.defaults={},d.removeCookie=(jQuery,document),Class("CookiesUtils")({_preferences:null,_preferencesCookieName:"cookie_preferences",_pl_show_cookies_policy:!1,_marketingEventsBlacklist:["email:mainmenu:clicked","email:submenu:clicked","email:mobilemenu:clicked","email:ctablock:seen","email:list:clicked","email:footer:clicked","email:dropdown:clicked","email:email:reminder","email:search:success","email:Completed Order","email:result.shown","email:IndustrySubmitted","email:open.faq","email:smartTemplate:colorChange","email:smartTemplate:customGraphicChange","marketing:ctaBlockButton:clicked","marketing:chat:initialized","marketing:chat:replied","marketing:landing:clicked","marketing:email:draftSaved","marketing:email:signup","marketing:survey:shown","marketing:email:monthlySubscription","marketing:email:annualSubscription","marketing:event","marketing:uservoice:shown","marketing:email:stageBookmarked","marketing:email:stageSeen","email:highintent","email:subscription:canceled","email:purchase:success","email:subscription:success","email:Download:click","email:freeStageDownload","email:StageModified","email:user:login","email:PricingModal:Opens","email:PlanCTA:Clicked","email:user:signup","email:draft:Saved","email:forcesignup","email:purchase:canceled","email:StageBookmarked","email:AbandonedCart"],checkPreferences:function checkPreferences(){this._preferences=JSON.parse($.cookie(this._preferencesCookieName)),!1===Boolean(this._preferences)&&(this._pl_show_cookies_policy=!0)},showCookiesPolicyModal:function showCookiesPolicyModal(){return this._pl_show_cookies_policy},getPreferencesSetting:function getPreferencesSetting(){return!1===Boolean(this._preferences)||this._preferences.preferences},getMarketingSetting:function getMarketingSetting(){return!1===Boolean(this._preferences)||this._preferences.marketing},getStatisticsSetting:function getStatisticsSetting(){return!1===Boolean(this._preferences)||this._preferences.statistics},isMarketingBlacklistedEvent:),CookiesUtils.checkPreferences(),"function"==typeof require&&require("neon"),Thulium=Class("Thulium")({prototype:{renderer:null,parser:null,template:"",view:"",init:function(e){var t=this;e&&Thulium.Util.extend(t,e)},parse:function(t){var i=this;setTimeout(function(){i._initParser(),i.parser.parse(},0)},parseSync:function(){var e=this;return e._initParser(),e._tokens=e.parser.parseSync(),e},render:function(e,t){var i=this;setTimeout(function(){i._initRenderer(e),i.renderer.render(},0)},renderSync:function(e){var t=this;return t._initRenderer(e),t.view=t.renderer.renderSync(),t.view},_initParser:function(){this.parser||(this.parser=new Thulium.Parser({template:this.template}))},_initRenderer:function(e){this.renderer||(this.renderer=new Thulium.Renderer({tokens:this._tokens,context:e}))}}}),"function"==typeof require&&(require("./Thulium/Util.js"),require("./Thulium/Parser.js"),require("./Thulium/Renderer.js")),Thulium.Parser=Class(Thulium,"Parser")({prototype:{lex:{text:{matcher:"^([\\s\\S]*?)",name:"text"},tagOpen:{matcher:"(<%)",name:"tagOpen",hasText:!0},tagClose:{matcher:"(%>)",name:"tagClose",hasText:!0},printIndicator:{matcher:"^(=)",name:"printIndicator",optional:!0}},template:null,_openBrackets:0,_openPrints:[],init:function(e){return e&&Thulium.Util.extend(this,e),this.template||console.warn("Warning, no template passed."),this._initRegex(),this},parseSync:function(){if(!this.template)throw"ParseError: No template to parse.";return this._tokenize(),this._tokens},parse:function(t){var i=this;setTimeout(function(){var e;if(!i.template)throw"ParseError: No template to parse.";i._tokenize(),e=i._tokens,t&&t(e)},0)},_initRegex:function(){var e,t;for(e in this.lex)(t=this.lex[e]).hasText?t.compiledRe=this.lex.text.matcher+t.matcher:t.compiledRe=t.matcher,t.compiledRe=new RegExp(t.compiledRe,"gi")},_tokenize:function(e,t){var i,n,s,r,a=this;for(void 0===e&&(e=a.template),void 0===t&&(a._tokens=[],t=a.lex.tagOpen);e;)if(s=(i=t.compiledRe).exec(e),n=i.lastIndex,i.lastIndex=0,s)r=t===a.lex.tagOpen?"text":"code",t.hasText?a._tokens.push({type:r,value:s[1]}):a._tokens.push({type:t.name}),t===a.lex.printIndicator&&a._openPrints.push(a._openBrackets),t===a.lex.tagClose&&0<a._openPrints.length&&a._countBrackets(s[1]),e=e.substr(n),t=a._nextToken(t);else if(t==a.lex.tagOpen)a._tokens.push({type:"text",value:e}),e="";else{if(!t.optional)throw"Syntax Error: Expecting "+t.name+" ... Nowhere to be found. So I was like, what?";e=e.substr(n),t=a._nextToken(t)}},_nextToken:function(e){switch(e){case this.lex.tagOpen:return this.lex.printIndicator;case this.lex.tagClose:return this.lex.tagOpen;case this.lex.printIndicator:return this.lex.tagClose}},_countBrackets:function(e){var t;for(t=0;t<e.length;t++)"{"===e[t]&&this._openBrackets++,"}"===e[t]&&this._openBrackets--;this._closePrint()},_closePrint:function(){var e;0<=(e=this._openPrints.indexOf(this._openBrackets))&&(this._tokens.push({type:"closePrintIndicator"}),this._openPrints.splice(e,1))}}}),Thulium.Renderer=Class(Thulium,"Renderer").includes()({prototype:{view:"",tokens:null,context:null,captured:[],_preView:"",_shouldCapture:0,init:function(e){var t=this;e&&Thulium.Util.extend(t,e)},render:function(t){var i=this;setTimeout(0)},renderSync:function(){if(this.tokens)return this._render(),this._evaluate(),this.view;throw"RenderError: No tokens to render."},print:function(e){var t="";t="function"==typeof e?e():e,this._shouldCapture?this.captured[this.captured.length-1]+=t:this.view+=t},capture:function(e){var t=Array.prototype.slice.call(arguments,1);return this.captured.push(""),this._shouldCapture+=1,e.apply(this,t),this._shouldCapture-=1,this.captured.pop()},_render:function(){var e,t,i="";for(e=0;e<this.tokens.length;e++)"text"===(t=this.tokens[e]).type?i+='\ntm.print("'+Thulium.Util.sanitize(t.value)+'");\n':"code"===t.type?i+=t.value:"printIndicator"===t.type?i+="\ntm.print(":"closePrintIndicator"===t.type&&(i+=");");this.preView=i},_evaluate:function(){this.view="",this._createFunction().apply(this)},_createFunction:}),Thulium.Util=Module(Thulium,"Util")({backslashSanitize:/\\/g,newlineSanitize:/\n/g,quotesSanitize:/"/g,extend:sanitize:function(e){return e=(e=(e=e.replace(this.backslashSanitize,"\\\\")).replace(this.newlineSanitize,"\\n")).replace(this.quotesSanitize,'\\"')}}),Class("Utils")({pollingTask:null,createPollingBuilder:function createPollingBuilder(o,l){return function e(s){var r,a=new Promise(function(e,t){r=function(){t(new Error("Cancelation error"))}});return function(i){var e=function(){var e=function(e){var t={fulfilled:!0,value:e};return!0===i(e)?t:Promise.reject(t)},t=return Promise.race([a,s()]).then(e,t)},n=P.retryableDelayed(e,o,l)(),t=new Promise(function(t,i){n.then(function(e){!1===e.fulfilled&&i(e.error),t(e.value)},function(e){!0===e.fulfilled&&i({error:"timeout"})})});return t.cancel=r,t}}},bindFn:function bindFn(t){return ,tap:function tap(t){return ,createRetryableByConfirmation:function createRetryableByConfirmation(a,o,l){return function c(){var i,n,t,s,e,r;return s=arguments,e=new Promise(,r=function(e){return e.then(i)["catch"](t)},t=function(e){!1!==a(e)?o().then(["catch"](function(){n(e)}):n(e)},r(l.apply(null,s)),e}},currying:function currying(t){return 0===t.length?t():,promisifyEventBuilder:function promisifyEventBuilder(s){return function(n){return new Promise(function(t){var i=function(e){s.unbind(n,i),t(e)};s.bind(n,i)})}},anyUrlParam:function anyUrlParam(e){return 0<e.filter(.length},moveScrollTop:function moveScrollTop(e){$("html, body").animate({scrollTop:e},500,"swing")},treeWalker:function treeWalker(e,t,i){var n=function n(e){i(e),!1!==Array.isArray(e[t])&&e[t].forEach(function(e){n(e)})};n(e)},pipe:function pipe(){var t=Array.prototype.slice.call(arguments);return ,negate:getAttributesObjectFromElement:function getAttributesObjectFromElement(e){return Array.prototype.slice.call(e.attributes).reduce({})},mapElementToObject:function mapElementToObject(i,n){return Object.keys(i).reduce({})},filterObjectKeys:function filterObjectKeys(e,i){return Object.keys(e).reduce(function(e,t){return i[t]!=undefined&&(e[t]=i[t]),e},{})},cachedBuilder:function cachedBuilder(i,e){return function(){var t=JSON.stringify(arguments);return t in i?Promise.resolve(i[t]):e.apply(null,arguments).then(function(e){return i[t]=e})}},arraysDif:function arraysDif(e,t){return e.filter(},deepCopy:function deepCopy(e){return!1===Boolean(e)?e:Array.isArray(e)?$.extend(!0,[],e):$.extend(!0,{},e)},isHexadecimal:function isHexadecimal(e){return null!==e.match("^[0-9A-Fa-f]+$")},validateData:function validateData(e,i){return e.reduce(function(e,t){return"undefined"==typeof i[t]?e.concat(t):e},[])},isValidURL:function e(t){var e=!1;if("string"!=typeof t)return e;var i=/[-a-zA-Z0-9.:]{1,256}\.[a-z0-9]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&!//=]*)/g,n=t.match(i);return null!==n&&0<n.length&&(e=!0),e},getCleanedUpURL:function getCleanedUpURL(e){var t,i=["http://http://","http://https://","https://http://","https://https://"],n=["http://","https://","http://","https://"];if(-1<e.indexOf("http")){for(var s=0;s<i.length;s++)-1<e.indexOf(i[s])&&(t=e.replace(i[s],n[s]));void 0===t&&(t=e)}else t="http://"+e;return t},buildImageLoader:function buildImageLoader(e){var t=new Image;return t.src=Helpers.App.isBase64Image(e)?e:e+"?"+Date.now(),t},generateMd5Hash:function generateMd5Hash(e){return $.md5(e)},uniqueObjArrayByKey:function uniqueObjArrayByKey(e,i){return e.reduce(function(e,t){return!1===Boolean(e.find(function(e){return e[i]===t[i]}))&&e.push(t),e},[])},isHexColor:isTransparent:isHexColorOrTransparent:function isHexColorOrTransparent(e){return!!Utils.isTransparent(e)||Utils.isHexColor(e)},isBase64Valid:function isBase64Valid(e){var t=new Image;return t.src="data:image/png;base64,"+e,new Promise(function(e){t.onload=function(){0!==t.height&&0!==t.width?e(!0):e(!1)},t.onerror=)},groupBy:function groupBy(e,n){return e.reduce({})},once:function once(e){var t,i=!1;return function(){return!1===i&&(i=!0,t=e.apply(null,arguments)),t}},toCamelCase:isNotEmptyObject:function isNotEmptyObject(e){return e instanceof Object&&0<Object.keys(e).length},difference:),Class("PurchaseSupport")({ROUTES:[{url:"/subscriptions/{{token}}/transaction",isPollingEnabled:!0,pingURL:"/api/v1/base/purchase_status?process_id=",pollingConfig:{times:234,delay:1e3}},{url:"/subscriptions/quick_transaction",isPollingEnabled:!0,pingURL:"/api/v1/base/purchase_status?process_id=",pollingConfig:{times:90,delay:1e3}},{url:"/api/v3/subscriptions/transaction",isPollingEnabled:!0,pingURL:"/api/v3/purchases/purchase_status?process_id=",pollingConfig:{times:234,delay:1e3}},{url:"/api/v3/subscriptions/quick_transaction",isPollingEnabled:!0,pingURL:"/api/v3/purchases/purchase_status?process_id=",pollingConfig:{times:90,delay:1e3}},{url:"/purchases/{{token}}/video_v4_transaction",isPollingEnabled:!0,pingURL:"/api/v1/base/purchase_status?process_id=",pollingConfig:{times:234,delay:1e3}},{url:"/purchases/quick_smart_template_transaction",isPollingEnabled:!0,pingURL:"/api/v1/base/purchase_status?process_id=",pollingConfig:{times:90,delay:1e3}},{url:"/purchases/quick_video_v4_transaction",isPollingEnabled:!0,pingURL:"/api/v1/base/purchase_status?process_id=",pollingConfig:{times:90,delay:1e3}},{url:"/purchases/{{token}}/smart_template_transaction",isPollingEnabled:!0,pingURL:"/api/v1/base/purchase_status?process_id=",pollingConfig:{times:234,delay:1e3}},{url:"/purchases/quick_video_v5_transaction",isPollingEnabled:!0,pingURL:"/api/v1/base/purchase_status?process_id=",pollingConfig:{times:90,delay:1e3}},{url:"/purchases/{{token}}/video_v5_transaction",isPollingEnabled:!0,pingURL:"/api/v1/base/purchase_status?process_id=",pollingConfig:{times:90,delay:1e3}},{url:"/purchases/{{token}}/multi_purchase_transaction",isPollingEnabled:!0,pingURL:"/api/v1/base/purchase_status?process_id=",pollingConfig:{times:234,delay:2e3}}],getRequestDataByUrl:buildPolling:function buildPolling(i){var n;return n=Utils.createPollingBuilder(i.times,i.delay),function(e){var t=function(e){return"Completed"===e.state};return n(function(){return P.ajax({url:i.pingURL+e.process_id})})(t)}}}),Module("SaleSupport")({prototype:{shouldShowCampaignModal:function shouldShowCampaignModal(){return!1},addCampaignBadge:function addCampaignBadge(e){this.desktopMenu&&(e.is_animated?this.desktopMenu.addAnimatedBadge(e.menu_link,e.variant,e.asset):e.variant.includes("menu-badge")?this.desktopMenu.addImageBadge(e.menu_link,e.variant,e.asset):this.desktopMenu.addBadge(e.asset,e.menu_link,e.variant))},loadCampaignBadges:function loadCampaignBadges(){var e=Helpers.App.getActiveCampaigns();if(!(e.length<1)){var t=this;e.forEach(}},buildRetentionNotification:function buildRetentionNotification(){return new UI.Campaign.HolidayRetentionNotification({name:"notification",cssClass:"holiday-retention",element:$(".campaign-notification")})},buildRetentionEventHandler:tryInitRetentionNotification:function tryInitRetentionNotification(){!1===Helpers.Holiday.shouldShowRetentionNotification()||this.notificationController||this.appendChild(new UI.Campaign.NotificationController({name:"notificationController",notification:this.buildRetentionNotification(),eventHandler:this.buildRetentionEventHandler()}))}}}),Module("ThumbnailSupport")({prototype:{CURRENT_FOR_YOU_PAGE:1,_requestForYouStages:function _requestForYouStages(){var e=this,t=Date.now(),i="true"===new URLSearchParams(window.location.search).get("pdp_enabled")?"&pdp_enabled=true":"",n="/for-you-paginator?page="+ ++this.CURRENT_FOR_YOU_PAGE+"&t="+t+i;return P.get(n).then(function(e){return e})["catch"](e._handleForYouClientError.bind(e))},_handleForYouClientError:function _handleForYouClientError(e){var t;e&&e.responseJSON&&(t=e.responseJSON.message),console.error(t)}}}),Widget.prototype.initOriginal=Widget.prototype.init,Widget.prototype.init=function init(e){"function"==typeof this._translate&&this._translate(),"function"==typeof this._setCurrencyLabel&&this._setCurrencyLabel(),Widget.prototype.initOriginal.call(this,e)},Class("I18nUtils")({t:globalContext:{t:function t(e){return I18nUtils.t(e)}},getContext:function getContext(e){return e?Object.assign({},e,I18nUtils.globalContext):I18nUtils.globalContext}}),window.TRANSLATIONS={SsoModal:{TEXT_TAB_SIGNUP:"Criar contra",TEXT_TAB_LOGIN:"Entrar"},SsoSignupModal:{TEXT_GIFT_CREATE_ACCOUNT:"Crie uma conta para fazer o download gratuito",TEXT_VALIDATE_SIGNUP_ERROR:"N\xe3o foi poss\xedvel completar o seu pedido, por favor tente novamente.",TEXT_CREATE_ACCOUNT_SUCCESS:"Sua conta foi criada!",TEXT_CREATE_ACCOUNT_ERROR:"Desculpe, n\xe3o foi poss\xedvel criar a sua conta. Por favor tente novamente mais tarde.",TEXT_VERIFY_TOKEN_SUCCESS:"Tudo pronto!",TEXT_VERIFY_TOKEN_ERROR:"A sua conta foi criada, mas n\xe3o foi poss\xedvel efetuar o login. Por favor tente novamente mais tarde.",TEXT_PASSWORD_CONTEXTUAL_HELP:"Escolha, pelo menos 7 caracteres e um s\xedmbolo",TEXT_PASSWORD_STRENGTH_GOOD:"Senha m\xe9dia!",TEXT_PASSWORD_STRENGTH_GREAT:"Senha forte!",TEXT_PASSWORD_STRENGTH_WEAK:"Tente de novo. Inlcua letras, n\xfameros e s\xedmbolos na sua senha!",html:'<div id="sso_signup_modal"><div class="header hidden" id="signup_continue_header"><h4>Fa\xe7a o seu cadastro para continuar</h4></div><div class="content"><form id="signup_form" class="sign-up-form"><div class="fields_container"><div class="floating-label-input email"><input autocomplete="off" class="form-control" id="signup_user_email" required="required" size="30" type="text" /><label class="placeholder">E-mail</label></div><div id="email_exists_warning" class="help-block text-left warning hidden">Este e-mail j\xe1 est\xe1 em uso. Tente outro. <a class="trigger_login_link" href="#">Fazer login</a></div><div id="email_error_warning" class="help-block text-left warning hidden"></div><div class="floating-label-input password"><input autocomplete="off" class="form-control" id="signup_user_password" required="required" type="password" /><label class="placeholder">Senha</label><div class="secret-eye eye-on"></div></div><div class="meter meter-init"><b class="meter-1"></b><b class="meter-2"></b><b class="meter-3"></b><b class="meter-4"></b></div><div id="bad_password_warning" class="help-block text-left">Escolha, pelo menos 7 caracteres e um s\xedmbolo</div><div class=""><p class="help-block checkboxes text-left"><span id="promotion-notifications" style="cursor: pointer;"> <input type="checkbox"> <span class="promotion-notifications">Receba freebies, inspira\xe7\xe3o e dicas para fazer crescer a sua marca diretamente na sua caixa de entrada.</span></input></span></p></div><div class="row form-group"><div id="recaptchaContainer" class="g-recaptcha col-xs-12"></div></div><div class="" id="signup_btn_container"><button id="submit_button" class="button primary" name="commit" type="submit" value="Sign Up">Cadastrar-se</button></div><div class=""><p class="help-block text-center new-policy">A Envato coleta e utiliza dados pessoais conforme a nossa <a class="strong block-link" target="_blank" href="https://envato.com/privacy/">Pol\xedtica de Privacidade</a>. Ao criar uma conta, voc\xea aceita os nossos <a class="strong block-link" target="_blank" href="https://placeit.net/terms-of-use">Termos e Condi\xe7\xf5es.</a>. </p><p class="help-block text-center">J\xe1 tem uma conta? <a href="#" class="trigger_login_link login-link" role="button">Fa\xe7a login</a></p></div><div class="envato-notice text-center"><span class="placeit-envato-logo-black"></span></div></div></form></div></div>'},SsoLoginGuestCheckoutModal:{TEXT_LOGIN_FAIL:"Erro ao inciar sess\xe3o",TEXT_ENABLE_ADMIN_MFA:"Os administradores devem ter a MFA habilitada, por favor habilite a MFA para autentifica\xe7\xe3o e tente novamente.",TEXT_INVALID_PLACEIT_CREDENTIALS:"Senha inv\xe1lida, verifique sua senha do Placeit",TEXT_AUTOLOGIN_CTA:"Entrar como {{username}}",TEXT_MIGRATE_ENVATO_ACCOUNT_SUCCESS:"Sua conta foi migrada! Voc\xea podera fazer o login usando a sua senha da Envato.",TEXT_LOGIN_ERROR:"N\xe3o foi poss\xedvel completar o seu login. Por favor tente novamente mais tarde.",TEXT_INVALID_CREDENTIALS:"Senha ou e-mail inv\xe1lidos. Voc\xea pode usar o seu e-mail da Envato para fazer login.",TEXT_ENVATO_PASSWORD:"Senha da sua conta Envato",TEXT_INVALID_TFA:"C\xf3digo TFA inv\xe1lido, confira e tente de novo.",TEXT_VERIFICATION_REQUIRED:"Parece que h\xe1 uma tentativa de login anormal. Enviamos o c\xf3digo de verifica\xe7\xe3o por e-mail. Copie e cole o c\xf3digo no campo de verifica\xe7\xf5a abaixo.",TEXT_WRONG_PASSWORD:'Senha errada! Confira que voc\xea inseriu a <strong>sua senha da Envato</strong>, n\xe3o a do Placeit. <a href="https://account.envato.com/reset_password" target="_blank">Voc\xea pode redefinir a sua senha aqui.</a>',html:'<div id="sso_login_modal" class="guest-checkout"><div class="header hidden" id="confirm_placeit_password_header"><h4>Confirme sua conta do Placeit!</h4><p class="text-center">Coloque a sua senha para atualizar a sua conta e permitir o in\xedcio de sess\xe3o com o seu login da Envato a partir de agora.</p></div><div class="header" id="envato_account_header" hidden><h4>Conta Envato encontrada!</h4><p class="text-center">Insira a <span class="warning">sua senha da Envato (n\xe3o do Placeit)</span> compat\xedvel com o usu\xe1rio abaixo, para migrar a sua conta do Placeit e ser acess\xedvel com os seus dados da Envato.</p></div><div class="header" id="updating_account_header" hidden><h4>Atualizando a sua conta</h4><p class="text-center" style="font-size: 14px; font-family: \'SourceSansPro-Light\'; ">Mudamos a nossa Pol\xedtica de Privacidade e Termos de Uso. Estamos tamb\xe9m atualizando a sua conta para que possa entrar com a sua conta do Placeit nas propriedades da Envato. Selecione as caixas de verifica\xe7\xe3o abaixo e aceite para continuar.</p></div><div class="header" id="login_continue_header"><h4>Fa\xe7a o login para continuar</h4><div class="sub-header">Continuar com SSO</div></div><div class="content"><form id="login_form"><div class="fields_container"><div class="floating-label-input email" id="email_field_container"><input autocomplete="off" class="form-control" id="login_user_email" required="required" size="30" type="text" /><label class="placeholder">E-mail</label></div><div class="floating-label-input password" id="password_field_container"><input autocomplete="off" class="form-control" id="login_user_password" required="required" type="password" /><label class="placeholder">Senha</label><div id="password_secret_eye" class="secret-eye eye-on"></div></div><div class="floating-label-input email hidden" id="associated_email_field_container"><input autocomplete="off" class="form-control" id="associated_email" size="30" type="text" readonly/><label class="placeholder">E-mail no Placeit</label></div><div class="floating-label-input password hidden" id="placeit_password_field_container"><input autocomplete="off" class="form-control" id="user_placeit_password" type="password" /><label class="placeholder">Senha do Placeit</label><div id="placeit_password_secret_eye" class="secret-eye eye-on"></div></div><div class="floating-label-input tfa hidden" id="tfa-container"><input autocomplete="off" class="form-control" id="two_factor_code" name="two_factor_code" size="30" type="password"/><label class="placeholder">C\xf3digo da TFA</label></div><div class="floating-label-input hidden" id="signin_verification-container"><input autocomplete="off" class="form-control" id="signin_verification" name="signin_verification" size="30" type="password"/><label class="placeholder">C\xf3digo de verifica\xe7\xe3o (confira o seu e-mail)</label></div><div class="row"><div id="recaptcha_container" class="g-recaptcha col-xs-12" hidden></div></div><div id="privacy_policy_container" class="" hidden><p class="help-block text-left"><input type="checkbox" id="privacy_policy_alert"> <span class="agree" style="cursor: pointer">Concordo com a</span></input> <a href="https://envato.com/privacy/" target="_blank" role="button"> Pol\xedtica de Privacidade </a><br/><input type="checkbox" id="terms_conditions_alert"> <span class="terms_condition" style="cursor: pointer">Concordo com os</span></input> <a href="https://blog.placeit.net/terms-of-use/" target="_blank" role="button"> Termos de Uso </a></p></div><div id="migrate_account_hide"><div class="form-group text-right password-reset"><p class="help-block info-text"><a class="forgot" href="/password_resets/new" target="_blank">Esqueceu sua senha?</a></p></div><div class="row" id="login_btn_container"><div class="col-xs-12"><button class="button primary" name="commit" type="submit" value="Log in">Entrar</button></div></div><div class="row"><div class="col-xs-12"><p class="help-block text-center">N\xe3o tem uma conta? <a href="#" class="trigger_signup_link" role="button">Cadastre-se</a></p></div></div></div><div id="continue_btn" class="row" hidden><br/><div class="col-xs-12"><button class="button primary" name="commit" type="submit" value="Accept">Aceitar</button></div></div><div id="logged_in_notice" class="hidden"><div class="col-xs-12"><input id="logged_in_ok" class="button primary" name="commit" type="submit" value="Login as " /></div></div><div class="envato-notice text-center"><span class="placeit-envato-logo-black"></span></div></div></form></div></div>'},SsoSignupGuestCheckoutModal:{TEXT_GIFT_CREATE_ACCOUNT:"Crie uma conta para fazer o download gratuito",TEXT_VALIDATE_SIGNUP_ERROR:"N\xe3o foi poss\xedvel completar o seu pedido, por favor tente novamente.",TEXT_CREATE_ACCOUNT_SUCCESS:"Sua conta foi criada!",TEXT_CREATE_ACCOUNT_ERROR:"Desculpe, n\xe3o foi poss\xedvel criar a sua conta. Por favor tente novamente mais tarde.",TEXT_VERIFY_TOKEN_SUCCESS:"Tudo pronto!",TEXT_VERIFY_TOKEN_ERROR:"A sua conta foi criada, mas n\xe3o foi poss\xedvel efetuar o login. Por favor tente novamente mais tarde.",TEXT_PASSWORD_CONTEXTUAL_HELP:"Escolha, pelo menos 7 caracteres e um s\xedmbolo",TEXT_PASSWORD_STRENGTH_GOOD:"Senha m\xe9dia!",TEXT_PASSWORD_STRENGTH_GREAT:"Senha forte!",TEXT_PASSWORD_STRENGTH_WEAK:"Tente de novo. Inlcua letras, n\xfameros e s\xedmbolos na sua senha!",html:'<div id="sso_signup_modal"  class="guest-checkout"><div class="container-freebies-notification"><div id="freebies-notification"></div></div><div class="header" id="signup_continue_header"><h4>Fa\xe7a o seu cadastro para continuar</h4><div class="sub-header">Continuar com SSO</div></div><div class="content"><form id="signup_form" class="sign-up-form"><div class="fields_container"><div class="floating-label-input email"><input autocomplete="off" class="form-control" id="signup_user_email" required="required" size="30" type="text" /><label class="placeholder">E-mail</label></div><div id="email_exists_warning" class="help-block text-left warning hidden">Este e-mail j\xe1 est\xe1 em uso. Tente outro. <a class="trigger_login_link" href="#">Fazer login</a></div><div id="email_error_warning" class="help-block text-left warning hidden"></div><div class="floating-label-input password"><input autocomplete="off" class="form-control" id="signup_user_password" required="required" type="password" /><label class="placeholder">Senha</label><div class="secret-eye eye-on"></div></div><div id="bad_password_warning" class="help-block text-left">Escolha, pelo menos 7 caracteres e um s\xedmbolo</div><div class=""><p class="help-block checkboxes text-left"><span id="promotion-notifications" style="cursor: pointer;"> <input type="checkbox"> <span class="promotion-notifications">Receba freebies, inspira\xe7\xe3o e dicas para fazer crescer a sua marca diretamente na sua caixa de entrada.</span></input></span></p></div><div class="" id="signup_btn_container"><button id="submit_button" class="button primary" name="commit" type="submit" value="Sign Up">Cadastrar-se</button></div><hr /><div class="sub-header">N\xe3o quer se registrar?</div><div class="guest-checkout-back-btn-container guest-checkout-sso-modal"><button class="guest-checkout-back-btn">Continuar como convidado</button></div><div class="envato-notice text-center"><span class="placeit-envato-logo-black"></span></div></div></form></div></div>'},SsoLoginModal:{TEXT_LOGIN_FAIL:"Erro ao inciar sess\xe3o",TEXT_ENABLE_ADMIN_MFA:"Os administradores devem ter a MFA habilitada, por favor habilite a MFA para autentifica\xe7\xe3o e tente novamente.",TEXT_INVALID_PLACEIT_CREDENTIALS:"Senha inv\xe1lida, verifique sua senha do Placeit",TEXT_AUTOLOGIN_CTA:"Entrar como {{username}}",TEXT_MIGRATE_ENVATO_ACCOUNT_SUCCESS:"Sua conta foi migrada! Voc\xea podera fazer o login usando a sua senha da Envato.",TEXT_LOGIN_ERROR:"N\xe3o foi poss\xedvel completar o seu login. Por favor tente novamente mais tarde.",TEXT_INVALID_CREDENTIALS:"Senha ou e-mail inv\xe1lidos. Voc\xea pode usar o seu e-mail da Envato para fazer login.",TEXT_ENVATO_PASSWORD:"Senha da sua conta Envato",TEXT_INVALID_TFA:"C\xf3digo TFA inv\xe1lido, confira e tente de novo.",TEXT_VERIFICATION_REQUIRED:"Parece que h\xe1 uma tentativa de login anormal. Enviamos o c\xf3digo de verifica\xe7\xe3o por e-mail. Copie e cole o c\xf3digo no campo de verifica\xe7\xf5a abaixo.",TEXT_WRONG_PASSWORD:'Senha errada! Confira que voc\xea inseriu a <strong>sua senha da Envato</strong>, n\xe3o a do Placeit. <a href="https://account.envato.com/reset_password" target="_blank">Voc\xea pode redefinir a sua senha aqui.</a>',
html:'<div id="sso_login_modal"><div class="header hidden" id="confirm_placeit_password_header"><h4>Confirme sua conta do Placeit!</h4><p class="text-center">Coloque a sua senha para atualizar a sua conta e permitir o in\xedcio de sess\xe3o com o seu login da Envato a partir de agora.</p></div><div class="header" id="envato_account_header" hidden><h4>Conta Envato encontrada!</h4><p class="text-center">Insira a <span class="warning">sua senha da Envato (n\xe3o do Placeit)</span> compat\xedvel com o usu\xe1rio abaixo, para migrar a sua conta do Placeit e ser acess\xedvel com os seus dados da Envato.</p></div><div class="header" id="updating_account_header" hidden><h4>Atualizando a sua conta</h4><p class="text-center" style="font-size: 14px; font-family: \'SourceSansPro-Light\'; ">Mudamos a nossa Pol\xedtica de Privacidade e Termos de Uso. Estamos tamb\xe9m atualizando a sua conta para que possa entrar com a sua conta do Placeit nas propriedades da Envato. Selecione as caixas de verifica\xe7\xe3o abaixo e aceite para continuar.</p></div><div class="header hidden" id="login_continue_header"><h4>Fa\xe7a o login para continuar</h4></div><div class="content"><form id="login_form"><div class="fields_container"><div class="floating-label-input email" id="email_field_container"><input autocomplete="off" class="form-control" id="login_user_email" required="required" size="30" type="text" /><label class="placeholder">E-mail</label></div><div class="floating-label-input password" id="password_field_container"><input autocomplete="off" class="form-control" id="login_user_password" required="required" type="password" /><label class="placeholder">Senha</label><div id="password_secret_eye" class="secret-eye eye-on"></div></div><div class="floating-label-input email hidden" id="associated_email_field_container"><input autocomplete="off" class="form-control" id="associated_email" size="30" type="text" readonly/><label class="placeholder">E-mail no Placeit</label></div><div class="floating-label-input password hidden" id="placeit_password_field_container"><input autocomplete="off" class="form-control" id="user_placeit_password" type="password" /><label class="placeholder">Senha do Placeit</label><div id="placeit_password_secret_eye" class="secret-eye eye-on"></div></div><div class="floating-label-input tfa hidden" id="tfa-container"><input autocomplete="off" class="form-control" id="two_factor_code" name="two_factor_code" size="30" type="password"/><label class="placeholder">C\xf3digo da TFA</label></div><div class="floating-label-input hidden" id="signin_verification-container"><input autocomplete="off" class="form-control" id="signin_verification" name="signin_verification" size="30" type="password"/><label class="placeholder">C\xf3digo de verifica\xe7\xe3o (confira o seu e-mail)</label></div><div class="row"><div id="recaptcha_container" class="g-recaptcha col-xs-12" hidden></div></div><div id="privacy_policy_container" class="" hidden><p class="help-block text-left"><input type="checkbox" id="privacy_policy_alert"> <span class="agree" style="cursor: pointer">Concordo com a</span></input> <a href="https://envato.com/privacy/" target="_blank" role="button"> Pol\xedtica de Privacidade </a><br/><input type="checkbox" id="terms_conditions_alert"> <span class="terms_condition" style="cursor: pointer">Concordo com os</span></input> <a href="https://blog.placeit.net/terms-of-use/" target="_blank" role="button"> Termos de Uso </a></p></div><div id="migrate_account_hide"><div class="form-group text-right password-reset"><p class="help-block info-text"><a class="forgot" href="/password_resets/new" target="_blank">Esqueceu sua senha?</a></p></div><div class="row" id="login_btn_container"><div class="col-xs-12"><button class="button primary" name="commit" type="submit" value="Log in">Entrar</button></div></div><div class="row"><div class="col-xs-12"><p class="help-block text-center">N\xe3o tem uma conta? <a href="#" class="trigger_signup_link" role="button">Cadastre-se</a></p></div></div></div><div id="continue_btn" class="row" hidden><br/><div class="col-xs-12"><button class="button primary" name="commit" type="submit" value="Accept">Aceitar</button></div></div><div id="logged_in_notice" class="hidden"><div class="col-xs-12"><input id="logged_in_ok" class="button primary" name="commit" type="submit" value="Login as " /></div></div><div class="envato-notice text-center"><span class="placeit-envato-logo-black"></span></div></div></form></div></div>'},SubscriptionsPartial:{html:'            <div>                <div class="subscriptions-wrapper">                    <div class="label-wrapper">                        <div class="label-text"></div>                    </div>                    <div class="header">                        <div class="title"></div>                        <div class="subtitle"></div>                    </div>                    <div class="content-wrapper">                        <div class="categories"></div>                        <div class="carousel-wrapper"></div>                    </div>                    <div class="footer">                        <div class="period-wrapper">                            <div class="period-container plan-monthly">                                <div class="period-label">MENSAL<strong class="percent-discount discount"></strong></div>                                <button class="period" data-period="monthly">                                    <span class="price original-price"></span>                                    <span class="price final-price"></span>                                    <span class="price-label">/ M\xeas</span>                                </button>                            </div>                            <div class="period-container plan-annual">                                <div class="period-label">ANUAL<strong class="percent-discount discount"></strong></div>                                <button class="period" data-period="annual">                                    <span class="price original-price"></span>                                    <span class="price final-price">R$99.95</span>                                    <span class="price-label"> / Ano</span>                                    <small>Apenas <span class="annual-monthly-amount">R$8.33</span> / M\xeas, <strong class="annual-percent-discount">Economize <span class="annual-save">58</span>%</strong></small>                                </button>                            </div>                        </div>                        <div class="subscription-cta-container minimal"></div>                    </div>                </div>                <div class="disclaimer">                    <div class="coupon-disclaimer"></div>                    <span><strong>*Cancelar a qualquer momento.</strong> Todos os pre\xe7os s\xe3o cobrados anualmente em {{currency_label}}.</span>                    <span style="font-size: 10px">Compromisso m\xednimo de 1 m\xeas se os assinantes tiverem baixado algum modelo.</span>                </div>            </div>',TEXT_TITLE:"Assine o Plano Ilimitado!",TEXT_SUBTITLE:"Tenha acesso a todos os nossos Templates!",TEXT_SUBSCRIPTION_ACTIVATION_ERROR:"N\xe3o foi poss\xedvel ativar a sua assinatura, tente novamente mais tarde",TEXT_INVALID_OR_CANCELED_SUBSCRIPTION:"Assinatura inv\xe1lida ou cancelada",TEXT_ERROR_CHARGING_STORE_CARD:"Houve um erro no pagamento com seu cart\xe3o de cr\xe9dito cadastrado. Por favor, tente outra op\xe7\xe3o de pagamento.",TEXT_SUBSCRIPTION_SUCCESS:"A sua assinatura foi ativadda.",TEXT_TAX_MESSAGE_NOT_INCLUDED:"As taxas aplic\xe1veis n\xe3o est\xe3o inclusas nos valores.",TEXT_TAX_MESSAGE_INCLUDED:"{{amount}} adicional por {{taxType}}. Todos os pre\xe7os est\xe3o em {{currency_label}}",TEXT_TAX_MESSAGE_VAT_EXEMPT:"Isento de IVA. Todos os pre\xe7os est\xe3o em {{currency_label}}.",TEXT_CATEGORIES:[{id:"mockups",title:"Mockups",subtitle:"Ilimitados",features:[{content:"Voc\xea adquire os mesmos recursos que levaria se comprasse um de cada vez mas <br /> <strong>com Acesso ilimitado aos Mockups, Designs, V\xeddeos e Logos</strong>"},{content:"O maior cat\xe1logo no mundo com mais de {{mockupsStagesCount}} templates!"},{content:"Crie mockups perfeitos de forma r\xe1pida e f\xe1cil. \xc9 s\xf3 adicionar a sua imagem!"},{content:"Crie mockups para v\xeddeos incr\xedveis direto do seu navegador"}]},{id:"designs",title:"Designs",subtitle:"Ilimitados",features:[{content:"Voc\xea adquire os mesmos recursos que levaria se comprasse um de cada vez mas <br /> <strong>com Acesso ilimitado aos Mockups, Designs, V\xeddeos e Logos</strong>"},{content:"Escolha o seu template entre os mais de 5,700 designs maravilhosos"},{content:"Os templates s\xe3o f\xe1ceis de editar e voc\xea cria designs profissionais!"},{content:"Fa\xe7a o download de todos os tamanhos com apenas um clique!"}]},{id:"videos",title:"Videos",subtitle:"Ilimitados",features:[{content:"Voc\xea adquire os mesmos recursos que levaria se comprasse um de cada vez mas <br /> <strong>com Acesso ilimitado aos Mockups, Designs, V\xeddeos e Logos</strong>"},{content:"Centenas de templates para fazer v\xeddeos incr\xedveis"},{content:"Fazer um v\xeddeo nunca foi t\xe3o simples!"},{content:"S\xe3o mais de 1000 m\xfasicas para escolher gratuitamente!"},{content:"Fa\xe7a da sua apresenta\xe7\xe3o de slides algo incr\xedvel"}]},{id:"logos",title:"Logos",subtitle:"Ilimitados",features:[{content:"Obtenha acesso ilimitado a <strong>Todos os nossos Templates!</strong>"},{content:"<div>Escolha entre os mais de <strong>4,600+</strong> templates para customizar a sua logo</div>"},{content:"Crie a logo da sua empresa em alguns cliques!"},{content:"Baixe o seu logo vetorizado em arquivo PDF"}]}]},Purchases:{html:'            <div class="purchases" id="downloadOverlay" tabindex="-1" >                <div id="subscription-paused" style="display:none">                    <span class="info-close">                         <span>\xd7</span>                     </span>                     <p class="pause-title ">A sua assinatura foi interrompida</p>                    <p class="pause-note ">Ser\xe1 reativada automaticamente em {{pause_date}}</p>                    <p class="pause-note ">Se voc\xea precisar ativar hoje, entre em <a href="mailto:support@placeit.net" target="_blank">contato conosco</a></p>                </div>                <div id="subscription-past-due" style="display:none">                    <span class="info-close">                         <span>\xd7</span>                     </span>                     <p class="pause-title ">A sua conta est\xe1 vencida</p>                    <p class="pause-note ">N\xe3o ser\xe1 poss\xedvel fazer downloads gratuitos at\xe9 recebermos a atualiza\xe7\xe3o do seu pagamento.                     <a href="#" class="handle-fix-cta">Clique para atualizar</a></p>                </div>                <div class="purchases-content">                    <div class="purchases-header">                        <div class="purchase-header__discount-label">                             <span class="purchase-header__discount-amount">30% OFF</span>                         </div>                         <h5 class="purchase-header__title">1. Compre um \xfanico <span class="purchases__category-name"></span></h5>                        <h2 class="purchase-header__subtitle">Escolha apenas este <span class="purchases__category-name"></span></h2>                     </div>                    <div class="purchases-body">                        <div class="tab-content download-tabs__content">                        <div class="tab-pane active" id="normalDownload">                            <form class="form purchase-options-form" role="form" id="normalDownload">                            <div class="resolutions-container">                             <div class="row download-overlay__image-size resolution-options is_video_product">                                <div class="purchases__video-wrapper purchases__video-wrapper--paused">                                     <div class="purchases__video-play-button"></div>                                     <video muted playsinline></video>                                 </div>                             </div>                            <div class="row download-overlay__image-size resolution-options is_smart_template">                            </div>                            <p class="purchase-body__content-description">                                 <strong>{{res_watermarked}}</strong>, Alta resolu\xe7\xe3o {{res_title}} (<span class="res_dimensions"></span>).<br />Para uso comercial!                             </p>                             </div>                             <div class="button-container">                                <button class="button button--not-subscribed primary long purchase-price" type="submit">                                <span class="price-description">Compre <span class="only-highlight-underline">APENAS</span> Este <span class="purchases__category-name"></span> por                                     <span class="purchase-header__price purchase-header__price--original"></span>                                     <span class="purchase-header__price purchase-header__price--quantity"></span>                                 </span>                                <span class="price-free">                                </span>                                </button>                            </div>                            <p class="purchases__low-res-download">Ou <a>Obtenha o v\xeddeo gr\xe1tis com baixa resolu\xe7\xe3o e marca d\u2019\xe1gua.</a></p>                             </form>                        </div>                        <div class="coupon-field-container"></div>                        </div>                    </div>                </div>                <div class="widget-outer">                    <div class="disclaimer-wrapper">                        As taxas aplic\xe1veis n\xe3o est\xe3o inclusas nos valores.                    </div>                </div>            </div>',resItemTemplate:'            <div class="download-overlay__image-size-item">                <label>                    <input data-allowed-licenses="{{allowed_licenses}}" data-key="{{res_key}}" id="{{radio_id}}" name="resolution" type="radio" value="{{res_id}}" />                    <p class="overlay--radio-title">{{res_title}}</p>                    <p class="overlay--radio-desc res_dimensions">{{res_dimensions}}</p><br>                    <p class="overlay--radio-desc">{{res_watermarked}}</p>                    <p class="overlay--radio-desc ios_screenshot__purchase_disclaimer" style="display:none;">Quando voc\xea faz o upload das suas capturas de tela, a Apple oferece redimensionar as imagens de forma autom\xe1tica, para ajust\xe1-las ao tamanho da tela.</p>                    <b class="resolution-license-link-placeholder"></b>                </label>            </div>',taxAmountText:"{{amount}} adicional por {{taxType}}. Todos os pre\xe7os est\xe3o em {{currency_label}}",TEXT_VAT_EXEMPT_MESSAGE:"Isento de IVA. Todos os pre\xe7os est\xe3o em {{currency_label}}.",TEXT_FREE_DOWNLOAD_TITLE:"Fa\xe7a o Download gr\xe1tis",TEXT_DOWNLOAD_NOW:"Fa\xe7a o Download agora",TEXT_FREE_DOWNLOAD_CATEGORY_TITLE:'Fa\xe7a o Download gr\xe1tis <span class="purchases__category-name"></span>',TEXT_DOWNLOAD_CATEGORY_TITLE:"RECEBA A SUA {{categoryName}}!",TEXT_DISCOUNT_LABEL:"{{discount}} de desconto",TEXT_PAID_DOWNLOAD_CATEGORY_TITLE:'1. Compre um \xfanico <span class="purchases__category-name"></span>',TEXT_DISCLAIMER_DEFAULT:"As taxas aplic\xe1veis n\xe3o est\xe3o inclusas nos valores.",TEXT_PAID_DOWNLOAD_CATEGORY_SUBTITLE:'Escolha apenas este <span class="purchases__category-name"></span>'},PurchaseOverlay:{html:'            <div class="modal purchase-overlay fade br" id="purchaseOverlay" tabindex="-1" role="dialog" aria-labelledby="purchaseOverlayLabel" aria-hidden="true">            <button type="button" class="close m-close" data-dismiss="modal" aria-hidden="true">                <span aria-hidden="true">\xd7</span>            </button>            <div class="server_errors none mobile"></div>            <div class="modal-dialog">                <div class="server_errors none"></div>                <div class="modal-content">                <div class="modal-body">                    <div class="text-center modal-spinner" style="opacity:0.5;margin-top: 60px;">                      <img src="/assets/fade-spinner.gif">                    </div>                    <div class="form-container">                    <form class="recurly">                        <div class="subscription-info" style="display: none;"></div>                        <div class="payment_method multiple">                            <div class="payment_option saved_card_option selected">                                <input type="radio" name="payment_method">                                <label></label>                                <div class="card_logo"></div>                            </div>                            <div class="payment_option card_option">                                <input type="radio" name="payment_method" checked>                                <label></label>                                <div class="accepted_cards"><div class="card visa">Visa</div>                                <div class="card mastercard">MasterCard</div>                                <div class="card discover">Discover</div>                                <div class="card american_express">American Express</div>                                </div>                            </div>                            <div class="payment_option paypal_option">                                <input type="radio" name="payment_method">                                <label></label>                                <div class="logo"></div>                            </div>                        </div>                        <div class="saved-card-container">                            <span>Usar cart\xe3o salvo</span>                            <div class="saved-card-info">                                <div class="card"></div>                                <span>Terminando com ****</span>                                <div class="card-last-four"></div>                            </div>                        </div>                        <div class="form-widget-container"></div>                        <div class="paypal" style="display: none;">                            <div class="paypal_message">                            Voc\xea ser\xe1 redirecionado para o sistema do PayPal para autentica\xe7\xe3o e autoriza\xe7\xe3o do pagamento.<br><br>Pagamentos realizados com conta do PayPal de endere\xe7o registrado nos Estados Unidos ou na  Austr\xe1lia est\xe3o sujeitos \xe0s taxas correspondentes.<br><br><strong>\xc9 necess\xe1rio desbloquear pop-ups.</strong>                            </div>                        </div>                        <div class="footer">                            <button id="saved_card" type="submit" class="button primary">                                <span> Realizar pagamento </span>                            </button>                            <button id="credit_card" type="submit" class="button primary">                                <span> Realizar pagamento </span>                            </button>                            <button id="paypal" style="display: none;" type="button" class="button primary">                                <span> Realizar pagamento com PayPal </span>                            </button>                        </div>                    </form>                    </div>                    <div class="information-container">                        <p class="information-title">                        Resumo do pedido                        <span class="view-order-details">view order details</span>                        <span class="view-order-details opened">hide order details</span>                        <span class="view-order-total-items"></span>                        </p>                        <div class="information-general-info">                            <div class="thumbnails-list"></div>                            <p class="information-title"></p>                            <p class="information-title subtitle"></p>                        </div>                        <div class="subscriptionp-type-selector">                            <div class="plan-annual">                                <input type="radio" name="plan-annual">                                <label class="br"></label>                                <p>Anual (<span class="amount-price">R$10</span>/m\xeas<span class="disclaimer">*</span>) <br /><span class="label">Voc\xea economiza 50%</span></p>                            </div>                            <div class="plan-monthly">                                <input type="radio" name="plan-monthly">                                <label class="br"></label>                                <p>Mensal (<span class="amount-price">R$19.95</span>/m\xeas<span class="disclaimer">*</span>) <br /></p>                            </div>                        </div>                        <div class="information-amount-info">                            <div class="amount price-section">                                <p class="amount-text"></p>                                <div class="amount-container">                                    <p class="amount-price"></p>                                    <p class="disclaimer price"></p><p class="disclaimer">&nbsp;por m\xeas)</p>                                </div>                            </div>                            <div class="amount discount-section">                                <p class="amount-text"></p>                                <div class="amount-container">                                    <p class="amount-price"></p>                                    <p class="disclaimer price"></p><p class="disclaimer">&nbsp;por m\xeas)</p>                                </div>                            </div>                            <hr>                            <div class="amount subtotal-section">                                <p class="amount-text">Subtotal</p>                                <p class="amount-price">0</p>                            </div>                            <div class="amount vat-section">                                <p class="amount-text"></p>                                <div class="amount-container">                                    <p class="amount-price"></p>                                    <p class="disclaimer price"></p><p class="disclaimer">&nbsp;por m\xeas)</p>                                </div>                            </div>                            <div class="amount total-section">                                <div class="amount-container">                                    <p class="amount-text total"></p>                                    <p class="disclaimer"></p>                                </div>                                <div class="amount-container">                                    <p class="amount-price"></p>                                    <p class="disclaimer">(Faturado hoje)</p>                                </div>                            </div>                        </div>                        <div class="resume-info"></div>                        <div class="secure-info">                            <img src="/assets/icons/lock.svg">                            <div class="secure-info-disclaimer">                                <p class="secure-info-header">Pagamentos Seguros</p>                                <p>Todas as transa\xe7\xf5es s\xe3o processadas</p>                                <p>pela nossa tecnologia segura.</p>                            </div>                        </div>                    </div>                </div>                </div>            </div>            </div>        ',PURCHASE:{PRICE_LABEL:"Valor",TOTAL_LABEL:"Total"},SUBSCRIPTION:{TITLE:"Plano Ilimitado",SUBTITLE:"Essa assinatura inclui o acesso a downloads ilimitados de templates de mockup, design, logo e v\xeddeo.",PRICE_LABEL_ANNUALY:"Anual",PRICE_LABEL_MONTHLY:"Mensal",TOTAL_LABEL:"Total Mensal",TOTAL_ANNUAL_LABEL:"Total Anual",TOTAL_WITH_MONTH:"(Primeiro{{period}} m\xeas)",RESUME_RENEW_TEXT:"Assinatura ilimitada \xe9 renovada mensalmente em {{currency_label}}.",RESUME_RENEW_TEXT_ANNUAL:"Assinatura ilimitada \xe9 renovada anualmente em {{currency_label}}.",RESUME_CANCEL_TEXT:"*Pode cancelar a sua assinatura a qualquer momento e continuar tendo acesso at\xe9 o final do seu ciclo de cobran\xe7a e evitar cobran\xe7as adicionais.",RESUME_DISCOUNT_TEXT:"O desconto \xe9 v\xe1lido para o seu primeiro {{period}} m\xeas.",RESUME_DISCOUNT_TEXT_ANNUAL:"O desconto \xe9 v\xe1lido para o seu primeiro {{period}} ano.",RESUME_BILLING_TEXT:"O valor cobrado pela assinatura ser\xe1 de {{amount}} a partir de {{date}}.",FORM_BUTTON_LABEL:"Assinar Plano",PAYPAL_BUTTON_LABEL:"Realizar pagamento com PayPal",MINIMUM_TIME:"Fidelidade m\xednima de 1 m\xeas caso seja baixado algum template.",UNUSED_SUBSCRIPTION:"",UNUSED_SUBSCRIPTION_ANNUAL:"As fun\xe7\xf5es n\xe3o utilizadas de sua assinatura s\xe3o reembols\xe1veis."},CURRENCY:"Pre\xe7os em {{currency_label}}.",SUBSCRIPTION_TOTAL_DISCOUNT_LABEL:"Total Primeiro M\xeas",DISCOUNT_LABEL:"Desconto de -{{discount}}",VAT_LABEL:"IVA: {{vat}}%",RESUME_USD_TEXT:"Todos os valores est\xe3o em {{currency_label}}.",TEXT_SERVER_PAUSED_MESSAGE:' Entre em <a href="mailto:support@placeit.net">contato conosco</a> para reativar a sua assinatura',BILLING_VAT_TEXT:"({{totalAmount}} Assinatura + {{vatAmount}} IVA)"},BillingForm:{html:'<div class="widget billing-form variant">            <form class="recurly billing_form">            <div class="contact_info">                <div class="title">Contato para faturamento</div>                <div class="floating-label-input name">                <label class="">Nome<i class="field-dot-required">*</i></label>                <input id="recurly-first-name" data-recurly="first_name" required>                </div>                <div class="floating-label-input last-name">                <label class="">Sobrenome<i class="field-dot-required">*</i></label>                <input id="recurly-last-name" data-recurly="last_name" required>                </div>                <div class="floating-label-input business-name">                <label class="">Nome da empresa</label>                <input id="recurly-company" data-recurly="company">                </div>                <div class="floating-label-input email">                <label class="">E-mail</label>                <input type="email" class="form-control" id="recurly-email" required>                </div>            </div>            <div class="billing_info">                <div class="title">Informa\xe7\xe3o sobre faturamento </div>                <div class="floating-label-input card-number">                    <label class="">N\xfamero do cart\xe3o<i class="field-dot-required">*</i></label>                    <div id="recurly-number" class="card_number" data-recurly="number"></div>                </div>                <div class="floating-label-input month">                    <label class="">M\xeas de validade<i class="field-dot-required">*</i></label>                    <div id="recurly-month" data-recurly="month"></div>                </div>                <div class="floating-label-input year">                    <label class="">Ano de validade<i class="field-dot-required">*</i></label>                    <div id="recurly-year" data-recurly="year"></div>                </div>                <div class="floating-label-input cvv">                    <label class="">C\xf3digo de seguran\xe7a<i class="field-dot-required">*</i></label>                    <div id="recurly-cvv" class="card_number" data-recurly="cvv"></div>                </div>                <div class="floating-label-input country brazil-country">                    <label class="">Pa\xeds</label>                    <input class="recurly-country" autocomplete="nope">                    <input type="hidden" class="recurly-country_code" data-recurly="country" />                </div>                <div class="floating-label-input zip">                    <label class="">CEP<i class="field-dot-required">*</i></label>                    <input id="recurly-postal-code" data-recurly="postal_code">                </div>                <div class="floating-label-input vat">                    <label>Numero de IVA (opcional)</label>                    <input id="recurly-vat-number" data-recurly="vat_number" maxlength="20">                </div>            </form>            </div>',TEXT_FIELD_ERROR:"Erro",TEXT_FIELD_REQUIRED:"Exigido"},LogoPurchaseModal:{IMAGE_YOUR_BRAND_PATH:"/assets/your-brand-pt.svg",html:'            <div class="purchases logo-purchases" id="downloadOverlay" tabindex="-1" >                <div class="purchases-content">                    <div class="purchases-header">                        <div class="purchase-header__discount-label">                             <span class="purchase-header__discount-amount">30% OFF</span>                         </div>                         <h5 class="purchase-header__title">1. Compre um \xfanico Logo </h5>                        <h2 class="purchase-header__subtitle">Escolha apenas este Logo</h2>                     </div>                    <div class="purchases-body">                        <div class="tab-content download-tabs__content">                            <div class="tab-pane active" id="normalDownload">                                <form class="form purchase-options-form" role="form" id="normalDownload">                                    <div class="resolutions-container">                                         <div class="row download-overlay__image-size resolution-options is_smart_template">                                        </div>                                        <p class="purchase-body__content-description">                                             <strong>Sem marca d\u2019\xe1gua</strong>, Alta resolu\xe7\xe3o PNG (4000x4800px).<br />Para uso comercial!                                         </p>                                     </div>                                     <div class="button-container">                                        <button class="button button--not-subscribed primary long purchase-price" type="submit">                                            <span class="price-description">Compre APENAS Este Logo por                                                 <span class="purchase-header__price purchase-header__price--original"></span>                                                 <span class="purchase-header__price purchase-header__price--quantity"></span>                                             </span>                                        </button>                                    </div>                                </form>                            </div>                            <div class="coupon-field-container"></div>                        </div>                    </div>                </div>                <div class="widget-outer">                    <div class="disclaimer-wrapper">                        As taxas aplic\xe1veis n\xe3o est\xe3o inclusas nos valores.                    </div>                </div>            </div>'},PayPalModal:{
html:'            <div class="modal paypal-modal fade" id="paypalModal" data-keyboard="false" role="dialog" aria-labelledby="modal-title" aria-hidden="true">                <div class="modal-dialog">                    <div class="modal-content">                        <div class="modal-header grayed">                            <h4 id="modal-title">Por favor aguarde...</h4>                        </div>                        <div class="modal-body">                            <div class="text-center content">                            <h3> Completar pagamento no PayPal </h3>                            <p> N\xe3o <b><u>not</b></u> fechar esta janela. Se der algum erro, <a id="retry"> clique aqui para reiniciar o processo </a>. </p>                            </div>                            <div class="text-center spinner">                            <img src="/assets/paypal_loader.gif">                            </div>                        </div>                    </div>                </div>            </div>'},SinglePurchasesModal:{html:'            <div class="modal single-purchase-overlay" tabindex="-1" role="dialog" aria-labelledby="downloadOverlayLabel" aria-hidden="true">                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">                    <span aria-hidden="true">\xd7</span>                </button>                <div class="animation-info">2 Op\xe7\xf5es de Compra!</div>                 <div class="modal-dialog">                    <div class="modal-content">                        <div class="modal-body">                            <div class="area1" data-area="left"></div>                            <div class="or-div">OU</div>                            <div class="area2" data-area="right"></div>                        </div>                    </div>                </div>            </div>',TEXT_SUBSCRIPTIONS_PARTIAL_TITLE:"2. Assine o Plano Ilimitado!"},PricingButton:{TEXT_PRICING:"Pre\xe7os",TEXT_UPGRADE_ANNUAL:"Economize {{annualDiscountPercentage}}%"},GoAnnualModal:{modalViews:{"default":'                <svg class="subscription-icon" xmlns="http://www.w3.org/2000/svg" width="29" height="26" fill="none"><g filter="url(#filter0_d)"><path fill="url(#paint0_linear)" d="M5.3 21.3c0-.5.5-1 1-1h16.4c.5 0 1 .5 1 1v1.4c0 .5-.5 1-1 1H6.3a1 1 0 01-1-1v-1.4z"/><path fill="url(#paint1_linear)" d="M26.5 6.6a1.2 1.2 0 00-1.3 0l-5.7 3.8-4-7.8a1.1 1.1 0 00-1-.6 1.1 1.1 0 00-1 .6l-4 7.8-5.7-3.8a1.2 1.2 0 00-1.3 0l-.4.5v.7l2.2 10c0 .2.2.5.4.6.2.2.5.3.7.3h18.2c.2 0 .5-.1.7-.3.2-.1.3-.4.4-.6l2.3-10a1.1 1.1 0 00-.5-1.2z"/></g><defs><linearGradient id="paint0_linear" x1="5.3" x2="23.7" y1="22" y2="22" gradientUnits="userSpaceOnUse"><stop stop-color="#501AA8"/><stop offset="1" stop-color="#870DE8"/></linearGradient><linearGradient id="paint1_linear" x1="2" x2="27" y1="10.3" y2="10.3" gradientUnits="userSpaceOnUse"><stop stop-color="#501AA8"/><stop offset="1" stop-color="#870DE8"/></linearGradient><filter id="filter0_d" width="29" height="25.7" x="0" y="0" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/><feOffset/><feGaussianBlur stdDeviation="1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow"/><feBlend in="SourceGraphic" in2="effect1_dropShadow" result="shape"/></filter></defs></svg>                <span class="modal-title">Fa\xe7a upgrade</span>                <span class="savings-title">Economize <span class="savings"></span>%!</span>                <span class="pricing"><span class="annual-price"></span>/Ano (Apenas <span class="annual-price-month"></span>/M\xeas)</span>                <span class="message">Voc\xea agora paga <span class="monthly-price"></span>/M\xeas</span>                <button id="goAnnual">Assine o Plano Anual!</button>                <span class="footnote">Os cup\xf5es n\xe3o s\xe3o transfer\xedveis.<br>Todos os cup\xf5es ser\xe3o cancelados ap\xf3s a mudan\xe7a para o novo plano.</span>            '}},SubscriptionPlanChangeModal:{html:'            <div class="modal subscription-plan-change-modal" tabindex="-1" role="dialog" aria-labelledby="downloadOverlayLabel" aria-hidden="true">                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">                    <span aria-hidden="true">\xd7</span>                </button>                <div class="modal-dialog">                    <div class="modal-content">                    <div class="modal-body">                        <div class="plans-switch">                        <h1>Change your plan</h1>                        <p class="subtitle">Our Plans include unlimited downloads on mockups, designs, logos, and videos.</p>                        <ul class="plan-list">                            <li class="disabled" data-plan="monthly"><p>Monthly <br> <span id="cp-monthly-price"></span></p></li>                            <li class="disabled" data-plan="annual"><p>Yearly <br> <span id="cp-annual-price"></span><br><span>You save <span id="cp-annual-save"></span>%!</span></p></li>                        </ul>                        <button class="button primary change_plan btn-block">Change Plan</button>                        <p class="selected-plan-billing-info"></p>                        <p class="coupon-info">Coupons are non-transferable, any existing coupons will be cancelled after changing to a new plan.</p>                        </div>                        <div class="plans-confirmation">                        <p class="confirmation-text">Voc\xea est\xe1 prestes a mudar para um <br><strong>Plano de Assinatura <span class="plan-label"></span></strong>, continuar?</p>                        <button type="button" class="button secondary change-plan-cancel" data-dismiss="modal">Cancelar</button>                        <button type="button" class="button primary confirm-change-plan">Sim, continuar</button>                        </div>                    </div>                    </div>                </div>            </div>',BILLING_INFO:{annualLabel:"Anual",monthlyLabel:"Mensal"}},CelebrationModal:{TEXTS:{monthly:{title:"Parab\xe9ns!",subtitle:"Agora voc\xea \xe9 assinante!",footnote:'<span><b>Economize <span class="savings"></span>%</b> com a nossa assinatura anual!<button id="goAnnual" class="btn">Assine o Plano Anual!</button></span>'},annual:{title:"Parab\xe9ns!",subtitle:"Agora voc\xea \xe9 assinante anual!",footnote:'<span class="small">Se preferir voltar \xe0 sua assinatura mensal,<br> v\xe1 para a p\xe1gina da sua conta.</span>'}}},EnvatoUsername:{USERTYPE_LABELS:{unlimited:'<svg><use xlink:href="#subscription_icon"></use></svg><span class="subscribed">Acesso ilimitado</span>'}},CTABlockSection:{TEXT_TAX_MESSAGE_NOT_INCLUDED:"As taxas aplic\xe1veis n\xe3o est\xe3o inclusas nos valores.",TEXT_TAX_MESSAGE_INCLUDED:"{{amount}} adicional por {{taxType}}. Todos os pre\xe7os est\xe3o em {{currency_label}}",TEXT_TAX_MESSAGE_VAT_EXEMPT:"Isento de IVA. Todos os pre\xe7os est\xe3o em {{currency_label}}."},UnusualActivityModal:{TITLE:"Detectamos actividade n\xe3osual na sua conta",BODY:"Para proteger a sua conta na Placeit, assin\xe1mos a sua sa\xedda de todas as suas sess\xf5es. Verifique o seu e-mail e siga as instru\xe7\xf5es.<br><br>Se n\xe3o recebeu o e-mail, verifique a sua caixa de entrada de spam."},PricingPageVariantCD:{BENEFITS_FOOTER_TEXT:"<strong>*Cancelar a qualquer momento.</strong> Todos os pre\xe7os s\xe3o cobrados anualmente em {{currency_label}}.",FAQ_ANSWER_2_TEXT:'<p> Voc\xea sempre pode comprar por item, mas recomendamos totalmente nossa assinatura. </p> <p> Por R${{monthly_price}} {{currency_label}} por m\xeas* ou R${{annual_price}} {{currency_label}} por ano*, voc\xea ter\xe1 acesso a todos os  <span style="color: #9c19e0" ><a href="https://br.placeit.net/c/mockups" rel="noopener" style="color: #9c19e0" target="_blank" >mockups</a >, <a href="https://placeit.net/c/design-templates" rel="noopener" style="color: #9c19e0" target="_blank" >modelos de design</a >, </span ><a href="https://br.placeit.net/video-maker" rel="noopener" target="_blank" ><span style="color: #007ee4" ><span style="color: #9c19e0">v\xeddeos</span></span ></a > e <a href="https://br.placeit.net/logo-maker" ><span style="color: #9c19e0">logotipos</span></a >. da Placeit. </p> <p> Inclu\xedmos nossa <span style="color: #9c19e0" ><a href="https://br.placeit.net/#license" rel="noopener" style="color: #9c19e0" target="_blank" >licen\xe7a comercial</a ></span > para todas as compras! </p> <p style="font-size: 0.8em">*Impostos aplic\xe1veis n\xe3o inclu\xeddos</p>'},SubscriptionCtaBlockController:{TITLE:"Assinatura Ilimitada",SUBTITLE:"Baixadas ilimitadas",FROM:"Desde:",PER_MONTH:"/m\xeas",CTA_TEXT:"Comece agora",CTA_TEXT_UNLIMITED:"V\xe1 Ilimitado",MONTHLY_TITLE:"Assinatura Mensal",DISCOUNT_SUBTITLE:"Desconto por tempo limitado",YEARLY:"anualmente",MONTHLY:"mensalmente",MONTHLY_CANCEL_FOOTER:"<strong><span style='font-size: 0.8em'>*</span>Cancelar a qualquer momento.</strong> Todos os pre\xe7os s\xe3o cobrados mensalmente em {{currency_label}}.        <p style='font-size: 8.5px'>Compromisso m\xednimo de 1 m\xeas se os assinantes tiverem baixado algum template.</p>",ANNUAL_CANCEL_FOOTER:"<strong><span style='font-size: 0.8em'>*</span>Cancelar a qualquer momento.</strong> Todos os pre\xe7os s\xe3o cobrados anualmente em {{currency_label}}.        <p style='font-size: 8.5px'>Compromisso m\xednimo de 1 m\xeas se os assinantes tiverem baixado algum template.</p>"},HeaderstripController:{HS_TEXT:"\xd3timo logotipo. \xd3timo <span class='now-at'>pre\xe7o. Agora por\xa0{price}</span>",HS_CTA_TEXT:"Criar Logotipo"}},Module("Translator")({ALLOWED_LOCALE:"BR",prototype:{_translate:function _translate(){var e=new Thulium({template:this.constructor.html||""}).parseSync().renderSync(I18nUtils.getContext(this.constructor.templateContext));$.extend(!0,this.constructor,{html:e}),!1===window.is_i18n_exp&&this._legacyTranslate()},_legacyTranslate:function _legacyTranslate(){var e,t,i;e=this,t=window.TRANSLATIONS[e.constructor.className],i=window._pl_locale,"undefined"!==t&&i===e.constructor.ALLOWED_LOCALE&&(console.log("Translate: "+e.constructor.className),$.extend(!0,e.constructor,t))}}}),Module("CurrencyLabelSetter")({KEYS_TO_EXCLUDE_FROM_SETTING_CURRENCY:["__includedModules","__descendants","__implementedInterfaces","elementSource","moduleName","include","KEYS_TO_EXCLUDE_FROM_SETTING_CURRENCY","ALLOWED_VALUES_TYPES_TO_SET_CURRENCY"],ALLOWED_VALUES_TYPES_TO_SET_CURRENCY:["string","object"],_isValidPropertyToSetCurrency:function _isValidPropertyToSetCurrency(e,t){return!0!==this.KEYS_TO_EXCLUDE_FROM_SETTING_CURRENCY.includes(e)&&(!1!==this.ALLOWED_VALUES_TYPES_TO_SET_CURRENCY.includes(typeof t)&&null!==t)},prototype:{_setCurrencyLabel:function _setCurrencyLabel(){var i=this,n=this.constructor,s=currencyHelper.getLabel(recurlyConfig.currency);Object.keys(n).forEach(function(e){var t=n[e];!1!==i.constructor._isValidPropertyToSetCurrency(e,t)&&("object"==typeof t?(t=(t=JSON.stringify(t)).replaceAll("{{currency_label}}",s),t=JSON.parse(t),n[e]=t):n[e]=t.replaceAll("{{currency_label}}",s))})}}}),Module("ThemeSupport")({themeStrategy:{free:"setFreeTheme",paid:"setPaidTheme",admin:"setAdminTheme",subscribed:"setSubscribedTheme"},FREE:"free",PAID:"paid",ADMIN:"admin",SUBSCRIBED:"subscribed",prototype:{setTheme:function setTheme(e){var t=ThemeSupport.themeStrategy[e];if(t===undefined)throw new Error(e+" is not a valid theme");ThemeSupport.currentTheme=e,this[t]()},setFreeTheme:function setFreeTheme(){Helpers.GlobalEventTracker.noticeError("Theme method called but not implemented in class",{theme:"Free","class":this.constructor.className})},setPaidTheme:function setPaidTheme(){Helpers.GlobalEventTracker.noticeError("Theme method called but not implemented in class",{theme:"Paid","class":this.constructor.className})},setAdminTheme:function setAdminTheme(){Helpers.GlobalEventTracker.noticeError("Theme method called but not implemented in class",{theme:"Admin","class":this.constructor.className})},setSubscribedTheme:function setSubscribedTheme(){Helpers.GlobalEventTracker.noticeError("Theme method called but not implemented in class",{theme:"Subscribed","class":this.constructor.className})}}}),window.performance=window.performance||{},performance.now=performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow||Li={Engine:{before:[],error:[],after:[]},stack:[],events:[],network:[],previousError:[],performance:[],nest:0},Class(Li,"ObjectSpy")({prototype:{spies:null,init:spy:function(n,s){s=s||{},Object.getOwnPropertyNames(n).forEach(function(e){var t;try{if("function"!=typeof n[e])return!1}catch(i){return!1}s.except&&-1<s.except.indexOf(e)||((t=new Li.Spy).on(n).method(e),this.spies.push(t))},this)},destroy:}),Class(Li,"Spy")({prototype:{targetObject:null,methodName:null,spyMethod:null,originalMethod:null,objectHasMethod:null,called:null,init:function(e){e=e||{},this.called=[],this.targetObject=e.targetObject,this.methodName=e.methodName},applySpy:function(){var d;return!1===(d=this).targetObject.hasOwnProperty(this.methodName)?this.objectHasMethod=!1:this.objectHasMethod=!0,this.originalMethod=this.targetObject[this.methodName],this.targetObject[this.methodName]=function(){var e,t,i,n,s,r,a,o,l,c;for(i=this,e=Array.prototype.slice.call(arguments,0,arguments.length),n=Li.Engine.before,s=Li.Engine.error,r=Li.Engine.after,this===d&&(i=d.targetObject),a=0;a<n.length;a++)n[a]({scope:i,args:e,spy:d});try{o=performance.now(),t=d.originalMethod.apply(i,e),l=performance.now()}catch(u){if(!(0<s.length))throw u;for(a=0;a<s.length;a++)s[a]({scope:i,args:e,spy:d,error:u})}finally{for(l&&(c=l-o),a=0;a<r.length;a++)r[a]({scope:i,args:e,spy:d,time:c});return t}},this.targetObject[this.methodName].__isSpy=!0,this.targetObject[this.methodName].__spy=this.spy,Object.getOwnPropertyNames(this.originalMethod).forEach(function(e){d.targetObject[d.methodName][e]=d.originalMethod[e]}),this},removeSpy:function(){return!0===this.objectHasMethod?this.targetObject[this.methodName]=this.originalMethod:delete this.targetObject[this.methodName],this},on:function(e){return this.targetObject=e,this},method:}),Li.Engine.before.push(function(e){var t;try{t=window.parent.Li?window.parent:window}catch(i){t=window}t.Li.performance.push({message:"executing: "+(e.spy.targetObject.className||e.scope.constructor.className)+"."+e.spy.methodName,nesting:t.Li.nest,startTime:t.performance.now()}),t.Li.nest++}),Li.Engine.error.push(function(e){var t;try{t=window.parent.Li?window.parent:window}catch(i){t=window}t.Li.nest--,console.error("error detected: "+(e.spy.targetObject.className||e.scope.constructor.className)+"."+e.spy.methodName),console.error(e.error.message),console.error(e.error.stack)}),Li.Engine.after.push(function(e){var t;try{t=window.parent.Li?window.parent:window}catch(i){t=window}t.Li.nest--,t.Li.performance.push({message:"executed: "+(e.spy.targetObject.className||e.scope.constructor.className)+"."+e.spy.methodName,time:e.time,nesting:t.Li.nest})}),window.enableLi=("production"===window.environment||"staging"===window.environment)&&"getOwnPropertyNames"in Object,function(e){var t,i;if("function"==typeof require){var n=require("neon");t=n.Module,i=n.Class;var s=require("microtime")}else t=e.Module,i=e.Class;var r={};t(r,"Logger")({}),t(r,"Formatter")({}),"function"==typeof require&&(r.Formatter.Token=require("./formatters/token.js").Token,r.Logger.JsConsole=require("./loggers/console.js").JsConsole,r.Logger.Socket=require("./loggers/socket.js").Socket),r.now=function(){return"undefined"!=typeof performance&&performance.timing?performance.timing.navigationStart+performance.now():void 0!==s?1e3*s.nowDouble():Date.now()},r.stringify=function(e){var t,i=[];return t=JSON.stringify(e,function(e,t){if("object"==typeof t&&null!==t){if(-1!==i.indexOf(t))return"[Circular]";i.push(t)}return t}),i=null,t},r.Console=i(r,"Console")({prototype:{from:"Generic Cobalt Logger",version:"0.1.0",currentIndent:0,indentSize:2,loggers:[],separatorLength:120,currentColor:"black",init:function(e){var t,i=this;if(e)for(t in e)i[t]=e[t]},addLogger:function(e){this.loggers.push(e)},removeLogger:function(e){var t;t=this.loggers.indexOf(e),this.loggers.splice(t,1)},buildLog:function(e,t){var i=this,n={};return null!=e&&e._cobaltLog?e:(n.message=e,n._cobaltLog=!0,n._from=i.from,n._level=t||6,n._levelString=i._levelString(n._level),n._version=i.version,n._timestamp=i.now(),n._indentLevel=i.currentIndent,n._color=i.currentColor,n._separator=!1,n)},extendLog:function(e){var t,i,n=this;for(i in t=n.buildLog(undefined,6),e=e||{})e.hasOwnProperty(i)&&(t[i]=e[i]);return t},buildSeparator:function(e){var t=this;return{_cobaltLog:!0,_separator:!0,_version:t.version,_timestamp:t.now(),_separatorType:e,_indentLevel:t.currentIndent,_color:t.currentColor}},_log:function(e){var t,i,n=this,s=[];for(t=1;t<arguments.length;t++)"undefined"==typeof arguments[t]?s.push(n.buildLog("undefined",e)):s.push(n.buildLog(arguments[t],e));for(i=0;i<n.loggers.length;i++)n.loggers[i].log.apply(n.loggers[i],s)},log:function(){this._log.apply(this,[6].concat(Array.prototype.slice.call(arguments)))},debug:function(){this._log.apply(this,[7].concat(Array.prototype.slice.call(arguments)))},info:function(){this._log.apply(this,[6].concat(Array.prototype.slice.call(arguments)))},notice:function(){this._log.apply(this,[5].concat(Array.prototype.slice.call(arguments)))},warn:function(){this._log.apply(this,[4].concat(Array.prototype.slice.call(arguments)))},error:dir:function(){},time:function(){},timeEnd:function(){},groupCollapsed:function(){},groupEnd:function(){},separator:function(e){var t=this;t._log(7,t.buildSeparator(e))},space:function(e){var t,i=this;for(void 0===e&&(e=1),t=0;t<e;t++)i.log(" ");return i},indent:function(e){var t=this;return"function"==typeof e?(t.currentIndent=t.currentIndent+t.indentSize,e(),t.currentIndent=t.currentIndent-t.indentSize):t.currentIndent=t.currentIndent+t.indentSize,t},outdent:function(e){var t=this;return"function"==typeof e?(t.currentIndent=t.currentIndent-t.indentSize,t.currentIndent<0&&(t.currentIndent=0),e(),t.currentIndent=t.currentIndent+t.indentSize):(t.currentIndent=t.currentIndent-t.indentSize,t.currentIndent<0&&(t.currentIndent=0)),t},color:function(e,t){var i=this,n=i.currentColor;return"function"==typeof t?(i.currentColor=e,t(),i.currentColor=n):i.currentColor=e,i},now:function(){return"undefined"!=typeof performance&&performance.timing?performance.timing.navigationStart+performance.now():void 0!==s?1e3*s.nowDouble():Date.now()},_levelString:}),r.Console.__objectSpy&&r.Console.__objectSpy.destroy(),"function"==typeof require?(e.Formatter=r.Formatter,e.Logger=r.Logger,e.Console=r.Console,e.now=r.now,e.stringify=r.stringify):e.Cobalt=r}("undefined"!=typeof window?window:"undefined"!=typeof module.exports?module.exports:self),Class("EMPEngine")({prototype:{cobaltInstance:null,lithium:null,init:function(e){var t,i=this;if(e)for(t in e)i[t]=e[t]},_engine:function(t){var e,i,n,s=this,r={error:t.error.message,frame:"N/A",url:window.location.href,line:t.error.lineNumber,site_id:window._pl_userInfo.id,user_agent:window.navigator.userAgent,scoped_class_name:t.scope.constructor.className||t.scope.className};n={fileName:t.error.fileName,lineNumber:t.error.lineNumber,columnNumber:t.error.columnNumber,message:t.error.message,stack:t.error.stack&&t.error.stack.split(/\n/)},e=t.args.map(function(e){return{type:typeof e,value:"string"==typeof e||"number"==typeof e?e:String(e)}}),i={},Object.keys(t.scope).forEach(function(e){i[e]="string"==typeof t.scope[e]||"number"==typeof t.scope[e]?t.scope[e]:String(t.scope[e])}),r.meta={userIp:window.userIp,sessionId:window.placeitTrackerId,previousError:s.lithium.previousError,errorObj:n,argumentsObj:e,scopeObj:i,frameName:"N/A",className:t.spy.targetObject.constructor.className||t.spy.targetObject.className,scopedClassName:t.scope.constructor.className||t.scope.className,methodName:t.spy.methodName,originalMethod:t.spy.originalMethod.toString(),targetObject:t.spy.targetObject,objectHasMethod:t.spy.objectHasMethod,events:s.lithium.events,nitrogen:!0,isPublished:window._stageData&&window._stageData.stage_data&&window._stageData.stage_data.is_published||0,tags:t.error.tags},s.lithium.previousError.push(n.message),10<s.lithium.previousError.length&&s.lithium.previousError.shift(),s.cobaltInstance.error({error:r,__skipConsole:!0})}}}),EMPEngine.__objectSpy&&EMPEngine.__objectSpy.destroy(),Li.Engine.error.push(empLoader),window.onerror=function(e,t,i,n,s){"undefined"==typeof empLogger&&(empLogger=new Cobalt.Console({from:"Public Page",loggers:[new Cobalt.Logger.EMPLogger]})),empLogger.log({error:{error:e,url:t||window.location.href,line:i,column:n,site_id:window._pl_userInfo.id,user_agent:window.navigator.userAgent,frame:"Placeit",meta:{history:window.Li.stack,errorObj:s,userIp:window.userIp,sessionId:window.placeitTrackerId,trackerId:window.placeitTrackerId,isPublished:window._stageData&&window._stageData.stage_data&&window._stageData.stage_data.is_published||0,tags:s.tags}}})},Class(Cobalt.Logger,"EMPLogger")({prototype:{_prevEvent:{},init:function(e){var t,i=this;if(e)for(t in e)i[t]=e[t]},log:function(e){e.message.hasOwnProperty("error")&&this._postEvent(e.message.error)},_formatErrorForNewRelic:function(e){var t={},i=e.meta||{},n=Helpers.App.getNetworkData();"object"!=typeof i.errorObj&&(i.errorObj={},i.errorObj.message=e.error,i.errorObj.stack=[]),i.previousError=i.previousError?i.previousError:[];var s=function s(e){try{return JSON.stringify(e)}catch(t){return}};try{t.environment=window.environment,t.origin="placeit",t._pl_error=e.error,t._pl_url=e.url,t._pl_site_id=e.site_id,t._pl_user_agent=e.user_agent,t._pl_scopedClassName=e.scoped_class_name,t._pl_argumentsObject=s(i.argumentsObject),t._pl_userIp=i.userIp,t._pl_sessionId=i.sessionId,t._pl_className=i.className,t._pl_methodName=i.methodName,t._pl_originalMethod=i.originalMethod,t._pl_objectHasMethod=i.objectHasMethod,t._pl_isPublished=i.isPublished,t._pl_lithium_stack=window.Li.stack.join("\n"),t._pl_scopeObject=s(i.scopeObject),t._pl_targetObject=s(i.targetObject),t._pl_events=s(i.events),t._pl_line=e.line,t._pl_column=e.column,t._pl_previousError=i.previousError.join("\n"),t._pl_errorObj_message=i.errorObj.message,t._pl_errorObj_stack=s(i.errorObj.stack),t._pl_tags=s(i.tags),t.networkEffectiveType=n.effectiveType,t.downlink=n.downlink,t.rtt=n.rtt,t.saveNetworkData=n.saveData,t.deviceMemory=navigator.deviceMemory}finally{return t}},_postEvent:function(e){var t=this;"development"!==window.environment&&(t._prevEvent===e?clearTimeout(t._senderTimeout):t._prevEvent=e,t._senderTimeout=setTimeout(100))}}}),function(){return {1:[{}],2:[function(e,t){"use strict";unction n(e,t,i){this._lateQueue.push(e,t,i),this._queueTick()}r a;try{throw new Error}catch(u){a=u}var o=e("./schedule"),l=e("./queue"),c=e("./util");i.prototype.setScheduler=i.prototype.hasCustomScheduler=function(){return this._customScheduler},i.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},i.prototype.disableTrampolineIfNecessary=i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},i.prototype.fatalError=i.prototype.throwLater=c.hasDevTools?(i.prototype.invokeLater=i.prototype.invoke=i.prototype.settlePromises=:(i.prototype.invokeLater=n,i.prototype.invoke=s,i.prototype.settlePromises=r),i.prototype.invokeFirst=i.prototype._drainQueue=i.prototype._drainQueues=i.prototype._queueTick=i.prototype._reset=function(){this._isTickUsed=!1},t.exports=i,t.exports.firstLineError=a},{"./queue":26,"./schedule":29,"./util":36}],3:[function(e,t){"use strict";t.exports=,{}],4:[function(e,t){"use strict";ar n;"undefined"!=typeof Promise&&(n=Promise);var s=e("./promise")();s.noConflict=i,t.exports=s},{"./promise":22}],5:[function(e,t){"use strict";var i=Object.create;if(i){var n=i(null),s=i(null);n[" size"]=s[" size"]=0}t.exports=function(s){a,o=e("./util"),l=o.canEvaluate;o.isIdentifier,s.prototype.call=s.prototype.get=},{"./util":36}],6:[function(l,e){"use strict";e.exports=function(e,t,i,n){var s=l("./util"),r=s.tryCatch,a=s.errorObj,o=e._async;e.prototype["break"]=e.prototype.cancel=e.prototype._branchHasCancelled=e.prototype._enoughBranchesHaveCancelled=e.prototype._cancelBy=e.prototype._cancelBranched=e.prototype._cancel=e.prototype._cancelPromises=e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},e.prototype.isCancellable=e.prototype._doInvokeOnCancel=e.prototype._invokeOnCancel=e.prototype._invokeInternalOnCancel=e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e){"use strict";e.exports=,{"./es5":13,"./util":36}],8:[function(e,t){"use strict";t.exports=function(r){ l=!1,i=[];return r.prototype._promiseCreated=function(){},r.prototype._pushContext=function(){},r.prototype._popContext=function(){return null},r._peekContext=r.prototype._peekContext=function(){},a.prototype._pushContext=a.prototype._popContext=a.CapturedTrace=null,a.create=e,a.deactivateLongStackTraces=function(){},a.activateLongStackTraces=a}},{}],9:[function(re,e){"use strict";e.exports=function(a,n){tion l(){return this._onCancelField}function c(e){this._onCancelField=e}on f(e,t,i,n,s){if(void 0===e&&null!==t&&Y){if(void 0!==s&&s._returnedNonUndefined())return;if(0==(65535&n._bitField))return;i&&(i+=" ");var r="",a="";if(t._trace){for(var o=t._trace.stack.split("\n"),l=b(o),c=l.length-1;0<=c;--c){var u=l[c];if(!$.test(u)){var d=u.match(F);d&&(r="at "+d[1]+":"+d[2]+":"+d[3]+" ");break}}if(0<l.length){var h=l[0];for(c=0;c<o.length;++c)if(o[c]===h){0<c&&(a="\n"+o[c-1]);break}}}var p="a promise was created in a "+i+"handler "+r+"but was not returned from it, see http://goo.gl/rRqMUw"+a;n._warn(p,!0,t)}}tion y(e){for(var t=e[0],i=1;i<e.length;++i){for(var n=e[i],s=t.length-1,r=t[s],a=-1,o=n.length-1;0<=o;--o)if(n[o]===r){a=o;break}for(o=a;0<=o;--o){var l=n[o];if(t[s]!==l)break;t.pop(),s--}t=n}}unction w(e){for(var t=e.stack.replace(/\s+$/g,"").split("\n"),i=0;i<t.length;++i){var n=t[i];if("    (No stack trace)"===n||j.test(n))break}return 0<i&&(t=t.slice(i)),t}function S(e){var t=e.stack;return{message:e.toString(),stack:b(t="string"==typeof t&&0<t.length?w(e):["    (No stack trace)"])}}nction k(e){var t;if("function"==typeof e)t="[function "+(e.name||"anonymous")+"]";else{if(t=e&&"function"==typeof e.toString?e.toString():U.toString(e),/\[object [a-zA-Z0-9$_]+\]/.test(t))try{t=JSON.stringify(e)}catch(r){}0===t.length&&(t="(empty array)")}return"(<"+E(t)+">, no stack trace)"}ction P(e,t){if(I()){for(var i,n,s=e.stack.split("\n"),r=t.stack.split("\n"),a=-1,o=-1,l=0;l<s.length;++l){if(c=A(s[l])){i=c.fileName,a=c.line;break}}for(l=0;l<r.length;++l){var c;if(c=A(r[l])){n=c.fileName,o=c.line;break}}a<0||o<0||!i||!n||i!==n||o<=a||(te=}}ar M,D,L,N=a._getDomain,O=a._async,R=re("./errors").Warning,U=re("./util"),H=U.canAttachTrace,B=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,$=/\((?:timers\.js):\d+:\d+\)/,F=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,j=null,z=null,G=!1,V=!(0==U.env("BLUEBIRD_DEBUG")||!U.env("BLUEBIRD_DEBUG")&&"development"!==U.env("NODE_ENV")),W=!(0==U.env("BLUEBIRD_WARNINGS")||!V&&!U.env("BLUEBIRD_WARNINGS")),q=!(0==U.env("BLUEBIRD_LONG_STACK_TRACES")||!V&&!U.env("BLUEBIRD_LONG_STACK_TRACES")),Y=0!=U.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(W||!!U.env("BLUEBIRD_W_FORGOTTEN_RETURN"));a.prototype.suppressUnhandledRejections=a.prototype._ensurePossibleRejectionHandled=a.prototype._notifyUnhandledRejectionIsHandled=a.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},a.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)},a.prototype._notifyUnhandledRejection=a.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},a.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-262145&this._bitField},a.prototype._isUnhandledRejectionNotified=function(){return 0<(262144&this._bitField)},a.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},a.prototype._unsetRejectionIsUnhandled=a.prototype._isRejectionUnhandled=function(){return 0<(1048576&this._bitField)},a.prototype._warn=a.onPossiblyUnhandledRejection=function(e){var t=N();D="function"==typeof e?null===t?e:U.domainBind(t,e):void 0},a.onUnhandledRejectionHandled=var X=function(){};a.longStackTraces=a.hasLongStackTraces=var Q=),K=U.isNode?U.global?function(){return!1},J={promiseCreated:s,promiseFulfilled:s,promiseRejected:s,promiseResolved:s,promiseCancelled:s,promiseChained:function(e,t,i){return{promise:t,child:i}},warning:unhandledRejection:rejectionHandled:s},Z=a.config=function(e){if("longStackTraces"in(e=Object(e))&&(e.longStackTraces?a.longStackTraces():!e.longStackTraces&&a.hasLongStackTraces()&&X()),"warnings"in e){var t=e.warnings;se.warnings=!!t,Y=se.warnings,U.isObject(t)&&"wForgottenReturn"in t&&(Y=!!t.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!se.cancellation){if(O.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");a.prototype._clearCancellationData=u,a.prototype._propagateFrom=d,a.prototype._onCancel=l,a.prototype._setOnCancel=c,a.prototype._attachCancellationCallback=i,a.prototype._execute=o,ee=d,se.cancellation=!0}"monitoring"in e&&(e.monitoring&&!se.monitoring?(se.monitoring=!0,a.prototype._fireEvent=Z):!e.monitoring&&se.monitoring&&(se.monitoring=!1,a.prototype._fireEvent=r))},a.prototype._fireEvent=r,a.prototype._execute=a.prototype._onCancel=function(){},a.prototype._setOnCancel=function(){},a.prototype._attachCancellationCallback=function(){},a.prototype._captureStackTrace=function(){},a.prototype._attachExtraTrace=function(){},a.prototype._clearCancellationData=function(){},a.prototype._propagateFrom=function(){};var ee=e,te=function(){return!1},ie=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;U.inherits(x,Error),(n.CapturedTrace=x).prototype.uncycle=function(){var e=this._length;if(!(e<2)){for(var t=[],i={},n=0,s=this;void 0!==s;++n)t.push(s),s=s._parent;for(n=(e=this._length=n)-1;0<=n;--n){var r=t[n].stack;void 0===i[r]&&(i[r]=n)}for(n=0;n<e;++n){var a=i[t[n].stack];if(void 0!==a&&a!==n){0<a&&(t[a-1]._parent=void 0,t[a-1]._length=1),t[n]._parent=void 0,t[n]._length=1;var o=0<n?t[n-1]:this;a<e-1?(o._parent=t[a+1],o._parent.uncycle(),o._length=o._parent._length+1):(o._parent=void 0,o._length=1);for(var l=o._length+1,c=n-2;0<=c;--c)t[c]._length=l,l++;return}}}},x.prototype.attachExtraTrace=var ne=);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(L=function(e){console.warn(e)},U.isNode&&process.stderr.isTTY?L=U.isNode||"string"!=typeof(new Error).stack||(L=);var se={warnings:W,longStackTraces:!1,cancellation:!1,monitoring:!1};return q&&a.longStackTraces(),{longStackTraces:function(){return se.longStackTraces},warnings:function(){return se.warnings},cancellation:function(){return se.cancellation},monitoring:function(){return se.monitoring},propagateFromFunction:function(){return ee},boundValueFunction:function(){return t},checkForgottenReturns:f,setBounds:P,warn:m,deprecated:g,CapturedTrace:x,fireDomEvent:Q,fireGlobalEvent:K}}},{"./errors":12,"./util":36}],10:[function(e,t){"use strict";t.exports=function(s){prototype["return"]=s.prototype.thenReturn=s.prototype["throw"]=s.prototype.thenThrow=s.prototype.catchThrow=function(e,t){if(arguments.length<=1)return this._then(void 0,a,void 0,{reason:e},void 0);var i=t,n=function(){throw i};return this.caught(e,n)},s.prototype.catchReturn=function(e,t){if(arguments.length<=1)return e instanceof s&&e.suppressUnhandledRejections(),this._then(void 0,r,void 0,{value:e},void 0);var i=t;i instanceof s&&i.suppressUnhandledRejections();var n=function(){return i};return this.caught(e,n)}}},{}],11:[{}],12:[function(e,t){"use strict";r s,r,a=e("./es5"),o=a.freeze,l=e("./util"),c=l.inherits,u=l.notEnumerableProp,d=i("Warning","warning"),h=i("CancellationError","cancellation error"),p=i("TimeoutError","timeout error"),f=i("AggregateError","aggregate error");try{s=TypeError,r=RangeError}catch(y){s=i("TypeError","type error"),r=i("RangeError","range error")}for(var g="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),m=0;m<g.length;++m)"function"==typeof Array.prototype[g[m]]&&(f.prototype[g[m]]=Array.prototype[g[m]]);a.defineProperty(f.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),f.prototype.isOperational=!0;var v=0;f.prototype.toString=c(n,Error);var _=Error.__BluebirdErrorTypes__;_||(_=o({CancellationError:h,TimeoutError:p,OperationalError:n,RejectionError:n,AggregateError:f}),a.defineProperty(Error,"__BluebirdErrorTypes__",{value:_,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:s,RangeError:r,CancellationError:_.CancellationError,OperationalError:_.OperationalError,TimeoutError:_.TimeoutError,AggregateError:_.AggregateError,Warning:d}},{"./es5":13,"./util":36}],13:[{}],14:[{}],15:[function(i,e){"use strict";e.exports=function(a,o){unction l(e){this.finallyHandler=e}e=i("./util"),h=a.CancellationError,p=e.errorObj;return s.prototype.isFinallyHandler=function(){return 0===this.type},l.prototype._resultCancelled=function(){c(this.finallyHandler)},a.prototype._passThrough=a.prototype.lastly=a.prototype["finally"]=a.prototype.tap=s}},{"./util":36}],16:[function(i,e){"use strict";e.exports=function(o,n,a,l,e,c){r d=i("./errors").TypeError,t=i("./util"),h=t.errorObj,p=t.tryCatch,f=[];t.inherits(u,e),u.prototype._isResolved=function(){return null===this._promise},u.prototype._cleanup=u.prototype._promiseCancelled=function(){if(!this._isResolved()){var e;if("undefined"!=typeof this._generator["return"])this._promise._pushContext(),e=p(this._generator["return"]).call(this._generator,void 0),this._promise._popContext();else{var t=new o.CancellationError("generator .return() sentinel");o.coroutine.returnSentinel=t,this._promise._attachExtraTrace(t),this._promise._pushContext(),e=p(this._generator["throw"]).call(this._generator,t),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},u.prototype._promiseFulfilled=u.prototype._promiseRejected=u.prototype._resultCancelled=u.prototype.promise=function(){return this._promise},u.prototype._run=u.prototype._continue=function(e){var t=this._promise;if(e===h)return this._cleanup(),this._cancellationPhase?t.cancel():t._rejectCallback(e.e,!1);var i=e.value;if(!0===e.done)return this._cleanup(),this._cancellationPhase?t.cancel():t._resolveCallback(i);var n=l(i,this._promise);if(n instanceof o||null!==(n=r(n,this._yieldHandlers,this._promise))){var s=(n=n._target())._bitField;0==(50397184&s)?(this._yieldedPromise=n)._proxy(this,null):0!=(33554432&s)?o._async.invoke(this._promiseFulfilled,this,n._value()):0!=(16777216&s)?o._async.invoke(this._promiseRejected,this,n._reason()):this._promiseCancelled()}else this._promiseRejected(new d("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",i)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))},o.coroutine=o.coroutine.addYieldHandler=o.spawn=},{"./errors":12,"./util":36}],17:[function(i,e){"use strict";e.exports=function(e,s){var t=i("./util");t.canEvaluate,t.tryCatch,t.errorObj,e.join=},{"./util":36}],18:[function(t,e){"use strict";e.exports=function(p,e,r,f,a,g){r l=p._getDomain,c=t("./util"),m=c.tryCatch,v=c.errorObj;c.inherits(o,e),o.prototype._init=function(){},o.prototype._promiseFulfilled=o.prototype._drainQueue=o.prototype._filter=o.prototype.preservedValues=function(){return this._preservedValues},p.prototype.map=function(e,t){return s(this,e,t,null)},p.map=function(e,t,i,n){return s(e,t,i,n)}}},{"./util":36}],19:[function(t,e){"use strict";e.exports=function(l,c,e,u,d){var h=t("./util"),p=h.tryCatch;l.method=l.attempt=l["try"]=function(e,t,i){if("function"!=typeof e)return u("expecting a function but got "+h.classString(e));var n,s=new l(c);if(s._captureStackTrace(),s._pushContext(),1<arguments.length){d.deprecated("calling Promise.try with more than 1 argument");var r=t,a=i;n=h.isArray(r)?p(e).apply(a,r):p(e).call(a,r)}else n=p(e)();var o=s._popContext();return d.checkForgottenReturns(n,o,"Promise.try",s),s._resolveFromSyncValue(n),s},l.prototype._resolveFromSyncValue=},{"./util":36}],20:[function(e,t){"use strict";unction a(e){var t;if(r(e)){(t=new c(e)).name=e.name,t.message=e.message,t.stack=e.stack;for(var i=u.keys(e),n=0;n<i.length;++n){var s=i[n];d.test(s)||(t[s]=e[s])}return t}return o.markAsOriginatingFromRejection(e),e}ar o=e("./util"),l=o.maybeWrapAsError,c=e("./errors").OperationalError,u=e("./es5"),d=/^(?:name|message|stack|cause)$/;t.exports=i},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e){"use strict";e.exports=function(e){ a=t("./util"),o=e._async,l=a.tryCatch,c=a.errorObj;e.prototype.asCallback=e.prototype.nodeify=},{"./util":36}],22:[function(M,D){"use strict";D.exports=function(){function o(){},l=c=a=u={},g=M("./util");f=g.isNode?function(){return null},g.notEnumerableProp(p,"_getDomain",f);var s=M("./es5"),r=M("./async"),m=new r;s.defineProperty(p,"_async",{value:m});var d=M("./errors"),h=p.TypeError=d.TypeError;p.RangeError=d.RangeError;var v=p.CancellationError=d.CancellationError;p.TimeoutError=d.TimeoutError,p.OperationalError=d.OperationalError,p.RejectionError=d.OperationalError,p.AggregateError=d.AggregateError;var _=function(){},y={},b={},w=M("./thenables")(p,_),S=M("./promise_array")(p,_,w,a,o),C=M("./context")(p),T=C.create,k=M("./debuggability")(p,C),E=(k.CapturedTrace,M("./finally")(p,w)),I=M("./catch_filter")(b),A=M("./nodeback"),P=g.errorObj,x=g.tryCatch;return p.prototype.toString=function(){return"[object Promise]"},p.prototype.caught=p.prototype["catch"]=p.prototype.reflect=p.prototype.then=p.prototype.done=p.prototype.spread=p.prototype.toJSON=p.prototype.all=p.prototype.error=p.getNewLibraryCopy=D.exports,p.is=function(e){return e instanceof p},p.fromNode=p.fromCallback=function(e,t){var i=new p(_);i._captureStackTrace();var n=1<arguments.length&&!!Object(t).multiArgs,s=x(e)(A(i,n));return s===P&&i._rejectCallback(s.e,!0),i._isFateSealed()||i._setAsyncGuaranteed(),i},p.all=p.cast=p.resolve=p.fulfilled=p.cast,p.reject=p.rejected=p.setScheduler=p.prototype._then=p.prototype._length=
p.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},p.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},p.prototype._setLength=p.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},p.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},p.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},p.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},p.prototype._isFinal=function(){return 0<(4194304&this._bitField)},p.prototype._unsetCancelled=p.prototype._setCancelled=p.prototype._setWillBeCancelled=p.prototype._setAsyncGuaranteed=p.prototype._receiverAt=p.prototype._promiseAt=function(e){return this[4*e-4+2]},p.prototype._fulfillmentHandlerAt=function(e){return this[4*e-4+0]},p.prototype._rejectionHandlerAt=p.prototype._boundValue=function(){},p.prototype._migrateCallback0=p.prototype._migrateCallbackAt=p.prototype._addCallbacks=p.prototype._proxy=p.prototype._resolveCallback=function(e,t){if(0==(117506048&this._bitField)){if(e===this)return this._rejectCallback(l(),!1);var i=w(e,this);if(!(i instanceof p))return this._fulfill(e);t&&this._propagateFrom(i,2);var n=i._target();if(n===this)return void this._reject(l());var s=n._bitField;if(0==(50397184&s)){var r=this._length();0<r&&n._migrateCallback0(this);for(var a=1;a<r;++a)n._migrateCallbackAt(this,a);this._setFollowing(),this._setLength(0),this._setFollowee(n)}else if(0!=(33554432&s))this._fulfill(n._value());else if(0!=(16777216&s))this._reject(n._reason());else{var o=new v("late cancellation observer");n._attachExtraTrace(o),this._reject(o)}}},p.prototype._rejectCallback=p.prototype._resolveFromExecutor=p.prototype._settlePromiseFromHandler=p.prototype._target=p.prototype._followee=function(){return this._rejectionHandler0},p.prototype._setFollowee=function(e){this._rejectionHandler0=e},p.prototype._settlePromise=p.prototype._settlePromiseLateCancellationObserver=p.prototype._settlePromiseCtx=p.prototype._settlePromise0=function(e,t){var i=this._promise0,n=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(i,e,n,t)},p.prototype._clearCallbackDataAtIndex=p.prototype._fulfill=p.prototype._reject=p.prototype._fulfillPromises=function(e,t){for(var i=1;i<e;i++){var n=this._fulfillmentHandlerAt(i),s=this._promiseAt(i),r=this._receiverAt(i);this._clearCallbackDataAtIndex(i),this._settlePromise(s,n,r,t)}},p.prototype._rejectPromises=p.prototype._settlePromises=p.prototype._settledValue=p.defer=p.pending=g.notEnumerableProp(p,"_makeSelfResolutionError",l),M("./method")(p,_,w,a,k),M("./bind")(p,_,w,k),M("./cancel")(p,S,a,k),M("./direct_resolve")(p),M("./synchronous_inspection")(p),M("./join")(p,S,w,_,m,f),(p.Promise=p).version="3.4.5",M("./map.js")(p,S,a,w,_,k),M("./call_get.js")(p),M("./using.js")(p,a,w,T,_,k),M("./timers.js")(p,_,k),M("./generators.js")(p,a,_,w,o,k),M("./nodeify.js")(p),M("./promisify.js")(p,_),M("./props.js")(p,S,w,a),M("./race.js")(p,_,w,a),M("./reduce.js")(p,S,a,w,_,k),M("./settle.js")(p,S,k),M("./some.js")(p,S,a),M("./filter.js")(p,_),M("./each.js")(p,_),M("./any.js")(p),g.toFastProperties(p),g.toFastProperties(p.prototype),n({a:1}),n({b:2}),n({c:3}),n(1),n(function(){}),n(void 0),n(!1),n(new p(_)),k.setBounds(r.firstLineError,g.lastLineError),p}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(n,e){"use strict";e.exports=function(o,i,l,r,e){r c=n("./util");return c.isArray,c.inherits(t,e),t.prototype.length=function(){return this._length},t.prototype.promise=function(){return this._promise},t.prototype._init=function u(e,t){var i=l(this._values,this._promise);if(i instanceof o){var n=(i=i._target())._bitField;if(this._values=i,0==(50397184&n))return this._promise._setAsyncGuaranteed(),i._then(u,this._reject,void 0,this,t);if(0==(33554432&n))return 0!=(16777216&n)?this._reject(i._reason()):this._cancel();i=i._value()}if(null!==(i=c.asArray(i)))return 0===i.length?void(-5===t?this._resolveEmptyArray():this._resolve(a(t))):void this._iterate(i);var s=r("expecting an array or an iterable object but got "+c.classString(i)).reason();this._promise._rejectCallback(s,!1)},t.prototype._iterate=function(e){var t=this.getActualLength(e.length);this._length=t,this._values=this.shouldCopyValues()?new Array(t):this._values;for(var i=this._promise,n=!1,s=null,r=0;r<t;++r){var a=l(e[r],i);a instanceof o?s=(a=a._target())._bitField:s=null,n?null!==s&&a.suppressUnhandledRejections():null!==s?0==(50397184&s)?(a._proxy(this,r),this._values[r]=a):n=0!=(33554432&s)?this._promiseFulfilled(a._value(),r):0!=(16777216&s)?this._promiseRejected(a._reason(),r):this._promiseCancelled(r):n=this._promiseFulfilled(a,r)}n||i._setAsyncGuaranteed()},t.prototype._isResolved=t.prototype._resolve=t.prototype._cancel=t.prototype._reject=t.prototype._promiseFulfilled=function(e,t){return this._values[t]=e,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)},t.prototype._promiseCancelled=t.prototype._promiseRejected=t.prototype._resultCancelled=t.prototype.shouldCopyValues=function(){return!0},t.prototype.getActualLength=function(e){return e},t}},{"./util":36}],24:[function(a,e){"use strict";e.exports=function(c,u){{},_=a("./util"),y=a("./nodeback"),b=_.withAppended,w=_.maybeWrapAsError,t=_.canEvaluate,S=a("./errors").TypeError,C="Async",r={__isPromisified__:!0},i=new RegExp("^(?:"+["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"].join("|")+")$"),T=k=function(e){return e.replace(/([$])/,"\\$")},E=t?m:e;c.promisify=function(e,t){if("function"!=typeof e)throw new S("expecting a function but got "+_.classString(e));if(d(e))return e;var i=s(e,void 0===(t=Object(t)).context?v:t.context,!!t.multiArgs);return _.copyDescriptors(e,i,n),i},c.promisifyAll=function(e,t){if("function"!=typeof e&&"object"!=typeof e)throw new S("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var i=!!(t=Object(t)).multiArgs,n=t.suffix;"string"!=typeof n&&(n=C);var s=t.filter;"function"!=typeof s&&(s=T);var r=t.promisifier;if("function"!=typeof r&&(r=E),!_.isIdentifier(n))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=_.inheritedDataKeys(e),o=0;o<a.length;++o){var l=e[a[o]];"constructor"!==a[o]&&_.isClass(l)&&(g(l.prototype,n,s,r,i),g(l,n,s,r,i))}return g(e,n,s,r,i)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(h,e){"use strict";e.exports=function(n,e,s,r){r o,i=h("./util"),l=i.isObject,c=h("./es5");"function"==typeof Map&&(o=Map);var u=),d=i.inherits(a,e),a.prototype._init=function(){},a.prototype._promiseFulfilled=a.prototype.shouldCopyValues=function(){return!1},a.prototype.getActualLength=n.prototype.props=function(){return t(this)},n.props=function(e){return t(e)}}},{"./es5":13,"./util":36}],26:[function(e,t){"use strict";prototype._willBeOverCapacity=n.prototype._pushOne=n.prototype._unshiftOne=n.prototype.unshift=n.prototype.push=n.prototype.shift=n.prototype.length=function(){return this._length},n.prototype._checkCapacity=n.prototype._resizeTo=t.exports=n},{}],27:[function(e,t){"use strict";t.exports=,{"./util":36}],28:[function(t,e){"use strict";e.exports=function(a,e,s,i,r,o){=a._getDomain,p=t("./util"),f=p.tryCatch;p.inherits(l,e),l.prototype._gotAccum=l.prototype._eachComplete=l.prototype._init=function(){},l.prototype._resolveEmptyArray=l.prototype.shouldCopyValues=function(){return!1},l.prototype._resolve=l.prototype._resultCancelled=l.prototype._iterate=function(e){var t,i,n=(this._values=e).length;if(void 0!==this._initialValue?(t=this._initialValue,i=0):(t=a.resolve(e[0]),i=1),!(this._currentCancellable=t).isRejected())for(;i<n;++i){var s={accum:null,value:e[i],index:i,length:n,array:this};t=t._then(d,void 0,void 0,s,void 0)}void 0!==this._eachValues&&(t=t._then(this._eachComplete,void 0,void 0,this,void 0)),t._then(c,c,void 0,t,this)},a.prototype.reduce=a.reduce=},{"./util":36}],29:[function(e,t){"use strict";var i,n=e("./util"),s=r=n.getNativePromise();if(n.isNode&&"undefined"==typeof MutationObserver){var a=global.setImmediate,o=process.nextTick;i=n.isRecentNode?function(e){a.call(global,e)}:function(e){o.call(process,e)}}else if("function"==typeof r&&"function"==typeof r.resolve){var l=r.resolve();i=function(e){l.then(e)}}else i="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof setImmediate?function(e){setImmediate(e)}:"undefined"!=typeof setTimeout?function(e){setTimeout(e,0)}:s:);t.exports=i},{"./util":36}],30:[function(r,e){"use strict";e.exports=,{"./util":36}],31:[function(u,e){"use strict";e.exports=function(e,t,s){r n=u("./util"),a=u("./errors").RangeError,o=u("./errors").AggregateError,l=n.isArray,c={};n.inherits(r,t),r.prototype._init=r.prototype.init=r.prototype.setUnwrap=function(){this._unwrap=!0},r.prototype.howMany=function(){return this._howMany},r.prototype.setHowMany=function(e){this._howMany=e},r.prototype._promiseFulfilled=r.prototype._promiseRejected=r.prototype._promiseCancelled=r.prototype._checkOutcome=r.prototype._fulfilled=function(){return this._totalResolved},r.prototype._rejected=r.prototype._addRejected=function(e){this._values.push(e)},r.prototype._addFulfilled=r.prototype._canPossiblyFulfill=r.prototype._getRangeError=r.prototype._resolveEmptyArray=e.some=e.prototype.some=e._SomePromiseArray=r}},{"./errors":12,"./util":36}],32:[function(e,t){"use strict";t.exports=,{}],33:[function(n,e){"use strict";e.exports=function(c,u){function e(e,t){if(o(e)){if(e instanceof c)return e;var i=s(e);if(i===h){t&&t._pushContext();var n=c.reject(i.e);return t&&t._popContext(),n}if("function"==typeof i){if(r(e)){n=new c(u);return e._then(n._fulfill,n._reject,void 0,n,null),n}return a(e,i,t)}}return e}d=n("./util"),h=d.errorObj,o=d.isObject,i={}.hasOwnProperty;return e}},{"./util":36}],34:[function(e,t){"use strict";t.exports=function(s,r,a){ u=e("./util"),d=s.TimeoutError;o.prototype._resultCancelled=var h=t=s.delay=s.prototype.delay=var p=s.prototype.timeout=function(e,t){e=+e;var i,n,s=new o(setTimeout(e));return a.cancellation()?(n=this.then(),(i=n._then(l,c,void 0,s,void 0))._setOnCancel(s)):i=this._then(l,c,void 0,s,void 0),i}}},{"./util":36}],35:[function(r,e){"use strict";e.exports=function(p,f,g,t,e,m){nction v(t,i){function n(){if(r<=s)return a._fulfill();var e=l(t[s++]);if(e instanceof p&&e._isDisposable()){try{e=g(e._getDisposer().tryDispose(i),t.promise)}catch(c){return o(c)}if(e instanceof p)return e._then(n,o,null,null,null)}n()}var s=0,r=t.length,a=new p(e);return n(),a}w=r("./util"),i=r("./errors").TypeError,n=r("./util").inherits,S=w.errorObj,C=w.tryCatch,s={};_.prototype.data=function(){return this._data},_.prototype.promise=function(){return this._promise},_.prototype.resource=_.prototype.tryDispose=_.isDisposer=n(c,_),c.prototype.doDispose=b.prototype._resultCancelled=p.using=function(e){var t=arguments.length;if(t<2)return f("you must pass at least 2 arguments to Promise.using");var r=arguments[t-1];if("function"!=typeof r)return f("expecting a function but got "+w.classString(r));var i,a=!0;2===t&&Array.isArray(e)?(t=(i=arguments[0]).length,a=!1):(i=arguments,t--);for(var n=new b(t),s=0;s<t;++s){var o=i[s];if(_.isDisposer(o)){var l=o;(o=o.promise())._setDisposable(l)}else{var c=g(o);c instanceof p&&(o=c._then(y,null,null,{resources:n,index:s},void 0))}n[s]=o}var u=new Array(n.length);for(s=0;s<u.length;++s)u[s]=p.resolve(n[s]).reflect();var d=p.all(u).then(,h=d.lastly(;return(n.promise=h)._setOnCancel(n),h},p.prototype._setDisposable=p.prototype._isDisposable=p.prototype._getDisposer=function(){return this._disposer},p.prototype._unsetDisposable=p.prototype.disposer=},{"./errors":12,"./util":36}],36:[function(e,t){"use strict";ndefined"==typeof navigator,A={e:{}},
P="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:void 0!==this?this:null,x=function(t,i){ar n={}.hasOwnProperty;return e.prototype=i.prototype,t.prototype=new e,t.prototype},M=),D=/this\s*\.\s*\S+\s*=/,L=/^[a-z$_][a-z$_0-9]*$/i,N="stack"in new Error?O=if("undefined"!=typeof Symbol&&Symbol.iterator){var R="function"==typeof Array.from?function(e){return Array.from(e)}:O=var U,H="undefined"!=typeof process&&"[object process]"===b(process).toLowerCase(),B={isClass:d,isIdentifier:p,inheritedDataKeys:M,getDataPropertyOrDefault:o,thrower:u,isArray:E.isArray,asArray:O,notEnumerableProp:l,isPrimitive:r,isObject:c,isError:m,canEvaluate:I,errorObj:A,tryCatch:n,inherits:x,withAppended:a,maybeWrapAsError:s,toFastProperties:h,filledRange:f,toString:g,canAttachTrace:y,ensureErrorObject:N,originatesFromRejection:_,markAsOriginatingFromRejection:v,classString:b,copyDescriptors:w,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:H,env:S,global:P,getNativePromise:C,domainBind:T};B.isRecentNode=B.isNode&&(0===(U=process.versions.node.split(".").map(Number))[0]&&10<U[1]||0<U[0]),B.isNode&&B.toFastProperties(process);try{throw new Error}catch($){B.lastLineError=$}t.exports=B},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise),window.BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"Other",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"Unknown",this.osVersion=this.searchString(this.dataClient)||"Other","Other"!==this.browser||!document.hasOwnProperty("documentMode")&&"Netscape"!==navigator.appName||(this.browser="Edge")},searchString:function(e){for(var t=0;t<e.length;t++){var i=e[t].string;if(this.versionSearchString=e[t].subString,-1!=i.indexOf(e[t].subString))return e[t].identity}},searchVersion:dataBrowser:[{string:navigator.userAgent,subString:"Googlebot",identity:"Other"},{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer"},{string:navigator.userAgent,subString:"Trident",identity:"IE11"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Safari",identity:"Safari"},{string:navigator.userAgent,subString:"Opera",identity:"Opera"},{string:navigator.userAgent,subString:"OPR",identity:"Opera"}],dataClient:[{string:navigator.userAgent,subString:"Windows NT 10.0",identity:"Windows 10"},{string:navigator.userAgent,subString:"Windows NT 6.2",identity:"Windows 8"},{string:navigator.userAgent,subString:"Windows NT 6.1",identity:"Windows 7"},{string:navigator.userAgent,subString:"Windows NT 6.0",identity:"Windows Vista"},{string:navigator.userAgent,subString:"Windows NT 5.2",identity:"Windows Server"},{string:navigator.userAgent,subString:"Windows NT 5.1",identity:"Windows XP"},{string:navigator.userAgent,subString:"Windows NT 5.0",identity:"Windows 2000"},{string:navigator.userAgent,subString:"Mac",identity:"Mac/iOS"},{string:navigator.userAgent,subString:"X11",identity:"UNIX"},{string:navigator.userAgent,subString:"Linux",identity:"Linux"}]},BrowserDetect.init(),window.Helpers={},window.Registry={},window.Modals={},window.Model={},window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame,Function.prototype.bind||(Function.prototype.bind=,function(){(!("undefined"==typeof window.Element||"classList"in document.documentElement)){var i=Array.prototype,n=i.push,s=i.splice,r=i.join;e.prototype={add:contains:item:remove:toString:toggle:,window.DOMTokenList=e,t(Element.prototype,"classList",}}(),function(r){"HTMLCanvasElement"in r&&"toDataURL"in r.HTMLCanvasElement.prototype&&("toBlob"in r.HTMLCanvasElement.prototype||Object.defineProperty(r.HTMLCanvasElement.prototype,"toBlob",{value:function(e){var t=this.toDataURL.apply(this,[].slice.call(arguments,1)),i=/^data:(.*?);base64,(.*)$/.exec(t),n=i[1],s=i[2];setTimeout(function(){e(new Blob([new Uint8Array(r.atob(s).split("").map(function(e){return e.charCodeAt(0)}))],{type:n}))},0)},writable:!0,enumerable:!0,configurable:!0}))}(self),Class(Helpers,"URLSearchParams")({prototype:{onChange:null,init:function init(e){this.onChange=function(){},this._searchParams=new URLSearchParams,new URLSearchParams(e).forEach(bind(this))},append:function append(e,t){this._searchParams.append(encodeURIComponent(e),encodeURIComponent(t)),this._onChange()},"delete":function _delete(e){this._searchParams["delete"](encodeURIComponent(e)),this._onChange()},entries:function entries(){return new URLSearchParams(this.toString()).entries()},forEach:function forEach(e,t){return new URLSearchParams(this.toString()).forEach(e,t)},get:function get(e){var t=this._searchParams.get(encodeURIComponent(e));return t?decodeURIComponent(t):t},getAll:function getAll(e){return new URLSearchParams(this.toString()).getAll(e)},has:function has(e){return this._searchParams.has(encodeURIComponent(e))},keys:function keys(){return new URLSearchParams(this.toString()).keys()},set:function set(e,t){this._searchParams.set(encodeURIComponent(e),encodeURIComponent(t)),this._onChange()},sort:function sort(){this._searchParams.sort()},toString:values:function values(){return new URLSearchParams(this.toString()).values()},_onChange:}),Class(Helpers,"URL")({prototype:{origin:null,username:null,password:null,host:null,port:null,pathname:null,search:null,hash:null,href:null,init:function init(e,t){e=new URL(e,t),this.origin=e.origin,this.username=e.username,this.password=e.password,this.host=e.host,this.port=e.port,this.pathname=e.pathname,this.search=e.search,this.hash=e.hash,this.href="";var i=function(e){this.search=e?"?"+e:"",this.href=[this.origin,this.pathname,this.search].join("")}.bind(this);return this.searchParams=new Helpers.URLSearchParams(this.search),(this.searchParams.onChange=i)(this.searchParams.toString()),this},hasHash:}),Object.entries||(console.log("Object.entries polyfill"),Object.entries=,void 0===Set||"function"!=typeof Set.prototype.keys)var Set=function(){"use strict";unction n(e){var t;return"object"==typeof e&&(t=u.call(e),!0===o[t]||"number"==typeof e.length&&0<=e.length&&(0===e.length||"object"==typeof e[0]&&0<e[0].nodeType))}nction e(e){var t=0;if(s(this,"baseType","Set",!1,!1),s(this,"_data",{},!1,!0),d?Object.defineProperty(this,"size",{enumerable:!0,configurable:!1,get:function(){return t},set:):this.size=0,e!==undefined&&null!==e)if(n(e))for(var i=0;i<e.length;i++)this.add(e[i]);else(e instanceof Set||"Set"===e.baseType)&&e.forEach(function(e){this.add(e)},this)}function r(e,t){var i,n=typeof e;if(m[n])return n.substr(0,3)+"_"+e;if(null===e)return"nul_null";if("object"===n||"function"===n)return e[g]?e[g]:t?(i=f+p++,"[object Object]"===u.call(e)&&d?Object.defineProperty(e,g,{enumerable:!1,configurable:!1,writable:!1,value:i}):e[g]=i,i):null;throw new Error("Unsupported type for Set.add()")}function t(n,s,r){var a=0,o=n.length;this.next=function(){for(var e,t,i={};;){if(a<o){if(i.done=!1,t=n[a++],(e=s[t])===undefined&&!l(s,t))continue;"keys"===r?i.value=e:"entries"===r&&(i.value=[e,e])}else s=n=null,i.done=!0;return i}}}ar o={"[object Array]":!0,"[object Arguments]":!0,"[object HTMLCollection]":!0,"[object NodeList]":!0},c=Object.prototype.hasOwnProperty,u=Object.prototype.toString,d=Object.defineProperty&&Object.defineProperties,h=!1,p=0,f="obj_",g="__objectPolyFillID",m={string:!0,"boolean":!0,number:!0,undefined:!0};return e.prototype={add:clear:"delete":remove:forEach:function(e,t){if("function"==typeof e)for(var i,n,s=t,r=this.keys();(i=r.next())&&!i.done;)n=i.value,e.call(s,n,n,this)},has:values:function(){return this.keys()},keys:function(){return new t(a(this._data),this._data,"keys")},entries:,e.prototype.constructor=e}();
/*!
 * Bootstrap v3.2.0 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if(Class("ExperimentsManager")({GROUPS:{CONTROL:0,VARIANT:1,EXCLUDED:-1},_instance:null,getInstance:prototype:{_COOKIES_PREFIX:"_pl_gtmc",_experimentData:null,_processedExperimentsVariants:null,init:function init(){var e=this;this._experimentData=null,this._processedExperimentsVariants=new Set(this._getAllExperimentsCookiesValues()),this._processedExperimentsVariants.size&&(clearInterval(interval),e._sendIdentifyRequest())},runExperiment:function runExperiment(e){this._experimentData=Object.assign({},e);try{this._validateExperimentData(),this._normalizeExperimentData(),this._processExperiment()}catch(t){throw this._experimentData=null,t}finally{this._experimentData=null}},_validateExperimentData:function _validateExperimentData(){var e=this._experimentData.id;if(!e||"string"!=typeof e)throw new Error('Wrong Experiment Data. Invalid "id" property.');var t=this._experimentData.expire,i=new Date(t).getTime();if(isNaN(i))throw new Error('Wrong Experiment Data. Invalid date for "expire" property.');var n=this._experimentData.segmentation;if(null!=n){if("number"!=typeof n)throw new Error('Wrong Experiment Data. If defined, "segmentation" should be a number between 0 and 1.');if(n<0||1<n)throw new Error('Wrong Experiment Data. If defined, "segmentation" should be a number between 0 and 1.')}var s=this._experimentData.validations;if(s){if(!1===Array.isArray(s))throw new Error('Wrong Experiment Data. If defined, "validations" should be an array of functions returning boolean.');s.forEach(}var r=this._experimentData.control;if(void 0!==r&&"function"!=typeof r)throw new Error('Wrong Experiment Data. If defined, "control" need to be a function.');var a=this._experimentData.variant;if(void 0!==a&&"function"!=typeof a)throw new Error('Wrong Experiment Data. If defined, "variant" need to be a function.')},_normalizeExperimentData:function _normalizeExperimentData(){var e=this._experimentData.control;e&&"function"==typeof e||(this._experimentData.control=new Function);var t=this._experimentData.variant;t&&"function"==typeof t||(this._experimentData.variant=new Function),this._experimentData.segmentation||(this._experimentData.segmentation=1),this._experimentData.validations||(this._experimentData.validations=[])},_wasExpireDateReached:function _wasExpireDateReached(){var e=Date.now();return this._getExpireTimestamp()<=e},_getExpireTimestamp:function _getExpireTimestamp(){var e=this._experimentData.expire,t=new Date(e);return Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())},_processExperiment:function _processExperiment(){if(!this._wasExpireDateReached()){var e=this._getCookieName(),t=this._getCookieValue(e),i=ExperimentsManager.GROUPS.CONTROL;if(""===t){var n=!1;try{n=!1===this._shouldBeAddedToExperiment()}catch(r){throw this._excludeUser(),r}if(n)return void this._excludeUser();this._shouldBeAddedToVariant()&&(i=ExperimentsManager.GROUPS.VARIANT),t=this._tagWithExperimentId(i)}if(!this._isUserExcluded(t)){var s=this._experimentData.control;if(this._shouldRunVariantCode(t))s=this._experimentData.variant;s&&"function"==typeof s&&s(),this._sendIdentifyRequest(t)}}},_getCookieName:function _getCookieName(){return[this._COOKIES_PREFIX,this._experimentData.id].join("_")},_getCookieValue:_setCookieValue:function _setCookieValue(e,t){var i=this._getExpireTimestamp();$.cookie(e,t,{path:"/",expires:new Date(i)})},_getAllExperimentsCookiesValues:function _getAllExperimentsCookiesValues(){return document.cookie.split(";").filter(.map(.sort()},_isUserExcluded:function _isUserExcluded(e){return/\.-1$/.test(e)},_excludeUser:function _excludeUser(){var e=this._tagWithExperimentId(ExperimentsManager.GROUPS.EXCLUDED);this._sendIdentifyRequest(e)},_shouldBeAddedToExperiment:function _shouldBeAddedToExperiment(){var e=this._experimentData.validations;if(!e)return!0;for(var t=0;t<e.length;t++){if(!1===(0,e[t])())return!1}return!0},_shouldBeAddedToVariant:function _shouldBeAddedToVariant(){var e=Math.floor(99*Math.random()),t=this._experimentData.segmentation;return t||(t=1),e<=100*t},_shouldRunVariantCode:_tagWithExperimentId:function _tagWithExperimentId(e){var t=[this._experimentData.id,e].join(".");return this._setCookieValue(this._getCookieName(),t),t},_sendIdentifyRequest:function _sendIdentifyRequest(e){if(e&&this._processedExperimentsVariants.add(e),this._processedExperimentsVariants.size){var t=[];this._processedExperimentsVariants.forEach(function(e){t.push(e)});var i=t.join("!");Helpers.GlobalEventTracker.identify({experiment_name:i}),this._sendPageRequest(i)}},_sendPageRequest:function _sendPageRequest(e){var t=window._pl_userInfo;null===t.email&&(t={id:null,email:"notloggedin@placeit.net"});var i=window._pl_category;Helpers.GlobalEventTracker.pageView({userId:t.id,email:t.email,status:t.status,page_category:i,page_type:window.pageType.page_type,experiment_name:e})}}}),ExperimentsManager.getInstance(),window.hj=window.hj||function(){(hj.q=hj.q||[]).push(arguments)},Class("HotjarPlugin")({track:identify:),Class("AmplitudeWrapper")({API_KEYS:{development:"dae02703d367aefd08cee8728c8271e9",production:"02ae390297ba1384fe88537602773a31"},SDK_CONFIG:{minIdLength:2},LOCAL_STORAGE_TRAITS_KEY:"amp_user_traits",_userTraits:{},_isReady:!1,_readyCallbacks:[],_plugins:[],init:function init(e){var t=Utils.bindFn(this);e=Object.assign(e,this.SDK_CONFIG);amplitude.init(this._getApiKey(),null,e).promise.then(t(this._onReady))},_onReady:function _onReady(){this._isReady=!0,this._readyCallbacks.forEach(function(e){e()}),this._readyCallbacks=[]},ready:function ready(e){!0===this._isReady?e():this._readyCallbacks.push(e)},page:function Kna(e){var t=Object.assign(this._getPageViewProperties(),e);this._track("page_view",t)},identify:function identify(e,t,i){var n=this,s=new amplitude.Identify;t=Object.assign(t,{device_category:Helpers.App.getDeviceCategory(),locale:window.user_locale}),e&&amplitude.setUserId(e),!1===CookiesUtils.getStatisticsSetting()&&(t.email=Helpers.GlobalEventTracker._getPlaceholderEmailForUser(),t.name=Helpers.App.getTrackerId(),e=null,amplitude.setUserId(null)),Object.keys(t).forEach(function(e){s.set(e,t[e]),n._userTraits[e]=t[e]}),amplitude.identify(s).promise.then(,this._callPluginsMethod(arguments),this._saveInLocalStorage(this.LOCAL_STORAGE_TRAITS_KEY,t)},track:function track(e,t,i){var n=Object.assign(this._getPageViewProperties(),t),s=this._track(e,n);this._callPluginsMethod(arguments),"function"==typeof i&&s.then(i)},_track:function _track(e,t){return t.device_category=Helpers.App.getDeviceCategory(),amplitude.track(e,t).promise},user:function user(){var e=this;return{id:anonymousId:amplitude.getDeviceId,traits:},addPlugin:function addPlugin(e){this._plugins.push(e)},_callPluginsMethod:function _callPluginsMethod(t){var i=t.callee.name;this._plugins.forEach(},_getUserTraits:function _getUserTraits(){var e=localStorage.getItem(this.LOCAL_STORAGE_TRAITS_KEY);return e?JSON.parse(e):Object.assign({},this._userTraits)},_getPageViewProperties:function _getPageViewProperties(){return{page_domain:"undefined"!=typeof location&&location.hostname||"",page_location:"undefined"!=typeof location&&location.href||"",page_path:"undefined"!=typeof location&&location.pathname||"",page_title:"undefined"!=typeof document&&document.title||"",page_url:"undefined"!=typeof location&&location.href.split("?")[0]||""}},_getApiKey:function _getApiKey(){return"production"===window.environment?this.API_KEYS.production:this.API_KEYS.development},_saveInLocalStorage:function _saveInLocalStorage(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(i){console.warn("Local storage not enabled; not saving",e)}}}),Class("GoogleTagManagerWrapper")({_dataLayerNames:[],_userId:null,init:function init(e){(this._dataLayerNames=e).forEach(},setUserId:function setUserId(e){this._userId=e},track:function track(e,t){var i=Object.assign(t||{},{event:e,userId:this._userId});this.pushToDataLayers(i)},pageView:function pageView(e){var t=Object.assign(e,{event:"Loaded a Page",userId:this._userId,path:location.pathname,referrer:document.referrer,search:location.search,title:document.title,url:location.href});this.pushToDataLayers(t)},pushToDataLayers:function pushToDataLayers(t){this._dataLayerNames.forEach(}}),window.ga=window.ga||ga.l=+new Date,Class("GoogleAnalyticsWrapper")({_SDK_LOAD_THRESHOLD_TIME:3e3,_loadPromise:null,_isReady:!1,getClientId:function getClientId(){var t=this;return new Promise(function(e){t._getLoadPromise().then(["catch"](})},_getClientId:function _getClientId(){var e=window.ga.getAll();return 0===e.length?null:e[0].get("clientId")},_getLoadPromise:function _getLoadPromise(){return!0===this._isReady?Promise.resolve():(null===this._loadPromise&&(this._loadPromise=this._createLoadPromise()),this._loadPromise)},_createLoadPromise:function _createLoadPromise(){var i=this;return new Promise(function(e,t){setTimeout(t,i._SDK_LOAD_THRESHOLD_TIME),window.ga(})}}),Class("Phosphorus")({reflect:function reflect(e){var t=function(e){return{status:"fulfilled",value:e}},i=return e.then(t,i)},allSettled:function(e){var t=e.map(function(e){return P.reflect(e)});return Promise.all(t)},cancelable:function cancelable(a,o){return function(e){var i,t=o||function(){},n=new Promise(function(e,t){i=function(){t(new Error("Cancelation Error"))}}),s=a(e),r=Promise.race([n,s]);return r.cancel=function(e){t=e||t,s.then(t),i()},r}},retryable:function(a,o){return function(r){return new Promise(function(e,t){for(var i=a(r).then(e),n=function(){return a(r)},s=0;s<o-1;s++)i=i["catch"](n).then(e);i["catch"](t)})}},retryableDelayed:function(a,o,e){var t=this;return function(s){var r=t.delayed(a,e);return new Promise(function(e,t){for(var i=a(s).then(e),n=0;n<o-1;n++)i=i["catch"](function(){return r(s)}).then(e);i["catch"](t)})}},delayed:function delayed(n,s){return function(i){return new Promise(function(e,t){setTimeout(s)})}},delay:timeout:function timeout(i){return new Promise(},ajax:function ajax(i){return new Promise(},get:function get(i,n){return new Promise(function(e,t){$.get(i,n).then(e).fail(t)})},runner:function runner(e){var t,i={};return(t=new Promise().run=function(){e.then(i.resolve)["catch"](i.reject)},t},promiseMap:function promiseMap(t){return ,promisifyEvent:function promisifyEvent(s){return function(n){return new Promise(function(t){var i=n.bind(s,i)})}},trace:function trace(t){return ,promiseOnceFunctionBuilder:function promiseOnceFunctionBuilder(e){var i=function(){var t=e.apply(null,arguments).then(;return i=function(){return t},t};return }),window.P=Phosphorus,Class(Helpers,"GlobalEventTracker")({gaLoadTimeout:null,_isReady:!1,_sdks:[],_cancellableReadyPromise:null,_requestsQueue:[],_readyCallbacks:[],addSdk:function addSdk(e){this._isReady=!1,this._sdks.push(e),this._setCancellableReadyPromise()},getSdks:function getSdks(){return this._sdks.map(},onSdkReady:function onSdkReady(e){!0===this._isReady?e():this._readyCallbacks.push(e)},identify:function identify(t,i){!1!==this._isReady?this.getSdks().forEach(:this._addToRequestsQueue(arguments)},pristineTrack:function pristineTrack(i,n,e){if(!1!==this._isReadyToTrack()){var t=this.getSdks().map(function(t){return new Promise(});GoogleTagManagerWrapper.setUserId(this.getUserId()),GoogleTagManagerWrapper.track(i,n),"function"==typeof e&&Promise.all(t).then(e)}else this._addToRequestsQueue(arguments)},pageView:function pageView(t){!1!==this._isReadyToTrack()?(this.getSdks().forEach(function(e){e.page(t)}),GoogleTagManagerWrapper.setUserId(this.getUserId()),GoogleTagManagerWrapper.pageView(t)):this._addToRequestsQueue(arguments)},getUserId:function getUserId(){var e=this.getSdks().map(function(e){return e.user().id()}),t=e[0];return e.some(?null:t},getAnonymousId:function getAnonymousId(){return this.getSdks().map(function(e){return e.user().anonymousId()})[0]},getUserTraits:function getUserTraits(){var e=this.getSdks().map(,i=e[0];return e.some(function(t){return Object.keys(i).some(})?{}:i},_shouldIdentifyNotLoggedInUser:function _shouldIdentifyNotLoggedInUser(){return!1===Helpers.App.isLoggedIn()&&!1===this._isIdentified()},_isReadyToTrack:_isIdentified:_setCancellableReadyPromise:function _setCancellableReadyPromise(){var e=Utils.bindFn(this);null!==this._cancellableReadyPromise&&this._cancellableReadyPromise.cancel(),this._cancellableReadyPromise=P.cancelable(e(this._getReadyPromise))(),this._cancellableReadyPromise.then(e(this._handleSdksReady))["catch"](},_getReadyPromise:function _getReadyPromise(){var e=this.getSdks().map(function(t){return new Promise(});return Promise.all(e)},_handleSdksReady:function _handleSdksReady(){(this._isReady=!0)===this._shouldIdentifyNotLoggedInUser()&&this.identifyNotLoggedUser(),this._drainReadyCallbacks(),this._drainRequestsQueue()},_drainReadyCallbacks:function _drainReadyCallbacks(){this._readyCallbacks.forEach(,this._readyCallbacks=[]},_drainRequestsQueue:function _drainRequestsQueue(){var t=this;this._requestsQueue.forEach(,this._requestsQueue=[]},_addToRequestsQueue:function _addToRequestsQueue(e){this._requestsQueue.push({methodName:e.callee.name,args:e})},identifyUser:function identifyUser(){var e=Helpers.App.getUser(),t=Helpers.UserSegment.getUserLocationCookie();this.identify(e.id,{name:Helpers.App.getTrackerId(),email:e.email,hasSubscription:this._hasSubscription(),subscription_type:this._subscriptionType(),status:e.status,country:t,unsubscribe_code:e.unsubscribe_code}),AlgoliaAnalyticsClient.identifyLoggedInUser(e.id)},identifyNotLoggedUser:function identifyNotLoggedUser(){var e=this._getPlaceholderEmailForUser();this.identify(null,{name:Helpers.App.getTrackerId(),email:e})},purchaseSuccess:function purchaseSuccess(t){var e,i,n,s=this,r="",a="",o=Service.GuestCheckout.getInstance().getToken();t.category=window._pl_category,t.stage_type=Helpers.StageType._types[window._stageData.stage_data.image_type]||"No Info",t.tags=Helpers.StageType.getStageTags()||"No Info",t.background=Helpers.StageType.getBackgroundOrColorID()||"No Info",t.thumb=window._stageData.stage_data.large_thumb||"No Info",t.slug=window._stageData.stage_data.slug||"No Info",!(t.videoV5=null)===Helpers.StageType.isVideoV5()&&(t.videoV5=1),a=!0===Helpers.StageType.isVideo()?":fusionvideo":":image",Helpers.App.getSubscription()?(n=a+":withSubscription",this._triggerLogoSurvey(t,"survey_logo_subscribers")):(n=a,o?(t.label="guestcheckout",t.guest_token=o,t.card_type="",t.last_four="",billing=Service.GuestCheckout.getInstance().getGuestBillingInfo(o),billing.then(function(e){e.billing_info.card_type&&(t.card_type=e.billing_info.card_type),e.billing_info.last_four&&(t.last_four=e.billing_info.last_four),s._baseSend("email:purchase:success",t)})):this._baseSend("email:purchase:success",t),this._triggerLogoSurvey(t,"survey_logo_singlep")),this._baseSend("Purchase:success"+n+":client",t),e=t.stage_id,Helpers.StageType.getBackgroundID()&&(r="-"+Helpers.StageType.getBackgroundID()),i="-"+t.resolution_id,Helpers.App.sendEcommerceTransaction({amount_in_cents:t.amount_in_cents,sku:e+r+i,productName:Helpers.StageType.getStageInfo().name,invoice_number:t.invoice_number}),Helpers.App.sendEnvatoTracking({trackingCode:18519,orderId:t.invoice_number,customerId:Helpers.App.getUser().id,subtotal:t.amount_in_cents,category:window._pl_category,sku:e+r+i})},subscriptionSuccess:function subscriptionSuccess(t){var i=this,e=t.event+":client",n=Service.GuestCheckout.getInstance().getToken();this._baseSend(e,t),n?(t.label="guestcheckout",t.guest_token=n,t.card_type="",t.last_four="",billing=Service.GuestCheckout.getInstance().getGuestBillingInfo(n),billing.then(function(e){e.billing_info.card_type&&(t.card_type=e.billing_info.card_type),e.billing_info.last_four&&(t.last_four=e.billing_info.last_four),i._baseSend("email:subscription:success",t)})):this._baseSend("email:subscription:success",t),!0===CookiesUtils.getStatisticsSetting()&&(document.cookie="userStatus=Subscriber; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/"),Helpers.App.sendEcommerceTransaction({amount_in_cents:t.amount_in_cents,sku:t.plan_recurly_uuid,productName:t.plan_name+"_subscription",invoice_number:t.invoice_number}),Helpers.App.sendEnvatoTracking({trackingCode:18520,orderId:t.invoice_number,customerId:t.user_id,subtotal:t.amount_in_cents,category:t.page_category,sku:t.plan_recurly_uuid})},showSubscriptionFromPurchase:function showSubscriptionFromPurchase(e){this._baseSend("Purchases:JumpToSubscriptions",e)},freeDownload:function freeDownload(e){!(e.videoV5=null)===Helpers.StageType.isVideoV5()&&(e.videoV5=1),this._baseSend("Download:free",e)},downloadClick:couponGiftGenerated:function couponGiftGenerated(e){this._baseSend("coupon:generated",e)},freeStageDownload:function freeDownload(e){!(e.videoV5=null)===Helpers.StageType.isVideoV5()&&(e.videoV5=1),this._baseSend("Download:freeStage",e),this._baseSend("email:freeStageDownload",e)},freeVideoDownload:function freeVideoDownload(e){this._baseSend("Video:freeDownload",e)},lowResFreeDownload:function lowResFreeDownload(e){this._baseSend("Lowres:freeDownload",e)},subscriptionDownload:function subscriptionDownload(e){e.category=window._pl_category,e.stage_type=Helpers.StageType._types[window._stageData.stage_data.image_type]||"No Info",e.tags=Helpers.StageType.getStageTags()||"No Info",e.background=Helpers.StageType.getBackgroundOrColorID()||"No Info",e.thumb=window._stageData.stage_data.large_thumb||"No Info",e.slug=window._stageData.stage_data.slug||"No Info",!(e.videoV5=null)===Helpers.StageType.isVideoV5()&&(e.videoV5=1),this._triggerLogoSurvey(e,"survey_logo_subscribers"),this._baseSend("Download:subscription",e)},subscriptionDownloadFromGrid:function subscriptionDownloadFromGrid(e){e.category=window._pl_category,e.stage_type=Helpers.StageType._types[e.imageType]||"No Info",e.background=null,e.tags=null,this._baseSend("Download:subscription",e)},packDownload:function packDownload(e){this._baseSend("Download:pack",e)},orderJersey:function orderJersey(e){this._baseSend("order.jersey",e)},designService:function designService(e){this._baseSend("design.service",e)},stageError:function stageError(e){this._baseSend("stage.error",e)},stageErrorByEventType:resultShown:function resultShown(e){var t=performance&&performance.memory;t&&(e.totalJSHeapSize=t.totalJSHeapSize,e.usedJSHeapSize=t.usedJSHeapSize,e.jsHeapSizeLimit=t.jsHeapSizeLimit),window.WebGLMemoryEstimator&&(e.peakWebGLMem=WebGLMemoryEstimator.getLastPeak()),e.stageTags=Helpers.StageType.getStageTags(),e.category=window._pl_category,!(e.videoV5=null)===Helpers.StageType.isVideoV5()&&(e.videoV5=1),this._baseSend("result.shown",e),this._baseSend("email:result.shown",e),this._baseSend("email:StageModified",e)},slowProcess:function slowProcess(e){this._baseSend("slow.process",e)},openFAQ:cropKeydownEnter:searchNoResults:function searchNoResults(e){e.userIp=window.userIp,this._baseSend("search:no.results",e)},assetsSearchNoResults:function assetsSearchNoResults(e){this._baseSend("assets.search.no.results",e)},searchFewResults:function searchFewResults(e){this._baseSend("search:few.results",e)},searchSuccessfulResults:function searchSuccessfulResults(e){this._baseSend("search:success",e),this._baseSend("email:search:success",e)},deletedAsset:function deletedAsset(e){this._baseSend("deleted.preselected.asset",e)},missingAsset:function missingAsset(e){this._baseSend("missing.preselected.asset",e)},imageLoadFail:function missingAsset(e){this._baseSend("image.load.fail",e)},sendPageView:function sendPageView(e){"function"==typeof ga?ga("send","pageview",window.location.pathname):this._retryPageView(e)},_retryPageView:function _retryPageView(e){null!==this.gaLoadTimeout&&clearTimeout(this.gaLoadTimeout),this.gaLoadTimeout=setTimeout(function(){this.sendPageView(e)}.bind(this),300)},userLogin:function userLogin(e){var t=this.getUserTraits().email;e.label=e.authenticated_by,e.placeholder_email_login=t,this.identifyUser(),this._baseSend("user:login:client",e),this._baseServerSend("user:login",e),this._baseSend("email:user:login",e)},pricingModalStillshots:function pricingModalStillshots(e){this._baseSend("PricingModal:Stillshots:Opens",e),this._baseSend("email:PricingModal:Opens",e)},premiumAssetsModalOpenSubscribtion:function premiumAssetsModalOpenSubscribtion(e){this._baseSend("PricingModal:PremiumAssets:Opens",e)},premiumAssetsModalOpen:function premiumAssetsModalOpen(e){this._baseSend("PremiumAssetsModal:Opens",e)},pricingModalVideos:function pricingModalVideos(e){this._baseSend("PricingModal:Videos:Opens",e)},planCTAClicked:function planCTAClicked(e,t){t===UI.SubscriptionsPartial.prototype.PERIOD_ANNUAL?e.plan_name="Unlimited Annual":e.plan_name="Unlimited Monthly",this._baseSend("Plan:CTA:Clicked",e),e.label=location.href,this._baseSend("email:PlanCTA:Clicked",e)},freebiesCTAClicked:function freebiesCTAClicked(e){this._baseSend("freebiesDownloadCTA:Clicked",e)},recurlyFormAfterPlanSelected:function recurlyFormAfterPlanSelected(e){this._baseSend("recurly:cardFormForPlan",e)},grabFromURL:function grabFromURL(e){this._baseSend("Productshot:GrabFromURL",e)},fileUpload:function fileUpload(e){this._baseSend("File:Upload",e)},pastDueLogin:function pastDueLogin(){this._baseSend("pastDue:login")},fixCTAClick:function fixCTAClick(){this._baseSend("pastDue:fixCTAClick")},retryCardBtnClick:function retryCardBtnClick(){this._baseSend("pastDue:retryCardBtnClick")},showBillingUpdateOptionsModal:function showBillingUpdateOptionsModal(){this._baseSend("pastDue:showBillingUpdateOptionsModal")},closedOptionsModal:function closedOptionsModal(){this._baseSend("pastDue:closedOptionsModal")},updateBillingClick:function updateBillingClick(){this._baseSend("pastDue:updateBillingClick")},billingUpdateSuccess:function billingUpdateSuccess(){this._baseSend("pastDue:billingUpdateSuccess")},confirmRetryFailed:function confirmRetryFailed(){this._baseSend("pastDue:confirmRetryFailed")},appliedPastDueInvoice:function appliedPastDueInvoice(){this._baseSend("pastDue:appliedPastDueInvoice")},landedInGiftView:function landedInGiftView(e){this._baseSend("giftView:landed",e)},giftSignup:function giftSignup(e){this._baseSend("giftView:signed",e)},openLicenseModal:function openLicenseModal(){this._baseSend("licenseModal:open")},track:function track(e,t){this._baseSend(e,t)},trackByServer:function track(e,t){this._baseServerSend(e,t)},trackCropperTool:function trackCropperTool(e,t){t.stage_category="Tool",t.tool_type="cropper:image",this._baseSend(e,t)},trackVideoCropperTool:function trackVideoCropperTool(e,t){t.stage_category="Tool",t.tool_type="cropper:video",this._baseSend(e,t)},trackVideoToGifTool:function trackVideoToGifTool(e,t){(t=t||{}).stage_category="Tool",t.tool_type="video_to_gif",this._baseSend(e,t)},ssoTrack:function ssoTrack(e,t){var i=this;try{var n=Helpers.App.getUser();t.type=t.error?"error":"event",t.username=n?n.username:"",t.userEmail=n?n.email:"",i._baseSend(e,t)}catch(s){console.log("ssoTrack has errors")}},ssoServerTrack:function ssoServerTrack(e,t){var i=this;try{var n=Helpers.App.getUser();t.type=t.error?"error":"event",t.username=n?n.username:"",t.userEmail=n?n.email:"",i._baseServerSend(e,t)}catch(s){console.log("ssoServerTrack has errors")}},_hasSubscription:function(){var e=0;return Helpers.App.getSubscription()&&(e=1),e},_subscriptionType:function(){var e="none",t=Helpers.App.getSubscription();return t&&(e=t.is_annual?"annual":"monthly"),e},_baseSendWithoutInfo:function(e){data={},data.event=e,data.type="track",data.page_category="main",this.pristineTrack(e,data)},_getPlaceholderEmailForUser:getUserEmail:function getUserEmail(){var e=Helpers.App.getUser().email;return e||(this._isReady?this._getPlaceholderEmailForUser():void 0)},_baseSend:function(e,t){var i,n,s,r,a=Object.assign({},t||{});!1===CookiesUtils.getMarketingSetting()&&CookiesUtils.isMarketingBlacklistedEvent(e)||(r=this.getUserEmail(),!1===CookiesUtils.getStatisticsSetting()&&(r=Helpers.GlobalEventTracker._getPlaceholderEmailForUser(),a=this.hideStatisticsUserData(a)),r&&(a.properties={},a.properties.email=r,a.properties.status=Helpers.App.getUser().status,a.event=e,a.type="track",null!==(i=Helpers.UserSegment.getUserSegmentCookie())&&(a.segment=i)),(n=Helpers.App.getSubscription())&&!0===n.is_annual?a.properties.plan_type="annual":n&&!1===n.is_annual&&(a.properties.plan_type="monthly"),n&&n.plan&&(a.properties.plan_name=n.plan.recurly_uuid),a.page_category=this._getPageCategory(),a.experiment_id=this._getExperimentId(),s=Helpers.App.getNetworkData(),a.downlink=s.downlink,a.networkEffectiveType=s.effectiveType,a.rtt=s.rtt,a.saveNetworkData=s.saveData,a.deviceMemory=navigator.deviceMemory,this.pristineTrack(e,a))},_baseServerSend:function(n,e){var t,s=Object.assign({},e||{}),i=Helpers.App.getUser().email;!1===CookiesUtils.getMarketingSetting()&&CookiesUtils.isMarketingBlacklistedEvent(n)||(!1===CookiesUtils.getStatisticsSetting()&&(i=Helpers.GlobalEventTracker._getPlaceholderEmailForUser(),s=this.hideStatisticsUserData(s)),s.device_category=Helpers.App.getDeviceCategory(),Helpers.App.getUser().email&&(s.properties={},s.properties.email=i,s.properties.status=Helpers.App.getUser().status,s.event=n,s.type="track",null!==(t=Helpers.UserSegment.getUserSegmentCookie())&&(s.segment=t)),s.page_category=this._getPageCategory(),s.experiment_id=this._getExperimentId(),s.user_agent=window.navigator.userAgent,s.user_ip=window.userIp,GoogleAnalyticsWrapper.getClientId().then(function(e){var t={type:"POST",url:"/api/v2/analytics/track",data:{type:n,page:EventTracker.pageFields(),googleAnalytics:{clientId:e},amplitude:{sessionId:EventTracker.getAmplitudeSessionId()},data:s}},i=Helpers.RequestConfig.prepareConfig(t);$.ajax(i)}))},hideStatisticsUserData:function hideStatisticsUserData(t){var i=!1===CookiesUtils.getStatisticsSetting();return["user_id","userId","email","userEmail","emailUser"].forEach(function(e){i&&!0===Boolean(t[e])&&(t[e]=Helpers.GlobalEventTracker._getPlaceholderEmailForUser()),"user_id"!==e&&"userId"!==e||(t[e]=null)}),t},_addSubscriptionData:function(e){return Helpers.App.getSubscription()?e.hasSubscription=1:e.hasSubscription=0,e},smartTemplateEvent:function SmartTemplateEvent(e,t){t.slug=_stageData.stage_data.slug,t.stage_id=_stageData.stage_data.id,this._baseSend("smartTemplate:"+e,t)},algoliaTrack:function algoliaTrack(e,t){try{window.pageType.is_stage&&(t.slug=window._stageData.stage_data.slug,t.stageId=window._stageData.stage_data.id,t.templateID=Helpers.StageType.getRecordId()),t.page=window.pageType.page_type,t.action=e,this._baseSend("algoliaTrack:"+e,t)}catch(i){console.warn(i)}},noticeError:function noticeError(e,t){var i=t||{},n=new Error(e+": "+JSON.stringify({error:i}));window.newrelic.noticeError(n),console.log(n)},pipEvent:function pipEvent(e,t){(t=t||{}).industries=Helpers.StageType.getStageTags(),this._baseSend("stage:"+e,t)},customExperiencesEvent:function customExperiencesEvent(e,t){this._baseSend("customExperiences:"+e,t)},cancelSubscription:function cancelSubscription(e,t){this._baseSend("cancelSubscription:"+e,t)},cancelAccount:function cancelAccount(e,t){this._baseSend("cancelAccount:"+e,t)},getFreeMonth:function getFreeMonth(e){this._baseSend("FreeMonth:click",e)},subscriptionPlanSelected:function subscriptionPlanSelected(e){var t="planChange_mainSubscriptionModal_"+e.old+":"+e["new"];delete e.old,delete e["new"],this._baseSend(t,e)},userSignup:function userSignup(){var e,t={};t=Helpers.App.getUser(),(e={}).site_id=t?t.id:"",e.path=window.location.pathname,e.label=t.authenticated_by,this._baseSend("user:signup:client",e),this._baseServerSend("email:user:signup",e),this._baseServerSend("user:signup",e),Helpers.App.sendEnvatoSignUp({trackingCode:19603,customerId:t.id,envatoId:t.envato_id})},_getPageCategory:function _getPageCategory(){var e;return(e=Helpers.StageType.pageType()).is_category||e.is_stage||Helpers.App.isCustomExperience()?window._pl_category:"main"},cardFormForPlanStartedFilling:function cardFormForPlanStartedFilling(){this._baseSend("recurly:cardFormForPlan:startedFilling")},purchasePayPalSwitch:function purchasePayPalSwitch(){this._baseSend("Purchase:PayPalSwitch")},purchaseInvalidFields:function purchaseInvalidFields(e){this._baseSend("creditCardPaymentDeclined:invalidFields",{invalidFields:e.fields,details:e.details,message:e.message,code:e.code})},purchaseCardDenied:function purchaseCardDenied(e){this._baseSend("creditCardPaymentDeclined:cardDenied",e)},draftItemSaved:function draftItemSaved(e){this._draftItemBaseEvent("draft:Saved",e),e.stage_found=window.location.href,this._baseSend("email:draft:Saved",e)},draftItemClicked:function draftItemClicked(e){this._draftItemBaseEvent("draft:Click",e)},_draftItemBaseEvent:function _draftItemBaseEvent(e,t){this._baseSend(e,{draftId:t.draftId,stageId:t.stageId,label:window.location.href})},iosShortcutEvent:function iosShortcutEvent(e,t){this._baseSend("shortcut:"+e,{errorMessage:t})},carouselClick:function carouselClick(e,t){var i="carousel:"+e+":clicked";this._baseSend(i,{label:t})},trimmerEvent:function trimmerEvent(e,t){this._baseSend("Trimmer:"+e,Object.assign({},t))},cancelSubscriptionSwitch:function(e,t){t=t||{},currentSubscription=Helpers.App.getSubscription(),!1!==currentSubscription&&(t.current_plan=currentSubscription.plan.recurly_uuid),this._baseSend("cancelSubscriptionSwitch:"+e,t)},deprecatedBlock:function deprecatedBlock(e){Object.assign({},e,{error:!1});this._baseSend("deprecated:block",e)},deprecatedMethod:function deprecatedMethod(e){Object.assign({},e,{error:!1});this._baseSend("deprecated:method",e)},deprecatedClass:function deprecatedClass(e){Object.assign({},e,{error:!1});this._baseSend("deprecated:class",e)},planPriceMismatch:function planPriceMismatch(e){var t=Helpers.App.getSubscription(),i=t&&!t.is_paused,n=Object.assign({},e,{error:!1,hasSubscription:i,isAdmin:Helpers.App.isAdmin()});this._baseSend("priceMismatch:plan",n)},taxAmountMismatch:function taxAmountMismatch(e){var t=Object.assign({},e,{error:!1});this._baseSend("priceMismatch:tax",t)},stagePriceMismatch:function stagePriceMismatch(e){var t=Helpers.App.getSubscription(),i=t&&!t.is_paused,n=Object.assign({},e,{error:!1,hasSubscription:i,isAdmin:Helpers.App.isAdmin()});this._baseSend("priceMismatch:stage",n)},engineTimingEvent:function engineTimingEvent(e,t){var i=Object.assign(t,{timestamp:Date.now(),userLocation:Helpers.App.getUserLocation(),isMobile:Helpers.App.isMobile(),deviceMemory:navigator.deviceMemory},Helpers.App.getNetworkData());this._baseSend(e,i)},heroBannerEvent:function heroBannerEvent(e,t){t=t||{},this._baseSend("heroBanner:"+e,t)},_getExperimentId:function _getExperimentId(){
return $.cookie("experiment_id")},forceSignup:function forceSignup(){var e={};e.path=window.location.pathname,Helpers.GlobalEventTracker._baseSend("forcesignup"),Helpers.GlobalEventTracker._baseSend("email:forcesignup",e)},purchaseCanceled:function purchaseCanceled(){var e={stage_id:Helpers.StageType.getStageID()};Helpers.GlobalEventTracker.track("Purchase:UserCanceledPayment",e),Helpers.GlobalEventTracker.track("email:purchase:canceled",e)},bookmarked:function bookmarked(e){Helpers.GlobalEventTracker.track("BookmarkedStageEvent:Bookmark",e),e.stage_found=window.location.href,Helpers.GlobalEventTracker.track("email:StageBookmarked",e)},downloadCrop:function downloadCrop(e,t){var i=window._stageData||{};i.stage_data&&(i=i.stage_data);var n={category:window._pl_category,stage_type:Helpers.StageType._types[i.image_type]||"No Info",tags:Helpers.StageType.getStageTags()||"No Info",background:Helpers.StageType.getBackgroundOrColorID()||"No Info",thumb:i.large_thumb||"No Info",slug:i.slug||"No Info",label:e};this._baseSend("Download:crop",Object.assign(n,t))},assetIdUndefined:function assetIdUndefined(e){this._baseSend("AssetId:undefined",e)},breadcrumbClicked:function breadcrumbClicked(){this._baseSend("Breadcrumb:navigate:home")},previewModeCTAClicked:function previewModeCTAClicked(e){this._baseSend("previewModeModal:modal:cta-clicked",e)},previewModeModalClosed:function previewModeModalClosed(){this._baseSend("previewModeModal:modal:closed")},previewModeNavigationPrev:function previewModeNavigationPrev(){this._baseSend("previewModeModal:modal:previous")},previewModeNavigationNext:function previewModeNavigationNext(){this._baseSend("previewModeModal:modal:next")},sendBrandEvent:function sendBrandEvent(e,t){this._baseSend("brand:"+e,t)},googleButtonClick:googleSigninSuccess:function googleSigninSuccess(e){e.provider="google",this.externalSsoSigninSuccess(e)},externalSsoSigninSuccess:function externalSsoSigninSuccess(e){var t=e.userData,i=e.provider,n=e.source,s=i+"sso:"+n+":success";"true"===n&&(s=i+":success"),this.ssoTrack(s,{error:!1,user:t.email,message:Helpers.App.capitalizeFirstLetter(i)+" authentication successful.",response:t,label:t.authenticated_by,isGooglePopupEnabled:e.isGoogleFallbackEnabled})},googleSigninError:function googleSigninError(e){this._baseSend("googlesso:"+e.source+":error",{error:e.error,label:"google",isGooglePopupEnabled:e.isGoogleFallbackEnabled})},googleStartFallback:googleFinishFallback:function googleFinishFallback(){this.ssoTrack("google:fallback:finish",{label:Helpers.App.getUrlParam("googleFallback"),error:!1,message:"Google authentication fallback finished."})},recommendedTemplatesOpen:function recommendedTemplatesOpen(){this._baseSend("recommendations:Open")},campaignHeaderstripEvent:function campaignHeaderstripEvent(e){this._baseSend("appHeaderstrip:"+e,{label:"app_Campaign2023"})},_triggerLogoSurvey:function _triggerLogoSurvey(e,t){"Logos"!==e.category||$.cookie("hj_logo_survey")||!0!==CookiesUtils.getStatisticsSetting()||(hj("trigger",t),$.cookie("hj_logo_survey",!0,{expires:3650,path:"/"}))},noResultPageEvent:function noResultPageEvent(e){this._baseSend(e)},aiModelEvent:campaignNotificationEvent:function campaignNotificationEvent(e){this._baseSend(e.campaign+"Notification:"+e.eventName,{label:e.label})},campaignCouponEvent:function campaignCouponEvent(e){this._baseSend(e.campaign+"CouponRedeem:"+e.eventName,{label:e.label})}}),function(){if("Other"!==BrowserDetect.browser){if(GoogleTagManagerWrapper.init(window._pl_dataLayerNames),!0===window.apiPage){var e={"gtm.blocklist":["customScripts","nonGoogleIframes"]};window.dataLayer=window.dataLayer||[],window.dataLayer.push(e),GoogleTagManagerWrapper.pushToDataLayers(e)}var t=window._pl_featureFlags.amplitude_sdk,i=window._pl_featureFlags.segment_sdk;if(t){!function(){"use strict";!function(e,t){var i=e.amplitude||{_q:[],_iq:[]};if(i.invoked)e.console&&console.error&&console.error("Amplitude snippet has been loaded.");else{var n=s=r=a=i.invoked=!0;var o=t.createElement("script");o.type="text/javascript",o.integrity="sha384-GHWzi7MsT/TD3t0f+KUaVeuvPUsuVgdUKegrAWlzO4I83+klmUJna8WTuUunlsg6",o.crossOrigin="anonymous",o.async=!0,o.src="https://cdn.amplitude.com/libs/analytics-browser-1.6.6-min.js.gz",o.onload=var l=t.getElementsByTagName("script")[0];l.parentNode.insertBefore(o,l);for(var c=function(){return this._q=[],this},u=["add","append","clearAll","prepend","set","setOnce","unset","preInsert","postInsert","remove","getUserProperties"],d=0;d<u.length;d++)n(c,u[d]);i.Identify=c;for(var h=p=["getEventProperties","setProductId","setQuantity","setPrice","setRevenue","setRevenueType","setEventProperties"],f=0;f<p.length;f++)n(h,p[f]);i.Revenue=h;var g=["getDeviceId","setDeviceId","getSessionId","setSessionId","getUserId","setUserId","setOptOut","setTransport","reset"],m=["init","add","remove","track","logEvent","identify","groupIdentify","setGroup","revenue","flush"];a(i),i.createInstance=function(){var e=i._iq.push({_q:[]})-1;return a(i._iq[e]),i._iq[e]},e.amplitude=i}}(window,document)}();var n=JSON.parse(localStorage.getItem("ajs_anonymous_id"));AmplitudeWrapper.init({deviceId:n}),Helpers.GlobalEventTracker.addSdk(function(){return AmplitudeWrapper})}i&&(!function(){var i=window.analytics=window.analytics||[];if(i.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{i.invoked=!0,i.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","group","track","ready","alias","page","once","off","on"],i.factory=for(var e=0;e<i.methods.length;e++){var t=i.methods[e];i[t]=i.factory(t)}i.load=i.SNIPPET_VERSION="3.0.0";var n="muJgeE9VHlrfcX82OC6cfevt3cpjGnh8";"production"===window.environment&&(n="HE9nViXWoUR4HoEnrhnOmiq20RGtooSQ"),i.load(n)}}(),Helpers.GlobalEventTracker.addSdk(function(){return window.analytics})),Helpers.GlobalEventTracker.onSdkReady(function(){1==window._pl_isUserLogged&&Helpers.GlobalEventTracker.identifyUser(),r()}),!0===t&&!0===i&&window.analytics.ready(function(){amplitude.setDeviceId(window.analytics.user().anonymousId())}),!0===t&&!1===i&&AmplitudeWrapper.addPlugin(HotjarPlugin);var r=function r(){var e=null,t=null,i=null,n=window._pl_category,s=window._pl_userInfo;window._stageData&&window._stageData.stage_data&&(e=window._stageData.stage_data.id),t=s.id,i=Helpers.GlobalEventTracker.getUserEmail(),!1===CookiesUtils.getStatisticsSetting()&&(i=Helpers.GlobalEventTracker._getPlaceholderEmailForUser(),t=null),Helpers.GlobalEventTracker.pageView({properties:{email:i,status:s.status},userId:t,stage_id:e,page_category:n,page_type:window.pageType.page_type,experiment_id:$.cookie("experiment_id")})}}}(),this,function(_,h){ction f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e){return l(e)&&1===e.nodeType}e,t){return e.getAttribute(t)}return it++}(e,t){void 0===t&&(t={});var i=t.eventBusKey;if(i){if(!e[i].nodeName)throw new Error('The eventBusKey "'+i+'" does not refer to an element.');e.eventBusEl_=e[i]}else e.eventBusEl_=b("span",{className:"vjs-event-bus"});return g(e,Tt),e.on("dispose",,e}){("undefined"==typeof n.callback)throw new Error("callback argument missing");var i,s,r=!1,a=o=n.xhr||null;o||(o=n.cors||n.useXDR?new pe.XDomainRequest:new pe.XMLHttpRequest);var l,c=o.url=n.uri||n.url,u=o.method=n.method||"GET",d=n.body||n.data,h=o.headers=n.headers||{},p=!!n.sync,f=!1,g={body:void 0,headers:{},statusCode:0,method:u,url:c,rawRequest:o};if("json"in n&&!1!==n.json&&(f=!0,h.accept||h.Accept||(h.Accept="application/json"),"GET"!==u&&"HEAD"!==u&&(h["content-type"]||h["Content-Type"]||(h["Content-Type"]="application/json"),d=JSON.stringify(!0===n.json?d:n.json))),o.onreadystatechange=o.onload=e,o.onerror=t,o.onprogress=function(){},o.onabort=function(){s=!0},o.ontimeout=t,o.open(u,c,!p,n.username,n.password),p||(o.withCredentials=!!n.withCredentials),!p&&0<n.timeout&&(l=setTimeout(n.timeout)),o.setRequestHeader)for(i in h)h.hasOwnProperty(i)&&o.setRequestHeader(i,h[i]);else if(n.headers&&!n.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(o.responseType=n.responseType),"beforeSend"in n&&"function"==typeof n.beforeSend&&n.beforeSend(o),o.send(d||null),o}tion ye(t,e,r){r s,a,o,l=t;if(n(),e.startTime=i(),n(),"-->"!==t.substr(0,3))throw new ge(ge.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+l);t=t.substr(3),n(),e.endTime=i(),n(),s=t,a=e,o=new ve,_e(s,/:/,/\s/),a.region=o.get("region",null),a.vertical=o.get("vertical",""),a.line=o.get("line","auto"),a.lineAlign=o.get("lineAlign","start"),a.snapToLines=o.get("snapToLines",!0),a.size=o.get("size",100),a.align=o.get("align","middle"),a.position=o.get("position",{start:0,left:0,middle:50,end:100,right:100},a.align),a.positionAlign=o.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},a.align)}nction Se(){}function Ce(e,t,i){Se.call(this),this.cue=t,this.cueDiv=be(e,t.text);var n={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(n,this.cueDiv),this.div=e.document.createElement("div"),n={direction:function(e){r t=[],i="";if(!e||!e.childNodes)return"ltr";for(s(t,e);i=r(t);)for(var n=0;n<i.length;n++)if(we(i.charCodeAt(n)))return"rtl";return"ltr"}(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(n),this.div.appendChild(this.cueDiv);var s=0;switch(t.positionAlign){case"start":s=t.position;break;case"middle":s=t.position-t.size/2;break;case"end":s=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(s,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(s,"%"),height:this.formatStyle(t.size,"%")}),this.move=nction Ee(){}ction xe(e,t,i){e.setTimeout(function(){return function u(i,e,n,s,r,a){void 0===i&&(i={}),void 0===e&&(e=[]),void 0===r&&(r=[]),void 0===a&&(a=!1);var t=e,o=t[0],l=t.slice(1);if("string"==typeof o)u(i,fn[o],n,s,r,a);else if(o){var c=Le(s,o);if(!c.setSource)return r.push(c),u(i,l,n,s,r,a);c.setSource(g({},i),}else l.length?u(i,l,n,s,r,a):a?n(i,r):u(i,fn["*"],n,s,r,!0)}(t,fn[t.type],i,e)},1)} Be(){var e=o(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]);return Be=function(){return e},e}tion Ge(){}_=_&&_.hasOwnProperty("default")?_["default"]:_,h=h&&h.hasOwnProperty("default")?h["default"]:h;var Ve="7.3.0",We=[],qe=Ye="VIDEOJS"),Xe=Ye.createLogger,Qe=Ke=Object.prototype.toString,Je=Ze=e("querySelector"),et=e("querySelectorAll"),tt=Object.freeze({isReal:v,isEl:y,isInFrame:i,createEl:b,textContent:w,prependTo:S,hasClass:C,addClass:T,removeClass:k,toggleClass:E,setAttributes:I,getAttributes:A,getAttribute:t,setAttribute:P,removeAttribute:x,blockTextSelection:M,unblockTextSelection:D,getBoundingClientRect:L,findPosition:N,getPointerPosition:O,isTextNode:R,emptyEl:U,normalizeContent:H,appendContent:B,insertContent:$,isSingleLeftClick:F,$:Ze,$$:et}),it=1,nt={},st="vdata"+(new Date).getTime(),rt=!1;!);var at,ot=["touchstart","touchmove"],lt=Object.freeze({fixEvent:Y,on:X,off:Q,trigger:K,one:J}),ct=!1,ut=v()&&"complete"===h.readyState?ct=!0:J(_,"load",function(){ct=!0});var dt,ht=pt=ft=gt=mt=function(){};mt.prototype.allowedEvents_={},mt.prototype.addEventListener=mt.prototype.on=function(e,t){var i=this.addEventListener;this.addEventListener=function(){},X(this,e,t),this.addEventListener=i},mt.prototype.removeEventListener=mt.prototype.off=mt.prototype.one=mt.prototype.dispatchEvent=mt.prototype.trigger=mt.prototype.queueTrigger=function(e){var t=this;dt||(dt=new Map);var i=e.type||e,n=dt.get(this);n||(n=new Map,dt.set(this,n));var s=n.get(i);n["delete"](i),_.clearTimeout(s);var r=_.setTimeout(0);n.set(i,r)};var vt=_t=yt=bt=wt=function(e){if("function"!=typeof e)throw new Error("Invalid listener; must be a function.")},St=Ct=Tt={on:one:off:trigger:,kt={state:{},setState:,Et=function(){ar e=l.prototype;return e.dispose=e.player=function(){return this.player_},e.options=e.el=function(){return this.el_},e.createEl=e.localize=e.contentEl=e.id=function(){return this.id_},e.name=function(){return this.name_},e.children=function(){return this.children_},e.getChildById=function(e){return this.childIndex_[e]},e.getChild=e.addChild=e.removeChild=e.initChildren=e.buildCSSClass=function(){return""},e.ready=e.triggerReady=e.$=function(e,t){return Ze(e,t||this.contentEl())},e.$$=e.hasClass=function(e){return C(this.el_,e)},e.addClass=function(e){T(this.el_,e)},e.removeClass=function(e){k(this.el_,e)},e.toggleClass=function(e,t){E(this.el_,e,t)},e.show=function(){this.removeClass("vjs-hidden")},e.hide=function(){this.addClass("vjs-hidden")},e.lockShowing=function(){this.addClass("vjs-lock-showing")},e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.getAttribute=e.setAttribute=e.removeAttribute=e.width=function(e,t){return this.dimension("width",e,t)},e.height=e.dimensions=e.dimension=e.currentDimension=e.currentDimensions=e.currentWidth=function(){return this.currentDimension("width")},e.currentHeight=function(){return this.currentDimension("height")},e.focus=function(){this.el_.focus()},e.blur=function(){this.el_.blur()},e.emitTapEvents=function(){var n,t=0,s=null;this.on("touchstart",,this.on("touchmove",;var e=function(){n=!1};this.on("touchleave",e),this.on("touchcancel",e),this.on("touchend",},e.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e,t=ft(this.player(),this.player().reportUserActivity);this.on("touchstart",;var i=this.on("touchmove",t),this.on("touchend",i),this.on("touchcancel",i)}},e.setTimeout=e.clearTimeout=function(e){_.clearTimeout(e);var t=function(){};return t.guid="vjs-timeout-"+e,this.off("dispose",t),e},e.setInterval=e.clearInterval=e.requestAnimationFrame=e.cancelAnimationFrame=l.registerComponent=function(e,t){if("string"!=typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var i=l.getComponent("Tech"),n=i&&i.isTech(t),s=l===t||l.prototype.isPrototypeOf(t.prototype);if(n||!s)throw new Error('Illegal component, "'+e+'"; '+(n?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");e=ie(e),l.components_||(l.components_={});var r=l.getComponent("Player");if("Player"===e&&r&&r.players){var a=r.players,o=Object.keys(a);if(a&&0<o.length&&o.map(function(e){return a[e]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return l.components_[e]=t},l.getComponent=l}();Et.prototype.supportsRaf_="function"==typeof _.requestAnimationFrame&&"function"==typeof _.cancelAnimationFrame,Et.registerComponent("Component",Et);for(var It,At,Pt,xt,Mt,Dt=_.navigator&&_.navigator.userAgent||"",Lt=/AppleWebKit\/([\d.]+)/i.exec(Dt),Nt=Lt?parseFloat(Lt.pop()):null,Ot=/iPad/i.test(Dt),Rt=/iPhone/i.test(Dt)&&!Ot,Ut=/iPod/i.test(Dt),Ht=Rt||Ot||Ut,Bt=(It=Dt.match(/OS (\d+)_/i))&&It[1]?It[1]:null,$t=/Android/i.test(Dt),Ft=),jt=$t&&Ft<5&&Nt<537,zt=/Firefox/i.test(Dt),Gt=/Edge/i.test(Dt),Vt=!Gt&&(/Chrome/i.test(Dt)||/CriOS/i.test(Dt)),Wt=(At=Dt.match(/(Chrome|CriOS)\/(\d+)/))&&At[2]?parseFloat(At[2]):null,qt=(!(xt=(Pt=/MSIE\s(\d+)\.\d/.exec(Dt))&&parseFloat(Pt[1]))&&/Trident\/7.0/i.test(Dt)&&/rv:11.0/.test(Dt)&&(xt=11),xt),Yt=/Safari/i.test(Dt)&&!Vt&&!$t&&!Gt,Xt=(Yt||Ht)&&!Vt,Qt=(v()&&("ontouchstart"in _||_.navigator.maxTouchPoints||_.DocumentTouch&&_.document instanceof _.DocumentTouch)),Kt=Object.freeze({IS_IPAD:Ot,IS_IPHONE:Rt,IS_IPOD:Ut,IS_IOS:Ht,IOS_VERSION:Bt,IS_ANDROID:$t,ANDROID_VERSION:Ft,IS_NATIVE_ANDROID:jt,IS_FIREFOX:zt,IS_EDGE:Gt,IS_CHROME:Vt,CHROME_VERSION:Wt,IE_VERSION:qt,IS_SAFARI:Yt,IS_ANY_SAFARI:Xt,TOUCH_ENABLED:Qt}),Jt={},Zt=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],ei=Zt[0],ti=0;ti<Zt.length;ti++)if(Zt[ti][1]in h){Mt=Zt[ti];break}if(Mt)for(var ii=0;ii<Mt.length;ii++)Jt[ei[ii]]=Mt[ii];le.prototype.code=0,le.prototype.message="",le.prototype.status=null,le.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],le.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var ni=0;ni<le.errorTypes.length;ni++)le[le.errorTypes[ni]]=ni,le.prototype[le.errorTypes[ni]]=ni;var si=ri=function(i){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce({cues:i.cues&&Array.prototype.map.call(i.cues,})},ai=oi=li="vjs-modal-dialog",ci=function(n){(e,n);var t=e.prototype;return t.createEl=t.dispose=t.buildCSSClass=t.handleKeyPress=t.label=t.description=t.open=t.opened=t.close=t.closeable=t.fill=t.fillWith=t.empty=t.content=t.conditionalFocus_=t.conditionalBlur_=t.handleKeyDown=t.focusableEls_=e}(Et);ci.prototype.options_={pauseOnOpen:!0,temporary:!0},Et.registerComponent("ModalDialog",ci);var ui=mt);for(var di in ui.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},ui.prototype.allowedEvents_)ui.prototype["on"+di]=null;var hi=function(e,t){for(var i=0;i<e.length;i++)Object.keys(e[i]).length&&t.id!==e[i].id&&(e[i].enabled=!1)},pi=ui),fi=gi=ui),mi=ui),vi=),_i=),yi={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},bi={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},wi={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Si={disabled:"disabled",hidden:"hidden",showing:"showing"},Ci=mt),Ti=ki=Ei=Ii=Ai=Object.freeze({parseUrl:Ti,getAbsoluteURL:ki,getFileExtension:Ei,isCrossOrigin:Ii}),Pi=xi=Object.prototype.toString;"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var Mi=de(,Di=(Mi.left,Mi.right,Function.prototype.toString),Li=/^\s*class\b/,Ni=Oi=Object.prototype.toString,Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,Ui=Hi=Object.prototype.toString,Bi=Object.prototype.hasOwnProperty,$i=Fi=ji=zi=Object.prototype.hasOwnProperty,Gi=pe;pe.XMLHttpRequest=_.XMLHttpRequest||function(){},pe.XDomainRequest="withCredentials"in new pe.XMLHttpRequest?pe.XMLHttpRequest:_.XDomainRequest,["get","put","post","patch","head","delete"],;var Vi=Wi=function(c){function e(e){var t;if(void 0===e&&(e={}),!e.tech)throw new Error("A tech was not provided.");var i=ne(e,{kind:wi[e.kind]||"subtitles",language:e.language||e.srclang||""}),n=Si[i.mode]||"disabled",s=i["default"];"metadata"!==i.kind&&"chapters"!==i.kind||(n="hidden"),(t=c.call(this,i)||this).tech_=i.tech,t.cues_=[],t.activeCues_=[];var r=new _i(t.cues_),a=new _i(t.activeCues_),o=!1,l=ft(f(f(t)),
;return"disabled"!==n&&t.tech_.ready(function(){t.tech_.on("timeupdate",l)},!0),Object.defineProperties(f(f(t)),{"default":{get:function(){return s},set:function(){}},mode:{get:function(){return n},set:,cues:{get:set:function(){}},activeCues:{get:set:function(){}}}),i.src?(t.src=i.src,i.src,f(f(t)))):t.loaded_=!0,t}p(e,c);var t=e.prototype;return t.addCue=t.removeCue=e}(Ci);Wi.prototype.allowedEvents_={cuechange:"cuechange"};var qi=Ci),Yi=Ci),Xi=function(s){function e(e){var t,i;void 0===e&&(e={}),t=s.call(this)||this;var n=new Wi(e);return t.kind=n.kind,t.src=n.src,t.srclang=n.language,t.label=n.label,t["default"]=n["default"],Object.defineProperties(f(f(t)),{readyState:{get:function(){return i}},track:{get:function(){return n}}}),i=0,n.addEventListener("loadeddata",,t}return p(e,s),e}(mt);Xi.prototype.allowedEvents_={load:"load"},Xi.NONE=0,Xi.LOADING=1,Xi.LOADED=2,Xi.ERROR=3;var Qi={audio:{ListClass:pi,TrackClass:qi,capitalName:"Audio"},video:{ListClass:gi,TrackClass:Yi,capitalName:"Video"},text:{ListClass:mi,TrackClass:Wi,capitalName:"Text"}};Object.keys(Qi).forEach(;var Ki={remoteText:{ListClass:mi,TrackClass:Wi,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:vi,TrackClass:Xi,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Ji=ne(Qi,Ki);Ki.names=Object.keys(Ki),Qi.names=Object.keys(Qi),Ji.names=[].concat(Ki.names).concat(Qi.names);var Zi=Object.create||);((ge.prototype=Zi(Error.prototype)).constructor=ge).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},ve.prototype={set:get:has:alt:integer:percent:;var en={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"\u200e","&rlm;":"\u200f","&nbsp;":" "},tn={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},nn={v:"title",lang:"lang"},sn={rt:"ruby"},rn=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];Se.prototype.applyStyles=Se.prototype.formatStyle=(Ce.prototype=Zi(Se.prototype)).constructor=Ce,Te.prototype.move=Te.prototype.overlaps=Te.prototype.overlapsAny=Te.prototype.within=Te.prototype.overlapsOppositeAxis=Te.prototype.intersectPercentage=Te.prototype.toCSSCompatValues=Te.getSimpleBoxPosition=Ee.StringDecoder=Ee.convertCueToDOMTree=Ee.processCues=(Ee.Parser=.prototype={reportOrThrowError:parse:function(e){r r=this;e&&(r.buffer+=r.decoder.decode(e,{stream:!0}));try{var n;if("INITIAL"===r.state){if(!/\r\n|\n/.test(r.buffer))return this;var s=(n=t()).match(/^WEBVTT([ \t].*)?$/);if(!s||!s[0])throw new ge(ge.Errors.BadSignature);r.state="HEADER"}for(var a=!1;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(a?a=!1:n=t(),r.state){case"HEADER":/:/.test(n)?i(n):n||(r.state="ID");continue;case"NOTE":n||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){r.state="NOTE";break}if(!n)continue;if(r.cue=new(r.vttjs.VTTCue||r.window.VTTCue)(0,0,""),r.state="CUE",-1===n.indexOf("-->")){r.cue.id=n;continue}case"CUE":try{ye(n,r.cue,r.regionList)}catch(e){r.reportOrThrowError(e),r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":var o=-1!==n.indexOf("-->");if(!n||o&&(a=!0)){r.oncue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}r.cue.text&&(r.cue.text+="\n"),r.cue.text+=n;continue;case"BADCUE":n||(r.state="ID");continue}}}catch(e){r.reportOrThrowError(e),"CUETEXT"===r.state&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state="INITIAL"===r.state?"BADWEBVTT":"BADCUE"}return this},flush:;var an=Ee,on={"":1,lr:1,rl:1},ln={start:1,middle:1,end:1,left:1,right:1};Ae.prototype.getCueAsHTML=var cn=Ae,un={"":!0,up:!0},dn=hn=de(;hn.WebVTT,hn.VTTCue,hn.VTTRegion;var pn=function(t){(i,t);var e=i.prototype;return e.triggerSourceset=e.manualProgressOn=e.manualProgressOff=e.trackProgress=e.onDurationChange=e.buffered=e.bufferedPercent=e.stopTrackingProgress=e.manualTimeUpdatesOn=e.manualTimeUpdatesOff=e.trackCurrentTime=e.stopTrackingCurrentTime=e.dispose=e.clearTracks=e.cleanupAutoTextTracks=e.reset=function(){},e.error=e.played=e.setCurrentTime=e.initTrackListeners=e.addWebVttScript_=e.emulateTextTracks=e.addTextTrack=e.createRemoteTextTrack=e.addRemoteTextTrack=e.removeRemoteTextTrack=e.getVideoPlaybackQuality=e.setPoster=function(){},e.playsinline=function(){},e.setPlaysinline=function(){},e.overrideNativeAudioTracks=function(){},e.overrideNativeVideoTracks=function(){},e.canPlayType=function(){return""},i.canPlayType=function(){return""},i.canPlaySource=i.isTech=i.registerTech=i.getTech=i}(Et);Ji.names.forEach(,pn.prototype.featuresVolumeControl=!0,pn.prototype.featuresMuteControl=!0,pn.prototype.featuresFullscreenResize=!1,pn.prototype.featuresPlaybackRate=!1,pn.prototype.featuresProgressEvents=!1,pn.prototype.featuresSourceset=!1,pn.prototype.featuresTimeupdateEvents=!1,pn.prototype.featuresNativeTextTracks=!1,pn.withSourceHandlers=Et.registerComponent("Tech",pn),pn.registerTech("Tech",pn),pn.defaultTechOrder_=[];var fn={},gn={},mn={},vn={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},_n={setCurrentTime:1},yn={play:1,pause:1},bn={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"},wn=Sn=Et);Et.registerComponent("MediaLoader",Sn);var Cn=function(s){(e,s);var t=e.prototype;return t.createEl=t.dispose=function(){this.controlTextEl_=null,s.prototype.dispose.call(this)},t.createControlTextEl=t.controlText=t.buildCSSClass=function(){return"vjs-control vjs-button "+s.prototype.buildCSSClass.call(this)},t.enable=t.disable=t.handleClick=function(){},t.handleFocus=function(){X(h,"keydown",ft(this,this.handleKeyPress))},t.handleKeyPress=t.handleBlur=function(){Q(h,"keydown",ft(this,this.handleKeyPress))},e}(Et);Et.registerComponent("ClickableComponent",Cn);var Tn=function(n){(e,n);var t=e.prototype;return t.dispose=t.createEl=t.update=t.setSrc=t.handleClick=function(){this.player_.controls()&&(this.player_.paused()?ue(this.player_.play()):this.player_.pause())},e}(Cn);Et.registerComponent("PosterImage",Tn);var kn="#222",En={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},In=function(r){(e,r);var t=e.prototype;return t.preselectTrack=function(){for(var e,t,i,n={captions:1,subtitles:1},s=this.player_.textTracks(),r=this.player_.cache_.selectedLanguage,a=0;a<s.length;a++){var o=s[a];r&&r.enabled&&r.language===o.language?o.kind===r.kind?i=o:i||(i=o):r&&!r.enabled?t=e=i=null:o["default"]&&("descriptions"!==o.kind||e?o.kind in n&&!t&&(t=o):e=o)}i?i.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},t.toggleDisplay=t.createEl=t.clearDisplay=t.updateDisplay=t.updateForTrack=e}(Et);Et.registerComponent("TextTrackDisplay",In);var An=Et);Et.registerComponent("LoadingSpinner",An);var Pn=Cn);Et.registerComponent("Button",Pn);var xn=function(n){(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-big-play-button"},t.handleClick=t.handleKeyPress=t.handleMouseDown=function(){this.mouseused_=!0},e}(Pn);xn.prototype.controlText_="Play Video",Et.registerComponent("BigPlayButton",xn);var Mn=function(n){(e,
n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-close-button "+n.prototype.buildCSSClass.call(this)},t.handleClick=e}(Pn);Et.registerComponent("CloseButton",Mn);var Dn=function(n){(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-play-control "+n.prototype.buildCSSClass.call(this)},t.handleClick=function(){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleSeeked=t.handlePlay=t.handlePause=t.handleEnded=function(){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",this.handleSeeked)},e}(Pn);Dn.prototype.controlText_="Play",Et.registerComponent("PlayToggle",Dn);var Ln=function(e,t){e=e<0?0:e;var i=Math.floor(e%60),n=Math.floor(e/60%60),s=Math.floor(e/3600),r=Math.floor(t/60%60),a=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(s=n=i="-"),(s=0<s||0<a?s+":":"")+(n=((s||10<=r)&&n<10?"0"+n:n)+":")+(i<10?"0"+i:i)},Nn=Ln,On=function(n){(e,n);var t=e.prototype;return t.createEl=function(){var e=this.buildCSSClass(),t=n.prototype.createEl.call(this,"div",{className:e+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text">'+this.localize(this.labelText_)+" </span>"});return this.contentEl_=b("span",{className:e+"-display"},{"aria-live":"off"}),this.updateTextNode_(),t.appendChild(this.contentEl_),t},t.dispose=t.updateTextNode_=t.formatTime_=t.updateFormattedTime_=t.updateContent=function(){},e}(Et);On.prototype.labelText_="Time",On.prototype.controlText_="Time",Et.registerComponent("TimeDisplay",On);var Rn=function(n){(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-current-time"},t.updateContent=t.handleEnded=e}(On);Rn.prototype.labelText_="Current Time",Rn.prototype.controlText_="Current Time",Et.registerComponent("CurrentTimeDisplay",Rn);var Un=function(n){function e(e,t){var i;return(i=n.call(this,e,t)||this).on(e,"durationchange",i.updateContent),i.on(e,"loadedmetadata",i.throttledUpdateContent),i}p(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-duration"},t.updateContent=function(){var e=this.player_.duration();e&&this.duration_!==e&&(this.duration_=e,this.updateFormattedTime_(e))},e}(On);Un.prototype.labelText_="Duration",Un.prototype.controlText_="Duration",Et.registerComponent("DurationDisplay",Un);var Hn=function(e){function t(){return e.apply(this,arguments)||this}return p(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},t}(Et);Et.registerComponent("TimeDivider",Hn);var Bn=function(n){(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-remaining-time"},t.formatTime_=t.updateContent=function(){this.player_.duration()&&(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))},t.handleEnded=e}(On);Bn.prototype.labelText_="Remaining Time",Bn.prototype.controlText_="Remaining Time",Et.registerComponent("RemainingTimeDisplay",Bn);var $n=function(n){(e,n);var t=e.prototype;return t.createEl=t.dispose=function(){this.contentEl_=null,n.prototype.dispose.call(this)},t.updateShowing=e}(Et);Et.registerComponent("LiveDisplay",$n);var Fn=function(n){(e,n);var t=e.prototype;return t.enabled=function(){return this.enabled_},t.enable=t.disable=t.createEl=t.handleMouseDown=t.handleMouseMove=function(){},t.handleMouseUp=t.update=t.calculateDistance=t.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},t.handleKeyPress=function(e){37===e.which||40===e.which?(e.preventDefault(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),this.stepForward())},t.handleBlur=t.handleClick=function(e){e.stopImmediatePropagation(),e.preventDefault()},t.vertical=e}(Et);Et.registerComponent("Slider",Fn);var jn=function(n){(e,n);var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},t.dispose=function(){this.partEls_=null,n.prototype.dispose.call(this)},t.update=function(){var e=this.player_.buffered(),t=this.player_.duration(),i=this.player_.bufferedEnd(),n=this.partEls_,s=this.el_.style.width=s(i,t);for(var r=0;r<e.length;r++){var a=e.start(r),o=e.end(r),l=n[r];l||(l=this.el_.appendChild(b()),n[r]=l),l.style.left=s(a,i),l.style.width=s(o-a,i)}for(var c=n.length;c>e.length;c--)this.el_.removeChild(n[c-1]);n.length=e.length},e}(Et);Et.registerComponent("LoadProgressBar",jn);var zn=Et);Et.registerComponent("TimeTooltip",zn);var Gn=Et);Gn.prototype.options_={children:[]},Ht||$t||Gn.prototype.options_.children.push("timeTooltip"),Et.registerComponent("PlayProgressBar",Gn);var Vn=Et);Vn.prototype.options_={children:["timeTooltip"]},Et.registerComponent("MouseTimeDisplay",Vn);var Wn=function(n){(e,n);var t=e.prototype;return t.setEventHandlers_=t.createEl=t.update_=t.update=function(){var e=n.prototype.update.call(this);return this.update_(this.getCurrentTime_(),e),e},t.getCurrentTime_=t.handleEnded=t.getPercent=function(){var e=this.getCurrentTime_()/this.player_.duration();return 1<=e?1:e||0},t.handleMouseDown=t.handleMouseMove=t.enable=function(){n.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},t.disable=t.handleMouseUp=t.stepForward=t.stepBack=t.handleAction=function(){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleKeyPress=e}(Fn);Wn.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Ht||$t||Wn.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Wn.prototype.playerEvent="timeupdate",Et.registerComponent("SeekBar",Wn);var qn=Et);qn.prototype.options_={children:["seekBar"]},Et.registerComponent("ProgressControl",qn);var Yn=function(n){(e,n);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-fullscreen-control "+n.prototype.buildCSSClass.call(this)},t.handleFullscreenChange=t.handleClick=e}(Pn);Yn.prototype.controlText_="Fullscreen",Et.registerComponent("FullscreenToggle",Yn);var Xn=Et);Et.registerComponent("VolumeLevel",Xn);var Qn=function(n){(e,n);var t=e.prototype;return t.createEl=t.handleMouseDown=t.handleMouseMove=t.checkMuted=t.getPercent=t.stepForward=t.stepBack=t.updateARIAAttributes=t.volumeAsPercentage_=t.updateLastVolume_=e}(Fn);Qn.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Qn.prototype.playerEvent="volumechange",Et.registerComponent("VolumeBar",Qn);var Kn=function(r){(e,r);var t=e.prototype;return t.createEl=t.handleMouseDown=function(){var e=this.el_.ownerDocument;this.on(e,"mousemove",this.throttledHandleMouseMove),this.on(e,"touchmove",this.throttledHandleMouseMove),this.on(e,"mouseup",this.handleMouseUp),this.on(e,"touchend",this.handleMouseUp)},t.handleMouseUp=t.handleMouseMove=e}(Et);Kn.prototype.options_={children:["volumeBar"]},Et.registerComponent("VolumeControl",Kn);var Jn=function(r){(e,r);var t=e.prototype;return t.buildCSSClass=function(){return"vjs-mute-control "+r.prototype.buildCSSClass.call(this)},t.handleClick=function(){var e=this.player_.volume(),t=this.player_.lastVolume_();if(0===e){var i=t<.1?.1:t;this.player_.volume(i),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},t.update=t.updateIcon_=t.updateControlText_=e}(Pn);Jn.prototype.controlText_="Mute",Et.registerComponent("MuteToggle",Jn);var Zn=Et);Zn.prototype.options_={children:["muteToggle","volumeControl"]},Et.registerComponent("VolumePanel",Zn);var es=function(n){(e,n);var t=e.prototype;return t.addItem=function(e){this.addChild(e),e.on("click",ft(this,function(){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==e.name()&&this.menuButton_.focus())}))},t.createEl=t.dispose=function(){this.contentEl_=null,n.prototype.dispose.call(this)},t.handleKeyPress=t.stepForward=t.stepBack=t.focus=e}(Et);Et.registerComponent("Menu",es);var ts=function(s){function e(e,t){var i;void 0===t&&(t={}),(i=s.call(this,e,t)||this).menuButton_=new Pn(e,t),i.menuButton_.controlText(i.controlText_),i.menuButton_.el_.setAttribute("aria-haspopup","true");var n=Pn.prototype.buildCSSClass();return i.menuButton_.el_.className=i.buildCSSClass()+" "+n,i.menuButton_.removeClass("vjs-control"),i.addChild(i.menuButton_),i.update(),i.enabled_=!0,i.on(i.menuButton_,"tap",i.handleClick),i.on(i.menuButton_,"click",i.handleClick),i.on(i.menuButton_,"focus",i.handleFocus),i.on(i.menuButton_,"blur",i.handleBlur),i.on("keydown",i.handleSubmenuKeyPress),i}p(e,s);var t=e.prototype;return t.update=t.createMenu=t.createItems=function(){},t.createEl=t.buildWrapperCSSClass=t.buildCSSClass=t.controlText=t.handleClick=function(){this.one(this.menu.contentEl(),"mouseleave",ft(this,),this.buttonPressed_?this.unpressButton():this.pressButton()},t.focus=function(){this.menuButton_.focus()},t.blur=t.handleFocus=function(){X(h,"keydown",ft(this,this.handleKeyPress))},t.handleBlur=t.handleKeyPress=t.handleSubmenuKeyPress=t.pressButton=t.unpressButton=t.disable=t.enable=e}(Et);Et.registerComponent("MenuButton",ts);var is=ts);Et.registerComponent("TrackButton",is);var ns=function(n){(e,n);var t=e.prototype;return t.createEl=t.handleClick=t.selected=e}(Cn);Et.registerComponent("MenuItem",ns);var ss=function(l){function e(e,t){var n,i=t.track,s=e.textTracks();t.label=i.label||i.language||"Unknown",t.selected="showing"===i.mode,(n=l.call(this,e,t)||this).track=i;var r,a=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.handleTracksChange.apply(f(f(n)),t)},o=return e.on(["loadstart","texttrackchange"],a),s.addEventListener("change",a),s.addEventListener("selectedlanguagechange",o),n.on("dispose",,void 0===s.onchange&&n.on(["tap","click"],,n.handleTracksChange(),n}p(e,l);var t=e.prototype;return t.handleClick=t.handleTracksChange=t.handleSelectedLanguageChange=t.dispose=e}(ns);Et.registerComponent("TextTrackMenuItem",ss);var rs=function(i){(e,i);var t=e.prototype;return t.handleTracksChange=function(){for(var e=this.player().textTracks(),t=!0,i=0,n=e.length;i<n;i++){var s=e[i];if(-1<this.options_.kinds.indexOf(s.kind)&&"showing"===s.mode){t=!1;break}}t!==this.isSelected_&&this.selected(t)},t.handleSelectedLanguageChange=function(){for(var e=this.player().textTracks(),t=!0,i=0,n=e.length;i<n;i++){var s=e[i];if(-1<["captions","descriptions","subtitles"].indexOf(s.kind)&&"showing"===s.mode){t=!1;break}}t&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(ss);Et.registerComponent("OffTextTrackMenuItem",rs);var as=is);Et.registerComponent("TextTrackButton",as);var os=function(a){(e,a);var t=e.prototype
;return t.handleClick=t.update=e}(ns);Et.registerComponent("ChaptersTrackMenuItem",os);var ls=as);ls.prototype.kind_="chapters",ls.prototype.controlText_="Chapters",Et.registerComponent("ChaptersButton",ls);var cs=function(a){(e,a);var t=e.prototype;return t.handleTracksChange=t.buildCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildWrapperCSSClass.call(this)},e}(as);cs.prototype.kind_="descriptions",cs.prototype.controlText_="Descriptions",Et.registerComponent("DescriptionsButton",cs);var us=as);us.prototype.kind_="subtitles",us.prototype.controlText_="Subtitles",Et.registerComponent("SubtitlesButton",us);var ds=function(n){function e(e,t){var i;return t.track={player:e,kind:t.kind,label:t.kind+" settings",selectable:!1,"default":!1,mode:"disabled"},t.selectable=!1,t.name="CaptionSettingsMenuItem",(i=n.call(this,e,t)||this).addClass("vjs-texttrack-settings"),i.controlText(", opens "+t.kind+" settings dialog"),i}return p(e,n),e.prototype.handleClick=e}(ss);Et.registerComponent("CaptionSettingsMenuItem",ds);var hs=as);hs.prototype.kind_="captions",hs.prototype.controlText_="Captions",Et.registerComponent("CaptionsButton",hs);var ps=ss);Et.registerComponent("SubsCapsMenuItem",ps);var fs=as);fs.prototype.kinds_=["captions","subtitles"],fs.prototype.controlText_="Subtitles",Et.registerComponent("SubsCapsButton",fs);var gs=function(a){(e,a);var t=e.prototype;return t.createEl=t.handleClick=t.handleTracksChange=e}(ns);Et.registerComponent("AudioTrackMenuItem",gs);var ms=is);ms.prototype.controlText_="Audio Track",Et.registerComponent("AudioTrackButton",ms);var vs=function(r){(e,r);var t=e.prototype;return t.handleClick=t.update=e}(ns);vs.prototype.contentElType="button",Et.registerComponent("PlaybackRateMenuItem",vs);var _s=function(n){(e,n);var t=e.prototype;return t.createEl=t.dispose=function(){this.labelEl_=null,n.prototype.dispose.call(this)},t.buildCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildWrapperCSSClass.call(this)},t.createMenu=t.updateARIAAttributes=t.handleClick=t.playbackRates=t.playbackRateSupported=t.updateVisibility=function(){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.updateLabel=e}(ts);_s.prototype.controlText_="Playback Rate",Et.registerComponent("PlaybackRateMenuButton",_s);var ys=Et);Et.registerComponent("Spacer",ys);var bs=ys);Et.registerComponent("CustomControlSpacer",bs);var ws=function(e){function t(){return e.apply(this,arguments)||this}return p(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(Et);ws.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},Et.registerComponent("ControlBar",ws);var Ss=ci);Ss.prototype.options_=ne(ci.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Et.registerComponent("ErrorDisplay",Ss);var Cs="vjs-text-track-settings",Ts=["#000","Black"],ks=["#00F","Blue"],Es=["#0FF","Cyan"],Is=["#0F0","Green"],As=["#F0F","Magenta"],Ps=["#F00","Red"],xs=["#FFF","White"],Ms=["#FF0","Yellow"],Ds=["1","Opaque"],Ls=["0.5","Semi-Transparent"],Ns=["0","Transparent"],Os={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Ts,xs,Ps,Is,ks,Ms,As,Es]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Ds,Ls,Ns]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[xs,Ts,Ps,Is,ks,Ms,As,Es]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],"default":2,parser:,textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Ds,Ls]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Ns,Ls,Ds]}};Os.windowColor.options=Os.backgroundColor.options;var Rs=function(n){(e,n);var t=e.prototype;return t.dispose=function(){this.endDialog=null,n.prototype.dispose.call(this)},t.createElSelect_=t.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},t.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},t.createElWinColor_=t.createElColors_=t.createElFont_=t.createElControls_=t.content=t.label=function(){return this.localize("Caption Settings Dialog")},t.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.buildCSSClass=t.getValues=t.setValues=t.setDefaults=t.restoreSettings=t.saveSettings=t.updateDisplay=t.conditionalBlur_=e}(ci);Et.registerComponent("TextTrackSettings",Rs);var Us=Et);Et.registerComponent("ResizeManager",Us);var Hs=Bs=Object.defineProperty({},"innerHTML",{get:set:),$s=Fs=js=Object.defineProperty({},"src",{get:set:),zs=Gs=function(u){(o,u);var e=o.prototype;return e.dispose=e.setupSourcesetHandling_=e.restoreMetadataTracksInIOSNativePlayer_=e.overrideNative_=e.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},e.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},e.proxyNativeTracksForType_=function(e){var i=this,t=Qi[e],s=this.el()[t.getterName],r=this[t.getterName]();if(this["featuresNative"+t.capitalName+"Tracks"]&&s&&s.addEventListener){var n={change:addtrack:function(e){r.addTrack(e.track)},removetrack:,a=this[t.getterName+"Listeners_"]=n,Object.keys(n).forEach(function(e){var t=n[e];s.addEventListener(e,t),i.on("dispose",function(){return s.removeEventListener(e,t)})}),this.on("loadstart",a),this.on("dispose",function(){return i.off("loadstart",a)})}},e.proxyNativeTracks_=e.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var t=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(t,e),o.disposeMediaElement(e),e=t}else{e=h.createElement("video");var i=ne({},this.options_.tag&&A(this.options_.tag));Qt&&!0===this.options_.nativeControlsForTouch||delete i.controls,I(e,g(i,{id:this.options_.techId,"class":"vjs-tech"}))}e.playerId=this.options_.playerId}"undefined"!=typeof this.options_.preload&&P(e,"preload",this.options_.preload);for(var n=["loop","muted","playsinline","autoplay"],s=0;s<n.length;s++){var r=n[s],a=this.options_[r];void 0!==a&&(a?P(e,r,r):x(e,r),e[r]=a)}return e},e.handleLateInit_=e.setCurrentTime=e.duration=e.width=function(){return this.el_.offsetWidth},e.height=function(){return this.el_.offsetHeight},e.proxyWebkitFullscreen_=e.supportsFullScreen=e.enterFullScreen=e.exitFullScreen=function(){this.el_.webkitExitFullScreen()},e.src=e.reset=e.currentSrc=e.setControls=e.addTextTrack=e.createRemoteTextTrack=e.addRemoteTextTrack=e.removeRemoteTextTrack=e.getVideoPlaybackQuality=o}(pn);if(v()){Gs.TEST_VID=h.createElement("video");var Vs=h.createElement("track");Vs.kind="captions",Vs.srclang="en",Vs.label="English",Gs.TEST_VID.appendChild(Vs)}Gs.isSupported=Gs.canPlayType=function(e){return Gs.TEST_VID.canPlayType(e)},Gs.canPlaySource=function(e){return Gs.canPlayType(e.type)},Gs.canControlVolume=Gs.canMuteVolume=Gs.canControlPlaybackRate=Gs.canOverrideAttributes=Gs.supportsNativeTextTracks=Gs.supportsNativeVideoTracks=function(){return!(!Gs.TEST_VID||!Gs.TEST_VID.videoTracks)},Gs.supportsNativeAudioTracks=Gs.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],Gs.prototype.featuresVolumeControl=Gs.canControlVolume(),Gs.prototype.featuresMuteControl=Gs.canMuteVolume(),Gs.prototype.featuresPlaybackRate=Gs.canControlPlaybackRate(),Gs.prototype.featuresSourceset=Gs.canOverrideAttributes(),Gs.prototype.movingMediaElementInDOM=!Ht,Gs.prototype.featuresFullscreenResize=!0,Gs.prototype.featuresProgressEvents=!0,Gs.prototype.featuresTimeupdateEvents=!0,Gs.prototype.featuresNativeTextTracks=Gs.supportsNativeTextTracks(),Gs.prototype.featuresNativeVideoTracks=Gs.supportsNativeVideoTracks(),Gs.prototype.featuresNativeAudioTracks=Gs.supportsNativeAudioTracks();var Ws=Gs.TEST_VID&&Gs.TEST_VID.constructor.prototype.canPlayType,qs=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;Gs.patchCanPlayType=Gs.unpatchCanPlayType=Gs.patchCanPlayType(),Gs.disposeMediaElement=Gs.resetMediaElement=["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(,["muted","defaultMuted","autoplay","loop","playsinline"].forEach(,["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(,["volume","src","poster","preload","playbackRate","defaultPlaybackRate"].forEach(,["pause","load","play"].forEach(,pn.withSourceHandlers(Gs),Gs.nativeSourceHandler={},Gs.nativeSourceHandler.canPlayType=Gs.nativeSourceHandler.canHandleSource=function(e){if(e.type)return Gs.nativeSourceHandler.canPlayType(e.type);if(e.src){var t=Ei(e.src);return Gs.nativeSourceHandler.canPlayType("video/"+t)}return""},Gs.nativeSourceHandler.handleSource=function(e,t){t.setSrc(e.src)},Gs.nativeSourceHandler.dispose=function(){},Gs.registerSourceHandler(Gs.nativeSourceHandler),pn.registerTech("Html5",Gs);var Ys=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Xs={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Qs=["tiny","xsmall","small","medium","large","xlarge","huge"],Ks={};Qs.forEach(;var Js={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Zs=function(u){function d(e,t,i){var n;if(e.id=e.id||t.id||"vjs_video_"+j(),(t=g(d.getTagSettings(e),t)).initChildren=!1,t.createEl=!1,t.evented=!1,t.reportTouchActivity=!1,!t.language)if("function"==typeof e.closest){var s=e.closest("[lang]");s&&s.getAttribute&&(t.language=s.getAttribute("lang"))}else for(var r=e;r&&1===r.nodeType;){if(A(r).hasOwnProperty("lang")){t.language=r.getAttribute("lang");break}r=r.parentNode}if((n=u.call(this,null,t,i)||this).log=Xe(n.id_),n.isPosterFromTech_=!1,n.queuedCallbacks_=[],n.isReady_=!1,n.hasStarted_=!1,n.userActive_=!1,!n.options_||!n.options_.techOrder||!n.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(n.tag=e,n.tagAttributes=e&&A(e),n.language(n.options_.language),t.languages){var a={};Object.getOwnPropertyNames(t.languages).forEach(,n.languages_=a}else n.languages_=d.prototype.options_.languages;n.cache_={},n.poster_=t.poster||"",n.controls_=!!t.controls,n.cache_.lastVolume=1,e.controls=!1,e.removeAttribute("controls"),e.hasAttribute("autoplay")?n.options_.autoplay=!0:n.autoplay(n.options_.autoplay),n.scrubbing_=!1,n.el_=n.createEl(),n.cache_.lastPlaybackRate=n.defaultPlaybackRate(),ee(f(f(n)),{eventBusKey:"el_"});var o=ne(n.options_);if(t.plugins){var l=t.plugins;Object.keys(l).forEach(f(f(n)))}n.options_.playerOptions=o,n.middleware_=[],n.initChildren(),n.isAudio("audio"===e.nodeName.toLowerCase()),n.controls()?n.addClass("vjs-controls-enabled"):n.addClass("vjs-controls-disabled"),n.el_.setAttribute("role","region"),n.isAudio()?n.el_.setAttribute("aria-label",n.localize("Audio Player")):n.el_.setAttribute("aria-label",n.localize("Video Player")),n.isAudio()&&n.addClass("vjs-audio"),n.flexNotSupported_()&&n.addClass("vjs-no-flex"),Ht||n.addClass("vjs-workinghover"),d.players[n.id_]=f(f(n));var c=Ve.split(".")[0];return n.addClass("vjs-v"+c),n.userActive(!0),n.reportUserActivity(),n.one("play",n.listenForUserActivity_),n.on("fullscreenchange",n.handleFullscreenChange_),n.on("stageclick",n.handleStageClick_),n.breakpoints(n.options_.breakpoints),n.responsive(n.options_.responsive),n.changingSrc_=!1,n.playWaitingForReady_=!1,n.playOnLoadstart_=null,n}p(d,u);var e=d.prototype;return e.dispose=e.createEl=e.width=function(e){return this.dimension("width",e)},e.height=function(e){return this.dimension("height",e)},e.dimension=e.fluid=e.fill=e.aspectRatio=e.updateStyleEl_=e.loadTech_=e.unloadTech_=e.tech=e.addTechControlsListeners_=e.removeTechControlsListeners_=e.handleTechReady_=e.handleTechLoadStart_=e.manualAutoplay_=function(e){var i=this;if(this.tech_&&"string"==typeof e){var t,n=function(){var e=i.muted();i.muted(!0);var t=i.play();if(t&&t.then&&t["catch"])return t["catch"](function(){i.muted(e)})};if("any"===e?(t=this.play())&&t.then&&t["catch"]&&t["catch"](:t="muted"===e?n():this.play(),t&&t.then&&t["catch"])return t.then(function(){i.trigger({type:"autoplay-success",autoplay:e})})["catch"](function(){i.trigger({type:"autoplay-failure",autoplay:e})})}},e.updateSourceCaches_=e.handleTechSourceset_=e.hasStarted=e.handleTechPlay_=e.handleTechRateChange_=e.handleTechWaiting_=e.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},e.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},e.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},e.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},e.handleTechSeeked_=e.handleTechFirstPlay_=e.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},e.handleTechEnded_=e.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},e.handleTechClick_=e.handleTechDoubleClick_=e.handleTechTap_=e.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},e.handleTechTouchMove_=e.handleTechTouchEnd_=function(e){e.preventDefault()},e.handleFullscreenChange_=e.handleStageClick_=function(){this.reportUserActivity()},e.handleTechFullscreenChange_=e.handleTechError_=e.handleTechTextData_=e.getCache=function(){return this.cache_},e.techCall_=e.techGet_=e.play=e.play_=e.pause=function(){this.techCall_("pause")},e.paused=e.played=e.scrubbing=e.currentTime=e.duration=e.remainingTime=function(){return this.duration()-this.currentTime()},e.remainingTimeDisplay=e.buffered=e.bufferedPercent=e.bufferedEnd=e.volume=e.muted=e.defaultMuted=e.lastVolume_=e.supportsFullScreen=e.isFullscreen=function(e){if(void 0===e)return!!this.isFullscreen_;this.isFullscreen_=!!e},e.requestFullscreen=function(){var e=Jt;this.isFullscreen(!0),e.requestFullscreen?(X(h,e.fullscreenchange,ft(this,function t(){this.isFullscreen(h[e.fullscreenElement]),!1===this.isFullscreen()&&Q(h,e.fullscreenchange,t),this.trigger("fullscreenchange")})),this.el_[e.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))},e.exitFullscreen=e.enterFullWindow=e.fullWindowOnEscKey=e.exitFullWindow=e.canPlayType=e.selectSource=e.src=e.src_=e.load=function(){this.techCall_("load")},e.reset=e.currentSources=e.currentSource=e.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},e.currentType=e.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},e.autoplay=e.playsinline=e.loop=e.poster=e.handleTechPosterChange_=e.controls=e.usingNativeControls=e.error=e.reportUserActivity=function(){this.userActivity_=!0},e.userActive=e.listenForUserActivity_=function(){var e,t,i,n,s=ft(this,this.reportUserActivity);this.on("mousedown",function(){s(),this.clearInterval(e),e=this.setInterval(s,250)}),this.on("mousemove",,this.on("mouseup",function(){s(),this.clearInterval(e)}),this.on("keydown",s),this.on("keyup",s),this.setInterval(250)},e.playbackRate=e.defaultPlaybackRate=e.isAudio=e.addTextTrack=e.addRemoteTextTrack=e.removeRemoteTextTrack=e.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},e.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},e.videoHeight=e.language=e.languages=e.toJSON=e.createModal=e.updateCurrentBreakpoint_=e.removeCurrentBreakpoint_=e.breakpoints=e.responsive=e.currentBreakpoint=function(){return this.breakpoint_},e.currentBreakpointClass=d.getTagSettings=e.flexNotSupported_=d}(Et);Ji.names.forEach(,Zs.players={};var er=_.navigator;Zs.prototype.options_={techOrder:pn.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:er&&(er.languages&&er.languages[0]||er.userLanguage||er.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach(,Ys.forEach(,Et.registerComponent("Player",Zs);var tr="plugin",ir="activePlugins_",nr={},sr=function(e){return nr.hasOwnProperty(e)},rr=ar=or=lr=cr=function(){ar e=r.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=e.trigger=e.handleStateChanged=function(){},e.dispose=r.isBasic=r.registerPlugin=r.deregisterPlugin=r.getPlugins=r.getPluginVersion=r}();cr.getPlugin=rr,cr.BASE_PLUGIN_NAME=tr,cr.registerPlugin(tr,cr),Zs.prototype.usingPlugin=Zs.prototype.hasPlugin=var ur=if(Fe.hooks_={},Fe.hooks=Fe.hook=function(e,t){Fe.hooks(e,t)},Fe.hookOnce=Fe.removeHook=!0!==_.VIDEOJS_NO_DYNAMIC_STYLE&&v()){var dr=Ze(".vjs-styles-defaults");if(!dr){dr=ht("vjs-styles-defaults");var hr=Ze("head");hr&&hr.insertBefore(dr,hr.firstChild),pt(dr,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}Z(1,Fe),Fe.VERSION=Ve,Fe.options=Zs.prototype.options_,Fe.getPlayers=function(){return Zs.players},Fe.getPlayer=Fe.getAllPlayers=Fe.players=Zs.players,Fe.getComponent=Et.getComponent,Fe.registerComponent=Fe.getTech=pn.getTech,Fe.registerTech=pn.registerTech,Fe.use=Object.defineProperty(Fe,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Fe.middleware,"TERMINATOR",{value:mn,writeable:!1,enumerable:!0}),Fe.browser=Kt,Fe.TOUCH_ENABLED=Qt,Fe.extend=Fe.mergeOptions=ne,Fe.bind=ft,Fe.registerPlugin=cr.registerPlugin,Fe.deregisterPlugin=cr.deregisterPlugin,Fe.plugin=Fe.getPlugins=cr.getPlugins,Fe.getPlugin=cr.getPlugin,Fe.getPluginVersion=cr.getPluginVersion,Fe.addLanguage=Fe.log=Ye,Fe.createLogger=Xe,Fe.createTimeRange=Fe.createTimeRanges=ae,Fe.formatTime=Ue,Fe.setFormatTime=function(e){Nn=e},Fe.resetFormatTime=Fe.parseUrl=Ti,Fe.isCrossOrigin=Ii,Fe.EventTarget=mt,Fe.on=X,Fe.one=J,Fe.off=Q,Fe.trigger=K,Fe.xhr=Gi,Fe.TextTrack=Wi,Fe.AudioTrack=qi,Fe.VideoTrack=Yi,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(,Fe.computedStyle=n,Fe.dom=tt,Fe.url=Ai;var pr=de(,fr=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},gr=Object.assign||mr=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},vr=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},_r=function(){function e(){fr(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e].splice(i,1),-1<i},e.prototype.trigger=function(e,t){var i=this.listeners[e],n=void 0,s=void 0,r=void 0;if(i)if(2===arguments.length)for(s=i.length,n=0;n<s;++n)i[n].call(this,t);else for(r=Array.prototype.slice.call(arguments,1),s=i.length,n=0;n<s;++n)i[n].apply(this,r)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},e}(),yr=_r),br=wr=_r),Sr=function(t){function i(){fr(this,i);var e=vr(this,t.call(this));e.lineStream=new yr,e.parseStream=new wr,e.lineStream.pipe(e.parseStream);var s=e,r=[],a={},o=void 0,l=void 0,c={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},u=0;return e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},e.parseStream.on("data",function(t){var i=void 0,n=void 0;({tag:function(){({"allow-cache":byterange:endlist:inf:key:"media-sequence":"discontinuity-sequence":"playlist-type":map:"stream-inf":media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||c,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var e=this.manifest.mediaGroups[t.attributes.TYPE];e[t.attributes["GROUP-ID"]]=e[t.attributes["GROUP-ID"]]||{},i=e[t.attributes["GROUP-ID"]],(n={"default":/yes/i.test(t.attributes.DEFAULT)})["default"]?n.autoselect=!0:n.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(n.language=t.attributes.LANGUAGE),t.attributes.URI&&(n.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(n.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(n.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(n.forced=/yes/i.test(t.attributes.FORCED)),i[t.attributes.NAME]=n}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:"program-date-time":targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):this.manifest.targetDuration=t.duration},totalduration:start:"cue-out":function(){a.cueOut=t.data},"cue-out-cont":function(){a.cueOutCont=t.data},"cue-in":[t.tagType]||function(){}).call(s)},uri:comment:function(){},custom:)[t.type].call(s)}),e}return mr(i,t),i.prototype.push=function(e){this.lineStream.push(e)},i.prototype.end=function(){this.lineStream.push("\n")},i.prototype.addParser=function(e){this.parseStream.addParser(e)},i}(_r),Cr=Tr=kr=Er=Ir=function(e){var t;return(t=e.reduce({}),Object.keys(t).map(function(e){return t[e]})).map(},Ar="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var Pr,xr,Mr,Dr,Lr,Nr,Or,Rr,Ur,Hr,Br,$r,Fr=(xr=Pr={exports:{}},Pr.exports,Mr=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,Dr=/^([^\/?#]*)(.*)$/,Lr=/(?:\/|^)\.(?=\/)/g,Nr=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,Or={buildAbsoluteURL:parseURL:normalizePath:buildURLFromParts:,xr.exports=Or,Pr.exports),jr=function(e,t){return/^[a-z]+:/i.test(t)?t:(/\/\//i.test(e)||(e=Fr.buildAbsoluteURL(_.location.href,e)),Fr.buildAbsoluteURL(e,t))},zr=Gr=function(e,t){for(var i,n,s,r,a,o,l,c,u,d,h,p,f=e.type,g=void 0===f?"static":f,m=e.minimumUpdatePeriod,v=void 0===m?0:m,_=e.media,y=void 0===_?"":_,b=e.sourceDuration,w=e.timescale,S=void 0===w?1:w,C=e.startNumber,T=void 0===C?1:C,k=e.periodIndex,E=[],I=-1,A=0;A<t.length;A++){var P=t[A],x=P.d,M=P.r||0,D=P.t||0;I<0&&(I=D),D&&I<D&&(I=D);var L=void 0;if(M<0){var N=A+1;L=N===t.length?"dynamic"===g&&0<v&&0<y.indexOf("$Number$")?(n=I,s=x,r=(i=e).NOW,a=i.clientOffset,o=i.availabilityStartTime,c=void 0===(l=i.timescale)?1:l,d=void 0===(u=i.start)?0:u,p=(r+a)/1e3+(void 0===(h=i.minimumUpdatePeriod)?0:h)-(o+d),Math.ceil((p*c-n)/s)):(b*S-I)/x:(t[N].t-I)/x}else L=M+1;for(var O=T+E.length+L,R=T+E.length;R<O;)E.push({number:R,duration:x/S,time:I,timeline:k}),I+=x,R++}return E},Vr={"static":dynamic:,Wr=qr=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Yr=Xr=Qr="INVALID_NUMBER_OF_PERIOD",Kr="DASH_EMPTY_MANIFEST",Jr="DASH_INVALID_XML",Zr="NO_BASE_URL",ea="SEGMENT_TIME_UNSPECIFIED",ta="UNSUPPORTED_UTC_TIMING_SCHEME",ia=na=sa=ra=aa=function(e){return e.textContent.trim()},oa=la={mediaPresentationDuration:function(e){return oa(e)},availabilityStartTime:minimumUpdatePeriod:function(e){return oa(e)},timeShiftBufferDepth:function(e){return oa(e)},start:function(e){return oa(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},duration:d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:DEFAULT:function(e){return e}},ca=ua={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},da=ha=pa=fa=ga=ma=va=function(e,t){return function(e){var t;if(!e.length)return{};var i=e[0].attributes,n=i.sourceDuration,s=i.minimumUpdatePeriod,r=void 0===s?0:s,a=Ir(e.filter(function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video"===t.contentType})).map(Ar),o=Ir(e.filter(function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio"===t.contentType})),l=e.filter(,c={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:n,playlists:a,minimumUpdatePeriod:1e3*r};return o.length&&(c.mediaGroups.AUDIO.audio=o.reduce(function(e,t){var i,n,s,r,a,o=t.attributes.role&&t.attributes.role.value||"main",l=t.attributes.lang||"",c="main";return l&&(c=t.attributes.lang+" ("+o+")"),e[c]&&e[c].playlists[0].attributes.BANDWIDTH>t.attributes.bandwidth||(e[c]={language:l,autoselect:!0,"default":"main"===o,playlists:[(i=t,s=i.attributes,r=i.segments,a={attributes:(n={NAME:s.id,BANDWIDTH:s.bandwidth,CODECS:s.codecs},n["PROGRAM-ID"]=1,n),uri:"",endList:"static"===(s.type||"static"),
timeline:s.periodIndex,resolvedUri:"",targetDuration:s.duration,segments:r,mediaSequence:r.length?r[0].number:1},s.contentProtection&&(a.contentProtection=s.contentProtection),a)],uri:""}),e},{})),l.length&&(c.mediaGroups.SUBTITLES.subs=l.reduce(function(e,t){var i,n,s,r,a=t.attributes.lang||"text";return e[a]||(e[a]={language:a,"default":!1,autoselect:!1,playlists:[(i=t,s=i.attributes,r=i.segments,void 0===r&&(r=[{uri:s.baseUrl,timeline:s.periodIndex,resolvedUri:s.baseUrl||"",duration:s.sourceDuration,number:0}],s.duration=s.sourceDuration),{attributes:(n={NAME:s.id,BANDWIDTH:s.bandwidth},n["PROGRAM-ID"]=1,n),uri:"",endList:"static"===(s.type||"static"),timeline:s.periodIndex,resolvedUri:s.baseUrl||"",targetDuration:s.duration,segments:r,mediaSequence:r.length?r[0].number:1})],uri:""}),e},{})),c}(ga(ma(e),t).map(sa))},_a=ya=Hr=Br=$r=var ba,wa,Sa,Ca,Ta,ka,Ea,Ia,Aa,Pa,xa,Ma,Da,La,Na,Oa,Ra,Ua,Ha,Ba,$a,Fa,ja,za,Ga,Va,Wa,qa,Ya,Xa,Qa,Ka,Ja,Za,eo,to,io,no,so,ro,ao={findBox:Rr=parseType:Ur=timescale:Hr,startTime:Br,videoTrackIds:$r},oo=Math.pow(2,32)-1;!),ba=wa=Sa=Na=La=Da=Ta=ka=Ea=Ia=Aa=Pa=Oa=Ra=Ua=to=io=Ma=Ha=xa=Ba=ro=so=no=$a=var lo={ftyp:Ca=mdat:moof:Ea,moov:Ia,initSegment:,co=function(){this.init=function(){var a={};this.on=this.off=this.trigger=function(e,t){var i,n,s,r;if(i=a[e])if(2===arguments.length)for(s=i.length,n=0;n<s;++n)i[n].call(this,t);else{for(r=[],n=arguments.length,n=1;n<arguments.length;++n)r.push(arguments[n]);for(s=i.length,n=0;n<s;++n)i[n].apply(this,r)}},this.dispose=};co.prototype.pipe=co.prototype.push=function(e){this.trigger("data",e)},co.prototype.flush=var uo=co,ho=po=fo=go=function(e,t){var i,n,s,r,a,o,l=t||0,c=[];for(i=0;i<e.length;i++)for(r=e[i],n=0;n<r.length;n++)a=r[n],o=void 0,(o={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}).dataOffset=l,o.compositionTimeOffset=a.pts-a.dts,o.duration=a.duration,o.size=4*a.length,o.size+=a.byteLength,a.keyFrame&&(o.flags.dependsOn=2,o.flags.isNonSyncSample=0),l+=(s=o).size,c.push(s);return c},mo=vo=_o=yo=bo=wo=So=Co=function(e){for(var t,i,n=e.byteLength,s=[],r=1;r<n-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(s.push(r+2),r+=2):r++;if(0===s.length)return e;t=n-s.length,i=new Uint8Array(t);var a=0;for(r=0;r<t;a++,r++)a===s[0]&&(a++,s.shift()),i[r]=e[a];return i},To=4,ko=(ko.prototype=new uo).push=ko.prototype.flush=ko.prototype.reset=ko.prototype.dispatchCea608Packet=ko.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},ko.prototype.setsChannel2Active=var Eo={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Io=Ao=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Po=xo=function qe(e,t){qe.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=;xo.prototype=new uo,xo.prototype.flushDisplayed=xo.prototype.reset=xo.prototype.setConstants=xo.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},xo.prototype.isExtCharacter=xo.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},xo.prototype.isOffsetControlCode=xo.prototype.isPAC=xo.prototype.isColorPAC=xo.prototype.isNormalChar=xo.prototype.setRollUp=xo.prototype.addFormatting=xo.prototype.clearFormatting=xo.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];i+=t,this.nonDisplayed_[this.row_]=i},xo.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i},xo.prototype.shiftRowsUp_=xo.prototype.paintOn=var Mo={CaptionStream:ko,Cea608Stream:xo},Do={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Lo=No=No.prototype=new uo;var Oo,Ro=No,Uo=Lo,Ho=Bo=$o=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Fo={TXXX:WXXX:PRIV:;(Oo=.prototype=new uo;var jo,zo,Go,Vo=Oo,Wo=Ro;(jo=.prototype=new uo,(zo=.prototype=new uo,zo.STREAM_TYPES={h264:27,adts:15},(Go=.prototype=new uo;var qo={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:jo,TransportParseStream:zo,ElementaryStream:Go,TimestampRolloverStream:Wo,CaptionStream:Mo.CaptionStream,Cea608Stream:Mo.Cea608Stream,MetadataStream:Vo};for(var Yo in Do)Do.hasOwnProperty(Yo)&&(qo[Yo]=Do[Yo]);var Xo,Qo=qo,Ko=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Xo=.prototype=new uo;var Jo,Zo,el,tl=Xo,il=(Zo=.prototype=new uo,el={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(Jo=.prototype=new uo;var nl,sl={H264Stream:Jo,NalByteStream:Zo};(nl=function(){var o=new Uint8Array,l=0;nl.prototype.init.call(this),this.setTimestamp=function(e){l=e},this.parseId3TagSize=function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?i+20:i+10},this.parseAdtsSize=function(e,t){var i=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|i},this.push=function(e){var t,i,n,s,r=0,a=0;for(o.length?(s=o.length,(o=new Uint8Array(e.byteLength+s)).set(o.subarray(0,s)),o.set(e,s)):o=e;3<=o.length-a;)if(o[a]!=="I".charCodeAt(0)||o[a+1]!=="D".charCodeAt(0)||o[a+2]!=="3".charCodeAt(0))if(!0&o[a]&&240==(240&o[a+1])){if(o.length-a<7)break;if((r=this.parseAdtsSize(o,a))>o.length)break;n={type:"audio",data:o.subarray(a,a+r),pts:l,dts:l},this.trigger("data",n),a+=r}else a++;else{if(o.length-a<10)break;if((r=this.parseId3TagSize(o,a))>o.length)break;i={type:"timed-metadata",data:o.subarray(a,a+r)},this.trigger("data",i),a+=r}t=o.length-a,o=0<t?o.subarray(a):new Uint8Array}}).prototype=new uo;var rl,al,ol,ll,cl,ul,dl,hl=nl,pl=[33,16,5,32,164,27],fl=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],gl=ml={96e3:[pl,[227,64],gl(154),[56]],88200:[pl,[231],gl(170),[56]],64e3:[pl,[248,192],gl(240),[56]],48e3:[pl,[255,192],gl(268),[55,148,128],gl(54),[112]],44100:[pl,[255,192],gl(268),[55,163,128],gl(84),[112]],32e3:[pl,[255,192],gl(268),[55,234],gl(226),[112]],24e3:[pl,[255,192],gl(268),[55,255,128],gl(268),[111,112],gl(126),[224]],16e3:[pl,[255,192],gl(268),[55,255,128],gl(268),[111,255],gl(269),[223,108],gl(195),[1,192]],12e3:[fl,gl(268),[3,127,248],gl(268),[6,255,240],gl(268),[13,255,224],gl(268),[27,253,128],gl(259),[56]],11025:[fl,gl(268),[3,127,248],gl(268),[6,255,240],gl(268),[13,255,224],gl(268),[27,255,192],gl(268),[55,175,128],gl(108),[112]],8e3:[fl,gl(268),[3,121,16],gl(47),[7]]},vl=(rl=ml,Object.keys(rl).reduce({}));ul=dl=al=ol=ll=cl=var _l,yl,bl,wl,Sl,Cl,Tl,kl=ul,El=dl,Il=sl.H264Stream,Al=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Pl=["width","height","profileIdc","levelIdc","profileCompatibility"];Sl=Cl=Tl=(yl=function(s,r){var a=[],o=0,t=0,c=0,u=1/0;r=r||{},yl.prototype.init.call(this),this.push=this.setEarliestDts=this.setVideoBaseMediaDecodeTime=function(e){u=e},this.setAudioAppendStart=function(e){c=e},this.flush=function(){var e,t,i,n;0!==a.length&&(e=this.trimAdtsFramesByEarliestDts_(a),s.baseMediaDecodeTime=_o(s,r.keepOriginalTimestamps),this.prefixWithSilence_(s,e),s.samples=this.generateSampleTable_(e),i=lo.mdat(this.concatenateFrameData_(e)),a=[],t=lo.moof(o,[s]),n=new Uint8Array(t.byteLength+i.byteLength),o++,n.set(t),n.set(i,t.byteLength),vo(s),this.trigger("data",{track:s,boxes:n})),this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(e,t){var i,n,s,r,a=0,o=0,l=0;if(t.length&&(i=kl(e.baseMediaDecodeTime,e.samplerate),n=Math.ceil(9e4/(e.samplerate/1024)),c&&u&&(a=i-Math.max(c,u),l=(o=Math.floor(a/n))*n),!(o<1||45e3<l))){for((s=vl[e.samplerate])||(s=t[0].data),r=0;r<o;r++)t.splice(r,0,{data:s});e.baseMediaDecodeTime-=Math.floor(El(l,e.samplerate))}},this.trimAdtsFramesByEarliestDts_=this.generateSampleTable_=this.concatenateFrameData_=).prototype=new uo,(_l=.prototype=new uo,(wl=.prototype=new uo,wl.prototype.flush=(bl=function(n){var s,r,a=this,i=!0;bl.prototype.init.call(this),n=n||{},this.baseMediaDecodeTime=n.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=this.setupTsPipeline=this.setBaseMediaDecodeTime=this.setAudioAppendStart=this.alignGopsWith=this.push=this.flush=this.resetCaptions=).prototype=new uo;var xl,Ml,Dl={Transmuxer:bl,VideoSegmentStream:_l,AudioSegmentStream:yl,AUDIO_PROPERTIES:Al,VIDEO_PROPERTIES:Pl},Ll=ao.parseType,Nl=Ol=Rl={avc1:avcC:btrt:esds:ftyp:dinf:function(e){return{boxes:xl(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:xl(e.subarray(8))}},hdlr:mdat:mdhd:mdia:function(e){return{boxes:xl(e)}},mfhd:minf:function(e){return{boxes:xl(e)}},mp4a:moof:function(e){return{boxes:xl(e)}},moov:function(e){return{boxes:xl(e)}},mvex:function(e){return{boxes:xl(e)}},mvhd:pdin:sdtp:sidx:smhd:stbl:function(e){return{boxes:xl(e)}},stco:stsc:stsd:stsz:stts:styp:function(e){return Rl.ftyp(e)},tfdt:tfhd:tkhd:traf:function(e){return{boxes:xl(e)}},trak:trex:trun:"url ":vmhd:,Ul={inspect:xl=textify:Ml=function(e,t){var r;return t=t||0,r=new Array(2*t+1).join(" "),e.map(function(s){return r+s.type+"\n"+Object.keys(s).filter(.map(.join("\n")+(s.boxes?"\n"+Ml(s.boxes,t+1):"")}).join("\n")},parseTfdt:Rl.tfdt,parseHdlr:Rl.hdlr,parseTfhd:Rl.tfhd,parseTrun:Rl.trun},Hl=Co,Bl=Mo.CaptionStream,$l=Fl=jl={generator:lo,probe:ao,Transmuxer:Dl.Transmuxer,AudioSegmentStream:Dl.AudioSegmentStream,VideoSegmentStream:Dl.VideoSegmentStream,CaptionParser:function(){var t,o,l,c,u,e=!1;this.isInitialized=function(){return e},this.init=this.isNewInit=this.parse=function(e,t,i){var n,s,r;if(!this.isInitialized())return null;if(!t||!i)return null;if(this.isNewInit(t,i))l=t[0],c=i[l];else if(!l||!c)return o.push(e),null;for(;0<o.length;){var a=o.shift();this.parse(a,t,i)}return r=c,null!==(n=(s=l)?{seiNals:Fl(e,s)[s],timescale:r}:null)&&n.seiNals?(this.pushNals(n.seiNals),this.flushStream(),u):null},this.pushNals=this.flushStream=function(){if(!this.isInitialized())return null;t.flush()},this.clearParsedCaptions=this.resetCaptionStream=this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=this.reset()}}.CaptionParser,zl=Gl=Vl=Wl=ql={parseType:parsePat:parsePmt:parsePayloadUnitStartIndicator:Gl,parsePesType:parsePesTime:videoPacketContainsKeyFrame:,Yl=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Xl=Ql={parseId3TagSize:parseAdtsSize:parseType:parseSampleRate:parseAacTimestamp:function(e){var t,i,n;t=10,64&e[5]&&(t+=4,t+=Xl(e.subarray(10,14)));do{if((i=Xl(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){n=e.subarray(t+10,t+i+10);for(var s=0;s<n.byteLength;s++)if(0===n[s]){if("com.apple.streaming.transportStreamTimestamp"!==unescape(n,0,s)))break;var r=n.subarray(s+1),a=(1&r[3])<<30|r[4]<<22|r[5]<<14|r[6]<<6|r[7]>>>2;return(a*=4)+(3&r[7])}}t+=10,t+=i}while(t<e.byteLength);return null}},Kl=Uo,Jl={};Jl.ts=ql,Jl.aac=Ql;var Zl=188,ec=function(e,t,i){for(var n,s,r,a,o=0,l=Zl,c=!1;l<e.byteLength;)if(71!==e[o]||71!==e[l])o++,l++;else{switch(n=e.subarray(o,l),Jl.ts.parseType(n,t.pid)){case"pes":s=Jl.ts.parsePesType(n,t.table),r=Jl.ts.parsePayloadUnitStartIndicator(n),"audio"===s&&r&&(a=Jl.ts.parsePesTime(n))&&(a.type="audio",i.audio.push(a),c=!0)}if(c)break;o+=Zl,l+=Zl}for(o=(l=e.byteLength)-Zl,c=!1;0<=o;)if(71!==e[o]||71!==e[l])o--,l--;else{switch(n=e.subarray(o,l),Jl.ts.parseType(n,t.pid)){case"pes":s=Jl.ts.parsePesType(n,t.table),r=Jl.ts.parsePayloadUnitStartIndicator(n),"audio"===s&&r&&(a=Jl.ts.parsePesTime(n))&&(a.type="audio",i.audio.push(a),c=!0)}if(c)break;o-=Zl,l-=Zl}},tc=ic=function(e){var t={pid:null,table:null},i={};for(var n in e,t),t.table)if(t.table.hasOwnProperty(n))switch(t.table[n]){case Do.H264_STREAM_TYPE:i.video=[],tc(e,t,i),0===i.video.length&&delete i.video;break;case Do.ADTS_STREAM_TYPE:i.audio=[],ec(e,t,i),0===i.audio.length&&delete i.audio}return i},nc=function(e,t){var i,n;return(n=(i=e)[0]==="I".charCodeAt(0)&&i[1]==="D".charCodeAt(0)&&i[2]==="3".charCodeAt(0)?e):ic(e))&&(n.audio||n.video)?(n,t),n):null},sc=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},rc=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),ac=null,oc=),lc=function(){eturn e.prototype.on=e.prototype.off=e.prototype.trigger=e.prototype.dispose=e.prototype.pipe=e}(),cc=lc),uc=dc=hc=),pc=fc=gc=),mc=vc=_c=yc=Fe.mergeOptions,bc=Fe.EventTarget,wc=Fe.log,Sc=Cc=Tc=kc=Ec=Ic=function(){function s(e,t,i){fc(this,s);var n=vc(this,(s.__proto__||Object.getPrototypeOf(s)).call(this));if(n.srcUrl=e,n.hls_=t,n.withCredentials=i,!n.srcUrl)throw new Error("A non-empty playlist URL is required");return n.state="HAVE_NOTHING",n.on("mediaupdatetimeout",function(){"HAVE_METADATA"===n.state&&(n.state="HAVE_CURRENT_METADATA",n.request=n.hls_.xhr({uri:pc(n.master.uri,n.media().uri),withCredentials:n.withCredentials},function(e){if(n.request)return e?n.playlistRequestError(n.request,n.media().uri,"HAVE_METADATA"):void n.haveMetadata(n.request,n.media().uri)}))}),n}return mc(s,bc),gc(s,[{key:"playlistRequestError",value:,{key:"haveMetadata",value:,{key:"dispose",value:,{key:"stopRequest",value:,{key:"media",value:,{key:"pause",value:,{key:"load",value:,{key:"start",value:]),s}(),Ac=Fe.createTimeRange,Pc=function(e,s,t){var i,n;return void 0===s&&(s=e.mediaSequence+e.segments.length),s<e.mediaSequence?0:(i=function(e){var t=0,i=s-e.mediaSequence,n=e.segments[i];if(n){if("undefined"!=typeof n.start)return{result:n.start,precise:!0};if("undefined"!=typeof n.end)return{result:n.end-n.duration,precise:!0}}for(;i--;){if("undefined"!=typeof(n=e.segments[i]).end)return{result:t+n.end,precise:!0};if(t+=n.duration,"undefined"!=typeof n.start)return{result:t+n.start,precise:!0}}return{result:t,precise:!1}}(e)).precise?i.result:(n=function(e){for(var t=0,i=void 0,n=s-e.mediaSequence;n<e.segments.length;n++){if("undefined"!=typeof(i=e.segments[n]).start)return{result:i.start-t,precise:!0};if(t+=i.duration,"undefined"!=typeof i.end)return{result:i.end-t,precise:!0}}return{result:-1,precise:!1}}(e)).precise?n.result:i.result+t},xc=Mc=Dc=Lc=Nc=Oc=Rc=Oc.bind(null,1),Uc=Oc.bind(null,-1),Hc=Bc=$c=Fc=jc=zc={duration:xc,seekable:safeLiveIndex:Dc,getMediaInfoForTime:isEnabled:$c,isDisabled:isBlacklisted:Hc,isIncompatible:Bc,playlistEnd:Lc,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},isFmp4:hasAttribute:Fc,estimateSegmentRequestTime:isLowestEnabledRendition:jc},Gc=Fe.xhr,Vc=Fe.mergeOptions,Wc=qc=Yc=Xc=Qc=Kc=Jc=Object.freeze({createTransferableMessage:Xc,initSegmentId:Qc,hexDump:Kc,tagDump:textRanges:),Zc=1/30,eu=tu=iu=nu=su=ru=au=ou=lu="undefined"!=typeof window?window:{},cu="undefined"==typeof Symbol?"__target":Symbol(),uu="application/javascript",du=lu.BlobBuilder||lu.WebKitBlobBuilder||lu.MozBlobBuilder||lu.MSBlobBuilder,hu=lu.URL||lu.webkitURL||hu&&hu.msURL,pu=lu.Worker;if(pu){var fu,gu=ze("self.onmessage = function () {}"),mu=new Uint8Array(1);try{(fu=new pu(gu)).postMessage(mu,[mu.buffer])}catch(qe){pu=null}finally{hu.revokeObjectURL(gu),fu&&fu.terminate()}}var vu=new je("./transmuxer-worker.worker.js",function(){var Pt=this;!function(){var o,t,i,s,r,n,a,l,c,u,d,h,p,f,g,m,v,_,y,b,w,S,C,T,k,E,I,A,P,x,M,D,L,N,O,R,U,H,B,$,F=Math.pow(2,32)-1;!function(){var e;if(S={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in S)S.hasOwnProperty(e)&&(S[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);C=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),k=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),T=new Uint8Array([0,0,0,1]),E=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),I=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),A={video:E,audio:I},M=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),x=new Uint8Array([0,0,0,0,0,0,0,0]),D=new Uint8Array([0,0,0,0,0,0,0,0]),L=D,N=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),O=D,P=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),o=function(e){var t,i,n=[],s=0;for(t=1;t<arguments.length;t++)n.push(arguments[t]);for(t=n.length;t--;)s+=n[t].byteLength;for(i=new Uint8Array(s+8),new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,i.byteLength),i.set(e,4),t=0,s=8;t<n.length;t++)i.set(n[t],s),s+=n[t].byteLength;return i},t=function(){return o(S.dinf,o(S.dref,M))},i=function(e){return o(S.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},g=function(e){return o(S.hdlr,A[e])},f=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(t[12]=e.samplerate>>>24&255,t[13]=e.samplerate>>>16&255,t[14]=e.samplerate>>>8&255,t[15]=255&e.samplerate),o(S.mdhd,t)},p=function(e){return o(S.mdia,f(e),g(e.type),n(e))},r=function(e){return o(S.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},n=function(e){return o(S.minf,"video"===e.type?o(S.vmhd,P):o(S.smhd,x),t(),v(e))},a=function(e,t){for(var i=[],n=t.length;n--;)i[n]=y(t[n]);return o.apply(null,[S.moof,r(e)].concat(i))},l=function(e){for(var t=e.length,i=[];t--;)i[t]=d(e[t]);return o.apply(null,[S.moov,u(4294967295)].concat(i).concat(c(e)))},c=function(e){for(var t=e.length,i=[];t--;)i[t]=b(e[t]);return o.apply(null,[S.mvex].concat(i))},u=function(e){var t=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return o(S.mvhd,t)},m=function(e){var t,i,n=e.samples||[],s=new Uint8Array(4+n.length);for(i=0;i<n.length;i++)t=n[i].flags,s[i+4]=t.dependsOn<<4|t.isDependedOn<<2|t.hasRedundancy;return o(S.sdtp,s)},v=function(e){return o(S.stbl,_(e),o(S.stts,O),o(S.stsc,L),o(S.stsz,N),o(S.stco,D))},_=function(e){return o(S.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?R(e):U(e))},R=function(e){var t,i=e.sps||[],n=e.pps||[],s=[],r=[];for(t=0;t<i.length;t++)s.push((65280&i[t].byteLength)>>>8),s.push(255&i[t].byteLength),s=s.concat(Array.prototype.slice.call(i[t]));for(t=0;t<n.length;t++)r.push((65280&n[t].byteLength)>>>8),r.push(255&n[t].byteLength),r=r.concat(Array.prototype.slice.call(n[t]));return o(S.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(S.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([i.length]).concat(s).concat([n.length]).concat(r))),o(S.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))},U=function(e){return o(S.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),i(e))},h=function(e){var t=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return o(S.tkhd,t)},y=function(e){var t,i,n,s,r,a;return t=o(S.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),r=Math.floor(e.baseMediaDecodeTime/(F+1)),a=Math.floor(e.baseMediaDecodeTime%(F+1)),i=o(S.tfdt,new Uint8Array([1,0,0,0,r>>>24&255,r>>>16&255,r>>>8&255,255&r,a>>>24&255,a>>>16&255,a>>>8&255,255&a])),"audio"===e.type?(n=w(e,92),o(S.traf,t,i,n)):(s=m(e),n=w(e,s.length+92),o(S.traf,t,i,n,s))},d=function(e){return e.duration=e.duration||4294967295,o(S.trak,h(e),p(e))},b=function(e){var t=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(t[t.length-1]=0),o(S.trex,t)},$=function(e,t){var i=0,n=0,s=0,r=0;return e.length&&(void 0!==e[0].duration&&(i=1),void 0!==e[0].size&&(n=2),void 0!==e[0].flags&&(s=4),void 0!==e[0].compositionTimeOffset&&(r=8)),[0,0,i|n|s|r,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},B=function(e,t){var i,n,s,r;for(t+=20+16*(n=e.samples||[]).length,i=$(n,t),r=0;r<n.length;r++)s=n[r],i=i.concat([(4278190080&s.duration)>>>24,(16711680&s.duration)>>>16,(65280&s.duration)>>>8,255&s.duration,(4278190080&s.size)>>>24,(16711680&s.size)>>>16,(65280&s.size)>>>8,255&s.size,s.flags.isLeading<<2|s.flags.dependsOn,s.flags.isDependedOn<<6|s.flags.hasRedundancy<<4|s.flags.paddingValue<<1|s.flags.isNonSyncSample,61440&s.flags.degradationPriority,15&s.flags.degradationPriority,(4278190080&s.compositionTimeOffset)>>>24,(16711680&s.compositionTimeOffset)>>>16,(65280&s.compositionTimeOffset)>>>8,255&s.compositionTimeOffset]);return o(S.trun,new Uint8Array(i))},H=function(e,t){var i,n,s,r;for(t+=20+8*(n=e.samples||[]).length,i=$(n,t),r=0;r<n.length;r++)s=n[r],i=i.concat([(4278190080&s.duration)>>>24,(16711680&s.duration)>>>16,(65280&s.duration)>>>8,255&s.duration,(4278190080&s.size)>>>24,(16711680&s.size)>>>16,(65280&s.size)>>>8,255&s.size]);return o(S.trun,new Uint8Array(i))},w=function(e,t){return"audio"===e.type?H(e,t):B(e,t)};var j,z,e,G,V,W={ftyp:s=function(){return o(S.ftyp,C,T,C,k)},mdat:function(e){return o(S.mdat,e)},moof:a,moov:l,initSegment:function(e){var t,i=s(),n=l(e);return(t=new Uint8Array(i.byteLength+n.byteLength)).set(i),t.set(n,i.byteLength),t}},q=function(e){return e>>>0};e=function(e){return j(e,["moov","trak"]).reduce(function(e,t){var i,n,s,r,a;return(i=j(t,["tkhd"])[0])?(n=i[0],r=q(i[s=0===n?12:20]<<24|i[s+1]<<16|i[s+2]<<8|i[s+3]),(a=j(t,["mdia","mdhd"])[0])?(s=0===(n=a[0])?12:20,e[r]=q(a[s]<<24|a[s+1]<<16|a[s+2]<<8|a[s+3]),e):null):null},{})},G=function(s,e){var t,i,n;return t=j(e,["moof","traf"]),i=[].concat.apply([],t.map(function(n){return j(n,["tfhd"]).map(function(e){var t,i;return t=q(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),i=s[t]||9e4,(j(n,["tfdt"]).map(function(e){var t,i;return t=e[0],i=q(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),1===t&&(i*=Math.pow(2,32),i+=q(e[8]<<24|e[9]<<16|e[10]<<8|e[11])),i})[0]||1/0)/i})})),n=Math.min.apply(null,i),isFinite(n)?n:0},V=function(e){var t=j(e,["moov","trak"]),o=[];return t.forEach(function(e){var t=j(e,["mdia","hdlr"]),a=j(e,["tkhd"]);t.forEach(function(e,t){var i,n,s=z(e.subarray(8,12)),r=a[t]
;"vide"===s&&(n=0===(i=new DataView(r.buffer,r.byteOffset,r.byteLength)).getUint8(0)?i.getUint32(12):i.getUint32(20),o.push(n))})}),o};var Y={findBox:j=function(e,t){var i,n,s,r,a,o=[];if(!t.length)return null;for(i=0;i<e.byteLength;)n=q(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3]),s=z(e.subarray(i+4,i+8)),r=1<n?i+n:e.byteLength,s===t[0]&&(1===t.length?o.push(e.subarray(i+8,r)):(a=j(e.subarray(i+8,r),t.slice(1))).length&&(o=o.concat(a))),i=r;return o},parseType:z=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),(t+=String.fromCharCode(e[2]))+String.fromCharCode(e[3])},timescale:e,startTime:G,videoTrackIds:V},X=function(){this.init=function(){var a={};this.on=function(e,t){a[e]||(a[e]=[]),a[e]=a[e].concat(t)},this.off=function(e,t){var i;return!!a[e]&&(i=a[e].indexOf(t),a[e]=a[e].slice(),a[e].splice(i,1),-1<i)},this.trigger=function(e,t){var i,n,s,r;if(i=a[e])if(2===arguments.length)for(s=i.length,n=0;n<s;++n)i[n].call(this,t);else{for(r=[],n=arguments.length,n=1;n<arguments.length;++n)r.push(arguments[n]);for(s=i.length,n=0;n<s;++n)i[n].apply(this,r)}},this.dispose=function(){a={}}}};X.prototype.pipe=function(t){return this.on("data",function(e){t.push(e)}),this.on("done",function(e){t.flush(e)}),t},X.prototype.push=function(e){this.trigger("data",e)},X.prototype.flush=function(e){this.trigger("done",e)};var Q=X,K=function(e){var t,i,n=[],s=[];for(t=n.byteLength=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(i=e[t]).nalUnitType?(n.length&&(n.duration=i.dts-n.dts,s.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));return s.length&&(!n.duration||n.duration<=0)&&(n.duration=s[s.length-1].duration),s.push(n),s},J=function(e){var t,i,n=[],s=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=e[0].pts,n.dts=e[0].dts,s.byteLength=0,s.nalCount=0,s.duration=0,s.pts=e[0].pts,s.dts=e[0].dts,t=0;t<e.length;t++)(i=e[t]).keyFrame?(n.length&&(s.push(n),s.byteLength+=n.byteLength,s.nalCount+=n.nalCount,s.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));return s.length&&n.duration<=0&&(n.duration=s[s.length-1].duration),s.byteLength+=n.byteLength,s.nalCount+=n.nalCount,s.duration+=n.duration,s.push(n),s},Z=function(e){var t;return!e[0][0].keyFrame&&1<e.length&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e},ee=function(e,t){var i,n,s,r,a,o,l=t||0,c=[];for(i=0;i<e.length;i++)for(r=e[i],n=0;n<r.length;n++)a=r[n],o=void 0,(o={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}).dataOffset=l,o.compositionTimeOffset=a.pts-a.dts,o.duration=a.duration,o.size=4*a.length,o.size+=a.byteLength,a.keyFrame&&(o.flags.dependsOn=2,o.flags.isNonSyncSample=0),l+=(s=o).size,c.push(s);return c},te=function(e){var t,i,n,s,r,a,o=0,l=e.byteLength,c=e.nalCount,u=new Uint8Array(l+4*c),d=new DataView(u.buffer);for(t=0;t<e.length;t++)for(s=e[t],i=0;i<s.length;i++)for(r=s[i],n=0;n<r.length;n++)a=r[n],d.setUint32(o,a.data.byteLength),o+=4,u.set(a.data,o),o+=a.data.byteLength;return u},ie=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},ne=function(e,t){var i,n=e.minSegmentDts;return t||(n-=e.timelineStartInfo.dts),i=e.timelineStartInfo.baseMediaDecodeTime,i+=n,i=Math.max(0,i),"audio"===e.type&&(i*=e.samplerate/9e4,i=Math.floor(i)),i},se=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},re=function(e){for(var t=0,i={payloadType:-1,payloadSize:0},n=0,s=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)n+=255,t++;for(n+=e[t++];255===e[t];)s+=255,t++;if(s+=e[t++],!i.payload&&4===n){i.payloadType=n,i.payloadSize=s,i.payload=e.subarray(t,t+s);break}t+=s,s=n=0}return i},ae=function(e){return 181!==e.payload[0]?null:49!=(e.payload[1]<<8|e.payload[2])?null:"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])?null:3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)},oe=function(e,t){var i,n,s,r,a=[];if(!(64&t[0]))return a;for(n=31&t[0],i=0;i<n;i++)r={type:3&t[2+(s=3*i)],pts:e},4&t[s+2]&&(r.ccData=t[s+3]<<8|t[s+4],a.push(r));return a},le=function(e){for(var t,i,n=e.byteLength,s=[],r=1;r<n-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(s.push(r+2),r+=2):r++;if(0===s.length)return e;t=n-s.length,i=new Uint8Array(t);var a=0;for(r=0;r<t;a++,r++)a===s[0]&&(a++,s.shift()),i[r]=e[a];return i},ce=4,ue=function a(){a.prototype.init.call(this),this.captionPackets_=[],this.ccStreams_=[new ge(0,0),new ge(0,1),new ge(1,0),new ge(1,1)],this.reset(),this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data")),e.on("done",this.trigger.bind(this,"done"))},this)};(ue.prototype=new Q).push=function(e){var t,i,n;if("sei_rbsp"===e.nalUnitType&&(t=re(e.escapedRBSP)).payloadType===ce&&(i=ae(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));n=oe(e.pts,i),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},ue.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(e,t){e.presortIndex=t}),this.captionPackets_.sort(function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts}),this.captionPackets_.forEach(function(e){e.type<2&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(e){e.flush()},this)):this.ccStreams_.forEach(function(e){e.flush()},this)},ue.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(e){e.reset()})},ue.prototype.dispatchCea608Packet=function(e){this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},ue.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},ue.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)};var de={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},he=function(e){return null===e?"":(e=de[e]||e,String.fromCharCode(e))},pe=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],fe=function(){for(var e=[],t=15;t--;)e.push("");return e},ge=function a(e,t){a.prototype.init.call(this),this.field_=e||0,this.dataChannel_=t||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,i,n,s,r;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),n=t>>>8,s=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=fe();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=fe();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=fe()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(n,s))r=he((n=(3&n)<<8)|s),this[this.mode_](e.pts,r),this.column_++;else if(this.isExtCharacter(n,s))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),r=he((n=(3&n)<<8)|s),this[this.mode_](e.pts,r),this.column_++;else if(this.isMidRowCode(n,s))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&s)&&this.addFormatting(e.pts,["i"]),1==(1&s)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(n,s))this.column_+=3&s;else if(this.isPAC(n,s)){var a=pe.indexOf(7968&t);"rollUp"===this.mode_&&this.setRollUp(e.pts,a),a!==this.row_&&(this.clearFormatting(e.pts),this.row_=a),1&s&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(s)&&14==(14&s)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(n)&&(0===s&&(s=null),r=he(n),r+=he(s),this[this.mode_](e.pts,r),this.column_+=r.length)}else this.lastControlCode_=null}};ge.prototype=new Q,ge.prototype.flushDisplayed=function(e){var t=this.displayed_.map(function(e){return e.trim()}).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},ge.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=fe(),this.nonDisplayed_=fe(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},ge.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},ge.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&48<=t&&t<=63},ge.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&32<=t&&t<=63},ge.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&32<=t&&t<=47},ge.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&33<=t&&t<=35},ge.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&64<=t&&t<=127},ge.prototype.isColorPAC=function(e){return 64<=e&&e<=79||96<=e&&e<=127},ge.prototype.isNormalChar=function(e){return 32<=e&&e<=127},ge.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=fe(),this.displayed_=fe()),void 0!==t&&t!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[t-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},ge.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var i=t.reduce(function(e,t){return e+"<"+t+">"},"");this[this.mode_](e,i)},ge.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce(function(e,t){return e+"</"+t+">"},"");this.formatting_=[],this[this.mode_](e,t)}},ge.prototype.popOn=function(e,t){var i=this.nonDisplayed_[this.row_];i+=t,this.nonDisplayed_[this.row_]=i},ge.prototype.rollUp=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i},ge.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},ge.prototype.paintOn=function(e,t){var i=this.displayed_[this.row_];i+=t,this.displayed_[this.row_]=i};var me={CaptionStream:ue,Cea608Stream:ge},ve={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},_e=function(e,t){var i=1;for(t<e&&(i=-1);4294967296<Math.abs(t-e);)e+=8589934592*i;return e},ye=function a(e){var t,i;a.prototype.init.call(this),this.type_=e,this.push=function(e){e.type===this.type_&&(void 0===i&&(i=e.dts),e.dts=_e(e.dts,i),e.pts=_e(e.pts,i),t=e.dts,this.trigger("data",e))},this.flush=function(){i=t,this.trigger("done")},this.discontinuity=function(){t=i=void 0}};ye.prototype=new Q;var be,we=ye,Se=function(e,t,i){var n,s="";for(n=t;n<i;n++)s+="%"+("00"+e[n].toString(16)).slice(-2);return s},Ce=function(e,t,i){return decodeURIComponent(Se(e,t,i))},Te=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},ke={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Ce(e.data,1,t),e.value=Ce(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=Ce(e.data,1,t),e.url=Ce(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,i;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(i=e.data,unescape(Se(i,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};(be=function(e){var t,l={debug:!(!e||!e.debug),descriptor:e&&e.descriptor},c=0,u=[],d=0;if(be.prototype.init.call(this),this.dispatchType=ve.METADATA_STREAM_TYPE.toString(16),l.descriptor)for(t=0;t<l.descriptor.length;t++)this.dispatchType+=("00"+l.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,i,n,s,r;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(d=0,u.length=0),0===u.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))l.debug;else if(u.push(e),d+=e.data.byteLength,1===u.length&&(c=Te(e.data.subarray(6,10)),c+=10),!(d<c)){for(t={data:new Uint8Array(c),frames:[],pts:u[0].pts,dts:u[0].dts},r=0;r<c;)t.data.set(u[0].data.subarray(0,c-r),r),r+=u[0].data.byteLength,d-=u[0].data.byteLength,u.shift();i=10,64&t.data[5]&&(i+=4,i+=Te(t.data.subarray(10,14)),c-=Te(t.data.subarray(16,20)));do{if((n=Te(t.data.subarray(i+4,i+8)))<1)return;if((s={id:String.fromCharCode(t.data[i],t.data[i+1],t.data[i+2],t.data[i+3]),data:t.data.subarray(i+10,i+n+10)}).key=s.id,ke[s.id]&&(ke[s.id](s),"com.apple.streaming.transportStreamTimestamp"===s.owner)){var a=s.data,o=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;o*=4,o+=3&a[7],s.timeStamp=o,void 0===t.pts&&void 0===t.dts&&(t.pts=s.timeStamp,t.dts=s.timeStamp),this.trigger("timestamp",s)}t.frames.push(s),i+=10,i+=n}while(i<c);this.trigger("data",t)}}}).prototype=new Q;var Ee,Ie,Ae,Pe=be,xe=we;(Ee=function(){var s=new Uint8Array(188),r=0;Ee.prototype.init.call(this),this.push=function(e){var t,i=0,n=188;for(r?((t=new Uint8Array(e.byteLength+r)).set(s.subarray(0,r)),t.set(e,r),r=0):t=e;n<t.byteLength;)71!==t[i]||71!==t[n]?(i++,n++):(this.trigger("data",t.subarray(i,n)),i+=188,n+=188);i<t.byteLength&&(s.set(t.subarray(i),0),r=t.byteLength-i)},this.flush=function(){188===r&&71===s[0]&&(this.trigger("data",s),r=0),this.trigger("done")}}).prototype=new Q,(Ie=function(){var n,s,r,a;Ie.prototype.init.call(this),(a=this).packetsWaitingForPmt=[],this.programMapTable=void 0,n=function(e,t){var i=0;t.payloadUnitStartIndicator&&(i+=e[i]+1),"pat"===t.type?s(e.subarray(i),t):r(e.subarray(i),t)},s=function(e,t){t.section_number=e[7],t.last_section_number=e[8],a.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=a.pmtPid},r=function(e,t){var i,n;if(1&e[5]){for(a.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&e[1])<<8|e[2])-4,n=12+((15&e[10])<<8|e[11]);n<i;){var s=e[n],r=(31&e[n+1])<<8|e[n+2];s===ve.H264_STREAM_TYPE&&null===a.programMapTable.video?a.programMapTable.video=r:s===ve.ADTS_STREAM_TYPE&&null===a.programMapTable.audio?a.programMapTable.audio=r:s===ve.METADATA_STREAM_TYPE&&(a.programMapTable["timed-metadata"][r]=s),n+=5+((15&e[n+3])<<8|e[n+4])}t.programMapTable=a.programMapTable}},this.push=function(e){var t={},i=4;if(t.payloadUnitStartIndicator=!!(64&e[1]),t.pid=31&e[1],t.pid<<=8,t.pid|=e[2],1<(48&e[3])>>>4&&(i+=e[i]+1),0===t.pid)t.type="pat",n(e.subarray(i),t),this.trigger("data",t);else if(t.pid===this.pmtPid)for(t.type="pmt",n(e.subarray(i),t),this.trigger("data",t);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,i,t]):this.processPes_(e,i,t)},this.processPes_=function(e,t,i){i.pid===this.programMapTable.video?i.streamType=ve.H264_STREAM_TYPE:i.pid===this.programMapTable.audio?i.streamType=ve.ADTS_STREAM_TYPE:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=e.subarray(t),this.trigger("data",i)}}).prototype=new Q,Ie.STREAM_TYPES={h264:27,adts:15},(Ae=function(){var h=this,n={data:[],size:0},s={data:[],size:0},r={data:[],size:0},a=function(e,t,i){var n,s,r=new Uint8Array(e.size),a={type:t},o=0,l=0;if(e.data.length&&!(e.size<9)){for(a.trackId=e.data[0].pid,o=0;o<e.data.length;o++)s=e.data[o],r.set(s.data,l),l+=s.data.byteLength;var c,u,d;c=r,(u=a).packetLength=6+(c[4]<<8|c[5]),u.dataAlignmentIndicator=0!=(4&c[6]),192&(d=c[7])&&(u.pts=(14&c[9])<<27|(255&c[10])<<20|(254&c[11])<<12|(255&c[12])<<5|(254&c[13])>>>3,u.pts*=4,u.pts+=(6&c[13])>>>1,u.dts=u.pts,64&d&&(u.dts=(14&c[14])<<27|(255&c[15])<<20|(254&c[16])<<12|(255&c[17])<<5|(254&c[18])>>>3,u.dts*=4,u.dts+=(6&c[18])>>>1)),u.data=c.subarray(9+c[8]),n="video"===t||a.packetLength<=e.size,(i||n)&&(e.size=0,e.data.length=0),n&&h.trigger("data",a)}};Ae.prototype.init.call(this),this.push=function(i){({pat:function(){},pes:function(){var e,t;switch(i.streamType){case ve.H264_STREAM_TYPE:case ve.H264_STREAM_TYPE:e=n,t="video";break;case ve.ADTS_STREAM_TYPE:e=s,t="audio";break;case ve.METADATA_STREAM_TYPE:e=r,t="timed-metadata";break;default:return}i.payloadUnitStartIndicator&&a(e,t,!0),e.data.push(i),e.size+=i.data.byteLength},pmt:function(){var e={type:"metadata",tracks:[]},t=i.programMapTable;null!==t.video&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&e.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),h.trigger("data",e)}})[i.type]()},this.flush=function(){a(n,"video"),a(s,"audio"),a(r,"timed-metadata"),this.trigger("done")}}).prototype=new Q;var Me={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Ee,TransportParseStream:Ie,ElementaryStream:Ae,TimestampRolloverStream:xe,CaptionStream:me.CaptionStream,Cea608Stream:me.Cea608Stream,MetadataStream:Pe};for(var De in ve)ve.hasOwnProperty(De)&&(Me[De]=ve[De]);var Le,Ne=Me,Oe=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(Le=function(){var c;Le.prototype.init.call(this),this.push=function(e){var t,i,n,s,r,a,o=0,l=0;if("audio"===e.type)for(c?(s=c,(c=new Uint8Array(s.byteLength+e.data.byteLength)).set(s),c.set(e.data,s.byteLength)):c=e.data;o+5<c.length;)if(255===c[o]&&240==(246&c[o+1])){if(i=2*(1&~c[o+1]),t=(3&c[o+3])<<11|c[o+4]<<3|(224&c[o+5])>>5,a=9e4*(r=1024*(1+(3&c[o+6])))/Oe[(60&c[o+2])>>>2],n=o+t,c.byteLength<n)return;if(this.trigger("data",{pts:e.pts+l*a,dts:e.dts+l*a,sampleCount:r,audioobjecttype:1+(c[o+2]>>>6&3),channelcount:(1&c[o+2])<<2|(192&c[o+3])>>>6,samplerate:Oe[(60&c[o+2])>>>2],samplingfrequencyindex:(60&c[o+2])>>>2,samplesize:16,data:c.subarray(o+7+i,n)}),c.byteLength===n)return void(c=void 0);l++,c=c.subarray(n)}else o++},this.flush=function(){this.trigger("done")}}).prototype=new Q;var Re,Ue,He,Be=Le,$e=function(n){var s=n.byteLength,r=0,a=0;this.length=function(){return 8*s},this.bitsAvailable=function(){return 8*s+a},this.loadWord=function(){var e=n.byteLength-s,t=new Uint8Array(4),i=Math.min(4,s);if(0===i)throw new Error("no bytes available");t.set(n.subarray(e,e+i)),r=new DataView(t.buffer).getUint32(0),a=8*i,s-=i},this.skipBits=function(e){var t;e<a||(e-=a,e-=8*(t=Math.floor(e/8)),s-=t,this.loadWord()),r<<=e,a-=e},this.readBits=function(e){var t=Math.min(a,e),i=r>>>32-t;return 0<(a-=t)?r<<=t:0<s&&this.loadWord(),0<(t=e-t)?i<<t|this.readBits(t):i},this.skipLeadingZeros=function(){var e;for(e=0;e<a;++e)if(0!=(r&2147483648>>>e))return r<<=e,a-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(Ue=function(){var i,n,s=0;Ue.prototype.init.call(this),this.push=function(e){var t;for(n=n?((t=new Uint8Array(n.byteLength+e.data.byteLength)).set(n),t.set(e.data,n.byteLength),t):e.data;s<n.byteLength-3;s++)if(1===n[s+2]){i=s+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}for(s+3!==i-2&&this.trigger("data",n.subarray(s+3,i-2));1!==n[++i]&&i<n.length;);s=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}this.trigger("data",n.subarray(s+3,i-2)),s=i-2,i+=3;break;default:i+=3}n=n.subarray(s),i-=s,s=0},this.flush=function(){n&&3<n.byteLength&&this.trigger("data",n.subarray(s+3)),n=null,s=0,this.trigger("done")}}).prototype=new Q,He={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(Re=function(){var i,n,s,r,a,o,y,t=new Ue;Re.prototype.init.call(this),(i=this).push=function(e){"video"===e.type&&(n=e.trackId,s=e.pts,r=e.dts,t.push(e))},t.on("data",function(e){var t={trackId:n,pts:s,dts:r,data:e};switch(31&e[0]){case 5:t.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:t.nalUnitType="sei_rbsp",t.escapedRBSP=a(e.subarray(1));break;case 7:t.nalUnitType="seq_parameter_set_rbsp",t.escapedRBSP=a(e.subarray(1)),t.config=o(t.escapedRBSP);break;case 8:t.nalUnitType="pic_parameter_set_rbsp";break;case 9:t.nalUnitType="access_unit_delimiter_rbsp"}i.trigger("data",t)}),t.on("done",function(){i.trigger("done")}),this.flush=function(){t.flush()},y=function(e,t){var i,n=8,s=8;for(i=0;i<e;i++)0!==s&&(s=(n+t.readExpGolomb()+256)%256),n=0===s?n:s},a=function(e){for(var t,i,n=e.byteLength,s=[],r=1;r<n-2;)0===e[r]&&0===e[r+1]&&3===e[r+2]?(s.push(r+2),r+=2):r++;if(0===s.length)return e;t=n-s.length,i=new Uint8Array(t);var a=0;for(r=0;r<t;a++,r++)a===s[0]&&(a++,s.shift()),i[r]=e[a];return i},o=function(e){var t,i,n,s,r,a,o,l,c,u,d,h,p,f=0,g=0,m=0,v=0,_=1;if(i=(t=new $e(e)).readUnsignedByte(),s=t.readUnsignedByte(),n=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),He[i]&&(3===(r=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(d=3!==r?8:12,p=0;p<d;p++)t.readBoolean()&&y(p<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(a=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===a)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),o=t.readUnsignedExpGolomb(),p=0;p<o;p++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),l=t.readUnsignedExpGolomb(),c=t.readUnsignedExpGolomb(),0===(u=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(f=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:h=[1,1];break;case 2:h=[12,11];break;case 3:h=[10,11];break;case 4:h=[16,11];break;case 5:h=[40,33];break;case 6:h=[24,11];break;case 7:h=[20,11];break;case 8:h=[32,11];break;case 9:h=[80,33];break;case 10:h=[18,11];break;case 11:h=[15,11];break;case 12:h=[64,33];break;case 13:h=[160,99];break;case 14:h=[4,3];break;case 15:h=[3,2];break;case 16:h=[2,1];break;case 255:h=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}h&&(_=h[0]/h[1])}return{profileIdc:i,levelIdc:n,profileCompatibility:s,width:Math.ceil((16*(l+1)-2*f-2*g)*_),height:(2-u)*(c+1)*16-2*m-2*v}}}).prototype=new Q;var Fe,je={H264Stream:Re,NalByteStream:Ue};(Fe=function(){var o=new Uint8Array,l=0;Fe.prototype.init.call(this),this.setTimestamp=function(e){l=e},this.parseId3TagSize=function(e,t){var i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&e[t+5])>>4?i+20:i+10},this.parseAdtsSize=function(e,t){var i=(224&e[t+5])>>5,n=e[t+4]<<3;return 6144&e[t+3]|n|i},this.push=function(e){var t,i,n,s,r=0,a=0;for(o.length?(s=o.length,(o=new Uint8Array(e.byteLength+s)).set(o.subarray(0,s)),o.set(e,s)):o=e;3<=o.length-a;)if(o[a]!=="I".charCodeAt(0)||o[a+1]!=="D".charCodeAt(0)||o[a+2]!=="3".charCodeAt(0))if(!0&o[a]&&240==(240&o[a+1])){if(o.length-a<7)break;if((r=this.parseAdtsSize(o,a))>o.length)break;n={type:"audio",data:o.subarray(a,a+r),pts:l,dts:l},this.trigger("data",n),a+=r}else a++;else{if(o.length-a<10)break;if((r=this.parseId3TagSize(o,a))>o.length)break;i={type:"timed-metadata",data:o.subarray(a,a+r)},this.trigger("data",i),a+=r}t=o.length-a,o=0<t?o.subarray(a):new Uint8Array}}).prototype=new Q;var ze,Ge,Ve,We,qe,Ye,Xe,Qe=Fe,Ke=[33,16,5,32,164,27],Je=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],Ze=function(e){for(var t=[];e--;)t.push(0);return t},et={96e3:[Ke,[227,64],Ze(154),[56]],88200:[Ke,[231],Ze(170),[56]],64e3:[Ke,[248,192],Ze(240),[56]],48e3:[Ke,[255,192],Ze(268),[55,148,128],Ze(54),[112]],44100:[Ke,[255,192],Ze(268),[55,163,128],Ze(84),[112]],32e3:[Ke,[255,192],Ze(268),[55,234],Ze(226),[112]],24e3:[Ke,[255,192],Ze(268),[55,255,128],Ze(268),[111,112],Ze(126),[224]],16e3:[Ke,[255,192],Ze(268),[55,255,128],Ze(268),[111,255],Ze(269),[223,108],Ze(195),[1,192]],12e3:[Je,Ze(268),[3,127,248],Ze(268),[6,255,240],Ze(268),[13,255,224],Ze(268),[27,253,128],Ze(259),[56]],11025:[Je,Ze(268),[3,127,248],Ze(268),[6,255,240],Ze(268),[13,255,224],Ze(268),[27,255,192],Ze(268),[55,175,128],Ze(108),[112]],8e3:[Je,Ze(268),[3,121,16],Ze(47),[7]]},tt=(ze=et,Object.keys(ze).reduce(function(e,t){return e[t]=new Uint8Array(ze[t].reduce(function(e,t){return e.concat(t)},[])),e},{}));Ye=function(e,t){return Ge(qe(e,t))},Xe=function(e,t){return Ve(We(e),t)},Ge=function(e){return 9e4*e},Ve=function(e,t){return e*t},We=function(e){return e/9e4},qe=function(e,t){return e/t};var it,nt,st,rt,at,ot,lt,ct=Ye,ut=Xe,dt=je.H264Stream,ht=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],pt=["width","height","profileIdc","levelIdc","profileCompatibility"];at=function(e){return e[0]==="I".charCodeAt(0)&&e[1]==="D".charCodeAt(0)&&e[2]==="3".charCodeAt(0)},ot=function(e,t){var i;if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0},lt=function(e){var t,i=0;for(t=0;t<e.length;t++)i+=e[t].data.byteLength;return i},(nt=function(s,r){var a=[],o=0,t=0,c=0,u=1/0;r=r||{},nt.prototype.init.call(this),this.push=function(t){se(s,t),s&&ht.forEach(function(e){s[e]=t[e]}),a.push(t)},this.setEarliestDts=function(e){t=e-s.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(e){u=e},this.setAudioAppendStart=function(e){c=e},this.flush=function(){var e,t,i,n;0!==a.length&&(e=this.trimAdtsFramesByEarliestDts_(a),s.baseMediaDecodeTime=ne(s,r.keepOriginalTimestamps),this.prefixWithSilence_(s,e),s.samples=this.generateSampleTable_(e),i=W.mdat(this.concatenateFrameData_(e)),a=[],t=W.moof(o,[s]),n=new Uint8Array(t.byteLength+i.byteLength),o++,n.set(t),n.set(i,t.byteLength),ie(s),this.trigger("data",{track:s,boxes:n})),this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(e,t){var i,n,s,r,a=0,o=0,l=0;if(t.length&&(i=ct(e.baseMediaDecodeTime,e.samplerate),n=Math.ceil(9e4/(e.samplerate/1024)),c&&u&&(a=i-Math.max(c,u),l=(o=Math.floor(a/n))*n),!(o<1||45e3<l))){for((s=tt[e.samplerate])||(s=t[0].data),r=0;r<o;r++)t.splice(r,0,{data:s});e.baseMediaDecodeTime-=Math.floor(ut(l,e.samplerate))}},this.trimAdtsFramesByEarliestDts_=function(e){return s.minSegmentDts>=t?e:(s.minSegmentDts=1/0,e.filter(function(e){return e.dts>=t&&(s.minSegmentDts=Math.min(s.minSegmentDts,e.dts),s.minSegmentPts=s.minSegmentDts,!0)}))},this.generateSampleTable_=function(e){var t,i,n=[];for(t=0;t<e.length;t++)i=e[t],n.push({size:i.data.byteLength,duration:1024});return n},this.concatenateFrameData_=function(e){var t,i,n=0,s=new Uint8Array(lt(e));for(t=0;t<e.length;t++)i=e[t],s.set(i.data,n),n+=i.data.byteLength;return s}}).prototype=new Q,(it=function(o,l){var t,i,c=0,u=[],d=[];l=l||{},it.prototype.init.call(this),delete o.minPTS,this.gopCache_=[],this.push=function(e){se(o,e),"seq_parameter_set_rbsp"!==e.nalUnitType||t||(t=e.config,o.sps=[e.data],pt.forEach(function(e){o[e]=t[e]},this)),"pic_parameter_set_rbsp"!==e.nalUnitType||i||(i=e.data,o.pps=[e.data]),u.push(e)},this.flush=function(){for(var e,t,i,n,s,r;u.length&&"access_unit_delimiter_rbsp"!==u[0].nalUnitType;)u.shift();if(0===u.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(e=K(u),(i=J(e))[0][0].keyFrame||((t=this.getGopForFusion_(u[0],o))?(i.unshift(t),i.byteLength+=t.byteLength,i.nalCount+=t.nalCount,i.pts=t.pts,i.dts=t.dts,i.duration+=t.duration):i=Z(i)),d.length){var a;if(!(a=l.alignGopsAtEnd?this.alignGopsAtEnd_(i):this.alignGopsAtStart_(i)))return this.gopCache_.unshift({gop:i.pop(),pps:o.pps,sps:o.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),u=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");ie(o),i=a}se(o,i),o.samples=ee(i),s=W.mdat(te(i)),o.baseMediaDecodeTime=ne(o,l.keepOriginalTimestamps),this.trigger("processedGopsInfo",i.map(function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}})),this.gopCache_.unshift({gop:i.pop(),pps:o.pps,sps:o.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),u=[],this.trigger("baseMediaDecodeTime",o.baseMediaDecodeTime),this.trigger("timelineStartInfo",o.timelineStartInfo),n=W.moof(c,[o]),r=new Uint8Array(n.byteLength+s.byteLength),c++,r.set(n),r.set(s,n.byteLength),this.trigger("data",{track:o,boxes:r}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.resetStream_=function(){ie(o),i=t=void 0},this.getGopForFusion_=function(e){var t,i,n,s,r,a=1/0;for(r=0;r<this.gopCache_.length;r++)n=(s=this.gopCache_[r]).gop,o.pps&&ot(o.pps[0],s.pps[0])&&o.sps&&ot(o.sps[0],s.sps[0])&&(n.dts<o.timelineStartInfo.dts||-1e4<=(t=e.dts-n.dts-n.duration)&&t<=45e3&&(!i||t<a)&&(i=s,a=t));return i?i.gop:null},this.alignGopsAtStart_=function(e){var t,i,n,s,r,a,o,l;for(r=e.byteLength,a=e.nalCount,o=e.duration,t=i=0;t<d.length&&i<e.length&&(n=d[t],s=e[i],n.pts!==s.pts);)s.pts>n.pts?t++:(i++,r-=s.byteLength,a-=s.nalCount,o-=s.duration);return 0===i?e:i===e.length?null:((l=e.slice(i)).byteLength=r,l.duration=o,l.nalCount=a,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(e){var t,i,n,s,r,a,o;for(t=d.length-1,i=e.length-1,r=null,a=!1;0<=t&&0<=i;){if(n=d[t],s=e[i],n.pts===s.pts){a=!0;break}n.pts>s.pts?t--:(t===d.length-1&&(r=i),i--)}if(!a&&null===r)return null;if(0===(o=a?i:r))return e;var l=e.slice(o),c=l.reduce(function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e},{byteLength:0,duration:0,
nalCount:0});return l.byteLength=c.byteLength,l.duration=c.duration,l.nalCount=c.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(e){d=e}}).prototype=new Q,(rt=function(e,t){this.numberOfTracks=0,this.metadataStream=t,"undefined"!=typeof e.remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,rt.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBoxes.push(e.boxes),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track),void("audio"===e.track.type&&(this.audioTrack=e.track)))}}).prototype=new Q,rt.prototype.flush=function(e){var t,i,n,s,r=0,a={captions:[],captionStreams:{},metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,pt.forEach(function(e){a.info[e]=this.videoTrack[e]},this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,ht.forEach(function(e){a.info[e]=this.audioTrack[e]},this)),1===this.pendingTracks.length?a.type=this.pendingTracks[0].type:a.type="combined",this.emittedTracks+=this.pendingTracks.length,n=W.initSegment(this.pendingTracks),a.initSegment=new Uint8Array(n.byteLength),a.initSegment.set(n),a.data=new Uint8Array(this.pendingBytes),s=0;s<this.pendingBoxes.length;s++)a.data.set(this.pendingBoxes[s],r),r+=this.pendingBoxes[s].byteLength;for(s=0;s<this.pendingCaptions.length;s++)(t=this.pendingCaptions[s]).startTime=t.startPts-o,t.startTime/=9e4,t.endTime=t.endPts-o,t.endTime/=9e4,a.captionStreams[t.stream]=!0,a.captions.push(t);for(s=0;s<this.pendingMetadata.length;s++)(i=this.pendingMetadata[s]).cueTime=i.pts-o,i.cueTime/=9e4,a.metadata.push(i);a.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",a),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(st=function(n){var s,r,a=this,i=!0;st.prototype.init.call(this),n=n||{},this.baseMediaDecodeTime=n.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var t={};(this.transmuxPipeline_=t).type="aac",t.metadataStream=new Ne.MetadataStream,t.aacStream=new Qe,t.audioTimestampRolloverStream=new Ne.TimestampRolloverStream("audio"),t.timedMetadataTimestampRolloverStream=new Ne.TimestampRolloverStream("timed-metadata"),t.adtsStream=new Be,t.coalesceStream=new rt(n,t.metadataStream),t.headOfPipeline=t.aacStream,t.aacStream.pipe(t.audioTimestampRolloverStream).pipe(t.adtsStream),t.aacStream.pipe(t.timedMetadataTimestampRolloverStream).pipe(t.metadataStream).pipe(t.coalesceStream),t.metadataStream.on("timestamp",function(e){t.aacStream.setTimestamp(e.timeStamp)}),t.aacStream.on("data",function(e){"timed-metadata"!==e.type||t.audioSegmentStream||(r=r||{timelineStartInfo:{baseMediaDecodeTime:a.baseMediaDecodeTime},codec:"adts",type:"audio"},t.coalesceStream.numberOfTracks++,t.audioSegmentStream=new nt(r,n),t.adtsStream.pipe(t.audioSegmentStream).pipe(t.coalesceStream))}),t.coalesceStream.on("data",this.trigger.bind(this,"data")),t.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var i={};(this.transmuxPipeline_=i).type="ts",i.metadataStream=new Ne.MetadataStream,i.packetStream=new Ne.TransportPacketStream,i.parseStream=new Ne.TransportParseStream,i.elementaryStream=new Ne.ElementaryStream,i.videoTimestampRolloverStream=new Ne.TimestampRolloverStream("video"),i.audioTimestampRolloverStream=new Ne.TimestampRolloverStream("audio"),i.timedMetadataTimestampRolloverStream=new Ne.TimestampRolloverStream("timed-metadata"),i.adtsStream=new Be,i.h264Stream=new dt,i.captionStream=new Ne.CaptionStream,i.coalesceStream=new rt(n,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream),i.elementaryStream.pipe(i.videoTimestampRolloverStream).pipe(i.h264Stream),i.elementaryStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream),i.elementaryStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",function(e){var t;if("metadata"===e.type){for(t=e.tracks.length;t--;)s||"video"!==e.tracks[t].type?r||"audio"!==e.tracks[t].type||((r=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=a.baseMediaDecodeTime):(s=e.tracks[t]).timelineStartInfo.baseMediaDecodeTime=a.baseMediaDecodeTime;s&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmentStream=new it(s,n),i.videoSegmentStream.on("timelineStartInfo",function(e){r&&(r.timelineStartInfo=e,i.audioSegmentStream.setEarliestDts(e.dts))}),i.videoSegmentStream.on("processedGopsInfo",a.trigger.bind(a,"gopInfo")),i.videoSegmentStream.on("baseMediaDecodeTime",function(e){r&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(e)}),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),r&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new nt(r,n),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream))}}),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(e){var t=this.transmuxPipeline_;this.baseMediaDecodeTime=e,r&&(r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,ie(r),r.timelineStartInfo.baseMediaDecodeTime=e,t.audioTimestampRolloverStream&&t.audioTimestampRolloverStream.discontinuity()),s&&(t.videoSegmentStream&&(t.videoSegmentStream.gopCache_=[],t.videoTimestampRolloverStream.discontinuity()),s.timelineStartInfo.dts=void 0,s.timelineStartInfo.pts=void 0,ie(s),t.captionStream.reset(),s.timelineStartInfo.baseMediaDecodeTime=e),t.timedMetadataTimestampRolloverStream&&t.timedMetadataTimestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){r&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.alignGopsWith=function(e){s&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.push=function(e){if(i){var t=at(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),i=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new Q;var ft,gt,mt={Transmuxer:st,VideoSegmentStream:it,AudioSegmentStream:nt,AUDIO_PROPERTIES:ht,VIDEO_PROPERTIES:pt},vt=Y.parseType,_t=function(e){return new Date(1e3*e-20828448e5)},yt=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},bt={avc1:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{dataReferenceIndex:t.getUint16(6),width:t.getUint16(24),height:t.getUint16(26),horizresolution:t.getUint16(28)+t.getUint16(30)/16,vertresolution:t.getUint16(32)+t.getUint16(34)/16,frameCount:t.getUint16(40),depth:t.getUint16(74),config:ft(e.subarray(78,e.byteLength))}},avcC:function(e){var t,i,n,s,r=new DataView(e.buffer,e.byteOffset,e.byteLength),a={configurationVersion:e[0],avcProfileIndication:e[1],profileCompatibility:e[2],avcLevelIndication:e[3],lengthSizeMinusOne:3&e[4],sps:[],pps:[]},o=31&e[5];for(n=6,s=0;s<o;s++)i=r.getUint16(n),n+=2,a.sps.push(new Uint8Array(e.subarray(n,n+i))),n+=i;for(t=e[n],n++,s=0;s<t;s++)i=r.getUint16(n),n+=2,a.pps.push(new Uint8Array(e.subarray(n,n+i))),n+=i;return a},btrt:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{bufferSizeDB:t.getUint32(0),maxBitrate:t.getUint32(4),avgBitrate:t.getUint32(8)}},esds:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),esId:e[6]<<8|e[7],streamPriority:31&e[8],decoderConfig:{objectProfileIndication:e[11],streamType:e[12]>>>2&63,bufferSize:e[13]<<16|e[14]<<8|e[15],maxBitrate:e[16]<<24|e[17]<<16|e[18]<<8|e[19],avgBitrate:e[20]<<24|e[21]<<16|e[22]<<8|e[23],decoderConfigDescriptor:{tag:e[24],length:e[25],audioObjectType:e[26]>>>3&31,samplingFrequencyIndex:(7&e[26])<<1|e[27]>>>7&1,channelConfiguration:e[27]>>>3&15}}}},ftyp:function(e){for(var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={majorBrand:vt(e.subarray(0,4)),minorVersion:t.getUint32(4),compatibleBrands:[]},n=8;n<e.byteLength;)i.compatibleBrands.push(vt(e.subarray(n,n+4))),n+=4;return i},dinf:function(e){return{boxes:ft(e)}},dref:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),dataReferences:ft(e.subarray(8))}},hdlr:function(e){var t={version:new DataView(e.buffer,e.byteOffset,e.byteLength).getUint8(0),flags:new Uint8Array(e.subarray(1,4)),handlerType:vt(e.subarray(8,12)),name:""},i=8;for(i=24;i<e.byteLength;i++){if(0===e[i]){i++;break}t.name+=String.fromCharCode(e[i])}return t.name=decodeURIComponent(escape(t.name)),t},mdat:function(e){return{byteLength:e.byteLength,nals:function(e){var t,i,n=new DataView(e.buffer,e.byteOffset,e.byteLength),s=[];for(t=0;t+4<e.length;t+=i)if(i=n.getUint32(t),t+=4,i<=0)s.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(31&e[t]){case 1:s.push("slice_layer_without_partitioning_rbsp");break;case 5:s.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:s.push("sei_rbsp");break;case 7:s.push("seq_parameter_set_rbsp");break;case 8:s.push("pic_parameter_set_rbsp");break;case 9:s.push("access_unit_delimiter_rbsp");break;default:s.push("UNKNOWN NAL - "+e[t]&31)}return s}(e)}},mdhd:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=4,s={version:i.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),language:""};return 1===s.version?(n+=4,s.creationTime=_t(i.getUint32(n)),n+=8,s.modificationTime=_t(i.getUint32(n)),n+=4,s.timescale=i.getUint32(n),n+=8):(s.creationTime=_t(i.getUint32(n)),n+=4,s.modificationTime=_t(i.getUint32(n)),n+=4,s.timescale=i.getUint32(n),n+=4),s.duration=i.getUint32(n),n+=4,t=i.getUint16(n),s.language+=String.fromCharCode(96+(t>>10)),s.language+=String.fromCharCode(96+((992&t)>>5)),s.language+=String.fromCharCode(96+(31&t)),s},mdia:function(e){return{boxes:ft(e)}},mfhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sequenceNumber:e[4]<<24|e[5]<<16|e[6]<<8|e[7]}},minf:function(e){return{boxes:ft(e)}},mp4a:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i={dataReferenceIndex:t.getUint16(6),channelcount:t.getUint16(16),samplesize:t.getUint16(18),samplerate:t.getUint16(24)+t.getUint16(26)/65536};return 28<e.byteLength&&(i.streamDescriptor=ft(e.subarray(28))[0]),i},moof:function(e){return{boxes:ft(e)}},moov:function(e){return{boxes:ft(e)}},mvex:function(e){return{boxes:ft(e)}},mvhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(i+=4,n.creationTime=_t(t.getUint32(i)),i+=8,n.modificationTime=_t(t.getUint32(i)),i+=4,n.timescale=t.getUint32(i),i+=8):(n.creationTime=_t(t.getUint32(i)),i+=4,n.modificationTime=_t(t.getUint32(i)),i+=4,n.timescale=t.getUint32(i),i+=4),n.duration=t.getUint32(i),i+=4,n.rate=t.getUint16(i)+t.getUint16(i+2)/16,i+=4,n.volume=t.getUint8(i)+t.getUint8(i+1)/8,i+=2,i+=2,i+=8,n.matrix=new Uint32Array(e.subarray(i,i+36)),i+=36,i+=24,n.nextTrackId=t.getUint32(i),n},pdin:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4)),rate:t.getUint32(4),initialDelay:t.getUint32(8)}},sdtp:function(e){var t,i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]};for(t=4;t<e.byteLength;t++)i.samples.push({dependsOn:(48&e[t])>>4,isDependedOn:(12&e[t])>>2,hasRedundancy:3&e[t]});return i},sidx:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:i.getUint32(4),timescale:i.getUint32(8),earliestPresentationTime:i.getUint32(12),firstOffset:i.getUint32(16)},s=i.getUint16(22);for(t=24;s;t+=12,s--)n.references.push({referenceType:(128&e[t])>>>7,referencedSize:2147483647&i.getUint32(t),subsegmentDuration:i.getUint32(t+4),startsWithSap:!!(128&e[t+8]),sapType:(112&e[t+8])>>>4,sapDeltaTime:268435455&i.getUint32(t+8)});return n},smhd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),balance:e[4]+e[5]/256}},stbl:function(e){return{boxes:ft(e)}},stco:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),chunkOffsets:[]},s=i.getUint32(4);for(t=8;s;t+=4,s--)n.chunkOffsets.push(i.getUint32(t));return n},stsc:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n=i.getUint32(4),s={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleToChunks:[]};for(t=8;n;t+=12,n--)s.sampleToChunks.push({firstChunk:i.getUint32(t),samplesPerChunk:i.getUint32(t+4),sampleDescriptionIndex:i.getUint32(t+8)});return s},stsd:function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleDescriptions:ft(e.subarray(8))}},stsz:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),sampleSize:i.getUint32(4),entries:[]};for(t=12;t<e.byteLength;t+=4)n.entries.push(i.getUint32(t));return n},stts:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),timeToSamples:[]},s=i.getUint32(4);for(t=8;s;t+=8,s--)n.timeToSamples.push({sampleCount:i.getUint32(t),sampleDelta:i.getUint32(t+4)});return n},styp:function(e){return bt.ftyp(e)},tfdt:function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4)),baseMediaDecodeTime:e[4]<<24|e[5]<<16|e[6]<<8|e[7]};return 1===t.version&&(t.baseMediaDecodeTime*=Math.pow(2,32),t.baseMediaDecodeTime+=e[8]<<24|e[9]<<16|e[10]<<8|e[11]),t},tfhd:function(e){var t,i=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:i.getUint32(4)},s=1&n.flags[2],r=2&n.flags[2],a=8&n.flags[2],o=16&n.flags[2],l=32&n.flags[2],c=65536&n.flags[0],u=131072&n.flags[0];return t=8,s&&(t+=4,n.baseDataOffset=i.getUint32(12),t+=4),r&&(n.sampleDescriptionIndex=i.getUint32(t),t+=4),a&&(n.defaultSampleDuration=i.getUint32(t),t+=4),o&&(n.defaultSampleSize=i.getUint32(t),t+=4),l&&(n.defaultSampleFlags=i.getUint32(t)),c&&(n.durationIsEmpty=!0),!s&&u&&(n.baseDataOffsetIsMoof=!0),n},tkhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),i=4,n={version:t.getUint8(0),flags:new Uint8Array(e.subarray(1,4))};return 1===n.version?(i+=4,n.creationTime=_t(t.getUint32(i)),i+=8,n.modificationTime=_t(t.getUint32(i)),i+=4,n.trackId=t.getUint32(i),i+=4,i+=8):(n.creationTime=_t(t.getUint32(i)),i+=4,n.modificationTime=_t(t.getUint32(i)),i+=4,n.trackId=t.getUint32(i),i+=4,i+=4),n.duration=t.getUint32(i),i+=4,i+=8,n.layer=t.getUint16(i),i+=2,n.alternateGroup=t.getUint16(i),i+=2,n.volume=t.getUint8(i)+t.getUint8(i+1)/8,i+=2,i+=2,n.matrix=new Uint32Array(e.subarray(i,i+36)),i+=36,n.width=t.getUint16(i)+t.getUint16(i+2)/16,i+=4,n.height=t.getUint16(i)+t.getUint16(i+2)/16,n},traf:function(e){return{boxes:ft(e)}},trak:function(e){return{boxes:ft(e)}},trex:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:t.getUint32(4),defaultSampleDescriptionIndex:t.getUint32(8),defaultSampleDuration:t.getUint32(12),defaultSampleSize:t.getUint32(16),sampleDependsOn:3&e[20],sampleIsDependedOn:(192&e[21])>>6,sampleHasRedundancy:(48&e[21])>>4,samplePaddingValue:(14&e[21])>>1,sampleIsDifferenceSample:!!(1&e[21]),sampleDegradationPriority:t.getUint16(22)}},trun:function(e){var t,i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},n=new DataView(e.buffer,e.byteOffset,e.byteLength),s=1&i.flags[2],r=4&i.flags[2],a=1&i.flags[1],o=2&i.flags[1],l=4&i.flags[1],c=8&i.flags[1],u=n.getUint32(4),d=8;for(s&&(i.dataOffset=n.getInt32(d),d+=4),r&&u&&(t={flags:yt(e.subarray(d,d+4))},d+=4,a&&(t.duration=n.getUint32(d),d+=4),o&&(t.size=n.getUint32(d),d+=4),c&&(t.compositionTimeOffset=n.getUint32(d),d+=4),i.samples.push(t),u--);u--;)t={},a&&(t.duration=n.getUint32(d),d+=4),o&&(t.size=n.getUint32(d),d+=4),l&&(t.flags=yt(e.subarray(d,d+4)),d+=4),c&&(t.compositionTimeOffset=n.getUint32(d),d+=4),i.samples.push(t);return i},"url ":function(e){return{version:e[0],flags:new Uint8Array(e.subarray(1,4))}},vmhd:function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength);return{version:e[0],flags:new Uint8Array(e.subarray(1,4)),graphicsmode:t.getUint16(4),opcolor:new Uint16Array([t.getUint16(6),t.getUint16(8),t.getUint16(10)])}}},wt={inspect:ft=function(e){for(var t,i,n,s,r,a=0,o=[],l=new ArrayBuffer(e.length),c=new Uint8Array(l),u=0;u<e.length;++u)c[u]=e[u];for(t=new DataView(l);a<e.byteLength;)i=t.getUint32(a),n=vt(e.subarray(a+4,a+8)),s=1<i?a+i:e.byteLength,(r=(bt[n]||function(e){return{data:e}})(e.subarray(a+8,s))).size=i,r.type=n,o.push(r),a=s;return o},textify:gt=function(e,t){var r;return t=t||0,r=new Array(2*t+1).join(" "),e.map(function(s){return r+s.type+"\n"+Object.keys(s).filter(function(e){return"type"!==e&&"boxes"!==e}).map(function(e){var t=r+"  "+e+": ",i=s[e];if(i instanceof Uint8Array||i instanceof Uint32Array){var n=Array.prototype.slice.call(new Uint8Array(i.buffer,i.byteOffset,i.byteLength)).map(function(e){return" "+("00"+e.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return n?1===n.length?t+"<"+n.join("").slice(1)+">":t+"<\n"+n.map(function(e){return r+"  "+e}).join("\n")+"\n"+r+"  >":t+"<>"}return t+JSON.stringify(i,null,2).split("\n").map(function(e,t){return 0===t?e:r+"  "+e}).join("\n")}).join("\n")+(s.boxes?"\n"+gt(s.boxes,t+1):"")}).join("\n")},parseTfdt:bt.tfdt,parseHdlr:bt.hdlr,parseTfhd:bt.tfhd,parseTrun:bt.trun},St=le,Ct=me.CaptionStream,Tt=function(e,t){for(var i=e,n=0;n<t.length;n++){var s=t[n];if(i<s.size)return s;i-=s.size}return null},kt=function(e,v){var n=Y.findBox(e,["moof","traf"]),t=Y.findBox(e,["mdat"]),_={},s=[];return t.forEach(function(e,t){var i=n[t];s.push({mdat:e,traf:i})}),s.forEach(function(e){var t,i,n,s,r,a,o,l,c=e.mdat,u=e.traf,d=Y.findBox(u,["tfhd"]),h=wt.parseTfhd(d[0]),p=h.trackId,f=Y.findBox(u,["tfdt"]),g=0<f.length?wt.parseTfdt(f[0]).baseMediaDecodeTime:0,m=Y.findBox(u,["trun"]);v===p&&0<m.length&&(i=m,s=g,r=(n=h).defaultSampleDuration||0,a=n.defaultSampleSize||0,o=n.trackId,l=[],i.forEach(function(e){var t=wt.parseTrun(e).samples;t.forEach(function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=a),e.trackId=o,e.dts=s,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),e.pts=s+e.compositionTimeOffset,s+=e.duration}),l=l.concat(t)}),t=function(e,t,i){var n,s,r,a,o=new DataView(e.buffer,e.byteOffset,e.byteLength),l=[];for(s=0;s+4<e.length;s+=r)if(r=o.getUint32(s),s+=4,!(r<=0))switch(31&e[s]){case 6:var c=e.subarray(s+1,s+1+r),u=Tt(s,t);n={nalUnitType:"sei_rbsp",size:r,data:c,escapedRBSP:St(c),trackId:i},u?(n.pts=u.pts,n.dts=u.dts,a=u):(n.pts=a.pts,n.dts=a.dts),l.push(n)}return l}(c,l,p),_[p]||(_[p]=[]),_[p]=_[p].concat(t))}),_},Et={generator:W,probe:Y,Transmuxer:mt.Transmuxer,AudioSegmentStream:mt.AudioSegmentStream,VideoSegmentStream:mt.VideoSegmentStream,CaptionParser:function(){var t,o,l,c,u,e=!1;this.isInitialized=function(){return e},this.init=function(){t=new Ct,e=!0,t.on("data",function(e){e.startTime=e.startPts/c,e.endTime=e.endPts/c,u.captions.push(e),u.captionStreams[e.stream]=!0})},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||l===e[0]&&c===t[l])},this.parse=function(e,t,i){var n,s,r;if(!this.isInitialized())return null;if(!t||!i)return null;if(this.isNewInit(t,i))l=t[0],c=i[l];else if(!l||!c)return o.push(e),null;for(;0<o.length;){var a=o.shift();this.parse(a,t,i)}return r=c,null!==(n=(s=l)?{seiNals:kt(e,s)[s],timescale:r}:null)&&n.seiNals?(this.pushNals(n.seiNals),this.flushStream(),u):null},this.pushNals=function(e){if(!this.isInitialized()||!e||0===e.length)return null;e.forEach(function(e){t.push(e)})},this.flushStream=function(){if(!this.isInitialized())return null;t.flush()},this.clearParsedCaptions=function(){u.captions=[],u.captionStreams={}},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){o=[],c=l=null,u?this.clearParsedCaptions():u={captions:[],captionStreams:{}},this.resetCaptionStream()},this.reset()}},It=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),At=function(){function i(e,t){!function(e){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}(this),this.options=t||{},this.self=e,this.init()}return It(i,[{key:"init",value:function(){var n,e;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Et.Transmuxer(this.options),n=this.self,(e=this.transmuxer).on("data",,e.captionStream&&e.captionStream.on("data",function(e){n.postMessage({action:"caption",data:e})}),e.on("done",,e.on("gopInfo",}},{key:"push",value:,{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:,{key:"setAudioAppendStart",value:,{key:"flush",value:function(){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},{key:"alignGopsWith",value:]),i}();new Pt)}()}),_u={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},yu=bu=function(e){var t,i=0<arguments.length&&void 0!==e?e:"",n={codecCount:0};return n.codecCount=i.split(",").length,n.codecCount=n.codecCount||2,(t=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(i))&&(n.videoCodec=t[2],n.videoObjectTypeIndicator=t[3]),n.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(i),n.audioProfile=n.audioProfile&&n.audioProfile[2],n},wu=Su=function(e,t){var i,n,s=(i=t).segments&&i.segments.length&&i.segments[0].map?"mp4":"mp2t",r=(n=t.attributes||{}).CODECS?bu(n.CODECS):_u,a=t.attributes||{},o=!0,l=!1;if(!t)return[];if(e.mediaGroups.AUDIO&&a.AUDIO){var c=e.mediaGroups.AUDIO[a.AUDIO];if(c)for(var u in o=!(l=!0),c)if(!c[u].uri&&!c[u].playlists){o=!0;break}}l&&!r.audioProfile&&(o||(r.audioProfile=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i=e.mediaGroups.AUDIO[t];if(!i)return null;for(var n in i){var s=i[n];if(s["default"]&&s.playlists)return bu(s.playlists[0].attributes.CODECS).audioProfile}return null}(e,a.AUDIO)),r.audioProfile||(Fe.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),r.audioProfile=_u.audioProfile));var d={};r.videoCodec&&(d.video=""+r.videoCodec+r.videoObjectTypeIndicator),r.audioProfile&&(d.audio="mp4a.40."+r.audioProfile);var h=wu("audio",s,[d.audio]),p=wu("video",s,[d.video]),f=wu("video",s,[d.video,d.audio]);return l?!o&&d.video?[p,h]:o||d.video?[f,h]:[h,h]:d.video?[f]:[h]},Cu=function(e){return/mp4a\.\d+.\d+/i.test(e)},Tu=ku=function(){eturn mc(s,Fe.EventTarget),gc(s,[{key:"data_",value:,{key:"done_",value:,{key:"createRealSourceBuffers_",value:function(){var n=this,s=["audio","video"];s.forEach(function(t){if(n[t+"Codec_"]&&!n[t+"Buffer_"]){var i=null;if(n.mediaSource_[t+"Buffer_"])(i=n.mediaSource_[t+"Buffer_"]).updating=!1;else{var e=t+'/mp4;codecs="'+n[t+"Codec_"]+'"';i=n.mediaSource_.nativeMediaSource_,e),n.mediaSource_[t+"Buffer_"]=i}n[t+"Buffer_"]=i,["update","updatestart","updateend"].forEach(}})}},{key:"appendBuffer",value:,{key:"appendGopInfo_",value:,{key:"remove",value:,{key:"processPendingSegments_",value:,{key:"concatAndAppendSegments_",value:,{key:"abort",value:]),s}(),Eu=function(){function t(){fc(this,t);var r=vc(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e=void 0;for(e in r.nativeMediaSource_=new _.MediaSource,r.nativeMediaSource_)e in t.prototype||"function"!=typeof r.nativeMediaSource_[e]||(r[e]=r.nativeMediaSource_[e].bind(r.nativeMediaSource_));return r.duration_=NaN,Object.defineProperty(r,"duration",{get:set:),Object.defineProperty(r,"seekable",{get:),Object.defineProperty(r,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(r,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),r.sourceBuffers=[],r.activeSourceBuffers_=[],r.updateActiveSourceBuffers_=r.onPlayerMediachange_=r.onHlsReset_=r.onHlsSegmentTimeMapping_=["sourceopen","sourceclose","sourceended"].forEach(r),r.on("sourceopen",function(){var e=h.querySelector('[src="'+r.url_+'"]');e&&(r.player_=Fe(e.parentNode),r.player_.tech_.on("hls-reset",r.onHlsReset_),r.player_.tech_.on("hls-segment-time-mapping",r.onHlsSegmentTimeMapping_),r.player_.audioTracks&&r.player_.audioTracks()&&(r.player_.audioTracks().on("change",r.updateActiveSourceBuffers_),r.player_.audioTracks().on("addtrack",r.updateActiveSourceBuffers_),r.player_.audioTracks().on("removetrack",r.updateActiveSourceBuffers_)),r.player_.on("mediachange",r.onPlayerMediachange_))}),r.on("sourceended",function(){for(var e=au(r.duration),t=0;t<r.sourceBuffers.length;t++){var i=r.sourceBuffers[t],n=i.metadataTrack_&&i.metadataTrack_.cues;n&&n.length&&(n[n.length-1].endTime=e)}}),r.on("sourceclose",function(){this.sourceBuffers.forEach(function(e){e.transmuxer_&&e.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))}),r}return mc(t,Fe.EventTarget),gc(t,[{key:"addSeekableRange_",value:,{key:"addSourceBuffer",value:]),t}(),Iu=0;Fe.mediaSources={};var Au=Pu=xu=xu.open=Au,xu.supportsNativeMediaSources=Pu;var Mu={createObjectURL:;Fe.MediaSource=xu,Fe.URL=Mu;var Du=Fe.EventTarget,Lu=Fe.mergeOptions,Nu=Ou=function(){eturn mc(r,Du),gc(r,[{key:"dispose",value:function(){this.stopRequest(),_.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:,{key:"pause",value:,{key:"load",value:,{key:"parseMasterXml",value:,{key:"start",value:,{key:"syncClientServerClock_",value:,{key:"onClientServerClockSync_",value:,{key:"refreshXml_",value:,{key:"refreshMedia_",value:]),r}(),Ru=Uu=function(){eturn gc(s,[{key:"createSourceBuffer_",value:,{key:"start_",value:,{key:"abort",value:,{key:"appendBuffer",value:,{key:"buffered",value:,{key:"remove",value:function(e,t,i){var n=this,s=2<arguments.length&&void 0!==i?i:Ge;this.processedAppend_&&this.queueCallback_(s)}},{key:"updating",value:,{key:"timestampOffset",value:,{key:"queueCallback_",value:,{key:"runCallback_",value:,{key:"dispose",value:]),s}(),Hu={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},Bu=2,$u=-101,Fu=-102,ju=zu=Gu=Vu=function(a,o,l){var c=[],u=0;return function(i,e){if(i&&(zu(a),c.push(i)),(u+=1)===a.length){if(e.endOfAllRequests=Date.now(),0<c.length){var t=c.reduce(;return l(t,e)}return e.encryptedBytes?(s=e,r=l,(n=o).addEventListener("message",,void n.postMessage(Xc({source:s.requestId,encrypted:s.encryptedBytes,key:s.key.bytes,iv:s.key.iv}),[s.encryptedBytes.buffer,s.key.bytes.buffer])):l(null,e)}var n,s,r}},Wu=qu=Yu=Xu=Qu=function(e,t){var i=void 0,n=void 0;return e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||_.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),i-(n||_.Number.MAX_VALUE)},Ku=Ju=Zu=function(){eturn mc(i,Fe.EventTarget),gc(i,[{key:"resetStats_",value:,{key:"dispose",value:,{key:"abort",value:,{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null}},{key:"error",value:,{key:"endOfStream",value:,{key:"buffered_",value:,{key:"initSegment",value:,{key:"couldBeginLoading_",value:,{key:"load",value:,{key:"init_",value:,{key:"playlist",value:function(e,t){var i=1<arguments.length&&void 0!==t?t:{};if(e){var n=this.playlist_,s=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=i,this.hasPlayed_()||(e.syncInfo={mediaSequence:e.mediaSequence,time:0});var r=n?n.id:null;if(this.logger_("playlist update ["+r+" => "+e.id+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(n&&n.uri===e.uri){var a=e.mediaSequence-n.mediaSequence;this.logger_("live window shift ["+a+"]"),null!==this.mediaIndex&&(this.mediaIndex-=a),s&&(s.mediaIndex-=a,0<=s.mediaIndex&&(s.segment=e.segments[s.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(n,e)}else null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:,{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:,{key:"resetEverything",value:,{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:,{key:"remove",value:,{key:"monitorBuffer_",value:,{key:"monitorBufferTick_",value:,{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var e=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);e&&(Ku(this.playlist_,this.mediaSource_,e.mediaIndex)?this.endOfStream():(e.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_())&&((e.timeline!==this.currentTimeline_||null!==e.startOfSegment&&e.startOfSegment<this.sourceUpdater_.timestampOffset())&&(this.syncController_.reset(),e.timestampOffset=e.startOfSegment,this.captionParser_.clearAllCaptions()),this.loadSegment_(e)))}}},{key:"checkBuffer_",value:,{key:"getSyncSegmentCandidate_",value:,{key:"generateSegmentInfo_",value:,{key:"abortRequestEarly_",value:function(e){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)return!1;if(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)return!1;var t=this.currentTime_(),i=e.bandwidth,n=this.pendingSegment_.duration,s=zc.estimateSegmentRequestTime(n,i,this.playlist_,e.bytesReceived),r=this.buffered_(),t,this.hls_.tech_.playbackRate())-1;if(s<=r)return!1;var a={master:this.hls_.playlists.master,currentTime:t,bandwidth:i,duration:this.duration_(),segmentDuration:n,timeUntilRebuffer:r,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(a){var o=s-r-a.rebufferingImpact,l=.5;return r<=Zc&&(l=1),!(!a.playlist||a.playlist.uri===this.playlist_.uri||o<l)&&(this.bandwidth=a.playlist.attributes.BANDWIDTH*Hu.BANDWIDTH_VARIANCE+1,this.abort(),this.trigger("earlyabort"),!0)}}},{key:"handleProgress_",value:,{key:"loadSegment_",value:,{key:"trimBackBuffer_",value:function(){var e,t,i,n,s=(e=this.seekable_(),t=this.currentTime_(),i=this.playlist_.targetDuration||10,n=void 0,n=e.length&&0<e.start(0)&&e.start(0)<t?e.start(0):t-30,Math.min(n,t-i));0<s&&this.remove(0,s)}},{key:"createSimplifiedSegmentObj_",value:,{key:"segmentRequestFinished_",value:,{key:"processSegmentResponse_",value:function(e){var t=this.pendingSegment_;t.bytes=e.bytes,e.map&&(t.segment.map.bytes=e.map.bytes),t.endOfAllRequests=e.endOfAllRequests,e.fmp4Captions&&(this.inbandTextTracks_,this.hls_.tech_,e.captionStreams),{inbandTextTracks:this.inbandTextTracks_,captionArray:e.fmp4Captions,timestampOffset:0}),this.captionParser_.clearParsedCaptions()),this.handleSegment_()}},{key:"handleSegment_",value:function(){var e=this;if(this.pendingSegment_){var t=this.pendingSegment_,i=t.segment,n=this.syncController_.probeSegmentInfo(t);"undefined"==typeof this.startingMedia_&&n&&(n.containsAudio||n.containsVideo)&&(this.startingMedia_={containsAudio:n.containsAudio,containsVideo:n.containsVideo});var s,r,a,o=(s=this.loaderType_,r=this.startingMedia_,a=n,"main"===s&&r&&a?a.containsAudio||a.containsVideo?r.containsVideo&&!a.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!r.containsVideo&&a.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null);if(o)return this.error({message:o,blacklistDuration:1/0}),void this.trigger("error");if(t.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");null!==t.timestampOffset&&t.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(t.timestampOffset),this.trigger("timestampoffset"));var l,c,u,d,h,p,f,g,m,v,_,y=this.syncController_.mappingForTimeline(t.timeline);if(null!==y&&this.trigger({type:"segmenttimemapping",mapping:y}),this.state="APPENDING",i.map){var b=Qc(i.map);if(!this.activeInitSegmentId_||this.activeInitSegmentId_!==b){var w=this.initSegment(i.map);this.sourceUpdater_.appendBuffer(w.bytes,function(){e.activeInitSegmentId_=b})}}t.byteLength=t.bytes.byteLength,"number"==typeof i.start&&"number"==typeof i.end?this.mediaSecondsLoaded+=i.end-i.start:this.mediaSecondsLoaded+=i.duration,this.logger_((u=(c=(l=t).segment).start,d=c.end,p=(h=l.playlist).mediaSequence,f=h.id,m=void 0===(g=h.segments)?[]:g,v=l.mediaIndex,_=l.timeline,["appending ["+v+"] of ["+p+", "+(p+m.length)+"] from playlist ["+f+"]","["+u+" => "+d+"] in timeline ["+_+"]"].join(" "))),this.sourceUpdater_.appendBuffer(t.bytes,this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleUpdateEnd_",value:function(){if(!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_,t=e.segment,i=null!==this.mediaIndex;this.pendingSegment_=null,this.recordThroughput_(e),this.addSegmentMetadataCue_(e),this.state="READY",this.mediaIndex=e.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate"),t.end&&this.currentTime_()-t.end>3*e.playlist.targetDuration?this.resetEverything():(i&&this.trigger("bandwidthupdate"),this.trigger("progress"),Ku(e.playlist,this.mediaSource_,e.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}},{key:"recordThroughput_",value:,{key:"addSegmentMetadataCue_",value:]),i}(),ed=
td=new Uint8Array("\n\n".split("").map(function(e){return e.charCodeAt(0)})),id=function(){function s(e,t){var i=1<arguments.length&&void 0!==t?t:{};fc(this,s);var n=vc(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e,i));return n.mediaSource_=null,n.subtitlesTrack_=null,n}return mc(s,Zu),gc(s,[{key:"buffered_",value:,{key:"initSegment",value:,{key:"couldBeginLoading_",value:,{key:"init_",value:,{key:"track",value:,{key:"remove",value:,{key:"fillBuffer_",value:,{key:"skipEmptySegments_",value:,{key:"handleSegment_",value:,{key:"parseVTTCues_",value:,{key:"updateTimeMapping_",value:]),s}(),nd=sd=nc,rd=[{name:"VOD",run:function(e,t,i){return i===1/0?null:{time:0,segmentIndex:0}}},{name:"ProgramDateTime",run:,{name:"Segment",run:,{name:"Discontinuity",run:,{name:"Playlist",run:],ad=function(){eturn mc(t,Fe.EventTarget),gc(t,[{key:"getSyncPoint",value:,{key:"getExpiredTime",value:,{key:"runStrategies_",value:,{key:"selectSyncPoint_",value:,{key:"saveExpiredSegmentInfo",value:,{key:"setDateTimeMapping",value:,{key:"reset",value:,{key:"probeSegmentInfo",value:,{key:"probeMp4Segment_",value:,{key:"probeTsSegment_",value:,{key:"timestampOffsetForTimeline",value:function(e){return"undefined"==typeof this.timelines[e]?null:this.timelines[e].time}},{key:"mappingForTimeline",value:,{key:"calculateSegmentTimeMapping_",value:,{key:"saveDiscontinuitySyncInfo_",value:]),t}(),od=new je("./decrypter-worker.worker.js",function(){var d,e,h,m,n,c,v,a,t=this;d=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e=function(){function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),h=null,m=function(){function u(e){d(this,u),h||(h=function(){var e=[[[],[],[],[],[]],[[],[],[],[],[]]],t=e[0],i=e[1],n=t[4],s=i[4],r=void 0,a=void 0,o=void 0,l=[],c=[],u=void 0,d=void 0,h=void 0,p=void 0,f=void 0;for(r=0;r<256;r++)c[(l[r]=r<<1^283*(r>>7))^r]=r;for(a=o=0;!n[a];a^=u||1,o=c[o]||1)for(h=(h=o^o<<1^o<<2^o<<3^o<<4)>>8^255&h^99,f=16843009*l[d=l[u=l[s[n[a]=h]=a]]]^65537*d^257*u^16843008*a,p=257*l[h]^16843008*h,r=0;r<4;r++)t[r][a]=p=p<<24^p>>>8,i[r][h]=f=f<<24^f>>>8;for(r=0;r<5;r++)t[r]=t[r].slice(0),i[r]=i[r].slice(0);return e}()),this._tables=[[h[0][0].slice(),h[0][1].slice(),h[0][2].slice(),h[0][3].slice(),h[0][4].slice()],[h[1][0].slice(),h[1][1].slice(),h[1][2].slice(),h[1][3].slice(),h[1][4].slice()]];var t=void 0,i=void 0,n=void 0,s=void 0,r=void 0,a=this._tables[0][4],o=this._tables[1],l=e.length,c=1;if(4!==l&&6!==l&&8!==l)throw new Error("Invalid aes key size");for(s=e.slice(0),r=[],this._key=[s,r],t=l;t<4*l+28;t++)n=s[t-1],(t%l==0||8===l&&t%l==4)&&(n=a[n>>>24]<<24^a[n>>16&255]<<16^a[n>>8&255]<<8^a[255&n],t%l==0&&(n=n<<8^n>>>24^c<<24,c=c<<1^283*(c>>7))),s[t]=s[t-l]^n;for(i=0;t;i++,t--)n=s[3&i?t:t-4],r[i]=t<=4||i<4?n:o[0][a[n>>>24]]^o[1][a[n>>16&255]]^o[2][a[n>>8&255]]^o[3][a[255&n]]}return u.prototype.decrypt=function(e,t,i,n,s,r){var a=this._key[1],o=e^a[0],l=n^a[1],c=i^a[2],u=t^a[3],d=void 0,h=void 0,p=void 0,f=a.length/4-2,g=void 0,m=4,v=this._tables[1],_=v[0],y=v[1],b=v[2],w=v[3],S=v[4];for(g=0;g<f;g++)d=_[o>>>24]^y[l>>16&255]^b[c>>8&255]^w[255&u]^a[m],h=_[l>>>24]^y[c>>16&255]^b[u>>8&255]^w[255&o]^a[m+1],p=_[c>>>24]^y[u>>16&255]^b[o>>8&255]^w[255&l]^a[m+2],u=_[u>>>24]^y[o>>16&255]^b[l>>8&255]^w[255&c]^a[m+3],m+=4,o=d,l=h,c=p;for(g=0;g<4;g++)s[(3&-g)+r]=S[o>>>24]<<24^S[l>>16&255]<<16^S[c>>8&255]<<8^S[255&u]^a[m++],d=o,o=l,l=c,c=u,u=d},u}(),n=function(){function e(){d(this,e),this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},e.prototype.off=function(e,t){if(!this.listeners[e])return!1;var i=this.listeners[e].indexOf(t);return this.listeners[e].splice(i,1),-1<i},e.prototype.trigger=function(e,t){var i=this.listeners[e];if(i)if(2===arguments.length)for(var n=i.length,s=0;s<n;++s)i[s].call(this,t);else for(var r=Array.prototype.slice.call(arguments,1),a=i.length,o=0;o<a;++o)i[o].apply(this,r)},e.prototype.dispose=function(){this.listeners={}},e.prototype.pipe=function(t){this.on("data",function(e){t.push(e)})},e}(),c=function(t){function i(){d(this,i);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,t.call(this,n));return e.jobs=[],e.delay=1,e.timeout_=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,t),i.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},i.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},i}(n),v=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},a=),new t)}),ld=cd=ud={AUDIO:SUBTITLES:,dd={AUDIO:SUBTITLES:,hd=pd=fd={AUDIO:function(e,t){var i,n,s=t.hls,r=t.sourceType,a=t.segmentLoaders[e],o=t.requestOptions.withCredentials,l=t.master,c=l.mediaGroups,u=l.playlists,d=t.mediaTypes[e],h=d.groups,p=d.tracks,f=t.masterPlaylistLoader;for(var g in c[e]&&0!==Object.keys(c[e]).length||(c[e]={main:{"default":{"default":!0}}}),c[e]){h[g]||(h[g]=[]);var m=u.filter(hd(e,g));for(var v in c[e][g]){var _=c[e][g][v];m.filter(pd(_.resolvedUri)).length&&delete _.resolvedUri;var y=void 0;if(y=_.resolvedUri?new Ic(_.resolvedUri,s,o):_.playlists&&"dash"===r?new Ou(_.playlists[0],s,o,f):null,_=Fe.mergeOptions({id:v,playlistLoader:y},_),dd[e](e,_.playlistLoader,t),h[g].push(_),"undefined"==typeof p[v]){var b=new Fe.AudioTrack({id:v,kind:(i=_,n=void 0,n=i["default"]?"main":"alternative",i.characteristics&&0<=i.characteristics.indexOf("public.accessibility.describes-video")&&(n="main-desc"),n),enabled:!1,language:_.language,"default":_["default"],label:v});p[v]=b}}}a.on("error",ud[e](e,t))},SUBTITLES:function(e,t){var i=t.tech,n=t.hls,s=t.sourceType,r=t.segmentLoaders[e],a=t.requestOptions.withCredentials,o=t.master.mediaGroups,l=t.mediaTypes[e],c=l.groups,u=l.tracks,d=t.masterPlaylistLoader;for(var h in o[e])for(var p in c[h]||(c[h]=[]),o[e][h])if(!o[e][h][p].forced){var f=o[e][h][p],g=void 0;if("hls"===s?g=new Ic(f.resolvedUri,n,a):"dash"===s&&(g=new Ou(f.playlists[0],n,a,d)),f=Fe.mergeOptions({id:p,playlistLoader:g},f),dd[e](e,f.playlistLoader,t),c[h].push(f),"undefined"==typeof u[p]){var m=i.addRemoteTextTrack({id:p,kind:"subtitles","default":f["default"]&&f.autoselect,language:f.language,label:p},!1).track;u[p]=m}}r.on("error",ud[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var i=t.tech,n=t.master.mediaGroups,s=t.mediaTypes[e],r=s.groups,a=s.tracks;for(var o in n[e])for(var l in r[o]||(r[o]=[]),n[e][o]){var c=n[e][o][l];if(c.instreamId.match(/CC\d/)&&(r[o].push(Fe.mergeOptions({id:l},c)),"undefined"==typeof a[l])){var u=i.addRemoteTextTrack({id:c.instreamId,kind:"captions","default":c["default"]&&c.autoselect,language:c.language,label:l},!1).track;a[l]=u}}}},gd={AUDIO:SUBTITLES:,md=function(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(e){fd[e](e,t)});var i=t.mediaTypes,e=t.masterPlaylistLoader,n=t.tech,s=t.hls;["AUDIO","SUBTITLES"].forEach(;var r=i.AUDIO.activeGroup(),a=(r.filter([0]||r[0]).id;i.AUDIO.tracks[a].enabled=!0,i.AUDIO.onTrackChanged(),e.on("mediachange",;var o=for(var l in n.audioTracks().addEventListener("change",o),n.remoteTextTracks().addEventListener("change",i.SUBTITLES.onTrackChanged),s.on("dispose",,n.clearTracks("audio"),i.AUDIO.tracks)n.audioTracks().addTrack(i.AUDIO.tracks[l])},vd=void 0,_d=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred"],yd=function(){eturn mc(f,Fe.EventTarget),gc(f,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var n=this;this.masterPlaylistLoader_.on("loadedmetadata",,this.masterPlaylistLoader_.on("loadedplaylist",,this.masterPlaylistLoader_.on("error",,this.masterPlaylistLoader_.on("mediachanging",,this.masterPlaylistLoader_.on("mediachange",,this.masterPlaylistLoader_.on("playlistunchanged",,this.masterPlaylistLoader_.on("renditiondisabled",function(){n.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){n.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:,{key:"setupSegmentLoaderListeners_",value:,{key:"mediaSecondsLoaded_",value:,{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:,{key:"fastQualityChange_",value:,{key:"play",value:,{key:"setupFirstPlay",value:,{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(e){return Fe.log.warn("Failed to create Source Buffers",e),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,function(){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:,{key:"stuckAtPlaylistEnd_",value:,{key:"blacklistCurrentPlaylist",value:function(e,t){var i,n=0<arguments.length&&void 0!==e?e:{},s=t,r=void 0;if(r=n.playlist||this.masterPlaylistLoader_.media(),s=s||n.blacklistDuration||this.blacklistDuration,!r){this.error=n;try{return this.mediaSource.endOfStream("network")}catch(i){return this.trigger("error")}}var a=1===this.masterPlaylistLoader_.master.playlists.filter($c).length;return a?(Fe.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(a)):(r.excludeUntil=Date.now()+1e3*s,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),i=this.selectPlaylist(),Fe.log.warn("Problem encountered with the current HLS playlist."+(n.message?" "+n.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(i))}},{key:"pauseLoading",value:,{key:"setCurrentTime",value:,{key:"duration",
value:,{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:,{key:"updateDuration",value:,{key:"dispose",value:,{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:,{key:"setupSourceBuffers_",value:,{key:"configureLoaderMimeTypes_",value:,{key:"excludeUnsupportedVariants_",value:,{key:"excludeIncompatibleVariants_",value:,{key:"updateAdCues_",value:function(e){var t=0,i=this.seekable();i.length&&(t=i.start(0)),function(e,t,i){var n=2<arguments.length&&void 0!==i?i:0;if(e.segments)for(var s=n,r=void 0,a=0;a<e.segments.length;a++){var o=e.segments[a];if(r||(r=nd(t,s+o.duration/2)),r){if("cueIn"in o){r.endTime=s,r.adEndTime=s,s+=o.duration,r=null;continue}if(s<r.endTime){s+=o.duration;continue}r.endTime+=o.duration}else if("cueOut"in o&&((r=new _.VTTCue(s,s+o.duration,o.cueOut)).adStartTime=s,r.adEndTime=s+parseFloat(o.cueOut),t.addCue(r)),"cueOutCont"in o){var l,c,u=o.cueOutCont.split("/").map(parseFloat),d=_c(u,2);l=d[0],c=d[1],(r=new _.VTTCue(s,s+o.duration,"")).adStartTime=s-l,r.adEndTime=r.adStartTime+c,t.addCue(r)}s+=o.duration}}(e,this.cueTagsTrack_,t)}},{key:"goalBufferLength",value:function(){var e=this.tech_.currentTime(),t=Hu.GOAL_BUFFER_LENGTH,i=Hu.GOAL_BUFFER_LENGTH_RATE,n=Math.max(t,Hu.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*i,n)}},{key:"bufferLowWaterLine",value:]),f}(),bd=wd=["seeking","seeked","pause","playing","error"],Sd=function(){eturn gc(a,[{key:"monitorCurrentTime_",value:,{key:"checkCurrentTime_",value:,{key:"cancelTimer_",value:,{key:"fixesBadSeeks_",value:function(){var e=this.tech_.seeking(),t=this.seekable(),i=this.tech_.currentTime(),n=void 0;return e&&this.afterSeekableWindow_(t,i)&&(n=t.end(t.length-1)),e&&this.beforeSeekableWindow_(t,i)&&(n=t.start(0)+.1),void 0!==n&&(this.logger_("Trying to seek outside of seekable at time "+i+" with seekable range "+nu(t)+". Seeking to "+n+"."),this.seekTo(n),!0)}},{key:"waiting_",value:,{key:"techWaiting_",value:,{key:"afterSeekableWindow_",value:,{key:"beforeSeekableWindow_",value:,{key:"videoUnderflow_",value:,{key:"skipTheGap_",value:,{key:"gapFromVideoUnderflow_",value:]),a}(),Cd={errorInterval:30,getSource:,Td=Fe.use("*",;var kd={PlaylistLoader:Ic,Playlist:zc,Decrypter:hc,AsyncStream:cc,decrypt:dc,utils:Jc,STANDARD_PLAYLIST_SELECTOR:INITIAL_PLAYLIST_SELECTOR:comparePlaylistBandwidth:Qu,comparePlaylistResolution:xhr:Wc()};["GOAL_BUFFER_LENGTH","MAX_GOAL_BUFFER_LENGTH","GOAL_BUFFER_LENGTH_RATE","BUFFER_LOW_WATER_LINE","MAX_BUFFER_LOW_WATER_LINE","BUFFER_LOW_WATER_LINE_RATE","BANDWIDTH_VARIANCE"].forEach(;var Ed=Id=kd.canPlaySource=function(){return Fe.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Ad,Pd=kd.supportsNativeHls=(Ad=h.createElement("video"),!!Fe.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(),kd.supportsNativeDash=!!Fe.getTech("Html5").isSupported()&&/maybe|probably/i.test(h.createElement("video").canPlayType("application/dash+xml")),kd.supportsTypeNatively=kd.isSupported=var xd=Fe.getComponent("Component"),Md=function(){function r(e,t,i){fc(this,r);var n=vc(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,i.hls));if(t.options_&&t.options_.playerId){var s=Fe(t.options_.playerId);s.hasOwnProperty("hls")||Object.defineProperty(s,"hls",{get:),s.vhs=n,s.dash=n}if(n.tech_=t,n.source_=e,n.stats={},n.setOptions_(),n.options_.overrideNative&&t.overrideNativeAudioTracks&&t.overrideNativeVideoTracks)t.overrideNativeAudioTracks(!0),t.overrideNativeVideoTracks(!0);else if(n.options_.overrideNative&&(t.featuresNativeVideoTracks||t.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return n.on(h,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(){var e=h.fullscreenElement||h.webkitFullscreenElement||h.mozFullScreenElement||h.msFullscreenElement;e&&e.contains(n.tech_.el())&&n.masterPlaylistController_.smoothQualityChange_()}),n.on(n.tech_,"seeking",,n.on(n.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),n.on(n.tech_,"play",n.play),n}return mc(r,xd),gc(r,[{key:"setOptions_",value:function(){var t=this;this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=Hu.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Hu.INITIAL_BANDWIDTH,["withCredentials","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange"].forEach(,this.bandwidth=this.options_.bandwidth,this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions}},{key:"src",value:function(e,t){var i=this;e&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=kd,this.options_.sourceType=Ed(t),this.options_.seekTo=this.masterPlaylistController_=new yd(this.options_),this.playbackWatcher_=new Sd(Fe.mergeOptions(this.options_,{seekable:function(){return i.seekable()}})),this.masterPlaylistController_.on("error",,this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):kd.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=kd.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:,throughput:{get:set:,bandwidth:{get:set:,systemBandwidth:{get:set:function(){Fe.log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:enumerable:!0},mediaRequests:{get:function(){return i.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return i.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return i.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return i.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return i.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return i.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:enumerable:!0},buffered:{get:function(){return su(i.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return i.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return i.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return i.tech_.name_},enumerable:!0},duration:{get:function(){return i.tech_.duration()},enumerable:!0},master:{get:enumerable:!0},playerDimensions:{get:function(){return i.tech_.currentDimensions()},enumerable:!0},seekable:{get:enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("selectedinitialmedia",function(){var t,e;e=(t=i).playlists,t.representations=function(){return e.master.playlists.filter(.map(},Pd(i)}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.tech_.ready(function(){return i.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(Fe.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:,{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(e){this.masterPlaylistController_.setCurrentTime(e)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:,{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"dispose",this).call(this)}}]),r}(),Dd={name:"videojs-http-streaming",VERSION:"1.4.1",canHandleSource:function(e,t){var i=1<arguments.length&&void 0!==t?t:{},n=Fe.mergeOptions(Fe.options,i);return Dd.canPlayType(e.type,n)},handleSource:function(e,t,i){var n=2<arguments.length&&void 0!==i?i:{},s=Fe.mergeOptions(Fe.options,n);return t.hls=new Md(e,t,s),t.hls.xhr=Wc(),t.hls.src(e.src,e.type),t.hls},canPlayType:function(e,t){var i=1<arguments.length&&void 0!==t?t:{},n=Fe.mergeOptions(Fe.options,i).hls.overrideNative,s=Ed(e);return!s||kd.supportsTypeNatively(s)&&!n?"":"maybe"}};return"undefined"!=typeof Fe.MediaSource&&"undefined"!=typeof Fe.URL||(Fe.MediaSource=xu,Fe.URL=Mu),xu.supportsNativeMediaSources()&&Fe.getTech("Html5").registerSourceHandler(Dd,0),Fe.HlsHandler=Md,Fe.HlsSourceHandler=Dd,Fe.Hls=kd,Fe.use||Fe.registerComponent("Hls",kd),Fe.options.hls=Fe.options.hls||{},Fe.registerPlugin?Fe.registerPlugin("reloadSourceOnError",Td):Fe.plugin("reloadSourceOnError",Td),Fe}),this,function(e){"use strict";e&&e.hasOwnProperty("default")?e["default"]:e;for(var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},s="undefined"!=typeof window?window:void 0!==n?n:"undefined"!=typeof self?self:{},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},r=e.getComponent("Tech"),l=e.dom,c=e.url,u=e.createTimeRange,d=e.mergeOptions,h=s&&s.navigator||{},p=function(n){function r(e,t){a(this,r);var i=o(this,n.call(this,e,t));return e.source&&i.ready(!0),e.startTime&&i.ready(!0),s.videojs=s.videojs||{},s.videojs.Flash=s.videojs.Flash||{},s.videojs.Flash.onReady=r.onReady,s.videojs.Flash.onEvent=r.onEvent,s.videojs.Flash.onError=r.onError,i.on("seeked",function(){this.lastSeekTarget_=undefined}),i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r.prototype.createEl=function(){var e=this.options_;e.swf||(e.swf="https://vjs.zencdn.net/swf/5.4.2/video-js.swf");var t=e.techId,i=d({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:e.autoplay,preload:e.preload,loop:e.loop,muted:e.muted},e.flashVars),n=d({wmode:"opaque",bgcolor:"#000000"},e.params),s=d({id:t,name:t,"class":"vjs-tech"},e.attributes);return this.el_=r.embed(e.swf,i,n,s),(this.el_.tech=this).el_},r.prototype.play=r.prototype.pause=function(){this.el_.vjs_pause()},r.prototype.src=r.prototype.setSrc=r.prototype.seeking=r.prototype.setCurrentTime=r.prototype.currentTime=r.prototype.currentSrc=r.prototype.duration=function(){if(0===this.readyState())return NaN;var e=this.el_.vjs_getProperty("duration");return 0<=e?e:Infinity},r.prototype.load=function(){this.el_.vjs_load()},r.prototype.poster=function(){this.el_.vjs_getProperty("poster")},r.prototype.setPoster=function(){},r.prototype.seekable=r.prototype.buffered=r.prototype.supportsFullScreen=function(){return!1},r.prototype.enterFullScreen=function(){return!1},r.prototype.getVideoPlaybackQuality=function(){var e=this.el_.vjs_getProperty("getVideoPlaybackQuality");return s.performance&&"function"==typeof s.performance.now?e.creationTime=s.performance.now():s.performance&&s.performance.timing&&"number"==typeof s.performance.timing.navigationStart&&(e.creationTime=s.Date.now()-s.performance.timing.navigationStart),e},r}(r),f=["rtmpConnection","rtmpStream","preload","defaultPlaybackRate","playbackRate","autoplay","loop","controls","volume","muted","defaultMuted"],g=["networkState","readyState","initialTime","startOffsetTime","paused","ended","videoWidth","videoHeight"],m=p.prototype,v=0;v<f.length;v++)i(f[v]),t(f[v]);for(var _=0;_<g.length;_++)i(g[_]);return p.isSupported=function(){return!!(e.browser.IS_CHROME&&!e.browser.IS_ANDROID||e.browser.IS_SAFARI&&!e.browser.IS_IOS)||10<=p.version()[0]},r.withSourceHandlers(p),p.nativeSourceHandler={},p.nativeSourceHandler.canPlayType=p.nativeSourceHandler.canHandleSource=function(e){var t,i,n=void 0;return n=e.type?e.type.replace(/;.*/,"").toLowerCase():(t=e.src,(i=c.getFileExtension(t))?"video/"+i:""),p.nativeSourceHandler.canPlayType(n)},p.nativeSourceHandler.handleSource=p.nativeSourceHandler.dispose=function(){},p.registerSourceHandler(p.nativeSourceHandler),p.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},p.onReady=p.checkReady=p.onEvent=p.onError=p.version=p.embed=p.getEmbedCode=(y=p).streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},y.streamFromParts=y.streamToParts=y.isStreamingType=y.RTMP_RE=/^rtmp[set]?:\/\//i,y.isStreamingSrc=y.rtmpSourceHandler={},y.rtmpSourceHandler.canPlayType=y.rtmpSourceHandler.canHandleSource=function(e){return y.rtmpSourceHandler.canPlayType(e.type)||(y.isStreamingSrc(e.src)?"maybe":"")},y.rtmpSourceHandler.handleSource=y.registerSourceHandler(y.rtmpSourceHandler),r.getTech("Flash")?(e.log.warn("Not using videojs-flash as it appears to already be registered"),e.log.warn("videojs-flash should only be used with video.js@6 and above")):e.registerTech("Flash",p),p.VERSION="2.1.2",p;var y}),
/*! jQuery UI - v1.9.2 - 2012-11-23
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.position.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.effect.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.progressbar.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.slider.js, jquery.ui.sortable.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */
function(o,l){r e,t,i=0,s=/^ui-id-\d+$/;(o.ui=o.ui||{},o.ui.version)||(o.extend(o.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),o.fn.extend({_focus:o.fn.focus,focus:scrollParent:zIndex:uniqueId:removeUniqueId:),o.extend(o.expr[":"],{data:o.expr.createPseudo?o.expr.createPseudo(:focusable:tabbable:),o(,o("<a>").outerWidth(1).jquery||o.each(["Width","Height"],,o("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(o.fn.removeData=(t=o.fn.removeData,),e=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[],o.ui.ie=!!e.length,o.ui.ie6=6===parseFloat(e[1],10),o.fn.extend({disableSelection:enableSelection:function(){return this.unbind(".ui-disableSelection")}}),o.extend(o.ui,{plugin:{add:call:,contains:o.contains,hasScroll:isOverAxis:isOver:))}(jQuery),function(u,o){var i=0,l=Array.prototype.slice,s=u.cleanData;u.cleanData=u.widget=function(e,i,a){var t,n,s,r,o=e.split(".")[0];e=e.split(".")[1],t=o+"-"+e,a||(a=i,i=u.Widget),u.expr[":"][t.toLowerCase()]=u[o]=u[o]||{},n=u[o][e],s=u[o][e]=u.extend(s,n,{version:a.version,_proto:u.extend({},a),_childConstructors:[]}),(r=new i).options=u.widget.extend({},r.options),u.each(a,,s.prototype=u.widget.extend(r,{widgetEventPrefix:n?r.widgetEventPrefix:e},a,{constructor:s,namespace:o,widgetName:e,widgetBaseClass:t,widgetFullName:t}),n?(u.each(n._childConstructors,,delete n._childConstructors):i._childConstructors.push(s),u.widget.bridge(e,s)},u.widget.extend=u.widget.bridge=u.Widget=function(){},u.Widget._childConstructors=[],u.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:_getCreateOptions:u.noop,_getCreateEventData:u.noop,_create:u.noop,_init:u.noop,destroy:_destroy:u.noop,widget:function(){return this.element},option:_setOptions:_setOption:enable:function(){return this._setOption("disabled",!1)},disable:_on:_off:_delay:_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){u(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){u(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:_trigger:,u.each({show:"fadeIn",hide:"fadeOut"},,!1!==u.uiBackCompat&&(u.Widget.prototype._getCreateOptions=}(jQuery),function(s){var r=!1;s(document).mouseup(,s.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:_mouseDestroy:_mouseDown:function(e){if(!r){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var t=this,i=1===e.which,n=!("string"!=typeof this.options.cancel||!e.target.nodeName)&&s(e.target).closest(this.options.cancel).length;return i&&!n&&this._mouseCapture(e)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(e),!this._mouseStarted)?e.preventDefault():(!0===s.data(e.target,this.widgetName+".preventClickEvent")&&s.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return t._mouseMove(e)},this._mouseUpDelegate=function(e){return t._mouseUp(e)},s(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),r=!0)),!0}},_mouseMove:_mouseUp:_mouseDistanceMet:_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(S,s){ui=S.ui||{};var r,n,a,k=Math.max,E=Math.abs,I=Math.round,o=/left|center|right/,l=/top|center|bottom/,c=/[\+\-]\d+%?/,u=/^\w+/,d=/%$/,t=S.fn.position;S.position={scrollbarWidth:getScrollInfo:getWithinInfo:,S.fn.position=function(d){if(!d||!d.of)return t.apply(this,arguments);d=S.extend({},d);var h,p,f,g,m,v=S(d.of),_=S.position.getWithinInfo(d.within),y=S.position.getScrollInfo(_),e=v[0],b=(d.collision||"flip").split(" "),w={};return 9===e.nodeType?(p=v.width(),f=v.height(),g={top:0,left:0}):S.isWindow(e)?(p=v.width(),f=v.height(),g={top:v.scrollTop(),left:v.scrollLeft()}):e.preventDefault?(d.at="left top",p=f=0,g={top:e.pageY,left:e.pageX}):(p=v.outerWidth(),f=v.outerHeight(),g=v.offset()),m=S.extend({},g),S.each(["my","at"],,1===b.length&&(b[1]=b[0]),"right"===d.at[0]?m.left+=p:"center"===d.at[0]&&(m.left+=p/2),"bottom"===d.at[1]?m.top+=f:"center"===d.at[1]&&(m.top+=f/2),h=C(w.at,p,f),m.left+=h[0],m.top+=h[1],this.each(function(){var i,e,a=S(this),o=a.outerWidth(),l=a.outerHeight(),t=T(this,"marginLeft"),n=T(this,"marginTop"),s=o+t+T(this,"marginRight")+y.width,r=l+n+T(this,"marginBottom")+y.height,c=S.extend({},m),u=C(w.my,a.outerWidth(),a.outerHeight());"right"===d.my[0]?c.left-=o:"center"===d.my[0]&&(c.left-=o/2),"bottom"===d.my[1]?c.top-=l:"center"===d.my[1]&&(c.top-=l/2),c.left+=u[0],c.top+=u[1],S.support.offsetFractions||(c.left=I(c.left),c.top=I(c.top)),i={marginLeft:t,marginTop:n},S.each(["left","top"],,S.fn.bgiframe&&a.bgiframe(),d.using&&(e=,a.offset(S.extend(c,{using:e}))})},S.ui.position={fit:{left:top:,flip:{left:top:,flipfit:{left:function(){S.ui.position.flip.left.apply(this,arguments),S.ui.position.fit.left.apply(this,arguments)},top:},function(){var e,t,i,n,s,r=document.getElementsByTagName("body")[0],a=document.createElement("div");for(s in e=document.createElement(r?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&S.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"}),i)e.style[s]=i[s];e.appendChild(a),(t=r||document.documentElement).insertBefore(e,t.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",n=S(a).offset().left,S.support.offsetFractions=10<n&&n<11,e.innerHTML="",t.removeChild(e)}(),!1!==S.uiBackCompat&&(n=jQuery,a=n.fn.position,n.fn.position=}(jQuery),function(c){var t=0,h={},p={};h.height=h.paddingTop=h.paddingBottom=h.borderTopWidth=h.borderBottomWidth="hide",p.height=p.paddingTop=p.paddingBottom=p.borderTopWidth=p.borderBottomWidth="show",c.widget("ui.accordion",{version:"1.9.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:_getCreateEventData:_createIcons:_destroyIcons:_destroy:_setOption:_keydown:_panelKeyDown:refresh:_activate:_findActive:_setupEvents:_eventHandler:_toggle:_animate:_toggleComplete:),!1!==c.uiBackCompat&&(jQuery,jQuery.ui.accordion.prototype),jQuery,jQuery.ui.accordion.prototype),jQuery,jQuery.ui.accordion.prototype),function(e,t){t.activate=t._activate;var i=t._findActive;t._findActive=function(e){return-1===e&&(e=!1),e&&"number"!=typeof e&&(-1===(e=this.headers.index(this.headers.filter(e)))&&(e=!1)),i.call(this,e)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,jQuery,jQuery.ui.accordion.prototype),jQuery,jQuery.ui.accordion.prototype))}(jQuery),function(r){var n=0;r.widget("ui.autocomplete",{version:"1.9.2",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var i,n,s;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:keypress:input:focus:blur:),this._initSource(),this.menu=r("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:r(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:menufocus:menuselect:),this.liveRegion=r("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),r.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:_setOption:_isMultiLine:_initSource:_searchTimeout:search:_search:_response:__response:close:_close:_change:_normalize:_suggest:_resizeMenu:_renderMenu:_renderItemData:_renderItem:_move:widget:_value:_keyEvent:),r.extend(r.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:),r.widget("ui.autocomplete",r.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:},__response:)}(jQuery),function(r){var a,o,l,c,u="ui-button ui-widget ui-state-default ui-corner-all",e="ui-state-hover ui-state-active ",d="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",h=p=r.widget("ui.button",{version:"1.9.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,h),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,i=this.options,e="checkbox"===this.type||"radio"===this.type,n=e?"":"ui-state-active",s="ui-state-focus";null===i.label&&(i.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(u).attr("role","button").bind("mouseenter"+this.eventNamespace,.bind("mouseleave"+this.eventNamespace,.bind("click"+this.eventNamespace,,this.element.bind("focus"+this.eventNamespace,function(){t.buttonElement.addClass(s)}).bind("blur"+this.eventNamespace,function(){t.buttonElement.removeClass(s)}),e&&(this.element.bind("change"+this.eventNamespace,,this.buttonElement.bind("mousedown"+this.eventNamespace,.bind("mouseup"+this.eventNamespace,),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,:"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,:(this.buttonElement.bind("mousedown"+this.eventNamespace,.bind("mouseup"+this.eventNamespace,.bind("keydown"+this.eventNamespace,.bind("keyup"+this.eventNamespace,,this.buttonElement.is("a")&&this.buttonElement.keyup(),this._setOption("disabled",i.disabled),this._resetButton()},_determineButtonType:widget:function(){return this.buttonElement},_destroy:_setOption:refresh:_resetButton:),r.widget("ui.buttonset",{version:"1.9.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:_init:function(){this.refresh()},_setOption:refresh:_destroy:)}(jQuery),function($,undefined){xtend($.ui,{datepicker:{version:"1.9.2"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:_widgetDatepicker:function(){return this.dpDiv},setDefaults:_attachDatepicker:_newInst:_connectDatepicker:_attachments:function(e,t){var i=this._get(t,"appendText"),n=this._get(t,"isRTL");t.append&&t.append.remove(),i&&(t.append=$('<span class="'+this._appendClass+'">'+i+"</span>"),e[n?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var s=this._get(t,"showOn");if(("focus"==s||"both"==s)&&e.focus(this._showDatepicker),"button"==s||"both"==s){var r=this._get(t,"buttonText"),a=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:a,alt:r,title:r}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==a?r:$("<img/>").attr({src:a,alt:r,title:r}))),e[n?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():($.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]&&$.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])),!1})}},_autoSize:_inlineDatepicker:_dialogDatepicker:_destroyDatepicker:_enableDatepicker:_disableDatepicker:_isDisabledDatepicker:_getInst:_optionDatepicker:_changeDatepicker:_refreshDatepicker:_setDateDatepicker:_getDateDatepicker:_doKeyDown:_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var i=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),n=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||n<" "||!i||-1<i.indexOf(n)}},_doKeyUp:_showDatepicker:_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);(instActive=e).dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var i=e.dpDiv.find("iframe.ui-datepicker-cover");!i.length||i.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n=this._getNumberOfMonths(e),s=n[1],r=17;if(e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),1<s&&e.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",r*s+"em"),e.dpDiv[(1!=n[0]||1!=n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus(),e.yearshtml){var a=e.yearshtml;setTimeout(0)}},_getBorders:_checkOffset:function(e,t,i){var n=e.dpDiv.outerWidth(),s=e.dpDiv.outerHeight(),r=e.input?e.input.outerWidth():0,a=e.input?e.input.outerHeight():0,o=document.documentElement.clientWidth+(i?0:$(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?n-r:0,t.left-=i&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=i&&t.top==e.input.offset().top+a?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+n>o&&n<o?Math.abs(t.left+n-o):0),t.top-=Math.min(t.top,t.top+s>l&&s<l?Math.abs(s+a):0),t},_findPos:_hideDatepicker:_tidyDialog:_checkExternalClick:_adjustDate:_gotoToday:_selectMonthYear:_selectDay:_clearDate:_selectDate:_updateAlternate:noWeekends:iso8601Week:parseDate:function(i,r,e){if(null==i||null==r)throw"Invalid arguments";if(""==(r="object"==typeof r?r.toString():r+""))return null;var t=(e?e.shortYearCutoff:null)||this._defaults.shortYearCutoff;t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10);for(var n=(e?e.dayNamesShort:null
)||this._defaults.dayNamesShort,s=(e?e.dayNames:null)||this._defaults.dayNames,a=(e?e.monthNamesShort:null)||this._defaults.monthNamesShort,o=(e?e.monthNames:null)||this._defaults.monthNames,l=-1,c=-1,u=-1,d=-1,h=!1,p=function(e){var t=_+1<i.length&&i.charAt(_+1)==e;return t&&_++,t},f=g=m=v=0,_=0;_<i.length;_++)if(h)"'"!=i.charAt(_)||p("'")?m():h=!1;else switch(i.charAt(_)){case"d":u=f("d");break;case"D":g("D",n,s);break;case"o":d=f("o");break;case"m":c=f("m");break;case"M":c=g("M",a,o);break;case"y":l=f("y");break;case"@":l=(y=new Date(f("@"))).getFullYear(),c=y.getMonth()+1,u=y.getDate();break;case"!":var y;l=(y=new Date((f("!")-this._ticksTo1970)/1e4)).getFullYear(),c=y.getMonth()+1,u=y.getDate();break;case"'":p("'")?m():h=!0;break;default:m()}if(v<r.length){var b=r.substr(v);if(!/^\s+/.test(b))throw"Extra/unparsed characters found in date: "+b}if(-1==l?l=(new Date).getFullYear():l<100&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l<=t?0:-100)),-1<d)for(c=1,u=d;;){var w=this._getDaysInMonth(l,c-1);if(u<=w)break;c++,u-=w}if((y=this._daylightSavingAdjust(new Date(l,c-1,u))).getFullYear()!=l||y.getMonth()+1!=c||y.getDate()!=u)throw"Invalid date";return y},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:_possibleChars:_get:_setDateFromField:_getDefaultDate:_determineDate:function(o,e,l){var t=i=null==e||""===e?l:"string"==typeof e?e):"number"==typeof e?isNaN(e)?l:t(e):new Date(e.getTime());return(i=i&&"Invalid Date"==i.toString()?l:i)&&(i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0)),this._daylightSavingAdjust(i)},_daylightSavingAdjust:_setDate:_getDate:_attachHandlers:_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var i=this._get(e,"isRTL"),n=this._get(e,"showButtonPanel"),s=this._get(e,"hideIfNoPrevNext"),r=this._get(e,"navigationAsDateFormat"),a=this._getNumberOfMonths(e),o=this._get(e,"showCurrentAtPos"),l=this._get(e,"stepMonths"),c=1!=a[0]||1!=a[1],u=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),d=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-o,f=e.drawYear;if(p<0&&(p+=12,f--),h){var g=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-a[0]*a[1]+1,h.getDate()));for(g=d&&g<d?d:g;this._daylightSavingAdjust(new Date(f,p,1))>g;)--p<0&&(p=11,f--)}e.drawMonth=p,e.drawYear=f;var m=this._get(e,"prevText");m=r?this.formatDate(m,this._daylightSavingAdjust(new Date(f,p-l,1)),this._getFormatConfig(e)):m;var v=this._canAdjustMonth(e,-1,f,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+m+"</span></a>":s?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+m+"</span></a>",_=this._get(e,"nextText");_=r?this.formatDate(_,this._daylightSavingAdjust(new Date(f,p+l,1)),this._getFormatConfig(e)):_;var y=this._canAdjustMonth(e,1,f,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+_+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+_+"</span></a>":s?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+_+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+_+"</span></a>",b=this._get(e,"currentText"),w=this._get(e,"gotoCurrent")&&e.currentDay?u:t;b=r?this.formatDate(b,w,this._getFormatConfig(e)):b;var S=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",C=n?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(i?S:"")+(this._isInRange(e,w)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+b+"</button>":"")+(i?"":S)+"</div>":"",T=parseInt(this._get(e,"firstDay"),10);T=isNaN(T)?0:T;for(var k=this._get(e,"showWeek"),E=this._get(e,"dayNames"),I=(this._get(e,"dayNamesShort"),this._get(e,"dayNamesMin")),A=this._get(e,"monthNames"),P=this._get(e,"monthNamesShort"),x=this._get(e,"beforeShowDay"),M=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),L=(this._get(e,"calculateWeek")||this.iso8601Week,this._getDefaultDate(e)),N="",O=0;O<a[0];O++){var R="";this.maxRows=4;for(var U=0;U<a[1];U++){var H=this._daylightSavingAdjust(new Date(f,p,e.selectedDay)),B=" ui-corner-all",F="";if(c){if(F+='<div class="ui-datepicker-group',1<a[1])switch(U){case 0:F+=" ui-datepicker-group-first",B=" ui-corner-"+(i?"right":"left");break;case a[1]-1:F+=" ui-datepicker-group-last",B=" ui-corner-"+(i?"left":"right");break;default:F+=" ui-datepicker-group-middle",B=""}F+='">'}F+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+B+'">'+(/all|left/.test(B)&&0==O?i?y:v:"")+(/all|right/.test(B)&&0==O?i?v:y:"")+this._generateMonthYearHeader(e,p,f,d,h,0<O||0<U,A,P)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var j=k?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"",z=0;z<7;z++){var G=(z+T)%7;j+="<th"+(5<=(z+T+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+E[G]+'">'+I[G]+"</span></th>"}F+=j+"</tr></thead><tbody>";var V=this._getDaysInMonth(f,p);f==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var W=(this._getFirstDayOfMonth(f,p)-T+7)%7,q=Math.ceil((W+V)/7),Y=c&&this.maxRows>q?this.maxRows:q;this.maxRows=Y;for(var X=this._daylightSavingAdjust(new Date(f,p,1-W)),Q=0;Q<Y;Q++){F+="<tr>";var K=k?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(X)+"</td>":"";for(z=0;z<7;z++){var J=x?x.apply(e.input?e.input[0]:null,[X]):[!0,""],Z=X.getMonth()!=p,ee=Z&&!D||!J[0]||d&&X<d||h&&h<X;K+='<td class="'+(5<=(z+T+6)%7?" ui-datepicker-week-end":"")+(Z?" ui-datepicker-other-month":"")+(X.getTime()==H.getTime()&&p==e.selectedMonth&&e._keyEvent||L.getTime()==X.getTime()&&L.getTime()==H.getTime()?" "+this._dayOverClass:"")+(ee?" "+this._unselectableClass+" ui-state-disabled":"")+(Z&&!M?"":" "+J[1]+(X.getTime()==u.getTime()?" "+this._currentClass:"")+(X.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+(Z&&!M||!J[2]?"":' title="'+J[2]+'"')+(ee?"":' data-handler="selectDay" data-event="click" data-month="'+X.getMonth()+'" data-year="'+X.getFullYear()+'"')+">"+(Z&&!M?"&#xa0;":ee?'<span class="ui-state-default">'+X.getDate()+"</span>":'<a class="ui-state-default'+(X.getTime()==t.getTime()?" ui-state-highlight":"")+(X.getTime()==u.getTime()?" ui-state-active":"")+(Z?" ui-priority-secondary":"")+'" href="#">'+X.getDate()+"</a>")+"</td>",X.setDate(X.getDate()+1),X=this._daylightSavingAdjust(X)}F+=K+"</tr>"}11<++p&&(p=0,f++),R+=F+="</tbody></table>"+(c?"</div>"+(0<a[0]&&U==a[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"")}N+=R}return N+=C+($.ui.ie6&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,N},_generateMonthYearHeader:_adjustInstDate:_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),s=i&&t<i?i:t;return s=n&&n<s?n:s},_notifyChange:_getNumberOfMonths:_getMinMaxDate:_getDaysInMonth:_getFirstDayOfMonth:_canAdjustMonth:_isInRange:_getFormatConfig:_formatDate:),$.fn.datepicker=function(e,t){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!=e&&"getDate"!=e&&"widget"!=e?"option"==e&&2==arguments.length&&"string"==typeof t?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(i)):this.each(:$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(i))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.2",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(l,a){var c="ui-dialog ui-widget ui-widget-content ui-corner-all ",r={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},o={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};l.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:,resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:_init:_destroy:widget:function(){return this.uiDialog},close:isOpen:moveToTop:open:function(){if(!this._isOpen){var e,t=this.options,i=this.uiDialog;return this._size(),this._position(t.position),i.show(t.show),this.overlay=t.modal?new l.ui.dialog.overlay(this):null,this.moveToTop(!0),(e=this.element.find(":tabbable")).length||((e=this.uiDialogButtonPane.find(":tabbable")).length||(e=i)),e.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this}},_createButtons:_makeDraggable:_makeResizable:_minHeight:_position:_setOptions:_setOption:_size:),l.extend(l.ui.dialog,{uuid:0,maxZ:0,getTitleId:overlay:),l.extend(l.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:l.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),.join(" "),create:destroy:height:function(){var e;return l.ui.ie?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight))<Math.max(document.documentElement.offsetHeight,document.body.offsetHeight)?l(window).height()+"px":e+"px":l(document).height()+"px"},width:resize:),l.extend(l.ui.dialog.overlay.prototype,{destroy:)}(jQuery),function(y){y.widget("ui.draggable",y.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:_destroy:_mouseCapture:_mouseStart:_mouseDrag:_mouseStop:_mouseUp:cancel:_getHandle:_createHelper:_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),y.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&y.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(
this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&y.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!=this.cssPosition)return{top:0,left:0};var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"==e?1:-1,n=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&y.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),s=/(html|body)/i.test(n[0].tagName);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():s?0:n.scrollTop())*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():s?0:n.scrollLeft())*i}},_generatePosition:_clear:_trigger:plugins:{},_uiHash:),y.ui.plugin.add("draggable","connectToSortable",{start:stop:drag:function(i,n){var s=y(this).data("draggable"),r=this;y.each(s.sortables,}}),y.ui.plugin.add("draggable","cursor",{start:stop:),y.ui.plugin.add("draggable","opacity",{start:function(e,t){var i=y(t.helper),n=y(this).data("draggable").options;i.css("opacity")&&(n._opacity=i.css("opacity")),i.css("opacity",n.opacity)},stop:function(e,t){var i=y(this).data("draggable").options;i._opacity&&y(t.helper).css("opacity",i._opacity)}}),y.ui.plugin.add("draggable","scroll",{start:drag:),y.ui.plugin.add("draggable","snap",{start:drag:function(e,t){for(var i=y(this).data("draggable"),n=i.options,s=n.snapTolerance,r=t.offset.left,a=r+i.helperProportions.width,o=t.offset.top,l=o+i.helperProportions.height,c=i.snapElements.length-1;0<=c;c--){var u=i.snapElements[c].left,d=u+i.snapElements[c].width,h=i.snapElements[c].top,p=h+i.snapElements[c].height;if(u-s<r&&r<d+s&&h-s<o&&o<p+s||u-s<r&&r<d+s&&h-s<l&&l<p+s||u-s<a&&a<d+s&&h-s<o&&o<p+s||u-s<a&&a<d+s&&h-s<l&&l<p+s){if("inner"!=n.snapMode){var f=Math.abs(h-l)<=s,g=Math.abs(p-o)<=s,m=Math.abs(u-a)<=s,v=Math.abs(d-r)<=s;f&&(t.position.top=i._convertPositionTo("relative",{top:h-i.helperProportions.height,left:0}).top-i.margins.top),g&&(t.position.top=i._convertPositionTo("relative",{top:p,left:0}).top-i.margins.top),m&&(t.position.left=i._convertPositionTo("relative",{top:0,left:u-i.helperProportions.width}).left-i.margins.left),v&&(t.position.left=i._convertPositionTo("relative",{top:0,left:d}).left-i.margins.left)}var _=f||g||m||v;if("outer"!=n.snapMode){f=Math.abs(h-o)<=s,g=Math.abs(p-l)<=s,m=Math.abs(u-r)<=s,v=Math.abs(d-a)<=s;f&&(t.position.top=i._convertPositionTo("relative",{top:h,left:0}).top-i.margins.top),g&&(t.position.top=i._convertPositionTo("relative",{top:p-i.helperProportions.height,left:0}).top-i.margins.top),m&&(t.position.left=i._convertPositionTo("relative",{top:0,left:u}).left-i.margins.left),v&&(t.position.left=i._convertPositionTo("relative",{top:0,left:d-i.helperProportions.width}).left-i.margins.left)}!i.snapElements[c].snapping&&(f||g||m||v||_)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,y.extend(i._uiHash(),{snapItem:i.snapElements[c].item})),i.snapElements[c].snapping=f||g||m||v||_}else i.snapElements[c].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,y.extend(i._uiHash(),{snapItem:i.snapElements[c].item})),i.snapElements[c].snapping=!1}}}),y.ui.plugin.add("draggable","stack",{start:),y.ui.plugin.add("draggable","zIndex",{start:stop:)}(jQuery),function(p){p.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:_destroy:_setOption:_activate:function(e){var t=p.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),t&&this._trigger("activate",e,this.ui(t))},_deactivate:_over:function(e){var t=p.ui.ddmanager.current;t&&(t.currentItem||t.element)[0]!=this.element[0]&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(t)))},_out:_drop:function(e,t){var i=t||p.ui.ddmanager.current;if(!i||(i.currentItem||i.element)[0]==this.element[0])return!1;var n=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var e=p.data(this,"droppable");if(e.options.greedy&&!e.options.disabled&&e.options.scope==i.options.scope&&e.accept.call(e.element[0],i.currentItem||i.element)&&p.ui.intersect(i,p.extend(e,{offset:e.element.offset()}),e.options.tolerance))return!(n=!0)}),!n&&(!!this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(i)),this.element))},ui:),p.ui.intersect=function(e,t,i){if(!t.offset)return!1;var n=(e.positionAbs||e.position.absolute).left,s=n+e.helperProportions.width,r=(e.positionAbs||e.position.absolute).top,a=r+e.helperProportions.height,o=t.offset.left,l=o+t.proportions.width,c=t.offset.top,u=c+t.proportions.height;switch(i){case"fit":return o<=n&&s<=l&&c<=r&&a<=u;case"intersect":return o<n+e.helperProportions.width/2&&s-e.helperProportions.width/2<l&&c<r+e.helperProportions.height/2&&a-e.helperProportions.height/2<u;case"pointer":var d=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,h=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top;return p.ui.isOver(h,d,c,o,t.proportions.height,t.proportions.width);case"touch":return(c<=r&&r<=u||c<=a&&a<=u||r<c&&u<a)&&(o<=n&&n<=l||o<=s&&s<=l||n<o&&l<s);default:return!1}},p.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:drop:dragStart:drag:dragStop:}(jQuery),jQuery.effects||function(y,c){var i,o=!1!==y.uiBackCompat,r="ui-effects-";y.effects={effect:{}},function(u,d){ c,e="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),p=/^([\-+])=\s*(\d+\.?\d*)/,t=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:,{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:,{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:,{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:,{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:],f=u.Color=g={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},m={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},a=f.support={},v=u("<p>")[0],_=u.each;v.style.cssText="background-color:rgba(1,1,1,.5)",a.rgba=-1<v.style.backgroundColor.indexOf("rgba"),_(g,,f.fn=u.extend(f.prototype,{parse:is:_space:transition:blend:toRgbaString:toHslaString:toHexString:toString:),f.fn.parse.prototype=f.fn,g.hsla.to=g.hsla.from=_(g,,_(e,,u.cssHooks.borderColor={expand:,c=u.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),),function(){extend(y.effects,{version:"1.9.2",save:restore:setMode:getBaseline:createWrapper:removeWrapper:setTransition:),y.fn.extend({effect:_show:y.fn.show,show:function(e){if(i(e))return this._show.apply(this,arguments);var t=s.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:y.fn.hide,hide:__toggle:y.fn.toggle,toggle:cssUnit:)}(),i={},y.each(["Quad","Cubic","Quart","Quint","Expo"],,y.extend(i,{Sine:Circ:Elastic:Back:Bounce:),y.each(i,}(jQuery),jQuery),function(b){b.effects.effect.bounce=function(e,t){var i,n,s,r=b(this),a=["position","top","bottom","left","right","height","width"],o=b.effects.setMode(r,e.mode||"effect"),l="hide"===o,c="show"===o,u=e.direction||"up",d=e.distance,h=e.times||5,p=2*h+(c||l?1:0),f=e.duration/p,g=e.easing,m="up"===u||"down"===u?"top":"left",v="up"===u||"left"===u,_=r.queue(),y=_.length;for((c||l)&&a.push("opacity"),b.effects.save(r,a),r.show(),b.effects.createWrapper(r),d||(d=r["top"===m?"outerHeight":"outerWidth"]()/3),
c&&((s={opacity:1})[m]=0,r.css("opacity",0).css(m,v?2*-d:2*d).animate(s,f,g)),l&&(d/=Math.pow(2,h-1)),i=(s={})[m]=0;i<h;i++)(n={})[m]=(v?"-=":"+=")+d,r.animate(n,f,g).animate(s,f,g),d=l?2*d:d/2;l&&((n={opacity:0})[m]=(v?"-=":"+=")+d,r.animate(n,f,g)),r.queue(function(){l&&r.hide(),b.effects.restore(r,a),b.effects.removeWrapper(r),t()}),1<y&&_.splice.apply(_,[1,0].concat(_.splice(y,p+1))),r.dequeue()}}(jQuery),jQuery),jQuery),function(_){_.effects.effect.explode=(jQuery),jQuery),jQuery),jQuery),function(p){p.effects.effect.pulsate=function(e,t){var i,n=p(this),s=p.effects.setMode(n,e.mode||"show"),r="show"===s,a="hide"===s,o=r||"hide"===s,l=2*(e.times||5)+(o?1:0),c=e.duration/l,u=0,d=n.queue(),h=d.length;for(!r&&n.is(":visible")||(n.css("opacity",0).show(),u=1),i=1;i<l;i++)n.animate({opacity:u},c,e.easing),u=1-u;n.animate({opacity:u},c,e.easing),n.queue(,1<h&&d.splice.apply(d,[1,0].concat(d.splice(h,l+1))),n.dequeue()}}(jQuery),function(y){y.effects.effect.puff=y.effects.effect.scale=y.effects.effect.size=function(i,e){var t,n,s,r=y(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],o=["position","top","bottom","left","right","overflow","opacity"],l=["width","height","overflow"],c=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],h=y.effects.setMode(r,i.mode||"effect"),p=i.restore||"effect"!==h,f=i.scale||"both",g=i.origin||["middle","center"],m=r.css("position"),v=p?a:o,_={height:0,width:0,outerHeight:0,outerWidth:0};"show"===h&&r.show(),t={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},"toggle"===i.mode&&"show"===h?(r.from=i.to||_,r.to=i.from||t):(r.from=i.from||("show"===h?_:t),r.to=i.to||("hide"===h?_:t)),s={from:{y:r.from.height/t.height,x:r.from.width/t.width},to:{y:r.to.height/t.height,x:r.to.width/t.width}},"box"!==f&&"both"!==f||(s.from.y!==s.to.y&&(v=v.concat(u),r.from=y.effects.setTransition(r,u,s.from.y,r.from),r.to=y.effects.setTransition(r,u,s.to.y,r.to)),s.from.x!==s.to.x&&(v=v.concat(d),r.from=y.effects.setTransition(r,d,s.from.x,r.from),r.to=y.effects.setTransition(r,d,s.to.x,r.to))),("content"===f||"both"===f)&&s.from.y!==s.to.y&&(v=v.concat(c).concat(l),r.from=y.effects.setTransition(r,c,s.from.y,r.from),r.to=y.effects.setTransition(r,c,s.to.y,r.to)),y.effects.save(r,v),r.show(),y.effects.createWrapper(r),r.css("overflow","hidden").css(r.from),g&&(n=y.effects.getBaseline(g,t),r.from.top=(t.outerHeight-r.outerHeight())*n.y,r.from.left=(t.outerWidth-r.outerWidth())*n.x,r.to.top=(t.outerHeight-r.to.outerHeight)*n.y,r.to.left=(t.outerWidth-r.to.outerWidth)*n.x),r.css(r.from),"content"!==f&&"both"!==f||(u=u.concat(["marginTop","marginBottom"]).concat(c),d=d.concat(["marginLeft","marginRight"]),l=a.concat(u).concat(d),r.find("*[width]").each(),r.animate(r.to,{queue:!1,duration:i.duration,easing:i.easing,complete:)}}(jQuery),function(_){_.effects.effect.shake=function(e,t){var i,n=_(this),s=["position","top","bottom","left","right","height","width"],r=_.effects.setMode(n,e.mode||"effect"),a=e.direction||"left",o=e.distance||20,l=e.times||3,c=2*l+1,u=Math.round(e.duration/c),d="up"===a||"down"===a?"top":"left",h="up"===a||"left"===a,p={},f={},g={},m=n.queue(),v=m.length;for(_.effects.save(n,s),n.show(),_.effects.createWrapper(n),p[d]=(h?"-=":"+=")+o,f[d]=(h?"+=":"-=")+2*o,g[d]=(h?"-=":"+=")+2*o,n.animate(p,u,e.easing),i=1;i<l;i++)n.animate(f,u,e.easing).animate(g,u,e.easing);n.animate(f,u,e.easing).animate(p,u/2,e.easing).queue(function(){"hide"===r&&n.hide(),_.effects.restore(n,s),_.effects.removeWrapper(n),t()}),1<v&&m.splice.apply(m,[1,0].concat(m.splice(v,c+1))),n.dequeue()}}(jQuery),jQuery),jQuery),function(l){var i=!1;l.widget("ui.menu",{version:"1.9.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:_destroy:_keydown:function(e){function t(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var i,n,s,r,a,o=!0;switch(e.keyCode){case l.ui.keyCode.PAGE_UP:this.previousPage(e);break;case l.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case l.ui.keyCode.HOME:this._move("first","first",e);break;case l.ui.keyCode.END:this._move("last","last",e);break;case l.ui.keyCode.UP:this.previous(e);break;case l.ui.keyCode.DOWN:this.next(e);break;case l.ui.keyCode.LEFT:this.collapse(e);break;case l.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case l.ui.keyCode.ENTER:case l.ui.keyCode.SPACE:this._activate(e);break;case l.ui.keyCode.ESCAPE:this.collapse(e);break;default:o=!1,n=this.previousFilter||"",s=String.fromCharCode(e.keyCode),r=!1,clearTimeout(this.filterTimer),s===n?r=!0:s=n+s,a=new RegExp("^"+t(s),"i"),i=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(l(this).children("a").text())}),(i=r&&-1!==i.index(this.active.next())?this.active.nextAll(".ui-menu-item"):i).length||(s=String.fromCharCode(e.keyCode),a=new RegExp("^"+t(s),"i"),i=this.activeMenu.children(".ui-menu-item").filter(),i.length?(this.focus(e,i),1<i.length?(this.previousFilter=s,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}o&&e.preventDefault()},_activate:refresh:_itemRole:focus:_scrollIntoView:blur:_startOpening:_open:collapseAll:_close:collapse:expand:next:function(e){this._move("next","first",e)},previous:isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:_move:nextPage:previousPage:_hasScroll:select:)}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.9.2",options:{value:0,max:100},min:0,_create:_destroy:value:_setOption:_value:_percentage:_refreshValue:)}(jQuery),function(h){h.widget("ui.resizable",h.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,e=this.options;if(this.element.addClass("ui-resizable"),h.extend(this,{_aspectRatio:!!e.aspectRatio,aspectRatio:e.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:e.helper||e.ghost||e.animate?e.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(h('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=e.handles||(h(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var i=this.handles.split(",");this.handles={};for(var n=0;n<i.length;n++){var s=h.trim(i[n]),r=h('<div class="ui-resizable-handle '+("ui-resizable-"+s)+'"></div>');r.css({zIndex:e.zIndex}),"se"==s&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(r)}}this._renderAxis=function(e){for(var t in e=e||this.element,this.handles){if(this.handles[t].constructor==String&&(this.handles[t]=h(this.handles[t],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var i=h(this.handles[t],this.element),n=0;n=/sw|ne|nw|se|n|s/.test(t)?i.outerHeight():i.outerWidth();var s=["padding",/ne|nw|n/.test(t)?"Top":/se|sw|s/.test(t)?"Bottom":/^e$/.test(t)?"Right":"Left"].join("");e.css(s,n),this._proportionallyResize()}h(this.handles[t]).length}},this._renderAxis(this.element),this._handles=h(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(,e.autoHide&&(this._handles.hide(),h(this.element).addClass("ui-resizable-autohide").mouseenter(.mouseleave(),this._mouseInit()},_destroy:_mouseCapture:_mouseStart:_mouseDrag:_mouseStop:_updateVirtualBoundaries:function(e){var t,i,n,s,r,a=this.options;r={minWidth:f(a.minWidth)?a.minWidth:0,maxWidth:f(a.maxWidth)?a.maxWidth:Infinity,minHeight:f(a.minHeight)?a.minHeight:0,maxHeight:f(a.maxHeight)?a.maxHeight:Infinity},(this._aspectRatio||e)&&(t=r.minHeight*this.aspectRatio,n=r.minWidth/this.aspectRatio,i=r.maxHeight*this.aspectRatio,s=r.maxWidth/this.aspectRatio,t>r.minWidth&&(r.minWidth=t),n>r.minHeight&&(r.minHeight=n),i<r.maxWidth&&(r.maxWidth=i),s<r.maxHeight&&(r.maxHeight=s)),this._vBoundaries=r},_updateCache:_updateRatio:function(e){this.options;var t=this.position,i=this.size,n=this.axis;return f(e.height)?e.width=e.height*this.aspectRatio:f(e.width)&&(e.height=e.width/this.aspectRatio),"sw"==n&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"==n&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:_proportionallyResize:_renderProxy:_change:{e:w:function(e,t){this.options;var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:s:se:function(e,t,i){return h.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},sw:function(e,t,i){return h.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,t,i]))},ne:function(e,t,i){return h.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,t,i]))},nw:,_propagate:plugins:{},ui:),h.ui.plugin.add("resizable","alsoResize",{start:resize:function(e,r){var t=h(this).data("resizable"),i=t.options,n=t.originalSize,s=t.originalPosition,a={height:t.size.height-n.height||0,width:t.size.width-n.width||0,top:t.position.top-s.top||0,left:t.position.left-s.left||0},o=function(e,i){h(e).each(};"object"!=typeof i.alsoResize||i.alsoResize.nodeType?o(i.alsoResize):h.each(i.alsoResize,},stop:function(){h(this).removeData("resizable-alsoresize")}}),h.ui.plugin.add("resizable","animate",{stop:),h.ui.plugin.add("resizable","containment",{start:resize:function(e){var t=h(this).data("resizable"),i=t.options,n=(t.containerSize,t.containerOffset),s=(t.size,t.position),r=t._aspectRatio||e.shiftKey,a={top:0,left:0},o=t.containerElement;o[0]!=document&&/static/.test(o.css("position"))&&(a=n),s.left<(t._helper?n.left:0)&&(t.size.width=t.size.width+(t._helper?t.position.left-n.left:t.position.left-a.left),r&&(t.size.height=t.size.width/t.aspectRatio),t.position.left=i.helper?n.left:0),s.top<(t._helper?n.top:0)&&(t.size.height=t.size.height+(t._helper?t.position.top-n.top:t.position.top),r&&(t.size.width=t.size.height*t.aspectRatio),t.position.top=t._helper?n.top:0),t.offset.left=t.parentData.left+t.position.left,t.offset.top=t.parentData.top+t.position.top;var l=Math.abs((t._helper,t.offset.left-a.left+t.sizeDiff.width)),c=Math.abs((t._helper?t.offset.top-a.top:t.offset.top-n.top)+t.sizeDiff.height),u=t.containerElement.get(0)==t.element.parent().get(0),d=/relative|absolute/.test(t.containerElement.css("position"));u&&d&&(l-=t.parentData.left),l+t.size.width>=t.parentData.width&&(t.size.width=t.parentData.width-l,r&&(t.size.height=t.size.width/t.aspectRatio)),c+t.size.height>=t.parentData.height&&(t.size.height=t.parentData.height-c,r&&(t.size.width=t.size.height*t.aspectRatio))},stop:),h.ui.plugin.add("resizable","ghost",{start:resize:function(){var e=h(this).data("resizable");e.options;e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=h(this).data("resizable");e.options;e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),h.ui.plugin.add("resizable","grid",{resize:function(e){var t=h(this).data("resizable"),i=t.options,n=t.size,s=t.originalSize,r=t.originalPosition,a=t.axis;i._aspectRatio||e.shiftKey;i.grid="number"==typeof i.grid?[i.grid,i.grid]:i.grid;var o=Math.round((n.width-s.width)/(i.grid[0]||1))*(i.grid[0]||1),l=Math.round((n.height-s.height)/(i.grid[1]||1))*(i.grid[1]||1);/^(se|s|e)$/.test(a)?(t.size.width=s.width+o,t.size.height=s.height+l):/^(ne)$/.test(a)?(t.size.width=s.width+o,t.size.height=s.height+l,t.position.top=r.top-l):(/^(sw)$/.test(a)?(t.size.width=s.width+o,t.size.height=s.height+l):(t.size.width=s.width+o,t.size.height=s.height+l,t.position.top=r.top-l),t.position.left=r.left-o)}});var p=f=(jQuery),function(c){c.widget("ui.selectable",c.ui.mouse,{version:"1.9.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:_destroy:_mouseStart:function(i){var n=this;if(this.opos=[i.pageX,i.pageY],!this.options.disabled){var e=this.options;this.selectees=c(e.filter,this.element[0]),this._trigger("start",i),c(e.appendTo).append(this.helper),this.helper.css({left:i.clientX,top:i.clientY,width:0,height:0}),e.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(,c(i.target).parents().andSelf().each(function(){var e=c.data(this,"selectable-item");if(e){var t=!i.metaKey&&!i.ctrlKey||!e.$element.hasClass("ui-selected");return e.$element.removeClass(t?"ui-unselecting":"ui-selected").addClass(t?"ui-selecting":"ui-unselecting"),e.unselecting=!t,e.selecting=t,(e.selected=t)?n._trigger("selecting",i,{selecting:e.element}):n._trigger("unselecting",i,{unselecting:e.element}),!1}})}},_mouseDrag:function(i){var n=this;if(this.dragged=!0,!this.options.disabled){var s=this.options,r=this.opos[0],a=this.opos[1],o=i.pageX,l=i.pageY;if(o<r){var e=o;o=r,r=e}if(l<a){e=l;l=a,a=e}return this.helper.css({left:r,top:a,width:o-r,height:l-a}),this.selectees.each(,!1}},_mouseStop:)}(jQuery),function(u){var a=5;u.widget("ui.slider",u.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var e,t,i=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",r=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(i.disabled?" ui-slider-disabled ui-disabled":"")),this.range=u([]),i.range&&(!0===i.range&&(i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&2!==i.values.length&&(i.values=[i.values[0],i.values[0]])),this.range=u("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===i.range||"max"===i.range?" ui-slider-range-"+i.range:""))),t=i.values&&i.values.length||1,e=n.length;e<t;e++)r.push(s);this.handles=n.add(u(r.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(.mouseleave(function(){u(this).removeClass("ui-state-hover")}).focus(.blur(function(){u(this).removeClass("ui-state-focus")}),this.handles.each(,this._on(this.handles,{keydown:keyup:),this._refreshValue(),this._animateOff=!1},_destroy:_mouseCapture:function(e){var t,i,n,s,r,a,o,l=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var t=Math.abs(i-l.values(e));t<n&&(n=t,s=u(this),r=e)}),!0===c.range&&this.values(1)===c.min&&(r+=1,s=u(this.handles[r])),!1!==this._start(e,r)&&(this._mouseSliding=!0,this._handleIndex=r,s.addClass("ui-state-active").focus(),a=s.offset(),o=!u(e.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=o?{left:0,top:0}:{left:e.pageX-a.left-s.width()/2,top:e.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,r,i),this._animateOff=!0))},_mouseStart:function(){return!0},_mouseDrag:_mouseStop:_detectOrientation:_normValueFromMouse:_start:_slide:function(e,t,i){var n,s,r;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&!0===this.options.range&&(0===t&&n<i||1===t&&i<n)&&(i=n),i!==this.values(t)&&((s=this.values())[t]=i,r=this._trigger("slide",e,{handle:this.handles[t],value:i,values:s}),n=this.values(t?0:1),!1!==r&&this.values(t,i,!0))):i!==this.value()&&(!1!==(r=this._trigger("slide",e,{handle:this.handles[t],value:i}))&&this.value(i))},_stop:_change:value:values:_setOption:_value:_values:_trimAlignValue:_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:)}(jQuery),function(h){h.widget("ui.sortable",h.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:_destroy:_setOption:_mouseCapture:_mouseStart:function(e,t,i){var n=this.options;if((this.currentContainer=this).refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},h.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this._createPlaceholder(),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),n.containment&&this._setContainment(),n.cursor&&(h("body").css("cursor")&&(this._storedCursor=h("body").css("cursor")),h("body").css("cursor",n.cursor)),n.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",n.opacity)),n.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",n.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(var s=this.containers.length-1;0<=s;s--)this.containers[s]._trigger("activate",e,this._uiHash(this));return h.ui.ddmanager&&(h.ui.ddmanager.current=this),h.ui.ddmanager&&!n.dropBehaviour&&h.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var t=this.options,i=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<t.scrollSensitivity?this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop+t.scrollSpeed:e.pageY-this.overflowOffset.top<t.scrollSensitivity&&(this.scrollParent[0].scrollTop=i=this.scrollParent[0].scrollTop-t.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<t.scrollSensitivity?this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft+t.scrollSpeed:e.pageX-this.overflowOffset.left<t.scrollSensitivity&&(this.scrollParent[0].scrollLeft=i=this.scrollParent[0].scrollLeft-t.scrollSpeed)):(e.pageY-h(document).scrollTop()<t.scrollSensitivity?i=h(document).scrollTop(h(document).scrollTop()-t.scrollSpeed):h(window).height()-(e.pageY-h(document).scrollTop())<t.scrollSensitivity&&(i=h(document).scrollTop(h(document).scrollTop()+t.scrollSpeed)),e.pageX-h(document).scrollLeft()<t.scrollSensitivity?i=h(document).scrollLeft(h(document).scrollLeft()-t.scrollSpeed):h(window).width()-(e.pageX-h(document).scrollLeft())<t.scrollSensitivity&&(i=h(document).scrollLeft(h(document).scrollLeft()+t.scrollSpeed))),!1!==i&&h.ui.ddmanager&&!t.dropBehaviour&&h.ui.ddmanager.prepareOffsets(this,e)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var n=this.items.length-1;0<=n;n--){var s=this.items[n],r=s.item[0],a=this._intersectsWithPointer(s);if(a&&(s.instance===this.currentContainer&&!(r==this.currentItem[0]||this.placeholder[1==a?"next":"prev"]()[0]==r||h.contains(this.placeholder[0],r)||"semi-dynamic"==this.options.type&&h.contains(this.element[0],r)))){if(this.direction=1==a?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(e,s),this._trigger("change",e,this._uiHash());break}}return this._contactContainers(e),h.ui.ddmanager&&h.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;0<=e;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),h.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?h(this.domPosition.prev).after(this.currentItem):h(this.domPosition.parent).prepend(this.currentItem)),this},serialize:toArray:_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,s=n+this.helperProportions.height,r=e.left,a=r+e.width,o=e.top,l=o+e.height,c=this.offset.click.top,u=this.offset.click.left,d=o<n+c&&n+c<l&&r<t+u&&t+u<a;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?d:r<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<a&&o<n+this.helperProportions.height/2&&s-this.helperProportions.height/2<l},_intersectsWithPointer:_intersectsWithSides:_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(0<e?"down":"up")},_getDragHorizontalDirection:refresh:_connectWith:_getItemsAsjQuery:function(e){var t=[],i=[],n=this._connectWith();if(n&&e)for(var s=n.length-1;0<=s;s--)for(var r=h(n[s]),a=r.length-1;0<=a;a--){var o=h.data(r[a],this.widgetName);o&&o!=this&&!o.options.disabled&&i.push([h.isFunction(o.options.items)?o.options.items.call(o.element):h(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o])}i.push([h.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):h(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(s=i.length-1;0<=s;s--)i[s][0].each(function(){t.push(this)});return h(t)},_removeCurrentsFromItems:_refreshItems:function(e){this.items=[],this.containers=[this];var t=this.items,i=[[h.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):h(this.options.items,this.element),this]],n=this._connectWith();if(n&&this.ready)for(var s=n.length-1;0<=s;s--)for(var r=h(n[s]),a=r.length-1;0<=a;a--){var o=h.data(r[a],this.widgetName);o&&o!=this&&!o.options.disabled&&(i.push([h.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):h(o.options.items,o.element),o]),this.containers.push(o))}for(s=i.length-1;0<=s;s--)for(var l=i[s][1],c=i[s][0],u=(a=0,c.length);a<u;a++){var d=h(c[a]);d.data(this.widgetName+"-item",l),t.push({item:d,instance:l,width:0,height:0,left:0,top:0})}},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var t=this.items.length-1;0<=t;t--){var i=this.items[t];if(i.instance==this.currentContainer||!this.currentContainer||i.item[0]==this.currentItem[0]){var n=this.options.toleranceElement?h(this.options.toleranceElement,i.item):i.item;e||(i.width=n.outerWidth(),i.height=n.outerHeight());var s=n.offset();i.left=s.left,i.top=s.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(t=this.containers.length-1;0<=t;t--){s=this.containers[t].element.offset();this.containers[t].containerCache.left=s.left,this.containers[t].containerCache.top=s.top,this.containers[t].containerCache.width=this.containers[t].element.outerWidth(),this.containers[t].containerCache.height=this.containers[t].element.outerHeight()}return this},_createPlaceholder:_contactContainers:function(e){for(var t=null,i=null,n=this.containers.length-1;0<=n;n--)if(!h.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(t&&h.contains(this.containers[n].element[0],t.element[0]))continue;t=this.containers[n],i=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",e,this._uiHash(this)),this.containers[n].containerCache.over=0);if(t)if(1===this.containers.length)this.containers[i]._trigger("over",e,this._uiHash(this)),this.containers[i].containerCache.over=1;else{for(var s=1e4,r=null,a=this.containers[i].floating?"left":"top",o=this.containers[i].floating?"width":"height",l=this.positionAbs[a]+this.offset.click[a],c=this.items.length-1;0<=c;c--)if(h.contains(this.containers[i].element[0],this.items[c].item[0])&&this.items[c].item[0]!=this.currentItem[0]){var u=this.items[c].item.offset()[a],d=!1;Math.abs(u-l)>Math.abs(u+this.items[c][o]-l)&&(d=!0,u+=this.items[c][o]),Math.abs(u-l
)<s&&(s=Math.abs(u-l),r=this.items[c],this.direction=d?"up":"down")}if(!r&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[i],r?this._rearrange(e,r,null,!0):this._rearrange(e,null,this.containers[i].element,!0),this._trigger("change",e,this._uiHash()),this.containers[i]._trigger("change",e,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[i]._trigger("over",e,this._uiHash(this)),this.containers[i].containerCache.over=1}},_createHelper:_adjustOffsetFromHelper:_getParentOffset:_getRelativeOffset:function(){if("relative"!=this.cssPosition)return{top:0,left:0};var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}},_cacheMargins:_cacheHelperProportions:_setContainment:_convertPositionTo:_generatePosition:_rearrange:_clear:function(e,t){this.reverting=!1;var i=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var n in this._storedCSS)"auto"!=this._storedCSS[n]&&"static"!=this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!t&&i.push(,(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!t&&i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(i.push(,i.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer))));for(n=this.containers.length-1;0<=n;n--)t||i.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(i.push(call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this._storedCursor&&h("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){this._trigger("beforeStop",e,this._uiHash());for(n=0;n<i.length;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(n=0;n<i.length;n++)i[n].call(this,e);this._trigger("stop",e,this._uiHash())}return!(this.fromOutside=!1)},_trigger:_uiHash:)}(jQuery),function(r){.widget("ui.spinner",{version:"1.9.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:_getCreateOptions:_events:{keydown:keyup:"_stop",focus:blur:mousewheel:function(e,t){if(t)return!(!this.spinning&&!this._start(e))&&(this._spin((0<t?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(100),void e.preventDefault())},"mousedown .ui-spinner-button":"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":"mouseleave .ui-spinner-button":"_stop"},_draw:_keydown:_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:_start:_repeat:_spin:_increment:_precision:_precisionOf:_adjustValue:_stop:_setOption:_setOptions:t(,_parse:_format:_refresh:_value:_destroy:stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._spin((e||1)*this.options.step)},stepDown:t(function(e){this._stepDown(e)}),_stepDown:pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(,value:widget:function(){return this.uiSpinner}})}(jQuery),function(c,l){unction u(e){return 1<e.hash.length&&e.href.replace(t,"")===location.href.replace(t,"").replace(/\s/g,"%20")}var n,e=0,t=/#.*$/;c.widget("ui.tabs",{version:"1.9.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,e=this.options,i=e.active,n=location.hash.substring(1);this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",e.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,.delegate(".ui-tabs-anchor","focus"+this.eventNamespace,,this._processTabs(),null===i&&(n&&this.tabs.each(,null===i&&(i=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==i&&-1!==i||(i=!!this.tabs.length&&0)),!1!==i&&(-1===(i=this.tabs.index(this.tabs.eq(i)))&&(i=!e.collapsible&&0)),e.active=i,!e.collapsible&&!1===e.active&&this.anchors.length&&(e.active=0),c.isArray(e.disabled)&&(e.disabled=c.unique(e.disabled.concat(c.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(this.options.active):this.active=c(),this._refresh(),this.active.length&&this.load(e.active)},_getCreateEventData:_tabKeydown:_panelKeydown:_handlePageNav:_findNextTab:function(e,t){function i(){return n<e&&(e=0),e<0&&(e=n),e}for(var n=this.tabs.length-1;-1!==c.inArray(i(),this.options.disabled);)e=t?e+1:e-1;return e},_focusNextTab:_setOption:_tabId:_sanitizeSelector:refresh:_refresh:_processTabs:_getList:_createPanel:_setupDisabled:_setupEvents:_setupHeightStyle:_eventHandler:_toggle:_activate:_findActive:_getIndex:_destroy:enable:disable:load:_ajaxSettings:_getPanelForTab:),!1!==c.uiBackCompat&&(c.ui.tabs.prototype._ui=c.widget("ui.tabs",c.ui.tabs,{url:),c.widget("ui.tabs",c.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:_ajaxSettings:_setOption:_destroy:function(){this.anchors.removeData("cache.tabs"),this._super()},url:),c.widget("ui.tabs",c.ui.tabs,{abort:),c.widget("ui.tabs",c.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:),c.widget("ui.tabs",c.ui.tabs,{options:{enable:null,disable:null},enable:disable:),c.widget("ui.tabs",c.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(e,t,i){i===l&&(i=this.anchors.length);var n,s,r=this.options,a=c(r.tabTemplate.replace(/#\{href\}/g,e).replace(/#\{label\}/g,t)),o=e.indexOf("#")?this._tabId(a):e.replace("#","");return a.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),a.attr("aria-controls",o),n=i>=this.tabs.length,(s=this.element.find("#"+o)).length||(s=this._createPanel(o),n?0<i?s.insertAfter(this.panels.eq(-1)):s.appendTo(this.element):s.insertBefore(this.panels[i])),s.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),n?a.appendTo(this.tablist):a.insertBefore(this.tabs[i]),r.disabled=c.map(r.disabled,function(e){return i<=e?++e:e}),this.refresh(),1===this.tabs.length&&!1===r.active&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[i],this.panels[i])),this},remove:function(t){t=this._getIndex(t);var e=this.options,i=this.tabs.eq(t).remove(),n=this._getPanelForTab(i).remove();return i.hasClass("ui-tabs-active")&&2<this.anchors.length&&this._activate(t+(t+1<this.anchors.length?1:-1)),e.disabled=c.map(c.grep(e.disabled,function(e){return e!==t}),function(e){return t<=e?--e:e}),this.refresh(),this._trigger("remove",null,this._ui(i.find("a")[0],n[0])),this}}),c.widget("ui.tabs",c.ui.tabs,{length:function(){return this.anchors.length}}),c.widget("ui.tabs",c.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:),c.widget("ui.tabs",c.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:),c.widget("ui.tabs",c.ui.tabs,{_create:_setOption:_eventHandler:),c.widget("ui.tabs",c.ui.tabs,{options:{show:null,select:null},_create:_trigger:),c.widget("ui.tabs",c.ui.tabs,{select:),n=0,c.widget("ui.tabs",c.ui.tabs,{options:{cookie:null},_create:_cookie:_refresh:
_eventHandler:_destroy:),c.widget("ui.tabs",c.ui.tabs,{_trigger:),c.widget("ui.tabs",c.ui.tabs,{options:{fx:null},_getFx:_toggle:))}(jQuery),function(l){unction s(e){var t=e.data("ui-tooltip-id"),i=(e.attr("aria-describedby")||"").split(/\s+/),n=l.inArray(t,i);-1!==n&&i.splice(n,1),e.removeData("ui-tooltip-id"),(i=l.trim(i.join(" ")))?e.attr("aria-describedby",i):e.removeAttr("aria-describedby")}var n=0;l.widget("ui.tooltip",{version:"1.9.2",options:{content:hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:_setOption:_disable:_enable:open:_updateContent:_open:function(e,i,t){ar s,r,a,o=l.extend({},this.options.position);t&&((s=this._find(i)).length?s.find(".ui-tooltip-content").html(t):(i.is("[title]")&&(e&&"mouseover"===e.type?i.attr("title",""):i.removeAttr("title")),s=this._tooltip(i),c(i,s.attr("id")),s.find(".ui-tooltip-content").html(t),this.options.track&&e&&/^mouse/.test(e.type)?(this._on(this.document,{mousemove:n}),n(e)):s.position(l.extend({of:i},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.show&&this.options.show.delay&&(a=setInterval(l.fx.interval)),this._trigger("open",e,{tooltip:s}),r={keyup:remove:,e&&"mouseover"!==e.type||(r.mouseleave="close"),e&&"focusin"!==e.type||(r.focusout="close"),this._on(!0,i,r)))},close:_tooltip:_find:_removeTooltip:_destroy:)}(jQuery),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");
/* ========================================================================
 * Bootstrap: transition.js v3.2.0
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */!jQuery),function(r){"use strict";function e(i){return this.each(function(){var e=r(this),t=e.data("bs.alert");t||e.data("bs.alert",t=new n(this)),"string"==typeof i&&t[i].call(e)})}var t='[data-dismiss="alert"]',n=n.VERSION="3.2.0",n.prototype.close=var i=r.fn.alert;r.fn.alert=e,r.fn.alert.Constructor=n,r.fn.alert.noConflict=function(){return r.fn.alert=i,this},r(document).on("click.bs.alert.data-api",t,n.prototype.close)}(jQuery),jQuery),function(h){"use strict";ar r=r.VERSION="3.2.0",r.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},r.prototype.keydown=r.prototype.cycle=r.prototype.getItemIndex=r.prototype.to=function(e){var t=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):i==e?this.pause().cycle():this.slide(i<e?"next":"prev",h(this.$items[e]))},r.prototype.pause=r.prototype.next=function(){if(!this.sliding)return this.slide("next")},r.prototype.prev=r.prototype.slide=var e=h.fn.carousel;h.fn.carousel=a,h.fn.carousel.Constructor=r,h.fn.carousel.noConflict=function(){return h.fn.carousel=e,this},h(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",,h(window).on("load",function(){h('[data-ride="carousel"]').each(function(){var e=h(this);a.call(e,e.data())})})}(jQuery),jQuery),function(o){"use strict"; t=".dropdown-backdrop",c='[data-toggle="dropdown"]',n=n.VERSION="3.2.0",n.prototype.toggle=n.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var t=o(this);if(e.preventDefault(),e.stopPropagation(),!t.is(".disabled, :disabled")){var i=l(t),n=i.hasClass("open");if(!n||n&&27==e.keyCode)return 27==e.which&&i.find(c).trigger("focus"),t.trigger("click");var s=" li:not(.divider):visible a",r=i.find('[role="menu"]'+s+', [role="listbox"]'+s);if(r.length){var a=r.index(r.filter(":focus"));38==e.keyCode&&0<a&&a--,40==e.keyCode&&a<r.length-1&&a++,~a||(a=0),r.eq(a).trigger("focus")}}}};var i=o.fn.dropdown;o.fn.dropdown=e,o.fn.dropdown.Constructor=n,o.fn.dropdown.noConflict=function(){return o.fn.dropdown=i,this},o(document).on("click.bs.dropdown.data-api",r).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",c,n.prototype.toggle).on("keydown.bs.dropdown.data-api",c+', [role="menu"], [role="listbox"]',n.prototype.keydown)}(jQuery),jQuery),function(m){"use strict";function e(n){return this.each(function(){var e=m(this),t=e.data("bs.tooltip"),i="object"==typeof n&&n;(t||"destroy"!=n)&&(t||e.data("bs.tooltip",t=new s(this,i)),"string"==typeof n&&t[n]())})}var s=s.VERSION="3.2.0",s.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},s.prototype.init=s.prototype.getDefaults=function(){return s.DEFAULTS},s.prototype.getOptions=s.prototype.getDelegateOptions=s.prototype.enter=function(e){var t=e instanceof this.constructor?e:m(e.currentTarget).data("bs."+this.type);if(t||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),m(e.currentTarget).data("bs."+this.type,t)),clearTimeout(t.timeout),t.hoverState="in",!t.options.delay||!t.options.delay.show)return t.show();t.timeout=setTimeout(function(){"in"==t.hoverState&&t.show()},t.options.delay.show)},s.prototype.leave=s.prototype.show=s.prototype.applyPlacement=s.prototype.replaceArrow=s.prototype.setContent=s.prototype.hide=s.prototype.fixTitle=s.prototype.hasContent=function(){return this.getTitle()},s.prototype.getPosition=s.prototype.getCalculatedOffset=s.prototype.getViewportAdjustedDelta=s.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},s.prototype.getUID=s.prototype.tip=s.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},s.prototype.validate=s.prototype.enable=function(){this.enabled=!0},s.prototype.disable=function(){this.enabled=!1},s.prototype.toggleEnabled=s.prototype.toggle=s.prototype.destroy=var t=m.fn.tooltip;m.fn.tooltip=e,m.fn.tooltip.Constructor=s,m.fn.tooltip.noConflict=function(){return m.fn.tooltip=t,this}}(jQuery),function(s){"use strict";ar r=if(!s.fn.tooltip)throw new Error("Popover requires tooltip.js");r.VERSION="3.2.0",r.DEFAULTS=s.extend({},s.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),r.prototype=s.extend({},s.fn.tooltip.Constructor.prototype),(r.prototype.constructor=r).prototype.getDefaults=r.prototype.setContent=r.prototype.hasContent=r.prototype.getContent=r.prototype.arrow=r.prototype.tip=var t=s.fn.popover;s.fn.popover=e,s.fn.popover.Constructor=r,s.fn.popover.noConflict=function(){return s.fn.popover=t,this}}(jQuery),function(r){"use strict";unction t(n){return this.each(function(){var e=r(this),t=e.data("bs.scrollspy"),i="object"==typeof n&&n;t||e.data("bs.scrollspy",t=new s(this,i)),"string"==typeof n&&t[n]()})}s.VERSION="3.2.0",s.DEFAULTS={offset:10},s.prototype.getScrollHeight=s.prototype.refresh=s.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),s=this.offsets,r=this.targets,a=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),n<=t)return a!=(e=r[r.length-1])&&this.activate(e);if(a&&t<=s[0])return a!=(e=r[0])&&this.activate(e);for(e=s.length;e--;)a!=r[e]&&t>=s[e]&&(!s[e+1]||t<=s[e+1])&&this.activate(r[e])},s.prototype.activate=var e=r.fn.scrollspy;r.fn.scrollspy=t,r.fn.scrollspy.Constructor=s,r.fn.scrollspy.noConflict=function(){return r.fn.scrollspy=e,this},r(window).on("load.bs.scrollspy.data-api",}(jQuery),function(a){"use strict";ar n=n.VERSION="3.2.0",n.prototype.show=n.prototype.activate=var e=a.fn.tab;a.fn.tab=t,a.fn.tab.Constructor=n,a.fn.tab.noConflict=function(){return a.fn.tab=e,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',}(jQuery),function(c){"use strict";ar u=u.VERSION="3.2.0",u.RESET="affix affix-top affix-bottom",u.DEFAULTS={offset:0,target:window},u.prototype.getPinnedOffset=u.prototype.checkPositionWithEventLoop=u.prototype.checkPosition=var e=c.fn.affix;c.fn.affix=i,c.fn.affix.Constructor=u,c.fn.affix.noConflict=c(window).on("load",}(jQuery),$.fn.modal.Constructor.prototype.backdrop=function(e){var t=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=$.support.transition&&i;if(this.$backdrop=$('<div class="modal-backdrop '+i+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",$.proxy(function(e){e.target===e.currentTarget&&("static"===this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;n?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(150):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(150):s()}else e&&e()},$.fn.popover.Constructor.prototype.applyPlacement=function(e,t){var i=this.tip(),n=i[0].offsetWidth,s=i[0].offsetHeight,r=parseInt(i.css("margin-top"),10),a=parseInt(i.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(a)&&(a=0),e.top=e.top+r,e.left=e.left+a,$.offset.setOffset(i[0],$.extend({
using:,e),0),i.addClass("in");var o=i[0].offsetWidth,l=i[0].offsetHeight;"top"==t&&l!=s&&(e.top=e.top+s-l);var c=this.getViewportAdjustedDelta(t,e,o,l);c.left?e.left+=c.left:e.top+=c.top;var u=/top|bottom/.test(t),d=u?2*c.left-n+o:2*c.top-s+l,h=u?"offsetWidth":"offsetHeight";0==Boolean(this.options.excludeOffset)&&(i.offset(e),this.replaceArrow(d,i[0][h],u))},function(y){y.expr[":"].icontains=var c=function(e,t,i){i&&(i.stopPropagation(),i.preventDefault()),this.$element=y(e),this.$newElement=null,this.$button=null,this.$menu=null,this.options=y.extend({},y.fn.selectpicker.defaults,this.$element.data(),"object"==typeof t&&t),null==this.options.title&&(this.options.title=this.$element.attr("title")),this.val=c.prototype.val,this.render=c.prototype.render,this.refresh=c.prototype.refresh,this.setStyle=c.prototype.setStyle,this.selectAll=c.prototype.selectAll,this.deselectAll=c.prototype.deselectAll,this.init()};c.prototype={constructor:c,init:function(){this.$element.hide(),this.multiple=this.$element.prop("multiple");var e=this.$element.attr("id");if(this.$newElement=this.createView(),this.$element.after(this.$newElement),this.$menu=this.$newElement.find("> .dropdown-menu"),this.$button=this.$newElement.find("> button"),this.$searchbox=this.$newElement.find("input"),this.scrollListeners=[],this.resizeListeners=[],this.clickListeners=[],this.touchstartListeners=[],e!==undefined){var t=this;this.$button.attr("data-id",e),y('label[for="'+e+'"]').click(}this.checkDisabled(),this.clickListener(),this.liveSearchListener(),this.render(),this.liHeight(),this.setStyle(),this.setWidth(),this.options.container&&this.selectPosition(),this.$menu.data("this",this),this.$newElement.data("this",this)},createDropdown:function(){var e=this.multiple?" show-tick":"",t=this.options.header?'<div class="popover-title"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>":"",i=this.options.liveSearch?'<div class="bootstrap-select-searchbox"><input type="text" class="input-block-level form-control" /></div>':"";return y("<div class='btn-group bootstrap-select"+e+"'><button type='button' class='btn dropdown-toggle' data-toggle='dropdown'><div class='filter-option pull-left'></div>&nbsp;<div class='caret'></div></button><div class='dropdown-menu open'>"+t+i+"<ul class='dropdown-menu inner' role='menu'></ul></div></div>")},createView:reloadLi:destroyLi:createLi:function(){var l=this,c=[],i="";return this.$element.find("option").each(function(){var e=y(this),t=e.attr("class")||"",i=e.attr("style")||"",n=e.data("content")?e.data("content"):e.html(),s=e.data("subtext")!==undefined?'<small class="muted text-muted">'+e.data("subtext")+"</small>":"",r=e.data("icon")!==undefined?'<i class="glyphicon '+e.data("icon")+'"></i> ':"";if(""!==r&&(e.is(":disabled")||e.parent().is(":disabled"))&&(r="<span>"+r+"</span>"),e.data("content")||(n=r+'<span class="text">'+n+s+"</span>"),l.options.hideDisabled&&(e.is(":disabled")||e.parent().is(":disabled")))c.push('<a style="min-height: 0; padding: 0"></a>');else if(e.parent().is("optgroup")&&1!=e.data("divider"))if(0==e.index()){var a=e.parent().attr("label"),o=e.parent().data("subtext")!==undefined?'<small class="muted text-muted">'+e.parent().data("subtext")+"</small>":"";a=(e.parent().data("icon")?'<i class="'+e.parent().data("icon")+'"></i> ':"")+'<span class="text">'+a+o+"</span>",0!=e[0].index?c.push('<div class="div-contain"><div class="divider"></div></div><dt>'+a+"</dt>"+l.createA(n,"opt "+t,i)):c.push("<dt>"+a+"</dt>"+l.createA(n,"opt "+t,i))}else c.push(l.createA(n,"opt "+t,i));else 1==e.data("divider")?c.push('<div class="div-contain"><div class="divider"></div></div>'):1==y(this).data("hidden")?c.push(""):c.push(l.createA(n,t,i))}),y.each(c,,this.multiple||0!=this.$element.find("option:selected").length||this.options.title||this.$element.find("option").eq(0).prop("selected",!0).attr("selected","selected"),y(i)},createA:render:function(){var n=this;this.$element.find("option").each(,this.tabIndex();var e=this.$element.find("option:selected").map(function(){var e,t=y(this),i=t.data("icon")&&n.options.showIcon?'<i class="glyphicon '+t.data("icon")+'"></i> ':"";return e=n.options.showSubtext&&t.attr("data-subtext")&&!n.multiple?' <small class="muted text-muted">'+t.data("subtext")+"</small>":"",t.data("content")&&n.options.showContent?t.data("content"):t.attr("title")!=undefined?t.attr("title"):i+t.html()+e}).toArray(),t=this.multiple?e.join(", "):e[0];if(this.multiple&&-1<this.options.selectedTextFormat.indexOf("count")){var i=this.options.selectedTextFormat.split(">"),s=this.options.hideDisabled?":not([disabled])":"";(1<i.length&&e.length>i[1]||1==i.length&&2<=e.length)&&(t=this.options.countSelectedText.replace("{0}",e.length).replace("{1}",this.$element.find('option:not([data-divider="true"]):not([data-hidden="true"])'+s).length))}t||(t=this.options.title!=undefined?this.options.title:this.options.noneSelectedText),this.$newElement.find(".filter-option").html(t)},setStyle:liHeight:function(){var e=this.$newElement.clone();e.appendTo("body");var t=e.addClass("open").find("> .dropdown-menu"),i=t.find("li > a").outerHeight(),n=this.options.header?t.find(".popover-title").outerHeight():0,s=this.options.liveSearch?t.find(".bootstrap-select-searchbox").outerHeight():0;e.remove(),this.$newElement.data("liHeight",i).data("headerHeight",n).data("searchHeight",s)},setSize:function(){var t,i,n,s=this,r=this.$menu,a=r.find(".inner"),e=(a.find("li > a"),this.$newElement.outerHeight()),o=this.$newElement.data("liHeight"),l=this.$newElement.data("headerHeight"),c=this.$newElement.data("searchHeight"),u=r.find("li .divider").outerHeight(!0),d=parseInt(r.css("padding-top"))+parseInt(r.css("padding-bottom"))+parseInt(r.css("border-top-width"))+parseInt(r.css("border-bottom-width")),h=this.options.hideDisabled?":not(.disabled)":"",p=y(window),f=d+parseInt(r.css("margin-top"))+parseInt(r.css("margin-bottom"))+2,g=if(g(),this.options.header&&r.css("padding-top",0),"auto"==this.options.size){var m=function(){var e;g(),t=n-f,s.$newElement.toggleClass("dropup",n<i&&t-f<r.height()&&s.options.dropupAuto),s.$newElement.hasClass("dropup")&&(t=i-f),e=3<r.find("li").length+r.find("dt").length?3*o+f-2:0,r.css({"max-height":t+"px",overflow:"hidden","min-height":e+"px"}),a.css({"max-height":t-l-c-d+"px","overflow-y":"auto","min-height":e-d+"px"})};m(),y(window).resize(m),y(window).scroll(m),this.scrollListeners.push(m),this.resizeListeners.push(m)}else if(this.options.size&&"auto"!=this.options.size&&r.find("li"+h).length>this.options.size){var v=r.find("li"+h+" > *").filter(":not(.div-contain)").slice(0,this.options.size).last().parent().index(),_=r.find("li").slice(0,v+1).find(".div-contain").length;t=o*this.options.size+_*u+d,this.$newElement.toggleClass("dropup",n<i&&t<r.height()&&this.options.dropupAuto),r.css({"max-height":t+l+c+"px",overflow:"hidden"}),a.css({"max-height":t-d+"px","overflow-y":"auto"})}},setWidth:selectPosition:function(){var t,i,n=this,s=y("<div />"),e=this.$newElement.on("click",;var r=function(){e(n.$newElement)};y(window).resize(r),this.resizeListeners.push(r);var a=y(window).on("scroll",a),this.scrollListeners.push(a);var o=y("html").on("click",o),this.clickListeners.push(o)},mobile:refresh:update:setSelected:setDisabled:isDisabled:checkDisabled:tabIndex:clickListener:function(){var a=this,e=function(e){e.stopPropagation()};y("body").on("touchstart.dropdown",".dropdown-menu",e),this.touchstartListeners.push(e),this.$newElement.on("click",function(){a.setSize()}),this.$menu.on("click","li a",function(e){var t=y(this).parent().index(),i=(y(this).parent(),a.$element.val());if(a.multiple&&e.stopPropagation(),e.preventDefault(),!a.isDisabled()&&!y(this).parent().hasClass("disabled")){var n=a.$element.find("option"),s=n.eq(t);if(a.multiple){var r=s.prop("selected");s.prop("selected",!r)}else n.prop("selected",!1),s.prop("selected",!0);a.$button.focus(),i!=a.$element.val()&&a.$element.change()}}),this.$menu.on("click","li.disabled a, li dt, li .div-contain, h3.popover-title",,this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$element.change(function(){a.render()})},liveSearchListener:function(){var e=this;this.$newElement.on("click.dropdown.data-api",,this.$searchbox.on("input",function(){e.$searchbox.val()?e.$menu.find("li").show().not(":icontains("+e.$searchbox.val()+")").hide():e.$menu.find("li").show()})},val:function(e){return e!=undefined?(this.$element.val(e),this.$element.change(),this.$element):this.$element.val()},selectAll:deselectAll:function(){this.$element.find("option").prop("selected",!1).removeAttr("selected"),this.render()},keydown:function(e){var t,i,n,s,r,a,o,l,c;if((c=(i=y(this).parent()).data("this")).options.container&&(i=c.$menu),(t=y("[role=menu] li:not(.divider):visible a",i)).length){if(/(38|40)/.test(e.keyCode))n=t.index(t.filter(":focus")),r=t.parent(":not(.disabled)").first().index(),a=t.parent(":not(.disabled)").last().index(),s=t.eq(n).parent().nextAll(":not(.disabled)").eq(0).index(),o=t.eq(n).parent().prevAll(":not(.disabled)").eq(0).index(),l=t.eq(s).parent().prevAll(":not(.disabled)").eq(0).index(),38==e.keyCode&&(n!=l&&o<n&&(n=o),n<r&&(n=r)),40==e.keyCode&&(n!=l&&n<s&&(n=s),a<n&&(n=a),-1==n&&(n=0)),t.eq(n).focus();else{var u={48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},d=[];t.each(;var h=y(document).data("keycount");h++,y(document).data("keycount",h),y.trim(y(":focus").text().toLowerCase()).substring(0,1)!=u[e.keyCode]?(h=1,y(document).data("keycount",h)):h>=d.length&&y(document).data("keycount",0),t.eq(d[h-1]).focus()}/(13|32)/.test(e.keyCode)&&(e.preventDefault(),y(":focus").click(),y(document).data("keycount",0))}},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},destroy:function(){for(var e in this.resizeListeners.forEach(function(e){y(window).off("resize",e)}),this.scrollListeners.forEach(,this.clickListeners.forEach(,this.touchstartListeners.forEach(,y(document).off("keydown","[data-toggle=dropdown], [role=menu]",c.prototype.keydown),this.$newElement.remove(),this.$element.remove(),this)this.hasOwnProperty(e)&&(this[e]=null)}},y.fn.selectpicker=function(r,a){var o,l=arguments,e=this.each(;return o!=undefined?o:e},y.fn.selectpicker.defaults={style:"btn-default",size:"auto",title:null,selectedTextFormat:"values",noneSelectedText:"Nothing selected",countSelectedText:"{0} of {1} selected",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1},y(document).data("keycount",0).on("keydown","[data-toggle=dropdown], [role=menu]",c.prototype.keydown)}(window.jQuery),function(o,r,i,e){"use strict";ar a="countrySelect",n=1,l={defaultCountry:"",defaultStyling:"inside",excludeCountries:[],onlyCountries:[],preferredCountries:["us","gb"]},c={UP:38,DOWN:40,ENTER:13,ESC:27,PLUS:43,A:65,Z:90,SPACE:32,DELETE:8,TAB:9};o(r).on("load",,s.prototype={init:_processCountryData:function(){this._setInstanceCountryData(),this._setPreferredCountries()},_setInstanceCountryData:_setPreferredCountries:_generateMarkup:function(){this.countryInput=o(this.element);var e="country-select";this.options.defaultStyling&&(e+=" "+this.options.defaultStyling),this.countryInput.wrap(o("<div>",{"class":e}));var t=o("<div>",{"class":"flag-dropdown"}).insertAfter(this.countryInput),i=o("<div>",{"class":"flag-dropdown country-picker-right"}).insertAfter(this.countryInput),n=o("<div>",{"class":"selected-flag"}).appendTo(t);this.selectedFlagInner=o("<div>",{"class":"flag"}).appendTo(n);var s=o("<div>",{"class":"selected-flag"}).appendTo(i);this.selectedFlagInnerArrow=o("<div>",{"class":"arrow"}).appendTo(s),this.countryList=o("<ul>",{"class":"country-list v-hide"}).appendTo(t),this.preferredCountries.length&&(this._appendListItems(this.preferredCountries,"preferred"),o("<li>",{"class":"divider"}).appendTo(this.countryList)),this._appendListItems(this.countries,""),this.countryCodeInput=o("#"+this.countryInput.attr("id")+"_code"),this.countryCodeInput||(this.countryCodeInput=o('<input type="hidden" id="'+this.countryInput.attr("id")+'_code" name="'+this.countryInput.attr("name")+'_code" value="" />'),this.countryCodeInput.insertAfter(this.countryInput)),this.dropdownHeight=this.countryList.outerHeight(),this.countryList.removeClass("v-hide").addClass("hide"),this.countryListItems=this.countryList.children(".country")},_appendListItems:_setInitialState:_initListeners:function(){var e=this;this.countryInput.on("keyup"+this.ns,function(){e._updateFlagFromInputVal()});var t=this.selectedFlagInner.parent();this.selectedFlagInnerArrow.parent();t.on("click"+this.ns,function(){e.countryList.hasClass("hide")&&!e.countryInput.prop("disabled")&&e._showDropdown()}),this.selectedFlagInnerArrow.parent().on("click"+this.ns,function(){e.countryList.hasClass("hide")&&!e.countryInput.prop("disabled")&&e._showDropdown()}),this.countryInput.on("blur"+this.ns,function(){e.countryInput.val()!=e.getSelectedCountryData().name&&e.setCountry(e.countryInput.val()),e.countryInput.val(e.getSelectedCountryData().name)})},_initAutoCountry:_loadAutoCountry:_focus:_showDropdown:_setDropdownPosition:function(){var e=this.countryInput.offset().top,t=o(r).scrollTop(),i=e+this.countryInput.outerHeight()+this.dropdownHeight<t+o(r).height(),n=e-this.dropdownHeight>t,s=!i&&n?this.countryInput.outerHeight():"";this.countryList.css("bottom",s)},_bindDropdownListeners:function(){var t=this;this.countryList.on("mouseover"+this.ns,".country",function(){t._highlightListItem(o(this))}),this.countryList.on("click"+this.ns,".country",;var e=!0;o("html").on("click"+this.ns,function(){e||(t.settedValue&&t.setCountry(t.settedValue.name),t._closeDropdown()),e=!1}),o(i).on("keydown"+this.ns,function(e){e.preventDefault(),e.which==c.UP||e.which==c.DOWN?t._handleUpDownKey(e.which):e.which==c.ENTER?t._handleEnterKey():e.which==c.ESC?(t.settedValue&&t.setCountry(t.settedValue.name),t._closeDropdown()):e.which>=c.A&&e.which<=c.Z||e.which==c.SPACE||e.which==c.DELETE?t._handleLetterKey(e.key.charCodeAt(0),e.which==c.DELETE):e.which==c.TAB&&t._handleTabKey()})},_handleTabKey:function(){this._handleEnterKey(),console.log(this.element);var e=o(this.element).closest("form").find(":focusable");e.eq(e.index(this.element)+1).focus()},_handleUpDownKey:_getNextElement:function(e){var t="li:not(.hide, .divider)",i=this.countryList.children(".highlight").first()[0],n=this.countryList.children(t).toArray(),s=e==c.UP?-1:1,r=n.indexOf(i)+s;return r<0||r>n.length-1?o(i):o(n[r])},_handleEnterKey:_handleLetterKey:function(e,t){if(this.settedValue)if(!1===t)this.countryInput.val(this.countryInput.val()+String.fromCharCode(e));else{var i=this.countryInput.val();this.countryInput.val(i.substring(0,i.length-1))}else this.settedValue=this.getSelectedCountryData(),this.countryInput.val(String.fromCharCode(e));var n=this.countryInput.val().replace(/(?=[()])/g,"\\"),s=this.countryListItems.filter(function(){var e=new RegExp("^"+n,"i"),t=o(this).text().match(e)&&!o(this).hasClass("preferred");return t?o(this).removeClass("hide"):o(this).addClass("hide"),t});if(s.length){var r,a=s.filter(".highlight").first();r=a&&a.next()&&a.next().text().charAt(0)==n?a.next():s.first(),this._highlightListItem(r),this._updateFlagFromInputVal(),this._scrollTo(r)}else this.countryListItems.removeClass("hide")},_updateFlagFromInputVal:_highlightListItem:_getCountryData:_selectFlag:_selectListItem:_closeDropdown:function(){this.countryList.addClass("hide"),this.settedValue=null,this.countryListItems.removeClass("hide"),this.selectedFlagInnerArrow.parent().children(".arrow").removeClass("up"),o(i).off("keydown"+this.ns),o("html").off("click"+this.ns),this.countryList.off(this.ns)},_scrollTo:function(e){if(e&&e.offset()){var t=this.countryList,i=t.height(),n=t.offset().top,s=n+i,r=e.outerHeight(),a=e.offset().top,o=a+r,l=a-n+t.scrollTop();if(a<n)t.scrollTop(l);else if(s<o){var c=i-r;t.scrollTop(l-c)}}},_updateName:handleAutoCountry:getSelectedCountryData:selectCountry:setCountry:destroy:,o.fn[a]=o.fn[a].getCountryData=function(){return u},o.fn[a].setCountryData=var u=o.each([{n:"Afghanistan (\u202b\u0627\u0641\u063a\u0627\u0646\u0633\u062a\u0627\u0646\u202c\u200e)",i:"af"},{n:"\xc5land Islands (\xc5land)",i:"ax"},{n:"Albania (Shqip\xebri)",i:"al"},{n:"Algeria (\u202b\u0627\u0644\u062c\u0632\u0627\u0626\u0631\u202c\u200e)",i:"dz"},{n:"American Samoa",i:"as"},{n:"Andorra",i:"ad"},{n:"Angola",i:"ao"},{n:"Anguilla",i:"ai"},{n:"Antigua and Barbuda",i:"ag"},{n:"Argentina",i:"ar"},{n:"Armenia (\u0540\u0561\u0575\u0561\u057d\u057f\u0561\u0576)",i:"am"},{n:"Aruba",i:"aw"},{n:"Australia",i:"au"},{n:"Austria (\xd6sterreich)",i:"at"},{n:"Azerbaijan (Az\u0259rbaycan)",i:"az"},{n:"Bahamas",i:"bs"},{n:"Bahrain (\u202b\u0627\u0644\u0628\u062d\u0631\u064a\u0646\u202c\u200e)",i:"bh"},{n:"Bangladesh (\u09ac\u09be\u0982\u09b2\u09be\u09a6\u09c7\u09b6)",i:"bd"},{n:"Barbados",i:"bb"},{n:"Belarus (\u0411\u0435\u043b\u0430\u0440\u0443\u0441\u044c)",i:"by"},{n:"Belgium (Belgi\xeb)",i:"be"},{n:"Belize",i:"bz"},{n:"Benin (B\xe9nin)",i:"bj"},{n:"Bermuda",i:"bm"},{n:"Bhutan (\u0f60\u0f56\u0fb2\u0f74\u0f42)",i:"bt"},{n:"Bolivia",i:"bo"},{n:"Bosnia and Herzegovina (\u0411\u043e\u0441\u043d\u0430 \u0438 \u0425\u0435\u0440\u0446\u0435\u0433\u043e\u0432\u0438\u043d\u0430)",i:"ba"},{n:"Botswana",i:"bw"},{n:"Brazil (Brasil)",i:"br"},{n:"British Indian Ocean Territory",i:"io"},{n:"British Virgin Islands",i:"vg"},{n:"Brunei",i:"bn"},{n:"Bulgaria (\u0411\u044a\u043b\u0433\u0430\u0440\u0438\u044f)",i:"bg"},{n:"Burkina Faso",i:"bf"},{n:"Burundi (Uburundi)",i:"bi"},{n:"Cambodia (\u1780\u1798\u17d2\u1796\u17bb\u1787\u17b6)",i:"kh"},{n:"Cameroon (Cameroun)",i:"cm"},{n:"Canada",i:"ca"},{n:"Cape Verde (Kabu Verdi)",i:"cv"},{n:"Caribbean Netherlands",i:"bq"},{n:"Cayman Islands",i:"ky"},{n:"Central African Republic (R\xe9publique Centrafricaine)",i:"cf"},{n:"Chad (Tchad)",i:"td"},{n:"Chile",i:"cl"},{n:"China (\u4e2d\u56fd)",i:"cn"},{n:"Christmas Island",i:"cx"},{n:"Cocos (Keeling) Islands (Kepulauan Cocos (Keeling))",i:"cc"},{n:"Colombia",i:"co"},{n:"Comoros (\u202b\u062c\u0632\u0631 \u0627\u0644\u0642\u0645\u0631\u202c\u200e)",i:"km"},{n:"Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)",i:"cd"},{n:"Congo (Republic) (Congo-Brazzaville)",i:"cg"},{n:"Cook Islands",i:"ck"},{n:"Costa Rica",i:"cr"},{n:"C\xf4te d\u2019Ivoire",i:"ci"},{n:"Croatia (Hrvatska)",i:"hr"},{n:"Cuba",i:"cu"},{n:"Cura\xe7ao",i:"cw"},{n:"Cyprus (\u039a\u03cd\u03c0\u03c1\u03bf\u03c2)",i:"cy"},{n:"Czech Republic (\u010cesk\xe1 republika)",i:"cz"},{n:"Denmark (Danmark)",i:"dk"},{n:"Djibouti",i:"dj"},{n:"Dominica",i:"dm"},{n:"Dominican Republic (Rep\xfablica Dominicana)",i:"do"},{n:"Ecuador",i:"ec"},{n:"Egypt (\u202b\u0645\u0635\u0631\u202c\u200e)",i:"eg"},{n:"El Salvador",i:"sv"},{n:"Equatorial Guinea (Guinea Ecuatorial)",i:"gq"},{n:"Eritrea",i:"er"},{n:"Estonia (Eesti)",i:"ee"},{n:"Ethiopia",i:"et"},{n:"Falkland Islands (Islas Malvinas)",i:"fk"},{n:"Faroe Islands (F\xf8royar)",i:"fo"},{n:"Fiji",i:"fj"},{n:"Finland (Suomi)",i:"fi"},{n:"France",i:"fr"},{n:"French Guiana (Guyane fran\xe7aise)",i:"gf"},{n:"French Polynesia (Polyn\xe9sie fran\xe7aise)",i:"pf"},{n:"Gabon",i:"ga"},{n:"Gambia",i:"gm"},{n:"Georgia (\u10e1\u10d0\u10e5\u10d0\u10e0\u10d7\u10d5\u10d4\u10da\u10dd)",i:"ge"},{n:"Germany (Deutschland)",i:"de"},{n:"Ghana (Gaana)",i:"gh"},{n:"Gibraltar",i:"gi"},{n:"Greece (\u0395\u03bb\u03bb\u03ac\u03b4\u03b1)",i:"gr"},{n:"Greenland (Kalaallit Nunaat)",i:"gl"},{n:"Grenada",i:"gd"},{n:"Guadeloupe",i:"gp"},{n:"Guam",i:"gu"},{n:"Guatemala",i:"gt"},{n:"Guernsey",i:"gg"},{n:"Guinea (Guin\xe9e)",i:"gn"},{n:"Guinea-Bissau (Guin\xe9 Bissau)",i:"gw"},{n:"Guyana",i:"gy"},{n:"Haiti",i:"ht"},{n:"Honduras",i:"hn"},{n:"Hong Kong (\u9999\u6e2f)",i:"hk"},{n:"Hungary (Magyarorsz\xe1g)",i:"hu"},{n:"Iceland (\xcdsland)",i:"is"},{n:"India (\u092d\u093e\u0930\u0924)",i:"in"},{n:"Indonesia",i:"id"},{n:"Iran (\u202b\u0627\u06cc\u0631\u0627\u0646\u202c\u200e)",i:"ir"},{n:"Iraq (\u202b\u0627\u0644\u0639\u0631\u0627\u0642\u202c\u200e)",i:"iq"},{n:"Ireland",i:"ie"},{n:"Isle of Man",i:"im"},{n:"Israel (\u202b\u05d9\u05e9\u05e8\u05d0\u05dc\u202c\u200e)",i:"il"},{n:"Italy (Italia)",i:"it"},{n:"Jamaica",i:"jm"},{n:"Japan (\u65e5\u672c)",i:"jp"},{n:"Jersey",i:"je"},{n:"Jordan (\u202b\u0627\u0644\u0623\u0631\u062f\u0646\u202c\u200e)",i:"jo"},{n:"Kazakhstan (\u041a\u0430\u0437\u0430\u0445\u0441\u0442\u0430\u043d)",i:"kz"},{n:"Kenya",i:"ke"},{n:"Kiribati",i:"ki"},{n:"Kosovo (Kosov\xeb)",i:"xk"},{n:"Kuwait (\u202b\u0627\u0644\u0643\u0648\u064a\u062a\u202c\u200e)",i:"kw"},{n:"Kyrgyzstan (\u041a\u044b\u0440\u0433\u044b\u0437\u0441\u0442\u0430\u043d)",i:"kg"},{n:"Laos (\u0ea5\u0eb2\u0ea7)",i:"la"},{n:"Latvia (Latvija)",i:"lv"},{n:"Lebanon (\u202b\u0644\u0628\u0646\u0627\u0646\u202c\u200e)",i:"lb"},{n:"Lesotho",i:"ls"},{n:"Liberia",i:"lr"},{n:"Libya (\u202b\u0644\u064a\u0628\u064a\u0627\u202c\u200e)",i:"ly"},{n:"Liechtenstein",i:"li"},{n:"Lithuania (Lietuva)",i:"lt"},{n:"Luxembourg",i:"lu"},{n:"Macau (\u6fb3\u9580)",i:"mo"},{n:"Macedonia (FYROM) (\u041c\u0430\u043a\u0435\u0434\u043e\u043d\u0438\u0458\u0430)",i:"mk"},{n:"Madagascar (Madagasikara)",i:"mg"},{n:"Malawi",i:"mw"},{n:"Malaysia",i:"my"},{n:"Maldives",i:"mv"},{n:"Mali",i:"ml"},{n:"Malta",i:"mt"},{n:"Marshall Islands",i:"mh"},{n:"Martinique",i:"mq"},{n:"Mauritania (\u202b\u0645\u0648\u0631\u064a\u062a\u0627\u0646\u064a\u0627\u202c\u200e)",i:"mr"},{n:"Mauritius (Moris)",i:"mu"},{n:"Mayotte",i:"yt"},{n:"Mexico (M\xe9xico)",i:"mx"},{n:"Micronesia",i:"fm"},{n:"Moldova (Republica Moldova)",i:"md"},{n:"Monaco",i:"mc"},{n:"Mongolia (\u041c\u043e\u043d\u0433\u043e\u043b)",i:"mn"},{n:"Montenegro (Crna Gora)",i:"me"},{n:"Montserrat",i:"ms"},{n:"Morocco (\u202b\u0627\u0644\u0645\u063a\u0631\u0628\u202c\u200e)",i:"ma"},{n:"Mozambique (Mo\xe7ambique)",i:"mz"},{n:"Myanmar (Burma) (\u1019\u103c\u1014\u103a\u1019\u102c)",i:"mm"},{n:"Namibia (Namibi\xeb)",i:"na"},{n:"Nauru",i:"nr"},{n:"Nepal (\u0928\u0947\u092a\u093e\u0932)",i:"np"},{n:"Netherlands (Nederland)",i:"nl"},{n:"New Caledonia (Nouvelle-Cal\xe9donie)",i:"nc"},{n:"New Zealand",i:"nz"},{n:"Nicaragua",i:"ni"},{n:"Niger (Nijar)",i:"ne"},{n:"Nigeria",i:"ng"},{n:"Niue",i:"nu"},{n:"Norfolk Island",i:"nf"},{n:"North Korea (\uc870\uc120 \ubbfc\uc8fc\uc8fc\uc758 \uc778\ubbfc \uacf5\ud654\uad6d)",i:"kp"},{n:"Northern Mariana Islands",i:"mp"},{n:"Norway (Norge)",i:"no"},{n:"Oman (\u202b\u0639\u064f\u0645\u0627\u0646\u202c\u200e)",i:"om"},{n:"Pakistan (\u202b\u067e\u0627\u06a9\u0633\u062a\u0627\u0646\u202c\u200e)",i:"pk"},{n:"Palau",i:"pw"},{n:"Palestine (\u202b\u0641\u0644\u0633\u0637\u064a\u0646\u202c\u200e)",i:"ps"},{n:"Panama (Panam\xe1)",i:"pa"},{n:"Papua New Guinea",i:"pg"},{n:"Paraguay",i:"py"},{n:"Peru (Per\xfa)",i:"pe"},{n:"Philippines",i:"ph"},{n:"Pitcairn Islands",i:"pn"},{n:"Poland (Polska)",i:"pl"},{n:"Portugal",i:"pt"},{n:"Puerto Rico",i:"pr"},{n:"Qatar (\u202b\u0642\u0637\u0631\u202c\u200e)",i:"qa"},{n:"R\xe9union (La R\xe9union)",i:"re"},{n:"Romania (Rom\xe2nia)",i:"ro"},{n:"Russia (\u0420\u043e\u0441\u0441\u0438\u044f)",i:"ru"},{n:"Rwanda",i:"rw"},{n:"Saint Barth\xe9lemy (Saint-Barth\xe9lemy)",i:"bl"},{n:"Saint Helena",i:"sh"},{n:"Saint Kitts and Nevis",i:"kn"},{n:"Saint Lucia",i:"lc"},{n:"Saint Martin (Saint-Martin (partie fran\xe7aise))",i:"mf"},{
n:"Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)",i:"pm"},{n:"Saint Vincent and the Grenadines",i:"vc"},{n:"Samoa",i:"ws"},{n:"San Marino",i:"sm"},{n:"S\xe3o Tom\xe9 and Pr\xedncipe (S\xe3o Tom\xe9 e Pr\xedncipe)",i:"st"},{n:"Saudi Arabia (\u202b\u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629\u202c\u200e)",i:"sa"},{n:"Senegal (S\xe9n\xe9gal)",i:"sn"},{n:"Serbia (\u0421\u0440\u0431\u0438\u0458\u0430)",i:"rs"},{n:"Seychelles",i:"sc"},{n:"Sierra Leone",i:"sl"},{n:"Singapore",i:"sg"},{n:"Sint Maarten",i:"sx"},{n:"Slovakia (Slovensko)",i:"sk"},{n:"Slovenia (Slovenija)",i:"si"},{n:"Solomon Islands",i:"sb"},{n:"Somalia (Soomaaliya)",i:"so"},{n:"South Africa",i:"za"},{n:"South Georgia & South Sandwich Islands",i:"gs"},{n:"South Korea (\ub300\ud55c\ubbfc\uad6d)",i:"kr"},{n:"South Sudan (\u202b\u062c\u0646\u0648\u0628 \u0627\u0644\u0633\u0648\u062f\u0627\u0646\u202c\u200e)",i:"ss"},{n:"Spain (Espa\xf1a)",i:"es"},{n:"Sri Lanka (\u0dc1\u0dca\u200d\u0dbb\u0dd3 \u0dbd\u0d82\u0d9a\u0dcf\u0dc0)",i:"lk"},{n:"Sudan (\u202b\u0627\u0644\u0633\u0648\u062f\u0627\u0646\u202c\u200e)",i:"sd"},{n:"Suriname",i:"sr"},{n:"Svalbard and Jan Mayen (Svalbard og Jan Mayen)",i:"sj"},{n:"Swaziland",i:"sz"},{n:"Sweden (Sverige)",i:"se"},{n:"Switzerland (Schweiz)",i:"ch"},{n:"Syria (\u202b\u0633\u0648\u0631\u064a\u0627\u202c\u200e)",i:"sy"},{n:"Taiwan (\u53f0\u7063)",i:"tw"},{n:"Tajikistan",i:"tj"},{n:"Tanzania",i:"tz"},{n:"Thailand (\u0e44\u0e17\u0e22)",i:"th"},{n:"Timor-Leste",i:"tl"},{n:"Togo",i:"tg"},{n:"Tokelau",i:"tk"},{n:"Tonga",i:"to"},{n:"Trinidad and Tobago",i:"tt"},{n:"Tunisia (\u202b\u062a\u0648\u0646\u0633\u202c\u200e)",i:"tn"},{n:"Turkey (T\xfcrkiye)",i:"tr"},{n:"Turkmenistan",i:"tm"},{n:"Turks and Caicos Islands",i:"tc"},{n:"Tuvalu",i:"tv"},{n:"Uganda",i:"ug"},{n:"Ukraine (\u0423\u043a\u0440\u0430\u0457\u043d\u0430)",i:"ua"},{n:"United Arab Emirates (\u202b\u0627\u0644\u0625\u0645\u0627\u0631\u0627\u062a \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0645\u062a\u062d\u062f\u0629\u202c\u200e)",i:"ae"},{n:"United Kingdom",i:"gb"},{n:"United States",i:"us"},{n:"U.S. Minor Outlying Islands",i:"um"},{n:"U.S. Virgin Islands",i:"vi"},{n:"Uruguay",i:"uy"},{n:"Uzbekistan (O\u02bbzbekiston)",i:"uz"},{n:"Vanuatu",i:"vu"},{n:"Vatican City (Citt\xe0 del Vaticano)",i:"va"},{n:"Venezuela",i:"ve"},{n:"Vietnam (Vi\u1ec7t Nam)",i:"vn"},{n:"Wallis and Futuna",i:"wf"},{n:"Western Sahara (\u202b\u0627\u0644\u0635\u062d\u0631\u0627\u0621 \u0627\u0644\u063a\u0631\u0628\u064a\u0629\u202c\u200e)",i:"eh"},{n:"Yemen (\u202b\u0627\u0644\u064a\u0645\u0646\u202c\u200e)",i:"ye"},{n:"Zambia",i:"zm"},{n:"Zimbabwe",i:"zw"}],}),function(){"use strict";on A(){ction o(){}function n(){}(){return g};var g={},m=Object.prototype,v=m.hasOwnProperty,_=Object.defineProperty||y="function"==typeof Symbol?Symbol:{},b=y.iterator||"@@iterator",w=y.asyncIterator||"@@asyncIterator",S=y.toStringTag||"@@toStringTag";try{i({},"")}catch(g){i=g.wrap=a;var C={},T={};i(T,b,function(){return this});var k=Object.getPrototypeOf,E=k&&k(k(p([])));E&&E!==m&&v.call(E,b)&&(T=E);var I=t.prototype=o.prototype=Object.create(T);return n.prototype=t,_(I,"constructor",{value:t,configurable:!0}),_(t,"constructor",{value:n,configurable:!0}),n.displayName=i(t,S,"GeneratorFunction"),g.isGeneratorFunction=g.mark=g.awrap=e(l.prototype),i(l.prototype,w,function(){return this}),g.AsyncIterator=l,g.async=e(I),i(I,S,"Generator"),i(I,b,,i(I,"toString",,g.keys=g.values=p,h.prototype={constructor:h,reset:stop:dispatchException:abrupt:complete:finish:"catch":delegateYield:,g}r a=Object.defineProperty,o=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,h=p=function(e,t){for(var i in t||(t={}))u.call(t,i)&&h(e,i,t[i]);if(o){var n,s=function(e){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=v(e))){t&&(e=t);var i=0,n=function(){};return{s:n,n:e:f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,r=!0,a=!1;return{s:n:e:f:}(o(t));try{for(s.s();!(n=s.n()).done;)i=n.value,d.call(t,i)&&h(e,i,t[i])}catch(e){s.e(e)}finally{s.f()}}return e},_=function(e,a,o){return new Promise(function(t,i){var n=s=function(e){try{r(o["throw"](e))}catch(e){i(e)}},r=r((o=o.apply(e,a)).next())})},f=p({},{host:"",headers:{"Content-Type":"application/json",Accept:"application/json","X-Client-Version":"3.0.3"},baseApiUrl:"/api/public",debounceMs:500}),g=y=function(e){return"".concat(g().host).concat(g().baseApiUrl).concat(e)},b=w=S=function(t){return _(void 0,null,A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=18;break}e.t0=t.status,e.next=400===e.t0?4:422===e.t0?9:429===e.t0?16:500===e.t0?17:18;break;case 4:return e.t1=C,e.next=7,t.json();case 7:throw e.t2=e.sent,new e.t1("BadRequest",e.t2);case 9:return e.t3=C,e.t4=m,e.next=13,t.json();case 13:throw e.t5=e.sent,e.t6=(0,e.t4)(e.t5),new e.t3("ValidationError",e.t6);case 16:throw new C("RateLimited");case 17:throw new C("UnknownError");case 18:return e.abrupt("return",t);case 19:case"end":return e.stop()}},e)}))},m=C=function(){function a(e,t){var i;!this);for(var n=arguments.length,s=new Array(2<n?n-2:0),r=2;r<n;r++)s[r-2]=arguments[r];return i=o.call.apply(o,[this].concat(s)),Error.captureStackTrace&&Error.captureStackTrace(l(i),a),Object.setPrototypeOf(l(i),a.prototype),i.type=e,i.context=t,i}!a,t(Error));var e,n,s,o=(n=a,s=i(),function(){var t,e=c(n);if(s){var i=c(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(e){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}(this)});return e=a,Object.defineProperty(e,"prototype",{writable:!1}),e}(),T=function(e){switch(e.state){case"email_confirmation_required":throw new C("EmailConfirmationRequired");case"password_reset_required":throw new C("PasswordResetRequired");case"sign_in_verification":throw new C("VerificationRequired",{token:e.sign_in_verification_token})}},k=function(e){throw new C("SignInFailure",{errorMessage:e.error_message||void 0,twoFactor:"two_factor"===e.state,captcha:"captcha"===e.state})},E=e=function(n,s){var r;return function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return new Promise(function(e){r&&clearTimeout(r),r=setTimeout(s)})}},I=(e(function(e){var t=e.username,i={language_code:e.languageCode,username:t};return fetch("".concat(y("/validate_username")),{method:"POST",headers:b(),body:w(i)}).then(S).then(function(e){if(!e.ok)throw new C("UnknownError")})},g().debounceMs),e(function(e){var t=e.email,i={language_code:e.languageCode,email:t};return fetch("".concat(y("/validate_email")),{method:"POST",headers:b(),body:w(i)}).then(S).then(},g().debounceMs),e(function(e){var t=e.password,i=e.username,n=void 0===i?"":i,s=e.firstName,r=void 0===s?"":s,a=e.lastName,o=void 0===a?"":a,l={language_code:e.languageCode,password:t,username:n,first_name:r,last_name:o};return fetch("".concat(y("/validate_password")),{method:"POST",headers:b(),body:w(l)}).then(S).then(function(e){if(!e.ok)throw new C("UnknownError")})},g().debounceMs));window.envatoSso={signUp:function(e){var t=e.firstName,i=e.lastName,n=e.username,s=e.email,r=e.password,a=e.privacyPolicy,o=e.recaptchaSiteKey,l=e.recaptchaVersion,c=e.recaptchaResponse,u=e.extraInformation,d=e.to,h=void 0===d?"":d,p=e.state,f=void 0===p?"":p,g={language_code:e.languageCode,first_name:t,last_name:i,email:s,username:n,password:r,privacy_policy:a?"1":"",to:h,state:f};if(c&&(g.recaptcha_version=l||"",g.recaptcha_site_key=o||"",g.recaptcha_response=c||""),u){var m={};Object.entries(u).forEach(function(e){var t,i,n=(i=2,t=e)||t,i)||v(t,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=n[0],r=n[1];m[s.replace(/[A-Z]/g,]=r}),g.extra_information=m}return fetch("".concat(y("/sign_up")),{method:"POST",headers:b(),body:w(g),credentials:"include"}).then(S).then(function(t){return _(void 0,null,A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=11;break}e.t0=t.status,e.next=303===e.t0?4:10;break;case 4:return e.t1=E,e.next=7,t.json();case 7:return e.t2=e.sent,(0,e.t1)(e.t2),e.abrupt("break",11);case 10:throw new C("UnknownError");case 11:return e.abrupt("return",t.json());case 12:case"end":return e.stop()}},e)}))}).then(function(e){return{token:e.token,redirect:e.redirect}})},validatePassword:I,setConfig:signOut:function(){return fetch("".concat(y("/sign_out")),{method:"DELETE",headers:b(),credentials:"include"}).then(function(e){if(!e.ok)throw new C("UnknownError");return!0})},signIn:function(e){var t=e.username,i=e.password,n=e.authenticationCode,s=void 0===n?"":n,r=e.recaptchaSiteKey,a=void 0===r?"":r,o=e.recaptchaVersion,l=void 0===o?"":o,c=e.recaptchaResponse,u=void 0===c?"":c,d=e.to,h=void 0===d?"":d,p=e.state,f=void 0===p?"":p,g=e.sso,m=e.sig,v={language_code:e.languageCode,username:t,password:i,to:h,state:f};return g&&(v.sso=g),m&&(v.sig=m),s&&(v.authentication_code=s),u&&(v.recaptcha_version=l,v.recaptcha_site_key=a,v.recaptcha_response=u),fetch("".concat(y("/sign_in")),{method:"POST",headers:b(),body:w(v),credentials:"include"}).then(S).then(function(t){return _(void 0,null,A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=17;break}e.t0=t.status,e.next=303===e.t0?4:401===e.t0?10:16;break;case 4:return e.t1=T,e.next=7,t.json();case 7:return e.t2=e.sent,(0,e.t1)(e.t2),e.abrupt("break",17);case 10:return e.t3=k,e.next=13,t.json();case 13:return e.t4=e.sent,(0,e.t3)(e.t4),e.abrupt("break",17);case 16:throw new C("UnknownError");case 17:return e.abrupt("return",t.json());case 18:case"end":return e.stop()}},e)}))}).then(function(e){return{token:e.token,redirect:e.redirect}})},autoSignIn:function(){return fetch("".concat(y("/auto_sign_in")),{method:"POST",headers:b(),credentials:"include"}).then(S).then(function(t){return _(void 0,null,A().mark(function e(){return A().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=6;break}e.t0=t.status,e.next=401===e.t0?4:5;break;case 4:throw new C("Unauthorized");case 5:throw new C("UnknownError");case 6:return e.abrupt("return",t.json());case 7:case"end":return e.stop()}},e)}))})},verifySignIn:function(e){var t=e.verificationToken,i=e.passcode,n=e.sig,s=void 0===n?"":n,r=e.sso,a=void 0===r?"":r,o=e.to,l=void 0===o?"":o,c=e.state,u=void 0===c?"":c,d={language_code:e.languageCode,token:t,passcode:i,sig:s,sso:a,to:l,state:u};return fetch("".concat(y("/verify_sign_in")),{method:"POST",headers:b(),body:w(d),credentials:"include"}).then(S).then(}}}(),function(e){var o=I=l=c=u=d=A=function(e,t,i,n,s,r,a){return e=I(e,I(I(l(t,i,n),s),a)),I(o(e,r),t)},P=function(e,t,i,n,s,r,a){return e=I(e,I(I(c(t,i,n),s),a)),I(o(e,r),t)},x=function(e,t,i,n,s,r,a){return e=I(e,I(I(u(t,i,n),s),a)),I(o(e,r),t)},M=D=L=N=e.extend({md5:function(e){var t,i,n,s,r,a,o,l,c,u=Array(),d=7,h=12,p=17,f=22,g=5,m=9,v=14,_=20,y=4,b=11,w=16,S=23,C=6,T=10,k=15,E=21;for(e=N(e),u=D(e),a=1732584193,o=4023233417,l=2562383102,c=271733878,t=0;t<u.length;t+=16)a=A(i=a,n=o,s=l,r=c,u[t+0],d,3614090360),c=A(c,a,o,l,u[t+1],h,3905402710),l=A(l,c,a,o,u[t+2],p,606105819),o=A(o,l,c,a,u[t+3],f,3250441966),a=A(a,o,l,c,u[t+4],d,4118548399),c=A(c,a,o,l,u[t+5],h,1200080426),l=A(l,c,a,o,u[t+6],p,2821735955),o=A(o,l,c,a,u[t+7],f,4249261313),a=A(a,o,l,c,u[t+8],d,1770035416),c=A(c,a,o,l,u[t+9],h,2336552879),l=A(l,c,a,o,u[t+10],p,4294925233),o=A(o,l,c,a,u[t+11],f,2304563134),a=A(a,o,l,c,u[t+12],d,1804603682),c=A(c,a,o,l,u[t+13],h,4254626195),l=A(l,c,a,o,u[t+14],p,2792965006),o=A(o,l,c,a,u[t+15],f,1236535329),a=P(a,o,l,c,u[t+1],g,4129170786),c=P(c,a,o,l,u[t+6],m,3225465664),l=P(l,c,a,o,u[t+11],v,643717713),o=P(o,l,c,a,u[t+0],_,3921069994),a=P(a,o,l,c,u[t+5],g,3593408605),c=P(c,a,o,l,u[t+10],m,38016083),l=P(l,c,a,o,u[t+15],v,3634488961),o=P(o,l,c,a,u[t+4],_,3889429448),a=P(a,o,l,c,u[t+9],g,568446438),c=P(c,a,o,l,u[t+14],m,3275163606),l=P(l,c,a,o,u[t+3],v,4107603335),o=P(o,l,c,a,u[t+8],_,1163531501),a=P(a,o,l,c,u[t+13],g,2850285829),c=P(c,a,o,l,u[t+2],m,4243563512),l=P(l,c,a,o,u[t+7],v,1735328473),o=P(o,l,c,a,u[t+12],_,2368359562),a=x(a,o,l,c,u[t+5],y,4294588738),c=x(c,a,o,l,u[t+8],b,2272392833),l=x(l,c,a,o,u[t+11],w,1839030562),o=x(o,l,c,a,u[t+14],S,4259657740),a=x(a,o,l,c,u[t+1],y,2763975236),c=x(c,a,o,l,u[t+4],b,1272893353),l=x(l,c,a,o,u[t+7],w,4139469664),o=x(o,l,c,a,u[t+10],S,3200236656),a=x(a,o,l,c,u[t+13],y,681279174),c=x(c,a,o,l,u[t+0],b,3936430074),l=x(l,c,a,o,u[t+3],w,3572445317),o=x(o,l,c,a,u[t+6],S,76029189),a=x(a,o,l,c,u[t+9],y,3654602809),c=x(c,a,o,l,u[t+12],b,3873151461),l=x(l,c,a,o,u[t+15],w,530742520),o=x(o,l,c,a,u[t+2],S,3299628645),a=M(a,o,l,c,u[t+0],C,4096336452),c=M(c,a,o,l,u[t+7],T,1126891415),l=M(l,c,a,o,u[t+14],k,2878612391),o=M(o,l,c,a,u[t+5],E,4237533241),a=M(a,o,l,c,u[t+12],C,1700485571),c=M(c,a,o,l,u[t+3],T,2399980690),l=M(l,c,a,o,u[t+10],k,4293915773),o=M(o,l,c,a,u[t+1],E,2240044497),a=M(a,o,l,c,u[t+8],C,1873313359),c=M(c,a,o,l,u[t+15],T,4264355552),l=M(l,c,a,o,u[t+6],k,2734768916),o=M(o,l,c,a,u[t+13],E,1309151649),a=M(a,o,l,c,u[t+4],C,4149444226),c=M(c,a,o,l,u[t+11],T,3174756917),l=M(l,c,a,o,u[t+2],k,718787259),o=M(o,l,c,a,u[t+9],E,3951481745),a=I(a,i),o=I(o,n),l=I(l,s),c=I(c,r);return(L(a)+L(o)+L(l)+L(c)).toLowerCase()}})}(jQuery),function(t){function i(e,t){if(!(1<e.originalEvent.touches.length)){e.preventDefault();var i=e.originalEvent.changedTouches[0],n=document.createEvent("MouseEvents");n.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}}if(t.support.touch="ontouchend"in document,t.support.touch){var n,e=t.ui.mouse.prototype,s=e._mouseInit,r=e._mouseDestroy;e._touchStart=e._touchMove=e._touchEnd=e._mouseInit=function(){var e=this;e.element.bind({touchstart:t.proxy(e,"_touchStart"),touchmove:t.proxy(e,"_touchMove"),touchend:t.proxy(e,"_touchEnd")}),s.call(e)},e._mouseDestroy=}(jQuery),function(e){var t;"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):((t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).braintree||(t.braintree={})).client=e()}(function(){return function u(r,a,o){function l(t,e){if(!a[t]){if(!r[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(c)return c(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var s=a[t]={exports:{}};r[t][0].call(s.exports,function(e){return l(r[t][1][e]||e)},s,s.exports,u,r,a,o)}return a[t].exports}for(var c="function"==typeof require&&require,e=0;e<o.length;e++)l(o[e]);return l}({1:[function(e,t,i){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(i,"__esModule",{value:!0}),i.PromiseGlobal=void 0;var s=n(e("promise-polyfill")),r="undefined"!=typeof Promise?Promise:s["default"];i.PromiseGlobal=r},{"promise-polyfill":15}],2:[function(e,t){"use strict";function i(i){var e,t=JSON.stringify(i);if(!i.forceScriptReload&&(e=o[t]))return e;var n=document.createElement("script"),s=i.dataAttributes||{},r=i.container||document.head;return n.src=i.src,n.id=i.id||"",n.async=!0,i.crossorigin&&n.setAttribute("crossorigin",""+i.crossorigin),Object.keys(s).forEach(function(e){n.setAttribute("data-"+e,""+s[e])}),e=new a.PromiseGlobal(function(e,t){n.addEventListener("load",function(){e(n)}),n.addEventListener("error",function(){t(new Error(i.src+" failed to load."))}),n.addEventListener("abort",function(){t(new Error(i.src+" has aborted."))}),r.appendChild(n)}),o[t]=e}var a=e("./lib/promise"),o={};i.clearCache=function(){o={}},t.exports=i},{"./lib/promise":1}],3:[function(e,t){t.exports=e("./dist/load-script")},{"./dist/load-script":2}],4:[function(e,t){"use strict";var i=e("./is-ie11");t.exports=,{"./is-ie11":5}],5:[function(e,t){"use strict";t.exports=function(e){return-1!==(e=e||window.navigator.userAgent).indexOf("Trident/7")}},{}],6:[function(e,t){"use strict";t.exports=,{}],7:[function(e,t){t.exports=e("./dist/is-ie")},{"./dist/is-ie":4}],8:[function(e,t){t.exports=e("./dist/is-ie9")},{"./dist/is-ie9":6}],9:[function(e,t){"use strict";function n(e){var i=this;"function"!=typeof e?(this._promise=new n.Promise(function(e,t){i._resolveFunction=e,i._rejectFunction=t}),e=e||{},this._onResolve=e.onResolve||n.defaultOnResolve,this._onReject=e.onReject||n.defaultOnReject,n.shouldCatchExceptions(e)&&this._promise["catch"](function(){}),this._resetState()):this._promise=new n.Promise(e)}var i="undefined"!=typeof Promise?Promise:null,s=(n.defaultOnResolve=function(e){return n.Promise.resolve(e)},n.defaultOnReject=function(e){return n.Promise.reject(e)},n.setPromise=function(e){n.Promise=e},n.shouldCatchExceptions=function(e){return e.hasOwnProperty("suppressUnhandledPromiseMessage")?Boolean(e.suppressUnhandledPromiseMessage):Boolean(n.suppressUnhandledPromiseMessage)},n.all=function(e){return n.Promise.all(e)},n.allSettled=function(e){return n.Promise.allSettled(e)},n.race=function(e){return n.Promise.race(e)},n.reject=function(e){return n.Promise.reject(e)},n.resolve=function(e){return n.Promise.resolve(e)},n.prototype.then=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return(e=this._promise).then.apply(e,t)},n.prototype["catch"]=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return(e=this._promise)["catch"].apply(e,t)},n.prototype.resolve=function(e){var t=this;return this.isFulfilled||(this._setResolved(),n.Promise.resolve().then(function(){return t._onResolve(e)}).then(function(e){t._resolveFunction(e)})["catch"](function(e){t._resetState(),t.reject(e)})),this},n.prototype.reject=function(e){var t=this;return this.isFulfilled||(this._setRejected(),n.Promise.resolve().then(function(){return t._onReject(e)}).then(function(e){t._setResolved(),t._resolveFunction(e)})["catch"](function(e){return t._rejectFunction(e)})),this},n.prototype._resetState=function(){this.isFulfilled=!1,this.isResolved=!1,this.isRejected=!1},n.prototype._setResolved=function(){this.isFulfilled=!0,this.isResolved=!0,this.isRejected=!1},n.prototype._setRejected=function(){this.isFulfilled=!0,this.isResolved=!1,this.isRejected=!0},n.Promise=i,n);t.exports=s},{}],10:[function(e,t){"use strict";t.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}},{}],11:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.deferred=function(i){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];setTimeout(function(){try{i.apply(void 0,e)}catch(e){console.log("Error in callback function"),console.log(e)}},1)}}},{}],12:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.once=function(i){var n=!1;return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n||(n=!0,i.apply(void 0,e))}}},{}],13:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.promiseOrCallback=function(e,t){if(!t)return e;e.then(function(e){return t(null,e)})["catch"](function(e){return t(e)})}},{}],14:[function(e,t){"use strict";function i(n){return function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return"function"==typeof t[t.length-1]&&(e=t.pop(),e=r.once(s.deferred(e))),a.promiseOrCallback(n.apply(this,t),e)}}var s=e("./lib/deferred"),r=e("./lib/once"),a=e("./lib/promise-or-callback");i.wrapPrototype=function(s,e){void 0===e&&(e={});var r=e.ignoreMethods||[],a=!0===e.transformPrivateMethods;return Object.getOwnPropertyNames(s.prototype).filter(function(e){var t="constructor"!==e&&"function"==typeof s.prototype[e],i=-1===r.indexOf(e),n=a||"_"!==e.charAt(0);return t&&n&&i}).forEach(function(e){var t=s.prototype[e];s.prototype[e]=i(t)}),s},t.exports=i},{"./lib/deferred":11,"./lib/once":12,"./lib/promise-or-callback":13}],15:[function(e,t){"use strict";function l(e){return Boolean(e&&void 0!==e.length)}function n(){}function r(e){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function s(i,n){for(;3===i._state;)i=i._value;0!==i._state?(i._handled=!0,r._immediateFn(function(){var e,t=1===i._state?n.onFulfilled:n.onRejected;if(null!==t){try{e=t(i._value)}catch(e){return void o(n.promise,e)}a(n.promise,e)}else(1===i._state?a:o)(n.promise,i._value)})):i._deferreds.push(n)}function a(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var i=t.then;if(t instanceof r)return e._state=3,e._value=t,void c(e);if("function"==typeof i)return void d((n=i,s=t,function(){n.apply(s,arguments)}),e)}e._state=1,e._value=t,c(e)}catch(t){o(e,t)}var n,s}function o(e,t){e._state=2,e._value=t,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&r._immediateFn(function(){e._handled||r._unhandledRejectionFn(e._value)});for(var t=0,i=e._deferreds.length;t<i;t++)s(e,e._deferreds[t]);e._deferreds=null}function u(e,t,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=i}function d(e,t){var i=!1;try{e(function(e){i||(i=!0,a(t,e))},function(e){i||(i=!0,o(t,e))})}catch(e){if(i)return;i=!0,o(t,e)}}var i=setTimeout
;r.prototype["catch"]=function(e){return this.then(null,e)},r.prototype.then=function(e,t){var i=new this.constructor(n);return s(this,new u(e,t,i)),i},r.prototype["finally"]=function(t){var i=this.constructor;return this.then(function(e){return i.resolve(t()).then(function(){return e})},function(e){return i.resolve(t()).then(function(){return i.reject(e)})})},r.all=function(t){return new r(function(n,s){if(!l(t))return s(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return n([]);for(var a=r.length,e=0;e<r.length;e++)!function o(t,e){try{if(e&&("object"==typeof e||"function"==typeof e)){var i=e.then;if("function"==typeof i)return void i.call(e,function(e){o(t,e)},s)}r[t]=e,0==--a&&n(r)}catch(e){s(e)}}(e,r[e])})},r.resolve=function(t){return t&&"object"==typeof t&&t.constructor===r?t:new r(function(e){e(t)})},r.reject=function(i){return new r(function(e,t){t(i)})},r.race=function(s){return new r(function(e,t){if(!l(s))return t(new TypeError("Promise.race accepts an array"));for(var i=0,n=s.length;i<n;i++)r.resolve(s[i]).then(e,t)})},r._immediateFn="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){i(e,0)},r._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t.exports=r},{}],16:[{"@braintree/browser-detection/is-ie":7,"@braintree/browser-detection/is-ie9":8}],17:[function(e,t){"use strict";ar u=e("./constants").BRAINTREE_VERSION,n=e("./request/graphql"),r=e("./request"),a=e("../lib/is-verified-domain"),d=e("../lib/braintree-error"),h=e("../lib/convert-to-braintree-error"),o=e("./get-configuration").getConfiguration,l=e("../lib/create-authorization-data"),p=e("../lib/add-metadata"),f=e("../lib/promise"),i=e("@braintree/wrap-promise"),g=e("../lib/once"),m=e("../lib/deferred"),v=e("../lib/assign").assign,_=e("../lib/analytics"),y=e("./errors"),c=e("../lib/constants").VERSION,b=e("../lib/constants").GRAPHQL_URLS,w=e("../lib/methods"),S=e("../lib/convert-methods-to-error"),C=e("../lib/assets"),T=e("../lib/constants").FRAUDNET_FNCLS,k=e("../lib/constants").FRAUDNET_SOURCE,E=e("../lib/constants").FRAUDNET_URL,I={};s.initialize=function(t){var i,e,n=I[t.authorization];if(n)return _.sendEvent(n,"custom.client.load.cached"),n;try{e=l(t.authorization)}catch(e){return f.reject(new d(y.CLIENT_INVALID_AUTHORIZATION))}return n=o(e).then(,I[t.authorization]=n,_.sendEvent(n,"custom.client.load.initialized"),n.then(["catch"](},s.clearCache=function(){I={}},s.prototype._findOrCreateFraudnetJSON=s.prototype.request=function(s,i){var c=this,e=new f(function(r,a){var e,o,t,i,n,l=Boolean("payment_methods/credit_cards"===s.endpoint&&c.getConfiguration().gatewayConfiguration.creditCards.collectDeviceData);if("graphQLApi"!==s.api&&(s.method?s.endpoint||(e="options.endpoint"):e="options.method"),e)throw new d({type:y.CLIENT_OPTION_REQUIRED.type,code:y.CLIENT_OPTION_REQUIRED.code,message:e+" is required when making a request."});if(o="api"in s?s.api:"clientApi",i={method:s.method,graphQL:c._graphQL,timeout:s.timeout,metadata:c._configuration.analyticsMetadata},"clientApi"===o)t=c._clientApiBaseUrl,i.data=p(c._configuration,s.data);else{if("graphQLApi"!==o)throw new d({type:y.CLIENT_OPTION_INVALID.type,code:y.CLIENT_OPTION_INVALID.code,message:"options.api is invalid."});t=b[c._configuration.gatewayConfiguration.environment],s.endpoint="",i.method="post",i.data=v({clientSdkMetadata:{source:c._configuration.analyticsMetadata.source,integration:c._configuration.analyticsMetadata.integration,sessionId:c._configuration.analyticsMetadata.sessionId}},s.data),i.headers={Authorization:"Bearer "+((n=c._configuration).authorizationFingerprint||n.authorization),"Braintree-Version":u}}i.url=t+s.endpoint,i.sendAnalyticsEvent=function(e){_.sendEvent(c,e)},c._request(i,function(e,t,i){var n,s=function(e,t){var i;if(-1===e?i=new d(y.CLIENT_REQUEST_TIMEOUT):403===e?i=new d(y.CLIENT_AUTHORIZATION_INSUFFICIENT):429===e?i=new d(y.CLIENT_RATE_LIMITED):500<=e?i=new d(y.CLIENT_GATEWAY_NETWORK):(e<200||400<=e)&&(i=h(t,{type:y.CLIENT_REQUEST_ERROR.type,code:y.CLIENT_REQUEST_ERROR.code,message:y.CLIENT_REQUEST_ERROR.message})),i)return i.details=i.details||{},i.details.httpStatus=e,i}(i,e);s?a(s):"graphQLApi"===o&&t.errors?a(h(t.errors,{type:y.CLIENT_GRAPHQL_REQUEST_ERROR.type,code:y.CLIENT_GRAPHQL_REQUEST_ERROR.code,message:y.CLIENT_GRAPHQL_REQUEST_ERROR.message})):(n=v({_httpStatus:i},t),l&&n.creditCards&&0<n.creditCards.length&&(c._findOrCreateFraudnetJSON(n.creditCards[0].nonce),C.loadScript({src:E,forceScriptReload:!0})),r(n))})});return"function"==typeof i?(i=g(m(i)),void e.then(["catch"]():e},s.prototype.toJSON=function(){return this.getConfiguration()},s.prototype.getVersion=function(){return c},s.prototype.teardown=i(,t.exports=s},{"../lib/add-metadata":38,"../lib/analytics":39,"../lib/assets":40,"../lib/assign":41,"../lib/braintree-error":42,"../lib/constants":43,"../lib/convert-methods-to-error":44,"../lib/convert-to-braintree-error":45,"../lib/create-authorization-data":46,"../lib/deferred":47,"../lib/is-verified-domain":51,"../lib/methods":53,"../lib/once":54,"../lib/promise":55,"./constants":18,"./errors":19,"./get-configuration":20,"./request":32,"./request/graphql":30,"@braintree/wrap-promise":14}],18:[{}],19:[function(e,t){"use strict";var i=e("../lib/braintree-error");t.exports={CLIENT_GATEWAY_CONFIGURATION_INVALID_DOMAIN:{type:i.types.MERCHANT,code:"CLIENT_GATEWAY_CONFIGURATION_INVALID_DOMAIN"},CLIENT_OPTION_REQUIRED:{type:i.types.MERCHANT,code:"CLIENT_OPTION_REQUIRED"},CLIENT_OPTION_INVALID:{type:i.types.MERCHANT,code:"CLIENT_OPTION_INVALID"},CLIENT_MISSING_GATEWAY_CONFIGURATION:{type:i.types.INTERNAL,code:"CLIENT_MISSING_GATEWAY_CONFIGURATION",message:"Missing gatewayConfiguration."},CLIENT_INVALID_AUTHORIZATION:{type:i.types.MERCHANT,code:"CLIENT_INVALID_AUTHORIZATION",message:"Authorization is invalid. Make sure your client token or tokenization key is valid."},CLIENT_GATEWAY_NETWORK:{type:i.types.NETWORK,code:"CLIENT_GATEWAY_NETWORK",message:"Cannot contact the gateway at this time."},CLIENT_REQUEST_TIMEOUT:{type:i.types.NETWORK,code:"CLIENT_REQUEST_TIMEOUT",message:"Request timed out waiting for a reply."},CLIENT_REQUEST_ERROR:{type:i.types.NETWORK,code:"CLIENT_REQUEST_ERROR",message:"There was a problem with your request."},CLIENT_GRAPHQL_REQUEST_ERROR:{type:i.types.NETWORK,code:"CLIENT_GRAPHQL_REQUEST_ERROR",message:"There was a problem with your request."},CLIENT_RATE_LIMITED:{type:i.types.MERCHANT,code:"CLIENT_RATE_LIMITED",message:"You are being rate-limited; please try again in a few minutes."},CLIENT_AUTHORIZATION_INSUFFICIENT:{type:i.types.MERCHANT,code:"CLIENT_AUTHORIZATION_INSUFFICIENT",message:"The authorization used has insufficient privileges."}}},{"../lib/braintree-error":42}],20:[function(e,t){"use strict";var c=e("../lib/braintree-error"),i=e("../lib/promise"),n=e("@braintree/wrap-promise"),u=e("./request"),d=e("@braintree/uuid"),h=e("../lib/constants"),p=e("./errors"),f=e("./request/graphql"),g=e("../lib/constants").GRAPHQL_URLS,m=e("../lib/is-date-string-before-or-on"),v=e("./constants").BRAINTREE_VERSION;t.exports={getConfiguration:n(function(n){return new i(function(s,r){var a,e,t=d(),o={merchantAppId:window.location.host,platform:h.PLATFORM,sdkVersion:h.VERSION,source:h.SOURCE,integration:h.INTEGRATION,integrationType:h.INTEGRATION,sessionId:t},l=n.attrs,i=n.configUrl;l._meta=o,l.braintreeLibraryVersion=h.BRAINTREE_LIBRARY_VERSION,l.configVersion="3",e={url:i,method:"GET",data:l},l.authorizationFingerprint&&n.graphQL?(m(n.graphQL.date,v)&&(e.graphQL=new f({graphQL:{url:n.graphQL.url,features:["configuration"]}})),e.metadata=o):l.tokenizationKey&&(e.graphQL=new f({graphQL:{url:g[n.environment],features:["configuration"]}}),e.metadata=o),u(e,function(e,t,i){var n;return e?(n=403===i?p.CLIENT_AUTHORIZATION_INSUFFICIENT:p.CLIENT_GATEWAY_NETWORK,void r(new c({type:n.type,code:n.code,message:n.message,details:{originalError:e}}))):(a={authorizationType:l.tokenizationKey?"TOKENIZATION_KEY":"CLIENT_TOKEN",authorizationFingerprint:l.authorizationFingerprint,analyticsMetadata:o,gatewayConfiguration:t},void s(a))})})})}},{"../lib/braintree-error":42,"../lib/constants":43,"../lib/is-date-string-before-or-on":50,"../lib/promise":55,"./constants":18,"./errors":19,"./request":32,"./request/graphql":30,"@braintree/uuid":10,"@braintree/wrap-promise":14}],21:[function(e,t){"use strict";var i=e("../lib/braintree-error"),n=e("./client"),s=e("../lib/promise"),r=e("@braintree/wrap-promise"),a=e("../lib/errors");t.exports={create:r(,VERSION:"3.64.2"}},{"../lib/braintree-error":42,"../lib/errors":49,"../lib/promise":55,"./client":17,"@braintree/wrap-promise":14}],22:[function(e,t){"use strict";function m(n,s,r){var a,o,l,e,t,i,c,u=n.url,d=n.graphQL,h=n.timeout,p=w.getRequestObject(),f=r,g=Boolean(d&&d.isGraphQLRequest(u,n.data));n.headers=_({"Content-Type":"application/json"},n.headers),u=(l=new(g?C:T)(n)).getUrl(),e=l.getBody(),t=l.getMethod(),i=l.getHeaders(),"GET"===t&&(u=v.queryify(u,e),e=null),S?p.onreadystatechange=function(){if(4===p.readyState){if(0===p.status&&g)return delete n.graphQL,void m(n,s,r);if(c=b(p.responseText),o=l.adaptResponseBody(c),400<=(a=l.determineStatus(p.status,c))||a<200){if(g&&("UNKNOWN"===(i=!(t=c).data&&t.errors&&t.errors[0]&&t.errors[0].extensions&&t.errors[0].extensions.errorClass)||"INTERNAL"===i))return delete n.graphQL,void m(n,s,r);if(s<k&&(!(e=a)||e===E))return void m(n,++s,r);f(o||"error",null,a||500)}else f(null,o,a);var e,t,i}}:(n.headers&&(u=v.queryify(u,i)),p.onload=p.onerror=p.onprogress=function(){},p.ontimeout=;try{p.open(t,u,!0)}catch(e){if(!g)throw e;return delete n.graphQL,void m(n,s,r)}p.timeout=h,S&&Object.keys(i).forEach(;try{p.send(y(t,e))}catch(e){}}var v=e("../../lib/querystring"),_=e("../../lib/assign").assign,y=e("./prep-body"),b=e("./parse-body"),w=e("./xhr"),S=w.isAvailable,C=e("./graphql/request"),T=e("./default-request"),k=1,E=408;t.exports={request:},{"../../lib/assign":41,"../../lib/querystring":56,"./default-request":23,"./graphql/request":31,"./parse-body":35,"./prep-body":36,"./xhr":37}],23:[function(e,t){"use strict";.prototype.getUrl=function(){return this._url},i.prototype.getBody=function(){return this._data},i.prototype.getMethod=function(){return this._method},i.prototype.getHeaders=function(){return this._headers},i.prototype.adaptResponseBody=function(e){return e},i.prototype.determineStatus=function(e){return e},t.exports=i},{}],24:[function(e,t){"use strict";t.exports=function(){return window.navigator.userAgent}},{}],25:[function(e,t){"use strict";ar a=e("./error"),o=e("../../../../lib/assign").assign,l={creditCard:{AMERICAN_EXPRESS:"American Express",DISCOVER:"Discover",INTERNATIONAL_MAESTRO:"Maestro",JCB:"JCB",MASTERCARD:"MasterCard",SOLO:"Solo",UK_MAESTRO:"UK Maestro",UNION_PAY:"UnionPay",VISA:"Visa"},applePayWeb:{VISA:"visa",MASTERCARD:"mastercard",DISCOVER:"discover",AMERICAN_EXPRESS:"amex"},visaCheckout:{VISA:"Visa",MASTERCARD:"MasterCard",DISCOVER:"Discover",AMERICAN_EXPRESS:"American Express"},googlePay:{VISA:"visa",MASTERCARD:"mastercard",DISCOVER:"discover",AMERICAN_EXPRESS:"amex"},masterpass:{VISA:"visa",MASTERCARD:"master",DISCOVER:"discover",AMERICAN_EXPRESS:"amex",DINERS:"diners",INTERNATIONAL_MAESTRO:"maestro",JCB:"jcb"}};t.exports=function(e,t){var i,n,s;return e.data&&!e.errors?(i=t,s=e.data.clientConfiguration,n={environment:s.environment.toLowerCase(),clientApiUrl:s.clientApiUrl,assetsUrl:s.assetsUrl,analytics:{url:s.analyticsUrl},merchantId:s.merchantId,venmo:"off"},s.supportedFeatures&&(n.graphQL={url:i._graphQL._config.url,features:s.supportedFeatures.map(function(e){return e.toLowerCase()})}),s.braintreeApi&&(n.braintreeApi=s.braintreeApi),s.applePayWeb&&(n.applePayWeb=s.applePayWeb,n.applePayWeb.supportedNetworks=r(s.applePayWeb.supportedCardBrands,l.applePayWeb),delete n.applePayWeb.supportedCardBrands),s.ideal&&(n.ideal=s.ideal),s.kount&&(n.kount={kountMerchantId:s.kount.merchantId}),s.creditCard?(n.challenges=s.creditCard.challenges.map(function(e){return e.toLowerCase()}),n.creditCards={supportedCardTypes:r(s.creditCard.supportedCardBrands,l.creditCard)},n.threeDSecureEnabled=s.creditCard.threeDSecureEnabled,n.threeDSecure=s.creditCard.threeDSecure):(n.challenges=[],n.creditCards={supportedCardTypes:[]},n.threeDSecureEnabled=!1),s.googlePay&&(n.androidPay={displayName:s.googlePay.displayName,enabled:!0,environment:s.googlePay.environment.toLowerCase(),googleAuthorizationFingerprint:s.googlePay.googleAuthorization,paypalClientId:s.googlePay.paypalClientId,supportedNetworks:r(s.googlePay.supportedCardBrands,l.googlePay)}),s.venmo&&(n.payWithVenmo={merchantId:s.venmo.merchantId,accessToken:s.venmo.accessToken,environment:s.venmo.environment.toLowerCase()}),s.paypal?(n.paypalEnabled=!0,n.paypal=o({},s.paypal),n.paypal.currencyIsoCode=n.paypal.currencyCode,n.paypal.environment=n.paypal.environment.toLowerCase(),delete n.paypal.currencyCode):n.paypalEnabled=!1,s.unionPay&&(n.unionPay={enabled:!0,merchantAccountId:s.unionPay.merchantAccountId}),s.visaCheckout&&(n.visaCheckout={apikey:s.visaCheckout.apiKey,externalClientId:s.visaCheckout.externalClientId,supportedCardTypes:r(s.visaCheckout.supportedCardBrands,l.visaCheckout)}),s.masterpass&&(n.masterpass={merchantCheckoutId:s.masterpass.merchantCheckoutId,supportedNetworks:r(s.masterpass.supportedCardBrands,l.masterpass)}),s.usBankAccount&&(n.usBankAccount={routeId:s.usBankAccount.routeId,plaid:{publicKey:s.usBankAccount.plaidPublicKey}}),n):a(e)}},{"../../../../lib/assign":41,"./error":27}],26:[function(e,t){"use strict";var i=e("./error"),o={AMERICAN_EXPRESS:"American Express",DINERS:"Discover",DISCOVER:"Discover",INTERNATIONAL_MAESTRO:"Maestro",JCB:"JCB",MASTERCARD:"MasterCard",UK_MAESTRO:"Maestro",UNION_PAY:"Union Pay",VISA:"Visa"},l={YES:"Yes",NO:"No",UNKNOWN:"Unknown"},c={PSDTWO:"psd2"};t.exports=function(e){return(e.data&&!e.errors?function(e){var t,i,n=e.data.tokenizeCreditCard,s=n.creditCard,r=s.last4?s.last4.substr(2,4):"",a=s.binData;return a&&(["commercial","debit","durbinRegulated","healthcare","payroll","prepaid"].forEach(,["issuingBank","countryOfIssuance","productId"].forEach(),t={creditCards:[{binData:a,consumed:!1,description:r?"ending in "+r:"",nonce:n.token,details:{expirationMonth:s.expirationMonth,expirationYear:s.expirationYear,bin:s.bin||"",cardType:o[s.brandCode]||"Unknown",lastFour:s.last4||"",lastTwo:r},type:"CreditCard",threeDSecureInfo:null}]},n.authenticationInsight&&(i=n.authenticationInsight.customerAuthenticationRegulationEnvironment,t.creditCards[0].authenticationInsight={regulationEnvironment:c[i]||i.toLowerCase()}),t}:i)(e)}},{"./error":27}],27:[function(e,t){"use strict";t.exports=function(e){var t,i,n,s,r=e.errors&&e.errors[0]&&e.errors[0].extensions&&e.errors[0].extensions.errorClass;return"VALIDATION"===r?0!==(n=(t=e).errors,s=[],n.forEach(,i=s).length?{error:{message:{creditCard:"Credit card is invalid"}[i[0].field]},fieldErrors:i}:{error:{message:t.errors[0].message}}:r?{error:{message:e.errors[0].message},fieldErrors:[]}:{error:{message:"There was a problem serving your request"},fieldErrors:[]}}},{}],28:[function(e,t){"use strict";t.exports=,{}],29:[function(e,t){"use strict";function s(e,t){var i,n,s,r=e.creditCard,a=r&&r.billingAddress,o=r&&r.expirationDate,l=r&&(r.expirationMonth||o&&o.split("/")[0].trim()),c=r&&(r.expirationYear||o&&o.split("/")[1].trim()),u={input:{creditCard:{number:r&&r.number,expirationMonth:l,expirationYear:c,cvv:r&&r.cvv,cardholderName:r&&r.cardholderName},options:{}}};return t.hasAuthenticationInsight&&(u.authenticationInsightInput={merchantAccountId:e.merchantAccountId}),a&&(u.input.creditCard.billingAddress=a),u.input=(i=e,n=u.input,i.creditCard&&i.creditCard.options&&"boolean"==typeof i.creditCard.options.validate?s=i.creditCard.options.validate:i.authorizationFingerprint&&i.tokenizationKey||i.authorizationFingerprint?s=!0:i.tokenizationKey&&(s=!1),"boolean"==typeof s&&(n.options=d({validate:s},n.options)),n),u}var d=e("../../../../lib/assign").assign;t.exports=function(e){var t,i,n={hasAuthenticationInsight:Boolean(e.authenticationInsight&&e.merchantAccountId)};return{query:(i="mutation TokenizeCreditCard($input: TokenizeCreditCardInput!",(t=n.hasAuthenticationInsight)&&(i+=", $authenticationInsightInput: AuthenticationInsightInput!"),i+=") {   tokenizeCreditCard(input: $input) {     token     creditCard {       bin       brandCode       last4       expirationMonth      expirationYear      binData {         prepaid         healthcare         debit         durbinRegulated         commercial         payroll         issuingBank         countryOfIssuance         productId       }     } ",t&&(i+="    authenticationInsight(input: $authenticationInsightInput) {      customerAuthenticationRegulationEnvironment    }"),i+="  } }"),variables:s(e,n),operationName:"TokenizeCreditCard"}}},{"../../../../lib/assign":41}],30:[function(e,t){"use strict";ar r=e("../../browser-detection"),a={tokenize_credit_cards:"payment_methods/credit_cards",configuration:"configuration"},o=["creditCard.options.unionPayEnrollment"];i.prototype.getGraphQLEndpoint=function(){return this._config.url},i.prototype.isGraphQLRequest=function(e,t){var i,n,s=this.getClientApiPath(e);return!(!this._isGraphQLEnabled()||!s||r.isIe9())&&(i=this._config.features.some(function(e){return a[e]===s}),n=t,!o.some(&&i)},i.prototype.getClientApiPath=i.prototype._isGraphQLEnabled=t.exports=i},{"../../browser-detection":16}],31:[function(e,t){"use strict";r n=e("../../constants").BRAINTREE_VERSION,a=e("../../../lib/assign").assign,s=e("./generators/credit-card-tokenization"),o=e("./adapters/credit-card-tokenization"),l=e("./generators/configuration"),c=e("./adapters/configuration"),u={"payment_methods/credit_cards":s,configuration:l},d={"payment_methods/credit_cards":o,configuration:c};i.prototype.getUrl=function(){return this._graphQL.getGraphQLEndpoint()},i.prototype.getBody=function(){var e=this._data),t=this._generator(e),s=a({clientSdkMetadata:this._clientSdkMetadata},t);return JSON.stringify(s)},i.prototype.getMethod=function(){return"POST"},i.prototype.getHeaders=function(){var e={Authorization:"Bearer "+(this._data.authorizationFingerprint?(this._sendAnalyticsEvent("graphql.authorization-fingerprint"),this._data.authorizationFingerprint):(this._sendAnalyticsEvent("graphql.tokenization-key"),this._data.tokenizationKey)),"Braintree-Version":n};return a({},this._headers,e)},i.prototype.adaptResponseBody=i.prototype.determineStatus=function(e,t){var i,n=200===e?(i=t.errors&&t.errors[0]&&t.errors[0].extensions&&t.errors[0].extensions.errorClass,t.data&&!t.errors?200:"VALIDATION"===i?422:"AUTHORIZATION"===i?403:"AUTHENTICATION"===i?401:!i&&t.errors[0].message?403:500):e||500;return this._sendAnalyticsEvent("graphql.status."+e),this._sendAnalyticsEvent("graphql.determinedStatus."+n),n},t.exports=i},{"../../../lib/assign":41,"../../constants":18,"./adapters/configuration":25,"./adapters/credit-card-tokenization":26,"./generators/configuration":28,"./generators/credit-card-tokenization":29}],32:[function(e,t){"use strict";var i,n=e("../../lib/once"),s=e("./jsonp-driver"),r=e("./ajax-driver"),a=e("./get-user-agent"),o=e("./is-http");t.exports=,{"../../lib/once":54,"./ajax-driver":22,"./get-user-agent":24,"./is-http":33,"./jsonp-driver":34}],33:[function(e,t){"use strict";t.exports=,{}],34:[function(t,e){"use strict";unction g(r,a,o){window[o]=function(e){var t,i=e.status||500,n=null,s=null;delete e.status,400<=i||i<200?n=e:s=e,f(o),(t=r)&&t.parentNode&&t.parentNode.removeChild(t),clearTimeout(y[o]),a(n,s,i)}}var m,v=t("@braintree/uuid"),_=t("../../lib/querystring"),y={};e.exports={request:function(e,t){var i,n,s,r,a,o,l,c="callback_json_"+v().replace(/-/g,""),u=e.url,d=e.data,h=e.method,p=e.timeout;u=_.queryify(u,d);n=u=_.queryify(u,{_method:h,callback:c}),s=c,r=document.createElement("script"),a=!1,r.src=n,r.async=!0,r.onerror=function(){window[s]({message:"error",status:500})},r.onload=r.onreadystatechange=g(i=r,t,c),o=p,y[l=c]=setTimeout(o),(m=m||document.getElementsByTagName("head")[0]).appendChild(i)}}},{"../../lib/querystring":56,"@braintree/uuid":10}],35:[function(e,t){"use strict";t.exports=,{}],36:[function(e,t){"use strict";t.exports=,{}],37:[function(e,t){"use strict";var i="undefined"!=typeof window&&window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest;t.exports={isAvailable:i,getRequestObject:},{}],38:[function(e,t){"use strict";var a=e("./create-authorization-data"),o=e("./json-clone"),l=e("./constants");t.exports=,{"./constants":43,"./create-authorization-data":46,"./json-clone":52}],39:[function(e,t){"use strict";var i=e("./promise"),c=e("./constants"),u=e("./add-metadata");t.exports={sendEvent:},{"./add-metadata":38,"./constants":43,"./promise":55}],40:[function(e,t){"use strict";var i=e("@braintree/asset-loader/load-script");t.exports={loadScript:i}},{"@braintree/asset-loader/load-script":3}],41:[function(e,t){"use strict";ar n="function"==typeof Object.assign?Object.assign:i;t.exports={assign:n,_assign:i}},{}],42:[function(e,t){"use strict";function i(e){if(!i.types.hasOwnProperty(e.type))throw new Error(e.type+" is not a valid type.");if(!e.code)throw new Error("Error code required.");if(!e.message)throw new Error("Error message required.");this.name="BraintreeError",this.code=e.code,this.message=e.message,this.type=e.type,this.details=e.details}var n=e("./enumerate");i.prototype=Object.create(Error.prototype),(i.prototype.constructor=i).types=n(["CUSTOMER","MERCHANT","NETWORK","INTERNAL","UNKNOWN"]),i.findRootError=function(e){return e instanceof i&&e.details&&e.details.originalError?i.findRootError(e.details.originalError):e},t.exports=i},{"./enumerate":48}],43:[function(e,t){"use strict";t.exports={ANALYTICS_PREFIX:"web.",ANALYTICS_REQUEST_TIMEOUT_MS:2e3,ASSETS_URLS:{production:"https://assets.braintreegateway.com",sandbox:"https://assets.braintreegateway.com"},CLIENT_API_URLS:{production:"https://api.braintreegateway.com:443",sandbox:"https://api.sandbox.braintreegateway.com:443"},FRAUDNET_SOURCE:"BRAINTREE_SIGNIN",FRAUDNET_FNCLS:"fnparams-dede7cc5-15fd-4c75-a9f4-36c430ee3a99",FRAUDNET_URL:"https://c.paypal.com/da/r/fb.js",GRAPHQL_URLS:{production:"https://payments.braintree-api.com/graphql",sandbox:"https://payments.sandbox.braintree-api.com/graphql"},INTEGRATION_TIMEOUT_MS:6e4,VERSION:"3.64.2",INTEGRATION:"custom",SOURCE:"client",PLATFORM:"web",BRAINTREE_LIBRARY_VERSION:"braintree/web/3.64.2"}},{}],44:[function(e,t){"use strict";var i=e("./braintree-error"),n=e("./errors");t.exports=function(t,e){e.forEach(function(e){t[e]=function(){throw new i({type:n.METHOD_CALLED_AFTER_TEARDOWN.type,code:n.METHOD_CALLED_AFTER_TEARDOWN.code,message:e+" cannot be called after teardown."})}})}},{"./braintree-error":42,"./errors":49}],45:[function(e,t){"use strict";var i=e("./braintree-error");t.exports=,{"./braintree-error":42}],46:[function(e,t){"use strict";var a=e("../lib/vendor/polyfill").atob,o=e("../lib/constants").CLIENT_API_URLS;t.exports=function(e){var t,i,n,s,r={attrs:{},configUrl:""};return/^[a-zA-Z0-9]+_[a-zA-Z0-9]+_[a-zA-Z0-9_]+$/.test(e)?(s=(n=e.split("_"))[0],i={merchantId:n.slice(2).join("_"),environment:s},r.environment=i.environment,r.attrs.tokenizationKey=e,r.configUrl=o[i.environment]+"/merchants/"+i.merchantId+"/client_api/v1/configuration"):(t=JSON.parse(a(e)),r.environment=t.environment,r.attrs.authorizationFingerprint=t.authorizationFingerprint,r.configUrl=t.configUrl,r.graphQL=t.graphQL),r}},{"../lib/constants":43,"../lib/vendor/polyfill":57}],47:[function(e,t){"use strict";t.exports=,{}],48:[function(e,t){"use strict";t.exports=function(e,i){return i=null==i?"":i,e.reduce(function(e,t){return e[t]=i+t,e},{})}},{}],49:[function(e,t){"use strict";var i=e("./braintree-error");t.exports={INVALID_USE_OF_INTERNAL_FUNCTION:{type:i.types.INTERNAL,code:"INVALID_USE_OF_INTERNAL_FUNCTION"},INSTANTIATION_OPTION_REQUIRED:{type:i.types.MERCHANT,code:"INSTANTIATION_OPTION_REQUIRED"},INCOMPATIBLE_VERSIONS:{type:i.types.MERCHANT,code:"INCOMPATIBLE_VERSIONS"},CLIENT_SCRIPT_FAILED_TO_LOAD:{type:i.types.NETWORK,code:"CLIENT_SCRIPT_FAILED_TO_LOAD",message:"Braintree client script could not be loaded."},METHOD_CALLED_AFTER_TEARDOWN:{type:i.types.MERCHANT,code:"METHOD_CALLED_AFTER_TEARDOWN"}}},{"./braintree-error":42}],50:[function(e,t){"use strict";.exports=,{}],51:[function(e,t){"use strict";var i,n={"paypal.com":1,"braintreepayments.com":1,"braintreegateway.com":1,"braintree-api.com":1};t.exports=,{}],52:[function(e,t){"use strict";t.exports=function(e){return JSON.parse(JSON.stringify(e))}},{}],53:[function(e,t){"use strict";t.exports=function(t){return Object.keys(t).filter(function(e){return"function"==typeof t[e]})}},{}],54:[function(e,t){"use strict";t.exports=,{}],55:[function(e,t){"use strict";var i=e("promise-polyfill"),n=e("@braintree/extended-promise"),s="undefined"!=typeof Promise?Promise:i;n.suppressUnhandledPromiseMessage=!0,n.setPromise(s),t.exports=s},{"@braintree/extended-promise":9,"promise-polyfill":15}],56:[function(e,t){"use strict";.exports={parse:stringify:o,queryify:},{}],57:[function(e,t){"use strict";ar n="function"==typeof atob?window.atob:i;t.exports={atob:function(e){return n.call(window,e)},_atob:i}},{}]},{},[21])(21)}),function(){return {1:[function(e,t,i){"use strict";var n=this&&this.__importDefault||Object.defineProperty(i,"__esModule",{value:!0}),i.PromiseGlobal=void 0;var s=n(e("promise-polyfill")),r="undefined"!=typeof Promise?Promise:s["default"];i.PromiseGlobal=r},{"promise-polyfill":9}],2:[function(e,t){"use strict";ar a=e("./lib/promise"),o={};i.clearCache=function(){o={}},t.exports=i},{"./lib/promise":1}],3:[{"./dist/load-script":2}],4:[function(e,t){"use strict";function n(e){var i=this;"function"!=typeof e?(this._promise=new n.Promise(function(e,t){i._resolveFunction=e,i._rejectFunction=t}),e=e||{},this._onResolve=e.onResolve||n.defaultOnResolve,this._onReject=e.onReject||n.defaultOnReject,n.shouldCatchExceptions(e)&&this._promise["catch"](function(){}),this._resetState()):this._promise=new n.Promise(e)}var i="undefined"!=typeof Promise?Promise:null,s=(n.defaultOnResolve=function(e){return n.Promise.resolve(e)},n.defaultOnReject=function(e){return n.Promise.reject(e)},n.setPromise=n.shouldCatchExceptions=n.all=function(e){return n.Promise.all(e)},n.allSettled=function(e){return n.Promise.allSettled(e)},n.race=function(e){return n.Promise.race(e)},n.reject=function(e){return n.Promise.reject(e)},n.resolve=function(e){return n.Promise.resolve(e)},n.prototype.then=n.prototype["catch"]=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return(e=this._promise)["catch"].apply(e,t)},n.prototype.resolve=function(e){var t=this;return this.isFulfilled||(this._setResolved(),n.Promise.resolve().then(function(){return t._onResolve(e)}).then(function(e){t._resolveFunction(e)})["catch"](function(e){t._resetState(),t.reject(e)})),this},n.prototype.reject=function(e){var t=this;return this.isFulfilled||(this._setRejected(),n.Promise.resolve().then(function(){return t._onReject(e)}).then(function(e){t._setResolved(),t._resolveFunction(e)})["catch"](function(e){return t._rejectFunction(e)})),this},n.prototype._resetState=function(){this.isFulfilled=!1,this.isResolved=!1,this.isRejected=!1},n.prototype._setResolved=function(){this.isFulfilled=!0,this.isResolved=!0,this.isRejected=!1},n.prototype._setRejected=n.Promise=i,n);t.exports=s},{}],5:[{}],6:[{}],7:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.promiseOrCallback=function(e,t){if(!t)return e;e.then(["catch"](function(e){return t(e)})}},{}],8:[function(e,t){"use strict";ar s=e("./lib/deferred"),r=e("./lib/once"),a=e("./lib/promise-or-callback");i.wrapPrototype=function(s,e){void 0===e&&(e={});var r=e.ignoreMethods||[],a=!0===e.transformPrivateMethods;return Object.getOwnPropertyNames(s.prototype).filter(.forEach(,s},t.exports=i},{"./lib/deferred":5,"./lib/once":6,"./lib/promise-or-callback":7}],9:[function(e,t){"use strict";unction n(){}etTimeout;r.prototype["catch"]=r.prototype.then=r.prototype["finally"]=r.all=r.resolve=r.reject=r.race=r._immediateFn="function"==typeof setImmediate?function(e){setImmediate(e)}:function(e){i(e,0)},r._unhandledRejectionFn=t.exports=r},{}],10:[function(e,t){"use strict";var i=e("../lib/braintree-error");t.exports={DATA_COLLECTOR_KOUNT_NOT_ENABLED:{type:i.types.MERCHANT,code:"DATA_COLLECTOR_KOUNT_NOT_ENABLED",message:"Kount is not enabled for this merchant."},DATA_COLLECTOR_KOUNT_ERROR:{type:i.types.MERCHANT,code:"DATA_COLLECTOR_KOUNT_ERROR"},DATA_COLLECTOR_REQUIRES_CREATE_OPTIONS:{type:i.types.MERCHANT,code:"DATA_COLLECTOR_REQUIRES_CREATE_OPTIONS",message:"Data Collector must be created with Kount and/or PayPal."}}},{"../lib/braintree-error":17}],11:[function(e,t){"use strict";function i(){}ar s,r=e("../lib/constants").FRAUDNET_FNCLS,a=e("../lib/constants").FRAUDNET_SOURCE,o=e("../lib/constants").FRAUDNET_URL,l=e("../lib/assets").loadScript,c=e("../lib/promise");i.prototype.initialize=function(){var e,t,i,n=this;return this.sessionId=s=),this._beaconId="https://b.stats.paypal.com/counter.cgi?i=127.0.0.1&p="+this.sessionId+"&t="+(new Date).getTime()/1e3+"&a=14",this._parameterBlock=(e=this.sessionId,t=this._beaconId,(i=document.body.appendChild(document.createElement("script"))).type="application/json",i.setAttribute("fncls",r),i.text=JSON.stringify({f:e,s:a,b:t}),i),l({src:o}).then(["catch"](function(){return null})},i.prototype.teardown=t.exports={setup:clearSessionIdCache:function(){s=null}}},{"../lib/assets":15,"../lib/constants":19,"../lib/promise":26}],12:[function(e,t){"use strict";var a=e("./kount"),o=e("./fraudnet"),l=e("../lib/braintree-error"),c=e("../lib/basic-component-verification"),u=e("../lib/create-deferred-client"),d=e("../lib/create-assets-url"),h=e("../lib/methods"),p=e("../lib/convert-methods-to-error"),f=e("../lib/promise"),g=e("@braintree/wrap-promise"),m=e("./errors");t.exports={create:g(,VERSION:"3.64.2"}},{"../lib/basic-component-verification":16,"../lib/braintree-error":17,"../lib/convert-methods-to-error":20,"../lib/create-assets-url":21,"../lib/create-deferred-client":22,"../lib/methods":25,"../lib/promise":26,"./errors":10,"./fraudnet":11,"./kount":13,"@braintree/wrap-promise":8}],13:[function(e,t){"use strict";ar n=e("./vendor/sjcl"),s=e("../lib/camel-case-to-snake-case"),r="https://assets.qa.braintreepayments.com/data",a={development:r,qa:r,sandbox:"https://assets.braintreegateway.com/sandbox/data",production:"https://assets.braintreegateway.com/data"},o={};i.getCachedDeviceData=function(e){return o[e]},i.setCachedDeviceData=function(e,t){o[e]=t},i.prototype.teardown=i.prototype._removeIframe=i.prototype._getDeviceData=i.prototype._generateDeviceSessionId=i.prototype._setupIFrame=i.prototype._initializeEnvironment=t.exports={setup:Kount:i,environmentUrls:a}},{"../lib/camel-case-to-snake-case":18,"./vendor/sjcl":14}],14:[function(e,t){"use strict";,d,h,p,_={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(e){this.toString=function(){return"CORRUPT: "+this.message},this.message=e},invalid:function(e){this.toString=function(){return"INVALID: "+this.message},this.message=e},bug:function(e){this.toString=function(){return"BUG: "+this.message},this.message=e},notReady:};_.cipher.aes=_.cipher.aes.prototype={encrypt:function(e){return i(this,e,0)},decrypt:l:[[[],[],[],[],[]],[[],[],[],[],[]]],G:function(){for(var e,t,i,n,s,r,a=this.l[0],o=this.l[1],l=a[4],c=o[4],u=[],d=[],h=0;h<256;h++)d[(u[h]=h<<1^283*(h>>7))^h]=h;for(e=t=0;!l[e];e^=i||1,t=d[t]||1)for(s=(s=t^t<<1^t<<2^t<<3^t<<4)>>8^255&s^99,r=16843009*(n=u[h=u[i=u[c[l[e]=s]=e]]])^65537*h^257*i^16843008*e,n=257*u[s]^16843008*s,h=0;h<4;h++)a[h][e]=n=n<<24^n>>>8,o[h][s]=r=r<<24^r>>>8;for(h=0;h<5;h++)a[h]=a[h].slice(0),o[h]=o[h].slice(0)}},_.bitArray={bitSlice:extract:concat:bitLength:clamp:partial:getPartial:equal:M:Y:byteswapM:,_.codec.utf8String={fromBits:toBits:,_.codec.hex={fromBits:toBits:,_.hash.sha256=_.hash.sha256.hash=_.hash.sha256.prototype={blockSize:512,reset:update:finalize:K:[],b:[],G:,_.prng=_.prng.prototype={randomWords:function(e,t){var i,n=[],s=this.isReady(t);if(s===this.m)throw new _.exception.notReady("generator isn't seeded");if(s&this.A){s=!(s&this.w),i=[];var r,a=0;for(this.L=i[0]=(new Date).valueOf()+this.P,r=0;r<16;r++)i.push(4294967296*Math.random()|0);for(r=0;r<this.c.length&&(i=i.concat(this.c[r].finalize()),a+=this.i[r],this.i[r]=0,s||!(this.H&1<<r));r++);for(this.H>=1<<this.c.length&&(this.c.push(new _.hash.sha256),this.i.push(0)),this.f-=a,a>this.j&&(this.j=a),this.H++,this.b=_.hash.sha256.hash(this.b.concat(i)),this.C=new _.cipher.aes(this.b),s=0;s<4&&(this.g[s]=this.g[s]+1|0,!this.g[s]);s++);}for(s=0;s<e;s+=4)0==(s+1)%this.O&&o(this),i=l(this),n.push(i[0],i[1],i[2],i[3]);return o(this),n.slice(0,e)},setDefaultParanoia:addEntropy:isReady:getProgress:startCollectors:stopCollectors:addEventListener:removeEventListener:U:function(){n(this,1)},W:X:V:R:,_.random=new _.prng(6);e:try{if(h=void 0!==t&&t.exports){try{p=e("crypto")}catch(e){p=null}h=u=p}if(h&&u.randomBytes)a=u.randomBytes(128),a=new Uint32Array(new Uint8Array(a).buffer),_.random.addEntropy(a,1024,"crypto['randomBytes']");else if("undefined"!=typeof window&&"undefined"!=typeof Uint32Array){if(d=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(d);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)break e;window.msCrypto.getRandomValues(d)}_.random.addEntropy(d,1024,"crypto['getRandomValues']")}}catch(e){"undefined"!=typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(e))}void 0!==t&&t.exports&&(t.exports=_)},{crypto:void 0}],15:[function(e,t){"use strict";var i=e("@braintree/asset-loader/load-script");t.exports={loadScript:i}},{"@braintree/asset-loader/load-script":3}],16:[function(e,t){"use strict";var s=e("./braintree-error"),r=e("./promise"),a=e("./errors");t.exports={verify:},{"./braintree-error":17,"./errors":24,"./promise":26}],17:[function(e,t){"use strict";ar n=e("./enumerate");i.prototype=Object.create(Error.prototype),(i.prototype.constructor=i).types=n(["CUSTOMER","MERCHANT","NETWORK","INTERNAL","UNKNOWN"]),i.findRootError=t.exports=i},{"./enumerate":23}],18:[function(e,t){"use strict";t.exports=,{}],19:[function(e,t){"use strict";t.exports={ANALYTICS_PREFIX:"web.",ANALYTICS_REQUEST_TIMEOUT_MS:2e3,ASSETS_URLS:{production:"https://assets.braintreegateway.com",sandbox:"https://assets.braintreegateway.com"},CLIENT_API_URLS:{production:"https://api.braintreegateway.com:443",sandbox:"https://api.sandbox.braintreegateway.com:443"},FRAUDNET_SOURCE:"BRAINTREE_SIGNIN",FRAUDNET_FNCLS:"fnparams-dede7cc5-15fd-4c75-a9f4-36c430ee3a99",FRAUDNET_URL:"https://c.paypal.com/da/r/fb.js",GRAPHQL_URLS:{production:"https://payments.braintree-api.com/graphql",sandbox:"https://payments.sandbox.braintree-api.com/graphql"},INTEGRATION_TIMEOUT_MS:6e4,VERSION:"3.64.2",INTEGRATION:"custom",SOURCE:"client",PLATFORM:"web",BRAINTREE_LIBRARY_VERSION:"braintree/web/3.64.2"}},{}],20:[function(e,t){"use strict";var i=e("./braintree-error"),n=e("./errors");t.exports=,{"./braintree-error":17,"./errors":24}],21:[function(e,t){"use strict";var i=e("./constants").ASSETS_URLS;t.exports={create:function(){return i.production}}},{"./constants":19}],22:[function(e,t){"use strict";var i=e("./braintree-error"),n=e("./promise"),s=e("./assets"),r=e("./errors"),a="3.64.2";t.exports={create:function(e){var t=n.resolve();return e.client?n.resolve(e.client):(window.braintree&&window.braintree.client||(t=s.loadScript({src:e.assetsUrl+"/web/"+a+"/js/client.min.js"})["catch"](),t.then()}}},{"./assets":15,"./braintree-error":17,"./errors":24,"./promise":26}],23:[function(e,t){"use strict";t.exports=,{}],24:[function(e,t){"use strict";var i=e("./braintree-error");t.exports={INVALID_USE_OF_INTERNAL_FUNCTION:{type:i.types.INTERNAL,code:"INVALID_USE_OF_INTERNAL_FUNCTION"},INSTANTIATION_OPTION_REQUIRED:{type:i.types.MERCHANT,code:"INSTANTIATION_OPTION_REQUIRED"},INCOMPATIBLE_VERSIONS:{type:i.types.MERCHANT,code:"INCOMPATIBLE_VERSIONS"},CLIENT_SCRIPT_FAILED_TO_LOAD:{type:i.types.NETWORK,code:"CLIENT_SCRIPT_FAILED_TO_LOAD",message:"Braintree client script could not be loaded."},METHOD_CALLED_AFTER_TEARDOWN:{type:i.types.MERCHANT,code:"METHOD_CALLED_AFTER_TEARDOWN"}}},{"./braintree-error":17}],25:[function(e,t){"use strict";t.exports=,{}],26:[function(e,t){"use strict";var i=e("promise-polyfill"),n=e("@braintree/extended-promise"),s="undefined"!=typeof Promise?Promise:i;n.suppressUnhandledPromiseMessage=!0,n.setPromise(s),t.exports=s},{"@braintree/extended-promise":4,"promise-polyfill":9}]},{},[
12])(12)}),jQuery.fn.visibleInScroll=function(e){var t=$(this[0]).scrollParent()[0],i=this[0].getBoundingClientRect(),n=[t.getBoundingClientRect()];if(i={left:i.left,top:i.top,right:i.right,bottom:i.bottom,width:i.width,height:i.height,visibleWidth:i.width,visibleHeight:i.height,isVisible:!0,isContained:!0},t===this[0].ownerDocument)return i;for(;t!==this[0].ownerDocument&&null!==t&&((t.scrollWidth>t.clientWidth||t.scrollHeight>t.clientHeight)&&n.push(t.getBoundingClientRect()),!n.length||!e);)t=$(t).scrollParent()[0];e||(n.length=1);for(var s=0;s<n.length;s+=1){var r=n[s];i.left=Math.max(i.left,r.left),i.top=Math.max(i.top,r.top),i.right=Math.min(i.right,r.right),i.bottom=Math.min(i.bottom,r.bottom)}return i.visibleWidth=Math.max(0,i.right-i.left),i.visibleHeight=i.visibleWidth&&Math.max(0,i.bottom-i.top),i.visibleHeight||(i.visibleWidth=0),i.isVisible=0<i.visibleWidth&&0<i.visibleHeight,i.isContained=i.visibleWidth===i.width&&i.visibleHeight===i.height,i.isContained||(i.partlyHiddenSide=i.left===n[0].left?"left":"right"),i},function(u){"use strict";var o=window.Slick||{};(o=)).prototype.activateADA=o.prototype.addSlide=o.prototype.slickAdd=o.prototype.animateHeight=o.prototype.animateSlide=o.prototype.getNavTarget=o.prototype.asNavFor=o.prototype.applyTransition=o.prototype.autoPlay=o.prototype.autoPlayClear=o.prototype.autoPlayIterator=o.prototype.buildArrows=o.prototype.buildDots=o.prototype.buildOut=o.prototype.buildRows=o.prototype.checkResponsive=o.prototype.changeSlide=o.prototype.checkNavigable=o.prototype.cleanUpEvents=o.prototype.cleanUpSlideEvents=o.prototype.cleanUpRows=o.prototype.clickHandler=o.prototype.destroy=o.prototype.disableTransition=o.prototype.fadeSlide=o.prototype.fadeSlideOut=o.prototype.filterSlides=o.prototype.slickFilter=o.prototype.focusHandler=o.prototype.getCurrent=o.prototype.slickCurrentSlide=function(){return this.currentSlide},o.prototype.getDotCount=o.prototype.getLeft=o.prototype.getOption=o.prototype.slickGetOption=function(e){return this.options[e]},o.prototype.getNavigableIndexes=o.prototype.getSlick=function(){return this},o.prototype.getSlideCount=o.prototype.goTo=o.prototype.slickGoTo=o.prototype.init=o.prototype.initADA=o.prototype.initArrowEvents=o.prototype.initDotEvents=o.prototype.initSlideEvents=o.prototype.initializeEvents=o.prototype.initUI=o.prototype.keyHandler=o.prototype.lazyLoad=o.prototype.loadSlider=o.prototype.next=o.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},o.prototype.orientationChange=o.prototype.pause=o.prototype.slickPause=o.prototype.play=o.prototype.slickPlay=o.prototype.postSlide=o.prototype.prev=o.prototype.slickPrev=o.prototype.preventDefault=function(e){e.preventDefault()},o.prototype.progressiveLazyLoad=o.prototype.refresh=o.prototype.registerBreakpoints=o.prototype.reinit=o.prototype.resize=o.prototype.removeSlide=o.prototype.slickRemove=o.prototype.setCSS=o.prototype.setDimensions=o.prototype.setFade=o.prototype.setHeight=o.prototype.setOption=o.prototype.slickSetOption=o.prototype.setPosition=o.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=!0===e.options.vertical?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),t.WebkitTransition===undefined&&t.MozTransition===undefined&&t.msTransition===undefined||!0===e.options.useCSS&&(
e.cssTransitions=!0),e.options.fade&&("number"==typeof e.options.zIndex?e.options.zIndex<3&&(e.options.zIndex=3):e.options.zIndex=e.defaults.zIndex),t.OTransform!==undefined&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",t.perspectiveProperty===undefined&&t.webkitPerspective===undefined&&(e.animType=!1)),t.MozTransform!==undefined&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",t.perspectiveProperty===undefined&&t.MozPerspective===undefined&&(e.animType=!1)),t.webkitTransform!==undefined&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",t.perspectiveProperty===undefined&&t.webkitPerspective===undefined&&(e.animType=!1)),t.msTransform!==undefined&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",t.msTransform===undefined&&(e.animType=!1)),t.transform!==undefined&&!1!==e.animType&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=e.options.useTransform&&null!==e.animType&&!1!==e.animType},o.prototype.setSlideClasses=o.prototype.setupInfinite=o.prototype.interrupt=o.prototype.selectHandler=o.prototype.slideHandler=o.prototype.startLoad=o.prototype.swipeDirection=o.prototype.swipeEnd=function(){var e,t,i=this;if(i.dragging=!1,i.swiping=!1,i.scrolling)return i.scrolling=!1;if(i.interrupted=!1,i.shouldClick=!(10<i.touchObject.swipeLength),i.touchObject.curX===undefined)return!1;if(!0===i.touchObject.edgeHit&&i.$slider.trigger("edge",[i,i.swipeDirection()]),i.touchObject.swipeLength>=i.touchObject.minSwipe){switch(t=i.swipeDirection()){case"left":case"down":e=i.options.swipeToSlide?i.checkNavigable(i.currentSlide+i.getSlideCount()):i.currentSlide+i.getSlideCount(),i.currentDirection=0;break;case"right":case"up":e=i.options.swipeToSlide?i.checkNavigable(i.currentSlide-i.getSlideCount()):i.currentSlide-i.getSlideCount(),i.currentDirection=1}"vertical"!=t&&(i.slideHandler(e),i.touchObject={},i.$slider.trigger("swipe",[i,t]))}else i.touchObject.startX!==i.touchObject.curX&&(i.slideHandler(i.currentSlide),i.touchObject={})},o.prototype.swipeHandler=function(e){var t=this;if(!(!1===t.options.swipe||"ontouchend"in document&&!1===t.options.swipe||!1===t.options.draggable&&-1!==e.type.indexOf("mouse")))switch(t.touchObject.fingerCount=e.originalEvent&&e.originalEvent.touches!==undefined?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,!0===t.options.verticalSwiping&&(t.touchObject.minSwipe=t.listHeight/t.options.touchThreshold),e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},o.prototype.swipeMove=function(e){var t,i,n,s,r,a,o=this;return r=e.originalEvent!==undefined?e.originalEvent.touches:null,!(!o.dragging||o.scrolling||r&&1!==r.length)&&(t=o.getLeft(o.currentSlide),o.touchObject.curX=r!==undefined?r[0].pageX:e.clientX,o.touchObject.curY=r!==undefined?r[0].pageY:e.clientY,o.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(o.touchObject.curX-o.touchObject.startX,2))),a=Math.round(Math.sqrt(Math.pow(o.touchObject.curY-o.touchObject.startY,2))),!o.options.verticalSwiping&&!o.swiping&&4<a?!(o.scrolling=!0):(!0===o.options.verticalSwiping&&(o.touchObject.swipeLength=a),i=o.swipeDirection(),e.originalEvent!==undefined&&4<o.touchObject.swipeLength&&(o.swiping=!0,e.preventDefault()),s=(!1===o.options.rtl?1:-1)*(o.touchObject.curX>o.touchObject.startX?1:-1),!0===o.options.verticalSwiping&&(s=o.touchObject.curY>o.touchObject.startY?1:-1),n=o.touchObject.swipeLength,(o.touchObject.edgeHit=!1)===o.options.infinite&&(0===o.currentSlide&&"right"===i||o.currentSlide>=o.getDotCount()&&"left"===i)&&(n=o.touchObject.swipeLength*o.options.edgeFriction,o.touchObject.edgeHit=!0),!1===o.options.vertical?o.swipeLeft=t+n*s:o.swipeLeft=t+n*(o.$list.height()/o.listWidth)*s,!0===o.options.verticalSwiping&&(o.swipeLeft=t+n*s),!0!==o.options.fade&&!1!==o.options.touchMove&&(!0===o.animating?(o.swipeLeft=null,!1):void o.setCSS(o.swipeLeft))))},o.prototype.swipeStart=function(e){var t,i=this;if(i.interrupted=!0,1!==i.touchObject.fingerCount||i.slideCount<=i.options.slidesToShow)return!(i.touchObject={});e.originalEvent!==undefined&&e.originalEvent.touches!==undefined&&(t=e.originalEvent.touches[0]),i.touchObject.startX=i.touchObject.curX=t!==undefined?t.pageX:e.clientX,i.touchObject.startY=i.touchObject.curY=t!==undefined?t.pageY:e.clientY,i.dragging=!0},o.prototype.unfilterSlides=o.prototype.slickUnfilter=o.prototype.unload=o.prototype.unslick=o.prototype.updateArrows=o.prototype.updateDots=o.prototype.visibility=u.fn.slick=);var geoip2=function(){function Lookup(e,t,i,n){this.successCallback=e,this.errorCallback=t,this.geolocation=i&&i.hasOwnProperty("geolocation")?i.geolocation:navigator.geolocation,this.type=n}var exports={};Lookup.prototype.returnSuccess=Lookup.prototype.returnError=function(e){this.errorCallback&&"function"==typeof this.errorCallback&&(e||(e={error:"Unknown error"}),this.errorCallback(e))},Lookup.prototype.objectFromJSON=function(json){return"undefined"!=typeof window.JSON&&"function"==typeof window.JSON.parse?window.JSON.parse(json):eval("("+json+")")};var fillIns={country:[["continent","Object","names","Object"],["country","Object","names","Object"],["registered_country","Object","names","Object"],["represented_country","Object","names","Object"],["traits","Object"]],city:[["city","Object","names","Object"],["continent","Object","names","Object"],["country","Object","names","Object"],["location","Object"],["postal","Object"],["registered_country","Object","names","Object"],["represented_country","Object","names","Object"],["subdivisions","Array",0,"Object","names","Object"],["traits","Object"]]};return Lookup.prototype.fillInObject=Lookup.prototype.getGeoIPResult=function(){var e,i,n=this,t="//geoip-js.maxmind.com/geoip/v2.1/"+this.type+"/me?",s={referrer:location.protocol+"//"+location.hostname};if(!this.alreadyRan){for(e in this.alreadyRan=1,"Microsoft Internet Explorer"===navigator.appName&&window.XDomainRequest&&-1===navigator.appVersion.indexOf("MSIE 1")?(i=new XDomainRequest,t=window.location.protocol+t,i.onprogress=function(){}):(i=new window.XMLHttpRequest,t="https:"+t),s)s.hasOwnProperty(e)&&s[e]&&(t+=e+"="+encodeURIComponent(s[e])+"&");t=t.substring(0,t.length-1),i.open("GET",t,!0),i.onload=function(){if("undefined"==typeof i.status||200===i.status)n.returnSuccess(i.responseText);else{var e,t=i.hasOwnProperty("contentType")?i.contentType:i.getResponseHeader("Content-Type");if(/json/.test(t)&&i.responseText.length)try{e=n.objectFromJSON(i.responseText)}catch(s){e={code:"HTTP_ERROR",error:"The server returned a "+i.status+" status with an invalid JSON body."}}else e=i.responseText.length?{code:"HTTP_ERROR",error:"The server returned a "+i.status+" status with the following body: "+i.responseText}:{code:"HTTP_ERROR",error:"The server returned a "+i.status+" status but either the server did not return a body or this browser is a version of Internet Explorer that hides error bodies."};n.returnError(e)}},i.ontimeout=function(){n.returnError({code:"HTTP_TIMEOUT",error:"The request to the GeoIP2 web service timed out."})},i.onerror=i.send(null)}},exports.country=function(e,t,i){new Lookup(e,t,i,"country").getGeoIPResult()},exports.city=function(e,t,i){new Lookup(e,t,i,"city").getGeoIPResult()},exports.insights=exports}();!"undefined"!=typeof window?window:{},function(n,p){"use strict";var f,g;if(),!p||!p.getElementsByClassName)return{init:function(){},cfg:g,noSupport:!0};var i,r,s,e,m,v,d,_,t,y,b,w,S,C,T,k,a,h,E,I,A,P,x,M,D,L,o,l,N,c,O,R,U,u,H,B,$,F,j,z,G,V,W,q,Y,X=p.documentElement,Q=n.Date,K=n.HTMLPictureElement,J="addEventListener",Z="getAttribute",ee=n[J],te=n.setTimeout,ie=n.requestAnimationFrame||te,ne=n.requestIdleCallback,se=/^picture$/i,re=["load","error","lazyincluded","_lazyloaded"],ae={},oe=Array.prototype.forEach,le=ce=ue=de=he=pe=fe=ge=me=(V=[],W=G=[],q=(Y=._lsFlush=q,Y),ve=_e=ye=be=(a=/^img$/i,h=/^iframe$/i,E="onscroll"in n&&!/(gle|ing)bot/.test(navigator.userAgent),P=A=I=0,x=-1,M=D=L=l=_e(o=function(){var e,t,i,n,s,r,a,o,l,c,u,d,h=f.elements;if((_=g.loadMode)&&P<8&&(e=h.length)){for(t=0,x++;t<e;t++)if(h[t]&&!h[t]._lazyRace)if(!E||f.prematureUnveil&&f.prematureUnveil(h[t]))H(h[t]);else if((o=h[t][Z]("data-expand"))&&(r=1*o)||(r=A),c||(c=!g.expand||g.expand<1?500<X.clientHeight&&500<X.clientWidth?500:370:g.expand,u=(f._defEx=c)*g.expFactor,d=g.hFac,k=null,A<u&&P<1&&2<x&&2<_&&!p.hidden?(A=u,x=0):A=1<_&&1<x&&P<6?c:I),l!==r&&(y=innerWidth+r*d,b=innerHeight+r,a=-1*r,l=r),i=h[t].getBoundingClientRect(),(T=i.bottom)>=a&&(w=i.top)<=b&&(C=i.right)>=a*d&&(S=i.left)<=y&&(T||C||S||w)&&(g.loadHidden||D(h[t]))&&(v&&P<3&&!o&&(_<3||x<4)||L(h[t],r))){if(H(h[t]),s=!0,9<P)break}else!s&&v&&!n&&P<4&&x<4&&2<_&&(m[0]||g.preloadAfterLoad)&&(m[0]||!o&&(T||C||S||w||"auto"!=h[t][Z](g.sizesAttr)))&&(n=m[0]||h[t]);n&&!s&&H(n)}}),c=ve(N=,O=R=U=u=ve(function(t,e,i,n,s){var r,a,o,l,c,u;(c=he(t,"lazybeforeunveil",e)).defaultPrevented||(n&&(i?ce(t,g.autosizesClass):t.setAttribute("sizes",n)),a=t[Z](g.srcsetAttr),r=t[Z](g.srcAttr),s&&(l=(o=t.parentNode)&&se.test(o.nodeName||"")),u=e.firesLoad||"src"in t&&(a||r||l),c={target:t},ce(t,g.loadingClass),u&&(clearTimeout(d),d=te(M,2500),de(t,O,!0)),l&&oe.call(o.getElementsByTagName("source"),U),a?t.setAttribute("srcset",a):r&&!l&&(h.test(t.nodeName)?R(t,r):t.src=r),s&&(a||l)&&pe(t,{src:r})),t._lazyRace&&delete t._lazyRace,ue(t,g.lazyClass),me(!0)}),H=B=ye(,F={_:checkElems:l,unveil:H,_aLSL:$=),we=(r=ve(,s={_:checkElems:e=ye(,updateElem:s}),Se=return te(,f={cfg:g,autoSizer:we,loader:be,init:Se,uP:pe,aC:ce,rC:ue,hC:le,fire:he,gW:ge,rAF:me}}),this,function(){return [function(e,t,i){"use strict";function n(e,r,a,o){a=s.isArray(a)?a:[].slice.call(arguments,2);var t=l(e).each(function(e,t){var i=l(t),n=new d({el:i}),s=o||new u({input:i,eventBus:n,dropdownMenuContainer:r.dropdownMenuContainer,hint:void 0===r.hint||!!r.hint,minLength:r.minLength,autoselect:r.autoselect,autoselectOnBlur:r.autoselectOnBlur,openOnFocus:r.openOnFocus,templates:r.templates,debug:r.debug,clearOnSelected:r.clearOnSelected,cssClasses:r.cssClasses,datasets:a,keyboardShortcuts:r.keyboardShortcuts,appendTo:r.appendTo,autoWidth:r.autoWidth});i.data(c,s)});return t.autocomplete={},s.each(["open","close","getVal","setVal","destroy","getWrapper"],,t}var l=i(2);i(3).element=l;var s=i(4);s.isArray=l.isArray,s.isFunction=l.isFunction,s.isObject=l.isPlainObject,s.bind=l.proxy,s.each=s.map=l.map,s.mixin=l.extend,s.Event=l.Event;var c="aaAutocomplete",u=i(5),d=i(6);n.sources=u.sources,n.escapeHighlightedString=s.escapeHighlightedString;var r="autocomplete"in window,a=window.autocomplete;n.noConflict=e.exports=n},function(e){var t,J,i,n,s;t=window,e.exports=(J=t,function(u){y=Array.prototype.slice,b=u.isFunction,w=function(e){return"string"==typeof e},S={},o={},i="onfocusin"in J,n={focus:"focusin",blur:"focusout"},C={mouseenter:"mouseover",mouseleave:"mouseout"};o.click=o.mousedown=o.mouseup=o.mousemove="MouseEvents",u.event={add:c,remove:g},u.proxy=u.fn.bind=function(e,t,i){return this.on(e,t,i)},u.fn.unbind=function(e,t){return this.off(e,t)},u.fn.one=var l=function(){return!0},T=s=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,e={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};u.fn.delegate=function(e,t,i){return this.on(t,e,i)},u.fn.undelegate=u.fn.live=function(e,t){return u(document.body).delegate(this.selector,e,t),this},u.fn.die=u.fn.on=u.fn.off=u.fn.trigger=u.fn.triggerHandler="focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(,u.Event=(s=function(){unction a(e){return"function"==l(e)},x=P.concat,M=P.filter,D=P.slice,L=J.document,N={},t={},O={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},R=/^\s*<(\w+|!)[^>]*>/,U=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,H=/^(?:body|html)$/i,B=["val","css","html","text","data","width","height","offset"],$=["after","prepend","before","append"],F=L.createElement("table"),j=L.createElement("tr"),z={tr:L.createElement("tbody"),tbody:F,thead:F,tfoot:F,td:j,th:j,"*":L.createElement("div")},G=/complete|loaded|interactive/,V=/^[\w-]*$/,W={},q=W.toString,Y={},X=L.createElement("div"),Q={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},K=Array.isArray||return Y.matches=I=A=Y.fragment=function(e,t,i){var n,s,r;return U.test(e)&&(n=k(L.createElement(RegExp.$1))),n||(e.replace&&(e=e.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,"<$1></$2>")),t===C&&(t=R.test(e)&&RegExp.$1),t in z||(t="*"),(r=z[t]).innerHTML=""+e,n=k.each(D.call(r.childNodes),),c(i)&&(s=k(n),k.each(i,),n},Y.Z=Y.isZ=Y.init=(k=function(e,t){return Y.init(e,t)}).extend=Y.qsa=k.contains=L.documentElement.contains?k.type=l,k.isFunction=a,k.isWindow=r,k.isArray=K,k.isPlainObject=c,k.isEmptyObject=k.isNumeric=k.inArray=k.camelCase=I,k.trim=k.uuid=0,k.support={},k.expr={},k.noop=function(){},k.map=k.each=k.grep=J.JSON&&(k.parseJSON=JSON.parse),k.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),,k.fn={constructor:Y.Z,length:0,forEach:P.forEach,reduce:P.reduce,push:P.push,sort:P.sort,splice:P.splice,indexOf:P.indexOf,concat:map:slice:ready:get:toArray:size:function(){return this.length},remove:each:filter:add:is:not:has:eq:first:last:find:closest:parents:parent:children:contents:siblings:empty:pluck:show:replaceWith:wrap:wrapAll:wrapInner:unwrap:clone:hide:toggle:prev:function(e){return k(this.pluck("previousElementSibling")).filter(e||"*")},next:html:text:attr:removeAttr:prop:removeProp:data:val:offset:css:index:hasClass:addClass:removeClass:toggleClass:scrollTop:scrollLeft:position:offsetParent:,k.fn.detach=k.fn.remove,["width","height"].forEach(,$.forEach(function(t,a){var o=a%2;k.fn[t]=function(){var i,n,s=k.map(arguments,,r=1<this.length;return s.length<1?this:this.each(},k.fn[o?t+"To":"insert"+(a?"Before":"After")]=),Y.Z.prototype=g.prototype=k.fn,Y.uniq=A,Y.deserializeValue=w,k.zepto=Y,k}()),n=[],s.fn.remove=s),s)},function(e,t,i){"use strict";ar n,s=i(3);e.exports={isArray:null,isFunction:null,isObject:null,bind:null,each:null,map:null,mixin:null,isMsie:escapeRegExChars:isNumber:toStr:cloneDeep:error:every:any:function(i,n){var s=!1;return i&&this.each(i,function(e,t){if(n.call(null,e,t,i))return!(s=!0)}),s},getUniqueId:(n=0,,templatify:defer:noop:formatPrefix:className:escapeHighlightedString:},function(e,t,i){"use strict";function r(e){var i,t;if((e=e||{}).input||c.error("missing input"),this.isActivated=!1,this.debug=!!e.debug,this.autoselect=!!e.autoselect,this.autoselectOnBlur=!!e.autoselectOnBlur,this.openOnFocus=!!e.openOnFocus,this.minLength=c.isNumber(e.minLength)?e.minLength:1,this.autoWidth=void 0===e.autoWidth||!!e.autoWidth,this.clearOnSelected=!!e.clearOnSelected,e.hint=!!e.hint,e.hint&&e.appendTo)throw new Error("[autocomplete.js] hint and appendTo options can't be used at the same time");this.css=e.css=c.mixin({},f,e.appendTo?f.appendTo:{}),this.cssClasses=e.cssClasses=c.mixin({},f.defaultClasses,e.cssClasses||{}),this.cssClasses.prefix=e.cssClasses.formattedPrefix=c.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix),this.listboxId=e.listboxId=[this.cssClasses.root,"listbox",c.getUniqueId()].join("-");var n=a(e);this.$node=n.wrapper;var s=this.$input=n.input;i=n.menu,t=n.hint,e.dropdownMenuContainer&&u.element(e.dropdownMenuContainer).css("position","relative").append(i.css("top","0")),s.on("blur.aa",,i.on("mousedown.aa",function(e){e.preventDefault()}),this.eventBus=e.eventBus||new d({el:s}),this.dropdown=new r.Dropdown({appendTo:e.appendTo,wrapper:this.$node,menu:i,datasets:e.datasets,templates:e.templates,cssClasses:e.cssClasses,minLength:this.minLength}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onSync("shown",this._onShown,this).onSync("empty",this._onEmpty,this).onSync("redrawn",this._onRedrawn,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new r.Input({input:s,hint:t}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._bindKeyboardShortcuts(e),this._setLanguageDirection()}function a(e){var t,i,n,s;t=u.element(e.input),i=u.element(p.wrapper.replace("%ROOT%",e.cssClasses.root)).css(e.css.wrapper),e.appendTo||"block"!==t.css("display")||"table"!==t.parent().css("display")||i.css("display","table-cell");var r=p.dropdown.replace("%PREFIX%",e.cssClasses.prefix).replace("%DROPDOWN_MENU%",e.cssClasses.dropdownMenu);n=u.element(r).css(e.css.dropdown).attr({role:"listbox",id:e.listboxId}),e.templates&&e.templates.dropdownMenu&&n.html(c.templatify(e.templates.dropdownMenu)()),(s=t.clone().css(e.css.hint).css(o(t))).val("").addClass(c.className(e.cssClasses.prefix,e.cssClasses.hint,!0)).removeAttr("id name placeholder required").prop("readonly",!0).attr({"aria-hidden":"true",autocomplete:"off",spellcheck:"false",tabindex:-1}),s.removeData&&s.removeData(),t.data(l,{"aria-autocomplete":t.attr("aria-autocomplete"),"aria-expanded":t.attr("aria-expanded"),"aria-owns":t.attr("aria-owns"),autocomplete:t.attr("autocomplete"),dir:t.attr("dir"),role:t.attr("role"),spellcheck:t.attr("spellcheck"),style:t.attr("style"),type:t.attr("type")}),t.addClass(c.className(e.cssClasses.prefix,e.cssClasses.input,!0)).attr({autocomplete:"off",spellcheck:!1,role:"combobox","aria-autocomplete":e.datasets&&e.datasets[0]&&e.datasets[0].displayKey?"both":"list","aria-expanded":"false","aria-label":e.ariaLabel,"aria-owns":e.listboxId}).css(e.hint?e.css.input:e.css.inputWithNoHint);try{t.attr("dir")||t.attr("dir","auto")}catch(e){}return(i=e.appendTo?i.appendTo(u.element(e.appendTo).eq(0)).eq(0):t.wrap(i).parent()).prepend(e.hint?s:null).append(n),{wrapper:i,input:t,hint:s,menu:n}}r l="aaAttrs",c=i(4),u=i(3),d=i(6),h=i(7),s=i(16),p=i(18),f=i(19);c.mixin(r.prototype,{_bindKeyboardShortcuts:_onSuggestionClicked:_onCursorMoved:_onCursorRemoved:_onDatasetRendered:_onOpened:_onEmpty:function(){this.eventBus.trigger("empty")},_onRedrawn:_onShown:_onClosed:_onFocused:_onBlurred:_onEnterKeyed:_onTabKeyed:_onEscKeyed:_onUpKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:_onQueryChanged:_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:_updateHint:_autocomplete:_select:function(e){void 0!==e.value&&this.input.setQuery(e.value),this.clearOnSelected?this.setVal(""):this.input.setInputValue(e.value,!0),this._setLanguageDirection(),!1===this.eventBus.trigger("selected",e.raw,e.datasetName).isDefaultPrevented()&&(this.dropdown.close(),c.defer(c.bind(this.dropdown.empty,this.dropdown)))},open:close:function(){this.dropdown.close()},setVal:getVal:function(){return this.input.getQuery()},destroy:getWrapper:),r.Dropdown=s,r.Input=h,r.sources=i(20),e.exports=r},function(e,t,i){"use strict";function n(e){var t,i,n,s,r=this;(e=e||{}).input||l.error("input is missing"),t=l.bind(this._onBlur,this),i=l.bind(this._onFocus,this),n=l.bind(this._onKeydown,this),s=l.bind(this._onInput,this),this.$hint=c.element(e.hint),this.$input=c.element(e.input).on("blur.aa",t).on("focus.aa",i).on("keydown.aa",n),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=l.noop),l.isMsie()?this.$input.on("keydown.aa keypress.aa cut.aa paste.aa",:this.$input.on("input.aa",s),this.query=this.$input.val(),this.$overflowHelper=a(this.$input)} o;o={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};var l=i(4),c=i(3),u=i(8);n.normalizeQuery=l.mixin(n.prototype,u,{_onBlur:_onFocus:function(){this.trigger("focused")},_onKeydown:_onInput:function(){this._checkInputValue()},_managePreventDefault:_shouldTrigger:_checkInputValue:function(){var e,t,i;i=!(!(t=s(e=this.getInputValue(),this.query))||!this.query)&&this.query.length!==e.length,this.query=e,t?i&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(e){this.query=e},getInputValue:function(){return this.$input.val()},setInputValue:expand:function(){this.$input.attr("aria-expanded","true")},collapse:function(){this.$input.attr("aria-expanded","false")},setActiveDescendant:removeActiveDescendant:function(){this.$input.removeAttr("aria-activedescendant")},resetInputValue:getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:getLanguageDirection:hasOverflow:isCursorAtEnd:destroy:),e.exports=n},function(e,t,i){"use strict";unction s(e,t,i){return n.call(this,"async",e,t,i)}=i(9),d=/\s+/;e.exports={onSync:r,onAsync:s,off:a,trigger:o}},function(e,t,i){"use strict";function n(){o&&l&&(o=!1,l.length?h=l.concat(h):d=-1,h.length&&s())}unction r(e,t){this.fun=e,this.array=t}function a(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];h.push(new r(e,t)),p||o||(p=!0,c())}for(var o,l,c,u=[i(10),i(12),i(13),i(14),i(15)],d=-1,h=[],p=!1,f=-1,g=u.length;++f<g;)if(u[f]&&u[f].test&&u[f].test()){c=u[f].install(s);break}r.prototype.run=e.exports=a},function(e){function i(){throw new Error("setTimeout has not been defined")}on t(){}var c,u,d=e.exports={};!);var h,p=[],f=!1,g=-1;d.nextTick=l.prototype.run=d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=t,d.addListener=t,d.once=t,d.off=t,d.removeListener=t,d.removeAllListeners=t,d.emit=t,d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,i){"use strict";function n(t){var e,i,n,s=this;(t=t||{}).menu||l.error(
"menu is required"),l.isArray(t.datasets)||l.isObject(t.datasets)||l.error("1 or more datasets required"),t.datasets||l.error("datasets is required"),this.isOpen=!1,this.isEmpty=!0,this.minLength=t.minLength||0,this.templates={},this.appendTo=t.appendTo||!1,this.css=l.mixin({},u,t.appendTo?u.appendTo:{}),this.cssClasses=t.cssClasses=l.mixin({},u.defaultClasses,t.cssClasses||{}),this.cssClasses.prefix=t.cssClasses.formattedPrefix||l.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix),e=l.bind(this._onSuggestionClick,this),i=l.bind(this._onSuggestionMouseEnter,this),n=l.bind(this._onSuggestionMouseLeave,this);var r=l.className(this.cssClasses.prefix,this.cssClasses.suggestion);this.$menu=c.element(t.menu).on("mouseenter.aa",r,i).on("mouseleave.aa",r,n).on("click.aa",r,e),this.$container=t.appendTo?t.wrapper:this.$menu,t.templates&&t.templates.header&&(this.templates.header=l.templatify(t.templates.header),this.$menu.prepend(this.templates.header())),t.templates&&t.templates.empty&&(this.templates.empty=l.templatify(t.templates.empty),this.$empty=c.element('<div class="'+l.className(this.cssClasses.prefix,this.cssClasses.empty,!0)+'"></div>'),this.$menu.append(this.$empty),this.$empty.hide()),this.datasets=l.map(t.datasets,,l.each(this.datasets,,t.templates&&t.templates.footer&&(this.templates.footer=l.templatify(t.templates.footer),this.$menu.append(this.templates.footer()));var a=this;c.element(window).resize(function(){a._redraw()})}ar l=i(4),c=i(3),s=i(8),r=i(17),u=i(19);l.mixin(n.prototype,s,{_onSuggestionClick:_onSuggestionMouseEnter:_onSuggestionMouseLeave:function(e){e.relatedTarget&&0<c.element(e.relatedTarget).closest("."+l.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).length||(this._removeCursor(),this.trigger("cursorRemoved"))},_onRendered:_hide:function(){this.$container.hide()},_show:_redraw:_getSuggestions:_getCursor:_setCursor:_removeCursor:_moveCursor:function(e){var t,i,n,s;if(this.isOpen){if(i=this._getCursor(),t=this._getSuggestions(),this._removeCursor(),-1==(n=((n=t.index(i)+e)+1)%(t.length+1)-1))return void this.trigger("cursorRemoved");n<-1&&(n=t.length-1),this._setCursor(s=t.eq(n),!0),this._ensureVisible(s)}},_ensureVisible:close:open:setLanguageDirection:moveCursorUp:moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:getCurrentCursor:function(){return this._getCursor().first()},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:cursorTopSuggestion:update:empty:isVisible:destroy:),n.Dataset=r,e.exports=n},function(e,t,i){"use strict";function n(e){(e=e||{}).templates=e.templates||{},e.source||h.error("missing source"),e.name&&!a(e.name)&&h.error("invalid dataset name: "+e.name),this.query=null,this._isEmpty=!0,this.highlight=!!e.highlight,this.name=void 0===e.name||null===e.name?h.getUniqueId():e.name,this.source=e.source,this.displayFn=s(e.display||e.displayKey),this.debounce=e.debounce,this.templates=r(e.templates,this.displayFn),this.css=h.mixin({},o,e.appendTo?o.appendTo:{}),this.cssClasses=e.cssClasses=h.mixin({},o.defaultClasses,e.cssClasses||{}),this.cssClasses.prefix=e.cssClasses.formattedPrefix||h.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix);var t=h.className(this.cssClasses.prefix,this.cssClasses.dataset);this.$el=e.$menu&&0<e.$menu.find(t+"-"+this.name).length?p.element(e.$menu.find(t+"-"+this.name)[0]):p.element(f.dataset.replace("%CLASS%",this.name).replace("%PREFIX%",this.cssClasses.prefix).replace("%DATASET%",this.cssClasses.dataset)),this.$menu=e.$menu,this.clearCachedSuggestions()} c="aaDataset",u="aaValue",d="aaDatum",h=i(4),p=i(3),f=i(18),o=i(19),l=i(8);n.extractDatasetName=function(e){return p.element(e).data(c)},n.extractValue=n.extractDatum=h.mixin(n.prototype,l,{_render:function(t,a){unction i(){ar t,i,n=[].slice.call(arguments,0),s=this,r=f.suggestions.replace("%PREFIX%",this.cssClasses.prefix).replace("%SUGGESTIONS%",this.cssClasses.suggestions);return t=p.element(r).css(this.css.suggestions),i=h.map(a,e),t.append.apply(t,i),t}function n(){var e=[].slice.call(arguments,0);return e=[{query:t,isEmpty:!r}].concat(e),o.templates.header.apply(this,e)}f(this.$el){var r,o=this,l=[].slice.call(arguments,2);this.$el.empty(),r=a&&a.length,this._isEmpty=!r,!r&&this.templates.empty?this.$el.html(e.apply(this,l)).prepend(o.templates.header?n.apply(this,l):null).append(o.templates.footer?s.apply(this,l):null):r&&this.$el.html(i.apply(this,l)).prepend(o.templates.header?n.apply(this,l):null).append(o.templates.footer?s.apply(this,l):null),this.$menu&&this.$menu.addClass(this.cssClasses.prefix+(r?"with":"without")+"-"+this.name).removeClass(this.cssClasses.prefix+(r?"without":"with")+"-"+this.name),this.trigger("rendered",t)}},getRoot:function(){return this.$el},update:cacheSuggestions:shouldFetchFromCache:clearCachedSuggestions:cancel:function(){this.canceled=!0},clear:isEmpty:function(){return this._isEmpty},destroy:),e.exports=n},function(e,t,i){"use strict";var s=i(4),r=i(22),a=i(23);e.exports=function(t,n){function e(e,i){t.search(e,n,}var i=a(t.as._ua);return i&&3<=i[0]&&20<i[1]&&((n=n||{}).additionalUA="autocomplete.js "+r),e}},function(e){"use strict";e.exports=,function(e,t,i){"use strict";var d=i(4),h=i(22),p=i(23);e.exports=function(t,n,s,l){function e(e,o){t.search(e,n,function(e,r){if(e)d.error(e.message);else{if(0<r.hits.length){var a=r.hits[0],t=d.mixin({hitsPerPage:0},s);delete t.source,delete t.index;var i=p(u.as._ua);return i&&3<=i[0]&&20<i[1]&&(n.additionalUA="autocomplete.js "+h),void u.search(c(a),t,}o([])}})}var i=p(t.as._ua);if(i&&3<=i[0]&&20<i[1]&&((n=n||{}).additionalUA="autocomplete.js "+h),!s.source)return d.error("Missing 'source' key");var c=d.isFunction(s.source)?s.source:if(!s.index)return d.error("Missing 'index' key");var u=s.index;return l=l||{},e}}])}),window.AlgoliaAnalyticsObject="aa",window.aa=window.aa||this,function(e){"use strict";function i(e){var n,t=e.AlgoliaAnalyticsObject;if(t){var s=(n=this,function(e){for(var t=[],i=arguments.length-1;0<i--;)t[i]=arguments[i+1];e&&p(n[e])&&n[e].apply(n,t)}),i=e[t];i.queue=i.queue||[];var r=i.queue;r.forEach(function(e){var t=[].slice.call(e),i=t[0],n=t.slice(1);s.apply(void 0,[i].concat(n))}),r.push=}ar s,r,a,o,n=function(){try{return Boolean(navigator.cookieEnabled)}catch(e){return!1}},l=c=u=d=function(e){return"string"==typeof e},h=function(e){return"number"==typeof e},p=function(e){return"function"==typeof e},f="insights-js (1.6.3)",g=["de","us"],m=2592e6,v=_="_ALGOLIA",y=b=w="ANONYMOUS_USER_TOKEN";Object.keys||(Object.keys=(s=Object.prototype.hasOwnProperty,r=!{toString:null}.propertyIsEnumerable("toString"),o=(a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,),"function"!=typeof Object.assign&&(Object.assign=function(e){var t=arguments;if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),n=1;n<arguments.length;n++){var s=t[n];if(null!=s)for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(i[r]=s[r])}return i});var S=function(e){var c,t=e.requestFn;this._ua="",this._uaURIEncoded="",this.version="1.6.3",this._hasCredentials=!1,this.sendEvent=(c=t,function(e,t){if(!this._userHasOptedOut){if(!this._hasCredentials)throw new Error("Before calling any methods on the analytics, you first need to call the 'init' function with appId and apiKey parameters");if(""===t.userToken||""===this._userToken)throw new Error("`userToken` cannot be an empty string.");var i=t.userToken||this._userToken;if(u(i))throw new Error("Before calling any methods on the analytics, you first need to call 'setUserToken' function or include 'userToken' in the event payload.");if(!d(t.index))throw new TypeError("expected required parameter `index` to be a string");if(!d(t.eventName))throw new TypeError("expected required parameter `eventName` to be a string");if(!u(t.userToken)&&!d(t.userToken))throw new TypeError("expected optional parameter `userToken` to be a string");var n={eventType:e,eventName:t.eventName,userToken:i,index:t.index};if(!u(t.timestamp)){if(!h(t.timestamp))throw new TypeError("expected optional parameter `timestamp` to be a number");n.timestamp=t.timestamp}if(!u(t.queryID)){if(!d(t.queryID))throw new TypeError("expected optional parameter `queryID` to be a string");n.queryID=t.queryID}if(!u(t.objectIDs)){if(!Array.isArray(t.objectIDs))throw new TypeError("expected optional parameter `objectIDs` to be an array");n.objectIDs=t.objectIDs}if(!u(t.positions)){if(!Array.isArray(t.positions))throw new TypeError("expected optional parameter `positions` to be an array");if(u(t.objectIDs))throw new Error("cannot use `positions` without providing `objectIDs`");if(t.objectIDs.length!==t.positions.length)throw new Error("objectIDs and positions need to be of the same size");n.positions=t.positions}if(!u(t.filters)){if(!u(t.objectIDs))throw new Error("cannot use `objectIDs` and `filters` for the same event");if(!Array.isArray(t.filters))throw new TypeError("expected optional parameter `filters` to be an array");n.filters=t.filters}if(u(t.objectIDs)&&u(t.filters))throw new Error("expected either `objectIDs` or `filters` to be provided");return s=c,r=this._appId,a=this._apiKey,o=this._uaURIEncoded,l=this._endpointOrigin,s(l+"/1/events?X-Algolia-Application-Id="+r+"&X-Algolia-API-Key="+a+"&X-Algolia-Agent="+o,{events:[n]})}var s,r,a,o,l}).bind(this),this.init=bind(this),this.initSearch=bind(this),this.addAlgoliaAgent=bind(this),this.ANONYMOUS_USER_TOKEN=w,this.setUserToken=bind(this),this.getUserToken=bind(this),this.onUserTokenChange=bind(this),this.clickedObjectIDsAfterSearch=bind(this),this.clickedObjectIDs=function(e){if(!e)throw new Error("No params were sent to clickedObjectIDs function, please provide `objectIDs` to be reported");if(!e.objectIDs)throw new Error("required `objectIDs` parameter was not sent, click event can not be properly sent without");this.sendEvent("click",e)}.bind(this),this.clickedFilters=function(e){if(!e)throw new Error("No params were sent to clickedFilters function, please provide `filters` to be reported");if(!e.filters)throw new Error("required `filters` parameter was not sent, click event can not be properly sent without");this.sendEvent("click",e)}.bind(this),this.convertedObjectIDsAfterSearch=bind(this),this.convertedObjectIDs=function(e){if(!e)throw new Error("No params were sent to convertedObjectIDs function, please provide `objectIDs` to be reported");if(!e.objectIDs)throw new Error("required objectIDs parameter was not sent, conversion event can not be properly sent without");this.sendEvent("conversion",e)}.bind(this),this.convertedFilters=function(e){if(!e)throw new Error("No params were sent to convertedFilters function, please provide `filters` to be reported");if(!e.filters)throw new Error("required filters parameter was not sent, conversion event can not be properly sent without");this.sendEvent("conversion",e)}.bind(this),this.viewedObjectIDs=function(e){if(!e)throw new Error("No params were sent to viewedObjectIDs function, please provide `objectIDs` to be reported");if(!e.objectIDs)throw new Error("required objectIDs parameter was not sent, view event can not be properly sent without");this.sendEvent("view",e)}.bind(this),this.viewedFilters=bind(this),this._get=bind(this)},C=T=k=t());e.createInsightsClient=t,e["default"]=k,Object.defineProperty(e,"__esModule",{value:!0})}),Class("OlarkClient")({_init:function _init(){if(!window._pl_isUserLogged)return window.olark=function(){},new Promise(;if(!0!==window.apiPage){var e=OlarkClient._fetch();return e.then(OlarkClient._handleLiveChat),OlarkClient._init=function(){return e},OlarkClient._init()}},_fetch:function _fetch(){return new Promise(function(e){var t,i,n,s,r,a;window.olark||(t=window,i=document,n="static.olark.com/jsclient/loader.js",t.olark||(s="script",a=i.createElement(s),s=i.getElementsByTagName(s)[0],a.async=1,a.src="//"+n,s.parentNode.insertBefore(a,s),(a=t.olark=function(){r.s.push(arguments),r.t.push(+new Date)}).extend=a.identify=a.configure=function(e,t){a("configure",e,t),r.c[e]=t},r=a._={s:[],t:[+new Date],c:{},l:n})),olark("api.chat.onReady",function(){e("Olark Available")}),olark.identify("1989-302-10-7144")})},_show:function _show(){olark("api.box.expand")},_sendMessage:function _sendMessage(e){olark("api.chat.sendMessageToVisitor",{body:e})},_sendNotificationToOperator:show:function show(){OlarkClient._init().then(OlarkClient._show)["catch"](function(){})},sendMessage:function sendMessage(e){OlarkClient._init().then(function(){OlarkClient._sendMessage(e)})},sendNotificationToOperator:function sendNotificationToOperator(e){return OlarkClient._init().then(function(){OlarkClient._sendNotificationToOperator(e)})},_hide:hide:_handleLiveChat:function _handleLiveChat(){var e="function"==typeof window.olark&&(window.olark("api.chat.onReady",function(){$(document).bind("shown.bs.modal",e)}),window.olark("api.box.onExpand",,window.olark("api.box.onShrink",)},onBeginConversation:function onBeginConversation(e){OlarkClient._init().then(}}),Class("AlgoliaAnalyticsClient")({TEMPLATE_INDEX:window.algoliaConfig.niceTemplatesIndex,FONTS_INDEX:window.algoliaConfig.niceFontsIndex,ASSET_INDEX:window.algoliaConfig.niceAssetsIndex,algolia:aa("init",{appId:window.algoliaConfig.appId,apiKey:window.algoliaConfig.readApiKey}),identifyLoggedInUser:function identifyLoggedInUser(e){aa("setUserToken",e)},sendClickEvent:function sendClickEvent(e,t,i,n,s){var r,a=Helpers.App.getUser(),o={index:e||this.TEMPLATE_INDEX,eventName:t||"click_event",objectIDs:[n]};r="clickedObjectIDs",i&&(o.queryID=i,o.positions=[s],r="clickedObjectIDsAfterSearch"),a.id&&(o.userToken=a.id.toString()),aa(r,o)},sendMulticontrolClickEvent:function sendMulticontrolClickEvent(e,t,i){this.sendClickEvent(this.ASSET_INDEX,"multicontrolClick",e,t,i)},sendStageClickEvent:function sendStageClickEvent(e,t){var i,n=window.algoliaQuery&&window.algoliaQuery.queryId,s=window.algoliaQuery&&window.algoliaQuery.IndexName;s&&(i="stageClick",n&&(i="stageSearchClick"),this.sendClickEvent(s,i,n,e,t))},sendConversionEvent:function sendConversionEvent(e){var t,i,n;t="convertedObjectIDs",n={index:e.index,eventName:e.eventName,objectIDs:[e.objectID]},(i=Helpers.App.getUser()).id&&(n.userToken=i.id.toString()),e.queryID&&(n.queryID=e.queryID,t="convertedObjectIDsAfterSearch"),aa(t,n)},sendStageConversionEvent:function sendStageConversionEvent(e,t,i){var n;e&&(n={index:e,eventName:"stageConversion",objectID:t},i&&(n.eventName="stageSearchConversion",n.queryID=i),this.sendConversionEvent(n))}}),Module("AlgoliaAnalyticsSupport")({prototype:{_algoliaAnalyticsQuery:{},_setAlgoliaAnalyticsQueryFromUrl:function _setAlgoliaAnalyticsQueryFromUrl(){var e,t;(e=Helpers.App.getUrlParam("queryId"))&&(this._algoliaAnalyticsQuery.queryId=e,Helpers.App.replaceUrlParam("queryId","")),(t=Helpers.App.getUrlParam("IndexName"))&&(this._algoliaAnalyticsQuery.indexName=t,Helpers.App.replaceUrlParam("IndexName",""))},_getUrlWithAlgoliaAnalyticsQueryParams:function _getUrlWithAlgoliaAnalyticsQueryParams(e){var t,i,n;return window.algoliaQuery?(t=e,n=[],i=(t=Helpers.App.removeParams(["queryId","IndexName"],t)).indexOf("?")<0?"?":"&",t+=i,window.algoliaQuery.queryId&&n.push("queryId="+window.algoliaQuery.queryId),window.algoliaQuery.IndexName&&n.push("IndexName="+window.algoliaQuery.IndexName),t+=n.join("&")):e},_setAlgoliaAnalyticsBindings:function _setAlgoliaAnalyticsBindings(){var t;(t=this).element.find("a").bind("click",function(){var e;this.href&&window.algoliaQuery&&(e=t._getUrlWithAlgoliaAnalyticsQueryParams(this.href),this.href=e)})},sendAlgoliaAnalyticsStageConversionEvent:function sendAlgoliaAnalyticsStageConversionEvent(){window._stageData&&window._stageData.stage_data&&AlgoliaAnalyticsClient.sendStageConversionEvent(this._algoliaAnalyticsQuery.indexName,window._stageData.stage_data.id,this._algoliaAnalyticsQuery.queryId)}}}),Module(Helpers,"Resolutions")({_data:null,setActive:function setActive(e){this._data=null,this._data=e},getActive:function getActive(){return this._data},_comp:!1,setIsComp:function setIsComp(e){this._comp=e},isComp:function isComp(){return this._getComp()},_getComp:function _getComp(){return this._comp}}),Module(Helpers,"UserSegment")({_handleGetSegment:function _handleGetSegment(e,t){var i,n,s,r,a;e?(n="noSegment",s="true",r=1):(n="userSegment",s=t,r=3),(i=new Date).setTime(i.getTime()+24*r*60*60*1e3),a=i.toUTCString(),Helpers.UserSegment.removeCookies(),document.cookie=n+"="+s+";expires="+a+";path=/"},request:function request(){var e={url:"/api/v2/analytics/segment",method:"GET"},t=Helpers.RequestConfig.prepareConfig(e);return $.ajax(t).done(function(e){Helpers.UserSegment.pingSegment(e.url,0,Helpers.UserSegment._handleGetSegment)})},getCookie:function getCookie(e){for(var t=e+"=",i=decodeURIComponent(document.cookie).split(";"),n=0;n<i.length;n++){for(var s=i[n];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(t))return s.substring(t.length,s.length)}return null},getUserSegmentCookie:function getUserSegmentCookie(){return Helpers.UserSegment.getCookie("userSegment")},getUserLocationCookie:function getUserLocationCookie(){return Helpers.UserSegment.getCookie("gtmc_user_location")},getNoSegmentCookie:pingSegment:function pingSegment(t,i,n){var e=function(e){e?n(!1,e):4!==i?setTimeout(function(){Helpers.UserSegment.pingSegment(t,++i,n)},1e3):n(!0)},s=function(e,t,i){Helpers.GlobalEventTracker.track("pingSegmentFailed",{response:e.responseText,status:t,error:i})};return $.get(t).done(e).fail(s)},removeCookies:),Module(Helpers,"RequestConfig")({URL_MAP:{"/login":{api:"/api/v3/login",placeit:"/login"},"/sso/verify_signin_token":{api:"/api/v3/verify_signin_token",placeit:"/sso/verify_signin_token"},"/sso/migrate_user":{api:"/api/v3/migrate_user",placeit:"/sso/migrate_user"},"/subscriptions/{{token}}/transaction":{api:"/api/v3/subscriptions/transaction",placeit:"/subscriptions/{{token}}/transaction"},"/subscriptions/quick_transaction":{api:"/api/v3/subscriptions/quick_transaction",placeit:"/subscriptions/quick_transaction"},"/subscriptions/sign":{api:"/api/v3/subscriptions/sign",placeit:"/subscriptions/sign"},"/api/v2/analytics/segment":{api:"/api/v3/analytics/segment",placeit:"/api/v2/analytics/segment"},"/api/v2/analytics/track":{api:"/api/v3/analytics/track",placeit:"/api/v2/analytics/track"},"/purchases/show":{api:"/api/v3/purchases/show",placeit:"/purchases/show"},"/api/v1/base/processing":{api:"/api/v3/purchases/processing",placeit:"/api/v1/base/processing"}},prepareConfig:function prepareConfig(e){var t=Object.assign({},e);return t.url=Helpers.RequestConfig.getURL(Helpers.RequestConfig.URL_MAP,Helpers.RequestConfig.apiRouteStrategy,e.url),t},getURL:function getURL(e,t,i){var n=t();return e[i]&&e[i][n]?e[i][n]:i},apiRouteStrategy:),Module(Helpers,"App")({_user:null,_giftModal:null,_trackerId:null,_subscription:!1,_subscriptionPeriod:"monthly",_admin:!1,_purchases:!1,_stageTypes:{},_coupon:null,_nBookmarks:null,_CDNRoundRobin:0,breakpoint:1024,_pageType:{},_userUploadsBaseUrl:{development:"https://placeit-user-uploads-staging.s3-accelerate.amazonaws.com",staging:"https://placeit-user-uploads-staging.s3-accelerate.amazonaws.com",production:"https://placeit-user-uploads.s3-accelerate.amazonaws.com"},_subscribeFromModal:null,_nextLoginAction:null,_mobileHelpTextCounter:0,_userType:{},_floatingContainerState:!1,_nextLoadAction:null,getNextLoadAction:function getNextLoadAction(e){var t=Helpers.App.getCookie(e);return""===t?this._nextLoadAction:t},setNextLoadAction:function setNextLoadAction(e,t){null!==t?(Helpers.App.setCookie(e,t,1),
this._nextLoadAction=t):Helpers.App.clearNextLoginAction()},clearNextLoadAction:function clearNextLoadAction(e){Helpers.App.deleteCookie(e),this._nextLoadAction=null},getNextLoginAction:function getNextLoginAction(){var e=Helpers.App.getCookie("nextLoginAction");return""===e?this._nextLoginAction:e},setNextLoginAction:function setNextLoginAction(e){null!==e?(Helpers.App.setCookie("nextLoginAction",e,1),this._nextLoginAction=e):Helpers.App.clearNextLoginAction()},clearNextLoginAction:function clearNextLoginAction(){Helpers.App.deleteCookie("nextLoginAction"),this._nextLoginAction=null},getSubscribeFromModal:function getSubscribeFromModal(){return this._subscribeFromModal},setSubscribeFromModal:function setSubscribeFromModal(e){this._subscribeFromModal=e},getUserUploadsUrl:cdnBasePath:function cdnBasePath(){return this._CDNRoundRobin=this._CDNRoundRobin%3+1,1===this._CDNRoundRobin?window.NICEV4_ASSETS.protocol+"://"+window.NICEV4_ASSETS.hostname.replace(/#/,""):window.NICEV4_ASSETS.protocol+"://"+window.NICEV4_ASSETS.hostname.replace(/#/,"-"+this._CDNRoundRobin)},niceProtocolHostname:setTrackerId:function setTrackerId(e){this._trackerId=e,!0===CookiesUtils.getStatisticsSetting()&&$.cookie("pl_tracker_id_v2",e,{path:"/",expires:3650})},getTrackerId:function getTrackerId(){return this._trackerId||$.cookie("pl_tracker_id_v2")},resetOldTrackerId:setUser:function setUser(e){this._user=e},getUser:function getUser(){return this._user},setBookmarksCount:function setBookmarksCount(e){this._nBookmarks=e},getBookmarksCount:function getBookmarksCount(){return this._nBookmarks},setSubscription:function setSubscription(e){this._subscription=e},getSubscription:function getSubscription(){return this._subscription},isSubscriptionValid:function isSubscriptionValid(){return this._subscription&&!1!==this._subscription&&!this._subscription.is_paused&&!0!==window.isPastDue},subscriptionIsActive:function subscriptionIsActive(){return this._subscription?this._subscription.is_active:!!window._pl_subscriptionIsActive},setAdmin:function setAdmin(e){this._admin=e},isAdmin:function isAdmin(){return this._admin},setPurchases:function setPurchases(e){this._purchases=e},hasPurchased:function hasPurchased(){return this._purchases},isLoggedIn:function isLoggedIn(){var e=document.cookie.match(/logged_session=([^;]+)/),t=!1;return null!==e&&null!==this.getUser()&&null!==this.getUser().email&&(t=e[1]),!(!t&&!Helpers.App.isLoggedInWithToken())},isLoggedInWithToken:function isLoggedInWithToken(){return!(null===this.getUser()||null===this.getUser().email||!window.apiPage)},isWindows:flashInstalled:_getPurchases:function _getPurchases(t){var e="";Helpers.App.isGuestCheckoutExperimentActive()&&(e="?guest_token="+Service.GuestCheckout.getInstance().getToken());var i={url:"/purchases/show"+e,type:"get",dataType:"json",success:function(e){e.subscriptions&&Helpers.App.setSubscription(e.subscriptions),e.bulk_purchases&&Registry.UserBulkPackages.set(e.bulk_purchases),e.credits&&Registry.Credits.set(e.credits),e.account_data&&e.account_data.is_past_due&&(window.isPastDue=!0,this._setAccountData(e.account_data),this.setupUpdateCardModal()),t(e)}.bind(this)},n=Helpers.RequestConfig.prepareConfig(i);$.ajax(n)},getStageTypes:function getStageTypes(){return this._stageTypes},getStageTypesByName:function getStageTypesByName(e){var t=this.getStageTypes();for(var i in t)if(t.hasOwnProperty(i)&&t[i].name===e)return t[i];return!1},isHTTP:function isHTTP(){return"http:"===window.location.protocol},showPlansModal:function showPlansModal(e){var t,i,n,s,r;if((t=window.location.host,i=window.location.pathname,n=this.isHTTP(),s="https://"+t+"/account?show_plans=true",r=window.location.href,"development"!==window.environment)&&(n&&Helpers.App.isLoggedIn()&&"/account"!==i))return s+="&referred="+r,Helpers.StageType.getStageInfo()&&Helpers.StageType.isLiveImage()&&page.stage.queuedLiveimageData&&(s+="&remote="+page.stage.queuedLiveimageData.remote_url+"&stage="+page.stage.queuedLiveimageData.stage_id+"&bg="+page.stage.queuedLiveimageData.background_id),void(window.location=s);window.page.showSubscriptionPlans(e)},removeParam:function removeParam(e,t){var i=(t=t||window.location.href).split("?")[0],n=[],s=t.match(/([^(?)]*.)(.*)/)[2];if(""!==s){for(var r=(n=s.split("&")).length-1;0<=r;r-=1)n[r].split("=")[0]===e&&n.splice(r,1);i=n.length?i+"?"+n.join("&"):i}return i},removeParams:function removeParams(e,t){if(e.length){for(var i=0;i<e.length;i++)t=this.removeParam(e[i],t);return t}return!1},getParamTillEnd:function getParamTillEnd(e){var t=!1,i=new RegExp(e+"=(.+)","g").exec(window.location.href);return i&&(t=i[1]),t},getUrlParam:function getUrlParam(e,t,i){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var n=this.getAllURLParams();if(n.stateId&&!t&&(t=[window.location.origin,window.location.pathname,window.history.state.data].join("")),"draftId"===e&&!0===Boolean(n.draftId))return n.draftId;var s=new RegExp("[\\?&]"+e+(i?"=([^()]*)":"=([^(&|?)]*)")).exec(t||window.location.href);return null===s?undefined:decodeURIComponent(s[1].replace(/\+/g," "))},getAllURLParams:function getAllURLParams(){var e=this._getUrlParamsFromHref();return e.stateId?this._getUrlParamsFromState(e.stateId):e},_getUrlParamsFromHref:_getUrlParamsFromState:function _getUrlParamsFromState(e){var t={};return Helpers.State.getParams(e)&&(t=this._getParamsFromUrlSearchString(window.history.state.data)),t},_getParamsFromUrlSearchString:function _getParamsFromUrlSearchString(e){var t,i={},n=e.slice(e.indexOf("?")+1).split("&");-1===e.indexOf("?")&&(n=[]);for(var s=0;s<n.length;s++)t=n[s].split("="),i[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return i},replaceUrlParam:function replaceUrlParam(e,t){var i,n,s,r,a,o,l=this.getPageId(),c=this.getNavigationId(),u={pageId:l,navigationId:c};return t=window.encodeURIComponent(t),o=Helpers.App.getUrlParam(e),i=window.location.href,n=o?e+"="+o:"",s=t.length?e+"="+t:"",r=i.replace(n,s),r=Helpers.App.removeParam(e),0<t.length&&(a=r.indexOf("?")<0?"?":"&",r=r+a+s),this._getUrlParamsFromHref().stateId?(window.history.state.data=r,window.history.state.pageId=l,window.history.state.navigationId=c,window.history.replaceState(window.history.state,Helpers.StageType.getStageSlug(),r)):window.history.replaceState(u,Helpers.StageType.getStageSlug(),r),this.handleCanonicality(),this},_getNewStateId:function _getNewStateId(){return(Date.parse((new Date).toUTCString())/1e3|0).toString(36)+(16777215*Math.random()<<0).toString(16).substring(0,4)},replaceUrlParamWithHistory:function replaceUrlParamWithHistory(e,t,i){window.isMultiScene||!0===Helpers.StageType.isVideoV5()?this._replaceUrlParamWithStateHistory(e,t,i):this._replaceUrlParamWithHistory(e,t,i)},_replaceUrlParamWithHistory:function _replaceUrlParamWithHistory(e,t,i){var n,s,r,a,o,l,c={pageId:this.generateUid(),navigationId:this.getNavigationId()};return t=encodeURIComponent(t),l=Helpers.App.getUrlParam(encodeURIComponent(e)),n=window.location.href,s=l?e+"="+l:"",r=t.length||i?e+"="+t:"",a=n.replace(s,r),a=Helpers.App.removeParam(encodeURIComponent(e)),(0<t.length||i)&&(o=a.indexOf("?")<0?"?":"&",a=a+o+r),l&&l===t||(window.history.pushState(c,Helpers.StageType.getStageSlug(),a),Helpers.State&&Helpers.State.dispatch("pushstate",c)),this},_replaceUrlParamWithStateHistory:function _replaceUrlParamWithStateHistory(e,t,i){var n,s,r,a,o,l;return n="",n=window.history.state&&window.history.state.data?window.history.state.data:"?",s=(l=Helpers.App.getUrlParam(encodeURIComponent(e),n))?e+"="+l:"",r=(t=encodeURIComponent(t)).length||i?e+"="+t:"",a=n.replace(s,r),a=Helpers.App.removeParam(encodeURIComponent(e),n),(0<t.length||i)&&(o=a.indexOf("?")<0?"?":"&",a=a+o+r),l&&l===t||Helpers.State.setParams(a),this},arrayUnique:function arrayUnique(e){for(var t=e.concat(),i=0;i<t.length;++i)for(var n=i+1;n<t.length;++n)t[i]===t[n]&&t.splice(n--,1);return t},arrayObjUnique:function arrayObjUnique(e,t){var i={},n=[];return e.forEach(function(e){i[e[t]]||(n.push(e),i[e[t]]=!0)}),n},sortObjAlphabetically:function sortObjAlphabetically(e,n){function t(e,t){var i=0;return e[n]>t[n]?i=1:e[n]<t[n]&&(i=-1),i}return e.sort(t)},getMobileUrl:function getMobileUrl(e,t){var i="";-1!==e.indexOf("#")&&(i=e.substring(e.indexOf("#"))),$.ajax({url:"/api/v1/base/parser",data:{user_agent:Helpers.StageType.getStageInfo().user_agent,admin:Helpers.App.isAdmin(),url:e},success:function(e){return!!t&&t(e+i)},error:function(){return!!t&&t("server error")}})},calcRuleOfThree:function calcRuleOfThree(e,t,i){return e*t/i},isAppleDevice:displayGift:function displayGift(){var t,e;this._giftModal=new UI.ShareModal({type:"gift"}),this._giftModal.updateInput("Generating URL...").loader(!0).activate(),$.ajax({url:"/users/generate_gift_link",type:"POST",context:this,success:function(e){t=location.protocol+"//"+location.host+"/gift/"+e,this._giftModal.updateInput(t).loader(!1),this._giftModal.loadShareSocialButtons(t)},error:)},_setAccountData:getAccountInfo:function getAccountInfo(){$.ajax({url:"/users/account_info",type:"POST",data:{},dataType:"json",success:function(e){e.account_data&&e.account_data.is_past_due&&(Helpers.GlobalEventTracker.pastDueLogin(),window.isPastDue=!0,this._setAccountData(e.account_data),Modals.Billing.showBillingUpdateOptionsModal(),Helpers.App.showFlashPastDue()&&page.flashPastDue())}.bind(this)})},checkPastDueStatus:function checkPastDueStatus(e){return Modals.Billing.addSpinnerOnBillingOptions(),$.ajax({url:"/users/check_past_due_status",type:"POST",data:{},dataType:"json",success:function(){window.isPastDue=!1,page.hidePastDueModal(),Modals.Billing.hideBillingUpdateOptionsModal(),"function"==typeof e.success&&e.success(),Modals.Billing.hideBillingUpdateOptionsModal()},error:function(){"function"==typeof e.error?e.error():Modals.Billing.hideBillingUpdateOptionsModal().setupUpdateCardModal()}}),this},tryToApplyInvoice:function tryToApplyInvoice(e){return Modals.Billing.addSpinnerOnBillingOptions(),$.ajax({url:"/users/try_to_apply_invoice",type:"POST",data:{},dataType:"json",success:function(){Helpers.GlobalEventTracker.appliedPastDueInvoice(),window.isPastDue=!1,page.hidePastDueModal(),Modals.Billing.hideBillingUpdateOptionsModal(),"function"==typeof e.success&&e.success(),Modals.Billing.hideBillingUpdateOptionsModal()},error:function(){Helpers.GlobalEventTracker.confirmRetryFailed(),"function"==typeof e.error?e.error():Modals.Billing.hideBillingUpdateOptionsModal().setupUpdateCardModal()}}),this},sendEcommerceTransaction:function sendEcommerceTransaction(e){var t={id:Helpers.App.getUser().id+"_"+e.invoice_number,affiliation:"Placeit",revenue:(parseInt(e.amount_in_cents,10)/100).toString(),tax:0,shipping:0,city:"",state:"",country:"",currency:window.currencyHelper.getLabel(window.recurlyConfig.currency),sku:e.sku,name:e.productName,category:"",quantity:1,discount:0,coupon:"",variant:!0===Helpers.StageType.getStageInfo().is_wide?"wide":"normal"};Helpers.GlobalEventTracker.identifyUser(),Helpers.GlobalEventTracker.pristineTrack("Completed Order",{orderId:t.id,total:t.revenue,revenue:t.revenue,shipping:t.shipping,tax:t.tax,discount:t.discount,coupon:t.coupon,currency:t.currency,repeat:!1,products:[{id:t.id,sku:t.sku,name:t.name,price:t.revenue,quantity:t.quantity,category:t.category,variant:t.variant}]}),!0===CookiesUtils.getMarketingSetting()&&Helpers.GlobalEventTracker.pristineTrack("email:Completed Order",{orderId:t.id,total:t.revenue,revenue:t.revenue,shipping:t.shipping,tax:t.tax,discount:t.discount,coupon:t.coupon,currency:t.currency,repeat:!1,products:[{id:t.id,sku:t.sku,name:t.name,price:t.revenue,quantity:t.quantity,category:t.category,variant:t.variant}]}),$.cookie("iterableEmailCampaignId")&&(t.iterableCampaignId=$.cookie("iterableEmailCampaignId"),t.iterableTemplateId=$.cookie("iterableTemplateId"),Helpers.GlobalEventTracker.pristineTrack("Order Completed",{orderId:t.id,user:{email:window._pl_userInfo.email},total:parseFloat(t.revenue),revenue:t.revenue,shipping:t.shipping,tax:t.tax,discount:0,coupon:t.coupon,currency:t.currency,repeat:!1,campaignId:parseInt(t.iterableCampaignId),templateId:parseInt(t.iterableTemplateId),products:[{id:t.id,sku:t.sku,name:t.name,price:parseFloat(t.revenue),quantity:parseInt(t.quantity),category:t.category,variant:t.variant}]}))},sendEnvatoTracking:function sendEnvatoTracking(e){if("production"===window.environment||window.enableEnvatoEvents!==undefined){var t={id:Helpers.App.getUser().id+"_"+e.orderId,revenue:(parseInt(e.subtotal,10)/100).toString(),currency:window.currencyHelper.getLabel(window.recurlyConfig.currency),sku:e.sku,name:e.productName,category:e.category,customerId:e.customerId,quantity:1,trackingCode:e.trackingCode};ire("trackConversion",t.trackingCode,{orderId:t.id,customerId:t.customerId,currencyCode:t.currency,items:[{subTotal:t.revenue,category:t.category,sku:t.sku,quantity:t.quantity}]})}},sendEnvatoSignUp:function sendEnvatoSignUp(e){"production"!==window.environment&&window.enableEnvatoEvents===undefined||ire("trackConversion",e.trackingCode,{customerId:e.customerId,orderId:e.customerId+"_"+e.envatoId})},generateUid:function generateUid(){var r=function(e){var t,i,n,s;for(e=e||32,i="",s=14,t=n=0;t<e;t++)i+=r.codes[Math.floor(Math.random()*(s-n+1))+n];return i};return r.codes=[0,1,2,3,4,5,6,7,8,9,"a","b","c","d","e","f"],r}(),handleCanonicality:function handleCanonicality(){var e,t=$('link[rel="canonical"]');return!0===window._pl_restricted_params.some(?(e=window._pl_host+(window._pl_isRootCategory?"":window._pl_categoryPath),!1!==Helpers.StageType.getStageInfo()&&(e=e+"/stages/"+Helpers.StageType.getStageInfo().slug),0===t.length&&(t=$('<link rel="canonical">').appendTo(document.head)),t.attr("href")!==e&&t.attr("href",e)):t.remove(),this},getFiltersInUrl:function getFiltersInUrl(){var e,t,i,n,s;return n=Helpers.StageType.getFilterNames(),s={},e=Helpers.App.getUrlParam(n.types),t=Helpers.App.getUrlParam(n.devices),i=Helpers.App.getUrlParam(n.tags),void 0!==e&&(s[n.types]=e.split(",")),void 0!==t&&(s[n.devices]=t.split(",")),void 0!==i&&(s[n.tags]=i.split(",")),s},setCoupon:function setCoupon(e){return e&&(this._coupon=Helpers.CouponHelper.load(e)),this},getCoupon:function getCoupon(){return this._coupon=Helpers.CouponHelper.getCoupon(),this._coupon},isIOSSafari:function isIOSSafari(){var e=window.navigator.userAgent,t=Helpers.App.isIOS(e),i=!!e.match(/WebKit/i);return t&&i&&!e.match(/CriOS/i)},isIOS:function isIOS(e){return!!e.match(/iPad/i)||!!e.match(/iPhone/i)||this.isIpadPro()},isIpadPro:function isIpadPro(){var e=window.navigator;return!!(e.maxTouchPoints&&2<e.maxTouchPoints&&/MacIntel/.test(e.platform))},getClientWidth:function getClientWidth(){var e=window,t=document,i=t.documentElement,n=t.getElementsByTagName("body")[0];return e.innerWidth||i.clientWidth||n.clientWidth},isMobile:function isMobile(){var e=Helpers.App.getUrlParam("b")||this.breakpoint;return this.getClientWidth()<=e},isMobileDevice:function isMobileDevice(){var e=!1,t=navigator.userAgent||navigator.vendor||window.opera;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|ipad|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},filterForbiddenStages:function filterForbiddenStages(e){return e&&e instanceof Array?e=e.filter(function(e){return-1<[1,2,6,9,10,11,12].indexOf(e.image_type)||3===e.image_type&&!e.has_hand}):[]},hasBulkPackage:function hasBulkPackage(){return window._pl_hasBulkPackage},logout:function logout(){var t=this;$.ajax({url:"/logout",type:"GET",dataType:"json",beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))}}).done(.fail(function(e){t._handleLogoutResponse(e)})},_handleLogoutResponse:function _handleLogoutResponse(e,t){if(e)throw"Logout Error: "+e;Helpers.CouponHelper.remove(),Helpers.UserSegment.removeCookies(),t.requires_sso_logout?this.ssoLogout().then(function(){window.location.href="/"}):window.location.href="/"},ssoLogout:function ssoLogout(){var t=function t(){var e={error:!1,type:"event",message:"Logged out from Envato SSO successful"};Helpers.GlobalEventTracker.ssoTrack("sso.ssoLoggedOut",e)},i=function i(e){var t=e.context;if("ValidationError"!==e.type)throw"SSO Error signing out from SSO: "+e.message;console.log("Failed to logout at SSO: "+t.errorMessage)};return window.envatoSso.signOut().then(t)["catch"](i)},isCustomExperience:function isCustomExperience(){return"object"==typeof window.experience&&/custom_experiences|no_results/.test(window.pageType.type)},isCustomPage:function isCustomPage(){return"custom_pages"===window.pageType.type},isPricingPage:function isPricingPage(){return"pricingv2"===window.pageType.type},debounce:function debounce(s,r,a){var o;return ,countArrayItems:function countArrayItems(e){return e.filter(.length},updateEmailNotifications:function(e,t,i){e.download_email_notifications===undefined&&(e.download_email_notifications=this._user.downloadEmailNotifications),e.placeit_promotion_notifications===undefined&&(e.placeit_promotion_notifications=this._user.placeitPromotionNotifications),e.product_update_notifications===undefined&&(e.product_update_notifications=this._user.productUpdateNotifications),e.feedback_request_notifications===undefined&&(e.feedback_request_notifications=this._user.feedbackRequestNotifications);var n=this;!0===window.apiPage&&(e.unsubscribe_code=Helpers.App._user.unsubscribe_code),$.ajax({url:"/email_lists/update_notifications",type:"POST",data:{user:e},dataType:"json",beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))}}).done(function(e){n._user.downloadEmailNotifications=e.download_email_notifications,n._user.placeitPromotionNotifications=e.placeit_promotion_notifications,n._user.productUpdateNotifications=e.product_update_notifications,n._user.feedbackRequestNotifications=e.feedback_request_notifications,"function"==typeof t&&t(e)}).fail(},getEnvironment:function getEnvironment(){var e=location.hostname.split(".")[0];switch(e){case"staging":case"staging2":case"staging3":return e;case"placeit":return"production";default:return"development"}},pageName:function pageName(e){return window.pageType.type=e||window.pageType.type,window.pageType.type},pageType:function Dye(){return this._pageType=window.pageType,this._pageType.header_type=window.headerType,this._pageType},isLogoPage:elementFixedOnScroll:function elementFixedOnScroll(e,t){(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame)(function(){if(0===e.length)return!1;t||(t=0),e.data("original-position-top")===undefined&&e.offset().top-t<=$(window).scrollTop()?(e.addClass("f-scrolling"),e.data("original-position-top",e.offset().top)):$(window).scrollTop()<e.data("original-position-top")-t&&(e.scrollTop(0),e.removeClass("f-scrolling"),e.removeData("original-position-top"))})},getEUCountries:function getEUCountries(){return["AT","BE","BG","CY","CZ","DK","EE","ES","FI","FR","DE","GB","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SE","SI","SK","HR","AU"]},getDeviceCategory:function getDeviceCategory(){var e="";return navigator.userAgent&&(e=navigator.userAgent.toLowerCase()),/(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(e)?"tablet":/(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard)/.test(e)?"mobile":"desktop"},setSubscriptionPeriod:function setSubscriptionPeriod(e){this._subscriptionPeriod=e,window.page&&window.page.account&&window.page.account.subscriptionsPartialBlock&&page.account.subscriptionsPartialBlock.setPeriod(e,!0)},getSubscriptionPeriod:function getSubscriptionPeriod(){return this._subscriptionPeriod},getLayerFromRecordByName:function getLayerFromRecordByName(t,e){return e&&!1!==Array.isArray(e.layers)?e.layers.filter([0]:null},getFileNameFromURI:extractNumbersFromString:clamp:isDownloadIphoneFlowAvailable:function isDownloadIphoneFlowAvailable(){var e=!1==!navigator.userAgent.match(/iPhone|iPad|iPod/i),t=!1==!navigator.userAgent.match(/OS 12_/);return e&&t},setIOSVideoDownloadInstructionsCookie:function setIOSVideoDownloadInstructionsCookie(){$.cookie("iOSVideoDownloadInstructionsCompleted",!0,{expires:365,path:"/"})},getIOSVideoDownloadInstructionsCookie:shortcutInstructionsModal:function shortcutInstructionsModal(){new UI.ShortcutFlow({steps:[UI.ShortcutInstruction1,UI.ShortcutInstruction2,UI.ShortcutInstruction3,UI.ShortcutInstruction4,UI.ShortcutInstruction5]}).activate()},shortcutDownloadModal:function shortcutDownloadModal(e,t){new UI.ShortcutFlow({steps:[UI.ShortcutInstruction1,UI.ShortcutInstruction2,UI.ShortcutInstruction3,UI.ShortcutInstruction4,UI.ShortcutDownloadStep],videoDownloadURL:e,videoPreviewURL:t}).activate()},getSlugFromStageURL:function getSlugFromStageURL(e,t){var i=t?e.replace("/?","?"):e.split("?")[0];return i.substring(i.lastIndexOf("/")+1)},setRepositionButtonPopoverCookie:function setRepositionButtonPopoverCookie(e){$.cookie(e+"RepositionButtonPopoverShowed",!0,{expires:3650,path:"/"})},getRepositionButtonPopoverCookie:function getRepositionButtonPopoverCookie(e){return"true"===$.cookie(e+"RepositionButtonPopoverShowed")},shouldPreferVideoAsset:function shouldPreferVideoAsset(e){return!(!Helpers.StageType.isVideoV4()||!e.hasAnimated)},removeFocusFromAllInputs:function removeFocusFromAllInputs(){var e=$("input:focus");return e.blur(),e},getMobileHelpTextCounter:function getMobileHelpTextCounter(){return this._mobileHelpTextCounter},setMobileHelpTextCounter:function setMobileHelpTextCounter(e){var t=e||1;this._mobileHelpTextCounter+=t},formatTime:function formatTime(e,t){var i,n,s,r;return i=[],n=Math.floor(e/3600),s=Math.floor(e%3600/60),r=Math.floor(e%60),0<n&&(i.push(n),s<10&&(s="0"+s)),r<10&&(r="0"+r),i.push(s),i.push(r),i.join(t)},sanitizeControlCharacters:call(),loadVideoData:function loadVideoData(e,t){var i;(i=document.createElement("video")).preload="metadata",i.onloadedmetadata=function(){URL.revokeObjectURL(i.src),t({duration:i.duration,height:i.videoHeight,url:e,width:i.videoWidth})},i.src=e},calcScalingFactor:function calcScalingFactor(e,t){var i=t.width*t.width+t.height*t.height,n=e.width*e.width+e.height*e.height;return 0===n?null:Math.sqrt(i/n)},calcScaledArea:function calcScaledArea(e,t){return{name:e.name,width:e.width*t,height:e.height*t,y:e.y*t,x:e.x*t}},getEngine:function getEngine(){return null===window.engine||window.engine===undefined?null:window.engine},getProductShownData:function getProductShownData(){var e={};return e.stageTags=Helpers.StageType.getStageTags(),e.resultUrl=window.location.href,e.eventAction="result.shown",window._stageData&&window._stageData.stage_data&&window._stageData.stage_data.image_type&&(e.eventCategory=Helpers.StageType._types[window._stageData.stage_data.image_type]),e},matchInitialAssets:function matchInitialAssets(e){return!(!window.initialAssets||window.initialAssets.id!==e)},checkAssetsDataCached:function checkAssetsDataCached(e){try{if(null===window.initialAssets)return;!1===Helpers.App.matchInitialAssets(e)&&Helpers.GlobalEventTracker.noticeError("Get cached data error",{message:"Stage id does not match",initialAssetsId:window.initialAssets&&window.initialAssets.id})}catch(t){Helpers.GlobalEventTracker.noticeError("Get cached data error",t)}},getNetworkData:function getNetworkData(){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return e?{downlink:e.downlink,effectiveType:e.effectiveType,rtt:e.rtt,saveData:e.saveData}:{}},getUserLocation:function getUserLocation(){return $.cookie("gtmc_user_location")},getOverflow:function(e,t,i){var n={},s=i||0;return t.top<s?n.top=s-t.top:t.top+t.height>e.height-s&&(n.bottom=t.top+t.height-e.height+s),t.left<s?n.left=s-t.left:t.left+t.width>e.width-s&&(n.right=t.left+t.width-e.width+s),n},parseBoolean:function(e){return"string"==typeof e&&"true"===e||!0===e||1===e},setUserType:getUserType:function getUserType(){return this._userType},getCookie:isDevMode:getMobileControlsModalState:function getMobileControlsModalState(){return this._floatingContainerState},setMobileControlsModalState:function setMobileControlsModalState(e){this._floatingContainerState=e},isMinChromeVersion:function isMinChromeVersion(e){var t=navigator.userAgent,i=0;return-1!==(i=t.indexOf("Chrome"))&&t.substring(i+7,i+9)>=e},isBase64Image:getPageId:function getPageId(){return!1!==Boolean(window.history.state)&&!1!==Boolean(window.history.state.pageId)?window.history.state.pageId:this.generateUid()},getNavigationId:function getNavigationId(){return!1!==Boolean(window.history.state)&&!1!==Boolean(window.history.state.navigationId)?window.history.state.navigationId:this.generateUid()},getPerformanceNavigationType:function getPerformanceNavigationType(){if(!1!==Boolean(window.performance))return window.performance.getEntriesByType("navigation")[0]||window.performance.navigation},getNavigationType:function getNavigationType(){var e=this.getPerformanceNavigationType(),t="reload";return typeof e===undefined?t:"string"==typeof e?e[0]:1===e?t:"navigate"},rgbToHex:function rgbToHex(e,t,i){return e=e.toString(16),t=t.toString(16),i=i.toString(16),1==e.length&&(e="0"+e),1==t.length&&(t="0"+t),1==i.length&&(i="0"+i),"#"+e+t+i},isInWatermarkExperiment:function isInWatermarkExperiment(){var e="1QdtL8ZYDh6q4Rnr9v:0i";return!!(Helpers.App.getCookie("experiment_id").includes(e)&&Helpers.App.isLoggedIn()&&Helpers.StageType.isSmartTemplate())},isRefactorEnabled:function isRefactorEnabled(){return Helpers.App.getUrlParam("devMode")?Helpers.App.isDevMode():window.isEnableRefactor},redirectToPricing:function redirectToPricing(){var e=["stateId"],t=new URL(window.location.href);e.forEach(,window.location.href="/pricing"+t.search},isPlaceitHomePage:function isPlaceitHomePage(){return window.pageType.is_home&&!window.pageType.is_search&&!window.pageType.no_results},encodeUrlStateToBase64:function encodeUrlStateToBase64(e){var t={path:e};return btoa(JSON.stringify(t))},urlHasParams:function urlHasParams(){var e=Helpers.App.getAllURLParams();return!(Object.keys(e).length<1)},getUrlWithSsoProviderFallbackParam:function getUrlWithSsoProviderFallbackParam(e,t){var i="?",n=e+"Fallback="+t,s=window.location.href;return!0===Helpers.App.urlHasParams()&&(i="&"),!0===Helpers.App.isApiPage()&&(n+="&api_page=true"),s+i+n},isExternalSsoFallbackUrl:function isExternalSsoFallbackUrl(e){return!!Helpers.App.getUrlParam(e+"Fallback")},deleteURLParam:function deleteURLParam(t){var e=window.location.href;if(t&&!(e.indexOf(t)<0)){var i=e.split("?"),n=i[1].split("&").filter(function(e){if(e.indexOf(t)<0)return e}).join("&"),s=i[0];0<n.length&&(s+="?"+n),window.history.replaceState(null,"",s)}},isApiPage:function isApiPage(){return window.apiPage},setCookie:function setCookie(e,t,i){var n=new Date;n.setTime(n.getTime()+864e5*i),document.cookie=e+"="+t+";path=/;expires="+n.toGMTString()},deleteCookie:function deleteCookie(e){Helpers.App.setCookie(e,[],-1)},getExperimentVariant:function getExperimentVariant(e,t){var i=Helpers.App.getCookie("experiment_id"),n=i.indexOf(e);if(n<0)return"";var s=n+e.length,r=t[i.substring(s,s+2)];return r||""},updateURLByPushState:function updateURLByPushState(e){var t={pageId:Helpers.App.generateUid(),navigationId:Helpers.App.getNavigationId()};window.history.pushState(t,Helpers.StageType.getStageSlug(),e),Helpers.State&&Helpers.State.dispatch("pushstate",t)},capitalizeFirstLetter:isRefactorFlagEnabled:function isRefactorFlagEnabled(){return Helpers.App.getUrlParam("refactorEnabled")?"true"===Helpers.App.getUrlParam("refactorEnabled"):window.isRefactorFlagEnabled},getSubscriptionEventName:function getSubscriptionEventName(e){var t;switch(t="Subscription:success:",e){case Registry.Plans.PLAN_MONTHLY:t+="Unlimited";break;case Registry.Plans.PLAN_ANNUAL:t+="Unlimited:Annual"}return t},isMerchPreviewEnabled:function isMerchPreviewEnabled(){return Helpers.App.getUrlParam("merchPreviewEnabled")?"true"===Helpers.App.getUrlParam("merchPreviewEnabled"):window._pl_featureFlags.pa2880_enable_merch_preview},isMoveMerchPreviewEnabled:function isMoveMerchPreviewEnabled(){return Helpers.App.getUrlParam("moveMerchPreviewEnabled")?"true"===Helpers.App.getUrlParam("moveMerchPreviewEnabled"):window._pl_featureFlags.pa4325_enable_move_merch_preview},getRecommendedTemplatesVersion:function getRecommendedTemplatesVersion(){var e="Zqp5JkDnLreTwb1RDH:",t={WB:"A",Yt:"B",hO:"C",aq:"D"},i=Helpers.App.getExperimentVariant(e,t);return i.length?i:"A"},isMerchYggdrasilEnabled:function isMerchYggdrasilEnabled(){return Helpers.App.getUrlParam("merchYggdrasilEnabled")?"true"===Helpers.App.getUrlParam("merchYggdrasilEnabled"):window._pl_featureFlags.pa3585_enable_merch_yggdrasil},isRecentlyUploadedExperimentActive:function isRecentlyUploadedExperimentActive(t){var i=null,n=null,e={
development:"hHCZkMtqFtMWCHcWcQ",staging:"hHCZkMtqFtMWCHcWcQ",production:"p2qxYqzP2KVTWvhhxa"},s={development:{A:"rA",B:"pS",C:"JL",D:"lt"},staging:{A:"rA",B:"pS",C:"JL",D:"lt"},production:{A:"K3",B:"hT",C:"qx",D:"yD"}}[window.environment],r=Helpers.App.getUrlParam("experiment_variant",location.href);if(Boolean(r))return t.includes(r);if(i=e[window.environment],!1===(n=Helpers.App.getCookie("experiment_id")).includes(i)&&t.includes("A"))return!0;var a=Object.keys(s).filter(function(e){return t.includes(e)&&n.includes(i+":"+s[e])});return Boolean(a.length)},isRecentlyUploadedExperimentFixedVariantsActive:function isRecentlyUploadedExperimentFixedVariantsActive(){return Helpers.App.isRecentlyUploadedExperimentActive(["B","C","D"])&&!1===Helpers.App.isBrandkitPage()&&Helpers.StageType&&Helpers.StageType.isStage()},getRecentlyUploadedImages:function getRecentlyUploadedImages(){var t=this;return RecentlyUploadedImages.getCollection().then(function(e){return 0<e.recently_uploaded_images.length&&(t._user.hasRecentlyUploadedImages=!0),e.recently_uploaded_images})["catch"](console.error)},getUserDownloadsImages:function getUserDownloadsImages(){var t=this;return DownloadedImages.fetch().then(function(e){return 0<e.total_productshots&&(t._user.hasUserDownloadsImages=!0),e})["catch"](console.error)},isBrandkitPage:buildPaging:function buildPaging(e,t){var i,n=e,s=t,r=a=o=function o(){return i},l=function l(){return n+1<i},c=function c(){return n},u=function u(){return s};return{getPage:c,getPerPage:u,getTotalPages:o,nextPage:r,setTotalPages:a,hasNextPage:l}},isCookiesPolicyEnabled:function isCookiesPolicyEnabled(){if(Helpers.App.getUrlParam("cookiesPolicyEnabled"))return"true"===Helpers.App.getUrlParam("cookiesPolicyEnabled");var e="4ifSQcdk2CMzKzPAo8:",t={AU:"A",eC:"B"};return"B"===Helpers.App.getExperimentVariant(e,t)&&window.isEuropeanIp},getCheckoutVersion:function getCheckoutVersion(){if("BR"===window._pl_locale)return"A";var e="nfCKMaNw82iCVelXR1:",t={lo:"A",bU:"B",yE:"C",me:"D"};return Helpers.App.getExperimentVariant(e,t)},isSocialMediaPublishingExpVariant:function isSocialMediaPublishingExpVariant(t){var i=null,n=null,e={development:"WNvoexae3qFfwlLGDL",staging:"WNvoexae3qFfwlLGDL",production:"WNvoexae3qFfwlLGDL"},s={development:{A:"KS",B:"um",C:"ni"},staging:{A:"KS",B:"um",C:"ni"},production:{A:"KS",B:"um",C:"ni"}}[window.environment];if(i=e[window.environment],!1===(n=Helpers.App.getCookie("experiment_id")).includes(i)&&t.includes("A"))return!0;var r=Object.keys(s).filter(function(e){return t.includes(e)&&n.includes(i+":"+s[e])});return Boolean(r.length)},isPaymentInfoReminderExpActive:function isPaymentInfoReminderExpActive(){var e="uDBrTVpZZUg5HIgoXs:",t={CG:"A",KB:"B"};return Helpers.App.getExperimentVariant(e,t)},showFlashPastDue:function showFlashPastDue(){return!(!window.isPastDue||""!=Helpers.App.isPaymentInfoReminderExpActive()&&"A"!=Helpers.App.isPaymentInfoReminderExpActive())},isIndianUser:function isIndianUser(){return Boolean(Helpers.App.getUser().country)&&"in"===Helpers.App.getUser().country||!0===window.isIndianIp},getNewColorControlExpVariant:function getNewColorControlExpVariant(){var e="MUPLSmXQot7sy5ZHMt:",t={"9q":"A",Qf:"B"};return Helpers.App.getExperimentVariant(e,t)},freebiesWindowsExists:function freebiesWindowsExists(){return window.userFreeDownloads!==undefined&&!0===window.userFreeDownloads.active&&window.latestFreeDownloads!==undefined},freebieBlocked:function freebieBlocked(){return!!(Helpers.App.freebiesWindowsExists()&&window.latestFreeDownloads.left<=0&&"Subscribed"!==Helpers.App._user.status)},isFreebiesActive:function isFreebiesActive(){return!(!Helpers.App.freebiesWindowsExists()||!Helpers.StageType.isFree()||"Subscribed"===Helpers.App._user.status)},setPaidFreebieTheme:function setPaidFreebieTheme(){window.latestFreeDownloads!==undefined&&window.latestFreeDownloads.left<1&&page.stage.setPaidTheme()},updateFreebiesWhenStageFails:function updateFreebiesWhenStageFails(){Helpers.App.isFreebiesActive()&&$.ajax({url:"/latest_free_downloads",cache:!1,success:)},updateFreebiesInfo:function updateFreebiesInfo(){Helpers.App.isFreebiesActive()&&(latestFreeDownloads=window.latestFreeDownloads,window.latestFreeDownloads.count=latestFreeDownloads.count+1,window.latestFreeDownloads.left=latestFreeDownloads.left-1,leftCount=window.latestFreeDownloads.left+"|"+window.latestFreeDownloads.count,Helpers.App.setPaidFreebieTheme(),Helpers.App.setCookie("freebiesLeftCount",leftCount,1),setTimeout(function(){Helpers.App.deleteCookie("freebiesLeftCount")},6e4))},getActiveCampaigns:function getActiveCampaigns(){var e=window.active_campaigns;return!1===Array.isArray(e)?[]:e},getActiveCampaignData:function getActiveCampaignData(t){return Helpers.App.getActiveCampaigns().find(function(e){return e.code_name===t})},isActiveCampaign:function isActiveCampaign(t){return Helpers.App.getActiveCampaigns().some(function(e){return e.code_name===t})},getFreeAssetsExpVariant:function getFreeAssetsExpVariant(){var e="SuQQZaYXWAJR8sKUCe:",t={IA:"A",Qe:"B"};return Helpers.App.getExperimentVariant(e,t)},isFreeAssetsEnabled:function isFreeAssetsEnabled(){return Helpers.App.getUrlParam("freeAssetsEnabled")?"true"===Helpers.App.getUrlParam("freeAssetsEnabled"):"B"===Helpers.App.getFreeAssetsExpVariant()},getFreebiesLimitCookie:function getFreebiesLimitCookie(){return $.cookie("limit_freebies_downloads")},setFreebiesLimitCookie:function setFreebiesLimitCookie(){null===this.getFreebiesLimitCookie()&&$.cookie("limit_freebies_downloads",1)},noResultPageClickEvent:function noResultPageClickEvent(e){new URLSearchParams(window.location.search).has("no_results")&&Helpers.GlobalEventTracker.noResultPageEvent(e)},isAvailableForFreePrice:function isAvailableForFreePrice(e){return!(!e&&!Helpers.App.isAdmin()||Helpers.App.freebieBlocked())},freebiesCookieName:isFreebieCookie:function isFreebieCookie(e){if(null!==$.cookie(e))return!0;$.cookie(e,history.state.pageId,{expires:1})},isUseMyDownloadsUnlimitedEnabled:function isUseMyDownloadsUnlimitedEnabled(){return Helpers.App.getUrlParam("myDownloadsUnlimitedEnabled")?"true"===Helpers.App.getUrlParam("myDownloadsUnlimitedEnabled"):window._pl_featureFlags.pa2829_enable_my_downloads_unlimited},bindSortBy:function bindSortBy(e){e="best-selling"===(e="mixed"===e?"popular":e)?"bestSelling":e,Helpers.GlobalEventTracker._baseSend("sortby:"+e+":clicked")},isCommercialSearchPagesEnabled:function isCommercialSearchPagesEnabled(){return Helpers.App.getUrlParam("pa8143_enable_search_pages_commercial")?"true"===Helpers.App.getUrlParam("pa8143_enable_search_pages_commercial"):window._pl_featureFlags.pa8143_enable_search_pages_commercial},isImportFromMyPlaceitEnabled:function isImportFromMyPlaceitEnabled(){return Helpers.App.getUrlParam("importFromMyPlaceitEnabled")?"true"===Helpers.App.getUrlParam("importFromMyPlaceitEnabled"):window._pl_featureFlags.pa4562_enable_import_from_my_placeit},isSubscribedOrAdmin:function isSubscribedOrAdmin(){return Helpers.App.isSubscriptionValid()||Helpers.App.isAdmin()},isContinueWhereLeftExpActive:function isContinueWhereLeftExpActive(){return window.is_continue_where_you_left_exp},getFolderSmokeTestStatus:function getFolderSmokeTestStatus(){return window.folderSmokeTest},isGuestCheckoutExperimentActive:function isGuestCheckoutExperimentActive(){return!Helpers.App.isLoggedIn()&&(Helpers.App.getUrlParam("guestCheckoutEnabled")?"true"===Helpers.App.getUrlParam("guestCheckoutEnabled"):this.isGuestCheckoutCookieActive())},isGuestCheckoutCookieActive:function isGuestCheckoutCookieActive(){var e="3QA2dwjMqFCY7TMRTb:",t={dy:"A",Kj:"B"};return"B"===Helpers.App.getExperimentVariant(e,t)},isRemoveStageBackgroundEnabled:function isRemoveStageBackgroundEnabled(){return Helpers.App.getUrlParam("removeStageBackgroundEnabled")?"true"===Helpers.App.getUrlParam("removeStageBackgroundEnabled"):window._pl_featureFlags.pa367_enable_remove_stage_background},willReadFrequently:function willReadFrequently(){return Helpers.App.getUrlParam("willReadFrequently")?"true"===Helpers.App.getUrlParam("willReadFrequently"):window._pl_featureFlags.pa9111_enable_will_read_frequently},isPreloadVideoEnabled:function isPreloadVideoEnabled(){return Helpers.App.getUrlParam("preloadVideoEnabled")?"true"===Helpers.App.getUrlParam("preloadVideoEnabled"):window._pl_featureFlags.pa9074_enable_preload_video}}),Module(Helpers,"StageType")({VIDEO_UUID_COOKIE_NAME:"video-uuid",_types:{1:"still",2:"multi-stage",3:"blender",5:"workflow",6:"wide-still",7:"liveImage",8:"video",9:"psd",10:"multicolor",11:"video-product",12:"ios-screenshot",13:"smart-template",14:"ae_video_replacement",15:"fusion_video",18:"video_v5"},_filterNames:{types:"f_types",devices:"f_devices",tags:"f_tags"},_stageInfo:null,_backgroundInfo:null,_isYouTubeUpload:!1,_isHorizontallyFlipped:!1,_structureInstance:null,_blanksCanvasStageSlug:"blank-canvas-designs",_designCategoryName:"Design Templates",setStageInfo:function setStageInfo(e){this._stageInfo=e,window._stageData.stage_data.custom_price=window._stagePrice},setStageId:setAlternatives:function setAlternatives(e){this._hasAlternatives=e},getFilterNames:function getFilterNames(){return this._filterNames},getStageInfo:getStageID:function getStageID(){return this.getStageData().id},getRecordId:function getRecordId(){return this.getStageData().smart_object_v4_id},getStageSlug:function getStageSlug(){return this.getStageInfo().slug},getStageType:function getStageType(){var e=this.getStageInfo().image_type;return this._types[e]},getStageName:function getStageName(e){var t=e;return this._types[t]},getCategoryName:function getCategoryName(){return this.getStageData().category_name},getTags:function getTags(){return this.getStageData().tags},getStageData:getStageTags:function getStageTags(){var e,t;return t=[],(e=Helpers.StageType.getStageInfo().tags||Helpers.StageType.getStageData().tags)&&e.forEach(,t.join()},setBackgroundInfo:function setBackgroundInfo(e){null!==(this._backgroundInfo=e)&&e.tags instanceof Array&&(this._backgroundInfo.transparent=e.tags.some(function(e){return"transparent"===e.name.toLowerCase()}))},getBackgroundInfo:function getBackgroundInfo(){return this._backgroundInfo},getBackgroundID:function getBackgroundID(){var e=this.getBackgroundInfo();return e&&(e=e.id),e},getBackgroundOrColorID:function getBackgroundOrColorID(){var e,t;return e=this.getBackgroundInfo(),t=Helpers.App.getUrlParam("color"),e?e=e.id:t&&(e=t),e},_productshotInfo:null,_productshotID:null,_videoProcessID:null,_videoProductUUID:null,setProductshotInfo:function setProductshotInfo(e){this._productshotInfo=e},getProductshotInfo:function getProductshotInfo(){return this._productshotInfo},setProductshotID:function setProductshotID(e){this._productshotID=e},getProductshotID:function getProductshotID(){return this._productshotID},setVideoProcessID:function setVideoProcessID(e){this._videoProcessID=e},getVideoProcessID:function getVideoProcessID(){return this._videoProcessID},setVideoProductUUID:function setVideoProductUUID(e){var t;this._videoProductUUID=e;var i=Helpers.StageType.VIDEO_UUID_COOKIE_NAME;e?((t=new Date).setTime(t.getTime()+18e5),$.cookie(i,e,{expires:t,path:location.pathname})):$.removeCookie(i,{path:location.pathname})},getVideoProductUUID:function getVideoProductUUID(){return this._videoProductUUID?this._videoProductUUID:$.cookie(Helpers.StageType.VIDEO_UUID_COOKIE_NAME)||null},getProductshotURL:function getProductshotURL(){return location.protocol+"//"+location.host+"/"+this.getProductshotInfo().hsh},isFree:function isFree(){var e=!1,t=this.getStageInfo();Helpers.App.getSubscription();return t&&(e=t.is_free),e||Helpers.App.isAdmin()},hasVector:function hasVector(){var e=!1,t=this.getStageInfo();return t&&(e=t.has_vector),e},isStillshot:function isStillshot(){return 1===window._stageData.stage_data.image_type},isWideStillshot:function isWideStillshot(){return 6===window._stageData.stage_data.image_type},isRealshot:function isRealshot(){var e=this.getStageInfo();return e&&5===e.image_type},isBlender:function isBlender(){return 3===window._stageData.stage_data.image_type},hasGesture:function hasGesture(){return this.getStageInfo().has_hand},isBlenderGesture:isLiveImage:function isLiveImage(){return 7===this.getStageInfo().image_type},isFusionVideo:isStageWide:function isStageWide(){return null!==this.getStageInfo()&&!0===this.getStageInfo().is_wide},isBackgroundWide:function isBackgroundWide(){return null!==this.getBackgroundInfo()&&!0===this.getBackgroundInfo().is_wide},isWide:function isWide(){return this.isStageWide()||this.isBackgroundWide()},isMultiStage:function isMultiStage(){return 2===window._stageData.stage_data.image_type},isTransparentStage:function isTransparentStage(){var e,t,i=Helpers.StageType.isFree(),n=Helpers.StageType.getBackgroundInfo();return t=Helpers.StageType._isTransparentBackground(),!(!n||!t||!1!==i)||(e=Helpers.StageType.isTransparent(),!(n&&!t&&e)&&!!Helpers.StageType.isTransparent())},isIOSScreenshot:function isIOSScreenshot(){return 12===window._stageData.stage_data.image_type},isSmartTemplate:function isSmartTemplate(){return 13===window._stageData.stage_data.image_type||17===window._stageData.stage_data.image_type},isCropperTool:isPsd:function isPsd(){return 9==this.getStageInfo().image_type},isMulticolor:function isMulticolor(){return this.getStageInfo()&&10==this.getStageInfo().image_type},isVideoV4:function isVideoV4(){return this.getStageInfo()&&15==this.getStageInfo().image_type},isStage:function isStage(){return window.pageType&&window.pageType.is_stage&&"Tools"!==window.pageType.page_type},isTool:isToolName:function isToolName(e){var t=this.getStageData().tool_name;return!(!this.isTool()||e!==t)},isLogo:function isLogo(){return this.getStageInfo()&&"Logos"===this.getStageInfo().category_name},isMultiSelect:function isMultiSelect(){return!!this.getStageType()&&0<=this.getStageType().indexOf("still")},isShareable:function isShareable(){return this.getStageType()&&(this.isStillshot()||this.isWideStillshot()||this.isBlender())},isPublished:function isPublished(){return!(!window._stageData||!window._stageData.stage_data||1!==window._stageData.stage_data.is_published)},hasVideoDiscount:function hasVideoDiscount(){return this.getStageInfo().has_discount},hasAlternatives:function hasAlternatives(){return this._hasAlternatives},isYouTubeUpload:function isYouTubeUpload(){return this._isYouTubeUpload},setYouTubeUploadFlag:function setYouTubeUploadFlag(e){return this._isYouTubeUpload=e,this},setFlippedState:isHorizontallyFlipped:function isHorizontallyFlipped(){return this._isHorizontallyFlipped},isTransparent:function isTransparent(){return!0===this.getStageInfo().is_transparent},_isTransparentBackground:function _isTransparentBackground(){var e=Helpers.StageType.getBackgroundInfo();return e&&e.is_transparent},getNiceBackgroundID:function getNiceBackgroundID(){return this._stageInfo.background_id},getNiceFileID:function getNiceFileID(){return this._stageInfo.file_id},setNiceBackgroundID:function getNiceBackgroundID(e){return this._stageInfo.background_id=e,this},setNiceFileID:function setNiceFileID(e){var t="";return t=/"/.test(e)?e.match(/"(.*?)"/)[1]:e,this._stageInfo.file_id=t,this},getNiceCaptionMetadata:function getNiceCaptionMetadata(){return this._stageInfo.nice_caption_metadata},setNiceCaptionMetadata:function setNiceCaptionMetadata(e){return this._stageInfo.nice_caption_metadata=e,this},setNiceImage:function setNiceImage(e){return this._stageInfo.nice_image=e,this},getNiceImage:function getNiceImage(){return this._stageInfo.nice_image},setDesignPlan:function setDesignPlan(e){return this._stageInfo.designPlan=e,this},getDesignPlan:setStructureInstance:function setStructureInstance(e){this._structureInstance=new Structure({tree:e})},getStructureInstance:function getStructureInstance(){return this._structureInstance},setPreviewImage:getPreviewImage:function getPreviewImage(){var t=this;if(window.engine){window.engine._deactivateInteractions(),window.engine._refresh();var e=window.engine.getImage();return e=e.replace(/^data:(.*?);base64,/,""),Promise.resolve(e)}if(this._stageInfo.previewImage)return Promise.resolve(this._stageInfo.previewImage);var i=function(e){return e=e+"?_timestamp="+Date.now(),new Promise(function(t,i){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onload=function(){var e=new FileReader;e.readAsDataURL(n.response),e.onload=,n.onerror=function(e){i(e)},n.send()})},n=null,s=null;return page&&page.stage&&(s=page.stage),window.isApiWindow&&(s=page.stageApi),i(n=s._cdnBasePath()+"/smart_templates/"+s.smart_object_id+"/"+s.record.previewImage.value).then(function(e){return t._stageInfo.previewImage=e.split(",")[1],t._stageInfo.previewImage})["catch"](function(e){return{error:JSON.stringify(e),message:"Something went wrong fetching the image.",url:n}})},getCustomPrice:function getCustomPrice(){return this.getStageInfo().custom_price},getMaxUserAddedTexts:getMaxUserAddedGraphics:function getMaxUserAddedGraphics(){return(this.getStageInfo().max_user_added_graphics||0)&&3},getAddGraphicAssetGroup:getStageRecordId:function getStageRecordId(){var e=window.page&&window.page.stage,t=e&&e.record;return t&&t.id?t.id:null},getTheme:function getTheme(){return new Promise(function(t,e){!(ThemeSupport.currentPrice=0)===Helpers.App.isAdmin()&&t(ThemeSupport.ADMIN),Helpers.App.getSubscription()&&t(ThemeSupport.SUBSCRIBED);try{var i=Helpers.Price.stage(Helpers.PremiumAssetsValidator.getStageInfo());i.price.then(function(e){0===e&&t(ThemeSupport.FREE),ThemeSupport.currentPrice=e,i.priceWithDiscount.then(function(e){0===e?t(ThemeSupport.FREE):(ThemeSupport.currentPrice=e,t(ThemeSupport.PAID))})})}catch(n){e(n)}})},isBlankCanvasStage:isDesignCategory:function isDesignCategory(){return this.getCategoryName()&&this.getCategoryName()===this._designCategoryName},hasSibling:function hasSibling(){var e=Helpers.StageType.isSmartTemplate(),t="Mockups"===Helpers.StageType.getCategoryName();return e&&t&&(!0===this.isSibling()||!0===this.isSiblingOriginal())},isSibling:function isSibling(){return window._is_sibling||!1},isSiblingOriginal:getSiblingUrl:function getSiblingUrl(){return window._sibling_url},isAnimatedTemplate:isVideoV5:function isVideoV5(){return this.getStageInfo()&&18===this.getStageInfo().image_type},isVideo:getSmartTemplateClass:function getSmartTemplateClass(){return Helpers.StageType.isBlankCanvasStage()?UI.SmartTemplate.BlankCanvasStage:UI.SmartTemplate.StageCanvas},pageType:function iDe(){return window.pageType?(window.pageType.header_type=window.headerType,window.pageType):{}},getBundleTags:function getBundleTags(){return this.getTags().filter(function(e){return!0===e.is_bundle})},getControlsViewport:function getControlsViewport(){var n,e;return e=window.structureData,n={},Engine.prototype._treeWalker(e,"layers",function(e){var t=e.name.replace("_original","");if(e.layers&&e.layers.length&&e.layers[0].smartObject){var i=e.layers[0].smartObject;n[t]={width:i.width,height:i.height}}}),this.getControlsViewport=function getControlsViewport(){return n},this.getControlsViewport()},getControlViewport:function getControlViewport(e){return Helpers.StageType.getControlsViewport()[e]},isEyeDropperAllowed:isMockup:includesTag:function includesTag(t){var e=Helpers.StageType.getStageInfo();return!1!==e&&!1!==Array.isArray(e.tags)&&0<e.tags.filter(.length}}),Module(Helpers,"Price")({stage:function stage(e){if(!1===Helpers.Price._checkStageInfo(e))throw new Error("Incorrect stage info object.");var t=Helpers.App.getSubscription(),i={price:Promise.resolve(0),priceWithDiscount:Promise.resolve(0)};if(t&&!t.is_paused)return i;if(Helpers.App.isAvailableForFreePrice(e.is_free))return i;var n=14,s=2;15!==e.image_type&&!0!==Helpers.StageType.isVideoV5()||(n=11,s=3);var r=e.custom_price;r||(r=window.packages[n+":"+s]);var a=Helpers.Price._applyCoupon(r);return{price:Promise.resolve(r),priceWithDiscount:Promise.resolve(a)}},plan:monthlyPlan:function monthlyPlan(){var e;return e=Registry.Plans.get(Registry.Plans.PLAN_MONTHLY),Helpers.Price._getPlanPrice(e)},annualPlan:function annualPlan(){var e;return e=Registry.Plans.get(Registry.Plans.PLAN_ANNUAL),Helpers.Price._getPlanPrice(e)},tax:function tax(e,r,t){return new Promise(function(n,s){recurly.tax({tax_code:"digital",vat_number:t,country:e},function(e,t){var i;null===e?(i=Helpers.Price._calculateTax(r,t),n(i)):s(e)})})},_getPlanPrice:function _getPlanPrice(e){var t,i,n;return n=Helpers.App.getSubscription(),t=e.amount_in_cents/100,i=n?Promise.resolve(t):Helpers.Price._applyCouponToPlan(e,t),{price:Promise.resolve(t),priceWithDiscount:i}},_applyCoupon:function _applyCoupon(i){var n;return null===Helpers.CouponHelper.getCode()?Promise.resolve(i):!1===Helpers.CouponHelper.isValid()?Promise.resolve(i):Helpers.CouponHelper.isValid()?Helpers.CouponHelper.applyTo(Helpers.CouponHelper.TYPE_SINGLE_PURCHASE)?(n=Helpers.CouponHelper.calculatePrice(i),Promise.resolve(n)):Promise.resolve(i):new Promise(function(e){var t=function(){return Helpers.CouponHelper.unbind("coupon.validated",t),Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyTo(Helpers.CouponHelper.TYPE_SINGLE_PURCHASE)?(n=Helpers.CouponHelper.calculatePrice(i),e(n)):e(i)};Helpers.CouponHelper.bind("coupon.validated",t)})},_applyCouponToPlan:function _applyCouponToPlan(i,n){var s;return null===Helpers.CouponHelper.getCode()?Promise.resolve(n):!1===Helpers.CouponHelper.isValid()?Promise.resolve(n):Helpers.CouponHelper.isValid()?Helpers.CouponHelper.applyToPlan(i.recurly_uuid)?(s=Helpers.CouponHelper.calculatePrice(n),Promise.resolve(s)):Promise.resolve(n):new Promise(function(e){var t=function(){return Helpers.CouponHelper.unbind("coupon.validated",t),Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyToPlan(i.recurly_uuid)?(s=Helpers.CouponHelper.calculatePrice(n),e(s)):e(n)};Helpers.CouponHelper.bind("coupon.validated",t)})},_calculateTax:function _calculateTax(e,t){var i;return i={rate:0,amount:0,type:null},t[0]&&(i.rate=t[0].rate,i.amount=e*i.rate,i.type=t[0].type),i},_checkStageInfo:function _checkStageInfo(e){return!!e&&(stagesInfo instanceof Object!=!1&&(e.hasOwnProperty("custom_price")&&e.hasOwnProperty("image_type")))},format:function format(e){return 0<e?(e=(e=e.toFixed(2)).replace(/\.?0+$/,""),e=window.currencyHelper.getSymbol(recurlyConfig.currency)+e):e="Free",e},getAnnualPurchaseSavings:function getAnnualPurchaseSavings(e,t){var i=12*t.amount_in_cents,n=e.amount_in_cents;return parseInt(100-n/i*100)}}),Class("CurrencyHelper")({prototype:{_hashMap:{},init:function init(e){this._hashMap=e},setCurrency:getLabel:function getLabel(e){var t=this._hashMap[e];if(!t)throw new Error("Currency code not supported");return t.label},getSymbol:function getSymbol(e){var t=this._hashMap[e];if(!t)throw new Error("Currency code not supported");return t.symbol}}}),Class(Helpers,"Area")({of:isPortrait:function isPortrait(e,t){return Number(t)>Number(e)},isLandscape:function isLandscape(e,t){return Number(e)>Number(t)},isSquare:getOrientation:function getOrientation(e,t){return Helpers.Area.isPortrait(e,t)?"portrait":Helpers.Area.isLandscape(e,t)?"landscape":"square"},getFactor:function getFactor(e,t){var i=Number(e),n=Number(t);return Helpers.Area.isPortrait(i,n)?n/i:Helpers.Area.isLandscape(i,n)?i/n:1},prototype:{init:function init(e){this._width=Number(e.width),this._height=Number(e.height),this._factor=this.getFactor()},getHeightFromWidth:function getHeightFromWidth(e){return this.isPortrait()?e*this._factor:this.isLandscape()?e/this._factor:e},getWidthFromHeight:function getWidthFromHeight(e){return this.isPortrait()?e/this._factor:this.isLandscape()?e*this._factor:e},isPortrait:function isPortrait(){return Helpers.Area.isPortrait(this._width,this._height)},isLandscape:getOrientation:function getOrientation(){return Helpers.Area.getOrientation(this._width,this._height)},getFactor:}),Module(Registry,"BulkPackages")({_data:null,set:function set(e){if(0===arguments.length)return!1;this._data=e},get:function get(){return this._data}}),Module(Registry,"Credits")({_data:null,set:function set(e){if(0==e)return!1;var t,i,n,s,r,a;if(t=Helpers.App.getSubscription(),i=Registry.UserBulkPackages.hasAny(),n=e.credits_expire_dates,t)for(var o in n.subscriptions)n.subscriptions.hasOwnProperty(o)&&(s=new Date(n.subscriptions[o]).getTime());i&&(Registry.UserBulkPackages.getRemainingExtended()&&n.bulk_purchases.ext_credits.forEach(function(e){for(var t in e)if(e.hasOwnProperty(t)){var i=new Date(e[t]).getTime();a?i<a&&(a=i):a=i}}),Registry.UserBulkPackages.getRemainingStandard()&&n.bulk_purchases.std_credits.forEach(function(e){for(var t in e)if(e.hasOwnProperty(t)){var i=new Date(e[t]).getTime();r?i<r&&(r=i):r=i}})),e._expire_dates={subscription:s,bulk_standard:r,bulk_extended:a},this._data=e},get:function get(){return this._data},getTotal:),Module(Registry,"Licenses")({_data:null,_normalizeToString:function _normalizeToString(t,i){Object.keys(t).forEach(},set:function set(e){if(0===arguments.length)return!1;this._data=e,this._normalizeToString(this.get(),"id")},get:function get(){return this._data},getByKey:function getByKey(t){var i=!1,n=this.get();return Object.keys(n).some(,i}}),Module(Registry,"Plans")({PLAN_MONTHLY:window.ACTIVE_PLANS.MONTHLY_PLAN_CODE,PLAN_ANNUAL:window.ACTIVE_PLANS.ANNUAL_PLAN_CODE,_data:null,set:function set(e){if(0===arguments.length)return!1;this._data=e},get:function get(t){var i=null;return t?(this._data&&this._data.forEach(,i):this._data}}),Module(Registry,"Resolutions")({_data:null,set:function set(e){if(0===arguments.length)return!1;this._data=e},get:function get(){return this._data},getByKey:function getByKey(t,i,e){var n=!1,s=e||this.get();return Object.keys(s).some(function(e){if(s[e][t]===i)return n=s[e],!0}),n}}),Module(Registry,"UserBulkPackages")({_data:null,set:function set(e){if(0==e)return!1;this._data=e},get:function get(){return this._data},hasAny:function hasAny(){return this.get()&&0<this.get().length||!1},getRemainingExtended:function getRemainingExtended(){var i=0;return this.get().forEach(function(e){for(var t in e)e.hasOwnProperty(t)&&(i+=e[t].extendeds.remaining)}),i},getRemainingStandard:function getRemainingStandard(){var i=0;return this.get().forEach(function(e){for(var t in e)e.hasOwnProperty(t)&&(i+=e[t].standards.remaining)}),i}}),Class("DataCollector")({API_KEY:window.braintreeConfig.publicKey,_dataCollectorInstancePromise:null,loadDataCollector:function loadDataCollector(){return this._dataCollectorInstancePromise=braintree.client.create({authorization:this.API_KEY}).then(function(e){return braintree.dataCollector.create({client:e,kount:!0}).then(}),this._dataCollectorInstancePromise},getDataCollector:function getDataCollector(){return this._dataCollectorInstancePromise?this._dataCollectorInstancePromise:this.loadDataCollector()}}),Module(Modals,"Billing")({billingUpdateOptions:null,retryCardBtn:null,updateBillingBtn:null,updateBillingInfoModal:null,failedTransactionModal:null,acceptFailedTransaction:null,_billingUpdateSuccessCallback:null,spinnerPreloaded:!1,setupUpdateCardModal:function setupUpdateCardModal(e){if("/account"===window.location.pathname&&"?update=true"===window.location.search){var t=$("body");t.css("overflow","initial"),t.animate({scrollTop:$(".account-info").offset().top-98},1e3)}else this.updateBillingInfoModal.billingInfo&&this.updateBillingInfoModal.billingInfo.destroy(),this.updateBillingInfoModal.appendChild(new UI.BillingInfo({name:"billingInfo",accountRecord:window.account})),this.updateBillingInfoModal.billingInfo.bind("update.success",function(){Helpers.GlobalEventTracker.billingUpdateSuccess(),Helpers.App.checkPastDueStatus({success:e,applyInvoice:!1})}),this.updateBillingInfoModal.billingInfo.bind("hide.modal.request",function(){this.hideUpdateBillingInfoModal()}.bind(this)),this.updateBillingInfoModal.billingInfo.bind("billing.update.success",function(){this._billingUpdateSuccessCallback()}.bind(this)),this.updateBillingInfoModal.billingInfo.bind("transaction.failed",function(){this.showFailedTransactionModal()}.bind(this)),this.updateBillingInfoModal.activate().billingInfo.render($("#billingInfoModal")),page.dispatch("billing.update");return this},setBillingUpdateCallback:showUpdateBillingInfoModal:function showUpdateBillingInfoModal(){return this.updateBillingInfoModal.activate(),this},hideUpdateBillingInfoModal:function hideUpdateBillingInfoModal(){return this.updateBillingInfoModal.deactivate(),this},unbindBillingInfoHide:function unbindBillingInfoHide(){return this.updateBillingInfoModal.element.off("hidden.bs.modal"),this},bindBillingInfoHide:function bindBillingInfoHide(e){return this.updateBillingInfoModal.element.on("hidden.bs.modal",e),this},bindBillingButtons:function bindBillingButtons(){return this.retryCardBtn=this.billingUpdateOptions.element.find(".retry-card"),this.updateBillingBtn=this.billingUpdateOptions.element.find(".update-billing"),this.optionsCloseBtn=this.billingUpdateOptions.element.find(".close"),this.retryCardBtn.click(function(){var e=$(".alert-dismissible");e.length&&e.remove(),this.retryCardBtn.addClass("loading"),Helpers.GlobalEventTracker.retryCardBtnClick(),this.billingUpdateOptions.element.off("hidden.bs.modal"),Helpers.App.tryToApplyInvoice({success:bind(this),error:function(){this.retryCardBtn.removeClass("loading"),this.showFailedTransactionModal()}.bind(this),applyInvoice:!0})}.bind(this)),this.updateBillingBtn.click(function(){Helpers.GlobalEventTracker.updateBillingClick(),this.billingUpdateOptions.element.off("hidden.bs.modal"),this.setupUpdateCardModal(this._billingUpdateSuccessCallback),this.hideBillingUpdateOptionsModal()}.bind(this)),this.optionsCloseBtn.click(function(){Helpers.GlobalEventTracker.closedOptionsModal()}),this.preloadSpinner(),this},showBillingUpdateOptionsModal:function showBillingUpdateOptionsModal(e){return Helpers.GlobalEventTracker.showBillingUpdateOptionsModal(),this.setBillingUpdateCallback(e),this.billingUpdateOptions.element.off("hidden.bs.modal"),this.billingUpdateOptions.element.removeClass("spinner"),this.billingUpdateOptions.element.on("hidden.bs.modal",e),this.billingUpdateOptions.activate(),this},
hideBillingUpdateOptionsModal:function hideBillingUpdateOptionsModal(){return this.billingUpdateOptions.deactivate(),this},addSpinnerOnBillingOptions:function addSpinnerOnBillingOptions(){return this.billingUpdateOptions.element.addClass("spinner"),this},removeSpinnerOnBillingOptions:function removeSpinnerOnBillingOptions(){return this.billingUpdateOptions.element.removeClass("spinner"),this},handleFixCTA:function handleFixCTA(){Helpers.GlobalEventTracker.fixCTAClick(),this.unbindBillingInfoHide(),this.showBillingUpdateOptionsModal()},showFailedTransactionModal:function showFailedTransactionModal(){var e=$('<div style="" class="alert alert-danger alert-dismissible"></div>'),t=$('<div class="notification-icon"></div><span class="billing_error_message">Your Card Was Declined</span> <a href="#" class="close" style="text-decoration: none;" data-dismiss="alert" aria-label="close">&times;</a></div>');e.append(t);var i=$(".modal-dialog"),n="";Helpers.App.isMobile()?(n=".mobile",i.addClass("has-error"),i=$(".purchase-overlay")):$(".modal-content").addClass("notification_error"),i.find(".server_errors"+n).first().append(e),$(".purchase-overlay").addClass("has-error")},preloadSpinner:function preloadSpinner(){if(!this.spinnerPreloaded){var e=$("<div style=\"background:url('/assets/loaders/7121.gif')\"></div>").appendTo("body");this.spinnerPreloaded=!0,setTimeout(function(){e.remove()},3e3)}}}),window.stagesInfo=stageData.stages,window.backgroundsInfo=stageData.backgrounds,window.handsInfo=stageData.hand_sets,Helpers.App.resetOldTrackerId(),Helpers.App.getTrackerId()||Helpers.App.setTrackerId(window.placeitTrackerId),window.placeitTrackerId=Helpers.App.getTrackerId(),Helpers.App.setUser(window._pl_userInfo),Helpers.App.setCoupon(window._pl_userCoupon),Helpers.App.setPurchases(window._pl_hasPurchases),Helpers.App.setAdmin(window._pl_isAdmin),Helpers.App.setBookmarksCount(window._pl_numberOfBookmarks),Helpers.App.setUserType(window._pl_userType),1==window._pl_hasSubscription&&Helpers.App.setSubscription(window._pl_subscription),Registry.BulkPackages.set(window._pl_bulkPackages),Registry.Plans.set(window._pl_plans),Registry.Licenses.set(window._pl_licenses),Registry.Resolutions.set(window._pl_resolutions),Registry.UserBulkPackages.set(window._pl_userBulkPkg),Registry.Credits.set(window._pl_credits),EventTracker=Class("EventTracker")({_disabled:!1,_totalErrors:0,_timeTotal:0,_startTime:0,_prevEvent:{},_debugMode:!1,send:function(e){var t=Helpers.App.getUser(),i=null;if(Li&&Li.stack&&(Li.events.push({type:e.type,instanceName:e.data&&(e.data.name||e.data.id)||"---",time:Date.now()}),Li.stack.push(Li.events[Li.events.length-1]),20<Li.events.length&&Li.stack.shift()),"undefined"!=typeof e.data?e.data=EventTrackerDataProcessor.process(e.data):e.data={},this._debugMode)"undefined"==typeof e.data||$.isEmptyObject(e.data)?console.log("%c EventTracker > Event pushed %c (w/o data): %c"+e.type,"color: blue; font-weight: bold;","color: gray;","color: green; font-weight: bold;"):(console.groupCollapsed("%c EventTracker > Event pushed: %c"+e.type,"color: blue;","color: green"),console.log(e.data),console.groupEnd());else if(!this._trackerDisabled()){Li&&"array"==typeof Li.stack&&Li.stack.push(e.type),t&&(i=t.id),!1===CookiesUtils.getStatisticsSetting()&&(i=null);var n="",s=window.placeitTrackerId||n,r={site_id:i,event_type:e.type,data:$.extend(e.data,{user_ip:window.userIp,session_id:window.placeitTrackerId,tracker_id:s,referrer:window.referrer,initial_url:window.initialUrl,user_agent:window.navigator.userAgent,user_time_stamp:Date.now()})};this._ajaxSend(r)}},info:function(e){var t=Helpers.App.getUser();if(t)var i=t.id;!1===CookiesUtils.getStatisticsSetting()&&(i=null);var n=window.placeitTrackerId||"",s=0;return Helpers.App.getSubscription()&&(s=1),"Subscription:success:Unlimited"!==e.type&&"Subscription:success:Unlimited:Annual"!==e.type&&$.extend(e.data,{category:window._pl_category,stage_type:window._stageData&&Helpers.StageType._types[window._stageData.stage_data.image_type]||"No Info",tags:Helpers.StageType.getStageTags()||"No Info",background:Helpers.StageType.getBackgroundOrColorID()||"No Info",thumb:window._stageData&&window._stageData.stage_data.large_thumb||"No Info",slug:window._stageData&&window._stageData.stage_data.slug||"No Info",page_category:window._pl_category}),"Subscription:success:Unlimited"!==e.type&&"Subscription:success:Unlimited:Annual"!==e.type||$.extend(e.data,{page_category:window._pl_category}),(Helpers.App.isGuestCheckoutExperimentActive()&&"Subscription:success:Unlimited"===e.type||"Subscription:success:Unlimited:Annual"===e.type)&&$.extend(e.data,{label:"guestcheckout"}),{type:e.type,googleAnalytics:{clientId:this.getGoogleClientId()},amplitude:{sessionId:this.getAmplitudeSessionId()},page:this.pageFields(),data:$.extend(e.data,{user_id:i,user_ip:window.userIp,session_id:window.placeitTrackerId,tracker_id:n,referrer:window.referrer,properties:{email:t.email,status:t.status},type:"track",initial_url:window.initialUrl,user_agent:window.navigator.userAgent,user_time_stamp:Date.now(),hasSubscription:s,experiment_id:Helpers.GlobalEventTracker._getExperimentId()})}},debugTracker:function(){this.enable(),this._debugMode=!0,console.log("%c EventTracker > Log enabled %c (No ajax calls to the actual database)","color: blue","color: gray; font-style: italic;")},pageFields:getGoogleClientId:function(){if(ga&&"function"==typeof ga.getAll)return ga.getAll()[0].get("clientId")},getAmplitudeSessionId:function(){return window.amplitude!==undefined?amplitude.getSessionId():null},enable:function(){console.log("%c EventTracker > Enabled","color: green; font-weight: bold;"),this._disabled=!1,this.send({type:"Placeit:eventTracker:enabled"})},disable:function(){console.log("%c EventTracker > Disabled","color: red; font-weight: bold;"),this.send({type:"Placeit:eventTracker:disabled"}),this._disabled=!0},_trackerDisabled:_ajaxSend:function(e){var t=this;t._prevEvent===e?clearTimeout(t._senderTimeout):t._prevEvent=e,t._senderTimeout=setTimeout(function(){e.error||e.data.error},100)},setupErrorTracking:function(n,s){if(!this._trackerDisabled()){var r=this;$(document).ajaxError(function(e,t,i){r._ajaxSend({error:"ajax error",url:window.location.href,line:"N/A",site_id:Helpers.App.getUser().id,frame:s,meta:{type:e.type,ajaxType:i.type,url:i.url,data:e.data||null,userIp:window.userIp,sessionId:window.placeitTrackerId,trackerId:window.placeitTrackerId,history:n.Li&&n.Li.events}})})}}}),window.UI={},window.UI.Subscriptions={},window.UI.SmartTemplate={Mobile:{}},window.UI.CustomExperience={},window.UI.Tool={},window.UI.EyeDropper={},window.UI.Iframe={},window.UI.Factory={},Class(UI.Factory,"Notification")({createWarningNotification:function createWarningNotification(e){e.closeButtonContent=e.closeButtonContent||'<icon class="p-icon p-sm remove"></icon>';var t=e.message||"",i=new UI.Notification(e);i.getElement().find("span").addClass("alert-container");var n='            <span class="p-icon ic-warning"></span>            <span class="title">'+t+"</span>        ";return i.update(n,"warning-notification"),i},createCookieWarning:function createCookieWarning(){var e=UI.Factory.Notification.createWarningNotification({name:"cookiesWarming",message:"We use cookies to ensure the best experience for you!<br>            <strong>Please enable third party cookies</strong> to sign up or log in."});return e.bind("cookiesWarming:close",function(){e.destroy()}),e},createSizeLimitWarning:function createSizeLimitWarning(e){var t='<span class="bold">Dimensions are out of the limits.</span><br/>';t+="Minimum: wMin x hMin px<br/>".replace("wMin",e.minWidth).replace("hMin",e.minHeight)+"Maximum: wMax x hMax px".replace("wMax",e.maxWidth).replace("hMax",e.maxHeight);var i=new UI.Notification({name:"limitWarning",cssClass:"size-limit-warning"}).alert(t);return i.hide(),i}}),Class("UserIpLocation").includes()({prototype:{endpoint:"",key:"",_keyPrefix:"?key=",_keyParams:"",init:function(e){this.name=e.name,this.endpoint=e.endpoint,this._keyParams=this._keyPrefix+e.key},getIpAddressData:function getIpAddressData(e){e===undefined&&(e="");var n=this,s=this.endpoint+e+this._keyParams;return new Promise(function(t,i){$.ajax({url:s,type:"GET",success:error:function(e){i(e)}})})},_formatResponse:}),Class(UI,"IncompatibleBrowser")({html:'        <div class="incompatible-browser">          <div class="dialog">            <div class="content">              <div class="body">                <div class="message">                  <h3>You\'ve got an outdated browser.<br />You need to upgrade right away!</h3>                  <p>To get the best possible experience using our website we recommend that you upgrade to a newer version or other web browser.</p>                  <p>A list of the most popular web browsers can be found below. Just click on the icons to get to the download page.</p>                  <ul class="list-unstyled browsers-list">                    <li>                      <a href="http://www.google.com/chrome" target="_blank">                        <img src="/assets/browsers/chrome-512.png" border="0" width="70">                        <span>Chrome</span>                      </a>                    </li>                    <li>                      <a href="http://getfirefox.com/" target="_blank">                        <img src="/assets/browsers/firefox-512.png" border="0" width="70">                        <span>Firefox</span>                      </a>                    </li>                    <li>                      <a href="http://www.apple.com/safari/download/" target="_blank">                        <img src="/assets/browsers/safari-512.png" border="0" width="70">                        <span>Safari</span>                      </a>                    </li>                  </ul>                </div>              </div>            </div>          </div>        </div>    ',prototype:{init:function init(){$(document.body).append(this.constructor.html)}}}),Module("GenericDestroySupport")({prototype:{genericDestroy:function genericDestroy(){for(var e in this)-1===["name","element","children","parent"].indexOf(e)&&this.hasOwnProperty(e)&&(this[e]=null);this.element.find("*").off(),this.element.find("*").unbind(),Widget.prototype.destroy.call(this),this.eventListeners=null,this.name=null,this.element=null,this.children=null,this.parent=null}}}),Module("ControllerDestroySupport")({prototype:{controllerDestroy:function controllerDestroy(){!1!==Array.isArray(this.children)&&this.children.forEach(}}}),Class(UI,"Notification").inherits(Widget)({elementClass:"alert",html:'        <div>          <button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>          <div class="notification-icon"></div>          <div class="title-container">            <div class="title hide"></div>            <span></span>          </div>        </div>    ',prototype:{autocloseTimeout:null,closeButtonContent:"",init:function init(e){Boolean(window._pl_featureFlags.pa5849_enable_new_notifications_style)&&(this.constructor.elementClass="alert new-notification"),Widget.prototype.init.call(this,e),this.$body=$(document.body),this.$title=this.element.find(".title"),this.$message=this.element.find("span"),this.closeBtn=this.element.find(".close"),!1===Boolean(window._pl_featureFlags.pa5849_enable_new_notifications_style)&&this.closeBtn.html("&times;"),this.closeButtonContent&&this.closeBtn.html(this.closeButtonContent)},bindEvents:function bindEvents(){this.closeBtn.on("click",function(){this.close()}.bind(this))},alert:function AGe(e,t){return this.update(e,"alert-danger",t),this},warning:function warning(e,t){return this.update(e,"alert-warning",t),this},info:function info(e,t){return this.update(e,"alert-info",t),this},success:function success(e,t){return this.update(e,"alert-success",t),this},update:function update(e,t,i){return this.$body.addClass("with_flash"),this.$message.html(e),this.$title.html(""),Boolean(i)&&(this.$title.removeClass("hide"),this.$title.html(i)),this.element[0].className="",this.element.addClass(t+" "+this.constructor.elementClass),this.bindEvents(),this},autoclose:function autoclose(e){var t=this;this.autocloseTimeout&&clearTimeout(this.autocloseTimeout),this.autocloseTimeout=window.setTimeout(function(){t.close()},e)},close:function close(){this.$body.removeClass("with_flash"),this.closeBtn.off("click"),this.element.detach(),this.dispatch(this.name+":close")}}}),Module("PostMessageSupport")({prototype:{exposedCommands:{"show-subscribe-mailing-modal":{handler:function(){this.appNavBar.showSubscribeMailingModal()}},"show-signup-modal":{handler:,"show-pricing-modal":{handler:function(){this.showPricingModal()}}},origins:["placeit","wishpondpages"],postMessageBindings:function postMessageBindings(){var t=this;window.addEventListener("message",function(e){!1!==t.validatorOrigin(e.origin)&&t.executeCommand(e)},!1)},executeCommand:function(e){var t=e.data.command;if("string"==typeof t){var i=this.exposedCommands[t];void 0!==i&&i.handler.call(this)}},validatorOrigin:function validatorOrigin(t){var i=!1;return this.origins.forEach(,i}}}),Class(UI,"SimpleModal").inherits(Widget).includes(GenericDestroySupport)({_HEADER_CONTENT:"You can replace this content by calling setHeaderContent(yourHTMLContent)",_BODY_CONTENT:"You can replace this content by calling setContent(yourHTMLContent)",html:'        <div class="modal fade in" id="" tabindex="-1" role="dialog" aria-hidden="false" data-backdrop="static" data-keyboard="false">            <div class="modal-dialog">                <div class="modal-content">                    <div class="modal-body"></div>                </div>            </div>        </div>',headerTemplate:'<div class="modal-header"></div>',prototype:{dismissable:!1,hasHeader:!1,headerContent:"",headerClass:"",bodyClass:"",init:function init(e){return Widget.prototype.init.call(this,e),this.headerContent=this.headerContent||this.constructor._HEADER_CONTENT,this.headerContentContainer=this.element.find(".modal-header"),this.bodyContent=this.bodyContent||this.constructor._BODY_CONTENT,this.bodyContentContainer=this.element.find(".modal-body"),this.hasHeader&&(this.setHeaderContent(this.headerContent),this.headerContentContainer.addClass(this.headerClass)),this.setContent(this.bodyContent),this.bodyContentContainer.addClass(this.bodyClass),this.closeBtn=this.element.find(".close"),this.element.attr("id",e.name||""),this.dismissable&&this.element.removeAttr("data-backdrop"),this._bindings(),this},_bindings:function _bindings(){var e=this;return this.closeBtn.click(function(){this.deactivate()}.bind(this)),this.element.on("shown.bs.modal",function(){e.dispatch("shown")}).on("hidden.bs.modal",function(){e.dispatch("hidden")}),this},setHeaderContent:function setHeaderContent(e){return this.headerContent=e||"",0===this.headerContentContainer.length&&(this.headerContentContainer=$(this.constructor.headerTemplate).insertBefore(this.bodyContentContainer)),this.headerContentContainer.html(this.headerContent),this},setContent:function setContent(e){return this.bodyContent=e||"",this.bodyContentContainer.html(this.bodyContent),this},addCloseButton:function addCloseButton(){return this.element[0].insertAdjacentHTML("afterbegin",'<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">\xd7</span></button>'),this},activate:function activate(){return this.active=!0,Widget.prototype.activate.call(this),this.element.modal("show"),this},deactivate:function deactivate(){return this.active=!1,Widget.prototype.deactivate.call(this),this.element.modal("hide"),this},destroy:getBodyContainer:function getBodyContainer(){return this.bodyContentContainer}}}),Module("SubscriptionSupport")({REDIRECT_URL_COOKIE_NAME:"redirect_url_after_buy_subscription",prototype:{$body:$(document.body),modalSubscription:null,_goAnnual:!1,initializeSubscriptionSupport:function initializeSubscriptionSupport(){this.buildSubscriptionModal(),this.buildBillingOptionsModal(),this.buildUpdateBillingInfoModal(),this.buildFailedTransactionModal(),this.buildFailedTransactionModal(),this.instantiatePurchasesModal(),this.buildCTABlockSection(),Helpers.App.isGuestCheckoutExperimentActive()&&(this._createGuestCongratsModal(),this._createGuestFollowingModal(),this._createGuestFreeUserCongratsModal())},subscriptionBindings:function subscriptionBindings(){this.bind("billing.update",function(){this.showPastDueModal()}.bind(this));var e=function(){var e,t=UI.SsoModal.TAB_LOGIN,i=Service.GuestCheckout.getInstance();i.forceSignup()&&(t=UI.SsoModal.TAB_SIGNUP),e={type:"warning",content:'Please create an account to continue your purchase.<br /> Already have an account?                         <a href="#" onclick="event.preventDefault();page.appNavBar.ssoModal.showTab(\''+UI.SsoModal.TAB_LOGIN+'\')" class="trigger_login_link" role="button">Log In</a>',contentForceLogIn:'Please log in to continue your purchase.<br /> Don\'t have an account?                         <a href="#" onclick="event.preventDefault();page.appNavBar.ssoModal.showTab(\''+UI.SsoModal.TAB_SIGNUP+'\')" class="trigger_signup_link" role="button">Sign Up</a> today!'},this.appNavBar.ssoModal.activate(t),!1===i.forceSignup()&&this.appNavBar.ssoModal.showMessage(e),this.pricingModal&&this.pricingModal.deactivate()}.bind(this);this.subscriptionsPartial.bind("subscription.success",function(e){this.subscriptionSuccess(e)}.bind(this)).bind("subscription.failure",function(e){this.subscriptionFail(e)}.bind(this)).bind("subscribe:button:clicked",function(e){this.subscribeButtonClick(e)}).bind("show:purchaseModal",function(){this.purchasesModal.activate()}.bind(this)).bind("purchase.not_logged_in",e),this.ctaBlockSection&&this.ctaBlockSection.bind("subscribe:button:clicked",function(e){this.subscribeButtonClick(e)}).bind(this).bind("subscription.success",bind(this)).bind("purchase.not_logged_in",e),this.pricingPageVariantB&&this.pricingPageVariantB.bind("subscription.success",function(e){this.subscriptionSuccess(e)}.bind(this)),Modals.Billing.bindBillingButtons(),this.dispatch("subscription.bindings:done")},subscriptionSuccess:function subscriptionSuccess(){var e=this.stage&&this.stage instanceof UI.SmartTemplate.StageCanvas;if(Helpers.App.isGuestCheckoutExperimentActive())this._showGuestCongratulationsModal();else{this.appNavBar.updateStatus(),this.footerController&&this.footerController.updatePricingButton(),this.showCelebrationModal(),e&&this.stage.setRemoveWatermarkFlag();var t=Helpers.App.getSubscription();if(t&&!t.is_paused){if(!this.ctaBlockSection)return;var i=this.ctaBlockSection.element.parents("#landing-pages");this.ctaBlockSection.destroy(),i.remove()}}},subscriptionFail:function subscriptionFail(e){var t=e.data&&e.data.message||"Your subscription could not be actived, please try again later";this.flash(t,"alert",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})},buildSubscriptionModal:function buildSubscriptionModal(){this.modalSubscription=new UI.SubscriptionsPartial({name:"subscriptionsPartial",isMobile:Helpers.App.isMobile(),type:"modal",mockupsStagesCount:window._pl_mockupsStagesCount}),this.appendChild(this.modalSubscription),this.subscriptionsPartial.element.on("show.bs.modal",function(){Helpers.App.getSubscription()&&$('.plan-container[data-plan="'+Helpers.App.getSubscription().plan.recurly_uuid+'"]').addClass("disabled").trigger("click")}.bind(this))},buildCTABlockSection:function buildCTABlockSection(){var e=$("#cta-block-section"),t=Helpers.App.getSubscription();1===e.length&&!1===t?(this.ctaBlockSection=new UI.CTABlockSection({name:"ctaBlockSection",element:e}),this.appendChild(this.ctaBlockSection)):(!1===t.is_annual&&(this.ctaBlockSection=new UI.CTABlockSection({name:"ctaBlockSection",element:e}),this.appendChild(this.ctaBlockSection)),e.remove())},buildBillingOptionsModal:function buildBillingOptionsModal(){var e="",t="<p>Your subscription will be canceled within 4 weeks from the first notice we've emailed you if this issue is not resolved.</p>";Helpers.App.subscriptionIsActive()&&(e+=t),e+='<p class="padding-top-10">Please choose from one of the options below</p>                <div class="text-right">                <button class="button btn-default retry-card">Try my card again</button>                <button class="button primary update-billing">Update billing information</button>                </div>',Modals.Billing.billingUpdateOptions=new UI.SimpleModal({name:"billingOptionsModal",hasHeader:!0,headerContent:'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>                    <h4>Your account is past due</h4>',bodyContent:e}).render(this.$body)},buildFailedTransactionModal:function buildFailedTransactionModal(){Modals.Billing.failedTransactionModal=new UI.SimpleModal({name:"failedTransactionModal",hasHeader:!0,headerContent:'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>                    <h4>Sorry we couldn\u2019t process your card!</h4>                    <p class="modal-subheading">Your card was declined.</p>',bodyContent:'<button class="button primary failed-transaction-accept">OK</button>',bodyClass:"text-center"}).render(this.$body)},buildUpdateBillingInfoModal:function buildUpdateBillingInfoModal(){Modals.Billing.updateBillingInfoModal=new UI.SimpleModal({name:"updateBillingInfoModal",hasHeader:!0,headerContent:'<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>                    <h4>You need to update your card!</h4>                    <p class="modal-subheading">You risk losing your downloads. Please update the information below.</p>',bodyContent:'<div id="billingInfoModal" class="form-group update-billing-info"></div>'}).render(this.$body)},showSubscriptionPlans:function showSubscriptionPlans(){return this.subscriptionsPartial.hideFooter(),this.showPricingModal(),this},showBulkPackages:flashPastDue:function flashPastDue(){var e="Your account is past due! <a href='javascript:page.notification.close();Modals.Billing.handleFixCTA()'>Click here</a> to fix";this.flash(e,"warning",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})},showPastDueModal:function showPastDueModal(){Helpers.App.showFlashPastDue()&&this.flashPastDue(),Modals.Billing.showUpdateBillingInfoModal()},hidePastDueModal:function hidePastDueModal(){Modals.Billing.hideUpdateBillingInfoModal()},handlePastDue:function handlePastDue(e){return Modals.Billing.unbindBillingInfoHide().showBillingUpdateOptionsModal(e).bindBillingInfoHide(e),this},showPricingModal:function showPricingModal(){var e=Helpers.App.getUserType();Helpers.GlobalEventTracker.pricingModalStillshots({session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id,button_clicked:"pricing-button",user_type_name:e.name,user_type_id:e.id}),Helpers.App.isPricingPage()||Helpers.App.redirectToPricing()},instantiatePricingModal:function instantiatePricingModal(){var e=this.isLogoPage(),t=Helpers.App.getCookie("experiment_id"),i=!1;return this.pricingModal||(t.includes("zwVyiMLpKS3HHf0h29:SW")&&!0===Helpers.App.isMobile()&&(i=!0),e?this.appendChild(new UI.SinglePurchasesModal({name:"pricingModal",reverseOrder:i,leftChild:new UI.LogoPurchaseModal,rightChild:new UI.SubscriptionsPartial({name:"subscriptionsPartialCompare",type:"modal",title:UI.SinglePurchasesModal.TEXT_SUBSCRIPTIONS_PARTIAL_TITLE,label:"Popular",mockupsStagesCount:window._pl_mockupsStagesCount})})):this.appendChild(new UI.TabbedModal({name:"pricingModal",page:e?"logo-page":null,headerTitle:e?"What Are You Looking For?":null,isMobile:Helpers.App.isMobile(),fade:!1,childs:[{widget:this.subscriptionsPartial,rerender:!0,descriptor:"Subscriptions are <b>60%+ cheaper</b> than buying one at a time!",label:"Subscription Plans",renderInTabList:!0,modalWidth:Helpers.App.isMobile()?"340px":"591px"}]}).bind(this)).render(this.$body,!0),this.bindingsPricingModal()),this.pricingModal},bindingsPricingModal:function bindingsPricingModal(){var t=this;this.pricingModal.bind("modal.shown",function(){this.subscriptionsPartial.showAnimate(),$("body").addClass("pricing-modal-open")}),this.pricingModal.bind("modal.hidden",,this.pricingModal.bind("activate",function(){var e=Helpers.App.getUserType();Helpers.App.isLoggedIn()||$.cookie("pl_open_pricing_unlogged",!0,{path:"/"}),Helpers.GlobalEventTracker.pricingModalStillshots({session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id,button_clicked:t._getSourceClickLocation(),user_type_name:e.name,user_type_id:e.id})}),this.subscriptionsPartial.bind("deactivate",function(){this.pricingModal.deactivate()}.bind(this));var e=function(){var e,t=UI.SsoModal.TAB_LOGIN,i=Service.GuestCheckout.getInstance();i.forceSignup()&&(t=UI.SsoModal.TAB_SIGNUP),e={type:"warning",content:'Please create an account to continue your purchase.<br /> Already have an account?                         <a href="#" onclick="event.preventDefault();page.appNavBar.ssoModal.showTab(\''+UI.SsoModal.TAB_LOGIN+'\')" class="trigger_login_link" role="button">Log In</a>',contentForceLogIn:'Please log in to continue your purchase.<br /> Don\'t have an account?                         <a href="#" onclick="event.preventDefault();page.appNavBar.ssoModal.showTab(\''+UI.SsoModal.TAB_SIGNUP+'\')" class="trigger_signup_link" role="button">Sign Up</a> today!'},this.appNavBar.ssoModal.activate(t),!1===i.forceSignup()&&this.appNavBar.ssoModal.showMessage(e),this.pricingModal&&this.pricingModal.deactivate()}.bind(this);this.pricingModal.bind("subscription.success",function(e){this.appNavBar.updateUserTypeBanner(),this.subscriptionSuccess(e),this.dispatch("subscription.success")}.bind(this)).bind("subscription.failure",bind(this)),this.pricingModal.bind("purchase.not_logged_in",e)},_getSourceClickLocation:function _getSourceClickLocation(){var t="other",i="-pricing-button",e=this.pricingModal._activatedBy;return e&&e.classList.forEach(,t},instantiatePurchasesModal:function instantiatePurchasesModal(){var e=Utils.bindFn(this);if(this.purchasesModal===undefined){var i=this,t=!1;Helpers.App.getCookie("experiment_id").includes("zwVyiMLpKS3HHf0h29:SW")&&!0===Helpers.App.isMobile()&&(t=!0),this.purchasesModal=this._createSinglePurchasesWidget({showPreview:!0,reverseOrder:t}).detach(),this.purchasesModal.bind("purchase.success",function(e,t){e.data&&e.data.target&&"subscriptionsPartialCompare"===e.data.target.name||(i._canShowGuestCongratsModal(e)?i._showGuestCongratulationsModal():i._isGuestFreeUser()?i._showGuestCongratsFreeUserModal():(this.stage.setDownloaded(!0),$.cookie("pl_processing_tracker",!0,{expires:1,path:"/"}),this.appNavBar.updateStatus(null,!0),this.appNavBar.updateUserTypeBanner(),"string"==typeof t?(this.instantiateCouponGiftModal(),this.couponGiftModal.activate()):"boolean"==typeof t&&!1===Helpers.App.isMobileDevice()&&setTimeout(function(){this.flash('You earned a free download for a friend! <a href="javascript:Helpers.App.displayGift()">Click here to redeem!</a>',"info",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})}.bind(this),2e3)))}.bind(this)).bind("purchase.failed",function(e){var t=e.data&&e.data.message||"Sorry the payment could not be processed, please try again.";return e.data&&e.data.errorType?(i.appNavBar.showTooltipError(e.data),i):422===e.data.status?(i.stage.dispatch("stage.error",{error:!0,errorType:"broken-stage",message:t}),i):402===e.data.status?(i.stage.updatePremiumFontsInfo(),page.stage.setPaidTheme(),i):void(e.data&&e.data.target&&"purchaseOverlay"===e.data.target.name||i.flash(t,"alert",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}}))}).bind("purchase.not_logged_in",function(){i.appNavBar.autoModal("purchase")}).bind("low_res_download.not_logged_in",e(this._handleLowResDownloadNotLoggedIn)),Utils.promisifyEventBuilder(this.purchasesModal)("subscription.success").then(function(){!1===Helpers.App.isGuestCheckoutExperimentActive()&&i.purchasesModal.downloadInmediatelyOrActivate(),P.delay(3e3).then(i.dispatch("subscription.success"))})}return this.purchasesModal},_isGuestFreeUser:function _isGuestFreeUser(){return Helpers.App.isGuestCheckoutExperimentActive()&&!1===Service.GuestCheckout.getInstance().canCreateGuestPassword()},_canCreateGuestPassword:function _canCreateGuestPassword(){return Helpers.App.isGuestCheckoutExperimentActive()&&Service.GuestCheckout.getInstance().canCreateGuestPassword()},_canShowGuestCongratsModal:function _canShowGuestCongratsModal(e){return this._canCreateGuestPassword()&&!1===Helpers.App.getSubscription()&&e&&"undefined"==typeof e.data||Helpers.App.isGuestCheckoutExperimentActive()&&e&&e.data&&e.data.message.indexOf("subscription")},_handleLowResDownloadNotLoggedIn:function _handleLowResDownloadNotLoggedIn(){var e=this,t=i=function i(){e.appNavBar.unbind("signup.success",t).unbind("login.success",t),Service.GuestCheckout.getInstance().setForceSignup(!1),e.appNavBar.ssoModal.unbind("modal.hiden",i)};this.purchasesModal.deactivate(),this.appNavBar.ssoModal.activate().bind("modal.hiden",i),this.appNavBar.bind("signup.success",t).bind("login.success",t)},_purchaseOpenEventHandler:function _purchaseOpenEventHandler(){/update/.test(window.location.search)&&this.billingInfo.destroy()},_purchaseClosedEventHandler:function _purchaseClosedEventHandler(){if(/update/.test(window.location.search)){var e=window.recurly.Recurly;window.recurly=new e,window.recurly.Recurly=e,this._instantiateBillingInfo()}},_instantiateBillingInfo:function _instantiateBillingInfo(){this.appendChild(new UI.BillingInfo({name:"billingInfo",accountRecord:window.account})),this.billingInfo.bind("update.success",function(){Helpers.App.checkPastDueStatus({success:applyInvoice:!1})}),(that=this).billingInfo.bind("update.failed",function(e){that.flash(e.data,"alert",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})}),this.billingInfo.render($("#billingInfo"))},_configureRecurly:function _configureRecurly(){var e={currency:window.recurlyConfig.currency,publicKey:window.recurlyConfig.publicKey};recurly.configure(e)},bindPurchasesEvents:function bindPurchasesEvents(e){var i=this;e.bind("purchase.success",function(){$.cookie("pl_processing_tracker",!0,{expires:1,path:"/"}),i.appNavBar.updateStatus(null,!0),i.appNavBar.updateUserTypeBanner()}).bind("purchase.failed",function(e){var t=e.data&&e.data.message||"Sorry the download could not be processed, please try again.";e.data&&e.data.errorType?i.appNavBar.showTooltipError(e.data):i.flash(t,"alert",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})})},showChangeSubscriptionPlanModal:function showChangeSubscriptionPlanModal(e){var t=Helpers.App.getSubscription();!1!==t&&(this._instantiateChangeSubscriptionPlanModal(t),e?this.subscriptionChangePlanModal.showConfirmation():this.subscriptionChangePlanModal.show())},_instantiateChangeSubscriptionPlanModal:function _instantiateChangeSubscriptionPlanModal(e){var t=this;t.subscriptionChangePlanModal||(t.appendChild(new UI.SubscriptionPlanChangeModal({name:"subscriptionChangePlanModal",userCurrentPlan:e.plan.recurly_uuid,isAnnualPlan:e.is_annual})).render(t.$body),t.subscriptionChangePlanModal.bind("select:plan",function(e){t.subscriptionChangePlanModal.setLoading(),t.changeSubscriptionPlan(e.data.selectedPlan)}))},changeSubscriptionPlan:function changeSubscriptionPlan(e){var t=this;t.subscriptionChangePlanModal._switchSubscriptionPlan(e).then(["catch"](function(){t.subscriptionChangePlanModal.close(),t.flash("Changing your Subscription Plan was not successful!","alert",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})})},
showGoAnnualModal:_instantiateGoAnnualModal:function _instantiateGoAnnualModal(){var e=this,t=Helpers.App.getSubscription(),i="apple_app_store"===t.connected_to,n="default";e.goAnnualModal||(i&&Helpers.App.isAppleDevice()?n="appStoreNative":i?n="appStoreForeing":"google_play_store"===t.connected_to&&(n="googlePlay"),e.appendChild(new UI.GoAnnualModal({name:"goAnnualModal",modalView:n})).render(e.$body),e.goAnnualModal.bind("buttonClick",function(){e._goAnnual=!0,e.showChangeSubscriptionPlanModal(!0)}))},_checkChangePlanCookie:function _checkChangePlanCookie(){null!==$.cookie("CHANGED_PLAN_COOKIE")&&(Helpers.App.getSubscription().is_annual?this.showCelebrationModal():this.flash("Subscription Plan was successfully updated","success",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}}),$.removeCookie("CHANGED_PLAN_COOKIE"))},_instantiateCelebrationModal:function _instantiateCelebrationModal(){var e=this,t=Helpers.App.getSubscription();e.celebrationModal||(e.appendChild(new UI.CelebrationModal({name:"celebrationModal",isAnnual:t.is_annual})).render(e.$body),e.celebrationModal.bind("goAnnualClick",)},showCelebrationModal:function showCelebrationModal(){Helpers.SubscriptionHelper.shouldDisableSwitchPlans()||(this._instantiateCelebrationModal(),this.celebrationModal.show(),this._bindCelebrationModal())},_bindCelebrationModal:function _bindCelebrationModal(){this.celebrationModal.element.bind("hide.bs.modal",function(){if(!this._goAnnual&&Boolean(Helpers.App.getCookie(this.constructor.REDIRECT_URL_COOKIE_NAME))){var e=Helpers.App.getCookie(this.constructor.REDIRECT_URL_COOKIE_NAME);Helpers.App.deleteCookie(this.constructor.REDIRECT_URL_COOKIE_NAME),window.location.href=e}}.bind(this))},showSubscriptionModal:function showSubscriptionModal(){Helpers.App.isGuestCheckoutExperimentActive()&&(Helpers.App.getUser().id=0,Helpers.App.setSubscription(!1));var e=Helpers.App.getSubscription();this.appNavBar.closeHamburgerMenu(),e&&e.can_upgrade_to_annual?this.showGoAnnualModal():this.showPricingModal()},_createSinglePurchasesWidget:_createGuestCongratsModal:function _createGuestCongratsModal(){var e=Utils.bindFn(this);this._guestCongratsModal=new UI.SimpleModal({name:"GuestCongratulationsView",cssClass:"guest-congratulations-modal",hasHeader:!1}),!1===Boolean(this._guestCongratsModal)&&alert("Error create SimpleModal"),this._guestCongratsModal.setContent(""),this._guestCongratsModalBody=this._guestCongratsModal.getBodyContainer(),this._guestCongratsModalView=new UI.GuestCongratulationsView,this._guestCongratsModalView.bind("accept.click",e(this._guestAcceptCongratsClickHandler)),this._guestCongratsModal.appendChild(this._guestCongratsModalView).render(this._guestCongratsModalBody)},_showGuestCongratulationsModal:function _showGuestCongratulationsModal(){var e=Service.GuestCheckout.getInstance().getGuestEmail(),t="download"!==Helpers.App.getSubscribeFromModal();this._guestCongratsModalView.setEmail(e),this._guestFollowingModalView.setEmail(e),this._guestCongratsModalView.setCreateYourPasswordLink(Service.GuestCheckout.getInstance().getToken()),t&&this._guestCongratsModalView.showSubscriberMode(),!1===Service.GuestCheckout.getInstance().canCreateGuestPassword()&&this._guestCongratsModalView.hideCreateYourPasswordSection(),this._guestCongratsModal.activate()},_guestAcceptCongratsClickHandler:_createGuestFreeUserCongratsModal:function _createGuestFreeUserCongratsModal(){var e=Utils.bindFn(this);this._guestCongratsFreeUserModal=new UI.SimpleModal({name:"GuestCongratulationsFreeUserView",cssClass:"guest-congratulations-free-user-modal",hasHeader:!1}),!1===Boolean(this._guestCongratsFreeUserModal)&&alert("Error create SimpleModal"),this._guestCongratsFreeUserModal.setContent(""),this._guestCongratsFreeUserModalBody=this._guestCongratsFreeUserModal.getBodyContainer(),this._guestCongratsFreeUserModalView=new UI.GuestCongratulationsFreeUserView,this._guestCongratsFreeUserModalView.bind("accept.click",e(this._guestAcceptCongratsFreeUserClickHandler)),this._guestCongratsFreeUserModal.appendChild(this._guestCongratsFreeUserModalView).render(this._guestCongratsFreeUserModalBody)},_guestAcceptCongratsFreeUserClickHandler:function _guestAcceptCongratsFreeUserClickHandler(){!1===Helpers.App.getSubscription()?this.appNavBar.updateStatus(null,!0):this.directDownload(),this._guestCongratsFreeUserModal.deactivate()},_showGuestCongratsFreeUserModal:_createGuestFollowingModal:function _createGuestFollowingModal(){var e=Utils.bindFn(this);this._guestFollowingModal=new UI.SimpleModal({name:"GuestFollowingView",cssClass:"guest-following-modal",hasHeader:!1}),!1===Boolean(this._guestFollowingModal)&&alert("Error create SimpleModal"),this._guestFollowingModal.setContent(""),this._guestFollowingModalBody=this._guestFollowingModal.getBodyContainer(),this._guestFollowingModalView=new UI.GuestFollowingView,this._guestFollowingModalView.bind("confirmation.click",e(this._guestConfirmFollowingClickHandler)),this._guestFollowingModal.appendChild(this._guestFollowingModalView).render(this._guestFollowingModalBody)},_guestConfirmFollowingClickHandler:function _guestConfirmFollowingClickHandler(){if(this._guestFollowingModal.deactivate(),!1!==Helpers.StageType.isStage())if(!1!==Helpers.App.getSubscription()){if(Service.MultiplePurchase.getInstance().isMultiplePurchase()){var i=this,e=function(){return new Promise(function(e,t){return i.appNavBar.updateStatus(null,!0),t()})};P.retryableDelayed(e,10,3e3)()}this.directDownload()}else this.appNavBar.updateStatus(null,!0)}}}),Module("PageSupport")({prototype:{_ifIosDevice:function ifIosDevice(){var e=navigator.userAgent,t=/iPad|iPhone|iPod/.test(e),i=/OS 11_0|OS 11_1|OS 11_2/.test(e);return!(!t||!i)},_stylingOnInit:function _stylingOnInit(){Helpers.App.isMobile()&&this.$body.addClass("mobile"),Helpers.App.isMobileDevice()&&this.$body.addClass("is-mobile-device"),this._ifIosDevice()&&$("body").addClass("iosBugFixCaret"),$(".stage-info").css("visibility","visible"),$(".footer-wrapper").css("visibility","visible")},_checkUrlLength:function _checkUrlLength(){var e=location.href.length,t=2083,i={};.8*t<=e&&e<t&&(i={error:!0,message:"Warning: Maximum url length limit is almost reached ("+location.href.length+")",eventType:"url.threshold"}),t<=e&&(i={error:!0,message:"Alert: Maximum url length has been exceeded ("+location.href.length+")",eventType:"url.lengthExceeded"}),i.error&&Helpers.GlobalEventTracker.track(i.eventType,i)},notLoggedInHandler:function notLoggedInHandler(){var e,t=UI.SsoModal.TAB_LOGIN,i=Service.GuestCheckout.getInstance();return console.log("notLoggedInHandler"),e={type:"warning",content:'Please create an account to continue your purchase.<br /> Already have an account?                     <a href="#" onclick="event.preventDefault();page.appNavBar.ssoModal.showTab(\''+UI.SsoModal.TAB_LOGIN+'\')" class="trigger_login_link" role="button">Log In</a>',contentForceLogIn:'Please log in to continue your purchase.<br /> Don\'t have an account?                     <a href="#" onclick="event.preventDefault();page.appNavBar.ssoModal.showTab(\''+UI.SsoModal.TAB_SIGNUP+'\')" class="trigger_signup_link" role="button">Sign Up</a> today!'},i.forceSignup()&&(t=UI.SsoModal.TAB_SIGNUP),Helpers.App.isGuestCheckoutExperimentActive()&&Helpers.StageType.getTheme().then(Utils.bindFn(this)(this._guestCheckoutForFreeStagesHandler))["catch"](function(e){throw new Error(e)}),this.appNavBar.ssoModal.activate(t),i.forceSignup()||this.appNavBar.ssoModal.showMessage(e),this},_guestCheckoutForFreeStagesHandler:function _guestCheckoutForFreeStagesHandler(e){var t=ThemeSupport.FREE===e&&"download"===Helpers.App.getSubscribeFromModal();this.appNavBar.ssoModal.showGuestCheckoutSection(),t&&this.appNavBar.ssoModal.hideGuestCheckoutSection()},flash:function flash(e,t,i){(t=t||"info")in this.notification?this.notification[t](e):this.notification.update(e,t),this.notification.render($("body"),!0),i&&i.autoclose&&i.autoclose.milliseconds&&this.notification.autoclose(i.autoclose.milliseconds),Helpers.App.isCustomExperience()?this.customExperience.checkOffsets():this.isHomepage()&&this.homePageController.checkOffsets()},getStageInfoFromURLParams:function getStageInfoFromURLParams(){var e,t,i,n,s,r;return e=window.location.search,t=/stages\/([a-z0-9_-]+)/i,null!==(i=window.location.href.match(t))&&"undefined"!=typeof i[1]?i[1]:window._stageSlug,n=/background=([a-z0-9_-]+)/i,s=e.match(n),r={valid:!1,id:null,backgroundId:null},window._stageData&&(r.valid=!0,r.id=window._stageData.stage_data.id),null!==r.id&&null!==s&&"undefined"!=typeof s[1]&&0<s[1].length&&(r.backgroundId=s[1]),r},isLogoPage:function isLogoPage(){return Helpers.App.isLogoPage()},isHomepage:function isHomepage(){var e="home"===window.pageType.type||"category"===window.pageType.type||"search"===window.pageType.type||window.pageType.no_results,t=(this.getStageInfoFromURLParams().valid,this.isBookmarksPage()),i=this.isCustomExperience();return!0===e&&""===window._stageSlug&&!1===window.isLandingPage&&!1===t&&!1===i},isStagePage:function isStagePage(){return"stage"===window.pageType.type&&!1===window.pageType.no_results},isCustomExperience:function isCustomExperience(){return"custom_experiences"===window.pageType.type&&!1===window.pageType.no_results},isCustomPage:isTagPage:isCategoryPage:function e(){var t,e;return t=window.location.pathname,!(e=!1)===this.constructor.CATEGORY_NAME_EXPRESSION.test(t)&&""===window.location.hash&&(e=!0),e},isBookmarksPage:function isBookmarksPage(){return 0<$(".page-container.bookmarks").length},updateSeoMetas:function updateSeoMetas(){var e=Helpers.StageType.getStageInfo();return this.metaTitle.html(e.meta_title),this.metaDescription.attr("content",e.meta_desc),this}}}),Class(UI,"ThumbnailPreviewOverlay").inherits(Widget).includes(BubblingSupport)({html:'<div>            <div class="close-button">                <button type="button" class="close" data-dismiss="modal" aria-label="Close">                    <span aria-hidden="true">\xd7</span>                </button>            </div>            <div class="wrapper">                <div class="header">                    <h3 class="previews-title"></h3>                    <a class="button secondary previews-anchor">View All</a>                </div>                <div class="previews-container"></div>            </div>        </div>',elementClass:"thumbnail-overlay",prototype:{init:function init(e){var t=this;Widget.prototype.init.call(this,e),this._previews=[],this.$previewsContainer=this.element.find(".previews-container"),this.$closeButton=this.element.find(".close-button"),this.$title=this.element.find(".previews-title"),this.$listAnchor=this.element.find(".previews-anchor"),this.$header=this.element.find(".header"),this._debouncedScrollHandler=Helpers.App.debounce(t._checkItemsInViewport.bind(t),100),this._boundHideHandler=this.hide.bind(this),this.$previewsContainer.bind("scroll",this._debouncedScrollHandler),this.$closeButton.bind("click",this._boundHideHandler),this.element.bind("click",this._boundHideHandler),this.$previewsContainer.bind("click",function(e){e.stopPropagation()}),this.hide()},setPreviews:function setPreviews(e){this._renderPreviews(e.previews),e.title.length&&e.listAnchor.length?(this.$header.show(),this._setTitle(e.title),this._setListAnchor(e.listAnchor)):this.$header.hide(),this.show()},_setTitle:_setListAnchor:function _setListAnchor(e){this.$listAnchor.attr("href",e)},hide:function hide(){this.children.forEach(function(e){e.disableBookmark()}),Widget.prototype.hide.call(this)},show:function show(){Widget.prototype.show.call(this),this._checkItemsInViewport()},_renderPreviews:function _renderPreviews(e){this.clearPreviewItems();var i=this;e.forEach(function(e,t){e.name="previewItem"+t,i.appendChild(new UI.PreviewOverlayItem(e)).render(i.$previewsContainer)}),i.bind("bookmarked",function(){!1===Helpers.App.isLoggedIn()&&i.hide()})},getPreviewItems:clearPreviewItems:function clearPreviewItems(){for(;this.children.length;)this.children.pop().destroy()},_checkItemsInViewport:function _checkItemsInViewport(){var s=this.$previewsContainer.get(0).scrollLeft,r=s+this.$previewsContainer.get(0).offsetWidth;this.children.forEach(function(e){if(!0===e.isVideo){var t=e.element.get(0),i=t.offsetLeft,n=t.offsetLeft+t.offsetWidth;i<=r&&s<=n?e.playVideo():e.pauseVideo()}})}}}),Class(UI,"StagesListItem").inherits(Widget).includes(BubblingSupport)({prototype:{isMobile:!1,hasVideo:!0,init:function(e){Widget.prototype.init.call(this,e),this.videoLoadPromise=null,this.$video=this.element.find("video"),this.$image=this.element.find("img"),this.$container=this.element.find(".img-container"),!1===this.isMobile&&!0===this.hasVideo&&this._bindEvents()},_bindEvents:function _bindEvents(){this._mouseEnterHandler=this._onMouseEnter.bind(this),this._mouseLeaveHandler=this._onMouseLeave.bind(this),this.$container.mouseenter(this._mouseEnterHandler),this.$container.mouseleave(this._mouseLeaveHandler)},_onMouseEnter:function _onMouseEnter(){this.$video.attr("loop",!0),this.playVideoFlow()},_onMouseLeave:function _onMouseLeave(){this.videoLoadPromise&&(this.videoLoadPromise.cancel(),this.videoLoadPromise=null),this.$video.removeAttr("loop"),this.stopVideoFlow()},_isVideoReady:function _isVideoReady(){return 4===this.$video.get(0).readyState},_loadVideo:function _loadVideo(){var i=this;return P.cancelable(function(){return new Promise(function(e,t){i.$video.on("loadeddata",e),i.$video.on("error",t),i.$video.attr("src",i.$video.attr("data-src"))})})()},_showVideo:function _showVideo(){var t=this;return new Promise(function(e){t.isMobile?t.$video.fadeIn(100,e):(t.$video.css({display:"block",visibility:"visible"}),e())})},_hideVideo:function _hideVideo(){var t=this;return new Promise(function(e){t.isMobile?t.$video.fadeOut(100,e):(t.$video.css("visibility","hidden"),e())})},_onEndedVideo:function _onEndedVideo(){this.dispatch("videoEnded")},_startPlayVideo:_playVideo:function _playVideo(){var e=this;this._endedVideoHandler=this._onEndedVideo.bind(this),this._startPlayVideoHandler=this._startPlayVideo.bind(this),e.$video.off("loadeddata"),e.$video.off("error"),e.$video.off("ended"),e._showVideo().then(this._startPlayVideoHandler)["catch"](function(){!0===window.devMode&&console.log("PAUSE VIDEO ERROR")})["finally"](},playVideoFlow:function playVideoFlow(){var e=this;!0===e._isVideoReady()?e._playVideo():(e.videoLoadPromise=e._loadVideo(),e.videoLoadPromise.then(function(){e._playVideo()})["catch"]()},_stopVideo:function _stopVideo(){this.$video.get(0).pause(),this.$video.get(0).currentTime=0},stopVideoFlow:function stopVideoFlow(){this._stopVideoHandler=this._stopVideo.bind(this),this._hideVideo().then(this._stopVideoHandler)}}}),Class(UI,"StagesList").inherits(Widget).includes(BubblingSupport)({prototype:{isMobile:!1,hasVideo:!0,init:function(e){Widget.prototype.init.call(this,e);var i=this;this.element.children().each(function(e,t){i.appendChild(new UI.StagesListItem({element:$(t),isMobile:i.isMobile,hasVideo:i.hasVideo}))}),!0===this.isMobile&&!0===this.hasVideo&&(this.bindEvents(),this._startRandomPlay())},bindEvents:function bindEvents(){var t=this;t.bind("videoEnded",},_startRandomPlay:function _startRandomPlay(){this.children[Math.floor(Math.random()*this.children.length)].playVideoFlow()}}}),Class(UI,"PreviewOverlayItem").inherits(Widget).includes(BubblingSupport,GenericDestroySupport,AlgoliaAnalyticsSupport)({elementClass:"preview-item",html:'<div>            <div class="preview-image"></div>            <div class="figcaption">            <p class="figure-title truncate"></p>            </div>            <a class="anchor button primary">Edit this Template</a>            <div class="actions">            </div>        </div>',progressBar:'<div class="progress-bar">                    <div class="progress-value"></div>                </div>',video:'<video loop autoplay muted playsinline allowfullscreen="false"/>',img:"<img />",assetLink:'<a href=""></a>',VALID_VIDEO_PROGRESSBAR:"15",prototype:{init:function init(e){Widget.prototype.init.call(this,e),this.$previewImage=this.element.find(".preview-image"),this.$anchor=this.element.find(".anchor"),this.$actionsContainer=this.element.find(".actions"),this.$title=this.element.find(".figure-title"),this.element.attr("data-stage-id",this.stageId),this.title&&this.$title.html(this.title),this.imageSrc!==undefined&&0<this.imageSrc.length&&this._createImage(this.imageSrc),this.videoSrc!==undefined&&0<this.videoSrc.length&&this._createVideo(this.videoSrc),this.$actions&&this.$actionsContainer.append(this.$actions),this._setAnchor(this.anchor),this._createBookmark(this.isBookmarked),this._setAlgoliaAnalyticsBindings()},_createVideo:function _createVideo(e){this.video=$(this.constructor.video),this.video.attr("src",e),this.video.attr("type","video/mp4"),this.imageAnchor?(this.assetLinked=$(this.constructor.assetLink),this.assetLinked.attr("href",this.imageAnchor),this.$previewImage.append(this.assetLinked),this.assetLinked.append(this.video)):this.$previewImage.append(this.video),this.imageType===this.constructor.VALID_VIDEO_PROGRESSBAR&&(this.$progressBar=$(this.constructor.progressBar),this.$progressValue=this.$progressBar.find(".progress-value"),this.$previewImage.append(this.$progressBar),this._boundTimeUpdateHandler=this._timeUpdateHandler.bind(this),this.video.bind("timeupdate",this._boundTimeUpdateHandler))},_timeUpdateHandler:function _timeUpdateHandler(){var e=this.video.get(0),t=Math.floor(100/e.duration*e.currentTime);this.$progressValue.css("width",t+"%")},_createImage:function _createImage(e){var t=$(this.constructor.img);t.attr("src",e),this.imageAnchor?(this.assetLinked=$(this.constructor.assetLink),this.assetLinked.attr("href",this.imageAnchor),this.$previewImage.append(this.assetLinked),this.assetLinked.append(t)):this.$previewImage.append(t)},_createBookmark:function _createBookmark(e){var t=this;this.element.addClass("bookmarkable"),this.element.attr("data-bookmarked",e),0<this.bookmark.length?(this._bookmarkContext=this.bookmark.context,this.element.append(this.bookmark),this.bookmark.bind("click",function(){t.dispatch("bookmarked")})):(this.appendChild(new UI.Bookmark({name:"bookmark",element:this.element})),this.bookmark.bind("notLoggedIn",)},_setAnchor:function _setAnchor(e){this.$anchor.attr("href",e)},playVideo:function playVideo(){this.video.get(0).play()},pauseVideo:cleanUpVideo:function cleanUpVideo(){if(!1!==Helpers.App.isMobile()&&0!==this.video.length){var e=this.video;this.video=this.video.clone(!0,!0),this.video.load(),this.video.hide(),this.video.insertAfter(e),e.hide(),e[0].src="",e[0].load(),e.remove()}},destroy:function destroy(){!0===this.isVideo&&this.cleanUpVideo(),this.genericDestroy()},disableBookmark:function disableBookmark(){this._bookmarkContext&&$(this._bookmarkContext).append(this.bookmark)}}}),Module("SkeletonCardSupport")({prototype:{bindSkeleton:function bindSkeleton(e,t){e=e||this,t=t||"render",this.bind(t,}}}),Module("SkeletonCardManagerSupport")({skeletonStrategy:{TextControl:"_hideLeftSideBarSkeleton",CustomGraphicControl:"_hideLeftSideBarSkeleton",AlternateValueControl:"_hideLeftSideBarSkeleton",MultiControl:"_hideRightSideBarSkeleton",SidebarAudioControl:"_hideRightSideBarSkeleton",ColorControl:"_hideRightSideBarSkeleton",VisibleControl:"_hideLeftSideBarSkeleton",StageCanvas:"_hideStageSkeleton",BlankCanvasStage:"_hideStageSkeleton",StageSmartVideoProduct:"_hideStageVideoSkeleton",VideoV5Stage:"_hideStageVideoSkeleton",SavedConfigurations:"_hideCarouselSkeleton",SavedDraftsContainer:"_hideCarouselSkeleton",Carousel:"_hideCarouselSkeleton",ListContainer:"_hideCarouselSkeleton",StageGrid:"_hideGridSkeleton",VideoSlides:"_hideSlidesSkeleton",Tags:"_hideTagsSkeleton",TextControlGroup:"_hideLeftSideBarSkeleton",SiblingControl:"_hideRightSideBarSkeleton",ColorPanelContainerVideo:"_hideRightSideBarSkeleton",ColorPanelContainer:"_hideRightSideBarSkeleton"},TIME_TO_HIDE_ALL_SKELETONS:1e4,TIME_TO_HIDE_SKELETONS_IN_VIDEO:1500,prototype:{_timer:null,_timeoutToClearSkeletons:null,bindSkeletonManager:function bindSkeletonManager(){this.$stageSkeleton=$(".stage-skeleton"),this.$pageApplication=$("#page-application"),this.$stageObjectImage=$(".stage-object-image"),this.$stageObject=$(".stage-object"),this.$tabbedSkeleton=$(".skeleton-cards.tabbed-skeleton"),this.$mobileControlsContainer=$(".stage-mobile-controls-container"),this._buildTimer(0),this.bind("contentReady",function(e,t){this._hideSkeletonStrategy(t)}),$(window).on("load",this._clearSkeletons.bind(this,!0)),this.bind("videoSlide.onSelectedSlideChange",this._changeSlideHandler.bind(this))},_clearSkeletons:function _clearSkeletons(e){var t=this;clearTimeout(t._timeoutToClearSkeletons),t._timeoutToClearSkeletons=setTimeout(function(){(t.leftSideBar||t.rightSideBar)&&(t._hideLeftSideBarSkeleton(),t._hideRightSideBarSkeleton()),!0===e&&$(".skeleton-cards").hide()},SkeletonCardManagerSupport.TIME_TO_HIDE_ALL_SKELETONS)},_changeSlideHandler:function _changeSlideHandler(){this._showVideoSkeletons(),this._cancelTimer(),this._buildTimer(SkeletonCardManagerSupport.TIME_TO_HIDE_SKELETONS_IN_VIDEO),this._timer.then(this._clearSkeletons(!1))},_buildTimer:function _buildTimer(e){this._timer=P.cancelable(()},_cancelTimer:_rejection:function _rejection(e){if("Cancelation Error"!==e.message)return e;console.warn("Cancelation Error")},_hideSkeletonStrategy:function _hideSkeletonStrategy(e){var t,i;if(!e.originalDispatcher||!e.originalDispatcher.constructor)throw"A Neon widget object must be passed as originalDispatcher";if(t=e.originalDispatcher.constructor.className,(i=SkeletonCardManagerSupport.skeletonStrategy[t])===undefined)throw t+" has not behavior defined";this[i](e)},_hideLeftSideBarSkeleton:function _hideLeftSideBarSkeleton(){var e=this;this._timer.then(function(){!1===Helpers.App.isMobile()?e._hideLeftSideBarSkeletonAndShowSidebarItems():e._hideTabbedContainerSkeleton()})["catch"](this._rejection)},_hideLeftSideBarSkeletonAndShowSidebarItems:function _hideLeftSideBarSkeletonAndShowSidebarItems(){this.leftSideBar.getElement().find(".skeleton-cards").hide(),this.leftSideBar.getElement().removeClass("not-show")},_hideRightSideBarSkeleton:function _hideRightSideBarSkeleton(){var e=this;this._timer.then(function(){!1===Helpers.App.isMobile()?e._hideRightSideBarSkeletonAndShowSidebarItems():e._hideTabbedContainerSkeleton()})["catch"](this._rejection)},_hideRightSideBarSkeletonAndShowSidebarItems:function _hideRightSideBarSkeletonAndShowSidebarItems(){this.rightSideBar.getElement().find(".skeleton-cards").hide(),this.rightSideBar.getElement().removeClass("not-show")},_hideStageSkeleton:function _hideStageSkeleton(e){this.$stageSkeleton.hide(),e.originalDispatcher.showStageImageVisible(),$("form#page-application").attr("style","visibility:visible")},_hideStageVideoSkeleton:function _hideStageVideoSkeleton(e){var t=this;this._timer.then(function(){t.$stageSkeleton.hide(),$("main#main-content-wrapper").removeAttr("style"),!0!==e.originalDispatcher.slideFetchFailed&&t._showStageVideo(),e.originalDispatcher.dispatch("video-skeleton:hidden")})["catch"](this._rejection)},_showStageVideo:function _showStageVideo(){this.$stageObjectImage.css("display","flex"),this.$stageObjectImage.css("visibility","visible"),this.$pageApplication.css("visibility","visible"),this.$stageObject.css("visibility","visible").removeClass("hide")},_hideGridSkeleton:function _hideGridSkeleton(e){var t=$(e.originalDispatcher.element).attr("data-grid-name");if(t!==undefined){$("."+t+"-skeleton").hide();var i=$(e.originalDispatcher.element);i.hasClass("is-hidden")?(i.removeClass("is-hidden"),e.originalDispatcher.setPosition()):i.css("visibility","visible")}},_hideCarouselSkeleton:function _hideCarouselSkeleton(e){var t=$(e.originalDispatcher.element).attr("data-carousel-name");if(t!==undefined){$("."+t+"-skeleton").hide();var i=$(e.originalDispatcher.element);i.hasClass("is-hidden")&&(i.removeClass("is-hidden"),e.originalDispatcher.setPosition&&e.originalDispatcher.setPosition()),i.css("visibility","visible")}},_hideTagsSkeleton:_hideTabbedContainerSkeleton:function _hideTabbedContainerSkeleton(){this.$tabbedSkeleton.hide(),this.$mobileControlsContainer.css("visibility","visible")},_hideSlidesSkeleton:function _hideSlidesSkeleton(){$(".videos-slides-skeleton").hide(),$(".video-slides-container").css("visibility","visible")},_showVideoSkeletons:function _showVideoSkeletons(){this.$stageSkeleton.show(),this._hideStageVideo(),this._showTabbedContainerSkeleton()},_hideStageVideo:function _hideStageVideo(){this.$stageObjectImage.css("display","none"),this.$pageApplication.css("visibility","hidden"),this.$stageObjectImage.css("visibility","hidden"),this.$stageObject.css("visibility","hidden").addClass("hide")},_showTabbedContainerSkeleton:function _showTabbedContainerSkeleton(){!0===Helpers.App.isMobile()&&(this.$tabbedSkeleton.show(),this.$mobileControlsContainer.css("visibility","hidden"))}}}),Module("SkeletonCardBuilder")({skeletonBuildStrategy:{leftSidebarSkeleton:"_buildLeftSideBarSkeleton",rightSidebarSkeleton:"_buildRightSideBarSkeleton"},buildSkeleton:function buildSkeleton(e){var t=SkeletonCardBuilder.skeletonBuildStrategy[e];if(t===undefined)throw e+" has not behavior defined";return SkeletonCardBuilder[t]()},_buildLeftSideBarSkeleton:function _buildLeftSideBarSkeleton(){for(var e='<div class="skeleton-cards">                                 <div class="label-skeleton"></div>                                <div class="sidebar-skeleton-textcontrols"> ',t=0;t<9;t++)e+='<div class="sidebar-skeleton-textcontrols-item"></div> ';e+='</div> <div class="video-sidebar-skeleton-textcontrols"> ';for(t=0;t<3;t++)e+='<div class="sidebar-skeleton-textcontrols-item"></div> ';return e+='</div>                         <div class="textbox-skeleton m"></div>                         </div>  ',$(e)[0]},_buildRightSideBarSkeleton:function _buildRightSideBarSkeleton(){for(var e='<div class="skeleton-cards">                             <div class="label-skeleton"></div>                            <div class="textbox-skeleton l"></div>                            <div class="label-skeleton"></div>                            <div class="multicontrol-skeleton"> ',t=0;t<6;t++)e+=' <div class="multicontrol-skeleton-item"></div> ';e+='</div><div class="label-skeleton"></div>                           <div class="textbox-skeleton l"></div>                           <div class="multicontrol-skeleton"> ';for(t=0;t<6;t++)e+=' <div class="multicontrol-skeleton-item"></div> ';return e+="</div></div> ",$(e)[0]}}),Class("PageController").includes(CustomEventSupport,NodeSupport,PostMessageSupport,SubscriptionSupport,PageSupport,BubblingSupport,SkeletonCardManagerSupport,SaleSupport)({CATEGORY_NAME_EXPRESSION:/c\/([a-z0-9_-]+)?/i,NOTIFICATION_AUTODISMISS_TIME:3e3,modalSubscription:null,prototype:{faqContentRendered:!1,videoFAQContentRendered:!1,isHomepageView:!1,sidebarsLoaded:!1,navbarContext:{},savedConfigurationRequest:null,contentFilters:{},breakpoints:{desktop:1024,mobile:604,"new":900},commonComponents:["buildNavbar","buildContinueEditingWidget","buildSearchBar","buildNotifications","initializeSubscriptionSupport","initializeUserIpLocation","checkRequestedModal","_checkUrlLength","_stylingOnInit"],pageStrategy:{home:["initCommonComponents","performNextLoginActionFromRedirect","buildFooter","loadHomepageView","openSsoModalOnRedirect","initPreviewMode"],stage:["initCommonComponents","buildFooter","loadSavedConfiguration","loadStageView"],bookmarks:["initCommonComponents","buildFooter","loadBookmarksView"],custom:["initCommonComponents","performNextLoginActionFromRedirect","buildFooter","loadCustomView","initPreviewMode"],account:["initCommonComponents","loadAccountView"],cancel:["initCommonComponents","loadCancelAccountView"],purchases:["initCommonComponents","buildFooter","loadPurchasesView"],emailListUnsubscribe:["initCommonComponents","loadEmailListUnsubscribeView"],"default":["initCommonComponents","performNextLoginActionFromRedirect"],about:["initCommonComponents","performNextLoginActionFromRedirect","loadAboutView"],ApiGridView:["initCommonComponents","initApiStrategyMethods","loadGridApiView"],ApiLoginView:["initCommonComponents","initApiStrategyMethods","loadLoginView","addLoginViewBindings"],ApiSubscriptionView:["initCommonComponents","initApiStrategyMethods","loadSubscriptionView"],ApiStageView:["initCommonComponents","initApiStrategyMethods","loadStageApiView"],ApiPurchasesModal:["initCommonComponents","initApiStrategyMethods","loadPurchasesModalApiView"],my_folders:["initCommonComponents","buildFooter","loadMyFoldersView"],my_placeit:["initCommonComponents","buildFooter","loadMyPlaceitView"],for_you:["initCommonComponents","buildFooter","loadHomepageView"],create_your_password:["initCommonComponents","initCreateYourPasssswordExp"],user_folder:["initCommonComponents","buildFooter","loadUserFolderView"],user_brand_page:["initCommonComponents","loadBrandView"],saved_drafts:["initCommonComponents","buildFooter","loadSavedDraftsView"],switchSubscription:["initCommonComponents","loadSwitchSubscriptionView"]},initApiStrategyMethods:function initApiStrategyMethods(){this.loadGridApiView=UI.Iframe.Strategy.loadGridView,this.loadLoginView=UI.Iframe.Strategy.loadLoginView,this.addLoginViewBindings=UI.Iframe.Strategy.addLoginViewBindings,this.loadSubscriptionView=UI.Iframe.Strategy.loadSubscriptionView,this.loadStageApiView=UI.Iframe.Strategy.loadStageView,this.loadPurchasesModalApiView=UI.Iframe.Strategy.loadPurchasesModalView},init:function init(e){var t,i,n=this;!0===this.isDevMode()&&(window.devMode=!0),this.$body=$(document.body),this.$pageWrapper=$("#container"),this.$pageContainer=$(".page-container"),this.$application=$("#page-application"),this.$uservoiceFeedbackSection=$(".uservoice-feedback"),this.$userVoiceButton=this.$uservoiceFeedbackSection.find("a"),this.$placeitLogo=$(".placeit-logo"),this.contentFilters={f_types:Helpers.App.getUrlParam("f_types",location.href),f_devices:Helpers.App.getUrlParam("f_devices",location.href),f_gender:Helpers.App.getUrlParam("f_gender",location.href),f_age:Helpers.App.getUrlParam("f_age",location.href),f_ethnicity:Helpers.App.getUrlParam("f_ethnicity",location.href),f_tags:Helpers.App.getUrlParam("f_tags",location.href)},n.appendChild(new UI.ThumbnailPreviewOverlay({name:"thumbnailPreviewOverlay"})).render($("body")),n.bind("thumbnailPreview",function(e){n.thumbnailPreviewOverlay.setPreviews(e.data)}),Service.SessionState&&this._initSessionStateService(),n._getPageStrategy(e.strategy).forEach(function(e){console.log(e),n._getMethodByName(e).bind(n)()}),this.subscriptionBindings(),this.postMessageBindings(),this.globalBindings(),Helpers.CouponHelper.load(),Helpers.App.isLoggedIn()&&(t=Helpers.UserSegment.getNoSegmentCookie(),i=Helpers.UserSegment.getUserSegmentCookie(),null===t&&null===i&&!0===CookiesUtils.getMarketingSetting()&&Helpers.UserSegment.request()),this.showShortcutError(),this._checkChangePlanCookie(),this._bindSurveyUserEvents(),this._bindFreebiesEvents(),this.checkExternalSsoAuthFallback(),this._bindGuestCheckoutEvents(),"login-modal"===Helpers.App.getNextLoadAction("nextLoadAction")&&(this._showLoginModal(),Helpers.App.clearNextLoadAction("nextLoadAction"))},_logoClickHandler:function logoClickHandler(){Helpers.GlobalEventTracker._baseSend("navbar:logo:clicked")},_getPageStrategy:function _getPageStrategy(e){if(
this.pageStrategy[e]===undefined)throw"page type "+e+" is not supported";return this.pageStrategy[e]},_getMethodByName:function _getMethodByName(e){if("function"!=typeof this[e])throw e+" is not function";return this[e]},initCommonComponents:function initCommonComponents(){var t=this;t.commonComponents.forEach(function(e){console.log("  - "+e),t._getMethodByName(e).bind(t)()})},initCreateYourPasssswordExp:function initCreateYourPasssswordExp(){var e=$(".create-pwd-form"),t=$(".create-pwd-carousel");this.appendChild(new UI.CreatePasswordForm({name:"createPwdForm",element:e})),this.appendChild(new UI.ScrollCarouselControls({name:"mktCarousel",targetCarousel:t})).render($(".create-pwd-mkt"))},initializeUserIpLocation:function initializeUserIpLocation(){this.userLocation=new UserIpLocation({name:"userLocation",endpoint:"https://pro.ip-api.com/json/",key:window.ipApiConfig.apiKey})},buildNavbar:function buildNavbar(){var e;this.appNavBar||(e=$(".navbar-container"),this.navbarContext={isLogged:Helpers.App.isLoggedIn(),hasCredits:Registry.Credits.getTotal()||Helpers.App.getSubscription(),hasBookmarks:0<Helpers.App.getBookmarksCount(),isStage:this.isStagePage(),isAdmin:Helpers.App.isAdmin(),pageName:Helpers.App.pageName()},this.appendChild(new UI.Navigation.NavBar({name:"appNavBar",element:e,context:this.navbarContext})),this._myPlaceitButtonExperimentHandler())},buildContinueEditingWidget:function buildContinueEditingWidget(){var e,t,i;!1!==Helpers.App.isContinueWhereLeftExpActive()&&!1!==this.shouldDisplayContinueEditingWidget()&&(e=JSON.parse(localStorage.getItem("draftStageData")),t=Helpers.App.getUser().id,!1!==this.isCurrentUserMatchingDraftUser(t,e)?(i=new UI.EditingSessionReminder({data:e}),this.appendChild(i),i.render($("body"))):localStorage.removeItem("draftStageData"))},shouldDisplayContinueEditingWidget:function shouldDisplayContinueEditingWidget(){if(!1===Helpers.App.isLoggedIn())return!1;var e=window.location.href,t=!/\/editor\/[a-zA-Z0-9-]+/.test(e),i=Date.now(),n=parseInt(localStorage.getItem("lastClosedReminderTimestamp"),10);return!1===t&&(localStorage.removeItem("draftStageData"),localStorage.setItem("lastClosedReminderTimestamp",i.toString())),n?t&&24<=(i-n)/36e5:t},isCurrentUserMatchingDraftUser:function isCurrentUserMatchingDraftUser(e,t){return!(!t||!t.userId)&&e===parseInt(atob(t.userId),10)},_bindFreebiesEvents:function _bindFreebiesEvents(){var e=this;!0!==this._freebiesBound&&(this.appNavBar.bind("freebies-anchor",function(){sessionStorage.setItem("plan","annual"),Helpers.GlobalEventTracker.freebiesCTAClicked({session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id}),e.showPaymentModal()}),this._freebiesBound=!0)},buildSearchBar:function buildSearchBar(){var e=new UI.GlobalSearch.SearchController({searchService:new UI.GlobalSearch.SearchService({algoliaConfig:window.algoliaConfig}),categoriesData:window.navBar.menu}),t=new UI.GlobalSearch.SearchContainer({name:"searchContainer",element:$(".global-search-container"),searchTerm:e.getSearchTermFromUrl(),searchPlaceholder:"Search Mockups, Logos, Design Templates",categoriesData:e.getCategoriesData()});this.appNavBar.bind("menu-open",,this.appNavBar.bind("menu-close",function(){e.toggleAutocompleteDropdown(!0)}),this.appNavBar.bind("accountInfo-open",function(){e.toggleAutocompleteDropdown(!1)}),this.appNavBar.bind("accountInfo-close",,e.setSearchContainer(t),this.appendChild(t),this.searchController=e},_bindGuestCheckoutEvents:function _bindGuestCheckoutEvents(){this.appNavBar.bind("guest.back",Utils.bindFn(this)(this._guestCheckoutBackBtnHandler))},_guestCheckoutBackBtnHandler:function _guestCheckoutBackBtnHandler(){var e=Service.GuestCheckout.getInstance(),t=e.getPreviousCheckoutTypeOpened();!1===Boolean(t)&&(t="compare"),Boolean(e.getFormSubmitter())?e.setFormSubmitter(null):(Helpers.GlobalEventTracker.track("continueasGuest:ClickedButton",{session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id,label:"guestcheckout"}),e.setFormSubmitter(!0),"compare"!==t?this.directDownload():(sessionStorage.setItem("plan","annual"),this.showPaymentModal()))},buildNotifications:function buildNotifications(){this.notification=new UI.Notification({})},buildFooter:function buildFooter(){this.footerElement=$("#footer-header"),this.appendChild(new UI.FooterController({name:"footerController"}))},postLoadStrategyHome:function(){this.homepageBindings(),this.$pageContainer.addClass("homepage"),this.loadFromUrlTitlesEnabled(),this.loadFromUrlFiltersEnabled()},loadHomepageView:function loadHomepageView(){this.homepageElement=$("#page-homepage"),this.appendChild(new UI.Homepage({element:this.homepageElement,body:this.$pageContainer,footer:this.footerElement,name:"homePageController",type:"devices",isTagPage:this.isTagPage(),isCategoryPage:this.isCategoryPage(),breakpoints:this.breakpoints,filtersOff:this.loadFromUrlFiltersEnabled().filters})),this.homePageController.checkOffsets(),this.postLoadStrategyHome()},loadCustomView:function loadCustomView(){if(this.homepageElement=$("#page-homepage"),this.isCustomExperience()&&(this.$pageContainer.addClass("is_custom-experience"),window.isPastDue&&!Helpers.App.showFlashPastDue())){var e="container-warning-pass-due";"BR"===window._pl_locale&&(e="container-warning-pass-due-br"),this.$pageContainer.addClass(e)}Helpers.App.isCustomExperience()&&(this.appendChild(new UI.CustomExperience.Page({element:this.homepageElement,body:this.$pageContainer,footer:this.footerElement,name:"customExperience",type:"devices",isTagPage:this.isTagPage(),isCategoryPage:this.isCategoryPage(),breakpoints:this.breakpoints,filtersOff:this.loadFromUrlFiltersEnabled().filters})),this.customExperience.checkOffsets(),this.bindPurchasesEvents(this.customExperience),this._customExperienceBindings()),!0!==Helpers.App.isCustomPage()&&!0!==Helpers.App.isPricingPage()||(this._setPricesInCustomPage(),Helpers.App.isPricingPage()&&this.initPricingPage()),this.postLoadStrategyHome()},initPricingPage:function initPricingPage(){var e=new UI.PricingPageVariantCD({ctaBlockSection:this.ctaBlockSection,appNavBar:this.appNavBar});this.appendChild(e),this.ctaBlockSection&&this.ctaBlockSection.element.hide(),this.bind("subscription.bindings:done",e.checkRequestedStartNow.bind(e))},initPreviewMode:function initPreviewMode(){var e=UI.PreviewMode&&UI.PreviewMode.Controller;if(e&&e.shouldPreviewModeBeAvailable()){var t=[];t="custom_experiences"===window.pageType.type?this.customExperience.grid.thumbnails:this.homePageController.grid.children;new UI.PreviewMode.Controller({gridItems:t,gridType:window.pageType.type})}},loadBookmarksView:function loadBookmarksView(){this.gridContainer=$(".filter-grid-wrapper"),this.bookmarkPage=FolderPageFactory.build("bookmark",{name:"bookmarkPage",element:this.gridContainer,trackAlgoliaAnalytics:!0})},loadStageView:function loadStageView(){function e(e){return e.replace(/(\_\w)/g,function(e){return e[1].toUpperCase()}).replace(/^\w/,function(e){return e.toUpperCase()})}var t=this,i=function i(){t.performNextLoginActionFromRedirect()};this.stageWrapper=$(".stage-object"),this.metaTitle=$("title"),this.metaDescription=$("meta[name=description]"),this.navbarContext.isStage=!0,this.$taxInformation=$("p.tax-title"),this.euCountries=Helpers.App.getEUCountries();var n=$("#previewImage"),s=window.previewImageSrc;switch(0<n.length&&(s=n[0].src),window._stageData.stage_data.image_type){case 13:this._buildSmartTemplate(s,i);break;case 15:this.appendChild(new UI.StageSmartVideoProduct({name:"stage",element:$(".stage-object-image"),pageContainer:this.$pageContainer,isCategoryPage:this.isCategoryPage(),breakpoints:this.breakpoints,CATEGORY_NAME_EXPRESSION:this.constructor.CATEGORY_NAME_EXPRESSION,savedConfigurationData:this.savedConfigurationData}));var r=function r(){console.log("stage.infoReady"),t.stage.unbind("stage.infoReady",r),t.performNextLoginActionFromRedirect()};this.stage.bind("stage.infoReady",r);break;case 17:var a={name:"stage",element:$(".stage-object-image"),pageContainer:this.$pageContainer,isCategoryPage:this.isCategoryPage(),breakpoints:this.breakpoints,source:s,CATEGORY_NAME_EXPRESSION:this.constructor.CATEGORY_NAME_EXPRESSION,purchasesModal:this.purchasesModal,navBar:this.appNavBar,onDesignPlanReady:i},o=e(Helpers.StageType.getStageData().tool_name)+"Page";this.appendChild(new UI.Tool[o](a));break;case 18:this.appendChild(new UI.VideoV5Stage({name:"stage",element:$(".stage-object-image"),isMobilePhone:Helpers.App.isMobile(),record:JSON.parse(window.videoProductUiJson),structureJson:JSON.parse(window.videoProductStructureJson),hasAudio:window.multiSceneHasAudio,audioRecord:window.multiSceneAudio,previewVideoUrl:window.previewVideoUrl,onDesignPlanReady:i}));break;default:return this.appendChild(new UI.UnsupportedMobileBrowserModal({name:"unsupportedMobileBrowserModal"})),this.unsupportedMobileBrowserModal.activate()}this.instantiatePurchasesModal(),window.devmode&&this.$body.addClass("devmode"),this.stageBindings()},_buildSmartTemplate:function _buildSmartTemplate(e,t){var i,n=[],s=window._stageData.stage_data;s&&!0===Array.isArray(s.group_tags)&&(n=s.group_tags),!0===window.apiPage&&(window.backupParent=window.parent);var r={name:"stage",element:$(".stage-object-image"),pageContainer:this.$pageContainer,isCategoryPage:this.isCategoryPage(),breakpoints:this.breakpoints,source:e,groupTags:n,CATEGORY_NAME_EXPRESSION:this.constructor.CATEGORY_NAME_EXPRESSION,onDesignPlanReady:t};r.onShowLogin=Utils.bindFn(this)(this._showLoginModal),i=Helpers.StageType.isBlankCanvasStage()?this._buildBlankCanvasStage(r):this._buildStageCanvas(r),this.appendChild(i)},_buildBlankCanvasStage:function _buildBlankCanvasStage(e){return new UI.SmartTemplate.BlankCanvasStage(e)},_buildStageCanvas:initInnerPages:function initInnerPages(){var e;/upgrade/.test(window.location.search)?(e="Your subscription has been updated",this.notification.success(e).render($(".page-container"),!0)):/cardupdated/.test(window.location.search)?(e="Your card has been updated!",this.notification.success(e).render($(".page-container"),!0)):/show_plans/.test(window.location.search)&&this.instantiatePricingModal().activate(),/update/.test(window.location.search)&&this._instantiateBillingInfo(),this.subscriptionsPartial.bind("purchase.open",this._purchaseOpenEventHandler.bind(this)),this.subscriptionsPartial.bind("purchase.closed",this._purchaseClosedEventHandler.bind(this))},loadAccountView:function loadAccountView(){var e=this;this.initInnerPages.bind(this)(),this.appendChild(new UI.Account({name:"account",element:$(".page-container")})),e.account.bind("changePlanClick",function(){e.showChangeSubscriptionPlanModal()}),e.bind("subscription.success",function(){location.reload()})},loadCancelAccountView:function loadCancelAccountView(){this.initInnerPages.bind(this)(),this.appendChild(new UI.CancelAccount({name:"cancelAccount",element:$(".page-cancel-subscription")}))},loadSwitchSubscriptionView:function loadSwitchSubscriptionView(){this.initInnerPages.bind(this)(),this.appendChild(new UI.SwitchSubscription({name:"switchSubscription",element:$(".page-switch-subscription")}))},loadPurchasesView:function loadPurchasesView(){this.initInnerPages.bind(this)(),this.downloads=FolderPageFactory.build("download",{name:"downloads",element:$(".filter-grid-wrapper")}),this.downloads.bind("freebies-anchor",function(){sessionStorage.setItem("plan","annual"),Helpers.GlobalEventTracker.freebiesCTAClicked({session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id}),page.showPaymentModal()})},loadUserFolderView:function loadUserFolderView(){this.initInnerPages.bind(this)(),this.downloads=FolderPageFactory.build("user_folder",{name:"userFolder",element:$(".filter-grid-wrapper")})},loadSavedDraftsView:function loadSavedDraftsView(){this.initInnerPages.bind(this)(),this.gridContainer=$(".filter-grid-wrapper"),this.savedDrafts=FolderPageFactory.build("draft",{name:"savedDrafts",element:this.gridContainer})},loadMyPlaceitView:function loadMyPlaceitView(){this.initInnerPages.bind(this)(),this.myPlaceit=new UI.MyPlaceitPageController({element:$("#container")}),this.dispatch("myBrands.ready")},loadBrandView:function loadBrandView(){this.initInnerPages.bind(this)(),this.appendChild(new UI.BrandPage({name:"brandPage",element:$("#brand-page"),brandData:window.currentBrandData})),this._bindBrandPageEvents()},_bindBrandPageEvents:function _bindBrandPageEvents(){var i=this,n={autoclose:{milliseconds:this.constructor.NOTIFICATION_AUTODISMISS_TIME}};this.brandPage.bind("error",function(e,t){i.flash(t.message,"alert",n)}).bind("warning",},loadMyFoldersView:function loadMyFoldersView(){this.initInnerPages.bind(this)(),this.appendChild(new UI.MyFoldersPage({name:"myFoldersPage",element:$("#container")}))},loadEmailListUnsubscribeView:function loadEmailListUnsubscribeView(){this.initInnerPages.bind(this)(),this.appendChild(new UI.EmailListUnsubscribe({name:"emailListUnsubscribe"}))},loadAboutView:function loadAboutView(){var e,t,i,n,s,r;e=document,t="script",i="twitter-wjs",s=e.getElementsByTagName(t)[0],r=/^http:/.test(e.location)?"http":"https",e.getElementById(i)||((n=e.createElement(t)).id=i,n.src=r+"://platform.twitter.com/widgets.js",s.parentNode.insertBefore(n,s))},loadFromUrlFiltersEnabled:function loadFromUrlFiltersEnabled(){var e,t=this,i={filters:!1};t.isCustomExperience&&t.isCustomExperience()&&(e=t.customExperience),t.isHomepage&&t.isHomepage()&&(e=t.homePageController);var n=Helpers.App.getUrlParam("filters",location.href,!1),s=n&&"off"===n.toLowerCase()||window.experience&&window.experience.filtersOff;return this.isCustomExperience()&&"undefined"!=typeof customExperienceFlag&&(s=!0),e&&(s||(e.filters&&e.filters.show(),e.grid.element.removeClass("no-filters"),$(".footer-wrapper").removeClass("no-filters"),$(".pagination").removeClass("no-filters")),!0===s&&(e.filters&&e.filters.hide(),e.grid.element.addClass("no-filters"),$(".footer-wrapper").addClass("no-filters"),$(".pagination").addClass("no-filters"),i.filters=!0)),!0===s&&(i.filters=!0),i},loadFromUrlTitlesEnabled:function loadFromUrlTitlesEnabled(){var e=Helpers.App.getUrlParam("titles",location.href,!1),t=e&&"off"===e.toLowerCase()||window.experience&&window.experience.titlesOff;t||($(".grid-item .figcaption").show(),$(".slick-track .figcaption").show()),!0===t&&($(".grid-item .figcaption").hide(),$(".slick-track .figcaption").hide())},_redirectSubscriberToForYou:function _redirectSubscriberToForYou(){Helpers.App.getSubscription()&&"/"===window.location.pathname&&(window.location.href="/for-you")},globalBindings:function globalBindings(){var i=this,e=this._handleClickEvent.bind(this);Helpers.App.showFlashPastDue()&&this.flashPastDue(),i.$userVoiceButton.on("click",function(){Helpers.GlobalEventTracker.track("UserVoiceButtonClicked")}),i.appNavBar.bind("signup.success",function(){null!==window.savedDraftId&&i.loadStageView(),i.flash(UI.SsoSignupModal.TEXT_CREATE_ACCOUNT_SUCCESS,"success",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}}),i._openCheckoutAfterGuestLoginAction(),Helpers.GlobalEventTracker.userSignup(),!0===CookiesUtils.getStatisticsSetting()&&(document.cookie="userStatus=User; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/"),document.cookie="subscriptionType=Null; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/",i.stage&&i.stage.stageActionsManager.dispatch("form.success"),Helpers.App.getNextLoginAction()&&i.appNavBar.dispatch(Helpers.App.getNextLoginAction()),window.showDiscountInCTABlock&&window.showDiscountInCTABlock(),i.footerController&&i.footerController.hideFreeAccountButton(),Helpers.App.clearNextLoginAction(),i.shouldPerformRedirect()?i.goToRedirectUrl():"home"===window.pageType.type&&location.reload()}).bind("login.success",function(){!1===window.apiPage&&!1===CookiesUtils.getMarketingSetting()&&!1===Boolean(Helpers.App.getCookie("unsubscribed_from_mailing_list"))&&(Helpers.App.setCookie("unsubscribed_from_mailing_list",!0),Controller.CookieManagerController.prototype._disableMKTEmailNotifications()),null!==window.savedDraftId&&(i.stage.getDraft(window.savedDraftId,!0),window.saveDraftReload=!0),i.stage&&i.stage.stageActionsManager.dispatch("form.success"),Helpers.App.getAccountInfo(),i._openCheckoutAfterGuestLoginAction(),!1!==Helpers.App.getSubscription()?(!0===CookiesUtils.getStatisticsSetting()&&(document.cookie="userStatus=Subscriber; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/"),!0===Helpers.App.getSubscription().is_annual?document.cookie="subscriptionType=Annual; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/":document.cookie="subscriptionType=Monthly; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/"):(!0===CookiesUtils.getStatisticsSetting()&&(document.cookie="userStatus=User; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/"),document.cookie="subscriptionType=Null; expires=Fri, 01 Dec 1970 23:59:59 GMT; path=/"),i.footerController&&(i.footerController.updatePricingButton(),i.footerController.hideFreeAccountButton());var e=Helpers.App.getSubscription();if(e&&!e.is_paused){if(!page.ctaBlockSection)return;var t=page.ctaBlockSection.element.parents("#landing-pages");i.ctaBlockSection.destroy(),t.remove()}Helpers.App.getNextLoginAction()&&i.appNavBar.dispatch(Helpers.App.getNextLoginAction()),window.showDiscountInCTABlock&&window.showDiscountInCTABlock(),Helpers.App.clearNextLoginAction(),i._myPlaceitButtonExperimentHandler(),i.shouldPerformRedirect()?i.goToRedirectUrl():i._redirectSubscriberToForYou()}).bind("sso.modal.shown",function(){Helpers.App.setNextLoginAction(null),"download"===Helpers.App.getSubscribeFromModal()?Helpers.App.setNextLoginAction("activate-purchase"):"compare"===Helpers.App.getSubscribeFromModal()?Helpers.App.setNextLoginAction("activate-purchase-subscription"):"modal"===Helpers.App.getSubscribeFromModal()?Helpers.App.setNextLoginAction("activate-pricing"):"cta-block"===Helpers.App.getSubscribeFromModal()?Helpers.App.setNextLoginAction("activate-pricing-from-cta"):Helpers.App.setNextLoginAction(null),Helpers.App.setSubscribeFromModal(null)}),i.appNavBar.bind("activate-pricing",function(){var e=Helpers.App.getSubscription();(!e||e&&e.is_paused)&&(page.isLogoPage()?i.pricingModal&&i.pricingModal.rightChild._handlePlanSubscribe():i.pricingModal&&i.pricingModal.subscriptionsPartial._handlePlanSubscribe())}),i.appNavBar.bind("activate-pricing-from-cta",function(){var e=Helpers.App.getSubscription();(!e||e&&e.is_paused)&&i.ctaBlockSection&&i.ctaBlockSection._handlePlanSubscribe()}),i.appNavBar.bind("activate-pricing-coupon",,i.appNavBar.bind("activate-purchase",function(){var e=Helpers.App.getNextLoginAction();!e||e&&"activate-purchase"!==e||i.purchasesModal.resumePurchase()}),i.appNavBar.bind("activate-purchase-subscription",function(){var e=Helpers.App.getNextLoginAction();!e||e&&"activate-purchase-subscription"!==e||i.purchasesModal.resumePurchase()}),i.appNavBar.bind("not-logged",function(){i.notLoggedInHandler()}),i._bindSsoModalEvents(),i.bind("user-has-bookmarks",function(e){i.navbarContext.hasBookmarks=e.data,i.appNavBar.updateStatus(i.navbarContext)}),Helpers.CouponHelper.bind("coupon.validated",function(){!0!==window.isCouponShowed&&(window.isCouponShowed=!0,Helpers.CouponHelper.applyTo(Helpers.CouponHelper.TYPE_SUBSCRIPTION)&&Helpers.CouponHelper.getSource()===Helpers.CouponHelper.SOURCE_URL?window.page&&window.page.showPricingModal():Helpers.CouponHelper.applyTo(Helpers.CouponHelper.TYPE_SINGLE_PURCHASE)&&Helpers.CouponHelper.getSource()===Helpers.CouponHelper.SOURCE_URL?Helpers.SinglePurchaseHelper.showDiscountModal():!1===Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.getSource()===Helpers.CouponHelper.SOURCE_URL&&window.page&&window.page.showPricingModal())}),Helpers.CouponHelper.bind("coupon.error.newUser",function(){this.flash("This offer is for new users only.","info",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})}.bind(this)),this.bind("logout",function(){$.removeCookie("categorySuggestionOverlayShown",{path:"/"})}.bind(this)),this.bind("click",e),i._setupBreakpointListener(),i._bindLoadListener(),this.$placeitLogo.on("click",Utils.bindFn(i)(i._logoClickHandler))},_bindLoadListener:function _bindLoadListener(){window.addEventListener("load",Utils.bindFn(this)(this._bindLoadWindowListener))},_bindLoadWindowListener:function _bindLoadWindowListener(){var e=!0===window.apiPage;if(!1!==Helpers.App.isCookiesPolicyEnabled()&&(!1===CookiesUtils.getMarketingSetting()&&!1===e&&Controller.CookieManagerController.prototype.overrideMarketingTools(),!1!==CookiesUtils.showCookiesPolicyModal()&&!0!==e)){var t=new UI.CookieConsentMessageView({name:"cookieConsentMessageView"}),i=new UI.BottomContainerModal({name:"bottomContainerModal",content:t.getElement()}),n=new UI.CookieManagerModalView({name:"cookieManagerModalView"});new Controller.CookieManagerController({name:"cookieManagerController",bottomContainerModal:i,cookieConsentMessageView:t,cookieManagerModalView:n}).activateBottomModal()}},_bindSsoModalEvents:function _bindSsoModalEvents(){var e=this,t=!1===Helpers.App.getUser().id;if(e.appNavBar.ssoModal.bind("modal.hidden",,!1!==Boolean(Service)&&!1!==Boolean(Service.MultiplePurchase)){var i=Service.MultiplePurchase.getInstance();i&&e.appNavBar.ssoModal.bind("modal.hidden",function(){t&&i.deleteAfterLoginCookie.bind(this)})}},_handleClickEvent:function _handleClickEvent(e){var t,i=this,n=e.data.originalDispatcher;n!==undefined&&(t={pricingButton:function s(){if(!1===Helpers.App.isMobile()&&!1===Helpers.App.getSubscription()){if(Helpers.App.isPricingPage())return;Helpers.App.redirectToPricing()}else i.showSubscriptionModal()},userTypeBanner:function r(){i.showSubscriptionModal()},freeAccountButton:function a(){i.appNavBar.showSignupModal()}}[n.name])!==undefined&&t()},instantiateNotLoggedInModal:function instantiateNotLoggedInModal(){this.appNavBar.ssoModal===undefined&&(this.appNavBar.instantiateNotLoggedInModal(),this.appNavBar.ssoModal.bind("show.login",function(){"none"!=this.appNavBar.$burgerBtn.css("display")&&this.appNavBar.$burgerBtn.click(),this.appNavBar.$loginButton.click()}.bind(this)))},instantiateFaqModal:function instantiateFaqModal(){this.faqModal===undefined&&this.appendChild(new UI.RemoteContentModal({name:"faqModal",title:"Frequently Asked Questions",remoteContentURL:"/get_faq_content"}))},instantiateVideoFaqModal:function instantiateVideoFaqModal(){this.videoFaqModal===undefined&&this.appendChild(new UI.RemoteContentModal({name:"videoFaqModal",title:"Frequently Asked Questions",remoteContentURL:"/get_video_faq_content"}))},instantiateInteractiveDemoModal:function instantiateInteractiveDemoModal(){this.interactiveDemoModal===undefined&&this.appendChild(new UI.RemoteContentModal({name:"interactiveDemoModal",title:"Frequently Asked Questions",remoteContentURL:"/get_interactive_faq_content"}))},instantiateRemoteUrlModal:function instantiateRemoteUrlModal(){if(this.remoteUrlModal===undefined){this.appendChild(new UI.RemoteUrlModal({name:"remoteUrlModal",mainText:"Grab Screenshot from URL"}));var e="Grab Screenshot from URL";this.remoteUrlModal.updateTitle(e),this.remoteUrlModal.bind("grab.remoteURL",function(e){this.notification.close(),this.clearUserSource(),this.stage.refreshProductshotData(),this.stage.loadFromUrl(e.data)}.bind(this)),UI.RemoteUrlModal.bind("url.invalid",function(e){this.flash(e.data,"alert",{autoclose:{milliseconds:1e4}})}.bind(this))}},bookmarksBindings:function bookmarksBindings(){var t=this;t.grid.bind("thumbnailPreview",function(e){t.thumbnailPreviewOverlay.setPreviews(e.data)})},homepageBindings:function homepageBindings(){var i=this;i.homePageController&&(i.bind("subscription.success",function(){i.homePageController.updateHeroBanner()}),i.appNavBar.bind("login.success",function(){i.homePageController.updateHeroBanner()}),i.homePageController.bind("heroBanner.cta.click",function(){i.showSubscriptionModal()})),i.appNavBar.bind("openAdVideo",,i.bind("filters:filtering",function(e){Helpers.App.bindSortBy(e.data.key),location.href=this.requestNewPage({mode:"filter",key:e.data.key,value:e.data.value,heading:Helpers.App.getUrlParam("h",location.href)})}.bind(this)),i.bind("filters:none",function(){location.href=this.requestNewPage({mode:"filters-reset"})}.bind(this)),i.bind("filters:click",function(e){var t=i.requestNewPage({mode:"filter",key:e.data.key,value:e.data.value,heading:Helpers.App.getUrlParam("h",location.href)});e.data.$anchor.attr("href",t)}),i.bind("paginator:change",function(e){var t={mode:"page",value:e.data.pageNumber,heading:Helpers.App.getUrlParam("h",location.href)},i=Helpers.App.getUrlParam("sortby",location.href);i&&(t.key=i),location.href=this.requestNewPage(t)}.bind(this))},requestNewPage:function requestNewPage(e){var t,i,n,s,r,a,o;t="/",n=window._pl_category.toLowerCase(),i=window._pl_custom_experience_full_url||location.href;var l=this;if("digital"!==n&&0==window._pl_is_homepage&&(-1!=n.indexOf(" ")&&(n=n.split(" ").join("-")),t+="c/"+n+"/"),(Helpers.App.isCustomExperience()||Helpers.App.isCustomPage()||1==window._pl_is_homepage)&&(t="/"),null===(o=Helpers.StageType.pageType()).category&&o.no_results&&(t="/"),0<=["newest","best-selling","mixed","free"].indexOf(e.key)){var c,u=t+"?sortby="+e.key,d=Helpers.App.getUrlParam("titles",i),h=Helpers.App.getUrlParam("filters",i);"page"!==e.mode||isNaN(parseInt(e.value))||(u+="&page="+e.value),d&&(u+="&titles="+encodeURIComponent(d)),h&&(u+="&filters="+encodeURIComponent(h)),(c={}).search=Helpers.App.getUrlParam("search",i),c.page=null,c.f_types=Helpers.App.getUrlParam("f_types",i),c.f_devices=Helpers.App.getUrlParam("f_devices",i),c.f_tags=Helpers.App.getUrlParam("f_tags",i),c.f_models=Helpers.App.getUrlParam("f_models",i),c.f_gender=Helpers.App.getUrlParam("f_gender",i),c.f_age=Helpers.App.getUrlParam("f_age",i),c.f_ethnicity=Helpers.App.getUrlParam("f_ethnicity",i),c.h=Helpers.App.getUrlParam("h",i),c.titles=Helpers.App.getUrlParam("titles",i),c.filters=Helpers.App.getUrlParam("filters",i);var p="";return(c.search||c.page||c.f_types||c.f_devices||c.f_tags||c.f_models||c.h||c.f_gender||c.f_age||c.f_ethnicity)&&(p="&"+Object.keys(c).filter(function(e){return"undefined"!=typeof c[e]&&null!==c[e]&&""!==c[e]}).map(function(e){return e+"="+encodeURIComponent(c[e])}).join("&")),u+p}switch((c={}).search=Helpers.App.getUrlParam("search",i),c.page=null,c.f_types=Helpers.App.getUrlParam("f_types",i),c.f_devices=Helpers.App.getUrlParam("f_devices",i),c.f_tags=Helpers.App.getUrlParam("f_tags",i),c.f_models=Helpers.App.getUrlParam("f_models",i),c.f_gender=Helpers.App.getUrlParam("f_gender",i),c.f_age=Helpers.App.getUrlParam("f_age",i),c.f_ethnicity=Helpers.App.getUrlParam("f_ethnicity",i),c.h=Helpers.App.getUrlParam("h",i),c.titles=Helpers.App.getUrlParam("titles",i),c.filters=Helpers.App.getUrlParam("filters",i),c.sortby=Helpers.App.getUrlParam("sortby",location.href),c.industry=Helpers.App.getUrlParam("industry",location.href),c.industryId=Helpers.App.getUrlParam("industryId",location.href),c.t=Helpers.App.getUrlParam("t",location.href),c.graph_id=Helpers.App.getUrlParam("graph_id",location.href),c.picker_0=Helpers.App.getUrlParam("picker_0",location.href),c.picker_1=Helpers.App.getUrlParam("picker_1",location.href),c.multiAssetsControl=Helpers.App.getUrlParam("multiAssetsControl",location.href),c.searchAssetsControl=Helpers.App.getUrlParam("searchAssetsControl",location.href),e.mode){case"page":c.page=e.value;break;case"filter":var f,g;if(c[e.key])-1<(g=(f=c[e.key].split(",")).indexOf(e.value))?f.splice(g,1):f.push(e.value),c[e.key]=f.join();else c[e.key]=e.value;("f_devices"===e.key||"f_gender"===e.key||"f_age"===e.key&&"f_ethnicity"===e.key)&&(tagClass=l._getClassNameByOptionsKey(e.key),s=(s=this.homePageController.filterBar.find(tagClass).map(function(e,t){return t.querySelectorAll(".item-name")[0].innerHTML.trim()}).toArray()).concat(this.homePageController.element.find(".filters-top-bar").find(tagClass).map(function(e,t){return t.querySelectorAll(".item-name")[0].innerHTML.trim()}).toArray()),r=c[e.key].split(","),a=[],r.forEach(,c[e.key]=a.join());break;case"filters-reset":delete c.f_types,delete c.f_devices,delete c.f_tags,delete c.f_models,delete c.f_age,delete c.f_ethnicity,delete c.f_gender,!0}p="?";return e.heading?c.h=e.heading:delete c.h,(c.search||c.page||c.f_types||c.f_devices||c.f_tags||c.f_models||c.h||c.sortby||c.f_gender||c.f_age||c.f_ethnicity)&&(p+=Object.keys(c).filter(function(e){return"undefined"!=typeof c[e]&&null!==c[e]&&""!==c[e]}).map(.join("&")),t+p},_getClassNameByOptionsKey:function _getClassNameByOptionsKey(e){switch(e){case"f_devices":return".device-tag";case"f_gender":return".gender-tag";case"f_age":return".age-tag";case"f_ethnicity":return".ethnicity-tag";default:return".device-tag"}},_setupBreakpointListener:function _setupBreakpointListener(){var t,e,i=Helpers.App.getUrlParam("b")||Helpers.App.breakpoint;t=Helpers.App.getClientWidth()<=Helpers.App.breakpoint,e=function e(s,r,a){var o;return function(){var e=this,t=arguments,i=function(){o=null,a||s.apply(e,t)},n=a&&!o;clearTimeout(o),o=setTimeout(i,r),n&&s.apply(e,t)}};var n=function n(){var e=Helpers.App.getClientWidth();e<=i&&!1===t&&location.reload(),i<e&&!0===t&&location.reload()};window.addEventListener("resize",e(n,250))},stageBindings:function stageBindings(){var i=this,e=this.showSubscriptionModal.bind(this);i.stage.bind("user-has-bookmarks",function(e){i.navbarContext.hasBookmarks=e.data,i.appNavBar.updateStatus(i.navbarContext)}),this.bind("coupon.update",function(e){this.flash(e.data,"info",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})}.bind(this)),this.appNavBar.bind("login.success",,this.stage.bind("stageImage.ready",function(){this.handleParamActions(),this.updateSeoMetas()}.bind(this)).bind("success.processing",function(){var e="Couldn't process image, please try again";i.notification.element.hasClass("alert-danger")&&0<=i.notification.$message.text().indexOf(e)&&i.notification.autoclose(100)}).bind("url.invalid",function(e,t){i.flash(t,"alert",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})}).bind("url.success",function(){var e="There was an error with the provided url";i.notification.element.hasClass("alert-danger")&&0<=i.notification.$message.text().indexOf(e)&&i.notification.autoclose(0)}).bind("flash.close",function(){this.notification.close()}.bind(this)).bind("video.upload.error",function(e){var t=""+e.data;this.flash(t,"alert",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})}.bind(this)).bind("upload.input.change",function(e){var t=e.data;t.length&&this.flash(t,"info",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})}.bind(this)).bind("download.overlay.activate",function(){window.isPastDue?this.handlePastDue(function(){var e=this;!0===window.isPastDue?e.purchasesModal.downloadInmediatelyOrActivate.bind(e.purchasesModal)():Helpers.SubscriptionHelper._refreshSubscription(function(){e.purchasesModal.downloadInmediatelyOrActivate.bind(e.purchasesModal)()})}.bind(this)):this.purchasesModal.downloadInmediatelyOrActivate()}.bind(this)).bind("stage.error",function(e,t){(t=t||{}).stage_type=Helpers.StageType._types[window._stageData.stage_data.image_type],t.stage_id=_stageData.stage_data.id,t.stage_slug=_stageData.stage_data.slug,t.errorType&&-1!=["pinger","processing","st-jobs"].indexOf(t.errorType)&&Helpers.GlobalEventTracker.stageError(t),t.errorType&&-1!=["broken-stage"].indexOf(t.errorType)&&Helpers.GlobalEventTracker.stageErrorByEventType("stage.wrongID",t),t.slideFetchFailed&&this._removeUserVoiceSection();var i=""+t.message;""!==i&&this.flash(i,"alert",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})}.bind(this)).bind("error.processing",function(e,t){(t=t||{}).stage_type=Helpers.StageType._types[window._stageData.stage_data.image_type],t.stage_id=_stageData.stage_data.id,t.stage_slug=_stageData.stage_data.slug,Helpers.GlobalEventTracker.stageError(t);var i=""+e.data.message;this.flash(i,"alert",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})}.bind(this)).bind("stage.warn",function(e){
var t=""+e.data.message;this.flash(t,"warning",{autoclose:{milliseconds:1e3*e.data.seconds}})}.bind(this)).bind("notification.reset",function(){i.notification.close()}).bind("stage.infoReady",function(){if(this.constructor===Helpers.StageType.getSmartTemplateClass()){var e={dimensions:this.record.original.size.high,stage_type_name:"smart_template",dpi:this.record.original.size.high.resolution};i.purchasesModal.setResolutionData(e)}if(this.constructor===UI.StageSmartVideoProduct||this.constructor===UI.VideoV5Stage){e={dimensions:this.record.original&&this.record.original.size?this.record.original.size:undefined,stage_type_name:"video_product"};i.purchasesModal.setResolutionData(e)}}).bind("resolutionChange",function(e){if(this.constructor===Helpers.StageType.getSmartTemplateClass()){var t={dimensions:e.data.dimensions,stage_type_name:"smart_template",dpi:e.data.dpi};i.purchasesModal.setResolutionData(t)}}).bind("stage.updated",bind(this)).bind("saveDraft.success",function(e){var t=e.data.message;this.flash(t,"success",{autoclose:{milliseconds:1e3*e.data.seconds}}),$("#link-to-saved-drafts").one("click",function(e){e.preventDefault(),i.stage.goToDraftCarousel()})}.bind(this)).bind("saveDraft.error",function(e){var t=e.data.errorMessage;this.flash(t,"alert",{autoclose:{milliseconds:1e3*e.data.seconds}})}.bind(this)).bind("savedDraft.invalidAccount",function(e){console.log("invalid account for the draft");var t=e.data.errorMessage;this.flash(t,"alert",{autoclose:{milliseconds:1e3*e.data.seconds}}),setTimeout(function(){window.location.href=window.location.href.replace(window.location.search,"")},1e3*e.data.seconds)}.bind(this)).bind("removeDraft.error",function(e){console.log("removeDraft.error");var t=e.data.errorMessage;this.flash(t,"alert",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME}})}.bind(this)).bind("savedDraft.notLogged",function(){if(null!==window.savedDraftId)return console.log("SavedDraft login access"),this.instantiateNotLoggedInModal(),void this.flash('Please <a href="#" onclick="event.preventDefault();page.appNavBar.ssoModal.activate()" class="trigger_login_link" role="button">login</a> to load your saved draft',"warning",{autoclose:{milliseconds:PageController.NOTIFICATION_AUTODISMISS_TIME+3e3}})}.bind(this)).bind("missingAudioTrack",function(e){var t=e.data.message,i=e.data.timeout;this.flash(t,"alert",{autoclose:{milliseconds:i}})}.bind(this)).bind("thumbnailPreview",function(e){i.thumbnailPreviewOverlay.setPreviews(e.data)}).bind("pricingButton.click",e),this.stage&&this._bindRecommendationSectionEvents()},checkRequestedModal:function checkRequestedModal(){var e=this,t=new Helpers.URL(window.location.href,window.location.origin);return!0===e._isSurveyAvailable()?this._initSurveyNotification():t.hasHash("#license")?((new UI.FriendlyLicenseModal).activate(),!1):t.hasHash("#pricing")?(this.showPricingModal(),!1):!e.shouldShowCampaignModal()&&void(t.hasHash("#signup")&&this._showLoginModal())},_isSurveyAvailable:function _isSurveyAvailable(){return Helpers.App.isLoggedIn()&&Helpers.App.getSubscription()&&!1===this._hasSurveyCookie()&&!0!==window.apiPage&&!0===window.isSurveyFlagEnabled&&!0===CookiesUtils.getMarketingSetting()},_initSurveyNotification:function _initSurveyNotification(){this.surveyNotification&&this.surveyNotification.destroy();var e=Helpers.App.getUser(),t=new UI.SurveyNotification({name:"surveyNotification",userId:e.id});this.appendChild(t).render($("body")),this._bindSurveyNotification(this.surveyNotification)},_bindSurveyUserEvents:function _bindSurveyUserEvents(){!0!==window.apiPage&&(this.appNavBar.bind("login.success",Utils.bindFn(this)(this._showSurveyNotification)),this.bind("subscription.success",Utils.bindFn(this)(this._showSurveyNotification)))},_showSurveyNotification:function _showSurveyNotification(){!1!==this._isSurveyAvailable()&&this._initSurveyNotification()},_bindSurveyNotification:_hasSurveyCookie:_setSurveyCookie:handleParamActions:function handleParamActions(){return 0<=Helpers.StageType.getStageType().indexOf("still")&&this.applyUserSource(),this},applyUserSource:function applyUserSource(){var e=Helpers.App.getUrlParam("user_source");!!e&&this.stage.loadFromUrl(e)},clearUserSource:function(){Helpers.App.getUrlParam("user_source")&&window.history.replaceState({},Helpers.StageType.getStageSlug(),Helpers.App.removeParam("user_source",window.location.href))},showLicenseModal:function showLicenseModal(){return $(".modal").modal("hide"),(new UI.LicenseModal).activate(),this},_handleStageSwitch:function _handleStageSwitch(){return this},instantiateCouponGiftModal:function instantiateCouponGiftModal(){this.couponGiftModal===undefined&&this.appendChild(new UI.CouponGiftModal({name:"couponGiftModal"}))},forceSignUp:function forceSignUp(){var e;e={type:"warning",content:'Please create an account to continue editing.<br /> Already have an account?                     <a href="#" onclick="event.preventDefault();page.appNavBar.ssoModal.showTab(\''+UI.SsoModal.TAB_LOGIN+'\')" class="trigger_login_link" role="button">Log In</a>',contentForceLogIn:'Please log in to continue editing.<br /> Don\'t have an account?                     <a href="#" onclick="event.preventDefault();page.appNavBar.ssoModal.showTab(\''+UI.SsoModal.TAB_SIGNUP+'\')" class="trigger_signup_link" role="button">Sign Up</a> today!'},this.appNavBar.ssoModal.disableClose(),this.appNavBar.ssoModal.activate(),this.appNavBar.ssoModal.showMessage(e)},instanceCouponRedeemModal:function instanceCouponRedeemModal(){this.couponRedeemModal===undefined&&(this.appendChild(new UI.CouponRedeemModal({name:"couponRedeemModal"})),this.couponRedeemModal.bind("couponRedeemModal:pickStage",bind(this)))},loadSavedConfiguration:function loadSavedConfiguration(){var e;e=this,window.isSavedConfiguration&&window.savedConfigurationUiJsonUrl?e.savedConfigurationData=new Promise(function(t,i){$.ajax({method:"GET",url:window.savedConfigurationUiJsonUrl,dataType:"json"}).done(function(e){t(e)}).fail(function(e){i(e)})}):e.savedConfigurationData=new Promise(},showShortcutInstructionsModal:function showShortcutInstructionsModal(e){var t=$(e.target).data("download");Helpers.App.isDownloadIphoneFlowAvailable()&&Helpers.App.isMobile()?(page.notification.close(),Helpers.App.shortcutDownloadModal(window.location.origin+t,this.stage.getFullVideoSrc())):window.open(t)},goToRedirectUrl:function goToRedirectUrl(){var e,t;!(t=!==this.isRedirectToInParams()&&(e=Helpers.App.getAllURLParams().redirect_to,t(e)?location.href=e:(Helpers.GlobalEventTracker.track("url:preventRedirect",{url:e}),location.href="/"))},isRedirectToInParams:function isRedirectToInParams(){return"redirect_to"in Helpers.App.getAllURLParams()},isBrazilianHomePage:function isBrazilianHomePage(){var e=new URL(window.location.href);return e.hostname.includes("br.")&&"/"==e.pathname},shouldPerformRedirect:function shouldPerformRedirect(){return("home"===window.pageType.type||this.isBrazilianHomePage())&&this.isRedirectToInParams()},openSsoModalOnRedirect:function openSsoModalOnRedirect(){Helpers.App.isLoggedIn()||!1===this.isRedirectToInParams()||this.appNavBar.instantiateNotLoggedInModal()},showShortcutError:function showShortcutError(){var e=Helpers.App.getUrlParam("videoDownloadURL"),t=Helpers.App.getUrlParam("videoPreviewURL");e&&t&&Helpers.App.shortcutDownloadModal(decodeURIComponent(e),decodeURIComponent(t))},isDevMode:_customExperienceBindings:function _customExperienceBindings(){var t;(t=this).customExperience.bind("thumbnailPreview",function(e){t.thumbnailPreviewOverlay.setPreviews(e.data)})},_setPricesInCustomPage:function _setPricesInCustomPage(){var i=this,e=Helpers.Price.monthlyPlan(),t=Helpers.Price.annualPlan();e.price.then(function(e){var t=Helpers.Price.format(e);i.$pageContainer.find(".monthly-plan-price").text(t)}),t.price.then(function(e){var t=Helpers.Price.format(e);i.$pageContainer.find(".annual-plan-price").text(t)})},_removeUserVoiceSection:function _removeUserVoiceSection(){this.$uservoiceFeedbackSection.remove()},checkExternalSsoAuthFallback:function checkExternalSsoAuthFallback(){var t=this;if(!0===Helpers.App.isExternalSsoFallbackUrl("google"))return this._onGoogleAuthFallback(),this.dispatch("login.form.success"),void t._redirectSubscriberToForYou();ExternalSsosSupport.STANDARD_SSO_PROVIDERS.forEach(function(e){!0===Helpers.App.isExternalSsoFallbackUrl(e)&&(t._onExternalSsoAuthFallback(e),t.dispatch("login.form.success"),t._redirectSubscriberToForYou())})},_onGoogleAuthFallback:function _onGoogleAuthFallback(){var e=Service.Sso.getInstance(),t=Helpers.App.getUser(),i=Helpers.App.getUrlParam("googleFallback");t.authenticated_by="google";var n=e.isValidSignup(t);this._sendGoogleAuthenticationFallbackEvents(),this._sendGoogleAuthenticationEvents(n,t,i),ExternalSsosSupport.removePageStateCookie()},_onExternalSsoAuthFallback:_sendExternalSsoAuthenticationEvents:function _sendExternalSsoAuthenticationEvents(e){var t=Service.Sso.getInstance(),i=e+"Fallback",n=Helpers.App.getUrlParam(i),s=Helpers.App.getUser();s.authenticated_by=e,t.isValidSignup(s)&&Helpers.GlobalEventTracker.userSignup(),Helpers.GlobalEventTracker.userLogin(s),Helpers.GlobalEventTracker.externalSsoSigninSuccess({userData:s,source:n,provider:e}),Helpers.App.deleteURLParam(i)},_sendGoogleAuthenticationFallbackEvents:_sendGoogleAuthenticationEvents:function _sendGoogleAuthenticationEvents(e,t,i){var n={userData:t,source:i,isGoogleFallbackEnabled:!0};Helpers.GlobalEventTracker.googleSigninSuccess(n),!0===e&&Helpers.GlobalEventTracker.userSignup(),Helpers.GlobalEventTracker.userLogin(t)},directDownload:function directDownload(){return this.purchasesModal.skipModalAndDownloadImmediately(),this},downloadOrActivateModal:function downloadOrActivateModal(){return this.purchasesModal.downloadInmediatelyOrActivate(),this},showPaymentModal:function showPaymentModal(){return this.ctaBlockSection?this.ctaBlockSection.subscribeButtonClick():this.subscriptionsPartial.subscribeButtonClick(),this},updatePaymentModalInfo:function updatePaymentModalInfo(){this.ctaBlockSection&&this.ctaBlockSection.purchaseOverlay&&(this.ctaBlockSection.purchaseOverlay.syncCouponRequestData(),this.ctaBlockSection.purchaseOverlay.updateBillingInfo())},updateSubscriptionPaymentInfo:function updateSubscriptionPaymentInfo(){this.purchasesModal&&(this.purchasesModal.updateSubscriptionPaymentInfo(),this.purchasesModal.syncSubscriptionCouponRequestData())},_bindDirectDownload:function _bindDirectDownload(){if(this.stage){var e=Utils.bindFn(this);this.stage.bind("stage.infoReady",e(this.directDownload))}},performNextLoginActionFromRedirect:function performNextLoginActionFromRedirect(){var e=Helpers.App.getNextLoginAction();null===e||Helpers.App.isGuestCheckoutExperimentActive()&&!1===Service.GuestCheckout.getInstance().getNextLoginActionWithGuestCheckout()||(Service.GuestCheckout.getInstance().clearNextLoginActionWithGuestCheckout(),"activate-purchase"===e&&Service.MultiplePurchase.getInstance().canDoMultiplePurchases()?(Helpers.App.isLoggedIn()&&Helpers.App.isGuestCheckoutCookieActive()&&this.directDownload(),document.addEventListener("stageReady",function(){this.directDownload()}.bind(this))):"activate-purchase"===e&&this.directDownload(),!0!==e.includes("activate-pricing")&&"activate-purchase-subscription"!==e||!1===Helpers.App.isSubscriptionValid()&&this.showPaymentModal(),"bg-removal-download"===e&&!0===this.isStagePage()&&(!1===Helpers.App.isSubscriptionValid()?this.downloadOrActivateModal():this.directDownload()),Helpers.App.clearNextLoginAction())},_showLoginModal:_bindRecommendationSectionEvents:function _bindRecommendationSectionEvents(){if(!1!==this.stage.hasRecommendedTemplates()){var e=this;e.appNavBar.bind("login.success",function(){e.stage.updateRecommendedTemplatesBookmarks()}),e.appNavBar.bind("signup.success",function(){e.stage.updateRecommendedTemplatesBookmarks()}),!1!==Helpers.App.isMobile()&&(e.bind("recommendationModal.show",function(){e.stage.showRecommendationDownloadModal()}),e.bind("sideMenu.open",function(){e.stage.hideRecommendationSection()}),e.bind("sideMenu.close",function(){e.stage.reopenRecommendationSection()}))}},_myPlaceitButtonExperimentHandler:function _myPlaceitButtonExperimentHandler(){if(!1!==Helpers.App.isLoggedIn()){var e=this._getMyPlaceitButtonElement();this._bindMyPlaceitButtonEvents(e)}},_getMyPlaceitButtonElement:function _getMyPlaceitButtonElement(){var e=this.appNavBar.getElement().find(".account-box > :not(.mobile) .my-placeit a");return Helpers.App.isMobile()&&(e=this.appNavBar.getElement().find(".account-box .mobile .my-placeit a")),e},_myPlaceitButtonClickHandler:function _myPlaceitButtonClickHandler(e){e.preventDefault(),Helpers.GlobalEventTracker.track("menu:myPlaceit",{URI:window.location.href}),window.location.href=window._pl_host+"/my_placeit"},_bindMyPlaceitButtonEvents:function _bindMyPlaceitButtonEvents(e){e.bind("click",Utils.bindFn(this)(this._myPlaceitButtonClickHandler))},_loginCallbackBuilder:function _loginCallbackBuilder(e){var t=this,i=this.appNavBar.bind("login.success",i)},_initSessionStateService:function _initSessionStateService(){var e=Utils.bindFn(this);Service.SessionState.getInstance({showLogin:e(this._showLoginModal),loginCallbackBuilder:e(this._loginCallbackBuilder)})},_openCheckoutAfterGuestLoginAction:function _openCheckoutAfterGuestLoginAction(){!1!==Service.GuestCheckout.getInstance().getNextLoginActionWithGuestCheckout()&&("activate-purchase"===Helpers.App.getNextLoginAction()&&!1===Helpers.StageType.isStage()&&Helpers.App.setNextLoginAction("compare"),this.performNextLoginActionFromRedirect())}}}),Class(UI,"MyDriveDownloadsItem").inherits(Widget).includes(BubblingSupport)({html:'<li>                <img class="my-drive-downloads-thumbnail" src=""/>                <a href="#" class="my-drive-downloads-link"><span class="blue-arrow"></span></a>                <a href="#" title="Change your image size" class="btn btn-default my-drive-downloads-crop" target="_blank"><span class="glyphicon-crop"></span></a>                <div class="my-drive-downloads-processing-wrapper">                   <p class="my-drive__processing-text"> Processing your </p>                   <div class="my-drive__processing-line">                    <div class="my-drive__processing-progress"> </div>                  </div>                </div>                 <div class = "my-drive__processing-hint" >We\'ll email you when it\'s ready!  </div>             </li>',PERCENTAGE_QUEUE:30,TRESHOLD_FOR_UPDATING:100,IMAGE_CROPPER_URL:"/image-cropper?asset_id=${productshotId}",prototype:{image:null,el:null,id:null,stage_slug:null,stage_category:null,stage_id:null,hsh:null,res:null,url:null,thumb:null,processing:null,process_id:null,image_type_id:null,slug:null,timePollStarted:null,_tempThumbs:{image:"/assets/dummy-thumb-image.svg",video:"/assets/dummy-thumb-video.svg"},_categoryText:{mockups:"mockup",design_templates:"design",video_cropper:"video",video_to_gif_converter:"gif",free_image_resizer_cropper:"image",videos:"video",logos:"logo"},init:function init(e){Widget.prototype.init.call(this,e),this.el=this.element[0],this.$img=$(this.el.querySelector(".my-drive-downloads-thumbnail")),this.$link=$(this.el.querySelector(".my-drive-downloads-link")),this.$cropLink=this.element.find(".my-drive-downloads-crop"),this.$processing=$(this.el.querySelector(".my-drive-downloads-processing-wrapper")),this.$hint=$(this.el.querySelector(".my-drive__processing-hint")),this.$progressLine=$(this.$processing.find(".my-drive__processing-progress")),this.$progressBar=$(this.$processing.find(".my-drive__processing-line")),this.$processText=$(this.$processing.find(".my-drive__processing-text")),this._setThumb(),!1===this.processing?this._setLink():(this._shouldShowEmailHint()?this.$hint.show():this.$hint.hide(),this._setProgress(this.percentage)),this.$link.on("click",this._linkHandler.bind(this)),!0===this._canShowImageCrop(e)&&(this._updateCropLink(e.id),this._showCropLink()),this.$cropLink.bind("click",Utils.bindFn(this)(this._cropLinkClickHandler))},update:function update(e){!1===e.processing&&!1===this.processing||(!0===e.processing&&(this.queue=e.queue,this._setProgress(e.percentage)),!1===e.processing&&!0===this.processing&&(this.processing=!1,this.thumb=e.thumb,this._setImageProgress(100),this.constructor.dispatch("processed",this),this.url=e.url,this._setLink(),this._setThumb(),this._addHighlight(),this.$hint.hide(),!0===this.isVideo()&&this.constructor.dispatch("videothumb:updated",{videoProductId:e.id,videoThumb:e.thumbVideo})),!0===this._canShowImageCrop(e)&&(this._updateCropLink(e.id),this._showCropLink()))},updateFailed:function updateFailed(){this.show(),this.$processText.text("Sorry, we couldn\u2019t process your request."),$(this.el).addClass("processing-error"),this.$progressBar.hide(),this.$hint.hide(),this.constructor.dispatch("processed",this)},_setThumb:function _setThumb(){!0===this.processing?this.$img.attr("src",this._tempThumbs[this.assetType]):this.$img.attr("src",this.thumb)},isVideo:function isVideo(){return"video"===this.assetType},_setProgress:function _setProgress(e){this.$processing.show(),this.$link.hide(),!0===this.isVideo()?this._setVideoProgress():this._setImageProgress(e)},_setImageProgress:function _setImageProgress(e){this.$progressLine.show(),this.$processText.text("Processing your "+this.getCategoryText()+"..."),e>this.percentage&&this.$progressLine.width(e+"%")},_getSecondsSinceProcessingStarted:function _getSecondsSinceProcessingStarted(){return((new Date).getTime()-this.timePollStarted.getTime())/1e3},_setVideoProgress:function _setVideoProgress(){switch(this.queue){case 0:this.$processText.text("Processing your "+this.getCategoryText()+"..."),this.$progressBar.show(),this.timePollStarted||(this.timePollStarted=new Date);var e=this._getSecondsSinceProcessingStarted()*((100-this.constructor.PERCENTAGE_QUEUE)/10)/(this.constructor.TRESHOLD_FOR_UPDATING/10)+this.constructor.PERCENTAGE_QUEUE;e<100&&this.$progressLine.width(e+"%");break;case-1:this.$progressLine.width("100%");break;default:this.$processText.text("Please wait on pending video processing"),this.$progressBar.hide()}},_setLink:function _setLink(){this.$link.show(),this.$processing.hide(),this.$hint.hide();var e="Click here to download";!0===Helpers.App.isMobileDevice()&&(e="Tap here to download"),!0===this.isAlreadyDownloaded()&&(e="Download Again");var t='<span class="blue-arrow"></span>';if(this.$link.html(e+t),!0===this.isVideo()){var i="download_video_v4";"video-to-gif-converter"===this.stage_slug?i="download_gif":!0===this._isVideoV5()&&(i="download_video_v5");var n="/stages/"+this.process_id+"/"+i+"?comp=false";this.$link.attr("href","#");var s=this,r=function(e){return s.$link.off("click",r),page.showShortcutInstructionsModal(e),!1};this.$link.on("click",r),this.$link.attr("data-download",n)}else this.$link.attr("href","/stages/"+this.hsh+"/download?res=normal"),this.$link.attr("download","image.png")},_addItemAsDownloaded:function _addItemAsDownloaded(){var e,t=Helpers.App.getUser().id;try{e=JSON.parse(sessionStorage.getItem(t))}catch(i){console.log(i)}null!==e&&e!==undefined||(e=new Array),e.push(this.id),20<e.length&&e.shift(),sessionStorage.setItem(t,JSON.stringify(e))},isAlreadyDownloaded:function isAlreadyDownloaded(){var e=Helpers.App.getUser().id,t=new Array;try{t=JSON.parse(sessionStorage.getItem(e))||t}catch(n){console.log(n)}for(var i=0;i<t.length;i++)if(t[i]===this.id)return!0;return!1},getCategoryText:function getCategoryText(){return 17===this.image_type_id?this._categoryText[this.stage_slug.split("-").join("_")]:this._categoryText[this.stage_category.split("-").join("_")]},_linkHandler:function _linkHandler(){this._addItemAsDownloaded(),this._removeHighlight(),this._setLink(),this.constructor.dispatch("downloaded",this),Helpers.GlobalEventTracker.track("Download:itemDownloaded",this._getEventData())},_getEventData:function _getEventData(){return{category:this._getCategoryName(),slug:this.stage_slug,stage_id:this.stage_id.toString(),thumb:this.thumb,stage_type:Helpers.StageType._types[this.image_type_id]}},_getCategoryName:function _getCategoryName(){var e,t;for(t=0;t<window._pl_categories.length;t++)if((e=window._pl_categories[t].name).replace(/\s/g,"-").toLowerCase()===this.stage_category)return e},_addHighlight:function _addHighlight(){this.el.classList.add("highlight")},_removeHighlight:_isVideoV5:_canShowImageCrop:function _canShowImageCrop(e){var t="image"===e.assetType,i="mockups"===e.stage_category||"design-templates"===e.stage_category;return!1===e.processing&&!0===t&&!0===i},_updateCropLink:function _updateCropLink(e){var t=this.constructor.IMAGE_CROPPER_URL.replace("${productshotId}",e);this.$cropLink.attr("href",t)},_showCropLink:function _showCropLink(){this.element.addClass("crop-action")},_cropLinkClickHandler:function _cropLinkClickHandler(){Helpers.GlobalEventTracker.downloadCrop("download",this._getEventData())},destroy:function destroy(){return this.el=null,this.id=null,this.hsh=null,this.res=null,this.url=null,this.thumb=null,this.processing=null,this.process_id=null,this.image_type_id=null,Widget.prototype.destroy.call(this)},_shouldShowEmailHint:function _shouldShowEmailHint(){var e=Helpers.App.getUser();return e&&e.downloadEmailNotifications}}}),Class(UI,"MyDriveDownloadsTooltip").inherits(Widget)({MOBILE_MAX_WIDTH:580,MAX_ITEMS_TO_SHOW:5,ERROR_TIME:6e3,ERROR__FADEOUT_TIME:2e3,elementClass:"my-drive__breakdown",html:'<div class=" animated bounceInDown2 variant-d" role="tooltip">                 <div class="my-drive__breakdown-header">                     <div class="title"> <p>My Downloads</p> </div>                    <div class="close-icon">  </div>                 </div>                 <div class="my-drive__breakdown-body" >                        <div class="my-drive__error">                        <img class="my-drive-downloads-thumbnail" src="/assets/download-error-icon.svg"/>                        <div class="my-drive-downloads-processing-wrapper">                             <p class="my-drive__error-header">We are sorry!</p>                             <p class="my-drive__error-text">We couldn\'t process your request</p>                         </div>                         </div>                     <div class="my-drive__breakdown-section-wrapper">                        <div class="my-drive__empty">                            <img src="/assets/download-empty.svg"> </img>                            <span class="title"> No Downloads Yet </span>                             <span> Your latest downloads will be available here </span>                             <a href="/purchases" title="My Drive" class="my-drive__empty-link">Click here to see your downloads</a>                        </div>                         <ul class="my-drive__breakdown-list"></ul>                     </div>                </div>                 <div class="my-drive__breakdown-footer">                    <a href="/purchases" title="My Drive"> View All </a>                </div>            </div>',freebiesBanner:'<div class="myfreebies">            <button class="close-btn">                <span aria-hidden="true">\xd7</span>            </button>            <div class="myfreebies-container">                <div class="myfreebies-wrapper">                    <div class="myfreebies-mainicon ic-freebies-crown"></div>                    <div class="myfreebies-info">                        <h2>Upgrade to download more!</h2>                        <p>Ready to go limitless? Enjoy full download access with a subscription.</p>                    </div>                </div>                <div class="myfreebies-button">                    <a href="#" target="_blank" class="myfreebies-anchor">                        <button>Start Now</button>                    </a>                </div>            </div>        </div>',prototype:{_visible:!1,_isEmpty:!0,el:null,$close:null,list:null,$list:null,$empty:null,$footer:null,$freebiesBanner:null,$freebiesClose:null,processingItems:null,failedItems:null,init:function init(e){Widget.prototype.init.call(this,e),this.el=this.element[0],this.$close=$(this.el).find(".close-icon"),this.list=$(this.el).find(".my-drive__breakdown-list"),this.$list=$(this.list),this.$empty=$(this.el).find(".my-drive__empty"),this.$error=$(this.el).find(".my-drive__error"),this.$footer=this.element.find(".my-drive__breakdown-footer"),this.$error.hide(),this.processingItems={},this.failedItems={},this._bindEvents(),this.updateForNoRecents()},_shouldRenderFreebiesBanner:function _shouldRenderFreebiesBanner(){return!0!==Helpers.App.subscriptionIsActive()&&(window.latestFreeDownloads.left!==undefined&&(!(0<window.latestFreeDownloads.left)&&(null===$.cookie("limit_freebies_downloads")&&("d"===window.userFreeDownloads.exp_value&&(null===this.$freebiesBanner&&!0!==this._isEmpty)))))},_bindFreebiesBanner:function _bindFreebiesBanner(){var t=this;this.$freebiesClose.on("click",function(){t.$freebiesBanner.hide(),Helpers.App.setFreebiesLimitCookie()}),this.$freebiesAnchor.on("click",},_renderFreebiesBanner:function _renderFreebiesBanner(){var e=$(this.constructor.freebiesBanner);e.insertBefore(this.$footer),this.$freebiesBanner=e,this.$freebiesClose=this.$freebiesBanner.find(".close-btn"),this.$freebiesAnchor=this.$freebiesBanner.find(".myfreebies-anchor"),this._bindFreebiesBanner()},_bindEvents:function _bindEvents(){var n=this;UI.MyDriveDownloadsItem.bind("processed",this._handleProcessed.bind(this)),UI.MyDriveDownloadsItem.bind("downloaded",this._handleDownloaded.bind(this)),this.$close.on("click",this.hide.bind(this)),window.addEventListener("resize",function(){this._calculatePosition()}.bind(this));var t=this;return document.addEventListener("click",function(e){t.element.is(":visible")&&!1===t.element[0].contains(e.target)&&!1===Helpers.App.isGuestCheckoutExperimentActive()&&t.hide()},!0),Helpers.DownloadProcess.bind("downloadStartUpdate",function(e){0!==e.data.items.length&&n._hideEmptyMsg()}),Helpers.DownloadProcess.bind("downloadItemNew",function(e){var t=e.data.item,i=e.data.index;n._createNewItem(t,i)}),Helpers.DownloadProcess.bind("downloadItemUpdate",function(e){var t=e.data.item,i=e.data.index;n._updateItem(t,i)}),Helpers.DownloadProcess.bind("downloadItemError",function(e){n._updateFailedProcessing(e.data.item)}),Helpers.DownloadProcess.bind("downloadEndUpdate",,this},_createNewItem:function _createNewItem(e,t){this.appendChild(new UI.MyDriveDownloadsItem(e)),this[e.name].render(this.$list),this._updateItemIndex(this[e.name],t)},_updateItem:function _updateItem(e,t){this[e.name]&&(this[e.name].update(e),this._updateItemIndex(this[e.name],t))},_updateItemIndex:function _updateItemIndex(e,t){e&&(t>=UI.MyDriveDownloadsTooltip.MAX_ITEMS_TO_SHOW?e.hide():e.show(),$(e.element).css("order",t))},_hideEmptyMsg:function _hideEmptyMsg(){this.$empty.hide(),this._isEmpty=!1,$(this.el).find(".my-drive__breakdown-header .title").show(),$(this.el).find(".my-drive__breakdown-footer a").show(),Helpers.App.isGuestCheckoutExperimentActive()&&$(this.el).find(".my-drive__breakdown-footer a").hide()},showError:function showError(e){this.$error.show(),this.$empty.hide();var t=$(this.el).find(".my-drive__breakdown-header .title"),i=$(this.el).find(".my-drive__breakdown-footer a");t.hide(),i.hide(),this.show(),this._setErrorText(e.errorType);var n=this;setTimeout(function(){n._hideError()},UI.MyDriveDownloadsTooltip.ERROR_TIME)},_cleanDeletedItems:function _cleanDeletedItems(i){var e=this.children,t=e.length;e.forEach(function(t){var e=i.find(function(e){return e.id===t.id})===undefined;e&&t.processing?this._updateFailedProcessing(t):e&&!this.failedItems[t.name]&&(this[t.name].hide(),this[t.name].destroy(),delete this[t.name])},this),0===this.children.length&&0<t&&this.updateForNoRecents()},_setErrorText:function _setErrorText(e){var t=this.$error.find(".my-drive__error-header"),i=this.$error.find(".my-drive__error-text");"too_many_request"===e?(t.html("You are downloading too fast"),i.html("Please slow down and try again")):(t.html("We are sorry!"),i.html("Sorry we couldn't process your request"))},_updateFailedProcessing:function _updateFailedProcessing(e){var t=e.name;this[t]&&(this.failedItems[t]=!0,this[t].updateFailed(),$(this[t].element).css("order",0),this._hideEmptyMsg())},updateForNoRecents:function updateForNoRecents(){var e=$(".my-drive__empty-link");this.element.addClass("no-recents"),this.$empty.show(),!0===Helpers.App.isMobile()&&e.html("Tap here to see your downloads"),Helpers.App.isGuestCheckoutExperimentActive()&&e.remove(),$(this.el).find(".my-drive__breakdown-header .title").hide(),$(this.el).find(".my-drive__breakdown-footer a").hide()},updateForEmpty:function updateForEmpty(){this.element.removeClass("no-recents"),this.$empty.css("display","flex"),$(this.el).find(".my-drive__breakdown-header .title").hide(),$(this.el).find(".my-drive__breakdown-footer a").hide(),Helpers.App.isGuestCheckoutExperimentActive()&&(this.$empty.find("span, img").hide(),this.$empty.html('<div class="pl-spinner-primary-xl relative"></div>'))},toggle:function toggle(){return this.element.is(":visible")?this.hide():this.show(),this},_canShow:function _canShow(){return!$("body").hasClass("modal-open")},show:function show(){this._canShow()?(this._calculatePosition(),$(this.el).show(),!0===this._shouldRenderFreebiesBanner()&&this._renderFreebiesBanner()):$(document).one("hidden.bs.modal",this.show.bind(this))},_isTargetInViewPort:function _isTargetInViewPort(){if(this.target===undefined||0===this.target.length)return!1;var e=this.target.getBoundingClientRect();return 0<=e.top&&0<=e.left&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)},destroy:function destroy(){return this._visible=null,this.el=null,this.$close=null,this.list=null,this.$list=null,Widget.prototype.destroy.call(this)},_handleDownloaded:function _handleDownloaded(){this.dispatch("all.downloaded"),sessionStorage.setItem("pendingDownloads",!1),sessionStorage.setItem("hasDownloaded",!0)},_handleProcessed:function _handleProcessed(){this.show(),sessionStorage.setItem("pendingDownloads",!0),sessionStorage.setItem("hasDownloaded",!0)},hide:function hide(){this.dispatch("hidden"),Widget.prototype.hide.call(this),this._hideError(),Object.keys(this.failedItems).forEach(function(e){this[e]!==undefined&&(this[e].destroy(),delete this[e]),delete this.failedItems[e]},this)},_hideError:function hideError(){this.$error.fadeOut(UI.MyDriveDownloadsTooltip.ERROR__FADEOUT_TIME),this.$list.is(":empty")&&(Widget.prototype.hide.call(this),this.$empty.show())},_calculatePosition:function _calculatePosition(){document.documentElement.clientWidth<UI.MyDriveDownloadsTooltip.MOBILE_MAX_WIDTH?(this.target=1<this.targets.length?this.targets[1]:this.target,!1===this._isTargetInViewPort()&&this.element.addClass("no-target")):this.element.removeClass("no-target")}}}),Class(UI,"MyDriveDownloads").inherits(Widget).includes(BubblingSupport)({prototype:{el:null,link:null,icon:null,_timer:null,_processingClassnames:{PROCESSING:"processing",PROCESSED:"processed",ALL_DOWNLOADED:"all-downloaded",PENDING_DOWNLOAD:"pending",HAS_DOWNLOADED:"has-downloaded"},_processingFeedbackReferences:[],Tooltip:null,init:function init(e){Widget.prototype.init.call(this,e),this.element.length&&this._cacheReferences(),this._processingFeedbackReferences.push(this.el),!1===window.apiPage&&this._bindEvents()},_bindEvents:function _bindEvents(){
var e=Utils.bindFn(this);return UI.MyDriveDownloadsItem.bind("processed",e(this._processedUIState)),this.Tooltip.bind("all.downloaded",e(this._allDownloadedUIState)),this.Tooltip.bind("all.downloaded",e(this._activateRecommendationModalExperiment)),this.Tooltip.bind("hidden",e(this._pendingDownloadUIState)),this.Tooltip.bind("freebies-anchor",e(function(){this.dispatch("freebies-anchor")})),Helpers.DownloadProcess.bind("downloadNoRecent",e(function(){this.Tooltip.updateForNoRecents()})),Helpers.DownloadProcess.bind("downloadEmpty",e(function(){this.Tooltip.updateForEmpty()})),Helpers.DownloadProcess.bind("downloadStartUpdate",e(function(){this._updateUI()})),this},_cacheReferences:function _cacheReferences(){return this.el=this.element[0],this.link=this.element.find(".my-drive__link"),this.icon=this.el.querySelector(".my-drive__processing-icon-wrapper"),this.Tooltip&&(this.Tooltip.element.remove(),this.removeChild(this.Tooltip),this.Tooltip=null),this.appendChild(new UI.MyDriveDownloadsTooltip({name:"Tooltip",targets:this._processingFeedbackReferences})),this.Tooltip.render($("body")),this.link.off("click").on("click",this._linkClickHandler.bind(this)),this},restart:function restart(){return this.element=$(".past-downloads-item-holder"),this._cacheReferences(),this.update(),this},_linkClickHandler:function _linkClickHandler(e){return e.preventDefault(),$(document.body).removeClass("open-sidemenu"),this.Tooltip.element.is(":visible")||this.update(),this.Tooltip.toggle(),sessionStorage.setItem("pendingDownloads",!1),this._pendingDownloadUIState(),this},getProcessingItems:getProcessedItems:function getProcessedItems(){return Helpers.DownloadProcess.getSuccessDownloads()},cloneProcessingFeedbackTo:function cloneProcessingFeedbackTo(e,t){var i=this;if(!e)return i;var n=e.querySelector(".my-drive__processing-mobile-feedback");null!==n&&n.remove();var s=document.createElement("div");return s.appendChild(i.icon.cloneNode(!0)),t&&(s.className=t),e.appendChild(s),i._processingFeedbackReferences.push(s),s.addEventListener("click",this._linkClickHandler.bind(this)),i._updateMobileUi(),i},_updateUI:function _updateUI(){return this.getProcessingItems().length?(this._processingUIState(),this._updateMobileUi(!0)):this._allProcessedUIState(),this},_processingUIState:function _processingUIState(){return this._addProcessingClassName(this._processingClassnames.PROCESSING),this},_processedUIState:function _processedUIState(){return this.dispatch("process",{queue:this.getProcessingItems()}),this._addProcessingClassName(this._processingClassnames.PROCESSED),this._addProcessingClassName("highlighted"),setTimeout(function(){this._removeProcessingClassName("highlighted")}.bind(this),3e3),this},_allProcessedUIState:function _allProcessedUIState(){var e=this;if($.cookie("pl_processing_tracker")&&$.removeCookie("pl_processing_tracker"),!1!==e.el.classList.contains(e._processingClassnames.PROCESSING)||!1!==e.el.classList.contains(e._processingClassnames.PROCESSED))return e._removeProcessingClassName(e._processingClassnames.PROCESSING),this},_allDownloadedUIState:function _allDownloadedUIState(){var e=this;return e._removeProcessingClassName(e._processingClassnames.PROCESSED),e._addProcessingClassName(e._processingClassnames.ALL_DOWNLOADED),this},_pendingDownloadUIState:function _pendingDownloadUIState(){var e=this;return"true"===sessionStorage.getItem("pendingDownloads")?e._addProcessingClassName(e._processingClassnames.PENDING_DOWNLOAD):e._removeProcessingClassName(e._processingClassnames.PENDING_DOWNLOAD),this},_addProcessingClassName:function _addProcessingClassName(t){var e=this;return t&&e._processingFeedbackReferences.forEach(function(e){e.classList.add(t)}),e},_removeProcessingClassName:function _removeProcessingClassName(t){var e=this;return t&&e._processingFeedbackReferences.forEach(function(e){e.classList.remove(t)}),e},_requestError:function _requestError(e){if(!e.message||"Cancelation error"!==e.message){var t=e.message||e.responseText||"The request fail with status: "+e.status+" statusText: "+e.statusText+" readyState: "+e.readyState;throw new Error("Processing polling error: "+t)}},update:function update(e,t){var i=Helpers.App.getUser().id,n=Utils.bindFn(this);return i&&(t&&Utils.promisifyEventBuilder(Helpers.DownloadProcess)("downloadEndUpdate").then(n(this._showTootltip)),Helpers.DownloadProcess.pollProcessing()["catch"](this._requestError)),this},_showTootltip:function _showTootltip(){this.Tooltip.show()},showError:function showError(e){this.Tooltip.showError(e)},getItems:function getItems(){return Helpers.DownloadProcess.getAllDownloads()},getProcessedItemByKey:function getProcessedItemByKey(t,i){var n;return this.getProcessedItems().some(function(e){if(e[t]===i)return n=e}),n},hideTooltip:function hideTooltip(){this.Tooltip.hide()},_updateMobileUi:function _updateMobileUi(e){var t=this;Helpers.App.isMobile()&&(sessionStorage.getItem("hasDownloaded")||e)&&t._addProcessingClassName(t._processingClassnames.HAS_DOWNLOADED)},_activateRecommendationModalExperiment:function _activateRecommendationModalExperiment(){this.dispatch("recommendationModal.show")}}}),Class(UI,"UserForm").inherits(Widget).includes(BubblingSupport)({html:'        <form action="#" method="post" data-remote="true" data-type="json">            <div class="alert alert-danger">              <p></p>            </div>        </form>    ',prototype:{init:function init(e){Widget.prototype.init.call(this,e),this.$alert=this.element.find(".alert").hide(),this.signUpEmail=this.element.find("#user_email"),this.signUpPassword=this.element.find("#user_password"),this.loginEmail=this.element.find("#email"),this.loginPassword=this.element.find("#password"),this.isAndroid=/Android/.test(navigator.appVersion),this.bindings()},loginSuccess:function loginSuccess(e,t){var i=this;if(Helpers.App.isMobileDevice()&&document.activeElement.blur(),this.isAndroid&&$(".navbar.navbar-default.navbar-fixed-top").css("top","0px"),page.isHomepage&&!0===page.isHomepage()&&"undefined"!=typeof page.stage&&(page.stage.stageActionsManager.$bookmarkButton.unbind("click"),page.stage.stageActionsManager.$bookmarkButton.on("click",function(){var e=Helpers.App.getUrlParam("draftId")||null;$.ajax({dataType:"json",data:{draftId:e},url:"/bookmarks/"+Helpers.StageType.getStageID(),type:page.stage.stageActionsManager.$bookmarkButton.hasClass("favorite")?"DELETE":"POST",success:error:function(e){console.log(e)}})}),$.get("/bookmarks/stage_is_bookmarked/"+Helpers.StageType.getStageID(),function(e){e.stage_is_bookmarked?(page.stage.stageActionsManager.$bookmarkButton.addClass("favorite"),page.stage.stageActionsManager.$bookmarkSign.addClass("glyphicon-heart"),page.stage.stageActionsManager.$bookmarkSign.removeClass("glyphicon-heart-empty"),Helpers.App.isMobileDevice()||page.stage.stageActionsManager.bookPopup.attr("data-content",'<div class="bookmark-tooltip-content">Remove from bookmarks</div>').data("bs.popover").setContent()):(page.stage.stageActionsManager.$bookmarkButton.removeClass("favorite"),page.stage.stageActionsManager.$bookmarkSign.removeClass("glyphicon-heart"),page.stage.stageActionsManager.$bookmarkSign.addClass("glyphicon-heart-empty"),Helpers.App.isMobileDevice()||page.stage.stageActionsManager.bookPopup.attr("data-content",'<div class="bookmark-tooltip-content">Bookmark</div>').data("bs.popover").setContent())}),Helpers.StageType.getStageInfo().is_slave?page.stage.stageActionsManager.$bookmarkButton.hide():page.stage.stageActionsManager.$bookmarkButton.show()),window.apiPage||$.get("/bookmarks/count",function(e){Helpers.App.setBookmarksCount(e.count),window._pl_numberOfBookmarks=e.count,i.dispatch("bookmarks.retrieved",e)}),Helpers.App.setUser(t),Helpers.App.setAdmin(t.is_admin),t.coupon&&Helpers.CouponHelper.load(t.coupon.coupon_code),Helpers.App._getPurchases(function(){this.dispatch("form.success",{authenticated_by:t.authenticated_by})}.bind(this)),t.is_migration_to_placeit)Helpers.GlobalEventTracker.ssoTrack("user:signup:accountMigrated",t),Helpers.App.sendEnvatoSignUp({trackingCode:19603,customerId:t.id,envatoId:t.envato_id});else if(Helpers.GlobalEventTracker.userLogin(t),"true"===$.cookie("pl_open_pricing_unlogged")){var n=Helpers.App.getUserType();Helpers.GlobalEventTracker.pricingModalStillshots({session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id,fired_on_login:!0,user_type_name:n.name,user_type_id:n.id}),$.removeCookie("pl_open_pricing_unlogged",{path:"/"})}window.placeitGift&&"sign-up-form"==e.className?(Helpers.GlobalEventTracker.giftSignup({gift_hash:window.placeitGiftHash}),this._applyGiftToUser()):window.placeitGift&&"sign-up-form"!=e.className&&(window.location.href="/?status=2"),Helpers.UserSegment.removeCookies(),Helpers.UserSegment.request(),UI.Navigation.NavBar.dispatch("user:login")},bindings:function bindings(){this.isAndroid&&(this.signUpEmail.bind("focus",function(){$(".navbar.navbar-default.navbar-fixed-top").css("top","-170px")}),this.signUpEmail.bind("blur",function(){$(".navbar.navbar-default.navbar-fixed-top").css("top","0px")}),this.signUpPassword.bind("focus",function(){$(".navbar.navbar-default.navbar-fixed-top").css("top","-170px")}),this.signUpPassword.bind("blur",function(){$(".navbar.navbar-default.navbar-fixed-top").css("top","0px")}),this.loginEmail.bind("focus",function(){$(".navbar.navbar-default.navbar-fixed-top").css("top","-120px")}),this.loginEmail.bind("blur",function(){$(".navbar.navbar-default.navbar-fixed-top").css("top","0px")}),this.loginPassword.bind("focus",function(){$(".navbar.navbar-default.navbar-fixed-top").css("top","-120px")}),this.loginPassword.bind("blur",)},showErrors:function showErrors(e){var t=Object.keys(e)[0],i=e[t];Array.isArray(i)&&(i=t+" "+e[t][0]),this.element.find(".has-error").removeClass("has-error"),this.element.find("."+t+"-field").addClass("has-error"),this.$alert.show().find("p").text(i)},_getCurrentUser:function _getCurrentUser(t){$.ajax({url:"/current_user",type:"get",dataType:"json",context:this,success:function(e){t(e)}})},_applyGiftToUser:function _applyGiftToUser(){$.ajax({url:"/users/add_single_credit",type:"post",dataType:"json",data:{gift_id:window.placeitGiftHash},context:this,success:function(){window.location.href="/?status=1"}})}}}),Module("RequiredFieldsPopovers")({POPOVERS_CONFIG:{placement:"top",trigger:"manual",html:!0},POPOVER_ICON:'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 15 15"><path d="M7.5 0C3.363 0 0 3.363 0 7.5 0 11.637 3.363 15 7.5 15c4.137 0 7.5-3.363 7.5-7.5C15 3.363 11.637 0 7.5 0zm-.836 3.758c0-.457.379-.836.836-.836.457 0 .836.379.836.836V7.94a.842.842 0 01-.836.836.842.842 0 01-.836-.836zM7.5 12.03a1.09 1.09 0 110-2.18 1.09 1.09 0 010 2.18zm0 0" fill="#fdb81e" /></svg>',POPOVER_MESSAGES:{checkbox:"Please select this box if you want to proceed.",password:"Please fill out this field.",text:"Please fill out this field.",recaptcha:"Please select the reCAPTCHA checkbox."},prototype:{_activePopover:null,_setPopovers:function _setPopovers(t){var i=this;this._configureRequiredFieldsPopovers(t.$requiredFields),this._configureRecaptchaPopover(t.$recaptcha);var e=function(e){$(e.target).is(t.$submitButton)||i._hidePopover()};this.element.click(e)},_configureRequiredFieldsPopovers:function _configureRequiredFieldsPopovers(e){if(e){var t=this;e.each(function(){var e=$(this);type=e.attr("type"),e.popover(t._getPopoverConfiguration(type))});var i=function(e){e.preventDefault(),t._activePopover||(t._activePopover=$(e.target).popover("show"))};e.on("invalid",i)}},_configureRecaptchaPopover:function _configureRecaptchaPopover(e){if(e){var t=this;e.popover(this._getPopoverConfiguration("recaptcha")),e.on("show.bs.popover",}},_getPopoverConfiguration:function _getPopoverConfiguration(e){var t=this.constructor.POPOVER_MESSAGES[e];return $.extend({},this.constructor.POPOVERS_CONFIG,{content:this.constructor.POPOVER_ICON+t,container:this.element})},_hidePopover:function _hidePopover(){this._activePopover&&(this._activePopover.popover("hide"),this._activePopover=null)}}}),window.Service={},Class(Service,"Sso")({TEXT_GOOGLE_GENERIC_FAIL:"Opps! Something went wrong, please try again.",TEXT_GOOGLE_POPUP_BLOCKED:"To continue, you'll need to enable pop-up windows for this site.",TEXT_TOKEN_ERROR:"Invalid token",VERIFY_SIGNIN_TOKEN_URL:"/sso/verify_signin_token",VALID_SECONDS_TO_SIGNUP:60,_instance:null,getInstance:function getInstance(){return null===Service.Sso._instance&&(Service.Sso._instance=new Service.Sso),Service.Sso._instance},prototype:{initGoogleSso:function initGoogleSso(){return new Promise(},authenticationWithGoogle:function authenticationWithGoogle(){return new Promise(function(e,t){var i=function i(e){t({error:e,message:Service.Sso.TEXT_GOOGLE_GENERIC_FAIL})},n=function n(e){t({error:e,message:Service.Sso.TEXT_GOOGLE_POPUP_BLOCKED,needs_redirect:!0})};envatoSso.signInWithGoogle({onSuccess:e,onFailure:i,onError:i,onPopupBlocked:n,onPopupClosed:t,onSignupNotAllowed:i,onConnectNotAllowed:i,onAccountDisabled:i,onSignupFailure:i})})},_prepareAuthenticationTokenConfigRequest:function _prepareAuthenticationTokenConfigRequest(e){var t=!1,i=!1;"signup"===e.source&&(t=!0),e.isGoogleToken&&(i=!0);var n={url:Service.Sso.VERIFY_SIGNIN_TOKEN_URL,type:"POST",data:{token:e.token,is_signup:t,is_google_token:i},beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},dataType:"json"};return Helpers.RequestConfig.prepareConfig(n)},ssoErrorHandler:function ssoErrorHandler(e){return Promise.reject({error:e,message:Service.Sso.TEXT_GOOGLE_GENERIC_FAIL})},getUserData:function getUserData(e){return e.data&&e.data.user?e.data.user:Promise.reject(e)},verifyAuthenticationToken:function verifyAuthenticationToken(e){if(!e.token)return this.ssoErrorHandler(Service.Sso.TEXT_TOKEN_ERROR);var t=this._prepareAuthenticationTokenConfigRequest(e);return P.ajax(t).then(this.getUserData)["catch"](this.ssoErrorHandler)},isValidUserData:prepareUserData:function prepareUserData(e){return!1===this.isValidUserData(e)?{}:{id:e.id,envato_id:e.envato_id,envato_uuid:e.envato_uuid,username:e.username,placeitPromotionNotifications:e.placeitPromotionNotifications,productUpdateNotifications:e.productUpdateNotifications,status:e.status,coupon:e.coupon,is_migration_to_placeit:e.is_migration_to_placeit,email:e.email,feedbackRequestNotifications:e.feedbackRequestNotifications,downloadEmailNotifications:e.downloadEmailNotifications,unsubscribe_code:e.unsubscribe_code,tracker_id:e.tracker_id,is_admin:e.is_admin,created_at:e.created_at,authenticated_by:e.authenticated_by}},_hasUserCreationData:function _hasUserCreationData(e){return!1!==Service.Sso.getInstance().isValidUserData(e)&&!(!e.created_at||!e.authenticated_by)},isValidSignup:function isValidSignup(e){if(!1===Service.Sso.getInstance()._hasUserCreationData(e))return!1;var t=e.created_at,i=e.authenticated_by;if(!1===this._isAuthBySsoProvider(i))return!0;var n=new Date,s=new Date(t);return s.setSeconds(s.getSeconds()+Service.Sso.VALID_SECONDS_TO_SIGNUP),!(n.getTime()>s.getTime())},_isAuthBySsoProvider:postSignupUpdate:function postSignupUpdate(e){var t={placeit_promotion_notifications:e,download_email_notifications:!0,product_update_notifications:!0,feedback_request_notifications:!0};Helpers.App.updateEmailNotifications(t)},validatePostSignupUpdate:function validatePostSignupUpdate(e,t){var i=Service.Sso.getInstance();!1!==i.isValidSignup(e)&&i.postSignupUpdate(t)}}}),Class("PromotionService")({applyPromoToSubscription:function applyPromoToSubscription(e){return PromotionService._reactivateSubscription().then(PromotionService._applyCouponToSubscription(e))},switchToSubscription:function switchToSubscription(e,t){return PromotionService._reactivateSubscription().then(PromotionService._switchSubscription(e,t))},applyPromoToSubscriptionUpdate:function applyPromoToSubscriptionUpdate(e,t){return PromotionService._updateSubscriptionPlan(e).then(PromotionService._applyCouponToSubscription(t))},_updateSubscriptionPlan:function _updateSubscriptionPlan(e){return PromotionService._ajax({url:"/update_subscription_plan",method:"POST",data:{plan_recurly_uuid:e},dataType:"json",encode:!0})},_applyCouponToSubscription:function _applyCouponToSubscription(e){return function(){return PromotionService._ajax({url:"/subscriptions/redeeem_coupon/"+e,method:"POST"})}},_switchSubscription:function switchSubscription(e,t){return function(){return PromotionService._ajax({url:"/switch_subscription_plan",method:"POST",data:{plan_recurly_uuid:e,coupon_code:t},dataType:"json",encode:!0})}},_reactivateSubscription:function _reactivateSubscription(){return PromotionService._isChurned()?PromotionService._ajax({url:"/subscriptions/promotion_reactivate_subscription",method:"POST"}):Promise.resolve()},_ajax:function _ajax(e){return P.ajax(e)},_isChurned:function _isChurned(){return window._isChurnedUser}}),Class(Service,"MultiplePurchase").includes(CustomEventSupport,BubblingSupport)({_instance:null,_designPlanManager:null,EMPTY_THUMBNAIL_PLACEHOLDER:"iVBORw0KGgoAAAANSUhEUgAAAG4AAABuCAYAAADGWyb7AAAACXBIWXMAAC4jAAAuIwF4pT92AAAZzElEQVR4Xu1dCbhT1bX+1z7JCSCKKCoyiMAdGLSCtcU61GoRbOtr1afWWrVOxVKtr/bJcBNoU5VBacUO1rbOYp1rbVVwFq1jpQgocJNcZLiAiIBcLqA3OWet9+2T6SS5yc31Bk1ec76P7xOy9zlrr3+vtde4JVSfiuQAVSTVVaJRBa5CN0EVuCpwFcqBCiW7KnFV4CqUAxVKdlXiqsBVKAcqlOyqxFWBq1AOVCjZVYmrAlehHKhQsqsSVwWuQjlQoWRXJa4KXIVyoELJrkpcFbgK5UCFkl2VuCpwFcqBCiW7KnFV4CqUAxVKdlXiqsBVKAcqlOyqxFWBq1AOVCjZpZE4f+gcsDIcHlj2a5hTvwZEkuJJvt8bGo8FqUFgStNhkAWxd0CwE9hrBWb13wbkeZchzfDWvoIgcUH+Tw8dAZsGGKCDhbAP2/I+lGyG8BLMGpb5fveLpkXGgaVPij7ij9C09Gk8fLad8T33+vQPXsQgahss3grl3YSZgzZlrKEEm6UkwJE/vAKAT9MjbE9Et2HPuZlJ/vBTAGqgqXf9rvzhgAA/ABAH3XnIArgFglZStJhh/w3eYW8k3+d+FxHuY2/tLxHUc9p/DH/oAgZ9GyKHEtEAAL0EWA/IJoJ6i0UehK/2rfbAJ3/4JQgGpOq9RbbKTnU8flfb5v6am6b4EjRwshVQmwnYyCIL4JM3EKzbWioASwKc8od3A+iuaWbbPgXdhz2bDRwBJwNQ7t81cIAEAfIQ5DWAbAH2BtAfQB8A+u/Pm8rzP23XDg5rKdZMSr4LwAw2a4P5gDP84XMFMhOgQwCxAWokwS4h9IFgCAgkhPmC7hMwY8DGDKYGQ31UlNYC6EGgVwXyFQiIDaMe1w1pco/NoqkZSGgAkUOcb4AWEcmD7N1wE4In5t1knRHEsgFOg6CAl4Skp4AGkuAMAY7XYANyBZsb/6QXXTRwDaHjlVK3g6UGhN0gPETCTwHUCsKBzHQhEb4af7+azGbz3Aym+iNnK8g8vZnAPBmEG0HkBdTVbDb/xj02gybBX6DkZRKwCB0D4AKQ1ii0lsATbbPu6Q5VexEIlhVwbunRKk5AtwIwIbiPfbGLEBwZLRY4FQjdA6FztRomwUJbcAlm165OSorHv3I8w/MoID0EWCUkJ2BGXUrqyB9+goBvAAgZRBfbzE+BqJcQ/Vt24Fi3usxL0+TIAPLIb0mraoghkCfFtM7Q6ygCm4JDyhY4+EOXK9Bc56gH3cGDan6EyyjWCeCWgekwraoAXMnmhlsyJOonER/tLYtJMFyPUcA4y6x93pGGSav7Kq+1ApDeENzP8snlRL7nCTRKn18eZY6KXjuoMWmAFaLJMzU8lpU8CZAJyFbmbrWYPeij/1/ACT0LsroZ8Axk8GUEdaQ+mwjqAjuy+GFtzRUNnD+8GcAB+c5dx4bIPC9/yuaGmx1w/Y1nK6h5jrSz/IS7bfyjiva7GUKXxNWe+NncOCe5EQrS1BA5QJGsA9DNoQUYjRm1SzOs7k+BYqkkriCT3AtjUcfBN/R1vbPdxokIFmqbFEQ9iOhQiBykjRMCPW+TcRlmDF6n1dweA06pK9nT7Eilagg9CFL/rdWbY0yRVpfqBCH6swZTgDellU5IqsuCNE1d1lupbhtTwFn8JfR4YDGCwcIuTAdglgQ4CkReJcHRgChinGuvWvKQ29chf/hNAh0FiMVmj6EI9t+gQXADByBhjTFrA4IgOwRqmSJ50HL5akUDFwgvBeNwrQaJ+Tx7Vf0DeJjS/teERV46YJ9nSOIGilLq65Zn6ELsXtZPeXosAnAgIATIXdo7TbgqFwLwANjlgeeY6IzB73Ro6QZWHaXEfiXhLrWyKUMQrN/yKYQsY0pJgFP+8J+gD3+tRohu4g9bJuPPR8WcL02LDFUsryfU1ntsekciOPgT/VMGcElrjCkGwQ4CWiyipZhVs6WA6Z3XHaBA+BESOk1LDYAHGNbPMHN42hGetvJritVdcVcBW9ikIxGs2YBA03lK5DZHTRZ6hALsq7lBuyKFNpMKRGZB5GoNOIEW2a04LtsP/DQglgQ4oyF0vhA5ixUgpIQm20ATIHsrwvcBTEwQfps9qObH2sjIAa4Dnyzlnmf7cfpchJZS1+Ore9Voi3xTCH8BsA+AFoDmMvECxKQFXjqAhKYl/UEC3WOb0R9qa0/5w/cDdFYccLoHwAYQnCgQAUNF5ExtqQrRQtmBUzQIOcAp/AVR6qU8MgZEkyDSD5BdEJnOvvd/XwpfriTAYXJjP/KoRwn0Ja0uHYcT0iSQXkTqKxDZF8AHiuRMy1v3WtKPyVKVBZ3p9oBLnYtZW1Z2qm9qhip/+LfJTQOizSLyFgm2C0lfAp2Y8BFDSuQSy1f/OmKrByqx/glAR1g2M+MYtwvhC66qi0V5KSDa0GjxQB0XnTF0OQUiC5KbQNNEwAaB7E9ExwHoqddOwALbVFMQHPphKaInpQFOb8FA5L9Y5AICxgA4OHEW6G26hYTeEZLH2LvhD+7d1lXg8qkY/rh7D8wd+DGCkQEqKhOI6OuizX5g3/i5pc861sx8BZDH7Uj9/fr8MxpCPxTgZu1oE2iBbUZPy/a5yB9+hwQjHTdDMIl9G26iaH/t8zmRIRdNGqAPiHi9EM33xOiF6OyaFV21JlMb+NPo13xzzOmRkRbzsRB9btDBjnogek9BFrsNjOR8j7/xRCZ1EkBKiSxM+VEFiDL84QtFxz3JFZjOGs8ftgRTZ6zeQdMi45jpcIAHgdATQpsgdrPXxgtt19c7oTT9CsPf9A0hPkbTQyz/tpuW/D07oBwPo2GE/j4B/7LDbz9h1I46P5cm+YCENymiNTFv3aJSREvcyyyZxGXw7iExsKL5IKBtJ4K1O0q5Obr0rimresFj9YR34welOGe6REsXJ+8Z4LpIVHV6xxzoOnA6p+ZEjDKturyqodjxVy89EN4eOkPQC8T7AtQbSrYjZmyHKS2wvds6zHMV+60k6dnjhZsxa9jajHOpvXcm5yvDhvBuiLEb4vkQsw/ZXgpDpD0Yuwyc8jdOEaivQxx/CXqRHnivjpl3L8uJDjRERpDCr8Gc8pEU5D57dP1dONvlHE9fdbiy+ByQDBGgNyD7QWh/EG2DyDYi2u74XjrP1bRkQU5iM7FS5Q//UQhDweJsLCJax2bssnxBXvKH5kPieUX9iNAsdKt9ITNFlTkmg6mKLLDsJtAuQD5gUm8CdiPMB97taqQkG7wuA+cJhI5jofmI59HiD9Hv+cOWn7kNBP3Pyh++AcBVKYsTWMNij8fMYZHUrvavOFnBeylIToE4PljeJ5HnmpdtrabIyPT5tDP2srTSuHwOsDuvqN/RXm4xe0xh+iQE0Lse8twQ8w4uqYHSZeDigIQeBOKxvcRC1rMyTsK1Q5pSgASaBirhFwAMjfuyDsK/ZLPmulQitCHybSKZRIDOY2WqXyckJgfrpGsWs7YTcJU9qnZehtTmBpH3FHDpxCmhFwS94i5H+hHCEyZ5rk4mgwuBXexvJQHOO3XlF21lLACoT5po+hmb63+Xst4C4R8pgXaIvXE9hPdYYuMxe8Qq5xxoaDyWSOnc1SjtxCcWoIPMLwtkGYlaLgYPIqZ6gYx3S7iIrDEIl1pm3Yv5Mu/xT+4BiXMnTon0WdyfRA4R0HdcG1l/Pje1VCxK7YwrCXCO1DWE/wjg0njaQ8NHbwh3PxWzBmyF/72DCPajBDnaJUnT2Ky93pG2h8RQSyI61HSGa7E6IHy3ErrH2m/vRZjUdxeC4jHbmuos4ksB+nGyziX+PTwhbfucg1/13fUZq8rMiE9weU/TNgfFbLmXBEck8oF60zwqZux7pUiiOrqqC6BnTDWnLB9pGd4FiXCRfm+bYj7N6lb/DKKRC5TIn+Opf+erEfZ6xyF46Nq4tDk5q+XJ/Fl8CL1qs3UeZg+Lj3E//hUHEzzzCEiErZwfW1nky5hZF8qT4NwzEpcnxqr8oZsBmuA6z9ex6a1PBti7yveSAedInT8yG5D/dRF7Bw+q/RGtbXqaICekpE14CvvevzGlRqevGa3sqM4gpCw6kFzGR9Tdnn1uJRdsBCLnS1YUn4TOspve/lvSyswK/n52wAVXd1PR2J3pYLWzFdex6SlP4HzTIkOjjPkkUptQERsNwRm2wnMQJ9iqn0a2jfG4fog+1OOhpmmRbwvLw+5UCsP6ImYMfztvbG9aeLiy8TbIBTYoyGbNjKSx85kDN3Vtb8juATDUaAV1HSA6WO0IBwEP22bsvLJTlUlJUA2RqSC5JmWEEN0KkYvSQWe6ir3rM1IbKhC6AkI3puY4KX5PX8wcojPrmWoy+aFgZB8VlQ+SmWXnnBM8Ir7Y95PM+SyAS2QDnney91D7C8khEDmMQPXJ883JDghd4dYGZaUqHWICof4kNJ8knn0GoNP2Olug/3sFk4xzV1MlVOzlgCQKg+JLYqEDMav2w7wLDG7uqaItmwFx6jkTz8Ps2tXUEHqSiE5JquhOW5WWjEWPTEu1M36cQxPROxCZx+y7rRRFQsmFlvSMS0td40SQ+o1bguK/0RVsrnfqI92AGNPCpwrjrxmq0pBRuKZuWV5VGVxVp9K5scTrKcDeeFY6viFCdwOkE7lxSxd4S1oppxLZmRzc2ENFd21xb4T2Cns6AxyRPAVRd9rmXk8g2E8XDZfs2SPAoWHl/kSe11xnnSa4mWGNySgfSC7DHx6lgDfcxgmJXGg31d2bUSfiXra7Eivx76TkdDu09PGkcaICoV9C4E877bKWTXNYu5ZdvMTiXZfqjbLQgGypzwZOV2ALaA1E1zljbLxWJWGtE93Oh9RMTGb8S4ZaKd2BbKI6db5od0DJuxBn0c7j+GW7Yz/A3JHbchY8Z9NeanvrnRC4/b6drDxHIVGqrucY/tClIvhDyg0B7fYgNiY6Y/jyHEkORM5SIvempZ7Ws+mpzQa5HYmbwTHrbviUpWx1JQhXuM7zzYpwvuWpyeilKAWAe0biOhtuCr7oUdH+dwP4rqsBpBXAdCbrMcwY7pTmxVXa6n1h8emK7TkA9k/pfKKn7H33PtNx1BNPvBiV/pFxDhJdw97oHARH7kwx0L/mYEJUR21OTwYACHjWNmtPRZAyqo7bBS7Rv+BrWFkXJeOvqQx5XD3/U1hdjFlDV5Uq++0cOqVAv713dEri9GEYiBxt6x2faMaIix3WgeQZgvGqTfye7pxRwAghOoNYhrmstp0EOTunLt8BJHY/QRI9CA4jQwTcwkKrQbwLonorwtcAnOtULqd2AibyEbW3ZvuRhYDTU1Ug8mOI3JR5vvMMNuvzNqd8GgzKBjhHtTWELxKiWYCkzwlnVdQsYN0hcwjFO3mcquD0QzfzlparsrMR+nePPzKegfszQBHZJESbAN2Dh/1J4N4Eeju/zWJ9q73zuCPgEAz1oSj9lQBdKJSMuTYryEXZsdRPA1h6X3VldoG5nZW45KtUIHwlCcYKoAPJBWsbSeQFUepfbKlb3A59NlnK3zSJwN9Kd//kJ5yAf4DkLju89B/t5fk6BC61WeShRGlgXHkIForEfohZI0qiMve0xNVrRyau9WSNtNL4YopBvdMjo20blxA5dYx9of8QHQSQ9ts+IMImEaxXNu62uhfRkeows/FEhtJVaCMlfjbq7Lr2AbcD8hGBtglksQG6NWbel5sETmBNDaEQkXKH5ublNFeKkPI33Q/wGF13lN4mfBebdek0VheEZo8Bp6uxAMnIndnmxruKLtKZtLyv1+MdxEr6iaAf9B+iTUTYSGxvtHy0FsH69ztVGhBYMcgQ32EQ+0ABHwDD6OFk1EFbyaatFna/idlf0Nn19qM1jqWauS5iWmNlZck1Ht5A41EsxhcAzsgrdooHhTRaF0CvTv0cObDHJO5zXNN/xKdLA1zD8hFgM/0uZW3KuM0g0DQQVlYB6+whzQX9ms7OaW+8xD7CDcO0P1jcE1xuIuY7CLbdFx7PQNgWg4wWcGx1TrVX8o3tfbejr3W09o7ml8qPUw2he9zpFbatazB7RLrcemrj95WiRL91nCpWnhsyalLcxAZC/ZXINHd9CYu8htH19+TLz6mG8B9AEk/UJh4WeRxNy57MVwWWGjhn017Ytn2UUsYYCNeLUD8oDIZAZ+G3k0iEyHjFjlov5VwFMmXFV5VS54LIdXNEfs4z8ACySiyKwClnSEkkTgVCrRBK5tvA4CMwo97pHdNfzOoRSNpnGbmzDMoaIhMVSXaQOn9TyKQVtcrrWRb373SZX7xoSUjmi9c6vWAOrKHxWKWM40XkJAK+7NRxtvuQLlZ6lhXNg6fm5VRtiwbO8DyTkQQugER7lWMVApxYWpIEiAjajsfMwzNzbrrhsM8+ryQaIXX7VNIyzQucmto4HYp+npDQVa7oy06GWZe3cHbqykOJ1C1E9JUMwAhbILLRaevQ0hd3HfQmb1KsfmJ1G/pMAeDSVV/tIMJsTci+B6ZCgIMOXQ2Od4riTHvVkscyVJl/xZEKntfiO1hWQ+jQRGirfeCCQUVt31tCSDTqC+4E4axEe5O+cSSnQ9Zh1NVL91K+Hn4IT06pZMHHRHhZFD1NIuvAEFEYQCInCpx2sV/w6NrbMtR1lsTpnB8J7iPS96rkPjZbC0vhhH/mqtJZWCIcJMDjYnrPdkfglT8yE5BJWtLcY/NeRjM5PFwZ6RIGgrqIwRMTEqsE8qyY1qk56jIQ+Y4S/B4QHUKLlxcI7ibYf7J8w950l/mZ/sYvWMo4gz/ZPQe/OiIVxHZgaQe4QkW3n0a62pvz+QAXjw3qGxF2GQbGxoz73nJKtCet7kue2HPktDFBRzKWE5zmQO3EtitxWTm3FlbGl5RtTwDhp46aFXzMBo/EdfVrMlqSA+FHSeL3jyQYs8xj0LnRa/L0sDVEDshua/7PAk6wVCmExcmlwYDQTbw10TPuD5+rgDt1jJKAxxno7yqQzQXuxubutGX3IhJy7ioh0Et2K8YbPeVkoXRGnYQvze5PUP7wegD6/Epu3jm8ZUcgFaguZOa7zflsiRNZQ0R3QHJVJfvqUtn5rkreZy5xjnnNdIUoucPpGRe8J6LG63wVBSIPE+IN9wS6REhmQRzJ1HTmAheIHK0bItMWXaKkHav2U1H7DYAOjWtAeVFa1TfccdKcTLbIBHt03R2p86shNFUhft9XNpN5UF2qjz1bVRYCJNUp21XUSubHddIdYIu+Qh65PXmrD4guZ1ueUkq39qIvBKsZ9nmKjBddZnYOcCoQngNJqETgE2VjfDLorBpC+kaF8xKV1W0ekVFRV7FsLnCFazLdvM4AoBPuQOUDBz5JEY2D4OqEa/BsvLCGZscTkDKXBX9TpG9USNVNZgIXv/jlNQiSZXAhEG5ifcmaDSjiEwG6MFkSDyB9c1Dct0zd+OcYJsBF7saR7LRUJ4BrhjgbMOcCGvbFLi6rusrOOuDaCfWans02yzMQx0dqEWA1gXQ0fbdhmGNjltVNkTydH7jGU5RSf0/m7HTjh+NguB5KuB2OM66vLvz4w5Mx95iP9d9VILIOki5Y1ZuGt7b8PHnGZfSai5yTdGH03EIS55QAWjwBJnIvWrs26wLWLqjMz+OMi/edfXHYc7Qk8mDyTEuugQTz7Z10BnrExmRFJDIkTvkjNwPirs3viA0xw6AxsWtqlji3AQUij5AgeYGNzuMs8Rjq0phx79vZTYjZ0tchcAV68DoistjfPz/gug971mhrOlUos/ScWJ1jr1r8CIYcdmxe4CYt76u83pch+vaFlPHwQCK2mFo7kewnUONSJr/QL9hXM1PXXRoNodPEqf2UgcmzXiCPeUhdH/PW/KtQu9Z/PHD4ZF0vUtE3XPWX6drLKSuPzwvc9MjZytaXgCZKGwTLGXImDMm4ctdrqwNtwkupa4eBJWJ6T0Rw8HZc1dxddd89BaDJydttHZVKTu/DC6SMHbbIbn1ekuKfk1CyH6KwqizgDjhqFupV+Gr+2dXrMz5XiYvfoOdESr4L6Og6P8pbWqc450yutZZSlcofmQfI91KlfCIN7Nv4q5zs+lkPGap2lI4d9k00XLICj7XM+pccxjlZCDUTwEnuCIp22qGoVUR0lETcZyWA9Wx60/WWnbAqE6qgqBuUOlKZnztw5rTwcJt1kJeVYfOb0e4PLnfOmHzAxVb3V2K/7FZxbGEErq9NXfzpXrQKRLQKPTMdIZG5qc2hRbYhNMxSGKtbtCSzMiubd/piuNdF+O/se//W1CapbOAiv3OnNZhxE2bWrEzf2BO6QESXZ8ev1WCx7kK34Rm3GeTsMCfP5bk4mR0gkYX2kXV3ehY3Hs9QF7nzX4XMbKMhpC9j+y4kmS+TMEPdkhG+mrDI6+mz91dZ6BQQ7UfQd49Jb5BqA6NFSFogtNaAPB/LvjE9i84OJSWxjnx5xY7mp4y4YgcWHBdsOhDRj9PS22ba+LXrqvapKw+FJysD3pFpnG9OQ+OgTr1rcuPeYPTJqMS0e+7I+f8Z6AVe1dwd3l29TY9nPybejxhtCvZHbbHoduyIfdRe3Sbao7Mjpna09o7mlypyUsR3qkNKzIGSnHElpqn6uiI4UAWuCCaV45AqcOWIShE0VYErgknlOKQKXDmiUgRNVeCKYFI5DqkCV46oFEFTFbgimFSOQ6rAlSMqRdBUBa4IJpXjkCpw5YhKETRVgSuCSeU4pApcOaJSBE1V4IpgUjkOqQJXjqgUQVMVuCKYVI5DqsCVIypF0FQFrggmleOQKnDliEoRNFWBK4JJ5TikClw5olIETVXgimBSOQ6pAleOqBRBUxW4IphUjkOqwJUjKkXQ9H88ez1BRcqLNwAAAABJRU5ErkJggg==",DELAYED_TIMEOUT:6e4,CURRENT_DEFAULT_TEMPLATE_ADDED:1,GET_PRICE_API_URL:"/purchases/price_multiples_purchases",RELATED_TEMPLATES_JOB_API_URI:{development:"https://smart-templates.us/api/v4/related_templates_jobs",staging:"https://smart-templates.us/api/v4/related_templates_jobs",production:"https://nicev2.placeit.net/api/v4/related_templates_jobs"},IMAGE_TYPE:13,_promises:[],TIME_REMOVE_LOADER:2e3,getInstance:function getInstance(){return null===Service.MultiplePurchase._instance&&(Service.MultiplePurchase._instance=new Service.MultiplePurchase,Service.MultiplePurchase._designPlanManager=new DesignPlanManager),Service.MultiplePurchase._instance},prototype:{_processingStarted:!1,_allThumbnailsProcessed:!1,_stagesData:[],_selectedStages:[],_prices:null,_clonedThumbnails:[],getPrice:function getPrice(e){var t=this;if($.md5(JSON.stringify(t._prices))===$.md5(JSON.stringify(e)))return Promise.resolve(t._prices);var i={url:t.constructor.GET_PRICE_API_URL,type:"post",data:JSON.stringify(e),contentType:"application/json",dataType:"json"};return P.ajax(i)},setPrices:function setPrices(e){this._prices=e},getAllSelectedIds:function getAllSelectedIds(){return page.stage.merchPreviewController.getAllSelected().map(function(e){return Number(e.id)}).filter(function(e){return 0!==e})},add:function add(e,t){return!1===Boolean(t)?this._stagesData.push(e):this._stagesData.unshift(e),this},update:function update(t,i){this._stagesData=this._stagesData.map(function(e){return Number(e.id)===Number(t)&&((Boolean(i.price)||0===i.price)&&(e.price=i.price),Boolean(i.preview)&&(e.preview=i.preview),Boolean(i.designPlan)&&(e.designPlan=i.designPlan),i.processed!==undefined&&(e.processed=i.processed),i.selected!==undefined&&(e.selected=i.selected)),e})},getByIndex:function getByIndex(e){if(!(e<0||e>this.count()-1))return this._stagesData[e]},getAll:function getAll(){return this._stagesData},getIds:getSelectedIds:function getSelectedIds(){return this.getSelectedDataObjects().map(},getSelectedTotalPrice:function getSelectedTotalPrice(){var t=null;return this.getSelectedDataObjects().forEach(,t},selectAll:function selectAll(){var t=this;t.getAll().forEach(function(e){t.update(e.id,{selected:!0})})},count:function count(){return this._stagesData.length},countSelected:function countSelected(){return this.getSelectedDataObjects().length},removeAll:_fixNumberFormat:getSelectedDataObjects:function getSelectedDataObjects(){return this._stagesData.filter(function(e){return!0===e.selected})},addCurrentStage:function addCurrentStage(){var e=this,t=e._prepareCurrentStageData();e.add(t,!0),0<e.getPreviouslySelectedIdsLength()&&!1===Helpers.StageType.isVideo()&&e._updateCurrentStageData()},_prepareCurrentStageData:function _prepareCurrentStageData(){var e="image";return{selected:!0,processed:!0,canProcess:!0,preview:window.page.stage.record.previewImage||this.constructor.EMPTY_THUMBNAIL_PLACEHOLDER,type:e,id:Number(Helpers.StageType.getStageID()),price:0,name:Helpers.StageType.getStageInfo().name,category:Helpers.StageType.getCategoryName(),designPlan:JSON.stringify(Helpers.StageType.getDesignPlan())}},_updateCurrentStageData:function _updateCurrentStageData(){var t=this;Helpers.App.isMerchYggdrasilEnabled()||Helpers.StageType.getPreviewImage().then(function(e){t.update(Helpers.StageType.getStageID(),{preview:e,designPlan:JSON.stringify(Helpers.StageType.getDesignPlan())})})},areAllThumbnailsProcessed:function areAllThumbnailsProcessed(){return this.getSelectedDataObjects().length===this.constructor.CURRENT_DEFAULT_TEMPLATE_ADDED||this._allThumbnailsProcessed},isProcessingStarted:function isProcessingStarted(){return this._processingStarted},setProcessingStarted:function setProcessingStarted(){this._processingStarted=!0},clean:function clean(){this.removeAll()},allStagesDataProcessed:function allStagesDataProcessed(){var t=!0;return this._stagesData.forEach(,t},prepareData:function prepareData(e){var t=this,i=t.getPreviouslySelectedIds(),n=!1===Boolean(t.getPreviouslySelectedIdsLength())&&1<t.count()&&t.allStagesDataProcessed(),s=0===e.length&&0===t.getPreviouslySelectedIdsLength();if(!1===Helpers.App.isMerchYggdrasilEnabled()&&(s||n))return t._allThumbnailsProcessed=!0,t.dispatch("thumbnails.processed"),t;t.clean(),t.addCurrentStage();var r=0<t.getPreviouslySelectedIdsLength();return t._needsCleanStageData({_previouslySelectedIds:i,_previouslySelectedStagesExists:r,_isSinglePurchase:s,selectedIds:e})&&t.clean(),r&&(e=i),t._addSelectedStages(e),!1===Helpers.App.isMerchYggdrasilEnabled()&&t._prepareMerchPreviewProcessingPromise(e),t._updateSelectedMerchPreviewPrices(e),t},_needsCleanStageData:function _needsCleanStageData(e){var t=!1===e._previouslySelectedIds.includes(Number(Helpers.StageType.getStageID()));return e._previouslySelectedStagesExists&&t||!1===e._isSinglePurchase&&0<e.selectedIds.length&&!1===e.selectedIds.includes(Number(Helpers.StageType.getStageID()))&&!1===Helpers.App.getSubscription()},_addSelectedStages:function _addSelectedStages(t){var i=this,e=Service.Merch.getInstance();Helpers.App.isMerchYggdrasilEnabled()&&(e=Service.MerchYggdrasil.getInstance()),e.getItems().filter(function(e){return t.includes(Number(e.id))}).forEach(function(e){e.price=0,e.selected=!0,e.processed=!1,!(e.canProcess=!0)===Boolean(e.designPlan)&&(e.designPlan="{}",e.canProcess=!1),e.designPlan=JSON.stringify(e.designPlan),Boolean(e.designPlan)&&(e.designPlan=e.designPlan.replaceAll("s3.amazonaws.com/output_images/","s3-accelerate.amazonaws.com/output_images/")),e.preview=e.preview.replace("data:image/png;base64,",""),i.add(e)})},_prepareMerchPreviewProcessingPromise:function _prepareMerchPreviewProcessingPromise(e){var t=this,i=Service.Merch.getInstance(),n=Number(Helpers.StageType.getStageID());e=e.filter(function(e){return e+""!==String(n)}).map(String),t._promises=i.updateItemsTaskBuilder(e),t._promises.forEach(t._setPromise.bind(t))},_setPromise:function _setPromise(e){var t=this;e.then(function(e){e.preview=e.preview.replace(
"data:image/png;base64,",""),e.designPlan=JSON.stringify(e.designPlan),Boolean(e.designPlan)&&(e.designPlan=e.designPlan.replaceAll("s3.amazonaws.com/output_images/","s3-accelerate.amazonaws.com/output_images/")),t.update(e.id,{preview:e.preview,designPlan:e.designPlan,processed:!0}),t.dispatch("thumbnails.processing",{stage:e})})},_updateSelectedMerchPreviewPrices:function _updateSelectedMerchPreviewPrices(e){var t=this,i={stages_id:e};this.getPrice(i).then(Utils.bindFn(t)(t._getPriceHandler.bind(t,e)))},_getPriceHandler:function _getPriceHandler(t,i){var n=this;i=n.updatePremiumPriceForCurrentStage(i),n.setPrices(i);var s=0;if(Number(t[0])===Number(Helpers.StageType.getStageID())){s=1;var e=i.prices[0]/100;n.update(Helpers.StageType.getStageID(),{price:e})}var r=Service.Merch.getInstance();Helpers.App.isMerchYggdrasilEnabled()&&(r=Service.MerchYggdrasil.getInstance()),r.getItems().filter(.forEach(function(e,t){n.update(e.id,{price:i.prices[t+s]/100})}),n.dispatch("price.changed",i),n._dispatchAllThumbnailsProcessedEvent()},_dispatchAllThumbnailsProcessedEvent:function _dispatchAllThumbnailsProcessedEvent(){var e=this;!1!==Boolean(e._promises)&&Promise.all(e._promises).then(},getPreviouslySelectedIds:function getPreviouslySelectedIds(){return Helpers.App.getCookie("multiplePurchasesSelectedIds").split(",").map(.filter(},getPreviouslySelectedIdsLength:function getPreviouslySelectedIdsLength(){return this.getPreviouslySelectedIds().length},isMultiplePurchase:function isMultiplePurchase(){return!!(window.page&&window.page.stage&&window.page.stage.merchPreviewController)&&Boolean(page.stage.merchPreviewController.getAllSelected().length)},canDoMultiplePurchases:function canDoMultiplePurchases(){return Helpers.App.isMerchPreviewEnabled()&&Helpers.StageType.isLogo()&&page.stage&&page.stage.merchPreviewController&&this.isMultiplePurchase()&&0<page.stage.$body.find(".merch-preview-container").length},deleteAfterLoginCookie:function deleteAfterLoginCookie(){!1!==Boolean(Helpers.App.getCookie("multiplePurchasesSelectedIds"))&&Helpers.App.deleteCookie("multiplePurchasesSelectedIds")},_saveSelectedStagesInCookie:function _saveSelectedStagesInCookie(){var e=this;if(e.canDoMultiplePurchases()&&!0===Boolean(e.getSelectedIds())){var t=e.getSelectedIds();Helpers.App.setCookie("multiplePurchasesSelectedIds",t,1)}else Helpers.App.setCookie("multiplePurchasesSelectedIds",Helpers.StageType.getStageID(),1)},isPreviousSelectedIdEqualTocurrentId:function isPreviousSelectedIdEqualTocurrentId(){var e=this.getPreviouslySelectedIds(),t=Helpers.StageType.getCategoryName();return e.length===this.constructor.CURRENT_DEFAULT_TEMPLATE_ADDED&&"logos"===t.toLowerCase()&&Number(Helpers.StageType.getStageID())===e[0]},getCustomStageInfo:function getCustomStageInfo(e){var t=0===e.price;return{id:String(e.stageId),custom_price:e.price,image_type:this.constructor.IMAGE_TYPE,is_free:t}},getDesignPlan:function getDesignPlan(e){var t=this,i=t._getDesignPlanRequestConfig(e);return Promise.race([P.ajax(i),P.timeout(t.constructor.DELAYED_TIMEOUT)])},_getDesignPlanRequestConfig:function _getDesignPlanRequestConfig(e){var t=this,i=t.getPristineMerchPreviewStageData(e)[0].smartTemplateId,n={preset_id:null,source_ui_json:Helpers.StageType.getDesignPlan(),target_id:i};return _config={method:"POST",url:t.constructor.RELATED_TEMPLATES_JOB_API_URI[window.environment],dataType:"json",contentType:"application/json",data:JSON.stringify(n)}},getPristineMerchPreviewStageData:function getPristineMerchPreviewStageData(t){return Service.Merch.getInstance().getItems().filter(},getDesignPlanManager:function getDesignPlanManager(){return this.constructor._designPlanManager},cloneThumbnails:function cloneThumbnails(){if(!1!==Helpers.App.isMerchYggdrasilEnabled()){var t=this;t._clonedThumbnails=[];var i=$(".merch-preview-grid"),e=Service.Merch.getInstance().getItems(),n=null;e.forEach(function(e){n=i.find('[id="'+e.smartTemplateId+'"]').find(".stage_wrapper").clone(),t._clonedThumbnails[e.smartTemplateId]=n})}},replaceThumbnails:function replaceThumbnails(e){if(!1!==Helpers.App.isMerchYggdrasilEnabled()){var t=this;t.unbind("svg.loaded").bind("svg.loaded",Utils.bindFn(t)(t._SVGLoadedHandler));var i=e,n=null;for(var s in t._clonedThumbnails)if(0<(n=i.find('[id="'+s+'"]')).length){t._setClonedThumbnails(n,s);var r=n.find("image");n.attr("data-svg-counter",1),t._bindSVGLoadImageEvent({key:s,svgs:r,thumbnailsContainer:e})}}},_setClonedThumbnails:function _setClonedThumbnails(e,t){var i=this;e.addClass("loading").css("overflow","hidden").html("").html(i._clonedThumbnails[t])},_bindSVGLoadImageEvent:function _bindSVGLoadImageEvent(e){for(var t=this,i=0;i<e.svgs.length;i++){$(e.svgs[i]).on("load",function(){t.dispatch("svg.loaded",{originalDispatcher:t,key:e.key,thumbnailsContainer:e.thumbnailsContainer,totalSVGS:e.svgs.length})})}},_SVGLoadedHandler:function _SVGLoadedHandler(e){var t=e.data.thumbnailsContainer.find('[id="'+e.data.key+'"]'),i=t.attr("data-svg-counter");i++,t.attr("data-svg-counter",i),e.data.totalSVGS===i&&t.removeClass("loading")},centerThumbnailsHorizontally:function centerThumbnailsHorizontally(s){!1!==Helpers.App.isMerchYggdrasilEnabled()&&s.container.each(function(){var e=$(this).find("#video_viewport").css("width");e=Number(e.replace("px",""));var t=$(this).find("#video_viewport").css("height"),i=e/2,n=(t=Number(t.replace("px","")))/2;$(this).css("left","calc(50% - "+i+"px)"),$(this).css("top","calc(50% - "+n+"px)"),$(this).css("scale",s.scale)})},showDownloadLoader:containsPremiumAssets:updatePremiumPriceForCurrentStage:function updatePremiumPriceForCurrentStage(e){return e.prices&&0===e.prices[0]&&this.containsPremiumAssets()&&(e.prices[0]=100*ThemeSupport.currentPrice,e.total+=ThemeSupport.currentPrice),e}}}),Class("DesignPlanManager")({URI_ENDPOINT:{development:"https://smart-templates.us/api/v4/related_templates_jobs",staging:"https://smart-templates.us/api/v4/related_templates_jobs",production:"https://nicev2.placeit.net/api/v4/related_templates_jobs"},prototype:{_targetsUIJSON:null,_targets:[],_slowConnectionTimeout:null,init:function init(){},setAllTargetsUIJSON:function setAllTargetsUIJSON(e){this._targetsUIJSON=e},getAllTargetsUIJSON:function getAllTargetsUIJSON(){return this._targetsUIJSON},getTarget:function getTarget(e){return!1===Boolean(this._targets[e])?null:this._targets[e]},getTargetAtIndex:function getTargetAtIndex(e){if(e<0||e>this._targets.length)throw new Error("Invalid index");return this._targets[e]},addTarget:function addTarget(e,t){this._targets[e]=t},prepareUIJSON:function prepareUIJSON(){var e=this,t=e.getAllTargetsUIJSON(),i={UIJSONs:t,firstTargetRecordID:t.targets[0].target_id};return Promise.race([e._makeRequest(i),e._slowConnectionMessage()]).then(Utils.bindFn(e)(e._requestHandler))},_slowConnectionMessage:function _slowConnectionMessage(){var t=this;return new Promise(function(e){t._slowConnectionTimeout=setTimeout(function(){throw e(),page.flash("Oops! We're having difficulties processing your request at this time, try again later.","alert"),new Error("Slow internet connection")},6e4)})},_makeRequest:function _makeRequest(e){var t=this._preparePayload(e);return P.ajax(t)},_preparePayload:function _preparePayload(e){return{method:"POST",url:this.constructor.URI_ENDPOINT[window.environment],dataType:"json",contentType:"application/json",data:JSON.stringify({preset_id:null,source_ui_json:Helpers.StageType.getDesignPlan(),target_id:e.firstTargetRecordID})}},_requestHandler:function _requestHandler(e){var t=this,i=t.getAllTargetsUIJSON();return clearTimeout(t._slowConnectionTimeout),i.targets.forEach(Utils.bindFn(t)(t._prepareTarget)),t._updateDesignPlan(e),t},_updateDesignPlan:function _updateDesignPlan(e){var t=this;t._getAllSelectedStages().forEach(Utils.bindFn(t)(t._updateItem.bind(t,e)))},_getAllSelectedStages:function _getAllSelectedStages(){var e=Service.MultiplePurchase.getInstance(),t=JSON.parse(JSON.stringify(e.getSelectedDataObjects()));return t[0]&&Number(t[0].id)===Number(Helpers.StageType.getStageID())&&t.shift(),t},_updateItem:function _updateItem(e,t){var i=this,n=Service.MultiplePurchase.getInstance(),s=null;t&&t.smartTemplateId&&(s=i.getTarget(t.smartTemplateId)),Boolean(s)&&(s=i._updateCustomGraphicLayerData(s,e),n.update(t.id,{designPlan:JSON.stringify(s)}))},_updateCustomGraphicLayerData:function _updateCustomGraphicLayerData(e,t){if(!1!==Boolean(e.customGraphic[0]))return e.customGraphic[0].hash=t.customGraphic[0].hash,e.customGraphic[0].layers[0].image=t.customGraphic[0].layers[0].image,e},_prepareTarget:function _prepareTarget(e){var t=this,i=e.target;(!1===Boolean(e.status)||e.status&&404!==e.status)&&(i=t._copyColorToLayers(i)),i&&i.id&&t.addTarget(i.id,i)},_copyColorToLayers:function _copyColorToLayers(e){var t=Helpers.StageType.getDesignPlan(),i=t.backgroundColor&&t.backgroundColor.color;return e.customGraphic.forEach(,e.graphic.forEach(,e}}}),Module("GoogleSsoSupport")({TEXT_GOOGLE_POPUP_OPEN:"To continue, you'll need to sign in using the pop-up window.",TEXT_GOOGLE_PROCESSING:'        <div class="google-processing-container">            <span class="spinner"></span>            <p>Just a second, we\'re processing your request.</p>        </div>    ',TEXT_GOOGLE_ACCOUNT:"Your email address is associated with your Google account. Log In with Google.",TEXT_DEFAULT_GOOGLE:"Your account is connected to Google. Please sign in with Google",TEXT_GOOGLE_AUTH_SUCCESS:"All done!",GOOGLE_SIGNIN_FALLBACK_PAGE:window.sso_hostname+"/"+window._pl_ssoLanguage+"/google/authenticate?to=placeit",prototype:{_isGoogleFallbackEnabled:!0,_googleFallbackFlowFnReference:null,bindGoogleButtonClick:function bindGoogleButtonClick(){var e=Utils.bindFn(this);this._googleFallbackFlowFnReference=e(this.googleSigninWithFallbackFlow),this.bind("googleButton.click",this._googleFallbackFlowFnReference)},_dispatchMessage:function _dispatchMessage(e){var t=this._getMessageEventName();this.dispatch(t,{type:e.messageType,content:e.messageContent})},_dispatchGooglePopupOpenMessage:function _dispatchGooglePopupOpenMessage(){this._dispatchMessage({messageType:"info",messageContent:this.constructor.TEXT_GOOGLE_POPUP_OPEN})},_dispatchGoogleProcessingMessage:function _dispatchGoogleProcessingMessage(){this._dispatchMessage({messageType:"info",messageContent:this.constructor.TEXT_GOOGLE_PROCESSING})},_dispatchGoogleAccountExistsMessage:function _dispatchGoogleAccountExistsMessage(){this._dispatchMessage({messageType:"error",messageContent:this.constructor.TEXT_GOOGLE_ACCOUNT})},_dispatchGoogleAuthSuccessMessage:function _dispatchGoogleAuthSuccessMessage(){this._dispatchMessage({messageType:"success",messageContent:this.constructor.TEXT_GOOGLE_AUTH_SUCCESS})},_dispatchGoogleAuthErrorMessage:_hasGoogleSsoResponse:function _hasGoogleSsoResponse(e){return e.includes(this.constructor.TEXT_DEFAULT_GOOGLE)},_validateGoogleSignupEventTracker:function _validateGoogleSignupEventTracker(e){!1!==Service.Sso.getInstance().isValidSignup(e)&&Helpers.GlobalEventTracker.userSignup()},_sendGoogleButtonClickEventTracker:_sendGoogleSigninSuccessEventTracker:function _sendGoogleSigninSuccessEventTracker(e){var t={userData:e,source:this.source,isGoogleFallbackEnabled:this._isGoogleFallbackEnabled};Helpers.GlobalEventTracker.googleSigninSuccess(t)},_sendGoogleSigninErrorEventTracker:function _sendGoogleSigninErrorEventTracker(e){var t={error:e,source:this.source,isGoogleFallbackEnabled:this._isGoogleFallbackEnabled};Helpers.GlobalEventTracker.googleSigninError(t)},_sendGoogleStartFallbackEventTracker:_getMessageEventName:_processGoogleToken:function _processGoogleToken(e){var t=Service.Sso.getInstance(),i={token:e.token,source:this.source,isGoogleToken:!0};return t.verifyAuthenticationToken(i)},_getCleanUserData:googleSignin:_processGoogleAuthError:function _processGoogleAuthError(e){e&&(e.error&&this._sendGoogleSigninErrorEventTracker(e.error),e.message&&this._dispatchGoogleAuthErrorMessage(e.message))},_getGoogleSigninFallbackPage:function _getGoogleSigninFallbackPage(){return ExternalSsosSupport.storePageStateCookie("google",this.source),this.constructor.GOOGLE_SIGNIN_FALLBACK_PAGE},googleSigninWithFallbackFlow:function googleSigninWithFallbackFlow(){this._sendGoogleButtonClickEventTracker(),this._sendGoogleStartFallbackEventTracker(),window.location.href=this._getGoogleSigninFallbackPage()},changeGoogleSigninFlow:function changeGoogleSigninFlow(e){this.unbind("googleButton.click",this._googleFallbackFlowFnReference),this._googleFallbackFlowFnReference=e,this.bind("googleButton.click",e)}}}),Module("ExternalSsosSupport").includes(GoogleSsoSupport)({EXTERNAL_SSO_PROVIDERS:["google","facebook","apple"],STANDARD_SSO_PROVIDERS:["facebook","apple","google_one_tap"],PROVIDER_SSO_URL:{facebook:window.sso_hostname+"/"+window._pl_ssoLanguage+"/facebook/authenticate?to=placeit",apple:window.sso_hostname+"/"+window._pl_ssoLanguage+"/apple/authenticate?to=placeit"},PAGE_STATE_COOKIE_NAME:"pageState",storePageStateCookie:function storePageStateCookie(e,t){var i=Helpers.App.getUrlWithSsoProviderFallbackParam(e,t),n=this._getCurrentDomain();$.cookie("pageState",i,{domain:n,path:"/",expires:1})},removePageStateCookie:function removePageStateCookie(){var e=this._getCurrentDomain();$.removeCookie("pageState",{domain:e,path:"/"})},_getCurrentDomain:function _getCurrentDomain(){var e=location.hostname.split(".");return e.slice(0).slice(-(4===e.length?3:2)).join(".")},prototype:{initExternalSsosContainer:function initExternalSsosContainer(e){this.source=e.source;var t=new UI.ExternalSsosContainer({name:"externalSsosContainer",lineText:e.lineText,providers:this.constructor.EXTERNAL_SSO_PROVIDERS});this.appendChild(t),t.render(e.target,!0),this._bindSsosButtonsEvents()},_bindSsosButtonsEvents:function _bindSsosButtonsEvents(){var t=this;this.constructor.STANDARD_SSO_PROVIDERS.forEach(function(e){t.bind(e+"Button.click",function(){t._handleSsoProviderButtonClick(e)})}),this.bindGoogleButtonClick()},_handleSsoProviderButtonClick:function _handleSsoProviderButtonClick(e){this.constructor.storePageStateCookie(e,this.source),this._sendExternalSsoButtonClickEventTracker(e),window.location.href=this.constructor.PROVIDER_SSO_URL[e]},_sendExternalSsoButtonClickEventTracker:function _sendExternalSsoButtonClickEventTracker(e){Helpers.GlobalEventTracker.track(e+"sso:button:click",{label:this.source})}}}),Class(UI,"ExternalSsosContainer").inherits(Widget).includes(BubblingSupport)({html:'        <div class="external-ssos-container">             <div class="button-container"></div>             <div class="divider">                 <div class="line left"></div>                 <span class="text"></span>                 <div class="line right"></div>             </div>         </div>    ',buttonTemplate:'        <button type="button">             <span class="image-container"><img class="icon"></span>             <span class="text"></span>         </button>     ',prototype:{init:function init(e){Widget.prototype.init.call(this,e);var t=Utils.bindFn(this);this.buttonsContainer=this.element.find(".button-container"),this.providers.forEach(t(this._appendButton)),this._setLineText(),this._bindEvents()},_appendButton:function _appendButton(e){var t=this._getButtonName(e),i=this._createButton(e);this.buttonsContainer.append(i),this.appendChild(new UI.ButtonWidget({name:t,element:i}))},_createButton:function _createButton(e){var t=e+"-button",i="/assets/icons/"+e+"-icon.svg",n=$(this.constructor.buttonTemplate).addClass(t),s=I18nUtils.t("Continue with"),r={google:"/assets/icons/google-icon.svg",facebook:"/assets/icons/ic-social-media-facebook-plain.svg",apple:"/assets/icons/ic-apple-plain.svg"};return Helpers.App.isGuestCheckoutExperimentActive()&&(s="",i=r[e]),n.find(".text").text(s+" "+Helpers.App.capitalizeFirstLetter(e)),n.find("img").attr("src",i),n},_getButtonName:_setLineText:function _setLineText(){this.element.find(".divider .text").html(this.lineText)},_forEachProviderButton:function(n){var s=this;this.providers.forEach(function(e){var t=s._getButtonName(e),i=s[t];n(i,e)})},_bindEvents:function _bindEvents(){var i=this;this._forEachProviderButton(function(e,t){e.bind("click",function(){i.dispatch(t+"Button.click")})})},enableButtons:function enableButtons(){this._forEachProviderButton(function(e){e.enable()})},disableButtons:function disableButtons(){this._forEachProviderButton(function(e){e.disable()})}}}),Class("ApiAuthenticationSupport")({handleApiLoginSuccess:function handleApiLoginSuccess(){window.opener&&window.opener.postMessage({status:"success"},window.opener.location.href)}}),Class(UI,"SsoLoginModal").inherits(Widget).includes(RequiredFieldsPopovers,Translator,ExternalSsosSupport)({html:'<div id="sso_login_modal"><div class="header hidden" id="confirm_placeit_password_header"><h4><%= t("Confirm your Placeit account!") %></h4><p class="text-center"><%= t(\'Please enter <span class="warning">your Placeit password </span> to update your account and allow you to login with your Envato username from now on\') %></p></div><div class="header" id="envato_account_header" hidden><h4><%= t("Envato account found!") %></h4><p class="text-center"><%= t(\'Please enter <span class="warning">your Envato password (not Placeit)</span> for the user below so we can migrate your Placeit account to be accessible via your Envato information\') %></p></div><div class="header" id="updating_account_header" hidden><h4><%= t("Updating Your Account") %></h4><p class="text-center" style="font-size: 14px; font-family: \'SourceSansPro-Light\'; "><%= t("We\'ve changed our Terms & Conditions and our Privacy Policy.") %> <%= t("We\'re also upgrading your account so you login with your Placeit account into Envato properties.") %> <%= t("Please click the checkboxes below and click Accept to continue.") %></p></div><div class="header hidden" id="login_continue_header"><h4><%= t("Please Log In to Continue") %></h4></div><div class="content"><form id="login_form"><div class="fields_container"><div class="floating-label-input email" id="email_field_container"><input autocomplete="off" class="form-control" id="login_user_email" required="required" size="30" type="text" /><label class="placeholder"><%= t("Email or Envato username!") %></label></div><div class="floating-label-input password" id="password_field_container"><input autocomplete="off" class="form-control" id="login_user_password" required="required" type="password" /><label class="placeholder"><%= t("Password") %></label><div id="password_secret_eye" class="secret-eye eye-on"></div></div><div class="floating-label-input email hidden" id="associated_email_field_container"><input autocomplete="off" class="form-control" id="associated_email" size="30" type="text" readonly/><label class="placeholder"><%= t("Email on Placeit") %></label></div><div class="floating-label-input password hidden" id="placeit_password_field_container"><input autocomplete="off" class="form-control" id="user_placeit_password" type="password" /><label class="placeholder"><%= t("Placeit Password") %></label><div id="placeit_password_secret_eye" class="secret-eye eye-on"></div></div><div class="floating-label-input tfa hidden" id="tfa-container"><input autocomplete="off" class="form-control" id="two_factor_code" name="two_factor_code" size="30" type="password" disabled /><label class="placeholder"><%= t("TFA Code") %></label></div><div class="floating-label-input hidden" id="signin_verification-container"><input autocomplete="off" class="form-control" id="signin_verification" name="signin_verification" size="30" type="password"/><label class="placeholder"><%= t("Verification code (check your email!)") %></label></div><div class="row"><div id="recaptcha_container" class="g-recaptcha col-xs-12" hidden></div></div><div id="privacy_policy_container" class="" hidden><p class="help-block text-left"><input type="checkbox" id="privacy_policy_alert"></input><span class="agree" style="cursor: pointer"><%= t(\'I agree to the <a href="https://envato.com/privacy/" target="_blank" role="button">Privacy Policy</a>\') %></span><br/><input type="checkbox" id="terms_conditions_alert"></input><span class="terms_condition" style="cursor: pointer"><%= t(\'I agree to the <a href="https://blog.placeit.net/terms-of-use/" target="_blank" role="button">Terms & Conditions</a>\') %></span> </p></div><div id="migrate_account_hide"><div class="form-group text-right password-reset"><p class="help-block info-text"><a class="forgot" href="/password_resets/new" target="_blank"><%= t("Forgot your password?") %></a></p></div><div class="row" id="login_btn_container"><div class="col-xs-12"><button class="button primary" name="commit" type="submit" value="Log in"><%= t("Log In") %></button></div></div><div class="row"><div class="col-xs-12"><p class="help-block text-center"><%= t(\'Don&apos;t have an account? <a href="#" class="trigger_signup_link" role="button">Sign up</a>\') %></p></div></div></div><div id="continue_btn" class="row" hidden><br/><div class="col-xs-12"><button class="button primary" name="commit" type="submit" value="Accept"><%= t("Accept") %></button></div></div><div id="logged_in_notice" class="hidden"><div class="col-xs-12"><input id="logged_in_ok" class="button primary" name="commit" type="submit" value="Login as " /></div></div><div class="envato-notice text-center"><span class="placeit-envato-logo-black"></span></div></div></form></div></div>',TEXT_LOGIN_FAIL:I18nUtils.t("Failed to Login"),TEXT_ENABLE_ADMIN_MFA:I18nUtils.t("Admin users must have MFA enabled, please enable MFA for authentication and try again"),TEXT_INVALID_PLACEIT_CREDENTIALS:I18nUtils.t("Invalid password, please make sure you're entering your Placeit password"),TEXT_AUTOLOGIN_CTA:I18nUtils.t("Login as")+" {{username}}",TEXT_MIGRATE_ENVATO_ACCOUNT_SUCCESS:I18nUtils.t("Your account has been migrated! You can login using your Envato password in the future"),TEXT_LOGIN_ERROR:I18nUtils.t("We could not complete the login request. Please try again later"),TEXT_INVALID_CREDENTIALS:I18nUtils.t("Invalid email or password. You can also use the email address from your Envato account to login!"),TEXT_ENVATO_PASSWORD:I18nUtils.t("Envato Account Password"),TEXT_INVALID_TFA:I18nUtils.t("TFA Code invalid, please check it and try again"),TEXT_VERIFICATION_REQUIRED:I18nUtils.t("This seems an unusual login attempt. We have sent you a verification code by email. Please copy it and paste it in the Verification code field below."),TEXT_WRONG_PASSWORD:I18nUtils.t("Wrong password! Make sure you're entering <strong>your Envato password</strong>, not your Placeit password")+' <a href="https://account.envato.com/reset_password" target="_blank">'+I18nUtils.t("You can reset your Envato password here.")+"</a>",EXTERNAL_SSO_LINE_TEXT:I18nUtils.t("OR Log in with Envato"),LOGIN_URL:"/login",VERIFY_SIGNIN_TOKEN_URL:"/sso/verify_signin_token",MIGRATE_USER_URL:"/sso/migrate_user",prototype:{isAutoSignin:!1,init:function init(e){if(Widget.prototype.init.call(this,e),this.userEmailInput=this.element.find("#login_user_email"),this.userEmailContainer=this.element.find("#email_field_container"),this.userPasswordContainer=this.element.find("#password_field_container"),this.userPasswordInput=this.element.find("#login_user_password"),this.userPasswordLabel=this.element.find("#password_field_container label"),this.associatedEmailContainer=this.element.find("#associated_email_field_container"),this.associatedEmailInput=this.element.find("#associated_email"),this.userPlaceitPasswordContainer=this.element.find("#placeit_password_field_container"),this.userPlaceitPasswordInput=this.element.find("#user_placeit_password"),this.twoFactorCodeContainer=this.element.find("#tfa-container"),this.twoFactorCodeInput=this.element.find("#two_factor_code"),this.signinVerificationContainer=this.element.find("#signin_verification-container"),this.signinVerificationInput=this.element.find("#signin_verification"),this.closeBtn=this.element.find("button.close"),this.loginHeader=this.element.find("#login_header"),this.envatoAccountHeader=this.element.find("#envato_account_header"),this.updatingAccountHeader=this.element.find("#updating_account_header"),this.confirmPlaceitPasswordHeader=this.element.find("#confirm_placeit_password_header"),this.fieldsContainer=this.element.find(".fields_container"),this.form=this.element.find("#login_form"),this.signupLink=this.element.find(".trigger_signup_link"),this.envatoLogo=this.element.find(".envato-hover"),this.envatoPages=this.element.find(".envato-pages"),this.secretEye=this.element.find("#password_secret_eye"),this.placeitPasswordSecretEye=this.element.find("#placeit_password_secret_eye"),this.loginMessage=this.element.find("#login_message"),this.agree=this.element.find(".agree"),this.terms=this.element.find(".terms_condition"),this.migrateAccountHide=this.element.find("#migrate_account_hide"),this.privacyPolicyContainer=this.element.find("#privacy_policy_container"),this.privacyPolicyInput=this.element.find("#privacy_policy_alert"),this.termsConditionsInput=this.element.find("#terms_conditions_alert"),this.recaptchaContainer=this.element.find("#recaptcha_container"),this.hasRecaptcha=!1,this.loginBtn=this.element.find("#login_btn_container button"),this.continueBtn=this.element.find("#continue_btn"),this.continueSubmitBtn=this.element.find("#continue_btn button"),this.loggedInOkBtn=this.element.find("#logged_in_ok"),this.emailFieldContainer=this.element.find("#email_field_container"),this.passwordFieldContainer=this.element.find("#password_field_container"),this.migrationSectionContainer=this.element.find("#migrate_account_hide"),this.usernameField=this.element.find("#username"),this.loggedInNotice=this.element.find("#logged_in_notice"),this.envatoAccountFound=!1,this.recapchaRetry=null,this.recaptchaRendered=!1,this.recaptchaId=null,this._timeouts=[],this._contentForm=this.element.find(".content"),this.$continueHeader=this.element.find("#login_continue_header"),this.appendChild(new this.userFormClass({name:"userForm",element:this.form})),this._setPopovers({$requiredFields:this.userEmailInput.add(this.userPasswordInput).add(this.twoFactorCodeInput).add(this.signinVerificationInput),$recaptcha:this.recaptchaContainer,$submitButton:this.loginBtn}),this._bindEvents(),"undefined"==typeof envatoSso)throw"SSO: Cannot instantiate sso-js client";this.userEmailInput.attr("value",this.userEmailInput.val()),this.userPasswordInput.attr("value",this.userEmailInput.val()),this._saveInitialState(),this.initExternalSsosContainer({lineText:this.constructor.EXTERNAL_SSO_LINE_TEXT,target:this._contentForm,source:"login"})},login:_checkAutoSignIn:function _checkAutoSignIn(){var i=this;this.dispatch("login.autosignin"),i._autoSignin(function(e,t){e?(console.log(e.message),i.loginMessage.removeClass("hidden"),i.migrationSectionContainer.removeClass("hidden"),i.loggedInNotice.addClass("hidden"),Helpers.GlobalEventTracker.ssoTrack("login.fullModalOpened",{error:!1,user:i.userEmailInput?i.userEmailInput.val().trim():"",message:"login modal full opened, not auto sign-in. ",response:e})):(i.isAutoSignin=!0,i._verifyToken(t,"autosignin",i._handleVerifyTokenResponse.bind(i)))})},_autoSignin:function _autoSignin(i){var n=this,e={to:"placeit"},t=function t(e){console.log("Auto-login successful"),i(null,e.token)},s=r=function r(e,t){i({message:"Auto Login Error: "+e}),n.die("_autoSignin",e,t)},a=function a(e){"Unauthorized"===e.type?s():r(e.message,e)};envatoSso.autoSignIn(e).then(t)["catch"](a)},_verifyToken:function _verifyToken(e,i,n){var s=this,t={token:e};"migrate"===i&&(t.is_migration=!0),""!=this.userPlaceitPasswordInput.val()&&(t.placeit_password=this.userPlaceitPasswordInput.val());var r={url:UI.SsoLoginModal.VERIFY_SIGNIN_TOKEN_URL,type:"post",data:t,beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},dataType:"json"},a=Helpers.RequestConfig.prepareConfig(r);$.ajax(a).then(this._cleanUserProperty).then(function(e){if("migrate"===i){var t="sso.migrationSuccess";Helpers.GlobalEventTracker.ssoTrack(t,{error:!1,user:s.userEmailInput?s.userEmailInput.val().trim():"",response:e,message:"Migration finished and verified."})}if("signin"===i&&s.envatoAccountFound){t="ssoAccountFound.migrationSuccess";Helpers.GlobalEventTracker.ssoTrack(t,{error:!1,user:s.userEmailInput?s.userEmailInput.val().trim():"",response:e,message:"Migration finished and verified."})}return"signInVerification"===i&&Helpers.GlobalEventTracker.ssoTrack("sso.signInVerificationSuccess",{error:!1,user:s.userEmailInput?s.userEmailInput.val().trim():"",response:e,message:"Sign in verification success"}),"autosignin"===i&&Helpers.GlobalEventTracker.ssoServerTrack("autoLogin.success",{error:!1,user:s.userEmailInput?s.userEmailInput.val().trim():"",message:"Auto Sign-in verification success",response:e}),n(null,e),e}).fail(function(e){"autosignin"===i&&Helpers.GlobalEventTracker.ssoTrack("autoLogin.error",{error:!1,user:s.userEmailInput?s.userEmailInput.val().trim():"",response:e,message:"Auto Sign-in verification success"}),n(e)})},_cleanUserProperty:function _cleanUserProperty(e){if(e.data&&e.data.user){var t=e.data.user,i={id:t.id,envato_id:t.envato_id,envato_uuid:t.envato_uuid,username:t.username,placeitPromotionNotifications:t.placeitPromotionNotifications,productUpdateNotifications:t.productUpdateNotifications,status:t.status,coupon:t.coupon,country:t.country,is_migration_to_placeit:t.is_migration_to_placeit,email:t.email,feedbackRequestNotifications:t.feedbackRequestNotifications,downloadEmailNotifications:t.downloadEmailNotifications,unsubscribe_code:t.unsubscribe_code,tracker_id:t.tracker_id,is_admin:t.is_admin,authenticated_by:t.authenticated_by,social_media:t.social_media};e.data.user=i}return e},_handleVerifyTokenResponse:function _handleVerifyTokenResponse(e,t){var i;if(this.loginBtn.prop("disabled",!1),this.loginBtn.removeClass("loading"),e){if(403===e.status)return void this._handleUnusualActivityError(e);this.showErrors([this.constructor.TEXT_LOGIN_FAIL]),this.die("_handleVerifyTokenResponse",e.responseText)}if(t.needs_mfa)return console.log("Admin needs MFA enabled"),void this.showErrors([this.constructor.TEXT_ENABLE_ADMIN_MFA]);if(t.requires_placeit_credentials)return console.log("Account confirmation required"),t.invalid_placeit_credentials?(Helpers.GlobalEventTracker.ssoTrack("placeitAccountFound.submittedWithError",{error:!0,user:this.associatedEmailInput?this.associatedEmailInput.val():"",message:"Invalid password, please make sure you're entering your Placeit password",response:t}),this.showErrors([this.constructor.TEXT_INVALID_PLACEIT_CREDENTIALS])):this.dispatch("login.message",null),this.loginHeader.addClass("hidden"),this.confirmPlaceitPasswordHeader.removeClass("hidden"),this.userEmailContainer.addClass("hidden"),this.userEmailInput.removeAttr("required"),this.associatedEmailContainer.removeClass("hidden"),this.userPasswordContainer.addClass("hidden"),this.userPasswordInput.removeAttr("required"),this.userPlaceitPasswordContainer.removeClass("hidden"),this._toggleTFAField(!1),this.signinVerificationContainer.addClass("hidden"),this.recaptchaContainer.addClass("hidden"),this.userPlaceitPasswordInput.attr("required",""),this.associatedEmailInput.val(t.associated_account),this.userPlaceitPasswordInput.focus(),this.isAutoSignin=!1,this.element.unbind("submit"),this.element.bind("submit",this._submitForm.bind(this)),
this.hideSsosContainer(),void Helpers.GlobalEventTracker.ssoTrack("placeitAccountFound.modalOpened",{error:!1,user:this.associatedEmailInput?this.associatedEmailInput.val():"",message:"Confirm placeit account modal opened.",response:t});var n=t.data.user.authenticated_by;if(console.log("Login successful"),this.userForm.loginSuccess(this.form[0],t.data.user),this.isAutoSignin)Helpers.GlobalEventTracker.ssoTrack("autoLogin.modalOpened",{error:!1,user:this.userEmailInput?this.userEmailInput.val().trim():"",message:"Auto sign-in modal opened",label:n}),i=(i=this.constructor.TEXT_AUTOLOGIN_CTA).replace("{{username}}",t.data.user.username),this.loggedInOkBtn.val(i),this.loginMessage.addClass("hidden"),this.emailFieldContainer.addClass("hidden"),this.passwordFieldContainer.addClass("hidden"),this.migrationSectionContainer.addClass("hidden"),this._toggleTFAField(!1),this.loggedInNotice.removeClass("hidden"),this.dispatch("login.autosignin.enabled");else{var s="email"===this.loginMode?"login.submittedWithEmail":"login.submittedWithUsername";Helpers.GlobalEventTracker.ssoTrack(s,{error:!1,user:this.userEmailInput?this.userEmailInput.val().trim():"",message:"Log-in successfully submitted.",response:t,label:n}),this.deactivate()}if(!Helpers.App.getTrackerId()){var r=t.data.user.tracker_id;Helpers.App.setTrackerId(r),window.placeitTrackerId=Helpers.App.getTrackerId()}this.envatoAccountFound&&page.flash(this.constructor.TEXT_MIGRATE_ENVATO_ACCOUNT_SUCCESS,"success")},_handleLoggedInOk:_submitForm:function _submitForm(e){e.preventDefault();var t=this;if(t.hasRecaptcha&&("undefined"==typeof grecaptcha||null===this.recaptchaId||!grecaptcha.getResponse(this.recaptchaId)))return Helpers.GlobalEventTracker.ssoTrack("login.submittedWithError",{error:!0,user:t.userEmailInput?t.userEmailInput.val().trim():"",message:"Please click the reCAPTCHA checkbox"}),void t.recaptchaContainer.popover("show");var i=this.userEmailInput.val().trim(),n=$(this.userPasswordInput).val(),s=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;this.loginBtn.prop("disabled",!0),this.loginBtn.addClass("loading"),i.match(s)?(this.loginMode="email",this._localSignin(i,n,this._handleLocalSigninResponse.bind(this))):(this.loginMode="username",this._ssoSignin(i,this._handleSsoSigninResponse.bind(this)))},_handleLocalSigninResponse:function _handleLocalSigninResponse(e,t){if(this.loginBtn.prop("disabled",!1),this.loginBtn.removeClass("loading"),e&&(this.showErrors([this.constructor.TEXT_LOGIN_ERROR]),this.die("_handleLocalSigninResponse",e)),t.redirect_signin_request_so_sso)this._ssoSignin(t.sso_username,this._handleSsoSigninResponse.bind(this));else if(t.invalid_credentials){Helpers.GlobalEventTracker.ssoTrack("login.invalidCreds",{user:this.userEmailInput?this.userEmailInput.val().trim():"",error:!0,message:"Invalid email or password. You can also use the email address from your Envato account to login!"});var i=[this.constructor.TEXT_INVALID_CREDENTIALS];this.showErrors(i)}else if(t.too_many_attempts){i=[t.error];this.showErrors(i)}else t.requires_sso_credentials?($(this.userEmailInput).val(t.sso_username),$(this.userPasswordInput).val(""),$(this.userPasswordInput).focus(),$(this.userEmailInput).attr("readonly",""),$(this.userEmailInput).addClass("readonly"),this.hideSsosContainer(),this._updateHeader("envato_account_header"),this.dispatch("login.message",null),this.userPasswordLabel.html(this.constructor.TEXT_ENVATO_PASSWORD),this.envatoAccountFound=!0,Helpers.GlobalEventTracker.ssoTrack("ssoAccountFound.modalOpened",{error:!1,user:this.userEmailInput?this.userEmailInput.val().trim():"",response:t,message:"Envato account found, modal opened."})):t.requires_sso_signup?(this.dispatch("login.message",null),this._createSsoAccount()):t.authenticated&&(console.log("Login successful"),this.userForm.loginSuccess(this.form[0],t.user),this.deactivate())},_updateHeader:function _updateHeader(e){var t=e;this.element.find(".header").attr("hidden",""),$("#"+t).removeAttr("hidden")},_createSsoAccount:function _createSsoAccount(){var t=this;Helpers.GlobalEventTracker.ssoTrack("ssoUpdatingAccount.modalOpened",{error:!1,user:t.userEmailInput?t.userEmailInput.val().trim():"",message:"Updating your account modal opened."}),this.migrateAccountHide.attr("hidden",""),this.privacyPolicyContainer.removeAttr("hidden"),this.privacyPolicyInput.attr("required",""),this.termsConditionsInput.attr("required",""),this.userEmailInput.attr("readonly",""),this.userEmailInput.addClass("readonly"),this.userPasswordInput.attr("readonly",""),this.userPasswordInput.addClass("readonly"),this.continueBtn.removeAttr("hidden"),this.userEmailContainer.attr("hidden",""),this.userPasswordContainer.attr("hidden",""),this.updatingAccountHeader.removeAttr("hidden"),this.loginHeader.attr("hidden",""),this.hideSsosContainer(),this.element.unbind("submit"),this.element.bind("submit",function(e){e.preventDefault(),t.migrateUser(),t.continueSubmitBtn.prop("disabled",!0),t.continueSubmitBtn.addClass("loading")})},migrateUser:function migrateUser(n){var s=this,r=$(this.userEmailInput).val(),e=$(this.userPasswordInput).val(),t=0<this.element.find(":checkbox:checked").length,a={username:n||r.split("@")[0].replace(/\./g,"_").replace(/\+/g,"_"),email:r,password:e,first_name:"First Name",last_name:"Last Name",privacy_policy:t,suppress_confirmation_email:!0},i=function i(e){s._verifyToken(e.token,"migrate",s._handleVerifyTokenResponse.bind(s)),s.continueSubmitBtn.prop("disabled",!0),s.continueSubmitBtn.removeClass("loading")},o=function o(e,t){s.continueSubmitBtn.prop("disabled",!1),s.continueSubmitBtn.removeClass("loading");var i=s.envatoAccountFound?"ssoAccountFound.migrationError":"sso.migrationError";Helpers.GlobalEventTracker.ssoTrack(i,{error:!0,user:n,email:r,response:a,message:"Migration finished with error. SSO Error on migrate_user"}),s.die("migrateUser "+a.username,e,t)},l=this.envatoAccountFound?"ssoAccountFound.migrationStarted":"sso.migrationStarted";Helpers.GlobalEventTracker.ssoTrack(l,{error:!1,user:n,email:r,message:"Migration started. Getting account ready"});var c={url:UI.SsoLoginModal.MIGRATE_USER_URL,type:"POST",data:a,dataType:"json",beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))}},u=Helpers.RequestConfig.prepareConfig(c);$.ajax(u).done(function(e){i(e)}).fail(function(e){o(e.responseText)})},_localSignin:function _localSignin(e,t,i){var n={url:UI.SsoLoginModal.LOGIN_URL,type:"POST",data:{email:e,password:t},dataType:"json",beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))}},s=Helpers.RequestConfig.prepareConfig(n);$.ajax(s).done(function(e){i(null,e)}).fail(},_renderRecaptcha:function _renderRecaptcha(){var e=this,t=function t(){e._hidePopover()};if(this.recaptchaContainer.removeAttr("hidden"),this.element.find(".g-recaptcha").attr("data-sitekey",this.recaptchaKey),null===this.recaptchaId)if("undefined"!=typeof grecaptcha&&grecaptcha.render&&!this.recaptchaRendered){this.recaptchaId=grecaptcha.render(this.recaptchaContainer[0],{callback:t}),this.recaptchaRendered=!0;var i=setInterval(function(){var e=$('iframe[title="recaptcha challenge"]');0!==e.length&&(clearInterval(i),e.parent().parent().addClass("recaptcha-container"))},1e3)}else clearTimeout(this.recapchaRetry),this.recapchaRetry=setTimeout(this._renderRecaptcha.bind(this),333);else this.recaptchaRendered=!0},_ssoSignin:function _ssoSignin(n,t){this.loginBtn.prop("disabled",!0),this.loginBtn.addClass("loading");var s=this,e=$(this.userPasswordInput).val(),i=$(this.twoFactorCodeInput).val(),r={username:n,password:e,to:"placeit",languageCode:window._pl_ssoLanguage};i&&(r.authenticationCode=i),this.hasRecaptcha&&(r.recaptchaVersion="2",r.recaptchaResponse=grecaptcha.getResponse(this.recaptchaId),r.recaptchaSiteKey=s.recaptchaKey);var a=function a(e){i&&Helpers.GlobalEventTracker.ssoTrack("login.submittedTFASuccess",{error:!1,user:s.userEmailInput?s.userEmailInput.val().trim():"",message:"Login with TFA code success"}),t(null,e.token)},o=l=function l(e,t){if(s.showErrors([s.constructor.TEXT_LOGIN_ERROR]),s.loginBtn.prop("disabled",!1),s.loginBtn.removeClass("loading"),s.envatoAccountFound){var i=s.envatoAccountFound?"ssoAccountFound.migrationError":"sso.migrationError";Helpers.GlobalEventTracker.ssoTrack(i,{error:!0,user:s.userEmailInput?s.userEmailInput.val().trim():"",message:"Envato account migration error. "+e})}s.die("_ssoSignin "+n,e,t)},c=function c(){s.dispatch("login.message",null),s._renderRecaptcha(),s.hasRecaptcha=!0,s.loginBtn.prop("disabled",!1),s.loginBtn.removeClass("loading")},u=function u(){s.dispatch("login.message",{type:"error",content:"Captcha invalid, try again"}),t("Captcha Invalid")},d=function d(){!0!==s.twoFactorRequired?(s.twoFactorRequired=!0,Helpers.GlobalEventTracker.ssoTrack("login.tfaShowed",{error:!1,user:s.userEmailInput?s.userEmailInput.val().trim():"",message:"TFA shown"}),s._toggleTFAField(!0),s.twoFactorCodeInput.attr("required","required"),s.loginBtn.prop("disabled",!1),s.loginBtn.removeClass("loading")):h()},h=function h(){Helpers.GlobalEventTracker.ssoTrack("login.submittedTFAError",{error:!0,user:s.userEmailInput?s.userEmailInput.val().trim():"",message:"TFA Code Invalid "+n}),s.showErrors([s.constructor.TEXT_INVALID_TFA]),s.loginBtn.prop("disabled",!1),s.loginBtn.removeClass("loading")},p=function p(t){s.showErrors([s.constructor.TEXT_VERIFICATION_REQUIRED]),s.signinVerificationContainer.removeClass("hidden"),s.signinVerificationInput.attr("required",!0),s.loginBtn.prop("disabled",!1),s.loginBtn.removeClass("loading"),Helpers.GlobalEventTracker.ssoTrack("sso.signInVerificationRequested",{error:!1,user:s.userEmailInput?s.userEmailInput.val().trim():"",message:"SSO server requested signin verification"}),s.element.unbind("submit"),s.element.bind("submit",function(e){e.preventDefault(),s._ssoSigninWithVerification(t,s._handleSsoSigninWithVerification.bind(s)),s.continueSubmitBtn.prop("disabled",!0),s.continueSubmitBtn.addClass("loading")})},f=g=function g(e){!0===e.twoFactor&&d(),!0===e.captcha&&m(),e.errorMessage&&o(e.errorMessage)},m=function m(){!0===s.hasRecaptcha?u():c(),null!==s.recaptchaId&&grecaptcha.reset(s.recaptchaId)},v=function v(e){var t=e.context;switch(e.type){case"SignInFailure":g(t);break;case"VerificationRequired":p(t.token);break;case"PasswordResetRequired":f();break;case"ClientError":o(t.errorMessage);break;default:l(e.message,e)}};if(this.envatoAccountFound){var _=this.envatoAccountFound?"ssoAccountFound.migrationStarted":"sso.migrationStarted";Helpers.GlobalEventTracker.ssoTrack(_,{error:!1,user:s.userEmailInput?s.userEmailInput.val().trim():"",message:"Envato account migration started: "+n})}envatoSso.signIn(r).then(a)["catch"](v)},_toggleTFAField:function _toggleTFAField(e){this.twoFactorCodeContainer.toggleClass("hidden",!e),this.twoFactorCodeInput.attr("disabled",!e)},_handleSsoSigninResponse:function _handleSsoSigninResponse(e,t){if(e){if(console.log("Error at ssoSignin: "+JSON.stringify(e)),e.loginFailed&&this.envatoAccountFound)Helpers.GlobalEventTracker.ssoTrack("ssoAccountFound.submittedWithError",{error:!0,user:this.userEmailInput?this.userEmailInput.val().trim():"",response:e,message:"Wrong password!"}),this.showErrors([this.constructor.TEXT_WRONG_PASSWORD]);else if(e.loginFailed){var i="envato";!0===this._hasGoogleSsoResponse(e.content)?(this._dispatchGoogleAccountExistsMessage("login.message"),i="google"):this.showErrors([this.constructor.TEXT_INVALID_CREDENTIALS]),Helpers.GlobalEventTracker.ssoTrack("login.invalidCreds",{user:this.userEmailInput?this.userEmailInput.val().trim():"",error:!0,message:"Invalid email or password. You can also use the email address from your Envato account to login!",label:i})}else e.twoFactorInvalid?this.showErrors([this.constructor.TEXT_INVALID_TFA]):e.forcedPasswordResetRequired&&(Helpers.GlobalEventTracker.ssoTrack("login.forcedPasswordResetRequired",{error:!0,user:loginForm.userEmailInput?loginForm.userEmailInput.val().trim():"",message:"Forced Password Reset Required"}),this.dispatch("accountUnusualActivity"));return this.loginBtn.prop("disabled",!1),void this.loginBtn.removeClass("loading")}this._verifyToken(t,"signin",this._handleVerifyTokenResponse.bind(this))},_ssoSigninWithVerification:function _ssoSigninWithVerification(e,i){var t=this,n={passcode:this.signinVerificationInput.val(),verificationToken:e,to:"placeit",languageCode:window._pl_ssoLanguage},s=r=function r(e){var t=e.context;"ValidationError"===e.type?i({failure:!0,message:t.errorMessage}):i({error:!0,message:e.message})};this.loginBtn.prop("disabled",!0),this.loginBtn.addClass("loading"),Helpers.GlobalEventTracker.ssoTrack("sso.signInVerificationStarted",{error:!1,user:t.userEmailInput?t.userEmailInput.val().trim():"",message:"Sign in verification started"}),envatoSso.verifySignIn(n).then(s)["catch"](r)},_handleSsoSigninWithVerification:function _handleSsoSigninWithVerification(e,t){var i=this,n=!1;if(e)return e.failure?(i.showErrors([e.message]),i.loginBtn.prop("disabled",!1),i.loginBtn.removeClass("loading")):e.error&&(i.showErrors([i.constructor.TEXT_LOGIN_ERROR]),i.loginBtn.prop("disabled",!1),i.loginBtn.removeClass("loading"),n=!0),Helpers.GlobalEventTracker.ssoTrack("sso.signInVerificationError",{error:!0,user:i.userEmailInput?i.userEmailInput.val().trim():"",message:"Sign in verification error"}),void(""!==n&&i.die("ssoSigninWithVerification",e.message,e));this._verifyToken(t,"signInVerification",this._handleVerifyTokenResponse.bind(this))},_bindEvents:function _bindEvents(){return this.element.bind("submit",this._submitForm.bind(this)),this.signupLink.bind("click",function(e){e.preventDefault(),this.dispatch("signup.show")}.bind(this)),this.envatoLogo.bind("mouseenter",function(){this.envatoLogo.removeClass("envato-logo-gray").addClass("envato-logo"),this.envatoPages.show()}.bind(this)),this.envatoLogo.bind("mouseleave",function(){this.envatoLogo.removeClass("envato-logo").addClass("envato-logo-gray"),this.envatoPages.hide()}.bind(this)),this.secretEye.bind("click",function(){this.secretEye.hasClass("eye-on")?(this.secretEye.removeClass("eye-on").addClass("eye-off"),this.userPasswordInput.attr("type","text")):(this.secretEye.removeClass("eye-off").addClass("eye-on"),this.userPasswordInput.attr("type","password"))}.bind(this)),this.placeitPasswordSecretEye.bind("click",function(){this.placeitPasswordSecretEye.hasClass("eye-on")?(this.placeitPasswordSecretEye.removeClass("eye-on").addClass("eye-off"),this.userPlaceitPasswordInput.attr("type","text")):(this.placeitPasswordSecretEye.removeClass("eye-off").addClass("eye-on"),this.userPlaceitPasswordInput.attr("type","password"))}.bind(this)),this.agree.on("click",function(){var e=this.element.find("#privacy_policy_alert");setTimeout(function(){e.prop("checked",!e.is(":checked"))},0)}.bind(this)),this.terms.on("click",function(){var e=this.element.find("#terms_conditions_alert");setTimeout(0)}.bind(this)),this.loggedInOkBtn.bind("click",this._handleLoggedInOk.bind(this)),this.userEmailInput.bind("keyup blur",function(){this.setAttribute("value",this.value)}),this.userPasswordInput.bind("keyup blur",function(){this.setAttribute("value",this.value)}),this},_cancel:_saveInitialState:function _saveInitialState(){var e=i=this;this.initialState=e({},this),Object.keys(i).forEach(function(t){i[t]instanceof jQuery&&(i.initialState[t+"_hiddenCls"]=i[t].hasClass("hidden"),["hidden","readonly","required"].forEach(function(e){i.initialState[t+"_"+e+"Attr"]=i[t].attr(e)}))})},_reset:function _reset(){var e=["recaptchaId"],n=this;Object.keys(n.initialState).forEach(function(i){n[i]instanceof jQuery?(n.initialState[i+"_hiddenCls"]?n[i].addClass("hidden"):n[i].removeClass("hiddenCls"),["hidden","readonly","required"].forEach(function(e){var t=n.initialState[i+"_"+e+"Attr"];typeof t!=typeof undefined&&!1!==t?n[i].attr(e,e):n[i].removeAttr(e)})):e.includes(i)||(n[i]=n.initialState[i])}),this._toggleTFAField(!1),$(this.userEmailInput).val(""),$(this.userPasswordInput).val(""),$(this.twoFactorCodeInput).val(""),$(this.privacyPolicyInput).prop("checked",!1),$(this.termsConditionsInput).prop("checked",!1),this.element.unbind("submit"),this.element.bind("submit",this._submitForm.bind(this))},destroy:function destroy(){this.userForm=null,this.fieldsContainer=null,this.userEmailInput=null,this.haveAnAccountLink=null,this._timeouts.forEach(function(e){clearTimeout(e)}),Widget.prototype.destroy.call(this)},activate:function activate(){return Widget.prototype.activate.call(this),this._timeouts.push(setTimeout(function(){this.userEmailInput.val().trim().length<1?this.userEmailInput.focus():this.userPasswordInput.focus()}.bind(this),300)),this.dispatch("login.message",null),this},deactivate:function deactivate(){return Widget.prototype.deactivate.call(this),this.isAutoSignin&&Helpers.GlobalEventTracker.ssoTrack("autoLogin.modalClosed",{user:this.userEmailInput?this.userEmailInput.val().trim():"",error:!1,message:"Auto sign-in modal closed"}),clearTimeout(this.recapchaRetry),this._reset(),this.dispatch("login.deactivate"),this},showErrors:function(e){var t=Object.keys(e)[0],i=e[t];return Array.isArray(i)&&(i=t+" "+e[t][0]),this.dispatch("login.message",{type:"error",content:i}),this},showMessages:function(e){return this.dispatch("login.message",{type:"success",content:e}),this},die:function die(e,t,i){var n=t||(i?JSON.stringify(i):"");throw new Error("SSO Error on SsoLoginModal: "+e+": "+n)},showContinueHeader:function showContinueHeader(){this.$continueHeader.removeClass("hidden")},hideContinueHeader:function hideContinueHeader(){this.$continueHeader.addClass("hidden")},setEmail:function setEmail(e){$(this.userEmailInput).val(e),this.userEmailInput.attr("value",e)},_handleUnusualActivityError:function _handleUnusualActivityError(e){this.dispatch("accountUnusualActivity"),Helpers.App.ssoLogout(),!0===e.responseJSON.recently_flagged&&Helpers.GlobalEventTracker.ssoTrack("login.unusualActivity",{error:!0,user:this.userEmailInput?this.userEmailInput.val().trim():"",envato_id:e.responseJSON.envato_id})},hideSsosContainer:function hideSsosContainer(){this.externalSsosContainer.hide()},googleLogin:function googleLogin(){var e=Utils.bindFn(this),t=this;t.disableModal(),t._sendGoogleButtonClickEventTracker(),t._dispatchGooglePopupOpenMessage(),t.googleSignin().then(function(e){return t._dispatchGoogleProcessingMessage(),t._processGoogleToken(e)}).then(e(t._getCleanUserData)).then(e(t._handleGoogleLoginSuccess))["catch"](e(t._handleGoogleLoginError))["finally"](e(t.enableModal))},disableSubmit:function disableSubmit(){this.loginBtn.prop("disabled",!0)},enableSubmit:function enableSubmit(){this.loginBtn.prop("disabled",!1)},enableModal:function enableModal(){this.dispatch("ssoModal.enableModal")},disableModal:function disableModal(){this.dispatch("ssoModal.disableModal")},deactivateModal:function deactivateModal(){this.dispatch("ssoModal.deactivate")},hideModalMessage:function hideModalMessage(){this.dispatch("ssoModal.hideMessage")},loginSuccess:function loginSuccess(e){this.userForm.loginSuccess(this.form[0],e)},_updateTrackerId:function _updateTrackerId(e){Helpers.App.getTrackerId()&&(Helpers.App.setTrackerId(e),window.placeitTrackerId=Helpers.App.getTrackerId())},_handleGoogleLoginSuccess:function _handleGoogleLoginSuccess(e){this.loginSuccess(e),this._dispatchGoogleAuthSuccessMessage(),this._sendGoogleSigninSuccessEventTracker(e),this._validateGoogleSignupEventTracker(e),this._updateTrackerId(e.tracker_id),this.deactivateModal()},_handleGoogleLoginError:function _handleGoogleLoginError(e){this.hideModalMessage(),this._processGoogleAuthError(e)},enableGooglePopup:function enableGooglePopup(){var e=Utils.bindFn(this);this._isGoogleFallbackEnabled=!1,this.changeGoogleSigninFlow(e(this.googleLogin))},enableSsosButtons:function enableSsosButtons(){this.externalSsosContainer.enableButtons()},disableSsosButtons:function disableSsosButtons(){this.externalSsosContainer.disableButtons()}}}),Class(UI,"SsoSignupModal").inherits(Widget).includes(RequiredFieldsPopovers,Translator,ExternalSsosSupport)({html:'<div id="sso_signup_modal"><div class="container-freebies-notification"><div id="freebies-notification"></div></div><div class="header hidden" id="signup_continue_header"><h4><%= t("Please Sign Up to Continue") %></h4></div><div class="content"><form id="signup_form" class="sign-up-form"><div class="fields_container"><div class="floating-label-input email"><input autocomplete="off" class="form-control" id="signup_user_email" required="required" size="30" type="text" /><label class="placeholder"><%= t("Email") %></label></div><div id="email_exists_warning" class="help-block text-left warning hidden"><%= t("This email address is already in use.") %> <a class="trigger_login_link" href="#"><%= t("Log in") %></a></div><div id="email_error_warning" class="help-block text-left warning hidden"></div><div class="floating-label-input password"><input autocomplete="off" class="form-control" id="signup_user_password" required="required" type="password" /><label class="placeholder"><%= t("Password") %></label><div class="secret-eye eye-on"></div></div><div id="bad_password_warning" class="help-block text-left"><%= t("Try using at least 7 characters, one number and one symbol") %></div><div class=""><p class="help-block checkboxes text-left"><span id="promotion-notifications" style="cursor: pointer;"> <input type="checkbox"> <span class="promotion-notifications"><%= t("Receive exclusive offers, freebies, and inspiration right to your inbox.") %></span></input></span></p></div><div class="" id="signup_btn_container"><button id="submit_button" class="button primary" name="commit" type="submit" value="Sign Up"><%= t("Sign Up") %></button></div><div class=""><p class="help-block text-center new-policy"><%= t(\'Envato collects and uses personal data in accordance with our <a class="strong block-link" target="_blank" href="https://envato.com/privacy/">Privacy Policy</a>. By creating an account, you agree to our <a class="strong block-link" target="_blank" href="https://placeit.net/terms-of-use">Terms and Conditions</a>.\') %></p><p class="help-block text-center"><%= t(\'Already have an account? <a href="#" class="trigger_login_link" role="button">Log in</a>\') %></p></div><div class="envato-notice text-center"><span class="placeit-envato-logo-black"></span></div></div></form></div></div>',TEXT_GIFT_CREATE_ACCOUNT:I18nUtils.t("Please create an account to apply the free download"),TEXT_PASSWORD_CONTEXTUAL_HELP:I18nUtils.t("Try using at least 7 characters, one number and one symbol"),TEXT_VALIDATE_SIGNUP_ERROR:I18nUtils.t("We could not complete your request. Please try again later"),TEXT_CREATE_ACCOUNT_SUCCESS:I18nUtils.t("Your account was created!"),TEXT_CREATE_ACCOUNT_ERROR:I18nUtils.t("We're sorry, we could not create your account. Please try again later"),TEXT_VERIFY_TOKEN_SUCCESS:I18nUtils.t("All done!"),TEXT_VERIFY_TOKEN_ERROR:I18nUtils.t("Your account was created but we could not log you in. Please try again later"),TEXT_PASSWORD_STRENGTH_GOOD:I18nUtils.t("Good Password!"),TEXT_PASSWORD_STRENGTH_WEAK:I18nUtils.t("Try a longer password with numbers and symbols!"),EXTERNAL_SSO_LINE_TEXT:I18nUtils.t("OR Create an Account"),HTML_FREEBIES_NOTIFICATION_B:I18nUtils.t("Get <span>&nbsp; 5 FREEBIES &nbsp;</span> downloads with your sign up!")+" \ud83c\udf89",HTML_FREEBIES_NOTIFICATION_CD:"<ul><li>"+I18nUtils.t("Unlock <span>&nbsp; 5 FREEBIES &nbsp;</span> with your free account")+"</li><li>"+I18nUtils.t("A one-stop-shop for all your branding needs")+"</li><li>"+I18nUtils.t("Get commercial usage rights")+"</li></ul>",ERROR_KEYS_TRANSLATIONS:{password:I18nUtils.t("Password")},USERNAME_TAKEN_ERROR_MESSAGES:["has already been taken","is reserved because it used to belong to another user.","ya est\xe1 en uso","est\xe1 reservado porque sol\xeda pertenecer a otro usuario.","j\xe1 foi tomado","est\xe1 reservado porque costumava pertencer a outro usu\xe1rio."],VERIFY_SIGNIN_TOKEN_URL:"/sso/verify_signin_token",VALIDATE_SIGNUP_URL:"/sso/validate_signup",prototype:{$optinNewsletter:null,CONTINENT_CODE:"EU",placeitPromotionNotifications:!1,isAutoSignin:!1,init:function init(e){Widget.prototype.init.call(this,e);if(this.userEmailInput=this.element.find("#signup_user_email"),this.userPasswordInput=this.element.find("#signup_user_password"),this.alert=this.element.find("#error_box"),this.messages=this.element.find("#message_box"),this.form=this.element.find("#signup_form"),this.haveAnAccountLink=this.element.find(".trigger_login_link"),this.envatoLogo=this.element.find(".envato-hover"),this.envatoPages=this.element.find(".envato-pages"),this.secretEye=this.element.find(".secret-eye"),this.$optinNewsletter=this.element.find("#promotion-notifications"),this.titleElement=this.element.find("#title"),this.subtitleElement=this.element.find("#subtitle"),this.emailExistsWarning=this.element.find("#email_exists_warning"),this.badPasswordWarning=this.element.find("#bad_password_warning"),this.submitButton=this.element.find("#submit_button"),this.recapchaRetry=null,this.preventEscapeClose=!1,this._timeouts=[],this.$continueHeader=this.element.find("#signup_continue_header"),this.$emailErrorWarning=this.element.find("#email_error_warning"),this._contentForm=this.element.find(".content"),this.freebieNotification(),this.title&&this.titleElement.html(this.title),this.subtitle&&this.subtitleElement.html(this.subtitle),this.appendChild(new this.userFormClass({name:"userForm",element:this.form})),this._setPopovers({$requiredFields:this.element.find("input").filter("[required]"),$submitButton:this.submitButton}),this._bindEvents(),this.userEmailInput.attr("value",this.userEmailInput.val()),this.userPasswordInput.attr("value",this.userEmailInput.val()),window.placeitGift){var t=this;setTimeout(500)}this.initExternalSsosContainer({lineText:this.constructor.EXTERNAL_SSO_LINE_TEXT,target:this._contentForm,source:"signup"})},activate:function activate(){return Widget.prototype.activate.call(this),this.userPasswordInput.val(""),this.getGeoLocation(),this.badPasswordWarning.text(this.constructor.TEXT_PASSWORD_CONTEXTUAL_HELP).removeClass("success warning"),this.userPasswordInput.removeClass("warning"),this._timeouts.push(setTimeout(function(){this.userEmailInput.focus()}.bind(this),300)),this.dispatch("signup.message",null),this},_submitForm:function _submitForm(e){var t=this;e.preventDefault();this.userEmailInput.val().trim();this.submitButton.prop("disabled",!0),this.submitButton.addClass("loading"),this._hideEmailExistsWarning(),this._checkEmailAvailability(t._handleValidateSignupResponse.bind(this))},_handleValidateSignupResponse:function _handleValidateSignupResponse(e,t){if(e)return this.submitButton.prop("disabled",!1),this.submitButton.removeClass("loading"),this.showErrors([this.constructor.TEXT_VALIDATE_SIGNUP_ERROR]),void this.die("_handleValidateSignupResponse",e.responseText);if(t.email_exists){if(Helpers.GlobalEventTracker.ssoTrack("signUp.submittedWithError",{error:!0,email:this.userEmailInput?this.userEmailInput.val().trim():"",message:"Email already taken, please use another one or Log in",label:t.authenticated_by}),this.submitButton.prop("disabled",!1),this.submitButton.removeClass("loading"),"google"!==t.authenticated_by)return void this._showEmailExistsWarning();this._dispatchGoogleAccountExistsMessage("signup.message")}else t.create_sso_account&&(this.alert.hide(),this._createSsoAccount())},usernameRetries:10,_createSsoAccount:function _createSsoAccount(n){var s=this,r=this.userEmailInput.val().trim(),e=this.userPasswordInput.val(),a={username:n||r.split("@")[0].replace(/\./g,"_").replace(/\+/g,"_"),email:r,password:e,firstName:"First_name",lastName:"Last_name",privacyPolicy:!0,suppress_confirmation_email:!0,languageCode:window._pl_ssoLanguage},t=function t(e){Helpers.GlobalEventTracker.ssoTrack("signUp.envatoCreationSuccess",{error:!1,user:n,email:r,message:"Envato account creation success",response:e,label:"envato"}),s._verifyToken(e.token,s._handleVerifyTokenResponse.bind(s))},o=function o(e){if(s._isUsernameTakenError(e)&&s.usernameRetries){var t=s._randomizeUsername(a.username);return s.usernameRetries--,void s._createSsoAccount(t)}var i=[];for(key in e)e[key].forEach(function(e){var t=s.constructor.ERROR_KEYS_TRANSLATIONS[key]||key;i.push(t+" "+e)});Helpers.GlobalEventTracker.ssoTrack("signUp.submittedWithError",{error:!0,user:n,email:r,message:"Email already taken",response:i,label:"envato"}),s.showErrors(i),s.submitButton.prop("disabled",!1),s.submitButton.removeClass("loading")},l=function l(e,t){console.log("Could not Create account: "+e),Helpers.GlobalEventTracker.ssoTrack("signUp.envatoCreationError",{error:!0,user:n,email:r,message:"Envato account creation error",label:"envato"});var i=[s.constructor.TEXT_CREATE_ACCOUNT_ERROR];s.showErrors(i),s.submitButton.prop("disabled",!1),s.submitButton.removeClass("loading"),s.die("_createSsoAccount",e,t)},i=function i(e){var t=e.context;"ValidationError"===e.type?o(t.errors):l(t.errorMessage,e)};Helpers.GlobalEventTracker.ssoTrack("signUp.envatoCreationStarted",{error:!1,user:n,email:r,message:"Envato account: "+n+" creation started",label:"envato"}),envatoSso.signUp(a).then(t)["catch"](i)},_isUsernameTakenError:function _isUsernameTakenError(t){return!1!==Boolean(t.username)&&this.constructor.USERNAME_TAKEN_ERROR_MESSAGES.some(},_randomizeUsername:function _randomizeUsername(e){return e+Math.round(9*Math.random())},_verifyToken:function _verifyToken(e,t){var i=this,n={url:UI.SsoSignupModal.VERIFY_SIGNIN_TOKEN_URL,type:"post",data:{token:e,is_signup:!0},beforeSend:function(e){e.setRequestHeader("X-CSRF-Token",$('meta[name="csrf-token"]').attr("content"))},dataType:"json"},s=Helpers.RequestConfig.prepareConfig(n);$.ajax(s).done(.fail(function(e){t({message:i.constructor.TEXT_VERIFY_TOKEN_ERROR,error:e.responseText},null)})},_handleVerifyTokenResponse:function _handleVerifyTokenResponse(e,t){if(e){console.log("Failed to verify sso token");var i=["Error: "+e.message];return this.showErrors(i),void this.die("_verifyToken",e.error,e)}if(console.log("Login successful"),this.userForm.loginSuccess(this.form[0],t.data.user),this.postSignUpUpdate(),this.showMessages(this.constructor.TEXT_VERIFY_TOKEN_SUCCESS),!Helpers.App.getTrackerId()){var n=t.data.user.tracker_id;Helpers.App.setTrackerId(n),window.placeitTrackerId=Helpers.App.getTrackerId()}this._timeouts.push(setTimeout(function(){this.dispatch("login.success")}.bind(this),750))},_validatePassword:function _validatePassword(){var i=this;if(this._checkEmptyPasswordInput())this._resetPasswordStyles();else{var e=function e(){i.badPasswordWarning.html(i.constructor.TEXT_PASSWORD_STRENGTH_GOOD).removeClass("warning").addClass("success"),i.userPasswordInput.removeClass("warning")},t=function t(){i.badPasswordWarning.html(i.constructor.TEXT_PASSWORD_STRENGTH_WEAK).removeClass("success").addClass("warning"),i.userPasswordInput.addClass("warning")},n=function n(e,t){i.badPasswordWarning.addClass("hidden"),i.die("_validatePassword",e,t)},s=function s(e){"ValidationError"===e.type?t():n(e.message,e)},r={username:"",password:i.userPasswordInput.val(),languageCode:window._pl_ssoLanguage};envatoSso.validatePassword(r).then(e)["catch"](s)}},_delayedFieldCheck:function _delayedFieldCheck(){this.timer=setTimeout(this._validatePassword.bind(this),750)},_resetFieldCheck:_checkEmptyPasswordInput:function _checkEmpty(){if(!this.userPasswordInput.val().length)return!0},_resetPasswordStyles:function _resetPasswordStyles(){var e=this;e.badPasswordWarning.html(e.constructor.TEXT_PASSWORD_CONTEXTUAL_HELP).removeClass("success").removeClass("warning"),e.userPasswordInput.removeClass("warning"),e.userPasswordInput.removeClass("success")},_bindEvents:function _bindEvents(){return this.element.bind("submit",this._submitForm.bind(this)),this.haveAnAccountLink.on("click",bind(this)),this.envatoLogo.bind("mouseenter",function(){this.envatoLogo.removeClass("envato-logo-gray").addClass("envato-logo"),this.envatoPages.show()}.bind(this)),this.envatoLogo.bind("mouseleave",bind(this)),this.secretEye.bind("click",function(){this.secretEye.hasClass("eye-on")?(this.secretEye.removeClass("eye-on").addClass("eye-off"),this.userPasswordInput.attr("type","text")):(this.secretEye.removeClass("eye-off").addClass("eye-on"),this.userPasswordInput.attr("type","password"))}.bind(this)),this.userPasswordInput.bind("keyup",this._delayedFieldCheck.bind(this)),this.userPasswordInput.bind("blur",this._delayedFieldCheck.bind(this)),this.userPasswordInput.bind("keydown",this._resetFieldCheck.bind(this)),this.userEmailInput.bind("keyup",function(e){e.target.setAttribute("value",e.target.value),this._hideEmailExistsWarning()}.bind(this)),this.userEmailInput.bind("blur",function(e){e.target.setAttribute("value",e.target.value),this.dispatch("signup.emailAvailable",!0),this._validateEmailField()}.bind(this)),this.userPasswordInput.bind("keyup blur",,this.$optinNewsletter.bind("click",function(){this.toggleOptinNewsletter()}.bind(this)),this},deactivate:function deactivate(){return Widget.prototype.deactivate.call(this),this._hidePopover(),clearTimeout(this.recapchaRetry),this.dispatch("signup.deactivate"),this},destroy:function destroy(){this.userForm=null,this.fieldsContainer=null,this.userEmailInput=null,this.haveAnAccountLink=null,this._timeouts.forEach(function(e){clearTimeout(e)}),Widget.prototype.destroy.call(this)},showErrors:function showErrors(e){var t=Object.keys(e)[0],i=e[t];return Array.isArray(i)&&(i=t+" "+e[t][0]),-1!==i.indexOf("email")?(this.userEmailInput.addClass("warning"),this.$emailErrorWarning.text(i).removeClass("hidden")):this.dispatch("signup.message",{type:"error",content:i}),this},showMessages:function(e){return this.dispatch("signup.message",{type:"success",content:e}),this},die:function die(e,t,i){var n=t||(i?JSON.stringify(i):"");throw new Error("SSO Error on SsoSignupModal: "+e+": "+n)},toggleOptinNewsletter:setPromotionNotifications:function setPromotionNotifications(e){var t=this.element.find("#promotion-notifications input");this.placeitPromotionNotifications=e,t.prop("checked",e)},getPromotionNotifications:function getPromotionNotifications(){return this.placeitPromotionNotifications},getGeoLocation:function getGeoLocation(){window.isEuropeanIp?this.setPromotionNotifications(!1):this.setPromotionNotifications(!0)},postSignUpUpdate:function postSignUpUpdate(){var e={placeit_promotion_notifications:this.placeitPromotionNotifications,download_email_notifications:!0,product_update_notifications:!0,feedback_request_notifications:!0};Helpers.App.updateEmailNotifications(e)},showContinueHeader:function showContinueHeader(){this.$continueHeader.removeClass("hidden")},hideContinueHeader:function hideContinueHeader(){this.$continueHeader.addClass("hidden")},_showEmailExistsWarning:function _showEmailExistsWarning(){this.emailExistsWarning.removeClass("hidden")},_hideEmailExistsWarning:function _hideEmailExistsWarning(){this.emailExistsWarning.addClass("hidden")},_validateEmailField:function _validateEmailField(){if(this.userEmailInput.val().trim().length<1)return this._hideEmailExistsWarning(),void this.dispatch("ssoModal.hideMessage");this._checkEmailAvailability(this._validateEmailFieldHandler.bind(this))},_validateEmailFieldHandler:function _validateEmailFieldHandler(e,t){if(!e&&t.email_exists){if("google"!==t.authenticated_by)return void this._showEmailExistsWarning();this._dispatchGoogleAccountExistsMessage("signup.message")}else this._hideEmailExistsWarning()},_checkEmailAvailability:function _checkEmailAvailability(t){var i=this,n=this.userEmailInput.val().trim();Helpers.GlobalEventTracker.ssoTrack("signup.emailValidationStarted",{error:!1,user:n,message:"Email validation started: "+n});var e={url:UI.SsoSignupModal.VALIDATE_SIGNUP_URL,type:"POST",data:{email:n},dataType:"json",beforeSend:,s=Helpers.RequestConfig.prepareConfig(e);i.hideModalMessage(),$.ajax(s).done(function(e){e.email_exists?i.dispatch("signup.emailAvailable",n):(Helpers.GlobalEventTracker.ssoTrack("signup.emailValidationSuccess",{error:!1,user:n,message:"Email validation success",response:e}),i.dispatch("signup.emailAvailable",!0)),t&&t(null,e)}).fail(function(e){Helpers.GlobalEventTracker.ssoTrack("signup.emailValidationError",{error:!0,user:n,message:"Email validation error",response:e}),i.dispatch("signup.emailAvailable",!0),t&&t(e)})},enableAutoSignin:hideSsosContainer:function hideSsosContainer(){this.externalSsosContainer.hide()},googleSignup:function googleSignup(){var e=Utils.bindFn(this),t=this;t.disableModal(),t._sendGoogleButtonClickEventTracker(),t._dispatchGooglePopupOpenMessage(),t.googleSignin().then(.then(e(t._getCleanUserData)).then(e(t._handleGoogleSignupSuccess))["catch"](e(t._handleGoogleSignupError))["finally"](e(t.enableModal))},disableSubmit:function disableSubmit(){this.submitButton.prop("disabled",!0)},enableSubmit:function enableSubmit(){this.submitButton.prop("disabled",!1)},enableModal:function enableModal(){this.dispatch("ssoModal.enableModal")},disableModal:function disableModal(){this.dispatch("ssoModal.disableModal")},deactivateModal:function deactivateModal(){this.dispatch("ssoModal.deactivate")},hideModalMessage:function hideModalMessage(){this.dispatch("ssoModal.hideMessage")},signupSuccess:function signupSuccess(e){this.userForm.loginSuccess(this.form[0],e)},_updateTrackerId:function _updateTrackerId(e){Helpers.App.setTrackerId(e),window.placeitTrackerId=Helpers.App.getTrackerId()},_handleGoogleSignupSuccess:function _handleGoogleSignupSuccess(e){this.signupSuccess(e),this._dispatchGoogleAuthSuccessMessage(),this._sendGoogleSigninSuccessEventTracker(e),this._validateGoogleSignupEventTracker(e),this._updateTrackerId(e.tracker_id),this._processPostSignupUpdate(e),this.deactivateModal()},_handleGoogleSignupError:_processPostSignupUpdate:function _processPostSignupUpdate(e){var t=this.getPromotionNotifications();Service.Sso.getInstance().validatePostSignupUpdate(e,t)},enableGooglePopup:function enableGooglePopup(){var e=Utils.bindFn(this);this._isGoogleFallbackEnabled=!1,this.changeGoogleSigninFlow(e(this.googleSignup))},enableSsosButtons:function enableSsosButtons(){this.externalSsosContainer.enableButtons()},disableSsosButtons:function disableSsosButtons(){this.externalSsosContainer.disableButtons()},freebieNotification:function e(){var t=this.element.find(".container-freebies-notification"),e=this.element.find("#freebies-notification");window.userFreeDownloads!==undefined&&window.userFreeDownloads.active&&("b"==window.userFreeDownloads.exp_value?(t.addClass("var-b"),e.html(UI.SsoSignupModal.HTML_FREEBIES_NOTIFICATION_B)):"c"!==window.userFreeDownloads.exp_value&&"d"!==window.userFreeDownloads.exp_value||(t.addClass("var-cd"),e.html(UI.SsoSignupModal.HTML_FREEBIES_NOTIFICATION_CD)))}}}),Class(UI,"SsoSignupGuestCheckoutModal").inherits(UI.SsoSignupModal)({html:'<div id="sso_signup_modal" class="guest-checkout"><div class="container-freebies-notification"><div id="freebies-notification"></div></div><div class="header" id="signup_continue_header"><h4><%= t("Please Sign Up to Continue") %></h4><div class="sub-header">Continue with SSO</div></div><div class="content"><form id="signup_form" class="sign-up-form"><div class="fields_container"><div class="floating-label-input email"><input autocomplete="off" class="form-control" id="signup_user_email" required="required" size="30" type="text" /><label class="placeholder"><%= t("Email") %></label></div><div id="email_exists_warning" class="help-block text-left warning hidden"><%= t("This email address is already in use.") %> <a class="trigger_login_link" href="#"><%= t("Log in") %></a></div><div id="email_error_warning" class="help-block text-left warning hidden"></div><div class="floating-label-input password"><input autocomplete="off" class="form-control" id="signup_user_password" required="required" type="password" /><label class="placeholder"><%= t("Password") %></label><div class="secret-eye eye-on"></div></div><div id="bad_password_warning" class="help-block text-left"><%= t("Try using at least 7 characters, one number and one symbol") %></div><div class=""><p class="help-block checkboxes text-left"><span id="promotion-notifications" style="cursor: pointer;"> <input type="checkbox"> <span class="promotion-notifications"><%= t("Receive exclusive offers, freebies, and inspiration right to your inbox.") %></span></input></span></p></div><div class="" id="signup_btn_container"><button id="submit_button" class="button primary" name="commit" type="submit" value="Sign Up"><%= t("Sign Up") %></button></div><hr /><div class="sub-header guest-checkout-subheader">Don\u2019t want to register?</div><div class="guest-checkout-back-btn-container guest-checkout-sso-modal"><button class="guest-checkout-back-btn">Continue as a guest</button></div><div class="envato-notice text-center"><span class="placeit-envato-logo-black"></span></div></div></form></div></div>',prototype:{init:function init(e){UI.SsoSignupModal.prototype.init.call(this,e)},hideContinueHeader:function hideContinueHeader(){}}}),Class(UI,"SsoLoginGuestCheckoutModal").inherits(UI.SsoLoginModal)({html:'<div id="sso_login_modal" class="guest-checkout"><div class="header hidden" id="confirm_placeit_password_header"><h4><%= t("Confirm your Placeit account!") %></h4><p class="text-center"><%= t(\'Please enter <span class="warning">your Placeit password </span> to update your account and allow you to login with your Envato username from now on\') %></p></div><div class="header" id="envato_account_header" hidden><h4><%= t("Envato account found!") %></h4><p class="text-center"><%= t(\'Please enter <span class="warning">your Envato password (not Placeit)</span> for the user below so we can migrate your Placeit account to be accessible via your Envato information\') %></p></div><div class="header" id="updating_account_header" hidden><h4><%= t("Updating Your Account") %></h4><p class="text-center" style="font-size: 14px; font-family: \'SourceSansPro-Light\'; "><%= t("We\'ve changed our Terms & Conditions and our Privacy Policy.") %> <%= t("We\'re also upgrading your account so you login with your Placeit account into Envato properties.") %> <%= t("Please click the checkboxes below and click Accept to continue.") %></p></div><div class="header" id="login_continue_header"><h4><%= t("Please Log In to Continue") %></h4><div class="sub-header">Continue with SSO</div></div><div class="content"><form id="login_form"><div class="fields_container"><div class="floating-label-input email" id="email_field_container"><input autocomplete="off" class="form-control" id="login_user_email" required="required" size="30" type="text" /><label class="placeholder"><%= t("Email or Envato username!") %></label></div><div class="floating-label-input password" id="password_field_container"><input autocomplete="off" class="form-control" id="login_user_password" required="required" type="password" /><label class="placeholder"><%= t("Password") %></label><div id="password_secret_eye" class="secret-eye eye-on"></div></div><div class="floating-label-input email hidden" id="associated_email_field_container"><input autocomplete="off" class="form-control" id="associated_email" size="30" type="text" readonly/><label class="placeholder"><%= t("Email on Placeit") %></label></div><div class="floating-label-input password hidden" id="placeit_password_field_container"><input autocomplete="off" class="form-control" id="user_placeit_password" type="password" /><label class="placeholder"><%= t("Placeit Password") %></label><div id="placeit_password_secret_eye" class="secret-eye eye-on"></div></div><div class="floating-label-input tfa hidden" id="tfa-container"><input autocomplete="off" class="form-control" id="two_factor_code" name="two_factor_code" size="30" type="password" disabled /><label class="placeholder"><%= t("TFA Code") %></label></div><div class="floating-label-input hidden" id="signin_verification-container"><input autocomplete="off" class="form-control" id="signin_verification" name="signin_verification" size="30" type="password"/><label class="placeholder"><%= t("Verification code (check your email!)") %></label></div><div class="row"><div id="recaptcha_container" class="g-recaptcha col-xs-12" hidden></div></div><div id="privacy_policy_container" class="" hidden><p class="help-block text-left"><input type="checkbox" id="privacy_policy_alert"></input><span class="agree" style="cursor: pointer"><%= t(\'I agree to the <a href="https://envato.com/privacy/" target="_blank" role="button">Privacy Policy</a>\') %></span><br/><input type="checkbox" id="terms_conditions_alert"></input><span class="terms_condition" style="cursor: pointer"><%= t(\'I agree to the <a href="https://blog.placeit.net/terms-of-use/" target="_blank" role="button">Terms & Conditions</a>\') %></span> </p></div><div id="migrate_account_hide"><div class="form-group text-right password-reset"><p class="help-block info-text"><a class="forgot" href="/password_resets/new" target="_blank"><%= t("Forgot your password?") %></a></p></div><div class="row" id="login_btn_container"><div class="col-xs-12"><button class="button primary" name="commit" type="submit" value="Log in"><%= t("Log In") %></button></div></div><div class="row"><div class="col-xs-12"><p class="help-block help-guest-checkout text-center"><%= t(\'Don&apos;t have an account? <a href="#" class="trigger_signup_link" role="button">Sign up</a>\') %></p></div></div></div><div id="continue_btn" class="row" hidden><br/><div class="col-xs-12"><button class="button primary" name="commit" type="submit" value="Accept"><%= t("Accept") %></button></div></div><div id="logged_in_notice" class="hidden"><div class="col-xs-12"><input id="logged_in_ok" class="button primary" name="commit" type="submit" value="Login as " /></div></div><div class="envato-notice text-center"><span class="placeit-envato-logo-black"></span></div></div></form></div></div>',prototype:{init:hideContinueHeader:}),Class(UI,"TabbedModal").inherits(Widget).includes(Translator)({elementClass:"tabbed-modal-widget",html:'        <div class="modal modal-tab-panel fade" id="{{id}}" tabindex="-1" role="dialog" aria-labelledby="{{id-label}}" aria-hidden="true">            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>            <div class="modal-dialog">                <div class="modal-content">                    <ul class="nav nav-tabs btn-group"></ul>                    <div class="tab-content"></div>                </div>                <p class="help-block text-center new-policy hide new-policy-guest-checkout">                    <%= t(\'Envato collects and uses personal data in accordance with our <a class="strong" target="_blank" href="https://envato.com/privacy/">Privacy Policy</a>. By creating an account, you agree to our <a class="strong" target="_blank" href="https://placeit.net/terms-of-use">Terms and Conditions</a>.\') %>                </p>            </div>        </div>    ',prototype:{_tabs:null,dialog:null,_tabList:null,tabContent:null,_paneList:[],closeDisabled:null,_timeouts:null,$close:null,_activatedBy:null,fade:!0,init:function init(e){Widget.prototype.init.call(this,e),this.name?(this.el=this.element[0],this.modal=$(this.el),this.closeDisabled=!1,this._timeouts=[],this.dialog=this.el.querySelector(".modal-dialog"),this._tabList=this.el.querySelector(".nav-tabs"),this.tabContent=this.el.querySelector(".tab-content"),this.$close=this.element.find(".close"),!1===this.fade&&this.modal.removeClass("fade"),this._tabs={},this.childs&&this.childs.forEach(function(e){this._addChild(e)}.bind(this)),this.el.setAttribute("id",this.name),this.el.setAttribute("aria-labelledby",this.name+"Label"),Helpers.App.isGuestCheckoutExperimentActive()&&(this._setGuestCheckoutElements(),this.getElement().addClass("guest-checkout-experiment")),this._bindEvents()):console.error("name key is required")},_setGuestCheckoutElements:function _setGuestCheckoutElements(){this.$guestCheckoutBackBtn=this.getElement().find(".guest-checkout-back-btn"),this.$guestCheckoutSubheader=this.getElement().find(".guest-checkout-subheader"),this.$bottomDisclaimer=this.getElement().find(".new-policy-guest-checkout")},_bindEvents:function _bindEvents(){return this.element.on("show.bs.modal",function(){this.dispatch("modal.show")}.bind(this)),this.element.on("shown.bs.modal",function(){this.dispatch("modal.shown")}.bind(this)),this.element.on("hide.bs.modal",function(){if(!0===this.closeDisabled)return!1;this.dispatch("modal.hide")}.bind(this)),this.element.on("hidden.bs.modal",function(){this.dispatch("modal.hidden")}.bind(this)),this.element.find('a[data-toggle="tab"]').on("show.bs.tab",function(e){var t,i;t=$(e.target),i=this.getTab(t.data("name")),this._animateTab(t),this.dispatch("tab.show",i)}.bind(this)),this.element.find('a[data-toggle="tab"]').on("shown.bs.tab",function(e){var t,i;t=$(e.target),i=this.getTab(t.data("name")),this.dispatch("tab.shown",i)}.bind(this)),Helpers.App.isGuestCheckoutExperimentActive()&&(this.$guestCheckoutBackBtn.off("click").on("click",Utils.bindFn(this)(this._guestCheckoutBackBtnHandler)),this.bind("tab.show",Utils.bindFn(this)(this._guestCheckoutTabShowHandler))),this},_guestCheckoutTabShowHandler:function _guestCheckoutTabShowHandler(e){e.data.name!==UI.SsoModal.TAB_LOGIN?this._toggleGuestCheckoutSignupDisclaimer(!0):this._toggleGuestCheckoutSignupDisclaimer(!1)},_toggleGuestCheckoutSignupDisclaimer:function _toggleGuestCheckoutSignupDisclaimer(e){e?this.$bottomDisclaimer.removeClass("hide"):this.$bottomDisclaimer.addClass("hide")},_addChild:function _addChild(e){var t,i,n;for(var s in e.name===undefined&&(e.name=e.label.replace(/\s/g,"")),i='<li>                            <a class="flex-vc-hc" data-toggle="tab" href="#'+(t=e.name+"_"+this.name)+'" data-href="#'+t+'" data-name="'+e.name+'">                                '+e.label+"                            </a>                        </li>",n='<div class="tab-pane" id="'+t+'"></div>',this._tabs[t]={},e)this._tabs[t][s]=e[s];this._tabs[t].tab=$(i),this._tabs[t].tabAnchor=this._tabs[t].tab.find("a"),this._tabs[t].pane=$(n),e.renderInTabList&&this._tabList.appendChild(this._tabs[t].tab[0]),this.tabContent.appendChild(this._tabs[t].pane[0]),this._renderTab(this._tabs[t])},activate:function activate(e){this._activatedBy=e,Widget.prototype.activate.call(this),Helpers.App.isGuestCheckoutExperimentActive()?this.element.modal({backdrop:"static",keyboard:!1},"show"):this.element.modal("show")},deactivate:function deactivate(){return Widget.prototype.deactivate.call(this),this.element.modal("hide"),this},destroy:function destroy(){this.dialog=null,this._tabList=null,this._paneList=null,this.tabContent=null,this._tabs=null,this.childs=null,this._timeouts.forEach(function(e){clearTimeout(e)}),Widget.prototype.destroy.call(this)},isShown:showMessage:function showMessage(e){var t;this.hideMessage(),"error"===e.type&&(e.type="danger"),t='<div class="alert alert-'+e.type+'">',t+=e.content,t+="</div>",$(this.dialog).prepend(t)},hideMessage:function hideMessage(){$(this.dialog).find("> .alert").remove()},selectTabByName:function selectTabByName(e){var t=e+"_"+this.name;return 0<=Object.keys(this._tabs).indexOf(t)&&(this._showTab(this._tabs[t]),this._tabs[t].tabAnchor.tab("show")),this},_showTab:_animateTab:function _animateTab(e){e.parent().addClass("animate"),this._timeouts.push(setTimeout(1e3))},_renderTab:function _renderTab(e){this._setModalWidth(e.modalWidth),e.widget.element.detach(),this.appendChild(e.widget),e.widget.render(e.pane)},_setModalWidth:function _setModalWidth(e){return e!==undefined&&(!Helpers.App.isMobile()||$(window).width()>parseInt(e.split("p")[0]))?this.dialog.style.width=e:this.dialog.style.width="100%",this},getTab:function getTab(e){var t;return t=e+"_"+this.name,this._tabs[t]?this._tabs[t]:null},disableClose:enableClose:function enableClose(e){!(this.closeDisabled=!1)===e&&this.$close.show()},disableTabs:function disableTabs(){this.element.find('a[data-toggle="tab"]').each(},enableTabs:function enableTabs(){this.element.find("a.flex-vc-hc").each(function(e,t){t.setAttribute("href",t.getAttribute("data-href")),t.setAttribute("data-toggle","tab")})},deactivateTabs:function deactivateTabs(){$(this._tabList).find("li").removeClass("active")},_guestCheckoutBackBtnHandler:function _guestCheckoutBackBtnHandler(){this.dispatch("guest.back"),this.deactivate()},hideGuestCheckoutSection:function hideGuestCheckoutSection(){this.$guestCheckoutSubheader.addClass("hide"),this.$guestCheckoutBackBtn.addClass("hide")},showGuestCheckoutSection:}),Class(UI,"SsoModal").inherits(Widget).includes(CustomEventSupport,BubblingSupport,GenericDestroySupport,Translator)({TAB_LOGIN:"loginTab",TAB_SIGNUP:"signupTab",TEXT_TAB_SIGNUP:I18nUtils.t("Sign Up"),TEXT_TAB_LOGIN:I18nUtils.t("Log In"),prototype:{tabbedModal:null,ssoLoginForm:null,tabNameToShow:null,init:function init(e){Widget.prototype.init.call(this,e);var t=UI.SsoLoginModal,i=UI.SsoSignupModal;Helpers.App.isGuestCheckoutExperimentActive()&&(t=UI.SsoLoginGuestCheckoutModal,i=UI.SsoSignupGuestCheckoutModal),this.ssoLoginForm=new t({userFormClass:UI.UserForm,recaptchaKey:window.recaptchaKey}),this.ssoSignupForm=new i({userFormClass:UI.UserForm}),this.tabbedModal=new UI.TabbedModal({name:"ssoModal",childs:[{name:UI.SsoModal.TAB_SIGNUP,label:this.constructor.TEXT_TAB_SIGNUP,renderInTabList:!0,modalWidth:"478px",widget:this.ssoSignupForm},{name:UI.SsoModal.TAB_LOGIN,label:this.constructor.TEXT_TAB_LOGIN,renderInTabList:!0,modalWidth:"478px",widget:this.ssoLoginForm}]}),this.appendChild(this.tabbedModal),this._bindEvents()},_bindEvents:function _bindEvents(){var e=this;this.tabbedModal.bind("modal.shown",bind(this)),this.tabbedModal.bind("modal.hidden",function(){this.tabbedModal.childs.forEach(function(e){e.widget.deactivate()}),this.dispatch("modal.hidden")}.bind(this)),this.tabbedModal.bind("modal.hide",function(){e.dispatch("modal.hide")}),this.tabbedModal.bind("tab.shown",function(t){this.tabbedModal.childs.forEach(}.bind(this)),this.ssoLoginForm.bind("login.message",function(e){e.data&&this.tabbedModal.showMessage(e.data)}.bind(this)),this.ssoLoginForm.bind("login.deactivate",function(){this.deactivate()}.bind(this)),this.ssoLoginForm.bind("signup.show",function(){this.tabbedModal.selectTabByName(UI.SsoModal.TAB_SIGNUP)}.bind(this)),this.ssoLoginForm.bind("form.success",function(){this.dispatch("login.form.success")}.bind(this)),this.ssoLoginForm.bind("bookmarks.retrieved",bind(this)),this.ssoLoginForm.bind("login.autosignin",bind(this)),this.ssoSignupForm.bind("signup.message",bind(this)),this.ssoSignupForm.bind("login.show",bind(this)),this.ssoSignupForm.bind("form.success",function(e){"google"!==e.data.authenticated_by?this.dispatch("signup.form.success"):this.dispatch("login.form.success")}.bind(this)),this.ssoSignupForm.bind("show.login.no-close",function(){this.dispatch("show.login.no-close")}.bind(this)),this.ssoSignupForm.bind("login.success",function(){this.deactivate()}.bind(this)),this.ssoSignupForm.bind("signup.emailAvailable",function(e){var t="";!0!==e.data&&(t=e.data),this.ssoLoginForm.setEmail(t)}.bind(this)),this.ssoLoginForm.bind("accountUnusualActivity",function(){e.deactivate(),e._showUnusualActivityModal()}),this._bindModalToggleEvents(),this._bindMessageEvents(),this._bindAutoSigninEvents(),this._bindGuestCheckoutEvents()},_bindModalToggleEvents:function _bindModalToggleEvents(){var e=Utils.bindFn(this);this.ssoSignupForm.bind("ssoModal.disableModal",e(this.disableModal)),this.ssoSignupForm.bind("ssoModal.enableModal",e(this.enableModal)),this.ssoSignupForm.bind("ssoModal.deactivate",e(this.deactivate)),this.ssoLoginForm.bind("ssoModal.disableModal",e(this.disableModal)),this.ssoLoginForm.bind("ssoModal.enableModal",e(this.enableModal)),this.ssoLoginForm.bind("ssoModal.deactivate",e(this.deactivate))},_bindMessageEvents:function _bindMessageEvents(){var e=Utils.bindFn(this);this.ssoSignupForm.bind("ssoModal.hideMessage",e(this.hideModalMessage)),this.ssoLoginForm.bind("ssoModal.hideMessage",e(this.hideModalMessage))},_bindAutoSigninEvents:function _bindAutoSigninEvents(){var e=Utils.bindFn(this);this.ssoLoginForm.bind("login.autosignin.enabled",e(this.enableAutoSignin)),this.ssoLoginForm.bind("login.autosignin.enabled",e(this.hideSsosContainer))},activate:function activate(e){return Widget.prototype.activate.call(this),this.tabNameToShow=UI.SsoModal.TAB_SIGNUP,this._shouldForceLogInTab()&&(this.tabNameToShow=UI.SsoModal.TAB_LOGIN),e?(this.tabNameToShow=e,this.ssoLoginForm.hideContinueHeader(),this.ssoSignupForm.hideContinueHeader()):(this.ssoLoginForm.showContinueHeader(),this.ssoSignupForm.showContinueHeader()),this.tabbedModal.hideMessage(),this.tabbedModal.activate(),e===UI.SsoModal.TAB_SIGNUP&&Helpers.GlobalEventTracker.track("signup.fullModalOpened"),this},deactivate:function deactivate(){return Widget.prototype.deactivate.call(this),this.tabbedModal.enableClose(!1),this.tabbedModal.deactivate(),this},destroy:showMessage:function showMessage(e){e.contentForceLogIn&&this._shouldForceLogInTab()&&(e.content=e.contentForceLogIn),this.tabbedModal.showMessage(e)},showTab:function showTab(t){this.tabbedModal.childs.forEach(function(e){e.name===t&&e.widget.activate()}),this.tabbedModal.selectTabByName(t)},login:function login(){this.ssoLoginForm.login()},_modalShownHandler:function _modalShownHandler(){this.tabNameToShow&&(this.showTab(this.tabNameToShow),this.tabNameToShow=null)},disableClose:function disableClose(){this.tabbedModal.disableClose()},enableClose:_shouldForceLogInTab:function _shouldForceLogInTab(){return!(!window.placeitTrackerId&&!$.cookie("pl_tracker_id_v2"))&&!1===Helpers.App.isGuestCheckoutExperimentActive()},_showUnusualActivityModal:function _showUnusualActivityModal(){new UI.UnusualActivityModal({name:"unusualActivityModal",dismissable:!0}).render($(document.body)).activate()},disableModal:function disableModal(){return this.disableClose(),this.tabbedModal.disableTabs(),this.ssoLoginForm.disableSubmit(),this.ssoLoginForm.disableSsosButtons(),this.ssoSignupForm.disableSubmit(),this.ssoSignupForm.disableSsosButtons(),this},enableModal:function enableModal(){return this.enableClose(),this.tabbedModal.enableTabs(),this.ssoLoginForm.enableSubmit(),this.ssoLoginForm.enableSsosButtons(),this.ssoSignupForm.enableSubmit(),this.ssoSignupForm.enableSsosButtons(),this},hideModalMessage:function hideModalMessage(){return this.tabbedModal.hideMessage(),this},hideSsosContainer:function hideSsosContainer(){return this.ssoLoginForm.hideSsosContainer(),this.ssoSignupForm.hideSsosContainer(),this},enableAutoSignin:enableGooglePopupFlow:function enableGooglePopupFlow(){this.ssoSignupForm.enableGooglePopup(),this.ssoLoginForm.enableGooglePopup()},initGoogleSso:function initGoogleSso(){var e=Service.Sso.getInstance();$(window).on("load",function(){e.initGoogleSso().then(function(){})["catch"](function(e){return Promise.resolve(e)})})},_bindGuestCheckoutEvents:function _bindGuestCheckoutEvents(){this.tabbedModal.bind("guest.back",Utils.bindFn(this)(this._guestCheckoutBackBtnHandler))},_guestCheckoutBackBtnHandler:function _guestCheckoutBackBtnHandler(){this.dispatch("guest.back")},hideGuestCheckoutSection:function hideGuestCheckoutSection(){this.tabbedModal.hideGuestCheckoutSection()},showGuestCheckoutSection:function showGuestCheckoutSection(){this.tabbedModal.showGuestCheckoutSection()}}}),Class(UI,"UnusualActivityModal").inherits(UI.SimpleModal).includes(Translator)({elementClass:"unusual-activity",TITLE:"We detected unusual activity in your account",BODY:"To protect your Placeit account, we signed you out from all devices. Check your registered email and follow the instructions to log back in.<br><br>If you didn't receive an email, be sure to check the Spam folder.",prototype:{init:function init(e){UI.SimpleModal.prototype.init.call(this,e),this.setHeaderContent('<img src="/assets/warning.svg"/>').setContent('<h4 class="title">'+this.constructor.TITLE+'</h4><p class="body">'+this.constructor.BODY+"</p>").addCloseButton()}}}),UI.Navigation={},Class(UI.Navigation,"NavBar").inherits(Widget).includes(BubblingSupport,SaleSupport)({BLANK_CHAR:"&nbsp;",prototype:{myDriveDownloads:null,currentContext:{},resizeDebounce:null,desktopMenu:null,mobileMenu:null,init:function(e){Widget.prototype.init.call(this,e),this.$accountInfo=this.element.find(".account, .my-account"),this.$adminContainer=this.element.find(".admin-container"),this.$mobileLoginButton=this.element.find("#mobileLoginLink"),this.$loginButton=this.element.find("#loginLink"),this.$signupDropdown=this.element.find(".signup-dropdown"),this.$mobileSignupButton=this.element.find("#mobileSignup"),this.$signupButton=this.element.find(".signup a"),this.$signupArea=this.element.find(".signup"),this.$bookmarksTab=this.element.find(".bookmarks-tab"),this.$searchContainer=this.element.find("#searchContainer"),this.$userMenuIn=this.element.find(".flex-container.in"),this.$userMenuOut=this.element.find(".flex-container.out"),this.$burgerMenu=this.element.find(".burger"),this.$burgerButton=this.element.find("#burger-button"),this.$foryouAccountButton=this.element.find("#for-you-account-button"),this.$closeButton=this.element.find("#close-button"),this.$pricing=this.element.find(".pricing"),this.$logout=this.element.find(".logout-button"),this.$navbarMain=this.element.parent(),this.isAboutPage=e.noPricing,this.isAndroid=/Android/.test(navigator.appVersion),this.$categories=this.element.find(".category"),this.$activeCategory=this.element.find(".category.active"),this.$accountBox=this.element.find(".account-box"),this.$accountLink=this.element.find(".account-box a"),this.$body=$(document.body),this.$extraPricing=this.element.find(".extra-pricing-link"),this.isAboutPage&&this.$pricing.hide(),this.appendChild(new UI.MyDriveDownloads({name:"myDriveDownloads",element:this.element.find(".past-downloads-item-holder")})),e.context.isLogged&&this.myDriveDownloads.cloneProcessingFeedbackTo(this.element[0],"my-drive__processing-mobile-feedback"),this.appendChild(new UI.SsoModal({name:"ssoModal"})),this.initMenu(),this.appendChild(new UI.PricingButton({name:"pricingButton",element:this.$pricing})),this.appendChild(new UI.EnvatoUsername({name:"envatoUsername",element:this.element.find(".username-container")})),this.appendChild(new UI.UserTypeBanner({name:"userTypeBanner",element:this.element.find(".user-type-banner")})),this.updateStatus(e.context),this.bindings(),envatoSso.setConfig({host:window.sso_hostname})},initMenu:function initMenu(){var e=this;if(Helpers.App.isMobile()){if(e.mobileMenu)return;e.appendChild(new UI.Navigation.HamburgerMenu({name:"mobileMenu",burgerTarget:e.element,element:e.element.find(".hamburger-nav-menu")}))}else e.appendChild(
new UI.Navigation.DesktopMenu({name:"desktopMenu",element:e.element.find("ul.categories-list")})),e.loadCampaignBadges()},bindings:function bindings(){var t=this;$(document).bind("click",function(){t.$loginButton.parent().removeClass("open"),t.$signupButton.parent().removeClass("open")}),this.bind("active",function(){!0!==this.categoryList.hasDefaultElement&&(this.$navbarMain.addClass("height-fixed"),t.$navbarMain.addClass("has-active-item"))}),this.bind("inactive",function(){!0!==this.categoryList.hasDefaultElement&&(this.$navbarMain.removeClass("height-fixed"),t.$navbarMain.removeClass("has-active-item"))}),this.$logout.bind("click",function(e){e.preventDefault(),Helpers.GlobalEventTracker.track("user:logout"),this.dispatch("logout"),Helpers.App.logout();try{UI.Grid.dispatch("user:logout"),UI.CustomExperience.Grid.dispatch("user:logout"),UI.SimilarStagesGrid.dispatch("user:logout"),UI.SmartTemplate.SavedConfigurations.dispatch("user:logout"),UI.RelatedTemplates.Controller.dispatch("user:logout"),Helpers.StageType.getSmartTemplateClass().dispatch("user:logout")}catch(t){}}.bind(this)),t.$burgerButton.on("click",function(){t.$body.addClass("open-sidemenu"),t.userTypeBanner.sendShownEvent(),t.dispatch("sideMenu.open")}),t.$foryouAccountButton.on("click",function(){t.$body.addClass("open-sidemenu"),t.userTypeBanner.sendShownEvent(),t.dispatch("sideMenu.open")}),t.$closeButton.on("click",function(){t.closeHamburgerMenu()}),t.$body.find("#backdrop-sidemenu").on("click",function(){t.closeHamburgerMenu()}),t.$accountLink.on("click",function(){t.closeHamburgerMenu()}),t.$loginButton.on("click",function(){t.ssoModal.login()}),t.$mobileLoginButton.on("click",function(){t.ssoModal.login()}),t.$signupButton.on("click",function(){t.showSignupModal()}),t.$mobileSignupButton.on("click",,t.$extraPricing&&this._configureExtraPricingLink(),t.ssoModal.bind("signup.form.success",function(){var e=Helpers.App.getUser();t.currentContext.isLogged=!0,t.$accountInfo.find(".sso-username").html(e.username),t.updateStatus(),t.updateUserTypeBanner(),t.myDriveDownloads.restart(),t.myDriveDownloads.cloneProcessingFeedbackTo(t.element[0],"my-drive__processing-mobile-feedback"),t.dispatch("signup.success")}).bind("show.login",.bind("show.login.no-close",,t.ssoModal.bind("login.form.success",function(){var e=Helpers.App.getUser();t.currentContext.isLogged=!0,t.currentContext.isAdmin=Helpers.App.isAdmin(),t.$accountInfo.find(".sso-username").html(e.username),t.updateStatus(),t.updateUserTypeBanner(),!1!==Helpers.App.getSubscription()&&t.$pricing.addClass("has-subscription"),t.myDriveDownloads.restart(),t.myDriveDownloads.cloneProcessingFeedbackTo(t.element[0],"my-drive__processing-mobile-feedback"),console.log("navbar login success"),t.dispatch("login.success")}).bind("login.bookmarks.retrieved",function(e){t.currentContext.hasBookmarks=0<e.data.count,t.updateStatus()}).bind("modal.shown",function(){t.dispatch("sso.modal.shown")}),Helpers.App.isMobile()&&t.ssoModal.bind("modal.shown",function(){t.$body.hasClass("open-sidemenu")&&(t.wasSidemenuOpen=!0),t.$body.removeClass("open-sidemenu")}).bind("modal.hide",function(){!(0!==Helpers.App.getUser().id&&!Helpers.App.isGuestCheckoutExperimentActive())&&t.wasSidemenuOpen&&(t.wasSidemenuOpen=!1,t.$body.addClass("open-sidemenu"))}),t.avoidAndroidKeyboard(),!1!==Helpers.App.getSubscription()&&this.$pricing.addClass("has-subscription"),t.$accountInfo.mouseenter(,t.$accountInfo.mouseleave(function(){t.dispatch("accountInfo-close")}),t.userTypeBanner.bind("updated",,t.ssoModal.bind("guest.back",Utils.bindFn(this)(this._guestCheckoutBackBtnHandler))},_guestCheckoutBackBtnHandler:function _guestCheckoutBackBtnHandler(){this.dispatch("guest.back")},updateStatus:function updateStatus(e,t){var i=this,n=Helpers.App.getSubscription(),s=Helpers.App.getUser();e?i.currentContext=e:e=i.currentContext,i.closeHamburgerMenu(),this.pricingButton.update(n),e.isLogged?(i.$userMenuOut.hide(),i.$userMenuIn.css("display","flex"),i.$burgerButton.addClass("logged-in"),i.$foryouAccountButton.addClass("logged-in"),i.$accountBox.addClass("logged-in"),e.hasBookmarks?i.$bookmarksTab.css("display",""):i.$bookmarksTab.hide(),e.isAdmin?i.$adminContainer.show():i.$adminContainer.hide(),(t||$.cookie("pl_processing_tracker"))&&i.myDriveDownloads.update(null,t),this.envatoUsername.update(s.username,n)):(i.$bookmarksTab.hide(),i.$burgerButton.removeClass("logged-in"),i.$foryouAccountButton.removeClass("logged-in")),i.$searchContainer.hide(),i.showSearchBar(e.pageName),Helpers.App.isGuestCheckoutExperimentActive()&&(t||$.cookie("pl_processing_tracker"))&&i.myDriveDownloads.update(null,t)},_configureExtraPricingLink:function _configureExtraPricingLink(){var e=this;!0===Helpers.App.isPricingPage()?e.$extraPricing.hide():e.$extraPricing.on("click",function(e){var t=Helpers.App.getUserType();Helpers.GlobalEventTracker.pricingModalStillshots({session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id,button_clicked:e.target,user_type_name:t.name,user_type_id:t.id})})},showSearchBar:function showSearchBar(e){var t=["stage","search","custom_experiences","custom_pages"],i=Helpers.StageType.pageType().header_type;-1<t.indexOf(e)&&("header-1"===i||"header-2"===i)&&this.$searchContainer.show()},autoModal:function autoModal(e){var t=this;if("subscription"==e||"pack"==e||"purchase"==e){var i=function(){switch(t.ssoModal.unbind("signup.form.success",i),t.ssoModal.unbind("login.form.success",i),e){case"subscription":Helpers.App.getSubscription()||t.dispatch("activate-pricing");break;case"pack":Helpers.App.getSubscription()||t.dispatch("activate-pricing-coupon");break;case"purchase":t.dispatch("activate-purchase")}};"purchase"==e&&t.dispatch("not-logged"),t.ssoModal.bind("signup.form.success",i),t.ssoModal.bind("login.form.success",i)}},avoidAndroidKeyboard:function avoidAndroidKeyboard(){var e=this;e.isAndroid&&Helpers.App.isMobile()&&e.$signupButton.on("click",function(){e.$signupArea.toggleClass("floatUp")})},instantiateNotLoggedInModal:function instantiateNotLoggedInModal(){this.ssoModal.activate()},showSubscribeMailingModal:function showSubscribeMailingModal(){!1!==Helpers.App.isLoggedIn()&&(!0!==Helpers.App.getUser().placeitPromotionNotifications&&("undefined"==typeof this.subscribeMailingModal&&this.appendChild(new UI.SubscribeMailingModal({name:"subscribeMailingModal"})),this.subscribeMailingModal.activate()))},showTooltipError:function showTooltipError(e){this.myDriveDownloads.showError(e)},_sortList:function _sortList(e){!1!==Array.isArray(e.submenu)&&e.submenu.sort(},_addAnchorLink:function _addAnchorLink(e){e.content=e.title,!0!==Array.isArray(e.submenu)&&(e.content=$("<a></a>").attr("title",e.anchor_title).attr("href",e.url).html(e.title))},_addSubheading:function _addSubheading(e){if(!1!==Array.isArray(e.submenu)&&"root"!==e.value){var t={title:e.anchor_title,url:e.url,slug:"0",anchor_title:e.anchor_title,order:"0",submenu:null,isHeading:!0};e.submenu.unshift(t)}},_treeWalker:function _treeWalker(e,t,i){var n=function n(e){i(e),!1!==Array.isArray(e[t])&&e[t].forEach(function(e){n(e)})};n(e)},_setupList:function _setupList(){var t=this,e={value:"root",submenu:t.record};t._treeWalker(e,"submenu",,t.record=e},_setActive:function _setActive(e){var t=this,i=null,n=window.location.href;i=-1!==n.indexOf("page")||-1!==n.indexOf("sortby")?t.clearUrl(window.location):window.location.href,e.url&&i===window.location.origin+e.url&&(e.isActive=!0)},clearUrl:function clearUrl(e){var t=e.search.replace(/^\?/,"").split("&").map(function(e){return e.split("=")}).filter(function(e){return"page"!==e[0]}).map(function(e){return e.join("=")}).join("&");return 0<(t=t.replace(/^\?/,"").split("&").map(function(e){return e.split("=")}).filter(.map(.join("&")).length&&(t="?"+t),e.origin+e.pathname+t},showSignupModal:updateUserTypeBanner:function updateUserTypeBanner(){this.userTypeBanner.update()},closeHamburgerMenu:function closeHamburgerMenu(){this.$body.removeClass("open-sidemenu"),this.dispatch("sideMenu.close")}}}),Class(UI.Navigation,"DesktopMenu").inherits(Widget).includes(BubblingSupport)({elementClass:"desktop-menu",OVERFLOW_CLASS:"fix-to-right",prototype:{init:function init(e){var t=this;Widget.prototype.init.call(this,e),t._setBinds()},addBadge:function(e,t,i,n){if(e&&t){var s=this,r=i||"";"before"===n?$('a[href="'+t+'"]',s.element).before('<a href="'+t+'"><span class="'+r+'">'+e+"</span></a>"):$('a[href="'+t+'"]',s.element).after('<a href="'+t+'"><span class="'+r+'">'+e+"</span></a>")}},addAnimatedBadge:function(e,t,i,n){var s='<a href="'+e+'"><object class="'+t+'" data="'+i+'" type="image/svg+xml" style="z-index: -1; pointer-events: none;"></object></a>';"before"===n?$('a[href="'+e+'"]',this.element).before(s):$('a[href="'+e+'"]',this.element).after(s)},addImageBadge:function(e,t,i,n){var s='<a href="'+e+'"><img class="'+t+'" src="'+i+'"></a>';"before"===n?$('a[href="'+e+'"]',this.element).before(s):$('a[href="'+e+'"]',this.element).after(s)},_checkOverflow:function _checkOverflow(e){var t=this,i=e.currentTarget,n=$(e.currentTarget).find(".dropdown-menu"),s=$(window),r=i.offsetLeft,a=n.width();s.width()<r+a&&n.addClass(t.constructor.OVERFLOW_CLASS)},_onMouseLeave:function _onMouseLeave(){this.dispatch("menu-close")},_onMouseOver:function _onMouseOver(e){this.dispatch("menu-open"),this._checkOverflow(e)},_setBinds:function _setBinds(){this.element.bind("mouseover",this._onMouseOver.bind(this)),this.element.bind("mouseleave",this._onMouseLeave.bind(this)),this.element.find(">li").bind("mouseover",this._checkOverflow.bind(this))}}}),Class(UI.Navigation,"HamburgerMenu").inherits(Widget).includes(BubblingSupport)({html:'<div>               <div class="close-button-container">                   <div class="close-button">                       <!--?xml version="1.0" encoding="UTF-8"?-->                       <svg width="15px" height="15px" viewBox="0 0 15 15" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">                           <defs></defs>                           <g id="Page-HambClose-black" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">                               <g id="HambClose-black" fill="#000000">                                   <rect id="Rectangle" transform="translate(7.424621, 7.424621) rotate(-315.000000) translate(-7.424621, -7.424621) " x="-2.0753788" y="6.4246212" width="19" height="2" rx="1"></rect>                                   <rect id="Rectangle" transform="translate(7.424621, 7.424621) scale(-1, 1) rotate(-315.000000) translate(-7.424621, -7.424621) " x="-2.0753788" y="6.4246212" width="19" height="2" rx="1"></rect>                               </g>                           </g>                       </svg>                   </div>                   <div class="separator"></div>               </div>           </div>',elementClass:"hamburger-nav-menu",BURGER_ICON:'<div class="nav-menu-burger-button" >                      <?xml version="1.0" encoding="UTF-8"?>                      <svg width="16px" height="14px" viewBox="0 0 16 14" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">                          <g id="Page-HambIcon" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">                              <g id="HambIcon" class="svg-burger-button" fill="#FFFFFF">                                  <rect id="Rectangle1" x="0" y="0" width="16" height="2" rx="1"></rect>                                  <rect id="Rectangle2" x="0" y="6" width="16" height="2" rx="1"></rect>                                  <rect id="Rectangle3" x="0" y="12" width="16" height="2" rx="1"></rect>                              </g>                          </g>                      </svg>                  </div>',LINK:"<li>               <a></a>           </li>",CLOSED_ICON:'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="8" fill="none" viewBox="0 0 12 8">                    <path fill="#303030" d="M.264.305c-.364.385-.34 1.107 0 1.5l.632.731 2.74 3.172 1.717 1.987c.351.407.944.407 1.295 0l.633-.732 2.74-3.172 1.717-1.987c.363-.417.336-1.075 0-1.499-.333-.42-.957-.392-1.296 0l-.632.732-2.74 3.172c-.572.66-1.146 1.326-1.717 1.987h1.295l-.632-.732-2.74-3.172L1.559.305C1.199-.112.63-.084.264.305z"/>                </svg>',OPEN_ICON:'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="8" fill="none" viewBox="0 0 12 8">                    <path fill="#303030" d="M11.736 7.695c.364-.385.34-1.107 0-1.5l-.632-.731-2.74-3.172L6.647.305c-.351-.407-.944-.407-1.295 0l-.633.732-2.74 3.172L.262 6.196c-.363.417-.336 1.075 0 1.499.333.42.957.392 1.296 0l.632-.732 2.74-3.172c.572-.66 1.146-1.326 1.717-1.987H5.352l.632.732 2.74 3.172 1.717 1.987c.36.417.929.389 1.295 0z"/>                </svg>',prototype:{hasBinded:!1,init:function(e){var t=this;Widget.prototype.init.call(this,e),this.isMobile=Helpers.App.isMobile(),t.$body=$(document.body),t.menuList=t.element.find("ul.hamburger-list"),t.closeButton=t.element.find(".close-button"),t.burgerButton=t.$body.find(".nav-menu-burger-button svg"),t._bindings()},addBadge:function(e,t,i){if(e&&t){var n=i||"";$('a[href="'+t+'"]',this.element).after('<a href="'+t+'"><span class="pill '+n+'">'+e+"</span></a>")}},close:function close(){$(document.body).removeClass("open-hamburger-menu"),$(".submenu-open").toggleClass("submenu-open"),this.dispatch("sideMenu.close")},open:function open(){$(document.body).addClass("open-hamburger-menu"),this.dispatch("sideMenu.open")},_bindings:function _bindings(){var e=this,t=Utils.bindFn(this);e.$body.find("#backdrop-sidemenu").on("click",t(e.close)),e.burgerButton.bind("click",e._onDemandBinds.bind(e)),e.burgerButton.bind("click",t(e.open)),e.closeButton.bind("click",t(e.close))},_onDemandBinds:function _onDemandBinds(){var e=this;e.hasBinded||(e.menuList.find("li.category-heading").bind("click",function(e){var t=$(e.currentTarget);t.toggleClass("submenu-open"),t.parent().toggleClass("submenu-open"),t.find("ul.children").addClass("hidden"),t.find(".active").toggleClass("active")}),e.menuList.find("ul.list.placeit-widget li.submenu").bind("click",e._listCollapseHandler).bind("click",e._openSubmenu),e.hasBinded=!0)},_openSubmenu:function _openSubmenu(e){var t;e.currentTarget?(t=$(e.currentTarget),e.stopPropagation()):t=e.parents("ul.hamburger-list>li"),t.find(">.item.placeit-widget").toggleClass("active"),t.find("ul.children").toggleClass("hidden")},_listCollapseHandler:function _listCollapseHandler(e){var t=$("div.active");t.parent().attr("id")!==$(e.currentTarget).attr("id")&&(t.next("ul.children").toggleClass("hidden"),t.toggleClass("active"),$(e.currentTarget).animate({scrollTop:0},"fast"))}}}),Class(UI,"SimpleSlider").inherits(Widget).includes(GenericDestroySupport)({html:"<div></div>",elementClass:"simple-slider-container",NEXT_ARROW:'<div class="simple-slider-arrow simple-slider-next">        <span class="angle-right-purple">        </span>    </div>',PREV_ARROW:'<div class="simple-slider-arrow simple-slider-prev">        <span class="angle-right-purple">        </span>    </div>',prototype:{isMobile:!1,slides:[],init:function init(e){Widget.prototype.init.call(this,e);var t=this;this.element.html(this.content),this.element.append(this.constructor.PREV_ARROW),this.element.append(this.constructor.NEXT_ARROW),this.$carousel=this.element.find(".carousel"),this.$next=this.element.find(".simple-slider-next"),this.$prev=this.element.find(".simple-slider-prev"),this._boundDispatchEvent=this._dispatchEvent.bind(this),this._boundScrollHandler=this._scrollHandler.bind(this),this._boundNextSlide=this.nextSlide.bind(this),this._boundPrevSlide=this.prevSlide.bind(this),this.$carousel.addClass("simple-slider"),this.slides=[],this.$carousel.children().each(function(e){t.slides.push(this),this.setAttribute("slide-num",e)}),this.currentSlide=this.slides[0],this.currentSlideNum=0,this._bindEvents()},nextSlide:function nextSlide(){var e=(this.currentSlideNum+1)%this.slides.length;this.goToSlide(e)},prevSlide:function prevSlide(){var e=this.currentSlideNum-1;e<0&&(e=this.slides.length-1),this.goToSlide(e)},goToSlide:function goToSlide(e,t){var i=this.slides[e];t=t||500,e!==this.currentSlideNum&&(this.currentSlide=i,this.currentSlideNum=e,this.$carousel.animate({scrollLeft:i.offsetLeft},t,this._boundDispatchEvent))},_dispatchEvent:function _dispatchEvent(){this.dispatch("carousel.afterChange",{feature:parseInt(this.currentSlide.getAttribute("data-feature")),category:this.currentSlide.getAttribute("data-category")})},_scrollHandler:_setCurrentSlide:function _setCurrentSlide(){var n=this,s=this.$carousel.get(0).scrollLeft+this.$carousel.get(0).offsetWidth/2;this._pastPosition!==s&&this.$carousel.children().each(function(e){var t=this.offsetLeft,i=this.offsetLeft+this.offsetWidth;if(t<=s&&s<=i)return n._pastPosition=t,n.goToSlide(e,100),!1})},_bindEvents:destroy:function destroy(){this._boundDispatchEvent=null,this._boundScrollHandler=null,this._boundNextSlide=null,this._boundPrevSlide=null,this.$carousel.stop(!0,!0),clearTimeout(this._debouncedScroll),this.genericDestroy()}}}),Module(Helpers,"SubscriptionHelper")({TEXT_TAX_MESSAGE_NOT_INCLUDED:"All prices in {{currency_label}}.",TEXT_TAX_MESSAGE_INCLUDED:"Plus {{amount}} for {{taxType}}. All Prices in {{currency_label}}",TEXT_TAX_MESSAGE_VAT_EXEMPT:"VAT Exempt. All Prices in {{currency_label}}.",CHURN_STATE_TEXT:"canceled",_refreshSubscription:function _refreshSubscription(t){$.ajax({url:"/subscriptions/show",type:"get",dataType:"json",success:)},isChurned:function isChurned(){var e=Helpers.App.getSubscription();return!!e&&e.recurly_state===Helpers.SubscriptionHelper.CHURN_STATE_TEXT},shouldDisableSwitchPlans:function shouldDisableSwitchPlans(){var e=Helpers.App.getSubscription();return!e||(!!e.plan.disabled||(!0===Helpers.SubscriptionHelper.isChurned()||("in"===e.plan.country_code||e.is_brazilian!==("BRL"===recurlyConfig.currency))))},prototype:{_applyCouponDiscount:function _applyCouponDiscount(e,t){return"percent"===e.type?t=t*(100-e.amount)/100:(t-=e.amount[window.recurlyConfig.currency])<0&&(t=0),Math.round(100*t)/100},_discountAppliesForPlanCode:function _discountAppliesForPlanCode(e,t){var i=!1;return e&&(i=!e.planCodes.length||!!(-1<e.planCodes.indexOf(t))),i},_applyCustomPriceDiscount:function _applyCustomPriceDiscount(e){return price=e*(100-20)/100,price},_isSubscriptionValid:function _isSubscriptionValid(e){var t,i=!1;return e&&(t=new Date(1e3*e.ends_at),"active"===e.recurly_state?i=!0:"canceled"===e.recurly_state&&t<new Date&&(i=!0)),i},_subscriptionCanDownload:function _subscriptionCanDownload(e,t){var i,n,s,r,a,o;return r=!1,n=Helpers.StageType.isFusionVideo(),e&&(i=new Date(1e3*e.ends_at),s="active"===e.recurly_state||"canceled"===e.recurly_state&&i>new Date,a=0<e.remaining_downloads,o=0<e.video_purchases,1==s&&(n&&o||!n&&a||!n&&t)&&(r=!0)),r},_priceWithSubscription:function _priceWithSubscription(e,t,i){var n,s,r,a;return n=!1,r=Helpers.StageType.isFusionVideo(),s=Helpers.App.getSubscription(),a=Helpers.StageType.getCustomPrice(),s&&this._subscriptionCanDownload(s,i)?this._purchaseableWithSubscription(e,t,s,r)&&(n=this._purchaseableWithSubscription(e,t,s,r)):s&&this._isSubscriptionValid(s)&&a&&(n=this._applyCustomPriceDiscount(a)),n},_purchaseableWithSubscription:function _purchaseableWithSubscription(e,t,i){var n=Helpers.StageType.isFusionVideo();Helpers.StageType.isLogo(),Helpers.StageType.getCustomPrice();return!(!i||i.is_paused)&&(1==n?0<i.video_purchases&&i.plan.allowed_packages[e+":"+t]:"Comp"!=i.plan.name&&!1===Helpers.Resolutions.isComp()?0<i.remaining_downloads&&i.plan.allowed_packages[e+":"+t]:i.plan.allowed_packages[e+":"+t])},getTaxMessage:function getTaxMessage(t){var s=this,r={notIncluded:this.constructor.TEXT_TAX_MESSAGE_NOT_INCLUDED,included:this.constructor.TEXT_TAX_MESSAGE_INCLUDED,vatExempt:this.constructor.TEXT_TAX_MESSAGE_VAT_EXEMPT};return this._taxRequestInProgress&&this._taxRequestInProgress.cancel(),new Promise(function(n,e){taxCancelablePromise=P.cancelable(Helpers.Price.tax.bind(null,window._pl_country,t)),s._taxRequestInProgress=taxCancelablePromise(),s._taxRequestInProgress.then(function(e){var t,i;s._taxRequestInProgress=null,i="VAT",t=r.notIncluded,"AU"===window._pl_country&&(i="GST"),0<e.amount&&""!==window._pl_vat_number?t=r.vatExempt:0<e.amount&&(t=(t=(t=r.included).replace("{{amount}}",window.currencyHelper.getSymbol(recurlyConfig.currency)+e.amount.toFixed(2))).replace("{{taxType}}",i)),n(t)})["catch"](})},_getGetOrdinal:function _getGetOrdinal(e){var t=["th","st","nd","rd"],i=e%100;return e+(t[(i-20)%10]||t[i]||t[0])},_refreshSubscription:function _refreshSubscription(e){this.constructor._refreshSubscription(e)},signRequestWithRecurly:function signRequestWithRecurly(e,t,i){var n,s;if(n=null,Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyTo(Helpers.CouponHelper.TYPE_SUBSCRIPTION)&&(n=Helpers.CouponHelper.getCode()),"undefined"==typeof e.recurly_uuid)return!1;s={plan_recurly_uuid:e.recurly_uuid},n&&this._discountAppliesForPlanCode(t,e.recurly_uuid)?s.coupon_code=n:delete s.coupon_code;var r={url:"/subscriptions/sign",type:"post",data:$.extend(!0,{},s),dataType:"json",success:,a=Helpers.RequestConfig.prepareConfig(r);$.ajax(a)},_calculateAnnualSavePercent:function _calculateAnnualSavePercent(e){var t=Registry.Plans.get(Registry.Plans.PLAN_MONTHLY),i=12,n=parseInt(t.amount_in_cents,10)/100,s=null,r=null;Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyToPlan(Registry.Plans.PLAN_ANNUAL)&&((r=Helpers.CouponHelper.getDuration().length)||(r="forever"===Helpers.CouponHelper.getDuration().type?12:1),s=Helpers.CouponHelper.calculatePrice(n),i-=r);var a=n*i+s*r;return 0===a?100:(100*(a-e)/a).toFixed(2)},_formatPrice:function _formatPrice(e){return 0<e?(e=(e=e.toFixed(2)).replace(/\.?0+$/,""),e=window.currencyHelper.getSymbol(recurlyConfig.currency)+e):e="Free",e},_getPlanPrice:function _getPlanPrice(e,t){var i,n;if(n={original:null,withDiscount:null},i=Registry.Plans.get(e))return n.original=parseInt(i.amount_in_cents,10)/100,Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyToPlan(e)&&(n.withDiscount=Helpers.CouponHelper.calculatePrice(n.original)),!0===t&&(n.original=this._formatPrice(n.original),null!==n.withDiscount&&(n.withDiscount=this._formatPrice(n.withDiscount))),n},_renderPlanButton:function _renderPlanButton(n){var s,e,i,t,r,a,o,l;if(s=this,e=Registry.Plans.get(n)){t=this["buttonWrapper_"+n],r=t.find(".original-price"),a=t.find(".final-price"),o=t.find(".discount"),l=t.find(".price-label");var c=function(e){var t;t=s._formatPrice(e),r.text(t),a.text(t),0===e&&l.hide(),n===Registry.Plans.PLAN_ANNUAL&&s._setAnnualSave(e)},u=function(e){var t,i;t=s._formatPrice(e),i=Helpers.CouponHelper.getDiscount(),r.show(),a.text(t),0===e&&l.hide(),null!==i&&o.text(" ("+i.label+" off)"),n===Registry.Plans.PLAN_ANNUAL&&s._setAnnualSave(e)};r.text(""),a.text(""),o.text(""),r.hide(),l.show(),(i=Helpers.Price.plan(e)).price.then(function(t){c(t),i.priceWithDiscount.then(function(e){e<t&&u(e)})}),Helpers.App.isIndianUser()&&n===Registry.Plans.PLAN_MONTHLY&&this._disablePlanButton(n,"This option is not available in your country or region at this time")}},_disablePlanButton:function _disableButton(e,t){if(Registry.Plans.get(e)){var i=this["buttonWrapper_"+e];i.addClass("disabled"),t&&i.popover({html:!0,content:$('<div class="plan-disable-popover">'+t+"</div>"),container:i,trigger:"hover",placement:"top"})}},_setAnnualSave:function _setAnnualSave(e){var t,i;t=parseInt(this._calculateAnnualSavePercent(e)),i=this._formatPrice(e/12),this.$annualSave.text(t),this.$annualMonthlyAmount.text(i)},_canSwitchPlan:function _canSwitchPlan(){return!1!==this._getSwitchPlanAvailable()},_getSwitchPlanAvailable:function _getSwitchPlanAvailable(){var e,t;return!1!==(e=Helpers.App.getSubscription())&&(!!(t=!0===e.is_annual?Registry.Plans.get(Registry.Plans.PLAN_ANNUAL):Registry.Plans.get(Registry.Plans.PLAN_MONTHLY))&&(!(t.amount_in_cents>=e.plan.amount_in_cents)&&t))},_switchSubscription:function _switchSubscription(e,t,i,n){$.ajax({url:"/subscriptions/upgrade",type:"POST",data:{plan_recurly_uuid:e,coupon_code:t},dataType:"json",success:function s(){Helpers.GlobalEventTracker.cancelSubscriptionSwitch("success",{new_plan:e}),"function"==typeof i&&i()},error:function r(){Helpers.GlobalEventTracker.cancelSubscriptionSwitch("error",{new_plan:e}),"function"==typeof n&&n()}})},getAppliedCouponDiscountDetails:function getAppliedCouponDiscountDetails(){return new Promise(function(t,e){$.ajax({url:"/get_coupon_discount_details"}).done(.fail(})},_switchSubscriptionPlan:function _switchSubscriptionPlan(i){var n=null;return new Promise(function(t,e){$.ajax({url:"/switch_subscription_plan",method:"POST",data:{plan_recurly_uuid:i,coupon_code:n}}).done(function(e){Helpers.GlobalEventTracker.cancelSubscriptionSwitch("success",{new_plan:i}),t(e)}).fail(function(){Helpers.GlobalEventTracker.cancelSubscriptionSwitch("error",{new_plan:i}),e()})})},_checkHelperPricePlanResults:function _checkHelperPricePlanResults(n,s,r){var e;n===Registry.Plans.PLAN_ANNUAL?e=Helpers.Price.annualPlan():n===Registry.Plans.PLAN_MONTHLY&&(e=Helpers.Price.monthlyPlan()),null!==e?Promise.all([e.price,e.priceWithDiscount]).then(function(e){var t=e[0],i=e[1];(t!==s.original||i!==s.withDiscount&&null!==s.withDiscount)&&Helpers.GlobalEventTracker.planPriceMismatch({source:r,planCode:n,currentPrice:s.original,currentPriceWithDiscount:s.withDiscount,newPrice:t,newPriceWithDiscount:i})}):Helpers.GlobalEventTracker.track("plan:unknown",{planCode:n})},_useStoredBillingInfo:function _useStoredBillingInfo(t){var e,i,n,s,r,a,o,l=this,c={};s="/subscriptions/quick_transaction",i=this.getEventTrackerName(),n=EventTracker.info({type:i,data:{}}),e=null,Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyToPlan(t.plan_recurly_uuid)&&(e=Helpers.CouponHelper.getCode()),r={url:s,type:"post",data:{plan_recurly_uuid:t.plan_recurly_uuid,coupon_code:e,eventData:n},dataType:"json"};var u=function(){l.storedBillingInfoOverlay?(l.storedBillingInfoOverlay.deactivate(),l.storedBillingInfoOverlay.destroy()):l._setLoadingCardForm(l.$savedCardSubmitBtn,!1)};return!0===(!0===((a=PurchaseSupport.getRequestDataByUrl(s))&&a.isPollingEnabled))?(c={delay:a.pollingConfig.delay,times:a.pollingConfig.times,pingURL:a.pingURL},o=P.ajax(r).then(PurchaseSupport.buildPolling(c))):o=P.ajax(r),Helpers.App.getSubscription()?o.then(function(){u(),Helpers.CouponHelper.markAsUsed(),Helpers.App.replaceUrlParam("show_plans","").replaceUrlParam("upgrade","true"),window.location.reload()})["catch"](function(e){return u(),400===e.status?(alert(l.constructor.TEXT_INVALID_OR_CANCELED_SUBSCRIPTION),window.location.reload()):(alert(l.constructor.TEXT_ERROR_CHARGING_STORE_CARD),l._showPaymentForm(t)),e}):o.then(function(e){return u(),l._ajaxSuccessHandler(e),Helpers.CouponHelper.markAsUsed(),l.dispatch("purchase.success",e),e})["catch"](function(e){return alert(l.constructor.TEXT_ERROR_CHARGING_STORE_CARD),u(),e})}}}),Module(Helpers,"SinglePurchaseHelper").includes(CustomEventSupport)({discountModal:null,showDiscountModal:function showDiscountModal(){this.discountModal||(this.discountModal=new UI.SinglePurchaseDiscountModal),this.discountModal.activate()},hideDiscountModal:),Class(UI,"PurchaseOverlay").inherits(Widget).includes(Helpers.SubscriptionHelper,BubblingSupport,Translator,CurrencyLabelSetter)({
html:'        <div class="modal purchase-overlay fade" id="purchaseOverlay" tabindex="-1" role="dialog" aria-labelledby="purchaseOverlayLabel" aria-hidden="true">          <button type="button" class="close m-close" data-dismiss="modal" aria-hidden="true">            <span aria-hidden="true">\xd7</span>          </button>          <div class="server_errors none mobile"></div>          <div class="modal-dialog">            <div class="server_errors none"></div>            <div class="modal-content">              <div class="modal-body">                <div class="text-center modal-spinner" style="opacity:0.5;margin-top: 60px;">                  <img src="/assets/fade-spinner.gif">                </div>                <div class="form-container">                  <p class="payment-info-title">Payment Information</p>                  <form class="recurly">                    <div class="subscription-info" style="display: none;"></div>                    <div class="payment_method multiple">                      <div class="payment_option saved_card_option selected">                        <input type="radio" name="payment_method">                        <label></label>                        <div class="card_logo"></div>                      </div>                      <div class="payment_option card_option">                        <input type="radio" name="payment_method" checked>                        <label></label>                        <div class="new-cards">                            <img src="/assets/icons/accepted-cards.svg">                        </div>                        <div class="accepted_cards">                          <div class="card visa">Visa</div>                          <div class="card mastercard">MasterCard</div>                          <div class="card discover">Discover</div>                          <div class="card american_express">American Express</div>                        </div>                      </div>                      <div class="payment_option paypal_option">                        <input type="radio" name="payment_method">                        <label></label>                        <div class="logo"></div>                      </div>                    </div>                    <div class="saved-card-container">                      <span>Use saved card</span>                      <div class="saved-card-info">                        <div class="card"></div>                        <span>Ending with ****</span>                        <div class="card-last-four"></div>                      </div>                    </div>                    <div class="form-widget-container">                        <div class="choose-back">                            <div class="angle-left"></div>                            <span>Choose payment method</span>                        </div>                    </div>                    <div class="paypal" style="display: none;">                      <div class="paypal_message">                        You will be taken to PayPal to authorize a billing agreement.<br><br>Customers with an EU or Australian Paypal billing address will have additional VAT or GST charges.<br><br><strong>Please make sure pop-ups aren\'t blocked.</strong>                      </div>                    </div>                    <div class="footer">                      <button id="saved_card" type="submit" class="button primary">                        <span> Purchase </span>                      </button>                      <button id="credit_card" type="submit" class="button primary">                        <span class="card-price-copy"> Purchase </span>                      </button>                      <button id="paypal" style="display: none;" type="button" class="button primary">                        <span class="paypal-price-copy"> Pay with PayPal</span>                      </button>                    </div>                  </form>                </div>                <div class="information-container">                  <p class="information-title">                    Order Summary                    <span class="view-order-details">view order details</span>                    <span class="view-order-details opened">hide order details</span>                  </p>                  <div class="information-general-info">                    <p class="information-title"></p>                    <p class="information-title subtitle"></p>                  </div>                  <div class="subscriptionp-type-selector">                    <div class="plan-annual inline-label">                      <input type="radio" name="plan-annual">                      <label></label>                      <p>Annual (<span class="amount-price">$7.47</span>/mo<span class="disclaimer">*</span>) <span class="label">Save 50%</span></p>                    </div>                    <div class="plan-monthly inline-label">                      <input type="radio" name="plan-monthly">                      <label></label>                      <p>Monthly (<span class="amount-price">$14.95</span>/mo<span class="disclaimer">*</span>)</p>                    </div>                  </div>                  <div class="information-amount-info">                    <div class="amount price-section">                      <p class="amount-text"></p>                      <div class="amount-container">                        <p class="amount-price"></p>                        <p class="disclaimer price"></p><p class="disclaimer">&nbsp;per month)</p>                      </div>                    </div>                    <div class="amount discount-section">                      <p class="amount-text"></p>                      <div class="amount-container">                        <p class="amount-price"></p>                        <p class="disclaimer price"></p><p class="disclaimer">&nbsp;per month)</p>                      </div>                    </div>                    <hr>                    <div class="amount subtotal-section">                      <p class="amount-text">Subtotal</p>                      <p class="amount-price">0</p>                    </div>                    <div class="amount vat-section">                      <p class="amount-text"></p>                      <div class="amount-container">                        <p class="amount-price"></p>                        <p class="disclaimer price"></p><p class="disclaimer">&nbsp;per month)</p>                      </div>                    </div>                    <div class="amount total-section">                      <p class="amount-text total"></p>                      <div class="amount-container">                        <p class="amount-price"></p>                        <p class="disclaimer">(Billed Today)</p>                      </div>                    </div>                  </div>                  <div class="resume-info"></div>                  <div class="secure-info">                    <img class="secure-info-old" src="/assets/icons/lock.svg">                    <img class="secure-info-new" src="/assets/icons/ic-lock.svg">                    <div class="secure-info-disclaimer">                      <p class="secure-info-header">Secure Payments</p>                      <p>All transaction are processed</p>                      <p>by our secure technology.</p>                    </div>                  </div>                  <div class="choose-payment-footer">                    <button class="button primary choose-payment-method">                        <span>Choose payment method</span>                    </button>                  </div>                </div>              </div>            </div>          </div>        </div>    ',PURCHASE:{PRICE_LABEL:"Price",TOTAL_LABEL:"Total"},SUBSCRIPTION:{TITLE:"Unlimited Downloads Subscription",SUBTITLE:"Your subscription includes unlimited mockups, designs, logos, and video downloads.",PRICE_LABEL_ANNUALY:"Annual Subscription",PRICE_LABEL_MONTHLY:"Monthly Subscription",TOTAL_LABEL:"Total Per Month",TOTAL_ANNUAL_LABEL:"Total Per Year",TOTAL_WITH_MONTH:"(First{{period}} Month)",RESUME_RENEW_TEXT:"Unlimited subscription renews monthly in {{currency_label}}.",RESUME_RENEW_TEXT_ANNUAL:"Unlimited subscription renews yearly in {{currency_label}}.",RESUME_CANCEL_TEXT:"Cancel any time and you won\u2019t be billed in the next billing cycle.",RESUME_DISCOUNT_TEXT:"Discount is valid for your first{{period}} month.",RESUME_DISCOUNT_TEXT_ANNUAL:"Discount is valid for your first{{period}} year.",RESUME_BILLING_TEXT:"You\u2019ll be billed {{amount}} starting {{date}}.",FORM_BUTTON_LABEL:"Subscribe",SINGLE_PURCHASE_COPY:"Purchase",PAYPAL_BUTTON_LABEL:"Subscribe with PayPal",MINIMUM_TIME:"1 month minimum commitment if subscribers have downloaded any templates.",UNUSED_SUBSCRIPTION:"",UNUSED_SUBSCRIPTION_ANNUAL:"Unused portions of your subscription are refundable."},SUBSCRIPTION_VARIANT_INDIA:{SUBTITLE:"With this subscription you get unlimited mockup, design, logo and video downloads.",PRICE_LABEL_ANNUALY:"Annual Fee",RESUME_RENEW_TEXT_ANNUAL:"Your subscriptions will not auto renew, for further details, please contact your financial institution.",RESUME_CANCEL_TEXT:""},CURRENCY:"Prices in {{currency_label}}.",SUBSCRIPTION_TOTAL_DISCOUNT_LABEL:"Total First Month",DISCOUNT_LABEL:"Discount -{{discount}} off",VAT_LABEL:"VAT: {{vat}}%",RESUME_USD_TEXT:"All amounts are in {{currency_label}}.",TYPES:{PURCHASE:"purchase",SUBSCRIPTION:"subscription"},TEXT_SERVER_PAUSED_MESSAGE:' Please <a href="mailto:support@placeit.net">contact us</a> to unpause it',BILLING_VAT_TEXT:"({{totalAmount}} Subscription + {{vatAmount}} VAT)",BRAZIL_CURRENCY:"BRL",POLLING_TIMES:234,POLLING_DELAY:1e3,SAVINGS_COPY:"Save ",TEXT_SUBSCRIPTION_ACTIVATION_ERROR:"Your subscription could not be activated, Please try again later",TEXT_INVALID_OR_CANCELED_SUBSCRIPTION:"Invalid subscription or already canceled subscription",TEXT_ERROR_CHARGING_STORE_CARD:"There was an error charging your stored card. Please use another payment option.",PAYPAL_COPY_VARIANTS:"<strong>You will be taken to Paypal to authorize a<br> billing agreement.</strong><br><br>Customers with an EU or Australian Paypal billing address will have additional VAT or GST charges.<br><br>Please make sure pop-ups aren't blocked.",CSS_CLASS_HAS_ERROR:"has-error",CSS_CLASS_NOTIFICATION_ERROR:"notification_error",prototype:{purchaseRecord:null,paymentType:null,purchaseRecordPlans:{monthly:null,annual:null},plans:{monthly:null,annual:null},$paymentOptions:null,$errorContainer:null,$paypalMessageContainer:null,$vatMessage:null,$formContainer:null,$paypalOption:null,$savedCardOption:null,$closeBtn:null,$creditCardSubmitBtn:null,$payPalSubmitBtn:null,$savedCardSubmitBtn:null,$informationTitle:null,$informationSubtitle:null,$discountSection:null,$discountTextLabel:null,$discountAmountLabel:null,$priceTextLabel:null,$priceAmountLabel:null,$subtotalSection:null,$vatSection:null,$vatTextLabel:null,$vatAmountLabel:null,$totalTextLabel:null,$totalAmountLabel:null,$resumeInfo:null,$viewOrderDetail:null,$informationContainer:null,$subscriptionType:null,$subscriptionMonthly:null,$subscriptionAnnual:null,$subscriptionAnnualSave:null,$savedCardContainer:null,storedBillingInfo:null,hideSavedCardOption:!1,init:function init(e){$("[id='purchaseOverlay']").remove();var t=this;Widget.prototype.init.call(this,e),this.$subscriptionType=this.element.find(".subscriptionp-type-selector"),Helpers.App.isIndianUser()&&(this._updateTextConstantsForIndia(),this.$subscriptionType.hide()),this.currentCurrency=window.currencyHelper.getLabel(window.recurlyConfig.currency),this.currentCurrency===this.constructor.BRAZIL_CURRENCY&&this.element.find(".paypal_option").remove(),this.$paymentOptions=this.element.find(".payment_option"),this.$savedCardOption=this.getElement().find(".payment_option.saved_card_option"),this.$paypalOption=this.getElement().find(".payment_option.paypal_option"),this.$cardOption=this.getElement().find(".payment_option.card_option"),this.$errorContainer=this.element.find(".server_errors"),this.$paypalMessageContainer=this.element.find(".paypal"),this.$vatMessage=this.element.find("#tax-message"),this.$savedCardContainer=t.getElement().find(".saved-card-container"),this.$formContainer=this.element.find(".form-widget-container"),this.billingForm=new UI.BillingForm({name:"billingForm",accountRecord:this.purchaseRecord,withTitles:!1}),this.$closeBtn=this.element.find("button.close"),this.$savedCardSubmitBtn=this.element.find(".footer > #saved_card"),this.$creditCardSubmitBtn=this.element.find(".footer > #credit_card"),this.$payPalSubmitBtn=this.element.find(".footer > #paypal"),this.$informationTitle=this.element.find(".information-general-info>.information-title"),this.$informationSubtitle=this.element.find(".information-general-info>.information-title.subtitle"),this.$discountSection=this.element.find(".discount-section"),this.$discountTextLabel=this.element.find(".discount-section>.amount-text"),this.$discountAmountLabel=this.element.find(".discount-section .amount-price"),this.$discountAmountLabelDisclaimer=this.element.find(".discount-section .disclaimer"),this.$priceTextLabel=this.element.find(".price-section>.amount-text"),this.$priceAmountLabel=this.element.find(".price-section .amount-price"),this.$priceAmountLabelDisclaimer=this.element.find(".price-section .disclaimer"),this.$subtotalSection=this.element.find(".subtotal-section"),this.$subtotalAmountLabel=this.element.find(".subtotal-section>.amount-price"),this.$vatSection=this.element.find(".vat-section"),this.$vatTextLabel=this.element.find(".vat-section>.amount-text"),this.$vatAmountLabel=this.element.find(".vat-section .amount-price"),this.$vatAmountLabelDisclaimer=this.element.find(".vat-section .disclaimer"),this.$totalTextLabel=this.element.find(".total-section .amount-text"),this.$totalAmountLabel=this.element.find(".total-section .amount-price"),this.$totalAmountDisclaimer=this.element.find(".total-section .amount-container .disclaimer"),this.$resumeInfo=this.element.find(".resume-info"),this.$subscriptionMonthly=this.$subscriptionType.find(".plan-monthly"),this.$subscriptionAnnual=this.$subscriptionType.find(".plan-annual"),this.$subscriptionAnnualSavings=this.$subscriptionAnnual.find(".label"),this.$subscriptionAnnualSave=this.$subscriptionType.find(".plan-annual .annual-save"),this.storedBillingInfo=this.purchaseRecord.billing_info.lastFour||this.purchaseRecord.billing_info.paypalBillingAgreementId,this.$viewOrderDetail=this.element.find(".view-order-details"),this.$informationContainer=this.element.find(".information-container"),this.$paymentOptions=this.element.find(".payment_option"),this.$cardPriceIndicator=this.element.find(".card-price-copy"),this.$paypalPriceIndicator=this.element.find(".paypal-price-copy"),this.$informationAmount=this.element.find(".information-amount-info"),this.$billingForm=this.element.find(".recurly"),this.$choosePayment=this.element.find(".choose-payment-method"),this.$formCont=this.element.find(".form-container"),this.$chooseBack=this.element.find(".choose-back"),this.$paypalMessageBox=this.element.find(".paypal_message"),this.$modalDialog=this.element.find(".modal-dialog"),this.$modalContent=this.element.find(".modal-content"),t._modifyBillingInfoForm(),this.paymentType===this.constructor.TYPES.PURCHASE?this.$subscriptionType.addClass("hidden"):(Registry.Plans.get().forEach(function(e){switch(e.recurly_uuid){case Registry.Plans.PLAN_ANNUAL:t.plans.annual=e;break;case Registry.Plans.PLAN_MONTHLY:t.plans.monthly=e}}),this._updatePurchaseRecordPlan(this.purchaseRecord)),this.creditCardSubmitBtnText=null,this.vatAmount=0,this.appendChild(new UI.PayPalModal({name:"paypalModal"})),this._setBindings(),t.storedBillingInfo&&!t.hideSavedCardOption&&!1===Helpers.App.isGuestCheckoutExperimentActive()?(t.purchaseRecord.billing_info.paypalBillingAgreementId&&(t.$paymentOptions.find("> input").prop("checked",!1),t.$paypalOption.find("> input").prop("checked",!0),t._showPaypalOption()),t.$savedCardOption.css("display","flex"),t.$formContainer.addClass("saved-card-available"),t.$paymentOptions.find("> input").prop("checked",!1),t.$savedCardOption.find("> input").prop("checked",!0),t._updatedStoredCardInfo(),t._showSavedCardOption()):t._showCreditCardOption(),this.euCountries=Helpers.App.getEUCountries(),this._setAnnualPurchaseSavings(),this.updateBillingInfo(),this._renderCheckoutVariant()},_configureRecurly:_setBindings:function _setBindings(){var i=this;this.$closeBtn.one("click",i._closeEventHandler.bind(i)),i.element.bind("keyup",function(e){27===e.keyCode&&(i._closeEventHandler(e),i.element.unbind("keyup"))}),i.$choosePayment.bind("click",function(){i.$informationContainer.hide(),i.$formCont.show(),i.$closeBtn.appendTo(i.$chooseBack)}),i.$chooseBack.bind("click",function(){i.$informationContainer.show(),i.$formCont.hide(),i.$closeBtn.appendTo(i.element.find(".modal-body"))}),i.$paymentOptions.bind("click",function(){i.$paymentOptions.removeClass("selected"),i.$paymentOptions.find("> input").prop("checked",!1);var e=$(this);e.addClass("selected"),e.find("> input").prop("checked",!0),e.hasClass("saved_card_option")?i._showSavedCardOption():e.hasClass("paypal_option")?(i._showPaypalOption(),Helpers.GlobalEventTracker.purchasePayPalSwitch()):i._showCreditCardOption()});var e="mousedown";return i.$creditCardSubmitBtn.on("click",function(e){e.preventDefault()}),i.$payPalSubmitBtn.on("click",function(e){e.preventDefault()}),i.$creditCardSubmitBtn.on("click",,i.$payPalSubmitBtn.bind(e,i._paypalClickHandler.bind(i)),i.paypalModal.bind("paypal.success",function(e){var t=e.data;i.markFieldsAsValid(),i.hideServerErrors(),i.setParameters("token",t.id),i.submitTransaction().then(function(e){i._ajaxSuccessHandler(e),i._destroyOncePayPalHidden()})["catch"](}),i.paypalModal.bind("paypal.retry",,i.paypalModal.bind("paypal.reject",function(e){var t=e.data;i.displayServerErrors(t.message),Helpers.App.isGuestCheckoutExperimentActive()&&i._enableForm(),i._activateOncePayPalHidden()}),i.$creditCardSubmitBtn.on(e,i._submitEventHandler.bind(i)),i.$savedCardSubmitBtn.on(e,function(e){if(e.preventDefault(),window.isPastDue)this.deactivate(),Modals.Billing.unbindBillingInfoHide().setupUpdateCardModal(Modals.Billing._billingUpdateSuccessCallback);else{if(i._setLoadingCardForm(this.$savedCardSubmitBtn,!0),this.paymentType===this.constructor.TYPES.PURCHASE)return void i.dispatch("use-stored-billing-info");i._useStoredBillingInfo(i.purchaseRecord)}}.bind(this)),i.billingForm.bind("country.change",function(){i._updateVatInfo()}),i.billingForm.bind("vatNumber.change",,i.$viewOrderDetail.bind("click",,i.$subscriptionMonthly.bind("click",function(){i.dispatch("purchase.monthly.selected"),null!==i.purchaseRecordPlans.monthly&&i.purchaseRecordPlans.monthly.ajaxParams?i._updatePurchaseRecordPlan(i.purchaseRecordPlans.monthly):i.signRequestWithRecurly(i.plans.monthly,i.discount,function(e){i._onChangePeriodCallback(Registry.Plans.PLAN_MONTHLY,e)}),Helpers.GlobalEventTracker.subscriptionPlanSelected({old:"annual","new":"monthly",place:"payment_form"})}),i.$subscriptionAnnual.bind("click",function(){i.dispatch("purchase.annual.selected"),null!==i.purchaseRecordPlans.annual&&i.purchaseRecordPlans.annual.ajaxParams?i._updatePurchaseRecordPlan(i.purchaseRecordPlans.annual):i.signRequestWithRecurly(i.plans.annual,i.discount,,Helpers.GlobalEventTracker.subscriptionPlanSelected({old:"monthly","new":"annual",place:"payment_form"})}),i},_updateVatInfo:function _updateVatInfo(){var e=this.billingForm.getSelectedCountry().toUpperCase(),t=this.billingForm.getVatNumber();this._isEUCountry(e)?(this.billingForm.showVatField(),this._updateTaxRate(e,t)):(this.vatAmount=0,this.vatRate=0,this.billingForm.hideVatField(),this.updateBillingInfo())},_isEUCountry:function _isEUCountry(e){return-1!==this.euCountries.indexOf(e)},_onChangePeriodCallback:function _onChangePeriodCallback(e,t){var i,n,s;switch(i=null,n="",e){case Registry.Plans.PLAN_ANNUAL:n="Subscription:success:Unlimited:Annual";break;case Registry.Plans.PLAN_MONTHLY:n="Subscription:success:Unlimited"}Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyToPlan(e)&&(i=Helpers.CouponHelper.getCode()),s=EventTracker.info({type:n,data:{}});var r={ajaxUrl:"/subscriptions/{{token}}/transaction",ajaxParams:{plan_recurly_uuid:t.plan_recurly_uuid,coupon_code:i,eventData:s}};$.extend(!0,t,r),this._updatePurchaseRecordPlan(t)},_closeEventHandler:function _closeEventHandler(){Helpers.GlobalEventTracker.purchaseCanceled(),this.element.bind("hidden.bs.modal",bind(this))},_showPaypalOption:function showPaypalOption(){return this.hideServerErrors(),this.$creditCardSubmitBtn.hide(),this.$savedCardContainer.hide(),this.$savedCardSubmitBtn.hide(),this.$paypalMessageContainer.show(),this.$payPalSubmitBtn.show(),this.$payPalSubmitBtn.removeClass("disabled"),Helpers.App.isGuestCheckoutExperimentActive()&&!1===Boolean(Service.GuestCheckout.getInstance().getGuestEmail())&&this.$payPalSubmitBtn.addClass("disabled"),this.billingForm.hideFormFields(),this},_showCreditCardOption:function showCreditCardOption(){return this.hideServerErrors(),this.$paypalMessageContainer.hide(),this.$payPalSubmitBtn.hide(),this.$savedCardSubmitBtn.hide(),this.$savedCardContainer.hide(),this.$creditCardSubmitBtn.show(),this.$formContainer.css("display","block"),this.billingForm.showFormFields(),this},_showSavedCardOption:function showCreditCardOption(){return this.hideServerErrors(),this.$creditCardSubmitBtn.hide(),this.$paypalMessageContainer.hide(),this.$payPalSubmitBtn.hide(),this.billingForm.hideFormFields(),this.$savedCardContainer.show(),this.$savedCardSubmitBtn.show(),this},_submitEventHandler:function _submitEventHandler(e){e&&e.preventDefault();var t=this;this._setLoadingCardForm(this.$creditCardSubmitBtn,!0),this.hideServerErrors(),this.billingForm.getToken().then(function(e){t.billingForm.getContactData();t.setParameters("token",e.id),Helpers.App.isGuestCheckoutExperimentActive()&&(t.$bgSpinner.removeClass("hide"),t.$spinner.removeClass("hide")),t.submitTransaction().then(t._ajaxSuccessHandler.bind(t))["catch"](function(e){t._ajaxErrorhandler(e),t.billingForm.markInvalidBillingInfo(),t._setLoadingCardForm(t.$creditCardSubmitBtn,!1)})})["catch"](function(e){Helpers.App.isGuestCheckoutExperimentActive()&&$.extend(e,{label:"guestcheckout"}),Helpers.GlobalEventTracker.purchaseInvalidFields(e),t._setLoadingCardForm(t.$creditCardSubmitBtn,!1)})},_setLoadingCardForm:function _setLoadingCardForm(e,t){var i={"pointer-events":"none"},n={"pointer-events":"auto"};!0===t?(this.creditCardSubmitBtnText=e.html(),e.html(""),e.addClass("no-text-btn light-spinner"),e.css(i),this.billingForm.disableForm(),this.$subscriptionAnnual.css(i),this.$subscriptionMonthly.css(i),this.$paymentOptions.css(i),this.element.find('[type="radio"]:checked + label').addClass("disabled")):!1===t&&(e.html(this.creditCardSubmitBtnText),e.removeClass("no-text-btn light-spinner"),e.css(n),this.billingForm.enableForm(),this.$subscriptionAnnual.css(n),this.$subscriptionMonthly.css(n),this.$paymentOptions.css(n),this.element.find('[type="radio"]:checked + label').removeClass("disabled"))},_paypalClickHandler:function _paypalClickHandler(){if(!Helpers.App.isGuestCheckoutExperimentActive()||!this.$payPalSubmitBtn.hasClass("disabled")){this.deactivate(),this.paypalModal.activate();var e={description:this.purchaseRecord.description};this.paypalModal.initPayment(e)}},setParameters:function setParameters(e,t){var i,n,s,r=this.billingForm.getContactData();return i=r.firstName,n=r.lastName,s=r.email,i&&(this.purchaseRecord.ajaxParams.first_name=i),n&&(this.purchaseRecord.ajaxParams.last_name=n),s&&(this.purchaseRecord.ajaxParams.email=s),this.purchaseRecord.ajaxParams[e]=t,this},_disableModalClose:submitTransaction:function submitTransaction(){var e,t;this.element.bind("hide.bs.modal",this._disableModalClose);var i={url:e=this.purchaseRecord.ajaxUrl,type:"post",data:this.purchaseRecord.ajaxParams,dataType:"json"};i=Helpers.RequestConfig.prepareConfig(i);var n=PurchaseSupport.getRequestDataByUrl(e);return!0===(!0===(n&&n.isPollingEnabled))?(t={delay:this.constructor.POLLING_DELAY,times:this.constructor.POLLING_TIMES,pingURL:n.pingURL},Helpers.App.isGuestCheckoutExperimentActive()?P.ajax(i).then(Utils.bindFn(this)(this._saveGuestToken)).then(PurchaseSupport.buildPolling(t)):P.ajax(i).then(PurchaseSupport.buildPolling(t))):Helpers.App.isGuestCheckoutExperimentActive()?P.ajax(i).then(Utils.bindFn(this)(this._saveGuestToken)):P.ajax(i)},_saveGuestToken:function _saveGuestToken(e){return Boolean(e.guest_token)&&Service.GuestCheckout.getInstance().setToken(e.guest_token),e},validateFields:function validateFields(e){return this.markFieldsAsValid(),e.forEach(function(e){this.element.find("#recurly-"+e).parent().addClass("invalid")}.bind(this)),this},markFieldsAsValid:function markFieldsAsValid(){return this.element.find(".invalid").removeClass("invalid"),this},displayServerErrors:function displayServerErrors(e){var t=$('<div class="alert alert-danger alert-dismissible"></div>'),i=$('<div class="notification-icon"></div><span class="billing_error_message">'+e+'</span> <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>');return t.append(i),this.$errorContainer.append(t),this.$errorContainer.addClass("any"),this._addErrorClassName(),this},displayServerWarnings:function displayServerWarnings(e,t){var i=$('<div class="alert alert-warning alert-dismissible"></div>'),n=$('<div class="notification-icon"></div><span class="billing_error_message">'+e+"</span>");return t&&n.append(this.constructor.TEXT_SERVER_PAUSED_MESSAGE),i.append(n),i.append('<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>'),this.$errorContainer.append(i),this.$errorContainer.addClass("any"),this._addErrorClassName(),this},hideServerErrors:function hideServerErrors(){return this.$errorContainer.html(""),this.$errorContainer.removeClass("any"),this._removeErrorClassName(),this},_ajaxSuccessHandler:function _ajaxSuccessHandler(e){e.coupon&&(this.purchaseRecord.coupon=e.coupon),e.invoice_number&&(this.purchaseRecord.invoice_number=e.invoice_number),Helpers.App.isGuestCheckoutExperimentActive()&&(Helpers.App.getUser().id=e.user_id),Helpers.CouponHelper.markAsUsed(),this.element.unbind("hide.bs.modal",this._disableModalClose),this.dispatch("purchase.success",this.purchaseRecord),this.element.unbind("hidden.bs.modal").bind("hidden.bs.modal",function(){this.destroy()}.bind(this)),this.deactivate()},_ajaxErrorhandler:function _ajaxErrorhandler(e){var t=e.responseJSON,i="",n=!1,s=!1;t&&(i=t.message,n=t.is_paused,s=t.can_be_used);var r={message:i,status:0};this.element.unbind("hide.bs.modal",this._disableModalClose),"timeout"===e.error&&(r.status=408,r.message="Your transaction couldn't be processed at this moment, try again later."),422===e.status&&t&&t.error&&(r.message=t.error,r.status=e.status),Helpers.App.isGuestCheckoutExperimentActive()&&$.extend(r,{label:"guestcheckout"}),Helpers.GlobalEventTracker.purchaseCardDenied(r),this.dispatch("purchase.failed",r),!0===s?this.displayServerWarnings(r.message,n):this.displayServerErrors(r.message),Helpers.App.isGuestCheckoutExperimentActive()&&this._enableForm()},_destroyOncePayPalHidden:function _destroyOncePayPalHidden(){this.paypalModal.bind("paypal.deactivate",function(){this.destroy()}.bind(this)),this.paypalModal.deactivate()},_activateOncePayPalHidden:function _activateOncePayPalHidden(){var e=function e(){this.activate(),this.paypalModal.unbind("paypal.deactivate",e)}.bind(this);this.paypalModal.bind("paypal.deactivate",e),this.paypalModal.deactivate()},initPurchaseForm:initSubscriptionForm:function initSubscriptionForm(){return this.element.find(".subscription-info").html('            <select data-recurly="plan">            <option value="'+this.purchaseRecord.plan_recurly_uuid+'" selected> </option>            </select>            <input id="recurly-coupon" data-recurly="coupon">            '),this.element.find("#recurly-coupon").val(this.purchaseRecord.coupon_code),this.$savedCardSubmitBtn.find("span").html(this.getCardSubmitButtonCopy()),this.$cardPriceIndicator.html(this.getCardSubmitButtonCopy()),this.$paypalPriceIndicator.html(this.getPaypalSubmitButtonCopy()),this},_populateFields:function _populateFields(){return this},_updateTaxRate:function _updateTaxRate(e,t){var i,n;n=(i=this).purchaseRecord.amount_in_cents/100,i.getDiscount()&&(n=Helpers.CouponHelper.calculatePrice(n)),Helpers.Price.tax(e,n,t).then(function(e){i.vatAmount=n*e.rate,i.vatRate=100*e.rate,i.updateBillingInfo()})},_updatePurchaseRecordPlan:function _updatePurchaseRecordPlan(e){var t='input[type="radio"]',i=null;this.$subscriptionType.find(t).removeProp("checked"),this.$subscriptionType.children().removeClass("checked"),this.isAnnualSubscription(e)?(i=this.$subscriptionAnnual,this.purchaseRecordPlans.annual=e):(i=this.$subscriptionMonthly,this.purchaseRecordPlans.monthly=e),i.addClass("checked"),i.find(t).prop("checked",!0),this.purchaseRecord=e,this.billingForm.triggerChangeCountry()},activate:function activate(){return Widget.prototype.activate.call(this),this.element.modal({backdrop:"static",keyboard:!1},"show"),this},deactivate:function deactivate(){return this.element.modal("hide"),Widget.prototype.deactivate.call(this),this},render:function(e,t){return this.dispatch("purchase.open"),Widget.prototype.render.call(this,e,t),this.billingForm.render(this.$formContainer),this},updateBillingInfo:function updateBillingInfo(){var e=this,t=Helpers.StageType.getStageData(),i=this.getDiscount(),n=Helpers.CouponHelper.getDuration(),s=window.currencyHelper.getSymbol(recurlyConfig.currency),r=e.getTotalPrice(i,e.vatAmount),a=e.setVat(e.vatAmount,r),o=Helpers.App.getCheckoutVersion();switch(e.$resumeInfo.empty(),e.$cardPriceIndicator=e.element.find(".card-price-copy"),e.$paypalPriceIndicator=e.element.find(".paypal-price-copy"),e.paymentType){case e.constructor.TYPES.SUBSCRIPTION:e.$informationTitle.text(e.constructor.SUBSCRIPTION.TITLE),e.$informationSubtitle.text(e.constructor.SUBSCRIPTION.SUBTITLE),!0===e.isAnnualSubscription()?(e.$priceTextLabel.text(e.constructor.SUBSCRIPTION.PRICE_LABEL_ANNUALY),"D"===o&&e.$informationAmount.css("order","2")):(e.$priceTextLabel.text(e.constructor.SUBSCRIPTION.PRICE_LABEL_MONTHLY),"D"===o&&e.$informationAmount.css("order","4")),e._setAnnualSubscriptionSave();break;case e.constructor.TYPES.PURCHASE:e.$informationTitle.text(t.meta_title),e.$informationSubtitle.text(""),e.$priceTextLabel.text(e.constructor.PURCHASE.PRICE_LABEL)}e.$priceAmountLabel.text(s+e._fixNumberFormat(e.purchaseRecord.amount_in_cents/100,2)),e.$cardPriceIndicator.html(e.getCardSubmitButtonCopy()),e.$paypalPriceIndicator.html(e.getPaypalSubmitButtonCopy()),e.$totalAmountDisclaimer.html(e.getTotalDisclaimerCopy()),!0===e.isAnnualSubscription()&&0===a?(e.$priceAmountLabelDisclaimer.attr("style","display: inline-block;"),e.$priceAmountLabelDisclaimer.first().text("("+s+e._fixNumberFormat(r/12,2))):e.$priceAmountLabelDisclaimer.hide(),e.setDiscount(i,r,a),"subscription"===e.paymentType&&e._setPlanSelectorLabelDiscount(i),e.updateBillingResume(i,n,a,r)},updateBillingResume:function updateBillingResume(e,t,i,n){var s=this,r=0;if(e)var a=Helpers.CouponHelper.calculatePrice(s.purchaseRecord.amount_in_cents/100);else a=s.purchaseRecord.amount_in_cents/100;var o=2,l=new Date,c=new Date(l.setMonth(l.getMonth()+r)),u=$.datepicker.formatDate("M. dd, yy",c),d=s._getBillingVatText(i,a,o),h=currencyHelper.getSymbol(recurlyConfig.currency);s.constructor.SUBSCRIPTION.UNUSED_SUBSCRIPTION;if(e&&s.paymentType===s.constructor.TYPES.SUBSCRIPTION){var p="";1<t.length&&(p=" "+t.length),r="single_use"===t.type?s.purchaseRecord.plan_recurly_uuid===Registry.Plans.PLAN_ANNUAL?12:1:t.length,"forever"===t.type&&(a=Helpers.CouponHelper.calculatePrice(a)),a=s._fixNumberFormat(a+i,o)
;var f=s.constructor.SUBSCRIPTION.RESUME_DISCOUNT_TEXT;!0===s.isAnnualSubscription()&&(f=s.constructor.SUBSCRIPTION.RESUME_DISCOUNT_TEXT_ANNUAL),s.$resumeInfo.append("<p>"+f.replace("{{period}}"," "+p)+"</p>")}if(s.paymentType===s.constructor.TYPES.SUBSCRIPTION){s.$resumeInfo.append("<p>"+s.constructor.SUBSCRIPTION.RESUME_BILLING_TEXT.replace("{{amount}}",h+s._fixNumberFormat(n,2)+d).replace("{{date}}",u)+"</p>");var g=s.constructor.SUBSCRIPTION.RESUME_RENEW_TEXT;!0===s.isAnnualSubscription()&&(g=s.constructor.SUBSCRIPTION.RESUME_RENEW_TEXT_ANNUAL,s.constructor.SUBSCRIPTION.UNUSED_SUBSCRIPTION_ANNUAL),g=g.replaceAll("{{currency_label}}",currencyHelper.getLabel(recurlyConfig.currency)),s.$resumeInfo.append("<p>"+g+"</p><br />"),s.$resumeInfo.append('<p class="inline bold">'+s.constructor.SUBSCRIPTION.RESUME_CANCEL_TEXT+"</p>")}else s.$resumeInfo.append('<p class="inline">'+s.constructor.CURRENCY+"</p>")},_getBillingVatText:function _updateBillingVatText(e,t,i){var n=this,s=currencyHelper.getSymbol(recurlyConfig.currency),r="";return e&&(r=n.constructor.BILLING_VAT_TEXT.replace("{{totalAmount}}",s+n._fixNumberFormat(t,i)).replace("{{vatAmount}}",s+n._fixNumberFormat(e,2))),r},setDiscount:function setDiscount(e,t,i){var n=this,s=0,r=0,a=n.purchaseRecord.amount_in_cents/100,o=window.currencyHelper.getSymbol(recurlyConfig.currency);return 0===e?(n.$discountSection.css({display:"none"}),0):(n.$discountSection.css({display:"flex"}),r=a-(s=a-Helpers.CouponHelper.calculatePrice(a)),n.$discountTextLabel.text(n.constructor.DISCOUNT_LABEL.replace("{{discount}}",e.label)),n.$discountAmountLabel.text("-"+o+n._fixNumberFormat(s,2)),n.$subtotalAmountLabel.text(o+n._fixNumberFormat(r,2)),n.isAnnualSubscription()&&0===i?(n.$discountAmountLabelDisclaimer.attr("style","display: inline-block;"),n.$discountAmountLabelDisclaimer.first().text("("+o+n._fixNumberFormat(t/12,2)),n.$priceAmountLabelDisclaimer.hide()):n.$discountAmountLabelDisclaimer.hide(),s)},getDiscount:function getDiscount(){var e=!1===Helpers.CouponHelper.exists()||!1===Helpers.CouponHelper.isValid(),t=this.paymentType===this.constructor.TYPES.SUBSCRIPTION&&!1===Helpers.CouponHelper.applyToPlan(this.purchaseRecord.plan_recurly_uuid),i=this.paymentType===this.constructor.TYPES.PURCHASE&&!1===Helpers.CouponHelper.applyTo(Helpers.CouponHelper.TYPE_SINGLE_PURCHASE);return e||t||i?0:Helpers.CouponHelper.getDiscount()},setVat:function setVat(e,t){var i=this,n=window.currencyHelper.getSymbol(recurlyConfig.currency);return 0===e?(i.$subtotalSection.css({display:"none"}),i.$vatSection.css({display:"none"}),0):(i.getDiscount()&&!1===i.isAnnualSubscription()?i.$subtotalSection.css({display:"flex"}):i.$subtotalSection.css({display:"none"}),i.$vatSection.css({display:"flex"}),i.$vatTextLabel.text(i.constructor.VAT_LABEL.replace("{{vat}}",i.vatRate)),i.$vatAmountLabel.text("+"+n+i._fixNumberFormat(e,2)),!0===i.isAnnualSubscription()?(i.$priceAmountLabelDisclaimer.hide(),i.$discountAmountLabelDisclaimer.hide(),i.$vatAmountLabelDisclaimer.attr("style","display: inline-block;"),i.$vatAmountLabelDisclaimer.first().text("("+n+i._fixNumberFormat(t/12,2))):i.$vatAmountLabelDisclaimer.hide(),e)},_fixNumberFormat:function _fixNumberFormat(e,t){return Number(e).toFixed(t)},getTotalPrice:function getTotalPrice(e,t){var i=this,n=this.constructor.PURCHASE.TOTAL_LABEL,s=i.purchaseRecord.amount_in_cents/100,r=Helpers.CouponHelper.getDuration(),a=0,o=window.currencyHelper.getSymbol(recurlyConfig.currency),l=Helpers.App.getCheckoutVersion();return e&&e.amount&&(a=s-Helpers.CouponHelper.calculatePrice(s)),i.paymentType===i.constructor.TYPES.SUBSCRIPTION&&(n=i._getSubscriptionTotalLabel(),!0!==i.isAnnualSubscription()&&e&&("temporal"===r.type?n+=" "+i.constructor.SUBSCRIPTION.TOTAL_WITH_MONTH.replace("{{period}}"," "+r.length):n=i.constructor.SUBSCRIPTION_TOTAL_DISCOUNT_LABEL)),"A"===l||""===l?i.$totalTextLabel.text(n):i.$totalTextLabel.text("Billed Today"),s=s-a+t,i.$totalAmountLabel.text(o+i._fixNumberFormat(s,2)),s},_getSubscriptionTotalLabel:function _getSubscriptionTotalLabel(){var e=this,t=e.constructor.SUBSCRIPTION.TOTAL_LABEL;return!0===e.isAnnualSubscription()&&(t=e.constructor.SUBSCRIPTION.TOTAL_ANNUAL_LABEL),t},isAnnualSubscription:function isAnnualSubscription(e){return(e||this.purchaseRecord).plan_recurly_uuid===Registry.Plans.PLAN_ANNUAL},_isMonthlyCoupon:function _isMonthlyCoupon(){return Helpers.CouponHelper.applyToPlan(Registry.Plans.PLAN_MONTHLY)},_isAnnualCoupon:_setPlanSelectorLabelDiscount:function _setPlanSelectorLabelDiscount(){var t=this,e=window.currencyHelper.getSymbol(recurlyConfig.currency);null!==t.purchaseRecordPlans.annual&&t.purchaseRecordPlans.annual.ajaxParams||t.signRequestWithRecurly(t.plans.annual,t.discount,function(){}),null!==t.purchaseRecordPlans.monthly&&t.purchaseRecordPlans.monthly.ajaxParams||t.signRequestWithRecurly(t.plans.monthly,t.discount,function(e){t._onChangePeriodCallback(Registry.Plans.PLAN_MONTHLY,e),t._updatePurchaseRecordPlan(t.purchaseRecordPlans.annual)}),this._isAnnualCoupon()&&t.$subscriptionAnnual.find("p span.label").text("BEST VALUE"),annualTotal=this._getPlanPrice(Registry.Plans.get(Registry.Plans.PLAN_ANNUAL)),t.$subscriptionAnnual.find("p span.amount-price").text(e+t._fixNumberFormat(annualTotal/12,2)),monthlyTotal=this._getPlanPrice(Registry.Plans.get(Registry.Plans.PLAN_MONTHLY)),t.$subscriptionMonthly.find("p span.amount-price").text(e+t._fixNumberFormat(monthlyTotal,2))},_getPlanPrice:function _getPlanPrice(e){var t=e.amount_in_cents/100,i=t;return this._isMonthlyCoupon()&&!e.is_annual&&(i=Helpers.CouponHelper.calculatePrice(t)),this._isAnnualCoupon()&&e.is_annual&&(i=Helpers.CouponHelper.calculatePrice(t)),i},_modifyBillingInfoForm:function _modifyBillingInfoForm(){var e=this,t=e.element.find(".recurly .payment_method");e.billingForm.moveContactInfoAfter(t),Helpers.App.isMobile()&&e.$informationContainer.toggleClass("active")},destroy:function destroy(){this.$paymentOptions=null,this.$errorContainer=null,this.$paypalMessageContainer=null,this.fieldsContainer=null,this.contactInfoContainer=null,this.firstNameElement=null,this.lastNameElement=null,this.emailElement=null,this.$closeBtn=null,this.$creditCardSubmitBtn=null,this.$payPalSubmitBtn=null,this.billingForm&&this.billingForm.destroy(),this.dispatch("purchase.closed"),Widget.prototype.destroy.call(this)},_setAnnualSubscriptionSave:function _setAnnualSubscriptionSave(){var e,t;(e=this._getPlanPrice(Registry.Plans.PLAN_ANNUAL)).withDiscount?t=this._calculateAnnualSavePercent(e.withDiscount):(t=this._calculateAnnualSavePercent(e.original),t=parseInt(t)),this.$subscriptionAnnualSave.text(t)},_updateTextConstantsForIndia:function _updateTextConstantsForIndia(){this.constructor.SUBSCRIPTION=Object.assign(this.constructor.SUBSCRIPTION,this.constructor.SUBSCRIPTION_VARIANT_INDIA)},_updatedStoredCardInfo:function _updatedStoredCardInfo(){var e=this,t=e.purchaseRecord.billing_info.cardType.toLowerCase();e.$savedCardContainer.find(".card").addClass(t),e.$savedCardContainer.find(".card-last-four").text(e.storedBillingInfo)},getEventTrackerName:function getEventTrackerName(){var e;switch(e="Subscription:success:",this.period){case this.PERIOD_MONTHLY:e+="Unlimited";break;case this.PERIOD_ANNUAL:e+="Unlimited:Annual"}return e},getCardSubmitButtonCopy:function getCardSubmitButtonCopy(){var e=Helpers.App.getCheckoutVersion();return"purchase"===this.paymentType?this.constructor.SUBSCRIPTION.SINGLE_PURCHASE_COPY:"B"===e?this.constructor.SUBSCRIPTION.FORM_BUTTON_LABEL+": "+this._getFormattedAmountCopy():"C"===e?!0===this.isAnnualSubscription(this.purchaseRecord)?this.constructor.SUBSCRIPTION.FORM_BUTTON_LABEL+" Annually ("+this._getFormattedAmountCopy()+")":this.constructor.SUBSCRIPTION.FORM_BUTTON_LABEL+" Monthly ("+this._getFormattedAmountCopy()+")":"D"===e?this.constructor.SUBSCRIPTION.FORM_BUTTON_LABEL+": "+this._getFormattedAmountCopy():this.constructor.SUBSCRIPTION.FORM_BUTTON_LABEL},getTotalDisclaimerCopy:function getTotalDisclaimerCopy(){var e=Helpers.App.getCheckoutVersion();return"A"===e||""===e||"purchase"===this.paymentType?"(Billed Today)":!0===this.isAnnualSubscription(this.purchaseRecord)?"(Total Per Year)":"(Total Per Month)"},getPaypalSubmitButtonCopy:function getPaypalSubmitButtonCopy(){var e=Helpers.App.getCheckoutVersion();return"purchase"===this.paymentType?this.constructor.SUBSCRIPTION.PAYPAL_BUTTON_LABEL:"B"===e?this.constructor.SUBSCRIPTION.PAYPAL_BUTTON_LABEL+": "+this._getFormattedAmountCopy():"C"===e?(this.isAnnualSubscription(this.purchaseRecord),this.constructor.SUBSCRIPTION.PAYPAL_BUTTON_LABEL+" ("+this._getFormattedAmountCopy()+")"):"D"===e?this.constructor.SUBSCRIPTION.PAYPAL_BUTTON_LABEL+": "+this._getFormattedAmountCopy():this.constructor.SUBSCRIPTION.PAYPAL_BUTTON_LABEL},_getFormattedAmountCopy:function _getFormattedAmountCopy(){return window.currencyHelper.getSymbol(recurlyConfig.currency)+this._fixNumberFormat(this.purchaseRecord.amount_in_cents/100,2)},_addErrorClassName:function _addErrorClassName(){Helpers.App.isMobile()&&(this.element.addClass(this.constructor.CSS_CLASS_HAS_ERROR),this.$modalDialog.addClass(this.constructor.CSS_CLASS_HAS_ERROR)),this.$modalContent.addClass(this.constructor.CSS_CLASS_NOTIFICATION_ERROR)},_removeErrorClassName:function _removeErrorClassName(){Helpers.App.isMobile()&&(this.element.removeClass(this.constructor.CSS_CLASS_HAS_ERROR),this.$modalDialog.removeClass(this.constructor.CSS_CLASS_HAS_ERROR)),this.$modalContent.removeClass(this.constructor.CSS_CLASS_NOTIFICATION_ERROR)},_renderCheckoutVariant:function _renderCheckoutVariant(){if("purchase"!==this.paymentType){switch(Helpers.App.getCheckoutVersion()){case"B":this.element.addClass("variant-b"),this.$paypalMessageBox.html(this.constructor.PAYPAL_COPY_VARIANTS);break;case"C":this.element.addClass("variant-c"),this.$paypalMessageBox.html(this.constructor.PAYPAL_COPY_VARIANTS);break;case"D":this.element.addClass("variant-d"),this.$paypalMessageBox.html(this.constructor.PAYPAL_COPY_VARIANTS),this.$informationAmount.appendTo(this.$subscriptionType),!1===Helpers.App.isMobile()&&(this.$paypalOption.appendTo(this.$billingForm),this.$cardOption.appendTo(this.$billingForm));break;default:return}!0===Helpers.App.isMobile()&&this.$closeBtn.appendTo(this.element.find(".modal-body"))}},_setAnnualPurchaseSavings:function _setAnnualPurchaseSavings(){var e=Registry.Plans.get(Registry.Plans.PLAN_MONTHLY),t=Registry.Plans.get(Registry.Plans.PLAN_ANNUAL),i=Helpers.Price.getAnnualPurchaseSavings(t,e);this.$subscriptionAnnualSavings.text(this.constructor.SAVINGS_COPY+i+"%")},syncCouponRequestData:function syncCouponRequestData(){var e=null,t=this.purchaseRecord.ajaxParams.plan_recurly_uuid;Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyToPlan(t)&&(e=Helpers.CouponHelper.getCode()),this.purchaseRecord.ajaxParams.coupon_code=e}}}),Class(UI,"MultiplePurchaseOverlay").inherits(UI.PurchaseOverlay)({html:'    <div class="modal purchase-overlay multiple fade" id="purchaseOverlay" tabindex="-1" role="dialog" aria-labelledby="purchaseOverlayLabel" aria-hidden="true">    <button type="button" class="close m-close" data-dismiss="modal" aria-hidden="true">    <span aria-hidden="true">\xd7</span>    </button>    <div class="server_errors none mobile"></div>    <div class="modal-dialog">    <div class="server_errors none"></div>    <div class="modal-content">    <div class="modal-body">    <div class="text-center modal-spinner" style="opacity:0.5;margin-top: 60px;">    <img src="/assets/fade-spinner.gif">    </div>    <div class="form-container">    <form class="recurly">    <div class="subscription-info" style="display: none;"></div>    <div class="payment_method multiple">    <div class="payment_option saved_card_option selected">    <input type="radio" name="payment_method">    <label></label>    <div class="card_logo"></div>    </div>    <div class="payment_option card_option">    <input type="radio" name="payment_method" checked>    <label></label>    <div class="accepted_cards">    <div class="card visa">Visa</div>    <div class="card mastercard">MasterCard</div>    <div class="card discover">Discover</div>    <div class="card american_express">American Express</div>    </div>    </div>    <div class="payment_option paypal_option">    <input type="radio" name="payment_method">    <label></label>    <div class="logo"></div>    </div>    </div>    <div class="saved-card-container">    <span>Use saved card</span>    <div class="saved-card-info">    <div class="card"></div>    <span>Ending with ****</span>    <div class="card-last-four"></div>    </div>    </div>    <div class="form-widget-container"></div>    <div class="paypal" style="display: none;">    <div class="paypal_message">    You will be taken to PayPal to authorize a billing agreement.<br><br>Customers with an EU or Australian Paypal billing address will have additional VAT or GST charges.<br><br><strong>Please make sure pop-ups aren\'t blocked.</strong>    </div>    </div>    <div class="footer">    <button id="saved_card" type="submit" class="button primary">    <span> Purchase </span>    </button>    <button id="credit_card" type="submit" class="button primary">    <span> Purchase </span>    </button>    <button id="paypal" style="display: none;" type="button" class="button primary">    <span> Pay with PayPal </span>    </button>    </div>    </form>    </div>    <div class="information-container">    <p class="information-title">    Order Summary    <span class="view-order-details">view order details</span>    <span class="view-order-details opened">hide order details</span>    <span class="view-order-total-items"></span>    </p>    <div class="information-general-info">    <div class="thumbnails-list"></div>    <p class="information-title"></p>    <p class="information-title subtitle"></p>    </div>    <div class="subscriptionp-type-selector">    <div class="plan-annual inline-label">    <input type="radio" name="plan-annual">    <label></label>    <p>Annual (<span class="amount-price">$7.47</span>/mo<span class="disclaimer">*</span>) <span class="label">Save 50%</span></p>    </div>    <div class="plan-monthly inline-label">    <input type="radio" name="plan-monthly">    <label></label>    <p>Monthly (<span class="amount-price">$14.95</span>/mo<span class="disclaimer">*</span>)</p>    </div>    </div>    <div class="information-amount-info">    <div class="amount price-section">    <p class="amount-text"></p>    <div class="amount-container">    <p class="amount-price"></p>    <p class="disclaimer price"></p><p class="disclaimer">&nbsp;per month)</p>    </div>    </div>    <div class="amount discount-section">    <p class="amount-text"></p>    <div class="amount-container">    <p class="amount-price"></p>    <p class="disclaimer price"></p><p class="disclaimer">&nbsp;per month)</p>    </div>    </div>    <hr>    <div class="amount subtotal-section">    <p class="amount-text">Subtotal</p>    <p class="amount-price">0</p>    </div>    <div class="amount vat-section">    <p class="amount-text"></p>    <div class="amount-container">    <p class="amount-price"></p>    <p class="disclaimer price"></p><p class="disclaimer">&nbsp;per month)</p>    </div>    </div>    <div class="amount total-section">    <div class="amount-container">        <p class="amount-text total"></p>        <p class="disclaimer"></p>    </div>    <div class="amount-container">    <p class="amount-price"></p>    <p class="disclaimer">(Billed Today)</p>    </div>    </div>    </div>    <div class="resume-info"></div>    <div class="secure-info">    <img src="/assets/icons/lock.svg">    <div class="secure-info-disclaimer">    <p class="secure-info-header">Secure Payments</p>    <p>All transaction are processed</p>    <p>by our secure technology.</p>    </div>    </div>    </div>    </div>    </div>    </div>    </div>    ',PURCHASE:{PRICE_LABEL:"Price",TOTAL_LABEL:"Total",BILLED_INFO_LABEL:"You\u2019ll be billed {{total_amount}} in {{currency_label}}"},prototype:{$priceSection:null,$totalTextLabel:null,$totalItemsLabel:null,$thumbnailsList:null,$viewOrderTotalItems:null,_multiplePurchaseService:null,_thumbnailsController:null,init:function init(e){Widget.prototype.init.call(this,e),this._multiplePurchaseService=Service.MultiplePurchase.getInstance(),this.$priceSection=this.getElement().find(".price-section"),this.$totalItemsLabel=this.getElement().find(" .total-section > .amount-container:first-child .disclaimer"),this.$thumbnailsList=this.getElement().find(".information-general-info>.thumbnails-list"),this.$viewOrderTotalItems=this.getElement().find(".information-container .view-order-total-items"),this.$totalTextLabel=this.element.find(".total-section .amount-container>.amount-text.total"),UI.PurchaseOverlay.prototype.init.call(this,e),this.element.on("hidden.bs.modal",Utils.bindFn(this)(this._hiddeModalHandler))},_hiddeModalHandler:function _hiddeModalHandler(){this._multiplePurchaseService.deleteAfterLoginCookie()},getMultiPurchaseService:function getMultiPurchaseService(){return this._multiplePurchaseService},updateBillingInfo:function updateBillingInfo(){var e=this,t=(Helpers.StageType.getStageData(),this.getDiscount()),i=Helpers.CouponHelper.getDuration(),n=window.currencyHelper.getSymbol(recurlyConfig.currency),s=e.getTotalPrice(t,e.vatAmount),r=e.setVat(e.vatAmount,s);switch(e.$resumeInfo.empty(),e.paymentType){case e.constructor.TYPES.SUBSCRIPTION:e.$informationTitle.text(e.constructor.SUBSCRIPTION.TITLE),e.$informationSubtitle.text(e.constructor.SUBSCRIPTION.SUBTITLE),!0===e.isAnnualSubscription()?e.$priceTextLabel.text(e.constructor.SUBSCRIPTION.PRICE_LABEL_ANNUALY):e.$priceTextLabel.text(e.constructor.SUBSCRIPTION.PRICE_LABEL_MONTHLY),e._setAnnualSubscriptionSave();break;case e.constructor.TYPES.PURCHASE:!1===Boolean(e._thumbnailsController)&&e.$informationSubtitle.text(""),e.$priceTextLabel.text(e.constructor.PURCHASE.PRICE_LABEL);var a=" Item",o=null,l=e.getMultiPurchaseService().isMultiplePurchase()&&1<e.getMultiPurchaseService().countSelected();if(o="1 "+a,!1===Boolean(e._thumbnailsController)&&(e.$priceSection.hide(),e.$informationTitle.text(""),e.$thumbnailsList.html("")),l&&(a=" Items"),e.getMultiPurchaseService().isMultiplePurchase()&&(o=e.getMultiPurchaseService().countSelected()+a),e.$viewOrderTotalItems.html(o),e.$totalItemsLabel.html("("+o+")"),Boolean(e._thumbnailsController))return;var c=e.getMultiPurchaseService().getSelectedDataObjects();!1===e.getMultiPurchaseService().isMultiplePurchase()&&(c=[e.getMultiPurchaseService().getByIndex(0)]),e._thumbnailsController=new Controller.SummaryThumbnails({currencySymbol:n,stagesList:c}),e.$thumbnailsList.append(e._thumbnailsController.getThumbnailsListView()),e._hideSummaryThumbnailInVideo()}e.$priceAmountLabel.text(n+e._fixNumberFormat(e.purchaseRecord.amount_in_cents/100,2)),!0===e.isAnnualSubscription()&&0===r?(e.$priceAmountLabelDisclaimer.attr("style","display: inline-block;"),e.$priceAmountLabelDisclaimer.first().text("("+n+e._fixNumberFormat(s/12,2))):e.$priceAmountLabelDisclaimer.hide(),e.setDiscount(t,s,r),"subscription"===e.paymentType&&e._setPlanSelectorLabelDiscount(t),e.updateBillingResume(t,i,r,s)},updateBillingResume:function updateBillingResume(e,t,i,n){var s=this,r=0;if(e)var a=Helpers.CouponHelper.calculatePrice(s.purchaseRecord.amount_in_cents/100);else a=s.purchaseRecord.amount_in_cents/100;var o=2,l=new Date,c=new Date(l.setMonth(l.getMonth()+r)),u=$.datepicker.formatDate("M. dd, yy",c),d=s._getBillingVatText(i,a,o),h=currencyHelper.getSymbol(recurlyConfig.currency);s.constructor.SUBSCRIPTION.UNUSED_SUBSCRIPTION;if(e&&s.paymentType===s.constructor.TYPES.SUBSCRIPTION){var p="";1<t.length&&(p=" "+t.length),r="single_use"===t.type?s.purchaseRecord.plan_recurly_uuid===Registry.Plans.PLAN_ANNUAL?12:1:t.length,"forever"===t.type&&(a=Helpers.CouponHelper.calculatePrice(a)),a=s._fixNumberFormat(a+i,o);var f=s.constructor.SUBSCRIPTION.RESUME_DISCOUNT_TEXT;!0===s.isAnnualSubscription()&&(f=s.constructor.SUBSCRIPTION.RESUME_DISCOUNT_TEXT_ANNUAL),s.$resumeInfo.append("<p>"+f.replace("{{period}}"," "+p)+"</p>")}if(s.paymentType===s.constructor.TYPES.SUBSCRIPTION){s.$resumeInfo.append("<p>"+s.constructor.SUBSCRIPTION.RESUME_BILLING_TEXT.replace("{{amount}}",h+s._fixNumberFormat(n,2)+d).replace("{{date}}",u)+"</p>");var g=s.constructor.SUBSCRIPTION.RESUME_RENEW_TEXT;!0===s.isAnnualSubscription()&&(g=s.constructor.SUBSCRIPTION.RESUME_RENEW_TEXT_ANNUAL,s.constructor.SUBSCRIPTION.UNUSED_SUBSCRIPTION_ANNUAL),g=g.replaceAll("{{currency_label}}",currencyHelper.getLabel(recurlyConfig.currency)),s.$resumeInfo.append("<p>"+g+"</p><br />"),s.$resumeInfo.append('<p class="inline bold">'+s.constructor.SUBSCRIPTION.RESUME_CANCEL_TEXT+"</p>")}if(s.paymentType!==s.constructor.TYPES.SUBSCRIPTION){var m=s.constructor.PURCHASE.BILLED_INFO_LABEL.replace("{{total_amount}}",h+s._fixNumberFormat(a+i,2)).replace("{{currency_label}}",currencyHelper.getLabel(recurlyConfig.currency));s.$resumeInfo.append('<p class="billed-label">'+m+"</p><br/>")}},getTotalPrice:function getTotalPrice(e,t){var i=this,n=this.constructor.PURCHASE.TOTAL_LABEL,s=i.purchaseRecord.amount_in_cents/100,r=Helpers.CouponHelper.getDuration(),a=0,o=window.currencyHelper.getSymbol(recurlyConfig.currency);return i.paymentType!==i.constructor.TYPES.SUBSCRIPTION&&i.getMultiPurchaseService().isMultiplePurchase()&&(s=i.getMultiPurchaseService().getSelectedTotalPrice()),e&&e.amount&&(a=s-Helpers.CouponHelper.calculatePrice(s)),i.paymentType===i.constructor.TYPES.SUBSCRIPTION&&(n=i._getSubscriptionTotalLabel(),!0!==i.isAnnualSubscription()&&e&&("temporal"===r.type?n+=" "+i.constructor.SUBSCRIPTION.TOTAL_WITH_MONTH.replace("{{period}}"," "+r.length):n=i.constructor.SUBSCRIPTION_TOTAL_DISCOUNT_LABEL)),i.$totalTextLabel.text(n),s=s-a+t,i.$totalAmountLabel.text(o+i._fixNumberFormat(s,2)),s},_hideSummaryThumbnailInVideo:function _hideSummaryThumbnailInVideo(){var e=this;Helpers.StageType&&Helpers.StageType.isVideo()&&(e.getElement().find(".summary-thumbnail > img").addClass("is-video"),e.getElement().find(".summary-thumbnail .data-container").addClass("is-video"))}}}),Class(UI,"YggdrasilPurchaseOverlay").inherits(UI.MultiplePurchaseOverlay)({prototype:{init:function init(e){Widget.prototype.init.call(this,e),UI.MultiplePurchaseOverlay.prototype.init.call(this,e)},activate:function activate(){var e=Service.MultiplePurchase.getInstance();return Widget.prototype.activate.call(this),this.element.modal("show"),e.cloneThumbnails(),e.replaceThumbnails($(".information-general-info .thumbnails-list")),e.centerThumbnailsHorizontally({scale:"1.2",container:$(".thumbnails-list .stage_wrapper")}),this},_submitEventHandler:function _submitEventHandler(e){e.preventDefault();var s=this;this._setLoadingCardForm(this.$creditCardSubmitBtn,!0),this.hideServerErrors(),this.billingForm.getToken().then(function(e){s.setParameters("token",e.id);var t=Service.MultiplePurchase.getInstance();t.showDownloadLoader(),t.getDesignPlanManager().prepareUIJSON().then(function(){if(t.isMultiplePurchase()){url="/purchases/{{token}}/multi_purchase_transaction";var i=[],n=[];t.getSelectedDataObjects().forEach(function(e,t){i.push({type:e.type,stage_id:e.id}),n.push(JSON.parse(e.designPlan)),Boolean(n[t])&&delete n[t].previewImage}),_stageId=JSON.stringify(i),s.purchaseRecord.ajaxParams.stage_id=_stageId,s.purchaseRecord.ajaxParams.designPlan=JSON.stringify(n)}s.submitTransaction().then(s._ajaxSuccessHandler.bind(s))["catch"](function(e){s._ajaxErrorhandler(e),s.billingForm.markInvalidBillingInfo(),s._setLoadingCardForm(s.$creditCardSubmitBtn,!1)})})["catch"](function(e){throw new Error(JSON.stringify(e))})})["catch"](function(e){Helpers.GlobalEventTracker.purchaseInvalidFields(e),s._setLoadingCardForm(s.$creditCardSubmitBtn,!1)})}}}),Class("WidgetFactory")({buildPurchaseOverlay:function buildPurchaseOverlay(e){return new UI.PurchaseOverlay(e)},buildPurchaseGuestOverlay:function buildPurchaseGuestOverlay(e){return new UI.PurchaseGuestOverlay(e)},buildSinglePurchase:function buildSinglePurchase(e){return new UI.SinglePurchasesModal(e)},buildSinglePurchaseVarB:function buildSinglePurchaseVarB(e){return new UI.SinglePurchaseVarB(e)},buildPurchaseOverlayMultiple:function buildPurchaseOverlayMultiple(e){return new UI.MultiplePurchaseOverlay(e)},buildPurchaseOverlayYggdrasil:function buildPurchaseOverlayYggdrasil(e){return new UI.YggdrasilPurchaseOverlay(e)}}),Class("PurchaseWidgetStrategy")({PurchaseOverlay:"buildPurchaseOverlay",PurchaseGuestOverlay:"buildPurchaseGuestOverlay",purchaseOverlayMultiple:"buildPurchaseOverlayMultiple",purchaseOverlayYggdrasil:"buildPurchaseOverlayYggdrasil",prototype:{init:function(e){e===PurchaseWidgetStrategy.PurchaseOverlay?this.strategyName=this._getCheckoutExperimentVariant():this.strategyName=e},_getCheckoutExperimentVariant:function _getCheckoutExperimentVariant(){var e=PurchaseWidgetStrategy.PurchaseOverlay,t=Helpers.App.isMerchPreviewEnabled()&&Helpers.StageType.isLogo()&&Boolean(Service.MultiplePurchase.getInstance())&&0<page.stage.$body.find(".merch-preview-container").length;return t&&(e=PurchaseWidgetStrategy.purchaseOverlayMultiple),t&&Helpers.App.isMerchYggdrasilEnabled()&&(e=PurchaseWidgetStrategy.purchaseOverlayYggdrasil),e},create:function(e){return new WidgetFactory[this.strategyName](e)}}}),Class("SinglePurchasesModalStrategy")({SinglePurchase:"buildSinglePurchase",SinglePurchaseVarB:"buildSinglePurchaseVarB",prototype:{init:function(e){e===SinglePurchasesModalStrategy.SinglePurchase?this.strategyName=this._getExperimentVariant():this.strategyName=e},create:function(e){return new WidgetFactory[this.strategyName](e)},_getExperimentVariant:function _getExperimentVariant(){var e=SinglePurchasesModalStrategy.SinglePurchase;return this._shouldShowVariantB()&&(e=SinglePurchasesModalStrategy.SinglePurchaseVarB),e},_shouldShowVariantB:function _shouldShowVariantB(){return stageCategory=Helpers.StageType.getCategoryName(),!("Logos"!==stageCategory||!window.logo_price_experiment)}}}),Module(Helpers,"CouponHelper").includes(CustomEventSupport)({KEY:"pl_coupon",TYPE_SUBSCRIPTION:"subscription",TYPE_SINGLE_PURCHASE:"singlePurchase",DISCOUNT_TYPE_PERCENT:"percent",DISCOUNT_TYPE_AMOUNT:"dollars",SOURCE_URL:"url",SOURCE_COOKIE:"cookie",SOURCE_SET:"set",code:null,coupon:null,types:null,discount:null,duration:null,valid:null,source:null,load:function load(e){var t,i;if(e||(e=!1),this.code=null,this.coupon=null,this.types=[],this.discount=null,this.duration=null,this.valid=null,this.source=null,t=Helpers.App.getUrlParam(this.KEY),$.cookie.json=!0,i=$.cookie(this.KEY),$.cookie.json=!1,t&&t.length){if(Helpers.App.getSubscription())return this.dispatch("coupon.error.newUser"),void this.remove();this.code=t,this.source=this.SOURCE_URL,this._validate()}else i?("string"==typeof i&&(i=JSON.parse(i)),i.coupon_code&&(this.code=i.coupon_code,this.source=this.SOURCE_COOKIE,this._validate())):e&&(this.code=e,this.source=this.SOURCE_SET,this._validate())},getCode:function getCode(){return this.code},getCoupon:function getCoupon(){return this.coupon},getTypes:function getTypes(){return this.types},getDiscount:function getDiscount(){return this.discount},getDuration:function getDuration(){return this.duration},getSource:function getSource(){return this.source},calculatePrice:function calculatePrice(e){return e=parseFloat(e),!(isNaN(e)||!this.discount)&&(this.discount.type===this.DISCOUNT_TYPE_PERCENT?e=e*(100-this.discount.amount)/100:this.discount.type===this.DISCOUNT_TYPE_AMOUNT&&(e-=this.discount.amount),e<0&&(e=0),e=Math.floor(100*e)/100)},exists:isValid:function isValid(){return this.valid},applyTo:function applyTo(e){return!!(this.types&&this.types.length&&-1<this.types.indexOf(e))},applyToPlan:function applyToPlan(e){var t=this.getCoupon();if(null===t)return!1;if(!0===t.applies_to_all_plans)return!0;for(var i=0;i<t.plan_codes.length;i++)if(t.plan_codes[i]===e)return!0;return!1},_validate:function _validate(){var t,e;this.code&&((e=Helpers.App.getSubscription())&&!e.is_paused||(t={success:this._validateSuccessHandler.bind(this),error:this._validateErrorHandler.bind(this)},$.ajax({url:"/coupons/"+this.code+"/sign",type:"POST",success:function i(e){t.success(e)},error:function n(e){t.error(e)}})))},_validateSuccessHandler:function _validateSuccessHandler(e){e.coupon&&"redeemable"===e.coupon.state?this._process(e.coupon):this._setInvalid(),this.dispatch("coupon.validated")},_validateErrorHandler:_process:function _process(e){var t;e&&(this.coupon=e,this.valid=!0,this._setTypes(),this._setDiscount(),this._setDuration(),$.cookie.json=!0,$.cookie(this.KEY,this.coupon,{path:"/"}),$.cookie.json=!1,t=Helpers.App.getUser(),Helpers.App.isLoggedIn()&&!t.coupon&&this.applyToUser())},_setTypes:function _setTypes(){this.exists()&&(this.types=[],this.coupon.applies_to_all_plans?this.types.push(this.TYPE_SUBSCRIPTION):Object.keys(window.plans).forEach(function(e){-1===this.types.indexOf(this.TYPE_SUBSCRIPTION)&&-1<this.coupon.plan_codes.indexOf(e)&&this.types.push(this.TYPE_SUBSCRIPTION)}.bind(this)),this.coupon.applies_to_non_plan_charges&&this.types.push(this.TYPE_SINGLE_PURCHASE))},_setDiscount:function _setDiscount(){if(this.exists())if(this.discount={},this.discount.type=this.coupon.discount_type,this.discount.type===this.DISCOUNT_TYPE_PERCENT)this.discount.amount=this.coupon.discount_percent,this.discount.label=this.discount.amount+"%";else if(this.discount.type===this.DISCOUNT_TYPE_AMOUNT){var e=window.currencyHelper.getSymbol(recurlyConfig.currency);this.discount.amount=this.coupon.discount_in_cents[window.recurlyConfig.currency]/100,this.discount.label=e+this.discount.amount}else this.discount=null},_setDuration:function _setDuration(){this.exists()&&(this.duration={},this.duration.type=this.coupon.duration,"temporal"===this.duration.type?this.duration.length=this.coupon.applies_for_months:this.duration.length=!1)},_setInvalid:function _setInvalid(){this.valid=!1,$.removeCookie(this.KEY,{path:"/"})},remove:function remove(){this.code=null,this.coupon=null,this.types=[],this.discount=null,this.duration=null,this.valid=null,this.source=null,$.removeCookie(this.KEY,{path:"/"}),this.dispatch("coupon.removed")},markAsUsed:function markAsUsed(){(this.duration&&"single_use"===this.duration.type||this.coupon&&"subscription"===this.coupon.redemption_resource)&&this.remove(),this.applyToUser()},refresh:function refresh(){this.dispatch("coupon.refresh")},applyToUser:function applyToUser(){this.getCode()&&$.ajax({type:"POST",url:"/coupons/"+this.getCode()+"/apply",success:function(){return!0},error:function(){return!1}})},prototype:{_isCouponRedeemable:_couponAppliesToAllPlans:function _couponAppliesForAllPlans(e){return e.applies_to_all_plans},_whatPlansCouponAppliesFor:function _whatPlansCouponAppliesFor(e){return e.plan_codes},_couponDiscountType:_couponDiscountAmount:_applyCouponDiscount:function _applyCouponDiscount(e,t){return"percent"===e.type?t=t*(100-e.amount)/100:(t-=e.amount[window.recurlyConfig.currency])<0&&(t=0),Math.round(100*t)/100}}}),Class(Helpers,"DownloadProcess").includes(CustomEventSupport)({RETRY_DELAY:600,RETRY_TIMES:3,MAX_POLLING_TIMES:280,PING_INTERVAL:5e3,processingItems:[],processedItems:[],processingHashItems:{},pollPromise:null,pollProcessing:function pollProcessing(){var e=Helpers.DownloadProcess,t=Utils.bindFn(e);return null!==e.pollPromise&&(e.pollPromise.cancel(),e.pollPromise=null),e.pollPromise=e._pollingBuilder(t(e._startPollHighRes),t(e._checkPollStatus)),e.pollPromise},getAllDownloads:function getAllDownloads(){var e=Helpers.DownloadProcess;return Array().concat(e.getSuccessDownloads(),e.getProcessingDownloads())},getSuccessDownloads:function getSuccessDownloads(){return Helpers.DownloadProcess.processedItems},getProcessingDownloads:function getProcessingDownloads(){return Helpers.DownloadProcess.processingItems},getProcessByStageId:function getProcessByStageId(t){return Helpers.DownloadProcess.getAllDownloads().filter(function(e){return e.stage_id===t})},_pollingBuilder:function _pollingBuilder(e,t){return Utils.createPollingBuilder(this.MAX_POLLING_TIMES,this.PING_INTERVAL)(e)(t)},_startPollHighRes:function _startPollHighRes(){var e=Helpers.DownloadProcess,t=Utils.bindFn(e);return e._retrayableProcessingRequest(e.RETRY_TIMES,
e.RETRY_DELAY).then(Utils.tap(t(e._checkPollResults))).then(t(e._reverseList)).then(t(e._groupItems)).then(Utils.tap(t(e._setItems))).then(Utils.tap(t(e._processPollResults)))},_checkPollResults:function _checkPollResults(e){var t=Helpers.DownloadProcess,i=0===e.items.length&&!0===e.hasDownloads,n=0===e.items.length&&!1===e.hasDownloads;!0===i?t.dispatch("downloadNoRecent"):!0===n&&t.dispatch("downloadEmpty")},_reverseList:_groupItems:function _groupItems(e){var t={processedItems:[],processingItems:[]};return(t.items=e).forEach(function(e){!0!==e.error&&(!0===e.processing?t.processingItems.push(e):t.processedItems.push(e))}),t},_setItems:_processPollResults:function _processPollResults(e){var r=Helpers.DownloadProcess,t=e.items;r.dispatch("downloadStartUpdate",{items:t}),t.forEach(function(e,t){var i=r._getParsedItemData(e),n=!0===i.error,s=!0!==r.processingHashItems[i.name];!0===n?r.dispatch("downloadItemError",{item:i,index:t}):!0===s?(r.processingHashItems[i.name]=!0,r.dispatch("downloadItemNew",{item:i,index:t})):r.dispatch("downloadItemUpdate",{item:i,index:t})}),r.dispatch("downloadEndUpdate",{items:t})},_checkPollStatus:_getParsedItemData:function _getParsedItemData(e){return Object.assign({name:"item"+e.id,stage_category:e.category},e)},_requestProcessing:function _requestProcessing(){var e=Helpers.RequestConfig.prepareConfig({url:"/api/v1/base/processing",cache:!1});return Helpers.App.isGuestCheckoutExperimentActive()&&(e.data={guest_token:Service.GuestCheckout.getInstance().getToken()}),P.ajax(e)},_retrayableProcessingRequest:function _retrayableProcessingRequest(e,t){var i=Helpers.DownloadProcess;return P.retryableDelayed(function(){return i._requestProcessing()},e,t)()}}),Class(UI,"SubscriptionsPartial").inherits(Widget).includes(Helpers.SubscriptionHelper,Helpers.CouponHelper,BubblingSupport,GenericDestroySupport,Translator,CurrencyLabelSetter)({elementClass:"subscriptions-partial-widget",html:'        <div>            <div class="subscriptions-wrapper">                <div class="label-wrapper">                    <div class="label-text"></div>                </div>                <div class="header">                    <div class="title"></div>                    <div class="subtitle"></div>                </div>                <div class="content-wrapper">                    <div class="categories"></div>                    <div class="carousel-wrapper"></div>                </div>                <div class="footer">                    <div class="period-wrapper">                        <div class="period-container plan-monthly">                            <div class="period-label">MONTHLY<strong class="percent-discount discount"></strong></div>                            <button class="period" data-period="monthly">                                <span class="price original-price"></span>                                <span class="price final-price"></span>                                <span class="price-label">/ Month</span>                            </button>                        </div>                        <div class="period-container plan-annual">                            <div class="period-label">ANNUAL<strong class="percent-discount discount"></strong></div>                            <button class="period" data-period="annual">                                <span class="price original-price"></span>                                <span class="price final-price">$99.95</span>                                <span class="price-label"> / Year</span>                                <small>Just <span class="annual-monthly-amount">$8.33</span> / Month, <strong class="annual-percent-discount">Save <span class="annual-save">58</span>%</strong></small>                            </button>                        </div>                    </div>                    <div class="subscription-cta-container minimal"></div>                </div>            </div>            <div class="disclaimer">                <div class="coupon-disclaimer"></div>                <span class="disclaimer-info-footer"><strong>*Cancel anytime.</strong> Unlimited subscription billed yearly in {{currency_label}}.</span>                <span style="font-size: 10px">1 month minimum commitment if subscribers have downloaded any templates.</span>            </div>        </div>',TEXT_TITLE:"Get the Unlimited Subscription!",TEXT_SUBTITLE:"Access to ALL Our Templates!",TEXT_SUBSCRIPTION_ACTIVATION_ERROR:"Your subscription could not be activated, Please try again later",TEXT_INVALID_OR_CANCELED_SUBSCRIPTION:"Invalid subscription or already canceled subscription",TEXT_ERROR_CHARGING_STORE_CARD:"There was an error charging your stored card. Please use another payment option.",TEXT_SUBSCRIPTION_SUCCESS:"Your subscription is now activated",TEXT_CATEGORIES:[{id:"mockups",title:"Mockups",subtitle:"Unlimited",features:[{type:"video",webm:"https://s3.amazonaws.com/placeit-images/storage/video-mockups-preview.webm",mp4:"https://s3.amazonaws.com/placeit-images/storage/video-mockups-preview.mp4",content:"Everything you'd get when you purchase one at a time but with <br /> <strong>unlimited access to Mockups, Designs, Logos, & Videos.</strong>",preview:!0},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/Mockup-Library-Pricing-Modal.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/Mockup-Library-Pricing-Modal.mp4",content:"The world's largest mockup library with {{mockupsStagesCount}}+ templates!"},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-mockups-pixel-perfect.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-mockups-pixel-perfect.mp4",content:"Pixel-perfect mockups in seconds. Just add your image!"},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-mockups-amazing-videos.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-mockups-amazing-videos.mp4",content:"Make amazing video mockups right from your browser"}]},{id:"designs",title:"Designs",subtitle:"Unlimited",features:[{type:"video",webm:"https://s3.amazonaws.com/placeit-images/storage/video-designs-preview.webm",mp4:"https://s3.amazonaws.com/placeit-images/storage/video-designs-preview.mp4",content:"Everything you'd get when you purchase one at a time but with <br /> <strong>unlimited access to Mockups, Designs, Logos, & Videos.</strong>",preview:!0},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-designs-creative-templates.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-designs-creative-templates.mp4",content:"Choose from over 5,700 beautiful design templates"},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-designs-easy.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-designs-easy.mp4",content:"Easy to edit templates. Design like a pro!"},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-designs-banner-ads.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-designs-banner-ads.mp4",content:"Download all size variations with one click!"}]},{id:"videos",title:"Videos",subtitle:"Unlimited",features:[{type:"video",webm:"https://s3.amazonaws.com/placeit-images/storage/video-videos-preview.webm",mp4:"https://s3.amazonaws.com/placeit-images/storage/video-videos-preview.mp4",content:"Everything you'd get when you purchase one at a time but with <br /> <strong>unlimited access to Mockups, Designs, Logos, & Videos.</strong>",preview:!0},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-videos-stunning-templates.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-videos-stunning-templates.mp4",content:"Hundreds of stunning video templates"},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-videos-easy-to-use.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-videos-easy-to-use.mp4",content:"Making a video couldn't be easier!"},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-videos-massive-audio-library.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-videos-massive-audio-library.mp4",content:"Choose from over 1000 free music tracks"},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-videos-predesigned-slides.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-videos-predesigned-slides.mp4",content:"Make beautiful slideshow videos"}]},{id:"logos",title:"Logos",subtitle:"Unlimited",features:[{type:"video",webm:"https://s3.amazonaws.com/placeit-images/storage/video-logos-preview.webm",mp4:"https://s3.amazonaws.com/placeit-images/storage/video-logos-preview.mp4",content:"You get everything Unlimited with <strong>access to ALL our Templates!</strong>",preview:!0},{type:"video",webm:"https://placeit-images.s3.amazonaws.com/storage/Logo-templates.webm",mp4:"https://placeit-images.s3.amazonaws.com/storage/Logo-templates.mp4",content:"<div>Choose from over <strong>4,600+</strong> customizable logo templates.</div>"},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-logos-easy.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-logos-easy.mp4",content:"Making a logo is as easy as filling out a form!"},{type:"video",webm:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-logos-pdf.webm",mp4:"https://placeit-images.s3-accelerate.amazonaws.com/storage/video-logos-pdf.mp4",content:"Download your logo as a PDF!"}]}],MOCKUPS_FALLBACK_COUNT:31300,MONTHLY_CANCEL_FOOTER:"<strong>*Cancel anytime.</strong> Unlimited subscription billed monthly in {{currency_label}}.",ANNUAL_CANCEL_FOOTER:"<strong>*Cancel anytime.</strong> Unlimited subscription billed yearly in {{currency_label}}.",prototype:{_resizeHandler:null,_canplayHandler:null,couponCode:null,discount:null,plans:null,plansWrapperEl:null,subscriptionButton:null,footerElement:null,openPurchasesModal:null,_activePlan:null,isMobile:null,preview:null,COMPACT_BREAKPOINT:390,DEFAULT_CATEGORY:"mockups",PERIOD_MONTHLY:"monthly",PERIOD_ANNUAL:"annual",invalidCoupon:!1,carousel:null,currentCategory:null,currentFeature:null,previewCategory:null,carouselData:null,$title:null,$subtitle:null,$category:null,$categories:null,$contentWrapper:null,$couponDisclaimer:null,$price:null,$discount:null,$period:null,$periodPrice:null,$periodSave:null,$comparePrice:null,period:null,elementParent:null,_taxRequestInProgress:null,_scopedCouponValidatedHandler:null,_scopedCouponRemovedHandler:null,title:null,subtitle:null,label:null,categories:null,_singleCtaBlock:null,init:function init(e){var i;Widget.prototype.init.call(this,e),this.title=this.constructor.TEXT_TITLE,e.title&&(this.title=e.title),this.subtitle=this.constructor.TEXT_SUBTITLE,this.categories=this.constructor.TEXT_CATEGORIES,this._canplayHandler=[],e.previewCategory&&(e.previewCategory,this.previewCategory=this.getCategoryID(e.previewCategory),this.element.addClass("category-"+this.previewCategory.toLowerCase())),this.$title=this.element.find(".title"),this.$subtitle=this.element.find(".subtitle"),this.$label=this.element.find(".label-wrapper .label-text"),this.$couponDisclaimer=this.element.find(".coupon-disclaimer"),this.plans=[],this.plansWrapperEl=this.element.find(".subscriptions-widget__plans-wrapper"),this.subscriptionButton=this.element.find(".s-btn"),this.couponValidatingTxt=this.element.find(".coupon-field-container .validating"),this.footerElement=this.element.find(".modal-footer"),this.openPurchasesModal=this.footerElement.find("#open-purchase-modal"),this.taxInformation=this.element.find(".plan-tax"),this.$carouselWrapper=this.element.find(".carousel-wrapper"),this.$categories=this.element.find(".categories"),this.$contentWrapper=this.element.find(".content-wrapper"),this.$price=this.element.find(".period-price"),this.$comparePrice=this.element.find(".price-compare"),this.$discount=this.element.find(".discount-wrapper .discount"),this.$period=this.element.find(".period-wrapper > .period-container > .period"),this.$periodPrice=this.element.find(".period-price"),this.$periodSave=this.element.find(".period-save"),this.$annualSave=this.element.find(".annual-save"),this.$annualPrice=this.element.find(".annual-price"),this.$annualMonthlyAmount=this.element.find(".annual-monthly-amount"),this.$disclaimerFooter=this.element.find(".disclaimer-info-footer"),this["buttonWrapper_"+Registry.Plans.PLAN_MONTHLY]=this.element.find(".period-container.plan-monthly"),this["buttonWrapper_"+Registry.Plans.PLAN_ANNUAL]=this.element.find(".period-container.plan-annual"),this.$title.html(this.title),this.$subtitle.html(this.subtitle),this.label&&(this.$label.html(this.label),this.$label.parent().addClass("show")),this.carouselData=[],i=0,this.categories.forEach(function(t){var e={};$.extend(!0,e,t),this.carouselData.push(e),this.carouselData[i].features=[],t.features.forEach(function(e){!0===e.preview&&this.previewCategory!=t.id||this.carouselData[i].features.push(e)}.bind(this)),i++}.bind(this)),this._renderPlanButtons(),this.bind("render",function(){this.getElement().find(".period-wrapper").hide(),null===this._singleCtaBlock&&this._renderSingleSubscriptionCTA()}),this._renderCategories(),this._bindEvents()},_bindEvents:function _bindEvents(){var i;(i=this).bind("purchase.success",this._handleSubscriptionSuccess.bind(this)),UI.SubscriptionsPlan.bind("plan:row:clicked",function(e){Helpers.App.getSubscription();this.plans.forEach(function(e){e.deselect()}),e.data.select(),this._setPlan(e.data.planInfo),this.dispatch("plan:row:clicked",e.data)}.bind(this)),this.openPurchasesModal.on("click",function(e){e.preventDefault(),this.parent.deactivate(function(){this.dispatch("show:purchaseModal")}.bind(this))}.bind(this)),this.$categories.find(".category").on("click",,this.subscriptionButton.on("click",function(e){e.preventDefault(),Helpers.GlobalEventTracker.planCTAClicked({session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id,plan_name:i._getPlan().name}),i.dispatch("subscribe:button:clicked")}),i._scopedCouponValidatedHandler=i._couponValidatedHandler.bind(this),Helpers.CouponHelper.bind("coupon.validated",i._scopedCouponValidatedHandler),i._scopedCouponRemovedHandler=i._couponRemovedHandler.bind(this),Helpers.CouponHelper.bind("coupon.removed",i._scopedCouponRemovedHandler),this.$period.on("click",function(e){var t=e.currentTarget;Helpers.App.isIndianUser()&&$(t).data("period")===i.PERIOD_MONTHLY||i.$period.attr("disabled")||(i.$period.attr("disabled",!0),$(t).data("period")===i.PERIOD_ANNUAL?i._activePlan=Registry.Plans.get(Registry.Plans.PLAN_ANNUAL):i._activePlan=Registry.Plans.get(Registry.Plans.PLAN_MONTHLY),Helpers.GlobalEventTracker.planCTAClicked({session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id},$(t).data("period")),sessionStorage.setItem("plan",$(t).data("period")),i.period=$(t).data("period"),i.dispatch("subscribe:button:clicked"))})},render:function render(e,t){return Widget.prototype.render.call(this,e,t),this.elementParent=this.element.parent(),this},_recalculateSize:function _recalculateSize(){this.elementParent&&this.elementParent.width()<=this.COMPACT_BREAKPOINT?this.element.addClass("compact"):this.element.removeClass("compact")},instantiateStoredBillingInfoOverlay:function instantiateStoredBillingInfoOverlay(){this.storedBillingInfoOverlay===undefined&&(this.appendChild(new UI.StoredBillingInfoOverlay({name:"storedBillingInfoOverlay"})),this.storedBillingInfoOverlay.bind("change-card",function(e){this._showPaymentForm(e.data.recurlyData)}.bind(this)).bind("use-stored-card",function(e){this._useStoredBillingInfo(e.data.recurlyData)}.bind(this)))},subscribeButtonClick:function subscribeButtonClick(){this.type&&Helpers.App.setSubscribeFromModal(this.type),Helpers.App.isGuestCheckoutExperimentActive()&&Boolean(this.type)&&(Service.GuestCheckout.getInstance().setPreviousCheckoutTypeOpened(this.type),Helpers.App.setSubscribeFromModal("compare")),Helpers.App.isLoggedIn()||!1!==Boolean(Service.GuestCheckout.getInstance().getFormSubmitter())?this._handlePlanSubscribe():(this.parent.deactivate&&this.parent.deactivate(),this.dispatch("purchase.not_logged_in"))},hideFooter:function hideFooter(){return this.footerElement.hide(),this},_setPlan:function _setPlan(e){var t,i;(t=this)._activePlan=e,(i=Helpers.Price.plan(e)).price.then(function(e){t._updateTaxRate(e),i.priceWithDiscount.then(function(e){t._updateTaxRate(e)})})},_getPlan:function _getPlan(){return this._activePlan||this.plans[0].planInfo},_updateTaxRate:function updateTaxRate(e){var t=this;t._configureRecurly(),t.getTaxMessage(e).then(function(e){t.taxInformation.text(e)})["catch"](function(e){t.taxInformation.text(e)})},_configureRecurly:function _configureRecurly(){var e={currency:window.recurlyConfig.currency,publicKey:window.recurlyConfig.publicKey,fields:{all:{style:{fontSize:"16px",fontColor:"#555555",padding:"1px",placeholder:{color:"#55555 !important"}}},number:{selector:"#recurly-number",style:{placeholder:{content:""}}},cvv:{selector:"#recurly-cvv",style:{placeholder:{content:""}}},month:{selector:"#recurly-month",style:{placeholder:{content:""}}},year:{selector:"#recurly-year",style:{placeholder:{content:""}}},vat_number:{selector:"#recurly-vat-number",style:{placeholder:{content:""}}}}};recurly.configure(e)},_sign:function _sign(e,t){var i={url:"/subscriptions/sign",type:"post",data:$.extend(!0,{},e),dataType:"json",success:function s(e){t(e)}},n=Helpers.RequestConfig.prepareConfig(i);$.ajax(n)},_showPaymentForm:function _showPaymentForm(e){var t,i,n,s;i=this.getEventTrackerName(),n=EventTracker.info({type:i,data:{}}),t=null,Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyToPlan(e.plan_recurly_uuid)&&(t=Helpers.CouponHelper.getCode());var r={ajaxUrl:"/subscriptions/{{token}}/transaction",ajaxParams:{plan_recurly_uuid:e.plan_recurly_uuid,coupon_code:t,eventData:n}};$.extend(!0,e,r),this.purchaseOverlay&&this.purchaseOverlay.destroy(),s=e.billing_info.lastFour===undefined;var a={name:"purchaseOverlay",purchaseRecord:e,paymentType:"subscription",discount:this.discount,hideSavedCardOption:s};this.appendChild(this._createPurchaseOverlayWidget(a)),this.purchaseOverlay.bind("purchase.failed",function(e){if("purchaseOverlay"!==e.target.name){var t=this.constructor.TEXT_SUBSCRIPTION_ACTIVATION_ERROR;this.dispatch("subscription.failure",{message:t})}}.bind(this)),this.purchaseOverlay.initSubscriptionForm().render($("body")).activate(),setTimeout(bind(this))},_createPurchaseOverlayWidget:function _createPurchaseOverlayWidget(e){var t=PurchaseWidgetStrategy.PurchaseOverlay,i=null;return Helpers.App.isGuestCheckoutExperimentActive()&&(t=PurchaseWidgetStrategy.PurchaseGuestOverlay),i=new PurchaseWidgetStrategy(t),console.log(this.constructor.className+" -> Creating the purchase overlay"),i.create(e)},_showStoredBillingInfo:function _showStoredBillingInfo(e){this.instantiateStoredBillingInfoOverlay(),this.storedBillingInfoOverlay.refresh(e),this.storedBillingInfoOverlay.activate(),this.$period.attr("disabled",!1)},_handleSubscriptionSuccess:function _handleSubscriptionSuccess(i){Helpers.App._getPurchases(function(){var e;!1===Helpers.App.isGuestCheckoutExperimentActive()&&window.page.appNavBar.updateStatus();var t={};t.message=this.constructor.TEXT_SUBSCRIPTION_SUCCESS,this.dispatch("subscription.success",t),e=Helpers.App.getSubscriptionEventName(i.data.plan_recurly_uuid),Helpers.GlobalEventTracker.subscriptionSuccess({plan_name:Helpers.App.getSubscription().plan.name,plan_recurly_uuid:i.data.plan_recurly_uuid,amount_in_cents:Helpers.App.getSubscription().plan.amount_in_cents,user_id:Helpers.App.getUser().id,event:e,invoice_number:i.data.invoice_number})}.bind(this))},_handlePlanSubscribe:function _handlePlanSubscribe(){var e,t=this;switch(Helpers.App.isGuestCheckoutExperimentActive()&&(e=Registry.Plans.get(Registry.Plans.PLAN_ANNUAL)),sessionStorage.getItem("plan")){case this.PERIOD_MONTHLY:e=Registry.Plans.get(Registry.Plans.PLAN_MONTHLY);break;case this.PERIOD_ANNUAL:e=Registry.Plans.get(Registry.Plans.PLAN_ANNUAL);break;default:this.setPeriod(this.PERIOD_MONTHLY,!0)}t.signRequestWithRecurly(e,t.discount,function(e){t.parent.deactivate&&t.parent.deactivate(),Helpers.GlobalEventTracker.recurlyFormAfterPlanSelected({plan_code:e.plan_code,amount_in_cents:e.amount_in_cents,description:e.description}),t._showPaymentForm(e)})},_renderCategories:function _renderCategories(){var t="",i=0;this.carouselData.forEach(function(e){t+='<div class="category" data-category="'+e.id+'" data-slide="'+i+'">',t+='<div class="title">'+e.title+"</div>",t+='<div class="subtitle">'+e.subtitle+"</div>",t+="</div>",i+=e.features.length}),this.$categories.html(t)},_renderFeatures:function _renderFeatures(e){var n,s,r,a=this;this.carousel||(e||(e=0),this.currentFeature=e,n='<div class="carousel">',this.carouselData.forEach(function(i){i.features.forEach(function(e,t){switch(!(r=!(s="feature carousel-item"))===e.preview&&(s+=" preview"),!0===e.highlight&&(r=!0),n+='<div class="'+s+'" data-category="'+i.id+'" data-feature="'+t+'" data-type="'+e.type+'" data-highlight="'+r+'">',e.type){case"image":n+='<div class="feature-image"><img src="'+e.src+'" /></div>';break;case"video":n+='<div class="feature-video">',!0===e.preview&&(n+='<div class="preview-wrapper"></div>'),n+='<img class="video-loader" src="/assets/loaders/circular.gif" alt="Loading..." />',n+='<video data-status="waiting" data-mp4="'+e.mp4+'" data-webm="'+e.webm+'" class="not-loaded" autoplay="" controlslist="nodownload" loop="" muted="muted" playsinline>',n+="</video>",e.hasOwnProperty("videoOverlay")&&(n+='<img class="feature-video-overlay" src="'+e.videoOverlay+'" class="feature-overlay">'),n+="</div>"}e.hasOwnProperty("content")&&(e.content.includes("{{mockupsStagesCount}}")&&(e.content=a._setMockupsStagesCount(e.content)),n+='<div class="feature-content">'+e.content+"</div>"),n+="</div>"})}),n+="</div>",this.carousel=new UI.SimpleSlider({name:"carousel",content:n}).render(this.$carouselWrapper),this.carousel.bind("carousel.afterChange",function(e){var t=e.data;a.currentFeature=t.feature,a._selectCategory(t.category)}),this._loadVideo(),this.playCurrentVideo(),this._renderDots())},_setMockupsStagesCount:function _setMockupsStagesCount(e){var t=this.mockupsStagesCount||this.constructor.MOCKUPS_FALLBACK_COUNT,i=(100*Math.floor(t/100)).toLocaleString();return e.replace("{{mockupsStagesCount}}",i)},_renderDots:function _renderDots(){var e,t,i,n,s,r=this.currentCategory,a=this.currentFeature;s=this.element.find('.feature[data-category="'+r+'"]:not(.slick-cloned)'),this.element.find(".carousel-wrapper .carousel-dots").remove(),s.length&&(e='<ul class="carousel-dots">',s.each(function(){i=$(this).attr("slide-num"),n=$(this).data("feature"),t=!1,n===a&&(t=!0),e+='<li><button data-slide="'+i+'" class="'+(t?"active":"")+'">'+i+"</button></li>"}),e+="</ul>",this.element.find(".carousel-wrapper").append(e),this.element.find(".carousel-dots button").on("click",function(e){e.preventDefault(),this.carousel.goToSlide($(e.target).data("slide"))}.bind(this)))},_loadVideo:function _loadVideo(e){var t,i,n;if(t=e?this.element.find(".carousel .slick-slide[data-slick-index="+e+"] video"):this.element.find('.carousel .carousel-item video[data-status="waiting"]').eq(0),n=$("source",t),t.length)if(i=t.get(0),n.length)4!==i.readyState&&i.load(),this.playVideo(i);else if("waiting"===t.data("status")){t.append('<source src="'+t.data("webm")+'" type="video/webm">'),t.append('<source src="'+t.data("mp4")+'" type="video/mp4">'),t.attr("data-status","loading"),i=t.get(0);var s=function(e){$(e.target).attr("data-status","loaded"),$(e.target).siblings(".video-loader").remove(),$(e.target).removeClass("not-loaded"),this._loadVideo(),i.removeEventListener("canplay",s)}.bind(this);this._canplayHandler.push(s),i.addEventListener("canplay",s)}},show:function show(e){var t,i;this.$period.attr("disabled",!1),i=this.PERIOD_MONTHLY,this.setPeriod(i,!0),this._renderFeatures(),t=this.getCategoryID(e),this._selectCategory(t),this.carousel.goToSlide(this.currentCategoryFirstSlide),this.setPreview(),this._recalculateSize(),this._resizeHandler=this._recalculateSize.bind(this),window.addEventListener("resize",this._resizeHandler),this.element.addClass("show")},hide:function hide(){this.element.removeAttr("style"),this.element.removeClass("show"),this._removeVideos(),this.carousel&&this.carousel.destroy(),this.carousel=null,window.removeEventListener("resize",this._resizeHandler)},_selectCategory:function _selectCategory(t){var i,n;n=i=0,this.currentCategory=t,this.$categories.find(".category").removeClass("active"),this.$categories.find('.category[data-category="'+t+'"]').addClass("active"),this.carouselData.forEach(function(e){e.id===t?i=n:n+=e.features.length}),this.currentCategoryFirstSlide=i,this._renderDots()},setPreview:function setPreview(e){var t,i,n,s;if(t=this.$contentWrapper.find(".preview-wrapper"),s=this,e)this.preview=e;else{if(!this.preview)return;e=this.preview}if(t.length){(i=t.find("video")).length&&(t.removeClass("play"),t.find(".video-control-wrapper").removeClass("play"),i.get(0).load()),"image"===e.type?(t.find("img").remove(),n='<img src="'+e.source+'" />'):"video"===e.type&&(t.find("video").remove(),t.find(".video-control").remove(),n='<div class="video-control-wrapper"><div class="video-control"></div></div>',n+='<div class="video-wrapper"><video class="not-loaded" controlslist="nodownload" muted="muted" playsinline>',n+='<source src="'+e.source+'" type="video/mp4" muted playsinline>',n+="</video></div>"),this.element.addClass("preview-"+e.type),t.html(n);var r=t.find(".video-wrapper video"),a=t.find(".video-wrapper"),o=t.find(".video-control-wrapper");"video"===e.type&&(setTimeout(function(){r[0].load(),r.removeClass("not-loaded"),s.playVideo(r[0]),r[0].pause()},1),s._previewVideo=new UI.KeyframeVideoPresenter(r,e.keytime)),o.on("click",function(){s._previewVideo.isPlaying()||(s._previewVideo.play(),t.addClass("play"),o.addClass("play"))}),a.click(function(){s._previewVideo.isPlaying()&&(s._previewVideo.pause(),t.removeClass("play"),o.removeClass("play"))}),r.on("ended",}},getCategoryID:function getCategoryID(e){var t;switch(e||(e=window._pl_category),e){case"Mockup":case"Mockups":t="mockups";break;case"Design":case"Design Templates":t="designs";break;case"Logo":case"Logos":t="logos";break;case"Video":case"Videos":t="videos";break;default:t="mockups"}return t},playCurrentVideo:function playCurrentVideo(){var e=this.element.find(".feature.slick-active .feature-video video");0<e.length&&(4!==(e=e.get(0)).readyState&&e.load(),this.playVideo(e))},playVideo:function playVideo(e){var t=e.play();t!==undefined&&t.then(function(){})["catch"](function(){})},destroy:function destroy(){window.removeEventListener("resize",this._resizeHandler),this._removeVideos(),Helpers.CouponHelper.unbind("coupon.validated",this._scopedCouponValidatedHandler),Helpers.CouponHelper.unbind("coupon.removed",this._scopedCouponRemovedHandler),this.genericDestroy()},setPeriod:function setPeriod(e,t){var i,n;switch(this.period=e,this.$periodPrice.text(""),this.$periodSave.text(""),this.element.removeClass("period-monthly"),this.element.removeClass("period-annual"),this.element.find(".period-wrapper .period").removeClass("checked"),this.element.addClass("period-"+this.period),(i=this.element.find('.period-wrapper .period[data-period="'+this.period+'"]')).length&&i.addClass("checked"),e){case this.PERIOD_MONTHLY:n=Registry.Plans.get(Registry.Plans.PLAN_MONTHLY),t||Helpers.GlobalEventTracker.subscriptionPlanSelected({old:this.PERIOD_ANNUAL,"new":this.PERIOD_MONTHLY,place:this.getPlaceNameFromType()});break;case this.PERIOD_ANNUAL:n=Registry.Plans.get(Registry.Plans.PLAN_ANNUAL),t||Helpers.GlobalEventTracker.subscriptionPlanSelected({old:this.PERIOD_MONTHLY,"new":this.PERIOD_ANNUAL,place:this.getPlaceNameFromType()});break;default:this.setPeriod(this.PERIOD_MONTHLY,!0)}n&&this._setPlan(n)},getPlaceNameFromType:function getPlaceNameFromType(){switch(this.type){case"modal":return"subscription_modal";case"compare":return"purchase_modal";default:return"account_page"}},getEventTrackerName:function getEventTrackerName(){var e;switch(e="Subscription:success:",this.period){case this.PERIOD_MONTHLY:e+="Unlimited";break;case this.PERIOD_ANNUAL:e+="Unlimited:Annual"}return e},activate:function activate(){return Widget.prototype.activate.call(this),this.show(),this},_removeVideos:function _removeVideos(){var e,n;this._canplayHandler.forEach(function(e){window.removeEventListener("canplay",e)}),this._canplayHandler=[],(e=this.element.find("video")).each(function(e,t){t.remove(),n=t.getElementsByTagName("source");for(var i=0;i<n.length;i++)n[i].src="";t.load()}),e.remove()},showAnimate:function showAnimate(){this.show(),this.element.css({opacity:0,position:"relative",top:"-"+this.element.innerHeight()+"px"}),this.element.animate({opacity:1,top:0})},_renderPlanButtons:function _renderPlanButtons(){this._renderPlanButton(Registry.Plans.PLAN_MONTHLY),this._renderPlanButton(Registry.Plans.PLAN_ANNUAL)},_couponValidatedHandler:function _couponValidatedHandler(){var e,t;e=this,t=Helpers.App.getSubscriptionPeriod(),e.setPeriod(t,!0),e._renderPlanButtons()},_couponRemovedHandler:function _couponRemovedHandler(){this._renderPlanButtons()},setTitle:function setTitle(e){this.title=e||this.constructor.TEXT_TITLE,this.$title.html(this.title)},_renderSingleSubscriptionCTA:function _renderSingleSubscriptionCTA(){!0!==window.apiPage&&(this._singleCtaBlock=new UI.SubscriptionCta.SubscriptionCtaBlockController({monthlyCta:this.getElement().find('[data-period="monthly"]'),annualCta:this.getElement().find('[data-period="annual"]'),container:this.getElement().find(".subscription-cta-container")}),this._singleCtaBlock.updateCtaText(UI.SubscriptionCta.SubscriptionCtaBlockController.CTA_TEXT_UNLIMITED),this._bindSubscriptionCTABlockEvents())},_bindSubscriptionCTABlockEvents:function _bindSubscriptionCTABlockEvents(){var e=this;this._singleCtaBlock.bind("set:monthly:disclaimer",function(){e.$disclaimerFooter.html(UI.SubscriptionsPartial.MONTHLY_CANCEL_FOOTER)}),this._singleCtaBlock.bind("set:annual:disclaimer",function(){e.$disclaimerFooter.html(UI.SubscriptionsPartial.ANNUAL_CANCEL_FOOTER)})}}}),Class(UI,"SubscriptionsPlan").inherits(Widget)({elementClass:"plan-widget plan-widget__column pi__column",
html:'        <div>            <div class="plan-widget__container">                <div class="plan-widget__option-container text-center">                    <input type="radio" name="subscriptions-plan-partial">                </div>                <p class="plan-widget__title pi__heading-title">                    <strong>{{name}}</strong>                </p>                <div class="pi__divider"></div>                <div class="plan-widget__price-container text-center">                    <p class="plan-widget__current-plan-info bree-oblique">Your current plan</p>                    <span class="plan-widget__price">                        <span class="money-symbol">$</span>                        <span class="amount">{{amount}}</span>/month                    </span>                </div>                <div class="pi__divider"></div>                <div class="plan-widget__description">                    <div class="plan-widget__current-plan-info pi__column-text">                        <p class="strong">Need more downloads?</p>                        <p>Upgrade now and unused downloads will be rolled over to the new plan.</p>                    </div>                    <div class="plan-widget__forbid-downgrade pi__column-text">                        <p class="strong">You can\'t downgrade yet...</p>                        <p id="cancellation_info">You can downgrade your subscription on {{cancellation_date}} since subscriptions require a 3 month minimum.</p>                    </div>                    <div class="plan-widget__description-text pi__column-text"></div>                    <div class="plan-widget__description-mobile-container">                        <button class="mobile-description-collapse btn btn-primary" type="button" data-toggle="collapse">                            See Features                        </button>                        <div class="plan-widget__description-text-mobile pi__column-text-mobile collapse"></div>                        <hr>                    </div>                </div>            </div>        </div>',prototype:{el:null,radio:null,nameEl:null,amountEl:null,descriptionEl:null,descriptionElMobile:null,descriptionMobileCollapseButton:null,cancellationInfo:null,licenseLink:null,planInfo:null,_disabled:null,_forbidden:!1,init:function init(e){Widget.prototype.init.call(this,e),this._disabled=!1,this.el=this.element[0],this.radio=this.el.querySelector('input[type="radio"]'),this.nameEl=this.el.querySelector(".plan-widget__title strong"),this.amountEl=this.el.querySelector(".plan-widget__price .amount"),this.descriptionEl=this.el.querySelector(".plan-widget__description-text"),this.descriptionElMobile=this.el.querySelector(".plan-widget__description-text-mobile"),this.descriptionMobileCollapseButton=this.el.querySelector(".mobile-description-collapse"),this.cancellationInfo=this.el.querySelector("#cancellation_info"),this.description=this.el.querySelector(".plan-widget__description"),this._updateInformation(),this._bindEvents()},_updateInformation:function _updateInformation(){var e,t,i,n;for(this.el.setAttribute("data-plan",this.planInfo.recurly_uuid),this.el.classList.add("subscription--plan_"+this.planInfo.name.replace(/\s/g,"_").toLowerCase()),this.radio.setAttribute("value",this.planInfo.id),this.radio.setAttribute("id","plan-"+this.planInfo.id),this.radio.setAttribute("data-name",this.planInfo.name),this.radio.setAttribute("data-price",this.planInfo.amount_in_cents),this.radio.setAttribute("data-plan",this.planInfo.recurly_uuid),this.descriptionElMobile.id="collapse-mobile-description-"+this.planInfo.id,this.descriptionMobileCollapseButton.setAttribute("data-target","#collapse-mobile-description-"+this.planInfo.id),this.nameEl.textContent=this.planInfo.name,this.amountEl.textContent=this.planInfo.amount_in_cents/100,e=document.createElement("div"),i=(t=this.planInfo.description.split(/\n/)).length,n=0;n<i;n++){var s=document.createElement("p");s.innerHTML=t[n],e.appendChild(s)}e.cloneNode(!0),this.descriptionEl.appendChild(e),this.licenseLink=this.descriptionEl.querySelectorAll(".js-open-license-modal"),this.popupableLink=$(this.descriptionEl.querySelector("a"));var r=this;this.popup=this.popupableLink.popover({content:r.popupableLink.attr("data-tooltip-text"),html:!0,selector:".bubble",trigger:"manual",placement:"bottom"}).bind("mouseenter",function(){r.popupableLink.popover("show")}).bind("mouseleave",function(){r.popupableLink.popover("hide")})},_bindEvents:function _bindEvents(){return $(this.radio).on("change",bind(this)),this.element.on("click",function(){!1===this._forbidden&&this.constructor.dispatch("plan:row:clicked",this)}.bind(this)),$(this.licenseLink).on("click",function(){var e=new UI.LicenseModal,t=this.getAttribute("data-license");return e.activateLicense(t).activate(),!1}),this},select:function select(){return!1===this._forbidden&&(this.radio.checked=!0,this.el.classList.add("selected")),this},deselect:function deselect(){return this.radio.checked=!1,this.el.classList.remove("selected"),this},isSelected:function isSelected(){return this.radio.checked},disable:function disable(){return this.el.classList.add("disabled"),this._disabled=!0,this},setAsForbidden:function setAsForbidden(){var e=this.cancellationInfo.innerHTML,t=Helpers.App.getSubscription();return this.el.classList.add("forbidden"),this._forbidden=!0,this.radio.disabled=!0,this.cancellationInfo.innerHTML=e.replace("{{cancellation_date}}",t.cancellation_date),this},setPaused:function setPaused(){var e="<div class='pi__column-text'><p>If you'd like to upgrade or downgrade your account while it's paused, please email <a href='mailto:support@placeit.net'>support@placeit.net</a></p></div>";this.description.innerHTML=e,this.el.classList.add("forbidden"),this._forbidden=!0,this.radio.disabled=!0},isDisabled:function isDisabled(){return this._disabled},destroy:function destroy(){this.el=null,this.radio=null,this.nameEl=null,this.amountEl=null,this.descriptionEl=null,this.licenseLink=null,this.planInfo=null,this._disabled=null,Widget.prototype.destroy.call(this)}}}),Class("PerformanceTimeMonitor")({prototype:{domInteractive:null,domContentLoadedEventEnd:null,domComplete:null,loadEventEnd:null,firstPaint:null,firstContentPaint:null,supported:!0,init:function init(){var e=null,t=null,i=null;window.performance&&window.performance.timing?(t=(e=window.performance.timing).navigationStart,i=this._showPaintTimings(),this.domInteractive=this._round(e.domInteractive-t),this.domContentLoadedEventEnd=this._round(e.domContentLoadedEventEnd-t),this.domComplete=this._round(e.domComplete-t),this.loadEventEnd=this._round(e.loadEventEnd-t),i&&i.firstPaint&&(this.firstPaint=this._round(i.firstPaint)),i&&i.firstContentPaint&&(this.firstContentPaint=this._round(i.firstContentPaint))):(console.log("Performance timing isn't supported."),this.supported=!1)},_round:_showPaintTimings:function _showPaintTimings(){var e={firstPaint:null,firstContentPaint:null},t=window.performance;if(t&&"function"==typeof t.getEntriesByName){var i=t.getEntriesByName("first-paint")[0];i&&i.startTime&&(e.firstPaint=i.startTime);var n=t.getEntriesByName("first-contentful-paint")[0];return n&&n.startTime&&(e.firstContentPaint=n.startTime),e}return e}}}),Class("PerformanceLogger")({sendTimings:function(e){var t=[];t.push({name:"DOM Interactive",time:e.domInteractive}),t.push({name:"DOM Content Loaded Event End",time:e.domContentLoadedEventEnd}),t.push({name:"DOM Complete",time:e.domComplete}),t.push({name:"Load Event End",time:e.loadEventEnd}),t.push({name:"First Paint",time:e.firstPaint}),t.push({name:"First Content Paint",time:e.firstContentPaint}),t.forEach(function(e){this.sendEventToGoogleAnalytics({hitType:"timing",timingCategory:e.name,timingVar:"load",timingValue:e.time})}.bind(this))},sendEventToGoogleAnalytics:function sendEventToGoogleAnalytics(e){return"function"!=typeof window.ga||("number"!=typeof e.timingValue&&(e.timingValue=0),window.ga("send",{hitType:e.hitType,timingCategory:e.timingCategory,timingVar:e.timingVar,timingValue:e.timingValue})),this}}),Class(UI,"LicenseModal").inherits(Widget)({html:'<div class="modal license-modal full-page-modal fade" id="license-modal" tabindex="-1" role="dialog" aria-labelledby="license-modal" aria-hidden="true">    <div class="modal-dialog">        <div class="modal-content">            <div class="modal-header">                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>            </div>            <div class="modal-body">                <div class="row-wrapper">                    <div class="col-aggreaments">                        <!-- Tab panes -->                        <div class="tab-content">                            <div class="tab-pane active" id="standard">                                <div class="description-wrapper scroll">                                    <h3 class="sub-title">The Placeit License Agreement</h3>                                    <p>This Placeit License Agreement (\u2018License\u2019) contains the terms by which you obtain the rights to Content Templates produced through the technology available at <a href="https://placeit.net">placeit.net</a>.</p>                                    <p>By downloading or using any Content Templates, you agree that you have read and accept the terms of this License, either for yourself or on behalf of your employer or the entity that is identified as the member account holder. Please note that any capitalized terms not otherwise defined in this License, are defined in the <a href="https://blog.placeit.net/terms-of-use/"  target="_blank">Placeit Terms of Use</a>.</p>                                    <p class="pl30">We grant you an ongoing, non-exclusive, worldwide license to make use of Content Templates as described below.</p>                                    <h4>What can I do?</h4>                                    <ol>                                        <li>You can modify or manipulate the Content Template with the functionality provided on the Placeit Service, including to combine the Content Template with other works (including Your Content) to create what we refer to as the Customized Product. The <strong>Customized Product</strong> is subject to the terms of this license.</li>                                        <li>You can modify or manipulate the Customized Product and combine the Customized Product with other works, and by applying your skill and effort, create something that is larger in scope and different in nature than the Customized Product. We call this the <strong>\u2018End Product\u2019</strong>. The End Product is also subject to the terms of this license. Together or separately, we refer to Customized Products and End Products as <strong>\u2018Product(s)\u2019</strong>.</li>                                        <li><i>Examples of End Products: publications, signage, packaging, websites, games, apps, presentations, online videos, films, TV shows, advertisements, posters, t-shirts and other merchandise.</i></li>                                        <li>You are permitted to communicate Products to the public, broadcast, display, distribute and reproduce them in any and all media for all uses, subject to the terms and restrictions in this License.</li>                                        <li>You can create Products for a client, and this license is then transferred from you to your client. Your client will be bound by the terms of this License.</li>                                        <li>You can use Products for a commercial purpose, Sell the End Product, and make any number of copies of the Products.</li>                                        <li><i>When we say \u201cSell\u201d, we mean sell, sub-license or distribute for any type of fee or charge.</i></li>                                        <li>You can use the Customized Product for merchandising, which means an End Product where the primary value of the product lies in the Customized Product itself.</li>                                        <li>You can make any number of End Products based upon a single Customized Product.</li>                                        <li>You may use a Product as part of a stylized/design trademark (also known as a \u201cdesign mark\u201d), provided that you have added a standard character trademark (also known as a \u201cword mark\u201d) to it. However, we don\u2019t warrant that you will be able to obtain trademark protection in any country for any mark that you apply for on the basis of a Content Template (including as customized). This is because the Content Templates are made available to all of our users on a non-exclusive basis, and it\u2019s quite possible that more than one user could legitimately use a Content Template to make the same (or a very similar) logo!</li>                                    </ol>                                    <h4>What can\u2019t I do?</h4>                                    <ol>                                        <li>You can\u2019t re-distribute a Content Template as stock, in a tool or template, whether the Content Template is part of a Customized Product or not. You can\u2019t re-distribute or make available a Content Template or Customized Product as-is or with superficial modifications.</li>                                        <li><i>For example, you can\u2019t allow end users to customize and print their own merchandise using the Customized Product via an online service, or sell copies of the Customized Product as part of a stock item or template.</i></li>                                        <li>You can\u2019t make available the Content Template through an application or service to end users on an \u201con demand\u201d, stock or inventory, \u201cmade to order\u201d or \u201cbuild it yourself\u201d basis.</li>                                    </ol>                                    <h4>The small print. Other license terms</h4>                                    <ol>                                        <li>You can only use the Content Templates and Products for lawful purposes. You can only use the Content Template and Products in accordance with our <a href="https://themeforest.net/legal/acceptable_use_policy"  target="_blank">Acceptable Use Policy</a>.</li>                                        <li>If a Product contains an image of a person, even if the Content Template is model-released, you can\u2019t use it in a way that creates a fake identity, implies personal endorsement of a product by the person, or in a way that is defamatory, obscene or demeaning, or in connection with sensitive subjects.</li>                                        <li>We reserve all rights not expressly granted herein. This means that any use of the Content Template is to be in accordance with the provisions of this License. You retain ownership of material that you upload to the Placeit Service (such as photos, images or plain text words).</li>                                        <li><strong>Important Note:</strong> Certain components of the Content Template will be sourced from a third party and different license terms or other limitations may apply to such components, such as someone else\u2019s license or an open source or creative commons license. That other license will apply to that other component. This License will apply to the rest of the Content Template, or Product as applicable. The notices required by those licenses are available <a href="https://blog.placeit.net/font-notices/"  target="_blank">here</a>. The Placeit Service uses images, trademarks, brands and names of third party products that have not been cleared for use by you. Intellectual property rights in relation to those products (including registered trademarks) belong to their respective owners. We are not affiliated or associated with, or authorised or endorsed by, the owners of the products. It is your responsibility to evaluate whether your use of these Items requires the permission of those third parties and if so, to obtain that permission.</li>                                        <li>This License can be terminated if you breach it. If that happens, you must stop making copies of or distributing the Customized Product and End Product until you remove the Content Template components from it. This license can also be terminated only in relation to the Customized Products and End Products to which a breach relates (rather than all products).</li>                                    </ol>                                    <p>Please contact <a href="mailto:support@placeit.net">Support@placeit.net</a> for additional questions.</p>                                </div>                            </div>                        </div><!-- tab panes -->                    </div><!-- col-aggreaments -->                </div><!-- row-wrapper -->            </div><!-- modal-body -->        </div><!-- modal-content -->    </div><!-- modal-dialog --></div>',prototype:{$colA:null,$tabs:null,$innerLinks:null,init:function init(e){Widget.prototype.init.call(this,e),this.$colA=this.element.find(".col-aggreaments"),this.$tabs=this.$colA.find(".nav-tabs"),this.$innerLinks=this.element.find('[data-target="#license-modal"]'),this._bindEvents()},_bindEvents:function _bindEvents(){return this.element.on("show.bs.modal",function(e){e.relatedTarget&&(e.relatedTarget.getAttribute("data-license")?this.activateLicense(e.relatedTarget.getAttribute("data-license")):this.activateLicense())}.bind(this)),this.element.on("hidden.bs.modal",bind(this)),this.$innerLinks.on("click",function(e){var t=e.target.getAttribute("data-license");return t&&this.activateLicense(t),!1}.bind(this)),$('a[data-toggle="tab"]',this.$colA).on("click",function(e){this.activateLicense(e.target.className)}.bind(this)),this},_defaultState:function _defaultState(){return this.$tabs.find('a[href="#default"]').tab("show"),this},activateLicense:function activateLicense(e){return e?this.$tabs.find('a[href="#'+e+'"]').tab("show"):this._defaultState(),this},activate:function activate(){return Widget.prototype.activate.call(this),this.element.modal("show"),this},deactivate:function deactivate(){return Widget.prototype.deactivate.call(this),this.element.modal("hide"),this},destroy:function destroy(){this.$tabs=null,this.$innerLinks=null,Widget.prototype.destroy.call(this)}}}),Class(UI,"FriendlyLicenseModal").inherits(Widget)({html:'        <div class="modal friendly-license-modal fade" id="friendly-license-modal" tabindex="-1" role="dialog" aria-labelledby="friendly-license-modal" aria-hidden="true">            <div class="modal-dialog">                <div class="modal-header">                    <button type="button" class="close -font-regular" data-dismiss="modal" aria-label="Close">                        <span aria-hidden="true">&times;</span>                    </button>                </div>                <div class="modal-content">                    <div class="modal-body">                        <p class="friendly-license-modal_intro-text">This human-readable summary of our license terms is provided for your convenience only. It is not a legally binding document and is not a substitute for the <a href="#license">Placeit license</a>.<br> Please ensure you read the real license carefully.</p>                        <h1 class="-font-black">You Can</h1>                        <div class="row">                            <div class="col-sm-6 flex flex-center">                                <div class="friendly-license-modal_image-wrapper">                                    <img src="/assets/license/for-your-final-design.svg" />                                </div>                                <p>You can use Placeit to <strong>add</strong>, alter and <strong>modify</strong> content to make a final design.</p>                            </div>                            <div class="col-sm-6 flex flex-center">                                <div class="friendly-license-modal_image-wrapper">                                    <img src="/assets/license/display-your-design.svg" />                                </div>                                <p>You can <strong>publish, broadcast, display</strong> and distribute the content you create with Placeit.</p>                            </div>                        </div>                        <div class="row">                            <div class="col-sm-6 flex flex-center">                                <div class="friendly-license-modal_image-wrapper">                                    <img src="/assets/license/sell-your-design.svg" />                                </div>                                <p>You\u2019re free to create content for a client and <strong>sell for a fee</strong>.</p>                            </div>                            <div class="col-sm-6 flex flex-center">                                <div class="friendly-license-modal_image-wrapper">                                    <img src="/assets/license/put-your-design-anywhere.svg" />                                </div>                                <p>You can <strong>put your final design on any kind of product</strong> and then sell those products.</p>                            </div>                        </div>                        <div class="row">                            <div class="col-sm-6 flex flex-center">                                <div class="friendly-license-modal_image-wrapper">                                    <img src="/assets/license/register-your-design.svg" />                                </div>                                <p>You can apply to register <strong>trademarks</strong> with the designs and logos you make.</p>                            </div>                        </div>                        <h1 class="-font-black">You Can\u2019t</h1>                        <div class="row">                            <div class="col-sm-6 flex flex-center">                                <div class="friendly-license-modal_image-wrapper">                                    <img src="/assets/license/dont-distribute-it.svg" />                                </div>                                <p>You can\u2019t take Placeit\u2019s content and distribute it as part of a design tool, stock images or templates.</p>                            </div>                            <div class="col-sm-6 flex flex-center">                                <div class="friendly-license-modal_image-wrapper">                                    <img src="/assets/license/dont-replicate-it.svg" />                                </div>                                <p>You can\u2019t take Placeit\u2019s content and use it to make your own version of Placeit.</p>                            </div>                        </div>                        <div class="row">                            <div class="col-sm-6 flex flex-center">                                <div class="friendly-license-modal_image-wrapper">                                    <img src="/assets/license/dont-fake-it.svg" />                                </div>                                <p>You can\u2019t use a final product that contains an image of a person or third party brands in a way that is derogatory or implies endorsement by them</p>                            </div>                        </div>                        <p class="fine-print">                            <a href="#license">Ok, but I still want to read the fine print</a>                        </p>                    </div>                </div>            </div>        </div>    ',prototype:{$licenseLinks:null,_onLicenseModalClick:null,_onHiddenModal:null,init:function init(e){Widget.prototype.init.call(this,e),this.$licenseLinks=this.element.find('[href="#license"]'),this._onLicenseModalClick=this._onLicenseModalClick.bind(this),this._onHiddenModal=this.destroy.bind(this),this._bindEvents()},_bindEvents:function _bindEvents(){return this.$licenseLinks.on("click",this._onLicenseModalClick),this.element.on("hidden.bs.modal",this._onHiddenModal),this},_onLicenseModalClick:function _onLicenseModalClick(e){return e.preventDefault(),e.stopPropagation(),this.deactivate(),(new UI.LicenseModal).activate(),this},activate:function activate(){return Widget.prototype.activate.call(this),this.element.modal("show"),this},deactivate:function deactivate(){return Widget.prototype.deactivate.call(this),this.element.modal("hide"),this},destroy:function destroy(){this.$licenseLinks.off("click",this._onLicenseModalClick),this.element.data("modal",null),this.$licenseLinks=null,this._onLicenseModalClick=null,this._onHiddenModal=null,Widget.prototype.destroy.call(this)}}}),Class(UI,"SubscribeMailingModal").inherits(Widget)({html:'    <div class="modal fade" id="subscribeMailingModal" tabindex="-1" role="dialog" aria-labelledby="subscribeMailingModal" aria-hidden="true">      <div class="modal-dialog modal-sm">        <div class="modal-content">          <div class="modal-header">            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>            <h4 class="main-title">Get Notified When We Add New Templates!</h4>            <div class="secondary-title">We\'ll send you an email once a month with our latest templates and discounts!</div>          </div>          <div class="modal-body text-center">            <button class="button primary main-actions confirm">Subscribe</button>            <button class="button link tertiary main-actions decline">No Thanks</button>            <div class="text-mute">You can also edit this setting in your account.</div>          </div>        </div>      </div>    </div>',prototype:{confirmBtn:null,declineBtn:null,init:function init(e){Widget.prototype.init.call(this,e),this.confirmBtn=this.element.find(".confirm"),this.declineBtn=this.element.find(".decline"),this.bindEvents()},bindEvents:function bindEvents(){this.confirmBtn.on("click",function(){var e={placeit_promotion_notifications:!0};Helpers.App.updateEmailNotifications(e),this.deactivate()}.bind(this)),this.declineBtn.on("click",this.deactivate.bind(this)),this.element.on("hidden.bs.modal",bind(this))},activate:function activate(){return Widget.prototype.activate.call(this),this.element.appendTo(document.body),this.element.modal("show"),this},deactivate:function deactivate(){return Widget.prototype.deactivate.call(this),this.element.detach(),this.element.modal("hide"),this},destroy:}),Class(UI,"StoredBillingInfoOverlay").inherits(Widget)({html:'        <div class="modal stored-card-overlay fade" tabindex="-1" role="dialog" aria-labelledby="storedBillingInfoOverlayLabel" aria-hidden="true">          <div class="modal-dialog">            <div class="modal-content">                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>              <div class="modal-header">                <h4>Payment</h4>              </div>              <div class="modal-body">                <div id="stored-card">                  <div class="form-group row card-info-title">                    <div class="col-xs-6">Credit Card</div>                    <div class="col-xs-6">Last Four Digits</div>                  </div>                  <div class="form-group row card-info">                    <div class="card-type col-xs-6"></div>                    <div class="card-last-four col-xs-6" data-hj-suppress></div>                  </div>                </div>                <div class="form-grop actions">                  <div class="actions-wrapper">                    <a href="#" class="button primary use-stored">Use this Card</a>                    <span class="cta-divider-text">or</span>                    <a href="#" class="change-card">Enter Another</a>                  </div>                  <div class="processing-message">                    Your transaction is being processed...                  </div>                </div>              </div>            </div>          </div>        </div>    ',prototype:{elementId:null,storedCardTypeElement:null,storedCardLastFourElement:null,useStoredBillingInfoElement:null,changeCardElement:null,actionsWrapperElement:null,processingMessageElement:null,recurlyData:null,init:function init(e){Widget.prototype.init.call(this,e),this.elementId=Math.random().toString(36).substring(5),this.element[0].setAttribute("id","storedBillingInfoOverlay-"+this.elementId),this.storedCardContainer=this.element.find("#stored-card"),this.storedCardTypeElement=this.element.find(".card-type"),this.storedCardLastFourElement=this.element.find(".card-last-four"),this.useStoredBillingInfoElement=this.element.find(".use-stored"),this.changeCardElement=this.element.find(".change-card"),this.actionsWrapperElement=this.element.find(".actions-wrapper"),this.processingMessageElement=this.element.find(".processing-message"),this.closeBtn=this.element.find("button.close"),this._bindEvents()},_bindEvents:function _bindEvents(){return this.closeBtn.bind("click",this._closeEventHandler.bind(this)),this.element.bind("keyup",bind(this)),this.element.on("hidden.bs.modal",bind(this)),this.changeCardElement.on("click",function(e){e.preventDefault(),this.deactivate(),this.dispatch("change-card",{recurlyData:this.recurlyData})}.bind(this)),this.useStoredBillingInfoElement.on("click",function(e){window.isPastDue?(this.deactivate(),Modals.Billing.unbindBillingInfoHide().setupUpdateCardModal(Modals.Billing._billingUpdateSuccessCallback)):(e.preventDefault(),this._processingUIState(),this.deactivate(),this.dispatch("use-stored-card",{recurlyData:this.recurlyData}))}.bind(this)),this},_closeEventHandler:function _closeEventHandler(){Helpers.GlobalEventTracker.purchaseCanceled()},refresh:function refresh(e){return(this.recurlyData=e).billing_info.lastFour?(this.storedCardTypeElement.text(e.billing_info.cardType),this.storedCardLastFourElement.text(e.billing_info.lastFour)):e.billing_info.paypalBillingAgreementId&&(this.storedCardContainer.detach(),this.useStoredBillingInfoElement.html("Use PayPal"),this.changeCardElement.html("Enter Credit Card")),this},_processingUIState:function _processingUIState(){return this.actionsWrapperElement.hide(),this.processingMessageElement.show(),this},_processedUIState:function _processedUIState(){return this.actionsWrapperElement.show(),this.processingMessageElement.hide(),this},detach:function detach(){return this.element.detach(),this},activate:function activate(){this.element.modal("show"),Widget.prototype.activate.call(this)},deactivate:function deactivate(){this.element.modal("hide"),$(".modal-backdrop").remove(),Widget.prototype.deactivate.call(this)},destroy:function destroy(){this.elementId=null,this.storedCardContainer=null,this.storedCardTypeElement=null,this.storedCardLastFourElement=null,this.useStoredBillingInfoElement=null,this.changeCardElement=null,this.actionsWrapperElement=null,this.processingMessageElement=null,this.recurlyData=null,this.closeBtn=null,Widget.prototype.destroy.call(this)}}}),Class(UI,"SinglePurchaseDiscountModal").inherits(Widget).includes(Translator)({html:'        <div class="modal fade" id="singlePurchaseDiscountModal" tabindex="-1" role="dialog" aria-labelledby="singlePurchaseDiscountModal" aria-hidden="true">            <div class="modal-dialog modal-sm">                <div class="modal-content">                    <div class="modal-header">                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>                        <h4 class="modal-title"><%= t("Congratulations") %>!</h4>                    </div>                    <div class="modal-body">                        <div class="description"></div>                        <button class="button primary btn-block" data-dismiss="modal"><%= t("OK") %>!</button>                        <div class="disclaimer"><%= t("Coupon does not apply to subscription") %>!</div>                    </div>                </div>            </div>        </div>',prototype:{description:I18nUtils.t("You will now get {{discount}} off of all one-time purchases!"),$description:null,init:function init(){
Widget.prototype.init.call(this),this.$description=this.element.find(".description")},activate:function activate(){var e;return Widget.prototype.activate.call(this),$modal=$("#singlePurchaseDiscountModal"),$modal.length||(e=Helpers.CouponHelper.getDiscount(),this.$description.text(this.description.replace("{{discount}}",e.label)),this.element.appendTo(document.body)),this.element.modal("show"),this},deactivate:function deactivate(){return Widget.prototype.deactivate.call(this),this.element.detach(),this.element.modal("hide"),this}}}),Module(Helpers,"PurchasesModalHelper")({prototype:{$compPreviewImage:null,instantiateStoredBillingInfoOverlay:function instantiateStoredBillingInfoOverlay(){this.storedBillingInfoOverlay===undefined&&(this.appendChild(new UI.StoredBillingInfoOverlay({name:"storedBillingInfoOverlay"})),this.storedBillingInfoOverlay.bind("change-card",this._showPaymentForm.bind(this)),this.storedBillingInfoOverlay.bind("use-stored-card",this._useStoredBillingInfo.bind(this)))},_showModalHandler:function _showModalHandler(){var e=!1;e=Helpers.StageType.isVideo(),this.$modalTitle.text(e?this.VIDEO_TITLE_TEXT:this.IMAGE_TITLE_TEXT),this.tabsWidget.showTabs(),e?(this.tabsWidget.hideTabs().activateRegularTab(),this.resolutionsWidget.showOptions("video_product")):(Helpers.StageType.isStage()||Helpers.StageType.isTool())&&Helpers.StageType.isSmartTemplate()?(this.tabsWidget.hideTabs().activateRegularTab(),this.resolutionsWidget.showOptions("smart_template")):(Helpers.GlobalEventTracker.track("deprecated:method",{error:!1,module:"purchaseModalHelper._showModalHandler.elseStatement"}),this.resolutionsWidget.showOptions("normal")),this._updatePriceForPackage(),this._enableSubmitButtons()},show:function show(){this.element.css({display:"block",opacity:0,visibility:"visible",position:"relative",top:"-"+this.element.innerHeight()+"px"}).animate({opacity:1,top:"0px"},400)},_showStoredBillingInfo:function _showStoredBillingInfo(){this.instantiateStoredBillingInfoOverlay(),this.storedBillingInfoOverlay.refresh(this.signedData),this.storedBillingInfoOverlay.activate()},_showPaymentForm:function _showPaymentForm(){var e,t,i,n=encodeURI(window.location.href);if(e=this.signedData,Helpers.StageType.isFusionVideo())i=EventTracker.info({type:"Purchase:success:fusionvideo",data:{videoV5:null}}),t={ajaxUrl:"/purchases/{{token}}/video_v4_transaction",ajaxParams:{license_id:e.license_id,resolution_id:e.resolution_id,video_id:Helpers.StageType.getVideoProductUUID(),upload_to_youtube:Helpers.StageType.isYouTubeUpload(),eventData:i,stage_id:Helpers.StageType.getStageID()}};else if(Helpers.StageType.isVideoV5())i=EventTracker.info({type:"Purchase:success:fusionvideo",data:{videoV5:1}}),t={ajaxUrl:"/purchases/{{token}}/video_v5_transaction",ajaxParams:{license_id:e.license_id,resolution_id:e.resolution_id,stage_id:Helpers.StageType.getStageID(),designPlan:JSON.stringify(Helpers.StageType.getDesignPlan()),eventData:i,referrer:n}};else if(Helpers.StageType.isSmartTemplate()){var s="/purchases/{{token}}/smart_template_transaction",r=Helpers.StageType.getStageID(),a=JSON.parse(JSON.stringify(Helpers.StageType.getDesignPlan())),o="Purchase:success:image",l=Service.MultiplePurchase.getInstance();if(a.referrer=n,delete a.previewImage,l.isMultiplePurchase()){var c=[];s="/purchases/{{token}}/multi_purchase_transaction",a=[],l.getSelectedDataObjects().forEach(function(e,t){c.push({type:e.type,stage_id:e.id}),a.push(JSON.parse(e.designPlan)),Boolean(a[t])&&delete a[t].previewImage}),r=JSON.stringify(c)}Helpers.App.getSubscription()&&(o="Purchase:success:image:withSubscription"),i=EventTracker.info({type:o,data:{videoV5:null}}),t={ajaxUrl:s,ajaxParams:{license_id:e.license_id,resolution_id:e.resolution_id,stage_id:r,designPlan:JSON.stringify(a),eventData:i}}}t.ajaxParams.coupon_code=null,Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyTo(Helpers.CouponHelper.TYPE_SINGLE_PURCHASE)&&(t.ajaxParams.coupon_code=Helpers.CouponHelper.getCode()),$.extend(!0,e,t);var u=!0;e.billing_info.lastFour!==undefined&&(u=!1),Helpers.App.isGuestCheckoutExperimentActive()&&(u=!0),this.instantiatePurchaseOverlay(e,u).render($("body")).activate().initPurchaseForm()},hideFooter:function(){this.$modalFooter.hide()},showFooter:function(){this.$modalFooter.show()},_showTaxInfo:function(){this.$taxInformation.show()},_hideTaxInfo:function(){this.$taxInformation.hide()}}}),Module(Helpers,"PurchasesPostHelper")({prototype:{_purchaseProxyAjax:function _purchaseProxyAjax(t){var e,i,n,s,r,a,o;return s=this,o=t.url,r=!0===((n=PurchaseSupport.getRequestDataByUrl(o))&&n.isPollingEnabled),i={url:o,data:t.data,type:"POST",dataType:"json"},!0===r?(a={delay:n.pollingConfig.delay,times:n.pollingConfig.times,pingURL:n.pingURL},e=P.ajax(i).then(PurchaseSupport.buildPolling(a))):e=P.ajax(i),e.then(function(e){return"function"==typeof t.callbackSuccess&&t.callbackSuccess.call(s,e),e})["catch"](function(e){return"function"==typeof t.callbackError&&t.callbackError.call(s,e),Promise.reject(e)})},_formSubmitHandler:function _formSubmitHandler(e){var t;e.preventDefault(),this._disableSubmitButtons(),t="free"===this.resolutionsWidget.getSelected().data("allowed-licenses")[0];var i=Boolean(Service.GuestCheckout.getInstance().getFormSubmitter());return!1===Helpers.App.isLoggedIn()&&!1===t&&!1===i&&!1===Helpers.App.getSubscription()?(Service.MultiplePurchase.getInstance()._saveSelectedStagesInCookie(),Helpers.App.setNextLoginAction("activate-purchase"),this._notLoggedInHandler()):this._normalPurchaseFlow()},_isAlreadyPurchased:function _isAlreadyPurchased(){var e,t,i,n,s,r,a;return Helpers.GlobalEventTracker.track("deprecated:method",{error:!1,module:"purchaseModalPostHelper._isAlreadyPurchased."}),e=this.resolutionsWidget.getSelected().data("allowed-licenses")[0],Helpers.StageType.isFree()||"free"===e,t=Helpers.StageType.getProductshotInfo(),Helpers.App.getUrlParam("video_process_id"),s=!1,t&&(n=Helpers.StageType.getBackgroundID(),Helpers.GlobalEventTracker.track("deprecated:method",{error:!1,module:"purchaseModalPostHelper._isAlreadyPurchased.backgroundID."+n}),i={hsh:t.hsh,stage_id:parseInt(Helpers.StageType.getStageID(),10),res:Helpers.Resolutions.getActive().key,image_type_id:window._stageData.stage_data.image_type},n&&(i.background_id=parseInt(n,10)),r=!0===page.stage.getDownloaded()),a=page.appNavBar.myDriveDownloads.getItems(),s=r&&a.some(function(e){var t=!0;for(option in i)e[option]!==i[option]&&(t=!1);if(t)return!0}),!Helpers.StageType.isIOSScreenshot()&&s},_normalPurchaseFlow:function _normalPurchaseFlow(){var e=this;e._selectedIdBeforeLogin=null,this._disableSubmitButtons();var t=Service.MultiplePurchase.getInstance(),i=t.getPreviouslySelectedIds();if(!1===t.isPreviousSelectedIdEqualTocurrentId()&&i.length===t.constructor.CURRENT_DEFAULT_TEMPLATE_ADDED&&Helpers.App.isMerchPreviewEnabled()&&!1===Helpers.App.isMerchYggdrasilEnabled()&&Helpers.StageType.isLogo())return e._selectedIdBeforeLogin=i[0],void e._preparePreviousSingleDownload(i[0]);e._prepareDownloadCallback()},_preparePreviousSingleDownload:function _preparePreviousSingleDownload(e){var t=this,i=Service.MultiplePurchase.getInstance();i.getDesignPlan(e).then(Utils.bindFn(t)(t._previouslySelectedDesignPlanHandler))["catch"](function(e){throw"timeout"===e.message&&page.flash("Oops! We're having difficulties processing your request at this time, try again later.","alert"),i.deleteAfterLoginCookie(),new Error("Slow internet connection: "+JSON.stringify(e.message))})},_previouslySelectedDesignPlanHandler:function _previouslySelectedDesignPlanHandler(e){var t=this,i=Service.MultiplePurchase.getInstance(),n=t._selectedIdBeforeLogin;if(!1!==Boolean(e)){var s=t._getPreviouslySelectedDesignPlanData({previouslySelectedStageId:n,designPlan:e});!1===i.getSelectedIds().includes(s.id)&&i.add(s),i.getPrice({stages_id:[n]}).then(Utils.bindFn(t)(t._getPreviousSingleDownloadPriceHandler))}},_getPreviouslySelectedDesignPlanData:function _getPreviouslySelectedDesignPlanData(e){var t=Service.MultiplePurchase.getInstance(),i=t.getPristineMerchPreviewStageData(e.previouslySelectedStageId),n=i[0].name,s=i[0].category;return{selected:!0,processed:!0,canProcess:!0,preview:e.designPlan.previewImage.value.replace("data:image/png;base64,","")||t.constructor.EMPTY_THUMBNAIL_PLACEHOLDER,type:"image",id:e.previouslySelectedStageId,price:0,name:n,category:s,designPlan:JSON.stringify(e.designPlan)}},_getPreviousSingleDownloadPriceHandler:function _getPreviousSingleDownloadPriceHandler(e){var t=this,i=Service.MultiplePurchase.getInstance(),n=t._selectedIdBeforeLogin;e.prices&&e.prices[0]&&(i.update(n,{price:e.prices[0]/100}),t._prepareDownloadCallback({stageId:n,price:e.prices[0]/100}))},_prepareDownloadCallback:function _prepareDownloadCallback(e){var t,s,i,r,a,n,o,l=this;t=this.resolutionsWidget.getSelected(),s=t.val(),i=Registry.Licenses.getByKey(t.data("allowed-licenses")[0]),r=i.id,Helpers.Resolutions.getActive().key,a="free"===i.key,n=Helpers.App.getSubscription(),o=this._purchaseableWithSubscription(s,r,n);var c=Helpers.PremiumAssetsValidator.getStageInfo();e&&e.stageId&&(c=Service.MultiplePurchase.getInstance().getCustomStageInfo(e));var u=Helpers.Price.stage(c);u.price.then(function(n){u.priceWithDiscount.then(function(e){var t=l.isFullyFreeStage(o,n,e),i="_singDownload";o&&!Helpers.StageType.isCropperTool()&&(i="_subscriptionDownload"),t&&(Helpers.StageType.isTool()||!1===Boolean(o))&&(i=Helpers.StageType.isFusionVideo()&&a?"_inBrowserDownload":"_freeStageDownload"),!1===Boolean(o)&&a&&(i="_inBrowserDownload"),l._downloadHandler(s,r,i)})})["catch"](function(e){throw new Error(e)})},_inBrowserDownload:function _inBrowserDownload(e,t){this.deactivate(),this._enableSubmitButtons();var i={stage_id:Helpers.StageType.getStageID(),category:window._pl_category,stage_type:Helpers.StageType._types[window._stageData.stage_data.image_type]||"No Info",tags:Helpers.StageType.getStageTags()||"No Info",background:Helpers.StageType.getBackgroundOrColorID()||"No Info",thumb:window._stageData.stage_data.large_thumb||"No Info",slug:window._stageData.stage_data.slug||"No Info"};Helpers.StageType.isFusionVideo()?this._inBrowserDownloadVideo(i):(i.license_id=t,i.resolution_id=e,window.location.href="/stages/"+Helpers.StageType.getProductshotInfo().hsh+"/download",!0===Helpers.StageType.getStageInfo().is_free?Helpers.GlobalEventTracker.freeStageDownload(i):Helpers.GlobalEventTracker.freeDownload(i))},_inBrowserDownloadVideo:function _inBrowserDownloadVideo(e){var t=page.stage.getFullVideoSrc();Helpers.App.isDownloadIphoneFlowAvailable()&&Helpers.App.isMobile()?Helpers.App.shortcutDownloadModal(t,t):Helpers.App.isMobileDevice()?window.open(t,"_blank"):window.location.href=t,Helpers.Resolutions.getActive().key&&"small"===Helpers.Resolutions.getActive().key&&Helpers.GlobalEventTracker.freeVideoDownload(e)},_useStoredBillingInfo:function _useStoredBillingInfo(){var e,i,n,s,r,t,a,o,l,c,u,d=Service.MultiplePurchase.getInstance(),h=this;u=encodeURI(window.location.href),a=Helpers.StageType.isFusionVideo(),c=Helpers.StageType.isVideoV5(),i=this.signedData.license_id,n=this.signedData.resolution_id,s=Helpers.StageType.getStageID(),r=this.signedData.amount_in_cents,t={license_id:i,resolution_id:n,background_id:Helpers.StageType.getBackgroundID(),upload_to_youtube:a&&Helpers.StageType.isYouTubeUpload()},o=a||c?":fusionvideo":":image",l=Helpers.App.getSubscription()?o+":withSubscription":o;var p=EventTracker.info({type:"Purchase:success"+l,data:{videoV5:null}});if(Helpers.StageType.isFusionVideo())e="/purchases/quick_video_v4_transaction",t.video_id=Helpers.StageType.getVideoProductUUID(),t.eventData=p;else if(c)p.data.videoV5=1,e="/purchases/quick_video_v5_transaction",t.stage_id=s,t.designPlan=JSON.stringify(Helpers.StageType.getDesignPlan()),t.eventData=p,t.referrer=u;else if(Helpers.StageType.isSmartTemplate()){e="/purchases/quick_smart_template_transaction";var f=JSON.parse(JSON.stringify(Helpers.StageType.getDesignPlan()));f.referrer=u,delete f.previewImage;var g=s;if(d.isMultiplePurchase()){e="/purchases/{{token}}/multi_purchase_transaction";var m=[];f=[],d.getSelectedDataObjects().forEach(function(e,t){m.push({type:e.type,stage_id:e.id}),f.push(JSON.parse(e.designPlan)),Boolean(f[t])&&delete f[t].previewImage}),g=JSON.stringify(m)}t.stage_id=g,t.designPlan=JSON.stringify(f),t.eventData=p}else e="/purchases/quick_transaction",t.productshot_id=Helpers.StageType.getProductshotInfo().id;if(t.coupon_code=null,Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyTo(Helpers.CouponHelper.TYPE_SINGLE_PURCHASE)&&(t.coupon_code=Helpers.CouponHelper.getCode()),Helpers.App.isMerchYggdrasilEnabled())return t.eventData=p,void h._prepareYggdrasilData({url:e,_data:t,amountInCents:r,licenseId:i,resolutionId:n,stageId:s});this._purchaseProxyAjax.call(this,{url:e,data:t,callbackSuccess:function(e){var t=null;Helpers.GlobalEventTracker.purchaseSuccess({amount_in_cents:r,license_id:i,resolution_id:n,stage_id:s,user_id:Helpers.App.getUser().id,invoice_number:e.invoice_number}),e.coupon&&(t=e.coupon),this._enableSubmitButtons(),Helpers.CouponHelper.markAsUsed(),this.dispatch("purchase.success",t)},callbackError:function(e){e.responseJSON=e.responseJSON||{};var t=e.message||e.responseJSON.message||e.responseJSON.error;this.deactivate(),this.purchaseOverlay&&this.purchaseOverlay.deactivate(),this._enableSubmitButtons(),this.dispatch("purchase.failed",{message:t,status:e.status,errorType:e.responseJSON.errorType})}})},_prepareYggdrasilData:function _prepareYggdrasilData(e){var t=this,i=Service.MultiplePurchase.getInstance();i.showDownloadLoader(),i.getDesignPlanManager().prepareUIJSON().then(Utils.bindFn(t)(t._continuePurchaseFlow.bind(t,e)))["catch"](function(e){throw new Error(JSON.stringify(e))})},_continuePurchaseFlow:function _continuePurchaseFlow(e){var t=this;Service.MultiplePurchase.getInstance().isMultiplePurchase()&&t._updateMultiPurchaseData(e),t._doPurchaseProxyAjaxRequest(e)},_doPurchaseProxyAjaxRequest:function _doPurchaseProxyAjaxRequest(i){var n=this;n._purchaseProxyAjax.call(n,{url:i.url,data:i._data,callbackSuccess:function(e){var t=null;Helpers.GlobalEventTracker.purchaseSuccess({amount_in_cents:i.amountInCents,license_id:i.licenseId,resolution_id:i.resolutionId,stage_id:i.stageId,user_id:Helpers.App.getUser().id,invoice_number:e.invoice_number}),e.coupon&&(t=e.coupon),n._enableSubmitButtons(),Helpers.CouponHelper.markAsUsed(),n.dispatch("purchase.success",t)},callbackError:function(e){e.responseJSON=e.responseJSON||{};var t=e.message||e.responseJSON.message||e.responseJSON.error;n.deactivate(),n.purchaseOverlay&&n.purchaseOverlay.deactivate(),n._enableSubmitButtons(),n.dispatch("purchase.failed",{message:t,status:e.status,errorType:e.responseJSON.errorType})}})},_updateMultiPurchaseData:function _updateMultiPurchaseData(e){var t=this,i=Service.MultiplePurchase.getInstance();e.url="/purchases/{{token}}/multi_purchase_transaction";var n=[],s=[];i.getSelectedDataObjects().forEach(Utils.bindFn(t)(t._updateItemData.bind(t,n,s)));var r=JSON.stringify(n);return e._data.stage_id=r,e._data.designPlan=JSON.stringify(s),e},_updateItemData:function _updateItemData(e,t,i,n){e.push({type:i.type,stage_id:i.id}),t.push(JSON.parse(i.designPlan)),Boolean(t[n])&&delete t[n].previewImage},_freeStageDownload:function _freeStageDownload(t,i){var e,n,s,r,a=encodeURI(window.location.href);if(Helpers.App.isGuestCheckoutExperimentActive())return r={type:"warning",content:'Please create an account to continue your download.<br /> Already have an account?                         <a href="#" onclick="event.preventDefault();page.appNavBar.ssoModal.showTab(\''+UI.SsoModal.TAB_LOGIN+'\')" class="trigger_login_link" role="button">Log In</a>',contentForceLogIn:'Please log in to continue your download.<br /> Don\'t have an account?                         <a href="#" onclick="event.preventDefault();page.appNavBar.ssoModal.showTab(\''+UI.SsoModal.TAB_SIGNUP+'\')" class="trigger_signup_link" role="button">Sign Up</a> today!'},this.deactivate(),page.appNavBar.ssoModal.activate(),void page.appNavBar.ssoModal.showMessage(r);if(s=Helpers.StageType.isFusionVideo(),n={is_comp:Helpers.Resolutions.isComp(),background_id:Helpers.StageType.getBackgroundID(),upload_to_youtube:s&&Helpers.StageType.isYouTubeUpload(),coupon_code:null},Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyTo(Helpers.CouponHelper.TYPE_SINGLE_PURCHASE)&&(n.coupon_code=Helpers.CouponHelper.getCode()),Helpers.StageType.isFusionVideo())e="/purchases/"+t+"/"+i+"/free_download_video_v4",n.video_id=Helpers.StageType.getVideoProductUUID();else if(Helpers.StageType.isVideoV5())n.stage_id=Helpers.StageType.getStageID(),n.designPlan=JSON.stringify(Helpers.StageType.getDesignPlan()),n.referrer=a,e="/purchases/"+t+"/"+i+"/free_download_video_v5";else if(Helpers.StageType.isSmartTemplate()){e="crop_video"===Helpers.StageType.getStageData().tool_name?"/purchases/"+t+"/"+i+"/free_download_video_trim_crop":Helpers.StageType.isToolName("video_to_gif")?"/purchases/"+t+"/"+i+"/free_download_video_to_gif":"/purchases/"+t+"/"+i+"/free_download_smart_template";var o=Helpers.StageType.getStageInfo().id,l=JSON.parse(JSON.stringify(Helpers.StageType.getDesignPlan()));l.referrer=a,delete l.previewImage;var c=Service.MultiplePurchase.getInstance();if(c.isMultiplePurchase()){var u=[];l=[],e="/purchases/"+t+"/"+i+"/multi_free_download",c.getSelectedDataObjects().forEach(function(e,t){u.push({type:e.type,stage_id:e.id}),l.push(JSON.parse(e.designPlan)),Boolean(l[t])&&delete l[t].previewImage}),o=JSON.stringify(u)}n.stage_id=o,n.designPlan=JSON.stringify(l)}this._purchaseProxyAjax.call(this,{url:e,data:n,callbackSuccess:function(){this.deactivate(),this.purchaseOverlay&&this.purchaseOverlay.deactivate(),this._enableSubmitButtons(),this.dispatch("purchase.success"),Helpers.StageType.isFusionVideo()&&Helpers.App.getUrlParam("linked_smart_template_id")&&Helpers.GlobalEventTracker.pipEvent("animated:pip:download");var e={stage_id:Helpers.StageType.getStageID(),resolution_id:t,license_id:i,category:window._pl_category,stage_type:Helpers.StageType._types[window._stageData.stage_data.image_type]||"No Info",tags:Helpers.StageType.getStageTags()||"No Info",background:Helpers.StageType.getBackgroundOrColorID()||"No Info",thumb:window._stageData.stage_data.large_thumb||"No Info",slug:window._stageData.stage_data.slug||"No Info"};!0===Helpers.StageType.getStageInfo().is_free?(Helpers.GlobalEventTracker.freeStageDownload(e),Helpers.App.updateFreebiesInfo()):Helpers.GlobalEventTracker.freeDownload(e)},callbackError:function(e){e.responseJSON=e.responseJSON||{};var t=e.message||e.responseJSON.message||e.responseJSON.error;this.deactivate(),this.purchaseOverlay&&this.purchaseOverlay.deactivate(),this._enableSubmitButtons(),this.dispatch("purchase.failed",{message:t,status:e.status,errorType:e.responseJSON.errorType}),Helpers.App.updateFreebiesWhenStageFails()}})},_subscriptionDownload:function _subscriptionDownload(e,n){var t,i=Helpers.StageType.isVideoV5(),s=encodeURI(window.location.href);if(Helpers.StageType.isFusionVideo()){var r={video_id:Helpers.StageType.getVideoProductUUID(),upload_to_youtube:Helpers.StageType.isYouTubeUpload()},a="/purchases/"+e+"/"+n+"/video_v4_subscription";t=":fusionvideo"}else if(i){r={stage_id:Helpers.StageType.getStageID(),designPlan:JSON.stringify(Helpers.StageType.getDesignPlan()),referrer:s},a="/purchases/"+e+"/"+n+"/video_v5_subscription";t=":fusionvideo"}else if(Helpers.StageType.isSmartTemplate()){r={};var o=Helpers.StageType.getStageID(),l=(a="/purchases/"+e+"/"+n+"/smart_template_subscription",JSON.parse(JSON.stringify(Helpers.StageType.getDesignPlan())));l.referrer=s,delete l.previewImage;var c=Service.MultiplePurchase.getInstance();if(c.isMultiplePurchase()){var u=[];l=[],a="/purchases/"+e+"/"+n+"/multi_download_with_subscription",c.getSelectedDataObjects().forEach(function(e,t){u.push({type:e.type,stage_id:e.id}),l.push(JSON.parse(e.designPlan)),Boolean(l[t])&&delete l[t].previewImage}),o=JSON.stringify(u)}r.stage_id=o,r.designPlan=JSON.stringify(l),t=":image"}var d=EventTracker.info({type:"Purchase:success"+t,data:{videoV5:!0===i?1:null}});r.eventData=d,Helpers.App.isGuestCheckoutExperimentActive()&&(r.guest_token=Service.GuestCheckout.getInstance().getToken()),this._purchaseProxyAjax.call(this,{url:a,data:r,callbackSuccess:function h(t){var i=this;this.deactivate(),this._enableSubmitButtons(),Helpers.GlobalEventTracker.subscriptionDownload({stage_id:Helpers.StageType.getStageID(),license_id:n,resolution_id:e}),Helpers.StageType.isFusionVideo()&&Helpers.App.getUrlParam("linked_smart_template_id")&&Helpers.GlobalEventTracker.pipEvent("animated:pip:download"),Helpers.App._getPurchases(function(){var e=t.message||t.responseJSON.message;i.dispatch("purchase.success",{message:e}),!1===Helpers.App.isGuestCheckoutExperimentActive()&&window.page.appNavBar.updateStatus()})},callbackError:function p(e){e.responseJSON=e.responseJSON||{};var t=e.message||e.responseJSON.message||e.responseJSON.error;412===e.status&&(Helpers.App.setSubscription(!1),this.showFooter(),window.page.appNavBar.updateStatus()),this.deactivate(),this._enableSubmitButtons(),this.dispatch("purchase.failed",{message:t,errorType:e.responseJSON.errorType})}})},_singDownload:function _singDownload(e,t){var i=this,n={stage_id:Helpers.StageType.getStageID(),is_comp:Helpers.Resolutions.isComp()};if(null!==Helpers.StageType.getProductshotInfo()&&(n.productshot_id=Helpers.StageType.getProductshotInfo().id),Helpers.App.isGuestCheckoutExperimentActive()){var s=Service.GuestCheckout.getInstance().getToken();n.guest_token=s}this._purchaseProxyAjax.call(this,{url:"/purchases/"+e+"/"+t+"/sign",data:n,callbackSuccess:function r(e){this.deactivate(),this._enableSubmitButtons();var t=Service.MultiplePurchase.getInstance();(t.isMultiplePurchase()||t.containsPremiumAssets())&&(e.amount_in_cents=100*t.getSelectedTotalPrice()),this.signedData=e,this.unbind("use-stored-billing-info").bind("use-stored-billing-info",,this._showPaymentForm()},callbackError:function a(e){e.responseJSON=e.responseJSON||{};var t=e.message||e.responseJSON.message||e.responseJSON.error;this.deactivate(),this._enableSubmitButtons(),this.dispatch("purchase.failed",{message:t,status:e.status,errorType:e.responseJSON.errorType})}})},_downloadHandler:function _downloadHandler(e,t,i){var n=this,s={resolutionID:e,licenseID:t,callback:i};n._isMultiplePurchase()?n._downloadMultiplePurchaseHandler(s):n._downloadSinglePurchaseHandler(s)},_isMultiplePurchase:function _isMultiplePurchase(){var e=this,t=Service.MultiplePurchase.getInstance(),i=1;return _isMultiplePurchase=t.canDoMultiplePurchases()&&(t.getPreviouslySelectedIdsLength()>i||!1===Boolean(e._selectedIdBeforeLogin))},_downloadMultiplePurchaseHandler:function _downloadMultiplePurchaseHandler(e){var t=this,i=Service.MultiplePurchase.getInstance(),n=t._getSelectedIdsForDownload(e),s=function(){i.deleteAfterLoginCookie(),t[e.callback](e.resolutionID,e.licenseID)};t._needToWaitForDesignPlan(e)?t._executeCallbackAfterPrepareUIJSON(e,s):Helpers.App.isMerchYggdrasilEnabled()&&0<i.getPreviouslySelectedIdsLength()?t._executeCallbackAfterPrepareData(n,s):Helpers.App.isMerchYggdrasilEnabled()?s():(i.unbind("thumbnails.processed").bind("thumbnails.processed",s),i.prepareData(n))},_getSelectedIdsForDownload:function _getSelectedIdsForDownload(e){var t=Service.MultiplePurchase.getInstance(),i=t.getSelectedIds();return"_subscriptionDownload"===e.callback&&((i=t.getAllSelectedIds()).unshift(Number(Helpers.StageType.getStageID())),t.clean()),i},_executeCallbackAfterPrepareData:function _executeCallbackAfterPrepareData(e,t){var i=Service.MultiplePurchase.getInstance();Promise.resolve(i.prepareData(e)).then(function(){return P.delay(1e3)}).then(function(){t()})},_executeCallbackAfterPrepareUIJSON:function _executeCallbackAfterPrepareUIJSON(e,t){var i=Service.MultiplePurchase.getInstance(),n=i.getSelectedIds();"_subscriptionDownload"===e.callback&&(n=i.getAllSelectedIds()),Promise.resolve(i.prepareData(n)).then(function(){i.getDesignPlanManager().prepareUIJSON().then(function(){t()})["catch"](function(e){throw new Error(JSON.stringify(e))})})},_needToWaitForDesignPlan:function _needToWaitForDesignPlan(e){return("_inBrowserDownload"===e.callback||"_subscriptionDownload"===e.callback||"_freeStageDownload"===e.callback)&&Helpers.App.isMerchYggdrasilEnabled()},_downloadSinglePurchaseHandler:function _downloadSinglePurchaseHandler(t){var i=this,e=Service.MultiplePurchase.getInstance(),n=Helpers.StageType.getStageID(),s=e.getSelectedDataObjects();i._beforeLoginSelectedIdIsDiffThanCurrent(s)&&(n=s[0].id),e.getPrice({stages_id:[n]}).then(function(e){i._updatePriceSinglePurchaseHandler(t,e,n)})},_beforeLoginSelectedIdIsDiffThanCurrent:function _beforeLoginSelectedIdIsDiffThanCurrent(e){var t=Service.MultiplePurchase.getInstance(),i=Helpers.App.isMerchPreviewEnabled()&&Helpers.StageType.isLogo();return(0<t.getPreviouslySelectedIdsLength()||!0===Boolean(this._selectedIdBeforeLogin))&&i&&Boolean(e[0])&&e[0].id},_updatePriceSinglePurchaseHandler:function _updatePriceSinglePurchaseHandler(e,t,i){var n=this,s=Service.MultiplePurchase.getInstance(),r=0<s.getPreviouslySelectedIdsLength()||!0===Boolean(n._selectedIdBeforeLogin),a=!0===s.getPreviouslySelectedIds().includes(Number(Helpers.StageType.getStageID()));!1!==r&&!0!==a||(s.clean(),s.addCurrentStage()),(t=s.updatePremiumPriceForCurrentStage(t)).prices&&t.prices[0]&&s.update(i,{price:t.prices[0]/100}),Helpers.App.getCookie("multiplePurchasesSelectedIds")&&Helpers.App.deleteCookie("multiplePurchasesSelectedIds"),n[e.callback](e.resolutionID,e.licenseID)},isFullyFreeStage:function isFullyFreeStage(e,t,i){var n=Service.MultiplePurchase.getInstance(),s=n.isMultiplePurchase();return(0===t||0===i)&&!1===s||!0===s&&0===n.getSelectedTotalPrice()}}}),Class(UI,"Purchases").inherits(Widget).includes(Helpers.SubscriptionHelper,Helpers.PurchasesModalHelper,Helpers.PurchasesPostHelper,Helpers.CouponHelper,Translator,ThemeSupport,CurrencyLabelSetter)({html:'    <div class="purchases" id="downloadOverlay" tabindex="-1" >        <div id="subscription-paused" style="display:none">          <span class="info-close">               <span>\xd7</span>           </span>           <p class="pause-title ">Your Subscription Is Paused</p>          <p class="pause-note ">It will automatically be activated again on {{pause_date}}</p>          <p class="pause-note ">Need it before? Please <a href="mailto:support@placeit.net" target="_blank">contact support</a></p>        </div>        <div id="subscription-past-due" style="display:none">          <span class="info-close">               <span>\xd7</span>           </span>           <p class="pause-title ">Your Account is Past Due</p>          <p class="pause-note ">You won\u2019t be able to make free downloads until your payment method is up to date.           Click <a href="#" class="handle-fix-cta">here</a> to update</p>        </div>        <div class="purchases-content">          <div class="purchases-header">            <div class="purchase-header__discount-label">                 <span class="purchase-header__discount-amount">30% OFF</span>             </div>             <h5 class="purchase-header__title">1. Single <span class="purchases__category-name"></span> Purchase</h5>            <h2 class="purchase-header__subtitle">You Only Get This <span class="purchases__category-name"></span></h2>           </div>          <div class="purchases-body">            <div class="tab-content download-tabs__content">              <div class="tab-pane active" id="normalDownload">                <form class="form purchase-options-form" role="form" id="normalDownload">                  <div class="resolutions-container">                   <div class="row download-overlay__image-size resolution-options is_video_product">                    <div class="purchases__video-wrapper purchases__video-wrapper--paused">                         <div class="purchases__video-play-button"></div>                         <video muted playsinline></video>                     </div>                   </div>                  <div class="row download-overlay__image-size resolution-options is_smart_template">                  </div>                  <p class="purchase-body__content-description">                     <strong>{{res_watermarked}}</strong>, High Resolution {{res_title}} (<span class="res_dimensions"></span>).<br />Commercial Usage Ok!                   </p>                   </div>                   <div class="button-container">                    <button class="button button--not-subscribed primary long purchase-price" type="submit">                      <span class="price-description">Buy <span class="only-highlight-underline">ONLY</span> This <span class="purchases__category-name"></span> for                         <span class="purchase-header__price purchase-header__price--original"></span>                         <span class="purchase-header__price purchase-header__price--quantity"></span>                       </span>                      <span class="price-free">                      </span>                    </button>                  </div>                  <p class="purchases__low-res-download">Or <a>Get the <strong>FREE</strong> Watermarked Low Res Video</a></p>                   <div class="purchases__watermark-container"><div class="purchases__watermark-or-div">OR</div><p class="purchases__watermark-paragraph"><a class="purchases__watermark-link">Download with watermark for free</a></p></div>                 </form>              </div>              <div class="coupon-field-container"></div>            </div>          </div>        </div>        <div class="widget-outer">          <div class="disclaimer-wrapper">             All Prices in {{currency_label}}.          </div>        </div>      </div>',resItemTemplate:'    <div class="download-overlay__image-size-item">        <label>            <input data-allowed-licenses="{{allowed_licenses}}" data-key="{{res_key}}" id="{{radio_id}}" name="resolution" type="radio" value="{{res_id}}" />            <p class="overlay--radio-title">{{res_title}}</p>            <p class="overlay--radio-desc res_dimensions">{{res_dimensions}}</p><br>            <p class="overlay--radio-desc">{{res_watermarked}}</p>            <p class="overlay--radio-desc ios_screenshot__purchase_disclaimer" style="display:none;">When you upload your screenshots, Apple will give you the option to automatically resize them down for smaller screen sizes.</p>            <b class="resolution-license-link-placeholder"></b>        </label>    </div>',fillerColumn:'<div class="download-overlay__image-size-item"></div>',discountPlanText:"You got ${{amount}} off because of your {{planName}} subscription!",taxAmountText:"Plus {{amount}} for {{taxType}}. All Prices in {{currency_label}}",subscriptionPlanText:"Using your {{planName}} subscription downloads",packPlanText:"Using your Download Pack",TEXT_VAT_EXEMPT_MESSAGE:"VAT Exempt. All Prices in {{currency_label}}.",TEXT_FREE_DOWNLOAD_TITLE:"Free Download",TEXT_DOWNLOAD_NOW:"Download Now",TEXT_FREE_DOWNLOAD_CATEGORY_TITLE:'Free <span class="purchases__category-name"></span> Download',TEXT_PAID_DOWNLOAD_CATEGORY_TITLE:'1. Single <span class="purchases__category-name"></span> Purchase',TEXT_PAID_DOWNLOAD_CATEGORY_SUBTITLE:'You Only Get This <span class="purchases__category-name"></span>',TEXT_DOWNLOAD_CATEGORY_TITLE:"GET YOUR {{categoryName}}!",TEXT_DISCOUNT_LABEL:"{{discount}} OFF",TEXT_DISCLAIMER_DEFAULT:"All Prices in {{currency_label}}",prototype:{IMAGE_TITLE_TEXT:"Get Your Image!",VIDEO_TITLE_TEXT:"Get Your Video!",$modalTitle:null,$form:null,$price:null,$priceOriginal:null,$priceQuantity:null,$priceDescription:null,$taxRate:null,init:function init(e){Widget.prototype.init.call(this,e),"undefined"!=typeof this.categoryName&&null!==this.categoryName||(this.categoryName=""),this.modalBody=this.element.find(".purchases-body"),this.containerForm=this.element.find("#normalDownload"),this.fillerColumn='<div class="download-overlay__image-size-item"></div>',this.subscriptionPaused=this.element.find("#subscription-paused"),this.subscriptionPastDue=this.element.find("#subscription-past-due"),this.fixCTA=this.element.find(".handle-fix-cta"),this.containers={video_product:this.containerForm.find(".is_video_product"),smart_template:this.containerForm.find(".is_smart_template")},this._renderResolutionItems(),this.$closeBtn=this.element.find(".close"),this.$modalTitle=this.element.find(".purchases-header h4"),this.$form=this.element.find(
".purchase-options-form"),this.$price=this.element.find(".purchase-price"),this.$priceOriginal=this.element.find(".purchase-header__price--original"),this.$priceQuantity=this.element.find(".purchase-header__price--quantity"),this.$priceDescription=this.$price.find(".price-description"),this.$priceFree=this.$price.find(".price-free"),this.$priceFree.text(this.constructor.TEXT_FREE_DOWNLOAD_TITLE),this.$priceFree.hide(),this.couponFieldContainerEl=this.element.find(".coupon-field-container"),this.appendChild(new UI.PurchasesModalTabs({name:"tabsWidget",element:this.element})),this.instantiateResolutionsWidget(),this.$openSubscriptionsLink=this.element.find("#open-subscriptions-modal"),this.$openPackagesLink=this.element.find("#open-packages-modal"),this.$modalFooter=this.element.find(".modal-footer"),this.$extraInformation=this.element.find(".button-container .plan-note"),this.$taxInformation=this.element.find(".disclaimer-wrapper"),this.$modalHeader=this.element.find(".purchases-header"),this.$couponLabel=this.$modalHeader.find(".purchase-header__discount-label"),this.$watermarkAnchor=this.element.find(".purchases__watermark-link"),this.$watermarkContainer=this.element.find(".purchases__watermark-container"),this.euCountries=Helpers.App.getEUCountries(),this.$video=this.element.find("video"),this._bindEvents()},instantiateCouponField:function instantiateCouponField(){var e=Helpers.CouponHelper.getDiscount(),t=this.constructor.TEXT_DISCOUNT_LABEL.replace("{{discount}}",e.label);this.element.find(".purchase-header__discount-label").addClass("active"),this.element.find(".purchase-header__discount-amount").text(t)},_renderResolutionItems:function _renderResolutionItems(){return!1===Array.isArray(window._pl_resolutions)||(window._pl_resolutions.forEach(function(e){if(!e.is_smart_template&&!e.is_video_product&&!e.is_video)return this;var t,i=e.key,n=e.id,s="resolution-"+n,r=e.allowed_licenses,a="[",o="]",l=e.name,c=e.width+"x"+e.height+" px",u=e.watermarked,d="",h="";if(r.forEach(function(e){1===a.length?a+='"'+e+'"':a+=',"'+e+'"'}),a+=o,e.is_video_product?(d="video_product",h="3"):e.is_smart_template&&(d="smart_template",h="12",c=""),t=this.constructor.resItemTemplate.replace("{{col_size}}",h).replace("{{res_key}}",i).replace("{{radio_id}}",s).replace("{{res_id}}",n).replace("{{res_dimensions}}",c).replace("{{res_watermarked}}",u),$(t).appendTo(this.containers[d]).find("#"+s).data("allowed-licenses",r),e.is_video&&"small"===e.key)$(t).clone().appendTo(this.containers.video_product).find("#"+s).data("allowed-licenses",r);else if(this.categoryName){var p=Helpers.StageType.getStageData().image_type,f=15===p||18===p;"smart_template"!==d||f||this._setContentInfo(l,u),"video_product"===d&&f&&this._setContentInfo("",u)}}.bind(this)),this.containers.video_product.prepend(this.constructor.fillerColumn).append(this.constructor.fillerColumn)),this},_setContentInfo:function _setContentInfo(e,t){var i=this.element.find(".purchase-body__content-description").html();i=i.replace("{{res_title}}",e).replace("{{res_watermarked}}",t),this.element.find(".purchase-body__content-description").html(i)},_bindEvents:function _bindEvents(){var t=this;this.$form.submit(function(){t.formSubmitted=!0}),this.$form.submit(function(e){(e.preventDefault(),"undefined"!=typeof window._stageData&&Helpers.StageType.isCropperTool()&&(page.stage.record.cropParams=page.stage.cropParams,Helpers.StageType.setDesignPlan(page.stage.getCleanRecord(page.stage.record))),"undefined"!=typeof window._stageData&&Helpers.StageType.isToolName("video_to_gif")&&(page.stage.record.gifParams=page.stage.gifParams,Helpers.StageType.setDesignPlan(page.stage.getCleanRecord(page.stage.record))),!1===Helpers.App.isLoggedIn()&&Helpers.App.setSubscribeFromModal("download"),Helpers.App.isGuestCheckoutExperimentActive()&&(Service.GuestCheckout.getInstance().setPreviousCheckoutTypeOpened("download"),Helpers.App.setSubscribeFromModal("download")),Helpers.StageType.isVideoV4())?e.originalEvent&&t.containers.video_product.find('[data-key="normal_v"]').click():Helpers.StageType.isVideoV5()&&t.setHighResVideoV5();Helpers.App.isGuestCheckoutExperimentActive()&&Service.GuestCheckout.getInstance().setForceSignup(!0),t._formSubmitHandler(e)}),this.element.find(".purchases__low-res-download a").click(function(e){e.preventDefault(),!1!==Helpers.App.isLoggedIn()?(t.setLowResVideo(),t.$form.submit()):t.dispatch("low_res_download.not_logged_in")}),t.$watermarkAnchor.on("click",function(){Helpers.StageType.getPreviewImage().then(function(e){t.$watermarkAnchor.attr("href","data:image/png;base64,"+e),t.$watermarkAnchor.attr("download","image.png")})["catch"](function(e){throw new Error(e)})}),this.fixCTA.click(bind(this)),this.subscriptionPaused.find(".info-close").click(function(){t.subscriptionPaused.hide()}),this.subscriptionPastDue.find(".info-close").click(function(){t.subscriptionPastDue.hide()});var e=t.element.find(".purchases__video-wrapper");return this.$video.click(function(){t._previewVideo.isPlaying()?(t._previewVideo.pause(),e.addClass("purchases__video-wrapper--paused")):(t._previewVideo.play(),e.removeClass("purchases__video-wrapper--paused"))}).bind("ended",,Helpers.CouponHelper.bind("coupon.validated",this._updatePriceForPackage.bind(this)),Helpers.CouponHelper.bind("coupon.removed",this._updatePriceForPackage.bind(this)),this},_notLoggedInHandler:function _notLoggedInHandler(){return this.dispatch("purchase.not_logged_in"),this},_disableSubmitButtons:function _disableSubmitButtons(){this.$price[0].disabled=!0},_enableSubmitButtons:function _enableSubmitButtons(){return this.$price[0].disabled="",this},_updatePriceForPackage:function _updatePriceForPackage(){var n=this,s=window.currencyHelper.getSymbol(recurlyConfig.currency);try{var t=Helpers.Price.stage(Helpers.PremiumAssetsValidator.getStageInfo())}catch(e){return}return this._hideTaxInfo(),this.$priceQuantity.css("display","inline-block"),this.$priceOriginal.text(""),this.couponFieldContainerEl.hide(),t.price.then(function(i){if(0!==i){t.priceWithDiscount.then(function(e){if(i!==e){n.$priceOriginal.text(s+i),n.$priceOriginal.css("display","inline-block");var t=s+e;n.$priceQuantity.text(t),~n.euCountries.indexOf(window._pl_country)&&n._updateTaxRate(e)}});var e=s+i;n.$priceQuantity.text(e),n.$priceQuantity.show(),n._showTaxInfo(),~n.euCountries.indexOf(window._pl_country)&&n._updateTaxRate(i)}}),this},_checkHelperPriceResults:function _checkHelperPriceResults(n,s){var e=Helpers.Price.stage(Helpers.StageType.getStageInfo());Promise.all([e.price,e.priceWithDiscount]).then(function(e){var t=e[0],i=e[1];t===n&&i===s||Helpers.GlobalEventTracker.stagePriceMismatch({priceFromPurchase:n,priceWithDiscountFromPurchase:s,priceFromHelper:t,priceWithDiscountFromHelper:i})})},_originalPrice:_getPrice:function _getPrice(e,t,i){var n,s,r,a;return s=Helpers.Resolutions.getActive().key,a=window._stageData.stage_data.custom_price,r=Helpers.App.getSubscription(),Registry.UserBulkPackages.hasAny(),"normal"===s?n=this._priceWithSubscription(e,t,i):"normal_v"===s?n=this._priceWithSubscription(e,t,i):Helpers.GlobalEventTracker.deprecatedBlock({module:"Purchases::_getPrice",file:"purchases_modal.js",description:"normal and normal_v are not the only possible values for res_key (line 510)"}),r&&!r.is_paused&&n?n:a&&"normal"===s?a:window.packages[e+":"+t]},_updateTaxRate:function _updateTaxRate(e){var n=this;this._configureRecurly(),this._taxRequestInProgress&&this._taxRequestInProgress.cancel();var t=P.cancelable(Helpers.Price.tax.bind(null,window._pl_country,e));this._taxRequestInProgress=t(),this._taxRequestInProgress.then(function(e){n._taxRequestInProgress=null;var t="",i=window.currencyHelper.getSymbol(recurlyConfig.currency);0===e.amount||isNaN(e.amount)?t="":"undefined"!=typeof window._pl_vat_number&&""!=window._pl_vat_number?t=n.constructor.TEXT_VAT_EXEMPT_MESSAGE:("AU"===window._pl_country&&(taxType="GST"),t=n.constructor.taxAmountText.replace("{{amount}}",i+parseFloat(e.amount).toFixed(2)).replace("{{taxType}}",e.type)),n.$taxInformation.text(t)})["catch"](},_configureRecurly:function _configureRecurly(){var e={currency:window.recurlyConfig.currency,publicKey:window.recurlyConfig.publicKey,fields:{all:{style:{fontSize:"16px",fontColor:"#555555",padding:"1px",placeholder:{color:"#55555 !important"}}},number:{selector:"#recurly-number",style:{placeholder:{content:""}}},cvv:{selector:"#recurly-cvv",style:{placeholder:{content:""}}},month:{selector:"#recurly-month",style:{placeholder:{content:""}}},year:{selector:"#recurly-year",style:{placeholder:{content:""}}},vat_number:{selector:"#recurly-vat-number",style:{placeholder:{content:""}}}}};recurly.configure(e)},detach:function detach(){return this.element.data("modal",null),this.element.detach(),this},_setModalToUnlimited:function _setModalToUnlimited(){var e=this.$modalHeader.find(".purchase-header__title"),t=this.$modalHeader.find(".purchase-header__subtitle"),i=this.constructor.TEXT_DOWNLOAD_CATEGORY_TITLE.replace("{{categoryName}}",this.categoryName);this.element.addClass("purchases--purple"),this.$modalHeader.addClass("purchases-header--purple"),e.text(i),e.css("textTransform","uppercase"),t.hide(),this.$price.addClass("button--subscribed"),this.$priceFree.show(),this.$priceDescription.hide()},_setModalToNewSubscription:function _setModalToNewSubscription(){var e=this.$modalHeader.find(".purchase-header__title"),t=this.$modalHeader.find(".purchase-header__subtitle");e.text("Single Logo Purchase"),t.text("50% Off for Subscribers like You! \ud83d\ude09"),this.element.find(".only-highlight-underline").hide()},activate:function activate(){if(this.categoryName&&Helpers.StageType.isVideo()){this.setHighResVideo();var e=this.element.find(".purchases__video-wrapper");e.find("video")[0].load(),e.addClass("purchases__video-wrapper--paused")}this._enableSubmitButtons(),Widget.prototype.activate.call(this)},deactivate:function deactivate(e){Widget.prototype.deactivate.call(this),this.dispatch("deactivate",{callback:e})},instantiatePurchaseOverlay:function instantiatePurchasesOverlay(e,t){this.purchaseOverlay!==undefined&&this.purchaseOverlay.destroy();var i={name:"purchaseOverlay",purchaseRecord:e,paymentType:"purchase",hideSavedCardOption:t};return this.appendChild(this._createPurchaseOverlayWidget(i)),this.purchaseOverlay.bind("purchase.success",function(e){var t=null;e.data.coupon&&(t=e.data.coupon),Helpers.GlobalEventTracker.purchaseSuccess({amount_in_cents:e.data.amount_in_cents,license_id:e.data.license_id,resolution_id:e.data.resolution_id,stage_id:Helpers.StageType.getStageID(),user_id:Helpers.App.getUser().id,invoice_number:e.data.invoice_number}),Helpers.CouponHelper.markAsUsed(),this.dispatch("purchase.success",t)}.bind(this)).bind("purchase.failed",function(e){var t=e&&e.data?e.data.status:0,i=e&&e.data?e.data.message:"";422===t?this.dispatch("stage.error",{error:!0,errorType:"broken-stage",message:i}):"purchaseOverlay"!=e.target.name&&this.dispatch("purchase.failed",e.data)}.bind(this)),this.purchaseOverlay},_createPurchaseOverlayWidget:function _createPurchaseOverlayWidget(e){var t=PurchaseWidgetStrategy.PurchaseOverlay,i=null;return Helpers.App.isGuestCheckoutExperimentActive()&&(t=PurchaseWidgetStrategy.PurchaseGuestOverlay),i=new PurchaseWidgetStrategy(t),console.log(this.constructor.className+" -> Creating the purchase overlay"),i.create(e)},instantiateResolutionsWidget:function instantiateResolutionsWidget(){this.appendChild(new UI.PurchaseResolutions({name:"resolutionsWidget",element:this.element.find(".purchase-options-form")})),this.bindingsResolutionsWidget()},bindingsResolutionsWidget:setPreview:function setPreview(e){var t=e.source;if(Helpers.StageType.isSmartTemplate())this.containers.smart_template.css("backgroundImage","url("+t+")");else{this.$video.attr("src",t);var i=this.$video.get(0);setTimeout(function(){i.load(),i.play(),i.pause()},1),this.element.find(".purchases__video-wrapper").addClass("purchases__video-wrapper--paused"),this._previewVideo?this._previewVideo.setKeytime(e.keytime):this._previewVideo=new UI.KeyframeVideoPresenter(this.$video,e.keytime)}},setResolutionData:function setResolutionData(e){var t=e.dimensions.width+"x"+e.dimensions.height+"px";!0===Helpers.StageType.isVideo()&&(t=e.dimensions.high.width+"x"+e.dimensions.high.height+"px"),this.element.find(".res_dimensions").html(t)},directDownload:function directDownload(){this._showModalHandler(),!0===Helpers.StageType.isFusionVideo()&&this.setHighResVideo(),this.$form.submit()},setHighResVideo:function setHighResVideo(){this.containers.video_product.find('[data-key="normal_v"]').click()},setHighResVideoV5:function setHighResVideoV5(){this.setHighResVideo()},setLowResVideo:function setLowResVideo(){this.containers.video_product.find('[data-key="small"]').click()},_showLowResDownloadLink:function _showLowResDownloadLink(){Helpers.StageType.isVideoV4()&&this.element.find(".purchases__low-res-download").show()},_showWatermarkDownloadLink:function _showWatermarkDownloadLink(){Helpers.App.isInWatermarkExperiment()&&this.$watermarkContainer.show()},_hideLowResDownloadLink:function _hideLowResDownloadLink(){Helpers.StageType.isVideoV4()&&this.element.find(".purchases__low-res-download").hide()},_hideWatermarkDownloadLink:function _hideWatermarkDownloadLink(){this.$watermarkContainer.hide()},setFreeTheme:function setFreeTheme(){this._resetTheme(),this._setFreeDownloadModal()},_setFreeDownloadModal:function _setFreeDownloadModal(){this.$modalHeader.find(".purchase-header__title").html(this.constructor.TEXT_FREE_DOWNLOAD_CATEGORY_TITLE),this.$priceFree.show(),this.$priceDescription.hide(),this.categoryName&&this.element.find(".purchases__category-name").text(this.categoryName)},setPaidTheme:function setPaidTheme(){this._resetTheme(),this._updatePriceForPackage(),this._showLowResDownloadLink(),this.$priceFree.hide(),this.$priceDescription.show(),this.categoryName&&this.element.find(".purchases__category-name").text(this.categoryName),this.$modalFooter.show(),Helpers.App.isInWatermarkExperiment()&&this._showWatermarkDownloadLink()},setAdminTheme:function setAdminTheme(){this.setFreeTheme(),this._setModalToUnlimited(),this.element.find(".resolutions-container").addClass("resolutions-container--subscribed"),this.$price.removeClass("button--not-subscribed"),this.$modalHeader.addClass("purchase-header--admin")},setSubscribedTheme:function setSubscribedTheme(){var t=this,e=window._pl_paused_subscription!==undefined,i=!1!==window.isPastDue,n=Helpers.App.getSubscription();if(this._resetTheme(),n!==undefined&&(e=n.is_paused),this.$modalHeader.addClass("purchase-header--subscribed"),e){var s=this.subscriptionPaused.html().replace("{{pause_date}}",window._pl_remove_date);this.subscriptionPaused.html(s),this.subscriptionPaused.show(),this.subscriptionPaused.find(".info-close").click(function(){t.subscriptionPaused.hide()});var r=Helpers.Price.stage(Helpers.PremiumAssetsValidator.getStageInfo());Promise.all([r.price,r.priceWithDiscount]).then(function(e){0!==e[0]&&0!==e[1]||t._setFreeDownloadModal()})["catch"](function(e){throw new Error(e)})}else this.element.find(".resolutions-container").addClass("resolutions-container--subscribed"),this._setModalToUnlimited(),this.$price.removeClass("button--not-subscribed");i&&this.subscriptionPastDue.show()},_resetTheme:function resetTheme(){this.subscriptionPaused.hide(),this.subscriptionPastDue.hide(),this.$modalFooter.hide(),this.$price.addClass("button--not-subscribed"),this.$priceFree.hide(),this.$priceDescription.show(),this.$modalHeader.removeClass("purchase-header--subscribed"),this.$modalHeader.removeClass("purchase-header--admin"),this._hideLowResDownloadLink(),this._hideWatermarkDownloadLink();var e=this.$modalHeader.find(".purchase-header__title"),t=this.$modalHeader.find(".purchase-header__subtitle"),i=this.constructor.TEXT_PAID_DOWNLOAD_CATEGORY_TITLE.replace("{{categoryName}}",this.categoryName);this.element.find(".disclaimer-wrapper").text(this.constructor.TEXT_DISCLAIMER_DEFAULT),this.element.removeClass("purchases--purple"),this.$modalHeader.removeClass("purchases-header--purple"),this.element.find(".resolutions-container").removeClass("resolutions-container--subscribed"),e.html(i),e.css("textTransform",""),t.show(),this.$price.removeClass("button--subscribed"),this.categoryName&&this.element.find(".purchases__category-name").text(this.categoryName)}}}),UI.StageDownload={},Class(UI.StageDownload,"Controller").includes(CurrencyLabelSetter)({SINGLE_TEMPLATE:{value:"single_purchase",label:"Buy 1 template ({ price })",title:"Only buy this template!",info:"You\u2019ll only get this template. no watermark, high resolution PNG, commercial usage OK!",ctaLabel:"Continue",active:!1,disclaimer:"All prices in { currency }."},MULTIPLE_TEMPLATE:{value:"single_purchase",label:"Loading...",title:"Only buy this template!",info:"You\u2019ll only get these templates.",ctaLabel:"Continue",active:!1,disclaimer:"All prices in { currency }."},SUBSCRIPTION_TEMPLATE:{value:"subscription",label:"Unlimited Subscription ({ price }/mo*)",title:"Unlimited Downloads",info:"You'll get your selected template, plus Unlimited Downloads.",ctaLabel:"Go Unlimited",active:!0,disclaimer:"            <span>                 <strong>*Cancel anytime.</strong> Unlimited subscription billed yearly in { currency }.             </span>             <span>                 1 month minimum commitment if subscribers have downloaded any templates.             </span>         "},ACTIVE_CURRENCY:"{{currency_label}}",ORIGINAL_PRICE_TEMPLATE:'<span class="original-price">{ price }</span>',prototype:{_multiplePurchaseService:null,_purchasesOptions:[],downloadModal:null,purchasesModalRef:null,subscriptionsRef:null,activePlan:"annual",init:function init(e){var t=this;t._setCurrencyLabel(),t.preview=e.preview,Helpers.StageType.isStage()&&(t._multiplePurchaseService=Service.MultiplePurchase.getInstance()),this.purchasesModalRef=e.purchasesModalRef,this.subscriptionsRef=e.subscriptionsRef||null,t.downloadModal=new UI.StageDownload.Modal({_data:{purchasesOptions:[]},category:window._pl_category.toLowerCase().split(" ")[0],hasLowResOption:Helpers.StageType.isVideoV4()}),this._setBindings()},getMultiPurchaseService:function getMultiPurchaseService(){return this._multiplePurchaseService},activateModal:function activateModal(){var e=this;window.page.stage.merchPreviewController&&window.page.stage.merchPreviewController.unbind("item.change").bind("item.change",function(){Helpers.App.deleteCookie("multiplePurchasesSelectedIds")}),e.downloadModal._initialPurchaseButtonText=null,this.prepareMultiPurchaseData(),this._generatePurchaseOptions().then(function(){e.downloadModal.updatePurchasesOptions(e._purchasesOptions),e.preview&&e.downloadModal.setPreview(e.preview),Helpers.StageType.isVideoV4()&&e.downloadModal.enableLowResOption()}),this.downloadModal.activate(),this.subscriptionsRef&&this.subscriptionsRef.$period.attr("disabled",!1)},prepareMultiPurchaseData:function prepareMultiPurchaseData(){var e=this,t=Service.MultiplePurchase.getInstance();if(!1!==t.canDoMultiplePurchases()){var i=t.getAllSelectedIds();t.clean(),i.unshift(Number(Helpers.StageType.getStageID())),t.bind("price.changed",Utils.bindFn(e)(e._priceChangedHandler));var n=t.prepareData(i);e._bindMultiPurchasesThumbnailsEvents(n)}},_bindMultiPurchasesThumbnailsEvents:function _bindMultiPurchasesThumbnailsEvents(e){var t=this,i=Utils.bindFn(t)(t._onThumbnailProcessedHandler),n=Utils.bindFn(t)(t._onThumbnailProcessingHandler);e.unbind("thumbnails.processed").bind("thumbnails.processed",i),e.unbind("thumbnails.processing").bind("thumbnails.processing",n)},_onThumbnailProcessingHandler:function _onThumbnailProcessingHandler(e){this.getDownloadModal().updateThumbnailSource(e.data.stage.id,"data:image/png;base64,"+e.data.stage.preview)},_onThumbnailProcessedHandler:function _onThumbnailProcessedHandler(){this.getDownloadModal().hideProcessingInSubmitButton(),this.getDownloadModal().enableSubmitButton()},_priceChangedHandler:function _priceChangedHandler(e){var t=this,i=e.data,n=t._updatePurchaseButtonText(i);if("Free Download"!==n){var s=1;t.downloadModal._data.purchasesOptions[s].title=n}},isValidCoupon:function isValidCoupon(){return Helpers.CouponHelper.exists()&&Helpers.CouponHelper.isValid()},isSubscriptionValidCoupon:function isSubscriptionValidCoupon(){return this.isValidCoupon()&&Helpers.CouponHelper.applyTo(Helpers.CouponHelper.TYPE_SUBSCRIPTION)},isPurchaseValidCoupon:function isPurchaseValidCoupon(){return this.isValidCoupon()&&Helpers.CouponHelper.applyTo(Helpers.CouponHelper.TYPE_SINGLE_PURCHASE)},setSubscriptionsRef:function setSubscriptionsRef(e){this.subscriptionsRef=e},_generatePurchaseOptions:function _generatePurchaseOptions(){var e=this,t=$.extend({},UI.StageDownload.Controller.SINGLE_TEMPLATE),i=$.extend({},UI.StageDownload.Controller.MULTIPLE_TEMPLATE),n=$.extend({},UI.StageDownload.Controller.SUBSCRIPTION_TEMPLATE),s=null,r=t;Helpers.StageType.isLogo()&&e.getMultiPurchaseService().isMultiplePurchase()?((r=i).disclaimer=i.disclaimer.replace("{ currency }",e.constructor.ACTIVE_CURRENCY),s=Promise.resolve()):s=this._updateSingleOptionPrice(t);var a=this._updateSubscriptionOptionPrice(n);return Promise.all([s,a]).then(function(){e._purchasesOptions=[n,r]})},_updateSingleOptionPrice:function _updateSingleOptionPrice(n){if(Helpers.PremiumAssetsValidator===undefined)return Promise.resolve();var s=this,e=Helpers.Price.stage(Helpers.PremiumAssetsValidator.getStageInfo());Promise.all([e.price,e.priceWithDiscount]).then(function(e){if(0===e[0])return n.label="Download this free template ONLY",n.title="Free Download",void(n.disclaimer="");s.getMultiPurchaseService().update(Number(Helpers.StageType.getStageID()),{price:e[0]});var t=s._formatPrice(e[0]),i=s._formatPrice(e[1]);e[0]===e[1]?i="":t=UI.StageDownload.Controller.ORIGINAL_PRICE_TEMPLATE.replace("{ price }",t),s._setIsDiscountActive(""!==i),""!==i&&(i=" "+i),n.label=n.label.replace("{ price }",t+i),n.disclaimer=n.disclaimer.replace("{ currency }",s.constructor.ACTIVE_CURRENCY)})},_shouldShowMonthlyPrice:function _shouldShowMonthlyPrice(){var e=Helpers.CouponHelper.isValid()||!1,t=e&&Helpers.CouponHelper.applyToPlan(Registry.Plans.PLAN_MONTHLY),i=e&&Helpers.CouponHelper.applyToPlan(Registry.Plans.PLAN_ANNUAL);return t&&!i},_updateSubscriptionOptionPrice:function _updateSubscriptionOptionPrice(n){var e,s=this,r=this._shouldShowMonthlyPrice();e=r?Helpers.Price.monthlyPlan():Helpers.Price.annualPlan();Promise.all([e.price,e.priceWithDiscount]).then(function(e){var t=s._formatPrice(e[0]/(r?1:12)),i=s._formatPrice(e[1]/(r?1:12));e[0]===e[1]?i="":t=UI.StageDownload.Controller.ORIGINAL_PRICE_TEMPLATE.replace("{ price }",t),s._setIsDiscountActive(""!==i),n.label=n.label.replace("{ price }",t+" "+i),n.disclaimer=n.disclaimer.replace("{ currency }",s.constructor.ACTIVE_CURRENCY),r&&(n.label=n.label.replace("Unlimited Subscription","Monthly Subscription"),n.disclaimer=n.disclaimer.replace("yearly","monthly"))});this._monthlyPlanActive=r},updatePreview:function updatePreview(e){if(e&&(this.preview=e,this.downloadModal.setPreview(e),e&&e.source&&Helpers.StageType.isLogo())){var t=e.source.replace("data:image/png;base64,","");this.getMultiPurchaseService().update(Number(Helpers.StageType.getStageID()),{preview:t,designPlan:JSON.stringify(Helpers.StageType.getDesignPlan())}),this.downloadModal.updateThumbnailSource(Helpers.StageType.getStageID(),e.source)}},_setBindings:function _setBindings(){Helpers.CouponHelper.bind("coupon.validated",this._onCouponChange.bind(this)),Helpers.CouponHelper.bind("coupon.removed",this._onCouponChange.bind(this)),this.downloadModal.bind("change",this._onModalChange.bind(this)),this.downloadModal.bind("submit",this._onModalSubmit.bind(this)),this.downloadModal.bind("closed",this._onModalClose.bind(this)),this.downloadModal.bind("thumbnail.click",this._onThumbnailClickHandler.bind(this))},_onThumbnailClickHandler:function _onThumbnailClickHandler(e){var t=Number(e.data.index),n=this,i=null;if(!(t<0||t>n.getMultiPurchaseService().count()-1)&&(i=n.getMultiPurchaseService().getByIndex(t),!1!==Boolean(i))){"add"===e.data.action&&n.getMultiPurchaseService().update(i.id,{selected:!0}),"remove"===e.data.action&&n.getMultiPurchaseService().update(i.id,{selected:!1});var s={stages_id:n.getMultiPurchaseService().getSelectedIds()};if(n.downloadModal.disableSubmitButton(),0===n.getMultiPurchaseService().getSelectedDataObjects().length)return n.downloadModal.setTitle("Select a template"),void n.downloadModal.setPurchaseButtonText("Please select a template");n.getMultiPurchaseService().getPrice(s).then(function(i){s.stages_id[0]===Number(Helpers.StageType.getStageID())&&(i=n.getMultiPurchaseService().updatePremiumPriceForCurrentStage(i));var e=n._updatePurchaseButtonText(i);"Free Download"!==e&&n.downloadModal.setTitle(e),s.stages_id.forEach(function(e,t){n.getMultiPurchaseService().update(e,{price:i.prices[t]/100})})})}},_updatePurchaseButtonText:function _updatePurchaseButtonText(e){var t=this,i=t.getMultiPurchaseService().getSelectedDataObjects().length,n="Buy "+i+" template";if(1<i&&(n+="s"),0!==i){(t.getMultiPurchaseService().areAllThumbnailsProcessed()&&0===t.downloadModal.$multipleThumbnailsList.find("li.loading").length||Helpers.App.isMerchYggdrasilEnabled())&&t.downloadModal.enableSubmitButton();var s=" ("+t._formatPrice(e.total)+") ",r="";if(t.isValidCoupon()&&t.isPurchaseValidCoupon()){s=' (<span class="original-price">'+t._formatPrice(e.total)+"</span> ";var a=Helpers.CouponHelper.calculatePrice(e.total);r=t._formatPrice(a)+")"}return t.downloadModal.setPurchaseButtonText(n+s+r),0===e.total&&(t.downloadModal.setTitle("Free Download"),t.downloadModal.setPurchaseButtonText("Download this free template(s) ONLY"),n="Free Download"),n}t.downloadModal.disableSubmitButton()},_onCouponChange:function _onCouponChange(){this._generatePurchaseOptions().then(function(){this.downloadModal.updatePurchasesOptions(this._purchasesOptions),this.downloadModal.hideInfoPopover("subscription"),this._isDisccountActive&&this.downloadModal.showInfoPopover("Limited Time Discount","subscription")}.bind(this))},_onModalChange:function _onModalChange(e,t){var i=this.getMultiPurchaseService(),n=i.isMultiplePurchase()&&(!1===i.areAllThumbnailsProcessed()||0<this.downloadModal.$multipleThumbnailsList.find("li.loading").length)&&!1===Helpers.App.isMerchYggdrasilEnabled();"single_purchase"===t.value?(this.downloadModal.enableSubmitButton(),n&&(this.downloadModal.disableSubmitButton(),this.downloadModal.showProcessingInSubmitButton()),this.getMultiPurchaseService().selectAll(),!1===Boolean(this._isDisccountActive)&&this.downloadModal.showInfoPopover("Best Value","subscription"),!1===Boolean(this.downloadModal._initialPurchaseButtonText)&&(this.downloadModal._initialPurchaseButtonText=this.downloadModal.getPurchaseButton().html())):(Boolean(this.downloadModal._initialPurchaseButtonText)&&this.downloadModal.setPurchaseButtonText(this.downloadModal._initialPurchaseButtonText),this.downloadModal.enableSubmitButton(),this.downloadModal.hideInfoPopover("subscription"))},_onModalSubmit:function _onModalSubmit(e,t){"subscription"===t.value&&this._executeSubscriptionFlow(),"single_purchase"===t.value&&this._executeSinglePurchaseFlow(t.lowResolution),this.downloadModal.deactivate()},_onModalClose:function _onModalClose(){Helpers.GlobalEventTracker.track("Purchase:UserCanceled",{stage_id:Helpers.StageType.getStageID()})},_executeSinglePurchaseFlow:function _executeSinglePurchaseFlow(e){"video"!==window._pl_category.toLowerCase().split(" ")[0]&&this.purchasesModalRef.resolutionsWidget.selectByID("#resolution-14"),e?this.purchasesModalRef.resolutionsWidget.selectByID("#resolution-9"):this.purchasesModalRef.resolutionsWidget.selectByID("#resolution-11"),this.purchasesModalRef.$form.submit()},_executeSubscriptionFlow:function _executeSubscriptionFlow(){var e=this.subscriptionsRef.getElement().find('[data-period="annual"]'),t=this.subscriptionsRef.getElement().find('[data-period="monthly"]');this._monthlyPlanActive?t.click():e.click()},_formatPrice:function _formatPrice(e){return e=(e=e.toFixed(2)).replace(/\.?0+$/,""),e=window.currencyHelper.getSymbol(recurlyConfig.currency)+e},_setIsDiscountActive:function _setIsDiscountActive(e){this._isDisccountActive=e},isModalAttached:function isModalAttached(){return!!this.downloadModal&&$.contains(document,this.downloadModal.getElement()[0])},getDownloadModal:function getDownloadModal(){return this.downloadModal}}}),Class(UI.StageDownload,"Modal").inherits(UI.SimpleModal)({htmlTemplate:'     <div class="unique-purchase-overlay">       <div class="unique-purchase-overlay__wrapper">         <div class="unique-purchase-overlay__header">           <p class="unique-purchase-overlay__title">Unlimited Downloads</p>           <button type="button" class="unique-purchase-overlay__button-close" data-dismiss="modal" aria-hidden="true">               <img class="unique-purchase-overlay__icon" src="/assets/icons/close.svg">           </button>         </div>         <div class="unique-purchase-overlay__content">         <div class="unique-purchase-overlay__img-container multiple-purchases-container"><ul class="thumbnails-list"></ul></div>          <div class="unique-purchase-overlay__img-container">               <img src="/assets/new-stage-download-modal/mockups-left.svg" alt="" class="unique-purchase-overlay__img unique-purchase-overlay__img--left-side">               <img src="/assets/new-stage-download-modal/mockups-right.svg" alt="" class="unique-purchase-overlay__img unique-purchase-overlay__img--right-side">               <img id="stage-download-preview" src="/assets/placeholder-modal-preview.png" alt="" class="unique-purchase-overlay__img unique-purchase-overlay__img--preview">               <div class="unique-purchase-overlay__img unique-purchase-overlay__video--preview">                 <div class="video-play-button"></div>                 <video muted playsinline />               </div>               <div class="unique-purchase-overlay__img unique-purchase-overlay__img--cover"></div>           </div>           <p class="unique-purchase-overlay__img-text">You\u2019ll get your selected template, plus Unlimited Downloads.</p>         </div>         <form class="unique-purchase-overlay__footer">             <label class="unique-purchase-overlay__purchase-option active" for="subscription">                 <span class="unique-purchase-overlay__radio-button"><u></u></span>                 <p class="unique-purchase-overlay__label">Unlimited Subscription (<span class="unique-purchase-overlay__price">$7.47</span> /mo)</p>                 <input type="radio" name="purchase-option" id="subscription" value="subscription">             </label>             <label class="unique-purchase-overlay__purchase-option" for="single_purchase">                 <span class="unique-purchase-overlay__radio-button"><u></u></span>                 <p class="unique-purchase-overlay__label">Loading (<span class="unique-purchase-overlay__price">...</span>)</p>                 <input type="radio" name="purchase-option" id="single_purchase" value="single_purchase">             </label>             <button class="unique-purchase-overlay__submit" type="submit">                 Go Unlimited!             </button>             <button class="unique-purchase-overlay__low-res-link">               Get a free low res video with watermark             </button>         </form>       </div>       <div class="unique-purchase-overlay__disclaimer">         <span>             <strong>Cancel anytime*.</strong> All prices billed yearly in USD.         </span>         <span>             *1 month minimum commitment if subscribers have downloaded any templates.         </span>       </div>        </div>',PURCHASE_OPTION_TEMPLATE:'        <label class="unique-purchase-overlay__purchase-option" for="">             <span class="unique-purchase-overlay__radio-button"><u></u></span>             <p class="unique-purchase-overlay__label">               <span class="unique-purchase-overlay__option-label">Single Purchase</span>               (<span class="unique-purchase-overlay__price">$2.95</span>)             </p>             <input type="radio" name="purchase-option" id="" value="">         </label>     ',cssClass:"stage-download-modal",
PREVIEW_BACKGROUNDS:{mockups:{left:"/assets/new-stage-download-modal/mockups-left.svg",right:"/assets/new-stage-download-modal/mockups-right.svg"},design:{left:"/assets/new-stage-download-modal/designs-left.svg",right:"/assets/new-stage-download-modal/designs-right.svg"},logos:{left:"/assets/new-stage-download-modal/logos-left.svg",right:"/assets/new-stage-download-modal/logos-right.svg"},videos:{left:"/assets/new-stage-download-modal/videos-left.svg",right:"/assets/new-stage-download-modal/videos-right.svg"}},MULTI_PURCHASE_THUMBNAIL_TEMPLATE:'<li data-index="{{index}}" data-id="{{stageId}}" class="{{thumbnailSizeClass}} selected"><img src="{{stagePreview}}" /></li>',CURRENT_ONE_DEFAULT_ADDED_STAGE:1,TWO_STAGES_ADDED:2,SUBMIT_BUTTON_CONTINUE:"Continue",SUBMIT_BUTTON_PROCESSING:"Processing selected templates",prototype:{$title:null,$info:null,$previewImg:null,$previewVideo:null,$form:null,$cta:null,_data:null,category:"mockups",_multiplePurchaseService:null,_thumbnails:[],init:function init(e){UI.SimpleModal.prototype.init.call(this,e),Helpers.StageType.isStage()&&(this._multiplePurchaseService=Service.MultiplePurchase.getInstance()),this.getElement().addClass("stage-download-modal"),this.setContent($(UI.StageDownload.Modal.htmlTemplate)),this.addCloseButton(),this.element.removeAttr("data-keyboard");var t=this.getElement();this.$title=t.find(".unique-purchase-overlay__title"),this.$info=t.find(".unique-purchase-overlay__img-text"),this.$form=t.find("form"),this.$cta=t.find(".unique-purchase-overlay__submit"),this.$disclaimer=t.find(".unique-purchase-overlay__disclaimer"),this.$previewImg=t.find("#stage-download-preview"),this.$previewVideo=t.find(".unique-purchase-overlay__video--preview"),this.$previewBackgroundLeft=t.find(".unique-purchase-overlay__img--left-side"),this.$previewBackgroundRight=t.find(".unique-purchase-overlay__img--right-side"),this.$lowResLink=t.find(".unique-purchase-overlay__low-res-link"),this.$purchaseButton=t.find(".unique-purchase-overlay__purchase-option[for=single_purchase] .unique-purchase-overlay__label"),this.$singleImageContainer=t.find(".unique-purchase-overlay__img-container:not(.multiple-purchases-container)"),this.$multiplePurchaseContainer=t.find(".unique-purchase-overlay__img-container.multiple-purchases-container"),this.$multipleThumbnailsList=this.$multiplePurchaseContainer.find(".thumbnails-list"),this._setPreviewBackground(),this.hasLowResOption&&this.enableLowResOption(),this._data.preview&&this.setPreview(this._data.preview),this._data.purchasesOptions.length&&this.updatePurchasesOptions(this._data.purchasesOptions),this._setBindings()},getMultiPurchaseService:function getMultiPurchaseService(){return this._multiplePurchaseService},setTitle:function setTitle(e){this.$title.text(e)},setPurchaseButtonText:function setPurchaseButtonText(e){this.getElement().find(".unique-purchase-overlay__purchase-option[for=single_purchase] .unique-purchase-overlay__label").html(e)},getPurchaseButton:getSubmitButton:function getSubmitButton(){return this.$cta},_addClassToSubmitButton:function _addClassToSubmitButton(e){this.getSubmitButton().addClass(e)},_removeClassFromSubmitButton:showProcessingInSubmitButton:function showProcessingInSubmitButton(){this._addClassToSubmitButton("ellipsing"),this._setSubmitButtonText(this.constructor.SUBMIT_BUTTON_PROCESSING)},hideProcessingInSubmitButton:function hideProcessingInSubmitButton(){!1!==(!0===this.$cta.hasClass("ellipsing"))&&(this._removeClassFromSubmitButton("ellipsing"),this._setSubmitButtonText(this.constructor.SUBMIT_BUTTON_CONTINUE))},_setSubmitButtonText:function _setSubmitButtonText(e){this.$cta.text(e)},disableSubmitButton:enableSubmitButton:function enableSubmitButton(){this._removeClassFromSubmitButton("ellipsing"),this.$cta.removeAttr("disabled")},updatePurchasesOptions:function updatePurchasesOptions(e){$.md5(JSON.stringify(this._data.purchasesOptions))!==$.md5(JSON.stringify(e))&&(this.$form.find("label").remove(),this._data.purchasesOptions=e.map(,this._createPurchasesOptions())},_createPurchasesOptions:function _createPurchasesOptions(){var n=null;this._data.purchasesOptions.forEach(function(e){e.active&&(n=e);var t=$(UI.StageDownload.Modal.PURCHASE_OPTION_TEMPLATE);t.attr("for",e.value);var i=t.find("input");i.attr("id",e.value),i.val(e.value),i.prop("checked",e.active),i[0].checked=e.active,i.attr("name","purchase-option"),t.find("p").html(e.label),t.insertBefore(this.$cta),e.active&&(this.$defaultOption=t)}.bind(this)),this._updateUIForOption(n.value)},_setBindings:function _setBindings(){this.$lowResLink.on("click",this._onLowResLinkClick.bind(this)),this.$form.on("submit",this._onFormSubmit.bind(this)),this.$form.on("change",this._onChange.bind(this)),this.getElement().on("hide.bs.modal",this._onClose.bind(this))},_onFormSubmit:function _onFormSubmit(e){e.preventDefault();var t=new FormData(e.target);this.dispatch("submit",{value:t.get("purchase-option"),lowResolution:!1})},_onChange:function _onChange(e){this._updateUIForOption(e.target.value),this.dispatch("change",{value:e.target.value})},_updateUIForOption:function _updateUIForOption(t){var e=Service.MultiplePurchase.getInstance();this.$form.find("label").removeClass("active"),this.$form.find('label[for="'+t+'"]').addClass("active");var i=this._data.purchasesOptions.find(function(e){return e.value===t}.bind(this));if(!1!==Boolean(i)){if(this.$title.text(i.title),this.$info.text(i.info),this.$cta.text(i.ctaLabel),this.$disclaimer.html(i.disclaimer),"single_purchase"===t&&this.getMultiPurchaseService().isMultiplePurchase())return this.$singleImageContainer.removeClass("in"),this.$singleImageContainer.hide(),this.$multipleThumbnailsList.html(""),this._createThumbnails(),e.cloneThumbnails(),e.replaceThumbnails(this.$multipleThumbnailsList),this.$multiplePurchaseContainer.css("display","flex"),void e.centerThumbnailsHorizontally({scale:Helpers.App.isMobile()?"1.2":"2.2",container:$(".thumbnails-list .graphic_item .stage_wrapper")});this.$multiplePurchaseContainer.hide(),this.$singleImageContainer.css("display","flex"),this.$singleImageContainer.toggleClass("in","single_purchase"!=t),this.$singleImageContainer.toggleClass("out","single_purchase"==t),this.$singleImageContainer.toggleClass("single","single_purchase"==t)}},_onClose:function _onClose(){this.$form&&this.$form[0].reset(),this.$defaultOption&&this.$defaultOption.click(),this.dispatch("closed")},_onLowResLinkClick:function _onLowResLinkClick(e){e.preventDefault(),this.dispatch("submit",{value:"single_purchase",lowResolution:!0})},setPreview:function setPreview(e){"image"===e.type?this._setPreviewImage(e.source):"video"===e.type&&this._setVideoPreview(e.source,e.keytime)},_setPreviewImage:function _setPreviewImage(e){this.$previewImg.show(),this.$previewImg.attr("src",e)},_setVideoPreview:function _setVideoPreview(e,t){var i=this;this.$previewVideo.show(),this.$previewVideo.find("video").attr("src",e);var n=this.$previewVideo.find("video")[0];setTimeout(1),i.$previewVideo.addClass("paused"),this._previewVideo?this._previewVideo.setKeytime(t):this._previewVideo=new UI.KeyframeVideoPresenter(this.$previewVideo.find("video"),t),this.$previewVideo.click(function(){i._previewVideo.isPlaying()?(i._previewVideo.pause(),i.$previewVideo.addClass("paused")):(i._previewVideo.play(),i.$previewVideo.removeClass("paused"))}),this.$previewVideo.find("video").bind("ended",},_setPreviewBackground:function _setPreviewBackground(){var e=UI.StageDownload.Modal.PREVIEW_BACKGROUNDS[this.category];e||(e=UI.StageDownload.Modal.PREVIEW_BACKGROUNDS.mockups),this.$previewBackgroundLeft.attr("src",e.left),this.$previewBackgroundRight.attr("src",e.right)},showInfoPopover:function showInfoPopover(e,t){var i=this.$form.find('label[for="'+t+'"]').find(".unique-purchase-overlay__radio-button"),n='<div class="unique-purchase-overlay__info-popover__content">'+e+"</div>";i.popover({html:!0,content:n,container:i,trigger:"manual",placement:"top"}),i.popover("show")},hideInfoPopover:function hideInfoPopover(e){var t=this.$form.find('label[for="'+e+'"]').find(".unique-purchase-overlay__radio-button");t.popover("hide"),t.popover("destroy")},enableLowResOption:function enableLowResOption(){this.$lowResLink.addClass("show")},_thumbnailClickHandler:function _thumbnailClickHandler(e){var t=this,i=e.target.getElement(),n=i.attr("data-index");if(i.hasClass("selected"))return i.removeClass("selected"),void t.dispatch("thumbnail.click",{action:"remove",index:n});i.addClass("selected"),t.dispatch("thumbnail.click",{action:"add",index:n})},_onShow:function _onShow(){Boolean(this.$defaultOption)&&this.$defaultOption.click()},_createThumbnails:function _createThumbnails(){var e=this;e._prepareMultiPurchaseThumbnailsLayout(),e.getMultiPurchaseService().getAll().forEach(Utils.bindFn(e)(e._buildMultiPurchaseThumbnail))},_buildMultiPurchaseThumbnail:function _buildMultiPurchaseThumbnail(e,t){var i=this,n="",s=e.preview,r=Service.Merch.getInstance(),a=i._getThumbnailsDisplayClass();!1===/^((http|https):\/\/)/.test(s)&&(s="data:image/png;base64,"+e.preview),!1===r.hasLastChanges(e.id)&&e.id!==Number(Helpers.StageType.getStageID())&&(n="loading");var o=new UI.GridItem({id:e.id,imageSrc:s,cssClass:n+" selected "+a});o.requestImage(),o.getElement().attr("data-index",t),o.getElement().attr("id",e.smartTemplateId),i.appendChild(o).render(i.$multipleThumbnailsList),i._thumbnails["_"+e.id]=o.getElement(),o.bind("gridItemClicked",Utils.bindFn(i)(i._thumbnailClickHandler))},_prepareMultiPurchaseThumbnailsLayout:function _prepareMultiPurchaseThumbnailsLayout(){var e=this,t=e.getMultiPurchaseService().count(),i={TWO:2,THREE:3};t===i.TWO||t===i.THREE?(e.$multiplePurchaseContainer.css("align-items","center"),e.$multipleThumbnailsList.css("text-align","center")):(e.$multiplePurchaseContainer.parent().css("align-items","flex-start"),e.$multipleThumbnailsList.css("text-align","left"))},_getThumbnailsDisplayClass:function _getThumbnailsDisplayClass(){var e=this,t="size-many",i=e.getMultiPurchaseService().count();return i===e.constructor.CURRENT_ONE_DEFAULT_ADDED_STAGE&&(t="size-one"),i===e.constructor.TWO_STAGES_ADDED&&(t="size-two"),t},updateThumbnailSource:function updateThumbnailSource(e,t){!1!==Boolean(e)&&!1!==Boolean(this._thumbnails["_"+e])&&this._thumbnails["_"+e].removeClass("loading").find("img").attr("src",t)}}}),Class(UI,"SinglePurchasesModal").inherits(Widget).includes(Translator,ThemeSupport)({html:'    <div class="modal single-purchase-overlay" tabindex="-1" role="dialog" aria-labelledby="downloadOverlayLabel" aria-hidden="true">      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">          <span aria-hidden="true">\xd7</span>      </button>      <div class="animation-info">2 Ways to Purchase!</div>       <div class="modal-dialog">        <div class="modal-content">          <div class="modal-body">            <div class="area1" data-area="left"></div>            <div class="or-div">OR</div>            <div class="area2" data-area="right"></div>          </div>        </div>      </div>    </div>',TEXT_SUBSCRIPTIONS_PARTIAL_TITLE:"2. Get the Unlimited Subscription!",prototype:{$modalBody:null,$modalContent:null,$closeBtn:null,$modalFooter:null,$leftArea:null,$rightArea:null,categoryName:null,previewData:null,updateImageBeforeActivate:!1,showPreview:!1,leftChild:null,rightChild:null,LOADING_IMAGE_PATH:"/assets/fade-spinner.gif",reverseOrder:!1,_resumePurchasePromise:null,init:function init(e){Widget.prototype.init.call(this,e),this.$modalBody=this.element.find(".modal-body"),this.$modalContent=this.element.find(".modal-content"),this.$closeBtn=this.element.find(".close"),this.$modalFooter=this.element.find(".modal-footer"),this.$leftArea=this.element.find(".area1"),this.$rightArea=this.element.find(".area2"),this.$orDiv=this.element.find(".or-div"),this.$animationInfo=this.element.find(".animation-info"),this.categoryName=Helpers.StageType.getStageData().category_name||"Logos",this._bindEvents(),this._initializeWidgets(),this._bindChildEvents(),this._configureRecurly(),this._reverseOrder(this.reverseOrder)},_bindEvents:function _bindEvents(){var t=this,e=function(e){e.target===this&&t.element.modal("hide")};return t.element.on("hidden.bs.modal",this.detach.bind(this)),t.$closeBtn.click(function(){Helpers.GlobalEventTracker.track("Purchase:UserCanceled",{stage_id:Helpers.StageType.getStageID()})}),t.$modalBody.on("click",e),t.$modalContent.on("click",e),this},_bindChildEvents:function _bindChildEvents(){var i=this;this.element.on("show.bs.modal",,this.element.on("shown.bs.modal",function(){i.rightChild&&(i.rightChild.showAnimate?i.rightChild.showAnimate():i.rightChild.show()),i.leftChild.show(),i.leftChild._showModalHandler(),i.leftChild.show(),$("body").addClass("single-purchase-modal-open")}),this.element.on("hidden.bs.modal",function(){i.rightChild&&i.rightChild.hide(),$("body").removeClass("single-purchase-modal-open")}),this.rightChild.bind("subscribe:button:clicked",function(){i.rightChild.subscribeButtonClick()}),this.rightChild.bind("purchase.success",function(){i.dispatch("purchase.success",{message:"Your subscription is now active. You can begin downloading!"})}),this.rightChild.bind("subscription.success",function(e){i.dispatch("subscription.success",e.data)}),this.rightChild.bind("subscription.failure",function(e){i.dispatch("subscription.failure",e.data)}),this.rightChild.bind("purchase.not_logged_in",function(e){i._notLoggedInHandler(e)}),this.rightChild.bind("purchase.monthly.selected",function(){i.dispatch("purchase.monthly.selected")}),this.rightChild.bind("purchase.annual.selected",function(){i.dispatch("purchase.annual.selected")}),this.leftChild.bind("purchase.not_logged_in",function(e){i._notLoggedInHandler(e)}),this.leftChild.bind("low_res_download.not_logged_in",function(){i.dispatch("low_res_download.not_logged_in")}),this.leftChild.bind("deactivate",,this.leftChild.bind("purchase.success",function(){i.dispatch("purchase.success")}),this.leftChild.bind("purchase.failed",},_initializeWidgets:function _initializeWidgets(){var e=this,t=this.categoryName;t&&(t=(t=t.substring(0,t.length-1)).split(" ")[0]),e._initializeWidgetsByCategory(t),Helpers.App.isMerchPreviewEnabled()&&Service.MultiplePurchase&&Boolean(Service.MultiplePurchase.getInstance())&&(this.ctrl=new UI.StageDownload.Controller({purchasesModalRef:this.leftChild,preview:this.previewData}))},_initializeWidgetsByCategory:function _initializeWidgetsByCategory(e){var t=this;t.leftChild=t._initializeLeftWidget(t.$leftArea,e),t.rightChild=t._initializeRightWidget(t.$rightArea,e)},_initializeRightWidget:function _initializeRightWidget(e,t){var i;return null===this.rightChild&&(this.showPreview&&(i=t),this.rightChild=new UI.SubscriptionsPartial({name:"subscriptionsPartialCompare",type:"compare",previewCategory:i,title:this.constructor.TEXT_SUBSCRIPTIONS_PARTIAL_TITLE,label:"Popular",mockupsStagesCount:window._pl_mockupsStagesCount})),this.rightChild.render(e),this.appendChild(this.rightChild),this.rightChild},_initializeLeftWidget:function _initializeLeftWidget(e,t){return null===this.leftChild&&(this.leftChild=new UI.Purchases({categoryName:t})),this.leftChild.render(e),this.appendChild(this.leftChild),this.leftChild},_notLoggedInHandler:function _notLoggedInHandler(e){var t=this,i=null;if(this._resumePurchasePromise=null,e.target===this.leftChild&&(i=this.leftChild.directDownload.bind(this.leftChild)),e.target===this.rightChild&&(i=function(){var e=Helpers.App.getSubscription();e&&!e.is_paused||t.rightChild.subscribeButtonClick()}),null!==i)return this._resumePurchasePromise=P.runner(Promise.resolve(i)),this._resumePurchasePromise.then(function(e){e()}),this.deactivate(),this.dispatch("purchase.not_logged_in"),this},resumePurchase:detach:function detach(){return this.element.data("modal",null),this.element.detach(),this},activate:function activate(){var t=this;if(Helpers.StageType.getTheme().then(function(e){t.setTheme(e),Helpers.App.freebieBlocked()&&t.setPaidTheme(),t.leftChild.setTheme&&t.leftChild.setTheme(e)})["catch"](function(e){throw t.setPaidTheme(),new Error(e)}),this.updateImageBeforeActivate&&(engine&&engine.ready?(engine._deactivateInteractions(),engine._refresh(),this.previewData.source=engine.getImage()):this.previewData.source=this.LOADING_IMAGE_PATH,this.setPreviewOnChildren(this.previewData)),this._controllerForMultiPurchasesExists())return this.ctrl.setSubscriptionsRef(this.rightChild),this.ctrl.activateModal(),void this.ctrl.updatePreview(this.previewData);this.$modalFooter.addClass("hidden"),this.wasAnimationTriggered()||null===this.rightChild?this.$animationInfo.remove():this._handleAnimation(),this._activateChildWidgets(),setTimeout(function(){t.element.modal("show")},150)},_reverseOrder:function _reverseOrder(e){!1!==e?this.element.addClass("reverse"):this.element.removeClass("reverse")},_activateChildWidgets:function _activateChildWidgets(){Widget.prototype.activate.call(this),this.leftChild.activate()},deactivate:function deactivate(e){if("function"==typeof e){var t=function(){e()};this.element.one("hidden.bs.modal",t.bind(this))}this.element.modal("hide"),Widget.prototype.deactivate.call(this)},instantiatePurchaseOverlay:function instantiatePurchasesOverlay(e){this.purchaseOverlay!==undefined&&this.purchaseOverlay.destroy();var t={name:"purchaseOverlay",purchaseRecord:e};return this.appendChild(this._createPurchaseOverlayWidget(t)),this.purchaseOverlay.bind("purchase.success",function(e){var t=null;e.data.coupon&&(t=e.data.coupon),Helpers.GlobalEventTracker.purchaseSuccess({amount_in_cents:e.data.amount_in_cents,license_id:e.data.license_id,resolution_id:e.data.resolution_id,stage_id:Helpers.StageType.getStageID(),user_id:Helpers.App.getUser().id,invoice_number:e.data.invoice_number}),this.dispatch("purchase.success",t)}.bind(this)).bind("purchase.failed",function(e){var t=e&&e.data?e.data.status:0,i=e&&e.data?e.data.message:"";422===t?this.dispatch("stage.error",{error:!0,errorType:"broken-stage",message:i}):"purchaseOverlay"!=e.target.name&&this.dispatch("purchase.failed",e.data)}.bind(this)),this.purchaseOverlay},_createPurchaseOverlayWidget:function _createPurchaseOverlayWidget(e){var t=PurchaseWidgetStrategy.PurchaseOverlay,i=null;return Helpers.App.isGuestCheckoutExperimentActive()&&(t=PurchaseWidgetStrategy.PurchaseGuestOverlay),i=new PurchaseWidgetStrategy(t),console.log(this.constructor.className+" -> Creating the purchase overlay"),i.create(e)},setResolutionData:isAttached:function isAttached(){return this._controllerForMultiPurchasesExists()?this.ctrl.isModalAttached():$.contains(document,this.element[0])},setPreview:function setPreview(e){e&&(this.previewData=e,this.updateImageBeforeActivate=e.interactive||!1,this.updateImageBeforeActivate&&!0!==this.isAttached()||this.setPreviewOnChildren(this.previewData))},setPreviewOnChildren:function setPreviewOnChildren(e){this.data=e,this.leftChild&&this.leftChild.setPreview&&this.leftChild.setPreview(e),this.rightChild&&this.rightChild.setPreview&&this.rightChild.setPreview(e),this._controllerForMultiPurchasesExists()&&this.ctrl.updatePreview(e)},_configureRecurly:function _configureRecurly(){var e={currency:window.recurlyConfig.currency,publicKey:window.recurlyConfig.publicKey,fields:{all:{style:{fontSize:"16px",fontColor:"#555555",padding:"1px",placeholder:{color:"#55555 !important"}}},number:{selector:"#recurly-number",style:{placeholder:{content:""}}},cvv:{selector:"#recurly-cvv",style:{placeholder:{content:""}}},month:{selector:"#recurly-month",style:{placeholder:{content:""}}},year:{selector:"#recurly-year",style:{placeholder:{content:""}}},vat_number:{selector:"#recurly-vat-number",style:{placeholder:{content:""}}}}};recurly.configure(e)},setAnimationTriggered:function setAnimationTriggered(){$.cookie("_pl_purchase_animation",!0,{path:"/",expires:3650})},wasAnimationTriggered:function wasAnimationTriggered(){return!!Helpers.StageType.isFree()||("true"===$.cookie("_pl_purchase_animation")||!1)},_handleAnimation:function _handleAnimation(){var e=this;this.element.find(".modal-body > *").css("opacity","0"),this.element.one("shown.bs.modal",,this.element.one("hidden.bs.modal",function(){e.$animationInfo.remove(),e.element.find(".modal-body > *").css("opacity","1")})},skipModalAndDownloadImmediately:function skipModalAndDownloadImmediately(){this.leftChild.directDownload()},_isLogoStageProcessing:function _isLogoStageProcessing(){var e=Service.MultiplePurchase.getInstance(),t=Boolean(Helpers.StageType.isLogo()),i=Helpers.App.isMerchPreviewEnabled(),n=t&&0===page.stage.$body.find(".merch-preview-container").length;return!1!==t&&!1!==i&&(!n&&(!(!1!==Boolean(page.stage.merchPreviewController)||!i)||(null===this.previewData||!1===e.isProcessingStarted())))},downloadInmediatelyOrActivate:function downloadInmediatelyOrActivate(){this._isLogoStageProcessing()||(!0===Helpers.App.isSubscriptionValid()?this.skipModalAndDownloadImmediately():this.activate())},setFreeTheme:function setFreeTheme(){this.$orDiv.hide(),this.rightChild&&(this.rightChild.element.css("marginLeft","10px"),this.rightChild.setTitle(),this.$rightArea.show())},setPaidTheme:function setPaidTheme(){this.$orDiv.show(),this.rightChild&&(this.rightChild.setTitle(this.constructor.TEXT_SUBSCRIPTIONS_PARTIAL_TITLE),this.rightChild.element.css("marginLeft","0px"),this.$rightArea.show()),Helpers.App.isInWatermarkExperiment()&&this.element.addClass("purchases__watermark-download")},setAdminTheme:function setAdminTheme(){this.setFreeTheme(),Helpers.App.getSubscription()&&this.rightChild&&this.$rightArea.hide()},setSubscribedTheme:function setSubscribedTheme(){this.setFreeTheme(),this.rightChild&&this.$rightArea.hide()},_controllerForMultiPurchasesExists:function _controllerForMultiPurchasesExists(){return this.ctrl&&Helpers.App.isMerchPreviewEnabled()&&Helpers.StageType.isLogo()&&Boolean(Service.MultiplePurchase.getInstance())&&0<page.stage.$body.find(".merch-preview-container").length},updateSubscriptionPaymentInfo:function updateSubscriptionPaymentInfo(){this.rightChild.purchaseOverlay&&this.rightChild.purchaseOverlay.updateBillingInfo()},syncSubscriptionCouponRequestData:}),Class(UI,"PurchasesModalTabs").inherits(Widget)({prototype:{$tabsWrapper:null,$tabs:null,$regularButton:null,init:function init(e){Widget.prototype.init.call(this,e),this.$tabsWrapper=this.element.find(".download-tabs"),this.$tabContainers=this.$tabsWrapper.find("li.btn"),this.$tabs=this.$tabsWrapper.find('a[data-toggle="tab"]'),this.$regularButton=this.$tabs.filter('a[href="#normalDownload"]'),this._bindEvents()},_bindEvents:activateRegularTab:function activateRegularTab(){return this.$regularButton.tab("show"),this},showTabs:function showTabs(){return this.$tabsWrapper.show(),this},hideTabs:function hideTabs(){return this.$tabContainers.removeClass("active"),this.$tabsWrapper.hide(),this},destroy:}),Class(UI,"SinglePurchaseVarB").inherits(UI.SinglePurchasesModal)({html:'    <div class="modal single-purchase-overlay" tabindex="-1" role="dialog" aria-labelledby="downloadOverlayLabel" aria-hidden="true">        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">            <span aria-hidden="true">\xd7</span>        </button>        <div class="modal-dialog">            <div class="modal-content">                <div class="modal-body">                    <div class="area1" data-area="left"></div>                    <div class="or-div">OR</div>                    <div class="area2" data-area="right"></div>                </div>            </div>        </div>    </div>',prototype:{activate:function activate(){var t=this;Helpers.StageType.getTheme().then(["catch"](function(e){throw t.setPaidTheme(),new Error(e)}),this.updateImageBeforeActivate&&(engine&&engine.ready?(engine._deactivateInteractions(),engine._refresh(),this.previewData.source=engine.getImage()):this.previewData.source=this.LOADING_IMAGE_PATH,this.setPreviewOnChildren(this.previewData)),this.$modalFooter.addClass("hidden"),this.$animationInfo.remove(),this.$orDiv.hide(),this.$rightArea.hide(),this._activateChildWidgets(),t.element.modal("show")},setPaidTheme:function setPaidTheme(){this.$orDiv.hide(),this.rightChild&&(this.rightChild.element.css("display","none"),this.$rightArea.hide()),Helpers.App.isInWatermarkExperiment()&&this.element.addClass("purchases__watermark-download")}}}),Class(UI,"PurchaseResolutions").inherits(Widget)({prototype:{_activeGroupLabel:null,radios:null,keep_selection_storage:null,groups:null,init:function init(e){Widget.prototype.init.call(this,e),this.radios=this.element.find(".resolution-options input:radio"),this.keep_selection_storage={},this.groups={},this._setGroup("video_product",this.element.find(".download-overlay__image-size.is_video_product")),this._setGroup("smart_template",this.element.find(".download-overlay__image-size.is_smart_template")),this._bindEvents()},_bindEvents:function _bindEvents(){var i=function i(e){var t;e.target.checked=!0,this.radios.each(,e.target.parentNode.classList.add("selected"),t=Registry.Resolutions.getByKey("id",~~e.target.value),Helpers.Resolutions.setActive(t),this.setActiveGroup(e.target),this.dispatch("resolution-selected")}.bind(this);this.radios.on("click",i)},_setGroup:function _setGroup(e,t){this.groups[e]===undefined&&(this.groups[e]={},this.keep_selection_storage[e]=null),this.groups[e].element=t,this.groups[e].first=t.find("input[type=radio]")[0]},_hideAllGroups:function _hideAllGroups(){for(var e in this.groups)this.groups.hasOwnProperty(e)&&this.groups[e].element.hide()},showOptions:function showOptions(e){this._hideAllGroups(),this.groups[e].element.show(),this.setActiveGroupLabel(e),!1===this.isActiveGroup(e)&&this.setActiveGroup(this.groups[e].first),this.getActiveGroup().click()},setActiveGroupLabel:function setActiveGroupLabel(e){this._activeGroupLabel=e},setActiveGroup:function setActiveGroup(e){this.keep_selection_storage[this._activeGroupLabel]=e},getActiveGroup:getActiveGroupByName:isActiveGroup:function isActiveGroup(e){return!!this.keep_selection_storage[e]&&this.keep_selection_storage[e]},getByID:function getByID(e){var t=this.radios.filter(e);return t||!1},selectByID:function selectByID(e){var t=this.radios.filter(e);t?t.click():console.warn("resolution not found")},getSelected:}),Class("RecurlyClient")({configure:function configure(e){e.fraud&&this._configureForFraud(e),recurly.configure(e)},_configureForFraud:),Class(UI,"BillingInfo").inherits(Widget)({html:'<div class="container"></div>      <div class="widget billing-info">    <div class="billing_error_message">      </div>        <div class="payment-options-container"></div>        <div class="form-widget-container"></div>        <div class="footer">          <button type="submit" class="button primary long">Update</button>        </div>      </div>    ',prototype:{accountRecord:null,submitBtn:null,billingForm:null,errorMessage:null,init:function init(e){Widget.prototype.init.call(this,e),this.submitBtn=this.element.find(".footer > button"),this.formContainer=this.element.find(".form-widget-container"),this.errorMessage=this.element.find(".billing_error_message"),this.optionsContainer=this.element.find(".payment-options-container"),this.billingForm=new UI.BillingForm({name:"billingForm",accountRecord:this.accountRecord}),this.storedBillingInfo=this.accountRecord.billing_info.lastFour,window.location.href.includes("/account?update=true")?this._setButtonTextAndAction("creditCard"):this.storedBillingInfo?this._setButtonTextAndAction("savedCard"):this._setButtonTextAndAction("creditCard"),this.paymentOptions=new UI.PaymentOptions({billingForm:this.billingForm,formContainer:this.formContainer,accountRecord:this.accountRecord,hideServerErrorMethod:this.hideServerError.bind(this)}),this.appendChild(this.paymentOptions),this.paymentOptions.render(this.optionsContainer),this._modifyBillingInfoForm(),this._setBindings()},_setBindings:function _setBindings(){return this.submitBtn.on("click",this._generalSubmitHandler.bind(this)),this.billingForm.bind("country.change",function(e){~this.billingForm.euCountries.indexOf(e.data.$countryCode.toUpperCase())?this.billingForm.showVatField():this.billingForm.hideVatField()}.bind(this)),this.paymentOptions.bind("payment.method.change",bind(this)),this},_submitEventHandler:function _submitEventHandler(e){e.preventDefault();var i=this;this._setLoadingCardForm(!0),this.hideServerError(),this.billingForm.getToken().then(function(e){var t=i.billingForm.getContactData();$.ajax({url:"/account/billing",type:"PUT",data:{email:t.email,token:e.id}}).done(function(){i.dispatch("update.success")}).fail(function(e){var t=e.responseJSON.message;i.dispatch("update.failed",t),i._setLoadingCardForm(!1),i.billingForm.markInvalidBillingInfo()})})["catch"](},showServerError:function showServerError(e){var t=$('<div class="alert alert-danger alert-dismissible"></div>'),i=$('<span class="billing_error_message">'+e+'</span> <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a></div>');t.append(i),this.errorMessage.append(t),this.errorMessage.removeClass("hide")},hideServerError:function showServerError(){this.errorMessage.addClass("hide"),this.errorMessage.html("")},_setLoadingCardForm:function _setLoadingCardForm(e){!0===e?(this.submitBtn.html(""),this.submitBtn.addClass("no-text-btn light-spinner"),this.submitBtn.css({"pointer-events":"none"})):!1===e&&(this.submitBtn.html("Update"),this.submitBtn.removeClass("no-text-btn light-spinner"),this.submitBtn.css({"pointer-events":"auto"}))},render:function render(e,t){return Widget.prototype.render.call(this,e,t),this.billingForm.render(this.formContainer),this},destroy:function destroy(){this.submitBtn=null,this.billingForm.destroy(),this.billingForm=null,Widget.prototype.destroy.call(this)},_modifyBillingInfoForm:function _modifyBillingInfoForm(){var e=this,t=this.getElement().find(".payment_method");e.billingForm.moveContactInfoAfter(t)},_generalSubmitHandler:function _generalSubmitHandler(e){"savedCard"===this.currentPaymentMethod?this._handleSavedCardSubmission(e):"paypal"===this.currentPaymentMethod?this._handlePaypalSubmission(e):this._submitEventHandler(e)},_setButtonTextAndAction:function _setButtonTextAndAction(e){switch(this.currentPaymentMethod=e){case"savedCard":this.submitBtn.html("Update");break;case"paypal":this.submitBtn.html("Update with PayPal");break;default:this.submitBtn.html("Update")}},_handleSavedCardSubmission:function _handleSavedCardSubmission(e){e.preventDefault();var t=this,i=$(".alert-dismissible");i.length&&i.remove(),this._setLoadingCardForm(!0),this.element.off("hidden.bs.modal"),Helpers.App.tryToApplyInvoice({success:function(){t._setLoadingCardForm(!1),t.dispatch("hide.modal.request"),t.dispatch("billing.update.success")}.bind(this),error:bind(this),applyInvoice:!0})},_handlePaypalSubmission:function(e){e.preventDefault()}}}),Class(UI,
"BillingForm").inherits(Widget).includes(Translator)({html:'<div class="widget billing-form">        <form class="recurly billing_form">          <div class="contact_info">            <div class="title">Billing Contact</div>            <div class="floating-label-input name">              <label class="">Name<i class="field-dot-required">*</i></label>              <input id="recurly-first-name" data-recurly="first_name" required>            </div>            <div class="floating-label-input last-name">              <label class="">Last Name<i class="field-dot-required">*</i></label>              <input id="recurly-last-name" data-recurly="last_name" required>            </div>            <div class="floating-label-input business-name">              <label class="">Business Name (optional)</label>              <input id="recurly-company" data-recurly="company">            </div>            <div class="floating-label-input email">              <label class="">Email</label>              <input type="email" class="form-control" id="recurly-email" required>            </div>          </div>          <div class="billing_info">            <div class="title">Billing Info </div>            <div class="floating-label-input card-number">                <label class="">Card Number<i class="field-dot-required">*</i></label>                <div id="recurly-number" class="card_number" data-recurly="number"></div>            </div>            <div class="floating-label-input month">                <label class="">Expiry Month<i class="field-dot-required">*</i></label>                <div id="recurly-month" data-recurly="month"></div>            </div>            <div class="floating-label-input year">                <label class="">Expiry Year<i class="field-dot-required">*</i></label>                <div id="recurly-year" data-recurly="year"></div>            </div>            <div class="floating-label-input cvv">                <label class="">Security Code<i class="field-dot-required">*</i></label>                <div id="recurly-cvv" class="card_number" data-recurly="cvv"></div>            </div>            <div class="floating-label-input country">                <label class="">Country</label>                <input class="recurly-country" autocomplete="nope">                <input type="hidden" class="recurly-country_code" data-recurly="country" />            </div>            <div class="floating-label-input zip">                <label class="">Zip/Postal<i class="field-dot-required">*</i></label>                <input id="recurly-postal-code" data-recurly="postal_code">            </div>            <div class="floating-label-input vat">                <label>VAT Number (Optional)</label>                <input id="recurly-vat-number" data-recurly="vat_number" maxlength="20">            </div>          </form>        </div>    ',BRAZIL_CPF_FIELD:'<div class="floating-label-input cpf">        <label>CPF<i class="field-dot-required">*</i></label>        <input id="recurly-tax-identifier" data-recurly="tax_identifier" required>        <input id="recurly-tax-identifier-type" data-recurly="tax_identifier_type" class="hidden" value="cpf">    </div>',TEXT_FIELD_ERROR:"Wrong",TEXT_FIELD_REQUIRED:"Required",BRAZIL_CURRENCY:"BRL",GUEST_CHECKOUT_EMAIL_LABEL:'Billing e-mail<i class="field-dot-required">*</i>',prototype:{accountRecord:null,withTitles:!0,$formElement:null,$errorContainer:null,$firstNameElement:null,$lastNameElement:null,$emailElement:null,$country:null,$zipCode:null,$countryCode:null,$vatNumber:null,$vatField:null,euCountries:null,lastFieldsState:null,contactInfo:null,billingInfo:null,init:function init(e){Widget.prototype.init.call(this,e),this.currentCurrency=window.currencyHelper.getLabel(window.recurlyConfig.currency),this.$formElement=this.element.find("> .recurly.billing_form"),this.$errorContainer=this.element.find(".server_errors"),this.$firstNameElement=this.element.find("#recurly-first-name"),this.$lastNameElement=this.element.find("#recurly-last-name"),this.companyElement=this.element.find("#recurly-company"),this.$emailElement=this.element.find("#recurly-email"),this.$country=this.element.find(".recurly-country"),this.$zipCode=this.element.find("#recurly-postal-code"),this.$countryCode=this.element.find(".recurly-country_code"),this.$vatNumber=this.element.find(".vat"),this.$vatField=this.element.find("#recurly-vat-number"),this.euCountries=Helpers.App.getEUCountries(),this.contactInfo=this.element.find(".contact_info"),this.billingInfo=this.element.find(".billing_info"),this.$emailLabel=this.getElement().find(".email label"),this.$businessName=this.getElement().find(".business-name"),this.identifiers={number:Helpers.App.generateUid(),month:Helpers.App.generateUid(),year:Helpers.App.generateUid(),cvv:Helpers.App.generateUid()},this.element.find("#recurly-number").attr("recurly-identifier",this.identifiers.number),this.element.find("#recurly-month").attr("recurly-identifier",this.identifiers.month),this.element.find("#recurly-year").attr("recurly-identifier",this.identifiers.year),this.element.find("#recurly-cvv").attr("recurly-identifier",this.identifiers.cvv),this.currentCurrency===this.constructor.BRAZIL_CURRENCY?(this._addCPFField(),this.$formElement.find(".floating-label-input.country").addClass("brazil-country")):this.$formElement.find(".floating-label-input.country").removeClass("brazil-country"),this._populateFields(),this._setBindings(),Helpers.App.isGuestCheckoutExperimentActive()&&(this._updateEmailLabel(),this.$businessName.hide())},_updateEmailLabel:_configureRecurly:function _configureRecurly(){var e={currency:window.recurlyConfig.currency,publicKey:window.recurlyConfig.publicKey,required:["cvv"]};e.fields={all:{style:{fontSize:"16px",fontColor:"#555555",padding:"1px",placeholder:{color:"#55555 !important"}}},number:{selector:'[recurly-identifier="'+this.identifiers.number+'"]',style:{placeholder:{content:"1111 1111 1111 1111"}}},cvv:{selector:'[recurly-identifier="'+this.identifiers.cvv+'"]',style:{placeholder:{content:""}}},month:{selector:'[recurly-identifier="'+this.identifiers.month+'"]',style:{placeholder:{content:"MM"}}},year:{selector:'[recurly-identifier="'+this.identifiers.year+'"]',style:{placeholder:{content:"YYYY"}}}},e.fraud={kount:{dataCollector:!0,form:this.$formElement[0]}},RecurlyClient.configure(e)},_addCPFField:function _addCPFField(){var e=$(this.constructor.BRAZIL_CPF_FIELD);this.$formElement.find(".billing_info").append(e)},_populateFields:function _populateFields(){return this.accountRecord&&(this.$firstNameElement.val(this.accountRecord.billing_info.firstName),this.$lastNameElement.val(this.accountRecord.billing_info.lastName),this.companyElement.val(this.accountRecord.billing_info.company),this.$zipCode.val(this.accountRecord.billing_info.zip),this.$vatField.val(this.accountRecord.billing_info.$vatNumber),this.$emailElement.val(this.accountRecord.contact_info.email||Helpers.App.getUser().email),this.accountRecord.billing_info.country||(this.accountRecord.billing_info.country="us",Helpers.App.isIndianUser()&&(this.accountRecord.billing_info.country="in")),this.currentCurrency===this.constructor.BRAZIL_CURRENCY&&(this.accountRecord.billing_info.country="br")),this},_setBindings:function _setBindings(){var e=this;this.$country.on("change init",bind(this)),this.$country.on("click",function(){var e=this;setTimeout(0)}.bind(this)),recurly.on("change",function(e){this.lastFieldsState=e}.bind(this)),this.element.find(".floating-label-input>input").on("focusin",,this.element.find(".floating-label-input>input").on("focusout",function(e){var t=$(e.target);t.val()||t.parent().removeClass("active")});var t=Helpers.App.debounce(this._vatFieldChanged,1e3).bind(e);return this.$vatField.bind("keyup",function(){t()}),this._userStartedFilling(),this},getVatNumber:function getVatNumber(){return this.$vatField.val()||""},getSelectedCountry:function getSelectedCountry(){var e="US";this.currentCurrency===this.constructor.BRAZIL_CURRENCY&&(e="BR");var t=this.$country.countrySelect("getSelectedCountryData");return this.$countryCode.val(t.iso2),this.$countryCode[0].value||e},_vatFieldChanged:_userStartedFilling:function _userStartedFilling(){var i=!1;this.element.find(".floating-label-input>input").keypress(,recurly.on("change",function(e){if(!i){var t=e.fields;Object.keys(t).forEach(function(e){t[e].focus&&!t[e].empty&&(Helpers.GlobalEventTracker.cardFormForPlanStartedFilling(),i=!0)})}})},isFieldStateEmpty:function isFieldStateEmpty(e){var t=!0;return this.lastFieldsState&&(t=this.lastFieldsState.fields[e].empty),t},showVatField:function showVatField(){this.$vatNumber.show()},hideVatField:function hideVatField(){this.$vatField.val(""),this.$vatNumber.hide()},getToken:function getToken(){var r=this,e=this.$formElement.get(0);return r.currentCurrency===r.constructor.BRAZIL_CURRENCY&&(r.accountRecord.billing_info.country="br",r.$country.countrySelect("selectCountry",r.accountRecord.billing_info.country)),new Promise(function(n,s){recurly.token(e,function(e,t){var i=[];e&&("validation"!==e.code&&"invalid-parameter"!==e.code||(i=i.concat(e.fields))),!0===r._isEmailInvalid()&&i.push("email"),r.currentCurrency===r.constructor.BRAZIL_CURRENCY&&""===r.element.find("#recurly-tax-identifier").val()&&i.push("tax_identifier"),i.length?(r.validateFields(i),s(e||{message:"Error processing data",fields:i})):(r.markFieldsAsValid(),n(t))})})},_isEmailInvalid:function _isEmailInvalid(){var e=this.getContactData(),t=!1;e.email&&(t=!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e.email).toLowerCase()));return e.email.length<1||t},getContactData:function getContactData(){return{firstName:this.$firstNameElement.val(),lastName:this.$lastNameElement.val(),company:this.companyElement.val(),zip:this.$zipCode.val(),vat:this.$vatField.val(),email:this.$emailElement.val()}},validateFields:function validateFields(e){this.markFieldsAsValid();this.$formElement.get(0);return e.forEach(function(e){e=e.replace(/\_/g,"-");var t=this.element.find("#recurly-"+e),i=t.parent(),n=i.children(".placeholder"),s="";i.addClass("invalid");var r=this.lastFieldsState.fields[e];s=this.constructor.TEXT_FIELD_ERROR+" "+n.text(),r?r.empty?s=n.text()+" "+this.constructor.TEXT_FIELD_REQUIRED:!1===r.valid&&(s=this.constructor.TEXT_FIELD_ERROR+" "+n.text()):s=t.val()?this.constructor.TEXT_FIELD_ERROR+" "+n.text():n.text()+" "+this.constructor.TEXT_FIELD_REQUIRED,i.append($('<label class="error-helper-text">'+s+"</label>"))}.bind(this)),this},markInvalidBillingInfo:function markInvalidBillingInfo(){return this.validateFields(["number","month","year","cvv"]),this},markFieldsAsValid:function markFieldsAsValid(){return this.element.find(".error-helper-text").remove(),this.element.find(".invalid").removeClass("invalid"),this},render:function render(e,t){Widget.prototype.render.call(this,e,t);var i="us";return this._configureRecurly(),this.$country.countrySelect({responsiveDropdown:!0}),this.accountRecord&&this.accountRecord.billing_info.country&&(i=this.accountRecord.billing_info.country),this.currentCurrency===this.constructor.BRAZIL_CURRENCY&&(i="br"),this.$country.countrySelect("selectCountry",i),this.$countryCode.val(i),~this.euCountries.indexOf(i)&&(this.$vatNumber.show(),this.$country.trigger("change")),!1===this.withTitles&&this.element.find(".title").remove(),this},triggerChangeCountry:function triggerChangeCountry(){this.$country.trigger("change")},enableForm:function enableForm(){this.element.find(".floating-label-input").removeClass("disabled")},disableForm:moveContactInfoAfter:function moveContactInfoAfter(e){this.contactInfo.after(e)},showFormFields:function showFormFields(){this.getElement().addClass("show-form")},hideFormFields:destroy:function destroy(){this.$formElement=null,this.$errorContainer=null,this.$firstNameElement=null,this.$lastNameElement=null,this.companyElement=null,this.$emailElement=null,this.$country=null,this.$zipCode=null,this.$countryCode=null,this.$vatNumber=null,this.$vatField=null,this.euCountries=null,Widget.prototype.destroy.call(this)},setEmail:function setEmail(e){this.$emailElement.val(e)}}}),Class(UI,"PaymentOptions").inherits(Widget)({html:'<div class="payment_method multiple">            <div class="payment_option saved_card_option selected">                <input type="radio" name="payment_method">                <label></label>                <div class="card_logo"></div>            </div>            <div class="payment_option card_option">                <input type="radio" name="payment_method" checked>                <label></label>                <div class="new-cards">                    <img src="/assets/icons/accepted-cards.svg">                </div>            </div>            <div class="payment_option paypal_option">                <input type="radio" name="payment_method">                <label></label>                <div class="logo"></div>            </div>        </div>        <div class="saved-card-container">            <div class="saved-card-info">                <div class="card"></div>                <span>Ending with ****</span>                <div class="card-last-four"></div>            </div>        </div>        <div class="paypal" style="display: none;">            <div class="paypal_message">                You will be taken to PayPal to authorize a billing agreement.<br><br>Customers with an EU or Australian Paypal billing address will have additional VAT or GST charges.<br><br><strong>Please make sure pop-ups aren\'t blocked.</strong>            </div>        </div>    ',prototype:{billingForm:null,storedBillingInfo:!1,formContainer:null,accountRecord:null,hideServerErrorMethod:null,init:function init(e){Widget.prototype.init.call(this,e);var t=this;this.billingForm=e.billingForm,this.$formContainer=e.formContainer,this.storedBillingInfo=e.storedBillingInfo,this.accountRecord=e.accountRecord,this.$paymentOptions=this.element.find(".payment_option"),this.$savedCardOption=this.getElement().find(".payment_option.saved_card_option"),this.$paypalOption=this.getElement().find(".payment_option.paypal_option"),this.$cardOption=this.getElement().find(".payment_option.card_option"),this.$paypalMessageContainer=this.element.find(".paypal"),this.$savedCardContainer=this.element.filter(".saved-card-container"),this.$closeBtn=this.element.find("button.close"),this.hideServerErrorMethod=e.hideServerErrorMethod,this.storedBillingInfo=this.accountRecord.billing_info.lastFour,this._setBindings(),this._savedCardInfoAvailable()?(t.$savedCardOption.css("display","flex"),t.$paymentOptions.find("> input").prop("checked",!1),t.$savedCardOption.find("> input").prop("checked",!0),t._updatedStoredCardInfo(),t._showSavedCardOption()):t._showCreditCardOption()},_setBindings:function _setBindings(){var t=this;t.$paymentOptions.bind("click",function(){t.$paymentOptions.removeClass("selected"),t.$paymentOptions.find("> input").prop("checked",!1);var e=$(this);e.addClass("selected"),e.find("> input").prop("checked",!0),e.hasClass("saved_card_option")?t._showSavedCardOption():t._showCreditCardOption()})},_showPaypalOption:function showPaypalOption(){return this.dispatch("payment.method.change",{method:"paypal"}),this.hideServerErrorMethod(),this.$savedCardContainer.hide(),this.$paypalMessageContainer.show(),this.billingForm.hideFormFields(),this},_showCreditCardOption:function showCreditCardOption(){return this.dispatch("payment.method.change",{method:"creditCard"}),this.hideServerErrorMethod(),this.$paypalMessageContainer.hide(),this.$savedCardContainer.hide(),this.$formContainer.css("display","block"),this.billingForm.showFormFields(),this},_showSavedCardOption:function showCreditCardOption(){return this.dispatch("payment.method.change",{method:"savedCard"}),this.hideServerErrorMethod(),this.$paypalMessageContainer.hide(),this.billingForm.hideFormFields(),this.$savedCardContainer.show(),this},_updatedStoredCardInfo:function _updatedStoredCardInfo(){if(!1!==this._savedCardInfoAvailable()){var e=this,t=e.accountRecord.billing_info.cardType.toLowerCase();e.$savedCardContainer.find(".card").addClass(t),e.$savedCardContainer.find(".card-last-four").text(e.accountRecord.billing_info.lastFour)}},_savedCardInfoAvailable:}),Class(UI,"PayPalModal").inherits(Widget).includes(Translator)({html:'        <div class="modal paypal-modal fade" id="paypalModal" data-keyboard="false" role="dialog" aria-labelledby="modal-title" aria-hidden="true">          <div class="modal-dialog">            <div class="modal-content">              <div class="modal-header grayed">                <h4 id="modal-title">Waiting for PayPal...</h4>              </div>              <div class="modal-body">                <div class="text-center content">                  <h3> Please complete the payment on the PayPal window </h3>                  <p> Do <b><u>not</b></u> close this window. If something went wrong, <a id="retry"> click here to restart the process </a>. </p>                </div>                <div class="text-center spinner">                  <img src="/assets/paypal_loader.gif">                </div>              </div>            </div>          </div>        </div>    ',prototype:{init:function init(e){return Widget.prototype.init.call(this,e),this.retry=this.element.find("#retry"),this.element.bind("hidden.bs.modal",function(){this.dispatch("paypal.deactivate")}.bind(this)),this.retry.bind("click",function(){this.dispatch("paypal.retry")}.bind(this)),this},initPayment:function initPayment(e){return recurly.paypal(e,function(e,t){e?this.dispatch("paypal.reject",e):this.dispatch("paypal.success",t)}.bind(this)),this},activate:function activate(){return Widget.prototype.activate.call(this),this.element.modal("show"),this},deactivate:function deactivate(){return this.element.modal("hide"),Widget.prototype.deactivate.call(this),this},render:function(e,t){return Widget.prototype.render.call(this,e,t),this.element.modal("show"),this},destroy:}),Class(UI,"CTABlockSection").inherits(Widget).includes(Helpers.SubscriptionHelper,Helpers.CouponHelper,BubblingSupport,Translator,CurrencyLabelSetter)({TEXT_SUBSCRIPTION_ACTIVATION_ERROR:"Your subscription could not be activated, Please try again later",TEXT_INVALID_OR_CANCELED_SUBSCRIPTION:"Invalid subscription or already canceled subscription",TEXT_ERROR_CHARGING_STORE_CARD:"There was an error charging your stored card. Please use another payment option.",prototype:{$monthlyButton:null,$monthlyPrice:null,$monthlyOriginalPrice:null,$annualButton:null,$annualPrice:null,_taxRequestInProgress:null,_singleCtaBlock:null,PERIOD_MONTHLY:"monthly",PERIOD_ANNUAL:"annual",init:function init(e){Widget.prototype.init.call(this,e),this.$annualSave=this.element.find(".annual-save"),this.$monthlyButton=this.element.find(".cta-button-monthly"),this.$annualButton=this.element.find(".cta-button-annual"),this.$taxInformation=this.element.find(".plan-tax"),this.$monthlyPrice=this.element.find(".monthly-price"),this.$monthlyOriginalPrice=this.element.find(".monthly-original-price"),this.$annualPrice=this.element.find(".annual-price"),this.$annualMonthlyAmount=this.element.find(".annual-monthly-amount"),this["buttonWrapper_"+Registry.Plans.PLAN_MONTHLY]=this.element.find(".plan-button-wrapper.plan-monthly"),this["buttonWrapper_"+Registry.Plans.PLAN_ANNUAL]=this.element.find(".plan-button-wrapper.plan-annual"),this._bindEvents(),this._configureRecurly(),this._updatePriceAndTax(),this._singleSubscriptionCta()},_bindEvents:function _bindEvents(){this.$monthlyButton.click(this._onSubscriptionButtonClick.bind(this)),this.$annualButton.click(this._onSubscriptionButtonClick.bind(this)),Helpers.CouponHelper.bind("coupon.validated",this._updatePriceAndTax.bind(this)),Helpers.CouponHelper.bind("coupon.removed",this._updatePriceAndTax.bind(this)),this.bind("purchase.success",this._handleSubscriptionSuccess.bind(this))},_setTaxMessage:function _setTaxMessage(e){var t=this;t.getTaxMessage(e).then(function(e){t.$taxInformation.text(e)})["catch"](function(e){t.$taxInformation.text(e)})},_updateTaxRate:function updateTaxRate(){var e,t,i;i=this,e=Registry.Plans.get(Registry.Plans.PLAN_MONTHLY),(t=Helpers.Price.plan(e)).price.then(function(e){i._setTaxMessage(e),t.priceWithDiscount.then(function(e){i._setTaxMessage(e)})})},_onSubscriptionButtonClick:function _onSubscriptionButtonClick(e){var t=e.currentTarget;Helpers.App.isIndianUser()&&$(t).data("period")===this.PERIOD_MONTHLY||this.$monthlyButton.attr("disabled")&&this.$annualButton.attr("disabled")||(this.$monthlyButton.attr("disabled",!0),this.$annualButton.attr("disabled",!0),$(t).data("period")===this.PERIOD_ANNUAL?Registry.Plans.get(Registry.Plans.PLAN_ANNUAL):Registry.Plans.get(Registry.Plans.PLAN_MONTHLY),Helpers.GlobalEventTracker.planCTAClicked({session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id},$(t).data("period")),sessionStorage.setItem("plan",$(t).data("period")),!1===Helpers.CouponHelper.applyToPlan(Registry.Plans.PLAN_ANNUAL)&&!0===Helpers.CouponHelper.applyToPlan(Registry.Plans.PLAN_MONTHLY)?sessionStorage.setItem("plan","monthly"):sessionStorage.setItem("plan","annual"),this.dispatch("subscribe:button:clicked"))},subscribeButtonClick:function subscribeButtonClick(){Helpers.App.isGuestCheckoutExperimentActive()&&(Service.GuestCheckout.getInstance().setPreviousCheckoutTypeOpened("compare"),Helpers.App.setSubscribeFromModal("compare")),Helpers.App.isLoggedIn()||!1!==Boolean(Service.GuestCheckout.getInstance().getFormSubmitter())?this._handlePlanSubscribe():(this.dispatch("purchase.not_logged_in"),Helpers.App.setSubscribeFromModal("cta-block"),setTimeout(function(){this.$monthlyButton.attr("disabled",!1),this.$annualButton.attr("disabled",!1)}.bind(this)))},_handlePlanSubscribe:function _handlePlanSubscribe(){var e,t=this;switch(Helpers.App.isGuestCheckoutExperimentActive()&&(e=Registry.Plans.get(Registry.Plans.PLAN_ANNUAL)),sessionStorage.getItem("plan")){case this.PERIOD_MONTHLY:e=Registry.Plans.get(Registry.Plans.PLAN_MONTHLY),this.period=this.PERIOD_MONTHLY;break;case this.PERIOD_ANNUAL:e=Registry.Plans.get(Registry.Plans.PLAN_ANNUAL),this.period=this.PERIOD_ANNUAL}t.signRequestWithRecurly(e,t.discount,function(e){Helpers.GlobalEventTracker.recurlyFormAfterPlanSelected({plan_code:e.plan_code,amount_in_cents:e.amount_in_cents,description:e.description}),t._showPaymentForm(e)})},_showStoredBillingInfo:function _showStoredBillingInfo(e){this.instantiateStoredBillingInfoOverlay(),this.storedBillingInfoOverlay.refresh(e),this.storedBillingInfoOverlay.activate(),setTimeout(function(){this.$monthlyButton.attr("disabled",!1),this.$annualButton.attr("disabled",!1)}.bind(this),0)},instantiateStoredBillingInfoOverlay:function instantiateStoredBillingInfoOverlay(){this.storedBillingInfoOverlay===undefined&&(this.appendChild(new UI.StoredBillingInfoOverlay({name:"storedBillingInfoOverlay"})),this.storedBillingInfoOverlay.bind("change-card",function(e){this._showPaymentForm(e.data.recurlyData)}.bind(this)).bind("use-stored-card",bind(this)))},_showPaymentForm:function _showPaymentForm(e){var t,i,n;i=this.getEventTrackerName(),n=EventTracker.info({type:i,data:{}}),t=null,Helpers.CouponHelper.isValid()&&Helpers.CouponHelper.applyToPlan(e.plan_recurly_uuid)&&(t=Helpers.CouponHelper.getCode());var s={ajaxUrl:"/subscriptions/{{token}}/transaction",ajaxParams:{plan_recurly_uuid:e.plan_recurly_uuid,coupon_code:t,eventData:n}};$.extend(!0,e,s),this.purchaseOverlay&&this.purchaseOverlay.destroy();var r={name:"purchaseOverlay",purchaseRecord:e,paymentType:"subscription",discount:this.discount};this.appendChild(this._createPurchaseOverlayWidget(r)),this.purchaseOverlay.bind("purchase.failed",function(e){if("purchaseOverlay"!==e.target.name){var t=this.constructor.TEXT_SUBSCRIPTION_ACTIVATION_ERROR;this.dispatch("subscription.failure",{message:t})}}.bind(this)),this.purchaseOverlay.initSubscriptionForm().render($("body")).activate(),setTimeout(bind(this))},_createPurchaseOverlayWidget:function _createPurchaseOverlayWidget(e){var t=PurchaseWidgetStrategy.PurchaseOverlay,i=null;return Helpers.App.isGuestCheckoutExperimentActive()&&(t=PurchaseWidgetStrategy.PurchaseGuestOverlay),i=new PurchaseWidgetStrategy(t),console.log(this.constructor.className+" -> Creating the purchase overlay"),i.create(e)},getEventTrackerName:function getEventTrackerName(){var e;switch(e="Subscription:success:",this.period){case this.PERIOD_MONTHLY:e+="Unlimited";break;case this.PERIOD_ANNUAL:e+="Unlimited:Annual"}return e},_configureRecurly:function _configureRecurly(){var e={currency:window.recurlyConfig.currency,publicKey:window.recurlyConfig.publicKey,fields:{all:{style:{fontSize:"16px",fontColor:"#555555",padding:"1px",placeholder:{color:"#55555 !important"}}},number:{selector:"#recurly-number",style:{placeholder:{content:""}}},cvv:{selector:"#recurly-cvv",style:{placeholder:{content:""}}},month:{selector:"#recurly-month",style:{placeholder:{content:""}}},year:{selector:"#recurly-year",style:{placeholder:{content:""}}},vat_number:{selector:"#recurly-vat-number",style:{placeholder:{content:""}}}}};recurly.configure(e)},_handleSubscriptionSuccess:function _handleSubscriptionSuccess(i){Helpers.App._getPurchases(function(){var e;!1===Helpers.App.isGuestCheckoutExperimentActive()&&window.page.appNavBar.updateStatus();var t={message:"Your subscription is now activated"};this.dispatch("subscription.success",t),e=Helpers.App.getSubscriptionEventName(i.data.plan_recurly_uuid),Helpers.GlobalEventTracker.subscriptionSuccess({plan_name:Helpers.App.getSubscription().plan.name,plan_recurly_uuid:i.data.plan_recurly_uuid,amount_in_cents:Helpers.App.getSubscription().plan.amount_in_cents,user_id:Helpers.App.getUser().id,event:e,invoice_number:i.data.invoice_number})}.bind(this))},_renderPlanButtons:_updatePriceAndTax:function _updatePriceAndTax(){this._renderPlanButtons(),this._updateTaxRate()},_singleSubscriptionCta:function _singleSubscriptionCta(){this._singleCtaBlock=new UI.SubscriptionCta.SubscriptionCtaBlockController({monthlyCta:this.$monthlyButton,annualCta:this.$annualButton,forPricingPage:"pricingv2"===pageType.type})}}}),Class(UI,"FooterController").inherits(Widget).includes(BubblingSupport)({prototype:{$footerFeedbackSection:null,$userVoiceButton:null,init:function init(e){if(Widget.prototype.init.call(this,e),this.footerContainer=$("#footer-header"),0<this.footerContainer.length){if(this.footerColumns=$("#footer-header .column"),this.footerListItems=$("#footer-header .column .footer-links li"),this.footerLicenseLink=$('#footer-header a:contains("License")'),this.olarkElementsLink=$('#footer-header a:contains("Chat with Us")').parent(),this.$pricingButton=$(".js-btn-footer-pricing"),this.$freeAccount=$(".free-account"),window._pl_isUserLogged){var t="&nbsp;<img src='/assets/bubble-chat-grey.gif' />";this.olarkElementsLink.append(t)}else this.olarkElementsLink.remove();this._appendPricingButton(),this.updatePricingButton()}window.is_i18n_exp&&(this.olarkElementsLink=$(".footer-compact .chat-section button.chat-btn"),this.footerLicenseLink=$('.footer-compact .links-section a:contains("License")'),this.$freeAccount=$("<a></a>")),window.is_i18n_exp&&window._pl_isUserLogged&&this.olarkElementsLink.parent().removeClass("hidden"),(window.is_i18n_exp||0<this.footerContainer.length)&&this.bindings()},bindings:function bindings(){var e=this;this.footerLicenseLink.click(function(e){return e.preventDefault(),e.stopPropagation(),Helpers.GlobalEventTracker.openLicenseModal(),(new UI.FriendlyLicenseModal).activate()}),this.olarkElementsLink.click(,this.$freeAccount.click(},updatePricingButton:function updatePricingButton(){if(this.pricingButton){var e=Helpers.App.getSubscription();this.pricingButton.update(e)}},_appendPricingButton:function _appendPricingButton(){this.appendChild(new UI.PricingButton({name:"pricingButton",element:this.$pricingButton}))},hideFreeAccountButton:function hideFreeAccountButton(){this.$freeAccount.hide()}}}),Class(UI,"ShortcutDownloadStep").inherits(Widget)({html:'        <div>            <p class="title">Get Your Video!</p>            <div class="shortcut__video-wrapper shortcut__video-wrapper--paused">                <div class="shortcut__video-play-button">                </div>                <video muted="" playsinline=""></video>            </div>            <div class="btn-group video-actions">                <button type="button" class="btn btn-primary dowload-shortcut-button">Download to Camera Roll</button>                <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button>                <ul class="dropdown-menu">                    <li><a href="javascript:void(0)" class="instagram-shortcut-button">Publish to Instagram</a></li>                </ul>            </div>            <hr>            <p>Is the Button Above Not Working?</p>            <p><small>You need the <a class="shortcut-external-links" href="https://itunes.apple.com/app/shortcuts/id915249334" target="_blank">Shortcuts App</a> and the <a class="shortcut-external-links" href="https://www.icloud.com/shortcuts/afa2c3877c6a4d9eb3e860bec818dfe0" target="_blank">Placeit Shortcut</a>. Both are 100% Safe + FREE.<small></p>        </div>    ',prototype:{$video:null,$videoPlayButton:null,videoDownloadURL:null,videoPreviewURL:null,PAUSE_CLASS:"shortcut__video-wrapper--paused",init:function(e){Widget.prototype.init.call(this,e),this.$video=this.element.find("video"),this.$videoPlayButton=this.element.find(".shortcut__video-play-button"),this.$videoWrapper=this.element.find(".shortcut__video-wrapper"),this.$downloadButton=this.element.find(".dowload-shortcut-button"),this.$instagramButton=this.element.find(".instagram-shortcut-button"),this.$videoWrapper.hide(),this.$video.attr("src",this.videoPreviewURL).load(),this._removeVideoURLParams(),this._bindEvents(),Helpers.GlobalEventTracker.iosShortcutEvent("videoDownloadModal")},_getErrorURI:function _setErrorURI(){var e=new URL(window.location.href);e.searchParams.append("videoDownloadURL",this.videoDownloadURL),e.searchParams.append("videoPreviewURL",this.videoPreviewURL);var t=e.href;return this._browserIsFirefox()?t="firefox://open-url?url="+encodeURIComponent(t):this._browserIsSafari()||(t=t.replace("https","googlechromes")),encodeURIComponent(t)},_getShortcutURL:function _getShortcutURL(){var e=this._getErrorURI();return"shortcuts://x-callback-url/run-shortcut?name=Placeit%20Video%20for%20iPhone&x-cancel="+e+"&x-error="+e+"&input="},_downloadVideo:function _downloadVideo(){Helpers.GlobalEventTracker.iosShortcutEvent("download.cameraRoll"),this._runShortcut(this.videoDownloadURL)},_publishToInstagram:function _publishToInstagram(){Helpers.GlobalEventTracker.iosShortcutEvent("download.instagram"),this._runShortcut(this.videoDownloadURL+"?publishToInstagram")},_runShortcut:function _runShortcut(e){var t=this._getShortcutURL()+e;this._browserIsSafari()?window.open(t):window.location.href=t},_browserIsSafari:function _browserIsSafari(){return Helpers.App.isIOSSafari()&&!window.navigator.userAgent.match(/FxiOS/i)},_browserIsFirefox:function _browserIsSafari(){return Helpers.App.isIOSSafari()&&window.navigator.userAgent.match(/FxiOS/i)},_playVideo:function _playVideo(){
this.$videoWrapper.removeClass(this.PAUSE_CLASS),this.$video.get(0).play()},_pauseVideo:function _pauseVideo(){this.$videoWrapper.addClass(this.PAUSE_CLASS),this.$video.get(0).pause()},_removeVideoURLParams:function _removeVideoURLParams(){this.videoDownloadURL&&(this.videoDownloadURL=this.videoDownloadURL.split("?")[0])},_bindEvents:function _bindEvents(){var e=this;e.$videoPlayButton.on("click",function(){e._playVideo()}),e.$video.on("click",function(){e._pauseVideo()}),e.$video.on("ended",,e.$video.on("loadstart",function(){e.$videoWrapper.show()}),e.$downloadButton.on("click",function(){e._downloadVideo()}),e.$instagramButton.on("click",function(){e._publishToInstagram()})}}}),Class(UI,"ShortcutInstruction5").inherits(Widget)({html:'        <div>            <p class="title">That\'s It!</p>            <p class="message">                Look for any video in your Downloads Page and tap the "Download" button.            </p>            <button class="button primary">Done</button>        </div>    ',prototype:{$primaryButton:null,init:function(e){Widget.prototype.init.call(this,e),this.$primaryButton=this.element.find(".primary"),this.bindEvents()},bindEvents:function(){var e=this;e.$primaryButton.on("click",function(){e.dispatch("finish")})}}}),Class(UI,"ShortcutInstruction1").inherits(Widget)({html:'        <div>            <p class="title">1. You Need the Shortcuts App!</p>            <p class="message">                With the Apple Shotcuts app, you can download Placeit videos to your phone!                <b>It\u2019s 100% safe & free.</b>            </p>            <button class="button primary">Get the FREE Apple Shortcuts App</button>            <button class="secondary btn btn-link">I already have it</button>        </div>    ',prototype:{$primaryButton:null,$secondaryButton:null,init:function(e){Widget.prototype.init.call(this,e),this.$primaryButton=this.element.find(".primary"),this.$secondaryButton=this.element.find(".secondary"),this.bindEvents(),Helpers.GlobalEventTracker.iosShortcutEvent("openInstructions")},bindEvents:function(){var e=this;e.$primaryButton.on("click",function(){e.dispatch("goNext",{nextStep:2}),window.open("https://itunes.apple.com/app/shortcuts/id915249334")}),e.$secondaryButton.on("click",function(){e.dispatch("goNext",{nextStep:3})})}}}),Class(UI,"ShortcutFlow").inherits(Widget)({html:'    <div class="modal shortcut-flow fade" tabindex="-1" role="dialog" aria-labelledby="" aria-hidden="true">    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">        <span aria-hidden="true">\xd7</span>    </button>      <div class="modal-dialog">        <div class="modal-content">          <div class="modal-body">          </div>        </div>      </div>    </div>',prototype:{$modalBody:null,$modalContent:null,$closeBtn:null,$modalFooter:null,currentStepInstance:null,alertMessages:{alert:"Something went wrong, please try again.",warning:"Shortcut stopped, if you need to restart the process please try downloading again."},init:function init(e){Widget.prototype.init.call(this,e);var t=this;this.$modalBody=this.element.find(".modal-body"),this.$modalContent=this.element.find(".modal-content"),this.$modalFooter=this.element.find(".modal-footer"),this.notification=new UI.Notification({}),this.element.on("hide.bs.modal",function(){t.notification.close()})},getNextStep:function getNextStep(e){return new this.steps[e]({videoDownloadURL:this.videoDownloadURL,videoPreviewURL:this.videoPreviewURL})},showNextStep:function showNextStep(e){var i=this;i.currentStepInstance&&(i.currentStepInstance.unbind("goNext"),i.currentStepInstance.unbind("finish"),i.currentStepInstance.destroy()),i.currentStepInstance=e,i.appendChild(i.currentStepInstance).render(i.$modalBody),i.currentStepInstance.bind("goNext",function(e){var t=e.data.nextStep;t>i.steps.length||i.showNextStep(i.getNextStep(t-1))}),i.currentStepInstance.bind("finish",function(){i.deactivate()})},userHasCompletedTheFlow:function userHasCompletedTheFlow(){return Helpers.App.getIOSVideoDownloadInstructionsCookie()},activate:function activate(){this.element.modal("show"),this.$modalFooter.addClass("hidden"),Widget.prototype.activate.call(this);var e=0;this.userHasCompletedTheFlow()&&(e=this.steps.length-1),this.showNextStep(this.getNextStep(e)),this._showErrorAlert()},deactivate:function deactivate(){this.element.modal("hide"),Widget.prototype.deactivate.call(this)},_removeErrorURLParams:function _removeErrorURLParams(){var e=Helpers.App.removeParams(["videoDownloadURL","videoPreviewURL","errorDomain","errorMessage"],window.location.href);window.history.pushState(window.history.state,"",e)},_showErrorAlert:function _showErrorAlert(){if(Helpers.App.getUrlParam("videoDownloadURL")&&Helpers.App.getUrlParam("videoPreviewURL")){var e=Helpers.App.getUrlParam("errorMessage");this._trackErrorEvent(e);var t=e?"alert":"warning";this.notification[t](this.alertMessages[t]).render($("body"),!0);var i=this.notification.element;i.css({top:"35px"}),this.$modalContent.css({"margin-top":0,top:i.offset().top+i.outerHeight()}),this._removeErrorURLParams()}},_trackErrorEvent:function _trackErrorEvent(e){var t=e?"unexpected":"manual";Helpers.GlobalEventTracker.iosShortcutEvent("error."+t,e)}}}),Class(UI,"ShortcutInstruction4").inherits(Widget)({html:'        <div>            <div class="illustration" style="background: url(/assets/shortcut/step-2.svg)"></div>            <span class="illustration-subtitle">STEP 2 OF 2</span>            <button class="button primary">I Have the Shortcut</button>            <button class="secondary btn btn-link">I don\'t have the shortcut</button>        </div>    ',prototype:{$primaryButton:null,$secondaryButton:null,init:function(e){Widget.prototype.init.call(this,e),this.$primaryButton=this.element.find(".primary"),this.$secondaryButton=this.element.find(".secondary"),this.bindEvents()},bindEvents:function(){var e=this;e.$primaryButton.on("click",function(){Helpers.App.setIOSVideoDownloadInstructionsCookie(),e.dispatch("goNext",{nextStep:5})}),e.$secondaryButton.on("click",function(){window.open("https://www.icloud.com/shortcuts/afa2c3877c6a4d9eb3e860bec818dfe0")})}}}),Class(UI,"ShortcutInstruction2").inherits(Widget)({html:'        <div>            <div class="illustration" style="background: url(/assets/shortcut/step-1.svg)"></div>            <span class="illustration-subtitle">STEP 1 OF 2</span>            <button class="button primary">I Have the Shortcuts App</button>            <button class="secondary btn btn-link">I don\'t have the app</button>        </div>    ',prototype:{$primaryButton:null,$secondaryButton:null,init:function(e){Widget.prototype.init.call(this,e),this.$primaryButton=this.element.find(".primary"),this.$secondaryButton=this.element.find(".secondary"),this.bindEvents()},bindEvents:function(){var e=this;e.$primaryButton.on("click",,e.$secondaryButton.on("click",function(){window.open("https://itunes.apple.com/app/shortcuts/id915249334")})}}}),Class(UI,"ShortcutInstruction3").inherits(Widget)({html:'        <div>            <p class="title">2. Get the Placeit Shortcut</p>            <p class="message">                This shortcut initiates the download from the Apple Shortcuts App! This is the last step            </p>            <button class="button primary">Get the FREE Placeit Shortcut</button>            <button class="secondary btn btn-link">I already have it</button>        </div>    ',prototype:{$primaryButton:null,$secondaryButton:null,init:function(e){Widget.prototype.init.call(this,e),this.$primaryButton=this.element.find(".primary"),this.$secondaryButton=this.element.find(".secondary"),this.bindEvents()},bindEvents:function(){var e=this;e.$primaryButton.on("click",function(){e.dispatch("goNext",{nextStep:4}),window.open("https://www.icloud.com/shortcuts/afa2c3877c6a4d9eb3e860bec818dfe0")}),e.$secondaryButton.on("click",function(){Helpers.App.setIOSVideoDownloadInstructionsCookie(),e.dispatch("goNext",{nextStep:5})})}}}),Class(UI,"KeyframeVideoPresenter")({$video:null,videoEl:null,keytime:null,_pausedByUser:null,prototype:{init:function init(e,t){this.$video=e,this.videoEl=e.get(0),this.keytime=this.videoEl.currentTime=t,this._pausedByUser=!1,this._bindEvents()},_bindEvents:function _bindEvents(){this.$video.on("ended",bind(this)).on("loadeddata",bind(this))},play:function play(){this._pausedByUser||(this.videoEl.currentTime=0);var e=this.videoEl.play();e&&e.then(function(){})["catch"](function(){})},pause:isPlaying:function isPlaying(){return 0<this.videoEl.currentTime&&!this.videoEl.paused&&!this.videoEl.ended&&2<this.videoEl.readyState},setKeytime:function setKeytime(e){this.keytime=e}}}),Class(UI,"SubscriptionPlanChangeModal").inherits(Widget).includes(Helpers.SubscriptionHelper,Translator)({html:'    <div class="modal subscription-plan-change-modal" tabindex="-1" role="dialog" aria-labelledby="downloadOverlayLabel" aria-hidden="true">      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">          <span aria-hidden="true">\xd7</span>      </button>      <div class="modal-dialog">        <div class="modal-content">          <div class="modal-body">            <div class="plans-switch">              <h1><%= t("Change your plan") %></h1>              <p class="subtitle"><%= t("Our Plans include unlimited downloads on mockups, designs, logos, and videos.") %></p>              <ul class="plan-list">                <li class="disabled" data-plan="monthly"><p><%= t(\'Monthly <br> <span id="cp-monthly-price"></span>\') %></p></li>                <li class="disabled" data-plan="annual"><p><%= t(\'Yearly <br> <span id="cp-annual-price"></span><br><span>You save <span id="cp-annual-save"></span>%!</span>\') %></p></li>              </ul>              <button class="button primary change_plan btn-block"><%= t("Change Plan") %></button>              <p class="selected-plan-billing-info"></p>              <p class="coupon-info"><%= t("Coupons are non-transferable, any existing coupons will be cancelled after changing to a new plan.") %></p>            </div>            <div class="plans-confirmation">              <p class="confirmation-text"><%= t(\'You&apos;re about to switch to an <br><strong><span class="plan-label"></span> Subscription Plan</strong>, Continue?\') %></p>              <button type="button" class="button secondary change-plan-cancel" data-dismiss="modal"><%= t("Cancel") %></button>              <button type="button" class="button primary confirm-change-plan"><%= t("Yes, Continue") %></button>            </div>          </div>        </div>      </div>    </div>',BILLING_INFO:{monthly:I18nUtils.t("We will charge you the new plan price at the end of your current billing cycle."),annualLabel:I18nUtils.t("Annual"),monthlyLabel:I18nUtils.t("Monthly")},prototype:{selectedPlan:null,currentPlans:{annual:Registry.Plans.PLAN_ANNUAL,monthly:Registry.Plans.PLAN_MONTHLY},userCurrentPlan:null,$selectPlanButton:null,$plansContainer:null,$confirmationContainer:null,$planInfo:null,$planLabel:null,$confirmPlanChange:null,$changePlanCancel:null,$close:null,init:function init(e){Widget.prototype.init.call(this,e),this.element.find('li[data-plan="monthly"]').attr("data-plan",this.currentPlans.monthly),this.element.find('li[data-plan="annual"]').attr("data-plan",this.currentPlans.annual),this.$selectPlanButton=this.element.find("button.change_plan"),this.$planInfo=this.element.find(".selected-plan-billing-info"),this.$planOptions=this.element.find("li"),this.$plansContainer=this.element.find(".plans-switch"),this.$changePlanBtn=this.element.find(".change_plan"),this.$confirmationContainer=this.element.find(".plans-confirmation"),this.$planLabel=this.element.find(".plan-label"),this.$confirmPlanChange=this.element.find(".confirm-change-plan"),this.$changePlanCancel=this.element.find(".change-plan-cancel"),this.$close=this.element.find(".close"),this._setupPlanPrices(),this._startPlanOptions(),this._bindEvents()},_bindEvents:function _bindEvents(){var e=this;this.$planOptions.on("click",,this.$changePlanBtn.on("click",,this.$confirmPlanChange.on("click",function(){Helpers.GlobalEventTracker.cancelSubscriptionSwitch("switched",{new_plan:e.selectedPlan}),e.dispatch("select:plan",{selectedPlan:e.selectedPlan})})},attachHideEvent:function attachHideEvent(){var e=this;this.element.on("hide.bs.modal",},removeHideEvent:function removeHideEvent(){this.element.off("hide.bs.modal")},setLoading:function setLoading(){var e=this;e.$confirmPlanChange.addClass("disabled"),e.$changePlanCancel.addClass("disabled"),this.element.css({"pointer-events":"none"})},_startPlanOptions:function _startPlanOptions(){this.userCurrentPlan!=this.currentPlans.annual&&this.userCurrentPlan!=this.currentPlans.monthly?(this._allowSelect(this.currentPlans.annual),this._allowSelect(this.currentPlans.monthly),this._selectPlan(this.currentPlans.annual)):this.userCurrentPlan===this.currentPlans.monthly?(this._allowSelect(this.currentPlans.annual),this._selectPlan(this.currentPlans.annual)):this.userCurrentPlan===this.currentPlans.annual&&(this._allowSelect(this.currentPlans.monthly),this._selectPlan(this.currentPlans.monthly))},_allowSelect:function _allowSelect(e){this.element.find('[data-plan="{planCode}"]'.replace("{planCode}",e)).removeClass("disabled")},_selectPlan:function _selectPlan(e){var t=this.element.find('[data-plan="{planCode}"]'.replace("{planCode}",e));!0!==t.hasClass("disabled")&&e!==this.selectedPlan&&(this._deselecPlans(),t.addClass("selected"),this._setPlanInfoText(e),this.selectedPlan=e)},_setPlanInfoText:function _setPlanInfoText(e){var t="",i=this.constructor.BILLING_INFO.annualLabel;e==this.currentPlans.monthly&&(i=this.constructor.BILLING_INFO.monthlyLabel),!0===this.isAnnualPlan&&(t=this.constructor.BILLING_INFO.monthly),this.$planLabel.text(i),this.$planInfo.text(t)},_deselecPlans:function _deselecPlans(){this.selectedPlan=null,this.$planOptions.removeClass("selected")},getSelectedPlan:function getSelectedPlan(){return this.selectedPlan},_setupPlanPrices:function _setupPlanPrices(){var n,e,t,i,s,r;i=(n=this).element.find("#cp-monthly-price"),s=n.element.find("#cp-annual-price"),r=n.element.find("#cp-annual-save"),t=Helpers.Price.monthlyPlan(),e=Helpers.Price.annualPlan(),t.price.then(function(e){var t;t=n._formatPrice(e),i.text(t)}),e.price.then(function(e){var t,i;t=n._formatPrice(e),i=parseInt(n._calculateAnnualSavePercent(e)),s.text(t),r.text(i)})},show:function show(){this.$plansContainer.show(),this.$confirmationContainer.hide(),this._startPlanOptions(),this.removeHideEvent(),this.attachHideEvent(),this.element.modal("show")},showConfirmation:function showConfirmation(){this.show(),this.$plansContainer.hide(),this.$confirmationContainer.show()},close:function close(){this.$confirmPlanChange.removeClass("disabled"),this.$changePlanCancel.removeClass("disabled"),this.element.css({"pointer-events":""}),this._deselecPlans(),this.removeHideEvent(),this.element.modal("hide")}}}),Class(UI,"GoAnnualModal").inherits(Widget).includes(Helpers.SubscriptionHelper,Translator)({elementClass:"go-annual-modal",modalViews:{"default":'            <svg class="subscription-icon" xmlns="http://www.w3.org/2000/svg" width="29" height="26" fill="none"><g filter="url(#filter0_d)"><path fill="url(#paint0_linear)" d="M5.3 21.3c0-.5.5-1 1-1h16.4c.5 0 1 .5 1 1v1.4c0 .5-.5 1-1 1H6.3a1 1 0 01-1-1v-1.4z"/><path fill="url(#paint1_linear)" d="M26.5 6.6a1.2 1.2 0 00-1.3 0l-5.7 3.8-4-7.8a1.1 1.1 0 00-1-.6 1.1 1.1 0 00-1 .6l-4 7.8-5.7-3.8a1.2 1.2 0 00-1.3 0l-.4.5v.7l2.2 10c0 .2.2.5.4.6.2.2.5.3.7.3h18.2c.2 0 .5-.1.7-.3.2-.1.3-.4.4-.6l2.3-10a1.1 1.1 0 00-.5-1.2z"/></g><defs><linearGradient id="paint0_linear" x1="5.3" x2="23.7" y1="22" y2="22" gradientUnits="userSpaceOnUse"><stop stop-color="#501AA8"/><stop offset="1" stop-color="#870DE8"/></linearGradient><linearGradient id="paint1_linear" x1="2" x2="27" y1="10.3" y2="10.3" gradientUnits="userSpaceOnUse"><stop stop-color="#501AA8"/><stop offset="1" stop-color="#870DE8"/></linearGradient><filter id="filter0_d" width="29" height="25.7" x="0" y="0" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/><feOffset/><feGaussianBlur stdDeviation="1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow"/><feBlend in="SourceGraphic" in2="effect1_dropShadow" result="shape"/></filter></defs></svg>            <span class="modal-title">Annual Subscription</span>            <span class="savings-title">Save <span class="savings"></span>%!</span>            <span class="pricing">                <span class="annual-price"></span>/Year (Just <span class="annual-price-month"></span>/Month)                <span class="discount-info">                    <span>$76.24</span>/Year (Just <span class="">$6.35</span>/Month)</span>                </span>            </span>            <span class="message">You are currently paying <span class="monthly-price"></span>/Month</span>            <button id="goAnnual">Go Annual!</button>            <span class="footnote">Coupons are non-transferable, any existing coupons will be cancelled after changing to a new plan.</span>        ',appStoreNative:'            <h3 class="title">Open the App Store</h3>            <p>Your Unlimited Subscription is linked to an Apple ID, you can upgrade your plan in the App Store.</p>            <div class="btn-container">                <button type="button" class="cancel-btn button light">Cancel</button>                <a class="button primary" href="https://apps.apple.com/account/subscriptions" target="_blank">Yes, open</a>            </div>        ',appStoreForeing:'            <h3 class="title">Go to the App Store</h3>            <p>Your Unlimited Subscription is linked to an Apple ID, you can upgrade your plan in the App Store on your Apple device. </p>            <div class="btn-container">                <button type="button" class="cancel-btn button primary">OK</button>            </div>        ',googlePlay:'            <h3 class="title">Open the Play Store</h3>            <p>Your Unlimited Subscription is linked to an Google account, you can upgrade your plan in the Play Store.</p>            <div class="btn-container">                <button type="button" class="cancel-btn button light">Cancel</button>                <a class="button primary" href="https://play.google.com/store/account/subscriptions" target="_blank">Yes, open</a>            </div>        '},html:'        <div class="modal" tabindex="-1" role="dialog" aria-hidden="true">        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">            <span aria-hidden="true">\xd7</span>        </button>        <div class="modal-dialog">            <div class="modal-content">            <div class="modal-body"></div>            </div>        </div>        </div>    ',prototype:{$button:null,init:function init(e){e.modalView=e.modalView||"default",Widget.prototype.init.call(this,e),this.$modalBody=this.element.find(".modal-body"),this._setModalView(),this.$button=this.element.find("#goAnnual"),this.$cancelBtn=this.element.find(".cancel-btn"),this._setPrices(),this._bindEvents()},show:function show(){this.element.modal("show")},hide:function hide(){this.element.modal("hide")},_setModalView:function _setModalView(){this.$modalBody.append(this.constructor.modalViews[this.modalView]),this.element.addClass(this.modalView)},_setPrices:function _setPrices(){var n=this,e=Helpers.Price.annualPlan(),t=Helpers.Price.monthlyPlan();e.price.then(function(e){var i={savings:parseInt(n._calculateAnnualSavePercent(e)),"annual-price":n._formatPrice(e),"annual-price-month":n._formatPrice(e/12)};Object.keys(i).forEach(function(e){var t=i[e];n.element.find("."+e).text(t)})}),t.price.then(function(e){var t=n._formatPrice(e);n.element.find(".monthly-price").text(t)})},_bindEvents:function _bindEvents(){var e=this;e.$button.click(,e.$cancelBtn.click(function(){e.hide()}),e.element.bind("hidden.bs.modal",function(){e._unbindEvents(),e.destroy()})},_unbindEvents:function _unbindEvents(){this.$button.unbind(),this.element.unbind()}}}),Class(UI,"SmartDropdown").inherits(Widget).includes(BubblingSupport)({html:'<div class="smart-dropdown">        <label class="title"> </label>        <div class="btn-input-container is-button">            <input type="button" class="btn-input">            <span class="sp-dd p-icon down-arrow"></span>            <span style="display:none" class="glyphicon glyphicon-remove-circle"></span>        </div>        <div class="menu"></div>    </div>',elementClass:"smart-dropdown",prototype:{noResultsHtml:'<div style="display:none;" class="no-results">                <div class="title"></div>                <div class="message"></div>            </div',initialValue:null,isMobile:!1,$menu:null,$list:null,options:null,_selectedItems:null,placeholder:"Search",modalName:"dropdownModal",propertyToSearch:"name",childProperty:"children",_previousSearchValue:null,isMultiSelection:!0,noResultsMessage:"No matches",noResultsTitle:"Try another keyword or browse our options below",list:null,simpleList:!1,init:function init(e){this.options=[],this._selectedItems=[],Widget.prototype.init.call(this,e),this.$menu=this.element.find(".menu"),this.$btnInputContainer=this.element.find(".btn-input-container"),this.$btnInput=this.$btnInputContainer.find(".btn-input"),this.$downArrowIcon=this.$btnInputContainer.find(".down-arrow"),this.$removeIcon=this.$btnInputContainer.find(".glyphicon-remove-circle"),this.changeInputToButton(),this.isMobile=Helpers.App.isMobile(),!0===Array.isArray(this.options)&&0<this.options.length&&this.setUp(e)},setUp:function setUp(e){$.extend(this,e),this.list=new UI.SmartList({labelProperty:this.labelProperty,childProperty:this.childProperty,propertyToSearch:this.propertyToSearch,name:"list",isMultiSelection:this.isMultiSelection,cssClass:"list",simpleList:this.simpleList}),this.$list=this.list.getElement();var t={value:"root"};t[this.childProperty]=this.options,this._data=this.list.parseToArray(t),this.list.setUp({},this._data),this.appendChild(this.list),this.renderList(this.list),this._bindings(),this.dispatch("ready")},rebuildList:renderList:function renderList(e){var t=this.$menu;!0===this.isMobile&&(this.modal=this.buildModal(),this.$mobileInput=this.modal.element.find(".btn-input"),this.appendChild(this.modal).render($(document.body)),this.$mobileInput.attr("placeholder",this.placeholder),this.$removeIconMobile=this.modal.element.find(".glyphicon-remove-circle"),this.$foldIcon=e.getElement().find(".icon.fold"),t=this.modal.getElement().find(".list-container")),e.render(t),this.$noResults=$(this.noResultsHtml).insertBefore(this.list.getElement()),this.setNoResultsMessage(this.noResultsMessage).setNoResultsTitle(this.noResultsTitle)},setNoResultsMessage:function setNoResultsMessage(e){return this.$noResults.find(".message").html(e),this},setNoResultsTitle:function etNoResultsTitle(e){return this.$noResults.find(".title").html(e),this},changeInputToButton:function changeInputToButton(){if(!0===this.isMobile)return this;this.$btnInput.attr("type","button"),this.$btnInputContainer.removeClass("text").addClass("is-button"),this.showDownArrowIcon(),this.setPlaceholder()},setPlaceholder:function setPlaceholder(){var e=this.placeholder;if(!0!==this.isMultiSelection){var t=this.getSelected()[0],i=t&&t.name;"string"==typeof i&&0<i.length&&(e=i)}this.$btnInput.val(e).attr("placeholder",e)},changeButtonToInput:function changeButtonToInput(){return this.$btnInput.attr("type","text"),this.$btnInputContainer.removeClass("is-button").hasClass("text"),this.$btnInput.val(""),this.hideDownArrowIcon(),this},buildModal:function buildModal(){var e,t;return e='<div class="input-container search-container">                <input type="text" class="btn-input">                <span style="display:none" class="glyphicon glyphicon-remove-circle"></span>            </div>',(t=new UI.SimpleModal({name:this.modalName,cssClass:"modal-smart-list"})).setHeaderContent(e),t.setContent('<div class="list-container"></div>'),t},_bindings:function _bindings(){var i=this;i.$removeIcon.bind("click",function(e){i.cleanSearch(e)}),$(document.body).bind("click",function(e){var t=i.element;i.isMobile&&(t=i.modal.getElement().find(".modal-content")),!0!==$.contains(t[0],e.target)&&(i.changeInputToButton(),i.hideList())}),this.$btnInput.bind("focus",function(){i.changeButtonToInput(),i.showList()}),this.$btnInputContainer.bind("click",function(){i.$btnInput.focus()}),this.list.bind("change",function(e){e.stopPropagation(),i.setPlaceholder(),i._selectedItems=i.list.getSelectedItems(),i.dispatch("change",{selected:i.getSelected(),itemClicked:e.data.item,originalDispatcher:i})}),!0!==this.isMobile?(i.$btnInput.bind("keyup",function(e){i.keyUpEventHandler(e)}),$(window).resize():this._mobileBindings()},_mobileBindings:function(){var t=this;t.$mobileInput.bind("keyup",function(e){t.keyUpEventHandler(e)}),t.$removeIconMobile.bind("click",function(e){t.cleanSearch(e),t.$list.removeClass("results"),t.rebuildList(t._data)}),t.$mobileInput.bind("focus",,this.modal.element.on("shown.bs.modal",},selectItemUsedKeyboard:function selectItemUsedKeyboard(e){this.isMobile||(40===e.keyCode?this.keyDownHandler():38===e.keyCode?this.keyUpHandler():13===e.keyCode&&this.$list.find(".pre-selected").find(".item").trigger("click"))},keyDownHandler:function keyDownHandler(){var e,t=0;return!1===this.$list.hasClass("results")||(e=this.$list.find(".pre-selected")).index()+1<this.$list.children().length==!1||(0===this.$list.find(".pre-selected").length?this.$list.find("li:first-child").addClass("pre-selected"):(e=e.removeClass("pre-selected").next().addClass("pre-selected"),(t=this.$menu.height()-(e.position().top+e.height()))<0&&this.$menu.scrollTop(this.$menu.scrollTop()+Math.abs(t)))),this},keyUpHandler:function keyUpHandler(){var e,t,i=this,n=0;e=i.$list.find(".pre-selected");var s=i.$btnInput.val();if(i.$btnInput.val("").val(s),!0===e.is(":first-child"))return this;for(e.removeClass("pre-selected").prev().addClass("pre-selected"),t=0;t<i.$list.find(".pre-selected").index();t++)n+=$(i.$list.children()[t]).height();return i.$menu.scrollTop(n),this},keyUpEventHandler:function keyUpEventHandler(e){var t=$(e.target).val();this._previousSearchValue===t?this.selectItemUsedKeyboard(e):(this._previousSearchValue=t,this.search(t))},search:function search(t){var e,i=this,n=i._selectedItems.map(function(e){return e.id});if(t&&0<t.length?this.showRemoveIcon():this.hideRemoveIcon(),e=this._search(t),t&&0<t.length&&0<e.length)return this.$noResults.hide(),this.rebuildList(e,!0),this.$list.addClass("results"),void this.list.getItems().forEach(function(e){e.setContent(i.highlighted(e.content,t)),!1!==n.includes(e.id)&&e.activate()});t&&0<t.length?this.$noResults.show():this.$noResults.hide(),this.$list.removeClass("results"),this.rebuildList(this._data),i.list.getItems().forEach(function(e){!1!==n.includes(e.id)&&e.activate()})},_search:function _search(t){var i=this.propertyToSearch;return this._data.filter(function(e){return!1===e.hasChildren}).sort(.filter(function(e){return"string"==typeof e.record[i]&&-1<e.record[i].toLowerCase().indexOf(t.toLowerCase())})},highlighted:function highlighted(e,t){var i=e.substr(e.toLowerCase().indexOf(t.toLowerCase()),t.length);return e=e.replace(i,"<strong>"+i+"</strong>")},cleanSearch:function cleanSearch(){return this.isMobile?this.$mobileInput.val("").focus():this.$btnInput.val("").focus(),this.$noResults.hide(),this.hideRemoveIcon(),this},isListVisible:function isListVisible(){return this[this.modalName]?!0===this[this.modalName].element.is(":visible"):!0===this.$menu.is(":visible")},showList:function showList(){return!0===this.isListVisible()||(this[this.modalName]?this[this.modalName].activate():(this.setDropDownHeight(),this.$menu.show()),this.dispatch("activate")),this},hideList:function hideList(){return!1===this.isListVisible()||(this[this.modalName]?this[this.modalName].deactivate():this.$menu.hide(),this.dispatch("deactivate")),this},toggle:getSelected:function getSelected(){return this.list?this.list.getSelected():[]},setDropDownHeight:function setDropDownHeight(){var e=this;e.windowHeight=window.innerHeight;var t=window.innerHeight-e.$menu.offset().top-10;e.$menu.css("max-height",t+"px"),e.$menu.css("overflow-y","auto")},showDownArrowIcon:function showDownArrowIcon(){return this.isMobile||this.$downArrowIcon.show(),this},hideDownArrowIcon:function hideDownArrowIcon(){return this.isMobile||this.$downArrowIcon.hide(),this},hideRemoveIcon:function hideRemoveIcon(){var e=this.$removeIcon;return this.isMobile&&(e=this.$removeIconMobile),e.hide(),this},showRemoveIcon:function showRemoveIcon(){var e=this.$removeIcon;return this.isMobile&&(e=this.$removeIconMobile),e.show(),this},selectItem:function selectItem(e,t){return this.list?(this.list.selectItem(e,t),this._selectedItems=this.list.getSelectedItems(),this):this.list}}}),Class(UI,"SmartList").inherits(Widget).includes(BubblingSupport)({html:'<ul class="list"></<ul>',prototype:{_data:null,record:null,propertyToSearch:"name",childProperty:"children",labelProperty:"name",isMultiSelection:!0,simpleList:!1,init:function init(e){this._data=[],Widget.prototype.init.call(this,e),"object"==typeof this.record&&null!==this.record&&(this._data=this.parseToArray(this.record)),this.setUp(e,this._data),this._bindings()},setUp:function setUp(e,t){$.extend(this,e),!0===Array.isArray(t)&&(this._data=t),0<this._data.length&&this.buildList(this._data)},_bindings:function _bindings(){var i=this;this.bind("click",function(e){var t=e.data&&e.data.originalDispatcher;if(i.toggleChildList(t),!0===t.noSelectable)return this;!0!==this.isMultiSelection?i.toggleItem(t):i._multiSelectionHandler(t),i.dispatch("change",{selected:i.getSelected(),item:t,originalDispatcher:i})})},_multiSelectionHandler:function _multiSelectionHandler(e){var t=this,n=t._getParentItem(e),s=e.id;!0!==e.isActive||!0!==e.record.deselectSiblings?(!1===e.isActive&&(!0===e.record.deselectSiblings&&t.deselectSiblings(n),!0===e.record.deselectChildren&&t.deselectChildren(e),!1===e.isActive&&!0===e.record.deselectAll&&t.deselectAll(e)),t.getSelectedItems().forEach(function(e){var t=e.record&&e.record.deselectSiblings,i=n&&n.id;e.id===s&&!1===e.isActive||!0===t&&e.parentId===i&&e.deactivate()}),t.toggleItem(e)):e.deactivate()},buildList:function buildList(e,n){var s=this;this.removeItems(),e.forEach(function(e,t){if("root"!==e.record.value){var i=s.appendChild(s.buildItem(e,t));s.renderItem(i,n)}})},removeItems:function removeItems(){this.getItems().forEach(function(e){e.destroy()}),this.element.find("li").remove()},buildItem:function buildItem(e,t){var i;return i="item"+e.id,new UI.SmartListItem({name:i,id:e.id,index:t,parentId:e.parentId,content:e.record[this.labelProperty],record:e.record,hasChildren:e.hasChildren,noSelectable:e.record.noSelectable,isActive:e.record.isActive,foldIcon:this.foldIcon||this._getIcon("closeDark"),unfoldIcon:this.unfoldIcon||this._getIcon("openDark")})},renderItem:function renderItem(e,t){var i,n,s,r=t||this.simpleList;if(n=e.id,s=e.parentId,this.element,(i=$("<li></li>")).attr("id",e.name).attr("data-id",n),e.render(i),!0!==r)if((0<this.element.find("#parent"+s).length?this.element.find("#parent"+s):this.element).append(i),!0===e.hasChildren){var a=$('<ul class="hidden children"></ul>').attr("id","parent"+n).attr("data-parent-id",n);i.append(a)}else i.addClass("child");else this.element.append(i)},toggleItem:function toggleItem(e){e.toggle(),!0!==this.isMultiSelection&&this.deselectItems(e)},deselectItems:function deselectItems(t){
this.getSelectedItems().forEach(},selectItem:function selectItem(t,i){var e=this.getItems().find(;return void 0===e?this:(e.activate(),!0===this.isMultiSelection||this.deselectItems(e),this)},toggleChildList:function toggleChildList(e){if(!0!==e.hasChildren)return this;var t=this.element.find("#parent"+e.id);return 0===t.length||(!0===t.is(":visible")?this.hideChildList(e):this.showChildList(e)),this},showChildList:function showChildList(e){return this.element.find("#parent"+e.id).removeClass("hidden"),e.showUnfoldIcon(),this},hideChildList:function hideChildList(e){return this.element.find("#parent"+e.id).addClass("hidden"),e.showFoldIcon(),this},getSelected:getSelectedItems:function getSelectedItems(){return this.getItems().filter(},getItems:function getItems(){return this.children.filter(function(e){return"SmartListItem"===e.constructor.className})},parseToArray:function parseToArray(e){var r=this.childProperty,a=[],o=function o(e,t){var i=a.length,n=Array.isArray(e[r]),s=null;0<t&&(s=t),a.push({record:e,id:i,parentId:s,hasChildren:n}),!1!==n&&e[r].forEach(function(e){o(e,i)})};return o(e,null),a.unshift(),a},getData:function getData(){return this._data},deselectChildren:function deselectChildren(e){var n=this,t=this.element.find("#parent"+e.id);return 0===t.length||t.find("li").toArray().forEach(function(e){var t=parseInt(e.dataset.id),i=n.getSelectedItems().find(;i!==undefined&&i.deactivate()}),this},deselectSiblings:function deselectSiblings(e){return void 0===e||this.deselectChildren(e),this},_getParentItem:function _getParentItem(t){return this.getItems().find(},deselectAll:function deselectAll(){return this.getSelectedItems().forEach(function(e){e.deactivate()}),this},_getIcon:function _getIcon(e){return"closeDark"===e?'<svg width="8px" height="11px" viewBox="0 0 8 11" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">                    <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">                        <g id="closed-dark" transform="translate(-617.000000, -123.000000)" fill="#4A4A4A" fill-rule="nonzero">                            <g id="Group-11" transform="translate(606.000000, 85.000000)">                                <g id="Dropdown-Menu-Copy-2">                                    <polygon id="triangle-closed" transform="translate(15.000000, 43.500000) rotate(-90.000000) translate(-15.000000, -43.500000) " points="15 47 10 40 20 40"></polygon>                                </g>                            </g>                        </g>                    </g>                </svg>':"openDark"===e?'<svg width="11px" height="8px" viewBox="0 0 11 8" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">                            <g id="open-dark" transform="translate(-615.000000, -151.000000)" fill="#4A4A4A" fill-rule="nonzero">                                <g id="Group-11" transform="translate(606.000000, 85.000000)">                                    <g id="Dropdown-Menu-Copy-2">                                        <polygon id="Triangle" points="14.5 73.5 9.5 66.5 19.5 66.5"></polygon>                                    </g>                                </g>                            </g>                        </g>                    </svg>':void 0}}}),Class(UI,"SmartListItem").inherits(Widget).includes(BubblingSupport,NodeSupport)({html:'<div class="item">            <div class="icon fold"></div>            <div class="content"></div>            <i class="glyphicon glyphicon-ok icon-ok check-mark hidden"></i>    </div>',prototype:{isActive:!1,record:null,noSelectable:!1,hasChildren:!1,foldIcon:"",unfoldIcon:"",init:function init(e){this.record={},Widget.prototype.init.call(this,e),this.$icon=this.element.find(".icon"),this.$content=this.element.find(".content"),this.setContent(this.content),this.$checkIcon=this.element.find(".check-mark"),!0===this.hasChildren&&this.showFoldIcon(),!0===this.isActive&&this.activate(),this._bindings()},_bindings:function _bindings(){var e=this;this.$icon.bind("click",function(){!0===e.noSelectable&&e.dispatch("iconClick")}),this.element.bind("click",},toggle:function toggle(){!0===this.isActive?this.deactivate():this.activate()},setContent:function setContent(e){this.$content.html(e)},activate:function activate(){return!0===this.noSelectable||(Widget.prototype.activate.call(this),this.isActive=!0,this.$checkIcon.removeClass("hidden")),this},deactivate:function deactivate(){return!0===this.noSelectable||(Widget.prototype.deactivate.call(this),this.isActive=!1,this.$checkIcon.addClass("hidden")),this},showFoldIcon:function showFoldIcon(){this.$icon.html(this.foldIcon)},showUnfoldIcon:}),Class(UI,"PricingButton").inherits(Widget).includes(Translator,BubblingSupport,Helpers.SubscriptionHelper)({TEXT_PRICING:"Pricing",TEXT_UPGRADE_ANNUAL:"Go Annual!",prototype:{$button:null,canUpgradeToAnnual:null,init:function init(e){Widget.prototype.init.call(this,e),this.$anchor=this.element.find("a"),this._bindEvents()},update:function update(e){e&&(Helpers.SubscriptionHelper.shouldDisableSwitchPlans()?this.hide():(this.canUpgradeToAnnual=e.can_upgrade_to_annual,!0===this.canUpgradeToAnnual?this._setUpgradeToAnnualText():this.hide()))},_bindEvents:function _bindEvents(){var e,t=this;t.element.click(function(){!1===Helpers.App.isMobile()&&(e=Helpers.App.getUserType(),Helpers.GlobalEventTracker.track("NavBar:PricingCTA:Clicked",{session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id,fired_on_login:!0,user_type_name:e.name,user_type_id:e.id})),t.dispatch("click",{originalDispatcher:t}),!0===t.canUpgradeToAnnual&&Helpers.GlobalEventTracker.track("GoAnnual:CTA:Clicked",{session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id})})},_setUpgradeToAnnualText:function _setUpgradeToAnnualText(){var n=this;Helpers.Price.annualPlan().price.then(function(e){var t=parseInt(n._calculateAnnualSavePercent(e)),i=n.constructor.TEXT_UPGRADE_ANNUAL.replace("{{annualDiscountPercentage}}",t);n.$anchor.text(i)})}}}),Class(UI,"CelebrationModal").inherits(Widget).includes(Helpers.SubscriptionHelper,Translator,SaleSupport)({elementClass:"celebration-modal",html:'    <div class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">          <span aria-hidden="true">\xd7</span>      </button>      <div class="modal-dialog">        <div class="modal-content">          <div class="modal-body">            <svg class="subscription-icon" xmlns="http://www.w3.org/2000/svg" width="29" height="26" fill="none"><g filter="url(#filter0_d)"><path fill="url(#paint0_linear)" d="M5.3 21.3c0-.5.5-1 1-1h16.4c.5 0 1 .5 1 1v1.4c0 .5-.5 1-1 1H6.3a1 1 0 01-1-1v-1.4z"/><path fill="url(#paint1_linear)" d="M26.5 6.6a1.2 1.2 0 00-1.3 0l-5.7 3.8-4-7.8a1.1 1.1 0 00-1-.6 1.1 1.1 0 00-1 .6l-4 7.8-5.7-3.8a1.2 1.2 0 00-1.3 0l-.4.5v.7l2.2 10c0 .2.2.5.4.6.2.2.5.3.7.3h18.2c.2 0 .5-.1.7-.3.2-.1.3-.4.4-.6l2.3-10a1.1 1.1 0 00-.5-1.2z"/></g><defs><linearGradient id="paint0_linear" x1="5.3" x2="23.7" y1="22" y2="22" gradientUnits="userSpaceOnUse"><stop stop-color="#501AA8"/><stop offset="1" stop-color="#870DE8"/></linearGradient><linearGradient id="paint1_linear" x1="2" x2="27" y1="10.3" y2="10.3" gradientUnits="userSpaceOnUse"><stop stop-color="#501AA8"/><stop offset="1" stop-color="#870DE8"/></linearGradient><filter id="filter0_d" width="29" height="25.7" x="0" y="0" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/><feOffset/><feGaussianBlur stdDeviation="1"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow"/><feBlend in="SourceGraphic" in2="effect1_dropShadow" result="shape"/></filter></defs></svg>            <span class="title"></span>            <span class="subtitle"></span>            <img src="/assets/subscription-celebration.png"/>            <div class="footnote"></div>            <svg width="102" height="13" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M47.7 11h-.6l1.4-7.2h.8l-.4 2-.2.9.8-.5c.2-.2.5-.2.8-.2.4 0 .8.1 1 .4.3.3.4.7.4 1.3a3.9 3.9 0 01-.8 2.4l-.8.7a2 2 0 01-1 .2c-.2 0-.5 0-.7-.2l-.4-.5-.3.6zM50 6.5c-.2 0-.4 0-.7.2-.3.1-.5.3-.7.6L48 9.7l.5.5.5.2c.2 0 .4 0 .7-.2.2-.2.4-.3.5-.6.2-.2.4-.5.4-.8.2-.3.2-.6.2-1s0-.7-.2-.9a.7.7 0 00-.7-.3zM52 13h-.3a1 1 0 01-.3-.1l.2-.6h.4c.2 0 .4 0 .6-.2.3-.2.4-.5.6-.8l.2-.4-.8-4.8h.7l.4 2.7a15.2 15.2 0 01.1 1.4 2346.2 2346.2 0 01.8-1.4L56 6.1h.7L54 11.3l-.4.7a2.7 2.7 0 01-1 .9l-.6.1z" fill="#8A8A8A"/><path fill-rule="evenodd" clip-rule="evenodd" d="M10 0h3l-1.8 8.8v.5c0 .2 0 .3.3.3l.7-.2-.2 1.2c-.4.2-1 .4-1.5.4-.8 0-1.4-.4-1.4-1.3v-.9l1.6-7.3h-1L10 0zM7.7 6.5a4 4 0 001.4-3c0-1-.3-1.5-.8-2-.6-.5-1.6-.7-3-.7H1L.7 2.3h1L0 10.8h2.2l.7-3.3h1.4c1.5 0 2.6-.3 3.4-1zM6.6 2.7c.2.2.3.5.3.9 0 .7-.3 1.5-.8 2-.4.3-1 .5-2 .5H3L4 2.3h1.2c.7 0 1.2.1 1.5.4zm14.2.5l-1.1.3c-.4-.3-1-.5-1.7-.5a5.1 5.1 0 00-5 5.2c0 1.7.9 2.8 2.4 2.8 1 0 1.8-.4 2.2-1 .1.6.7 1 1.3 1 .5 0 1-.2 1.5-.5l.2-1.2-.7.2c-.2 0-.3 0-.3-.3v-.4l1.2-5.6zm-3 4.5l.7-3.2a1 1 0 00-.5-.2c-1.8 0-3 2.3-3 3.9 0 .9.4 1.4 1 1.4s1-.2 1.2-.6c.3-.3.5-.8.6-1.3zm10.5-2v-.5c0-1.3-1-2.2-2.5-2.2-2.7 0-4.6 2.5-4.6 5.1 0 2 1.4 2.9 3.2 2.9 1 0 2-.4 2.7-.8l.3-1.5c-.8.5-1.8.9-2.6.9-1 0-1.5-.5-1.5-1.5 0-.8.3-1.9.7-2.6.4-.6 1-1.1 1.6-1.1.6 0 .8.4.8 1v.3h2zm7.4-.6C35.7 6.7 34.2 8 32 8l-1.4-.1V8c0 1 .7 1.6 1.6 1.6.8 0 1.9-.4 2.6-.8l-.3 1.4c-.7.5-1.8.8-2.8.8-1.8 0-3.1-1-3.1-2.9 0-2.6 2-5 4.7-5 1.5 0 2.5.6 2.5 2zM33 4.4c.6 0 .8.3.8.7 0 1-.7 1.6-2.2 1.6h-.8C31 5.5 32 4.4 33 4.4z" fill="#8A8A8A"/><path d="M39.7.9c0 .4-.4.7-.8.7-.3 0-.5-.2-.5-.5 0-.4.4-.7.8-.7.2 0 .5.2.5.5zM37.2 3.2h1.9l-1.3 6.3-.1.5c0 .2.1.3.4.3.2 0 .4 0 .6-.2l-.1.6c-.2.2-.6.3-.8.3-.7 0-1-.4-1-1v-.5l1.3-5.7h-1l.1-.6zM42.2 3.2H44l-.2.6H42l-1 4.9v.7c0 .6.3.9.9.9.4 0 1-.2 1.3-.4l-.1.7c-.4.2-1 .4-1.4.4-1 0-1.7-.5-1.7-1.5l.1-.8 1-4.9h-1l.1-.6h1l.5-2 1-.5-.5 2.5zM64.7 3.6c-.2-.2-.8 0-1.5.2a5.5 5.5 0 00-2.5 4.4h-.1c-.4-.7-.5-1.4-.2-2.5l-.2-.2-.5.7a3.4 3.4 0 001.2 4.5 3 3 0 004.3-1.2c1-1.9 0-5.6-.5-6z" fill="#8A8A8A"/><path fill-rule="evenodd" clip-rule="evenodd" d="M67.3 7.9c0-2 1.3-3.4 3.2-3.4 1.6 0 2.6 1 2.9 2.7v.4c0 .4-.2.6-.7.6h-4a2 2 0 001.8 1.9 2 2 0 001.6-.7l.4-.2c.3 0 .5.2.5.5 0 .1 0 .3-.2.5a3 3 0 01-2.3 1c-1.9 0-3.2-1.4-3.2-3.3zm4.8-.6c0-1-.6-1.7-1.6-1.7s-1.8.7-1.9 1.7h3.5z" fill="#8A8A8A"/><path d="M77.4 4.5c-.9 0-1.7.5-2 1.2v-.4c0-.7-.6-.7-.7-.7-.3 0-.6.2-.6.7v5.1c0 .7.5.8.7.8 0 0 .6 0 .6-.8V7.7c0-1.2.7-2 1.6-2 1 0 1.4.6 1.4 1.8v3c0 .6.5.7.6.7.2 0 .7 0 .7-.8V7.1c0-1.2-.6-2.6-2.3-2.6zM85.3 4.8c-.3 0-.5.2-.6.5L83 9.7l-1.7-4.4c-.1-.3-.3-.5-.6-.5-.4 0-.7.3-.7.6l.1.4 2 4.7c.2.6.6.7.9.7.2 0 .6-.1.8-.7l2-4.8v-.3c0-.4-.2-.6-.5-.6z" fill="#8A8A8A"/><path fill-rule="evenodd" clip-rule="evenodd" d="M87 5.2c.5-.4 1.3-.7 2-.7 1.6 0 2.6 1 2.6 2.5v3.4c0 .7-.5.7-.6.7-.3 0-.6-.2-.6-.7v-.3c-.4.7-1.1 1-2 1-1 0-2.2-.5-2.2-1.9 0-1.9 2.1-2.1 4.2-2.1v-.2c0-.8-.5-1.3-1.5-1.3-.4 0-.9.1-1.3.5l-.4.1c-.3 0-.5-.2-.5-.5 0-.2.1-.4.3-.5zM90.4 8H90c-1.1 0-2.6.1-2.6 1.2 0 .9 1 1 1.2 1 1 0 1.7-.8 1.7-1.9V8z" fill="#8A8A8A"/><path d="M94.9 6c.5 0 .6-.5.6-.6 0-.3-.2-.5-.6-.5h-1.1V3.7c0-.5-.4-.7-.6-.7-.1 0-.7 0-.7.7v5.5c0 1.3.6 2 1.8 2 .3 0 .6 0 .8-.2.2-.1.3-.3.3-.5 0-.3-.2-.5-.5-.5h-.2a1 1 0 01-.2 0c-.5 0-.7-.2-.7-1V6h1z" fill="#8A8A8A"/><path fill-rule="evenodd" clip-rule="evenodd" d="M95.5 7.8c0-1.9 1.3-3.3 3.2-3.3 2 0 3.3 1.4 3.3 3.3 0 2-1.4 3.4-3.3 3.4-.9 0-1.7-.4-2.3-1-.6-.6-1-1.4-1-2.4zm1.2 0c0 1.1.7 2.3 2 2.3 1 0 2-.7 2-2.3 0-1.5-1-2.2-2-2.2s-2 .7-2 2.2z" fill="#8A8A8A"/></svg>          </div>        </div>      </div>    </div>',TEXTS:{monthly:{title:"Congratulations!",subtitle:"You are now a subscriber!",footnote:'<span><b>Save <span class="savings"></span>%</b> with our annual subscription! <button id="goAnnual" class="btn">Go Annual!</button></span>'},annual:{title:"Congratulations!",subtitle:"You are now an annual subscriber!",footnote:'<span class="small">If you want to switch back to your monthly<br> subscription go to your account page.</span>'}},prototype:{$button:null,init:function init(e){Widget.prototype.init.call(this,e),this._setTexts(),this.$button=this.element.find("#goAnnual"),this._bindEvents()},show:function show(){this.element.modal("show")},hide:_setTexts:function _setTexts(){var e=this.isAnnual?"annual":"monthly",i=this.constructor.TEXTS[e],n=this.element;Object.keys(i).forEach(function(e){var t=i[e];n.find("."+e).html(t)}),this._setSavings()},_setSavings:function _setSavings(){var i=this;Helpers.Price.annualPlan().price.then(function(e){var t=parseInt(i._calculateAnnualSavePercent(e));i.element.find(".savings").text(t)})},_bindEvents:function _bindEvents(){var e=this;e.$button.click(function(){e.dispatch("goAnnualClick"),Helpers.GlobalEventTracker.track("GoAnnual:CTA:Clicked",{session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id}),e.hide()}),e.element.bind("hidden.bs.modal",function(){e._unbindEvents(),e.destroy()})},_unbindEvents:function _unbindEvents(){this.$button.unbind(),this.element.unbind()}}}),Class(UI,"EnvatoUsername").inherits(Widget).includes(Translator)({USERTYPE_LABELS:{free_account:"<span>Free account</span>",unlimited:'<svg><use xlink:href="#subscription_icon"></use></svg><span class="subscribed">Unlimited</span>'},prototype:{init:function init(e){Widget.prototype.init.call(this,e),this.$username=this.element.find(".username"),this.$usertypeLabel=this.element.find(".usertype-label")},update:function update(e,t){var i=this.constructor.USERTYPE_LABELS;this.$username.text(e),t?this.$usertypeLabel.html(i.unlimited):this.$usertypeLabel.html(i.free_account)}}}),Class(UI,"UserTypeBanner").inherits(Widget).includes(BubblingSupport)({prototype:{$button:null,bannerId:null,_wasEventShownSent:!1,init:function init(e){Widget.prototype.init.call(this,e),this._bindEvents();var t=Helpers.App.getUserType();Helpers.SubscriptionHelper.shouldDisableSwitchPlans()?this.element.hide():!0!==window.is_i18n_exp&&(t.bannerUrl?(this.element.attr("src",t.bannerUrl),this.element.attr("data-banner-id",t.bannerId),this.element.show()):this.element.hide())},update:function update(){if(!0!==window.is_i18n_exp){var t=this,i=function i(e){Helpers.SubscriptionHelper.shouldDisableSwitchPlans()?t.element.hide():(e.banner?(t.element.attr("src",e.banner.url),t.element.attr("data-banner-id",e.banner.id),t.element.show()):t.element.hide(),t.dispatch("updated",e))};$.ajax({method:"GET",url:"/api/v1/get_user_type_banner",dataType:"json"}).done(i).fail(}},sendShownEvent:function sendShownEvent(){if(!this._wasEventShownSent&&!1!==this.isVisible()){var e=Helpers.App.getUserType(),t=this.element.data("banner-id");Helpers.GlobalEventTracker.track("DropdownBanner:Shown",{user_type_name:e.name,user_type_id:e.id,banner_id:t}),this._wasEventShownSent=!0}},_bindEvents:function _bindEvents(){var t=this;t.element.click(function(){var e=Helpers.App.getUserType();Helpers.GlobalEventTracker.track("DropdownBanner:Clicked",{user_type_name:e.name,user_type_id:e.id,banner_id:t.element.data("banner-id")}),t.dispatch("click",{originalDispatcher:t})})}}}),Class(UI,"GlobalNotification").inherits(Widget)({html:'<div class="global-notification hide"><div class="close-cross"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMCAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC44NCAxMC4xNyA1LjE2IDYuNDljLS4xODEtLjE4Mi0uMjEyLS40NDQtLjA3LS41ODZsLjY0NC0uNjQ0Yy4xNDItLjE0Mi40MDQtLjExLjU4NS4wN0wxMCA5LjAxMWwzLjY4LTMuNjhjLjE4Mi0uMTgyLjQ0NC0uMjEzLjU4Ni0uMDcxbC42NDQuNjQ0Yy4xNDIuMTQyLjExMS40MDQtLjA3LjU4NWwtMy42OCAzLjY4MSAzLjY4IDMuNjgyYy4xODIuMTguMjEzLjQ0My4wNy41ODVsLS42NDMuNjQ0Yy0uMTQyLjE0Mi0uNDA0LjExLS41ODUtLjA3TDEwIDExLjMyOWwtMy42ODIgMy42ODJjLS4xOC4xOC0uNDQzLjIxMi0uNTg1LjA3bC0uNjQ0LS42NDRjLS4xNDItLjE0Mi0uMTEtLjQwNC4wNy0uNTg1bDMuNjgyLTMuNjgyeiIgZmlsbD0iI0VGRUZFRiIvPgo8L3N2Zz4K"/></div><div class="illustration"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDQiIGhlaWdodD0iNDQiIHZpZXdCb3g9IjAgMCA0NCA0NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik00Ljk5IDIyLjU0NmMyLjk3IDQuODgzIDIuODUzIDcuODE0IDIuMjgzIDEyLjYzOC0uNTcxIDQuODI0LjM5IDYuOTMzIDIuMjgzIDguMTAzIDIuNDUxIDEuNTE3IDYuMDU2LjY3NSA4LjA4Ni0zLjEyMSAyLjAyOS0zLjc5NyAzLjE3LTcuMDc2IDkuMzItNS4zMzggNi4xNTEgMS43MzggMTEuMDkzLjA0IDEzLjQ0LTQuMjA3IDIuMzQ1LTQuMjQ3IDIuNTQ4LTExLjc4NS0yLjQwNS0xNC45NjItNC45NS0zLjE3Ni05LjM4NC0uMjU2LTE2LjkzLTYuNDMxQzEzLjUyIDMuMDUzIDcuMTc1IDQuMzQ4IDQuMTk5IDcuNjgzYy0yLjU3MiAyLjg4OC0zLjU1NCA3LjcyLjc5IDE0Ljg2M3oiIGZpbGw9IiM4OTg5Q0EiLz4KICAgIDxwYXRoIGQ9Ik0xNS40NCAxMi43VjkuNjkyaDQuNTcxVjEyLjciIGZpbGw9IiNDQjlFNzgiLz4KICAgIDxwYXRoIGQ9Ik0xNS40NCAxMi43VjkuNjkyaDMuMDQ4VjEyLjciIGZpbGw9IiNDQjlFNzgiLz4KICAgIDxwYXRoIGQ9Ik0yNy42MyA0MS4yNTZjMS42ODMgMCAzLjA0Ny0xLjM0NiAzLjA0Ny0zLjAwNnYtLjczNmMwLS41MDMtLjEyOC0uOTk4LS4zNzEtMS40NGwtOC43Ny0xNS44NTlWMTIuN2gtNy42MTJ2Ny41MTVsLTguNzcgMTUuODZhMi45OCAyLjk4IDAgMCAwLS4zNzIgMS40Mzl2LjczNmMwIDEuNjYgMS4zNjUgMy4wMDYgMy4wNDggMy4wMDZoMTkuOHoiIGZpbGw9IiNEOUQ3RDgiLz4KICAgIDxwYXRoIGQ9Ik0yOC4zOTIgMzguMjV2LS43MzZjMC0uNTAzLS4xMjgtLjk5OC0uMzcyLTEuNDRsLTguNzctMTUuODU5VjEyLjdoLTUuMzI2djcuNTE1bC04Ljc3IDE1Ljg2YTIuOTggMi45OCAwIDAgMC0uMzcyIDEuNDM5di43MzZjMCAxLjY2IDEuMzY1IDMuMDA2IDMuMDQ4IDMuMDA2aDE3LjUxNWMxLjY4MyAwIDMuMDQ3LTEuMzQ2IDMuMDQ3LTMuMDA2eiIgZmlsbD0iI0Q5RDdEOCIvPgogICAgPHBhdGggZD0iTTMwLjY3NyAzOC4yNXYtLjczNmMwLS41MDMtLjEyOC0uOTk4LS4zNzEtMS40NGwtNS40NDYtOS44NDdoLTEuMTdjLS40MDQgMC0uNzkyLjE1OC0xLjA3Ny40NGwtLjYzMS42MjJjLS4yODYuMjgyLS42NzQuNDQtMS4wNzguNDRoLS4yNmMtLjQwNSAwLS43OTItLjE1OC0xLjA3OC0uNDRsLS42My0uNjIyYTEuNTM3IDEuNTM3IDAgMCAwLTEuMDc5LS40NGgtLjI2Yy0uNDA1IDAtLjc5My4xNTgtMS4wNzguNDRsLS42MzEuNjIyYy0uMjg3LjI4Mi0uNjc0LjQ0LTEuMDc4LjQ0aC0uMjYxYy0uNDA0IDAtLjc5Mi0uMTU4LTEuMDc4LS40NGwtLjYzLS42MjJhMS41MzcgMS41MzcgMCAwIDAtMS4wNzktLjQ0SDEwLjZsLTUuNDQ2IDkuODQ4YTIuOTggMi45OCAwIDAgMC0uMzcyIDEuNDM5di43MzZjMCAxLjY2IDEuMzY1IDMuMDA2IDMuMDQ4IDMuMDA2aDE5LjhjMS42ODMgMCAzLjA0Ny0xLjM0NiAzLjA0Ny0zLjAwNnoiIGZpbGw9IiM4RTU5Q0YiLz4KICAgIDxwYXRoIGQ9Ik0yOS4xNTQgMjEuNzE4djYuNDA1Yy0yLjY2Mi45MjktNC41NzIgMy40MjYtNC41NzIgNi4zNyAwIDMuNzM2IDMuMDcgNi43NjMgNi44NTcgNi43NjMgMy43ODcgMCA2Ljg1Ny0zLjAyNyA2Ljg1Ny02Ljc2MyAwLTIuOTQ0LTEuOTEtNS40NDEtNC41NzEtNi4zN3YtNi40MDUiIGZpbGw9IiNEOUQ3RDgiLz4KICAgIDxwYXRoIGQ9Ik0yNC41ODIgMzQuNDkzYzAgMy40OCAyLjY2OCA2LjM0NCA2LjA5NSA2LjcxOSAzLjQyOC0uMzc1IDYuMDk1LTMuMjM4IDYuMDk1LTYuNzIgMC0yLjk0My0xLjkxLTUuNDQtNC41NzEtNi4zN3YtNi40MDRoLTMuMDQ3djYuNDA1Yy0yLjY2Mi45MjktNC41NzIgMy40MjYtNC41NzIgNi4zN3oiIGZpbGw9IiNEOUQ3RDgiLz4KICAgIDxwYXRoIGQ9Ik0zOC4yOTYgMzQuNDkzYzAtLjI1NS0uMDItLjUwNS0uMDQ4LS43NTJoLS44NDVjLS40MDQgMC0uNzkyLjE1OS0xLjA3OC40NGwtLjYzLjYyM2MtLjI4Ni4yODItLjY3NC40NC0xLjA3OC40NGgtLjI2Yy0uNDA1IDAtLjc5Mi0uMTU4LTEuMDc4LS40NGwtLjYzMS0uNjIzYTEuNTM3IDEuNTM3IDAgMCAwLTEuMDc4LS40NGgtLjI2MWMtLjQwNCAwLS43OTIuMTU5LTEuMDc3LjQ0bC0uNjMxLjYyM2MtLjI4Ny4yODItLjY3NC40NC0xLjA3OC40NGgtLjI2MWMtLjQwNCAwLS43OTItLjE1OC0xLjA3OC0uNDRsLS42My0uNjIzYTEuNTM3IDEuNTM3IDAgMCAwLTEuMDc5LS40NGgtLjg0NWE2LjU4OCA2LjU4OCAwIDAgMC0uMDQ3Ljc1MmMwIDMuNzM1IDMuMDY5IDYuNzYzIDYuODU2IDYuNzYzczYuODU3LTMuMDI4IDYuODU3LTYuNzYzeiIgZmlsbD0iIzM0OTJERSIvPgogICAgPHBhdGggZD0iTTE2Ljk2NCAzNS4yNDRjMCAuODMtLjY4MiAxLjUwMy0xLjUyMyAxLjUwM2ExLjUxMyAxLjUxMyAwIDAgMS0xLjUyNC0xLjUwM2MwLS44My42ODItMS41MDMgMS41MjQtMS41MDMuODQxIDAgMS41MjMuNjczIDEuNTIzIDEuNTAzek0yMi4yOTggMzIuMjM4YzAgLjgzLS42ODIgMS41MDMtMS41MjQgMS41MDNhMS41MTQgMS41MTQgMCAwIDEtMS41MjQtMS41MDNjMC0uODMuNjgzLTEuNTAzIDEuNTI0LTEuNTAzLjg0MiAwIDEuNTI0LjY3MyAxLjUyNCAxLjUwM3pNMTAuODcgMzYuNzQ3YzAgLjgzLS42ODIgMS41MDMtMS41MjQgMS41MDNhMS41MTQgMS41MTQgMCAwIDEtMS41MjMtMS41MDNjMC0uODMuNjgyLTEuNTAzIDEuNTIzLTEuNTAzLjg0MiAwIDEuNTI0LjY3MyAxLjUyNCAxLjUwM3oiIGZpbGw9IiNCNzkyRTQiLz4KICAgIDxwYXRoIGQ9Ik0yNy42MyAzLjAwNmMwIDEuNjYtMS4zNjQgMy4wMDYtMy4wNDcgMy4wMDZzLTMuMDQ4LTEuMzQ2LTMuMDQ4LTMuMDA2QzIxLjUzNSAxLjM0NiAyMi45IDAgMjQuNTgzIDBzMy4wNDcgMS4zNDYgMy4wNDcgMy4wMDZ6IiBmaWxsPSIjOEU1OUNGIi8+CiAgICA8cGF0aCBkPSJNMTUuNDQgMi44OGMwIC44My0uNjgyIDEuNTA0LTEuNTI0IDEuNTA0YTEuNTE0IDEuNTE0IDAgMCAxLTEuNTIzLTEuNTAzYzAtLjgzLjY4Mi0xLjUwMyAxLjUyMy0xLjUwMy44NDIgMCAxLjUyNC42NzMgMS41MjQgMS41MDN6IiBmaWxsPSIjQjc5MkU0Ii8+CiAgICA8cGF0aCBkPSJNMTIuMzkzIDkuNjQ0YzAgMS4yNDUtMS4wMjMgMi4yNTUtMi4yODUgMi4yNTUtMS4yNjIgMC0yLjI4NS0xLjAxLTIuMjg1LTIuMjU1IDAtMS4yNDUgMS4wMjMtMi4yNTQgMi4yODUtMi4yNTQgMS4yNjIgMCAyLjI4NSAxLjAxIDIuMjg1IDIuMjU0eiIgZmlsbD0iIzAyN0FEQSIvPgogICAgPHBhdGggZD0iTTI2Ljg2OCAyMC45NjZoOS4xNDJ2MS41MDNoLTkuMTQydi0xLjUwM3oiIGZpbGw9IiMwMDAiLz4KICAgIDxwYXRoIGQ9Ik0yNi44NjggMjAuOTY2aDkuMTQydjEuNTAzaC05LjE0MnYtMS41MDN6IiBmaWxsPSIjQ0I5RTc4Ii8+CiAgICA8cGF0aCBkPSJNMjYuODY4IDIwLjk2Nmg2Ljg1N3YxLjUwM2gtNi44NTd2LTEuNTAzek0yOS4xNTQgMjMuOTcyaDQuNTd2MS41MDNoLTQuNTd2LTEuNTAzeiIgZmlsbD0iI0NCOUU3OCIvPgogICAgPHBhdGggZD0iTTI5LjE1NCAyMy45NzJIMzIuMnYxLjUwM2gtMy4wNDd2LTEuNTAzek0xMS42MzEgMTQuOTU0aDEyLjE5djEuNTAzSDExLjYzdi0xLjUwM3oiIGZpbGw9IiNDQjlFNzgiLz4KICAgIDxwYXRoIGQ9Ik0xMS42MzEgMTQuOTU0aDcuNjE5djEuNTAzSDExLjYzdi0xLjUwM3oiIGZpbGw9IiNDQjlFNzgiLz4KICAgIDxwYXRoIGQ9Ik0yMS41MzUgMzguMjVjMC0uNDE2LjMzNi0uNzUyLjc1MS0uNzUyaC4wMjFhLjc1MS43NTEgMCAxIDEgMCAxLjUwM2gtLjAyYS43NTEuNzUxIDAgMCAxLS43NTItLjc1MnpNMjAuMDEyIDM2Ljc0N2MwLS40MTUuMzM2LS43NTIuNzUxLS43NTJoLjAyMWEuNzUxLjc1MSAwIDEgMSAwIDEuNTAzaC0uMDJhLjc1MS43NTEgMCAwIDEtLjc1Mi0uNzUxek0xOC40ODggMzguMjVjMC0uNDE2LjMzNy0uNzUyLjc1Mi0uNzUyaC4wMmEuNzUxLjc1MSAwIDEgMSAwIDEuNTAzaC0uMDJhLjc1MS43NTEgMCAwIDEtLjc1Mi0uNzUyek0xMi4zOTMgMzEuNDg3YzAtLjQxNS4zMzctLjc1Mi43NTItLjc1MmguMDJhLjc1MS43NTEgMCAxIDEgMCAxLjUwM2gtLjAyYS43NTEuNzUxIDAgMCAxLS43NTItLjc1MXoiIGZpbGw9IiNCNzkyRTQiLz4KPC9zdmc+Cg=="/> </div><div class="content"><div class="title"></div><div class="text"></div><div class="global-notification-buttons"><button class="button-secondary hide"></button><button class="button-primary hide"></button></div></div></div>',prototype:{title:"We have chosen you as a beta tester!",text:"We are working on improving your experience. We are testing <b>{{experimentName}}</b> and we would like for your to try it!",buttons:{close:null,primary:null,secondary:null},init:function init(e){var t=this;Widget.prototype.init.call(t,e),t.experiment||(t.experiment="",console.warn("GlobalNotification: experiment is not defined.")),t.element.find(".title").text(t.title),t.element.find(".text").html(t.text.replace("{{experimentName}}",t.experiment)),t._setButtons(),t._bindEvents()},_setButtons:function _setButtons(){var e=this;e.buttons.close=e.element.find(".close-cross"),e.primary&&(e.buttons.primary=e.element.find(".button-primary"),e.buttons.primary.html(e.primary).removeClass("hide")),e.secondary&&(e.buttons.secondary=e.element.find(".button-secondary"),e.buttons.secondary.html(e.secondary).removeClass("hide"))},_bindEvents:function _bindEvents(){var e=this;e.buttons.close.on("click",Utils.bindFn(this)(this.hide)),e.buttons.primary&&e.buttons.primary.on("click",function(){e.dispatch("primary")}),e.buttons.secondary&&e.buttons.secondary.on("click",function(){e.dispatch("secondary")})},_unbindEvents:function _unbindEvents(){this.buttons.close.off("click"),this.buttons.primary&&this.buttons.primary.off("click"),this.buttons.secondary&&this.buttons.secondary.off("click")},_isHidden:function _isHidden(){return this.element.get(0).classList.contains("hide")},show:function show(e){var t=this;!1!==t._isHidden()&&(t.element.removeClass("hide"),Utils.promisifyEventBuilder(t.element)("transitionend").then(Utils.bindFn(t)(t._show)).then(Utils.bindFn(t)(t._autoclose(e))))},_show:function _show(){this.dispatch("show")},_autoclose:function _autoclose(e){var t=this;return function(){if(e)return P.delay(e).then(Utils.bindFn(t)(t.hide))}},hide:function hide(){var e=this;!0!==e._isHidden()&&(e.element.addClass("hide"),Utils.promisifyEventBuilder(e.element)("transitionend").then(function(){e.dispatch("hide")}))},destroy:function destroy(){this._unbindEvents(),Widget.prototype.destroy.call(this)}}}),Class(UI,"BaseNotification").inherits(Widget)({html:'<div class="base-notification hide"><div class="arrow"></div><div class="close-cross"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMCAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNOC44NCAxMC4xNyA1LjE2IDYuNDljLS4xODEtLjE4Mi0uMjEyLS40NDQtLjA3LS41ODZsLjY0NC0uNjQ0Yy4xNDItLjE0Mi40MDQtLjExLjU4NS4wN0wxMCA5LjAxMWwzLjY4LTMuNjhjLjE4Mi0uMTgyLjQ0NC0uMjEzLjU4Ni0uMDcxbC42NDQuNjQ0Yy4xNDIuMTQyLjExMS40MDQtLjA3LjU4NWwtMy42OCAzLjY4MSAzLjY4IDMuNjgyYy4xODIuMTguMjEzLjQ0My4wNy41ODVsLS42NDMuNjQ0Yy0uMTQyLjE0Mi0uNDA0LjExLS41ODUtLjA3TDEwIDExLjMyOWwtMy42ODIgMy42ODJjLS4xOC4xOC0uNDQzLjIxMi0uNTg1LjA3bC0uNjQ0LS42NDRjLS4xNDItLjE0Mi0uMTEtLjQwNC4wNy0uNTg1bDMuNjgyLTMuNjgyeiIgZmlsbD0iI0VGRUZFRiIvPgo8L3N2Zz4K"/></div><div class="body"></div></div>',TYPE:{fixed:"fixed",absolute:"absolute"},prototype:{windowWidth:0,translate:0,margin:0,follow:!0,topColor:"transparent",bottomColor:"transparent",arrowElement:null,buttons:null,mobileBreakpointLg:414,resizeTimeHandler:null,_resizeHandlerReference:null,_type:"absolute",_initialTargetOffset:null,init:function init(e){Widget.prototype.init.call(this,e),!(this.buttons={close:null})!==this._validateConfiguration(e)&&(this.windowWidth=this._getWindowWidth(),this.arrowElement=this.element.find("div.arrow"),this.buttons.close=this.element.find(".close-cross"),this._type=this.constructor.TYPE.absolute,e.cssClass&&this.element.addClass(e.cssClass),this._setColors(),this._bindEvents(),this._setContents())},_getWindowWidth:function _getWindowWidth(){return window.innerWidth||document.documentElement.clientWidth||document.getElementsByTagName("body")[0].clientWidth},_validateConfiguration:function _validateConfiguration(e){return e?e.target?!!e.contents||(console.warn("BaseNotification: contents is not defined."),!1):(console.warn("BaseNotification: target is not defined."),!1):(console.warn("BaseNotification: configuration is missing."),!1)},_setCssVariable:function _setCssVariable(e,t){this.element.get(0).style.setProperty(e,t)},_setColors:function _setColors(){this._setCssVariable("--top-color",this.topColor),this._setCssVariable("--bottom-color",this.bottomColor),this.element.css("background","linear-gradient(to bottom, var(--top-color), var(--bottom-color))")},_bindEvents:function _bindEvents(){var e=this;e.bind("render",function(){e._setPosition()}),e.buttons.close.on("click",Utils.bindFn(e)(e.hide)),e._resizeHandlerReference=Utils.bindFn(e)(e._resizeHandler),window.addEventListener("resize",e._resizeHandlerReference),e._scrollHandlerReference=Utils.bindFn(e)(e._scrollHandler),window.addEventListener("scroll",e._scrollHandlerReference)},_unbindEvents:function _unbindEvents(){this.unbind("render"),this.buttons.close.off("click"),window.removeEventListener("resize",this._resizeHandlerReference)},_setContents:function _setContents(){this.element.find(".body").html(this.contents)},_resizeHandler:function _resizeHandler(){var e=this,t=e._getWindowWidth();e.windowWidth!==t&&(e.windowWidth=t,clearTimeout(e.resizeTimeHandler),e.resizeTimeHandler=setTimeout(Utils.bindFn(e)(e._setPosition),200))},_setNotificationFixed:function _setNotificationFixed(){var e=this;e._type=e.constructor.TYPE.fixed,e.getElement().css("position","fixed")},_setPosition:function _setPosition(){var e=this;e.placement=e.placement?e._capitalize(e.placement):"Top",e.element.addClass(e.placement.toLowerCase()),e._setArrowPosition(),e["_set"+e.placement+"Position"]()},_setArrowPosition:function _setArrowPosition(){var e=this._getTranslate();this._setCssVariable("--arrow-position","calc(50% - "+e+"px)")},_getTranslate:function _getTranslate(){if(isPlacementTopOrBottom="Top"===this.placement||"Bottom"===this.placement,!1===this.follow)return 0;var e=this._getWindowWidth();return isPlacementTopOrBottom&&e<=this.mobileBreakpointLg?-1*(this._getOffset().left+this.target.prop("offsetWidth")/2-e/2):this.translate},_capitalize:_getNewTopPosition:function _getNewTopPosition(){var e=this._getOffset();return{top:e.top-this.element.prop("offsetHeight")-this.margin+"px",left:e.left+this.target.prop("offsetWidth")/2+this.translate+"px",transform:"translateX(-50%)"}},_getNewRightPosition:function _getNewRightPosition(){var e=this._getOffset();return{top:e.top+this.target.prop("offsetHeight")/2+this.translate+"px",left:e.left+this.target.prop("offsetWidth")+this.margin+"px",transform:"translateY(-50%)"}},_getNewBottomPosition:function _getNewBottomPosition(){var e=this._getOffset();return{top:e.top+this.target.prop("offsetHeight")+this.margin+"px",left:e.left+this.target.prop("offsetWidth")/2+this.translate+"px",transform:"translateX(-50%)"}},_getNewLeftPosition:function _getNewLeftPosition(){var e=this._getOffset();return{top:e.top+this.target.prop("offsetHeight")/2+this.translate+"px",left:e.left-this.element.prop("offsetWidth")-this.margin+"px",transform:"translateY(-50%)"}},_setTopPosition:function _setTopPosition(){this.arrowElement.css("background","var(--bottom-color)"),this.element.css(this._getNewTopPosition())},_setRightPosition:function _setRightPosition(){this.arrowElement.css("background","linear-gradient(to bottom, var(--top-color), var(--bottom-color))"),this.element.css(this._getNewRightPosition())},_setBottomPosition:function _setBottomPosition(){this.arrowElement.css("background","var(--top-color)"),this.element.css(this._getNewBottomPosition())},_setLeftPosition:function _setLeftPosition(){this.arrowElement.css("background","linear-gradient(to bottom, var(--top-color), var(--bottom-color))"),this.element.css(this._getNewLeftPosition())},show:function show(){this.element.removeClass("hide"),this.dispatch("show")},hide:destroy:function destroy(){this._unbindEvents(),Widget.prototype.destroy.call(this)},_isNotificationPositionFixed:function _isNotificationPositionFixed(){var e=this.target.offset();return e.top!==this._initialTargetOffset.top||e.bottom!==this._initialTargetOffset.bottom},_scrollHandler:function _scrollHandler(){var e=this;!1===Boolean(e._initialTargetOffset)&&(e._initialTargetOffset=e.target.offset()),e._isNotificationPositionFixed()&&(e._setNotificationFixed(),e._setPosition(),window.removeEventListener("scroll",e._scrollHandlerReference))},_getOffset:function _getOffset(){var e=this.target.offset();return this._type===this.constructor.TYPE.fixed&&(e=this.target.position()),e}}}),Module(UI.BaseNotification,"Popover")({prototype:{_setButtons:function _setButtons(){!0===Boolean(this.primary)&&(this.buttons.primary=this.element.find(".button-primary"),this.buttons.primary.html(this.primary).removeClass("hide")),!0===Boolean(this.secondary)&&(this.buttons.secondary=this.element.find(".button-secondary"),this.buttons.secondary.html(this.secondary).removeClass("hide")),this._bindButtonsEvents()},_bindButtonsEvents:function _bindButtonsEvents(){var e=this;e.buttons.primary&&e.buttons.primary.on("click",function(){e.dispatch("primary")}),e.buttons.secondary&&e.buttons.secondary.on("click",function(){e.dispatch("secondary")})},_unbindButtonEvents:function _unbindButtonEvents(){this.buttons.primary&&this.buttons.primary.off("click"),this.buttons.secondary&&this.buttons.secondary.off("click")},destroy:function destroy(){this._unbindButtonEvents(),UI.BaseNotification.prototype.destroy.call(this)}}}),Class(UI,"TooltipNotification").inherits(UI.BaseNotification).includes(UI.BaseNotification.Popover)({prototype:{
tooltipNotificationTemplate:'<div class="illustration"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDQiIGhlaWdodD0iNDQiIHZpZXdCb3g9IjAgMCA0NCA0NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik00Ljk5IDIyLjU0NmMyLjk3IDQuODgzIDIuODUzIDcuODE0IDIuMjgzIDEyLjYzOC0uNTcxIDQuODI0LjM5IDYuOTMzIDIuMjgzIDguMTAzIDIuNDUxIDEuNTE3IDYuMDU2LjY3NSA4LjA4Ni0zLjEyMSAyLjAyOS0zLjc5NyAzLjE3LTcuMDc2IDkuMzItNS4zMzggNi4xNTEgMS43MzggMTEuMDkzLjA0IDEzLjQ0LTQuMjA3IDIuMzQ1LTQuMjQ3IDIuNTQ4LTExLjc4NS0yLjQwNS0xNC45NjItNC45NS0zLjE3Ni05LjM4NC0uMjU2LTE2LjkzLTYuNDMxQzEzLjUyIDMuMDUzIDcuMTc1IDQuMzQ4IDQuMTk5IDcuNjgzYy0yLjU3MiAyLjg4OC0zLjU1NCA3LjcyLjc5IDE0Ljg2M3oiIGZpbGw9IiM4OTg5Q0EiLz4KICAgIDxwYXRoIGQ9Ik0xNS40NCAxMi43VjkuNjkyaDQuNTcxVjEyLjciIGZpbGw9IiNDQjlFNzgiLz4KICAgIDxwYXRoIGQ9Ik0xNS40NCAxMi43VjkuNjkyaDMuMDQ4VjEyLjciIGZpbGw9IiNDQjlFNzgiLz4KICAgIDxwYXRoIGQ9Ik0yNy42MyA0MS4yNTZjMS42ODMgMCAzLjA0Ny0xLjM0NiAzLjA0Ny0zLjAwNnYtLjczNmMwLS41MDMtLjEyOC0uOTk4LS4zNzEtMS40NGwtOC43Ny0xNS44NTlWMTIuN2gtNy42MTJ2Ny41MTVsLTguNzcgMTUuODZhMi45OCAyLjk4IDAgMCAwLS4zNzIgMS40Mzl2LjczNmMwIDEuNjYgMS4zNjUgMy4wMDYgMy4wNDggMy4wMDZoMTkuOHoiIGZpbGw9IiNEOUQ3RDgiLz4KICAgIDxwYXRoIGQ9Ik0yOC4zOTIgMzguMjV2LS43MzZjMC0uNTAzLS4xMjgtLjk5OC0uMzcyLTEuNDRsLTguNzctMTUuODU5VjEyLjdoLTUuMzI2djcuNTE1bC04Ljc3IDE1Ljg2YTIuOTggMi45OCAwIDAgMC0uMzcyIDEuNDM5di43MzZjMCAxLjY2IDEuMzY1IDMuMDA2IDMuMDQ4IDMuMDA2aDE3LjUxNWMxLjY4MyAwIDMuMDQ3LTEuMzQ2IDMuMDQ3LTMuMDA2eiIgZmlsbD0iI0Q5RDdEOCIvPgogICAgPHBhdGggZD0iTTMwLjY3NyAzOC4yNXYtLjczNmMwLS41MDMtLjEyOC0uOTk4LS4zNzEtMS40NGwtNS40NDYtOS44NDdoLTEuMTdjLS40MDQgMC0uNzkyLjE1OC0xLjA3Ny40NGwtLjYzMS42MjJjLS4yODYuMjgyLS42NzQuNDQtMS4wNzguNDRoLS4yNmMtLjQwNSAwLS43OTItLjE1OC0xLjA3OC0uNDRsLS42My0uNjIyYTEuNTM3IDEuNTM3IDAgMCAwLTEuMDc5LS40NGgtLjI2Yy0uNDA1IDAtLjc5My4xNTgtMS4wNzguNDRsLS42MzEuNjIyYy0uMjg3LjI4Mi0uNjc0LjQ0LTEuMDc4LjQ0aC0uMjYxYy0uNDA0IDAtLjc5Mi0uMTU4LTEuMDc4LS40NGwtLjYzLS42MjJhMS41MzcgMS41MzcgMCAwIDAtMS4wNzktLjQ0SDEwLjZsLTUuNDQ2IDkuODQ4YTIuOTggMi45OCAwIDAgMC0uMzcyIDEuNDM5di43MzZjMCAxLjY2IDEuMzY1IDMuMDA2IDMuMDQ4IDMuMDA2aDE5LjhjMS42ODMgMCAzLjA0Ny0xLjM0NiAzLjA0Ny0zLjAwNnoiIGZpbGw9IiM4RTU5Q0YiLz4KICAgIDxwYXRoIGQ9Ik0yOS4xNTQgMjEuNzE4djYuNDA1Yy0yLjY2Mi45MjktNC41NzIgMy40MjYtNC41NzIgNi4zNyAwIDMuNzM2IDMuMDcgNi43NjMgNi44NTcgNi43NjMgMy43ODcgMCA2Ljg1Ny0zLjAyNyA2Ljg1Ny02Ljc2MyAwLTIuOTQ0LTEuOTEtNS40NDEtNC41NzEtNi4zN3YtNi40MDUiIGZpbGw9IiNEOUQ3RDgiLz4KICAgIDxwYXRoIGQ9Ik0yNC41ODIgMzQuNDkzYzAgMy40OCAyLjY2OCA2LjM0NCA2LjA5NSA2LjcxOSAzLjQyOC0uMzc1IDYuMDk1LTMuMjM4IDYuMDk1LTYuNzIgMC0yLjk0My0xLjkxLTUuNDQtNC41NzEtNi4zN3YtNi40MDRoLTMuMDQ3djYuNDA1Yy0yLjY2Mi45MjktNC41NzIgMy40MjYtNC41NzIgNi4zN3oiIGZpbGw9IiNEOUQ3RDgiLz4KICAgIDxwYXRoIGQ9Ik0zOC4yOTYgMzQuNDkzYzAtLjI1NS0uMDItLjUwNS0uMDQ4LS43NTJoLS44NDVjLS40MDQgMC0uNzkyLjE1OS0xLjA3OC40NGwtLjYzLjYyM2MtLjI4Ni4yODItLjY3NC40NC0xLjA3OC40NGgtLjI2Yy0uNDA1IDAtLjc5Mi0uMTU4LTEuMDc4LS40NGwtLjYzMS0uNjIzYTEuNTM3IDEuNTM3IDAgMCAwLTEuMDc4LS40NGgtLjI2MWMtLjQwNCAwLS43OTIuMTU5LTEuMDc3LjQ0bC0uNjMxLjYyM2MtLjI4Ny4yODItLjY3NC40NC0xLjA3OC40NGgtLjI2MWMtLjQwNCAwLS43OTItLjE1OC0xLjA3OC0uNDRsLS42My0uNjIzYTEuNTM3IDEuNTM3IDAgMCAwLTEuMDc5LS40NGgtLjg0NWE2LjU4OCA2LjU4OCAwIDAgMC0uMDQ3Ljc1MmMwIDMuNzM1IDMuMDY5IDYuNzYzIDYuODU2IDYuNzYzczYuODU3LTMuMDI4IDYuODU3LTYuNzYzeiIgZmlsbD0iIzM0OTJERSIvPgogICAgPHBhdGggZD0iTTE2Ljk2NCAzNS4yNDRjMCAuODMtLjY4MiAxLjUwMy0xLjUyMyAxLjUwM2ExLjUxMyAxLjUxMyAwIDAgMS0xLjUyNC0xLjUwM2MwLS44My42ODItMS41MDMgMS41MjQtMS41MDMuODQxIDAgMS41MjMuNjczIDEuNTIzIDEuNTAzek0yMi4yOTggMzIuMjM4YzAgLjgzLS42ODIgMS41MDMtMS41MjQgMS41MDNhMS41MTQgMS41MTQgMCAwIDEtMS41MjQtMS41MDNjMC0uODMuNjgzLTEuNTAzIDEuNTI0LTEuNTAzLjg0MiAwIDEuNTI0LjY3MyAxLjUyNCAxLjUwM3pNMTAuODcgMzYuNzQ3YzAgLjgzLS42ODIgMS41MDMtMS41MjQgMS41MDNhMS41MTQgMS41MTQgMCAwIDEtMS41MjMtMS41MDNjMC0uODMuNjgyLTEuNTAzIDEuNTIzLTEuNTAzLjg0MiAwIDEuNTI0LjY3MyAxLjUyNCAxLjUwM3oiIGZpbGw9IiNCNzkyRTQiLz4KICAgIDxwYXRoIGQ9Ik0yNy42MyAzLjAwNmMwIDEuNjYtMS4zNjQgMy4wMDYtMy4wNDcgMy4wMDZzLTMuMDQ4LTEuMzQ2LTMuMDQ4LTMuMDA2QzIxLjUzNSAxLjM0NiAyMi45IDAgMjQuNTgzIDBzMy4wNDcgMS4zNDYgMy4wNDcgMy4wMDZ6IiBmaWxsPSIjOEU1OUNGIi8+CiAgICA8cGF0aCBkPSJNMTUuNDQgMi44OGMwIC44My0uNjgyIDEuNTA0LTEuNTI0IDEuNTA0YTEuNTE0IDEuNTE0IDAgMCAxLTEuNTIzLTEuNTAzYzAtLjgzLjY4Mi0xLjUwMyAxLjUyMy0xLjUwMy44NDIgMCAxLjUyNC42NzMgMS41MjQgMS41MDN6IiBmaWxsPSIjQjc5MkU0Ii8+CiAgICA8cGF0aCBkPSJNMTIuMzkzIDkuNjQ0YzAgMS4yNDUtMS4wMjMgMi4yNTUtMi4yODUgMi4yNTUtMS4yNjIgMC0yLjI4NS0xLjAxLTIuMjg1LTIuMjU1IDAtMS4yNDUgMS4wMjMtMi4yNTQgMi4yODUtMi4yNTQgMS4yNjIgMCAyLjI4NSAxLjAxIDIuMjg1IDIuMjU0eiIgZmlsbD0iIzAyN0FEQSIvPgogICAgPHBhdGggZD0iTTI2Ljg2OCAyMC45NjZoOS4xNDJ2MS41MDNoLTkuMTQydi0xLjUwM3oiIGZpbGw9IiMwMDAiLz4KICAgIDxwYXRoIGQ9Ik0yNi44NjggMjAuOTY2aDkuMTQydjEuNTAzaC05LjE0MnYtMS41MDN6IiBmaWxsPSIjQ0I5RTc4Ii8+CiAgICA8cGF0aCBkPSJNMjYuODY4IDIwLjk2Nmg2Ljg1N3YxLjUwM2gtNi44NTd2LTEuNTAzek0yOS4xNTQgMjMuOTcyaDQuNTd2MS41MDNoLTQuNTd2LTEuNTAzeiIgZmlsbD0iI0NCOUU3OCIvPgogICAgPHBhdGggZD0iTTI5LjE1NCAyMy45NzJIMzIuMnYxLjUwM2gtMy4wNDd2LTEuNTAzek0xMS42MzEgMTQuOTU0aDEyLjE5djEuNTAzSDExLjYzdi0xLjUwM3oiIGZpbGw9IiNDQjlFNzgiLz4KICAgIDxwYXRoIGQ9Ik0xMS42MzEgMTQuOTU0aDcuNjE5djEuNTAzSDExLjYzdi0xLjUwM3oiIGZpbGw9IiNDQjlFNzgiLz4KICAgIDxwYXRoIGQ9Ik0yMS41MzUgMzguMjVjMC0uNDE2LjMzNi0uNzUyLjc1MS0uNzUyaC4wMjFhLjc1MS43NTEgMCAxIDEgMCAxLjUwM2gtLjAyYS43NTEuNzUxIDAgMCAxLS43NTItLjc1MnpNMjAuMDEyIDM2Ljc0N2MwLS40MTUuMzM2LS43NTIuNzUxLS43NTJoLjAyMWEuNzUxLjc1MSAwIDEgMSAwIDEuNTAzaC0uMDJhLjc1MS43NTEgMCAwIDEtLjc1Mi0uNzUxek0xOC40ODggMzguMjVjMC0uNDE2LjMzNy0uNzUyLjc1Mi0uNzUyaC4wMmEuNzUxLjc1MSAwIDEgMSAwIDEuNTAzaC0uMDJhLjc1MS43NTEgMCAwIDEtLjc1Mi0uNzUyek0xMi4zOTMgMzEuNDg3YzAtLjQxNS4zMzctLjc1Mi43NTItLjc1MmguMDJhLjc1MS43NTEgMCAxIDEgMCAxLjUwM2gtLjAyYS43NTEuNzUxIDAgMCAxLS43NTItLjc1MXoiIGZpbGw9IiNCNzkyRTQiLz4KPC9zdmc+Cg=="/> </div><div class="content"><div class="title"></div><div class="text">We are working on improving your experience. We are testing <b>{{experimentName}}</b> and we would like for your to try it!</div><div class="tooltip-notification-buttons"><button type="button" class="button-secondary hide"></button><button type="button" class="button-primary hide"></button></div></div>',translate:0,follow:!0,cssClass:"tooltip-notification popover-gradient",margin:10,topColor:"#8e59cf",bottomColor:"#52b8d8",init:function init(e){!1!==this._validateConfiguration(e)&&(e.contents=this.tooltipNotificationTemplate,UI.BaseNotification.prototype.init.call(this,e),this._setExperimentName(),this._setButtons())},_validateConfiguration:function _validateConfiguration(e){return e?!!e.target||(console.warn("TooltipNotification: target is not defined."),!1):(console.warn("TooltipNotification: configuration is missing."),!1)},_setExperimentName:function _setExperimentName(){var i=this;return!1===Boolean(i.experiment)?i.element.find(".text").html(:i.element.find(".text").html(}}}),Class(UI,"NewFeatureNotification").inherits(UI.BaseNotification).includes(UI.BaseNotification.Popover)({NEW_FEATURE_ONBOARDING_WIDTH:332,prototype:{newFeatureNotificationTemplate:'<div class="header"><div class="illustration"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjYiIGhlaWdodD0iMjciIHZpZXdCb3g9IjAgMCAyNiAyNyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik03LjQ4MyAyLjY1N2ExIDEgMCAwIDEgMS43OSAwbDEuNzQgMy40OTVhMSAxIDAgMCAwIC40NS40NWwzLjQ5NCAxLjczOWExIDEgMCAwIDEgMCAxLjc5bC0zLjQ5NSAxLjc0YTEgMSAwIDAgMC0uNDUuNDVsLTEuNzM5IDMuNDk1YTEgMSAwIDAgMS0xLjc5IDBsLTEuNzQtMy40OTVhMSAxIDAgMCAwLS40NS0uNDVsLTMuNDk1LTEuNzRhMSAxIDAgMCAxIDAtMS43OWwzLjQ5NS0xLjc0YTEgMSAwIDAgMCAuNDUtLjQ1bDEuNzQtMy40OTR6TTE4Ljc1IDEwLjE2OGExIDEgMCAwIDEgMS43OSAwbDEuMDY3IDIuMTQ0YTEgMSAwIDAgMCAuNDUuNDVsMi4xNDUgMS4wNjdhMSAxIDAgMCAxIDAgMS43OWwtMi4xNDUgMS4wNjlhMSAxIDAgMCAwLS40NS40NWwtMS4wNjcgMi4xNDRhMSAxIDAgMCAxLTEuNzkgMGwtMS4wNjgtMi4xNDVhMSAxIDAgMCAwLS40NS0uNDVsLTIuMTQ1LTEuMDY3YTEgMSAwIDAgMSAwLTEuNzlsMi4xNDUtMS4wNjhhMSAxIDAgMCAwIC40NS0uNDVsMS4wNjctMi4xNDR6TTkuMjE2IDE4LjgzNWExIDEgMCAwIDEgMS43OSAwbC41ODggMS4xOGExIDEgMCAwIDAgLjQ1LjQ1bDEuMTguNTg3YTEgMSAwIDAgMSAwIDEuNzlsLTEuMTguNTg4YTEgMSAwIDAgMC0uNDUuNDVsLS41ODggMS4xOGExIDEgMCAwIDEtMS43OSAwbC0uNTg4LTEuMThhMSAxIDAgMCAwLS40NS0uNDVsLTEuMTgtLjU4N2ExIDEgMCAwIDEgMC0xLjc5MWwxLjE4LS41ODdhMSAxIDAgMCAwIC40NS0uNDVsLjU4OC0xLjE4eiIgZmlsbD0iI0ZGQ0QzOCIvPgo8L3N2Zz4K"/></div><div class="title">New Feature</div></div><div class="content"><div class="message-body"></div><div class="new-feature-buttons"><button type="button" class="button-secondary hide"></button><button type="button" class="button-primary hide"></button></div></div>',translate:0,follow:!0,cssClass:"new-feature-notification popover-gradient",margin:10,topColor:"#7724da",bottomColor:"#7724da",mobileBreakpointLg:320,_desktopScrollAreaOffset:40,init:function init(e){!1!==this._validateConfiguration(e)&&(Helpers.App.isMobile()&&(this._desktopScrollAreaOffset=0),e.contents=this.newFeatureNotificationTemplate,UI.BaseNotification.prototype.init.call(this,e),this._setFeatureMessage(),this._setButtons())},_validateConfiguration:function _validateConfiguration(e){return e?!!e.target||(console.warn("NewFeatureNotification: target is not defined."),!1):(console.warn("NewFeatureNotification: configuration is missing."),!1)},_setFeatureMessage:function _setFeatureMessage(){!1!==Boolean(this.message)&&this.element.find(".message-body").html(this.message)},_updateTranslateOnNegativePosition:function _updateTranslateOnNegativePosition(e,t){t<0&&e.left<this._getWindowWidth()/2&&(this.translate=Math.abs(t),this._setArrowPosition())},_isOffsetExceedingViewport:function _isOffsetExceedingViewport(e,t){return t+this.constructor.NEW_FEATURE_ONBOARDING_WIDTH+this._desktopScrollAreaOffset>this._getWindowWidth()-this._desktopScrollAreaOffset&&e.left>this._getWindowWidth()/2},_updateTranslateOnExceedingViewport:function _updateTranslateOnExceedingViewport(e,t){if(this._isOffsetExceedingViewport(e,t)){var i=-(t+this.constructor.NEW_FEATURE_ONBOARDING_WIDTH-this._getWindowWidth()+this.target.prop("offsetWidth"));this.translate=i,this._setArrowPosition()}},_updateTranslatePosition:function _updateTranslatePosition(){var e=this._getOffset(),t=e.left-Math.floor(this.constructor.NEW_FEATURE_ONBOARDING_WIDTH/2);this._updateTranslateOnNegativePosition(e,t),this._updateTranslateOnExceedingViewport(e,t)},_getNewBottomPosition:function _getNewBottomPosition(){var e=this._getOffset();this._updateTranslatePosition();var t=e.left+this.target.prop("offsetWidth")/2+this.translate;return{top:e.top+this.target.prop("offsetHeight")+this.margin+"px",left:t+"px",transform:"translateX(-50%)"}}}}),Class(UI,"SurveyNotification").inherits(Widget).includes(GenericDestroySupport)({html:'<div class="survey-alert bottom right">      <div class="alert-body">        <div class="close-survey">          <span class="close-btn"></span>        </div>       <div class="header">          <div class="title">            Win a $200 gift card!          </div>        </div>        <div class="body">          Complete our survey for an opportunity to win 1 of 5 $200 USD gift cards.        </div>        <div class="actions">          <a href="#" target="_blank" class="survey-link">Start Survey</a>        </div>        </div>    </div>',prototype:{userId:null,_link:"https://envato.qualtrics.com/jfe/form/SV_ebxlX5F36PZdLim?reference={userId}",init:function init(e){Widget.prototype.init.call(this,e),this.$closeBtn=this.element.find(".close-survey"),this.$surveyLink=this.element.find(".survey-link"),this.setLink(this._link.replace("{userId}",e.userId)),this._bindEvents()},_bindEvents:function _bindEvents(){this.$closeBtn.on("click",Utils.bindFn(this)(this.destroy)),this.$surveyLink.on("click",Utils.bindFn(this)(this.destroy))},destroy:setLink:}),Class(UI,"ButtonWidget").inherits(Widget).includes(BubblingSupport)({html:"<button></button>",content:null,prototype:{init:function init(e){Widget.prototype.init.call(this,e),this.setContent(e.content),this.element.bind("click",Utils.bindFn(this)(this._clickEventHandler))},_clickEventHandler:function _clickEventHandler(){this.dispatch("click")},setContent:disable:function disable(){this.element.attr("disabled",!0)},enable:isDisabled:}),Class(UI,"DialogTopbar").inherits(Widget).includes(BubblingSupport)({html:'<div class="component dialog-topbar"></div>',prototype:{closeButton:null,init:function init(e){Widget.prototype.init.call(this,e),e.showDragIcon&&this.element.append($('<div class="ic-drag"></div>')),this.closeButton=new UI.ButtonWidget({name:"closeButton",cssClass:"close-button"}),this.closeButton.bind("click",this._closeButtonClickHandler.bind(this)),this.element.append(this.closeButton.element)},_closeButtonClickHandler:}),Class(Service,"SessionState")({_instance:null,getInstance:function getInstance(e){return null===Service.SessionState._instance&&(Service.SessionState._instance=new Service.SessionState(e)),Service.SessionState._instance},prototype:{showLogin:null,loginCallbackBuilder:null,init:function init(e){this.showLogin=e.showLogin||function(){},this.loginCallbackBuilder=e.loginCallbackBuilder||function(){}},isLoggedIn:function isLoggedIn(){return Helpers.App.isLoggedIn()},loginDependentFunction:function loginDependentFunction(e){this.isLoggedIn()?e():(this.showLogin(),this.loginCallbackBuilder(e))},subscribeToOnLogin:}),Class(UI,"CountdownTimer").inherits(Widget).includes(GenericDestroySupport)({elementClass:"countdown-widget",prototype:{content:null,refreshInterval:null,startDate:null,endDate:null,intervalId:null,highestUnit:null,init:function init(e){Widget.prototype.init.call(this,e),e.endDate||(this.endDate=new Date),e.refreshInterval||(this.refreshInterval=1),this.highestUnit=e.highestUnit||"day"},start:function start(){this.stop(),this._refresh(),this.intervalId=setInterval(this._refresh.bind(this),1e3*this.refreshInterval)},stop:setContent:show:hide:function hide(){Widget.prototype.hide.call(this),this.stop()},destroy:_refresh:function _refresh(){var e;if(!1===this._getDateDiff())return this.hide(),void this.dispatch("countdown.finished");e=this.content,e=this._renderUnitTime(e,"day"),e=this._renderUnitTime(e,"hour"),e=this._renderUnitTime(e,"minute"),e=this._renderUnitTime(e,"second"),this.element.html(e)},_getDateDiff:function _getDateDiff(){var e,t;if(e=(this.startDate||new Date).getTime(),(t=this.endDate.getTime()-e)<1)return!1;var i=Math.floor(t/1e3),n=Math.floor(i/60),s=Math.floor(n/60),r=Math.floor(s/24);switch(this.highestUnit){case"hour":return{hour:s,minute:n%60,second:i%60};case"minute":return{minute:n,second:i%60};case"second":return{second:i};case"day":default:return{day:r,hour:s%24,minute:n%60,second:i%60}}},_getDayDiff:function _getDayDiff(e,t){var i=t-e;return i<1?0:Math.floor(i/864e5)},_getHourDiff:function _getHourDiff(e,t){var i=t-e;return i<1?0:Math.floor(i%864e5/36e5)},_getMinuteDiff:function _getMinuteDiff(e,t){var i=t-e;return i<1?0:Math.floor(i%36e5/6e4)},_getSecondDiff:function _getSecondDiff(e,t){var i=t-e;return i<1?0:Math.floor(i%6e4/1e3)},_renderUnitTime:function _renderUnitTime(e,t){var i=this._getDateDiff();return!1!==i&&t in i?(i[t]<10&&(i[t]="0"+i[t]),e=(e=e.replace("{{"+t+"_number}}",i[t])).replace("{{"+t+"_unit}}",t+(1===i[t]?"":"s"))):e}}}),Class(UI,"BundleIndicator").inherits(Widget)({COLORLIST1:["#604F5F","#E57B83","#F89697","#FED6BC","#F6F1D3","#B9C7DB","#C8E26C","#47B3AC","#D7D7D5","#FF8BAE","#9E7864","#D8F4F0","#3E5480","#FCD5D5","#6883A7","#BBC8DB"],COLORLIST2:["#F7EED7","#D4FFCD","#D6D5FC","#96B8CC","#BCFFF5","#C4A990","#FFD7E3","#F9F9ED","#6CAEC4","#EBFEA9","#ADCFFF","#FFE9E4","#FFE7D7","#DDBDD6","#EEB5BA","#8B708A"],$bundleIndicatorBackgroundCard:null,$bundleIndicatorForegroundCard:null,prototype:{init:function init(e){Widget.prototype.init.call(this,e),this.$bundleIndicatorBackgroundCard=e.backgroundCard,this.$bundleIndicatorForegroundCard=e.foregroundCard,this.fillPathColors()},randomListItem:fillPathColors:function fillPathColors(){var e=this,t=this.constructor.COLORLIST1,i=this.constructor.COLORLIST2;this.$bundleIndicatorBackgroundCard.find("path").each(function(){$(this).css("fill",t[e.randomListItem()])}),this.$bundleIndicatorForegroundCard.find("path").each(function(){$(this).css("fill",i[e.randomListItem()])})}}}),Class(UI,"GenericDropdown").inherits(Widget)({html:'         <div class="dropdown">             <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> </button>             <svg xmlns="http://www.w3.org/2000/svg" width="8" height="10" fill="none" viewBox="0 0 12 8"><path d="M.264.305c-.364.385-.34 1.107 0 1.5l.632.731 2.74 3.172 1.717 1.987c.351.407.944.407 1.295 0l.633-.732 2.74-3.172 1.717-1.987c.363-.417.336-1.075 0-1.499-.333-.42-.957-.392-1.296 0l-.632.732-2.74 3.172c-.572.66-1.146 1.326-1.717 1.987h1.295l-.632-.732-2.74-3.172L1.559.305C1.199-.112.63-.084.264.305z"></path></svg>             <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">                 <ul></ul>             </div>         </div>',prototype:{_selected:null,_options:null,init:function init(e){var t=e.element;delete e.element;var i=JSON.parse(JSON.stringify(e));this._options=JSON.parse(JSON.stringify(i.options)),i.element=t,Widget.prototype.init.call(this,i),this.element.find(".dropdown").dropdown(),this.$dropdownButton=this.element.find(".dropdown-toggle"),this.$dropdownMenu=this.element.find(".dropdown-menu"),this._selected=this._options.find(function(e){return e.isSelected}),this._selected?this._updateButtonText(this._selected.label):(this._updateButtonText(this.defaultLabel),this._selected=this._options[0],this._selected.isSelected=!0),this._buildOptions(),this._bindings()},_updateButtonText:function _updateButtonText(e){this.$dropdownButton.text(e)},_buildOptions:function _buildOptions(){var e=this._options.map(function(e){var t=$("<a>");return t.text(e.label),t.addClass("dropdown-item"),e.isSelected&&t.addClass("selected"),t.data("value",e.value),t});this.$dropdownMenu.find("ul").append(e)},_bindings:function _bindings(){var n=this;this.element.click(function(e){var t=$(e.target);if(t.hasClass("dropdown-item")){n._selected.isSelected=!1,n.element.find(".selected").removeClass("selected"),t.addClass("selected");var i=t.data("value");n._selected=n._options.find(,n._selected.isSelected=!0,n._updateButtonText(n._selected.label),n.dispatch("selected",n._selected)}}),this.element.find("> svg").click(},getSelected:function getSelected(){return this._selected},close:function close(){this.element.hasClass("open")&&this.element.find(".dropdown-toggle").dropdown("toggle")}}}),UI.GlobalSearch={},Class(UI.GlobalSearch,"SearchContainer").inherits(Widget)({html:'        <div class="global-search-container">             <span class="cancel-btn">Cancel</span>             <div class="dropdowns-container"></div>             <form>                 <div class="form-group"></div>                 <button type="submit" class="btn btn-primary search-btn search-white">                     <div class="search-white"></div>                 </button>                 <span class="results-spinner"></span>             </form>         </div>',prototype:{categoriesData:[],_searchInput:null,_categoryDropdown:null,_subCategoryDropdown:null,$counts:null,_isActive:!0,init:function init(e){Widget.prototype.init.call(this,e),this._isActive=!1===Helpers.App.isMobile(),this.$dropdownsContainer=this.element.find(".dropdowns-container"),this.$form=this.element.find("form"),this.$cancel=this.element.find(".cancel-btn"),this.$spinner=this.element.find(".results-spinner"),this.$dropdownCategory=this.$dropdownsContainer.find("button"),this._searchInput=new UI.GlobalSearch.SearchInput({name:"_searchInput",value:this.searchTerm||"",placeholder:this.searchPlaceholder,type:"text",hasClearButton:!0,cssClass:"global-search-input",element:this.$form.find(".global-search-input")}),this.appendChild(this._searchInput);var t=this.$dropdownCategory.text(),i=this.categoriesData.map(;this._categoryDropdown=new UI.GenericDropdown({name:"_categoryDropdown",defaultLabel:i[0].label,options:i,cssClass:"categories-dropdown",element:this.element.find(".categories-dropdown")}),this.appendChild(this._categoryDropdown);var n=i.find(function(e){return e.isSelected});n&&this._createSubcategoryDropdown(n),this._bindings()},_bindings:function _bindings(){var n=this;this.$form.submit(function(e){e.preventDefault();var t=null;n._subCategoryDropdown&&(t=n._subCategoryDropdown.getSelected());var i=n._searchInput.getValue().trim();""!==i&&n.dispatch("search",{searchTerm:i,category:n._categoryDropdown.getSelected(),subCategory:t})}),this._searchInput.bind("change",function(e,t){var i=t.value.trim();n.dispatch("newSearchTerm",i)}),this._categoryDropdown.bind("selected",function(e,t){var i=t;n.dispatch("categorySelected",i),n._subCategoryDropdown&&n._subCategoryDropdown.destroy(),null!==i.value&&n._createSubcategoryDropdown(i),n._focusOnInput()}),Helpers.App.isMobile()&&(this.$cancel.click(function(){n._isActive=!1,$("body").removeClass("search-overlay-active"),n.element.removeClass("active"),n.hideSpinner()}),this._searchInput.bind("focus",function(){n._isActive=!0,$("body").addClass("search-overlay-active"),n.element.addClass("active")}),this.element.on("show.bs.dropdown",function(){n.$form.hide()}),this.element.on("hide.bs.dropdown",function(){n.$form.show()}))},_createSubcategoryDropdown:function _createSubcategoryDropdown(){},_subCategoryDropdownBindings:function _subCategoryDropdownBindings(){var i=this;this._subCategoryDropdown.bind("selected",},setPlaceholder:function setPlaceholder(e){this._searchInput.setPlaceholder(e)},showSpinner:function showSpinner(){!1!==this._isActive&&this.$spinner.show()},hideSpinner:function hideSpinner(){this.$spinner.hide()},getSearchInput:function getSearchInput(){return this._searchInput.getInputElement()},_focusOnInput:function _focusOnInput(){this.getSearchInput().click().focus()},closeAllDropdowns:function closeAllDropdowns(){this._categoryDropdown.close(),this._subCategoryDropdown&&this._subCategoryDropdown.close()}}}),Class(UI.GlobalSearch,"SearchController")({CATEGORIES_NAVBAR_TO_NAME_MAP:{Mockups:"Mockups",Designs:"Design Templates",Logos:"Logos",Videos:"Videos"},CATEGORIES_PLACEHOLDER_MAP:{"All Categories":"Search Mockups, Logos, Design Templates, Text Animations, Instagram Stories, Flyers...",Mockups:"Search Tshirt, Mask, Book, Mug, Hoodie, iPhone...",Designs:"Search Banner, YouTube Banner, OBS Stream Overlay, Fortnite...",Logos:"Search Gaming, Pubg, Dragon, Skull...",Videos:"Search Intro Video, Outro, Music, Anime...",Gaming:"Search Fortnite, Pubg, Free Fire..."},CATEGORY_REAL_URL_MAP:{"/videos":"/c/videos","/logo-maker":"/logo-maker?industry=all","/online-logo-maker":"/online-logo-maker?industry=all"},COMMERCIAL_ALL_CATEGORY_PAGE_PATH:"/c/all",prototype:{_searchContainer:null,searchService:null,_categoriesData:null,_selectedCategory:null,_selectedSubcategory:null,_searchTerm:null,_autocomplete:null,init:function init(e){var n=this;this._searchTerm=this.getSearchTermFromUrl(),this.searchService=e.searchService;var s=this._isSearchResultsPage();this._categoriesData=e.categoriesData.map(function(e){var t=n._isSelectedCategory(e.title)&&s,i={label:e.title,value:e.slug,isSelected:t,url:e.url,category_id:UI.GlobalSearch.SearchController.CATEGORIES_NAVBAR_TO_NAME_MAP[e.title]||null};return i.isSelected&&(n._selectedCategory=i),i});var t=null;Helpers.App.isCommercialSearchPagesEnabled()&&(t=this.constructor.COMMERCIAL_ALL_CATEGORY_PAGE_PATH),this._categoriesData.unshift({label:"All Categories",value:null,isSelected:null===this._selectedCategory,url:t,category_id:null}),null===this._selectedCategory&&(this._selectedCategory=this._categoriesData[0])},_isSearchResultsPage:_isSelectedCategory:function _isSelectedCategory(e){var t=window.pageType;if("custom_experiences"!==t.type&&!0===t.no_results&&!1===t.is_search)return!1;if(Helpers.StageType&&Helpers.StageType.isTool())return!1;if("bookmarks"===t.type)return!1;var i=/\/gaming-templates|\/gaming-br/.test(window.location.pathname);return!("Gaming"!==e||!i)||UI.GlobalSearch.SearchController.CATEGORIES_NAVBAR_TO_NAME_MAP[e]===window._pl_category&&!i},_isSelectedSubcategory:function _isSelectedSubcategory(e){var t=e.replace(/\/apparel\//,"/mockups/"),i=new URL(window.location.href);-1===t.indexOf("search")?i.searchParams["delete"]("search"):i.searchParams["delete"](null);var n=new URL(t,window.location.origin);t=n.pathname;var s=n.searchParams.toString();return s&&(t+="?"+s),-1!==i.toString().indexOf(t)},_bindings:function _bindings(){var n=this;this._searchContainer.bind("categorySelected",function(e,t){n._selectedCategory=n._categoriesData.find(function(e){return e.value===t.value});var i=n._selectedCategory&&n._selectedCategory.url;i?!1===n._isCategoryUrl(i)&&UI.GlobalSearch.SearchController.CATEGORY_REAL_URL_MAP[i]===undefined&&n.searchService.getCEFullUrl(n._selectedCategory.url):n._selectedSubcategory=null,n._setAutocomplete(n._selectedCategory),n._setPlaceholder(),n._searchTerm&&n._searchContainer.dispatch("newSearchTerm",n._searchTerm)}),this._searchContainer.bind("subcategorySelected",function(e,t){n._selectedSubcategory=n._selectedCategory.subcategories.find(function(e){return e.value===t.value});var i=n._selectedSubcategory&&n._selectedSubcategory.url;i&&!1===n._isCategoryUrl(i)&&n.searchService.getCEFullUrl(n._selectedSubcategory.url),null!==n._selectedSubcategory.value&&n._destroyAutocomplete(),n._searchTerm&&n._searchContainer.dispatch("newSearchTerm",n._searchTerm),n._setPlaceholder()}),this._searchContainer.bind("newSearchTerm",function(e,t){n._searchTerm=t,n._searchTermTimeout&&clearTimeout(n._searchTermTimeout),n._searchContainer.hideSpinner(),n._searchTerm&&(n._searchTermTimeout=setTimeout(function(){n._getResultsCount(n._searchTerm)},2e3))}),this._searchContainer.bind("search",function(e,t){n._searchTermTimeout&&clearTimeout(n._searchTermTimeout),n._search(t)})},setSearchContainer:function setSearchContainer(e){this._searchContainer=e,this._bindings(),this._setAutocomplete(this._selectedCategory),this._setPlaceholder()},_setSelectedCategory:function _setSelectedCategory(t){this._selectedCategory=this._categoriesData.find(function(e){return e.value===t.value})},_setAutocomplete:function _setAutocomplete(e){if(this._destroyAutocomplete(),!this._selectedSubcategory||null===this._selectedSubcategory.value){var t=this._searchContainer.getSearchInput();if(null===e.value)return this._autocomplete=this.searchService.setAutocomplete(null,t),void this._bindAutocomplete();var i=UI.GlobalSearch.SearchController.CATEGORIES_NAVBAR_TO_NAME_MAP[e.label]||null;i&&(this._autocomplete=this.searchService.setAutocomplete(i,t),this._bindAutocomplete())}},_bindAutocomplete:function _bindAutocomplete(){var i=this;this._autocomplete.on("autocomplete:selected",},_destroyAutocomplete:function _destroyAutocomplete(){this._autocomplete&&(this._autocomplete.autocomplete.destroy(),this._autocomplete=null)},_getResultsCount:function _getResultsCount(t){var i=this,e=this._selectedCategory,n=!1;e.url&&(n=/^\/c\//.test(e.url)),this._selectedSubcategory&&null!==this._selectedSubcategory.value&&(e=this._selectedSubcategory,n=!1);var s=null===this._selectedCategory.value;/\/logo-maker|\/online-logo-maker/.test(e.url)&&((e=JSON.parse(JSON.stringify(e))).url=this._updateLogoMakerUrl(e.url)),/\/videos/.test(e.url)&&((e=JSON.parse(JSON.stringify(e))).url=this._updateVideoMakerUrl(e.url));var r=this.searchService.getCount(t,e,n||s);return r.then(function(e){return i._searchContainer.hideSpinner(),0===e&&Helpers.GlobalEventTracker.searchNoResults({searchTerm:t}),0<e&&e<=10&&Helpers.GlobalEventTracker.searchFewResults({searchTerm:t,numberOfMatches:e}),10<e&&Helpers.GlobalEventTracker.searchSuccessfulResults({searchTerm:t,numberOfMatches:e}),e}),r},_search:function _search(n,s){var r=this;this._searchTerm=n.searchTerm,this._getResultsCount(n.searchTerm).then(function(e){if(0===e){var t=null===r._selectedCategory.category_id,i=n.category.value;return!0!==s&&!1===t?(r._previousSelected=r._selectedCategory,r._selectedCategory=r._categoriesData[0],r._search(n,!0)):(!0===s&&(r._selectedCategory=r._previousSelected,r._previousSelected=null),"logo-maker"===i&&(i="logos"),void(window.location.href="/?search="+n.searchTerm+"&category="+i+"&no_results=true"))}r.searchService.requestSearch({searchTerm:n.searchTerm,category:r._selectedCategory,subCategory:r._selectedSubcategory})})},getCategoriesData:function getCategoriesData(){return this._categoriesData},getSearchTermFromUrl:function getSearchTermFromUrl(){var e=Helpers.App.getUrlParam("search",!1);return"_"===e?null:e||null},_isCategoryUrl:function _isCategoryUrl(e){return/\/c\/[a-z0-9]*/.test(e)},_setPlaceholder:function _setPlaceholder(){var e=UI.GlobalSearch.SearchController.CATEGORIES_PLACEHOLDER_MAP[this._selectedCategory.label];null!==this._selectedSubcategory?this._selectedSubcategory&&null===this._selectedSubcategory.value?this._searchContainer.setPlaceholder(e):this._searchContainer.setPlaceholder("Search..."):this._searchContainer.setPlaceholder(e)},_updateLogoMakerUrl:_updateVideoMakerUrl:function _updateVideoMakerUrl(e){var t=e;return t=t.replace("/videos","/c/videos")},toggleAutocompleteDropdown:function toggleAutocompleteDropdown(e){var t=$(".aa-dropdown-menu"),i=t.is(":visible");e&&!this._aaWasOpen||(!e&&i&&(this._aaWasOpen=!0),e&&this._aaWasOpen&&(this._aaWasOpen=!1),t.toggle(e))}}}),Class(UI.GlobalSearch,"SearchInput").inherits(Widget)({html:'         <div>             <input type="search" class="form-control search-input-control" placeholder="" aria-label="" aria-describedby="" id="testing" />             <button type="button" class="close" aria-label="Close">                 <span aria-hidden="true">&times;</span>             </button>         </div>',prototype:{$clearBtn:null,$input:null,init:function init(e){Widget.prototype.init.call(this,e),this.$input=this.element.find(".search-input-control"),this.$clearBtn=this.element.find(".close"),this.$input.val(this.value),this.$input.attr("placeholder",this.placeholder),this.$input.attr("type",this.type),this.hasClearButton?this.$clearBtn.toggleClass("hide",""===this.value):(this.$clearBtn.remove(),this.$clearBtn=null),this._bindings()},_bindings:function _bindings(){var e=this;this.$clearBtn&&this.$clearBtn.click(,this.$input.focus(function(){e.dispatch("focus")}),this.$input.keyup(function(){e.setValue(e.getValue()),null!==this.$clearBtn&&(""===e.getValue()?e.$clearBtn.addClass("hide"):e.$clearBtn.removeClass("hide"))})},getValue:setValue:function setValue(e){this.value=e,this.$input.val(this.value),this.dispatch("change",{value:this.value})},setPlaceholder:function setPlaceholder(e){this.$input.attr("placeholder",e)},getInputElement:function getInputElement(){return this.$input}}}),Class(UI.GlobalSearch,"SearchService")({prototype:{_slugURLMap:null,_termCountMap:null,algoliaConfig:null,categoryUrlRegex:/\/c\/[a-z0-9]*/,init:function init(e){this._slugURLMap={},this._termCountMap={},this.algoliaConfig=e.algoliaConfig},setAutocomplete:function setAutocomplete(t,e){var i=algoliasearch(this.algoliaConfig.appId,this.algoliaConfig.readApiKey).initIndex(this.algoliaConfig.queryIndexName),n={hitsPerPage:5,facets:["*","Stage_production.facets.exact_matches.category_name.value"],facetFilters:[["Stage_production.facets.exact_matches.category_name.value:"+t]]};return null===t&&(delete n.facets,delete n.facetFilters),autocomplete("#"+$(e).attr("id"),{hint:!1},[{
source:autocomplete.sources.hits(i,n),displayKey:"query",templates:{suggestion:function(e){if(t)e.Stage_production.facets.exact_matches.category_name.find(function(e){return e.value===t});return e._highlightResult.query.value}}}])},getCount:function getCount(e,t,i){var n=$.md5(JSON.stringify(arguments));if(!this._termCountMap[n]){var s=this._getCount.call(this,e,t,i);this._termCountMap[n]=s}return this._termCountMap[n]},_getCount:function _getCount(i,n,e){var s=this,t=n.category_id&&encodeURIComponent(n.category_id),r="";if(t&&(r="&category_id="+t),e)return this._getStagesCountFromTerm(i,r);var a=UI.GlobalSearch.SearchController.CATEGORY_REAL_URL_MAP[a]||n.url,o=a.split("?")[1]||"";return this._isCategoryURL(a)?(o+=r,s._getStagesCountFromTerm(i,o)):this.getCEFullUrl(a).then(function(e){if(e.v3_enabled)return s.getCountV3(i,n);var t=e.full_url.split("?")[1];return t+="&"+o+r,s._getStagesCountFromTerm(i,t)})},_isCategoryURL:function _isCategoryURL(e){return this.categoryUrlRegex.test(e)},_getStagesCountFromTerm:function _getStagesCountFromTerm(e,t){var i="/api/v1/stages/get_stages_count_from_term";t&&!1===/^&/.test(t)&&(t="&"+t);var n=i+"?search="+e+t;return P.get(n)},getCountV3:function getCountV3(n,s){return new Promise(function(t,i){var e=s.url.replace("/","");$.get("/api/v2/custom_experiences/get_stages_count_from_term_v3?slug="+e+"&search="+n).done(function(e){t(e)}).fail(function(e){i(e)})})},requestSearch:function requestSearch(e){var t=e.category.url;e.subCategory&&null!==e.subCategory.value&&(t=e.subCategory.url);var i=UI.GlobalSearch.SearchController.CATEGORY_REAL_URL_MAP[t];i&&(t=i),t=t||"";var n=new URL(t,window.location.origin);n.searchParams.set("search",e.searchTerm),window.location=n.toString()},getCEFullUrl:function getCEFullUrl(n){var s=this;return new Promise(function(t,i){n=n.split("?")[0],s._slugURLMap[n]?t(s._slugURLMap[n]):$.get("/api/v2/custom_experiences/get_full_url?slug="+n.replace("/","")).done(.fail(function(e){i(e)})})}}}),UI.PricingPage={},Class("FaqVideo").inherits(Widget)({html:'    <div class="modal pricing-page-modal fade" tabindex="-1" role="dialog" aria-labelledby="downloadOverlayLabel" aria-hidden="true">        <div class="modal-dialog">            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">                <span aria-hidden="true">\xd7</span>            </button>            <div class="modal-content">                <div class="modal-body">                    <div class="content">                        <div class="body">                            <div class="yt-video-wrapper">                                <iframe src="" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>                            </div>                        </div>                    </div>                </div>            </div>        </div>    </div>',prototype:{videoUrl:null,$modalBody:null,$modalContent:null,$closeBtn:null,$modalFooter:null,$videoSrc:null,init:function init(e){Widget.prototype.init.call(this,e),this.videoUrl=e.videoUrl,this.$modalBody=this.element.find(".modal-body"),this.$modalContent=this.element.find(".modal-content"),this.$closeBtn=this.element.find(".close"),this.$modalFooter=this.element.find(".modal-footer"),this.$videoSrc=this.element.find(".yt-video-wrapper iframe"),this.$videoSrc[0].src=this.videoUrl,this._bindEvents()},_bindEvents:function _bindEvents(){this.element.on("hidden.bs.modal",this.detach.bind(this))},activate:function activate(){this.$modalFooter.addClass("hidden"),this.element.modal("show")},detach:function detach(){this.element.data("modal",null),this.element.detach()},deactivate:function deactivate(){this.element.modal("hide"),Widget.prototype.deactivate.call(this)}}}),Class(UI,"PricingPageVariantCD").inherits(Widget).includes(CustomEventSupport,NodeSupport,Translator,CurrencyLabelSetter)({BENEFITS_FOOTER_TEXT:"<strong>*Cancel anytime</strong><br>Unlimited subscription billed yearly in {{currency_label}}.",FAQ_ANSWER_2_TEXT:'<p> You can always buy per item, but we totally recommend our subscription. </p> <p> For ${{monthly_price}} {{currency_label}} per month* or ${{annual_price}} {{currency_label}} per year*, you will have access to <i>all</i> of Placeit\u2019s <span style="color: #9c19e0" ><a href="https://placeit.net/c/mockups" rel="noopener" style="color: #9c19e0" target="_blank" >mockups</a >, <a href="https://placeit.net/c/design-templates" rel="noopener" style="color: #9c19e0" target="_blank" >design templates</a >, </span ><a href="https://placeit.net/video-maker" rel="noopener" target="_blank" ><span style="color: #007ee4" ><span style="color: #9c19e0">videos,</span></span ></a > and <a href="https://placeit.net/logo-maker" ><span style="color: #9c19e0">logos</span></a >. </p> <p> We include our <span style="color: #9c19e0" ><a href="https://placeit.net/#license" rel="noopener" style="color: #9c19e0" target="_blank" >commercial license</a ></span > for all purchases! </p> <p style="font-size: 0.8em">*Billed per month or year according to chosen plan.</p>',prototype:{ctaBlock:null,$startNowBtn:null,$faqvideo:null,$pricingBtn:null,init:function init(e){Widget.prototype.init.call(this,{name:"pricingPageVariantCD",element:$(".pricing-page")}),this.ctaBlock=e.ctaBlockSection,this.appNavBar=e.appNavBar,this.$startNowBtn=this.element.find(".subscription-cta, .fotter-cta"),this.$faqvideo=this.element.find(".faqvideo"),this.$modalBody=this.element.find(".modal-body"),this.$modalContent=this.element.find(".modal-content"),this.$closeBtn=this.element.find(".close"),this.$modalFooter=this.element.find(".modal-footer"),this.$pricingBtn=$(document.body).find(".pricing"),this.$benefitsFooter=this.element.find(".benefits-footer"),this.$faqAnswer2=this.element.find("#answer-2"),this._setTexts(),this.setBindings(),this._shouldDisableStartNow()&&this._disableStartNowBtn()},setBindings:function setBindings(){var i=this;this.$pricingBtn.addClass("hidden"),this.ctaBlock&&this.ctaBlock.bind("subscription.success",this._onSubscriptionSuccess.bind(this)),this.appNavBar.bind("login.success",,this.$faqvideo.map(function(e,t){t.addEventListener("click",})},_onSubscriptionSuccess:function _onSubscriptionSuccess(){this._disableStartNowBtn()},_shouldDisableStartNow:function _shouldDisableStartNow(){var e=Helpers.App.getSubscription();return!1!==e&&!1!==e.is_annual},_disableStartNowBtn:function _disableStartNowBtn(){this.$startNowBtn.addClass("disabled")},_showVideo:function _showVideo(e){var t=this._getVideoUrl(e);this.faqVid=new FaqVideo({videoUrl:t}),this.faqVid.activate()},_getVideoUrl:function _getVideoUrl(e){var t={question1:"https://www.youtube.com/embed/jBuGvT3V-rs",question5a:"https://www.youtube.com/embed/yCC1_oWUuxg",question5b:"https://www.youtube.com/embed/QoPs9lHcR-Q",question6:"https://www.youtube.com/embed/k_AYOWnf8KU",question8a:"https://www.youtube.com/embed/MS-kPGZLfZw",question8b:"https://www.youtube.com/embed/4bsCICt4WaE",question9:"https://www.youtube.com/embed/stKGeQ1Vek8"};return t[e]?t[e]:t[question1]},_setTexts:function _setTexts(){var e=this;this.$benefitsFooter.html(this.constructor.BENEFITS_FOOTER_TEXT),this._setPricesInText().then(function(){e.$faqAnswer2.html(e.constructor.FAQ_ANSWER_2_TEXT)})},_setPricesInText:function _setPricesInText(){var t=this,e=Helpers.Price.monthlyPlan(),i=Helpers.Price.annualPlan();return Promise.all([e.price.then(function(e){t.constructor.FAQ_ANSWER_2_TEXT=t.constructor.FAQ_ANSWER_2_TEXT.replace("{{monthly_price}}",e)}),i.price.then(function(e){t.constructor.FAQ_ANSWER_2_TEXT=t.constructor.FAQ_ANSWER_2_TEXT.replace("{{annual_price}}",e)})])},checkRequestedStartNow:function checkRequestedStartNow(){if(-1!==window.location.hash.indexOf("#start-now")){var t=this;if(setTimeout(function(){if(Helpers.CouponHelper.getCode()){var e=function(){t.$startNowBtn.first().click(),Helpers.CouponHelper.unbind("coupon.validated",e),Helpers.CouponHelper.unbind("coupon.removed",e)};Helpers.CouponHelper.bind("coupon.validated",e),Helpers.CouponHelper.bind("coupon.removed",e)}else t.$startNowBtn.first().click()},0),history.replaceState){var e=window.location.pathname+window.location.search;history.replaceState(null,document.title,e)}else window.location.hash=""}}}}),UI.SubscriptionCta={},Class(UI.SubscriptionCta,"SubscriptionCtaBlock").inherits(Widget)({html:'        <div class="subscription-cta-container">            <h2 class="subscription-title"> </h2>            <div class="subscription-price-container">                <span class="from-txt">From:</span> <span class="subscription-price original-price">  </span>                <span class="subscription-discount-price final-price"> </span>                <span class="subscription-price-month"> </span>            </div>             <p class="subscription-subtitle"> </p>            <button class="subscription-cta"> </button>            <span class="subscription-info-footer"></span>        </div>',prototype:{$title:null,$subtitle:null,$startNowBtn:null,$priceContainer:null,$originalPrice:null,$discountPrice:null,$fromText:null,_monthlyCssClass:"monthly",$footerText:null,$perMonth:null,$footerOriginalPrice:null,$footerDiscountPrice:null,$footerStartNowBtn:null,enableFooterCTA:!1,init:function init(e){Widget.prototype.init.call(this,e),this.$originalPrice=this.element.find(".original-price"),this.$discountPrice=this.element.find(".final-price"),this.$footerOriginalPrice=$(".footer-price"),this.$footerDiscountPrice=$(".footer-discount-price"),this.$priceContainer=this.element.find(".subscription-price-container"),this.$title=this.element.find(".subscription-title"),this.$subtitle=this.element.find(".subscription-subtitle"),this.$startNowBtn=this.element.find(".subscription-cta"),this.$discountHighlight=this.element.find(".discount-highlight"),this.enableFooterCTA&&(this.$footerStartNowBtn=$(".fotter-cta")),this.$discountHighlight&&this.$discountHighlight.hide(),this.$footerText=this.element.find(".subscription-info-footer"),this.$fromText=this.element.find(".from-txt"),this.$perMonth=this.element.find(".subscription-price-month"),this.updateTitle(e.title),this.updateSubtitle(e.subtitle),this.$fromText.text(e.fromText),this.$startNowBtn.text(e.ctaText),this.$perMonth.text(e.perMonth),this.$footerStartNowBtn&&this.$footerStartNowBtn.text(e.ctaText),this._setBindings()},_setBindings:function _setBindings(){this.$startNowBtn.click(this._onCtaClicked.bind(this)),this.$footerStartNowBtn&&this.$footerStartNowBtn.click(this._onCtaClicked.bind(this))},updateUIForMonthly:function updateUIForMonthly(e,t){this.$priceContainer.addClass(this._monthlyCssClass);var i=this.$footerText.html(),n=new RegExp(t,"g"),s=i.replace(n,e);this.$footerText.html(s)},updateUIForAnnual:function updateUIForAnnual(e,t){this._monthlyCssClass&&this.$priceContainer.removeClass(this._monthlyCssClass);var i=this.$footerText.html(),n=new RegExp(e,"g"),s=i.replace(n,t);this.$footerText.html(s)},updateUIForDiscount:function updateUIForDiscount(){this.$discountPrice.show(),this.$originalPrice.addClass("dashed"),this.$footerDiscountPrice.show(),this.$footerOriginalPrice.addClass("dashed"),this.$subtitle.addClass("discount-bold")},updateUIForNoDiscount:function updateUIForNoDiscount(){this.$discountPrice.hide(),this.$originalPrice.removeClass("dashed"),this.$footerDiscountPrice.hide(),this.$footerOriginalPrice.removeClass("dashed"),this.$subtitle.removeClass("discount-bold")},setOriginalPrice:setDiscountPrice:function setDiscountPrice(e,t){this.$discountPrice.text(e),this.$footerDiscountPrice.text(e),this._setDiscountHighlight(t)},_setDiscountHighlight:function _setDiscountHighlight(e){0!==this.$discountHighlight.length&&(this.$discountHighlight.show(),this.$discountHighlight.find(".percentage-container").text(e+"%"))},_onCtaClicked:function _onCtaClicked(e){e.preventDefault(),Helpers.App.isGuestCheckoutExperimentActive()&&Service.GuestCheckout.getInstance().setForceSignup(!0);var t=Helpers.App.getSubscription();!1===t&&this.dispatch("cta:clicked"),!1===t.is_annual&&page.showSubscriptionModal()},updateTitle:function updateTitle(e){this.$title.text(e)},updateSubtitle:function updateSubtitle(e){this.$subtitle.text(e)},updateFooterHtml:function updateFooterHtml(e){this.$footerText.html(e)},updateCtaText:function updateCtaText(e){this.$startNowBtn.text(e),this.$footerStartNowBtn&&this.$footerStartNowBtn.text(e)}}}),Class(UI.SubscriptionCta,"SubscriptionCtaBlockController").inherits(Widget).includes(Translator,CurrencyLabelSetter)({TITLE:"Unlimited Subscription",SUBTITLE:"Unlimited Downloads",FROM:"From:",PER_MONTH:"/mo*",CTA_TEXT:"Start Now",CTA_TEXT_UNLIMITED:"Go Unlimited",MONTHLY_TITLE:"Monthly Subscription",DISCOUNT_SUBTITLE:"Limited time discount",YEARLY:"yearly",MONTHLY:"monthly",MONTHLY_CANCEL_FOOTER:"<p><span>*</span><strong>Cancel anytime.</strong> Unlimited subscription billed monthly in {{currency_label}}.</p>    <p style='font-size: 8.5px'>1 month minimum commitment if subscribers have downloaded any templates. </p>",ANNUAL_CANCEL_FOOTER:"<p><span>*</span><strong>Cancel anytime.</strong> Unlimited subscription billed yearly in {{currency_label}}.</p>    <p style='font-size: 8.5px'>1 month minimum commitment if subscribers have downloaded any templates. </p>",prototype:{monthlyCta:null,annualCta:null,_subscriptionCtaBlock:null,_isMonthlyPriceEnabled:!1,_planPricePromises:null,containerRef:null,forPricingPage:!1,init:function init(e){Widget.prototype.init.call(this,e),this.monthlyCta=e.monthlyCta,this.annualCta=e.annualCta,this.containerRef=e.container,this.forPricingPage?this._initCtaForPricingPage():(this._initCtaForFooter(),this._updateFooter()),this._updateUI(),this._bindings()},_bindings:function _bindings(){var e=this,t=Utils.bindFn(this);Helpers.CouponHelper.bind("coupon.validated",t(this._updateUI)),Helpers.CouponHelper.bind("coupon.removed",t(this._updateUI)),this._subscriptionCtaBlock.bind("cta:clicked",},_initCtaForFooter:function _initCtaForFooter(){this._subscriptionCtaBlock=new UI.SubscriptionCta.SubscriptionCtaBlock({title:this.constructor.TITLE,subtitle:this.constructor.SUBTITLE,fromText:this.constructor.FROM,ctaText:this.constructor.CTA_TEXT,perMonth:this.constructor.PER_MONTH}).render(this.containerRef||$(".subscription-cta-container"))},_initCtaForPricingPage:function _initCtaForPricingPage(){this._subscriptionCtaBlock=new UI.SubscriptionCta.SubscriptionCtaBlock({element:$(".subscription-container"),enableFooterCTA:!0})},updateCtaText:function updateCtaText(e){this._subscriptionCtaBlock.updateCtaText(e)},_shouldShowMonthlyPrice:function _shouldShowMonthlyPrice(){var e=Helpers.CouponHelper.isValid()||!1,t=e&&Helpers.CouponHelper.applyToPlan(Registry.Plans.PLAN_MONTHLY),i=e&&Helpers.CouponHelper.applyToPlan(Registry.Plans.PLAN_ANNUAL);t&&!i?(this._planPricePromises=Helpers.Price.monthlyPlan(),this._isMonthlyPriceEnabled=!0):(this._planPricePromises=Helpers.Price.annualPlan(),this._isMonthlyPriceEnabled=!1)},_updateUI:function _updateUI(){var s=this;this._shouldShowMonthlyPrice(),this._planPricePromises.price.then(function(n){var e=s._isMonthlyPriceEnabled?n:n/12;s._subscriptionCtaBlock.setOriginalPrice(s._formatPrice(e)),s._planPricePromises.priceWithDiscount.then(function(e){if(e<n){var t;s._subscriptionCtaBlock.updateUIForDiscount();var i=s._isMonthlyPriceEnabled?e:e/12;t="percent"===Helpers.CouponHelper.coupon.discount_type?Helpers.CouponHelper.coupon.discount_percent:parseInt((n-e)/n*100),s._subscriptionCtaBlock.setDiscountPrice(s._formatPrice(i),t),s._subscriptionCtaBlock.updateSubtitle(this.constructor.DISCOUNT_SUBTITLE)}else s._subscriptionCtaBlock.updateUIForNoDiscount()})}),this._isMonthlyPriceEnabled?(this._subscriptionCtaBlock.updateUIForMonthly(this.constructor.MONTHLY,this.constructor.YEARLY),this._subscriptionCtaBlock.updateTitle(this.constructor.MONTHLY_TITLE),this._subscriptionCtaBlock.updateSubtitle(this.constructor.DISCOUNT_SUBTITLE),this.dispatch("set:monthly:disclaimer")):(this._subscriptionCtaBlock.updateUIForAnnual(this.constructor.MONTHLY,this.constructor.YEARLY),this._subscriptionCtaBlock.updateTitle(this.constructor.TITLE),this._subscriptionCtaBlock.updateSubtitle(this.constructor.SUBTITLE),this.dispatch("set:annual:disclaimer"))},_formatPrice:function _formatPrice(e){return e=e.toFixed(2),e=window.currencyHelper.getSymbol(recurlyConfig.currency)+e},_updateFooter:function _updateFooter(){if(this._isMonthlyPriceEnabled)var e=this.constructor.MONTHLY_CANCEL_FOOTER;else e=this.constructor.ANNUAL_CANCEL_FOOTER;this._subscriptionCtaBlock.updateFooterHtml(e)}}}),Class(UI,"TriggeringAnimation").inherits(Widget).includes(BubblingSupport)({html:'<div class="modal triggering-animation fade" tabindex="-1" role="dialog" aria-labelledby="triggering-animation" aria-hidden="true">        <div class="modal-dialog">            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">                <span aria-hidden="true">\xd7</span>            </button>            <div class="modal-content">                <div class="modal-body">                    <div class="content">                        <object class="animation-svg" data=""></object>                    </div>                </div>            </div>        </div>    </div>',prototype:{animationContainer:null,animationObject:null,animationTime:3e3,className:"",init:function init(e){return Widget.prototype.init.call(this,e),this.animationContainer=this.getElement().find(".animation-svg"),this.animationContainer.attr("data",e.animationSource),this.animationObject=this.animationContainer[0],this.element.addClass(this.className),this._bindEvents(),this},_bindEvents:function _bindEvents(){var t=this;this.animationContainer.on("hidden.bs.modal",this.detach.bind(this)),this.animationObject.addEventListener("load",function(){var e=$(t.animationObject.contentDocument);e.ready(function(){P.delay(t.animationTime).then(t.deactivate.bind(t)),e.on("click",t.deactivate.bind(t))})})},detach:activate:function activate(e){e=void 0===e||e,this.element.modal({show:!0,backdrop:e})},deactivate:function deactivate(){this.element.modal("hide"),"function"==typeof this.animationCallback&&this.animationCallback(),Widget.prototype.deactivate.call(this)}}}),window.Controller={},Class(UI,"BottomContainerModal").inherits(Widget).includes(BubblingSupport)({elementClass:"bottom-container-modal",html:'        <div class="hide">            <div class="bottom-overlay"></div>            <div class="bottom-container"></div>        </div>',prototype:{init:function init(e){Widget.prototype.init.call(this,e),this._setUIElements(),this.setContent(e.content)},_setUIElements:function _setUIElements(){this.$bottomContainer=this.getElement().find(".bottom-container")},setContent:function setContent(e){this.$bottomContainer.html(e)},deactivate:function deactivate(){this.element.remove()},activate:function activate(){this.element.removeClass("hide").show()}}}),Class(UI,"CookieManagerModalView").inherits(Widget).includes(BubblingSupport)({elementClass:"cookie-manager-modal-view",html:'        <div class="cookie-manager-modal">            <div class="tabs">                <div class="tab active" data-type="manage">Cookie declaration</div>                <div class="tab" data-type="info">Cookies Policy</div>            </div>            <div class="checkbox-container">                <div class="checkbox-list">                    <div class="checkbox-wrapper active" data-category="strictly">                        <input type="checkbox" id="checkbox-strictly" name="strictly" disabled="disabled" />                        <svg width="13" height="11" viewBox="0 0 13 11" fill="none" xmlns="http://www.w3.org/2000/svg">                            <path d="M3.39545 8.01081L1.46076 6.09886C1.12614 5.76804 0.585591 5.76804 0.250967 6.09886C-0.0836558 6.42967 -0.0836558 6.96406 0.250967 7.29488L2.79485 9.80909C3.12947 10.1399 3.67001 10.1399 4.00464 9.80909L12.1396 1.77748C12.4742 1.44666 12.4742 0.91227 12.1396 0.581455C11.8049 0.25064 11.2644 0.25064 10.9298 0.581455L3.39545 8.01081Z" fill="#4A4A4B"/>                        </svg>                        <span class="mandatory-legend">Mandatory</span>                        <label class="strictly"></label>Strictly necessary                    </div>                    <div class="mobile-legend">                        Strictly necessary cookies help make a website usable by enabling basic functions like page navigation, website security and access to information that requires authentication.                    </div>                    <div class="checkbox-wrapper" data-category="preferences">                        <input type="checkbox" id="checkbox-preferences" name="preferences" checked="checked"/>                        <label for="checkbox-preferences"></label> Preferences                    </div>                    <div class="mobile-legend">                        These cookies enable storage of information that changes the way a website behaves or looks, like settings for your region.                    </div>                    <div class="checkbox-wrapper" data-category="statistics">                        <input type="checkbox" id="checkbox-statistics" name="statistics" checked="checked"/>                        <label for="checkbox-statistics"></label> Statistics                    </div>                    <div class="mobile-legend">                        Statistics cookies help us to understand how visitors interact with our websites by collecting and reporting information.                    </div>                    <div class="checkbox-wrapper" data-category="marketing">                        <input type="checkbox" id="checkbox-marketing" name="marketing" checked="checked" />                        <label for="checkbox-marketing"></label> Marketing                    </div>                    <div class="mobile-legend">                        Marketing cookies are used for tracking browsing activity and to customise and display ads that are relevant and engaging.                    </div>                </div>                <div class="info-container">                    <div class="title">                        Strictly necessary                    </div>                    <div class="description">                        Strictly necessary cookies help make a website usable by enabling basic functions like page navigation, website security and access to information that requires authentication.                    </div>                </div>            </div>            <div class="policy-container">                <div class="title">                    Cookies Privacy                </div>                <div class="description">                    When you visit any website, it may store or retrieve information on your browser, mostly in the form of cookies. This information might be about you, your preferences, or your device and is mostly used to make the site work as you expect it to. The information does not usually directly identify you, but it can give you a more personalized web experience. Because we respect your right your privacy, you can choose not to allow some types of cookies. Click on the different category headings in the previous tab to find out more and change our default settings. However, blocking some types of cookies may impact your experience of the site and the services we are able to offer.                </div>            </div>            <div class="confirm-button-container">                <button   button class="confirm-button">                Confirm & accept cookies                </button>            </div>        </div>',prototype:{cookiePolicyTexts:{strictly:{title:"Strictly necessary",description:"Strictly necessary cookies help make a website usable by enabling basic functions like page navigation, website security and access to information that requires authentication."},preferences:{title:"Preferences",description:"These cookies enable storage of information that changes the way a website behaves or looks, like settings for your region."},statistics:{title:"Statistics",description:"Statistics cookies help us to understand how visitors interact with our websites by collecting and reporting information."},marketing:{title:"Marketing",description:"Marketing cookies are used for tracking browsing activity and to customise and display ads that are relevant and engaging."}},cookiePreferences:{preferences:!0,statistics:!0,marketing:!0},init:function init(e){Widget.prototype.init.call(this,e),this._setUIElements(),this._bindings()},_setUIElements:function _setUIElements(){this.$confirmButton=this.element.find(".confirm-button"),this.$checkboxes=this.element.find('input[type="checkbox"]'),this.$policyContainer=this.element.find(".policy-container"),this.$checkboxContainer=this.element.find(".checkbox-container"),this.$checkboxWrapper=this.$checkboxContainer.find(".checkbox-wrapper"),this.$infoContainer=this.$checkboxContainer.find(".info-container"),this.$infoTitle=this.$infoContainer.find(".title"),this.$infoDescription=this.$infoContainer.find(".description"),this.$tab=this.element.find(".tab")},_bindings:function _bindings(){var t=this;t.$checkboxes.on("click",function(e){t.cookiePreferences[e.target.name]=this.checked}),t.$confirmButton.on("click",function(){Helpers.GlobalEventTracker.track("cookieManager:confirm:clicked");var e=JSON.stringify(t.cookiePreferences);Helpers.GlobalEventTracker.track("cookieManager:preferences:toggle",{label:t.cookiePreferences.preferences?"Enabled":"Disabled"}),Helpers.GlobalEventTracker.track("cookieManager:statistics:toggle",{label:t.cookiePreferences.statistics?"Enabled":"Disabled"}),Helpers.GlobalEventTracker.track("cookieManager:marketing:toggle",{label:t.cookiePreferences.marketing?"Enabled":"Disabled"}),t.dispatch("cookieManager.save",{cookiePreferences:e})}),t.$checkboxWrapper.on("click",function(){t.$checkboxWrapper.removeClass("active"),$(this).addClass("active"),t._updateTexts($(this).data("category"))}),t.$tab.on("click",function(){if(t.$tab.removeClass("active"),$(this).addClass("active"),"info"===$(this).data("type"))return Helpers.GlobalEventTracker.track("cookieManager:cookiePolicy:clicked"),t.$checkboxContainer.hide(),void t.$policyContainer.css("display","flex");t.$policyContainer.hide(),t.$checkboxContainer.css("display","flex")})},activatePolicyTab:_updateTexts:function _updateTexts(e){this.$infoTitle.html(this.cookiePolicyTexts[e].title),this.$infoDescription.html(this.cookiePolicyTexts[e].description)}}}),Class(UI,"CookieConsentMessageView").inherits(Widget).includes(BubblingSupport)({html:'            <div class="cookie-consent-container">                <h3 class="bottom-title">Our website uses cookies \ud83c\udf6a</h3>                <div class="bottom-description">We rely on cookies to boost Placeit performance, such as play videos, display images and remember your preferences and to analyze our website traffic. But never without your consent. <br />Learn more about this reading <a href="javascript:;" class="view-policy-button" data-action="view_policy">our cookies policy</a></div>                <div class="buttons-container">                    <button class="manage-button" data-action="manage">Manage cookies</button>                    <button class="accept-all-button" data-action="accept">Accept all cookies</button>                </div>            </div>',prototype:{init:function init(e){Widget.prototype.init.call(this,e),this._setUIElements(),this._bindings()},_setUIElements:function _setUIElements(){this.$cookieConsentContainer=this.element,this.$manageButton=this.$cookieConsentContainer.find(".manage-button"),this.$viewPolicyButton=this.$cookieConsentContainer.find(".view-policy-button"),this.$acceptAllButton=this.$cookieConsentContainer.find(".accept-all-button")},_bindings:function _bindings(){var e=this,t=Utils.bindFn(e);this.$manageButton.on("click",t(e._clickHandler)),this.$acceptAllButton.on("click",t(e._clickHandler)),this.$viewPolicyButton.on("click",t(e._clickHandler))},_clickHandler:function _clickHandler(e){this.dispatch("cookieConsentMessageView.click",{action:$(e.target).attr("data-action")})}}}),Class(Controller,"CookieManagerController").includes(NodeSupport,CustomEventSupport,BubblingSupport)({COOKIE_DOMAIN:"."+window.location.hostname,COOKIE_EXPIRE_DAYS:3e3,ACTION_VIEW_POLICY:"view_policy",prototype:{_bottomContainerModal:null,_cookieManagerModalView:null,_cookieConsentMessageView:null,_modalBody:null,init:function init(e){return Widget.prototype.init.call(this,e),this._bottomContainerModal=e.bottomContainerModal,this._cookieManagerModalView=e.cookieManagerModalView,this._cookieConsentMessageView=e.cookieConsentMessageView,this._buildSimpleModal(e),this._bindSimpleModalEvents(),this._buildModalView(),this._bindModalViewEvents(),this._bottomContainerModal.render($("body")),this._bindings(),this},_buildSimpleModal:function _buildSimpleModal(e){this._modal=new UI.SimpleModal({name:e.name,cssClass:e.cssClass||"cookies-manager-modal",hasHeader:!0,headerContent:"Manage cookies",width:740}),!1===Boolean(this._modal)&&reject("Error create SimpleModal"),this._modal.setHeaderContent("Manage cookies"),this._modal.setContent(""),this._modal.addCloseButton(),this._modalBody=this._modal.getBodyContainer()},_bindSimpleModalEvents:function _bindSimpleModalEvents(){var e=this;e._modal.getElement().bind("show.bs.modal",function(){e.dispatch("manageCookiesModal.shown")})},_buildModalView:_bindModalViewEvents:function _bindModalViewEvents(){this.cookieManagerModalView.bind("cookieManager.save",Utils.bindFn(this)(this._saveHandler))},_saveHandler:function _saveHandler(e){$.cookie("cookie_preferences",e.data.cookiePreferences,{path:"/",expires:this.getExpireDate(),domain:this.constructor.COOKIE_DOMAIN}),CookiesUtils.checkPreferences(),!1===CookiesUtils.getMarketingSetting()&&this._disableMKTEmailNotifications(),this._modal.deactivate()},_disableMKTEmailNotifications:function _disableMKTEmailNotifications(){var e={download_email_notifications:!1,placeit_promotion_notifications:!1,product_update_notifications:!1,feedback_request_notifications:!1},t={method:"POST",url:"https://"+location.hostname+"/email_lists/update_notifications",dataType:"json",contentType:"application/json",data:JSON.stringify({user:e})};P.ajax(t).then(Utils.bindFn(this)(this._emailNotificationsDisabledHandler))},_emailNotificationsDisabledHandler:function _emailNotificationsDisabledHandler(){this.dispatch("MKTEmailNotifications.disabled")},getExpireDate:function getExpireDate(){return new Date(Date.now()+864e5*this.constructor.COOKIE_EXPIRE_DAYS)},appendChildToModal:function appendChildToModal(e){this._modal.appendChild(e).render(this._modalBody)},_bindings:function _bindings(){this._bottomContainerModal.bind("cookieConsentMessageView.click",Utils.bindFn(this)(this._clickConsentButtonHandler)),this._cookieConsentMessageView.bind("cookieConsentMessageView.click",Utils.bindFn(this)(this._cookieConsentClickDispatch))},removeCookie:function removeCookie(e){if(!1===Boolean(e))throw new Error("Cookie name invalid");$.cookie(e," ",{path:"/",expires:new Date(0),domain:this.constructor.COOKIE_DOMAIN})},_clickConsentButtonHandler:function _clickConsentButtonHandler(e){var t=this,i=e.data.action;"accept"!==i?(Helpers.GlobalEventTracker.track("cookieManager:modal:opens"),t._bottomContainerModal.deactivate(),t.bind("manageCookiesModal.shown",function(){i===t.constructor.ACTION_VIEW_POLICY&&(Helpers.GlobalEventTracker.track("cookieManager:cookiePolicy:clicked"),t._cookieManagerModalView.activatePolicyTab())}),t._modal.activate()):t._acceptAllCookiesHandler()},_acceptAllCookiesHandler:function _acceptAllCookiesHandler(){Helpers.GlobalEventTracker.track("cookieManager:acceptAll:clicked"),$.cookie("cookie_preferences",'{"preferences":true,"statistics":true,"marketing":true}',{path:"/",expires:this.getExpireDate(),domain:this.constructor.COOKIE_DOMAIN}),this._bottomContainerModal.deactivate()},_cookieConsentClickDispatch:function _cookieConsentClickDispatch(e){this._bottomContainerModal.dispatch(
"cookieConsentMessageView.click",{action:e.data.action})},activateBottomModal:function activateBottomModal(){this._bottomContainerModal.activate()},overrideMarketingTools:function overrideMarketingTools(){Boolean(window.Wishpond)&&Boolean(window.Wishpond.perform)&&(window.Wishpond.perform=function(){})}}}),Class(UI,"DimensionsInfo").inherits(Widget)({html:'<div class="dimensions-info-container">            <div class="dimensions-label"></div>            <span class="p-icon dimensions-icon hidden"></div>        </div>',useIcon:!1,prototype:{iconClass:"ic-info-circle",customLabel:null,init:function init(e){Widget.prototype.init.call(this,e),this.$label=this.element.find(".dimensions-label"),this.$icon=this.element.find(".dimensions-icon"),e.useIcon&&(this.element.addClass("using-dimensions-icon"),this.$icon.addClass(this.iconClass).removeClass("hidden")),e.customLabel&&this.setCustomLabel(e.customLabel),e.dimensions&&this.setDimensions(e.dimensions)},setCustomLabel:function setCustomLabel(e){this.customLabel&&(this.$label.html(""),this.removeChild(this.customLabel)),this.customLabel=this.appendChild(e).render(this.$label),this.useIcon&&this._updatePopover()},setDimensions:function setDimensions(e){this.$label.html('                <span class="dimensions-label-header">Current dimensions:</span>                <span class="dimensions-label-value"></span>');var t=e.width+" x "+e.height+" px";this.$label.find(".dimensions-label-value").text(t),this.useIcon&&this._updatePopover()},_updatePopover:function _updatePopover(){this.$icon.popover("destroy"),this.$icon.popover({placement:"bottom",container:this.$icon,trigger:"click",content:this.$label,html:!0})}}}),UI.Campaign={Notification:{}},NotificationEventHandler={},Class(UI.Campaign,"HeaderstripController").inherits(Widget)({COOKIE:"app-headerstrip-closed",CAMPAIGN_CODE:"app-release-2023",shouldEnable:function shouldEnable(){if(window.isPastDue&&"B"==Helpers.App.isPaymentInfoReminderExpActive())return!1;var e=!0===Helpers.App.isActiveCampaign(UI.Campaign.HeaderstripController.CAMPAIGN_CODE),t=""===Helpers.App.getCookie(UI.Campaign.HeaderstripController.COOKIE);return e&&t},initialize:function initialize(){new UI.Campaign.HeaderstripController},prototype:{headerStripWidget:null,init:function init(){Widget.prototype.init.call(this),this.headerStripWidget=new UI.Campaign.HeaderstripWidget({ctaUrl:"/app"}),this.headerStripWidget.render($(".campaign-headerstrip-container")),$("body").addClass("campaign-headerstrip-visible"),this.bindEvents()},bindEvents:function bindEvents(){this.headerStripWidget.bind("campaign:headerstrip:ctaButtonClick",this.onCtaButtonClick.bind(this)),this.headerStripWidget.bind("campaign:headerstrip:closeButtonClick",this.onCloseButtonClick.bind(this))},onCtaButtonClick:function onCtaButtonClick(){Helpers.GlobalEventTracker.campaignHeaderstripEvent("Clicked")},onCloseButtonClick:function onCloseButtonClick(){this.headerStripWidget.hide(),$.cookie(this.constructor.COOKIE,!0),Helpers.GlobalEventTracker.campaignHeaderstripEvent("Closed"),$("body").removeClass("campaign-headerstrip-visible")}}}),Class(UI.Campaign,"HeaderstripWidget").inherits(Widget)({html:'        <header class="campaign-headerstrip">             <img class="campaign-headerstrip-bg-image img-left"                src="https://placeitmarketing.s3.amazonaws.com/public/campaigns2023/app-release/image-left.png"                alt="Left side"            />            <img class="campaign-headerstrip-bg-image img-right"                src="https://placeitmarketing.s3.amazonaws.com/public/campaigns2023/app-release/image-right.png"                alt="Right side"            />            <div class="campaign-headerstrip-content">                <a class="campaign-headerstrip-cta" type="button">                    <div class="campaign-headerstrip-image">                        <img src="https://placeitmarketing.s3.amazonaws.com/public/campaigns2023/app-release/placeitAppIcon.png" alt="App Logo">                    </div>                    <div class="campaign-headerstrip-text">                        <p>                            Create on the Go:                        </p>                        <p class="title">                            The Placeit App Is Here!                        </p>                        <svg viewBox="0 0 6 8" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="campaign-headerstrip-arrow">                            <path d="M5.26831 4L0.0183103 7.03109L0.0183105 0.968911L5.26831 4Z"></path>                        </svg>                    </div>                </a>            </div>            <button type="button" class="campaign-headerstrip-close-button">                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">                    <path fill-rule="evenodd" clip-rule="evenodd" d="M17.6485 6.35147C17.1799 5.88284 16.4201 5.88284 15.9515 6.35147L6.35147 15.9515C5.88284 16.4201 5.88284 17.1799 6.35147 17.6485C6.8201 18.1172 7.5799 18.1172 8.04853 17.6485L17.6485 8.04853C18.1172 7.5799 18.1172 6.8201 17.6485 6.35147Z"></path>                    <path fill-rule="evenodd" clip-rule="evenodd" d="M6.35147 6.35147C6.8201 5.88284 7.5799 5.88284 8.04853 6.35147L17.6485 15.9515C18.1172 16.4201 18.1172 17.1799 17.6485 17.6485C17.1799 18.1172 16.4201 18.1172 15.9515 17.6485L6.35147 8.04853C5.88284 7.5799 5.88284 6.8201 6.35147 6.35147Z"></path>                </svg>            </button>        </header>     ',elementClass:"campaign-headerstrip",prototype:{closeButton:null,ctaButton:null,init:function init(e){Widget.prototype.init.call(this,e),this.closeButton=this.element.find(".campaign-headerstrip-close-button"),this.ctaButton=this.element.find(".campaign-headerstrip-cta"),this.ctaButton.attr("href",e.ctaUrl),this.bindEvents()},bindEvents:function bindEvents(){this.closeButton.one("click",this.onCloseButtonClick.bind(this)),this.ctaButton.click(this.onCtaButtonClick.bind(this))},onCtaButtonClick:function onCtaButtonClick(){this.dispatch("campaign:headerstrip:ctaButtonClick")},onCloseButtonClick:function onCloseButtonClick(){this.dispatch("campaign:headerstrip:closeButtonClick")}}}),Class(UI.Campaign,"HolidayRetentionNotification").inherits(UI.Campaign.Notification)({BODY_CONTENT:'        <div class="notification-content-container">            <p class="notification-content-text">                <strong>Subscription savings!</strong>                Level up your subscription to annual for only $80.31            </p>            <button class="notification-confirm-button">Upgrade to annual</button>        </div>        <button type="button" class="close" data-dismiss="modal" aria-label="Close">            <img src="/assets/icons/ic-close-dark.svg">        </button>    ',SUCCESS_MESSAGE:"        <strong>Way to go!</strong>        You\u2019ve leveled up to 365 days of limitless templates    ",PROCESSING_MESSAGE:"<strong>Processing...</strong>",ERROR_MESSAGE:"<strong>Oops! Something went wrong</strong>Refresh and try again later."}),Class("HolidayRetentionNotificationEventHandler").inherits(NotificationEventHandler)({prototype:{init:function init(){NotificationEventHandler.prototype.init.call(this),this.eventCampaign="retention",this.eventCoupon="retentionNot",this.eventLabel="holidayretention24"},confirm:function eCf(){NotificationEventHandler.prototype.confirm.call(this);var e=Utils.bindFn(this);Helpers.Holiday.applyRetentionMonthlyToAnnualCoupon().then(e(this._onConfirmSuccess))["catch"](e(this._onConfirmError))},success:function success(){Helpers.GlobalEventTracker.campaignCouponEvent({campaign:this.eventCoupon,eventName:"Success",label:this.eventLabel}),P.delay(3e3).then(function(){window.location.reload()})},error:function error(){Helpers.GlobalEventTracker.campaignCouponEvent({campaign:this.eventCoupon,eventName:"Error",label:this.eventLabel})}}}),Class(UI.Campaign,"Notification").inherits(Widget)({BODY_CONTENT:'        <div class="notification-image-container">            <img src="" class="notification-image">        </div>        <div class="notification-content-container">            <p class="notification-content-text"></p>            <button class="notification-confirm-button">Confirm</button>        </div>        <button type="button" class="close" data-dismiss="modal" aria-label="Close">            <img src="/assets/icons/ic-clear.svg">        </button>    ',SUCCESS_MESSAGE:"<strong>Congratulations!</strong><br />Your subscription was upgraded to annual.",PROCESSING_MESSAGE:"Processing...",ERROR_MESSAGE:"Oops! Something went wrong, refresh and try again later.",prototype:{element:null,confirmButton:null,textContainer:null,closeButton:null,init:function init(e){Widget.prototype.init.call(this,e),this.appendChild(new UI.SimpleModal({name:"notification",hasHeader:!1,bodyContent:this.constructor.BODY_CONTENT,cssClass:this.cssClass})),this.notification.render(this.element),this.closeButton=this.notification.closeBtn,this.confirmButton=this.notification.getBodyContainer().find(".notification-confirm-button"),this.textContainer=this.notification.getBodyContainer().find(".notification-content-text"),this._bindEvents(),this.notification.show()},_bindEvents:function _bindEvents(){var e=Utils.bindFn(this);this.closeButton.on("click",e(this._onClose)),this.confirmButton.on("click",e(this._onConfirm))},setTextContent:function setTextContent(e){this.textContainer.html(e)},setProcessingState:function setProcessingState(){this.setTextContent(this.constructor.PROCESSING_MESSAGE),this.hideConfirmButton()},setSuccessState:function setSuccessState(){this.setTextContent(this.constructor.SUCCESS_MESSAGE),this.hideConfirmButton()},setErrorState:hideConfirmButton:function hideConfirmButton(){this.confirmButton.hide()},_onClose:function _onClose(){this.dispatch("notification.close")},_onConfirm:function _onConfirm(){this.dispatch("notification.confirm")}}}),Class(UI.Campaign,"NotificationController").includes(CustomEventSupport,NodeSupport,BubblingSupport)({prototype:{notification:null,eventHandler:null,init:function init(e){this.name=e.name,this.appendChild(e.notification),this.appendChild(e.eventHandler),this._bindEvents()},_bindEvents:function _bindEvents(){var e=Utils.bindFn(this);this.notification.bind("notification.close",e(this._onClose)),this.notification.bind("notification.confirm",e(this._onConfirm)),this.eventHandler.bind("confirm.success",e(this._onConfirmSuccess)),this.eventHandler.bind("confirm.error",e(this._onConfirmError))},_onClose:function _onClose(){this.eventHandler.close(),this.notification.hide()},_onConfirm:function _onConfirm(){this.eventHandler.confirm(),this.notification.setProcessingState()},_onConfirmSuccess:function _onConfirmSuccess(){this.eventHandler.success(),this.notification.setSuccessState()},_onConfirmError:function _onConfirmError(){this.eventHandler.error(),this.notification.setErrorState()}}}),Class("NotificationEventHandler").includes(CustomEventSupport,NodeSupport,BubblingSupport)({prototype:{init:close:function close(){Helpers.GlobalEventTracker.campaignNotificationEvent({campaign:this.eventCampaign,eventName:"Closed",label:this.eventLabel})},confirm:function lCf(){Helpers.GlobalEventTracker.campaignNotificationEvent({campaign:this.eventCampaign,eventName:"Clicked",label:this.eventLabel})},_onConfirmSuccess:function _onConfirmSuccess(){this.dispatch("confirm.success")},_onConfirmError:function _onConfirmError(){this.dispatch("confirm.error")},success:function success(){Helpers.GlobalEventTracker.campaignCouponEvent({campaign:this.eventCampaign,eventName:"Success",label:this.eventLabel}),P.delay(3e3).then(function(){window.location.reload()})},error:function error(){Helpers.GlobalEventTracker.campaignCouponEvent({campaign:this.eventCampaign,eventName:"Error",label:this.eventLabel})}}}),Class(UI,"EditingSessionReminder").inherits(Widget)({html:'<div>                <div class="editing-reminder-body">                    <img class="thumbnail">                    <span class="close-button"></span>                </div>                <div class="editing-reminder-footer">                    <span class="footer-text">Continue where you left off</span>                    <a class="edit-btn">Edit</a>                </div>          </div>',elementClass:"editing-reminder",prototype:{init:function(e){Widget.prototype.init.call(this,e),this.$reminderBody=this.element.find(".editing-reminder-body"),this.$thumbnail=this.$reminderBody.find(".thumbnail"),this.$editBtn=this.element.find(".edit-btn"),this.$closeButton=this.$reminderBody.find(".close-button"),e.data&&(this.$editBtn.attr("href",e.data.urlParams),this.$thumbnail.attr("src",e.data.previewImgUrl)),Helpers.GlobalEventTracker.track("continueLeft:modal:opens"),this._addReminderBindings()},_addReminderBindings:function _addReminderBindings(){var e=Utils.bindFn(this);this.$closeButton.bind("click",e(this._handleClose)),this.$editBtn.bind("click",e(this._editEvent))},_editEvent:function _editEvent(){Helpers.GlobalEventTracker.track("continueLeft:editCTA:clicked")},_handleClose:function _handleClose(){this.hide();var e=Date.now();Helpers.GlobalEventTracker.track("continueLeft:close:clicked"),localStorage.removeItem("draftStageData"),localStorage.setItem("lastClosedReminderTimestamp",e.toString())}}}),Class(UI,"FolderWarning").inherits(Widget)({html:'<div>                <div class="warning-ic"></div>                <span class="title"></span>                <span class="subtitle"></span>                <span class="sub-question"></span>                <div class="button-container">                    <a id="confirmCancellation" href="/cancel_subscription" data-method="delete" rel="nofollow">Cancel Subscription</a>                    <a id="backToAccount" href="/my_placeit" class="button">Keep Subscription</a>                </div>            </div>',elementClass:"folder-warning",textContent:{variantB:{title:"Please be aware",subtitle:"If you choose to cancel, you will lose access to all your folders and the cool templates they contain.",subQuestion:"Are you sure you want to cancel?"},variantC:{title:"Warning: Account Deletion",subtitle:"This action will permanently remove your access to all the Premium templates that you've edited.",subQuestion:"Proceed with cancellation?"}},prototype:{init:function init(e){if(Widget.prototype.init.call(this,e),this.titleElement=this.element.find(".title"),this.subtitleElement=this.element.find(".subtitle"),this.subtitleQuestion=this.element.find(".sub-question"),this.cancelButton=this.element.find("#confirmCancellation"),this.keepSubButton=this.element.find("#backToAccount"),this.onCancelCallback=e.onCancelCallback,e.folderSmokeTestStatus&&e.folderSmokeTestStatus.active){var t="variant"+e.folderSmokeTestStatus.variant,i=this.constructor.textContent[t];i&&(this.titleElement.text(i.title),this.subtitleElement.text(i.subtitle),this.subtitleQuestion.text(i.subQuestion))}this.addFolderWarningEvents()},addFolderWarningEvents:function addFolderWarningEvents(){var e=Utils.bindFn(this),t=this;this.cancelButton.bind("click",e(t._cancelButtonHandler)),this.keepSubButton.bind("click",e(t._keepSubscriptionClickHandler))},_cancelButtonHandler:function _cancelButtonHandler(e){var t=this;e.preventDefault(),"function"==typeof t.onCancelCallback&&(Helpers.GlobalEventTracker.track("confirmCancel:cancelsubs:clicked"),t.onCancelCallback(),window.location.href=t.cancelButton.attr("href"))},_keepSubscriptionClickHandler:}),Class(UI,"PurchaseGuestOverlay").inherits(UI.MultiplePurchaseOverlay)({html:'    <div class="modal purchase-overlay guest-checkout multiple fade" id="purchaseOverlay" tabindex="-1" role="dialog" aria-labelledby="purchaseOverlayLabel" aria-hidden="true">    <button type="button" class="close m-close" data-dismiss="modal" aria-hidden="true">    <span aria-hidden="true">\xd7</span>    </button>    <div class="server_errors none mobile"></div>    <div class="modal-dialog">    <div class="server_errors none"></div>    <div class="modal-content">    <div class="modal-body">        <div class="bg-spinner hide relative"></div>        <div class="pl-spinner-primary-xl relative hide"></div>        <div class="form-container">            <div class="guest-email-field"></div>            <div class="payment-info-title">Payment Information</div>            <form class="recurly">            <div class="subscription-info" style="display: none;"></div>            <div class="payment_method multiple">                <div class="payment_option saved_card_option selected">                <input type="radio" name="payment_method">                <label></label>                <div class="card_logo"></div>                </div>                <div class="payment_option card_option">                <input type="radio" name="payment_method" checked>                <label></label>                <div class="accepted_cards">                <div class="card visa">Visa</div>                <div class="card mastercard">MasterCard</div>                <div class="card discover">Discover</div>                <div class="card american_express">American Express</div>                </div>                </div>                <div class="payment_option paypal_option">                <input type="radio" name="payment_method">                <label></label>                <div class="logo"></div>                </div>            </div>            <div class="saved-card-container">            <span>Use saved card</span>            <div class="saved-card-info">            <div class="card"></div>            <span>Ending with ****</span>            <div class="card-last-four"></div>            </div>            </div>            <div class="form-widget-container"></div>            <div class="paypal" style="display: none;">            <div class="paypal_message">            You will be taken to PayPal to authorize a billing agreement.<br><br>Customers with an EU or Australian Paypal billing address will have additional VAT or GST charges.<br><br><strong>Please make sure pop-ups aren\'t blocked.</strong>            </div>            </div>            <div class="footer">            <button id="saved_card" type="submit" class="button primary">            <span> Purchase </span>            </button>            <button id="credit_card" type="submit" class="button primary">            <span> Purchase </span>            </button>            <button id="paypal" style="display: none;" type="button" class="button primary">            <span> Pay with PayPal </span>            </button>            </div>            </form>        </div>        <div class="information-container">            <p class="information-title">            Order Summary            <span class="view-order-details">view order details</span>            <span class="view-order-details opened">hide order details</span>            <span class="view-order-total-items"></span>            </p>            <div class="information-general-info">            <div class="thumbnails-list"></div>            <p class="information-title"></p>            <p class="information-title subtitle"></p>            </div>            <div class="subscriptionp-type-selector">            <div class="plan-annual inline-label">            <input type="radio" name="plan-annual">            <label></label>            <p>Annual (<span class="amount-price">$7.47</span>/mo<span class="disclaimer">*</span>) <span class="label">Save 50%</span></p>            </div>            <div class="plan-monthly inline-label">            <input type="radio" name="plan-monthly">            <label></label>            <p>Monthly (<span class="amount-price">$14.95</span>/mo<span class="disclaimer">*</span>)</p>            </div>            </div>            <div class="information-amount-info">            <div class="amount price-section">            <p class="amount-text"></p>            <div class="amount-container">            <p class="amount-price"></p>            <p class="disclaimer price"></p><p class="disclaimer">&nbsp;per month)</p>            </div>            </div>            <div class="amount discount-section">            <p class="amount-text"></p>            <div class="amount-container">            <p class="amount-price"></p>            <p class="disclaimer price"></p><p class="disclaimer">&nbsp;per month)</p>            </div>            </div>            <hr>            <div class="amount subtotal-section">            <p class="amount-text">Subtotal</p>            <p class="amount-price">0</p>            </div>            <div class="amount vat-section">            <p class="amount-text"></p>            <div class="amount-container">            <p class="amount-price"></p>            <p class="disclaimer price"></p><p class="disclaimer">&nbsp;per month)</p>            </div>            </div>            <div class="amount total-section">            <div class="amount-container">                <p class="amount-text total"></p>                <p class="disclaimer"></p>            </div>            <div class="amount-container">            <p class="amount-price"></p>            <p class="disclaimer">(Billed Today)</p>            </div>            </div>            </div>            <div class="resume-info"></div>            <div class="secure-info">            <img src="/assets/icons/lock-new.svg">            <div class="secure-info-disclaimer">            <p class="secure-info-header">Secure Payments</p>            <p>All transaction are processed</p>            <p>by our secure technology.</p>            </div>            </div>        </div>        </div>        </div>        <div class="guest-disclaimer">            Envato collects and uses personal data in accordance with our <a href="https://www.envato.com/privacy/" target="_blank">Privacy Policy</a>.<br/>            By typing your email, you agree to our <a href="https://placeit.net/terms-of-use" target="_blank">Terms and Conditions</a>.        </div>    </div>    </div>    ',PAYPAL_LABEL:{SUBSCRIPTION:"Continue with Paypal and subscribe",PURCHASE:"Pay with PayPal"},SLOW_CONNECTION_ALERT:{time:4e4,message:"This is taking longer than expected, check your internet connection and try again"},NOTIFICATION_LINK_TO_LOGIN_SUBSCRIBER:'<div>You already have a Subscription, <a href="#" onclick="event.preventDefault();$(\'.guest-checkout .close\').click();page.appNavBar.ssoModal.activate(UI.SsoModal.TAB_LOGIN);">log in to access your account.</a></div>',prototype:{allow_guest:!1,allow_create:!0,init:function init(e){Widget.prototype.init.call(this,e),UI.MultiplePurchaseOverlay.prototype.init.call(this,e);var t=Utils.bindFn(this);this.$bgSpinner=this.element.find(".bg-spinner"),this.$spinner=this.element.find(".pl-spinner-primary-xl"),this.$paymentInfoTitle=this.element.find(".payment-info-title"),this.$guestEmailFieldContainer=this.getElement().find(".guest-email-field"),this.guestEmailField=new UI.GuestEmailField({name:"guestEmailField"}),this.guestEmailField.bind("change",t(this._guestEmailChangeHandler)),this.guestEmailField.bind("inputClick",t(this._guestEmailInputClickHandler)),this.guestEmailField.bind("loginClick",t(this._guestEmailLoginClickHandler)),this.guestEmailField.bind("editClick",t(this._guestEmailEditClickHandler)),this.guestEmailField.render(this.$guestEmailFieldContainer),this.$creditCardSubmitBtn.off("mousedown"),this.$creditCardSubmitBtn.on("mousedown",this._clickCreditCardButtonHandler.bind(this)),this._service=new Service.GuestCheckout.getInstance},_guestEmailLoginClickHandler:function _guestEmailLoginClickHandler(){if(Service.MultiplePurchase.getInstance()._saveSelectedStagesInCookie(),Service.GuestCheckout.getInstance().setNextLoginActionWithGuestCheckout(),this.deactivate(),page&&page.appNavBar&&page.appNavBar.ssoModal){var e=page.appNavBar.ssoModal.tabbedModal.modal;e.find(".guest-checkout-back-btn-container").removeClass("hide"),e.addClass("guest-checkout-sso-modal")}Helpers.GlobalEventTracker.track("createAccount:ClickedButton",{session:Helpers.App.getTrackerId(),user_id:Helpers.App.getUser().id,label:"guestcheckout"}),page.appNavBar.ssoModal.activate(UI.SsoModal.TAB_SIGNUP)},_guestEmailEditClickHandler:function _guestEmailEditClickHandler(){this.hideServerErrors()},_guestEmailInputClickHandler:function _guestEmailInputClickHandler(){this._enableForm()},_guestEmailChangeHandler:function _guestEmailChangeHandler(e){var t=Utils.bindFn(this);this.hideServerErrors(),Service.GuestCheckout.getInstance().setEmail(e.data.email),this.billingForm.setEmail(e.data.email),this._service.validateGuest({email:e.data.email}).then(t(this._validateGuestSuccessHandler))["catch"](t(this._validateGuestErrorHandler))},_validateGuestSuccessHandler:function _validateGuestSuccessHandler(e){var t=Service.GuestCheckout.getInstance().getGuestEmail();if(Helpers.GlobalEventTracker.ssoTrack("signup.emailValidationStarted",{error:!1,user:t,message:"Email validation started: "+t,label:"guestcheckout"}),this.allow_guest=e.allow_guest,this.allow_create=e.allow_create,Service.GuestCheckout.getInstance().setCanCreateGuestPassword(e.allow_create),!1===e.allow_guest)return this._disableForm(),Service.MultiplePurchase.getInstance()._saveSelectedStagesInCookie(),void this.displayServerWarnings(this.constructor.NOTIFICATION_LINK_TO_LOGIN_SUBSCRIBER);this.$payPalSubmitBtn.removeClass("disabled")},_disableForm:function _disableForm(){this.$billingForm.addClass("disabled"),this.$informationContainer.addClass("disabled"),this.$paymentInfoTitle.addClass("disabled"),this.billingForm.disableForm(),document.activeElement&&document.activeElement.blur()},_enableForm:function _enableForm(){this.$billingForm.removeClass("disabled"),this.$informationContainer.removeClass("disabled"),this.$paymentInfoTitle.removeClass("disabled"),this.$bgSpinner.addClass("hide"),this.$spinner.addClass("hide"),this.billingForm.enableForm()},_validateGuestErrorHandler:function _validateGuestErrorHandler(e){e.message&&"timeout"===e.message&&this._showSlowConnectionAlert(),this.dispatch("validateGuest.error",{error:e}),Helpers.GlobalEventTracker.ssoTrack("signup.emailValidationError",{error:!0,user:Service.GuestCheckout.getInstance().getGuestEmail(),message:"Email validation error",response:JSON.stringify(e),label:"guestcheckout"})},_showSlowConnectionAlert:function _showSlowConnectionAlert(){new UI.Notification({}).alert(this.SLOW_CONNECTION_ALERT.message).render($("body"),!0)},_modifyBillingInfoForm:function _modifyBillingInfoForm(){Helpers.App.isMobile()&&this.$informationContainer.toggleClass("active")},_paypalClickHandler:function _paypalClickHandler(){!1===Boolean(this.guestEmailField.getEmail().trim())||this.guestEmailField.hasError()?this.guestEmailField.showError():(this.purchaseRecord.ajaxParams.email_guest=this.guestEmailField.getEmail(),this.allow_guest&&(this.purchaseRecord.ajaxParams.is_guest=!0),UI.PurchaseOverlay.prototype._paypalClickHandler.call(this))},_clickCreditCardButtonHandler:function _clickCreditCardButtonHandler(){!1===Boolean(this.guestEmailField.getEmail().trim())||this.guestEmailField.hasError()?this.guestEmailField.showError():(this.purchaseRecord.ajaxParams.email_guest=this.guestEmailField.getEmail(),this.allow_guest&&(this.purchaseRecord.ajaxParams.is_guest=!0),"paypal"===this.currentPaymentMethod?UI.MultiplePurchaseOverlay.prototype._handlePaypalSubmission.call(this):UI.MultiplePurchaseOverlay.prototype._submitEventHandler.call(this))},_updatePurchaseButtonText:function _updatePurchaseButtonText(){this.$creditCardSubmitBtn.html(this.constructor.SUBSCRIPTION.SINGLE_PURCHASE_COPY),this.$payPalSubmitBtn.html(this.constructor.PAYPAL_LABEL.PURCHASE),this.paymentType===this.constructor.TYPES.SUBSCRIPTION&&(this.$creditCardSubmitBtn.html(this.constructor.SUBSCRIPTION.FORM_BUTTON_LABEL),this.$payPalSubmitBtn.html(this.constructor.PAYPAL_LABEL.SUBSCRIPTION))},activate:function activate(){return this._updatePurchaseButtonText(),UI.PurchaseOverlay.prototype.activate.call(this),this}}}),Class(Service,"GuestCheckout").includes(CustomEventSupport,BubblingSupport)({_instance:null,DELAYED_TIMEOUT:6e4,VALIDATE_GUEST_API_URL:"/sso/validate_guest",_showSignup:!1,_pendingShowGuestCheckout:!1,getInstance:function getInstance(){return null===Service.GuestCheckout._instance&&(Service.GuestCheckout._instance=new Service.GuestCheckout),Service.GuestCheckout._instance},prototype:{guestEmail:null,guestToken:null,allowCreate:null,previousCheckoutTypeOpened:null,_submitedFromGuestCheckout:null,validateGuest:function validateGuest(e){var t=this,i={url:t.constructor.VALIDATE_GUEST_API_URL,type:"post",data:JSON.stringify(e),contentType:"application/json",dataType:"json"};return Promise.race([P.ajax(i),P.timeout(t.constructor.DELAYED_TIMEOUT)])},getGuestEmail:function getGuestEmail(){return this.guestEmail},setEmail:setToken:function setToken(e){$.cookie("guest_token",e),this.guestToken=e},getToken:function getToken(){var e=$.cookie("guest_token");return!1===Boolean(e)&&(e=this.guestToken),e},setCanCreateGuestPassword:function setCanCreateGuestPassword(e){this.allowCreate=e},canCreateGuestPassword:function canCreateGuestPassword(){return this.allowCreate},setPreviousCheckoutTypeOpened:function setPreviousCheckoutTypeOpened(e){this.previousCheckoutTypeOpened=e},getPreviousCheckoutTypeOpened:function getPreviousCheckoutTypeOpened(){return this.previousCheckoutTypeOpened},setNextLoginActionWithGuestCheckout:getNextLoginActionWithGuestCheckout:clearNextLoginActionWithGuestCheckout:getGuestBillingInfo:function getGuestBillingInfo(e){var t="/guest_billing_info?guest_token="+e;return $.ajax({url:t,type:"GET",dataType:"json"}).done(function(e){return e}).fail(function(e){console.error("error on getGuestBillingInfo ",e)})},setFormSubmitter:function setFormSubmitter(e){this._submitedFromGuestCheckout=e},getFormSubmitter:function getFormSubmitter(){return this._submitedFromGuestCheckout},setForceSignup:function setForceSignup(e){this._showSignup=e},forceSignup:setPendingShowModal:function setPendingShowModal(e){this._pendingShowModal=e},getPendingShowModal:function getPendingShowModal(){return this._pendingShowModal}}}),Class(UI,"GuestCongratulationsView").inherits(Widget).includes(BubblingSupport)({elementClass:"guest-congratulations-modal-view",html:'        <div class="guest-modal-view-container">            <img src="/assets/icons/ic-crown.svg" class="ico-crown hide" />            <div class="title">Congratulations!</div>            <div class="subtitle">Your purchase is ready to download!</div>            <img src="/assets/guest-congratulations.svg" class="deco-image" />            <p>You\u2019ll receive an email confirmation with your account details in a few minutes:</p>            <div class="info-email">your-email@placeit.net</div>            <div class="info-instructions">                Follow email instructions to create your password or                <br /><a href="#" target="_blank">Create a Password now</a>, this will open a new tab.            </div>            <button class="accept-button">Understood</button>        </div>',TEXT_SUBSCRIBER:"Enjoy your subscription!",TEXT_PURCHASE:"Your purchase is ready to download!",TEXT_SIZES:{NORMAL:"normal",MEDIUM:"medium",AVERAGE:"average",LARGE:"large",XLARGE:"xlarge"},prototype:{init:function init(e){Widget.prototype.init.call(this,e),this._setUIElements(),this._bindings(),this.$icoCrown.addClass("hide"),this.$createYourPasswordSection.removeClass("hide"),this.$subtitle.html(this.constructor.TEXT_PURCHASE)},_setUIElements:function _setUIElements(){this.$infoEmail=this.element.find(".info-email"),this.$subtitle=this.element.find(".subtitle"),this.$acceptButton=this.element.find(".accept-button"),this.$icoCrown=this.element.find(".ico-crown"),this.$createYourPasswordSection=this.element.find(".info-instructions"),this.$createYourPasswordLink=this.$createYourPasswordSection.find("a")},_bindings:function _bindings(){var e=Utils.bindFn(this);this.$acceptButton.bind("click",e(this._clickHandler))},
_clickHandler:function _clickHandler(){this.dispatch("accept.click")},setEmail:function setEmail(e){this.$infoEmail.html(e),this._updateFontSize(e)},showSubscriberMode:function showSubscriberMode(){this.$icoCrown.removeClass("hide"),this.$subtitle.html(this.constructor.TEXT_SUBSCRIBER)},setCreateYourPasswordLink:function setCreateYourPasswordLink(e){this.$createYourPasswordLink.attr("href",window._pl_host+"/create-your-password?token="+e)},hideCreateYourPasswordSection:function hideCreateYourPasswordSection(){this.$createYourPasswordSection.hide()},_updateFontSize:function _updateFontSize(e){this.$infoEmail.removeClass("medium average large xlarge"),21<e.length&&this.$infoEmail.addClass(this.constructor.TEXT_SIZES.MEDIUM),27<e.length&&this.$infoEmail.addClass(this.constructor.TEXT_SIZES.AVERAGE),33<e.length&&this.$infoEmail.addClass(this.constructor.TEXT_SIZES.LARGE),38<e.length&&this.$infoEmail.addClass(this.constructor.TEXT_SIZES.XLARGE)}}}),Class(UI,"GuestCongratulationsFreeUserView").inherits(Widget).includes(BubblingSupport)({elementClass:"guest-congratulations-free-user-modal-view",html:'        <div class="guest-modal-view-container">            <div class="title">Thanks!</div>            <div class="subtitle">Enjoy your template</div>            <img src="/assets/free-user-congratulations.svg" class="deco-image" />            <button class="accept-button">Download</button>        </div>',prototype:{init:function init(e){Widget.prototype.init.call(this,e),this._setUIElements(),this._bindings()},_setUIElements:_bindings:function _bindings(){var e=Utils.bindFn(this);this.$acceptButton.bind("click",e(this._clickHandler))},_clickHandler:function _clickHandler(){this.dispatch("accept.click")}}}),Class(UI,"GuestFollowingView").inherits(Widget).includes(BubblingSupport)({html:'        <div class="guest-modal-view-container">            <div class="title">We care about your satisfaction</div>            <img src="/assets/guest-following.svg"/>            <div class="info-instructions">                <span class="warning"></span>Make sure this is your <strong>correct email</strong>                or you won\u2019t be able to access your account.            </div>            <div class="info-email">johndoe@gmail.com</div>            <div class="disclaimer">                if this is not your email, take a screenshot and contact Customer Support.            </div>            <div class="buttons-container">                <a href="https://placeit.net/faq#contact" target="_blank" class="contact-support-button">Contact Support</a>                <button class="email-confirmation-button">My Email is correct</button>            </div>        </div>',TEXT_SIZES:{NORMAL:"normal",MEDIUM:"medium",AVERAGE:"average",LARGE:"large",XLARGE:"xlarge"},prototype:{init:function init(e){Widget.prototype.init.call(this,e),this._setUIElements(),this._bindings()},_setUIElements:function _setUIElements(){this.$infoEmail=this.element.find(".info-email"),this.$contactSupportButton=this.element.find(".contact-support-button"),this.$emailConfirmationButton=this.element.find(".email-confirmation-button")},_bindings:function _bindings(){var e=Utils.bindFn(this);this.$contactSupportButton.bind("click",e(this._clickHandler.bind(this,"support.click"))),this.$emailConfirmationButton.bind("click",e(this._clickHandler.bind(this,"confirmation.click")))},_clickHandler:function _clickHandler(e){this.dispatch(e)},setEmail:_updateFontSize:function _updateFontSize(e){this.$infoEmail.removeClass("medium average large xlarge"),21<e.length&&this.$infoEmail.addClass(this.constructor.TEXT_SIZES.MEDIUM),27<e.length&&this.$infoEmail.addClass(this.constructor.TEXT_SIZES.AVERAGE),33<e.length&&this.$infoEmail.addClass(this.constructor.TEXT_SIZES.LARGE),38<e.length&&this.$infoEmail.addClass(this.constructor.TEXT_SIZES.XLARGE)}}}),Class(UI,"GuestEmailField").inherits(Widget)({html:'    <div class="guest-email-field-container">        <div class="guest-capture-section">            <div class="payment-info-title">                Continue as a Guest                <div class="guest-account">                    or <a href="#">Create an Account</a>                </div>            </div>            <div class="guest-email-container">                <div class="guest-label">E-mail<span>*</span></div>                <input class="guest-email-input" id="email-guest" type="email" required="true" placeholder="e.g. johndoe@gmail.com" />                <div class="guest-email-error">Enter a valid e-mail</div>            </div>        </div>        <div class="guest-captured-email-section hide"><span></span> &nbsp;<a href="#">edit</a></div>        <hr/>    </div>    ',EMAIL_REGEXP:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,DEBOUNCE_TIME:2500,EMAIL:{LENGTH_MD:21,LENGTH_SM:24,LENGTH_XS:29},prototype:{_email:"",_emailTyped:"",init:function init(e){return Widget.prototype.init.call(this,e),this._setUIElements(),this._bindings(),this},_setUIElements:function _setUIElements(){this.$emailContainer=this.element,this.$emailInput=this.element.find(".guest-email-input"),this.$loginLink=this.element.find(".guest-account a"),this.$captureSection=this.element.find(".guest-capture-section"),this.$capturedEmailSection=this.element.find(".guest-captured-email-section"),this.$editEmailAnchor=this.$capturedEmailSection.find("a")},_bindings:function _bindings(){var e=Helpers.App.debounce(Utils.bindFn(this)(this._guestEmailDebounceHandler),this.constructor.DEBOUNCE_TIME),t=Utils.bindFn(this);this.$emailInput.on("input",e).on("click",t(this._inputClickHandler)).on("keyup",t(this._keyUpHandler)),this.$editEmailAnchor.on("click",t(this._editClickHandler)),this.$loginLink.on("click",t(this._loginClickHandler))},_loginClickHandler:function _loginClickHandler(e){e.preventDefault(),this.dispatch("loginClick")},_editClickHandler:function _editClickHandler(e){e.preventDefault(),this.$captureSection.show(),this.$capturedEmailSection.addClass("hide"),this.dispatch("editClick")},_inputClickHandler:function _inputClickHandler(){this.dispatch("inputClick")},_guestEmailDebounceHandler:function _guestEmailDebounceHandler(e){var t=e.target.value;if(this.$emailContainer.removeClass("error"),this._emailTyped=t,this.constructor.EMAIL_REGEXP.test(t)){var i=this.getClassSizeText(t);return this.$capturedEmailSection.removeClass("hide size-md size-sm size-xs").addClass(i).find("span").html(t),this.$captureSection.hide(),this._email=t,void this.dispatch("change",{email:t})}this.showError()},hasError:function hasError(){return this.$emailContainer.hasClass("error")},showError:function showError(){this.$emailContainer.addClass("error"),Helpers.GlobalEventTracker.ssoTrack("signup.emailValidationError",{error:!0,user:this._emailTyped,message:"Email validation error",response:"Enter a valid e-mail",label:"guestcheckout"})},getClassSizeText:function getClassSizeText(e){var t="";return e.length>this.constructor.EMAIL.LENGTH_MD&&(t="size-md"),e.length>this.constructor.EMAIL.LENGTH_SM&&(t="size-sm"),e.length>this.constructor.EMAIL.LENGTH_XS&&(t="size-xs"),t},getEmail:function getEmail(){return this._email},_keyUpHandler:function _keyUpHandler(){this.$emailContainer.removeClass("error")}}}),Class(UI,"Container").inherits(Widget).includes(BubblingSupport)({html:"<div></div>",prototype:{init:function init(e){Widget.prototype.init.call(this,e),e.items&&this.appendItems(e.items)},appendItems:function addItems(e){for(var t=e.length,i=0;i<t;i++)this.appendItem(e[i]);return this},appendItem:function addItem(e){return this.appendChild(e).render(this.element)},removeItems:function removeItems(){for(var e=this.children.length,t=Utils.deepCopy(this.children),i=0;i<e;i++)t[i].destroy();return this},addClass:function addClass(e){return this.element.addClass(e),this},removeClass:function removeClass(e){return this.element.removeClass(e),this}}}),Class(UI,"CreatePasswordForm").inherits(Widget)({_newPwd:null,_confirmPwd:null,prototype:{init:function init(e){Widget.prototype.init.call(this,e),this.$form=this.element.find(".pwd-form"),this.$formGroup=this.element.find("form"),this.$pwdInputs=this.element.find(".pwd-input-container"),this.$success=this.element.find(".pwd-success"),this.$simple=this.element.find(".pwd-simple"),this.$mismatch=this.element.find(".pwd-mismatch"),this.$default=this.element.find(".pwd-default"),this.$inputNewPwdGroup=this.element.find(".new-pwd"),this.$inputCofirmPwdGroup=this.element.find(".confirm-pwd"),this.$loginLink=this.element.find(".pwd-redirect"),this.$submitButton=this.element.find(".create-new-submit button"),this._setBindings()},_setBindings:function _setBindings(){var e=this;this.$formGroup.bind("submit",this._handleFormSubmit.bind(this)),this.$pwdInputs.each(function(){e._bindInputToggle(this)}),this.$loginLink.bind("click",this._handleLoginLink.bind(this))},_bindInputToggle:function _bindInputToggle(e){var t=e.querySelector(".ic_view"),i=e.querySelector("input");t.addEventListener("click",},_handleLoginLink:function _handleLoginLink(e){e.preventDefault(),e.stopPropagation(),Helpers.App.setNextLoadAction("nextLoadAction","login-modal"),window.location.href="/"},_handleFormSubmit:function _handleFormSubmit(e){e.preventDefault(),e.stopPropagation(),this._newPwd=e.target.querySelector("#create-new-pwd").value,this._confirmPwd=e.target.querySelector("#create-re-new-pwd").value,this.$submitButton.addClass("light-spinner"),this._newPwd===this._confirmPwd?envatoSso.validatePassword({username:"",password:this._confirmPwd,languageCode:window._pl_ssoLanguage}).then(this._setPasswordRequest.bind(this))["catch"](this._setPwdFailureUI.bind(this)):this._setPwdMismatchUI()},_setPasswordRequest:function _setPasswordRequest(){var e={url:"/update_guest_password",data:{password:this._newPwd,password_confirmation:this._confirmPwd,token:Helpers.App.getUrlParam("token")},type:"POST"};$.ajax(e).done(this._setPwdSuccessUI.bind(this)).fail(this._setPwdFailureUI.bind(this))},_setPwdMismatchUI:function _setPwdMismatchUI(){this.$success.hide(),this.$simple.hide(),this.$mismatch.show(),this.$default.hide(),this.$inputNewPwdGroup.addClass("error"),this.$inputCofirmPwdGroup.addClass("error"),this.$submitButton.removeClass("light-spinner")},_setPwdSuccessUI:function _setPwdSuccessUI(){this.$success.show(),this.$simple.hide(),this.$form.hide(),this.$mismatch.hide(),this.$default.hide(),this.$inputNewPwdGroup.removeClass("error"),this.$inputCofirmPwdGroup.removeClass("error"),this.$submitButton.removeClass("light-spinner")},_setPwdFailureUI:function _setPwdFailureUI(){this.$success.hide(),this.$simple.show(),this.$mismatch.hide(),this.$default.hide(),this.$inputNewPwdGroup.addClass("error"),this.$inputCofirmPwdGroup.addClass("error"),this.$submitButton.removeClass("light-spinner")}}}),Class(UI,"ScrollCarouselControls").inherits(Widget)({html:"<div></div>",elementClass:"scroll-dots",DOT_TEMPLATE:'<div class="scroll-dot"></div>',prototype:{_snapPoints:[0],_dots:[],_activeDot:null,init:function init(e){Widget.prototype.init.call(this,e),this.targetCarousel=e.targetCarousel,this._chilrenAmount=this.targetCarousel.children().length;for(var t=0;t<this._chilrenAmount;t++)this._snapPoints.push(this._snapPoints[t]+this.targetCarousel.children()[t].offsetWidth),this._addControlDot(t);this._setDotAsActive(0),this._bindCarousel()},_addControlDot:function _addControlDot(e){var t=$(this.constructor.DOT_TEMPLATE);t.attr("slide",e),this._dots.push(t),this.element.append(t),this._bindDot(t)},_bindCarousel:function _bindCarousel(){this.targetCarousel.bind("scroll",this._scrollHandler.bind(this))},_scrollHandler:function _scrollHandler(){var e=this;clearTimeout(this._debouncedScroll),this._debouncedScroll=setTimeout(function(){e._setCurrentSlide()},200)},_setCurrentSlide:function _setCurrentSlide(){for(var e=this.targetCarousel.scrollLeft(),t=0;t<this._snapPoints.length;t++)e>=this._snapPoints[t]&&this._setDotAsActive(t)},_bindDot:function _bindDot(e){e.bind("click",this._handleDotClick.bind(this))},_handleDotClick:function _handleDotClick(e){var t=e.target.getAttribute("slide");this._scrollTargetCarouselTo(this._snapPoints[t]),this._setDotAsActive(t)},_scrollTargetCarouselTo:function _scrollTargetCarouselTo(e){this.targetCarousel.get(0).scroll({left:e,behavior:"smooth"})},_setDotAsActive:function _setDotAsActive(e){null!==this._activeDot&&this._activeDot.removeClass("active"),this._dots[e].addClass("active"),this._activeDot=this._dots[e]}}});var time1=Date.now();window.isInnerPage||document.addEventListener("DOMContentLoaded",function(){$(document.body);if(DataCollector.loadDataCollector()["catch"](,videojs.options.techOrder=["html5","flash"],videojs.options.flash.swf="/assets/vendor/video-js.swf",function(){var e=!1,t=navigator.userAgent||navigator.vendor||window.opera;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|ipad|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},"Explorer"===BrowserDetect.browser&&BrowserDetect.version<=9||"Safari"===BrowserDetect.browser&&BrowserDetect.version<534.59)return!1;$(".account-dropdown input, .account-dropdown label,             .account-dropdown button, .account-dropdown a").click(function(e){e.stopPropagation()}),$("#shareURLInput").bind("click focus mouseup",,$(".remove").remove(),window.currencyHelper=new CurrencyHelper({USD:{label:"USD",symbol:"$"},BRL:{label:"BRL",symbol:"R$"}});var e=window.pageType.type,t=window.getPageStrategy();console.log("typePage: "+e),console.log("strategy: "+t),window.page=new PageController({typePage:e,strategy:t}),window.dispatchEvent(new Event("pageReady"))}),window.getPageStrategy=function getPageStrategy(){var e="default",t=window.pageType.type,i={home:"home",category:"home",search:"home",stage:"stage",custom_pages:"custom",custom_experiences:"custom",pricing:"custom",bookmarks:"bookmarks",account:"account",purchases:"purchases",cancel:"cancel",cancel_subscription:"cancel",unsubscribe_email_list:"emailListUnsubscribe",about:"about",saved_drafts:"saved_drafts",switch_subscription:"switchSubscription",ApiGridView:"ApiGridView",ApiStageView:"ApiStageView",ApiPurchasesModal:"ApiPurchasesModal",ApiLogin:"ApiLoginView",ApiSubscription:"ApiSubscriptionView",pricingv2:"custom",my_placeit:"my_placeit",create_your_password:"create_your_password",for_you:"for_you",user_brand_page:"user_brand_page",user_folder:"user_folder",my_folders:"my_folders"};return t&&i[t]&&(e=i[t]),e},$(function(){if("Explorer"===BrowserDetect.browser&&BrowserDetect.version<=10||"IE11"===BrowserDetect.browser||"Safari"===BrowserDetect.browser&&BrowserDetect.version<=534.59)return new UI.IncompatibleBrowser,!1;var e,t;e=function(e){e.preventDefault()},(t=document.querySelector(".stage-object-image"))&&t.addEventListener("contextmenu",e)}),window.addEventListener("load",function(){setTimeout(function(){window.performanceTimings=new PerformanceTimeMonitor,!0===window.performanceTimings.supported&&PerformanceLogger.sendTimings(window.performanceTimings)},0)});
//# sourceMappingURL=/assets/maps/application-544aaaeedd2c43fc3342dea0d460dd38.map
