(window.webpackJsonp=window.webpackJsonp||[]).push([[221],{1293:function(e,t,o){"use strict";o.r(t);var s=o(5),a=o(14),i=o(108),n=o(17);const r=new a.a("appDownloadMessage"),d=Object.assign({isUserEligible:!1,isVisible:!1,isThreadExpired:!1,threadTypeId:n.m[n.a],source:"",isEnabledOnClickout:!1,isEnabledOnThreadVoting:!1},(()=>{let e=r.get();return Object(i.f)()===e.tryDate||(e={tryDate:Object(i.f)(),shown:0,couldShowOnClickout:0,threadVotes:0},r.set(e)),e})()),l={firstTime:firstTimeForVoting:(e,t)=>e.threadVotes>=t.appDownloadMessageSettings.minimumThreadVotesForFirstShowing,reachedMaxDailyShows:(e,t)=>e.shown>=t.appDownloadMessageSettings.maximumShowingsPerDay,shouldShowNextTimesForClickout:(e,t)=>e.couldShowOnClickout>=t.appDownloadMessageSettings.minimumClickOutsForNextShowing&&!t.reachedMaxDailyShows,shouldShowNextTimesForVoting:(e,t)=>e.threadVotes>=t.appDownloadMessageSettings.minimumThreadVotesForNextShowing&&!t.reachedMaxDailyShows,appDownloadMessageSettings:(e,t,o)=>{var s;return null!==(s=o.settings.appDownloadMessage)&&void 0!==s?s:{}}},c={writeStorage(e,t){let{commit:o}=e;const s=Object.assign({tryDate:Object(i.f)()},t);r.extend(s);o("MERGE",Object.fromEntries(Object.entries(s).filter((e=>{let[,t]=e;return t||0===t}))))},hide(e){let{commit:t}=e;t("UPDATE_IS_VISIBLE",!1)},showOnVote(e){let{commit:t,dispatch:o,getters:s}=e;d.isEnabledOnThreadVoting&&(o("increaseThreadVotes"),s.firstTime?s.firstTimeForVoting&&t("UPDATE_IS_VISIBLE",!0):s.shouldShowNextTimesForVoting&&t("UPDATE_IS_VISIBLE",!0))},showOnClickout(e){let{commit:t,dispatch:o,state:s,getters:a}=e;s.isEnabledOnClickout&&(a.firstTime?t("UPDATE_IS_VISIBLE",!0):(o("increaseCouldShowOnClickout"),a.shouldShowNextTimesForClickout&&t("UPDATE_IS_VISIBLE",!0)))},show(e,t){let{commit:o,dispatch:s,state:a}=e,{source:i="clickout",isThreadExpired:r=!1,threadTypeId:d=n.m[n.a]}=t;if(a.isUserEligible)switch(o("UPDATE_THREAD_PROPS",{threadTypeId:d,isThreadExpired:r,source:i}),i){case"clickout":s("showOnClickout");break;case"vote":s("showOnVote")}},increaseShown(e){let{state:t,dispatch:o}=e;o("writeStorage",{shown:t.shown+1,couldShowOnClickout:0,threadVotes:0})},increaseCouldShowOnClickout(e){let{state:t,dispatch:o}=e;o("writeStorage",{couldShowOnClickout:t.couldShowOnClickout+1})},increaseThreadVotes(e){let{state:t,dispatch:o}=e;o("writeStorage",{threadVotes:t.threadVotes+1})},merge,h={UPDATE_IS_VISIBLEUPDATE_THREAD_PROPS(e,t){let{threadTypeId:o,isThreadExpired:s,source:a}=t;e.threadTypeId=o,e.isThreadExpired=s,e.source=a},MERGE;var p=o(523),w=Object(p.b)("appDownloadMessage",{create:()=>({namespaced:!0,state:d,getters:l,mutations:h,actions:c})}),u=o(2),g=o(574),m=o(71),S=o(4);const T={mixins:[w]};var E=Object(s.defineComponent)(Object.assign({},T,{__name:"app-download-message",props:{data:null},setup(e){var t,a;const i=e,n=Object(m.c)();S.a.dispatch("appDownloadMessage/merge",{isEnabledOnClickout:i.data.features.promotionTools.appDownloadMessage,isEnabledOnThreadVoting:i.data.features.promotionTools.appDownloadMessageForThreadVoting,isUserEligible:null!==(t=null===(a=i.data.me)||void 0===a?void 0:a.isEligibleForShowingAppDownloadMessage)&&void 0!==t&&t});const r=Object(s.computed)((),d=Object(s.computed)((),l=()=>S.a.dispatch("appDownloadMessage/increaseShown"),c=return u.a.add("show-app-download-message-onclick","click",((e,t)=>c(t)),{events:["click"],preventDefault:!1}),u.a.add("show-app-download-message-ondestroy","destroy",(),{__sfc:!0,MessageInfo:breakpoints:n,props:i,isVisible:r,isActive:d,increaseShown:l,show:c,hide:onActivation:BaseModal:g.a}}})),b=o(45),D=Object(b.a)(E,(function(){var e=this,t=e._self._c,o=e._self._setupProxy;return o.isActive?t(o.BaseModal,{attrs:{layout:"bottomCenter"},on:{"update:active":o.onActivation}},[t(o.MessageInfo,{staticClass:"overflow--scrollY",on:{hide:o.hide}})],1):e._e()}),[],!1,null,null,null);t.default=D.exports}}]);