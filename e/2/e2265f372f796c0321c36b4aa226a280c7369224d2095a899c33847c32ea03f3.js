!self,(function(){return(()=>{var e,t,r={5868:(e,t,r)=>{r(7055),e.exports=,7055:(e,t,r)=>{"use strict";var o=Object.prototype.hasOwnProperty;erge=t.classes=a,t.style=i,t.attr=s,t.attrs=var n=/["&<>]/;.escape=l,t.rethrow=,5611:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});class o{constructor(){return"desktop"===window.device||"desktop"===window.corriereDevice?{socialBox:".bck-social-modal",socialNav:".bck-social-nav",socialHeader:".bck-social-nav li",tooltip:"",modalBackgound:".modal-background",galleryIcons:".share-icon",desktopWidget:".web_widget_socialBar",iconClose:".icon[close-modal]"}:{socialBox:".bck-social-modal",socialNav:".bck-social-nav",carouselSocialNav:".frame-video .bck-social-nav",socialHeader:".bck-social-nav li",tooltip:"",modalBackgound:".modal-background",galleryIcons:".share-icon",desktopWidget:".web_widget_socialBar",iconClose:".icon[close-modal]"}}}var a=r(5868),i=r.n(a);class s{constructor(){console.log("RCS_COR_SOCIAL_BAR"),this.data=new o,this.currentUrlToShare="",this.desktopWidget=Array.from(document.querySelectorAll(this.data.desktopWidget)),this.socialBox=document.querySelector(this.data.socialBox),this.socialNav=Array.from(document.querySelectorAll(this.data.socialNav)),this.socialPrint=document.querySelector("#print_tba_bt"),this.socialHeader=Array.from(document.querySelectorAll(this.data.socialHeader)),this.socialCarousel=Array.from(document.querySelectorAll(this.data.carouselSocialNav)),this.galleryShare=Array.from(document.querySelectorAll(this.data.galleryIcons)),this.title=document.querySelector('[property="og:title"]'),this.title&&this.title.getAttribute("content");let e=this;document.addEventListener("RcsVideoManager:initSocialBar",(function(){const t="mobile"===window.device?"touchend":"click";document.querySelectorAll(".frame-video .bck-social-nav").forEach(((r,o)=>{Array.from(r.querySelectorAll("li")).forEach((r=>{r.getAttribute("data-social")&&r.addEventListener(t,(t=>{let o=r.closest(".bck-social-nav").getAttribute("data-href");null!==o&&""!==o?-1!==o.indexOf("https:")||-1!==o.indexOf("http:")?e.currentUrlToShare=o:e.currentUrlToShare="https:"+o:e.currentUrlToShare=window.location.href,e.getSocial(t,r.dataset.social)}))}))}))}))}getSocial(e,t){if(e.preventDefault(),console.log(t),"share"===t){var r=e.target.closest(".bck-social-nav");this.targetHref=r.getAttribute("data-href"),this.title=r.getAttribute("data-title")||"Corriere.it",window.titleHome=this.title}const o="share"!==t&&"more"!==t&&"mail"!==t&&"email"!==t&&"cp"!==t&&"print"!==t&&"share-image"!==t&&"commnets"!==t;console.log("EXCLUDED ICON: "+o),t&&""!==t&&o?"wa"===t||"fbm"===t&&"podcast"!==window.section_lev1||"te"===t?window.location.href=this.sharer(t,this.currentUrlToShare):this.openSocial(this.sharer(t,this.currentUrlToShare)):"cp"===t?this.openClipboardText():"email"===t||"mail"===t?this.targetHref?window.location.href=this.sendArticleToMail(this.targetHref):window.location.href=this.sendArticleToMail(window.location.href):"share-image"===t?this.toggleModal(t):"print"===t?this.printPage(window.location.href):this.toggleModal(t)}copyIphone(e){var t=document.getElementById(e);if(navigator.userAgent.match(/ipad|iphone/i)){var r=t.contentEditable,o=t.readOnly;t.contentEditable=!0;var a=document.createRange();a.selectNodeContents(t);var i=window.getSelection();i.removeAllRanges(),i.addRange(a),t.setSelectionRange(0,999999),t.contentEditable=r,t.readOnly=o}else t.select();document.execCommand("copy")}openClipboardText(){null===document.querySelector("#urlTemp")?(document.body.insertAdjacentHTML("beforeend",'<input type="text" id="urlTemp" value="'+this.currentUrlToShare+'" style="display:block;" readonly="true" contenteditable="true"/>'),this.copyIphone("urlTemp")):(document.querySelector("#urlTemp").style.display="block",document.querySelector("#urlTemp").value=this.currentUrlToShare),document.querySelector("#urlTemp").select(),document.execCommand("copy"),document.querySelector("#urlTemp").setAttribute("style","display:none"),this.showClipboardMessage()}showClipboardMessage(){const e=document.querySelector('[data-social="cp"]');let t=e.querySelector(".tooltip");if(null===t){const r=document.createElement("div");r.innerHTML=i()(),t=r.firstChild,e.appendChild(t)}else t.classList.remove("is-hidden");setTimeout((,5e3)}fixModal(){if(this.socialHeader){const e=this.socialHeader.querySelector('li[data-social="more-header"]');if(e){const t=e.getBoundingClientRect(),r=t.y+180,o=t.x-100;this.socialBox.style=`top: ${r}px; left: ${o}px; z-index: 999`,this.socialBox.classList.toggle("is-hidden")}}}toggleModal(e=null){this.socialBox&&(this.socialBox.style="",null!==e&&"more-header"===e?this.fixModal():this.socialBox.classList.toggle("is-hidden"),this.socialBox.getAttribute("data-share")&&this.socialBox.removeAttribute("data-share"))}toggleendArticleToMail(e){let t=e.replace("www2.","www."),r=this.title.content;encodeURIComponent(t);let o=`mailto:?body=${t}&subject=${r}`;return this.omnitureTracking("email"),o}sharer(e){let t=window.device&&"mobile"===window.device&&"home"===sezione?encodeURIComponent(window.titleHome):encodeURIComponent(document.querySelector('[property="og:title"]').getAttribute("content")),r=this.currentUrlToShare,o=t+" ",a="";switch(!0){case/fb/.test(e):a=`https://www.facebook.com/sharer/sharer.php?u=${r}`,this.omnitureTracking("facebook");break;case/tw/.test(e):a=`https://twitter.com/intent/tweet?text=${o}${r}`,this.omnitureTracking("twitter");break;case/fbm/.test(e):a=`fb-messenger://share?link=${r}`;break;case/wa/.test(e):a=`whatsapp://send?text=${r}`;break;case/li/.test(e):a=`https://www.linkedin.com/shareArticle?mini=true&url=${r}`,this.omnitureTracking("linkedin");break;case/te/.test(e):a=`tg://msg?text=${r}`;break;case/email/.test(e):case/mail/.test(e):case/inviaMail/.test(e):return this.sendArticleToMail(r)}return a}printPage(e){-1!==e.indexOf(".shtml")?e=e.replace(".shtml","_print.html"):-1!==e.indexOf(".html")&&(e=e.replace(".html","_print.html")),window.open(e,"","width=660, height=750, scrollbars=1")}openSocial(e,t="popup"){let r=screen.width/2-275,o=screen.height/2-200;window.open(e,t,`width=550, height=400,top=${o},left=${r},scrollbars=no`)}omnitureTracking(e){"undefined"!=typeof omniture&&"function"==typeof omniture.tracksocialshare?(omniture.tracksocialshare(e),console.log("Omniture Tracked on: "+e)):console.log("Omniture is not defined")}render(){const e="mobile"===window.device?"touchend":"click";if(this.socialPrint&&this.socialPrint.removeAttribute("onclick"),this.socialBox&&this.socialNav?(Array.from(this.socialBox.querySelectorAll("li")).forEach((t=>{t.getAttribute("data-social")&&t.addEventListener(e,()})),this.galleryShare&&this.galleryShare.forEach((t=>{t.addEventListener(e,(e=>{this.currentUrlToShare="https://images2.corriereobjects.it"+t.dataset.imageurl,document.querySelector("meta[property=og\\:image]").setAttribute("content",this.currentUrlToShare),this.currentUrlToShare=window.location.href,this.getSocial(e,t.dataset.social)}))})),this.socialNav.forEach(((t,r)=>{t.classList.contains("is-negative")&&t.addEventListener(e,(r=>{if(r.preventDefault(),r.stopPropagation(),"podcast"===window.section_lev1){const e=t.closest(this.data.socialNav);e&&(this.currentUrlToShare=e.getAttribute("data-href")),t.querySelector("[data-social]")&&this.getSocial(r,t.querySelector("[data-social]").getAttribute("data-social"))}this.socialBox&&Array.from(document.querySelectorAll(this.data.socialBox)).forEach((),document.querySelectorAll(this.data.socialBox)[0].classList.toggle("is-hidden"),t.closest(".bck-media-news")&&t.closest(".bck-media-news").addEventListener(e,(e=>{e.preventDefault(),t.querySelector(this.data.socialBox)&&t.querySelector(this.data.socialBox).classList.add("is-hidden")}))})),Array.from(t.querySelectorAll("li")).forEach((t=>{t.getAttribute("data-social")&&t.addEventListener(e,(e=>{let r=t.closest(this.data.socialNav).getAttribute("data-href");null!==r&&""!==r?-1!==r.indexOf("https:")||-1!==r.indexOf("http:")?this.currentUrlToShare=r:this.currentUrlToShare="https:"+r:this.currentUrlToShare=window.location.href,this.getSocial(e,t.dataset.social)}))}))}))):this.socialHeader&&this.socialHeader.forEach((t=>{t.getAttribute("data-social")&&t.addEventListener(e,(e=>{let r=t.closest(this.data.socialNav).getAttribute("data-href");null!==r&&""!==r?-1!==r.indexOf("https:")||-1!==r.indexOf("http:")?this.currentUrlToShare=r:this.currentUrlToShare="https:"+r:this.currentUrlToShare=window.location.href,this.getSocial(e,t.dataset.social)}))})),this.socialBox){let t=document.querySelector(this.data.modalBackgound);t&&t.addEventListener(e,(()=>{this.toggleModal()}));const r=this.socialBox.querySelector(this.data.iconClose);r&&r.addEventListener(e,()}this.desktopWidget&&(console.log("Desktop HOME"),this.desktopWidget.forEach((t=>{Array.from(t.querySelectorAll("a")).forEach((t=>{t.addEventListener(e,(e=>{let t=e.target.closest(this.data.desktopWidget).getAttribute("data-href");null!==t&&""!==t?-1!==t.indexOf("https:")||-1!==t.indexOf("http:")?this.currentUrlToShare=t:this.currentUrlToShare="https:"+t:this.currentUrlToShare=window.location.href,"wa"===e.target.parentNode.className||"fbm"===e.target.parentNode.className||"te"===e.target.parentNode.className?window.location.href=this.sharer(e.target.parentNode.className,this.currentUrlToShare):"commentCount"!==e.target.parentNode.className&&"printPage"!==e.target.parentNode.className&&this.openSocial(this.sharer(e.target.parentNode.className,this.currentUrlToShare)),"printPage"===e.target.parentNode.className&&this.printPage(window.location.href)}))}))}))),document.addEventListener("RCSCommentsOpenSocialModal",()}}},8138:(e,t,r)=>{"Symbol"in window&&"fetch"in window&&"IntersectionObserver"in window&&"CustomEvent"in window&&"closest"in Element.prototype&&"entries"in Array.prototype&&"from"in Array&&"find"in Array.prototype&&"findIndex"in Array.prototype&&"includes"in Array.prototype&&"keys"in Array.prototype&&"values"in Array.prototype&&"assign"in Object&&"entries"in Object&&"values"in Object&&"endsWith"in String.prototype&&"includes"in String.prototype&&"startsWith"in String.prototype?e.exports=r(5611):Promise.all([r.e(85),r.e(429)]).then(r.bind(r,4136)).then((()=>{e.exports=r(5611)}))},7835:,o={};.m=r,a.n=a.d=a.f={},a.e=a.u=a.o=e={},t="RcsCorSocialBar:",a.l=a.r=a.p="https://components2.corriereobjects.it/rcs_cor_social-bar/v3/",(();var i=a(8138);return i.default})()}));