"use strict";(self.webpackChunkphotobucket_web=self.webpackChunkphotobucket_web||[]).push([[592],{61364:function(e,t,n){n.d(t,{Z:function(){return f}});var i,r=n(4942),a=n(29439),o=n(57983),l=n(47131),s=n(87252),u=n(70501),d=n(51767),c=n(47313),m=n(58467),p=n(63694),h=n(46417);function f(e){var t,n=e.overrideSearchRoute,f=e.title,v=e.variant,b=e.onCompleted,g=(0,m.TH)(),x=(0,m.s0)(),Z=new URLSearchParams(g.search),j=(0,p.Z)().isSearchDisabled,y=Z.get("q"),w=(0,c.useState)(y||""),C=(0,a.Z)(w,2),A=C[0],S=C[1],P=(0,d.useFlag)("isSearchEnabled"),k=v;(0,c.useEffect)((function(){g.pathname.includes("search")||S("")}),[g.pathname]);var I=(t={},(0,r.Z)(t,i.LIGHT,{color:"#fff",p:"2px 4px",display:"flex",alignItems:"center",boxShadow:0,margin:"0 15px",backgroundColor:"rgba(255, 255, 255, 0.1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.15)"}}),(0,r.Z)(t,i.DARK,{color:"#000",p:"2px 4px",display:"flex",alignItems:"center",boxShadow:0,margin:"0 10px",border:"1px solid #919AA9",borderRadius:"4px",backgroundColor:"#fff","&:hover":{backgroundColor:"grey"}}),t);return!P||j?null:(0,h.jsxs)(u.Z,{component:"form",onSubmit:function(e){null===e||void 0===e||e.preventDefault(),x("".concat(n,"?q=").concat(A)),b&&b()},sx:I[k],children:[(0,h.jsx)(s.ZP,{autoComplete:"off",size:"small",sx:{marginLeft:1,flex:1,"& .MuiInputBase-input":{padding:0},"&.MuiInputBase-root":{color:"inherit"}},onChange:function(e){S(e.target.value)},id:"search",value:A,placeholder:f,inputProps:{"aria-label":f}}),(0,h.jsx)(l.Z,{type:"submit",sx:{p:"6px"},color:"inherit","aria-label":"search",children:(0,h.jsx)(o.Z,{fontSize:"small"})})]})}!function(e){e.LIGHT="light",e.DARK="dark"}(i||(i={})),f.defaultProps={overrideSearchRoute:"/search",title:"Search photobucket",variant:"light",onCompleted:void 0}},13481:function(e,t,n){n.d(t,{Z:function(){return d}});var i=n(47313),r=n(58467),a=n(46417),o=(0,i.lazy)((function(){return n.e(7947).then(n.bind(n,7947))})),l=(0,i.lazy)((function(){return Promise.all([n.e(2855),n.e(310)]).then(n.bind(n,70310))})),s=(0,i.lazy)((),u=(0,i.lazy)(();function d(e){var t=e.isPublic;return(0,a.jsx)("div",{style:{alignSelf:"flex-end"},children:(0,a.jsx)(i.Suspense,{fallback:null,children:(0,a.jsxs)(r.Z5,{children:[(0,a.jsx)(r.AW,{path:"albums",element:(0,a.jsx)(u,{})}),(0,a.jsx)(r.AW,{path:"a/:albumId/subalbums",element:(0,a.jsx)(u,{})}),["dashboard","upgrade","profile"].map((function(e){return(0,a.jsx)(r.AW,{path:e,element:(0,a.jsx)(o,{})},e)})),["/","a/:albumId","d/*","v/day","/search","/favorites"].map((function(e){return(0,a.jsx)(r.AW,{path:e,element:(0,a.jsx)(s,{isPublic:!!t})},e)})),(0,a.jsx)(r.AW,{path:"*",element:(0,a.jsx)(l,{isPublic:!!t})})]})})})}d.defaultProps={isPublic:!1}},93305:function(e,t,n){n.d(t,{Z:function(){return v}});var i=n(29439),r=n(90297),a=n(17592),o=n(24193),l=n(99881),s=n(86138),u=n(47313),d=n(91345),c=n(46417),m=(0,a.ZP)(o.Z)((function(e){return{color:e.theme.palette.primary.light,border:"1px solid ".concat(e.theme.palette.primary.light),height:"25px",fontWeight:e.theme.typography.fontWeightBold}}));function p(e){return(0,c.jsx)(s.Z,{open:e.open,autoHideDuration:6e3,onClose:e.handleClose,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,c.jsx)(l.Z,{elevation:6,variant:"filled",onClose:e.handleClose,severity:e.severity,children:e.message})})}function h(e){return(0,c.jsx)(s.Z,{open:e.open,message:e.message,autoHideDuration:6e3,onClose:e.handleClose,anchorOrigin:{vertical:"bottom",horizontal:"center"},action:(0,c.jsx)(m,{onClick:e.handleClose,children:"OK"})})}function f(e){var t=(0,u.useState)(!0),n=(0,i.Z)(t,2),r=n[0],a=n[1],o=function(){a(!1),(0,d.sh)([])};return"none"===e.severity?(0,c.jsx)(h,{message:e.message,open:r,handleClose:o}):(0,c.jsx)(p,{message:e.message,severity:e.severity,open:r,handleClose:o})}function v(){var e=(0,r.l)(d.sh);return(0,c.jsx)(c.Fragment,{children:e.map((function(e){return e?(0,c.jsx)(f,{message:e.message,severity:e.severity},e.id):null}))})}},67445:function(e,t,n){n.d(t,{Z:function(){return T}});var i=n(57829),r=n(57451),a=n(75908),o=n(19860),l=n(9289),s=n(24813),u=n(13481),d=n(90297),c=n(14647),m=n(61317),p=n(90891),h=n(47131),f=n(16031),v=n(91345),b=n(2493),g=n(11198),x=n(23639),Z=n(24193),j=n(17592),y=n(46417),w=(0,j.ZP)(x.Z)((function(e){var t=e.theme;return{"& .MuiBadge-badge":{color:t.palette.primary.main,background:t.palette.primary.contrastText,fontWeight:900}}}));function C(e){var t=e.ids,n=e.onCompleted,i=e.color,r=(0,o.Z)(),a=function(){n()};return(0,s.Z)(r.breakpoints.up("sm"))?(0,y.jsxs)(Z.Z,{color:i,onClick:a,"aria-label":"Deselect All","data-test":"deselect-all",id:"deselect-all-button",children:[(0,y.jsx)(g.Z,{style:{marginRight:12}}),t.length," Selected"]}):(0,y.jsx)(h.Z,{color:i,onClick:a,"aria-label":"Deselect All","data-test":"deselect-all",id:"deselect-all-button",children:(0,y.jsx)(w,{badgeContent:t.length.toString(),children:(0,y.jsx)(g.Z,{fontSize:"large"})})})}C.defaultProps={color:"inherit"};var A=n(4915),S=n(43986),P=n(20716);function k(){var e=(0,o.Z)(),t=(0,s.Z)(e.breakpoints.up("md")),n=(0,s.Z)(e.breakpoints.down("sm")),i=!t&&!n,a=(0,d.l)(v.nt),l=(0,S.Z)(),u=l.deselectAllAlbums,g=l.selectedAlbums,x=(0,P.Z)(),Z=x.deselectAll,j=x.selectedMedia,w=x.isEmpty,k=(0,d.l)(v._N),I="main"===a;return k.media||!w()?(0,y.jsx)(A.Z,{ids:j,onCompleted:Z}):k.albums||!(0,f.isEmpty)(g)?(0,y.jsx)(C,{ids:g,onCompleted:u}):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(r.Z,{lgUp:!0,children:(0,y.jsxs)(h.Z,{color:"inherit",onClick:function(){(0,v.nt)(I?null:"main")},id:"appbar-drawer-toggle",disableRipple:!0,disableTouchRipple:!0,"aria-label":I?"Close Menu":"Open Menu","data-test":"appbar-drawer-toggle",size:"large",children:[!I&&(0,y.jsx)(m.Z,{}),I&&(0,y.jsx)(c.Z,{})]})}),(0,y.jsxs)(p.Z,{"aria-label":"Photobucket Homepage",href:"/",id:"appbar-logo","data-test":"appbar-logo",sx:{alignSelf:"center"},children:[(0,y.jsx)(r.Z,{mdDown:!0,children:"dark"===e.palette.mode?(0,y.jsx)(b.Z,{width:"160px",color:"white"}):(0,y.jsx)(b.Z,{width:"160px"})}),i&&(0,y.jsx)(b.Z,{width:"100px"})]})]})}var I=n(27071),E=n(61364);function T(e){var t,n=e.isPublic,d=(0,v.at)(),c=(0,o.Z)(),m=(0,s.Z)(c.breakpoints.down("lg"));return(0,y.jsx)(a.Z,{position:"static",elevation:0,color:"inherit",sx:{borderBottom:"1px solid #dfdfdf",color:c.palette.primary.main},children:(0,y.jsxs)(l.Z,{disableGutters:m,sx:{padding:{xs:"10px"},justifyContent:"space-between"},children:[(0,y.jsxs)(i.Z,{sx:{display:"flex"},children:[(0,y.jsx)(k,{}),(null===d||void 0===d||null===(t=d.profile)||void 0===t?void 0:t.username)&&(0,y.jsx)(r.Z,{lgDown:!0,children:(0,y.jsx)(E.Z,{overrideSearchRoute:"/u/".concat(d.profile.username,"/search"),title:"Search your images...",variant:"dark"})})]}),null!==d&&void 0!==d&&d.profile?(0,y.jsx)(u.Z,{isPublic:n}):(0,y.jsx)(I.Z,{})]})})}T.defaultProps={isPublic:!1}},70592:function(e,t,n){n.d(t,{Z:function(){return xe}});var i=n(90297),r=n(17592),a=n(46923),o=n(58467),l=n(91345),s=n(63694),u=n(31298),d=n(83041),c=n(92216),m=n(70749),p=n(37673),h=n(46417);function f(e){var t=e.ids,n=e.open,i=e.handleClose,r=(0,c.Z)().mutation,a=(0,m.Z)().mutation;return(0,h.jsx)(p.Z,{isOpen:n,onSecondayAction:function(){a({variables:{ids:t}}),i()},onSecondayActionText:(0,h.jsx)("p",{children:"Delete Album & keep content in My Bucket"}),onSubmit:function(){r({variables:{ids:t}}),i()},onSubmitText:(0,h.jsx)("p",{children:"Delete Album & its content"}),title:"Are you sure you want to delete?",close:i,subTitle:"You are about to delete ".concat(t.length," ").concat(1===t.length?"album":"albums",". This action cannot be undone.")})}var v=n(61511),b=n(28422),g=n(207);function x(e){var t=e.ids,n=e.open,i=e.username,r=e.handleClose,a=(0,v.x)(),o=t.map((function(e){return a.readFragment({id:"AlbumV2:".concat(e),fragment:b.KPs})})).filter((function(e){return!!e}));return i?(0,h.jsx)(g.Z,{isOpen:n,onClose:r,albums:o,username:i}):null}var Z=n(93305),j=n(67445),y=n(1413),w=n(29439),C=n(11198),A=n(90891),S=n(57829),P=n(65033),k=n(47131),I=n(9289),E=n(61113),T=n(20201),D=n(47313),M=n(20004),z=n(28297),R=(0,r.ZP)(A.Z)((function(e){return{color:e.theme.palette.primary.contrastText,fontSize:"1.25rem",textDecoration:"none","&:hover":{textDecoration:"underline"}}}));function L(){var e,t=(0,i.l)(l.at),n=null===t||void 0===t||null===(e=t.profile)||void 0===e?void 0:e.subscription.isTrial,r=(0,D.useState)(null),a=(0,w.Z)(r,2),o=a[0],s=a[1],u=(0,D.useState)(!1),d=(0,w.Z)(u,2),c=d[0],m=d[1],p=(0,T.Z)();return(0,D.useEffect)((function(){var e,n,i,r,a;if(t&&t.profile){var o=t.profile.subscription,l=null===(e=o.plan)||void 0===e?void 0:e.planId,u=o.totalUserUsedSpace||0,d=(null===(n=o.plan)||void 0===n?void 0:n.maxSpace)||1/0,c=o.totalImagesCount||0,p=(null===(i=o.plan)||void 0===i?void 0:i.maxImagesCount)||1/0,f=(null===(r=o.thresholdDetails)||void 0===r?void 0:r.usedSpace)||0,v=(null===(a=o.thresholdDetails)||void 0===a?void 0:a.maxSpace)||1/0,b=!1,g=null;"free"===l.split(/[\s-_]+/)[0].toLowerCase()?u>=1e11||c>=1e4?f>v?(b=!1,g=(0,h.jsx)(R,{href:"https://billing.photobucket.com/?id=unlimited&type=monthly&utm_medium=web&utm_source=notices&utm_content=newsbar&utm_campaign=FreeOS22500Host",children:"Hosting is not allowed and your account is over storage. Upgrade now."})):(b=!1,g=(0,h.jsx)(R,{href:"https://billing.photobucket.com/?id=unlimited&type=monthly&utm_medium=web&utm_source=notices&utm_content=newsbar&utm_campaign=FreeOS22500",children:"Your account is over storage. Upgrade now."})):u>=225e8||c>=2250?f>v?(b=!1,g=(0,h.jsx)(R,{href:"https://billing.photobucket.com/?id=plus&type=monthly&utm_medium=web&utm_source=notices&utm_content=newsbar&utm_campaign=FreeOS2250Host",children:"Hosting is not allowed and your account is over storage. Upgrade now."})):(b=!1,g=(0,h.jsx)(R,{href:"https://billing.photobucket.com/?id=plus&type=monthly&utm_medium=web&utm_source=notices&utm_content=newsbar&utm_campaign=FreeOS2250",children:"Your account is over storage. Upgrade now."})):u>d||c>p?f>v?(b=!1,g=(0,h.jsx)(R,{href:"https://billing.photobucket.com/?id=plus&type=monthly&utm_medium=web&utm_source=notices&utm_content=newsbar&utm_campaign=FreeOS251Host",children:"Hosting is not allowed and your account is over storage. Upgrade now."})):(b=!1,g=(0,h.jsx)(R,{href:"https://billing.photobucket.com/?id=lite&type=monthly&utm_medium=web&utm_source=notices&utm_content=newsbar&utm_campaign=FreeOS251",children:"Your account is over storage. Upgrade now."})):u===d||c===p?f>v?(b=!0,g=(0,h.jsx)(R,{href:"https://billing.photobucket.com/?id=plus&type=monthly&utm_medium=web&utm_source=notices&utm_content=newsbar&utm_campaign=FreeFullHost",children:"Hosting is not allowed and your storage is full. Upgrade now."})):(b=!0,g=(0,h.jsx)(R,{href:"https://billing.photobucket.com/?id=lite&type=monthly&utm_medium=web&utm_source=notices&utm_content=newsbar&utm_campaign=FreeFull",children:"Your storage is full. Upgrade now."})):f>v?(b=!1,g=(0,h.jsx)(R,{href:"https://billing.photobucket.com/?id=plus&type=monthly&utm_medium=web&utm_source=notices&utm_content=newsbar&utm_campaign=FreeHost",children:"Hosting is not allowed with your plan. Upgrade now."})):u>=.9*d||c>=.9*p?f>v?(b=!1,g=(0,h.jsx)(R,{href:"https://billing.photobucket.com/?id=plus&type=monthly&utm_medium=web&utm_source=notices&utm_content=newsbar&utm_campaign=FreeApproachingHost",children:"Hosting is not allowed with your plan. Upgrade now."})):(b=!0,g=(0,h.jsx)(R,{href:"https://billing.photobucket.com/?id=lite&type=monthly&utm_medium=web&utm_source=notices&utm_content=newsbar&utm_campaign=FreeApproachingUpgrade",children:"Click here to keep all your photos safe for only $6!"})):(b=!0,g=(0,h.jsx)(R,{href:"https://billing.photobucket.com/?id=lite&type=monthly&utm_medium=web&utm_source=notices&utm_content=newsbar&utm_campaign=FreeGeneralUpgrade",children:"Click here to keep all your photos safe for only $6!"})):"beginner"===l.split(/[\s-_]+/)[0].toLowerCase()||l.split(/[\s-_]+/)[0].toLowerCase();var x=new M.Z;b&&x.get("pb_dismissed")||(m(b),s(g))}}),[t]),(0,l.YR)()||n?null:(0,h.jsx)(P.Z,{in:!!o,children:(0,h.jsxs)(I.Z,{variant:"dense",sx:{padding:"10px",color:"#fff",backgroundColor:p.palette.primary.main},children:[(0,h.jsx)(E.Z,{variant:"h6",align:"center",sx:{fontWeight:400,flex:1,color:"#fff"},children:o}),c&&(0,h.jsx)(S.Z,{sx:{alignSelf:"flex-start"},children:(0,h.jsx)(k.Z,{size:"small","aria-label":"close",onClick:function(){(new M.Z).set("pb_dismissed",!0,(0,y.Z)((0,y.Z)({},z.ZP.cookieOptions),{},{maxAge:86400})),s(null)},sx:{color:p.palette.primary.contrastText},children:(0,h.jsx)(C.Z,{fontSize:"small"})})})]})})}var U=n(58965),_=n(57451),B=n(4942),F=n(72668),O=n(11163),W=n(42832),V=n(16031),H=n(57912),N=n(16499),K=n(69437),G=n(38944),q=n(99548),Q=n(8566),Y=n(19843),$=n(27040),X=n(14626),J=n(38830),ee=n(40887),te=n(19212),ne=n(12010),ie=n(84360),re=n(86799),ae=n(25002),oe=n(96672);function le(e){var t=e.id,n=e.anchorEl,i=e.handleClose,r=(0,v.x)().readFragment({id:"AlbumV2:".concat(t),fragment:b.KPs}),a=(0,T.Z)();return r?(0,h.jsx)(ae.ZP,{id:"popover-".concat(t),open:Boolean(n),anchorEl:n,onClose:i,anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"left"},disableRestoreFocus:!0,PaperProps:{elevation:2,sx:{border:"1px solid ".concat(a.palette.primary.highlight)}},sx:{pointerEvents:"none"},children:(0,h.jsxs)("div",{style:{width:340},children:[(0,h.jsxs)(S.Z,{sx:{display:"flex",backgroundColor:a.palette.primary.highlight,padding:"10px",justifyContent:"center"},children:[r&&(0,h.jsx)(oe.Cd,{privacyMode:r.privacyMode}),(0,h.jsx)(E.Z,{sx:{fontWeight:600,marginLeft:1,padding:0},children:(null===r||void 0===r?void 0:r.title)||"Loading"})]}),(0,h.jsxs)(S.Z,{sx:{display:"flex",flexWrap:"wrap",padding:"10px",gap:"10px",justifyContent:"center"},children:[(0,h.jsxs)(E.Z,{variant:"subtitle2",noWrap:!0,children:[(0,h.jsx)("strong",{children:"Images: "}),(null===r||void 0===r?void 0:r.counters.imageCountIncludeSubAlbums)||0," total"]}),(0,h.jsxs)(E.Z,{variant:"subtitle2",noWrap:!0,children:[(0,h.jsx)("strong",{children:"Albums: "})," ",(null===r||void 0===r?void 0:r.counters.nestedAlbumsCount)||0," total"]})]})]})}):null}var se=n(90448);function ue(e){var t=e.height,n=e.data,i=e.isOpen,r=e.resize,a=e.style,u=e.toggle,d=(0,o.s0)(),c=(0,o.bS)("/u/:userId/a/:albumId"),m=(0,s.Z)(),p=m.isShareDisabled,f=m.isAccountOverStorage,v=m.isMoveDisabled,b=m.isDownloadDisabled,g=(0,D.useState)(null),x=(0,w.Z)(g,2),Z=x[0],j=x[1],y=n.id,C=n.owner,A=n.title,S=n.isLeaf,P=n.nestingLevel,I=y,E=(null===c||void 0===c?void 0:c.params.albumId)===I,M=(0,T.Z)();(0,D.useEffect)((function(){"0"===I&&0!==t&&r(0,!0)}),[t,I,r]);var z=function(){j(null)};return(0,h.jsxs)(re.W,{style:a,nestingLevel:P,isActive:E,children:[(0,h.jsx)(se.Z,{albumId:I}),!S&&(0,h.jsx)(k.Z,{"data-test":"toggle-sub-album",size:"small",disableRipple:!0,onClick:u,disabled:S,"aria-label":i?"Expand":"Collapse",sx:{color:"primary.main",height:"20px",width:"20px","&:hover":{color:M.palette.secondary.main,backgroundColor:M.palette.primary.highlight}},children:i?(0,h.jsx)(te.Z,{}):(0,h.jsx)(ne.Z,{})}),S&&(0,h.jsx)("div",{style:{width:20}}),(0,h.jsx)(re.I,{"data-test":y,size:"large",color:"inherit",onClick:function(){(0,l.nt)(null),d(n.path||"/u/".concat(C,"/a/").concat(I))},onMouseEnter:function(e){j(e.currentTarget)},onMouseLeave:z,"aria-owns":Z?"popover-".concat(y):void 0,"aria-haspopup":"true",sx:{paddingLeft:"5px",fontWeight:400,"&:hover":{backgroundColor:"transparent",color:"primary.main"},color:E?"primary.main":"secondary.main"},children:A}),(0,h.jsx)(ie.Z,{albumId:I,username:C,isShareDisabled:!!p,isAccountOverStorage:f,isMoveDisabled:!!v,isDownloadDisabled:b}),(0,h.jsx)(le,{id:y,anchorEl:Z,handleClose:z})]})}function de(e){var t,n,i=e.height,r=e.data,a=e.isOpen,o=e.resize,s=e.style,u=e.toggle,d=(0,l.at)(),c=null===d||void 0===d||null===(t=d.profile)||void 0===t?void 0:t.defaultAlbum,m=null===d||void 0===d||null===(n=d.profile)||void 0===n?void 0:n.mobileAlbum,p=r.id;if(!c)return null;switch(p){case c:return(0,h.jsx)(ee.Z,{height:i,data:r,isOpen:a,resize:o,style:s,toggle:u});case"root":case m:case"albums":case"drawer-album-favorites":case"drawer-album-trash":return(0,h.jsx)(J.Z,{height:i,data:r,isOpen:a,resize:o,style:s,toggle:u});default:return(0,h.jsx)(ue,{height:i,data:r,isOpen:a,resize:o,style:s,toggle:u})}}function ce(e){var t,n,i,r=e.removeFavoriteAlbum,a=(0,l.at)(),o=null===a||void 0===a||null===(t=a.profile)||void 0===t?void 0:t.username,s=null===a||void 0===a||null===(n=a.profile)||void 0===n?void 0:n.defaultAlbum,u=null===a||void 0===a||null===(i=a.profile)||void 0===i?void 0:i.mobileAlbum,d=(0,F.a)(b.Xsc,{variables:{sortBy:{desc:!1}}}).data,c=(0,D.useRef)(null),m=(null===d||void 0===d?void 0:d.albumsReadAll)||[],p=(0,$.Z)(m,[u]);return(0,V.isEmpty)(p)||!o?null:(0,h.jsx)(S.Z,{component:"nav",style:{position:"relative",flex:1,padding:"10px",fontWeight:"400"},children:(0,h.jsx)(Q.Z,{disableWidth:!0,children:function(e){var t=e.height;return(0,h.jsx)(Y.qF,{ref:c,itemData:m,treeWalker:(0,X.Z)(p,o,s,u,r),height:t,width:"100%",children:de})}})})}function me(e){var t,n,i,r=e.profile,a=(0,s.Z)(),o=null!==r&&void 0!==r&&null!==(t=r.subscription)&&void 0!==t&&t.totalImagesCount?null===r||void 0===r||null===(n=r.subscription)||void 0===n?void 0:n.totalImagesCount:0,l=(0,F.a)(b.G1w,{variables:{attributes:["favorite"],sortBy:b.hqH.Date,desc:!0,pageSize:10}}),u=(null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i.imagesReadByAttributes.items)||[],d=(0,V.isEmpty)(u)&&a.isFavoriteDisabled&&a.isFavoriteDisabled||!1;return(0,h.jsxs)(h.Fragment,{children:[r&&(0,h.jsxs)(S.Z,{sx:{borderBottom:"1px solid #dfdfdf",padding:"10px"},children:[(0,h.jsxs)(S.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,h.jsxs)(W.Z,{direction:"row",justifyContent:"space-between",children:[(0,h.jsxs)(W.Z,{direction:"row",spacing:"4px",alignItems:"center",children:[(0,h.jsx)(O.Z,{}),(0,h.jsx)(E.Z,{component:"h3",sx:{fontSize:"1.25rem",fontWeight:"600"},children:"My Bucket"})]}),(0,h.jsx)(H.Z,{})]}),(0,h.jsxs)(E.Z,{component:"h4",sx:{fontSize:"0.75rem",marginBottom:"10px"},children:[o," Photos"]})]}),(0,h.jsx)(N.Z,{userId:r.id})]}),(0,h.jsx)(ce,{removeFavoriteAlbum:d}),(null===r||void 0===r?void 0:r.subscription)&&(0,h.jsx)(q.Z,{subscription:r.subscription})]})}function pe(e){var t=e.isPublic,n=(0,i.l)(l.at);return t?(0,h.jsx)(K.Z,{}):null!==n&&void 0!==n&&n.profile?(0,h.jsx)(me,{profile:n.profile}):(0,h.jsx)(G.Z,{})}function he(e){var t=e.isPublic;return(0,h.jsx)(a.ZP,{sx:(0,B.Z)({width:280,flexShrink:0,zIndex:1},"& .MuiDrawer-paper",{position:"static",borderRight:"1px solid #dfdfdf"}),variant:"permanent",PaperProps:{id:"album-menu"},children:(0,h.jsx)(pe,{isPublic:t})})}pe.defaultProps={isPublic:!1},he.defaultProps={isPublic:!1};var fe=n(92881);function ve(e){var t=e.isPublic;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(_.Z,{lgUp:!0,children:(0,h.jsx)(fe.Z,{isPublic:t})}),(0,h.jsx)(_.Z,{lgDown:!0,children:(0,h.jsx)(he,{isPublic:t})})]})}ve.defaultProps={isPublic:!1};var be=(0,r.ZP)("main")({display:"flex",flex:1,overflowX:"hidden",flexDirection:"column",position:"relative"}),ge=(0,r.ZP)("div")(();function xe(e){var t=e.children,n=e.isPublic,r=(0,i.l)(l.nt),c=(0,i.l)(l._$),m=(0,i.l)(l.nK),p=(0,s.Z)(),v=(0,o.s0)(),b=return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},children:[(0,h.jsx)(L,{}),(0,h.jsx)(j.Z,{isPublic:n}),(0,h.jsxs)(ge,{children:[(0,h.jsx)(ve,{isPublic:n}),(0,h.jsx)(be,{id:"main",children:t})]})]}),(0,h.jsx)(Z.Z,{}),(0,h.jsx)(a.ZP,{anchor:"right",open:"albumDetails"===r,onClose:b,PaperProps:{sx:{width:"400px",maxWidth:"100%"}},children:m&&(0,h.jsx)(d.Z,{id:m,onClose:b,isPasswordProtectedDisabled:p.isFreeUser})}),(0,h.jsx)(a.ZP,{anchor:"right",open:"albumMove"===r,onClose:b,PaperProps:{sx:{width:"400px",maxWidth:"100%"}},children:m&&(0,h.jsx)(U.Z,{albumIds:[m],onClose:b,handleMoveSuccess:b})}),(0,h.jsx)(f,{ids:m?[m]:[],open:"albumDelete"===c,handleClose:function(){(0,l.nt)(null),(0,l._$)(null),v("/u/".concat(p.username))}}),(0,h.jsx)(x,{ids:m?[m]:[],open:"albumShare"===c,handleClose:b,username:p.username}),(0,h.jsx)(u.Z,{})]})}xe.defaultProps={isPublic:!1}},96672:function(e,t,n){n.d(t,{Cd:function(){return E},ZP:function(){return D}});var i=n(4942),r=n(15861),a=n(1413),o=n(29439),l=n(64687),s=n.n(l),u=n(29137),d=n(57929),c=n(13774),m=n(17592),p=n(33604),h=n(96467),f=n(16783),v=n(4117),b=n(24193),g=n(66149),x=n(85582),Z=n(51405),j=n(61689),y=n(61113),w=n(47313),C=n(51748),A=n(28422),S=n(63694),P=(n(12164),n(34219)),k=n(46417);(0,m.ZP)("span")((function(e){return{color:e.theme.palette.primary.main,"&:hover":{textDecoration:"underline",cursor:"pointer"}}}));function I(e){var t=(0,P.Z)().mutation,n=(0,w.useState)({}),l=(0,o.Z)(n,2),u=l[0],d=l[1],c=(0,w.useState)({}),m=(0,o.Z)(c,2),x=m[0],Z=m[1],j=function(){var n=(0,r.Z)(s().mark((function n(r){var a,o;return s().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,null===r||void 0===r||r.preventDefault(),u.password){n.next=4;break}throw new C.Z("Password is required","password");case 4:a={id:e.id,privacyMode:A.zCR.PasswordProtected,addPasswords:[{id:e.id,title:"password",password:u.password}]},t({variables:a}),e.handleClose(),n.next=18;break;case 9:n.prev=9,n.t0=n.catch(0),o=n.t0,n.t1=o.code,n.next="RequiredParameterException"===n.t1?15:17;break;case 15:return Z((0,i.Z)({},o.parameterName,o.message)),n.abrupt("break",18);case 17:Z({general:o.message});case 18:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}();return(0,k.jsx)(g.Z,{onClose:e.handleClose,open:e.open,children:(0,k.jsxs)("form",{onSubmit:j,children:[(0,k.jsx)(p.Z,{children:"Set Album Password"}),(0,k.jsx)(h.Z,{children:(0,k.jsx)(f.Z,{error:Boolean(x.password),fullWidth:!0,helperText:x.password,"data-test":"password",label:"Password",margin:"normal",name:"password","data-sr-redact":!0,onChange:function(e){var t=(0,a.Z)({},u),n=e.target.name;t[n]=e.target.value,d(t);var i=(0,a.Z)({},x);delete i[n],delete i.general,Z(i)},required:!0,type:"password"})}),(0,k.jsxs)(v.Z,{children:[(0,k.jsx)(b.Z,{"data-test":"close",onClick:e.handleClose,children:"Cancel"}),(0,k.jsx)(b.Z,{"data-test":"submit",type:"submit",color:"primary",children:"Save"})]})]})})}function E(e){switch(e.privacyMode){case A.zCR.Private:return(0,k.jsx)(d.Z,{className:e.className,color:e.color});case A.zCR.PasswordProtected:return(0,k.jsx)(u.Z,{className:e.className,color:e.color});default:return(0,k.jsx)(c.Z,{className:e.className,color:e.color})}}var T=(0,m.ZP)(E)({marginRight:"8px"});function D(e){var t=(0,w.useState)(null),n=(0,o.Z)(t,2),i=n[0],r=n[1],a=(0,P.Z)().mutation,l=(0,S.Z)().isModifyAlbumsDisabled,s=(0,w.useState)(!1),u=(0,o.Z)(s,2),d=u[0],c=u[1],m=function(t){return function(){var n={id:e.album.id,privacyMode:t};a({variables:n}),r(null)}};return e.hidden?null:(0,k.jsxs)(k.Fragment,{children:[!l&&(0,k.jsx)(j.Z,{arrow:!0,title:e.album.privacyMode===A.zCR.Public?"Make Private":"Make Public",children:(0,k.jsx)(b.Z,{"data-value":e.album.privacyMode,"data-test":"privacy-modal-btn",onClick:function(e){r(e.currentTarget)},color:e.album.privacyMode===A.zCR.Public?"primary":"inherit",size:"large",sx:{minWidth:0,padding:"2px"},children:(0,k.jsx)(E,{privacyMode:e.album.privacyMode})})}),(0,k.jsxs)(x.Z,{anchorEl:i,keepMounted:!0,open:Boolean(i),"data-test":"privacy-menu",onClose:function(){r(null)},children:[(0,k.jsx)(Z.Z,{disabled:!0,children:(0,k.jsx)(y.Z,{variant:"caption",children:"Album Privacy:"})}),(0,k.jsxs)(Z.Z,{onClick:m(A.zCR.Public),"data-test":"public",children:[(0,k.jsx)(T,{privacyMode:A.zCR.Public,color:e.album.privacyMode===A.zCR.Public?"primary":"inherit"}),(0,k.jsx)(y.Z,{variant:"subtitle2",children:"Public"})]}),(0,k.jsxs)(Z.Z,{onClick:m(A.zCR.Private),"data-test":"private",children:[(0,k.jsx)(T,{"data-test":"private",privacyMode:A.zCR.Private,color:e.album.privacyMode===A.zCR.Private?"primary":"inherit"}),(0,k.jsx)(y.Z,{variant:"subtitle2",children:"Private"})]}),(0,k.jsxs)(Z.Z,{onClick:function(){c(!0)},"data-test":"password-protected",disabled:e.isPasswordProtectedDisabled,children:[(0,k.jsx)(T,{"data-test":"password-protected",privacyMode:A.zCR.PasswordProtected,color:e.album.privacyMode===A.zCR.PasswordProtected?"primary":"inherit"}),(0,k.jsx)(y.Z,{variant:"subtitle2",children:"Password Protected"})]})]}),(0,k.jsx)(I,{id:e.album.id,open:d,handleClose:)]})}E.defaultProps={color:"inherit"},D.defaultProps={hidden:!1}},98976:58965:function(e,t,n){n.d(t,{Z:function(){return H}});var i=n(15861),r=n(93433),a=n(29439),o=n(1413),l=n(64687),s=n.n(l),u=n(8586),d=n(35045),c=n(2040),m=n(92507),p=n(19860),h=n(9019),f=n(61113),v=n(47131),b=n(16783),g=n(41727),x=n(24193),Z=n(48310),j=n(58800),y=n(60194),w=n(74748),C=n(83213),A=n(85281),S=n(24929),P=n(94970),k=n(16031),I=n(47313),E=n(91345),T=n(96672),D=n(83798),M=n(12164),z=n(7469),R=n(60790),L=n(18248),U=n(28422);var _=n(54045),B=n(51824),F=n(46417);var O=function(e){var t=e.album.id,n=return e.album.id===e.mobileUploadId?null:(0,F.jsxs)(y.ZP,{button:!0,disabled:e.disabled,"data-test":"drawer-album-".concat(t),onClick:n,style:{paddingLeft:"40px",cursor:"pointer",color:S.Z[900]},"data-cy":"disabled-album-".concat(e.disabled),children:[(0,F.jsx)(w.Z,{style:{color:"inherit"},children:(0,F.jsx)(T.Cd,{privacyMode:e.album.privacyMode})}),(0,F.jsx)(C.Z,{"data-test":"albums-menu-item",primary:e.album.title}),!e.isAlbumsEmpty&&!e.disabled&&(0,F.jsx)(B.Z,{sx:{right:0},onClick:n,children:(0,F.jsx)(v.Z,{"data-test":"drawer-album-expand-".concat(t),id:"drawer-album-expand-".concat(t),size:"large",children:(0,F.jsx)(_.Z,{})})})]})},W=(new Date).toLocaleDateString();function V(e){var t,n,l,_=e.imageIds,B=void 0===_?[]:_,V=e.albumIds,H=void 0===V?[]:V,N=e.handleMoveSuccess,K=e.onClose,G=(0,M.Z)(),q=(0,D.Z)(),Q=q.mutation,Y=q.results,$=(0,z.Z)(),X=$.mutation,J=$.loading,ee=function(){var e,t=(0,R.D)(U.HtB,{refetchQueries:[U.Xsc],awaitRefetchQueries:!0}),n=(0,a.Z)(t,2),i=n[0],r=n[1];return(0,I.useEffect)((function(){var e;if(null!==(e=r.data)&&void 0!==e&&e.moveAlbums){var t={id:(0,L.Z)(),message:"Success! Album(s) have been moved!",severity:"success"};(0,E.sh)([t])}}),[null===(e=r.data)||void 0===e?void 0:e.moveAlbums]),(0,I.useEffect)((function(){if(r.error){var e={id:(0,L.Z)(),message:"There was a problem moving albums. Please try again later.",severity:"error"};(0,E.sh)([e])}}),[r.error]),{mutation:i,results:r,loading:r.loading}}(),te=ee.mutation,ne=ee.loading,ie=(0,p.Z)(),re=(0,E.at)(),ae=(0,I.useState)(!1),oe=(0,a.Z)(ae,2),le=oe[0],se=oe[1],ue=(0,I.useState)(W),de=(0,a.Z)(ue,2),ce=de[0],me=de[1],pe=(0,I.useState)(null),he=(0,a.Z)(pe,2),fe=he[0],ve=he[1],be=(0,I.useState)(null),ge=(0,a.Z)(be,2),xe=ge[0],Ze=ge[1],je=(0,I.useState)(G.allAlbums),ye=(0,a.Z)(je,2),we=ye[0],Ce=ye[1],Ae=G.rootAlbum,Se=(0,I.useMemo)((function(){return(0,k.debounce)((function(e){var t;e||Ce(G.allAlbums),Ce(null===(t=G.allAlbums)||void 0===t?void 0:t.filter((function(t){return(0,k.includes)(t.title.toLowerCase(),e.toLowerCase())})))}),500)}),[G.allAlbums]),Pe=null===we||void 0===we?void 0:we.map((function(e){var t;return function(e,t){return(0,o.Z)({},e).id===t?(0,o.Z)((0,o.Z)({},e),{},{order:1}):(0,o.Z)((0,o.Z)({},e),{},{order:1/0})}(e,(null===re||void 0===re||null===(t=re.profile)||void 0===t?void 0:t.mobileAlbum)||null)})),ke=(0,k.groupBy)(Pe,(),Ie=(null===fe||void 0===fe?void 0:fe.id)===(null===fe||void 0===fe?void 0:fe.parentAlbumId),Ee=(null===fe||void 0===fe?void 0:fe.id)===(null===re||void 0===re||null===(t=re.profile)||void 0===t?void 0:t.mobileAlbum),Te=(null===re||void 0===re||null===(n=re.profile)||void 0===n?void 0:n.mobileAlbum)||"",De=(0,I.useCallback)((function(e){return e&&G.allAlbums.find((function(t){return t.id===e}))||null}),[G.allAlbums]);if((0,I.useEffect)((,[Se]),(0,I.useEffect)((,[G.allAlbums]),(0,I.useEffect)((,[Ae]),(0,I.useEffect)((function(){fe&&fe.id!==fe.parentAlbumId?Ze(De(fe.parentAlbumId)):Ze(null)}),[fe,De]),(0,I.useEffect)((function(){var e;if(null!==(e=Y.data)&&void 0!==e&&e.albumCreate){var t=Y.data.albumCreate.id;ve(De(t))}}),[null===(l=Y.data)||void 0===l?void 0:l.albumCreate,De]),!fe)return null;var Me=function(){var e=(0,i.Z)(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!B.length){e.next=4;break}return t={targetAlbumId:fe.id,imageIds:B},e.next=4,X({variables:t});case 4:if(!H.length){e.next=8;break}return n={targetAlbumId:fe.id,albumIds:H},e.next=8,te({variables:n});case 8:K(),N&&N();case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ze=function(){var e=(0,i.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={parentAlbumId:fe.id,title:ce},Q({variables:t}),se(!1),me("");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Re=J||ne,Le=function(){var e;return(null===(e=G.allAlbums)||void 0===e?void 0:e.filter(()).map(().includes(!0)};return(0,F.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100vh"},"data-test":"move-drawer",children:[(0,F.jsxs)(h.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",sx:{borderBottom:"1px solid #EAEAEA",padding:ie.spacing(2,2,2,2)},children:[(0,F.jsx)(f.Z,{style:{fontSize:18,color:"#081230"},children:"Choose an Album"}),(0,F.jsx)(v.Z,{onClick:K,size:"large",children:(0,F.jsx)(u.Z,{})})]}),(0,F.jsxs)("div",{style:{padding:16},children:[(0,F.jsx)(b.Z,{onChange:fullWidth:!0,placeholder:"Search",variant:"outlined",InputProps:{startAdornment:(0,F.jsx)(g.Z,{position:"start",children:(0,F.jsx)(d.Z,{})})}}),le?(0,F.jsxs)("div",{style:{display:"flex",alignItems:"center",paddingTop:ie.spacing(2)},children:[(0,F.jsx)(b.Z,{value:ce,variant:"outlined",placeholder:"Enter Album Title",onChange:function(e){return me(e.target.value)},sx:{width:"200px",marginRight:"20px"},inputProps:{style:{padding:"10px"}}}),(0,F.jsx)(x.Z,{color:"primary",onClick:ze,disabled:Ee,children:"Create"}),(0,F.jsx)(x.Z,{color:"primary",onClick:function(){return se(!1)},disabled:Ee,children:"Cancel"})]}):(0,F.jsx)(x.Z,{startIcon:(0,F.jsx)(c.Z,{}),sx:{marginTop:ie.spacing(2),color:S.Z[900],textTransform:"initial"},onClick:function(){return se(!0)},disabled:Ee,children:"Create album"})]}),(0,F.jsxs)(Z.Z,{sx:{flex:1,padding:0,overflow:"auto"},"data-test":"album",children:[(0,F.jsx)(j.Z,{children:(0,F.jsx)(f.Z,{variant:"subtitle1",gutterBottom:!0,sx:{background:"#fff",marginTop:ie.spacing(1),display:"flex",alignItems:"center"},children:xe?(0,F.jsxs)(x.Z,{style:{color:S.Z[500]},onClick:function(){return ve(xe)},children:[(0,F.jsx)(m.Z,{style:{marginRight:"5px"}}),"Back to ".concat(xe.title)]}):"Albums"})}),!Ie&&(0,F.jsxs)(y.ZP,{button:!0,"data-test":"drawer-album-".concat(fe.id),sx:{color:ie.palette.primary.main,border:"1px solid ".concat(P.Z[100])},disabled:Le(),children:[(0,F.jsx)(w.Z,{style:{color:"inherit"},children:(0,F.jsx)(T.Cd,{privacyMode:fe.privacyMode})}),(0,F.jsx)(C.Z,{"data-test":"albums-menu-item",primary:fe.title})]}),!Ee&&(ke[fe.id]&&0!==ke[fe.id].length?(0,k.sortBy)(ke[fe.id],["order","title"]).map((function(e){return(0,F.jsx)(O,{album:e,isAlbumsEmpty:(0,k.isEmpty)(ke[e.id]),setSelectedAlbum:ve,mobileUploadId:Te,disabled:H.includes(e.id)},e.id)})):(0,F.jsxs)("div",{style:{padding:ie.spacing(3),textAlign:"center",fontSize:"14px",lineHeight:"20px",letterSpacing:"0.25px",color:S.Z[500]},children:[(0,F.jsx)("div",{children:"You have no albums in this folder ..."}),(0,F.jsxs)("div",{children:["Press ",(0,F.jsx)("span",{style:{color:ie.palette.primary.main,textDecoration:"underline"},children:"\u201cCreate album\u201d"})," to make a new one"]})]}))]}),(0,F.jsx)("div",{style:{borderTop:"1px solid #D3DADB",width:"100%",padding:ie.spacing(2)},children:function(){var e;return!Le()||fe.id!==(null===re||void 0===re||null===(e=re.profile)||void 0===e?void 0:e.defaultAlbum)}()?(0,F.jsx)(x.Z,{fullWidth:!0,variant:"contained",color:"primary",onClick:Me,"data-test":"move-images",disabled:Re,children:Re?(0,F.jsx)(A.Z,{}):"Move to ".concat(fe.title)}):(0,F.jsx)(x.Z,{disabled:!0,fullWidth:!0,variant:"contained",color:"primary","data-test":"select-album",children:"Select an Album"})})]})}V.defaultProps={imageIds:[],albumIds:[],handleMoveSuccess:void 0};var H=V},37673:function(e,t,n){n.d(t,{Z:function(){return h}});var i=n(4942),r=n(19860),a=n(66149),o=n(47131),l=n(96467),s=n(61113),u=n(4117),d=n(24193),c=n(8586),m=n(76482),p=n(46417);function h(e){var t,n=(0,r.Z)();return(0,p.jsxs)(a.Z,{"data-test":"delete-modal",open:e.isOpen,onClose:e.close,maxWidth:"sm",fullWidth:!0,disableScrollLock:!0,children:[(0,p.jsx)(o.Z,{sx:{position:"absolute",cursor:"pointer",right:10,top:10,zIndex:10},onClick:e.close,"data-test":"close-modal",children:(0,p.jsx)(c.Z,{})}),(0,p.jsxs)(l.Z,{sx:(0,i.Z)({display:"flex",alignItems:"center",flexDirection:"column",padding:"80px",textAlign:"center"},n.breakpoints.down("md"),{padding:"20px"}),children:[(0,p.jsx)("div",{style:{background:"rgba(6, 114, 203, 0.08)",borderRadius:"50%",width:"64px",height:"64px",textAlign:"center"},children:(0,p.jsx)(m.Z,{color:"primary",style:{width:"30px",height:"100%"}})}),(0,p.jsx)(s.Z,{sx:{fontWeight:600,fontSize:28,lineHeight:"32px",color:"#081230"},children:e.title}),(0,p.jsx)(s.Z,{sx:{color:"#2F364E",lineHeight:"24px",marginTop:"24px",marginBottom:"48px",maxWidth:"80%"},children:e.subTitle}),(0,p.jsxs)(u.Z,{sx:(t={width:"100%",justifyContent:"center"},(0,i.Z)(t,n.breakpoints.down("md"),{flexDirection:"column"}),(0,i.Z)(t,"& button",(0,i.Z)({width:"50%"},n.breakpoints.down("md"),{width:"100%",margin:"4px 0"})),t),children:[(0,p.jsx)(d.Z,{size:"small",variant:"contained",color:"primary",sx:{backgroundColor:n.palette.warning.main},onClick:e.onSubmit,"data-test":"confirm-modal",children:e.onSubmitText}),e.onSecondayAction&&(0,p.jsx)(d.Z,{size:"small",variant:"outlined",color:"primary",onClick:e.onSecondayAction,"data-test":"secondary-confirm-modal",children:e.onSecondayActionText})]})]})]})}h.defaultProps={onSecondayAction:void 0,onSecondayActionText:void 0}},84360:function(e,t,n){n.d(t,{Z:function(){return g}});var i=n(29439),r=n(5211),a=n(98636),o=n(51997),l=n(33973),s=n(43997),u=n(39074),d=n(51405),c=n(47131),m=n(85582),p=n(47313),h=n(58467),f=n(91345),v=n(30083),b=n(46417);function g(e){var t=e.albumId,n=e.username,g=e.isShareDisabled,x=e.isAccountOverStorage,Z=e.isMoveDisabled,j=e.isDownloadDisabled,y=(0,h.s0)(),w=(0,p.useState)(null),C=(0,i.Z)(w,2),A=C[0],S=C[1],P=k=function(e){return function(){(0,f.nK)(t),(0,f.nt)(e),S(null)}},I=function(e){return function(){(0,f.nK)(t),(0,f._$)(e),S(null)}};return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.Z,{"aria-label":"More Actions",onClick:function(e){S(e.currentTarget)},title:"More Actions",children:(0,b.jsx)(s.Z,{})}),(0,b.jsxs)(m.Z,{anchorEl:A,open:Boolean(A),onClose:P,children:[(0,b.jsxs)(d.Z,{onClick:k("albumDetails"),children:[(0,b.jsx)(l.Z,{style:{marginRight:8}})," Album Details"]}),(0,b.jsxs)(d.Z,{onClick:I("albumShare"),"data-test":"share-media-item",disabled:g,children:[(0,b.jsx)(u.Z,{style:{marginRight:8}})," Share Album"]}),(0,b.jsx)(v.Z,{ids:[t],onCompleted:P,disabled:j}),(0,b.jsxs)(d.Z,{onClick:I("albumDelete"),"data-test":"delete-menu-item",children:[(0,b.jsx)(o.Z,{style:{marginRight:8}})," Delete Album"]}),(0,b.jsxs)(d.Z,{onClick:k("albumMove"),"data-test":"move",id:"move-button",disabled:Z,children:[(0,b.jsx)(a.Z,{style:{marginRight:8}})," Move Album"]}),(0,b.jsxs)(d.Z,{onClick:function(){S(null),(0,f.nt)(null),y("/u/".concat(n,"/a/").concat(t,"/subalbums"),{replace:!0,state:{createNewSubAlbum:!0}})},disabled:x,children:[(0,b.jsx)(r.Z,{style:{marginRight:8}})," Create Album"]})]})]})}},69437:function(e,t,n){n.d(t,{Z:function(){return y}});var i=n(29439),r=n(19212),a=n(12010),o=n(61689),l=n(65033),s=n(47131),u=n(48310),d=n(60194),c=n(74748),m=n(83213),p=n(61113),h=n(16031),f=n(47313),v=n(58467),b=n(91345),g=n(31984),x=n(56179),Z=n(46417);function j(e){var t=e.album,n=e.username,o=e.currentAlbumId,u=e.padding,p=(0,v.s0)(),g=(0,f.useState)(!1),x=(0,i.Z)(g,2),y=x[0],w=x[1],C=t.id,A=t.children,S=2+u;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(d.ZP,{selected:C===o,button:!0,sx:{paddingLeft:(0,h.isEmpty)(A)?void 0:0},children:[!(0,h.isEmpty)(A)&&(0,Z.jsx)(c.Z,{sx:{minWidth:0},children:(0,Z.jsx)(s.Z,{onClick:function(){return w(!y)},sx:{padding:"4px"},"aria-label":y?"Expand":"Collapse",children:y?(0,Z.jsx)(r.Z,{sx:{fontSize:"30px"}}):(0,Z.jsx)(a.Z,{sx:{fontSize:"30px"}})})}),(0,Z.jsx)(m.Z,{onClick:function(){(0,b.nt)(null),p("/u/".concat(n,"/a/").concat(C))},primary:t.title||"No Title available",sx:{margin:"0",padding:"12px 0","&.MuiListItemText-root":{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",paddingLeft:(0,h.isEmpty)(A)?S:void 0}}})]}),A&&(0,Z.jsx)(l.Z,{in:y,sx:{background:y?"#efefef":void 0},unmountOnExit:!0,children:(0,h.sortBy)(A,["order","title"]).map((function(e){return(0,Z.jsx)(j,{album:e,username:n,currentAlbumId:o,padding:S+.5},e.id)}))})]})}function y(){var e,t,n,r=(0,v.UO)().userId,a=(0,x.Z)(),s=(0,f.useState)(!0),h=(0,i.Z)(s,2),b=h[0],y=h[1],w=null===(e=a.currentAlbum)||void 0===e?void 0:e.id;return r&&w?(0,Z.jsxs)(u.Z,{children:[(0,Z.jsxs)(d.ZP,{children:[(0,Z.jsx)(c.Z,{children:(0,Z.jsx)(g.Z,{width:"40px"})}),(0,Z.jsx)(m.Z,{primary:r})]}),(0,Z.jsx)(d.ZP,{button:!0,"data-test":"drawer-albums",id:"drawer-albums",onClick:children:(0,Z.jsx)(m.Z,{primary:(0,Z.jsx)(o.Z,{title:b?"Click to Hide Albums":"Click to Show Albums",children:(0,Z.jsx)(p.Z,{sx:{fontWeight:400,fontSize:"0.875rem"},children:b?"Hide Albums":"Show Albums"})})})}),(0,Z.jsx)(l.Z,{in:b,children:null===(t=a.albumTree)||void 0===t||null===(n=t.children)||void 0===n?void 0:n.map((function(e){return(0,Z.jsx)(j,{album:e,username:r,currentAlbumId:w,padding:0},e.id)}))})]}):null}},38944:function(e,t,n){n.d(t,{Z:function(){return Z}});var i=n(30040),r=n(71829),a=n(26362),o=n(36339),l=n(3685),s=n(68913),u=n(90891),d=n(48310),c=n(60194),m=n(32600),p=n(83213),h=n(46588),f=n(91345),v=n(2493),b=n(46417);function g(){var e=function(e){return function(){(0,f.nt)(null),window.open(e,"_blank")}};return(0,b.jsxs)(d.Z,{children:[(0,b.jsx)(c.ZP,{sx:{justifyContent:"center",paddingTop:16},children:(0,b.jsx)(v.Z,{})}),(0,b.jsxs)(c.ZP,{button:!0,"data-test":"drawer-help",divider:!0,id:"drawer-help",onClick:e(h.o.HELP_CENTER),children:[(0,b.jsx)(m.Z,{children:(0,b.jsx)(l.Z,{})}),(0,b.jsx)(p.Z,{primary:"Help Center"})]}),(0,b.jsxs)(c.ZP,{button:!0,"data-test":"drawer-contact-us",divider:!0,id:"drawer-contact-us",onClick:e(h.o.CONTACT_US),children:[(0,b.jsx)(m.Z,{children:(0,b.jsx)(a.Z,{})}),(0,b.jsx)(p.Z,{primary:"Contact Us"})]})]})}function x(){var e=return(0,b.jsxs)(c.ZP,{sx:{"& a":{marginRight:4}},children:[(0,b.jsx)(u.Z,{"data-test":"drawer-facebook",href:h.o.FACEBOOK,id:"drawer-facebook",onClick:e,target:"_blank",children:(0,b.jsx)(i.Z,{width:40,height:40})}),(0,b.jsx)(u.Z,{"data-test":"drawer-twitter",href:h.o.TWITTER,id:"drawer-twitter",onClick:e,target:"_blank",children:(0,b.jsx)(s.Z,{width:40,height:40})}),(0,b.jsx)(u.Z,{"data-test":"drawer-instagram",href:h.o.INSTAGRAM,id:"drawer-instagram",onClick:e,target:"_blank",children:(0,b.jsx)(r.Z,{width:40,height:40})}),(0,b.jsx)(u.Z,{"data-test":"drawer-pinterest",href:h.o.PINTEREST,id:"drawer-pinterest",onClick:e,target:"_blank",children:(0,b.jsx)(o.Z,{width:40,height:40})})]})},99548:function(e,t,n){n.d(t,{Z:function(){return h}});var i=n(72668),r=n(61689),a=n(94149),o=n(48310),l=n(60194),s=n(83213),u=n(28422),d=n(75909),c=n(25258),m=n(39437),p=n(46417);function h(e){var t,n,h=e.subscription,f=(0,m.Z)().createAlert,v=(null===h||void 0===h||null===(t=h.plan)||void 0===t?void 0:t.maxImagesCount)||1/0,b=(null===h||void 0===h||null===(n=h.plan)||void 0===n?void 0:n.maxSpace)||1/0,g=h.totalImagesCount/v*100,x=h.totalUserUsedSpace/b*100,Z=(0,i.a)(u.Mxe,{onError:function(e){c.Z.error("[GetTrashAlbumDetailsDocument]: ".concat(e.message)),f("Unable to retrieve trash album details. Please try again later")}}).data,j=(null===Z||void 0===Z?void 0:Z.getTrashAlbumDetails.imageCount)||0,y=(0,d.Z)(null===Z||void 0===Z?void 0:Z.getTrashAlbumDetails.usedSpace,2)||0,w="".concat(j,1===j?" Image":" Images");return(0,p.jsxs)(o.Z,{children:[(0,p.jsx)(r.Z,{title:"Trash Count: ".concat(w),children:(0,p.jsx)(l.ZP,{sx:{paddingTop:0,paddingBottom:0},children:(0,p.jsx)(s.Z,{primary:(0,p.jsx)(a.Z,{"aria-label":"Used ".concat(h.totalImagesCount," images of ").concat(h.plan.maxImagesCount||"Unlimited"),variant:"determinate",value:Math.min(g,100),color:g>75?"secondary":"primary"}),secondary:"Used ".concat(h.totalImagesCount," images of ").concat(h.plan.maxImagesCount||"Unlimited")})})}),(0,p.jsx)(r.Z,{title:"Trash Storage: ".concat(y),children:(0,p.jsx)(l.ZP,{sx:{paddingTop:0,paddingBottom:0},children:(0,p.jsx)(s.Z,{primary:(0,p.jsx)(a.Z,{"aria-label":"Used ".concat((0,d.Z)(h.totalUserUsedSpace)," of ").concat(h.plan.maxSpace?(0,d.Z)(h.plan.maxSpace):"Unlimited"),variant:"determinate",value:Math.min(x,100),color:x>75?"secondary":"primary"}),secondary:"Used ".concat((0,d.Z)(h.totalUserUsedSpace)," of ").concat(h.plan.maxSpace?(0,d.Z)(h.plan.maxSpace):"Unlimited")})})})]})}},38830:function(e,t,n){n.d(t,{Z:function(){return P}});var i=n(1413),r=n(2040),a=n(57829),o=n(47131),l=n(20201),s=n(47313),u=n(58467),d=n(91345),c=n(63694),m=n(90448),p=n(93433),h=n(29439),f=n(91554),v=n(17592),b=n(16031),g=n(19332),x=n(46417),Z=(0,v.ZP)(f.Z)((function(e){return{position:"absolute",width:"100%",zIndex:e.theme.zIndex.drawer-1}}));function j(){var e=(0,g.Z)().mutation,t=(0,s.useRef)(null),n=(0,s.useState)(!1),i=(0,h.Z)(n,2),r=i[0],a=i[1];return(0,s.useEffect)((function(){var n,i=null===(n=t.current)||void 0===n?void 0:n.parentElement;if(!i)return function(){};var r=function(e){e.preventDefault(),e.stopPropagation(),a(!0)},o=function(e){e.preventDefault(),e.stopPropagation(),a(!1)},l=function(t){var n,i;t.preventDefault(),t.stopPropagation(),a(!1);var r=null===(n=t.dataTransfer)||void 0===n?void 0:n.getData("id");if(null===(i=t.dataTransfer)||void 0===i||i.clearData(),r&&!(0,b.isEmpty)(r)){var o=[];if("all"===r){var l=(0,d.WV)();o.push.apply(o,(0,p.Z)(l))}else o.push(r);if(!(0,b.isEmpty)(o))e({variables:{imageIds:o,add:["favorite"]}}),(0,d._N)({}),(0,d.WV)([])}};return i.addEventListener("dragover",r),i.addEventListener("drop",l),i.addEventListener("dragleave",o),function(){i.removeEventListener("dragover",r),i.removeEventListener("drop",l),i.removeEventListener("dragleave",o)}}),[e]),(0,x.jsx)(Z,{ref:t,open:r})}var y=n(37673),w=n(29009),C=(0,v.ZP)(f.Z)((function(e){return{position:"absolute",width:"100%",zIndex:e.theme.zIndex.drawer-1}}));function A(){var e=(0,s.useState)(!1),t=(0,h.Z)(e,2),n=t[0],i=t[1],r=(0,w.Z)().mutation,a=(0,s.useRef)(null),o=(0,s.useState)(!1),l=(0,h.Z)(o,2),u=l[0],c=l[1],m=(0,s.useRef)([]);(0,s.useEffect)((function(){var e,t=null===(e=a.current)||void 0===e?void 0:e.parentElement;if(!t)return function(){};var n=function(e){e.preventDefault(),e.stopPropagation(),c(!0)},r=function(e){e.preventDefault(),e.stopPropagation(),c(!1)},o=function(e){var t,n;e.preventDefault(),e.stopPropagation(),c(!1);var r=null===(t=e.dataTransfer)||void 0===t?void 0:t.getData("id");if(null===(n=e.dataTransfer)||void 0===n||n.clearData(),r&&!(0,b.isEmpty)(r)){var a=[];if("all"===r){var o=(0,d.WV)();a.push.apply(a,(0,p.Z)(o))}else a.push(r);(0,b.isEmpty)(a)||(m.current=a,i(())}};return t.addEventListener("dragover",n),t.addEventListener("drop",o),t.addEventListener("dragleave",r),function(){t.removeEventListener("dragover",n),t.removeEventListener("drop",o),t.removeEventListener("dragleave",r)}}),[]);var f=function(){m.current=[],i(!1)};return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(C,{ref:a,open:u}),(0,x.jsx)(y.Z,{isOpen:n,onSubmitText:(0,x.jsx)("p",{children:"Yes, Delete"}),onSubmit:function(){var e={imageIds:m.current};r({variables:e}),f(),(0,d._N)({}),(0,d.WV)([])},close:f,title:"Are you sure you want to move to trash?",subTitle:"You are about to delete ".concat(m.current.length," images.")})]})}var S=n(86799);function P(e){var t,n=e.height,p=e.data,h=e.resize,f=e.style,v=(0,u.s0)(),b=(0,c.Z)(),g=(0,u.bS)("/u/:userId/a/:albumId"),Z=(0,d.at)(),y=null===Z||void 0===Z||null===(t=Z.profile)||void 0===t?void 0:t.defaultAlbum,w=(0,l.Z)(),C=p.id,P=p.owner,k=p.title,I=C,E=null!==g&&void 0!==g&&g.params.albumId?(null===g||void 0===g?void 0:g.params.albumId)===I:window.location.pathname===p.path;(0,s.useEffect)((function(){"0"===I&&0!==n&&h(0,!0)}),[n,I,h]);var T=function(){(0,d.nt)(null),v(p.path||"/u/".concat(P,"/a/").concat(I))};return(0,x.jsxs)(a.Z,{sx:(0,i.Z)((0,i.Z)({},f),{},{backgroundColor:E?w.palette.primary.highlight:void 0,paddingRight:"10px",borderRadius:"4px",display:"flex",alignItems:"center","&:hover":{backgroundColor:w.palette.primary.highlight}}),children:[(0,x.jsx)(o.Z,{size:"small","aria-label":"Pinned Album",onClick:T,disableRipple:!0,style:{marginLeft:"root"===C?2:void 0,color:w.palette.secondary.main},children:p.icon}),(0,x.jsx)(S.I,{"data-test":C,size:"large",disableRipple:!0,color:"secondary",onClick:T,sx:{fontWeight:400,"&:hover":{backgroundColor:"transparent"}},children:k}),"albums"===C&&(0,x.jsx)(o.Z,{onClick:function(){(0,d.nt)(null),v("/u/".concat(P,"/albums"),{replace:!0,state:{createNewAlbum:!0}})},disableRipple:!0,"aria-label":"Create Album",sx:{color:"secondary.main",height:"30px",width:"30px","&:hover":{color:"secondary.contrastText",backgroundColor:"secondary.main"}},children:(0,x.jsx)(r.Z,{})}),"drawer-album-favorites"===C&&!b.isFavoriteDisabled&&(0,x.jsx)(j,{}),"drawer-album-trash"===C&&(0,x.jsx)(A,{}),"root"===C&&y&&(0,x.jsx)(m.Z,{albumId:y})]})}},86799:function(e,t,n){n.d(t,{I:function(){return a},W:function(){return o}});var i=n(17592),r=n(24193),a=(0,i.ZP)(r.Z)((),o=(0,i.ZP)("div",{shouldForwardProp:function(e){return!["isActive","nestingLevel"].includes(e.toString())}})((function(e){var t=e.isActive,n=e.nestingLevel,i=e.theme,r="transparent";return t?r="dark"===i.palette.mode?"".concat(i.palette.primary.contrastText):"#F6F6F6":n>1&&(r="".concat(i.palette.primary.highlight)),{display:"flex",background:r,alignItems:"center",paddingLeft:14*(n-1)+4,overflow:"hidden"}}))},40887:function(e,t,n){n.d(t,{Z:function(){return m}});var i=n(1413),r=n(19212),a=n(12010),o=n(57829),l=n(47131),s=n(20201),u=n(47313),d=n(86799),c=n(46417);function m(e){var t=e.height,n=e.data,m=e.isOpen,p=e.resize,h=e.style,f=e.toggle,v=n.id,b=n.isLeaf,g=(0,s.Z)();return(0,u.useEffect)((function(){"0"===v&&0!==t&&p(0,!0)}),[t,v,p]),(0,c.jsxs)(o.Z,{sx:(0,i.Z)((0,i.Z)({},h),{},{display:"flex",borderTop:"1px solid #dfdfdf",borderRadius:"0","& button":{color:g.palette.secondary.main},":hover":{"& button":{color:"primary.main"}}}),children:[(0,c.jsx)(d.I,{"data-test":v,size:"large",color:"secondary",onClick:f,disableRipple:!0,sx:{fontWeight:400,fontSize:"0.9375rem","&:hover":{backgroundColor:"transparent"}},children:m?"Hide Albums":"Show Albums"}),(0,c.jsx)(l.Z,{"aria-label":m?"Expand":"Collapse",onClick:f,disabled:b,disableRipple:!0,color:"primary",children:m?(0,c.jsx)(r.Z,{}):(0,c.jsx)(a.Z,{})})]})}},27040:function(e,t,n){n.d(t,{Z:function(){return o}});var i=n(93433),r=n(1413),a=n(16031);function o(e,t){var n,o=new Map,l=[],s=e.filter((function(e){return!t.includes(e.id)})).map((function(e,t){return o.set(e.id,t),(0,r.Z)((0,r.Z)({},e),{},{children:[]})}));if(s.forEach((function(e){if(e.id!==e.parentAlbumId&&null!==e.parentAlbumId){if(e.parentAlbumId){var t=o.get(e.parentAlbumId),r=s[Number(t)];r?r.children=[].concat((0,i.Z)(r.children),[e]):l.push(e)}}else n=e})),n){n.children=[].concat((0,i.Z)(n.children),l);for(var u,d=[n];d.length;)(u=d.shift())&&(u.children=(0,a.sortBy)(u.children,"title"),d.push.apply(d,(0,i.Z)(u.children)));return n}}},14626:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(64687),r=n.n(i),a=n(74615),o=n(40440),l=n(41350),s=n(72146),u=n(28301),d=n(46417);function c(e,t,n,i,c){var m=r().mark(p);function p(p){var h,f,v,b,g,x,Z,j,y,w;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:(h=[]).push({isRoot:!0,nestingLevel:0,node:e}),(c?[{id:"albums",title:"My Albums",owner:t,children:[],path:"/u/".concat(t,"/albums"),icon:(0,d.jsx)(s.Z,{})},{id:"drawer-album-trash",title:"Trash",owner:t,children:[],path:"/u/".concat(t,"/trash"),icon:(0,d.jsx)(a.Z,{})}]:[{id:"albums",title:"My Albums",owner:t,children:[],path:"/u/".concat(t,"/albums"),icon:(0,d.jsx)(s.Z,{})},{id:"drawer-album-favorites",title:"Favorites",owner:t,children:[],path:"/u/".concat(t,"/favorites"),icon:(0,d.jsx)(o.Z,{})},{id:"drawer-album-trash",title:"Trash",owner:t,children:[],path:"/u/".concat(t,"/trash"),icon:(0,d.jsx)(a.Z,{})}]).forEach((),i&&(f={id:i,title:"Mobile Uploads",owner:t,children:[],path:"/u/".concat(t,"/a/").concat(i),icon:(0,d.jsx)(l.Z,{})},h.push({nestingLevel:0,node:f})),n&&(v={id:"root",title:"My Bucket",owner:t,children:[],path:"/u/".concat(t),icon:(0,d.jsx)(u.Z,{})},h.push({nestingLevel:0,node:v}));case 6:if(0===h.length){r.next=15;break}return b=h.pop(),g=b.node,x=b.nestingLevel,Z=b.isRoot,j=g.id.toString(),r.next=11,p?{defaultHeight:48,id:j,isLeaf:0===g.children.length,isOpenByDefault:0===x,title:g.title,owner:g.owner,path:null===g||void 0===g?void 0:g.path,icon:null===g||void 0===g?void 0:g.icon,nestingLevel:x,isRoot:Z}:j;case 11:if(y=r.sent,0!==g.children.length&&y)for(w=g.children.length-1;w>=0;)h.push({nestingLevel:x+1,node:g.children[w]}),w-=1;r.next=6;break;case 15:case"end":return r.stop()}}),m)}return p}},90448:function(e,t,n){n.d(t,{Z:function(){return b}});var i=n(93433),r=n(29439),a=n(61511),o=n(91554),l=n(17592),s=n(16031),u=n(47313),d=n(58467),c=n(28422),m=n(91345),p=n(39437),h=n(7469),f=n(46417),v=(0,l.ZP)(o.Z)((function(e){return{position:"absolute",width:"100%",zIndex:e.theme.zIndex.drawer-1}}));function b(e){var t=e.albumId,n=(0,p.Z)().createAlert,o=(0,a.x)(),l=(0,d.bS)("/u/:userId/a/:albumId"),b=null===l||void 0===l?void 0:l.params.albumId,g=(0,h.Z)(b).mutation,x=(0,u.useRef)(null),Z=(0,u.useState)(!1),j=(0,r.Z)(Z,2),y=j[0],w=j[1];return(0,u.useEffect)((function(){var e,r=null===(e=x.current)||void 0===e?void 0:e.parentElement;if(!r)return var a=function(e){e.preventDefault(),e.stopPropagation(),w(!0)},l=u=function(e){var r,a;e.preventDefault(),e.stopPropagation(),w(!1);var l=null===(r=e.dataTransfer)||void 0===r?void 0:r.getData("id");if(null===(a=e.dataTransfer)||void 0===a||a.clearData(),l&&!(0,s.isEmpty)(l)&&b!==t){var u=[];if("all"===l){var d=(0,m.WV)();u.push.apply(u,(0,i.Z)(d))}else u.push(l);var p=u.filter((function(e){var n=o.readFragment({id:"Image:".concat(e),fragment:c.xDo});return(null===n||void 0===n?void 0:n.albumId)!==t}));if(p.length!==u.length&&n("One or more images already exist in selected album","info"),!(0,s.isEmpty)(p))g({variables:{targetAlbumId:t,imageIds:p}}),(0,m._N)({}),(0,m.WV)([])}};return r.addEventListener("dragover",a),r.addEventListener("drop",u),r.addEventListener("dragleave",l),),[t,g,o,n,b]),(0,f.jsx)(v,{ref:x,open:b!==t&&y})}},92881:function(e,t,n){n.d(t,{Z:function(){return V}});var i=n(72668),r=n(90297),a=n(11163),o=n(57829),l=n(42832),s=n(61113),u=n(82183),d=n(17592),c=n(19860),m=n(16031),p=n(61364),h=n(28422),f=n(91345),v=n(57912),b=n(16499),g=n(63694),x=n(69437),Z=n(38944),j=n(99548),y=n(47313),w=n(8566),C=n(19843),A=n(19212),S=n(12010),P=n(47131),k=n(20201),I=n(58467),E=n(84360),T=n(86799),D=n(46417);function M(e){var t=e.height,n=e.data,i=e.isOpen,r=e.resize,a=e.style,o=e.toggle,l=(0,k.Z)(),s=(0,I.s0)(),u=(0,I.bS)("/u/:userId/a/:albumId"),d=(0,g.Z)(),c=d.isShareDisabled,m=d.isAccountOverStorage,p=d.isMoveDisabled,h=d.isDownloadDisabled,v=n.id,b=n.owner,x=n.title,Z=n.isLeaf,j=n.nestingLevel,w=v,C=(null===u||void 0===u?void 0:u.params.albumId)===w;(0,y.useEffect)((function(){"0"===w&&0!==t&&r(0,!0)}),[t,w,r]);return(0,D.jsxs)(T.W,{style:a,nestingLevel:j,isActive:C,children:[!Z&&(0,D.jsx)(P.Z,{size:"small",onClick:o,disabled:Z,"aria-label":i?"Expand":"Collapse",sx:{color:"primary.main",height:"20px",width:"20px","&:hover":{color:"#fff",backgroundColor:l.palette.primary.highlight}},children:i?(0,D.jsx)(A.Z,{}):(0,D.jsx)(S.Z,{})}),Z&&(0,D.jsx)("div",{style:{content:"' '",width:20}}),(0,D.jsx)(T.I,{"data-test":v,size:"large",color:"inherit",onClick:function(){(0,f.nt)(null),s(n.path||"/u/".concat(b,"/a/").concat(w))},sx:{paddingLeft:"5px","&:hover":{backgroundColor:"transparent",color:"primary.main"},color:C?"primary.main":"#000"},children:x}),(0,D.jsx)(E.Z,{albumId:w,username:b,isShareDisabled:!!c,isAccountOverStorage:m,isMoveDisabled:!!p,isDownloadDisabled:h})]})}var z=n(38830),R=n(40887);function L(e){var t,n,i=e.height,r=e.data,a=e.isOpen,o=e.resize,l=e.style,s=e.toggle,u=(0,f.at)(),d=null===u||void 0===u||null===(t=u.profile)||void 0===t?void 0:t.defaultAlbum,c=null===u||void 0===u||null===(n=u.profile)||void 0===n?void 0:n.mobileAlbum,m=r.id;if(!d)return null;switch(m){case d:return(0,D.jsx)(R.Z,{height:i,data:r,isOpen:a,resize:o,style:l,toggle:s});case"root":case c:case"albums":case"drawer-album-favorites":case"drawer-album-trash":return(0,D.jsx)(z.Z,{height:i,data:r,isOpen:a,resize:o,style:l,toggle:s});default:return(0,D.jsx)(M,{height:i,data:r,isOpen:a,resize:o,style:l,toggle:s})}}var U=n(27040),_=n(14626);function B(e){var t,n,r,a=e.removeFavoriteAlbum,o=(0,f.at)(),l=null===o||void 0===o||null===(t=o.profile)||void 0===t?void 0:t.username,s=null===o||void 0===o||null===(n=o.profile)||void 0===n?void 0:n.defaultAlbum,u=null===o||void 0===o||null===(r=o.profile)||void 0===r?void 0:r.mobileAlbum,d=(0,i.a)(h.Xsc,{variables:{sortBy:{desc:!1}}}).data,c=(0,y.useRef)(null),p=(null===d||void 0===d?void 0:d.albumsReadAll)||[],v=(0,U.Z)(p,[u]);return(0,m.isEmpty)(v)||!l?null:(0,D.jsx)("div",{style:{position:"relative",flex:1,marginTop:"10px"},children:(0,D.jsx)(w.Z,{disableWidth:!0,children:function(e){var t=e.height;return(0,D.jsx)(C.qF,{ref:c,itemData:p,treeWalker:(0,_.Z)(v,l,s,u,a),height:t,width:"100%",children:L})}})})}var F=(0,d.ZP)(u.Z)((function(e){return{paddingTop:e.theme.spacing(1),width:"280px","& a":{color:"inherit"}}}));function O(e){var t,n,r,u=e.profile,d=(0,g.Z)(),c=null!==u&&void 0!==u&&null!==(t=u.subscription)&&void 0!==t&&t.totalImagesCount?null===u||void 0===u||null===(n=u.subscription)||void 0===n?void 0:n.totalImagesCount:0,x=(0,i.a)(h.G1w,{variables:{attributes:["favorite"],sortBy:h.hqH.Date,desc:!0,pageSize:10}}),Z=(null===x||void 0===x||null===(r=x.data)||void 0===r?void 0:r.imagesReadByAttributes.items)||[],y=(0,m.isEmpty)(Z)&&d.isFavoriteDisabled&&d.isFavoriteDisabled||!1;return(0,D.jsxs)(D.Fragment,{children:[u&&(0,D.jsxs)(o.Z,{sx:{padding:"10px",marginBottom:"10px",borderBottom:"1px solid #dfdfdf",maxWidth:"280px"},children:[(0,D.jsxs)(l.Z,{direction:"row",justifyContent:"space-between",children:[(0,D.jsxs)(l.Z,{direction:"row",spacing:"4px",alignItems:"center",children:[(0,D.jsx)(a.Z,{}),(0,D.jsx)(s.Z,{component:"h3",sx:{fontSize:"1.25rem",fontWeight:"600"},children:"My Bucket"})]}),(0,D.jsx)(v.Z,{})]}),(0,D.jsxs)(s.Z,{component:"h4",sx:{fontSize:"0.75rem",marginBottom:"10px"},children:[c," Photos"]}),(0,D.jsx)(b.Z,{userId:u.id})]}),(0,D.jsx)(p.Z,{overrideSearchRoute:"/u/".concat(null===u||void 0===u?void 0:u.username,"/search"),title:"Search your images...",variant:"dark",onCompleted:function(){return(0,f.nt)(null)}}),(0,D.jsx)(B,{removeFavoriteAlbum:y}),(null===u||void 0===u?void 0:u.subscription)&&(0,D.jsx)(j.Z,{subscription:u.subscription})]})}function W(e){var t=e.isPublic,n=(0,r.l)(f.at);return t?(0,D.jsx)(x.Z,{}):null!==n&&void 0!==n&&n.profile?(0,D.jsx)(O,{profile:n.profile}):(0,D.jsx)(Z.Z,{})}function V(e){var t=e.isPublic,n=(0,c.Z)(),i=(0,r.l)(f.nt);return(0,D.jsx)(F,{anchor:"rtl"===n.direction?"right":"left",onClose:function(){return(0,f.nt)(null)},onOpen:open:"main"===i,variant:"temporary",swipeAreaWidth:0,keepMounted:!0,PaperProps:{id:"album-menu"},children:(0,D.jsx)(W,{isPublic:t})})}W.defaultProps={isPublic:!1},V.defaultProps={isPublic:!1}},4915:function(e,t,n){n.d(t,{Z:function(){return m}});var i=n(11198),r=n(19860),a=n(24813),o=n(47131),l=n(23639),s=n(24193),u=n(17592),d=n(46417),c=(0,u.ZP)(l.Z)((function(e){var t=e.theme;return{"& .MuiBadge-badge":{color:t.palette.primary.main,background:t.palette.primary.contrastText,fontWeight:900}}}));function m(e){var t=e.ids,n=e.color,l=e.onCompleted,u=(0,r.Z)(),m=return(0,a.Z)(u.breakpoints.up("sm"))?(0,d.jsxs)(s.Z,{"aria-label":"Deselect Media",color:n,onClick:m,"data-test":"deselect-all",id:"deselect-all-button",children:[(0,d.jsx)(i.Z,{style:{marginRight:12}}),t.length," Selected"]}):(0,d.jsx)(o.Z,{"aria-label":"Deselect Media",color:n,onClick:m,"data-test":"deselect-all",id:"deselect-all-button",children:(0,d.jsx)(c,{badgeContent:t.length.toString(),children:(0,d.jsx)(i.Z,{fontSize:"large"})})})}m.defaultProps={color:"inherit"}},30083:function(e,t,n){n.d(t,{Z:function(){return d}});var i=n(29439),r=n(81086),a=n(51405),o=n(16031),l=n(47313),s=n(64641),u=n(46417);function d(e){var t=e.ids,n=e.onCompleted,d=e.disabled,c=(0,l.useState)(!1),m=(0,i.Z)(c,2),p=m[0],h=m[1],f=(0,s.Z)().downloadMultiple;return(0,u.jsxs)(a.Z,{disabled:d||(0,o.isEmpty)(t),onClick:function(){f({imageIds:null,albumIds:t}),h(!p),n&&n()},children:[(0,u.jsx)(r.Z,{style:{marginRight:8}})," Download Album"]})}d.defaultProps={onCompleted:void 0,disabled:!1}},207:function(e,t,n){n.d(t,{Z:function(){return ye}});var i,r,a=n(11198),o=n(61113),l=n(66149),s=n(96467),u=n(33604),d=n(1413),c=n(29439),m=n(35235),p=n(1143),h=n(73977),f=n(5062),v=n(16267),b=n(17704),g=n(46721),x=n(86138),Z=n(99881),j=n(9019),y=n(61689),w=n(47131),C=n(16783),A=n(24193),S=n(47313),P=n(70228),k=n(2135),I=n(58467),E=n(26555),T=n(41508),D=n(63895),M=n(50625),z=n(28297),R=n(11149),L=n(89441),U=n(15861),_=n(93433),B=n(64687),F=n.n(B),O=n(19860),W=n(66212),V=n(16031),H=n(18248),N=n(25363),K=n.n(N),G=n(43144),q=n(15671),Q=n(60136),Y=n(29388),$=function(e){(0,Q.Z)(n,e);var t=(0,Y.Z)(n);function n(e){var i;return(0,q.Z)(this,n),(i=t.call(this,e)).code=void 0,i.code="CaptchaException",i.name=i.constructor.name,i}return(0,G.Z)(n)}((0,n(98737).Z)(Error)),X=n(28422),J=n(91345),ee=n(60790),te=n(25258),ne=function(){var e=(0,ee.D)(X.JkU,{onCompleted:function(){var e={id:(0,H.Z)(),message:"Media shared via Email",severity:"success"};(0,J.sh)([e])},onError:function(e){te.Z.error("Error submitting form: {}",e);var t=e.graphQLErrors.map((function(e){return{id:(0,H.Z)(),message:e.message,severity:"error"}}));(0,J.sh)(t)}}),t=(0,c.Z)(e,2),n=t[0];return{results:t[1],mutation:n}},ie=n(46417);function re(e){var t=e.isOpen,n=e.onClose,i=e.optionalMessage,r=e.media,o={to:[],captchaToken:"",captchaSource:X.FMu.Recaptcha,message:i||"",media:r},m=(0,O.Z)(),p=(0,J.at)(),h=(0,P.xX)().executeRecaptcha,f=(0,S.useState)(!0),v=(0,c.Z)(f,2),b=v[0],g=v[1],x=(0,S.useState)(o),Z=(0,c.Z)(x,2),y=Z[0],w=Z[1],k=(0,S.useState)({}),I=(0,c.Z)(k,2),E=I[0],T=I[1],D=(0,S.useState)([]),M=(0,c.Z)(D,2),z=M[0],R=M[1],L=(0,S.useState)(null),B=(0,c.Z)(L,2),N=B[0],G=B[1],q=ne().mutation;(0,S.useEffect)((,[z]);var Q=function(){n(),w(o),T({}),R([])},Y=function(){var e=(0,U.Z)(F().mark((function e(t){var n,i,a,o,l,s;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,h){e.next=4;break}throw new $("Execute recaptcha not yet available");case 4:if(null!==p&&void 0!==p&&p.profile){e.next=6;break}throw new Error("Must be logged in to share images");case 6:return e.next=8,h("email_share_image");case 8:n=e.sent,i=r[0].image.match("/p/")||r[0].image.match("/i/")||r[0].image.match("/image/"),a={to:y.to,captchaToken:n,captchaSource:X.FMu.Recaptcha,author:p.profile.username,name:"",message:y.message||"",directUrl:i?r[0].image:"https://photobucket.com/logo192.png",fullscreenUrl:r[0].link||"",mediaType:i?X.CGU.Image:X.CGU.Album},q({variables:a}),Q(),e.next=21;break;case 15:e.prev=15,e.t0=e.catch(1),o=e.t0,l=o.message||"There was an error while trying to share your image.",s={id:(0,H.Z)(),message:l,severity:"error"},(0,J.sh)([s]);case 21:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return null!==p&&void 0!==p&&p.profile?(0,ie.jsxs)(l.Z,{open:t,onClose:Q,maxWidth:"sm",fullWidth:!0,disableScrollLock:!0,children:[(0,ie.jsxs)(u.Z,{sx:{position:"relative",color:m.palette.primary.main,textAlign:"center"},children:["Share this image",(0,ie.jsx)(a.Z,{"data-test":"sharing-email-close-button",sx:{position:"absolute",cursor:"pointer",right:"10px",top:"10px"},onClick:Q})]}),(0,ie.jsx)(s.Z,{children:(0,ie.jsx)("form",{onSubmit:Y,style:{paddingTop:m.spacing(3)},children:(0,ie.jsxs)(j.ZP,{container:!0,justifyContent:"center",spacing:3,children:[(0,ie.jsx)(j.ZP,{item:!0,xs:12,children:(0,ie.jsx)(C.Z,{id:"email-address-input",name:"to",label:"Email",error:Boolean(E.to),helperText:E.to,"aria-describedby":"Enter an email address",type:"email",fullWidth:!0,variant:"outlined",value:N||"",onBlur:function(e){var t=(0,d.Z)({},y),n=e.target.value;if(!(0,V.isEmpty)(n))if(K()(n))if(z.length>=20)T((function(e){return(0,d.Z)((0,d.Z)({},e),{},{to:"A maximum of 20 emails can be added"})}));else{T({}),G(null);var i=[].concat((0,_.Z)(z),[n]);R(i),t.to=i,w((0,d.Z)({},t)),g(!1)}else T((function(e){return(0,d.Z)((0,d.Z)({},e),{},{to:"Invalid Email"})}))},onChange:function(e){var t=(0,d.Z)({},y),n=e.target.value.split(/[, ]+/);if(n.length<2)return G(n[0]),void T({});if(K()(n[0])){if(z.length>=20)T((function(e){return(0,d.Z)((0,d.Z)({},e),{},{to:"A maximum of 20 emails can be added"})}));else if(G(n[1]),!(0,V.isEmpty)(n[0])){var i=[].concat((0,_.Z)(z),[n[0]]);R(i),t.to=i,w((0,d.Z)({},t)),g(!1)}}else T(()},onKeyDown:function(e){"Enter"===e.key&&function(e){var t=(0,d.Z)({},y);if(e.stopPropagation(),e.preventDefault(),null!==N){var n=[].concat((0,_.Z)(z),[N]);R(n),t.to=n,w((0,d.Z)({},t)),G(""),g(!1)}}(e)}})}),(0,ie.jsx)(j.ZP,{item:!0,xs:12,children:z.map((function(e){return(0,ie.jsx)(W.Z,{label:e,onDelete:(t=e,},e);var t}))}),(0,ie.jsx)(j.ZP,{item:!0,xs:12,children:(0,ie.jsx)(C.Z,{id:"message-input",name:"message",label:"Your Message (optional)","aria-describedby":"Message Body",multiline:!0,minRows:"6",fullWidth:!0,variant:"outlined",value:y.message,onChange:function(e){var t=(0,d.Z)({},y);t[e.target.name]=e.target.value,w(t)}})}),(0,ie.jsx)(j.ZP,{item:!0,xs:12,children:(0,ie.jsx)(A.Z,{color:"primary","data-test":"submit",fullWidth:!0,type:"submit",variant:"contained",disabled:b,children:"Share"})})]})})})]}):null}re.defaultProps={optionalMessage:void 0},i||(i={})),r||(r={}));var ae=(0,n(17592).ZP)(w.Z,{shouldForwardProp:)((function(e){var t=e.isActiveTab,n=e.disabled,i=e.theme;return{display:"flex",justifyContent:"center",alignItems:"center",border:"2px solid ".concat(i.palette.primary.light),color:"white",width:60,height:60,borderRadius:"50%",cursor:"pointer",backgroundColor:t&&!n?"".concat(i.palette.primary.light," !important"):"white","& svg":{fill:t&&!n?"white":i.palette.primary.light},borderColor:n?"gray":"",opacity:n?.5:""}}));function oe(e){var t=e.icon,n=e.tooltip,i=e.isActiveTab,r=e.onIconClickHandler,a=e.linkType,o=e.isDisabled;return(0,ie.jsx)(y.Z,{arrow:!0,title:n,children:(0,ie.jsx)(ae,{onClick:disabled:o,isActiveTab:i,id:"share-".concat(a,"-btn"),"data-test":"sharing-icon",size:"large",children:t})})}var le,se,ue,de,ce,me=n(4942),pe=(ce={},(0,me.Z)(ce,r.PRIVATE,(le={},(0,me.Z)(le,i.ALBUM,"Email sharing is disabled for content in private albums. To share via email, change the album to public, or move the images to a new public album."),(0,me.Z)(le,i.IMAGE,"Private email media sharing is not available yet."),le)),(0,me.Z)(ce,r.MULTIPLESELECTED,(se={},(0,me.Z)(se,i.ALBUM,"This option is only available for a single album."),(0,me.Z)(se,i.IMAGE,"This option is only available for a single image."),se)),(0,me.Z)(ce,r.SOCIALMEDIA,(ue={},(0,me.Z)(ue,i.ALBUM,"This option is not available for album sharing."),(0,me.Z)(ue,i.IMAGE,"This option is only available for a single image."),ue)),(0,me.Z)(ce,r.LINKS,(de={},(0,me.Z)(de,i.ALBUM,"Upgrade to host links for your albums."),(0,me.Z)(de,i.IMAGE,"Upgrade to host links for your media."),de)),ce);function he(e){var t=(0,L.H1)(e.mediaUrl),n=(0,L.f0)(e.mediaUrl,e.mediaSize);return e.albumId&&e.owner?{direct:t,html:(0,L.IV)(e.mediaUrl,e.title,e.linkUrl,e.mediaSize),img:(0,L.oJ)(e.mediaUrl,e.mediaSize),iframe:n,imageShare:(0,L.fZ)(e.owner,e.albumId,e.id)}:{direct:t,iframe:n,img:"",imageShare:"",html:""}}var fe=n(63694),ve=[{title:"Direct link",icon:(0,ie.jsx)(m.Z,{fontSize:"large"}),key:"direct"},{title:"Embed link",icon:(0,ie.jsx)(p.Z,{fontSize:"large"}),key:"embed"}],be=[{title:"HTML",key:"html"},{title:"Img",key:"img"},{title:"iFrame",key:"iframe"}],ge=[{title:"Thumb",key:"xs",size:{height:180,width:180}},{title:"Small",key:"sm",size:{height:370,width:590}},{title:"Medium",key:"md",size:{height:720,width:960}},{title:"Large",key:"lg",size:{height:1080,width:1920}}];function xe(e){return(0,ie.jsx)(x.Z,{style:{zIndex:9999},open:e.open,autoHideDuration:3e3,onClose:e.handleClose,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,ie.jsx)(Z.Z,{elevation:6,variant:"filled",onClose:e.handleClose,severity:"success",children:e.text})})}function Ze(e){var t,n,a,o=(0,I.UO)().albumId,l=(0,M.Z)(),s=(0,c.Z)(l,2),u=s[0],m=s[1],p=(0,R.Z)().settings,x=(0,fe.Z)(),U=x.isLimited,_=x.linkBackOption,B=e.albums.length>0||e.isSlideShow?[be[2]]:be,F=(0,S.useState)(!1),O=(0,c.Z)(F,2),W=O[0],V=O[1],H=(0,S.useState)(ve[0].key),N=(0,c.Z)(H,2),K=N[0],G=N[1],q=(0,S.useState)(B[0].key),Q=(0,c.Z)(q,2),Y=Q[0],$=Q[1],X=(0,S.useState)(ge[0].key),J=(0,c.Z)(X,2),ee=J[0],te=J[1],ne=(0,S.useState)(!1),ae=(0,c.Z)(ne,2),le=ae[0],se=ae[1],ue=(0,S.useState)(""),de=(0,c.Z)(ue,2),ce=de[0],me=de[1],Ze=function(){if(e.isSlideShow){var t="".concat(z.ZP.appUrl.legacy,"/u/").concat(e.username,"/a/").concat(o,"?mode=slideshow");return[{direct:t,iframe:(0,L.f0)(t,ge.filter((function(e){return e.key===ee}))[0].size)}]}if(e.media.length)return e.media.map((function(t){return{mediaSize:ge.filter((function(e){return e.key===ee}))[0].size,mediaUrl:t.url,linkUrl:_&&"".concat(z.ZP.appUrl.legacy,"/u/").concat(e.username,"/a/").concat(t.albumId,"/p/").concat(t.id),title:t.title,id:t.id,albumId:t.albumId,owner:t.owner,isPrivate:t.isPrivate}})).map(he);var n=ge.filter(()[0].size;return e.albums.map((function(t){return{id:t.id,title:t.title,mediaUrl:"".concat((0,L.Bf)(t.id,e.username||"")),mediaSize:n}})).map(he).map((function(e){var t,i,r,a;return(0,d.Z)((0,d.Z)({},e),{},{direct:"".concat(e.direct,"?field=").concat(null===p||void 0===p||null===(t=p.sortBy)||void 0===t?void 0:t.field,"&desc=").concat(null!==p&&void 0!==p&&null!==(i=p.sortBy)&&void 0!==i&&i.desc?"desc":"asc"),iframe:(0,L.f0)("".concat(e.direct,"/slideshow?field=").concat(null===p||void 0===p||null===(r=p.sortBy)||void 0===r?void 0:r.field,"&desc=").concat(null!==p&&void 0!==p&&null!==(a=p.sortBy)&&void 0!==a&&a.desc?"desc":"asc"),n)})}))}(),je=Ze.map((function(e){return{image:e.direct,link:(null===e||void 0===e?void 0:e.imageShare)||e.direct}})),ye="direct"===K?K:Y,we=Ze.reduce((function(e,t){return{direct:(0,L.sx)(e.direct,t.direct),html:(0,L.sx)(e.html,t.html),img:(0,L.sx)(e.img,t.img),iframe:(0,L.sx)(e.iframe,t.iframe)}}),{})[ye],Ce=e.media.filter(().length>0,Ae=(e.albums[0]||!1).privacyMode,Se=Ze[0]||"",Pe=Se.imageShare,ke=Se.direct,Ie=["PRIVATE","DELETED"].includes(Ae),Ee=Ze.length>1||(null===e||void 0===e||null===(t=e.albums)||void 0===t?void 0:t.length)>1,Te=Ie||Ce,De=(null===e||void 0===e||null===(n=e.albums)||void 0===n?void 0:n.length)>1?i.ALBUM:i.IMAGE,Me=Te?r.PRIVATE:r.MULTIPLESELECTED,ze=(null===e||void 0===e||null===(a=e.albums)||void 0===a?void 0:a.length)>0||Ze.length>1||e.isSlideShow,Re=Te||Ee,Le=ze?"":decodeURI(Pe);(0,S.useEffect)((function(){u.value&&(me("Copied to clipboard"),se(!0))}),[u]);var Ue=function(e){G(e)},_e=return(0,ie.jsx)(P.pm,{reCaptchaKey:z.ZP.captcha.recaptcha.key,scriptProps:{async:!0},children:(0,ie.jsxs)("div",{children:[(0,ie.jsxs)(j.ZP,{justifyContent:"center",container:!0,sx:{flexGrow:1,padding:"10px"},children:[(0,ie.jsx)(xe,{open:le,handleClose:text:ce}),(0,ie.jsxs)(j.ZP,{container:!0,justifyContent:"center",sx:{gap:"10px"},children:[ve.map((function(e){var t=e.icon,n=e.title,i=e.key;return(0,ie.jsx)(j.ZP,{item:!0,children:(0,ie.jsx)(oe,{icon:t,tooltip:U?pe[r.LINKS][De]:n,linkType:i,isActiveTab:K===i,onIconClickHandler:Ue,isDisabled:!!U})},i)})),(0,ie.jsx)(j.ZP,{item:!0,xs:"auto",children:(0,ie.jsx)(y.Z,{arrow:!0,title:Re?pe[Me][De]:"Email",children:(0,ie.jsx)(w.Z,{style:{cursor:"pointer"},onClick:sx:{padding:"0px",opacity:Re?"0.5":"",backgroundColor:Re?"ActiveCaption":""},size:"large",id:"share-email-btn",children:(0,ie.jsx)(h.Z,{sx:{padding:"10px",height:"60px",width:"60px",borderRadius:"50%",color:"white",backgroundColor:"gray"},fontSize:"large","data-test":"email"})})})}),(0,ie.jsx)(j.ZP,{item:!0,xs:"auto",children:(0,ie.jsx)(y.Z,{arrow:!0,title:ze?pe[r.SOCIALMEDIA][De]:"Facebook",children:(0,ie.jsx)(E.Z,{url:Le,disabled:ze,"data-test":"facebook",id:"share-facebook-btn",children:(0,ie.jsx)(f.Z,{sx:{padding:"10px",height:"60px",width:"60px",borderRadius:"50%",color:"white",backgroundColor:"rgb(59, 89, 152)"},fontSize:"large"})})})}),(0,ie.jsx)(j.ZP,{item:!0,children:(0,ie.jsx)(y.Z,{arrow:!0,title:ze?pe[r.SOCIALMEDIA][De]:"Twitter",children:(0,ie.jsx)(T.Z,{url:Le,disabled:ze,"data-test":"twitter",id:"share-twitter-btn",children:(0,ie.jsx)(v.Z,{sx:{padding:"10px",height:"60px",width:"60px",borderRadius:"50%",color:"white",backgroundColor:"rgb(38, 166, 209)"},fontSize:"large"})})})}),(0,ie.jsx)(j.ZP,{item:!0,children:(0,ie.jsx)(y.Z,{arrow:!0,title:ze?pe[r.SOCIALMEDIA][De]:"Pinterest",children:(0,ie.jsx)(D.Z,{url:Le,media:ke,disabled:ze,"data-test":"pinterest",id:"share-pinterest-btn",children:(0,ie.jsx)(b.Z,{sx:{padding:"10px",height:"60px",width:"60px",borderRadius:"50%",color:"white",backgroundColor:"rgb(200, 35, 44)"},fontSize:"large"})})})})]}),"embed"===K&&(0,ie.jsxs)(j.ZP,{container:!0,justifyContent:"center",direction:"row",sx:{margin:"15px 0"},children:[(0,ie.jsx)(j.ZP,{container:!0,justifyContent:"center",direction:"row",children:B.map((function(e){var t=e.key,n=e.title;return(0,ie.jsx)(j.ZP,{item:!0,children:(0,ie.jsx)(A.Z,{sx:{marginTop:"15px",marginRight:"2px",marginLeft:"2px"},onClick:_e,name:t,variant:Y===t?"contained":"outlined",id:"share-embed-type-".concat(t,"-btn"),children:n})},t)}))}),(0,ie.jsx)(j.ZP,{container:!0,justifyContent:"center",direction:"row",children:ge.map((function(e){var t=e.key,n=e.title;return(0,ie.jsx)(j.ZP,{item:!0,children:(0,ie.jsx)(A.Z,{sx:{marginTop:"15px",marginRight:"2px",marginLeft:"2px"},onClick:function(){return e)},name:t,variant:ee===t?"contained":"outlined",id:"share-embed-size-".concat(t,"-btn"),children:n})},t)}))})]}),"direct"!==K&&"embed"!==K||!Ze.length||U?null:(0,ie.jsx)(j.ZP,{container:!0,justifyContent:"center",sx:{marginTop:"25px",position:"relative"},alignItems:"flex-end",children:(0,ie.jsx)(C.Z,{id:"outlined-multiline-static",label:"Links",multiline:!0,fullWidth:!0,minRows:4*Ze.length,maxRows:12,variant:"outlined",value:we,InputProps:{readOnly:!0,endAdornment:(0,ie.jsx)(g.Z,{sx:{border:"1px solid rgb(216, 216, 216)",height:"40px",width:"40px",padding:"8px",borderRadius:"20px"},cursor:"pointer",onClick:function(){return m(we)},fontSize:"small"})}})}),U&&(0,ie.jsx)(j.ZP,{justifyContent:"center",sx:{marginTop:"25px",position:"relative"},direction:"column",children:(0,ie.jsx)(j.ZP,{item:!0,xs:"auto",justifyContent:"center",children:(0,ie.jsxs)(Z.Z,{severity:"error",children:["Hosting links are not available within your current plan. To access,"," ",(0,ie.jsx)(k.rU,{to:"https://billing.photobucket.com/?id=premium&type=monthly&utm_medium=web&utm_source=sharemodal&utm_campaign=standard_unlimited",children:"upgrade now"})]})})})]}),(0,ie.jsx)(re,{isOpen:W,onClose:optionalMessage:"Check out my image stored on Photobucket.com!",media:je})]})})}Ze.defaultProps={isSlideShow:!1};var je=Ze;function ye(e){var t=e.isOpen,n=e.onClose,i=e.media,r=void 0===i?[]:i,d=e.username,c=e.albums,m=void 0===c?[]:c,p=e.isSlideShow,h="Share this slideshow";return m.length>1&&(h="Share these albums"),1===m.length&&(h="Share this album"),r.length>1&&(h="Share these images"),1===r.length&&(h="Share this image"),(0,ie.jsxs)(l.Z,{"data-test":"sharing-modal",open:t,onClose:n,maxWidth:"md",fullWidth:!0,disableScrollLock:!0,children:[(0,ie.jsxs)(u.Z,{sx:{position:"relative"},children:[(0,ie.jsx)(o.Z,{color:"primary",align:"center",sx:{position:"relative",fontSize:"22px"},children:h}),(0,ie.jsx)(a.Z,{"data-test":"sharing-modal-close-btn",sx:{position:"absolute",cursor:"pointer",right:"10px",top:"10px"},onClick:n})]}),(0,ie.jsx)(s.Z,{children:(0,ie.jsx)(je,{media:r,albums:m,username:d,isSlideShow:p})})]})}ye.defaultProps={albums:[],isSlideShow:!1,media:[]}},83798:function(e,t,n){n.d(t,{Z:function(){return p}});var i=n(93433),r=n(1413),a=n(15861),o=n(29439),l=n(64687),s=n.n(l),u=n(60790),d=n(28422),c=n(25258),m=n(39437);function p(){var e=(0,m.Z)().createAlert,t=(0,u.D)(d.qdb,{update:function(){var e=(0,a.Z)(s().mark((function e(t,n){var o,l,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.data){e.next=3;break}return e.abrupt("return");case 3:return l=function(){var e=(0,a.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.updateQuery({query:d.Xsc,variables:{sortBy:{desc:!1}}},(function(e){return e?(0,r.Z)((0,r.Z)({},e),{},{albumsReadAll:[].concat((0,i.Z)(e.albumsReadAll),[o.albumCreate])}):null}));case 1:case"end":return e.stop()}}),e)})));return (),u=function(){var e=(0,a.Z)(s().mark((function e(n){var i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.readFragment({id:"AlbumV2:".concat(n),fragment:d.KPs}),t.modify({id:"AlbumV2:".concat(n),fields:{counters:function(e){return{imageCountIncludeSubAlbums:e.imageCountIncludeSubAlbums,imageCount:e.imageCount,nestedAlbumsCount:e.nestedAlbumsCount+1}}}}),null===i||void 0===i||!i.parentAlbumId){e.next=5;break}return e.next=5,u(i.parentAlbumId);case 5:case"end":return e.stop()}}),e)})));return (),e.next=7,l();case 7:return e.next=9,u(o.albumCreate.parentAlbumId);case 9:case"end":return e.stop()}}),e)})));return (),onError:function(t){t.graphQLErrors.length?t.graphQLErrors.forEach((function(t){e(t.message),c.Z.error(t)})):(c.Z.error(t),e("There was a problem creating an album. Please try again later."))},onCompleted:function(){e("A new album has been created","success")}}),n=(0,o.Z)(t,2);return{mutation:n[0],results:n[1]}}},92216:function(e,t,n){n.d(t,{Z:function(){return u}});var i=n(29439),r=n(60790),a=n(18248),o=n(28422),l=n(91345),s=n(63694);function u(){var e=(0,s.Z)(),t=(0,r.D)(o.Lot,{update:function(t,n){var i,r;if(n){var a=[],l=0,s=0;null===(i=n.data)||void 0===i||i.albumsMoveToTrash.forEach(();var u=function n(i,r,a){if(i&&i!==e.defaultAlbum){var l=t.readFragment({id:"AlbumV2:".concat(i),fragment:o.KPs});t.modify({id:"AlbumV2:".concat(i),fields:{counters:function(e){return{imageCount:e.imageCount,imageCountIncludeSubAlbums:e.imageCountIncludeSubAlbums-r,nestedAlbumsCount:e.nestedAlbumsCount-a}}}}),l&&n(l.parentAlbumId,r,a)}};a.forEach((function(e){var n=t.readFragment({id:"AlbumV2:".concat(e),fragment:o.KPs}),i=((null===n||void 0===n?void 0:n.counters.nestedAlbumsCount)||0)+1,r=(null===n||void 0===n?void 0:n.counters.imageCount)||0;l+=i,s+=r,u(null===n||void 0===n?void 0:n.parentAlbumId,r,i)})),t.modify({id:"AlbumV2:".concat(e.defaultAlbum),fields:{counters:function(e){return{imageCount:e.imageCount,imageCountIncludeSubAlbums:e.imageCountIncludeSubAlbums-s,nestedAlbumsCount:e.nestedAlbumsCount-l}}}}),null===(r=n.data)||void 0===r||r.albumsMoveToTrash.forEach((function(e){return t.evict({id:"AlbumV2:".concat(e)})})),t.evict({id:"ROOT_QUERY",fieldName:"getImagesFromAlbumAndSubAlbums",broadcast:!1}),t.evict({id:"ROOT_QUERY",fieldName:"getTrashImages",broadcast:!1}),t.evict({id:"ROOT_QUERY",fieldName:"getTrashAlbumDetails",broadcast:!1}),t.evict({id:"ROOT_QUERY",fieldName:"imagesReadByAttributes",broadcast:!1}),t.gc()}},onCompleted:function(){var e={id:(0,a.Z)(),message:"Album has been deleted",severity:"success"};(0,l.sh)([e])},onError:function(){var e={id:(0,a.Z)(),message:"There was a problem deleting albums.",severity:"error"};(0,l.sh)([e])}}),n=(0,i.Z)(t,2);return{mutation:n[0],results:n[1]}}},70749:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(29439),r=n(60790),a=n(47313),o=n(18248),l=n(28422),s=n(91345),u=n(25258),d=n(63694);function c(){var e,t=(0,d.Z)(),n=(0,r.D)(l.quK,{update:function(e,n,i){var r;if(n&&null!==i&&void 0!==i&&null!==(r=i.variables)&&void 0!==r&&r.ids){var a=i.variables.ids,o=function n(i,r,a){if(i&&i!==t.defaultAlbum){var o=e.readFragment({id:"AlbumV2:".concat(i),fragment:l.KPs});e.modify({id:"AlbumV2:".concat(i),fields:{counters:function(e){return{imageCount:e.imageCount,imageCountIncludeSubAlbums:e.imageCountIncludeSubAlbums-r,nestedAlbumsCount:e.nestedAlbumsCount-a}}}}),o&&n(o.parentAlbumId,r,a)}};a.forEach((function(t){var n=e.readFragment({id:"AlbumV2:".concat(t),fragment:l.KPs}),i=((null===n||void 0===n?void 0:n.counters.nestedAlbumsCount)||0)+1,r=(null===n||void 0===n?void 0:n.counters.imageCount)||0;o(null===n||void 0===n?void 0:n.parentAlbumId,r,i)})),a.forEach((function(t){return e.evict({id:"AlbumV2:".concat(t)})})),e.gc(),u.Z.debug("Album moved to my bucket:",n)}}}),c=(0,i.Z)(n,2),m=c[0],p=c[1],h=null===(e=p.data)||void 0===e?void 0:e.deleteAlbumsWithContentSaving;(0,a.useEffect)((function(){if(p.error){var e={id:(0,o.Z)(),message:"There was a problem deleting albums. Please try again later.",severity:"error"};(0,s.sh)([e])}}),[p.error]),(0,a.useEffect)((function(){if(h){var e={id:(0,o.Z)(),message:"Album has been deleted",severity:"success"};(0,s.sh)([e])}}),[h]);return{mutation:function(e){m(e)},results:p}}},7469:function(e,t,n){n.d(t,{Z:function(){return h}});var i=n(93433),r=n(1413),a=n(29439),o=n(60790),l=n(28422),s=n(11149),u=n(25258),d=n(39437),c=n(63694),m=n(98976),p=n(12164);function h(e){var t=(0,s.v)(),n=(0,c.Z)(),h=(0,p.Z)().currentAlbum,f=(0,d.Z)().createAlert,v=(0,o.D)(l.Wqv,{update:function(a,o){var s=o.data;if(s&&null!==h&&void 0!==h&&h.id){var u=new Map;s.imagesMove.forEach((function(e){return u.set(e.id,!0)})),a.updateQuery({query:l.b6e,variables:{albumId:e||h.id,sortBy:t.sortBy,pageSize:m.IV}},(function(e){if(!e)return null;var t=null===e||void 0===e?void 0:e.getAlbumImagesV2,n=t.items.filter((function(e){return!e||!u.get(e.id)}));return{getAlbumImagesV2:(0,r.Z)((0,r.Z)({},t),{},{items:n})}})),a.updateQuery({query:l.b6e,variables:{albumId:s.imagesMove[0].albumId,sortBy:t.sortBy,pageSize:m.IV}},(function(e){if(!e)return null;var t=null===e||void 0===e?void 0:e.getAlbumImagesV2,n=[].concat((0,i.Z)(t.items),(0,i.Z)(s.imagesMove));return{getAlbumImagesV2:(0,r.Z)((0,r.Z)({},t),{},{items:n})}}));a.updateQuery({query:l.o2m},(function(e){if(!e)return null;var o=0,d=0,c=null===e||void 0===e?void 0:e.getTrashAlbumDetails,p=null===e||void 0===e?void 0:e.getTrashImages,h=p.items.filter((function(e){return!e||!u.get(e.id)||(o+=e.image.size||0,d+=1,!1)}));return p.items.length>h.length&&a.updateQuery({query:l.x4R,variables:{albumId:n.defaultAlbum,sortBy:t.sortBy,pageSize:m.IV}},(function(e){if(!e)return null;var t=null===e||void 0===e?void 0:e.getImagesFromAlbumAndSubAlbums,n=[].concat((0,i.Z)(t.items),(0,i.Z)(s.imagesMove));return{getImagesFromAlbumAndSubAlbums:(0,r.Z)((0,r.Z)({},t),{},{items:n})}})),{getTrashAlbumDetails:(0,r.Z)((0,r.Z)({},c),{},{imageCount:c.imageCount-d,usedSpace:c.usedSpace-o}),getTrashImages:(0,r.Z)((0,r.Z)({},p),{},{items:h})}})),a.gc()}},onError:function(e){u.Z.error(e),f("There was a problem moving images. Please contact the System Admin. ".concat(e.message),"error")},onCompleted:function(e){var t=e.imagesMove,n="My Library"===t[0].albumName?"My Bucket":t[0].albumName,i="Success! ".concat(t.length," ").concat(1===t.length?"image has":"images have"," been moved to ").concat(n||"");f(i,"success")},refetchQueries:[l.Xsc],awaitRefetchQueries:!0}),b=(0,a.Z)(v,2),g=b[0],x=b[1];return{mutation:g,results:x,loading:x.loading}}},29009:function(e,t,n){n.d(t,{Z:function(){return h}});var i=n(93433),r=n(1413),a=n(29439),o=n(60790),l=n(28422),s=n(11149),u=n(25258),d=n(39437),c=n(63694),m=n(98976),p=n(19332);function h(){var e=(0,s.v)(),t=(0,d.Z)().createAlert,n=(0,c.Z)(),h=(0,p.Z)().mutation,f=(0,o.D)(l.OUA,{onError:function(e){u.Z.error(e),t("There was a problem moving images to trash. Please contact the System Admin. ".concat(e.message),"error")},onCompleted:update:function(t,a){var o=a.data;if(o){var s=new Map;o.imagesMoveToTrash.forEach(();var u=0,d=0,c=[],p=[];o.imagesMoveToTrash.forEach((function(e){var i=t.readFragment({id:"Image:".concat(e),fragment:l.xDo});if((null===i||void 0===i?void 0:i.albumId)!==n.defaultAlbum&&i&&p.push(i.albumId),null!==i&&void 0!==i&&i.attributes&&(null===i||void 0===i?void 0:i.attributes.length)>0){var r={imageIds:i.id,delete:["favorite"]};h({variables:r})}c.push(i),u+=(null===i||void 0===i?void 0:i.image.size)||0,d+=1}));var f=o.imagesMoveToTrash.length,v=function e(i){if(i&&i!==n.defaultAlbum){var r=t.readFragment({id:"AlbumV2:".concat(i),fragment:l.KPs});t.modify({id:"AlbumV2:".concat(i),fields:{counters:function(e){return{imageCount:e.imageCount,imageCountIncludeSubAlbums:e.imageCountIncludeSubAlbums-1}}}}),r&&e(r.parentAlbumId)}};p.forEach((function(e){t.modify({id:"AlbumV2:".concat(e),fields:{counters:function(e){return{imageCount:e.imageCount-1,imageCountIncludeSubAlbums:e.imageCountIncludeSubAlbums-1}}}});var n=t.readFragment({id:"AlbumV2:".concat(e),fragment:l.KPs});v(null===n||void 0===n?void 0:n.parentAlbumId)})),t.modify({id:"AlbumV2:".concat(n.defaultAlbum),fields:{counters:}),p.forEach((function(i){n.defaultAlbum!==i&&t.updateQuery({query:l.b6e,variables:{albumId:i,sortBy:e.sortBy,pageSize:m.IV}},(function(e){if(!e)return null;var t=null===e||void 0===e?void 0:e.getAlbumImagesV2,n=t.items.filter((function(e){return!e||!s.get(e.id)}));return{getAlbumImagesV2:(0,r.Z)((0,r.Z)({},t),{},{items:n})}}))})),t.updateQuery({query:l.x4R,variables:{albumId:n.defaultAlbum,sortBy:e.sortBy,pageSize:m.IV}},(function(e){if(!e)return null;var t=null===e||void 0===e?void 0:e.getImagesFromAlbumAndSubAlbums,n=t.items.filter(();return{getImagesFromAlbumAndSubAlbums:(0,r.Z)((0,r.Z)({},t),{},{items:n})}})),t.updateQuery({query:l.o2m},(function(e){if(!e)return null;var t=null===e||void 0===e?void 0:e.getTrashAlbumDetails,n=null===e||void 0===e?void 0:e.getTrashImages;return{getTrashAlbumDetails:(0,r.Z)((0,r.Z)({},t),{},{imageCount:t.imageCount+d,usedSpace:t.usedSpace+u}),getTrashImages:(0,r.Z)((0,r.Z)({},n),{},{items:[].concat((0,i.Z)(n.items),c)})}})),t.gc()}}}),v=(0,a.Z)(f,2);return{mutation:v[0],results:v[1]}}},43986:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(93433),r=n(90297),a=n(16031),o=n.n(a),l=n(91345);function s(){var e=(0,r.l)(l.G$),t=n=function(n){t(n)&&o().remove(e,()},a=function(i,r){r?i):n(i)};return{deselectAllAlbums:function(){(0,l.G$)([]),(0,l._N)({})},toggleSelect:function(n){a(n,!t(n)),(0,l.G$)((0,i.Z)(e))},selectedAlbums:e,isAlbumSelectionEmpty:isSelected:t,unselect:n}}},34219:function(e,t,n){n.d(t,{Z:function(){return u}});var i=n(29439),r=n(60790),a=n(47313),o=n(18248),l=n(28422),s=n(91345);function u(){var e,t=(0,r.D)(l.zLb,{update:function(e,t,n){var i=t.data,r=n.variables;null!==i&&void 0!==i&&i.albumUpdate&&r&&e.writeQuery({query:l.vw9,variables:{id:r.id},data:{getAlbumForEditor:{albumId:i.albumUpdate.id,title:i.albumUpdate.title,description:i.albumUpdate.description,privacy:i.albumUpdate.privacyMode,passwords:[],owner:""}}})}}),n=(0,i.Z)(t,2),u=n[0],d=n[1],c=null===(e=d.data)||void 0===e?void 0:e.albumUpdate;(0,a.useEffect)((function(){if(d.error){var e={id:(0,o.Z)(),message:"There was a problem updating album. Please try again later.",severity:"error"};(0,s.sh)([e])}}),[d.error]),(0,a.useEffect)((function(){if(c){var e={id:(0,o.Z)(),message:"Album details have been updated",severity:"success"};(0,s.sh)([e])}}),[c]);return{mutation:function(e){u(e)},results:d}}},19332:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(93433),r=n(29439),a=n(60790),o=n(18248),l=n(28422),s=n(91345),u=n(11149),d=n(98976);function c(){var e=(0,u.Z)().settings,t=(0,a.D)(l.CF8,{onError:function(){var e={id:(0,o.Z)(),message:"There was a problem updating image attributes. Please try again later.",severity:"error"};(0,s.sh)([e])},onCompleted:function(e){var t,n=e.imagesUpdateAttributes.length;t=(e.imagesUpdateAttributes[0].attributes||[]).find(()?n>1?"".concat(n," Photos added to Favorites"):"Photo added to Favorites":n>1?"".concat(n," Photos removed from Favorites"):"Photo removed from Favorites";var i={id:(0,o.Z)(),message:t,severity:"success"};(0,s.sh)([i])},update:function(t,n,r){var a,o,s,u=r.variables,c=null===(a=n.data)||void 0===a?void 0:a.imagesUpdateAttributes;if(null!==c&&void 0!==c&&c.length){var m={attributes:["favorite"],sortBy:null===e||void 0===e||null===(o=e.sortBy)||void 0===o?void 0:o.field,desc:null===e||void 0===e||null===(s=e.sortBy)||void 0===s?void 0:s.desc,pageSize:d.IV};t.updateQuery({query:l.G1w,variables:m},(function(e){var t;if(!e)return null;var r=(null===(t=n.data)||void 0===t?void 0:t.imagesUpdateAttributes)||[],a=e.imagesReadByAttributes.items||[],o=e.imagesReadByAttributes.total||0;if(null!==u&&void 0!==u&&u.add)return{imagesReadByAttributes:{items:[].concat((0,i.Z)(a),(0,i.Z)(r)),scrollPointer:null===e||void 0===e?void 0:e.imagesReadByAttributes.scrollPointer,total:o+r.length}};var l=new Map;return r.forEach((),{imagesReadByAttributes:{items:a.filter((),scrollPointer:null===e||void 0===e?void 0:e.imagesReadByAttributes.scrollPointer,total:o-r.length}}}))}}}),n=(0,r.Z)(t,2),c=n[0];return{mutation:results:n[1]}}},89441:function(e,t,n){n.d(t,{Bf:function(){return h},H1:function(){return m},IV:function(){return s},LK:function(){return a},f0:function(){return d},fZ:function(){return c},oJ:function(){return r},sx:function(){return p},yb:function(){return u}});var i=n(28297),r=function(e,t){return"[URL=".concat(e).concat(t?"?width=".concat((null===t||void 0===t?void 0:t.width)||1920,"&height=").concat((null===t||void 0===t?void 0:t.height)||1080,"&fit=bounds"):"","][IMG]").concat(e).concat(t?"?width=".concat(null===t||void 0===t?void 0:t.width,"&height=").concat(null===t||void 0===t?void 0:t.height,"&fit=bounds"):"","[/IMG][/URL]")},a=o=function(e,t,n){return'<img src="'.concat(e).concat(n?"?width=".concat(null===n||void 0===n?void 0:n.width,"&height=").concat(null===n||void 0===n?void 0:n.height,"&fit=bounds"):"",'" alt="').concat(t,'"/>')},l=function(e,t,n){return'<a href="'.concat(e).concat(n?"?width=".concat(null===n||void 0===n?void 0:n.width,"&height=").concat(null===n||void 0===n?void 0:n.height,"&fit=bounds"):"",'" target="_blank">').concat(t,"</a>")},s=function(e,t,n,i){return n?l(n,o(e,t,i),i):o(e,t,i)},u=function(e,t){return s(e,t,void 0,{width:180,height:180})},d=function(e,t){return'<iframe width="'.concat(t.width,'" height="').concat(t.height,'" src="').concat(e,'"></iframe>')},c=function(e,t,n){return"".concat(i.ZP.appUrl.legacy,"/u/").concat(e,"/a/").concat(t,"/p/").concat(n)},m=function(e){return function(e){return(null===e||void 0===e?void 0:e.split("?")[0])||""}(e)},p=h=function(e,t){return encodeURI("".concat(i.ZP.appUrl.legacy,"/u/").concat(t,"/a/").concat(e))}},83041:function(e,t,n){n.d(t,{Z:);var i=n(93433),r=n(1413),a=n(29439),o=n(8586),l=n(63020),s=n(9019),u=n(61113),d=n(47131),c=n(57829),m=n(16783),p=n(84060),h=n(24193),f=n(24929),v=n(20201),b=n(47313),g=n(18248),x=n(28422),Z=n(63694),j=n(34219),y=n(72668);var w=n(66149),C=n(33604),A=n(96467),S=n(4117),P=n(46417);function k(e){var t=e.isOpen,n=e.onClose,i=e.onCancel,r=e.onSubmit,o=e.password,l=(0,b.useState)(o),s=(0,a.Z)(l,2),u=s[0],d=s[1];return(0,P.jsxs)(w.Z,{open:t,onClose:i,children:[(0,P.jsx)(C.Z,{sx:{paddingBottom:"15px"},children:o?"Edit Password":"Create Password"}),(0,P.jsx)(A.Z,{children:(0,P.jsx)(c.Z,{mb:2,sx:{paddingTop:"10px"},children:(0,P.jsx)(m.Z,{"data-test":"password",label:"Password",placeholder:"Password",variant:"outlined",type:"password",fullWidth:!0,onChange:name:"password","data-sr-redact":!0,value:u})})}),(0,P.jsxs)(S.Z,{children:[(0,P.jsx)(h.Z,{variant:"contained",color:"primary",disabled:!u,onClick:children:"Save"}),(0,P.jsx)(h.Z,{variant:"outlined",color:"primary",onClick:i,children:"Cancel"})]})]})}function I(e){var t=e.id,n=e.isPasswordProtectedDisabled,w=e.onClose,C=(0,v.Z)(),A=function(e){var t=(0,y.a)(x.vw9,{fetchPolicy:"no-cache",variables:{id:e}}),n=t.data,i=t.loading,r=t.error;return{album:null===n||void 0===n?void 0:n.getAlbumForEditor,loading:i,error:r}}(t),S=A.album,I=(0,Z.Z)().isModifyAlbumsDisabled,E=(0,b.useState)(null),T=(0,a.Z)(E,2),D=T[0],M=T[1],z=(0,b.useState)(!1),R=(0,a.Z)(z,2),L=R[0],U=R[1],_=(0,b.useState)(void 0),B=(0,a.Z)(_,2),F=B[0],O=B[1],W=(0,b.useState)(void 0),V=(0,a.Z)(W,2),H=V[0],N=V[1],K=(0,j.Z)().mutation,G=H||F;if((0,b.useEffect)((function(){var e;S&&(M((0,r.Z)((0,r.Z)({},S),{},{id:S.albumId})),O((null===(e=S.passwords[0])||void 0===e?void 0:e.password)||void 0))}),[S]),!D)return null;var q=function(e){var t={id:e.id,title:e.title,description:e.description,privacyMode:e.privacy,passwords:[]};K({variables:t})},Q=function(e){N(void 0);var t=(0,r.Z)((0,r.Z)({},D),{},{privacy:e});M(t),q(t)},Y=$=function(){return U(!0)};return(0,P.jsxs)("div",{style:{padding:C.spacing(2)},children:[(0,P.jsxs)(s.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",sx:{mb:C.spacing(2)},children:[(0,P.jsx)(u.Z,{sx:{fontSize:"18px",color:"#081230"},"data-test":"album-details-drawer",children:"Details"}),(0,P.jsx)(d.Z,{onClick:w,"data-test":"close",size:"large",children:(0,P.jsx)(o.Z,{})})]}),(0,P.jsx)(c.Z,{mb:2,children:(0,P.jsx)(m.Z,{"data-test":"title",label:"Title",placeholder:"Title",variant:"outlined",fullWidth:!0,onChange:function(e){return M((0,r.Z)((0,r.Z)({},D),{},{title:e.target.value}))},name:"title",onBlur:Y,value:D.title||""})}),(0,P.jsx)(c.Z,{mb:2,children:(0,P.jsx)(m.Z,{"data-test":"description",label:"Description",placeholder:"Description",variant:"outlined",multiline:!0,rows:4,fullWidth:!0,onChange:function(e){return M((0,r.Z)((0,r.Z)({},D),{},{description:e.target.value}))},name:"description",onBlur:Y,value:D.description||""})}),(0,P.jsxs)(p.Z,{color:"primary",size:"large",disabled:I,children:[(0,P.jsx)(h.Z,{variant:D.privacy===x.zCR.Public?"contained":"outlined",onClick:function(){return Q(x.zCR.Public)},children:"Public"}),(0,P.jsx)(h.Z,{variant:D.privacy===x.zCR.Private?"contained":"outlined",onClick:children:"Private"}),(0,P.jsx)(h.Z,{variant:D.privacy===x.zCR.PasswordProtected?"contained":"outlined",onClick:function(){N(void 0),Q(x.zCR.PasswordProtected),$()},disabled:!!n,children:"Password"})]}),D.privacy===x.zCR.PasswordProtected&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(u.Z,{sx:{color:f.Z[600],lineHeight:"18px",margin:C.spacing(2,0)},children:"Only those who know the password can see your album."}),(0,P.jsx)(u.Z,{variant:"h6",children:"Album Password"}),G&&(0,P.jsxs)(s.ZP,{container:!0,alignItems:"center",children:[(0,P.jsx)(s.ZP,{item:!0,xs:6,children:(0,P.jsx)(u.Z,{children:"password:"})}),(0,P.jsx)(s.ZP,{item:!0,style:{flex:1},children:(0,P.jsx)(u.Z,{children:".".repeat(G.length)})}),(0,P.jsx)(d.Z,{onClick:$,size:"large",children:(0,P.jsx)(l.Z,{})})]},"password:"),!G&&(0,P.jsx)(u.Z,{sx:{color:f.Z[600],lineHeight:"18px",margin:C.spacing(2,0)},children:"...creating password"})]}),L&&(0,P.jsx)(k,{isOpen:!0,password:G,onClose:onSubmit:function(e){M((0,r.Z)((0,r.Z)({},D),{},{passwords:[].concat((0,i.Z)(D.passwords),[{id:(0,g.Z)(),password:e}])})),K({variables:{id:D.id,addPasswords:{id:(0,g.Z)(),password:e}}}),N(e)},onCancel:function(){U(!1),G||Q(x.zCR.Private)}})]})}k.defaultProps={password:void 0},I.defaultProps={isPasswordProtectedDisabled:!1};var E=I}}]);