(self.webpackChunkkoa2_react_redux_dom=self.webpackChunkkoa2_react_redux_dom||[]).push([[6745],{96518:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var i=n(73486);const o=e=>({type:i.Vf,payload:e})},74207:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(67294),o=n(36576);const r=e=>{let{children:t}=e;return i.createElement(o.Z,null,t)}},48963:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var i=n(59713),o=n.n(i),r=n(67294),a=n(71893),l=n(19741);class s extends r.Component{render(){const{type:e}=this.props,t={successNotification:r.createElement("path",{d:"M9 14l3 3 7-7",stroke:"#79BE00",strokeWidth:"2.5"}),infoNotification:r.createElement("path",{d:"M12.787 9.4V7.115h2.47V9.4h-2.47zm0 10.6v-9.334h2.47V20h-2.47z",fill:"#219BE7"}),warningNotification:r.createElement("path",{d:"M13.262 16.678l-.642-6.54V7.116h2.672v3.024l-.633 6.539h-1.397zM12.726 20v-2.47h2.47V20h-2.47z",fill:"#F09213"}),errorNotification:r.createElement("path",{d:"M13.262 16.678l-.642-6.54V7.116h2.672v3.024l-.633 6.539h-1.397zM12.726 20v-2.47h2.47V20h-2.47z",fill:"#F33"})},n={successNotification:["#F0FBDB","#79be00"],infoNotification:["#D3E1EB","#219BE7"],warningNotification:["#fbe5c1","#F09213"],errorNotification:["#fddfde","#fe3332"]}[e]||["#fa0","#fa0"];return r.createElement(l.Z,{width:"32",height:"32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("svg",{width:"32",height:"32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"icon-notification-svg"},r.createElement("circle",{cx:"18",cy:"18",r:"14",fill:n[0]}),r.createElement("circle",{cx:"14",cy:"14",r:"13",stroke:n[1],strokeWidth:"2"}),t[e]))}}const c=s;var d=n(83903);const u=a.default.div.withConfig({displayName:"NotificationComponent__NotificationContainer",componentId:"sc-1xpkb5u-0"})(["position:relative;padding:15px;margin:1rem 0;width:100%;box-sizing:border-box;display:flex;align-items:flex-start;.closeIcon{position:absolute;right:0;background:none;color:inherit;border:none;padding:0;font:inherit;cursor:pointer;outline:inherit;}.textContainer{padding-top:4px;margin:0 30px 0 10px;line-height:20px;font-size:16px;text-align:left;top:4px;}.mainText{font-weight:bold;}&.successNotification{background-color:#F7FDED;}&.infoNotification{background-color:#EEF9FD;}&.warningNotification{background-color:#FEFAEC;}&.errorNotification{background-color:#FEEFEF;}"]);class p extends r.Component{constructor(e){super(e),o()(this,"closeHandler",(()=>this.setState({visible:!1}))),this.state={visible:!0}}render(){const{type:e,title:t,text:n}=this.props,{visible:i}=this.state;return i?r.createElement(u,{className:e},r.createElement(c,{type:e}),r.createElement("div",{className:"textContainer"},r.createElement("div",{className:"mainText"},t),r.createElement("div",null,n)),r.createElement("button",{type:"button",className:"closeIcon",onClick:this.closeHandler,"data-tm":"close-notitfication"},r.createElement(d.Z,null))):null}}p.defaultProps={text:""};const f=p},36576:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(71893),o=n(45786);const r=i.default.h1.withConfig({displayName:"H1Component",componentId:"sc-7nkl7d-0"})(["font-weight:700;font-size:29px;line-height:1.3;margin:0 0 20px;@media (max-width:","px){font-size:22px;}"],o.tR)},83903:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(67294),o=n(19741);class r extends i.Component{render(){return i.createElement(o.Z,{width:"20",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("svg",{width:"20",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M5 5l10 10m0-10L5 15",stroke:"#256799"})))}}const a=r},19741:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=n(71893).default.svg.withConfig({displayName:"SvgIconCss",componentId:"sc-11e6gib-0"})(["min-width:36px;@media (max-width:768px){margin-left:10px;}"])},32228:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>$});var i=n(67294),o=n(65858),r=n(66801),a=n(48281),l=n(34081),s=n(45140),c=n(96518),d=n(97516),u=n(59713),p=n.n(u),f=n(71893),m=n(27484),h=n.n(m),v=n(56176),g=n.n(v),b=n(48504),w=n(14465),x=n(45786),E=n(91668);const y=f.default.span.withConfig({displayName:"StarComponent__StarContainer",componentId:"sc-3ruyz0-0"})(["font-size:38px;cursor:pointer;float:right;&.orange{color:#f09212;}&.defaultColor{color:#b5b5b5;}&:hover{color:orange;};&:hover~span{color:orange;};@media (max-width:","px){font-size:32px;}"],x.Qu);class C extends i.Component{constructor(){super(...arguments),p()(this,"starClicked",(()=>{const{onClick:e,value:t}=this.props;e(t)}))}render(){const{isFilled:e}=this.props,t=e?"orange":"defaultColor";return i.createElement(y,{onClick:this.starClicked,className:t},"★")}}const k=C;class N extends i.Component{constructor(){super(...arguments),p()(this,"getStar",(e=>{const{currentRating:t}=this.props,n=e<=t;return i.createElement(k,{key:e,onClick:this.updateValue,value:e,isFilled:n})})),p()(this,"updateValue",(e=>{const{changeRating:t}=this.props;t(e)}))}render(){const{stars:e}=this.props,t=[];for(let n=e;n>0;n-=1)t.push(this.getStar(n));return i.createElement("div",{className:"mobile-stars"},i.createElement("span",null,t))}}const _=N;var I=n(48963);const M=f.default.div.withConfig({displayName:"SpinnerComponent__Container",componentId:"sc-1tpai6x-0"})([".lds-ellipsis{display:inline-block;position:relative;width:80px;height:80px;top:-20px;left:40%;}.lds-ellipsis div{position:absolute;top:33px;width:13px;height:13px;border-radius:50%;background:#fff;animation-timing-function:cubic-bezier(0,1,1,0);}.lds-ellipsis div:nth-child(1){left:8px;animation:lds-ellipsis1 0.6s infinite;}.lds-ellipsis div:nth-child(2){left:8px;animation:lds-ellipsis2 0.6s infinite;}.lds-ellipsis div:nth-child(3){left:32px;animation:lds-ellipsis2 0.6s infinite;}.lds-ellipsis div:nth-child(4){left:56px;animation:lds-ellipsis3 0.6s infinite;}@keyframes lds-ellipsis1{0%{transform:scale(0);}100%{transform:scale(1);}}@keyframes lds-ellipsis3{0%{transform:scale(1);}100%{transform:scale(0);}}@keyframes lds-ellipsis2{0%{transform:translate(0,0);}100%{transform:translate(24px,0);}}"]);class T extends i.Component{render(){return i.createElement(M,null,i.createElement("div",{className:"lds-ellipsis"},i.createElement("div",null),i.createElement("div",null),i.createElement("div",null),i.createElement("div",null)))}}const R=T;var z=n(8783);const D=f.default.div.withConfig({displayName:"ButtonComponent__SpinnerBlock",componentId:"sc-fpffol-0"})(["background:#1CA0F1;border-radius:5px;width:100%;height:40px;align-items:center;@media (min-width:","px){max-width:300px;}"],x.dB),L=(0,f.default)(z.Z).withConfig({displayName:"ButtonComponent__Button",componentId:"sc-fpffol-1"})(["&:disabled{color:#9B9B9B;};"]);class S extends i.Component{render(){const{onClick:e,active:t,waitResponseStatus:n,dataTm:o}=this.props;return n?i.createElement(D,null,i.createElement(R,null)):i.createElement(L,{color:t?"#ffffff":"Grey",disabled:!t,type:"submit",onClick:e,"data-tm":o,btnWidth:350},t?"Надіслати відгук":"Поставте оцінку і залиште відгук")}}const F=S;var O=n(74207),A=n(68929);const Y=f.default.div.withConfig({displayName:"RatingComponent__RatingContainer",componentId:"sc-10tzfly-0"})(["display:grid;grid-gap:25px;margin:30px 0;@media (max-width:","px){justify-items:center;padding:15px;}.title{font-size:28px;font-weight:bold;color:#003755;}.smallTitle{color:#003755;font-size:18px;}textarea{width:100%;}a{color:#256799;text-decoration:none;}"],x.tR),P=f.default.div.withConfig({displayName:"RatingComponent__StarsWrapper",componentId:"sc-10tzfly-1"})(["width:500px;display:flex;padding-top:10px;.infoText{display:flex;font-size:14px;margin:10px;min-width:65px;align-items:center;justify-content:center;}.ratingText{font-size:18px;font-weight:bold;margin-right:5px;color:",";}.mobile-stars{align-self:center;}@media (max-width:","px){width:100%;flex-direction:column;justify-content:center;}"],(e=>e.color),x.tR),Z=f.default.div.withConfig({displayName:"RatingComponent__NotificationBlock",componentId:"sc-10tzfly-2"})(["width:100%;"]),j=f.default.div.withConfig({displayName:"RatingComponent__FeedbackWrapper",componentId:"sc-10tzfly-3"})(["width:100%;display:grid;grid-template-columns:2fr 1fr;grid-gap:30px;@media (max-width:","px){grid-template-columns:auto;}> textarea{padding:15px;box-sizing:border-box;}"],x.tR),B=f.default.div.withConfig({displayName:"RatingComponent__InfoWrapper",componentId:"sc-10tzfly-4"})(["background-color:#F3FAFD;padding:15px;display:grid;grid-gap:5px;> div{font-size:14px;}"]);class H extends i.Component{constructor(e){super(e),p()(this,"changeRating",(e=>this.setState({rating:e}))),p()(this,"handleTextarea",(e=>this.setState({feedbackText:e.target.value}))),p()(this,"sendRating",(()=>{const{rating:e,feedbackText:t}=this.state,{newbuildId:n,requestId:i}=this.props;this.setState({waitResponseStatus:!0});var o;(o={rating:e,feedbackText:t,newbuildId:n,requestId:i},(0,E.v_)("/k8s/api/nocache/feedbackAfterVisit",{body:o}).then((e=>e.json()))).then((()=>{this.setState({feedbackIsCreated:!0,waitResponseStatus:!1,feedbackText:"",rating:0})}))})),this.state={rating:0,feedbackText:"",waitResponseStatus:!1,feedbackIsCreated:!1}}render(){h().locale("uk"),h().extend(g());const{newbuildId:e,newbuildName:t,date:n}=this.props,{rating:o,feedbackText:r,waitResponseStatus:a,feedbackIsCreated:l}=this.state;let s="red";o>4&&o<=7&&(s="orange"),o>7&&(s="green");const c=(0,w.buildNewbuildPageUrl)({id:e,name:t,langId:b.UK_ID});return i.createElement(Y,null,i.createElement("div",null,i.createElement(O.Z,null,"Залишити відгук про",` ${t}`),i.createElement("div",null,i.createElement("b",null,h()(n).format("ll"))," ви відвідували відділ продажів ",i.createElement(A.Z,{to:c,scrollToPageContent:!0},t)),i.createElement("div",null,"Залиште, будь ласка, відгук про даний об’єкт – допоможіть іншим покупцям зробити правильний вибір")),l?i.createElement(Z,null,i.createElement(I.Z,{title:"Дякуємо за відгук, Ваша думка дуже важлива для нас!",type:"successNotification"})):null,i.createElement(j,null,i.createElement("textarea",{rows:"5",onChange:this.handleTextarea,placeholder:"Поділіться своїми думками і враженнями",value:r}),i.createElement(B,null,i.createElement("b",null,"Про що розповісти в відгуку?"),i.createElement("div",null,"• Що сподобалося, а що не сподобалося?"),i.createElement("div",null,"• Оцініть якість роботи відділу продажів"))),i.createElement("div",null,i.createElement("div",null,i.createElement("b",null,"Оцініть якість роботи відділу продажів")),i.createElement(P,{color:s},i.createElement(_,{currentRating:o,stars:10,changeRating:this.changeRating}),i.createElement("div",{className:"infoText"},i.createElement("div",{className:"ratingText"},o),i.createElement("div",null,"з 10")))),i.createElement(F,{onClick:this.sendRating,active:!!r,waitResponseStatus:a,dataTm:"send-rating-button"}))}}H.defaultProps={newbuildId:"",newbuildName:"",date:"",requestId:""};const V=H;var W=n(10977),q=n(99742);class U extends i.Component{static async fetchData(e){let{dispatch:t,allProps:n={}}=e;console.log("FeedbackSalesDepartmentComponent.js",18);const{langId:i}=n,o=(0,r.makeTranslate)(i),l=o("Отзыв о новостройке","Відгук про новобудову")+a.DIM_RIA_LEFT_VERTICAL_LINE,s=o("Отзыв о новостройке","Відгук про новобудову");t((0,c.Z)({title:l,description:s}))}render(){const{newbuildId:e,newbuildName:t,date:n,requestId:o,translate:r}=this.props;return i.createElement(i.Fragment,null,i.createElement("div",{className:"mainContainer"},i.createElement(W.Z,{translate:r}),i.createElement("main",{className:"content"},e&&t&&n&&o?i.createElement(V,{newbuildId:e,newbuildName:t,date:n,requestId:o}):null)),i.createElement(q.Z,{translate:r}))}}U.defaultProps={newbuildId:"",newbuildName:"",date:"",requestId:""};const $=(0,s.Z)((0,o.$j)(((e,t)=>{let{location:n}=t;return{langId:(0,d.Ql)(e),newbuildId:(0,l.Od)({location:n}),newbuildName:(0,l.UM)({location:n}),date:(0,l.iY)({location:n}),requestId:(0,l.St)({location:n})}}))(U))},75473:(e,t,n)=>{"use strict";n.d(t,{eD:()=>a,vd:()=>r,aD:()=>o});var i=n(45786);const o=e=>e.screenWidth,r=e=>e.screenType,a=e=>r(e)===i.Jq},56176:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(t,n,i){var o=n.prototype,r=o.format;i.en.formats=e,o.format=function(t){void 0===t&&(t="YYYY-MM-DDTHH:mm:ssZ");var n=this.$locale().formats,i=function(t,n){return t.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,i,o){var r=o&&o.toUpperCase();return i||n[o]||e[o]||n[r].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))}))}(t,void 0===n?{}:n);return r.call(this,i)}}}()},1216:(e,t,n)=>{"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(67294),r=u(o),a=u(n(45697)),l=n(54081),s=u(n(38315)),c=u(n(38282)),d=u(n(40821));function u(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var h=0,v=0,g=0,b=0,w="data-lazyload-listened",x=[],E=[],y=!1;try{var C=Object.defineProperty({},"passive",{get:function(){y=!0}});window.addEventListener("test",null,C)}catch(e){}var k=!!y&&{capture:!1,passive:!0},N=function(e){var t=e.ref;if(t instanceof HTMLElement){var n=(0,s.default)(t),i=e.props.overflow&&n!==t.ownerDocument&&n!==document&&n!==document.documentElement?function(e,t){var n=e.ref,i=void 0,o=void 0,r=void 0,a=void 0;try{var l=t.getBoundingClientRect();i=l.top,o=l.left,r=l.height,a=l.width}catch(e){i=h,o=v,r=b,a=g}var s=window.innerHeight||document.documentElement.clientHeight,c=window.innerWidth||document.documentElement.clientWidth,d=Math.max(i,0),u=Math.max(o,0),p=Math.min(s,i+r)-d,f=Math.min(c,o+a)-u,m=void 0,w=void 0,x=void 0,E=void 0;try{var y=n.getBoundingClientRect();m=y.top,w=y.left,x=y.height,E=y.width}catch(e){m=h,w=v,x=b,E=g}var C=m-d,k=w-u,N=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return C-N[0]<=p&&C+x+N[1]>=0&&k-N[0]<=f&&k+E+N[1]>=0}(e,n):function(e){var t=e.ref;if(!(t.offsetWidth||t.offsetHeight||t.getClientRects().length))return!1;var n=void 0,i=void 0;try{var o=t.getBoundingClientRect();n=o.top,i=o.height}catch(e){n=h,i=b}var r=window.innerHeight||document.documentElement.clientHeight,a=Array.isArray(e.props.offset)?e.props.offset:[e.props.offset,e.props.offset];return n-a[0]<=r&&n+i+a[1]>=0}(e);i?e.visible||(e.props.once&&E.push(e),e.visible=!0,e.forceUpdate()):e.props.once&&e.visible||(e.visible=!1,e.props.unmountIfInvisible&&e.forceUpdate())}},_=function(){E.forEach((function(e){var t=x.indexOf(e);-1!==t&&x.splice(t,1)})),E=[]},I=function(){for(var e=0;e<x.length;++e){var t=x[e];N(t)}_()},M=void 0,T=null,R=function(e){function t(e){p(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.visible=!1,n.setRef=n.setRef.bind(n),n}return m(t,e),i(t,[{key:"componentDidMount",value:function(){var e=window,t=this.props.scrollContainer;t&&"string"==typeof t&&(e=e.document.querySelector(t));var n=void 0!==this.props.debounce&&"throttle"===M||"debounce"===M&&void 0===this.props.debounce;if(n&&((0,l.off)(e,"scroll",T,k),(0,l.off)(window,"resize",T,k),T=null),T||(void 0!==this.props.debounce?(T=(0,c.default)(I,"number"==typeof this.props.debounce?this.props.debounce:300),M="debounce"):void 0!==this.props.throttle?(T=(0,d.default)(I,"number"==typeof this.props.throttle?this.props.throttle:300),M="throttle"):T=I),this.props.overflow){var i=(0,s.default)(this.ref);if(i&&"function"==typeof i.getAttribute){var o=+i.getAttribute(w)+1;1===o&&i.addEventListener("scroll",T,k),i.setAttribute(w,o)}}else if(0===x.length||n){var r=this.props,a=r.scroll,u=r.resize;a&&(0,l.on)(e,"scroll",T,k),u&&(0,l.on)(window,"resize",T,k)}x.push(this),N(this)}},{key:"shouldComponentUpdate",value:function(){return this.visible}},{key:"componentWillUnmount",value:function(){if(this.props.overflow){var e=(0,s.default)(this.ref);if(e&&"function"==typeof e.getAttribute){var t=+e.getAttribute(w)-1;0===t?(e.removeEventListener("scroll",T,k),e.removeAttribute(w)):e.setAttribute(w,t)}}var n=x.indexOf(this);-1!==n&&x.splice(n,1),0===x.length&&"undefined"!=typeof window&&((0,l.off)(window,"resize",T,k),(0,l.off)(window,"scroll",T,k))}},{key:"setRef",value:function(e){e&&(this.ref=e)}},{key:"render",value:function(){var e=this.props,t=e.height,n=e.children,i=e.placeholder,o=e.classNamePrefix;return r.default.createElement("div",{className:o+"-wrapper",ref:this.setRef},this.visible?n:i||r.default.createElement("div",{style:{height:t},className:o+"-placeholder"}))}}]),t}(o.Component);R.propTypes={classNamePrefix:a.default.string,once:a.default.bool,height:a.default.oneOfType([a.default.number,a.default.string]),offset:a.default.oneOfType([a.default.number,a.default.arrayOf(a.default.number)]),overflow:a.default.bool,resize:a.default.bool,scroll:a.default.bool,children:a.default.node,throttle:a.default.oneOfType([a.default.number,a.default.bool]),debounce:a.default.oneOfType([a.default.number,a.default.bool]),placeholder:a.default.node,scrollContainer:a.default.oneOfType([a.default.string,a.default.object]),unmountIfInvisible:a.default.bool},R.defaultProps={classNamePrefix:"lazyload",once:!1,offset:0,overflow:!1,resize:!1,scroll:!0,unmountIfInvisible:!1};var z=function(e){return e.displayName||e.name||"Component"};t.ZP=R},38282:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var i=void 0,o=void 0,r=void 0,a=void 0,l=void 0,s=function s(){var c=+new Date-a;c<t&&c>=0?i=setTimeout(s,t-c):(i=null,n||(l=e.apply(r,o),i||(r=null,o=null)))};return function(){r=this,o=arguments,a=+new Date;var c=n&&!i;return i||(i=setTimeout(s,t)),c&&(l=e.apply(r,o),r=null,o=null),l}}},54081:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.on=function(e,t,n,i){i=i||!1,e.addEventListener?e.addEventListener(t,n,i):e.attachEvent&&e.attachEvent("on"+t,(function(t){n.call(e,t||window.event)}))},t.off=function(e,t,n,i){i=i||!1,e.removeEventListener?e.removeEventListener(t,n,i):e.detachEvent&&e.detachEvent("on"+t,n)}},38315:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!(e instanceof HTMLElement))return document.documentElement;for(var t="absolute"===e.style.position,n=/(scroll|auto)/,i=e;i;){if(!i.parentNode)return e.ownerDocument||document.documentElement;var o=window.getComputedStyle(i),r=o.position,a=o.overflow,l=o["overflow-x"],s=o["overflow-y"];if("static"===r&&t)i=i.parentNode;else{if(n.test(a)&&n.test(l)&&n.test(s))return i;i=i.parentNode}}return e.ownerDocument||e.documentElement||document.documentElement}},40821:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var i,o;return t||(t=250),function(){var r=n||this,a=+new Date,l=arguments;i&&a<i+t?(clearTimeout(o),o=setTimeout((function(){i=a,e.apply(r,l)}),t)):(i=a,e.apply(r,l))}}}}]);ultureList:function(){return T.slice(0)},setCultureList:p,pluralForms:A,onCultureChange:function(e,t,n){c.attach(e,t),n&&e.call(t,N)}}},"4.js":function(e,t,n,r,i,s,o,u){function a(e){var t=l[e];return t||(t=function(){for(var t=this,n,r;t=t.handler;){r=t.callbacks[e];if("function"==typeof r){if(!n){n=[this];for(var i=0;i<arguments.length;i++)n.push(arguments[i])}r.apply(t.context||this,n)}r=t.callbacks["*"];if("function"==typeof r){if(!n)for(n=[this],i=0;i<arguments.length;i++)n.push(arguments[i]);r.call(t.context||this,{sender:this,type:e,args:n})}}},l[e]=t),t}e=n.Class;var f={},l={},c=function(){};e=e(null,{className:this.path+".Emitter",extendConstructor_:!0,handler:null,emit_destroy:a("destroy"),listen:e.nestedExtendProperty(),init:function(){this.handler&&!this.handler.callbacks&&(this.handler={callbacks:this.handler,context:this,handler:null})},addHandler:function(e,t){this.handler={callbacks:e,context:t||this,handler:this.handler}},removeHandler:function(e,t){var n=this,r;for(t=t||this;r=n,n=n.handler;)if(n.callbacks===e&&n.context===t){n.callbacks=f,r.handler=n.handler;break}},destroy:function(){this.destroy=c,this.emit_destroy(),this.handler=null}}),t.exports={create:a,createHandler:function(e,t){var n={events:[]};if(e){e=String(e).trim().split(/\s+|\s*,\s*/).sort();for(var n={events:e},r=0,i;i=e[r];r++)"destroy"!=i&&(n[i]=t)}return n},events:l,Emitter:e}},"5.js":function(e,t,n,r,i,s,o,u){function a(e){"string"==typeof e&&(e=n.l10n.token(e));if(!e)return null;var t=e.basisObjectId,r=et[t];return r||(r=et[t]=new it(new tt(e))),r}function f(e){rt[E.extname(e)]&&n.resource(e)().startUse()}function l(e){rt[E.extname(e)]&&n.resource(e)().stopUse()}function c(){this.destroyBuilder&&d.call(this);for(var e=0,t;t=this.attaches_[e];e++)t.handler.call(t.context)}function h(e){for(var t=[],n=0;n<e.length;n++)t.push(Array.isArray(e[n])?h(e[n]):e[n]);return t}function p(e,t,r,i){var s=e,o;return"function"==typeof s&&(t="baseURI"in e?e.baseURI:t,o="url"in e?e.url:o,s=s()),s instanceof n.Token&&(t="baseURI"in e?e.baseURI:t,o="url"in e?e.url:o,s=s.get()),Array.isArray(s)?(r&&(s=h(s)),s={tokens:s}):"object"==typeof s&&Array.isArray(s.tokens)||(s=String(s)),"string"==typeof s&&(s=nt(s,t,i,o)),s}function d(){var e=p(this.source,this.baseURI),t=this.destroyBuilder,n=this.builder(e.tokens,this),r=this.deps_;if(r){this.deps_=null;for(var i=0,s;s=r[i];i++)s.bindingBridge.detach(s,d,this)}if(e.deps&&e.deps.length)for(this.deps_=r=e.deps,i=0;s=r[i];i++)s.bindingBridge.attach(s,d,this);this.createInstance=n.createInstance,this.clearInstance=n.destroyInstance,this.getBinding=function(){return{names:n.keys}},this.destroyBuilder=n.destroy;if(e=e.resources&&0<e.resources.length?e.resources:null)for(i=0;r=e[i];i++)f(r);if(this.resources)for(i=0;r=this.resources[i];i++)l(r);this.resources=e,t&&t(!0)}function v(e){return function(){var t;return t=(t=document.getElementById(e))&&"SCRIPT"==t.tagName?"text/basis-template"==t.type?t.textContent||t.text:"":"",t}}function m(){var e=n.array(arguments).join("."),t=lt[e];return t||(t=new at("",e),lt[e]=t),t}function g(e,t){for(var n=[],r={},i=[],s=0;s<t.length;s++)r[t[s]]||(r[t[s]]=!0,i.push(t[s]));n.source=i.join("/"),r={base:!0};for(i=0;i<t.length;i++)s=t[i]||"base",s==e||r[s]||(b(s),r[s]=!0,n.push(s),t.splice.apply(t,[i+1,0].concat(ft[s].fallback)));return n.unshift(e),"base"!=e&&n.push("base"),n.value=n.join("/"),n}function y(e,t){for(var n=ft[e].sourcesList,r=0,i;i=n[r];r++)if(i.hasOwnProperty(t))return i[t];return""}function b(e){e||(e="base");if(ft[e])return ft[e].theme;if(!/^([a-z0-9\_\-]+)$/.test(e))throw 8;var t={},r=[t],i=new ut;ft[e]={theme:i,sources:t,sourcesList:r,fallback:[]};var s=function(n,r){return 0==n in t&&(t[n]=r,-1!=ft[ht].fallback.indexOf(e)&&m(n).set()),m(n)};return n.object.extend(i,{name:e,fallback:function(t){if(i!==ct&&0<arguments.length){var n="string"==typeof t?t.split("/"):[],r={},n=g(e,n);if(ft[e].fallback.source!=n.source){ft[e].fallback.source=n.source;for(var s in ft){var o=ft[s].fallback,n=g(s,(o.source||"").split("/"));if(n.value!=o.value){r[s]=!0,ft[s].fallback=n,o=ft[s].sourcesList,o.length=n.length;for(var u=0;u<o.length;u++)o[u]=ft[n[u]].sources}}}for(s in r)if(-1!=ft[ht].fallback.indexOf(s)){n=void 0;for(n in lt)m(n).set();break}}return n=ft[e].fallback.slice(1),n.source=ft[e].fallback.source,n},define:function(e,t){"function"==typeof e&&(e=e());if("string"==typeof e){if("object"==typeof t){var n=e,r=t,o={},u;for(u in r)r.hasOwnProperty(u)&&(o[u]=s(n+"."+u,r[u]));return o}return 1==arguments.length?m(e):s(e,t)}if("object"==typeof e){r=e;for(n in r)r.hasOwnProperty(n)&&s(n,r[n]);return i}},apply:function(){if(e!=ht){ht=e;for(var t in lt)m(t).set();t=0;for(var n;n=pt[t];t++)n.fn.call(n.context,e)}return i},getSource:function(n,r){return r?y(e,n):t[n]},drop:function(n){t.hasOwnProperty(n)&&(delete t[n],-1!=ft[ht].fallback.indexOf(e)&&m(n).set())}}),ft[e].fallback=g(e,[]),r.push(ft.base.sources),i}n.require("./3.js"),e=this.path,r=n.Class;var w=n.cleaner,E=n.path,S=n.array.search,x=n.array.add,T=n.array.remove,N=[],C={},k=1,L=2,A=4,O=6,M=3,_=8,D=0,P=1,H=2,B=3,j=4,F=/^event-(.+)$/,I={4:"class",5:"style"},q={"class":A,style:5},R={2:j,4:j-1,5:j-1,6:2},U=4,z=/((?:.|[\r\n])*?)(\{(?:l10n:([a-zA-Z_][a-zA-Z0-9_\-]*(?:\.[a-zA-Z_][a-zA-Z0-9_\-]*)*(?:\.\{[a-zA-Z_][a-zA-Z0-9_\-]*\})?)\})?|<(\/|!--(\s*\{)?)?|$)/g,W=/([a-z_][a-z0-9\-_]*)(:|\{|\s*(\/?>)?)/ig,X=/([a-z_][a-z0-9_\-]*)(:|\{|=|\s*)|(\/?>)/ig,V=/(.|[\r\n])*?--\x3e/g,$=/([a-z_][a-z0-9_\-]*(?::[a-z_][a-z0-9_\-]*)?)>/ig,J=/([a-z_][a-z0-9_]*)(\||\}\s*)/ig,K=/"((?:(\\")|[^"])*?)"\s*/g,Q=/^/g,G={text:/((?:.|[\r\n])*?)(?:<\/b:text>|$)/g},Y=/\\"/g,Z=function(e){var t=[],n=[],r={childs:t},i,s,o,u=!1,a=0,f,l=z,c=0,h;for(e=e.trim();c<e.length||l!=z;)if(i=l.lastIndex=c,(h=l.exec(e))&&h.index===c){c=l.lastIndex;switch(l){case z:f=i+h[1].length,a!=f&&(i=a==i?h[1]:e.substring(a,f),(s=i.replace(/\s*(\r\n?|\n\r?)\s*/g,""))&&r.childs.push({type:M,len:i.length,value:s})),a=f,h[3]?r.childs.push({type:M,refs:["l10n:"+h[3]],value:"{l10n:"+h[3]+"}"}):"{"==h[2]?(o=c-1,r.childs.push(s={type:M}),l=J):h[4]?"/"==h[4]?(s=null,l=$):(r.childs.push(s={type:_}),h[5]?(o=c-h[5].length,l=J):(o=c,l=V)):h[2]&&(u=!0,n.push(r),r.childs.push(s={type:k,attrs:[],childs:[]}),r=s,l=W);break;case $:h[1]!==(r.prefix?r.prefix+":":"")+r.name?r.childs.push({type:M,value:"</"+h[0]}):r=n.pop(),l=z;break;case W:case X:if(":"==h[2]){s.prefix?l=Q:s.prefix=h[1];break}h[1]&&(s.name=h[1],s.type==L&&r.attrs.push(s));if("{"==h[2]){l=s.type==k?J:Q;break}if(h[3]){u=!1;if("/>"==h[3])r=n.pop();else if("b"==r.prefix&&r.name in G){l=G[r.name];break}l=z;break}if("="==h[2]){l=K;break}s={type:L},l=X;break;case V:s.value=e.substring(o,c-3),l=z;break;case J:s.refs?s.refs.push(h[1]):s.refs=[h[1]],"|"!=h[2]&&(s.type==M?(c-=h[2].length-1,s.value=e.substring(o,c),l=z):s.type==_?l=V:s.type==L&&"="==e[c]?(c++,l=K):(s={type:L},l=X));break;case K:s.value=h[1].replace(Y,'"'),s={type:L},l=X;break;case G.text:r.childs.push({type:M,value:h[1]}),r=n.pop(),l=z;break;default:throw 6}l==z&&(a=c)}else if(l==J&&s&&s.type==_)l=V;else{u&&(r=n.pop()),s&&r.childs.pop();if(s=r.childs.pop())s.type!=M||s.refs?r.childs.push(s):a-="len"in s?s.len:s.value.length;u=!1,l=z}return a!=c&&r.childs.push({type:M,value:e.substring(a,c)}),t.templateTokens=!0,t},et={},tt=n.Token.subclass({className:e+".L10nProxyToken",token:null,url:"",init:function(e){this.url=e.dictionary.resource.url+":"+e.name,this.token=e,this.set(),e.attach(this.set,this)},set:function(){return n.Token.prototype.set.call(this,"markup"==this.token.type?'<span class="basisjs-markup" data-basisjs-l10n="'+(this.token.name+"@"+this.token.dictionary.resource.url)+'">'+String(this.token.value)+"</span>":"")},destroy:function(){n.Token.prototype.destroy.call(this),this.token=null}}),nt=function(){function e(e){return(e.prefix?e.prefix+":":"")+e.name}function t(e,t){return V[t]||("#"==t.charAt(0)?V[t]=String.fromCharCode("x"==t.charAt(1)||"X"==t.charAt(1)?parseInt(t.substr(2),16):t.substr(1)):$&&($.innerHTML=e,V[t]=$.firstChild?$.firstChild.nodeValue:e)),V[t]||e}function r(e){return(e=e.refs)&&e.length?e:0}function i(e,n){function r(e){for(var n,r=[],i=[],s={},o=0;o<e.length;o++)o%2?(n=e[o],s[n]||(s[n]=r.length,r.push(n)),i.push(s[n])):e[o]&&i.push(e[o].replace(X,t));return[r,i]}var i=0,s,o;if(n)switch(e){case"class":if(s=n.match(y)){for(var u=[],i=[],a=0,f;f=s[a];a++)(o=f.match(b))?i.push([o[1]||"",o[2]]):u.push(f);n=u.join(" ")}break;case"style":u=[],i=[];if(s=n.match(w))for(a=0;f=s[a];a++)o=f.match(C),f=o[1],n=o[2].trim(),o=n.split(z),1<o.length?(o=r(o),o.push(f),i.push(o)):u.push(f+": "+n.replace(X,t));(n=u.join("; "))&&(n+=";");break;default:s=n.split(W),1<s.length?i=r(s):n=n.replace(X,t)}return i&&!i.length&&(i=0),{binding:i,value:n,type:q[e]||2}}function s(t,n,s){t=t.attrs;for(var u=[],a,f=0,l;l=t[f];f++)if("b"==l.prefix)switch(l.name){case"ref":for(l=(l.value||"").trim().split(/\s+/),a=0;a<l.length;a++)o(n,l[a])}else if(a=l.name.match(F))u.push(a[1]==l.value?[O,a[1]]:[O,a[1],l.value]);else{a=i(l.name,l.value);var c=[a.type,a.binding,r(l)];2==a.type&&c.push(e(l)),!a.value||s&&a.binding&&2==a.type||c.push(a.value),u.push(c)}return u.length?u:0}function o(e,t){e[H]||(e[H]=[]),x(e[H],t),"element"!=t&&(e[P]=1==e[H].length?t:0)}function u(e,t){var n=e[H].indexOf(t);if(-1!=n){var r=e[P]&&"number"==typeof e[P];e[H].splice(n,1),r&&n==e[P]-1&&(e[P]=t),e[H].length?r&&(e[P]-=n<e[P]-1):e[H]=0}}function f(t){var n={};if(t.attrs)for(var r=0,i;i=t.attrs[r];r++)n[e(i)]=i.value;return n}function l(e,t){for(var n=0;n<t.length;n++)x(e,t[n])}function c(v,y,b){function w(e,t,n){var r=f(e);t&&(r.name=t);if(r.name&&g.test(r.name)){var s=K[r.ref||"element"];if(s&&s.token[D]==k){t=s.token;var o=(e=r.name.match(F))?O:q[r.name]||L,u=R[o]||j,a=t&&S(t,r.name,function(e){return e[D]==O?"event-"+e[1]:I[e[D]]||e[B]},U);a||"remove"==n||(e?a=[o,e[1]]:(a=[o,0,0,o==L?r.name:""],o==L&&a.push("")),t||(t=[],s.token.push(t)),t.push(a)),s="class"==r.name||"style"==r.name;switch(n){case"set":if(a[D]==O){r.value==e[1]?a.length=2:a[u]=r.value;break}n=i(r.name,r.value),a[P]=n.binding,b.optimizeSize&&a[P]&&!s?a.length=u:a[u]=n.value||"";if(s&&!a[P]&&!a[u]){T(t,a);break}break;case"append":n=i(r.name,r.value);if(!e)if(n.binding)if(o=a[P])switch(r.name){case"style":for(var l={},r=0,c;c=o[r];r++)l[c[2]]=r;for(r=0;c=n.binding[r];r++)c[2]in l?o[l[c[2]]]=c:o.push(c);break;case"class":o.push.apply(o,n.binding);break;default:for(n.binding[0].forEach(function(e){x(this,e)},o[0]),r=0;r<n.binding[1].length;r++)l=n.binding[1][r],"number"==typeof l&&(l=o[0].indexOf(n.binding[0][l])),o[1].push(l)}else a[P]=n.binding,s||a[P][1].unshift(a[u]);else!s&&a[P]&&a[P][1].push(r.value);n.value&&(a[u]=(a[u]||"")+(a[u]&&(e||s)?" ":"")+n.value);if(s&&!a[P]&&!a[u]){T(t,a);break}break;case"remove":a&&T(t,a)}}}}for(var C=[],A=0,H,z;H=v[A];A++){var W=r(H),V=W&&1==W.length?W[0]:0;switch(H.type){case k:if("b"==H.prefix){var $=f(H);switch(H.name){case"resource":case"style":$.src&&y.resources.push(E.resolve(y.baseURI+$.src));break;case"l10n":$.src&&(y.dictURI=E.resolve(y.baseURI,$.src));break;case"define":if("name"in $&&!y.defines[$.name])switch($.type){case"bool":y.defines[$.name]=["true"==$["default"]?1:0];break;case"enum":H=$.values?$.values.trim().split(" "):[],y.defines[$.name]=[H.indexOf($["default"])+1,H]}break;case"text":H=H.childs[0],v[A--]=n.object.extend(H,{refs:($.ref||"").trim().split(/\s+/),value:"notrim"in $?H.value:H.value.replace(/^\s*[\r\n]+|[\r\n]\s*$/g,"")});break;case"include":if(V=$.src){V=(W=/^#\d+$/.test(V))?V.substr(1):V,V=W?N[V]:/^[a-z0-9\.]+$/i.test(V)&&!/\.tmpl$/.test(V)?m(V):n.resource(E.resolve(y.baseURI+V));if(!V)continue;if(-1==J.indexOf(V)){x(y.deps,V),J.push(V),W?(V.source.bindingBridge&&x(y.deps,V.source),W=p(V.source,V.baseURI,!0,b)):W=p(V,V.url?E.dirname(V.url)+"/":"",!0,b),J.pop(),W.resources&&0=="no-style"in $&&l(y.resources,W.resources),W.deps&&l(y.deps,W.deps);var K=d(W.tokens),V=(H.childs||[]).slice();$["class"]&&V.push({type:k,prefix:"b",name:"append-class",attrs:[{type:L,name:"value",value:$["class"]}]}),$.id&&V.push({type:k,prefix:"b",name:"set-attr",attrs:[{type:L,name:"name",value:"id"},{type:L,name:"value",value:$.id}]}),$.ref&&K.element&&$.ref.trim().split(/\s+/).map(function(e){o(K.element.token,e)});for(var $=0,Q;Q=V[$];$++)if(Q.type==k&&"b"==Q.prefix)switch(Q.name){case"replace":case"remove":case"before":case"after":H="replace"==Q.name||"remove"==Q.name;var G=f(Q),Y="ref"in G||!H?G.ref:"element";if(Y=Y&&K[Y])G=Y.owner.indexOf(Y.token),-1!=G&&(H=[G+("after"==Q.name),H],"remove"!=Q.name&&(H=H.concat(c(Q.childs,y,b)||[])),Y.owner.splice.apply(Y.owner,H));break;case"prepend":case"append":G=f(Q),(H=(Y=(Y="ref"in G?G.ref:"element")&&K[Y])&&Y.token)&&H[D]==k&&(G=c(Q.childs,y,b)||[],"prepend"==Q.name?H.splice.apply(H,[U,0].concat(G)):H.push.apply(H,G));break;case"attr":case"set-attr":w(Q,!1,"set");break;case"append-attr":w(Q,!1,"append");break;case"remove-attr":w(Q,!1,"remove");break;case"class":case"append-class":w(Q,"class","append");break;case"set-class":w(Q,"class","set");break;case"remove-class":w(Q,"class","remove");break;case"add-ref":G=f(Q),(H=(Y=(Y="ref"in G?G.ref:"element")&&K[Y])&&Y.token)&&G.name&&o(H,G.name);break;case"remove-ref":G=f(Q),(H=(Y=(Y="ref"in G?G.ref:"element")&&K[Y])&&Y.token)&&u(H,G.name||G.ref)}else W.tokens.push.apply(W.tokens,c([Q],y,b)||[]);K.element&&u(K.element.token,"element"),C.push.apply(C,W.tokens)}}}continue}z=[1,V,W,e(H)],z.push.apply(z,s(H,z,b.optimizeSize)||[]),z.push.apply(z,c(H.childs,y,b)||[]);break;case M:W&&2==W.length&&S(W,"element")&&(V=W[+!W.lastSearchIndex]);if(V&&($=h(V,y.dictURI).split(/[:@\{]/),"l10n"==$[0]&&3==$.length))if($[2]){if($=$.slice(1).join("@"),$=n.l10n.token($),Q=a($),y.l10nResolved=!0,Q&&"markup"==$.type){v[A--]=Z('<b:include src="#'+Q.templateId+'"/>')[0];continue}}else T(W,V),0==W.length&&(W=null),V=0,H.value=H.value.replace(/\}$/,"@undefined}");z=[3,V,W],W&&H.value=="{"+W.join("|")+"}"||z.push(H.value.replace(X,t));break;case _:if(b.optimizeSize&&!V&&!W)continue;z=[8,V,W],b.optimizeSize||W&&H.value=="{"+W.join("|")+"}"||z.push(H.value.replace(X,t))}for(;0===z[z.length-1];)z.pop();C.push(z)}return C.length?C:0}function h(e,t){if("string"!=typeof e)return e;var n=e.split(":");return 2==n.length&&"l10n"==n[0]&&-1==n[1].indexOf("@")&&(n[1]=n[1]+"@"+t),n.join(":")}function d(e,t,n,r){n||(n={}),r=r||0;for(var i;i=e[r];r++)if(i[D]!=O){var s=i[H];if(s)for(var o=s.length-1,a;a=s[o];o--)-1!=a.indexOf(":")?u(i,a):(n[a]&&u(n[a].token,a),i[P]==a&&(i[P]=o+1),n[a]={owner:e,token:i});switch(i[D]){case M:i[P]=h(i[P],t);break;case L:if(i[P])for(i=i[P][0],o=0;o<i.length;o++)i[o]=h(i[o],t);break;case k:d(i,t,n,U)}}return n}function v(e,t,n,r){var i=0;r=r||0;for(var s;s=e[r];r++)if(s[D]==k&&(i+=v(s,t,n,U)),s[D]==A||s[D]==L&&"class"==s[B]){var o=s[P],u=j-(s[D]==A);if(o){for(var a=(s[u]||"").trim().split(" "),f=0,l;l=o[f];f++)if(!(2<l.length)){var c=l[1].split(":").pop(),h=t.defines[c];h?(l.push.apply(l,h),h.used=!0,h[0]&&(1==h.length?x(a,l[0]+c):x(a,l[0]+h[1][h[0]-1]))):i++}s[u]=a.join(" "),n.optimizeSize&&!s[u]&&(s.length=u)}}return i}var g=/^[a-z_][a-z0-9_\-]*$/i,y=/(\S+)/g,b=/^([a-z_][a-z0-9_\-]*)?\{((anim:)?[a-z_][a-z0-9_\-]*)\}$/i,w=/\s*[^:]+?\s*:(?:\(.*?\)|".*?"|'.*?'|[^;]+?)+(?:;|$)/gi,C=/\s*([^:]+?)\s*:((?:\(.*?\)|".*?"|'.*?'|[^;]+?)+);?$/i,z=/\{([a-z_][a-z0-9_]*)\}/i,W=/\{([a-z_][a-z0-9_]*|l10n:[a-z_][a-z0-9_]*(?:\.[a-z_][a-z0-9_]*)*(?:\.\{[a-z_][a-z0-9_]*\})?)\}/i,X=/&([a-z]+|#[0-9]+|#x[0-9a-f]{1,4});?/gi,V=n.NODE_ENV?node_require("./template/htmlentity.json"):{},$=n.NODE_ENV?null:document.createElement("div"),J=[];return function(e,t,r,i){r=r||{};var s=[],u={sourceUrl:i,baseURI:t||"",tokens:null,resources:[],deps:[],defines:{},unpredictable:!0,warns:s};return u.dictURI=i?n.path.resolve(i):t||"",u.dictURI&&(t=n.path.extname(u.dictURI))&&".l10n"!=t&&(u.dictURI=u.dictURI.substr(0,u.dictURI.length-t.length)+".l10n"),e.templateTokens?e.warns&&s.push.apply(s,e.warns):e=Z(String(e)),u.tokens=c(e,u,r),u.tokens||(u.tokens=[[3,0,0,""]]),o(u.tokens[0],"element"),d(u.tokens,u.dictURI),u.unpredictable=!!v(u.tokens,u,r),delete u.defines,delete u.l10nResolved,s.length||(u.warns=!1),u}}(),rt={".css":!0},it=r(null,{className:e+".Template",__extend__:function(e){return e instanceof it?e:e instanceof st?new ot(e):new it(e)},source:"",baseURI:"",init:function(e){if(4096==N.length)throw 7;this.attaches_=[],this.setSource(e||""),this.templateId=N.push(this)-1},bindingBridge:{attach:function(e,t,n){for(var r=0,i;i=e.attaches_[r];r++)if(i.handler==t&&i.context==n)return;e.attaches_.push({handler:t,context:n})},detach:function(e,t,n){for(var r=0,i;i=e.attaches_[r];r++)if(i.handler==t&&i.context==n){e.attaches_.splice(r,1);break}},get:function(){}},createInstance:function(e,t,n,r,i){return d.call(this),this.createInstance(e,t,n,r,i)},clearInstance:function(e){},getBinding:function(e){return d.call(this),this.getBinding(e)},setSource:function(e){var t=this.source;if(t!=e){if("string"==typeof e){var r=e.match(/^([a-z]+):/);if(r){var i=r[1];e=e.substr(r[0].length);switch(i){case"file":e=n.resource(e);break;case"id":e=v(e);break;case"tokens":e=n.string.toObject(e),e.isDecl=!0;break;case"path":e=m(e)}}}if(t&&t.bindingBridge){if(r=t.url&&C[t.url])T(r,this),r.length||delete C[t.url];this.baseURI="",this.source.bindingBridge.detach(t,c,this)}e&&e.bindingBridge&&(e.url&&(this.baseURI=E.dirname(e.url)+"/",C[e.url]||(C[e.url]=[]),x(C[e.url],this)),e.bindingBridge.attach(e,c,this)),this.source=e,c.call(this)}},destroy:function(){this.destroyBuilder&&this.destroyBuilder(),this.source=this.resources=this.getBinding=this.createInstance=this.attaches_=null}}),st=function(e){n.object.extend(this,e)},ot=n.Class(null,{className:e+".TemplateSwitcher",ruleRet_:null,templates_:null,templateClass:it,ruleEvents:null,rule:String,init:function(e){this.ruleRet_=[],this.templates_=[],this.rule=e.rule;if((e=e.events)&&e.length){this.ruleEvents={};for(var t=0,n;n=e[t];t++)this.ruleEvents[n]=!0}w.add(this)},resolve:function(e){e=this.rule(e);var t=this.ruleRet_.indexOf(e);return-1==t&&(this.ruleRet_.push(e),t=this.templates_.push(new this.templateClass(e))-1),this.templates_[t]},destroy:function(){this.ruleRet_=this.templates_=this.rule=null}}),ut=r(null,{className:e+".Theme",get:m}),at=r(n.Token,{className:e+".SourceWrapper",path:"",url:"",baseURI:"",init:function(e,t){this.path=t,n.Token.prototype.init.call(this,"")},get:function(){return this.value&&this.value.bindingBridge?this.value.bindingBridge.get(this.value):this.value},set:function(){var e=y(ht,this.path);this.value!=e&&(this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,at.prototype.apply,this),this.url=(this.value=e)&&e.url||"",this.baseURI=("object"==typeof e||"function"==typeof e)&&"baseURI"in e?e.baseURI:E.dirname(this.url)+"/",this.value&&this.value.bindingBridge&&this.value.bindingBridge.attach(this.value,at.prototype.apply,this),this.apply())},destroy:function(){this.baseURI=this.url=null,this.value&&this.value.bindingBridge&&this.value.bindingBridge.detach(this.value,this.apply,this),n.Token.prototype.destroy.call(this)}}),ft={},lt={},ct=b(),ht="base",pt=[];w.add({destroy:function(){for(var e in lt)lt[e].destroy();lt=ft=null,e=0;for(var t;t=N[e];e++)t.destroy();N=null}}),t.exports={DECLARATION_VERSION:2,TYPE_ELEMENT:k,TYPE_ATTRIBUTE:L,TYPE_ATTRIBUTE_CLASS:A,TYPE_ATTRIBUTE_STYLE:5,TYPE_ATTRIBUTE_EVENT:O,TYPE_TEXT:M,TYPE_COMMENT:_,TOKEN_TYPE:D,TOKEN_BINDINGS:P,TOKEN_REFS:H,ATTR_NAME:B,ATTR_VALUE:j,ATTR_NAME_BY_TYPE:I,ELEMENT_NAME:3,ELEMENT_ATTRS:U,ELEMENT_CHILDS:5,TEXT_VALUE:3,COMMENT_VALUE:3,L10nProxyToken:tt,TemplateSwitchConfig:st,TemplateSwitcher:ot,Template:it,SourceWrapper:at,switcher:function(e,t){var r=n.array(arguments);return t=r.pop(),new st({rule:t,events:r.join(" ").trim().split(/\s+/)})},tokenize:Z,getDeclFromSource:p,makeDeclaration:nt,getL10nTemplate:a,Theme:ut,theme:b,getThemeList:function(){return n.object.keys(ft)},currentTheme:function(){return ft[ht].theme},setTheme:function(e){return b(e).apply()},onThemeChange:function(e,t,n){pt.push({fn:e,context:t}),n&&e.call(t,ht)},define:ct.define,get:m,getPathList:function(){return n.object.keys(lt)}}},"6.js":function(e,t,n,r,i,s,o,u){function a(e,t){return new Function(e,t)}n.require("./5.js");var f=n.template.TYPE_ELEMENT,l=n.template.TYPE_ATTRIBUTE,c=n.template.TYPE_TEXT,h=n.template.TYPE_COMMENT,p=n.template.TOKEN_TYPE,d=n.template.TOKEN_BINDINGS,v=n.template.TOKEN_REFS,m=n.template.ATTR_NAME,g=n.template.ATTR_NAME_BY_TYPE,y=n.template.ELEMENT_NAME,b=n.template.ELEMENT_ATTRS,w={},E=function(){function e(e,t){for(var n=0,r;r=e[n];n++)-1==r.indexOf(":")&&s.push(r+":"+t)}function t(e){var t=i.length,t=r[t]||"r"+t;return i.push(t+"="+e),t}function n(r,s,l){for(var w,E,S,T,N=0,k=0,L=0,A;A=r[N];N++,k++,T=!1){N?r[N+1]?(A[p]==r[N-1][p]&&A[p]==c&&L++,w=s+".childNodes["+(l?k:k+(L?" + "+L+" * TEXT_BUG":""))+"]"):w=s+".lastChild":w=s+".firstChild";if(E=A[v])T=!0,w=t(w),e(E,w);A[d]&&(A[d]&&"number"==typeof A[d]&&(A[d]=A[v][A[d]-1]),T||(T=!0,w=t(w)),o.push([A[p],w,A[d]]));if(A[p]==f){S=-1,s==a&&u.push(w+".basisTemplateId"),T||(w=t(w),S=i.length);for(var O=[],M=[],_=b,D;D=A[_];_++)D[p]==f||D[p]==c||D[p]==h?M.push(D):O.push(D);for(var _=0,P;P=O[_];_++)if(6!=P[p]){D=g[P[p]]||P[m];if(E=P[v])T=!0,e(E,t(w+'.getAttributeNode("'+D+'")'));if(E=P[d])switch(T=!0,D){case"class":P=0;for(var B;B=E[P];P++)B=[2,w,B[1],D,B[0]].concat(B.slice(2)),o.push(B);break;case"style":for(P=0;B=E[P];P++)for(var j=0,I;I=B[0][j];j++)o.push([2,w,I,D,B[0],B[1],B[2]]);break;default:for(P=0;I=E[0][P];P++)o.push([2,w,I,D,E[0],E[1],A[y]])}}M.length&&n(M,w,l),T||S!=i.length||i.pop()}}}var r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i,s,o,u,a;return function(e,t,r){return i=[],s=[],o=[],u=[],a=t||"_",n(e,a,r),{path:i,ref:s,binding:o,markedElementList:u}}}(),S=function(){function e(e,n,r){var i=[],s=e[5];e=e[4];for(var o,u,a=0;a<s.length;a++)if("string"==typeof s[a])i.push('"'+s[a].replace(/"/g,'\\"')+'"');else if(o=e[s[a]],u=o.indexOf(":"),-1==u)i.push("l10n"==n?'"{'+o+'}"':"bool"==n?"(__"+o+'||"")':"__"+o);else{var f=null,l=o.substr(u+1).replace(t,function(e,t){return f=t,""});f?i.push(r[o.substr(u+1)]):i.push('__l10n["'+l+'"]')}return 1==i.length&&i.push('""'),i.join("+")}var t=/\.\{([a-zA-Z_][a-zA-Z0-9_\-]*)\}/,r={disabled:"*",checked:["input"],value:["input","textarea"],minlength:["input"],maxlength:["input"],readonly:["input"],selected:["option"],multiple:["select"]},i={disabled:!0,checked:!0,selected:!0,readonly:!0,multiple:!0},s={1:"bind_element",3:"bind_textNode",8:"bind_comment"};return function(o){function u(e){S[e]=!0,h.push(p+"="+e+"("+n.array(arguments,1)+");")}for(var a={},h,p,d=[],v=[],g,y,b=[],w={},E=1,S={resolve:!0},T,N=0,C;C=o[N];N++){var k=C[0],L=C[1],A=C[2];if(-1==["set","templateId_"].indexOf(A)){var O=A.split(":");(T="anim"==O[0])&&(A=O[1]),h=a[A],p="_"+N,g="__"+A;if("l10n"==O[0]&&O[1]){var O=O[1],M=null,_=O.replace(t,function(e,t){return M=t,""});if(M){0==O in w&&(g="$l10n_"+E++,w[O]=g,b.push('set("'+g+'",'+g+")"),d.push(g+'=tools.l10nToken("'+_+'").computeToken()'),h=a[M],h||(h=a[M]=[],d.push("__"+M)),h.push(g+".set(__"+M+");")),A=w[O],p="_"+N,g="__"+A,h=a[A],h||(h=a[A]=[],d.push(g)),k==c?(d.push(p+"="+L),u(s[k],L,p,"value")):(g='"'+C[m]+'"',d.push(p),u("bind_attr",L,g,p,e(C,!1,w)));continue}y||(y={}),a[_]||(a[_]=[],y[_]=[]),h=a[_],h.l10n=!0;if(k==c){y[_].push(L+".nodeValue=value;"),h.push(L+'.nodeValue=__l10n["'+_+'"]'+(M?"[__"+M+"]":"")+";");continue}y[_].push("bind_attr("+[L,'"'+C[m]+'"',"NaN",e(C,"l10n",w)]+");")}h||(h=a[A]=[],d.push(g));if(k!=l)if(h.nodeBind)switch(k){case f:u(s[k],L,L,"value!==null?String(value):null");break;case c:h.push(L+".nodeValue=value;")}else d.push(p+"="+L),u(s[k],L,p,"value"),h.nodeBind=p;else switch(g=C[m],g){case"class":g="",O="value",k=C[4],O=C.length;if(6<=O)if(6==O||"string"==typeof C[6])6==O?(O='value?"'+A+'":""',C[5]&&(g=k+A)):(k="",O='value?"'+C[6]+'":""',C[5]&&(g=C[6]));else{if(!C[6].length)continue;7==O?(O=C[6].map(function(e){return'value=="'+e+'"'}).join("||")+'?value:""',C[5]&&(g=k+C[6][C[5]-1])):(k="",O=C[6].map(function(e,t){return'value=="'+e+'"?"'+this[t]+'"'},C[7]).join(":")+':""',C[5]&&(g=C[7][C[5]-1]))}else O='typeof value=="string"||typeof value=="number"?value:(value?"'+A+'":"")';d.push(p+'="'+g+'"'),u("bind_attrClass",L,p,O,'"'+k+'"',T);break;case"style":d.push(p+'=""'),u("bind_attrStyle",L,'"'+C[6]+'"',p,e(C,!1,w));break;default:T=r[g],d.push(p+"="+e(C,"l10n",w)),u("bind_attr",L,'"'+g+'"',p,T&&i[g]?e(C,"bool",w)+'?"'+g+'":""':e(C,!1,w)),!T||"*"!=T&&-1==T.indexOf(C[6].toLowerCase())||h.push("if("+L+"."+g+"!="+p+")"+L+"."+g+"="+(i[g]?"!!"+p:p)+";")}}}v.push(';function set(bindName,value){if(typeof bindName!="string")');for(A in a)a[A].nodeBind&&v.push("if(bindName==="+a[A].nodeBind+')bindName="'+A+'";else ');v.push("return;"),v.push("value=resolve.call(instance,bindName,value,Attaches);switch(bindName){");for(A in a)v.push('case"'+A+'":'+(a[A].l10n?a[A].join(""):"if(__"+A+"!==value){__"+A+"=value;"+a[A].join("")+"}")+"break;");v.push("}}"),o=[];for(var D in S)o.push(D+"=tools."+D);return{keys:n.object.keys(a).filter(function(e){return-1==e.indexOf("@")}),tools:o,vars:d,set:v.join(""),l10n:y,l10nCompute:b}}}();t.exports={getFunctions:function(e,t,r,i,s){if(t=w[r&&n.path.relative(r)])return t;e=E(e,"_",s),s=S(e.binding),t=e.markedElementList.join("="),r={keys:s.keys,l10nKeys:n.object.keys(s.l10n)};if(s.l10n){i=[];for(var o in s.l10n)i.push('case"'+o+'":if(value==null)value="{'+o+'}";__l10n[token]=value;'+s.l10n[o].join("")+"break;");r.createL10nSync=a(["_","__l10n","bind_attr","TEXT_BUG"],"var "+e.path+";return function(token, value){switch(token){"+i.join("")+"}}")}return r.createInstance=a("tid map build tools __l10n TEXT_BUG".split(" "),"var getBindings=tools.createBindingFunction(["+s.keys.map(function(e){return'"'+e+'"'})+"]),"+(s.tools.length?s.tools+",":"")+"Attaches=function(){};Attaches.prototype={"+s.keys.map(function(e){return e+":null"})+"};return function createInstance_(id,obj,onAction,onRebuild,bindings,bindingInterface){var _=build(),"+e.path.concat(s.vars)+",instance={context:obj,action:onAction,rebuild:onRebuild,handler:null,bindings:bindings,bindingInterface:bindingInterface,attaches:null,tmpl:{"+[e.ref,"templateId_:id","set:set"]+"}}"+(t?";if(obj||onAction)"+t+"=(id<<12)|tid":"")+s.set+";instance.handler=bindings?getBindings(bindings,obj,set,bindingInterface):null;"+s.l10nCompute+";return instance}"),r}}}};(function(r){function i(e,t){for(var n in t)e[n]=t[n];return e}function s(e,t){for(var n in t)0==n in e&&(e[n]=t[n]);return e}function o(e){var t=[],n;for(n in e)t.push(n);return t}function u(e,t){var n={};if(!t)return i(n,e);for(var r=0,s;s=t[r++];)s in e&&(n[s]=e[s]);return n}function a(){return g(arguments).reduce(i,{})}function f(e,t,n){var r=[],i;for(i in e)r.push(t.call(n,i,e[i]));return r}function l(e){return e}function c(){}function h(e){var t=H[e.url];if(t)for(var n=0;n<t.length;n++)t[n](e.get(),e.url)}function p(e,t,n){try{return new Function(t,n)}catch(r){x.error("Compilation error at "+e+("line"in r?":"+(r.line-1):"")+": "+r)}}function d(e){var t=e.split(".")[0],n=e.replace(/\./g,"/")+".js";return 0==e in q&&(0==t in U&&(U[t]=k.baseURI),t==e&&(R[U[t]+n]=t),q[e]=U[t]+n),q[e]}function v(e){e=e.split(".");var n;n=e[0];var i=I[n];i||(i=I[n]=new z(n),i.namespaces_={},i.namespaces_[n]=i,L.noConflict||(r[n]=i)),"templates"!=n||t||(t=I[n]);for(var i=n=i,s=1,o;o=e[s];s++){if(!i[o]){var u=e.slice(0,s+1).join(".");i[o]=new z(u),n.namespaces_[u]=i[o]}i=i[o]}return I[e.join(".")]=i}function m(e,t){if(L.extProto)for(var n in t)e.prototype[n]=function(e,n){return function(){var n=[this];return Array.prototype.push.apply(n,arguments),t[e].apply(t,n)}}(n,e.name||e.toString().match(/^\s*function\s*(\w*)\s*\(/)[1])}function g(e,t){if(null!=e){var n=e.length;if("undefined"==typeof n||"[object Function]"==w.call(e))return[e];t||(t=0);if(0<n-t){for(var r=[],i=0,s=t;s<n;)r[i++]=e[s++];return r}}return[]}function y(e,t,n){for(var r=[],i="function"==typeof t,s=0;s<e;s++)r[s]=i?t.call(n,s,r):t;return r}var b=r.document,w=Object.prototype.toString,E=function(){function e(e){if(n.test(e)){var t=e.split("."),r=t[0],i=t[1],s=t[2];switch(t.length){case 1:e=function(e){return null!=e?e[r]:e};break;case 2:e=function(e){return null!=e?e[r][i]:e};break;case 3:e=function(e){return null!=e?e[r][i][s]:e};break;default:e=function(e){if(null!=e){e=e[r][i][s];for(var n=3,o;o=t[n];n++)e=e[o]}return e}}return e}return new Function("object","return object != null ? object."+e+" : object")}var t=1,n=/^[a-z$_][a-z$_0-9]*(\.[a-z$_][a-z$_0-9]*)*$/i,r=[],i={},s={};return function(n,o){var u,a,f;if(!n||n===S)return S;"function"==typeof n?(f=n.basisGetterId_)?u=r[Math.abs(f)-1]:(u=function(e){return n(e)},u.base=n,u.__extend__=E,f=r.push(u),n.basisGetterId_=-f,u.basisGetterId_=f):(u=i[n])?f=u.basisGetterId_:(u=e(n),u.base=n,u.__extend__=E,f=r.push(u),u.basisGetterId_=f,i[n]=u),a=null!=o&&typeof o;if(!a)return u;var l=s[f],c;if("string"==a)c=a+o;else if("function"==a)c=o.basisModId_;else if("object"!=a)return u;if(c&&l&&l[c])return l[c];"function"==typeof u.base&&(u=u.base);switch(a){case"string":a=function(e){return K.format(o,u(e))};break;case"function":c||(c=a+t++,o.basisModId_=c),a=function(e){return o(u(e))};break;default:a=function(e){return o[u(e)]}}return a.base=u.base||u,a.__extend__=E,c&&(l||(l={},s[f]=l),l[c]=a,a.mod=o,a.basisGetterId_=r.push(a)),a}}(),S=i(function(){},{__extend__:E}),x=function(){var e={log:c,info:c,warn:c,error:c};return"undefined"!=typeof console&&f(e,function(t){e[t]="bind"in Function.prototype&&"function"==typeof console[t]?Function.prototype.bind.call(console[t],console):function(){Function.prototype.apply.call(console[t],console,arguments)}}),e}(),T=r.setImmediate||r.msSetImmediate,N=r.clearImmediate||r.msSetImmediate;T&&(T=T.bind(r)),N&&(N=N.bind(r)),T||function(){var e=function(){var e={},n=1;return T=function(){return e[++n]={fn:arguments[0],args:g(arguments,1)},t(n),n},N=function(t){delete e[t]},function(t){var n=e[t];if(n)try{"function"==typeof n.fn?n.fn.apply(void 0,n.args):(r.execScript||function(e){r.eval.call(r,e)})(String(n.fn))}finally{delete e[t]}}}(),t=function(t){setTimeout(function(){e(t)},0)};if(r.process&&"function"==typeof process.nextTick)t=function(t){process.nextTick(function(){e(t)})};else if(r.MessageChannel)t=function(t){var n=new r.MessageChannel;n.port1.onmessage=function(){e(t)},n.port2.postMessage("")};else{var n=r.postMessage&&!r.importScripts;if(n){var i=r.onmessage;r.onmessage=function(){n=!1},r.postMessage("","*"),r.onmessage=i}if(n)i=function(t){t&&t.source==r&&(t=String(t.data).split("basisjs.setImmediate")[1])&&e(t)},r.addEventListener?r.addEventListener("message",i,!0):r.attachEvent("onmessage",i),t=function(e){r.postMessage("basisjs.setImmediate"+e,"*")};else if(b&&"onreadystatechange"in b.createElement("script"))var s=t,t=function o(n){"undefined"!=typeof et&&(t=s,et.head.ready(function(){t=function(t){var n=b.createElement("script");n.onreadystatechange=function(){e(t),n.onreadystatechange=null,et.remove(n),n=null},et.head.add(n)}})),t===o?s(n):t(n)}}}();var C="object"==typeof process&&"[object process]"==w.call(process),k=function(){var e=/^([^\/]+:|\/)/,t=/^[a-zA-Z0-9\-]+:\/?/,n=/^(?:[a-zA-Z0-9\-]+:)?\/\/[^\/]+\/?/,r=/[\?#].*$/,i={},s="",o;return C?(s=require("path").resolve(".").replace(/\\/g,"/"),o=s.replace(/^[^\/]*/,""),s=s.replace(/\/.*/,"")):(o=location.pathname.replace(/[^\/]+$/,""),s=location.protocol+"//"+location.host),i={baseURI:o,origin:s,normalize:function(e){e=(e||"").replace(t,"/").replace(n,"/").replace(r,"");for(var i=[],s=e.split("/"),o=0;o<s.length;o++)".."==s[o]?(1<i.length||i[0])&&i.pop():!s[o]&&o||"."==s[o]||i.push(s[o]);return i.join("/")||("/"===e[0]?"/":"")},dirname:function(e){return e=i.normalize(e),e.replace(/\/([^\/]*)$|^[^\/]+$/,"")||("/"==e[0]?"/":".")},extname:function(e){return(e=i.normalize(e).match(/[^\/](\.[^\/\.]*)$/))?e[1]:""},basename:function(e,t){var n=i.normalize(e).match(/[^\\\/]*$/),n=n?n[0]:"";return t==i.extname(n)&&(n=n.substring(0,n.length-t.length)),n},resolve:function(t,n){for(var r=g(arguments).reverse(),s=[],u=!1,a=0;!u&&a<r.length;a++)"string"==typeof r[a]&&(s.unshift(r[a]),u=e.test(r[a]));return u||s.unshift("/"==o?"":o),i.normalize(s.join("/"))},relative:function(e,t){"string"!=typeof t&&(t=e,e=o),e=i.normalize(e),t=i.normalize(t);if("/"==e[0]&&"/"!=t[0])return e;if("/"==t[0]&&"/"!=e[0])return t;for(var n=e.replace(/^\/$/,"").split(/\//),r=t.replace(/^\/$/,"").split(/\//),s=[],u=0;r[u]==n[u]&&"string"==typeof n[u];)u++;for(n=n.length-u;0<n;n--)s.push("..");return s.concat(r.slice(u).filter(Boolean)).join("/")}}}(),L={path:{basis:""},noConflict:!0,autoload:"./0.js"},A=function(){function e(e){return"function"==typeof e&&!!e.basisClassId_}function t(e){for(var t=this;t&&t!==e;)t=t.superClass_;return t===e}function n(a,l){var c=o++;"function"!=typeof a&&(a=f);var h=function(){};h.prototype=a.prototype;for(var h=new h,c={basisClassId_:c,superClass_:a,extendConstructor_:!!a.extendConstructor_,isSubclassOf:t,subclass:function(){return n.apply(null,[v].concat(g(arguments)))},extend:r,__extend__:function(t){return t&&t!==u&&("object"==typeof t||"function"==typeof t&&!e(t))?f.create.call(null,v,t):t},prototype:h},p=1,d;d=arguments[p];p++)c.extend(d);var v=c.extendConstructor_?function(e){this.basisObjectId=s.id++;var t,n;for(n in e)t=this[n],this[n]=t&&t.__extend__?t.__extend__(e[n]):e[n];this.init(),this.postInit()}:function(){this.basisObjectId=s.id++,this.init.apply(this,arguments),this.postInit()};h.constructor=v;for(var m in h)h[m]===u&&(h[m]=v);return i(v,c),v}function r(t){var n=this.prototype;"function"!=typeof t||e(t)||(t=t(this.superClass_.prototype)),t.prototype&&(t=t.prototype);for(var r in t){var i=t[r],s=n[r];"className"==r||"extendConstructor_"==r?this[r]=i:n[r]=s&&s.__extend__?s.__extend__(i):i}return a&&t[r="toString"]!==w&&(n[r]=t[r]),this}var s={id:1},o=1,u={},a=function(){for(var e in{toString:1})return!1;return!0}(),f=i(n,{className:"basis.Class",extendConstructor_:!1,prototype:{basisObjectId:0,constructor:null,init:function(){},postInit:function(){},destroy:function(){for(var e in this)hasOwnProperty.call(this,e)&&(this[e]=null);this.destroy=c}}}),l=function(e,t,n){return{__extend__:function(e){if(!e||e&&e.__extend__)return e;var n=function(){};return n.prototype=this,n=new n,t(n,e),n}}.__extend__(e||{})},h=function(e){return l(e,i,"extensibleProperty")};return i(f,{SELF:u,create:n,isClass:e,customExtendProperty:l,extensibleProperty:h,nestedExtendProperty:function(e){return l(e,function(e,t){for(var n in t){var r=e[n];e[n]=r&&r.__extend__?r.__extend__(t[n]):h(t[n])}},"nestedExtendProperty")},oneFunctionProperty:function(e,t){var n=function(t){var r={__extend__:n};if(t){if(t.__extend__)return t;for(var i in t)t[i]&&(r[i]=e)}return r};return n(t||{})}})}(),O=A(null,{className:"basis.Token",value:null,handler:null,deferredToken:null,bindingBridge:{attach:function(e,t,n){e.attach(t,n)},detach:function(e,t,n){e.detach(t,n)},get:function(e){return e.get()}},init:function(e){this.value=e},get:function(){return this.value},set:function(e){this.value!==e&&(this.value=e,this.apply())},attach:function(e,t){this.handler={fn:e,context:t,handler:this.handler}},detach:function(e,t){for(var n=this,r;r=n,n=n.handler;)if(n.fn===e&&n.context===t){n.fn=c,r.handler=n.handler;break}},apply:function(){for(var e=this.get(),t=this;t=t.handler;)t.fn.call(t.context,e)},deferred:function(){var e=this.deferredToken;return e||(e=this.deferredToken=new _(this.value),this.attach(e.set,e)),e},destroy:function(){this.deferredToken&&(this.deferredToken.destroy(),this.deferredToken=null),this.value=this.handler=null,this.detach=this.attach=c}}),M=function(){function e(){var e=t;t={},n=null;for(var r in e)e[r].apply()}var t={},n;return function(r){r.basisObjectId in t||(t[r.basisObjectId]=r,n||T(e))}}(),_=O.subclass({className:"basis.DeferredToken",set:function(e){this.value!==e&&(this.value=e,M(this))},deferred:function(){return this}}),D={},P={},H={};(function(){var e="undefined"!=typeof n?n:null;if(e){for(var t in e)P[k.resolve(t)]=e[t];n=null}})();var B=function(e,t){if(t||!P.hasOwnProperty(e)){var n="";if(C)try{n=require("fs").readFileSync(e,"utf-8")}catch(r){}else{var i=new XMLHttpRequest;i.open("GET",e,!1),i.setRequestHeader("If-Modified-Since",(new Date(0)).toGMTString()),i.setRequestHeader("X-Basis-Resource",1),i.send(""),200<=i.status&&400>i.status&&(n=i.responseText)}P[e]=n}return P[e]},j=function(e){e=k.resolve(e);if(!D[e]){var t=j.extensions[k.extname(e)],n=!1,r=!1,s,o=function(){if(n)return s;var i=B(e);return t?r||(r=!0,s=t(i,e)):s=i,n=!0,h(o),o.apply(),s};i(o,i(new O,{url:e,fetch:function(){return o()},toString:function(){return"[basis.resource "+e+"]"},isResolved:function(){return n},update:function(i){i=String(i),n&&i==P[e]||(P[e]=i,t?r&&!t.permanent&&(s=t(i,e),h(o),o.apply()):(s=i,n=!0,h(o),o.apply()))},reload:function(){var t=P[e],r=B(e,!0);r!=t&&(n=!1,o.update(r))},get:function(t){return t?B(e):o()},ready:function(e,r){if(n&&(e.call(r,o()),t&&t.permanent))return;return o.attach(e,r),o}})),D[e]=o}return D[e]};i(j,{isResource:function(e){return e?D[e.url]===e:!1},isResolved:function(e){return(e=j.get(e))?e.isResolved():!1},exists:function(e){return D.hasOwnProperty(k.resolve(e))},get:function(e){return e=k.resolve(e),j.exists(e)?j(e):null},getFiles:function(e){return o(e?P:D).map(k.relative)},extensions:{".js":i(function(e,t){var n=R[t];if(!n){var r=!0,n=k.dirname(t)+"/"+k.basename(t,k.extname(t)),i;for(i in L.path){var o=L.path[i]+i+"/";if(t.substr(0,o.length)==o){r=!1,n=n.substr(L.path[i].length);break}}n=n.replace(/\./g,"_").replace(/^\//g,"").replace(/\//g,"."),r&&(n="implicit."+n)}return I[n]||(i=v(n),i.exports=F({path:i.path,exports:i.exports},t,e).exports,i.exports&&i.exports.constructor===Object&&s(i,i.exports)),I[n].exports},{permanent:!0}),".css":function(e,t){var n=nt.resources[t];return n?n.updateCssText(e):n=new nt(t),n},".json":function(e,t){if("object"==typeof e)return e;var n;try{e=String(e),n=rt.json.parse(e)}catch(r){}return n||null}}});var F=function(e,t,n){var i=k.dirname(t)+"/",s=n;return e.exports||(e.exports={}),"function"!=typeof s&&(s=p(t,"exports module basis global __filename __dirname resource require".split(" "),"\n"+n)),"function"==typeof s&&s.call(e.exports,e.exports,e,rt,r,t,i,function(e){return j(k.resolve(i,e))},function(e,t){return W(e,t||i)}),e},I={},q={},R={},U=u(L.path);(function(t){if(t="undefined"!=typeof e?e:null)for(var n in t){var r=k.resolve(n),i=t[n];R[r]=i,q[i]=r}})();var z=A(null,{className:"basis.Namespace",init:function(e){this.name=e,this.exports={path:this.name}},toString:function(){return"[basis.namespace "+this.path+"]"},extend:function(e){return i(this.exports,e),s(this,e)}}),W=function(){if(C){var e=module.constructor.prototype;return function(t,n){if(/[^a-z0-9_\.]/i.test(t)&&".js"!=k.extname(t))return t=k.resolve(n,t),require(t);var r=e._compile,o=v(t);e._compile=function(e,t){this.basis=rt,e='var node_require = require;\nvar basis = module.basis;\nvar resource = function(filename){ return basis.resource(__dirname + "/" + filename) };\nvar require = function(filename, baseURI){ return basis.require(filename, baseURI || __dirname) };\n'+e,r.call(i(this,o),e,t)};var u=require(__dirname+"/"+t.replace(/\./g,"/"));return(o.exports=u)&&u.constructor===Object&&s(o,u),e._compile=r,u}}return function(e,t){return e=/[^a-z0-9_\.]/i.test(e)||".js"==k.extname(e)?k.resolve(t,e):d(e),j(e).fetch()}}();s(Function.prototype,{bind:function(e){var t=this,n=g(arguments,1);return n.length?function(){return t.apply(e,n.concat.apply(n,arguments))}:function(){return t.apply(e,arguments)}}}),s(Array,{isArray:function(e){return"[object Array]"===w.call(e)}}),s(Array.prototype,{indexOf:function(e,t){t=parseInt(t,10)||0;if(0>t)return-1;for(;t<this.length;t++)if(this[t]===e)return t;return-1},lastIndexOf:function(e,t){var n=this.length;t=parseInt(t,10);for(t=isNaN(t)||t>=n?n-1:(t+n)%n;0<=t;t--)if(this[t]===e)return t;return-1},forEach:function(e,t){for(var n=0,r=this.length;n<r;n++)n in this&&e.call(t,this[n],n,this)},every:function(e,t){for(var n=0,r=this.length;n<r;n++)if(n in this&&!e.call(t,this[n],n,this))return!1;return!0},some:function(e,t){for(var n=0,r=this.length;n<r;n++)if(n in this&&e.call(t,this[n],n,this))return!0;return!1},filter:function(e,t){for(var n=[],r=0,i=this.length;r<i;r++)r in this&&e.call(t,this[r],r,this)&&n.push(this[r]);return n},map:function(e,t){for(var n=[],r=0,i=this.length;r<i;r++)r in this&&(n[r]=e.call(t,this[r],r,this));return n},reduce:function(e,t){var n=this.length,r=arguments.length;if(0==n&&1==r)throw 1;var i,s=0;1<r&&(i=t,s=1);for(r=0;r<n;r++)r in this&&(i=s++?e.call(null,i,this[r],r,this):this[r]);return i}});var X={flatten:function(e){return e.concat.apply([],e)},repeat:function(e,t){return X.flatten(y(parseInt(t,10)||0,e))},search:function(e,t,n,r){e.lastSearchIndex=-1,n=E(n||l),r=parseInt(r,10)||0;for(var i=e.length;r<i;r++)if(n(e[r])===t)return e[e.lastSearchIndex=r]},lastSearch:function(e,t,n,r){e.lastSearchIndex=-1,n=E(n||l);var i=e.length;r=isNaN(r)||null==r?i:parseInt(r,10);for(i=r>i?i:r;0<i--;)if(n(e[i])===t)return e[e.lastSearchIndex=i]},add:function(e,t){return-1==e.indexOf(t)&&!!e.push(t)},remove:function(e,t){var n=e.indexOf(t);return-1!=n&&!!e.splice(n,1)},has:function(e,t){return-1!=e.indexOf(t)},sortAsObject:function(e,t,n,r){return t=E(t),r=r?-1:1,e.map(function(e,n){return{i:n,v:t(e)}}).sort(n||function(e,t){return r*(e.v>t.v||-(e.v<t.v)||(e.i>t.i?1:-1))}).map(function(t){return e[t.i]},e)}};m(Array,X);if(![1,2].splice(1).length){var V=Array.prototype.splice;Array.prototype.splice=function(){var e=g(arguments);return 2>e.length&&(e[1]=this.length),V.apply(this,e)}}var $=/([\/\\\(\)\[\]\?\{\}\|\*\+\-\.\^\$])/g,J=/\{([a-z\d_]+)(?::([\.0])(\d+)|:(\?))?\}/gi;s(String,{toLowerCase:function(e){return String(e).toLowerCase()},toUpperCase:function(e){return String(e).toUpperCase()},trim:function(e){return String(e).trim()},trimLeft:function(e){return String(e).trimLeft()},trimRight:function(e){return String(e).trimRight()}}),s(String.prototype,{trimLeft:function(){return this.replace(/^\s+/,"")},trimRight:function(){return this.replace(/\s+$/,"")},trim:function(){return this.trimLeft().trimRight()}});var K={toObject:function(e,t){try{return(new Function("return 0,"+e))()}catch(n){if(t)throw 2}},repeat:function(e,t){return Array(parseInt(t,10)+1||0).join(e)},qw:function(e){return(e=e.trim())?e.split(/\s+/):[]},forRegExp:function(e){return e.replace($,"\\$1")},format:function(e,t){var n=g(arguments,1);return"object"==typeof t&&i(n,t),e.replace(J,function(e,t,r,i,s){return e=t in n?n[t]:s?"":e,r&&!isNaN(e)?(e=Number(e),"."==r?e.toFixed(i):Y.lead(e,i)):e})},capitalize:function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()},camelize:function(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})},dasherize:function(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})}};m(String,K);if(11!="|||".split(/\|/).length+"|||".split(/(\|)/).length){var Q=String.prototype.split;String.prototype.split=function(e,t){if(!e||0==e instanceof RegExp||""==e.source)return Q.apply(this,arguments);var n=[],r=0,i;for(e.global||(e=RegExp(e.source,/\/([mi]*)$/.exec(e)[1]+"g"));i=e.exec(this);)i[0]=this.substring(r,i.index),n.push.apply(n,i),r=e.lastIndex;return n.push(this.substr(r)),n}}if("2"!="12".substr(-1)){var G=String.prototype.substr;String.prototype.substr=function(e,t){return G.call(this,0>e?Math.max(0,this.length+e):e,t)}}var Y={fit:function(e,t,n){return!isNaN(t)&&e<t?Number(t):!isNaN(n)&&e>n?Number(n):e},lead:function(e,t,n){return String(e).replace(/\d+/,function(e){return 1<(t-=e.length-1)?Array(t).join(n||0)+e:e})},group:function(e,t,n){return String(e).replace(/\d+/,function(e){return e.replace(/\d/g,function(r,i){return!i+(e.length-i)%(t||3)?r:(n||" ")+r})})},format:function(e,t,n,r,i,s){e=e.toFixed(t);if(n||s)e=e.replace(/(\d+)(\.?)/,function(e,t,r){return(n?rt.number.group(Number(t),3,n):t)+(r?s||r:"")});return r&&(e=e.replace(/^-?/,"$&"+(r||""))),e+(i||"")}};m(Number,Y),s(Date,{now:function(){return Number(new Date)}});var Z=function(){function e(){if("complete"==b.readyState&&b.body&&!(n++))for(;i;)i.callback.call(i.context),i=i.next}function t(){try{b.documentElement.doScroll("left"),e()}catch(n){setTimeout(t,1)}}var n=!b||"complete"==b.readyState&&!!b.body,i;if(!n)if(b.addEventListener)b.addEventListener("DOMContentLoaded",e,!1),r.addEventListener("load",e,!1);else{b.attachEvent("onreadystatechange",e),r.attachEvent("onload",e);try{!r.frameElement&&b.documentElement.doScroll&&t()}catch(s){}}return function(e,t){n?e.call(t):i={callback:e,context:t,next:i}}}(),et=function(){function e(e){if(b&&!s[e]&&(s[e]=b[e]||b.getElementsByTagName(e)[0],s[e])){var t=o[e];delete o[e];for(var n=0,r;r=t[n];n++)r[0].call(r[1],s[e])}return s[e]}function t(){var r=this[0],i=this[1],s=this[2];n(i);var u=e(r);u?(!0===s&&(s=u.firstChild),s&&s.parentNode===u||(s=null),u.insertBefore(i,s)):o[r].push([t,[r,i,s]])}function n(e){for(var t in o){var n=X.search(o[t],e,function(e){return e[1]&&e[1][1]});n&&X.remove(o[t],n)}e&&e.parentNode&&1==e.parentNode.nodeType&&e.parentNode.removeChild(e)}function r(){i&&e("head")&&e("body")&&(i=clearInterval(i))}var i,s={},o={head:[],body:[]};return!b||e("head")&&e("body")||(i=setInterval(r,5),Z(r)),{head:{ready:function(e,t){o.head?o.head.push([e,t]):e.call(t,s.head)},add:function(e,n){t.call(["head",e,n])}},body:{ready:function(e,t){o.body?o.body.push([e,t]):e.call(t,s.body)},add:function(e,n){t.call(["body",e,n])}},remove:n}}(),tt=function(){function e(e){n.globalDestroy=!0,n.add=c;for(n.remove=c;e=t.pop();)if("function"==typeof e.destroy)try{e.destroy()}catch(r){}else for(var i in e)e[i]=null;t.length=0}var t=[];if("attachEvent"in r)r.attachEvent("onunload",e);else{if(!("addEventListener"in r))return{add:c,remove:c};r.addEventListener("unload",e,!1)}var n={add:function(e){null!=e&&t.push(e)},remove:function(e){X.remove(t,e)}};return n}(),nt=function(){function e(e){u.setAttribute("href",e),et.head.add(u,!0)}function t(){u.setAttribute("href",location.href),et.remove(u)}function n(){e(this.baseURI),this.element||(this.element=b.createElement("style"),s||(this.textNode=this.element.appendChild(b.createTextNode("")))),et.head.add(this.element),this.syncCssText(),t()}var r={},i=!0,s;try{s=!b.createElement("style").appendChild(b.createTextNode(""))}catch(o){s=!0}tt.add({destroy:function(){i=!1;for(var e in r)r[e].destroy();r=null}});var u=b&&b.createElement("base"),a=A(null,{className:"basis.CssResource",inUse:0,url:"",baseURI:"",cssText:"",resource:null,element:null,textNode:null,init:function(e){this.url=k.resolve(e),this.baseURI=k.dirname(e)+"/",r[e]=this},updateCssText:function(n){this.cssText!=n&&(this.cssText=n,this.inUse&&this.element&&(e(this.baseURI),this.syncCssText(),t()))},syncCssText:function(){this.textNode?this.textNode.nodeValue=this.cssText:this.element.styleSheet.cssText=this.cssText},startUse:function(){if(!this.inUse){if(!this.resource){var e=j(this.url);this.resource=e,this.cssText=e.get(!0)}et.head.ready(n,this)}this.inUse+=1},stopUse:function(){this.inUse&&(this.inUse-=1,!this.inUse&&this.element&&et.remove(this.element))},destroy:function(){this.element&&i&&et.remove(this.element),this.cssText=this.resource=this.textNode=this.element=null}});return a.resources=r,a}(),rt=v("basis").extend({version:"1.2.1",NODE_ENV:C,config:L,platformFeature:{},resolveNSFilename:d,patch:function(e,t){e=/[^a-z0-9_\.]/i.test(e)||".js"==k.extname(e)?k.resolve(e):d(e),H[e]?H[e].push(t):H[e]=[t];var n=j.get(e);n&&n.isResolved()&&t(n.get(),n.url)},namespace:v,require:W,resource:j,asset:function(e){return e},setImmediate:T,clearImmediate:N,nextTick:function(){T.apply(null,arguments)},Class:A,Token:O,DeferredToken:_,getter:E,ready:Z,cleaner:tt,console:x,path:k,doc:et,object:{extend:i,complete:s,keys:o,values:function(e){var t=[],n;for(n in e)t.push(e[n]);return t},slice:u,splice:function(e,t){var n={};if(!t)return i(n,e);for(var r=0,s;s=t[r++];)s in e&&(n[s]=e[s],delete e[s]);return n},merge:a,iterate:f},fn:{$undefined:function(e){return void 0==e},$defined:function(e){return void 0!=e},$isNull:function(e){return null==e||void 0==e},$isNotNull:function(e){return null!=e&&void 0!=e},$isSame:function(e){return e===this},$isNotSame:function(e){return e!==this},$self:l,$const:function(e){return function(){return e}},$false:function(){return!1},$true:function(){return!0},$null:function(){return null},$undef:c,getter:E,nullGetter:S,wrapper:function(e){return function(t){var n={};return n[e]=t,n}},lazyInit:function(e,t){var n=0,r,i;return r=function(){return n++||(r.inited=!0,r.data=i=e.apply(t||this,arguments)),i}},lazyInitAndRun:function(e,t,n){var r=0,i,s;return i=function(){return r++||(i.inited=!0,i.data=s=e.call(n||this)),t.apply(s,arguments),s}},runOnce:function(e,t){var n=0;return function(){if(!(n++))return e.apply(t||this,arguments)}}},array:i(g,a(X,{from:g,create:y})),string:a(K,{isEmpty:function(e){return null==e||""==String(e)},isNotEmpty:function(e){return null!=e&&""!=String(e)}}),number:Y,bool:{invert:function(e){return!e}},json:{parse:"undefined"!=typeof JSON?JSON.parse:function(e){return K.toObject(e,!0)}}});v("basis.dev").extend(x),L.autoload&&W(L.autoload)})(this)}).call(this);