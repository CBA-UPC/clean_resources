/** **********************************************************************
 * Copyright 2020 Adobe
*  All Rights Reserved.
*  NOTICE: Adobe permits you to use, modify, and distribute this file in
*  accordance with the terms of the Adobe license agreement accompanying
*  it.
**************************************************************************
*/
!function(){ar t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequireb775;null==r&&((r=.register=t.parcelRequireb775=r),r.register("dlagQ",(),r.register("67pXD",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=)),r.register("fTTag",(),r.register("hPgmf",(),r.register("i13wC",(),r.register("c0Wyi",(),r.register("fCWBB",();var o={};Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var i={};function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=var c=r("dlagQ"),s={};Object.defineProperty(s,"__esModule",{value:!0}),s.default=var u,d=(u=r("dlagQ"))&&u.__esModule?u:{default:u};var p={};Object.defineProperty(p,"__esModule",{value:!0}),p.default=var m=r("67pXD"));var f={};Object.defineProperty(f,"__esModule",{value:!0}),f.default=var h=b(r("fTTag")),v=b(r("i13wC")),y=b(r("c0Wyi")),g=b(r("fCWBB"));ar E=Object.keys;function _(e){return"string"==typeof e}function T(e){return"number"==typeof e}function C(e){return"object"==typeof e?null!==e:w(e)}unction I(e,t){if(e){var n=!0,a=!1,r=void 0;try{for(var o,i=E(e)[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value;t(e[l],l)}}catch(e){a=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}}}ar x={animationIterationCount:0,borderImageOutset:0,borderImageSlice:0,borderImageWidth:0,boxFlex:0,boxFlexGroup:0,boxOrdinalGroup:0,columnCount:0,columns:0,flex:0,flexGrow:0,flexPositive:0,flexShrink:0,flexNegative:0,flexOrder:0,gridArea:0,gridRow:0,gridRowEnd:0,gridRowSpan:0,gridRowStart:0,gridColumn:0,gridColumnEnd:0,gridColumnSpan:0,gridColumnStart:0,fontWeight:0,lineClamp:0,lineHeight:0,opacity:0,order:0,orphans:0,tabSize:0,widows:0,zIndex:0,zoom:0,fillOpacity:0,floodOpacity:0,stopOpacity:0,strokeDasharray:0,strokeDashoffset:0,strokeMiterlimit:0,strokeOpacity:0,strokeWidth:0};var D=["Webkit","ms","Moz","O"];E(x).forEach(();var S,M=Symbol.for("jsx-dom:type");(S||(S={})).ShadowRoot="ShadowRoot";function k(e){return!(t=e,"boolean"==typeof t||null==e);var t}ar A={animate:0,circle:0,clipPath:0,defs:0,desc:0,ellipse:0,feBlend:0,feColorMatrix:0,feComponentTransfer:0,feComposite:0,feConvolveMatrix:0,feDiffuseLighting:0,feDisplacementMap:0,feDistantLight:0,feFlood:0,feFuncA:0,feFuncB:0,feFuncG:0,feFuncR:0,feGaussianBlur:0,feImage:0,feMerge:0,feMergeNode:0,feMorphology:0,feOffset:0,fePointLight:0,feSpecularLighting:0,feSpotLight:0,feTile:0,feTurbulence:0,filter:0,foreignObject:0,g:0,image:0,line:0,linearGradient:0,marker:0,mask:0,metadata:0,path:0,pattern:0,polygon:0,polyline:0,radialGradient:0,rect:0,stop:0,svg:0,switch:0,symbol:0,text:0,textPath:0,tspan:0,use:0,view:0},F=/^(a(ll|t|u)|base[FP]|c(al|lipPathU|on)|di|ed|ex|filter[RU]|g(lyphR|r)|ke|l(en|im)|ma(rker[HUW]|s)|n|pat|pr|point[^e]|re[^n]|s[puy]|st[^or]|ta|textL|vi|xC|y|z)/;var L=function(){"use strict";function t(n){e(o)(this,t),this.props=n}return e(i)(t,[{key:"render",value:]),t}();function P(t,n){var a,r,o=n.children,i=e(p)(n,["children"]);if(i.namespaceURI||0!==A[t]||(i=e(s)({},i,{namespaceURI:"http://www.w3.org/2000/svg"})),_(t)){if(function(e,t){var n=!0,a=!1,r=void 0;try{for(var o,i=E(e)[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var l=o.value;Y(l,e[l],t)}}catch(e){a=!0,r=e}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}}(i,a=i.namespaceURI?document.createElementNS(i.namespaceURI,t):document.createElement(t)),B(o,a),a instanceof window.HTMLSelectElement&&null!=i.value)if(!0===i.multiple&&Array.isArray(i.value)){var l=i.value.map((function(e){return String(e)}));a.querySelectorAll("option").forEach(()}else a.value=i.value;j(i.ref,a)}else{if(!w(t))throw new TypeError("Invalid JSX element type: ".concat(t));C(t.defaultProps)&&(i=e(s)({},t.defaultProps,i)),a=(r=t.prototype)&&r.isReactComponent?function(t,n,a){return new t(n=e(s)({},n,{children:a})).render()}(t,i,o):t(e(s)({},i,{children:o}))}return a}function R(t,n){for(var a=arguments.length,r=new Array(a>2?a-2:0),o=2;o<a;o++)r[o-2]=arguments[o];var i;return(_(n)||Array.isArray(n))&&(r.unshift(n),n={}),null==(n=n||{}).children||r.length||(i=n,n=e(p)(i,["children"]),r=i.children),P(t,e(s)({},n,{children:r}),n.key)}unction B(t,n){if(function(e){return C(e)&&"number"==typeof e.length&&"number"!=typeof e.nodeType}(t))!function(t,n){var a=!0,r=!1,o=void 0;try{for(var i,l=e(f)(t)[Symbol.iterator]();!(a=(i=l.next()).done);a=!0){B(i.value,n)}}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}}(t,n);else if(_(t)||T(t))H(document.createTextNode(t),n);else if(null===t)H(document.createComment(""),n);else if((o=t)&&"number"==typeof o.nodeType)H(t,n);else if(null!=(r=t)&&r[M]===S.ShadowRoot){var a=n.attachShadow(t.attr);B(t.children,a),j(t.ref,a)}var r,o}nction Y(e,t,n){switch(e){case"xlinkActuate":case"xlinkArcrole":case"xlinkHref":case"xlinkRole":case"xlinkShow":case"xlinkTitle":case"xlinkType":return void q(n,"http://www.w3.org/1999/xlink",U(e,":"),t);case"xmlnsXlink":return void V(n,U(e,":"),t);case"xmlBase":case"xmlLang":case"xmlSpace":return void q(n,"http://www.w3.org/XML/1998/namespace",U(e,":"),t)}switch(e){case"htmlFor":return void V(n,"for",t);case"dataset":return void I(t,();case"innerHTML":case"innerText":case"textContent":return void(k(t)&&(n[e]=t));case"dangerouslySetInnerHTML":return void(C(t)&&(n.innerHTML=t.__html));case"value":if(null==t||n instanceof window.HTMLSelectElement)return;if(n instanceof window.HTMLTextAreaElement)return void(n.value=t);break;case"spellCheck":return void(n.spellcheck=t);case"class":case"className":return void(w(t)?t(n):V(n,"class",N(t)));case"ref":case"namespaceURI":return;case"style":return void function e(t,n){null==n||!1===n||(Array.isArray(n)?n.forEach((function(n){return e(t,n)})):_(n)?t.setAttribute("style",n):C(n)&&I(n,())}(n,t)}if(w(t)){if("o"===e[0]&&"n"===e[1]){var a=e.toLowerCase();null==n[a]?n[a]=t:n.addEventListener(e,t)}}else C(t)?n[e]=t:!0===t?V(n,e,""):!1!==t&&null!=t&&(n instanceof SVGElement&&!F.test(e)?V(n,U(e,"-"),t):V(n,e,t))}ject.defineProperties(L.prototype,{isReactComponent:{value:!0}});var X=new Map,G=function(t){return function(n){for(var a=arguments.length,r=new Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];return function(a){var o=a.style,i=e(p)(a,["style"]),l=n.length-1,c=n.slice(0,l).reduce((,"")+n[l];return R(t,e(s)({style:[c,o]},i))}}};new Proxy((function(e){return G(e)}),{get:function(e,t){return X,t,()}});var W={Component:L,PureComponent:L,createElement:R,Fragment:function(e){var t=document.createDocumentFragment();return B(e.children,t),t},ShadowRoot:function(t){var n,a=t.children,r=t.ref,o=e(p)(t,["children","ref"]);return n={},e(c)(n,M,S.ShadowRoot),e(c)(n,"ref",r),e(c)(n,"attr",o),e(c)(n,"children",a),n}};function K(e){var t;e&&(t=e);var n=return n.chain=function(e){return ,n}var z,Q,Z,J,$,ee,te,ne,ae,re,oe,ie,le,ce,se,ue,de,pe,me,fe,he='^((?:")?)(?:[^"])(?:[\\w\\-.!#$%&\'*+\\/=?^_`{|}~])*\\1@',ve="(?:(\\w[\\-\\w]{0,62}\\.)+(?![0-9]*$)[A-Za-z]{2,63})$",ye="^([0]?[1-9]|[1|2][0-9]|[3][0|1])[-]([0]?[1-9]|[1][0-2])[-]([0-9]{4})$",ge="^([0][1-9]|[1|2][0-9]|[3][0|1])[-]([0][1-9]|[1][0-2])[-]([0-9]{4})[,][\\s]([0]?[1-9]|[1][0-2])[:]([0-5][0-9])[\\s]$",be="^([0]?[1-9]|[1][0-2])[:]([0-5][0-9])[\\s])$";(Q=z||(z={})).LIVE_CHAT="live_chat",Q.LIVE_CHAT_MESSAGE="live_chat_message",(J=Z||(Z={})).LIVE_CHAT_ENDED="Livechat ended.",J.CONNECT_FAILED="Connect Failed",(ee=$||($={})).TIMED_OUT="TIMED_OUT",ee.CLOSED_BY_VISITOR="CLOSED_BY_VISITOR",ee.CLOSED_BY_AGENT="CLOSED_BY_AGENT",(ne=te||(te={})).INITIATE_TIMEOUT="initiate_timeout",ne.INITIATE_FAILED="initiate_failed",ne.INITIATING="initiating",(re=ae||(ae={})).AGENT_PROFILE="agent_profile",re.LIVE_CHAT="livechat",re.CALENDAR_INFO="calendarInfo",re.CUSTOM="custom",re.SYSTEM="system",re.MEETING_BOOKING_RESPONSE="meeting_booking_response",re.MEETING_BOOKING_REQUEST="meeting_booking_request",(ie=oe||(oe={})).AGENT="agent",ie.VISITOR="visitor",ie.SYSTEM="system",ie.SERVER="server",ie.CLIENT="client",(ce=le||(le={})).PROMPT="assisted_response_prompt",ce.VISITOR_QUESTION="assisted_response_question",ce.GENAI_ANSWER="assisted_response_answer",ce.VISITOR_FEEDBACK="assisted_response_feedback",ce.END="assisted_response_end",ce.AFFIRMATION_QUESTIONS="assisted_response_affirmations_list",ce.AFFIRMATION_CHOICE="assisted_response_affirmation_choice",ce.NUDGE_CHOICE="assisted_response_nudge_choice",(ue=se||(se={})).LC_201="lc_201",ue.LC_202="lc_202",ue.LC_203="lc_203",ue.LC_204="lc_204",ue.LC_205="lc_205",ue.LC_206="lc_206",ue.LC_207="lc_207",ue.LC_208="lc_208",ue.LC_209="lc_209",(pe=de||(de={})).EMAIL_REQUEST="meeting_email_request",pe.EMAIL_RESPONSE="meeting_email_response",pe.BOOKING_RESPONSE="meeting_booking_response",pe.BOOKING_REQUEST="meeting_booking_request",pe.CALENDAR_GET="calendar_get",pe.CALENDAR_INFO="calendar_info",(fe=me||(me={})).UNAVAILABLE_SLOT="UnavailableSlot",fe.NO_SLOTS_AVAILABLE="NoSlotsAvailable";var Ee=2e3,_e={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"},Te="https://assets.adoberesources.net/calendar_default.svg",Ce={CLIENT:"client",SERVER:"server",UNFORMATTED:"unformatted"};function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Oe=function(e){var t=(new DOMParser).parseFromString(e,"text/html"),n=document.createElement("div");return n.innerHTML=t.body.innerHTML,n},xe=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise((function(a,r){if(document.getElementById(t))a(!0);else{var o=document.createElement("script");o.async=n,o.addEventListener("load",a),o.addEventListener("error",r),o.src=e,o.id=t,document.head.before(o)}}))},De=function(e){var t=(new Date).toLocaleDateString("en-US"),n=e?new Date(e):new Date(t);return n.setMinutes(n.getMinutes()+n.getTimezoneOffset()),n},Se=function(e){return e&&-1!==e.indexOf("_")?e.split("_").join("-"):e},Me=function(e,t,n){try{var a=e,r="en-US"===(n=Se(n)||"en-US")?"long":"longGeneric",o=a.toLocaleString("en-US",{timeZoneName:"shortOffset"}).split(" "),i=o.length>0?o[o.length-1]:"",l=-1!==i.indexOf("-")?"UTC-".concat(i.split("-")[1]):"UTC+".concat(i.split("+")[1]),c=a.toLocaleString(n,{timeZoneName:r}),s=-1!==c.indexOf("AM")?c.indexOf("AM"):c.indexOf("PM"),u=-1!==s?c.substring(s+2,c.length):function(e,t){return e.split(" ").reduce((function(e,n){return n===(null==t?void 0:t.TEXT_ANTE_MERIDIEM)||n.substring(0,2)===(null==t?void 0:t.TEXT_ANTE_MERIDIEM)||n===(null==t?void 0:t.TEXT_POST_MERIDIEM)||n.substring(0,2)===(null==t?void 0:t.TEXT_POST_MERIDIEM)||parseInt(n.substring(0,2),10)>0&&parseInt(n.substring(0,2),10)<24?e:"".concat(e," ").concat(n)}),"")}(c,t),d=-1!==s?u.match(/\b(\w)/g):[u];return{timezone:d?d.join(""):"",offset:l}}catch(e){return{timezone:"",offset:""}}},ke=function(e){try{var t=-1!==e.indexOf(",")?e.split(","):[e],n=t&&t.length>0?t[0].trim().split("-"):"",a=n&&n.length>0?"".concat(n[2],"-").concat(n[1],"-").concat(n[0]):t[0],r=t&&t.length>1?t[1].trim().split(" ")[0]:"";if(r){r=(r=t&&t.length>1&&-1!==t[1].indexOf("PM")?"".concat(parseInt(r.split(":")[0],10)%12+12,":").concat(r.split(":")[1]):"".concat(parseInt(r.split(":")[0],10)%12,":").concat(r.split(":")[1]))&&1===r.indexOf(":")?"0".concat(r):r;var o=De(),i=Me(o).offset,l=i&&i.length>3?i.substring(3):"+00:00",c=l?l.substring(0,1):"",s=l&&-1!==l.indexOf(":")?l.substring(1):"".concat(l.substring(1),":00");return"".concat(a).concat(r?"T".concat(r,":00").concat(c).concat(1===s.indexOf(":")?"0".concat(s):s):"")}return a}catch(e){return console.log(e),""}},Ne=function(e,t){var n="(".concat(t.TEXT_ANTE_MERIDIEM,"|").concat(t.TEXT_POST_MERIDIEM,")");return e.substring(0,e.length-1)+n+e.substring(e.length-1)},Ae=function(e){if(!e)return document.createElement("div");var t=document.createElement("div");t.innerHTML=e;for(var n=document.createDocumentFragment();t.firstChild;)n.appendChild(t.firstChild);return n};var Fe,Le=(Fe=function(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?we(Object(a),!0).forEach((function(t){Ie(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):we(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}({},{}),{setState:getState:function(){return Fe}});function Pe(e){var t=Le.getState(),n=e.id,a=e.style,r=e.content,o={hb_chat_client:a===Ce.CLIENT,hb_chat_server:a===Ce.SERVER,hb_chat_unformatted:a===Ce.UNFORMATTED},i=a===Ce.CLIENT?null==t?void 0:t.AT_VISITOR_SPEECH:null==t?void 0:t.AT_BOT_SPEECH;return W.createElement("div",{id:n,class:o,"aria-live":"polite","aria-roledescription":"message"},W.createElement("div",{class:"hb_conversation_starter"},i),r)}function Re(e){var t=O(),n=O(),a=O(),r=O(),o=O(),i=Le.getState();e.mutators({showButton:function(t){var n=a.current.getAttribute("position");n&&(a.current.className=je({show:t,position:n}),o.current.onclick=e.onClick)},showCallout:function(r){var o=a.current.getAttribute("position");o&&(t.current.className=Be({show:r,position:o}),n.current.className=He({show:r,position:o}),t.current.onclick=e.onClick,n.current.onclick=e.onCalloutClose)},calloutText:setCalloutContent:badgeText:showBadge:function(e){var t=a.current.getAttribute("position");t&&(r.current.className=Ue({show:e,position:t}))},onButtonAction:function(e){o&&o.current&&(o.current.firstChild.ariaExpanded="".concat(e))}});var l="custom"!==e.avatarType||e.showDefaultAvatar?"hb_chat_button_svg":"hb_chat_button_custom_svg";return W.createElement("div",{class:je({show:!1,position:e.position}),ref:a},W.createElement("div",{class:He({show:!1,position:e.position}),ref:n},W.createElement("button",{class:"hb_callout_close_btn","aria-label":i?i.TEXT_ACCESSIBILITY_POKE_CLOSE:""})),W.createElement("div",{class:Be({show:!1,position:e.position}),ref:t}),W.createElement("div",{class:"hb_button_wrapper",ref:o},W.createElement("button",{class:"hb_button","aria-label":i?i.TEXT_ACCESSIBILITY_CHAT_BUTTON_OPEN:"","aria-haspopup":"dialog","aria-expanded":!1},W.createElement("div",{class:"".concat(l)})),W.createElement("span",{class:Ue({show:!1,position:e.position}),ref:r})))}function je(e){var t=e.show,n=e.position;return N({hb_chatbutton_wrap:!0,hb_chatbutton_wrap_right:"RIGHT"===n,hb_chatbutton_wrap_left:"LEFT"===n,hb_chatbutton_hide:!t,hb_chatbutton_show:t})}function Be(e){var t=e.show,n=e.position;return N({hb_callout:!0,hb_callout_right:"RIGHT"===n,hb_callout_left:"LEFT"===n,hb_callout_hide:!t,hb_callout_show:t})}function He(e){var t=e.show,n=e.position;return N({hb_callout:!0,hb_callout_close_right:"RIGHT"===n,hb_callout_close_left:"LEFT"===n,hb_callout_close_show:t,hb_callout_click_area:!0})}function Ue(e){var t=e.show,n=e.position;return N({hb_badge:!0,hb_badge_show:t,hb_badge_right:"RIGHT"===n,hb_badge_left:"LEFT"===n})}var Ye,Ve=O();function qe(e){var t,n,a=e.botName,r=e.botAvatarClassName,o=e.onClose,i=e.headerAvatarFill,l=e.showEndSessionPopup,c=e.mutators,s=O(),u=Le.getState(),d=[0,0,0];return i&&(d=(n=null==(t=i)?void 0:t.match(/[A-Za-z0-9]{2}/g))?n.map(():[]),c({toggleEndLiveSessionBtn:function(e){e?null==s||s.current.classList.remove("hb_hide_element"):null==s||s.current.classList.add("hb_hide_element")}}),W.createElement("div",{class:"hb_chatheader"},W.createElement("div",{className:"bot_avatar2"},W.createElement("div",{ref:Ve,className:r})),W.createElement("div",{class:"hb_botname"},W.createElement("b",{role:"heading","aria-level":1,id:a},a)),W.createElement("div",{class:"hb_chatbot_action_btn"},o?W.createElement("button",{class:"hb_close hb_minimize",onClick:o,"aria-label":u?u.TEXT_ACCESSIBILITY_CHAT_WINDOW_CLOSE:"Minimize chatbot"}):W.createElement(W.Fragment,null),W.createElement("button",{ref:s,class:"hb_close hb_session_close hb_hide_element",onClick:l,"aria-label":u?u.TEXT_ACCESSIBILITY_LIVE_AGENT_SESSION_TERMINATE:"End Live Session"})),W.createElement("svg",{height:"0px",width:"0px",style:"display:none;"},W.createElement("defs",null,W.createElement("filter",{id:"hb-chat-color-filter",colorInterpolationFilters:"sRGB"},W.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 ".concat(d[0]/255," 0 0 0 0 ").concat((d[1],d[1]/255)," 0 0 0 0 ").concat(d[2]/255," 0 0 0 1 0")})))))}function Xe(e){var t=e.classNames,n=e.clickFn,a=e.keyDownFn,r=e.buttonRef,o=e.children,i=e.text,l=e.type,c=e.icon,s=e.ariaLabel;return W.createElement("button",{className:t,onClick:n,onKeyDown:function(e){return a?a(e):""},"data-type":l,ref:r,type:"button",disabled:e.disabled,"aria-label":s},o||"",W.createElement("span",{className:c&&"txt"},i||""),c&&W.createElement("span",{className:c}))}function Ge(e){var t=e.mutators,n=e.onHideEndSession,a=e.onConfirm,r=O(),o=Le.getState();function i(){return W.createElement("div",{class:"hb_session_terminate_error"},W.createElement("img",{src:"https://assets.adoberesources.net/svg/Smock_Alert_18_N.svg",alt:o?o.ERROR_ALERT_ICON:"Alert Icon"}),W.createElement(W.Fragment,null,o.SESSION_TERMINATION_ERROR))}return t({showError:function(){var e,t,n,a,o,l=null===(n=null===(t=null===(e=r.current)||void 0===e?void 0:e.querySelector(".hb_session_headline"))||void 0===t?void 0:t.children)||void 0===n?void 0:n[0];l&&(null===(o=null===(a=r.current)||void 0===a?void 0:a.querySelector(".hb_session_headline"))||void 0===o||o.replaceChild(W.createElement(i,null),l))}}),W.createElement("div",{class:"hb_session_terminate_modal",ref:r},W.createElement("div",{class:"hb_session_headline"},W.createElement("div",{class:"hb_session_terminate_message"},o.SESSION_TERMINATION_MESSAGE)),W.createElement("div",{class:"hb_session_terminate_bottom hb_flex_center"},W.createElement(Xe,{classNames:["hb_btn_session_terminate","hb-btn-cancel"],clickFn:n,text:o.BUTTON_CANCEL_TEXT}),W.createElement(Xe,{classNames:["hb_btn_session_terminate","hb-btn-confirm"],clickFn:a,text:o.END_SESSION_BUTTON_TEXT})))}function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ze(e){var t=e.children,n=e.mutators,a=e.onClose,r=e.botName,o=e.onHideEndSession,i=e.onSessionTerminate,l=O(),c=O(),s=O(),u=K(),d=function(){setTimeout((function(){l&&l.current&&l.current.parentElement&&c.current.scrollTo({top:c.current.scrollHeight,behavior:"smooth"})}),10)},p=function(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?We(Object(a),!0).forEach((function(t){Ke(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):We(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}({privacyTextShown:!1},e.options);n({addElem:function(e){var t;if(null===(t=l.current)||void 0===t||t.appendChild(e),d(),window.innerHeight>120){var n=e.getElementsByClassName("hb_input");if(n&&0===n.length&&(n=e.getElementsByClassName("hb_picker_input")),n&&0===n.length&&(n=e.getElementsByClassName("hb_choice")),n&&n.length>0)n[0].focus()}},getElem:function(e){var t;return null===(t=l.current)||void 0===t?void 0:t.querySelector("#".concat(e))},removeElem:function(e){var t,n;null===(n=null===(t=l.current)||void 0===t?void 0:t.querySelector("#".concat(e)))||void 0===n||n.remove()},clear:function(){var e=l.current;if(e)for(;e.firstChild;)e.firstChild.remove()},resizeChatBody:function(e){if(p&&p.privacyTextShown){var t="";c.current.classList.contains("hb_has_privacy")?t="hb_chatinputbox_with_privacy":e?t="hb_chatinputbox":["hb_chatinputbox","hb_chatinputbox_without_privacy"].forEach((),t&&c.current.classList.toggle(t,!1),t&&c.current.classList.add(t)}else p&&!p.privacyUrl?(c.current.classList.toggle("hb_chatinputbox_without_privacy",e),c.current.classList.toggle("hb_without_chatinputbox_without_privacy",!e)):c.current.classList.toggle("hb_chatinputbox",e);d()},toggleEndSession:);var m=function(){var e;null===(e=u())||void 0===e||e.showError()};return W.createElement("div",{ref:c,class:"hb_chatbody ".concat(p.privacyTextShown&&"hb_has_privacy"," ").concat(!p.privacyUrl&&"hb_without_chatinputbox_without_privacy")},W.createElement("div",{ref:s,class:"hb_hide_element"},W.createElement(Ge,{mutators:u,onHideEndSession:o,onConfirm:)),W.createElement("div",{class:"hb_chatbody_inner",ref:l,role:"region","aria-labelledby":r,onKeyDown:function(e){e.code&&e.code.toLowerCase().includes("escape")&&(null==a||a())}}),t)}function Qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Je(e){var t=e.onTextInputChange,n=e.onTextInputComplete,a=e.mutators,r=e.policyUrl,o=e.localeText,i=O(),l=O(),c=O(),s=O(),u=0,d=function(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?Qe(Object(a),!0).forEach((function(t){Ze(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}({privacyTextShown:!1},e.options),p=function(){s.current.style.height="auto",s.current.style.height=s.current.scrollHeight+u+"px"},m=function(){var e,t=s.current.value.trim()||"";0!==(null==t?void 0:t.length)&&(t&&t.length<=Ee&&n?(l.current.classList.toggle("showError",!1),Ye&&Ye.type===le.VISITOR_QUESTION&&Ye.payload&&(Ye.payload.inputVal=t),Ye&&Ye.type===z.LIVE_CHAT_MESSAGE&&Ye.payload&&(Ye.payload.content=t),n(Ye),null===(e=a())||void 0===e||e.setTextValue(""),p()):l.current.classList.toggle("showError",!0))};return a({setTextValue:function(e){s.current.value=e},showTextInput:function(e){s.current.classList.toggle("show",e),c.current.classList.toggle("show",e),e&&s.current.focus(),u=s.current.offsetHeight-s.current.clientHeight},disableTextInput:function(e){s.current.disabled=e,c.current.disabled=e,c.current.classList.toggle("disable",e)},setTextResponsePayload:),W.createElement("div",{class:"hb_chat_textinput ".concat(d.privacyTextShown&&"hb_has_privacy_with_textinput"," ").concat(!d.privacyTextShown&&!r&&"hb_textinput_without_privacy"),ref:i},W.createElement("div",{class:"hb_chat_textinput_box_container"},W.createElement("textarea",{rows:1,ref:s,maxLength:Ee,onInput:p,onChange:function(){var e=s.current.value||"";t&&e.length<=Ee&&t(e)},onKeyPress:placeholder:o.LABEL_ADD_MESSAGE,className:"hb_chat_textinput_box"}),W.createElement("button",{ref:c,className:"hb_chat_send_button",onClick:m,"aria-label":o?o.TEXT_ACCESSIBILITY_SEND_BUTTON:""},W.createElement("div",{class:"hb_input_button_wrap"},W.createElement("span",{class:"hb_input_button_icon"})," ",W.createElement("span",null,o.BUTTON_SEND_TEXT)))),W.createElement("div",{class:"hb_chat_textinput_error",ref:l},W.createElement("span",{class:"hb_input_alert hb_input_alert_color"})," ",o.ERROR_MESSAGE_FAILED),r&&W.createElement("div",{className:"hb_chat_textinput_footer ".concat(!d.privacyTextShown&&"show")},W.createElement("div",{className:"hb_policy_url_view"},W.createElement("a",{href:r,target:"_blank"},o.TEXT_PRIVACY_POLICY))))}var $e=["adobezero","adobestaging"];function et(e){var t=e.mutators,n=e.onTextInputChange,a=e.onTextInputComplete,r=e.botName,o=e.botAvatarClassName,i=e.onClose,l=e.policyUrl,c=e.headerAvatarFill,s=e.localeText,u=e.instanceId,d=e.onSessionTerminate,p=K(),m=K(),f=K(),h=O(),v=localStorage.getItem("hb_sessionId")||"",y=function(){return!!(l&&$e.includes(u||"")&&s.TEXT_PRIVACY_ZERO)&&!JSON.parse(localStorage.getItem("hb_privacy_zero")||"{}")[v]},g={privacyTextShown:y(),privacyUrl:l};t({addElem:p.chain("addElem"),getElem:p.chain("getElem"),removeElem:p.chain("removeElem"),clear:p.chain("clear"),setTextValue:f.chain("setTextValue"),showTextInput:f.chain("showTextInput"),disableTextInput:f.chain("disableTextInput"),setTextResponsePayload:f.chain("setTextResponsePayload"),resizeChatBody:p.chain("resizeChatBody"),showChatFrame:function(e){null==h||h.current.classList.toggle("hb_shown",e)},toggleEndLiveSessionBtn:m.chain("toggleEndLiveSessionBtn"),onHideEndSession:function(){var e,t;null===(t=null===(e=p())||void 0===e?void 0:e.toggleEndSession)||void 0===t||t.call(e,!1)}});var b=function(e){var t,n,a,r,o,i,l;e.preventDefault(),(l=JSON.parse(localStorage.getItem("hb_privacy_zero")||"{}"))&&(Object.keys(l).forEach((function(e){new Date(l[e])<new Date&&delete l[e]})),localStorage.setItem("hb_privacy_zero",JSON.stringify(l)));var c=JSON.parse(localStorage.getItem("hb_privacy_zero")||"{}"),s=new Date;s.setDate(s.getDate()+7),c[v]=s.toISOString(),localStorage.setItem("hb_privacy_zero",JSON.stringify(c)),null===(n=null===(t=e.target)||void 0===t?void 0:t.parentNode)||void 0===n||n.remove(),null===(a=h.current.querySelector(".hb_has_privacy"))||void 0===a||a.classList.remove("hb_has_privacy"),null===(r=h.current.querySelector(".hb_has_privacy_with_textinput"))||void 0===r||r.classList.remove("hb_has_privacy_with_textinput"),null===(o=h.current.querySelector(".hb_chatinputbox_with_privacy"))||void 0===o||o.classList.replace("hb_chatinputbox_with_privacy","hb_chatinputbox"),null===(i=h.current.querySelector(".hb_chat_textinput_footer"))||void 0===i||i.classList.add("show")};return W.createElement("div",{ref:h,class:"hb_chat hb_chat_right"},W.createElement(qe,{botName:r,botAvatarClassName:o,mutators:m,onClose:i,headerAvatarFill:c,showEndSessionPopup:function(){var e,t;null===(t=null===(e=p())||void 0===e?void 0:e.toggleEndSession)||void 0===t||t.call(e,!0)}}),W.createElement(ze,{mutators:p,options:g,onClose:i,botName:r,onHideEndSession:function(){var e,t;null===(t=null===(e=p())||void 0===e?void 0:e.toggleEndSession)||void 0===t||t.call(e,!1)},onSessionTerminate:d}),W.createElement(Je,{mutators:f,onTextInputChange:n,onTextInputComplete:a,policyUrl:l,localeText:s,options:g}),function(){if(!y())return"";return W.createElement("div",{className:"hb_policy_zero",innerHTML:s.TEXT_PRIVACY_ZERO.replace(/{{(.+)}}/,'<a href="'.concat(l,'" target="_blank">$1</a>'))},W.createElement("button",{class:"close_privacy",onClick:b},"×"))}())}function tt(e){var t=e.id;return W.createElement("div",{className:"hb_chat_loader",id:t},W.createElement("div",{className:"bot_2_avatar"},W.createElement("div",{className:"bot_2"})),W.createElement("div",{className:"hb-msg-loading"},W.createElement("span",null),W.createElement("span",null),W.createElement("span",null)))}function nt(e){var t=e.id,n=e.localeText;return W.createElement("div",{className:"hb_connection_indicator",id:t},W.createElement("div",{className:"spinner",title:"loader"}),W.createElement("div",{className:"message","aria-live":"polite"},n.TEXT_CONNECTING_TO_TEAM_MEMBER))}function at(e){var t=e.id,n=e.displayText,a=Ae(void 0===n?"":n);return W.createElement("div",{className:"hb_chat_connected",id:t},W.createElement("span",{className:"hb_chat_connected_text","aria-live":"polite"},a))}function rt(e){var t=e.styles,n=t&&t.length>0?W.createElement(W.Fragment,null,t.map}))):W.createElement(W.Fragment,null);return e.mutators({addStyl}}),n}function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function it(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lt(e){var t=W.createElement("div",{"data-testId":"root"}),n=t.attachShadow({mode:"open"}),a=e.mutators,r=K(),o=K(),i=K(),l=O();return Le.setState(e.localeText||{}),a({addToChatFrame:function(e){var t;null===(t=r())||void 0===t||t.addElem(W.createElement(Pe,function(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?ot(Object(a),!0).forEach((function(t){it(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ot(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}({},e)))},getFromChatFrame:function(e){var t;return null===(t=r())||void 0===t?void 0:t.getElem(e)},loadStyle},addCustomStyle:function(e,t){l.current&&l.current.style.setProperty(e,t)},addBotPosition:function(e){if("LEFT"===e){var t=l.current.getElementsByClassName("hb_chat")[0];t&&t.classList.replace("hb_chat_right","hb_chat_left");var n=l.current.querySelector(".hb_chatbutton_wrap");n&&n.setAttribute("position",e)}else{var a=l.current.getElementsByClassName("hb_chat")[0];a&&a.classList.replace("hb_chat_left","hb_chat_right");var r=l.current.querySelector(".hb_chatbutton_wrap");r&&r.setAttribute("position","RIGHT")}},clearChatFrame:r.chain("clear"),removeFromChatFrame:r.chain("removeElem"),renderWaitingUi:function(e){var t;null===(t=r())||void 0===t||t.addElem(W.createElement(tt,{id:e}))},renderConnectingUi:function(t){var n;null===(n=r())||void 0===n||n.addElem(W.createElement(nt,{id:t,localeText:e.localeText?e.localeText:{}}))},renderStatusSeparatorUi:function(e,t){var n;null===(n=r())||void 0===n||n.addElem(W.createElement(at,{id:e,displayText:t}))},showTextInput:r.chain("showTextInput"),disableTextInput:r.chain("disableTextInput"),resizeChatBody:r.chain("resizeChatBody"),showButtonCallout:o.chain("showCallout"),calloutText:o.chain("calloutText"),showButton:o.chain("showButton"),showChatFrame:r.chain("showChatFrame"),addStyle:i.chain("addStyle"),badgeText:o.chain("badgeText"),showBadge:o.chain("showBadge"),setTextValue:r.chain("setTextValue"),setTextResponsePayload:r.chain("setTextResponsePayload"),onButtonAction:o.chain("onButtonAction"),toggleEndLiveSessionBtn:r.chain("toggleEndLiveSessionBtn"),onHideEndSession:r.chain("onHideEndSession")}),n.appendChild(W.createElement("div",{ref:l,class:"hb_shadow_root"},W.createElement(rt,{styles:e.styles,mutators:i}),W.createElement(et,{botName:e.agentName,botAvatarClassName:e.avatar,policyUrl:e.privacyPolicyUrl,hasCloseButton:e.hasCloseButton,onClose:e.onClose,mutators:r,onTextInputChange:e.onTextInputChange,onTextInputComplete:e.onTextInputComplete,headerAvatarFill:e.colourSettings?e.colourSettings.headerAvatarFill:"",localeText:e.localeText?e.localeText:{},locale:e.locale,instanceId:e.instanceId,onSessionTerminate:e.onSessionTerminate}),W.createElement(Re,{mutators:o,text:e.buttonText,onClick:e.onButtonClick,onCalloutClose:e.onCalloutClose,avatarType:e.avatarType,showDefaultAvatar:!e.isChatMatchCustomAvatar}))),t}function ct(e){return W.createElement("div",{class:"hb_cf_header"},W.createElement("div",{class:"hb_cf_title"}),W.createElement("hr",{class:"hb_ch_header_hr"}),"inline"!==e.type&&W.createElement("div",{className:"hb_ls_close",onClick:e.onClose}))}function st(e){var t=e.children,n=e.mutators,a=O();return n({addElem:function(e){var t;if(null===(t=a.current)||void 0===t||t.appendChild(e),window.innerHeight>120){var n=e.getElementsByClassName("hb_input");if(n&&0===n.length&&(n=e.getElementsByClassName("hb_picker_input")),n&&0===n.length&&(n=e.getElementsByClassName("hb_choice")),n&&n.length>0)n[0].focus()}},getElem:function(e){var t;return null===(t=a.current)||void 0===t?void 0:t.querySelector("#".concat(e))},removeElem:function(e){var t,n;null===(n=null===(t=a.current)||void 0===t?void 0:t.querySelector("#".concat(e)))||void 0===n||n.remove()},clear:function(){var e=a.current;if(e)for(;e.firstChild;)e.firstChild.remove()}}),W.createElement("div",{class:"hb_cf_body"},W.createElement("div",{class:"hb_body_inner",ref:a}),t}function dt(e){var t=e.mutators,n=e.onClose,a=K(),r=K(),o=O();t({addElem:a.chain("addElem"),getElem:a.chain("getElem"),removeElem:a.chain("removeElem"),clear:a.chain("clear"),setTextValue:r.chain("setTextValue"),showTextInput:r.chain("showTextInput"),disableTextInput:r.chain("disableTextInput"),showChatFrame:function(e){o&&o.current&&!e&&o.current.remove()},setTextResponsePayload:r.chain("setTextResponsePayload")});var i=W.createElement("div",{class:"hb_cf_frame"},W.createElement(ct,{onClose:n,text:"Conversation header",type:e.type}),W.createElement(st,{mutators:a}),W.createElement(ut,null));switch(e.type){case"popup":return W.createElement("div",{ref:o,class:"hb_cf_window"},W.createElement("div",{class:"hb_overlay"}),W.createElement("div",{class:"hb_popup"},i));case"sidebar":return W.createElement("div",{ref:o,class:"hb_cf_window"},W.createElement("div",{class:"hb_overlay"}),W.createElement("div",{class:"hb_sidebar"},i));default:return W.createElement("div",{ref:o,class:"hb_cf_window"},W.createElement("div",{class:"hb_inline"},i))}}function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ft(e){Le.setState(e.localeText||{});var t="inline"===e.type?"hb_livestream_inline-root":"hb_livestream-root",n=document.getElementById("hb_livestream-root"),a=W.createElement("div",{"data-testid":"livestream-root",id:t}),r=n&&n.shadowRoot&&"inline"!==e.type?n.shadowRoot:a.attachShadow({mode:"open"}),o=e.mutators,i=K(),l=K(),c=K(),s=O();return o({addToChatFrame:function(e){var t;null===(t=i())||void 0===t||t.addElem(W.createElement(Pe,function(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?pt(Object(a),!0).forEach((function(t){mt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}({},e)))},getFromChatFrame:function(e){var t;return null===(t=i())||void 0===t?void 0:t.getElem(e)},loadStyles:function(e,t){if(!t||!document.querySelector("#".concat(t))){var n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=e,t&&(n.id=t),document.head.appendChild(n)}},addCustomStyl},addTitle:function(e){var t,n,a,r;if(e=e?e.trim():""){var o=null===(t=s.current)||void 0===t?void 0:t.querySelector(".hb_cf_title");o&&(o.textContent=e,o.classList.add("show"),null===(a=null===(n=o.closest(".hb_cf_header"))||void 0===n?void 0:n.querySelector("hr"))||void 0===a||a.classList.add("show"),null===(r=o.closest(".hb_cf_frame"))||void 0===r||r.classList.add("has-title"))}},addBotPosition:function(){},clearChatFram},removeFromChatFrame:i.chain("removeElem"),renderWaitingUi:function(e,t){var n,a=t||"";null===(n=i())||void 0===n||n.addElem(W.createElement("div",{id:e,class:"hb_cf_loading"},W.createElement("div",null,a),W.createElement("div",{className:"hb-msg-loading"},W.createElement("span",null),W.createElement("span",null),W.createElement("span",null),W.createElement("span",null),W.createElement("span",null))))},showTextInput:i.chain("showTextInput"),disableTextInput:i.chain("disableTextInput"),showButtonCallout:l.chain("showCallout"),calloutText:l.chain("calloutText"),showButton:l.chain("showButton"),showChatFrame:i.chain("showChatFrame"),addStyle:c.chain("addStyle"),badgeText:l.chain("badgeText"),showBadge:l.chain("showBadge"),setTextValue:i.chain("setTextValue"),setTextResponsePayload:i.chain("setTextResponsePayload")}),r.innerHTML="",r.appendChild(W.createElement("div",{ref:s,class:"hb_cf_main"},W.createElement(rt,{styles:e.styles,mutators:c}),W.createElement(dt,{botName:e.agentName,botAvatarClassName:e.avatar,policyUrl:e.privacyPolicyUrl,hasCloseButton:e.hasCloseButton,onClose:e.onClose,mutators:i,onTextInputChange:e.onTextInputChange,onTextInputComplete:e.onTextInputComplete,headerAvatarFill:e.colourSettings?e.colourSettings.headerAvatarFill:"",localeText:e.localeText?e.localeText:{},locale:e.locale,type:e.type}))),n&&n.shadowRoot&&"inline"!==e.type?n:a}function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter}))),n.push.apply(n,a)}return function gt(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var bt=function(}var t,n,a;return t=e,(n=[{key:"render",value:function(e){var t=K(),n=e.streamConfig;switch(n&&n.divId&&(n.selector=n.divId),e.type){case"inline":if(n&&n.selector&&"inline"===e.type){var a="string"==typeof n.selector?document.getElementById(n.selector):n.selector;if(a){var r=a.querySelector("#hb_livestream_inline-root");r&&r.remove(),a.appendChild(W.createElement(ft,vt(vt({},e),{},{mutators:t})))}else console.log("Conversational flows: selector not found")}else console.log("Conversational flows: selector not found");break;case"popup":case"sidebar":document.body.appendChild(W.createElement(ft,vt(vt({},e),{},{mutators:t})));break;default:document.body.appendChild(W.createElement(lt,vt(vt({},e),{},{mutators:t})))}this.mutators=t()}},{key:"addStyle",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.addStyle(e)}},{key:"addToChatFrame",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.addToChatFrame(e)}},{key:"getFromChatFrame",valu}},{key:"removeFromChatFrame",value:function(e){var t;e&&(null===(t=this.mutators)||void 0===t||t.removeFromChatFrame(e))}},{key:"renderWaitingUi",value:function(e,t){var n;null===(n=this.mutators)||void 0===n||n.renderWaitingUi(e,t)}},{key:"renderConnectingUi",value:function(e){var t,n;(null===(t=this.mutators)||void 0===t?void 0:t.renderConnectingUi)&&(null===(n=this.mutators)||void 0===n||n.renderConnectingUi(e))}},{key:"renderStatusSeparatorUi",value:function(e,t){var n,a;(null===(n=this.mutators)||void 0===n?void 0:n.renderStatusSeparatorUi)&&(null===(a=this.mutators)||void 0===a||a.renderStatusSeparatorUi(e,t))}},{key:"showTextInput",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.showTextInput(e)}},{key:"resizeChatBody",value:function(e){var t,n;(null===(t=this.mutators)||void 0===t?void 0:t.resizeChatBody)&&(null===(n=this.mutators)||void 0===n||n.resizeChatBody(e))}},{key:"showButtonCallout",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.showButtonCallout(e)}},{key:"calloutText",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.calloutText(e)}},{key:"showButton",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.showButton(e)}},{key:"showChatFrame",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.showChatFrame(e)}},{key:"addCustomStyle",valu}},{key:"loadStyles",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.loadStyles(e)}},{key:"addBotPosition",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.addBotPosition(e)}},{key:"clearChatFrame",valu}},{key:"badgeText",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.badgeText(e)}},{key:"showBadge",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.showBadge(e)}},{key:"setTextValue",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.setTextValue(e)}},{key:"setTextResponsePayload",value:function(e){var t;null===(t=this.mutators)||void 0===t||t.setTextResponsePayload(e)}},{key:"disableTextInput",valu}},{key:"addTitle",valu}},{key:"onButtonAction",valu}},{key:"toggleEndLiveSessionBtn",valu}},{key:"onHideEndSession",valu}}])&&gt(t.prototype,n),a&&gt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Et(e){var t=Le.getState(),n=e.primaryLabel||(e.onlyClose?t.BUTTON_CLOSE_TEXT:t.BUTTON_NEXT_TEXT),a=e.secondaryLabel||t.BUTTON_CANCEL_TEXT,r=e.tertiaryLabel||t.BUTTON_BACK_TEXT,o=O();e.mutators&&e.mutators({updatePrimaryAtt},removePrimaryAtt},updatePrimaryLabe}});return!1===e.show?W.createElement(W.Fragment,null):e.onlyClose?W.createElement("div",{class:"hb_btn_group"},W.createElement(Xe,{clickFn:e.closeFn?e.closeFn:e.primaryFn,text:n,classNames:["hb_btn","primary"]})):W.createElement("div",{class:"hb_btn_group"},e.children,e.tertiaryFn&&W.createElement(Xe,{clickFn:e.tertiaryFn,text:r,classNames:["hb_btn","tertiary"]}),e.secondaryFn&&W.createElement(Xe,{clickFn:e.secondaryFn,text:a,classNames:["hb_btn","secondary"],disabled:e.isSecondaryDisabled}),e.primaryFn&&W.createElement(Xe,{buttonRef:o,clickFn:function(){o.current.classList.add("disabled"),e.primaryFn&&e.primaryFn()},text:n,classNames:["hb_btn","primary"],disabled:e.isPrimaryDisabled,icon:"next"}))}function _t(e){var t=Le.getState(),n=(null==e?void 0:e.avatar)?"bot_2_avatar bot_agent_avatar":"bot_2_avatar";return W.createElement("div",null,e.isChat&&W.createElement("div",{className:n},e.avatar?W.createElement("img",{width:"25",height:"25",src:e.avatar,alt:t?t.TEXT_ALT_CALENDAR_AVATAR:""}):W.createElement("div",{className:"bot_2"})),W.createElement("div",{class:"hb_message"},Oe(e.text)),e.children&&W.createElement("div",null,e.children))}function Tt(e){switch(e.playbookType){case"liveStream":return W.createElement(W.Fragment,null,W.createElement(_t,{text:e.text,isChat:!1,children:e.children}),!e.isMessageOnly&&W.createElement(Et,{onlyClose:e.isFinalMessage,closeFn:e.secondaryFn,primaryFn:e.primaryFn}));default:return W.createElement(_t,{text:e.text,isChat:!0,children:e.children,avatar:e.avatar})}}function Ct(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var wt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=t}var t,n,a;return t=e,a=[{key:"handlesMessage",value:function(e,t){return"message"===e}}],(n=[{key:"handleMessage",value:function(e){var t=this;this.api.addToChatFrame&&(this.contentId=this.api.addToChatFrame({style:"liveStream"===e.playbookType?"unformatted":"server",content:W.createElement(Tt,{text:e.payload?e.payload.text:"",playbookType:e.playbookType,primaryFn:function(){t.api.sendMessage({type:e.type,sender:"client",id:e.id,playbookType:e.playbookType}),t.api.removeFromChatFrame(t.contentId)},secondaryF},isFinalMessage:e.isFinalMessage})}))}},{key:"handleReplay",valu}}])&&Ct(t.prototype,n),a&&Ct(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function It(e){var t=e.onChoiceClick,n=e.choices,a=O();return W.createElement("div",{ref:a,class:"hb_question ".concat(e.questionClassNames&&e.questionClassNames.length>0?e.questionClassNames.join(" "):"")},n?n.map((function(n,r){return n?W.createElement("button",{id:"".concat(r),class:"hb_choice ".concat(e.questionChoiceClassNames&&e.questionChoiceClassNames.length>0?e.questionChoiceClassNames.join(" "):""),onClick:function(){return function(e,n){if(-1!==n&&a&&a.current){for(var r=0,o=Array.from(a.current.children);r<o.length;r++){var i=o[r],l=i.getAttribute("class");l&&l.includes("selected")&&i.classList.remove("selected")}a.current.children[n].classList.add("selected")}t(e)}(n,r)}},"string"==typeof n?n:n.text):W.createElement(W.Fragment,null)})):W.createElement(W.Fragment,null))}function Ot(e){var t=K(),n="";switch(e.playbookType){case"liveStream":return W.createElement("div",{id:e.id},W.createElement("div",{class:"hb_cf_qs_container"},W.createElement(Tt,{text:e.text?e.text:"",playbookType:e.playbookType,isMessageOnly:!0}),W.createElement(It,{text:e.text?e.text:"",choices:e.choices?e.choices:[],onChoiceClick:function(e){var a;n=e,e&&(null===(a=t())||void 0===a||a.removePrimaryAttr("disabled"))},questionClassNames:["hb_question"],questionChoiceClassNames:["hb_choices"]})),W.createElement(Et,{mutators:t,isPrimaryDisabled:!0,primaryF}}));default:return W.createElement(It,{text:e.text?e.text:"",choices:e.choices?e.choices:[],onChoiceClick:e.onChoiceClick})}var Dt=function(}var t,n,a;return t=e,a=[{key:"handlesMessage",valu}}],(n=[{key:"handleMessage",value:function(e,t){var n=this,a=e;if("question_answer"===a.type)this.questionId&&this.api.removeFromChatFrame(this.questionId),this.api.addToChatFrame({style:"client",content:W.createElement("div",{class:"hb_answer"},a.payload?a.payload.text:"")});else{var r=e;"liveStream"!==e.playbookType&&this.api.addToChatFrame({style:"server",content:W.createElement(Tt,{text:r.payload?r.payload.text:"",playbookType:e.playbookType})}),this.questionId=this.api.addToChatFrame({content:W.createElement(Ot,{text:r.payload?r.payload.text:"",choices:r.payload?r.payload.choices:[],onChoiceClick:function(a){var r={id:e.id,type:"question_answer",sender:"client",payload:"string"==typeof a?{text:a,type:"message"}:a,playbookType:e.playbookType};"liveStream"!==e.playbookType?n.handleMessage(r,t):n.api.removeFromChatFrame(n.questionId),n.api.sendMessage(r)},hideFram},playbookType:e.playbookType,id:t}),style:"unformatted"})}}},{key:"handleReplay",valu}}])&&xt(t.prototype,n),a&&xt(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}(}function Mt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kt(e){return W.createElement("div",{style:{width:"100%"}},e.label&&W.createElement("label",{htmlFor:"textfield-".concat(e.id)},e.label),W.createElement("input",function(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?St(Object(a),!0).forEach((function(t){Mt(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):St(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}({id:"textfield-".concat(e.id),required:e.isRequired,class:e.classNames?e.classNames.join(" "):"",title:e.title,placeholder:e.placeholder,onClick:e.onClick,type:"date"===e.inputType||"datetime"===e.inputType?"text":e.inputType,ref:e.inputRef,onInput:e.onInput,"data-type":e.inputType,max:e.max,min:e.min,step:e.step,onKeyDown:e.onKeyPress},e.ariaAttributes)))}function Nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function At(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?Nt(Object(a),!0).forEach((function(t){Ft(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Nt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}function Ft(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Rt(e){var t=Le.getState();return W.createElement("div",{id:"infocard-".concat(e.id)},W.createElement(Tt,{playbookType:e.playbookType,text:e.text,isMessageOnly:!0}),e.onEnterClick?W.createElement("form",{onSubmit:function(t){return t.preventDefault(),e.onSubmit&&e.onSubmit(),!1},ref:e.formRef},W.createElement("div",{class:"hb_input_container",ref:e.inputContainerRef},W.createElement(kt,{isRequired:!1,classNames:e.textFieldClassNames&&e.textFieldClassNames.length>0?["hb_input"].concat(Lt(e.textFieldClassNames)):["hb_input"],title:e.title,placeholder:e.placeholder,onClick:e.onClick,inputType:"date"===e.inputType||"datettime"===e.inputType?"text":e.inputType,inputRef:e.inputRef,onInput:e.onInput,onKeyPress:e.onKeyPress,id:"infocard-".concat(e.id),label:"",defaultValue:"",max:e.max,min:e.min,step:e.step,ariaAttributes:e.ariaAttributes}),e.isChat&&W.createElement("button",{type:"submit",class:"hb_input_button","aria-label":t?t.TEXT_ACCESSIBILITY_INFO_BUTTON:"",onClick:e.onSubmit},W.createElement("div",{class:"hb_input_button_icon"}))),e.children?e.children:""):W.createElement(W.Fragment,null))}function jt(e){var t=O(),n=O(),a=e.mutators||K(),r=function(){var e;n&&n.current&&(null===(e=n.current.querySelector(".hb_input_error"))||void 0===e||e.remove())},o=function(){var o,i,l,c,s;if(t.current&&t.current.firstChild){var u=t.current.querySelector("input");u.setCustomValidity("");var d=new RegExp(e.pattern,"gmi");u.validity.valid&&""!==(null===(o=u.value)||void 0===o?void 0:o.trim())&&d.test(u.value)?e.onEnterClick(u.value):(r(),null===(i=n.current)||void 0===i||i.appendChild(W.createElement("span",{class:"hb_input_error"},W.createElement("span",{class:"hb_input_alert hb_input_alert_color"}),W.createElement("span",{class:"hb_input_error_text"},e.error||e.title))),null===(c=null===(l=e.inputRef)||void 0===l?void 0:l.current)||void 0===c||c.addEventListener("hb_input_change",r),null===(s=a())||void 0===s||s.updatePrimaryAttr("disabled","true"))}},i=function(t){var o,i,l;n&&n.current&&(r(),null===(i=null===(o=e.inputRef)||void 0===o?void 0:o.current)||void 0===i||i.removeEventListener("hb_input_change",r),null===(l=a())||void 0===l||l.removePrimaryAttr("disabled")),e.onInput&&e.onInput(t)};switch(e.playbookType){case"liveStream":return W.createElement(Rt,At(At({},e),{},{formRef:n,isChat:!1,textFieldClassNames:["hb_cf_input"],inputContainerRef:t,onInput:i,inputRef:e.inputRef}),e.children,W.createElement(Et,{primaryFn:o,isPrimaryDisabled:!0,mutators:a}));default:return W.createElement(Rt,At(At({},e),{},{formRef:n,isChat:!0,inputContainerRef:t,onSubmit:o,onInput:i,inputRef:e.inputRef}),e.children)}}var Bt,Ht,Ut,Yt,Vt={};Bt=Vt,Ht="default",U},Y},Object.defineProperty(Bt,Ht,{get:Ut,set:Yt,enumerable:!0,configurable:!0});var qt=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],Xt={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"==typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandle},getWee},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},Gt={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordina},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},Wt=Gt,K},z}var Zrn=function(){},o},ln={D:rn,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:function(e,t){e.setHours((e.getHours()>=12?12:0)+parseFloat(t))},H:function(e,t){e.setHours(parseFloat(t))},J:function(e,t){e.setDate(parseFloat(t))},},},S:function(e,t){e.setSeconds(parseFloat(t))},},},Y:function(e,t){e.setFullYear(parseFloat(t))},},d:function(e,t){e.setDate(parseFloat(t))},},i:function(e,t){e.setMinutes(parseFloat(t))},j:function(e,t){e.setDate(parseFloat(t))},l:rn,m:function(e,t){e.setMonth(parseFloat(t)-1)},},},},w:rn,}},cn={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},sn={Z:function(e){return e.toISOString()},},},},H:function(e){return Kt(e.getHours())},},},},S:function(e){return Kt(e.getSeconds())},},},},d:function(e){return Kt(e.getDate())},},},j:function(e){return e.getDate()},},},},s:function(e){return e.getSeconds()},u:function(e){return e.getTime()},w:function(e){return e.getDay()},}},u},d}var m},f},hn={DAY:864e5}"function"!=typeof Object.assign&&(Object.assig});var y},g};function bn(e,t){var n={config:yn(yn({},Xt),_n.defaultConfig),l10n:Wt(n.config.showMonths>1||"dropdown"!==n.config.monthSelectorType)){var e;n.monthsDropdownContainer.tabIndex=-1,n.monthsDropdownContainer.innerHTML="";for(var t=0;t<12;t++)if(e=t,!(void 0!==n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&e<n.config.minDate.getMonth()||void 0!==n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()&&e>n.config.maxDate.getMonth())){var a=$t("option","flatpickr-monthDropdown-month");a.value=new Date(n.currentYear,t).getMonth().toString(),a.textContent=on(t,n.config.shorthandCurrentMonth,n.l10n),a.tabIndex=-1,n.currentMonth===t&&(a.selected=!0),n.monthsDropdownContainer.appendChild(a)}(e,t){if(void 0===t&&(t="flatpickr-day"),1===n.selectedDates.length&&(!e||e.classList.contains(t)&&!e.classList.contains("flatpickr-disabled"))){for(var a=e?e.dateObj.getTime():n.days.firstElementChild.dateObj.getTime(),r=n.parseDate(n.selectedDates[0],void 0,!0).getTime(),o=Math.min(a,n.selectedDates[0].getTime()),i=Math.max(a,n.selectedDates[0].getTime()),l=!1,c=0,s=0,u=o;u<i;u+=hn.DAY)k(new Date(u),!0)||(l=l||u>o&&u<i,u<r&&(!c||u>c)?c=u:u>r&&(!s||u<s)&&(s=u));Array.from(n.rContainer.querySelectorAll("*:nth-child(-n+"+n.config.showMonths+") > ."+t)).forEach}))eDate=dn({config:n.config,l10n:n.l10n}),n._handlers=[],n.pluginElements=[],n.loadedPlugins=[],n._bind=d,n._setHoursFromDate=c,n._positionCalendar=H,n.changeMonth=x,n.changeYear=M,n.clea},n.clos},n.onMouseOver=L,n._createElement=$t,n.createDay=v,n.destro},n.isEnabled=k,n.jumpToDate=m,n.updateValue=$,n.ope},n.redraw=U,n.se},n.setDat},n.toggl};var q={locale:[B,O],showMonths:[w,o,I],minDate:[m],maxDate:[m],positionElement:[W],clickOpens}],}"undefined"!=typeof HTMLElement&&"undefined"!=typeof HTMLCollection&&"undefined"!=typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return En(this,e)},HTMLElement.prototype.flatpick});var _};_n.defaultConfig={},_n.l10ns={en:yn({},Wt),default:yn({},Wt)},_n.localiz},_n.setDefault},_n.parseDate=dn({}),_n.formatDate=un({}),_n.compareDates=pn,"undefined"!=typeof jQuery&&void 0!==jQuery.fn&&(jQuery.fn.flatpick}),Date.prototype.fp_inc},"undefined"!=typeof window&&(window.flatpickr=_n);var Tn=_n;function Cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function wn(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?Cn(Object(a),!0).forEach((function(t){In(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Cn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}function In(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function On(e){var t=e.slots,n=e.onChoiceClick,a=e.localeText,r=e.locale;if(!n)return W.createElement(W.Fragment,null);var o,i,l,c,s,u=O(),d=O(),p=O(),m=O(),f=O(),h=O(),v=O(),y=t?Object.keys(t).sort():[],g=y&&y.length>0?y[0]:De().toISOString().split("T")[0],b=Me(De(),a,r),E=b.timezone,_=b.offset,T="https://npmcdn.com/flatpickr/dist/l10n/default.js";function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";if(d&&d.current&&d.current.firstChild&&!l){var n=g,a=y&&y.length>0?y[y.length-1]:"2100-12-31";e.enable&&e.enable.length>0&&(n=e.enable[0].from,a=e.enable[0].to),s=(0,Vt.default)(d.current.firstChild,{locale:t,defaultDate:g,minDate:n,maxDate:a,inline:!0,monthSelectorType:"static",onReady:function(){I(d,g),I(f,g),l=g},onChange:function(t,n){l=n,i="",!e.isChat&&l&&S(),I(d,n),F(u,!0),I(f,n),F(m,!0)},enable:e.enable?e.enable:y})}}function w(){var t,n;d&&d.current&&d.current.appendChild(W.createElement(L,null)),f&&f.current&&f.current.appendChild(W.createElement(L,null)),xe(T,"flatpickr-script",!1).then((function(){var e,t;d&&d.current&&(null===(e=d.current.querySelector(".hb_connection_indicator"))||void 0===e||e.remove()),f&&f.current&&(null===(t=f.current.querySelector(".hb_connection_indicator"))||void 0===t||t.remove()),C(c)})).catch((function(e){var t,n;console.log("unable to load locale calendar .....",e),d&&d.current&&(null===(t=d.current.querySelector(".hb_connection_indicator"))||void 0===t||t.remove()),f&&f.current&&(null===(n=f.current.querySelector(".hb_connection_indicator"))||void 0===n||n.remove()),C()})),u&&u.current&&u.current.classList.replace("hb_modal_close","hb_modal_open"),m&&m.current&&(null===(t=m.current)||void 0===t||t.classList.replace("hb_modal_open","hb_modal_close")),p&&p.current&&(null===(n=p.current)||void 0===n||n.classList.add("hb_chat_overlay")),s&&Array.isArray(s)&&s.length>0&&s.setDate(l||g),e.forwardInstance&&s&&e.forwardInstance(s,D)}function I(n,r){if((o=t&&t[r]&&t[r].length>0?t[r]:e.defaultTimeSlots)&&o.length>0){var i="(".concat(a.TEXT_ANTE_MERIDIEM,"|").concat(a.TEXT_POST_MERIDIEM,")"),l=be.substring(0,be.length-2)+i+be.substring(be.length-1),c=new RegExp(l),s=o.map((function(e){if(c.test(e))return W.createElement("button",{type:"button",class:"hb_time_slots",onClick:function(t){return D(e,t)}},e);var t=-1!==e.indexOf(" ")?e.split(" "):[],n=t&&t.length>0?"am"===t[1].toLowerCase()?a.TEXT_ANTE_MERIDIEM:a.TEXT_POST_MERIDIEM:"";return W.createElement("button",{type:"button",class:"hb_time_slots",onClic}},t&&t.length>0?"".concat(t[0]," ").concat(n):e)}));if(n&&n.current&&n.current.lastChild)n.current.lastChild.innerHTML="";s.forEach((function(e){n&&n.current&&n.current.lastChild&&n.current.lastChild.appendChild(e)}))}}function x(){var t;u&&u.current&&u.current.classList&&u.current.classList.replace("hb_modal_open","hb_modal_close"),m&&(null===(t=m.current)||void 0===t||t.classList.replace("hb_modal_open","hb_modal_close")),p&&p.current&&p.current.classList&&p.current.classList.remove("hb_chat_overlay"),F(m,!0),F(u,!0),e.onModalClose&&e.onModalClose()}function D(t,n){var a,r;if(d&&d.current&&d.current.querySelectorAll(".hb_time_slots").forEach((function(e){e.classList.remove("selected")})),u&&(null===(a=u.current)||void 0===a?void 0:a.classList.contains("hb_modal_open"))&&(F(u,!1),F(m,!0)),f&&f.current&&f.current.querySelectorAll(".hb_time_slots").forEach})),m&&(null===(r=m.current)||void 0===r?void 0:r.classList.contains("hb_modal_open"))&&(F(m,!1),F(u,!0)),n)n.target.classList.add("selected");else if(d&&d.current){var o=-1;if(Array.from(d.current.querySelectorAll(".hb_time_slots")).some((function(e){return e.innerHTML===t&&e.classList.add("selected"),o++,e.innerHTML===t})),-1!==o&&d.current.lastChild){var c=d.current.children.length,s=d.current.children[c-1].children[o].offsetTop;d.current.children[c-1].scrollTop=s-100}}i=t,!e.isChat&&l&&i&&S()}function S(){n({date:l,time:i,timezone:E}),x()}function M(){if(l){var e=l.split("-"),t=De(l),n=Se(r)||"en-US",a=t.toLocaleDateString(n,{month:"long"});return"".concat(a.substring(0,1).toUpperCase()).concat(a.substring(1)," ").concat(parseInt(e[2],10)>0?e[2]:"0".concat(e[2])," ").concat(e[0])}return""}function k(e){var t=null==s?void 0:s.currentMonth,n=null==s?void 0:s.currentYear,a=null==s?void 0:s.utils.getDaysInMonth(t,n),r=l?parseInt(l.split("-")[2],10):0,o=0;return r&&a&&(e<0?1===r?(void 0!==t&&n&&0===t?(null==s||s.changeYear(n-1),null==s||s.changeMonth(11,!1)):null==s||s.changeMonth(-1),o=(a=null==s?void 0:s.utils.getDaysInMonth(s.currentMonth,s.currentYear))||1):r<=a&&(o=r-1):e>0&&(r===a?(void 0!==t&&11===t&&n?(null==s||s.changeYear(n+1),null==s||s.changeMonth(0,!1)):null==s||s.changeMonth(1),o=1):r<a&&(o=r+1)),n=null==s?void 0:s.currentYear,t=null==s?void 0:s.currentMonth),void 0!==t?"".concat(n,"-").concat(t+1,"-").concat(o):l}function N(){var e=y?y.findIndex((function(e){return e===l})):-1;l=-1!==e?y.length>e+1?y[e+1]:l:k(1),s&&s.setDate(l),I(f,l),F(m,!0),h.current&&(h.current.children[0].innerHTML=M())}function A(){var e=y?y.findIndex})):-1;l=-1!==e?e-1>-1?y[e-1]:l:k(-1),s&&s.setDate(l),I(f,l),F(m,!0),h.current&&(h.current.children[0].innerHTML=M())}function F(t,n){var a=t&&t.current?t.current.querySelector(".hb-btn-confirm"):null;"date"!==e.calendarType&&a&&(n?a.classList.contains("hb_disabled")||a.classList.add("hb_disabled"):a.classList.remove("hb_disabled"))}r&&(c=r.length>2&&!r.includes("zh-tw")?r.substring(0,2).toLowerCase():r.toLowerCase(),T="https://npmcdn.com/flatpickr/dist/l10n/".concat(c="en"===(c="zh-tw"===r?"zh_tw":c)?"default":c,".js"));var },P=function(){return W.createElement("div",null,W.createElement("div",{className:"hb_date_cheveron_left",onClick:A},W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-chevron-left",viewBox:"0 0 16 16"},W.createElement("path",{"fill-rule":"evenodd",d:"M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"}))),W.createElement("div",{ref:h,className:"hb_appointment_date"},W.createElement("span",null,M())),W.createElement("div",{className:"hb_date_cheveron_right",onClick:N},W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-chevron-right",viewBox:"0 0 16 16"},W.createElement("path",{"fill-rule":"evenodd",d:"M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"}))))},R=function(){return W.createElement("div",{className:"hb_question"},W.createElement(Xe,{classNames:e.showButton?["hb_choice"]:["hb_choice_hide"],clickFn:w,buttonRef:e.buttonRef,text:a.TEXT_SCHEDULE_MEETING}))},j=function(t){var n=y&&y.length>0||e.defaultTimeSlots&&e.defaultTimeSlots.length>0;return t.isMobile?n?W.createElement("div",{className:"hb_appointment_body hb_appointment_modal_mobile",ref:f},W.createElement("div",{className:"hb_date_switcher"}),W.createElement("div",{className:"hb_appointment_timezone"},a.TEXT_TIMEZONE," ",W.createElement("b",null,E)," (",_,")"),W.createElement("div",{className:"hb_calendar-timeslots"})):W.createElement(W.Fragment,null):W.createElement("div",{className:"hb_appointment_body",ref:d},W.createElement("div",{className:"hb_calendar-picker",id:"flatpickr"}),n&&W.createElement("div",{className:"hb_calendar-timeslots hb_appointment_modal_desktop"}))},B=function(e){return W.createElement("div",{className:"hb_appointment_header"},W.createElement("span",{className:"hb_appointment_header-text"},e.headerText),W.createElement("div",{className:"hb_appointment_modal_close",onClick:e.clickFn}),e.children)};if("date"===e.calendarType)return W.createElement((function(){return W.createElement(W.Fragment,null,W.createElement("div",{ref:p,className:""}),W.createElement("div",{className:"hb_question"},W.createElement(Xe,{classNames:["hb_choice_hide"],clickFn:w,buttonRef:e.buttonRef,text:a.TEXT_SCHEDULE_MEETING})),W.createElement("div",{id:e.id,ref:u,className:"hb_appointment_modal hb_calendar_modal hb_appointment_modal_top hb_modal_close",role:"dialog","aria-modal":"true","aria-label":e.localeText?e.localeText.TEXT_ACCESSIBILITY_DATE:""},W.createElement("div",{className:"hb_calendar_body",ref:d},W.createElement("div",{className:"hb_calendar-picker",id:"flatpickr"})),W.createElement("span",{className:"hb_calendar_action_buttons"},W.createElement(Xe,{classNames:["hb-btn-appointment","hb-btn-cancel"],clickFn:x,text:a.BUTTON_CANCEL_TEXT}),W.createElement(Xe,{classNames:["hb-btn-appointment","hb-btn-confirm"],clickFn:S,text:a.BUTTON_CONFIRM_TEXT}))))}),null);if("body"===e.calendarType)return W.createElement("div",{ref:v},W.createElement(R,null),W.createElement(j,{isMobile:!1}),W.createElement(j,{isMobile:!0}));return W.createElement(W.Fragment,null,W.createElement("div",{ref:p,className:""}),W.createElement("div",{className:"hb_calendar"},W.createElement(R,null),W.createElement("div",{id:e.id,ref:u,className:"hb_appointment_modal ".concat(e.showButton?"":"hb_appointment_modal_top"," hb_modal_close"),role:"dialog","aria-modal":"true","aria-label":e.localeText?e.localeText.TEXT_ACCESSIBILITY_DATETIME:"",onKeyDown:function(e){e.stopPropagation(),e.code&&e.code.toLowerCase().includes("escape")&&(null==x||x())}},W.createElement(B,{headerText:"".concat(e.calendarHeading," ").concat(E),clickFn:x},W.createElement("span",{className:"hb_appointment_header-buttons hb_appointment_modal_desktop"},W.createElement(Xe,{classNames:["hb-btn-appointment","hb-btn-cancel"],clickFn:x,text:a.BUTTON_CANCEL_TEXT}),W.createElement(Xe,{classNames:["hb-btn-appointment","hb_disabled","hb-btn-confirm"],clickFn:S,text:a.BUTTON_CONFIRM_TEXT}))),W.createElement(j,{isMobile:!1}),W.createElement("span",{className:"hb_appointment_header-buttons hb_appointment_modal_mobile"},W.createElement(Xe,{classNames:["hb-btn-appointment","hb_disabled","hb-btn-cancel"],text:a.BUTTON_BACK_TEXT}),W.createElement(Xe,{classNames:["hb-btn-appointment","hb-btn-confirm"],clickFn:function(){var e,t;u&&(null===(e=u.current)||void 0===e||e.classList.replace("hb_modal_open","hb_modal_close")),m&&(null===(t=m.current)||void 0===t||t.classList.replace("hb_modal_close","hb_modal_open")),f.current&&f.current.children[0].appendChild(W.createElement(P,null))},text:a.BUTTON_NEXT_TEXT}))),W.createElement("div",{className:"hb_appointment_modal_mobile"},W.createElement("div",{ref:m,className:"hb_appointment_modal hb_modal_close"},W.createElement(B,{headerText:e.timeslotHeading,clickFn:x}),W.createElement(j,{isMobile:!0}),W.createElement("span",{className:"hb_appointment_header-buttons hb_appointment_modal_mobile"},W.createElement(Xe,{classNames:["hb-btn-appointment","hb-btn-cancel"],clickFn:function(){var e;u&&u.current&&u.current.classList&&u.current.classList.replace("hb_modal_close","hb_modal_open"),m&&(null===(e=m.current)||void 0===e||e.classList.replace("hb_modal_open","hb_modal_close")),f&&f.current&&f.current.lastChild&&(f.current.lastChild.innerHTML="",I(f,l),F(m,!0),f.current.children[0].removeChild(f.current.children[0].children[0]))},text:a.BUTTON_BACK_TEXT}),W.createElement(Xe,{classNames:["hb-btn-appointment","hb_disabled","hb-btn-confirm"],clickFn:S,text:a.BUTTON_CONFIRM_TEXT}))))))}function xn(e){var t=Le.getState();switch(e.playbookType){case"liveStream":return W.createElement(W.Fragment,null,W.createElement(On,wn(wn({},e),{},{isChat:!1,openCalendar:!0,calendarType:"body",showButton:!1})),e.showButtonGroup&&W.createElement(Et,{primaryFn:e.primaryFn,primaryLabel:t.BUTTON_CONFIRM_TEXT,isPrimaryDisabled:!0,mutators:e.mutators},W.createElement("span",{class:"hb_input_error hb_slot_error",ref:e.errorRef},W.createElement("span",{class:"hb_input_alert hb_input_alert_color"}),W.createElement("span",{class:"hb_input_error_text"},t.ERROR_SELECTED_SLOT_NOT_AVAILABLE))));default:return W.createElement(On,wn(wn({},e),{},{isChat:!0,showButton:e.showButton}))}}function Dn(e){for(var t,n,a=O(),r=e.buttonRef||O(),o=K(),i=function(e){(e.type&&e.type.toLowerCase().includes("click")||e.code&&e.code.toLowerCase().includes("arrow"))&&(r&&r.current&&r.current.click(),a&&a.current&&(a.current.ariaExpanded="true"))},l=[],c=0;c<24;c++){var s=c;c<12?(s=0===c?12:c,l.push("".concat(s,":00 ").concat(e.localeText.TEXT_ANTE_MERIDIEM)),l.push("".concat(s,":30 ").concat(e.localeText.TEXT_ANTE_MERIDIEM))):(s=c-12==0?12:c-12,l.push("".concat(s,":00 ").concat(e.localeText.TEXT_POST_MERIDIEM)),l.push("".concat(s,":30 ").concat(e.localeText.TEXT_POST_MERIDIEM)))}return W.createElement(W.Fragment,null,W.createElement("div",{class:"dialog"===e.playbookType?"hb_chat_server":""},W.createElement(jt,{title:e.title,text:e.text,onEnterClick:e.onEnterClick,inputRef:a,pattern:e.pattern,inputType:e.inputType,placeholder:e.placeholder,onClick:i,onInput:function(a){var r,i=new RegExp(ye),l=Ne(ge,e.localeText),c=new RegExp(l);if(i.test(a.target.value)){var s=ke(a.target.value);t.setDate(s,!0)}if(c.test(a.target.value)){var u=ke(a.target.value);t.setDate(u.split("T")[0],!0);var d=a.target.value.split(",")[1].trim();n(d,"")}null===(r=o())||void 0===r||r.removePrimaryAttr("disabled")},onKeyPress:i,inputIcon:!0,id:e.id,textFieldClassNames:e.textFieldClassNames,hideFrame:e.hideFrame,playbookType:e.playbookType,ariaAttributes:{role:"combobox","aria-expanded":"false","aria-haspopup":"dialog","aria-controls":"calendar-".concat(e.id)},mutators:o})),W.createElement(xn,{id:"calendar-".concat(e.id),onChoiceClick:function(e){var t;if(a&&a.current&&e.date){var n=e.date.split("-");a.current.value="".concat(n[2],"-").concat(n[1],"-").concat(n[0]).concat(e.time?", ".concat(e.time):""),a.current.focus();var r=new Event("hb_input_change",{});a.current.dispatchEvent(r),a.current.ariaExpanded="false",null===(t=o())||void 0===t||t.removePrimaryAttr("disabled")}},enable:[{from:"1901-01-01",to:"2100-12-31"}],defaultTimeSlots:"date"===e.inputType?[]:l,showButton:e.showOpenCalendarButton,showButtonGroup:!1,buttonRef:r,calendarType:"dialog"===e.playbookType?e.inputType:"body",calendarHeading:e.calendarHeading,timeslotHeading:e.timeslotHeading,forwardInstanc},localeText:e.localeText,locale:e.locale,playbookType:e.playbookType,onModalClos}}))}function Sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Mn(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?Sn(Object(a),!0).forEach((function(t){kn(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Sn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}function kn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,function Fn(e){var t=O(),n=O(),a=O(),r=e.pickerRef,o=e.formRef,i=!1,l=!1,c=!1,s="",u=function(){r&&r.current&&r.current.classList.toggle("hb_picker_focused")},d=function(e){e.code.toLowerCase().includes("arrow")&&e.preventDefault()},p=function(){if(n.current){var e=n.current.closest(".hb_chatbody");null==e||e.addEventListener("scroll",(function t(){h(!0),null==e||e.removeEventListener("scroll",t)}))}},m=function(e){n.current&&n.current.parentElement&&n.current.parentElement.parentElement&&n.current.parentElement.parentElement.parentElement&&(!i&&e?(n.current.parentElement.parentElement.parentElement.addEventListener("keydown",d),i=!0):i&&!e&&(n.current.parentElement.parentElement.parentElement.removeEventListener("keydown",d),i=!1))},f=function(){var e;if(n.current&&t.current&&r.current){var a,o=window.innerHeight,i=t.current.getBoundingClientRect(),l=i.height,c=i.y,s=r.current.getBoundingClientRect(),u=s.y,d=s.height,p=!!(u&&l&&o)&&u+d+l>o;p&&t.current.classList.add("hb_picker_top"),a=p?u-c+d:c-u-d,null===(e=t.current)||void 0===e||e.setAttribute("style","bottom:"+a+"px")}},h=function(e){var t;if((!e||c)&&(n.current&&n.current.parentElement&&n.current.parentElement.parentElement&&n.current.parentElement.parentElement.parentElement)){var a=n.current.parentElement.parentElement.parentElement;c?(a.lastChild&&a.removeChild(a.lastChild),a.lastChild&&(c=!1),r.current&&(r.current.children[0].ariaExpanded="false")):(a.appendChild(W.createElement(E,null)),c=!0,f(),m(!0),l||(null===(t=o.current)||void 0===t||t.addEventListener("keydown",(function(e){e.code.toLowerCase().includes("enter")&&e.preventDefault()})),l=!0),p(),r.current&&(r.current.children[0].ariaExpanded="true"))}},v=function(e){var n=t.current?t.current.children[0]:"",a=n?Array.from(n.children):"",r=-1,o=-1;if(a&&a.length>0){var i,l=Nn(a);try{for(l.s();!(i=l.n()).done;){var c=i.value,s=c.getAttribute("id")?c.getAttribute("id"):"",u=s&&-1!==s.indexOf("_")?parseInt(s.substring(s.indexOf("_")+1),10):-1;if(u!==e){var d=c?c.children.length:0,p=c&&d>0?c.children[d-1].getAttribute("class"):"";p&&p.includes("hb_picker_item_selected")&&(r=u);var m=c?c.getAttribute("class"):"";m&&m.includes("hb_picker_item_searched")&&(o=u)}}}catch(e){l.e(e)}finally{l.f()}}return{searchedIndex:o,selectedIndex:r}},y=function(e,n){if(-1!==e){var a=v(e),r=a.selectedIndex,o=a.searchedIndex,i=t.current?t.current.children[0]:"";if(-1!==r&&n){var l=i?i.children[r]:"";l&&l.lastChild&&(l.ariaSelected="false"),l&&l.lastChild&&l.removeChild(l.lastChild)}if(-1!==o){var c=i?i.children[o]:"";c&&c.classList.remove("hb_picker_item_searched")}}},g=function(e){var n=-1;if(e.type&&e.type.toLowerCase().includes("click")){h(!1);var o=v(),i=o.searchedIndex,l=o.selectedIndex;-1===i&&(n=-1===l?0:l)}else if(e.code&&e.code.toLowerCase().includes("arrow")){!c&&h(!1);var s=v(),u=s.searchedIndex,d=s.selectedIndex,p=t.current?t.current.children[0]:"",f=p?Array.from(p.children):"";(n=-1===u?-1===d?0:d:e.code.toLowerCase().includes("up")?u-1:u+1)<0?n=0:n>=f.length&&(n=f.length-1)}else if(e.code&&e.code.toLowerCase().includes("enter")){var g=v().searchedIndex;-1!==g&&b(g),h(!0),m(!0)}else e.code&&e.code.toLowerCase().includes("tab")?(a.current&&(a.current.autofocus=!0),h(!0)):e.code&&e.code.toLowerCase().includes("escape")&&h(!0);!function(e){if(-1!==e&&t.current&&t.current.firstChild){var n=t.current.children[0].children[e].offsetTop;t.current.scrollTop=n,t.current.children[0].children[e].classList.add("hb_picker_item_searched"),r.current&&r.current.children[0].setAttribute("aria-activedescendant",t.current.children[0].children[e].id)}y(e,!1)}(n)},b=function(n){var a,o=t.current?t.current.children[0]:"",i=o?o.children[n].children[0].dataset.value:"";if(r&&r.current&&i&&(r.current.children[0].value=i),i&&(null===(a=r.current)||void 0===a||a.children[0].removeAttribute("style")),o){var l=o.children[n].children.length,c=o.children[n].children[l-1].getAttribute("class");(null==c?void 0:c.includes("hb_picker_item_selected"))||(o.children[n].appendChild(W.createElement("div",{class:"hb_picker_item_selected"})),o.children[n].ariaSelected="true",s=i)}y(n,!0),m(!1),e.removeErrorText&&e.removeErrorText()};window.onclick=function(e){var t=e.composedPath();if(t&&t.length>0){var n=t[0];n.classList.contains("hb_picker")||n.classList.contains("hb_picker_input")||n.classList.contains("hb_picker_down_icon")||h(!0)}};var E=function(n){var a=r.current&&r.current.firstChild?r.current.children[0].value:"",o=n.items?n.items.length>0?n.items:[""]:a?e.options.filter((function(e){return e.startsWith(a)})):e.options;return o&&0===o.length&&o.push(""),W.createElement("div",{class:"hb_picker_popover hb_picker_show ".concat(e.pickerPopoverClassNames&&e.pickerPopoverClassNames.length>0?e.pickerPopoverClassNames.join(" "):""),ref:t},W.createElement("ul",{class:"hb_picker_menu",id:"hb_picklist",role:"listbox","aria-label":e.localeText?e.localeText.TEXT_ACCESSIBILITY_PICKLIST:""},o.map((function(t,n){return W.createElement("li",{class:"hb_picker_menu_item",id:"item_".concat(n),onClick:function(e){return t?b(n):""},onKeyDow},role:"option","aria-label":t||e.localeText.TEXT_NO_MATCH_FOUND,"aria-selected":s&&t.startsWith(s)?"true":"false"},W.createElement("span",{class:"hb_picker_menu_item_label","data-value":t||""},t||e.localeText.TEXT_NO_MATCH_FOUND),s&&t.startsWith(s)&&W.createElement("div",{class:"hb_picker_item_selected"}))}))))};return W.createElement("div",{ref:n},W.createElement(Tt,{text:e.label,playbookType:e.playbookType,isMessageOnly:!0}),W.createElement("form",{ref:o,onSubmi}},W.createElement("div",{class:"hb_input_container"},W.createElement("div",{ref:r,class:"hb_picker"},W.createElement("input",{type:"text",onClick:g,class:"hb_picker_input",onKeyDown:g,onInput:function(){!c&&h(!1);var a=r.current&&r.current.firstChild?r.current.children[0].value:"";""===a&&(s=""),function(e){var a;if(e&&n.current&&n.current.parentElement&&n.current.parentElement.parentElement&&n.current.parentElement.parentElement.parentElement){var r=n.current.parentElement.parentElement.parentElement;c&&(null===(a=t.current)||void 0===a||a.remove(),r.appendChild(W.createElement(E,{items:e})),f())}}(e.options.filter}))),e.removeErrorText&&e.removeErrorText()},placeholder:e.placeholder,"data-type":"picker",title:e.localeText.ERROR_PICKLIST,role:"combobox","aria-expanded":"false","aria-activedescendant":"","aria-controls":"hb_picklist",onFocus:u,onBlur:u}),W.createElement("div",{class:"hb_picker_down_icon",onClick:g,onKeyDown:g})),e.isChat?W.createElement(Xe,{clickFn:e.submitFn,keyDownFn:e.submitFn,buttonRef:a,classNames:["hb_input_button"],ariaLabel:e.localeText?e.localeText.TEXT_ACCESSIBILITY_INFO_BUTTON:""},W.createElement("div",{class:"hb_input_button_icon"})):""),e.children))}function Ln(e){var t=O(),n=O(),a=function(){var e;n&&n.current&&(null===(e=n.current.querySelector(".hb_input_error"))||void 0===e||e.remove())},r=function(r){var o,i=t.current&&t.current.firstChild?t.current.children[0].value:"";-1===e.options.findIndex}))&&t.current&&(t.current.children[0].value="",i=""),t.current&&t.current.firstChild&&(t.current.children[0].setCustomValidity(""),t.current.children[0].validity.valid&&""!==t.current.children[0].value||(a(),null===(o=n.current)||void 0===o||o.appendChild(W.createElement("span",{class:"hb_input_error"},W.createElement("span",{class:"hb_input_alert"}),e.localeText.ERROR_PICKLIST)))),n.current&&!n.current.reportValidity()||r&&r.code&&!r.code.toLowerCase().includes("enter")||i&&e.onOptionSelect(i)};switch(e.playbookType){case"liveStream":return W.createElement(Fn,Mn(Mn({},e),{},{pickerClassNames:["hb_cf_picker"],pickerPopoverClassNames:["hb_cf_popover"],isChat:!1,pickerRef:t,formRef:n,removeErrorText:a}),W.createElement(Et,{primaryFn:r}));default:return W.createElement(Fn,Mn(Mn({},e),{},{isChat:!0,pickerRef:t,formRef:n,submitFn:r,removeErrorText:a}))}}function Pn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Rn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.infoInputType="^.{1,}$",this.max=2147483647,this.min=0,this.api=t}var t,n,a;return t=e,a=[{key:"handlesMessage",value:function(e,t){return"info"===e}}],(n=[{key:"handleMessage",value:function(e,t,n,a){var r,o,i,l,c=this,s=e;if("info_answer"===s.type){if(this.textInfoId&&this.api.removeFromChatFrame(this.textInfoId),s.payload&&s.payload.label?this.api.addToChatFrame({style:"server",content:W.createElement("div",null,W.createElement("div",{className:"bot_2_avatar"},W.createElement("div",{className:"bot_2"})),W.createElement("div",{class:"hb_message"},Oe(s.payload.label)))}):this.labelText&&this.api.addToChatFrame({style:"server",content:W.createElement("div",null,W.createElement("div",{className:"bot_2_avatar"},W.createElement("div",{className:"bot_2"})),W.createElement("div",{class:"hb_message"},Oe(this.labelText)||n.LABEL_EMAIL))}),s.payload&&s.payload.inputVal){var u="date"===s.payload.type||"datetime"===s.payload.type?function(e,t){try{var n=-1!==e.indexOf("T")?e.split("T"):[e],a=n&&n.length>0?n[0].trim().split("-"):"",r=a&&a.length>0?"".concat(a[2],"-").concat(a[1],"-").concat(a[0]):n[0],o=n&&n.length>1?n[1].trim().split(":"):[],i=o&&o.length>0?"".concat(parseInt(o[0],10)>12?parseInt(o[0],10)-12:(parseInt(o[0],10)+11)%12+1,":").concat(o[1]," ").concat(parseInt(o[0],10)>11?t.TEXT_POST_MERIDIEM:t.TEXT_ANTE_MERIDIEM):"";return"".concat(r).concat(i?", ".concat(i):"")}catch(e){return console.log(e),""}}(s.payload.inputVal,n):s.payload.inputVal;this.api.addToChatFrame({style:"client",content:W.createElement("div",{class:"hb_answer"},u)})}}else{var d=e,p=function(a){var r;if("string"!=typeof a){var o=a.currentTarget.querySelector(".hb_input");r=d.payload&&"email"===d.payload.type?o.value.toLowerCase():o.value,r=!d.payload||"date"!==d.payload.type&&"datetime"!==d.payload.type?o.value:ke(o.value)}else r=d.payload&&"email"===d.payload.type?a.toLowerCase():a,r=!d.payload||"date"!==d.payload.type&&"datetime"!==d.payload.type?a:ke(a);var i={id:e.id,type:"info_answer",sender:"client",payload:{label:d.payload&&"boolean"!==d.payload.type?d.payload.text:"",type:d.payload?d.payload.type:"",inputVal:r},playbookType:e.playbookType};"liveStream"!==e.playbookType&&c.handleMessage(i,t,n),c.api.removeFromChatFrame(c.textInfoId),c.api.sendMessage(i)};if(d.payload&&"boolean"===d.payload.type)"liveStream"!==e.playbookType&&this.api.addToChatFrame({style:"server",content:W.createElement(Tt,{text:d.payload?d.payload.text:"",playbookType:e.playbookType})}),this.textInfoId=this.api.addToChatFrame({content:W.createElement(Ot,{text:d.payload?d.payload.text:"",choices:d.payload?d.payload.choices:[],onChoiceClick:p,hideFrame:function(){return c.api.showChatFrame(!1)},playbookType:e.playbookType,id:t}),style:"unformatted"});else if(d.payload&&d.payload.pickList&&d.payload.pickList.length>0)this.labelText=d.payload?d.payload.text:"",this.textInfoId=this.api.addToChatFrame({style:"liveStream"===e.playbookType?"unformatted":"server",content:W.createElement(Ln,{id:t,playbookType:e.playbookType,label:d.payload.text,placeholder:d.payload.placeholder,options:d.payload.pickList||[],onOptionSelect:p,localeText:n,hideFrame:function(){return c.api.showChatFrame(!1)}})});else if(d.payload&&"datetime"===d.payload.type||"date"===d.payload.type){this.labelText=d.payload?d.payload.text:"",d.payload&&"date"===d.payload.type?(this.infoInputType=ye,this.titleMsg=n.ERROR_DATE):d.payload&&"datetime"===d.payload.type&&(this.infoInputType=Ne(ge,n),this.titleMsg=n.ERROR_DATETIME);var m=O();this.textInfoId=this.api.addToChatFrame({content:W.createElement(Dn,{text:d.payload.text,placeholder:d.payload.placeholder,onEnterClick:p,title:this.titleMsg,inputType:d.payload.type,pattern:this.infoInputType,calendarHeading:"date"===d.payload.type?n.TEXT_SELECT_DATE_IN_TIMEZONE:n.TEXT_SELECT_DATE_N_TIME_IN_TIMEZONE,timeslotHeading:n.TEXT_SELECT_TIME_IN_TIMEZONE,showOpenCalendarButton:!1,localeText:n,locale:a||"en-US",id:t,textFieldClassNames:"liveStream"===e.playbookType?["hb_cf_input"]:void 0,hideFrame:function(){return c.api.showChatFrame(!1)},buttonRef:m,playbookType:e.playbookType}),style:"unformatted"}),"liveStream"===e.playbookType&&(null===(r=m.current)||void 0===r||r.click())}else if(this.labelText=d.payload?d.payload.text:"",d.payload&&"phone"===d.payload.type?(this.infoInputType="^[0-9-+\\s()]{10,18}$",this.titleMsg=n.ERROR_PHONE):d.payload&&"email"===d.payload.type?(this.infoInputType="".concat(he).concat(ve),this.titleMsg=n.ERROR_EMAIL,(null===(o=d.payload.metadata)||void 0===o?void 0:o.restrictedEmailDomains)&&(this.infoInputType="".concat(he).concat(d.payload.metadata.restrictedEmailDomains.map((function(e){return"(?!".concat(e,")")})).join("")).concat(ve),this.titleMsg=n.ERROR_BUSINESS_EMAIL),d.payload.type="text"):d.payload&&"integer"===d.payload.type?(this.titleMsg=n.ERROR_INTEGER,this.infoInputType="[0-9]+"):d.payload&&"float"===d.payload.type&&(this.titleMsg=n.ERROR_FLOAT),d.payload&&this.infoInputType){var f="integer"===d.payload.type||"float"===d.payload.type?"number":d.payload.type,h="integer"===d.payload.type?1:1e-6,v="integer"===d.payload.type?function(e){return/[0-9]/.test(e.key)||"Enter"===e.key}:void 0;this.titleMsg=this.titleMsg||n.ENTER_MESSAGE+(i=d.payload.text||d.payload.placeholder,(l=(new DOMParser).parseFromString(i,"text/html")).documentElement.textContent||l.documentElement.innerText);var y=this.titleMsg||n.ERROR_REQUIRED;this.textInfoId=this.api.addToChatFrame({style:"liveStream"===e.playbookType?"unformatted":"server",content:W.createElement(jt,{text:d.payload.text,placeholder:d.payload.placeholder,onEnterClick:p,title:this.titleMsg,error:y,inputType:f,pattern:this.infoInputType,max:this.max,min:this.min,step:h,onKeyPress:v,id:t,playbookType:e.playbookType,textFieldClassNames:"liveStream"===e.playbookType?["hb_cf_input"]:void 0,hideFrame:function(){return c.api.showChatFrame(!1)}})})}}}},{key:"handleReplay",value:function(e,t,n,a){var r=this;e.forEach}))}}])&&Pn(t.prototype,n),a&&Pn(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Bn(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?jn(Object(a),!0).forEach((function(t){Hn(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):jn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}function Hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Un(e){return W.createElement("div",null,W.createElement(Tt,{text:e.localeText.TEXT_SCHEDULE_APPOINTMENT,playbookType:e.playbookType,isMessageOnly:!0},W.createElement("div",{class:"calandar-profile-container ".concat(e.calendarAvatarClassnames&&e.calendarAvatarClassnames.length>0?e.calendarAvatarClassnames.join(" "):"")},e.avatar&&W.createElement("img",{width:"50",height:"50",alt:e.localeText?e.localeText.TEXT_ALT_CALENDAR_AVATAR_:"",src:e.avatar}),e.profile&&e.profile.name&&W.createElement("div",null,e.profile.name))))}function Yn(e){switch(e.playbookType){case"liveStream":return W.createElement(Un,Bn(Bn({},e),{},{isChat:!1,calendarAvatarClassnames:["hb_cf_calendar_avatar"]}));default:return W.createElement(Un,Bn(Bn({},e),{},{isChat:!0}))}}function Vn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var qn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=t}var t,n,a;return t=e,a=[{key:"handlesMessage",value:function(e,t){return e===de.CALENDAR_INFO||e===de.EMAIL_RESPONSE||e===de.EMAIL_REQUEST||e===de.CALENDAR_GET||e===de.BOOKING_REQUEST||e===de.BOOKING_RESPONSE}}],(n=[{key:"handleMessage",value:function(e,t,n,a){var r,o,i,l,c,s,u,d,p,m=this,f=de.BOOKING_REQUEST,h=de.BOOKING_RESPONSE,v=de.CALENDAR_INFO,y=de.EMAIL_REQUEST,g=de.EMAIL_RESPONSE;switch(e.type){case f:var b={date:e.payload.date||"",time:e.payload.time||""};this.slotInfo=b;break;case h:if(e.payload.isSuccess){if(this.slotInfo&&(null===(r=this.slotInfo)||void 0===r?void 0:r.date)&&this.slotInfo.time){var E,_=new Date("".concat(null===(o=this.slotInfo)||void 0===o?void 0:o.date.replace(/-/g,"/")," ").concat(null===(i=this.slotInfo)||void 0===i?void 0:i.time)),T=Me(_,n,a).timezone,C=Se(a)||"en-US",w=this.api.addToChatFrame({style:"liveStream"===e.playbookType?"unformatted":"client",content:W.createElement("div",{class:"hb_answer"},n.TEXT_MEETING_SCHEDULE," ",W.createElement("b",null,_.toLocaleDateString(C,_e)," ",T))});if("liveStream"===e.playbookType)E=this.api.addToChatFrame({style:"liveStream"===e.playbookType?"unformatted":"server",content:W.createElement(Et,{onlyClose:e.isFinalMessage,closeFn:function(){m.api.showChatFrame(!1)},primaryFn:function(){m.api.removeFromChatFrame(w),m.api.removeFromChatFrame(E),m.api.sendMessage({})}})})}}else this.handleCalendarError(e,t,n,a);break;case y:var I="".concat(he).concat(ve),O=n.ERROR_EMAIL,x=e.payload.restrictedEmailDomains;x&&(I="".concat(he).concat(x.map})).join("")).concat(ve),O=n.ERROR_BUSINESS_EMAIL),this.textInfoId=this.api.addToChatFrame({style:"liveStream"===e.playbookType?"unformatted":"server",content:W.createElement(jt,{id:t,text:"<p>".concat(n.LABEL_EMAIL,"</p>"),title:O,pattern:I,playbookType:e.playbookType,textFieldClassNames:"liveStream"===e.playbookType?["hb_cf_input"]:void 0,placeholder:"email@company.com",onEnterClick:function(r){var o="string"!=typeof r?r.currentTarget.querySelector(".hb_input"):r;m.emailAddress=o?o.toLowerCase():o,m.textInfoId&&m.api.removeFromChatFrame(m.textInfoId);var i={id:e.id,sender:"client",type:g,payload:{type:"email",inputVal:m.emailAddress}};m.api.sendMessage(i),"liveStream"!==e.playbookType&&m.handleMessage(i,t,n,a)},inputType:"email",hideFrame:function(){return m.api.showChatFrame(!1)}})});break;case g:this.textInfoId&&this.api.removeFromChatFrame(this.textInfoId),this.emailAddress=e.payload.inputVal,this.api.addToChatFrame({style:"server",content:W.createElement("div",null,W.createElement("div",{className:"bot_2_avatar"},W.createElement("div",{className:"bot_2"})),W.createElement("div",{class:"hb_message"},n.LABEL_EMAIL))}),this.api.addToChatFrame({style:"client",content:W.createElement("div",{class:"hb_answer"},e.payload.inputVal)});break;case v:e.payload.isSuccess?(this.profileCardId=this.api.addToChatFrame({style:"liveStream"===e.playbookType?"unformatted":"server",content:W.createElement(Yn,{avatar:null!==(u=null===(s=null===(c=null===(l=e.payload)||void 0===l?void 0:l.response)||void 0===c?void 0:c.profile)||void 0===s?void 0:s.avatar)&&void 0!==u?u:Te,profile:null===(p=null===(d=e.payload)||void 0===d?void 0:d.response)||void 0===p?void 0:p.profile,localeText:n,playbookType:e.playbookType})}),e.isMeetingBooked||this.handleCalendar(n,t,a,e)):this.handleCalendarError(e,t,n,a)}}},{key:"handleCalendar",value:function(e,t,n,a){var r,o,i,l,c=this,s=de.BOOKING_REQUEST,u=K();if(a){var d,p=null===(o=null===(r=a.payload)||void 0===r?void 0:r.response)||void 0===o?void 0:o.meetingDuration;"liveStream"===a.playbookType&&(d=O(),this.noSlotsErrorRef=O()),this.calanderModalId=this.api.addToChatFrame({style:"unformatted",content:W.createElement(xn,{id:"calendar-".concat(t),onChoiceClick:function(e){var t,n,r,o;e.profileId=null===(r=null===(n=null===(t=a.payload)||void 0===t?void 0:t.response)||void 0===n?void 0:n.profile)||void 0===r?void 0:r.id;var i={id:a.id,type:s,sender:"client",payload:e,playbookType:a.playbookType};c.slotInfo=e,"liveStream"!==a.playbookType?(c.api.sendMessage(i),c.calanderModalId&&c.api.removeFromChatFrame(c.calanderModalId)):(c.messageAnswer=i,c.noSlotsErrorRef&&c.noSlotsErrorRef.current&&c.noSlotsErrorRef.current.classList.contains("hb_slot_error_show")&&c.noSlotsErrorRef.current.classList.remove("hb_slot_error_show"),null===(o=u())||void 0===o||o.removePrimaryAttr("disabled"))},slots:null===(l=null===(i=a.payload)||void 0===i?void 0:i.response)||void 0===l?void 0:l.slots,calendarHeading:e.TEXT_SCHEDULE_MEETING_IN_TIMEZONE.replace(/{{\d+}}/,"".concat(p||30)),timeslotHeading:e.TEXT_SCHEDULE_MEETING,localeText:e,locale:n||"en-US",buttonRef:d,playbookType:a.playbookType,secondaryFn:function(){return c.api.showChatFrame(!1)},primaryFn:function(){var e;c.messageAnswer&&(null===(e=c.messageAnswer.payload)||void 0===e?void 0:e.date)&&c.messageAnswer.payload.time&&(c.api.sendMessage(c.messageAnswer),c.api.removeFromChatFrame(c.profileCardId),c.calanderModalId&&c.api.removeFromChatFrame(c.calanderModalId),c.messageAnswer=void 0)},showButtonGroup:!0,showButton:!0,errorRef:this.noSlotsErrorRef,mutators:u})}),"liveStream"===a.playbookType&&d&&d.current&&d.current.click()}}},{key:"handleCalendarError",value:function(e,t,n,a){var r,o,i=this,l=de.CALENDAR_GET,c=me.UNAVAILABLE_SLOT,s=me.NO_SLOTS_AVAILABLE;switch(null===(o=null===(r=e.payload)||void 0===r?void 0:r.error)||void 0===o?void 0:o.errorCode){case c:var u=this.api.getHistory().find}));"liveStream"===e.playbookType?u&&(this.handleMessage(u,t,n,a),this.noSlotsErrorRef&&this.noSlotsErrorRef.current&&!this.noSlotsErrorRef.current.classList.contains("hb_slot_error_show")&&this.noSlotsErrorRef.current.classList.add("hb_slot_error_show")):(this.api.addToChatFrame({style:"server",content:W.createElement(Tt,{text:"<p>".concat(n.ERROR_SELECTED_SLOT_NOT_AVAILABLE,"</p>"),playbookType:e.playbookType})}),this.handleCalendar(n,t,a,u));break;case s:this.api.addToChatFrame({style:"server",content:W.createElement(Tt,{text:"<p>".concat(n.ERROR_NO_SLOTS_AVAILABLE,"</p>"),playbookType:e.playbookType})});break;default:this.calendarRetry=this.api.addToChatFrame({style:"server",content:W.createElement(Tt,{text:"<p>".concat(n.ERROR_CONNECTIVITY,"</p>"),playbookType:e.playbookType})}),this.retryAppointment=this.api.addToChatFrame({content:W.createElement("div",{className:"hb_question hb_btn_group"},W.createElement("button",{className:"hb_choice hb_retry",onClick:function(){return t={id:e.id,type:l,sender:"client"},i.api.sendMessage(t),i.retryAppointment&&i.api.removeFromChatFrame(i.retryAppointment),void(i.calendarRetry&&"liveStream"===e.playbookType&&i.api.removeFromChatFrame(i.calendarRetry));var t}},n.BUTTON_RETRY_TEXT))})}}},{key:"handleReplay",value:function(e,t,n,a){var r=this;e.forEach((function(e){return r.handleMessage(e,t,n,a)}))}}])&&Vn(t.prototype,n),a&&Vn(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Gn(e){for(var t=arguments,n=function(n){var a=null!=t[n]?t[n]:{};n%2?Xn(Object(a),!0).forEach((function(t){Wn(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Xn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))},a=1;a<arguments.length;a++)n(a);return e}function Wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kn(e){var t=Le.getState();return W.createElement("div",{id:e.id,class:e.classNames},W.createElement(Tt,{playbookType:e.playbookType,text:"",isMessageOnly:!0}),W.createElement(Xe,{classNames:["pdf"],clickFn:e.clickFn,ariaLabel:t?t.TEXT_ACCESSIBILITY_PDF_BUTTON:""},W.createElement("div",{class:"content"},Oe('<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 48 48">\n<defs>\n  <style>\n    .cls-1 {\n      fill: #fff;\n    }\n\n    .cls-2 {\n      fill: #ff2116;\n    }\n\n    .cls-3 {\n      fill: #2c2c2c;\n    }\n\n    .cls-4 {\n      fill: #fa0f00;\n    }\n  </style>\n</defs>\n<g id="Path">\n  <path id="white_bg" class="cls-1" d="M8.5,47.25A3.71357,3.71357,0,0,1,4.75,43.5V4.5A3.71357,3.71357,0,0,1,8.5.75H31.6a2.96151,2.96151,0,0,1,2.1.9L41.35,9.3a2.96151,2.96151,0,0,1,.9,2.1V43.5a3.71357,3.71357,0,0,1-3.75,3.75Z"/>\n  <path id="red_outline" class="cls-2" d="M31.6,1.5a3.14541,3.14541,0,0,1,1.65.6L40.9,9.75a3.14541,3.14541,0,0,1,.6,1.65V43.5a3.00882,3.00882,0,0,1-3,3H8.5a3.00882,3.00882,0,0,1-3-3V4.5a3.00882,3.00882,0,0,1,3-3H31.6m0-1.5H8.5A4.41968,4.41968,0,0,0,4,4.5v39A4.41968,4.41968,0,0,0,8.5,48h30A4.41968,4.41968,0,0,0,43,43.5V11.4a4.31249,4.31249,0,0,0-1.05-2.7L34.3,1.05A4.67268,4.67268,0,0,0,31.6,0Z"/>\n  <path id="PDF" class="cls-3" d="M15.8575,34.326v-.015l.0015-.0135.003-.012.006-.0105.0075-.009.012-.006.0135-.0045.018-.0015c.051-.003.105-.0045.162-.0075s.1155-.0045.1785-.006c.0615-.0015.126-.0045.192-.006l.204-.0045c.0705-.0015.141-.003.2145-.003.0735-.0015.147-.0015.2235-.003s.1515-.0015.2295-.0015h.234a4.149,4.149,0,0,1,.615.0435,3.04072,3.04072,0,0,1,.5235.126,2.38345,2.38345,0,0,1,.4365.201,1.96672,1.96672,0,0,1,.351.267,1.84339,1.84339,0,0,1,.456.699,2.33244,2.33244,0,0,1,.111.417,2.76108,2.76108,0,0,1,.036.45,2.89035,2.89035,0,0,1-.0525.5625,2.17929,2.17929,0,0,1-.1515.4785,1.9453,1.9453,0,0,1-.24.3975,1.885,1.885,0,0,1-.318.3195,2.20991,2.20991,0,0,1-.3855.2445,2.65255,2.65255,0,0,1-.4425.171,3.35963,3.35963,0,0,1-.489.1005,3.98766,3.98766,0,0,1-.5235.033h-.084c-.0255,0-.0495,0-.072-.0015-.0225,0-.042-.0015-.063-.0015-.0195,0-.039-.0015-.057-.0015s-.036-.0015-.0525-.0015c-.018,0-.0345-.0015-.0525-.0015s-.036,0-.054-.0015h-.06v2.448a.06713.06713,0,0,1-.0015.018l-.003.015-.0045.012-.0075.0105-.0105.0075c-.0045.0015-.0075.0045-.012.0045l-.015.003H15.931l-.018-.0015-.015-.003-.012-.0045-.0105-.0075-.0075-.0105c-.0015-.0045-.0045-.00749-.0045-.012l-.003-.015v-6.003C15.8575,34.7535,15.8575,34.326,15.8575,34.326ZM16.99,37.704c.018.0015.036.003.054.003s.036.0015.054.003c.018,0,.036.0015.054.0015s.0375.0015.057.0015h.297c.093,0,.1845-.0045.276-.0135a2.083,2.083,0,0,0,.2625-.0435,1.53645,1.53645,0,0,0,.243-.0795,1.12694,1.12694,0,0,0,.216-.1215,1.01008,1.01008,0,0,0,.1815-.168.96239.96239,0,0,0,.138-.2205,1.21759,1.21759,0,0,0,.0885-.279,1.72779,1.72779,0,0,0,.0315-.3435,1.69693,1.69693,0,0,0-.0225-.2835,1.2471,1.2471,0,0,0-.0675-.2475,1.00012,1.00012,0,0,0-.111-.21.96659.96659,0,0,0-.1515-.171,1.04123,1.04123,0,0,0-.192-.1335,1.31628,1.31628,0,0,0-.2295-.096,1.58474,1.58474,0,0,0-.267-.057,2.38712,2.38712,0,0,0-.3015-.0195h-.093c-.0315,0-.0615,0-.0915.0015-.03,0-.0585.0015-.087.0015s-.0555.0015-.0825.003-.0525.0015-.0765.003-.0465.003-.069.003c-.021.0015-.042.003-.06.003a.46579.46579,0,0,0-.0495.00451V37.704Zm4.2285-3.3675v-.018l.0015-.015.0045-.0135.006-.0105.009-.009.0135-.006a.05373.05373,0,0,1,.0165-.006l.021-.0045c.03-.0015.0675-.003.111-.0045s.093-.003.147-.0045q.08325-.00225.18-.0045c.0645-.0015.135-.003.207-.0045l.2295-.0045c.0795-.0015.162-.003.2475-.003.084-.0015.171-.0015.258-.003.087,0,.177-.0015.2655-.0015a4.21979,4.21979,0,0,1,.7485.063,3.36073,3.36073,0,0,1,.648.183,2.62124,2.62124,0,0,1,.5475.2955,2.57865,2.57865,0,0,1,.4485.3975,2.74322,2.74322,0,0,1,.348.492,3.22287,3.22287,0,0,1,.249.57751,3.98667,3.98667,0,0,1,.1485.6555,5.12126,5.12126,0,0,1,.0495.7245,5.42449,5.42449,0,0,1-.081.9615,3.88249,3.88249,0,0,1-.228.7905,3.178,3.178,0,0,1-.3465.633,2.86819,2.86819,0,0,1-.945.849,3.13119,3.13119,0,0,1-.546.24,3.44781,3.44781,0,0,1-.5595.135,3.60967,3.60967,0,0,1-.546.042h-.21c-.072,0-.1485,0-.225-.0015s-.153-.0015-.2295-.0015-.153-.0015-.2265-.003-.147-.003-.2145-.003-.1335-.0015-.195-.003-.1155-.003-.165-.0045-.093-.003-.1275-.003l-.015-.00149L21.25,41.238l-.0105-.0075-.009-.009-.0075-.012-.0045-.015-.003-.0165-.0015-.0195V35.19l.0045-.85349Zm1.143,5.895.066.0045c.021.0015.0435.003.0645.003s.042.0015.0645.003.0435.003.0645.003c.0225.0015.0435.0015.066.003.0225,0,.045.0015.0675.0015s.0465,0,.0705.0015h.072a2.31933,2.31933,0,0,0,.426-.039,1.86642,1.86642,0,0,0,.39-.1185,1.67246,1.67246,0,0,0,.348-.1995,1.89452,1.89452,0,0,0,.3015-.2805,2.0666,2.0666,0,0,0,.246-.3645,2.56246,2.56246,0,0,0,.1845-.45,3.41338,3.41338,0,0,0,.117-.537,4.73807,4.73807,0,0,0,.0435-.624,4.19535,4.19535,0,0,0-.0375-.603,2.87894,2.87894,0,0,0-.1155-.5085,2.2151,2.2151,0,0,0-.1845-.417,1.79447,1.79447,0,0,0-.246-.3315,1.67609,1.67609,0,0,0-.2985-.249,1.71271,1.71271,0,0,0-.3435-.1725,2.12254,2.12254,0,0,0-.381-.1005,2.60329,2.60329,0,0,0-.4095-.0315h-.081c-.027,0-.0525,0-.078.0015-.0255,0-.0495.0015-.0735.0015s-.048.0015-.072.003-.0465.0015-.0705.003c-.0225.0015-.045.003-.0675.003-.0225.0015-.045.003-.0675.003l-.0675.0045v4.359C22.36,39.915,22.3615,40.2315,22.3615,40.2315Zm6.1665.924a.11353.11353,0,0,1-.0015.0225l-.003.018-.0045.015-.0075.012-.0105.009-.012.006-.015.003-.018.0015H27.46l-.018-.0015-.015-.003-.012-.006c-.003-.003-.0075-.0045-.0105-.009l-.0075-.012a.044.044,0,0,1-.0045-.015l-.003-.018-.0015-.0225v-6.84l.0015-.018.003-.015.0045-.012.0075-.0105.0105-.0075a.02864.02864,0,0,1,.012-.0045l.015-.003.018-.0015h3.492a.09224.09224,0,0,1,.021.0015l.0165.003.0135.0045.0105.0075.0075.0105.006.012.0045.015.0045.018.0135.1095.01351.1095.0135.1095.0135.1095.0135.1095.0135.1095.0135.1095.0135.1095a.11353.11353,0,0,1,.0015.0225l-.0015.018-.006.015a.0361.0361,0,0,1-.009.012l-.012.009a.05373.05373,0,0,1-.0165.006.076.076,0,0,1-.0195.003l-.0225.0015h-2.529v1.992h2.286l.015.003.0135.0045.009.006.0075.009a.02847.02847,0,0,1,.0045.0135l.003.0165.0015.021v.876a.09224.09224,0,0,1-.0015.021l-.003.0165-.0045.0135-.0075.009-.0105.006-.012.0045-.015.0015H28.528V41.1555Z"/>\n  <path class="cls-4" d="M18.34485,24.89581a14.726,14.726,0,0,1-.90433,1.20392c-.14588.17272-.2886.33072-.42652.47294a2.3965,2.3965,0,0,1-1.39981.88689.44969.44969,0,0,1-.32068-.11487.64447.64447,0,0,1-.0917-.10319.4401.4401,0,0,1-.08159-.228.50794.50794,0,0,1,.009-.12794.77285.77285,0,0,1,.04042-.13855,1.90078,1.90078,0,0,1,.44673-.61826q.083-.08222.17846-.167A12.416,12.416,0,0,1,18.81141,24.177Q18.57762,24.55454,18.34485,24.89581Zm10.50861-3.16987a7.15042,7.15042,0,0,1,1.33615.10319.89065.89065,0,0,1,.73091.51405.63524.63524,0,0,1,.02842.17114.8507.8507,0,0,1-.0168.2017c-.06946.35814-.43978.58984-.94638.58984a1.90786,1.90786,0,0,1-.19956-.02476,1.70525,1.70525,0,0,1-.228-.02892,6.95621,6.95621,0,0,1-2.71071-1.3719c.20853-.03164.40859-.0569.59931-.07742A13.30079,13.30079,0,0,1,28.85346,21.72594Zm-4.03713-.42551c-.53666.11266-1.09075.24332-1.6533.39179-.40379.10691-.81364.22387-1.22336.34866.21762-.44554.41768-.8869.592-1.3066.22961-.5546.44546-1.10913.64351-1.6516.17429.27332.35453.53881.5383.79419q.27337.37843.55762.7294.2838.35078.5767.66991l-.04724.01054ZM22.04248,11.7281a.59449.59449,0,0,1,.04319-.059.496.496,0,0,1,.38863-.22065.45056.45056,0,0,1,.28949.09637,1.26517,1.26517,0,0,1,.28671.95112,6.78363,6.78363,0,0,1-.09069,1.02855,16.73582,16.73582,0,0,1-.38926,1.78793q-.06555.24411-.14.49612a10.47936,10.47936,0,0,1-.43713-1.45406,7.28338,7.28338,0,0,1-.16533-1.18547,4.2798,4.2798,0,0,1,.0389-.88639A1.644,1.644,0,0,1,22.04248,11.7281Zm10.6171,10.9184a1.59791,1.59791,0,0,0-.09536-.406,1.44612,1.44612,0,0,0-.28595-.47294,2.1864,2.1864,0,0,0-.54461-.41762,5.92424,5.92424,0,0,0-2.82122-.54039c-.40328,0-.83359.01952-1.28765.059q-.68089.05844-1.43025.17644a13.48435,13.48435,0,0,1-1.5664-1.82747,16.652,16.652,0,0,1-.98-1.52251q.2173-.6826.38029-1.29978c.06366-.24225.12-.47452.17165-.70148q.10893-.48273.18162-.918c.03322-.20063.06176-.39494.08273-.57985a7.84448,7.84448,0,0,0,.05469-.89214,2.99752,2.99752,0,0,0-.97063-2.46043,1.62164,1.62164,0,0,0-.31437-.1796,1.88582,1.88582,0,0,0-.742-.14165,1.41789,1.41789,0,0,0-.71348.20379,1.51066,1.51066,0,0,0-.53779.53451,3.29733,3.29733,0,0,0-.34759,1.66157,7.06044,7.06044,0,0,0,.06164.81528,11.50714,11.50714,0,0,0,.92163,3.16356c-.08905.26334-.17961.525-.27282.78731-.18693.524-.385,1.04963-.60145,1.59469-.10837.27231-.22116.54929-.33975.83372a28.79464,28.79464,0,0,1-1.3719,2.84913c-1.23852.4982-3.61061,1.57468-4.62178,2.84338a2.09979,2.09979,0,0,0-.45242.90427,1.49882,1.49882,0,0,0-.02261.36337,1.36356,1.36356,0,0,0,.22432.663,1.54652,1.54652,0,0,0,.24174.28387,1.60961,1.60961,0,0,0,.36767.25014c.03309.01686.06732.03265.1047.049a1.93274,1.93274,0,0,0,.33824.11424,2.19039,2.19039,0,0,0,.50976.05848,2.57137,2.57137,0,0,0,1.09327-.26492,4.28953,4.28953,0,0,0,.71626-.4334A8.25473,8.25473,0,0,0,19.157,26.47788,16.62479,16.62479,0,0,0,20.3893,24.7942c.28595-.44243.5546-.89163.79988-1.32769q.55851-.19039,1.12611-.36179c.37752-.1143.7568-.22172,1.13495-.32125.08147-.0216.15952-.038.24048-.059.74266-.19122,1.46511-.35447,2.14727-.47559q.19343.16908.385.32017.38137.30342.74885.54089.18339.11926.36286.22438a6.63068,6.63068,0,0,0,3.32832.99109,2.4495,2.4495,0,0,0,1.36508-.33173,1.47543,1.47543,0,0,0,.19855-.15592,1.35119,1.35119,0,0,0,.3467-.52188,1.44757,1.44757,0,0,0,.09258-.45027A1.57657,1.57657,0,0,0,32.65958,22.6465Z"/>\n</g>\n</svg>')," ",e.text)))}function zn(e){switch(e.playbookType){case"liveStream":return W.createElement(W.Fragment,null,W.createElement(Kn,Gn(Gn({},e),{},{classNames:["hb_cf_pdf"]})),W.createElement(Et,{onlyClose:e.isFinalMessage,closeFn:e.secondaryFn,primaryFn:e.primaryFn}));default:return W.createElement(Kn,Gn(Gn({},e),{},{isChat:!0}))}}function Qn(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Zn,Jn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.currentOpenedDocuments={},this.libraryUrl="https://documentcloud.adobe.com/view-sdk/viewer.js",this.api=t}var t,n,a;return t=e,a=[{key:"handlesMessage",valu}}],(n=[{key:"handleMessage",value:function(e){var t=this;this.contentId=this.api.addToChatFrame({style:"liveStream"===e.playbookType?"unformatted":"server",content:W.createElement(zn,{id:e.id,text:e.payload.text,isFinalMessage:e.isFinalMessage,clickF},playbookType:e.playbookType,secondaryFn:function(){return t.api.showChatFrame(!1)},primaryFn:function(){t.api.removeFromChatFrame(t.contentId),t.api.sendMessage({})}})})}},{key:"showPdf",value:function(e){var t=this;this.currentOpenedDocuments[e.id]||(this.currentOpenedDocuments[e.id]=!0,window.AdobeDC?this.attachPDF(e):(xe(this.libraryUrl,"view-sdk"),document.addEventListener("adobe_dc_view_sdk.ready"}))))}},{key:"attachPDF",value:function(e){var t=this,n=new window.AdobeDC.View({clientId:e.payload.documentClient.clientId,reportSuiteId:e.payload.documentClient.analyticSuiteId});n.previewFile({content:{location:{url:"".concat(this.api.baseUrl,"document?id=").concat(e.id)}},metaData:{fileName:e.payload.text,id:e.id}},{embedMode:"LIGHT_BOX",focusOnRendering:!0});var a={listenOn:[window.AdobeDC.View.Enum.PDFAnalyticsEvents.TEXT_SEARCH,window.AdobeDC.View.Enum.PDFAnalyticsEvents.DOCUMENT_DOWNLOAD,window.AdobeDC.View.Enum.PDFAnalyticsEvents.DOCUMENT_OPEN,window.AdobeDC.View.Enum.Events.PDF_VIEWER_CLOSE],enablePDFAnalytics:!0};n.registerCallback(window.AdobeDC.View.Enum.CallbackType.EVENT_LISTENER,(function(n){if(n.type===window.AdobeDC.View.Enum.Events.PDF_VIEWER_CLOSE)return delete t.currentOpenedDocuments[e.id],void setTimeout}),100);var a={id:e.id,type:"document_event",sender:"client",payload:{type:n.type},playbookType:e.playbookType};n.type===window.AdobeDC.View.Enum.PDFAnalyticsEvents.TEXT_SEARCH&&(a.payload.searchedText=n.data.searchedText),t.api.sendMessage(a)}),a)}},{key:"handleReplay",value:function(e){var t=this;e.forEach((function(e){return t.handleMessage(e)}))}}])&&Qn(t.prototype,n),a&&Qn(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $n(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var ea=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=t}var t,n,a;return t=e,a=[{key:"handlesMessage",valu}}],(n=[{key:"renderDividerText",valu}},{key:"removeConnectionLoaderUi",value:function(){Zn&&(this.api.removeFromChatFrame(Zn),Zn=null)}},{key:"handleCardType",value:function(e,t,n,a,r,o,i){var l,c;if(oe.SYSTEM===e){if(a===$.TIMED_OUT||a===$.CLOSED_BY_AGENT||a===$.CLOSED_BY_VISITOR){this.avatarData={};var s="";a===$.TIMED_OUT?s=o.SESSION_INACTIVITY:a===$.CLOSED_BY_AGENT?s="".concat(o.ENDED_SESSION_AGENT," ").concat(i):a===$.CLOSED_BY_VISITOR&&(s=o.ENDED_BY_VISITOR),this.renderDividerText(s),this.api.showTextInput(!1),this.api.resizeChatBody(!1)}switch(t){case ae.SYSTEM:switch(r){case se.LC_204:Zn||(Zn=this.api.renderConnectingUi());break;case se.LC_201:this.removeConnectionLoaderUi(),this.renderDividerText(o.ERROR_INITIATE_FAILED||n);break;case se.LC_203:this.avatarData={},this.renderDividerText(o.AGENT_LIVE_CHAT_ENDED),this.api.showTextInput(!1),this.api.resizeChatBody(!1);break;case se.LC_202:case se.LC_205:case se.LC_206:case se.LC_207:this.removeConnectionLoaderUi(),this.renderDividerText(o[r]||n)}break;case ae.CUSTOM:this.removeConnectionLoaderUi(),this.renderDividerText(n)}}else{var u=e===oe.AGENT,d=u?oe.SERVER:oe.CLIENT,p=W.createElement(Tt,{text:"<p>".concat(n,"</p>"),avatar:null===(c=null===(l=this.avatarData)||void 0===l?void 0:l.payload)||void 0===c?void 0:c.agentAvatarUrl}),m=W.createElement("div",{class:"hb_message"},Oe("<p>".concat(n,"</p>"))),f=u?p:m;this.api.addToChatFrame({style:d,content:f})}}},{key:"handleSelection",value:function(e,t,n,a){var r,o,i=this;a&&(this.calanderModalId=this.api.addToChatFrame({style:"unformatted",content:W.createElement(xn,{id:"calendar-".concat(t),onChoiceClick:function(e){var t,n,r,o,l,c=null===(n=null===(t=null==a?void 0:a.payload)||void 0===t?void 0:t.profile)||void 0===n?void 0:n.email;i.slotInfo=e;var s={type:ae.CALENDAR_INFO,sender:oe.VISITOR,id:null==a?void 0:a.sessionId,payload:{profileId:null===(o=null===(r=a.payload)||void 0===r?void 0:r.profile)||void 0===o?void 0:o.id,date:null==e?void 0:e.date,time:null==e?void 0:e.time,timezone:null===(l=null==a?void 0:a.payload)||void 0===l?void 0:l.timezone,pageUrl:window.location.href,attendees:c?[c]:[],sessionId:null==a?void 0:a.sessionId}};i.api.sendMessage(s),i.calanderModalId&&i.api.removeFromChatFrame(i.calanderModalId)},slots:null===(r=a.payload)||void 0===r?void 0:r.slots,calendarHeading:"".concat(e.TEXT_SCHEDULE_MEETING_HEADER," ").concat(null===(o=a.payload)||void 0===o?void 0:o.meetingDuration," ").concat(e.TEXT_SCHEDULE_MEETING_HEADER_POSTFIX),timeslotHeading:e.TEXT_SCHEDULE_MEETING,localeText:e,locale:n||"en-US",buttonRef:void 0,playbookType:"dialog",secondaryFn:function(){return i.api.showChatFrame(!1)},primaryFn:function(){var e,t,n,a;(null===(t=null===(e=i.messageAnswer)||void 0===e?void 0:e.payload)||void 0===t?void 0:t.date)&&(null===(a=null===(n=i.messageAnswer)||void 0===n?void 0:n.payload)||void 0===a?void 0:a.time)&&(i.api.sendMessage(i.messageAnswer),i.api.removeFromChatFrame(i.profileCardId),i.calanderModalId&&i.api.removeFromChatFrame(i.calanderModalId))},showButtonGroup:!0,showButton:!0})}))}},{key:"handleMessage",value:function(e,t,n,a){var r,o,i,l,c,s,u,d,p,m,f,h,v=e.payload,y=void 0===v?{}:v,g=e.sender,b=void 0===g?"":g,E=e.type,_=void 0===E?"":E,T=y.type,C=void 0===T?"":T,w=y.content,I=void 0===w?"":w,O=y.terminationStatus,x=void 0===O?"":O,D=y.statusCode,S=void 0===D?"":D;if(z.LIVE_CHAT_MESSAGE===_){switch(null===(r=e.payload)||void 0===r?void 0:r.type){case ae.AGENT_PROFILE:this.removeConnectionLoaderUi(),this.avatarData=e,this.renderDividerText("".concat(n.TEXT_CONNECTED_TO_AGENT," ").concat((null===(i=null===(o=this.avatarData)||void 0===o?void 0:o.payload)||void 0===i?void 0:i.agentFirstName)?this.avatarData.payload.agentFirstName:n.FALLBACK_AGENT_NAME));var M={payload:{type:ae.LIVE_CHAT},type:z.LIVE_CHAT_MESSAGE};this.api.showTextInput(!0),this.api.setTextResponsePayload(M),this.api.resizeChatBody(!0);break;case ae.CALENDAR_INFO:this.profileCardId=this.api.addToChatFrame({style:"server",content:W.createElement(Yn,{avatar:(null===(c=null===(l=e.payload)||void 0===l?void 0:l.profile)||void 0===c?void 0:c.avatar)?null===(u=null===(s=e.payload)||void 0===s?void 0:s.profile)||void 0===u?void 0:u.avatar:Te,profile:null===(d=e.payload)||void 0===d?void 0:d.profile,localeText:n,playbookType:"dialog"})}),this.api.removeFromChatFrame(this.calanderModalId),this.handleSelection(n,t,a,e);break;case ae.MEETING_BOOKING_RESPONSE:this.api.removeFromChatFrame(this.calanderModalId);var k=new Date("".concat(null===(p=this.slotInfo)||void 0===p?void 0:p.date.replace(/-/g,"/")," ").concat(null===(m=this.slotInfo)||void 0===m?void 0:m.time)),N=Me(k,n,a).timezone,A=Se(a)||"en-US";this.api.addToChatFrame({style:oe.CLIENT,content:W.createElement("div",{class:"hb_answer"},n.TEXT_MEETING_SCHEDULE," ",W.createElement("b",null,k.toLocaleDateString(A,_e)," ",N))})}this.handleCardType(b,C,I,x,S,n,(null===(h=null===(f=this.avatarData)||void 0===f?void 0:f.payload)||void 0===h?void 0:h.agentFirstName)||n.FALLBACK_AGENT_NAME)}}},{key:"handleReplay",value:function(e,t,n,a){var r=this;e.forEach((function(e){return r.handleMessage(e,t,n,a)}))}}])&&$n(t.prototype,n),a&&$n(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ta(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var na=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=t}var t,n,a;return t=e,a=[{key:"handlesMessage",value:function(e,t){return e===le.PROMPT||e===le.VISITOR_QUESTION||e===le.GENAI_ANSWER||e===le.VISITOR_FEEDBACK||e===le.END||e===le.AFFIRMATION_QUESTIONS||e===le.AFFIRMATION_CHOICE||e===le.NUDGE_CHOICE}}],(n=[{key:"handleMessage",value:function(e,t,n,a){var r,o,i,l,c,s=this,u=e,d=le.VISITOR_QUESTION,p=le.VISITOR_FEEDBACK,m=le.GENAI_ANSWER,f=le.PROMPT,h=le.AFFIRMATION_CHOICE,v=le.AFFIRMATION_QUESTIONS,y=le.NUDGE_CHOICE,g={id:u.id,type:d,sender:"client",payload:{type:u.payload?u.payload.type:""},playbookType:u.playbookType},b=function(e){if(s.loaderId&&!e)return s.api.removeFromChatFrame(s.loaderId),void(s.loaderId="");s.loaderId=e?s.api.renderWaitingUi():""},E=function(e){if(s.genAiResponseMessageId){var t=s.api.getFromChatFrame(s.genAiResponseMessageId);if(t){var n=e?".thumbsup":".thumbsdown",a=t.querySelector(n);if(a){var r=t.querySelector(".hb_feedback_container");r&&(r.innerHTML="",a.classList.replace("outline","filled"),a.disabled=!0,r.appendChild(a))}}s.genAiResponseMessageId=""}},_=function(e){var t;s.api.sendMessage({id:u.id,type:p,sender:"client",payload:"string"==typeof e?{helpful:"true"===e,responseId:null===(t=u.payload)||void 0===t?void 0:t.responseId}:{},playbookType:u.playbookType}),E("true"===e)},T=function(e){var n={id:u.id,type:y,sender:"client",payload:"string"==typeof e?{text:e}:{id:e.id,text:e.text},playbookType:u.playbookType};s.handleMessage(n,t),s.api.sendMessage(n)},C=function(e){var n={id:u.id,type:h,sender:"client",payload:"string"!=typeof e?{questionId:e.id}:{},playbookType:u.playbookType};s.affirmationMessageId="",s.handleMessage(n,t),s.api.sendMessage(n)},w=function(e,t,n){s.api.showTextInput(e),s.api.disableTextInput(t),s.api.resizeChatBody(n)};switch(u.type){case f:this.messageId=this.api.addToChatFrame({style:"server",content:W.createElement(Tt,{text:u.payload?u.payload.text:"",playbookType:u.playbookType})}),w(!0,!1,!0),this.api.setTextResponsePayload(g);break;case d:this.api.addToChatFrame({style:"client",content:W.createElement("div",{class:"hb_answer"},u.payload?u.payload.inputVal:"")}),this.api.disableTextInput(!0),this.questionId&&(this.api.removeFromChatFrame(this.questionId),this.api.removeFromChatFrame(this.nudgeQuestionMessageId),this.questionId="",this.nudgeQuestionMessageId=""),this.messageId&&(this.messageId=""),this.affirmationMessageId&&(this.affirmationMessageId=""),b(!0);break;case m:if(b(!1),u.payload){if(u.payload.text&&(this.genAiResponseMessageId=this.api.addToChatFrame({style:"server",content:W.createElement(Tt,{text:u.payload.text.startsWith("<p>")?u.payload.text:"<p>".concat(u.payload.text,"</p>"),playbookType:u.playbookType},u.payload.isGenAiResponse&&W.createElement("div",{class:"hb_feedback"},W.createElement("p",null,null==n?void 0:n.TEXT_AI_GENERATED_ANSWER),W.createElement("div",{class:"hb_feedback_container"},W.createElement("p",null,null==n?void 0:n.TEXT_FEEDBACK_QUESTION),W.createElement(Xe,{classNames:["hb_feedback_btn","outline","thumbsup"],clickFn:function(){return _("true")},ariaLabel:null==n?void 0:n.TEXT_ACCESSIBILITY_HELPFUL_FEEDBACK}),W.createElement(Xe,{classNames:["hb_feedback_btn","outline","thumbsdown"],clickF},ariaLabel:null==n?void 0:n.TEXT_ACCESSIBILITY_NOT_HELPFUL_FEEDBACK}))))})),u.payload.relatedReads&&u.payload.relatedReads.length>0){var I=u.payload.relatedReads.length;this.api.addToChatFrame({style:"server",content:W.createElement(Tt,{playbookType:u.playbookType,text:"<p>".concat(null==n?void 0:n.TEXT_RELATED_LINKS,"</p>")},W.createElement("ul",{class:"hb_related_links ".concat(1===I?"hb_related_links_no_list":"")},u.payload.relatedReads.map((function(e,t){return W.createElement("li",null,W.createElement("a",{href:e.url,target:"_blank"},e.title))}))))})}if(u.payload.nudgeQuestion){this.nudgeQuestionMessageId=this.api.addToChatFrame({style:"server",content:W.createElement(Tt,{text:u.payload.nudgeQuestion.text,playbookType:u.playbookType})});var O=W.createElement(Ot,{id:"assisted-nudge-".concat(t),choices:null===(o=null===(r=u.payload)||void 0===r?void 0:r.nudgeQuestion)||void 0===o?void 0:o.choices,playbookType:u.playbookType,onChoiceClick:T,text:null===(l=null===(i=u.payload)||void 0===i?void 0:i.nudgeQuestion)||void 0===l?void 0:l.text});this.questionId=this.api.addToChatFrame({style:"unformatted",content:O})}u.payload.isGenAiResponse||(w(!1,!1,!1),this.messageId&&this.api.removeFromChatFrame(this.messageId),this.affirmationMessageId&&this.api.removeFromChatFrame(this.affirmationMessageId)),u.payload.allowMoreQuestions?(w(!0,!1,!0),this.api.setTextResponsePayload(g)):w(!1,!1,!1)}break;case v:b(!1),u.payload&&u.payload.suggestedQuestions&&u.payload.suggestedQuestions.length>0&&(this.suggestedQuestions=u.payload.suggestedQuestions,this.affirmationMessageId=this.api.addToChatFrame({style:"server",content:W.createElement(Tt,{text:"<p>".concat(null==n?void 0:n.TEXT_AFFIRMATION_QUESTION,"</p>"),playbookType:u.playbookType})}),this.questionId=this.api.addToChatFrame({style:"unformatted",content:W.createElement(Ot,{id:t,choices:null===(c=u.payload)||void 0===c?void 0:c.suggestedQuestions,onChoiceClick:C,playbookType:u.playbookType})})),this.api.disableTextInput(!1);break;case h:if(this.questionId&&this.api.removeFromChatFrame(this.questionId),u.payload&&u.payload.questionId){var x=u.payload.questionId,D=this.suggestedQuestions&&this.suggestedQuestions.length>0?this.suggestedQuestions.filter}))[0].text:"";this.api.addToChatFrame({style:"client",content:W.createElement("div",{class:"hb_answer"},D)})}this.api.disableTextInput(!0),b(!0);break;case y:w(!1,!1,!1),this.questionId&&this.api.removeFromChatFrame(this.questionId),u.payload&&u.payload.text&&this.api.addToChatFrame({style:"client",content:W.createElement("div",{class:"hb_answer"},u.payload.text)});break;case p:u.payload&&u.payload.helpful&&E(u.payload.helpful)}}},{key:"handleReplay",value:function(e,t,n,a){var r=this;e.forEach((function(e){return r.handleMessage(e,t,n,a,!0)}))}}])&&ta(t.prototype,n),a&&ta(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();window.AdobeDX.register((function(e){e&&(e.registerUiRenderer(bt),e.registerCardHandler(wt),e.registerCardHandler(Rn),e.registerCardHandler(Dt),e.registerCardHandler(qn),e.registerCardHandler(Jn),e.registerCardHandler(ea),e.registerCardHandler(na))}))}();
//# sourceMappingURL=index.js.map
