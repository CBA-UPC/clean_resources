/*! For license information please see adjust-latest.min.js.LICENSE.txt */
!self,(()=>(()=>{var e={841:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(81),o=n.n(r),i=n(645),a=n.n(i),s=n(667),u=n.n(s),c=new URL(n(529),n.b),l=a()(o()),d=u()(c);l.push([e.id,".adjust-smart-banner__AEqYlWgPonspKfseFq2N{height:76px}@media(min-width: 428px){.adjust-smart-banner__AEqYlWgPonspKfseFq2N{height:0}}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq{position:fixed;left:0;right:0;z-index:10000000}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq.adjust-smart-banner__jOV7BvlxDT7ATfbLPh3j{top:0}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq.adjust-smart-banner__XmomYv1VVQYz0lEtn9Q2{bottom:0}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq .adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK{margin:0 auto;max-width:428px;background:#fff}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq .adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK .adjust-smart-banner__r3JnN_RNhpzArrmKQ8jI{display:flex;align-items:center;padding:10px 8px 10px 4px}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq .adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK .adjust-smart-banner__r3JnN_RNhpzArrmKQ8jI .adjust-smart-banner__VFuxsD_KzqNSxQecFmao{width:32px;height:32px;border:none;background:url("+d+");background-repeat:no-repeat;background-position:center center;background-size:8px 8px,auto;cursor:pointer}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq .adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK .adjust-smart-banner__r3JnN_RNhpzArrmKQ8jI .adjust-smart-banner__hqvH8Y5fwbegVLKnoYv_{width:56px;height:56px;overflow:hidden;background-color:#6e7492;border-radius:8px}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq .adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK .adjust-smart-banner__r3JnN_RNhpzArrmKQ8jI .adjust-smart-banner__hqvH8Y5fwbegVLKnoYv_ .adjust-smart-banner__Ll9XMTDiX4Drgeydp0Oc{display:flex;align-items:center;justify-content:center;width:100%;height:100%;color:#353a52;font-weight:bold;font-size:23px;font-family:ArialMt,Arial,sans-serif;line-height:32px;background-color:#e0e2ec}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq .adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK .adjust-smart-banner__r3JnN_RNhpzArrmKQ8jI .adjust-smart-banner__hqvH8Y5fwbegVLKnoYv_ .adjust-smart-banner__VYRfEif2Ph2_984rXQy8{width:100%}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq .adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK .adjust-smart-banner__r3JnN_RNhpzArrmKQ8jI .adjust-smart-banner__I8xX0C5dUcR53pY0aEys{flex:1 1 0%;min-height:0;min-width:0;margin:0 12px}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq .adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK .adjust-smart-banner__r3JnN_RNhpzArrmKQ8jI .adjust-smart-banner__JJLdp2l7YvnsUXudojWA{overflow:hidden;text-overflow:ellipsis}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq .adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK .adjust-smart-banner__r3JnN_RNhpzArrmKQ8jI h4{margin:5px 0 8px;color:#353a52;font-family:Arial-BoldMT,ArialMt,Arial,sans-serif;font-size:12px;font-weight:bold;line-height:16px;white-space:nowrap}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq .adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK .adjust-smart-banner__r3JnN_RNhpzArrmKQ8jI p{margin:8px 0 7px;color:#353a52;font-family:ArialMt,Arial,sans-serif;font-size:9px;line-height:11px;max-height:22px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.adjust-smart-banner__NVk5vwju_4kdaKzGWJPq .adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK .adjust-smart-banner__r3JnN_RNhpzArrmKQ8jI .adjust-smart-banner__risKVvV3T0vjKiSTR9l0{color:#6e7492;background:#f9fafc;border:1px solid #cdd0e0;border-radius:4px;border-color:#6e7492;box-shadow:inset 0px -1px 0px 0px #e0e2ec;padding:4px 6.5px;display:inline-block;vertical-align:middle;text-align:center;font-family:ArialMt,Arial,sans-serif;font-size:12px;font-weight:500;line-height:16px;cursor:pointer;text-decoration:none}",""]),l.locals={bannerContainer:"adjust-smart-banner__AEqYlWgPonspKfseFq2N",banner:"adjust-smart-banner__NVk5vwju_4kdaKzGWJPq",stickyToTop:"adjust-smart-banner__jOV7BvlxDT7ATfbLPh3j",stickyToBottom:"adjust-smart-banner__XmomYv1VVQYz0lEtn9Q2",bannerBody:"adjust-smart-banner__eXKzWnRDn4RWUiSSeVYK",content:"adjust-smart-banner__r3JnN_RNhpzArrmKQ8jI",dismiss:"adjust-smart-banner__VFuxsD_KzqNSxQecFmao",appIcon:"adjust-smart-banner__hqvH8Y5fwbegVLKnoYv_",placeholder:"adjust-smart-banner__Ll9XMTDiX4Drgeydp0Oc",image:"adjust-smart-banner__VYRfEif2Ph2_984rXQy8",textContainer:"adjust-smart-banner__I8xX0C5dUcR53pY0aEys",bannerText:"adjust-smart-banner__JJLdp2l7YvnsUXudojWA",action:"adjust-smart-banner__risKVvV3T0vjKiSTR9l0"};const f=l},645:667:81:702:379:569:216:565:795:589:529:,t={};.m=e,n.n=n.d=n.g=),n.o=n.b=document.baseURI||self.location.href,n.nc=void 0;var r={};return(()=>{"use strict";efault:);var l=1e3,d=36e5,f=24*d,p="general",h="gdpr",m={TRANSACTION_ERROR:"XHR transaction failed due to an error",SERVER_MALFORMED_RESPONSE:"Response from server is malformed",SERVER_INTERNAL_ERROR:"Internal error occurred on the server",SERVER_CANNOT_PROCESS:"Server was not able to process the request, probably due to error coming from the client",NO_CONNECTION:"No internet connectivity",SKIP:"Skipping slower attempt",MISSING_URL:"Url is not provided"},v="noStorage",g="indexedDB",y="localStorage",b={endpointName:"Default",app:"https://app.adjust.com",gdpr:"https://gdpr.adjust.com"},k={endpointName:"Indian",app:"https://app.adjust.net.in",gdpr:"https://gdpr.adjust.net.in"},w={endpointName:"Chinese",app:"https://app.adjust.world",gdpr:"https://gdpr.adjust.world"},_={endpointName:"EU",app:"https://app.eu.adjust.com",gdpr:"https://gdpr.eu.adjust.com"},S={endpointName:"TR",app:"https://app.tr.adjust.com",gdpr:"https://gdpr.tr.adjust.com"},j={endpointName:"US",app:"https://app.us.adjust.com",gdpr:"https://gdpr.us.adjust.com"};unction x(e){return!Object.keys(e).length&&e.constructor===Object}function D(e){return"object"===P(e)&&null!==e&&!(e instanceof Array)}function N(e){try{return D(JSON.parse(e))}catch(e){return!1}}function I(e,t,n){function r(e){return Array.isArray(t)?t.every(():e[t]===n}for(var o=0;o<e.length;o+=1)if(r(e[o]))return o;return-1}function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.reduce((,{})}function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e.filter(()}function R(e,t){return new RegExp("\\/".concat(t,"(\\/.*|\\?.*){0,1}$")).test(e)}function C(t,n){var r=u(n,2),i=r[0],a=r[1];return o(o({},t),{},e({},i,a))}nction K(e){return D(e)?!x(e):!!e||0===e}function B(){try{var e=(new Date).toString(),t=window.localStorage;t.setItem(e,e);var n=t.getItem(e)===e;return t.removeItem(e),!(!n||!t)}catch(e){return!1}}const U={namespace:"adjust-sdk",version:"5.6.0",env:"production"};var q,L="error",M="warning",W="info",V="verbose",F=(e(q={},"none",-1),e(q,L,0),e(q,M,1),e(q,W,2),e(q,V,3),q),z={log:"  ",info:" ",warn:" ",error:""},G={development:V,production:L,test:V},Y=X(),J="";function X(){return G[U.env]||L}function Q(e,t){var n;if(!(F[Y]<F[t])){for(var r=(new Date).toISOString(),o=z[e],i=["[".concat(U.namespace,"]"),r,"".concat(e.toUpperCase(),":").concat(o)],a=J?document.querySelector(J):null,s=arguments.length,u=new Array(s>2?s-2:0),c=2;c<s;c++)u[c-2]=arguments[c];(n=console)[e].apply(n,i.concat(u)),a&&(a.textContent+="".concat(i.join(" ")," ").concat(u.map(().join(" "),"\n"),a.scrollTop=a.scrollHeight)}}function H(e,t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];Q.apply(void 0,[e,t].concat(r))}}const Z={setLogLevel:function(e,t){e&&-1===Object.keys(F).indexOf(e)?Q("error","error","You must set one of the available log levels: verbose, info, warning, error or none"):(Y=e||X(),J=t||J,Q("info",e,"Log level set to ".concat(Y)))},log:H("log",V),info:H("info",W),warn:H("warn",M),error:H("error",L)};var $={},ee={},te=["appToken","environment"],ne=[].concat(te,["defaultTracker","externalDeviceId"]),re=["customUrl","dataResidency","urlStrategy","eventDeduplicationListLimit","namespace"];function oe(e){var t=te.filter(();return!!t.length&&(Z.error("You must define ".concat(function(e){if(!e.length)return"";if(1===e.length)return"".concat(e[0]);var t=e.length-1,n=e.slice(0,t).join(", ");return"".concat(n," and ").concat(e[t])}(t))),!0)}var ie=o(o({},{sessionWindow:18e5,sessionTimerWindow:6e4,requestValidityWindow:28*f}),{},{set:function(e){if(!oe(e)){var t=[].concat(c(ne),re).filter(().map(();$=t.filter((function(e){var t=u(e,1)[0];return-1!==ne.indexOf(t)})).reduce(C,{}),ee=t.filter((function(e){var t=u(e,1)[0];return-1!==re.indexOf(t)})).reduce(C,{})}},getBaseParams:function(){return o({},$)},getCustomConfig:isInitialised:function(){return te.reduce((,!0)},hasMissing:oe,destroy:);const ae=ie;var se,ue,ce,le,de;!function(e){e.Queue="queue",e.ActivityState="activityState",e.GlobalParams="globalParams",e.EventDeduplication="eventDeduplication"}(ue||(ue={})),function(e){e.Preferences="preferences"}(ce||(ce={})),function(e){e.Queue="q",e.ActivityState="as",e.GlobalParams="gp",e.EventDeduplication="ed"}(le||(le={})),de||(de={}));var fe={fields:{thirdPartySharingDisabled:{key:"td",keys:{reason:{key:"r",values:e({},p,1)},pending:{key:"p",values:{false:0,true:1}}}},sdkDisabled:{key:"sd",keys:{reason:{key:"r",values:(se={},e(se,p,1),e(se,h,2),se)},pending:{key:"p",values:{false:0,true:1}}}}}};function pe(e){return!!e&&Object.prototype.hasOwnProperty.call(e,"values")}function he(e){return!!e&&Object.prototype.hasOwnProperty.call(e,"keys")}function me(e){return!!e&&Object.prototype.hasOwnProperty.call(e,"composite")}function ve(e){return!!e&&"string"!=typeof e}const ge={queue:{name:le.Queue,scheme:{keyPath:"timestamp",autoIncrement:!1,fields:{url:{key:"u",values:{"/session":1,"/event":2,"/gdpr_forget_device":3,"/sdk_click":4,"/disable_third_party_sharing":5}},method:{key:"m",values:{GET:1,POST:2,PUT:3,DELETE:4}},timestamp:"t",createdAt:"ca",params:{key:"p",keys:{timeSpent:"ts",sessionLength:"sl",sessionCount:"sc",eventCount:"ec",lastInterval:"li",eventToken:"et",revenue:"re",currency:"cu",callbackParams:"cp",partnerParams:"pp"}}}}},activityState:{name:le.ActivityState,scheme:{keyPath:"uuid",autoIncrement:!1,fields:{uuid:{key:"u",values:{unknown:"-"}},timeSpent:"ts",sessionLength:"sl",sessionCount:"sc",eventCount:"ec",lastActive:"la",lastInterval:"li",installed:{key:"in",values:{false:0,true:1}},attribution:{key:"at",keys:{adid:"a",tracker_token:"tt",tracker_name:"tn",network:"nt",campaign:"cm",adgroup:"ag",creative:"cr",click_label:"cl",state:{key:"st",values:{installed:1,reattributed:2}}}}}}},globalParams:{name:le.GlobalParams,scheme:{keyPath:"keyType",autoIncrement:!1,index:"type",fields:{keyType:{key:"kt",composite:["key","type"]},key:"k",value:"v",type:{key:"t",values:{callback:1,partner:2}}}}},eventDeduplication:{name:le.EventDeduplication,scheme:{keyPath:"internalId",autoIncrement:!0,fields:{internalId:"ii",id:"i"}}},preferences:{name:de.Preferences,scheme:fe,permanent:!0}};unction be(e,t,n){var r,i=pe(n)?{values:(r=n.values,E(r).map((function(e){var t=u(e,2),n=t[0];return[t[1],ye(n)]})).reduce(C,{}))}:{},a=he(n)?{keys:ke(e,n.keys)}:{},s=me(n)?{composite:n.composite.map((function(t){return we(e,t)}))}:{};return o(o(o({key:t},i),a),s)}function ke(e,t){return E(t).map((function(t){var n=u(t,2),r=n[0],o=n[1];return ve(o)?[o.key,be(e,r,o)]:[o,r]})).reduce(C,{})}function we(e,t){if(t){var n=ge[e].scheme.fields[t];return ve(n)?n.key:n||t}}var _e=E(ge).map((function(e){var t=u(e,2),n=t[0],r=t[1];return[n,{keyPath:r.scheme.keyPath,autoIncrement:r.scheme.autoIncrement,index:r.scheme.index,fields:r.scheme.fields}]})).reduce(C,{}),Se=E(_e).map((function(e){var t=u(e,2),n=t[0],r=t[1];return[n,{keyPath:we(n,r.keyPath),autoIncrement:r.autoIncrement,index:we(n,r.index),fields:ke(n,r.fields)}]})).reduce(C,{}),je=E(ge).reduce((function(e,t){var n=u(t,2)[1];return e.concat(n.scheme.fields)}),[]).map((function(e){return O(e).filter(pe).map((function(e){return E(e.values)})).reduce((function(e,t){return e.concat(t)}),[])})).reduce((function(e,t){return e.concat(t)}),[]).reduce(C,{}),Pe=E(ge).map((function(e){var t=u(e,2),n=t[0],r=t[1];return[n,{name:r.name,permanent:r.permanent}]})).reduce(C,{});const xe={left:_e,right:Se,values:je,storeNames:{left:Pe,right:(De=Pe,Ne=E(De).map((function(e){var t=u(e,2),n=t[0],r=t[1],o={name:n,permanent:r.permanent};return[r.name,o]})),Ne.reduce(C,{}))}};var De,Ne,Ie,Ae;"undefined"==typeof Promise&&n(702).Promise;unction Re(e,t){return e&&void 0!==e[t]?e[t]:t}function Ce(t,n,r,i){if(r){var a=i||xe[n][Be(t,Ae.right)].fields;return E(r).map((function(e){var r=u(e,2),o=r[0],i=r[1];return function(e,t,n,r,o){if(!o)return[n,r];var i=ve(o)?o.key:o;return Te(r)?[i,Ce(e,t,r,he(o)?o.keys:null)]:[i,Re(pe(o)?o.values:null,r)]}(t,n,o,i,a[o])})).reduce((,{})}}function Ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return n.map((function(n){return Ce(e,t,n)}))}function Oe(e,t,n){var r=xe[t][Be(e,Ae.right)],o=r.fields[r.keyPath],i=n instanceof Array?n.slice():[n],a=(me(o)?o.composite:[r.keyPath]).map((function(e,t){var n=r.fields[e];return Re(pe(n)?n.values:null,i[t])}));return 1===a.length?a[0]:a}unction Be(e,t){return(xe.storeNames[t][e]||{}).name||e}function Ue(e,t){return{name:t.name,message:t.message.replace('"'.concat(e,'"'),Be(e,Ae.right))}}ction We(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e+"",r=1;r<=t;r+=1)e<Math.pow(10,r)&&(n="0".concat(n));return n}function Ve(e){var t=e?new Date(e):new Date,n=function(e){var t=We(e.getDate()),n=We(e.getMonth()+1);return[e.getFullYear(),n,t].join("-")}(t),r=function(e){var t=We(e.getHours(),1),n=We(e.getMinutes()),r=We(e.getSeconds()),o=We(e.getMilliseconds(),2);return[t,n,r].join(":")+"."+o}(t),o=function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+We(Math.floor(Math.abs(t)/60))+We(Math.abs(t)%60)}(t);return"".concat(n,"T").concat(r,"Z").concat(o)}function Fe(e,t){return isNaN(e)||isNaN(t)?0:Math.abs(t-e)}!function(e){e.LowerBound="lowerBound",e.UpperBound="upperBound"}(Ie||(Ie={})),function(e){e.right="right",e.left="left"}(Ae||(Ae={}));var ze={},Ge=!1,Ye=!1;function Je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ze=Ge?o({},e):{}}function Xe(){Ge&&(ze.lastInterval=function(){var e=ze.lastActive;if(e)return Math.round(Fe(e,Date.now())/l);return-1}(),ze.lastActive=Date.now())}unction He(){Ye=!0}function Ze(){var e=ze.lastActive;return Math.round(Fe(e,Date.now())/l)}function $e(){return(ze.timeSpent||0)+(Ye?Ze():0)}function et(){var e=Fe(ze.lastActive,Date.now())<ae.sessionWindow,t=Ye||!Ye&&e;return(ze.sessionLength||0)+(t?Ze():0)}function tt(){Ge&&(Qe({timeSpent:$e(),sessionLength:et()}),Xe())}const nt={get current(){return Ge?o({},ze):{}},set currentinit:isStarted:function(){return Ge},toForeground:He,toBackground:function(){Ye=!1},initParams:getParams:function(e){if(!Ge)return null;var t=ze.lastInterval>=0?ze.lastInterval:0,n={timeSpent:ze.timeSpent||0,sessionLength:ze.sessionLength||0,sessionCount:ze.sessionCount||1,lastInterval:t||0};return e&&R(e,"event")&&(n.eventCount=ze.eventCount),n},updateParams:function(e,t){if(Ge){var n={};n.timeSpent=$e(),n.sessionLength=et(),R(e,"session")&&(n.sessionCount=(ze.sessionCount||0)+1),R(e,"event")&&(n.eventCount=(ze.eventCount||0)+1),Qe(n),t||Xe()}},updateInstalled:function(){Ge&&(ze.installed||Qe({installed:!0}))},updateSessionOffset:tt,updateSessionLength:function(){Ge&&(Qe({sessionLength:et()}),Xe())},resetSessionOffset:updateLastActive:Xe,destroy:function(){ze={},Ge=!1,Ye=!1},getAttribution:function(){return Ge?ze.attribution?ze.attribution:(Z.log("No attribution data yet"),null):null},getWebUUID:;var rt={},ot=[];function it(e,t){var n="id"+Math.random().toString(36).substr(2,16),r={id:n,cb:t};return rt[e]||(rt[e]=[]),rt[e].push(r),n}function at(e,t){rt[e]&&rt[e].forEach((function(n){"function"==typeof n.cb&&ot.push(setTimeout(())}))}var st=function(){function t(){qe(this,t),e(this,"items",{})}return Me(t,[{key:"getItem",value:,{key:"removeItem",value:,{key:"setItem",value:]),t}();const ut=new(function(){function t(){var n=this;qe(this,t),e(this,"defaultName",U.namespace),e(this,"storageName",this.defaultName),e(this,"storeNames",xe.storeNames.left),e(this,"storesMap",void 0),e(this,"storage",void 0),this.storesMap={},B()?this.storage=window.localStorage:this.storage=new st;var r=this.read.bind(this),o=this.write.bind(this);O(this.storeNames).forEach((function(e){var t=e.name;Object.defineProperty(n.storesMap,t,{get:function(){return r(t)},set:)})),Object.freeze(this.storesMap)}return Me(t,[{key:"read",value:function(e){var t=this.storage.getItem("".concat(this.storageName,".").concat(e)),n=t?JSON.parse(t):null;return e===de.Preferences&&n?Ce(de.Preferences,Ae.right,n):n}},{key:"write",value:function(e,t){t?this.storage.setItem("".concat(this.storageName,".").concat(e),JSON.stringify(t instanceof Array?t:Ce(de.Preferences,Ae.left,t))):this.storage.removeItem("".concat(this.storageName,".").concat(e))}},{key:"clear",value:,{key:"deleteData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];O(this.storeNames).forEach((function(n){!t&&n.permanent||e.storage.removeItem("".concat(e.storageName,".").concat(n.name))}))}},{key:"setCustomName",value:function(e){var t=this;if(e&&e.length){var n="".concat(U.namespace,"-").concat(e);O(this.storeNames).forEach((function(e){var r=e.name,o=t.storage.getItem("".concat(t.storageName,".").concat(r));o&&t.storage.setItem("".concat(n,".").concat(r),o)})),this.deleteData(!0),this.storageName=n}}},{key:"stores",get:]),t}());var ct=ge.preferences.name,lt=dt();function dt(){return lt||ft(),lt?o({},lt):null}unction pt(){var e=dt();return e?e.sdkDisabled:null}function ht(e){var t=e?o({},e):null;ut.stores[ct]=o(o({},dt()),{},{sdkDisabled:t}),ft()}unction vt(){var e=ut.stores[ct]||{},t=(lt||{}).sdkDisabled||null;e.sdkDisabled&&!t&&at("sdk:shutdown"),ft()}function gt(){ut.stores[ct]||(ut.stores[ct]=o({},lt))}var yt,bt,kt="undefined"==typeof Promise?n(702).Promise:Promise;!yt||(yt={})),bt||(bt={}));var wt=function(){function t(){qe(this,t),e(this,"dbDefaultName",U.namespace),e(this,"dbName",this.dbDefaultName),e(this,"dbVersion",1),e(this,"idbFactory",void 0),e(this,"indexedDbConnection",null),e(this,"notSupportedError",{name:"IDBNotSupported",message:"IndexedDB is not supported"}),e(this,"databaseOpenError",{name:"CannotOpenDatabaseError",message:"Cannot open a database"}),e(this,"noConnectionError",{name:"NoDatabaseConnection",message:"Cannot open a transaction"});var n=t.getIndexedDB();if(!n)throw this.notSupportedError;this.idbFactory=n}return Me(t,[{key:"setCustomName",value:function(e){return e&&e.length>0?(this.dbName="".concat(U.namespace,"-").concat(e),this.migrateDb(this.dbDefaultName,this.dbName)):kt.resolve()}},{key:"openDatabase",value:function(e,n,r){var o=this;return t.isSupported().then((function(t){return t?new kt((function(t,i){var a=o.idbFactory.open(e,r);n&&(a.onupgradeneeded=function(e){return n(e,i)}),a.onsuccess=function(e){var n=e.target.result;n?t(n):i(o.databaseOpenError)},a.onerror=i})):kt.reject(o.notSupportedError)}))}},{key:"databaseExists",value:function(e){var t=this;return new kt((function(n){var r=!0;t.openDatabase(e,().then((function(n){if(n.close(),!r)return t.deleteDatabaseByName(e)})).then((function(){return n(r)}))}))}},{key:"cloneData",value:function(e,t){var n=this;return O(xe.storeNames.left).map((function(e){return e.name})).filter(().map((function(r){return function(){return o=r,i=n.indexedDbConnection,n.indexedDbConnection=e,n.getAll(o).then((function(e){if(n.indexedDbConnection=t,!(e.length<1))return n.addBulk(o,e,!0)})).then(();var o,i}})).reduce((function(e,t){return e.then(t)}),kt.resolve())}},{key:"migrateDb",value:function(e,t){var n=this;return this.databaseExists(e).then((function(r){return r?kt.all([n.openDatabase(e,n.handleUpgradeNeeded,n.dbVersion),n.openDatabase(t,n.handleUpgradeNeeded,n.dbVersion)]).then((function(t){var r=u(t,2),o=r[0],i=r[1];return n.cloneData(o,i).then((function(){return n.indexedDbConnection=i,o.close(),n.deleteDatabaseByName(e)}))})).then(():n.openDatabase(t,n.handleUpgradeNeeded,n.dbVersion).then(()}))}},{key:"handleUpgradeNeeded",value:function(e,t){var n=e.target.result;e.target.transaction.onerror=t,e.target.transaction.onabort=t;var r=xe.storeNames.left,o=nt.current||{},i=o&&!x(o);E(r).filter((function(e){return!u(e,2)[1].permanent})).forEach((function(e){var t=u(e,2),r=t[0],a=t[1].name,s=xe.right[r],c=n.createObjectStore(a,{keyPath:s.keyPath,autoIncrement:s.autoIncrement||!1});if(s.index&&c.createIndex("".concat(s.index,"Index"),s.index),a===le.ActivityState&&i)return c.add(Ce(r,Ae.left,o)),void Z.info("Activity state has been recovered");var l=ut.stores[a];l&&(l.forEach((),Z.info("Migration from localStorage done for ".concat(r," store")))})),gt(),ut.clear()}},{key:"open",value:function(){var e=this;return this.indexedDbConnection?kt.resolve({success:!0}):this.openDatabase(this.dbName,this.handleUpgradeNeeded,this.dbVersion).then((function(t){return e.indexedDbConnection=t,e.indexedDbConnection.onclose={success:!0}}))}},{key:"getTransactionStore",value:function(e,t,n){var r,o=e.storeName,i=e.mode,a=n.transaction([o],i),s=a.objectStore(o),u=xe.right[Be(o,Ae.right)];return u.index&&(r=s.index("".concat(u.index,"Index"))),a.onerror=t,a.onabort=t,{transaction:a,store:s,index:r,options:u}}},{key:"overrideError",value:function(e,t){var n=t.target.error;return e({name:n.name,message:n.message})}},{key:"getCompositeKeys",value:function(e){var t=e.fields[e.keyPath];return me(t)?t.composite:null}},{key:"targetIsObject",value:,{key:"prepareTarget",value:function(t,n,r){if(r===yt.clear||!n)return null;var i=this.getCompositeKeys(t);return-1!==[yt.add,yt.put].indexOf(r)?this.targetIsObject(n)?i?o(e({},t.keyPath,i.map((function(e){return n[e]})).join("")),n):n:null:n instanceof Array?n.join(""):n}},{key:"prepareResult",value:function(e,t){var n=this.getCompositeKeys(e);return n&&this.targetIsObject(t)?n.map((function(e){return t[e]})):null}},{key:"initRequest",value:function(e){var t=this,n=e.storeName,r=e.target,o=void 0===r?null:r,i=e.action,a=e.mode,s=void 0===a?bt.readonly:a;return this.open().then((function(){return new kt((function(e,r){if(t.indexedDbConnection){var a=t.getTransactionStore({storeName:n,mode:s},r,t.indexedDbConnection),u=a.store,c=a.options,l=u[i](t.prepareTarget(c,o,i)),d=t.prepareResult(c,o);l.onsuccess=function(){i!==yt.get||l.result?e(d||l.result||o):r({name:"NotRecordFoundError",message:'Requested record not found in "'.concat(n,'" store')})},l.onerror=function(e){return t.overrideError(r,e)}}else r(t.noConnectionError)}))}))}},{key:"initBulkRequest",value:function(e){var t=this,n=e.storeName,r=e.target,o=e.action,i=e.mode,a=void 0===i?bt.readwrite:i;return!r||r&&!r.length?kt.reject({name:"NoTargetDefined",message:"No array provided to perform ".concat(o,' bulk operation into "').concat(n,'" store')}):this.open().then((function(){return new kt((function(e,i){if(t.indexedDbConnection){var s=t.getTransactionStore({storeName:n,mode:a},i,t.indexedDbConnection),u=s.transaction,c=s.store,l=s.options,d=new Array,f=r[0];u.oncomplete=function(){return e(d)};!function e(n){n.onerror=function(e){return t.overrideError(i,e)},n.onsuccess=function(){d.push(t.prepareResult(l,f)||n.result),f=r[d.length],d.length<r.length&&e(c[o](t.prepareTarget(l,f,o)))}}(c[o](t.prepareTarget(l,f,o)))}else i(t.noConnectionError)}))}))}},{key:"openCursor",value:function(e){var t=this,n=e.storeName,r=e.action,o=e.range,i=void 0===o?null:o,a=e.firstOnly,s=void 0!==a&&a,u=e.mode,c=void 0===u?bt.readonly:u;return this.open().then((function(){return new kt((function(e,o){if(t.indexedDbConnection){var a=t.getTransactionStore({storeName:n,mode:c},o,t.indexedDbConnection),u=a.transaction,l=a.store,d=a.index,f=a.options,p=(d||l).openCursor(i),h=new Array;u.oncomplete=function(){return e(h)},p.onsuccess=function(e){var n=e.target.result;n&&(r===yt.delete?(n.delete(),h.push(t.prepareResult(f,n.value)||n.value[f.keyPath])):h.push(n.value),s||n.continue())},p.onerror=function(e){return t.overrideError(o,e)}}else o(t.noConnectionError)}))}))}},{key:"deleteDatabaseByName",value:function(e){var t=this;return new kt((function(n,r){var o=t.idbFactory.deleteDatabase(e);o.onerror=function(e){return t.overrideError(r,e)},o.onsuccess=o.onblocked=))}},{key:"getAll",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.openCursor({storeName:e,action:yt.list,firstOnly:t})}},{key:"getFirst",value:function(e){return this.getAll(e,!0).then((function(e){return e.length?e[0]:void 0}))}},{key:"getItem",value:function(e,t){return this.initRequest({storeName:e,target:t,action:yt.get})}},{key:"filterBy",value:function(e,t){var n=IDBKeyRange.only(t);return this.openCursor({storeName:e,action:yt.list,range:n})}},{key:"addItem",value:function(e,t){return this.initRequest({storeName:e,target:t,action:yt.add,mode:bt.readwrite})}},{key:"addBulk",value:function(e,t,n){return this.initBulkRequest({storeName:e,target:t,action:n?yt.put:yt.add,mode:bt.readwrite})}},{key:"updateItem",value:function(e,t){return this.initRequest({storeName:e,target:t,action:yt.put,mode:bt.readwrite})}},{key:"deleteItem",value:function(e,t){return this.initRequest({storeName:e,target:t,action:yt.delete,mode:bt.readwrite})}},{key:"deleteBulk",value:function(e,t,n){var r=n?IDBKeyRange[n](t):IDBKeyRange.only(t);return this.openCursor({storeName:e,action:yt.delete,range:r,mode:bt.readwrite})}},{key:"trimItems",value:function(e,t){var n=this,r=xe.right[Be(e,Ae.right)];return this.getAll(e).then((function(e){return e.length?e[t-1]:null})).then((function(t){return t?n.deleteBulk(e,t[r.keyPath],Ie.UpperBound):[]}))}},{key:"count",value:function(e){var t=this;return this.open().then((function(){return new kt((function(n,r){if(t.indexedDbConnection){var o=t.getTransactionStore({storeName:e,mode:bt.readonly},r,t.indexedDbConnection).store.count();o.onsuccess=o.onerror=function(e){return t.overrideError(r,e)}}else r(t.noConnectionError)}))}))}},{key:"clear",value:function(e){return this.initRequest({storeName:e,action:yt.clear,mode:bt.readwrite})}},{key:"destroy",value:,{key:"deleteDatabase",value:],[{key:"tryOpen",value:function(e){return new kt((function(n){try{var r=e.open(t.dbValidationName);r.onsuccess=function(){r.result.close(),e.deleteDatabase(t.dbValidationName),n(!0)},r.onerror=catch(e){n(!1)}}))}},{key:"isSupported",value:function(){if(t.isSupportedPromise)return t.isSupportedPromise;var e="IndexedDB is not supported in this browser";return t.isSupportedPromise=new kt((function(n){var r=t.getIndexedDB(),o=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);!r||o?(Z.warn(e),n(!1)):n(t.tryOpen(r).then(())})),t.isSupportedPromise}},{key:"getIndexedDB",value:]),t}();e(wt,"dbValidationName","validate-db-openable"),e(wt,"isSupportedPromise",null);var _t="undefined"==typeof Promise?n(702).Promise:Promise,St=function(){eturn Me(t,[{key:"open",value:function(){return t.isSupported().then((function(e){if(!e)return{status:"error",error:{name:"LSNotSupported",message:"LocalStorage is not supported"}};var t=xe.storeNames.left,n=nt.current||{},r=n&&!x(n);return E(t).filter((function(e){return!u(e,2)[1].permanent})).forEach((function(e){var t=u(e,2),o=t[0],i=t[1].name;i!==le.ActivityState||ut.stores[i]?ut.stores[i]||(ut.stores[i]=[]):ut.stores[i]=r?[Ce(o,Ae.left,n)]:[]})),gt(),{status:"success"}}))}},{key:"getCompositeKeys",value:function(e){var t=e.fields[e.keyPath];return me(t)?t.composite:null}},{key:"getKeys",value:function(e){var t=Be(e,Ae.right),n=xe.right[t];return this.getCompositeKeys(n)||[n.keyPath]}},{key:"nextIndex",value:function(e){return"number"==typeof e?e+1:void 0}},{key:"initRequest",value:function(e,t){var n=this,r=e.storeName,i=e.id,a=e.item,s=xe.right[Be(r,Ae.right)];return this.open().then((function(e){return"error"===e.status?_t.reject(e.error):new _t((function(e,u){var c,l=ut.stores[r],d=n.getKeys(r),f=(l[l.length-1]||{})[s.keyPath]||0;if(i){var p=Array.isArray(i)?i.slice():[i];c=d.map(().reduce(C,{})}else c=o({},a);var h=c?I(l,d,c):0;return t(e,u,{keys:d,items:l,index:h,options:s,lastId:f})}))}))}},{key:"sort",value:function(e,t,n){var r=c(e),o=t.slice().reverse();return r.sort((function(e,t){return o.reduce((function(r,o){return r||function(e,t,r){var o=n?n===e[r]:e[r]<t[r],i=n?n>e[r]:e[r]>t[r];return o?-1:i?1:0}(e,t,o)}),0)}))}},{key:"prepareTarget",value:function(t,n,r){var i=this.getCompositeKeys(t);return i?o(e({},t.keyPath,i.map((function(e){return n[e]})).join("")),n):t.autoIncrement&&r?o(e({},t.keyPath,r),n):o({},n)}},{key:"prepareResult",value:function(e,t){var n=this.getCompositeKeys(e);return n?n.map((function(e){return t[e]})).filter(():t[e.keyPath]}},{key:"getAll",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.open().then((function(r){return"error"===r.status?_t.reject(r.error):new _t((function(r,o){var i=ut.stores[e];i instanceof Array?r(n?[i[0]]:t.sort(i,t.getKeys(e))):o({name:"NotFoundError",message:"No objectStore named ".concat(e," in this database")})}))}))}},{key:"getFirst",value:function(e){return this.getAll(e,!0).then((function(e){return e.length?e[0]:void 0}))}},{key:"getItem",value:function(e,t){var n=this;return this.initRequest({storeName:e,id:t},(function(t,r,o){var i=o.items,a=o.index,s=o.options;-1===a?r({name:"NotRecordFoundError",message:'Requested record not found in "'.concat(e,'" store')}):t(n.prepareTarget(s,i[a]))}))}},{key:"filterBy",value:function(e,t){return this.getAll(e).then((function(n){return n.filter((function(n){var r=xe.right[Be(e,Ae.right)];return(r.index&&n[r.index])===t}))}))}},{key:"addItem",value:function(e,t){var n=this;return this.initRequest({storeName:e,item:t},(function(r,o,i){var a=i.items,s=i.index,u=i.options,c=i.lastId;-1!==s?o({name:"ConstraintError",message:'Constraint was not satisfied, trying to add existing item into "'.concat(e,'" store')}):(a.push(n.prepareTarget(u,t,n.nextIndex(c))),ut.stores[e]=a,r(n.prepareResult(u,t)))}))}},{key:"addBulk",value:function(e,t,n){var r=this;return this.initRequest({storeName:e},(function(o,i,a){var s=a.keys,u=a.items,l=a.options,d=a.lastId;if(!t||t&&!t.length)i({name:"NoTargetDefined",message:'No array provided to perform add bulk operation into "'.concat(e,'" store')});else{var f=d,p=t.map((function(e){return r.prepareTarget(l,e,f=r.nextIndex(f))})),h=p.filter((function(e){return-1!==I(u,s,e)})).map((),m=n?u.filter((function(e){return-1===h.indexOf(e[l.keyPath])})):c(u);if(h.length&&!n)i({name:"ConstraintError",message:'Constraint was not satisfied, trying to add existing items into "'.concat(e,'" store')});else ut.stores[e]=r.sort([].concat(c(m),c(p)),s),o(t.map(())}}))}},{key:"updateItem",value:function(e,t){var n=this;return this.initRequest({storeName:e,item:t},(function(r,o,i){var a=i.items,s=i.index,u=i.options,c=i.lastId,l=-1===s?n.nextIndex(c):void 0,d=n.prepareTarget(u,t,l);-1===s?a.push(d):a.splice(s,1,d),ut.stores[e]=a,r(n.prepareResult(u,t))}))}},{key:"deleteItem",value:function(e,t){return this.initRequest({storeName:e,id:t},(function(n,r,o){var i=o.items,a=o.index;-1!==a&&(i.splice(a,1),ut.stores[e]=i),n(t)}))}},{key:"findMax",value:function(e,t,n){if(!e.length)return-1;for(var r={index:-1,value:"string"==typeof n?"":0},o=0;o<e.length;o+=1){if(!(e[o][t]<=n))return r.index;e[o][t]>=r.value&&(r={value:e[o][t],index:o})}return r.index}},{key:"deleteBulk",value:function(e,t,n){var r=this;return this.getAll(e).then((function(o){var i=r.getKeys(e),a=xe.right[Be(e,Ae.right)].index||i[0],s=n?null:t,u=r.sort(o,i,s),c=r.findMax(u,a,t);if(-1===c)return[];var l=n===Ie.LowerBound?c:0,d=n&&n!==Ie.UpperBound?u.length:c+1,f=u.splice(l,d).map((function(e){return 1===i.length?e[a]:i.map((function(t){return e[t]}))}));return ut.stores[e]=u,f}))}},{key:"trimItems",value:function(e,t){var n=this,r=Be(e,Ae.right),o=xe.right[r];return this.getAll(e).then((function(e){return e.length?e[t-1]:null})).then((function(t){return t?n.deleteBulk(e,t[o.keyPath],Ie.UpperBound):[]}))}},{key:"count",value:function(e){return this.open().then((function(t){if("error"===t.status)return _t.reject(t.error);var n=ut.stores[e];return _t.resolve(n instanceof Array?n.length:1)}))}},{key:"clear",value:function(e){return this.open().then((function(t){return"error"===t.status?_t.reject(t.error):new _t((function(t){ut.stores[e]=[],t()}))}))}},{key:"destroy",value:function(){}},{key:"deleteDatabase",value:],[{key:"isSupported",value:function(){return t.isSupportedPromise||(t.isSupportedPromise=new _t((function(e){var t=B();t||Z.warn("LocalStorage is not supported in this browser"),e(t)}))),t.isSupportedPromise}}]),t}();e(St,"isSupportedPromise",null);var jt,Pt="undefined"==typeof Promise?n(702).Promise:Promise;!function(e){e[e.noStorage=v]="noStorage",e[e.indexedDB=g]="indexedDB",e[e.localStorage=y]="localStorage"}(jt||(jt={}));var xt,Dt={getAll:function(e,t,n){return e.getAll(t,n).then((function(e){return Ee(t,Ae.right,e)}))},getFirst:function(e,t){return e.getFirst(t).then((function(e){return Ce(t,Ae.right,e)}))},getItem:function(e,t,n){return e.getItem(t,Oe(t,Ae.left,n)).then((function(e){return Ce(t,Ae.right,e)})).catch((function(e){return Pt.reject(Ue(t,e))}))},filterBy:function(e,t,n){return e.filterBy(t,Ke(n)).then((function(e){return Ee(t,Ae.right,e)}))},addItem:function(e,t,n){var r=Ce(t,Ae.left,n);return e.addItem(t,r).then((function(e){return Oe(t,Ae.right,e)})).catch((function(e){return Pt.reject(Ue(t,e))}))},addBulk:function(e,t,n,r){var o=Ee(t,Ae.left,n);return e.addBulk(t,o,r).then((function(e){return e.map((function(e){return Oe(t,Ae.right,e)}))})).catch(()},updateItem:function(e,t,n){var r=Ce(t,Ae.left,n);return e.updateItem(t,r).then((function(e){return Oe(t,Ae.right,e)}))},deleteItem:function(e,t,n){return e.deleteItem(t,Oe(t,Ae.left,n)).then((function(e){return Oe(t,Ae.right,e)}))},deleteBulk:function(e,t,n,r){return e.deleteBulk(t,Ke(n),r).then((function(e){return e.map(()}))},trimItems:count:function(e,t){return e.count(t)},clear:destroy:function(e){return e.destroy()},deleteDatabase:;var Nt=null;function It(e){var t=null;return null!==Nt?Nt:Nt=Pt.all([wt.isSupported(),St.isSupported()]).then((function(n){var r=u(n,2),o=r[0],i=r[1];if(ut.setCustomName(e),o){xt=jt.indexedDB;var a=new wt;return a.setCustomName(e).then(()}return i?(xt=jt.localStorage,t=new St,Pt.resolve(t)):(Z.error("There is no storage available, app will run with minimum set of features"),xt=jt.noStorage,t=null,Pt.resolve(t))})).then(()}const At=o({init:It,getType:,(Tt=E(Dt).map((function(e){var t=u(e,2),n=t[0],r=t[1];return[n,function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return It().then((function(t){var o=t.storage;if(o)return r.call.apply(r,[null,o,Be(e,Ae.left)].concat(n))}))}]})),Tt.reduce(C,{})));var Tt;"undefined"==typeof Promise&&n(702).Promise;function Rt(){return At.getAll("queue").then(().then((function(e){return o(o(o(o(o(o(o(o({},{createdAt:Ve()}),{sentAt:Ve()}),{webUuid:nt.current.uuid}),(n=navigator,r=void 0!==n.doNotTrack,i=void 0!==window.doNotTrack,a=void 0!==n.msDoNotTrack,s=r?n.doNotTrack:i?window.doNotTrack:a?n.msDoNotTrack:null,0===parseInt(s,10)||"no"===s?{trackingEnabled:!0}:1===parseInt(s,10)||"yes"===s?{trackingEnabled:!1}:null)),{platform:"web"}),function(){var e=navigator,t=u((e.language||e.userLanguage||"en").split("-"),2),n=t[0],r=t[1];return{language:n,country:r?""+r.toLowerCase():void 0}}()),(t=navigator.userAgent||navigator.vendor,{machineType:"Win32"!==navigator.platform||-1===t.indexOf("WOW64")&&-1===t.indexOf("Win64")?navigator.platform:"Win64"})),e);var t,n,r,i,a,s}))}var Ct="undefined"==typeof Promise?n(702).Promise:Promise;function Et(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{status:"error",action:n?"CONTINUE":"RETRY",response:N(e.responseText)?JSON.parse(e.responseText):e.responseText,message:m[t],code:t}}function Ot(e,t){var n=e.slice(0,e.length-t.length-1).split("").reduce((function(e){return e.concat(" ")}),"");return"".concat(t).concat(n,":")}function Kt(e,t){var n="REQUEST PARAMETERS:",r=i=E(o(o(o({},ae.getBaseParams()),t),e)).map(();return Z.log(n),i.filter((function(e){return K(u(e,2)[1])})).map((function(e){var t=u(e,2),r=t[0],o=t[1];return Z.log(Ot(n,r),o),function(e){var t=u(e,2),n=t[0],r=t[1],o=encodeURIComponent(n),i=r;return"string"==typeof r&&(i=encodeURIComponent(r)),D(r)&&(i=encodeURIComponent(JSON.stringify(r)||"")),[o,i].join("=")}([r,o])})).join("&")}function Bt(e,t,n){var r=n.xhr,o=n.url;if(4===r.readyState){var i=r.status>=200&&r.status<300,a=N(r.responseText);if(0!==r.status)return a?t(i?function(e,t){var n=JSON.parse(e.responseText),r={status:"success",adid:n.adid,timestamp:n.timestamp,ask_in:n.ask_in,retry_in:n.retry_in,continue_in:n.continue_in,tracking_state:n.tracking_state,attribution:void 0,message:void 0};return R(t,"attribution")&&(r.attribution=n.attribution,r.message=n.message),E(r).filter(().reduce(C,{})}(r,o):Et(r,"SERVER_CANNOT_PROCESS",!0)):e(Et(r,i?"SERVER_MALFORMED_RESPONSE":"SERVER_INTERNAL_ERROR"));e(Et(r,"NO_CONNECTION"))}}function Ut(e,t){var n=e.endpoint,r=e.url,o=e.method,i=void 0===o?"GET":o,a=e.params,s=function(e,t){var n=e.endpoint,r=e.url,o=e.method,i=Kt(e.params,t);return{fullUrl:n+r+("GET"===o?"?".concat(i):""),encodedParams:i}}({endpoint:n,url:r,method:i,params:void 0===a?{}:a},t),c=s.fullUrl,l=s.encodedParams;return new Ct((function(e,t){var n=new XMLHttpRequest;n.open(i,c,!0),function(e,t){var n="REQUEST HEADERS:",r=[["Client-SDK","js".concat(U.version)],["Content-Type","POST"===t?"application/x-www-form-urlencoded":"application/json"]];Z.log(n),r.forEach((function(t){var r=u(t,2),o=r[0],i=r[1];e.setRequestHeader(o,i),Z.log(Ot(n,o),i)}))}(n,i),n.onreadystatechange=n.onerror=n.send("GET"===i?void 0:l)}))}function qt(e,t){return"success"===e.status?function(e,t){var n=R(t,"gdpr_forget_device"),r=R(t,"attribution"),o=R(t,"session"),i=R(t,"disable_third_party_sharing"),a="opted_out"===e.tracking_state;if(!n&&a)return at("sdk:gdpr-forget-me"),e;r||n||a||!e.ask_in||at("attribution:check",e);o&&at("session:finished",e);if(i)return at("sdk:third-party-sharing-opt-out"),e;return e}(e,t):e}function Lt(e){return Rt().then((function(t){return Ut(e,t)})).then(()}var Mt={long:{delay:12e4,maxDelay:f,minRange:.5,maxRange:1},short:{delay:200,maxDelay:d,minRange:.5,maxRange:1},test:{delay:100,maxDelay:300}};function Wt(e,t){var n,r,o=Mt[t=t||"long"],i=o.delay*Math.pow(2,e-1);return i=Math.min(i,o.maxDelay),o.minRange&&o.maxRange&&(i*=(n=o.minRange,r=o.maxRange,Math.random()*(r-n)+n)),Math.round(i)}var Vt,Ft,zt,Gt=navigator.onLine;function Yt(){Gt=!0}unction Xt(e,t,n){e.addEventListener&&e.addEventListener(t,n,!1)}nction Zt(e,t){Z.warn("Both ".concat(e," and ").concat(t," are set in config, ").concat(t," will be ignored"))}!function(e){e.Default="default",e.India="india",e.China="china"}(Ft||(Ft={})),zt||(zt={}));var $t=(e(Vt={},Ft.Default,b),e(Vt,Ft.India,k),e(Vt,Ft.China,w),e(Vt,zt.EU,_),e(Vt,zt.TR,S),e(Vt,zt.US,j),Vt);function en(e){var t,n,r,o,i=(t=ae.getCustomConfig(),n=t.customUrl,r=t.urlStrategy,o=t.dataResidency,n?((o||r)&&Zt("customUrl",o?"dataResidency":"urlStrategy"),{app:n,gdpr:n}):(o&&r&&Zt("dataResidency","urlStrategy"),o?[o]:r===Ft.India?[Ft.India,Ft.Default]:r===Ft.China?[Ft.China,Ft.Default]:[Ft.Default,Ft.India,Ft.China]));return Array.isArray(i)?i.map(().filter(():[i]}function tn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=en(e),n=0;return{next:function(){return n<t.length?{value:t[n++],done:!1}:{value:void 0,done:!0}},reset:}var nn="undefined"==typeof Promise?n(702).Promise:Promise,rn=150,on=2147483647,an=6e4;const sn=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.url,i=n.method,a=void 0===i?"GET":i,s=n.params,c=void 0===s?{}:s,l=n.continueCb,d=n.strategy,f=n.wait,p={url:r,method:a,params:c,continueCb:l},h=r,v=a,g=o({},c),y=l,b=d,k=function(){e.reset(),t=e.next()},w=function(e,t){return e["/gdpr_forget_device"===t?"gdpr":"app"]},_=null,S={request:0,connection:0},j=D(f),P=null;function D(e){return(e=e||rn)>on?on:e}function N(e){var t=e.url,n=e.method,r=e.params,i=e.continueCb;t&&(h=t),n&&(v=n),x(r)||(g=o({},r)),g=o({createdAt:Ve()},g),"function"==typeof i&&(y=i)}function I(e){if(!P)return!1;if(_){var t=j-(Date.now()-P);if(e&&t<e)return!0;F()}return!1}function A(n){var r=n.wait,i=n.retrying;return e||(e=tn(),t=e.next()),j=r?D(r):j,I(r)?nn.resolve({status:"error",action:"CONTINUE",response:"",message:m.SKIP,code:"SKIP"}):h?(Z.log("".concat(i?"Re-trying":"Trying"," request ").concat(h," in ").concat(j,"ms")),P=Date.now(),T({endpoint:w(t.value,h),url:h,method:v,params:o({attempts:1},g)})):(Z.error("You must define url for the request to be sent"),nn.reject({status:"error",action:"CONTINUE",response:"",message:m.MISSING_URL,code:"MISSING_URL"}))}function T(e){return V(),Ht()?R(e):(S.connection+=1,Z.log("No internet connectivity, trying request ".concat(e.url," in ").concat(an,"ms")),new nn((function(t){_=setTimeout((,an)})))}function R(e){return new nn((function(t,n){_=setTimeout((function(){P=null;var r=E(e.params).filter((function(e){return K(u(e,2)[1])})).reduce(C,{});return Lt({endpoint:e.endpoint,url:e.url,method:e.method,params:o(o({},r),{},{attempts:(S.request?S.request+1:1)+S.connection})}).then((function(e){return q(e,t)})).catch(()}),j)}))}function O(){h=p.url,v=p.method,g=o({},p.params),y=p.continueCb}function B(e){Z.log("Request ".concat(h||"unknown"," ").concat(e?"failed":"has been finished")),S.request=0,S.connection=0,j=rn,O(),F()}function U(e){return S.request+=1,F(),A({wait:e||Wt(S.request,b),retrying:!0})}function q(e,t){e&&e.retry_in?t(U(e.retry_in)):(k(),"function"==typeof y?y(e,B,U):B(),t(e))}function L(n,r,o){if(n&&"RETRY"===n.action)if("NO_CONNECTION"===n.code){var i=e.next();i.done?(k(),r(U(an))):(t=i,r(U(rn)))}else r(U());else B(!0),o(n||{})}function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,n=e.method,r=e.params,o=void 0===r?{}:r,i=e.continueCb,a=e.wait;return N({url:t,method:n,params:o,continueCb:i}),A({wait:a})}nction F(){var e=!!P;V(),P=null,e&&(j=rn,S.request=0,S.connection=0,Z.log("Previous ".concat(h||"unknown"," request attempt canceled")),O())}return{send:M,isRunning:W,clear:F}};var un=cn=function(e){return{start:{inProgress:"Adjust SDK ".concat(un(e)," process has already started"),done:"Adjust SDK ".concat(un(e)," process is now started")},finish:{inProgress:"Adjust SDK ".concat(un(e)," process has already finished"),done:"Adjust SDK ".concat(un(e)," process is now finished")}}};function ln(e,t){var n=e.reason,r=e.pending,o=pt()||{},i="start"===t&&o.pending?"start":"finish",a="start"===t&&o.reason,s="finish"===t&&o.reason&&!o.pending;return a||s?(Z.log(cn(o.reason)[i].inProgress),!1):(Z.log(cn(n)[i].done),ht({reason:n||p,pending:r}),!0)}function dn(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return ln({reason:e,pending:t||!1},"start")}function fn(){var e=pt()||{};return e.reason===p||e.reason===h&&!e.pending?"off":e.reason===h&&e.pending?"paused":"on"}var pn="undefined"==typeof Promise?n(702).Promise:Promise,hn="activityState",mn=!1;function vn(e){return e?"unknown"===e.uuid?(dn({reason:h}),nt.destroy(),{exists:!0,stored:null}):(nt.init(e),{exists:!0,stored:e}):{exists:!1}}function gn(){return"off"!==fn()&&nt.isStarted()}function yn(){if(!gn())return pn.resolve(null);var e=o(o({},nt.current),{},{lastActive:Date.now()});return At.updateItem(hn,e).then(()}var bn="undefined"==typeof Promise?n(702).Promise:Promise,kn=sn({strategy:"long",continueCb:function(e,t){var n=e&&e.continue_in||null;return Sn.pause=n?{timestamp:Date.now(),wait:n}:null,At.getFirst(_n).then((function(e){return e?At.deleteItem(_n,e.timestamp):null})).then((function(){return t(),Sn.running=!1,In({wait:n})}))}}),wn=!1,_n="queue",Sn={running:!1,timestamp:null,pause:null};function jn(){var e=Date.now();return Sn.timestamp&&e<=Sn.timestamp&&(e=Sn.timestamp+1),Sn.timestamp=e,e}function Pn(e){return R(e,"session")&&nt.resetSessionOffset(),nt.updateLastActive(),yn()}function xn(e){var t=e.url,n=e.method,r=e.params,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=i.auto,s=i.timestamp;nt.updateParams(t,a);var c=E(r||{}).filter((function(e){return K(u(e,2)[1])})).reduce(C,{}),l={timestamp:jn(),url:t,method:n,params:o(o({},nt.getParams(t)),c)};return s&&(l.createdAt=s),At.addItem(_n,l).then(().then((function(){return Sn.running?{}:In()}))}function Dn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.timestamp,n=e.createdAt,r=e.url,i=e.method,a=e.params,s=arguments.length>1?arguments[1]:void 0,u=nt.current||{},c="/session"===r&&!u.installed,l=!r&&!i&&!a;return wn&&!c||l?(Sn.running=!1,bn.resolve({})):kn.send({url:r,method:i,params:o(o({},a),{},{createdAt:Ve(n||t)}),wait:s||Nn()})}function Nn(){var e=Sn.pause||{},t=e.timestamp,n=e.wait,r=Date.now()-(t||0);return r<n?n-r:null}function In(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.cleanUp,n=e.wait;if(Sn.running)return bn.resolve({});Sn.running=!0;var r=bn.resolve({});return t&&(r=r.then(Tn)),r.then(().then(()}function An(e){if(void 0!==e)if(e!==wn){var t=wn;wn=e,!e&&t&&In(),Z.info("The app is now in ".concat(e?"offline":"online"," mode"))}else Z.error("The app is already in ".concat(e?"offline":"online"," mode"));else Z.error("State not provided, true or false has to be defined")}function Tn(){var e=Date.now()-ae.requestValidityWindow;return At.deleteBulk(_n,e,"upperBound")}var Rn="undefined"==typeof Promise?n(702).Promise:Promise,Cn="globalParams",En="No type provided",On="Global parameter type not provided, `callback` or `partner` types are available";function Kn(e){return(e||[]).map(()}function Bn(){return Rn.all([At.filterBy(Cn,"callback"),At.filterBy(Cn,"partner")]).then((function(e){var t=u(e,2),n=t[0],r=t[1];return{callbackParams:Kn(n),partnerParams:Kn(r)}}))}function Un(e,t){if(void 0===t)return Z.error(On),Rn.reject({message:En});var n=A(e),r=Object.keys(n).map(();return Rn.all([At.filterBy(Cn,t),At.addBulk(Cn,r,!0)]).then((function(e){var n=u(e,2),o=n[0],i=n[1],a=T(o.map((function(e){return e.key})),i.map(());return Z.log("Following ".concat(t," parameters have been saved: ").concat(r.map(().join(", "))),a.length&&Z.log("Keys: ".concat(a.join(", ")," already existed so their values have been updated")),i}))}function qn(e,t){return void 0===t?(Z.error(On),Rn.reject({message:En})):At.deleteItem(Cn,[e,t]).then((function(n){return Z.log("".concat(e," ").concat(t," parameter has been deleted")),n}))}function Ln(e){return void 0===e?(Z.error(On),Rn.reject({message:En})):At.deleteBulk(Cn,e).then((function(t){return Z.log("All ".concat(e," parameters have been deleted")),t}))}var Mn,Wn,Vn,Fn="undefined"==typeof Promise?n(702).Promise:Promise,zn=!1,Gn=document;function Yn(){return Vn=function(){var e=document;if(void 0!==e.hidden)return{hidden:"hidden",visibilityChange:"visibilitychange"};for(var t=E({mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange",oHidden:"ovisibilitychange",webkitHidden:"webkitvisibilitychange"}),n=0;n<t.length;n+=1){var r=u(t[n],2),o=r[0],i=r[1];if(void 0!==e[o])return{hidden:o,visibilityChange:i}}return null}(),zn?Fn.reject({interrupted:!0,message:"Session watch already initiated"}):(zn=!0,it("session:finished",Zn),Vn&&Xt(Gn,Vn.visibilityChange,Qn),Vn&&Gn[Vn.hidden]?(Z.log("Session request attempt canceled because the tab is still hidden"),Fn.resolve({})):(nt.initParams(),er()))}function Jn(){return $n(),nt.updateSessionOffset(),nt.toBackground(),yn()}function Xn(){return At.getFirst(hn).then((function(e){var t=nt.current,n=t.lastActive||0;if(gn()&&n<e.lastActive){var r=!t.installed&&e.installed,o=(t.sessionCount||0)<(e.sessionCount||0);(r||o)&&at("sdk:installed"),nt.current=e,vt()}return e})).then(().then(er)}function Qn(){clearTimeout(Wn);var e=Vn&&Gn[Vn.hidden]?Jn:Xn;Wn=setTimeout(e,0)}function Hn(){Vn&&!Gn[Vn.hidden]&&(vt(),zn||"on"!==fn()||(Qt(Gn,Vn.visibilityChange,Hn),Io.__internal__.restartAfterAsyncEnable()))}function Zn(e,t){if(!t||"error"!==t.status)return nt.updateInstalled(),at("sdk:installed"),yn();Z.error("Session was not successful, error was returned from the server:",t.response)}unction er(){$n(),Mn=setInterval((,ae.sessionTimerWindow);var e=nt.current,t=e.lastInterval,n=e.sessionCount>0;return!n||n&&t*l>=ae.sessionWindow?Bn().then((function(e){var t,n,r;xn({url:"/session",method:"POST",params:(t=e,n=t.callbackParams,r=t.partnerParams,{callbackParams:n.length?A(n):null,partnerParams:r.length?A(r):null})},{auto:!0})})):(at("attribution:check"),yn())}var tr="undefined"==typeof Promise?n(702).Promise:Promise,nr=sn({url:"/attribution",strategy:"short",continueCb:function(e,t,n){if(!e||e&&"error"===e.status)return t(),tr.resolve({state:"unknown"});if(!e.ask_in)return t(),function(e){if(x(e)||!function(e){var t=e.adid,n=void 0===t?"":t,r=e.attribution,o=void 0===r?{}:r;return!!n&&!!T(rr,Object.keys(o)).length}(e)||function(e){var t=e.adid,n=e.attribution,r=nt.current.attribution||{};return!(n&&rr.some(())&&t===r.adid}(e))return tr.resolve({state:"same"});var t=E(e.attribution).filter((function(e){var t=u(e,1)[0];return-1!==rr.indexOf(t)})).reduce(C,{adid:e.adid});return nt.current=o(o({},nt.current),{},{attribution:t}),yn().then((function(){return at("attribution:change",t),Z.info("Attribution has been updated"),{state:"changed"}}))}(e);return n(e.ask_in)}}),rr=["tracker_token","tracker_name","network","campaign","adgroup","creative","click_label","state"];var or=sn({url:"/gdpr_forget_device",method:"POST",strategy:"short"}),ir={running:"Adjust SDK is running pending GDPR Forget Me request",pending:"Adjust SDK will run GDPR Forget Me request after initialisation",paused:"Adjust SDK is already prepared to send GDPR Forget Me request",off:"Adjust SDK is already disabled"};function ar(e){var t=fn();return e||"on"===t?ae.isInitialised()?(or.send({params:o({},nt.getParams())}).then((),!0):(Z.log(ir.pending),!0):(Z.log(ir[t]),!1)}function sr(){return ln({reason:h,pending:!1},"finish")}var ur={running:"Adjust SDK is running pending third-party sharing opt-out request",delayed:"Adjust SDK will run third-party sharing opt-out request after initialisation",pending:"Adjust SDK already queued third-party sharing opt-out request",off:"Third-party sharing opt-out is already done",start:{inProgress:"Third-party sharing opt-out has already started",done:"Third-party sharing opt-out is now started"},finish:{inProgress:"Third-party sharing opt-out has already finished",done:"Third-party sharing opt-out is now finished"}};function cr(){var e=mt()||{};return e.reason?e.pending?"pending":"off":"on"}function lr(e){var t=cr();return e||"on"===t?ae.isInitialised()?(xn({url:"/disable_third_party_sharing",method:"POST"}),!0):(Z.log(ur.delayed),!0):(Z.log(ur[t]),!1)}function dr(e,t){var n,r,i=mt()||{},a="start"===t&&e?"start":"finish",s="start"===t&&i.reason,u="finish"===t&&i.reason&&!i.pending;return s||u?(Z.log(ur[a].inProgress),!1):(Z.log(ur[a].done),r=(n={reason:p,pending:e})?o({},n):null,ut.stores[ct]=o(o({},dt()),{},{thirdPartySharingDisabled:r}),ft(),!0)}function fr(){return dr(!1,"finish")}function pr(){"pending"===cr()&&(Z.log(ur.running),lr(!0))}var hr=[];function mr(e,t){hr.push({method:e,description:t,timestamp:Date.now()})}var vr,gr="undefined"==typeof Promise?n(702).Promise:Promise,yr="eventDeduplication";function br(e,t){var n,r,i=t.callbackParams,a=t.partnerParams,s={},u=o({eventToken:e.eventToken,deduplicationId:e.deduplicationId},(n=e.revenue,r=e.currency,isNaN(n)||(n=parseFloat(n))<0||!r?{}:{revenue:n.toFixed(5),currency:r})),c=o(o({},A(i)),A(e.callbackParams)),l=o(o({},A(a)),A(e.partnerParams));return x(c)||(s.callbackParams=c),x(l)||(s.partnerParams=l),o(o({},u),s)}function kr(e){return e?At.getAll(yr).then(().then((function(t){return-1===t.indexOf(e)?function(e){var t=ae.getCustomConfig().eventDeduplicationListLimit,n=t>0?t:10;return At.count(yr).then((function(e){var t=gr.resolve();if(e>=n){var r=e-n+1;Z.log("Event deduplication list limit has been reached. Oldest ids are about to be removed (".concat(r," of them)")),t=At.trimItems(yr,r)}return t})).then((function(){return Z.info("New event deduplication id is added to the list: ".concat(e)),At.addItem(yr,{id:e})}))}(e):gr.reject({message:"Event won't be tracked, since it was previously tracked with the same deduplication id ".concat(e)})})):gr.resolve()}function wr(e){return{clickTime:Ve(),source:"web_referrer",referrer:decodeURIComponent(e)}}function _r(e,t){var n;(n=e||window.location.search.substring(1).split("&").map(().reduce(C,{}).adjust_referrer)&&xn({url:"/sdk_click",method:"POST",params:wr(n)},{timestamp:t})}function Sr(e){if(!e)return null;try{return JSON.parse(e)}catch(e){return null}}!vr||(vr={}));var jr,Pr=function(){eturn Me(e,[{key:"setItem",value:function(e,t){localStorage.setItem("".concat(this.storageName,".").concat(e),JSON.stringify(t))}},{key:"getItem",value:function(e){return Sr(localStorage.getItem("".concat(this.storageName,".").concat(e)))}},{key:"removeItem",value:function(e){localStorage.removeItem("".concat(this.storageName,".").concat(e))}}]),e}(),xr=function(){eturn Me(t,[{key:"setItem",value:function(e,t){this.items[e]=t}},{key:"getItem",value:function(e){return Object.prototype.hasOwnProperty.call(this.items,e)?this.items[e]:null}},{key:"removeItem",value:function(e){delete this.items[e]}}]),t}(),Dr=function(){function e(){qe(this,e)}return Me(e,null,[{key:"isLocalStorageSupported",value:function(){try{var e=(new Date).toString(),t=window.localStorage;t.setItem(e,e);var n=t.getItem(e)===e;return t.removeItem(e),!(!n||!t)}catch(e){return!1}}},{key:"createStorage",value:function(){return this.isLocalStorageSupported()?new Pr:new xr}}]),e}();"undefined"==typeof Promise&&n(702).Promise;function Nr(e,t,n){return n.request("/smart_banner",{app_web_token:e}).then((function(e){var n,r,o,i,a,s,u,c=e.find(();return c?(i=(n=c).title,a=n.description,s=n.button_label,u=n.tracker_token,i&&a&&s&&u?{appId:(null===(r=n.app)||void 0===r?void 0:r.default_store_app_id)||"",appName:(null===(o=n.app)||void 0===o?void 0:o.name)||"",position:n.position||jr.Bottom,imageUrl:n.image_url,header:i,description:a,buttonText:s,trackerToken:u,deeplinkPath:n.deeplink_path,dismissInterval:864e5}:null):null})).catch((function(e){return Z.error("Network error occurred during loading Smart Banner: "+JSON.stringify(e)),null}))}!function(e){e.Top="top",e.Bottom="bottom"}(jr||(jr={}));var Ir=n(379),Ar=n.n(Ir),Tr=n(795),Rr=n.n(Tr),Cr=n(569),Er=n.n(Cr),Or=n(565),Kr=n.n(Or),Br=n(216),Ur=n.n(Br),qr=n(589),Lr=n.n(qr),Mr=n(841),Wr={};Wr.styleTagTransform=Lr(),Wr.setAttributes=Kr(),Wr.insert=Er().bind(null,"head"),Wr.domAPI=Rr(),Wr.insertStyleElement=Ur();Ar()(Mr.Z,Wr);const Vr=Mr.Z&&Mr.Z.locals?Mr.Z.locals:void 0;var Fr="undefined"==typeof Promise?n(702).Promise:Promise,zr=function(){function t(n,r,o){qe(this,t),e(this,"appTraceUrl",(),e(this,"appName",void 0),e(this,"image",void 0),e(this,"placeholder",void 0),this.image=r,this.placeholder=o,this.appName=n.appName;var i=this.getSources(n);this.showImage(i)}return Me(t,[{key:"getSources",value:function(e){var t=[];return e.imageUrl&&t.push(e.imageUrl),t.push(this.appTraceUrl(e.appId)),t}},{key:"showImage",value:function(e){var t=this;return e.reduce((function(e,n){return e.catch((function(){return t.loadImage(n,t.image)}))}),Fr.reject()).then(().catch((function(){t.image.remove(),t.placeholder.innerText=t.appName.length?t.appName[0].toUpperCase():""}))}},{key:"loadImage",value:function(e,t){return new Fr(()}}]),t}(),Gr=function(){function t(n,r,o){qe(this,t),e(this,"parent",document.body),e(this,"banner",void 0),e(this,"dismissButton",null),e(this,"onDismiss",void 0),this.onDismiss=r,this.render(n,o)}return Me(t,[{key:"render",value:function(e,t){this.banner=document.createElement("div"),this.banner.setAttribute("class",Vr.bannerContainer);var n=e.position===jr.Top?Vr.stickyToTop:Vr.stickyToBottom,r=e.deeplinkPath?"?deeplink=".concat(encodeURIComponent(e.deeplinkPath)):"",o="".concat(t,"/").concat(e.trackerToken).concat(r);this.banner.innerHTML=function(e,t,n,r,o){return'\n  <div class="'.concat(Vr.banner," ").concat(e,'">\n    <div class="').concat(Vr.bannerBody,'">\n      <div class="').concat(Vr.content,'">\n        <button class="').concat(Vr.dismiss,'"></button>\n        <div class="').concat(Vr.appIcon,'">\n          <div class="').concat(Vr.placeholder,'"></div>\n          <img class="').concat(Vr.image,'" alt="').concat(t,'">\n        </div>\n        <div class="').concat(Vr.textContainer,'">\n          <h4 class="').concat(Vr.bannerText,'">').concat(t,'</h4>\n          <p class="').concat(Vr.bannerText,'">').concat(n,'</p>\n        </div>\n        <a class="').concat(Vr.action,'" href=').concat(o,">").concat(r,"</a>\n      </div>\n    </div>\n  </div>")}(n,e.header,e.description,e.buttonText,o),e.position===jr.Top?this.parent.insertBefore(this.banner,this.parent.firstChild):this.parent.appendChild(this.banner),this.dismissButton=this.getElemByClass(Vr.dismiss),this.dismissButton&&this.dismissButton.addEventListener("click",this.onDismiss);var i=this.getElemByClass(Vr.placeholder),a=this.getElemByClass(Vr.image);a&&i&&new zr(e,a,i)}},{key:"show",value:function(){this.banner.hidden=!1}},{key:"hide",value:,{key:"destroy",value:,{key:"removeDismissButtonHandler",value:function(){this.dismissButton&&this.onDismiss&&(this.dismissButton.removeEventListener("click",this.onDismiss),this.dismissButton=null)}},{key:"getElemByClass",value:function(e){if(this.banner){var t=this.banner.getElementsByClassName(e);return t.length>0?t[0]:null}return null}}]),t}(),Yr={status:0,message:"No internet connectivity"},Jr="undefined"==typeof Promise?n(702).Promise:Promise,Xr=function(){function e(t){qe(this,e),this.origin=t}return Me(e,[{key:"endpoint",get:set:,{key:"xhr",value:function(e){return new Jr((function(t,n){var r=new XMLHttpRequest;r.open("GET",e),[["Client-SDK","js".concat(U.version)],["Content-Type","application/json"]].forEach((),r.onerror=function(){return n(Yr)},r.onreadystatechange=function(){if(4===r.readyState){var e=r.status>=200&&r.status<300,o=Sr(r.responseText);0===r.status?n(Yr):e?t(o):n({status:r.status,message:o||r.responseText||""})}},r.send()}))}},{key:"encodeParams",value:function(e){return Object.keys(e).map(().join("&")}},{key:"request",value:function(e,t){var n=t?"?".concat(this.encodeParams(t)):"";return this.xhr("".concat(this.endpoint).concat(e).concat(n))}}]),e}();fined"==typeof Promise&&n(702).Promise;var to,no,ro,oo,io=function(){function e(t){qe(this,e),this.network=t}return Me(e,[{key:"endpoint",get:set:,{key:"request",value:]),e}(),ao=("undefined"==typeof Promise&&n(702).Promise,function(){eturn Me(e,[{key:"retries",value:function(t){var n=this,r=0;return function o(){var i=n.preferredUrls();if(!i||0===i.length)throw Z.error(e.NoPreferredUrlsDefinedError.message),e.NoPreferredUrlsDefinedError;var a=i[r++];return t(a).catch((function(e){if(e===Yr&&(Z.log("Failed to connect ".concat(a.endpointName," endpoint")),r<i.length))return Z.log("Trying ".concat(i[r].endpointName," one")),o();throw e}))}()}}]),e}());e(ao,"NoPreferredUrlsDefinedError",new ReferenceError("UrlStrategy: No preferred URL defined")),function(t){t.Default="default",t.India="india",t.China="china";var n,r=(e(n={},to.Default,b),e(n,to.India,k),e(n,to.China,w),n),o=function(e,t){return t===to.India?[e[to.India],e[to.Default]]:t===to.China?[e[to.China],e[to.Default]]:[e[to.Default],e[to.India],e[to.China]]};t.preferredUrlsGetter=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return function(){return o(t,e)}}}(to||(to={})),(no||(no={})).preferredUrlsGetter=function(e){return function(){return function(e){return[{endpointName:"Custom (".concat(e,")"),app:e,gdpr:e}]}(e)}},function(t){t.EU="EU",t.TR="TR",t.US="US";var n,r=(e(n={},ro.EU,_),e(n,ro.TR,S),e(n,ro.US,j),n),o=t.preferredUrlsGetter=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r;return }(ro||(ro={})),function(e){var t=function(e,t){Z.warn("Both ".concat(e," and ").concat(t," are set in config, ").concat(t," will be ignored"))};e.create=function(e){var n=e.customUrl,r=e.dataResidency,o=e.urlStrategy;return n?((r||o)&&t("customUrl",r?"dataResidency":"urlStrategy"),new ao(no.preferredUrlsGetter(n))):r?(o&&t("dataResidency","urlStrategy"),new ao(ro.preferredUrlsGetter(r))):new ao(to.preferredUrlsGetter(o))}}(oo||(oo={}));"undefined"==typeof Promise&&n(702).Promise;var so=function(t){!r,t);var n=eo(r);function r(t,o){var i,a=o.urlStrategy,s=o.urlStrategyConfig;return qe(this,r),e(Qr(i=n.call(this,t)),"lastSuccessfulEndpoint",void 0),e(Qr(i),"urlStrategy",void 0),i.urlStrategy=a||oo.create(s),i}return Me(r,[{key:"endpoint",get:,{key:"request",value:function(e,t){var n=this;return this.urlStrategy.retries((function(r){return n.network.endpoint=r.app,n.network.request(e,t).then(().catch(()}))}}]),r}(io);e(so,"DEFAULT_ENDPOINT",b.app),so||(so={});"undefined"==typeof Promise&&n(702).Promise;var uo=function(){function t(n,r){var o=n.webToken,i=n.logLevel,a=void 0===i?"error":i,s=n.dataResidency,u=n.onCreated,c=n.onDismissed;qe(this,t),e(this,"STORAGE_KEY_DISMISSED","closed"),e(this,"network",void 0),e(this,"storage",void 0),e(this,"timer",null),e(this,"dataFetchPromise",void 0),e(this,"banner",void 0),e(this,"onCreated",void 0),e(this,"onDismissed",void 0),this.onCreated=u,this.onDismissed=c,Z.setLogLevel(a);var l=s?{dataResidency:s}:{};this.network=r||new so(new Xr,{urlStrategyConfig:l}),this.storage=Dr.createStorage(),this.init(o)}return Me(t,[{key:"init",value:function(e){var t=this;if(this.banner)Z.error("Smart Banner already exists");else if(this.dataFetchPromise)Z.error("Smart Banner is initialising already");else{var n=function(){var e,t,n=null===(e=navigator)||void 0===e||null===(t=e.userAgent)||void 0===t?void 0:t.toLowerCase();if(n&&!(n.length<1))return/ipad|iphone|ipod/.test(n)?vr.iOS:n.includes("windows")?/phone|mobile/.test(n)?vr.WindowsPhone:vr.WindowsPC:n.includes("android")?vr.Android:void 0}();n?(this.dataFetchPromise=Nr(e,n,this.network),this.dataFetchPromise.then((function(r){if(t.dataFetchPromise=null,r){var o=t.getDateToShowAgain(r.dismissInterval);if(Date.now()<o)return Z.log("Smart Banner was dismissed"),void t.scheduleCreation(e,o);Z.log("Creating Smart Banner"),t.banner=new Gr(r,(,t.network.endpoint),Z.log("Smart Banner created"),t.onCreated&&t.onCreated()}else Z.log("No Smart Banners for ".concat(n," platform found"))}))):Z.log("This platform is not one of the targeting ones, Smart Banner will not be shown")}}},{key:"show",value:function(){var e=this;if(!this.banner)return this.dataFetchPromise?(Z.log("Smart Banner will be shown after initialisation finished"),void this.dataFetchPromise.then((function(){Z.log("Initialisation finished, showing Smart Banner"),e.show()}))):void Z.error("There is no Smart Banner to show, have you called initialisation?");this.banner.show()}},{key:"hide",value:function(){var e=this;if(!this.banner)return this.dataFetchPromise?(Z.log("Smart Banner will be hidden after initialisation finished"),void this.dataFetchPromise.then(()):void Z.error("There is no Smart Banner to hide, have you called initialisation?");this.banner.hide()}},{key:"destroy",value:function(){this.banner?(this.banner.destroy(),this.banner=null,Z.log("Smart Banner removed")):Z.error("There is no Smart Banner to remove")}},{key:"dismiss",value:function(e,t){Z.log("Smart Banner dismissed"),this.storage.setItem(this.STORAGE_KEY_DISMISSED,Date.now());var n=this.getDateToShowAgain(t);this.scheduleCreation(e,n),this.destroy(),this.onDismissed&&this.onDismissed()}},{key:"scheduleCreation",value:function(e,t){var n=this;this.timer&&(Z.log("Clearing previously scheduled creation of Smart Banner"),clearTimeout(this.timer),this.timer=null);var r=t-Date.now();this.timer=setTimeout((,r),Z.log("Smart Banner creation scheduled on "+new Date(t))}},{key:"getDateToShowAgain",value:function(e){var t=this.storage.getItem(this.STORAGE_KEY_DISMISSED);return t&&"number"==typeof t?t+e:Date.now()}}]),t}(),co=["logLevel","logOutput"],lo="undefined"==typeof Promise?n(702).Promise:Promise,fo=null,po=!1,ho=!1,mo=!1,vo=null;function go(){lr()&&dr(!0,"start")}function yo(){var e;"paused"===fn()&&(sr(),lo.all([(e={uuid:"unknown"},nt.current=e,At.clear(hn).then((function(){return At.addItem(hn,e)}))),At.clear(Cn),At.clear(_n)]).then(_o))}unction ko(){po=!1,ho=!1,hr=[],kn.clear(),Sn.running=!1,Sn.timestamp=null,Sn.pause=null,zn=!1,nt.toBackground(),$n(),Vn&&(clearTimeout(Wn),Qt(Gn,Vn.visibilityChange,Qn),Xt(Gn,Vn.visibilityChange,Hn)),nr.clear()}function wo(e){e&&Z.log("Adjust SDK has been shutdown due to asynchronous disable"),ko(),ot.forEach(clearTimeout),ot=[],rt={},nt.destroy(),Qt(window,"online",Yt),Qt(window,"offline",Jt),At.destroy(),ae.destroy()}function _o(){mo=!1,wo(),or.clear(),fo=null,Z.log("Adjust SDK instance has been destroyed")}function So(e){Z.log("Adjust SDK is starting with web_uuid set to ".concat(e.uuid));var t=nt.current.installed;"paused"===fn()&&(Z.log(ir.running),ar(!0)),t||pr();var n=fn(),r=return"off"===n?(wo(),lo.reject({interrupted:!0,message:r("due to complete async disable")})):"paused"===n?(ko(),lo.reject({interrupted:!0,message:r("due to partial async disable")})):ho?lo.reject({interrupted:!0,message:r("due to multiple synchronous start attempt")}):(In({cleanUp:!0}),Yn().then((function(){po=!1,ho=!0,t&&(jo(),pr())})))}function jo(){var e;mo=!0,hr.forEach((function(e){"function"==typeof e.method&&(Z.log("Delayed ".concat(e.description," task is running now")),e.method(e.timestamp))})),hr=[],(e="sdk:installed")&&E(rt).some((function(t){var n=u(t,2)[1];return n.some(()}))}function Po(e){if(e.interrupted)Z.log(e.message);else if(wo(),Z.error("Adjust SDK start has been canceled due to an error",e),e.stack)throw e}function xo(e){"off"!==fn()?(ae.set(e),Xt(window,"online",Yt),Xt(window,"offline",Jt),it("sdk:installed",jo),it("sdk:shutdown",(function(){return wo(!0)})),it("sdk:gdpr-forget-me",yo),it("sdk:third-party-sharing-opt-out",fr),it("attribution:check",(function(e,t){return n=t,r=nt.current,(i=(n||{}).ask_in)||!r.attribution&&r.installed?(nr.send({params:o({initiatedBy:n?"backend":"sdk"},nt.getParams()),wait:i}),nt.updateSessionOffset(),yn()):tr.resolve(r);var n,r,i})),"function"==typeof e.attributionCallback&&it("attribution:change",e.attributionCallback),(mn?pn.reject({interrupted:!0,message:"Adjust SDK start already in progress"}):(mn=!0,At.getFirst(hn).then(vn).then((function(e){if(e.exists)return mn=!1,e.stored;var t,n=x(nt.current)?{uuid:(t=Date.now(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,())}:nt.current;return At.addItem(hn,n).then((function(){return nt.init(n),vt(),mn=!1,n}))})))).then(So).then(_r).catch(Po)):Z.log("Adjust SDK is disabled, can not start the sdk")}function Do(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.schedule,o=n.waitForInitFinished,i=n.optionalInit;if(At.getType()!==v)if("on"===fn())if(i||bo()||!o){if("function"==typeof t){if(!r||mo&&ho||!i&&!bo())return t();mr(t,e),Z.log("Running ".concat(e," is delayed until Adjust SDK is up"))}}else Z.error("Adjust SDK can not ".concat(e,", sdk instance is not initialized"));else Z.log("Adjust SDK is disabled, can not ".concat(e));else Z.log("Adjust SDK can not ".concat(e,", no storage available"))}var No={initSdk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.logLevel,n=e.logOutput,r=i(e,co);Z.setLogLevel(t,n),bo()?Z.error("You already initiated your instance"):ae.hasMissing(r)||(po=!0,At.init(r.namespace).then((function(e){e.type!==v?(Z.info("Available storage is ".concat(e.type)),fo=o({},r),xo(r)):Z.error("Adjust SDK can not start, there is no storage available")})))},getAttribution:function(){return Do("get attribution",(function(){return nt.getAttribution()}))},getWebUUID:function(){return Do("get web_uuid",(function(){return nt.getWebUUID()}))},setReferrer:function(e){e&&"string"==typeof e?Do("setting reftag",(function(t){return _r(e,t)}),{schedule:!0,waitForInitFinished:!0,optionalInit:!0}):Z.error("You must provide a string referrer")},trackEvent:function(e){return function(e){if(At.getType()===v){var t="Adjust SDK can not track event, no storage available";return Z.log(t),lo.reject(t)}if("on"!==fn()){var n="Adjust SDK is disabled, can not track event";return Z.log(n),lo.reject(n)}if(!bo()){var r="Adjust SDK can not track event, sdk instance is not initialized";return Z.error(r),lo.reject(r)}return new lo((function(t){var n=function(n){return t(function(e,t){if(!e||e&&(x(e)||!e.eventToken)){var n="You must provide event token in order to track event";return Z.error(n),gr.reject(n)}return kr(e.deduplicationId).then(Bn).then((function(n){return xn({url:"/event",method:"POST",params:br(e,n)},{timestamp:t})})).catch((function(e){return e&&e.message&&Z.error(e.message),gr.reject(e)}))}(e,n))};!mo||!ho&&bo()?(mr(n,"track event"),Z.log("Running track event is delayed until Adjust SDK is up")):n()}))}(e)},addGlobalCallbackParameters:function(e){Do("add global callback parameters",(function(){return Un(e,"callback")}))},addGlobalPartnerParameters:function(e){Do("add global partner parameters",(function(){return Un(e,"partner")}))},removeGlobalCallbackParameter:function(e){Do("remove global callback parameter",(function(){return qn(e,"callback")}))},removeGlobalPartnerParameter:function(e){Do("remove global partner parameter",()},clearGlobalCallbackParameters:function(){Do("remove all global callback parameters",(function(){return Ln("callback")}))},clearGlobalPartnerParameters:switchToOfflineMode:function(){Do("set offline mode",(function(){return An(!0)}))},switchBackToOnlineMode:function(){Do("set online mode",(function(){return An(!1)}))},stop:function(){dn()&&ae.isInitialised()&&wo()},restart:function(){var e;((e=pt()||{}).reason===h?(Z.log("Adjust SDK is disabled due to GDPR-Forget-Me request and it can not be re-enabled"),!1):e.reason?(Z.log("Adjust SDK has been enabled"),ht(null),!0):(Z.log("Adjust SDK is already enabled"),!1))&&fo&&xo(fo)},gdprForgetMe:function(){var e=ar();e&&(e=dn(h,!0))&&ae.isInitialised()&&ko()},disableThirdPartySharing:function(){Do("disable third-party sharing",go,{schedule:!0})},initSmartBanner:function(e){vo?Z.error("Smart Banner already initialised"):vo=new uo(e)},showSmartBanner:function(){vo?vo.show():Z.error("Smart Banner is not initialised yet")},hideSmartBanner:__testonly__:{destroy:_o,clearDatabase:,__internal__:{restartAfterAsyncEnable:function(){Z.log("Adjust SDK has been restarted due to asynchronous enable"),fo&&xo(fo)}}};const Io=No})(),r=r.default})()));