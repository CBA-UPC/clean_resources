!(function(){"use strict";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};ar c,u=s((),d=p=function(t,e){for(var r,n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];t&&(r=console).info.apply(r,["%c[PA]["+e+"]","color: orange; font-weight: bold;"].concat(o))},l=function(t){(r,t);var n=r.prototype;return n.scrape=function(t){return Array.from(t.querySelectorAll(this.querySelector)).filter(()},n.markElements=function(t){t.forEach((function(t){t.setAttribute("data-gyg-scraped",Date.now().toString())}))},n.highlightElements=function(t){this.debug&&t.forEach(()},n.start=function(){var t=e(u.mark((function t(e){var r,n;return u.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.payload,n=this.scrape(e.document),this.markElements(n),this.highlightElements(n),this.processElements(n,r),p(this.debug,this.name,this.querySelector,"items found: "+n.length,n),t.abrupt("return",r);case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r}(d);ar h=new Uint8Array(16);ar y=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;or(var m=[],_=0;_<256;++_)m.push((_+256).toString(16).substr(1));I=function(t,e,r){function n(t,e,r,n){if("string"==typeof t&&(t=t)),"string"==typeof e&&(e=e)),16!==e.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var o=new Uint8Array(16+t.length);if(o.set(e),o.set(t,e.length),(o=function(t){var e=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var n=unescape(encodeURIComponent(t));t=[];for(var o=0;o<n.length;++o)t.push(n.charCodeAt(o))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=Math.ceil((t.length/4+2)/16),a=new Array(i),s=0;s<i;++s){for(var c=new Uint32Array(16),u=0;u<16;++u)c[u]=t[64*s+4*u]<<24|t[64*s+4*u+1]<<16|t[64*s+4*u+2]<<8|t[64*s+4*u+3];a[s]=c}a[i-1][14]=8*(t.length-1)/Math.pow(2,32),a[i-1][14]=Math.floor(a[i-1][14]),a[i-1][15]=8*(t.length-1)&4294967295;for(var d=0;d<i;++d){for(var p=new Uint32Array(80),l=0;l<16;++l)p[l]=a[d][l];for(var f=16;f<80;++f)p[f]=P(p[f-3]^p[f-8]^p[f-14]^p[f-16],1);for(var h=r[0],g=r[1],y=r[2],v=r[3],m=r[4],_=0;_<80;++_){var w=Math.floor(_/20),b=P(h,5)+E(w,g,y,v)+m+e[w]+p[_]>>>0;m=v,v=y,y=P(g,30)>>>0,g=h,h=b}r[0]=r[0]+h>>>0,r[1]=r[1]+g>>>0,r[2]=r[2]+y>>>0,r[3]=r[3]+v>>>0,r[4]=r[4]+m>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}(o))[6]=15&o[6]|80,o[8]=63&o[8]|128,r){n=n||0;for(var i=0;i<16;++i)r[n+i]=o[i];return r}return w(o)}try{n.name="v5"}catch(t){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}();function T(t,e){try{var r;e&&localStorage.setItem(t,e),window._GYG.localStorage=o({},window._GYG.localStorage,((r={})[t]=e,r))}catch(r){var n;window._GYG.localStorage=o({},window._GYG.localStorage,((n={})[t]=e,n))}}function k(t){try{if(localStorage.getItem(t))return localStorage.getItem(t)}catch(e){if(window._GYG.localStorage)return window._GYG.localStorage[t]}return null}var A=function(t){try{var e=new URL(t),r=(e.hostname+e.pathname).replace(/^www\./,"").replace(/\/$/,"");return I(r,"6ba7b811-9dad-11d1-80b4-00c04fd430c8")}catch(t){return}},S=function(t){function e(){return t.call(this,"GYG-Deeplinks",e.GYG_LINK_QUERY,window._GYG.debug)||this}i(e,t);var r=e.prototype;return r.getBoundingClientRect=function(t){var e=t.getBoundingClientRect(),r=e.width,n=e.height,o=e.x,i=e.y;return{x:void 0!==o?Math.round(o):void 0,y:void 0!==i?Math.round(i):void 0,width:void 0!==r?Math.round(r):void 0,height:void 0!==n?Math.round(n):void 0}},r.cleanUrl=function(t){var e=t;if(e&&e.searchParams.has("cmp")){var r,n=null==(r=e.searchParams.get("cmp"))?void 0:r.split("_amcid")[0];n&&e.searchParams.set("cmp",n)}return e.toString()},r.isDirectGYGLink=function(t){var e=t.getAttribute("href")||"";return/^https?:\/\/(www\.)?getyourguide/.test(e)},r.processElements=function(t,r){var n=this;t.filter(this.isDirectGYGLink).forEach((function(t){var i,a=n.getBoundingClientRect(t),s=t.getAttribute("href")||"",c=new URL(s),u=n.cleanUrl(c),d=c.searchParams.get("partner_id");d&&T("partner_id",d);var p=I(u,e.NAMESPACE),l=A(r.header.url),f=o({},a,{url:u,text:null==(i=t.textContent)?void 0:i.trim(),deeplink_id:p,page_id:l});n.attachIds(t,p,l),r.deeplinks=r.deeplinks||[],r.deeplinks.push(f)}))},r.attachIds=function(t,e,r){var n=t.getAttribute("href")||"";n&&((!window.hasOwnProperty("FIX")||window.hasOwnProperty("FIX")&&!window.FIX.hasOwnProperty("track"))&&(n=f("deeplink_id",e,n),r&&(n=f("page_id",r,n))),t.setAttribute("href",n.toString()))},e}(l);S.GYG_LINK_QUERY='a[href*="getyourguide."]',S.NAMESPACE="6ba7b811-9dad-11d1-80b4-00c04fd430c8";var R=function(t){function e(){return t.call(this,"VIATOR-Deeplinks",e.VIATOR_LINK_QUERY,window._GYG.debug)||this}return i(e,t),e.prototype.processElements=function(t,e){return t.forEach((function(t){var r,n={name:"viator",url:t.getAttribute("href"),text:null==(r=t.textContent)?void 0:r.trim()};e.competitor_deeplinks=e.competitor_deeplinks||[],e.competitor_deeplinks.push(n)})),e},e}(l);R.VIATOR_LINK_QUERY='a[href*="www.partner.viator.com"]';var O=function(t){function e(){return t.call(this,"TICKETBAR-Deeplinks",e.TICKETBAR_LINK_QUERY,window._GYG.debug)||this}return i(e,t),e.prototype.processElements=function(t,e){return t.forEach((function(t){var r,n={name:"ticketbar",url:t.getAttribute("href"),text:null==(r=t.textContent)?void 0:r.trim()};e.competitor_deeplinks=e.competitor_deeplinks||[],e.competitor_deeplinks.push(n)})),e},e}(l);O.TICKETBAR_LINK_QUERY='a[href*="ticketbar.eu"]';var x=function(t){function e(){return t.call(this,"MUSEMENT-Deeplinks",e.MUSEMENT_LINK_QUERY,window._GYG.debug)||this}return i(e,t),e.prototype.processElements=function(t,e){return t.forEach((function(t){var r,n={name:"musement",url:t.getAttribute("href"),text:null==(r=t.textContent)?void 0:r.trim()};e.competitor_deeplinks=e.competitor_deeplinks||[],e.competitor_deeplinks.push(n)})),e},e}(l);x.MUSEMENT_LINK_QUERY='a[href*="www.musement.com"]';var U=function(t){function e(){return t.call(this,"CIVITATIS-Deeplinks",e.CIVITATIS_LINK_QUERY,window._GYG.debug)||this}return i(e,t),e.prototype.processElements=function(t,e){t.forEach((function(t){var r,n={name:"civitatis",url:t.getAttribute("href"),text:null==(r=t.textContent)?void 0:r.trim()};e.competitor_deeplinks=e.competitor_deeplinks||[],e.competitor_deeplinks.push(n)}))},e}(l);U.CIVITATIS_LINK_QUERY='a[href*="www.civitatis.com"]';var C=function(t){function e(){return t.call(this,"TIQETS-Deeplinks",e.TIQETS_LINK_QUERY,window._GYG.debug)||this}return i(e,t),e.prototype.processElements=function(t,e){return t.forEach((function(t){var r,n={name:"tiqets",url:t.getAttribute("href"),text:null==(r=t.textContent)?void 0:r.trim()};e.competitor_deeplinks=e.competitor_deeplinks||[],e.competitor_deeplinks.push(n)})),e},e}(l);C.TIQETS_LINK_QUERY='a[href*="www.tiqets.com"]';var G=function(t){function e(){return t.call(this,"KLOOK-Deeplinks",e.KLOOK_LINK_QUERY,window._GYG.debug)||this}return i(e,t),e.prototype.processElements=function(t,e){return t.forEach((function(t){var r,n={name:"klook",url:t.getAttribute("href"),text:null==(r=t.textContent)?void 0:r.trim()};e.competitor_deeplinks=e.competitor_deeplinks||[],e.competitor_deeplinks.push(n)})),e},e}(l);G.KLOOK_LINK_QUERY='a[href*="www.klook.com"]';var L=[S,R,O,x,U,C,G],j=function(t){var e=new URL(t),r=e.pathname.replace(/\/$/,"").split("/").pop().split("."),n=r[0];"activites"===n&&(n="activities"),"activities"!==n&&"city"!==n&&"availability"!==n&&"activities-auto"!==n&&"map"!==n&&(n="custom");var o=r[1];"jpg"===o&&(o="jpeg");var i={p:e.searchParams.has("partner_id")?e.searchParams.get("partner_id"):e.pathname.split("/")[1],w:n,f:o,m:e.searchParams.has("cmp")?e.searchParams.get("cmp"):void 0,q:e.searchParams.has("q")?e.searchParams.get("q"):void 0,i:e.searchParams.has("iata")?e.searchParams.get("iata"):void 0,d:e.searchParams.has("location_id")?e.searchParams.get("location_id"):void 0,c:e.searchParams.has("currency")?e.searchParams.get("currency"):void 0,l:e.searchParams.has("locale_code")?e.searchParams.get("locale_code"):void 0,n:e.searchParams.has("number_of_items")?Number(e.searchParams.get("number_of_items")):void 0,t:e.searchParams.has("tour_ids")?e.searchParams.get("tour_ids"):void 0,u:e.searchParams.has("tour_id")?e.searchParams.get("tour_id"):void 0,h:e.searchParams.has("theme")?e.searchParams.get("theme"):void 0,v:e.searchParams.has("variant")?e.searchParams.get("variant"):void 0,e:e.searchParams.has("excluded_tour_ids")?e.searchParams.get("excluded_tour_ids"):void 0,a:e.searchParams.has("lat")?e.searchParams.get("lat"):void 0,o:e.searchParams.has("lon")?e.searchParams.get("lon"):void 0};return I(JSON.stringify(i),"0e7c8e4a-453a-4a3f-aa76-186f61d75001")},D=function(t){function e(){return t.call(this,"GYG-Widget",e.GYG_WIDGET_QUERY,window._GYG.debug)||this}i(e,t);var r=e.prototype;return r.extractIds=function(t){return t?t.split(",").map(().filter(():null},r.parseNumber=function(t){return t?parseInt(t):null},r.parseFloat=(),r.getBoundingClientRect=function(t){var e=t.getBoundingClientRect(),r=e.width,n=e.height,o=e.x,i=e.y;return{x:void 0!==o?Math.round(o):void 0,y:void 0!==i?Math.round(i):void 0,width:void 0!==r?Math.round(r):void 0,height:void 0!==n?Math.round(n):void 0}},r.getWidgetType=function(t){var e=t.pathname.split("/")[2].split(".")[0];return"activites"===e&&(e="activities"),"activities"!==e&&"city"!==e&&"availability"!==e&&"activities-auto"!==e&&"map"!==e&&(e="custom"),e},r.getWidgetFormat=function(t){var e=t.pathname.split("/")[2].split("."),r="frame";return e.length>1&&"jpg"===(r=e[1])&&(r="jpeg"),r},r.getWidgetRenderingTime=function(t){var e=t.parentElement;if(e){var r=t.getAttribute("data-gyg-widget-rendered"),n=e.getAttribute("data-gyg-widget-created");if(r&&n)return parseInt(r,10)-parseInt(n,10)}},r.processElements=function(t,e){var r=this;return t.forEach((function(t){var n=r.getBoundingClientRect(t),i=t.getAttribute("src");if(i){var a=new URL(i),s=a.searchParams.get("partner_id"),c=o({},n,{type:r.getWidgetType(a),rendering_time:r.getWidgetRenderingTime(t),widget_parameters:{campaign:a.searchParams.get("cmp"),currency:a.searchParams.get("currency"),excluded_tour_ids:r.extractIds(a.searchParams.get("excluded_tour_ids")),iata:a.searchParams.get("iata"),locale_code:a.searchParams.get("locale_code"),number_of_items:r.parseNumber(a.searchParams.get("number_of_items")),partner_id:s,query:a.searchParams.get("q"),tour_ids:r.getTourIdsFromSearchParams(a.searchParams),widget_id:j(i),geo_location:{latitude:r.parseFloat(a.searchParams.get("lat")),longitude:r.parseFloat(a.searchParams.get("lon"))},format:r.getWidgetFormat(a)}});s&&T("partner_id",s),e.widgets=e.widgets||[],e.widgets.push(c)}})),e},r.getTourIdsFromSearchParams=function(t){var e=this.extractIds(t.get("tour_ids"));if(!e){var r=this.parseNumber(t.get("tour_id"));return r?[r]:null}return e},e}(l);D.GYG_WIDGET_QUERY='iframe[src^="https://widget.getyourguide.com"][data-gyg-widget-rendered]';var N=function(t){function e(){return t.call(this,"CIVITATIS-CompetitorWidgets",e.CIVITATIS_LINK_QUERY,window._GYG.debug)||this}return i(e,t),e.prototype.processElements=function(t,e){t.forEach((function(t){var r={name:"civitatis",url:t.getAttribute("src")};e.competitor_widgets=e.competitor_widgets||[],e.competitor_widgets.push(r)}))},e}(l);N.CIVITATIS_LINK_QUERY='iframe[src*="www.civitatis.com"]';var B=function(t){function e(){return t.call(this,"KLOOK-CompetitorWidgets",e.KLOOK_LINK_QUERY,window._GYG.debug)||this}return i(e,t),e.prototype.processElements=function(t,e){return t.forEach((function(t){var r={name:"klook",url:t.getAttribute("src")};e.competitor_widgets=e.competitor_widgets||[],e.competitor_widgets.push(r)})),e},e}(l);B.KLOOK_LINK_QUERY='iframe[src*="affiliate.klook.com"]';var Y=function(t){function e(){return t.call(this,"Ticketbar-CompetitorWidgets",e.TICKETBAR_WIDGET,window._GYG.debug)||this}return i(e,t),e.prototype.processElements=function(t,e){return t.forEach((),e},e}(l);Y.TICKETBAR_WIDGET='div[class*="Ticketbar-Widget"]';var M=function(t){function e(){return t.call(this,"Tiqets-CompetitorWidgets",e.TIQETS_WIDGET,window._GYG.debug)||this}return i(e,t),e.prototype.processElements=function(t,e){return t.forEach((function(t){var r={name:"tiqets",url:t.getAttribute("src")};e.competitor_widgets=e.competitor_widgets||[],e.competitor_widgets.push(r)})),e},e}(l);M.TIQETS_WIDGET='iframe[src*="www.tiqets.com/widgets"]';var W=function(t){function e(){return t.call(this,"Viator-CompetitorWidgets",e.VIATOR_WIDGET,window._GYG.debug)||this}return i(e,t),e.prototype.processElements=function(t,e){return t.forEach((function(t){var r={name:"viator",url:t.getAttribute("src")};e.competitor_widgets=e.competitor_widgets||[],e.competitor_widgets.push(r)})),e},e}(l);W.VIATOR_WIDGET='iframe[src*="www.viator.com/orion/widget"]';var V=function(t){function e(){return t.call(this,"Mediavine-CompetitorWidgets",e.MEDIAVINE_WIDGET,window._GYG.debug)||this}return i(e,t),e.prototype.processElements=function(t,e){return t.forEach((function(t){var r=t.getAttribute("data-slotid"),n={name:"mediavine",url:document.baseURI+"#slot="+r};e.competitor_widgets=e.competitor_widgets||[],e.competitor_widgets.push(n)})),e},e}(l);V.MEDIAVINE_WIDGET='div[class*="mv-ad-box"]';var F,q=[].concat(L,[D,N,B,Y,M,W,V]),K=function(t){function r(){return t.apply(this,arguments)||this}return i(r,t),r.prototype.start=function(){var t=e(u.mark((function t(e){var r,n,o,i;return u.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.payload,n=document.body,o=performance.timing,i=o.secureConnectionStart,r.page={width:n.offsetWidth,height:n.scrollHeight,page_title:document.title,performance:{navigation_start:o.navigationStart,unload_event_start:o.unloadEventStart,unload_event_end:o.unloadEventEnd,redirect_start:o.redirectStart,redirect_end:o.redirectEnd,fetch_start:o.fetchStart,domain_lookup_start:o.domainLookupStart,domain_lookup_end:o.domainLookupEnd,connect_start:o.connectStart,connect_end:o.connectEnd,secure_connection_start:null!=i?i:0,request_start:o.requestStart,response_start:o.responseStart,response_end:o.responseEnd,dom_loading:o.domLoading,dom_interactive:o.domInteractive,dom_content_loaded_event_start:o.domContentLoadedEventStart,dom_content_loaded_event_end:o.domContentLoadedEventEnd,dom_complete:o.domComplete,load_event_start:o.loadEventStart,load_event_end:o.loadEventEnd}},t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r}(d),$=function(t){function r(){return t.apply(this,arguments)||this}i(r,t);var n=r.prototype;return n.getOS=function(){var t="Unknown OS";return-1!==navigator.appVersion.indexOf("Win")&&(t="Windows"),-1!==navigator.appVersion.indexOf("Mac")&&(t="MacOS"),-1!==navigator.appVersion.indexOf("X11")&&(t="UNIX"),-1!==navigator.appVersion.indexOf("Linux")&&(t="Linux"),t},n.getPartnerHashCode=function(){var t,e=null,r=document.querySelector('script[src*="getyourguide.com/dist/pa."]');return r&&(e=r.getAttribute("data-gyg-partner-id"))&&T("partner_id",e),e||(e=k("partner_id")),null==(t=e)?void 0:t.toUpperCase()},n.isMobileDevice=n.getPlatform=n.start=function(){var t=e(u.mark((function t(e){var r,n,o,i,a,s,c,d,p,l,f,h,g,y;return u.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.payload,n=navigator,i=void 0===(o=n.userAgent)?null:o,s=void 0===(a=n.language)?null:a,c=document,p=void 0===(d=c.referrer)?null:d,l=window.location,h=void 0===(f=l.href)?null:f,y=void 0===(g=l.origin)?null:g,r.header={platform:this.getPlatform(),domain:y,url:h,user_agent:i,referrer_domain:p,os:this.getOS(),partner_hash_code:this.getPartnerHashCode(),accept_language:[s]},t.abrupt("return",r);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r}(d),Q=s(();(F=Q)&&F.__esModule&&Object.prototype.hasOwnProperty.call(F,"default");var H=Q.get,J=Q.set,z="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==z&&z,X="URLSearchParams"in z,Z="Symbol"in z&&"iterator"in Symbol,tt="FileReader"in z&&"Blob"in z&&),et="FormData"in z,rt="ArrayBuffer"in z;if(rt)var nt=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],ot=ArrayBuffer.isView||ype.append=ct.prototype.delete=ct.prototype.get=ct.prototype.has=ct.prototype.set=ct.prototype.forEach=ct.prototype.keys=ct.prototype.values=ct.prototype.entries=Z&&(ct.prototype[Symbol.iterator]=ct.prototype.entries);var ht=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];prototype.clone=ft.call(gt.prototype),ft.call(vt.prototype),vt.prototype.clone=vt.error=var mt=[301,302,303,307,308];vt.redirect=var _t=z.DOMException;try{new _t}catch(t){(_t=.prototype=Object.create(Error.prototype),_t.prototype.constructor=_t}t.polyfill=!0,z.fetch||(z.fetch=wt,z.Headers=ct,z.Request=gt,z.Response=vt);var bt=function(t){return Object.prototype.hasOwnProperty.call(t,"GYG")||(t.GYG=t.GYG||{}),t.GYG.visitorIdPromise||(t.GYG.visitorIdPromise=fetch("https://widget.getyourguide.com/gnikcart",{credentials:"include"}).then(().catch((function(){var e=b().replace(/-/g,"").toUpperCase().substring(0,32);t.GYG.visitorIdPromise=Promise.resolve({visitor_id:e})}))),t.GYG.visitorIdPromise},Et=function(t){function r(){return t.apply(this,arguments)||this}i(r,t);var n=r.prototype;return n.getVisitorId=function(){var t=e(u.mark((function t(){var e,r;return u.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=sessionStorage.getItem("gyg_visitor_id")||""){t.next=8;break}return t.next=4,bt(window);case 4:(r=t.sent.visitor_id)&&sessionStorage.setItem("gyg_visitor_id",r),e=r;case 8:return t.abrupt("return",e);case 9:case"end":return t.stop()}}),t)})));return (),n.getSessionId=function(t){return(t=t||H("session_id"))||(t=b(),J("session_id",t)),t},n.start=function(){var t=e(u.mark((function t(e){var r,n,o,i,a;return u.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.sessionId,n=e.payload,o=navigator,a=void 0===(i=o.language)?null:i,t.next=4,this.getVisitorId();case 4:return t.t0=t.sent,t.t1=this.getSessionId(r),t.t2=a,n.user={visitor_id:t.t0,session_id:t.t1,locale_code:t.t2},t.abrupt("return",n);case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r}(d),Pt=function(t){function r(){return t.apply(this,arguments)||this}return i(r,t),r.prototype.start=function(){var t=e(u.mark((function t(e){var n;return u.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=e.payload).event_properties={uuid:b(),sent_by:r.SENT_BY},t.abrupt("return",n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),r}(d);Pt.SENT_BY="PartnerAnalyzer";var It=[].concat([Pt,Et,$,K,function(t){function r(){return t.apply(this,arguments)||this}i(r,t);var n=r.prototype;return n.isScriptLoadedViaWidget=n.getScriptOriginType=function(t){var e=t.some(this.isScriptLoadedViaWidget),r=!t.every(this.isScriptLoadedViaWidget);return e&&r?"BOTH":e?"WIDGET":"DIRECT"},n.getScripts=function(){var t="production"===window._GYG.env?"https://widget.getyourguide.com/dist/pa.umd.production.min.js":"dist/pa.umd.development.js";return Array.from(document.querySelectorAll('script[src*="'+t+'"]'))},n.start=function(){var t=e(u.mark((function t(e){var r,n;return u.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.payload,n=this.getScriptOriginType(this.getScripts()),r.script_origin=n,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),r}(d)],q),Tt=s(();const kt=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,At=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,St=/^["{[]|^-?[0-9][0-9.]{0,14}$/;unction Ot(t){if("string"!=typeof t)return t;const e=t.toLowerCase();if("true"===e)return!0;if("false"===e)return!1;if("null"===e)return null;if("nan"===e)return NaN;if("infinity"===e)return Infinity;if("undefined"!==e){if(!St.test(t))return t;try{return kt.test(t)||At.test(t)?JSON.parse(t,Rt):JSON.parse(t)}catch(e){return t}}}const xt=/#/g,Ut=/&/g,Ct=/=/g,Gt=/\+/g,Lt=/%5B/gi,jt=/%5D/gi,Dt=/%5E/gi,Nt=/%60/gi,Bt=/%7B/gi,Yt=/%7C/gi,Mt=/%7D/gi,Wt=/%20/gi;function Vt(t){return function(t){return encodeURI(""+t).replace(Yt,"|").replace(Lt,"[").replace(jt,"]")}(t).replace(Gt,"%2B").replace(Wt,"+").replace(xt,"%23").replace(Ut,"%26").replace(Nt,"`").replace(Bt,"{").replace(Mt,"}").replace(Dt,"^")}nction Kt(t=""){const e={};"?"===t[0]&&(t=t.substr(1));for(const r of t.split("&")){const t=r.match(/([^=]+)=?(.*)/)||[];if(t.length<2)continue;const n=qt(t[1]);if("__proto__"===n||"constructor"===n)continue;const o=qt((t[2]||"").replace(Gt," "));e[n]?Array.isArray(e[n])?e[n].push(o):e[n]=[e[n],o]:e[n]=o}return e}const $t=/^\w+:(\/\/)?/,Qt=/^\/\/[^/]+/,Ht=/\/$|\/\?/;unction zt(t="",e=!1){if(!e)return t.endsWith("/")?t:t+"/";if(Jt(t,!0))return t||"/";const[r,...n]=t.split("?");return r+"/"+(n.length?"?"+n.join("?"):"")}function Xt(t=""){return(t)?t.substr(1):t)||"/"}st re=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function ne(t="GET"){return re.has(t.toUpperCase())}const oe=new Set(["image/svg","application/xml","application/xhtml","application/html"]),ie=/^application\/(?:[\w!#$%&*`\-.^~]*\+)?json(;.+)?$/i,ae=new Set([408,409,425,429,500,502,503,504]),se=),ce=function t(e){const{fetch:r,Headers:n}=e;function o(t){if(!1!==t.options.retry){const e="number"==typeof t.options.retry?t.options.retry:ne(t.options.method)?0:1,r=t.response&&t.response.status||500;if(e>0&&ae.has(r))return i(t.request,{...t.options,retry:e-1})}const e=function(t,e,r){let n="";t&&r&&(n=`${r.status} ${r.statusText} (${t.toString()})`),e&&(n=`${e.message} (${n})`);const o=new ee(n);return Object.defineProperty(o,"request",{get:()=>t}),Object.defineProperty(o,"response",{get:),Object.defineProperty(o,"data",{get:),o}(t.request,t.error,t.response);throw Error.captureStackTrace&&Error.captureStackTrace(e,i),e}const i=async function(t,i={}){const a={request:t,options:{...e.defaults,...i},response:void 0,error:void 0};a.options.onRequest&&await a.options.onRequest(a),"string"==typeof a.request&&(a.options.baseURL&&(a.request=function(t,e){if(!(r=e)||"/"===r)return t;var r;const n=function(t="",e=!1){if(!e)return(Jt(t)?t.slice(0,-1):t)||"/";if(!Jt(t,!0))return t||"/";const[r,...n]=t.split("?");return(r.slice(0,-1)||"/")+(n.length?"?"+n.join("?"):"")}(e);return t.startsWith(n)?t:function(t,...e){let r=t||"";for(const t of e.filter(Zt))r=r?zt(r)+Xt(t):t;return r}(n,t)}(a.request,a.options.baseURL)),a.options.params&&(a.request=function(t,e){const r=function t(e="",r){if(!function(t,e=!1){return $t.test(t)||e&&Qt.test(t)}(e,!0))return r?t(r+e):te(e);const[n="",o,i=""]=(e.replace(/\\/g,"/").match(/([^:/]+:)?\/\/([^/@]+@)?(.*)/)||[]).splice(1),[a="",s=""]=(i.match(/([^/?#]*)(.*)?/)||[]).splice(1),{pathname:c,search:u,hash:d}=te(s);return{protocol:n,auth:o?o.substr(0,o.length-1):"",host:a,pathname:c,search:u,hash:d}}(t),n={...Kt(r.search),...e};return r.search=function(t){return Object.keys(t).map(e=>{return r=e,"number"!=typeof(n=t[e])&&"boolean"!=typeof n||(n=String(n)),n?Array.isArray(n)?n.map(.join("&"):`${Ft(r)}=${Vt(n)}`:Ft(r);var r,n}).join("&")}(n),function(t){const e=t.pathname+(t.search?(t.search.startsWith("?")?"":"?")+t.search:"")+t.hash;return t.protocol?t.protocol+"//"+(t.auth?t.auth+"@":"")+t.host+e:e}(r)}(a.request,a.options.params)),a.options.body&&ne(a.options.method)&&function(t){if(void 0===t)return!1;const e=typeof t;return"string"===e||"number"===e||"boolean"===e||null===e||"object"===e&&(!!Array.isArray(t)||t.constructor&&"Object"===t.constructor.name||"function"==typeof t.toJSON)}(a.options.body)&&(a.options.body="string"==typeof a.options.body?a.options.body:JSON.stringify(a.options.body),a.options.headers=new n(a.options.headers),a.options.headers.has("content-type")||a.options.headers.set("content-type","application/json"),a.options.headers.has("accept")||a.options.headers.set("accept","application/json"))),a.response=await r(a.request,a.options).catch(async t=>(a.error=t,a.options.onRequestError&&await a.options.onRequestError(a),o(a)));const s=(a.options.parseResponse?"json":a.options.responseType)||function(t=""){if(!t)return"json";const e=t.split(";").shift();return ie.test(e)?"json":oe.has(e)||e.startsWith("text/")?"text":"blob"}(a.response.headers.get("content-type")||"");if("json"===s){const t=await a.response.text();a.response._data=(a.options.parseResponse||Ot)(t)}else a.response._data=await a.response[s]();return a.options.onResponse&&await a.options.onResponse(a),a.response.ok||a.options.onResponseError&&await a.options.onResponseError(a),a.response.ok?a.response:o(a)},a=function(t,e){return i(t,e).then(};return a.raw=i,a.create=(r={})=>t({...e,defaults:{...e.defaults,...r}}),a}({fetch:se.fetch||(,Headers:se.Headers});var ue=Object.defineProperty,de=Object.defineProperties,pe=Object.getOwnPropertyDescriptors,le=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable,ge=ye=ve=me=class _e{og(t,e){var r,n,o,i,a,s;return e&&this._config?(e.producer_properties={common:this.autoPopulateCommonProperties(null==(r=e.producer_properties)?void 0:r.common),web_frontend:this.autoPopulateWebFrontendProperties(null==(n=e.producer_properties)?void 0:n.web_frontend)},this._config.isDebug&&console.log(`Would send this event to ${this.getEventUrl(t)}:`,e),o=this.getEventUrl(t),i=e,a=this._config.xRequestId,s=function*(){if(me()&&navigator.sendBeacon){const t=new Blob([JSON.stringify(i)],{type:"application/vnd.gyg.v2+json"});return navigator.sendBeacon(o,t)}const t="undefined"!=typeof AbortController?new AbortController:void 0,e=setTimeout(2e3),r=a?{"x-request-id":a}:void 0,n=yield ce(o,{method:"POST",mode:"cors",cache:"no-cache",headers:ye({"Content-Type":"application/vnd.gyg.v2+json"},r),keepalive:!0,body:i,signal:null==t?void 0:t.signal});return clearTimeout(e),n},new Promise():Promise.resolve()}autoPopulateCommonProperties(t){var e,r;return ve(ye({},null!=t?t:{}),{sent_by:null!=(e=this._config.sentBy)?e:"",timestamp:(new Date).toISOString(),producer_id:b(),tracking_method:"collector",application_version:null!=(r=this._config.applicationVersion)?r:""})}autoPopulateWebFrontendProperties(t){var e,r,n,o,i,a,s,c,u;return ve(ye({},null!=t?t:{}),{platform:null!=(e=this._config.platform)?e:"",user_agent:me()?navigator.userAgent:null!=(r=this._config.userAgent)?r:"",view_id:null!=(o=null==(n=this._config)?void 0:n.viewId)?o:"",container_name:null!=(a=null==(i=this._config)?void 0:i.containerName)?a:"",visitor_id:this._config.visitorId,domain:me()?window.location.host:null!=(s=this._config.domain)?s:"",url:me()?window.location.href:null!=(c=this._config.url)?c:"",referrer_url:me()?document.referrer:null!=(u=this._config.referrerUrl)?u:""})}var we=function(){function t(t,e,r){void 0===r&&(r="https://collector.getyourguide.com"),this.dataRepository=t,this.document=e,this.baseUrl=r}var e=t.prototype;return e.sendEvent=function(t){window.fetch(this.collectorUrl,{method:"POST",headers:{"Content-type":"text/plain"},body:JSON.stringify(t),keepalive:!0})},e.sendEventV2=function(t,e){var r,n,o,i,a;!function(t,e,r){try{new _e({isDebug:!1,collectorUrl:t.collector_url,sentBy:t.sent_by,applicationVersion:t.version,platform:t.platform,viewId:t.view_id,containerName:t.container_name,userAgent:t.userAgent,domain:t.domain,url:t.url,referrerUrl:t.referrer_url,visitorId:t.visitor_id}).log(r,e)}catch(t){console.error("AEL ERROR",t)}}({collector_url:this.baseUrl,version:this.dataRepository.version,platform:null==(r=this.dataRepository.header)?void 0:r.platform,view_id:"",container_name:this.dataRepository.container_name,userAgent:null==(n=this.dataRepository.header)?void 0:n.user_agent,domain:this.document.domain,url:this.document.URL,referrer_url:null==(o=this.dataRepository.header)?void 0:o.referrer_url,visitor_id:null==(i=this.dataRepository.user)?void 0:i.visitor_id,sent_by:null==(a=this.dataRepository.event_properties)?void 0:a.sent_by},t,e)},t}(),be=function(t){(r,t);var o=r.prototype;return o.cleanupDataRepository=function(){delete this.dataRepository.competitor_deeplinks,delete this.dataRepository.competitor_widgets,delete this.dataRepository.deeplinks,delete this.dataRepository.widgets},o.collectData=function(){var t=e(u.mark((function t(e){var r=this;return u.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(It.map((function(t){return(new t).start({document:e,payload:r.dataRepository,visitorId:r.visitorId,sessionId:r.sessionId})})));case 2:case"end":return t.stop()}}),t)})));return (),o.onNewPageEvent=function(){if(this.dataRepository.user&&this.dataRepository.header){var t=this.getEventV2Payload();try{this.sendEventV2(t,"PartnerAnalyzerPageRequest"),this.cleanupDataRepository()}catch(t){console.error("PA ERROR",t)}}else console.log("PA: Data hasn't been collected yet, skipping event")},o.addEventListeners=function(){var t=this,e=function(e){window.addEventListener(e,t.onNewPageEvent.bind(t),{capture:!0})};e("onpagehide"in window?"pagehide":"unload"),Tt.isHistorySupported()&&e("changestate")},o.addPostMessageListener=function(){var t=this;window.addEventListener("message",(function(e){var r=e.data.sessionId;t.sessionId=void 0===r?null:r}),{once:!0,passive:!0,capture:!0})},o.start=function(){var t=this;this.addEventListeners(),this.addPostMessageListener(),setInterval((function(){if("complete"===t.document.readyState)try{t.collectData(document)}catch(t){}}),1e3)},o.getEventV2Payload=function(){var t=this.getWidgetsV2(),e=A(this.dataRepository.header.url);return{customer_id:this.dataRepository.user.customer_id,partner_hash_code:this.dataRepository.header.partner_hash_code,partner_id:this.dataRepository.header.partner_id,page_id:e,page:this.dataRepository.page,widgets:t,deeplinks:this.dataRepository.deeplinks,competitor_widgets:this.dataRepository.competitor_widgets,competitor_deeplinks:this.dataRepository.competitor_deeplinks,version:this.dataRepository.version,script_origin:this.dataRepository.script_origin?this.dataRepository.script_origin.toString():""}},o.getWidgetV2Parameters=function(t){var e=t.widget_parameters&&this.getGeoLocationIfPresent(t.widget_parameters.geo_location),r=t.widget_parameters&&{widget_id:t.widget_parameters.widget_id,campaign:this.getParameterIfPresent(t.widget_parameters.campaign),currency:this.getParameterIfPresent(t.widget_parameters.currency),excluded_tour_ids:this.getParameterIfPresent(t.widget_parameters.excluded_tour_ids),iata:this.getParameterIfPresent(t.widget_parameters.iata),location_id:this.getParameterIfPresent(t.widget_parameters.location_id),locale_code:this.getParameterIfPresent(t.widget_parameters.locale_code),number_of_items:this.getParameterIfPresent(t.widget_parameters.number_of_items),partner_hash_code:this.getParameterIfPresent(t.widget_parameters.partner_id),query:this.getParameterIfPresent(t.widget_parameters.query),version:this.getParameterIfPresent(t.widget_parameters.version),release_version:this.getParameterIfPresent(t.widget_parameters.release_version),format:this.getParameterIfPresent(t.widget_parameters.format),tour_ids:this.getParameterIfPresent(t.widget_parameters.tour_ids)};return e&&(r.geo_location=e),r},o.getGeoLocationIfPresent=o.getParameterIfPresent=o.getWidgetsV2=function(){var t=this,e=new Array;return this.dataRepository.widgets&&this.dataRepository.widgets.forEach((function(r){var n=t.getWidgetV2Parameters(r);e.push({widget_parameters:n,x:r.x,y:r.y,width:r.width,height:r.height,type:r.type,rendering_time:r.rendering_time})})),e},n(r,[{key:"visitorId",get:function(){return this._visitorId},set:function(t){this._visitorId=t}},{key:"sessionId",get:set:,{key:"collectorUrl",get:function(){return this.baseUrl+"/track/PartnerAnalyzerPageRequest?format=json&strict=true"}}]),r}(we),Ee=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var r=e.prototype;return r.getAllGYGDeeplinks=r.handleOnClick=function(t){var e=this.getEventV2Payload(t);try{this.sendEventV2(e,"PartnerDeeplinkClick")}catch(t){console.error("PDCE ERROR",t)}},r.getEventV2Payload=function(t){var r=this.getHREFFromEvent(t),n=A(this.dataRepository.header.url);return{customer_id:this.dataRepository.user.customer_id,partner_hash_code:this.dataRepository.header.partner_hash_code,partner_id:this.dataRepository.header.partner_id,page_id:n,page:this.dataRepository.page,deeplink_url:r,deeplink_id:I(r,e.NAMESPACE)}},r.getHREFFromEvent=function(t){var e;return e="deeplink_id=[\\w-]+",t.target.href.replace(new RegExp(e+"&|&"+e+"|"+e),"")},r.trackDeeplink=function(t,e){t.target="_blank",t.addEventListener("click",e)},r.start=function(){var t=this;this.getAllGYGDeeplinks().forEach(()},n(e,[{key:"collectorUrl",get:]),e}(we);Ee.NAMESPACE="6ba7b811-9dad-11d1-80b4-00c04fd430c8";var Pe=Ie="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;l=var Oe=Re,xe=function(){ar e=t.prototype;return e.sendEvent=function(t,e){var r=Oe(this.getUIEventBase(),e);r&&r.event_properties&&(r.event_properties.event_name=t),r&&r.metadata&&(r.metadata=JSON.stringify(r.metadata)),window.fetch(this.collectorUrl,{method:"POST",headers:{"Content-type":"text/plain"},body:JSON.stringify(r),keepalive:!0})},e.getUIEventBase=function(){return{event_properties:o({},this.dataRepository.event_properties),container_name:this.dataRepository.container_name,user:this.dataRepository.user,header:o({},this.dataRepository.header)}},t}();function Ue(t,e){window.addEventListener("message",(function(r){var n=null==r?void 0:r.data;try{if(n&&"event_logger"===n.messageType){var o=n.eventType;if(!o||o.toLowerCase()!==t.toLowerCase())return;e(n)}}catch(e){console.error("Failed to send "+t+" with Partner Analyzer")}}))}var Ce=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).eventType="UIClick",e}i(e,t);var r=e.prototype;return r.sendEventCallback=function(t){this.sendEvent(t.eventType,t.eventData)},r.start=function(){Ue(this.eventType,this.sendEventCallback.bind(this))},n(e,[{key:"collectorUrl",get:function(){return this.baseUrl+"/track/"+this.eventType+"?format=json&strict=true"}}]),e}(xe),Ge=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).eventType="UIShow",e}i(e,t);var r=e.prototype;return r.sendEventCallback=function(t){this.sendEvent(t.eventType,t.eventData)},r.start=function(){Ue(this.eventType,this.sendEventCallback.bind(this))},n(e,[{key:"collectorUrl",get:function(){return this.baseUrl+"/track/"+this.eventType+"?format=json&strict=true"}}]),e}(xe),Le=function(t){(e,t);var r=e.prototype;return r.sendEventCallback=r.start=n(e,[{key:"collectorUrl",get:]),e}(xe),je=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var r=e.prototype;return r.sendEventCallback=function(t){this.sendEventV2(t.eventData,"TicketingWebUIClick")},r.start=function(){Ue("TicketingWebUIClick",this.sendEventCallback.bind(this))},n(e,[{key:"collectorUrl",get:function(){return""}}]),e}(we);je.NAMESPACE="7cde4402-cd54-4f28-a4aa-5eb96add2d88";var De=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var r=e.prototype;return r.sendEventCallback=function(t){this.sendEventV2(t.eventData,"TicketingWebPageView")},r.start=function(){Ue("TicketingWebPageView",this.sendEventCallback.bind(this))},n(e,[{key:"collectorUrl",get:function(){return""}}]),e}(we);De.NAMESPACE="7dde5df8-7dba-4469-ba5a-a800de137523";var Ne=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var r=e.prototype;return r.sendEventCallback=function(t){this.sendEventV2(t.eventData,"TicketingWebLinkVisible")},r.start=function(){Ue("TicketingWebLinkVisible",this.sendEventCallback.bind(this))},n(e,[{key:"collectorUrl",get:function(){return""}}]),e}(we);Ne.NAMESPACE="1ac966b7-eba7-4c83-b142-e738da02bf30";var Be=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var r=e.prototype;return r.sendEventCallback=function(t){this.sendEventV2(t.eventData,"TicketingWebInitialized")},r.start=function(){Ue("TicketingWebInitialized",this.sendEventCallback.bind(this))},n(e,[{key:"collectorUrl",get:function(){return""}}]),e}(we);Be.NAMESPACE="cc34b8d9-1676-433b-8785-17712b04b97b";var Ye=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var r=e.prototype;return r.sendEventCallback=function(t){this.sendEventV2(t.eventData,"TicketingWebAddToCartSuccess")},r.start=function(){Ue("TicketingWebAddToCartSuccess",this.sendEventCallback.bind(this))},n(e,[{key:"collectorUrl",get:function(){return""}}]),e}(we);Ye.NAMESPACE="c9a6bfce-16d7-452e-b463-2872065684c3";var Me=function(t){(e,t);var r=e.prototype;return r.sendEventCallback=r.start=n(e,[{key:"collectorUrl",get:]),e}(we);Me.NAMESPACE="67e16cd6-4425-4b51-b1e3-beec495401d1";var We=[be,Ee,Ce,Ge,Le,je,De,Ne,Be,Ye,Me];new function(){var t=this;this.dataRepository={container_name:"partner-analyzer",version:"1705309054798_7219f020f56f49520ca816eae31481b9f4eb4419"},window._GYG=window._GYG||{};var e=new URL(window.location.href).searchParams.get("pa_debug");"1"===e?T("pa_debug",e):"0"===e&&function(t){try{localStorage.removeItem("pa_debug")}catch(t){window._GYG.localStorage&&delete window._GYG.localStorage.pa_debug}}(),window._GYG.debug="1"===k("pa_debug"),We.forEach(()}}));
//# sourceMappingURL=pa-main.1705309054798_7219f020f56f49520ca816eae31481b9f4eb4419.umd.production.min.js.map
