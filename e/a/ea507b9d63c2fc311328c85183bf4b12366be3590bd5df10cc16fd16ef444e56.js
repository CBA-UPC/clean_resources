!function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).videojs=t()}(function(){return function n(r,a,o){function s(i,t){if(!a[i]){if(!r[i]){var e="function"==typeof require&&require;if(!t&&e)return e(i,!0);if(u)return u(i,!0);e=new Error("Cannot find module '"+i+"'");throw e.code="MODULE_NOT_FOUND",e}e=a[i]={exports:{}};r[i][0].call(e.exports,function(t){var e=r[i][1][t];return s(e||t)},e,e.exports,n,r,a,o)}return a[i].exports}for(var u="function"==typeof require&&require,t=0;t<o.length;t++)s(o[t]);return s}({1:[function(t,e,i){"use strict";i.__esModule=!0;var n=r(t(2)),t=r(t(5));function r(t){return t&&t.__esModule?t:{default:t}}var a,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,a=n.default),o.prototype.buildCSSClass=function(){return"vjs-big-play-button"},o.prototype.handleClick=function(t){var e,i=this.player_.play();this.mouseused_&&t.clientX&&t.clientY||(t=this.player_.getChild("controlBar"),(e=t&&t.getChild("playToggle"))?(t=function(){return e.focus()},i&&i.then?i.then(t,function(){}):this.setTimeout(t,1)):this.player_.focus())},o.prototype.handleKeyPress=o.prototype.handleMouseDown=function(t){this.mouseused_=!0},o);function o(t,e){!this,o);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.call(this,t,e));return e.mouseused_=!1,e.on("mousedown",e.handleMouseDown),e}n.prototype.controlText_="Play Video",t.default.registerComponent("BigPlayButton",n),i.default=n},{2:2,5:5}],2:[function(t,e,i){"use strict";i.__esModule=!0;var n=s(t(3)),r=s(t(5)),a=s(t(86)),o=t(88);function s(t){return t&&t.__esModule?t:{default:t}}var u,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,u=n.default),l.prototype.createEl=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"button",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=(0,o.assign)({className:this.buildCSSClass()},e);"button"!==t&&(a.default.warn("Creating a Button with an HTML element of "+t+" is deprecated; use ClickableComponent instead."),e=(0,o.assign)({tabIndex:0},e),i=(0,o.assign)({role:"button"},i));i=(0,o.assign)({type:"button","aria-live":"polite"},i),i=r.default.prototype.createEl.call(this,t,e,i);return this.createControlTextEl(i),i},l.prototype.addChild=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=this.constructor.name;return a.default.warn("Adding an actionable (user controllable) child to a Button ("+i+") is not supported; use a ClickableComponent instead."),r.default.prototype.addChild.call(this,t,e)},l.prototype.enable=l.prototype.disable=l.prototype.handleKeyPress=l);function l(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,u.apply(this,arguments))}r.default.registerComponent("Button",n),i.default=n},{3:3,5:5,86:86,88:88}],3:[function(t,e,i){"use strict";i.__esModule=!0;var n=d(t(5)),r=c(t(81)),a=c(t(82)),o=c(t(83)),s=d(t(86)),u=d(t(96)),l=t(88);function c(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function d(t){return t&&t.__esModule?t:{default:t}}var h,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(f,h=n.default),f.prototype.createEl=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},e=(0,l.assign)({className:this.buildCSSClass(),tabIndex:0},e);"button"===t&&s.default.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),i=(0,l.assign)({role:"button","aria-live":"polite"},i),this.tabIndex_=e.tabIndex;i=h.prototype.createEl.call(this,t,e,i);return this.createControlTextEl(i),i},f.prototype.createControlTextEl=f.prototype.controlText=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.el();if(!t)return this.controlText_||"Need Text";var i=this.localize(t);return this.controlText_=t,this.controlTextEl_.innerHTML=i,this.nonIconControl||e.setAttribute("title",i),this},f.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+h.prototype.buildCSSClass.call(this)},f.prototype.enable=f.prototype.disable=f.prototype.handleClick=function(t){},f.prototype.handleFocus=function(t){a.on(u.default,"keydown",o.bind(this,this.handleKeyPress))},f.prototype.handleKeyPress=f.prototype.handleBlur=f);function f(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,h.call(this,t,e));return e.emitTapEvents(),e.enable(),e}n.default.registerComponent("ClickableComponent",t),i.default=t},{5:5,81:81,82:82,83:83,86:86,88:88,96:96}],4:[function(t,e,i){"use strict";i.__esModule=!0;var n=r(t(2)),t=r(t(5));function r(t){return t&&t.__esModule?t:{default:t}}var a,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,a=n.default),o.prototype.buildCSSClass=function(){return"vjs-close-button "+a.prototype.buildCSSClass.call(this)},o.prototype.handleClick=o);function o(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.call(this,t,e));return t.controlText(e&&e.controlText||t.localize("Close")),t}t.default.registerComponent("CloseButton",n),i.default=n},{2:2,5:5}],5:[function(t,e,i){"use strict";i.__esModule=!0;var n=h(t(97)),r=d(t(81)),u=d(t(83)),a=d(t(85)),l=d(t(82)),s=h(t(86)),c=h(t(91)),o=h(t(87));function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function h(t){return t&&t.__esModule?t:{default:t}}f.prototype.dispose=f.prototype.player=function(){return this.player_},f.prototype.options=function(t){return s.default.warn("this.options() has been deprecated and will be moved to the constructor in 6.0"),t&&(this.options_=(0,o.default)(this.options_,t)),this.options_},f.prototype.el=function(){return this.el_},f.prototype.createEl=f.prototype.localize=function(t){var e=this.player_.language&&this.player_.language(),i=this.player_.languages&&this.player_.languages();if(!e||!i)return t;var n=i[e];if(n&&n[t])return n[t];e=i[e.split("-")[0]];return e&&e[t]?e[t]:t},f.prototype.contentEl=f.prototype.id=function(){return this.id_},f.prototype.name=function(){return this.name_},f.prototype.children=function(){return this.children_},f.prototype.getChildById=f.prototype.getChild=f.prototype.addChild=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.children_.length,n=void 0,r=void 0;if("string"==typeof t){r=(0,c.default)(t),!0===(e=e||{})&&(s.default.warn("Initializing a child component with `true` is deprecated.Children should be defined in an array when possible, but if necessary use an object instead of `true`."),e={});var a=e.componentClass||r;e.name=r;var o=f.getComponent(a);if(!o)throw new Error("Component "+a+" does not exist");if("function"!=typeof o)return null;n=new o(this.player_||this,e)}else n=t;return this.children_.splice(i,0,n),"function"==typeof n.id&&(this.childIndex_[n.id()]=n),(r=r||n.name&&(0,c.default)(n.name()))&&(this.childNameIndex_[r]=n),"function"==typeof n.el&&n.el()&&(i=this.contentEl().children[i]||null,this.contentEl().insertBefore(n.el(),i)),n},f.prototype.removeChild=function(t){if((t="string"==typeof t?this.getChild(t):t)&&this.children_){for(var e,i=!1,n=this.children_.length-1;0<=n;n--)if(this.children_[n]===t){i=!0,this.children_.splice(n,1);break}i&&(this.childIndex_[t.id()]=null,this.childNameIndex_[t.name()]=null,(e=t.el())&&e.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el()))}},f.prototype.initChildren=function(){var i,e,t,n=this,r=this.options_.children;r&&(i=this.options_,t=void 0,e=f.getComponent("Tech"),(t=Array.isArray(r)?r:Object.keys(r)).concat(Object.keys(this.options_).filter().map(.filter(function(t){t=f.getComponent(t.opts.componentClass||(0,c.default)(t.name));return t&&!e.isTech(t)}).forEach()},f.prototype.buildCSSClass=function(){return""},f.prototype.on=function(t,e,i){var n,r,a,o,s=this;return"string"==typeof t||Array.isArray(t)?l.on(this.el_,t,u.bind(this,e)):(n=t,r=e,a=u.bind(this,i),(o=.guid=a.guid,this.on("dispose",o),(i=.guid=a.guid,t.nodeName?(l.on(n,r,a),l.on(n,"dispose",i)):"function"==typeof t.on&&(n.on(r,a),n.on("dispose",i))),this},f.prototype.off=f.prototype.one=function(t,e,i){var n,r,a,o=this,s=arguments;return"string"==typeof t||Array.isArray(t)?l.one(this.el_,t,u.bind(this,e)):(n=t,r=e,a=u.bind(this,i),(i=.guid=a.guid,this.on(n,r,i)),this},f.prototype.trigger=function(t,e){return l.trigger(this.el_,t,e),this},f.prototype.ready=function(t){return t&&(this.isReady_?1<arguments.length&&void 0!==arguments[1]&&arguments[1]?t.call(this):this.setTimeout(t,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(t))),this},f.prototype.triggerReady=f.prototype.$=function(t,e){return r.$(t,e||this.contentEl())},f.prototype.$$=f.prototype.hasClass=function(t){return r.hasElClass(this.el_,t)},f.prototype.addClass=function(t){return r.addElClass(this.el_,t),this},f.prototype.removeClass=function(t){return r.removeElClass(this.el_,t),this},f.prototype.toggleClass=function(t,e){return r.toggleElClass(this.el_,t,e),this},f.prototype.show=function(){return this.removeClass("vjs-hidden"),this},f.prototype.hide=function(){return this.addClass("vjs-hidden"),this},f.prototype.lockShowing=function(){return this.addClass("vjs-lock-showing"),this},f.prototype.unlockShowing=function(){return this.removeClass("vjs-lock-showing"),this},f.prototype.getAttribute=f.prototype.setAttribute=f.prototype.removeAttribute=f.prototype.width=function(t,e){return this.dimension("width",t,e)},f.prototype.height=f.prototype.dimensions=f.prototype.dimension=function(t,e,i){if(void 0!==e)return-1!==(""+(e=null===e||e!=e?0:e)).indexOf("%")||-1!==(""+e).indexOf("px")?this.el_.style[t]=e:this.el_.style[t]="auto"===e?"":e+"px",i||this.trigger("resize"),this;if(!this.el_)return 0;e=this.el_.style[t],i=e.indexOf("px");return-1!==i?parseInt(e.slice(0,i),10):parseInt(this.el_["offset"+(0,c.default)(t)],10)},f.prototype.currentDimension=function(t){var e,i=0;if("width"!==t&&"height"!==t)throw new Error("currentDimension only accepts width or height value");return"function"==typeof n.default.getComputedStyle&&(i=(e=n.default.getComputedStyle(this.el_)).getPropertyValue(t)||e[t]),0===(i=parseFloat(i))&&(t="offset"+(0,c.default)(t),i=this.el_[t]),i},f.prototype.currentDimensions=f.prototype.currentWidth=function(){return this.currentDimension("width")},f.prototype.currentHeight=function(){return this.currentDimension("height")},f.prototype.focus=function(){this.el_.focus()},f.prototype.blur=function(){this.el_.blur()},f.prototype.emitTapEvents=function(){var e=0,i=null,n=void 0;this.on("touchstart",,this.on("touchmove",;function t(){n=!1}this.on("touchleave",t),this.on("touchcancel",t),this.on("touchend",},f.prototype.enableTouchActivity=f.prototype.setTimeout=function(t,e){t=u.bind(this,t);var i=n.default.setTimeout(t,e),e=function(){this.clearTimeout(i)};return e.guid="vjs-timeout-"+i,this.on("dispose",e),i},f.prototype.clearTimeout=function(t){n.default.clearTimeout(t);function e(){}return e.guid="vjs-timeout-"+t,this.off("dispose",e),t},f.prototype.setInterval=f.prototype.clearInterval=f.registerComponent=function(t,e){if(t){if(t=(0,c.default)(t),f.components_||(f.components_={}),"Player"===t&&f.components_[t]){var i=f.components_[t];if(i.players&&0<Object.keys(i.players).length&&Object.keys(i.players).map(function(t){return i.players[t]}).every(Boolean))throw new Error("Can not register Player component after player has been created")}return f.components_[t]=e}},f.getComponent=f.extend=t=f;function f(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),!t&&this.play?this.player_=t=this:this.player_=t,this.options_=(0,o.default)({},this.options_),e=this.options_=(0,o.default)(this.options_,e),this.id_=e.id||e.el&&e.el.id,this.id_||(t=t&&t.id&&t.id()||"no_player",this.id_=t+"_component_"+a.newGUID()),this.name_=e.name||null,e.el?this.el_=e.el:!1!==e.createEl&&(this.el_=this.createEl()),this.children_=[],this.childIndex_={},!(this.childNameIndex_={})!==e.initChildren&&this.initChildren(),this.ready(i),!1!==e.reportTouchActivity&&this.enableTouchActivity()}t.registerComponent("Component",t),i.default=t},{81:81,82:82,83:83,85:85,86:86,87:87,91:91,97:97}],6:[function(t,e,i){"use strict";i.__esModule=!0;var n=o(t(36)),r=o(t(5)),a=o(t(7));function o(t){return t&&t.__esModule?t:{default:t}}var s,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,s=n.default),u.prototype.buildCSSClass=function(){return"vjs-audio-button "+s.prototype.buildCSSClass.call(this)},u.prototype.createItems=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];this.hideThreshold_=1;var e=this.player_.audioTracks&&this.player_.audioTracks();if(!e)return t;for(var i=0;i<e.length;i++){var n=e[i];t.push(new a.default(this.player_,{track:n,selectable:!0}))}return t},u);function u(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),e.tracks=t.audioTracks&&t.audioTracks();e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this,t,e));return e.el_.setAttribute("aria-label","Audio Menu"),e}n.prototype.controlText_="Audio Track",r.default.registerComponent("AudioTrackButton",n),i.default=n},{36:36,5:5,7:7}],7:[function(t,e,i){"use strict";i.__esModule=!0;var n=o(t(48)),r=o(t(5)),a=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(83));function o(t){return t&&t.__esModule?t:{default:t}}var s,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,s=n.default),u.prototype.handleClick=u.prototype.handleTracksChange=u);function u(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var i=e.track,n=t.audioTracks();e.label=i.label||i.language||"Unknown",e.selected=i.enabled;var r,e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this,t,e));return e.track=i,n&&(r=a.bind(e,e.handleTracksChange),n.addEventListener("change",r),e.on("dispose",function(){n.removeEventListener("change",r)})),e}r.default.registerComponent("AudioTrackMenuItem",n),i.default=n},{48:48,5:5,83:83}],8:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t(5),a=(n=r)&&n.__esModule?n:{default:n};t(12),t(32),t(33),t(35),t(34),t(10),t(18),t(9),t(38),t(40),t(11),t(25),t(27),t(29),t(24),t(6),t(13),t(21);var o,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,o=a.default),s.prototype.createEl=s);function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.apply(this,arguments))}t.prototype.options_={children:["playToggle","volumeMenuButton","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subtitlesButton","captionsButton","audioTrackButton","fullscreenToggle"]},a.default.registerComponent("ControlBar",t),i.default=t},{10:10,11:11,12:12,13:13,18:18,21:21,24:24,25:25,27:27,29:29,32:32,33:33,34:34,35:35,38:38,40:40,5:5,6:6,9:9}],9:[function(t,e,i){"use strict";i.__esModule=!0;var n=r(t(2)),t=r(t(5));function r(t){return t&&t.__esModule?t:{default:t}}var a,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,a=n.default),o.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+a.prototype.buildCSSClass.call(this)},o.prototype.handleFullscreenChange=o.prototype.handleClick=function(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},o);function o(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.call(this,t,e));return e.on(t,"fullscreenchange",e.handleFullscreenChange),e}n.prototype.controlText_="Fullscreen",t.default.registerComponent("FullscreenToggle",n),i.default=n},{2:2,5:5}],10:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t(5),a=(n=r)&&n.__esModule?n:{default:n},o=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(81));var s,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,s=a.default),u.prototype.createEl=u.prototype.updateShowing=u);function u(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this,t,e));return e.updateShowing(),e.on(e.player(),"durationchange",e.updateShowing),e}a.default.registerComponent("LiveDisplay",t),i.default=t},{5:5,81:81}],11:[function(t,e,i){"use strict";i.__esModule=!0;var n=o(t(2)),r=o(t(5)),a=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(81));function o(t){return t&&t.__esModule?t:{default:t}}var s,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,s=n.default),u.prototype.buildCSSClass=function(){return"vjs-mute-control "+s.prototype.buildCSSClass.call(this)},u.prototype.handleClick=u.prototype.update=function(t){var e=this.player_.volume(),i=3;this.player_.muted()?i=0:e<.33?i=1:e<.67&&(i=2);e=this.player_.muted()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e);for(var n=0;n<4;n++)a.removeElClass(this.el_,"vjs-vol-"+n);a.addElClass(this.el_,"vjs-vol-"+i)},u);function u(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this,t,e));return e.on(t,"volumechange",e.update),t.tech_&&!1===t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",,e}n.prototype.controlText_="Mute",r.default.registerComponent("MuteToggle",n),i.default=n},{2:2,5:5,81:81}],12:[function(t,e,i){"use strict";i.__esModule=!0;var n=r(t(2)),t=r(t(5));function r(t){return t&&t.__esModule?t:{default:t}}var a,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,a=n.default),o.prototype.buildCSSClass=function(){return"vjs-play-control "+a.prototype.buildCSSClass.call(this)},o.prototype.handleClick=o.prototype.handlePlay=function(t){this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},o.prototype.handlePause=o);function o(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.call(this,t,e));return e.on(t,"play",e.handlePlay),e.on(t,"pause",e.handlePause),e}n.prototype.controlText_="Play",t.default.registerComponent("PlayToggle",n),i.default=n},{2:2,5:5}],13:[function(t,e,i){"use strict";i.__esModule=!0;var n=u(t(47)),r=u(t(49)),a=u(t(14)),o=u(t(5)),s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(81));function u(t){return t&&t.__esModule?t:{default:t}}var l,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,l=n.default),c.prototype.createEl=c.prototype.buildCSSClass=function(){return"vjs-playback-rate "+l.prototype.buildCSSClass.call(this)},c.prototype.createMenu=c.prototype.updateARIAAttributes=c.prototype.handleClick=c.prototype.playbackRates=c.prototype.playbackRateSupported=c.prototype.updateVisibility=c.prototype.updateLabel=c);function c(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,l.call(this,t,e));return e.updateVisibility(),e.updateLabel(),e.on(t,"loadstart",e.updateVisibility),e.on(t,"ratechange",e.updateLabel),e}n.prototype.controlText_="Playback Rate",o.default.registerComponent("PlaybackRateMenuButton",n),i.default=n},{14:14,47:47,49:49,5:5,81:81}],14:[function(t,e,i){"use strict";i.__esModule=!0;var n=r(t(48)),t=r(t(5));function r(t){return t&&t.__esModule?t:{default:t}}var a,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,a=n.default),o.prototype.handleClick=o.prototype.update=o);function o(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var i=e.rate,n=parseFloat(i,10);e.label=i,e.selected=1===n,e.selectable=!0;e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.call(this,t,e));return e.label=i,e.rate=n,e.on(t,"ratechange",e.update),e}n.prototype.contentElType="button",t.default.registerComponent("PlaybackRateMenuItem",n),i.default=n},{48:48,5:5}],15:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t(5),a=(n=r)&&n.__esModule?n:{default:n},d=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(81));var o,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,o=a.default),s.prototype.createEl=function(){return o.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})},s.prototype.update=function(t){ar i=this.player_.buffered(),n=this.player_.duration(),r=this.player_.bufferedEnd(),a=this.partEls_;this.el_.style.width=e(r,n);for(var o=0;o<i.length;o++){var s=i.start(o),u=i.end(o),l=a[o];l||(l=this.el_.appendChild(d.createEl()),a[o]=l),l.style.left=e(s,r),l.style.width=e(u-s,r)}for(var c=a.length;c>i.length;c--)this.el_.removeChild(a[c-1]);a.length=i.length},s);function s(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this,t,e));return e.partEls_=[],e.on(t,"progress",e.update),e}a.default.registerComponent("LoadProgressBar",t),i.default=t},{5:5,81:81}],16:[function(t,e,i){"use strict";i.__esModule=!0;var n=l(t(5)),r=u(t(81)),a=u(t(83)),o=l(t(84)),s=l(t(80));unction l(t){return t&&t.__esModule?t:{default:t}}var c,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,c=n.default),d.prototype.createEl=function(){return c.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},d.prototype.handleMouseMove=d.prototype.update=function(t,e){var i=(0,o.default)(t,this.player_.duration());this.el().style.left=e+"px",this.el().setAttribute("data-current-time",i),this.keepTooltipsInside&&(t=e-this.clampPosition_(e)+1,e=parseFloat((0,s.default)(this.tooltip,"width"))/2,this.tooltip.innerHTML=i,this.tooltip.style.right="-"+(e-t)+"px")},d.prototype.calculateDistance=d.prototype.clampPosition_=function(t){if(!this.keepTooltipsInside)return t;var e=parseFloat((0,s.default)(this.player().el(),"width")),i=parseFloat((0,s.default)(this.tooltip,"width"))/2,n=t;return t<i?n=Math.ceil(i):e-i<t&&(n=Math.floor(e-i)),n},d);.default.registerComponent("MouseTimeDisplay",t),i.default=t},{5:5,80:80,81:81,83:83,84:84}],17:[function(t,e,i){"use strict";i.__esModule=!0;var n=o(t(5)),r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(83)),a=o(t(84));function o(t){return t&&t.__esModule?t:{default:t}}var s,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,s=n.default),u.prototype.createEl=u.prototype.updateDataAttr=u);.default.registerComponent("PlayProgressBar",t),i.default=t},{5:5,83:83,84:84}],18:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t(5),a=(n=r)&&n.__esModule?n:{default:n};t(19),t(16);var o,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,o=a.default),s.prototype.createEl=function(){return o.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},s);function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.apply(this,arguments))}t.prototype.options_={children:["seekBar"]},a.default.registerComponent("ProgressControl",t),i.default=t},{16:16,19:19,5:5}],19:[function(t,e,i){"use strict";i.__esModule=!0;var n=u(t(57)),r=u(t(5)),a=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(83)),o=u(t(84)),s=u(t(80));function u(t){return t&&t.__esModule?t:{default:t}}t(15),t(17),t(20);var l,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,l=n.default),c.prototype.createEl=function(){return l.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":"progress bar"})},c.prototype.updateProgress=function(t){var e,i,n;this.updateAriaAttributes(this.el_),this.keepTooltipsInside&&(this.updateAriaAttributes(this.tooltipProgressBar.el_),this.tooltipProgressBar.el_.style.width=this.bar.el_.style.width,e=parseFloat((0,s.default)(this.player().el(),"width")),i=parseFloat((0,s.default)(this.tooltipProgressBar.tooltip,"width")),(n=this.tooltipProgressBar.el().style).maxWidth=Math.floor(e-i/2)+"px",n.minWidth=Math.ceil(i/2)+"px",n.right="-"+i/2+"px")},c.prototype.updateAriaAttributes=c.prototype.getPercent=c.prototype.handleMouseDown=c.prototype.handleMouseMove=c.prototype.handleMouseUp=c.prototype.stepForward=c.prototype.stepBack=c);.prototype.options_={children:["loadProgressBar","mouseTimeDisplay","playProgressBar"],barName:"playProgressBar"},n.prototype.playerEvent="timeupdate",r.default.registerComponent("SeekBar",n),i.default=n},{15:15,17:17,20:20,5:5,57:57,80:80,83:83,84:84}],20:[function(t,e,i){"use strict";i.__esModule=!0;var n=o(t(5)),r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(83)),a=o(t(84));function o(t){return t&&t.__esModule?t:{default:t}}var s,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,s=n.default),u.prototype.createEl=u.prototype.updateDataAttr=u);function u(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this,t,e));return e.updateDataAttr(),e.on(t,"timeupdate",e.updateDataAttr),t.ready(r.bind(e,e.updateDataAttr)),e}n.default.registerComponent("TooltipProgressBar",t),i.default=t},{5:5,83:83,84:84}],21:[function(t,e,i){"use strict";i.__esModule=!0;var n=r(t(22)),t=r(t(5));function r(t){return t&&t.__esModule?t:{default:t}}var a,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,a=n.default),o.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+a.prototype.buildCSSClass.call(this)},o.prototype.createEl=o);function o(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.apply(this,arguments))}t.default.registerComponent("CustomControlSpacer",n),i.default=n},{22:22,5:5}],22:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t(5),a=(n=r)&&n.__esModule?n:{default:n};var o,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,o=a.default),s.prototype.buildCSSClass=function(){return"vjs-spacer "+o.prototype.buildCSSClass.call(this)},s.prototype.createEl=function(){return o.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},s);function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.apply(this,arguments))}a.default.registerComponent("Spacer",t),i.default=t},{5:5}],23:[function(t,e,i){"use strict";i.__esModule=!0;var n=r(t(31)),t=r(t(5));function r(t){return t&&t.__esModule?t:{default:t}}var a,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,a=n.default),o.prototype.handleClick=o);function o(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),e.track={player:t,kind:e.kind,label:e.kind+" settings",selectable:!1,default:!1,mode:"disabled"},e.selectable=!1;t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.call(this,t,e));return t.addClass("vjs-texttrack-settings"),t.controlText(", opens "+e.kind+" settings dialog"),t}t.default.registerComponent("CaptionSettingsMenuItem",n),i.default=n},{31:31,5:5}],24:[function(t,e,i){"use strict";i.__esModule=!0;var n=o(t(30)),r=o(t(5)),a=o(t(23));function o(t){return t&&t.__esModule?t:{default:t}}var s,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,s=n.default),u.prototype.buildCSSClass=function(){return"vjs-captions-button "+s.prototype.buildCSSClass.call(this)},u.prototype.createItems=u);function u(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this,t,e,i));return i.el_.setAttribute("aria-label","Captions Menu"),i}n.prototype.kind_="captions",n.prototype.controlText_="Captions",r.default.registerComponent("CaptionsButton",n),i.default=n},{23:23,30:30,5:5}],25:[function(t,e,i){"use strict";i.__esModule=!0;var n=s(t(30)),r=s(t(5)),a=s(t(26)),o=s(t(91));function s(t){return t&&t.__esModule?t:{default:t}}var u,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,u=n.default),l.prototype.buildCSSClass=function(){return"vjs-chapters-button "+u.prototype.buildCSSClass.call(this)},l.prototype.update=l.prototype.setTrack=l.prototype.findChaptersTrack=l.prototype.getMenuCaption=l.prototype.createMenu=l.prototype.createItems=l);function l(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,u.call(this,t,e,i));return i.el_.setAttribute("aria-label","Chapters Menu"),i}n.prototype.kind_="chapters",n.prototype.controlText_="Chapters",r.default.registerComponent("ChaptersButton",n),i.default=n},{26:26,30:30,5:5,91:91}],26:[function(t,e,i){"use strict";i.__esModule=!0;var n=o(t(48)),r=o(t(5)),a=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(83));function o(t){return t&&t.__esModule?t:{default:t}}var s,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,s=n.default),u.prototype.handleClick=u.prototype.update=u);function u(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);var i=e.track,n=e.cue,r=t.currentTime();e.selectable=!0,e.label=n.text,e.selected=n.startTime<=r&&r<n.endTime;e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this,t,e));return e.track=i,e.cue=n,i.addEventListener("cuechange",a.bind(e,e.update)),e}r.default.registerComponent("ChaptersTrackMenuItem",n),i.default=n},{48:48,5:5,83:83}],27:[function(t,e,i){"use strict";i.__esModule=!0;var n=o(t(30)),r=o(t(5)),a=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(83));function o(t){return t&&t.__esModule?t:{default:t}}var s,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,s=n.default),u.prototype.handleTracksChange=u.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+s.prototype.buildCSSClass.call(this)},u);function u(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this,t,e,i));i.el_.setAttribute("aria-label","Descriptions Menu");var n,r=t.textTracks();return r&&(n=a.bind(i,i.handleTracksChange),r.addEventListener("change",n),i.on("dispose",function(){r.removeEventListener("change",n)})),i}n.prototype.kind_="descriptions",n.prototype.controlText_="Descriptions",r.default.registerComponent("DescriptionsButton",n),i.default=n},{30:30,5:5,83:83}],28:[function(t,e,i){"use strict";i.__esModule=!0;var n=r(t(31)),t=r(t(5));function r(t){return t&&t.__esModule?t:{default:t}}var a,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,a=n.default),o.prototype.handleTracksChange=o);function o(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),e.track={player:t,kind:e.kind,label:e.kind+" off",default:!1,mode:"disabled"},e.selectable=!0;e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.call(this,t,e));return e.selected(!0),e}t.default.registerComponent("OffTextTrackMenuItem",n),i.default=n},{31:31,5:5}],29:[function(t,e,i){"use strict";i.__esModule=!0;var n=r(t(30)),t=r(t(5));function r(t){return t&&t.__esModule?t:{default:t}}var a,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,a=n.default),o.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildCSSClass.call(this)},o);function o(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.call(this,t,e,i));return i.el_.setAttribute("aria-label","Subtitles Menu"),i}n.prototype.kind_="subtitles",n.prototype.controlText_="Subtitles",t.default.registerComponent("SubtitlesButton",n),i.default=n},{30:30,5:5}],30:[function(t,e,i){"use strict";i.__esModule=!0;var n=s(t(36)),r=s(t(5)),a=s(t(31)),o=s(t(28));function s(t){return t&&t.__esModule?t:{default:t}}var u,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,u=n.default),l.prototype.createItems=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];t.push(new o.default(this.player_,{kind:this.kind_})),this.hideThreshold_+=1;var e=this.player_.textTracks();if(!e)return t;for(var i=0;i<e.length;i++){var n=e[i];n.kind===this.kind_&&t.push(new a.default(this.player_,{track:n,selectable:!0}))}return t},l);function l(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),e.tracks=t.textTracks(),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,u.call(this,t,e))}r.default.registerComponent("TextTrackButton",n),i.default=n},{28:28,31:31,36:36,5:5}],31:[function(t,e,i){"use strict";i.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=a(t(48)),r=a(t(5)),s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(83)),u=a(t(97)),l=a(t(96));function a(t){return t&&t.__esModule?t:{default:t}}var c,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,c=n.default),d.prototype.handleClick=d.prototype.handleTracksChange=d);function d(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);var i=e.track,n=t.textTracks();e.label=i.label||i.language||"Unknown",e.selected=i.default||"showing"===i.mode;var r,a,e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,c.call(this,t,e));return e.track=i,n&&(r=s.bind(e,e.handleTracksChange),t.on(["loadstart","texttrackchange"],r),n.addEventListener("change",r),e.on("dispose",function(){n.removeEventListener("change",r)})),n&&void 0===n.onchange&&(a=void 0,e.on(["tap","click"],),e}r.default.registerComponent("TextTrackMenuItem",n),i.default=n},{48:48,5:5,83:83,96:96,97:97}],32:[function(t,e,i){"use strict";i.__esModule=!0;var n=o(t(5)),r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(81)),a=o(t(84));function o(t){return t&&t.__esModule?t:{default:t}}var s,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,s=n.default),u.prototype.createEl=u.prototype.updateContent=u);function u(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this,t,e));return e.on(t,"timeupdate",e.updateContent),e}n.default.registerComponent("CurrentTimeDisplay",t),i.default=t},{5:5,81:81,84:84}],33:[function(t,e,i){"use strict";i.__esModule=!0;var n=o(t(5)),r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(81)),a=o(t(84));function o(t){return t&&t.__esModule?t:{default:t}}var s,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,s=n.default),u.prototype.createEl=function(){var t=s.prototype.createEl.call(this,"div",{className:"vjs-duration vjs-time-control vjs-control"});return this.contentEl_=r.createEl("div",{className:"vjs-duration-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Duration Time")+"</span> 0:00"},{"aria-live":"off"}),t.appendChild(this.contentEl_),t},u.prototype.updateContent=function(t){var e,i=this.player_.duration();i&&this.duration_!==i&&(this.duration_=i,e=this.localize("Duration Time"),i=(0,a.default)(i),this.contentEl_.innerHTML='<span class="vjs-control-text">'+e+"</span> "+i)},u);function u(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this,t,e));return e.on(t,"durationchange",e.updateContent),e.on(t,"timeupdate",e.updateContent),e.on(t,"loadedmetadata",e.updateContent),e}n.default.registerComponent("DurationDisplay",t),i.default=t},{5:5,81:81,84:84}],34:[function(t,e,i){"use strict";i.__esModule=!0;var n=o(t(5)),r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(81)),a=o(t(84));function o(t){return t&&t.__esModule?t:{default:t}}var s,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,s=n.default),u.prototype.createEl=u.prototype.updateContent=function(t){var e,i;this.player_.duration()&&(e=this.localize("Remaining Time"),(i=(0,a.default)(this.player_.remainingTime()))!==this.formattedTime_&&(this.formattedTime_=i,this.contentEl_.innerHTML='<span class="vjs-control-text">'+e+"</span> -"+i))},u);function u(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this,t,e));return e.on(t,"timeupdate",e.updateContent),e.on(t,"durationchange",e.updateContent),e}n.default.registerComponent("RemainingTimeDisplay",t),i.default=t},{5:5,81:81,84:84}],35:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t(5),a=(n=r)&&n.__esModule?n:{default:n};var o,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,o=a.default),s.prototype.createEl=function(){return o.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})},s);function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.apply(this,arguments))}a.default.registerComponent("TimeDivider",t),i.default=t},{5:5}],36:[function(t,e,i){"use strict";i.__esModule=!0;var n=o(t(47)),r=o(t(5)),a=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(83));function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var u,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,u=n.default),l);.default.registerComponent("TrackButton",n),i.default=n},{47:47,5:5,83:83}],37:[function(t,e,i){"use strict";i.__esModule=!0;var n=o(t(57)),r=o(t(5)),a=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(83));function o(t){return t&&t.__esModule?t:{default:t}}t(39);var s,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,s=n.default),u.prototype.createEl=u.prototype.handleMouseMove=u.prototype.checkMuted=u.prototype.getPercent=u.prototype.stepForward=u.prototype.stepBack=u.prototype.updateARIAAttributes=u);function u(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this,t,e));return e.on(t,"volumechange",e.updateARIAAttributes),t.ready(a.bind(e,e.updateARIAAttributes)),e}n.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},n.prototype.playerEvent="volumechange",r.default.registerComponent("VolumeBar",n),i.default=n},{39:39,5:5,57:57,83:83}],38:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t(5),a=(n=r)&&n.__esModule?n:{default:n};t(37);var o,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,o=a.default),s.prototype.createEl=s);function s(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this,t,e));return t.tech_&&!1===t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",,e}t.prototype.options_={children:["volumeBar"]},a.default.registerComponent("VolumeControl",t),i.default=t},{37:37,5:5}],39:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t(5),a=(n=r)&&n.__esModule?n:{default:n};var o,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,o=a.default),s.prototype.createEl=function(){return o.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})},s);function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.apply(this,arguments))}a.default.registerComponent("VolumeLevel",t),i.default=t},{5:5}],40:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(83)),r=l(t(5)),a=l(t(54)),o=l(t(53)),s=l(t(11)),u=l(t(37));function l(t){return t&&t.__esModule?t:{default:t}}var c,o=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,c=o.default),d.prototype.buildCSSClass=function(){var t="",t=this.options_.vertical?"vjs-volume-menu-button-vertical":"vjs-volume-menu-button-horizontal";return"vjs-volume-menu-button "+c.prototype.buildCSSClass.call(this)+" "+t},d.prototype.createPopup=d.prototype.handleClick=d.prototype.attachVolumeBarEvents=d.prototype.handleMouseDown=d.prototype.handleMouseUp=d);function d(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),void 0===e.inline&&(e.inline=!0),void 0===e.vertical&&(e.inline?e.vertical=!1:e.vertical=!0),e.volumeBar=e.volumeBar||{},e.volumeBar.vertical=!!e.vertical;e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,c.call(this,t,e));eturn e.on(t,"volumechange",e.volumeUpdate),e.on(t,"loadstart",e.volumeUpdate),i.call(e),e.on(t,"loadstart",i),e.on(e.volumeBar,["slideractive","focus"],function(){this.addClass("vjs-slider-active")}),e.on(e.volumeBar,["sliderinactive","blur"],function(){this.removeClass("vjs-slider-active")}),e.on(e.volumeBar,["focus"],function(){this.addClass("vjs-lock-showing")}),e.on(e.volumeBar,["blur"],function(){this.removeClass("vjs-lock-showing")}),e}o.prototype.volumeUpdate=s.default.prototype.update,o.prototype.controlText_="Mute",r.default.registerComponent("VolumeMenuButton",o),i.default=o},{11:11,37:37,5:5,53:53,54:54,83:83}],41:[function(t,e,i){"use strict";i.__esModule=!0;var n=o(t(5)),r=o(t(50)),a=o(t(87));function o(t){return t&&t.__esModule?t:{default:t}}var s,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,s=r.default),u.prototype.buildCSSClass=u.prototype.content=u);function u(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this,t,e));return e.on(t,"error",e.open),e}t.prototype.options_=(0,a.default)(r.default.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),n.default.registerComponent("ErrorDisplay",t),i.default=t},{5:5,50:50,87:87}],42:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(82));t=function(){};t.prototype.allowedEvents_={},t.prototype.addEventListener=t.prototype.on=function(t,e){var i=this.addEventListener;this.addEventListener=function(){},n.on(this,t,e),this.addEventListener=i},t.prototype.removeEventListener=t.prototype.off=t.prototype.one=t.prototype.dispatchEvent=t.prototype.trigger=function(t){var e=t.type||t;t=n.fixEvent(t="string"==typeof t?{type:e}:t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),n.trigger(this,t)},i.default=t},{82:82}],43:[function(t,e,i){"use strict";i.__esModule=!0;var n,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=t(86),o=(n=r)&&n.__esModule?n:{default:n},s=t(88);i.default=function(t){var e,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=r={};for(e in(0,s.isObject)(i)?("function"==typeof i.init&&(o.default.warn("Constructor logic via init() is deprecated; please use constructor() instead."),i.constructor=i.init),i.constructor!==Object.prototype.constructor&&(n=i.constructor),r=i):"function"==typeof i&&(n=i),n,t),r)r.hasOwnProperty(e)&&(n.prototype[e]=r[e]);return n}},{86:86,88:88}],44:[{96:96}],45:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t(5),a=(n=r)&&n.__esModule?n:{default:n};var o,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,o=a.default),s.prototype.createEl=s);function s(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.apply(this,arguments))}a.default.registerComponent("LoadingSpinner",t),i.default=t},{5:5}],46:[{88:88}],47:[function(t,e,i){"use strict";i.__esModule=!0;var n=c(t(3)),r=c(t(5)),a=c(t(49)),o=l(t(81)),s=l(t(83)),u=c(t(91));function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function c(t){return t&&t.__esModule?t:{default:t}}var d,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(h,d=n.default),h.prototype.update=h.prototype.createMenu=function(){var t,e=new a.default(this.player_);if(this.hideThreshold_=0,this.options_.title&&(t=o.createEl("li",{className:"vjs-menu-title",innerHTML:(0,u.default)(this.options_.title),tabIndex:-1}),this.hideThreshold_+=1,e.children_.unshift(t),o.insertElFirst(t,e.contentEl())),this.items=this.createItems(),this.items)for(var i=0;i<this.items.length;i++)e.addItem(this.items[i]);return e},h.prototype.createItems=function(){},h.prototype.createEl=function(){return d.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})},h.prototype.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+d.prototype.buildCSSClass.call(this)},h.prototype.handleClick=h.prototype.handleKeyPress=h.prototype.handleSubmenuKeyPress=h.prototype.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.lockShowing(),this.el_.setAttribute("aria-expanded","true"),this.menu.focus())},h.prototype.unpressButton=h.prototype.disable=h.prototype.enable=h);function h(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,d.call(this,t,e));return e.update(),e.enabled_=!0,e.el_.setAttribute("aria-haspopup","true"),e.el_.setAttribute("role","menuitem"),e.on("keydown",e.handleSubmenuKeyPress),e}r.default.registerComponent("MenuButton",n),i.default=n},{3:3,49:49,5:5,81:81,83:83,91:91}],48:[function(t,e,i){"use strict";i.__esModule=!0;var n=o(t(3)),r=o(t(5)),a=t(88);function o(t){return t&&t.__esModule?t:{default:t}}var s,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,s=n.default),u.prototype.createEl=u.prototype.handleClick=u.prototype.selected=u);function u(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u);t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this,t,e));return t.selectable=e.selectable,t.selected(e.selected),t.selectable?t.el_.setAttribute("role","menuitemcheckbox"):t.el_.setAttribute("role","menuitem"),t}r.default.registerComponent("MenuItem",n),i.default=n},{3:3,5:5,88:88}],49:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t(5),a=(n=r)&&n.__esModule?n:{default:n},o=l(t(81)),s=l(t(83)),u=l(t(82));function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}var c,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,c=a.default),d.prototype.addItem=d.prototype.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=o.createEl(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");t=c.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return t.setAttribute("role","presentation"),t.appendChild(this.contentEl_),u.on(t,"click",function(t){t.preventDefault(),t.stopImmediatePropagation()}),t},d.prototype.handleKeyPress=d.prototype.stepForward=d.prototype.stepBack=d.prototype.focus=d);function d(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,c.call(this,t,e));return e.focusedChild_=-1,e.on("keydown",e.handleKeyPress),e}a.default.registerComponent("Menu",t),i.default=t},{5:5,81:81,82:82,83:83}],50:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=u(t(81)),a=u(t(83)),o=t(5),s=(n=o)&&n.__esModule?n:{default:n};function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}var l,c="vjs-modal-dialog",t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,l=s.default),d.prototype.createEl=d.prototype.buildCSSClass=d.prototype.handleKeyPress=d.prototype.label=d.prototype.description=d.prototype.open=function(){var t;return this.opened_||(t=this.player(),this.trigger("beforemodalopen"),this.opened_=!0,!this.options_.fillAlways&&(this.hasBeenOpened_||this.hasBeenFilled_)||this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.closeable()&&this.on(this.el_.ownerDocument,"keydown",a.bind(this,this.handleKeyPress)),t.controls(!1),this.show(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0),this},d.prototype.opened=d.prototype.close=function(){var t;return this.opened_&&(t=this.player(),this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.closeable()&&this.off(this.el_.ownerDocument,"keydown",a.bind(this,this.handleKeyPress)),t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.options_.temporary&&this.dispose()),this},d.prototype.closeable=d.prototype.fill=d.prototype.fillWith=d.prototype.empty=d.prototype.content=d);function d(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,l.call(this,t,e));return e.opened_=e.hasBeenOpened_=e.hasBeenFilled_=!1,e.closeable(!e.options_.uncloseable),e.content(e.options_.content),e.contentEl_=r.createEl("div",{className:c+"-content"},{role:"document"}),e.descEl_=r.createEl("p",{className:c+"-description vjs-offscreen",id:e.el().getAttribute("aria-describedby")}),r.textContent(e.descEl_,e.description()),e.el_.appendChild(e.descEl_),e.el_.appendChild(e.contentEl_),e}t.prototype.options_={pauseOnOpen:!0,temporary:!0},s.default.registerComponent("ModalDialog",t),i.default=t},{5:5,81:81,83:83}],51:[function(t,e,i){"use strict";i.__esModule=!0;var o=O(t(5)),n=O(t(96)),l=O(t(97)),r=A(t(82)),c=A(t(81)),s=A(t(83)),u=A(t(85)),d=A(t(78)),h=O(t(86)),f=O(t(91)),a=t(90),p=t(79),m=A(t(89)),y=O(t(44)),g=O(t(46)),v=O(t(100)),b=t(88),_=O(t(87)),T=O(t(69)),w=O(t(50)),E=O(t(62)),S=O(t(63)),k=O(t(76));function A(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function O(t){return t&&t.__esModule?t:{default:t}}t(61),t(59),t(55),t(68),t(45),t(1),t(4),t(8),t(41),t(71),t(60);var C,R=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","ratechange","volumechange","texttrackchange"],P=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(x,C=o.default),x.prototype.dispose=x.prototype.createEl=function(){var t=this.tag,e=void 0,i=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player"),e=this.el_=i?t.parentNode:C.prototype.createEl.call(this,"div");t.setAttribute("tabindex","-1"),t.removeAttribute("width"),t.removeAttribute("height");var n,r,a=c.getElAttributes(t);Object.getOwnPropertyNames(a).forEach(,t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",(t.player=e.player=this).addClass("vjs-paused"),!0!==l.default.VIDEOJS_NO_DYNAMIC_STYLE&&(this.styleEl_=m.createStyleElement("vjs-styles-dimensions"),n=c.$(".vjs-styles-defaults"),(r=c.$("head")).insertBefore(this.styleEl_,n?n.nextSibling:r.firstChild)),this.width(this.options_.width),this.height(this.options_.height),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio);for(var o=t.getElementsByTagName("a"),s=0;s<o.length;s++){var u=o.item(s);c.addElClass(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!i&&t.parentNode.insertBefore(e,t),c.insertElFirst(t,e),this.children_.unshift(t),this.el_=e},x.prototype.width=function(t){return this.dimension("width",t)},x.prototype.height=x.prototype.dimension=x.prototype.fluid=x.prototype.aspectRatio=x.prototype.updateStyleEl_=function(){var t,e,i,n;!0!==l.default.VIDEOJS_NO_DYNAMIC_STYLE?(n=(n=((i=e=t=void 0)!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"))[1]/n[0],t=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/n:this.videoWidth()||300,e=void 0!==this.height_?this.height_:t*n,i=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(i),m.setTextContent(this.styleEl_,"\n      ."+i+" {\n        width: "+t+"px;\n        height: "+e+"px;\n      }\n\n      ."+i+".vjs-fluid {\n        padding-top: "+100*n+"%;\n      }\n    ")):(e="number"==typeof this.width_?this.width_:this.options_.width,i="number"==typeof this.height_?this.height_:this.options_.height,(n=this.tech_&&this.tech_.el())&&(0<=e&&(n.width=e),0<=i&&(n.height=i)))},x.prototype.loadTech_=function(t,e){var i=this;this.tech_&&this.unloadTech_(),"Html5"!==t&&this.tag&&(E.default.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=t;var n=(this.isReady_=!1,b.assign)({source:e,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+t+"_api",videoTracks:this.videoTracks_,textTracks:this.textTracks_,audioTracks:this.audioTracks_,autoplay:this.options_.autoplay,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"]},this.options_[t.toLowerCase()]);this.tag&&(n.tag=this.tag),e&&(this.currentType_=e.type,e.src===this.cache_.src&&0<this.cache_.currentTime&&(n.startTime=this.cache_.currentTime),this.cache_.sources=null,this.cache_.source=e,this.cache_.src=e.src);e=(e=E.default.getTech(t))||o.default.getComponent(t);this.tech_=new e(n),this.tech_.ready(s.bind(this,this.handleTechReady_),!0),T.default.jsonToTextTracks(this.textTracksJson_||[],this.tech_),R.forEach(,this.on(this.tech_,"loadstart",this.handleTechLoadStart_),this.on(this.tech_,"waiting",this.handleTechWaiting_),this.on(this.tech_,"canplay",this.handleTechCanPlay_),this.on(this.tech_,"canplaythrough",this.handleTechCanPlayThrough_),this.on(this.tech_,"playing",this.handleTechPlaying_),this.on(this.tech_,"ended",this.handleTechEnded_),this.on(this.tech_,"seeking",this.handleTechSeeking_),this.on(this.tech_,"seeked",this.handleTechSeeked_),this.on(this.tech_,"play",this.handleTechPlay_),this.on(this.tech_,"firstplay",this.handleTechFirstPlay_),this.on(this.tech_,"pause",this.handleTechPause_),this.on(this.tech_,"durationchange",this.handleTechDurationChange_),this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_),this.on(this.tech_,"error",this.handleTechError_),this.on(this.tech_,"loadedmetadata",this.updateStyleEl_),this.on(this.tech_,"posterchange",this.handleTechPosterChange_),this.on(this.tech_,"textdata",this.handleTechTextData_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===t&&this.tag||c.insertElFirst(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},x.prototype.unloadTech_=x.prototype.tech=x.prototype.addTechControlsListeners_=x.prototype.removeTechControlsListeners_=x.prototype.handleTechReady_=x.prototype.handleTechLoadStart_=x.prototype.hasStarted=x.prototype.handleTechPlay_=x.prototype.handleTechWaiting_=x.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},x.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},x.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},x.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},x.prototype.handleTechSeeked_=x.prototype.handleTechFirstPlay_=x.prototype.handleTechPause_=x.prototype.handleTechEnded_=x.prototype.handleTechDurationChange_=x.prototype.handleTechClick_=x.prototype.handleTechTap_=x.prototype.handleTechTouchStart_=x.prototype.handleTechTouchMove_=x.prototype.handleTechTouchEnd_=function(t){t.preventDefault()},x.prototype.handleFullscreenChange_=x.prototype.handleStageClick_=function(){this.reportUserActivity()},x.prototype.handleTechFullscreenChange_=x.prototype.handleTechError_=x.prototype.handleTechTextData_=x.prototype.getCache=function(){return this.cache_},x.prototype.techCall_=x.prototype.techGet_=x.prototype.play=x.prototype.pause=function(){return this.techCall_("pause"),this},x.prototype.paused=x.prototype.scrubbing=x.prototype.currentTime=x.prototype.duration=function(t){return void 0===t?void 0!==this.cache_.duration?this.cache_.duration:NaN:((t=(t=parseFloat(t))<0?1/0:t)!==this.cache_.duration&&((this.cache_.duration=t)===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange")),this)},x.prototype.remainingTime=x.prototype.buffered=function(){var t;return t=!(t=this.techGet_("buffered"))||!t.length?(0,a.createTimeRange)(0,0):t},x.prototype.bufferedPercent=x.prototype.bufferedEnd=x.prototype.volume=x.prototype.muted=x.prototype.supportsFullScreen=x.prototype.isFullscreen=function(t){return void 0!==t?(this.isFullscreen_=!!t,this):!!this.isFullscreen_},x.prototype.requestFullscreen=x.prototype.exitFullscreen=x.prototype.enterFullWindow=x.prototype.fullWindowOnEscKey=x.prototype.exitFullWindow=x.prototype.canPlayType=function(t){for(var e,i=0,n=this.options_.techOrder;i<n.length;i++){var r=(0,f.default)(n[i]),a=E.default.getTech(r);if(a=a||o.default.getComponent(r)){if(a.isSupported()&&(e=a.canPlayType(t)))return e}else h.default.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},x.prototype.selectSource=function(t){r n,r=this,a=this.options_.techOrder.map(f.default).map(.filter(;return(this.options_.sourceOrder?e(t,a,(n=i,function(t,e){return n(e,t)})):e(a,t,i))||!1},x.prototype.src=function(t){if(void 0===t)return this.techGet_("src");var e=(e=E.default.getTech(this.techName_))||o.default.getComponent(this.techName_);return Array.isArray(t)?this.sourceList_(t):"string"==typeof t?this.src({src:t}):t instanceof Object&&(t.type&&!e.canPlaySource(t,this.options_[this.techName_.toLowerCase()])?this.sourceList_([t]):(this.cache_.sources=null,this.cache_.source=t,this.cache_.src=t.src,this.currentType_=t.type||"",this.ready(!0))),this},x.prototype.sourceList_=x.prototype.load=x.prototype.reset=x.prototype.currentSources=x.prototype.currentSource=x.prototype.currentSrc=x.prototype.currentType=x.prototype.preload=function(t){return void 0!==t?(this.techCall_("setPreload",t),this.options_.preload=t,this):this.techGet_("preload")},x.prototype.autoplay=x.prototype.playsinline=function(t){return void 0!==t?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")},x.prototype.loop=x.prototype.poster=function(t){return void 0===t?this.poster_:(this.poster_=t=t||"",this.techCall_("setPoster",t),this.trigger("posterchange"),this)},x.prototype.handleTechPosterChange_=x.prototype.controls=function(t){return void 0!==t?(this.controls_!==(t=!!t)&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),t?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_())),this):!!this.controls_},x.prototype.usingNativeControls=function(t){return void 0!==t?(this.usingNativeControls_!==(t=!!t)&&((this.usingNativeControls_=t)?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols"))),this):!!this.usingNativeControls_},x.prototype.error=function(t){return void 0===t?this.error_||null:(null===t?(this.error_=t,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close()):(this.error_=new g.default(t),this.addClass("vjs-error"),h.default.error("(CODE:"+this.error_.code+" "+g.default.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error")),this)},x.prototype.reportUserActivity=x.prototype.userActive=x.prototype.listenForUserActivity_=function(){var e=void 0,i=void 0,n=void 0,r=s.bind(this,this.reportUserActivity);this.on("mousedown",,this.on("mousemove",,this.on("mouseup",,this.on("keydown",r),this.on("keyup",r);var a=void 0;this.setInterval(function(){var t;this.userActivity_&&(this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a),0<(t=this.options_.inactivityTimeout)&&(a=this.setTimeout(t)))},250)},x.prototype.playbackRate=x.prototype.isAudio=x.prototype.videoTracks=function(){return this.tech_?this.tech_.videoTracks():(this.videoTracks_=this.videoTracks_||new k.default,this.videoTracks_)},x.prototype.audioTracks=x.prototype.textTracks=function(){if(this.tech_)return this.tech_.textTracks()},x.prototype.remoteTextTracks=function(){if(this.tech_)return this.tech_.remoteTextTracks()},x.prototype.remoteTextTrackEls=x.prototype.addTextTrack=x.prototype.addRemoteTextTrack=x.prototype.removeRemoteTextTrack=function(){var t=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).track;if(this.tech_)return this.tech_.removeRemoteTextTrack(void 0===t?arguments[0]:t)},x.prototype.getVideoPlaybackQuality=x.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},x.prototype.videoHeight=x.prototype.language=x.prototype.languages=x.prototype.toJSON=x.prototype.createModal=x.getTagSettings=function(t){var e,i={sources:[],tracks:[]},n=c.getElAttributes(t),r=n["data-setup"];if(c.hasElClass(t,"vjs-fluid")&&(n.fluid=!0),null!==r&&(r=(e=(0,v.default)(r||"{}"))[0],e=e[1],r&&h.default.error(r),(0,b.assign)(n,e)),(0,b.assign)(i,n),t.hasChildNodes())for(var a=t.childNodes,o=0,s=a.length;o<s;o++){var u=a[o],l=u.nodeName.toLowerCase();"source"===l?i.sources.push(c.getElAttributes(u)):"track"===l&&i.tracks.push(c.getElAttributes(u))}return i},x.prototype.flexNotSupported_=x);function x(t,e,i){if(!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,x),t.id=t.id||"vjs_video_"+u.newGUID(),(e=(0,b.assign)(x.getTagSettings(t),e)).initChildren=!1,e.createEl=!1,e.reportTouchActivity=!1,!e.language)if("function"==typeof t.closest){var n=t.closest("[lang]");n&&(e.language=n.getAttribute("lang"))}else for(var r=t;r&&1===r.nodeType;){if(c.getElAttributes(r).hasOwnProperty("lang")){e.language=r.getAttribute("lang");break}r=r.parentNode}var a,n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,C.call(this,null,e,i));if(!n.options_||!n.options_.techOrder||!n.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");n.tag=t,n.tagAttributes=t&&c.getElAttributes(t),n.language(n.options_.language),e.languages?(a={},Object.getOwnPropertyNames(e.languages).forEach(,n.languages_=a):n.languages_=x.prototype.options_.languages,n.cache_={},n.poster_=e.poster||"",n.controls_=!!e.controls,t.controls=!1,n.scrubbing_=!1,n.el_=n.createEl();var o,i=(0,_.default)(n.options_);e.plugins&&(o=e.plugins,Object.getOwnPropertyNames(o).forEach(n)),n.options_.playerOptions=i,n.initChildren(),n.isAudio("audio"===t.nodeName.toLowerCase()),n.controls()?n.addClass("vjs-controls-enabled"):n.addClass("vjs-controls-disabled"),n.el_.setAttribute("role","region"),n.isAudio()?n.el_.setAttribute("aria-label","audio player"):n.el_.setAttribute("aria-label","video player"),n.isAudio()&&n.addClass("vjs-audio"),n.flexNotSupported_()&&n.addClass("vjs-no-flex"),d.IS_IOS||n.addClass("vjs-workinghover"),x.players[n.id_]=n;t="5.20.4".split(".")[0];return n.addClass("vjs-v"+t),n.userActive(!0),n.reportUserActivity(),n.listenForUserActivity_(),n.on("fullscreenchange",n.handleFullscreenChange_),n.on("stageclick",n.handleStageClick_),n}P.players={};t=l.default.navigator;P.prototype.options_={techOrder:["html5","flash"],html5:{},flash:{},defaultVolume:0,inactivityTimeout:2e3,playbackRates:[],children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","controlBar","errorDisplay","textTrackSettings"],language:t&&(t.languages&&t.languages[0]||t.userLanguage||t.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."},["ended","seeking","seekable","networkState","readyState"].forEach(,R.forEach(,o.default.registerComponent("Player",P),i.default=P},{1:1,100:100,4:4,41:41,44:44,45:45,46:46,5:5,50:50,55:55,59:59,60:60,61:61,62:62,63:63,68:68,69:69,71:71,76:76,78:78,79:79,8:8,81:81,82:82,83:83,85:85,86:86,87:87,88:88,89:89,90:90,91:91,96:96,97:97}],52:[{51:51}],53:[function(t,e,i){"use strict";i.__esModule=!0;var n=r(t(3)),t=r(t(5));function r(t){return t&&t.__esModule?t:{default:t}}var a,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,a=n.default),o.prototype.update=o.prototype.createPopup=function(){},o.prototype.createEl=o.prototype.buildCSSClass=o);function o(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.call(this,t,e));return e.update(),e}t.default.registerComponent("PopupButton",n),i.default=n},{3:3,5:5}],54:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t(5),a=(n=r)&&n.__esModule?n:{default:n},o=l(t(81)),s=l(t(83)),u=l(t(82));function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}var c,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,c=a.default),d.prototype.addItem=d.prototype.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=o.createEl(t,{className:"vjs-menu-content"});t=c.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return t.appendChild(this.contentEl_),u.on(t,"click",,t},d);.default.registerComponent("Popup",t),i.default=t},{5:5,81:81,82:82,83:83}],55:[function(t,e,i){"use strict";i.__esModule=!0;var n=l(t(3)),r=l(t(5)),a=u(t(83)),o=u(t(81)),s=u(t(78));function u(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function l(t){return t&&t.__esModule?t:{default:t}}var c,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,c=n.default),d.prototype.dispose=d.prototype.createEl=d.prototype.update=d.prototype.setSrc=d.prototype.handleClick=d);function d(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,c.call(this,t,e));return e.update(),t.on("posterchange",a.bind(e,e.update)),e}r.default.registerComponent("PosterImage",n),i.default=n},{3:3,5:5,78:78,81:81,83:83}],56:[function(t,e,i){"use strict";i.__esModule=!0,i.hasLoaded=i.autoSetupTimeout=i.autoSetup=void 0;var c=o(t(81)),n=o(t(82)),d=a(t(96)),r=a(t(97));function a(t){return t&&t.__esModule?t:{default:t}}function o(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}var h=!1,f=void 0,s=function(){if(c.isReal()){var t=d.default.getElementsByTagName("video"),e=d.default.getElementsByTagName("audio"),i=[];if(t&&0<t.length)for(var n=0,r=t.length;n<r;n++)i.push(t[n]);if(e&&0<e.length)for(var a=0,o=e.length;a<o;a++)i.push(e[a]);if(i&&0<i.length)for(var s=0,u=i.length;s<u;s++){var l=i[s];if(!l||!l.getAttribute){p(1);break}void 0===l.player&&null!==l.getAttribute("data-setup")&&f(l)}else h||p(1)}};.isReal()&&"complete"===d.default.readyState?h=!0:n.one(r.default,"load",function(){h=!0});i.autoSetup=s,i.autoSetupTimeout=p,i.hasLoaded=function(){return h}},{81:81,82:82,96:96,97:97}],57:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=t(5),a=(n=r)&&n.__esModule?n:{default:n},o=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(81)),s=t(88);var u,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,u=a.default),l.prototype.createEl=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return e.className=e.className+" vjs-slider",e=(0,s.assign)({tabIndex:0},e),i=(0,s.assign)({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i),u.prototype.createEl.call(this,t,e,i)},l.prototype.handleMouseDown=l.prototype.handleMouseMove=function(t){},l.prototype.handleMouseUp=l.prototype.update=function(){var t,e;this.el_&&(e=this.getPercent(),(t=this.bar)&&(e=(100*(e="number"!=typeof e||e!=e||e<0||e===1/0?0:e)).toFixed(2)+"%",this.vertical()?t.el().style.height=e:t.el().style.width=e))},l.prototype.calculateDistance=l.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)},l.prototype.handleKeyPress=function(t){37===t.which||40===t.which?(t.preventDefault(),this.stepBack()):38!==t.which&&39!==t.which||(t.preventDefault(),this.stepForward())},l.prototype.handleBlur=l.prototype.handleClick=function(t){t.stopImmediatePropagation(),t.preventDefault()},l.prototype.vertical=l);function l(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,u.call(this,t,e));return e.bar=e.getChild(e.options_.barName),e.vertical(!!e.options_.vertical),e.on("mousedown",e.handleMouseDown),e.on("touchstart",e.handleMouseDown),e.on("focus",e.handleFocus),e.on("blur",e.handleBlur),e.on("click",e.handleClick),e.on(t,"controlsvisible",e.update),e.on(t,e.playerEvent,e.update),e}a.default.registerComponent("Slider",t),i.default=t},{5:5,81:81,88:88}],58:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(n){return n.streamingFormats={"rtmp/mp4":"MP4","rtmp/flv":"FLV"},n.streamFromParts=n.streamToParts=n.isStreamingType=n.RTMP_RE=/^rtmp[set]?:\/\//i,n.isStreamingSrc=function(t){return n.RTMP_RE.test(t)},n.rtmpSourceHandler={},n.rtmpSourceHandler.canPlayType=function(t){return n.isStreamingType(t)?"maybe":""},n.rtmpSourceHandler.canHandleSource=n.rtmpSourceHandler.handleSource=function(t,e,i){t=n.streamToParts(t.src);e.setRtmpConnection(t.connection),e.setRtmpStream(t.stream)},n.registerSourceHandler(n.rtmpSourceHandler),n}},{}],59:[function(t,e,i){"use strict";i.__esModule=!0;var n=h(t(62)),r=d(t(81)),a=d(t(92)),o=t(90),s=h(t(58)),u=h(t(5)),l=h(t(97)),c=t(88);function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function h(t){return t&&t.__esModule?t:{default:t}}var f,p=l.default.navigator,m=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(y,f=n.default),y.prototype.createEl=function(){var t=this.options_;t.swf||(t.swf="//vjs.zencdn.net/swf/5.4.1/video-js.swf");var e=t.techId,i=(0,c.assign)({readyFunction:"videojs.Flash.onReady",eventProxyFunction:"videojs.Flash.onEvent",errorEventProxyFunction:"videojs.Flash.onError",autoplay:t.autoplay,preload:t.preload,loop:t.loop,muted:t.muted},t.flashVars),n=(0,c.assign)({wmode:"opaque",bgcolor:"#000000"},t.params),e=(0,c.assign)({id:e,name:e,class:"vjs-tech"},t.attributes);return this.el_=y.embed(t.swf,i,n,e),(this.el_.tech=this).el_},y.prototype.play=y.prototype.pause=function(){this.el_.vjs_pause()},y.prototype.src=y.prototype.setSrc=y.prototype.seeking=y.prototype.setCurrentTime=y.prototype.currentTime=y.prototype.currentSrc=y.prototype.duration=function(){return 0===this.readyState()?NaN:0<=(t=this.el_.vjs_getProperty("duration"))?t:1/0;var t},y.prototype.load=function(){this.el_.vjs_load()},y.prototype.poster=function(){this.el_.vjs_getProperty("poster")},y.prototype.setPoster=function(){},y.prototype.seekable=y.prototype.buffered=y.prototype.supportsFullScreen=function(){return!1},y.prototype.enterFullScreen=function(){return!1},y.prototype.getVideoPlaybackQuality=y);function y(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,f.call(this,t,e));return t.source&&e.ready(!0),t.startTime&&e.ready(!0),l.default.videojs=l.default.videojs||{},l.default.videojs.Flash=l.default.videojs.Flash||{},l.default.videojs.Flash.onReady=y.onReady,l.default.videojs.Flash.onEvent=y.onEvent,l.default.videojs.Flash.onError=y.onError,e.on("seeked",function(){this.lastSeekTarget_=void 0}),e}var g=m.prototype,v="rtmpConnection,rtmpStream,preload,defaultPlaybackRate,playbackRate,autoplay,loop,mediaGroup,controller,controls,volume,muted,defaultMuted".split(","),b="networkState,readyState,initialTime,startOffsetTime,paused,ended,videoWidth,videoHeight".split(",");or(var T=0;T<v.length;T++)_(v[T]),v[T]);for(var w=0;w<b.length;w++)_(b[w]);m.isSupported=n.default.withSourceHandlers(m),m.nativeSourceHandler={},m.nativeSourceHandler.canPlayType=m.nativeSourceHandler.canHandleSource=function(t,e){var i,n=void 0;return n=t.type?t.type.replace(/;.*/,"").toLowerCase():(i=t.src,(i=a.getFileExtension(i))?"video/"+i:""),m.nativeSourceHandler.canPlayType(n)},m.nativeSourceHandler.handleSource=function(t,e,i){e.setSrc(t.src)},m.nativeSourceHandler.dispose=function(){},m.registerSourceHandler(m.nativeSourceHandler),m.formats={"video/flv":"FLV","video/x-flv":"FLV","video/mp4":"MP4","video/m4v":"MP4"},m.onReady=m.checkReady=m.onEvent=m.onError=m.version=m.embed=m.getEmbedCode=(0,s.default)(m),u.default.registerComponent("Flash",m),n.default.registerTech("Flash",m),i.default=m},{5:5,58:58,62:62,81:81,88:88,90:90,92:92,97:97}],60:[function(t,e,i){"use strict";i.__esModule=!0;var n,l=((n=["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]).raw=["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],n),r=b(t(62)),a=b(t(5)),o=v(t(81)),c=v(t(92)),d=v(t(83)),h=b(t(86)),f=b(t(102)),p=v(t(78)),s=b(t(96)),u=b(t(97)),m=t(88),y=b(t(87)),g=b(t(91));function v(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function b(t){return t&&t.__esModule?t:{default:t}}var _,T=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(w,_=r.default),w.prototype.dispose=w.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){ar i=this.textTracks(),n=void 0;t(),i.addEventListener("change",t);his.on("webkitbeginfullscreen",function(){i.removeEventListener("change",t),i.removeEventListener("change",r),i.addEventListener("change",r)}),this.on("webkitendfullscreen",},w.prototype.createEl=function(){var t,e=this.options_.tag;e&&(this.options_.playerElIngest||this.movingMediaElementInDOM)||(e?(t=e.cloneNode(!0),e.parentNode&&e.parentNode.insertBefore(t,e),w.disposeMediaElement(e),e=t):(e=s.default.createElement("video"),t=this.options_.tag&&o.getElAttributes(this.options_.tag),t=(0,y.default)({},t),p.TOUCH_ENABLED&&!0===this.options_.nativeControlsForTouch||delete t.controls,o.setElAttributes(e,(0,m.assign)(t,{id:this.options_.techId,class:"vjs-tech"}))),e.playerId=this.options_.playerId),void 0!==this.options_.preload&&o.setAttribute(e,"preload",this.options_.preload);for(var i=["loop","muted","playsinline","autoplay"],n=i.length-1;0<=n;n--){var r=i[n],a=this.options_[r];void 0!==a&&(a?o.setAttribute(e,r,r):o.removeAttribute(e,r),e[r]=a)}return e},w.prototype.handleLateInit_=w.prototype.proxyNativeTextTracks_=w.prototype.handleTextTrackChange=w.prototype.handleTextTrackAdd=function(t){this.textTracks().addTrack_(t.track)},w.prototype.handleTextTrackRemove=w.prototype.removeOldTracks_=w.prototype.removeOldTextTracks_=w.prototype.play=w.prototype.setCurrentTime=w.prototype.duration=function(){var e=this;if(this.el_.duration===1/0&&p.IS_ANDROID&&p.IS_CHROME&&0===this.el_.currentTime)return this.on("timeupdate",,NaN;return this.el_.duration||NaN},w.prototype.width=function(){return this.el_.offsetWidth},w.prototype.height=function(){return this.el_.offsetHeight},w.prototype.proxyWebkitFullscreen_=function(){var t,e,i=this;"webkitDisplayingFullscreen"in this.el_&&(t=e=this.on("webkitbeginfullscreen",e),this.on("dispose",function(){i.off("webkitbeginfullscreen",e),i.off("webkitendfullscreen",t)}))},w.prototype.supportsFullScreen=w.prototype.enterFullScreen=w.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()},w.prototype.src=w.prototype.reset=w.prototype.currentSrc=w.prototype.setControls=w.prototype.addTextTrack=w.prototype.createRemoteTextTrack=w.prototype.addRemoteTextTrack=w.prototype.removeRemoteTextTrack=w.prototype.getVideoPlaybackQuality=w);.isReal()&&(T.TEST_VID=s.default.createElement("video"),(t=s.default.createElement("track")).kind="captions",t.srclang="en",t.label="English",T.TEST_VID.appendChild(t)),T.isSupported=T.canControlVolume=T.canControlPlaybackRate=T.supportsNativeTextTracks=function(){return p.IS_ANY_SAFARI},T.supportsNativeVideoTracks=function(){return!(!T.TEST_VID||!T.TEST_VID.videoTracks)},T.supportsNativeAudioTracks=T.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","volumechange"],T.prototype.featuresVolumeControl=T.canControlVolume(),T.prototype.featuresPlaybackRate=T.canControlPlaybackRate(),T.prototype.movingMediaElementInDOM=!p.IS_IOS,T.prototype.featuresFullscreenResize=!0,T.prototype.featuresProgressEvents=!0,T.prototype.featuresTimeupdateEvents=!0,T.prototype.featuresNativeTextTracks=T.supportsNativeTextTracks(),T.prototype.featuresNativeVideoTracks=T.supportsNativeVideoTracks(),T.prototype.featuresNativeAudioTracks=T.supportsNativeAudioTracks();var E=T.TEST_VID&&T.TEST_VID.constructor.prototype.canPlayType,S=/^application\/(?:x-|vnd\.apple\.)mpegurl/i,k=/^video\/mp4/i;T.patchCanPlayType=function(){4<=p.ANDROID_VERSION&&!p.IS_FIREFOX?T.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&S.test(t)?"maybe":E.call(this,t)}:p.IS_OLD_ANDROID&&(T.TEST_VID.constructor.prototype.canPlayType=},T.unpatchCanPlayType=T.patchCanPlayType(),T.disposeMediaElement=T.resetMediaElement=["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(,["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(e){T.prototype["set"+(0,g.default)(e)]=),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","played","networkState","readyState","videoWidth","videoHeight"].forEach(,["volume","src","poster","preload","playbackRate"].forEach(,["pause","load"].forEach(,r.default.withSourceHandlers(T),T.nativeSourceHandler={},T.nativeSourceHandler.canPlayType=T.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return T.nativeSourceHandler.canPlayType(t.type);if(t.src){t=c.getFileExtension(t.src);return T.nativeSourceHandler.canPlayType("video/"+t)}return""},T.nativeSourceHandler.handleSource=T.nativeSourceHandler.dispose=function(){},T.registerSourceHandler(T.nativeSourceHandler),a.default.registerComponent("Html5",T),r.default.registerTech("Html5",T),i.default=T},{102:102,5:5,62:62,78:78,81:81,83:83,86:86,87:87,88:88,91:91,92:92,96:96,97:97}],61:[function(t,e,i){"use strict";i.__esModule=!0;var s=n(t(5)),u=n(t(62)),l=n(t(91));function n(t){return t&&t.__esModule?t:{default:t}}var c,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,c=s.default),d);function d(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,c.call(this,t,e,i));if(e.playerOptions.sources&&0!==e.playerOptions.sources.length)t.src(e.playerOptions.sources);else for(var n=0,r=e.playerOptions.techOrder;n<r.length;n++){var a=(0,l.default)(r[n]),o=u.default.getTech(a);if((o=!a?s.default.getComponent(a):o)&&o.isSupported()){t.loadTech_(a);break}}return i}s.default.registerComponent("MediaLoader",t),i.default=t},{5:5,62:62,91:91}],62:[function(n,t,e){"use strict";e.__esModule=!0;var i=b(n(5)),r=b(n(66)),a=b(n(65)),o=b(n(87)),s=b(n(72)),u=b(n(70)),l=b(n(76)),c=b(n(63)),d=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(n(83)),h=b(n(86)),f=n(90),p=n(79),m=b(n(46)),y=b(n(97)),g=b(n(96)),v=n(88);function b(t){return t&&t.__esModule?t:{default:t}}var _,T=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(w,_=i.default),w.prototype.manualProgressOn=w.prototype.manualProgressOff=w.prototype.trackProgress=function(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(d.bind(this,,500)},w.prototype.onDurationChange=w.prototype.buffered=w.prototype.bufferedPercent=w.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},w.prototype.manualTimeUpdatesOn=w.prototype.manualTimeUpdatesOff=w.prototype.trackCurrentTime=w.prototype.stopTrackingCurrentTime=w.prototype.dispose=w.prototype.clearTracks=w.prototype.cleanupAutoTextTracks=w.prototype.reset=function(){},w.prototype.error=w.prototype.played=w.prototype.setCurrentTime=w.prototype.initTextTrackListeners=w.prototype.initTrackListeners=function(){var n=this;["video","audio"].forEach(function(t){ar i=n[t+"Tracks"]();i.addEventListener("removetrack",e),i.addEventListener("addtrack",e),n.on("dispose",})},w.prototype.addWebVttScript_=function(){var t,e,i=this;y.default.WebVTT||(g.default.body.contains(this.el())?(t=n(103),!this.options_["vtt.js"]&&(0,v.isPlain)(t)&&0<Object.keys(t).length?this.trigger("vttjsloaded"):((e=g.default.createElement("script")).src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.12.4/vtt.min.js",e.onload=function(){i.trigger("vttjsloaded")},e.onerror=function(){i.trigger("vttjserror")},this.on("dispose",,y.default.WebVTT=!0,this.el().parentNode.appendChild(e))):this.ready(this.addWebVttScript_))},w.prototype.emulateTextTracks=function(){var e,i,n,r,a,t=this,o=this.textTracks();o&&(e=this.remoteTextTracks(),n=function(t){return o.removeTrack_(t.track)},e.on("addtrack",i=function(t){return o.addTrack_(t.track)}),e.on("removetrack",n),this.addWebVttScript_(),r=function(){return t.trigger("texttrackchange")},(a=(),o.addEventListener("change",a),o.addEventListener("addtrack",a),o.addEventListener("removetrack",a),this.on("dispose",)},w.prototype.videoTracks=function(){return this.videoTracks_=this.videoTracks_||new l.default,this.videoTracks_},w.prototype.audioTracks=function(){return this.audioTracks_=this.audioTracks_||new c.default,this.audioTracks_},w.prototype.textTracks=function(){return this.textTracks_=this.textTracks_||new u.default,this.textTracks_},w.prototype.remoteTextTracks=function(){return this.remoteTextTracks_=this.remoteTextTracks_||new u.default,this.remoteTextTracks_},w.prototype.remoteTextTrackEls=w.prototype.addTextTrack=function(t,e,i){if(!t)throw new Error("TextTrack kind is required but was not provided");return function(t,e,i,n,r){var a=4<arguments.length&&void 0!==r?r:{},r=t.textTracks();return a.kind=e,i&&(a.label=i),n&&(a.language=n),a.tech=t,a=new s.default(a),r.addTrack_(a),a}(this,t,e,i)},w.prototype.createRemoteTextTrack=function(t){t=(0,o.default)(t,{tech:this});return new r.default(t)},w.prototype.addRemoteTextTrack=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],t=this.createRemoteTextTrack(t);return!0!==e&&!1!==e&&(h.default.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),e=!0),this.remoteTextTrackEls().addTrackElement_(t),this.remoteTextTracks().addTrack_(t.track),!0!==e&&this.autoRemoteTextTracks_.addTrack_(t.track),t},w.prototype.removeRemoteTextTrack=w.prototype.getVideoPlaybackQuality=w.prototype.setPoster=function(){},w.prototype.playsinline=function(){},w.prototype.setPlaysinline=function(){},w.prototype.canPlayType=function(){return""},w.isTech=w.registerTech=function(t,e){if(w.techs_||(w.techs_={}),!w.isTech(e))throw new Error("Tech "+t+" must be a Tech");return w.techs_[t]=e},w.getTech=w);function w(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,w),e.reportTouchActivity=!1;var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,_.call(this,null,e,t));return i.hasStarted_=!1,i.on("playing",function(){this.hasStarted_=!0}),i.on("loadstart",function(){this.hasStarted_=!1}),i.textTracks_=e.textTracks,i.videoTracks_=e.videoTracks,i.audioTracks_=e.audioTracks,i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(,!1===e.nativeCaptions&&(i.featuresNativeTextTracks=!1),i.featuresNativeTextTracks||i.emulateTextTracks(),i.autoRemoteTextTracks_=new u.default,i.initTextTrackListeners(),i.initTrackListeners(),e.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}T.prototype.textTracks_,T.prototype.audioTracks_,T.prototype.videoTracks_,T.prototype.featuresVolumeControl=!0,T.prototype.featuresFullscreenResize=!1,T.prototype.featuresPlaybackRate=!1,T.prototype.featuresProgressEvents=!1,T.prototype.featuresTimeupdateEvents=!1,T.prototype.featuresNativeTextTracks=!1,T.withSourceHandlers=function(r){r.registerSourceHandler=r.canPlayType=r.selectSourceHandler=r.canPlaySource=["seekable","duration"].forEach(r.prototype),r.prototype.setSource=r.prototype.firstLoadStartListener_=r.prototype.successiveLoadStartListener_=r.prototype.disposeSourceHandler=,i.default.registerComponent("Tech",T),i.default.registerComponent("MediaTechController",T),T.registerTech("Tech",T),e.default=T},{103:103,46:46,5:5,63:63,65:65,66:66,70:70,72:72,76:76,79:79,83:83,86:86,87:87,88:88,90:90,96:96,97:97}],63:[function(t,e,i){"use strict";i.__esModule=!0;var o=n(t(74)),s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(78)),u=n(t(96));function n(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c,d=function(t,e){for(var i=0;i<t.length;i++)e.id!==t[i].id&&(t[i].enabled=!1)},t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(h,c=o.default),h.prototype.addTrack_=function(t){var e=this;t.enabled&&d(this,t),c.prototype.addTrack_.call(this,t),t.addEventListener&&t.addEventListener("enabledchange",function(){e.changing_||(e.changing_=!0,d(e,t),e.changing_=!1,e.trigger("change"))})},h.prototype.addTrack=function(t){this.addTrack_(t)},h.prototype.removeTrack=function(t){c.prototype.removeTrack_.call(this,t)},h);function h(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var i=void 0,n=e.length-1;0<=n;n--)if(e[n].enabled){d(e,e[n]);break}if(s.IS_IE8){for(var r in i=u.default.createElement("custom"),o.default.prototype)"constructor"!==r&&(i[r]=o.default.prototype[r]);for(var a in h.prototype)"constructor"!==a&&(i[a]=h.prototype[a])}return(i=t=l(this,c.call(this,e,i))).changing_=!1,l(t,i)}i.default=t},{74:74,78:78,96:96}],64:[function(t,e,i){"use strict";i.__esModule=!0;var a=t(73),n=r(t(75)),o=r(t(87)),s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(78));function r(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var l,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,l=n.default),c);function c(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);var e=(0,o.default)(t,{kind:a.AudioTrackKind[t.kind]||""}),i=t=u(this,l.call(this,e)),n=!1;if(s.IS_IE8)for(var r in c.prototype)"constructor"!==r&&(i[r]=c.prototype[r]);return Object.defineProperty(i,"enabled",{get:function(){return n},set:function(t){"boolean"==typeof t&&t!==n&&(n=t,this.trigger("enabledchange"))}}),e.enabled&&(i.enabled=e.enabled),i.loaded_=!0,u(t,i)}i.default=n},{73:73,75:75,78:78,87:87}],65:[function(t,e,i){"use strict";i.__esModule=!0;var n,a=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(78)),r=t(96),o=(n=r)&&n.__esModule?n:{default:n};s.prototype.addTrackElement_=s.prototype.getTrackElementByTrack_=s.prototype.removeTrackElement_=t=s;function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);var e=this;if(a.IS_IE8)for(var i in e=o.default.createElement("custom"),s.prototype)"constructor"!==i&&(e[i]=s.prototype[i]);e.trackElements_=[],Object.defineProperty(e,"length",{get:function(){return this.trackElements_.length}});for(var n=0,r=t.length;n<r;n++)e.addTrackElement_(t[n]);if(a.IS_IE8)return e}i.default=t},{78:78,96:96}],66:[function(t,e,i){"use strict";i.__esModule=!0;var o=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(78)),s=r(t(96)),n=r(t(42)),u=r(t(72));function r(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c,d=0,h=2,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(f,c=n.default),f);function f(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f);var e=l(this,c.call(this)),i=void 0,n=e;if(o.IS_IE8)for(var r in n=s.default.createElement("custom"),f.prototype)"constructor"!==r&&(n[r]=f.prototype[r]);var a=new u.default(t);return n.kind=a.kind,n.src=a.src,n.srclang=a.language,n.label=a.label,n.default=a.default,Object.defineProperty(n,"readyState",{get:function(){return i}}),Object.defineProperty(n,"track",{get:function(){return a}}),i=d,a.addEventListener("loadeddata",,o.IS_IE8?l(e,n):e}n.prototype.allowedEvents_={load:"load"},n.NONE=d,n.LOADING=1,n.LOADED=h,n.ERROR=3,i.default=n},{42:42,72:72,78:78,96:96}],67:[function(t,e,i){"use strict";i.__esModule=!0;var n,r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(78)),a=t(96),o=(n=a)&&n.__esModule?n:{default:n};s.prototype.setCues_=s.prototype.getCueById=function(t){for(var e=null,i=0,n=this.length;i<n;i++){var r=this[i];if(r.id===t){e=r;break}}return e},t=s;.default=t},{78:78,96:96}],68:[function(t,e,i){"use strict";i.__esModule=!0;var n=r(t(5)),l=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(83)),s=r(t(97));function r(t){return t&&t.__esModule?t:{default:t}}var u="#222",c={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};r a,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(o,a=n.default),o.prototype.toggleDisplay=o.prototype.createEl=o.prototype.clearDisplay=o.prototype.updateDisplay=o.prototype.updateForTrack=function(t){if("function"==typeof s.default.WebVTT&&t.activeCues){for(var e=this.player_.textTrackSettings.getValues(),i=[],n=0;n<t.activeCues.length;n++)i.push(t.activeCues[n]);s.default.WebVTT.processCues(s.default,i,this.el_);for(var r=i.length;r--;){var a,o=i[r];o&&(a=o.displayState,e.color&&(a.firstChild.style.color=e.color),e.textOpacity&&h(a.firstChild,"color",d(e.color||"#fff",e.textOpacity)),e.backgroundColor&&(a.firstChild.style.backgroundColor=e.backgroundColor),e.backgroundOpacity&&h(a.firstChild,"backgroundColor",d(e.backgroundColor||"#000",e.backgroundOpacity)),e.windowColor&&(e.windowOpacity?h(a,"backgroundColor",d(e.windowColor,e.windowOpacity)):a.style.backgroundColor=e.windowColor),e.edgeStyle&&("dropshadow"===e.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px "+u:"raised"===e.edgeStyle?a.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px "+u:"depressed"===e.edgeStyle?a.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px "+u:"uniform"===e.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px "+u)),e.fontPercent&&1!==e.fontPercent&&(o=s.default.parseFloat(a.style.fontSize),a.style.fontSize=o*e.fontPercent+"px",a.style.height="auto",a.style.top="auto",a.style.bottom="2px"),e.fontFamily&&"default"!==e.fontFamily&&("small-caps"===e.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=c[e.fontFamily]))}}},o);function o(u,t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.call(this,u,t,e));return u.on("loadstart",l.bind(e,e.toggleDisplay)),u.on("texttrackchange",l.bind(e,e.updateDisplay)),u.ready(l.bind(e,),e}n.default.registerComponent("TextTrackDisplay",t),i.default=t},{5:5,83:83,97:97}],69:[function(t,e,i){"use strict";i.__esModule=!0;.default={textTracksToJson:jsonToTextTracks:trackToJson_:n}},{}],70:[function(t,e,i){"use strict";i.__esModule=!0;var r=u(t(74)),n=s(t(83)),a=s(t(78)),o=u(t(96));function s(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function u(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,c=r.default),d.prototype.addTrack_=d);function d(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);var e=void 0;if(a.IS_IE8){for(var i in e=o.default.createElement("custom"),r.default.prototype)"constructor"!==i&&(e[i]=r.default.prototype[i]);for(var n in d.prototype)"constructor"!==n&&(e[n]=d.prototype[n])}return t=l(this,c.call(this,t,e)),l(e=t,e)}i.default=t},{74:74,78:78,83:83,96:96}],71:[function(t,e,i){"use strict";i.__esModule=!0;var n=c(t(97)),r=c(t(5)),a=t(81),o=l(t(83)),s=l(t(88)),u=c(t(86));function l(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function c(t){return t&&t.__esModule?t:{default:t}}var d="vjs-text-track-settings",h=["#000","Black"],f=["#00F","Blue"],p=["#0FF","Cyan"],m=["#0F0","Green"],y=["#F0F","Magenta"],g=["#F00","Red"],v=["#FFF","White"],b=["#FF0","Yellow"],_=["1","Opaque"],T=["0.5","Semi-Transparent"],t=["0","Transparent"],w={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[h,v,g,m,f,b,y,p]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[_,T,t]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[v,h,g,m,f,b,y,p]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:,textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[_,T]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[t,T,_]}};.windowColor.options=w.backgroundColor.options;var S,_=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(k,S=r.default),k.prototype.createElSelect_=k.prototype.createElFgColor_=function(){var t=(0,a.createEl)("legend",{textContent:this.localize("Text")}),e=this.createElSelect_("color"),i=(0,a.createEl)("span",{className:"vjs-text-opacity vjs-opacity"},void 0,this.createElSelect_("textOpacity"));return(0,a.createEl)("fieldset",{className:"vjs-fg-color vjs-tracksetting"},void 0,[t].concat(e,i))},k.prototype.createElBgColor_=function(){var t=(0,a.createEl)("legend",{textContent:this.localize("Background")}),e=this.createElSelect_("backgroundColor"),i=(0,a.createEl)("span",{className:"vjs-bg-opacity vjs-opacity"},void 0,this.createElSelect_("backgroundOpacity"));return(0,a.createEl)("fieldset",{className:"vjs-bg-color vjs-tracksetting"},void 0,[t].concat(e,i))},k.prototype.createElWinColor_=k.prototype.createElColors_=k.prototype.createElFont_=k.prototype.createElControls_=k.prototype.createEl=k.prototype.getValues=function(){var r=this;return s.reduce(w,{})},k.prototype.setValues=k.prototype.setDefaults=k.prototype.restoreSettings=k.prototype.saveSettings=k.prototype.updateDisplay=k);.default.registerComponent("TextTrackSettings",_),i.default=_},{5:5,81:81,83:83,86:86,88:88,97:97}],72:[function(t,e,i){"use strict";i.__esModule=!0;var c=l(t(67)),d=r(t(83)),h=t(73),a=l(t(86)),o=l(t(97)),n=l(t(75)),s=t(92),u=l(t(108)),f=l(t(87)),p=r(t(78));function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function l(t){return t&&t.__esModule?t:{default:t}}function m(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function y(t,e){var i=new o.default.WebVTT.Parser(o.default,o.default.vttjs,o.default.WebVTT.StringDecoder()),n=[];i.oncue=function(t){e.addCue(t)},i.onparsingerror=function(t){n.push(t)},i.onflush=i.parse(t),0<n.length&&(o.default.console&&o.default.console.groupCollapsed&&o.default.console.groupCollapsed("Text Track parsing errors for "+e.src),n.forEach(function(t){return a.default.error(t)}),o.default.console&&o.default.console.groupEnd&&o.default.console.groupEnd()),i.flush()}var g,v=function(t,r){var e={uri:t},t=(0,s.isCrossOrigin)(t);t&&(e.cors=t),(0,u.default)(e,d.bind(this,function(t,e,i){return t?a.default.error(t,e):(r.loaded_=!0,void("function"!=typeof o.default.WebVTT?r.tech_&&(r.tech_.on("vttjsloaded",n=function(){return y(i,r)}),r.tech_.on("vttjserror",):y(i,r)));var n}))},n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(b,g=n.default),b.prototype.addCue=b.prototype.removeCue=b);function b(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,b),!t.tech)throw new Error("A tech was not provided.");var e=(0,f.default)(t,{kind:h.TextTrackKind[t.kind]||"subtitles",language:t.language||t.srclang||""}),i=h.TextTrackMode[e.mode]||"disabled",n=e.default;"metadata"!==e.kind&&"chapters"!==e.kind||(i="hidden");var r=t=m(this,g.call(this,e));if(r.tech_=e.tech,p.IS_IE8)for(var a in b.prototype)"constructor"!==a&&(r[a]=b.prototype[a]);r.cues_=[],r.activeCues_=[];var o=new c.default(r.cues_),s=new c.default(r.activeCues_),u=!1,l=d.bind(r,;return"disabled"!==i&&r.tech_.ready(function(){r.tech_.on("timeupdate",l)},!0),Object.defineProperty(r,"default",{get:function(){return n},set:function(){}}),Object.defineProperty(r,"mode",{get:function(){return i},set:),Object.defineProperty(r,"cues",{get:set:function(){}}),Object.defineProperty(r,"activeCues",{get:set:function(){}}),e.src?(r.src=e.src,v(e.src,r)):r.loaded_=!0,m(t,r)}n.prototype.allowedEvents_={cuechange:"cuechange"},i.default=n},{108:108,67:67,73:73,75:75,78:78,83:83,86:86,87:87,92:92,97:97}],73:[{}],74:[function(t,e,i){"use strict";i.__esModule=!0;var n=r(t(42)),a=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(78)),o=r(t(96));function r(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var u,l,c=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,u=n.default),d.prototype.addTrack_=d.prototype.removeTrack_=d.prototype.getTrackById=d);function d(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);var i=s(this,u.call(this));if(!e&&(e=i,a.IS_IE8))for(var n in e=o.default.createElement("custom"),d.prototype)"constructor"!==n&&(e[n]=d.prototype[n]);e.tracks_=[],Object.defineProperty(e,"length",{get:function(){return this.tracks_.length}});for(var r=0;r<t.length;r++)e.addTrack_(t[r]);return s(i,e)}for(l in c.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"},c.prototype.allowedEvents_)c.prototype["on"+l]=null;i.default=c},{42:42,78:78,96:96}],75:[function(t,e,i){"use strict";i.__esModule=!0;var o=r(t(78)),s=n(t(96)),u=r(t(85)),t=n(t(42));function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c,t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,c=t.default),d);function d(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);var e=l(this,c.call(this)),i=e;if(o.IS_IE8)for(var n in i=s.default.createElement("custom"),d.prototype)"constructor"!==n&&(i[n]=d.prototype[n]);var r,a={id:t.id||"vjs_track_"+u.newGUID(),kind:t.kind||"",label:t.label||"",language:t.language||""};for(r in a)!r);return l(e,i)}i.default=t},{42:42,78:78,85:85,96:96}],76:[function(t,e,i){"use strict";i.__esModule=!0;var o=n(t(74)),s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(78)),u=n(t(96));function n(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c,d=t=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(h,c=o.default),h.prototype.addTrack_=h.prototype.addTrack=function(t){this.addTrack_(t)},h.prototype.removeTrack=h);function h(){var t,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);for(var i=void 0,n=e.length-1;0<=n;n--)if(e[n].selected){d(e,e[n]);break}if(s.IS_IE8){for(var r in i=u.default.createElement("custom"),o.default.prototype)"constructor"!==r&&(i[r]=o.default.prototype[r]);for(var a in h.prototype)"constructor"!==a&&(i[a]=h.prototype[a])}return(i=t=l(this,c.call(this,e,i))).changing_=!1,Object.defineProperty(i,"selectedIndex",{get:set:function(){}}),l(t,i)}i.default=t},{74:74,78:78,96:96}],77:[function(t,e,i){"use strict";i.__esModule=!0;var a=t(73),n=r(t(75)),o=r(t(87)),s=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(78));function r(t){return t&&t.__esModule?t:{default:t}}ar l,n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,l=n.default),c);function c(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,c);var e=(0,o.default)(t,{kind:a.VideoTrackKind[t.kind]||""}),i=t=u(this,l.call(this,e)),n=!1;if(s.IS_IE8)for(var r in c.prototype)"constructor"!==r&&(i[r]=c.prototype[r]);return Object.defineProperty(i,"selected",{get:function(){return n},set:),e.selected&&(i.selected=e.selected),u(t,i)}i.default=n},{73:73,75:75,78:78,87:87}],78:[function(t,e,i){"use strict";i.__esModule=!0,i.BACKGROUND_SIZE_SUPPORTED=i.TOUCH_ENABLED=i.IS_ANY_SAFARI=i.IS_SAFARI=i.IE_VERSION=i.IS_IE8=i.CHROME_VERSION=i.IS_CHROME=i.IS_EDGE=i.IS_FIREFOX=i.IS_NATIVE_ANDROID=i.IS_OLD_ANDROID=i.ANDROID_VERSION=i.IS_ANDROID=i.IOS_VERSION=i.IS_IOS=i.IS_IPOD=i.IS_IPHONE=i.IS_IPAD=void 0;var n,r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}}(t(81)),a=t(97),o=(n=a)&&n.__esModule?n:{default:n};var s=o.default.navigator&&o.default.navigator.userAgent||"",u=/AppleWebKit\/([\d.]+)/i.exec(s),l=u?parseFloat(u.pop()):null,c=i.IS_IPAD=/iPad/i.test(s),d=i.IS_IPHONE=/iPhone/i.test(s)&&!c,t=i.IS_IPOD=/iPod/i.test(s),u=i.IS_IOS=d||c||t,c=(i.IOS_VERSION=(d=s.match(/OS (\d+)_/i))&&d[1]?d[1]:null,i.IS_ANDROID=/Android/i.test(s)),t=i.ANDROID_VERSION=),d=(i.IS_OLD_ANDROID=c&&/webkit/i.test(s)&&t<2.3,i.IS_NATIVE_ANDROID=c&&t<5&&l<537,i.IS_FIREFOX=/Firefox/i.test(s),i.IS_EDGE=/Edge/i.test(s)),t=i.IS_CHROME=!d&&/Chrome/i.test(s),d=(i.CHROME_VERSION=(l=s.match(/Chrome\/(\d+)/))&&l[1]?parseFloat(l[1]):null,i.IS_IE8=/MSIE\s8\.0/.test(s),i.IE_VERSION=l=!(l=(l=/MSIE\s(\d+)\.\d/.exec(s))&&parseFloat(l[1]))&&/Trident\/7.0/i.test(s)&&/rv:11.0/.test(s)?11:l,i.IS_SAFARI=/Safari/i.test(s)&&!t&&!c&&!d);i.IS_ANY_SAFARI=d||u,i.TOUCH_ENABLED=r.isReal()&&("ontouchstart"in o.default||o.default.DocumentTouch&&o.default.document instanceof o.default.DocumentTouch),i.BACKGROUND_SIZE_SUPPORTED=r.isReal()&&"backgroundSize"in o.default.document.createElement("video").style},{81:81,97:97}],79:[function(t,e,i){"use strict";i.__esModule=!0,i.bufferedPercent=function(t,e){var i=0,n=void 0,r=void 0;if(!e)return 0;t&&t.length||(t=(0,o.createTimeRange)(0,0));for(var a=0;a<t.length;a++)n=t.start(a),r=t.end(a),i+=(r=e<r?e:r)-n;return i/e};var o=t(90)},{90:90}],80:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e){if(!t||!e)return"";if("function"!=typeof a.default.getComputedStyle)return t.currentStyle[e]||"";t=a.default.getComputedStyle(t);return t?t[e]:""};var n,r=t(97),a=(n=r)&&n.__esModule?n:{default:n}},{97:97}],81:[function(t,e,i){"use strict";i.__esModule=!0,i.$$=i.$=void 0;var n,a=((n=["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."]).raw=["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],n);i.isReal=i.isEl=p,i.getEl=i.createEl=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],r=o.default.createElement(t);Object.getOwnPropertyNames(i).forEach(,Object.getOwnPropertyNames(e).forEach(,n&&A(r,n);return r},i.textContent=y,i.insertElFirst=i.getElData=function(t){var e=t[v];e=e||(t[v]=r.newGUID());g[e]||(g[e]={});return g[e]},i.hasElData=i.removeElData=i.hasElClass=b,i.addElClass=_,i.removeElClass=T,i.toggleElClass=function(t,e,i){var n=b(t,e);"function"==typeof i&&(i=i(t,e));"boolean"!=typeof i&&(i=!n);if(i!==n)return(i?_:T)(t,e),t},i.setElAttributes=i.getElAttributes=function(t){var e={},i=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(t&&t.attributes&&0<t.attributes.length)for(var n=t.attributes,r=n.length-1;0<=r;r--){var a=n[r].name,o=n[r].value;"boolean"!=typeof t[a]&&-1===i.indexOf(","+a+",")||(o=null!==o),e[a]=o}return e},i.getAttribute=i.setAttribute=i.removeAttribute=i.blockTextSelection=i.unblockTextSelection=i.findElPosition=w,i.getPointerPosition=i.isTextNode=E,i.emptyEl=S,i.normalizeContent=k,i.appendContent=A,i.insertContent=var o=d(t(96)),s=d(t(97)),r=t(85)),u=d(t(86)),l=d(t(102)),c=t(88);function d(t){return t&&t.__esModule?t:{default:t}}nction p(t){return(0,c.isObject)(t)&&1===t.nodeType}function m(i){return function(t,e){if(!h(t))return o.default[i](null);e=p(e=h(e)?o.default.querySelector(e):e)?e:o.default;return e[i]&&e[i](t)}}ar g={},v="vdata"+(new Date).getTime();ction w(t){var e=void 0;if(!(e=t.getBoundingClientRect&&t.parentNode?t.getBoundingClientRect():e))return{left:0,top:0};var i=o.default.documentElement,n=o.default.body,r=i.clientLeft||n.clientLeft||0,t=s.default.pageXOffset||n.scrollLeft,r=e.left+t-r,i=i.clientTop||n.clientTop||0,n=s.default.pageYOffset||n.scrollTop,i=e.top+n-i;return{left:Math.round(r),top:Math.round(i)}}m("querySelector"),i.$$=m("querySelectorAll")},{102:102,85:85,86:86,88:88,96:96,97:97}],82:[function(t,e,i){"use strict";i.__esModule=!0,i.fixEvent=f,i.on=y,i.off=g,i.trigger=o,i.one=var u=r(t(81)),a=r(t(85)),l=n(t(86)),s=n(t(97)),c=n(t(96));function n(t){return t&&t.__esModule?t:{default:t}}function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}nction f(t){function e(){return!0}function i(){return!1}if(!t||!t.isPropagationStopped){var n,r,a,o=t||s.default.event;for(n in t={},o)"layerX"!==n&&"layerY"!==n&&"keyLocation"!==n&&"webkitMovementX"!==n&&"webkitMovementY"!==n&&("returnValue"===n&&o.preventDefault||(t[n]=o[n]));t.target||(t.target=t.srcElement||c.default),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=t.defaultPrevented=!1,t.stopPropagation=t.isPropagationStopped=i,t.stopImmediatePropagation=t.isImmediatePropagationStopped=i,null!==t.clientX&&void 0!==t.clientX&&(r=c.default.documentElement,a=c.default.body,t.pageX=t.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),t.pageY=t.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)),t.which=t.charCode||t.keyCode,null!==t.button&&void 0!==t.button&&(t.button=1&t.button?0:4&t.button?1:2&t.button?2:0)}return t}var p=!1;!);var m=["touchstart","touchmove"];function y(o,t,e){if(Array.isArray(t))return h(y,o,t,e);var s=u.getElData(o);s.handlers||(s.handlers={}),s.handlers[t]||(s.handlers[t]=[]),e.guid||(e.guid=a.newGUID()),s.handlers[t].push(e),s.dispatcher||(s.disabled=!1,s.dispatcher=,1===s.handlers[t].length&&(o.addEventListener?(e=!1,p&&-1<m.indexOf(t)&&(e={passive:!0}),o.addEventListener(t,s.dispatcher,e)):o.attachEvent&&o.attachEvent("on"+t,s.dispatcher))}unction o(t,e,i){var n=u.hasElData(t)?u.getElData(t):{},r=t.parentNode||t.ownerDocument;return e=f(e="string"==typeof e?{type:e,target:t}:e),n.dispatcher&&n.dispatcher.call(t,e,i),r&&!e.isPropagationStopped()&&!0===e.bubbles?o.call(null,r,e,i):r||e.defaultPrevented||(r=u.getElData(e.target),e.target[e.type]&&(r.disabled=!0,"function"==typeof e.target[e.type]&&e.target[e.type](),r.disabled=!1)),!e.defaultPrevented}},{81:81,85:85,86:86,96:96,97:97}],83:[function(t,e,i){"use strict";i.__esModule=!0,i.throttle=i.bind=void 0;var r=t(85);i.bind=function(t,e,i){e.guid||(e.guid=(0,r.newGUID)());eturn n.guid=i?i+"_"+e.guid:e.guid,n},i.throttle=,{85:85}],84:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:t;t=t<0?0:t;var i=Math.floor(t%60),n=Math.floor(t/60%60),r=Math.floor(t/3600),a=Math.floor(e/60%60),e=Math.floor(e/3600);return(r=0<(r=isNaN(t)||t===1/0?n=i="-":r)||0<e?r+":":"")+(n=((r||10<=a)&&n<10?"0"+n:n)+":")+(i=i<10?"0"+i:i)}},{}],85:[{}],86:[function(t,e,i){"use strict";i.__esModule=!0,i.logByType=void 0;var n,r=t(97),a=(n=r)&&n.__esModule?n:{default:n},o=t(78),s=t(88);var u=void 0,l=i.logByType=function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!!o.IE_VERSION&&o.IE_VERSION<11;"log"!==t&&e.unshift(t.toUpperCase()+":"),u.history.push(e),e.unshift("VIDEOJS:");t=a.default.console&&a.default.console[t];t&&(i&&(e=e.map(.join(" ")),t.apply?t[Array.isArray(e)?"apply":"call"](a.default.console,e):t(e))};(u=.history=[],u.error=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return l("error",e)},u.warn=i.default=u},{78:78,88:88,97:97}],87:[{88:88}],88:[function(t,e,i){"use strict";i.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};i.each=o,i.reduce=i.assign=function(i){for(var t=arguments.length,e=Array(1<t?t-1:0),n=1;n<t;n++)e[n-1]=arguments[n];if(Object.assign)return Object.assign.apply(Object,[i].concat(e));return e.forEach(,i},i.isObject=s,i.isPlain=var r=Object.prototype.toString,a={}],89:[{96:96}],90:[function(t,e,i){"use strict";i.__esModule=!0,i.createTimeRange=void 0,i.createTimeRanges=u;var n,r=t(86),a=(n=r)&&n.__esModule?n:{default:n};function o(t,e,i,n){return void 0===n&&(a.default.warn("DEPRECATED: Function '"+t+"' on 'TimeRanges' called without an index argument."),n=0),function(t,e,i){if(e<0||i<e)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+e+") is greater than or equal to the maximum bound ("+i+").")}(t,n,i.length-1),i[n][e]}createTimeRange=u},{86:86}],91:[function(t,e,i){"use strict";i.__esModule=!0,i.default=,{}],92:[function(t,e,i){"use strict";i.__esModule=!0,i.isCrossOrigin=i.getFileExtension=i.getAbsoluteURL=i.parseUrl=void 0;var s=r(t(96)),n=r(t(97));function r(t){return t&&t.__esModule?t:{default:t}}var a=i.parseUrl=i.getAbsoluteURL=i.getFileExtension=i.isCrossOrigin=,{96:96,97:97}],93:[function(t,e,i){"use strict";i.__esModule=!0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?r=P(t(97)),a=P(t(96)),o=R(t(78)),s=R(t(81)),u=R(t(56)),l=R(t(89)),c=P(t(5)),d=P(t(42)),h=R(t(82)),f=P(t(51)),p=P(t(52)),m=P(t(87)),y=R(t(83)),g=P(t(72)),v=P(t(64)),b=P(t(77)),_=t(90),T=P(t(84)),w=P(t(86)),E=R(t(92)),S=t(88),k=P(t(80)),A=P(t(43)),O=P(t(108)),C=P(t(62));function R(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function P(t){return t&&t.__esModule?t:{default:t}}function x(t,e,i){var n=void 0;if("string"==typeof t){if(0===t.indexOf("#")&&(t=t.slice(1)),x.getPlayers()[t])return e&&w.default.warn('Player "'+t+'" is already initialised. Options will not be applied.'),i&&x.getPlayers()[t].ready(i),x.getPlayers()[t];n=s.getEl(t)}else n=t;if(!n||!n.nodeName)throw new TypeError("The element or ID supplied is not valid. (videojs)");if(n.player||f.default.players[n.playerId])return n.player||f.default.players[n.playerId];e=e||{},x.hooks("beforesetup").forEach(function(t){t=t(n,(0,m.default)(e));(0,S.isObject)(t)&&!Array.isArray(t)?e=(0,m.default)(e,t):w.default.error("please return an object in beforesetup hooks")});var r=new(c.default.getComponent("Player"))(n,e,i);return x.hooks("setup").forEach(,r}"undefined"==typeof HTMLVideoElement&&s.isReal()&&(a.default.createElement("video"),a.default.createElement("audio"),a.default.createElement("track")),x.hooks_={},x.hooks=x.hook=x.removeHook=!0!==r.default.VIDEOJS_NO_DYNAMIC_STYLE&&s.isReal()&&((a=s.$(".vjs-styles-defaults"))||(a=l.createStyleElement("vjs-styles-defaults"),(r=s.$("head"))&&r.insertBefore(a,r.firstChild),l.setTextContent(a,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    "))),u.autoSetupTimeout(1,x),x.VERSION="5.20.4",x.options=f.default.prototype.options_,x.getPlayers=function(){return f.default.players},x.players=f.default.players,x.getComponent=c.default.getComponent,x.registerComponent=x.getTech=C.default.getTech,x.registerTech=C.default.registerTech,x.browser=o,x.TOUCH_ENABLED=o.TOUCH_ENABLED,x.extend=A.default,x.mergeOptions=m.default,x.bind=y.bind,x.plugin=p.default,x.addLanguage=x.log=w.default,x.createTimeRange=x.createTimeRanges=_.createTimeRanges,x.formatTime=T.default,x.parseUrl=E.parseUrl,x.isCrossOrigin=E.isCrossOrigin,x.EventTarget=d.default,x.on=h.on,x.one=h.one,x.off=h.off,x.trigger=h.trigger,x.xhr=O.default,x.TextTrack=g.default,x.AudioTrack=v.default,x.VideoTrack=b.default,x.isEl=s.isEl,x.isTextNode=s.isTextNode,x.createEl=s.createEl,x.hasClass=s.hasElClass,x.addClass=s.addElClass,x.removeClass=s.removeElClass,x.toggleClass=s.toggleElClass,x.setAttributes=s.setElAttributes,x.getAttributes=s.getElAttributes,x.emptyEl=s.emptyEl,x.appendContent=s.appendContent,x.insertContent=s.insertContent,x.computedStyle=k.default,"object"===(void 0===i?"undefined":n(i))&&"object"===(void 0===e?"undefined":n(e))&&(e.exports=x),i.default=x},{108:108,42:42,43:43,5:5,51:51,52:52,56:56,62:62,64:64,72:72,77:77,78:78,80:80,81:81,82:82,83:83,84:84,86:86,87:87,88:88,89:89,90:90,92:92,96:96,97:97}],94:[{}],95:[function(t,e,i){var n=t(98);e.exports=var r=Object.prototype.toString,a=Object.prototype.hasOwnProperty},{98:98}],96:[function(n,r,t){!function(t){var e=void 0!==t?t:"undefined"!=typeof window?window:{},i=n(94);"undefined"!=typeof document?r.exports=document:(t=(t=e["__GLOBAL_DOCUMENT_CACHE@4"])||(e["__GLOBAL_DOCUMENT_CACHE@4"]=i),r.exports=t)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{94:94}],97:[function(t,e,i){!call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],98:[{}],99:[function(t,e,i){var r=t(101),a=t(95);e.exports=function(t){if(!t)return{};var n={};return a(r(t).split("\n"),,n}},{101:101,95:95}],100:[{}],101:[{}],102:[{}],103:[{104:104,105:105,106:106,107:107}],104:[function(t,e,i){var n=Object.create||function r(){}prototype=n(Error.prototype)).constructor=u).Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},l.prototype={set:get:has:alt:integer:percent:;var f={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"‎","&rlm;":"‏","&nbsp;":" "},p={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},m={v:"title",lang:"lang"},y={rt:"ruby"};function s([t]}for(var t,n,a,o,s,u,l=r.document.createElement("div"),c=l,d=[];null!),t}());)"<"!==t[0]?c.appendChild(r.document.createTextn t}(t))):"/"!==t[1]?(n=h(t.substr(1,t.length-2)))?(a=r.document.createProcessingInstruction("timestamp",n),c.appendChild(a)):(o=t.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/))&&(a=function(t,e){var i=p[t];if(!i)return null;var n=r.document.createElement(i);return n.localName=i,(t=m[t])&&e&&(n[t]=e.trim()),n}(o[1],o[3]))&&(s=c,y[(u=a).localName]&&y[u.localName]!==s.localName||(o[2]&&(a.className=o[2].substr(1).replace("."," ")),d.push(o[1]),c.appendChild(a),c=a)):d.length&&d[d.length-1]===t.substr(2).replace(">","")&&(d.pop(),c=c.parentNode);return l}var o=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,11141tr"}function g(){}function v(t,e,i){var n=/MSIE\s8\.0/.test(navigator.userAgent),r="rgba(255, 255, 255, 1)",a="rgba(0, 0, 0, 0.8)";n&&(r="rgb(255, 255, 255)",a="rgb(0, 0, 0)"),g.call(this),this.cue=e,this.cueDiv=s(t,e.text);a={color:r,backgroundColor:a,position:"relative",left:0,right:0,top:0,bottom:0,display:"inline"};n||(a.writingMode=""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",a.unicodeBidi="plaintext"),this.applyStyles(a,this.cueDiv),this.div=t.document.createElement("div"),a={textAlign:"middle"===e.align?"center":e.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},n||(a.direction=d(this.cueDiv),a.writingMode=""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"plaintext"),this.applyStyles(a),this.div.appendChild(this.cueDiv);var o=0;switch(e.positionAlign){case"start":o=e.position;break;case"middle":o=e.position-e.size/2;break;case"end":o=e.position-e.size}""===e.vertical?this.applyStyles({left:this.formatStyle(o,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(o,"%"),height:this.formatStyle(e.size,"%")}),this.)})}}function b(t){var e,i,n,r,a=/MSIE\s8\.0/.test(navigator.userAgent);t.div&&(e=t.div.offsetHeight,i=t.div.offsetWidth,n=t.div.offsetTop,r=(r=t.div.childNodes)&&(r=r[0])&&r.getClientRects&&r.getClientRects(),t=t.div.getBoundingClientRect(),r=r?Math.max(r[0]&&r[0].height||0,t.height/r.length):0),this.left=t.left,this.right=t.right,this.top=t.top||n,this.height=t.height||e,this.bottom=t.bottom||n+(t.height||e),this.width=t.width||i,this.lineHeight=void 0!==r?r:t.lineHeight,a&&!this.lineHeight&&(this.lineHeights))}function a(){}g.prototype.applySti])},g.prototype.formatSt+e},(v.prototype=n(g.prototype)).constructor=v,b.prototype.=e}},b.prototype.overtop},b.prototype.overlapn!1},b.prototype.wight},b.prototype.overlapsOppositeom}},b.prototype.intersectPercenth)},b.prototype.toCSSCompatVath}},b.getSimpleBoxPosi|i}},a.StringDec)}}},a.convertCueToDOMull};a.processte)},(a.Pa=[]}).prototype={reportOrThrowE(t)},parse:function(t){var n=/)}t&&(n.buffer+=n.decoder.decode(t,{stream:!0}));try{if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var r,a=(r=e()).match(/^WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new u(u.Errors.BadSignature);n.state="HEADER"}for(var o=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:r=e(),n.state){case"HEADER":/:/.test(r)?i(r):r||(n.state="ID");continue;case"NOTE":r||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){n.state="NOTE";break}if(!r)continue;if(n.cue=new(n.vttjs.VTTCue||n.window.VTTCue)(0,0,""),n.state="CUE",-1===r.indexOf("--\x3e")){n.cue.id=r;continue}case"CUE":gn)}(r,n.cue,n.regionList)}catch(t){n.reportOrThrowError(t),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var s=-1!==r.indexOf("--\x3e");if(!r||s&&(o=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=r;continue;case"BADCUE":r||(n.state="ID");continue}}}catch(t){n.reportOrThrowError(t),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},fhis}},e.exports=a},{}],105:[function(t,e,i){var _={"":!0,lr:!0,rl:!0},n={start:!0,middle:!0,end:!0,left:!0,right t}function r(t,e,i){var n=this,r=/MSIE\s8\.0/.test(navigator.userAgent),a={};r?n=document.createElement("custom"):a.enumerable=!0,n.hasBeenReset=!1;var o="",s=!1,u=t,l=e,c=i,d=null,h="",f=!0,p="auto",m="start",y=50,g="middle",v=50,b="middle";if(Object.defineProperty(n,"id",w({},a,{get:function(){return o}"+t}})),Object.defineProperty(n,"pauseOnExit",w({},a,{get:function(){return s}!!t}})),Object.defineProperty(n,"startTime",w({},a,{get:function(){return u},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");u=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"endTime",w({},a,{get:function(){return l}=!0}})),Object.defineProperty(n,"text",w({},a,{get:function(){return c}=!0}})),Object.defineProperty(n,"region",w({},a,{get:function(){return d}=!0}})),Object.defineProperty(n,"vertical",w({},a,{get:function(){return h}=!0}})),Object.defineProperty(n,"snapToLines",w({},a,{get:function(){return f}=!0}})),Object.defineProperty(n,"line",w({},a,{get:function(){return p}=!0}})),Object.defineProperty(n,"lineAlign",w({},a,{get:function(){return m},set:function(t){t=T(t);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"position",w({},a,{get:function(){return y},set:function(t){if(t<0||100<t)throw new Error("Position must be between 0 and 100.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"positionAlign",w({},a,{get:function(){return g},set:function(t){t=T(t);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"size",w({},a,{get:function(){return v}=!0}})),Object.defineProperty(n,"align",w({},a,{get:function(){return b}=!0}})),n.displayState=void 0,r)return n}r.prototype.getCueAsxt)},e.exports=r},{}],106:[function(t,e,i){var u={"":!0,up100}e.exports=function(){var e=100,i=3,n=0,r=100,a=0,o=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!l(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return i}i=t}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(t){if(!l(t))throw new Error("RegionAnchorX must be between 0 and 100.");r=t}},regionAnchorX:{enumerable:!0,get:function(){return n},set:function(t){if(!l(t))throw new Error("RegionAnchorY must be between 0 and 100.");n=t}},viewportAnchorY:{enumerable:!0,get:function(){return o},set:function(t){if(!l(t))throw new Error("ViewportAnchorY must be between 0 and 100.");o=t}},viewportAnchorX:{enumerable:!0,get:function(){return a}a=t}},scroll:{enumerable:!0,get:function(){return s},set:function(t){t="string"==typeof(t=t)&&(!!u[t.toLowerCase()]&&t.toLowerCase());if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");s=t}}})}},{}],{})},{}],108:[function(t,e,i){"use strict";var n=t(97),r=t(98),g=t(99),a=t())}function s(n){if(void 0===n.callback)throw new Error("callback argument missing");var r=i))};function o(){var t=void 0,t=c.response||c.responseTXML}(c);if(y)try{t=JSON.parse(t)}catch(t){}return t}var s={body:void 0,headers:{},statusCode:0,method:h,url:d,rawReques)}}var i,u,l,c=n.xhr||null,d=(c=c||new(n.cors||n.useXDR?v.XDomainRequest:v.XMLHttpRequest)).url=n.uri||n.url,h=c.method=n.method||"GET",f=n.body||n.data||null,p=c.headers=n.headers||{},m=!!n.sync,y=!1;if("json"in n&&(y=!0,p.accept||p.Accept||(p.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(p["content-type"]||p["Content-Type"]||(p["Content-Type"]="application/json"),f=JSON.stringify(n.json))),c.onreadystatecht()},c.onload=t,c.onerror=e,c.onprogress=function(){},c.ontimeout=e,c.open(h,d,!m,n.username,n.password),m||(c.withCredentials=!!n.withCredentials),!m&&0<n.timeout&&(l=setTim(t)},n.timeout)),c.setRequestHeader)for(i in p)p.hasOwnProperty(i)&&c.setRequestHeader(i,p[i]);else if(n.headen 1}(n.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(c.responseType=n.responseType),"beforeSend"in n&&"function"==typeof n.beforeSend&&n.beforeSend(c),c.send(f),c}(e.exports=v).XMLHttpRequest=n.XMLHttpRequest||function(){},v.XDomainRequest="withCredentials"in new v.XMLHttpRequest?v.XMLHttpRequest:n.XDomainReqi])}(["get","put","post","patch","head","delee)}})},{109:109,97:97,98:98,99:99}],rty},{}]},{},[93])(93)}),videojs.addLanguage("tr",{Play:"Oynat",Pause:"Duraklat","Current Time":"Süre","Duration Time":"Toplam Süre","Remaining Time":"Kalan Süre","Stream Type":"Yayın Tipi",LIVE:"CANLI",Loaded:"Yüklendi",Progress:"Yükleniyor",Fullscreen:"Tam Ekran","Non-Fullscreen":"Küçük Ekran",Mute:"Ses Kapa",Unmute:"Ses Aç","Playback Rate":"Oynatma Hızı",Subtitles:"Altyazı","subtitles off":"Altyazı Kapalı",Captions:"Ek Açıklamalar","captions off":"Ek Açıklamalar Kapalı",Chapters:"Bölümler","You aborted the media playback":"Video oynatmayı iptal ettiniz","A network error caused the media download to fail part-way.":"Video indirilirken bağlantı sorunu oluştu.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"Video oynatılamadı, ağ ya da sunucu hatası veya belirtilen format desteklenmiyor.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"Tarayıcınız desteklemediği için videoda hata oluştu.","No compatible source was found for this media.":"Video için kaynak bulunamadı.","Play Video":"Videoyu Oynat",Close:"Kapat","Modal Window":"Modal Penceresi","This is a modal window":"Bu bir modal penceresidir","This modal can be closed by pressing the Escape key or activating the close button.":"Bu modal ESC tuşuna basarak ya da kapata tıklanarak kapatılabilir.",", opens captions settings dialog":", ek açıklama ayarları menüsünü açar",", opens subtitles settings dialog":", altyazı ayarları menüsünü açar",", selected":", seçildi"}),function(t,e){"function"==typeof define&&define.amd?define("videojs-contrib-ads",["videojs"],e):"object"==typeof exports?module.exports=e(require("video.js")):t["videojs-contrib-ads"]=e(videojs)}(this,function(t){!function(l,c){"use strict";function o(t){t.ads.cancelPlayTimeout||(t.ads.cancelPlayTimeout=l.setTimeout(function(){t.ads.cancelPla(),t.one("contentplayback",function(){t.paused()&&t.play()})},1))}function s(t){var e,i,n=t.$(".vjs-tech"),r=t.remoteTextTracks?t.remoteTextTracks():[],a=[],t={ended:t.ended(),currentSrc:t.currentSrc(),src:t.src(),currentTime:t.currentTime(),type:t.currentType()};for(n&&(t.nativePoster=n.poster,t.style=n.getAttribute("style")),i=r.length;i--;)e=r[i],a.push({track:e,mode:e.mode}),e.mode="disabled";return t.suppressedTracks=a,t}function u(i,n){function t(){for()(r=s[t]).track.mode=r.mode}function e(){function t(){e=!0}var e=!1;i.currentTime(n.currentTime),n.ended?(i.ads.resumeEndedTimeout=l.setTimeout(function(){e||i.play(),i.off("ended",t),i.ads.resumeEndedTimeout=null},250),i.on("ended",t),i.on("dispose",function(){l.clearTimeout(i.ads.resumeEndedTimeout)})):i.play()}var r,a=i.$(".vjs-tech"),o=20,s=n.suppressedTracks,u=function(){return i.off("contentcanplay",u),i.ads.tryToResumeTimeout_&&(i.clearTimeout(i.ads.tryToResumeTimeout_),i.ads.tryToResumeTimeout_=null),1<(a=i.el().querySelector(".vjs-tech")).readyState||void 0===a.se("Failed to resume the content after an advertisement",t)}}())};n.nativePoster&&(a.poster=n.nativePoster),"style"in n&&a.setAttribute("style",n.style||""),i.src()!==n.src||i.currentSrc()!==n.currentSrc?(i.one("contentloadedmetadata",t),i.src({src:n.currentSrc,type:n.type}),i.load(),i.one("contentcanplay",u),i.ads.tryToResumeTimeout_=i.setTimeout(u,2e3)):i.ended()&&n.ended||(t(),i.play())}function d(t){(t=t.$(".vjs-tech"))&&t.removeAttribute("poster")}var h=c.getComponent("Html5").Events,f={timeout:5e3,prerollTimeout:100,postrollTimeout:100,debug:!1};(t){var r=this,a=c.mergeOptions(f,t);function i(){return!0}function e(t,e){e.isImmediatePropagationStopped=i,e.cancelBubble=!0,e.isPropagationStopped=i,r.trigger({type:t+e.type,state:r.ads.state,originalEvent:e})}function n(){var t;"ad-playback"!==r.ads.state&&(t=r.currentSrc())!==r.ads.contentSrc&&(r.trigger({type:"contentupdate",oldValue:r.ads.contentSrc,newValue:t}),r.ads.contentSrc=t)}t=h.concat(["firstplay","loadedalldata"]),r.on(t,function(t){if("ad-playback"===r.ads.state)e("ad",t);else if("content-playback"===r.ads.state&&"ended"===t.type)e("content",t);else if("content-resuming"===r.ads.state){if(r.ads.snapshot){if(r.currentSrc()!==r.ads.snapshot.currentSrc)return"loadstart"===t.type?void 0:e("content",t);if(r.ads.snapshot.ended)return"pause"===t.type||"ended"===t.type?void r.addClass("vjs-has-started"):e("content",t)}"playing"!==t.tyion(){r.currentSrc()!==r.ads.snapshot.currentSrc&&r.play()}),r.ads={state:"content-set",startLinearAdMode:function(){"ad-plafunction(){"ad-plunction(){"ad-playback"!==r.ads.state&&r.trigger("adskip")}},t=function(t){var e,i,n={"content-set":{events:{adscanceled:function(){this.state="content-playback"},adsready:function(){this.state="ads-ready"},play:function(){this.state="ads-ready?",o(r),d(r)},adserror:function(){this.state="content-playback"},adskip:function()ready":{events:{play:function(){this.state="preroll?",o(r)},adskip:function(){this.state="content-playback"},adserror:function(){this.state="content-playback"}}},"preroll?":{enter:function(){r.addClass("vjs-ad-loading"),r.ads.adTimeoutTimeout=l.setTimeout(function(){r.trigger("adtimeout")},a.prerollTimeout),r.trigger("readyforpreroll")},leave:function(){l.clearTimeout(r.ads.adTimeoutTimeout),r.removeClass("vjs-ad-loading")},events:{play:function(){o(r)},adstart:function(){this.state="ad-playback"},adskip:function(){this.state="content-playback"},adtimeout:function(){this.state="content-playback"},adserror:function(){this.state="content-playback"}}},"ads-ready?":{enter:function(){r.addClass("vjs-ad-loading"),r.ads.adTimeoutTimeout=l.setTimeout(function(){r.trigger("adtimeout")},a.timeout)},leave:function(){l.clearTimeout(r.ads.adTiemoveClass("vjs-ad-loading")},events:{play:function(){o(r)},adscanceled:function(){this.state="content-playback"},adsready:function(){this.state="preroll?"},adskip:function(){this.state="content-playback"},adtimeout:function(){this.state="content-playback"},adserror:function(){this.state="content-playback"}}},"ad-playback":{enter:function(){this.snapshot=s(r),r.addClass("vjs-ad-playing"),d(r),r.ads.cancelPlayTimeout&&(l.clearTimeout(r.ads.cancelPlayTimeout),r.ads.cancelPlayTimeout=null)},leave:function(){r.removeClass("vjs-ad-playing"),u(r,this.snapshot),"adend"!==r.ads.triggerevent&&r.trigger("adend")},events:{adend:function(){this.state="content-resuming"},adserror:function(){this.state="content-resuming"}}},"content-resuming":{enter:function(){this.snapshot.ended&&(l.clearTimeout(r.ads._fireEndedTimeout),r.ads._fireEndedTimeout=l.setTimeout(function(){r.trigger("ended")},1e3))},leave:function(){l.clearTimeout(r.ads._fireEndedTimeout)},events:{contentupdate:function(){this.state="content-set"},contentresumed:function(){this.state="content-playback"},playing:function(){this.state="content-playback"},ended:function(){this.state="content-playback"}}},"postroll?":{enter:function(){this.snapshot=s(r),r.addClass("vjs-ad-loading"),r.ads.adTimeoutTimeout=l.setTimeout(fut(r.ads.adTimeoutTimeout),r.removeClass("vjs-ad-loading")},events:{adstart:function(){this.state="ad-playback"},adskip:function(){this.state="content-resuming",l.setTimeout(function(){r.trigger("ended")},1)},adtimeout:function(){this.state="content-resuming",l.setTimeout(function(){r.trigger("ended")},1)},adserror:function(){this.state="content-resuming",l.setTimeout(function(){r.trigger("ended")},1)}}},"content-playback":{enter:function(){r.ads.cancelPlayTimeout&&(l.clearTimeout(r.ads.cancelPlayTimeout),r.ads.cancelPlayTimeout=null),r.trigger({type:"contentplayback",triggerevent:r.ads.triggerevent})},events:{adsready:function(){r.trigger("readyforpreroll")},adstart:function(){this.state="ad-playback"},contentupdate:function(){r.paused()?this.state="content-set":this.state="ads-ready?"},contentended:function(){this.state="postroll?"}}}};e=r.ads.state,i=function(){},((n[e].events||{})[t.type]||i).apply(r.ads),e!==r.ads.state&&(r.ads.triggerevent=t.type,(n[e].leave||i).apply(r.ads),(n[r.ads.state].enter||i).apply(r.ads),a.debug&&c.log("ads",r.ads.triggerevent+" triggered: "+e+" -> "+r.ads.state))},r.on(h.concat(["adtimeout","contentupdate","contentplaying","contentended","contentresumed","adsready","adserror","adscanceled","adstart","adend","adskip"]),t),r.ads.contentSrc=r.currentSrc(),r.on("loadstart",n),l.setTimeout(n,1),r.paused()||t({type:"play"})})=n.shift());)n.length||void 0===e?r=r[i]||(r[i]={}):r[i]=e}function i(t){var n=Le;function e(){}e.prototype=n.prototype,t.ff=n)}function s(){this.b=new n(2),this.c=new n(5),this.a=0}function f(){}function u(){}function w(t,e,i,n){this.severity=t,this.category=e,this.code=i,this.data=Array.prototype.slice.call(arguments,3),this.handled=!1}a.$e=!0,s.prototype.getBandwidthEstimate=function(t){return this.a<128e3?t:Math.min(o(this.b),o(this.c))},d.console&&d.console.log.bind&&(f=console.warn.){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},w.Severity={RECOVERABLE:1,CRITICAL:2},w.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9},w.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,UNKNOWN_DATA_URI_ENCODING:1005,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,UNPLAYABLE_PERIOD:4011,RESTRICTIONS_CANNOT_BE_MET:4012,NO_PERIODS:4014,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_COULD_NOT_GUESS_MIME_TYPE:4021,HLS_MASTER_PLAYLIST_NOT_PROVIDED:4022,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,HLS_COULD_NOT_PARSE_SEGMENT_START_TIME:4030,INVALID_STREAMS_CHOSEN:5005,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,LOAD_INTERRUPTED:7e3,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,STORE_ALREADY_IN_PROGRESS:9006,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,CONTENT_UNSUPPORTED_BY_BROWSER:9009,UNSUPPORTED_UPGRADE_REQUEST:9010};var l=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/;function h(t){var e;t instanceof h?(p(this,t.da),this.Ba=t.Ba,this.ia=t.ia,c(this,t.La),this.Y=t.Y,m(this,A(t.a)),this.ua=t.ua):t&&(e=String(t).match(l))?(p(this,e[1]||"",!0),this.Ba=y(e[2]||""),this.ia=y(e[3]||"",!0),c(this,e[4]),this.Y=y(e[5]||"",!0),t,e,i){e instanceof k?t.a=e:(i||(e=g(e,E)),t.a=new k(e))}func=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}(t=h.prototype).da="",t.Ba="",t.ia="",t.La=null,t.Y="",t.ua="",t.toString=function(){var t,e=[],i=this.da;return i&&e.push(g(i,b,!0),":"),(i=this.ia)&&(e.push("//"),(t=this.Ba)&&e.push(g(t,b,!0),"@"),e.push(encodeURIComponent(i).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(i=this.La)&&e.push(":",String(i))),(i=this.Y)&&(this.ia&&"/"!=i.charAt(0)&&e.push("/"),e.push(g(i,"/"==i.charAt(0)?T:_,!0))),(i=this.a.toString())&&e.push("?",i),(i=this.ua)&&e.push("#",g(i,S)),e.join("")},t.resolve=function(t){var e=new h(this);"data"===e.da&&(e=new h);var i=!!t.da;i?p(e,t.da):i=!!t.Ba,i?e.Ba=t.Ba:i=!!t.ia,i?e.ia=t.ia:i=null!=t.La;var n=t.Y;if(i)c(e,t.La);else if(i=!!t.Y)if("/"!=n.charAt(0)&&(this.ia&&!this.Y?n="/"+n:-1!=(r=e.Y.lastIndexOf("/"))&&(n=e.Y.substr(0,r+1)+n)),".."==n||"."==n)n="";else if(-1!=n.indexOf("./")||-1!=n.indexOf("/.")){for(var r=!n.lastIndexOf("/",0),n=n.split("/"),a=[],o=0;o<n.length;){var s=n[o++];"."==s?r&&o==n.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&o==n.length&&a.push("")):(a.push(s),r=!0)}n=a.join("/")}return i?e.Y=n:i=""!==t.a.toString(),i?m(e,A(t.a)):i=!!t.ua,i&&(e.ua=t.ua),e};var(function(t,e){i=t,n=e});return t.resolve=i,t.reject=n,t}function C(t,e,i){var n=P();this.j=(null==t.maxAttempts?n:t).maxAttempts,this.f=(null==t.baseDelay?n:t).baseDelay,this.i=(null==t.fuzzFactor?n:t).fuzzFactor,this.h=(null==t.backoffFactor?n:t).backoffFactor,this.a=0,this.b=this.f,this.c=e||!1,this.g=i||null,this.c&&(this.a=1)}function R(t){if(t.a>=t.j){if(!t.c)return Promise.reject();t.a=1,t.b=t.f}var e=new O;return t.a?(function t(e,i,n){{var r;e.g?e.g()||!n?i():(r=Math.min(200,n),x(function(){t(this,i,n-r)}.bind(e),r)):x(i,n)}}(t,e.resolve,t.buzzFactor:.5,timeout:0}}function x(t,e){d.setTimeout(t,e)}function L(t,e,i,n,r){var a,o=r in n;for(a in e){var s=r+"."+a,u=o?n[r]:i[a];(o||a in t)&&(void 0===e[a]?void 0===u||o?delete t[a]:t[a]=u:u.constructor==Object&&e[a]&&e[a].constructor==Object?(t[a]||(t[a]=u),L(t[a],e[a],u,n,s)):typeof e[a]==typeof u&&null!=e[a]&&e[a].constructor==u.constructor&&(t[a]=e[a]))}}function I(t){var a=[];return function t(e){switch(typeof e){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return e;default:if(!e)return e;if(0<=a.indexOf(e))return null;var i=e.constructor==Array;if(e.constructor!=Object&&!i)return null;a.push(e);var n,r=i?[]:{};flength=e.leng){this.f=!1,this.a=[],this.b=[],this.c=[],this.g=t||nullodeURIComponent(n[r])),e.push(a)}return this.b=e.join("&")},e("shaka.net.NetworkingEngine",U),U.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3},U.PluginPriority={af:1,cf:2,Ye:3};var F={};function Bheaders:{},allowCrossSiteCredentials:!1,retryParameters:e}}function H(t,e){for(var i=[],n=0;n<t.length;++n){for(var r=!1,a=0;a<i.length&&!(e(e,1)}function W(){this.a={}}function K(){this.a=new W}function z(t,e,i,n){t.a&}function X(t,e,i,n){z(t,e,i,function(t){this.ga(e,i),n(t)}.bind(t))}function Y(t){if(t.a){var e,i=t.a,n=[];for(e in i.a)n.push,this.type=e,this.a=i,this.target.addEventListener(e,i,!1)}function J(t,e){var i,n=e||{};for(i in n)this[i]=n[i];this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=(d.performance&&d.performance.now?d.performance:Date).now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.a=!1}function Q(t,e){if(!e.length)retureturnew h(t)}).map(function(t){return i.map(t.resolve.bistness:"",serverCertificate:null,initegisterScheme=B,U.unregisterScheme=function(t){delete F[t]},U.prototype.registerRequestFilter=U.prototype.me=function(t){this.b.push(t)},U.prototype.unregisterRequestFilter=U.prototype.Re=function(t){var e=this.b;0<=(t=e.indexOf(t))&&e.splice(t,1)},U.prototype.clearAllRequestFilters=U.prototype.cd=function(){terResponseFilter=U.prototype.ne=function(t){this.c.punction(t){var e=this.c;0<=(t=e.indexOf(t))&&e.splilearAllResponseFilteength;++e)t.push(this.a[e].catch(M));return Promise.all(t)},U.prototype.request=function(i,n,r){var a=r||function(){return!1};if(this.f)return Promise.reject();n.method=n.method||"GET",n.headers=n.headers||{},n.retryParameters=n.retryParameters?I(n.retryParameters):P(),n.uris=I(n.uris);var o=Date.now(),e=Promise.resolve();return this.b.forEach(function(t){e=e.then(t.bind(null,i,n))}),e=(e=e.catch(function(t){throw new w(2,1,1006,t)})).then(function(){var t=Date.now()-o,e=new C(n.retryParameters,!1,r);return R(e).then(function(){return function e(t,n,i,r,a,o,s){if(t.f||s())return Promise.reject();var u=new h(i.uris[a]),l=u.da;l||(l=location.protocol,l=l.slice(0,-1),p(u,l),i.uris[a]=u.toString());l=(l=F[l])?l.ie:null;if(!l)return Promise.reject(new w(2,1,1e3,u));var c=Date.now();return l(i.uris[a],i,n).then(function(e){null==e.timeMs&&(e.timeMs=Date.now()-c);var t=Date.now(),i=Ption(t){i=i.then(function(){return Promise.resolve(t(n,e))}.bind(this))}.bind(this)),(i=i.catch(function(t){var e=2;throw new w(e=t instanceof w?t.severity:e,1,1007,t)})).then(function(){return e.timeMs+=Date.now()-t,e.timeMs+=o,e})}.bind(t)).catch(function(t){if(t&&1==t.severity)return a=(a+1)%i.uris.length,s()?Promise.reject():R(r).then(function(){return e(this,n,i,r,a,o,s)}.bind(this),function(){throw t});throw t}.bind(t))}(this,i,n,e,0,t,a)}.bind(this))}.bind(this)),this.a.push(e),e.then(function(t){return 0<=this.a.indexOf(e)&&this.a.splice(this.a.indexOf(e),1),this.g&&!t.fromCache&&1==i&&this.g(t.timeMs,t.data.byteLength),t}.bind(this)).catch(function(t){return t&&(t.severity=2),0<=this.a.indexOf(e)&&this.a.splice(this.a.ind){this.a.hasOwnPototype.get=functio(i)for(var n=0;n<i.loy=function(){return Y(this),this.a=null,Promise.resolve()},K.prototype.ga=function(t,e){if(this.a)for(var i=this.a.get(e)||[],n=0;n<i.length;++n){var r=i[n];r.target==t&&(r.ga(),this.a.remove(e,r))}},$.prototype.ga=function(){this.target.removeEventListener(this.type,thiult=function(){this.cancelable&&(this,J.prototype.stopImmediatePropagation=function(){this]})}function nt(t,e){return e&&(t+='; codecs="'+e+'"'),t}var rt={codecs:"codecs",frameRate:"framerate",bandwidth:"bitrate",width:"width",height:"height",channelsCount:"channels"};function at(t){if(!t)return"";239==(t=new Uint8Array(t))[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),t=escape(lt(t));try{return decodeURIComponent(t)}catch(t){throw new w(2,2,2004)}}function ot(t,e,i){if(!t)return"";if(!i&&t.byteLength%2)throw new w(2,2,2004);var n=t instanceof ArrayBuffer?t:((i=new Uint8Array(t.byteLength)).set(new Uint8Array(t)),i.buffer);t=Math.floor(t.byteLength/2),i=new Uint16Array(t),n=new DataView(n);for(var r=0;r<t;r++)i[r]=n.getUint16(2*r,e);return lt(i)}function st(t){var e=new Uint8Array(t);if(239==e[0]&&187==e[1]&&191==e[2])return at(e);if(254==e[0]&&255==e[1])return ot(e.subarray(2),!1);if(255==e[0]&&254==e[1])return ot(e.subarray(2),!0);var i=function(t,e){return t.byteLength<=e||32<=t[e]&&t[e]<=126}.bind(null,e);if(!e[0]&&!e[2])return ot(t,!1);if(!e[1]&&!e[3])return ot(t,!0);ihis.a=null,this.b=function(){this.a=null,t()}.bind(this)}function dt(t,e){t.cancel(),t.a=setTimeout(t.b,1e3*e)}function ht(t,e){t.cancel();var i=function(){this.b(),this.a=setTimeout(i,1e3*e)}.bind(t);t.a=setTimeout(i,1e3*e)}function ft(t,e){e=null==e||e,t=d.btoa(String.fromCharCode.apply(null,t)).replace(/(var i=0;i<t.length;++i)if(t[i]!=e[i])return!1;return!0}function vt(t){for(var e=0,i=0;i<arguments.length;++i)e+=arguments[i].length;for(var e=new Uint8Array(e),n=0,i=0;i<arguments.length;++i)e.set(arguments[i],n),n+=arguments[i].length;return e}function bt(e){this.s=e,this.l=this.j=this.u=null,this.K=!1,this.b=null,this.is.h=null,this.g=function(t){this.i.reject(t),e.onError(t)}.bind(this),this.A={},this.F=new ct(this.le.bind(this)),this.ha=this.c=!1,this.J=[],this.W=!1,this.w=new ct((this,t)}.bind(t)),e.length||t.m.length||t.i.resolve(),t.i}function Tt(e,t){try{var i=e.j.createSession("persistent-license")}catch(t){var n=new w(2,6,6005,t.message);return e.g(n),Promise.reject(n)}z(e.f,i,"message",e.Dc.bind(e)),z(e.f,i,"keystatuseschange",e.xc.bind(e));var r={initData:null,ea:i,loaded:!1,Ob:1/0,ma:null};return e.a.push(r),i.load(t).then(function(t){if(!this.c){if(t)return r.loaded=!0,this.a.every(function(t){return t.loaded})&&this.i.resolve(),i;this.a.splice(this.a.indexOf(r),1),this.g(new w(2,6,6013))}}.bind(e),function(t){this.c||(this.a.splice(this.a.indexOf(r),1),this.g(new w(2,6,6005,t.message)))}.bind(e))}function wt(e,t,i){try{var n=e.ha?e.j.createSession("persistent-license"):e.j.createSession()}catch(t){return void e.g(new w(2,6,6005,t.message))}z(e.f,n,"message",e.Dc.bind(e)),z(e.f,n,"keystatuseschange",e.xc.bind(e)),e.a.push({initData:i,ea:n,loaded:!1,Ob:1/0,ma:null}),n.generateRequest(t,i.buffer).catch(function(t){if(!this.c){for(var e=0;e<this.a.length;++e)if(this.a[e].ea==n){this.a.splice(e,1);break}this.g(new w(2,6,6006,t.message))}}.bind(e))}function Et(t,e){for(var i,n=e.target,r=0;r<t.a.length;r++)if(t.a[r].ea==n){i=t.a[r];break}(r=G([t.b.licenseServerUri],t.h.retryParameters)).body=e.message,r.method="POST","com.microsoft.playready"!=t.b.keySystem&&"com.chromecast.playready"!=t.b.keySystem||function(t){if(-1==(e=ot(t.body,!0,!0)).indexOf("PlayReadyKeyMessage"))t.headers["Content-Type"]="text/xml; charset=utf-8";else{for(var e,i=(e=(new DOMParser).parseFromString(e,"application/xml")).getElementsByTagName("HttpHeader"),n=0;n<i.length;++n)t.headers[i[n].querySelector("name").textContent]=i[n].querySelector("value").textContent;t.body=pt(e.querySelector("Challenge").textContent).buffer}}(r),t.s.Wa.request(2,r).then(function(t){return this.c?Promise.reject():n.update(t.data).then(function(){this.s.onEvent(new J("drmsessionupdate")),i&&(i.ma&&i.ma.resolve(),setTimeout(function(){i.loaded=!0,this.a.every(function(t){return t.loaded})&&this.i.resolve()}.bind(this),5e3))}.bind(this))}.bind(t),function(t){if(this.c)return Promise.resolve();t=new w(2,6,6007,t),this.g(t),i&&i.ma&&i.ma.reject(t)}.bind(t)).catch(function(t){if(this.c)return Promise.resolve();t=new w(2,6,6008,t.message),this.g(t),i&&i.ma&&i.ma.reject(t)}.bind(t))}function St(t,e){if(!t.length)return e;if(!e.length)return t;for(var i=[],n=0;n<t.length;n++)for(var r=0;r<e.length;r++)if(t[n].keySystem==e[r].keySystem){var a=t[n],r=e[r],o=(o=(o=[]).concat(a.initData||[])).concat(r.initData||[]),s=(s=(s=[]).concat(a.keyIds)).concat(r.keyIds);i.push({keySystem:a.keySystem,licenseServerUri:a.licenseServerUri||r.licenseServerUri,distinctiveIdentifierRequired:a.distinctiveIdentifierRequired||r.distinctiveIdentifierRequired,persistentStateRequired:a.persistentStateRequired||r.persistentStateRequired,videoRobustness:a.videoRobustness||r.videoRobustness,audioRobustness:a.audioRobustness||r.audioRobustness,serverCertificate:a.serverCertificate||r.serverCertificate,initData:o,keyIds:s});break}return i}function kt(t){return t&&!(1==t.length&&t.end(0)-t.start(0)<1e-6)&&t.length?t.end(t.length-1):null}function At(t,e){return!(!t||!t.length||1==t.length&&t.end(0)-t.start(0)<1e-6)&&(e>=t.start(0)&&e<=t.end(t.length-1))}function Ot(t,e){if(!t||!t.length||1==t.length&&t.end(0)-t.start(0)<1e-6)return 0;for(var i=0,n=t.length-1;0<=n&ength;i++)e.push({start:t.start(i),end:t.end(i)});return e}function Rt(){this.a=new muxjs.mp4.Transmuxer,this.b=null,this.c=[],this.f=!1,this.a.on("data",this.h.bind(this)),this.a.on("done",this.g.bind(this))}function Pt(t,e){var i=e.replace("mp2t","mp4");"audio"==t&&(i=i.replace("video","audio"));var n=/avc1\.(66|77|100)\.(\d+)/.exec(i);return n&&(e="avc1.",e=("66"==(t=n[1])?e+"4200":"77"==t?e+"4d00":e+"6400")+((t=Number(n[2]))>>4).toString(16),e+=(15&t).toString(16),i=i.replace(n[0],e)),i}function xt(t){this.c=null,this.f=t,this.h=this.i=0,this.g=1/0,this.b=this.a=null}e("shaka.util.StringUtils.fromUTF8",at),e("shaka.util.StringUtils.fromUTF16",ot),e("shaka.util.StringUtils.fromBytesAutoDetect",stunction(){null!=this.a&&(clearTimeout(this.a),this.a=null)},e("shaka.util.Uint8ArrayUtils.toBase64",ft),e("shaka.util.Uint8ArrayUtils.fromBase64",pt),e("shaka.util.Uint8ArrayUtils.fromHex",mt),e("shaka.util.Uint8ArrayUtils.toHex",yt),e("shaka.util.Uint8ArrayUtils.equal",gt),e("shaka.util.Uint8ArrayUtils.concat",vt),(t=bt.prototype).destroy=function(){this.c=!0;var i=[];return this.a.fo).catch(M);var e=new Promise(function(t){setTimeout(t,1e3)});i.push(Promise.race([t,e]))}),this.i.reject(),this.f&&i.push(this.f.destroy()),this.l&&i.push(this.l.setMediaKeys(null).catch(M)),this.w&&(this.w.cancel(),this.w=null),this.F&&(this.F.cancel(),this.F=null),this.f=this.l=this.j=this.u=this.b=null,this.a=[],thisis.h=null,Promise.all(i)},t.configure=function(t){this.h=t},t.init=function(t,e){var i,n,r,a,o,s,u={},l=[];return this.ha=e,this.m=t.offlineSessionIds,i=this,n=t,r=e||0<t.offlineSessionIds.length,a=u,o=l,s=function(t){if(et(t.h.clearKeys))return null;var e,i=[],n=[];for(e in t.h.clearKeys){var r=t.h.clearKeys[e],a=mt(e),r=mt(r),a={kty:"oct",kid:ft(a,!1),k:ft(r,!1)};i.push(a),n.push(a.kid)}return t=JSON.stringify({keys:i}),n=JSON.stringify({kids:n}),n=[{initData:new Uint8Array(ut(n)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+d.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,initData:n,keyIds:[]}}(i),n.periods.forEach(function(t){t.variants.forEach(function(n){s&&(n.drmInfos=[s]),n.drmInfos.forEach(function(e){!function(t,e){var i=e.keySystem;{var n;i&&(e.licenseServerUri||(n=t.h.servers[i])&&(e.licenseServerUri=n),e.keyIds||(e.keyIds=[]),(i=t.h.advanced[i])&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=i.persistentStateRequired),e.videoRobustness||(e.videoRobustness=i.videoRobustness),e.audioRobustness||(e.audioRobustness=i.audioRobustness),e.serverCertificate||(e.serverCertificate=i.serverCertificate)))}}(this,e),d.cast&&d.cast.__platform__&&"com.microsoft.playready"==e.keySystem&&(e.keySystem="com.chromecast.playready");var i=a[e.keySystem];i||(i={audioCapabilities:[],videoCapabilities:[],distinctiveIdentifier:"optional",persistentState:r?"required":"optional",sessionTypes:[r?"persistent-license":"temporary"],label:e.keySystem,drmInfos:[]},a[e.keySystem]=i,o.push(e.keySystem)),i.drmInfos.push(e),e.distinctiveIdentifierRequired&&(i.distinctiveIdentifier="required"),e.persistentStateRequired&&(i.persistentState="required");var t=[];n.video&&t.push(n.video),n.audio&&t.push(n.audio),t.forEach(function(t){("video"==t.type?i.videoCapabilities:i.audioCapabilities).push({robustness:("video"==t.type?e.videoRobustness:e.audioRobustness)||"",contentType:nt(t.mimeType,t.codecs)})}.bind(this))}.bind(this))}.bind(this))}.bind(i)),l.length?function(t,u,e){if(1==e.length&&""==e[0])return Promise.ruestMediaKeySystemAcce=n.catch(function(){return Promise.reject(new w(2,6,6001))})).then(function(t){if(this.c)return Promise.reject();var e,i,n,r,a,o=0<=navigator.userAgent.indexOf("Edge/"),s=t.getConfiguration();return this.u=(s.audioCapabilities||[]).concat(s.videoCapabilities||[]).map(function(t){return t.contentType}),o&&(this.u=null),o=u[t.keySystem],e=this,i=t.keySystem,function(t,i,n,r,a){function o(t,e){return!(!t.keyId||t.keyId!=e.keyId)||t.initDalength;++e)-1==a.indexOf(t.keyIds[e])&&a.push(t.keyIds[e])})}((n=o).drmInfos,r=[],a=[],s=[],o=[]),e.b={keySystem:i,licenseServerUri:r[0],distinctiveIdentifierRequired:"required"==n.distinctiveIdentifier,persistentStateRequired:"required"==n.persistentState,audioRobustness:n.audioCapabilities?n.audioCapabilities[0].robustness:"",videoRobustness:n.videoCapabilities?n.videoCapabilities[0].robustness:"",serverCertificate:a[0],initData:s,keyIds:o},this.b.licenseServerUri?t.creaton(t){if(this.c)return Promise.reject();this.j=t,this.K=!0}.bind(t)).catch(function(t){return this.c?Promise.resolve():(this.u=this.b=null,t instanceof w?Promise.reject(t):Promise.reject(new w(2,6,6002,t.message)))}.bind(t)),i.rejec},t.keySystem=function(){return this.b?this.b.keySystem:""},t.ob=function(){var t=this.a.map(function(t){return t=t.ea.expi(gt(eilPlayed&&this.l.paused&&!this.W?this.J.push(t):Et(this,t)},t.xc=function(t){var o,s,e;for(t=t.target,o=0;o<this.a.length&&this.a[o].ea!=t;++o);o!=this.a.length&&(s=!1,t.keyStatuses.forEach(function(t,e){var i,n,r,a;"string"==typeof e&&(i=e,e=t,t=i),"com.microsoft.playready"==this.b.keySystem&&16==e.byteLength&&(n=(i=new DataView(e)).getUint32(0,!0),r=i.getUint16(4,!0),a=i.getUint16(6,!0),i.setUint32(0,n,!1),i.setUint16(4,r,!1),i.setUint16(6,a,!1)),"status-pending"!=(t="com.microsoft.playready"==this.b.keySystem&&"statusis.a[o].loaded=!0,this.a.every(function(t){return t.loaded})&&this.i.resolve()),"expired"==t&&(s=!0),i=yt(new Uint8Array(e)),this.A[i]=t}.bind(this)),((e=t.expiration-Date.now())<0||s&&e<1e3)&&!this.a[o].ma&&(this.a.splice(o,1),t.close()),dt(th;!et(this.A)&&(e=thisred"==e},Object.keys(e).every(function(t){return i(t,e[t])}))&&this.g(new w(2,6,6014)),this.s.Pb(this.A)},t.Pd=function(){for(var t=0;t<this.J.length;t++)Et(this,this.J[t]);this.W=!0,this.J=[]},t.je=function(){this.a.forEach(function(t){var e=t.Ob,i=t.ea.expiration;(i=isNaN(i)?1/0:i)!=e&&(this.s.onExpirationUpdated(ton(){return this.a.dispose(),this.a=null,Promise.resolve()},Rt.prototype.h=function(t){var e=new Uint8Array(t.data.byteLength+t.initSegment.byteLength);e.set(t.initSegment,0),e.set(t.data,t.initSegment.byteLength),this.c.push(e)},Rt.prototype.g=function(){var t=vt.apply(null,this.c);this.b.resolve(t)};var Lt={};function It(t,e,i){this.g=t,this.f=e,this.l=i,this.b={},this.a=null,this.c={},this.i=new K,this.j=!1,this.h={}}function Dt(t,e){t.a||(t.a=new xt(t.l)),t.a.c=new Lt[e]}function Mt(t,e){var i="text"==e?t.a.a:!(i=jt(t,e))||1==i.length&&i.end(0)-i.start(0)<1e-6?null:1=n jt(t,e){try{return t.b[e].buffered}catch(t){return null}}function Nt(t,e,i,n,r){return"text"==e?(a=t.a,o=i,s=n,u=r,Promise.resolve().then(function(){var t;this.c&&this.f&&(null==s||null==u?this.c.parseInit(new Uint8Array(o)):(t={periodStart:this.i,segmentStart:s,sefunction(t){return t.startTime>=this.h&&t.startTime<this.g}.bind(this)),this.f.append(t),null==this.a&&(this.a=Math.max(s,this.h)),this.b=Math.min(u,this.g)))}.bind(a))):t.h[e]?(r=t.h[e],a=i,n=n,r.b=new O,r.c=[],null==n||r.f||(r.a.setBaseMediaDecodeTime(9e4*n),r.f=!0),a=new Uint8Array(a),r.a.push(a),r.a.flush(),r.b.then(function(t){return Ut(this,e,this.Sc.bind(this,e,t.buffer))}.bind(t))):Ut(t,e,t.Sc.bind(t,e,i));var a,o,s,u}function Ut(e,i,n){if(e.j)return Promise.reject();if(n={start:n,p:new O},e.c[i].push(n),1==e.c[i].length)try{n.start()}catch(t){"QuotaExceededError"==t.name?n.p.reject(new w(2,3,3017,i)):n.p.reject(new w(2,3,3015,t)),Bt(e,i)}return n.p}function Ft(t,i){if(t.j)return Promise.reject();var e,n=[];for(e in t.b){var r=new O,a={start:function(t){t.resolve()}.bind(null,r),p:r};t.c[e].push(a),n.pusnew w(2,3,3015,t))}for(var t in this.b)Bt(this,t);ret{n.start()}catch(t){n.p.reject(new w(2,3,3015,t)),Bt(e,i)}}function Gt(t,e,i){return i==e||Ht<=t&&i==e.split("-")[0]||Vt<=t&&i.split("-")[0]==e.split("-")[0]}e("shaka.text.TextEngine.registerParser",function(t,e){Lt[t]=e}),e("shaka.text.TextEngine.unregisterParser",function(t){delete Lt[t]}),xt.prototype.destroy=function(){return this.f=this.c=null,Promise.resolve()},xt.prototype.setDisplayer=xt.prototype.Ae=function(t){this.f=t},xt.prototype.Gb=function(t){try{return this.c.parseMedia(new Uint8Array(t),{periodStart:0,segmentStart:0,segmentEnd:0})[0].starts.b?this.a=e:t>this.a&&e>=this.b&&(this.b=t))}.bind(this))},(t=It.prototype).destroy=function(){this.j=!0;var t,e=[];for(t in this.c){var i=this.c[t],n=i[0];for(this.c[t]=i.slice(0,1),n&&e.push(n.p.catch(M)),n=1;n<i.length;++n)i[n].p.catch(M),i[n].p.reject()}for(t in this.a&&e.push(this.a.destroy()),this.h)e.push(this.h[t].destroy());return Promise.all(e).then(function(){this.i.destroy(),this.l=this.a=this.f=this.g=this.i=null,this.b={},this.h={},this.c={}}.bind(this))},t.init=function(t){for(var e in t){var i=nt((i=t[e]).mimeType,i.codecs);"text"==e?Dt(this,i):(!MediaSource.isTypeSupported(i)&&d.muxjs&&"mp2t"==i.split(";")[0].split("/")[1]&&MediaSource.isTypeSupported(Pt(e,i))&&(this.h[e]=new Rt,i=Pt(e,i)),i=this.f.addSourceBuffer(i),z(this.i,i,"error",this.Me.bind(this,e)),z(this.i,i,"updateend",this.Ja.bind(this,e)),this.b[e]=i,this.c[e]=[])}},t.Cb=function(){var t=this.a&&null!=this.a.a?[{start:this.a.a,end:this.a.b}]:[];return{total:Ct(this.g.buffered),audio:Ct(jt(==t?this.a.rem{t?th){return Ft(this,function(){this.f.duration=t}.bind(this))},t.T=function(){return this.f.dt.Tc=appena(t)},t.Ceappenp.rejnction(t){var ).split("-");var e=Wt[t[0]];return e&&(t[0]=e),t.join("-")}var Wt={aar:"aa",abk:"ab",afr:"af",aka:"ak",alb:"sq",amh:"am",ara:"ar",arg:"an",arm:"hy",asm:"as",ava:"av",ave:"ae",aym:"ay",aze:"az",bak:"ba",bam:"bm",baq:"eu",bel:"be",ben:"bn",bih:"bh",bis:"bi",bod:"bo",bos:"bs",bre:"br",bul:"bg",bur:"my",cat:"ca",ces:"cs",cha:"ch",che:"ce",chi:"zh",chu:"cu",chv:"cv",cor:"kw",cos:"co",cre:"cr",cym:"cy",cze:"cs",dan:"da",deu:"de",div:"dv",dut:"nl",dzo:"dz",ell:"el",eng:"en",epo:"eo",est:"et",eus:"eu",ewe:"ee",fao:"fo",fas:"fa",fij:"fj",fin:"fi",fra:"fr",fre:"fr",fry:"fy",ful:"ff",geo:"ka",ger:"de",gla:"gd",gle:"ga",glg:"gl",glv:"gv",gre:"el",grn:"gn",guj:"gu",hat:"ht",hau:"ha",heb:"he",her:"hz",hin:"hi",hmo:"ho",hrv:"hr",hun:"hu",hye:"hy",ibo:"ig",ice:"is",ido:"io",iii:"ii",iku:"iu",ile:"ie",ina:"ia",ind:"id",ipk:"ik",isl:"is",ita:"it",jav:"jv",jpn:"ja",kal:"kl",kan:"kn",kas:"ks",kat:"ka",kau:"kr",kaz:"kk",khm:"km",kik:"ki",kin:"rw",kir:"ky",kom:"kv",kon:"kg",kor:"ko",kua:"kj",kur:"ku",lao:"lo",lat:"la",lav:"lv",lim:"li",lin:"ln",lit:"lt",ltz:"lb",lub:"lu",lug:"lg",mac:"mk",mah:"mh",mal:"ml",mao:"mi",mar:"mr",may:"ms",mkd:"mk",mlg:"mg",mlt:"mt",mon:"mn",mri:"mi",msa:"ms",mya:"my",nau:"na",nav:"nv",nbl:"nr",nde:"nd",ndo:"ng",nep:"ne",nld:"nl",nno:"nn",nob:"nb",nor:"no",nya:"ny",oci:"oc",oji:"oj",ori:"or",orm:"om",oss:"os",pan:"pa",per:"fa",pli:"pi",pol:"pl",por:"pt",pus:"ps",que:"qu",roh:"rm",ron:"ro",rum:"ro",run:"rn",rus:"ru",sag:"sg",san:"sa",sin:"si",slk:"sk",slo:"sk",slv:"sl",sme:"se",smo:"sm",sna:"sn",snd:"sd",som:"so",sot:"st",spa:"es",sqi:"sq",srd:"sc",srp:"sr",ssw:"ss",sun:"su",swa:"sw",swe:"sv",tah:"ty",tam:"ta",tat:"tt",tel:"te",tgk:"tg",tgl:"tl",tha:"th",tib:"bo",tir:"ti",ton:"to",tsn:"tn",tso:"ts",tuk:"tk",tur:"tr",twi:"tw",uig:"ug",ukr:"uk",urd:"ur",uzb:"uz",ven:"ve",vie:"vi",vol:"vo",wel:"cy",wln:"wa",wol:"wo",xho:"xh",yid:"yi",yor:"yo",zha:"za",zho:"zh",zul:"zu"};function Kt(t,e,i){var n=t.video;return!(n&&(n.width<e.minWidth||n.width>e.maxWidth||n.width>i.width||n.height<e.minHeight||n.height>e.maxHeight||n.height>i.height||n.width*n.height<e.minPixels||n.width*n.height>e.maxPixels)||t.bandwidth<e.minBandwidth||t.bandwidth>e.maxBandwidth)}function zt(t,i,n){var r=!1;return t.variants.forEach(function(t){var e=t.allowedByApplication;t.allowedByApplication=Kt(t,i,n),e!=t.allowedByApplication&&(r=!0)}),r}function Xt(n,r,a,t){t.variants=t.variants.filter(function(t){return!(n&&n.K&&(e=t,i=n.keySystem(),e.drmInfos.length&&!e.drmInfos.some(function(t){return t.keySystem==i})))&&(Yt(t.audio,n,r)&&Yt(t.video,n,a));var e,i}),t.textStreams=t.textStreams.filter(function(t){return!!Lt[nt(t.mimeType,t.codecs)]})}function Yt(t,e,i){if(!t)return!0;var n=null;e&&e.K&&(n=e.u),e=nt(t.mimeType,t.codecs);var r,a=nt(t.mimeType,t.codecs),o=t.mimeType;for(r in rt){var s=t[r],u=rt[r];s&&(o+="; "+u+'="'+s+'"')}return!(!(Lt[a]||MediaSource.isTypeSupported(o)||d.muxjs&&"mp2t"==a.split(";")[0].split("/")[1]&&MediaSource.isTypeSupported(Pt(t.type,a)))||n&&t.encrypted&&n.indexOf(e)<0||i&&(t.mimeType!=i.mimeType||t.codecs.split(".")[0]!=i.codecs.split(".")[0]))}function $t(t){var e=t.audio,i=t.video,n=e?e.codecs:null,r=i?i.codecs:null,a=[];r&&a.push(r),n&&a.push(n);var o=[];i&&o.push(i.mimeType),e&&o.push(e.mimeType);var o=o[0]||null,s=[];e&&s.push(e.kind),i&&s.push(i.kind);var s=s[0]||null,u=[];return e&&u.push.apply(u,e.roles),i&&u.push.apply(u,i.roles),u=H(u),t={id:t.id,active:!1,type:"variant",bandwidth:t.bandwidth,language:t.language,label:null,kind:s,width:null,height:null,frameRate:null,mimeType:o,codecs:a.join(", "),audioCodec:n,videoCodec:r,primary:t.primary,roles:u,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null},i&&(t.videoId=i.id,t.width=i.width||null,t.height=i.height||null,t.frameRate=i.frameRate||null,t.videoBandwidth=i.bandwidth||null),e&&(t.audioId=e.id,t.channelsCount=e.channelsCount,t.audioBandwidth=e.bandwidth||null,t.label=e.label),t}function Jt(t){return{id:t.id,active:!1,type:"text",bandwidth:0,language:t.language,label:t.label,kind:t.kind||null,width:null,height:null,frameRate:null,mimeType:t.mimeType,codecs:t.codecs||null,audioCodec:null,videoCodec:null,primary:t.primary,roles:t.roles,videoId:null,audioId:null,channelsCount:null,audioBandwidth:null,videoBandwidth:null}}function Qt(t){var e=[],i=re(t.variants);return t=t.ion(t){e.push($t(t))}),t.forEach(function(t){e.push(Jt(t))}),e}function Zt(t,i,n){return re(t.variants).map(function(t){var e=$t(t);return t.video&&t.audio?e.active=n==t.video.id&&i==t.audio.id:t.video?e.active=n==t.video.id:t.audio&&(e.active=i==t.audio.id),e})}function te(t,i){return t.textStreams.map(function(t){var e=Jt(t);return e.active=i==t.id,e})}function ee(t,e){for(var i=0;i<t.variants.length;i++)if(t.variants[i].id==e.id)return t.variants[i];return null}function ie(t,e){for(var i=0;i<t.textStreams.length;i++)if(t.&&t.allowedByKeySystem}function re(t){return t.filter(ne)}function ae(t,e,i,r){var a,o=re(t.variants),n=(s=!(s=o.filter(function(t){return t.primary})).length?o:s).length?s[0].language:"",s=s.filter(function(t){return t.language==n});return e&&(a=qt(e),[Vt,Ht,0].forEach(function(i){var n=!1;o.forEach(function(t){a=qt(a);var e=qt(t.language);Gt(i,a,e)&&(n?s.push(t):(s=[t],nt.audio?t.audio.roles:[]).concat(t.video?t.video.roles:[])}).reduce(D,[])).length?se(s,t[0]):s}function oe(t,e,i,r){var a,o=t.textStreams,n=(s=!(s=o.filter(function(t){return t.primary})).length?o:s).length?s[0].language:"",s=s.filter(function(t){return t.language==n});return e&&(a=qt(e),[Vt,Ht,0].forEach(function(i){var n=!1;o.forEach(function(t){var e=qt(t.language);Gt(i,a,e)&&(n?s.push(t):(s=[t],n=!0),r&&(r.text=!0))})})),i&&(t=ue(s,i)).length?t:(t=s.map(function(t){return t.roles}).reduce(D,[])).length?ue(s,t[0]):s}function se(t,e){return t.filter(function(t){return t.audio&&0<=t.audio.roles.indexOf(e)||t.video&&0<=)++)if(i[n].audio==t&&i[n].video==e)return i[n];return null}function ce(t,e){for(var i=t.periods.length-1;0<i;--i)if(e+tt>=t.periods[i].startTime)return i;return 0}function de(t,e){for(var i=0;i<t.periods.length;++i){var n=t.periods[i];if("text"==e.type){for(var r=0;r<n.textStreams.length;++r)if(n.textStreams[r]==e)return i}else for(r=0;r<n.variants.length;++r){var a=n.variants[r];if(a.audio==e||a.video==e||a.video&&a.video.trickModeVideo==e)return i}}return-1}function he(){this.h=null,this.c=!1,this.b=new s,this.g=[],this.i=!1,this.a=this.f=null}e("shaka.abr.SimpleAbrManager",he),he.prototype.stop=function(){this.h=null,this.c=!1,this.g=[],this.f=null},he.prototype.init=function(t){this.h=t},he.prototype.chooseVarig.filter(function(t){return Kt(t,e,{width:1/0,height:1/0})}).sort(function(t,e){return t.bandwidth-e.bandwidth})),i=this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate);if(this.g.length&&!t.length)throw new w(2,4,4012);for(var n=t[0]||null,r=0;r<t.length;++r){var a=t[r],o=(t[r+1]||{bandwidth:1/0}).bandwidth/this.a.bandwidthUpgradeTarget;i>=a.bandwidth/this.a.bandwidthDowngradeTarget&&i<=o&&(n=a)}return this.f=Date.now(),n},he.prototype.enable=function(){this.c=!0},he.prototype.disable=function(){this.c=!1},he.prototype.segmentDownloaded=function(t,e){var i,n=this.b;if(e<16e3||(i=8e3*e/t,t=t/1e3,n.a+=e,r(n.b,t,i),r(n.c,t,i)),null!=this.f&&this.c)t:{if(this.i){if(Date.now()-this.f<1e3*this.a.switchInterval)break t}else{if(!(128e3<=this.b.a))break t;this.i=!0}n=this.chooseVariant(),this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate),this.h(n)}},he.prototype.getBandwidthEstimate=function(){return this.b.getBandwidthEstimate(this.a.defaultBandwidthEstimate)},he.prototype.setVariants=function(t){this.g=t},he.prototype.configure=function(t){this.a=t};var fe="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),pe="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),me=["loop","playbackRate"],ye=["pause","play"],ge="adaptation buffering emsg error loading streaming texttrackvisibility timelineregionadded timelineregionenter timelineregionexit trackschanged unloading".split(" "),ve={drmInfo:20,getAudioLanguages:2,getAudioLanguagesAndRoles:2,getBufferedInfo:2,getConfiguration:2,getExpiration:2,getManifestUri:2,getPlaybackRate:2,getTextLanguages:2,getTextLanguagesAndRoles:2,getTextTracks:2,getStats:5,getVariantTracks:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1},be={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},_e=[["getConfiguration","configure"]],Te=[["isTextTrackVisible","setTextTrackVisibility"]],we="addTextTrack cancelTrickPlay configure resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack setTextTrackVisibility trickPlay".split(" "),Ee=["load","unload"];function Se(t){return JSON.stringify(t,function(t,e){if("function"!=typeof e){if(e instanceof Event||e instanceof J){var i,n={};for(i in e){var r=e[i];r&&"object"==typeof r?"detail"==i&&(n[i]=r):i in Event||(n[i]=r)}return n}if(e instanceof TimeRanges)for(n={__type__:"TimeRanges",length:e.length,start:[],end:[]},i=0;i<e.length;++i)n.start.push(e.start(i)),n.end.push(e.end(i));else n="number"==typeof e?isNaN(e)?"NaN":isFinite(e)?e:e<0?"-Infinity":"Infinity":e;return n}})}function ke(t){return JSON.parse(t,function(t,e){return"NaN"==e?NaN:"-Infinity"==e?-1/0:"Infinity"==e?1/0:e&&"object"==typeof e&&"TimeRanges"==e.__type__?{length:(i=e).length,start:function(t){return i.start[t]},end:function(t){return i.end[t]}}:e;var i})}function Ae(t,e,i,n,r,a){this.J=t,this.g=e,this.K=i,this.j=!1,this.A=n,this.F=r,this.u=a,this.b=this.h=!1,this.w="",this.i=null,this.l=this.vc.bind(this),this.m=this.Ld.bind(this),this.a={video:{},t.c){var i=t.c[e];delete t.c[e],i.reject(new w(1,7,7e3))}}function xe(t){t=Se(t),Ce.sent,function(){},u)}function Le(){this.xb=new W,this.eb=this}function Ie(t,e,i){Le.call(this),this.c=t,this.b=e,this.i=this.g=this.f=this.j=this.h=null,this.a=new Ae(i,this.He.bind(this),this.Ie.bind(this),this.Je.bind(this),this.Ke.bind(this),this.mc.bind(this)),function(t){for(var e in t.a.init(),t.i=new K,fe.forEach(function(t).forEach(function(t){z(this.i,this.b,t,this.he.bind(this))}.bind(t)),t.h={},t.c)Object.defineProperty(t.h,e,{configurable:!1,enumerable:!0,get:t.Ve.bind(t,e),set:t.Xe.bind(t,e)});for(e in t.j={},t.b)Object.defineProperty(t.j,e,{configurable:!1,enumerable:!0,get:t.ge.bind(t,e)});t.f=new Le,t.f.eb=t.h,t.g=new Le,t.g.eb=t.j}(this)}function De(t,e,i,n){Le.call(this),this.a=t,this.b=e,this.m={video:t,player:e},this.s=i||function(){},this.u=n||function(t){return t},this.l=!1,this.f=!0,this.g=0,this.j=!1,this.i=this.h=this.c=null,i=this,(n=cast.receiver.CastReceiverManager.getInstance()).onSenderConnected=i.Cc.bind(i),n.onSenderDisconnected=i.Cc.bind(i),n.onSystemVolumeChanged=i.gd.bind(i),i.h=n.getCastMessageBus("urn:x-cast:com.google.cast.media"),i.h.onMessage=i.Gd.bind(i),i.c=n.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),i.c.onMessage=i.Ud.bind(i),n.start(),fe.forEach(function(t){this.a.addEvent(t){this.b.addEventListener(t,this.Gc.bind(this,"player"))}.bind(i)),cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?i.b.Yb(3840,2160):i.b.Yb(1920,1080),i.a.addEventListener("loadeddata",function(){this.j=!0}.bind(i)),i.b.addEventListener("loading",function(){this.f=!1,Me(this)}.bind(i)),i.a.addEventListener("playing",function(){this.f=!1,Me(this)}.bind(i)),i.a.addEventListener("pause",funaddEventListener("unloading",function(his.a&&this.a.ended&&(this.f=!0,Me(this))}.bind(this),5e3)}.bind(i))}function Me(t){Promise.resolve().then(function(){this.dis.l&&(t=Se(e),n?i.getCastChannel(n).send(t):i.broadcast(t))}function Ne(t,e,i){var n=t.a.playbackRate,r=Ue,n={mediaSessionId:0,playbackRate:n,playerState:r=t.f?r.IDLE:t.b.rc()?r.Uc:t.a.paused?r.Wc:r.Xc,currentTime:t.a.currentTime,supportedMediaCommands:15,volume:{level:t.a.volume,muted:t.a.muted}};i&&(n.media=i),je(t,{requestId:e,type:"MEDIA_STATUS",status:[n]},t.h)}(t=Ae.prototype).destroy=function(){return Pe(this),Ce&&Re(this),this.F=this.A=this.g=null,this.b=this.h=!1,this.m=this.l=this.f=this.c=this.a=this.i=null,Promise.resolve()},t.X=function(){return this.b},t.Ub=function(){return this.w},t.init=function(){var t;d.chrome&&chrome.cast&&chrome.cast.isAvailable?(delete d.__onGCastApiAvailable,this.h=!0,this.g(),t=new chrome.cast.SessionRequest(this.J),t=new chrome.cast.ApiConfig(t,this.wc.bind(this),this.Rd.bind(this),"origin_scoped"),chrome.cast.initialize(t,function(){},function(){}),Oe&&setTimeout(this.g.bind(this),20),(t=Ce)&&Ce.status!=chrome.cast.Sessione=null):d.__onGCastApiAvailable=function(t){t&&this.init()}.bind(this)},t.Xb=function(t){this.i=t,this.b&&xe({type:"appData",appData:this.i})},t.cast=function(t){return this.h?Oe?this.b?Promise.reject(new w(1,8,8002)):(this.f=new O,chrome.cast.requestSession(this.Rb.bind(this,t),this.uc.bind(this)),this.f):Promise.rCe&&(Re(this),Ce.stop(function(){},function(){}),Ce=null))},t.get=function(t,e){if("video"==t){if(0<=ye.indexOf(e))return this.Ic.bind(this,t,e)}else if("player"==t){if(be[e]&&!this.get("player","isLive")())return function(){};if(0<=we.indexOf(e))return this.Ic.bind(this,t,e);if(0<=Ee.indexOf(e))return this.pe.bind(this,t,e);if(ve[e])return this.Fc.bind(this,t,e)}return this.Fc(t,e)},t.set=function(t,e,i){xe({type:"set",targetName:t,property:e,value:this.a[t][e]=i})},t.Rb=function(t,e){(Ce=e).addUpdateListener(this.l),e.addMessageListener("urn:x-cast:com.google.shaka.v2",this.m),this.vc(),xe({typereceict(new w(2,8,e,t))},t.Fc=function(t,e){return this.a[t][e]},t.Ic=function(t,e){xe({type:"call",targetName:t,methodName:e,args:Array.prototype.slice.call(arguments,2)})},t.pe=function(t,e){var i=Array.prototype.slice.call(arguments,2),n=new O,r=this.s.toString();return this.s++,this.c[r]=n,xe({type:"asyncCall",targetName:t,methodName:e,args:i,id:r}),n},t.wc=function(t){var e=this.u();this.f=new O,this.j=!0,this.Rb(e,t)},t.Rd=function(t){Oe="available"==t,this.g()},t.vc=function(){var t=!!Ce&&"connected"==Ce.status;if(this.b&&!t){for(var e in this.F(),this.a)this.a[e]={};Pe(this)}this.w=(this.b=t)?Ce.receiver.friendlyName:"",this.g()},t.Ld=function(t,e){switch((r=ke(e)).type){case"event":var i=r.targetName,n=r.event;this.A(i,new J(n.type,n));break;case"update":for(i in n=r.update){var r=this.a[i]||{};for(a in n[i])r[a]=n[i][a]}this.j&&(this.K(),this.j=!1);break;case"asyncComplete":var i=r.id,a=r.error;if(r=this.c[i],delete this.c[i],r)if(a){for(n in i=new w(a.severity,a.category,a.code),a)i[n]=a[n];r.reject(i)}else r.resolve()}},Le.prototype.addEventListener=functitype.removeEventListener=ful(this,t)}catch(t){}if(t.a)break}return t.defaultPrevented},i(Ie),e("shaka.cast.CastProxy",Ie),Ie.prototype.destroy=function(t){return t&&this.a&&this.a.nb(),t=[this.i?this.i.destroy():null,this.b?this.b.destroy():null,this.a?this.a.destroy():null],this.a=this.i=this.j=this.h=this.b=this.c=null,Promise.all(t)},Ie.prototype.getVideo=Ie.prototype.xd=function(){return this.h},Ie.prototype.getPlayer=Ie.prototype.od=function(){return this.j},Ie.prototype.canCast=Ie.prototype.$c=function(){return!!thsting=Ie.prototype.X=function(){return!!this.a&&this.a.X()},Ie.prototype.receiverName=Ie.prototype.Ub.a.cast(t).then(function(){return this.b.vb()}.bind(this))},Ie.prototype.setAppData=Ie.prototype.Xb=function(t){this.a.Xb(t)},Ie.prototype.suggestDisconnect=Ie.prototype.Pe=function(){var t,e=this.a;e.b&&(t=e.u(),chrome.cast.requestSession(e.Rb.bind(e,t),e.uc.bind(e)))},Ie.prototype.forceDisconnect=Ie.prototype.nb=function(){this.a.nb()},(t=Ie.prototype).mc=function(){var i={video:{},player:{},playerAfterLoad:{},manifest:this.b.nc(),startTime:null};return this.c.pause(),me.forEach(function(t){i.video[t]=this.c[t]}.bind(this)),this.c.ended||(i.startTime=this.c.currentTime),_e.forEach(function(t){var e=tion(t){var e=t[1];t=func{this.f.dispatchEvent(new J(this.h.paused?"pause":"play"))},t.Ke=function(){_e.forEach(function(t){var e=t[1];t=this.a.get("player",t[0])(),this.b[e](t)}.bind(this));var t=this.a.get("player","getManifestUri")(),e=this.a.get("video","ended"),i=Promise.resolve(),n=this.c.autoplay,r=null;e||(r=this.a.get("video","currentTime")),t&&(this.c.autoplay=!1,(i=this.b.load(t,r)).catch(function(t){this.b.dispatchEvent(nvar a={};me.forEachis.b[e](t)}.bind(this)),this.c.autoplay=n,t&&this.c.play()}.bind(this))},t.Ve=function(t){if("addEventListener"==t)return this.f.addEventListener.bind(this.f);if("removeEventListener"==t)return this.f.removeEventListener.bind(this.f);if(this.a.X()&&!Object.keys(this.a.a.video).length){var e=this.c[t];if("function"!=typeof e)return e}return this.a.X()?this.a.get("video",nctioction(t){this.a.X()||this.f.dispatchEvent(new J(t.type,t))},t.ge=function(t){return"addEventListener"==t?this.g.addEventListener.bind(this.g):"removeEventListener"==t?this.g.removeEventListener.bind(this.g):"getMediaElement"==t?function(){return this.h}.bind(this):"getNetworkingEngine"==t?this.b.oc.bind(this.b):"getManifest"==t?this.a.X()?function(){return null}:this.b.Ea.bind(this.b):this.a.X()&&!Object.keys(this.a.a.video).length&&ve[t]||!this.a.",t)}s.f.dispatchEvent(e):"player"==t&&this.g.dispatchEvent(e))},i(De),e("shaka.cast.CastReceiver",De),De.prototype.isConnected=function(){return this.l},De.prototype.isIdle=De.prototype.zd=function(){return this.f},De.prototype.destroy=function(){var t=this.b?this.b.destroy():Promise.resolve();return null!=this.i&&d.clearTimeout(this.i),this.s=this.m=this.b=this.n(){cast.receiver.CastReceiverManager.getInstance().getSenders().length,Me(this)},t.Gc=function(t,e){this.b&&(this.Sb(),je(this,{type:"event",targetName:t,event:e},this.c))},t.Sb=function(){null!=this.i&&d.clearTimeout(this.i),this.i=d.setTimeout(this.,player:{}};if(pe.forEach(function(t){e.video[t]=this.a[t]}.bind(this)),this.b.P())for(var t in be){var i=be[t];this.g%i||(e.player[t]=this.b[t]())}for(t in ve)i=ve[t],this.g%i||(e.player[t]=this.b[t]());(i=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(e.video.volume=i.level,e.video.muted=i.muted),this.j&&(this.g+=1),je(this,{type:"update",update:e},this.c)},t.gd=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&je(this,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},this.c),je(this,{type:"event",targetName:"video",event:{type:"volumechange"}},this.c)},t.Ud=function(t){var e=ke(t.data);switch(e.type){case"init":this.g=0,this.j=!1,function(t,i,e){for(var n in i.player)t.b[n](i.player[n]);t.s(e),e=Promise.resolve();var r=t.a.autoplay;i.manifest&&unction(t){this.b.dispatchEvent(new J("error",{detail:t}))}.bind(t))),e.then(function(){for(var t in i.video){var e=i.video[t];this.a[t]=e}for(t in i.playerAfterLoad)e=i.playerAfterLoad[t],this.b[t](e);this.a.autoplay=r,i.manifest&&(this.a.play(),Ne(this,0))}.bind(t))}(this,e.initState,e.appData),this.Sb();break;case"appData":this.s(e.appData);break;case"set":var i=e.targetName,n=e.property,r=e.value;if("video"==i){if(e=cast.receiver.CastReceiverManager.getInstance(),"volume"==n){e.setSystemVolumeLevel(r);break}if("muted"==n){e.setSystemVolumeMuted(r);break}}this.m[i][n]=r;break;case"call":i=e.targetName,n=e.methodName,r=e.args,(i=this.m[i])[n].apply(i,r);break;case"asyncCall":i=e.targetName,n=e.methodName,"player"==i&&"load"==n&&(this.g=0,this.j=!1),r=e.args,e=e.id,t=t.senderId,(i=this.m[i])[n].apply(i,r).then(this.Nc.bind(this,t,e,null),this.Nc.bind(this,t,e))}},t.Gd=function(t){var i=ke(t.data);switch(i.type){case"PLAY":this.a.play(),Ne(this,0);break;case"PAUSE":this.a.pause(),Ne(this,0);break;case"SEEK":t=i.currentTime;var e=i.resumeState;null!=t&&(this.a.currentTime=Number(t)),e&&"PLAYBACK_START"==e?(this.a.play(),Ne(this,0)):e&&"PLAYBACK_PAUSE"==e&&(t));break;case"STOP":this.b.vb().then(function(){Ne(this,0)}.bind(this));break;case"GET_STATUS":Ne(this,Number(i.requestId));break;case"VOLUME":t=(e=i.volume).level;var e=e.muted,n=this.a.volume,r=this.a.muted;null!=t&&(this.a.volume=Number(t)),null!=e&&(this.a.muted=e),n==this.a.volume&&r==this.a.muted||Ne(this,0);break;case"LOAD":this.g=0,this.j=!1,e=i.media.contentId,t=i.currentTime;var a=this.u(e);this.a.autoplay=!0,this.b.load(a,t).then(function(){var t={contentId:a,streamType:this.b.P()?"LIVE":"BUFFERED",contentType:""};Ne(this,0,t)}.bind(this)).catch(function(t){var e="LOAD_FAILED";7==t.category&&7e3==t.code&&(e="LOAD_CANCELLED"),je(this,{requestId:Number(i.requestId),type:e},this.h)}.bind(this));break;default:je(this,{requestId:Number(i.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.h)}},t.Nc=function(t,e,i){je(this,{type:"asyncComplete",id:e,error:i},this.c,t)};v e&&e.nodeType==Node.TEXT_NODE?t.textContent.trim():null}function He(t,e,i,n){var r=null;return nu"Z"),t=Date.parse(t),isNaN(t)?null:Math.floor(t/1e3)):null}function qe(t){return(t=t&&/^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$/.exec(t))?(t=31536e3*Number(t[1]||null)+2592e3*Number(t[2]||null)+86400*Number(t[3]||null)+3600*Number(t[4]||null)+60*Num=Number(e[2]),isFinite(e)?{start:t,end:e}:null):null):null}function Ke(t){return(t=Number(t))%1?null:t}function ze(t){return!((t=Number(t))%1)&&0<t?d+)\/(\d+)$/))?Number(e[1]/e[2]):Number(t),isNaN(t)?null:t}var $e={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"};function Je(t,e,i){t=t.map(function(t){var e=t.getAttribute("schemeIdUri"),i=t.getAttribute("cenc:default_KID"),n=Be(t,"cenc:pssh").map(Ge);if(!e)return null;if(e=e.toLowerCase(),i&&0<=(i=i.replace(/-/g,"").toLowerCasen(t){return{initDataType:"cenc",initData:pt(t),keyId:null}})}catch(t){throw new w(2,4,4007)}return{node:t,Mc:e,keyId:i,init:0<r.length?r:null}}).filter(j);var n,r,a=null,o=[],s=[],u=t.map(function(t){return t.keyId}).filter(j);if(u.length"urn:mpeg:dash:mp4protection(t){var e=$e[t.Mc];return e?[Z(e,t.init||n)]:r(t.node)||[]}).reduce(D,[])).length||(o=[Z("",a)])),!t.length||!i&&s.length||(o=it($e).map(functiach(function(t){t.initData.forEach(function(t){t.keyId=l})}),{hc:l,ef:a,drmInfos:o,kc:!0}}function Qe(t,e,i,n,r){var a={RepresentationID:e,Number:i,Bandwidth:n,Time:r=null!=r?Math.round(r):r};return t.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)d)?\$/g,function(t,e,i){if("$$"==t)return"$";var n=a[e];return null==n?t:("RepresentationID"==e&&i&&(i=void 0),t=n.toString(),i=d.parseInt(i,10)||1,Array(Math.max(0,i-t.length)+1).join("0")+t)})}function Ze(t,e){var i=ti(t,e,"timescale"),n=1;i&&(n=ze(i)||1),(i=ze((i=ti(t,e,"duration"))||""))&&(i/=n);var r=ti(t,e,"startNumber"),a=Number(ti(t,e,"presentationTimeOffset"))||0,o=Xe(r||"");null!=r&&null!=o||(o=1);r=null;if(u=ei(t,e,"SegmentTimeline")){for(var r=n,s=t.R.duration||1/0,u=Be(u,"S"),l=[],c=0,d=0;d<u.length;++d){var h=He(p=u[d],"t",Xe),f=He(p,"d",Xe),p=He(p,"r",Ke);if(null!=h&&(h-=a),!f)break;if(h=null!=h?h:c,(p=p||0)<0)if(d+1<u.length){if(null==(p=He(u[d+1],"t",Xe)))break;if(p<=h)break;p=Math.ceil((p-h)/f)-1}else{if(1/0==s)break;if(s<=h/r)break;p=Math.ceil((s*r-h)/f)-1}0<l.length&&h!=c&&(l[l.length-1].end=h/r);for(var m=0;m<=p;++m)l.push({start:h/r,end:(c=h+f)/r,Teon(t){return Fe(t,i)}).reduce(function(t,e){return t||e})}function ii(t,e){var i,n=new DOMParser;try{var r=at(t),a=n.parseFromString(r,"text/xml")}catch(t){}return(i=a&&a.documentElement.tagName==e?a.documentElement:i)&&0<i.getElementsByTagName("parsererror").length?null:i}function ni(t,e,i,n,r,a){if(a=a||0,t.getAttribute("xlink:href")){var o=function(r,a,o,t,s,u){for(var l=r.getAttribute("xlink:href"),e=r.getAttribute("xlink:actuate")||"onRequest",i=0;i<r.attributes.length;i++){var n=r.attributes[i].nodeName;-1!=n.indexOf("xlink:")&&(r.removeAttribute(n),--i)}if(5<=u)return Promise.reject(new w(2,4,4028));if("onLoad"!=e)return Promise.reject(new w(2,4,4027));var c=Q([t],[l]);return s.request(0,G(c,a)).then(function(t){if(!(t=ii(t.data,r.tagName)))return Promise.reject(new w(2,4,4001,l));for(;r.childNodes.length;)r.removeChild(r.childNodes[0]);for(;t.childNodes.length;){var e=t.childNodes[0];t.removeChild(e),r.appendChild(e)}for(e=0;e<t.attributes.length;e++){var i=t.attributes[e].nodeName,n=t.getAttribute(i);r.setAttribute(i,n)}return ni(r,r,a);return o=i?o.catch(function(){return ni(t,e,i,n,r,a)}):o}for(o=0;o<t.childNodes.length;o++){var s=t.childNodes[o];s instanceof Element&&"urn:mpeg:dash:resolve-to-zero:2013"==s.getAttribute("xlink:href")&&(t.removeChild(s),--o)}for(var u=[],o=0;o<t.childNodes.length;o++)(s=t.childNodes[o]).nodeType==Node.ELEMENT_NODE&&(s=ni(s,e,i,n,r,a),his.startTime=e,this.endTime=i,this.a=n,this.N=r,this.D=a}function oi(t,e){this.G=t,this.b=e==ui,this.a=0}e("shaka.media.InitSegmentReference",ri),ri.prototype.createUris=ri.prototype.Ab=function(){return this.a()},ri.prototype.getStartByte=ri.prototype.Fb=function(){return this.N},ri.prototype.getEndByte=ri.prototype.Db=function(){return this.D},e("shaka.media.SegmentReference",ai),ai.prototype.getPosition=ai.prototype.U=function(){return this.position},ai.prototype.getStartTime=ai.prototype.Gb=function(){return this.startTime},ai.prototype.getEndTime=ai.prototype.ld=function(){rtype.createUris=ai.prototype.Ab=function(){return this.a()},ai.prototype.getStartByte=ai.prototype.Fb=function(){return this.N},ai.prototype.getEndByte=ai.prototype.Db=function(){return this.D},e("shaka.util.DataVienew w(2,3,3e3)}function ci(){this.c=[],this.b=[],this.a=!1}function di(t){for(;t.o.ca()&&!t.oa.a;)t.oa.rb(t.start,t.o,t.Ec)}function hi(t){far e=0,i=0;i<t.length;i++)e=e<<8|t.charCodeAt(i);return e}function mi(t,e,i,n){var r,a=(new ci).ba("sidx",function(t){r=function(t,e,i,n){var r=[];n.o.H(4);var a=n.o.B();if(!a)throw new w(2,3,3005);{var o,s;s=n.version?(o=n.o.Na(),n.o.Na()):(o=n.o.B(),n.o.B())}n.o.H(2);var u=n.o.Xa();for(t=t+n.size+s,s=0;s<u;s++){var l=(2147483648&(c=n.o.B()))>>>31,c=2147483647&c,d=n.o.B();if(n.o.H(4),1==l)throw new w(2,3,3006);r.push(new ai(r.length,o/a-e,(o+d)/a-e,function(){return i},t,t+c-1)),o+=d,t+=c}return n.oa.stop(),r}(e),r)return r;throw new w(2,3,3004)}function yi(t){this.a=t}function gi(t,e){for(var i;t.a.length&&(i=t.a[t.a.length-1]).startTime>=e;)t.a.pop();for(;t.a.length&&(i=t.a[0]).endTime<=0;)t.a.shift();t.a.length&&((i=t.a[0]).startTime<tt&&(t.a[0]=new ai(i.position,0,i.endTime,i.a,i.N,i.D)),i=t.a[t.a.length-1],t.a[t.a.length-1]=new ai(i.position,i.startTime,e,i.a,i.N,i.D))}function vi(t){this.b=t,this.a=new oi(t,0),si=si||[new Uint8Array([255]),new Uint8Array([127,255]),new Uint8Array([63,255,255]),new Uint8Array([31,255,255,255]),new Uint8Array([15,255,255,255,255]),new Uint8Array([7,255,255,255,255,255]),new Uint8Array([3,255,255,255,255,255,255]),new Uint8Array([1,255,255,255,255,255,255,255])]}function bi(t){var e=_i(t);if(7<e.length)throw new w(2,3,3002);for(var i=0,n=0;n<e.length;n++)i=256*i+e[n];e=i,i=_i(t);t:{for(n=0;n<si.length;n++)if(gt(i,si[n])){n=!0;break t}n=!1}if(n)i=t.b.byteLength-t.a.U();else{if(8==i.length&&224&i[1])throw new w(2,3,3001);for(var n=i[0]&(1<<8-i.length)-1,r=1;r<i.length;r++)n=256*n+i[r];i=n}return i=t.a.U()+i<=t.b.byteLength?i:t.b.byteLength-t.a.U(),n=new DataView(t.b.buffer,t.b.byteOffset+t.a.U(),i),t.a.H(i),new Ti(e,n)}function _i(t){for(var e=t.a.$(),i=1;i<=8&&!(e&1<<8-i);i++);if(8<i)throw new w(2,3,3002);var n=new Uint8Array(i);for(n[0]=e,e=1;e<i;e+,i=0;i<t.a.byteLength;i++)e=256*e+t.a.getUint8(i);return e}function Ei(){}function Si(t,e){var i=ei(t,e,"Initialization");if(!i)return null;var n=t.v.aa;(e=i.getAttribute("sourceURL"))&&(n=Q(t.v.aa,[e]));e=0,t=null;return(i=He(i,"range",We))&&(e=i.start,t=i.end),new ri(function(){return n},e,t)}function ki(t,e,i,n,r,a,o,s){var u=t.presentationTimeline,l=!t.Da||!t.R.Hb,c=t.R.duration,d=e,h=null;return{createSegmentIndex:function(){var t=[d(n,r,a),"webm"==o?d(i.a(),i.N,i.D):null];return d=null,Promise.all(t).then(function(t){var e=t[0];t=t[1]||null,e="mp4"==o?mi(e,r,n,s):(new Ei).parse(e,t,n,s),u.Ia(0,e),h=new yi(e),l&&gi(h,c)})},findSegmentPosition:function(t){return h.find(t)},getSegmentReference:function(t){return h.get(t)}}}function Ai(t){return t.Ya}function Oi(t,e){.Z.qa].f"SegmHe(t,"mediaRange",We,{start:0,end:null})).start,end:t.end}}),a=Ze(t,Ci),o=(o=a.za)||1,s=0;if(a.O?s=a.O*(o-1):a.I&&0<a.I.length&&(s=a.I[0].start),!(r={O:a.O,startTime:s,za:o,V:a.V,I:a.I,Ha:r}).O&&!r.I&&1<r.Ha.length)throw new w(2,4,4002);if(!r.O&&!t.R.duration&&!r.I&&1==r.Ha.length)throw new w(2,4,4002);if(r.I&&!r.I.length)throw new w(2,4,4002);return o=a=null,t.Z.id&&t.v.id&&(a=e[o=t.Z.id+","+t.v.id]),s=function(t,e,i,n){var r=n.Ha.length;n.I&&n.I.length!=n.Ha.length&&(r=Math.min(n.I.length,n.Ha.length));for(var a=[],o=n.startTime,s=0;s<r;s++){var u=n.Ha[s],l=Q(i,[u.Ad]),c=null!=n.O?o+n.O:n.I?n.I[s].end:o+t;a.push(new ai(s+e,o,c,function(t){return t}.bind(null,l),u.start,u.end)),o=c}return a}(t.R.duration,r.za,t.v.aa,r),a?(a.Lb(s),o=t.presentationTimeline.ja(),a.Bb(o-t.R.start)):(t.presentationTimeline.Ia(0,s),a=new yi(s),o&&t.Da&&(e[o]=a)),t.Da&&t.R.Hb||gi(a,t.R.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:a.find.bind(a),getSegmentReference:a.get.bind(a),initSegmentReference:n,V:r.V}}function Ci(ction(){var t=Qe(e,i,null,n,null);return Q(r,[t])},0,null)}(t),p=Ze(t,Pi),m=ti(t,Pi,"media"),y=ti(t,Pi,"index"),m=0+((p={O:p.O,timescale:p.timescale,za:p.za,V:p.V,dc:p.dc,I:p.I,Kb:m,Va:y}).Va?1:0);if(m+=p.I?1:0,!(m+=p.O?1:0))throw new w(2,4,4002);if(1!=m&&(p.Va&&(p.I=null),p.O=null),!p.Va&&!p.Kb)throw new w(2,4,4002);if(p.Va){if("mp4"!=(i=t.v.mimeType.split("/")[1])&&"webm"!=i)throw new w(2,4,4006);if("webm"==i&&!f)throw new w(2,4,4005);n=Qe(p.Va,t.v.id,null,t.bandwidth||null,null),t=ki(t,e,f,n=Q(t.v.aa,[n]),0,null,i,p.V)}else t=p.O?(n||t.presentationTimeline.Mb(p.O),r=t.R.duration,a=p.O,o=p.za,s=p.timescale,u=p.V,l=p.Kb,c=t.bandwidth||null,d=t.v.id,h=t.v.aa,{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:function(t){return t<0||r&&r<=t?null:Math.floor((t+u)/a)},getSegmentReference:function(e){var i=e*i(e,i,t,function(){var t=Qe(l,d,e+o,c,i*s);return Q(h,[t])},0,null)}}):(n=e=null,t.Z.id&&t.v.id&&(e=i[n=t.Z.id+","+t.v.id]),m=function(t,e){for(var i=[],n=0;n<e.I.lengtn,[t=Qe(t,e,r,i,a)]).map(function(t){return t.toString()})}.bind(null,e.Kb,t.v.id,t.bandwidth||null,t.v.aa,r,e.I[n].Te+e.dc),0,null))}return i}(t,p),e?(e.Lb(m),i=t.presentationTimeline.ja(),e.Bb(i-t.R.start)):(t.presentationTimeline.Ia(0,m),e=new yi(m),n&&t.Da&&(i[n]=e)),t.Da&&t.R.Hb||gi(e,t.R.duration),{createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:e.find.bind(e),getSegmentReference:e.get.bind(e)});return{createSegmentIndex:t.createSegmentIndex,findSegmentPosition:t.findSegmentPosition,getSegmentReference:t.getSegmentReference,initSegmentReference:f,V:p.V}}function Pi(t){return t.Za}oi.Endiaoi.prototype.ca=function(){return this.a<this.G.byteLength},oi.prototype.getPosition=oi.prototype.U=function(){return this.a},oi.prototype.getLength=oi.prototype.md=function(){return this.G.byteLength},oi.prototype.readUint8=oi.prototype.$=function(){try{var t=this.G.getUint8(this.a)}catch(t){li()}return this.a+=1,t},oi.prototype.readUint16=oi.prototype.Xa=function(){try{var t=this.G.getUint16(this.a,this.b)}catch(t){li()}return this.a+=2,t},oi.prototype.readUint32=oi.prototype.B=function(){try{var t=this.G.getUint32(this.a,this.b)}catch(t){li()}return this.a+=4,t},oi.prototype.readInt32=oi.prototype.Hc=function(){try{var t=this.G.getInt32(this.a,this.b)}catch(t){li()}return this.a+=4,t},oi.prototype.readUint64=oi.prototype.Na=function(){try{var t,e;this.b?(t=this.G.getUint32(this.a,!0),e=this.G.getUint32(this.a+4,!0)):(e=this.G.getUint32(this.a,!1),t=this.G.getUint32(this.a+4,!1))}catch(t){li()}if(2097151<e)throw new w(2,3,3001);return this.a+=8,e*Math.pow(2,32)+t},oi.prototype.readBytes=oi.prototype.Ma=function(t){this.a+t>this.G.byteLength&&li();var e=new Uint8Array(this.G.buffer,this.G.byteOffset+this.a,t);return this.a+=t,new Uint8Array(e)},oi.prototype.skip=oi.prototype.H=function(t){this.a+t>this.G.byteLength&&li(),this.a+=t},oi.prototype.rewind=oi.prototype.Lc=function(t){this.a<t&&li(),this.a-=t},oi.prototype.seek=function(t){(t<0||t>this.G.byteLength)&&li(),this.a=t},oi.prototype.readTerminatedString=oi.prototype.Tb=function(){for(var t=this.a;this.ca()&&this.G.getUint8(this.a);)this.a+=1;return t=new Uint8Array(this.G.buffer,this.G.byteOffset+t,this.a-t),this.a+=1,at(t)},e("shaka.util.Mp4Parser",ci),ci.prototype.box=ci.prototype.C=function(t,e){t=pi(t);return this.c[t]=0,this.b[t]=e,this},ci.prototype.fullBox=ci.prototype.ba=function(t,e){t=pi(t);return this.c[t]=1,this.b[t]=e,this},ci.prototype.stop=function(){this.a=!0},ci.prototype.parse=function(t,e){var i=new Uint8Array(t),i=new oi(new DataView(i.buffer,i.byteOffset,i.byteLength),0);for(this.a=!1;i.ca()&&!this.a;)this.rb(0,i,e)},ci.prototype.parseNext=ci.prototype.rb=function(t,e,i){var n=e.U(),r=e.B(),a=e.B();switch(r){case 0:r=e.G.byteLength-n;break;case 1:r=e.Na()}var o,s,u=this.b[a];u?(s=o=null,1==this.c[a]&&(o=(s=e.B())>>>24,s&=16777215),a=n+r,i&&a>e.G.byteLength&&(a=e.G.byteLength),e=0<(a-=e.U())?e.Ma(a):new Uint8Array(0),u({oa:this,Ec:i||!1,version:o,lc:s,o:e=new oi(new DataView(e.buffer,e.byteOffset,e.byteLength),0),size:r,start:n+t})):e.H(n+r-e.U())},ci.children=di,ci.sampleDescription=hi,ci.allDape.destroy=functiois.a.length&&t<this.a[0].startTime?this.a[0].position:null},yi.prototype.get=function(t){return!this.a.length||(t-=this.a[0].positis.a.length;++e)this.a[e].startTime+=t,this.a[e].endTime+=t},yi.prototype.merge=yi.prototype.Lb=function(t){for(var e,i,n,r=[],a=e=0;e<this.a.length&&a<t.length;)i=this.a[e],n=t[a],i.startTime<n.startTime?(r.push(i),e++):(i.startTime>n.startTime?e||r.push(n):(.1<Math.abs(i.endTime-n.endTime)?(n=new ai(i.position,n.startTime,n.endTime,n.a,n.N,n.D),r.push(n)):r.push(i),e++),a++);for(;e<this.a.length;)r.push(this.a[e++]);if(r.length)for(e=r[r.length-1].position+1;a<t.length;)n=new ai(e++,(n=t[a++]).startTime,n.endTime,n.a,n.N,n.D),r.pus.a.length&&!(this.a[e].endTime>t);++e);this.a.splice(0,e)},vi.prototype.ca=function(){return this.a.ca()},Ei.prototype.parse=function(t,e,i,n){var r;if(440786851!=bi(e=new vi(new DataView(e))).id)throw new w(2,3,3008);var a=bi(e);if(408125543!=a.id)throw new w(2,3,3009);for(e=a.a.byteOffset,a=new vi(a.a),r=null;a.ca();){var o=bi(a);if(357149030==o.id){r=o;break}}if(!r)throw new w(2,3,3010);for(a=new vi(r.a),r=1e6,o=null;a.ca();){var s=bi(a);if(2807729==s.id)r=wi(s);else if(17545==s.id)if(4==(o=s).a.byteLength)o=o.a.getFloat32(0);else{if(8!=o.a.byteLength)throw new w(2,3,3003);o=o.a.getFloat64(0)}}if(null==o)throw new w(2,3,3011);if(r=o*(a=r/1e9),475249515!=(t=bi(new vi(new DataView(3,3007);return function(t,e,i,n,r,a){function o(){return r}var s=[];t=new vi(t.a);for(var u=null,l=null;t.ca();){var c,d=bi(t);187!=d.id||(c=function(t){var e=new vi(t.a);if(179!=(t=bi(e)).id)throw new w(2,3,3013);if(t=wi(t),183!=(e=bi(e)).id)throw new w(2,3,3012);for(var e=new vi(e.a),i=0;e.ca();){var n=bi(e);if(241==n.id){i=wi(n);break}}return{Ue:t,oe:i}}(d))&&(d=i*c.Ue,c=e+c.oe,null!=u&&s.push(new ai(s.length,u-a,d-a,o,l,c-1)),u=d,l=c)}return null!=u&&s.push(new ai(s.length,u-a,n-a,o,l,null)),s}(t,e,a,r,i,n)};var xi={},Li={};function Ii(e,t,i,n){var r=n;return r||1<(n=new h(e).Y.split("/").pop().split(".")).length&&(n=n.pop().toLowerCase(),r=Li[n]),r?Promise.resolve(r):((i=G([e],i)).method="HEAD",t.request(0,i).then(function(t){return(t=t.headers["content-type"])&&(t=t.t4e3,e))},function(t){return t.severity=2,Promise.reject(t)}))}function Di(t,e){this.c=t,this.j=e,this.f=this.a=1/0,this.b=1,this.i=0,this.h=!0,this.g=0}function Mi(){this.a=this.b=null,this.g=[],this.c=null,this.i=[],this.h=1,this.j={},this.l=0,this.f=null}function ji(t){return t.a.networkingEngine.request(0,G(t.g,t.b.retryParameters),function(){return!this.a}.bind(t)).then(function(t){if(this.a)return function(t,e,i){if(!(e=ii(e,"MPD")))throw new w(2,4,4001,i);return ni(e,t.b.retryParameters,t.b.dash.xlinkFailGracefully,i,t.a.networkingEngine).then(function(t){return function(t,e,i){i=[i],0<(a=Be(e,"Location").map(Ge).filter(j)).length&&(i=t.g=a),a=Be(e,"BaseURL").map(Ge),i=Q(i,a);var n=He(e,"minBufferTime",qe);t.l=He(e,"minimumUpdatePeriod",qe,-1);var r=He(e,"availabilityStartTime",Ve),a=He(e,"timeShiftBufferDepth",qe),o=He(e,"suggestedPresentationDelay",qe),s=He(e,"maxSegmentDuration",qe),u=e.getAttribute("type")||"static";{var l,c;l=t.c?t.c.presentationTimeline:(c=Math.max(10,1.5*n),new Di(r,null!=o?o:c))}var o=(r=function(t,e,i,n){var r=He(n,"mediaPresentationDuration",qe),a=[],o=0;n=Be(n,"Period");for(var s=0;s<n.length;s++){var u,l=n[s],o=He(l,"start",qe,o),c=He(l,"duration",qe),d=null;if(s!=n.length-1?null!=(u=He(n[s+1],"start",qe))&&(d=u-o):null!=r&&(d=r-o),l=function(t,e,i,n){e.Z=Fi(n.node,null,i),e.R=n,e.Z.id||(e.Z.id="__shaka_period_"+n.start),Be(n.node,"EventStream").forEach(t.ee.bind(t,n.start,n.duration));var r=(i=Be(n.node,"AdaptationSet").map(t.ce.bind(t,e)).filter(j)).map(function(t){return t.qe}).reduce(D,[]),a=r.filter(N);if(e.row new w(2,4,4018);var o=i.filter(function(t){d==i&&t.streams.forEach(function(t){t.trickModeVideo=e})})}),r=Ni(o,"video"),a=Ni(o,"audio"),!r.length&&!a.length)throw new w(2,4,4004);for(a.length||(a=[null]),r.length||(r=[null]),e=[],i=0;i<a.length;i++)for(var s=0;s<r.length;s++)!function(t,e,i,n){if(e||i)if(e&&i){var r=e.drmInfos,a=i.drmInfos;if(!r.length||!a.length||0<St(r,a).length)for(var o=St(e.drmInfos,i.drmInfos),r=0;r<e.streams.length;r++)for(var s=0;s<i.streams.length;s++)a=(i.streams[s].bandwidth||0)+(e.streams[r].bandwidth||0),a={id:t.h++,language:e.language,primary:e.Jb||i.Jb,audio:e.streams[r],video:i.streams[s],bandwidth:a,drmInfos:o,allowedByApplication:!0,allowedByKeySystem:!0},n.push(a)}else for(o=e||i,r=0;r<o.streams.length;r++)a=o.streams[r].bandwidth||0,a={id:t.h++,language:o.language||"und",primary:o.Jb,audio:e?o.streams[r]:null,video:i?o.streams[r]:null,bandwidth:a,drmInfos:o.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0},n.push(a)}(t,a[i],r[s],e);for(t=Ni(o,"text"),r=[],i=0;i<t.length;i++)r.push.apply(r,t[i].streams);return{startTime:n.start,textStreams:r,variants:e}}(t,e,i,{start:o,duration:d=null==d?c:d,node:l,Hb:null==d||s==n.length-1}),a.push(l),c=e.Z.id,-1==t.i.indexOf(c)&&(t.i.push(c),t.c&&(t.a.filterNewPeriod(l),t.c.periods.push(l))),null==d){o=null;break}o+=d}return t.c||t.a.filterAllPeriods(a),null!=r?{periods:a,duration:r,ic:!1}:{periods:a,duration:o,ic:!0}}(t,{Da:"static"!=u,presentationTimeline:l,Z:null,R:null,S:null,v:null,bandwidth:0,qc:!1},i,e)).duration,d=r.periods;return l.ub("static"==u),"static"!=u&&r.ic||l.fa(o||1/0),l.Zb(null!=a?a:1/0),l.Mb(s||1),t.c?Promise.resolgetAttribute("schemeIdUri"),value:t.getAttribute("value")}});var r=t.b.dash.clockSyncUri;return n&&!e.length&&r&&rn e.catch(t.bind(null,i))}.bind(null,e),Promise.reject())}(e,function(t){var e=t.value;switch(t.scheme){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return Bi(this,i,e,"HEAD");case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return Bi(this,i,e,"GET");case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return t=Date.parse(e),isNaN(t)?0:t-Date.now();case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:return Promise.rejline:l,periods:d,offlineSessionIds:[],minBufferTime:n||0})}.bind(t)))}(this,t,i)}.bind(t))}(this,t.data,t.uri)}.bind(t))}function Ni(t,e){return t.filter(function(t){return t.contentType==e})}function Ui(t,e){t.l<0||(t.f=d.setTimeout(t.Le.bind(t),1e3*Math.max(Math.max(3,t.l)-e,0)))}function Fi(t,e,i){e=e||{contentType:"",mimeType:"",codecs:"",containsEmsgBoxes:!1,frameRate:void 0,Nb:null},i=i||e.aa;var n=Be(t,"BaseURL").map(Ge),r=t.getAttribute("contentType")||e.contentType,a=t.getAttribute("mimeType")||e.mimeType,o=t.getAttribute("codecs")||e.codecs,s=He(t,"frameRate",Ye)||e.frameRate,u=!!Be(t,"InbandEventStream").length,l=function(t){for(var e=0;e<t.length;++e){var i=t[e],n=i.getAttribute("schemeIdUri");if(n&&(i=i.getAttribute("value")))switch(n){case"urn:mpeg:dash:outputChannelPositionList:2012":return i.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(n=parseInt(i,10)))continue;return n;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(n=parseInt(i,16)){for(t=0;n;)1&n&&++t,n>>=1;return t}}}return null}(l=Be(t,"AudioChannelConfiguration"))||e.Nb,r=r||Gi(a,o);return{aa:Q(i,n),Ya:Fe(t,"SegmentBase")||e.Ya,qa:Fe(t,"SegmentList")||e.qa,Za:Fe(t,"SegmentTemplate")||e.Za,width:He(t,"width",Xe)||e.width,height:He(t,"height",Xe)||e.height,contentType:r,mimeType:a,codecs:o,frameRate:s,containsEmsgBoxes:u||e.containsEmsgBoxes,id:t.getAttribute("id"),Nb:l}}function Bi(t,e,i,n){return(e=G(e=Q(e,[i]),t.b.retryP=function Gi(t,e){return Lt[nt(t,e)]?"text":t.split("/")[0]}function Hi(t,et,e,i,n){this.id=t,this.name=e,this.a=i,this.value=n||null}function qi(t,e){this.name=t,this.value=e}functionon zi(t,e){return t.filter(function(t){return t.name==e})}function Xi(t,e){e=zi(t,e);return e.length?e[0]:null}function Yi(t,i,n){return t.filter(function(t){var e=t.getAttribute("TYPE");r,e){return Q([t],[e])[0]}function Ji(t){this.b=t,this.a=0}function Qi(t,e){e.lastIndex=t.a;e=(e=e.exec(t.b))?{position:e.index,length:e[0].length,te:e}:null;return t.a!=t.b.length&&e&&e.position==t.a?(t.a+=e.length,e.te):null}function Zi(t&&(t=Qi(t,/[^ \t\n]*/gm))?t[0]:null}function tn(){this.a=0}function en(t,e,i){var n=(e=(e=at(e)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new w(2,4,4015);e=0;for(var r=[],a=1;a<n.length;)if(/^#(?!EXT)/m.test(n[a]))a+=1;else{var o=n[a],o=nn(t.a++,o);if(0<=rn.indexOf(o.name))e=1;else if(0<=an.indexOf(o.name)){if(1!=e)throw new w(2,4,4017);return new Hi(i,e,r,t=function(t,e,i){var n=[],r=[];return e.forEach(function(t){/^(#EXT)/.test(t)?(t=nn(this.a++,t),(0<=rn.indexOf(t.name)?i:r).push(t)):/^#(?!EXT)/m.test(t)||(n.push(new Ki(t.trim(),r)),r=[])}.bind(t)),n}(t,n=n.splice(a,n.length-a),r))}r.push(o),a+=1,"EXT-X-STREAM-INF"==o.name&&(o.a.push(new qi("URI",n[a])),a+=1)}return new Hi(i,e,r)}function nn(t,e){if(!(n=e.match(/^#(EXT[^:]*)(?::(.*))?$/)))throw new w(2,4,4016);var e=n[1],i=n[2],n=[];if(i&&0<=i.indexOf("="))for(var r,i=new Ji(i),a=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;r=Qi(i,a);)n.push(new qi(r[1],r[2]||r[3]));else if(i)return new Vi(t,e,n,i);return new Vi(t,e,n)}e("shaka.media.ManifestParser.registerParserByExtension",function(t,e){Li[t]=e}),e("shaka.media.ManifestParser.registerParserByMime",function(t,e){xi[t]=e}),e("shaka.media.PresentationTimeline",Di),Di.prototype.getDuration=Di.prototype.T=function(){return this.a},Di.prototype.setDuration=Di.prototype.fa=function(t){this.a=t},Di.prototype.getPresentationStartTime=Di.prototype.qd=function(){return this.c},Di.prototype.setClockOffset=Di.prototype.Pc=function(t){this.i=t},Di.prototype.setStatic=Di.prototype.ub=function(t){this.h=t},Di.prototype.getSegmentAvailabilityDuration=Di.prototype.sd=function(){return this.f},Di.prototype.setSegmentAvailabilityDuration=Di.prototype.Zb=function(t){this.f=t},Di.prototype.setDelay=Di.prototype.Qc=function(t){this.j=t},Di.prototype.notifySegmenuce(function(t,e){return Math.max(t,e.endTime-e.startTime)},thistion=Di.prototype.Mb=function(t){thLive=Di.prototype.P=function(){return 1/0=ess=Di.prototype.wa=function(){return 1/0!=this.a&&!this.h},Di.prototype.getSegmentAvailabilityStart=Di.prototype.ja=function(){return this.Fa(0)},Di.prototype.getSafeAvailabilityStart=Di.prototype.Fa=function(t){if(1/0==this.f)return this.g;var e=this.va();return Math.max(this.g,Math.min(e-this.f+t,e))},Di.prototype.setAvailabilityStart=Di.prototype.Oc=function(t){this.ax(0,(Date.now()+this.i)/1e3-this.b-this.c),this.P()||this.wa()?this.j:0;return Math.max(0,this.va()-t)},e("shaka.dash.DashParser",Mi),(t=Mi.prototype).configure=function(t){this.b=t},t.s,ji(this).then(function(){return this.a&&Ui(this,0),this.c}.bind(this))},t.stop=function(){return this.b=this.a=null,this.g=[],this.c=null,this.i=[],this.j={},null!=this.f&&(d.clearTimeout(this.f),this.f=ion(){ji(this).catch(function(t){this.a&&this.a.onError(t)}.bind(this))},t.onExpirationUpdated=function(){},t.ce=function(e,t){e.S=Fi(t,e.Z,null);var i=!1,n=(l=Be(t,"Role")).map(function(t){return t.getAttribute("value")}).filter(j),r=void 0;"text"==e.S.contentType&&(r="subtitle");for(var a=0;a<l.length;a++)if(null==(c=l[a].getAttribute("schemeIdUri"))||"urn:mpeg:dash:role:2011"==c)switch(c=l[a].getAttribute("value"),c){case"main":i=!0;break;case"caption":case"subtitlgetAttribute("schemeIdUri")?o=t.getAttribute("value"):s=!0}),s)return null;var u=Je(l=Be(t,"ContentProtection"),this.b.dash.customScheme,this.b.dash.ignoreDrmInfo),l=qt(t.getAttribute("lang")||"und"),c=t.getAttribute("label");if(!(n=(a=Be(t,"Representation")).map(this.fe.bind(this,e,u,r,l,c,i,n)).filter(function(t){return!!t})).length)throw new w(2,4,4003);return e.S.contentType&&"application"!=e.S.contentTyp,n[0].codecsnfos.forEkeyId)})}),r=a.map(function(t){return t.getAttribute("id")}).filter(j),{id:e.S.id||"__fake__"+this.h++,contentType:e.S.contentType,language:l,Jb:i,streams:n,drmInfos:u.drmInfos,cc:o,qe:r}},t.fe=function(t,e,i,n,r,a,o,s){if(t.v=Fi(s,t.S,null),d=t.v,u=0+(d.Ya?1:0),u+=d.qa?1:0,!((u+=d.Za?1:0)?(1!=u&&(d.Ya&&(d.qa=null),d.Za=null),!0):"text"==d.contentType||"application"==d.contentType))return null;var u;t.bandwidth=He(s,"bandwidth",ze)||0;var l,c,d=this.re.bind(this);return d=t.v.Ya?function(t,e){var i=1,n=(n=Number(ti(t,Ai,"presentationTimeOffset"))||0)/(i=(r=ti(t,Ai,"timescale"))?ze(r)||1:i)||0,r=Si(t,Ai),a=t.v.contentType,i=t.v.mimeType.split("/")[1];if("text"!=a&&"mp4"!=i&&"webm"!=i)throw new w(2,4,4006);if("webm"==i&&!r)throw new w(2,4,4005);var o,a=ei(t,Ai,"RepresentationIndex"),s=ti(t,Ai,"indexRange"),u=t.v.aa,s=We(s||"");if(a&&((o=a.getAttribute("sourceURL"))&&(u=Q(t.v.aa,[o])),s=He(a,"range",We,s)),!s)throw new w(2,4,4002);return{createSegmentIndex:(i=ki(t,e,r,u,s.start,s.end,i,n)).createSegmentIndex,findSegmentPosition:i.findSegmentPosition,getSegmentReference:i.getSegmentReference,initSegmentReference:r,V:n}}(t,d):t.v.qa?Oi(t,this.j):t.v.Za?Ri(t,d,this.j,!!this.c):(l=t.v.aa,c=t.R.duration||0,{createSege),findSegmentPositireturn 1!=t?null:new ai(1,0,c,function(){return l},0,null)},initSegmentReference:null,V:0}),s=function(t,e,i,n){var r=Je(t,e,n);if(i.kc)t=1==i.drmInfos.length&&!i.drmInfos[0].keySystem,e=!r.drmInfos.length,i.drmInfos.length&&(!t||e)||(i.drmInfos=r.drmInfos),i.kc=!1rmInfos.some(function(t){return t.keySystem==e.keySystem})}),!i.drmInfos.length))throw new w(2,4,4008);return r.hc||i.hc}(s=Be(s,"ContentProtection"),this.b.dash.customScheme,e,this.b.dash.ignoreDrmInfo),{id:this.h++,createSegmentIndex:d.createSegmentIndex,findSegmentPosition:d.findSegmentPosition,getSegmentReference:d.getSegmentReference,initSegmentReference:d.initSegmentReference,presentationTimeOffset:d.V,mimeType:t.v.mimeType,codecs:t.v.codecs,frameRate:t.v.frameRate,bandwidth:t.bandwidth,width:t.v.width,height:t.v.height,kind:i,encrypted:0<e.drmInfos.length,keyId:s,language:n,label:r,type:t.S.contentType,primary:a,trickModeVideo:null,containsEmsgBoxes:t.v.containsEmsgBoxes,roles:o,channelsCount:t.v.Nb}}(this).then(function(){this.a&&Ui(this,(Date.now()-t)/1e3)}.bind(this)).catch(function(t){this.a&&(t.severity=1,this.a.onError(t),Ui(this,0))}.bind(this))},t.ee=function(n,r,t){var a=t.getAttribute("schemeIdUri")||"",o=t.getAttribute("value")||"",s=He(t,"timescale",Xe)||1;Be(t,"Event").forEach(function(t){var e=He(t,"presentationTime",Xe)||0,i=He(t,"duration",Xe)||0,i=(e=e/s+n)+i/s;null!=r&&(e=Math.min(e,n+r),i=Math.min(i,n+r)),t={schemeIdUri:a,value:o,startTime:e,endTime:i,id:t.getAttribute("id")||"",eventElement:t},this.a.onTimelineRegionAdded(t)}.bind(this))},t.re=function(t,e,i){return t=G(t,this.b.retryParameters),null!=e&&(t.headers.Range="bytes="+e+"-"+(null!=i?i:"")),this.a.networkingEngine.request(1,t).then(function(t){return t.data})},Li.mpd=Mi,xi["application/dash+xml"]=Mi,Vi.prototype.toString=function(){return this.value?"#"+this.name++":"+this.a.map(function(t){return t.name+'="'+t.valr(function(t){return t.name==e});return t.length?t[0]:null};var rn="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-MAP EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST".split(" "),an="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE".split(" ");function on(i){return new Promise(function(t){var e=on.parse(i);t({uri:i,data:e.data,headers:{"content-type":e.contentType}})})}function sn(){this.g=this.c=null,this.F=1,this.u={},this.A={},this.K={},this.a={},this.b=null,this.l="",this.s=new tn,this.i=this.h=null,this.f=Tn,this.m=null,this.j=0,this.w=1/0}function un(t,e,i){var n=fn(e,"URI"),n=$i(t.l,n);if(t.a[n])return Promise.resolve(t.a[n]);var r=fn(e,"TYPE").toLowerCase();"subtitles"==r&&(r="text");var a=qt(Wi(e,"LANGUAGE","und")),o=Wi(e,"NAME"),s=e.getAttribute("DEFAULT"),u=e.getAttribute("AUTOSELECT"),l=Wi(e,"CHANNELS");return ln(t,n,i,r,a,!!s||!!u,o,"audio"==r?(l=l)?(l=l.split("/")[0],parseInt(l,10)):null:null).then(function(t){return this.a[n]||(this.u[e.id]=t,this.a[n]=t)}.bind(t))}function ln(t,o,s,f,p,m,y,g){var v=o;o=$i(t.l,o);var b,_,T="";return mn(t,o).then(function(t){if(1!=(b=en(this.s,t.data,o)).type)throw new w(2,4,4017);var e,i,n=wn,r=Xi((t=b).a,"EXT-X-PLAYLIST-TYPE"),a=Xi(t.a,"EXT-X-ENDLIST"),a=r&&"VOD"==r.value||a,r=r&&"EVENT"==r.value&&!a,r=!a&&!r;if(a?bn(this,n.na):(bn(this,r?n.ec:n.Vc),t=pn(t.a,"EXT-X-TARGETDURATION"),t=Number(t.value),this.j=Math.max(t,this.j),this.w=Math.min(t,this.w)),1==s.length)T=s[0];else{if(null==(t=hn(f,s)))throw new w(2,4,4025,s);T=t}return e=this,a=f,r=T,i=new h(n=$i((n=b).uri,n.segments[0].uri)).Y.split(".").pop(),(t=gn[a][i])?Promise.resolve(t):"text"==a?r&&"vtt"!=r?Promise.resolve("application/mp4"):Promise.resolve("text/vtt"):((a=G([n],e.g.retryParameters)).method="HEAD",e.c.networkingEngine.request(1,a).then(function(t){if(!(t=t.headers["content-type"]))throw new w(2,4,4021,i);return t.split(";")[0]}))}.bind(t)).then(function(t){return _=t,t=Xi(b.a,"EXT-X-MEDIA-SEQUENCE"),dn(this,b,t?Number(t.value):0,_,T)}.bind(t)).then(function(t){var e,i,n,r,a=t[0].startTime,o=t[t.length-1].endTime,s=o-a,u=new yi(t);this.b||(i=o,n=null,r=0,(e=this).f!=wn.na&&(n=Date.now()/1e3-i,r=3*e.j),e.b=new Di(n,r),e.b.ub(e.f==wn.na)),o=null,"text"!=f&&(o=function(t){var e=zi(t.a,"EXT-X-MAP");if(!e.length)return null;if(1<e.length)throw new w(2,4,4020);var i=fn(e=e[0],"URI"),n=$i(t.uri,i);t=0,i=null,(e=Wi(e,"BYTERANGE"))&&(t=e.split("@"),e=Number(t[0]),t=Number(t[1]),i=t+e-1);return new ri(function(){return[n]},t,i)}(b)),this.b.Ia(0,t),t="text"==f?"subtitle":void 0;var l=[];b.segments.forEach(function(t){t=zi(t.a,"EXT-X-KEY"),l.push.apply(l,t)});var c=!1,d=[],h=null;if(l.forEach(function(t){var e;"NONE"!=fn(t,"METHOD")&&(c=!0,e=fn(t,"KEYFORMAT"),(t=(e=_n[e])?e(t):null)&&(t.keyIds.length&&(h=t.keyIds[0]),d.push(t)))}),c&&!d.length)throw new w(2,4,4026);return{stream:t={id:this.F++,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:u.find.bind(u),getSegmentReference:u.get.bind(u),initSegmentReference:o,presentationTimeOffset:0,mimeType:_,codecs:T,kind:t,encrypted:c,keyId:h,language:p,label:y||null,type:f,primary:m,trickModeVideo:null,containsEmsgBoxes:!1,frameRate:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:[],channelsCount:g},tb:this.K[t.id]=u,drmInfos:d,Wb:v,Bd:a,duration:s}}.bind(t))}function cn(t,e,i,n,r){var a=i.a,o=$i(t.uri,i.uri);t=pn(a,"EXTINF").value.split(","),t=r+Number(t[0]),i=0;var s=null;return(a=Xi(a,"EXT-X-BYTERANGE"))&&(i=a.value.split("@"),a=Number(i[0]),s=(i=i[1]?Number(i[1]):e.D+1)+a-1),new ai(n,r,t,function(){return[o]},i,s)}function dn(t,n,r,e,i){var a,o,s,u,l=n.segments,c=[],d=$i(n.uri,l[0].uri),h=cn(n,null,l[0],r,0);return a=t,o=n.uri,h=h,s=e,u=i,(a.m&&(o=a.a[o].tb.get(h.position))?Promise.resolve(o.startTime):function(t,e){var i=t.c.networkingEngine,n=G(e.a(),t.g.retryParameters),r={},t=e.N;r.Range="bytes="+t+"-"+(t+2048-1);var a={};!t&&null==e.D||(t="bytes="+t+"-",null!=e.D&&(t+=e.D),a.Range=t);return n.headers=r,i.request(1,n).catch(function(){return f("Unable to fetch a partial HLS segment! Falling back to a full segment request, which is expensive!  Your server should support Range requests and CORS preflights.",n.uris[0]),n.headers=a,i.request(1,n)})}(a,h).then(function(t){if("video/mp4"==s||"audio/mp4"==s)return function(t){var e=0,i=!1;if((new ci).C("moof",di).C("traf",di).ba("tfdt",function(t){e=(t.version?t.o.Na():t.o.B())/9e4,i=!0,t.oa.stop()}).parse(t,!0),!i)throw new w(2,4,40"==s)return function(t){function e(){throw new w(2,4,4030)}t=new oi(new DataView(t),0);for(var i=0;;){i=t.U();var n=t.$();if(71!=n&&e(),16384&t.Xa()||e(),(n=(48&t.$())>>4)&&2!=n||e(),3==n&&(n=t.$(),t.H(n)),1==t.B()>>8)return t.H(3),(i=t.$()>>6)&&1!=i||e(),t.$()||e(),i=t.$(),n=t.Xa(),t=t.Xa(),(1073741824*((14&i)>>1)+((65534&n)<<14|(65534&t)>>1))/9e4;t.seek(i+188),71!=(n=t.$())&&(t.seek(i+192),n=t.$()),71!=n&&(t.seek(i+204),n=t.$()),71!=n&&e(),t.Lc(1)}}(t.data);if("application/mp4"!=s&&s.indexOf("text/"))throw new w(2,4,4030);t=t.data;var e,i=nt(s,u);return t=Lt[i]?((e=new xt(null)).c=new Lt[i],e.Gb(t)):0}.bind(a))).then(function(t){d.split("/").pop();for(var e=0;e<l.length;++e){var i=c[c.length-1],i=st(e[r].trim()))return e[r].trim();return"text"==t?"":null}function fn(t,e){t=t.getAttribute(e);if(!t)throw new w(2,4,4023,e);return t.value}function pn(t,e){t=Xi(t,e);if(!t)throw new w(2,4,4024,e);return t}function mn(t,e){returuest(0,G([e],t.g.retryParameters),function(){return!this.c}.bind(t))}e("shaka.net.DataUriPlugin",on),on.parse=function(t){if((i=t.split(":")).length<2||"data"!=i[0])throw new w(2,1,1004,t);if((i=i.slice(1).join(":").split(",")).length<2)throw new w(2,1,1004,t);var e=i[0],i=d.decodeURIComponent(i.slice(1).join(",")),n=null;if("base64"==(n=1<(e=e.split(";")).length?e[1]:n))t=pt(i).buffer;else{if(n)throw new w(2,1,1005,t);t=ut(i)}return{data:t,contentType:e[0]}},B("data",on),e("shaka.hls.HlsParser",sn),(t=sn.prototype).configure=function(t){this.g=t},t.start=function(e,t){return this.c=t,this.l=e,mn(this,e).then(function(t){return function(t,e,i){if(0!=(e=en(t.s,e,i)).type)throw new w(2,4,4022);reMEDIA").filter(function(t){return"SUBTITLES"==fn(t,"TYPE")}.bind(t)).map(function(t){return e=this,fn(t=t,"TYPE"),un(e,t,[]).then(function(t){return t.stream});var e}.bind(t));return Promise.all(e).then(function(e){var t=zi(n,"EXT-X-STREAM-INF").map(function(t){return function(t,r,e){var a=Wi(r,"CODECS","avc1.42E01E,mp4a.40.2").split(","),o=r.getAttribute("RESOLUTION"),i=null,n=null,s=Wi(r,"FRAME-RATE"),u=Number(fn(r,"BANDWIDTH"));{var l;o&&(l=o.value.split("x"),i=l[0],n=l[1])}e=zi(e.a,"EXT-X-MEDIA");var c=Wi(r,"AUDIO"),d=Wi(r,"VIDEO");{var h;c?e=Yi(e,"AUDIO",c):d&&(e=Yi(e,"VIDEO",d)),(l=hn("text",a))&&(!(h=Wi(r,"SUBTITLES"))||(h=Yi(e,"SUBTITLES",h)).length&&(t.u[e(a.indexOf(l),1))}e=e.map(function(t){return un(this,t,a)}.bind(t));var f=[],p=[];return Promise.all(e).then(function(t){var e,i,n;return c?f=t:d&&(p=t),f.length||p.length?f.length?fn(r,"URI")==f[0].Wb?(t="audio",i=!0):t="video":t="audio":(i=!1,1==a.length?(t=hn("video",a),t=o||s||t?"video":"audio"):(t="video",a=[a.join(",")])),i?Promise.resolve():(e=this,i=a,t=t,n=fn(r,"URI"),n=$i(e.l,n),e.a[n]?Promise.resolve(e.a[n]):ln(e,n,i,t,"und",!1,null,null).then(function(t){return this.a[n]||(this.a[n]=t)}.bind(e)))}.bind(t)).then(function(t){return t&&("audio"==t.stream.type?f=[t]:p=[t]),function(t,e,i,n,r,a,o){i.forEach(function(t){(t=t.stream)&&(t.width=Number(r)||void 0,t.height=Number(a)||void 0,t.frameRate=Number(o)||void 0)}.bind(t)),e.length||(e=[null]),i.length||(i=[null]);for(var s=[],u=0;u<e.length;u++)for(var l=0;l<i.length;l++){var c=e[u]?e[u].stream:null,d=i[l]?i[l].stream:null,h=e[u]?e[u].drmInfos:null,f=i[l]?i[l].drmInfos:null;if(c&&d){if(h.length&&f.length&&!(0<St(h,f).length))continue;var p=St(h,f)}else c?p=h:d&&(p=f);h=(i[u]?i[u].Wb:"")+" - "+(e[u]?e[u].Wb:""),t.A[h]||(c=function(t,e,i,n,r){return{id:t.F++,language:e?e.language:"und",primary:!!e&&e.primary||!!i&&i.primary,audio:e,video:i,bandwidth:n,drmInfos:r,allowedByApplication:!0,allowedByKeySystem:!0}}(t,c,d,n,p),s.push(c),t.A[h]=c)}return s}(this,f,p,u,i,n,s)}.bind(t))}(this,t,i)}.bind(this));return Promise.all(t).then(function(t){return{startTime:0,variants:t.reduce(D,[]),textStreams:e}}.bind(this))}.bind(t))}(t,e).then(function(t){if(this.c.filterAllPeriods([t]),this.f!=wn.na){var e=3*this.j;this.b.Qc(e),this.h=this.w,this.f==wn.ec&&this.b.Zb(e)}else{var i,n=1/0,r=1/0;for(i in this.a)e=this.a[i],n=Math.min(n,e.Bd),r=Math.min(r,e.duration);for(i in this.b.fa(r),this.a)e=this.a[i],e.stream.presentationTimeOffset=n,e.tb.offset(-n),gi(e.tb,r)}this.m={presentationTimeline:this.b,periods:[t],offlineSessionIds:[],minBufferTime:0}}.bind(t))}(this,t.data,e).then(function(){return vn(this,this.h),this.m}.bind(this))}.bind(this))},t.stop=function(){return this.g=this.c=null,this.u={},this.A={},this.m=null,Promise.resolve()},t.update=function(){if(this.f!=wn.na){var t,e=[];for(t in this.a)e.push(function(t,r,a){mn(t,a).then(function(t){var e=wn,i=en(this.s,t.data,a);if(1!=i.type)throw new w(2,4,4017);t=Xi(i.a,"EXT-X-MEDIA-SEQUENCE");var n=r.stream;dn(this,i,t?Number(t.value):0,n.mimeType,n.codecs).then(function(t){t=(r.tb.a=t)[t.length-1],Xi(i.a,"EXT-X-ENDLIST")&&(bn(this,e.na),this.b.fa(t.endTime))}.bind(this))}.bind(t))}(this,this.a[t],t));return Promise.all(e)}},t.onExpirationUpdated=function(){};var yn={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av1$/],text:[/^vtt$/,/^wvtt/,/^stpp/]},gn={audio:{mp4:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",ts:"video/mp2t"},video:{mp4:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",ts:"video/mp2t"},text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",vtt:"text/vtt",ttml:"application/ttml+xml"}};function vn(t,e){null!=t.h&&null!=e&&(t.i=d.setTimeout(t.J.bind(t),1e3*e))}function bn(t,e){t.f=e,t.b&&t.b.ub(t.f==wn.na),t.f==wn.na&&null!=t.i&&(d.clearTimeout(t.i),t.i=null,t.h=null)}sn.pro(this.i=null,this.update().then(function(){vn(this,this.h)}.bind(this)).catch(function(t){this.c&&(t.severity=1,this.c.onError(t),vn(this,0))}.bind(this)))};var _n={"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(t){if("SAMPLE-AES-CENC"!=fn(t,"METHOD"))return null;var e=fn(t,"URI"),e=on.parse(e),e=Z("com.widevine.alpha",[{initDataType:"cenc",initData:e=new Uint8Array(e.data)}]);return(t=Wi(t,"KEYID"))&&(e.keyIds=[t.substr(2).toLowerCase()]),e}},Tn="VOD",wn={na:Tn,Vc:"EVENT",ec:"LIVE"};function En(t,e,i,n,r,a){this.a=t,this.c=e,this.l=i,this.m=null==n?null:Sn(this,n),this.K=r,this.J=a,this.b=new K,this.j=!1,this.i=1,this.h=this.f=null,this.g=new ct(this.Dd.bind(this)),this.F=t.readyState,this.s=!1,this.A=this.W=-1,this.u=this.w=!1,0<t.readyState?this.yc():(X(this.b,t,"loadedmetadata",this.yc.bind(this)),z(this.b,t,"timeupdate",function(){dt(this.g,.1)}.bind(this))),e=this.Ac.bind(this),z(this.b,t,"ratechange",this.Qd.bind(this)),z(this.b,t,"waiting",e),this.h=new ct(e),ht(this.h,.25)}function Sn(t,e){var i=t.c.presentationTimeline.T();return i<=e?i-t.l.durationBackoff:e}function kn(t){return 0<t.a.readyState?t.a.paused?t.a.currentTime:Pn(t,t.a.currentTime):An(t)}function An(t){if(null!=t.m)return Pn(t,t.m);var e=1/0>(e=t.c.presentationTimeline).T()?e.ja():e.pb();return t.m=Sn(t,e),e}function On(t,e){t.f&&(t.f.cancel(),t.f=null),!t.j&&e<0&&(t.f=new ct(function(){this.a.currentTime+=e/4}.bind(t)),ht(t.f,.25))}function Cn(t,e){var i=At.bind(null,t.a.buffered),n=+Math.max(t.c.minBufferTime||0,t.l.rebufferingGoal),r=t.c.presentationTimeline,a=r.Fa(0),o=r.va(),s=r.T(),u=r.Fa(n),l=r.Fa(5),n=r.FaurrentTime=i,setTimeout(r,100))}.bind(t);setTimeout(r,100)}function Pn(t,e){var i=t.c.presentationTimeline.ja();return e<i||(i=t.c.presentationTimeline.va())<e?i:e}function xn(t,e,i,n,r,a,o){this.a=t,this.w=e,this.g=i,this.u=n,this.l=r,this.h=a,this.A=o,this,250)}function Dn(t){t.f&&(d.clearTimeout(t.f),t.f=null)}function Mn(t,e){this.a=e,this.b=t,this.h=null,this.i=1,this.m=Promise.resolve(),this.g=[],this.j={},this.c={},this.s=!1,this.A=null,this.w=this.f=this.l=!1,this.u=0}function jn(t){var e=kn(t.a.Ka);return t.b.periods[ce(t.b,e)]}function Nn(t){var e=t.c.video||t.c.audio;return e){return Bn(t,"audio")}function Fn(t){return Bn(t,"video")}function Bn(t,e){e=t.c[e];return e?e.pa||e.stream:null}function Gn(t,e){t.u++,t.w=!1;var i=t.u;return t.a.L.init({text:e}),Yn(t,[e]).then(function(){var t;this.u!=i||this.c.text||this.w||(t=kn(this.a.Ka),this.c.text=zn(e,ce(this.b,t)),tr(this,this.c.text,0))}.bind(t))}function Hn(t,e){var i,n,r=t.c.video;!r||(i=r.stream)&&(e?(e=i.trickModeVideo)&&((n=r.pa)||(qn(t,e,!1),r.pa=i)):(n=r.pa)&&qn(t,n,!(r.pa=null)))}function Vn(t,e,i){e.video&&qn(t,e.video,i),e.audio&&qn(t,e.audio,i)}function qn(t,e,i){var n,r=t.c[e.type];!r&&"text"==e.type&&t.h.ignoreTextStreamFailures?Gn(t,e):r&&(n=de(t.b,e),i&&n!=r.xa?Wn(t):(r.pa&&(e.trickModeVideo?e=(r.pa=e).trickModeVideo:r.pa=null),(n=t.g[n])&&n.Oa&&(n=t.j[e.id])&&n.Oa&&r.stream!=e&&("text"==e.type&&Dt(t.a.L,nt(e.mimeType,e.codecs)),r.stream=e,r.qb=!0,i&&(r.ta?r.wb=!0:r.ya?(r.sa=!0,r.wb=!0):(er(r),Zn(t,r,!0))))))}function Wn(t){for(var e in t.c){var i=t.c[e];i.ta||i.sa||(i.ya?i.sa=!0:null==Mt(t.a.L,e)?null==i.ra&&tr(t,i,0):(er(i),Zn(t,i,!1)))}}function Kn(t,e,i){var n,r=kn(t.a.Ka),a=ce(t.b,r),o={},r=[];return e.variant&&e.variant.audio&&(o.audio=e.variant.audio,r.push(e.variant.audio)),e.variant&&e.variant.video&&(o.video=e.variant.video,r.push(e.variant.video)),e.text&&(o.text=e.text,r.push(e.text)),t.a.L.init(o),(e=(n=t).b.presentationTimeline.T())<1/0?n.a.L.fa(e):n.a.L.fa(Math.pow(2,32)),Yn(t,r).then(function(){if(!this.f)for(var t in o){var e=o[t];this.c[t]||(this.c[t]=zn(e,a,i),tr(this,this.c[t],0))}}.bind(t))}function zn(t,e,i){return{stream:t,type:t.type,Ga:null,ka:null,pa:null,qb:!0,xa:e,endOfStream:!1,ya:!1,ra:null,sa:!1,wb:!1,ta:!1,Vb:!1,Ua:!1,Jc:i||0}}function Xn(t,e){var i=t.g[e];if(i)return i.M;i={M:new O,Oa:!1},t.g[e]=i;var n=t.b.periods[e].variants.map(function(t){var e=[];return t.audio&&e.push(t.audio),t.video&&e.push(t.video),t.video&&t.video.trickModeVideo&&e.push(t.video.trickModeVideo),e}).reduce(D,[]).filter(N);reteams),t.m=t.m.function(){this.f||(this.g[e].M.resolve(),this.g[e].Oa=!0)}.bind(t)).catch(function(t){this.f||(this.g[e].M.reject(),delete this.g[e],this.a.onError(t))}.bind(t)),i.M}function Yn(t,i){i.map(function(t){return t.id}).filter(N);for(var e=[],n=0;n<i.length;++n){var r=i[n],a=t.j[r.id];a?e.push(a.M):(t.j[r.id]={M:new O,Oa:!1};++t){var e=this.j[r.id].M.reject(),delete this.j[r.id],Promise.reject(t)}.bind(t))}function $n(t,e,i,n){return i=t.b.periods[i],(e=e.stream.getSegmentReference(n))?(t=(n=t.b.presentationTimeline).ja(),n=n.va(),i.st:null}function Jn(t){return!t.ya&&null==t.ra&&!t.sa&&!t.ta}function Qn(t,e){var i,n=G(e.a(),t.h.retryParameters);return!e.N&&null==e.D||(i="bytes="+e.N+"-",null!=e.D&&(i+=e.D),n.headers.Range=i),t.a.Wa.request(1,n).then(function(t){return t.data})}function Zn(t,i,n){var e,r;i.sa=!1,i.wb=!1,i.ta=!0,e=t.a.L,("text"==(r=i.type)?e.a.remove(0,1/0):Ut(e,r,e.Tc.bind(e,r,0,e.f.duration))).then(function(){if(!this.f&&n){var t=this.a.L,e=i.type;return"text"==e?Promise.resolve():Ut(t,e,t.hd.bind(t,e))}}.bind(t)).then(function(){this.f||(i.Ga=nullnction er(t){null!=t.ra&&(d.clearTimeout(t.ra),t.ra=null)}function ir(t,e){R(t.A).then(function(){this.a.onError(e),e.handled||this.h.failureCallback(e)}.bind(t))}function nr(a,i){return new Promise(function(n,r){var t,e=new XMLHttpRequest;for(t in e.open(i.method,a,!0),e.responseType="arraybuffer",e.timeout=i.retryParameters.timeout,e.withCredentials=i.allowCrossSiteCredentials,e.onload=function(t){var e=(t=t.target).getAllResponseHeaders().trim().split("\r\n").reduce(function(t,e){e=e.split(": ");return t[e[0].toLowerCase()]=e.slice(1).join(": "),t},{});if(200<=t.status&&t.status<=299&&202!=t.status)t.responseURL&&(a=t.responseURL),n({uri:a,data:t.response,headers:e,fromCache:!!e["x-shaka-from-cache"]});else{var i=null;try{i=st(t.response)}catch(t){}r(new w(401==t.status||403==t.status?2:1,1,1001,a,t.status,i,e))}},e.onerror=function(){r(new w(1,1,1002,a))},e.ontimeout=function(){r(new w(1,1,1003,a))},i.headers)e.setRequestHeader(t,i.headers[t]);e.send(i.body)})}function rr(t,i,n){t.openCursor().onsuccess=function(t){var e=t.target.result;e?i(e.key,e.value,function(){e.continue()}):n()}}function ar(n,t){function e(t){return s?t:(t.close(),new Promise(function(t){setTimeout(t,1e3)}).then(i))}function i(){return t=n,i=r,t=d.indexedDB.open(t,2),e=new O,t.onupgradeneeded=function(t){var.db,e)},t.onsuccess=function(t){e.resolve(t.target.result)},t.onerror=function(){e.reje indexeddb"))},e;var t,i,e}function r(t,e,i){a(t,e,i),s=!0}var a=mr,o=t||0,s=!1,u=Promise.resolve().then(i);if(o){for(var l=0;l<o;l++)u=u.then(e);u=u.then(function(t){return s?t:(t.close(),Promise.reject(new w(2,9,9001,"Failed to issue upgrade after "+o+" retries")))})}return u}function or(){}function sr(){}function ur(t){var e=(e=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(t))?Number(e[1]):null;return e=null==e?(tt[1]):null:e}function lr(t){this.c=t,this.b=null,this.a=[]}function cr(t,ev2","readonly",function(t){rr(t,function(t,e,i){n(t,e),i()},i)});function ie,i){var n;return pr(t,e,"readonly",function(t){n=t.get(i)}).then(function(){return n.result})}function hr(t,e,i){varnction(t){t.add(i).onsuccess=function(t){n=t.target.result}}).then(function(){return n})}function fr(t,e,i,n){return pr(t,e,"readwrirEach(function(t){e.delete(t).onsuccess=function(){n&&n(t)}})})}function pr(i,t,e,n){var r={transaction:i.b.transaction([t],e),M:new O};return r.transaction.oncomplete=function(){i.a.splice(i.a.indexOf(r),1),r.M.resolve()},r.transaction.onabort=function(t){i.a.splice(i.a.indexOf(r),1);var e=r.transaction;r.M.reject(e.error?new w(2,9,9001,e.error):new w(2,9,9002)),t.preventDefault()},r.transaction.onerror=function(t){t.preventDefault()},n(t=r.transaction.objectStore(t)),i.a.push(r),r.M}function mr(t,e,i){var n={0:new or,1:new sr}[t];if(!n)throw new w(1,9,9001,"Attemping to upgrade from version "+t+" which is not supported. To use offline, please delete the offline storage.");n.a(e,i)}function yr(t,e,i){this.b={},this.i=[],this.h=t,thit.b[e]||[],t.b[e].push({uris:i.a(),N:i.N,D:i.D,gc:n,Wd:r})}function vr(t,e){t.c=0,t.f=0,it(t.b).forEach(function(t){t.forEach(this.s.bind(this))}.bind(t)),t.a=e;var i=it(t.b).map(function(t){var e=0,i=function(){return this.a?e>=t.length?Promise.resolve():function(t,n){var r,e=G(n.uris,t.m);!n.N&&null==n.D||(e.headers.Range="bytes="+n.N+"-"+(null==n.D?"":n.D));return t.j.request(1,e).then(function(t){return this.a?(r=t.data.byteLength,hr(this.h,"segment-v2",{data:t.data})):Promise.reject(new w(2,9,9002))}.bind(t)).then(function(t){if(!this.a)return Promise.reject(new w(2,9,9002));var e,i;this.a.size+=r,this.f+=null==n.D?n.gc:n.D-n.N+1,this.i.puhis).c?t.f/t.c:0,i=t.a.size,t.l.forEach(function(t){t(e,i)})}.bind(t))}(this,t[e++]).then(i):Promise.reject(new w(2,9,9002))}.bind(this)e.all(i).then(function(){return hr(this.h,"manifest-v2",e)}=/^offline:manifest\/([0-9]+)$/.exec(t))?Number(t[1]):null}function _r(t,e){var i=Tr(e.periods[0],[],new Di(null,0)),n=e.appMetadata||{},i=Qt(i);return{offlineUri:t,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration,tracks:i,appMetadata:n}}function Tr(t,e,i){var n,r,a,o,s=t.streams.filter(Sr),u=t.streams.filter(kr);return n=s,r=u,a=e,o={},(u=[]).push.apply(u,n),u.push.apply(u,r),u.forEach(function(t){t.variantIds.forEach(function(t){o[t]||(o[t]={id:t,language:"",primary:!1,audio:null,video:null,bandwidth:0,drmInfos:a,allowedByApplication:!0,allowedByKeySystem:!0})})}),n.forEach(function(t){var e=Er(t);t.variantIds.forEach(function(t){(t=o[t]).language=e.language,t.primary=t.primary||e.primary,t.audio=e})}),r.forEach(function(t){var e=Er(t);t.variantIds.forEach(function(t){(t=o[t]).primary=t.primary||e.primary,t.video=e})}),e=it(o),s=t.streams.filter(Ar).map(Er),t.streams.forEach(function(t){t=t.segments.map(function(t,e){return wr(e,t)}),i.Ia(0,t)}),{startTime:t.startTime,variants:e,textStreams:s}}function wr(t,e){var i="offline:segment/"+e.dataKey;return new ai(t,e.startTime,e.endTime,function(){returnr e,i=new yi(i=t.segments.map(function(t,e){return wr(e,t)})),i={id:t.id,createSegmentIndex:Promise.resolve.bind(Promise),findSegmentPosition:i.find.bind(i),getSegmentReference:i.get.bind(i),initSegmentReference:null,presentationTimeOffset:t.presentationTimeOffset,mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate||void 0,kind:t.kind,encrypted:t.encrypted,keyId:t.keyId,language:t.language,label:t.label||null,type:t.contentType,primary:t.primary,trickModeVideo:null,containsEmsgBoxes:!1,roles:[],channelsCount:null};return null!=t.initSegmentKey&&(i.initSegmentReference=(t=t.initSegmentKey,e="offline:segment/"+t,new ri(function(){return[e]},0,null))),i}function Sr(t){return"audio"==t.contentType}function Ar(t){return"text"==t.contentType}function Or(){if(!d.indexedDB)return Promise.reject(new w(2,9,9e3));var t=new lr("sh.init().then(function(){return t})}function Cr(){this.a=-1}function Rr(t){var e=new Di(null,0);e.fa(t.duration);var i=t.drmInfo?[t.drmInfo]:[];return{presentationTimeline:e,minBuffersionIds,periods:t.periods.map(function(t){return Tr(t,i,e)})}}function Pr(t){if(null!=br(t))return Pr.a(t);var e=(e=/^offline:segment\/([0-9]+)$/.exec(t))?Number(e[1]):null;return null!=e?Pr.b(e,t):Promise.reject(new w(2,1,9004,t))}function xr(t){this.a=null;for(var e=0;e<t.textTracks.length;++e){var i=t.textTracks[e];i.mode="disabled","Shaka Player TextTrack"==i.label&&(this.a=i)}this.a||(this.a=t.addTextTrack("subtitles","Shaka Player TextTrack")),this.a.mode="hidden",this.b=this.a.cues}function Lr(t,e){for(var i=t.b,n=[],r=0;r<i.length;++r)e(i[r])&&n.push(i[r]);for(r=0;r<n.length;++r)t.a.removeCue(n[r])}function Ir(){this.a=Promise.resolve(),this.b=this.c=this.f=!1,this.i=new Promise(function(t){this.g=t}.bind(this)),this.l=[],this.j=[]}function Dr(t,e){Le.call(this),this.F=!1,this.f=t,this.lb=!1,this.u=null,this.m=new K,this.h=this.yb=this.b=this.i=this.a=this.w=this.g=this.ib=this.J=this.K=this.l=this.s=null,this.Yc=1e9,this.gb=[],this.kb=!1,this.Ca=!0,this.Sa=this.Ta=this.ha=null,this.fc=!1,this.W=null,this.jb=[],this.A={},this.c=Wr(this),this.hb={width:1/0,height:1/0},this.j=Kr(),this.fb=0,this.Qa=this.c.preferredAudioLanguage,this.Ra=this.c.preferredTextLanguage,this.bb=this.cb="",e&&e(this),this.s=new U(this.Fe.bind(this)),this.ib=Nr(this),z(this.m,this.f,"error",this.Yd.bind(this))}function Mr(t){if(!t.ha)return Promise.resolve();var e=Promise.resolve();return t.i&&(e=t.i.stop(),t.i=null),t=t.ha.cancel(new w(2,7,7e3)),Promise.all([e,t])}Li.m3u8=sn,xi["application/x-mpegurl"]=sn,xi["application/vnd.apple.mpegurl"]=sn,(t=En.prototype).destroy=function(){var t=this.b.destroy();return this.b=null,this.f&&(this.f.cancel(),this.f=null),this.h&&(this.h.cancel(),this.h=null),this.g&&(this.g.cancel(),this.g=null),this.J=this.K=this.ction(){return this.i},t.Qb=function(){this.u=!0,this.Ac()},t.Qd=function(){var t=this.j||this.i<0?0:this.i;this.a.playbackRate&&this.a.playbackRate!=t&&On(this,this.a.playbackRate)},t.yc=function(){var t=An(this);this.b.ga(this.a,"timeupdate"),this.g.cancel(),Math.abs(this.a.currentTime-t)<.001?(z(this.b,this.a,"seeking",this.Bc.bind(this)),z(this.b,this.a,"playing",this.zc.bind(this))):(X(this.b,this.a,"seeking",this.Sd.bind(this)),this.a.currentTime=t)},t.Sd=function(){z(this.b,this.a,"seeking",this.Bc.bind(this)),z(this.b,this.a,"playing",this.zc.bind(this))},t.Ac=function(){if(this.a.readyState&&!this.a.paused){this.a.readyState!=this.F&&(this.s=!1,this.F=this.a.readyState);var t,e,i=this.l.smallGapLimit,n=this.a.currentTime,r=this.a.buffered,a=this.c.presentationTimeline.ja();if(n<a)Rn(this,n,r=Cn(this,n));else{t:{if(r&&r.length&&!(1==r.length&&r.end(0)-r.start(0)<1e-6)){a=.1,/(Edge\/|Trident\/|Tizen)/.test(navigator.userAgent)&&(a=.5);for(var o=0;o<r.length;o++)if(r.start(o)>n&&(!o||r.end(o-1)-n<=a)){a=o;break t}}a=null}if(null==a){if(this.a.readyState<3&&0<this.a.playbackRate)if(this.A!=n)this.A=n,this.W=Date.now(),this.w=!1;else if(!this.w&&this.W<Date.now()-1e3)for(i=0;i<r.length;i++)if(n>=r.start(i)&&n<r.end(i)-.5){this.a.currentTime+=.1,this.A=this.a.currentTime,this.w=!0;break}}else(a||this.u)&&(o=r.start(a),(t=this.c.presentationTimeline.pb())<=o||(e=!1,(i=(t=o-n)<=i)||this.s||(this.s=!0,(t=new J("largegap",{currentTime:n,gapSize:t})).cancelable=!0,this.J(t),this.l.jumpLargeGaps&&!t.defaultPrevented&&(e=!0)),(i||e)&&(a&&r.end(a-1),Rn(this,n,o))))}}},t.Dd=function(){this.m=Cn(this,this.a.currentTime)},t.Bc=function(){this.u=!1;var t=this.a.currentTime,e=Cn(this,t).currentTime,e=Cn(this,t);.001<Math.abs(e-t)&&Rn(this,t,e)},xn.prototype.destroy=function(){var t=this.j?this.j.destroy():Promise.resolve();return this.j=null,Dn(this),this.A=this.h=this.l=this.u=this.g=this.w=this.a=null,this.c=[],t},xn.prototype.s=function(e){var t,i;this.c.some(function(t){return t.info.schemeIdUri==e.schemeIdUri&&t.info.startTime==e.startTime&&t.info.endTime==e.endTime})||(this.c.push(t={info:e,status:1}),i=new J("timelineregionadded",{detail:Ln(e)}),this.h(i),this.m(!0,t))},xn.prototype.m=function(t,e){var i=e.info.startTime>this.a.currentTime?1:e.info.endTime<this.a.currentTime?3:2,n=2==e.status,r=2==i;i!=e.status&&(t&&!n&&!r||(n||this.h(new J("timelineregionenter",{detail:Ln(e.info)})),r||this.h(new J("timelineregionexit",{detail:Ln(e.info)}))),e.status=i)},xn.prototype.F=function(){this.f=null,In(this),(t=ce(this.g,this.a.currentTime))!=this.i&&(-1!=this.i&&this.A(),this.i=t);var t=Ot(this.a.buffered,this.a.currentTime),e=kt(this.a.buffered),i=(n=this.g.presentationTimeline).va(),e=n.P()&&i<=e,n="ended"==this.w.readyState,e=e||this.a.ended||n;this.b?(n=+Math.max(this.g.minBufferTime||0,this.u.rebufferingGoal),(e||n<=t)&&0!=this.b&&(this.b=!1,this.l(!1))):!e&&t<.5&&1!=this.b&&(this.b=!0,this.l(!0)),this.c.forEach(this.m.bind(this,!1))},(t=Mn.prototype).destroy=function(){for(var t in this.c)er(this.c[t]);return this.h=this.c=this.j=this.g=this.m=tor,fuzzFactor:t.retryParameters.fuzzFactor,timeout:0},!0)},t.init=function(){var t=kn(this.a.Ka);return(t=this.a.tc(this.b.periods[ce(this.b,t)])).variant||t.text?Kn(this,t).then(function(){this.a&&this.a.Hd&&this.a.Hd()}.bind(this)):Promise.reject(new w(2,5,5005))},t.Ne=function(t){if(!this.f&&!t.ya&&null!=t.ra&&!t.ta)if(t.ra=null,t.sa)Zn(this,t,t.wb);else{try{var e=(n=t,r=kn((i=this).a.Ka),a=n.Ga&&n.ka?i.b.periods[de(i.b,n.Ga)].startTime+n.ka.endTime:Math.max(r,n.Jc),o=de(i.b,n.stream),s=ce(i.b,a),u=i.a.L,l=n.type,u="text"==l?null==(u=u.a).b||u.b<r?0:u.b-Math.max(r,u.a):Ot(u=jt(u,l),r),l=Math.max(i.i*Math.max(i.b.minBufferTime||0,i.h.rebufferingGoal),i.i*i.h.bufferingGoal),a>=i.b.presentationTimeline.T()?(n.endOfStream=!0,null):(n.endOfStream=!1,(n.xa=s)!=o?null:l<=u?.5:(a=i.a.L,s=n.type,a="text"==s?a.a.b:kt(jt(a,s)),(a=n.ka&&n.stream==n.Ga?(s=n.ka.position+1,$n(i,n,o,s)):null==(s=n.ka?n.stream.findSegmentPosition(Math.max(0,i.b.periods[de(i.b,n.Ga)].startTime+n.ka.endTime-i.b.periods[o].startTime)):n.stream.findSegmentPosition(Math.max(0,(a||r)-i.b.periods[o].startTime)))?null:(u=(u=null)==a?$n(i,n,o,Math.max(0,s-1)):u)||$n(i,n,o,s))?(n.Jc=0,function(t,u,l,e,c){var d=t.b.periods[e],h=u.stream,i=t.b.presentationTimeline.T(),n=t.b.periods[e+1];e=function(t,e,i,n,r){return e.qb?(i=function(t,e,i,n,r){return"text"==e?(t.a.i=i,(t=t.a).h=n,t.g=r,Promise.resolve()):Promise.all([Ut(t,e,t.Zc.bind(t,e)),Ut(t,e,t.Ce.bind(t,e,i)),Ut(t,e,t.ze.bind(t,e,n,r))])}(t.a.L,e.type,t.b.periods[i].startTime-e.stream.presentationTimeOffset,n,r),e.stream.initSegmentReference?(t=Qn(t,e.stream.initSegmentReference).then(function(t){if(!thind(t)).catch(function(t){return e.qb=!0,Promise.reject(t)}),Promise.all([i,t])):i):Promise.resolve()}(t,u,e,d.startTime,n?n.startTime:i),u.ya=!0,u.qb=!1,i=Qn(t,c),Promise.all([e,i]).then(function(t){if(!this.f&&!this.l)return e=this,i=u,n=l,r=d,a=h,o=c,s=t[1],a.containsEmsgBoxes&&(new ci).ba("emsg",e.de.bind(e,r,o)).parse(s),function(t,e,i){var n=Mt(t.a.L,e.type);return null==n||(i=i-n-t.h.bufferBehind)<=0?Promise.resolve():t.a.L.remove(e.type,n,n+i).then(function(){}.bind(t))}(e,i,n).then(function(){if(!this.f)return Nt(this.a.L,i.type,s,o.nction(){if(!this.f)return i.Ga=a,i.ka=o,Promise.resolve()}.bind(e));var e,i,n,r,a,o,s}.bind(t)).then(function(){this.f||this.l||(u.ya=!1,u.Vb=!1,u.sa||this.a.every(function(t){return"text"==t.type||!t.sa&&!=de(t.b,e);for(t.g[i]||Xn(t,i).then(function(){this.a.sc()}.bind(t)).catch(M),i=0;i<t.b.periods.length;++i)Xn(t,i).catch(M);t.a.Vd&&t.a.Vd()}}(this,h))}.bind(t)).catch(function(t){this.f||this.l||(u.ya=!1,"text"==u.type&&this.h.ignoreTextStreamFailures?delettion(t,e,i){if(!it(t.c).some(function(t){return t!=e&&t.Vb})){var n=Math.round(100*t.i);if(20<n)t.i-=.2;else{if(!(4<n))return e.Ua=!0,t.l=!0,t.a.onError(i);t.i-=.04}e.Vb=!0}tr(t,e,4)}(this,u,t):(u.Ua=!0,t.severity=2,ir(this,t)))}.bind(t))}(i,n,r,o,a),null):1)));null!=e&&(tr(this,t,e),t.Ua=!1)}catch(t){return void ir(this,t)}e=it(this.c),function(t,e)eam)&&(r=e.xa,(a=it(t.c)).every(function(t){return t.xa==r})&&a.every(Jn)&&Xn(t,r).then(function(){if(!this.f&&a.every(function(t){var e=de(this.b,t.stream);return Jn(t)&&t.xa==r&&e!=r}.bind(this))){var t,e=this.b.periods[r],i=this.a.tc(e),n={};for(t in i.variant&&i.variant.video&&(n.video=i.variant.video),i.variant&&i.variant.audio&&(n.audio=i.variant.audio),i.text&&(n.text=i.text),this.c)if(!n[t]&&"text"!=t)return void this.a.onError(new w(2,5,5005));for(t in n)if(!this.c[t]){if("text"!=t)return void this.a.onError(new w(2,5,5005));Kn(this,{text:n.text},e.startTime),delete n[t]}for(t in this.c)(e=n[t])?(qn(this,e,!1),tr(this,this.c[t],0)):delete this.c[t];this.a.sc()}}.bind(t)).catch(M))}}(this,t),e.every(funcen(function(){this.b.presentationTimeline.fa(this.a.L.T())}.bind(this))}var i,n,r,a,o,s,u,l},t.de=function(t,e,i){var n=i.o.Tb(),r=i.o.Tb(),a=i.o.B(),o=i.o.B(),s=i.o.B(),u=i.o.B(),l=i.o.Ma(i.o.G.byteLength-i.o.U());t=t.startTime+e.startTime+o/a,"urn:mpeg:dash:event:2012"==n?this.a.Jd():this.a.onEvent(new J("emsg",{detail:{startTime:t,endTime:t+s/a,schemeIdUri:n,value:r,timescale:a,presentationTimeDelta:o,eventDuration:s,id:u,messageData:l}})),i.oa.stop()},e("shaka.net.HttpPlugin",nr),B("http",nr,1),B("https",nr,1),or.prototype.a=function(t){t.createObjectStore("manifest-v2",{autoIncrement:!0}),t.createObjectStore("seprototype.a=function(t,e){function i(){s.clear(),o.clear()}function n(t,e,i){var n,r;r=(n=e).periods.map(function(t){!function(t){var e=[];e.push.apply(e,t.streams),t=e.filter(function(t){return"audio"==t.contentType});var i=e.filter(function(t){return"video"==t.contentType}),n=[];n.push.apply(n,t),n.push.apply(n,i);var r=e.every(function(t){return null==t.variantIds});{var a;e.every(functiotIds)&&null!=t}),r&&(e.forEach(function(t){t.variantIds=[]}),a=0,t.length&&i.length?t.forEach(function(e){i.forEach(function(t){e.variantIds.push(a),t.variantIds.push(a),a++})}):n.forEach(function(t){t.variantIds.push(a),a++}))}}(t);;return{startTime:t.startTime,endTime:t.endTime,dataKey:e}}),t=e.initSegmentUri?ur(e.initSegmentUri):null,{id:e.id,primary:e.primary,presentationTimeOffset:e.presentationTimeOffset,contentType:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,kind:e.kind,language:e.language,label:e.label,width:e.width,height:e.height,initSegmentKey:t,encrypted:e.encrypted,keyId:e.keyId,segments:i,variantIds:e.variantIds};var e,i});return{startTime:t.startTime,streams:e}}),e={originalManifestUri:n.originalManifestUri,duration:n.duration,size:n.size,expiration:n.expiration,periods:r,sessionIds:n.sessionIds,drmInfo:n.drmInfo,appMetadata:n.appMetadata},a.add(e,t).onsuccess=i}var r=t.createObjectStore("segment-v2"),a=t.createObjectStore("manifest-v2"),o=e.objectStore("segment"),s=e.objectStore("manifest){r.add({data:e.data},t).onsuccess=i},function(){rr(s,n,i)})},lr.prototype..c;return Promise.resolve().then(function(){return ar(e,t)}).tnction(){this.b&r.prototype.Ea=function(t){return dr(this,"manifest-v2",t)},yr.prototype.destroy=function(){var t=this.h,e=this.i,i=this.g||Promise.resolve();return e.length&&(i=i.then(function(){return fr(t,"segment-v2",e,null)})),this.b={},this.i=[],this.g=this.a=this.m=this.j=this.h=null,i},yr.prototype.s=function(t){this.c+=null==t.D?t.gc:t.D-t.N+1},(t=Cr.prototype).configure=function(){},t.start=function(t){var e,i=br(t);return null==i?Promise.reject(new w(2,1,9004,t)):(this.a=i,Or().then(function(t){return(e=t).Ea(i)}.bind(this)).then(fu},function(t){return e.destroy().then(function(){throw t})}))},t.stop=function(){return Promise.resolve()},t.update=function(){},t.onExpirationUpdated=function(n,r){var a,o=this.a;Or().then(function(t){return(a=t).Ea(o)}).then(function(t){if(t&&!(t.sessionIds.indexOf(n)<0)&&(null==t.expiration||t.expiration>r))r,i=t,pr(a,"manifest-v2","readwrite",function(t){t.put(i,e)});var e,i}).catch(function(){}).then(function(){return a.destroy()})},xi["application/x-offline-manifest"]=Cr,e("shaka.offline.OfflineScheme",Pr),Pr.a=function(t){return t={uri:t,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},Promise.resolve(t)},Pr.b=function(e,t){var i,n;return,"segment-v2",e)}).then(function(t){return n=t,i.destroy()}).then(function(){if(!n)throw new w(2,9,9003,e);return{uri:t,data:n.data,headers:{}}})},B("offline",Pr),e("shaka.text.SimpleTextDisplayer",xr)(Lr(this,function(t){return!(t.startTime>=i||t.endTime<=e)}),!0)},xr.prototype.append=function(t){for(var i=[],e=0;e<t.length;e++){var n=function(t){if(t.startTime>=t.endTime)return null;var e=new VTTCue(t.startTime,t.endTime,t.payload);e.lineAlign=t.lineAlign,e.positionAlign=t.positionAlign,e.size=t.size;try{e.align=t.textAlign}catch(t){}return"center"==t.textAlign&&"center"!=e.align&&(e.align="middle"),t.writingDirection==mo?e.vertical="lr":t.writingDirection==yo&&(e.vertical="rl"),t.lineInterpretation==vo&&(e.snapToLines=!1),null!=t.line&&(e.line=t.line),null!=t.position&&(=e.endTime?t.endTime-e.startTime:i.indexOf(e)-i.indexOf(t)}).forEach(function(t){this.a.addCue(t)}.bind(this))},xr.prototype.destroy=function(){return this.a&&Lr(this,function(){return 1}type.isTextVisible=function(){rextVisibility=funcomise.reject(this.h)):Promise.resolve(t)}.bind(this)),this},Ir.prototype.cancel=function(t){return this.c?Promise.resolve():(this.b=!0,this.h=t,this.j.forEach(function(t){t()}),this.i)},i(Dr),e("shaka.Player",Dr),Dr.prototype.destroy=function(){return this.F=!0,Mr(this).then(function(){var t=Promise.all([this.Ta,Vr(this),this.m?this.m.destroy():null,this.s?this.s.destroy():null]);return this.f=null,this.lb=!1,this.c=this.s=this.ourceopen",e.resolve),t.f.src=d.URL.createObjectURL(t.K),e}function Ur(e){if(e.i&&e.i.configure(e.c.manifest),e.l&&e.l.configure(e.c.drm),e.a){e.a.configure(e.c.streaming);try{e.b.periods.forEach(e.mb.bind(e))}catch(t){e.Pa(t)}var t=Un(e.a),i=Fn(e.a),n=jn(e.a);(t=le(t,i,n.variants))&&t.allowedByApplication&&t.allowedByKeySystem||$r(e,n)}e.h&&(e.h.configure(e.c.abr),e.c.abr.enabled&&!e.Ca?e.h.enable():e.h.disable())}function Fr(t){var i=[];return t.forEach(functngth?t.roles.forEach(function(t){i.push({language:e,sb:t})}):i.pus(i,function(t,e){return t.language==e.language&&t.sb==e.sb})}function Br(t,e,i){e.video&&Hr(t,e.video),e.audio&&Hr(t,e.audio);var n=Nn(t.a);e!=le(Un(t.a),Fn(t.a),n?n.variants:[])&&t.j.switchHistory.push({timestamp:Date.now()/1e3,id:e.id,type:"variant",fromAdaptation:i,bandwidth:e.bandwidth})}function Gr(t,e,i){Hr(t,e),t.j.switchHistory.push({timestamp:Date.now()/1e3,id:e.id,type:"text",fromAdaptation:i,bandwidth:null})}function Hr(t,e){var i=de(t.b,e);t.A[i]||(t.A[i]={}),t.A[i][e.type]=e.id}function Vr(t){t.m&&(t.m.ga(t.K,"sourceopen"),t.m.ga(t.f,"loadeddata"),t.m.ga(t.f,"playing"),t.m.ga(t.f,"pause"),t.m.ga(t.f,"ended")),t.f&&(t.f.removeAttribute("src"),t.f.load());var e=Promise.all([t.h?t.h.stop():null,t.l?t.l.destroy():null,t.J?t.J.destroy():null,t.g?t.g.destroy():null,t.w?t.w.destroy():null,t.a?t.a.destroy():null,t.i?t.i.stop():null,t.u?t.u.destroy():null]);return t.l=null,t.J=null,t.g=null,t.w=null,t.a=null,t.i=null,t.u=null,t.b=null,t.yb=null,t.ib=null,t.K=null,t.jb=[],t.A={},t.j=Kr(),e}function qr(){return{".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",serverCertificate:new Uint8Array(0)}}}function Wr(t){var e=5e5;return navigator.connection&&navigator.connection.type&&(e=1e6*navigator.connection.downlink),{drm:{retryParameters:P(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilmeters:P(),dash:{customScheme:function(t){if(t)return null},clockSyncUri:"",ignoreDrmInfo:!1,xlinkFailGracefully:!1}},streaming:{retryParameters:P(),failureCallback:t.ed.bind(t),rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,startAtSegmentBoundary:!1,smallGapLimit:.5,jumpLargeGaps:!1,durationBackoff:1},abrFactory:he,textDisplayFactory:function(t){return new xr(t)}.bind(null,t.f),abr:{enabled:!0,defaultBandwidthEstimate:e,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0}},preferredAudioLanguage:"",preferredTextLanguage:"",restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0}}function Kr(){return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,estimatedBandwidth:NaN,loadLatency:NaN,playTime:0,bufferingTime:0,switchHistory:[],stateHistory:[]}}function zr(t,e,i){t.Ca?(t.Sa=e,t.fc=i||!1):Vn(t.a,e,i||!1)}function Xr(t){var e;t.b&&(e=Date.now()/1e3,t.kb?t.j.bufferingTime+=e-t.fb:t.j.playTime+=e-t.fb,t.fb=e)}function Yr(t,e){return e&&e.length?(t.h.setVariants(e),t.h.chooseVariant()):(t.Pa(new w(2,4,4012)),null)}function $r(t,e){var i=ae(e,t.Qa,t.cb),e=oe(e,t.Ra,t.bb);(i=Yr(t,i))&&(Br(t,i,!0),zr(t,i,!0)),(e=e[0])&&t.Ib()&&(Gr(t,e,!0),t.Ca?t.W=e:qn(t.a,e,!0)),Jr(t)}function Jr(t){Promise.resolve().then(function(ction Zr(t){t.dispatchEvent(new J("texttrackvisibility"))}function ta(t){if(!t||t.constructor!=Dr)throw new w(2,9,9008);this.g=null,this.a=t,this.b=na(this.s=this.h=thidexedDB}function ia(t,l){function e(t){6013!=t.code&&(h=t)}var c=br(l);if(null==c)return Promise.reject(new w(2,9,9004,l));var d,i,h=null;return ra(t).then(function(){return sa(this),this.g.Ea(c)}.bind(t)).then(function(t){if(sa(this),!t)throw new w(2,9,9003,l);return t=Rr(d=t),(i=new bt({Wa:this.a.s,onError:e,Pb:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(this.a.getConfiguration().drm),i.init(t,this.b.usePersistentLicense||!1)}.bind(a=e;break}return Promise.all([t.remove(),e])}}.bind(this))}.bind(i)));var t}.bind(t)).then(function(){return i.destroy()}.bind(t)).then(function(){if(sa(this),h)throw h;return i=c,n=d,r=(e=this).b.progressCallback,a=_r(l,n),o=function(t){var e=[];return t.periods.forEach(function(t){t.streams.forEach(function(t){null!=t.gmentKey),t.segments.forEach(function(t){e.push(t.dataKey)})})}),e}(n),s=0,u=o.length+1,Promise.resolve().then(function(){return sa(this),fr(this.g,"segment-v2",o,t)}.bind(e)).then(function(){return sa(this),fr(this.g,"manifest-v2",[i],t)}.bind(e));function t(){r(a,++s/u)}var e,i,n,r,a,o,s,u}.bind(t))}function na(t)bind(t),progressCallback:function(t,e){if(t||e)return null},usePersistentLicense:!0}}function ra(t){if(!d.indexedDB)return Promise.reject(new w(2,9,9e3));if(t.g)return Promise.resolve();var i=t.a.s,n=t.a.getConfiguration().streaming.retryParameters;return Or().then(function(t){var e;this.g=t,this.c=new yr(t,i,n),e=this.c,t=function(t,e){var i=this.s;i.size=e,this.b.progressCallback(i,t)}.bind(this),e.l.push(t)}.bind(t))}function aa(t){var e=t.f?t.f.destroy():Promise.resolve();return t.f=null,t.h=null,t.l=!1,t.i=null,e}function oa(t,n,r,e){var a={id:n.id,primary:n.primary,presentationTimeOffset:n.presentationTimeOffset||0,contentType:n.type,mimeType:n.mimeType,codecs:n.codecs,frameRate:n.frameRate,kind:n.kind,language:n.language,label:n.label,width:n.width||null,height:n.height||null,initSegmentKey:null,encrypted:n.encrypted,keyId:n.keyId,segments:[],variantIds:[]};return null!=e&&a.variantIds.push(e),e=t.h.presentationTimeline.ja(),function(t,e,i){for(var n=null==(e=t.findSegmentPosition(e))?null:t.getSegmentReference(e);n;)i(n),n=t.getSegmentReference(++e)}(n,e,function(t)tion(t){a.segments.push({startTime:e,endTime:i,dataKey:t})})}.bi)&&gr(t.c,n.contentType,e,0,function(t){a.initSegmentKey=t}),a}function sw(2,9,9002)}Dr.registerSupportPlugin=function(t,e){jr[t]=e},Dr.isBrowserSupported=function(){return!!(d.Promise&&d.Uint8Array&&Array.prototype.forEach&&d.MediaSource&&MediaSource.isTypeSupported&&d.MediaKeys&&d.navigator&&d.navigator.requestMediaKeySystemAccess&&d.MediaKeySystemAccess&&d.MediaKeySystemAccess.prototype.getConfiguration)},Dr.probeSupport=function(){return e=[],n=[{videoCapabilities:t=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],persistentState:"required",sessionTypes:["persistent-license"]},{videoCapabilities:t}],r={},"org.w3.clearkey com.widevine.alpha com.microsoft.playready com.apple.fps.2_0 com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" ").forEach(function(i){var t=navigator.requestMediaKeySystemAccess(i,n).then(function(t){var e=!!(e=t.getConfiguration().sessionTypes)&&0<=e.indexOf("persistent-license");return 0<=navigator.userAgent.indexOf("Tizen 3")&&tState:e},t.createMediaKeys()}).catch(function(){r[i]=null});e.push(t)}),Promise.all(e).then(function(){return r}).then(function(t){var i,e;for(e in t={manifest:function(){var t,e={};for(t in xi)e[t]=!0;for(t in Li)e[t]=!0;return["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"].forEt]}),["mpd","m3u8","ism"].forEach(function(t){e[t]=!!Li[t]}),e}(),media:(i={},'video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="av1",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/e.isTypeSupported(t);var e=t.split(";")[0];i[e]=i[e]||i[t]}),i),drm:t},jr)t[e]=jr[e]();return t});var e,t,n,r},Dr.prototype.load=function(e,t,i){var n=this.vb(),r=new Ir;this.ha=r,this.dispatchEvent(new J("loading"));var a,o=Date.now();return(a=r.then(function(){return n}).then(function(){return this.j=Kr(),z(this.m,this.f,"playing",this.ab.bind(this)),z(this.m,this.f,"pause",this.ab.bind(this)),z(this.m,this.f,"ended",this.ab.bind(this)),this.h=new this.c.abrFactory,this.h.configure(this.c.abr),this.u=new this.c.textDisplayFactory,this.u.setTextVisibility(this.lb),Ii(e,this.s,this.c.manifest.retryParameters,i)}.bind(this)).then(function(t){return this.i=new t,this.i.configure(this.c.manifest),this.i.start(e,{networkingEngine:this.s,filterNewPeriod:this.mb.bind(this),filterAllPeriods:this.$b.bind(this),onTimelineRegionAdded:this.Xd.bind(this),onEvent:this.$a.bind(this),onError:this.Pa.bturn t.variants.some(function(t){return t.video&&t.audio})})&ants=t.variants.filter(function(t){return t.video&&t.audio})}),0==t.periods.length)throw new w(2,4,4014);return this.b=t,this.yb=e,this.l=new bt({Wa:this.s,onError:this.Pa.bind(this),Pb:this.Id.bind(this),onExpirationUpdated:this.Fd.bind(this),onEvent:this.$a.bind(this)}),this.l.configure(this.c.drm),this.l.init(t,!1)}.bind(this)).then(function(){this.$b(this.b.periods),this.fb=Date.now()/1e3,this.Qa=this.c.preferredAudioLanguage,this.Ra=this.c.preferredTextLanguage;var t=this.b.presentationTimeline.T(),e=this.c.playRangeEnd,i=this.c.playRangeStart;return 0<i&&(this.P()||this.b.presentationTimeline.Oc(i)),e<t&&(this.P()||this.b.presentationTimeline.fa(e)),Promise.all([function(t,e){if(!t.j)return X(t.f,e,"encrypted",function(){this.g(new w(2,6,6010))}.bind(t)),Promise.resolve();t.l=e,X(t.f,t.l,"play",t.Pd.bind(t));var i=(i=t.l.setMediaKeys(t.j)).catch(function(t){return Promise.reject(new w(2,6,6003,t.message))}),e=null;return t.b.serverCertificate&&t.b.serverCertificate.length&&(e=t.j.setServernction(t){return Promise.r.m.length||z(thction(t){return this.c?Promise.resolve():Promise.reject(t)}.bind(t))}(this.l,this.f),this.ib])}.bind(this)).then(function(){return this.h.init(this.Ge.bind(this)),this.g=new En(this.f,this.b,this.c.streaming,null==t?null:t,this.Ee.bind(this),this.$a.bind(this)),this.w=new xn(this.f,this.K,this.b,this.c.streaming,this.Rc.bind(this),this.$a.bind(this),this.De.bind(this)),this.J=new It(this.f,this.K,this.u),this.a=new Mn(this.b,{Ka:this.g,L:this.J,Wa:this.s,tc:this.Cd.bind(this),sc:this.ad.bind(this),onError:this.Pa.bind(this),onEvent:this.$a.bind(this),Jd:this.Kd.bind(this),Qb:this.Td.bind(this),filterNewPeriod:this.mb.bind(this),filterAllPeriods:this.$b.bind(this)}),this.a.configure(this.c.streaming),this.dispatchEvent(new J("streaming")),function(t){function i(t){return(t.video?t.video.codecs.split(".")[0]:"")+"-"+(t.audio?t.audio.codecs.split(".")[0]:"")}Each(function(t){var nction(e,i){Object.keys(e).forEach(function(t){i(t,e[t])})})(n,function(t,e){var i=0,n=0;e.forEach(function(t){i+=t.bandwidth||0,++n});e=i/n;e<a&&(r=t,a=e)}),tt){t.variants=t.variants.filter(function(t){return i(t)==r})})}(this),this.a.init()}.bind(this)).then(function(){var t,e,i;function n(t,e){if(!t)return null;e=t.findSegmentPosition(e-i.startTime);return null!=e&&(e=t.getSegmentReference(e))?e.startTime+i.startTime:null}this.c.streaming.startAtSegmentBoundary&&(a=kn((t=this).g),e=Un(t.a),r=Fn(t.a),i=jn(t.a),e=n(e,a),r=null!=(r=n(r,a))&&null!=e?Math.max(r,e):null!=r?r:null!=e?e:a,e=this.g,a=r,0<e.a.readyState?e.a.currentTime=Pn(e,a):e.m=a),this.b.periods.forEach(this.mb.bind(this)),Qr(this),Jr(this);var r,a=ae(r=jn(this.a),this.Qa,this.cb);this.h.setVariants(a),r.variants.some(function(t){return t.primary}),this.jb.forEach(this.w.s.bind(this.w)),this.jb=[],X(this.m,this.f,"loadeddata",function(){this.j.loadLatency=(Date.now()-o)/1e3}.bind(this)),this.ha=null}.bind(this))).function(t){return this.c=!0,this.l.forEach(function(t){t()}),Promise.resolve(t)}.bind(a),function(t){return this.c=!0,this.b?(this.g(),Promise.re,this.dispatchEvent(new J("unloading"))),Promise.reject(t)}.bind(this))},Dr.prototype.configure=function(t){L(this.c,ion(){var t=Wr(this);return L(t,this.c,Wr(this),qr(),""),t},Dr.prototype.resetConfiguration=Dr.prototype.se=function(){this.c=Wr(this),Ur(this)},Dr.prototype.getMediaElement=Dr.prototype.nd=function(){return this.f},Dr.prototype.getNetworkingEngine=Dr.prototype.oc=function(){return this.s},Dr.prototype.getManifestUri=Dr.prototype.nc=function(){return this.yb},Dr.prototype.isLive=Dr.prototype.P=function(){return!!this.b&&this.b.presentaunction(){return!!this.b&&this.b.presentationTimeline.wa()},Dr.prototype.isAudioOnly=Dr.prototype.yd=function(){if(!this.b||!this.b.periods.length)return!1;var t=this.b.periods[0].variants;return!!t.length&&!t[0].video},Dr.prototype.seekRange=Dr.prototype.ue=function(){var t=0,e=0;return this.b&&(t=(e=this.b.presentationTimeline).ja(),e=e.pb()),{start:t,end:e}},Dr.prototype.keySystem=function(){return this.l?this.l.keySystem():""},Dr.prototype.drmInfo=function(){return this.n=Dr.prototype.ob=function(){return this.l?this.l.ob():1/0},Dr.prototype.isBuffering=Dr.prototype.rc=function(){return this.kb},Dr.prototype.unload=Dr.prototype.vb=function(){return this.F?Promise.resolve():(this.dispatchEvent(new J("unloading")),Mr(this).then(funct(t).then(function(){this.F||(this}.bind(t)):Promise.resolve()).then(function(){this.Ta=null}.bind(this))),this.Ta}ate=Dr.prototype.Eb=function(){return this.g?this.g.Eb():0},Dr.prototype.trickPlay=Dr.prototype.Qe=function(t){this.g&&On(this.g,t),this.a&&Hn(this.a,1!=t)},Dr.prototype.cancelTrickPlay=Dr.prototype.bd=function(){this.g&&On(this.g,1),this.a&&Hn(this.a,!1)},Dr.prototype.getVariantTracks=Dr.prototype.wd=function(){if(!this.b||!this.g)return[];var t=ce(this.b,kn(this.g)),e=this.A[t]||{};return Zt(this.b.periods[t],e.audio,e.video)},Dr.prototype.getTextTracks=Dr.prototype.vd=function(){if(!this.b||!this.g)return[];var t=ce(this.b,kn(this.g));return te(this.b.periods[t],(this.A[t]||{}).text).filter(function(t){return this.gb.indexOf(t.id)<0}.bind(this))},Dr.prototype.selectTextTrack=Dr.prototype.xe=function(t){this.a&&(t=ie(jn(this.a),t))&&(Gr(this,t,!1),this.Ca?this.W=t:qn(this.a,t,!0))},Dr.prototype.selectVariantTrack=Dr.prototype.ye=function(t,e){var i;this.a&&(this.c.abr.enabled&&f("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack()."),(i=ee(i=jn(this.a),t))&&ne(i)&&(Br(this,i,!1),zr(this,i,e)))},Dr.prototype.getAudioLanguagesAndRoles=Dr.prototype.kd=function(){return this.a?Fr(re(jn(this.a).variants).map(function(t){return t.audio}).filter(N)):[]},Dr.prototype.getTextLanguagesAndRoles=Dr.prototype.ud=function(){return this.a?Fr(jn(this.a).textStreams):[]},Dr.prototype.getAudioLanguages=Dr.prototype.jd=function(){return this.a?re(jn(this.a).variants).map(function(t){return t.language}).filter(N):[]},Dr.prototype.getTextLanguages=Dr.prototype.td=function(){return this.a?jn(this.a).textStreams.map(function(t){return t.language}).filter(N):[]},Dr.prototype.selectAudioLanguage=Dr.prototype.ve=function(t,e){var i;this.a&&(i=jn(this.a),this.Qa=t,this.cb=e||"",$r(this,i))},Dr.prototype.selectTextLanguage=Dr.prototype.we=function(t,e){var i;this.a&&(i=jn(this.a),this.Ra=t,this.bb=e||"",$Ib=function(){return this.u?this.u.isTextVisible():this.lb},Dr.prototype.setTextTrackVisibility=Dr.prototype.Be=function(t){this.u&&this.u.setTextVisibility(t),this.lb=t,Zr(this),this.a&&(t?(t=oe(t=jn(this.a),this.Ra,this.bb)[0],Gn(this.a,t)):((t=this.a).w=!0,t.c.text&&(er(t.c.text),delete t.c.text)))},Dr.prototype.getPlayheadTimeAsDate=Dr.prototype.pd=function(){return this.b?new Date(1e3*this.b.presentationTimeline.c+1e3*this.f.currentTime):null},Dr.prototype.getPresentationStartTimeAsDate=Dr.prototype.rd=function(){return this.b?new Date(1e3*this.b.presentationTimeline.c):null},Dr.prototype.getBufferedInfo=Dr.prototype.Cb=function(){return this.J?this.J.Cb():{total:[],audio:[],video:[],text:[]}},Dr.prototype.getStats=function(){Xr(this),this.ab();var t,e,i=null,n=null,r=(r=this.f)&&r.getVideoPlaybackQuality?r.getVideoPlaybackQuality():{};return this.g&&this.b&&(t=ce(this.b,kn(this.g)),e=this.b.periods[t],(t=this.A[t])&&(i=(n=function(t,e,i){function n(t,e){return null==t?null==e:e.id==t}for(var r=0;r<i.length;r++)if(n(t,i[r].audio)&&n(e,i[r].video))return i[r];return null}(t.audio,t.video,e.variants)).video||{})),{width:(i=i||{}).width||0,height:i.height||0,streamBandwidth:(n=n||{}).bandwidth||0,decodedFrames:Number(r.totalVideoFrames),droppedFrames:Number(r.droppedVideoFrames),estimatedBandwidth:this.h?this.h.getBandwidthEstimate():NaN,loadLatency:this.j.loadLatency,playTime:this.j.playTime,bufferingTime:this.j.bufferingTime,switchHistory:I(this.j.switchHistory),stateHistory:I(this.j.stateHistory)}},Dr.prototype.addTextTrack=function(e,i,n,t,r,a){if(!this.a)return Promise.reject();for(var o,s=jn(this.a),u=0;u<this.b.periods.length;u++)if(this.b.periods[u]==s){if(u==this.b.periods.length-1){if(1/0==(o=this.b.presentationTimeline.T()-s.startTime))return Promise.reject()}else o=this.b.periods[u+1].startTime-s.startTime;break}var l={id:this.Yc++,createSegolve.bind(Promise),feturn 1!=t?null:new ai(1,0,o,function(){return[e]},0,null)},initSegmentReference:null,presentationTimeOffset:0,mimeType:t,codecs:r||"",kind:n,encrypted:!1,keyId:null,language:i,label:a||null,type:"text",primary:!1,trickModeVideo:null,containsEmsgBoxes:!1,roles:[],channelsCount:null};return this.gb.push(l.id),s.textStreams.push(l),Gn(this.a,l).then(function(){if(!this.F){var t=this.b.periods.indexOf(s),e=Bn(this.a,"text");return e&&(this.A[t].text=e.id),this.gb.splice(this.gb.indexOf(l.id),1),$r(this,s),Qr(this),{id:l.id,active:!1,type:"text",bandwidth:0,language:i,label:a||null,kind:n,width:null,height:null}}}.bind(thrototype.Yb=function(t,e){this.hb.width=t,this.hb.height=e},Dr.prototype.retryStreaming=Dr.prototype.Kc=function(){if(this.a){var t=this.a;if(t.f)t=!1;else if(t.l)t=!1;else{for(var e in t.c){e=t.c[e];e.Ua&&(e.Ua=!1,tr(t,e,.1))}t=!0}}else t=!1;return t},Dr.prototype.getManifest=Dr.prototype.Ea=function(){return this.b},(t=Dr.prototype).ed=function(t){this.P()&&0<=[1001,1002,1003].indexOf(t.code)&&(t.severity=1,this.Kc())},t.$b=function(t){t.forEach(Xt.bind(null,this.l,tnull));var e,it.variants.some(ne)},i=0,t.forEach(function(t){i+=e(t)?1:0}),i);if(!n)throw new w(2,4,9009);if(n<t.length)throw new w(2,4,4011);t.forEach(function(t){if(zt(t,this.c.restrictions,this.hb)&&this.a&&jn(this.a)==t&&Qr(this),!t.variants.some(ne))throw new w(2,4,4012)}.bind(this))},t.mb=function(t){Xt(this.l,this.a?Un(this.a):null,this.a?Fn(this.a):null,t);var e=t.variants,i=e.some(ne);if(zt(t,this.c.restrictions,this.hb)&&this.a&&jn(this.a)==t&&Qr(this),t=e.some(ne)},t.Fe=function(t,e){this.h&&this.h.segmentDownloaded(t,e)},t.Rc=function(t){var e;Xr(this),this.kb=t,this.ab(),!this.g||t!=(e=this.g).j&&(e.j=t,On(e,e.i))ew J("buffering",{buffering:t}))},t.De=function(){Qr(this)},t.ab=function(){if(!this.F){var t=this.kb?"buffering":this.f.ended?"ended":this.f.paused?"paused":"playing",e=Date.now()/1e3;if(this.j.stateHistory.length){var i=this.j.stateHistory[this.j.stateHistory.length-1];if(i.duration=e-i.timestamp,t==i.state)return}this.j.stateHistory.push({timestamp:e,state:t,duration:0})}},t.Ee=function(){var t,i;this.w&&(t=this.w).c.forEach(t.m.bind(t,!0)),this.a&&(t=this.a,i=kn(t.a.Ka),Object.keys(t.c).every(function(t){var e=this.a.L;return t="text"==t?(t=e.a,i>=t.a&&i<t.b):At(t=jt(e,t),i)}.bind(t))||Wn(t))},t.Cd=function(t){this.Ca=!0,this.h.disable();var e={audio:!1,text:!1},i=ae(t,this.Qa,this.cb,e);return t=oe(t,this.Ra,this.bb,e),i=Yr(this,i),t=t[0]||null,this.W=this.Sa=null,i&&Br(this,i,!0),t&&(Gr(this,t,!0),!Nn(this.a)&&i&&i.audio&&e.text&&t.language!=i.audio.language&&(this.u.setTextVisibility(!0),Zr(this))),this.Ib()?{variant:i,text:t}:{variant:i,text:null}},t.ad=function(){this.Ca=!1,this.c.abr.enabled&&this.h.enable(),this.Sa&&(Vn(this.a,this.Sa,this.fc),thil)},tdate&&this.i.update()},t.Td=function(){this.g&&this.g.Qb()},t.Ge=function(t,e){Br(this,t,!0),this.a&&(Vn(this.a,t,e||!1),Jr(this))},t.Pa=function(t){var e;this.F||(e=new J("error",{detail:t}),this=!0))t):this.jb.push(t)},t.$a=function(t){this.dispatchEvent(t)},t.Yd=function(){var t,e;!this.f.error||1!=(t=this.f.error.code)&&((e=this.f.error.msExtendedCode)&&(e<0&&(e+=Math.pow(2,32)),e=e.toString(16)),this.Pa(new w(2,3,3016,t,e,this.f.error.message)))},t.Id=function(n){var r=["output-restricted","internal-error"],t=jn(this.a),a=!1,e=Object.keys(n),o=1==e.length&&"00"==e[0];e.length&&t.variants.forEach(function(i){var t=[];i.audio&&t.push(i.audio),i.video&&t.push(i.video),t.forEach(function(t){var e=i.allowedByKeySystem;t.keyId&&(t=n[o?"00":t.keyId],i.allowedByKeySystem=!!t&&r.indexOf(t)<0),e!=i.allowedByKeySystem&&(a=!0)})}),(e=le(Un(this.a),Fn(this.a),t.variants))&&!e.allowedByKeySystem&&$r(this,t),a&&Qr(this)},t.Fd=function(t,e){this.i&&this.i.onExpirationUpdated&&this.i.onExpirationUpdated(t,e),this.dispatchEvent(new J("expirationupdated"))},e("shaka.offline.Storage",ta),ta.support=ea,ta.prototype.destroy=function(){var atch(function(){}).then(function(){if(t)return t.destroy()}):Promise.resolve();returnprototype.configure=function(t){L(this.b,t,na(this)pe.store=ta.prototype.Oe=function(c,t,d){function h(t){i=t}if(this.l)return Promise.reject(new w(2,9,9006));this.l=!0;var e=t||{},i=null;return ra(this).then(function(){return sa(this),i=c,n=h,r=d,u=(t=this).a.s,l=t.a.getConfiguration(),Ii(i,u,l.manifest.retryParameters,r).then(function(t){return sa(this),(s=new t).configure(l.manifest),s.start(i,{networkingEngine:u,filterAllPeriods:this.j.bind(this),filterNewPeriod:this.m.bind(this),onTimelineRegionAdded:function(){},onEvent:function(){},onError:n})}.bind(t)).then(function(t){return sa(this),a=t,(o=new bt({Wa:u,onError:n,Pb:e,onExpirationUpdated:function(){},onEvent:function(){}})).configure(l.drm),o.init(a,this.b.usePersistentLicense||!1)}.bind(t)).then(function(){return sa(this),e=(t=a).preturn t.audio&&e.push(t.audio),t.video&&e.push(t.video),e}).reduce(D,[]).filter(N),t=t.periods.map(function(t){return t.texromise.all(e.map(function));var t,e}.bi),_t(o)}.bind(bind(t)).then(f(s.stop().then(function(){throw t});throw t});function e(){}var t,i,n,r,a,o,s,u,l}.bind(this)).then(function(t){if(sa(this),i)throw i;return function(t,e,i,n,r){if(i.presentationTimeline.P()||i.presentationTimeline.wa())throw new w(2,9,9005,e);t.h=i,t.f=r,t.j(i.periods),t.s=function(t,e,i){var n=null==e.expiration?1/0:e.expiration;return{offlineUri:null,originalManifestUri:t,duration:e.presentationTimeline.T(),size:0,expiration:n,tracks:e=Qt(e.periods[0]),appMetadata:i}}(e,i,n);var a=ftion(t){return t.a.map(function(t){return t.ea.sessionId})}(t.f);if(r&&t.b.usePersistentLicense){if(!a.length)throw new w(2,9,9007,e);r.initData=[]}return{originalManifestUri:e,duration:t.h.presentationTimeline.T(),size:0,expiration:t.f.ob(),periods:n,sessionIds:t.b.usePersistentLicense?a:[],drmInfo:r,appMetadata:i}}(t,e,n);return vr(t.c,a).then(function(t){return _r("offline:manifest/"+t,a)})}(this,c,t.manifest,e,t.fd)}.bind(this)).then(function(t){return sa(this),aa(this).then(function(){return t})function(t){return i=i||t,aa(this).then(function(){throw i})}.bind(this))},ta.prototype.remove=function(t){return t.offlineUri?(f("Removing downloaded content using shakaExtern.StoredContent is deprecated. Please remove using the offline uri."),ia(this,t.offlineUri)):ia(this,t)},ta.prototype.list=function(){var i=[];return ra(this).then(function(){return sa(this),cr(this.g,function(t,e){t/"+t,e);i.push(e)})}.bind(this)).then(function(){return i})},ta.prototype.u=function(t){for(var e,i=[],n=qt(this.a.getConfiguration().preferredAudioLanguage),r=[0,Ht,Vn a.filter(function(t){return t=qt(t.language),Gt(e,n,t)})}),o=0;o<r.length;o++)if(r[o].length){e=r[o];break}e||(r=a.filter(function(t){return t.primary})).length&&(e=r),e||(e=a).map(function(t){return t.language}).filter(N);var s=e.filter(function(t){return t.height&&t.height<=480});return s.length&&ight}),e=s.filter(function(t){return t.height==s[0].height})),e.sort(function(t,e){return t.bandwidth-e.bandwidth}),e.length&&i.push(e[Math.floor(e.length/2)]),i.push.apply(i,t.fi},ta.prototype.j=function(t){t.forEach(this.m.bind(this))},ta.prois.i||(e=this.i.filter(function(t){return"variant"==t.type})[0])&&(i=ee(t,e));var n=e=null;i&&(i.audio&&(e=i.audio),i.video&&(n=i.video)),Xt(this.f,e,n,t),zt(t,this.a.getConfiguration().restrictions,{width:1/0,height:1/0})},ta.prototype.w=function(t){var e,i=Zt(t,null,null),n=te(t,null),i=this.b.trackSelectionCallback(i.concat(n));for(this.i||(this.i=i,this.j(this.h.periods)),n=i.length-1;0<n;--n){for(var r=!1,a=n-1;0<=a;--a)if(i[n].type==i[a].type&&i[n].kind==i[a].kind&&i[n].language==i[a].language){r=!0;break}if(r)break}for(r=[],n=0;n<i.length;n++)(e=ee(t,i[n]))?(e.audio&&((a=r.filter(function(t){return t.id==e.audio.id})[0])?a.variantIds.push(e.id):(a=e.video?e.bandwidth/2:e.bandwi,e.video&&((a=r.filter(function(t){return t.id==e.video.id})[0])?a.variantIds.push(e.id):(a=e.audio?e.bandwidth/2:e.bandwidth,r.push(oa(this,e.video,a,e.id))))):r.push(oa(this,ie(t,i[n]),0));return{startTime:t.startTinstallAll",functth;++t)ca[t]()});var ua,la,ca=[];function da(t){ca.push(t)}function ha(t){var e,i=t.type.replace(/^(webkit|moz|MS)/,"").toLowerCase();"function"==typeof Event?e=new Event(i,t):(e=document.createEvent("Event")).initEvent(i,t.bubbles,t.cancelable),t.target.dispatchEvent(e)}function fa(t,e,i){"input"==t&&"range"===this.type&&(t="change"),ua.call(this,t,e,i)}function pa(t){this.f=[],this.b=[],thisturn Promise.resolve(i)}catch(t){return Promise.reject(t)}}function ya(t,e){this.keySystem=t;for(var i=!1,n=0;n<e.length;++n){var r=e[n],a={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:r.initDataTypes,sessionTypes:["temporary"],label:r.label},o=!1;if(r.audioCapabilities)for(var s=0;s<r.audioCapabilities.length;++s){var u,l=r.audioCapabilities[s];l.contentType&&(o=!0,u=l.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,u)&&(a.audioCapabilities.push(l),i=!0))}if(r.videoCapabilities)for(s=0;s<r.videoCapabilities.length;++s)(l=r.videoCapabilities[s]).contentType&&(o=!0,u=l.contentType.split(";")[0],MSMediaKeys.isTypeSupported(this.keySystem,u)&&(a.videoCapabilities.push(l),i=!0));if(o||(i=MSMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),i="required"==r.persistentState?!1:i)return void(this.a=a)}throw(r=Error("Unsupported keySystem")).name=e()}function va(t){this.a=new MSMediaKeys(t),this.b=new K}function ba(t,e){if(Y(t.b),!e)return Promise.resolve();z(t.b,e,"msneedkey",Ta);var i=t;try{return 1<=e.readyStatetMediaKeys(i.a),e.removeEventListener("loadedmetadatas.expiration=NaN,this.closed=new O,this.keyStatuses=new Sa}function Ta(t){var e=document.createEvent("CustomEvent");e.initCustomEvent("encrypted",!1,!1,null),e.initDataType="cenc";var i=t.initData;if(i){var n=new pa(i);if(n.a.length<=1)t=i;else{var r=[];for(t=0;t<n.a.length;t++)r.push(i.subarray(n.a[t].start,n.a[t].end+1));for(i=H(r,wa),t=n=0;t<i.length;t++)n+=i[t].length;for(n=new Uint8Array(n),t=r=0;t<i.length;t++)n.set(i[t],r),r+=ita=t,this.dispatchEvent(e)}function wa(t,e){return gt(t,e)}function Ea(t,e){var i=t.keyStatuses;i.size=nuect(Error("MediaKeys not supported.")):Promise.resolve(}function Ca(){throw new TypeError("Illegal constructor.")}e("shaka.polyfill.register",da),da(function(){var t;d.Document&&((t=Element.prototype).requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitExitFullscreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElementment.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",ha),document.addEventListener("webkitfullscreenerror",ha),document.addEventListener("mozfullscreenchange",ha),document.addEventListener("mozfullscreenerror",ha),document.addEventListener("MSFullscreenChange",tor.userAgent;t&&0<=t.indexOf("CrKey")&&delete d.indexedDB}),da(function(){navigator.userAgent.indexOf("Trident/")<0||HTMLInputElement.prototype.addEventListener==fa||(ua=HTMLInputElement.prototype.addEventListener,HTMLInputElement.prototype.addEventListener=fa)}),da(function(){var i;4503599627370497!=Math.round(4503599627370497)&&(i=Math.round,Math.round=function(t){var e=t;return e=t<=4503599627370496?i(t):e})}),pa.prototype.c=function(t){if(!(1<t.version)){var e=yt(t.o.Ma(16)),i=[];if(0<t.version)for(var n=t.o.B(),r=0;r<n;++r){var a=yt(t.o.Ma(16));i.push(a)}n=t.o.B(),t.o.H(n),this.b.push.apply(this.b,i),this.f.push(e),this.a.push({start:t.start,end:t.start+t.size-1})}},ya.prototype.createMediaKeys=function(){var t=new va(this.keySystem);return Promise.resolve(t)},ya.prototype.getConfigu" is unsupported on this platform.");return new _a(this.a)},va.prototype.setServerCertificate=function(){return ,"status-pending")}catch(t){this.a.reject(t)}return this.a},t.load=function(){return Promise.rejectnew Uint(this.f)}tent licenses, which are not supported on this platform"))},t.Od=function(t){this.a&&(this.a.resolve(),this.a=null),this.dispatchEvent(new J("message",{messageType:null==this.keyStatuses.a?"license):this,"output-not-allowed");default:Ea(this,"internal-error")}},(t=Sa.prototype).forEach=function(t){this.a&&t(this.a,la)},t.get=function(t){if(this.has(t))return this.a},t.has=function(t){var e=la;return!(!this.a||!gt(new Uint8Array(t),new Uint8Array(e)))},t.entries=function(){},t.keys=function(){},t.values=function(){},Oa.prototype.createSession=function(){},Oa.prototype.setServerCertificate=function(){},Ca.prototype.getConfiguration=functionLa(t){return Pa?Pa+t.charAt(0).toUpperCase()+t.slice(1):t}function Ia(t,e){try{var i=new Ma(t,e);rmediaKeys,(this.mediaKeys=t)&&Na(t,this),Promise.resolve()}function Ma(t,e){var i=!1;"org.w3.clearkey"==(this.a=this.keySystem=t)&&(i=!(this.a="webkit-org.w3.clearkey"));for(var n=!1,r=(o=document.getElementsByTagName("video")).length?o[0]:document.createElement("video"),a=0;a<e.length;++a){var o,s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(o=e[a]).initDataTypes,sessionTypes:["temporary"],label:o.label},u=!1;if(o.audioCapabilities)for(var l=0;l<o.audioCapabilities.length;++l){var c,d=o.audioCapabilities[l];d.contentType&&(u=!0,c=d.contentType.split(";")[0],r.canPlayType(c,this.a)&&(s.audioCapabilities.push(d),n=!0))}if(o.videoCapabilities)for(l=0;l<o.videoCapabilities.length;++l)(d=o.videoCapabilities[l]).contentType&&(u=!0,r.canPlayType(d.contentType,this.a)&&(s.videoCapabilities.push(d),n=!0));if(u||(n=r.canPlayType("video/mp4",this.a)||r.canPlayType("video/webm",this.a)),"required"==o.persistentState&&(i?(s.persistentState="required",s.sessionTypes=["persistent-license"]):n=!1),n)return void(this.b=s)}throw i="org.w3.clearkey"!=t&&"com.widevine.alpha"!=t?"Unsupported keySystem":"None of the requested configurations were supported.",(i=Error(i)).name=xpiration=NaN,this.closed=new O,this.keyStatuses=new Ha}function Ba(e,t,i){if(e.h)return Promise.reject(Error("The session is already initialized."));e.h=!0;try{var n,r,a="persistent-license"==e.g?i?new Uint8Array(ut("LOAD_SESSION|"+i)):(n=ut("PERSISTENT|"),(r=new Uint8Array(n.byteLength+t.byteLength)).set(new Uint8Array(n),0),r.set(new Uint8Array(t),n.byteLength),r):new Uint8Array(t)}catch(t){return Promise.reject(t)}e.b=new O;var o=La("generateKeyRequest");try{e.f[o](e.c,a)}catch(t){if("InvalidStatethis.f[o](this.c,a)}catch(t){this.b.reject(t),this.b=null}}.bind(e),10)}return e.b}function Ga(t,e){var i=t.keyStatuses;i.size=null==e?0:1,i.a=e,t.dispatchEvent(new J("kis.la.bind(this),this.a.b=function(){var t=new ja(this.a);return Promise.resolve(t)},Ma.prototype.getConfiguration=function(){return this.b},(t=ja.prototype).createSession=function(t){var e=t||"temporary";if("temporary"!=e&&"persistent-license"!=e)throw new TypeError("Session type "+t+" is unsupported on this platform.");return(t=this.b||document.createElement("video")).src||(t.src="about:blank"),e=setSeaType="webm",e.initData=t.initData,this.b.dispatchEvent(e)},t.ae=function(t){var e=Ua(this,t.sessionId);e&&(t=new J("message",{messageType:null==e.keyStatuses.a?"licenserequest":"licenserenewal",message:t.messag.sessionId))&&(Ga(t,"usable"),t.a&&t.a.resolve(),t.a=null)},t.$d=function(t){var e,i=Ua(this,t.sessionId);i&&((e=Error("EME v0.1b key error")).errorCode=t.errorCode,e.errorCode.systemCode=t.systemCode,!t.sessionId&&i.b?(e.method="generateRequest",45==t.systemCode&&(e.message="Unsupported session type."),i.b.reject(e),i.b=null):t.sessionId&&i.a?(e.method="update",i.a.reject(e),i.a=null):(e=t.systemCode,t.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Ga(i,"output-restricted"):Ga(i,1==e?"expired":"internal-error")))},i(Fa),(t=Fa.prototype).ac=function(t,e){if(this.a)this.a.then(this.ac.bind(this,t,e)).catch(this.ac.bind(this,t,e));else{var i;this.a=t;var n="webkit-org.w3.clearkey"==this.c?(i=at(e),"oct"!=(n=JSON.parse(i)).keys[0].kty&&(this.a.reject(Error("Response is not a valid JSON Web Key Set.")),this.a=null),i=pt(n.keys[0].k),pt(n.keys[0].kid)):(i=new Uint8Array(e),null),e=La("addKey");try{this.f[e](this.c,i,n,this.sessionId)}}},t.gnull,t):P))},t.upionId)}case.reject(Error("Not a pe,(t=Hathis.areturn!(!this.a||!gt(new Uint8Array(t),new Uint8Array(e)))},t.entriesetMediaKeys=Aa,d.MediaKeys=Oa,d.MediaKeySystemAccess=Ca))}),da(function(){var t,i,n,e,r,a,l,c;d.MediaSource&&(d.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(l=MediaSource.isTypeSupported,c=/^dv(?:he|av)\./,MediaSource.isTypeSupported=function(t){for(var e,i,n=t.split(/ *; */),r=n[0],a={},o=1;o<n.length;++o)i=(e=n[o].split("="))[0],e=e[1].replace(/"(.*)"/,"$1"),a[i]=e;if(!(e=a.codecs))return l(t);var s=!1,u=!1;for(i in t=e.split(",").filter(function(t){return c.test(t)?!(u=!0):(/^(hev|hvc)1\.2/.test(t)&&(s=!0),!0)}),u&&(s=!1),a.codecs=t.join(","),s&&(a.eotf="smpte2084"),a)e=a[i],r+="; "+i+'="'+e+'"';return cast.__platform__.canDisplayType(r)}):navigator.vendor&&0<=navigator.vendor.indexOf("Apple")&&(t=navigator.appVersion(t){return"mp2t"!=t.split(/ *; */)[0].split("/")[1]&&a(t)},0<=t.indexOf("Version/8")?d.MediaSource=null:0<=t.indexOf("Version/9")?Va():0<=t.indexOf("Version/10")?(Va(),n=MediaSource.prototype.endOfStream,e=!(MediaSource.prototype.endOfStream=function(){for(var t,e=0,i=0;i<this.sourceBuffers.length;++i)t=(t=this.sourceBuffers[i]).buffered.end(t.buffered.length-1),e=Math.max(e,t);if(!isNaN(this.duration)&&e<this.duration)for(this.pc=!0,i=0;i<this.sourceBuffers.length;++i)(t=this.sourceBuffers[i]).jc=!1;return n.apply(this,arguments)}),r=MediaSource.prototype.addSourceBuffer,MediaSource.prototype.addSourceBuffer=function(){var t=r.apply(this,arguments);return t.mediaSource_=this,t.addEventListener("updateend",qa,!1),e||(this.addEventListener("sourceclose",Wa,!1),e=!0),t}):0<=t.indexOf("Version/11")&&(Va(),i=rototype.remov(){return t})}function Ya(t){var e=new Ka;return e.a(t),e}function $a(t){function e(t,e,i){t.Aa==za&&(r[e]=i,++n==r.length&&t.la(r))}var i=new Ka;if(!t.length)return i.la([]),i;for(var n=0,r=Array(t.length),a=i.a.bind(i),o=0;o<t.length;++o)t[o]&&tlength;++r)t[r]&&t[r].then?t[r].then(i,n):i(t[r]);return e}function Qa(t,i,n){no.push(function(){if(n&&"function"==typeof n){try{var t=n(this.f)}catch(t){return void i.a(t)}try{var e=t&&t.then}catch(t){return void i.a(t)}t instanceof Ka?t==i?i.a(new TypeError("Chaining cycle detected")):t.then(i.la.bind(i),i.a.bind(i)):e?function i(t,e,n){try{var r=!1;e.call(t,function(t){if(!r){r=!0;try{var e=t&&t.then}catch(t){return void n.a(t)}e?i(t,e,n):n.la(t)}},n.a.bind(n))}catch(t){n.a(t)}}(t,e,i):i.la(t)}else 1==this.for(var e=0;e<t.length;++e)t[e]a:this.c.push({M:i,zb:t}),this.b.push({M:i,zb:e})}return i},Ka.prototype.catch=function(t){return this.then(void 0,t)},Ka.prototype.la=function(t){if(this.Aa==za){for(this.f=t,this.Aa=1,t=0;t<this.c.length;++t)Qa(this,thi++t)Qa(this,this.boo(t,e,i){return new d.TextTrackCue(t+"-"+e+"-"+i,t,e,i)}function so(t,e,i){this.startTime=t,this.endTime=e,this.payload=i,this.region={x:0,y:0,width:100,height:100},this.position=null,this.positionAlign=uo,this.size=100,this.textAlign=lo,this.writingDirection=po,this.lineInterpretation=go,this.line=null,this.lineHeight="",this.lineAlign=bo,this.displayAlign=ho,this.fontSize=this.backgroundColor=this.color="",this.fontWeight=To,this.fontStyle=wo,this.fontFamily="",this.textDecoration=[],this.wrapLine=!0,this.id=""}da(function(t){eo=d.setImmediate?(to=function(t){return d.seearImmediate(t)}):(to=function(t){return d.setTimeout(t,0)},function(t){return d.clearTimeout(t)}),d.Promise&&!t||(d.Promise=Ka,d.Promise.resolve=Xa,d.Promise.reject=Ya,d.Promise.all=$a,d.Promise.race=Ja,d.Promise.prototype.then=Ka.prototype.then,d.Promise.prototype.catch=Ka.prototype.catch)}),da(function(){var e;d.HTMLMediaElement&&(e=HTMLMediaElement.prototype.play,HTMLMediaElement.prototype.play=function(){var t=e.apply(this,arguments);return t&&t.catch(function(){}),t})}),da(function(){var t;!d.HTMLVideoElement||!(t=HTMLVideoElement.prototype).getVideoPlaybackQuality&&"webkitse{try{var e=!!ao(1,2,"")}catch(t){e=!1}e&&(d.VTTCue=ao)}}}),e("shaka.text.Cue",so);var uo="auto";so.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:uo};var lo="center",co={LEFT:"left",RIGHT:"right",CENTER:lo,START:"start",END:"end"};so.textAlign=co;var ho="before",fo={BEFORE:ho,CENTER:"center",AFTER:"after"};so.displayAlign=fo;var po=0,mo=2,yo=3;so.writingDirection={HORIZONTAL_LEFT_TO_RIGHT:po,HORIZONTAL_RIGHT_TO_LEFT:1,VERTICAL_LEFT_TO_RIGHT:mo,VERTICAL_RIGHT_TO_LEFT:yo};var go=0,vo=1;so.lineInterpretation={LINE_NUMBER:go,PERCENTAGE:vo};var bo="center",_o={CENTER:bo,START:"start",END:"end"};so.lineAlign=_o;var To=400;so.fontWeight={NORMAL:To,BOLD:700};var wo="normal",Eo={NORMAL:wo,ITALIC:"italic",OBLIQUE:"oblique"};function So(){}so.fontStyle=Eo,so.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},So.prototype.parseInit=function(){},So.prototype.parseMedia=function(t,e){var i=at(t),n=[],r=new DOMParser,a=null;try{a=r.parseFromString(i,"text/xml")}catch(t){throw new w(2,2,2005)}if(a){var o=a.getElementsByTagName("tt")[0];if(!o)throw new w(2,2,2005);var r=o.getAttribute("ttp:frameRate"),a=o.getAttribute("ttp:subFrameRate"),s=o.getAttribute("ttp:frameRateMultiplier"),u=o.getAttribute("ttp:tickRate");if("default"!=(i=o.getAttribute("xml:space")||"default")&&"preserve"!=i)throw new w(2,2,2005);for(i="default"==i,r=new Vo(r,a,s,u),a=Mo(o.getElementsByTagName("styling")[0]),s=Mo(o.getElementsByTagName("layout")[0]),o=Mo(o.getElementsByTagName("body")[0]),u=0;u<o.length;u++){var l=o[u],c=e.periodStart,d=r,h=a,f=s,p=i;if(l.hasAttribute("begin")||l.hasAttribute("end")||!/^\s*$/.test(l.textContent)){!function t(e,i){for(var n=e.childNodes,r=0;r<n.length;r++){var a;"br"==n[r].nodeName&&0<r?n[r-1].textContent+="\n":0<n[r].childNodes.length?t(n[r],i):i&&(a=(a=n[r].textContent.trim()).replace(/\s+/g," "),n[r].textContent=a)}}(l,p);var p=Go(l.getAttribute("begin"),d),m=Go(l.getAttribute("end"),d),d=Go(l.getAttribute("dur"),d),y=l.textContent;if(null==m&&null!=d&&(m=p+d),null==p||null==m)throw new w(2,2,2001);c=new so(p+c,m+c,y),p=Bo(l,"region",f),f=c,"rtl"==No(l,p,h,"tts:direction")&&(f.writingDirection=1),"tb"==(m=No(l,p,h,"tts:writingMode"))||"tblr"==m?f.writingDirection=mo:"tbrl"==m?f.writingDirection=yo:"rltb"==m||"rl"==m?f.writingDirection=1:m&&(f.writingDirection=po),(m=No(l,p,h,"tts:origin"))&&(m=xo.exec(m))&&(f.region.x=Number(m[1]),f.region.y=Number(m[2])),(m=No(l,p,h,"tts:extent"))&&(m=xo.exec(m))&&(f.region.width=Number(m[1]),f.region.height=Number(m[2])),(m=No(l,p,h,"tts:textAlign"))&&(f.positionAlign=Do[m],f.lineAlign=Io[m],f.textAlign=co[m.toUpperCase()]),(m=No(l,p,h,"tts:displayAlign"))&&(f.displayAlign=fo[m.toUpperCase()]),(m=No(l,p,h,"tts:color"))&&(f.color=m),(m=No(l,p,h,"tts:backgroundColor"))&&(f.backgroundColor=m),(m=No(l,p,h,"tts:fontFamily"))&&(f.fontFamily=m),(m=No(l,p,h,"tts:fontWeight"))&&"bold"==m&&(f.fontWeight=700),(m=No(l,p,h,"tts:wrapOption"))&&"noWrap"==m&&(f.wrapLine=!1),(m=No(l,p,h,"tts:lineHeight"))&&m.match(Lo)&&(f.lineHeight=m),(m=No(l,p,h,"tts:fontSize"))&&m.match(Lo)&&(f.fontSize=m),(m=No(l,p,h,"tts:fontStyle"))&&(f.fontStyle=Eo[m.toUpperCase()]),(p=Uo(p,h,"tts:textDecoration"))&&jo(f,p),(l=Fo(l,h,"tts:textDecoration"))&&jo(f,l)}else c=null;c&&n.push(c)}}return n};var ko=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Ao=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,Oo=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,Co=/^(\d*\.?\d*)f$/,Ro=/^(\d*\.?\d*)t$/,Po=/^(?:(\d*\.?\d*)h)?(?:(\d*\.?\d*)m)?(?:(\d*\.?\d*)s)?(?:(\d*\.?\d*)ms)?$/,xo=/^(\d{1,2}|100)% (\d{1,2}|100)%$/,Lo=/^(\d+px|\d+em)$/,Io={left:"start",center:"center",right:"end",start:"start",end:"end"},Do={left:"line-left",center:"center",right:"line-right"};function Mo(t){var e=[];if(!t)return e;for(var i=t.childNodes,n=0;n<i.length;n++){var r="span"==i[n].nodeName&&"p"==t.nodeName;i[n].nodeType!=Node.ELEMENT_NODE||"br"==i[n].nodeName||r||(r=Mo(i[n]),e=e.concat(r))}return e.length||e.push(t),e}function jo(t,e){for(var i=e.split(" "),n=0;n<i.length;n++)switch(i[n]){case"underline":t.textDecoration.indexOf("underline")<0&&t.textDecoration.push("underline");break;case"noUnderline":0<=t.textDecoration.indexOf("underline")&&q(t.textDecoration,"underline");break;case"lineThrough":t.textDecoration.indexOf("lineThrough")<0&&t.textDecoration.push("lineThrough");break;case"noLineThrough":0<=t.textDecoration.indexOf("lineThrough")&&q(t.textDecoration,"lineThrough");break;case"overline":t.textDecoration.indexOf("overline")<0&&t.textDecoration.push("overline");break;case"noOverline":0<=t.textDecone")}}function No(t,e,i,n){return(t=Fo(t,i,n))?t:Uo(e,i,n)}function Uo(t,e,i){for(var n=Mo(t),r=0;r<n.length;r++){var a=n[r].getAttribute(i);if(a)return a}return(t=Bo(t,"style",e))?t.getAttribute(i):null}function Fo(t,e,i){return(t=Bo(t,"style",e))?t.getAttribute(i):null}function Bo(t,e,i){if(!t||i.length<1)return null;var n=null,r=t;for(t=null;r&&!(t=r.getAttribute(e))&&(r=r.parentNode)instanceof Element;);if(e=t)for(t=0;t<i.length;t++)if(i[t].getAttribute("xml:id")==e){n=i[t];break}return n}function Go(t,e){var i,n,r=null;return ko.test(t)?(r=ko.exec(t),i=Number(r[1]),n=Number(r[2]),r=Number(r[3])+(Number(r[4])+(Number(r[5])||0)/e.b)/e.frameRate+60*n+3600*i):Ao.test(t)?r=Ho(Ao,t):Oo.test(t)?r=Ho(Oo,t):Co.test(t)?(r=Co.exec(t),r=Number(r[1])/e.frameRate):Ro.test(t)?(r=Ro.exec(t),r=Number(r[1])/e.a):Po.test(t)&&(r=Ho(Po,t)),r}function Ho(t,e){e=t.exec(e);return e&&""!=e[0]?(Number(e[4])||0)/1e3+(Number&(t=/^(\d+) (\d+)$/g.exec(i))&&(this.frameRate*=t[1]/t[2])}function qo(){this.a=new So}function Wo(){}function Ko(t,e){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(e))?(i=i[1],t.textAlign="middle"==i?lo:co[i.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(e))?t.writingDirection="lr"==i[1]?mo:yo:(i=/^size:([\d\.]+)%$/.exec(e))?t.size=Number(i[1]):(i=/^position:([\d\.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(e))?(t.position=Number(i[1]),i[2]&&(i=i[2],t.positionAlign="line-left"==i||"start"==i?"line-left":"line-right"==i||"end"==i?"line-right":"center")):(i=/^line:([\d\.]+)%(?:,(start|end|center))?$/.exec(e))?(t.lineInterpretation=vo,t.line=Number(i[1]),i[2]&&(t.lineAlign=_o[i[2].toUpperCase()])):(i=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(e))&&(t.lineInterpretation=go,t.line=Number(i[1]),i[2]&&(t.lineAlign=_o[i[2].toUpperCase()]))}function zo(t){if(!(t=Qi(t,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3})/g)))return null;var e=Number(t[2]),i=Number(t[3]);return 59<e||59<i?null:Number(t[4])/1e3+i+60*e+3600*(Number(t[1])||0)}function Xo(){this.on(t){e=!0,t.oa.stop()}).parse(t),!e)throw new w(2,2,2007)},qo.prototype.parseMedia=function(t,e){var i=!1,n=[];if((new ci).C("mdat",fi(function(t){i=!0,n=n.concat(this.a.parseMedia(t,e))}.bind(this))).parse(t),!i)throw new w(2,2,2007);return n},Lt['application/mp4; codecs="stpp"']=qo,Lt['application/mp4; codecs="stpp.TTML.im1t"']=qo,Wo.prototype.parseInit=function(){},Wo.prototype.parseMedia=function(t,e){var i=(i=(i=at(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(i[0]))throw new w(2,2,2e3);var n,r,a=e.segmentStart;for(0<=i[0].indexOf("X-TIMESTAMP-MAP")&&(n=i[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),r=i[0].match(/MPEGTS:(\d+)/m),n&&r&&(a=zo(new Ji(n[1])),a=e.periodStart+(Number(r[1])/9e4-a))),r=[],n=1;n<i.length;n++){var o=i[n].split("\n"),s=a;if(1==o.length&&!o[0]||/^NOTE($|[ \t])/.test(o[0])||"STYLE"==o[0])var u=null;else{u=null,o[0].indexOf("--\x3e")<0&&(u=o[0],o.splice(0,1));var l=new Ji(o[0]),c=zo(l),d=Qi(l,/[ \t]+--\x3e[ \t]+/g),h=zo(l);if(null==c||!d||null==h)throw new w(2,2,2001);for(o=new so(c+s,h+s,o.slice(1).join("\n").trim()),Qi(l,/[ \t]+/gm),s=Zi(l);s;)Ko(o,s),Qi(l,/[ \t]+/gm),s=Zi(l);null!=u&&(o.id=u),u=o}u&&r.push(u)}return r},Lt["text/vtt"]=Wo,Lt['text/vtt; codecs="vtt"']=Wo,Xo.prototype.parseInit=function(t){var e=!1;if((new ci).C("moov",di).C("trak",di).C("mdia",di).ba("mdhd",function(t){0==t.version?(t.o.H(4),t.o.H(4),this.a=t.o.B(),t.o.H(4)):(t.o.H(8),t.o.H(8),this.a=t.o.B(),t.o.H(8)),t.o.H(4)}.bind(this)).C("minf",di).C("stbl",di).ba("stsd",hi).C("wvtt",function(){e=!0}).parse(t),!this.a)throw new w(2,2,2008);if(!e)throw new w(2,2,2008)},Xo.prototype.parseMedia=function(t,e){if(!this.a)throw new w(2,2,2008);var i=0,s=[],n=[],r=[],a=!1,u=!1,o=!1,l=null;if((new ci).C("moof",di).C("traf",di).ba("tfdtt.lc;(t=t.o).H(4),1&e&&t.H(8),2&e&&t.H(4),l=8&e?t.B():null}).ba("trun",function(t){u=!0;var e=t.version,i=t.lc,n=(t=t.o).B();1&i&&t.H(4),4&i&&t.H(4);for(var r=[],a=0;a<n;a++){var o={duration:null,bc:null};256&i&&(o.duration=t.B()),512&i&&t.H(4),1024&i&&t.H(4),2048&i&&(o.bc=e?t.Hc():t.B()),r.push(o)}s=r}).C("vtte",function(){ni(function(t){n.push(t)})).C("mdat",function(t){o=!0,di(t)}).parse(t),!o&&!a&&!u)throw new w(2,2,2008);for(var c=i,d=0;d<s.length;d++){var h=s[d],f=n[d],p=h.duration||l;p&&(c=(h=h.bc?i+h.bc:c)+p,f&&r.push(function(t,e,i){var n,r,a;return(new ci).C("payl",fi(function(t,fi(function(t){r=at(t)})).C("sttg",fi(function(t){a=at(t)})).parse(t),n?function(t,e,i,n,r){if(t=new so(n,r,t),e&&(t.id=e),i)for(e=new Ji(i),i=Zi(e);i;)Ko(t,i),Qi(e,/[ \t]+/gm),i=Zi(e);return t}(n,r,a,e,i):null}(f,e.periodStart+h/this.a,e.periodStart+c/this.a)))}return r.filter(j)},Lt['application/mp4; codecs="wvtt"']=Xo}.call(t,this),"undefined"!=typeof module&&module.exports?module.exports=t.shaka:"undefined"!=typeof define&&define.ae([],e):"object"==typeof exports?exports.Hls=e():t.Hls=e()}(this,function(){return r={},n.m=i=[function(t,e,i){"use strict";i.d(e,"a",function(){return u}),i.d(e,"b",function(){return l});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function r(){}var a={trace:r,debug:r,log:r,warn:r,info:r,error:r},o=a;function s(a){var o=self.console[a];return o?function(){for(var t,e,i=arguments.length,n=Array(i),r=0;r<i;r++)n[r]=arguments[r];n[0]&&(n[0]=(t=a,"infufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},function(t,e,i){"use strict";i.d(e,"b",function(){return n});s.isHeader=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&t[e+4]<255&&toter(t,e+10)eturn i|=(127&t=e[i];if(s.isTimeSty&&"com.apple.stadSize(t,4);ret&&i.push(o),e+=deTextFrame(t):"W]<<7)+e[7];return erray(e.length+1));return{key:t.type,info:e,data:i.buffer}}},s._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var e=1,i=s._utf8ArrayToStr(t.data.subarray(1));e+=i.length+1;e=s._utf8ArrayToStr(t.data.subarray(e));return{key:t.type,info:i,data:e}}e=s._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:e}}},s._decodeURLFrame=function(t){if("WXXX"!==t.type){var e=s._utf8ArrayToStr(t.data);return{key:t.type,data:e}}if(!(t.size<2)){var i=1,e=s._utf8ArrayToStr(t.data.subarray(1));i+=e.length+1;i=s._utf8ArrayToStr(t.data.subarray(i));return{key:t.type,info:e,data:i}}},s._utf8ArrayToStr=function(t){for(var e,i,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=t.length,a=void 0,o="",s=0;s<r;){if(0===(e=t[s++])&&n)return o;if(0!==e&&3!==e)switch(e>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(e);break;case 12:case 13:a=t[s++],o+=String.fromCharCode((31&e)<<6|63&a);break;case 14:a=t[s++],i=t[s++],o+=String.fromCharCode((15&e)<<12|(63&a)<<6|(63&i)<<0)}}return o},i=s;function s(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s)}var n=i._utf8ArrayToStr;e.a=i},function(t,e,i){"use strict";function n(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(thrn this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},e,t)},n);function r(t,e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(th("rt32Array(256),this.key=new Uint32Array(0),t Uint32Array(4),n=0;n<=b<<8|b>>>24,c[m]=b,h?(h=y^d[d[d[v^y]]],f^=d[d[f]]):h=f=1}},a.prototype.expandKey=function(t){for(var e=this.uint8ArrayToUint32Array_(t),i=!0,n=0;n<e.length&&i;)i=e[n]===this.key[n],n++;if(!i){this.key=e;var r=this.keySize=e.length;if(4!==r&&6!==r&&8!==r)throw new Error("Invalid aes key size="+r);for(var a=this.ksRows=4*(r+6+1),o=void 0,s=void 0,u=this.keySchedule=new Uint32Array(a),l=this.invKeySchedule=new Uint32Array(a),c=this.sBox,d=this.rcon,t=this.invSubMix,h=t[0],f=t[1],p=t[2],m=t[3],y=void 0,g=void 0,o=0;o<a;o++)o<r?y=u[o]=e[o]:(g=y,o%r==0?(g=c[(g=g<<8|g>>>24)>>>24]<<24|c[g>>>16&255]<<16|c[g>>>8&255]<<8|c[255&g],g^=d[o/r|0]<<24):6<r&&o%r==4&&(g=c[g>>>24]<<24|c[g>>>16&255]<<16|c[g>>>8&255]<<8|c[255&g]),u[o]=y=(u[o-r]^g)>>>0);for(s=0;s<a;s++)o=a-s,g=3&s?u[o]:u[o-4],l[s]=s<4||o<=4?g:h[c[g>>>24]]^f[c[g>>>16&255]]^p[c[g>>>8&255]]^m[cnction(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},a.prototype.decrypt=function(t,e,i){for(var n,r,a,o,s,u,l=this.keySize+6,c=this.invKeySchedule,d=this.invSBox,h=this.invSubMix,f=h[0],p=h[1],m=h[2],y=h[3],i=this.uint8ArrayToUint32Array_(i),g=i[0],v=i[1],b=i[2],_=i[3],T=new Int32Array(t),w=new Int32Array(T.length),E=void 0,S=void 0,k=void 0,A=void 0,O=void 0,C=void 0,R=void 0,P=void 0,x=this.networkToHostOrderSwap;e<T.length;){for(n=x(T[e]),r=x(T[e+1]),a=x(T[e+2]),o=x(T[e+3]),O=n^c[0],C=o^c[1],R=a^c[2],P=r^c[3],s=4,u=1;u<l;u++)E=f[O>>>24]^p[C>>16&255]^m[R>>8&255]^y[255&P]^c[s],S=f[C>>>24]^p[R>>16&255]^m[P>>8&255]^y[255&O]^c[s+1],k=f[R>>>24]^p[P>>16&255]^m[O>>8&255]^y[255&C]^c[s+2],A=f[P>>>24]^p[O>>16&255]^m[C>>8&255]^y[255&R]^c[s+3],O=E,C=S,R=k,P=A,s+=4;E=d[O>>>24]<<24^d[C>>16&255]<<16^d[R>>8&255]<<8^d[255&P]^c[s],S=d[C>>>24]<<24^d[R>>16&255]<<16^d[P>>8&255]<<8^d[255&O]^c[s+1],k=d[R>>>24]<<24^d[P>>16&255]<<16^d[O>>8&255]<<8^d[255&C]^c[s+2],A=d[P>>>24]<<24^d[O>>16&255]<<16^d[C>>8&255]<<8^d[255&R]^c[s+3],s+=3,w[e]=x(E^g),w[e+1]=x(A^v),w[e+2]=x(k^b),w[e+3]=x(S^_chedule=void 0,this.invKeySchedule=veturn this.disableWebCrypto&&this.config.enableSoftwareAES},d.prototype.decrypt=function(e,i,n,r){var t,a,o=this;this.disableWebCrypto&&this.config.enableSoftwareAES?(this.logEnabled&&(c.b.log("JS AES decrypt"),this.logEnabled=!1),(t=this.decryptor)||(this.decryptor=t=new l),t.expandKey(i),r(t.decrypt(e,0,n))):(this.logEnabled&&(c.b.log("WebCrypto AES decrypt"),this.logEnabled=!1),a=this.subtle,this.key!==i&&(this.key=i,tt){o.on){r(t)})}).catch(function(t){o.oetails:o.a.FRAG_DECRar t.webkitSubtle}catch(ct"==typeof t&&null!==t}function c(t){return void 0===t}((t.exports=n).EventEmitter=n).prototype._events=void 0,n.prototype._maxListeners=st be a positive =i.slice()).length,a=0;a<n;a++)o[a].apph),"function"==typly(this,arguments))}returnemoveListener&&this.emit("removstener(t,i[i.length-1][t])?[this._events[t]]:thi._events[t];if(u(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,i){var n,o,r,a,s;n=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,o=/^([^\/;?#]*)(.*)$/,r=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,s={buildAbsoluteURL:function(t,e,i){if(i=i||{},t=t.trim(),!(e=e.trim())){if(!i.alwaysNormalize)return t;var n=this.parseURL(t);if(!r)throw new Error("Error trying to parse base URL.");return n.path=s.normalizePath(n.path),s.buildURLFromParts(n)}n=this.parseURL(e);if(!n)throw new Error("Error trying to parse relative URL.");if(n.scheme)return i.alwaysNormalize?(n.path=s.normalizePath(n.path),s.buildURLFromParts(n)):e;var r=this.parseURL(t);if(!r)throw new Error("Error trying to parse base URL.");!r.netLoc&&r.path&&"/"!==r.path[0]&&(a=o.exec(r.path),r.netLoc=a[1],r.path=a[2]),r.netLoc&&!r.path&&(r.path="/");var a,t={scheme:r.scheme,netLoc:n.netLoc,path:null,params:n.params,query:n.query,fragment:n.fragment};return n.netLoc||(t.netLoc=r.netLoc,"/"!==n.path[0]&&(n.path?(a=(a=r.path).substring(0,a.lastIndexOf("/")+1)+n.path,t.path=s.normalizePath(a)):(t.path=r.path,n.params||(t.params=r.params,n.query||(t.query=r.query))))),null===t.path&&(t.path=i.alwaysNormalize?s.nor|"",params:t[4lace(a,"")).lengtheturn t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}},t.exports=s},f+5])>>>5}function p(t,e){return!!(e+1<t.length&&n(t,e))}function y(t,e,i,n,r){t.samplerate||(r=function(t,e,i,n){var r,a,o=navigator.userAgent.toLowerCase(),s=n,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],l=1+((192&e[i+2])>>>6),c=(60&e[i+2])>>>2;if(!(u.length-1<c))return r=(1&e[i+2])<<2,r|=(192&e[i+3])>>>6,q.b.log("manifest codec:"+n+",ADTS data:type:"+l+",sampleingIndex:"+c+"["+u[c]+"Hz],channelConfig:"+r),n=/firefox/i.test(o)?6<=c?(l=5,a=new Array(4),c-3):(l=2,a=new Array(2),c):-1!==o.indexOf("android")?(l=2,a=new Array(2),c):(l=5,a=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&6<=c?c-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(6<=c&&1==r||/vivaldi/i.test(o))||!n&&1==r)&&(l=2,a=new Array(2)),c)),a[0]=l<<3,a[0]|=(14&c)>>1,a[1]|=(1&c)<<7,a[1]|=r<<3,5===l&&(a[1]|=(14&n)>>1,a[2]=(1&n)<<7,a[2]|=8,a[3]=0),{config:a,samplerate:u[c],channelCount:r,codec:"mp4a.40."+l,manifestCodec:s};t.trigger(Event.ERROR,{type:V.b.MEDIA_ERROR,details:V.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+c})}(e,i,n,r),t.config=r.config,t.samplerate=r.samplerate,t.channelCount=r.channelCount,t.codec=r.codec,t.manifestCodec=r.manifestCodec,q.b.log("parsed codec:"+t.b channel:"+r.channelCount)&e+o+t<=a)return{headerLength:o,frameLength:t,stamp:i+n*r}}(e,i,n,r,f(t.samplerate));if(a){n=a.stamp,r=a.headerLength,a=a.frameLength,n={unit:e.subarray(i+r,i+r+a),pts:n,dts:n};return t.samples.push(n),t.len+=a,{sample:n,length:a+r}}}var v=i(3);function r(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.observer=t,this.es:[],len:0,manifestCodec:e,duration:n,inputTimeScale:9e4}},r.prototype.resetTimeStamp=function(){},r.probe=function(t){if(!t)return!1;for(var e=(v.a.getID3Data(t,0)||[]).length,i=t.length;e<i;e++)if(function(t,e){if(e+1<t.length&&n(t,e)){var i=s(t,e),i=e+(e+5<t.length?u(t,e):i);if(i===t.length||i+1<t.length&&n(t,i))return 1}}(t,e))return q.b.loles:[]},{samples:h,inputTimeScale:9e4},{samples:[]},e,i,n)}ss as a function")}(this,l),this.observer=t,this.remuxer=e}var S=(l.prototype.resetTimeStaracks:a}a:t,start:n2str=functio<<24|t[e+1]<<1),t[e]=i>>,end:o},e.slice(1))),r[e]={timesc[0]/t})})),t=Math(i%(1+a)),l.writeUint32(t,4,e),l.writeUint32(t,8,i))})})})},l.prototype.append=function(t,e,i,n){var r=this.initData;r||(this.resetInitSegment(t,this.audioCodec,this.videoCodec),r=this.initData);var a,o,s=this.initPTS;void 0===s&&(o=l.getStartDTS(r,t),this.initPTS=s=o-e,this.observer.trigger(H.a.INIT_PTS_FOUND,{initPTS:s})),l.offsetStartDTS(r,t,s),a=l.getStartDTS(r,t),this.remuxer.remux(r.audio,r.video,null,null,a,i,n,t)},l.prototype.destroy=function(){},l),c={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(t,e,i,n,r){if(!(i+24>e.length)){var a=this.parseHeader(e,i);if(a&&i+a.frameLength<=e.length){r=n+r*(9e4*a.samplesPerFrame/a.sampleRate),r={unit:e.subarray(i,i+a.frameLength),pts:r,dts:r};return t.config=[],t.channelCount=a.channelCount,t.samplerate=a.sampleRate,t.samples.push(r),t.len+=at:t,frameLength:n(t,e){reion(t,|n+1<tesAvailable=t.byteLength,tgetUint32(0),this.bitle-=e,this.loadWord()rd(),0<(e=t-e)&&thi.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()},o.prototype.skipUEG=fuprototype.skipEG=funfunction(){var t=thction(){var t=this.readUototype.readBoolean=function(){return 1===this.readBits(1)},o.prototype.readUByte=function(){return this.readBits(8)},o.prototype.readUShort=function(){return this.readBits(16)},o.prototype.readUInt=funct=0;n<t;n++)e=0===(i=2*r-2*a),height:(2-l)*(p+1on(ecryptdata=i,this.discardEPB=n,t,this.decryptdata.key.buffer,int8Array(t),a.set(t,16),r||o.ter.isSync();if(this.decryptAacSength-16;r+=160,n+=16)i.set(t.suength-16;n+=160,i+=16)t.set(etAvcDecryptedUnit(s,t),o||u.desSync();if(this.decryptAvcSample(t,e,i,n=i,this.typeSupported=n,this.remubserver,t first sync w==t[i]&&71===t0,isAAC:"audio"===t||void 0,d=null,this.audioCodec=e,this.videoCodec=i,this._duration=n},x.prototype.resetTimeStamp=function(){},x.prototype.append=function(t,e,i,n){var r,a,o,s,u,l=t.length,c=!1;this.contiguous=i;var d=this.pmtParsed,h=this._avcTrack,f=this._audioTrack,p=this._id3Track,m=h.pid,y=f.pid,g=p.pid,v=this._pmtId,b=h.pesData,_=f.pesData,T=p.pesData,w=this._parsePAT,E=this._parsePMT,S=this._parsePES,k=this._parseAVCPES.bind(this),A=this._parseAACPES.bind(this),O=this._parseMPEGPES.bind(this),C=this._parseID3PES.bind(this),R=x._syncOffset(t);for(l-=(l+R)%188,r=R;r<l;r+=188)if(71===t[r]){if(a=!!(64&t[r+1]),o=((31&t[r+1])<<8)+t[r+2],1<(48&t[r+3])>>4){if((s=r+5+t[r+4])===r+188)continue}else s=r+4;switch(o){case m:a&&(b&&(u=S(b))&&k(u,!1),b={data:[],size:0}),b&&(b.data.push(t.subarray(s,r+188)),b.size+=r+188-s);break;case y:a&&(_&&(u=S(_))&&(f.isAAC?A:O)(u),_={data:[],size:0}),_&&(_.data.push(t.subarray(s,r+188)),_.size+=r+188-s);break;case g:a&&(T&&(u=S(T))&&C(u),T={data:[],size:0}),T&&(T.data.push(t.subarray(s,r+188)),T.size+=r+188-s);break;case 0:a&&(s+=t[s]+1),v=this._pmtId=w(t,s);break;case v:a&&(s+=t[s]+1);var P=E(t,s,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);0<(m=P.avc)&&(h.pid=m),0<(y=P.audio)&&(f.pid=y,f.isAAC=P.isAAC),0<(g=P.id3)&&(p.pid=g),c&&!d&&(q.b.log("reparse from beginning"),c=!1,r=R-188),d=this.pmtParsed=!0;break;case 17:case 8191:break;default:c=!0}}else this.observer.trigger(H.a.ERROR,{type:V.b.MEDIA_ERROR,details:V.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});b&&(u=S(b))?(k(u,!0),h.pesData=null):h.pesData=b,_&&(u=S(_))?((f.isAAC?A:O)(u),f.pesData=null):(_&&_.size&&q.b.log("last AAC PES packet truncated,might overlap between fragments"),f.pesData=_),T&&(u=S(T))?(C(u),p.pesData=null):p.pesData=T,null==this.sampleAes?this.remuxer.remux(f,h,p,this._txtTrack,e,i,n):this.decryptAndRemvc(t,e,i,n,r,a,o)}):this.decrypr.remux(t,e,i,n,r,a,tion(){this._initPTS=ttype._parsePAT=function(t,e){return(31&t[e+10])<<8|t[e+11]},x.prototype._parsePMT=function(t,e,i,n){var r,a={audio:-1,avc:-1,id3:-1,isAAC:!0},o=e+3+((15&t[e+1])<<8|t[e+2])-4;for(e+=12+((15&t[e+10])<<8|t[e+11]);e<o;){switch(r=(31&t[e+1])<<8|t[e+2],t[e]){case 207:if(!n){q.b.log("unkown stream type:"+t[e]);break}case 15:-1===a.audio&&(a.audio=r);break;case 21:-1===a.id3&&(a.id3=r);break;case 219:if(!n){q.b.log("unkown stream type:"+t[e]);break}case 27:-1===a.avc&&(a.avc=r);break;case 3:case 4:i?-1===a.audio&&(a.audio=r,a.isAAC=!1):q.b.log("MPEG audio found, not supported in this browser for now");break;case 36:q.b.warn("HEVC stream type found, not supported for now");break;default:q.b.log("unkown stream type:"+t[e])}e+=5+((15&t[e+3])<<8|t[e+4])}return a},x.prototype._parsePES=function(t){var e,i,n,r,a,o=0,s=t.data;if(!t||0===t.size)return null;for(;s[0].length<19&&1<s.length;){var u=new Uint8Array(s[0].length+s[1].length);u.set(s[0]),u.set(s[1],s[0].length),s[0]=u,s.splice(1,1)}if(1!==((h=s[0])[0]<<16)+(h[1]<<8)+h[2])return null;if((e=(h[4]<<8)+h[5])&&e>t.size-6)return null;192&(i=h[7])&&(4294967295<(n=536870912*(14&h[9])+4194304*(255&h[10])+16384*(254&h[11])+128*(255&h[12])+(254&h[13])/2)&&(n-=8589934592),64&i?(4294967295<(r=536870912*(14&h[14])+4194304*(255&h[15])+16384*(254&h[16])+128*(255&h[17])+(254&h[18])/2)&&(r-=8589934592),54e5<n-r&&(q.b.warn(Math.round((n-r)/9e4)+"s delta between PTS and DTS, align them"),n=r)):r=n),i=h[8],t.size-=a=i+9;for(var l=new Uint8Array(t.size),c=0,d=s.length;c<d;c++){var h,f=(h=s[c]).byteLength;if(a){if(f<a){a-=f;continue}h=h.subarray(a),f-=a,a=0}l.set(h,o),o+=f}return e&&(e-=i+3),{data:l,pts:n,dts:r,len:e}},x.prototype.pushAccesUnit=function(t,e){var i,n;t.units.length&&t.frame&&(n=(i=e.samples).length,!this.config.forceKeyFrameOnDiscontinuity||!0===t.key||e.sps&&(n||this.contiguous)?(t.id=n,i.push(t)):e.dropped++),t.debug.length&&q.b.log(t.pts+"/"tion p(t,e,i,n){return{key:t,pts:e,dts:i,units:[],debug:n}}var m,y,g,v=this,b=this._avcTrack,e=this._parseAVCNALu(f.data),_=this.avcSample,T=!1,w=this.pushAccesUnit.bind(this);f.data=null,_&&e.length&&!b.audFound&&(w(_,b),_=this.avcSample=p(!1,f.pts,f.dts,"")),e.forEach(function(t){switch(t.type){case 1:y=!0,(_=_||(v.avcSample=p(!0,f.pts,f.dts,""))).frame=!0;var e=t.data;T&&4<e.length&&(2!==(l=new k(e).readSliceType())&&4!==l&&7!==l&&9!==l||(_.key=!0));break;case 5:y=!0,(_=_||(v.avcSample=p(!0,f.pts,f.dts,""))).key=!0,_.frame=!0;break;case 6:y=!0,(m=new k(v.discardEPB(t.data))).readUByte();for(var i=0,n=0,r=!1,a=0;!r&&1<m.bytesAvailable;){for(i=0;i+=a=m.readUByte(),255===a;);for(n=0;n+=a=m.readUByte(),255===a;);if(4===i&&0!==m.bytesAvailable){var r=!0,o=m.readUByte();if(181===o)if(49===m.readUShort()){o=m.readUInt();if(1195456820===o)if(3===m.readUByte()){var o=m.readUByte(),s=31&o,u=[o,m.readUByte()];for(g=0;g<s;g++)u.push(m.readUByte()),u.push(m.readUByte()),u.push(m.readUByte());v._insertSampleInOrder(v._txtTrack.samples,{type:3,pts:f.pts,bytes:u})}}}else if(n<m.bytesAvailable)for(g=0;g<n;g++)m.readUByte()}break;case 7:if(T=y=!0,!b.sps){var l=(m=new k(t.data)).readSPS();b.width=l.width,b.height=l.height,b.pixelRatio=l.pixelRatio,b.sps=[t.data],b.duration=v._duration;var c=t.data.subarray(1,4),d="avc1.";for(g=0;g<3;g++){var h=c[g].toString(16);d+=h=h.length<2?"0"+h:h}b.codec=d}break;case 8:y=!0,b.pps||(b.pps=[t.data]);break;case 9:y=!1,b.audFound=!0,_&&w(_,b),_=v.avcSample=p(!1,f.pts,f.dts,"");break;case 12:y=!1;break;default:y=!1,_&&(_.debug+="unknown NAL "+t.type+" ")}_&&y&&_.units.push(t)}),t&&_&&(w(-)if(e.pts<t[n].pts){t.splice(n,0,e);break}}else t.push(e)},x.prototype._getLastNalUnit=function(){var t,e=this.avcSample,i=void 0;return i=(e=!e||0===e.units.length?(t=this._avcTrack.samples)[t.lengthta,0),a.set(t,r.data.by0;n<r;o++,n++)o===i[0]&&(o++,i.shift()),a[n]=t[o];return a},x.prototype._parseAACPES=function(t){var e,i,n,r,a=this._audioTrack,o=t.data,s=t.pts,u=this.aacOverFlow,l=this.aacLastPTS;for(u&&((t=new Uint8Array(u.byteLength+o.byteLength)).set(u,0),t.set(o,u.byteLength),o=t),i=0,r=o.length;i<r-1&&!p(o,i);i++);if(i){var c,d=i<r-1?(c="AAC PES did not start with ADTS header,offset:"+i,!1):(c="no ADTS header found in AAC PES",!0);if(q.b.warn("parsing error:"+c),this.observer.trigger(H.a.ERROR,{type:V.b.MEDIA_ERROR,details:V.a.FRAG_PARSING_ERROR,fatal:d,reason:c}),d)return}for(y(a,this.observer,o,i,this.audioCodec),e=0,d=f(a.samplerate),u&&l&&(d=l+d,1<Math.abs(d-s)&&(q.b.log("AAC: align PTS for overlapping frames by "+Math.round((d-s)/90)),s=d));i<r;)if(p(o,i)&&i+5<r){var h=g(a,o,i,s,e);if(!h)break;i+=h.length,n=h.sample.pts,e++}else i++;u=i<r?o.subarray(i,r):null,this._audioTrack,e,r,a,n);if(pe.on")}(this,T),this.observer=t,this.es:[],len:0,manifestCodec:e,duration:n,inputTimereturn q.b.log("MPEles:[]},{samples:h,inputTimeScale:9e4},{samples:[]},e,i,n)},T.prototype.destroy=function(){},T);function w(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot ca90,90,90,90,90,90,90,90,90ew TypeError(,e,r,e,r=0,n=dlr=funTYPES[t>>8&255a,R.mdh,new Ui(R.typeon(t,e,[0].timex(t[e]0,0,0,0DependeSC),R.b>>16&250,0,0,0,0,0,0,0,0,0,stsd,R.,0,0,0,255,e>>ration|>>16&25255,o>>>8&255,eLength);return t.set(R.FTYP),t.set(e,R.FTYP.byteLength),t},R);function P(t,e,i,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,P),this.observer=t,this.config=e,this.typeSupported=i;i=navigator.userAgent;this.isSafari=n&&-1<n.indexOf("Apple")&&i&&!i.match("CriOS"),this.ISGenerated=!1}var L=(e.resetTimeStamp=function(t){this._initPTS=this._initDTS=t},P.prototype.resetInitSegment=function(){this.ISGenerated=!1},P.prototype.remux=function(t,e,i,n,r,a,o){var s,u,l,c,d,h;this.ISGenerated||this.generateIS(t,e,r),this.ISGenerated&&(d=t.samples.length,s=e.samples.length,l=u=r,d&&s&&(c=(t.samples[0].dts-e.samples[0].dts)/e.inputTimeScale,u+=Math.max(0,c),l+=Math.max(0,-c)),d?(t.timescale||(q.b.warn("regenerate InitSegment as audio detected"),this.generateIS(t,e,r)),d=this.remuxAudio(t,u,a,o),s&&(h=void 0,d&&(h=d.endPTS-d.startPTS),e.timescale||(q.b.warn("regenerate InitSegment as video detected"),this.generateIS(t,e,r)),this.remuxVideo(e,l,a,h,o))):(h=void 0,(h=s?this.remuxVideo(e,l,a,o):h)&&t.codec&&this.remuxEmptyAudio(t,u,a,h))),i.samples.length&&this.remuxID3(i,r),n.samples.length&&this.remuxText(n,r),this.observer.trigger(H.a.FRAG_PARSED)},P.prototype.generateIS=function(t,e,i){var n,r,a=this.observer,o=t.samples,s=e.samples,u=this.typeSupported,l="audio/mp4",c={},d={tracks:c},h=void 0===this._initPTS;h&&(n=r=1/0),t.config&&o.length&&(t.timescale=t.samplerate,q.b.log("audio sampling rate : "+t.samplerate),t.isAAC||(u.mpeg?(l="audio/mpeg",t.codec=""):u.mp3&&(t.codec="mp3")),c.audio={container:l,codec:t.codec,initSegment:!t.isAAC&&u.mpeg?new Uint8Array:W.initSegment([t]),metadata:{channelCount:t.channelCount}},h&&(n=r=o[0].pts-t.inputTimeScale*i)),e.sps&&e.pps&&s.length&&(t=e.inputTimeScale,e.timescale=t,c.video={container:"video/mp4",codec:e.codec,initSegment:W.initSegment([e]),metadata:{width:e.width,height:e.height}},h&&(n=Math.min(n,s[0].pts-t*i),r=Math.min(r,s[0].dts-t*i),this.observer.trigger(H.a.INIT_PTS_FOUND,{initPTS:n}))),Object.keys(c).length?(a.trigger(H.a.FRAG_PARSING_INIT_SEGMENT,d),this.ISGenerated=!0,h&&(this._initPTS=n,this._initDTS=r)):a.trigger(H.a.ERROR,{type:V.b.MEDIA_ERROR,details:V.a.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},P.prototype.remuxVideo=function(t,e,i,n,r){var a,o,s=8,u=t.timescale,l=t.samples,c=[],d=l.length,h=this._PTSNormalize,f=this._initDTS,p=this.nextAvcDts,m=this.isSafari;m&&(i|=l.length&&p&&(r&&Math.abs(e.forEach,e){var i=t.dts-nction(t,e){return Math.max(Math.min(t,e.pts-e.dts),-18e3)},0);if(y<0){q.b.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(y/90)+" ms to overcome this issue");for(var g=0;g<l.length;g++)l[g].dts+=y}var r=l[0],v=Math.max(r.dts,0),b=Math.max(r.pts,0),e=Math.round((v-p)/90);i&&e&&(1<e?q.b.log("AVC:"+e+" ms hole between fragments detected,filling it"):e<-1&&q.b.log("AVC:"+-e+" ms overlapping between fragments detected"),l[0].dts=v=p,b=Math.max(b-e,p),l[0].pts=b,q.b.log("Video/PTS/DTS adjusted: "+Math.round(b/90)+"/"+Math.round(v/90)+",delta:"+e+" ms")),r=l[l.length-1],i=Math.max(r.dts,0),e=Math.max(r.pts,0,i),m&&(a=Math.round((i-v)/(l.length-1)));for(var _=0,T=0,w=0;w<d;w++){for(var E=l[w],S=E.units,k=S.length,A=0,O=0;O<k;O++)A+=S[O].data.length;T+=A,_+=k,E.length=A,E.dts=m?v+w*a:Math.max(E.dts,v),E.pts=Math.max(E.pts,E.dts)}r=T+4*_+8;try{o=new Uint8Array(r)}catch(t){return void this.observer.trigger(H.a.ERROR,{type:V.b.MUX_ERROR,details:V.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:r,reason:"fail allocating video mdat "+r})}var C=new DataView(o.buffer);C.setUint32(0,r),o.set(W.types.mdat,4);for(var R=0;R<d;R++){for(var P,x,L,I=l[R],D=I.units,M=0,j=void 0,N=0,U=D.length;N<U;N++){var F=D[N],B=F.data,F=F.data.byteLength;C.setUint32(s,F),s+=4,o.set(B,s),s+=F,M+=4+F}j=m?Math.max(0,a*Math.round((I.pts-I.dts)/a)):(R<d-1?a=l[R+1].dts-I.dts:(L=this.config,P=I.dts-l[0<R?R-1:R].dts,L.stretchShortVideoTrack?(x=L.maxBufferHole,L=L.maxSeekHole,Math.floor(Math.min(x,L)*u)<(L=(n?b+n*u:this.nextAudioPts)-I.pts)?((a=L-P)<0&&(a=P),q.b.log("It is approximately "+L/90+" ms to the next segment; using duration "+a/90+" ms for the last video frame.")):a=P):a=P),Math.round(I.pts-I.dts)),c.push({size:M,duration:a,cts:j,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:I.key?2:1,isNonSync:I.key?0:1}})}this.nextAvcDts=i+a;var G,i=t.dropped;t.len=0,t.nbNalu=0,t.dropped=0,c.length&&-1<navigator.userAgent.toLowerCase().indexOf("chrome")&&((G=c[0].flags).dependsOn=2,G.isNonSync=0),t.samples=c,G=W.moof(t.sequenceNumber++,v,t),t.samples=[];i={data1:G,data2:o,startPTS:b/u,endPTS:(e+a)/u,startDTS:v/u,endDTS:this.nextAvcDts/u,type:"video",nb:c.length,dropped:i};return this.observer.trigger(H.a.FRAG_PARSING_DATA,i),i},P.prototype.remuxAudio=function(t,e,i,n){var r,a,o,s,u=t.inputTimeScale,l=t.timescale,c=u/l,d=(t.isAAC?1024:1152)*c,h=this._PTSNormalize,f=this._initDTS,p=!t.isAAC&&this.typeSupported.mpeg,m=t.samples,y=[],g=this.nextAudioPts;if(i|=m.length&&g&&(n&-f)<20*d),m.forEat.pts-f,e*u)}),0!==(m=m.filter(function(t){return 0<=t.pts})).length){if(i||(g=n?e*u:m[0].pts),t.isAAC)for(var v=this.config.maxAudioFramesDrift,b=0,_=g;b<m.length;){var T=m[b],w=T.pts-_,E=Math.abs(1e3*w/u);if(w<=-v*d)q.b.warn("Dropping 1 audio frame @ "+(_/u).toFixed(3)+"s due to "+Math.round(E)+" ms overlap."),m.splice(b,1),t.len-=T.unit.length;else if(v*d<=w&&E<1e4&&_){var S=Math.round(w/d);q.b.warn("Injecting "+S+" audio frame @ "+(_/u).toFixed(3)+"s due to "+Math.round(1e3*w/u)+" ms gap.");for(var k=0;k<S;k++){var A,O=Math.max(_,0);(A=U.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(q.b.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),A=T.unit.subarray()),m.splice(b,0,{unit:A,pts:O,dts:O}),t.len+=A.length,_+=d,b++}T.pts=T.dts=_,_+=d,b++}else Math.abs(w),T.pts=T.dts=_,_+=d,b++}for(var C=0,R=m.length;C<R;C++){var P=m[C],x=P.unit,P=P.pts;if(void 0!==s)r.duration=Math.round((P-s)/c);else{var L=Math.round(1e3*(P-g)/u),I=0;if(i&&t.isAAC&&L){if(0<L&&L<1e4)I=Math.round((P-g)/d),q.b.log(L+" ms hole between AAC samples detected,filling it"),0<I&&(A=(A=U.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||x.subarray(),t.len+=I*A.length);else if(L<-12){q.b.log("drop overlapping AAC sample, expected/parsed/delta:"+(g/u).toFixed(3)+"s/"+(P/u).toFixed(3)+"s/"+-L+"ms"),t.len-=x.byteLength;continue}P=g}if(o=P,!(0<t.len))return;var L=p?t.len:t.len+8,D=p?0:8;try{a=new Uint8Array(L)}catch(t){return void this.observer.trigger(H.a.ERROR,{type:V.b.MUX_ERROR,details:V.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:L,reason:"fail allocating audio mdat "+L})}p||(new DataView(a.buffer).setUint32(0,L),a.set(W.types.mdat,4));for(var M=0;M<I;M++)(A=U.getSilentFrame(t.manifestCodec||t.codec,t.channelCount))||(q.b.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),A=x.subarray()),a.set(A,D),D+=A.byteLength,r={size:A.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},y.push(r)}a.set(x,D);L=x.byteLength;D+=L,y.push(r={size:L,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}}),s=P}var j=0,N=y.length;if(2<=N&&(j=y[N-2].duration,r.duration=j),N){this.nextAudioPts=g=s+c*j,t.len=0,t.samples=y,l=p?new Uint8Array:W.moof(t.sequenceNumber++,o/c,t),t.samples=[];n=o/u,j=g/u,N={data1:l,data2:a,startPTS:n,endPTS:j,startDTS:n,endDTS:j,type:"audio",nb:N};return this.observer.trigger(H.a.FRAG_PARSING_DATA,N),N}return null}},P.prototype.remuxEmptyAudio=function(t,e,i,n){var r=t.inputTimeScale,a=t.samplerate||r,o=this.nextAudioPts,s=(void 0!==o?o:n.startDTS*r)+this._initDTS,n=n.endDTS*r+this._initDTS,u=1024*(r/a),l=Math.ceil((n-s)/u),c=U.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);if(q.b.warn("remux empty Audio"),c){for(var d=[],h=0;h<l;h++){var f=s+h*u;d.push({unit:c,pts:f,dts:f}),t.len+=c.length}t.samples=d,this.remuxAudio(t,e,i)}else q.b.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},P.prototype.remuxID3=function(t,e){var i,n=t.samples.length,r=t.inputTimeScale,a=this._initPTS,o=this._initDTS;if(n){for(var s=0;s<n;s++)(i=t.samples[s]).pts=(i.pts-a)/r,i.dts=(i.dts-o)/r;this.observer.trigger(H.a.FRAG_PARSING_METADATA,{samples:t.samples})}t.samples=[]},P.prototype.remuxText=function(t,e){t.samples.sort(function(t,e){return t.pts-e.pts});var i,n=t.samples.length,r=t.inputTimeScale,a=this._initPTS;if(n){for(var o=0;o<n;o++)(i=t.samples[o]).pts=(i.pts-a)/r;this.observer.trigger(H.a.FRAG_PARSING_USERDATA,{993nnot call a class as a function")}(this,I),this.observer=t}var D=(I.prototype.destroy=function(){},I.prototype.resetTimeStamp=function(){},rtDTS:r,type:l,nb:1,drootype.destroy=fund(new Uint8Array(t),i,new Uint8Array(n),r,a,o,s,u,l,c,d,h)},M.prototype.pushDecrypted=function(t,e,i,n,r,a,o,s,u,l,c,d){if(!(T=this.demuxer)||o&&!this.probe(t)){for(var h=this.observer,f=this.typeSupported,p=this.config,m=[{demux:A,remux:L},{demux:S,remux:D},{demux:E,remux:L},{demux:O,remux:L}],y=0,g=m.length;y<g;y++){var v=m[y],b=v.demux.probe;if(b(t)){var _=this.remuxer=new v.remux(h,p,f,this.vendor),T=new v.demux(h,_,p,f);this.probe=b;break}}if(!T)return void h.trigger(H.a.ERROR,{type:V.b.MEDIA_ERROR,details:V.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=T}var w=this.remuxer;(o||s)&&(T.resetInitSegment(i,n,r,l),w.resetInitSegment()),o&&(T.resetTimeStamp(d),w.resetTimeStamp(d)),"function"==typeof Tbserver=t,this.typeSupported=e,this.config=i,this.vendor=n}e.a=i},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};i.d(n,"newCue",function(){return Zt});var r=i(6),a=i.n(r),T=i(1),w=i(2),E=i(0),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.covents=i,this.useGenericHandler=!0,this.registerListeners()}var u=(s.prototype.destroy=functithis.handledEvents.length&&"fubidden event name: "+t);this.hlsts.forEach(function(s.prototype.onEvent=function(t,e){this.onEventr.name+" class (tried "+i+")");return this[i].bind(this,e)}.call(this,e,t).call()}catch(t){E.b.error("internal error happened while processing "+e+":"+t.message),this.hls.trigger(T.a.ERROR,{type:w.b.OTHER_ERROR,details:w.a.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},s);var l=/^(\d+)x(\d+)$/,c=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g;function d(t){for(var e in!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),t="string"==typeof t?d.parseAttrList(t):t)t.hasOwnProperty(e)&&(this[e]=t[e])}var S=(d.prototype.decimalInteger=function(t){t=parseInt(this[t],10);return t>Nu)i[n]=parseInt(e.slice(2*n,2*n+2),16);rarseInt(this[t],16);return t>NumbecimalFloatingPoint=function()},d.prototype.enumeratedStrint)return{width:pOf('"')===n.length-1&&(n=n.slice(1,-1)),i[e[1]]=n}return i},d),h={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,Source.isTypeSupported((e||"video")+'/mp4;codecs="'+t+'"')}var p=function(t,e,i){return e&&m(t.prototype,e),i&&m(t,i),t};function m(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var g=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,v=/#EXT-X-MEDIA:(.*)/g,k=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),A=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,O=(p(b,[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=a.a.buildAbsoluteURL(this.this.method=null,this.key=null,this.iv=null,thiUint8Array(16),i=12;i<16;i++)e[i]=t>>8*(15-ireluri=t.reluri,i.iv=.cloneObj=function(t(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._urate.parse(this.rawProgramDateTime))),this._programDateTime}},{key:"byteRange",get:function(){var t,e,i;return this._byteRange||(t=this._byteRange=[],this.rawByteRange&&(1===(e=this.rawByteRange.split("@",2)).length?(i=this.lastByteRangeEndOffset,t[0]=i||0):t[0]=parseInt(e[1]),t[1]=parseInt(e[0])+t[0])),this._byteRange}},{key:"byteRangeStartOffset",get:functionyteRangeEndOffset",get:fdataFrhis._byteRange=null,this._decryptdata=null,this.tagList=[]}function P(t){y(this,P);t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,_.call(this,t,T.a.MANIFEST_LOADING,T.a.LEVEL_LOADING,T.a.AUDIO_TRACK_LOADING,T.a.SUBTITLE_TRACK_LOADING));return t.loaders={},t}var x,L=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(P,_=u),P.prototype.destroy=function(){for(var t in this.loaders){t=this.loaders[t];t&&t.destroy()}this.loaders={},u.festLoading=function(t){thin(t){this.load(t.url,{type:"level",level:t.level,id:t.id})},P.prototype.onAudioTrackLoading=function(t){this.load(t.url,{typeunction(t){this.load(t.url,{type:"subtitleTrack",id:t.id})},P.prototype.load=function(t,e){var i=this.loaders[e.type];if(void 0!==i){var n=i.context;if(n&&n.url===t)return void E.b.trace("playlist request ongoing");E.b.warn("abort previous loader for type:"+e.type),i.abort()}var r=this.hls.config,a=void 0,o=void 0,s=void 0,n=void 0;"manifest"===e.type?(a=r.manifestLoadingMaxRetry,o=r.manifestLoadingTimeOut,s=r.manifestLoadingRetryDelay,n=r.manifestLoadingMaxRetryTimeout):"level"===e.type?(a=0,o=r.levelLoadingTimeOut):(a=r.levelLoadingMaxRetry,o=r.levelLoadingTimeOut,s=r.levelLoadingRetryDelay,n=r.levelLoadingMaxRetryTimeout,E.b.log("loading playlist for "+e.type+" "+(e.level||e.id))),i=this.loaders[e.type]=e.loader=new(void 0!==r.pLoader?r.pLoader:r.loader)(r),e.url=t,e.responseType="";r=void 0,t=void 0,r={timeout:o,maxRetry:a,retryDelay:s,maxRetryDelay:n},t={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:thist,e){return a.a.buildAbsoluteURL(e,t,{alwaysNormalize:!0}function(t){return-1===e.indexOf(t)}))}),r.unknownCodecs=n}for(g.lastIndex=0;null!=(i=g.exec(t));){var a={},o=a.attrs=new S(i[1]);a.url=this.resolve(i[2],e);var s=o.decimalResolution("RESOLUTION");s&&(a.width=s.width,a.height=s.height),a.bitrate=o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),a.name=o.NAME,r([].concat((o.CODECS||"").split(/[ ,]+/)),a),a.videoCodec&&-1!==a.videoCodec.indexOf("avc1")&&(a.videoCodec=this.avc1toavcoti(a.videoCodec)),n.push(a)}return n},P.prototype.parseMasterPlaylistMedia=function(t,e,i){var n,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],a=[],o=0;for(v.lastIndex=0;null!==(n=v.exec(t));){var s={},u=new S(n[1]);u.TYPE===i&&(s.groupId=u["GROUP-ID"],s.name=u.NAME,s.type=i,s.default="YES"===u.DEFAULT,s.autoselect="YES"===u.AUTOSELECT,s.forced="YES"===u.FORCED,u.URI&&(s.url=this.resolve(u.URIll,n=0;n<t.length;n++){var r=t[n];r.id===e&&(i=r)}return i}(r,s.groupId),s.audioCodec=(u||r[0]).co("000"+parseInt(i.shift()).toString(16)).substr(-4)):e=t,e},P.prototype.parseLevelPlaylist=function(t,e,i,n){var r,a,o=0,s=0,u={type:null,version:null,url:e,fragments:[],live:!0,startSN:0},l=new O,c=0,d=null,h=new C;for(k.lastIndex=0;null!==(r=k.exec(t));){var f,p=r[1];if(p){h.duration=parseFloat(p);var m=(" "+r[2]).slice(1);h.title=m||null,h.tagList.push(m?["INF",p,m]:["INF",p])}else if(r[3])isNaN(h.duration)||(f=o++,h.type=n,h.start=s,h.levelkey=l,h.sn=f,h.level=i,h.cc=c,h.baseurl=e,h.relurl=(" "+r[3]).slice(1),u.fragments.push(h),s+=(d=h).duration,h=new C);else if(r[4])h.rawByteRange=(" "+r[4]).slice(1),!d||(f=d.byteRangeEndOffset)&&(h.lastByteRangeEndOffset=f);else if(r[5])h.rawProgramDateTime=(" "+r[5]).slice(1),h.tagList.push(["PROGRAM-DATE-TIME",h.rawProgramDateTime]),void 0===u.programDateTime&&(u.programDateTime=new Date(new Date(Date.parse(r[5]))-1e3*s));else{for(r=r[0].match(A),a=1;a<r.length&&void 0===r[a];a++);var y=(" "+r[a+1]).slice(1),g=(" "+r[a+2]).slice(1);switch(r[a]){case"#":h.tagList.push(g?[y,g]:[y]);break;case"PLAYLIST-TYPE":u.type=y.toUpperCase();break;case"MEDIA-SEQUENCE":o=u.startSN=parseInt(y);break;case"TARGETDURATION":u.targetduration=parseFloat(y);break;case"VERSION":u.version=parseInt(y);break;case"EXTM3U":break;case"ENDLIST":u.live=!1;break;case"DIS":c++,h.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":c=parseInt(y);break;case"KEY":var v=new S(y),b=v.enumeratedString("METHOD"),_=v.URI,v=v.hexadecimalInteger("IV");b&&(l=new O,_&&0<=["AES-128","SAMPLE-AES"].indexOf(b)&&(l.method=b,l.baseuri=e,l.reluri=_,l.key=null,l.iv=v));break;case"START":var T=new S(y).decimalFloatingPoint("TIME-OFFSET");isNaN(T)||(u.startTimeOffset=T);break;case"MAP":T=new S(y);h.relurl=T.URI,h.rawByteRange=T.BYTERANGE,h.baseurl=e,h.level=i,h.type=n,h.sn="initSegment",u.initSegment=h,h=new C;break;default:E.b.warn("line parsed but not handled: "+r)}}}return(h=d)&&!h.relurl&&(u.fragments.pop(),s-=h.duration),u.totalduration=s,u.averagetargetduration=s/u.fragments.length,u.endSN=o-1,u.startCC=u.fragments[0]?u.fragments[0].cc:0,u.endCC=c,u},P.prototype.loadsuccess=function(t,e,i){var n,r,a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,o=t.data,s=t.url,u=i.type,l=i.id,c=i.level,t=this.hls;(this.loaders[u]=void 0)!==s&&0!==s.indexOf("data:")||(s=i.url),e.tload=performance.now(),0===o.indexOf("#EXTM3U")?0<o.indexOf("#EXTINF:")?(i="audioTrack"!==u&&"subtitleTrack"!==u,n=isNaN(c)?isNaN(l)?0:l:c,(n=this.parseLevelPlaylist(o,s,n,"audioTrack"===u?"audio":"subtitleTrack"===u?"subtitle":"main")).tload=e.tload,"manifest"===u&&t.trigger(T.a.MANIFEST_LOADED,{levels:[{url:s,details:n}],audioTracks:[],url:s,stats:e,networkDetails:a}),e.tparsed=performance.now(),n.targetduration?i?t.trigger(T.a.LEVEL_LOADED,{details:n,level:c||0,id:l||0,stats:e,networkDetails:a}):"audioTrack"===u?t.trigger(T.a.AUDIO_TRACK_LOADED,{details:n,id:l,stats:e,networkDetails:a}):"subtitleTrack"===u&&t.trigger(T.a.SUBTITLE_TRACK_LOADED,{details:n,id:l,stats:e,networkDetails:a}):t.trigger(T.a.ERROR,{type:w.b.NETWORK_ERROR,details:w.a.MANIFEST_PARSING_ERROR,fatal:!0,url:s,reason:"invalid targetduration",networkDetap(function(t){return{id:t.attrs.AUDIO,codec:t.audioCodec}}),l=this.parseMasterPlaylistMedia(o,s,"AUDIO",l),o=this.parseMasTLES"),l.length&&(r=!1,l.forEach(function(t){t.url||(r=!0)}),!1===r&&n[0].audioCodec&&!n[0].attrs.AUDIO&&(E.b.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),l.unshift({type:"main",name:"main"}))),t.trigger(T.a.MANIFEST_LOADED,{levels:n,audioTracks:l,subtitles:o,url:s,stats:e,networkDetails:a})):t.trigger(T.a.ERROR,{type:w.b.NETWORK_ERROR,details:w.a.MANIFEST_PARSING_ERROR,fatal:!0,url:s,reason:"no level found in manifest",networkDetails:a}):t.trigger(T.a.ERROR,{type:w.b.NETWORK_ERROR,details:w.a.MANIFEST_PARSING_ERROR,fatal:!0,url:s,reason:"no EXTM3U delimiter",networkDetails:a})},P.prototype.loaderror=function(t,e){var i,n,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=e.loader;switch(e.type){case"manifest":i=w.a.MANIFEST_LOAD_ERROR,n=!0;break;case"level":i=w.a.LEVEL_LOAD_ERROR,n=!1;break;case"audioTrack":i=w.a.AUDIO_TRACK_LOAD_ERROR,n=!1}a&&(a.abort(),this.loaders[e.type]=void 0),this.hls.trigger(T.a.ERROR,{type:w.b.NETWORK_ERROR,details:i,fatal:n,url:a.url,loader:a,response:t,context:e,networkDetails:r})},P.prototype.loadtimeout=function(t,e){var i,n,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=e.loader;switch(e.type){case"manifest":i=w.a.MANIFEST_LOAD_TIMEOUT,n=!0;break;case"level":i=w.a.LEVEL_LOAD_TIMEOUT,n=!1;break;case"audioTrack":i=w.a.AUDIO_TRACK_LOAD_TIMEOUT,n=!1}a&&(a.abort(),this.loaders[e.type]=void 0),this.hls.trigger(T.a.ERROR,{type:w.b.NETWORK_ERROR,details:i,fatal:n,url:a.url,loader:a,context:e,networkDetails:r})},P);function I(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,I);t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,x.call(this,t,T.a.FRAG_LOADING));return t.loaders={},t}var D,M=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.seti.destroy()}this.loaders={},u.prototype.destroy.call(this)},I.prototype.onFragLoading=function(t){var e=t.frag,i=e.type,n=this.loaders[i],r=this.hls.config;e.loaded=0,n&&(E.b.warn("abort previous fragment loader for type:"+i),n.abort());var a,n=this.loaders[i]=e.loader=new(void 0!==r.fLoader?r.fLoader:r.loader)(r),o=void 0,t=void 0,o={url:e.url,frag:e,responseType:"arraybuffer",progressData:!1},i=e.byteRangeStartOffset,e=e.byteRangeEndOffset;isNaN(i)||isNaN(e)||(o.rangeStart=i,o.rangeEnd=e),a={timeout:r.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:r.fragLoadingMaxRetryTimeout},t={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},n.load(o,a,t)},I.prototype.loadsuccess=function(t,e,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,t=t.data,i=i.frag;i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(T.a.FRAG_LOADED,{payload:t,frag:i,stats:e,networkDetails:n})},I.prototype.loaderror=function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=e.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(T.a.ERROR,{type:w.b.NETWORK_ERROR,details:w.a.FRAG_LOAD_ERROR,fatal:!1,frag:e.frag,response:t,networkDetails:i})},I.prototype.loadtimeout=function(t,e){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=e.loader;n&&n.abort(),this.loaders[e.type]=void 0,this.hls.trigger(T.a.ERROR,{type:w.b.NETWORK_ERROR,details:w.a.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e.frag,networkDetails:i})},I.prototype.loadprogress=function(t,e,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,e=e.frag;e.loaded=t.loaded,this.hls.trigger(T.a.FRAG_LOAD_PROGRESS,{frag:e,stats:t,networkDetails:n})},I);function j(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,j);t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,D.call(this,t,T.a.KEY_LOADING));return t.loaders={},t.decryptkey=null,t.decrypturl=null,t}var N=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.sett.destroy()}this.loaders={},u.prototype.destroy.call(this)},j.prototype.onKeyLoading=function(t){var e,i=t.frag,n=i.type,r=this.loaders[n],a=i.decryptdata,o=a.uri;o!==this.decrypturl||null===this.decryptkey?(e=this.hls.config,r&&(E.b.warn("abort previous key loader for type:"+n),r.abort()),i.loader=this.loaders[n]=new e.loader(e),this.decrypturl=o,this.decryptkey=null,n=r=t=void 0,t={url:o,frag:i,responseType:"arraybuffer"},r={timeout:e.fragLoadingTimeOut,maxRetry:e.fragLoadingMaxRetry,retryDelay:e.fragLoadingRetryDelay,maxRetryDelay:e.fragLoadingMaxRetryTimeout},n={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},i.loader.load(t,r,n)):this.decryptkey&&(a.key=this.decryptkey,this.hls.trigger(T.a.KEY_LOADED,{frag:i}))},j.prototype.loadsuccess=function(t,e,i){i=i.frag;this.decryptkey=i.decryptdata.key=new Uint8Array(t.data),i.loader=void 0,this.loaders[i.type]=void 0,this.OR,details:w.a.KEY_LOAD_TWORK_ERROR,d]);if(0<o)i=1+r)if(e>=i.sti)}}catch(t){}return{len:0,start:e,end:e,nextStart:void 0}}(function(t,e){var i=t.start-e.start;return i||e.end-t.end}),s=0;s<t.length;s++){var l,c=u.length;c?(l=u[c-1].end,t[s].start-l<i?t[s].end>l&&(u[c-1].end=t[s].end):u.push(t[s])):u.push(t[s])}for(n=s=0,r=a=e;s<u.length;s++){var d=u[s].start,h=u[s].end;if(d<=e+i&&e<h)r=d,n=(a=h)-e;else if(e+i<d){o=d;break}}return{len:n,start:r,window)return window.MediaSource||window.WebKitMediaSource}var K=W();function z(i,t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,z),this.hls=i,this.id=t;var r=this.observer=new H.a,e=i.config;r.trigger=function(t){for(var e=arguments.length,i=Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];r.emit.apply(r,[t,t].concat(i))},r.off=function(t){for(var e=arguments.length,i=Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=(t,e){(e=e||{}).frag=this.frag,e.id=this.id,i.trigger(t,e)}.bind(this);r.on(T.a.FRAG_DECRYPTED,n),r.on(T.a.FRAG_PARSING_INIT_SEGMENT,n),r.on(T.a.FRAG_PARSING_DATA,n),r.on(T.a.FRAG_PARSED,n),r.on(T.a.ERROR,n),r.on(T.a.FRAG_PARSING_METADATA,n),r.on(T.a.FRAG_PARSING_USERDATA,n),r.on(T.a.INIT_PTS_FOUND,n);var a={mp4:K.isTypeSupported("video/mp4"),mpeg:K.isTypeSupported("audio/mpeg"),mp3:K.isTypeSupported('audio/mp4; codecs="mp3"')},o=navigator.vendor;if(e.enableWorker&&"undefined"!=typeof Worker){E.b.log("demuxing in webworker");n=void 0;try{n=this.w=q()(10),this.onwmsg=this.onWorkerMessage.binerr:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},n.postMessage({cmd:"init",typeSupported:a,vendor:o,id:t,config:JSON.stringify(e)})}catch(t){E.b.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),n&&URL.revokeObjectURL(n.objectURL),this.demuxer=new B.a(r,a,e,o),this.w=void 0}}elis.observer;e&&(e.removeAllListeners(),this.observer=null)},z.prototype.push=function(t,e,i,n,r,a,o,s){var u=this.w,l=isNaN(r.startDTS)?r.start:r.startDTS,c=r.decryptdata,d=this.frag,h=!(d&&r.cc===d.cc),f=!(d&&r.level===d.level),d=d&&r.sn===d.sn+1,d=!f&&d;h&&E.b.log(this.id+":discontinuity detected"),f&&E.b.log(this.id+":switch detected"),this.frag=r,u?u.postMessage({cmd:"demux",data:t,decryptdata:c,initSegment:e,audioCodec:i,videoCodec:n,timeOffset:l,discontinuity:h,trackSwitch:f,contiguous:d,duration:a,accurateTimeOffset:o,defaultInitPTS:s},t instanceof ArrayBuffer?[t]:[]):(u=this.demuxer)&&uragd be some duration drift between playlist and fragment!"))}function $(t,e,i,n,r,a){var o=i;isNaN(e.startPTS)||(s=Math.abs(e.startPTS-i),isNaN(e.deltaPTS)?e.deltaPTS=s:e.deltaPTS=Math.max(s,e.deltaPTS),o=Math.max(i,e.startPTS),i=Math.min(i,e.startPTS),n=Math.max(n,e.endPTS),r=Math.min(r,e.startDTS),a=Math.max(a,e.endDTS));var s=i-e.start;e.start=e.startPTS=i,e.maxStartPTS=o,e.endPTS=n,e.startDTS=r,e.endDTS=a,e.duration=n-i;var u,l,i=e.sn;if(!t||i<t.startSN||i>t.endSN)return 0;for(i=i-t.startSN,(u=t.fragments)[i]=e,l=i;0<l;l--)Y(u,l,l-1);for(l=i;l<u.length-1;l++)Y(u,l,l+1);return t.PTSKnown=!0,s}function J(t,e){var i,n=Math.max(t.startSN,e.startSN)-e.startSN,r=Math.min(t.endSN,e.endSN)-e.startSN,a=e.startSN-t.startSN,o=t.fragments,s=e.fragments,u=0;if(r<n)e.PTSKnown=!1;else{for(var l=n;l<=r;l++){var c=o[a+l],d=s[l];d&&c&&(u=c.cc-d.cc,isNaN(c.startPTS)||(d.start=d.startPTS=c.startPTS,d.endPTS=c.endPTS,d.duration=c.duration,d.backtracked=c.backtracked,d.dropped=c.dropped,i=d))}if(u)for(E.b.log("discontinuity sliding from playlist, take drift into account"),l=0;l<s.length;l++)s[l].cc+=u;if(i)$(e,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS);else if(0<=a&&a<o.length)for(var h=o[a].start,l=0;l<s.lengt.start(n).toFixed(3)+","+t.end(n).toFixed(3)+"]";return e}};function ength;n+=1){var r=t[n];if(r&&r.cc===e){i=r;break}}return i}(t,e[0].cc);if(e&&(!e||e.startPTS))return e;E.b.log("No frag in previou.start=t.startPTS=e,t.endPTS=e+t.duration)}),t.PTSKnown=!0}function et(t,e,i){var n,r,a,o;n=t,r=i,a=!1,(a=!!((t=e)&&t.details&&r&&(r.endCC>r.startCC||n&&n.cc<r.startCC))||a)&&(o=Z(e.details,i))&&(E.b.log("Adjusting PTS using last level due to CC increase within current level"),tt(o.start,i)),!1===i.PTSKnown&&e&&e.details&&(o=e.details.programDateTime,e=(i.programDateTime-o)/1e3+e.details.fragments[0].start,isNaN(e)||(E.b.log("adjusting PTS using programDateTime delta, sliding:"+e.toFixed(3)),tt(e,i)))}var it=function(t,e,i){return e&&nt(t.prototype,e),i&&nt(t,i),t};function nt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var rt,at={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_LEVEL:"WAITING_LEVEL",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR"};function ot(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,ot);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,rt.call(this,t,T.a.MEDIA_ATTACHED,T.a.MEDIA_DETACHING,T.a.MANIFEST_LOADING,T.a.MANIFEST_PARSED,T.a.LEVEL_LOADED,T.a.KEY_LOADED,T.a.FRAG_LOADED,T.a.FRAG_LOAD_EMERGENCY_ABORTED,T.a.FRAG_PARSING_INIT_SEGMENT,T.a.FRAG_PARSING_DATA,T.a.FRAG_PARSED,T.a.ERROR,T.a.AUDIO_TRACK_SWITCHING,T.a.AUDIO_TRACK_SWITCHED,T.a.BUFFER_CREATED,T.a.BUFFER_APPENDED,T.a.BUFFER_FLUSHED));return e.config=t.config,e.audioCodecSwap=!1,e.ticks=0,e._state=at.STOPPED,e.ontick=e.tick.bind(e),e}var st,ut=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(ot,rt=u),ot.prototype.destroy=function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),u.prototype.destroy.call(this),this.state=at.STOPPED},ot.prototype.startLoad=function(t){var e,i,n;this.levels?(e=this.lastCurrentTime,i=this.hls,this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,this.startFragRequested||(-1===(n=i.startLevel)&&(this.bitrateTest=!(n=0)),this.level=i.nextLoadLevel=n,this.loadedmetadata=!1),0<e&&-1===t&&(E.b.log("override startPosition with lastCurrentTime @"+e.toFixed(3)),t=e),this.state=at.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=t,this.tick()):(this.forcdemuxer=null),this.state=at.STOPPED,this.forceStartLoad=!1},ot.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),1<this.ticks&&setTimeout(this.tick,1),this.ticks=0)},ot.prototype.doTick=function(){switch(this.state){case at.ERROR:break;case at.BUFFER_FLUSHING:this.fragLoadError=0;break;case at.IDLE:this._doTickIdle();break;case at.WAITING_LEVEL:var t=this.levels[this.level];t&&t.details&&(this.state=at.IDLE);break;case at.FRAG_LOADING_WAITING_RETRY:var e=performance.now(),t=this.retryDate;(!t||t<=e||this.media&&this.media.seeking)&&(E.b.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=at.IDLE);break;case at.ERROR:case at.STOPPED:case at.FRAG_LOADING:case at.PARSING:case at.PARSED:case at.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},ot.prototype._doTickIdle=function(){var t=this.hls,e=t.config,i=this.media;if(void 0!==this.levelLastLoaded&&(i||!this.startFragRequested&&e.startFragPrefetch)){var n=void 0,n=this.loadedmetadata?i.currentTime:this.nextLoadPosition,r=t.nextLoadLevel,a=this.levels[r];if(a){var o=a.bitrate,s=void 0,s=o?Math.max(8*e.maxBufferSize/o,e.maxBufferLength):e.maxBufferLength;s=Math.min(s,e.maxMaxBufferLength);o=F.bufferInfo(this.mediaBuffer||i,n,e.maxBufferHole),e=o.len;if(!(s<=e)){E.b.trace("buffer length of "+e.toFixed(3)+" is below max of "+s.toFixed(3)+". checking for more payload ..."),this.level=t.nextLoadLevel=r;a=a.details;if(void 0===a||!0===a.live&&this.levelLastLoaded!==r)this.state=at.WAITING_LEVEL;else{r=this.fragPrevious;if(!a.live&&r&&!r.backtracked&&r.sn===a.endSN&&!o.nextStart)if(Math.min(i.duration,r.start+r.duration)-Math.max(o.end,r.start)<=Math.max(.2,r.duration)){r={};return this.altAudio&&(r.type="video"),this.hls.trigger(T.a.BUFFER_EOS,r),void(this.state=at.ENDED)}this._fetchPayloadOrEos(n,o,a)}}}}},ot.prototype._fetchPayloadOrEos=function(t,e,i){var n=this.fragPrevious,r=this.level,a=i.fragments,o=a.length;if(0!==o){var s=a[0].start,u=a[o-1].start+a[o-1].duration,l=e.end,c=void 0;if(i.initSegment&&!i.initSegment.data)c=i.initSegment;else if(i.live){e=this.config.initialLiveManifestSize;if(o<e)return void E.b.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+e);if(null===(c=this._ensureFragmentAtLivePoint(i,l,s,u,n,a,o)))return}else l<s&&(c=a[0]);(c=c||this._findFragment(s,n,o,a,l,u,i))&&this._loadFragmentOrKey(c,r,i,t,l)}},ot.prototype._ensureFragmentAtLivePoint=function(t,e,i,n,r,a,o){var s=this.hls.config,u=this.media,l=void 0,c=void 0!==s.liveMaxLatencyDuration?s.liveMaxLatencyDuration:s.liveMaxLatencyDurationCount*t.targetduration;return e<Math.max(i-s.maxFragLookUpTolerance,n-c)&&(i=this.liveSyncPosition=this.computeLivePosition(i,t),E.b.log("buffer end: "+e.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+i.toFixed(3)),e=i,u&&u.readyState&&u.duration>i&&(u.currentTime=i),this.nextLoadPosition=i),t.PTSKnown&&n<e&&u&&u.readyState?null:(this.startFragRequested&&!t.PTSKnown&&(r&&((u=r.sn+1)>=t.startSN&&u<=t.endSN&&(t=a[u-t.startSN],r.cc===t.cc&&E.b.log("live playlist, switching play"+(l=t).sn)),l||(l=U.search(a,function(t){return r.cc-t.cc}))&&E.b.log("live playlist, switching playlist, load frag with same CC: "+l.sn)),l||(l=a[Math.min(o-1,Math.round(o/2))],E.b.log("live playlist, switching playlist, unknown, load middle frag : "+l.sn))),l)},ot.prototype._findFragment=function(t,e,i,n,r,a,o){var s=this.hls.config,u=void 0,l=void 0,c=s.maxFragLookUpTolerance,d=e?n[e.sn-n[0].sn+1]:void 0,h=function(t){var e=Math.min(c,t.duration+(t.deltaPTS||0));return t.start+t.duration-e<=r?1:t.start-e>r&&t.start?-1:0};return(l=r<a?(a-c<r&&(c=0),d&&!h(d)?d:U.search(n,h)):n[i-1])&&(h=(u=l).sn-o.startSN,i=e&&u.level===e.level,l=n[h-1],n=n[1+h],e&&u.sn===e.sn&&(i&&!u.backtracked?u.sn<o.endSN?(o=e.deltaPTS)&&o>s.maxBufferHole&&e.dropped&&h?(u=l,E.b.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),e.loadCounter--):E.b.log("SN just loaded, load next one: "+(u=n).sn):u=null:u.backtracked&&(n&&n.backtracked?(E.b.warn("Already backtracked from fragment "+n.sn+", will not backtrack to fragment "+u.sn+". Loading fragment "+n.sn),u=n):(E.b.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),u.dropped=0,l?(l.loadCounter&&l.loadCounter--,(u=l).backtracked=!0):h&&(u=null))))),u},ot.prototype._loadFragmentOrKey=function(t,e,i,n,r){var a=this.hls,o=a.config;if(t.decryptdata&&null!=t.decryptdata.uri&&null==t.decryptdata.key)E.b.log("Loading key for "+t.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+e),this.state=at.KEY_LOADING,a.trigger(T.a.KEY_LOADING,{frag:t});else{if(E.b.log("Loading "+t.sn+" of ["+i.startSN+" ,"+i.endSN+"],level "+e+", currentTime:"+n.toFixed(3)+",bufferEnd:"+r.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,t.loadCounter){t.loadCounter++;o=o.fragLoadingLoopThreshold;if(t.loadCounter>o&&Math.abs(this.fragLoadIdx-t.loadIdx)<o)return void a.trigger(T.a.ERROR,{type:w.b.MEDIA_ERROR,details:w.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:t})}else t.loadCounter=1;t.loadIdx=this.fragLoadIdx,t.autoLevel=a.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.fragCurrent=t,this.startFragRequested=!0,isNaN(t.sn)||t.bitrateTest||(this.nextLoadPosition=t.start+t.duration),a.trigger(T.a.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new X(a,"main")dFrags,function(t){return e<t.startunction(t){return t?this.getBufferedFrag(t.endPTS+.5):null},ot.prototype._checkFragmentChanged=function(){var t,e,i=this.media;i&&i.readyState&&!1===i.seeking&&((e=i.currentTime)>i.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=e),F.isBuffered(i,e)?t=this.getBufferedFrag(e):F.isBuffered(i,e+.1)&&(t=this.getBufferedFrag(e+.1)),!t||(e=t)!==this.fragPlaying&&(this.hls.trigger(T.a.FRAG_CHANGED,{frag:e}),t=e.level,this.fragPlaying&&this.fragPlaying.level===t||this.hls.trigger(T.a.LEVEL_SWITCHED,{level:t}),this.fragPlaying=e))},ot.prototype.immediateLevelSwitch=function(){var t;E.b.log("immediateLevelSwitch"),this.immediateSwitch||(this.immediateSwitch=!0,e=void 0,(t=this.media)?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e);var e=this.fragCurrent;e&&e.loader&&e.loader.abort(),this.fragCurrent=null,void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.flushMainBuffer(0,Numbe)&&(t.currentTime-=1e-4),this.previouslyPaused||t.play())},ot.prototype.nextLevelSwitch=function(){var t,e,i,n,r=this.media;r&&r.readyState&&((n=t=i=void 0)!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),(t=this.getBufferedFrag(r.currentTime))&&1<t.startPTS&&this.flushMainBuffer(0,t.startPTS-1),i=r.paused?0:(e=this.hls.nextLoadLevel,t=this.levels[e],(e=this.fragLastKbps)&&this.fragCurrent?this.fragCurrent.duration*t.bitrate/(1e3*e)+1:0),(n=(n=this.getBufferedFrag(r.currentTime+i))&&this.followingBufferedFrag(n))&&((i=this.fragCurrent)&&i.loader&&i.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(n.maxStartPTS,Number.POSITIVE_INFINITY)))},ot.prototype.flushMainBuffer=function(t,e){this.state=at.BUFFER_FLUSHING;e={startOffset:t,endOffset:e};this.altAudio&&(e.type="video"),this.hls.trigger(T.a.BUFFER_FLUSHING,e)},ot.prototype.onMediaAttached=function(t){t=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);t=this.config;this.levels&&t.autoStartLoad&&this.hlis.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},ot.prototype.onMediaSeeking=function(){var t=this.media,e=t?t.currentTime:void 0,i=this.config;isNaN(e)||E.b.log("media seeking to "+e.toFixed(3));var n,r,a=this.mediaBuffer||t,o=F.bufferInfo(a,e,this.config.maxBufferHole);this.state===at.FRAG_LOADING?(n=this.fragCurrent,0===o.len&&n&&(r=i.maxFragLookUpTolerance,a=n.start-r,r=n.start+n.duration+r,e<a||r<e?(n.loader&&(E.b.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=at.IDLE):E.b.log("seeking outside of buffer but within currently loaded fragment range"))):this.state===at.ENDED&&(0===o.len&&(this.fragPrevious=0),this.state=at.IDLE),t&&(this.lastCurrentTime=e),this.state!==at.FRAG_LOADING&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*i.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=thN(t)||E.b.log("media seekeg("media ended"),this.startPosi,this.stalled=!1,this.startPosition=this.lastCurrentTime=0},ot.prototype.on("mp4a.40.2")&&(i=!0),-1!==e.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=i&&n,this.audioCodecSwitch&&E.b.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1;t=this.config;(t.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(t.startPosition)},ot.prototype.onLevelLoaded=function(t){var e=t.details,i=t.level,n=this.levels[this.levelLastLoaded],r=this.levels[i],a=e.totalduration,o=0;E.b.log("level "+i+" loaded ["+e.startSN+","+e.endSN+"],duration:"+a),e.live?(t=r.details)&&0<e.fragments.length?(J(t,e),o=e.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,t),e.PTSKnown&&!isNaN(o)?E.b.log("live playlist sliding:"+o.toFixed(3)):(E.b.log("live playlist - outdated PTS, unknown sliding"),et(this.fragPrevious,n,e))):(E.b.log("live playlist - first load, unknown sliding"),e.PTSKnown=!1,et(this.fragPrevious,n,e)):e.PTSKnown=!1,r.details=e,this.levelLastLoaded=i,this.hls.trigger(T.a.LEVEL_UPDATED,{details:e,level:i}),!1===this.startFragRequested&&(-1!==this.startPosition&&-1!==this.lastCurrentTime||(i=e.startTimeOffset,isNaN(i)?e.live?(this.startPosition=this.computeLivePosition(o,e),E.b.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(i<0&&(E.b.log("negative start time offset "+i+", count from end of last fragment"),i=o+a+i),E.b.log("start time offset found in playlist, adjust startPosition to "+i),this.startPosition=i),this.lastCurrentTime=this.startPosition),this.nextLoadPosition=this.startPosition),this.state===at.WAITING_LEVEL&&(this.state=at.IDLE),this.tick()},ot.prototype.onKeyLoaded=function(){this.state===at.KEY_LOADING&&(this.state=at.IDLE,this.tick())},ot.prototype.onFragLoaded=function(t){var e,i,n,r,a,o=this.fragCurrent,s=t.frag;this.state===at.FRAG_LOADING&&o&&"main"===s.type&&s.level===o.level&&s.sn===o.sn&&(n=t.stats,a=(e=this.levels[o.level]).details,E.b.log("Loaded  "+o.sn+" of ["+a.startSN+" ,"+a.endSN+"],level "+o.level),this.bitrateTest=!1,this.stats=n,!0===s.bitrateTest&&this.hls.nextLoadLevel?(this.state=at.IDLE,this.startFragRequested=!1,n.tparsed=n.tbuffered=performance.now(),this.hls.trigger(T.a.FRAG_BUFFERED,{stats:n,frag:o,id:"main"}),this.tick()):"initSegment"===s.sn?(this.state=at.IDLE,n.tparsed=n.tbuffered=performance.now(),a.initSegment.data=t.payload,this.hls.trigger(T.a.FRAG_BUFFERED,{stats:n,frag:o,id:"main"}),this.tick()):(this.state=at.PARSING,i=a.totalduration,r=o.level,s=o.sn,n=this.config.defaultAudioCodec||e.audioCodec,this.audioCodecSwap&&(E.b.log("swapping playlist audio codec"),n=(n=void 0===n?this.lastAudioCodec:n)&&(-1!==n.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,E.b.log("Parsing "+s+" of ["+a.startSN+" ,"+a.endSN+"],level "+r+", cc "+o.cc),s=(s=this.demuxer)||(this.demuxer=new X(this.hls,"main")),r=!((r=this.media)&&r.seeking)&&(a.PTSKnown||!a.live),a=a.initSegment?a.initSegment.data:[],s.push(t.payload,a,n,e.videoCodec,o,i,r,void 0))),this.fragLoadError=0},ot.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,i=t.frag;if(e&&"main"===t.id&&i.sn===e.sn&&i.level===e.level&&this.state===at.PARSING){var n,r,a=t.tracks;for(n in a.audio&&this.altAudio&&delete a.audio,(r=a.audio)&&(i=this.levels[this.level].audioCodec,e=navigator.userAgent.toLowerCase(),i&&this.audioCodecSwap&&(E.b.log("swapping playlist audio codec"),i=-1!==i.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==r.metadata.channelCount&&-1===e.indexOf("firefox")&&(i="mp4a.40.5"),-1!==e.indexOf("android")&&"audio/mpeg"!==r.container&&E.b.log("Android: force audio codec to "+(i="mp4a.40.2")),r.levelCodec=i,r.id=t.id),(r=a.video)&&(r.levelCodec=this.levels[this.level].videoCodec,r.id=t.id),this.hls.trigger(T.a.BUFFER_CODECS,a),a){r=a[n],E.b.log("main track:"+n+",container:"+r.container+",codecs[level/parsed]=["+r.levelCodec+"/"+r.codec+"]");var o=r.initSegment;o&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(T.a.BUFFER_APPENDING,{type:n,data:o,parent:"main",content:"initSegment"}))}this.tick()}},ot.prototype.onFragParsingData=function(e){var i=this,t=this.fragCurrent,n=e.frag;if(t&&"main"===e.id&&n.sn===t.sn&&n.level===t.level&&("audio"!==e.type||!this.altAudio)&&this.state===at.PARSING){var r=this.levels[this.level],n=t;if(isNaN(e.endPTS)&&(e.endPTS=e.startPTS+t.duration,e.endDTS=e.startDTS+t.duration),E.b.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(n.dropped=e.dropped,n.dropped)if(n.backtracked)E.b.warn("Already backtracked on this fragment, appending with the gap");else{t=r.details;if(!t||n.sn!==t.startSN)return E.b.warn("missing video frame(s), backtracking fragment"),n.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=at.IDLE,this.fragPrevious=n,void this.tick();E.b.warn("missing video frame(s) on first frag, appending with gap")}else n.backtracked=!1;var n=$(r.details,n,e.startPTS,e.endPTS,e.startDTS,e.endDTS),a=this.hls;a.trigger(T.a.LEVEL_PTS_UPDATED,{details:r.details,level:this.level,drift:n,type:e.typENDING,{type:e.type,data:t,parent:"main",content:"data"}))}),this.tick()}},ot.prototype.onFragParsed=function(t){var e=this.fragCurrent,i=t.frag;e&&"main"===t.id&&i.sn===e.sn&&i.level===e.level&&this.state===at.PARSING&&(this.stats.tparsed=performance.now(),this.state=at.PARSED,this._checkAppendedParsed())},ot.prototype.onAudioTrackSwitching=function(t){var e,i=!!t.url,t=t.id;i||(this.mediaBuffer!==this.media&&(E.b.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media,(e=this.fragCurrent).loader&&(E.b.log("switching to main audio track, cancel main fragment load"),e.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=at.IDLE),(e=this.hls).trigger(T.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),e.trigger(T.a.AUDIO_TRACK_SWITCHED,{ loading"),this.mediaBuffer=e),this.altAudio=t,this.tick()},ot.prototype.onBufferCreated=function(t){var e,i=t.tracks,n=void 0,r=void 0,a=!1;for(e in i){var o=i[e];"main"===o.id?(n=o,"video"===(r=e)&&(this.videoBuffer=i[e].buffer)):a=!0}a&&n?(E.b.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=n.buffer):this.mediaBuffer=this.media},ot.prototype.onBufferAppended=function(t){var e;"main"===t.parent&&((e=this.state)!==at.PARSING&&e!==at.PARSED||(this.pendingBuffering=0<t.pending,this._checkAppendedParsed()))},ot.prototype._checkAppendedParsed=function(){var t,e,i;this.state!==at.PARSED||this.appended&&this.pendingBuffering||((t=this.fragCurrent)&&(e=this.mediaBuffer||this.media,E.b.log("main buffered : "+Q.toString(e.buffered)),(i=this._bufferedFrags.filter(function(t){return F.isBuffered(e,(t.startPTS+t.endPTS)/2)})).push(t),this._bufferedFrags=i.sort(function(t,e){return t.startPTS-e.startPTS}),this.fragPrevious=t,(i=this.stats).tbuffered=performance.now(),this.fragLastKbps=Math.round(8*i.total/(i.tbuffered-i.tfirst)),this.hls.trigger(T.a.FRAG_BUFFERED,{stats:i,frag:t,id:"main"}),this.state=at.IDLE),this.tick())},ot.prototype.onError=function(t){var e=t.frag||this.fragCurrent;if(!e||"main"===e.type){var i,n=!!this.media&&F.isBuffered(this.media,this.media.currentTime)&&F.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case w.a.FRAG_LOAD_ERROR:case w.a.FRAG_LOAD_TIMEOUT:case w.a.KEY_LOAD_ERROR:case w.a.KEY_LOAD_TIMEOUT:t.fatal||(this.fragLoadError+1<=this.config.fragLoadingMaxRetry?(i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout),e.loadCounter=0,E.b.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=at.FRAG_LOADING_WAITING_RETRY):(E.b.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=at.ERROR));break;case w.a.FRAG_LOOP_LOADING_ERROR:t.fatal||(n?(this._reduceMaxBufferLength(e.duration),this.state=at.IDLE):e.autoLevel&&0!==e.level||(t.fatal=!0,this.state=at.ERROR));break;case w.a.LEVEL_LOAD_ERROR:case w.a.LEVEL_LOAD_TIMEOUT:this.state!==at.ERROR&&(t.fatal?(this.state=at.ERROR,E.b.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==at.WAITING_LEVEL||(this.state=at.IDLE));break;case w.a.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==at.PARSING&&this.state!==at.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=at.IDLE):(E.b.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.LoadIdx&&(this.fragLoadIdx+=2*e.fragLoadingLoopThreshold))},ot.prototype._checkBuffer=function(){var t,e,i,n,r,a,o,s,u=this.media,l=this.config;u&&u.readyState&&(t=u.currentTime,e=(r=this.mediaBuffer||u).buffered,!this.loadedmetadata&&e.length?(this.loadedmetadata=!0,s=u.seeking?t:this.startPosition,i=F.isBuffered(r,s),o=e.start(0),n=!i&&Math.abs(s-o)<l.maxSeekHole,t===s&&!n||(E.b.log("target start position:"+s),n&&E.b.log("target start position not buffered, seek to buffered.start(0) "+(s=o)),E.b.log("adjust currentTime from "+t+" to "+s),u.currentTime=s)):this.immediateSwitch?this.immediateLevelSwitchEnd():(a=F.bufferInfo(u,t,0),r=!(u.paused||u.ended||0===u.buffered.length),t!==this.lastCurrentTime?(this.stallReported&&(E.b.warn("playback not stuck anymore @"+t+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0):r&&(e=performance.now(),i=this.hls,this.stalled?(n=e-this.stalled,o=a.len,s=this.nudgeRetry||0,o<=.5&&n>1e3*l.lowBufferWatchdogPeriod?(this.stallReported||(this.stallReported=!0,E.b.warn("playback stalling in low buffer @"+t),i.trigger(T.a.ERROR,{type:w.b.MEDIA_ERROR,details:w.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:o})),a=(r=a.nextStart)-t,r&&a<l.maxSeekHole&&0<a&&(this.nudgeRetry=++s,a=s*l.nudgeOffset,E.b.log("adjust currentTime from "+u.currentTime+" to next buffered @ "+r+" + nudge "+a),u.currentTime=r+a,this.stalled=void 0,i.trigger(T.a.ERROR,{type:w.b.MEDIA_ERROR,details:w.a.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:r+a-t}))):.5<o&&n>1e3*l.highBufferWatchdogPeriod&&(this.stallReported||(this.stallReported=!0,E.b.warn("playback stalling in high buffer @"+t),i.trigger(T.a.ERROR,{type:w.b.MEDIA_ERROR,details:w.a.BUFFER_STALLED_ERROR,fatal:!1,buffer:o})),this.stalled=void 0,this.nudgeRetry=++s,s<l.nudgeMaxRetry?(s=(o=u.currentTime)+s*l.nudgeOffset,E.b.log("adjust currentTime from "+o+" to "+s),u.currentTime=s,i.trigger(T.a.ERROR,{type:w.b.MEDIA_ERROR,details:w.a.BUFFER_NUDGE_ON_STALL,fatal:!1})):(E.b.error("still stuck in high buffer @"+t+" after "+l.nudgeMaxRetry+", raise fatal error"),i.trigger(T.a.ERROR,{type:w.b.MEDIA_ERROR,details:w.a.BUFFER_STALLED_ERROR,fatal:!0})))):(this.stalled=e,this.std=!1,this.nextLoadPosition=this.startPosition),this.tick()},ot.prototype.onBufferFlushed=function(){var e=this.mediaBufferfunction(t){return F.isBuffered(e,(t.startPTS+t.endPTS)/2)}),void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold),this.state=oCodec=function(){this.audioCodecnt*e.targetduration;retu.a.STREAM_STATE_TRANSITION,{previousState:e,nextState:t}))},etBufferedFrag(t.currentTime)wingBufferedFrag(this.getBufferedFrag(t.currentTime)):null}},{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(t){this._liveSyncPosition=t}}]),ot),lt=function(t,e,i){return e&&ct(t.prototype,e),i&&ct(t,i),t};function ct(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function dt(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,dt);t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,st.call(this,t,T.a.MANIFEST_LOADED,T.a.LEVEL_LOADED,T.a.FRAG_LOADED,T.a.ERROR));return t.canload=!1,t.currentLevelIndex=null,t.manualLevelIndex=-1,t.timer=null,t}var ht,ft=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setProtroy=function(){this.clel!==this.timer&&(clearT&&(t.details=void 0)}),null!==this.timer&&this.loadLevel()},dt.prototype.stopLoad=function(){this.canload=!1},dt.prototype.onManifestLoaded=function(t){var e,i=[],n={},r=null,a=!1,o=!1,s=/chrome|firefox/.test(url],t.urlId=0,n[t.bitrate]=t,i.push(t)):r.url.push(t.url)}),i=(i=!0===a&&!e=t.audioCodec,t=t.videoCodec;return(!e|r(function(t){return!t.audioCodec||f(t.audioCodec,"audio")})),0<i.length){e=i[0].bitrate,i.sort(function(t,e){return t.bitrate-e.bitrate}),this._levels=i;for(var l=0;l<i.length;l++)if(i[l].bitrate===e){this._firstLevel=l,E.b.log("manifest loaded,"+i.length+" level(s) found, first bitrate:"+e);break}this.hls.trigger(T.a.MANIFEST_PARSED,{levels:i,audioTracks:u,firstLevel:this._firstLevel,stats:t.stats,audio:o,video:a,altAudio:0<u.length})}else this.hls.trigger(T.a.ERROR,{type:w.b.MEDIA_ERROR,details:w.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},dt.prototype.setLevelInternal=function(t){var e,i=this._levels,n=this.hls;0<=t&&t<i.length?(this.cleanTimer(),this.currentLevelIndex!==t&&(E.b.log("switching to level "+t),(e=i[this.currentLevelIndex=t]).level=t,n.trigger(T.a.LEVEL_SWITCH,e),n.trigger(T.a.LEVEL_SWITCHING,e)),(i=(e=i[t]).details)&&!0!==i.live||(i=e.urlId,n.trigger(T.a.LEVEL_LOADING,{url:e.url[i],level:t,id:i}))):n.trigger(T.a.ERROR,{type:w.b.OTHER_ERROR,details:w.a.LEVEL_SWITCH_ERROR,level:t,,n,e,i)}else t.type===w.b.NETWORK_ERROR&&this.cleanTimer()},dt.prototype.recoverLevel=function(t,e,i,n){var r,a,o,s=this,u=this.hls.config,l=t.details,c=this._levels[e];if(c.loadError++,c.fragmentError=n,!0===i){if(!(this.levelRetryCount+1<=u.levelLoadingMaxRetry))return E.b.error("level controller, cannot recover from "+l+" error"),this.currentLevelIndex=null,this.cleanTimer(),void(t.fatal=!0);a=Math.min(Math.pow(2,this.levelRetryCount)*u.levelLoadingRetryDelay,u.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return s.loadLevel()},a),t.levelRetry=!0,this.levelRetryCount++,E.b.warn("level controller, "+l+", retry in "+a+" ms, current retry count is "+this.levelRetryCount)}!0!==i&&!0!==n||(1<(r=c.url.length)&&c.loadError<r?(E.b.warn("level controller, "+l+" for level "+e+": switching to redundant stream id "+c.urlId),c.urlId=(c.urlId+1)%r,c.details=void 0):-1===this.manualLevelIndex?(o=0===e?this._levels.length-1:e-1,E.b.warn("level controller, "+l+": switch to "+o),this.hls.nextAutoLevel=this.currentLevelIndex=o):!0===n&&(E.b.warn("level controller, "+l+": reload a fragment&(t.fragmentError=!1,t.loadError=0,this.levelRetryCount=0)},dt.prototype.onLevelLoaded=function(t){var e,i,n=this,r=t.level;r===this.currentLevelIndex&&(!1===(i=this._levels[r]).fragmentError&&(i.loadError=0,this.levelRetryCount=0),(e=t.details).live?(r=1e3*(e.averagetargetduration||e.targetduration),(i=i.details)&&e.endSN===i.endSN&&(r/=2,E.b.log("same live playlist, reload twice faster")),r-=performance.now()-t.stats.trequest,r=Math.max(1e3,Math.round(r)),E.b.log("live playlist, reload in "+r+" ms"),this.timer=setTimeout(function(){return n.loadLevel()},r)):this.cleanTimer())},dt.prototype.loadLevel=function(){var t,e;null!==this.currentLevelIndex&&!0===this.canload&&void 0!==(t=this._levels[this.currentLevelIndex])&&0<t.url.length&&(e=t.urlId,this.hls.trigger(T.a.LEVEL_LOADING,{url:t.url[e],level:this.currentLevelIndex,id:e}))},lt(dt,[{key:"levels",get:function(){return this._levels}},{kendex===t&&void 0!==e[t].details||this.setLevelInternal(t))}},{key:"mas._startLevel&&(this._startLevel=t),-1!==t&&(this.level=t)}},{key:"firstLevel",get:function(){return this._firstLevel}hls.config.startLevel;return void 0!==t?t:this._firstLevel},seualLl=t,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=t)}}]),dt),pt=i(3);function mt(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,mt);t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,ht.call(this,t,T.a.MEDIA_ATTACHED,T.a.MEDIA_DETACHING,T.a.FRAG_PARSING_METADATA));return t.id3Track=void 0,t.media=void 0,t}var yt=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(mt,ht=u),mt.prototype.destroy=function(){u.onMediaAttached=function(t){tmt.prototype.onMediaDetaching=function(){this.media=void 0},mt.prototype.onFragParsingMetadata=function(t){var e=t.frag,i=t.samples;this.id3Track||(this.id3Track=this.media.addTextTrack("metadata","id3"),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,r=0;r<i.length;r++){var a=pt.a.getID3Frames(i[r].data);if(a){var o=i[r].pts,s=r<i.length-1?i[r+1].pts:e.endPTS;o===s&&(s+=1e-4);for(var u=0;u<a.length;u++){var l,c=a[u];pt.a.isTimeStampFrame(c)||exp(Math.log(.5)/t):0,this.is.estimate_=e*(1-i)+i*this.estimate_,this.totalWeight_+=t},gt.prototype.getTotalWeight=fuotals.minDelayMs_=50,this.slow_=new vt(e),this.fast_=new vt(i)}var _t,Tt=(bt.prototype.sample=function(t,e){e=8e3*e/(t=Math.max(t,this.minDelayMs_)),t/=1e3;this.fast_.st=this.fast_;return t&&t.Estimate(),this.slow_.getEstimate()):this.defaultEstimate_},bt.prototype.destroy=function(){},bt),wt=function(t,e,i){return e&&Et(t.prototype,e),i&&Et(t,i),t};function Et(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"va_bwEstimator=null,e.onCheck=e._abandonRulesCheck.bind(e),e}var kt=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(St,_t=u),St.prototype.destroy=function(){this.clearTimer(),u.prototype.destroy.call(this)},St.prototype.onFragLoading=function(t){var e,i,n,r,a=t.frag;"main"===a.type&&(this.timer||(this.timer=setInterval(this.onCheck,100)),this._bwEstimator||(e=this.hls,r=t.frag.level,i=e.levels[r].details.live,n=e.config,r=t=void 0,r=i?(t=n.abrEwmaFastLive,n.abrEwmaSlowLive):(t=n.abrEwmaFastVoD,n.abrEwmaSlowVoD),this._bwEstimator=new Tt(e,r,t,n.abrEwmaDefaultEstimate)),this.fragCurrent=a)},St.prototype._abandonRulesCheck=function(){var t=this.hls,e=t.media,i=this.fragCurrent,n=i.loader,r=t.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return E.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var a=n.stats;if(e&&a&&(!e.paused&&0!==e.playbackRate||!e.readyState)&&i.autoLevel&&i.level){var o=performance.now()-a.trequest,s=Math.abs(e.playbackRate);if(o>500*i.duration/s){var u=t.levels,l=Math.max(1,a.bw?a.bw/8:1e3*a.loaded/o),c=u[i.level],d=c.realBitrate?Math.max(c.realBitrate,c.bitrate):c.bitrate,c=a.total||Math.max(a.loaded,Math.round(i.duration*d/8)),d=e.currentTime,c=(c-a.loaded)/l,h=(F.bufferInfo(e,d,t.config.maxBufferHole).end-d)/s;if(h<2*i.duration/s&&h<c){for(var f=void 0,p=void 0,p=i.level-1;r<p;p--){var m=u[p].realBitrate?Math.max(u[p].realBitrate,u[p].bitrate):u[p].bitrate;if((f=i.duration*m/(6.4*l))<h)break}f<c&&(E.b.warn("loading too slow, abort fragment loading and switch to level "+p+":fragLoadedDelay["+p+"]<fragLoadedDelay["+(i.level-1)+"];bufferStarvationDelay:"+f.toFixed(1)+"<"+c.toFixed(1)+":"+h.toFixed(1)),t.nextLoadLevel=p,this._bwEstimator.sample(o,a.loaded),n.abort(),this.clearTimer(),t.trigger(T.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:i,stats:a}))}}}},St.prototype.onFragLoaded=function(t){var e,i,n=t.frag;"main"!==n.type||isNaN(n.sn)||(this.clearTimer(),this.lastLoadedFragLevel=n.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate&&(n=((e=this.hls.levels[n.level]).loaded?e.loaded.bytes:0)+t.stats.loaded,i=(e.loaded?e.loaded.duration:0)+t.frag.duration,e.loaded={bytes:n,duration:i},e.realBitrate=Math.round(8*n/i)),t.frag.bitrateTest&&((i=t.stats).tparsed=i.tbuffered=i.tload,this.onFragBuffered(t)))},St.prototype.onFragBuffered=function(t){var e=t.stats,i=t.frag;!0===e.aborted||1!==i.loadCounter||"main"!==i.type||isNaN(i.sn)||i.bitrateTest&&e.tload!==e.tbuffered||(t=e.tparsed-e.trequest,E.b.log("latency/loading/parsing/append/kbps:"+Math.round(e.tfirst-e.trequest)+"/"+Math.round(e.tload-e.tfirst)+"/"+Math.round(e.tparsed-e.tload)+"/"+Math.round(e.tbuffered-e.tparsed)+"/"+Math.round(8*e.loaded/(e.tbuffered-e.trequest))),this._bwEstimator.sample(t,e.loaded),e.bwEstimate=this._bwEstimator.getEstimate(),i.bitrateTest?this.bitrateTesG_LOAD_ERROR:case w.a.FRTimer=function(){clearInterval(this.timer),this.timer=null},St.prototype._findBestLevel=function(t,e,i,n,r,a,o,s,u){for(var l=r;n<=l;l--){var c=u[l].details,d=c?c.totalduration/c.fragments.length:e,h=!!c&&c.live,f=void 0,f=l<=t?o*i:s*i,p=u[l].realBitrate?Math.max(u[l].realBitrate,u[l].bitrate):u[l].bitrate,c=p*d/f;if(E.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+l+"/"+Math.round(f)+"/"+p+"/"+d+"/"+a+"/"+c),p<f&&(!c||h&&!this.bitrateTestDelt;e=this._nextABRAutoLevel;return e=-1!==t?Math.min(t,e):e},set:funct),h=this._findBestLevel(o,s,c,r,e,d+t,a,u,i),Math.max(h,0)}}]),St);var At,Ot=W();function Ct(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Ct);t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,At.call(this,t,T.a.MEDIA_ATTACHING,T.a.MEDIA_DETACHING,T.a.MANIFEST_PARSED,T.a.BUFFER_RESET,T.a.BUFFER_APPENDING,T.a.BUFFER_CODECS,T.a.BUFFER_EOS,T.a.BUFFER_FLUSHING,T.a.LEVEL_PTS_UPDATED,T.a.LEVEL_UPDATED));return t._msDuration=null,t._levelDuration=null,t._live=null,t._objectUrl=null,t.onsbue=t.onSBUpdateEnd.bind(t),t.onsbe=t.onSBUpdateError.bind(t),t.pendingTracks={},t.tracks={},t}var Rt,Pt=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(Ct,At=u),Ct.prototype.destroy=function(){u.prototype.destroy.call(this)},Ct.prototype.onLevelPtsUpdated=function(t){var e=t.type,i=this.tracks.audio;if("audio"===e&&i&&"audio/mpeg"===i.container){e=this.sourceBuffer.audio;if(.1<Math.abs(e.timestampOffset-t.start)){i=e.updating;try{e.abort()}catch(t){i=!0,E.b.warn("can not abort audio buffer: "+t)}i?this.audioTimestampOffset=t.start:(E.b.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+t.start),e.timestampOffset=t.start)}}},Ct.prototype.onManifestParsed=function(t){var e=t.audio,i=t.video||t.levels.length&&t.audio,n=0;t.altAudio&&(e||i)&&E.b.log((n=(e?1:0)+(i?1:0))+" sourceBuffer(s) expected"),this.sourceBufferNb=n},Ct.prototype.onMediaAttaching=function(t){var e=this.media=t.media;e&&(t=this.mediaSource=new Ot,this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),t.addEventListener("sourceopen",this.onmso),t.addEventListener("sourceended",this.onmse),t.addEventListener("sourceclose",this.onmsc),e.src=URL.createObjectUonmse=this.onmsc=null,this.hls.istener("sourceopen",this.onmso)SourceBuffers(t),this.pendingTracks={},this.doAppending())},Ct.prototype.onMediaSourceClose=function(){E.b.log("media source closed")},Ct.prototype.onMediaSourceEnded=function(){E.b.log("media source ended")},Ct.prototype.onSBUpdateEnd=function(){this.audioTimestampOffset&&(t=this.sourceBuffer.audio,E.b.warn("change mpeg audio timestamp offset from "+t.timestampOffset+" to "+this.audioTimestampOffset),t.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset),this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos()is.segments.reduce(function(t,e){return e.parent===i?t+1:t},0);this.hls.trigger(T.a.BUFFER_APPENDED,{parent:i,pending:t}),this._needsFlush||this.doAppending(),this.MEDIA_ERROR,details:w.a.BUfer={},this.flushRange=[],thource;i&&"open"===i.readyState&&teType:o})}}this.hls.trigger(T.ahis.segments.push(t):this.segmen.MEDIA_ERROR,details:w.a.ded=!0,E.b.log(e+" sourceBuffer now EOS"));this.checkEos()},Ct.prototype.checkEos=function(){var t=this.sourceBuffer,e=this.mediaSource;if(e&&"open"===e.readyState){for(var i in t){i=t[i];if(!i.ended)return;if(i.updating)return void(this._needsEos=!0)}E.b.log("all media data available, signal endOfStream() to MediaSource and stop loading fragment");try{e.endOfStream()}catch(t){E.b.warn("exception while calling mediaSource.endOfStream()")}this._needsEset,type:t.type}),this.flushBufferCounter=0,this.doFlush()},Ct.prototype.onLevelUpdated=function(t){t=t.details;0<t.fragments.length&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._live=t.live,this.updateMediamsDuration=this.mediaed")}this.appended=e,this.hls.trigger(T.a.BUFFER_FLUSHED)}},Ct.prototype.doAppending=function(){var e=this.hls,t=this.sourceBuffer,i=this.segments;if(Object.keys(t).length){if(this.media.error)return this.segments=[],void E.b.error("trying to append although a media error occured, flush segment and abort");if(!this.appending&&(i&&i.length)){var n=i.shift();try{var r=t[n.type];r?r.updating?i.unshift(n):(r.ended=!1,this.parent=n.parent,r.appendBuffer(n.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(t){E.b.error("error while trying to append buffer:"+t.message),i.unshift(n);n={type:w.b.MEDIA_ERROR,parent:n.parent};if(22===t.code)return this.segments=[],n.details=w.a.BUFFER_FULL_ERROR,n.fatal=!1,void e.trigger(T.a.ERROR,n);if(this.appendError?this.appendError++:this.appendError=1,n.details=w.a.BUFFER_APPEND_ERROR,this.appendError>e.config.appendErrorMaxRetry)return E.b.log("fail "+e.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),i=[],n.fatal=!0,void e.trigger(T.a.ERROR,n);n.fhing too many retries");E.b.log("buffer flushed")}return!0},Ct),r=function(t,e,i){return e&&xt(t.prototype,e),i&&xt(t,i),t};function xt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"vaOP_LEVEL_CAPPING,T.a.MEDIA_ATTACHING,T.a.MANIFEST_PARSED))}var It,p=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setProFINITY,this.timer&&(this.timer=cleatrictedLevels)&&this.restrictehis.media=t.media instanceof H.detectPlayerSize.bind(this),1extLevelSwitch(),this.autgetMaxLevelByMediaSize(t,this.mediaWidth,this.mediaHeight)},Lt.isLevelAllowed=function(t){return-1===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]).indexOf(t)},Lt.getMaxLevelByMediaSize=function(t,e,i){if(!t||t&&!t.length)return-1;for(var n,r,a=t.length-1,o=0;o<t.length;o+=1){var s=t[o];if((s.width>=e||s.height>=i)&&(n=s,!(r=t[o+1])||(n.width!==r.width||n.height!==r.height))){a=o;break}}return a},r(Lt,[{key:"mediaWidth",get:function(){var t=void 0,e=this.media;return e&&(t=e.width||e.clientWidth||e.offsee.clientHeight||e.offsetHeight,t*){var t"!=typeof e?t:e}(this,It.call(this,t,T.a.MEDIA_ATTACHING))}(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setProtterval(this.timer),this.isVidecheckFPSInterval.bind(tTime=s,this.lastDroppedFramesPS(e,tion")}(this,Mt),t&&t.xhrSetupprototype.destroy=fdow.clearTimeout(t,retry:0},this.retryDelay=e.retryDelay,this.loadInternal()},Mt.prototype.loadInternal=function(){var e=this.context,i=this.loader=new XMLHttpRequest,n=this.stats;n.tfirst=0,n.loaded=0;n=this.xhrSetup;try{if(n)try{n(i,e.url)}catch(t){i.open("GET",e.url,!0),n(i,e.url)}i.readyState||i.open("GET",e.url,!0)}catch(t){return void this.callbacks.onError({code:i.status,text:t.message},e,i)}e.rangeEnd&&i.setRequestHeader("Range","bytes="+e.rangeStart+"-"+(e.rangeEnd-1)),i.onreadystatechange=this.readystatechange.bind(this),i.onprogress=this.loadprogress.bind(this),i.responseType=e.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),i.send()},Mt.prototype.readystatechange=function(t){var e,i=t.currentTarget,n=i.readyState,r=this.stats,a=this.context,o=this.config;r.aborted||2<=n&&(window.clearTimeout(this.requestTimeout),0===r.tfirst&&(r.tfirst=Math.max(performance.now(),r.trequest)),4===n?200<=(e=i.status)&&e<300?(r.tload=Math.max(r.tfirst,performance.now()),n=t=void 0,n="arraybuffer"===a.responseType?(t=i.response).byteLength:(t=i.responseText).length,r.loaded=r.total=n,t={url:i.responseURL,data:t},this.callbacks.onSuccess(t,r,a,i)):r.retry>=o.maxRetry||400<=e&&e<499?(E.b.error(e+" while loading "+a.url),this.callbacks.onError({code:e,text:i.statusText},a,i)):(E.b.warn(e+" while loading "+a.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,o.maxRetryDelay),r.retry++):this.requestTimeout=window.setTimeout(this.lrl),this.callbacks.onTimeol);t=this.callbacks.onProgress;t&&t(i,this.context,null,e)},Mt),it=function(t,e,i){return e&&Nt(t.prototype,e),i&&Nt(t,i),t};function Nt(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ut(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Ut);t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,jt.call(this,t,T.a.MANIFEST_LOADING,T.a.MANIFEST_PARSED,T.a.AUDIO_TRACK_LOADED,T.a.ERROR));return t.ticks=0,t.ontick=t.tick.bind(t),t}(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setProtunction(){this.cleanTimen(){this.timer&&(clearTimeout(this.timer),this.timer=null)},Ut.prototype.tick=function(){this.ticks++,1===this.ticks&&(this.doTick(),1<this.ticks&&setTimeout(this.tick,1),this.ticks=0)},Ut.prototype.doTick=func(t){t.fatal&&t.type===w.b.NETWORK_ERROR&&this.cleanTimer()},Ut.prototype.onManifestLoading=function(){this.tracks=[],this.trackId=-1},Ut.prototype.onManifestParsed=function(t){var e=this,t=t.audioTracks||[],i=!1;this.tracks=t,this.hls.trigger({return t.default&&!i?(e.audioTrack=n,void(i=!0)):void n++}),!1===i&&t.length&&(E.b.log("no default audio track defined, use first audio track as deduration)),!t.details.live&&this.timer&&this.cleanTimer())},Ut.prototype.setAudioTrackInternal=function(t){var e,i,n,r;0<=t&&t<this.tracks.length&&(this.cleanTimer(),this.trackId=t,E.b.log("switching to audioTrack "+t),r=this.tracks[t],e=this.hls,n=r.type,i=r.url,e.trigger(T.a.AUDIO_TRACK_SWITCH,n={id:t,type:n,url:i}),e.trigger(T.a.AUDIO_TRACK_SWITCHING,n),r=r.details,!i||void 0!==r&&!0!==r.live||(E.b.log("(re)loading playlist for audioTrack "+t),e.trigger(T.a.AUDIO_TRACK_LOADING,{url:i,id:t})))},Ut.prototype.updateTrack=function(t){var e,i;0<=t&&t<this.tracks.length&&(this.cleanTimer(),this.trackId=t,E.b.log("updating audioTrack "+t),e=(i=this.tracks[t]).url,i=i.details,!e||void 0!==i&&!0!==i.live||(E.b.log("(re)loading playlist for audioTrack "+t),this.hls.trigger(T.a.AUDIO_TRACK_LOADING,{url:e,id:t})))},it(Ut,[{key:"audioTracks",get:function(){return this.tracks} 0!==this.tracks[t].details||this.setAudioTrackInternal(t)}}]),lt=Ut,wt=function(t,e,i){return e&&Ft(t.prototype,e),i&&Ft(t,i),t};function Ft(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Bt,Gt={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS"};function Ht(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Ht);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,Bt.call(this,t,T.a.MEDIA_ATTACHED,T.a.MEDIA_DETACHING,T.a.AUDIO_TRACKS_UPDATED,T.a.AUDIO_TRACK_SWITCHING,T.a.AUDIO_TRACK_LOADED,T.a.KEY_LOADED,T.a.FRAG_LOADED,T.a.FRAG_PARSING_INIT_SEGMENT,T.a.FRAG_PARSING_DATA,T.a.FRAG_PARSED,T.a.ERROR,T.a.BUFFER_RESET,T.a.BUFFER_CREATED,T.a.BUFFER_APPENDED,T.a.BUFFER_FLUSHED,T.a.INIT_PTS_FOUND));return e.config=t.config,e.audioCodecSwap=!1,e.ticks=0,e._state=Gt.STOPPED,e.ontick=e.tick.bind(edata.");return decodeURIComponent(encodeURIComponent(t))}}}var r=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPronull),u.prototype.destroy.ca track:"+t),this.state===Gt.WAITING_INIT_PTS&&this.tick())},Ht.prototype.startLoad=function(t){var e;this.tracks?(e=this.lastCurrentTime,this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),(this.fragLoadError=0)<e&&-1===t?(E.b.log("audio:override startPosition with lastCurrentTime @"+e.toFixed(3)),this.state=Gt.IDLE):(this.lastCurrentTime=this.startPosition||t,this.state=Gt.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()):(this.stdemuxer.destroy(),Tick(),1<this.ticks&&setTimeout(this.tick,1),this.ticks=0)},Ht.prototype.doTick=function(){var t,e,i,n=this.hls,r=n.config;switch(this.state){case Gt.ERROR:case Gt.PAUSED:case Gt.BUFFER_FLUSHING:break;case Gt.STARTING:this.state=Gt.WAITING_TRACK,this.loadedmetadata=!1;break;case Gt.IDLE:var a=this.tracks;if(!a)break;if(!this.media&&(this.startFragRequested||!r.startFragPrefetch))break;if(this.loadedmetadata)v=this.media.currentTime;else if(void 0===(v=this.nextLoadPosition))break;var o=this.mediaBuffer||this.media,s=this.videoBuffer||this.media,u=F.bufferInfo(o,v,r.maxBufferHole),l=F.bufferInfo(s,v,r.maxBufferHole),c=u.len,d=u.end,h=this.fragPrevious,f=Math.max(r.maxBufferLength,l.len),p=this.audioSwitch,s=this.trackId;if((c<f||p)&&s<a.length){if(void 0===(e=a[s].details)){this.state=Gt.WAITING_TRACK;break}if(!p&&!e.live&&h&&h.sn===e.endSN&&!u.nextStart&&(!this.media.seeking||this.media.duration-d<h.duration/2)){this.hls.trigger(T.a.BUFFER_EOS,{type:"audio"}),this.state=Gt.ENDED;break}var l=e.fragments,c=l.length,f=l[0].start,a=l[c-1].start+l[c-1].duration,m=void 0;if(p)if(e.live&&!e.PTSKnown)E.b.log("switching audiotrack, live stream, unknown PTS,load first fragment"),d=0;else if(d=v,e.PTSKnown&&v<f){if(!(u.end>f||u.nextStart))return;E.b.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=f+.05}if(e.initSegment&&!e.initSegment.data)m=e.initSegment;else if(d<=f){if(m=l[0],null!==this.videoTrackCC&&ackCC,m=U.search(l,function(t){return t.cc<i?1:t.cc>i?-1:0})),e.live&&m.loadIdx&&m.loadIdx===this.fragLoadIdx){var y=u.nextStart||f;return E.b.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(y+.05)),void(this.media.currentTime=y+.05)}}else{var p=void return t.start+t.duration-e<=d?1:t.start-e>d&&t.start?-1:0};(p=d<a?(a-g<d&&(g=0),u&&!y(u)?u:U.search(l,y)):l[c-1])&&(f=(m=p).start,h&&m.level===h.level&&m.sn===h.sn&&(m.sn<e.endSN?(m=l[m.sn+1-e.startSN],E.b.log("SN just loaded, load next one: "+m.sn)):m=null))}if(m)if(m.decryptdata&&null!=m.decryptdata.uri&&null==m.decryptdata.key)E.b.log("Loading key for "+m.sn+" of ["+e.startSN+" ,"+e.endSN+"],track "+s),this.state=Gt.KEY_LOADING,n.trigger(T.a.KEY_LOADING,{frag:m});else{if(E.b.log("Loading "+m.sn+", cc: "+m.cc+" of ["+e.startSN+" ,"+e.endSN+"],track "+s+", currentTime:"+v+",bufferEnd:"+d.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,m.loadCounter){m.loadCounter++;var v=r.fragLoadingLoopThreshold;if(m.loadCounter>v&&Math.abs(this.fragLoadIdx-m.loadIdx)<v)return void n.trigger(T.a.ERROR,{type:w.b.MEDIA_ERROR,details:w.a.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:m})}else m.loadCounter=1;m.loadIdx=this.fragLoadIdx,this.fragCurrent=m,this.startFragRequested=!0,isNaN(m.sn)||(this.nextLoadPosition=m.start+m.duration),n.trigger(T.a.FRAG_LOADING,{frag:m}),this.state=Gt.FRAG_LOADING}}break;case Gt.WAITING_TRACK:(t=this.tracks[this.trackId])&&t.details&&(this.state=Gt.IDLE);break;case Gt.FRAG_LOADING_WAITING_RETRY:var b=performance.now(),m=this.retryDate,_=(o=this.media)&&o.seeking;(!m||m<=b||_)&&(E.b.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=Gt.IDLE);break;case Gt.WAITING_INIT_PTS:b=this.videoTrackCC;if(void 0===this.initPTS[b])break;_=this.waitingFragment;_?b!==(_=_.frag.cc)?(t=this.tracks[this.trackId]).details&&t.details.live&&(E.b.warn("Waiting fragment CC ("+_+") does not match video track CC ("+b+")"),this.waitingFragment=null,this.state=Gt.IDLE):(this.state=Gt.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null):this.state=Gt.IDLE;break;case Gt.STOPPED:case Gt.FRAG_LOADING:case Gt.PARSING:cs.tracks&&t.autoStartLoad&&thiis.videoBuffer=null,this.loaadIdx+=2*this.config.fragLEnded=function(){this.startPositio{E.b.log("audio tracks updated"),thdIdx+=2*this.config.fragLoadingLoopThreshold)),this.tick()},Ht.prototype.onAudioTrackLoaded=function(t){var e=t.details,i=t.id,n=this.tracks[i],r=e.totalduration,t=0;E.b.log("track "+i+" loaded ["+e.startSN+","+e.endSN+"],duration:"+r),e.live?(r=n.details)&&0<e.fragments.length?(J(r,e),t=e.fragments[0].start,e.PTSKnown?E.b.log("live audio playlist sliding:"+t.toFixed(3)):E.b.log("live audio playlist - outdated PTS, unknown sliding")):(e.PTSKnown=!1,E.b.log("live audio playlist - first load, unknown sliding")):e.PTSKnown=!1,n.details=e,this.startFragRequested||(-1===this.startPosition&&(e=e.startTimeOffset,isNaN(e)?this.startPosition=0:(E.b.log("start time offset found in playlist, adjust startPosition to "+e),this.startPosition=e)),this.nextLoadPosition=this.startPosition),this.state===Gt.WAITING_TRACK&&(this.state=Gt.IDLE),this.tick()},Ht.prototype.onKeyLoaded=function(){this.state===Gt.KEY_LOADING&&(this.state=Gt.IDLE,this.tick())},Ht.prototype.onFragLoaded=function(t){var e,i,n,r,a,o,s,u=this.fragCurrent,l=t.frag;this.state===Gt.FRAG_LOADING&&u&&"audio"===l.type&&l.level===u.level&&l.sn===u.sn&&(i=(e=(s=this.tracks[this.trackId]).details).totalduration,n=u.level,r=u.sn,a=u.cc,o=this.config.defaultAudioCodec||s.audioCodec||"mp4a.40.2",l=this.stats=t.stats,"initSegment"===r?(this.state=Gt.IDLE,l.tparsed=l.tbuffered=performance.now(),e.initSegment.data=t.payload,this.hls.trigger(T.a.FRAG_BUFFERED,{stats:l,frag:u,id:"audio"}),this.tick()):(this.state=Gt.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new X(this.hls,"audio")),s=this.initPTS[a],l=e.initSegment?e.initSegment.data:[],e.initSegment||void 0!==s?(this.pendingBuffering=!0,E.b.log("Demuxing "+r+" of ["+e.startSN+" ,"+e.endSN+"],track "+n),this.demuxer.push(t.payload,l,o,null,u,i,!1,s)):(E.b.log("unknown video PTS for continuity counter "+a+", waiting for video PTS before demuxing audio frag "+r+" of ["+e.startSN+" ,"+e.endSN+"],track "+n),this.waitingFragment=t,this.state=Gt.WAITING_INIT_PTS))),this.fragLoadError=0},Ht.prototype.onFragParsingInitSegment=function(t){var e=this.fragCurrent,i=t.frag;e&&"audio"===t.id&&i.sn===e.sn&&i.level===e.level&&this.state===Gt.PARSING&&(i=void 0,(e=t.tracks).video&&delete e.video,(i=e.audio)&&(i.levelCodec=i.codec,i.id=t.id,this.hls.trigger(T.a.BUFFER_CODECS,e),E.b.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]"),(i=i.initSegment)&&(i={type:"audio",data:i,parent:"audio",content:"initSegment"},this.audioSwitch?this.pendingData=[i]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(T.a.BUFFER_APPENDING,i))),this.tick()))},Ht.prototype.onFragParsingData=function(e){var t,i,n,r,a=this,o=this.fragCurrent,s=e.frag;o&&"audio"===e.id&&"audio"===e.type&&s.sn===o.sn&&s.level===o.level&&this.state===Gt.PARSING&&(t=this.trackId,n=this.tracks[t],i=this.hls,isNaN(e.endPTS)&&(e.endPTS=e.startPTS+o.duration,e.endDTS=e.startDTS+o.duration),E.b.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),$(n.details,o,e.startPTS,e.endPTS),s=this.audioSwitch,n=this.media,o=!1,s&&n&&(n.readyState?(n=n.currentTime,E.b.log("switching audio track : currentTime:"+n),n>=e.startPTS&&(E.b.log("switching audio track : flushing all audio"),this.state=Gt.BUFFER_FLUSHING,i.trigger(T.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),this.audioSwitch=!(o=!0),i.trigger(T.a.AUDIO_TRACK_SWITCHED,{id:t}))):(this.audioSwitch=!1,i.trigger(T.a.AUDIO_TRACK_SWITCHED,{id:t}))),r=thr.push({type:e.type,data:tpendingBuffering=!0,a.hls.trigger(T.a.BUFFER_APPENDING,t))}),this.pendingData=[]ce.now(),this.state=Gt.PARSs.mediaBuffer=this.videoBuffe),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer)},Ht.prototype.onBufferAppended=function(t){var e;"audio"===t.parent&&((e=this.state)!==Gt.PARSING&&e!==Gt.PARSED||(this.pendingBuffering=0<t.pending,this._checkAppendedParsed()))},Ht.prototype._checkAppendedParsed=function(){var t,e,i;this.state!==Gt.PARSED||this.appended&&this.pendingBuffering||(i=this.fragCurrent,t=this.stats,e=this.hls,i&&(this.fragPrevious=i,t.tbuffered=performance.now(),e.trigger(T.a.FRAG_BUFFERED,{stats:t,frag:i,id:"audio"}),i=this.mediaBuffer||this.media,E.b.log("audio buffered : "+Q.toString(i.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,e.trigger(T.a.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=Gt.IDLE),this.tick())},Ht.prototype.onError=function(t){var e,i,n,r=t.frag;if(!r||"audio"===r.type)switch(t.details){case w.a.FRAG_LOAD_ERROR:case w.a.FRAG_LOAD_TIMEOUT:t.fatal||((e=this.fragLoadError)?e++:e=1,e<=(i=this.config).fragLoadingMaxRetry?(this.fragLoadError=e,r.loadCounter=0,n=Math.min(Math.pow(2,e-1)*i.fragLoadingRetryDelay,i.fragLoadingMaxRetryTimeout),E.b.warn("audioStreamController: frag loading failed, retry in "+n+" ms"),this.retryDate=performance.now()+n,this.state=Gt.FRAG_LOADING_WAITING_RETRY):(E.b.error("audioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=Gt.ERROR));break;case w.a.FRAG_LOOP_LOADING_ERROR:case w.a.AUDIO_TRACK_LOAD_ERROR:case w.a.AUDIO_TRACK_LOAD_TIMEOUT:case w.a.KEY_LOAD_ERROR:case w.a.KEY_LOAD_TIMEOUT:this.state!==Gt.ERROR&&(this.state=t.fatal?Gt.ERROR:Gt.IDLE,E.b.warn("audioStreamController: "+t.details+" while loading frag,switch to "+this.state+" state ..."));break;case w.a.BUFFER_FULL_ERROR:"audio"!==t.parent||this.state!==Gt.PARSING&&this.state!==Gt.PARSED||(i=this.mediaBuffer,n=this.media.currentTime,i&&F.isBuffered(i,n)&&F.isBuffered(i,n+.5)?((n=this.config).maxMaxBufferLength>=n.maxBufferLength&&(n.maxMaxBufferLength/=2,E.b.warn("audio:reduce max buffer length to "+n.maxMaxBufferLength+"s"),this.fragLoadIdx+=2*n.fragLoadingLoopThreshold),this.state=Gt.IDLE):(E.b.warn("buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=Gt.BUFFER_FLUSHING,this.hls.trigger(T.a.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITID):(this.state=Gt.IDLE,this.state,this._state=t,E.b.log("audio stream:"+e+"->"+t))},get:function(){return this._state}}]),Ht),qt=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var _={"":!0,lr:!0,rl:!0},e={start:!0,middle:!0,end:!0,left:!0,right:!0};function T(t){return"string"==typeof t&&(!!e[t.toLowerCase()]&&t.toLowerCase())}function w(t){for(var e=1;e<arguments.length;e++){var i,n=arguments[e];feof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),a={};r?n=document.createElement("custom"):a.enumerable=!0,n.hasBeenReset=!1;var o="",s=!1,u=t,l=e,c=i,d=null,h="",f=!0,p="auto",m="start",y=50,g="middle",v=50,b="middle";if(Object.defineProperty(n,"id",w({},a,{get:function(){return o},set:function(t){o=""+t}})),Object.defineProperty(n,"pauseOnExit",w({},a,{get:function(){return s},set:function(t){s=!!t}})),Object.defineProperty(n,"startTime",w({},a,{get:function(){return u},set:function(t){if("number"!=typeof t)throw new TypeError("Start time must be set to a number.");u=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"endTime",w({},a,{get:function(){return l},set:function(t){if("number"!=typeof t)throw new TypeError("End time must be set to a number.");l=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"text",w({},a,{get:function(){return c},set:function(t){c=""+t,this.hasBeenReset=!0}})),Object.defineProperty(n,"region",w({},a,{get:function(){return d},set:function(t){d=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"vertical",w({},a,{get:function(){return h},set:function(t){t="string"==typeof(t=t)&&(!!_[t.toLowerCase()]&&t.toLowerCase());if(!1===t)throw new SyntaxError("An invalid or illegal string was specified.");h=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"snapToLines",w({},a,{get:function(){return f},set:function(t){f=!!t,this.hasBeenReset=!0}})),Object.defineProperty(n,"line",w({},a,{get:function(){return p},set:function(t){if("number"!=typeof t&&"auto"!==t)throw new SyntaxError("An invalid number or illegal string was specified.");p=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"lineAlign",w({},a,{get:function(){return m},set:function(t){t=T(t);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"position",w({},a,{get:function(){return y},set:function(t){if(t<0||100<t)throw new Error("Position must be between 0 and 100.");y=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"positionAlign",w({},a,{get:function(){return g},set:function(t){t=T(t);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");g=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"size",w({},a,{get:function(){return v},set:function(t){if(t<0||100<t)throw new Error("Size must be between 0 and 100.");v=t,this.hasBeenReset=!0}})),Object.defineProperty(n,"align",w({},a,{get:function(){return b},set:function(t){t=T(t);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),n.disreturgionList=[]}function Kt(){this.values=Object.create(null)}function zt(t,e,i,n){var r,a,o=n?t.split(n):[t];for(r in o)"string"==typeof o[r]&&(2===(a=o[r].split(i)).length&&e(a[0],a[1]))}Kt.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,i){return i?this.has(t)?this.values[t]:e[i]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,i){for(var n=0;n<i.length;++n)if(e===i[n]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&0<=(e=parseFloat(e))&&e<=100)&&(this.set(t,e),!0)}};va=e}function Jt(t){return t.replace(/<br(?rn"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),i}t&&(n.buffer+=n.decoder.decode(t,{stream:!0}));try{if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var i,r=(i=e()).match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!r||!r[0])throw new Error("Malformed WebVTT signature.");n.state="HEADER"}for(var a=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return tt(i,function(t,e){"Region"===t&&console.log("parse region",e)},/:/):i||(n.state="ID");continue;case"NOTE":i||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){n.state="NOTE";break}if(!i)continue;if(n.cue=new qt(0,0,""),n.state="CUE",-1===i.indexOf("--\x3e")){n.cue.id=i;continue}case"CUE":try{$t(i,n.cue,n.regionList)}catch(t){n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var o=-1!==i.indexOf("--\x3e");if(!i||o&&(a=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=i;continue;case"BADCUE":i||(n.state="ID");continue}}}catch(t){"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.sta.")}catch(te=[],i=0;i<t.length;i++)e.push(t[i].toString(16));return e}var ne={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},re=15,ae=100,oe={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},se={17:2,18:4,21:6,22:8,23:10,19:13,20:15},ue={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},le={25:2,26:4,29:6,30:8,31:10,27:13,28:15},ce=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],de={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0}t];this.verboseLevel>=i&line=!1,this.italics=!1e.length;i++){var n=e[ierline&&!this.italicitalics&&this.backics=t.italics,this.bacitalhis.italics=i||!1,this.bacototype.reset=functiotype.setChar=function(t,e){this.uchar=t,this.penState.copy(e)},me.prototype.setPreturn this.uchar=function(t){this.ucha=funte(this,me),this.uchar=t||" ",this.penState=new he(e,i,n,r,a)}var ye=(ge.prototype.equals=function(t){for(var e=!0,i=0;i<ae;i++)if(!this.chars[i].equals(t.chars[i])){e=!1;break}return e},ge.prototype.copy=function(t){for(var e=0;e<ae;e++)this.chars[e].copy(t.chars[e])},ge.prototype.isEmpty=function(){for(var t=!0,e=0;e<ae;e++)if(!this.cg("ERROR","Too large curhis.chars[i].setPenStatursor(-1),this.chars[thirs[this.pos].setChar(e,thiromPos=function(t){n(){this.clearFromPos(0),thistotype.clearToEndOfRow=funcars[i].uchar;" "!==n&&(e=!Styl+)this.chars.push(new pe);){for(var t=0;t<re;te;i++)if(!this.rowfunction(t){for(var e,e=0;e<re;e++)if(!this.rows[e].isEmpty()){t=!1;break}return t},be.prototype.backSpace=function(){thiEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},be.prototype.insertChar=function(t){this.rows[this.currRow].insertChar(t)},be.prototype.setPen=function(t){th.moveCursor=function(t)("INFO","setCursor: "+t),this.rows[this.currRow].setCursor(t)},be.prototype.setPAC=function(t){de.log("INFO","pacData = "+JSON.stringify(t));var e=t.row-1;if(this.nrRollUpRows&&e<this.nrRollUpRows-1&&(e=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==e){for(var i=0;i<re;i++)this.rows[i].clear();var n=this.currRow+1-this.nrRollUpRows,r=this.lastOutputScreen;if(r){var a=r.rows[n].cueStartTime;if(a&&a<de.time)for(var o=0;o<this.nrRollUpRows;o++)this.rows[e-this.nrRollUpRows+o+1].copy(r.rows[n+o])}}this.currRow=e;var s=this.rows[this.currRow];null!==t.indent&&(a=t.indent,a=Math.max(a-1,0),s.setCursor(t.indent),t.color=s.chars[a].penState.foreground);t={foreground:t.color,underline:t.underline,italics:t.italics,backgrngify(t)),this.backSpace(),this.setPen(t),this.insertChar(32)},be.prototype.setRollUpRows=function(t){this.nrRollUpRows=t},be.prototype.rollUp=function(){var t;null!==this.nrRollUpRows?(de.log("TEXT",this.getDisplayText()),t=this.currRow+1-this.nrRollUpRows,(t=this.rows.splice(t,1)[0]).clear(),this.rows.splice(this.currRow,0,t),de.log("INFO","Rolling up")):de.log("DEBUG","roll_up but nrRollUpRows not set yet")},be.prototype.getDisplayText=function(t){t=t||!1;for(var e=[],i="",n=0;n<re;n++){var r=this.rows[n].getTextString();r&&(t?e.push("Row "+(n+1)+": '"+r+"'"):e.push(r.trim()))}return i=0<e.length?t?"["+e.join(" | ")+"]":e.join("\n"):i},new ye);this.currRow=re-1,his.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},Te.prototype.getHandler=function(){return this.outputFilter},Te.prototype.setHandler=function(t){this.outputFilter=t},Te.prototype.setPAC=function(t){this.writeScreen.setPAC(t)},Te.prototype.setBkgData=fu=null,this.nonDisplayedMe.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},Te.prototype.ccRCL=function(){de.log("INFO","RCL - Resume Ca.writeScreen===this.displayedMemory&&this.outputDataUpdate())},Te.prototype.ccAOF=f"),this.writeScreehis.setMode("MODE_R("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},Te.prototype.ccRDC=function(){de.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},Te.prototype.ccTR=function(){de.RTD=function(){de.lmory"),this.displa Return"),this.writ Erase Non-displaye.displayedMemory.gNFO","TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)},Te.prototype.ccMIDROW=function(t){var e={flash:!1};e.underline=t%2==1,e.italics=46<=t,e.italics?e.foreground="white":(t=Math.floor(t/2)-16,e.foreground=["white","green","blue","cyan","red","yellow","magenta"][t]),de.log("INFO","MIDROW: "+JSON.stringify(e)),this.writeScreen.setPen(e)},Te.prototype.outputDataUpdate=function(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=de.time;null!==e&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,e,this.lastOutputScreen),!0===t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:e):this.cueStartTime=e,this.lastOutputSis.cTime=null,this.dataCounters={pe.getHandler=function(t)otype.setHandler=function(t,e){this.channels[t].setHandler(e)},we.prototype.addData=function(t,e){var i,n=!1;this.lastTime=t,de.setTime(t);for(var r=0;r<e.length;r+=2){var a=127&e[r],o=127&e[r+1];0!=a||0!=o?(de.log("DATA","["+ie([e[r],e[r+1]])+"] -> ("+ie([a,o])+")"),(i=(i=(i=(i=this.parseCmd(a,o))||this.parseMidrow(a,o))||this.parsePAC(a,o))||this.parseBackgroundAttributes(a,o))||(n=this.parseChars(a,o))&&(this.currChNr&&0<=this.currChNr?this.channels[this.currChNr-1].insertChars(n):de.log("WARNING","No channel found yet. TEXT-MODE?")),i?this.dataCounters.cmd+=2:n?this.dataCounters.char+=2:(this.dataCounters.other+=2,de.log("WARNING","Couldn't parse cleaned data "+ie([a,o])+" orig: "+ie([e[r],e[r+1]])))):this.dataCounters.padding+=2}},we.prototype.parseCmd=function(t,e){var i=null;if(!((20===t||28===t)&&32<=e&&e<=47)&&!((23===t||31===t)&&33<=e&&e<=35))return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,de.log("DEBUG","Repeated command ("+ie([t,e])+") is dropped"),!0;var n=this.channels[(i=20===t||23===t?1:2)-1];return 20===t||28===t?32===e?n.ccRCL():33===e?n.ccBS():34===e?n.ccAOF():35===e?n.ccAON():36===e?n.ccDER():37===e?n.ccRU(2):38===e?n.ccRU(3):39===e?n.ccRU(4):40===e?n.ccFON():41===e?n.ccRDC():42===e?n.ccTR():43===e?n.ccRTD():44===e?n.ccEDM():45===e?n.ccCR():46===e?n.ccENM():47===e&&n.ccEOC():n.ccTO(e-32),this.lastCmdA=-1].ccMIDROW(e),de.log("DEBUG","MIDROW ("+ie([t,e])+")"),!0))},we.prototype.parsePAC=function(t,e){if(!((17<=t&&t<=23||25<=t&&t<=31)&&64<=e&&e<=127)&&!((16===t||24===t)&&64<=e&&e<=95))return!1;if(t===this.lastCmdA&&e===this.lastCmdB)return this.lastCmdA=null,!(this.lastCmdB=null);var i=t<=23?1:2,n=this.interpretPAC((64<=e&&e<=95?1==i?oe:ue:1==i?se:le)[t],e);return this.channels[i-1].setPAC(n),this.lastCmdA=t,this.lastCmdB=e,this.currChNr=i,!0},we.prototype.interpretPAC=function(t,e){var i=e,t={color:null,italics:!1,indent:null,underline:!1,row:t};return t.underline=1==(1&(i=95<e?e-96:e-64)),i<=13?t.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(t.italics=!0,t.color="white"):t.indent=4*Math.floor((i-16)/2),t},we.prototype.parseChars=function(t,e){var i,n=null,r=null,a=null;return 17<=(a=25<=t?(n=2,t-8):(n=1,t))&&a<=19?(i=e,de.log("INFO","Special char '"+ee(i=17===a?e+80:18===a?e+112:e+144)+"' in channel "+n),r=[i]):32<=t&&t<=127&&(r=0===e?[t]:[t,e]),r&&(e=ie(r),de.log("DEBUG","Char codes =  "+e.join(",")),this.lastCmdA=null,this.lastCmdB=null),r},we.prototype.parseBackgroundAttributes=function(t,e){var i,n;return((16===t||24===t)&&32<=e&&e<=47||(23===t||31===t)&&45<=e&&e<=47)&&(i={},16===t||24===t?(n=Math.floor((e-32)/2),i.background=ce[n],e%2==1&&(i.background=i.background+"_semi")):45===e?i.background="transparent":(i.foreground="black",47===e&&(i.underline=!0)),this.channels[(t<24?1:2)-1].setBkgData(i)his.channels[t].reset();thisngthlength;i;)e=33*e^t.charCodeAt(--ithis.startTime,this.een=i,this.timelineController.createCaptionsTrack(this.track)},Se),Re={parse:function(t,a,n,r,e,i){var t=Object(pt.b)(new Uint8Array(t)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n")IComponent(encodext)),0<t.eingerror=function(t){d=t},f.onflush=function(){d&&i?i(d):e(c)},t.forEach(function(e){if(h){if(L:")?o=t.substr(6):ke(t,"MPEGTS:")&&(s=parseInt(t.substr(7)))});try{s-=a=a<0?a+8589934592:a,t=o,i=parseInt(t.substr(-3)),n=parseInt(t.substr(-6,2)),r=parseInt(t.substr(-9,2)),t=9<t.length?parseInt(t.substr(0,t.indexOf(":"))):0,u=(isNaN(i)||isNaN(n)||isNaN(r)||isNaN(t)?-1:(i+=1e3*n,i+=6e4*r,i+=36e5*t))/1e3,l=s/9e4,-1===u&&(d=new Error("Malformed X-TIMESTAMP-MAP: "+e))}catch(t){d=new Error("Malformed X-TIMESTAMP-MAP: "+e)}r(t){if(t&&t.cues)for(;0<t.cues.length;)t.removeCue(t.cues[0])}function xe(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,xe);var e,i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,Oe.call(this,t,T.a.MEDIA_ATTACHING,T.a.MEDIA_DETACHING,T.a.FRAG_PARSING_USERDATA,T.a.FRAG_DECRYPTED,T.a.MANIFEST_LOADING,T.a.MANIFEST_LOADED,T.a.FRAG_LOADED,T.a.LEVEL_SWITCHING,T.a.INIT_PTS_FOUND));return i.hls=t,i.config=t.config,i.enabled=!0,i.Cues=t.config.cueHandler,i.textTracks=[],i.tracks=[],i.unparsedVttFrags=[],i.initPTS=void 0,i.cueRanges=[],i.config.enableCEA708Captions&&(e=new Ce(i,1),t=new Ce(i,2),i.cea608Parser=new Ee(0,e,t)),i}var Le,it=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(xe,Oe=u),xe.prototype.addCues=function(t,e,i,n){for(var r,a,o=this.cueRanges,s=!1,u=o.length;u--;){var l=o[u],c=(r=l[0],a=l[1],c=e,Math.min(a,i)-Math.max(r,c));if(0<=c&&(l[0]=Math.min(l[0],e),l[1]=Math.max(l[1],i),s=!0,.5<c/(i-e)))return}s||o.push([e,i]ach(function(t){e.onFragLoadede.textTracks[i];if(!0===n["textt")).initEvent("addtrack",!1,!1)}i.track=t,e.dispatchEvent(i)},xe.prototype.createCaptionsTrack=function(t){var e,i="textTrack"+t;this[i]||((e=this.getExistingTrack(t))?(this[i]=e,Pe(this[i]),this.sendAddTrackEvent(this[i],this.media)):(t=this.createTextTrack("captions",this.config["captionsTextTrack"+t+"Label"],this.config.captionsTextTrack1Langion(t,e,i){var n=this.media;if(n)return n.addTextTrack(t,e,i)},xe.prototype.destroy=function(){u.prototype.destroy.call(this)},xe.prototype.onMediaAttaching=function(t){this.meaDetaching=function(){Pe(this.t.vttCCs={ccOffset:0,presen{var e=t.textTracks;if(e)for(var i=0;i<e.length;i++)Pe(e[i])}},xe.prototype.onManifestLoaded=function(t){var a,o=this;this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=void 0,this.cueRanges=[],this.config.enableWebVTT&&(this.tracks=t.subtitles||[],a=this.media?this.media.textTracks:[],this.tracks.forEach(function(t,e){var i,n,r=void 0;e<a.length&&(i=a[e],n=t,!(e=i)||e.label!==n.name||e.textTrack1||e.textTrack2||(r=i)),(r=r||o.createTextTrack("subtitles",t.name,t.lang)).mode=t.default?"showing":"(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},xe.prototype.onFragLoaded=function(t){var e,i,n=t.frag,r=t.payload;"main"===n.type?((i=n.sn)===this.lastSn+1||(e=this.cea608Parser)&&e.reset(),this.lastSn=i):"subtitle"===n.type&&(r.byteLength?void 0!==this.initPTS?null!=(i=n.decryptdata)&&null!=i.key&&"AES-128"===i.method||this._parseVTTs(n,r):this.unparsedVttFrags.push(t):this.hls.trigger(T.a.SUBTITLE,a.trigger(T.a.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})})},xe.prototype.onFragDecrypted=function(t){var e=t.payload,i=t.frag;"subtitle"===i.type&&(void 0!==this.initPTS?this._parseVTTs(i,e):thisples[e].bytes);this.cea608Parse==i&&0==n||0!=(4&e)&&0==(3&e)&&(o.push(i),o.push(n));return o},xe),wt=function(t,e,i){return e&&Ie(t.prototype,e),i&&Ie(t,i),t};function Ie(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,i<t.length;i++)"subtitles"===t[i].kind&&e.push(t[i]);return e}function Me(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,Me);t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,Le.call(this,t,T.a.MEDIA_ATTACHED,T.a.MEDIA_DETACHING,T.a.MANIFEST_LOADING,T.a.MANIFEST_LOADED,T.a.SUBTITLE_TRACK_LOADED));return t.tracks=[],t.trackId=-1,t.media=void 0,t.subtitleDisplay=!1,t}var wt=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(tlength;i++)"showing"=e.prototype.destroy=function(xtTracks.addEventListener("chaistener("change",this.trackChane.onManifestLoading=function()t&&(e.media?e.subtitleTrack=t.id:e.queuedDefaultTrack=t.id)})},Me.prototype.onTick=function(){var t,e=this.trackId,i=this.tracks[e];i&&(void 0!==(t=i.details)&&!0!==t.live||(E.b.log("(re)loading playlist for subtitle track "+e),this.hls.trigger(T.a.SUBTITLE_TRACK_Live&&this.timer&&(clearInterval(this.timer),this.timer=null))},Me.prototype.setSubtitleTrackInternal=function(t){var e,i;t<-1||t>=this.tracks.length||(this.timer&&(clearInterval(this.timer),this.timer=null),i=De(this.media.textTracks),-1!==this.trackId&&this.subtitleDisplay&&(i[this.trackId].mode="hidden"),this.trackId=t,E.b.log("switching to subtitle track "+t),this.hls.trigger(T.a.SUBTITLE_TRACK_SWITCH,{id:t}),-1!==t&&(e=this.tracks[t],this.subtitleDisplay&&(i[t].mode="showing"),void 0!==(i=e.details)&&!0!==i.live||(E.b.log("(re)loading playlist for subtitle track "+t),this.hls.trigger(T.a.SUBTITLE_TRACK_LOADING,{url:e.url,id:t}))))},wt(Me,[{key:"subtitleTracks",get:function(){return this.tracks}unction(t){this.trackId!==t&&this.setSubtitleTrackInternal(t)}}]),Me),je=i(4);var Ne,Ue={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING"},i=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setnction(){u.prototype.destroy.cal{},this.tracks.forEach(function(t){e.vttFragQueues[t.id]=[]})},Fe.prototype.nextFrag=function(){var t;null===this.currentlyProcessing&&-1<this.currentTrackId&&this.vttFragQueues[this.currentTrackId].length&&(t=this.currentlyProcessing=this.vttFragQueues[this.currentTrackId].shift(),this.fragCurrent=t,this.hls.trigger(T.a.FRAG_LOADING,{frag:t}),this.currentlyProcessing=null,th)},Fe.prototype.onMediaAttached=function(){this.state=Ue.IDLE},Fe.prototype.onError=function(t){t=t.frag;t&&"subtitle"!==t.type||this.currentlyProcessing&&(thi<this.ticks&&setTimeout(function(){t.tick()},1),this.ticks=0)},Fe.prototype.doTick=function(){var i=this;switch(this.state){case Ue.IDLE:var t,e=this.tracks,n=this.currentTrackId,r=this.vttFragSNsProcessed[n],a=this.vttFragQueues[n],o=this.currentlyProcessing?this.currentlyProcessing.sn:-1;if(!e)break;if(void 0===(t=n<e.length?e[n].details:t))break;t.fragments.forEach(function(t){var e;-1<r.indexOf(t.sn)||t.sn===o||(e=t,a.some(function(t){return t.sn===e.sn}))||(t.decryptdata&&null!=t.decryptdata.uri&&null==t.decryptdata.key?(E.b.log("Loading key for "+t.sn),i.state=Ue.KEY_LOADING,i.hls.trigger(T.a.KEY_LOADING,{frag:t})):(t.trackId=n,a.ps.tracks.forEach(function(t){e.vttFunction(t){this.currentTrackId=t.id()},Fe.prototype.onSubtitthis.state===Ue.KEY_LOADING&&(this.state=Ue.IDLE,this.tick())},Fe.prototype.onFragLoaded=function(t){var i,e=this.fragCurrent,n=t.frag.decryptdata,r=t.frag,a=this.hls;if(this.state===Ue.FRAG_LOADING&&e&&"subtitle"===t.frag.type&&e.sn===t.frag.sn&&0<t.payload.byteLength&&null!=n&&null!=n.key&&"AES-128"===n.method){try{i=performance.now()}catch(t){i=Date.nRAG_DECRYPTED,{frag:r,payload:t,stats:{tstart:i,tdecrypt:e}})})}},Fe);function Fe(t){!function(t,e){if(!(t instanceof e))throw new lled");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,Ne.call(this,t,T.a.MEDIA_ATTACHED,T.a.ERROR,T.a.KEY_LOADED,T.a.FRAG_LOADED,T.a.SUBTITLE_TRACKS_UPDATED,T.a.SUBTITLE_TRACK_SWITCH,T.a.SUBTITLE_TRACK_LOADED,T.a.SUBTITLE_FRAG_PROCESSED));return e.config=t.config,e.vttFragSNsProcessed={},e.vttFragQueues=void 0,e.currentlyProcessing=null,e.state=Ue.STOPPED,e.currentTrackId=-1,e.ticks=0,e.decrypter=new je.a(t.observer,t.config),e}var Be={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:V,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:kt,bufferController:Pt,capLevelController:p,fpsController:G,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0};Be.subtitleStreamController=i,Be.subtitleTrackController=wt,Be.timelineController=it,Be.cueHandler=n,Be.enableCEA708Captions=!0,Be.enableWebVTT=!0,Be.captionsTextTrack1Label="English",Be.captionsTextTrack1LanguageCode="en",Be.captionsTextTrack2Label="Spanish",Be.captionsTextTrack2LanguageCode="es",Be.audioStreamController=r,Be.audioTrackController=lt;lt=function(t,e,i){return e&&Ge(t.prototype,e),i&&Ge(t,i),t};function Ge(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}He.isSupported=function(){return t=W(),e=window.SourceBuffer||window.WebKitSourceBuffer,t=t&&"function"==typeof t.isTypeSupported&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),e=!e||e.prototype&&"function"==typeof e.prototype.appendBuffer&&"function"==typeof e.prototype.remove,!!t&&!!e;var t,e},lt(He,null,[{key:"version",get:function(){return"0.8.9"}},{key:"Events",get:function(){return T.a}},{key:"ErrorTypes",get:function(){return w.b}},{key:"Erroey:"DefaultConfig",get:function(){return He.defaultConfig||B,this.observer.removeAllLia"),this.media=t,this.trtachMedia"),this.triggerce:"+t),this.url=t,this.trigger(T.a.MANIFEST_LOADING,{url:t})},He.prototype.startLoad=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"),this.networkControlle"),this.networkControllers.f.log("swapAudioCodec"),this.strror");var t=this.media;this.detachMedia(),this.attachMedia(t)},lt(He,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel"this.loadLevel=t,this.streamController.immediateLevelSwitch()}},{key:"nextLevtroller.manualLevel=t,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){E.b.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel"adLevel},set:function(tn Ma.b.log("set firstLevel:"+t),this.levelController.firstLevel=t}},{key:"startLevh.max(t,this.minAutoLevel)),this.levelController.startLevel=t}},{key:"autoL){E.b.log("set autoLevelCappid",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){ret[n].realBitrate,t[n].bitr=this.autoLevelCapping;retontrhis.abrController.nextAutoLevel=Math.max(this.minAutoLevel,t)}},{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"liveSyncPosition",get:function(){return thisr t=this.subtitleTrackContar t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackr t=){var e=this.subtitleTrackController;e&&(e.subtitleDisplay=t)}}]),lt=He;function He(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,He);var i,n=He.DefaultConfig;if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(i in n)i in t||(t[i]=n[i]);if(void 0!==t.liveMaxLatencyDurationCount&&t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==t.liveMaxLatencyDuration&&(t.liveMaxLatencyDuration<=t.liveSyncDuration||void 0===t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(E.a)(t.debug),this.config=t,this._autoLevelCapping=-1;var r=this.observer=new H.a;r.trigger=function(t){for(var e=arguments.length,i=Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];r.emit.apply(r,[t,t].concat(i))},r.off=function(t){for(var e=arguments.length,i=Array(1<e?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];r.removeListener.apply(r,[t].concat(i))},this.on=r.on.bind(r),this.off=r.off.bind(r),this.trigger=r.trigger.bind(r);var a=this.abrController=new t.abrController(this),o=new t.bufferController(this),s=new t.capLevelController(this),u=new t.fpsController(this),l=new L(this),c=new M(this),d=new N(this),h=new yt(this),f=[this.levelController=new ft(this),this.streamController=new ut(this)],p=t.audioStreamController;p&&f.push(new p(this)),this.networkControllers=f;var m=[l,c,d,a,o,s,u,h];(p=t.audioTrackController)&&(h=new p(this),this.audioTrackController=h,m.push(h)),(p=t.subtitleTrackController)&&(p=new p(this),this.subtitleTrackController=p,m.pusht.timelineController].forEach(function(t){t&&m.push(new t(e))}),this.coreComponents=m}e.default=lt},function(t,e,r){function a(t,e){for(var i=[e],n=[],r={};i.length;){var a=i.pop();!r[a]&&t[a]&&(r[a]=!0,n.push(a),a=function(t){var e=[],i=t.toString();if(!(t=i.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/)))return e;for(var n,t=t[1],r=new RegExp("(\\\\n|\\W)"+(t+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")+"\\((/\\*.*?\\*/)?s?.*?([\\.|\\-|\\w|/|@]+).*?\\)","g");n=r.exec(i);)e.push(n[3]);return e}(t[a]),i=i.concat(a))}return n}t.exports=functole.error(t),t};var t=r(r.s=ENTRY_MODULE);return t.default||t}.tomap(function(t){return JSON.stringify(t)+": "+i[t].toString()}).join(",")+"})(self);",n=new window.Blob([n],{type:"text/javascript"});if(e.bare)return n;e=(window.URL||window.webkitURL||window.mozURL||window.msURL).crea,i.push(e.dect.{retunction(t,e){return Object.pro}};returnbal:"undefined"!=t==typeof require&&require,t=0;t<o.length;t++)s(o[t]);return s}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var l=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,a=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return i}(t,e);throw new Typei[n];if(e>=r.adStartTime&&e<=r.adEndTime)return r}return null}var n,r=t("global/window"),d=(n=r)&&n.__esModule?n:{default:n};i.default={updateAdCues:function(t,e){if(t.segments)for(var i=arguments.length<=2||void 0===arguments[2]?0:arguments[2],n=void 0,r=0;r<t.segments.length;r++){var a,o,s,u=t.segments[r];if(n=n||c(e,i+u.duration/2)){if("cueIn"in u){n.endTime=i,n.adEndTime=i,i+=u.duration,n=null;continue}if(i<n.endTime){i+=u.duration;continue}n.endTime+=u.duration}else"cueOut"in u&&((n=new d.default.VTTCue(i,i+u.duration,u.cueOut)).adStartTime=i,n.adEndTime=i+parseFloat(u.cueOut),e.addCue(n)),"cueOutCont"in u&&(s=o=void 0,a=u.cueOutCont.split("/").map(parseFloat),o=(a=l(a,2))[0],s=a[1],(n=new d.default.VTTCue(i,i+u.duration,"")).adStartTime=i-o,n.adEndTime=n.adStartTime+s,e.addCue(n));i+=u.duration}},findAdCue:c},e.exports=i.default},{"global/window":30}],2:[function(t,e,i)function a(t)n("")+" +"\n";return i},tagDump:function(t){return n.hexDump(t.bytes)},textRanges:function(t){for(var e,i,n="",r=void 0,r=0;r<t.length;r++)n+=(i=r,(e=t).r,byteOffset:e0,offset:0};return[e.length,e.offset,t.re_BUFFER_LENGTH:30,BANDWIDTH_VARIANCE:1.2},e.exports=i.default},{}],4:[function(t,e,i){"use strict";Object.definsferableMessage)({source:i.source,decrypted:e}),[e.buffer])})}}var r,a=t("global/window"),o=(r=a)&&r.__esModule?r:{default:r},s=t("aes-decrypter"),u=t("./bin-utils");i.default=function(t){return new n(t)},e.exports=i.default},{"./bin-utils":2,"aes-decrypter":23,"global/window":30}],5:[function(S,t,k){!function(t){"use strict";Object.defineProperty(k,"__esModule",{value:!0});var e=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t};function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=function(t,e,i){for(var n=!0;n;){var r=t,a=e,o=i,n=!1;null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}r=Object.getPrototypeOf(r);if(null===r)return;t=r,e=a,i=o,n=!0,s=void 0}};function i(t){return t&&t.__esModule?t:{default:t}}function l(t){var e,i={codecCount:0};return i.codecCount=t.split(",").length,i.codecCount=i.codecCount||2,(e=/(^|\s|,)+(avc1)([^ ,]*)/i.exec(t))&&(i.videoCodec=e[2],i.videoObjectTypeIndicator=e[3]),i.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(t),i.audioProfile=i.audioProfile&&i.audioPro(\d+)/i,function(t){return(0,s.translateLegacyCodecs)([t])[0]})}var d=i(S("./playlist-loader")),h=i(S("./segment-loader")),f=i(S("./vtt-segment-loader")),r=i(S("./ranges")),p=i("undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null),o=i(S("./ad-cue-tags")),m=i(S("./sync-controller")),s=S("videojs-contrib-media-sources/es5/codec-utils"),y=i(S("webworkify")),g=i(S("./decrypter-worker")),v=void 0,b={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",audioProfile:"2"},_=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequereturn this.audioSegment+'; codecs="'+i.filter(function(t){return!!t}).join(", ")+'"'}function u(t,e){var i=(o=e).segments&&o.segments.length&&o.segments[0].map?"mp4":"mp2t",n=function(t){t=t.attributes||{};return t.CODECS?l(t.CODECS):b}(e),r=e.attributes||{},a=!0,o=!1;if(!e)return[];if(t.mediaGroups.AUDIO&&r.AUDIO){var s=t.mediaGroups.AUDIO[r.AUDIO];if(s)for(var u in a=!(o=!0),s)if(!s[u].uri){a=!0;break}}return o&&!n.audioProfile&&(p.default.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),n.audioProfile=b.audioProfile),t={},n.videoCodec&&(t.video=""+n.videoCodec+n.videoObjectTypeIndicator),n.audioProfile&&(t.audio="mp4a.40."+n.audioProfile),r=w("audio",i,[t.audio]),n=w("video",i,[t.video]),i=w("video",i,[t.video,t.audio]),o?!a&&ject.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(E,p.default.EventTarget),e(E,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var n=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var t=n.masterPlaylistLoader_.media(),e=1.5*n.masterPlaylistLoader_.targetDuration*1e3;n.masterPlaylistLoader_.isLowestEnabledRendition_()?n.requestOptions_.timeout=0:n.requestOptions_.timeout=e,t.endList&&"none"!==n.tech_.preload()&&(n.mainSegmentLoader_.playlist(t,n.requestOptions_),n.mainSegmentLoader_.load()),n.fillAudioTracks_(),n.setupAudio(),n.fillSubtitleTracks_(),n.setupSubtitles(),n.triggerPresenceUsage_(n.master(),t);try{n.setupSourceBuffers_()}catch(t){return p.default.log.warn("Failed to create SourceBuffers",t),n.mediaSource.endOfStream("decode")}n.setupFirstPlay(),n.trigger("audioupdate"),n.trigger("selectedinitialmedia")}),this.masterPlaylistLoader_.on("loadedplaylist",function(){var t=n.masterPlaylistLoader_.media();if(!t)return n.initialMedia_=n.select.length&&n.mediaSource.addSeekableRange_(t.start(0),t.end(0))}function i(){n.duration()===1/0?e():n.tech_.one("durationchange",i)}n.useCueTags_&&n.updateAdCues_(t),n.mainSegmentLoader_.playlist(t,n.requestOptions_),n.updateDuration(),n.tech_.paused()||n.mainSegmentLoader_.load(),t.endList||(n.duration()!==1/0?n.tech_.one("dn(){n.blacklistCurrentPlaylist(n.masterPlaylistn(){n.mainSegmentLoader_.abort(),n.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var t=n.masterPlaylistLoader_.media(),e=1.5*n.masterPlaylistLoader_.targetDuration*1e3;n.masterPlaylistLoader_.isLowestEnabledRendition_()?n.requestOptions_.timeout=0:n.requestOptions_.timeout=e,n.mainSegmentLoader_.playlist(t,n.requestOptions_),n.mainSegmentLoader_.load(),n.activeAudioGroup().filter(function(t){return t.enabled})[0]||(n.mediaGroupChanged(),n.trigger("audioupdate")),n.setupSubtitles(),n.tech_.trigger({type:"mediachange",bulist no longer updating."}),n.tech_.trigger("playliststuck"))}),this.masterPlaylistLoader_.on("renditiondisabled",function(){n.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){n.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(t,e){var i,n=t.mediaGroups||{},r=!0,t=Object.keys(n.AUDIO);for(i in n.AUDIO)for(var a in n.AUDIO[i])n.AUDIO[i][a].uri||(r=!1);r&&this.tech_.trigger({type:"usage",name:"hls-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"}),v.Playlist.isAes(e)&&this.tech_.trigger({type:"usage",name:"hls-aes"}),v.Playlist.isFmp4(e)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.length&&1<Object.keys(n.AUDIO[t[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var t=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){t.masterPlaylistLoader_.media(t.selectPlaylist()),t.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("progress",functioon(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("syncinfoupdate",function(){t.onSy){t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){t.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("ended",funcs.audioSegmentLoader_.on("ended",funcentLoader_.abort(),t.audioPlaylistLoader_=null,t.setupAudio()}),this.subtitleSegmentLoader_.on("error",this.handleSubtitleError_.bind(this))}},{key:"handleAudioinfoUpdate_",value:function(t){var e,i,n,r;!v.supportsAudioInfoChange_()&&this.audioInfo_&&function(t,e){if(typeof t!=typeof e)return!0;if(Object.keys(t).length!==Object.keys(e).length)return!0;for(var i in t)if(t[i]!==e[i])return!0;return!1}(this.audioInfo_,t.info)?(e="had different audio properties (channels, sample rate, etc.) or changed in some other way.  This behavior is currently unsupported in Firefox 48 and below due to an issue: \n\nhttps://bugzilla.mozilla.org/show_bug.cgi?id=1247138\n\n",i=this.activeAudioGroup().map(function(t){return t.enabled}).indexOf(!0)ilter(function(t){return t.properties_&&t.properties_.default})[0],this.audioPlaylistLoader_?(e="The audio track '"+n.label+"' that we tried to switch to "+e+" Unfortunately this means we will have to return you to the main track '"+r.label+"'. Sorry!",r.enabled=!0,this.activeAudioGroup().splice(i,1),this.trigger("audioupdate")):(e="The rendition that we tried to switch to "+e+"Unfortunately that means we will have to blacklist the current playlist and switch to another. Sorry!",this.blacklistCurrentPlaylist()),p.default.log.warn(e),this.setupAudiediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"fillAudioTracks_",value:function(){var t,e=this.master().mediaGroups||{};for(t in e&&e.AUDIO&&0!==Object.keys(e.AUDIO).length&&"html5"===this.mode_||(e.AUDIO={main:{default:{default:!0}}}),e.AUDIO)for(var i in this.audioGroups_[t]||(this.audioGroups_[t]=[]),e.AUDIO[t]){var n=e.AUDIO[t][i],i=new p.default.AudioTrack({id:i,kind:this.audioTrackKind_(n),enabled:!1,language:n.language,label:i});i.properties_=n,this.audioGroups_[t].push(i)}(this.activeAudioGroup().filter(function(t){return t.properties_.default})[0]||this.activeAudioGroup()[0]).enabled=!0}},{key:"audioTrackKind_",value:function(t){var e=t.default?"main":"alternative";return e=t.characteristics&&0<=t.characteristics.indexOf("public.accessibility.describes-video")?"main-desc":e}},{key:"fillSubtitleTracks_",value:function(){var t,e=this.master().mediaGroups||{};for(t in e.SUBTITLES)for(var i in this.subtitleGroups_.groups[t]||(this.subtitleGroups_.groups[t]=[]),e.SUBTITLES[t]){var n=e.SUBTITLES[t][i];n.forced||(this.subtitleGroups_.groups[t].push(p.default.mergeOptions({id:i},n)),void 0===this.subtitleGroups_.tracks[i]&&(n=this.tech_.addRemoteTextTrack({id:i,kind:"subtitles",enabled:!1,language:n.language,label:i},!0).track,this.subtitleGroups_.tracks[i]=n))}}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.audioPlaylistLoader_&&this.audioSegmentLoader_.load(),this.subtitlePlaylistLoader_&&this.subtitleSegmentLoader_.load()}},{key:"activeAudioGroup",value:function(){var t=this.masterPlaylistLoader_.media(),e=void 0;return(e=t.attributes&&t.attributes.AUDIO?this.audioGroups_[t.attributes.AUDIO]:e)||this.audioGroups_.main}},{key:"activeSubtitleGroup_",value:function(){var t=this.masterPlaylistLoader_.media(),e=void 0;return t?(e=t.attributes&&t.attributes.SUBTITLES?this.subtitleGroups_.groups[t.attributes.SUBTITLES]:e)||this.subtitleGroups_.groups.main:null}},{key:"activeSubtitleTrack_",value:function(){for(var t in this.subtitleGroups_.tracks)if("showing"===this.subtitleGroups_.tracks[t].mode)return this.subtitleGroups_.tracks[t];return null}},{key:"handleSubtitleError_",value:function(){p.default.log.warn("Problem encountered loading the subtitle track. Switching back to default."),this.subtitleSegmentLoader_.abort();var t=this.activeSubtitleTrack_();t&&(t.mode="disabled"),this.setupSubtitles()}},{key:"mediaGroupChanged",value:function(){var t=this.getActiveAudioTrack_();this.stopAudioLoaders_(),this.resyncAudioLoaders_(t)}},{key:"setupAudio",value:function(){var t=this.getActiveAudioTrack_();this.stopAudioLoaders_(),this.resetAudioLoaders_(t)}},{key:"getActiveAudioTrack_",value:function(){var t=this.activeAudioGroup(),e=t.filter(function(t){return t.enabled})[0];return e||((e=t.filter(function(t){return t.properties_.defas.audioPlaylistLoader_=null),this.audioSegmentLoader_.pause()}},{key:"resetAudioLoaders_",value:function(t){t.properties_.resolvedUri?(this.audioSegmentLoader_.resetEverything(),this.setupAudioPlaylistLoader_(t)):this.mainSegmentLoader_.resetEverything()}},{key:"resyncAudioLoaders_",value:function(t){t.properties_.resolvedUri&&(this.audioSegmentLoader_.resyncLoader(),this.setupAudioPlaylistLoader_(t))}},{key:"setupAudioPlaylistLoader_",value:function(t){var e=this;this.audioPlaylistLoader_=new d.default(t.properties_.resolvedUri,this.hls_,this.withCredentials),this.audioPlaylistLoader_.load(),this.audioPlaylistLoader_.on("loadedmetadata",function(){var t=e.audioPlaylistLoader_.media();e.audioSegmentLoader_.playlist(t,e.requestOptions_),(!e.tech_.paused()||t.endList&&"none"!==e.tech_.preload())&&e.audioSegmentLoader_.load(),t.endList||e.audioPlaylistLoader_.trigger("firstplay")}),this.audioPlaylistLoader_.on("loadedplaylist",function(){var t=void 0;(t=e.audioPlaylistLoader_?e.audioPlaylistLoader_.media():t)?e.audioSegmentLoader_.playlist(t,e.requestOptions_):e.audioPlaylistLoader_.media(e.audioPlaylistLoader_.playlists.master.playlists[0])}),this.audioPlaylistLoader_.on("error",function(){p.default.log.warn("Problem encountered loading the alternate audio track. Switching back to default."),e.audioSegmentLoader_.abort(),e.setupAudio()})}},{key:"setupSubtitles",value:function(){var e=this,t=this.activeSubtitleGroup_(),i=this.activeSubttLoader_.pause(),i?(t=t.filter(function(t){return t.id===i.id})[0],this.subtitlePlaylistLoader_&&this.subtitlePlaylistLoader_.media()&&this.subtitlePlaylistLoader_.media().resolvedUri===t.resolvedUri||(this.subtitlePlaylistLoader_&&this.subtitlePlaylistLoader_.dispose(),this.subtitleSegmentLoader_.resetEverything(),this.subtitlePlaylistLoader_=new d.default(t.resolvedUri,this.hls_,this.withCredentials),this.subtitlePlaylistLoader_.on("loadedmetadata",function(){var t=e.subtitlePlaylistLoader_.media();e.subtitleSegmentLoader_.playlist(t,e.requestOptions_),e.subtitleSegmentLoader_.track(e.activeSubtitleTrack_()),(!e.tech_.paused()||t.endList&&"none"!==e.tech_.preload())&&e.subtitleSegmentLoader_.load()}),this.subtitlePlaylistLoader_.on("loadedplaylist",function(){var t=void 0;(t=e.subtitlePlaylistLoader_?e.subtitlePlaylistLoader_.media():t)&&e.subtitleSegmentLoader_.playlist(t,e.requestOptions_)}),this.subtitlePlaylistLoader_.on("error",this.handleSubtitleError_.bind(this))),(this.subtitlePlaylistLoader_.media()&&this.subtitlePlaylistLoader_.media().resolvedUri===t.resolvedUri?this.subtitleSegmentLoader_:this.subtitlePlaylistLoader_).load()):this.subtitlePlaylistLoader_&&(this.subtitlePlaylistLoader_.dispose(),this.saylistLoader_.mediastart(0)?this.tech_.setCurrentTime(t.end(t.length-1)):void 0}}},{key:"setupFirstPlay",value:function(){var t=void 0,e=this.masterPlaylistLoader_.media();return!(!e||this.tech_.paused()||this.hasPlayed_())&&(e.endList||(this.trigger("firstplay"),(t=this.seekable()).length&&this.tech_.setCurrentTime(t.end(0))),this.hasPlayed_=function(){return!0},this.load(),!0)}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(t){return p.default.log.warn("Failed to create Source Buffers",t),this.mediaSource.endOfStream("decode")}this.tech_.autoplay()&&this.tech_.play(),this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var t=this.mainSegmentLoader_.ended_;(t=this.audioPlaylistLoader_?t&&this.audioSegmentLoader_.ended_:t)&&this.mediaSource.endOfStream()}},{key:"stuckAtPlaylistEnd_",value:function(t){if(!this.seekable().length)return!1;var e=this.syncController_.getExpiredTime(t,this.mediaSource.duration);if(null===e)return!1;var i=v.Playlist.playlistEnd(t,e),t=this.tech_.currentTime(),e=this.tech_.buffered();if(!e.length)return i-t<=r.default.TIME_FUDGE_FACTOR;e=e.end(e.length-1);return e-t<=r.default.TIME_FUDGE_FACTOR&&i-e<=r.default.TIME_FUDGE_FACTOR}},{key:"blacklistCurrentPlaylist",value:function(){var t,e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=void 0;if(!(i=e.playlist||this.masterPlaylistLoader_.media())){this.error=e;try{return this.mediaSource.endOfStream("network")}catch(t){return this.trigger("error")}}var n=this.masterPlaylistLoader_.isFinalRendition_();return n?(p.default.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(n)):(i.excludeUntil=Date.now()+1e3*this.blacklistDuration,this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"}),t=this.selectPlaylist(),p.default.log.warn("Problem encountered with the current HLS playlist."+(e.message?" "+e.message:"")+" Switching to another playlist."),this.masterPlaylistLoader_.media(t))}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause(),this.audioPlaylistLoader_&&this.audioSegmentLoader_.pause(),this.subtitlePlaylistLoader_&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(t){var e=r.default.findRange(this.tech_.buffered(),t);if(!this.masterPlaylistLoader_||!this.masterPlaylistLoader_.media())return 0;if(!this.masterPlaylistLoader_.media().segments)return 0;var i="flash"===this.mode_||"auto"===this.mode_&&!p.default.MediaSource.supportsNativeMediaSources();if(e&&e.length&&!i)return t;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.audioPlaylistLoader_&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.subtitlePlaylistLoader_&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioPlaylistLoader_&&this.audioSegmentLoader_.load(),this.subtitlePlaylistLoaderion:v.Playlist.duration)):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var t=void 0,e=void 0;if(this.masterPlaylistLoader_){var i=this.masterPlaylistLoader_.media();if(i){var n=this.syncController_.getExpiredTime(i,this.mediaSource.duration);if(null!==n&&0!==(t=v.Playlist.seekable(i,n)).length){if(this.audioPlaylistLoader_){if(i=this.audioPlaylistLoader_.media(),null===(n=this.syncController_.getExpiredTime(i,this.mediaSource.duration)))return;if(0===(e=v.Playlist.seekable(i,n)).length)return}!e||e.start(0)>t.end(0)||t.start(0)>e.end(0)?this.seekable_=t:this.seekable_=p.default.createTimeRanges([[(e.start(0)>t.start(0)?e:t).start(0),(e.end(0)<t.end(0)?e:t).end(0)]]),this.tech_.trigger("seekablechanged")}}}}},{key:"updateDuration",value:function(){function t(){e.mediaSource.duration=n,e.tech_.trigger("durationchange"),e.mediaSource.removeEventListener("sourceopen",t)}var e=this,i=this.mediaSource.duration,n=v.Playlist.duration(this.masterPlaylistLoader_.media()),r=this.tech_.buffered();i!==(n=0<r.length?Math.max(n,r.end(r.length-1)):n)&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",t):t())}},{key:"dispose",value:function(){this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.audioPlaylistLoader_&&this.audioPlaylistLoader_.dispose(),this.subtitlePlaylistLoader_&&this.subtitlePlaylistLoader_.dispose(),this.audioSegmentLoader_.disposeer",value:function()return this.masterPlaylistLoader_.tLoader_.mimeType(t[1]),this.excludeIncompatibleVariants_(e)}}},{key:"excludeIncompatibleVariants_",value:function(t){var e,i=this.masterPlaylistLoader_.master,n=2,r=null;t.attributes&&t.attributes.CODECS&&(e=l(t.attributes.CODECS),r=e.videoCodec,n=e.codecCount),i.playlists.forEach(function(t){var e,i={codecCount:2,videoCodec:null};t.attributes&&t.attributes.CODECS&&(e=t.attributes.CODECS,i=l(e),window.MediaSource&&window.MediaSource.isTypeSupported&&!window.MediaSource.isTypeSupported('video/mp4; codecs="'+a(e)+'"')&&(t.excludeUntil=1/0)),i.codecCount!==n&&(t.excludeUntil=1/0),i.video(e=i.start(0)),o.default.updateAdCues(t,this.cueTagsTrack_,e)}}]),e=E;function E(t){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,E),c(Object.getPrototypeOf(E.prototype),"constructor",this).call(this);var i=t.url,n=t.withCredentials,r=t.mode,a=t.tech,o=t.bandwidth,s=t.externHls,u=t.useCueTags,l=t.blacklistDuration;if(!i)throw new Error("A non-empty playlist URL is required");v=s,this.withCredentials=n,this.tech_=a,this.hls_=a.hls,this.mode_=r,this.useCueTags_=u,this.blacklistDuration=l,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:this.withCredentials,timeout:null},this.audioGroups_={},this.subtitleGroups_={groups:{},tracks:{}},this.mediaSource=new p.default.MediaSource({mode:r}),this.audioinfo_=null,this.mediaSource.on("audioinfo",this.handleAudioinfoUpdate_.bind(this)),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_.bind(thisefault.createTimeRanges(),this.hasPlayed_=function(){return!1},this.syncController_=new m.default(t),this.segmentMetadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!0).track,this.decrypter_=(0,y.default)(g.default);o={hls:this.hls_,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.binurn e.see.seeking()iaSource.duration},hasPlayed:function(){return e.hasPlayed_()},bandwidth:o,syncController:this.syncController_,decrypter:this.decrypter_};this.masterPlaylistLoader_=new d.default(i,this.hls_,this.withCredentials),this.setupMasterPlaylistLoaderListeners_(),this.audioPlaylistLoader_=null,this.subtitlePlaylistLoader_=null,this.mainSegmentLoader_=new h.default(p.default.mergeOptions(o,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),t),this.audioSegmentLoader_=new h.default(p.default.mergeOptions(o,{loaderType:"audio"}),t),this.subtitleSegmentLoader_=new f.default(p.default.mergeOptions(o,{loadeLoaderListeners_(),_.forEach(function(t){e[t+"_"]=T.bind(e,t)}),this.masterPlaylistLoader_.load()}k.MasterPlaylistController=e}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ad-cue-tags":1,"./decrypter-worker":4,"./playlist-loader":8,"./ranges":11,"./segment-loader":15,"./sync-controller":17,"./vtt-segment-loader":18,"videojs-contrib-media-sources/es5/codec-utils":64,webworkify:75}],6:[function(n,t,r){!function(t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var e,i="undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null,b=(e=i)&&e.__esModule?e:{default:e},a=n("./bin-utilet+"-"+t)),i}function w(t){t.forEach(function(t){t.abort()})}function E(t,e){return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:_.TIMEOUT,xhr:e}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:_.ABORTED,xhr:e}:t?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:_.FAILURE,xhr:e}:null}function S(e,i,n){function r(t){if(t.data.source===i.requestId){e.removeEventListener("message",r);t=t.data.decrypted;return i.bytes=new Uint8Array(t.bytes,t.byteOffset,t.byteLength),n(null,i)}}e.addEventListener("message",r),e.postMessage((0,a.createTransferableMessage)({source:i.requestId,encrypted:i.encryptedBytes,key:i.key.bytes,iv:i.key.iv}),[i.encryptedBytes.buffer,i.key.bytes.buffer])}function k(n,r){return function(t){var e,i;return n.stats=(i=(e=t).target,i={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-i.requestTime||0},e.lengthComputable&&(i.bytesReceived=e.loaded,i.bandwidth=Math.floor(i.bytesReceived/i.roundTripTime*8*1e3)),i),r(t,n)}}r.mediaSegmentRequest=function(t,e,i,n,r,a){var o,s,u,l,c,d,h,f,p,m,y=[],a=(o=y,s=i,u=a,l=[],c=0,function(t,e){if(t&&(w(o),l.push(t)),(c+=1)===o.l0<l.length){t=l.reduce(function(t,e){return e.code>t.code?e:t});return u(t,e)}return e.encryptedBytes?S(s,e,u):u(null,e)}});n.key&&(f=t(b.default.mergeOptions(e,{uri:n.key.resolvedUri,responseType:"arraybuffer"}),(d=n,h=a,function(t,e){var i=e.response,t=E(t,e);if(t)return h(t,d);if(16!==i.byteLength)return h({status:e.status,message:"Invalid HLS key at URL: "+e.uri,code:_.FAILURE,xhr:e},d);i=new DataView(i);return d.key.bytes=new Uint32Array([i.getUint32(0),i.getUint32(4),i.getUint32(8),i.getUint32(12)]),h(null,d)})),y.push(f)),n.map&&!n.map.bytes&&(f=t(b.default.mergeOptions(e,{uri:n.map.reso,xhr:e},p):(p.map.bytes=new Uint8Array(e.response),m(null,p))})),y.push(f));var g,v,a=t(b.default.mergeOptions(e,{uri:n.resolvedUri,responseType:"arraybuffer",headers:T(n)}),(g=n,v=a,function(t,e){var i=e.response,t=E(t,e);return t?v(t,g):0===i.byteLength?v({status:e.status,message:"Empty HLS segment content at URL: "+e.uri,code:_.FAILURE,xhr:e},g):(g.stats={bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0},g.key?g.encryptedBytes=new Uint8Array(e.response):g.bytes=new Uint8Array(e.response),v(nulltListener("progress",k(n,r)),y.push(a),function(){return w(y)}}}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bin-utils":2}],7:[function(r,c,d){!function(t){"use value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t){return t&&t.__esModule?t:{default:t}}var a=i(r("global/window")),o=i(r("./ranges")),s=i("undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null),u=["seeking","seeked","pausa.default.setTimeout(this.monitopdates++:(this.consecutiveU_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null}},{key:"fixesBadSeeks_",value:function(){var t=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking()&&this.outsideOfSeekableWindow_(t,e)){var i=t.end(t.length-1);return this.logger_("Trying to seek outside of seekable at time "+e+" with seekable range "+o.default.printableRange(t)+". Seeking to "+i+"."),this.tech_.setCurrentTime(i),!0}return!1}},{key:"waiting_",value:function(){var t,e;this.techWaiting_()||(t=this.tech_.currentTime(),e=this.tech_.buffered(),(e=o.default.findRange(e,t)).length&&t+3<=e.end(0)&&(this.cancelTimer_(),this.tech_.setCurrentTime(t),this.logger_("Stopped at "+t+" while inside a buffered region ["+e.start(0)+" -> "+e.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})))}},{key:"techWaiting_",value:function(){var t=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.fellOutOfLiveWindow_(t,e)){var i=t.end(t.length-1);return this.logger_("Fell out of live window at time "+e+". Seeking to live point (seekable end) "+i),this.cancelTimer_(),this.tech_.setCurrentTime(i),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}t=this.tech_.buffered(),i=o.default.findNextRange(t,e);if(this.videoUnderflow_(i,t,e))return this.cancelTimer_(),this.tech_.setCurrentTime(e),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;if(0<i.length){t=i.start(0)-e;return this.logger_("Stopped at "+e+", setting timer for "+t+", seeking to "+i.start(0)),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*t,e),!0}return!1}},{key:"outsideOfSeekableWindow_",value:function(t,e){return!!t.length&&(e<t.start(0)-.1||e>t.end(t.length-1)+.1)}},{key:"fellOutOfLiveWindow_",value:function(t,e){return!!(t.length&&0<t.start(0)&&e<t.start(0))}},{key:"videoUnderflow_",value:function(t,e,i){if(0===t.length){e=this.gapFromVideoUnderflow_(e,i);if(e)return this.logger_("Encountered a gap in video from "+e.start+" to "+e.end+". SeekiCTOR),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(t,e){for(var i=o.default.findGaps(t),n=0;n<i.length;n++){var r=i.start(n),a=i.end(n);if(e-r<4&&start:r,end:a}}return null}},{key:"logger_",value:function(){}}]),l);function l(t){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),this.tech_=t.tech,this.seekable=t.seekable,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,t.debug&&(this.logger_=s.default.log.bind(s.default,"playback-watcher ->")),this.logger_("initialize");function i(eturn e.cancelTimer_()}function r(){return e.fixesBadSeeks_()}this.tech_.on("seekablechanged",r),this.tech_.on("waiting",i),this.tech_.on(u,n),this.monitorCurrentTime_(),this.dispose=function(){e.logger_("dispose"),e.tech_.off("seekablechanged",r),e.tech_.off("waiting",i),e.tech_.off(u,n),e.checkCurrentTimeTimeout_&&a.default.clearTimeout(e.checkCurrentTimeTimeout_),e.cancelTimer_()}}d.default=e,c.exports=d.default}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./ranges":11,"global/window":30}],8:[function(i,r,a){!function(t){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});function d(t,e){for(var i,n=!1,r=(0,u.mergeOptions)(t,{}),a=t.playlists.length,o=void 0,s=void 0;a--;)if(!((i=r.playlists[a]).uri!==e.uri||i.segments&&e.segments&&i.segments.length===e.segments.length&&i.mediaSequence===e.mediaSequence)){for(r.playlists[a]=(0,u.mergeOptions)(i,e),r.playlists[e.uri]=r.playlists[a],i.segments&&(r.playlists[a].segments=function(t,e,i){var n,r=e.slice(),a=void 0;for(i=i||0,n=Math.min(t.length,e.length+i),a=i;a<n;a++)r[a-i]=(0,u.mergeOptions)(t[a],r[a-i]);return r}(i.segments,e.segments,e.mediaSequence-i.mediaSequence)),s=0,r.playlists[a].segments&&(s=r.playlists[a].segments.length);s--;)(o=r.playlists[a].segments[s]).resolvedUri||(o.resolvedUri=(0,h.default)(i.resolvedUri,o.uri)),o.key&&!o.key.resolvedUri&&(o.key.resolvedUri=(0,h.default)(i.resolvedUri,o.key.uri)),o.map&&!o.map.resolvedUri&&(o.map.resolvedUri=(0,h.default)(i.resolvedUri,o.map.uri));n=!0}return n?r:null}var h=e(i("./resolve-url")),u="undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null,n=i("./playlist.js"),f=e(i("m3u8-parser")),p=e(i("global/window")),t=function t(a,e,r){var o,s,i=this,u=this,l=void 0,c=void 0;if(t.prototype.constructor.call(this),this.hls_=e,!a)throw new Error("A non-empty playlist URL is required");o=function(t,e,i){u.setBandwidth(c||t),c=null,i&&(u.state=i),u.error={playlist:u.master.playlists[e],status:t.status,message:"HLS playlist request error at URL: "+e,responseText:t.responseText,code:500<=t.status?4:2},u.trigger("error")},s=function(t,e){var i,n=void 0,r=void 0;u.setBandwidth(c||t),c=null,u.state="HAVE_METADATA",(n=new f.default.Parser).push(t.responseText),n.end(),n.manifest.uri=e,i=d(u.master,n.manifest),r=1e3*(n.manifest.targetDuration||10),u.targetDuration=n.manifest.targetDuration,i?(u.master=i,u.media_=u.master.playlists[n.manifest.uri]):(r/=2,u.trigger("playlistunchanged")),u.medidefault.setTimeout(function(){u.trigger("mediaupdatetimeout")},r)),u.trigger("loadedplaylist")},u.state="HAVE_NOTHING",u.dispose=function(){u.stopRequest(),p.default.clearTimeout(l),u.off()},u.stopRequest=function(){var t;c&&(t=c,c=null,t.onreadystatechange=null,t.abort())},u.enabledPlaylists_=function(){return u.master.playlists.filter(n.isEnabled).length},u.isLowestEnabledRendition_=function(){if(1===u.master.playlists.length)return!0;var i=u.media().attributes.BANDWIDTH||Number.MAX_VALUE;return 0===u.master.playlists.filter(function(t){if(!(0,n.isEnabled)(t))return!1;var e=0;return(e=t&&t.attributes?t.attributes.BANDWIDTH:e)<i}).length},u.isFinalRendition_=function(){return 1===u.master.playlists.filter(n.isEnabled).length},u.media=function(i){var t,n=u.state;if(!i)return u.media_;if("HAVE_NOTHING"===u.state)throw new Error("Cannot switch media playlist from "+u.state);if("string"==typeof i){if(!u.master.playlists[i])throw new Error("Unknown playlist URI: "+i);i=u.master.playlists[i]}if(t=!u.media_||i.uri!==u.media_.uri,u.master.playlists[i.uri].endList)return c&&(c.onreadystatechange=null,c.abort(),c=null),u.state="HAVE_METADATA",u.media_=i,void(t&&(u.trigger("mediachanging"),u.trigger("mediachange")));if(t){if(u.state="SWITCHING_MEDIA",c){if((0,h.default)(u.master.uri,i.uri)===c.url)return;c.onreadystatechange=null,c.abort(),c=null}this.media_&&this.trigger("mediachanging"),c=this.hls_ER"===n?u.trigger(nge")}})}},u.setBandwidth=function(t){u.bandwidth=t.bandwidth},u.on("mediaupdatetimeout",function(){"HAVE_METADATA"===u.state&&(u.state="HAVE_CURRENT_METADATA",c=this.hls_.xhr({uri:(0,h.default)(u.master.uri,u.media().uri),withCredentials:r},function(t,e){if(c)return t?o(c,u.media().uri,"HAVE_METADATA"):void s(c,u.media().uri)}))}),u.on("firstplay",function(){var t=u.media();t&&(t.syncInfo={mediaSequence:t.mediaSequence,time:0})}),u.pause=function(){u.stopRequest(),p.default.clearTimeout(l),"HAVE_NOTHING"===u.state&&(u.started=!1)},u.load=function(t){var e=u.media();p.default.clearTimeout(l),t?(t=e?e.targetDuration/2*1e3:5e3,l=p.default.setTimeout(u.load.bind(null,!1),t)):u.started?e&&!e.endList?u.trigger("mediaupdatetimeout"):u.trigger("loadedplaylist"):u.start()},u.start=function(){u.started=!0,c=i.hls_.xhr({uri:a,withCredentials:r},function(t,e){var i=void 0,n=void 0,r=void 0;if(c){if(c=null,t)return u.error={status:e.status,message:"HLS playlist request error at URL: "+a,responseText:e.responseText,code:2},"HAVE_NOTHING"===u.state&&(u.started=!1),u.trigger("error");if((i=new f.default.Parser).push(e.responseText),i.end(),u.state="HAVE_MASTER",i.manifest.uri=a,i.manifest.playlists){for(u.master=i.manifest,r=u.master.playlists.length;r--;)n=u.master.playlists[r],(u.master.playlists[n.uri]=n).resolvedUri=(0,h.default)(u.master.uri,n.uri);return["AUDIO","SUBTITLES"].forEach(function(t){for(var e in u.master.mediaGroups[t])for(var i in u.master.mediaGroups[t][e]){i=u.master.mediaGroups[t][e][i];i.uri&&(i.resolvedUri=(0,h.default)(u.master.uri,i.uri))}}),u.trigger("loadedplaylist"),void(c||u.media(i.manifest.playlists[0]))}return u.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:p.default.location.href,playlists:[{uri:a}]},u.master.playlists[a]=u.master.playlists[0],u.master.playlists[0].resolvedUri=a,s(e,a),u.trigger("loadedmetadata")}})}};t.prototype=new u.EventTarget,a.default=t,r.exports=a.default}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./playlist.js":10,"./resolve-url":14,"global/window":30,"m3u8-parser":31}],9:[function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t,e){var i=n(t,e);return 0===i?r.indexOf(t)-r.indexOf(e):i})}function f(t,e){var i=void 0,n=void 0;return(i=(i=t.attributes&&t.attributes.BANDWIDTH?t.attributes.BANDWIDTH:i)||window.Number.MAX_VALUE)-(n=(n=e.attributes&&e.attributes.BANDWIDTH?e.attributes.BANDWIDTH:n)||window.Number.MAX_VALUE)}var p=n(t("./config")),m=n(t("./playlist"));i.comparePlaylistBandwidth=f;function y(t,e){var i=void 0,n=void 0;return(i=(i=t.attributes&&t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width?t.attributes.RESOLUTION.width:i)||window.Number.MAX_VALUE)===(n=(n=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width?e.attributes.RESOLUTION.width:n)||window.Number.MAX_VALUE)&&t.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?t.attributes.BANDWIDTH-e.attributes.BANDWIDTH:i-n}i.comparePlaylistResolution=y;function a(t,e,i,n){var r,a,o=t.playlists.slice(),s=[],u=void 0,t=void 0,l=[],c=[],d=[];return h(o,f),o=o.filter(m.default.isEnabled),r=(s=o.filter(function(t){return t.attributes&&t.attributes.BANDWIDTH&&t.attributes.BANDWIDTH*p.default.BANDWIDTH_VARIANCE<e})).filter(function(t){return t.attributes.BANDWIDTH===s[s.length-1].attributes.BANDWIDTH})[0],h(s,y),t=s.filter(function(t){return t.attributes&&t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&t.attributes.RESOLUTION.height}),(a=(d=t.filter(function(t){return t.attributes.RESOLUTION.width===i&&t.attributes.RESOLUTION.height===n})).filter(function(t){return t.attributes.BANDWIDTH===d[d.length-1].attributes.BANDWIDTH})[0])||(l=t.filter(function(t){return t.attributes.RESOLUTION.width>i||t.attributes.RESOLUTION.height>n}),u=(c=l.filter(function(t){return t.attributes.RESOLUTION.width===l[0].attributes.RESOLUTION.width&&t.attributes.RESOLUTION.height===l[0].attributes.RESOLUTION.height})).filter(function(t){return t.attributes.BANDWIDTH===c[c.length-1].at_.el(),"width"),10),parseInt(r(this.tech_.el(),"height"),10))};i.movingAverageBandwidthSelector=function(t){var e=-1;if(t<0||1<t)throw new Error("Mo_.el(),"width"),10),parseInt(r(this.tech_.el(),"height"),10))}}},{"./config":3,"./playlist":10}],10:[function(v,t,b){!function(t){"use strict";Object.defineProperty(b,"__esModule",{value:!0});function n(t,e,i){var n;return(e=void 0turn{result:i+r.start,preceturn{result:i.end-n,precise:!0}}return{result:-1,precise:!1}}(t,e)).precise?e.result:n.result+i}function r(t,e,i){if(!t)return 0;if(void 0===e){if(t.totalDuration)return t.totalDuration;if(!t.endList)return o.default.Infinity}return n(t,e,i="number"!=typeof i?0:i)}var e,a="undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null,i=v("global/window"),o=(e=i)&&e.__esModule?e:{default:e},s={UNSAFE_LIVE_SEGMENTS:3};b.duration=r;function u(t,e,i){var n,r=0;if(i<e&&(e=(n=[i,e])[0],i=n[1]),e<0){for(var a=e;a<Math.min(0,i);a++)r+=t.targetDuration;e=0}for(a=e;a<i;a++)r+=t.segments[a].duration;return r}b.sumDurations=u;function l(t,e,i){return t&&t.segments?t.endList?r(t):null===e?null:(e=e||0,i=i?Math.max(0,t.segments.length-s.UNSAFE_LIVE_SEGMENTS):Math.max(0,t.segments.length),n(t,t.mediaSequence+i,e)):null}b.playlistEnd=l;function c(t,e){var i=e||0;return null===(e=l(t,e,!0))?(ge)(i,e)}b.seekable=c;function d(t){return t-Math.floor(t)==0}function h(t,e,i,n){var r=void 0,a=void 0,o=t.segments.length,s=e-n;if(s<0){if(0<i)for(r=i-1;0<=r;r--)if(a=t.segments[r],0<(s+=m(a.duration)))return{mediaIndex:r,startTime:n-u(t,i,r)};return{mediaIndex:0,startTime:e}}if(i<0){for(r=i;r<0;r++)if((s-=t.targetDuration)<0)return{mediaIndex:0,startTime:e};i=0}for(r=i;r<o;r++)if(a=t.segments[r],(s-=p(a.duration))<0)return{mediaIndex:r,n++){var r=Math.pow(10,n),a=e*r;if(d(a)||n===i)return(a+t)/runction y(t){retusBlacklisted=y;function g(t){var e=y(t);return!t.disabled&&!e}b.isEnabled=g;t=function(t){for(var e=0;e<t.segments.<t.segments.length;e++)if(t.segments[e].map)return!0;return!1};b.isFmp4=f,s.duration=r,s.seekable=c,s.getMediaInfoForTime_=h,s.isEnabled=g,s.isBlacklisted=y,s.playlistEnd=l,s.isAes=t,s.isFmp4=f,b.default=s}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/window":30}],11:[function(t,r,a){!function(t){"use Error("Invalid attempt to destructure non-iterable instance")};function n(t,e){var i=[],n=void 0;if(t&&t.length)for(n=0;n<t.length;n++)e(t.start(n),t.end(n))&&i.push([t.start(n),t.end(n)]);return u.default.createTimeRanges(i)}function d(t,e){var i=null,n=null,r=0,a=[],o=[];if(!(t&&t.length&&e&&e.length))return u.default.createTimeRange();for(var s=t.length;s--;)a.push({time:t.start(s),type:"start"}),a.push({time:t.end(s),type:"end"});for(s=e.length;s--;)a.push({time:e.start(ss),type:"end"});for(a.sort(function(t,e){return t.time-e.time}),s=0;s<a.length;s++)"start"===a[s].type?2===++r&&(i=a[s].time):"end"===a[s].type&&1===--r&&(n=a[s].time),null!==i&&null!==n&&(o.push([i,n]),n=i=null);return u.default.createTimeRanges(o)}var e,i="undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null,u=(e=i)&&e.__esModule?e:{default:e};a.default={findRange:function(t,i){return n(t,function(t,e){return xtRange:funt.start(i);e.push([n,r])}return u.default.createTimeRanges(e)},findSoleUncommonTimeRangesEnd:function(t,e){function i(t){return t[0]<=a&&t[1]>=a}var n=void 0,r=void 0,a=void 0,o=[],s=[];if(t)for(n=0;n<t.length;n++)r=t.start(n),a=t.end(n),s.push([r,a]);if(e)for(n=0;n<e.length;n++)r=e.start(n),a=e.end(n),s.some(i)||o.push(a);return 1!==o.length?null:o[0]},getSegmentBufferedPercent:function(t,e,i,n){var r,a=t+e,o=u.default.createTimeRanges([[t,a]]),a=u.default.createTimeRanges([[(r=t,e=(t=s(e=[i,a],2))[0],t=t[1],Math.length;c--;)l+=s.end(c)-s.start(c);return Math.max(u,l)/r*100}(a,o,i,n);return isNaN(n)th;i++)e.push(t.start(i)+" => "+t.end(i));return e.join(", ")}},r.exports=a.default}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],12:[function(t,n,r){!function(t){"use strict";Object.defineProperty(r,"__esModule",{value:,e.trigger({type:"usage",name:"hls-error-reload"}),e.play())}function s(){if(Date.now()-i<1e3*r.errorInterval)e.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(r.getSource&&"function"==typeof r.getSource)return i=Date.now(),r.getSource.call(e,o);c.default.log.error("ERROR: rele.off("e.trigger({type:"usage",name:"hls-error-reload-initialize.on("dispose",u),e.reloadSourceOnError=function(t){u(),l(e,t)}}var e,i="undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null,c=(rn t(this.tlugins:!0}).currentSource_)}};r.default=function(t){l(this,t)},n.exports=r.default}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function o(t,e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);var n,r,a=t.masterPlaylistController_.fastQualityChange_.bind(t.masterPlaylistController_);e.attributes&&((n=e.attributes).RESOLUTION&&(r=n.RESOLUTION,this.width=r.width,this.height=r.height),this.bandwidth=n.BANDWIDTH),this.id=i,this.enabled=function(t,e,i,n){var r=t.master.playlists[e],a=(0,s.isBlacklisted)(r),e=(0,s.isEnabled)(r);return void 0===n?e:(n?delete r.disabled:r.disabled=!0,n===e||a||(i(),n?t.trigger("renditionenabled"):t.trigger("renditiondisabled")),n)}.binlacklisted)(t)}).map(function(t,e){return new oref,t)),r.default.buildAbsoluteURL(t,e))},e.exports=i.default},{"global/window":30,"url-toolkit":61}],15:[function(y,g,v){!function(t){"use strict";Object.defineProperty(v,"__esModule",{value:!0});var e=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t};function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=function(t,e,i){for(var n=!0;n;){var r=t,a=e,o=i,n=!1;null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}r=Object.getPrototypeOf(r);if(null===r)return;t=r,e=a,i=o,n=!0,s=void 0}};function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e,i){return!(!t||!e)&State&&i)}function o(t){return"number"==typeof t&&isFinite(t)}var l=y("./playlist"),s=i("undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null),u=i(y("./source-updater")),c=i(y("./config")),d=i(y("global/window")),h=i(y("videojs-contrib-media-sources/es5/remove-cues-from-track.js")),f=y("./bin-utils"),p=y("./media-segment-request"),e=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__protored=0,this.mediaTransrceUpdater_&&this.sorBuffer_()):this.pendhis.pendingSegment_. 0!==t&&(this.error_=t),th:function(){this.ended_=_?this.sourceUpdater_.buffdUri:t.resolvedUri,byterange:t.bypdater_||this.mimeTADY"!==this.state&&",this.mimeType_),this.resetEverything(),this.monitorBuffer_()}},{key:"playlist",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(t){var i=this.playlist_,n=this.pendingSegment_;if(this.playlist_=t,this.xhrOptions_=e,this.hasPlayed_()||(t.syncInfo={mediaSequence:t.mediaSequence,time:0}),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();i&&i.uri===t.uri?(e=t.mediaSequence-i.mediaSequence,this.logger_("mediaSequenceDiff",e),null!==this.mediaIndex&&(this.mediaIndex-=e),n&&(n.mediaIndex-=e,0<=n.mediaIndex&&(n.segment=t.segments[n.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(i,t)):nuleout(this.checkBufferused",value:function(){"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(){this.ended_=!1,this.resetLoader(),this.remove(0,1/0)}},{key:"resetLoader",value:function(){this.fettion(){this.mediaIndeer_.remove(t,e),(0,h.default)t_=d.default.setTimeout(this.moni=d.default.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){var t;this.sourceUpdater_.updating()||(this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_())),(t=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_))&&(a(this.playlist_,this.mediaSource_,t.mediaIndex)?this.endOfStream():t.mediaIndex===this.playlist_.segments.length-1&&"ended"===this.mediaSource_.readyState&&!this.seeking_()||((t.timeline!==this.currentTimeline_||null!==t.startOfSegment&&t.startOfSegment<this.sourceUpdater_.timestampOffset())&&(this.syncController_.reset(),t.timestampOffset=t.startOfSegment),this.loadSegment_(t))))}},{key:"checkBuffer_",value:function(t,e,i,n,r,a){var o=0,s=void 0;t.length&&(o=t.end(t.length-1));t=Math.max(0,o-r);if(!e.segments.length)return null;if(t>=c.default.GOAL_BUFFER_LENGTH)return null;if(!n&&1<=t)return null;if(this.logger_("checkBuffer_","mediaIndex:",i,"hasPlayed:",n,"currentTime:",r,"syncPoint:",a,"fetchAtBuffer:",this.fetchAtBuffer_,"bufferedTime:",t),null===a)return i=this.getSyncSegmentCandidate_(e),this.logger_("getSync","mediaIndex:",i),this.generateSegmentInfo_(e,i,null,!0);if(null===i)return s=(i=(u=this.fetchAtBuffer_?(0,l.getMediaInfoForTime_)(e,o,a.segmentIndex,a.time):(0,l.getMediaInfoForTime_)(e,r,a.segmentIndex,a.time)).mediaIndex,u.startTime),this.logger_("getMediaIndexForTime","mediaIndex:",i,"startOfSegment:",s),this.generateSegmentInfo_(e,i,s,!1);this.logger_("walkForward","mediaIndex:",i+1);var u=e.segments[i],s=u&&u.end?u.end:o;return this.generateSen(i.length-1,1)].segmentIndex:Math.ffset:null,timeline:r.timeline,duration:r.duration,segment:r}}},{key:"loadSegment_",value:function(t){var i=this;this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),t.abortRequests=(0,p.mediaSegmentRequest)(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.createSimplifiedSegmentObj_(t),function(t,e){i.pendingSegment_&&e.requestId===i.pendingSegment_.requestId&&i.trigger("progress")},this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(t){var e=this.seekable_(),i=this.currentTime_(),n=0;0<(n=e.length&&0<e.start(0)&&e.start(0)<i?e.start(0):i-60)&&this.remove(0,n)}},{key:"createSimplifiedSegmentObj_",value:function(t){var e=t.segment,i={resolvedUri:e.resolvedUri,byterange:e.byterange,requestId:t.requestId};return e.key&&(t=e.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]),i.key={resolvedUri:e.key.resolvedUri,iv:t}),e.map&&(i.map=thiprocessSegmentResponse_(e)}}else this.),e.endOfAllRequests=t.endOfAllRequests,this.handleSegment_()}},{key:"handleSegment_",value:function(){var t=this;if(this.pendingSegment_){this.state="APPENDING";var e,i,n=this.pendingSegment_,r=n.segment;if(this.syncController_.probeSegmentInfo(n),n.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");null!==n.timestampOffset&&n.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(n.timestampOffset),this.trigger("timestampoffset")),r.map&&(i=(0,f.initSegmentId)(r.map),t.activeInitSegmentId_&&t.activeInitSegmentId_===i|ter_.appendBuffer(e.bytes,function(){t.activeInitSegmentId_=i}))),n.byteLength=n.bytes.byteLength,"number"==typeof r.start&&"number"==typeof r.end?this.mediaSecondsLoaded+=r.end-r.start:this.mediaSecondsLoaded+=r.duration,this.sourceUpdater_.appendBuffer(n.bytes,this.handleUpdateEnd_.bind(this))}else this.state="READY"}},{key:"handleUpdateEnd_",value:function(){if(this.logger_("handleUpdateEnd_","segmentInfo:",this.pendingSegment_),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var t=this.pendingSegment_,e=t.segment,i=null!==this.mediaIndex;this.pendingSegment_=null,this.recordThroughput_(t),this.addSegmentMetadataCue_(t),this.state="READY",this.mediaIndex=t.mediaIndex,this.fetchAtBuffer_=!0,this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate"),e.end&&this.currentTime_()-e.end>3*t.playlist.targetDuration?this.resetEverything():(i&&this.trigger("bandwidthupdate"),this.trigger("progress"),a(t.playlist,this.mediaSource_,t.mediaIndex+1)&&this.endOfStream(),this.pau/i*8*1e3);this.throughput.rate+=(i-e)/++this.throughput.count}},{key:"logger_",value:function(){}},{key:"addSegmentMetadataCue_",value:function(t){var e,i,n;this.segmentMetadataTrack_&&(e=(i=t.segment).start,n=i.end,o(e)&&o(n)&&((0,h.default)(e,n,this.segmentMetadataTrack_),i=d.default.WebKitDataCue||d.default.VTTCue,t={uri:t.uri,timeline:t.timeline,playlist:t.playlist.uri,start:e,end:n},(n=new i(e,n,JSON.stringify(t))).value=t,this.segmentMetadataTrack_.addCue(n)))}}]),m);function m(t){var e=this,i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,m),r(Object.getPrototypeOf(m.prototype),"constructor",this).call(this),!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");this.state="INIT",this.bandwidth=t.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.hasPlayed_=t.hasPlayed,this.currentTime_=t.currentTime,this.seekable_=t.seekable,this.seeking_=t.seeking,this.duration_=t.duration,this.mediaSource_=t.mediaSource,this.hls_=t.hls,this.loaderType_=t.loaderType,this.segmentMetadataTrack_=t.segmentMetadataTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.pendingSegment_=null,this.mimeType_=null,this.sourceUpdater_=null,this.xhrOptions_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.decrypter_=t.decrypter,this.syncController_=t.syncController,this.syncPoint_={segmentIndex:0,time:0},this.syncController_.on("syncinfoupdate",function(){return e.trigger("sync_.addEventListener("sourceopen",function(){return e.ended_=!1}),this.fetchAtBuffer_=!1,i.debug&&(this.logger_=s.default.log.bind(s.default,"segment-loader",this.loaderType_,"->"))}v.default=e,g.exports=v.default}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bin-utils":2,"./config":3,"./media-segment-request":6,"./playlist":10,"./source-updater":16,"global/window":30,"videojs-contrib-media-sources/es5/remove-cues-from-track.js":71}],16:[function(t,s,u){!function(t){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(u,"__esModule",{value:!0});function r(){}var e,i="undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null,a=(e=i)&&e.__esModule?e:{default:e},t=(function(t,e,i)_&&this.queueCallback_(funcqueueCallback_(functionfer_?this.sourceBuffehis.queueCallback_(funcceBuffer_||this.sourceBuffer_.tampOffset=t}),this.timestampe){this.callbacks_.push([t.(t=this.callbacks_.shien"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]),o);function o(t,e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o);function ndingCallback_;i.pendingCallback_=null,t&&t(),i.runCallback_()},i.sourceBuffer_.addEventListener("updateend",i.onUpdateendCallback_),i.runCallback_()}this.callbacks_=[],this.pendingCallback_=null,this.timestampOffset_=0,this.mediaSource=t,this.processedAppend_=!1,"closed"===t.readyState?t.addEventListener("sourceopen",n):n()}u.default=t,s.exports=u.default}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(d,t,h){!function(t){"use strict";Object.defineProperty(h,"__esModule",{value:!0});var e=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t};function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=function(t,e,i){for(var n=!0;n;){var r=t,a=e,o=i,n=!1;null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}r=Object.getPrototypeOf(r);if(null===r)return;t=r,e=a,i=o,n=!0,s=void 0}};function r(t){return t&&t.__esModule?t:{default:t}}var a=r(d("mux.js/lib/mp4/probe")),o=d("mux.js/lib/tools/ts-inspector.js"),l=d("./playlist"),s=r("undefined"!=typeof windoe,i,n,r){if(i===1/0)return nuct.getTime()/1e3+t.datetimeToDisplayTime,segmentIndex:0}:null}},{name:"Segment",run:function(t,e,i,n,r){var a=e.segments,o=null,s=null;r=r||0;for(var u=0;u<a.length;u++){var l=a[u];if(l.timeline===n&&void 0!==l.start){var c=Math.abs(r-l.start);if(null!==s&&s<c)break;(!o||null===s||c<=s)&&(s=c,o={time:l.start,segmentIndex:u})}}return o}},{name:"Discontinuity",run:function(t,e,i,n,r){var a=null;if(r=r||0,e.discontinuityStarts.length)for(var o=null,s=0;s<e.discontinuityStarts.length;s++){var u=e.discontinuityStarts[s],l=e.discontinuitySequence+s+1,c=t.discontinuities[l];if(c){l=Math.abs(r-c.time);if(null!==o&&o<l)break;(!a||null===o||l<=o)&&(o=l,a=e,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence}:null}}];h.syncPointStrategies=u;(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto_n i.length?this.selectSyncPoint_(i,{key:"time",value:n}):null}},{key:"getExpiredTime",value:function(t,e){if(!t||!t.segments)return null;e=this.runStrategies_(t,e,t.discontinuitySequence,0);if(!e.length)return null;e=this.selectSyncPoint_(e,{key:"segmentIndex",value:0});return 0<e.segmentIndex&&(e.time*=-1),Math.abs(e.time+(0,l.suthis.logger_("syncPoint found v this.logger_("syncPoint with strategy <"+r+"> chosen: ",i),i}},{key:"saveExpiredSegmentInfo",value:function(t,e){for(var i=e.mediaSequence-t.mediaSequence-1;0<=i;i--){var n=t.segments[i];if(n&&void 0!==n.start){e.syncInfo={mediaSequence:t.mediaSequence+i,time:n.start},this.logger_("playlist sync:",e.syncInfo),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(t){!this.datetimeToDisplayTime&&t.dateTimeObject&&(t=t.dateTimeObject.getTime()/1e3,this.datetimeToDisplayTime=-t)}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",value:function(t){var e=void 0;(e=t.segment.map?this.probeMp4Segment_(t):this.probeTsSegment_(t))&&this.calculateSegmentTimeMapping_(t,e)&&thistampOffset&&(t.timestampOffset-=i),{start:i,end:i+e.duration}}},{key:"probeTsSegment_",value:function(t){var e=(0,o.inspect)(t.bytes,this.inspectCache_),i=void 0,t=void 0;return e?(e.video&&2===e.video.length?(this.inspectCache_=e.video[1].dts,i=e.video[0].dtsTime,t=e.video[1].dtsTime):e.audio&&2===e.audio.length&&(this.inspectCache_=e.audio[1].dts,i=e.audio[0].dtsTime,t=e.audio[1].dtsTime),{return void 0===this.timelines[t]?null:thisrn!1;i.start=e.start+n.mapping,i.end=e.end+n.mapping}return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(t){var e=t.playlist,i=t.segment;if(i.discontinuity)this.discontinuities[i.timeline]={time:i.start,accuracy:0};else if(e.discontinuityStarts.length)for(var n=0;n<e.discontinuityStarts.length;n++){var r,a=e.discontinuityStarts[n],o=e.discontinuitySequence+n+1,s=a-t.mediaIndex,u=Math.abs(s);(!this.discontinuities[o]||this.discontinuities[o].accuracy>u)&&(r=void 0,r=s<0?i.start-(0,l.sumDurations)(e,t.mediaIndex,a):i.end+(0,l.sumDurations)(e,t.mediaIndex+1,a),this.discontinuities[o]={ts.logger_=s.default.log.bind(s.default,"sync-controller ->"))}h.default=e}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./playlist":10,"mux.js/lib/mp4/probe":55,"mux.js/lib/tools/ts-inspector.js":57}],18:[function(f,p,m){!function(t){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var e=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t};function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=function(t,e,i){for(var n=!0;n;){var r=t,a=e,o=i,n=!1;null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}r=Object.getPrototypeOf(r);if(null===r)return;t=r,e=a,i=o,n=!0ult:t}}function a(t){return String.fromCharCode.apply(null,t)}var o=r(f("./segment-loader")),s=r("undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null),u=r(f("global/window")),l=r(f("videojs-contrib-media-sources/es5/remove-cues-from-track.js")),c=f("./bin-utils"),d=new Uint8Array("\n\n".split("").map(function(t){return t.charCodeAt(0)})),e=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOfength-1].startTime;return s.default.createTimeRanges([[e,t]])}},{key:"initSegment",value:function(t){var e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(!t)return null;var i=(0,c.initSegmentId)(t),n=this.initSegments_[i];return e&&!n&&t.bytes&&(e=d.byteLength+t.bytes.byteLength,(e=new Uint8Array(e)).set(t.bytes),e.set(d,t.bytes.byteLength),this.initSegments_[i]=n={resolvedUri:t.resolvedUri,byterang){return this.playliis.state="READY",this.resetEverything(),this.monitorBuffer_()}},{key:"track",value:function(t){this.subtitlesTrack_=t,"INIT"===this.state&",value:function(t,e){(0,l,void(this.state="WAITING_ON_TIMEIndex+1,t.startOfSegment+t.duration,t.isSyncRequest);return t}},{key:"handleSegment_",value:function(){var e=this;if(this.pendingSegment_){this.state="APPENDING";var t=this.pendingSegment_,i=t.segment;if("function"!=typeof u.default.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var n=(e.state="WAITING_ON_VTTJS",e.subtitlesTrack_.tech_oading vtt.js"}),e.state="READY",e.pause(),e.trigger("error")}),{v:void 0});if("object"==typeof n)return n.v}i.requested=!0;try{this.parseVTTCues_(t)}catch(t){return this.error({message:t.message}),this.state="READY",this.pause(),this.trigger("error")}if(this.updateTimeMapping_(t,this.syncController_.timelines[t.timeline],this.playlist_),t.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");t.byteLength=t.bytesration,t.cues.forEach(function(t){e.subtitlesTracnd_()}else this.state="READY";function r(){e.handleSegment_()}}},{key:"parseVTTCues_",value:function(e){var t=void 0,i=!1;"function"==typeof u.default.TextDecoder?t=new u.default.TextDecoder("utf8"):(t=u.default.WebVTT.StringDecoder(),i=!0);t=new u.default.WebVTT.Parser(u.default,u.default.vttjs,t);e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},t.oncue=e.cues.push.bind(e.cues),t.ontimet.log.warn("Error encountered when parsing cues: "+t.message)},e.segment.map&&(n=e.segment.map.bytes,i&&(n=a(n)),t.parse(n));var n=e.bytes;i&&(n=a(n)),t.parse(n),t.flush()}},{key:"updateTimeMapping_",value:function(t,e,i){var n,r,a=t.segment;e&&(t.cues.length?(r=apping,t.cues.forEach(function(t){t.startTime+=n,t.endTime+=n}),i.syncInfo||(r=t.cues[0].startTime,e=t.cues[t.cues.length-1].startTime,i.syncInfo={mediaSequence:i.mediaSequence+t.ll(this,t,e),this.mediaSource_=null,this.subtitlesTrack_=null}m.default=e,p.exports=m.default}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bin-utils":2,"./segment-loader":15,"global/window":30,"videojs-contrib-media-sources/es5/remove-cues-from-track.js":71}],19:[function(t,i,n){!function(t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e,o="undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null,s=(e=o)&&e.__esModule?e:{default:e};n.default=function(){return function t(e,n){e=(0,o.mergeOptions)({timeout:45e3},e);var i=t.beforeRequest||s.default.Hls.xhr.beforeRequeailed with a response of: n r.abort=function(){return r.aborted=!0,a.apply(r,arguments)},r.uri=e.uri,r.requestTime=Date.now(),r}},i.exports=n.default}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],20:[function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(i,"__esModule",{value:!0});var c=function(){for(var t,e,i,n=[[[],[],[],[],[]],[[],[],[],[],[]]],r=n[0],a=n[1],o=r[4],s=a[4],u=void 0,l=void 0,c=void 0,d=[],h=[],f=void 0,p=void 0,u=0;u<256;u++)h[(d[u]=u<<1^283*(u>>7))^u]=u;for(l=c=0;!o[l];l^=t||1,c=h[c]||1)for(p=16843009*d[e=d[t=d[s[o[l]=i=(i=c^c<<1^c<<2^c<<3^c<<4)>>8^255&i^99]=l]]]^65537*e^257*t^16843008*l,f=257*d[i]^16843008*i,u=0;u<4;u++)r[u][l]=f=f<<24^f>>>8,a[u][i]=p=p<<24^p>>>8;for(u=0;u<5;u++)r[u]=r[u].slice(0),a[u]=a[u].slice(0);return n},d=null,r=(function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}(h,[{key:"decrypt",value:function(t,e,i,n,r,a){for(var o,s,u=this._key[1],l=t^u[0],c=n^u[1],d=i^u[2],h=e^u[3],f=void 0,p=u.length/4-2,m=void 0,y=4,e=this._tables[1],g=e[0],v=e[1],b=e[2],_=e[3],T=e[4],m=0;m<p;m++)f=g[l>>>24]^v[c>>16&255]^b[d>>8&255]^_[255&h]^u[y],o=g[c>>>24]^v[d>>16&255]^b[h>>8&255]^_[255&l]^u[y+1],s=g[d>>>24]^v[h>>16&255]^b[l>>8&255]^_[255&c]^u[y+2],h=g[h>>>24]^v[l>>16&255]^b[c>>8&255]^_[255&d]^u[y+3],y+=4,l=f,c=o,d=s;for(m=0;m<4;m++)r[(3&-m)+a]=T[l>>>24]<<24^T[c>>16&255]<<16^T[d>>8&255]<<8^T[255&h]^u[y++],f=l,l=c,c=d,d=h,h=f}}]),h);function h(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),d=d||c(),this._tables=[[d[0][0].slice(),d[0][1].slice(),d[0][2].slice(),d[0][3].slice(),d[0][4].slice()],[d[1][0].slice(),d[1][1].slice(),d[1][2].slice(),d[1][3].slice(),d[1][4].slice()]];var e=void 0,i=void 0,n=void 0,r=void 0,a=void 0,o=this._tables[0][4],s=this._tables[1],u=t.length,l=1;if(4!==u&&6!==u&&8!==u)throw new Error("Invalid aes key size");for(r=t.slice(0),this._key=[r,a=[]],e=u;e<4*u+28;e++)n=r[e-1],(e%u==0||8===u&&e%u==4)&&(n=o[n>>>24]<<24^o[n>>16&255]<<16^o[n>>8&255]<<8^o[255&n],e%u==0&&(n=n<<8^n>>>24^l<<24,l=l<<1^283*(l>>7))),r[e]=r[e-u]^n;for(i=0;e;i++,e--)n=r[3&i?e:e-4],a[i]=e<=4||i<4?n:s[0][o[n>>>24]]^s[1][o[n>>16&255]]^s[2][o[n>>8&255]]^s[3][o[255&n]]}i.default=r,e.exports=i.default},{}],21:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t};function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(t,e,i){for(var n=!0;n;){var r=t,a=e,o=i,n=!1;null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}r=Object.getPrototypeOf(r);if(null===r)return;t=r,e=a,i=o,n=!0,s=void 0}};var o,s=t("./stream"),u=(o=s)&&o.__esModule?o:{default:o},n=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(tut(this.processJob_.timeo(this,u.default),this.jobs=[],this.delay=1,this.timeout_=null}i.default=n,e.exports=i.default},{"./stream":24}],22:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t};function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t){return t&&t.__esModule?t:{default:t}}function o(t,e,i){for(var n,r,a,o,s=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),u=new m.default(Array.prototype.slice.call(e)),t=new Uint8Array(t.byteLength),l=new Int32Array(t.buffer),c=void 0,d=void 0,h=void 0,f=void 0,p=void 0,c=i[0],d=i[1],h=i[2],f=i[3],p=0;p<s.length;p+=4)n=y(s[p]),r=y(s[p+1]),a=y(s[p+2]),o=y(s[p+3]),u.decrypt(n,r,a,o,l,p),l[p]=y(l[p]^c),l[p+1]=y(l[p+1]^d),l[p+2]=y(l[p+2]^h),l[p+3]=y(l[p+3]^f),c=n,d=r,h=a,f=o;return t}var m=a(t("./aes")),u=a(t("./async-stream")),l=t("pkcs7"),y=function(t){return t<<24|(65280&t)<<8|(1671,n,r){return function(){var t=o(e,i,n);r.set(t,e.b));this.asyncStream_.push(function(){n(null,(0,l.unpad)(o))})}i.Decrypter=n,i.default={Decrypterypter:r.Decrypter,AsyncStream:t.default},e.exports=i.default},{"./async-stream":21,"./decrypter":22}],24:[function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(i,"__esModule",{value:!0});var r=(function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}(a,[{key:"on",value:function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)}},{key:"off",value:function(t,e){var i;return!!this.listeners[t]&&(i=this.listeners[t].indexOf(e),this.listeners[t].splice(i,1),-1<i)}},{key:"trigger",value:function(t){var e,i=void 0,n=void 0,r=void 0;if(i=this.listeners[t])if(2===arguments.length)for(r=i.length,n=0;n<r;++n)i[n].call(this,arguments[1]);else for(e=Array.prototype.slice.call(arguments,1),r=i.length,n=0;n<r;++n)i[n].apply(this,e)}},{key:"dispose",value:function(){this.listeners={}}},{key:"pipe",value:function(e){this.on("data",function(t){e.push(t)})}}]),a);function a(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this7,7,7],[e,i){"use strict";i.pad=t("./pad.js")ction(t){return t.subarray(0,t.bytined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":28}],30:[function(t,e,i){!function(t){t="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};e.exports=t}.call(this,"undefined"!=typeof global?global:"undefined"!=t{LineStream:n.default,ParseStream:r.default,Parser:t.default}},{"./line-stream":32,"./parse-stream":33,"./parser":34}],32:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t};function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a,o=t("./stream");(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(s,((a=obuffer._||Object.getPrototypeOf(s)).call(this));return t.buffer="",t}i.default=n},{"./stream":35}],33:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!e||i.length!==e);n=!0);}catch(t){r=!0,a=t}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t};function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a,s=t("./stream"),t=(a=s)&&a.__esModule?a:{default:a};function u(t){for(var e=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),i={},n=e.length,r=void 0;n--;)""!==e[n]&&((r=/([^=]*)=(.*)/.exec(e[n]).slice(1))[0]=r[0].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^\s+|\s+$/g,""),r[1]=r[1].replace(/^['"](.*)['"]$/g,"$1"),i[r[0]]=r[1]);return i}(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(l,t.default),n(l,[{key:"push",value:function(t){var e=void 0,i=void 0;if(0!==(t=t.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"")).length)if("#"===t[0])if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t))this.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return i={type:"tag",tagType:"inf"},e[1]&&(i.duration=parseFloat(e[1])),e[2]&&(i.title=e[2]),void this.trigger("data",i);if(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"targetduration"},e[1]&&(i.duration=parseInt(e[1],10)),void this.trigger("data",i);if(e=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"totalduration"},e[1]&&(i.duration=parseInt(e[1],10)),void this.trigger("data",i);if(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"version"},e[1]&&(i.version=parseInt(e[1],10)),void this.trigger("data",i);if(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",tagType:"media-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void this.trigger("data",i);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return i={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(i.number=parseInt(e[1],10)),void this.trigger("data",i);if(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return i={type:"tag",tagType:"playlist-type"},e[1]&&(i.playlistType=e[1]),void this.trigger("data",i);if(e=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))return i={type:"tag",tagType:"byterange"},e[1]&&(i.length=parseInt(e[1],10)),e[2]&&(i.offset=parseInt(e[2],10)),void this.trigger("data",i);if(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return i={type:"tag",tagType:"allow-cache"},e[1]&&(i.allowed=!/NO/.test(e[1])),void this.trigger("data",i);if(e=/^#EXT-X-MAP:?(.*)$/.exec(t)){var n,i={type:"tag",tagType:"map"};return e[1]&&((n=u(e[1])).URI&&(i.uri=n.URI),n.BYTERANGE&&(a=n.BYTERANGE.split("@"),a=(r=o(a,2))[0],r=r[1],i.byterange={},a&&(i.byterange.length=parseInt(a,10)),r&&(i.byterange.offset=parseInt(r,10)))),void this.trigger("data",i)}var r,a,e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t);if(e)return i={type:"tag",tagType:"stream-inf"},e[1]&&(i.attributes=u(e[1]),i.attributes.RESOLUTION&&(a={},(r=i.attributes.RESOLUTION.split("x"))[0]&&(a.width=parseInt(r[0],10)),r[1]&&(a.height=parseInt(r[1],10)),i.attributes.RESOLUTION=a),i.attributes.BANDWIDTH&&(i.attributes.BANDWIDTH=parseInt(i.attributes.BANDWIDTH,10)),i.attributes["PROGRAM-ID"]&&(i.attributes["PROGRAM-ID"]=parseInt(i.attributes["PROGRAM-ID"],10))),void this.trigger("data",i);if(e=/^#EXT-X-MEDIA:?(.*)$/.exec(t))return i={type:"tag",tagType:"media"},e[1]&&(i.attributes=u(e[1])),void this.trigger("data",i);if(e=/^#EXT-X-ENDLIST/.exec(t))this.trigger("data",{type:"tag",tagType:"endlist"});else{if(!(e=/^#EXT-X-DISCONTINUITY/.exec(t)))return(e=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))?(i={type:"tag",tagType:"program-date-time"},e[1]&&(i.dateTimeString=e[1],i.dateTimeObject=new Date(e[1])),void this.trigger("data",i)):(e=/^#EXT-X-KEY:?(.*)$/.exec(t))?(i={type:"tag",tagType:"key"},e[1]&&(i.attributes=u(e[1]),i.attributes.IV&&("0x"===i.attributes.IV.substring(0,2).toLowerCase()&&(i.attributes.IV=i.attributes.IV.substring(2)),i.attributes.IV=i.attributes.IV.match(/.{8}/g),i.attributes.IV[0]=parseInt(i.attributes.IV[0],16),i.attributes.IV[1]=parseInt(i.attributes.IV[1],16),i.attributes.IV[2]=parseInt(i.attributes.IV[2],16),i.attributes.IV[3]=parseInt(i.attributes.IV[3],16),i.attributes.IV=new Uint32Array(i.attributes.IV))),void this.trigger("data",i)):(e=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))?(i={type:"tag",tagType:"cue-out-cont"},e[1]?i.data=e[1]:i.data="",void this.trigger("data",i)):(e=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))?(i={type:"tag",tagType:"cue-out"},e[1]?i.data=e[1]:i.data="",void this.trigger("data",i)):(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))?(i={type:"tag",tagType:"cue-in"},e[1]?i.data=e[1]:i.data="",void this.trigger("data",i)):void this.trigger("data",{type:"tag",data:t.slice(4)});this.trigger("data",{type:"tag",tagType:"discontinuity"})}}else this.trigger("data",{type:"comment",text:t.st:e}(this,(l.__proto__||Object.getPrototypeOf(l)).call(this))}i.default=n},{"./stream":35}],34:[function(t,e,i){"use strict";Object.ject.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},n=function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t};function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=o(t("./stream")),h=o(t("./line-stream")),f=o(t("./parse-stream"));function o(t){return t&&t.__esModule?t:{default:t}}(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(p,a.default),n(p,[{key:"push",value:function(t){this.lineStream.push(t)}},{key:"end",value:function(){this.lineStream.push("\n")}}]),n=p;function p(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(p.__proto__||Object.getPrototypeOf(p)).call(this));t.lineStream=new h.default,t.parseStream=new f.default,t.lineStream.pipe(t.parseStream);var r=t,a=[],o={},s=void 0,u=void 0,l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c=0;return t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]},t.parseStream.on("data",func"defaultin,e.offseoffsegme,{message:"ignoriwarn",{message:"ignoring essage:"ignoringarn"},e.uri&&(s.ugger("warn",{messageontinuity=!0,this.ma.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.durration: "+e.duration}):this.manifest.totalDuration=e.duration},"cue-out":function(){o.cueOut=eion(){o.cueOutCont=e.data},"cue-in":funct.targetDuration),u&&(o.key=u),o.timeline=c,s&&(o.map=s),o={}},comment:function(){}})[e.type].call(r)}),t}i.default=n},{"./line-stream":32,"./parse-stream":33,"./stream":35}],35:[function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(i,"__esModule",{value:!0});var r=(function(t,eisteners[t]||(thiseners[t].indexOf(e);return this.listeners[t].splice(e,1),-1<e}},{key:"trigger",value:function(t){var e,i=this.listeners[t],n=void 0,r=void 0;if(i)if(2===arguments.length)for(r=i.length,n=0;n<r;++n)i[n].call(this,arguments[1]);else for(e=Array.prototype.slice.call(arguments,1),r=y(this,e)}},{key:"dipe",vannot call a class as a function")}(this,a),this.listeners={}}i.default=r},{}],36:[function(t,e,i){"use strict";var t=t("../utils/stream.js"),n=function(){var a=new Uint8Array,o=0;n.prototype.init.call(this),this.setTimestamp=function(t){o=t},this.parseId3TagSize=function(t,e){var i=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return(16&t[e+5])>>4?20+i:10+i},this.parseAdtsSize=function(t,e){var i=(224&t[e+5])>>5,n=t[e+4]<<3;return 6144&t[e+3]|n|i},this.push=function(t){var e,i,n=0,r=0;for(a.length?(i=a.length,(a=new Uint8Array(t.byteLength+i)).set(a.subarray(0,i)),a.set(t,i)):a=t;3<=a.length-r;)if(a[r]!=="I".charCodeAt(0)||a[r+1]!=="D".charCodeAt(0)||a[r+2]!=="3".charCodeAt(0))if(!0&a[r]&&240==(240&a[r+1])){if(a.length-r<7)break;if((n=this.parseAdtsSize(a,r))>a.length)break;e={type:"audio",data:a.subarray(r,r+n),pts:o,dts:o},this.trigger("data",e),r+=n}else r++;else{if(a.length-r<10)break;if((n=this.parseId3TagSize(a,r))>a.length)break;e={type:"timed-metadata",data:a.subarray(r,r+n)},this.trigger("data",e),r+=n}t=a.length-r,a=0<t?a.subarray(r):new Uint8Array}};n.prototype=new t,e.exports=n},{"../utils/stream.js":60}],37:[function(t,e,i){"use strict";function s(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]}var n=[96e3,88200,64e3,48e3,44100,32e3,221|t[e+7]<<14|t,e){var it(0)?"timed-meta&&240==(246&t[e+1] o*=4,o+=3&a[7]}}while(i+=10,(i+=e)<t.byteLength);return null}}},{}],38:[function(t,e,i){"use strict";var t=t("../utils/stream.js"),l=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],n=function(){var u;n.prototype.init.call(this),this.push=function(t){var e,i,n,r,a,o=0,s=0;if("audio"===t.type)for(u?(n=u,(u=new Uint8Array(n.byteLength+t.data.byteLength)).set(n),u.set(t.data,n.byteLength)):u=t.data;o+5<u.length;)if(255===u[o]&&240==(246&u[o+1])){if(e=2*(1&~u[o+1]),i=(3&u[o+3])<<11|u[o+4]<<3|(224&u[o+5])>>5,a=9e4*(r=1024*(1+(3&u[o+6])))/l[(60&u[o+2])>>>2],u.byteLength<(i=o+i))return;if(this.trigger("data",{pts:t.pts+s*a,dts:t.dts+s*a,sampleCount:r,audioobjecttype:1+(u[o+2]>>>6&3),channelcount:(1&u[o+2])<<2|(192&u[o+3])>>>6,samplerate:l[(60&u[o+2])>>>2],samplingfrequencyindex:(60&u[o+2])>>>2,samplesize:16,data:u.subarray(o+7+e,i)}),u.byteLength===i)return void(u=void 0);s++,u=u.subarray(i)}else o++},this.flush=function(){this.trigger("done")}};n.prototype=new t,e.exports=n},{"../utils/stream.js":60}],39:[function(t,e,i){"use strict";vargger("data",n.subarray(r+3)),n=null,r=0,this.trigger("done")}};l.prototype=new n,g={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(u=function(){var i(t){"video"=.nalUnitType="access_unit_delimiter_rbsp"}i.trigger("data",e)}),e.on("done",fun0;r<t;r++)i=0===(n=0!==n?(i+e.readExpGolomb()+256)%256:n)?i:n},o=function(t){for(var e=t.byteLength,i=[],n=1;n<e-2;)0===t[n]&&0===t[n+1]&&3===t[n+2]?(i.push(n+2),n+=2):n++;if(0===i.length)return t;for(var r=e-i.length,a=new Uint8Array(r),o=0,n=0;n<r;o++,n++)o===i[0]&&(o++,i.shift()),a[n]=t[o];return a},s=function(t){var e,i,n,r,a,o,s=0,u=0,l=0,c=0,d=1,h=new v(t),f=h.readUnsignedByte(),p=h.readUnsignedByte(),m=h.readUnsignedByte();if(h.skipUnsignedExpGolomb(),g[f]&&(3===(i=h.readUnsignedExpGolomb())&&h.skipBits(1),h.skipUnsignedExpGolomb(),h.skipUnsignedExpGolomb(),h.skipBits(1),h.readBoolean()))for(r=3!==i?8:12,o=0;o<r;o++)h.readBoolean()&&y(o<6?16:64,h);if(h.skipUnsignedExpGolomb(),0===(n=h.readUnsignedExpGolomb()))h.readUnsignedExpGolomb();else if(1===n)for(h.skipBits(1),h.skipExpGolomb(),h.skipExpGolomb(),e=h.readUnsignedExpGolomb(),o=0;o<e;o++)h.skipExpGolomb();if(h.skipUnsignedExpGolomb(),h.skipBits(1),t=h.readUnsignedExpGolomb(),i=h.readUnsignedExpGolomb(),0===(n=h.readBits(1))&&h.skipBits(1),h.skipBits(1),h.readBoolean()&&(s=h.readUnsignedExpGolomb(),u=h.readUnsignedExpGolomb(),l=h.readUnsignedExpGolomb(),c=h.readUnsignedExpGolomb()),h.readBoolean()&&h.readBoolean()){switch(h.readUnsignedByte()){case 1:a=[1,1];break;case 2:a=[12,11];break;case 3:a=[10,11];break;case 4:a=[16,11];break;case 5:a=[40,33];break;case 6:a=[24,11];break;case 7:a=[20,11];break;case 8:a=[32,11];break;case 9:a=[80,33];break;case 10:a=[18,11];break;case 11:a=[15,11];break;case 12:a=[64,33];break;case 13:a=[160,99];break;case 14:a=[4,3];break;case 15:a=[3,2];break;case 16:a=[2,1];break;case 255:a=[h.readUnsignedByte()<<8|h.readUnsignedByte(),h.readUnsignedByte()<<8|h.readUnsignedByte()]}a&&(d=a[0]/a[1])}return{profileIdc:f,levelIdc:m,profileCompatibility:p,width:Math.ceil((16*(t+1)-2*s-2*u)*d),height:(2-n)*(i+1)*16-2*l-2*c}}}).prototype=new n,e.exports={H264Stream:u,NalByteStream:l}},{"../utils/exp-golomb.js":59,"../utils/stream.js":60}],40:[function(t,e,i){var n,r=[33,17,191,252],o=function(t){for(var e=[];t--;)e.push(0);return e},o={96e3:[r,[227,64],o(154),[56]],88200:[r,[231],o(170),[56]],64e3:[r,[248,192],o(240),[56]],48e3:[r,[255,192],o(268),[55,148,128],o(54),[112]],44100:[r,[255,192],o(268),[55,163,128],o(84),[112]],32e3:[r,[255,192],o(268),[55,234],o(226),[112]],24e3:[r,[255,192],o(268),[55,255,128],o(268),[111,112],o(126),[224]],16e3:[r,[255,192],o(268),[55,255,128],o(268),[111,255],o(269),[223,108],o(195),[1,192]],12e3:[a,o(268),[3,127,248],o(268),[6,255,240],o(268),[13,255,224],o(268),[27,253,128],o(259),[56]],11025:[a,o(268),[3,127,248],o(268),[6,255,240],o(268),[13,255,224],o(268),[27,255,192],o(268),[55,175,128],o(108),[112]],8e3:[a,o(26nt8Array(n[e].reduce(function(t,e){return t.concat(e)},[])),t},{}))},{}],41oTrack=t.track,this.audioTags=t.tags,this.pendingTracks++)))}};n.prototype=new t,n.prototype.flush=function(t){var e,i,n,r,a={tags:{},captions:[],metadata:[]};if(this.pendingTracks<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(0===this.pendingTracks&&(this.processedTracks++,this.processedTracks<this.numberOfTracks))return}if(this.processedTracks+=this.pendingTracks,this.pendingTracks=0,!(this.processedTracks<this.numberOfTracks)){for(this.videoTrack?r=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(r=this.audioTrack.timelineStartInfo.pts),a.tags.videoTags=this.videoTags,a.tags.audioTags=this.audioTags,n=0;n<this.pendingCaptions.length;n++)(i=this.pendingCaptions[n]).startTime=i.startPts-r,i.startTime/=9e4,i.endTime=i.endPts-r,i.endTime/=9e4,a.captions.push(i);for(n=0;n<this.pendingMetadata.length;n++)(e=this.pendingMetadata[n]).cueTime=e.pts-r,e.cueTime/=9e4,a.metadata.push(e);a.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.processedTracks=0,this.trigger("data",a),this.trigger("done")}},e.exports=n},{"../utils/stream.js":60}],42:[function(t,e,i){"use strict";var o=t("./flv-tag.js");e.exports=function(t,e,i){var n,r=new Uint8Array(9),a=new DataView(r.buffer);return t=t||0,e=void 0===e||e,i=void 0===i||i,a.setUint8(0,70),a.setUint8(1,76),a.setUint8(2,86),a.setUint8(3,1),a.setUint8(4,(e?4:0)|(i?1:0)),a.setUint32(5,r.byteLength),t<=0?((n=new Uint8Array(r.byteLength+4)).set(r),n.set([0,0,0,0],r.byteLength)):((i=new o(o.METADATA_TAG)).pts=i.dts=0,i.writeMetaDataDouble("duration",t),i=i.finalize().length,(n=new Uint8Array(r.byteLength+i)).set(r),n.set(a.byteLength,i)),n}},{"./flv-tag.js":43}],43:[function(t,e,i){"use strict";var l=function(t,i){function r(t,e){(e=t.position+e)<t.bytes.byteLength||((e=new Uint8Array(2*e)).set(t.bytes.subarray(0,t.position),0),t.bytes=e,t.view=new DataView(t.bytes.buffer))}var e,n=0,a=16384,o=l.widthBytes||new Uint8Array("width".length),s=l.heightBytes||new Uint8Array("height".length),u=l.videocodecidBytes||new Uint8Array("videocodecid".length);if(!l.widthBytes){for(e=0;e<"width".length;e++)o[e]="width".charCodeAt(e);for(e=0;e<"height".length;e++)s[e]="height".charCodeAt(e);for(e=0;e<"videocodecid".length;e++)u[e]="videocodecid".charCodeAt(e);l.widthBytes=o,l.heightBytes=s,l.videocodecidBytes=u}switch(this.keyFrame=!1,t){case l.VIDEO_TAG:this.length=16,a*=6;break;case l.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case l.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw new Error("Unknown FLV tag type")}this.bytes=new Uint8Array(a),this.view=new DataView(this.bytes.buffer),this.bytes[0]=t,this.position=this.length,this.keyFrame=i,this.pts=0,this.dts=0,this.writeBytes=function(t,e,i){var n=e||0,e=n+(i=i||t.byteLength);r(this,i),this.bytes.set(t.subarray(n,e),this.position),this.position+=i,tis.position++,ths.position+=2,)},this.negIndex=,this.nalUnitSize=function(){return 0===n?0:this.length-(n+4)},this.startNalUnit=function(){if(0<n)throw new Error("Attempted to create new NAL wihout closing the old one");n=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(t){var e,i;this.length===n+4?this.length-=4:0<n&&(i=this.length-(e=n+4),this.position=n,this.view.setUint32(this.position,i),this.position=this.length,t&&t.psition+=8,this.length=Mathosition++,thisay(0,this.length),this.frameTime=l.frameTime(this.bytes),this}};l.AUDIO_TAG=8,l.VIDEO_TAG=9,l.METADATA_TAG=18,l.isAudioFrame=function(t){return l.AUDIO_TAG===t[0]},l.is==t[0]},l.isMdeoFrame(t)?on(t){var e=t[4]<<16;,Transmuxer:t("./transmuxer"),getFlvHeader:t("./flv-headeroperty(this,"length",{get:function(){return t.list.length}})}},{}],46:[function(t,e,i){"use strict";var f,p,n=t("../utils/stream.js"),s=t("./flv-tag.js"),m=t("../m2ts/m2ts.js"),y=t("../codecs/adts.js"),g=t("../codecs/h264")ime(n.writeShort(t.pps[i].length),n.writeBytes(t.pps[i]);return n},pts=Math.round(t.pts/90),t.dts=Math.round(t.dts/90),o.push(t)},this.flush=function(){var t,e,i,n=new u;if(0!==o.length){for(i=-1/0;o.length;)t=o.shift(),(r.extraData!==a||1e3<=t.pts-i)&&((e=new s(s.METADATA_TAG)).pts=t.pts,e.dts=t.dts,e.writeMetaDataDouble("audiocodecid",10),e.writeMetaDataBoolean("stereo",2===r.channelcount),e.writeMetaDataDouble("audiosamplerate",r.samplerate),e.writeMetaDataDouble("audiosamplesize",16),n.push(e.finalize()),a=r.extraData,(e=new s(s.AUDIO_TAG,!0)).pts=t.pts,e.dts=t.dts,e.view.setUint16(e.position,r.extraData),e.position+=2,e.length=Math.max(e.length,e.position),n.push(e.finalize()),i=t.pts),(e=new s(s.AUDIO_TAG)).pts=t.pts,e.dts=t.dts,e.writeBytes(t.data),n.push(e.finalize());a=null,this.trigger("data",{track:r,tags:n.list}),this.trigger("done","AudioSegmentStream")}else this.trigger("done","AudioSegmentStream")}};b.prototype=new n,(p=function(r){var a,o,i=[];p.prototype.init.call(this),this.finishFrame=function(t,e){var i,n;e&&(a&&r&&r.newMetadata&&(e.keyFrame||0===t.length)&&(i=c(a,e.dts).finalize(),n=d(r,e.dts).finalize(),i.metaDataTag=n.metaDataTag=!0,t.push(i),t.push(n),r.newMetadpts=Math.roegmentStream")}else this.trigger("done","VideoSegmentStream")}}).prototype=new n,(f=function(t){var e,i,n,r,a,o,s,u,l,c,d,h=this;f.prototype.init.call(this),t=t||{},this.metadataStream=new m.MetadataStream,t.metadataStream=this.metadataStream,e=new m.TransportPacketStream,i=new m.TransportParseStream,n=new m.ElementaryStream,r=new m.TimestampRolloverStream("video"),a=new m.TimestampRolloverStream("audio"),c=new m.TimestampRolloverStream("timed-metadata"),o=new y,s=new g,d=new v(t),e.pipe(i).pipe(n),n.pipe(r).pipe(s),n.pipe(a).pipe(o),n.pipe(c).pipe(this.metadataStread)),n&&!l&&(d.numberOfTracks++,l=new b(n),o.pipe(l).pipe(d))}}),this.push=functtion(){e.flush()},d.on("data",function(t){h.trigger("data",t)}),d.on("done",function(){h.trigger("done")})}).prototype=new n,e.exports=f},{"../codecs/adts.js":38,"../codecs/h264":39,"../m2ts/m2ts.js":48,"../utils/stream.js":60,"./coalesce-stream.js":41,"./flv-tag.js":43,"./tag-list.js":45}]ata")),this.field1_.on("done",this.trigger.bind(this,"done"))};n.prototype=new t,n.prototydSize=r,i.payload=t.subarray(e,e+r);break}e+=r,r=n=0}return i}(t.escapedRBSP)).payloadType&&(e=181!==(e=i).payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payloads:t},4&e[2+r]&&(a.ccData=e[3+r]<<8|e[4+r],o.push(a));return o}(t.pts,e)))},n.prototype.flush=function(){this.captionPackets_.length&&(this.captionPackets_.forEeturn t.pts===e.pts?t.presortIndex-e.presortIndex:t.pts-e.pts}),this.captionPackets_.forEach(this.field1_.push,this(t))}function a(){for(var t=[],e=15;e--;)t.push("");return t}var o={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608},s=function(){s.prototype.init.call(this),this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=a(),this.nonDisplayed_=a(),this.lastControlCode_=null,this.push=function(t){if(0===t.type){var e,i,n=32639&t.ccData;if(n!==this.lastControlCode_)switch(this.lastControlCode_=4096==(61440&n)?n:null,n){case 0:break;case 5152:this.mode_="popOn";break;case 5167:this.flushDisplayed(t.pts),e=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=e,this.startPts_=t.pts;break;case 5157:this.topRow_=13,this.mode_="rollUp";break;case 5158:this.topRow_=12,this.mode_="rollUp";break;case 5159:this.topRow_=11,this.mode_="rollUp";break;case 5165:this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;break;case 5153:"popOn"===this.mode_?this.nonDisplayed_[14]=this.nonDisplayed_[14].slice(0,-1):this.displayed_[14]=this.displayed_[14].slice(0,-1);break;case 5164:this.flushDisplayed(t.pts),this.displayed_=a();break;case 5166:this.nonDisplayed_=a();break;default:if(i=255&n,16<=(e=n>>>8)&&e<=23&&64<=i&&i<=127&&(16!==e||i<96)&&(e=32,i=null),(17===e||25===e)&&48<=i&&i<=63&&(e=9834,i=""),16==(240&e))return;this[this.mode_](t.pts,e=0===e?null:e,i=0===i?null:i)}else this.lastConhis.trigger("data",{startPts:this.startPts_,endPts:t,text:e})},s.prototype.popOn=function(t,e,i){var n=this.nonDisplayed_[14];n+=r(e),n+=r(i),this.nonDisplayed_[14]=n},s.prototype.rollUp=function(t,e,i){var n=this.displayed_[14];""===n&&(this.flushDisplayed(t),this.startPts_=t),n+=r(e),n+=r(i),this.displayed_[14]=n},s.prototype.shiftRowsUp_=function(){for(var t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.topRow_;t<14;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[14]=""},e.exports={CaptionStream:n,Cea608Stream:s}},{"../utils/stream":60}],48:[function(t,e,i){"use strict";var s,r,n=t("../utils/stream.js"),a=t("./caption-stream"),u=t("./stream-types"),o=t("./timestamp-rollov71===r[0]&&(this.trigger("data",r),a=0),this.trigger("done")}};c.prototype=new n,(s=function(){var n,r,a,o;s.prototype.init.call(this),tIon_number=t[8],o.pmtPid=(31&t[10])<<8|t[11],e.pmtPid=o.pmtPid},a=function(t,e){var i,n;if(1&t[5]){for(o.programMapTable={},i=3+((15&t[1])<<8|t[2])-4,n=12+((15&t[10])<<8|t[11]);n<i;)o.programMapTable[(31&t[n+1])<<8|t[n+2]]=t[n],n+=5+((15&t[n+3])<<8|t[n+4]);for(e.programMapTable=o.programMapTable;o.packetsWaitingForPmt.length;)o.processPes_.apply(o,o.packetsWaitingForPmt.shift())}},this.push=function(t){var e={},i=4;e.payloadUnitStartIndicator=!!(64&t[1]),e.pid=31&t[1],e.pid<<=8,e.pid|=t[2],1<(48&t[3])>>>4&&(i+=t[i]+1),0===e.pid?(e.type="pat",n(t.subarray(i),e),this.trigger("data",e)):e.pid===this.pmtPid?(e.type="pmt",n(t.subarray(i),e),this.trigger("data",e)):void 0===this.programMapTable?this.packetsWaitingpid],i.type="pes",i.data=t.subarray(e),this.trigger("data",i)}}).prototype=new n,s.STREAM_TYPES={h264:27,adts:15},(r=function(){function i(t,e,i){var n,r,a,o,s=new Uint8Array(t.size),u={type:e},l=0,c=0;if(t.data.length&&!(t.size<9)){for(u.trackId=t.data[0].pid,l=0;l<t.data.length;l++)n=t.data[l],s.set(n.data,c),c+=n.data.byteLength;r=s,(a=u).packetLength=6+(r[4]<<8|r[5]),a.dataAlignmentIndicator=0!=(4&r[6]),192&(o=r[7])&&(a.pts=(14&r[9])<<27|(255&r[10])<<20|(254&r[11])<<12|(255&r[12])<<5|(254&r[13])>>>3,a.pts*=4,a.pts+=(6&r[13])>>>1,a.dts=a.pts,64&o&&(a.dts=(14&r[14])<<27|(255&r[15])<<20|(254&r[16])<<12|(255&r[17])<<5|(254&r[18])>>>3,a.dts*=4,a.dts+=(6&r[18])>>>1)),a.data=r.subarray(9+r[8]),e="video"===e||u.packetLength===t.size,(i||e)&&(t.size=0,t.data.length=0),e&&d.trigger("data",u)}}var d=this,n={data:[],size:0},a={data:[],size:0},o={data:[],size:0};r.prototypIndicator&&i(t,e,!0),t.data.push(r),t.size+=r.data.byteLength},pmt:function(){var t,e,i={type:"metadata",tracks:[]},n=r.programMapTable;for(t in n)n.hasOwnProperty(t)&&((e={timelineStartInfo:{baseMediaDecodeTime:0}}).id=+t,n[t]===l.H264_STREAM_TYPE?(e.codec="avc",e.type="video"):n[t]===l.ADTS_STREAM_TYPE&&(e.codec="adts",e.type="audio"),deo"),i(a,"audio"),i(o,"timed-metadata"),this.trigger("done")}}).prototype=new n;var d,h={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:c,TransportParseStream:s,ElementaryStream:r,TimestampRolloverStream:o,CaptionStream:a.CaptionStream,Cea608Stream:a.Cea608Stream,MetadataStream:t("./metadata-stream")};for(d in u)u.hasOwnProperty(d)&&(h[d]=u[d]);e.exports=h},{"../utils/stream.js":60,"./caption-stream":47,"./metadata-stream":49,"./stream-types":51,"./stream-types.js":51,"./tit,e,i))}function h(t){return t[0]<<21|t[1]<<14|t[2]<<7a,e+1iptiobreak}t.privateData=t.data.subarray(i+1),t.data=t.privateData}},s=function(t){var e,u={debug:!(!t||!t.debug),descriptor:t&&t.descriptor},l=0,c=[],d=0;if(s.prototype.init.call(this),this.dispatchType=o.METADATA_STREAM_TYPE.toString(16),u.descriptor)for(e=0;e<u.descriptor.length;e++)this.dispatchType+=("00"+u.descriptor[e].toString(16)).slice(-2);this.push=function(t){var e,i,n,r,a,o,s;if("timed-metadata"===t.type)if(t.dataAlignmentIndicator&&(d=0,c.length=0),0===c.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)))u.debug&&console.log("Skipping unrecognized metadata packet");else if(c.push(t),d+=t.data.byteLength,1===c.length&&(l=h(t.data.subarray(6,10)),l+=10),!(d<l)){for(e={data:new Uint8Array(l),frames:[],pts:c[0].pts,dts:c[0].dts},r=0;r<l;)e.data.set(c[0].data.subarray(0,l-r),r),r+=c[0].data.byteLength,d-=c[0].data.byteLength,c.shift();i=10,64&e.data[5]&&(i+=4,i+=h(e.data.subarray(10,14)),l-=h(e.data.subarray(16,20)));do{if((n=h(e.data.subarray(i+4,i+8)))<1)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.")}while((s={id:String.fromCharCode(e.data[i],e.data[i+1],e.data[i+2],e.data[i+3]),data:e.data.subarray(i+10,i+n+10)}).key=s.id,f[s.id]&&(f[s.id](s),"com.apple.streaming.transportStreamTimestamp"===s.owner&&(o=(1&(a=s.data)[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2,o*=4,o+=3&a[7],s.timeStamp=o,void 0===e.pts&&void 0===e.dts&&(e.pts=s.timeStamp,e.dts=s.timeStamp),this.trigger("timestamp",s))),e.frames.push(s),i+=10,(i+=n)<l);this.trigger("data",e)}}};s.prototype=new a,e.exports=s},{"../utils/str 9:return"access_unit_delimiter_rbsp";default:ction(t,ee=s(t),i=[o+1])<<8|t[o+2]]=t[o],a+=5+((15&t[o+3])<<8|t[ADATA_STREAM_17])<<5|(254&t[e+18])>>>3,i.lice_layer_without_partitioning_4_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,<t&&(i=-1);4294967296<Math.abs(e-t);)t+=8589934592*i;return t}var t=t("../utils/stream"),r=functions=n(t.dts,ier("data",t))},thishis.trigger("done")},this.discontinuity=function(){e=i=void 0}};r.prototype=new t,e.exports={TimestampRream,VideoSegmentStream:t("./transmuxer").VideoSegmentStream}},{"./mp4-generator":54,"./transmuxer":56}],54:[function(t,e,i){"use strict";var o,n,r,a,s,u,l,c,d,h,f,p,m,y,g,v,b,_,T,w,E,S,k,A,O,C,R,P,x,L,I,D,M,j,N,U,F,B,G,H,V=Math.pow(2,32)-1;!function(){if(S={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(var t in S)S.hasOwnProperty(t)&&(S[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);k=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),O=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),A=new Uint8Array([0,0,0,1]),C=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),R=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),P={video:C,audio:R},I=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),L=new Uint8Array([0,0,0,0,0,0,0,0]),D=new Uint8Array([0,0,0,0,0,0,0,0]),M=D,j=new Uint8Array([0,0,0,0,0,0,0,0,0,nytexch[1S.0,n --n =[,0nd(S,new Uint8Array([0,0,0,0,0,0,0,1]),("video"===t.type?U:F)(t))},U=function(t){for(var e=t.sps||[],i=t.pps||[],n=[],r=[],a=0;a<e.length;a++)n.push((65280&e[a].byteLength)>>>8),n.push(255&e[a].byteLength),n=n.concat(Array.prototype.slice.call(e[a]));for(a=0;a<i.length;a++)r.push((65280&i[a].byteLength)>>>8),r.push(255&i[a].byteLength),r=r.concat(Array.prototype.slice.call(i[a]));return o(S.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o(S.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([e.length]).concat(n).concat([i.length]).concat(r))),o(S.btrt,00,(S{r1,th,(4278190080&e)>>>24,(16711680&e)>>>16,(65280&e)>>>8,255&e]},G=function(t,e){var i,n,r,a=t.samples||[];for(e+=20+16*a.length,i=B(a,e),r=0;r<a.length;r++)n=a[r],i=i.concat([(4278190080&n.duration)>>>24,(16711680&n.duration)>>>16,(65280&n.duration)>>>8,255&n.duration,(4278190080&n.size)>>>24,(16711680&n.size)>>>16,(65280&n.size)>>>8,255&n.size,n.flags.isLeading<<2|n.flags.dependsOn,n.flags.isDependedOn<<6|n.flags.hasRedundancy<<4|n.flags.paddingValue<<1|n.flags.isNonSyncSample,61440&n.flags.degradationPriority,15&n.flags.degradationPriority,(4278190080&n.compositionTimeOffset)>>>24,(16711680&n.compositionTimeOffset)>>>16,(65280&n.compositionTimeOffset)>>>8,255&n.compositionTimeOffset]);return o(S.trun,new Uint8Array(i))},H=function(t,e){var i,n,r,a=t.samples||[];for(e+=20+8*a.length,i=B(a,e),r=0;r<a.length;r++)n=a[r],i=i.concat([(4278190080&n.duration)>>>24,(16711680&n.duration)>>>16,(65280&n.duration)>>>8,255&n.duration,(4278190080&n.size)>>>24,(16711680&n.size)>>>16,(65280&8Array(i))},E=func)(t,e)},e.exports={ftyp:a=function(){return o(S.ftyp,k,A,k,O)},eLength+i.byteLength);return t.set(e),t.set(i,e.byteLength),t}}},{}],55:[function(t,e,i){"use strict";var o=function(t,e){var i,n,r,a=[];if(!e.length)return null;for(i=0;i<t.byteLength;)n=t[i]<<24,n|=t[i+1]<<16,n|=t[i+2]<<8,n|=t[i+3],r=s(t.subarray(i+4,i+8)),n=1<n?i+n:t.byteLength,r===e[0]&&(1===e.length?a.push(t.subarray(i+8,n)):(r=o(t.subarra1]),e+=String.fromCharCode(t[2]),e+=String.fromCharCode(t[3])};e.exports={parseType:s,timescale:function(t){return o(t,["moov","trak"]).reduce(function(t,e){var i,n,r=o(e,["tkhd"])[0];return r?(r=r[n=0===r[0]?12:20]<<24|r[1+n]<<16|r[2+n]<<8|r[3+n],(e=o(e,["mdia","mdhd"])[0])?(i=e[0],t[r]=e[n=0===i?12:20]<<24|e[1+n]<<16|e[2+n]<<8|e[3+n],t):null):null},{})},startTime:function(n,t){var t=o(t,["moof","traf"]),t=[].concat.apply([],t.map(function(i){return o(i,["tfhd"]).map(function(t){var e=t[4]<<24|t[5]<<16|t[6]<<8|t[7],t=n[e]||9e4,e=o(i,["tfdt"]).map(function(t){var e=t[0],i=t[4]<<24|t[5]<<16|t[6]<<8|t[7];return 1===e&&(i*=Math.pow(2,32),i+=t[8]<<24|t[9]<<16|t[10]<<8|t[11]),i})[0];return(e||1/0)/t})})),t=Math.min.apply(null,t);return isFinite(t)?t:0}}},{}],56:[function(t,e,i){"use strict";var s,o,u,d,h,f,n=t("../utils/stream.js"),p=t("./mp4-generator.js"),l=t("../m2ts/m2ts.js"),c=t("../codecs/adts.js"),m=t("../codecs/h264").H264Stream,y=t("../aac"),g=t("../data/silence"),v=t("../utils/clock"),b=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],_=["widdsCourr(var e=0,i=0;i<t.length;i++)e+=t[i].data.byteLength;return e},k=function(n){vation(e){d(n,e),n&&b.stDts=function(t){e=t-n.timelineStartInfo.baseMediaDecodeTime},this.setVideoBaseMediaDecodeTime=function(t){c=t},this.setAudioAppendStart=function(t){l=t},this.flush=function(){var t,e,i;0!==r.length&&(i=this.trimAdtsFramesByEarliestDts_(r),n.baseMediaDecodeTime=f(n),this.prefixWithSilence_(n,i),n.samples=this.generateSampleTable_(i),e=p.mdat(this.concatenateFrameData_(i)),r=[],t=p.moof(a,[n]),i=new Uint8Array(t.byteLength+e.byteLength),a++,i.set(t),i.set(e,t.byteLength),h(n),this.trigger("data",{track:n,boxes:i})),this.trigger("done","AudioSegmentStream")},this.prefixWithSilence_=function(t,e){var i,n,r,a,o,s=0,u=0;if(e.length&&(i=v.audioTsToVideoTs(t.baseMediaDecodeTime,t.samplerate),n=Math.ceil(9e4/(t.samplerate/1024)),l&&c&&(r=i-Math.max(l,c),u=(s=Math.floor(r/n))*n),!(s<1||45e3<u))){for(a=(a=g[t.samplerate])||e[0].data,o=0;o<s;o++)e.splice(o,0,{data:a});t.baseMediaDecodeTime-=Math.floor(v.videoTsn.minSegmentDts,t.dts),n.m=t[n],i.push({size:e.data.byteLength,duration:1024});return i},this.concatenateFrameData_=function(t){for(var e,i=0,n=new Uint8Array(S(t)),r=0;r<t.length;r++)e=t[r],n.set(e.data,i),i+=e.data.byteLength;return n}};k.prototype=new n,(s=function(o){var e,i,n=0,r=[];s.prototyrbsp"!==t.nalUnitType||i||(i=t.data,o.pps=[t.data]),r.push(t)},this.flush=function(){for(var t,e,i;r.length&&"access_unit_delimiter_rbsp"!==r[0].nalUnitType;)r.shift();if(0===r.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");e=this.groupNalsIntoFrames_(r),(i=this.groupFramesIntoGops_(e))[0][0].keyFrame||((t=this.getGopForFusion_(r[0],o))?(i.unshift(t),i.byteLength+=t.byteLength,i.nalCount+=t.nalCount,i.pts=t.pts,i.dts=t.dts,i.duration+=t.duration):i=this.extendFirstKeyFrame_(i)),d(o,i),o.samples=this.generateSampleTable_(i),e=p.mdat(this.concatenateNalData_(i)),this.gopCache_.unshift({gop:i.pop(),pps:o.pps,sps:o.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),r=[],o.baseMediaDecodeTime=f(o),this.trigger("baseMediaDecodeTime",o.baseMediaDecodeTime),this.trigger("timelineStartInfo",o.timelineStartInfo),t=p.moof(n,[o]),i=new Uint8Array(t.byteLength+e.byteLength),n++,i.set(t),i.set(e,t.byteLength),this.trigger("data",{track:o,boxes:i}),this.resetStream_(SegmentStream")},this.duration)&&i<=45e3&&(!e||i].dts=e.dts,t[0][0].pts=e.pts,t[0][0].duration+=e.duration),t},this.groupNalsIntoFrames_=function(t){for(var e,i=[],n=[],r=i.byteLength=0;r<t.length;r++)"access_unit_delimiter_rbsp"===(e=t[r]).nalUnitType?(i.length&&(i.duration=e.dts-i.dts,n.push(i)),(i=[e]).byteLength=e.data.byteLength,i.pts=e.pts,i.dts=e.dts):("slice_layer_without_partitioning_rbsp_idr"===e.nalUnitType&&(i.keyFrame=!0),i.duration=e.dts-i.dts,i.byteLength+=e.data.byteLength,i.push(e));return n.length&&(!i.duration||i.duration<=0)&&(i.duration=gth,r.nalCount+=n.nalCount,r.duration+=n.duration,r.push(n),r},this.generateSampleTable_=function(t,e){for(var i,n,r,a,o=e||0,s=[],u=0;u<t.length;u++)for(r=t[u],i=0;i<r.length;i++)a=r[i],(n=T()).dataOffset=o,n.compositionTimeOffset=a.pts-a.dts,n.duration=a.duration,n.size=4*a.length,n.size+=a.byteLength,a.keyFrame&&(n.flags.depen.byteLength),l.set(aent.maxSegmentDts,delete t.minSegmentPts,delete t.maxSegmentPts},f=function(t){var e=t.minSegmentDts-t.timelineStartInfo.dts,i=t.timelineStartInfo.baseMediaDecodeTime;return i+=e,i=Math.max(0,i)ck),void("audio"===t.track.type&&(this.audioTrack=t.track)))}}).prototype=new n,u.prototype.flush=function(t){var e,i,n,r=0,a={captions:[],metadata:[],info:{}},o=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}for(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,_.forEach(function(t){a.info[t]=this.videoTrack[t]},this)):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,b.forEach(function(t){a.info[t]=this.audioTrack[t]},this)),1===this.pendingTracks.length?a.type=this.pendingTracks[0].type:a.type="combined",this.emittedTracks+=this.pendingTracks.length,t=p.initSegment(this.pendingTracks),a.initSegment=new Uint8Array(t.byteLength),a.initSegment.set(t),a.data=new Uint8Array(this.pendingBytes),n=0;n<this.pendingBoxes.length;n++)a.data.set(this.pendingBoxes[n],r),r+=this.pendingBoxes[n].byteLength;for(n=0;n<this.pendingCaptions.length;n++)(e=this.pendingCaptions[n]).startTime=e.startPts-o,e.startTime/=9e4,e.endTime=e.endPts-o,e.endTime/=9e4,a.captions.push(e);for(n=0;n<this.pendingMetadata.length;n++)(i=this.pendingMetadata[n]).cueTime=i.pts-o,i.cueTime/=9e4,a.metadata.push(i);a.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",a),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},(o=function(t){var n,r,a=this,i=!0;o.prototype.init.call(this),this.baseMediaDecodeTime=(t=t||{}).baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var e={};(this.transmuxPipeline_=e).type="aac",e.metadataStream=new l.MetadataStream,e.aacStream=new y,e.audioTimestampRolloverStream=new l.TimestampRolloverStream("audio"),e.timedMetadataTimestampRolloverStream=new l.TimestampRolloverStream("timed-metadata"),e.adtsStream=new c,e.coalesceStream=new u(t,e.metadataStream),e.headOfPipeline=e.aacStream,e.aacStream.pipe(e.audioTimestampRolloverStream).pipe(e.adtsStream),e.aacStream.pipe(e.timedMetadataTimestampRolloverStream).pipe(e.metadata"timestamp",function(t)adtsStream.pipe(e.audioSegmentStream).pipe(e.coalesceStream))}),e.coalesceStream.on("data",this.trigger.bind(this,"data")),e.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var i={};(this.transmuxPipeline_=i).type="ts",i.metadataStream=new l.MetadataStream,i.packetStream=new l.TransportPacketStream,i.parseStream=new l.TransportParseStream,i.elementaryStream=new l.ElementaryStream,i.videoTimestampRolloverStream=new l.TimestampRolloverStream("video"),i.audioTimestampRolloverStream=new l.TimestampRolloverStream("audio"),i.timedMetadataTimestampRolloverStream=new l.TimestampRolloverStream("timed-metadata"),i.adtsStream=new c,i.h264Stream=new m,i.captionStream=new l.CaptionStream,i.coalesceStream=new u(t,i.metadataStream),i.headOfPipeline=i.packetStream,i.packetStream.pipe(i.parseStream).pipe(i.elementaryStream),i.elementaryStream.pipe(i.videoTimestampRolloverStream).pipe(i.h264Stream),i.elementaryStream.pipe(i.audioTimestampRolloverStream).pipe(i.adtsStream),i.elementaryStream.pipe(i.timedMetadataTimestampRolloverStream).pipe(i.metadataStream).pipe(i.coalesceStream),i.h264Stream.pipe(i.captionStream).pipe(i.coalesceStream),i.elementaryStream.on("data",function(t){var e;if("metadata"===t.type){for(e=t.tracks.length;e--;)n||"video"!==t.tracks[e].type?r||"audio"!==t.tracks[e].type||((r=t.tracks[e]).timelineStartInfo.baseMediaDecodeTime=a.baseMediaDecodeTime):(n=t.tracks[e]).timelineStartInfo.baseMediaDecodeTime=a.baseMediaDecodeTime;n&&!i.videoSegmentStream&&(i.coalesceStream.numberOfTracks++,i.videoSegmmelineStartInfo=t,i.audioSegmentStream.setEarliion(t){r&&i.audioSegmentStream.setVideoBaseMediaDecodeTime(t)}),i.h264Stream.pipe(i.videoSegmentStream).pipe(i.coalesceStream)),r&&!i.audioSegmentStream&&(i.coalesceStream.numberOfTracks++,i.audioSegmentStream=new k(r),i.adtsStream.pipe(i.audioSegmentStream).pipe(i.coalesceStream))}}),i.coalesceStream.on("data",this.trigger.bind(this,"data")),i.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(t){var e=this.transmuxPipeline_;this.baseMediaDecodeTime=t,r&&(r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,h(r),r.timelineStartInfo.baseMediaDecodeTime=t,e.audioTimestampRolloverStream&&e.audioTimestampRolloverStream.discontinuity()),n&&(e.videoSegmentStream&&(e.videoSegmentStream.gopCache_=[],e.videoTimestampRolloverStream.discontinuity()),n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,h(n),n.timelineStartInfo.baseMediaDecodeTime=t),e.timedMetadataTimestampRolloverStream&&e.timedMetadataTims.transmuxipeline(),ifunction(){i=!0,this.transmuxPipeline_.headOfPipeline.flush()}}).prototype=new n,e.exports={Transmuxer:o,VideoSegmentStream:s,AudioSegmentStream:k,AUDIO_PROPERTIES:b,VIDEO_PROPERTIES:_}},{"../aac":36,"../codecs/adts.js":38,"../codecs/h264":39,"../data/silence":40,"../m2ts/m2ts.js":48,"../utils/clock":58,"../utils/stream.js":60,"./mp4-generator.js":54}],57:[function(t,e,i){"use strict";var r=t("../m2ts/stream-types.js"),a=t("../m2ts/timestamp-rollover-stream.js").handleRollover,p={};p.ts=t("../m2ts/probe.js"),p.aac=t("../aac/probe.ble=p.ts.parsePmt(i))}if(e.pid&&e.table)return;n+=188,r+=188}}(t,i),i.table)if(i.table.hasOwnProperty(e))switch(i.table[e]){case r.H264_STREAM_TYPE:n.video=[],function(t,e,i){for(var n,r,a,o,s,u,l,c=0,d=188,h=!1,f={data:[],size:0};d<t.byteLength;)if(71!==t[c]||71!==t[d])c++,d++;else{if(n=t.subarray(c,d),"pes"===p.ts.parseType(n,e.pid))if(r=p.ts.parsePesType(n,e.table),a=p.ts.parsePayloadUnitStartIndicator(n),"video"===r&&(a&&!h&&(o=p.ts.parsePesTime(n))&&(o.type="video",i.video.push(o),h=!0),!i.firstKeyFrame)){if(a&&0!==f.size){for(s=new Uint8Array(f.size),u=0;f.data.length;)l=f.data.shift(),s.set(l,u),u+=l.byteLength;p.ts.videoPacketContainsKeyFrame(s)&&(i.firstKeyFrame=p.ts.parsePesTime(s),i.firstKeyFrame.type="video"),f.size=0}f.data.push(n),f.size+=n.byteLength}if(h&&i.firstKeyFrame)break;c+=188,d+=188}for(c=(d=t.byteLength)-188,h=!1;0<=c;)if(71!==t[c]||71!==t[d])c--,d--;else{if(n=t.subarray(c,d),"pes"===p.ts.parseType(n,e.pid)&&(r=p.ts.parsePesType(n,e.table),a=p.ts.parsePayloadUnitStartIndicator(n),"video"===r&&a&&(o=p.ts.parsePesTime(n))&&(o.type="video",i.video.push(o),h=!0)),h)break;c-=188,d-=188}}(t,i,n),0===n.video.length&&delete n.video;break;case r.ADTS_STREAM_TYPE:n.audio=[],function(t,e,i){for(var n,r,a,o,s=0,u=188,l=!1;u<t.byteLength;)if(71!==t[s]||71!==t[u])s++,u++;else{if(n=t.subarray(s,u),"pes"===p.ts.parseType(n,e.pid)&&(r=p.ts.parsePesType(n,e.table),a=p.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&a&&(o=p.ts.parsePesTime(n))&&(o.type="audio",i.audio.push(o),l=!0)),l)break;s+=188,u+=188}for(s=(u=t.byteLength)-188,l=!1;0<=s;)if(71!==t[s]||71!==t[u])s--,u--;else{if(n=t.subarray(s,u),"pes"===p.ts.parseType(n,e.pid)&&(r=p.ts.parsePesType(n,e.table),a=p.ts.parsePayloadUnitStartIndicator(n),"audio"===r&&a&&(o=p.ts.parsePesTime(n))&&(o.type="audio",i.audio.push(o),l=!0)),l)break;s-=188,u-=188}}(t,i,n),0===n.audio.length&&delete n.audio}return n}e.exports={inspect:function(t,e){var i,n,r=((r=t)[0]==="I".cha",dts:a,pts:a},{type:"audio",dts:a+1024*n*u,pts:a+1024*n*u}]}}:o)(t);return r&&(r.audio||r.video)?(t=e,(e=r).audio&&e.audio.length&&(void 0===(i=t)&&(i=e.audio[0].dts),e.audio.forEach(function(t){t.dts=a(t.dts,i),t.pts=a(t.pts,i),t.dtsTime=t.dts/9e4,t.ptsTime=t.pts/9e4})),e.video&&e.vids,n),t.pts=a(t.pts,n),t.dtsTime=t.dts/9e4,t.ptsTime=t.pts/9e4}),e.firstKeyFrame&&((e=e.firstKeyFrame).dts=a(e.dts,n),e.pts=a(e.pts,n),e.dtsTime=e.dts/9e4,e.ptsTime=e.dts/9e4)),r):null}}},{"../aac/probe.js":37,"../m2ts/probe.js":50,"../m2ts/stream-types.js":51,"../m2tm.i)9en t*e},a=function(t){return t/9e4},o=function(t,e){return t/e};e.exports={secondsToVideoTs:n,secondsToAuioTsToSeconds:o,areturn t/e*9e4},videoTsToAudioTs:function(t,e){reignedByte=function(){return this.readB0;e<i;++e)r[e].ation(t){e.push(t)}),this.on("done",function(t){e.flush(t)}),e},n.prototype.push=function(t){this.trigger("data",t)},n.prototype.flush=function(t){this.trigger("done",t)},e.exports=n},{}],61:[function(t,e,i){var n,s;n=this,s={buildAbsoluteURL:function(t,e){if(e=e.trim(),/^[a-z]+:/i.test(e))return e;var i=null,n=null,r=/^([^#]*)(.*)$/.exec(e);r&&(n=r[2],e=r[1]);var a=/^([^\?]*)(.*)$/.exec(e);a&&(i=a[2],e=a[1]);var o=/^([^#]*)(.*)$/.exec(t);o&&(t=o[1]);r=/^([^\?]*)(.*)$/.exec(t);r&&(t=r[1]);a=/^(([a-z]+:)?\/\/[^:\/]+(:[0-9]+)?)?(\/?.*)$/i.exec(t);if(!a)throw new Error("Error trying to parse base URL.");o=a[2]||"",r=a[1]||"",t=a[4];0!==t.indexOf("/")&&""!==r&&(t="/"+t);a=null,a=/^\/\//.test(e)?o+"//"+s.buildAbsolutePath("",e.substring(2)):/^\//.test(e)?r+"/"+s.buildAbsolutePath("",e.substring(1)):s.buildAbsolutePath(r+t,e);return i&&(a+=i),n&&(a+=n),a},buildAbsolutePath:function(t,e){for(var i,n,r="",a=t.replace(/[^\/]*$/,e.replace(/(\/|^)(?:\.?\/+)+/g,"$1")),o=0;-1<(n=a.indexOf("/../",o));o=n+i)i=/^\/(?:\.\.\/)*/.exec(a.slice(n))[0].length,r=(r+a.substring(o,n)).replace(new RegExp("(?:\\/+[^\\/]*){0,"+(i-1)/3+"}$"),"/");return r+a.substr(o)}},"object"==typeof i&&"object"==typeof e?e.exports=s:"object"==typeof i?i.URLToolkit=s:n.URLToolkit=s},{}],62:[function(r,a,o){!function(t){"use strict";function e(t){return t&&t.__esModule?on i(t){return isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}var n=e(r("global/window")),s=e("undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null);o.default={addTextTrackData:function(a,t,e){+this.timestampOffset,t.endTime+this.timestampOffset,t.text))},a),e&&(o=i(a.mediaSource_.duration),e.forEach(function(t){var n=t.cueTime+this.timestampOffset;t.frames.forEach(function(t){var e,i=new r(n,n,t.value||t.url||t.data||"");i.frame=t,i.value=t,e=i,Object.defineProperties(e.frame,{id:{get:function(){return s.default.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return s.default.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return s.default.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}}),this.metadataTrack_.addCue(i)},this)},a),a.metada[t],i=Number(r[e+1])||o;t.forEach(function(t){t.endTime=i})})}())},durationOfVideo:i},a.exports=o.default}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/window":30}],63:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function n(t,e,i){for(var n=t.remoteTextTracks()||[],r=0;r<n.length;r++){var a=n[r];a.kind===e&&a.label===i&&t.removeRion(t){n(t,"captions","cc1"),n(t,"metadata","Timed Metadata")}},{}],64:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.default={isAudioCodec:function(t){return/mp4a\.\d+.\d+/i.test(t)},parseContentType:function(t){var i={type:"",parameters:{}},,"").trim(),e=e[1),i},isVideoCodec:func)).slice(-2)+"00"+("00"+Number(i).toString(16)).slice(-2)})})}},e.exports=i.default},{}],65:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=t("./cleanup-text-tracks");i.default=function(t,e,i){e=e.player_;i.captions&&i.captions.length&&!t.inbandTextTrack_&&((0,n.removeExistingTrack)(e,"captions","cc1"),t.inbandTextTrack_=e.addRemoteTextTrack({kind:"captions",label:"cc1"},!1).track,e.tech_.trigger({type:"usage",name:"hls-608"})),i.metadata&&i.metadata.length&&!t.metadataTrack_&&((0,n.removeExistingTrack)(e,"metadata","Timed Metadata",!0),t.metadataTrack_=e.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,t.metadataTrack_.inBandMetadataTrackDispatchType=i.metadata.dispatcE_BETWEEN_CHUNKS:1,BYTES_PER_CHUNK:32768},e.exports=i.default},{}],67:[function(p,m,y){!function(t){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var e=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t};function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=function(t,e,i){for(var n=!0;n;){var r=t,a=e,o=i,n=!1;null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}r=Object.getPrototypeOf(r);if(null===r)return;t=r,e=a,i=o,n=!0,s=void 0}};function r(t){return t&&t.__esModule?t:{default:t}}var a,o=r(p("global/document")),s=r("undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null),u=r(p("./flash-source-buffer")),l=r(p("./flash-constants")),c=p("./codec-utils"),d=p("./cleanup-text-tracks"),h=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(f,s.default.EventTarget),e(f,[{key:"addSeekableRange_",value:function(){}},{key:"addSourceBuffer",value:function(t){var e=void 0;if("video/mp2t"!==(0,c.parseContentType)(t).type)throw new Error("NotSupportedError (Video.js)");return e=new u.defaulttate&&(this.readyState="ended",this.swfObj.vjs_endOfStream())}}]),f);function f(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),i(Object.getPrototypeOf(f.prototype),"constructor",this).call(this),this.sourceBuffers=[],this.readyState="closed",this.on(["sourceopen","webkitsourceopen"],function(t){e.swfObj=o.default.getElementById(t.swfId),e.player_=(0,s.default)(e.swfObj.parentNode),(var t=e.sourceBuffers.length;t--;)e.sols.on("dispose",function(){(0,d.cleanupTextTracks)(e.player_)}),e.swfObj&&e.swfObj.vjs_load()})}y.deturBuffers.length;e++)this.sourceBuffers[e].remove(t,i);return t}})}catch(t){h.prototype.duration=NaN}for(a in l.default)h[a]=l.default[a];m.exports=y.default}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./cleanup-text-tracks":63,"./codec-utils":64,"./flash-constants":66,"./flash-source-buffer":68,"global/document":29}],68:[function(v,b,_){!function(t){"use strict";Object.defineProperty(_,"__esModule",{value:!0});var e=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t};function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=function(t,e,i){for(var n=!0;n;){var r=t,a=e,o=i,n=!1;null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}r=Object.getPrototypeOf(r);if(null===r)return;t=r,e=a,i=o,n=!0on s(t){u.default.setTimeout(t,p.default.TIME_BETWEEN_CHUNKS)}var u=i(v("global/window")),a=i("undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null),o=i(v("mux.js/lib/flv")),l=i(v("./remove-cues-from-track")),c=i(v("./create-text-tracks-if-necessary")),d=v("./add-text-track-data"),h=i(v("./flash-transmuxe")),m=function(){return Math.random().toString(36).slice(2,8)},y=function(t,e){("number"!=typeof e||e<0)&&(e=0);e=Math.pow(10,e);return Math.round(t*e)/e},e=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__protoh},[t.buffer]),this.updating&&(this.updathis.trigger({type:"update"}),bind(i)),t&&(i.buffer_.push(tupdating&&(this.updating=!1,this.trigger({type:"updateend"}))}},{key:"convertTagsToData_",value:function(t){var e=0,i=this.mediaSource_.tech_,n=0,r=void 0,a=t.tags.videoTags,o=t.tags.audioTags;isNaN(this.basePtsOffset_)&&(a.length||o.length)&&(d=a[0]||{pts:1/0},l=o[0]||{pts:1/0},this.basePtsOffset_=Math.min(l.pts,d.pts)),i.seeking()&&(this.videoBufferEnd_=NaN,this.audioBufferEnd_=NaN),isNaN(this.videoBufferEnd_)?(i.buffered().length&&(n=i.buffered().end(0)-this.timestampOffset),i.seeking()&&(n=Math.max(n,i.currentTime()-this.timestampOffset)),n*=1e3,n+=this.basePtsOffset_):n=this.videoBufferEnd_+.1;var s=a.length;if(s&&a[s-1].pts>=n){for(;--s;){var u=a[s];if(!(u.pts>n)&&(u.keyFrame||u.metaDataTag))break}for(;s;){if(!a[s-1].metaDataTag)break;s--}}var l=a.slice(s),c=void 0,c=isNaN(this.audioBufferEnd_)?n:this.audioBufferEnd_+.1;for(l.length&&(c=Math.min(c,l[0].pts)),s=0;s<o.length&&!(o[s].pts>=c);)s++;var d=o.slice(s);d.length&&(this.audioBufferEnd_=d[d.length-1].pts),l.length&&(this.videoBufferEnd_=l[l.length-1].pts);var h=this.getOrderedTags_(l,d);if(0!==h.length){if(h[0].pts<n&&i.seeking()){i=i.currentTime()-(n-h[0].pts)/1e3;i<1/30&&(i=0);try{this.mediaSource_.swfObj.vjs_adjustCurrentTime(i)}catch(t){}}for(var f=0;f<h.length;f++)e+=h[f].bytes.byteLength;for(var r=new Uint8Array(e),f=0,p=0;f<h.length;f++)r.set(h[f].bytes,p),p+=h[f].bytes.byteLength;return r}}},{key:"getOrderedTags_",value:function(t,e){for(var i=void 0,n=[];t.length||e.length;)i=(!t.length||e.length&&e[0].dts<t[0].dts?e:t).shift(),n.push(i);return n}}]),g);function g(t){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,g),r(Object.getPrototypeOf(g.prototype),"constructor",this).call(this);this.chunkSize_=p.default.BYTES_PER_CHUNK,this.buffer_=[],this.bufferSize_=0,this.basePtsOffset_=NaN,this.mediaSource_=t,this.audioBufferEnd_=NaN,this.videoBufferEnd_=NaN,this.updating=!1,this.timestampOffset_=0;var i=u.default.btoa(String.fromCharCode.apply(null,Array.prototype.slice.call(o.default.getFlvHeader()))),t=this.mediaSource_.player_.id().replace(/[^a-zA-Z0-9]/g,"_");this.flashEncodedHeaderName_="vjs_flashEncodedHeader_"+t+m(),this.flashEncodedDataName_="vjs_flnction(){return delete u.default[e.flashEncodedHeaderName_],i},this.mediaSource_.swfObj.vjs_appendChunkReady(this.flashEncodedHeaderName_),this.transmuxer_=(0,f.default)(h.default),this.transmuxer_.postn(t){"data"===t.data.action&&e.receiveBuffer_(t.data.segment)},this.one("updateend",function(){e.mediaSource_.tech_.trigger("loadedmetadata")}),Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(t){"number"==typeof t&&0<=t&&(this.timestampOffset_=t,this.mediaSource_.swfObj.vjs_discontinuity(),this.basePtsOffset_=NaN,this.audioBufferEnd_=NaN,this.videoBufferEnd_=NaN,this.transmuxer_.postMessage({a[0][0],3),t[0][1]=y(t[0][1],3)),a.defaul1/0,e.metadataTrack_),(0,l.default)(0,1/0,e.inbandTextTrack_)}),this.mediaSource_.player_.tech_.hls.on("dispose",function(){e.transmuxer_.terminate()})}_.default=e,b.exports=_.default}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":62,"./create-text-tracks-if-necessary":65,"./flash-constants":66,"./flash-transmuxer-worker":69,"./remove-cues-from-track":71,"global/window":30,"mux.js/lib/flv":44,webworkify:75}],69:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t};function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t){return t&&t.__esModule?t:{default:t}}var o=a(t("globan("done",function(t){o.default.postMessage({action:"done"})})}},{key:"push",value:function(t){t=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"flush",value:function(){this.transmuxer.flush()}}]),l);function l(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l),this.options=t||{},this.init()}function c(t){t.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new u(t.data.options):(this.messageHandlers||(this.messageHandlers=new u),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}}i.default=function(t){return new c(t)},e.exports=i.default},{"global/window":30,"mux.js/lib/flv":44}],70:[function(f,p,m){!function(t){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var e=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t};function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var i=function(t,e,i){for(var n=!0;n;){var r=t,a=e,o=i,n=!1;null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}r=Object.getPrototypeOf(r);if(null===r)return;t=r,e=a,i=o,n=!0,s=void 0}};function r(t){return t&&t.__esModule?t:{default:t}}var a=r(f("global/window")),o=r(f("global/document")),s=r("undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null),u=r(f("./virtual-source-buffer")),l=f("./add-text-track-data"),c=f("./codec-utils"),d=f("./cleanup-text-tracks"),e=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)MediaSource_.duration))&&(this.nativeMediaSource_.duration=e)}},{key:"addSourceBuffer",value:function(t){var e,i=void 0,n=(0,c.parseContentType)(t);return/^(video|audio)\/mp2t$/i.test(n.type)?(e=[],n.parameters&&n.parameters.codecs&&(e=n.parametersunction(t){return(0,c.isAudioCodec)(t)||(0,c.isVideoCodec)(t)})),0===e.length&&(e=["avc1.4d400d","mp4a.40.2"]),i=new u.default(this,e),0!==this.sourceBuffers.length&&(this.sourceBuffers[0].createRealSourceBuffers_(),i.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)):i=this.nativeMediaSource_.addSourceBuffer(t),this.sourceBuffers.push(i),i}}]),h);function h(){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h),i(Object.getPrototypeOf(h.prototype),"constructor",this).call(this);var t=void 0;for(t in this.nativeMediaSource_=new a.default.MediaSource,this.nativeMediaSource_)t in h.prototype||"function"!=typeof this.nativeMediaSource_[t]||(this[t]=this.nativeMediaSource_[t].bind(this.nativeMediaSource_))ration_===1/0?this.duration_:this.nativeMediaSource_.duration},set:function(t){(this.duration_=t)!==1/0&&(this.nativeMediaSoutiveMediaSource_.duration]]):this.nativeMediaSource_.seekable}}),Object.defineProperty(this,"readyState",{get:function(){return this.nativeMediaSource_.readyState}}),Object.defineProperty(this,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}}),this.sourceBuffers=[],this.activeSourceBuffers_=[],this.updateActiveSourceBuffers_=function(){r.activeSourceBuffers_.length=0;for(var e=!1,i=!0,t=0;t<r.player_.audioTracks().length;t++){var n=r.player_.audioTracks()[t];if(n.enabled&&"main"!==n.kind){i=!(e=!0);break}}r.sourceBuffers.forEach(function(t){if(t.appendAudioInitSegment_=!0,t.videoCodec_&&t.audioCodec_)t.audioDisabled_=e;else if(t.videoCodec_&&!t.audioCodec_)t.audioDisabled_=!0,i=!1;else if(!t.videoCodec_&&t.audioCodec_&&(t.audioDisabled_=i))returceBuffers.forEach(function(t){t.appendAudioInitSegativeMediaSource_.addEventListener(t,this.trigger.bind(this))},this),this.on("sourceopen",function(t){var e=o.default.querySelector('[src="'+r.url_+'"]');e&&(r.player_=(0,s.default)(e.parentNode),r.player_.audioTracks&&r.player_.audioTracks()&&(r.player_.audioTracks().on("change",r.updateActiveSourceBuffers_),r.player_.audioTracks().on("addtrack",r.updateActiveSourceBuffers_),r.player_.audioTracks().on("removetrack",r.updateActiveSourceBuffers_)),r.player_.on(n.metadataTrack_.cues;n&&n.length&&(n[n.length-1].endTime=e)}}.forEach(function(t){t.transmuxer_&&t.transmuxer_.terminate()}),this.sourceBuffers.length=0,this.player_&&((0,d.cleanupTextTracks)(this.player_),this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&this.player_.off("mediachange",this.onPlayerMediachange_))})}m.default=e,p.exports=m.default}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":62,"./cleanup-text-tracks":63,"./codec-utils":64,"./virtual-source-buffer":74,"global/document":29,"global/window":30}],71:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.default=function(t,e,i){var n,r=void 0;if(i&&i.cues)for(r=i.cues.length;r--;)(n=i.cues[r]).startTime<=e&&n.endTime>=t&&i.removeCue(n)},e.exports=i.default},{}],72:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=function(t,e,i){return e&&r(t.prototype,e),i&&r(t,i),t};function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t){return t&&t.__esModule?t:{default:t}}var o=a(t("global/window")),s=a(t("mux.js/lib/mp4")),u=(n(l,[{key:"init",value:function(){var t;this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new s.default.Transmuxer(this.options),(t=this.transmuxer).on("data",function(t){var e=t.initSegment;t.initSegment={data:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength};e=t.data;t.data=e.buffer,o.default.postMessage({action:"data",segment:t,byteOffset:e.byteOffset,byteLength:e.byte,function(t){.on("done",function(tray(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(t)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(t){t=t.timestampOffset||0;this.transmuxer.setBaseMediaDe.transmuxer.setAudiort))}}class as a function")}(th[t.data.action]&&this.messageHandlers[t.data.action](t.data))}}i.default=function(t){return new c(t)},e.exports=i.default},{"global/window":30,"mux.js/lib/mp4":53}],73:[function(d,t,h){!function(t){"use strict";function e(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(h,"__esModule",{value:!0});var i=e(d("global/window")),n=e(d("./flash-media-source")),r=e(d("./html-media-source")),a=e("undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null),o=0,s={mode:"auto"};a.default.mediaSources={};function u(t,e){if(!(t=a.default.mediaSources[t]))throw new Error("Media Source not found (Video.js)");t.trigger({type:"sourceopen",swfId:e})}function l(){return!!i.default.MediaSource&&!!i.default.MediaSource.isTypeSupported&&i.default.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')}function c(t){if(t=a.default.mergeOptions(s,t),this.MediaSource={open:u,supportsNativeMediaSources:l},"html5"===t.mode||"auto"===t.mode&&l())return new r.default;if(a.default.getTech("Flash"))return new n.default;throw new Error("Cannot use Flash or Html5 to create a MediaSource for this video")}(h.MediaSource=c).open=u,c.supportsNativeMediaSources=l;t={createObjectURL:function(t){var e=void 0;return t instanceof r.default?(e=i.default.URL.createObjectURL(t.nativeMediaSource_),t.url_=e):t instanceof n.default?(e="blob:vjs-media-source/"+o,o++,a.default.mediaSources[e]=t,e):(e=i.default.URL.createObjectURL(t),t.url_=e)}};h.URL=t,a.default.MediaSource=c,a.default.URL=t}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./flash-media-source":67,"./html-media-source":70,"global/window":30}],74:[function(p,m,y){!function(t){"use strict";Object.defineProperty(y,"__esModule",{value:!0});var e=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t};function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=function(t,e,i){for(var n=!0;n;){var r=t,a=e,o=i,n=!1;null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}r=Object.getPrototypeOf(r);if(null===r)return;t=r,e=a,i=o,n=!0,s=void 0}};function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){var i,n=t.addSourceBuffer(e){get:function(){return n[e]},set:function(t){return n[e]=t}})}(i);return r}var u=i("undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null),o=i(p("./create-text-tracks-if-necessary")),s=i(p("./remove-cues-from-track")),l=p("./add-text-track-data"),c=i(p("webworkify")),d=i(p("./transmuxer-worker")),h=p("./codec-utils"),e=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.fault)(this,this.med{key:"done_",value:function(t){this.processPendingSegments_()}},{key:"createRealSourceBuffers_",value:function(){var n=this,r=["audio","video"];r.forEach(function(e){var t,i;n[e+"Codec_"]&&(n[e+"Buffer_"]||(i=null,n.mediaSource_[e+"Buffer_"]?(i=n.mediaSource_[e+"Buffer_"]).updating=!1:(t=e+'/mp4;codecs="'+n[e+"Codec_"]+'"',i=a(n.mediaSource_.nativeMediaSource_,t),n.mediaSource_[e+"Buffer_"]=i)"Buffer_"]||!n[t+"Buffer_"].updating)})?n.trigger(t):void 0})})))})}},{key:"appendBuffer",value:function(t){var e;this.bufferUpdating_=!0,this.audioBuffer_&&this.audioBuffer_.buffered.length&&(e=this.audioBuffer_.buffered,this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:e.end(e.length-1)})),this.transmuxer_.postMessage({action:"push",data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength},[t.buffer]),this.transmuxer_.postMessage({action:"flush"})}},{key:"remove",value:function(t,e){this.videoBuffer_&&(this.videoBuffer_.updating=!0,this.videoBuffer_.remove(t,e)),!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(t,e)),(0,s.default)(t,e,this.metadataTrack_),(0,s.default)(t,e,this.inbandTextTrack_)}},{key:"processPendinnfo),e.metadata&&(t.metadata=t.metadata.concat(e.metadata)),t},t={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]});this.videoBuffer_||this.audioBuffer_||(0===t.video.bytes&&(this.videoCodec_=null),0===t.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_()),t.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:t.audio.info}),t.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:t.video.info}),this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(t.audio.segments.unshift(t.audio.initSegment),t.audio.bytes+=t.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1),this.videoBuffer_&&(t.video.segments.unshift(t.video.initSegment),t.video.bytes+=t.video.initSegment.byteLength,this.concatAndAppendSegments_(t.video,this.videoBuffer_),(0,l.addTextTrackData)(this,t.captions,t.metadata)),!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(t.audio,this.audioBuffer_),this.pendingBuffers_.length=0,type:"APPEND_BUFFER_Eeset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}]),f);function f(t,e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,f),r(Object.getPrototypeOf(f.prototype),"constructor",this).call(this,u.default.EventTarget),this.timestampOffset_=0,this.pendingBuffers_=[],this.bufferUpdating_=!1,this.mediaSource_=t,this.codecs_=e,this.audioCodec_=null,this.videoCodec_=null,this.audioDis)(t)?i.audioCodec_=t:(0,h.isVideoCodec)(t)&&(i.videoCodec_=t)}),this.transmuxer_=(0,c.default)(d.default),this.transmuxer_.postMessage(ta.action?i.data_(t):"done"===t.data.action?i.done_(t):void 0},Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(t){"number"==typeof t&&0<=t&&(this.timestampOffset_=t,this.appendAudioInitSegment_=!0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffseturt),this.audioBuffer_&&(this.audioBuffer_.appefer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}}),Object.defineProperty(this,"buffered",{get:function(){var t=null,e=null,i=0,n=[],r=[];if(!this.videoBuffer_&&!this.audioBuffer_)return u.default.createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_)return this.videoBuffer_.buffered;if(this.audioDisabled_)return this.videoBuffer_.buffered;if(0===this.videoBuffer_.buffered.length&&0===this.audioBuffer_.buffered.length)return u.default.createTimeRange();for(var a=this.videoBuffer_.buffered,o=this.audioBuffer_.buffered,s=a.length;s--;)n.push({time:a.start(s),type:"start"}),n.push({time:a.end(s),type:"end"});for(s=o.length;s--;)n.push({time:o.start(s),type:"start"}),n.push({time:o.end(s),type:"end"});for(n.sort(function(t,e){return t.time-e.time}),s=0;s<n.length;s++)"start"===n[s].type?2===++i&&(t=n[s].time):"end"===n[s].type&&1===--i&&(e=n[s].time),null!==t&&null!==e&&(r.push([t,e]),e=t=null);return u.default.createTimeRanges(r)}})}y.default=e,m.exports=y.default}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./add-text-track-data":62,"./codec-utils":64,"./create-text-tracks-if-necessary":65,"./remove-cues-from-track":71,"./transmuxer-worker":72,webworkify:75}],75:[function(t,e,i){var l=arguments[3],c=arguments[4],d=arguments[5],h=JSON.stringify;e.exports=function(t){for(var e=Object.keys(d),i=0,n=e.length;i<n;i++){var r=e[i];if(d[r].exports===t){a=r;break}}if(!a){for(var a=Math.floor(Math.pow(16,8)*Math.random()).toString(16),o={},i=0,n=e.length;i<n;i++)o[r=e[i]]=r;c[a]=[Function(["require","module","exports"],"("+t+")(self)"),o]}var s=Math.floor(Math.pow(16,8)*Math.random()).toString(16),u={};u[a]=a,c[s]=[Function(["require"],).map(function(t){return h(t)+":["+c[t][0]+","+h(c[t][1])+"]"}).join(",")+"},{},["+h(s)+"])",s=window.URL||window.webkitURL||window.mozURL||window.msURL;return new Worker(s.createObjectURL(new Blob([u],{type:"text/javascript"})))}},{}],76:[function(k,A,t){!function(t){"use strict";var e=function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t};function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=function(t,e,i){for(var n=!0;n;){var r=t,a=e,o=i,n=!1;null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;return void 0===u?void 0:u.call(o)}r=Object.getPrototypeOf(r);if(null===r)return;t=r,e=a,i=o,n=!0,s=void 0}};function i(t){return t&&t.__esModule?t:{default:t}}var a=i(k("global/document")),o=i(k("./playlist-loader")),s=i(k("./playlist")),u=i(k("./xhr")),l=k("aes-decrypter"),c=i(k("./bin-utils")),d=k("videojs-contrib-media-sources"),h=i(k("m3u8-parser")),f=i("undefined"!=typeof window?window.videojs:void 0!==t?t.videojs:null),p=k("./master-playlist-controller"),m=i(k("./config")),y=i(k("./rendition-mixin")),g=i(k("global/window")),v=i(k("./playback-watcher")),b=i(k("./reload-source-on-error")),t=k("./playlist-selectors.js"),_={PlaylistLoader:o.default,Playlist:s.default,Decrypter:l.Decrypter,AsyncStream:l.AsyncStream,decrypt:l.decrypt,utils:c.default,STANDARD_PLAYLIST_SELECTOR:t.lastBandwidthSelector,comparePlaylistBandwidth:t.comparePlaylistBandwidth,comparePlaylistResolution:t.comparePlaylistResolution,xhr:(0,u.default)()};Object.defineProperty(_,"GOAL_BUFFER_LENGTH",{get:function(){return f.default.log.warn("using Hls.GOAL_BUFFER_LENGTH is UNSAFE be sure you know what you are doing"),m.default.GOAL_BUFFER_LENGTH},set:function(t){f.default.log.warn("using Hls.GOAL_BUFFER_LENGTH is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<=0?f.default.log.warn("value passed to Hls.GOAL_BUFFER_LENGTH must be a number and greater than 0"):m.default.GOAL_BUFFERre you know what you are doing"),m.default.BANDWIDTH_VARIANCE},set:function(t){f.default.log.warn("using Hls.BANDWIDTH_VARIANCE is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<=0?f.default.log.warn("value passed to Hls.BANDWIDTH_VARIANCE must be at.selectedIndex_=n,t.trigger({selectedIndex:n,type:"change"})}_.canPlaySource=function(){return f.default.log.warn("HLS is no longer a tech. Please (function(t){retnger a tech. Please remove it from your player's techOrder.")};var w=g.default.navigator&&g.default.navigator.userAgent||"";_.supportsAudioInfoChange_=function(){if(f.default.browser.IS_FIREFOX){var t=/Firefox\/([\d.]+)/i.exec(w);return 49<=parseInt(t[1],10)}return!0};var t=f.default.getComponent("Component"),E=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(S,t),e(S,[{key:"setOptions_",value:function(){var e=this;this.options_.withCredentials=this.options_.withCredentials||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&(this.optionction(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])}),this.bandwidth=this.options_.bandwidth}},{key:"src",value:function(t){var e=this;t&&(this.setOptions_(),this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=_,this.masterPlaylistController_=new p.MasterPlaylistController(this.options_),this.playbackWatcher_=new v.default(f.default.mergeOptions(this.options_,{seekable:function(){ret_.options_.playerId].error(e.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=(this.selectPlaylist||_.STANDARD_PLAYLIST_SELECTOR).bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:functit){this.masterPla.massterPlaylistContn thistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var t=1/(this.bandwidth||1),e=void 0,e=0<this.ault.log.error('The "systemBandwidth" property is reads(this.stats,{bandwidth:{get:function(){return e.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return e.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return e.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return e.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return e.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return e.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return e.masterPlaylistController_.media){return e.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("sourceopen",function(){e.tech_.audioTracks().addEventListener("change",e.audioTrackChange_),e.tech_.remoteTextTracks().addEventListener("change",e.textTrackChangroller_.on("selectedinitialmedia",function(){(0,y.default)(e)}),this.masterPlaylistController_.on("audioupdate",function(){e.tech_.clearTracks("Group().forEach(function(t){e.tech_.audioTracks().addtroller_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.tech_.ready(function(){return e.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(f.default.URL.createObjectURL(this.masterPlaylisn("mediachange",function(){T(i.qualityLevels_,i.playlists)}))}},{key:"activeAudioGroup_",value:function(){return this.masterPlaylistController_.activeAudioGroup()}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(t){this.masterPlaylistController_.setCurrentTime(t)}},{key:"duration",value:function(){return thie:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_.audioTracks().removeEventListener("change",this.audioTrackChange_),this.tech_.remoteTextTracks().removeEventListener("change",this.textTrackChange_),r(Object.getPrototypeOf(S.prototype),"dispose",this).call(this)}}]),S);function S(t,e,i){var n=this;if(!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,S),r(Object.getPrototypeOf(S.prototype),"constructor",this).call(this,e,i.hls),e.options_&&e.options_.playerId&&((i=(0,f.default)(e.options_.playerstead."),e.trigger({type:"usage",name:"hls-player-access"}),n}})),this.tech_=e,this.source_=t,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&(e.featuresNativeVideoTracks||e.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");this.on(a.default,["fullscreenchange","webkitech_.el())&&n.masterPlaylistCeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),this.audioTrackChange_=function(){n.masterPlaylistController_.setupAudio(),n.tech_.trigger(ange_=function(){n.masterPlaylistController_.setupSubtitles()},this.on(this.tech_,"play",this.play)}t=function i(n){return{canHandleSource:function(t){var e=f.default.mergeOptions(f.default.options,arguments.length<=1||void 0===arguments[1]?{}:arguments[1]);return(!e.hls||!e.hls.mode||e.hls.mode===n)&&i.canPlayType(t.type,e)},handleSource:function(t,e){var i=f.default.mergeOptions(f.default.options,arguments.length<=2||void 0===arguments[2]?{}:arguments[2],{hls:{mode:n}});return"flash"===n&&e.setTimeout(function(){e.trigger("loadstart")},1),e.hls=new E(t,e,i),e.hls.xhr=(0,u.default)(),e.hls.src(t.src),e.hls},canPlayType:function(t){var e=f.default.mergeOptions(f.default.options,arguments.length<=1||void 0===arguments[1]?{}:argumaudio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(t)},void 0!==f.default.MediaSource&&void 0!==f.default.URL||(f.default.MediaSource=d.MediaSource,f.default.URL=d.URL);e=f.default.getTech("Flash");d.MediaSource.supportsNativeMediaSources()&&f.default.getTech("Html5").registerSourceHandler(t("html5"),0),g.default.Uint8Array&&e&&e.registerSourceHandler(t("flash")),f.default.HlsHandler=E,f.default.HlsSourceHandler=t,f.default.Hls=_,f.default.use||f.default.registerComponent("Hls",_),f.default.m3u8=h.default,f.default.options.hls=f.default.options.hls||{},f.default.registerPlugin?f.default.registerPlugin("reloadSourceOnError",b.default):f.default.plugin("reloadSourceOnError",b.default),A.exports={Hls:_,HlsHandler:E,HlsSourceHandler:t}}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./bin-utils":2,"./config":3,"./master-playlist-controller":5,"./playback-watcher":7,"./playlist":10,"./playlist-loader":8,"./playlist-selectors.js":9,"./reload-source-on-error":12,"./rendition-mixin":13,"./xhr":19,"aes-decrypter":23,"global/document":29,"global/window":30,"m3u8-parser":31,"videojs-contrib-media-sources":73}]},{},[76])(76)}),function n(r,a,o){function s(i,t){if(!a[i]){if(!r[i]){var e="function"==typeof require&&require;if(!t&&e)return e(i,!0);if(u)return u(i,!0);e=new Error("Cannot find module '"+i+"'");throw e.code="MODULE_NOT_FOUND",e}e=a[i]={exports:{}};r[i][0].call(e.exports,function(t){var e=r[i][1][t];return s(e||t)},e,e.exports,n,r,a,o)}return a[i].exports}for(var u="function"==typeof require&&require,t=0;t<on{start:function(){r||o(0)},stop:function(){t(r),r=null,a=0}}}Object.defineProperty(i,"__esModule",{value:!0}),i.intervalometer=n,i.frameIntervalometer=function(t){return n(t,requvalometer=function(t,e){return n(t,setTimeout,clearTimeout,e)}},{}],2:[function(t,e,i){"use strict";var n,r=(n=t("poor-mans-symbol"))&&"object"==typeof n&&"defa(e[i])===Boolean(n)&&t.stopImmediate.resolve().then(function(){t.dispatchEvent(new Event(e))})}var c="object-fit"in document.head.style&&/iPhone|iPod/i.test(navigator.userAgent)&&!matchMedia("(-webkit-video-playable-inline)").matches,d}function b(t){return t.driver.currentTime>=t.video.duration}function _(){var t=this,e=t[d];t.webkitDisplayingFullscreen?t[f]():("data:"!==e.driver.src&&e.driver.src!==t.src&&(v(t,0,!0),e.driver.src=t.src),t.paused&&(e.paused=!1,t.buffered.length||t.load(),e.driver.play(),e.updater.start(),e.hasAudio||(l(t,"play"),e.video.readyState>=e.video.HAVE_ENOUGH_DATA&&l(t,"playing"))))}function T(t){var e=this[d];e.driver.pause(),e.updater.stop(),this.webkitDisplayingFullscreen&&this[p](),e.paused&&!t||(e.paused=!0,e.hasAudio||l(this,"pause"),this.ended&&(this[h]=!0,l(this,"ended")))}function w(e,t){var i,n,r=e[d]={};r.paused=!0,r.hasAudio=t,r.video=e,r.updater=a.frameIntervalometer(function(t){var e=this;e.video.readyState>=e.video.HAVE_FUTURE_DATA?(e.hasAudio||(e.driver.currentTime=e.video.currentTime+t*e.video.playbackRate/1e3,e.video.loop&&b(e)&&(e.driver.currentTime=0)),v(e.video,e.driver.currentTime)):e.video.networkState!==e.video.NETWORK_IDLE||e.video.buffered.length||e.video.load(),e.video.ended&&(delete e.video[h],e.video.pause(!0))}.bind(r)),t?r.driver=(i=e,n=new Audio,u(i,"play",n),u(i,"playing",n),u(i,"pause",n),n.crossOrigin=i.crossOrigin,n.srcddEventListener("canplay",function(){e.paused||l(e,"playing")}),r.dridata:er.paused=!0},play:function(){r.driver.paused=!1,b(r)&&v,0,!0),r.driver.src=e.src,t?r.driver.play():r.u!r.driver.buffered.length&&r.driver.load():(e.tendfullscreen",function(){r.d(100*e.currentTime|0)<0&&(r.driver.currentTime=e.currentTime)}))}function E(t,e,i){var n;void 0===e&&(e=!0),(i=void 0===i?!0:i)&&!c||t[d]||(w(t,e),i=(n=t)[d],n[f]=n.play,n[p]=n.pause,n.play=_,n.pause=T,s(n,"paused",i.driver),s(n,"muted",i.driver,!0),s(n,"playbackRate",i.driver,!0),s(n,"ended",i.driver),s(n,"loop",i.driver,!0),o(n,"seeking"),o(n,"seeked"),o(n,"timeupdate",h,!1),o(n,"ended",h,!1),t.classList.add("IIV"),!e&&t.autoplay&&t.play(),/iPhone|iPod|iPad/.test(navigator.platform)||console.warn("iphone-inline-video is not guaranteed to work in emulated environments"))}E.isWhitelisted=c,e.exports=E},{intervalometer:1,"poor-mans-symbol":3}],3:"==typeof Symbol?function(t){return"@"+(t||"@")+Math.random()}:Symbol;e.exports=n},{}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=r(t("../lib/Detector")),n=r(t("../lib/MobileBuffering")),u=r(t("../lib/Util"));function r(t){return t&&t.__esModule?t:{default:t}}i.default=function(r,a){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return{constructor:function(t,e){this.settings=e,this.width=t.el().offsetWidth,this.height=t.el().offsetHeight,this.lon=e.initLon,this.lat=e.initLat,this.phi=0,this.theta=0,this.videoType=e.videoType,this.clickToToggle=e.clickToToggle,this.mouseDown=!1,this.isUserInteracting=!1,this.renderer=new a.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),this.renderer.autoClear=!1,this.renderer.setClearColor(0,1);var i,n=o.getTech(t);this.supportVideoTexture=s.default.supportVideoTexture(),this.liveStreamOnSafari=s.default.isLiveStreamOnSafari(n),this.liveStreamOnSafari&&(this.supportVideoTexture=!1),this.supportVideoTexture?this.texture=new a.Texture(n):(this.helperCanvas=t.addChild("HelperCanvas",{video:n,width:e.helperCanvas.width||this.width,height:e.helperCanvas.height||this.height}),i=this.helperCanvas.el(),this.texture=new a.Texture(i)),n.style.visibility="hidden",this.texture.generateMipmaps=!1,this.texture.minFilter=a.LinearFilter,this.texture.maxFilter=a.LinearFilter,this.texture.format=a.RGBFormat,this.el_=this.renderer.domElement,this.el_.classList.add("vjs-video-canvas"),e.el=this.el_,r.calnction(){this.time=(new Date).getTime(),this.startAnimation()}.bind(this))},attachControlEvents:function(){this.on("mousemove",this.handleMouseMove.bind(this)),this.on("touchmove",this.handleTouchMove.bind(this)),this.on("mousedown",this.handleMouseDown.bind(this)),this.on("touchstart",this.handleTouchStart.bind(this)),this.on("mouseup",this.handleMouseUp.bind(this)),this.on("touchend",this.handleTouchEnd.bind(this)),this.settings.scrollable&&(this.on("mousewheel",this.handleMouseWheel.bind(this)),this.on("MozMousePixelScroll",this.handleMouseWheel.bind(this))),this.on("mouseenter",this.handleMouseEnter.bind(this)),this.on("mouseleave",this.handleMouseLease.bind(this)),this.on("dispose",this.handleDispose.bind(this))},handleDispose:function(t){this.off("mousemove",this.handleMouseMove.bind(this)),this.off("touchmove",this.handleTouchMove.bind(this)),this.off("mousedown",this.handleMouseDown.bind(this)),this.off("touchstart",this.handleTouchStart.bind(this)),this.off("mouseup",this.handleMouseUp.bind(this)),this.off("touchend",this.handleTouchEnd.bind(this)),this.settings.scrollable&&(this.off("mousewheel",this.handleMouseWheel.bind(this)),this.off("MozMousePixelScroll",this.handleMouseWheel.bind(this))),this.off("mouseenter",this.handleMouseEnter.bind(this)),this.off("mouseleave",this.handleMouseLease.bind(this)),this.off("dispose",this.handleDispose.bind(this)),this.stopAnimation()},startAnimation:funestAnimationId&&cancelAnimationFrame(this.requestAnimationId)},handleResize:function(){this.width=this.player().el().offsetWidth,this.height=this.player().el().offsetHeight,this.renderer.setSize(this.width,this.height)},handleMouseUp:function(t){var e;this.mouseDown=!1,this.clickToToggle&&(e=t.clientX||t.changedTouches&&t.changedTouches[0].clientX,t=t.clientY||t.changedTouches&&t.changedTouches[0].clientY,void 0!==e&&"undefined"!==t&&(e=Math.abs(e-this.onPointerDownPointerX),t=Math.abs(t-this.onPointerDownPointerY),e<.1&&t<.1&&(this.player().paused()?this.player().play():this.player().pause())))},handleMouseDown:function(t){t.preventDefault();var e=t.clientX||t.touches&&t.touches[0].clientX,t=t.clientY||t.touches&&t.touches[0].clientY;void 0!==e&&"undefined"!==t&&(this.mouseDown=!0,this.onPointerDownPointerX=e,this.onPointerDownPointerY=t,this.onPointerDownLon=this.lon,this.onPointerDownLat=this.lat)},handleTouchStart:function(t){1<t.touches.length&&(this.isUserPinch=!0,this.multiTouchDistance=u.default.getTouchouchEnd:function(t){this.isUserPinch=!1,this.handleMouseUp(t)},handleMouseMove:function(t){var e=t.clientX||t.touches&&t.touches[0].clientX,t=t.clientY||t.touches&&t.touches[0].clientY;void 0!==e&&"undefined"!==t&&(this.settings.clickAndDrag?this.mouseDown&&(this.lon=.2*(this.onPointerDownPointerX-e)+this.onPointerDownLon,this.lat=.2*(t-this.onPointerDownPointerY)+this.onPointerDownLat):(e=e-this.el_.offsetLeft,t=t-this.el_.offsetTop,this.lon=e/this.width*430-225,this.lat=t/this.height*-180+90))},handleTouchMove:function(t){(!this.isUserPinch||t.touches.length<=1)&&this.handleMouseMove(t)},handleMobileOrientation:function(t){var e,i,n,r;void 0!==t.rotationRate&&(e=t.rotationRate.alpha,i=t.rotationRate.beta,n=void 0!==t.portrait?t.portrait:window.matchMedia("(orientation: portrait)").matches,r=void 0!==t.landscape?t.landscape:window.matchMedia("(orientation: landscape)").matches,t=t.orientation||window.orientation,n?(this.lon=this.lon-i*this.settings.mobileVibrationValue,this.lat=this.lat+e*this.settings.mobileVibrationValue):r&&(this.lon=-90==(t=void 0!==t?t:-90)?this.lon+e*this.settings.mobileVibrationValue:this.lon-e*this.settings.mobileVibrationValue,this.lat=-90==t?this.lat+i*this.settings.mobileVibrationValue:this.lat-i*this.settings.mobileVibrationValue))},handleMouseWheel:function(t){t.stopPropagation(),t.preventDefault()},handleMouseEnter:function(t){this.isUserInteracting=!0},handleMouseLease:function(t){this.isUserInteracting=!1,this.mouseDown&&(this.mouseDown=!1)},animate:function(){var t;this.render_animation&&(this.requestAnimationId=requestAnimationFrame(this.animate.bind(this)),this.player().paused()||void 0!==this.texture&&(!this.isPlayOnMobile&&2<=this.player().readyState()||this.isPlayOnMobile&&this.player().hasClass("vjs-playing"))&&(30<=(t=(new Date).getTime())-this.time&&(this.texture.needsUpdate=!0,this.time=t),this.isPlayOnMobile&&(t=this.player().currentTime(),n.default.isBuffering(t)?this.player().hasClass("vjs-panorama-mobile-inline-video-buffering")||this.player().addClass("vjs-panorama-mobile-inline-video-buffering"):this.player().hasClass("vjs-panorama-mobile-inline-video-buffering")&&this.player().removeClass("vjs-panorama-mobile-inline-video-buffering"))),this.render())},render:function(){var t,e;this.isUserInteracting||(t=this.lat>this.settings.initLat?-1:1,e=this.lon>this.settings.initLon?-1:1,this.settings.backToVerticalCenter&&(this.lat=this.lat>this.settings.initLat-Math.abs(this.settings.returnStepLat)&&this.lat<this.settings.initLat+Math.abs(this.settings.returnStepLat)?this.settings.initLat:this.lat+this.settings.returnStepLat*t),this.settings.backToHorizonCenter&&(this.lon=this.lon>this.settings.initLon-Math.abs(this.settings.returnStepLon)&&this.lon<this.settings.initLon+Math.abs(this.settings.returnStepLon)?this.settings.initLon:this.lon+this.settings.returnStepLon*e)),this.lat=Math.max(this.settings.minLat,Math.min(this.settings.maxLat,this.lat)),this.lon=Math.max(this.settings.minLon,Math.min(this.settings.maxLon,this.lon)),this.phi=a.Math.degToRad(90-this.lat),this.theta=a.Math.degToRad(this.lon),this.supportVideoTexture||this.helperCanvas.update(),this.renderer.clear()},playOnMobile:function(){this.isPlayOnMobile=!0,this.settings.autoMobileOrientation&&window.addEventListener("devicemotion",this.handleMobileOrientation.bind(this))},el:function(){return this.el_}}}},{"../lib/Detector":6,"../lib/MobileBuffering":8,"../lib/Util":11}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=r(t("./BaseCanvas")),a=r(t("./Util"));function r(t){return t&&t.__esModule?t:{default:t}}i.default=function(t,T){var w=(0,n.default)(t,T,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{});return a.default.extend(w,{constructor:function(t,e){w.constructor.call(this,t,e),this.VRMode=!1,this.scene=new T.Scene,this.camera=new T.PerspectiveCamera(e.initFov,this.width/this.height,1,2e3),this.camera.target=new T.Vector3(0,0,0);t="equirectangular"===this.videoType?new T.SphereGeometry(500,60,40):new T.SphereBufferGeometry(500,60,40).toNonIndexed();if("fisheye"===this.videoType){for(var i=t.attributes.normal.array,n=t.attributes.uv.array,r=0,a=i.length/3;r<a;r++){var o=i[3*r+0],s=i[3*r+1],u=i[3*r+2],l=Math.asin(Math.sqrt(o*o+u*u)/Math.sqrt(o*o+s*s+u*u))/Math.PI;s<0&&(l=1-l);o=0==o&&0==u?0:Math.acos(o/Math.sqrt(o*o+u*u));u<0&&(o*=-1),n[2*r+0]=-.8*l*Math.cos(o)+.5,n[2*r+1]=.8*l*Math.sin(o)+.5}t.rotateX(e.rotateX),t.rotateY(e.rotateY),t.rotateZ(e.rotateZ)}else if("dual_fisheye"===this.videoType){for(var c=t.attributes.normal.array,d=t.attributes.uv.array,h=c.length/3,f=0;f<h/2;f++){var p=c[3*f+0],m=c[3*f+1],y=c[3*f+2],m=0==p&&0==y?1:Math.acos(m)/Math.sqrt(p*p+y*y)*(2/Math.PI);d[2*f+0]=p*e.dualFish.circle1.rx*m*e.dualFish.circle1.coverX+e.dualFish.circle1.x,d[2*f+1]=y*e.dualFish.circle1.ry*m*e.dualFish.circle1.coverY+e.dualFish.circle1.y}for(var g=h/2;g<h;g++){var v=c[3*g+0],b=c[3*g+1],_=c[3*g+2],b=0==v&&0==_?1:Math.acos(-b)/Math.sqrt(v*v+_*_)*(2/Math.PI);d[2*g+0]=-v*e.dualFish.circle2.rx*b*e.dualFish.circle2.coverX+e.dualFish.circle2.x,d[2*g+1]=_*e.dualFish.circle2.ry*b*e.dualFish.circle2.coverY+e.dualFish.circle2.y}t.rotateX(e.rotateX),t.rotateY(e.rotateY),t.rotateZ(e.rotateZ)}t.scale(-1,1,1),this.mesh=new T.Mesh(t,new T.MeshBasicMaterial({map:this.texture})),this.scene.add(this.mesh)},enableVR:function(){var t,e;this.VRMode=!0,"undefined"!=typeof vrHMD&&(t=vrHMD.getEyeParameters("left"),e=vrHMD.getEyeParameters("right"),this.eyeFOVL=t.recommendedFieldOfView,this.eyeFOVR=e.recommendedFieldOfView),this.cameraL=new T.PerspectiveCamera(this.camera.fov,this.width/2/this.height,1,2e3),this.cameraR=new T.PerspectiveCamera(this.camera.fov,this.width/2/this.height,1,2e3)},disableVR:function(){this.VRMode=!1,this.renderer.setViewport(0,0,this.width,this.height),this.renderer.setScissor(0,0,this.width,this.height)},handleResize:function(){w.handleResize.call(this),this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.VRMode&&(this.cameraL.aspect=this.camera.aspect/2,this.cameraR.aspect=this.camera.aspect/2,this.cameraL.updateProjectionMatrix(),this.cameraR.updateProjectionMatrix())},handleMouseWheel:function(t){w.handleMouseWheel(t),t.wheelDeltaY?this.camera.fov-=.05*t.wheelDeltaY:t.wheelDelta?this.camera.fov-=.05*t.wheelDelta:t.detail&&(this.camera.fov+=+t.detail),this.camera.fov=Math.min(this.settings.maxFov,this.camera.fov),this.camera.fov=Math.max(this.settings.minFov,this.camera.fov),this.camera.updateProjectionMatrix(),this.VRMode&&(this.cameraL.fov=this.camera.fov,this.cameraR.fov=this.camera.fov,this.cameraL.updateProjectionMatrix(),this.cameraR.updateProjectionMatrix())},handleTouchMove:function(t){var e;w.handleTouchMove.call(this,t),this.isUserPinch&&(e=a.default.getTouchesDistance(t.touches),t.wheelDeltaY=2*(e-this.multiTouchDistance),this.handleMouseWheel.call(this,t),this.multiTouchDistance=e)},render:function(){var t,e,i,n,r;w.render.call(this),this.camera.target.x=500*Math.sin(this.phi)*Math.cos(this.theta),this.camera.target.y=500*Math.cos(this.phi),this.camera.target.z=500*Math.sin(this.phi)*Math.sin(this.theta),this.camera.lookAt(this.camera.target),this.VRMode?(t=this.width/2,e=this.height,"undefined"!=typeof vrHMD?(this.cameraL.projectionMatrix=a.default.fovToProjection(this.eyeFOVL,!0,this.camera.near,this.camera.far),this.cameraR.projectionMatrix=a.default.fovToProjection(this.eyeFOVR,!0,this.camera.near,this.camera.far)):(n=this.lon+this.settings.VRGapDegree,r=this.lon-this.settings.VRGapDegree,i=T.Math.degToRad(n),n=T.Math.degToRad(r),(r=a.default.deepCopy(this.camera.target)).x=500*Math.sin(this.phi)*Math.cos(i),r.z=500*Math.sin(this.phi)*Math.sin(i),this.cameraL.lookAt(r),(r=a.default.deepCopy(this.camera.target)).x=500*Math.sin(this.phi)*Math.cos(n),r.z=500*Math.sin(this.phi)*Math.sin(n),this.cameraR.lookAt(r)),this.renderer.setViewport(0,0,t,e),this.renderer.setScissor(0,0,t,e),this.renderer.render(this.scene,this.cameraL),this.renderer.setViewport(t,0,t,e),this.renderer.setScissor(t,0,t,e),this.renderer.render(this.scene,this.cameraR)):this.renderer.render(this.scene,this.camera)}})}},{"./BaseCanvas":4,"./Util":11}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n={},r={canvas:!!(n="undegl")&&!t.getContext("experimental-webgl"))}catch(t){return!1}}(),workers:!!n.Worker,fileapi:n.File&&n.FileReader&&n.FileList&&n.Blob,Check_Version:function(){var t,e=-1;return"Microsoft Internet Explorer"==navigator.appName?(t=navigator.userAgent,null!==new RegExp("MSIE ([0-9]{1,}[\\.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(-1!==navigator.appVersion.indexOf("Trident")?e=11:(t=navigator.userAgent,null!==new RegExp("Edge/([0-9]{1,}[\\.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1)))),e},supportVideoTexture:function(){var t=this.Check_Version();return-1===t||13<=t},isLiveStreamOnSafari:function(t){var e=[].slice.call(t.querySelectorAll("source")),i=!1;t.src&&-1<t.src.indexOf(".m3u8")&&e.push({src:t.src,type:"application/x-mpegURL"});for(var n=0;n<e.length;n++){var r=e[n];if(("application/x-mpegURL"===r.type||"application/vnd.apple.mpegurl"===r.type)&&/(Safari|AppleWebKit)/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)){i=!0;break}}return i},getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",this.webgl||(t.innerHTML=(n.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.']:['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.']).join("\n")),t},addGetWebGLMessage:function(t){var e=void 0!==(t=t||{}).parent?t.parent:document.body,i=void 0!==t.id?t.id:"oldie";(t=r.getWebGLErrorMessage()).id=i,e.appendChild(t)}};i.default=r},{}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.default=function(i){var n=document.createElement("canvas");return n.className="vjs-video-helper-canvas",{constructor:function(t,e){this.videoElement=e.video,this.width=e.width,this.height=e.height,n.width=this.width,n.height=this.height,n.style.display="none",e.el=n,this.context=n.getContext("2d"),this.context.drawImage(this.videoElement,0,0,this.width,this.height),i.call(this,t,e)},getContext:function(){return this.context},update:function(){this.context.drawImage(this.videoElement,0,0,this.width,this.height)},el:function(){return n}}}},{}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.default={prev_currentTime:0,counter:0,isBuffering:function(t){return t==this.prev_currentTime?this.counter++:this.counter=0,this.prev_currentTime=t,10<this.counter&&(this.counter=10,!0)}}},{}],9:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};i.default=function(i){var n=document.createElement("div");return n.className="vjs-video-notice-label",{constructor:function(t,e){"object"==r(e.NoticeMessage)?(n=e.NoticeMessage,e.el=e.NoticeMessage):"string"==typeof e.NoticeMessage&&(n.innerHTML=e.NoticeMessage,e.el=n),i.call(this,t,e)},el:function(){return n}}}},{}],10:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=a(t("./BaseCanvas")),r=a(t("./Util"));function a(t){return t&&t.__esModule?t:{default:t}}i.default=function(t,u){var l=(0,n.default)(t,u,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{});return r.default.extend(l,{constructor:function(t,e){l.constructor.call(this,t,e),this.VRMode=!1,this.scene=new u.Scene;var i=this.width/this.height;this.cameraL=new u.PerspectiveCamera(e.initFov,i,1,2e3),this.cameraL.target=new u.Vector3(0,0,0),this.cameraR=new u.PerspectiveCamera(e.initFov,i/2,1,2e3),this.cameraR.position.set(1e3,0,0),this.cameraR.target=new u.Vector3(1e3,0,0);for(var t=new u.SphereBufferGeometry(500,60,40).toNonIndexed(),i=new u.SphereBufferGeometry(500,60,40).toNonIndexed(),n=t.attributes.uv.array,r=t.attributes.normal.array,a=0;a<r.length/3;a++)n[2*a+1]=n[2*a+1]/2;for(var o=i.attributes.uv.array,s=i.attributes.normal.array,a=0;a<s.length/3;a++)o[2*a+1]=o[2*a+1]/2+.5;t.scale(-1,1,1),i.scale(-1,1,1),this.meshL=new u.Mesh(t,new u.MeshBasicMaterial({map:this.texture})),this.meshR=new u.Mesh(i,new u.MeshBasicMaterial({map:this.texture})),this.meshR.position.set(1e3,0,0),this.scene.add(this.meshL),e.callback&&e.callback()},handleResize:function(){l.handleResize.call(this);var t=this.width/this.height;this.VRMode?(this.cameraL.aspect=t/=2,this.cameraR.aspect=t,this.cameraL.updateProjectionMatrix(),this.cameraR.updateProjectionMatrix()):(this.cameraL.aspect=t,this.cameraL.updateProjectionMatrix())},handleMouseWheel:function(t){l.handleMouseWheel(t),t.wheelDeltaY?this.cameraL.fov-=.05*t.wheelDeltaY:t.wheelDelta?this.cameraL.fov-=.05*t.wheelDelta:t.detail&&(this.cameraL.fov+=+t.detail),this.cameraL.fov=Math.min(this.settings.maxFov,this.cameraL.fov),this.cameraL.fov=Math.max(this.settings.minFov,this.cameraL.fov),this.cameraL.updateProjectionMatrix(),this.VRMode&&(this.cameraR.fov=this.cameraL.fov,this.cameraR.updateProjectionMatrix())},enableVR:function(){this.VRMode=!0,this.scene.add(this.meshR),this.handleResize()},disableVR:function(){this.VRMode=!1,this.scene.remove(this.meshR),this.handleResize()},render:function(){var t,e;l.render.call(this),this.cameraL.target.x=500*Math.sin(this.phi)*Math.cos(this.theta),this.cameraL.target.y=500*Math.cos(this.phi),this.cameraL.target.z=500*Math.sin(this.phi)*Math.sin(this.theta),this.cameraL.lookAt(this.cameraL.target),this.VRMode?(t=this.width/2,e=this.height,this.cameraR.target.x=1e3+500*Math.sin(this.phi)*Math.cos(this.theta),this.cameraR.target.y=500*Math.cos(this.phi),this.cameraR.target.z=500*Math.sin(this.phi)*Math.sin(this.theta),this.cameraR.lookAt(this.cameraR.target),this.renderer.setViewport(0,0,t,e),this.renderer.setScissor(0,0,t,e),this.renderer.render(this.scene,this.cameraL),this.renderer.setViewport(t,0,t,e),this.renderer.setScissor(t,0,t,e),this.renderer.render(this.scene,this.cameraR)):this.renderer.render(this.scene,this.cameraL)}})}},{"./BaseCanvas":4,"./Util":11}],11:[function(t,e,i){"use strict";Object.definePropeTransitionEnd"};for(tlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))?!0:e},isIos:function(){rethone:function(){return/iPhone|iPod/i.test(navigator.platform)},fovToProjection:function(t,e,i,n){var r=Math.PI/180;return function(t,e,i,n){i=void 0===i?.01:i,n=void 0===n?1e4:n;var r,a,o=(e=void 0===e||e)?-1:1,s=new THREE.Matrix4,u=s.elements,e=(r=2/(t.leftTan+t.rightTan),a=(t.leftTan-t.rightTan)*r*.5,e=2/(t.upTan+t.downTan),{scale:[r,e],offset:[a,(t.upTan-t.downTan)*e*.5]});return u[0]=e.scale[0],u[1]=0,u[2]=e.offset[0]*o,u[3]=0,u[4]=0,u[5]=e.scale[1],u[6]=-e.offset[1]*o,u[7]=0,u[8]=0,u[9]=0,u[10]=n/(i-n)*-o,u[11]=n*i/(i-n),u[12]=0,u[13]=0,u[14]=o,u[15]=0,s.transpose(),s}({upTan:Math.tan(t.upDegrees*r),downTan:Math.tan(t.downDegrees*r),leftTan:Math.tan(t.leftDegrees*r),rightTan:Math.tan(t.rightDegrees*r)},e,i,n)},extend:function(t){var e,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};for(e in t)t.hasOwnProdeepCopy:function(t){var e,i={};for(e in t)i[e]=t[e];return i},getTouchesDistance:function(t){return Math.sqrt((t[0].clientX-t[1].clientX)*(t[0].clientX-t[1].clientX)+(t[0].clientY-t[1].clientY)*(t[0].clientY-t[1].clientY))}}},{}],12:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});i.default=function(i){return{constructor:function(t,e){i.call(this,t,e)},buildCSSClass:function(){return"vjs-VR-control "+i.prototype.buildCSSClass.call(this)},handleClick:function(){var t=this.player().getChild("Canvas");t.VRMode?t.disableVR():t.enableVR(),t.VRMode?this.addClass("enable"):this.removeClass("enable"),t.VRMode?this.player().trigger("VRModeOn"):this.player().trigger("VRModeOff")},controlText_:"VR"}}},{}],13:[function(o,t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(o("./lib/Util")),u=i(o("./lib/Detector"));function i(t){return t&&t.__esModule?t:{default:t}}var l="undefined"!=typeof window&&s.default.mobileAndTabletcheck(),r={clickAndDrag:l,showNotice:!0,NoticeMessage:"Please use your mouse drag and drop the video.",autoHideNotice:3e3,scrollable:!0,initFov:75,maxFov:105,minFov:51,initLat:0,initLon:-180,returnStepLat:.5,returnStepLon:2,backToVerticalCenter:!l,backToHorizonCenter:!l,clickToToggle:!1,minLat:-85,maxLat:85,minLon:-1/0,maxLon:1/0,videoType:"equirectangular",rotateX:0,rotateY:0,rotateZ:0,autoMobileOrientation:!1,mobileVibrationValue:l&&s.default.isIos()?.022:1,VREnable:!0,VRGapDegree:2.5,closePanorama:!1,helperCanvas:{},dualFish:{width:1920,height:1080,circle1:{x:.240625,y:.553704,rx:.23333,ry:.43148,coverX:.913,coverY:.9},circle2:{x:.757292,y:.553704,rx:.232292,ry:.4296296,coverX:.913,coverY:.9308}}};function c(e,t){var i,n,r=(n=(i=e).getChild("Canvas"),function(){i.el().style.width=window.innerWidth+"px",i.el().style.height=window.innerHeight+"px",n.handleResize()});e.controlBar.fullscreenToggle.off("tap",t),e.controlBar.fullscreenToggle.on("tap",function(){var t=e.getChild("Canvas");e.isFullscreen()?(e.isFullscreen(!1),e.exitFullWindow(),e.el().style.width="",e.el().style.height="",t.handleResize(),window.removeEventListener("devicemotion",r)):(e.isFullscreen(!0),e.enterFullWindow(),r(),window.addEventListener("devicemotion",r))})}var d=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{NoticeMessage:""},i=t.addChild("Notice",e);0<e.autoHideNotice&&setTimeout(function(){i.addClass("vjs-video-notice-fadeOut");function t(){i.hide(),i.removeClass("vjs-video-notice-fadeOut"),i.off(e,t)}var e=s.default.whichTransitionEvent();i.on(e,t)},e.autoHideNotice)};e.default=function(){function t(t){var e=this;i.mergeOption&&(t=i.mergeOption(r,t)),void 0!==i._init&&"function"==typeof i._init?(-1==n.indexOf(t.videoType)&&(t.videoType=r.videoType),i._init(t),this.ready(function(){!function(t,e,i){if(t.addClass("vjs-panorama"),!u.default.webgl)return d(t,{NoticeMessage:u.default.getWebGLErrorMessage(),autoHideNotice:e.autoHideNotice}),e.callback&&e.callback();t.addChild("Canvas",s.default.deepCopy(e));var n,r,a=t.getChild("Canvas");l&&(n=i.getTech(t),s.default.isRealIphone()&&(r=o("iphone-inline-video"),n.setAttribute("playsinline",""),r(n,!0)),s.default.isIos()&&c(t,i.getFullscreenToggleClickFn(t)),t.addClass("vjs-panorama-mobile-inline-video"),t.removeClass("vjs-using-nawNotice&&t.on("playing",function(){d(t,s.default.deepCopy(e))}),e.VREnable&&t.controlBar.addChild("VRButton",{},t.controlBar.children().length-1),a.hide(),t.on("play",function(){a.show()}),t.on("fullscreenchange",function(){a.handleResize()}),e.callback&&e.callback()}(e,t,i)})):console.error("plugin must implement init function().")}var i=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=["equirectangular","fisheye","3dVideo","dual_fisheye"];return t.VERSION="0.1.7",t}},{"./lib/Detector":6,"./lib/Util":11,"iphone-inline-video":2}],14:[function(t,e,i){"use strict";var n=u(t("./lib/Canvas")),r=u(t("./lib/ThreeCanvas")),a=u(t("./lib/Notice")),o=u(t("./lib/HelperCanvas")),s=u(t("./lib/VRButton")),t=u(t("./plugin"));function u(t){return t&&t.__esModule?t:{default:t}}function l(t){return t.tech({IWillNotUseThisInPlugins:!0}).el()}var c=videojs.getComponent("Component"),a=(0,a.default)(c);videojs.registerComponent("Notice",videojs.extend(c,a));o=(0,o.default)(c);videojs.registerComponent("HelperCanvas",videojs.extend(c,o));o=videojs.getComponent("Button"),s=(0,s.default)(o);videojs.registerComponent("VRButton",videojs.extend(o,s)),videojs.plugin("panorama",(0,t.default)({_init:function(t){t=("3dVideo"!==t.videoType?(0,n.default):(0,r.default))(c,window.THREE,{getTech:l});videoj)},mergeOption:function(t,e){return v:function(t){return t.controlBar.fullscreenToggle.handleClick}}))},{"./lib/Canvas":5,"./lib/HelperCanvas":7,"./lib/Notice":9,"./lib/ThreeCanvas":10,"./lib/VRButton":12,"./plugin":13}]},{},[14]);var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.owns=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"f,e,i){t!=Array.proindow!==t)&&"undefined"!=typeof global&&null!=global?glomp.defineProperty(i,t,{configurable:!0,writable:!0,valu];if(n)for(var r in n)$jscomp.owns(n,r)&&(t[r]=n[r])}return t}},"es6","e$jscomp.global.;return function(t){return $jscomp.SYMBOL_PREFIX+(t||"")+e++}}(),$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var t=(t=$jscomp.global.Symbol.iterator)||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[t]&&$jscomp.definitable:!0,value:function(){return $jscomp.arrayIterator(this)}}),nction(){return e<t.lengtht})[$jscomp.global.Sy[Symbol.iterator];return e?e.call(t):$jscomp.arrayIterator(t)},$jscomp.FORCE_POLYFILL_PROMISE=!1,$jscomction o(i){return i instanceof s?i:new s(function(t,e){t(i)})}if(t&&!$jscomp.FORCE_POLYFILL_PROMISE)return t;e.prototype.asyncExecute=function(t){return null==this.batch_&&(this.batch_=[],this.asyncExecuteBatcthis;this.asyncExecuteFunction(function(){t.executeBatch_()})};var i=$jscomp.global.setTimeout;e.prototype.asyn t[e];try{i()}catch(t){teAndReject_();try{t(e.resolve,e.rej=!1;return{resolve:t(thault:e=!1}e?this.resolveToNonPromisen"==typeof e?this.settleSameAsThenable_(e,t):this.fulfill_(t)},s.prototytle_(2,t)},s.prototyhis.state_=t,this.result_=e,this.executngth;++e)t[e].call(),t[e]=null;this.onSettledCallbacateResolveAndReject_();t.callWhenSect_();try{t.call(t,e){n=t,r=e});re),a},s.prototype.catch=functi:this.onSettledCallbaolve=o,.next();!n.done;n=i.next())o(n.value).callWhenSettled_(t,e)})},s.all=function(t){var e=$jscomp.makeIterator(t),a=e.next();return a.done?o([]):new s(function(i,t){fnSettled_(function(e){return function(t){n[e]=t,0==--r&&ction"==typeof de(t){return Object.assign({muted:!1,timeout:250,inline:!1},t)}function i(t,e){var i=t.muted,n=t.timeout;t=t.inline;var r=(e=e()).element;e=e.source;var a,o=void 0,s=void 0;return!0===(r.muted=i)&&r.setAttribute("muted","muted"),!0===t&&r.setAttribute("playsinline","playsint(funts[1]?arguments[1]result:en(function(){return s(!0)}).catch(function(t){return s(!1,t)}):s(!0)})}var n=new Blob([new Uint8Array([255,227,24,196,0,0,0,3,72,1,64,0,0,4,132,16,31,227,192,225,76,255,67,12,255,221,27,255,228,97,73,63,255,195,131,69,192,232,223,255,255,207,102,239,255,255,255,101,158,206,70,20,59,255,254,95,70,149,66,4,16,128,0,2,2,32,240,138,255,36,106,183,255,227,24,196,59,11,34,62,80,49,135,40,0,253,29,191,209,200,141,71,7,255,252,152,74,15,130,33,185,6,63,255,252,195,70,203,86,53,15,255,255,247,103,76,121,64,32,47,255,34,227,194,209,138,76,65,77,69,51,46,57,55,170,170,170,170,170,170,170,170,170,170,255,227,24,196,73,13,153,210,100,81,135,56,0,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170,170])],{type:"audio/mpeg"}),r=new Blob([new Uint8Array([0,0,0,28,102,116,121,112,105,115,111,109,0,0,2,0,105,115,111,109,105,115,111,50,109,112,52,49,0,0,0,8,102,114,101,101,0,0,2,239,109,100,97,116,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0,0,2,194,109,111,111,118,0,0,0,108,109,118,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,232,0,0,0,47,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,1,236,116,114,97,107,0,0,0,92,116,107,104,100,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,101,100,116,115,0,0,0,28,101,108,115,116,0,0,0,0,0,0,0,1,0,0,0,47,0,0,0,0,0,1,0,0,0,0,1,100,109,100,105,97,0,0,0,32,109,100,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,172,68,0,0,8,0,85,196,0,0,0,0,0,45,104,100,108,114,0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0,0,0,1,15,109,105,110,102,0,0,0,16,115,109,104,100,0,0,0,0,0,0,0,0,0,0,0,36,100,105,110,102,0,0,0,28,100,114,101,102,0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1,0,0,0,211,115,116,98,108,0,0,0,103,115,116,115,100,0,0,0,0,0,0,0,1,0,0,0,87,109,112,52,97,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,172,68,0,0,0,0,0,51,101,115,100,115,0,0,0,0,3,128,128,128,34,0,2,0,4,128,128,128,20,64,21,0,0,0,0,1,244,0,0,1,243,249,5,128,128,128,2,18,16,6,128,128,128,1,2,0,0,0,24,115,116,116,115,0,0,0,0,0,0,0,1,0,0,0,2,0,0,4,0,0,0,0,28,115,116,115,99,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,2,0,0,0,1,0,0,0,28,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,115,0,0,1,116,0,0,0,20,115,116,99,111,0,0,0,0,0,0,0,1,0,0,0,44,0,0,0,98,117,100,116,97,0,0,0,90,109,101,116,97,0,0,0,0,0,0,0,33,104,100,108,114,0,0,0,0,0,0,0,0,109,100,105,114,97,112,112,108,0,0,0,0,0,0,0,0,0,0,0,0,45,105,108,115,116,0,0,0,37,169,116,111,111,0,0,0,29,100,97,116,97,0,0,0,1,0,0,0,0,76,97,118,102,53,54,46,52,48,46,49,48,49])],{type:"video/mp4"});return{audio:function(t){return i(t=e(t),function(){return{element:document.ument.createElement("video"),source:URL.createObjectURL(r)}})}}});;var QuarkPlayer=function(c){"use strict";var u,h,p="1.21.7",g=this,m="player_"+(new Date).getTime(),v=!1,y=!1,f=null;g.extend=function(e){for(var t,n,i=1;i<arguments.length;i++)for(n in t=arguments[i])t.hasOwnProperty(n)&&(e[n]=t[n]);return e},g.isOpera=!!window.opr&&!!opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/"),g.isFirefox="undefined"!=typeof InstallTrigger,g.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),g.isChrome=!!window.chrome&&!g.isOpera,g.isIE=!!document.documentMode,g.isEdge=!g.isIE&&!!window.StyleMedia,g.isMac=-1<navigator.platform.toUpperCase().indexOf("MAC"),g.isWindows=-1<navigator.platform.toUpperCase().indexOf("WIN"),g.isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i),g.isXS=window.outerWidth<768,g.hasFlash=!1;try{g.hasFlash=Boolean(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))}catch(e){g.hasFlash=void 0!==navigator.mimeTypes["application/x-shockwave-flash"]}c=g.extend({},{id:"player-container",language:"tr",materialId:"",title:"",metadata:{channel:"*null",brand:"*null",episode_title:"*null",season_number:"*null",episode_number:"*null",genre:"*null",digital_air_date:"*null",tv_air_date:"*null"},swfPath:"https://js.duhnet.tv/q/s/player/html5/"+p+"/assets/swf/video-js.swf",live:!1,width:"100%",height:"100%",autoPlay:!0,viewability:!1,debug:!1,preload:"auto",techOrder:["html5","flash"],poster:null,sources:null,subTitles:null,showBandwidthSelector:!0,showAds:!0,adTagUrl:null,adTags:null,playsinline:!0,plugins:null,muted:!1,volume:1,bufferLength:60,crossorigin:!1,stats:null,overlays:null,hotkeys:{enableVolumeScroll:!1},quark_chromecast:{appId:null},panorama:!1,hlsCustomBandwithSelector:!1,ima:{timeout:3e3,prerollTimeout:2e3},vpaidMode:1,passive:!1},c||{});return g.init=function(e){if(console&&console.log("QUARK PLAYER: Version "+p+(c.vendor?" "+c.vendor:"")),g.isWindows&&g.isSafari){if(!g.hasFlash){var t=document.getElementById(c.id),n=document.createElement("div");n.className="install-flash-container";var i=document.createElement("div"),a=document.createElement("span");a.innerText="Bu videoyu izleyebilmek için Adobe Flash Player'a ihtiyacınız var. ",i.appendChild(a);a=document.createElement("a");return a.innerText="İndirmek için tıklayınız.",a.setAttribute("href","https://get.adobe.com/tr/flashplayer/"),a.setAttribute("target","_blank"),i.appendChild(a),n.appendChild(i),void t.appendChild(n)}c.techOrder=["flash","html5"]}for(var s in c=g.extend({},c,e||{}),(g.options=c).sources){var r=c.sources[s];f=r.type}if(videojs.options.flash.swf=c.swfPath,"application/x-mpegURL"===f&&("function"==typeof g.options.hlsCustomBandwithSelector?videojs.plugin("hlsjsBandwithSelectorPlugin",g.options.hlsCustomBandwithSelector):"flash"===g.options.techOrder[0]?videojs.plugin("hlsBandwithSelectorPlugin",hlsBandwithSelectorPlugin):videojs.plugin("hlsjsBandwithSelectorPlugin",hlsjsBandwithSelectorPlugin)),"application/dash+xml"===f&&(videojs.plugin("shakaBandwithSelectorPlugin",shakaBandwithSelectorPlugin),videojs.plugin("shakaAudioSelectorPlugin",shakaAudioSelectorPlugin)),videojs.plugin("gemiusPlugin",gemiusPlugin),videojs.plugin("comscorePlugin",comscorePlugin),videojs.plugin("bluekaiPlugin",bluekaiPlugin),videojs.plugin("markersPlugin",markersPlugin),g.options.thumbnails&&videojs.plugin("thumbnailsPlugin",thumbnailsPlugin),c.plugins&&0<c.plugins.length)for(var s in c.plugins){var o=c.plugins[s];videojs.plugin(o.name,o)}!function(){for(var e in(u=document.createElement("video")).id=m,u.className="video-js vjs-default-skin vjs-big-play-centered",u.setAttribute("controls",""),u.setAttribute("preload",c.preload),u.setAttribute("language",c.language),c.crossorigin&&u.setAttribute("crossorigin","anonymous"),c.poster&&u.setAttribute("poster",c.poster),c.playsinline&&u.setAttribute("playsinline",""),c.width&&(u.style.width=c.width),c.height&&(u.style.height=c.height),c.sources){var t=c.sources[e];t.withCredentials?g.options.withCredentials=!0:g.options.withCredentials=!1;e=document.createElement("source");e.setAttribute("src",t.src),e.setAttribute("type",t.type),t.label&&e.setAttribute("label",t.label),t.proxyUrl&&e.setAttribute("proxy-url",t.proxyUrl),t.certificateUrl&&e.setAttribute("certificate-url",t.certificateUrl),t.licenseServerUrl&&e.setAttribute("licenseServer-url",t.licenseServerUrl),t.assetKey&&e.setAttribute("asset-key",t.assetKey),u.appendChild(e)}var n;g.options.thumbnails&&((n=document.createElement("track")).setAttribute("src",g.options.thumbnails.vttSrc),n.setAttribute("kind","metadata"),u.appendChild(n)),document.getElementById(c.id).appendChild(u)}();n=function(e,t){for(var n=[],i=e.lengpush(s)}return n}(g.options.sources,function(e){if(e.default)return e}),e="high";n.length&&(e=n[0].label);var l={gemiusPlugin:c,comscorePlugin:c,bluekaiPlugin:c,markersPlugin:c,videoJsResolutionSwitcher:{default:e}};if("application/x-mpegURL"===f&&"flash"===g.options.techOrder[0]?l.hlsBandwithSelectorPlugin=c:"application/x-mpegURL"===f&&(l.hlsjsBandwithSelectorPlugin=c),"application/dash+xml"===f&&(l.shakaBandwithSelectorPlugin=c,l.shakaAudioSelectorPlugin=c),g.options.thumbnails&&(l.thumbnailsPlugin={width:g.options.thumbnails.width,height:g.options.thumbnails.height}),c.plugins&&0<c.plugins.length)for(var d in c.plugins)l[c.plugins[d].name]=c;e={volumeMenuButton:{inline:!1,vertical:!0}};g.options.controlBar&&(e=g.extend({},e,g.options.controlBar||{})),this.player=videojs("#"+m,{techOrder:c.techOrder,quark_chromecast:c.quark_chromecast,plugins:l,passive:c.passive,html5:{hls:{withCredentials:g.options.withCredentials},hlsjsConfig:{debug:!1,maxMaxBufferLength:g.options.bufferLength,maxBufferLength:g.options.bufferLength,autoLevelCapping:-1,startLevel:-1,autoStartLoad:"none"!==g.options.preload},shakaConfig:{abr:{defaultBandwidthEstimate:1e6},streaming:{bufferingGoal:2*g.options.bufferLength}}},flash:{hls:{withCredentials:g.options.withCredentials}},controlBar:e}).ready(function(){var e,t,n,i=this;for(n in g.player.version=p,g.options.title&&((e=document.createElement("div")).className="vjs-title-control",(t=document.createElement("div")).innerText=g.options.title,e.appendChild(t),i.el().appendChild(e)),c.sources)"application/x-mpegURL"===c.sources[n].type&&(videojs.Hls.GOAL_BUFFER_LENGTH=g.options.bufferLength);if(g.options.muted&&g.player.muted(g.options.muted),g.options.volume&&g.player.volume(g.options.volume),g.options.logobrand&&g.player.logobrand(g.options.logobrand),this.hotkeys({volumeStep:.1,seekStep:5,alwaysCaptureHotkeys:!0,enableVolumeScroll:c.hotkeys.enableVolumeScroll}),c.live&&(g.player.controlBar.progressControl.el_.setAttribute("style","display:none !important"),g.player.controlBar.remainingTimeDisplay.el_.setAttribute("style","display:none !important"),g.player.controlBar.currentTimeDisplay.el_.setAttribute("style","display:none !important"),g.player.controlBar.durationDisplay.el_.setAttribute("style","display:none !important"),g.player.controlBar.timeDivider.el_.setAttribute("style","display:none !important"),g.player.controlBar.liveDisplay.el_.setAttribute("style","display:flex !important;"),g.player.controlBar.liveDisplay.el_.addEventListener("click",function(){var e,t=(e=null,e=0<g.player.seekable().length?g.player.seekable().end(0):e);g.player.currentTime(t)},!1)),c.subTitles)for(var a in c.subTitles){a=c.subTitles[a];g.player.addRemoteTextTrack({kind:"subtitles",label:a.label,language:a.label,srclang:"",src:a.src},!0)}g.player.originTracks={textTracks:g.player.textTracks()},g.player.getTextTracks=function(){return g.player.textTracks()},g.player.setTextTrack=function(e){for(var t=0;t<g.player.textTracks().length;t++)g.player.textTracks()[t].mode="disabled";-1<e&&(g.player.textTracks()[e].mode="showing"),g.player.activeTextTrackIndex=parseInt(e)},g.player.getTextTrack=function(){for(var e,t=g.player.getTextTracks(),n=0;n<t.length;n++){var i=t[n];"showing"===i.mode&&(e=i)}return e},g.createAdBreak_=function(e,t,n,i){var a;return g.options.stats&&g.options.stats.bluekai&&(a=g.isXS?g.options.stats.bluekai.mobileId:g.options.stats.bluekai.desktopId,i=(-1<i.indexOf("?")?i+"&":i+"?")+"bluekaiid="+a,(a=function(e,t,n,i){if(h)return h[e];for(t=document.cookie.split("; "),h={},i=t.length-1;0<=i;i--)n=t[i].split("="),h[n[0]]=n[1];return h[e]}("M_BK"))&&(-1<i.indexOf("cust_params")?i=i.replace("cust_params=","cust_params="+encodeURIComponent("bluekai="+a)+encodeURIComponent("&")):i+="&cust_params="+encodeURIComponent(a))),'<vmap:AdBreak timeOffset="'+t+'" breakType="'+n+'" breakId="'+e+'"> <vmap:AdSource id="'+e+'" allowMultipleAds="false" followRedirects="true">     <vmap:AdTagURI templateType="vast3">         <![CDATA['+i+"]]>     </vmap:AdTagURI> </vmap:AdSource></vmap:AdBreak>"},g.createVmap_=function(){var e,t='<?xml version="1.0" encoding="utf-8"?>';for(e in t+='<vmap:VMAP version="1.0" xmlns:vmap="http://www.iab.net/videosuite/vmap">',c.adTags){var n=c.adTags[e];t+=g.createAdBreak_(n.id,n.offset,n.type,n.url)}return t+="</vmap:VMAP>"},g.initializeIma=function(){void 0!==c.adTags&&(c.adsResponse=g.createVmap_());var e={id:m,debug:c.debug,locale:"tr",adTagUrl:c.adTagUrl,adsResponse:c.adsResponse,timeout:c.ima.timeout||3e3,prerollTimeout:c.ima.prerollTimeout||2e3,adsRenderingSettings:{useStyledNonLinearAds:!0,enablePreloading:!0},nativeControlsForTouch:!1,vpaidMode:c.vpaidMode},t=!0;"disableCustomPlaybackForIOS10Plus"in c.ima&&(t=c.ima.disableCustomPlaybackForIOS10Plus),e.disableCustomPlaybackForIOS10Plus=t,g.player.ima(e),void 0!==c.adTags&&this.player.ima.setContentWithAdTag(null,c.adTagUrl,!1),void 0!==c.adsResponse&&this.player.ima.setContentWithAdsResponse(null,c.adTagUrl,!1),g.player.ima.initializeAdDisplayContainer(),(navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i))&&g.player.el().hasAttribute("controls")&&g.player.el().removeAttribute("controls"),v=!0},g.requestAds=function(){v||g.initializeIma(),g.player.ima.requestAds()};try{google.ima&&(c.showAds=c.showAds)}catch(e){c.showAds=!1}if(c.showAds&&g.initializeIma(),g.startPlayer=function(){console.log("QUARK PLAYER:","Starting"+(c.vendor?" "+c.vendor:"")),c.showAds?(console&&c.debug&&console.log("PLAYER","Ads will be showing",c.vendor?" "+c.vendor:""),c.adTagUrl?(g.requestAds(),g.player.ima.addContentAndAdsEndedListener(function(e){g.player.trigger("allended",e)})):c.adTags?(g.requestAds(),g.player.ima.addContentAndAdsEndedListener(function(e){g.player.trigger("allended",e)})):g.player.on("ended",function(e){g.player.trigger("allended",e)}),g.player.play()):c.auto},500),g.player.on("ended",f),y=!0},g.player.isInIframe=function(){return window.top!=window.self},g.player.handleViewability=function(){var e=(g.player.isInIframe()?(e=(e=window.location.href).replace(window.location.origin,""),window.parent.document.querySelector('[src*="'+e+'"]')):document.querySelector("#"+m)).getBoundingClientRect();!y&&0<=e.top&&0<=e.left&&e.bottom<=window.top.innerHeight&&e.right<=window.top.innerWidth&&(window.top.removeEventListener("scroll",g.player.handleViewability),window.top.removeEventListener("resize",g.player.handleViewability),g.options.autoPlay&&s())},g.options.viewability&&g.options.autoPlay)try{window.top.addEventListener("scroll",g.player.handleViewability),window.top.addEventListener("resize",g.player.handleViewability),g.player.handleViewability()}catch(e){s()}function s(){canAutoplay.video({timeout:500,muted:!1}).then(function(e){var t=e.result;e.error;!1===t?canAutoplay.video({timeout:500,muted:!0}).then(function(e){var t=e.result;e.error;!1===t?(g.autoplayAllowed=!1,g.autoplayRequiresMute=!1):(g.autoplayAllowed=!0,g.autoplayRequiresMute=!0),r()}):(g.autoplayAllowed=!0,g.autoplayRequiresMute=!1,r())})}function r(){var e;console&&console.log("QUARK PLAYER:","AutoplayAllowed: "+g.autoplayAllowed,"AutoplayRequiresMute: "+g.autoplayRequiresMute,c.vendor?" "+c.vendor:""),!0===g.autoplayRequiresMute&&g.player.muted(!0),!0===c.showAds&&!0!==g.autoplayAllowed||!0===c.showAds&&!0!==c.autoPlay?((e=document.createElement("div")).className="overlay-empty-el",e.innerHTML="&nbsp;",e.style.position="absolute",e.style.left="0",e.style.right="0",e.style.top="0",e.style.bottom="0",e.style.zIndex=10,i.el().appendChild(e),e.addEventListener("click",function(){g.player.ima.initializeAdDisplayContainer(),g.startPlayer(),e.parentNode.removeChild(e)},!1)):!0===c.autoPlay&&g.startPlayer()}g.autoplayAllowed=!1,g.autoplayRequiresMute=!1,c.viewability||s(),c.overlays&&0<c.overlays.length&&i.overlay({debug:g.options.debug,overlays:g.options.overlays}),g.options.panorama&&i.panorama({showNotice:!1,clickAndDrag:!0,callback:function(){}}),g.player.on("play",function(){g.player.el_.querySelector(".overlay-empty-el")&&g.player.el_.querySelector(".overlay-empty-el").remove(),"none"===g.options.preload&&g.player.hlsjs.startLoad(),y||g.startPlayer()})})},g.dispose=function(){v=!1;try{g.player.ima.resetIMA_()}catch(e){}g.player.pause(),setTimeout(function(){g.player.dispose()},0)},g.init(c),g.options=c,g};function bluekaiPlugin(e){"use strict";var t,n,i,a,s,r;e.stats&&e.stats.bluekai&&e.stats.bluekai.desktopId&&(window.console.log("BLUKAI PLUGIN STARTED",e.stats.bluekai),t=e.stats.bluekai.desktopId,n=e.stats.bluekai.mobileId,i=e.stats.bluekai.categoryName,a={0:!1,103:!1,25:!1,50:!1,75:!1,100:!1},s=function(e,t){var n;t=t?t+"_impression_image":"quark_impression_image",document.getElementById(t)?n=document.getElementById(t):((n=document.createElement("img")).setAttribute("id",t),n.setAttribute("alt",""),n.setAttribute("height","1px"),n.setAttribute("width","1px"),n.style.display="none",document.body.appendChild(n)),n.setAttribute("src",e)},r=function(e){a[e]||("0"===e&&(n&&t&&window.outerWidth<768?s("//tags.bluekai.com/site/"+n+"?limit=1&phint=event%3Dimp&phint=video%3D"+i,"bluekai"):s("//tags.bluekai.com/site/"+t+"?limit=1&phnt=video%3D"+i,"bluekai")),a[e]=!0)},this.on("play",function(){r("0")}))}function comscorePlugin(n){function s(){o||function(){try{if(!n.stats.comscore)return;r=new ns_.StreamingTag({customerC2:n.stats.comscore.c2}),o=!0,window.console.log("COMSCORE PLUGIN STARTED",n.stats.comscore)}catch(e){return}}()}var r,i=this,a=nulunction(e){var t;s(),o&&(a={ns_st_ci:(t=function(e){return e||"*null"})(n.materialId),ns_st_cl:1e3*parseInt(i.duration()),ns_st_st:t(n.metadata.channel),ns_st_pu:t(n.metadata.brand),ns_st_pr:t(n.title),ns_st_ep:t(n.metadata.episode_title),ns_st_sn:t(n.metadata.season_number),ns_st_en:t(n.metadata.episode_number),ns_st_ge:t(n.metadata.genre),ns_st_ti:"*null",ns_st_ia:"0",ns_st_ce:"1",ns_st_ddt:t(n.metadata.digital_air_date),ns_st_tdt:t(n.metadata.tv_air_date),c3:t(n.stats.comscore.c3),c4:"*null",c6:"*null"}),i.ima&&i.on("adsready",function(){console.log("COMSCORE","adsready");var e=i.ima.getAdsManager();e&&(e.addEventListener(google.ima.AdEvent.Type.STARTED,function(e){var t,n=e.getAd(),i=n.getDuration(),a=n.getAdPodInfo(),e=a.getPodIndex(),n=(a.getAdPosition(),a.getIsBumper(),n.isLinear());s(),o&&n&&(0===e?t=ns_.StreamingTag.AdType.LinearOnDemandPreRoll:0<e?t=ns_.StreamingTag.AdType.LinearOnDemandMidRoll:-1===e&&(t=ns_.StreamingTag.AdType.LinearOnDemandPostRoll),i<0&&(t=ns_.StreamingTag.AdType.Other),console.log("COMSCORE","playVideoAdvertisement"),r.playVideoAdvertisement({ns_st_cl:1e3*i},t))},!1),e.addEventListener(google.ima.AdEvent.Type.COMPLETE,function(e){s(),o&&(console.log("COMSCORE","stop"),r.stop())},!1),e.addEventListener(google.ima.AdEvent.Type.SKIPPED,function(e){s(),o&&(console.log("COMSCORE","stop"),r.stop())},!1))})}),i.on("play",function(e){s(),o&&(300<i.duration()?ns_.StreamingTag.ContentType.LongFormOnDemand:i.duration()==1/0?ns_.StreamingTag.ContentType.Live:ns_.StreamingTag.ContentType.ShortFormOnDemand,console.log("COMSCORE","playVideoContentPart"),r.playVideoContentPart(a,ns_.StreamingTag.ContentType.LongFormOnDemand))}),i.on("pause",function(e){o&&(console.log("COMSCORE","stop"),r.stop()),s()}),i.on("allended",function(e){o&&(console.log("COMSCORE","stop"),r.stop()),s(),o=!1})}function Html5Fairplay(e,t,n){var r=this;if(e.src)return console.log("*****",e),r.keySystem="com.apple.fps.1_0",r.el_=t.el(),r.player_=videojs(n.playerId),r.tech_=t,r.source_=e,r.options_=n||t.options_,t.isReady_=!1,r.startVideo=function(){r.el_.addEventListener("webkitneedkey",r.onneedkey,!1),r.el_.addEventListener("error",onerror,!1),r.tech_.triggerReady()},r.loadCertificate=function(){var e=new XMLHttpRequest;e.responseType="arraybuffer",e.addEventListener("load",r.onCertificateLoaded,!1),e.addEventListener("error",r.onCertificateError,!1),e.open("GET",r.source_["certificate-url"],!0),e.send()},r.onCertificateLoaded=function(e){e=e.target;r.certificate=new Uint8Array(e.response),r.startVideo()},r.onCertificateError=function(e){window.console.error("FAIRPLAY","Failed to retrieve the server certificate.")},r.extractContentId=function(e){r.contentId=r.arrayToString(e),r.contentId=r.contentId.replace('"',""),r.contentId=r.contentId.replace("<",""),r.contentId=r.contentId.replace("$",""),r.contentId=r.contentId.replace(/.*\/\/(.*)/gi,"skd://$1");e=document.createElement("a");return e.href=r.contentId,e.hostname},r.concatInitDataIdAndCertificate=function(e,t,n){"string"==typeof t&&(t=r.stringToArray(t));var i=0,a=new ArrayBuffer(e.byteLength+4+t.byteLength+4+n.byteLength),s=new DataView(a);new Uint8Array(a,0,e.byteLength).set(e),i+=e.byteLength,s.setUint32(i,t.byteLength,!0),i+=4;e=new Uint16Array(a,i,t.length);return e.set(t),i+=e.byteLength,s.setUint32(i,n.byteLength,!0),i+=4,new Uint8Array(a,i,n.byteLength).set(n),new Uint8Array(a,0,a.byteLength)},r.onneedkey=function(e){var t=e.target,n=e.initData,e=r.extractContentId(n),n=r.concatInitDataIdAndCertificate(n,e,r.certificate);if(t.webkitKeys||t.webkitSetMediaKeys(new WebKitMediaKeys(r.keySystem)),!t.webkitKeys)throw"Could not create MediaKeys";n=t.webkitKeys.createSession("video/mp4",n);if(!n)throw"Could not create key session";n.contentId=e,r.waitForEvent("webkitkeymessage",r.licenseRequestReady,n),r.waitForEvent("webkitkeyadded",r.onkeyadded,n),r.waitForEvent("webkitkeyerror",r.onkeyerror,n)},r.licenseRequestReady=function(e){var t=e.target,n=e.message,i=new XMLHttpRequest;e.sessionId;i.responseType="text",i.session=t,i.addEventListener("load",r.licenseRequestLoaded,!1),i.addEventListener("error",r.licenseRequestFailed,!1),r.source_["licenseserver-url"]=r.source_["licenseserver-url"].replace("{assetId}",t.contentId),i.open("POST",r.source_["licenseserver-url"],!0),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(n)},r.licenseRequestLoaded=function(e){var t=e.target,e=t.session;keyText=t.responseText.trim(),"<ckc>"===keyText.substr(0,5)&&"</ckc>"===keyText.substr(-6)&&(keyText=keyText.slice(5,-6)),key=r.base64DecodeUint8Array(keyText),e.update(key)},r.licenseRequestFailed=function(e){window.console.error("FAIRPLAY","The license request failed.")},r.onkeyerror=function(e){window.console.erwindow.console.lw Uint16Array(t),i=0,a=e.length;i<a;i++)n[i]=e.charCodeAt(i);return n},r.arrayToString=function(e){e=new Uint16Array(e.buffray(new ArrayBuffer(n));f)&&(r=64),l+=o.charAt(i)+o.charAt(a)+o.charAt(s)+o.cEvent=function(e,t,n){n.addEventListener(e,function(){t(arguments[0])},!1)},r.loadCertificate(),r}function gemiusPlugin(i){var a=this,e=a.id(),t=!1,s=null,n=!1;if(i&&i.stats&&i.stats.gemius){var r,o=location.domain;try{r=new GemiusPlayer(e,i.stats.gemius.identifier,{currentDomain:o}),window.console.log("GEMIUS PLUGIN STARTED",i.stats.gemius)}catch(e){window.console.error("GEMIUS PLUGIN NOT LOADED")}a.one("loadedmetadata",function(){r&&!t&&(r.newProgram(i.materialId,{programType:"Video",programDuration:a.duration()==1/0?-1:Math.ceil(a.duration()),programName:i.title}),a.ima&&a.on("adsready",function(){var e=a.ima.getAdsManager();e&&(e.addEventListener(google.ima.AdEvent.Type.STARTED,function(e){var t=e.getAd();s=t.getAdId();t.getDuration();var n=t.getAdPodInfo(),e=n.getPodIndex();n.getAdPosition(),n.getIsBumper();t.isLinear()&&(0===e||0<e&&(r.adEvent(i.materialId,s,Math.ceil(a.currentTime()),"break",{}),console.log("GEMIUS","adEvent","break")),console.log("GEMIUS","adEvent","newAd"),r.newAd(s),console.log("GEMIUS","adEvent","play"),r.adEvent(i.materialId,s,Math.ceil(a.currentTime()),"play",{}))}),e.addEventListener(google.ima.AdEvent.Type.COMPLETE,function(e){console.log("GEMIUS","adEvent","stop"),r.adEvent(i.materialId,s,Math.ceil(a.currentTime()),"complete",{})}),e.addEventListener(google.ima.AdEvent.Type.SKIPPED,function(e){console.log("GEMIUS","adEvent","stop"),r.adEvent(i.materialId,s,Math.ceil(a.currentTime()),"stop",{})}))}),t=!0,window.console.log("GEMIUS","newProgram"))}),a.on("play",function(){r&&t&&(n=!0,r.programEvent(i.materialId,Math.ceil(a.currentTime()),"play"),window.console.log("GEMIUS","play"))});var l=!1;a.on("waiting",function(){r&&t&&(r.programEvent(i.materialId,Math.ceil(a.currentTime()),"buffer"),window.console.log("GEMIUS","buffer")),l=!0}),a.on("playing",function(){l&&(r&&t&&(r.programEvent(i.materialId,Math.ceil(a.currentTime()),"play"),window.console.log("GEMIUS","play")),l=!1)}),a.on("pause",function(){r&&t&&(r.programEvent(i.materialId,Math.ceil(a.currentTime()),"pause"),window.console.log("GEMIUS","pause"))}),a.on("seeking",function(){r&&t&&n&&(r.programEvent(i.materialId,Math.ceil(a.currentTime()),"seek"),window.console.log("GEMIUS","seek"))}),a.on("seeked",function(){r&&t&&n&&(a.paused()||(r.programEvent(i.materialId,Math.ceil(a.currentTime()),"play"),window.console.log("GEMIUS","play")))}),a.on("volumechange",function(){r&&t&&(a.muted()?(r.programEvent(i.materialId,Math.ceil(a.currentTime()),"chngVol",{volume:"-1"}),window.console.log("GEMIUS","chngVol",-1)):(r.programEvent(i.materialId,Math.ceil(a.currentTime()),"chngVol",{volume:a.volume()}),window.console.log("GEMIUS","chngVol",a.volume())))}),a.on("allended",function(){r&&t&&(r.programEvent(i.materialId,Math.ceil(a.currentTime()),"complete"),t=!1,window.console.log("GEMIUS","complete"))})}}function hlsBandwithSelectorPlugin(){"use strict";console&&console.log("HLS Plugin");var a,l,t,d=this;d.getCurrentBitrate=function(){if(a){var e=a.selectPlaylist();return{bitrate:e.attributes.BANDWIDTH,width:e.attributes.WIDTH,height:e.attributes.HEIGHT}}};function c(e,t){var n,i;return(n=(n=e.attributes&&e.attributes.BANDWIDTH?e.attributes.BANDWIDTH:n)||window.Number.MAX_VALUE)-(i=(i=t.attributes&&t.attributes.BANDWIDTH?t.attributes.BANDWIDTH:i)||window.Number.MAX_VALUE)}function u(t,n){if(void 0!==t){var e="innerText"in t?"innerText":"textContent";try{t[e]=n}catch(e){t.setAttribute("innerText",n)}}}function e(){var e=a.playlists.master.playlists.slice();return e.sort(c),0<=l?e[l]:t.apply(a)}d.on("ready",function(){(a=d.player_.hls)&&(t=a.selectPlaylist,a.selectPlaylist=e)});function n(){if(a){var e=d.player_,s=a.playlists.master.playlists.slice();if(s.sort(c),!(s.length<=1)){var t=e.el();if(!t.querySelector("#bandwidth-selector")){var n=document.createElement("div");n.id="bandwidth-selector",n.setAttribute("class","vjs-settings-button vjs-menu-button vjs-menu-button-popup vjs-control vjs-icon-cog");e=document.createElement("div");e.setAttribute("class","vjs-menu"),n.appendChild(e);var r=document.createElement("ul");r.setAttribute("class","vjs-menu-content"),e.appendChild(r);var i=document.createElement("li");i.setAttribute("class","vjs-menu-item vjs-selected");e=document.createElement("span");u(e,"Otomatik"),i.appendChild(e),i.addEventListener("click",function(){var e=r.querySelector(".vjs-selected");e&&(e.className=e.className.replace("vjs-selected","")),i.className=i.className+" vjs-selected",l=void 0}),r.appendChild(i);for(var o=0;o<s.length;++o)!function(){var t=o,e=(s[o].attributes.BANDWIDTH/1e3).toFixed(0),n=0;s[o].attributes.RESOLUTION&&(n=s[o].attributes.RESOLUTION.height);var i=document.createElement("li");i.setAttribute("class","vjs-menu-item"),i.setAttribute("data-val",e);var a=document.createElement("span");u(a,n&&0<n?n+"p ("+e+"k)":e+"kbps"),i.appendChild(a),i.addEventListener("click",function(){var e=r.querySelector(".vjs-selected");e&&(e.className=e.className.replace("vjs-selected","")),i.className=i.className+" vjs-selected",l=t}),r.appendChild(i)}();e=t.parentNode.querySelectorAll(".vjs-control-bar")[0],t=t.parentNode.querySelector(".vjs-fullscreen-control");e&&e.insertBefore(n,t)}}}}d.on("loadedmetadata",function(){n()})}function hlsjsBandwithSelectorPlugin(e){"use strict";console&&console.log("HLSJS Plugin");var a,l=this;function d(t,n){if(void 0!==t){var e="innerText"in t?"innerText":"textContent";try{t[e]=n}catch(e){t.setAttribute("innerText",n)}}}l.getCurrentBitrate=function(){var e=a.levels[a.currentLevel];return{bitrate:e.attrs.BANDWIDTH,width:e.attrs.WIDTH,height:e.attrs.HEIGHT}},l.getBitrateLevels=function(){return a.levels},l.setBitrateLevel=function(e){a.currentLevel=l=function(e){a.autoLevelCapping=e},l.on("ready",function(){a=l.hlsjs});function t(){if(a){var e=l.player_,s=l.getBitrateLevels();if(s&&!(s.length<=1)){var t=e.el();if(!t.querySelector("#bandwidth-selector")){var n=document.createElement("div");n.id="bandwidth-selector",n.setAttribute("class","vjs-settings-button vjs-menu-button vjs-menu-button-popup vjs-control vjs-icon-cog");e=document.createElement("div");e.setAttribute("class","vjs-menu"),n.appendChild(e);var r=document.createElement("ul");r.setAttribute("class","vjs-menu-content"),e.appendChild(r);var i=document.createElement("li");i.setAttribute("class","vjs-menu-item vjs-selected");e=document.createElement("span");d(e,"Otomatik"),i.appendChild(e),i.addEventListener("click",function(){var e=r.querySelector(".vjs-selected");e&&(e.className=e.className.replace("vjs-selected","")),i.className=i.className+" vjs-selected",l.setBitrateLevel(-1)}),r.appendChild(i);for(var o=0;o<s.length;++o)!function(){var t=o,e=(s[o].attrs.BANDWIDTH/1e3).toFixed(0),n=0;s[o].attrs.RESOLUTION&&(n=s[o].attrs.RESOLUTION.height);var i=document.createElement("li");i.setAttribute("class","vjs-menu-item"),i.setAttribute("data-val",e);var a=document.createElement("span");d(a,n&&0<n?n+"p ("+e+"k)":e+"kbps"),i.appendChild(a),i.addEventListener("click",function(){var e=r.querySelector(".vjs-selected");e&&(e.className=e.className.replace("vjs-selected","")),i.className=i.className+" vjs-selected",l.setBitrateLevel(t)}),r.appendChild(i)}();e=t.parentNode.querySelectorAll(".vjs-control-bar")[0],t=t.parentNode.querySelector(".vjs-fullscreen-control");e&&e.insertBefore(n,t)}}}}l.on("loadedmetadata",function(){e.showBandwidthSelector&&t()})}function markersPlugin(e){var c=this;c.one("ready",function(){var r=c.controlBar.progressControl.el().childNodes[0],o=!1,l=!1;c.on("durationchange",function(){0<c.duration()&&(o=!0)}),c.one("adsready",function(){l=!0});var d=setInterval(function(){if(o&&l){clearInterval(d);var e=c.ima.getAdsManager();if(e)for(var t=c.duration(),n=e.getCuePoints(),i=0;i<=n.length;i++){var a,s=n[i];0<s&&(a=(100*s/t).toFixed(2),window.console.log("MARKER",a),(s=document.createElement("div")).className="vjs-marker",s.style.left=a+"%",r.appendChild(s))}}},500)})}function safariAudioSelectorPlugin(e){"use strict";var l=this,i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);l.getAudioTracks=function(){var e,t=l.player_.audioTracks().tracks_,n=[];for(e in t){var i=t[e];n.push(i)}return n},l.setAudioTrack=function(e){l.getAudioTracks()[e];for(var t=0;t<l.audioTracks().tracks_.length;t++)l.audioTracks().tracks_[t].enabled=!1;l.audioTracks().tracks_[e].enabled=!0,l.activeAudioTrackIndex=e},l.getAudioTrack=function(){for(var e,t=l.getAudioTracks(),n=0;n<t.length;n++){var i=t[n];i.enabled&&(e=i)}return e};function t(){if(i){var e=l.player_,s=l.getAudioTracks();if(!(s.length<=1)){var t=e.el(),n=document.createElement("div");n.setAttribute("class","vjs-audio-button vjs-menu-button vjs-menu-button-popup vjs-control vjs-button");e=document.createElement("div");e.setAttribute("class","vjs-menu"),n.appendChild(e);var r=document.createElement("ul");r.setAttribute("class","vjs-menu-content"),e.appendChild(r);for(var o=0;o<s.length;++o)!function(){var t=o,e=(s[o],s[o].id),n=s[o].label,i=s[o].enabled,a=document.createElement("li");a.setAttribute("class","vjs-menu-item "+(i?"vjs-selected":"")),a.setAttribute("data-id",e);e=document.createElement("span");!function(t,n){if(void 0!==t){var e="innerText"in t?"innerText":"textContent";try{t[e]=n}catch(e){t.setAttribute("innerText",n)}}}(e,n),a.appendChild(e),a.addEventListener("click",function(){var e=r.querySelector(".vjs-selected");e&&(e.className=e.className.replace("vjs-selected","")),this.className=this.className+" vjs-selected",l.setAudioTrack(t)}),r.appendChild(a)}();e=t.parentNode.querySelectorAll(".vjs-control-bar")[0],t=t.parentNode.querySelector(".vjs-fullscreen-control");e&&e.insertBefore(n,t)}}}l.on("loadedmetadata",function(){t()})}function shakaAudioSelectorPlugin(){"use strict";var l=this;function e(){if(l.shaka){var e=l.player_;l.getAudioTracks=function(){var e,t=l.shaka.getAudioLanguages(),n=l.shaka.getVariantTracks(),i=[];for(e in t){var a,s=t[e],r={id:e,language:s,active:!1};for(a in n){var o=n[a];if(!0===o.active&&o.language===s){r.active=!0,l.currentLanguage=r.language;break}}i.push(r)}return i},l.setAudioTrack=function(e){var t=l.getAudioTracks()[e];if(t)if(l.shaka.selectAudioLanguage(t.language),l.currentLanguage=t.language,0<l.audioTracks().tracks_.length){for(var n=0;n<l.audioTracks().tracks_.length;n++)l.audioTracks().tracks_[n].enabled=!1;l.audioTracks().tracks_[e].enabled=!0,l.activeAudioTrackIndex=parseInt(e)}else window.castSender.setCastTrack(e,"AUDIO")},l.getAudioTrack=function(){for(var e,t=l.getAudioTracks(),n=0;n<t.length;n++){var i=t[n];i.active&&(e=i)}return e};var s=l.getAudioTracks();if(!(s.length<=1)){var t=e.el();t.className+=" vjs-shaka";var n=document.createElement("div");n.setAttribute("class","vjs-audio-button vjs-menu-button vjs-menu-button-popup vjs-control vjs-button");e=document.querySelector(".vjs-audio-button");e&&e.remove();e=document.createElement("div");e.setAttribute("class","vjs-menu"),n.appendChild(e);var r=document.createElement("ul");r.setAttribute("class","vjs-menu-content"),e.appendChild(r);for(var o=0;o<s.length;++o)!function(){var t=o,e=(s[o],s[o].id),n=s[o].language,i=s[o].active,a=document.createElement("li");a.setAttribute("class","vjs-menu-item "+(i?"vjs-selected":"")),a.setAttribute("data-id",e);e=document.createElement("span");!function(t,n){if(void 0!==t){var e="innerText"in t?"innerText":"textContent";try{t[e]=n}catch(e){t.setAttribute("innerText",n)}}}(e,n),a.appendChild(e),l.audioTracks().addTrack({label:n,language:n,enabled:i}),i&&(l.activeAudioTrackIndex=parseInt(t)),a.addEventListener("click",function(){var e=r.querySelector(".vjs-selected");e&&(e.className=e.className.replace("vjs-selected","")),this.className=this.className+" vjs-selected",l.setAudioTrack(t)}),r.appendChild(a)}();e=t.parentNode.querySelectorAll(".vjs-control-bar")[0],t=t.parentNode.querySelector(".vntrol");e&&e.insertBefore(n,t)}}}l.on("loadedmetadata",function(){e()})}videojs.fairplaySourceHandler=function(){return{canHandleSource:function(e){return window.WebKitMediaKeys?(self.keySystem="com.apple.fps.1_0",WebKitMediaKeys.isTyp:""):""},handleSource:function(e,t,n){return new Html5Fairplay(e,t,n)},canPlayType:function(e){return videojs.fairplaySourceHandler.canPlayType(e)}}},videojs.fairplaySourceHandler.canPlayType=function(e){return/application\/x-mpegURL/i.test(e)?"maybe":""},window.MediaSource&&videojs.getComponent("Html5").registerSourceHandler(videojs.fairplaySourceHandler(),0),videojs.Html5Fairplay=Html5Fairplay,function(d,c){var u,o,h,t,n,e,i;function l(e,i){var t=i.options_,n=i.el(),a=null;this.player=d(t.playerId);var s=this;function r(){var t=null,n=null;return function(){var e=Date.now();!t||2e3<e-t?(t=e,h.recoverMediaError()):!n||2e3<e-n?(n=e,h.swapAudioCodec(),h.recoverMediaError()):console.error("Error loading media: File could not be played")}}var o=r(),l=r();n.addEventListener("error",function(e){e=e.currentTarget.error;e.code===e.MEDIA_ERR_DECODE?l():console.error("Error loading media: File coulction(){h.destroy()},this.dVEL_LOADED,function(e,t){a=t.details.live?1/0:t.details.totalduration}),h.on(c.Events.ERROR,function(e,t){if(t.fatal)switch(t.type){case c.ErrorTypes.NETWORK_ERROR:h.startLoad(),s.player.trigger("error",t);break;case c.ErrorTypes.MEDIA_ERROR:o(),s.player.trigger("error",t);break;default:console.error("Error loading media: File could not be played"),s.player.trigger("error",t)}}),h.o&&t.samples.forEach(function(e){uh(function(e){var n=c.Events[e];h.on(n,function(e,t){i.trigger(n,t)})}),i.featuresNativeTextTracks||(Object.definePr}),n.addTextTrack=function(){return i.addTextTrack.apply(i,arguments)}),h.attachMedia(n),h.loadSource(e.src)}function a(t,n){var i=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);videoElement=n.el();var a=document.createElement("div");a.className="vjs-dai-click-element",videoElement.parentNode.appendChild(a);var e,s,r=document.createElement("div");r.className="vjs-dai-wta-element",videoElement.parentNode.appendChild(r),(u=new google.ima.dai.api.StreamManager(videoElement,r)).setClickElement(a),u.addEventListener([google.ima.dai.api.StreamEvent.Type.LOADED,google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED],function(e){switch(e.type){case google.ima.dai.api.StreamEvent.Type.LOADED:if(console.log("DAI","Stream loaded",e.getStreamData().url),!i)return t.src=e.getStreamData().url,new l(t,n);videoElement.src=e.getStreamData().url;case google.ima.dai.api.StreamEvent.Type.ERROR:return console.log("DAI","Error loading stream, playing backup stream.",e),new l(t,n);case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:console.log("DAI","Ad Break Started"),a.style.display="block";break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:console.log("DAI","Ad Break Ended"),a.style.display="none"}},!1),e=o,s=null,(r=new google.ima.dai.api.LiveStreamRequest).assetKey=e,e={description_url:window.location.href},r.adTagParameters=e,r.apiKey=s,u.requestStream(r)}d&&c?(t=/^application\/(x-mpegURL|vnd\.apple\.mpegURL)$/i,n=/\.m3u8/i,e={canHandleSource:function(e){return e.skipContribHlsJs?"":t.test(e.type)?"probably":n.test(e.src)?"maybe":""},handleSource:function(e,t){var n=t.options_;if(h=this.hls=new c(n.hlsjsConfig),this.player=d(n.playerId),this.player.hlsjs=h,!(o=l(e,t);a(e,t)},canPlayType:function(e){return t.test(e)?"probably":""}},i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),(c.isSupported()||i)&&(console.log("Safari control removed!"),d?(i=(i=d.getTech&&d.getTech("Html5"))||d.getComponent&&d.getComponent("Html5"))&&i.registerSourceHandler(e,0):console.warn("videojs-contrib-hls.js: Couldn't find find window.videojs nor require('video.js')"))):consf module&&module.exports?module.exports=t(e,e.videojs):t(e,e.videojs)}(window,function(i,t){"use strict";i.videojs_hotkeys={version:"0.2.17"};t.plugin("hotkeys",function(o){var l=this,d=l.el(),c=document,e=t.mergeOptions||t.util.mergeOptions,u=(o=e({volumeStep:.1,seekStep:5,enableMute:!0,enableVolumeScroll:!0,enableFullscreen:!0,enableNumbers:!0,enableJogStyle:!1,alwaysCaptureHotkeys:!1,enableModifiersForNumbers:!0,playPauseKey:function(e){return 32===e.which||179===e.which===e.which},forwardKey:function(e){return 39===e.which||176===e.which},volumeUpKey:function(e){return 38===e.which},volumeDownKey:function(e){reture){return 77===e.which},fullscreenKey:function(e){return 70===e.which},customKeys:{}},o||{})).volumeStep,h=o.seekStep,p=o.enableMute,n=o.enableVolumeScroll,g=o.enableFullscreen,m=o.enableNumbers,v=o.enableJogStyle,y=o.alwaysCaptureHotkeys,f=o.enableModifiersForNumbers;d.hasAttribute("tabIndex")||d.setAttribute("tabIndex","-1"),d.style.outline="none",!y&&ltion(){}),l.on("userinactive",function(){function e(){clearTimeout(t)}var t=setTimeout(function(){l.off("useractive",e),c.activeElement.parentElement,d.quer""===e.style.display&&(e.style.display="block",e.style.bottom="39px")});var e=function(e){var t;l.controls()&&(t=e.relatedTarget||e.toElement||c.activeElement,(y||t==d||t==d.querySelector(".vjs-tech")||t==d.querySelector(".iframeblocker")||t==d.querySelector(".vjs-control-bar"))&&n&&(e=i.event||e,t=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),e.preventDeo.volumeDownKey(e,t)?5:o.muteKey(e,t)?6:o.fullscreenKey(e,t)?7:void 0};return l.on("keydown",function(e){var t=e.which,n=e.preventDefault;if(l.controls()){var i,a,s=c.activeElement;if(y||s==d||s==d.querySelector(".vjs-tech")||s==d.querySelector(".vjs-control-bar")||s==d.querySelector(".iframeblocker"))switch(b(e,l)){case 1:n(),y&&e.stopPropagation(),l.paused()?l.play():l.pause();break;case 2:n(),i=l.currentTime()-h,l.currentTime()<=h&&(i=0),l.currentTime(i);break;case 3:n(),l.currentTime(l.currentTime()+h);break;case 5:n(),v?(i=l.currentTime()-1,l.currentTime()<=1&&(i=0),l.currentTime(i)):l.volume(l.volume()-u);break;case 4:n(),v?l.currentTime(l.currentTime()+1):l.volume(l.volume()+u);break;case 6:p&&l.muted(!l.muted());break;case 7:g&&(l.isFullscreen()?l.exitFullscreen():l.requestFullscreen());break;default:for(a in(47<t&&t<59||95<t&&t<106)&&(!f&&(e.metaKey||e.ctrlKey||e.altKey)||m&&(i=48,i=t-(i=95<t?96:i),n(),l.currentTime(l.duration()*i*.1))),o.customKeys){var r=o.customKeys[a];r&&r.key&&r.handler&&r.key(e)&&(n(),r.handler(l,o,e))}}}}),l.on("dblclick",function(e){l.controls()&&((e=e.relatedTarget||e.toElement||c.activeElement)!=d&&e!=d.querySelector(".vjs-tech")&&e!=d.querySelector(".iframeblocker")||g&&(l.isFullscreen()?l.exitFullscreen():l.requestFullscreen()))}),l.on("mousewheel",e),l.on("DOMMouseScroll",e),this})}),function(t){var e;"function"==typeof define&&define.amd?define(["video.js","videojs-contrib-ads"],function(e){t(window,document,e)}):"object"==typeof exports&&"object"==typeof module?(e=require("video.js"),require("videojs-contrib-ads"),t(windowi++)for(n in t=arguments[i])t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var F={debug:!1,timeout:5e3,prerollTimeout:100,adLn i(e){return new RegExp("(^|[^A-Za-z-])"+e+"((?![A-Za-z-])|$)","gi")}function a(e,t){return i(t).test(e.className)?e:e.className=e.className.trim()+" "+t}function s(e,t){return(t=i(t)).e,t){e.id=this.controlPrefix+t,e.className=this.controlPrefix+t+" "+t}.bind(this),o=function(){this.vjsControls=this.player.getChild("controlBar"),this.adContainerDiv=this.vjsControls.el().parentNode.appendChild(O.createElement("div")),r(this.adContainerDiv,"ima-ad-container"),a(this.adContainerDiv,"ima-ad-container-hidden"),l(),this.adDisplayContainer=new google.ima.AdDisplayContainer(this.adContainerDiv,this.contentPlayer)}.bind(this),l=function(){this.controlsDiv=O.createElement("div"),r(this.controlsDiv,"ima-controls-div"),a(this.controlsDiv,"vjs-control-bar"),a(this.controlsDiv,"vjs-hidden"),this.countdownDiv=O.createElement("div"),r(this.countdownDiv,"ima-countdown-div"),a(this.countdownDiv,"vjs-current-time vjs-time-control vjs-control"),this.countdownDiv.innerHTML=this.settings.adLabel,this.showCountdown||a(this.countdownDiv,"vjs-hidden"),this.muteDiv=O.createElement("div"),r(this.muteDiv,"ima-mute-div"),a(this.muteDiv,"vjs-volume-menu-button vjs-control vjs-button"),A(),this.muteDiv.addEventListener("click",w,!1),this.seekBarDiv=O.createElement("div"),r(this.seekBarDiv,"ima-seek-bar-div"),a(this.seekBarDiv,"vjs-progress-control vjs-control"),this.sliderDiv=O.createElement("div"),r(this.sliderDiv,"ima-slider-div"),a(this.sliderDiv,"vjs-progress-holder vjs-slider vjs-slider-horizontal"),this.progressDiv=O.createElement("div"),r(this.progressDiv,"ima-progress-div"),a(this.progressDiv,"vjs-play-progress vjs-slider-bar"),this.playPauseDiv=O.createElement("div"),r(this.playPauseDiv,"ima-play-pause-div"),a(this.playPauseDiv,"vjs-play-control vjs-control vjs-button vjs-playing"),this.playPauseDiv.addEventListener("click",b,!1),this.fullscreenDiv=O.createElement("div"),r(this.fullscreenDiv,"ima-fullscreen-div"),a(this.fullscreenDiv,"vjs-fullscreen-control vjs-control vjs-button"),this.fullscreenDiv.addEventListener("click",E,!1),this.adContainerDiv.appendChild(this.controlsDiv),this.controlsDiv.appendChild(this.playPauseDiv),this.controlsDiv.appendChild(this.muteDiv),this.controlsDiv.appendChild(this.seekBarDiv),this.seekBarDiv.appendChild(this.sliderDiv),this.sliderDiv.appendChild(this.progressDiv),this.controlsDiv.appendChild(this.countdownDiv),this.controlsDiv.appendCadDisplayContainerInitialized=!0,this.adDisplayContainer.initialize()}.bind(this),this.requestAds=function(){this.adDisplayContainerInitialized||this.adDisplayContainer.initialize();var e=new google.ima.AdsRequest;this.settings.adTagUrl?e.adTagUrl=this.settings.adTagUrl:e.adsResponse=this.settings.adsResponse,this.settings.forceNonLinearFullSlot&&(e.forceNonLinearFullSlot=!0),e.linearAdSlotWidth=this.getPlayerWidth(),e.linearAdSlotHeight=this.getPlayerHeight(),e.nonLinearAdSlotWidth=this.settings.nonLinearWidth||this.getPlayerWidth(),e.nonLinearAdSlotHeight=this.settings.nonLinearHeight||this.getPlayerHeight(),e.setAdWillAutoPlay(this.settings.adWillAutoPlay),0===(this.player.muted()?0:this.player.volume())&&(console.log("VPMUTED"),e.setAdWillPlayMuted(!0)),this.adsLoader.requestAds(e)}.bind(this);var d=function(e){if(this.adsManager=e.getAdsManager(this.contentPlayheadTracker,this.adsRenderingSettings),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,u),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,h),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested_),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested_),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,p),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,g),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,m),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdComplete_),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdComplete_),this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,function(){this.adPlaying=!1,y()}.bind(tener(google.ima.AdEvent.Type.RESUMED,function(){this.adPlaying=!0,f()}.bind(this)),!this.autoPlayAdBreaks)try{var t=this.getPlayerWidth(),n=this.getPlayerHeight();this.adsManagerDimensions.width=t,this.adsManagerDimensions.height=n,this.adsManager.init(t,n,google.ima.ViewMode.NORMAL),A()}catch(e){u(e)}var i=[google.ima.AdEvent.Type.AD_BREAK_READY,google.ima.AdEvent.Type.AD_METADATA,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.DURATION_CHANGE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.IMPRESSION,google.ima.AdEvent.Type.LINEAR_CHANGED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.LOG,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.RESUMED,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.VOLUME_CHANGED,google.ima.AdEvent.Type.VOLUME_MUTED];if(this.settings.debug)for(var a=0;a<i.length;a++)this.adsManager.addEventListener(i[a],function(e){B.console.log("Ad event: "+e.type),e.type===google.ima.AdEvent.Type.LOG&&(e=e.getAdData())&&e.adError&&B.console.log("Non-fatal error occurred: "+e.adError.start is deprecated. Use player.ima.startFromReadyCallback instead.")},this.startFromReadyCallback=function(){if(this.autoPlayAdBreaks)try{this.adsManager.init(this.getPlayerWidth(),this.getPlayerHeight(),google.ima.ViewMode.NORMAL),A(),this.adsManager.start()}catch(e){u(e)}}.bind(this);var c=function(e){B.console.log("AdsLoader error: "+e.getError()),a(this.adContainerDiv,"ima-ad-container-hidden"),this.adsManager&&this.adsManager.destroy(),this.player.trigger({type:"adserror",data:{AdError:e.getError(),AdErrorEvent:e}})}.bind(this),u=function(e){var t=void 0!==e.getError?e.getError():e.stack;B.console.log("Ad error: "+t),this.vjsControls.show(),this.adsManager.destroy(),a(this.adContainerDiv,"ima-ad-container-hidden"),this.player.trigger({type:"adserror",data:{AdError:t,AdErrorEvent:e}})}.bind(this),hplayAdBreak=function(){this.autoPlayAdBreaks||this.adsManager.start()}.bind(this),this.onContentPauseRequested_=function(e){A(),this.adsActive=!0,this.adPlaying=!0,this.contentSource=this.player.currentSrc(),this.player.off("ended",this.localContentEndedListener),-1!=e.getAd().getAdPodInfo().getPodIndex()&&this.player.ads.startLinearAdMode(),s(this.adContainerDiv,"ima-ad-container-hidden");e=e.getAd().getContentType();("application/javascript"!==e||this.settings.showControlsForJSAds?s:a)(this.controlsDiv,"vjs-hidden"),-1<e.indexOf("image")&&a(this.controlsDiv,"vjs-hidden"),this.vjsControls.hide(),f(),this.player.pause(),this.settings.disableCustomPlaybackForIOS10Plus&&this.changeAdsFullscreenMode(!0)}.bind(this),this.onContentResumeRequested_=function(e){this.adsActive=!1,this.adPlaying=!1,this.player.on("ended",this.localContentEndedListener),(null==this.currentAd||this.currentAd&&this.currentAd.isLinear())&&(a(this.adContainerDiv,"ima-ad-container-hidden"),a(this.controlsDiv,"vjs-hidden")),this.vjsControls.show(),this.currentAd&&(this.contentComplete||-1==this.currentAd.getAdPodInfo().getPodIndex())||this.player.ads.endLinearAdMode(),this.countdownDiv.innerHTML="",this.player.duration()===1/0&&this.player.play(),this.settings.disableCustomPlaybackForIOS10Plus&&this.changeAdsFullscreenMode(!1)}.bind(this);var p=function(e){if(this.allAdsCompleted=!0,a(this.adContainerDiv,"ima-ad-container-hidden"),1==this.contentComplete)for(var t in this.contentPlayer.src!=this.contentSource&&this.contentSource&&this.player.src(this.contentSource),this.contentAndAdsEndedListeners)this.contentAndAdsEndedListeners[t]()}.bind(this),g=function(e){this.currentAd=e.getAd(),this.currentAd&&s(this.adContainerDiv,"ima-ad-container-hidden"),e.getAd().isLinear()||(0<this.player.currentTime()&&this.player.currentTime()>=this.player.duration()?this.player.trigger("allended"):this.player.play())}.bind(this),m=function(e){this.currentAd=e.getAd();var t=this.adContainerDiv,e=this.controlsDiv;this.currentAd&&s(t,"ima-ad-container-hidden"),this.currentAd.isLinear()?(this.adTrackingTimer=setInterval(v,250),s(t,"bumpable-ima-ad-container"),s(e,"vjs-hidden")):(a(t,"bumpable-ima-ad-container"),a(ion(){a(t,"ima-ad-container-hidden"),s(t,"bumpable-ima-ad-container")},1e3*this.currentAd.getMinSuggestedDuration()))}.bind(this);this.onAdComplete_=function(e){this.currentAd.isLinear()?clearInterval(this.adTrackingTimer):s(this.adContainerDiv,"bumpable-ima-ad-container")}.bind(this);var v=function(){var e,t=this.adsManager.getRemainingTime(),n=this.currentAd.getDuration(),i=0<(i=n-t)?i:0,a=!1,s=0;this.currentAd.getAdPodInfo()&&(a=!0,e=this.currentAd.getAdPodInfo().getAdPosition(),s=this.currentAd.getAdPodInfo().getTotalAds());var r=Math.floor(t/60),t=Math.floor(t%60);t.toString().length<2&&(t="0"+t),this.countdownDiv.innerHTML=this.settings.adLabel+(a&&1<s?" ("+e+" / "+s+"): ":": ")+r+":"+t,this.progressDiv.style.width=100*(i/n)+"%"}.bind(this);this.getPlayerWidth=function(){var e=getComputedStyle(this.player.el())||{};return parseInt(e.width,10)||this.player.width()}.bind(this),this.getPlayerHeight=function(){var e=getComputedStyle(this.player.el())||{};return parseInt(e.height,10)||this.player.height()vjs-hidden")}).bind(this),function(){s(this.controlsDiv,"vjs-hidden")}.bind(this);var y=function(){a(this.playP{a(this.playP),this.adPlaying=!1):(f(),this.adsManager.resume(),this.adPlaying=!0)}.bind(this),A=function(){var e=this.player.muted()?0:this.player.volume();this.adsManager&&this.adsManager.setVolume(e),0===e?(this.adMuted=!0,s(this.muteDiv,"vjs-vol-3"),a(this.muteDiv,"vjs-vol-0")):(this.adMuted=!1,a(this.muteDiv,"vjs-vol-3"),s(this.muteDiv,"vjs-vol-0"))}.bind(this),w=function(){thisscreen()?this.player.exitFullscreen():this.player.requestFullscreen()}.bind(this),T=function(){this.player.isFullscreen()?this.adsManager&&this.adsManager.resize(B.screen.width,B.screen.height,google.ima.ViewMode.FULLSCREEN):this.adsManager&&this.adsManager.resize(this.getPlayerWition(){this.poff("loadedmetadata",_),this.player.currentTime(0),this.player.play()}.bind(this),S=function(){this.adsActive=!1,this.adPlaying=!1,this.player.on("ended",this.localContentEndedListener),this.currentAd&&this.currentAd.isLinear()&&a(this.adContainerDiv,"ima-ad-container-hidden"),this.vjsControls.show(),this.player.ads.endLinearAdMode(),this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.contentPlayheadTracker.currentTime=0,this.adsManager&&(this.adsManager.destroy(),this.adsManager=null),this.adsLoader&&!this.contentComplete&&this.adsLoader.contentComplete(),this.contentComplete=!1,this.allAdsCompleted=!1}.bind(this);this.addEventListener=function(e,t){this.adsManager&&this.adsManager.addEventListener(e,t)}.bind(this),this.getAder.ima.setContentWithAdTag instead."),this.setContentWithAdTag(e,t,n)}.bind(this),this.setContentWithAdTag=function(e,t,n){S(),this.settings.adTagUrl=t||th,n){S(),this.settings.adsResponse=t||this.settings.adsResponse,C(e,n)}.bind(this),this.this.player.on("loadedmetadata",_):this.player.on("loadedmetadata",k)}.bind(this);this.addContentEndedListener=function(e){this.contentEndedListeners.push(e)}.bind(this),this.addContentAndAdsEndedListener=function(e){this.contentAndAdsEndedListeners.push(e)}.bind(this),this.setAdBreakReadyListive&&this.adPlaying&&(y(ve&&!this.adPlayihis.resizeChe||(this.conte!1,this.conteions.height=t,this.adsManager.resize(e,t,google.ima.ViewMode.NORMAL))}.bind(this);if(this.setShowCountdown=function(e){this.showCountdown=e,(this.showCountdown?s:a)(this.countdownDiv,"vjs-hidden")}.bind(this),this.VERSION="0.6.0",this.settings,this.controlPrefix,this.contentPlayer,this.showCountdown,this.autoPlayAdBreaks,this.vjsControls,this.adContainerDiv,this.controlsDiv,this.countdownDiv,this.seekBarDiv,this.progressDiv,this.playPauseDiv,this.muteDiv,this.sliderDiv,this.sliderLevelDiv,this.fullscreenDiv,this.adDisplayContainer,this.adDisplayContainerInitialized=!1,this.adsLoader,this.adsManager,this.adsRenderingSettings=null,this.adTagUrl,this.adsResponse,this.currentAd,this.contentTrackingTimer,this.adTrackingTimer,this.adsActive=!1,this.adPlaying=!1,this.adMuted=!1,this.contentComplete=!1,this.allAdsCompleted=!1,this.updateTimeIntervalHandle,this.seekCheckIntervalHandle,this.seekCheckInterval=1e3,this.resizeCheckIntervalHandle,this.resizeCheckInterval=250,this.seekThreshold=100,this.contentPlayheadTracker={currentTime:0,previousTime:0,seeking:!1,duration:0},this.adPlayheadTracker={currentTime:0,duration:0,isPod:!1,adPosition:0,totalAds:0},this.adsManagerDimensions={width:0,height:0},this.contentEndedListeners=[],this.contentAndAdsEndedListeners=[],this.adBreakReadyListener=void 0,this.contentSource="",this.localContentEndedListener=function(){for(var e in this.adsLoader&&!this.contentComplete&&(this.adsLoader.contentComplete(),this.contentComplete=!0),this.contentEndedListeners)this.contentEndedListeners[e]();if(this.allAdsCompleted)for(var e in this.contentAndAdsEndedListeners)this.contentAndAdsEndedListeners[e]();clearInterval(this.updateTimeIntervalHandle),clearInterval(this.seekCheckIntervalHandle),clearInterval(this.resizeCheckIntervalHandle),this.player.el()&&this.player.one("play",L)}.bind(this),this.playerDisposedListener=function(){this.contentEndedListeners,this.contentAndAdsEndedListeners=[],this.contentComplete=!0,this.player.off("ended",this.localContentEndedListener),this.player.ads.adTimeoutTimeout&&clearTimeout(this.player.ads.adTimeoutTimeout);var e,t=[this.updateTimeIntervalHandle,this.seekCheckIntervalHandle,this.adTrackingTimer,this.resizeCheckIntervalHandle];for(e in t){var n=t[e];n&&clearInterval(n)}this.adsManager&&(this.adsManager.destroy(),this.adsManager=null)}.bind(this),this.settings=N({},F,t||{}),this.settings.id){this.controlPrefix=this.settings.id+"_"||"",this.contentPlayer=O.getElementById(this.settings.id+"_html5_api"),this.contentPlayer.hasAttribute("autoplay")&&(this.settings.adWillAutoPlay=this.settings.adWillAutoPlay||!0),this.showCountdown=!0,0==this.settings.showCountdown&&(this.showCountdown=!1),this.autoPlayAdBreaks=!0,0==this.settings.autoPlayAdBreaks&&(this.autoPlayAdBreaks=!1),e.one("play",L),e.on("ended",this.localContentEndedListener),e.on("dispose",this.playerDisposedListener);var I={debug:this.settings.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout},t=N({},I,t.contribAdsSettings||{});if(e.ads(t),this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.settings.adsRenderingSettings)for(var M in this.settings.adsRenderingSettings)this.adsRenderingSettings[M]=this.settings.adsRenderingSettings[M];this.settings.locale&&google.ima.settings.setLocale(this.settings.locale),this.settings.disableFlashAds&&google.ima.settings.setDisableFlashAds(this.settings.disableFlashAds),this.settings.disableCustomPlaybackForIOS10Plus&&google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.settings.disableCustomPlaybackForIOS10Plus),o(),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),this.adsLoader.getSettings().setVpaidMode(this.settings.vpaidMode),0==this.settings.vpaidAllowed&&this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),this.settings.locale&&this.adsLoader.getSettings().setLocale(this.settings.locale),this.settings.numRedirects&&this.adsLoader.getSettings().setNumRedirects(this.settings.numRedirects),this.adsLoader.getSettings().setPlayerType("videojs-ima"),this.adsLoader.getSettings().setPlayerVersion(this.VERSION),this.adsLoader.getSettings().setAutoPlayAdBreaks(this.autoPlayAdBreaks),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,d,!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,c,on("readyforpreroll",n),e.ready(function(){e.on("fullscreenchange",T)});var R=!1,x="";this.changeAdsFullscreenMode=function(e){var t=/iPad|iPhone|iPod/.test(navigator.platform),n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),i=function(){R=!0,x=this.player.el_.getAttribute("style"),this.player.el_.setAttribute("style","position:fixed !important; padding-top:56.25% !important; width:100% !important; height:100% !important; z-index:100000 !important; top:0 !important; left:0  !important; margin: 0 !important;"),this.player.exitFullscreen()}.bind(this),a=function(){R=!1,this.player.el_.setAttribute("style",x),this.player.requestFullscreen()}.bind(this);e?t&&n&&this.player.isFullscreen()&&i():t&&n&&R&&a()}}else B.console.log("Error:egisterPlugin||e.plugin)("ima",function(e,t){this.ima=new n(this,e,t)})}),function(e){var i={image:"",destination:"#"};e.plugin("logobrand",function(e){var t=videojs.mergeOptions(i,e),n=document.createElement("a");n.id="vjs-logobrand-image-destination",n.href=t.destination,n.target="_blank";e=document.createElement("img");return e.id="vjs-logobrand-image",e.src=t.image,n.appendChild(e),this.el().appendChild(n),this.loadImage=function(e){doc(e){document.getElementById("vjs-logobrand-image-destination").href=e},this})}(window.videojs),function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).videojsOverlay=e()}(function(){return function i(a,s,r){function o(n,e){if(!s[n]){if(!a[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(l)return l(n,!0);t=new Error("Cannot find module '"+n+"'");throw t.code="MODULE_NOT_FOUND",t}t=s[n]={exports:{}};a[n][0].call(t.exports,function(e){var t=a[n][1][e];return o(t||e)},t,t.exports,i,a,s,r)}return s[n].exports}for(var l="function"==typeof require&&require,e=0;e<r.length;e++)o(r[e]);return o}({1:[function(e,t,n){!function(e){"undefined"!=typeof window?t.exports=window:void 0!==e?t.exports=e:"undefined"!=typeof self?t.exports=self:t.exports={}}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,n){t.exports=function(e){for(var t="",n=0;n<arguments.length;n++)t+=e[n]+(arguments[n+1]||"");return t.replace(/\s+/g," ").trim()}},{}],3:[function(v,y,f){!function(e){"use strict";Object.defineProperty(f,"__esModule",{value:!0});var t=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e};function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(e,t,n){for(var i=!0;i;){var a=e,s=t,r=n,i=!1;null===a&&(a=Function.prototype);var o=Object.getOwnPropertyDescriptor(a,s);if(void 0!==o){if("value"in o)return o.value;var l=o.get;return void 0===l?void 0:l.call(r)}a=Object.getPrototypeOf(a);if(null===a)return;e=a,t=s,n=r,i=!0,o=void 0}},s=l(['\n      created, listening to "','" for "start" and\n      "','" for "end"\n    '],['\n      created, listening to "','" for "start" and\n      "','" for "end"\n    ']),r=l(["\n          hiding; "," is an integer and overlay should not show at this time\n        "],["\n          hiding; "," is an integer and overlay should not show at this time\n        "]),o=l(["\n          hiding; show point (",") is before now (",") and end\n          point (",") is an event\n        "],["\n          hiding; show point (",") is before now (",") and end\n          point (",") is anect.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var d=n(v("tsmlj")),c=n("undefined"!=typeof window?window.videojs:void 0!==e?e.videojs:null),u=n(v("global/window")),h={align:"top-left",class:"",content:"This overlay will show up while the video is playing",debug:!1,showBackground:!0,attachToControlBar:!1,overlays:[{setpeof e&&e==e},g=function(e){return"string"==typeof e&&/^\S+$/.test(e)},t=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(m,e),t(m,[{key:"createEl",value:function(){var e=this.options_,t=e.content,n=e.showBackground?"vjs-overlay-background":"",n=c.default.createEl("div",{className:"\n        vjs-overlay\n        vjs-overlay-"+e.align+"\n        "+e.class+"\n        "+n+"\n        vjs-hidden\n      "});return"string"==typeof t?n.innerHTML=t:t instanceof u.default.DocumentFragment?n.appendChild(t):c.default.appendContent(n,t),n}},{key:"debug",value:function(){if(this.options_.debug){for(var e=c.default.log,t=e,n=arguments.length,i=Array(n),a=0;a<n;a++)i[a]=arguments[a];(t=e.hasOwnProperty(i[0])&&"function"==typeof e[i[0]]?e[i.shift()]:t).apply(void 0,["overlay#"+this.id()+": "].concat(i))}}},{key:"hide",value:function(){return a(Object.getPrototypeOf(m.prototype),"hide",this).call(this),this.debug("hidden"),this.debug('bound `startListener_` to "'+this.startEvent_+'"'),this.endEvent_&&(this.debug('unbound `endListener_` from "'+this.endEvent_+'"'),this.off(this.player(),this.endEvent_,this.endListener_)),this.on(this.player(),this.startEvent_,this.startListener_),this}},{key:"shouldHide_",value:function(e,t){var n=this.options_.end;return p(n)?n<=e:n===t}},{key:"show",value:function(){return a(Object.getPrototypeOf(m.prototype),"show",this).call(this),this.off(this.player(),this.startEvent_,this.startListener_),this.debug("shown"),this.debug('unbound `startListener_` from "'+this.startEvent_+'"'),this.endEvent_&&(this.debug('bound `endListener_` to "'+this.endEvent_+'"'),this.on(this.player(),this.endEvent_,this.endListener_)),this}},{key:"shouldShow_",value:function(e,t){var n=this.options_.start,i=this.options_.end;return p(n)?p(i)?n<=e&&e<i:this.hasShownSinceSeek_?Math.floor(e)===n:(this.hasShownSinceSeek_=!0,n<=e):n===t}},{key:"startListener_",value:function(e){var t=this.player().currentTimet=this.player().currentTime();this.shouldHide_(t,e.type)&&this.hide()}},{key:"rewindListener_",value:function(e){var t=this.player().currentTime(),n=this.previousTime_,i=this.options_.start,a=this.options_.end;t<n&&(this.debug("rewind detected"),p(a)&&!this.shouldShow_(t)?(this.debug((0,d.default)(r,a)),this.hasShownSinceSeek_=!1,this.hide()):g(a)&&t<i&&(this.debug((0,d.default)(o,i,t,a)),this.hasShownSinceSeek_=!1,this.hide())),this.previousTime_=t}}]),m);function m(e,t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),a(Object.getPrototypeOf(m)throw new Error('invalid "start" option; expected number or string')}),["endL.forEach(function(t){n[t]=function(e){return m.prototype[t].call(n,e)}}),"timeupdate"===this.startEvent_&&this.on(e,"timeupdate",this.rewindListener_),this.debug((0,d.default)(s,this.startEvent_,this.endEvent_||"nothing")),this.hide()}c.default.registerComponent("Overlay",t);t=function(e){var t=this,n=c.default.m.removeChild(e),t.controlBar&&t.controlBar.removeChild(e),e.dispose()});e=n.overlays;delete n.overlays,this.overlays_=e.map(function(e){e=c.default.mergeOptions(n,e);return(e.attachToControlBar&&t.controlBar&&-1!==e.align.indexOf("bottom")?t.controlBar:t).addChild("overlay",e)})};t.VERSION="1.1.0",c.default.plugin("overlay",t),f.default=t,y.exports=f.default}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"global/window":1,tsmlj:2}]},{},[3])(3)}),function(){"use strict";var c,u,t,h,p,a,s,r,g,e=null;function m(e,t,n,i){,t,n):e.src(t.map(function(e){return{src:e.src,type:e.type,res:e.res}}))}e=void 0===window.videojs&&"function"==typeof require?require("video.js"):window.videojs,c=window,t={},h={},p={},a=(u=e).getComponent("MenuItem"),s=u.extend(a,{constructor:function(e,t,n,i){this.onClickListener=n,this.label=i,a.call(this,e,t),this.src=t.src,this.on("click",this.onClick),this.on("touchstart",this.onClick),t.initialySelected&&(this.showAbel:function(){this.label&&(this.label.innerHTML=this.options_.label)},onClick:function(e){this.onClickListener(this);var t=this.player_.currentTime(),n=this.player_.paused();this.showAsLabel(),this.addClass("vjs-selected"),n||this.player_.bigPlayButton.hide(),"function"!=typeof e&&"function"==typeof this.options_.customSourcePicker&&(e=this.options_.customSourcePicker);var i="loadeddata";"Youtube"!==this.player_.techName_&&"none"===this.player_.preload()&&"Flash"!==this.player_.techName_&&(i="timeupdate"),m(this.player_,this.src,this.options_.label,e).one(i,function(){this.player_.currentTime(t),this.player_.handleTechSeeked_(),n||this.player_.play().handleTechSeeked_(),this.player_.trigger("resolutionchange")})}}),r=u.getComponent("MenuButton"),g=u.extend(r,{constructor:function(e,t,n,i){this.sources=t.sources,this.label=i,this.label.innerHTML=t.initialySelectedLabel,r.call(this,e,t,n),this.controlText("Quality"),n.dynamicLabel?this.el().appendChild(i):(i=document.createElement("span"),u.addClass(i,"vjs-resolution-button-staticlabel")(t){n.map(function(e){e.selected(e===t),e.removeClass("vjs-selected")})}var t,n=[],i=this.sources&&this.sources.label||{};for(t in i)i.hasOwnProperty(t)&&(n.push(new s(this.player_,{label:t,src:i[t],initialySelected:t===this.options_.initialySelectedLabel,customSourcePicker:this.options_.customSourcePicker},e,this.label)),p[t]=n[n.length-1]);return n}}),e=function(e){==e[t][n[t]]&&(e[t][n[t]]=[])}function d(e,t,n){e[t][n[t]].push(n)}u.addClass(s,"vjs-resolution-button-label"),n.updateSrc=function(e){if(!e)return n.src();n.controlBar.resolutionSwitcher&&(n.controlBar.resolutionSwitcher.dispose(),delete n.controlBar.resolutionSwitcher),e=e.sort(i);var t=function(e,t){c.console.log("RESOLUTIONS",a,e,t);var n=a.default,i="";"high"===n?(n=t[0].res,i=t[0].label):"low"!==n&&null!=n&&e.label[n]?e.label[n]&&(i=e.label[n][0].label):(n=t[t.length-1].res,i=t[t.length-1].label);return{res:n,label:i,sources:e.label[n]}}(r=o(e),e),e=new g(n,{sources:r,initialySelectedLabel:t.label,initialySelectedRes:t.res,customSourcePicker:a.customSourcePicker},a,s);return u.addClass(e.el(),"vjs-icon-cog"),n.controlBar.resolutionSwitcher=n.controlBar.el_.insertBefore(e.el_,n.controlBar.getsolutionSwitcher.dispose=function(){this.parentNode.removeChild(this)},m(n,t.sources,t.label)},n.currentResolution=function(e,t){return null==e?h:(null!=p[e]&&p[e].onClick(t),n)},n.getGroupedSrc=function(){return r},n.ready(function(){var i;1<n.options_.sources.length&&n.updateSrc(n.options_.sources),"Youtube"===n.techName_&&((i=n).tech_.ytPlayer.setPlaybackQuality("default"),i.tech_.ytPlayer.addEventListener("onPlaybackQualityChange",function(){i.trigger("resolutionchange")}),i.one("play",function(){var e=i.tech_.ytPlayer.getAvailableQualityLevels(),t={highres:{res:1080,label:"1080",yt:"highres"},hd1080:{res:1080,label:"1080",yt:"hd1080"},hd720:{res:720,label:"720",yt:"hd720"},large:{res:480,label:"480",yt:"large"},medium:{res:360,label:"360",yt:"medium"},small:{res:240,label:"240",yt:"small"},tiny:{res:144,labc().src,type:i.src().type,label:t[e].label,res:t[e].res,_yt:t[e].yt})});(r=o(n)).label.auto;e=new g(i,{sources:r,initialySelectedLabel:"auto",initialySelectedRes:0,customSourcePicker:function(e,t,n){return i.tech_.ytPlayer.setPlaybackQuality(t[0]._yt),i}},a,s);e.el().classList.add("vjs-icon-cog"),i.controlBar.resolutionSwitcher=i.controlBar.addChild(e)}))})},u.plugin("videoJsResolutionSwitcher",e)}();var DROPPED_PERCENTAGE_FORBID=.15,GOOD_SAMPLE_SIZE=375;function shakaBandwithSelectorPlugin(e){"use strict";console&&console.log("Shaka Plugin");var a,l=this;function d(t,n){if(void 0!==t){var e="innerText"in t?"innerText":"textContent";try{t[e]=n}catch(e){t.setAttribute("innerText",n)}}}l.getCurrentBitrate=function(){var e,t=null,n=a.getVariantTracks();for(e in n){var i=n[e];if(i.active){t=i;break}}return{bitrate:t.bandwidth,width:t.width,height:t.height}},l.getBitrateLevels=function(){var e,t=l.shaka.getVariantTracks(),n=l.shaka.getAudioLanguages(),i=l.currentLanguage||n[0],a=[];for(e in t){var s=t[e];s.language===i&&a.push(s)}return a.sort(function(e,t){return e.bandwidth-t.bandwidth}),a},l.setBitrateLevel=function(e){e<0?a.configure({abr:{enabled:!0,restrictions:{maxBandwidth:1/0}}}):(e=l.getBitrateLevels()[e],a.configure({abr:{enabled:!1,restrictions:{maxBandwidth:1/0}}}),a.selectVariantTrack(e,!0)),setTimeout(function(){l.setAudioTrack(l.activeAudioTrackIndex)},100)},l.setMaxBitrateLevel=function(e){-1<e?(e=l.getBitrateLevels()[e],a.configure({abr:{enabled:!0,restrictions:{maxBandwidth:e.bandwidth}}})):a.co/0}}}),setTimeout(f(l.activeAudioTrackIndex)},100)},l.on("ready",function(){a=this.shaka});function t(){if(a){var e=l.player_;e.options_.playbackRates=[];var t=e.el();t.className+=" vjs-shaka";var n=document.createElement("div");n.id="bandwidth-selector",n.setAttribute("class","vjs-shaka-button vjs-menu-button vjs-menu-button-popup vjs-control vjs-icon-cog");var i=document.createElement("div");i.setAttribute("class","vjs-menu"),n.appendChild(i);var s=document.createElement("ul");s.setAttribute("class","vjs-menu-content"),i.appendChild(s);a.getVariantTracks();var r=l.getBitrateLevels(),e=document.createElement("li");e.setAttribute("class","vjs-menu-item vjs-selected");i=document.createElement("span");d(i,"Otomatik"),e.appendChild(i),e.addEventListener("click",function(){var e=s.querySelector(".vjs-selected");e&&(e.className=e.className.replace("vjs-selected","")),this.className=this.className+" vjs-selected",l.setBitrateLevel(-1)}),s.appendChild(e);for(var o=0;o<r.length;++o)!function(){r[o];var t=o,e=(r[o].bandwidth/1e3).toFixed(0),n=r[o].height,i=document.createElement("li");i.setAttribute("class","vjs-menu-item"),i.setAttribute("data-val",e);var a=document.createElement("span");d(a,n+"p ("+e+"k)"),i.appendChild(a),i.addEventListener("click",function(){var e=s.querySelector(".vjs-selected");e&&(e.className=e.className.replace("vjs-selected","")),this.className=this.className+" vjs-selected",l.setBitrateLevel(t)}),s.appendChild(i)}();e=t.parentNode.querySelectorAll(".vjs-control-bar")[0],t=t.parentNode.querySelector(".e(n,t)}}l.on("loadedmetadata",function(){e.showBandwidthSelector&&t()})}shaka.abr.DropFrameEstimator=function(){this.player_=null,this.switch_=null,this.enabled_=!1,this.bandwidthEstimator_=new shaka.abr.EwmaBandwidthEstimator,this.variants_=[],this.startupComplete_=!1,this.lastTimeChosenMs_=null,this.config_=null,this_=null,this.enabled_=!1,this.variants_=[],this.lastTimeChosenMs_=null},shaka.abr.DropFrameEstimator.prototype.init=function(e){this.switch_=e},shaka.abr.DropFrameEstimator.prototype.chooseVariant=function(){var e=shaka.abr.DropFrameEstimator.filterAndSortVariants_(this.config_.restrictions,this.variants_),t=this.bandwidthEstimator_.getBandwidthEstimate(this.config_.defaultBandwidthEstimate);if(this.variants_.length&&!e.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.RESTRICTIONS_CANNOT_BE_MET);for(var n=e[0]||null,i=0;i<e.length;++i){var a=e[i],s=e[i+1]||{bandwidth:1/0},r=a.bandwidth/this.config_.bandwidthDowngradeTarget,s=s.bandwidth/this.config_.bandwidthUpgradeTarget;r<=t&&t<=s&&(n=a)}return this.lastTimeChosenMs_=Date.now(),n},shaka.abr.DropFrameEstimator.prototype.enable=function(){this.enabled_=!0},shaka.abr.DropFrameEstimator.prototype.disable=function(){this.enabled_=!1},shaka.abr.DropFrameEstimator.prototype.segmentDownloaded=function(e,t){this.bandwidthEstimator_.sample(e,t),null!=this.lastTimeChosenMs_&&this.enabled_&&this.suggestSstimator_.getBandwidthEstimate(this.config_.defaultBandwidthEstimate)},shaka.abr.DropFrameEstimator.prototype.setVariants=function(e){this.variants_=e},shaka.abr.DropFrameEstimator.prototype.configure=function(e){this.config_=e},shaka.abr.DropFrameEstimator.prototype.suggestStreams_=function(){if(this.startupComplete_){if(Date.now()-this.lastTimeChosenMs_<1e3*this.config_.switchInterval)return}else{if(!this.bandwidthEstimator_.hasGoodEstimate())return;this.startupComplete_=!0}var e=this.chooseVariant(),t=this.bandwidthEstimator_.getBandwidthEstimate(this.config_.defaultBandwidthEstimate);Math.round(t/1e3);this.switch_(e)},shaka.abr.DropFrameEstimator.filterAndSortVariants_=function(e,t){var t=t.sort(function(e,t){return e.bandwidth-t.bandwidth}),n=t.length;try{for(var i in window.videojs.players){var a=window.videojs.players[i];this.player_=a}var s=this.player_.shaka.getStats(),r=s.droppedFrames,o=r+s.decodedFrames;this.droppedFramesHistory_.push({droppedFrames:r,totalFrames:o});for(var l=1;l<this.droppedFramesHistory_.length;l++)if(this.droppedFramesHistory_[l]&&(r=this.droppedFramesHistory_[l].droppedFrames,o=this.droppedFramesHistory_[l].totalFrames,console.log(r,o),GOOD_SAMPLE_SIZE<o&&DROPPED_PERCENTAGE_FORBID<r/o)){n=l-1,log("DroppedFramesRule, index: "+n+" Dropped Frames: "+r+" Total Frames: "+o);break}}catch(e){}return console.log("MAX INDEX",n),t.slice(0,n)},function(l,d){"use strict";var e;function n(e,t){var n=t.options_,i=t.el(),a=n.source;delete n.source,this.player=l(n.playerId),d.polyfill.installAll(),i.setAttribute("crossorigin","anonymous"),this.shakaPlayer=new d.Player(i),this.player.shaka=this.shakaPlayer;var s,r,o,t=function(e){for(var t,n,i=1;i<arguments.length;i++)for(n in t=arguments[i])t.hasOwnProperty(n)&&(e[n]=t[n]);return e}({},t={drm:{servers:{"com.widevine.alpha":a["proxy-url"],"com.microsoft.playready":a["rightsmanager-url"]}}},n.shakaConfig||{});this.shakaPlayer.configure(t),this.shakaPlayer.setTextTrackVisibility(!0),this.shakaPlayer.load(a.src),i.addEventListener("error",function(e){e=e.currentTarget.error;console.et be played",e)}),this.dispose=function(){this.player.shaka.destroy()},s=this.player,o=[],setInterval(function(){try{var e=s.getBitrateLevels();r=r||e.length;var t=s.shaka.getStats(),n=t.droppedFrames,i=n+t.decodedFrames;o.push({droppedFrames:n,totalFrames:i});for(var a=1;a<o.length;a++)if(o[a]&&.2<(n=(n=o[a].droppedFrames-o[a-1].droppedFrames)<0?0:n)/(i=(i=o[a].totalFrames-o[a-1].totalFrames)<0?0:i)){(r-=1)<=1&&(r=1),console.log("DroppedFramesRule, index: "+r+" Dropped Frames: "+n+" Total Frames: "+i),s.shaka.setMaxHardwareResolution(e[r-1].width,e[r-1].height),s.setBitrateLevel(r),s.setBitrateLevel(-1)\/dash+xml$/i.test(e.src)pe:function(e){return/^application\/dash+xml$/i.test(e)?"probably":""}},window.MediaSource&&l.getComponent("Html5").registerSourceHandler(e,0)):console.error("Missing videojs/shaka libraries")}(window.videojs,window.shaka);var thumbnailsPlugin=function(e){var d,c,u,h,s,p,g,r=function(){var e,t,n,i=Array.prototype.slice.call(arguments),a=i.shift()||{};for(e in i)for(n in t=i[e])t.hasOwnProperty(n)&&("object"==typeof t[n]?a[n]=r(a[n],t[n]):a[n]=t[n]);return a},m=function(e){return"HTML"!==e.nodeName&&"static"===(t=e,function(e){return(window.getComputedStyle?window.getComputedStyle(t,n):t.currentStyle)[e]}("position"))?m(e.offsetParent):e;var t,n},v=r({},{width:0,height:0},e),o=this;o.on("ready",function(){var e,t,n,a=o.textTracks().length;if(0!==a){for(i=0;i<a;){if("metadata"===o.textTracks()[i].kind){(p=o.textTracks()[i]).mode="hidden";break}i++}-1!==navigator.userAgent.toLowerCase().indexOf("android")&&(t=function(){e.addClass("fake-active")},n=function(){e.removeClass("fake-active")},(e=o.controlBar.progressControl).on("touchstart",t),e.on("touchend",n),e.on("touchcancel",n)),(d=document.createElement("div")).className="vjs-thumbnail-holder",c=document.createElement("img"),d.appendChild(c),c.className="vjs-thumbnail",h=o.duration(),o.(e){h=o.duration()}),o.on("loadedmetadata",function(e){h=o.duration()}),(u=o.controlBar.progressControl).el().appendChild(d),s=function(e){var t,n=(window.pageXOffset?{x:window.pageXOffset,y:window.pageYOffset}:{x:document.documentElement.scrollLeft,y:document.documentElement.scrollTop}).x,a=m(u.el()).getBoundingClientRect(),s=(a.width||a.right)+n,a=e.pageX,a=(a=e.changedTouches?e.changedTouches[0].pageX:a)||e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;a-=m(u.el()).getBoundingClientRect().left+n;var r=Math.floor(a/u.width()*h),o=(g=p.cues?p.cues:g).length;for(i=0;i<o;){var l=g[i];if(l.startTime<=r&&l.endTime>=r){t=function(e){var t,n=e.indexOf("#");if(-1===n)return{src:e,w:0,h:0,x:0,y:0};if(t=e.substring(0,n),"xywh="!==(n=e.substring(n+1)).substring(0,5))return{src:t,w:0,h:0,x:0,y:0};n=n.substring(5).split(",");return{src:t,w:parseInt(n[2]),h:parseInt(n[3]),x:parseInt(n[0]),y:parseInt(n[1])}}(l.text);break}i++}void 0!==t&&(t.src&&c.src!=t.src&&(c.src=t.src),0===t.w&&(t.w=v.width),0===t.h&&(t.h=v.height),d.style.width==t.w&&d.style.height==t.h||(d.style.width=t.w+"px",d.style.height=t.h+"px"),c.style.left=-t.x+"px",c.style.top=-t.y+"px",c.style.clip="rect("+t.y+"px,"+(t.w+t.x)+"px,"+(t.y+t.h)+"px,"+t.x+"px)",s<a+(n=(e=t.w)/2)?a=s-e:a<n?a=ousemove",s),u.on("touchmove",s),s=function(e){d.style.left="-1000px"},u.on("mouseout",s),u.on("touchcancel",s),u.on("touchend",s),o.on("userinactive",s)}})};
//# sourceMappingURL=docs.min.js.map