   /*! For license information please see webalert-notification.js.LICENSE.txt */
window.UOLPushWebalert=(()=>{var e={228:858:646:926:575:913:713:860:884:521:e=>{e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},206:38:319:379:757:608:(e,t,n)=>{"use strict";n.r(t),n.d(t,{isUserSubscribed:()=>Un,subscribeUserTag:()=>Vn,unsubscribeUserTag:()=>qn});var r=n(713),a=n.n(r),i=n(319),o=n.n(i),s=n(757),c=n.n(s),u=n(926),l=n.n(u),d=n(575),p=n.n(d),f=n(913),h=n.n(f);const g=m={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFEHAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArrayencodeStringdecodeStringdecodeStringToByteArrayinit_,b= S=/\{\$([^}]+)}/g;t T="[DEFAULT]";class A{Component(){return this.component}ar C;!C||(C={}));const D={debug:C.DEBUG,verbose:C.VERBOSE,info:C.INFO,warn:C.WARN,error:C.ERROR,silent:C.SILENT},N=C.INFO,L={[C.DEBUG]:"log",[C.VERBOSE]:"log",[C.INFO]:"info",[C.WARN]:"warn",[C.ERROR]:"error"},j=let B,F;const R=new WeakMap,U=new WeakMap,V=new WeakMap,q=new WeakMap,W=new WeakMap;let z={getset:has:;function H(e){if(e instanceof IDBRequest)return e);if(q.has(e))return q.get(e);const t=function(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(F||(F=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?(e instanceof IDBTransaction&&e),n=e,(B||(B=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(()?new Proxy(e,z):e);var t,n}(e);return t!==e&&(q.set(e,t),W.set(t,e)),t}const G=nst J=["get","getKey","getAll","getAllKeys","count"],Q=["put","add","delete","clear"],Z=new Map;ar X;X=z,z={...X,get:has:;onst te="@firebase/app",ne="0.7.25",re=new "@firebase/app"),ae={[te]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ie=new Map,oe=new Map;st le=new k("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});unction pe(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:"[DEFAULT]",automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw le.create("bad-app-name",{appName:String(r)});const a=ie.get(r);if(a){if(x(e,a.options)&&x(n,a.config))return a;throw le.create("duplicate-app",{appName:r})}const i=new E(r);for(const e of oe.values())i.addComponent(e);const o=new de(e,n,i);return ie.set(r,o),o}onst he="firebase-heartbeat-store";let ge=null;function me(){return ge||(ge=$("firebase-heartbeat-database",1,{upgrade:).catch(()),ge}s _e{ync read(){return await this._canUseIndexedDBPromise&&await this.app)||{heartbeats:[]}}(new I("platform-logger",(e=>new ee(e)),"PRIVATE")),ce(new I("heartbeat",(,"PRIVATE")),fe(te,ne,""),fe(te,ne,"esm2017"),fe("fire-js",""),fe("firebase","9.8.2","app");const Se="@firebase/installations",xe="0.5.9",Oe="w:0.5.9",Me=new k("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});unction Te({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`} Ne=/^[cdef][\w-]{21}$/;nst Be=new Map;t Ue=null;const Ve="firebase-installations-store";let qe=null;function We(){return qe||(qe=$("firebase-installations-database",1,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(Ve)}}})),qe}nc function $e(e){let t;const n=await Ge(e.appConfig,(n=>{const r=n),a=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(Me.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const r=Te(e),a=Pe(e),i=t.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const o={fid:n,authVersion:"FIS_v2",appId:e.appId,sdkVersion:Oe},s={method:"POST",headers:a,body:JSON.stringify(o)},c=await Ce((()=>fetch(r,s)));if(c.ok){const e=await c.json();return{fid:e.fid||n,registrationStatus:2,refreshToken:e.refreshToken,authToken:Ae(e.authToken)}}throw await Ee("Create Installation",c)}(e,t);return ze(e.appConfig,n)}catch(n){throw Ie(n)&&409===n.customData.serverCode?await He(e.appConfig):await ze(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Ke(e)}:{installationEntry:t}}(e,r);return t=a.registrationPromise,a.installationEntry}));return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}nc function Ze(e,t=!1){let n;const r=await Ge(e.appConfig,(r=>{if(!Xe(r))throw Me.create("not-registered");const a=r.authToken;if(!t&&2===(i=a).requestStatus&&!i))return r;var i;if(1===a.requestStatus)return n=e,t),r;{if(!navigator.onLine)throw Me.create("app-offline");const t=r);return n=async function(e,t){try{const n=await async function({appConfig:e,heartbeatServiceProvider:t},n){const r=e,n),a=function(e,{refreshToken:t}){const n=Pe(e);return n.append("Authorization",t)),n}(e,n),i=t.getImmediate({optional:!0});if(i){const e=await i.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const o={installation:{sdkVersion:Oe,appId:e.appId}},s={method:"POST",headers:a,body:JSON.stringify(o)},c=await Ce(();if(c.ok)return Ae(await c.json());throw await Ee("Generate Auth Token",c)}(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await ze(e.appConfig,r),n}catch(n){if(!Ie(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await ze(e.appConfig,n)}else await He(e.appConfig);throw n}}(e,t),t}}));return n?await n:r.authToken}function Ye(e){return Ge(e,(e=>{if(!Xe(e))throw Me.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t}))}unction et(e){return Me.create("missing-app-config-values",{valueName:e})}const tt="installations";ce(new I(tt,(e=>{const t=e.getProvider("app").getImmediate();return{app:t,appConfig:t),heartbeatServiceProvider:ue(t,"heartbeat"),_delete:}),"PUBLIC")),ce(new I("installations-internal",(e=>{const t=ue(e.getProvider("app").getImmediate(),tt).getImmediate();return{getId:getToken:}),"PRIVATE")),fe(Se,xe),fe(Se,xe,"esm2017");const nt="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";var rt,at;t||(rt={})),at||(at={}));const st="fcm_token_details_db",ct="fcm_token_object_Store",ut="firebase-messaging-store";let lt=null;function dt(){return lt||(lt=$("firebase-messaging-database",1,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(ut)}}})),lt}async function pt(e){const t=ht(e),n=await dt(),r=await n.transaction(ut).objectStore(ut).get(t);if(r)return r;{const t=await async function(e){if("databases"in indexedDB&&!(await indexedDB.databases()).map(().includes(st))return null;let t=null;return(await $(st,5,{upgrade:)).close(),await K(st),await K("fcm_vapid_details_db"),await K("undefined"),t)?t:null}(e.appConfig.senderId);if(t)return await ft(e,t),t}}nst gt=new k("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function mt(e,t){const n={method:"DELETE",headers:await wt(e)};try{const r=await fetch(`${bt(e.appConfig)}/${t}`,n),a=await r.json();if(a.error){const e=a.error.message;throw gt.create("token-unsubscribe-failed",{errorInfo:e})}}catch(e){throw gt.create("token-unsubscribe-failed",{errorInfo:e})}}nc function yt(e,t){const n={token:await async function(e,t){const n=await wt(e),r=vt(t),a={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{const t=await fetch(bt(e.appConfig),a);i=await t.json()}catch(e){throw gt.create("token-subscribe-failed",{errorInfo:e})}if(i.error){const e=i.error.message;throw gt.create("token-subscribe-failed",{errorInfo:e})}if(!i.token)throw gt.create("token-subscribe-no-token");return i.token}(e,t),createTime:Date.now(),subscriptionOptions:t};return await ft(e,n),n.token}function _t(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return t,e),t,e),t,e),t}("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),kt("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");sync function Ot(e,t){if(!navigator)throw gt.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw gt.create("permission-blocked");return await e,null==t?void 0:t.vapidKey),await async function(e,t){if(t||e.swRegistration||await async function(e){try{e.swRegistration=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),e.swRegistration.update().catch((()=>{}))}catch(e){throw gt.create("failed-service-worker-registration",{browserErrorMessage:e.message})}}(e),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw gt.create("invalid-sw-registration");e.swRegistration=t}}(e,null==t?void 0:t.serviceWorkerRegistration),async function(e){const t=await async function(e,t){return await e.pushManager.getSubscription()||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ot(t)})}(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:it(t.getKey("auth")),p256dh:it(t.getKey("p256dh"))},r=await pt(e.firebaseDependencies);if(r){if(r.subscriptionOptions,n))return Date.now()>=r.createTime+6048e5?async function(e,t){try{const n=await async function(e,t){const n=await wt(e),r=vt(t.subscriptionOptions),a={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{const n=await fetch(`${bt(e.appConfig)}/${t.token}`,a);i=await n.json()}catch(e){throw gt.create("token-update-failed",{errorInfo:e})}if(i.error){const e=i.error.message;throw gt.create("token-update-failed",{errorInfo:e})}if(!i.token)throw gt.create("token-update-no-token");return i.token}(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return await ft(e.firebaseDependencies,r),n}catch(t){throw await e),t}}(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await mt(e.firebaseDependencies,r.token)}catch(e){console.warn(e)}return yt(e.firebaseDependencies,n)}return yt(e.firebaseDependencies,n)}(e)}const Mt="@firebase/messaging",It="0.9.13";function Tt(e=)){return async function(){try{await y()}catch(e){return!1}return"undefined"!=typeof window&&v()&&!("undefined"==typeof navigator||!navigator.cookieEnabled)&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}().then((,(),ue(M(e),"messaging").getImmediate()}e(new I("messaging",(e=>{const t=new xt(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",(e=>async function(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===at.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(_t(n)):e.onMessageHandler.next(_t(n)));const r=n.data;var a;"object"==typeof(a=r)&&a&&"google.c.a.c_id"in a&&"1"===r["google.c.a.e"]&&await async function(e,t,n){const r=t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n["google.c.a.c_id"],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}(e,n.messageType,r)}(t,e))),t}),"PUBLIC")),ce(new I("messaging-internal",(,"PRIVATE")),fe(Mt,It),fe(Mt,It,"esm2017");var Et=n(81),Pt=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console.log).call.apply(e,[console,"[webalert-notification:api]"].concat(n))},Ct=function(){ar t,n,r,a,i,o,s,u;return h()(e,[{key:"subscribeCampaign",value:(u=l()(c().mark((function e(t,n){var r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pt('subiscrbe campaign "'.concat(n,'"')),r=(0,Et.getGaId)(),e.next=4,fetch("".concat(this.uri,"/campaign"),{method:"POST",body:JSON.stringify({campaign:n,gaID:r,subscriptionID:t}),credentials:"omit",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"}});case 4:return a=e.sent,e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return u.apply(this,arguments)})},{key:"unsubscribeCampaign",value:(s=l()(c().mark((function e(t,n){var r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pt('unsubiscrbe campaign "'.concat(n,'"')),r=(0,Et.getGaId)(),e.next=4,fetch("".concat(this.uri,"/campaign"),{method:"DELETE",body:JSON.stringify({campaign:n,gaID:r,subscriptionID:t}),credentials:"omit",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"}});case 4:return a=e.sent,e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return s.apply(this,arguments)})},{key:"updateToken",value:(o=l()(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pt("update token"),e.next=3,fetch("".concat(this.uri,"/subscribe?id=").concat(t),{method:"PUT",body:JSON.stringify({subscriptionID:n}),credentials:"omit",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"}});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return o.apply(this,arguments)})},{key:"insertToken",value:(i=l()(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pt("insert token"),e.next=3,fetch("".concat(this.uri,"/subscribe"),{method:"POST",body:JSON.stringify(t),credentials:"omit",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"deleteToken",value:(a=l()(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pt("delete token"),e.prev=1,e.next=4,fetch("".concat(this.uri,"/subscribe?id=").concat(t),{method:"DELETE",credentials:"omit",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"}});case 4:return n=e.sent,e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",{code:500});case 13:case"end":return e.stop()}}),e,this,[[1,10]])}))),function(e){return a.apply(this,arguments)})},{key:"getUserSubscriptions",value:(r=l()(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pt("getting user subscriptions"),e.next=3,fetch("".concat(this.uri,"/userid?id=").concat(t),{method:"GET",credentials:"omit",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"}});case 3:return n=e.sent,e.next=6,n.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"getUserTags",value:(n=l()(c().mark((function e(t,n){var r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pt("getting user tags"),r=n?"uolID=".concat(n):"gaID=".concat(t),e.next=4,fetch("".concat(this.uri,"/usertags?").concat(r),{method:"GET",credentials:"omit",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"}});case 4:return a=e.sent,e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return n.apply(this,arguments)})},{key:"replicateUOLID",value:(t=l()(c().mark((function e(t,n){var r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pt("replicate uol id for any subscriptions"),e.next=3,fetch("".concat(this.uri,"/replicateid?uolID=").concat(t,"&gaID=").concat(n),{method:"POST",credentials:"omit",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"}});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)})}]),e}(),Dt=/iPhone/i,Nt=/iPod/i,Lt=/iPad/i,jt=/\biOS-universal(?:.+)Mac\b/i,Bt=/\bAndroid(?:.+)Mobile\b/i,Ft=/Android/i,Rt=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Ut=/Silk/i,Vt=/Windows Phone/i,qt=/\bWindows(?:.+)ARM\b/i,Wt=/BlackBerry/i,zt=/BB10/i,Ht=/Opera Mini/i,Gt=/\b(CriOS|Chrome)(?:.+)Mobile/i,$t=/Mobile(?:.+)Firefox\b/i,Kt=ar Qt=n(81),Zt=Qt.hasCampaignCookie,Yt=Qt.isValidTagPage,Xt=Qt.isValidUserTag,en=Qt.isValidURL;const tn=[{type:"horoscope",campaign:"campaign-horoscope",layout:"custom",text:"Você quer receber notificações para não perder previsões e dicas do seu signo?",channel:"www.uol.com.br",testUrl:/(www\.uol\.com\.br\/universa\/?)|(www\.uol\.com\.br\/?$)/,denyCollections:["Violência contra a mulher"],validate:function(e){var t=e.sc;if(en(this.testUrl)&&!this.denyCollections.includes(t.collection)){var n=Zt("meuSigno")||location.href.replace(/.*\/universa\/horoscopo\/(.+?)\/.*/,"$1");if(n&&this.group.hasOwnProperty(n))return Object.assign({},this,this.group[n])}return!1},group:{aries:{name:"aries",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/signos/aries.jpg"},touro:{name:"touro",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/signos/touro.jpg"},gemeos:{name:"gemeos",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/signos/gemeos.jpg"},cancer:{name:"cancer",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/signos/cancer.jpg"},leao:{name:"leao",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/signos/leao.jpg"},virgem:{name:"virgem",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/signos/virgem.jpg"},libra:{name:"libra",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/signos/libra.jpg"},escorpiao:{name:"escorpiao",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/signos/escorpiao.jpg"},sagitario:{name:"sagitario",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/signos/sagitario.jpg"},capricornio:{name:"capricornio",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/signos/capricornio.jpg"},aquario:{name:"aquario",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/signos/aquario.jpg"},peixes:{name:"peixes",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/signos/peixes.jpg"}}},{type:"teams",name:"atletico-pr",campaign:"campaign-teams",layout:"custom",text:"Você quer receber notificações em tempo real para não perder nenhuma notícia do seu time?",channel:"www.uol.com.br",testUrl:/(www\.uol\.com\.br\/esporte\/?)|(www\.uol\.com\.br\/?$)/,validate:function(){if(en(this.testUrl)){var e=Zt("meuTime"),t=!!window.Collection&&Collection.search.tags.split(",")[0];if(e&&this.group.hasOwnProperty(e))return Object.assign({},this,this.group[e]);if(t){var n=Object.values(this.gr e.tag==t}));if(n)return Object.assign({},this,n)}}return!1},group:{1094:{name:"atletico-go",id:1094,tag:15424,text:"Você quer receber notificações em tempo real para não perder nenhuma notícia do Atlético-GO?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/times/atletico-go.jpg"},3:{name:"atletico-pr",id:3,tag:15425,text:"Você quer receber notificações em tempo real para não perder nenhuma notícia do Atlético-PR?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/times/atletico-pr.jpg"},4:{name:"atletico-mg",id:4,tag:15423,text:"Você quer receber notificações em tempo real para não perder nenhuma notícia do Atlético-MG?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/times/atletico-mg.jpg"},30:{name:"bahia",id:30,tag:15442,text:"Você quer receber notificações em tempo real para não perder nenhuma notícia do Bahia?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/times/bahia.jpg"},5:{name:"botafogo",id:5,tag:15485,text:"Você quer receber notificações em tempo real para não perder nenhuma notícia do Botafogo?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/times/botafogo.jpg"},984:{name:"bragantino",id:984,tag:15509,text:"Você quer receber notificações em tempo real para não perder nenhuma notícia do Bragantino?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/times/bragantino.jpg"},33:{name:"ceara",id:33,tag:15530,text:"Você quer receber notificações em tempo real para não perder nenhuma notícia do Ceará?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/times/ceara.jpg"},695:{name:"chapecoense",id:695,tag:15546,text:"Você quer receber notificações em tempo real para não perder nenhuma notícia da Chapecoense?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/times/chapecoense.jpg"},6:{name:"corinthians",id:6,tag:15586,text:"Você quer receber notificações em tempo real para não perder nenhuma notícia do Corinthians?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/times/corinthians.jpg"},7:{name:"coritiba",id:7,tag:15582,text:"Você quer receber notificações em tempo real para não perder nenhuma notícia do Coritiba?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/times/coritiba.jpg"},9:{name:"cruzeiro",id:9,tag:15604,text:"Você quer receber notificações em tempo real para não perder nenhuma notícia do Cruzeiro?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/times/cruzeiro.jpg"},1:{name:"flamengo",id:1,tag:15663,text:"Você quer receber notificações em tempo real para não perder nenhuma notícia do Flamengo?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/times/flamengo.jpg"},11:{name:"fluminense",id:11,tag:15659,text:"Você quer receber notificações em tempo real para não perder nenhuma notícia do Fluminense?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/times/fluminense.jpg"},35:{name:"fortaleza",id:35,tag:15701,text:"Você quer receber notificações em tempo real para não perder nenhuma notícia do Fortaleza?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/times/fortaleza.jpg"},12:{name:"goias",id:12,tag:15694,text:"Você quer receber notificações em tempo real para não perder nenhuma notícia do Goiás?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/times/goias.jpg"},13:{name:"gremio",id:13,tag:15737,text:"Você quer receber notificações em tempo real para não perder nenhuma notícia do Grêmio?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/times/gremio.jpg"},15:{name:"internacional",id:15,tag:15800,text:"Você quer receber notificações em tempo real para não perder nenhuma notícia do Internacional?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/times/internacional.jpg"},17:{name:"palmeiras",id:17,tag:16026,text:"Você quer receber notificações em tempo real para não perder nenhuma notícia do Palmeiras?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/times/palmeiras.jpg"},22:{name:"santos",id:22,tag:16147,text:"Você quer receber notificações em tempo real para não perder nenhuma notícia do Santos?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/times/santos.jpg"},24:{name:"sao-paulo",id:24,tag:16130,text:"Você quer receber notificações em tempo real para não perder nenhuma notícia do São Paulo?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/times/sao-paulo.jpg"},76:{name:"sport",id:76,tag:16209,text:"Você quer receber notificações em tempo real para não perder nenhuma notícia do Sport?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/times/sport.jpg"},25:{name:"vasco",id:25,tag:16237,text:"Você quer receber notificações em tempo real para não perder nenhuma notícia do Vasco?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/times/vasco.jpg"}}},{type:"simple",campaign:"campaign-tag-80427",name:"economia-mais",layout:"custom",text:"Você quer receber notificações para investir de forma inteligente?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/economia/economia-mais-bg.png",channel:"economia.uol.com.br",testUrl:/(economia\.uol\.com\.br\/mais\/?)/,validate:function(){return!!en(this.testUrl)&&this}},{cross:!0,type:"simple",campaign:"campaign-tag-80835",name:"reality-show",layout:"custom",text:"Curte BBB e outros reality shows? Receba notificações em tempo real para não perder nenhuma notícia do seu programa favorito",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/bbb-22.jpg",channel:"tvefamosos.uol.com.br",testUrl:/(https:\/\/tvefamosos\.uol\.com\.br\/bbb\/?|https:\/\/tvefamosos\.uol\.com\.br\/reality-shows\/?|https:\/\/tvefamosos\.uol\.com\.br\/a-fazenda\/?)|(https:\/\/www\.uol\.com\.br\/splash\/reality-shows\/?)|(https:\/\/www\.uol\.com\.br\/splash\/bbb\/?)/,userTags:["80037","20524","80554","80557"],validate:function(e){var t=e.userTagsInfo,n=this.testUrl.exec(location.href);return!!(Yt(this.userTags)||n&&n[0]==location.href||n&&n[2]==location.href&&Xt(t,this.userTags))&&this}},{type:"simple",campaign:"campaign-tag-79875",name:"uol-ve-tv",layout:"custom",text:"Quer receber notificações das análises do mundo da televisão do Podcast UOL Vê TV?",img:"https://conteudo.imguol.com.br/c/webmasters/campanhas/webalert/uol-ve-tv.jpg",channel:"www.uol.com.br",testUrl:/www\.uol\.com\.br\/play\/splash\/podcast\/splash-ve-tv/,validate:function(){return!!en(this.testUrl)&&this}},{type:"simple",campaign:"campaign-tag-16566",name:"mercado-da-bola",text:"Que tal receber notícias em tempo real do Mercado da Bola e todas as movimentações do futebol?",img:"https://imguol.com.br/c/_layout/v3/logoUOL2021/logo_completo_black.svg",cancelText:"Cancele quando quiser",channel:"www.uol.com.br",testUrl:/www\.uol\.com\.br\/esporte\/futebol\/mercado-da-bola/,userTags:["16566"],validate:function(){var e=en(this.testUrl),t=Yt(this.userTags);return e||t?this:null}},{type:"simple",campaign:"campaign-curious-world",name:"curiosidades",text:"Que tal receber notícias dos acontecimentos mais curiosos do mundo?",img:"https://imguol.com.br/c/_layout/v3/logoUOL2021/logo_completo_black.svg",cancelText:"Cancele quando quiser",channel:"www.uol.com.br",userTags:["80620","17229","64748","10761","10773","11126","27533","10764","79771"],validate:function(){return Yt(this.userTags)?this:null}},{type:"simple",campaign:"campaign-good-news",name:"boas-noticias",text:"Receba notificações das notícias mais positivas, que nos inspiram a um mundo melhor",img:"https://imguol.com.br/c/_layout/v3/logoUOL2021/logo_completo_black.svg",cancelText:"Cancele quando quiser",channel:"www.uol.com.br",userTags:["79738","79736","80808","80394","12640","78684","78762"],validate:function(){return Yt(this.userTags)?this:null}},{campaign:"campaign-anonymous-tab",name:"aba-anonima",text:"Você quer receber notificações em tempo real das reportagens sobre sexo, prazer e erotismo do TAB?",img:"https://imguol.com.br/c/_layout/v3/logoUOL2021/logo_completo_black.svg",cancelText:"Cancele quando quiser",channel:"tab.uol.com.br",userTags:["81827"],isReplicationTag:!0,forceView:!0,validate:function(){return Yt(this.userTags)?this:null}},{type:"simple",campaign:"campaign-offers-monitor",name:"monitor-de-ofertas",text:"De olho nos descontos! Ative as notificações do Monitor de Ofertas e receba a nossa curadoria",img:"https://imguol.com.br/c/_layout/v3/logoUOL2021/logo_completo_black.svg",cancelText:"Cancele quando quiser",channel:"economia.uol.com.br",testUrl:/(economia.uol.com.br\/ao-vivo)(?=.*monitor-de-ofertas-uol)/,validate:function(){return!!en(this.testUrl)&&this}}],nn={"coluna-fernanda-colombo":[{range:1/0,text:"Olho no lance! Não perca uma coluna da comentarista de arbitragem Fernanda Colombo"}]};var rn=n(38),an=n.n(rn),on=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console.log).call.apply(e,[console,"[webalert-notification:audience]"].concat(n))},sn=function(){for(var e,t=arguments.length,n=new Array(t)for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),un=function(){var e=l()(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=l()(c().mark((function e(t,n){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.hitAudience||!window.hitAudience.countEvent){e.next=6;break}return t([window.hitAudience&&window.hitAudience.countEvent,"countEvent"]),e.abrupt("break",16);case 6:if(!window.uolAnalytics){e.next=11;break}return t([window.uolAnalytics,"uolAnalytics"]),e.abrupt("break",16);case 11:return on("tentando achar função"),e.next=14,cn(500);case 14:e.next=0;break;case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ln="bloquear",dn="autorizar",pn="ignorar",fn="componente-visualizado";function hn(e,t){return gn.apply(this,arguments)}function gn(){return(gn=l()(c().mark((function e(t,n){var r,a,i,o,s;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}return e.abrupt("return",sn("`component` é valor obrigatório para envio de impressão"));case 2:return e.next=4,un();case 4:if(r=e.sent,a=an()(r,2),i=a[0],o=a[1],s=Math.floor(100*Math.random()),on("sendImpressionCount triggered with randomNumber ".concat(s)),!(s<20)){e.next=20;break}on("sending impression (".concat(o,")")),e.t0=o,e.next="countEvent"===e.t0?15:"uolAnalytics"===e.t0?17:19;break;case 15:return i({component:"webalert-authorization-".concat(t),reference:n,action:"impressao",nonInteraction:!0,impression:1,abTest1:window.universal_variable.aud.abTest1}),e.abrupt("break",20);case 17:return i("event",{category:"webalert-authorization-".concat(t),label:n,action:"impressao",nonInteraction:!0,impression:1,abTest1:window.universal_v:sn("".concat(o," is not a valid type"));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mn(e,t){return bn.apply(this,arguments)}function bn(){return(bn=l()(c().mark((function e(t,n){var r,a,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}return e.abrupt("return",sn("`component` é valor obrigatório para envio de evento"));case 2:if(void 0!==n){e.next=4;break}return e.abrupt("return",sn("`action` é valor obrigatório para envio de evento"));case 4:return e.next=6,un();case 6:r=e.sent,a=an()(r,2),i=a[0],o=a[1],on("sending event (".concat(o,")")),e.t0=o,e.next="countEvent"===e.t0?14:"uolAnalytics"===e.t0?16:18;break;case 14:return i({component:"webalert-authorization-".concat(t),reference:n,action:"clique",abTest1:window.universal_variable.aud.abTest1}),e.abrupt("break",19);case 16:return i("event",{category:"webalert-authorization-".concat(t),label:n,action:"clique",abTest1:window.universal_variable.aud.abTest1}),e.abrupt("break",19);case 18:sn("".concat(o," is not a valid type"));case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var wn=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console.log).call.apply(e,[console,"[webalert-notification:view]"].concat(n))},vn=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console.error).call.apply(e,[console,"[webalert-notification:view]"].concat(n))},yn={bold:"UOLText",normal:"UOLText"},_n=fubile |iemobile|opera mini/i.test(navigator.userAgent.toLowerCase())?"mobile":"desktop",Sn=function(e){return"desktop"==e?"webalert_show_confirmation_message":""};function xn(e,t){if(null!=e){var n=document.querySelector("body");e.classList.remove("webalert_hidden"),n.style.overflow="hidden";var r=fn,a=pn;t&&(r="".concat(r,"-").concat(t),a="".concat(a,"-").concat(t)),hn("instrucao",r),In(".webalert_confirmation_wrapper","click",(function(e){On(e.srcElement||null),mn("instrucao",a)}))}}function On(e){null!=e&&(e.parentNode.style.overflow="auto",e.parentNode.removeChild(e))}function Mn(e,t){if(!e)return vn("container is an invalid element");"default"==t&&(t={name:"default",campaign:"campaign-default",img:"https://imguol.com.br/c/_layout/v3/logoUOL2021/logo_completo_black.svg",text:"Você quer receber notificações em tempo real e não perder nenhuma notícia importante?"});var n=document.createElement("div");n.className="webalert_".concat((new Date).getTime()," webalert_view_container container"),n.innerHTML="custom"==t.layout?function(e){return'\n        <div class="webalert_container '.concat(Sn(kn)," webalert_layout_custom webalert_layout_").concat(e.campaign,'" campaign="').concat(e.campaign,'"\n        style="background-image: url(').concat(e.img,');">\n            <p class="webalert_container_description">').concat(e.text,'</p>\n            <p class="webalert_container_subdescription">Você pode cancelar quando quiser</p>\n            <button type="button" role="sim" class="webalert_container_click webalert_container_button webalert_container_button_yes">aceito</button>\n            <button type="button" role="nao" class="webalert_container_click webalert_container_button webalert_container_button_no">não</button>\n        </div>\n    ')}(t):function(e){return'\n        <div class="webalert_container '.concat(Sn(kn),'" campaign="').concat(e.name,'">\n            <img width="50" height="auto" class="webalert_container_logo_icon" src="').concat(e.img,'" alt="UOL - O melhor conteúdo" />\n            <p class="webalert_container_description">').concat(e.text,'</p>\n            <p class="webalert_container_subdescription">').concat(e.cancelText||"Você pode cancelar quando quiser",'</p>\n            <div class="webalert_container_button_wrapper">\n                ').concat(function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])[1]||"aceito";return'<button type="button" role="nao" class="webalert_container_click webalert_container_button webalert_container_button_no webalert_container_button_no--close"></button>\n        <button type="button" role="sim" class="webalert_container_click webalert_container_button webalert_container_button_yes">'.concat(e,"</button>")}(e.buttons),"\n            </div>\n        </div>\n    ")}(t);var r,a,i,o,s,c,u=n.querySelector(".webalert_container"),l="default"==t.name?"".concat(fn):"".concat(fn,"-").concat(t.name);u.classList.contains("webalert_show_confirmation_message")&&(r=document.querySelector("body"),(a=document.createElement("div")).classList="webalert_confirmation_wrapper webalert_hidden",a.innerHTML='<span class="webalert_confirmation_text">Clique em PERMITIR ou ALLOW para concluir</span>',a.setAttribute("role","modal-close"),r.insertBefore(a,r.firstChild));try{return function(e){var t,n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href","data:text/css;charset=UTF-8,"+encodeURIComponent("\n    .webalert_view_container {\n        display: flex;\n        justify-content: center;\n    }\n\n    .webalert_view_container.container {\n        min-height: 0 !important;\n        height: 0 !important;\n    }\n\n    @media (min-width: 1230px) {\n        .header .webalert_view_container {\n            justify-content: flex-start;\n        }\n    }\n\n    .webalert_container,\n    .webalert_container * {\n        box-sizing: border-box;\n        font-family: ".concat(_n("normal"),";\n    }\n\n    .webalert_container {\n        position: fixed;\n        top: -100%;\n        z-index: 6000001;\n        padding: 24px 24px 16px 24px;\n        width: ").concat(400,"px;\n        max-width: 100%;\n        height: ").concat("auto",";\n        border-radius: 12px;\n        box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.32);\n        background-color: #ffffff;\n        transition: top 0.3s;\n        border-left: 5px solid #d6001e;\n    }\n\n    .webalert_container_show {\n        top: 55px;\n    }\n\n    /** oculta o container se tiver a classe webalert_hidden_container */\n    .webalert_hidden_container .webalert_container_show {\n        top: -100% !important;\n    }\n\n    @media (max-width: 767px) {\n        .webalert_container_show {\n            top: calc(100% - 380px);\n        }\n    }\n\n    .webalert_container_logo_icon {\n        width: 88px;\n        height: 31.53px;\n        top: 20px;\n        left: 20px;\n    }\n\n    .webalert_container_description {\n        padding: 0;\n        font-weight: 400;\n        font-size: 16px;\n        line-height: 24px;\n        letter-spacing: normal;\n        color: #202020;\n        margin: 16px 0 0;\n        font-style: normal;\n    }\n\n    .webalert_container_subdescription {\n        padding: 0;\n        font-weight: 400;\n        font-size: 12px;\n        font-style: normal;\n        line-height: 16px;\n        letter-spacing: normal;\n        color: #4d4d4d;\n        margin: 8px 0 0;\n    }\n\n    .webalert_hidden {\n        display: none;\n    }\n\n    .webalert_container_click {\n        cursor: pointer;\n    }\n\n    .webalert_container_button_wrapper {\n        display: flex;\n        justify-content: end;\n        margin: 16px 0 0 0;\n    }\n\n    .webalert_container_button {\n        line-height: 16px;\n        border-radius: 8px;\n        padding: 8px 16px;\n        border: solid 1px #cccccc;\n        background-color: #fff;\n        text-transform: capitalize;\n        font-size: 16px;\n        letter-spacing: 0.96px;\n        text-align: center;\n        transition: opacity 0.3s;\n        font-style: normal;\n        font-weight: 700;\n        height: 36px;\n        transition: opacity 0.3s;\n    }\n\n    .webalert_container_button_no {\n        background-color: #fff;\n        border: 1px solid #4d4d4d;\n        background: #fff;\n        color: #4d4d4d;\n    }\n\n    .webalert_container_button_yes {\n        border-width: 0;\n        background: #d6001e;\n        color: #fff;\n        margin-left: 8px;\n    }\n\n    .webalert_container_click:hover {\n        opacity: 0.6;\n    }\n\n    .webalert_confirmation_wrapper {\n        position: fixed;\n        height: 100vh;\n        width: 100%;\n        background: rgba(0, 0, 0, 0.8);\n        z-index: 30000001;\n    }\n\n    .webalert_show_confirmation {\n        overflow: auto;\n    }\n\n    .webalert_confirmation_text {\n        position: absolute;\n        width: auto;\n        padding: 10px 20px;\n        font-family: ").concat(_n("normal"),";\n        font-size: 14px;\n        font-weight: 600;\n        text-align: right;\n        color: #fff;\n        background: #2977f3;\n        border-radius: 5px;\n        ").concat((t={firefox:"\n            top: 135px;\n            left: 373px;\n        ",chrome:"\n            top: 145px;\n            left: 133px;\n        "})[/Firefox/i.test(navigator.userAgent.toLowerCase())?"firefox":"chrome"]||t.chrome,'\n    }\n\n    /* Times e horóscopo */\n    .webalert_container.webalert_layout_custom {\n        padding: 20px 108px 15px 27px;\n        color: #fff;\n        background-position: 100% 100%;\n        background-size: cover;\n        border: none;\n        width: 355px;\n        box-shadow: 0 2px 4px 0 rgb(0 0 0 / 50%);\n        background-color: #fcfcfc;\n        border-radius: 10px;\n    }\n\n    .webalert_container.webalert_layout_custom .webalert_container_description,\n    .webalert_container.webalert_layout_custom .webalert_container_subdescription {\n        margin-right: 6px;\n        color: #fff;\n        line-height: 1.29;\n        margin: 0 0 20px 0;\n    }\n\n    .webalert_container.webalert_layout_custom .webalert_container_description {\n        font-weight: normal;\n        font-size: 14px;\n    }\n\n    .webalert_container.webalert_layout_custom .webalert_container_subdescription {\n        font-weight: normal;\n        font-style: italic;\n        line-height: 1.29;\n    }\n\n    .webalert_container.webalert_layout_custom.webalert_layout_campaign-horoscope .webalert_container_description {\n        margin-right: 10px;\n    }\n\n    .webalert_container.webalert_layout_custom .webalert_container_button {\n        width: 100px;\n        line-height: 35px;\n        border-radius: 2px;\n        padding: 0;\n        text-transform: uppercase;\n        font-size: 12px;\n        color: #666;\n        text-align: center;\n    }\n\n    .webalert_container.webalert_layout_custom .webalert_container_button_no {\n        color: #fff;\n        background-color: transparent;\n        float: right\n    }\n\n    .webalert_container.webalert_layout_custom .webalert_container_button_yes {\n        background: #fff;\n        margin-left: 0;\n    }\n\n    .webalert_container.webalert_layout_custom.webalert_layout_campaign-teams .webalert_container_button_yes {\n        color: #000;\n    }\n\n    .webalert_container.webalert_layout_custom.webalert_layout_campaign-tag-80427 .webalert_container_button_yes {\n        color: #000;\n    }\n\n    .webalert_container.webalert_layout_custom.webalert_layout_campaign-horoscope .webalert_container_button_yes {\n        color: #1f1a42;\n    }\n\n    .webalert_container.webalert_layout_custom.webalert_layout_campaign-tag-80835 .webalert_container_button_yes {\n        color: #8B00D5;\n    }\n\n    .webalert_container.webalert_layout_custom.webalert_layout_campaign-tag-79875 .webalert_container_button_yes {\n        color: #7301ce;\n    }\n\n    .webalert_container_button_no--close {\n        top: 0 !important;\n        position: absolute !important;\n        border: none !important;\n        right: 0 !important;\n        color: #09121F !important;\n        background: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNCIgaGVpZ2h0PSIxNCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzA5MTIxRiIgZD0ibTcgNS41ODYgNC45NS00Ljk1IDEuNDE0IDEuNDE0TDguNDE0IDdsNC45NSA0Ljk1LTEuNDE0IDEuNDE0TDcgOC40MTRsLTQuOTUgNC45NUwuNjM2IDExLjk1IDUuNTg2IDcgLjYzNiAyLjA1IDIuMDUuNjM2IDcgNS41ODZaIi8+PC9zdmc+") no-repeat center !important;\n        width: 40px !important;\n        height: 40px !important;\n    }\n'))),e.appendChild(n)}(document.head),e.insertBefore(n,e.firstChild),i=u,o=l,s=null,(c=new IntersectionObserver((function(e){!1===e[0].isIntersecting&&null!==s?(wn("saiu do viewport, removendo timeout"),clearTimeout(s),s=null):!0===e[0].isIntersecting&&null===s&&(wn("entrou no viewport, registrando timeout"),s=setTimeout((function(){wn("disparando timeout e removendo observer"),c.unobserve(e[0].target),hn("modal",o)}),2e3))}))).observe(i),window.addEventListener("scroll",(function(){return e=u,t="webalert_container_show",n=window.innerHeight,void(document.documentElement.scrollTop>n?e.cla,n})),n}catch(e){throw vn("error appending element",e),e}}function In(e,t,n){var r=document.querySelec(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function Cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Dn=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console.log).call.apply(e,[console,"[webalert-notification:app]"].concat(n))},Nn=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console.error).call.apply(e,[console,"[webalert-notification:app]"].concat(n))},Ln=864e5,jn=(new Date).getTime(),Bn="webalert_hidden_container",Fn=".webalert_view_container",Rn=new(function(){function e(){var t,n,r=this;if(p()(this,e),"localStorage"in window!=1||"Notification"in window!=1||"Promise"in window!=1||"serviceWorker"in navigator!=1||"PushManager"in window!=1||"fetch"in window!=1||"Safari"==Et.browser.getBrowserName()||"special"==(null===(t=window.universal_variable)||void 0===t||null===(n=t.aud)||void 0===n?void 0:n.mediaType))return Nn("UNSUPPORTED_BROWSER"),"UNSUPPORTED_BROWSER";Dn('WebalertNotification({ version: "'.concat("1.20.14",'" })')),this.api=new Ct,this.swRegister=null,this.settings={localStorage:"pushNotificationUOL",parentSelector:"body",serviceWorker:"/firebase-messaging-sw.js",central:location.hostname.split(".")[0],channel:location.hostname,tags:[],showUi:!0,campaign:null,columnist:null,campaignTagName:null,firebase:{apiKey:"AIzaSyC7xCg9LEYqiDKkCBsjhMFg-MKTNakYuj8",authDomain:"web-alerts-1194.firebaseapp.com",projectId:"web-alerts-1194",appId:"1:370456186282:web:a1818e52c9bb508cf2efd3",databaseURL:"https://web-alerts-1194.firebaseio.com/",storageBucket:"gcm-demo-13f40.appspot.com",messagingSenderId:"370456186282"},messaging:null},this.waitDOMLoad().then((function(){return r.waitDucksLakeSDK()})).then((function(){return r.readPageConfigurations()})).then((function(){return r.getUserId()})).then((function(){return r.initializeFirebase()})).then((function(){return r.initializeSW()})).then((function(){return r.validaon(){ret})).then((function(){return r.getUINotificationPermission()})).then((function(){return r.getToken()})).catch((function(e){return Nn(e)})).then((function(){return r.sync()}))}var t,n,r,i,s,u,d,f,g,m,b,w,v,y,_,k;return h()(e,[{key:"platform",get:function(){var e={ismobile:Jt.phone,device:"pc",browser:Et.browser.getBrowser()};if(!0===Jt.tablet&=["a+){var r=n[t];if(!0===Jt[r].device){e.device=r;break}}return e}},{key:"messaging",get:function(){return this.settings.messaging},set:function(e){this.settings.messaging=e}},{key:"storage",get:function(){try{var e=localStorage.getItem(this.settings.localStorage);return Object.assign({campaign:[],central:{}},JSON.parse(e)||{})}catch(e){return{}}}},{key:"defineWebalertVisibility",value:function(){if(window.uolTalker&&"function"==typeof window.uolTalker.getStatus&&"visible"===window.uolTalker.getStatus()){Dn("[UOLTalkerVisibility] talker is already visible");var e=document.querySelector(Fn);e&&e.classList.add(Bn)}}},{key:"watchForTalkerVisibilityEvent",value:function(){var e=this;this.defineWebalertVisibility(),window.addEventListener("UOLTalkerVisibility",(function(t){Dn("[UOLTalkerVisibility] evel)));var n=document.querySelector(Fn);n?t.detail.visible?n.classList.add(Bn):setTimeout((function(){return requestAnimationFrame((function(){return n.classList.remove(Bn)}))}),1e3):Nn("[UOLTalkerVisibility] parent container selector not found any element",e.settings.parentSelector)}))}},{key:"save",value:function(e){try{var t=Object.assign(this.storage,e);localStorage.setItem(this.settings.localStorage,JSON.stringify(t))}catch(e){Nn("(save localstorage)",e)}}},{key:"validateTestAB",value:function(){return Dn("[validateTestAB] validating test"),Object.keys(nn||{}).length&&this.doViewSortColumnists(),new Promise((function(e,t){window._uolabtestsev||e(),window._uolabtestsev.push((function(){!_uolabtest("_uolabteste1")||"abTest/webalert-button-a.json"!==_uolabtest("_uolabteste1")&&"abTest/webalert-button-b.json"!==_uolabtest("_uolabteste1")?e():t(new Error("ab test - disabled"))}))}))}},{key:"doViewSortColumnists",value:function(){var e=this.settings.tags.find((function(e){return e.includes("coluna")}));if(e){Dn("[ValidateTestAB] validating: ",e);var t=nn[e];if(!t)return Dn("[validateTestAB] modal is not enabled for: ",e);var n=this.storage.central,r=(void 0===n?{}:n)[this.settings.central]||{},a=r.tags,i=void 0===a?{}:a,o=r.accepted;if(Object.keys(i).some((function(t){return t.includes(e)}))&&o)return Dn("[validateTestAB] user already signed for columnist: ",e);var s=new Date;s.setHours(0,0,0,0);var c=t.find((function(e){var t=e.range;return s>=new Date(t[0])&&s<=new Date(t[1])||t===1/0}));if(!c)return Dn("[validateTestAB] modal display period not available: ",e);for(var u={name:e,columnist:!0,text:"Você quer receber notificações em tempo real e não perder nenhuma notícia importante?",img:"https://imguol.com.br/c/_layout/v3/logoUOL2021/logo_completo_black.svg"},l=!1,d=0,p=["text","buttons","cancelText"];d<p.length;d++){var f=p[d];c[f]&&(l=!0,u[f]=c[f])}l&&(this.settings.columnist=u,Dn("[validateTestAB] sorted columnist modal: ".concat(e)))}}},{key:"waitDOMLoad",value:(k=l()(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next)eak}return e.abrupt("return",Promise.resolve());case 2:return e.abrupt("return",new Promise((function(e){document.addEventListener("DOMContentLoaded",(function(){return e()}))})));case 3:case"end":return e.stop()}}),e)}))),function(){return k.apply(this,arguments)})},{key:"waitDucksLakeSDK",valtion e(){var t,n;return c().wrap((functch(e.prev=e.next){case 0:return t=1,n=function e(n){window.DucksLake||t>5?n():(t+=1,setTimeout((function(){return e(n)}),500))},e.abrupt("return",new Promise((function(e){n(e)})));case 3:case"end":return e.stop()}}),e)}))),function(){return _.apply(this,arguments)})},{key:"waitForLGPD",value:(y=l()(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=this.platform.ismobile){e.next=2;break}return e.ndow.uolPolicyBanner=window.uolPolicyBanner||[],e.abrupt("return",new Promise((function(e){window.uolPolicyBanner.push((function(t){var n=t.action;"skip"!==n&&"hide"!==n||e(n)}))})));case 4:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"readPageConfigurations",value:(v=l()(c().mark((function e(){var t,n,r,a,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=document.querySelector(".uol-notifications-widget"))){e.next=3;break}throw new Error("Elemento .uol-notifications-widget não foi encontrado.");case 3:n=0,r=["data-container","service-worker-path","channel-name","themes","central","show-ui"];case 5:if(!(n<r.length)){e.next=29;break}if(a=r[n],null!==(i=t.getAttribute(a))){e.next=10;break}return e.abrupt("continue",26);case 10:e.t0=a,e.next="data-container"===e.t0?13:"service-worker-path"===e.t0?15:"channel-name"===e.t0?17:"themes"===e.t0?19:"central"===e.t0?21:"show-ui"===e.t0?23:25;break;case 13:return this.settings.parentSelector=i,e.abrupt("break",26);case 15rker=i,e.abrupt("break",26);case 17:return this.settings.channelName=i,e.abrupt("break",26);case 19:return this.settings.tags=i.split(",").filter((function(e){return"geral"!==e})),e.abrupt("break",26);case 21:return this.settings.central=i,e.abrupt("break",26);case 23:return this.settings.showUi="true"===i,e.abrupt("break",26);case 25:return e.abrupt("break",26);case 26:n++,e.next=5;break;case 29:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"getUserNotificationPermission",value:(w=l()(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("permissions"in navigator)){e.next=6;break}return e.next=3,navigator.permissions.query({name:"notifications"});case 3:return t=e.sent,n=t.state,e.abrupt("return",n);case 6:return e.abrupt("return",Notification.permission);case 7:case"end":return e.stop()}}),e)}))),function(){return w.apply(this,arguments)})},{key:"getUserCentralTags",value:function(){var e=arguments.le:{},t="";"www.uol.com.br"===this.settings.channelName&&(t="central-".concat(this.settings.central,"-"));var n,r=this.settings.tags.map((function(e){return"".concat(t).concat(e)})),a=Pn(r);try{for(a.s();!(n=a.n()).done;){var i=n.value;void 0===e[i]&&(e[i]=1,this.save({synced:!1}))}}catch(e){a.e(e)}finally{a.f()}return e}},{key:"hasCampaignCookie",value:function(e){var t=new RegExp("(?:^|; )"+e+"=([^;]+)").exec(document.cookie);if(t)try{return JSON.parse(t[1])}catch(e){return t[1]}return!1}},{key:"getActiveCampaign",value:(b=l()(c().mark((function e(){var t,n,r,a,i,s,u,l,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!=tn.length){e.next=2;break}return e.abrupt("return",void 0);case 2:if(null!=window.DucksLake){e.next=4;break}return e.abrupt("return",void 0);case 4:return e.next=6,DucksLake.getSubscription("webalert");case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:return t=e.t0,e.next=12,DucksLake.getUserTagsInfo();case 12:if(e.t1=e.sent,e.t1){e.next=15;break}e.t1={data:{tags:[]}};case 15:n=e.t1,r=window.universal_variable||{},a=r.sc,i=void 0===a?{}:a,s=tn.reduce((function(e,r){if(r&&"function"==typeof r.validate){var a=r.validate({userTagsInfo:n,sc:i});if(a){var s=a.campaign,c=a.name;return t.hasOwnProperty(s)&&jn-new Date(t[s]).getTime()<7*Ln?(Dn("we already questioned user about campanign: ".concat(s)),e):t[s]?(Dn("user already accepted: ".concat(s)),e):("campaign-teams"==s||"campaign-horoscope"==s)&&t[s]instanceof Array&&t[s].includes(c)?(Dn("user already signed for campaign: ".concat(s)),e):[].concat(o()(e),[En({},a)])}}return e}),[]),e.t2=c().keys(s);case 19:if((e.t3=e.t2()).done){e.next=33;break}if(u=e.t3.value,l=s[u],e.t4=!0===l.cross,!e.t4){e.next=28;break}return e.next=26,Un(l.campaign);case 26:e.t5=e.sent,e.t4=1==e.t5;case 28:if(!e.t4){e.next=31;break}s.splice(u,1),u-=1;case 31:e.next=19;break;case 33:if(0!=s.length){e.next=35;break}return e.abrupt("return",void 0);case 35:return d=Math.floor(Math.random()*s.length),e.abrupt("return",s[d]);case 37:case"end":return e.stop()}}),e)}))),function(){return b.apply(this,arguments)})},{key:"doViewSort",value:function(e,t){var n=[];return e&&(t&&t.forceView||n.push("default")),t&&n.push("campanha"),n.length?n[Math.floor(Math.random()*n.length)]:""}},{key:"getCampaignUI",value:(m=l()(c().mark((function e(t){var n,r,i,o=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUserNotificationPermission();case 2:return n=e.sent,r=Mn(document.querySelector(this.settings.parentSelector),t),e.next=6,DucksLake.getSubscription("webalert");case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:return i=e.t0,Dn("show campaign ui notification permission: ".concat(t.name)),this.defineWebalertVisibility(),this.settings.campaign=t,e.abrupt("return",new Promise((function(e,s){In(".webalert_container_click","click",(function(c){Tn(r);var u=!0;switch(c.srcElement.getAttribute("role")){case"sim":switch(mn("modal","".concat(dn,"-").concat(t.name)),"prompt"===n&&xn(document.querySelector(".webalert_confirmation_wrapper")||null,t.name),t.type){case"simple":DucksLake.addSubscription("webalert",Object.assign(i,a()({},t.campaign,!0)));break;default:var l=i[t.campaign]||[];l.push(t.name),DucksLake.addSubscription("webalert",Object.assign(i,a()({},t.campaign,l)))}u=!1;break;case"nao":mn("modal","".concat(ln,"-").concat(t.name)),DucksLake.addSubscription("webalert",Object.assign(i,a()({},t.campaign,new Date)));break;case"close":mn("modal","".concat(pn,"-").concat(t.name));break;default:Nn("unknown role event")}u?s("UI_NOTIFICATION_PERMISSION_DENIED"):(o.save({synced:!1}),e())}))})));case 14:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"getDefaultUI",value:(g=l()(c().mark((function e(t,n){var r,i,o,s=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.storage,e.next=3,this.getUserNotificationPermission();case 3:return i=e.sent,o=Mn(document.querySelector(this.settings.parentSelector),n),Dn("show ui notification permission"),this.defineWebalertVisibility(),e.abrupt("return",new Promise((function(e,c){var u=n.columnist;In(".webalert_container_click","click",(function(l){Tn(o);var d=l.srcElement.getAttribute("role");switch(t.lastTimeIn=new Date,t.accepted="sim"===d,d){case"sim":mn("modal",u?"".concat(dn,"-").concat(n.name):dn),"prompt"===i&&xn(document.querySelector(".webalert_confirmation_wrapper")||null);break;case"nao":mn("modal",u?"".concat(ln,"-").concat(n.name):ln);break;case"close":mn("modal",pn);break;default:Nn("unknown role event")}if(u){if(!t.accepted)return c("UI_NOTIFICATION_PERMISSION_DENIED");t.tags=s.getUserCentralTags(En({},t.tags))}s.save({syncsettings.central,t))}),t.accepted?e():c("UI_NOTIFICATION_PERMISSION_DENIED")}))})));case 8:case"end":return e.stop()}}),e,this)}))),function(e,t){return g.apply(this,arguments)})},{key:"getUINotificationPermission",value:(f=l()(c().mark((function e(){var t,n,r,i,o,s,u,l,d;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.storage,e.next=3,this.getUserNotificationPermission();case 3:return n=e.sent,e.next=6,this.getActiveCampaign();case 6:if(r=e.sent,i=!!this.settings.columnist,"denied"!==n){e.next=11;break}return Dn("notifications denied"),e.abrupt("return",Promise.reject("BROWSER_NOTIFICATION_PERMISSION_DENIED"));case 11:if((o=Object.assign({lastTimeIn:"1987-04-06T17:00:00.000Z",accepted:!1},t.central[this.settings.central])).tags=this.getUserCentralTags(En({},o.tags)),i&&Object.keys(o.tags).includes(this.settings.columnist.name)&&(s=this.settings.columnist.name,o.tags=Object.keys(o.tags).reduce((function(e,t){return t!==s?En(En({},e),{},a()({},t,1)):e}),{})),!o.accepted||!t.token||r||i){e.next=18;break}return Dn("user already give permissions"),this.save({central:En(En({},t.central),{},a()({},this.settings.central,o))}),e.abrupt("return",Promise.resolve());case 18:if(!1!==this.settings.showUi){e.next=25;break}return Dn("ui is disabled, by passing"),o.accepted=!0,o.bypass=!0,o.lastTimeIn=new Date,this.save({central:En(En({},t.central),{},a()({},this.settings.central,o))}),e.abrupt("return",Promise.resolve());case 25:return e.next=27,this.waitForLGPD();case 27:u=i||!o.accepted&&jn-new Date(o.lastTimeIn).getTime()>7*Ln,e.t0=this.doViewSort(u,r),e.next="default"===e.t0?31:"campanha"===e.t0?37:41;break;case 31:return l=this.settings.columnist,Dn("sorted default modal".concat(l?" segmented by: ".concat(l.name):"")),d=l||"default",e.next=36,this.getDefaultUI(o,d);case 36:return e.abrupt("return",e.sent);case 37:return Dn("sorted campaign modal: ".concat(r.name)),e.next=40,this.getCampaignUI(r);case 40:return e.abrupt("return",e.sent);case 41:return e.abrupt("return",Promise.reject("EMPTY_CAMPAIGN_LIST"));case 42:case"end":return e.stop()}}),e,this)}))),function(){return f.apply(this,arguments)})},{key:"initializeFirebase",value:(d=l()(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dn("initializing app"),pe(this.settings.firebase),Dn("initializing firebase messaging"),this.messaging=Tt(),e.abrupt("return",Promise.resolve());case 5:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"initializeSW",value:(u=l()(c().mark((function e(){var t,n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Dn("initializing service worker"),t=window.location.search.includes("scope"),n=t?"/".concat(window.location.search.match(/scope=[\w.]+/)[0].split("=")[1]):"",e.next=5,navigator.serviceWorker.register(this.settings.serviceWorker,{scope:"".concat(n,"/firebase-cloud-messaging-push-scope"),type:"module"});case 5:return this.swRegister=e.sent,e.abrupt("return",Promise.resolve());case 7:case"end":return e.n u.apply(this,arguments)})},{key:"transformCentralInTags",value:function(){var e=this,t=this.storage.central;return Object.keys(t).filter((function(e){return!0===t[e].accepted})).reduce((function(n,r){"geral"===r?n.push(r):"www.uol.com.br"==e.settings.channel?n.push("central-".concat(r)):n.push("geral");var a=t[r].tags,i=void 0===a?{}:a;return n.concat(Object.keys(i))}),[])}},{key:"sync",value:(s=l()(c().mark((function e(){var t,n,r,a;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==this.storage.synced){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:if(Dn("sync storage"),this.storage.token){e.next=11;break}return e.next=6,this.getUserNotificationPermission();case 6:if(e.t0=e.sent,"granted"==e.t0){e.next=9;break}return e.abrupt("return",Promise.resolve());case 9:return e.next=11,this.getToken();case 11:if(void 0===this.storage.tokenChangedFrom){e.next=14;break}return e.next=14,this.api.deleteToken(this.storage.tokenChangedFrom);case 14:if(!0===this.storage.replicateUOLID&&this.storage.gaID&&this.storage.uolID&&this.api.replicateUOLID(this.storage.uolID,this.storage.gaID),t=this.transformCentralInTags(),n=this.storage.campaign,r=void 0===n?[]:n,null===this.settings.campaign){e.next=29;break}e.t1=this.settings.campaign.type,e.next="horoscope"===e.t1?21:"teams"===e.t1?23:25;break;case 21:return this.settings.campaignTagName="campaign-sign-".concat(this.settings.campaign.name),e.abrupt("break",27);case 23:return this.settings.campaignTagName="campaign-tag-".concat(this.settings.campaign.tag),e.abrupt("break",27);case 25:return this.settings.campaignTagName=this.settings.campaign.campaign,e.abrupt("break",27);case 27:r.push(this.settings.campaignTagName),this.save({campaign:r});case 29:return e.next=31,this.api.insertToken({subscriptionID:this.storage.token,gaID:this.storage.gaID||null,uolID:this.storage.uolID||null,channel:this.settings.channelName,platform:this.platform,userAgent:navigator.userAgent,configs:{tags:[].concat(o()(t),o()(r))}});case 31:if(1!=(a=e.sent).success){e.next=40;break}if(Dn("api synced"),this.save({synced:!0,tokenChangedFrom:void 0,replicateUOLID:void 0}),null===this.settings.campaign){e.next=38;break}return e.next=38,this.api.subscribeCampaign(this.storage.token,this.settings.campaignTagName);case 38:e.next=41;break;case 40:Nn("api sync failed",a);case 41:return e.abrupt("return",Promise.resolve());case 42:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getUserId",value:(i=l()(c().mark((function e(){var t,n,r,a,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.storage,a=(0,Et.getGaId)(),i=null===(t=window.UOLPD)||void 0===t||null===(n=t.dataLayer)||void 0===n?void 0:n.UOLID,void 0!==a&&a!==r.gaID&&(Dn("getting user id (gaid)"),this.save({synced:!1,gaID:a})),void 0!==i&&i!==r.uolID&&(Dn("getting uol id (uolid)"),this.save({synced:!1,uolID:i,replicateUOLID:!0}));case 5:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getToken",value:(r=l()(c().mark((function e(){var t,n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBrowserNotificationPermission();case 2:if(t=e.sent,On(document.querySelector(".webalert_confirmation_wrapper")||null),"granted"!=t){e.next=18;break}return Dn("getToken() we have permission"),e.next=8,At(this.messaging,{vapidKey:"BEd84XGoGhdVq4piMRrbvvgp__QmDjh3oqdGnyx4slV4lGGgwoeRbcALLcNss2WTl34N0gXmGOsMM3lCOJOn1cA",serviceWorkerRegistration:this.swRegister});case 8:if(n=e.sent,r=this.storage,!n||r.token===n){e.next=16;break}return Dn("getToken() saving new token: ".concat(n)),this.save({synced:!1,tokenChangedFrom:r.token,token:n}),e.abrupt("return",n);case 16:Dn("getToken() token already saved and not changed");case 17:case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"getAcceptedCampaigns",value:(n=l()(c().mark((function e(){var t,n,r,a,i,s,u,l,d,p,f,h,g=this;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Dn("[migrating campaigns] getAcceptedCampaigns"),!window.DucksLake){e.next=7;break}return e.next=4,null===(t=DucksLake)||void 0===t?void 0:t.getSubscription("webalert");case 4:n=e.sent,r=this.storage,a=r.campaign,i=void 0===a?[]:a,s=r.central,u=void 0===s?{}:s,n&&(l=function(e){return i.includes(e)},d=function(e,t){return Dn("[migrating campaign]",t),e.push(t),e},p=Object.keys(n||[]).reduce((function(e,t){var r=function(e,t){return"campaign-".concat({teams:"tag",horoscope:"sign"}[e]||"")+"-"+t},a=n[t],i=tn.n===t&&(n=e.channel,g.settings.channel===n);var n}));if(i)if("campaign-teams"===t||"campaign-horoscope"===t){var o=Object.values(i.group).find((function(e){return e.name===a[0]}));if(o){var s="horoscope"===i.type?o.name:o.tag,c=r(i.type,s);if(!l(c))return d(e,r(i.type,c))}}else if(!l(t))return d(e,i.campaign);return e}),[])icationTag&&g.settings.channel===t.channel){var n=u[g.settings.central]||{},r=n.tags,a=void 0===r?{}:rd((function(e){return t.name.includes(e)}));if(!l(t.campaign)&&o&&i)return d(e,t.campaign)}return e}),[]),(h=[].concat(o()(p),o()(f)))&&h.some((function(e){return!i.includes(e)}))&&this.save({campaign:[].concat(o()(h),o()(i)),synced:!1}));case 7:return e.abrupt("return",Promise.resolve());case 8:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getBrowserNotificationPermission",value:(t=l()(c().mark((function e(){var t,n,r,a,i,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUserNotificationPermission();case 2:if("granted"!=(t=e.sent)){e.next=5;break}return e.abrupt("return",t);case 5:return n=fn,r=pn,a=ln,i=dn,null!=this.settings.campaign&&(n="".concat(n,"-").concat(this.settings.campaign.name),r="".concat(r,"-").concat(this.settings.campaign.name),a="".concat(a,"-").concat(this.settings.campaign.name),i="".concat(i,"-").concat(this.settings.campaign.name)),Dn("requesting user permission"),hn("nativo",n),e.next=14,Notification.requestPermission();case 14:o=e.sent,e.t0=o,e.next="default"===e.t0?18:"denied"===e.t0?21:(e.t0,24);break;case 18:return Dn("usuário negou permissão (close button)"),mn("nativo",r),e.abrupt("break",27);case 21:return Dn("usuário negou permissão (no button)"),mn("nativo",usuário aceitou"),mn("nativo",i),e.abrupt("break",27);case 27:return e.abrupt("return",o);case 28:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})}]),e}()),Un=function(){var e=l()(c().mark((function e(t){var n,r,a,i;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",!1);case 2:return n=Rn.storage,r=n.gaID,a=n.uolID,e.t0=Set,e.next=6,Rn.api.getUserTags(r,a);case 6:if(e.t1=e.sent,e.t1){e.next=9;break}e.t1=[];case 9:return e.t2=e.t1,i=new e.t0(e.t2),e.abrupt("return",i.has(t));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Vn=function(){var e=l()(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,DucksLake.getSubscription("webalert");case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:if(n=e.t0,!(t in n)||1!=n[t]){e.next=8;break}return e.abrupt("return",Promise.resolve("BROWSER_NOTIFICATION_PERMISSION_GRANTED"));case 8:return e.next=10,Rn.getUserNotificationPermission();case 10:if("granted"===e.sent){e.next=17;break}return e.next=14,Rn.getBrowserNotificationPermission();case 14:if("granted"==e.sent){e.next=17;break}return e.abrupt("return",Promise.reject("BROWSER_NOTIFICATION_PERMISSION_DENIED"));case 17:return Rn.settings.campaign={campaign:t},e.next=20,DucksLake.addSubscription("webalert",Object.assign(n,a()({},t,!0)));case 20:return Rn.save({synced:!1}),e.next=23,Rn.sync();case 23:return e.abrupt("return",Promise.resolve("BROWSER_NOTIFICATION_PERMISSION_GRANTED"));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qn=function(){var e=l()(c().mark((function e(t){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,DucksLake.getSubscription("webalert");case 2:if=5;break}e.t0={};case 5:return delete(n=e.t0)[t],e.next=9,DucksLake.addSubscription("webalert",n);case 9:return Rn.save({campaign:Rn.storage.campaign=12,Rn.api.unsubscribeCampaign(Rn.storage.token,t);case 12:return e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},81:(e,t,n)=>{"use strict";n.r(t),n.d(t,{browser:()=>s,loadJS:()=>c,getPathname:()=>u,hasCampaignCookie:()=>l,getGaId:()=>d,isValidTagPage:()=>p,isValidUserTag:()=>f,isValidURL:()=>h});var r=n(198),a=n.n(r),i=new Map(document.cookie.split("; ").map((function(e){return e.split("=")}))),o=function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console.log).call.apply(e,[console,"[webalert-notification:utils]"].concat(n))},s=a().getParser(window.navigator.userAgent);function c(e){return o("(loading) ".concat(e)),new Promise((function(t,n){var r=document.createElement("script");r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){null!=r.readyState&&!0!==/loaded|complete/.test(r.readyState)||(r.onload=r.onreadystatechange=null,o("(loaded) ".concat(e)),t(e))},document.head.appendChild(r)}))}function u(){return!0===w"/"}function l(e){var t=new RegExp("(?:^|; )"+e+"=([^;]+)").exec(document.cookie);if(t)try{return JSON.parse(t[1])}catch(e){retunction(){return i.get("_ga")},p=function(e){var t;return null===(t=window.universal_variabunction(t){return e.find((f){va=1)inu;n<isBvaryStfunwebkit/his.deme=t}catchf(t[s}reable:!globperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n(608)})();   