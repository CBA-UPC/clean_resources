(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4727],{11446:5430:function(e,t,a){"use strict";a.d(t,{Z:function(){return PushAccountsSwitch}});var o=a(52322),r=a(77512);function PushAccountsSwitch(e){let{recordsName:t="Company",containerProps:a,textProps:n,companyTextProps:s,...i}=e;return(0,o.jsxs)("div",{className:"flex space-x-2",...a,children:[(0,o.jsx)(r.rs,{...i}),(0,o.jsxs)("span",{className:"text-sm text-gray-500",...n,children:["Create new"," ",(0,o.jsx)("span",{className:"rounded border bg-gray-50 p-1 text-[13px] leading-5 text-gray-600",...s,children:t})," ","records from collected emails or Account-Based Engagement."]})]})}},1991:function(e,t,a){"use strict";a.d(t,{$T:function(){return apiProjectVersionIdRoute},C2:function(){return apiAuthSsoAuditPortalRoute},CW:function(){return apiGuideVisitorsRoute},T6:function(){return apiIntegrationSalesforceSobjectsRoute},ZA:function(){return apiIntegrationMarketoProgramsRoute},e9:function(){return previewFlowFlowIdRoute},g5:function(){return apiAuthSsoPortalRoute},g9:function(){return apiIntegrationMarketoFieldsRoute},h7:function(){return apiEnrichmentRoute},iu:function(){return apiGuideTimeMeasurementsRoute},nt:function(){return previewCaptureIdRoute},p3:function(){return previewProjectIdRoute},u4:function(){return apiEdgeExportVisitorsRoute},xH:function(){return apiEdgeExportAccountsRoute}});let previewProjectIdRoute=e=>{let{id:t}=e;return"/preview/project/".concat(t)},previewFlowFlowIdRoute=e=>{let{flow_id:t}=e;return"/preview/flow/".concat(t)},previewCaptureIdRoute=e=>{let{id:t}=e;return"/preview/capture/".concat(t)},apiProjectVersionIdRoute=apiGuideVisitorsRoute=()=>"/api/guide/visitors",apiGuideTimeMeasurementsRoute=()=>"/api/guide/time-measurements",apiEnrichmentRoute=()=>"/api/enrichment",apiIntegrationSalesforceSobjectsRoute=()=>"/api/integration/salesforce/sobjects",apiIntegrationMarketoProgramsRoute=()=>"/api/integration/marketo/programs",apiIntegrationMarketoFieldsRoute=()=>"/api/integration/marketo/fields",apiEdgeExportVisitorsRoute=()=>"/api/edge/export/visitors",apiEdgeExportAccountsRoute=()=>"/api/edge/export/accounts",apiAuthSsoPortalRoute=()=>"/api/auth/sso/portal",apiAuthSsoAuditPortalRoute=,62977:function(e,t,a){"use strict";a.r(t),a.d(t,{__N_SSP:function(){return z},default:);var o,r,n,s,i=a(52322),l=a(8583),c=a(2784),d=a(56958),u=a(27425),f=a(32517),p=a(77815),m=a(83122),use_load_sobject_fields=e=>{let{webhookId:t,sobject:a,onError:o}=e,[r,n]=(0,c.useState)(!1),[s,i]=(0,c.useState)([]);return(0,c.useEffect)(()=>{t&&(n(!0),fetch("/api/integration/salesforce/fields?id=".concat(t,"&sobject=").concat(a)).then(async e=>{if(n(!1),e.ok){let t=await e.json();i(t.sobjectFields)}else o("Could not retrieve fields for ".concat(a))}))},[t,a,o]),{fetching:r,fields:s}},h=a(47128),g=a(91077),y=a(73022);(o=n||(n={})).ADDRESS="Address",o.AUTO_NUMBER="AutoNumber",o.LOOKUP="Lookup",o.MASTER_DETAIL="MasterDetail",o.METADATA_RELATIONSHIP="MetadataRelationship",o.CHECKBOX="Checkbox",o.CURRENCY="Currency",o.DATE="Date",o.DATE_TIME="DateTime",o.EMAIL="Email",o.ENCRYPTED_TEXT="EncryptedText",o.EXTERNAL_LOOKUP="ExternalLookup",o.NUMBER="Number",o.PERCENT="Percent",o.PHONE="Phone",o.PICKLIST="Picklist",o.MULTISELECT_PICKLIST="MultiselectPicklist",o.SUMMARY="Summary",o.TEXT="Text",o.TEXT_AREA="TextArea",o.LONG_TEXT_AREA="LongTextArea",o.URL="Url",o.HIERARCHY="Hierarchy",o.FILE="File",o.HTML="Html",o.LOCATION="Location",o.TIME="Time",(r=s||(s={})).PRIVATE="Private",r.READ="Read",r.READ_WRITE="ReadWrite",r.READ_WRITE_TRANSFER="ReadWriteTransfer",r.FULL_ACCESS="FullAccess",r.CONTROLLED_BY_PARENT="ControlledByParent",r.CONTROLLED_BY_CAMPAIGN="ControlledByCampaign",r.CONTROLLED_BY_LEAD_OR_CONTACT="ControlledByLeadOrContact";let baseProps=()=>({required:!1,unique:!1,securityClassification:"Public",caseSensitive:!1,defaultValue:null,displayLocationInDecimal:!1,externalId:!1,picklistValues:[],writeRequiresMasterRead:!1}),makeTextField=e=>{let{label:t,description:a}=e;return{...baseProps(),label:t,type:n.TEXT,length:200,description:a,externalId:!1}},makeIdField=e=>{let{label:t,description:a}=e;return{...baseProps(),label:t,type:n.TEXT,length:50,description:a,externalId:!0}},makeNumberField=e=>{let{label:t,description:a,precision:o,scale:r}=e;return{...baseProps(),label:t,description:a,type:n.NUMBER,externalId:!1,precision:o,scale:r}};[makeIdField({label:y.Rz.FLOW_ID,description:"ID of the most recently viewed flow in the Navattic product tour"}),makeTextField({label:y.Rz.FLOW_TITLE,description:"Title of the most recently viewed flow"}),makeIdField({label:y.Rz.PROJECT_ID,description:"ID of the most recently viewed project"}),makeTextField({label:y.Rz.PROJECT_TITLE,description:"Title of the most recently viewed project"}),makeIdField({label:y.Rz.STEP_ID,description:"ID of the most recently viewed step"}),makeNumberField({label:y.Rz.STEP_NUMBER,description:"Number of the most recently viewed step",precision:5,scale:0}),makeTextField({label:y.Rz.STEP_TITLE,description:"Title of the most recently viewed step"})].map(;let makeFullCustomFieldName=addEntryToFieldMap=removeEntryFromFieldMap=(e,t)=>{let{[t]:a,...o}=e||{};return o},setSelectedSObject=(e,t)=>"Lead"===t?{...e,sobject:t}:{...e,sobject:t,syncToContact:!1},salesforceConfigReducer=(e,t)=>{var a,o;switch(t.type){case"set-selected-sobject":return setSelectedSObject(e,t.payload);case"set-sync-to-contact":if("Contact"===e.sobject)break;return{contactConfig:{sobject:"Contact"},...e,syncToContact:t.payload};case"update-field-map":return{...e,fieldMap:t.payload};case"update-contact-field-map":return{...e,contactConfig:{...e.contactConfig,sobject:"Contact",fieldMap:t.payload}};case"add-field-map-entry":return{...e,fieldMap:addEntryToFieldMap(e.fieldMap,t.payload.key,t.payload.value)};case"remove-field-map-entry":return{...e,fieldMap:removeEntryFromFieldMap(e.fieldMap,t.payload)};case"set-create":return{...e,create:t.payload};case"set-update":return{...e,update:t.payload};case"contact-config-add-field-map-entry":if("Lead"===e.sobject)return{...e,contactConfig:{...e.contactConfig,sobject:"Contact",fieldMap:addEntryToFieldMap(null===(a=e.contactConfig)||void 0===a?void 0:a.fieldMap,t.payload.key,t.payload.value)}};console.warn("Cannot add field map entry for Salesforce Contact");break;case"contact-config-remove-field-map-entry":if("Lead"===e.sobject)return{...e,contactConfig:{...e.contactConfig,sobject:"Contact",fieldMap:removeEntryFromFieldMap(null===(o=e.contactConfig)||void 0===o?void 0:o.fieldMap,t.payload)}};console.warn("Cannot remove field map entry for Salesforce Contact");break;case"set-push-company":return{...e,pushCompany:t.payload}}return e},addFieldToMap=e=>{let{dispatch:t,field:a,type:o}=e,r=makeFullCustomFieldName(a.name);switch(a.label){case y.Rz.FLOW_ID:t({type:o,payload:{key:"last_viewed_flow_id",value:r}});break;case y.Rz.FLOW_TITLE:t({type:o,payload:{key:"last_viewed_flow_name",value:r}});break;case y.Rz.PROJECT_ID:t({type:o,payload:{key:"last_viewed_project_id",value:r}});break;case y.Rz.PROJECT_TITLE:t({type:o,payload:{key:"last_viewed_project_name",value:r}});break;case y.Rz.STEP_ID:t({type:o,payload:{key:"last_viewed_step_id",value:r}});break;case y.Rz.STEP_TITLE:t({type:o,payload:{key:"last_viewed_step_name",value:r}});break;case y.Rz.STEP_NUMBER:t({type:o,payload:{key:"last_viewed_step_number",value:r}})}};var b=a(40761),x=a(56268);let upsertSObjectFields=async e=>{let{webhookId:t,...a}=e,o=await fetch("/api/integration/salesforce/fields?id=".concat(t),{method:"POST",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}}),r=await o.json();return r};var j=a(5001);let fetchProfiles=async e=>{let{webhookId:t,sobjectName:a}=e,o=await fetch("/api/integration/salesforce/permissions?id=".concat(t,"&sobject=").concat(a));if(!o.ok){let e=await o.json();return{error:e.error,profiles:[]}}let r=await (async()=>{try{let e=await o.text(),t=JSON.parse(e);return t}catch(e){return console.error(e),{error:"".concat(e),profiles:[]}}})();return r},syncSalesforceProfiles=async e=>{let{webhookId:t,sobject:a,addProfiles:o,removeProfiles:r,fields:n}=e,s=await fetch("/api/integration/salesforce/permissions?id=".concat(t),{method:j.Z.POST,headers:{"Content-Type":"application/json"},body:JSON.stringify({sobject:a,addProfiles:o,removeProfiles:r,fields:n})});if(!s.ok){let e=await s.json();return{error:e.error}}let i=await s.json(),{profiles:l}=i;return{profiles:l,error:void 0}};var use_load_salesforce_profiles=e=>{let{webhookId:t,sobject:a}=e,[o,r]=(0,c.useState)(!0),[n,s]=(0,c.useState)([]),[i,l]=(0,c.useState)();return(0,c.useEffect)(()=>{let e=!0;return fetchProfiles({webhookId:t,sobjectName:a}).then(async t=>{await (async()=>{if(!e)return;let{profiles:a}=t;if(0===a.length){l("Unable to fetch profiles");return}if(0===a.length){l("Could not query permission profiles");return}s(a)})(),r(!1)}),()=>{e=!1}},[a,t]),(0,c.useMemo)([o,n,i])},S=a(38445),v=a(13710),C=a(77512);let profilesReducer=(e,t)=>{let{profilesChecked:a,profiles:o}=e;switch(t.type){case"init":o=Object.fromEntries(t.profiles.map(),a=Object.fromEntries(t.profiles.map();break;case"set-checked":a={...a,[t.fullName]:t.checked};break;case"check-all":a=Object.keys(a).reduce((e,t)=>({...e,[t]:!0}),{});break;case"check-none":a=Object.keys(a).reduce({})}return{profiles:o,profilesChecked:a}},ProfileEntry=e=>{let{fullName:t,checked:a,onChange:o}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(C.XZ,{name:t,checked:a,onChange:o,className:"mr-4"}),(0,i.jsx)("span",{className:"text-sm font-medium text-gray-600",children:decodeURIComponent(t)})]})};var Configuration_SalesforceProfileConfig=e=>{let{profilesState:t,dispatch:a,loadingProfiles:o}=e,{profiles:r,profilesChecked:n}=t,s=Object.values(r).map(.sort(),c=Object.values(n).every(;return(0,i.jsx)("div",{className:"max-h-48 overflow-auto rounded border border-gray-100",children:o?(0,i.jsx)("div",{className:"flex h-52 w-full items-center",children:(0,i.jsx)(l.L4p,{className:"m-auto text-gray-200"})}):(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("div",{className:"sticky top-0 z-10 border-b border-gray-100 bg-white px-4 py-3",children:(0,i.jsx)(C.XZ,{name:"select-all",labelText:"Select all profiles",checked:c,onChange:()=>{c?a({type:"check-none"}):a({type:"check-all"})}})}),(0,i.jsx)("ul",{role:"list",className:"divide-y divide-gray-200 border-gray-200 text-base",children:s.map(e=>(0,i.jsx)("li",{className:"group mb-0 flex items-center px-4 py-3",children:(0,i.jsx)(ProfileEntry,{checked:n[e],onChange:fullName:e})},e))})]})})};function formatToSalesforceFields(e){return e.map(e=>{let t=e.type===y.zt.STRING?makeTextField(e):e.label===y.Rz.STEP_NUMBER?makeNumberField({...e,scale:0,precision:5}):makeIdField(e);return{inlineHelpText:e.description,...e,...t}})}function SalesforceQuickSetup(e){let{webhook:t,objectName:a,integrationName:o,logo:r,autoMapField:n}=e,[s,l]=(0,c.useState)(!1),[d,u]=(0,c.useState)(!1),[p,m]=(0,c.useState)([]),[h,g]=(0,c.useState)(!1),{fetching:j,profiles:C,error:w}=use_load_salesforce_profiles({webhookId:t.id,sobject:a}),[T,N]=(0,c.useReducer)(profilesReducer,{profiles:{},profilesChecked:{}});(0,c.useEffect)([j,C]);let handleUpdateProfilePermissions=async e=>{let o=Object.keys(T.profilesChecked).filter(,r=await syncSalesforceProfiles({webhookId:t.id,sobject:a,fields:formatToSalesforceFields(e),addProfiles:o,removeProfiles:[]});if(r.error){(0,f.Rn)("Could not update profile permissions: ".concat(r.error));return}},createFieldsOnPlatform=async e=>{let o=await upsertSObjectFields({webhookId:t.id,sobject:a,fields:formatToSalesforceFields(e)});return await handleUpdateProfilePermissions(e),o},E=(0,c.useMemo)(()=>y.VG.filter(,[]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b.Z,{objectName:a,logo:r,integrationName:o,onClick:),(0,i.jsx)(v.Z,{name:o,logo:r,handleNext:function(e){g(!0);let t=y.VG.filter(t=>e.includes(t.name));createFieldsOnPlatform(t).then(e=>{if(e.fields){let t=e.fields.map(,a=y.VG.filter(;m(a),l(!1),g(!1),u(!0)}})},loading:h,allowedFields:E,open:s,handleClose:()=>{l(!1)},children:(0,i.jsxs)("div",{className:"mt-5 flex flex-col",children:[(0,i.jsxs)("div",{className:"mb-2 flex flex-row space-x-2 text-sm font-medium text-gray-600",children:[(0,i.jsx)("span",{children:"Grant field access to profiles"}),(0,i.jsx)(x.Z,{className:"my-auto",children:"You can still create fields without granting access to profiles, but you will need to manually grant access in Salesforce."})]}),(0,i.jsx)("div",{children:(0,i.jsx)(Configuration_SalesforceProfileConfig,{profilesState:T,dispatch:N,loadingProfiles:j})})]})}),(0,i.jsx)(S.Z,{name:o,logo:r,open:d,handleClose:handleNext:()=>{let e=y.VG.filter(;e.forEach(n),u(!1)}})]})}let SalesforceIcon=e=>{let{className:t}=e;return(0,i.jsx)(l.XjB,{className:(0,m.AK)("text-gray-300","h-4 w-4 shrink-0",t)})};var SalesforceContactConfig=function(e){var t,a;let{webhook:o,integrationSettings:r,state:n,dispatch:s,contactSObject:l,onUpdateFieldMap:c}=e,{fields:d,fetching:m}=use_load_sobject_fields({webhookId:o.id,sobject:"Contact",onError:f.Rn}),[{data:y}]=(0,p.x)({variables:{workspaceId:o.workspaceId}});return l?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(SalesforceQuickSetup,{webhook:o,logo:r.Logo,integrationName:r.name,objectName:l.name,autoMapField:e=>{addFieldToMap({dispatch:s,field:e,type:"contact-config-add-field-map-entry"})}}),!m&&(null==y?void 0:y.formFieldMetadata)&&(0,i.jsx)(u.Z,{title:l.name,toIcon:()=>(0,i.jsx)(SalesforceIcon,{className:"mr-2"}),fromIcon:()=>(0,i.jsx)(g.H,{className:"mr-2 h-4 w-4"}),preventDuplicates:!0,fromOptions:(0,h.E)(y.formFieldMetadata).map(e=>({label:e.name,value:e.id})),toOptions:d.map(e=>({label:e.label,value:e.name})),mappings:Object.entries(null!==(a=null===(t=n.contactConfig)||void 0===t?void 0:t.fieldMap)&&void 0!==a?a:{}).map((e,t)=>{let[a,o]=e;return{from:a,to:o,id:t.toString()}}),onChange:e=>c(Object.fromEntries(e.map(e=>[e.from,e.to])))})]}):(0,i.jsx)("div",{className:"rounded bg-gray-50 px-3 py-2 text-sm text-rose-900",children:"Could not fetch Contact object from Salesforce"})},w=a(1991),T=a(5430),N=a(18318),E=a(52934),k=a(47330),R=a(45152);let stringifyConfig=var _=a(20851),I=a(83408);let P=(0,I.hu)("debug:navattic:salesforce");var F=a(86414),O=a(16377),M=a(35196),A=a(34126),L=a(13077);a(34406);let storeSalesforceInfo=D="".concat(O.Z.APP_URL,"/oauth/salesforce"),formatOAuthSignInHost=()=>"".concat("https://login.salesforce.com").concat("/services/oauth2/authorize"),formatOAuthSignInUrl=e=>{let{clientId:t,state:a}=e;return"".concat(formatOAuthSignInHost(),"?").concat(A.stringify({redirect_uri:D,client_id:t,response_type:"code",state:a}))};var U=a(64766),Z=a(170);let H={name:"Salesforce",screenshot:"https://www.navattic.com/img/integrations/salesforce.png",allowTestConnection:!0,webhookFormat:k.M8.Salesforce,Logo:l.XjB,ConnectComponent:e=>{let{clientId:t,integrationSettings:a}=e,{workspace:o}=(0,R.cF)(),{Logo:r}=a,goToSalesforceLogin=()=>{if(!t)return;if(!(null==o?void 0:o.slug)){(0,f.Rn)("Need workspace slug");return}F.Z.track("salesforce_integration_oauth_clicked");let e=storeSalesforceInfo({workspaceSlug:o.slug});window.location.href=formatOAuthSignInUrl({clientId:t,state:e})};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("form",{onSubmit:children:[(0,i.jsx)("h4",{className:"mb-1 text-base font-semibold",children:"Connect Navattic to Salesforce"}),(0,i.jsx)("div",{className:"mb-3 text-sm text-gray-600",children:"Salesforce will prompt you to grant read/write permission on objects, layouts, and permissions."}),(0,i.jsxs)("button",{className:"btn-white mt-7 bg-white font-medium shadow",type:"submit",children:[(0,i.jsx)(r,{className:"mr-2 h-4 w-4"}),"Connect to Salesforce"]})]})})},ConfigurationComponent:function(e){var t,a;let{webhook:o,integrationSettings:r}=e,{workspace:n}=(0,R.cF)(),s=(0,R.NK)(n,k.TT.Enrichment),l=JSON.parse(o.config||"{}"),{loading:m,sobjects:y}=function(e){let{webhook:t}=e,[a,o]=(0,c.useState)([]),[r,n]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{if(!(null==t?void 0:t.id))return;let e=!0;return n(!0),fetch("".concat((0,w.T6)(),"?id=").concat(t.id)).then(async t=>{if(e){if(n(!1),t.ok){let e=await t.json();o(e.sobjects)}else(0,f.Rn)("Could not retrieve available Salesforce objects")}}),,[t]),{sobjects:a,loading:r}}({webhook:o}),[b,x]=(0,c.useState)(!1),[{data:j}]=(0,p.x)({variables:{workspaceId:o.workspaceId}}),[S,v]=(0,c.useReducer)(salesforceConfigReducer,l),{sobject:_="",fieldMap:I={},create:P=!1,update:F=!1,syncToContact:O=!1,pushCompany:M=!1}=S,{fields:A,fetching:L}=use_load_sobject_fields({sobject:_,webhookId:null==o?void 0:o.id,onError:f.Rn}),[,D]=(0,E.I)(),onSaveIntegration=onSaveConfig=()=>{if(!(null==o?void 0:o.id))return;let updateWebHookOrError=async()=>{let e=await D({id:null==o?void 0:o.id,config:stringifyConfig(S)});if(e.error)throw Error("Error saving: ".concat(e.error.message))},e=updateWebHookOrError();return d.A.promise(e,{success:"Saved Salesforce object configuration!",loading:"Saving Salesforce configuration...",error:),e},U=y.find(,{Logo:Z}=r;return(0,i.jsxs)("div",{className:"mx-auto max-w-md",children:[(0,i.jsxs)("div",{className:"mb-4",children:[(0,i.jsxs)("div",{"data-testid":"sobject-name-selector",className:"mb-6",children:[(0,i.jsx)("label",{className:"label-small normal-case",children:"Sync to"}),(0,i.jsx)(N.Z,{disabled:m,placeHolder:"Select Salesforce object",items:y.map(,renderSelectedIcon:()=>(0,i.jsx)(SalesforceIcon,{className:"mr-2"}),selectFirstItem:!0,selected:_,onChange:e=>{let{id:t}=e;return v({type:"set-selected-sobject",payload:t})}})]}),_&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"pb-3",children:[(0,i.jsx)(C.XZ,{checked:P,onChange:e=>v({type:"set-create",payload:e}),labelText:"Create new Salesforce ".concat(null!==(t=null==U?void 0:U.labelPlural)&&void 0!==t?t:""," from Navattic visitors"),name:"checkbox-create",className:"mb-3"}),(0,i.jsx)(C.XZ,{checked:F,onChange:e=>v({type:"set-update",payload:e}),labelText:"Update existing Salesforce ".concat(null!==(a=null==U?void 0:U.labelPlural)&&void 0!==a?a:""," from Navattic visitors"),name:"checkbox-create"})]}),(0,i.jsx)(SalesforceQuickSetup,{webhook:o,logo:r.Logo,integrationName:r.name,objectName:_,autoMapField:),(null==j?void 0:j.formFieldMetadata)&&(0,i.jsx)(u.Z,{title:_,toIcon:fromIcon:preventDuplicates:!0,mappings:Object.entries(I).map((e,t)=>{let[a,o]=e;return{from:a,to:o,id:t.toString()}}),fromOptions:(0,h.E)(j.formFieldMetadata).map(e=>({label:e.name,value:e.id})),toOptions:A.map(,onChange:e=>v({type:"update-field-map",payload:Object.fromEntries(e.map()})}),"Lead"===_&&(0,i.jsxs)("div",{className:"mt-5",children:[(0,i.jsxs)("div",{className:"flex flex-row items-center space-x-3 text-sm",children:[(0,i.jsx)(C.rs,{checked:O,onChange:e=>v({type:"set-sync-to-contact",payload:e})}),(0,i.jsx)("span",{className:"text-sm leading-none text-gray-500",children:"Also update Contact if exists"})]}),O&&(0,i.jsx)(SalesforceContactConfig,{contactSObject:y.find(,state:S,dispatch:v,webhook:o,integrationSettings:r,onUpdateFieldMap:e=>v({type:"update-contact-field-map",payload:e})}),s&&(0,i.jsx)(T.Z,{checked:M,onChange:recordsName:"Account",containerProps:{className:"mt-2 flex space-x-2"}})]})]})]}),(0,i.jsx)("div",{className:"flex justify-end",children:(0,i.jsxs)("button",{disabled:b,onClick:onSaveIntegration,className:"btn-white mt-3 w-full justify-center bg-white font-medium shadow",children:[(0,i.jsx)(Z,{className:"mr-2"}),"Save configuration"]})})]})},DevelopmentComponent:e=>{let[t,a]=(0,c.useState)("create-field"),[o,r]=(0,c.useState)("{}"),[n,s]=(0,c.useState)(""),[l,u]=(0,c.useState)(0),{webhook:p}=e,onClick=async()=>{if(!t){(0,f.Rn)("Need to specify a method");return}let e=(0,_.OA)(o);if(!e){(0,f.Rn)("Invalid JSON body provided");return}d.A.promise((async()=>{let a=await fetch("/api/private/salesforce",{method:j.Z.POST,headers:{"Content-Type":"application/json"},body:JSON.stringify({sobject:"Lead",webhookId:p.id,method:t,data:e})}),o=await a.text(),r=(0,_.OA)(o);r?(P.log(r),s(JSON.stringify(r,null,2))):s(o),u(a.status)})(),{loading:"Sending request to Salesforce...",success:"Successfully hit Salesforce endpoint",error:)};return(0,i.jsxs)("div",{className:"mx-auto max-w-md",children:[(0,i.jsx)("label",{htmlFor:"select-method",className:"label-small",children:"Select method"}),(0,i.jsx)(N.Z,{selected:t,onChange:disabled:!1,items:[{id:"add-navattic-fields-to-layout"},{id:"create-field"},{id:"delete-navattic-fields"},{id:"describe-sobject"},{id:"list-fields"},{id:"list-layouts"},{id:"list-profiles"},{id:"read-layout"},{id:"read-profile"},{id:"remove-navattic-section-from-layout"},{id:"sync-navattic-fields"},{id:"update-profile-permissions"}].map(}),(0,i.jsx)(C.gx,{id:"json-body",labelText:"JSON body",style:{fontFamily:"Consolas,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New, monospace"},className:"mt-3 w-full",value:o,onChange:r}),(0,i.jsx)("button",{className:"btn-blue my-3 w-full",onClick:onClick,children:"Send Test Request"}),(0,i.jsx)(C.gx,{id:"json-response",readOnly:!0,labelText:"Response",style:{fontFamily:"Consolas,Monaco,Lucida Console,Liberation Mono,DejaVu Sans Mono,Bitstream Vera Sans Mono,Courier New, monospace"},className:"mt-3 w-full",value:n,placeholder:"Response goes here"}),l?(0,i.jsx)("label",{className:"label-base text-base text-gray-500",children:"Status: ".concat(l)}):null]})}};alesforceIntegrationPage.getLayout=var z=!0,B=SalesforceIntegrationPage}},);
//# sourceMappingURL=salesforce-40f427c777d363a1.js.map